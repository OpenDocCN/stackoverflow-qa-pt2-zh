# StackOverflow 问答 14959000-14959999

# jsp - Struts2 将对象内部的映射绑定到动作属性

> ID：14959003
> 
> 赞同：1
> 
> 时间：2013-02-19T13:42:16.997
> 
> 标签：jsp, struts2, ognl

**第 1 部分：** 有一个对象 (ObjectA) 有另一个对象 (ObjectB)。对象 B 中有一个 Hashmap。这个 hashmap 有一个字符串作为键，另一个对象“ObjectC”作为值。此哈希图已使用 s:iterator 和 s:textfield 显示在 jsp 上，并且显示正确。即 s:textfield 中的“值”是正确的，但“名称”不是。现在，修改文本字段时出现问题。我们如何在动作类的 ObjectC 中捕获修改后的值？

```
public class ObjectA implements Serializable {
    private Integer attr1;
    private List<ObjectB> objB;
    //...getters and setters.... 
```

```
public class ObjectB implements Serializable {
private Integer attr11;
private Map<String,ObjectC> myMap;
    // ...getters and setters.... 
```

```
public class ObjectC implements Serializable {
private Integer attr111;
public String attr112;
    // ...getters and setters.... 
```

* * *

**jsp代码：**

```
<s:iterator value="#objB.myMap" var="fieldMap" status="fieldStatus">

<li><label><s:property value="#fieldMap.key"/></label><span>
<s:textfield name="<NOT SURE>" value="%{#fieldMap.value.attr12}"  /></span></li>

</s:iterator> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:33:19.590

在您的情况下，**objB**是一个`List`包含一个`HashMap`，然后一个`HashMap`用于`List`.

```
objA
  |--- objB[0]
    |-- objC[A]
    |-- objC[B]
    |-- objC[C]
  |--- objB[1]
    |-- objC[X]
    |-- objC[Y]
    |-- objC[Z]
  |--- objB[n]
    |-- objC[N1]
    |-- objC[N2]
    |-- objC[N3] 
```

然后，您需要两个迭代器和以下`OGNL`符号来引用具有`name`属性的单个元素：

```
<s:iterator value="objA.objB" var="listRow" status="listStatus">
<!-- Iterating the List -->
    <s:iterator value="#listRow.myMap" var="mapRow" >
    <!-- Iterating the Map -->
        <li>
            <label>
                <s:property value="#mapRow.key"/>
            </label>
            <span>
                <s:textfield value="%{#mapRow.value.attr12}"  
                  name="objA.objB[#listStatus.index].myMap[#mapRow.key].attr112"
                />
            </span>
        </li>
    </s:iterator> 
</s:iterator> 
```

# ajax - JSF 2 - 在 ajax 调用的会话超时时显示对话框

> ID：14959006
> 
> 赞同：2
> 
> 时间：2013-02-19T13:42:30.837
> 
> 标签：ajax, jsf-2, session-timeout

我是 JSF 新手，我正在处理 JSF 应用程序的会话超时。我正在尝试使代码适用于 ajax 调用，但到目前为止无法实现。我尝试了两种方法：

方法 1：SessionListener（用于清理工作）和 SessionFilter（用于过滤每个请求并检查会话是否超时）我的过滤器代码片段：

```
if ((request instanceof HttpServletRequest)  
            && (response instanceof HttpServletResponse)) {  
        HttpServletRequest httpServletRequest = (HttpServletRequest) request;  
        HttpServletResponse httpServletResponse = (HttpServletResponse) response;  

        // is session expire control required for this request? (not required for home page or timeout page or JSF resources)  
        if (isSessionControlRequired(httpServletRequest)) {  

            // is session invalid?  
            if (isSessionInvalid(httpServletRequest)) {  
                String timeoutUrl = httpServletRequest.getContextPath() + "/timeout.html";  
                logger.info("session is invalid! redirecting to timeoutpage : " + timeoutUrl);  
                //httpServletResponse.sendRedirect(timeoutUrl);  
                //final FacesContext facesContext = FacesContext.getCurrentInstance();  
                //final ExternalContext externalContext = facesContext.getExternalContext();  
                //externalContext.dispatch("/start.jsp");  
                RequestDispatcher rd = httpServletRequest.getRequestDispatcher("/timeout.html");  
                rd.forward(httpServletRequest, httpServletResponse);  
                return;  
            }  
        }  
    }  
    chain.doFilter(request, response); 
```

方法二：CustomeExceptionHandler 处理 ViewExpiredException handle() 的代码片段：

```
for (final Iterator<ExceptionQueuedEvent> it = getUnhandledExceptionQueuedEvents().iterator(); it.hasNext();) {  
        Throwable t = it.next().getContext().getException();  
        while ((t instanceof FacesException || t instanceof ELException) && null != t.getCause()) {  
            t = t.getCause();  
        }  
        if (t instanceof ViewExpiredException) {  
            final FacesContext facesContext = FacesContext.getCurrentInstance();  
            final ExternalContext externalContext = facesContext.getExternalContext();  
            final Map<String, Object> requestMap = externalContext.getRequestMap();  
            NavigationHandler nh = facesContext.getApplication().getNavigationHandler();  
            try {  
                final String viewId = ((ViewExpiredException) t).getViewId();  
                String message = "View has expired. " + viewId;  
                logger.error(message);  
                requestMap.put("errorMsg", message);  
                try {  
                    requestMap.put("currentViewId", viewId);  
                    nh.handleNavigation(facesContext, null, "/timeout.html");  
                    facesContext.renderResponse();  

                    // Force JSF to render the error page in its entirety to the ajax response.  
                    //facesContext.setViewRoot(facesContext.getApplication().getViewHandler().createView(facesContext, "/timeout.html"));  
                    //facesContext.getPartialViewContext().setRenderAll(true);  
                    //facesContext.renderResponse();  

                    //RequestContext rc = RequestContext.getCurrentInstance();  
                    //rc.execute("addTitleDialog.show()");  

                    //externalContext.dispatch("/start.jsp");  
                }  
                catch (final Exception e) {  
                    logger.error("Cannot dispatch to /start.jsp");  
                }  
                facesContext.responseComplete();  
            }  
            finally {  
                it.remove();  
            }  
        }  
        else {  
            logger.error(t.getMessage(), t);  
        }  
    }  
    getWrapped().handle();  
} 
```

这两种方法都适用于非 ajax POST 调用，但不适用于 ajax 调用。当我在调试模式下运行我的应用程序时，我还可以单步执行 ajax 调用的所有语句，这让我知道控件确实来到了我的代码中，执行了它，但由于某种原因，UI 上没有任何反应。我一直在尝试将用户重定向到超时页面，但理想的做法是显示一个 JSF 对话框并在点击“确定”后将用户带到主屏幕（我的应用程序没有登录屏幕。）我也有一个基本问题，视图到期与会话超时完全相同吗？

任何帮助将不胜感激，谢谢，斯瓦蒂。

# vim - 如何配置 tortoiseHg 以使用 gvimdiff 而不是 kdiff3？

> ID：14959010
> 
> 赞同：1
> 
> 时间：2013-02-19T13:42:40.503
> 
> 标签：vim, mercurial, tortoisehg

在“设置”中全局设置它似乎被忽略了（双击快照仍然打开 kdiff3）。

![在此处输入图像描述](../Images/12a17a468aaefc36010ce36883939939.png)

# csv - prestashop 导入子类别 CSV

> ID：14959012
> 
> 赞同：1
> 
> 时间：2013-02-19T13:42:48.130
> 
> 标签：csv, prestashop

如何使用 CSV 文件在 Prestashop 中导入子类别？我在谷歌上找不到任何好东西，而且我已经尝试了一整天。

我试过了：

```
Name*
hardware,"graphics cards"
hardware,printers
hardware,monitors
hardware,speakers
hardware,keyboards
hardware,mice 
```

和：

```
Name*
hardware
hardware,"graphics cards"
hardware,printers
hardware,monitors
hardware,speakers
hardware,keyboards
hardware,mice 
```

但似乎没有任何效果？硬件是主要类别，其他是子类别。我可以导入普通类别，客户等我只有子类别有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T09:45:08.257

一个问题可能是字段分隔符。prestashop 导入中的默认值为 ; 您应该将其替换为 , 或将 csv 中的逗号替换为 ;

# html - 图表中的空值

> ID：14959016
> 
> 赞同：0
> 
> 时间：2013-02-19T13:43:04.890
> 
> 标签：html, extjs4

我在存储中给图表的空值有问题。我想在值为 null 时打破系列，并在值返回数字时继续行。我在 extJs3 中做到了。

数据点：

```
 Ext.define('DataPoint', {
        extend: 'Ext.data.Model',
        fields: [
                {name: 'time', type: 'date', dateFormat: 'Y-m-d H:i'}, 
                {name: 'val',mapping:'value', type: 'float', useNull:true, convert: function(v, record){ if(v == null){return undefined}return parseInt(v)}}, ],
        idProperty: 'time',
        persistenceProperty: 'data'
    }); 
```

店铺：

```
store = Ext.create('Ext.data.Store', {
        model: 'DataPoint',
        proxy:{
            type: 'ajax',
            url: linePanel.url,
            reader: {
                type: 'json',
                root: 'data'
            }
        },
        sorters: [{ 
            property: 'time'
        }],
        format: 'json',
        idProperty: 'time',
        root: 'data'
    }); 
```

图表：

```
Ext.create('Ext.chart.Chart', {
        renderTo: linePanel.columnChart.body.dom,
         store: store,
        axes: [
           {
               type: 'Category',
               position: 'bottom',
               fields: ['time'],
           },
           {
               title: linePanel.unit,
               type: 'Numeric',
               position: 'left',
               minimum: 0,
               maximum: 100,
               majorTickSteps: 1

           }
       ],
         series: [
            { xField: 'time', 
                yField: 'val', 
                type: 'line',
                highlight : true,
                smooth: true,
                style: {
                    stroke: '#00b300',
                    'stroke-width': 5,
                    color: '#00b300',
                },
                markerConfig: {
                    type: 'circle',
                    stroke: '#00b300',
                    color: '#00b300'
                }

            }
         ]
   }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T07:40:10.367

我从 sencha 得到答案，这是[解决方案](http://www.sencha.com/forum/showthread.php?256838-Null-values-in-Chart&p=940332#post940332)

# c# - 在链表 C# 中获取循环

> ID：14959018
> 
> 赞同：-3
> 
> 时间：2013-02-19T13:43:12.210
> 
> 标签：c#, data-structures, singly-linked-list

我有一个程序可以在 c# 中创建一个链表，如下所示：

```
class Point
{
    public string Name { get; set; }
    public List<Point> NextPoints { get; set; }

    public Point()
    {
        NextPoints = new List<Point>();
    }
} 
```

这是具有名称和下一个点的点对象。

我用数据填充点列表，

```
List<Point> Points; 
```

我在这里定义了一条线：

```
class DashedLine
{
    public Point X { get; set; }
    public Point Y { get; set; }

} 
```

我需要一个递归函数来获取给定**DashedLine的循环**

这样我就传递了**DashedLine**对象，该函数返回一个构成循环的点列表。

请帮我做这个功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:49:53.250

考虑改变你的数据结构，可能是这样的：

```
class Program
{
    static void Main(string[] args)
    {
        DashedLine line = new DashedLine();
        line.Points.Add(new Point { X = 1, Y = 1 });
        line.Points.Add(new Point { X = 2, Y = 2 });
        line.Points.Add(new Point { X = 3, Y = 3 });
        line.Points.Add(new Point { X = 4, Y = 4 });

        foreach (Point p in line.Points)
        {
            Debug.WriteLine("Point {0}, {1}", p.X, p.Y);
        }
    }
}

class Point
{
    public int X { get; set; }
    public int Y { get; set; }
}

class DashedLine
{
    public List<Point> Points { get; set; }

    public DashedLine()
    {
        Points = new List<Point>();
    }
} 
```

输出：

```
Point 1, 1
Point 2, 2
Point 3, 3
Point 4, 4 
```

# asp.net - DDR Treeview Menu 显示选定的根及其子节点

> ID：14959022
> 
> 赞同：6
> 
> 时间：2013-02-19T13:43:48.027
> 
> 标签：asp.net, xml, xslt, treeview, dotnetnuke

我正在为 DotNetNuke 开发一个 DDR Treeview 菜单，以仅显示选定的根项目及其要展开的子节点。这是我想要实现的目标。（左侧垂直菜单）有什么建议吗？

![在此处输入图像描述](../Images/d988df32d19b258e0805a11b25f2bc30.png)

这是 xslt 代码，当前显示所有根项目。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html"/>
  <xsl:param name="ControlID" />
  <xsl:param name="Options" />
  <xsl:template match="/*">
    <xsl:apply-templates select="root" />
  </xsl:template>
  <xsl:template match="root">
    <xsl:if test="node">
      <ul class="treeview filetree" id="{$ControlID}">
        <xsl:apply-templates select="node" />
      </ul>
      <script type="text/javascript">
        jQuery(function($) {
          $("#<xsl:value-of select="$ControlID" />").treeview(
            <xsl:value-of select="$Options" disable-output-escaping="yes" />
          );
        });
      </script>
    </xsl:if>
  </xsl:template>
  <xsl:template match="node">
    <li>
      <xsl:if test="node and (@depth != 0 or @breadcrumb = 1)">
        <xsl:attribute name="class">open</xsl:attribute>
      </xsl:if>
      <xsl:choose>
        <xsl:when test="@enabled = 0">
          <xsl:value-of select="@text" />
        </xsl:when>
        <xsl:otherwise>
          <a href="{@url}">
            <xsl:choose>
              <xsl:when test="@selected=1">
                <xsl:attribute name="class">selected breadcrumb</xsl:attribute>
              </xsl:when>
              <xsl:when test="@breadcrumb=1">
                <xsl:attribute name="class">breadcrumb</xsl:attribute>
              </xsl:when>
            </xsl:choose>
            <xsl:value-of select="@text" />
          </a>
        </xsl:otherwise>
      </xsl:choose>
      <xsl:if test="node">
        <ul style="list-item-style:none">
          <xsl:apply-templates select="node" />
        </ul>
      </xsl:if>
    </li>
  </xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T09:26:23.230

如果您提供了一个您想要转换的输入代码示例，将会有所帮助。

我认为它基本上是这样的：

```
<root>
  <node enabled="1" depth="1" text="Service" selected="true" breadcrumb="0"/>
  <node>
    <node>
      <node/>
    </node>
  </node>
  <node>
    <node/>
  </node>
  <node/>
</root> 
```

您可以跳过第一个模板匹配和那些第一个 if 元素并直接匹配您感兴趣的内容。无需测试，这样的事情应该可以解决问题：

```
<!-- ... -->
<!-- process only "root" elements that have at least one "node" element -->
<xsl:template match="/root[node]">
  <ul class="treeview filetree" id="{$ControlID}">
    <xsl:apply-templates select="node" />
  </ul>
  <!-- ... -->
</xsl:template>
<xsl:template match="node">
  <!-- ... -->
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T02:56:56.330

如果没有源 XML，很难弄清楚您在这里尝试做什么，但我想说您获得*所有*节点的主要原因是与`node`元素匹配的模板是递归的并且不会隐藏后代。如果您在模板末尾的元素上添加`display:none`属性（或更改为`style`），您可能会得到您想要的。`ul``node``list-item-style``display`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-13T13:46:29.153

如果您只获取根项目，则需要更改[`NodeSelector`](http://www.dnnsoftware.com/wiki/page/DDRMenu-reference-guide#NodeSelector_1)菜单的定义。我相信速记值`RootChildren`会给你你想要的。

# javascript - 如何使用 pivot.js 对空值进行排序

> ID：14959024
> 
> 赞同：0
> 
> 时间：2013-02-19T13:43:51.583
> 
> 标签：javascript, jquery, pivot

我使用[Pivot.js](http://rjackson.github.com/pivot.js/#)库在我的数据上创建透视视图。该库使用 jquery.dataTables 来显示最终的数据透视表。不幸的是，Pivot.js 在排序时存在空值问题。

当使用以下设置时，可以在[github-site](http://rjackson.github.com/pivot.js/#)上轻松看到该错误：

> **过滤字段：** Englewood
> 
> **行标签字段：** last_name
> 
> **列标签字段：** invoice_yyyy
> 
> **汇总字段：** billed_amount

然后，按“2010”列排序。结果将如下所示。 ![示例排序错误](../Images/8b1e61a58bd2f806fde2e38997f95c19.png)

似乎该列像字符串一样排序，因为某些行包含空值（逻辑上）并用“”填充。排序适用于每行包含一个值的完整列。2010 年的栏目不完整且 $90.10 !< $850.00

如果不更改 Pivot.js 库中的代码，如何避免此错误？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-15T15:37:32.173

您需要为数据表提供一组新的排序函数，然后添加一个`aTypes`函数来自动分配相应的数据类型（例如格式化数字） - [http://datatables.net/release-datatables/examples/plug-ins/排序插件.html](http://datatables.net/release-datatables/examples/plug-ins/sorting_plugin.html)

这里的棘手之处在于 jquery_pivot.js（与 pivot.js 一起提供）使用不间断空格点 ( `&nbsp;`) 表示空值（[https://github.com/rjackson/pivot.js/blob/master/jquery_pivot.js #L347](https://github.com/rjackson/pivot.js/blob/master/jquery_pivot.js#L347)）。我建议 jquery_pivot.js 只是一个建议的 UI 实现，您应该可以为您的应用程序自由修改它；但是，如果您不想修改它，则会留下两种可能不受欢迎的行为：

1.  如您所见，dataTables 的自动类型检测会遍历`&nbsp;`并且将列视为字母数字进行排序。
2.  即使您使用它来检测数字排序，空值通常也会被视为集合中的最小值或最大值。在我的应用程序中，我更喜欢这种`NULLS LAST`方法（即，无论升序/降序排序如何，它们总是出现在表格的末尾）。

我的解决方案远非最优雅的，但这是我的代码：

排序功能：

```
jQuery.extend( jQuery.fn.dataTableExt.oSort, {
    "formatted-num-pre": function ( a ) {
        a = (a==='&nbsp;') ? NaN : a.replace( /[^\d\-\.]/g, "" );
        return parseFloat( a );
    },
    "formatted-num-asc": function ( a, b ) {
        if(isNaN(a)) return 1;
        if(isNaN(b)) return -1;
        return a-b;
    },
    "formatted-num-desc": function ( a, b ) {
        if(isNaN(a)) return 1;
        if(isNaN(b)) return -1;
        return b-a;
    }}); 
```

类型检测：

```
jQuery.fn.dataTableExt.aTypes.unshift(
  function (data) { 
    return (data.charAt(0)==='$'||data==='&nbsp;')?'formatted-num':null; 
  }); 
```

希望能帮助到你！

# javascript - 多次ajax调用后页面加载图像

> ID：14959029
> 
> 赞同：0
> 
> 时间：2013-02-19T13:44:06.947
> 
> 标签：javascript, ajax, jquery, loading

我已经给了一个加载图像绑定到这样的 ajax 启动/停止函数..

```
$('#LoadingImage').bind('ajaxStart', function(){
    $(this).show();
}).bind('ajaxStop', function(){ 
    $(this).hide();
}); 
```

现在我在 document.ready() 下的页面上有许多 ajax 调用。所以所有 ajax 调用同时开始..但是 ajax 停止根据 ajax 中的结果而有所不同..所以会发生什么

加载图像出现，当一个 ajax 调用完成时，图像被隐藏并显示我的主屏幕.. 有没有办法加载图像直到最后的 ajax 调用完成？？？

```
<script type="text/javascript">

$(document).ready(function () {

$('#LoadingImage').on('ajaxStart', function(){
        $(this).show();
}).on('ajaxStop', function(){   
        $(this).hide();

});

$.ajax({
                url: http:www.google.com(for example i gave this url),
                data:JSON.stringify({login:{"loginid":userid,"reqType":"R"}}),
                type: 'POST',
                dataType:"json",
                contentType: 'application/json',
                success: function(data) {  
$.each(data.GetRejectedRequestsMethodResult,function(key,val){
                              //some code

error: function(data, status, jqXHR) {                       
                    alert('There was an error.');
                }

        }); // end $.ajax 

$.ajax({
                url: http:www.google.com(for example i gave this url),
                data:JSON.stringify({login:{"loginid":userid,"reqType":"R"}}),
                type: 'POST',
                dataType:"json",
                contentType: 'application/json',
                success: function(data) {  
$.each(data.GetRejectedRequestsMethodResult,function(key,val){
                              //some code

error: function(data, status, jqXHR) {                       
                    alert('There was an error.');
                }

            }); // end $.ajax 
$.ajax({
                url: http:www.google.com(for example i gave this url),
                data:JSON.stringify({login:{"loginid":userid,"reqType":"R"}}),
                type: 'POST',
                dataType:"json",
                contentType: 'application/json',
                success: function(data) {  
$.each(data.GetRejectedRequestsMethodResult,function(key,val){
                              //some code

error: function(data, status, jqXHR) {                       
                    alert('There was an error.');
                }

            }); // end $.ajax 
$.ajax({
                url: http:www.google.com(for example i gave this url),
                data:JSON.stringify({login:{"loginid":userid,"reqType":"R"}}),
                type: 'POST',
                dataType:"json",
                contentType: 'application/json',
                success: function(data) {  
$.each(data.GetRejectedRequestsMethodResult,function(key,val){
                              //some code

error: function(data, status, jqXHR) {                       
                    alert('There was an error.');
                }

            }); // end $.ajax 

$.ajax({
                url: http:www.google.com(for example i gave this url),
                data:JSON.stringify({login:{"loginid":userid,"reqType":"R"}}),
                type: 'POST',
                dataType:"json",
                contentType: 'application/json',
                success: function(data) {  
$.each(data.GetRejectedRequestsMethodResult,function(key,val){
                              //some code

error: function(data, status, jqXHR) {                       
                    alert('There was an error.');
                }

            }); // end $.ajax 
```

像上面我有很多ajax调用...问题是第一个ajax完成后图像隐藏了..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:52:42.390

您可以设置一个变量，该变量在 Ajax 启动时递增，在 Ajax 完成时递减。在 ajaxStop 函数中检查此变量是否为 0。如果为零则仅隐藏图像。

这样做，

```
$(document).ready(function () {
  var count=0;
  $('#LoadingImage').on('ajaxStart', function(){
      count++;
     if(count===1){
         $(this).show();
     }
  }).on('ajaxStop', function(){
     //count is decrementing and on same time checking whether it becomes zero
     if(!--count){
       $(this).hide();
     }
  });

  //suppose 10 simultanious ajax calls
  for(var j=0;j<10;j++){
     $.ajax({
     //configure whatever you want
     });   
  }
}); 
```

这应该有效（理论上）。

# asp.net-mvc - 如何忽略 MVC 中未实现 Icontroller 错误？

> ID：14959030
> 
> 赞同：0
> 
> 时间：2013-02-19T13:44:06.970
> 
> 标签：asp.net-mvc, jquery, asp.net-mvc-routing

我有一个控制器类如下：

```
public partial class GenericViewController : Controller
    {
        public virtual void StoreUrl(string url)
        {
            Session["URL"] = url;
        }
    } 
```

我正在尝试使用 jquery ajax 调用此方法，如下所示：

```
 $.ajax(
                {
                    type: "POST",
                    cache:false,
                    url: "http://" + baseUrl + "/GenericView/StoreUrl",
                    data: { url: applicationurl },
                    error: Error
                }); 
```

现在，当我触发 ajax 调用时，出现以下错误

```
[HttpException]: The controller for path &#39;/GenericView/StoreUrl&#39; was not found or does not implement IController.
   at System.Web.Mvc.DefaultControllerFactory.GetControllerInstance(RequestContext requestContext, Type controllerType)
   at System.Web.Mvc.DefaultControllerFactory.CreateController(RequestContext requestContext, String controllerName)
   at System.Web.Mvc.MvcHandler.ProcessRequestInit(HttpContextBase httpContext, IController& controller, IControllerFactory& factory)
   at System.Web.Mvc.MvcHandler.<>c__DisplayClass6.<BeginProcessRequest>b__2()
   at System.Web.Mvc.SecurityUtil.<>c__DisplayClassb`1.<ProcessInApplicationTrust>b__a()
   at System.Web.Mvc.SecurityUtil.<GetCallInAppTrustThunk>b__0(Action f)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust(Action action)
   at System.Web.Mvc.SecurityUtil.ProcessInApplicationTrust[TResult](Func`1 func)
   at System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContextBase httpContext, AsyncCallback callback, Object state)
   at System.Web.Mvc.MvcHandler.BeginProcessRequest(HttpContext httpContext, AsyncCallback callback, Object state)
   at System.Web.Mvc.MvcHandler.System.Web.IHttpAsyncHandler.BeginProcessRequest(HttpContext context, AsyncCallback cb, Object extraData)
   at System.Web.HttpApplication.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute()
   at System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) 
```

我已尝试执行以下操作以在注册路由中解决此问题，但我仍然收到相同的错误

```
 routes.IgnoreRoute("Ignore/");
 routes.IgnoreRoute("{*GenericView}", new { GenView= @"(.*/)?GenericView(/.*)?" });
 routes.RouteExistingFiles = false;
 routes.IgnoreRoute("GenericView/{*pathInfo}"); 
```

附加说明：此代码托管在名为 LookupData 的应用程序中，该应用程序作为应用程序托管在与 url abc.com 映射的 IIS 网站下，然后 abc.com 托管一个执行身份验证的应用程序，abc.com/LookupData 将命中该应用程序托管上面的代码。单独运行时 Lookupdata 不会引发此错误，但是当通过 abc.com 访问时，应用程序无法解析 GenericViewController。

我不明白我的代码中的错误在哪里。任何人都可以提出解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T23:48:51.720

您解决此问题的一个解决方案实际上添加了一个错误：

```
routes.IgnoreRoute("GenericView/{*pathInfo}"); 
```

这会导致 Mvc 忽略到“GenericViewController”的任何路由——除非你没有使用“约定优于配置”——因此不会在其上调用任何方法（如 StoreUrl）。

添加

```
routes.IgnoreRoute("{*GenericView}", new { GenView= @"(.*/)?GenericView(/.*)?" }); 
```

可能有相同的结果。

只需删除 routes.IgnoreRoute("{*GenericView}"

# android - 允许用户放大android textview

> ID：14959031
> 
> 赞同：0
> 
> 时间：2013-02-19T13:44:09.337
> 
> 标签：android, textview

是否可以允许用户在 android 应用程序中缩放 textview 的内容。

现在我创建了一个应用程序，用户无法放大或缩小

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:45:22.987

不。文本是静态的。如果要缩放它，则必须使用 GestureListener 并以编程方式更改文本大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:47:46.213

您可以使用`sp`而不是`dp`作为字体大小单位，以便文本根据设备设置进行缩放。

# compiler-errors - 类型转换不能有聚合操作数（modelsim 中的错误）

> ID：14959037
> 
> 赞同：1
> 
> 时间：2013-02-19T13:44:20.743
> 
> 标签：compiler-errors, type-conversion, vhdl

我是 VHDL 的新手。在 modelsim6.5b 中编译时出现以下错误

> 1.  类型转换（到 g）不能有聚合操作数，
> 2.  中缀运算符“and”没有可行的条目，
> 3.  变量赋值中的目标类型 ieee.std_logic_1164.std_ulogic 不同于 - 表达式类型 std.stadard.integer

对这些及其背后的原因的任何帮助都会有所帮助。

这是我写的包

```
library ieee;
use ieee.std_logic_1164.all;
use ieee.std_logic_unsigned.all;

package enc_pkg is

    constant n       : integer := 1;
    constant k       : integer := 2;
    constant m       : integer := 3;
    constant L_total : integer := 10;
    constant L_info  : integer := 10;

    type t_g is array (1 downto 1, 3 downto 1)of std_logic;
    signal g:t_g;
    type array3_10 is array (3 downto 1, 10 downto 0) of std_logic;
    type array2_10 is array (2 downto 1, 10 downto 0) of std_logic;

    procedure rsc_encoder(
        x          : in  std_logic_vector(1 to 10);
        terminated : in  std_logic;
        y          : out array2_10);

    procedure encode_bit(input     : in  std_logic;
                         state_in  : in  std_logic_vector(1 to 2);
                         output    : out std_logic_vector(1 to 2);
                         state_out : out std_logic_vector(1 to 2));

    procedure encoderm
        (infor_bit : in  std_logic_vector(1 to 8);
         en_output : out std_logic_vector(1 to 20));

end enc_pkg;

package body enc_pkg is

    procedure rsc_encoder(
        x          : in  std_logic_vector(1 to 10);
        terminated : in  std_logic;
        y          : out array2_10)is

        variable state      : std_logic_vector(1 to 2);
        variable d_k        : std_logic;
        variable a_k        : std_logic;
        variable output_bit : std_logic_vector(1 to 2);
        variable state_out  : std_logic_vector(1 to 2);
    begin
        for i in 1 to m loop
            state(i) := '0';
        end loop;
        for i in 1 to L_total loop
            if(terminated = '0' or (terminated = '1' and i <= L_info))
            then
                d_k := x(i);
            elsif(terminated = '1' and i > L_info)then
                d_k := (g(1, 2) and state(1)) xor (g(1, 3) and state(2));
            end if;
            a_k           := (g(1, 1) and d_k) xor (g(1, 2) and state(1)) xor (g(1, 3)) and state(2));
            encode_bit(a_k, state, output_bit, state_out);
            state         := state_out;
            output_bit(1) := d_k;
            y(1, i)       := output_bit(1);
            y(2, i)       := output_bit(2);
        end loop;
    end rsc_encoder;

    procedure encode_bit(input     : in  std_logic;
                         state_in  : in  std_logic_vector(1 to 2);
                         output    : out std_logic_vector(1 to 2);
                         state_out : out std_logic_vector(1 to 2))is

        variable temp : std_logic_vector(1 to 2);
    begin
        for i in 1 to n loop
            temp(i) := g(i, 1) and input;
            for j in 2 to k loop
                temp(i) := temp(i) xor (g(i, j) and state_in(j-1));
            end loop;
        end loop;
        output    := temp;
        state_out := input & state_in(m-1);
    end encode_bit;

    procedure encoderm
        (infor_bit : in  std_logic_vector(1 to 8);
         en_output : out std_logic_vector(1 to 20))is
--type array2_10 is array (2 downto 1, 10 downto 0) of integer;
--type  array3_10 is array (3 downto 1, 10 downto 0) of integer;
        variable interleaved : std_logic_vector(1 to 10);
        variable input       : std_logic_vector(1 to 10);
        variable puncture    : std_logic;
        variable output      : array3_10;
        variable y           : array2_10;
        variable en_temp     : std_logic_vector(1 to 10);

    begin
        input := "0000000000";
        for i in 1 to 8 loop
            input(i) := infor_bit(i);
        end loop;
        rsc_encoder(input, terminated 1, y);
        for i in 1 to 10 loop
            output(1, i) := y(1, i);
            output(2, i) := y(2, i);
        end loop;

        interleaved(1)  := output(1, 1);
        interleaved(2)  := output(1, 4);
        interleaved(3)  := output(1, 7);
        interleaved(4)  := output(1, 10);
        interleaved(5)  := output(1, 2);
        interleaved(6)  := output(1, 5);
        interleaved(7)  := output(1, 8);
        interleaved(8)  := output(1, 3);
        interleaved(9)  := output(1, 6);
        interleaved(10) := output(1, 9);

        rsc_encoder(interleaved, terminated 0, y);

        for i in 1 to 10 loop
            output(3, i) := y(2, i);
        end loop;

        if puncture = '1'then
            for i in 1 to 10 loop
                for j in 1 to 3 loop
                    en_output(3*(i-1)+j) := output(j, i);
                end loop;
            end loop;
        elsif puncture = '0' then
            for i in 1 to L_total loop
                en_temp(n*(i-1)+1) := output(1, i);
                if((i rem 2) = 1)then
                    en_temp(n*i) := output(2, i);
                else

                    en_temp(n*i) := output(3, i);
                end if;
            end loop;
        end if;
        en_output := en_temp;
    end encoderm;

end enc_pkg; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:10:24.770

让我们来看一小部分代码：

```
type g is array (1 downto 1, 3 downto 1)of integer; 
```

...

```
variable state      : std_logic_vector(1 to 2); 
```

...

```
a_k           := (g(1, 1) and d_k) xor (g(1, 2) and state(1)) xor (g(1, 3)) and state(2)); 
```

两件事情：

## 类型

`g`是一种类型，而不是一个信号......

做这样的事情。首先，您在 VHDL 中定义一个新类型。然后你创建（现在让我们谈谈 C）一个新创建类型的“变量”。在这个（再次，让我们谈谈 C）“变量”上，你做你的事情。

```
type t_g is array (1 downto 1, 3 downto 1)of integer;
signal g: t_g; 
```

## 运营商

`g(1,2)`是一个整数，`state(1)`是一个标准逻辑。没有`and`将这两种类型组合在一起的运算符。你需要这样的东西：

```
if state(1) = '1' then
   ....
else
   ....
end if; 
```

# android - 像这张图片一样的imageview位置设置

> ID：14959039
> 
> 赞同：3
> 
> 时间：2013-02-19T13:44:31.803
> 
> 标签：android, layout, position, imageview

我喜欢这样设置 Imageview。

( [http://wemakeucc.com/4.jpg](http://wemakeucc.com/4.jpg) ) <-请检查图片

到目前为止，我只使用这样的 imageview。

```
<ImageView
     android:id="@+id/a_01_b"
     android:layout_width="wrap_content"
     android:layout_height="match_parent" 
     android:src="@drawable/a_01_i" /> 
```

所以我想知道可以像该图像一样设置图像视图的代码。

我应该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:57:09.800

请参阅下面的 xml

```
<?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" >

    <ImageView android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignParentRight="true"
       android:layout_marginRight="40dip"
       android:layout_marginTop="60dip" // give dip value according to where you want to place first image view from top
       android:background="@color/black" // set image according to you
       android:id="@+id/imageviewone" />

    <ImageView android:layout_width="wrap_content"
       android:layout_height="wrap_content"
       android:layout_alignParentLeft="true"
       android:layout_marginLeft="40dip"
       android:layout_marginTop="60dip" // give dip value what you have given to first edit text
       android:background="@color/black" // set image according to you
       android:layout_below="@+id/imageviewone"
       android:id="@+id/imageviewtwo" />
    </RelativeLayout> 
```

让我知道这是否对您有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:10:53.397

这是根据您的要求的代码：

xml文件：和截图

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:orientation="vertical"
        android:paddingBottom="30dp"
        android:paddingRight="20dp"
        android:paddingTop="20dp" >

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/android" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="right"
        android:orientation="vertical"
        android:paddingBottom="30dp"
        android:paddingRight="120dp"
        android:paddingTop="20dp" >

        <ImageView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:src="@drawable/android" />
    </LinearLayout>

</LinearLayout> 
```

![在此处输入图像描述](../Images/8eabf9767c8081ecb084aeb5d36af0ed.png)

现在只需根据您的需要设置填充...

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-19T13:55:10.993

您正在寻找的答案在 [ `LayoutParams`][1] 中。

回答你的问题：

```
ImageView iv = (ImageView)findViewById(R.id.my_imageView);
AbsoluteLayout.LayoutParams absParams = 
    (AbsoluteLayout.LayoutParams)iv.getLayoutParams();
absParams.x = myX;
absParams.y = myY;
iv.setLayoutParams(absParams); 
```

解释：您正在为您的 ImageView 设置某种锚点（x/y（

# ajax - 发送 POST ajax 以将产品添加到报价单

> ID：14959040
> 
> 赞同：1
> 
> 时间：2013-02-19T13:44:33.473
> 
> 标签：ajax, backbone.js, many-to-many, backbone-relational

我的背景更多是服务器端而不是前端。所以我可能缺乏一些基本的前端知识。

我有一个端点叫

```
/quotations/:id/products 
```

如果您执行 POST 操作，这意味着您要将产品添加到指定的报价单，其中 :id 表示报价单 ID。

在我的架构中，报价和产品具有多对多的关系。

端点还期望数据以`products[]`.

意思是说，如果我想将 id 为 2、7 和 154 的产品添加到报价单 3

我在发帖

```
<input name="products[]" value="2" />
<input name="products[]" value="7" />
<input name="products[]" value="154" /> 
```

到网址`/quotations/3/products`

我的问题是如何使用 Backbone 为这个设置创建模型和视图？

我买了 Addy Osmani 关于开发 Backbone.js 应用程序的书。所以我设置了类似于[他的示例](http://addyosmani.github.com/backbone-fundamentals/#exercise-2-book-library---your-first-restful-backbone.js-app)的主干。

只有一个[直接添加模型](http://addyosmani.github.com/backbone-fundamentals/#adding-models)的示例。

**希望我得到一个遵循 Osmani 为将子级添加到父级行为类型而制定的约定的答案。**

Osmani 还提到了[Backbone Relational](http://backbonerelational.org)。

我不确定我是否应该使用它甚至如何使用。我已阅读文档，但我不确定如何将其融入 Osmani 构建他的 Backbone 示例应用程序的方式。

**更新：**

如果成功，我希望页面重定向到另一个名为`/success`.

如果是失败，我希望页面在某处显示失败消息。假设有一个`<div id="message"></div>`我要更新。

换句话说，对于失败，页面将保留为单页应用程序。

为了成功，该页面转到另一个页面。

至于用于返回 JSON 回复等的服务器端代码，我可以毫无问题地做到这一点。假设我使用 PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T15:31:31.163

我最近遇到了类似的问题，我不能肯定地告诉你这是最好的方法，但这是我发现可靠工作的方法。我尝试了 BackboneRelational，但遇到了麻烦。

这假设您需要在 1 步中创建 Quote 对象和 ProductQuotation。

*   为新报价设置视图

*   关于这个视图的初始化：

    A) 创建一个新的空报价模型

    B) 为 ProductQuotes 创建一个新集合

    C) 为您添加的每个 ProductQuote 创建一个新的 ProductQuote 视图

    D) 将 Quote 视图订阅到自定义 Backbones 事件绑定（[Backbone JS：一个视图可以在其他视图中触发更新吗？](https://stackoverflow.com/questions/9984859/backbone-js-can-one-view-trigger-updates-in-other-views)），即

    `Backbone.pubSub.on('quote_new-product-save', this.AddProduct, this)`

    现在，只要您触发此事件，此视图就会调用 AddProduct。

*   在初始化每个 ProductQuote 视图时，创建一个新的 Product 模型

*   为您的用户连接此视图以填写任何适用的信息，并在完成后将此信息设置为该视图产品模型并触发上述“quote_new-product-save”事件并将该产品模型传递给它。

*   回到 Quote 视图，AddProduct 将被自动调用，因为它已绑定到此事件。您应该连接它以接收新的 Product 模型并将其添加到 ProductQuotes 集合中。

*   因此，现在您将 Product 模型数据设置为 ProductQuotes 集合，但这仍然没有直接链接到当前 Quote（仍未保存），因此将模型上的“order_items”属性设置为 ProductQuote 集合中的所有模型IE

    `this.model.set('product_quotes', this.collection.models)`

现在，您未保存的 Quote 模型将您的 ProductQuotes 集合的所有成员设置为属性。

现在您需要在 Quote 模型上调用 save 并将数据发送到服务器。这里要记住的是，您的 urlRoot 设置正确，并且发送到服务器的数据格式正确。我推荐阅读[使用 Rails、backbone.js 和accepts_nested_attributes_for 保存嵌套对象，以](https://stackoverflow.com/questions/5226067/saving-nested-objects-with-rails-backbone-js-and-accepts-nested-attributes-for/5234044#5234044)了解在您的 Quote 模型中覆盖 toJSON 方法。

# javascript - 如何检测textarea上箭头键的按键事件？

> ID：14959048
> 
> 赞同：5
> 
> 时间：2013-02-19T13:45:05.187
> 
> 标签：javascript, events, safari

创建以下 html 页面：

```
<textarea id="code" rows="10"></textarea>
<script>
  document.onkeydown = function(event) {
    alert(event.keyCode);
  }
</script> 
```

**在Mobile Safari**上打开它（在模拟器或带键盘的设备上），点击 textarea 开始编辑。现在按任意箭头键 - 事件不会触发。

如何检测箭头键的向下键？

PS Apple Bug 报告系统上的相关问题：13243285

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T14:07:24.910

苹果官方回复：

> 感谢您联系 Apple 开发者技术支持 (DTS)。我们的工程师已经审查了您的请求，并得出结论认为，鉴于当前发货的系统配置，没有支持的方式来实现所需的功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:58:55.017

```
$(selector).keydown(function(e){
    if (e.keyCode == 37) { 
       alert( "left pressed" );
       return false;
    }
}); 
```

字符代码：

37 - 左

38 岁以上

39 - 对

40 - 下

# .htaccess - 仅重写 .htaccess 中的 url，而不更改使用 get 传递给脚本的参数

> ID：14959056
> 
> 赞同：0
> 
> 时间：2013-02-19T13:45:25.827
> 
> 标签：.htaccess, rewrite

是否可以重写请求的 URL 部分但仍将原始请求作为 get 参数传递给 php.ini

例如，当用户输入搜索请求并且是多个单词、大小写等时，我的搜索 url 可能是 www.mysite.com/search/Search%20Request，我想将 url 重写为全部小写没有编码符号等，所以网址是 www.mysite.com/search/search-request 但我的 get 参数正确传递为 &search=Search%20Request。

如何仅重写 .htaccess 中的 url 而不更改使用 get 传递给脚本的参数。

# php - phpthumb 和 htaccess

> ID：14959058
> 
> 赞同：1
> 
> 时间：2013-02-19T13:45:27.653
> 
> 标签：php, .htaccess, phpthumb

如果我有一个图像（/uploads/image.jpg），并且我有一个脚本（/phpthumb/phpThumb.php），它可以调整图像大小并显示它（不保存！）。

我这样打印图像：

`<img src="/phpthumb/phpThumb.php?src=../uploads/image.jpg&w=100&h=100" alt="" />`

是否可以将其更改为此（使用不存在的目录“thumbs”）：

`<img src="/thumbs/image.jpg?w=100&h=100" alt="" />`

并用 htaccess 重写 url（我尝试了下面的代码，但没有运气）：

`RewriteRule ^thumbs/(.*).(jpg|gif|png)\?(.*)$ /phpthumb/phpThumb.php?src=../uploads/$1.$2&$3 [L]`

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-22T15:33:21.377

查询字符串不能重写，所以我建议你用不同的方法

请求网址：

```
/thumbs/image-100x100.jpg 
```

访问：

改写

```
Engine On
RewriteRule ^thumbs/([a-zA-Z0-9_]+)-([0-9]+)x([0-9]+).(jpg|gif|png)(.*)$ phpthumb.php?src=../uploads/$1.$4&w=$2&h=$3 [L] 
```

您将进入 php 文件：

```
Array
(
    [src] => ../uploads/image.jpg
    [w] => 100
    [h] => 100
) 
```

# gradle - 及时的 Gradle 任务输入/输出配置

> ID：14959060
> 
> 赞同：0
> 
> 时间：2013-02-19T13:45:30.043
> 
> 标签：gradle

我在使用 Gradle 任务配置时遇到了订购问题。

我正在编写一个插件，该插件基于仅在通过构建脚本提供时才可用的信息创建任务。我可以在插件的`apply()`方法中创建任务，并在其方法中配置它`doFirst()`（此时必要的信息可用）。但是，我还想确保仅在必要时通过`inputs`/`outputs`属性执行任务。

这是有问题的，因为我必须在`apply()`方法中执行此操作（据我所知），但此时指定`inputs`/`outputs`属性值所需的信息不可用。

我尝试使用约定对象，但在完成后不可用`apply()`。

有什么办法不会让我觉得脏吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:03:35.350

对于需要延迟的任务配置部分，您可以使用类似`project.afterEvaluate {}`or的钩子`gradle.projectsEvaluated {}`，或者使用约定*映射*。后者被 Gradle 自己的插件广泛使用，但目前不被视为公共 API。

# c++ - SIMD 内在函数 - 它们可以在 gpus 上使用吗？

> ID：14959065
> 
> 赞同：1
> 
> 时间：2013-02-19T13:45:57.763
> 
> 标签：c++, cuda, opencl, simd

我想知道是否可以在 GPU 代码中使用 SIMD 内在函数，例如 CUDA 内核或 openCL 内核。那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T13:48:30.913

不，SIMD 内在函数只是 ASM 代码的微小包装。它们是特定于 CPU 的。更多关于他们[在这里](http://en.wikipedia.org/wiki/Intrinsic_function)。

一般来说，你为什么要这样做？CUDA 和 OpenCL 已经包含许多实际上是“GPU 内在函数”的“函数”（例如，所有这些都是 GPU 的[单点数学内在函数](http://developer.download.nvidia.com/compute/cuda/4_2/rel/toolkit/docs/online/group__CUDA__MATH__SINGLE.html)）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-09T19:54:13.540

您使用 OpenCL C 语言中内置的向量数据类型。例如 float4 或 float8。如果您使用 Intel 或 AMD 设备驱动程序运行，这些应转换为供应商 OpenCL 设备驱动程序的 SSE/AVX 指令。OpenCL 包括几个函数，例如 dot(v1, v2) 应该使用 SSE/AVX 点生成指令。是否存在您认为无法从 OpenCL C 语言中获得的特定内在特性？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T17:24:52.403

大多数情况下不会，因为 GPU 编程语言使用不同的编程模型 (SIMT)。但是，AMD [GPU 确实对 OpenCL 进行了扩展，](http://www.khronos.org/registry/cl/extensions/amd/cl_amd_media_ops.txt)它为某些字节粒度操作提供了内在函数（因此允许将 4 个值打包到 32 位 GPU 寄存器中）。这些操作旨在用于视频处理。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-22T06:10:08.797

是的，只要编译器支持使用这些内在函数，您就可以在 CPU 或 GPU 的内核代码中使用 SIMD 内在函数。

通常使用 SIMD 的更好方法是在内核中使用 Vector 数据类型，以便编译器根据可用性决定使用 SIMD，这也使内核代码具有可移植性。

# python - 我想从一个字符串中提取一个字符串，它的值会改变

> ID：14959073
> 
> 赞同：0
> 
> 时间：2013-02-19T13:46:16.700
> 
> 标签：python

我有一个长度和值会有所不同的输出，我希望从中提取一个值。

这是我的输出：

```
'+CPBR: 1,"111",129,"0|2|XX"^M' 
```

在这种情况下，我想提取“XX”，

但是，如果值为：

```
'+CPBR: 1,"111",129,"01|2|9X"^M' 
```

有人知道这样做的好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:50:29.787

您可以使用这样的[正则表达式](http://docs.python.org/2/library/re.html)：

```
>>> string = '+CPBR: 1,"111",129,"0|2|XX"^M'
>>> import re
>>> re.search('\|([^|"]+)"',string).group(1)
'XX'
>>> string = '+CPBR: 1,"111",129,"0|2|9X"^M'
'9X'
>>> string = '+CPBR: 1,"111",129,"0|2|ABC"^M'
'ABC' 
```

这将匹配 | 之间的所有内容 和 " 不包含任何字符 (|")。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:51:32.027

```
In [2]: a=r'+CPBR: 1,"111",129,"0|2|XX"^M'

In [3]: b=r'+CPBR: 1,"111",129,"01|2|9X"^M'

In [4]: a.split('|')[-1][0:2]
Out[4]: 'XX'

In [5]: b.split('|')[-1][0:2]
Out[5]: '9X' 
```

# flash - ItemRenderer contentBackgroundColor

> ID：14959074
> 
> 赞同：0
> 
> 时间：2013-02-19T13:46:18.867
> 
> 标签：flash, apache-flex

我需要一些代码的紧急帮助。我使用 flex builder 3，我需要突出显示具有符号“A、B、C、D、E、F、G、H、I、G、K、L”的内容，我需要用它们突出显示我的清单中有一些颜色。在我的情况下，我不`t know how to do this, some people say that i need to use itemRender, but i don`知道该怎么做。这是代码：

```
 <mx:Script>
        <![CDATA[
            import mx.collections.ArrayCollection;

            [Bindable]                
            private var myDP:ArrayCollection = new ArrayCollection([
                {label1:"Alexey", Visble:false},
                {label1:"A", Visibe:true},     
                {label1:"B", Visibe:true},     
                {label1:"C", Visibe:true},     
                {label1:"D", Visibe:true},     
                {label1:"E", Visibe:true},     
                {label1:"F", Visibe:true},     
                {label1:"G", Visibe:true},     
                {label1:"H", Visibe:true},     
                {label1:"I", Visibe:true},     
                {label1:"G", Visibe:true},     
                {label1:"K", Visibe:true},     
                {label1:"L", Visibe:true},     

                {label1:"Bill", Visibe:false},     
                {label1:"Den", Visibe:false},     
                {label1:"Dima", Visibe:false},     
                {label1:"Kolya", Visibe:false},     
                {label1:"Vasya", Visibe:false},     
                {label1:"Sergei", Visibe:false},     
                {label1:"Petya", Visibe:false},     
                {label1:"Alina", Visibe:false},     
                {label1:"Dina", Visibe:false},     
                {label1:"Vlada", Visibe:false},     
                {label1:"Tolya", Visibe:false},     
                {label1:"Sasha", Visibe:false}     

            ]);               
        ]]>
    </mx:Script>

    <mx:DataGrid id="myDG" dataProvider="{myDP}" 
        x="100"
        y="200"
        width="300"
        height="200"
        variableRowHeight="false" 
        editable="false">

        <mx:columns>
            <mx:DataGridColumn dataField="label1" editorDataField="text" headerText="Name">

            </mx:DataGridColumn>
        </mx:columns>
    </mx:DataGrid> 

</mx:Application> 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:51:52.810

你可以尝试这样的事情：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Application xmlns:mx="http://www.adobe.com/2006/mxml" 
            layout="absolute" minWidth="955" minHeight="600">
<mx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;

        public var letters:String = "ABCDEFGHIGKL";

        [Bindable]                
        private var myDP:ArrayCollection = new ArrayCollection([
            {label1:"Alexey", visible:false},
            {label1:"A", visible:true},     
            {label1:"B", visible:true},     
            {label1:"C", visible:true},     
            {label1:"D", visible:true},     
            {label1:"E", visible:true},     
            {label1:"F", visible:true},     
            {label1:"G", visible:true},     
            {label1:"H", visible:true},     
            {label1:"I", visible:true},     
            {label1:"G", visible:true},     
            {label1:"K", visible:true},     
            {label1:"L", visible:true},     

            {label1:"Bill", visible:false},     
            {label1:"Den", visible:false},     
            {label1:"Dima", visible:false},     
            {label1:"Kolya", visible:false},     
            {label1:"Vasya", visible:false},     
            {label1:"Sergei", visible:false},     
            {label1:"Petya", visible:false},     
            {label1:"Alina", visible:false},     
            {label1:"Dina", visible:false},     
            {label1:"Vlada", visible:false},     
            {label1:"Tolya", visible:false},     
            {label1:"Sasha", visible:false}     

        ]);      
    ]]>
</mx:Script>

<mx:DataGrid id="myDG" dataProvider="{myDP}" 
             x="100"
             y="200"
             width="300"
             height="200"
             variableRowHeight="false" 
             editable="false">

    <mx:columns>
        <mx:DataGridColumn dataField="label1" editorDataField="text" headerText="Name">
            <mx:itemRenderer>
                <mx:Component>
                    <mx:HBox horizontalGap="0">
                        <mx:Script>
                            <![CDATA[
                                override public function set data( value:Object ) : void 
                                {
                                    super.data = value;

                                    var isInLetters:Boolean = false;

                                    for (var i:int = 0; i < outerDocument.letters.length; i++)
                                    {
                                        if (outerDocument.letters.charAt(i) == (data.label1 as String).charAt(0))
                                        {
                                            laFirst.setStyle("color", "0xff0000");
                                            laFirst.setStyle("fontWeight", "bold");

                                            isInLetters = true;
                                            break;
                                        }
                                    }
                                    if (!isInLetters)
                                    {
                                        laFirst.setStyle("color", "0x000000");
                                        laFirst.setStyle("fontWeight", "normal");
                                    }
                                }
                            ]]>
                        </mx:Script>

                        <mx:Label id="laFirst"  text="{String(data.label1).charAt(0)}" paddingRight="0"/>
                        <mx:Label text="{String(data.label1).substr(1, String(data.label1).length - 1)}" paddingLeft="-11"/>
                    </mx:HBox>
                </mx:Component>
            </mx:itemRenderer>
        </mx:DataGridColumn>
    </mx:columns>
</mx:DataGrid> 

</mx:Application> 
```

![在此处输入图像描述](../Images/855b3a2f3751cad17373b758b0edb3f3.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:46:18.237

您将需要创建自己的单元格渲染器。

一些例子：

*   [这里 - 详细](http://www.sephiroth.it/tutorials/flashPHP/cellRenderer/index.php)
*   [这里 - 更好 - 但用法语](http://philflash.inway.fr/example.html)

在行级别进行更改要容易得多，因为您可以对整个数据网格进行子类化。

# c# - 将正则表达式限制为单词边界

> ID：14959075
> 
> 赞同：0
> 
> 时间：2013-02-19T13:46:25.977
> 
> 标签：c#, .net, regex

我有一些文字

```
"Lorem ipsum dolor sit amet, consectetuer adipiscing elit." 
```

我有一个正则表达式，它是从用户输入生成的。

```
@".*ip.*" 
```

正如您所期望的那样，这与整行匹配，因此我用单词边界包装了这个表达式。

```
@"\b.*ip.*\b" 
```

因为处理器是贪婪的，所以这仍然匹配整个文本。所以，我试着让重复变得懒惰。

```
@"\b.*?ip.*?\b" 
```

这更好，但匹配

1.  `Lorem ipsum`
2.  `dolor sit amet, consectetuer adipiscing`

如何扩展原始`@".*ip.*"`模式，使其懒惰地匹配整个单词并捕获？

1.  `ipsum`
2.  `adipiscing`

* * *

这个[正则表达式测试器](http://derekslager.com/blog/posts/2007/09/a-better-dotnet-regular-expression-tester.ashx)可能对回答问题很有用

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T13:52:04.063

为什么不直接使用`\w*`而不是`.*?`：

```
@"\w*ip\w*" 
```

这也将匹配`_`，`0-9`因为它包含在`\w`. 如果你想排除它，你可以`[a-zA-Z]*`显式地使用而不是`\w`那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:52:56.997

您已经接近解决方案。只需用非空白转义序列 \S 替换点（任何字符）：

```
@"\b\S*?ip\S*?\b" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T14:01:38.637

我认为有些单词可以包含连字符，所以最好使用模式`[\w-]*ip[\w-]*`

# smarty - 在 Prestashop 1.5 上回退到 Smarty2

> ID：14959082
> 
> 赞同：0
> 
> 时间：2013-02-19T13:46:48.120
> 
> 标签：smarty, prestashop

有没有办法在 Prestashop 1.5 中使用 smarty2 而不是 smarty3 ？我已经从 1.2.5 更新，主题被破坏了。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:59:23.610

也许尝试 Smarty 的向后兼容性功能。

在文件“/config/smarty.config.inc.php”中，替换：

```
require_once(_PS_SMARTY_DIR_.'Smarty.class.php');
global $smarty;
$smarty = new Smarty(); 
```

经过

```
require_once(_PS_SMARTY_DIR_.'SmartyBC.class.php');
global $smarty;
$smarty = new SmartyBC(); 
```

# ios - UITableViewCell 内的 UIWebView，检测到链接但不可点击

> ID：14959084
> 
> 赞同：1
> 
> 时间：2013-02-19T13:46:54.330
> 
> 标签：ios, uitableview, uiwebview

我有`UITableView`一个`UITableViewCell`子类。在那个类中，我正在创建`UIWebView`并将委托设置为该类。我也在实施`shouldStartLoadWithRequest`。

`loadHTMLString`在加载 tableview 时，我用 HTML 字符串（不是来自网络）调用 cell.webView 。

在我用导航类型 5 调用之后。`loadHtmlString`这`shouldStartLoadWithRuquest`也意味着委托工作正常。

现在，我可以看到`UIWebView`带有文本和蓝色链接的链接，但是当我单击链接时，`shouldStartLoadWithRequest`不会调用该链接，并且什么也没有发生。

我读了一些关于不实现`UIWebView`in 的内容`UIScrollView`，但我也禁用了 的滚动`UIWebView`，我只是用它`UILabel`来显示 HTML 文本。

任何想法为什么单击链接不起作用并且`shouldStartLoadWithRequest`不会触发？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:01:37.487

呸。

回答我自己的问题。

UITableViewCell 对象在其他地方设置为 userInteractionEnabled = NO..

更改为YES后，它可以工作。不是我的幸运日。

# mysql - 修改 MYSQL 查询以获取两个表之间的 JOIN

> ID：14959086
> 
> 赞同：0
> 
> 时间：2013-02-19T13:46:56.283
> 
> 标签：mysql, sql

我正在努力修改这个查询（thx sgeddes），以便不仅从 db_events.events 字段中获得结果，而是将它与一些 db_system.devices 字段连接起来

```
SELECT e.* 
FROM db_events.events e 
   JOIN (
      SELECT Max(id) MaxId, device_id
      FROM db_events.events
      GROUP BY device_id ) e2 on e.Id = e2.MaxId AND e.device_id = e2.device_id
WHERE e.device_id IN (
            SELECT device_id 
            FROM db_system.devices 
            WHERE vendor = 1)
ORDER BY e.id DESC 
```

如何在不重复子查询的情况下获得它：

```
 SELECT * 
            FROM db_system.devices 
            WHERE vendor = 1 
```

我需要得到`db_system.devices.brand`并`db_system.devices.model`加入最终结果，我尝试逐步修改它，我尝试使用临时表，我怀疑它应该是简单的，但我没有能够做到，当然非常感谢你。 ..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:50:10.227

这是你想要的吗？

```
SELECT  e.*, a.* 
FROM    db_events.events e 
        INNER JOIN 
        (
            SELECT Max(id) MaxId, device_id
            FROM db_events.events
            GROUP BY device_id 
        ) e2 on e.Id = e2.MaxId AND 
                e.device_id = e2.device_id
        INNER JOIN db_system.devices a
            ON e.device_id = a.device_id  AND 
                a.vendor = 1
ORDER   BY e.id DESC 
```

条件`a.vendor = 1`也可以在`WHERE`子句中移动，结果仍然相同，因为您正在使用`INNER JOIN`

```
SELECT ....
FROM   .... JOIN ....
WHERE  a.vendor = 1
ORDER  BY ... 
```

# java - 2个子类中的相同getter和setter..？

> ID：14959088
> 
> 赞同：0
> 
> 时间：2013-02-19T13:47:02.923
> 
> 标签：java, oop, inheritance

我不是那么好的OO设计..所以请多多包涵..

我有 A 类和 2 个扩展 A 的类。但它们都有相同的字段。所以更好的是，在 A 中使用 getter/setter 或在两个子类中使用相同的 getter/setter。或者是否有一个更好的方法来做到这一点..？

这就是我所做的（模拟）..

```
 class A{

    private int x;

    protected A(int x){
    this.x = x;
    }

    public static A createA(id a, int x){
    switch(a){
    case 0: 
    return new C(x);
    break;
    //so on

    }

    public int getX(){
    return x;
   }

    } 
```

谢谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:53:31.647

这取决于类

如果这些属性是 A 的属性，那么是的，如果只是机会它们具有相同的属性，那么不是。

基本上你需要问自己的问题是，是否会有一个扩展 A 的类不需要这些属性。

如果答案是否定的，则将它们放在 A 上，

如果答案是肯定的，请将它们保留在子类中，或者在这两个子类之间创建另一个抽象类，具有这两个属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:54:23.973

假设您的班级是`A`（父母）和`B`（`C`孩子）。你这么说`B`并且`C`有一些相同的字段。

问问自己：如果你有另一个类`D`，它的子类，`A`不管它的具体功能如何，它是否也会有这些字段？

*   如果答案是肯定的，那么这两个子类中这些字段的存在绝对不是巧合，所以你可能应该在 中定义它们`A`，因为这意味着它们具有这些成员正是因为它们继承自`A`。

*   如果答案是否定的，那么子类中这些字段的存在可能是巧合，也可能不是巧合。所以，你应该扪心自问：即使`D`没有这些领域，它们在两者中的存在`B`和`C`看起来不仅仅是巧合吗？这些类是否共享 的`D`另一个孩子`A`根本不会共享的东西？

    *   如果是，那么考虑一个新的类`E`extends `A`，`E`定义这些公共成员，然后 make`B`和`C`children of`E`而不是`A`。

    *   如果不是（如果在你看来只是巧合），那么就让你的结构保持原样。或者考虑一个接口。

# python - 事件处理铁蟒

> ID：14959093
> 
> 赞同：0
> 
> 时间：2013-02-19T13:47:13.817
> 
> 标签：python, .net, ironpython

如果有 4 个按钮，都具有相同的 Click 事件，我如何找出按下了哪个按钮？

如果事件看起来像这样`def Button_Click(self, sender, e):`，我相信我可以以某种方式将发件人与我的按钮进行比较。但是怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:55:56.890

好吧，我从来没有使用过 IronPython，所以我不知道这会有多大帮助，但是当我试图在常规 python 中找出这些东西时，我通常会做的是`print type(sender)`到`print sender`控制台`print dir(sender)`（或者输出到文件，如果你没有可用的控制台）。

这应该可以帮助您弄清楚“发件人”参数到底是什么。在最简单的情况下，它可能是按钮本身，所以一个简单的`==`方法就可以知道它是哪个按钮。或者它可能有一个方法/属性来获取按钮对象。在这种情况下，`dir(sender)`可能包含一个明显的，或者如果没有，谷歌搜索类名`type(sender)`，看看你是否能找到任何文档。

# c# - 传递 HttpContext.Request 参数或使用静态实例？

> ID：14959101
> 
> 赞同：0
> 
> 时间：2013-02-19T13:47:31.893
> 
> 标签：c#, asp.net-mvc, httprequest, httpcontext

在 MVC3 应用程序中，我需要从传入的 Http 请求中包含的值构造一个域对象。逻辑非常复杂，以至于我创建了一个工厂类，负责创建我的域对象。

我的问题是是否将控制器的 Request 属性的值传递给这个工厂类，还是应该从工厂类内部引用静态 HttpContext.Request 属性的值？

我的目的是对控制器和工厂类进行单元测试，这样我就可以在某处执行必要的开销来设置 HttpContext。我只是想知道是否有任何一般规则要遵守？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:49:27.820

只需将 a 传递`NameValueCollection`给您的工厂类：

```
public SomeDomainObject ConstructDomainObject(NameValueCollection data)
{
    ...
} 
```

然后在您的控制器中简单地：

```
var domainModel = factory.ConstructDomainObject(Request.Params); 
```

现在，您可以随心所欲地对该`ConstructDomainObject`方法进行单元测试。

如果你想单独测试你的控制器，那么让这个工厂对象实现一个接口：

```
public interface IMyFactory
{
    SomeDomainObject ConstructDomainObject(NameValueCollection data);
} 
```

您的控制器将使用：

```
public class SomeController: Controller
{
    private readonly IMyFactory factory;  
    public SomeController(IMyFactory factory)
    {
        this.factory = factory;
    }

    public ActionResult SomeAction()
    {
        var domainModel = this.factory.ConstructDomainObject(Request.Params);
        ...
    }
} 
```

说了这么多，您是否考虑过编写自定义模型绑定器？在 ASP.NET MVC 中，模型绑定器的职责就是：从请求中实例化一些模型。这样，您无需重新发明一些轮子，但您将为此目的使用框架中内置的内容。

# java - Java 编译文件目录问题

> ID：14959102
> 
> 赞同：1
> 
> 时间：2013-02-19T13:47:38.120
> 
> 标签：java, file, compilation, directory, cmd

我只是一个试图学习一些Java的人。实际的编码部分对我来说工作得很好，直到现在我一直在 Eclipse 中工作（对于像我这样的新人来说，Eclipse 是一个非常棒的免费软件，用于编写和编译代码）。但是 Eclipse 自己编译代码，我决心学习如何在没有任何辅助轮子的情况下做到这一点，因为有一天我可能需要这样做。但是，几个月前我已经尝试使用命令提示符手动编译我的代码，最终我厌倦了用头撞砖墙。似乎当我尝试在 cmd 中编译一个简单的 HelloWorld 文件时，所有可能出错的东西都会出错。似乎我不是唯一一个因为这个荒谬的第一道障碍而不断被抛弃的人。直到现在我'

我已经准备好运行我的 HelloWorld 类了。它与我的 .java 文件在同一个文件中。我已经设法使用指定 javac 工具位置的环境变量来编译它。现在我需要做的就是调用 java 工具来运行文件。

创建指定 java 位置的新环境变量会在 cmd 上显示以下错误消息：

> “错误：无法打开 'C:\lib\amd64\jvm.cfg'”

我不知道它为什么选择这个目录，直接跳到 \lib 而不是通过 \Program Files。

正如我的书告诉我的那样，在 cmd 中指定 java 工具的位置会给出以下错误消息：

> “'C:\Program' 未被识别为外部命令、可运行程序或批处理文件。”

这当然只是这种情况，因为我试图指定通向 java 工具的路径，而我的命令目录已经被限制在“C:\Java Code”，这是我的类文件的位置，这是必要的，因为这就是我要运行的文件。

所以简而言之，我能看到的唯一解决方法是一次指定两个命令目录，我很确定这是不可能的。

**解决方案** 就我而言，这是通过两件事解决的；首先重新安装Java。看来我使用了错误的体系结构版本（Oracle 的网站可能一直假设我的计算机是 32 位的）。这似乎解决了“找不到 jvm.cfg 问题”。[其次，按照其中一个响应和此页面](http://vietpad.sourceforge.net/javaonwindows.html)中的描述配置系统变量

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:53:18.417

Right, I had exactly the same problem with compiling my code for the first time. jvm.cfg is always a difficult file. The way i fixed it was: To edit the `PATH` variable or `JAVA_HOME` to the path to jvm.cfg. jvm.cfg is a configuration file for java.

# facebook - 标准进入应用页面后，如何防止 facebook 显示 permissions.request 对话？

> ID：14959110
> 
> 赞同：0
> 
> 时间：2013-02-19T13:48:10.550
> 
> 标签：facebook, facebook-graph-api

我制作了一个 facebook php webapp，我正在使用以下代码使 facebook 重定向到“got to app”权限页面

```
 $params = array(
   scope => 'publish_stream,user_likes',
   redirect_uri => 'https://www.facebook.com/pages/mypage/480192585363812?sk=app_23508216934343'
   );
   $loginUrl = $facebook->getLoginUrl($params);
   echo "<script>
   window.top.location = '$loginUrl';
   </script>"; 
```

这很好用，可以正确地转到页面，但是当我点击“进入应用程序”时，facebook 会显示第二个对话框，URL 是

```
 https://www.facebook.com/dialog/permissions.request 
```

如何防止第二页并允许用户一键授权应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:39:38.210

将其组合成一个单击/对话框（如“授权！”）是故意不可能的。

**解释：**

`user_likes`是一个`Extended Profile Property`并且 `publish_stream`是一个`Extended Permission`。它们没有同时获得授权，因为扩展属性是“访问用户及其朋友数据的非可选权限”。而用户可以选择退出扩展权限

# iphone - 限制 iCloud 联系人/日历同步

> ID：14959113
> 
> 赞同：1
> 
> 时间：2013-02-19T13:48:21.430
> 
> 标签：iphone, ios, synchronization, contacts, icloud

我正在开发一个应用程序，我们在该应用程序中提供了远程联系人、日历等擦除选项。在我们发现 iCloud 之前，该功能运行良好。

现在，当我们从网络向设备发送擦除命令时，它会按预期删除设备中的所有联系人。但是，如果用户设置了 iCloud 帐户并为联系人打开，当联系人因为我们的应用程序的擦除命令而被删除时，联系人应用程序将通知 iCloud，这将从 iCloud 中删除用户的所有联系人。

当用户发送擦除并且他最初可能已经设置了 iCloud 帐户时，他可能不知道这种副作用。

有什么解决方法可以限制 iCloud 删除？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:07:37.440

我不确定这是否有意义。删除联系人而不从 iCloud 中删除它们是行不通的，因为设备只会从 iCloud 再次下载它们。

您是否正在尝试创建一种 MDM 应用程序？

# sql - TSQL如何从字符串中获取第二个数字

> ID：14959114
> 
> 赞同：0
> 
> 时间：2013-02-19T13:48:24.330
> 
> 标签：sql, sql-server

我们在 MS SQL 中有以下行：

`Got event with: 123.123.123.123, event 34, brown fox`

我们如何在一行 SQL 中提取第二个数字，即 34 可靠？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:08:10.663

这是使用的一种方法，`SUBSTRING`并且`PATINDEX`- 我使用了 CTE，所以它看起来不会那么糟糕:)

```
WITH CTE AS (
  SELECT
     SUBSTRING(Data,CHARINDEX(',',Data)+1,LEN(Data)) data
  FROM Test
  )
SELECT LEFT(SUBSTRING(Data, PATINDEX('%[0-9]%', Data), 8000), 
         PATINDEX('%[^0-9]%', 
         SUBSTRING(Data, PATINDEX('%[0-9]%', Data), 8000) + 'X')-1)
FROM CTE 
```

这是一些[Fiddle](http://sqlfiddle.com/#!3/e8a52/2)示例。

如前所述，CTE 仅适用于 2005 年及更高版本。如果您碰巧使用的是 2000，那么这将在没有 CTE 的情况下工作：

```
SELECT LEFT(SUBSTRING(SUBSTRING(Data,CHARINDEX(',',Data)+1,LEN(Data)), 
         PATINDEX('%[0-9]%', SUBSTRING(Data,CHARINDEX(',',Data)+1,LEN(Data))), 8000), 
         PATINDEX('%[^0-9]%', 
         SUBSTRING(SUBSTRING(Data,CHARINDEX(',',Data)+1,LEN(Data)), 
         PATINDEX('%[0-9]%', SUBSTRING(Data,CHARINDEX(',',Data)+1,LEN(Data))), 8000) + 'X')-1)
FROM Test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:17:53.690

只需替换`@s`为您的`column name`即可将其应用于表格。假设该数字在最后一个逗号和最后一个逗号之前的空格之间。[Sql-Fiddle-Demo](http://sqlfiddle.com/#!3/d41d8/9045)

```
declare @s varchar(100) = '123.123.123.123, event 34, brown fox'

select right(first, charindex(' ', reverse(first),1) ) final
from (             
  select left(@s,len(@s) - charindex(',',reverse(@s),1)) first
  --from tableName
) X 
```

***或者***如果它在第一个和第二个逗号之间，那么试试， [DEMO](http://sqlfiddle.com/#!3/d41d8/9071)

```
select substring(first, charindex(' ',first,1), 
                 charindex(',', first,1)-charindex(' ',first,1)) final
from (             
  select right(@s,len(@s) - charindex(',',@s,1)-1) first
) X 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:41:19.737

我想到了另一种尚未提及的方法。假设以下情况属实：

*   第二个“部分”之前总是一个逗号
*   第二部分总是带有数字的“事件”一词
*   您正在使用 SQL Server 2005+

[`ParseName`](http://msdn.microsoft.com/en-us/library/ms188006%28v=sql.90%29.aspx)然后，您可以使用用于解析 SysName 数据类型的内置函数。

```
--Variable to hold your example
DECLARE @test NVARCHAR(50)
SET @test = 'Got event with: 123.123.123.123, event 34, brown fox'

SELECT Ltrim(Rtrim(Replace(Parsename(Replace(Replace(@test, '.', ''), ',', '.'), 2), 'event', ''))) 
```

结果：

> 34

`ParseName`解析点，但我们希望它解析逗号。这是我所做的逻辑：

1.  删除字符串中所有现有的点，在这种情况下将它们与空字符串交换。
2.  将所有逗号交换为点以供`ParseName`使用
3.  使用`ParseName`并要求第二个“片断”。在您的示例中，这为我们提供了值“事件 34”。
4.  从字符串中删除单词“event”。
5.  修剪两端并返回值。

我对性能与其他解决方案没有任何评论，它看起来一样混乱。我想我还是会把这个想法扔出去！

# php - 在 PHP 中使用 fopen() 方法

> ID：14959122
> 
> 赞同：1
> 
> 时间：2013-02-19T13:49:16.980
> 
> 标签：php

我需要在给定的 url 位置获取所有文件。

示例：考虑这个 url - [http://www.test.com/test/](http://www.test.com/test/) 我在给定 url 的 test 文件夹中有三个文件（file1.txt、file2.csv、file3.xls）。如何使用 PHP 中的 fopen() 方法读取文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:04:29.907

这取决于处理您的 URL 的 HTTP 服务器返回目录索引的能力。即使它能够返回索引，这种索引的格式也不是标准化的。如果你知道 HTTP 服务器返回目录索引并且你知道格式，你可以得到这样的文件列表：

```
$index = fopen ('http://ftp.gnu.org/', 'r');
$data = "";
while ($d = fread ($index, 65536))
  $data = $data . $d;

$matches = array ();
preg_match_all ('/href="([^"]+)"/', $data, $matches);

print_r ($matches [1]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:57:53.110

如果您想要的只是某个目录中的文件列表，那么不要`fopen()`尝试[scandir](http://php.net/manual/en/function.scandir.php)：

```
$dir = "http://www.test.com/test/"

$files = scandir($dir);

print_r($files); 
```

如果主机服务器权限允许，您应该得到以下结果：

```
Array(
[0] => .,
[1] => ..,
[2] => file1.txt,
[3] => file2.csv,
[4] => file3.xsl
) 
```

然后，您总是可以循环遍历数组以`<ul>`生成结果，或者您希望显示内容。

# vb.net - datagridviewTextBoxCell Vb.net中带有第一行下划线的多行文本

> ID：14959123
> 
> 赞同：0
> 
> 时间：2013-02-19T13:49:21.317
> 
> 标签：vb.net

我可以在插入时使用 Environment.NewLine 在 datagridViewtextboxcell 中添加多行文本。但我想为第一行添加下划线。那么我如何在 vb.net 中实现这一点

现在我正在处理 DGV 的绘制方法，用于以 2 种颜色显示日期格式的日期（如第一列所示）。

请找到附图， ![在此处输入图像描述](../Images/aac53861357259ceb7c238b5445b4a64.png)

在电子邮件和手机号码的倒数第二列中，我想画下划线。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:29:25.383

我在回答我自己的问题。处理 DataGridView1_CellPainting 并为特定单元格/列调用此方法。首先分离字符串并使用 TextRenderer 类在新位置渲染 2 次。

我不知道这是正确的方法，但它有效。

```
Private Sub CellText_Underline(color As Color, e As DataGridViewCellPaintingEventArgs)

    Dim text As String = e.FormattedValue.ToString()

    Dim nameParts As String() = text.Split(" ")

    Dim topLeft As New Point(e.CellBounds.X, CInt(e.CellBounds.Y + (e.CellBounds.Height / 4)))

    Dim arialBold As New Font("Arial", 11, FontStyle.Regular Xor FontStyle.Underline)

    TextRenderer.DrawText(e.Graphics, nameParts(0), arialBold, topLeft, color)

    Dim topLeft_1 As New Point(e.CellBounds.X, CInt(e.CellBounds.Y + (e.CellBounds.Height / 4) + 5))
    Dim s As Size = TextRenderer.MeasureText(nameParts(0), arialBold)
    Dim p As New Point(topLeft_1.X, topLeft_1.Y + 12)

    Dim arialBold_1 As New Font("Arial", 11, FontStyle.Regular)
    TextRenderer.DrawText(e.Graphics, nameParts(1), arialBold_1, p, SystemColors.WindowText)
End Sub 
```

谢谢。

# tridion - 无法初始化 TDSE 对象。错误代码：0x80040302 (-2147220734)

> ID：14959127
> 
> 赞同：2
> 
> 时间：2013-02-19T13:49:28.910
> 
> 标签：tridion

我正在 Win 2003 服务器上设置 Tridion R 5.3 内容管理器服务器。我的 Windows 服务器没有启用 Active Directory 服务。我在 Tridion 配置管理器中设置的模拟用户是

工作组\mtsuser

因为 2003 服务器不在任何域下。现在，每当我尝试在 //localhost/ 上访问控制台并为 mts 用户输入我的凭据时。控制台上的 Mesaage 显示以下错误，显示为“您无权访问 R 5.3 联系管理员”。

**事件类型：警告
事件源：内核
事件类别：安全
事件 ID：200
日期：2013 年 2 月 15 日
时间：下午 2:11:23
用户：WORKGROUP\mtsuser
计算机：WORKGROUP
描述：
无法初始化 TDSE 对象。
用户 WORKGROUP\mtsuser 的访问被拒绝。
错误代码：
0x80040302 (-2147220734)
调用堆栈：
SystemBLST.GetUserContext
SystemBLST.IBLSecurityST_GetUserContext
TDSE.Initialize** 

请帮助急需解决方案....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:00:30.023

如果您的机器不在域下，那么它`WORKGROUP\mtsuser`来自哪里？谁在管理其凭据？我认为您应该`local machine name\mtsuser`在本地使用和管理凭据。此外，您不应该能够使用 MTSUser 访问 CME。该用户为系统用户，仅供系统使用。此外，由于您使用的是 5.3 版本，因此您应该检查文档并确保您已授予该用户所有必要的权利和权限。

你真的应该考虑 Tridion 的受支持版本之一

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T15:15:14.473

1.  MTSUser 不应设置为模拟用户，这是您的 SYSTEM 帐户
2.  “访问被拒绝”的字面意思是用户没有给定操作的权限。也许它不是允许的 Tridion 用户，因为您无权访问 Tridion，我建议您查看 TRUSTEES 表，并在那里找到 MTSUser 帐户。如果它不匹配，那么它肯定不会工作。使用正确的信息将记录添加到 TRUSTEES 表。
3.  正如 user978511 所说，5.3 已经很老了（2008 年初），不再得到官方支持，但我怀疑你能做些什么。
4.  模拟帐户应该与在 IIS 中运行应用程序池的帐户相同 - 默认情况下是`Network Service`

# xml - 如何将 XPATH 中的值相乘？

> ID：14959129
> 
> 赞同：2
> 
> 时间：2013-02-19T13:49:33.283
> 
> 标签：xml, xpath

假设我有一堆

```
<item price='n' sold='m'>
...
</item> 
```

我想做每件商品的售价*。我在尝试

```
'//item/(@price * @sold)' 
```

从 python 中的 lxml 内部，但我不断收到错误*'Invalid Expression'*。xmllint 命令也会发生同样的情况。但是相同的查询在 Oxygen xml 编辑器中有效。

我该如何进行这项工作？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T14:02:14.653

您使用的 XPath 表达式需要 XPath 2.0。（您可以通过将 XPath 版本设置为 1.0 并再次尝试查询来在 Oxygen 中验证这一点。）我认为 lxml 不支持 XPath 2.0。

如果您无法获得支持 XPath 2.0 的库，那么与其尝试在 XPath 中完成所有操作，您需要：

*   选择 XPath 中的`<item>`元素，例如使用 XPath 表达式`//item`
*   在 Python 中循环遍历这些元素
*   在每个`<item>`元素的上下文中，计算 XPath 表达式`@price * @sold`

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T14:00:20.150

可以在 XPath 2.0 中进行计算，因为我已经更正了！

如果您想选择价格低于或等于售价乘以 2 的所有商品，这是可能的。见下： [http ://en.wikipedia.org/wiki/XPath#Number_functions](http://en.wikipedia.org/wiki/XPath#Number_functions)

# javascript - 垂直滚动时如何防止未定义的scrollLeft？

> ID：14959133
> 
> 赞同：0
> 
> 时间：2013-02-19T13:49:43.690
> 
> 标签：javascript, jquery, css

我尝试在垂直滚动时保持 div 的位置固定，但在水平滚动时它应该跟随。我使用了这个 jquery 脚本：

```
$(window).scroll(function(){
$(".navback").css('left',-$(window).scrollLeft()+10);
}); 
```

它可以工作，但前提是窗口小于 div。如果窗口更大（因此不能向左滚动），scrollLeft 是未定义的，并且我的 div 在垂直滚动时移到一边。那么在这种情况下如何定义 scrollLeft 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:51:44.073

`$(window).scrollLeft()`不应该返回未定义，它应该是零。但是要回答你的问题

```
var left = $(window).scrollLeft() || 0;
$(".navback").css('left',-left+10); 
```

或者

```
var left = $(window).scrollLeft();
if(left !== undefined) {
    $(".navback").css('left',-left+10);
} 
```

# c# - 多步 OLE DB 操作产生错误。检查每个 OLE DB 状态值（如果可用）。没有工作

> ID：14959140
> 
> 赞同：-1
> 
> 时间：2013-02-19T13:49:58.003
> 
> 标签：c#

您好，我仍然收到此错误，我尝试了不同的解决方案，但它不起作用！这是我的代码

我将连接字符串放在 app.config 文件中，如下所示：

```
<connectionStrings>
<add name="ComputerManagement" 
connectionString= "Provider=Microsoft.ACE.OLEDB.12.0; Data Source=.. ; Integrated Security=false"/> 
```

并在表单中的 button_click 中输入以下代码：

```
 try
        {
            OleDbConnection conn = new OleDbConnection(GetConnectionString());
            OleDbCommand command = new OleDbCommand();
            command.CommandType = CommandType.Text;

            command.CommandText = "INSERT INTO Clients(C_name,C_phone ,C_mob ,C_add , C_email ,C_account) VALUES ('" + textBox1.Text + "','" + textBox2.Text + "','" + textBox3.Text + "','" + textBox4 + "','" + textBox5.Text + "','" + textBox6.Text + "')";
            command.Connection = conn;
            conn.Open();
            command.ExecuteNonQuery();
            conn.Close();
        }
        catch (Exception) { throw; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:52:52.250

你错过`.Text`了 `textBox4`你的陈述

并且您还应该从连接对象构造命令，例如：

```
OleDbCommand command = conn.CreateCommand(); 
```

在您的代码命令中对连接一无所知。

# vb.net - 我可以在 Reporting Services 2008 中对多重查找值求和吗

> ID：14959143
> 
> 赞同：0
> 
> 时间：2013-02-19T13:50:06.870
> 
> 标签：vb.net, reporting-services, ssrs-2008

我有一个案例，我需要在另一个数据集中搜索固定数字（从 1 到 12 的月份 id）并返回返回字段的总和。

我使用的`MultiLookUp`功能应该如下所示：

```
=code.SumLookup(Multilookup(Split("1,2,3,4,5,6,7,8,9,10,11,12" , ","),
Fields!Transaction_Month.Value,Fields!Total_O_S_Loss___LAE_Reserve.Value
, "DataSet3")) 
```

`SumLookUp`我以前用于的代码在哪里`LookUpSet`，但它似乎不适用于`MultiLookUp`

```
Dim suma As Decimal = New Decimal() 
Public Function SumLookup(ByVal items As Object()) As Decimal 
    If items Is Nothing Then 
        Return Nothing
    End If 
    Dim ct as Integer = New Integer() 
    suma = 0 
    ct = 0 
    For Each item As Object In items 
        suma += Convert.ToDecimal(item) ct += 1 
    Next 
    If (ct = 0) Then 
        return 0 
    else return 
        suma  
End Function 

Public Function GetMyVal() as Decimal 
    GetMyVal = suma  
End Function 
```

你能提供一些建议如何执行这样的事情吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:15:17.380

为什么不能使用该`sum`功能？

```
=Sum(MultiLookup(...)) 
```

**编辑脑放屁：**

如果其中一个月份没有返回值，会发生什么？我认为该`multilookup`函数将为对象内部的`nothing`每个返回一个（variantarray）。`item``items`

我建议您在`if`for 循环中添加一个语句来捕获其中的任何一个。

# r - 数据组/数据桶上的 EWMA

> ID：14959150
> 
> 赞同：2
> 
> 时间：2013-02-19T13:50:36.927
> 
> 标签：r, exponential, moving-average

我有一个时间序列向量，我需要创建一个趋势。

我试图在 R 中获取 EMA 函数（通过 TTR 包 - 我正在加载 quantmod，并且需要 TTR）来运行一组价格。

有没有办法在向量中给定数量的行上创建 EMA 估计值，所以我对每个存储桶都有一个 EMA 估计值？假设我有一个 10 的桶大小，我想估计每个桶之间的趋势，只是为桶选择打开和关闭会否定大量信息，所以我想对桶进行估计，但只有一个输出。

或者，我尝试对桶长度进行平均，但这不会产生所需的输出。

我正在使用的向量示例

```
dput(head(price, 200))
c(137, 137, 137, 137, 137, 137, 137, 137, 137, 136.9, 136.9, 
136.9, 137, 137, 137, 137, 137, 137.2, 137.2, 137.2, 137.1, 137.4, 
137.4, 137.4, 137.4, 137.4, 137.4, 137.1, 137, 137, 137, 137, 
137, 136.9, 136.9, 136.9, 136.9, 136.9, 136.7, 137, 137, 137, 
137, 136.7, 136.9, 136.9, 136.9, 136.5, 136.5, 136.9, 136.9, 
136.9, 137, 137, 137.3, 136.7, 137, 137, 137, 137.1, 137, 137, 
137.1, 137.1, 137, 137, 137.1, 137, 137, 136.8, 137, 137, 136.9, 
136.8, 136.7, 137.1, 137, 137, 137.1, 137, 137.1, 137.1, 136.7, 
136.7, 136.7, 136.7, 136.7, 136.8, 137, 137, 137, 136.9, 136.9, 
136.9, 136.9, 136.9, 136.9, 136.9, 136.9, 136.9, 136.9, 136.9, 
136.9, 136.9, 137, 136.9, 136.9, 136.9, 136.9, 136.9, 136.8, 
136.8, 136.9, 136.9, 136.9, 136.9, 137, 136.9, 136.9, 136.9, 
136.9, 136.9, 136.9, 137, 137, 137, 137, 137, 137, 137, 136.9, 
136.9, 136.9, 137, 137, 136.9, 137, 137.1, 137.1, 137.1, 137, 
137.2, 137.2, 137.2, 137.2, 137.2, 137.2, 137.1, 137.1, 136.9, 
136.8, 136.9, 136.9, 136.9, 136.9, 136.9, 137, 136.9, 137, 137, 
137, 137, 137, 137, 137, 137, 137, 137, 137, 137, 137, 137, 136.9, 
137.1, 137.1, 137.1, 137.1, 137, 137, 137.1, 137.1, 137.1, 137.1, 
137.1, 137.1, 137, 137, 137, 137, 137, 137, 136.9, 136.9, 136.9, 
136.9, 136.9, 136.9, 136.9, 136.9, 136.9) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T22:18:48.607

```
bucketsize=10

bucket=rep(1:ceiling(length(price)/bucketsize),each=bucketsize)

aggregate(price,list(bucket),mean) 
```

# emacs - 粘贴clojure评估结果时，如何使emacs键盘宏正常工作？

> ID：14959155
> 
> 赞同：2
> 
> 时间：2013-02-19T13:50:44.137
> 
> 标签：emacs, clojure, elisp, nrepl, eval-paste

emacs lisp 有一个非常有用的功能，您可以在其中评估表达式的结果并将结果直接粘贴到缓冲区中。

假设我想检查附加作品。然后我输入：

```
(* 3 2) 
```

我定义了键盘宏：

```
(setq last-kbd-macro
   [down ?\( ?i ?s ?= ?  ?\C-\M-f ?  ?\C-u ?\C-x ?\C-e ?\) home]) 
```

如果我然后将点放在表达式上方，然后按 F4 执行宏，则表达式变为：

```
(is= (* 3 2) 6) 
```

这是一个很好的回归测试。

不幸的是，在 clojure/nrepl 缓冲区中执行的相同键盘宏会导致：

```
(* 8 9)(is=  ) 
```

以及来自 clojure 的关于无法解析符号的错误`is=`

所以我认为事情的排序发生了一些奇怪的事情，宏正试图评估错误的事情。

任何人都可以让它与clojure一起使用吗？（实际上解决了一般问题，以便任意键盘宏可以`C-u C-x C-e`像使用 emacs lisp 一样正常工作）

* * *

编辑因为人们似乎误解了：

手动按键在 elisp 或 clojure 缓冲区中都可以正常工作。在一个带有 emacs lisp 的 Cu Cx Ce evals 和在外部 clojure 过程中的其他 evals 中。

尝试运行包含 Cu Cx Ce 的键盘宏（记录在 clojure 缓冲区中）时出现问题

在 clojure 缓冲区中运行宏，事情会以某种方式重新排序。即使 eval-paste 尚未完成，看起来宏可能仍在执行。

我想知道是否有一种方法可以强制键盘宏（或相应的功能）以与手动相同的顺序执行。

如有必要，我很乐意将键盘宏转换为适当的 elisp 函数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:49:43.560

键盘宏是重复特定操作序列的一种快速而肮脏的方式。它们非常脆弱，因为它们记住的是按下的**键**，而不是它们调用的**函数**，因此它们可能会根据调用它们的缓冲区、当前的命令历史记录、窗口配置等等产生截然不同的结果。

在您的情况下，宏中的一个键可能会在 clojure/nrepl 缓冲区中调用与您在其中测试宏的缓冲区中不同的命令。您确实需要在将要使用它的缓冲区中定义宏。

如果您要重新使用宏，我建议您编写一个 emacs lisp 函数来执行您想要的操作，而不是弄乱宏。

您可能会发现输出`(format-kbd-macro nil t)`有用，但请注意，您不应**使用**函数中的命令，使用**返回**评估结果`eval-last-sexp`的低级函数，而不是**将**其插入当前缓冲区。

 ***** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T21:41:41.860

解决您尚未遇到但很快就会遇到的问题：不要忘记`'`在计算表达式的结果之前插入一个字符：您想要`(= (cons 1 nil) '(1))`，而不是`(= (cons 1 nil) (1))`。****

# php - 如何将 PHP 变量数组发送到 MySQL 数据库？

> ID：14959156
> 
> 赞同：2
> 
> 时间：2013-02-19T13:50:44.047
> 
> 标签：php, mysql, dynamic-arrays

所以我有一个从网页中抓取纯文本数据字符串创建的变量数组（使用简单的 HTML DOM Parser 类）。这个变量的格式使它更简洁和有用。

我现在希望将这些数据导出到一个 MySQL 表中，其中表名是网页标题（单独抓取），数据输入是一个数组，其中从网页中提取的每个单词都是一个单独的数据记录。

这是我的代码（其中 $trimmed 是从用户输入网页抓取的格式化变量数据字符串）：

```
$trimmed->plaintext=trim($trimmed->plaintext);
$array = (explode(" ", $trimmed->plaintext));
$printarray = print_r ($array);

mysql_select_db("test", $connect) or die ('Could not find database.');
$sql = "CREATE TABLE '$title'";

$myquery = sprintf("INSERT INTO WebPage '%s'  
    VALUES '%s'",
    mysql_real_escape_string($title->plaintext),
    mysql_real_escape_string($printarray));
$result = mysql_query($myquery);

if (!$result) {
    $message  = '<br /><br /><br /> Invalid query: ' . mysql_error() . "\n";
    $message .= '<br /><br /> Whole query entered here: ' . $myquery;
    die($message);
} 
```

尝试这样做时收到的错误是：
无效查询：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的 ''Example Domain' VALUES '1'' 附近使用正确的语法

此处输入的整个查询：INSERT INTO WebPage 'Example Domain' VALUES '1'

如果需要，我可以提供更多代码，如果我没有很好地解释这一点，请提前道歉；我对此很陌生。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:00:07.103

你的 SQL：

```
INSERT INTO WebPage 'Example Domain' VALUES '1' 
```

无效。也许你的意思是：

```
INSERT INTO `WebPage` ('Example Domain') VALUES ('1') 
```

附带说明一下， if`Example Domain`确实是列名：您应该真正避免字段名称中的空格。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:02:12.170

这里有很多错误。

首先，您为插入生成的 SQL 看起来不正确：

```
INSERT INTO tableName (fields) VALUES (values) 
```

你的代码说：

```
INSERT INTO WebPage 'plainText' VALUES (array) 
```

如果要创建一个名称与网页标题类似的表格，则应删除网页。另外，它必须是一个单词（用“_”之类的东西替换空格）。

其次，您需要创建表。在进行插入之前，您需要正确的 CREATE TABLE 结构。

第三，您的 echo print_r 不适用于为每个字段（列）插入一个值。您需要迭代数组并为每个键插入一个值。但是您应该已经为创建表列执行了此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:05:38.483

看起来好像您正在尝试将输出合并到`print_r`查询中。这是不可能的，因为`print_r`将数据从数组输出到页面的函数也是如此。

为了将数组的内容存储在数据库中，您可以使用[`json_encode`](http://php.net/manual/en/function.json-encode.php)将数组转换为字符串。然后在检索它时使用 json_decode ，以便将其更改回 php 数组。

例如

```
$myquery = sprintf("INSERT INTO `WebPage` ('%s')  
VALUES ('%s')",
json_encode($title->plaintext),
json_encode($array)); //not $printarray as that is not an actual array 
```

编辑：正如其他人所指出的，`mysql_real_escape_string`它是一个不推荐使用的函数，因此应该使用其他方法来转义字符。

edit2：`serialize`也可以用来代替，`json_encode`虽然我不确定相对的优点/缺点。一种更理想的方法是重组数据库表，以将数组的所有内容作为单独的数据来容纳，尽管这有时可能不切实际。

# ios - 如何获取大括号之间的子字符串？

> ID：14959157
> 
> 赞同：6
> 
> 时间：2013-02-19T13:50:44.640
> 
> 标签：ios, objective-c, nsstring, substring

我有一个这样的字符串。

```
NSString *myString = @"{53} balloons"; 
```

如何获取子字符串`53`？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-19T14:03:41.170

```
NSString *myString = @"{53} balloons";
NSRange start = [myString rangeOfString:@"{"];
NSRange end = [myString rangeOfString:@"}"];
if (start.location != NSNotFound && end.location != NSNotFound && end.location > start.location) {
    NSString *betweenBraces = [myString substringWithRange:NSMakeRange(start.location+1, end.location-(start.location+1))];
} 
```

*编辑*：添加范围检查，感谢 Keab42 - 好点。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-20T08:03:18.133

这就是我所做的。

```
NSString *myString = @"{53} balloons";
NSCharacterSet *delimiters = [NSCharacterSet characterSetWithCharactersInString:@"{}"];
NSArray *splitString = [myString componentsSeparatedByCharactersInSet:delimiters];
NSString *substring = [splitString objectAtIndex:1]; 
```

子字符串是 53。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-07T11:08:24.777

您可以使用正则表达式来获取大括号之间的数字。它可能看起来有点复杂，但好处是它会找到多个数字并且数字的位置无关紧要。

**斯威夫特 4.2：**

```
let searchText = "{53} balloons {12} clowns {123} sparklers"
let regex = try NSRegularExpression(pattern: "\\{(\\d+)\\}", options: [])
let matches = regex.matches(in: searchText, options: [], range: NSRange(searchText.startIndex..., in: searchText))
matches.compactMap { Range($0.range(at: 1), in: searchText) }
       .forEach { print("Number: \(searchText[$0])") } 
```

**目标-C：**

```
NSString *searchText = @"{53} balloons {12} clowns {123} sparklers";

NSRegularExpression *regex = [NSRegularExpression regularExpressionWithPattern:@"\\{(\\d+)\\}" 
                                                                       options:0 
                                                                         error:nil];

NSArray *matches = [regex matchesInString:searchText 
                                  options:0 
                                    range:NSMakeRange(0, searchText.length)];

for (NSTextCheckingResult *r in matches)
{
    NSRange numberRange = [r rangeAtIndex:1];
    NSLog(@"Number: %@", [searchText substringWithRange:numberRange]);
} 
```

这将打印出：

```
Number: 53
Number: 12
Number: 123 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T13:58:29.367

试试这个代码。

```
 NSString *myString = @"{53} balloons";
 NSString *value = [myString substringWithRange:NSMakeRange(1,2)]; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-28T13:04:48.423

对于 Swift 4.2：

```
if let r1 = string.range(of: "{")?.upperBound,
let r2 = string.range(of: "}")?.lowerBound {
    print (String(string[r1..<r2]))
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-03-30T11:35:24.747

对于 Swift 2.1：-

```
var start = strData?.rangeOfString("{")
var end = strData?.rangeOfString("}")
if (start!.location != NSNotFound && end!.location != NSNotFound && end!.location > start!.location) {
    var betweenBraces = strData?.substringWithRange(NSMakeRange(start!.location + 1, end!.location-(start!.location + 1)))
    print(betweenBraces)
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-19T14:02:24.280

我想，您正在寻找`NSScanner`课程，至少如果您正在解决一般情况。查看 Apples[文档](https://developer.apple.com/library/mac/ipad/#documentation/Cocoa/Reference/Foundation/Classes/NSScanner_Class/Reference/Reference.html)。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-19T14:04:29.760

搜索“{”和“}”的位置。在这些索引之间获取子字符串。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-02-19T14:06:56.627

检查任意数量的数据：

```
 NSString *str = @"{53} balloons";
    NSArray* strary = [str componentsSeparatedByString: @"}"];
    NSString* str1 = [strary objectAtIndex: 0];
    NSString *str2 = [str1 stringByReplacingOccurrencesOfString:@"{" withString:@""];
    NSLog(@"number = %@",str2); 
```

另一种方法是

```
NSString *tmpStr = @"{53} balloons";
NSRange r1 = [tmpStr rangeOfString:@"{"];
NSRange r2 = [tmpStr rangeOfString:@"}"];
NSRange rSub = NSMakeRange(r1.location + r1.length, r2.location - r1.location - r1.length);
NSString *subString = [tmpStr substringWithRange:rSub]; 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2013-02-19T14:05:49.517

如果你不知道会有多少位数，但你知道它总是用花括号括起来，试试这个：

```
NSString *myString = @"{53} balloons";
NSRange startRange = [myString rangeOfString:@"{"];
NSRange endRange = [myString rangeOfString:@"}"];
if (startRange.location != NSNotFound && endRange.location != NSNotFound && endRange.location > startRange.location) {
    NSString *value = [myString substringWithRange:NSMakeRange(startRange.location,endRange.ocation - startRange.location)];
} 
```

不过，可能有一种更有效的方法来做到这一点。

# java - 在 Java 中使用抽象类

> ID：14959163
> 
> 赞同：1
> 
> 时间：2013-02-19T13:51:13.153
> 
> 标签：java, abstract-class, number-formatting

*Java*文档说`NumberFormat`是一个抽象类。但是下面的代码行让我很困惑。

```
 NumberFormat nf = NumberFormat.getInstance(); 
```

`NumberFormat.getInstance()`当`NumberFormat`是抽象类时，我们如何使用它？任何人都可以帮助我理解这一点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T13:54:06.823

[`NumberFormat.getInstance()`](http://docs.oracle.com/javase/7/docs/api/java/text/NumberFormat.html#getInstance%28%29)是一个[*静态工厂方法*](http://en.wikipedia.org/wiki/Factory_method_pattern)，它可以返回抽象`NumberFormat`类的具体子类的实例：

是这样的：

```
abstract class Instrument {
    public static Instrument getInstance() {
        return new Guitar();
    }
}

class Guitar extends Instrument { } 
```

所以，当你打电话时：

```
Instrument.getInstance(); 
```

你会得到一个 的实例`Guitar`，它是一个具体的子类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T13:56:59.620

您可以*调用* `NumberFormat.getInstance()`，因为它是静态方法。您不需要类的实例来调用该类的静态方法。

`NumberFormat.getInstance()`可以声明一个返回类型，`NumberFormat`因为它*实际上*会返回一个具体子类的实例——但这与它`NumberFormat`的工作方式相同：

```
String x = "test";
Object y = x; 
```

如果你打印出来，`NumberFormat.getInstance().getClass()`你会看到正在使用哪个*实际*的具体子类——但你不应该依赖它返回任何特定的类；关键是你只是打算使用`NumberFormat`自己指定的方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T13:53:45.070

该`getInstance()`方法返回 NumberFormat 的子类 - 您的语言环境的默认值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T13:54:25.413

`NumberFormat.getInstance()`默认返回非抽象`DecimalFormat`实现。

# mysql - MySQL Select Query - 仅获取值的前 10 个字符

> ID：14959166
> 
> 赞同：157
> 
> 时间：2013-02-19T13:51:24.997
> 
> 标签：mysql, sql, select

好的，这就是问题所在。

我有一个包含一些列的表格，“主题”是其中一列。无论“主题”字段包含 100 个字母的字符串，我都需要从“主题”字段中获取前 10 个字母。

例如，

表 - **`tbl`**。列 - `id`, `subject`, `value`.

SQL查询：

```
SELECT subject FROM tbl WHERE id ='$id'; 
```

我得到的结果是，例如

> 你好，这是我的主题，你好吗

我只需要前 10 个字符

> 你好，你好

我可以理解我可以使用 php substr() 删除其余字符，但在我的情况下这是不可能的。我需要让 MySQL 删除多余的字符。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：322
> 
> 时间：2013-02-19T13:54:09.793

使用下面的行

```
SELECT LEFT(subject , 10) FROM tbl 
```

[MySQL 文档。](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_left)

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2013-10-24T07:24:08.997

```
SELECT SUBSTRING(subject, 1, 10) FROM tbl 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-02-19T13:55:58.277

Have a look at either [Left](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_left) or [Substring](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html) if you need to chop it up even more.

Google and the MySQL docs are a good place to start - you'll usually not get such a warm response if you've not even tried to help yourself before asking a question.

# android - ImageView - 内存不足？

> ID：14959168
> 
> 赞同：0
> 
> 时间：2013-02-19T13:51:27.570
> 
> 标签：android, android-imageview

我将一些图像和视频都存储在我的原始文件夹中。

视频播放良好，但是一旦我想显示图像，我就会得到：

即使图像在视频发生之前先开始

```
package com.example.tvrplayer;

import java.io.File;
import java.io.FileDescriptor;
import java.io.IOException;
import java.text.DateFormat.Field;
import java.util.ArrayList;

import android.media.MediaPlayer;
import android.media.MediaPlayer.OnCompletionListener;
import android.net.Uri;
import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.Context;
import android.content.res.AssetFileDescriptor;
import android.widget.ImageView;
import android.widget.VideoView;
import android.util.Log;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.WindowManager;

public class MainActivity extends Activity implements OnCompletionListener {

    int playListIndex;
    int currentMedia;
    String mediaName;
    ArrayList<Integer> playList = new ArrayList<Integer>();
    private VideoView videoView;
    private ImageView imageView;
    Uri mediaPath;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON);
        createPlayList();
        currentMedia = 1;
        try {
            playMedia(this, currentMedia);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    @Override
    public void onCompletion(MediaPlayer mp) {
//      play next video
        currentMedia++;
        if (currentMedia > playList.size() - 1) {
            currentMedia = 0;
        }
        try {
            playMedia(this, currentMedia);
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
    private void playMedia(Context context, int playListIndex) throws IOException {
        int resourceID = playList.get(playListIndex); // This is the resource id
        String path = "android.resource://" + getPackageName() + "/" + resourceID;
        Uri uri = Uri.parse(path);
        String filename = context.getResources().getResourceName(resourceID);
        if (filename.contains("image")) {
            imageView = (ImageView)findViewById(R.id.imageView);
            imageView.setImageResource(resourceID);
        } else if (filename.contains("video")) {
            videoView = (VideoView) findViewById(R.id.videoView);
            videoView.setVideoURI(uri);
            videoView.start();
        }
    }

    private void createPlayList() {
        java.lang.reflect.Field[] fields = R.raw.class.getFields();
        for(java.lang.reflect.Field f : fields)
        try {
            playList.add(f.getInt(null));
            } catch (IllegalArgumentException e) {
            } catch (IllegalAccessException e) { }      

        java.lang.reflect.Field[] imagefields = R.drawable.class.getFields();
        for(java.lang.reflect.Field f : imagefields)
        try {
            playList.add(f.getInt(null));
            } catch (IllegalArgumentException e) {
            } catch (IllegalAccessException e) { }  
    }

} 
```

这是控制台中出现的内容：

```
02-19 15:56:01.095: E/AlarmManagerService(190): android_server_AlarmManagerService_set to type=3, 614361.925000000
02-19 15:56:02.962: E/AlarmManagerService(190): android_server_AlarmManagerService_set to type=0, 1361290750.991000000
02-19 15:56:03.111: D/dalvikvm(931): GC_CONCURRENT freed 719K, 13% free 7177K/8199K, paused 5ms+2ms
02-19 15:56:03.705: D/dalvikvm(931): GC_CONCURRENT freed 31K, 9% free 7532K/8199K, paused 4ms+1ms
02-19 15:56:03.892: D/Finsky(931): [1] 5.onFinished: Installation state replication succeeded.
02-19 15:56:11.642: E/Watchdog(190): !@Sync 6562
02-19 15:56:12.377: E/AlarmManagerService(190): android_server_AlarmManagerService_set to type=2, 614812.728000000
02-19 15:56:12.384: I/GTalkService/c(451): [AndroidEndpoint@1093714392] connect: acct=1000001, state=CONNECTING
02-19 15:56:12.556: E/GTalkService(451): connectionClosed: no XMPPConnection - That's strange!
02-19 15:56:12.564: E/AlarmManagerService(190): android_server_AlarmManagerService_set to type=2, 614614.495000000
02-19 15:56:15.572: D/ConnectivityService(190): handleInetConditionHoldEnd: net=1, condition=0, published condition=0
02-19 15:56:15.572: D/STATUSBAR-NetworkController(272): onReceive() - CONNECTIVITY_ACTION, INET_CONDITION_ACTION
02-19 15:56:15.572: D/STATUSBAR-NotificationService(190): cancelNotification - pkg:com.android.systemui, id:273, tag:null
02-19 15:56:41.642: E/Watchdog(190): !@Sync 6563
02-19 15:56:59.994: E/AlarmManagerService(190): android_server_AlarmManagerService_set to type=3, 614363.041000000
02-19 15:57:00.002: D/KeyguardUpdateMonitor(190): received broadcast android.intent.action.TIME_TICK
02-19 15:57:00.009: D/KeyguardUpdateMonitor(190): handleTimeUpdate
02-19 15:57:00.009: D/STATUSBAR-Clock(272): onReceive() - ACTION_TIME_TICK
02-19 15:57:00.009: D/STATUSBAR-Clock(272): updateClock :15:57
02-19 15:57:00.033: D/STATUSBAR-Clock(272): onReceive() - ACTION_TIME_TICK
02-19 15:57:00.033: D/STATUSBAR-Clock(272): updateClock :15:57
02-19 15:57:01.111: E/AlarmManagerService(190): android_server_AlarmManagerService_set to type=3, 614421.926000000
02-19 15:57:11.642: E/Watchdog(190): !@Sync 6564 
```

我需要播放原始文件夹中的图像，而不是这个应用程序的可绘制对象。难道我做错了什么？

![在此处输入图像描述](../Images/b8f2a6e1a440de86aefd4436b8c89b56.png)

# java - 为什么\0在java的不同系统中打印不同的输出

> ID：14959169
> 
> 赞同：2
> 
> 时间：2013-02-19T13:51:28.520
> 
> 标签：java, netbeans

下面的代码在不同的系统中打印不同的输出。

```
String s = "hello?vsrd".replace('?', '\0');
System.out.println(s); 
```

当我在我的系统（*Linux Ubuntu，Netbeans 7.1*）中尝试时，它打印：

![在此处输入图像描述](../Images/09a051cf51ee68fe169dac8adde06e7f.png)

*当我在另一个系统（ Linux Mint，Netbeans 7.1* ）中尝试相同的代码时，它打印为 ![在此处输入图像描述](../Images/aed763e7450c1e72575f1c57bb466410.png)

我确实明白它`\0`在java中充当一个字符（[通过引用这个答案](https://stackoverflow.com/questions/8623697/is-it-possible-to-add-data-to-a-string-after-adding-0-null)并且显然*s.length()*打印*10*）。并且，不可打印的字符可能会像这样打印（框）。但是，为什么这仅在某些系统上起作用？是jdk版本还是操作系统的区别？我不想要替代代码，但想知道为什么会这样。你可以考虑一下`String s = "hello\0vsrd";`。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:02:14.363

`\0`是不可打印的字符。

此外，在 中`C`，字符串传统上以 结尾`\0`，因为它们没有明确存储它们的长度。某些程序在到达该字符时会简单地停止打印。

Netbeans 控制台会打印它，但字体可能没有字形，甚至没有正方形，这可能解释了不同的行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:16:52.387

我知道这不是直接的答案。但也许会更有帮助。
你真的需要`'\0'`吗？

也许你可以使用`replaceAll()`.

```
String s="hello?vsrd".replaceAll("?", ""); 
```

# google-maps - 如何在页面上居中嵌入的谷歌地图？

> ID：14959171
> 
> 赞同：1
> 
> 时间：2013-02-19T13:51:32.607
> 
> 标签：google-maps, center

我知道这是一个非常简单的过程，但是每次我尝试完成此页面的设计时，我都会寻找答案，而我在这里和 Google 上找到的解决方案都没有为我解决问题。

我也明白强制一个元素居中并不理想，尤其是当现在有这么多不同的设备访问互联网时，但我只想完成这件事，以便我可以专注于其他问题。

这是代码：

```
 <!DOCTYPE html>

<html>

<head>

<title>Como chegar</title>

<style>

#container {

    width: 800px;
    height: 600px;
    margin: 100px auto;

}

#content {

    width: 800px;
    height: 500px;
    background-color: white;

}

.strips {

    width: 800px;
    height: 50px;
    background-image: url(spritepimentarosa.png);
    background-repeat: no-repeat;
    float: left;

}

.navBar {

    width: 250px;
    height: 50px;
    background-image: url(spritepimentarosa.png);
    background-repeat: no-repeat;
    float: left;

}

.nb1 {

    background-position: 0px -450px;
    margin-left: 25px;

}

.nb2 {

    background-position: -250px -450px;

}

.nb3 {

    background-position: -500px -500px;
    margin-right: 25px;

}

.nb1:hover {

    background-position: 0px -500px;
    margin-left: 25px;

}

.nb2:hover {

    background-position: -250px -500px;

}

.nb3:hover {

    background-position: -500px -450px;
    margin-right: 25px;

}

.logo {

    background-position: 0px -200px;

}

.footer {

    background-position: 0px -400px;

}

</style>

</head>

<body bgcolor="#D63B77">

    <div id="container"><!-- beginning of container -->

    <div class="navBar nb1"></div>
    <div class="navBar nb2"></div>
    <div class="navBar nb3"></div>

    <div id="content"><!-- beginning of content -->

        <iframe width="425" height="350" frameborder="0" scrolling="no" marginheight="0" marginwidth="0" src="http://maps.google.ie/maps?f=q&amp;source=s_q&amp;hl=en&amp;geocode=&amp;q=Avenida+S%C3%A3o+Camilo,+980,+Cotia+-+S%C3%A3o+Paulo,+Brazil&amp;aq=0&amp;oq=980,+avenida+sao+camilo&amp;sll=-23.583184,-46.836844&amp;sspn=92.879748,186.152344&amp;t=m&amp;ie=UTF8&amp;hq=&amp;hnear=Av.+S%C3%A3o+Camilo,+980+-+Cotia+-+S%C3%A3o+Paulo,+06709-150,+Brazil&amp;ll=-23.583025,-46.83712&amp;spn=0.037758,0.054932&amp;z=14&amp;iwloc=A&amp;output=embed"></iframe><br /><small><a href="http://maps.google.ie/maps?f=q&amp;source=embed&amp;hl=en&amp;geocode=&amp;q=Avenida+S%C3%A3o+Camilo,+980,+Cotia+-+S%C3%A3o+Paulo,+Brazil&amp;aq=0&amp;oq=980,+avenida+sao+camilo&amp;sll=-23.583184,-46.836844&amp;sspn=92.879748,186.152344&amp;t=m&amp;ie=UTF8&amp;hq=&amp;hnear=Av.+S%C3%A3o+Camilo,+980+-+Cotia+-+S%C3%A3o+Paulo,+06709-150,+Brazil&amp;ll=-23.583025,-46.83712&amp;spn=0.037758,0.054932&amp;z=14&amp;iwloc=A" style="color:#D63B77;text-align:center;font-size:180%">Ver mapa ampliado</a></small>

    </div><!-- end of content -->

    <div class="strips logo"></div>

    <div class="strips footer"></div>

    </div><!-- end of container -->

</body>

</html> 
```

如果有人可以帮助我，将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:03:03.723

通常您只需添加：

```
#content {
  text-align: center;
} 
```

另一个技巧是设置 div 的宽度，然后自动设置 div 的边距：

```
#content {
  width: 800px;
  margin-left: auto;
  margin-right: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:59:51.050

你可以在你的 div 上使用

```
 margin-left: auto ;
  margin-right: auto ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-02T04:52:36.970

是否要居中：

*   页
*   页面内容
*   谷歌地图（iframe）

* * *

## 页

为了使页面居中，您必须使用包装器，即用#content id 围绕 div 的 div。

```
.wrapper or #wrapper (depends if you want to use ID or Class)
{
  margin: 0 auto;
} 
```

* * *

## 页面内容

只需将边距应用于#context。

```
#contet
{
  margin: 0 auto;
} 
```

* * *

## 利润

只需通过 CSS 将边距应用于 iframe 标签。

```
iframe
{
  margin: 0 auto;
} 
```

** 注意 ** 请记住，元素需要分配宽度才能使其正常工作。你不能使用 width: 100%; 并期望它起作用，但我想你已经知道了。

# jquery - 仅复制下一个列表中的文本和选定的类

> ID：14959176
> 
> 赞同：1
> 
> 时间：2013-02-19T13:51:53.717
> 
> 标签：jquery

我有一个用作选择框的列表，因此通过单击所选项目会显示一个列表，您可以选择另一个项目。

这很好用，但是当我尝试创建两个或更多列表时，选定的名称复制到所有选定的名称（`.cloned`跨度），在 jsfiddle 示例中，它应该只是下一个名称中的一个，而不是“Item 1.1Item 2.2”第一个克隆类的跨度应该只显示“Item 1.1”，下面显示“Item1.1Item2.2”的应该是“Item2.2”，因为它是第二个列表中的标题/选定项目，依此类推。 .

我发现问题在于以下代码：

```
$(".cloned").text($(".selected").text()); 
```

我尝试了以下但不工作：

```
$(".cloned").text($(".options").closest(".selected").text()); 
```

如何仅在其下方`.selected`列表的范围内显示列表中的类`.clone`？

演示：http: [//jsfiddle.net/9BR9h/1/](http://jsfiddle.net/9BR9h/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T13:58:28.847

`closest`选择离`parent`被选元素最近的，不是最近的元素，可以用`parent`and`prev`方法。

```
$('.options li').click(function () {
    $(this)
          .addClass('selected')
          .siblings()
          .removeClass('selected')
          .parent()
          .hide()
          .prev('.cloned')
          .text(this.textContent || this.innerText);
}); 
```

[http://jsfiddle.net/B2nZH/](http://jsfiddle.net/B2nZH/)

在页面加载时，您可以使用`text`'s 功能：

```
$(".cloned").text(function(){
     return $(this).next().find(".selected").text()
}); 
```

[http://jsfiddle.net/zKfX2/](http://jsfiddle.net/zKfX2/)

# python - 你能创建一个用点“。”引用的值吗？Python

> ID：14959177
> 
> 赞同：0
> 
> 时间：2013-02-19T13:52:00.797
> 
> 标签：python

我想调用一个将类作为参数的函数，而不将其传递给类。

该函数仅使用类中的整数值，而我调用它的地方具有可以独立计算该值的信息。

我的代码如下所示：

我要调用的函数：

```
 def buckets_from_pairs(fs_pairs,par):
        fsea=fermi_sea(par.N)

        # rest of function has no reference to par 
```

我调用的函数：

```
 def deltas(roots):
        if "buckets" in roots:
            # do function on    roots["buckets"]

        if "partition" in roots:
            #somehow define     value  such that  value.N=len(roots["roots"])

            buckets=buckets_from_pairs(roots["partition"], value)

            #do function on    buckets 
```

我可以更改`deltas`为`par`作为参数，也可以更改`buckets_from_pairs`为不工作，`par`但两者都需要大量返工，而且我必须与编写这两个函数的主管一起组织它（他没有这个问题）。

所以我希望有一种更简单的方法来创建一个可以使用“点”来引用某些东西的对象，而不是在调用函数中创建一个新类。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T13:56:20.483

你可以像这样制作一个小适配器：

```
class Adapter(object):
    def __init__(self, n):
        self.N = n 
```

然后：

```
buckets=buckets_from_pairs(roots["partition"], Adapter(len(roots["roots"])) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T13:57:58.743

```
from collections import namedtuple
value = namedtuple('Value', 'N')(len(roots["roots"])) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T13:54:45.380

为什么不只是

```
def buckets_from_pairs(fs_pairs, N):
    fsea=fermi_sea(N) 
```

用

```
buckets=buckets_from_pairs(roots["partition"], value.N) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T14:18:50.837

如果值应该是可修改的；你可以在 Python 3.3+ 中使用[types.SimpleNamespace类：](http://docs.python.org/3.4/library/types.html#types.SimpleNamespace)

```
from types import SimpleNamespace

value = SimpleNamespace(N=len(roots["roots"])) 
```

在较旧的 Python 版本上，您可以使用[Adapter class](https://stackoverflow.com/a/14959270/4279)。

对于只读情况；你可以使用[`namedtuple`](https://stackoverflow.com/a/14959301/4279).

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-19T14:09:51.690

@gnibbler 的回答很好，@John Zwinck 有一个好主意，但可以概括为：

```
class objval(object):
    def __init__(self, **kwargs):
        self.__dict__.update(kwargs)

par = objval(N=len(roots["roots"]) 
```

通常，`objval`允许您动态创建包装在对象中的值，例如：

```
o = objval(prop1=value1, prop2=value2) 
```

您对解决方案的选择归结为品味问题。

# iphone - 清理 ios 中的所有内存泄漏

> ID：14959195
> 
> 赞同：0
> 
> 时间：2013-02-19T13:53:06.763
> 
> 标签：iphone, ios, ipad

我已经尝试了很多来阻止我的应用程序的所有泄漏。但是当我从服务器同步大量数据时，我的 ios 应用程序会泄漏内存。

现在我想在间隔一段时间后清理所有泄漏的内存，或者你可以说每当我调用函数时。

```
-(void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];

    UIAlertView* alertobj = [[UIAlertView alloc] initWithTitle:@"Info" message:@"This Application facing memory issue." delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alertobj show];

    NSLog(@"memory issue occur");
    // Dispose of any resources that can be recreated.
} 
```

有什么办法吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T13:55:45.990

不，你不能那样做。

我遇到了类似的问题，以较小的块同步数据并阅读了`@autoreleasepool`

基本上，我一次在 500~1500 个对象之间同步，具体取决于对象中有多少数据，`@autoreleasepool`一旦我完成了这些对象，就将它们包装在保持低内存的状态。

# android - 用自己替换片段不会显示任何内容

> ID：14959198
> 
> 赞同：6
> 
> 时间：2013-02-19T13:53:20.700
> 
> 标签：android, replace, android-fragments, onresume

我正在尝试决定并在活动的**onResume**方法中显示一个片段，但如果再次选择先前添加的片段，那么活动将变为空白。

示例代码（带有一个片段）：

```
@Override
protected void onResume(){
    FragmentTransaction trans = getSupportFragmentManager().beginTransaction();

    trans.replace(R.id.myLayout, fragA);

    trans.commit();
    getSupportFragmentManager().executePendingTransactions();
} 
```

使用上面的代码，当第一次创建活动时，它会正确显示**fragA**，但是如果我按下`Home Key`然后切换回我的活动（为了再次引发**onResume**），一切都会变成空白（好像 fragA 被删除了）。

替换之前添加的片段是否会自行删除？或者如果它被自己替换，如何不丢失一个片段？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T14:02:09.450

你不能用它自己替换一个片段。替换的前半部分是删除该 id 处的前一个片段。一旦片段被删除，片段管理器就不能再添加或使用它（因此替换的添加部分将无法正常工作）。

根据您的用例，您有两种选择：

1.  创建一个新片段而不是重用现有实例
2.  使用其他方法查看是否有必要替换您的片段

最后，您可能不需要调用 executePendingTransactions。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T14:21:18.957

你可以试试：

```
if( !(getSupportFragmentManager().findFragmentById(R.id.myLayout) instanceof FragmentA) ) {
    FragmentTransaction trans = getSupportFragmentManager().beginTransaction();

    trans.replace(R.id.myLayout, fragA);

    trans.commit();
} 
```

我假设 fragA 是 FragmentA 类对象。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-20T13:03:07.877

最后，我必须在更换碎片之前进行检查。如果再次请求替换（已经添加的）片段，我必须检查它是否已经添加然后忽略替换，否则继续。例如：

```
@Override
protected void onResume() {
    if (!fragA.isAdded()) {
        FragmentTransaction trans = getSupportFragmentManager().beginTransaction();
        trans.replace(R.id.myLayout, fragA);
        trans.commit();
        //getSupportFragmentManager().executePendingTransactions();   //unnecessary
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-17T12:46:30.847

引用回创建的片段时，请确保尝试添加

```
fragmentTransaction.addToBackStack(null); 
```

提交之前的方法，以便您的 Fragment 恢复而不是如开发人员指南中所述被销毁。

> 如果您在执行删除片段的事务时不调用 addToBackStack()，则该片段在事务提交时被销毁，并且用户无法导航回它。然而，如果您在删除片段时确实调用了 addToBackStack()，那么片段会停止，然后如果用户导航回来，则会恢复。

[您可以在本页](https://developer.android.com/guide/components/fragments#Transactions)末尾找到它。

# node.js - 将模型参数传递给猫鼬模型

> ID：14959199
> 
> 赞同：7
> 
> 时间：2013-02-19T13:53:24.970
> 
> 标签：node.js, mongodb, express, mongoose

我有一个与用户模型相关联的猫鼬模型，例如

```
var exampleSchema = mongoose.Schema({
   name: String,
   <some more fields>
   userId: { type:mongoose.Schema.Types.ObjectId, ref: 'User' }
});

var Example = mongoose.model('Example', userSchema) 
```

当我实例化一个新模型时，我会：

```
// the user json object is populated by some middleware 
var model = new Example({ name: 'example', .... , userId: req.user._id }); 
```

模型的构造函数需要很多参数，当模式发生变化时，这些参数的编写和重构变得乏味。有没有办法做类似的事情：

```
var model = new Example(req.body, { userId: req.user._id }); 
```

或者是创建辅助方法以生成 JSON 对象甚至将 userId 附加到请求正文的最佳方法？或者有没有我什至没有想到的方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-19T14:04:00.617

```
_ = require("underscore")

var model = new Example(_.extend({ userId: req.user._id }, req.body)) 
```

或者如果你想将 userId 复制到 req.body 中：

```
var model = new Example(_.extend(req.body, { userId: req.user._id })) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T14:04:17.337

如果我理解正确，你会很好地尝试以下方法：

```
// We "copy" the request body to not modify the original one
var example = Object.create( req.body );

// Now we add to this the user id
example.userId = req.user._id;

// And finally...
var model = new Example( example ); 
```

另外，**不要忘记添加您的架构选项** `{ strict: true }`，否则您可能会保存不需要的/攻击者数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-09-21T22:10:03.267

从 Node 8.3 开始，您还可以使用[Object Spread 语法](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Spread_syntax)。

```
var model = new Example({ ...req.body, userId: req.user._id }); 
```

请注意，顺序很重要，后面的值会覆盖前面的值。

# php - 将一个数字分成随机不相等的部分

> ID：14959200
> 
> 赞同：11
> 
> 时间：2013-02-19T13:53:26.280
> 
> 标签：php, algorithm, math

所以我正在尝试制作一个脚本，将值 4 随机拆分为 12 个不同的变量。我想不出一个很好的方法来正确地做到这一点。我考虑过随机化数字，使它们接近 0.33（4 的 1/12），但这通常会导致最后几个数字的优先级不足。任何人之前都尝试过这样的事情，或者对如何使其尽可能随机和均匀不均匀有任何好主意？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-19T13:57:03.850

从您最喜欢的随机数生成器生成 12 个随机数，调用它们`r1..r12`。

将它们全部加起来，调用 sum `sum`。

您的第一个随机分数`4`是`(r1/sum)*4`. 其余的应该是显而易见的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-19T13:58:21.553

生成任何大于 1 的随机数，然后重新调整为所需的总和。

**例子：**

*   所需金额：4
*   随机数：1 2 3 4 5 6 7 8 9 10 11 12
*   总和 = 78
*   重新调整的数字：

1 重新缩放为 (1*4) / 78

2 重新缩放为 (2*4) / 78

...

12 重新缩放为 (12*4) / 78

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T19:32:50.233

以下算法提供均匀分布的分区，假设可以在连续范围内（或至少在具有足够多可能值的离散范围内生成均匀分布的随机数，使得重复的几率可以忽略不计）。

*要产生一个值的`t`划分`k`：*

*   在范围内生成`k-1`均匀分布的值`[0, t]`。

*   对它们进行排序，并`0`在开头和`t`结尾添加。

*   使用相邻的差异作为分区。

# c++ - 如何在 O(1) 中从 C++ 中的“字符串”中删除终端字符？

> ID：14959206
> 
> 赞同：1
> 
> 时间：2013-02-19T13:53:44.470
> 
> 标签：c++

更正式地说，设`str`为有问题的字符串，设其长度为`l`。我知道使用以下`substr`功能可以轻松完成上述操作：

*   删除第一个字符 -`str.substr(1)`
*   删除最后一个字符 -`str.substr(0,l-1)`

但根据[this](http://www.cplusplus.com/reference/string/string/substr/) page，上述方法在`O(l)`.

有没有办法达到同样的效果`O(1)`？

**编辑**：在将此问题标记为重复之前，请注意我要求使用***O(1)***实现来删除字符串的终端字符。这个问题的答案似乎与这个问题的重复，没有一个答案会做出任何努力来回答这个问题，显然是因为*这个*问题并没有要求它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:28:30.430

我不知道实际保证这一点的标准，但可以合理地*假设*：

```
str.resize(str.length() - 1); 
```

是 O(1)。如果假设对您的情况不够好，您可以编写自己的字符串类。只要确保你在编写一个好的字符串类上所付出的努力值得 O(1) 保证来删除最后一个字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T14:38:42.743

该`substr`函数不会删除字符。您调用该函数的字符串不会被修改，因此所有字符都保持不变。尽管如此，调用它来选择一个包含除终结符之外的所有字符的子字符串所需的时间将是 O( *n* )，因为它涉及复制所有其他字符。

*从字符串中删除*一个字符所需的时间在于移动所有后续字符以替换已删除的字符，就像在`substr`. 字符串中一般有*n 个*字符，因此删除任意字符的复杂度为 O( *n* )。

没有固定时间的方法来删除任意长度字符串的第一个字符。从字符串*末尾*删除固定数量的字符*C*的字符可以在恒定时间内完成，因此删除最后一个字符 ( *C* = 0) 是 O(1)。

 **如果您经常需要从序列的末端添加或删除元素，您可能会考虑更适合该操作的数据结构。两者`list`都`deque`有好处。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:26:19.293

要`std::string`在 O(1) 时间内删除 a 的最后一个字符，

您可以`resize`将字符串向下移动 1 个单位。

如果您想要一个表达式结果（不修改原始字符串），您将不得不使用其他类而不是`std::string`. 一对迭代器会做得很好。**

# session - 更改新的和现有的会话命令超时值

> ID：14959211
> 
> 赞同：0
> 
> 时间：2013-02-19T13:53:56.627
> 
> 标签：session, sql-server-2008-r2, connection, command-timeout

我是一个自学成才的 DBA，在制造环境中到处都是喜欢摆弄的工程师。尽管我没有给他们系统管理员或任何明确的额外权限，但我对一些运行“杀手”查询的工程师有疑问，其中一些是 io 密集型的。考虑到连接的默认命令超时时间通常为 30 秒，这通常不会成为问题，但其中一些工程师购买了 SQL Developer，纯粹是为了自动完成功能，当然这默认情况下会将它们与无限的“CommandTimeout”连接起来。

在某种程度上，我想做的是改变一个/或新的连接/会话，并将它们的 CommandTimeout 设置为更合理的值，可能小于 30 秒。对于新连接，我设想它是某种数据库触发器，然后在其上下文中执行命令？现有的连接，可能是系统表中的一些可怕的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:10:15.013

不幸的是，您不能覆盖客户端`CommandTimeout`值。您可能已经注意到它是客户端配置，而不是与实例相关的配置。

但是，您可以使用查询（资源）调控器来避免长时间运行的查询。

我建议进一步阅读这个主题：

[http://msdn.microsoft.com/en-us/library/bb933866.aspx](http://msdn.microsoft.com/en-us/library/bb933866.aspx)

[http://technet.microsoft.com/en-us/library/ms191219.aspx](http://technet.microsoft.com/en-us/library/ms191219.aspx)

很抱歉没有提供完整的答案，但我认为这会对您有所帮助。

# javascript - 如何让 Firebug 在其 HTML 视图中包含动态加载的页面（jquery.load）？

> ID：14959212
> 
> 赞同：0
> 
> 时间：2013-02-19T13:53:57.017
> 
> 标签：javascript, jquery, ajax, firebug

我正在使用一个页面，其中相当多的内容是动态加载的，例如：

```
 $("#main").load("menu.context.php",{param:active, id: id}); 
```

只要以这种方式加载的内容没有错误，这就可以了。然后我想调试一个以这种方式加载的对象，并在 HTML 视图中查看它。我用选择器选择对象，在 crumbpath 上单击它，然后...

![在此处输入图像描述](../Images/7f67336a657a23acf01a13111098dce0.png)

...我被带到了更高的`<object>`几个级别，其中`.load()`放置了所有新内容。我无法打开它来查看内容并遍历它的树。

如何让 Firebug 打开该对象并在 HTML 视图中显示其子树？

# c# - 重用另一个服务参考中的现有类

> ID：14959214
> 
> 赞同：11
> 
> 时间：2013-02-19T13:54:03.010
> 
> 标签：c#, .net, web-services, service-reference

我正在处理的情况不是最理想的，所以请耐心等待。

我们将使用**外部**（非 .NET）**SOAP-webservices**。
出于某种原因，**每个方法**都在具有自己**的 WSDL的****单独 Web 服务**中实现。Web 服务返回的 许多**对象具有****完全相同的设计、名称和 xml 命名空间**。

 ******使用“**添加服务参考**”是因为：
- 内部开发团队已经习惯了
- 我们希望保持自动“更新服务参考”

第二个引用添加了“在所有引用的程序集中重用类型”选项。
**然而，所有类**都在新参考下**再次生成。**

哪里有**重用****第一个参考**中的**类**的方法？

 *** * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-19T14:20:11.243

如果您打开服务引用的 Reference.svcmap（要找到它，请选中“显示所有文件”并展开您的服务引用）并手动编辑它，您可以添加多个 WSDL，而不是通过 GUI 设置 WSDL URI。例如

```
 <MetadataSources>
    <MetadataSource Address="http://localhost/example1.wsdl" Protocol="http" SourceId="1" />
    <MetadataSource Address="http://localhost/example2.wsdl" Protocol="http" SourceId="2" />
  </MetadataSources> 
```

当您在一个服务参考中有多个 WSDL 时，只要它们在不同的 WSDL 中相同，就会按照您的描述重用类。如果存在名称相同但定义不同的类，则其中一个将在其名称后附加“1”后缀。********

# python - Django URL 重定向

> ID：14959217
> 
> 赞同：118
> 
> 时间：2013-02-19T13:54:10.350
> 
> 标签：python, django, django-urls

如何将与我的任何其他 URL 不匹配的流量重定向回主页？

**网址.py：**

```
urlpatterns = patterns('',
    url(r'^$', 'macmonster.views.home'),
    #url(r'^macmon_home$', 'macmonster.views.home'),
    url(r'^macmon_output/$', 'macmonster.views.output'),
    url(r'^macmon_about/$', 'macmonster.views.about'),
    url(r'^.*$',  'macmonster.views.home'),
) 
```

就目前而言，最后一个条目将所有“其他”流量发送到主页，但我想通过**HTTP 301**或**302**重定向。

* * *

## 回答 #1

> 赞同：205
> 
> 时间：2013-02-19T13:57:49.540

您可以尝试名为的基于类的视图[`RedirectView`](https://docs.djangoproject.com/en/stable/ref/class-based-views/base/#redirectview)

```
from django.views.generic.base import RedirectView

urlpatterns = patterns('',
    url(r'^$', 'macmonster.views.home'),
    #url(r'^macmon_home$', 'macmonster.views.home'),
    url(r'^macmon_output/$', 'macmonster.views.output'),
    url(r'^macmon_about/$', 'macmonster.views.about'),
    url(r'^.*$', RedirectView.as_view(url='<url_to_home_view>', permanent=False), name='index')
) 
```

请注意`url`，`<url_to_home_view>`您需要如何实际指定 url。

`permanent=False`将返回 HTTP 302，而`permanent=True`将返回 HTTP 301。

或者，您可以使用[`django.shortcuts.redirect`](https://docs.djangoproject.com/en/stable/topics/http/shortcuts/#redirect)

**Django 2+ 版本的更新**

在 Django 2+ 中，`url()`已弃用并由`re_path()`. `url()`用法与正则表达式完全相同。对于不需要正则表达式的替换，使用`path()`.

```
from django.urls import re_path

re_path(r'^.*$', RedirectView.as_view(url='<url_to_home_view>', permanent=False), name='index') 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2015-07-08T20:22:35.567

在 Django 1.8 中，我就是这样做的。

```
from django.views.generic.base import RedirectView

url(r'^$', views.comingSoon, name='homepage'),
# whatever urls you might have in here
# make sure the 'catch-all' url is placed last
url(r'^.*$', RedirectView.as_view(pattern_name='homepage', permanent=False)) 
```

除了使用`url`，您可以使用`pattern_name`，这有点不干，并且将确保您更改您的网址，您不必更改重定向。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2019-07-27T10:08:00.200

其他方法工作正常，但您也可以使用旧的`django.shortcut.redirect`.

下面的代码取自[这个答案](https://stackoverflow.com/a/52149766/5538922)。

在 Django 2.x 中：

```
from django.shortcuts import redirect
from django.urls import path, include

urlpatterns = [
    # this example uses named URL 'hola-home' from app named hola
    # for more redirect's usage options: https://docs.djangoproject.com/en/2.1/topics/http/shortcuts/
    path('', lambda request: redirect('hola/', permanent=True)),
    path('hola/', include('hola.urls')),
] 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-03-03T22:19:44.643

如果您像我一样被困在 django 1.2 上并且 RedirectView 不存在，那么添加重定向映射的另一种以路由为中心的方法是使用：

```
(r'^match_rules/$', 'django.views.generic.simple.redirect_to', {'url': '/new_url'}), 
```

您还可以重新路由比赛中的所有内容。这在更改应用程序的文件夹但想要保留书签时很有用：

```
(r'^match_folder/(?P<path>.*)', 'django.views.generic.simple.redirect_to', {'url': '/new_folder/%(path)s'}), 
```

如果您只是尝试修改您的 url 路由并且无权访问 .htaccess 等，这比 django.shortcuts.redirect 更可取（我在 Appengine 上并且 app.yaml 不允许像.htaccess）。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2015-02-26T12:32:06.460

另一种方法是使用 HttpResponsePermanentRedirect ，如下所示：

在视图.py

```
def url_redirect(request):
    return HttpResponsePermanentRedirect("/new_url/") 
```

在 url.py

```
url(r'^old_url/$', "website.views.url_redirect", name="url-redirect"), 
```

# xml - Schematron 计算错误

> ID：14959220
> 
> 赞同：0
> 
> 时间：2013-02-19T13:54:14.293
> 
> 标签：xml, xslt, schematron

我有以下 xml 文件：

```
<Contract>
    <TotalCosts>31003</TotalCosts>
    <PaymentSchedules>
        <PaymentSchedule>
            <Amount>516.7</Amount>
            <NumberOfPayments>3</NumberOfPayments>
        </PaymentSchedule>
        <PaymentSchedule>
            <Amount>529.7</Amount>
            <NumberOfPayments>1</NumberOfPayments>
        </PaymentSchedule>
        <PaymentSchedule>
            <Amount>516.7</Amount>
            <NumberOfPayments>55</NumberOfPayments>
        </PaymentSchedule>
        <PaymentSchedule>
            <Amount>504.70</Amount>
            <NumberOfPayments>1</NumberOfPayments>
        </PaymentSchedule>
    </PaymentSchedules>
</Contract> 
```

在我的 schematron 文件中，我想让 TotalCosts 与 paymentSchedule 中的金额相同。

为此，我需要为每个 PaymentSchedule 执行以下操作：

金额 * NumberOfPayments

之后，我需要取所有 PaymentSchedules 的总和，这个数字应该完全相同。如果您对给定的示例尝试此操作，您将看到数量完全相同。

为了在 schematron 中验证这一点，我创建了这个 schematron 文件：

```
<iso:schema xmlns:iso="http://purl.oclc.org/dsdl/schematron"
    xmlns:xsl="http://www.w3.org/1999/XSL/Transform" queryBinding="xslt2">
    <iso:ns uri="http://www.someurl.com" prefix="func"/>

    <xsl:function name="func:getPaymentScheduleTotal">
        <xsl:param name="contract" as="element()"/>
        <xsl:value-of
            select="sum($contract/PaymentSchedules/PaymentSchedule/(NumberOfPayments * Amount))"/>
    </xsl:function>

    <iso:pattern id="Contract">
        <iso:rule context="Contract">
            <iso:assert test="func:getPaymentScheduleTotal(.) = number(TotalCosts)">amount in paymentschedule(<iso:value-of select="func:getPaymentScheduleTotal(.)"/>)    doesn't match total amount(<iso:value-of select="TotalCosts"/>)</iso:assert>
        </iso:rule>
    </iso:pattern>

</iso:schema> 
```

但这是我遇到问题的地方。我得到以下验证结果：

> Paymentschedule(31003.000000000004) 中的金额与总金额不匹配 (31003) (func:getPaymentScheduleTotal(.) = number(TotalCosts)) [assert]

我不知道 .000000000004 是从哪里来的。我当然可以使用像 floor 这样的东西来四舍五入，但我相信 .000000000004 一开始就不应该在那里。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:33:42.180

您遇到的问题是双变量如何工作的预期行为。XSLT 处理器将 Amount 和 NumberOfPayments 解释为 xs:double 数据类型。

您可能知道，xs:double 用 64 位表示并遵循 IEEE754 标准（可以在[http://grouper.ieee.org/groups/754/](http://grouper.ieee.org/groups/754/)找到规范）。主要问题是某些数字不能表示为 xs:double，因此这些数字表示为可以表示的最接近的数字（有时它是算术运算的中间结果，无法表示）。

但是，您的问题有一个解决方案。除了使用 xs:double （使用指数来存储数字），您可以使用 xs:decimal ，根据数据类型规范不能包含指数，因此它必须按原样存储数字。因此，将 value-of 表达式替换为

```
 <xsl:value-of select="sum($contract/PaymentSchedules/PaymentSchedule/(xs:decimal(Amount) * xs:decimal(NumberOfPayments)))" /> 
```

应该按预期工作。

更新：完整的解决方案是：

```
<iso:schema xmlns:iso="http://purl.oclc.org/dsdl/schematron"
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform" 
            xmlns:xsl="http://www.w3.org/2001/XMLSchema" queryBinding="xslt2">

    <iso:ns uri="http://www.someurl.com" prefix="func"/>

    <xsl:function name="func:getPaymentScheduleTotal" as="xs:decimal">
        <xsl:param name="contract" as="element()"/>
        <xsl:sequence
            select="sum($contract/PaymentSchedules/PaymentSchedule/(xs:decimal(NumberOfPayments) * xs:decimal(Amount)))"/>
    </xsl:function>

    <iso:pattern id="Contract">
        <iso:rule context="Contract">
            <iso:assert test="func:getPaymentScheduleTotal(.) = xs:decimal(TotalCosts)">amount in paymentschedule(<iso:value-of select="func:getPaymentScheduleTotal(.)"/>)    doesn't match total amount(<iso:value-of select="TotalCosts"/>)</iso:assert>
        </iso:rule>
    </iso:pattern>

</iso:schema> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:25:45.083

听起来十进制表示（例如 516.7、529.7 ...）是有限的，但相同值的二进制表示可能不是。因此，您会得到结果的差异。我会说除了四舍五入之外没有其他选择。

希望这可以帮助。

# asp.net - Control.Hide() 与 Control.hidden=true

> ID：14959221
> 
> 赞同：1
> 
> 时间：2013-02-19T13:54:16.190
> 
> 标签：asp.net, ext.net

使用服务器端调用，哪种方法可以更快地隐藏控件？

```
Control.Hide(); 
```

或者

```
Control.hidden = true; 
```

鉴于这种情况，我们有类似的东西：

```
<ext:Button runat="server">
   <DirectEvents>
      <Click OnEvent="hidethis"/>
   </DirectEvent>
</ext:Button> 
```

和：

```
public void hidethis(object sender, DirectEventArgs e)
{
    var Control = sender;
    // above Choice
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:16:36.623

深入[研究 Ext.Net 文档](http://docs.ext.net/)，我发现：

> **隐藏属性 隐藏**此组件（默认为 false）。如果为 true，则将在内部调用 hide 方法。

因此调用`Hide()`速度更快，因为无论如何该`Hidden`属性都会调用该方法。`Hide()`

# sql - 将列转换为行，使用分隔符“-”、“;”

> ID：14959224
> 
> 赞同：-1
> 
> 时间：2013-02-19T13:54:23.130
> 
> 标签：sql, sql-server, sql-server-2008, tsql

输入 ：

```
 select(Emp_no, ADate, Atime) 
```

* * *

```
 12333,     12-02-2013,    09.12 - 12.30
      12333,     12-02-2013,    12.32 - 17.30   

      13444,     12-02-2013,    09.10 - 18.30

      14444,     12-02-2013,    09.13 - 12.30
      14444,     12-02-2013,    17.20 
```

输出 ：

```
 12333,     12-02-2013,    09.12 - 12.30 ; 12.32 - 17.30
      13444,     12-02-2013,    09.10 - 18.30
      14444,     12-02-2013,    09.13 - 12.30 ; 17.20 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T13:58:53.607

您可以使用与此类似的方法将多行连接成一行：

```
select distinct t1.Emp_no,
  t1.ADate, 
  STUFF(
         (SELECT '; ' + cast(t2.Atime as varchar(50))
          FROM yourtable t2
          where t1.Emp_no = t2.Emp_no
            and t1.ADate = t2.ADate
          FOR XML PATH (''))
          , 1, 1, '')  AS Atime
from yourtable t1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/1588c/3)

或者您可以使用`CROSS APPLY`with `FOR XML PATH`：

```
select distinct t1.Emp_no,
  t1.ADate, 
  left(t2.Atime, len(t2.atime)-1) ATime
from yourtable t1
cross apply
(
  select t2.Atime + '; '
  from yourtable t2
  where t1.Emp_no = t2.Emp_no
    and t1.ADate = t2.ADate
  FOR XML PATH('')
) t2 (Atime) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/1588c/13)

# hibernate - Maven 无法找到 persistence.xml

> ID：14959225
> 
> 赞同：0
> 
> 时间：2013-02-19T13:54:23.870
> 
> 标签：hibernate, maven, jpa, persistence.xml

我在每个文件夹中复制了persistence.xml，但仍然显示无法找到文件persistence.xml。请帮忙。

错误：

```
 [INFO] using jpaconfiguration task.
    19:19:52,652  INFO org.hibernate.cfg.annotations.Version - Hibernate Annotations 3.4.0.GA
    19:19:52,657  INFO org.hibernate.cfg.Environment - Hibernate 3.3.1.GA
    19:19:52,659  INFO org.hibernate.cfg.Environment - hibernate.properties not found
    19:19:52,661  INFO org.hibernate.cfg.Environment - Bytecode provider name : javassist
    19:19:52,663  INFO org.hibernate.cfg.Environment - using JDK 1.4 java.sql.Timestamp handling
    19:19:52,691  INFO org.hibernate.annotations.common.Version - Hibernate Commons Annotations 3.1.0.GA
    19:19:52,693  INFO org.hibernate.ejb.Version - Hibernate EntityManager 3.4.0.GA
    19:19:52,702  INFO org.hibernate.ejb.Ejb3Configuration - Could not find any META-INF/persistence.xml file in the classpath
    [ERROR] Persistence unit not found: 'myapp'. 
```

pom.xml

```
 <project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org /2001/XMLSchema-instance"
        xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
        <modelVersion>4.0.0</modelVersion>
        <groupId>com.myhadoop.app</groupId>
        <artifactId>my-app-hadoop</artifactId>
        <packaging>jar</packaging>
        <version>1.0-SNAPSHOT</version>
        <name>my-app-hadoop</name>
        <url>http://maven.apache.org</url>

        <dependencies>
            <dependency>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-resources-plugin</artifactId>
                <version>2.4.3</version>
            </dependency>
            <dependency>
                <groupId>junit</groupId>
                <artifactId>junit</artifactId>
                <version>3.8.1</version>
                <scope>test</scope>
            </dependency>

            <dependency>
                <groupId>org.apache.hadoop</groupId>
                <artifactId>hadoop-core</artifactId>
                <version>1.0.3</version>
            </dependency>

            <dependency>
                <groupId>org.hibernate </groupId>
                <artifactId>hibernate-core</artifactId>
                <version>4.1.6.Final</version>
            </dependency>

            <dependency>
                <groupId>javax.servlet</groupId>
                <artifactId>servlet-api</artifactId>
                <version>3.0-alpha-1</version>
            </dependency>

            <dependency>
                <groupId>org.slf4j</groupId>
                <artifactId>slf4j-simple</artifactId>
                <version>1.6.6</version>
            </dependency>

            <dependency>
                <groupId>javassist</groupId>
                <artifactId>javassist</artifactId>
                <version>3.12.1.GA </version>
            </dependency>
        </dependencies>
        <repositories>
            <repository>
                <id>com.springsource.repository.bundles.release</id>
                <name>SpringSource Enterprise Bundle Repository - SpringSource Bundle Releases</name>
                <url>http://repository.springsource.com/maven/bundles/release</url>
            </repository>
            <repository>
                <id>com.springsource.repository.bundles.external</id>
                <name>SpringSource Enterprise Bundle Repository - External Bundle Releases</name>
                <url>http://repository.springsource.com/maven/bundles/external</url>
            </repository>
            <repository>
                <id>maven2</id>
                <url>http://repo1.maven.org/maven2</url>
            </repository>
            <repository>
                <id>jBoss-Repository</id>
                <url>https://repository.jboss.org/nexus/content/groups/public/</url>
                <releases>
                    <enabled>true</enabled>
                </releases>
                <snapshots>
                    <enabled>false</enabled>
                </snapshots>
            </repository>
            <repository>
                <id>mirrors.ibiblio</id>
                <url>http://mirrors.ibiblio.org/maven/mule/dependencies/maven2/</url>
                <releases>
                    <enabled>true</enabled>
                </releases>
                <snapshots>
                    <enabled>false</enabled>
                </snapshots>
            </repository>
        </repositories>
        <build>
            <plugins>
                <plugin>
                    <groupId>org.codehaus.mojo</groupId>
                    <artifactId>hibernate3-maven-plugin</artifactId>
                    <version>2.2</version>
                    <executions>
                        <execution>
                            <id>generate-xml-files</id>
                            <phase>generate-resources</phase>
                            <goals>
                                <goal>hbm2hbmxml</goal>
                                <goal>hbm2cfgxml</goal>
                            </goals>
                        </execution>
                        <execution>
                            <id>generate-entities</id>
                            <phase>generate-sources</phase>
                            <goals>
                                <goal>hbm2java</goal>
                            </goals>
                        </execution>
                    </executions>
                    <configuration>
                        <components>
                            <component>
                                <name>hbm2hbmxml</name>
                                <implementation>jdbcconfiguration</implementation>
                                <outputDirectory>src/main/resources</outputDirectory>
                            </component>
                            <component>
                                <name>hbm2cfgxml</name>
                                <implementation>jdbcconfiguration</implementation>
                                <outputDirectory>src/main/resources</outputDirectory>
                            </component>
                            <component>
                                <name>hbm2java</name>
                                <implementation>configuration</implementation>
                                <outputDirectory>src/main/java</outputDirectory>

                            </component>
                        </components>
                        <componentProperties>
                            <implementation>jpaconfiguration</implementation>
                            <persistenceunit>myapp</persistenceunit>
                            <propertyfile>src/main/resources/database.properties</propertyfile>
                            <jdk5>true</jdk5>
                            <ejb3>true</ejb3>
                            <packagename>com.adept.reverse</packagename>
                            <format>true</format>
                            <haltonerror>true</haltonerror>
                        </componentProperties>
                    </configuration>
                    <dependencies>
                    <dependency>
                            <groupId>mysql</groupId>
                            <artifactId>mysql-connector-java</artifactId>
                            <type>jar</type>
                            <version>5.1.23</version>
                        </dependency>
                    </dependencies>
                </plugin>

            </plugins>
        </build>
    </project> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:56:05.470

`src/main/resources/META-INF/persistence.xml`

# excel-formula - Excel - 计算值为 [days]、[hrs]、[min] 的单元格，单元格值示例：1 天、1 小时、10 分钟

> ID：14959229
> 
> 赞同：0
> 
> 时间：2013-02-19T13:54:29.950
> 
> 标签：excel-formula

我有一个 Excel 表，其中包含我需要汇总的以下值（只是现实世界应用程序的一个示例）

```
23 hr, 0 min.
1 day, 1 hr, 10 min
7 day, 8 hr, 10 min
18 minutes.
0 minutes. 
```

在这种情况下，是否有可能有一个公式可以将其加起来

```
9 day, 8 hr, 38 min 
```

如果少于 1 天，则不会显示 x 天，而只会显示例如 5 小时 39 分钟。如果小于 1 小时，则不会显示 x Hours，而只会显示例如 20 分钟。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:14:27.380

这是一种方法，使用附加列使公式更简单：

假设文本值在 A 列的第 1-5 行：

将公式添加到 B1 并向下拖动：

```
=(IFERROR(VALUE(MID(A1,FIND("day","000"&A1)-5,2)),0))+(IFERROR(VALUE(MID(A1,FIND("hr",A1)-3,3)),0)/24)+(IFERROR(VALUE(MID(A1,FIND("min",A1)-3,3)),0)/3600) 
```

在末尾添加以下公式用于天/小时/分钟列 (B6-B9)

```
=SUM(B1:B5)
=ROUNDDOWN(B6,0)
=MOD(B6,1)
=MOD(B6,1/60) 
```

然后添加要显示的公式：

```
=IF(B7>0,TEXT(B7,"#")&" day"&IF(B7>1,"s "," "),"")&IF(B8>0,TEXT(B8*24,"#")&" hour"&IF(B8*24>1,"s "," "),"")&IF(B9>0,TEXT(B9*3600,"#")&" minute"&IF(B9*3600>1,"s "," "),"") 
```

# ruby-on-rails - Ruby on Rails - 很抱歉，出了点问题 (500)

> ID：14959230
> 
> 赞同：1
> 
> 时间：2013-02-19T13:54:29.050
> 
> 标签：ruby-on-rails, ruby

我正在做一个关于 ruby​​ on rails 的教程，并且对它很陌生。我从[http://railsinstaller.org/](http://railsinstaller.org/)安装它。我运行控制台并没有问题。我可以创建目录并启动服务器。我构建了一个新应用程序，然后当我转到 127.0.0.1:3000 时`"We're sorry, but something went wrong (500)"`出现错误。我查看了开发日志，我看到了这个——

```
ArgumentError (A secret is required to generate an integrity hash for cookie session data. Use config.secret_token = "some secret phrase of at least 30 characters"in config/initializers/secret_token.rb): 
```

它会持续更长时间，但除非您需要发布更多内容，否则只需发布此内容。我在安装了 Norton 360 的 Windows 8 Pro 上。

# php - 在 flexslider 中添加指向图像的链接

> ID：14959231
> 
> 赞同：2
> 
> 时间：2013-02-19T13:54:36.770
> 
> 标签：php, jquery, flexslider

我正在使用[flexslider](http://flex.madebymufffin.com/)插件，我想知道是否有一种简单的方法（除了更改插件的核心，如果我找不到简单的答案，我会这样做）去链接什么时候我单击当前幻灯片图像。我像这样简单地设置了 flexslider：

```
 $('#slide-top').flexslider({
           animation: 'slide'
           }); 
```

在视图中：

```
 <div id="slide-top" class="flexslider">
          <ul class="slides">
            <?php foreach ($gallery_top_slide as $image_slide): ?>
                    <li><img src="<?=base_url();?>assets/uploads/top_slide/<?=$image_slide['photo_url']?>" /></li>
                    <a href="<?=$image_slide['link_url']?>">Not need text on image</a>
            <?php endforeach; ?>
          </ul>
    </div> 
```

我怎样才能做到这一点？

例如。如果我点击当前图片去 www.google.com

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-18T15:06:36.880

仅 HTML 的解决方案：

改变这个：

```
<ul class="slides">
    <li>
        <img src="../myimage_1.jpg">
    </li>
    <li>
        <img src="../myimage_2.jpg">                       
    </li> 
```

ETC

进入这个：

```
<ul class="slides">
    <li>
        <a href="myurl_1"><img src="../myimage_1.jpg" alt="" /></a>
    </li>
    <li>
        <a href="myurl_2"><img src="../myimage_2.jpg" alt="" /></a>
    </li> 
```

等等

测试和工作。但是请务必将`pauseOnHover`Flexslider 的 -property 设置为`false`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:24:17.040

试试这个。

```
 <ul class="slides">
                <?php foreach ($gallery_top_slide as $image_slide): ?>
                        <li>
                           <a href="<?=$image_slide['link_url']?>">
                              <img src="<?=base_url();?>assets/uploads/top_slide/<?=$image_slide['photo_url']?>" />
                           </a>
                        </li>
                <?php endforeach; ?>
            </ul> 
```

# ios - 在iOS中检查互联网可达性是否有效？

> ID：14959234
> 
> 赞同：0
> 
> 时间：2013-02-19T13:54:42.717
> 
> 标签：ios, uitableview, reachability

假设我实际上有互联网连接，我使用此代码来了解设备是否通过 WiFi 连接：

```
+ (BOOL)hasWiFiConnection {

    Reachability *reachability = [Reachability reachabilityForInternetConnection];
    [reachability startNotifier];

    NetworkStatus status = [reachability currentReachabilityStatus];

    if (status == ReachableViaWiFi) {

        return YES;

    } else {

        return NO;
    }
} 
```

该代码运行速度快吗？

我在为图片生成 URL 时使用它（这样我就知道我是加载高分辨率图片还是低分辨率图片）。这些图片显示在列表视图中（每行 3 个）。当我滚动列表时，该函数每秒调用几次。那效率高吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:19:12.103

如果您不想使用可达性类，请使用以下代码。

```
 @interface CMLNetworkManager : NSObject
        +(CMLNetworkManager *) sharedInstance;

       -(BOOL) hasConnectivity;
          @end 
```

执行

```
 @implementation CMLNetworkManager

         +(CMLNetworkManager *) sharedInstance {
     static CMLNetworkManager *_instance = nil;
@synchronized(self) {
    if(_instance == nil) {
        _instance = [[super alloc] init];
    }
}
return _instance;
 }

   -(BOOL) hasConnectivity {
struct sockaddr_in zeroAddress;
bzero(&zeroAddress, sizeof(zeroAddress));
zeroAddress.sin_len = sizeof(zeroAddress);
zeroAddress.sin_family = AF_INET;

SCNetworkReachabilityRef reachability = SCNetworkReachabilityCreateWithAddress(kCFAllocatorDefault, (const struct sockaddr*)&zeroAddress);
if(reachability != NULL) {
    //NetworkStatus retVal = NotReachable;
    SCNetworkReachabilityFlags flags;
    if (SCNetworkReachabilityGetFlags(reachability, &flags)) {
        if ((flags & kSCNetworkReachabilityFlagsReachable) == 0)
        {
            // if target host is not reachable
            return NO;
        }

        if ((flags & kSCNetworkReachabilityFlagsConnectionRequired) == 0)
        {
            // if target host is reachable and no connection is required
            //  then we'll assume (for now) that your on Wi-Fi
            return YES;
        }

        if ((((flags & kSCNetworkReachabilityFlagsConnectionOnDemand ) != 0) ||
             (flags & kSCNetworkReachabilityFlagsConnectionOnTraffic) != 0))
        {
            // ... and the connection is on-demand (or on-traffic) if the
            //     calling application is using the CFSocketStream or higher APIs

            if ((flags & kSCNetworkReachabilityFlagsInterventionRequired) == 0)
            {
                // ... and no [user] intervention is needed
                return YES;
            }
        }

        if ((flags & kSCNetworkReachabilityFlagsIsWWAN) == kSCNetworkReachabilityFlagsIsWWAN)
        {
            // ... but WWAN connections are OK if the calling application
            //     is using the CFNetwork (CFSocketStream?) APIs.
            return YES;
        }
    }
}

return NO;
  }
  @end 
```

使用类共享实例的 bool 方法是你想要的

# asp.net - asp.net 导航自定义页面

> ID：14959238
> 
> 赞同：0
> 
> 时间：2013-02-19T13:54:53.723
> 
> 标签：asp.net, asp.net-dynamic-data

我有一个 ASP.NET 动态数据网站。我在顶层创建了一个新的 Web 表单并使用`NavigateUrl="~/ChangePassword.aspx"`.

但是，如果我尝试在`CustomPages`文件夹中添加一个新的 Web 表单，我将无法像这样访问它......这是为什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:58:17.463

您应该查看**DynamicData**文件夹`web.config`中的文件

 **```
<system.web>
    <httpHandlers>
      <add path="*.aspx" verb="*" 
           type="System.Web.HttpNotFoundHandler" validate="true" />
    </httpHandlers>
 </system.web> 
```

对 .aspx 文件的任何*访问*都将被重定向到**HttpNotFoundHandler**！

在*CustomPages*文件夹中，您可以为任何类型的实体集放置您自己的 -**定制**的- 动态数据模板页面。

只需使用 EntitySet 的名称*创建一个子文件夹，然后**在*此文件夹中创建（或复制）*您的新模板*。

无论如何 - 这个新的模板化定制页面只能通过您定义的路线访问（例如`new DynamicDataRoute("{table}/{action}.aspx")` ：）**

# ruby-on-rails - 使用 ActiveRecord 关联生成模型

> ID：14959239
> 
> 赞同：16
> 
> 时间：2013-02-19T13:54:58.140
> 
> 标签：ruby-on-rails, rails-activerecord

伙计们，

我正在创建一个应用程序，我的问题空间中有两个实体。一个实体是“生物学家”，另一个实体是“实验”，现在一个生物学家可以有很多实验，每个实验可以有很多生物学家。

我知道如何使用命令行生成器创建模型和路由：

```
 rails generate scaffold Biologist name:string expertise:string last_pub:text 
```

添加关联的正确方法是什么？生成后是否要更新模型代码？我不清楚的是，如果我在生成后添加“belongs_to”关联，那么它如何在不运行迁移或其他东西的情况下反映在数据库模式中？在上面的示例中，如果“实验”属于“生物学家”，那么“生物学家”表中将有一个外键，如果我在生成后的模型类中添加关联，它将如何创建。我对rails相当陌生，所以如果这是一个幼稚的问题，我深表歉意。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-02-19T14:34:47.060

我认为您正在寻找类似以下的内容：

```
rails g scaffold Biologist experiment:references 
```

阅读Jose Valim 的[这篇文章](http://blog.plataformatec.com.br/2012/01/my-five-favorite-hidden-features-in-rails-3-2/)，他向您展示了如何执行上述操作，并从命令行添加 db 索引：

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T14:28:18.903

您必须创建迁移以`biologist_id`向表中添加列`experiments`，然后在模型中添加`belongs_to :biologist`关系。`experiments`

您可以[在此处](https://stackoverflow.com/questions/8742633/rails-model-has-many-belongs-to-relations/8743097#8743097)找到更多详细信息。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-19T20:53:15.170

我会为每个模型生成一个模型，然后创建一个连接表，因为你有一个多对多的关系。如果你正确地遵循约定，rails 应该理解给定连接表的关系。

一般来说，如果您需要修改活动记录关系，您应该在模型中使用 has_many 或 has_and_belongs_to_many 关系来完成。

# java - 为什么在无界通配符类型上允许 instanceof 运算符，但在 Java 中的其他参数化类型上不允许？

> ID：14959240
> 
> 赞同：6
> 
> 时间：2013-02-19T13:54:58.063
> 
> 标签：java, generics

我认为由于[类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，使用`instanceof`and`class literals`是不允许的`parameterized generic types`except `unbounded wild card types`。为什么 Java 语言设计者允许这个例外？对于无界通配符类型没有任何类型擦除的作用吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T13:59:23.673

关键是一个对象知道它的具体类——但不知道它的泛型类型参数。因此，如果我们构造一个`ArrayList<Integer>`，它在执行时就知道它是`ArrayList`某种*类型*的- 但它不知道该`Integer`部分。

“`ArrayList`某种”部分正是什么`ArrayList<?>`意思，这就是为什么：

```
if (foo instanceof ArrayList<?>) 
```

已验证。它等同于使用原始类型：

```
if (foo instanceof ArrayList) 
```

# java - 乔达时间休眠：PersistentLocalDateTime.nullSafeGet

> ID：14959242
> 
> 赞同：3
> 
> 时间：2013-02-19T13:55:03.403
> 
> 标签：java, hibernate, jodatime

将旧版应用程序从旧版本升级到更高版本。

将 joda time 升级到 2.1，将 joda-time-hibernate 升级到 1.3 和 Hibernate 4。

我认为，joda-time-hibernate 1.3 与 Hibernate4 不兼容。那么，我可以使用什么其他 jar 来获得相同的行为而无需更改代码中的任何内容？

当我登录时，我收到以下错误作为根本原因，

```
java.lang.AbstractMethodError: org.joda.time.contrib.hibernate.PersistentDateTime.nullSafeGet 
```

我的 role.hbm 有以下与时间相关的配置：

```
<property name="insertTime" type="org.joda.time.contrib.hibernate.PersistentLocalDateTime" column="INSERTTIME"/>
<property name="updateTime" type="org.joda.time.contrib.hibernate.PersistentLocalDateTime" column="UPDATETIME"/> 
```

当我调试时，用户角色正在变为空！如何解决这个问题。任何建议表示赞赏！

以下是完整的堆栈跟踪：

```
SEVERE: Servlet.service() for servlet [default] in context with path [/tsl] threw exception [Filter execution threw an exception] with root cause
java.lang.AbstractMethodError: org.joda.time.contrib.hibernate.PersistentDateTime.nullSafeGet(Ljava/sql/ResultSet;[Ljava/lang/String;Lorg/hibernate/engine/spi/SessionImplementor;Ljava/lang/Object;)Ljava/lang/Object;
    at org.hibernate.type.CustomType.nullSafeGet(CustomType.java:127)
    at org.hibernate.type.AbstractType.hydrate(AbstractType.java:106)
    at org.hibernate.persister.entity.AbstractEntityPersister.hydrate(AbstractEntityPersister.java:2873)
    at org.hibernate.loader.Loader.loadFromResultSet(Loader.java:1668)
    at org.hibernate.loader.Loader.instanceNotYetLoaded(Loader.java:1600)
    at org.hibernate.loader.Loader.getRow(Loader.java:1500)
    at org.hibernate.loader.Loader.getRowFromResultSet(Loader.java:712)
    at org.hibernate.loader.Loader.processResultSet(Loader.java:940)
    at org.hibernate.loader.Loader.doQuery(Loader.java:910)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:341)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:311)
    at org.hibernate.loader.Loader.loadCollection(Loader.java:2228)
    at org.hibernate.loader.collection.CollectionLoader.initialize(CollectionLoader.java:61)
    at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:678)
    at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:80)
    at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:1804)
    at org.hibernate.collection.internal.AbstractPersistentCollection$4.doWork(AbstractPersistentCollection.java:549)
    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:234)
    at org.hibernate.collection.internal.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:545)
    at org.hibernate.collection.internal.AbstractPersistentCollection.read(AbstractPersistentCollection.java:124)
    at org.hibernate.collection.internal.AbstractPersistentCollection$1.doWork(AbstractPersistentCollection.java:153)
    at org.hibernate.collection.internal.AbstractPersistentCollection$1.doWork(AbstractPersistentCollection.java:138)
    at org.hibernate.collection.internal.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:234)
    at org.hibernate.collection.internal.AbstractPersistentCollection.readSize(AbstractPersistentCollection.java:137)
    at org.hibernate.collection.internal.PersistentSet.isEmpty(PersistentSet.java:163)
    at java.util.Collections$UnmodifiableCollection.isEmpty(Collections.java:999)
    at ca.ups.tundra.security.TundraAuthenticationProvider.rolesToAuthorities(TundraAuthenticationProvider.java:34)
    at ca.ups.tundra.security.TundraAuthenticationProvider.authenticate(TundraAuthenticationProvider.java:84)
    at ca.ups.tundra.security.TundraAuthenticationProvider$$FastClassByCGLIB$$e6ded9b.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:204)
    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:689)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:622)
    at ca.ups.tundra.security.TundraAuthenticationProvider$$EnhancerByCGLIB$$82804242.authenticate(<generated>)
    at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:156)
    at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:174)
    at org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter.attemptAuthentication(UsernamePasswordAuthenticationFilter.java:94)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:195)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:87)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:342)
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:192)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:160)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:346)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:259)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

# java - Android 致命异常 NullPointer

> ID：14959243
> 
> 赞同：2
> 
> 时间：2013-02-19T13:55:07.733
> 
> 标签：java, android, exception, button, onclicklistener

应用程序崩溃，我收到此错误：

```
02-19 13:48:34.168: E/AndroidRuntime(1070): FATAL EXCEPTION: main
02-19 13:48:34.168: E/AndroidRuntime(1070): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.prva/com.example.prva.MainMenu}: java.lang.NullPointerException

02-19 13:48:34.168: E/AndroidRuntime(1070): Caused by: java.lang.NullPointerException
02-19 13:48:34.168: E/AndroidRuntime(1070):     at com.example.prva.MainMenu.onCreate(MainMenu.java:49) 
```

当我尝试运行此活动时：

```
public class MainMenu extends Activity{ 
    Calendar c = Calendar.getInstance();    
    int currentsecond = c.get(Calendar.SECOND); 
    Handler h=new Handler();
    DatabaseManager db;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);             
        h.post(new Runnable(){
            @Override
            public void run() {             
                String currentDateTimeString = new SimpleDateFormat("dd.MM.yyyy HH:mm").format(new Date());
                TextView text = (TextView) findViewById(R.id.txtDate);
                text.setText(currentDateTimeString);
                h.postDelayed(this, 60000);
            }
        });

        db = new DatabaseManager(this);             

        Button btnalarm = (Button) findViewById(R.id.btnSetAlarm);
        btnalarm.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub      
                startActivity(new Intent(MainMenu.this, SetAlarm.class));               
            }           
        });

        Button btnmelody = (Button)findViewById(R.id.btnSetMelody);
        btnmelody.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                startActivity(new Intent(MainMenu.this, SetMelody.class));
            }
        });     

        Button btnlist = (Button) findViewById(R.id.btnAlarmList);
        btnlist.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent intent1 = new Intent(MainMenu.this, AlarmList.class);
                startActivity(intent1);
            }
        });

        Button btndata = (Button) findViewById(R.id.btnDatabase);
        btndata.setOnClickListener(new View.OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                Intent intent2 = new Intent(MainMenu.this, ManageDatabase.class);
                startActivity(intent2);
            }
        }); 
    }
} 
```

第 49 行是：

```
btnalarm.setOnClickListener(new View.OnClickListener() { 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T13:56:46.593

当你写这个：

```
 Button btnalarm = (Button) findViewById(R.id.btnSetAlarm);
    btnalarm.setOnClickListener(new View.OnClickListener() { 
```

你以为找到那个视图会返回一个非空按钮，但你错了。

看看搜索失败的原因，你就会得到答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:03:48.800

您的问题应该是当您尝试`findViewById`使用您的`Button``R.id.btnSetAlarm``setContentView(R.layout.activity_main);`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T14:05:54.253

试试这个：

```
 btnalarm.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
        // TODO do your stuff here
        }
    }); 
```

并确保在 *main_activity.xml* 中声明了您的“ *btnSetAlarm ”*

# javascript - 如何确保在 window.onload 中调用新函数之前完成我的 Ajax 调用？

> ID：14959245
> 
> 赞同：0
> 
> 时间：2013-02-19T13:55:09.437
> 
> 标签：javascript, ajax

**在这一点上，我不使用 Json 或 jquery - 请仅使用普通的 Javascript 答案**（我在 SE 上找到了很多关于这个问题的答案，但它们都包括 Jquery 或 Json）。

`window.onload=function(){...`我在事件处理程序中有两个函数。第一个函数`fillArray(from,to)`是以下形式的 Ajax 调用：

```
function fillArray(from,to){
  request = createRequest();
  if (request == null) {
    return;
  }
  var url= "Ajax_retrieveNames.php?indexFrom=" + from + "&indexTo=" + to;
  request.open("GET", url, true);
  request.onreadystatechange = populateArray;
  request.send(null);
}

function populateArray(){
  var xmlFrag=null;
  if (request.readyState == 4) {
    if (request.status == 200) {
      xmlFrag = request.responseXML;
      for(var i=indexFrom; i<=indexTo; i++){
        fcArray[i]=new Array();
        var f=xmlFrag.getElementsByTagName("first")[i].childNodes[0].nodeValue;
        var l=xmlFrag.getElementsByTagName("last")[i].childNodes[0].nodeValue;
        fcArray[i][0]=f;
        fcArray[i][1]=l;
      }
    }else{
      return;
    }
  }else{
    return;
  }
} 
```

第二个函数`showNextName()`处理格式化和显示下一个（在本例中为第一个）子数组的元素。此时，`var arrayIndex`设置为 0：

```
function showNextName(){
  displayQuestion() // Deals with page formatting
  document.getElementById('firstName').innerHTML=fcArray[arrayIndex][0];
  document.getElementById('lastName').innerHTML=fcArray[arrayIndex][1];
  updateArrayIndex(); // Is a counter that increments the variable arrayIndex
} 
```

`showNextName()`我的问题是脚本在完成 Ajax 调用和填充数组之前进入了第二个函数。我可以通过在两个函数之间加入一个计时器来解决这个问题，但这很笨拙。有没有更好的方法来确保在 Ajax 调用完成并填充数组之前我们不会进入`showNextName()`或离开？`window.onload`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:58:56.687

调用`showNextName`您的成功回调 ( `populateArray`)。由于 AJAX 是异步的，因此您需要在 4 时根据它执行逻辑，`readyState`就像您在`populateArray`函数中所做的那样。

```
function populateArray(){
  var xmlFrag=null;
  if (request.readyState == 4) {
    if (request.status == 200) {
      xmlFrag = request.responseXML;
      for(var i=indexFrom; i<=indexTo; i++){
        fcArray[i]=new Array();
        var f=xmlFrag.getElementsByTagName("first")[i].childNodes[0].nodeValue;
        var l=xmlFrag.getElementsByTagName("last")[i].childNodes[0].nodeValue;
        fcArray[i][0]=f;
        fcArray[i][1]=l;
      }
      showNextName();
    }else{
      return;
    }
  }else{
    return;
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T13:59:14.113

唯一明智的解决方案是在后者完成工作后`showNextName`从内部调用。`populateArray`

# asp.net - 大文件上传

> ID：14959250
> 
> 赞同：1
> 
> 时间：2013-02-19T13:55:25.070
> 
> 标签：asp.net, iis

我有一个带有 5 个 asp.net 上传控件的表单。这是为了允许用户上传 5 个大文件并提交。实现这一目标所需的步骤是什么？我在 IIS 中检查了以下配置，应用程序池：空闲超时：20 分钟，循环定期时间间隔：1740 分钟。我在我的网络配置文件中指定了以下内容，

```
 <system.web>
    <httpRuntime maxRequestLength="1048576" requestValidationMode="2.0"/>
  </system.web>
  <system.webServer>
    <security>
      <requestFiltering>
        <requestLimits maxAllowedContentLength="1073741824"/>
      </requestFiltering>
    </security>
  </system.webServer> 
```

当我尝试在所有 5 个上传控件中上传文件时，我无法上传文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:05:15.960

有几个原因可能会导致这种情况，如果不让我们知道您收到哪个错误，很难知道哪个原因。

第一：注意`maxRequestLength`以 KB 为单位，而`maxAllowedContentLength`以字节为单位。尝试`maxRequestLength`像这样增加：`maxRequestLength="2000000000"`

第二：尝试更高的执行时间，例如`executionTimeout="999999"`

```
<httpRuntime maxRequestLength="2000000000" executionTimeout="999999"/> 
```

您当前的设置`maxAllowedContentLength`允许 1024 MB。确保它不低于所有 5 个文件的总大小。

# sql-server - 您建议使用什么技术来管理数亿个字符串

> ID：14959252
> 
> 赞同：0
> 
> 时间：2013-02-19T13:55:44.980
> 
> 标签：sql-server, amazon-web-services, amazon-ec2, rds

我正在研究一个涉及管理数亿个字符串（varchar(100)）和一些相关数据（一些整数、一些浮点数等）的项目。项目所有者已要求在亚马逊云中执行此操作。

这些字符串将通过批处理作业不断更新（每天大约 1%）。每天将针对这些数据运行几份关键报告。

作为 SQL Server DBA，我的第一直觉是将其放入运行 SQL Server 的 EC2 实例中，但是我希望能够提供其他选项（RDS、MySQL、非 RDBMS 等）

有什么建议么？过去对你有用的是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:22:22.633

这可能会归结为你想用它做什么。RDS 只不过是托管的 SQL Server、Oracle 或 Mysql。但是，对于支持哪些功能存在一些限制。

您可能会从 NoSQL 系统中获得一些好处，与其说是主存储位置，不如说是您可以存储准备好的报告数据的地方。

您可能会发现 EMR 可用于处理用于报告的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-21T18:27:35.390

在 Amazon Cloud 中，您有以下选项：

*   [DynamoDB](http://aws.amazon.com/dynamodb/) - KeyValue NoSQL 高度可扩展的数据库。您可以使用它存储几乎无限数量的密钥。它的两个用例是进行键查找和键+范围扫描。对它不推荐的报告进行更复杂的查询。

*   [Redshift](http://aws.amazon.com/redshift/) - 针对标准 SQL 客户端（PostgreSQL 驱动程序）的大规模数据仓库。它还可以支持几乎无限数量的列式结构中的行。您可以在其上运行所有您喜欢的报告。

*   [CloudSearch](http://aws.amazon.com/cloudsearch/) - 非常可扩展的搜索索引器，能够使用属性创建方面（每个范围中有多少项目）。取决于您的数据结构和查询类型，它可能很有用。

*   [RDS](http://aws.amazon.com/rds/) - 关系数据库服务，支持 MySQL、Oracle 和 MS-SQL 引擎。这类似于在标准 EC2 实例上运行这些数据库，但更容易完成一些 DBA 任务（备份、恢复、扩展......）。

*   EC2 - 将您最喜欢的 NoSQL（MongoDB、Redis、Couchbase...）或 RDBMS（PostgreSQL、MySQL...）放在任何实例类型上，包括具有大量内存和磁盘的强大机器。

# c# - 我应该如何将实体映射到两个表

> ID：14959254
> 
> 赞同：0
> 
> 时间：2013-02-19T13:55:46.103
> 
> 标签：c#, nhibernate, fluent-nhibernate

请原谅这个尴尬的标题。我不完全确定如何表达它

我有一个实体，我们称之为`A`。`A`每周从电子表格中提取，然后存储在表格中。电子表格是累积的，因为从 6 周前提取的数据包含在 1 周前的电子表格中。

现在，有时这些数据是相同的，不需要更改。有时它需要改变。我想让主表充满最新的数据。也就是说，随着实体的更新，过时的实体将被删除，并在其位置插入较新的实体。

当一个`A`实体发生变化时，我创建一个`Conflict`, 这样它`Conflict`就有一个 Guid、一个冲突发现的 DateTime、一个注释和一个旧实体的副本（以便我们可以看到发生了什么变化等等），以及相关的冲突。相关的冲突工作正常，但是我想知道如何保留旧实体。

我可以做一个组件映射，但这只会让表格爆炸，我相信我可以以更“漂亮”的方式做到这一点。

我`Conflict`的映射如下：

```
public class ConflictAMapping : ClassMap<Conflict<A>>
{
    public ConflictAMapping()
    {
        Id(c => c.Guid);
        Map(c => c.DateOfConflict);
        Map(c => c.Comment);
        HasMany(c => c.RelatedConflicts)
            .KeyColumn("ConflictKey")
            .Inverse()
            .Cascade.All()
            .Table("RelatedConflicts");
        References<A>(c => c.OriginalEntity)
            .Column("FK_IssueNumber")
            .Cascade.All();
    }
} 
```

还有我的`A`映射

```
public class GSFEntityMapping : ClassMap<GSFEntity>
{
    public GSFEntityMapping()
    {

     ... unrelated properties blah blah ...
        HasMany(g => g.Conflicts).KeyColumn("theKey")
            .Table("Conflicts")
            .AsBag().Cascade.All()
    }
} 
```

该`Conflict`表如下所示：

```
Guid|DateOfConflict|CommentFK_IssueNumber|ConflictKey|theKey 
```

该`A`表没有任何与冲突相关的内容（只是实际属性）。

那么如何映射旧实体呢？我是否必须为旧`A`实体生成一个新类，或者有什么方法可以在 Fluent/NHibernate 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:44:28.977

assuming you have classes like this

```
class Issue
{
    public virtual int Id { get; protected set; }
    public virtual string Key { get; set; }   // same for all versions of the issue
    public virtual DateTime Created { get; set; }
}

class Conflict<T>
{
    public virtual Guid Id { get; protected set; }
    public virtual T OriginalEntity { get; set; }
    public virtual DateTime DateOfConflict { get; set; }
    public virtual string Comment { get; set; }
    public virtual string IssueKey { get; set; }
    public virtual ICollection<Conflict<T>> RelatedConflicts { get; protected set; }
} 
```

then mappings with

*   removed Inverse because there is no backreference in Conflict like RelatesTo
*   Cascade.None() on Conflicts because deleting IssueVersion should not automaticly delete all Conflicts of the Issue
*   renamed some columns for clarity
*   a second mapping for archived Issues

```
public class ConflictAMapping : ClassMap<Conflict<Issue>>
{
    public ConflictAMapping()
    {
        Id(c => c.Id).GeneratedBy.Assigned();
        Map(c => c.DateOfConflict);
        Map(c => c.Comment);
        HasMany(c => c.RelatedConflicts)
            .KeyColumn("RelatedToConflict")
            .Cascade.All();
        References(c => c.OriginalEntity)
            .EntityName("ArchivedIssue")
            .Column("FK_Issue_id")
            .Cascade.All();
    }
}

public class IssueMapping : ClassMap<Issue>
{
    public IssueMapping()
    {
        Id(c => c.Id).GeneratedBy.Assigned();
        Map(c => c.Key);
        Map(c => c.Created);
        HasMany(g => g.Conflicts)
            .KeyColumn("IssueKey")
            .PropertyRef("Key")
            .Cascade.None();
    }
}

public class ArchivedIssueMapping : IssueMapping
{
    public ArchivedIssueMapping()
    {
        Table("ArchivedIssues");
        EntityName("ArchivedIssue");
    }
} 
```

ArchivedIssues would create a table which are a exact copy of the Issue table. and using it should be easy

```
var oldIssueVersion = session.Get<Issue>(newIssueVersion.Id);
session.Delete(oldIssueVersion);

var conflict = new Conflict<Issue>() { Id = Guid.NewGuid(), IssueKey = oldIssueVersion.Key, OriginalEntity = oldIssueVersion, DateOfConflict = DateTime.Now };
session.Save(conflict);
session.Save(newIssueVersion); 
```

querying old Issues would be

```
var oldIssueVersions = session.CreateCriteria<Issue>("ArchivedIssues")
    .List<Issue>(); 
```

# image - 如何在 ipad 应用商店上制作像这样的 iOS 图像滑块？

> ID：14959261
> 
> 赞同：2
> 
> 时间：2013-02-19T13:55:59.807
> 
> 标签：image, ipad

我想在 ipad mini 应用商店上制作像这样的图像滑块？

请检查链接：

[http://www.thefullsignal.com/news/1665618/best_ipad_mini_apps_to_get_started_with.html](http://www.thefullsignal.com/news/1665618/best_ipad_mini_apps_to_get_started_with.html)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T14:08:52.773

您可能正在寻找 icarousel 检查[此](https://github.com/nicklockwood/iCarousel)。

# wordpress - 如何在 WordPress NextGen Lightbox 中添加指向原始图像的链接

> ID：14959264
> 
> 赞同：0
> 
> 时间：2013-02-19T13:56:05.907
> 
> 标签：wordpress, lightbox, prettyphoto, nextgen-gallery

我在 WordPress 中使用带有 Lightbox javascript 效果的 NextGen Gallery 插件。所以我有下一张和上一张图片的活动 div：

```
<div class="pp_hoverContainer">
<a class="pp_next" href="#">next</a>
<a class="pp_previous" href="#">previous</a>
</div> 
```

这个 div 覆盖了我的图像 div，这就是为什么我无法通过单击鼠标右键来保存当前图像，因为它没有 pp_hoverContainer。

我需要“保存图像”或“打开原始图像”功能。

这是正在使用的 jquery.prettyPhoto.js 代码。请帮我在这里插入一个按钮“保存此图像”或“在新窗口中打开图像”

```
 /* ------------------------------------------------------------------------
        Class: prettyPhoto
        Use: Lightbox clone for jQuery
        Author: Stephane Caron (http://www.no-margin-for-errors.com)
        Version: 3.1.5
    ------------------------------------------------------------------------- */
... 
```

下载 lquery.pretty.js - [http://www.no-margin-for-errors.com/demos/prettyPhoto-jquery-lightbox-clone/prettyPhoto_uncompressed_3.1.5.zip](http://www.no-margin-for-errors.com/demos/prettyPhoto-jquery-lightbox-clone/prettyPhoto_uncompressed_3.1.5.zip)

你可以看看我的画廊 - [http://2013.infoforum.ru/#!lightbox[ngg-images-2]/0/](http://2013.infoforum.ru/#!lightbox%5Bngg-images-2%5D/0/)

在这里我无法通过单击鼠标右键来保存图像： ![在此处输入图像描述](../Images/3ba7cd8b2330c5099ed60304b50e55c2.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T07:22:12.307

试试这个插件[Wp Jquery Lightbox](http://wordpress.org/extend/plugins/wp-jquery-lightbox/)。它具有内置下载选项，将为您提供原始图像 url。

# openerp - 如何在 7.0 上将附件存储到本地文件系统？

> ID：14959266
> 
> 赞同：3
> 
> 时间：2013-02-19T13:56:10.903
> 
> 标签：openerp

我一直在努力配置我的服务器以将所有附件存储到本地文件系统而不是数据库。你如何在 OpenERP 7.0 服务器上做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T14:57:19.210

为附件配置本地存储的方式在 OpenERP v7 中发生了变化。这篇[文章](http://help.openerp.com/question/529/where-are-document-attachments-stored/)总结了新系统。

默认情况下，附件存储在数据库中，但您可以通过设置名为`ir_attachment.location`. 要查看此菜单，您需要“技术特性”访问权限。

该参数的格式应为: `protocol://URI`，默认唯一支持的协议是 local `file://`，例如`file:///filestore`

请注意，`file://`协议的路径是相对于 OpenERP 根路径（OpenERP 服务器的位置）采用的，因此`ir_attachment.location`设置为`file:///filestore`附件将存储在 at 下`<root_path>/filestore`。

新系统还使用 SHA1 哈希来生成文件名，这样重复文件就不会占用任何空间。

在数据库模式下，文件内容存储在`ir_attachment.db_datas`列中。
在文件存储模式中，文件名存储在`ir_attachment.db_datas_fname`列中。
（神秘的名称是为了向后兼容）

**警告：**存储机制之间不存在自动转换机制。这意味着：

*   当您设置此参数时，现有附件仍存储在数据库中，只有*新*附件将存储在文件系统中。系统将尝试这两个位置，所以这不是问题（首先寻找数据库存储，然后是文件系统存储）。

*   如果您删除此参数，您应该手动将文件存储回数据库中，因为系统只会在数据库中查找。

# wcf - Windows Azure maxReceivedMessageSize 集

> ID：14959268
> 
> 赞同：0
> 
> 时间：2013-02-19T13:56:17.263
> 
> 标签：wcf, azure

我想发送到我的 WCF WebRole 的大量数据存在问题。我得到 (413) 太大的数据错误。我在 Azure 和 WCF 中很新。我创建了一个用于将图像发送到 WCF (LargeObject.svc) 的新服务，并尝试为其配置绑定和端点。

这是服务器端代码：

```
 <system.serviceModel>
<bindings>
  <basicHttpBinding>
    <binding name="BasicHttpBinding_IImage" maxReceivedMessageSize="2147483647" maxBufferPoolSize="2147483647">
      <readerQuotas maxDepth="32"
               maxArrayLength="200000000"
               maxStringContentLength="200000000"/>
    </binding>
    <binding name="BasicHttpBinding_IRouteService"/>
  </basicHttpBinding>
  <customBinding>
    <binding name="CustomBinding_IRouteService">
      <binaryMessageEncoding />
      <httpTransport />
    </binding>
  </customBinding>
</bindings>
<client>
  <endpoint address="http://dev.virtualearth.net/webservices/v1/routeservice/routeservice.svc"
    binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IRouteService"
    contract="Route.IRouteService" name="BasicHttpBinding_IRouteService" />
  <endpoint address="http://dev.virtualearth.net/webservices/v1/routeservice/routeservice.svc/binaryHttp"
    binding="customBinding" bindingConfiguration="CustomBinding_IRouteService"
    contract="Route.IRouteService" name="CustomBinding_IRouteService" />
  <endpoint address="http://127.0.0.1:81/Implementation/LargeObject.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_IImage"
            contract="ILargeObject" name="BasicHttpBinding_IImageSvc"/>
</client>
<behaviors>
  <serviceBehaviors>
    <behavior>
      <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
      <serviceMetadata httpGetEnabled="true"/>
      <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
      <serviceDebug includeExceptionDetailInFaults="false"/>
      <dataContractSerializer maxItemsInObjectGraph="1048576" />
    </behavior>
  </serviceBehaviors>
</behaviors>
<serviceHostingEnvironment multipleSiteBindingsEnabled="true" /> 
```

我在 Windows Phone 中还有一个客户端应用程序，代码：

```
string endPointAddress = (Application.Current as TravelerMobile.App).ServerUriString("LargeObject.svc");

        LargeObjectClient client = new LargeObjectClient(new BasicHttpBinding(),
            new EndpointAddress(endPointAddress));

        MemoryStream stream = new MemoryStream();
        WriteableBitmap wb = new WriteableBitmap(image);
        wb.SaveJpeg(stream, image.PixelWidth, image.PixelHeight, 0, 100);
        byte[] byteImage = stream.ToArray();

        client.AddImageAsync(new LargeObject.AddImageRequest
        {
            Image = byteImage,
            Latitude = latitude,
            Longitude = longitude,
            UserId = Helpers.GetUserId()
        }); 
```

我还尝试通过设置 maxRevieved 和 maxBuffered 属性在客户端配置 BasicHttpBinding，但它仍然不起作用。

有任何想法吗？

ps 这是一个 Windows Azure WCF 项目，所以我有一个默认端点 - 但我不知道如何设置它 maxReceivedMessageSize 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:57:29.827

我在 stackoverflow 上找到了以下链接，他们遇到了同样的问题，希望它也对你有用，[Azure WCF Webrole 错误：远程服务器返回了意外响应：（413）请求实体太大](https://stackoverflow.com/questions/14755529/azure-wcf-webrole-error-the-remote-server-returned-an-unexpected-response-413)

当您在 MaxReceivedMessageSize 中设置了要传输的最大字节数时，我认为您应该在 ReaderQuotas 标记中执行此操作。

另一件事，您必须考虑，我不知道您使用的是什么类型的存储，但有些存储不允许您上传超过 4MB 的文件。例如，对于每个块块，块的最大大小为 4 MB，页块的最大大小为 4 MB。

您也可以在 msdn 上查看此链接，他们遇到了同样的问题：[http ://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/39bfad06-97c0-4a98-b9fb-87879bab9414](http://social.msdn.microsoft.com/Forums/en-US/windowsazuredata/thread/39bfad06-97c0-4a98-b9fb-87879bab9414)

# php - 来自 php 变量的 Google Analytics 自定义变量（动态数字）

> ID：14959271
> 
> 赞同：1
> 
> 时间：2013-02-19T13:56:22.503
> 
> 标签：php, javascript, google-analytics

如何将此 php 变量作为自定义变量放入此 javascript 代码中？

我在我的登陆页面上为每个访问者生成了一个动态编号。这可作为 php 变量使用；

$点击数

我已经有以下代码与 GA (javascript) 一起使用；

```
<script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

我的问题：如何将此 php 变量作为自定义变量放入此 javascript 代码中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:01:46.133

```
<script>

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);

  _gaq.push(['_setCustomVar', 1, 'clicknumber', <?= $clicknumber ?>, 2]);

  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script> 
```

更多信息：[https ://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables#setup](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCustomVariables#setup)

# elasticsearch - Elasticsearch 比较或

> ID：14959272
> 
> 赞同：0
> 
> 时间：2013-02-19T13:56:25.180
> 
> 标签：elasticsearch

我有一个查询：

```
{
    "query": {
        "bool" : {
            "must": [
                { "match": { "tags": "htc" } },
                { "match": { "votype" : 1} },
                { "match": { "subtype": 1 } },
                { "match": { "deleted": 0 } },
                { "match": { "build_status": 4 } },
                { "match": { "publish": 1 } }
            ]
        }
    },

    "sort": [
        { "created": "desc" }
    ],

    "size": 30,
    "from": 0
} 
```

我想放入值的值列表中

```
{ "match": { "votype": [1 or 2 or 3] } } 
```

SQL 类比：

```
SELECT * FROM tablename WHERE type IN(1, 2); 
```

但不知道怎么做

不工作：

```
{ "match": { "votype": [1,3] } },
{ "match": { "votype": "1 2" } },
{ "match": { "votype": "1OR2" } } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T16:33:53.123

这行得通吗？

```
{ "match": { "votype": "1 2 3" } } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T13:32:40.640

我的解决方案

```
{
    "query": {
        "bool" : {
            "must": [
                { "terms" : { "tags": ["htc"], "minimum_match": 1 } },
                { "terms" : { "votype" : [1,2], "minimum_match": 1 } },
                { "terms" : { "deleted": [0], "minimum_match": 1 } },
                { "terms" : { "build_status": [4], "minimum_match": 1 } },
                { "terms" : { "publish": [1], "minimum_match": 1 } }
            ]

        }
    },

    "sort": [
        { "created": "desc" }
    ],

    "size": 30,
    "from": 0
} 
```

# javascript - 将图像加载到多维数据集 three.js

> ID：14959276
> 
> 赞同：1
> 
> 时间：2013-02-19T13:56:39.447
> 
> 标签：javascript, three.js, webgl

嗨，我试图将图像加载到多维数据集，但我不知道出了什么问题。立方体很好，但不是图像。这是链接：[http ://diegoddox.bitbucket.org/loadimage/](http://diegoddox.bitbucket.org/loadimage/)

```
var scene, camera, renderer;
renderer = new THREE.WebGLRenderer();
renderer.setSize(window.innerWidth, window.innerHeight);
renderer.setClearColorHex(0xeeeeee);
renderer.clear();
document.body.appendChild(renderer.domElement);
scene = new THREE.Scene();
camera = new THREE.PerspectiveCamera( 70, window.innerWidth/window.innerHeight, 0.1, 5000 );
camera.position.z = 800;
camera.lookAt(scene.position);
scene.add(camera);
var material = new THREE.MeshBasicMaterial({
    map: THREE.ImageUtils.loadTexture("img.jpg")
});
material.map.needsUpdate = true; 
var cube = new THREE.Mesh(new THREE.CubeGeometry(300, 300, 300), material);
cube.overdraw = true;
cube.position.x = 0;
cube.rotation.x = -20;
cube.rotation.z = -2;
scene.add(cube);
renderer.render(scene, camera); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T17:45:13.820

图像加载是异步的。

发生的事情是您的单个`render()`调用是在图像完成加载之前发生的。

进入

```
renderer.render(scene, camera); 
```

进入控制台，您将看到纹理渲染。

您需要为您的`loadTexture()`函数添加回调并`render()`从那里调用，或者，您可以使用`requestAnimationFrame()`.

# lambda - 使用不需要的尾部删除列表结果中的重复项

> ID：14959277
> 
> 赞同：0
> 
> 时间：2013-02-19T13:56:45.670
> 
> 标签：lambda, prolog

我想从给定列表中删除所有重复项。

考虑以下代码：

```
% check if the given element is in the given list 
member(Element,[Element|_]).
member(Element,[_|List]):-member(Element, List).

% append the element only if it's NOT already in the input list 
appending([],X,X).
appending([H|T1],Elem,[H|T2]):- appending(T1,Elem,T2).

appendHlp(ListOrg,Res,Addme):- not(member(Addme,ListOrg)),
                   appending(ListOrg,[Addme],Res).
appendHlp(ListOrg,Res,Addme):- member(Addme,ListOrg),
                   Res=ListOrg.

% remove duplicates 
setify([H|T],Set):-appendHlp(Set,Output,H),
           setify(T,Output).
setify([],_). 
```

当我运行代码时：

```
1 ?- setify([1,2,3,3,2],X). 
```

输出是：

```
X = [1, 2, 3|_G2725] 
```

我怎样才能去掉尾巴？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T22:12:05.670

如果你使用 SWI-Prolog 你可以写

```
:- use_module(library(lambda)).

setify(L, Set) :-
    foldl(\X^Y^Z^(memberchk(X, Y)->Z=Y; append(Y, [X], Z)), L, [], Set). 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T17:21:20.240

您的问题（表面上）是 member/2 使用未实例化的变量调用，然后“构建”您在输出中看到的部分列表

```
[trace]  ?- setify([1],X).
   Call: (6) setify([1], _G340) ? creep
   Call: (7) appendHlp(_G340, _G416, 1) ? creep
^  Call: (8) not(member(1, _G340)) ? creep
^  Fail: (8) not(user:member(1, _G340)) ? creep
   Redo: (7) appendHlp(_G340, _G416, 1) ? creep
   Call: (8) lists:member(1, _G340) ? creep
   Exit: (8) lists:member(1, [1|_G409]) ? creep
   Call: (8) _G418=[1|_G409] ? creep
   Exit: (8) [1|_G409]=[1|_G409] ? creep
   Exit: (7) appendHlp([1|_G409], [1|_G409], 1) ? creep
   Call: (7) setify([], [1|_G409]) ? creep
   Exit: (7) setify([], [1|_G409]) ? creep
   Exit: (6) setify([1], [1|_G409]) ? creep
X = [1|_G409] . 
```

这并不容易纠正，因为您使用一种**非常**复杂的方式来完成一项**非常**简单的任务。例如，如果您将 member 替换为 memberchk 或`member(Addme,ListOrg)`，`[Addme]=ListOrg`您的程序将失败。

我会建议采取一些 Prolog 社区接受的编程习惯。例如，尝试将*输入*参数放在输出*之前*。这并不总是可能的，因为 Prolog 是*关系*型的，但有助于编写更好的代码。

当然， sort/2 会高效且轻松地生成输出。

*编辑*解决方案可以非常紧凑，在基本的 Prolog 中：

```
setify([E|R], U) :- memberchk(E, R), !, setify(R, U).
setify([E|R], [E|U]) :- setify(R, U).
setify([], []).

3 ?- setify([1,1,1,2,1,1],L).
L = [2, 1]. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-19T20:01:13.547

正如 CapelliC 所说，您可以使用`sort/2`- 它将删除重复项并对元素进行排序。集合通常以排序形式表示。

如果您需要保留元素的原始顺序，这里不是非常有效但非常简单的实现：

```
setify([H|T], OldSet, NewSet) :-
    ( \+ memberchk(H, OldSet) ->
        append(OldSet, [H], CurrentSet),
        setify(T, CurrentSet, NewSet)
    ;
        setify(T, OldSet, NewSet)
    ).
setify([], OldSet, OldSet).

setify(List, Set) :-
    setify(List, [], Set). 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T18:48:46.540

另一种使用尾递归和单个谓词来完成整个事情的解决方案，但不保留原始顺序。

```
% Finish recursing / empty list
remdup([], []).

% Recurse tail first, don't add H to the list if already included
remdup([H|T], NoDups) :-
    remdup(T, NoDups),
    member(H, NoDups).

% Second rule failed, so H must be unique - add to NoDups list
remdup([H|T], [H|NoDups]) :-
    remdup(T, NoDups).

?- remdup([1,2,2,3,2,1,3,3,3,2],X).
X = [1, 3, 2] . 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-07-13T02:04:07.727

我对Prolog很陌生。这是我想出的删除重复元素的解决方案。希望这可以帮助。

```
% Define negation of "member"
notmember(X,L) :- not( member(X,L) ).

% Remove duplicates terminal case
removeDups( [], R, R).

% Case where the head element is a member of tail. Drop it.
removeDups( [H|T], R, A ) :- member(H,T) , removeDups( T, R, A ).

% Case where head element is unique
removeDups([H|T], R, A ) :- notmember(H,T), append(A,[H],N), removeDups(T,R,N).

% Main predicate to remove duplicates with original order maintained.
uniq(X,Y) :- removeDups(X,Y,[]). 
```

# ios - NSJSONSerialization 拆箱 NSNumber？

> ID：14959282
> 
> 赞同：3
> 
> 时间：2013-02-19T13:57:00.943
> 
> 标签：ios, json, nsjsonserialization

我正在使用`NSJSONSerialization`将`JSON`文档转换为核心基础类型。

我的字段中`JSON`有一个“数字”。它有时是整数，有时是浮点数。

现在，问题是当`NSJSONSerialization`我`JSON`变成 an`NSDictionary`并且我尝试使用 objectForKey 提取数字时，有时它是一个 int，有时它是一个 double。它似乎`NSJSONSerialization`不仅仅是将它留在`NSNumber`包装器中，而是实际上将值拆箱，并将其插入*到*`NSDictionary`.

很奇怪。我以为你我们应该将原语放入`NSDictionary`. 所以我现在遇到的问题是我不知道我应该转换什么类型（int 或 double）来保留实际的数值。

有人知道出路吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:13:57.177

您可以从 NSNumber 获取原始类型。只需使用以下代码片段：

```
 const char* type = [theValue objCType];
if (strcmp (type, @encode (NSInteger)) == 0) {
    //It is NSInteger
} else if (strcmp (type, @encode (NSUInteger)) == 0) {
    //It is NSInteger
} else if (strcmp (type, @encode (int)) == 0) {
    //It is NSUInteger
} else if (strcmp (type, @encode (float)) == 0) {
    //It is float
} else if (strcmp (type, @encode (double)) == 0) {
    //It is double
} else if (strcmp (type, @encode (long)) == 0) {
    //It is long
} else if (strcmp (type, @encode (long long)) == 0) {
    //It is long long
} 
```

等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:16:34.757

原来它们一直是 NSNumbers，而我只是缺乏调试经验。我只是感到困惑，并认为它们是 int 和 double 值，因为这就是调试器呈现它们的方式。所以拆箱的是调试器，而不是 NSJSONSerialization ......

# ruby-on-rails - Rails：获取嵌套资源的父对象

> ID：14959286
> 
> 赞同：16
> 
> 时间：2013-02-19T13:57:10.813
> 
> 标签：ruby-on-rails, nested-resources

我有一个属于许多不同模型的嵌套资源。例如：

```
resources :users do
  resources :histories, only: [:show]
end

resources :publications do
  resources :histories, only: [:show]
end

resources :events do
  resources :histories, only: [:show]
end 
```

在 中`HistoriesController`，我想找到父对象，尽管我很难想出一种干的方法来处理这个问题。目前，我能想到的最好的方法是：

```
if params[:user_id].present?
  @parent = User.find(params[:user_id])
elsif params[:publication_id].present?
  @parent = Publication.find(params[:publication_id])
elsif . . . . 
```

我实际上有几十个模型我必须以这种方式分支，这似乎很草率。有没有我没有考虑的更好的（也许是成熟的）方法？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2015-09-03T09:17:29.053

我这样做的方式是将父模型类名称添加为路由中的默认参数。

对于问题示例，这应该类似于：

```
resources :users, model_name: 'User' do
  resources :histories, only: [:show]
end

resources :publications, model_name: 'Publication' do
  resources :histories, only: [:show]
end

resources :events, model_name: 'Event' do
  resources :histories, only: [:show]
end 
```

这将在 params 哈希中添加模型名称。

然后在控制器/动作中，您可以获得父模型，例如：

```
params[:model_name].constantize # Gives you the model Class (eg. User) 
```

和外键如：

```
params[:model_name].foreign_key # Gives you column name (eg. user_id) 
```

因此，您可以执行以下操作：

```
parent_class = params[:model_name].constantize
parent_foreing_key = params[:model_name].foreign_key

parent_object = parent_class.find(params[parent_foreing_key]) 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-02-19T14:08:46.450

不是真正的解决方案，但你可以逃脱

```
parent_klasses = %w[user publication comment]
if klass = parent_klasses.detect { |pk| params[:"#{pk}_id"].present? }
  @parent = klass.camelize.constantize.find params[:"#{klass}_id"]
end 
```

如果您在参数名称和模型之间使用约定

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-18T17:25:04.830

作为已接受答案的替代方案，您可以使用如下动态路由：

```
get ':item_controller/:item_id/histories/:id', to: 'histories#show' 
```

这应该允许您在 histories_controller.rb 中访问类似这样的父类

```
parent_controller = params[:item_controller]
parent_class = parent_controller.singularize.camelize.constantize
@parent = parent_class.find(params[:item_id]) 
```

如果需要，您也可以在路由中添加对 item_controller 的约束。

# php - 通过 Dropbox 选择器的非过期下载链接

> ID：14959290
> 
> 赞同：4
> 
> 时间：2013-02-19T13:57:20.350
> 
> 标签：php, api, plugins, download, dropbox

Dropbox 选择器返回 2 种链接类型：预览和直接。通过在直接下载链接的末尾附加 ?dl=1，您可以强制 Dropbox 将文件发送到用户的浏览器。

现在这很好，正是我想要的只是直接链接在几个小时后过期。

有没有办法获得一个永久的直接下载链接到 Dropbox 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T18:17:04.970

选择器返回的“直接”链接类型实际上返回一个默认直接引用文件的链接，即使没有 ?dl=1，但它确实会在四个小时后过期。

?dl=1 修改实际上使 Dropbox 告诉浏览器下载文件。

在任何情况下，您还可以修改不会过期的“预览”链接，以获得这些行为中的任何一种，如此处所述：

[https://www.dropbox.com/help/201/en](https://www.dropbox.com/help/201/en)

简而言之，使用 dl 子域（而不是 www）使其行为类似于直接链接，并附加 ?dl=1 使其下载。

# javascript - 通过单击它的 youtube 屏幕截图来附加 iframe

> ID：14959291
> 
> 赞同：1
> 
> 时间：2013-02-19T13:57:21.990
> 
> 标签：javascript, jquery, youtube

我有一长串视频，并且有很多 iframe 会减慢所有浏览器的速度。我决定只使用他们的截图。通过单击屏幕截图，将显示 iframe，并隐藏屏幕截图。我只是将 iframe 默认设置为隐藏，但我希望动态附加 iframe，以便 iframe 根本不会用 HTML 代码编写，这是我的代码：

```
<div class="youtube">
                <div class="description">Desciption 1</div>
                <div class="youtube_thumb">
                    <img src="http://img.youtube.com/vi/mqf6K6qYOWg/0.jpg" style="width:325px;border:0;" />
                    <iframe width="325" height="250" src="http://www.youtube.com/embed/mqf6K6qYOWg" frameborder="0" allowfullscreen></iframe>
                </div>
            </div>
            <div class="youtube">
                <div class="description">Desciption 2</div>
                <div class="youtube_thumb">
                    <img src="http://img.youtube.com/vi/GIc14HyiLNs/0.jpg" style="width:325px;border:0;" />
                    <iframe width="325" height="250" src="http://www.youtube.com/embed/GIc14HyiLNs" frameborder="0" allowfullscreen></iframe>
                </div>
            </div> 
```

等等..

和 javascript：

```
$('.youtube_thumb > img').click(function(){
            var $img = $(this);
            $img.hide();
            $img.next().show();
        }); 
```

和风格：

```
.youtube_thumb iframe { display:none; }
.youtube_thumb:hover { cursor:pointer; } 
```

如您所见并且可能知道，我获得的屏幕截图直接来自 youtube，因此屏幕截图链接：`mqf6K6qYOWg/0.jpg`和框架链接：`/embed/mqf6K6qYOWg`相同，我认为可以通过使用屏幕截图的链接，将 iframe 附加到相同的链接。我怎么能这样做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:09:11.860

```
$('.youtube_thumb > img').click(function(){
    var parts = this.src.split("/");  //grab the url and split it into parts
    var id = parts[parts.length-2]; //grab the second to last piece
    $('<iframe width="325" height="250" src="http://www.youtube.com/embed/' + id + '" frameborder="0" allowfullscreen></iframe>').insertAfter(this);  //append the iframe
    $(this).hide();  // .remove();
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:03:01.010

将 img 包装成 a 标签

`<a class="wrap" href="http://www.youtube.com/embed/mqf6K6qYOWg"><img /></a>`

jQuery

```
$('.wrap').on('click', function() {
    var src = $(this).attr('href');
    $(this).before('<iframe width="325" height="250" src="'+src+'" frameborder="0" allowfullscreen></iframe>');
    $(this).remove();
    return false;
)} 
```

# java - ThreadLocal 单例

> ID：14959295
> 
> 赞同：7
> 
> 时间：2013-02-19T13:57:45.140
> 
> 标签：java, singleton, thread-local

我在 GlassFish 上运行 RESTful java 后端。附加到它的是一个 HTML5 / JS 前端，我可以将它放入 webapp 项目中（然后将后端作为依赖项包含在内），或者在不同位置的 IIS 网络服务器上运行。CORS 不是问题。无论解决以下问题：

情况：

1.  User1 登录并且数据库路径设置为“db/user1/”
2.  User1 将“值 1”插入数据库
3.  User2 登录并且数据库路径设置为“db/user2/”
4.  User1 尝试从数据库中删除“值 1”

User1 将无法从 db/user1 中删除值 1，因为数据库路径已更改为 db/user2，并且该数据库中没有值 1。

```
public class DataAccess{
    private static DataAccess dataaccess;
    private String databasepath;

    public static DataAccess getInstance() {
        if (dataaccess == null) {
            dataaccess = new DataAccess();
        }
    }
} 
```

如何修改 getInstance() 方法以使其充当单例，但仅在该用户的线程内？我看到了一个叫做threadlocal的东西，但没有完全理解，这可能是一个解决方案吗？

任何帮助都是肯定的。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T14:06:11.993

您*可以*`ThreadLocal`在工厂模式中使用该类：

```
public class DataAccess{
    private static ThreadLocal<DataAccess> THREAD_LOCAL = new ThreadLocal() {
     @Override
     protected DataAccess initialValue() {
             return new DataAccess();
     }
    };
    private String databasepath;

    public static DataAccess getInstance() {
      return THREAD_LOCAL.get();
    }
} 
```

但是，这将导致内存泄漏。因此，您需要使用[Servlet 过滤器](http://www.oracle.com/technetwork/java/filters-137243.html)在请求开始时设置值，然后在结束时将其删除，例如：

```
 public void doFilter(ServletRequest request,
      ServletResponse response, FilterChain chain) 
      throws IOException, ServletException {
      DataAccess.set(new DataAccess("SomeValue"));
      try {
        chain.doFilter(request, response);
      } finally {
        DataAcess.remove();
      }
   } 
```

一旦你有一个`class`实现[过滤器](http://docs.oracle.com/javaee/5/api/javax/servlet/Filter.html)的你将它添加到你的`web.xml`因此：

```
<!--Filter for adding in dataccess objects-->
<filter>
    <filter-name>DataccessFilter</filter-name>
    <filter-class>my.package.DataccessFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>DataccessFilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

[此](http://viralpatel.net/blogs/tutorial-java-servlet-filter-example-using-eclipse-apache-tomcat/)页面提供了过滤器及其映射的示例。
你`DataAccess`会看起来像：

```
public class DataAccess{
    private static ThreadLocal<DataAccess> THREAD_LOCAL = new ThreadLocal();
    private String databasepath;

    public DataAcess(final String databasepath) {
      this.databasepath = databasepath;
    }

    public static DataAccess getInstance() {
      return THREAD_LOCAL.get();
    }
    public static void set(final DataAccess dataAccess) {
      THREAD_LOCAL.set(dataAccess);
    }
    public static void remove() {
      THREAD_LOCAL.remove();
    }
} 
```

要**非常**小心，`ThreadLocal`因为它可能是 Java 中内存泄漏的第一大原因。对于具有线程池的 Web 服务器，如果您没有正确清除它们，您可能会遇到更严重的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T13:59:32.837

看起来 ThreadLocal 应该可以帮助您解决用例：

[http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html](http://docs.oracle.com/javase/6/docs/api/java/lang/ThreadLocal.html)

> 此类提供线程局部变量。这些变量不同于它们的正常对应变量，因为每个访问一个（通过它的 get 或 set 方法）的线程都有它自己的、独立初始化的变量副本。

# java - Android：相机预览看起来不太好

> ID：14959298
> 
> 赞同：1
> 
> 时间：2013-02-19T13:57:52.197
> 
> 标签：java, android, camera

我写了一个拍照的相机应用程序（活动），但是显示相机实时图片的预览看起来不太好，有点高，像这样： ![在此处输入图像描述](../Images/f556441ab0cd972d3a561c3fb08098d4.png)

这是我的相机预览的代码：

```
 public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback
    {
        private SurfaceHolder mHolder ;
        private Camera mCamera; 
        public CameraPreview(Context context , Camera camera)
        {
            super(context) ;
            mCamera = camera ;

            mHolder = getHolder();
            mHolder.addCallback(this);
            mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
        }
        public void surfaceCreated(SurfaceHolder holder)
        {
            try
            {
                mCamera.setPreviewDisplay(holder);
                mCamera.startPreview();
            }
            catch(IOException e)
            {
                Log.d(TAG,"Camera Preview Failed!: "+e.getMessage());
            }
        }
        public void surfaceChanged(SurfaceHolder holder , int m , int n , int w)
        {   
        }
        public void surfaceDestroyed(SurfaceHolder holder)
        {           
        }
    }

<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <FrameLayout
        android:id="@+id/camera_preview"
        android:layout_width="wrap_content"
        android:layout_height="0dip"
        android:layout_weight="0.86" />

    <Button
        android:id="@+id/button_capture"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="16dp"
        android:gravity="center"
        android:onClick="capture"
        android:text="Capture" />

    <Button
        android:id="@+id/button_accept"
        android:layout_width="115dp"
        android:layout_height="wrap_content"
        android:text="Accept"
        android:visibility="gone"
        android:onClick = "accept" />

    <Button
        android:id="@+id/button_retake"
        android:layout_width="107dp"
        android:layout_height="wrap_content"
        android:text="Retake" 
        android:visibility="gone"
        android:onClick = "retake"/>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:03:12.057

```
public class IQCameraView extends ViewGroup implements SurfaceHolder.Callback {

public static final int CAMERA_ERROR = 0;
public static final int CAMERA_RESULT = 1;

private final String TAG = "Preview";
private SurfaceView mSurfaceView;
private SurfaceHolder mHolder;
private Size mPreviewSize;
private List<Size> mSupportedPreviewSizes;
private Camera mCamera;

private boolean mCameraActive;

private IQCameraCallback mCallback;

/**
 * @param mCallback
 *            of type IQCameraCallback
 * @return of type null setter function for mCallback
 * @since 10 Oct 2012
 */
public void setmCallback(IQCameraCallback mCallback) {
    this.mCallback = mCallback;
}

/**
 * @param context
 *            of type Context
 * @return of type boolean function which will check the system has a camera
 *         or not
 * @since 10 Oct 2012
 */
public static boolean checkCameraHardware(Context context) {
    if (context.getPackageManager().hasSystemFeature(
            PackageManager.FEATURE_CAMERA)) {
        return true;
    } else {
        return false;
    }
}

/**
 * @param context
 *            Constructor function
 * @since 16 Oct 2012
 */
public IQCameraView(Context context) {
    super(context);

    mSurfaceView = new SurfaceView(context);
    addView(mSurfaceView);
    mHolder = mSurfaceView.getHolder();
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

/**
 * @param camera
 *            of type Camera
 * @return of type null setter function for mCamera
 * @since 16 Oct 2012
 */
public void setCamera(Camera camera) {
    mCamera = camera;
    if (mCamera != null) {
        mSupportedPreviewSizes = mCamera.getParameters()
                .getSupportedPreviewSizes();
        requestLayout();
    }
}

/**
 * @param of
 *            type null
 * @return of type null function which will get the current frame from the
 *         camera
 * @since 16 Oct 2012
 */
public void takePicture() {
    if (null != mCamera && mCameraActive) {
        mCamera.takePicture(null, null, new IQPhotoHandler(getContext(),
                this));
    }
}

/**
 * @param result
 *            of type String
 * @return of type null function which will be called when the image save is
 *         complete
 * @since 16 Oct 2012
 */
public void onImageCapture(final String result) {
    if (null != mCallback) {
        mCallback.onCameraCallback(CAMERA_RESULT, result);
    }
    mCamera.startPreview();
}

/*
 * (non-Javadoc)
 * 
 * @see android.view.View#onMeasure(int, int)
 * 
 * @since 16 Oct 2012
 */
@Override
protected void onMeasure(int widthMeasureSpec, int heightMeasureSpec) {
    // We purposely disregard child measurements because act as a
    // Wrapper to a SurfaceView that centers the camera preview instead of
    // stretching it.
    final int width = resolveSize(getSuggestedMinimumWidth(),
            widthMeasureSpec);
    final int height = resolveSize(getSuggestedMinimumHeight(),
            heightMeasureSpec);
    setMeasuredDimension(width, height);

    if (mSupportedPreviewSizes != null) {
        mPreviewSize = getPreviewSize(mSupportedPreviewSizes, width, height);
    }
}

/*
 * (non-Javadoc)
 * 
 * @see android.view.ViewGroup#onLayout(boolean, int, int, int, int)
 * 
 * @since 16 Oct 2012
 */
@Override
protected void onLayout(boolean changed, int l, int t, int r, int b) {
    if (changed && getChildCount() > 0) {
        final View child = getChildAt(0);

        final int width = r - l;
        final int height = b - t;

        int previewWidth = width;
        int previewHeight = height;

        // Center the child SurfaceView within the parent.
        if (width * previewHeight > height * previewWidth) {
            final int scaledChildWidth = previewWidth * height
                    / previewHeight;
            child.layout((width - scaledChildWidth) / 2, 0,
                    (width + scaledChildWidth) / 2, height);
        } else {
            final int scaledChildHeight = previewHeight * width
                    / previewWidth;
            child.layout(0, (height - scaledChildHeight) / 2, width,
                    (height + scaledChildHeight) / 2);
        }
    }
}

/**
 * @param of
 *            type null
 * @return of type null function which will release teh camera
 * @since 16 Oct 2012
 */
public void releaseCamera() {
    if (null != mCamera && mCameraActive) {
        mCamera.stopPreview();
        mCamera.release();
        mCamera = null;
    }
    mCameraActive = false;
}

/*
 * (non-Javadoc)
 * 
 * @see
 * android.view.SurfaceHolder.Callback#surfaceCreated(android.view.SurfaceHolder
 * )
 * 
 * @since 16 Oct 2012
 */
public void surfaceCreated(SurfaceHolder holder) {
    try {
        if (mCamera != null) {
            mCamera.setPreviewDisplay(holder);
        }
    } catch (IOException e) {
        Log.e(TAG, "IOException caused by setPreviewDisplay()", e);
    }
}

/*
 * (non-Javadoc)
 * 
 * @see android.view.SurfaceHolder.Callback#surfaceDestroyed(android.view.
 * SurfaceHolder)
 * 
 * @since 16 Oct 2012
 */
public void surfaceDestroyed(SurfaceHolder holder) {
    releaseCamera();
}

/*
 * (non-Javadoc)
 * 
 * @see
 * android.view.SurfaceHolder.Callback#surfaceChanged(android.view.SurfaceHolder
 * , int, int, int)
 * 
 * @since 16 Oct 2012
 */
public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {
    Camera.Parameters parameters = mCamera.getParameters();
    parameters.setPreviewSize(mPreviewSize.width, mPreviewSize.height);
    parameters.setPictureSize(mPreviewSize.width, mPreviewSize.height);
    parameters.setPictureFormat(PixelFormat.JPEG);
    mCamera.setDisplayOrientation(90);
    requestLayout();
    try {
        mCamera.setParameters(parameters);
    } catch (Exception e) {
        System.out.print("hih");
    }
    mCamera.startPreview();
    mCameraActive = true;
}

/**
 * @param sizes
 *            of type List
 * @param w
 *            of type int
 * @param h
 *            of type int
 * @return optionalSize of type Size function which will find the exact size
 *         required for teh camera view
 * @since 16 Oct 2012
 */
private Size getPreviewSize(List<Size> sizes, int w, int h) {
    final double ASPECT_TOLERANCE = 0.1;
    double targetRatio = (double) w / h;
    if (sizes == null)
        return null;
    Size optimalSize = null;
    double minDiff = Double.MAX_VALUE;
    int targetHeight = h;
    for (Size size : sizes) {
        double ratio = (double) size.width / size.height;
        if (Math.abs(ratio - targetRatio) > ASPECT_TOLERANCE)
            continue;
        if (Math.abs(size.height - targetHeight) < minDiff) {
            optimalSize = size;
            minDiff = Math.abs(size.height - targetHeight);
        }
    }

    // Cannot find the one match the aspect ratio, ignore the requirement
    if (optimalSize == null) {
        minDiff = Double.MAX_VALUE;
        for (Size size : sizes) {
            if (Math.abs(size.height - targetHeight) < minDiff) {
                optimalSize = size;
                minDiff = Math.abs(size.height - targetHeight);
            }
        }
    }

    return optimalSize;
}

/**
 * @author rajeshcp
 * @since 16 Oct 2012
 */
public static interface IQCameraCallback {
    public void onCameraCallback(final int type, final Object param);
}
} 
```

试试这个代码已经用于一个项目，希望这会有所帮助

# php - 我的 PHP 脚本无法连接到 IRC 服务器

> ID：14959302
> 
> 赞同：1
> 
> 时间：2013-02-19T13:58:03.763
> 
> 标签：php, sockets, irc, fsockopen

我一生都无法弄清楚我做错了什么。我正在`$sock = fsockopen("irc.esper.net", 6667)`尝试连接到服务器。我也尝试过使用端口 5555 并使用服务器名称 opening.esper.net。所有这些都因超时或网络无法访问错误而失败（检查日志）。整个代码在这里：

```
<?php

set_time_limit(0);

$sock = fsockopen("irc.ipv6.esper.net", 6667);

echo("Joined");

if (!$sock) {
    exit(1);
}

fputs($sock, "USER kodas2_ :kodas2_");
fputs($sock, "NICK h1a2r\r\n");
fputs($sock, "JOIN #minecraft\r\n");

while (true) {

}
?> 
```

感谢您的任何回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:52:44.580

```
$sock =@ fsockopen("irc.esper.net", 6667, $errno, $errstr, 30);
if ($sock) {
    printf("No error, go on.");
} 
```

说：`No error, go on.`

```
$sock =@ fsockopen("irc.ipv6.esper.net", 6667, $errno, $errstr, 30);
if (!$sock) {
    printf("errno: %s, errstr: %s", $errno, $errstr);
} 
```

说：`errno: 0, errstr: php_network_getaddresses: getaddrinfo failed: No such host is known.`

因此，首先检查您的主机是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T02:56:41.407

您需要将防火墙设置为允许我期望的 6667 端口。

# c# - Freetext() 如何在索引服务中工作？

> ID：14959303
> 
> 赞同：0
> 
> 时间：2013-02-19T13:58:08.433
> 
> 标签：c#, asp.net, indexing-service

这是我在 ASP.NET(C#) 测试应用程序中使用的查询：

```
SELECT Filename,Size,PATH,Characterization,Rank,Create 
FROM  testCatalog..Scope('Deep traversal of "\\D\myCatalogFolder"') 
WHERE Freetext('test')
ORDERBY Rank DESC 
```

在我更深入地检查结果之前，我认为它工作正常。我认识到有很多结果没有出现一次“测试”！如何修复我的查询以仅获得与我的搜索匹配的结果？

有没有索引服务专家可以提供帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:04:13.433

[自由文本文档](http://msdn.microsoft.com/en-us/library/ms176078.aspx)

`FREETEXT`不寻找特定的字符串；它试图找到字符串的出现或具有同等*含义*的东西。如果您只想搜索特定的单词或短语，请使用`CONTAINS`.

```
WHERE CONTAINS(Column, 'text') 
```

# c# - 在 C# 中地理定位 IP 地址

> ID：14959305
> 
> 赞同：2
> 
> 时间：2013-02-19T13:58:12.793
> 
> 标签：c#, .net, windows-8, ip-geolocation

我正在用 C# 开发一个 Windows 8 应用程序，并且想要获取 IP 地址的地理坐标或想要一个可以准确或几乎定位 Windows 8 应用程序中的 IP 地址的 API！在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-19T14:00:26.160

只需在此处使用网络服务即可免费获得每小时 10000 个请求

[http://freegeoip.net/static/index.html](http://freegeoip.net/static/index.html)

REST 调用[http://freegeoip.net/xml/[你的 ip]](http://freegeoip.net/xml/%5Byour%20ip%5D)

**编辑**

从 url 下载的简单代码

```
using (var objClient = new System.Net.WebClient())
{
    var strFile = objClient.DownloadString("http://freegeoip.net/xml/192.168.0.1");
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-19T14:03:28.547

如果你在任何网络搜索引擎中输入你的问题，这个页面一定会出现：[Windows 8 Geolocation sample in C#, VB.NET, C++, JavaScript for Visual Studio 2012](http://code.msdn.microsoft.com/windowsapps/Geolocation-2483de66)。下载下来看看，肯定有用。

# java - 在“重新提交”之后，如何将新的表单参数从 jsp 传递到 servlet？

> ID：14959306
> 
> 赞同：1
> 
> 时间：2013-02-19T13:58:14.450
> 
> 标签：java, jsp, servlets

为简单起见，我有一个带有小表单的 jsp 文件，其中包含 2 个选择选项、一个文件上传选项和一个提交按钮。servlet 接收值，处理它们（即将文件放入数据库），然后通过请求属性显示消息并重定向回原始 jsp 页面。

我的问题是，当用户尝试从同一个 jsp 页面上传另一个文件时，servlet 正在接收从先前提交中选择的选择值，而不是新的提交尝试。在 servlet 已经重定向回 jsp 之后，同一个用户如何上传另一个具有不同选择选项值的文件？

同样，如何才能清除从第一次提交时打印的成功消息，直到发生另一次成功上传？目前，即使在用户开始选择要提交的新值之后，成功消息也会保留在页面上。

以下是相关代码：

JSP 文件

```
<body >

<h3 style="color:red">${msg4}</h3>

<form id="uploadForm" method="post" action="UploadServlet"enctype="multipart/form-data">
<br />

<% UserBean currentUser = (UserBean)(session.getAttribute"currentSessionUser"));%>

Course Number:
 <select name="courseNo">
   <option value="CS1">CS1</option>
   <option value="CS2">CS2</option>
 </select> 
<br />
Assignment Number:
 <select name="hwNo" id="hwNo" >
   <option value="1">1</option>
   <option value="2">2</option>
   <option value="3">3</option>
 </select> 
<br />
Assignment (must be a zip file): <input type="file" name="dataFile"     id="fileChooser" /><br />

<br /> <input type="submit" value="Upload" />
</form>

<h3 style="color:red">${msg2}</h3>

</body> 
```

相关的 Servlet 代码

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
    {
        HttpSession session = request.getSession(true);
        UserBean currentUser = (UserBean)(session.getAttribute("currentSessionUser"));
        String uName = currentUser.getUsername();

        if (!ServletFileUpload.isMultipartContent(request))
        {return;}

        DiskFileItemFactory factory = new DiskFileItemFactory();
        factory.setSizeThreshold(THRESHOLD_SIZE);
        factory.setRepository(new File(System.getProperty("java.io.tmpdir")));

        ServletFileUpload upload = new ServletFileUpload(factory);
        upload.setFileSizeMax(MAX_FILE_SIZE);
        upload.setSizeMax(REQUEST_SIZE);

        try 
        { 
            List<FileItem> items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);
            for (FileItem item : items) 
            {
                if (item.isFormField()) 
                {
                    String fieldname = item.getFieldName();

                    if(fieldname.equals("courseNo"))
                        courseNo = item.getString();
                    if(fieldname.equals("hwNo"))
                    {
                        hwNo = item.getString();
                        homeworkNo = Integer.parseInt(hwNo);    
                    }   

                Boolean exists = checkIfHWNoExists(homeworkNo, uName);
                if(exists)
                {
                    request.setAttribute("msg4", "You've already made a submission for " +
                                        "assignment number " + homeworkNo +"." +
                                        "<br />If you need to change your submission, " +
                                        "please contact your teacher.");
                    request.getRequestDispatcher("/upload.jsp").forward(request, response);
                    return;
                }

            }

            if (!item.isFormField())
            {
                (item.getName()).getName();
                File storeFile = new File(item.getName());
                String fileName = storeFile.getName();
                if(!fileName.endsWith(".zip"))
                {
                    request.setAttribute("msg", "Must be a zip file!  Try again!");
                    request.getRequestDispatcher("/upload.jsp").forward(request, response);
                    return;
                }

                else
                {
                    String mimeType = new MimetypesFileTypeMap().getContentType(storeFile);
                                                            //for putting file into database
                    putFileIntoDB(uName, homeworkNo, fileName, mimeType, storeFile);

                    request.setAttribute("msg2", "File uploaded successfully!");
                    request.getRequestDispatcher("/upload.jsp").forward(request, response);
                }
            }
        }

            //request.setAttribute("message", "Upload has been done successfully!");

   }
    catch (Exception ex)
    {
        request.setAttribute("message", "There was an error: " + ex.getMessage());
    }

    ("/message.jsp").forward(request, response);

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T14:08:08.863

问题出在 servlet 的循环中。这是完全删除循环的更正 doPost 方法，因为它不是必需的。

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException
{
    String courseNo;
    int homeworkNo;

    HttpSession session = request.getSession(true);
    UserBean currentUser = (UserBean)(session.getAttribute("currentSessionUser"));
    String uName = currentUser.getUsername();

    if (!ServletFileUpload.isMultipartContent(request))
    {return;}

    try 
    { 
        List<FileItem> items = new ServletFileUpload(new DiskFileItemFactory()).parseRequest(request);

        courseNo = items.get(0).getString();
        homeworkNo = Integer.parseInt(items.get(1).getString());    
        if(checkIfHWNoExists(courseNo, homeworkNo, uName))
        {
          request.setAttribute("msg4", "You've already made a submission for Course Number " + courseNo + ", "+
                                    "Assignment number " + homeworkNo +"." +
                                    "<br />If you need to change your submission, " +
                                    "please contact your teacher.");
                request.getRequestDispatcher("/upload.jsp").forward(request, response);
                return;
            }

         else//ok to add new HW, it doesn't exist
         {
          File storeFile = new File(items.get(2).getName());
          String fileName = storeFile.getName();

          if(!fileName.endsWith(".zip"))
          {
              request.setAttribute("msg", "Must be a zip file!  Try again!");
              request.getRequestDispatcher("/upload.jsp").forward(request, response);
          return;
          }

            else
            {  
                String mimeType = new MimetypesFileTypeMap().getContentType(storeFile); //for putting file into database
                      putFileIntoDB(uName, courseNo, homeworkNo, fileName, mimeType, storeFile);

              request.setAttribute("msg2", "File uploaded successfully!");
              request.getRequestDispatcher("/upload.jsp").forward(request, response);
            }
         }

    }//try
    catch (Exception ex)
     {
       request.setAttribute("msg", "There was an error: " + ex.getMessage());
       request.getRequestDispatcher("/upload.jsp").forward(request, response);
      }

} 
```

# r - 创建参数 R 降价文档？

> ID：14959312
> 
> 赞同：11
> 
> 时间：2013-02-19T13:58:30.740
> 
> 标签：r, markdown, knitr, pandoc

我想遍历我的 R markdown 文件中的结果集列表。当我生成输出时，我想在结果集的名称中包含一些文本，如标题。

我发现的一个 hacky 解决方案是直接在文档中硬编码 html 输出，如下所示

```
## All results

```{r loopResults, echo=FALSE, results='asis'}
results = list(result1 = data.frame(x=rnorm(3), y=rnorm(3)), result2=data.frame(x=rnorm(3), y=rnorm(3)))

for(res in names(results)) {
  cat(paste("<h3>Results for: ", res, "</h3>>"))

  plot(results[[res]]$x, results[[res]]$y)
} 
```

这似乎不是正确的做事方式，特别是因为我想通过 pandoc 创建 PDF 文档，并且必须更改硬编码表达式。（我目前有像 h3（文本，类型）这样的便利功能）。

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T21:51:36.630

我会使用`brew`和的组合`knitr`来实现这一点。我会创建一个名为 brew 的模板`doc.brew`，看起来像这样

```
<% for (res in names(results)) { -%>

### Results for: <%= res %>

```{r}
plot(results[["<%= res %>"]]$x, results[["<%= res %>"]]$y)
```

<% } %> 
```

您现在可以运行以下代码来获得所需的输出

```
results = list(
  result1 = data.frame(x=rnorm(3), y=rnorm(3)), 
  result2=data.frame(x=rnorm(3), y=rnorm(3))
)
brew::brew('doc.brew', 'doc.Rmd')
knit2html('doc.Rmd') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-19T14:21:55.783

在[https://gist.github.com/yihui/3145751](https://gist.github.com/yihui/3145751)之后，您可以编写一个包含的子模板并对其进行循环。

foosub.Rmd

```
Results for `r res`
---------------------------

```{r}
 plot(results[[res]]$x, results[[res]]$y)
``` 
```

foo.Rmd

```
```{r loopResults, include=FALSE}
results = list(result1 = data.frame(x=rnorm(3), y=rnorm(3)), result2=data.frame(x=rnorm(3), y=rnorm(3)))
out=NULL

for(i in 1:length(results)) {
res = names(results)[i]
out = c(out, knit_child('foosub.Rmd', sprintf('foosub-%d.txt', i)))
}
```

`r paste(out, collapse = '\n')` 
```

主文件中的代码块本身不会产生任何输出，它只是呈现子文档，每个结果一个，并将其全部存储在`out`其中（这就是它具有的原因`include=FALSE`）。所有格式化的输出都收集在`out`变量中并由最后一行插入。

它有点尴尬，但它确实鼓励模块化，但它似乎并不像能够做到的那么简单：

```
```{r}
for(i in 1:10){
```

Plot `r i`
-----------

```{r}
plot(1:i)
}
``` 
```

你不能。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-19T14:06:47.163

一种可能性是让您的降价文件生成降价而不是 HTML。例如 ：

```
## All results

```{r loopResults, echo=FALSE, results='asis'}
results = list(result1 = data.frame(x=rnorm(3), y=rnorm(3)), result2=data.frame(x=rnorm(3), y=rnorm(3)))

for(res in names(results)) {
  cat(paste("Results for: ", res,"\n"))
  cat("=========================\n")
  plot(results[[res]]$x, results[[res]]$y)
  cat("\n")
}
``` 
```

如果你`knit()`在 R 中应用这个函数，你会得到下面的 Markdown 文件：

```
## All results

Results for:  result1 
=========================
![plot of chunk loopResults](figure/loopResults1.png) 
Results for:  result2 
=========================
![plot of chunk loopResults](figure/loopResults2.png) 
```

你应该能够`pandoc`从这个文件中生成 HTML 或 LaTeX 吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-09T10:49:08.313

[pander](http://rapporter.github.com/pander/#brew-to-pandoc)的替代解决方案：

```
<% for (res in names(results)) { %>
### Results for: <%= res %>

<%=
plot(results[[res]]$x, results[[res]]$y)
%>
<% } %> 
```

只需`Pandoc.brew`一次运行即可完成您的工作：

```
> Pandoc.brew('doc.brew')

### Results for: result1

![](/tmp/Rtmp4yQYfD/plots/568e18992923.png)

### Results for: result2

![](/tmp/Rtmp4yQYfD/plots/568e6008ed8f.png) 
```

或者生成 HTML/docx/等。在一次运行：

```
> Pandoc.brew('doc.brew', output = tempfile(), convert = 'html')
> Pandoc.brew('doc.brew', output = tempfile(), convert = 'docx') 
```

# xml - xml_grep 从元素中获取属性

> ID：14959315
> 
> 赞同：5
> 
> 时间：2013-02-19T13:58:43.327
> 
> 标签：xml, linux, command-line, grep, xmllint

xml_grep 是否可以（如果可以，如何）从特定元素中获取特定属性的值？我似乎只能输出标签之间的信息。

例子：

```
 <eid>
       <identity nationalnumber="13021912354" dateofbirth="20130219" gender="male">
          <name>Menten</name>
          <firstname>Kasper</firstname>
          <middlenames>Marie J</middlenames>
          <nationality>Belg</nationality>
          <placeofbirth>Sint-Truiden</placeofbirth>
          <photo>base64-string</photo>
       </identity>
    </eid> 
```

从“identity”元素输出“nationalnumber”属性的值（在本例中为：13021912354）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-19T14:06:56.617

与`xmllint`：

```
xmllint --xpath 'string(//identity/@nationalnumber)' file.xml 
```

对于 debian 发行版（或衍生产品）`xmllint`是[`libxml2-utils`](https://packagecontrol.io/packages/SublimeLinter-xmllint)软件包的一部分，可以这样安装：

`apt-get install libxml2-utils`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T15:37:01.620

我在 RHEL6.3 上安装的 xmllint 版本似乎没有这个神奇的 --xpath 选项。哪个版本的 xmllint 支持此选项？

# file - 来自 ByteArray/Stream 的 TagLib-sharp 文件

> ID：14959320
> 
> 赞同：4
> 
> 时间：2013-02-19T13:58:58.073
> 
> 标签：file, bytearray, taglib

是否可以使用 TagLib# 编辑代表 Mp3 文件的 ByteArray 的标签？

目前我需要这样做：

```
System.IO.File.WriteAllBytes(path + file + ".mp3", byt);
TagLib.File f = TagLib.File.Create(path + song + ".mp3"); 
```

是否可以避免这种情况并直接从 ByteArray 创建 TagLib.File？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-06-24T17:18:02.690

尝试这个：

```
var file = TagLib.File.Create(new FileBytesAbstraction(<file name>, <file bytes>)); 
```

FileBytesAbstraction 在哪里：

```
public class FileBytesAbstraction : TagLib.File.IFileAbstraction
{
    public FileBytesAbstraction(string name, byte[] bytes)
    {
        Name = name;

        var stream = new MemoryStream(bytes);
        ReadStream = stream;
        WriteStream = stream;
    }

    public void CloseStream(Stream stream)
    {
        stream.Dispose();
    }

    public string Name { get; private set; }

    public Stream ReadStream { get; private set; }

    public Stream WriteStream { get; private set; }
} 
```

# java - 从字符串中提取浮点值

> ID：14959323
> 
> 赞同：2
> 
> 时间：2013-02-19T13:59:11.677
> 
> 标签：java, arrays

我有一长串`"abc_12.23;dcf_23.99;dfa_12.99;`之类的。

现在我需要创建一个来将浮点数和字符串值分别分成浮点数和字符串数组。

我尝试将它们拆分为“;” 并将其放入一个数组中，然后对“_”进行拆分并将它们提取到一个数组中。但它不起作用。谁可以帮我这个事？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:12:14.433

可以说，使用 StringTokenizer 可能更有效率

```
 StringTokenizer st = new StringTokenizer("abc_12.23;dcf_23.99;dfa_12.99", "_;");
    int n = st.countTokens();
    String[] sa = new String[n / 2];
    float[] fa = new float[n / 2];
    for(int i = 0 ; st.hasMoreTokens(); i++) {
        sa[i] = st.nextToken();
        fa[i] = Float.parseFloat(st.nextToken());
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:07:23.833

你的解决方案很好。

Followig 方法稍微提高了性能：

*   将所有字符迭代成字符串。
*   当你找到“_”或“;” 从最后一个相同的字符复制子字符串（如果当前；解析为浮点数，则它_比解析为字符串）并推入适当的数组。

不确定您是否会大大提高性能。

**注意：**我不是java专业人士，但如果java允许被几个字符溢出，只需用“;”分隔 和“_” 并为浮点数使用奇数索引，而对字符串使用奇数索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:14:05.193

这是一个正则表达式解决方案：

```
 String input = "abc_12.23;dcf_23.99;dfa_12.99; and so on";
    String regex = "([a-zA-Z]+)_(\\d+(\\.\\d+)?);?";
    List<String> strings = new ArrayList<>();
    List<Double> floats = new ArrayList<>();
    Pattern pattern = Pattern.compile(regex);
    Matcher matcher = pattern.matcher(input);
    while (matcher.find()) {
        strings.add(matcher.group(1));
        floats.add(Double.valueOf(matcher.group(2)));
    }
    System.out.println(strings); // prints [abc, dcf, dfa]
    System.out.println(floats); // prints [12.23, 23.99, 12.99] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T14:15:20.403

试试这个正则表达式：

```
(\w.)_(\d.\.\d.); 
```

在这里测试[一个正则表达式测试小程序](http://www.cis.upenn.edu/~matuszek/General/RegexTester/regex-tester.html)

用于`matcher.find()`逐步完成比赛。

第 3 组（索引 2）将具有浮点值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T14:17:27.043

您可能会使用**Scanner**。它看起来像这样：

```
scanner = Scanner("abc_12.23;dcf_23.99;dfa_12.99;");
scanner.useDelimiter("[;_]");
while(scanner.hasNext()){
  String s = scanner.next();
  float f = scanner.nextFloat();
} 
```

# c# - System.Diagnostics.PerformanceCounter 测量每个模块的 CPU 利用率

> ID：14959334
> 
> 赞同：0
> 
> 时间：2013-02-19T13:59:50.670
> 
> 标签：c#, .net, performance, module, system.diagnostics

是否可以跟踪进程中每个模块的 CPU 利用率？在下面的代码中，可以确定 myProcess.Modules 中每个模块的 CPU 和内存消耗吗？

```
Process[] currentProcesses = Process.GetProcesses();
Process myProcess = currentProcesses[0];

using (PerformanceCounter pcProcess = new PerformanceCounter(
    "Process", 
    "% Processor    Time", 
    targetProcess.ProcessName))
using (PerformanceCounter memProcess = new PerformanceCounter(
    "Process",   
    "Working Set - Private",
    targetProcess.ProcessName))
{
    pcProcess.NextValue();
} 
```

# java - 用Java程序创建Oracle方案

> ID：14959335
> 
> 赞同：0
> 
> 时间：2013-02-19T13:59:51.490
> 
> 标签：java, sql, oracle, oracle11g

我使用 Toad 数据库建模器创建了 Oracle 方案。我通常使用 SQL developer 来导入带有 SQL 语句的新方案。现在我想创建自动化这个过程的 Java 程序。到目前为止，我创建了这个 Java 代码，它打开了与 Oracle 的连接：

```
import java.sql.Connection;
import java.sql.PreparedStatement;
import java.sql.ResultSet;
import java.sql.SQLException;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;
import javax.sql.DataSource;
import oracle.jdbc.pool.OracleConnectionPoolDataSource;
import org.junit.BeforeClass;
import org.junit.Test;

public class OracleCreateScheme
{

    public OracleCreateScheme()
    {
    }

    @BeforeClass
    public static void setUpClass() throws Exception
    {
        // rcarver - setup the jndi context and the datasource
        try
        {
            // Create initial context
            System.setProperty(Context.INITIAL_CONTEXT_FACTORY,
                    "org.apache.naming.java.javaURLContextFactory");
            System.setProperty(Context.URL_PKG_PREFIXES,
                    "org.apache.naming");
            InitialContext ic = new InitialContext();

            ic.createSubcontext("java:");
            ic.createSubcontext("java:/comp");
            ic.createSubcontext("java:/comp/env");
            ic.createSubcontext("java:/comp/env/jdbc");

            // Construct DataSource
            OracleConnectionPoolDataSource ds = new OracleConnectionPoolDataSource();
            ds.setURL("jdbc:oracle:thin:@host:port:db");
            ds.setUser("admin");
            ds.setPassword("qwerty");

            ic.bind("java:/comp/env/jdbc/oracle", ds);
        }
        catch (NamingException ex)
        {
            //Logger.getLogger(MyDAOTest.class.getName()).log(Level.SEVERE, null, ex);
        }

    }

    @Test
    public void createOracleScheme() throws SQLException, NamingException
    {

        Context initContext = new InitialContext();
        Context webContext = (Context) initContext.lookup("java:/comp/env");

        DataSource ds = (DataSource) webContext.lookup("jdbc/Oracle");

        String SqlStatement = null;

        if (ds == null)
        {
            throw new SQLException();
        }

        Connection conn = ds.getConnection();
        if (conn == null)
        {
            throw new SQLException();
        }

        PreparedStatement ps = null;
        ResultSet resultSet = null;

        try
        {
            conn.setAutoCommit(false);
            boolean committed = false;
            try
            {

                ps = conn.prepareStatement(SqlStatement);
                resultSet = ps.executeQuery();

                conn.commit();
                committed = true;
            }
            finally
            {
                if (!committed)
                {
                    conn.rollback();
                }
            }
        }
        finally
        {
            ps.close();
            conn.close();
        }

    }
} 
```

你能告诉我必须如何修改代码才能将 SQL 文件执行到 Oracle 中吗？还有任何现成的Java程序可以用于相同的目的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:16:50.120

我建议使用现有的东西而不是编写自己的实现。有许多强大的工具可以完成这项任务：

Maven SQL 插件 [mojo.codehaus.org/sql-maven-plugin/examples/execute.html]

DBUnit 文件加载器 [www.dbunit.org/howto.html#fileloader]

或Spring（如果你被迫使用它:-)）[static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/jdbc.html]

检查这篇文章：[stackoverflow.com/questions/7565420/create-and-clean-db-setup-only-once-for-testing-all-daos]

希望这可以帮助 ...

# html - 将ul列表与跨度对齐？

> ID：14959340
> 
> 赞同：0
> 
> 时间：2013-02-19T14:00:02.737
> 
> 标签：html, wordpress, css

我试图在我的设计中将跨度与 ul 对齐：设计： [http ://screencast.com/t/ErEgjMtT](http://screencast.com/t/ErEgjMtT)

这是我的网站，请看一下butom。 [http://themebia.com/wp_themebia/](http://themebia.com/wp_themebia/)

不确定，将版权文本与设计中显示的页脚菜单对齐有什么问题？任何提示将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:19:49.450

请参阅以下 css 规则以获取解决方案：

```
<div class="col-left">
<span style="padding: 12px 0px; float: left;">&copy; 2013 Themebia.  </span>
<ul>....</ul> /* footer links */
</div> 
```

![在此处输入图像描述](../Images/f80e6d92648fda12762ba4881761dcc8.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:02:22.310

确保两个标签都在`display: block;`并且具有相同的高度（高度，填充，边距）
**当前**：您的跨度`display: inline;`
**应该是**：`display: block; height: 1em; padding: 1em 0;`

# c++ - 显示“本地连接”属性对话框

> ID：14959345
> 
> 赞同：0
> 
> 时间：2013-02-19T14:00:22.803
> 
> 标签：c++, windows, networking, network-programming

如何从程序中显示“本地连接”属性对话框？

# c - FIR 滤波器实现中的窗口大小

> ID：14959350
> 
> 赞同：-1
> 
> 时间：2013-02-19T14:00:31.337
> 
> 标签：c, signal-processing, sampling, trigonometry

我应该根据以下规范测试 FIR 功能。我实现了一个“块 FIR-它接受特定大小（块）的输入并对其进行操作。一切都完成后，下一个输入块被获取和处理”。

我被告知使用以下规范测试我的功能。

**窗口大小：**可以是 1、256、512、1024、2048 抽头**：**抽头长度可以是64、128、256、512、1024、2048、4096、

我可以调整我的功能中的点击次数，以便可以管理点击次数。FIR 滤波器中的窗口大小是多少。

我认为窗口大小是关于采样“sin(2*PI*W*T)* (1/Window Size)”的规范，它给出了输入函数的样本。如果上述说法正确，则输入样本总数=“Window Size”。

任何专家请澄清什么是**窗口大小**以及它与“ **Block Fir”实施**的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:16:18.550

窗口大小取决于您将使用的窗口类型，例如 Kaiser 窗口等。您必须根据 DSP 原则为特定窗口大小使用特定函数。我希望您按照我提供的链接获取更多信息，如果您有任何问题，请告诉我。 [http://www.mathworks.de/de/help/signal/ug/fir-filter-design.html#f4-1323](http://www.mathworks.de/de/help/signal/ug/fir-filter-design.html#f4-1323)

# jsf - 使用 FullAjaxExceptionHandler 重定向到顶层页面

> ID：14959353
> 
> 赞同：1
> 
> 时间：2013-02-19T14:00:39.340
> 
> 标签：jsf, omnifaces

对于我的 JSF 页面的异常处理，我正在使用 FullAjaxExceptionHandler（感谢 BalusC ;-)）。错误处理有效，但由于某些原因，我无法重定向到顶层。即，异常发生在 iFrame 中（是的，我知道我不应该使用它......）并且错误页面显示在此框架中。如何重定向到顶级页面？使用 ?faces-redirect=true 没有任何反应。

TIA,

拉尔夫。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-02T23:31:49.647

JSF 异常处理程序实际上并不发送重定向，而只是显示错误页面而不是请求的页面，因此这是行不通的。

相反，您可以在错误页面上放置一些 JavaScript（参见，例如，[此处](https://stackoverflow.com/questions/580669/redirect-parent-window-from-an-iframe-action-using-javascript)），将顶部窗口重定向到包含您的真实错误页面的其他 URL。

# javascript - Highstock 平移异步加载数据

> ID：14959355
> 
> 赞同：2
> 
> 时间：2013-02-19T14:00:50.430
> 
> 标签：javascript, charts, highcharts, highstock

使用 Highstock 是否可以拖动图表并异步加载数据？

我在 highcharts 网站[http://jsfiddle.net/hcharge/5zPLV/上看到了异步演示](http://jsfiddle.net/hcharge/5zPLV/)

然而，这使用导航器/滚动条沿系列移动图表并在您停止滑动时加载数据，理想情况下，我想使用 highstock 的平移功能而不是导航器来移动，因为它占用了太多空间。

如果我关闭导航器和滚动条并禁用 zoomtype: x 则玩演示，然后一旦您开始拖动图表，它就会尝试获取数据，从而使图表无法使用。这是那个[http://jsfiddle.net/hcharge/6YSvk/的小提琴](http://jsfiddle.net/hcharge/6YSvk/)

```
navigator: {enabled: false}, scrollbar: {enabled: false} 
```

理想情况下，我们需要知道用户何时开始拖动以及何时停止然后加载数据。

这甚至可能吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T15:40:58.487

我认为这是可能的，但这并不容易。

正如您所写，您应该从检测拖放开始。使用内置选项是不可能的，但我们可以添加自己的事件监听器。看看这段代码：

```
new Highcharts.StockChart({
    // here comes your chart options, but we can pass callback function as the second parameter
}, function (chart) {
    var report = document.getElementById('report'), // just an element to display current extremes
        xAxis = chart.xAxis[0],
        startX;

    function drag(e) {
        e = chart.tracker.normalizeMouseEvent(e);
        startX = e.chartX;
    }

    function drop(e) {
        e = chart.tracker.normalizeMouseEvent(e);

        var delta = e.chartX - startX,
            extremes = xAxis.getExtremes(),
            newMin = Math.round(extremes.min - delta),
            newMax = Math.round(extremes.max - delta);

        // display extremes retrieved by panning
        report.innerHTML = "<b>From:</b> " + new Date(newMin) + " <b>to:</b> " + new Date(newMax);
    }

    // bind events
    Highcharts.addEvent(chart.container, 'mousedown', drag);
    Highcharts.addEvent(chart.container, 'mouseup', drop);
}); 
```

只需检测 mouseDown 和 mouseUp 事件，然后计算差异，将差异转换为 x 数据，最后从极值中减去差异。

在这里您可以找到上面发布的代码的 jsfiddle 演示：http: [//jsfiddle.net/dSEAA/1/](http://jsfiddle.net/dSEAA/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-06-08T06:52:27.707

要使@slawekkolodziej 的示例工作，您需要将 delta 转换为 xAxis 上的 ms，然后像这样更新 xAxis 极值：

```
window.chart = new Highcharts.StockChart({
    // chart options go here
}, function(chart) {
    var xAxis = chart.xAxis[0],
        startX;

    function drag(e) {
      e = chart.pointer.normalize(e);
      startX = e.chartX;
    }

    function drop(e) {
      e = chart.pointer.normalize(e);

      var delta = e.chartX - startX,
        extremes = xAxis.getExtremes(),
        deltaMs = (extremes.max - extremes.min) / chart.plotWidth * delta,
        newMin = Math.round(extremes.min - deltaMs),
        newMax = Math.round(extremes.max - deltaMs);

      xAxis.setExtremes(newMin, newMax)
    }

    Highcharts.addEvent(chart.container, 'mousedown', drag);
    Highcharts.addEvent(chart.container, 'mouseup', drop);
  });
}); 
```

这是一个异步数据加载的工作示例：http: [//jsfiddle.net/xw7goLj4/5/](http://jsfiddle.net/xw7goLj4/5/)

# maven - 运行 Maven 版本时的不同行为：使用最新版本目标

> ID：14959359
> 
> 赞同：0
> 
> 时间：2013-02-19T14:01:19.620
> 
> 标签：maven, versions-maven-plugin

我正在运行的命令是：

```
mvn -U -e versions:use-latest-versions -Dincludes=com.test.engines:engines -DgenerateBackupPoms=false -DallowMajorUpdates=false -DallowMinorUpdates=false -DallowSnapshots=false 
```

我的 pom 中有一个版本，例如 1.2.3-5-SNAPSHOT，我想将它更新到最新发布的版本。例如，这可能是 1.2.3-7，或者 1.2.3-5-SNAPSHOT 可能尚未发布，这意味着最新版本是 1.2.3-4。

在我的本地 Windows 机器上运行 maven 命令时，版本插件正在按我的需要运行，但是当在远程 Linux 机器上运行它时（我真的需要它）它没有。

我的本地盒子显示：

在我的本地 Windows 机器上运行 maven 命令时，版本插件正在按我的需要运行，但是当在远程 Linux 机器上运行它时（我真的需要它）它没有。

```
[INFO] [versions:use-latest-versions {execution: default-cli}]
[INFO] Incremental version changes allowed
[INFO] Incremental version changes allowed
[INFO] artifact com.test.engines:engines: checking for updates from central
Props: {project.version=12.4.0-10-SNAPSHOT, project.parent.version=1.0.0, project.parent.groupId=com.test.pom, project.artifactId=edge-web, project.groupId=com.test.edge-web, project.parent.artifactId=pom}
[INFO] Updated com.test.engines:engines:jar:12.4.0-41-SNAPSHOT to version 12.4.0-40
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------ 
```

而远程框显示：

```
[INFO] --- versions-maven-plugin:2.0:use-latest-versions (default-cli) @ edge-web ---
[INFO] Incremental version changes allowed
[INFO] Incremental version changes allowed
[INFO] artifact com.test.engines:engines: checking for updates from nexus
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESSFUL
[INFO] ------------------------------------------------------------------------ 
```

运行时：

```
mvn -Dplugin=versions help:describe 
```

两个框的输出显示相同的版本号：

```
Name: Versions Maven Plugin
Description: Versions Plugin for Maven 2\. The Versions Plugin updates the
  versions of components in the POM.
Group Id: org.codehaus.mojo
Artifact Id: versions-maven-plugin
Version: 2.0
Goal Prefix: versions 
```

有谁知道我如何获得与我在本地机器上相同的行为？或者对我如何进一步调查有任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:56:20.500

我正在使用不同版本的 Maven。即使插件版本相同，我想在maven核心中解析更高版本的方法也必须不同。

作为参考，可以使用以下方法检查 Mavan 版本：

```
mvn --version 
```

我还必须执行类似于[此处](http://www.inspire-software.com/en/index/view/running-maven2-and-maven3-on-the-same-machine.html)描述的操作，以允许我从单个脚本运行 Maven 2 和 3。

# c# - 数学、积木和条目

> ID：14959361
> 
> 赞同：0
> 
> 时间：2013-02-19T14:01:23.710
> 
> 标签：c#, math, block

我有一定数量的块，总是 236 字节。然后我有一些条目需要放入块中，这些条目有时不能完美地放入块中，因此该块将留下一些空字节。

我正在尝试确定写入条目的位置以及应该在哪个块中。

```
 int blocklen = 236;//always the same

        int entryindex = 14;//example index of an entry to write
        int entrylength = 16;//this will be the same in all entries in these blocks.
        int blockindex = ((entryindex + 1) * entrylength) / blocklen;//this works and will correctly calculate the index of the block to write to.
        int offset = ((entryindex) * entrylength) % blocklen;// this is incorrect, I need it to work out the offset with in the block. 
```

如果我的 entryindex 为 13，它将在第 0 块中计算为 @ 208，这是正确的。但是如果它是 14 它不适合第一个块所以它应该是块 1 @ 0 而是它在偏移量 224 处表示块 1，而 224 是第一个块中的偏移量，但我需要将它带到下一个块中堵塞。

无论如何，我的数学不太好，这不是我的日子，所以我只是想知道你们中的任何人是否可以帮助我处理那行代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:08:52.790

你的 blocklen 不是 16 的偶数倍！

14 * 16 = 224

所以偏移量将是：

```
int entries_per_block = 14;

int offset = (entryindex * entrylength) % (entrylength * entries_per_block); 
```

和 blockindex 应该是：

```
int blockindex = (entryindex * entrylength) / (entrylength * entries_per_block); 
```

# php - 使用 PHP 使用 curl 指定源端口范围

> ID：14959365
> 
> 赞同：2
> 
> 时间：2013-02-19T14:01:41.927
> 
> 标签：php, curl

我需要为 curl 指定源端口范围。我没有看到任何让我在 TCP 中选择源端口范围的选项。

可能吗 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:41:07.403

我认为使用`fsockopen`. 当被防火墙阻止时，我多次提出这对我有用。见： http: [//php.net/fsockopen](http://php.net/fsockopen)

```
$ports = array(80, 81);
foreach ($ports as $port) {
    $fp =@ fsockopen("tcp://127.0.0.1", $port);
    // or fsockopen("www.google.com", $port);
    if ($fp) {
        print "Port $port is open.\n";
        fclose($fp);
    } else {
        print "Port $port is not open.\n";
    }
} 
```

顺便说一句，有`CURLOPT_PORT`CURL，但不适用于`tcp://127.0.0.1`;

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, "http://127.0.0.1");
curl_setopt($ch, CURLOPT_PORT, 80);
curl_setopt($ch, CURLOPT_HEADER, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true); 
$re = curl_exec($ch);
// echo curl_errno($ch);
curl_close($ch);
print $re; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2021-01-21T13:22:45.337

可以使用`CURLOPT_LOCALPORT`和`CURLOPT_LOCALPORTRANGE`选项，类似于curl的`--local-port`命令行选项。

在以下示例中，curl 将尝试使用 6000-7000 范围内的源端口：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_LOCALPORT, 6000);
curl_setopt($ch, CURLOPT_LOCALPORTRANGE, 1000);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
$result = curl_exec($ch);
curl_close($ch);
echo $result; 
```

从命令行可以使用：

```
curl --local-port 6000-7000 <url> 
```

有关文档，请参阅：[CURLOPT_LOCALPORT](https://curl.se/libcurl/c/CURLOPT_LOCALPORT.html)和[本地端口号](https://everything.curl.dev/usingcurl/connections#local-port-number)。

# javascript - 如何使用具有透明背景的画布获取 CSS 样式元素的 png 图像？

> ID：14959367
> 
> 赞同：7
> 
> 时间：2013-02-19T14:01:48.667
> 
> 标签：javascript, html, canvas

我想使用 CSS 为网页上的元素设置样式，然后将该元素用作静态 png。是否可以在例如上绘制 html 节点。画布并将此类具有透明度的图像保存到文件中？

我想找到一种方法来使用 CSS 来获取现有的 HTML，并将其呈现为 PNG 文件以保持透明度。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T18:40:45.417

将 HTML 元素保存到图像需要一个复杂的答案！

首先，出于非常好的安全原因，浏览器不允许 HTML 元素的同页图像。例如，想象一个恶意脚本，它获取包含您的银行用户名+密码的 HTML 输入表单并将其转换为图像并将图像发送给小偷——不好！

因此，IE简单地屏蔽了同一页面的HTML元素成像——句号。

Chrome 和 Firefox*可能*仍然有一个功能（错误？！）允许您将 HTML 元素转换为如下图像： 1\. 使用“foreignObject”将 HTML 元素嵌入到 SVG 元素中。2\. 将 SVG 元素绘制成 Canvas 元素。3\. 使用canvas.toDataURL('image/png') 获取表示png图像的编码字符串。

由于看起来您可以控制 HTML 的样式，因此您可以使用像 PhantomJs.org (phantomjs.org) 这样的“无头”HTML 生成器来获得完整的解决方案。您可以使用 Phantomjs 生成 HTML 元素并为其设置样式。然后 PhantomJs 有一个光栅化器，您可以使用该光栅化器将该元素转换为图像。另外，如果您可以提供一个**只**包含您需要的样式化 HTML 的网页，那么这 1 行 PhantomJs 代码将为您提供该页面的 png：

```
phantomjs rasterize.js http://myHtmlOnMyPage.html myHtmlImage.png 
```

Chrome/Firefox 代码可在此处找到：[https ://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_DOM_objects_into_a_canvas](https://developer.mozilla.org/en-US/docs/HTML/Canvas/Drawing_DOM_objects_into_a_canvas)

看起来像这样：

```
<!DOCTYPE html>
<html>
<body>
<p><canvas id="canvas" style="border:2px solid black;" width="200" height="200"></canvas>
<script>
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var data = "<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200'>" +
             "<foreignObject width='100%' height='100%'>" +
               "<div xmlns='http://www.w3.org/1999/xhtml' style='font-size:40px'>" +
                 "<em>I</em> like <span style='color:white; text-shadow:0 0 2px blue;'>cheese</span>" +
               "</div>" +
             "</foreignObject>" +
           "</svg>";
var DOMURL = self.URL || self.webkitURL || self;
var img = new Image();
var svg = new Blob([data], {type: "image/svg+xml;charset=utf-8"});
var url = DOMURL.createObjectURL(svg);
img.onload = function() {
    ctx.drawImage(img, 0, 0);
    DOMURL.revokeObjectURL(url);
};
img.src = url;
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-05-24T16:00:02.157

刚刚通过 Safari 找到了一个简单的方法。

右键单击元素，检查元素，然后在检查器中右键单击要导出的元素节点并选择捕获屏幕截图。这对我来说解决了透明度问题。Safari 版本 13.1 (14609.1.20.111.8)

[![在此处输入图像描述](../Images/b60a34b27808d9019524e0c3c56183f4.png)](https://i.stack.imgur.com/hfRFi.jpg)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:17:34.510

是的，可以将 HTML 元素保存为图像（PNG 文件）。看

*   [将 HTML Canvas 捕获为 gif/jpg/png/pdf？](https://stackoverflow.com/questions/923885/capture-html-canvas-as-gif-jpg-png-pdf)
*   [如何将画布保存为png图像？](https://stackoverflow.com/questions/11112321/how-to-save-canvas-as-png-image)
*   [HTML5 将画布保存为 PNG](https://stackoverflow.com/questions/11760972/html5-save-canvas-to-png)
*   [将 PNG 绘制到画布元素 - 不显示透明度](https://stackoverflow.com/questions/8977369/drawing-png-to-a-canvas-element-not-showing-transparency)
*   [http://asserttrue.blogspot.de/2011/12/in-yesterdays-post-i-showed-how-to.html](http://asserttrue.blogspot.de/2011/12/in-yesterdays-post-i-showed-how-to.html)

# php - 用php发布数据

> ID：14959368
> 
> 赞同：-5
> 
> 时间：2013-02-19T14:01:48.617
> 
> 标签：php, http, post, webpage

我想知道如何使用 php 发布数据，例如从本地 php 获取输入，然后在另一个网页上使用 id 写入输入。我认为那些被称为 PHP 机器人，但我不太了解该功能。如果你能告诉我代码，如果可能的话。

**更新：**为了使它更干净 - 如何使用 PHP “写入”到另一个页面上的输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:08:59.837

要将数据发布到 URL，您可以使用 CURL。

```
$my_url = 'http://www.google.com';
$post_vars = 'postvar1=' . $postvar1 . '&postvar2=' . $postvar2;

$curl = curl_init($my_url);
curl_setopt($curl, CURLOPT_POST, 1);
curl_setopt($curl, CURLOPT_POSTFIELDS, $post_vars);
curl_setopt($curl, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($curl, CURLOPT_HEADER, 0);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, 1);

$response = curl_exec($curl); 
```

**更新**

如果你不想使用 CURL，你可以这样尝试：

```
$server= 'www.someserver.com';
$url = '/path/to/file.php';
$content = 'name1=value1&name2=value2';
$content_length = strlen($content);
$headers= "POST $url HTTP/1.0\r\nContent-type: text/html\r\nHost: $server\r\nContent-length: $content_length\r\n\r\n";
$fp = fsockopen($server, $port, $errno, $errstr);
if (!$fp) return false;
fputs($fp, $headers);
fputs($fp, $content);
$ret = "";
while (!feof($fp)) {
$ret.= fgets($fp, 1024);
}
fclose($fp);
print $ret; 
```

如果您使用的是 PHP5，则可以使用以下函数将数据发布到 URL：

```
function do_post_request($url, $data, $optional_headers = null)
{
  $params = array('http' => array(
              'method' => 'POST',
              'content' => $data
            ));
  if ($optional_headers !== null) {
    $params['http']['header'] = $optional_headers;
  }
  $ctx = stream_context_create($params);
  $fp = @fopen($url, 'rb', false, $ctx);
  if (!$fp) {
    throw new Exception("Problem with $url, $php_errormsg");
  }
  $response = @stream_get_contents($fp);
  if ($response === false) {
    throw new Exception("Problem reading data from $url, $php_errormsg");
  }
  return $response;
} 
```

这个功能来自[这里](http://wezfurlong.org/blog/2006/nov/http-post-from-php-without-curl/)

并使用此功能执行类似的操作

```
<?php

do_post_request('http://search.yahoo.com/', 'p=hello+yahoo')

?> 
```

这将搜索“你好雅虎”

# c# - 关闭程序 Form1 时如何避免显示另一个表单？

> ID：14959369
> 
> 赞同：0
> 
> 时间：2013-02-19T14:01:52.100
> 
> 标签：c#

在闭幕式中，我有这个：

```
private void Form1_FormClosing(object sender, FormClosingEventArgs e)
        {
            FormIsClosing = true;
            KeysValuesUpdate();
        } 
```

FormIsClosing 是一个标志。

然后这是 KeysValuesUpdate 函数：

```
public void KeysValuesUpdate()
        {
            using (var w = new StreamWriter(keywords_path_file))
            {
                if (FormIsClosing == true)
                crawlLocaly1 = new CrawlLocaly(this);
                crawlLocaly1.StartPosition = FormStartPosition.CenterParent;
                if (FormIsClosing == true)
                DialogResult dr = crawlLocaly1.ShowDialog(this);
                if (dr == DialogResult.OK)
                {
                    if (LocalyKeyWords.ContainsKey(mainUrl))
                    {
                        LocalyKeyWords[mainUrl].Clear();
                        LocalyKeyWords[mainUrl].Add(crawlLocaly1.getText());
                    }
                    else
                    {
                        LocalyKeyWords[mainUrl] = new List<string>();
                        LocalyKeyWords[mainUrl].Add(crawlLocaly1.getText());
                    }
                    Write(w);
                    ClearListBox();
                }
                if (dr == DialogResult.Cancel)
                {
                    Write(w);
                }
            }
        } 
```

问题是如果我只是在做 if (FormIsClosing == true) 下一行我不想生效我得到错误：

错误 1 ​​嵌入式语句不能是声明或带标签的语句，并且它后面的行 : dr 是无符号的。

如果我在做：

```
if (FormIsClosing == true)
{
                    DialogResult dr = crawlLocaly1.ShowDialog(this);
} 
```

然后 dr 在这一行上取消签名： if (dr == DialogResult.OK)

我要存档的是，如果我关闭我的应用程序，则不要先显示此对话框。显示对话框的行是：DialogResult dr = crawlLocaly1.ShowDialog(this);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:06:19.913

您的情况仅指下一行，因为您没有在括号中添加任何内容。

我猜这应该可行：

```
 using (var w = new StreamWriter(keywords_path_file))
        {
            if (FormIsClosing == true)
            {
            crawlLocaly1 = new CrawlLocaly(this);
            crawlLocaly1.StartPosition = FormStartPosition.CenterParent;
            DialogResult dr = crawlLocaly1.ShowDialog(this);
            if (dr == DialogResult.OK)
            {
                if (LocalyKeyWords.ContainsKey(mainUrl))
                {
                    LocalyKeyWords[mainUrl].Clear();
                    LocalyKeyWords[mainUrl].Add(crawlLocaly1.getText());
                }
                else
                {
                    LocalyKeyWords[mainUrl] = new List<string>();
                    LocalyKeyWords[mainUrl].Add(crawlLocaly1.getText());
                }
                Write(w);
                ClearListBox();
            }
            if (dr == DialogResult.Cancel)
            {
                Write(w);
            }
            }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:07:27.827

**OP评论的更新**

以下是程序未关闭时显示表单的方法：

```
 DialogResult dr = DialogResult.None;//Increase accessibility domain, setup a good default value
            if (FormIsClosing != true)
            {
              dr = crawlLocaly1.ShowDialog(this);
            } 
```

# iphone - 将 $ 等特殊字符转换为十六进制

> ID：14959377
> 
> 赞同：0
> 
> 时间：2013-02-19T14:02:21.857
> 
> 标签：iphone, ios, nsstring, nsstringencoding

我正在开发一个 iOS 应用程序。在这个应用程序中，我试图转换`NSString`为十六进制。但在某些情况下`NSString`包含特殊`$, ¥,`等。这是我面临问题的地方。这些字符不会转换为十六进制。

有没有办法将特殊字符转换为十六进制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:04:07.423

将字符串转换为 NSData

```
[NSString dataUsingEncoding:] 
```

然后使用数据对象，您可以输出任何您想要的基数：八进制、十六进制、十进制、二进制。

# c# - 尝试从 DLL 文件加载函数时发生 System.NullReferenceException - C#

> ID：14959386
> 
> 赞同：1
> 
> 时间：2013-02-19T14:02:40.347
> 
> 标签：c#, dll, add-on, system.reflection

我正在为我正在使用 C# 开发的 shell 创建一个附加系统。我已经关注[了这个](http://msdn.microsoft.com/en-us/library/25y1ya39.aspx)和[这个](http://www.codeproject.com/Articles/17269/Reflection-in-C-Tutorial)。这是我加载附加组件的功能：

```
public void loadAppFromDLL(string assemblyFile)
{
    Assembly a = Assembly.Load(assemblyFile);
    Type app = a.GetType("App");
    MethodInfo loadMethod = app.GetMethod("load");
    object appInstance = Activator.CreateInstance(app);
    loadMethod.Invoke(appInstance, null);
} 
```

这是附加组件：

```
using System.Text;
using System.Threading.Tasks;
using System.Windows.Forms;

namespace App
{
    public class App
    {
        public void load()
        {
            MessageBox.Show("Application loaded successfully!");
        }
    }
} 
```

当我构建附加组件时，我将它放在与 shell 可执行文件相同的目录中并调用：

```
LoadExternalApp lea = new LoadExternalApp();
lea.loadAppFromDLL("SampleApp"); 
```

（LoadExternalApp 包含 DLL 加载函数）

当我调试我的 shell 时，我注意到：

1.  应用程序未启动
2.  有一个 System.NullReferenceException

我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:03:53.137

这个：

```
Type app = a.GetType("App"); 
```

正在寻找具有*命名空间限定*名称的类型`App`.

您的类型`App`在 的命名空间中被调用，返回也是`App`如此，然后您将取消引用它。相反，您应该使用：`Assembly.GetType``null`

```
Type app = a.GetType("App.App"); 
```

但是，[您不应该一开始就给一个类赋予与其命名空间相同的名称](http://blogs.msdn.com/b/ericlippert/archive/2010/03/09/do-not-name-a-class-the-same-as-its-namespace-part-one.aspx)。解决这个问题，这样你最终会得到更像：

```
Type app = a.GetType("App.PlugIn"); 
```

您仍然应该检查`GetType`（或`GetMethod`）是否返回 null，以便更优雅地失败并提供更多信息。

此外，您应该开始遵循 .NET 命名约定 - 在 PascalCase 中给出方法名称。哦，您可能希望为您的加载项考虑一个通用接口，而不是依赖反射来调用方法。

# android - Android：显示软键盘时布局的TranslateAnimation

> ID：14959390
> 
> 赞同：1
> 
> 时间：2013-02-19T14:02:54.940
> 
> 标签：android, sliding

我发现[这段代码](https://github.com/gitgrimbo/android-sliding-menu-demo)可以制作像 facebook 应用程序这样的滑动菜单。他（编写此代码）使用 FrameLayout 包含 2 个视图并使用 TranslateAnimation 显示/隐藏菜单。他习惯于`setFillAfter(true)`保持视线的位置。在`onAnimationEnd`中，他曾经`view.layout(left, top, right, bottom)`确保视图处于正确的位置。

我修改了这段代码以使用 3 个视图：leftView、centerView 和 rightView（在我的例子中，每个视图都是一个 LinearLayout），就像 facebook 一样，发现了一个问题：当活动显示 leftView（和 centerView 的一部分）时，如果我单击 EditText在leftView和软键盘显示，它返回到centerView。同样，当我单击 ExpandableListView 并显示 Childs 时会发生这种情况。

任何人都可以帮助我吗？这是[我的代码](https://dl.dropbox.com/u/38205395/TestErrorSlidingActivity.rar)。

提前感谢您，并为我糟糕的英语感到抱歉！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T08:23:56.277

尝试在清单中使用 android:windowSoftInputMode="adjustNothing" 进行活动。为我工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:47:45.887

您的问题是键盘重新触发了 FrameLayout 的测量/布局通道。此时，您手动调用的布局将从 FrameLayout 原始布局中替换。为避免这种情况，您有两种方法：1）不要使用 FrameLayout（定义您自己的视图组扩展或扩展 FrameLayout 覆盖有关子项的测量/布局的所有方法）2）不要在动画之后调用布局，而是尝试对您的孩子使用 setMargin（如果可能）

显然，最好的方法是第一种。

# c++ - 指向多维向量的指针

> ID：14959393
> 
> 赞同：3
> 
> 时间：2013-02-19T14:03:07.643
> 
> 标签：c++

我正在尝试`*vectorName`使用 366 x 4 的 2D 向量初始化指针 ( )。

两个都

```
vector<int> *vectorName = new vector<int>(366, new vector<int>(4)); 
```

和

```
vector<int> *vectorName = new vector<int>(366, vector<int>(4)); 
```

不工作，给我错误

> 错误：没有构造函数实例“std::vector, <_Ty, _Alloc>::vector [with_ty=int, _Alloc=std_allocator]”参数类型为 (const int, std::vector>*)

我能做些什么？

这发生在 main 函数中。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:26:34.437

```
vector<int> *vectorName = new vector<int>(366, vector<int>(4)); 
```

以上不起作用，因为**[向量构造函数](http://www.cplusplus.com/reference/vector/vector/vector/)模板**（忽略一些事情）如下所示：

```
vector <TYPE> (SIZE, variable of type TYPE); 
```

而在 中`vector<int>(366, vector<int>(4))`，`vector <int> (4)`不是类型`int`。

**要创建具有 366个大小为 4的s`vector`元素的 a：`vector``int`**

```
vector<vector<int> > *vectorName = new vector<vector<int> >(366, vector<int>(4)); 
```

或者，**如果您不需要指针**：（您很可能不需要）

```
vector<vector<int> > vectorName(366, vector<int>(4)); 
```

**作为旁注**，如果它是固定大小的 2D `vector`，你为什么使用`vector`，而不仅仅是一个数组。这会简单得多：

```
int arr[366][4]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T14:49:31.773

我假设您正在尝试使用指向向量的指针来获取向量的动态 C 数组。没有理由这样做。您可以改用向量的向量：

```
vector< vector<int> > 
```

您可以像这样初始化它：

```
vector< vector<int> > vec(4);

for (size_t i = 0; i < 4; ++i) {
    vec[i].resize(366);
} 
```

使用示例：

```
vec[3][365] = 3; 
```

但是，如果您确实需要指向此类向量的指针：

```
vector< vector<int> >* vec = new vector< vector<int> >(4);

for (size_t i = 0; i < 4; ++i) {
    (*vec)[i].resize(366);
}

(*vec)[3][365] = 3; 
```

如果您的大小是恒定的并且您使用的是 C++11 编译器，则可以使用更简单的方法[`std::array`](http://www.cplusplus.com/reference/array/array/?kw=array)：

```
array<array<int, 366>, 4> arr;

// Usage example
arr[3][365] = 3; 
```

或指向动态分配的指针：

```
array<array<int, 366>, 4>* arr = new array<array<int, 366>, 4>;

// Usage example
(*arr)[3][365] = 3; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:49:54.957

你想这样做吗？这会生成一个带有 int 的向量的 2D 向量。它使用大小为 4 的向量创建 366 个向量，其中所有项目都初始化为零。现在你有一个 366 x 4 的二维向量。

```
vector<vector<int> > twod( 366, vector<int>(4,0)); 
```

如果你想要一个指向这个向量的指针：

```
vector<vector<int> >* twodptr = &twod; 
```

如果你真的需要这个。

# powershell - Powershell - 获取一个人的年龄

> ID：14959399
> 
> 赞同：0
> 
> 时间：2013-02-19T14:03:32.177
> 
> 标签：powershell

我试图让一个人的年龄以年、月、日、小时、分钟和秒为单位。

这是我到目前为止所得到的（你可以说我是一个完全的 powershell 初学者）：

```
$now = [datetime]::now
[datetime]$birthday = "12/22/2012 03:22:00"
$age = [datetime]$now - $birthday

Write-Host "My daughter's age is:" $age.Days "days" ($age.Hours) "hours" ($age.Minutes) "minutes" ($age.Milliseconds) "seconds" 
```

输出是：

```
My daughter's age is: 59 days 10 hours 27 minutes 76 seconds 
```

没关系，但是如果输出更“人类可读”会更棒：

```
1 Month 19 Days 10 hours 28 minutes 16 seconds 
```

这实际上比我最初预期的要困难得多。代码必须知道每个月有多少天才能将天分成月和天。还要考虑到今年是闰年！

也许 PowerShell 可以在这里发挥一些魔力！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:19:12.740

我相信这就是你所追求的。

```
[datetime]$birthday = "12/22/2012 03:22:00"
$span = [datetime]::Now - $birthday
$age = New-Object DateTime -ArgumentList $Span.Ticks

Write-Host "My daughter's age is:" $($age.Year -1) Years $($age.Month -1) Months $age.Day "days" ($age.Hour) "hours" ($age.Minute) "minutes" ($age.second) "seconds" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-12T12:30:44.243

请在生日后的第二天检查。还有1天！

正确的是：

```
[datetime]$birthday = "12/22/2012 03:22:00"
$span = [datetime]::Now - $birthday
$age = New-Object DateTime -ArgumentList $Span.Ticks

Write-Host "My daughter's age is:" $($age.Year-1) Years $($age.Month-1) Months ($age.Day-1) "days" ($age.Hour) "hours" ($age.Minute) "minutes" ($age.second) "seconds" 
```

# php - php dom xpath 从站点中的所有文件夹中提取所有链接

> ID：14959401
> 
> 赞同：0
> 
> 时间：2013-02-19T14:03:37.737
> 
> 标签：php, dom, curl

我已经在 stackoverflow 和网络上进行了搜索，这里肯定遗漏了一些东西。我还没有找到我正在寻找的东西。也许它被称为别的东西..我下面有这段代码，它将在第一个文件夹中抓取所有内容，但不会从其他文件夹中抓取其他项目.. 例如，它抓取第一个 / 前面的所有内容，但如果您有一个站点 mysite。 com/folder2/ 它不会抓取 folder2。一切都是联系在一起的。它也确实向后移动。如果你把网站最长的链接放上去，就会一直走到网站的最前面。我不确定我错过了什么，任何指针都会很棒。该网站是我试图废弃的 joomla 网站。

```
<?php function storelink($web,$taken) {
$query = "INSERT INTO scanned (web, taken) VALUES ('$web', '$taken')";
mysql_query($query) or die('Error, insert query failed');
  }

   $target_web = "mysite.com";
  $userAgent = 'bobsbot(http://www.somebot.com/bot.html)';

 // make the cURL request to $target_web
 $ch = curl_init();

  curl_setopt($ch, CURLOPT_USERAGENT, $userAgent);
 curl_setopt($ch, CURLOPT_URL, $target_web);
 curl_setopt($ch, CURLOPT_FAILONERROR, true);
 curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); 
 curl_setopt($ch, CURLOPT_AUTOREFERER, true);
 curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
 curl_setopt($ch, CURLOPT_TIMEOUT, 1000);

  $html= curl_exec($ch);
  if (!$html) {
echo "<br />cURL error number:" .curl_errno($ch);
echo "<br />cURL error:" . curl_error($ch);
exit;
}

    // parse the html into a DOMDocument
  $dom = new DOMDocument();
   @$dom->loadHTML($html);

  // grab all the on the page
  $xpath = new DOMXPath($dom);
$hrefs = $xpath->evaluate("/html/body//a");

  for ($i = 0; $i < $hrefs->length; $i++) {
$href = $hrefs->item($i);
$web = $href->getAttribute('href');
storeLink($web,$target_web);
echo "<br />Link saved: $web";

 } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:38:08.510

如果我理解正确，您想抓取一个站点并保存所有 URL。这意味着您在遇到 URL 时需要递归。

你用来启动蜘蛛的函数叫做`saveLink($web, $taken)`. 遇到链接时调用的函数是`storeLink($web, $target_web)`. 不应该这样`saveLink($web, $target_web)`吗？

`saveLink()`应该是递归的并且还执行 cURL 请求。cURL URL 应设置为遇到的链接。这样，它将解析遇到的所有链接的 DOM 并跟踪其中的所有链接。

# algorithm - 绘制具有较大值但值变化较小的图形

> ID：14959408
> 
> 赞同：0
> 
> 时间：2013-02-19T14:03:55.913
> 
> 标签：algorithm, graphics, graph, plot

我正在尝试绘制一个图表来描述进程的内存消耗与时间的关系。在获得 SO 的帮助后，我能够使用 Qt 消耗内存并绘制图形。为了展示内存中的微小变化，我以字节为单位缩放 Y 轴。

我的问题是，通常消耗的内存是一个非常大的值，要在我的图表中展示，它会超出可见区域。

我[在这里](http://jpgraph.net/download/manuals/chunkhtml/ch14s09.html)研究如何使用对数刻度来避免这个问题。但这会导致另一个问题：

一段时间后，通常进程会随着内存初始化而稳定下来，与该进程消耗的总内存相比，内存消耗的任何进一步变化都是非常小的值。因此，这些变化在我的图表上并不真正可见，因为我正在使用日志进行缩放。但我的主要目的是以图形格式展示总内存消耗的变化。

我的方法是错误的还是有更好的方法来实现这一点？

在 Qt/C++/qml 中实现，但最欢迎通用的想法。

例如。

时间：0 秒 | 消耗 : 0 字节

时间：1 秒 | 消耗：1212120 字节

时间：2 秒 | 消耗：1212520 字节

时间：3 秒 | 消耗：1212720 字节

.. 消费在这个时候稳定下来——现在只有很小的变化——

时间：20 秒 | 消耗：1212890 字节

时间：21 秒 | 消耗：1212893 字节

时间：22 秒 | 消耗：1212895 字节

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T06:35:43.757

*   可以考虑分数幂（例如平方根）而不是对数。

*   忽略第一个值。如果时间 0 的值始终为 0，则可以考虑忽略它。它显着抵消了您的数据集。那么图上的 y-min 可以是 1212120 会更好看：

    ![图形](../Images/468d83ad0ddc504ff39e0d3bb83c11b3.png)

*   显示更改（时间 x 处的值 - 时间 x-1 处的值）而不是实际值（时间 x 处的值）也可能是一个好主意。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T05:29:47.490

这是处理它的一种方法：

1.  图表变化，而不是绝对值。
2.  使用插图或小图表，例如在地图中，显示图表角落的巨大变化。在图表的主要部分，显示小的变化。
3.  在主图表的另一个角落显示当前光标位置（单个数字）的内存使用值。

# java - 在整个应用程序中检查互联网连接的最佳方法

> ID：14959410
> 
> 赞同：1
> 
> 时间：2013-02-19T14:04:00.547
> 
> 标签：java, android, class, internet-connection

我想检查整个应用程序中的互联网连接。我已经搜索过了，但结果是每个人都在每个类中创建了一个实例方法并尝试检查互联网连接。我的计划是使用静态方法创建一个类并在不实例化我的类的情况下对其进行检查。**这样做是个好主意吗？还是我应该尝试另一种方式？**我的计划是做这样的事情：

```
public class CheckInternetConnecting {

    public static boolean isOnline(Context context) {
         ConnectivityManager cm =
            (ConnectivityManager) context.getSystemService(Context.CONNECTIVITY_SERVICE);

        return cm.getActiveNetworkInfo() != null &&
            cm.getActiveNetworkInfo().isConnectedOrConnecting();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:19:40.753

您还可以通过以下方式检查互联网连接..

```
public boolean testConnection() {

    try {
        boolean connectionStatus=false;

        InetAddress addr=InetAddress.getByName("8.8.8.8");//google dns 8.8.8.8

        connectionStatus=addr.isReachable(1000); // 1second time for response

    }                               
    catch (Exception e) {
        e.printStackTrace();
        System.out.println(e.toString());
    }

    return connectionStatus;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:19:49.677

也许您可以考虑注册一个广播接收器并监听连接变化，如此[处](http://developer.android.com/training/monitoring-device-state/connectivity-monitoring.html#MonitorChanges)所述。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:09:50.470

你的方法完全没问题。我建议在你的项目中添加一个**包 Utils**并将 Helper-Classes 放在那里。因此，不要创建类 CheckInternetConnecting，而是创建一个类**NetworkHelper**并将您的静态方法放在那里。

**添加包：**
在 Eclipse 的左侧，在包资源管理器中右键单击 src 文件夹并添加一个新包。包含您的包名很重要，例如，当您的包名是 com.my.project 时，添加一个名为 com.my.project.utils 的包...然后您可以通过例如右键单击和添加 NetworkHelper 类到新包中添加一个新文件。将您的静态代码复制到 NetworkHelper 中，然后一切就绪......

# ocaml - OCaml 中的可变类型

> ID：14959418
> 
> 赞同：1
> 
> 时间：2013-02-19T14:04:22.713
> 
> 标签：ocaml

我正在编写一个交换两个引用调用内容的函数。

```
let swap (x : a ref) (y :'a ref) : unit = 
```

在哪里

```
type 'a ref = {mutable contents : 'a} 
```

我不知道采取什么方法来解决这个问题。我使用模式匹配吗？

这是我的测试用例

```
let test () : bool = 
let r1 = { contents = 5 } in
let r2 = { contents = 6 } in
let _ = swap r1 r2 in
((6,5) = (r1.contents,r2.contents))
;; run_test "Swap different" test 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:37:29.603

这行得通吗？

```
let swap x y = 
  let z = !x in
  x := !y;
  y := z 
```

请注意，`:=`and`!`只是正常的功能，如下所示：

```
let (:=) r x = r.contents <- x
let (!) {contents} = contents 
```

如果你想使用自己的类型定义，那么你可以这样做：

```
let swap' x y = 
  let z = x.contents in
  x.contents <- y.contents;
  y.contents <- z 
```

最后，如果您使用电池，那么您可以`BatRef.swap`按照此处定义的方式使用：http: [//ocaml-batteries-team.github.com/batteries-included/hdoc2/BatRef.html](http://ocaml-batteries-team.github.com/batteries-included/hdoc2/BatRef.html)

# sql - 当我收到错误时，我是否可以显示冲突的主键：DELETE 语句与 REFERENCE 约束冲突

> ID：14959420
> 
> 赞同：3
> 
> 时间：2013-02-19T14:04:24.323
> 
> 标签：sql, sql-server, tsql

由于主键约束，我在删除 SQL Server 2008 中的行时遇到问题：

> *DELETE 语句与 REFERENCE 约束冲突...*

有什么办法可以在错误消息中显示冲突的主键？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T18:45:06.123

SQL Server（或竞争产品）中没有内置任何东西可以告诉您哪个特定的表和行导致了冲突。错误消息仅告诉要检查哪个 FK。

根据[JLo 给出的答案](https://stackoverflow.com/a/14959754)，您可以为您的表创建自己的 [on before delete] 触发器，该触发器将遍历每个 FK 表并计算相关记录。如果您使用的是 SP，您可以使用 try/catch 块来做同样的事情。

你有我的同情，因为这样的东西写起来会很乏味。如果您要为多个表执行此操作，我建议您使用代码生成器（T4 工具包或 MyGeneration）为您生成这些表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:21:43.200

这将为您提供特定表的外键。您必须自己检查每个配对。

```
SELECT
    f.name as [Foreign Key],
    OBJECT_NAME(f.parent_object_id) as [Table],
    COL_NAME(fc.parent_object_id, fc.parent_column_id) as [Column],
    OBJECT_NAME(f.referenced_object_id) as [Reference Table],
    COL_NAME(fc.referenced_object_id, fc.referenced_column_id) as [Reference Column]
FROM sys.foreign_keys f
JOIN sys.foreign_key_columns fc
    ON fc.constraint_object_id = f.object_id
WHERE fc.parent_object_id = OBJECT_ID(N'[dbo].[Document]') 
```

这应该让你开始......祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T18:51:45.580

它受到约束的值是您尝试删除的值之一，例如。

```
delete from tableA where value = 123 
```

如果在另一个表中某处存在值为 123 的外键约束，则会引发约束错误...这就是正确命名约束很重要的原因，但如果不是，您始终可以运行 J LO 的脚本来找出哪些约束可用。

在更复杂的事情上，比如

```
delete from tableA where value IN (select top 10 * from tableA) 
```

将您的删除更改为 select * from 并使用类似于上述的 IN 语句交叉引用这些值......您也可以直接运行我的子查询，但这只是一个示例。

# jquery - jQuery 表单提交打开了一个我不想要的新背景选项卡

> ID：14959421
> 
> 赞同：1
> 
> 时间：2013-02-19T14:04:25.803
> 
> 标签：jquery, forms

我有一个带有 2 个提交按钮的表单 - 保存更改并保存并继续编辑。现在我在 CTRL+S 上为 Save&Continue 按钮设置了一个 jQuery 提交，如下所示：

```
$(window).keypress(function(event) {
    if (!(event.which == 115 && event.ctrlKey) && !(event.which == 19)) {
        return true;
    } else {
        event.preventDefault();
        $("#saveContinue").click();
        return false;
    }
}); 
```

这样做的问题是，它会在 Opera 上打开一个新的背景选项卡。缩短版的形式是这样的：

```
<form id="modifyPage" action="index.php" name="modifyPage" method="post">
  <input type="submit" name="saveContinue" id="saveContinue" value="Save & Continue" />
  <input type="submit" name="submit" id="submit" value="Save Changes" />
</form> 
```

# c# - IOException 我无法捕捉

> ID：14959425
> 
> 赞同：6
> 
> 时间：2013-02-19T14:04:37.767
> 
> 标签：c#, serial-port, ioexception

我有一个与 USB-GPS 通话的应用程序。如果没有什么不寻常的事情发生，它就像一种魅力。但我有一个大问题。如果 USB 被拔出，我的程序（有时）会崩溃。我在需要它们的地方有 Try/Catch，但这个 IOExeption 没有被抓住。我只是得到“设备无法识别命令”并且程序停止。这是启动端口的代码：

```
 public LatLongFromGPS(Form1 parent)
    {
        this.parent = parent;
        String port;
        this.SPort = new SerialPort(port, 4800);
        this.SPort.ReadTimeout = 500;
        this.SPort.DataReceived += new SerialDataReceivedEventHandler(dataReceived);
    }

    public bool checkIfPortsOpen()
    {
        return (this.SPort.IsOpen);
    }

    public void openPort()
    {
        try
        {
            if (!this.SPort.IsOpen)
            {
                this.SPort.Open();
            }
        }
        catch(Exception ex)
        {
            parent.LoggIt.WriteLogg("OPENPORT " + ex.ToString(), Logger.LoggType.Debug);
        }
    }

    public void dataReceived(object sender, SerialDataReceivedEventArgs e)
    {
        try
        {
            if (SPort.IsOpen)
            {
                String GPGGAString;
                Thread.CurrentThread.Join(200);
                buffert = new char[this.SPort.BytesToRead];
                this.SPort.Read(buffert, 0, buffert.Length);
                GPGGAString = findStringFromGPS();
                if (GPGGAString != null)
                {
                    getLatitudefromString(GPGGAString);
                    getLongitudefromString(GPGGAString);
                    getTimeFromString(GPGGAString);
                    this.newData = true;
                }
            }
        }
        catch(Exception ex)
        {
            parent.LoggIt.WriteLogg("GPSERROR    " + ex.ToString(), Logger.LoggType.Debug);
        }
    } 
```

然后我在定时器中有这个来检查信息

```
if (this.LatLong.newDataReceived())
   {
        //DOING STUFF
   }

if (!this.LatLong.checkIfPortsOpen())
       this.LatLong.openPort(); 
```

有人对如何阻止崩溃有任何建议吗？

[编辑] 堆栈：

```
at System.IO.Ports.InternalResources.WinIOError(Int32, System.String)

at System.IO.Ports.InternalResources.WinIOError()

at System.IO.Ports.SerialStream.Dispose(Boolean)

at System.IO.Ports.SerialStream.Finalize() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:08:02.933

我不完全确定它是否适用于此，但有一些机制可以在 appdomain 级别捕获整体崩溃 - [http://msdn.microsoft.com/en-GB/library/system.appdomain.unhandledexception.aspx](http://msdn.microsoft.com/en-GB/library/system.appdomain.unhandledexception.aspx)

（不是关于其他事件的部分，例如 ThreadException - 根据情况，这些可能需要自己的处理程序）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:24:28.537

尽管不是最佳实践，但顶级异常处理可能会解决您的问题。有关示例，请参见[http://richnewman.wordpress.com/2007/04/07/top-level-exception-handling-in-windows-forms-applications-%E2%80%93-code-listing-1/](http://richnewman.wordpress.com/2007/04/07/top-level-exception-handling-in-windows-forms-applications-%E2%80%93-code-listing-1/)。

# javascript - tinymce中一行的背景颜色

> ID：14959427
> 
> 赞同：1
> 
> 时间：2013-02-19T14:04:42.340
> 
> 标签：javascript, jquery, tinymce

我想用橙色背景颜色在tinymce中制作一条线。假设tinymce中的文本有三行，我想将中间的一行设为橙色背景。

我在互联网上搜索了几个小时，一无所获。这似乎是不可能的。正如我在 Chrome 中的 Inspect Element 中看到的，这些行甚至没有 css 类。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:27:54.357

您可以使用以下代码对编辑器内容的第二段进行样式设置：

```
var ed = tinymce.get('your_editor_id');
$(ed.getBody()).find('p:first').next().css('background-color', 'red'); 
```

# android - 如何在 xml android 布局中实现自定义 psd？

> ID：14959428
> 
> 赞同：0
> 
> 时间：2013-02-19T14:04:43.943
> 
> 标签：android, xml, eclipse, psd

这是第一次在 Eclipse IDE 中制作一个 android 应用程序。我有 PSD 文件有 7 个这样的屏幕：

[http://www.mediafire.com/?ks8vt2y0nw6xfmb](http://www.mediafire.com/?ks8vt2y0nw6xfmb)

如何实现所有这些编辑框按钮字体背景等从 psd 或 png 到我的 xml 文件和代码？

note1：我的 psd 文件有这个 res :-

Android 小型设备 高 240 - w480 Android 小型设备 中 160 - w320 Android 小型设备 xHigh 320 - w800

我正在看一步一步的教程。?

注意2：我终于完成了启动画面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:33:57.130

我不知道你之前是否将 psd 转换为 html，但它就像这样。为此，您必须了解基本的 android xml 信息。我认为这个 tut 会帮助你。它包含的比你要求的要多。

[http://thenewboston.org/list.php?cat=6](http://thenewboston.org/list.php?cat=6)

# iphone - 如何使用 GData 库从 XML 中读取一些元素名称？

> ID：14959430
> 
> 赞同：0
> 
> 时间：2013-02-19T14:05:00.010
> 
> 标签：iphone, ios, objective-c, nsxmlparser, gdata

我正在制作一个使用 SOAP Web 服务的应用程序，我正在接收这些数据 -

```
<?xml version="1.0" encoding="UTF-8"?>
<User xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://www.myurl.com/">
  <code>200</code>
  <profile>
      <NewDataSet xmlns="">
        <Table diffgr:id="Table1" msdata:rowOrder="0">
          <id>1</id>
          <country>Afghanistan</country>
          <isd_code>93</isd_code>
          <timezone>+04:30</timezone>
          <visible>false</visible>
        </Table>
    </NewDataSet>
  </profile>
</User> 
```

我正在使用 GData 库来读取这些数据。我能够读取`<NewDataSet>`元素值，但不知道如何读取`<code>`标签的值。所以请建议我这样做。

# iphone - detailview 控制器值未显示

> ID：14959433
> 
> 赞同：-1
> 
> 时间：2013-02-19T14:05:29.203
> 
> 标签：iphone, uitableview, ios6

虽然使用的`DetailViewController`值不是从 传递的`UITabelViewController`，但代码有问题吗？

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

detailedvu *dvController = [[detailedvu alloc] initWithNibName:@"detailedvu" bundle:[NSBundle mainBundle]];
if (0 == indexPath.row)
{
    NSLog(@"0");
    dvController.lb1.text = @"Make";
}
[self.navigationController pushViewController:dvController animated:YES];
} 
```

请帮我整理一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:27:16.000

您可以使用它来实现这一点。

在 detailvu.h 文件中创建一个字符串变量属性：

```
@property (strong, nonatomic) NSString * str; 
```

在 detailvu.m 文件中添加：

```
@synthesize str;

- (void)viewDidLoad
{
    [super viewDidLoad];

    if (str.length!=0) {
        NSLog(@"hi%@",str);
        lb1.text=str;
    }
} 
```

并在您的表 vc .m 文件中放入以下代码：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

detailedvu *dvController = [[detailedvu alloc] initWithNibName:@"detailedvu" bundle:[NSBundle mainBundle]];
if (0 == indexPath.row)
{
    NSLog(@"0");
    dvController.str = @"Make";
}
[self.navigationController pushViewController:dvController animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T14:20:20.827

`dvcontroller`被正确实例化。这里的问题是它是`lbl`来自笔尖的标签（我认为）。所以当推送到视图控制器时，会创建一个新实例，所以这里的设置没有任何意义。

将它传递给一个数据持有者，如 NSString 并将标签加载`viewdidLoad`到`detailedvu`

一个建议：请尝试遵循命名约定以获得更好的可读性

快乐编码:)

# python - 单元测试组织 - 如何不运行基类测试？

> ID：14959436
> 
> 赞同：1
> 
> 时间：2013-02-19T14:05:42.653
> 
> 标签：python, unit-testing

我有这样的测试：

```
import unittest

class TestBase(unittest.TestCase):

   def setUp(self):
      self.decorator = None

   def testA(self):
      data = someGeneratorA().generate()
      self.assertTrue(self.decorator.someAction(data))  

   def testB(self):
      data = someGeneratorB().generate()
      self.assertTrue(self.decorator.someAction(data))  

   def testC(self):
      data = someGeneratorC().generate()
      self.assertTrue(self.decorator.someAction(data))  

class TestCaseA(TestBase):

   def setUp(self):
      self.decorator = SomeDecoratorA

class TestCaseB(TestBase):

   def setUp(self):
      self.decorator = SomeDecoratorB 
```

如您所见，**TestCaseA**和**TestCaseB**非常相似，所以我创建了**TestBase**类，它实现了*testA*、*testB*和*testC*方法的主体。

TestCaseA 不同于 TestCaseB 只有装饰器参数。

所以，我想问一下，有没有更好的方法来组织我的测试？而且我有问题，因为 TestBase 类 - 它是测试的 - 永远不应该运行（*self.decorator*是 None 所以它会引发异常）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T14:09:44.430

任何继承自的东西`unittest.TestCase`都被视为一组测试。

相反，您可以让您的基类*不*继承自`TestCase`，而是将该基类移动到您的具体测试类：

```
class TestBase(object):
    # base tests to be reused

class TestCaseA(TestBase, unittest.TestCase):
    # Concrete tests, reusing tests defined on TestBase

class TestCaseB(TestBase, unittest.TestCase):
    # Concrete tests, reusing tests defined on TestBase 
```

# objective-c - 具有自定义选择样式的基于视图的 NSOutlineView

> ID：14959437
> 
> 赞同：0
> 
> 时间：2013-02-19T14:05:44.507
> 
> 标签：objective-c, cocoa, nsoutlineview, nstablecellview

我正在实现一个与 Xcode 中内置的 plist 编辑器非常相似的工具。唯一缺少的是选择行时的自定义突出显示（见附图）。实现这一目标的正确方法是什么？

![在此处输入图像描述](../Images/56538322bdafd662e6b1112f35c792ab.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T10:48:23.653

最后，我将`NSOutlineView`+子类化`NSTableRowView`并在`drawSelectionInRect:`.

# c# - 使用 MySQL 5、简单成员资格提供程序、ASP.NET MVC4 和 Entity Framework 5

> ID：14959442
> 
> 赞同：3
> 
> 时间：2013-02-19T14:05:50.617
> 
> 标签：c#, mysql, asp.net-mvc, asp.net-mvc-4, simplemembership

我正在尝试： **使用 ASP.NET MVC 4**默认 Web 应用程序对 MySQL 使用基于简单成员资格提供程序的身份验证，该应用程序配置为使用 MySQL 提供的教程： [http ://www.nsilverbullet.net/2012/11/07/6-步骤获取实体框架 5-working-with-mysql-5-5/](http://www.nsilverbullet.net/2012/11/07/6-steps-to-get-entity-framework-5-working-with-mysql-5-5/)

在这里[使用 MySQL 的 ASP.NET MVC 4 EF5](https://stackoverflow.com/questions/12181428/asp-net-mvc-4-ef5-with-mysql)

我正在使用带有**EF 5.0**和**Visual Studio 2012的****MySQL 连接器 6.6.4** ，并使用**ASP.NET MVC 4 Internet 应用程序**模板。

 ******## 我面临的错误是这样的：

```
Server Error in '/' Application.
You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[UserId] FROM [UserProfile] WHERE (UPPER([UserName]) = 'Z')' at line 1
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code.

Exception Details: MySql.Data.MySqlClient.MySqlException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '[UserId] FROM [UserProfile] WHERE (UPPER([UserName]) = 'Z')' at line 1

Source Error:

Line 55:                     }
Line 56: 
Line 57:                     WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: false);
Line 58:                 }
Line 59:                 catch (Exception ex)

Source File: e:\Projects\TestApp\TestApp\TestApp\Filters\InitializeSimpleMembershipAttribute.cs    Line: 57 
```

## 我的代码是：

## InitializeSimpleMembershipAttribute.cs

```
private class SimpleMembershipInitializer
        {
            public SimpleMembershipInitializer()
            {
                //Database.SetInitializer<UsersContext>(null);
                //Database.SetInitializer(new DropCreateMySqlDatabaseIfModelChanges<UsersContext>());
                //Database.SetInitializer(new CreateMySqlDatabaseIfNotExists<UsersContext>());
                Database.SetInitializer(new DropCreateMySqlDatabaseIfModelChanges<UsersContext>());
                try
                {
                    using (var context = new UsersContext())
                    {
                        if (!context.Database.Exists())
                        {
                            // Create the SimpleMembership database without Entity Framework migration schema
                            //((IObjectContextAdapter)context).ObjectContext.CreateDatabase();
                            //context.Database.CreateIfNotExists();
                        }
                    }

                    WebSecurity.InitializeDatabaseConnection("DefaultConnection", "UserProfile", "UserId", "UserName", autoCreateTables: false);
                }
                catch (Exception ex)
                {
                    throw new InvalidOperationException("The ASP.NET Simple Membership database could not be initialized. For more information, please see http://go.microsoft.com/fwlink/?LinkId=256588", ex);
                }
            }

        } 
```

## AccountModel.cs（仅相关代码）

```
public class UsersContext : DbContext
    {
        static UsersContext()
        {
            //Database.SetInitializer(new DropCreateMySqlDatabaseIfModelChanges<UsersContext>());
        }
        public UsersContext()
            : base("DefaultConnection")
        {
            //Database.SetInitializer(new DropCreateMySqlDatabaseIfModelChanges<UsersContext>());
        }

        public DbSet<UserProfile> UserProfiles { get; set; }
    }
    public class DropCreateMySqlDatabaseAlways<TContext>
      : MySqlDatabaseInitializer<TContext> where TContext : DbContext
    {
        public override void InitializeDatabase(TContext context)
        {
            context.Database.Delete();
            CreateMySqlDatabase(context);
        }
    }

    public class DropCreateMySqlDatabaseIfModelChanges<TContext>
     : MySqlDatabaseInitializer<TContext> where TContext : DbContext
    {
        public override void InitializeDatabase(TContext context)
        {
            bool needsNewDb = false;
            if (context.Database.Exists())
            {
                if (!context.Database.CompatibleWithModel(false))
                {
                    context.Database.Delete();
                    needsNewDb = true;
                }
            }
            else
            {
                needsNewDb = true;
            }
            if (needsNewDb) CreateMySqlDatabase(context);
        }
    }

    public class CreateMySqlDatabaseIfNotExists<TContext>
   : MySqlDatabaseInitializer<TContext> where TContext : DbContext
    {
        public override void InitializeDatabase(TContext context)
        {
            if (context.Database.Exists())
            {
                if (!context.Database.CompatibleWithModel(false))
                {
                    throw new InvalidOperationException(
                        "The model has changed!");
                }
            }
            else
            {
                CreateMySqlDatabase(context);
            }
        }
    }

    public abstract class MySqlDatabaseInitializer<TContext>
     : IDatabaseInitializer<TContext>
         where TContext : DbContext
    {
        public abstract void InitializeDatabase(TContext context);

        protected void CreateMySqlDatabase(TContext context)
        {
            try
            {
                // Create as much of the database as we can
                context.Database.Create();

                // No exception? Don't need a workaround
                return;
            }
            catch (MySqlException ex)
            {
                // Ignore the parse exception
                if (ex.Number != 1064)
                {
                    throw;
                }
            }

            // Manually create the metadata table
            using (var connection = ((MySqlConnection)context
                .Database.Connection).Clone())
            using (var command = connection.CreateCommand())
            {
                command.CommandText =
    @"
CREATE TABLE __MigrationHistory (
    MigrationId mediumtext NOT NULL,
    Model mediumblob NOT NULL,
    ProductVersion mediumtext NOT NULL);

ALTER TABLE __MigrationHistory
ADD PRIMARY KEY (MigrationId(255));

INSERT INTO __MigrationHistory (
    MigrationId,
    Model,
    ProductVersion)
VALUES (
    'InitialCreate',
    @Model,
    @ProductVersion);
";
                command.Parameters.AddWithValue(
                    "@Model",
                    GetModel(context));
                command.Parameters.AddWithValue(
                    "@ProductVersion",
                    GetProductVersion());

                connection.Open();
                command.ExecuteNonQuery();
            }
        }

        private byte[] GetModel(TContext context)
        {
            using (var memoryStream = new MemoryStream())
            {
                using (var gzipStream = new GZipStream(
                    memoryStream,
                    CompressionMode.Compress))
                using (var xmlWriter = XmlWriter.Create(
                    gzipStream,
                    new XmlWriterSettings { Indent = true }))
                {
                    EdmxWriter.WriteEdmx(context, xmlWriter);
                }

                return memoryStream.ToArray();
            }
        }

        private string GetProductVersion()
        {
            return typeof(DbContext).Assembly
                .GetCustomAttributes(false)
                .OfType<AssemblyInformationalVersionAttribute>()
                .Single()
                .InformationalVersion;
        }
    }

    [Table("UserProfile")]
    public class UserProfile
    {
        [Key]
        [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
        public int UserId { get; set; }
        public string UserName { get; set; }
    }

    public class RegisterExternalLoginModel
    {
        [Required]
        [Display(Name = "User name")]
        public string UserName { get; set; }

        public string ExternalLoginData { get; set; }
    }

    public class LocalPasswordModel
    {
        [Required]
        [DataType(DataType.Password)]
        [Display(Name = "Current password")]
        public string OldPassword { get; set; }

        [Required]
        [StringLength(100, ErrorMessage = "The {0} must be at least {2} characters long.", MinimumLength = 6)]
        [DataType(DataType.Password)]
        [Display(Name = "New password")]
        public string NewPassword { get; set; }

        [DataType(DataType.Password)]
        [Display(Name = "Confirm new password")]
        [Compare("NewPassword", ErrorMessage = "The new password and confirmation password do not match.")]
        public string ConfirmPassword { get; set; }
    } 
```

请帮助我找出我做错了什么。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T02:31:20.570

我在这里提供了一个类似问题的答案： [Using Simple Membership Provider with mysql](https://stackoverflow.com/questions/12620922/using-simple-membership-provider-with-mysql/15800614#15800614) 它基于我在这里找到的 Fabio Costa 的一篇文章：http: [//fabiocosta.ca/2012/11/24/use-simplemembership-and-oauth-使用任何数据库和数据类型/](http://fabiocosta.ca/2012/11/24/use-simplemembership-and-oauth-with-any-database-and-datatype/)。您基本上获得了源代码，根据您的需要对其进行更新（让它编写 mysql 查询而不是 sql）并使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:13:15.247

您可能确实可以将 MySQL 与 EF 一起使用，就像我自己做的那样，但似乎不支持 Simple Membership Provider。

阅读这篇文章底部的答案： [http ://forums.asp.net/t/1766451.aspx/1](http://forums.asp.net/t/1766451.aspx/1)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-30T23:35:02.557

请查看[https://mysqlmembershipprovider.codeplex.com/](https://mysqlmembershipprovider.codeplex.com/)

并且提供程序也是使用 EF 实现的，并且默认构建在 .NET 4.5 上。******

# codeigniter - 获取数据库中的最后一行

> ID：14959446
> 
> 赞同：2
> 
> 时间：2013-02-19T14:06:01.440
> 
> 标签：codeigniter

在 CodeIgniter 中检索最后一行（按 id 排序）的正确方法是什么？我试过`select_max`了，但我想要整行。

```
function getLastPagination(){
    $data = array();
    $this->db->query("SELECT id,sort FROM pagination GROUP BY id DESC LIMIT 1");
    $query = $this->db->get('pagination');
    $data = $query->row_array();
    return $data;
}

$data['allpag'] = $this->Model_cats->getLastPagination();
$data['pagin'] = $data['allpag']['sort'];
$per_page = $data['pagin']; 
```

在这里，我得到了第一个值，但我想要最后一行。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-08-06T10:53:18.400

```
$this->db->select('id')->order_by('id','desc')->limit(1)->get('table_name')->row('id'); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-19T14:21:24.383

试试这个.............

```
function getLastPagination(){

     $query ="select * from pagination order by id DESC limit 1";

     $res = $this->db->query($query);

     if($res->num_rows() > 0) {
            return $res->result("array");
    }
    return array();
    }
} 
```

在控制器功能中，您需要做以下事情......

```
$allpag = $this->Model_cats->getLastPagination();
$per_page = $allpag[0]['sort']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:10:03.160

```
$query = $this->db->query("SELECT * FROM pagination ORDER BY id DESC LIMIT 1")->row_array(); 
```

应该管用？

# java - 如何更改微调器背后的背景？

> ID：14959450
> 
> 赞同：0
> 
> 时间：2013-02-19T14:06:14.193
> 
> 标签：java, android, android-layout

我有使用 eclipse New-->other--> Android Activity --> New Login Activity 创建的标准登录活动

（您可以尝试创建相同的活动......我正在使用“Eclipse 版本：Juno Service Release 1”）

我更改了所有后台活动/片段：#0099cc

但是当我从一个活动传递到另一个活动时，我会看到图像中的背景白色。

你能帮助我吗？

我认为重要的代码如下：

显示进度（真）；

```
 /**
 * Shows the progress UI and hides the login form.
 */

@TargetApi(Build.VERSION_CODES.HONEYCOMB_MR2)
private void showProgress(final boolean show) {
    // On Honeycomb MR2 we have the ViewPropertyAnimator APIs, which allow
    // for very easy animations. If available, use these APIs to fade-in
    // the progress spinner.
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR2) {
        int shortAnimTime = getResources().getInteger(android.R.integer.config_shortAnimTime);

        mLoginStatusView.setVisibility(View.VISIBLE);

                    **I tried in this way**
        mLoginStatusView.setBackgroundColor(Color.parseColor("#0099cc"));
        mLoginStatusView.animate().setDuration(shortAnimTime).alpha(show ?1 : 0).setListener(new AnimatorListenerAdapter() {
        @Override
        public void onAnimationEnd(Animator animation) {
                        mLoginStatusView.setVisibility(show? View.VISIBLE : View.GONE); }
        });
        mLoginFormView.setVisibility(View.VISIBLE);
        mLoginFormView.animate().setDuration(shortAnimTime).alpha(show ? 0:1).setListener(new AnimatorListenerAdapter() {

        @Override
        public void onAnimationEnd(Animator animation) {
            mLoginFormView.setVisibility(show ? View.GONE:View.VISIBLE);
        }
                });
    } else {
        // The ViewPropertyAnimator APIs are not available, so simply show
        // and hide the relevant UI components.
        mLoginStatusView.setVisibility(show ? View.VISIBLE : View.GONE);
        mLoginFormView.setVisibility(show ? View.GONE : View.VISIBLE);
    }
} 
```

在 login.xml 布局中

```
 <ProgressBar
        style="?android:attr/progressBarStyleLarge"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="8dp"
        android:background="#0099cc" /> 
```

在 attrs.xml

```
<!--
     Declare custom theme attributes that allow changing which styles are
     used for button bars depending on the API level.
     ?android:attr/buttonBarStyle is new as of API 11 so this is
     necessary to support previous API levels.
-->
<declare-styleable name="ButtonBarContainerTheme">
    <attr name="buttonBarStyle" format="reference" />
    <attr name="buttonBarButtonStyle" format="reference" />
</declare-styleable> 
```

![记录活动](../Images/de79dd500851a2eb6050a695dd85eb9a.png)

![我想在哪里改变背景](../Images/ea8141e9774f72915600c46352f5b885.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:09:57.370

我认为您需要为整个应用程序编写自己的样式，[这里](http://developer.android.com/guide/topics/ui/themes.html)是 Google 的 API 指南。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:25:05.490

我解决了我的问题（在尝试以多种方式管理样式之后）添加了一个简单的行：

getWindow().getDecorView().setBackgroundColor(Color.parseColor("#0099cc"));

```
 /**
     * Shows the progress UI and hides the login form.
     */
@TargetApi(Build.VERSION_CODES.HONEYCOMB_MR2)
private void showProgress(final boolean show) {
    // On Honeycomb MR2 we have the ViewPropertyAnimator APIs, which allow
    // for very easy animations. If available, use these APIs to fade-in
    // the progress spinner.

    getWindow().getDecorView().setBackgroundColor(Color.parseColor("#0099cc"));
    if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB_MR2) {
        ... 
```

# javascript - Contenteditable：删除标签节点内文本的格式

> ID：14959451
> 
> 赞同：2
> 
> 时间：2013-02-19T14:06:16.517
> 
> 标签：javascript, contenteditable

我正在 contenteditable div 中开发一个基本的 html 编辑器（代码基于范围向导[Tim Down](https://stackoverflow.com/users/96100/tim-down)提供的各种解决方案）。

它正在工作（它可以插入 html 节点替换用户的选择），但是缺少一个主要功能，如果用户在标签内选择一个字母（例如强），他应该能够删除该字母上的格式，所以。

```
<strong>lorem ipsum</strong> 
```

用户选择 ipsum 的“i”：

```
<strong>lorem |i|psum</strong> 
```

当用户按下“添加/删除强标签”按钮时，结果应该是：

```
<strong>lorem </strong>i<strong>psum</strong> 
```

使用当前代码，这是结果（这对标签很好！=强）：

```
<strong>lorem <strong>i</strong>psum</strong> 
```

我需要一个在用户选择一些文本并按下按钮以插入/删除标签并按照以下说明进行操作时激活的片段：

*   找到父标签（如果存在）
*   if (new tag == parent tag) 将父标签分成2个标签
*   在 2 个标签之间插入（未格式化的）选择

这是一个虽然，我知道......提前谢谢！

# youtube-api - 在移动设备（Android Chrome 和 Firefox）上的 iframe HTML5 播放器中没有自动播放？

> ID：14959454
> 
> 赞同：7
> 
> 时间：2013-02-19T14:06:28.730
> 
> 标签：youtube-api

我最近在使用标准 iframe 嵌入代码嵌入视频并添加 autoplay=1 时遇到了一个问题，如下所示：

```
<iframe width="420" height="315" src="http://www.youtube.com/embed/Le4kjAIcj4k?rel=0&amp;autoplay=1" frameborder="0" allowfullscreen></iframe> 
```

测试时的结果：

*   如果加载了播放器的 Flash 版本（如果存在 Flash 并且不存在 HTML5-beta 参与 cookie），则自动播放可在桌面和移动设备上运行
*   它也适用于桌面上的 HTML5 版本
*   但**不会在 HTML5 移动版中自动播放（在 Android 4.1.2 上测试，**[本页](https://dl.dropbox.com/u/9207036/autoplay.html)上同时使用 Firefox Mobile 和 Chrome ，在 Android 上您需要确保没有 Flash）。

这是一个已知的问题？任何解决方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-21T19:17:13.693

当您`<iframe>`在禁用 Flash 的浏览器中使用播放器时，播放是通过 HTML5`<video>`标记处理的。

Apple[明确禁止](http://developer.apple.com/library/safari/#documentation/AudioVideo/Conceptual/Using_HTML5_Audio_Video/Device-SpecificConsiderations/Device-SpecificConsiderations.html#//apple_ref/doc/uid/TP40009523-CH5-SW4)`<video>`在 iOS Safari 的标签中自动播放媒体。

至少最近版本的默认 Android 浏览器或[Chrome](https://code.google.com/p/chromium/issues/detail?id=159336)也是如此。我强烈怀疑 Android Firefox 也有同样的限制。

# jquery - jQuery Caption 在 mouseenter 上显示

> ID：14959455
> 
> 赞同：0
> 
> 时间：2013-02-19T14:06:32.523
> 
> 标签：jquery, image, caption

我正在尝试做的标题有问题。我希望你能帮助我。

基本上我正在尝试使`.caption-holder`图像向上滑动。它已经正确定位，但是当我在所需的图像上时，我无法弄清楚如何使标题向上滑动或出现。

这是我的 jQuery：

```
//Caption
$(".photo-container").mouseover(function (){
    $(this)

    imgW = $(this).width();
    imgH = $(this).height();

    $(".caption-holder").css({"display":"block"})
    $(".caption-img-overlay").css({"width":imgW, "height":imgH});
    $(".caption").css({"width":imgW, "padding":"12px 18px 3px 18px"});
}); 
```

CSS：

```
.photo-container {
    background:rgba(251,171,0,0.1);
    position:relative;
    display:inline-block;
}

.caption-holder {
    display:none;
    position:absolute;
    top:0;
    left:0;
}

.caption-img-overlay {
    height:300px;
    background:rgba(251,176,0,0.2);
}

.caption {
    width:0;
    height:56px;
    padding:0 0;
    color:#a65500;
    font-size:14px;
    line-height:14px;
    text-shadow:rgba(255,255,255,0.5) 1px 1px 2px;
    background:url(../images/bg_image_caption.png);
} 
```

和 HTML：

```
<div class='photo-container'>
  <img src='image.jpg' />
  <div class='caption-holder'>
    <div class='caption-img-overlay'>
      <div class='caption'>
        <h4>Pruebas</h4>
        <p>texto prueba</p>
      </div>
    </div>
  </div>
</div> 
```

如果可以的话，请帮我把标题向上滑动:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:20:52.190

[http://jsfiddle.net/gygHg/](http://jsfiddle.net/gygHg/) 使用这个示例

```
$('.thumbs li').mouseover(function() {      
$(this).find('.caption').fadeIn(500);
});

$('.thumbs li').mouseleave(function() {       
$(this).find('.caption').fadeOut(500);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:31:17.303

试试这个：

```
$(".caption-holder").height(0).show().animate({height: imgH}); 
```

看[这里](http://jsfiddle.net/BFr5Y/1/)

这是一个带有两张图片的[示例](http://jsfiddle.net/BFr5Y/2/)`find()`，用于获取相关信息`.caption-holder`

# php - 循环遍历多维数组

> ID：14959457
> 
> 赞同：0
> 
> 时间：2013-02-19T14:06:53.623
> 
> 标签：php

我有这个数组：

```
$products = Array ( 

    [0] => Array ( 

        [keyseries_id] => 7 
        [product_id] => 1 
        [name] => Defender standaard sleutel 
        [price] => 6.25 
        [description] => Dit is een test voor de product descriptions 
        [image_id] => 1 
        [imageinfo] => Array ( 

                [filename] => Array ( 

                        [0] => defender_thumb.jpg 
                        [1] => defender_standaard.jpg ) 

                [imagedescription] => Array ( 

                        [0] => dit is een testafbeelding 
                        [1] => Dit is een 2e testafbeelding ) 

                    ) 

            ) 

    [1] => Array ( 

        [keyseries_id] => 7 
        [product_id] => 2 
        [name] => Defender Klapsleutel 
        [price] => 7.00 
        [description] => Dit is de defender klapsleutel.. NU IN DE AANBIEDING!!! 
        [image_id] => 3 
        [imageinfo] => Array ( 

                [filename] => Array ( 

                        [0] => defender_thumb.jpg 
                        [1] => defender_klap.jpg ) 

                [imagedescription] => Array ( 

                        [0] => Defender slot 
                        [1] => Defender klapsleutel ) 

                    ) 

            ) 

    ) 
```

我想`foreach`为每个`filename`and做一个循环`imagedescription`，所以我可以在我的应用程序中使用`filename`and`imagedescription`作为`<img>`html 标记。有人可以告诉我怎么做吗？

++++++++++++++++++++++++++++++++++++++++++++++++++++++ ++++++++++++++++++++++++++++++++++++++++++++++++++++++ ++++++++++++++++++++++++++++++++++++++++++++++++++++++ ++++++++++++++++

答案：感谢菲利普

像这样实现 foreach 循环：

```
<?php foreach($product['imageinfo']['filename'] as $index => $filename): ?>

                        <?php echo '<img src="http://localhost/sleutelservice/uploads/images/' . $filename . '" alt="' . $product['imageinfo']['imagedescription'][$index].  '">';  ?>

                    <?php endforeach; ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:20:30.167

我假设您对每个文件都有描述：

```
$results = array();
foreach($bigArray as $group){
  foreach($group['imageinfo']['filename'] as $index => $fileName){
    $results[] = array(
      'file' => $filename,
      'description' =>$group['imageinfo']['imagedescription'][$index]
    );
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:09:59.187

您可以简单地相互嵌套两个循环来实现这一点

```
foreach ($array as $item) {
    foreach ($item as $key => $subitem) {
         //do something with subitem
    }
} 
```

# symfony - Symfony2 中 Assetic Bundle 的 Javascripts 输出变量

> ID：14959460
> 
> 赞同：0
> 
> 时间：2013-02-19T14:06:58.883
> 
> 标签：symfony, twig

这是我的代码：

```
{% block js %}
    {% javascripts filter='?yui_js' output='js/m/myfiles.js'
            '@MyBundle/Resources/public/js/m/one.js'
            '@MyBundle/Resources/public/js/m/two.js'
            '@MyBundle/Resources/public/js/m/three.js'
    %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %} 
```

我希望能够根据变量更改我的输出值。

像这样的东西：

```
{% set myOutput = 'js/m/myfiles_v2.js'%}
{% block js %}
    {% javascripts filter='?yui_js' output=myOutput
            '@MyBundle/Resources/public/js/m/one.js'
            '@MyBundle/Resources/public/js/m/two.js'
            '@MyBundle/Resources/public/js/m/three.js'
    %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %} 
```

但是当我这样做时，我得到“意外的令牌”名称“价值“myOutput”（“字符串”预期）。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:06:13.360

我认为您需要创建自己的资产过滤器，它将扩展 yui_js 过滤器并覆盖函数以创建名称。

Assetic 过滤器是一个服务实现了FilterInterface。

这是您作为服务的过滤器的示例定义：

```
<service id="my.if.filter" class="MyBundle\FilterClass">
    <tag name="assetic.filter" alias="my_alias" />
    <argument></argument>
    <argument>....</argument>
</service> 
```

这是一个教程：

[http://richardmiller.co.uk/2011/05/24/symfony2-make-your-own-assetic-filter/](http://richardmiller.co.uk/2011/05/24/symfony2-make-your-own-assetic-filter/)

# terminal - 如何通过 OpenSSL 在 Shell 中与 IMAP 服务器通信

> ID：14959461
> 
> 赞同：52
> 
> 时间：2013-02-19T14:07:00.227
> 
> 标签：terminal, openssl, imap

我想通过 Mac OS X 终端向服务器发送 IMAP 命令并获得响应。我可以使用这条线连接到服务器：

```
openssl s_client -connect imap.gmail.com:993 
```

我可以成功登录：

```
? LOGIN m.client2 passwordhere 
```

但是所有其他命令都不起作用，服务器没有响应。我试过这个：

```
? LIST "" "*"
? SELECT INBOX 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-02-19T14:37:35.927

在朋友的帮助下发现了一个错误：

```
openssl s_client -connect imap.gmail.com:993 -crlf 
```

**-crlf**很关键

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-02-19T14:11:32.337

试试这个，这应该对你有用（用你的替换第一行

```
openssl s_client -connect imap.gmail.com:993 -crlf 
```

命令（强制 -crlf）& 只输入蓝色部分）：

![在此处输入图像描述](../Images/86c83ff084b087738c0fd320ba78d19b.png)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-20T04:32:24.710

首先，您的 gmail 帐户是否激活了 imap ？？？如果您能够成功登录，则表示 ssl 工作正常。你得到的返回码是什么

> a1 LOGIN m.client2 passwordhere 命令。

你试过命令吗

> a1 能力

尝试其他替代命令，因为并非所有 IMAP 服务器都实现所有 IMAP 命令。我在为 gmail rediffmail yahoo 等不同供应商创建数据迁移工具时遇到了这个问题......

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2018-05-03T21:48:26.163

需要考虑的更多选项：您可能正在连接到服务器产品`STARTTLS`（尤其是端口 143 上的 IMAP），在这种情况下，您可以告诉 openssl 继续协商，您需要指定您正在使用的协议（从`pop3`, `imap`, `smtp`, `ftp`); 该`-crlf`选项已被其他人提及，`-showcerts`如果我正在调试 SSL/TLS 配置，我也发现该选项很有用。因此，例如，您最终可能会得到，

```
 openssl s_client -showcerts -connect target.server.name.here:143 -starttls imap 
```

如果您有可用的相关手册页的更多选项，

```
man s_client 
```

# openal - 使用 OpenAL 将声音输出到特定通道到 7.1

> ID：14959462
> 
> 赞同：1
> 
> 时间：2013-02-19T14:07:02.773
> 
> 标签：openal

全部。我有一个项目需要通过 X-Fi 声波卡与 A/V 接收器连接。A/V 接收器连接到 7.1 扬声器系统。我想知道从头到尾分别访问每个 7.1 频道的方式，以便我可以在模拟器中引导飞机驾驶舱信息。我正在使用 OpenAL 并且正在用 C 编写此代码。我已经开发了一些我认为应该可以解决问题的代码，但是我在其他 6 个扬声器上得到了音频传输。下面是我已经编写的一些代码的示例。我希望有人可以在这里帮助我。

谢谢，文森特。`{ ALuint NorthWestSource; ALint 播放状态；

```
switch (event)
{
    case EVENT_COMMIT:
        //Load user selected .wav file into the buffer that is initialized here, "InitBuf".
        LoadDotWavFile();        

        //Generate a source, attach buffer to source, set source position, and play sound.
        alGenSources(NumOfSources, &NorthWestSource);      
        ErrorCheck();

        //Attach the buffer that contains the .wav file's data to the source. 
        alSourcei(NorthWestSource, AL_BUFFER, WavFileDataBuffer);
        ErrorCheck();

        //Set source's position, velocity, and orientation/direction.
        alSourcefv(NorthWestSource, AL_POSITION, SourcePosition);
        ErrorCheck();
        alSourcefv(NorthWestSource, AL_VELOCITY, SourceVelocity);
        ErrorCheck();
        alSourcefv(NorthWestSource, AL_DIRECTION, SourceDirectionNorthWest);
        ErrorCheck();
        alSourcei(NorthWestSource, AL_SOURCE_RELATIVE, AL_TRUE);
        ErrorCheck();
        alSourcei(NorthWestSource, AL_CONE_INNER_ANGLE, 180);
        ErrorCheck();
        alSourcei(NorthWestSource, AL_CONE_OUTER_ANGLE, 270);
        ErrorCheck();
        SetCtrlVal(panelHandle, PANEL_SOURCEISSET, 1);

        //Play the user selected file by playing the sources.
        alSourcePlay(NorthWestSource);
        ErrorCheck();

        //Check that the .wav file has finished playing and if so clean things up.
        do
        {
            alGetSourcei(NorthWestSource, AL_SOURCE_STATE, &PlayStatus);
            if(PlayStatus != AL_PLAYING)
            {
                printf("File done playing. \n");
            }//End do-while if statement
        }
        while(PlayStatus == AL_PLAYING);

        //Clean things up more before exiting out of this audio projection.
        alDeleteSources(NumOfSources, &NorthWestSource);
        ErrorCheck();
        alDeleteBuffers(NumOfBuffers, &WavFileDataBuffer);
        ErrorCheck();
        SetCtrlVal(panelHandle, PANEL_SOURCEISSET, 0);
        //alDeleteBuffers(NumOfBuffers, 
        break;
}
return 0; 
```

}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-17T18:08:55.003

我面临同样的问题。我想向左耳或右耳播放音调。到目前为止，我发现的唯一方法是用声音产生一个立体声缓冲区（为您提供 7.1 缓冲区），然后用零覆盖另一个通道（......为您提供的其他 7 个通道）上的信息，然后播放它来自听者面前的来源。

这是我的解决方法。我知道这很笨拙。但是，如果您想留在 openAL 中并避免直接使用 ALSA（对于 Linux）或 CoreAudio（对于 Mac）进行编程，我还没有找到更好的方法。

更直接地回答您的问题：不，似乎没有直接的说法（正如我所希望的那样）：“3号演讲者说'Hello World'！所有其他演讲者保持沉默。”

干杯，

法里德

# events - qunit 检查事件是否绑定到元素

> ID：14959464
> 
> 赞同：1
> 
> 时间：2013-02-19T14:07:14.973
> 
> 标签：events, qunit

```
/// <reference path="../../../Scripts/myObjectScript.js" />

module("My Test", {
  setup: function () {
      setUpDOM();
  },
  teardown: function () {

  }
});

test("initialize. page load. setPrimaryWarning bound to change event of primary checkbox", function () {
myObject.Initialize(); 
var events = $("#Primary").data('events');
equal(1, events.length);
});

function setUpDOM() {
var $primaryCheckBox = "<input data-val='true' data-val-required='Need Primary' id='Primary' name='Primary' type='checkbox' value='false' data-blur-setup='true'>";
$("#qunit-fixture").append($primaryCheckBox); 
```

}

这失败并出现错误**在测试 #1 未定义时死亡：无法获取属性“数据”的值：对象为空或未定义**

如果我在 chrome 的开发工具中测试 $("#Primary").data('events'); 将返回一个对象。任何想法我如何查看事件是否绑定到 qunit 中的元素或我在上面放置测试的方式有什么问题？

# android - 通过 https 信任自签名证书

> ID：14959469
> 
> 赞同：0
> 
> 时间：2013-02-19T14:07:29.247
> 
> 标签：android, ssl

我知道互联网上有很多教程，但它们超出了我的知识范围，因为这是我第一次使用 https。我在这里使用了 emmby 的答案 Trusting [all certificate using HttpClient over HTTPS](https://stackoverflow.com/questions/2642777/trusting-all-certificates-using-httpclient-over-https/4837230#4837230)。但是我不知道在我连接到服务器的类中进一步的实现是如何进行的。这是我的 HttpsConection 类中的代码片段

```
 Log.d("url", url.toString());
        HttpsURLConnection httpsConnection;

        Log.d("HTTP get", "get() called");
        try
        {
            Log.v("HttpConnection", url.toString());
            httpsConnection = (HttpsURLConnection) url.openConnection();

            if (request != null)
            {
                OutputStreamWriter wr = new OutputStreamWriter(
                        httpsConnection.getOutputStream());
                // Log.e(TAG, "created outputstream");

                wr.write(request);
                // Log.e(TAG, "request sent");
                wr.flush();
                wr.close();
            } else
            {
                Log.e("HttpConnection", "Nothing to send to server");
            }

            // Execute
            try
            {

                InputStream in = new BufferedInputStream(httpsConnection
                        .getInputStream());
                responseString = convertStreamToString(in);
                in.close(); 
```

我的 res/raw 文件夹中有一个 *.bks 文件，但我被困在那里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:13:56.367

这是我的自签名 https 连接代码，对我来说很好用：

```
 KeyStore trustStore;
        try {
            trustStore = KeyStore.getInstance(KeyStore.getDefaultType());
            trustStore.load(null, null);
            SSLSocketFactory sf = new EasySSLSocketFactory(trustStore);
            sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);
            BasicHttpParams params = new BasicHttpParams();
            HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);
            SchemeRegistry registry = new SchemeRegistry();
            registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
            registry.register(new Scheme("https", sf, 443));
            ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);
            DefaultHttpClient httpClient = new DefaultHttpClient(ccm, params);
            HttpsURLConnection.setDefaultHostnameVerifier(sf.getHostnameVerifier());
            HttpGet getRequest = new HttpGet(url);
            BasicHttpParams httpParameters = new BasicHttpParams();
            int timeoutConnection = 10000;
            HttpConnectionParams.setConnectionTimeout(httpParameters, timeoutConnection);
            int timeoutSocket = 15000;
            HttpConnectionParams.setSoTimeout(httpParameters, timeoutSocket);
            httpClient.setParams(httpParameters);
            HttpResponse getResponse = httpClient.execute(getRequest);
            final int statusCode = getResponse.getStatusLine().getStatusCode();
            if (statusCode != HttpStatus.SC_OK) 
            { 
                return null;
            }
            HttpEntity getResponseEntity = getResponse.getEntity();
            String content = EntityUtils.toString(getResponseEntity);
            InputStream is = new ByteArrayInputStream(content.getBytes("UTF-8"));
            return is;
        } catch (KeyStoreException e1) {
            e1.printStackTrace();
        } catch (ParseException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } catch (NoSuchAlgorithmException e) {
            e.printStackTrace();
        } catch (CertificateException e) {
            e.printStackTrace();
        } catch (KeyManagementException e) {
            e.printStackTrace();
        } catch (UnrecoverableKeyException e) {
            e.printStackTrace();
        }
    return null; 
```

# pentaho - Mondrian 对 nosql 的支持，例如 mongodb

> ID：14959475
> 
> 赞同：2
> 
> 时间：2013-02-19T14:08:00.100
> 
> 标签：pentaho, mondrian

Mondrian 在当前版本中是否支持像 mongodb 这样的 nosql db。我阅读了一些与此相关的博客和错误。

任何帮助表示赞赏。

谢谢洛克什

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-16T15:01:19.470

请阅读 Mondrian 的创造者 Julian Hyde 的以下博客

[http://julianhyde.blogspot.com.es/2014/03/improvements-to-optiqs-mongodb-adapter.html](http://julianhyde.blogspot.com.es/2014/03/improvements-to-optiqs-mongodb-adapter.html)

在这里，您可以看到 Julian 一直在研究一种新方法，该方法甚至可以在幕后将复杂的 SQL 查询转换为 MongoDB 查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:44:57.113

Mondrian 目前不直接支持 MongoDB。MongoDB 没有 JDBC 实现。

有几个选项。如果您可以访问 Pentaho 数据集成服务器，则可以设置其中之一。您可以使用[瘦 JDBC 实现](http://wiki.pentaho.com/display/eai/the+thin+kettle+jdbc+driver)，这将允许 Mondrian 访问 SQL 到 Mongo 桥。

当然还有其他方法可以设置它，因为那里有很多数据联合引擎。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T16:24:12.290

据我所知，不是直接的。也许有人正在研究一种方言，这可能吗..？不过有趣的问题... 可能值得链接您到目前为止找到的博客？

然而，一种解决方案可能是使用水壶 jdbc 驱动程序，该驱动程序与 mondrian 一起使用，然后另一端可以是任何 ETL 进程。所以你可以使用 mongodb 输入步骤等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-13T12:23:43.443

有阿帕奇钻。您可以通过标准 SQL 查询 MongoDB，Drill 有一个 JDBC 驱动程序。所以也许蒙德里安有可能使用这个驱动程序。

乌韦

# ajax - Wicket - 使用 ajax 计时器更新列表视图中的项目

> ID：14959478
> 
> 赞同：1
> 
> 时间：2013-02-19T14:08:09.497
> 
> 标签：ajax, listview, timer, wicket

[wicket-example http://www.wicket-library.com/wicket-examples/ajax/world-clock?0](http://www.wicket-library.com/wicket-examples/ajax/world-clock?0)上有一个世界时钟的例子。

我尝试了相同的方法，但在列表视图中。

```
 final DataView<LongRunningTask> dataView = new DataView<LongRunningTask>("sorting", adp) {
        private static final long serialVersionUID = 1L;

        @Override
        protected void populateItem(final Item<LongRunningTask> item) {
            ...
                final Label clock = new Label("timer", getCounter().getObject());

                item.add(clock);
                clock.setOutputMarkupId(true);
                add(new AbstractAjaxTimerBehavior(Duration.seconds(1)) {

                    @Override
                    protected void onTimer(AjaxRequestTarget target) {
                        target.add(clock);
                    }
                });
                ...
            }

        }
    }; 
```

但这不起作用。如果我做

```
 add(new AjaxSelfUpdatingTimerBehavior(Duration.seconds(1))); 
```

在页面本身内部，然后它就可以工作了。但是我不想每秒刷新页面，我只想刷新listView里面的一项（时钟）。

任何机会我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T16:31:32.667

解决这个问题最简单的方法是将 Behavior 添加到时钟而不是周围的容器中。

您每行将行为添加到 DataView 一次。由于 DataViews 不能通过 Ajax 更新，这必然会失败。而是更新时钟组件本身。

```
final DataView<LongRunningTask> dataView = new DataView<LongRunningTask>("sorting", adp) {
    private static final long serialVersionUID = 1L;

    @Override
    protected void populateItem(final Item<LongRunningTask> item) {
        ...
            final Label clock = new Label("timer", getCounter().getObject());

            item.add(clock);
            clock.setOutputMarkupId(true);
            clock.add(new AbstractAjaxTimerBehavior(Duration.seconds(1)) {

                @Override
                protected void onTimer(AjaxRequestTarget target) {
                    target.add(clock);
                }
            });
            ...
        }

    }
}; 
```

再看一遍后，我认为还有另一个罪魁祸首：

```
final Label clock = new Label("timer", getCounter().getObject()); 
```

我不确切知道 getCounter().getObject() 做了什么，但很可能它不会返回模型......

```
final Label clock = new Label("timer", new PropertyModel(this, "counter")); 
```

应该更适合这里。您可能需要将“this”替换为带有适当前缀的版本，以确保定义 getCounter() 的容器已被寻址。

如果这不起作用，请查看您的 AjaxDebugWindow。您应该会看到每秒都有数据。如果不是，您的组件不会更新。如果数据未更改，则您的模型不会更新。有了这个，你应该能够轻松解决这个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T16:03:39.053

您必须刷新 DataView，将其添加到 WebMarkupContainer 并使用 ajax 计时器行为定位 WebMarkupContainer。

第二种方法是将标签和 ajax 计时器行为添加到新面板。然后将该面板添加到您的 DataView。我不确定这种方式是否可行，因为我以前从未尝试过，但值得一试。

# jenkins - 限制 Jenkins 作业何时可以运行

> ID：14959483
> 
> 赞同：0
> 
> 时间：2013-02-19T14:08:30.443
> 
> 标签：jenkins, cloudbees

有没有办法限制何时可以在 Jenkins 中运行作业？我们在一些奴隶上做了几个小时的夜间工作，我们希望阻止用户执行作业。关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:20:14.733

只需将您的奴隶标记为暂时离线。任何需要这些从属的作业都将坐在构建队列中，直到它们再次准备好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T16:16:41.157

你可以考虑这个插件：[https ://wiki.jenkins-ci.org/display/JENKINS/Slave+Prerequisites+Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Slave+Prerequisites+Plugin)

# php - 通过加密安全地从 PHP 连接到 MSSQL？

> ID：14959492
> 
> 赞同：3
> 
> 时间：2013-02-19T14:09:02.337
> 
> 标签：php, sql-server, pdo

我需要从 PHP 连接到 MSSQL 数据库。但是，由于连接了远程站点上的服务器，我需要对连接进行加密。

是否可以仅使用 PHP 的 mssql 扩展或 PDO 来加密与 MSSQL 服务器的连接？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:17:44.897

在实现与 MSSQL 的安全（加密）连接时，有 3 件事很重要：

1.  这些选项`Encrypt`和`TrustServerCertificate`经常一起使用。
2.  默认情况下，SQL 服务器会安装一个自签名证书，用于加密连接 - 然而，自签名证书容易受到攻击。因此，它应该替换为来自证书颁发机构 (CA) 的证书。
3.  替换您的证书后，您然后设置`Encrypt = true`and `TrustServerCertificate = false`(`TrustServerCertificate = true`也可以工作，但您的连接将容易受到攻击)

文章 *1 中的代码示例：

```
$serverName = "serverName";
$connectionInfo = array( "Database"=>"DbName",
                         "UID"=>"UserName",
                         "PWD"=>"Password",
                         "Encrypt"=>true,
                         "TrustServerCertificate"=>false);
$conn = sqlsrv_connect( $serverName, $connectionInfo); 
```

如果您使用 PDO 创建一个对象并传递相关参数。更详细的解释请看以下文章：

*1 - [http://blogs.msdn.com/b/brian_swan/archive/2011/03/08/sql-server-driver-for-php-connection-options-encrypt.aspx](http://blogs.msdn.com/b/brian_swan/archive/2011/03/08/sql-server-driver-for-php-connection-options-encrypt.aspx)

# android - 类中的 NullPointerException

> ID：14959493
> 
> 赞同：1
> 
> 时间：2013-02-19T14:09:03.470
> 
> 标签：android

我有一个包含 2 个函数的类：

```
public class FileHandler extends Activity  {
public void writeToFile(){
    String fileName = "lastDevice.txt";
    try {

        FileOutputStream fos = openFileOutput(fileName, MODE_PRIVATE); //Exception thrown here

        fos.write("some device id".getBytes());
        fos.close();

        Toast.makeText(this, "File updated", Toast.LENGTH_SHORT).show();
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
}
public String readFromFile(){
    try {
        String fileName = "lastDevice.txt";

        FileInputStream fis = openFileInput(fileName); //Exception thrown here
        InputStreamReader isr = new InputStreamReader(fis);
        BufferedReader br = new BufferedReader(isr);
        String sLine = null;
        String data ="";
        while ((sLine = br.readLine())!=null) {
            data+= sLine;
        }
        return data;
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return "FileNotFoundException";
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
        return "IOException";
    } catch (NullPointerException e){
        // TODO Auto-generated catch block
        e.printStackTrace();
        return "Null Pointer Exception";
    }
} 
```

这些函数是从我的主要活动中调用的，如下所示：

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    lvDevices = (ListView)findViewById(R.id.ListViewDevices);
    lastDeviceTxt = (TextView)findViewById(R.id.lastDeviceTxt);

    //get last connected device
    FileHandler fh = new FileHandler();
    String last = fh.readFromFile();

    lastDeviceTxt.setText(last);
} 
```

但我不断`NullPointerException`从这两个功能中得到一个。
从我的`MainActivity`（我将它们复制到我的主要活动）运行功能时，它们工作正常。我究竟做错了什么？（请记住，我对`android`开发很陌生）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:12:10.753

您已定义`FileHandler`为一个活动。你不能自己实例化一个活动，你在这里做的：

```
FileHandler fh = new FileHandler(); 
```

活动需要由 Android 框架实例化（否则它们的上下文设置不正确）。

If you don't want these methods in your own Activity, then you can put them in another class. However, that class cannot inherit from Activity. You will then find that you need to pass your Activity's `Context` to these methods so that they can call methods like `openFileInput()`

# python - Pickle跨平台__dict__属性错误

> ID：14959495
> 
> 赞同：4
> 
> 时间：2013-02-19T14:09:10.417
> 
> 标签：python, cross-platform, pickle

我有泡菜的问题。在 OSX 和 Linux 之间运行良好，但在 Windows 和 Linux 之间运行良好。所有腌制字符串都存储在内存中并通过 SSL 套接字发送。为了 100% 清楚，我已将所有 '\n's 替换为 ":::" 并将所有 '\r's 替换为 "==="（没有）。设想：

*   Client-Win：运行 Python 2.7 的 Small Business Server 2011
*   Client-Lin：运行 Python 2.7 的 Fedora Linux
*   服务器：运行 Python 2.7 的 Fedora Linux

Client-Lin 向服务器发送一个腌制对象：

`ccopy_reg:::_reconstructor:::p0:::(c__main__:::infoCollection:::p1:::c__builtin__:::tuple:::p2:::(VSTRINGA:::p3:::VSTRINGB:::p4:::VSTRINGC:::p5:::tp6:::tp7:::Rp8:::.`

Client-Win 将选取的对象发送到服务器：

`ccopy_reg:::_reconstructor:::p0:::(c__main__:::infoCollection:::p1:::c__builtin__:::tuple:::p2:::(VSTRINGA:::p3:::VSTRINGB:::p4:::VSTRINGC:::p5:::tp6:::tp7:::Rp8:::ccollections:::OrderedDict:::p9:::((lp10:::(lp11:::S'string_a':::p12:::ag3:::aa(lp13:::S'string_b':::p14:::ag4:::aa(lp15:::S'string_c':::p16:::ag5:::aatp17:::Rp18:::b.`

出于某种原因，Windows 客户端会与 pickle 一起发送额外的信息，当 Linux 客户端尝试加载 pickle 字符串时，我会得到：

```
Unhandled exception in thread started by <function TestThread at 0x107de60>
Traceback (most recent call last):
  File "./test.py", line 212, in TestThread
    info = pickle.loads(p_string)
  File "/usr/lib64/python2.7/pickle.py", line 1382, in loads
    return Unpickler(file).load()
  File "/usr/lib64/python2.7/pickle.py", line 858, in load
    dispatch[key](self)
  File "/usr/lib64/python2.7/pickle.py", line 1224, in load_build
    d = inst.__dict__
AttributeError: 'infoCollection' object has no attribute '__dict__' 
```

有任何想法吗？

***编辑*** 添加额外的请求信息。

infoCollection 类的定义方式相同：

```
infoCollection = collections.namedtuple('infoCollection', 'string_a, string_b, string_c')

def runtest():
    info = infoCollection('STRINGA', 'STRINGB', 'STRINGC')
    s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
    ssl_sock = ssl.wrap_socket(s, ssl_version=ssl.PROTOCOL_TLSv1)
    ssl_sock.connect((server, serverport))
    ssl_sock.write(pickle.dumps(info))
    ssl_sock.close() 
```

接收功能也大同小异，只是做了一个

```
p_string = ssl_sock.read()
info = pickle.loads(p_string) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-30T15:48:59.437

您是否使用不同的 Python 次要版本？2.7.3 中有一个错误导致酸洗命名元组与旧版本不兼容。看到这个：

[http://ronrothman.com/public/leftbraned/python-2-7-3-bug-broke-my-namedtuple-unpickling/](http://ronrothman.com/public/leftbraned/python-2-7-3-bug-broke-my-namedtuple-unpickling/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T14:53:33.640

一个hack，但跨平台问题似乎是由于跨平台环境中的namedtuples和pickle在一起。我已经用我自己的类替换了 namedtuple 并且一切正常。

```
class infoClass(object):
    pass

def infoCollection(string_a, string_b, string_c):
    i = infoClass()
    i.string_a = string_a
    i.string_b = string_b
    i.string_c = string_c
    return i 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:35:40.537

您是否尝试过保存为二进制泡菜文件？

```
with open('pickle.file', 'wb') as po:
    pickle.dump(obj, po) 
```

另外-如果您要在各种操作系统之间进行移植，并且`info`您`namedtuple`是否看过[JSON](http://docs.python.org/2/library/json.html)（通常认为它比 更安全`pickle`）？

```
with open('pickle.json', 'w') as po:
    json.dump(obj, po) 
```

**编辑** 从`ssl` `.read()` [文档](http://docs.python.org/2/library/ssl.html#sslsocket-objects)看来，`.read()`默认情况下最多只能读取 1024 个字节，我敢打赌你的`info`namedtuple 会比这更大。很难知道*先验有*`info`多大，我不知道设置是否可以解决问题（我认为可能不会）。*`nbytes=HUGE NUMBER`*

 ** * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T15:04:49.537

如果你会发生什么

```
p_string = ssl_sock.read(nbytes=1.0E6)
info = pickle.loads(p_string) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-10T13:41:59.287

[只需从https://www.python.org/ftp/python/2.7.8/python-2.7.8.amd64.msi](https://www.python.org/ftp/python/2.7.8/python-2.7.8.amd64.msi)安装 Pyhton 2.7.8*

# c# - 结构化文档上的 Linq to XML 查询

> ID：14959499
> 
> 赞同：2
> 
> 时间：2013-02-19T14:09:23.517
> 
> 标签：c#, xml, linq-to-xml, sgml

我正在尝试研究如何在当前结构化但不是严格的 XML 文件的文件上使用 Linq to XML。它们是格式良好的文件，但不包含 XML 声明。它们实际上是 SGML 文件。

目前我有：

```
private void Find_element_attribute_Click(object sender, EventArgs e)
{
     if (comboBox2.Text != "")
     {
         string[] projectFiles = Directory.GetFiles(path, typeExtention, SearchOption.AllDirectories);

         foreach (string file in projectFiles)
         {  
             XElement root = XElement.Load(file); 
             IEnumerable<XElement> selectedElement = from el in root.Elements(Element_textBox.Text)
                  where (string)el.Attribute(Attribute_textBox.Text) == Value_textBox.Text
                  select el; //need to selct the DMC and title and put in a variable, and list them

             foreach (XElement el in selectedElement)
                 MessageBox.Show("text" + el);
         }

     }
     MessageBox.Show("Please select a project to query");
} 
```

由于第二行的“[”字符，这会引发异常。该字符是文档中实体列表的左括号。

我能想到的唯一方法是在打开文档时将 XML 声明添加到文档的开头，然后使用 Linq 查询文档，然后删除声明。但是我不知道该怎么做。任何帮助表示赞赏。

我的文档的开头看起来像

```
<!--Arbortext, Inc., 1988-2009, v.4002-->
<!DOCTYPE DMODULE PUBLIC "-//AECMA CSDB//DTD Air Vehicle Engines Equipment Description 19980102//EN" [
<!ENTITY ICN-BR8412XXXXXXX-1CX-AG30000-A-K7626-01966-A01-1 SYSTEM "ICN-BR8412XXXXXXX-1CX-AG30000-A-K7626-01966-A01-1.cgm" NDATA cgm>
<!ENTITY ICN-BR8412XXXXXXX-1CX-AG30000-A-K7626-01964-A01-1 SYSTEM "ICN-BR8412XXXXXXX-1CX-AG30000-A-K7626-01964-A01-1.cgm" NDATA cgm>
<!ENTITY ICN-BR8412XXXXXXX-1CX-AG30000-A-K7626-01963-A01-1 SYSTEM "ICN-BR8412XXXXXXX-
]>
<dmodule><idstatus>
<dmaddres>
<dmc><avee><modelic>XXXXXXAXXXXXX</modelic><sdc>1AX</sdc><chapnum>AG3</chapnum>
<section>0</section><subsect>0</subsect><subject>00</subject><discode>01</discode>
<discodev>00</discodev><incode>018</incode><incodev>A</incodev><itemloc>A
</itemloc></avee></dmc>
<dmtitle><techname>Equipment - INTRODUCTION</techname><infoname>Introduction
</infoname>
</dmtitle>
<issno issno="001" type="new">
<issdate year="2012" month="11" day="30"></dmaddres>
<status>
<security class="3">
<rpc> </rpc>
<orig> </orig>
<applic></applic>
<techstd>
<autandtp>
<authblk>Chap 1</authblk>
<tpbase>8412(A)</tpbase>
</autandtp>
<authex></authex>
<notes></notes>
</techstd>
<qa>
<firstver type="tabtop"></qa>
</status>
</idstatus><content>
<refs>
<norefs></refs>
<descript>
<para0><title>INTRODUCTION</title> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:40:42.100

XML 解析器不是因为你有`DOCTYPE`声明而抱怨，而是因为你有*不正确* `DOCTYPE`的声明而抱怨。[根据 XML 规范](http://www.w3.org/TR/xml/#NT-ExternalID) `PUBLIC`，后面必须跟两个字符串（“PubidLiteral”和“SystemLiteral”），而不仅仅是一个。

但我认为尝试修复文件没有意义，因为它包含以下部分：

```
<qa>
<firstver type="tabtop"></qa> 
```

在 SGML（和 HTML）中，这样的未闭合标签是可以的，但在 XML 中是不允许的。因此，我认为您不应该尝试使用 LINQ to XML 来解析此文件，因为它确实不是 XML。

`XmlReader`但是，如果您可以使用可以实际读取 SGML的实现，那么使用 LINQ to XML 将是有意义的。[Alex Filipovici 在评论中提到的 SGMLReader](https://github.com/MindTouch/SGMLReader)似乎正是如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:30:22.080

这种情况下的问题不在于它需要一个 xml 声明，而是从第*2*行到第*6*行的内容。事实上，由于它们不是有效的 xml，您的代码无法解析它们。一个棘手的方法可能是跳过这些行：

```
string content = String.Join("", File.ReadAllLines().Skip(6).ToArray());
MemoryStream ms = new MemoryStream(Encoding.Unicode.GetBytes(content));
XElement root = XElement.Load(ms); 
```

然后，如果该内容后面跟着一个有效的 xml，那么您应该不会有任何其他问题，但是正如我所尝试的，它似乎是无效的。

在此处查找[XML 1.0 Recommendations](http://www.w3.org/TR/xml/#sec-prolog-dtd)以创建有效的 XML 文件。

# php - PHP utf8 和 json_encode 重音符号问题

> ID：14959501
> 
> 赞同：0
> 
> 时间：2013-02-19T14:09:35.220
> 
> 标签：php

我的文本来自一个充满重音符号的 CSV。我检查是否`mb_check_encoding($my_text, 'utf-8')`是真的，是的，是的。使用此文本，我生成一个变量，该变量`$json`应用

```
json_encode($json,JSON_NUMERIC_CHECK);

var_dump($json) 
```

给出所有奇怪标记正确的数组数组（é、ì 等），但生成的 JSON 文本不正确（例如：`"Donn\u00e9es"`而不是`"Données"`）.

我知道`json_encode`这只适用于 utf8 编码的数据，这就是为什么我在它是 utf8 之前检查它的原因。我也尝试添加一个`header("Content-type: application/json; charset=UTF-8");`但没有成功。

那么这可能是什么原因呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:17:49.243

这就是 JSON 编码“奇怪标记”的方式，即 Unicode 字符。当您`json_decode()`在 JSON 编码的字符串上使用时，它将恢复正常。

# python - 如何从 Python 启动命令行命令

> ID：14959507
> 
> 赞同：11
> 
> 时间：2013-02-19T14:09:46.067
> 
> 标签：python, linux, angstrom-linux

我从调用某些实用程序的命令行中获得了一系列命令。具体来说：

```
root@beaglebone:~# canconfig can0 bitrate 50000 ctrlmode triple-sampling on loopback on
root@beaglebone:~# cansend can0 -i 0x10 0x11 0x22 0x33 0x44 0x55 0x66 0x77 0x88
root@beaglebone:~# cansequence can0 -p 
```

我似乎无法弄清楚（或找到明确的文档）我究竟是如何编写 Python 脚本来发送这些命令的。我以前没有使用过[os 模块](https://docs.python.org/3/library/os.html)，但怀疑这可能是我应该寻找的地方？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:13:23.507

使用 subprocess 可以方便地执行命令行命令并检索输出或是否发生错误：

```
import subprocess
def external_command(cmd): 
    process = subprocess.Popen(cmd.split(' '),
                           stdout=subprocess.PIPE, 
                           stderr=subprocess.PIPE)

    # wait for the process to terminate
    out, err = process.communicate()
    errcode = process.returncode

    return errcode, out, err 
```

例子：

```
print external_command('ls -l') 
```

重新排列返回值应该没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:13:00.603

使用[子进程](http://docs.python.org/2.7/library/subprocess.html#module-subprocess)。

例子：

```
>>> subprocess.call(["ls", "-l"])
0

>>> subprocess.call("exit 1", shell=True)
1 
```

# php - php 如果数据库中存在用户名，则将用户名加一

> ID：14959508
> 
> 赞同：0
> 
> 时间：2013-02-19T14:09:48.697
> 
> 标签：php, mysql

我有点坚持我的代码。

我正在练习并希望达到以下目标。

在用户注册之前，我想检查用户用户名是否存在，如果存在则将名称加一。

所以我的逻辑是这样的。用户给出他/她的名字和姓氏，基于此生成用户名。

**功能**

```
function unique_name($first_name, $last_name) {

$username = strtolower($first_name.'.'.$last_name)

$check = mysqL_query(" SELECT username WHERE username = '".$username."' ");

    if(count($check == 1)) {
        $i = 2;
        foreach($check as $user) {
            return $user['username'].$i;
            $i++;
        }
    } else {
        return $username;
    }
}

$username = unique_name($_POST['first_name'], $_POST['last_name']);
// saveing the increased username 
```

所以实际上脚本应该检查生成的唯一用户名是否存在如果exsits增加，并且即使它存在一个数字也会增加它

**例子**

汤姆安德森注册，用户名将是 tom.anderson，保存为汤姆安德森

第二个汤姆安德森注册，用户名将是tom.anderson，它已经存在，将新的保存为tom.anderson2。

第三个用户注册他也是tom anderson，用户名tom.anderson*存在两次，增加到tom.anderson3。

所以我检查用户是否存在并保存它没有问题，我的问题是，如果存在，如何增加每个用户名？

我不是要任何人为我写这个我只是在寻找一个提示

谢谢

**编辑**

感谢您的回复，但这不起作用

```
if(count($check) == 1) {
    $i = 2;
    foreach($check as $user) {
        return $user['username'].count($check);
        $i++;
    }
} else {
    return $username;
} 
```

这只检查没有数字的用户名，所以如果用户名 tom.anderson 存在，它会增加到 tom.anderson1 但如果 tom.anderson1 也存在，它不会增加到 tom.anderson2

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:14:24.117

`count`除非它是 0，否则你能有一些只附加返回的行的东西吗？

```
if(count($check) > 0) {
   return $user['username'].count($check);
} else {
    return $username;
} 
```

更改 SQL：

```
" SELECT username WHERE username LIKE '".$username."%' " 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:12:00.977

试着像这样给予

```
if(count($check) == 1) {
    $i = 2;
    foreach($check as $user) {
        return $user['username'].count($check);
        $i++;
    }
} else {
    return $username;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:31:08.787

您可以将新字段添加到用户表中，并将其命名为 base_username。他们用给定的用户名获取计数行，并增加每个用户名的计数发现像这样的东西

```
`功能唯一名称（$first_name，$last_name）{
    $unique_name = $username = strtolower($first_name.'.'.$last_name)
    $cnt = get_row(" SELECT COUNT(*) from `users` WHERE base_username = '".$username."' LIMIT 1 ");
    如果（$cnt）{
        $unique_name = $用户名。$cnt + 1;
    }
    返回 $unique_name;
}`

```

# xml - django：从 xml 文件填充 django 模型

> ID：14959509
> 
> 赞同：0
> 
> 时间：2013-02-19T14:09:48.840
> 
> 标签：xml, django-models

有没有可以读取 xml 文件并生成 django 模型的好包？例如，如果这是我的 xml 文件

```
 <address>
    <street>8th Street</street>
    <city>Saskatoon</city>
    <province>SK</province>
    <country>Canada</country>
</address> 
```

然后我希望我的模型生成这样的东西，标签内的数据应该插入数据库。

```
class Address(Model): 

   id =     DecimalField() 
   street = CharField() 
   city =   CharField() 
   province =  CharField() 
   country = CharField() 
```

有没有可以处理这个的包？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T20:20:08.283

我真的不能推荐任何包（我认为可以自己编写），但是要定义字段的类型（例如字符串、十进制、日期等），您可以将 XSD 与 XML 一起使用。

因此，您读取 xml 根元素（如果您在 xml 文件中有一个模型）并为其创建类定义。然后一一读取所有子元素并在模式中查找它们的类型并进行类型调整。因此，输入时您有 xml 和 xsd 文件，输出时您可以使用 python 代码生成文本文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T15:11:24.963

如果您仍然感兴趣，请查看[xml_models](https://pypi.python.org/pypi/xml_models/0.5.3)。它使用 xpath 并且与[lxml](http://lxml.de/)库兼容，该库可以很好地解析 xml。

我还找到（但没有尝试过）[django-xmlmapping](https://pypi.python.org/pypi/django-xmlmapping)。

# java - 如何将音频文件附加到库中？

> ID：14959512
> 
> 赞同：0
> 
> 时间：2013-02-19T14:09:50.907
> 
> 标签：java

我正在使用 Android/Java 开发应用程序。我需要将音频文件列表附加到我的 java 库中。以便开发人员可以使用该库并播放音频文件。如何将音频文件附加到我的 Java 库中以及如何将它们称为文件路径来播放它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:14:28.843

如果您正在创建`Android`库，您可以将音频文件放在`raw`文件夹中。使用您的图书馆的人可以使用`com.example.yourlibrary.R.raw.sample_audio_file`.

我希望这就是你要找的。创建库时将嵌入该文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:16:10.527

如果您有特定的音频文件，则将它们添加到特殊资源文件夹并将它们称为`getResourceAsStream`. 如果您希望用户使用他们自己的文件 - 为文件夹路径提供变量并制作过滤器以仅使用特定文件，即 *.mp3。

如果它们存储在特定的资源文件夹中，为什么不创建特殊`Accessor`的类供开发人员使用呢？就像您将拥有一个`*.jar`文件，该文件将包含单独资源文件夹中的文件，并且`Accessor`可以使用它们。

# java - 用 Java 编写类似 unwind 的清理代码

> ID：14959516
> 
> 赞同：2
> 
> 时间：2013-02-19T14:09:57.513
> 
> 标签：java, exception, goto

假设我的类有一个方法 start() 获取资源和 stop() 释放资源。类的 start 方法可以调用成员对象的 start() 方法。如果其中一个成员对象的 start() 引发异常，我必须确保为 start() 成功的所有成员对象调用 stop()。

```
class X {
    public X ()
    {
        a = new A();
        b = new B();
        c = new C();
        d = new D();
    }

    public void start () throws Exception
    {
        try {
            a.start();
        } catch (Exception e) {
            throw e;
        }

        try {
            b.start();
        } catch (Exception e) {
            a.stop();
            throw e;
        }

        try {
            c.start();
        } catch (Exception e) {
            b.stop();
            a.stop();
            throw e;
        }

        try {
            d.start();
        } catch (Exception e) {
            c.stop();
            b.stop();
            a.stop();
            throw e;
        }
    }

    public void stop ()
    {
        d.stop();
        c.stop();
        b.stop();
        a.stop();
    }

    private A a;
    private B b;
    private C c;
    private D d;
} 
```

注意清理代码的二次增长。进行清理的最佳方法是什么（最少的代码）？在 CI 中，可以通过函数底部的清理代码和“goto”轻松地做到这一点，以跳转到适当的位置，但是 Java 没有 goto。请注意，不允许在尚未启动 () 的对象上调用 stop() - 我正在寻找与上述完全相同但更短的代码。

到目前为止，我找到的唯一解决方案是使用布尔值来记住开始的内容，如下所示：

```
public void start () throws Exception
{
    boolean aStarted = false;
    boolean bStarted = false;
    boolean cStarted = false;
    boolean dStarted = false;

    try {
        a.start();
        aStarted = true;
        b.start();
        bStarted = true;
        c.start();
        cStarted = true;
        d.start();
        dStarted = true;
    } catch (Exception e) {
        if (dStarted) d.stop();
        if (cStarted) c.stop();
        if (bStarted) b.stop();
        if (aStarted) a.stop();
        throw e;
    }
} 
```

我知道“finally”和“try-with-resources”，但这些似乎都不适用这里，因为如果没有例外，资源不应该被释放。

PS这不是关于我使用异常或我的程序设计的问题。这特别是关于在初始化代码失败的情况下进行清理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:17:07.207

如何将你开始的东西添加到堆栈中，然后当你需要停止东西时，将所有东西从堆栈中弹出并停止它。

```
private Deque<Stoppable> toStop = new ArrayDeque<Stoppable>();

public void start() throws Exception {
  try {
    start(a);
    start(b);
    start(c);
    start(d);
  } catch (Exception e) {
    stop();
    throw e;
  }
}

private void start(Stoppable s) throws Exception {
  s.start();
  toStop.push(s);
}

public void stop() {
  while (toStop.size > 0) {
    toStop().pop().stop();
  }
} 
```

`stop()`这需要您通过接口或子类化开始拥有某种共同点的东西，但我想他们可能已经这样做了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T14:18:55.107

```
public class X
{
    private final List <Stoppable> stoppables = 
        new ArrayList <Stoppable> ();

    private void start (StartStoppable x)
    {
        x.start ();
        stoppables.add (x);
    }

    public void startAll ()
    {
        try
        {
            start (a);
            start (b);
            start (c);
            start (d);
        }
        catch (Throwable ex)
        {
            stopAll ();
            ex.printStackTrace ();
        }
    }

    public void stopAll ()
    {
        for (Stoppable s: stoppables)
        {
            try
            {
                s.stop ();
            }
            catch (Throwable ex)
            {
                ex.printStackTrace ();
            }
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T14:22:15.697

如果您对代码的线性爆炸感到满意，则可以使用`start`如下结构的方法：

```
public void start () throws Exception
{
    a.start();
    try {
        b.start();
        try {
            c.start();
            try {
                d.start();
            } catch (Exception e) {
                c.stop();
                throw e;
            }
        } catch (Exception e) {
            b.stop();
            throw e;
        }
    } catch (Exception e) {
        a.stop();
        throw e;
    }
} 
```

如果您要启动/停止的项目不止几项，请使用`List`其他人建议的方法。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T23:16:14.650

虽然我很欣赏给出的所有想法，但我没有找到适合广泛使用我的代码的任何想法。特别是，基于堆栈/列表的方法存在问题，原因有两个：

1.  start() 包装器不允许将参数传递给它调用的对象的 start 方法。
2.  一切都必须实现像 Stoppable 这样的接口。这是有问题的，因为该技术需要适用于外部提供的类和函数，可能没有 start() 方法，但有些不同。

即使对象没有启动也只使 stop() 可调用的想法不适合同样的原因 - 接口可能超出程序员的控制。

最后我已经解决了这个问题，我发现它需要最少的样板。另一个好处是即使对象没有启动，实际上也可以调用生成的 stop() 方法（但这并不会使该方法毫无意义，因为成员的启动和停止函数可能超出程序员的控制范围）。

```
class X {
    public X ()
    {
        a = new A();
        b = new B();
        c = new C();
        d = new D();
    }

    public void start () throws Exception
    {
        assert(state == 0);
        try {
            a.start();
            state = 1;
            b.start();
            state = 2;
            c.start();
            state = 3;
            d.start();
            state = 4;
        } catch (Exception e) {
            stop();
            throw e;
        }
    }

    public void stop ()
    {
        if (state >= 4) d.stop();
        if (state >= 3) c.stop();
        if (state >= 2) b.stop();
        if (state >= 1) a.stop();
        state = 0;
    }

    private int state;
    private A a;
    private B b;
    private C c;
    private D d;
} 
```

# jquery - jQuery 插件：支持文件上传选项的 crud 表插件

> ID：14959519
> 
> 赞同：3
> 
> 时间：2013-02-19T14:10:01.317
> 
> 标签：jquery, jquery-plugins

我正在使用 jtable 插件。在我满足在我的表单中上传一个文件或多个文件（大多数图像）的需要之前，它工作正常。我研究发现jtable没有这个功能。是否有任何支持多个文件上传的 jquery 插件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:23:37.470

您可能不会找到与 jquery 网格插件捆绑在一起的图像上传功能，因为它们是单独的关注点。我建议在您的行的添加/编辑上构建/包含文件上传插件/ajax 函数，然后将其与该行数据或 json 对象一起存储。

对于一个真正高级的 jQuery 表格插件，我通常会转向[http://www.trirand.com/blog/jqgrid/jqgrid.html](http://www.trirand.com/blog/jqgrid/jqgrid.html) jqGrid，尽管它在大多数项目中都过于矫枉过正。

对于一个处理多个文件的好上传插件，请查看[http://blueimp.github.com/jQuery-File-Upload/](http://blueimp.github.com/jQuery-File-Upload/)

您应该能够将上传插件连接到您的网格行数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-18T07:34:09.523

您好，您可以在 jtable 上使用 Uploadify。您可以参考我在上一篇文章中所做的步骤（une6）

[https://github.com/hikalkan/jtable/issues/321](https://github.com/hikalkan/jtable/issues/321)

花了一段时间才弄清楚，但我希望它也能帮助你

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-17T08:41:06.880

只需按照以下步骤 1.将此代码添加到字段下方的 jtable javascript 代码“ image_upload: { title: 'P. Image', list:true, width: '20%',

```
 display: function (data) {
                  return '<div id='+ data.record.PersonId + '><form id="form'+ data.record.PersonId +'" method="post" enctype="multipart/form-data" action="ajaximage.php"><input type="file" name="photoimg" id="'+ data.record.PersonId +'" class="upload"/><input type="hidden"  value="'+ data.record.PersonId +'"/></form></div><div id="preview'+ data.record.PersonId +'"></div>';
                       }" 
```

在“data.record.PersonId”中，PersonId 由 jtable 从数据库返回

1.  [从http://www.9lessons.info/2011/08/ajax-image-upload-without-refreshing.html](http://www.9lessons.info/2011/08/ajax-image-upload-without-refreshing.html)下载脚本

2.  解压缩文件夹
    复制粘贴文件 jquery.form.js 并将此文件包含到您的页面
3.  将此代码添加到标题

    $(文档).ready(函数() {

    ```
     $('.upload').live('change', function()          { 
           var id=this.id;
               $("#preview"+id).html('');
            $("#preview"+id).html('<img src="img/loader.gif" alt="Uploading...."/>');
         $("#form"+id).ajaxForm({
                    target: '#preview'+id
        }).submit();

        });
    }); 
    ```

4.  使文件夹名称上传以存储您的文件或将其自定义为 ajaximage.php

5.  将解压缩目录中的 paste loader.gif 复制到您的目录并享受

# php - 重写php代码以避免打开流失败：HTTP请求失败

> ID：14959527
> 
> 赞同：0
> 
> 时间：2013-02-19T14:10:22.863
> 
> 标签：php

我一直在寻找关于如何解决 php 代码中这个常见错误的正确答案：`failed to open stream: HTTP request failed!`我真的认为解决方案在于重写代码以绕过代码中的`User-Agent`http 标头。我需要访问的文件与此代码位于同一台服务器上。我需要有关如何重写此脚本的功能部分的帮助：

```
function runapp($dir,$latdeg,$latmin,$latsec,$longdeg,$longmin,$longsec)
{
    global $_english;

    $query= ($_english ? 'http://esnig.org/cgi-bin/ntv2_geo2_e.cgi' : 'http://esnig.org/cgi-bin/ntv2_geo2_f.cgi').
        '?' . PAR_DIR     .'=' . $dir .
        '&' . PAR_LATDEG  .'=' . $latdeg .
        '&' . PAR_LATMIN  .'=' . $latmin .
        '&' . PAR_LATSEC  .'=' . $latsec .
        '&' . PAR_LONGDEG .'=' . $longdeg .
        '&' . PAR_LONGMIN .'=' . $longmin .
        '&' . PAR_LONGSEC .'=' . $longsec;

    $response=file($query); 

    foreach ($response as $value)
    {
        echo $value;
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:16:44.290

来自 file_get_content 手册页：

> 注意：如果您要打开带有特殊字符（例如空格）的 URI，则需要使用 urlencode() 对 URI 进行编码。

因此，请尝试对您的查询参数进行 urlencode 之前。此外，我建议使用[curl](http://php.net/manual/en/book.curl.php)从互联网 url 获取文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:21:35.447

嗯，当我向这些 URL 发出请求时，我收到 403 Forbidden 响应。会是这样吗？

如果没有，您似乎没有测试 runapp() 函数参数是否具有非空值。它们可能是空字符串。如果您执行一些值为空的请求会发生什么？你会得到格式错误的查询参数。

简而言之：您应该检查参数的长度或 !empty 或类似的，并且仅在设置了它们时将它们附加到查询字符串中。

# ibm-mobilefirst - worklight - 关于在 tomcat 中安装 worklight 服务器时出错

> ID：14959530
> 
> 赞同：-1
> 
> 时间：2013-02-19T14:10:33.800
> 
> 标签：ibm-mobilefirst

大家好，我在 Windows XP 中安装了带有 tomcat 的 Worklight 服务器。之后我启动了tomcat，我试图打开worklight控制台

```
 start --> programs --> Ibm Worklight --> worklight console

        by this i am getting error like requested resource not found. I dont know what 
exact problem was ? please guide me how to open the worklight console when installing
worklight server with tomcat? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T16:28:06.183

在您首先启动 IBM Worklight Server 之前，无法访问控制台。控制台只是服务器的 Web GUI，因此快捷方式可能只是指向指向已停止服务器的 Web 位置。在服务器运行之前，在此之上没有控制台层。

TOMCAT_HOME\bin\startup.bat

此外，这里是 IBM 文档的链接。

[http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/index.jsp?topic=%2Fcom.ibm.worklight.help.doc%2Fadmin%2Ft_starting_ibm_worklight_server_apache_tom.html](http://pic.dhe.ibm.com/infocenter/wrklight/v5r0m5/index.jsp?topic=%2Fcom.ibm.worklight.help.doc%2Fadmin%2Ft_starting_ibm_worklight_server_apache_tom.html)

# jquery - 表单验证失败

> ID：14959534
> 
> 赞同：0
> 
> 时间：2013-02-19T14:10:49.683
> 
> 标签：jquery, asp.net-mvc-4

我已经完成了表单输入框的验证。但是当我点击提交时，我正在使用 JQuery 调用，因此表单验证失败。然后我按照下面修改了代码以覆盖验证插件的提交处理程序。现在，当我在不输入任何详细信息的情况下单击保存按钮时，什么也没有发生并且表格停留在那里。即使我们输入数据并尝试提交表单，它也会保留在那里。请任何人都可以帮助解决这个问题。我使用以下参考资料。

```
References
---------- 

<script src="../../Scripts/jquery.validate.min.js" type="text/javascript"></script>
<script src="../../Scripts/jquery.validate.unobtrusive.min.js" type="text/javascript"></script>
<script src="http://code.jquery.com/jquery-1.8.3.min.js" type="text/javascript"></script>
<script src="http://jzaefferer.github.com/jquery-validation/jquery.validate.js"    type="text/javascript"></script>

 AJAX Call
 ---------

   $("#addForm").validate(
        {

                submitHandler: function (form) {
                    var clientName = $('#Client_ClientName').val();
                    var clientTypeId = $('#ClientTypeSelectId').val();
                    var clientCode = $('#Client_ClientCode').val();

               $.ajax({
                        type: "POST",
                        async: false,
                        url: "/Client/AddClient",
                        cache: false,
                        data: { "clientName": clientName, "clientTypeId": clientTypeId, "clientCode": clientCode },
                        dataType: "json",
                        error: function (request) {
                            alert(request.responseText);
                        },
                        success: function (result) {
                            //alert('Successfully Inserted Client');
                            $.ajax({
                                url: "/Client/ClientGrid",
                                type: 'GET',
                                datatype: 'json',
                                success: function (data) {
                                    $('#grid').html(data);
                                    //alert('got here with data');
                                },
                                error: function () {
                                    //alert('something bad happened');
                                }
                            });

                            $('#myClientDialogContainer').dialog('close');
                        }
                    });
                    return false;
                }
            }); 
```

问候，毗湿奴

# javascript - 显示当前时间的脚本显示 12:5 而不是 12:05

> ID：14959535
> 
> 赞同：-2
> 
> 时间：2013-02-19T14:10:52.463
> 
> 标签：javascript, jquery, time

我编写了一些自定义脚本以显示世界各地不同时区的时间时遇到问题。如果分钟数少于 10 分钟，它不会说 HH:MM，而是说 HH:M。我怎样才能改变它，如果它小于 10，它是 HH：0M？

截屏：

![](../Images/1e2ddc86e3c2173f2f134122dfe947c5.png)

脚本：

```
$(document).ready(function() {
    function calculateTime(offset) {
        var currentDate = new Date()
        utc = currentDate.getTime() + (currentDate.getTimezoneOffset() * 60000);
        newDate = new Date(utc + (3600000*offset));
        return (newDate.getHours() === 0) ? 12 : ((newDate.getHours() > 12) ? newDate.getHours() - 12 : newDate.getHours()) + ' : ' + newDate.getMinutes() + ' ' + ((newDate.getHours() >  11) ? 'PM' : 'AM');
    }
    function displayTimes() {
        $(".chicago").html(calculateTime("-6"));
        $(".london").html(calculateTime("+1"));
        $(".shanghai").html(calculateTime("+8"));
    };
    displayTimes();
    window.setInterval(displayTimes, 5000);
}); 
```

HTML：

```
<table>
    <tr>
        <td><strong>Chicago</strong></td>
        <td align="right" class="time chicago">12:00PM</td>
    </tr>
    <tr>
        <td><strong>London</strong></td>
        <td align="right" class="time london">12:00PM</td>
    </tr>
    <tr class="last">
        <td><strong>Shanghai</strong></td>
        <td align="right" class="time shanghai">12:00PM</td>
    </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:14:21.900

函数[Date.getMinutes()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/getMinutes)返回一个介于 0 和 59 之间的数字。因此，您需要检查您的时间是否少于 10 分钟，如果是，则添加前导 0。如下所示：

```
var minutes = newDate.getMinutes();
if(minutes < 10) {
    minutes = '0' + minutes;
}
return (newDate.getHours() === 0) ? 12 : ((newDate.getHours() > 12) ? newDate.getHours() - 12 : newDate.getHours()) + ' : ' + minutes + ' ' + ((newDate.getHours() >  11) ? 'PM' : 'AM'); 
```

使用您的整个代码：

```
$(document).ready(function() {
    function calculateTime(offset) {
        var currentDate = new Date()
        utc = currentDate.getTime() + (currentDate.getTimezoneOffset() * 60000);
        newDate = new Date(utc + (3600000*offset));
        var minutes = newDate.getMinutes();
        if(minutes < 10) {
            minutes = '0' + minutes;
        }
        return (newDate.getHours() === 0) ? 12 : ((newDate.getHours() > 12) ? newDate.getHours() - 12 : newDate.getHours()) + ' : ' + minutes + ' ' + ((newDate.getHours() >  11) ? 'PM' : 'AM');
    }
    function displayTimes() {
        $(".chicago").html(calculateTime("-6"));
        $(".london").html(calculateTime("+1"));
        $(".shanghai").html(calculateTime("+8"));
    };
    displayTimes();
    window.setInterval(displayTimes, 5000);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:21:09.223

这称为零填充。基本上，您将数值转换为字符串并`"0"`仅在字符小于 10 时添加字符。

```
function zeroPad(num) {
    if ( num<10 ) {
        return "0"+num;
    } else {
        return num.toString();
    }
} 
```

用法：

```
zeroPad(newDate.getMinutes()) // returns strings "05", or "15", or "01" etc. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:15:59.107

尝试将数字填零。

```
function zeroFill(number, width) {
    width -= number.toString().length;
    if (width > 0) {
        return new Array(width + (/\./.test(number) ? 2 : 1)).join('0') + number;
    }
    return number + ""; // always return a string
}

return (newDate.getHours() === 0) ? 12 : ((newDate.getHours() > 12) ? zeroFill(newDate.getHours() - 12, 2) : zeroFill(newDate.getHours(), 2)) + ' : ' + zeroFill(newDate.getMinutes(),2) + ' ' + ((newDate.getHours() >  11) ? 'PM' : 'AM'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T14:17:05.460

尝试像下面它会工作......

```
(newDate.getMinutes() < 10 ? "0" : "" ) + newDate.getMinutes() 
```

在您的代码中添加：

```
return (newDate.getHours() === 0) ? 12 : ((newDate.getHours() > 12) ? newDate.getHours() - 12 : newDate.getHours()) + ' : ' + (newDate.getMinutes() < 10 ? "0" : "" ) + newDate.getMinutes() + ' ' + ((newDate.getHours() >  11) ? 'PM' : 'AM'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T14:17:34.967

从函数本身中抽象出来，您可以检查分钟数是否小于 10 并用 0 填充结果。如果您愿意，可以使用三元运算符来内联。否则你可能想检查已经回答的类似问题：[jQuery Format Time](https://stackoverflow.com/questions/8801254/jquery-format-time)

# sql - 使用总计数据透视 sql

> ID：14959536
> 
> 赞同：1
> 
> 时间：2013-02-19T14:10:53.243
> 
> 标签：sql, sql-server, pivot

现在我有一个查询要我这个；

```
Transaction Type    Product 1 (£)   Product 2 (£)   Product 3 (£)

Credit Card 1   739.02  920.70
Debit Card  3   987.34  170.13
Cheques / P Orders  7   4068.92 3442.00
Credit Card - Web   1   474.21  515.07 
```

但现在我需要最后一行的总数。

```
GRAND TOTAL 12  6269.49 5047.90 
```

看不到对我的数据透视 sql 使用汇总？有什么想法可以用来获得最后一行吗？

```
DECLARE @ProductTypes AS NVARCHAR(MAX), @Query1  AS NVARCHAR(MAX);

SELECT @ProductTypes = STUFF((SELECT DISTINCT ',' + QUOTENAME([Description]) 
                              FROM [X].[dbo].[PRODUCT] 
                              FOR XML PATH(''), 
                              TYPE).value('.', 'NVARCHAR(MAX)'),1,1,'')

SET @Query1 = '

;WITH CTE AS
(

    SELECT PT.[description]       AS [Transaction Type], 
           Sum (P.original_amount) AS [AMOUNT (£) CREDIT], 
           PR.[description]        AS [Product Type] 
    FROM    [X].[dbo].[Table1] P
join [X].[dbo].[Table2] PT on P.PAYMENT_ID=PT.PAYMENT_TYPE_ID
join [X].[dbo].[Table3] SO on SO.PAYMENT_TYPE_ID=P.PAYMENT_TYPE_ID
join [X].[dbo].[Table4] OI on OI.ORDER_ID=SO.SITE_ORDER_ID
join [C].[dbo].Table5] PR on PR.Product_id=OI.PRODUCT_ID
group by PT.DESCRIPTION, PR.DESCRIPTION
)
SELECT *
FROM CTE AS T
PIVOT(SUM([AMOUNT (£) CREDIT]) FOR [Product Type] IN ('+@ProductTypes+')) AS PT
'

EXEC(@Query1) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:29:32.403

您可以使用它[`ROLLUP`](http://msdn.microsoft.com/en-us/library/ms189305%28v=sql.90%29.aspx)来获得您想要的结果，您只需稍微更改您的代码即可。

您的代码将与此类似：

```
DECLARE @ProductTypes AS NVARCHAR(MAX), 
    @ProductTypesSum AS NVARCHAR(MAX),
    @Query1  AS NVARCHAR(MAX);

SELECT @ProductTypes = STUFF((SELECT DISTINCT ',' + QUOTENAME([Description]) 
                              FROM [X].[dbo].[PRODUCT] 
                              FOR XML PATH(''), 
                              TYPE).value('.', 'NVARCHAR(MAX)'),1,1,'')

SELECT @ProductTypesSum = STUFF((SELECT DISTINCT ', Sum(' + QUOTENAME([Description])+') as '+QUOTENAME([Description])
                              FROM [X].[dbo].[PRODUCT] 
                              FOR XML PATH(''), 
                              TYPE).value('.', 'NVARCHAR(MAX)'),1,1,'')

SET @Query1 = '

;WITH CTE AS
(
    SELECT PT.[description]       AS [Transaction Type], 
           Sum (P.original_amount) AS [AMOUNT (£) CREDIT], 
           PR.[description]        AS [Product Type] 
    FROM    [X].[dbo].[Table1] P
    join [X].[dbo].[Table2] PT on P.PAYMENT_ID=PT.PAYMENT_TYPE_ID
    join [X].[dbo].[Table3] SO on SO.PAYMENT_TYPE_ID=P.PAYMENT_TYPE_ID
    join [X].[dbo].[Table4] OI on OI.ORDER_ID=SO.SITE_ORDER_ID
    join [C].[dbo].Table5] PR on PR.Product_id=OI.PRODUCT_ID
    group by PT.DESCRIPTION, PR.DESCRIPTION
)
SELECT 
    case 
        when [Transaction Type] is not null 
        then [Transaction Type] 
        else ''Grand Total'' end as [Transaction Type],
    '+@ProductTypesSum+'
FROM CTE AS T
PIVOT
(
    SUM([AMOUNT (£) CREDIT]) 
    FOR [Product Type] IN ('+@ProductTypes+')
) AS PT
group by [Transaction Type] with rollup'

EXEC(@Query1) 
```

请参阅带有修改代码的[SQL Fiddle 演示。](http://sqlfiddle.com/#!3/427a9/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-05-26T19:50:42.037

您可以动态旋转透视列中的所有值

```
DECLARE @cols AS NVARCHAR(MAX),
        @query  AS NVARCHAR(MAX)

select @cols = (SELECT string_agg ( QUOTENAME(PivotColumnName) ,',')

                   From   
                    (
                      select distinct(PivotColumnName)
                      from yourtable
                    )
                        )

 set @query = N'SELECT * from 
         (
            select value, PivotColumnName
            from yourtable
        ) x
        pivot 
        (
            max(value)
            for PivotColumnName in (' + @cols + N')
        ) p '

            exec sp_executesql @query; 
```

# actionscript-3 - 火花数据网格可选

> ID：14959541
> 
> 赞同：0
> 
> 时间：2013-02-19T14:11:02.850
> 
> 标签：actionscript-3, text, datagrid, flex4, flex-spark

有没有办法让 spark datagrid 单元格中的文本可选？我不想使单元格可编辑。

我尝试过扩展 DefaultGridItemRenderer 并在其上设置 selectable = true ，但这无济于事。

我正在使用 Flex sdk 4.9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:55:22.157

DefaultGridItemRenderer 使用 FTETextField 来显示文本，但 FTETextField 中的文本不能设置为可选择的。

而是使用 UITextFieldGridItemRenderer；这确实允许您设置 selectable=true。

最简单的方法是创建 UITextFieldGridItemRenderer 的子类，并在其构造函数中添加：

```
selectable = true; 
```

然后将新类设置为数据网格的渲染器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-11T20:09:57.073

如果您不想创建自定义类只是为了让您的文本可选择，那么使用 ClassFactory 也可以。在 actionscript 函数中，使用 ClassFactory 创建 UITextFieldGridItemRenderer 的实例，通过属性设置“可选择”，并返回渲染器实例。要应用项目渲染器，您需要将该函数绑定到列或网格的“itemRenderer”属性。

这是一个简单的例子：

```
public function myRendererFactory():ClassFactory
    {
        var myRenderer:ClassFactory=new ClassFactory(UITextFieldGridItemRenderer);
        myRenderer.properties={selectable: true};
        return myRenderer;
    }
...
<s:GridColumn itemRenderer="{myRendererFactory()}"/>
... 
```

# c# - 如何从 Windows Phone 8 应用程序发送电子邮件？

> ID：14959546
> 
> 赞同：13
> 
> 时间：2013-02-19T14:11:24.897
> 
> 标签：c#, windows-phone-8, smtpclient, mailmessage

在一个 Windows 窗体项目中，我使用了 SmtpClient 和 MailMessage 类来通过电子邮件发送信息。

是否有适用于 Windows Phone 8 的等价物？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-20T00:40:51.830

您可以使用`Microsoft.Phone.Tasks.EmailComposeTask`内置的邮件客户端来撰写电子邮件：

```
 var task = new EmailComposeTask {To = email};
  task.Show(); 
```

或者，您可以将数据发布到第三方服务，例如`SendGrid`通过 API 发送电子邮件。

Windows Phone 上没有可用的**SMTP** API。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-27T09:00:34.973

这真的很简单！这是来自[MSDN](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh394003(v=vs.105).aspx)：

首先，您应该添加：

```
 using Microsoft.Phone.Tasks; 
```

到您的代码中，然后为个性化并转到邮件应用程序添加以下内容：

```
 EmailComposeTask emailComposeTask = new EmailComposeTask();

    emailComposeTask.Subject = "message subject";
    emailComposeTask.Body = "message body";
    emailComposeTask.To = "recipient@example.com";
    emailComposeTask.Cc = "cc@example.com";
    emailComposeTask.Bcc = "bcc@example.com";

    emailComposeTask.Show(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-19T23:21:18.180

您需要使用`sharing`功能。它将允许您创建一个电子邮件模板（设置主题、正文、收件人等）并将其打开给用户，因此他或她只需单击“发送”。没有 smtp 客户端之类的东西，无论好坏。[下面](https://stackoverflow.com/questions/13589448/sharing-from-windows-phone-8)是对从 Windows Phone 8 发送内容的选项的很好描述。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-20T12:05:52.210

您还可以使用第三方库[LiveMailMessage](http://windowsphonegeek.com/tips/how-to-send-automated-emails-with-attachments-from-windows-phone-apps "实时邮件消息")。您必须为此付费，但它允许您在不启动 EmailComposeTask 的情况下发送电子邮件。如果需要，它还可以让您添加附件和类似的东西。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-01T12:51:26.577

如果您正在开发通用 WinRT Windows Phone 应用程序，则可以使用`Windows.ApplicationModel.Email.EmailMessage`命名空间，因为`Microsoft.Phone.Tasks.EmailComposeTask`命名空间不适用于 WinRT 应用程序。

然后，使用此代码创建并启动新电子邮件。

```
// Create your new email message.
var em = new EmailMessage() ;

// Add as much EmailRecipient in it as you need using the following method.
em.To.Add(new EmailRecipient("yourname@yourdomain.com"));
em.Subject = "Your Subject...";
em.Body = "Your email body...";
// You can add an attachment that way.
//em.Attachments.Add(new EmailAttachment(...);

// Show the email composer.
await EmailManager.ShowComposeNewEmailAsync(em); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-05T09:25:44.903

据我搜索这个**没有 System.Net.Mail 在 Windows Phone 中不可用**

对于许多其他情况（尤其是反馈表），您最好连接到专门的 Web 服务，而不是通过电子邮件绕道。

而且，如果您正在编写电子邮件客户端并且特别需要连接到邮件服务器，那么框中没有任何内容，因此您需要连接到特定于服务的 API（许多现代邮件服务支持 REST 客户端）或实现自己 SMTP。

创建一个将 Json 发送到服务器的 API 将很容易，并且 SMTP 将在那里配置。

# html - 复杂的 CSS 导航错误

> ID：14959559
> 
> 赞同：1
> 
> 时间：2013-02-19T14:12:06.610
> 
> 标签：html, css

我正在尝试创建一个相当复杂的 3D-ish，键入导航按钮，而不使用任何图像，只使用 CSS！这有点挑战，我的船已经停飞了，因为我遇到了一个小问题。

我希望我的按钮填充橙色背景色，但似乎只填充了文本周围的背景？任何人都知道为什么它不会填满所有空间。

谢谢！

```
<div id="navigation">
    <ul>
        <li><a href="#about">about</a></li>
        <li><a href="#work">work</a></li>
        <li><a href="#blog">blog</a></li>
        <li><a href="#contact">contact</a></li>
    </ul>
</div> 
```

CSS

```
#navigation{
    position: relative;
    top:20px;
    display: inline-block;
    vertical-align: top;
    z-index: 99999;
    background:rgba(0,0,0,0.07);
    padding:6px 6px 11px 6px;
    border-radius: 3px;
    box-shadow:inset 0px 1px 0px rgba(0,0,0,0.1), 0px 1px 0px #fff;
}
#navigation ul{
    border-radius:3px;
    box-shadow: 0px 5px 0px #c6412b;    
}
#navigation ul li {
    display: inline-block;
    vertical-align: top;
}
#navigation ul li a {
    background:#e9573f;
    font-size:22px;
    display: block;
    color: #fff;
    border-right:1px solid #d44a34;
    border-left:1px solid rgba(255, 255, 255,0.2);
    text-shadow: 0px 1px 0px rgba(0,0,0,0.5);
    border-bottom:1px solid rgba(255,255,255,0.2);
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:16:16.363

`background:#e9573f;`从移动`#navigation ul li a`到`#navigation ul`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:17:52.533

您的`<li>`元素设置为显示`inline-block`。因此，元素之间的空格（即换行符和缩进空格）呈现为按钮之间的空格。

要删除 s 之间的空格`<li>`，请删除换行符：

```
<li><a href="#about">about</a></li><li><a href="#work">work</a></li><li><a href="#blog">blog</a></li><li><a href="#contact">contact</a></li> 
```

要为您的按钮添加更多空间，请在您`<li>`的 s 中添加一个填充。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T17:35:50.910

这是使它工作的 CSS，无需对您的 html 进行任何编辑。

这是添加了 10px 填充的 jsfiddle：http: [//jsfiddle.net/hDVUE/1/](http://jsfiddle.net/hDVUE/1/)

```
#navigation{
    position: relative;
    top:20px;
    display: inline-block;
    vertical-align: top;
    z-index: 99999;
    background:rgba(0,0,0,0.07);
    padding:6px 6px 11px 6px;
    border-radius: 3px;
    box-shadow:inset 0px 1px 0px rgba(0,0,0,0.1), 0px 1px 0px #fff;
}
#navigation ul{
    float:left;
    border-radius:3px;
    box-shadow: 0px 5px 0px #c6412b;    
}
#navigation ul li {
    float:left;
    vertical-align: top;
}
#navigation ul li a {
    background:#e9573f;
    font-size:22px;
    display: block;
    color: #fff;
    border-right:1px solid #d44a34;
    border-left:1px solid rgba(255, 255, 255,0.2);
    text-shadow: 0px 1px 0px rgba(0,0,0,0.5);
    border-bottom:1px solid rgba(255,255,255,0.2);
} 
```

# function - 单个类的所有方法的函数类型 - 在 Scala 中

> ID：14959561
> 
> 赞同：1
> 
> 时间：2013-02-19T14:12:09.070
> 
> 标签：function, scala, methods

不知道如何正确地制定这个（因此，如何查找），但这里有：

我了解应用于对象的方法如何成为函数对象。例如：

```
case class User(name: String, age: Int)
val user = User("", 0)
user.name _   // () => String 
```

所以，如果我有一个方法 `def meth(f: () => String)`，我可以这样做：`meth(user.name _)`

是否可以定义具有**类****方法** 作为实例的类型`User`？（从这些方法中获得的函数对象，更准确地说）

换句话说，为了能够做到这一点， in `f`的类型是什么： 和`def meth(f: ???)``meth(user.name _)``meth(user.age _)`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T21:54:07.943

我想这样做的唯一方法是使用宏。我曾经创建了一个执行以下操作的宏（请注意，当前实现中的一些细节发生了变化，因此是空的）。

```
case class Metadata(instance: AnyRef, name: String) {

  def value = ??? // use reflection to invoke `name` on `instance`
}

object Metadata extends ((AnyRef, String) => Metadata) {

  implicit def anyToMetadata(sym: Any): Metadata = 
    macro MetadataMacro.anyToMetadataImpl
}

private[staticReflection] object MetadataMacro {

  def anyToMetadataImpl(c: Context)(sym: c.Expr[Any]): c.Expr[Metadata] = {

    import c.universe._

    val metadata = // match the tree and create the appropriate metadata instance

    c.Expr(metadata)
  }
} 
```

在代码中，您将像这样使用它：

```
case class User(name:String)

def test(metadata:Metadata) {
  println(metadata.name + "->" + metadata.value)
}

val u = User("test")

test(u.name) // name -> test 
```

几乎一年前有效的代码可以在这里找到：[ee/scala/staticReflection/Metadata.scala](http://code.google.com/p/scala-implicit-metadata-plugin/source/browse/trunk/staticReflection/src/ee/scala/staticReflection/Metadata.scala)。更多关于[宏现在的](http://docs.scala-lang.org/overviews/macros/overview.html)信息。

如果这是您要查找的内容，请告诉我，以便我查看是否可以将原始版本转换为工作版本。

* * *

## 编辑

我设法让旧的工作。要使用它，只需将代码复制粘贴到一个单独的项目中（我使用 Eclipse），然后通过`Java Build Path`. 工作版本：

```
package ee.scala.staticReflection

import scala.language.experimental.macros
import scala.reflect.macros.Context
import language.implicitConversions

case class Metadata(instance: AnyRef, name: String) {
  // any comments on how to improve this part are welcome
  val runtimeUniverse = scala.reflect.runtime.universe
  val mirror = runtimeUniverse.runtimeMirror(getClass.getClassLoader)
  val instanceMirror = mirror.reflect(instance)
  val method = instanceMirror.symbol.selfType.member(runtimeUniverse newTermName name).asMethod
  val methodMirror = instanceMirror.reflectMethod(method)

  def value = methodMirror()
}

object Metadata extends ((AnyRef, String) => Metadata) {

  implicit def anyToMetadata(sym: Any): Metadata = macro MetadataMacro.anyToMetadataImpl
}

private[staticReflection] object MetadataMacro {

  def anyToMetadataImpl(c: Context)(sym: c.Expr[Any]): c.Expr[Metadata] = {
    import c.universe._

    def createMetadataInstance(select: Select): Tree =
      treeBuild.mkMethodCall(
        c.mirror.staticModule("ee.scala.staticReflection.Metadata"),
        newTermName("apply"),
        List(select.qualifier, Literal(Constant(select.name.toString))))

    val metadata = sym.tree match {
      //normal select
      case select: Select => createMetadataInstance(select)

      //could be a call using a right associative operator
      case Ident(name) =>
        c.enclosingMethod.collect {
          case ValDef(_, refName, _, select: Select) if refName == name => createMetadataInstance(select)
        }
          .headOption
          .getOrElse(throw new Exception("Could not find ValDef for " + name))

      case _ => throw new Exception("Could not create metadata")
    }

    c.Expr(metadata)
  }
} 
```

* * *

## 编辑 2

将上述所有内容应用于原始海报的问题。你可以像这样使用它

```
case class User(name: String, age: Int)
val user = User("", 0)

def meth(metadata: Metadata) = {
  println(metadata.name + "->" + metadata.value)
}

meth(user.name)
meth(user.age) 
```

请注意，该解决方案与建议的不同，但在`meth`函数内您可以执行相同的操作（更均匀一些）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:40:48.990

我相信您正在寻找的是 Scala 的“结构类型”（不是真正的 Scala 创新）。

它捕获非标称类型，但它在 JVM 上的实现需要在代码中您要实际访问或调用结构类型指定的成员的位置使用反射。因此，在 Scala 中使用结构类型会产生相当大的开销。（我记得听过有关为所需的反射派生信息实现某种缓存的讨论，但我不知道是否曾经实现过）。

# java - Java - 尝试使用 mp3plugin 播放 mp3 文件时出错

> ID：14959566
> 
> 赞同：0
> 
> 时间：2013-02-19T14:12:20.487
> 
> 标签：java, plugins, jar, mp3, javax.sound.sampled

我正在编写一个音乐可视化器，并尝试使用 mp3plugin ( [http://pscode.org/lib/mp3plugin.jar](http://pscode.org/lib/mp3plugin.jar) ) 在 java 中播放 mp3 文件。但是我遇到了一个错误，可能是由于我缺乏使用这个插件和编码音乐的经验。

我已经用各种 mp3 文件测试了这段代码，都存在同样的问题，我相信我可以有信心排除 mp3 文件有问题。

我的代码如下：

```
AudioInputStream audioIn;
try {
    JS_MP3FileReader m = new JS_MP3FileReader();
    audioIn = m.getAudioInputStream(new File(ex.trackname));
    //audioIn = AudioSystem.getAudioInputStream(new File(ex.trackname));
    // Get a sound clip resource.
    Clip clip = AudioSystem.getClip();
    // Open audio clip and load samples from the audio input stream.
    clip.open(audioIn);
    clip.start();
} catch (Exception e) {
    e.printStackTrace();
} 
```

我得到的错误：

```
javax.sound.sampled.LineUnavailableException: line with format MPEG1L3 48000.0 Hz, unknown bits per sample, stereo, unknown frame size, unknown frame rate,  not supported.
at com.sun.media.sound.DirectAudioDevice$DirectDL.implOpen(Unknown Source)
at com.sun.media.sound.DirectAudioDevice$DirectClip.implOpen(Unknown Source)
at com.sun.media.sound.AbstractDataLine.open(Unknown Source)
at com.sun.media.sound.DirectAudioDevice$DirectClip.open(Unknown Source)
at com.sun.media.sound.DirectAudioDevice$DirectClip.open(Unknown Source)
at Logic.Run$1.run(Run.java:101)
at java.lang.Thread.run(Unknown Source) 
```

（请注意我编写的运行此代码的类实例称为 Run）

我的项目结构如下，包括插件文件：

![项目结构](../Images/98d4f23012d15cafddc125250f9968c2.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:25:23.293

我直接使用 JavaSound 播放 mp3 音频，效果很好

这是一个完整的工作代码（玩得开心）：

```
package XXXXXXXXXXXXXX
import java.io.File;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Map;
import java.util.logging.Level;
import java.util.logging.Logger;
import javax.sound.sampled.*;

public class AudioPlayer
{
    private int bufferSize = 4096; // Tamanho de buffer padrÃ£o 4k
    private volatile boolean paused = false;
    private final Object lock = new Object();
    private SourceDataLine line;
    private int secondsFade = 0;
    private ArrayList<AudioPlayerListener> _listeners = new ArrayList<AudioPlayerListener>();

    public void stop()
    {
        if(line != null)
        {
            line.stop();
            line.close();
        }
    }

    public boolean isPaused()
    {
        return this.paused;
    }

    public void pause()
    {
        if(!this.isPaused())
            paused = true;
    }

    public void resume()
    {
        if(this.isPaused())
        {
            synchronized(lock){
                lock.notifyAll();
                paused = false;
            }
        }
    }

    public void play(File file) throws UnsupportedAudioFileException, IOException, LineUnavailableException, InterruptedException
    {
        AudioInputStream encoded = AudioSystem.getAudioInputStream(file);
        AudioFormat encodedFormat = encoded.getFormat();
        AudioFormat decodedFormat = this.getDecodedFormat(encodedFormat);
        Long duration = null;
        AudioInputStream currentDecoded = AudioSystem.getAudioInputStream(decodedFormat, encoded);
        line = AudioSystem.getSourceDataLine(decodedFormat);
        line.open(decodedFormat);
        line.start();
        boolean fezFadeIn = false;
        boolean fezFadeOut = false;
        byte[] b = new byte[this.bufferSize];
        int i = 0;
        Map properties = null;
        try 
        {
            properties = AudioUtil.getMetadata(file);
            duration = (Long) properties.get("duration");
        } 
        catch (Exception ex)
        {
            duration = 0L;
        }

        duration = duration < 0 ? 0 : duration;

        synchronized(lock)
        {
            //Parametro que ativa ou nÃ£o o fade de acordo com o tamanho do Ã¡udio
            long paramFade = (secondsFade*2+1)*1000000;
            //long paramFade = 0;
            //Logger.getLogger(this.getClass().getName()).info("Arquivo: "+file+", DURACAO DO AUDIO: "+duration+", paramfade: "+paramFade);
            while(true)
            {
                if(secondsFade > 0 && !fezFadeIn && duration >= paramFade)
                {
                    fezFadeIn = true;
                    fadeInAsync(this.secondsFade);
                }

                if( secondsFade > 0 &&
                        duration > paramFade &&
                        !fezFadeOut &&
                        line.getMicrosecondPosition() >= duration - ((this.secondsFade+1)*1000000) )
                {
                    this.fireAboutToFinish();
                    fadeOutAsync(this.secondsFade);
                    fezFadeOut = true;
                }

                if(paused == true)
                {
                    line.stop();
                    lock.wait();
                    line.start();
                }

                i = currentDecoded.read(b, 0, b.length);
                if(i == -1)
                    break;

                line.write(b, 0, i);
            }
        }

        if(  !fezFadeOut && line.isOpen() )
            this.fireAboutToFinish();

        line.drain();
        line.stop();
        line.close();
        currentDecoded.close();
        encoded.close();
    }

    public synchronized void fadeInAsync(final int seconds)
    {
        if(line != null && line.isOpen())
        {
            Thread t = new Thread(new Fader(true, this, secondsFade));
            t.start();
        }
    }

    public synchronized void fadeOutAsync(final int seconds)
    {
        if(line != null && line.isOpen())
        {
            Thread t = new Thread(new Fader(false, this, secondsFade));
            t.start();            
        }
    }

    public void setVolume(double value) 
    {
        if(!line.isOpen())
            return;
        // value is between 0 and 1
        value = (value<=0.0)? 0.0001 : ((value>1.0)? 1.0 : value);
        try
        {
            float dB = (float)(Math.log(value)/Math.log(10.0)*20.0);
            ((FloatControl)line.getControl(FloatControl.Type.MASTER_GAIN)).setValue(dB);
        }
        catch(Exception ex)
        {

        }
    }

    public boolean isPlaying()
    {
        return (line != null && line.isOpen());
    }

    protected AudioFormat getDecodedFormat(AudioFormat format)
    {
        AudioFormat decodedFormat = new AudioFormat(
                AudioFormat.Encoding.PCM_SIGNED,  // Encoding to use
                format.getSampleRate(),           // sample rate (same as base format)
                16,               // sample size in bits (thx to Javazoom)
                format.getChannels(),             // # of Channels
                format.getChannels()*2,           // Frame Size
                format.getSampleRate(),           // Frame Rate
                false                 // Big Endian
        );
        return decodedFormat;    
    }

    public int getBufferSize()
    {
        return bufferSize;
    }

    public void setBufferSize(int bufferSize)
    {
        if(bufferSize <= 0)
            return;
        this.bufferSize = bufferSize;
    }

    /**
     * @return the secondsFade
     */
    public int getSecondsFade() {
        return secondsFade;
    }

    /**
     * @param secondsFade the secondsFade to set
     */
    public void setSecondsFade(int secondsFade) {
        if(secondsFade < 0 || secondsFade > 10)
            throw new IllegalArgumentException("Erro ao configurar cross-fade com valor em segundos: "+secondsFade);
        this.secondsFade = secondsFade;
    }

    public void addAudioPlayerListener(AudioPlayerListener a)
    {
        this._listeners.add(a);
    }

    public void removeAudioPlayerListener(AudioPlayerListener a)
    {
        this._listeners.remove(a);
    }

    private void fireAboutToFinish()
    {
        for(AudioPlayerListener a : this._listeners)
            a.aboutToFinish(this);
    }
}

class Fader implements Runnable
{
    private boolean fadeIn;
    private int seconds=0;
    private final AudioPlayer player;
    private float increaseParam;

    public Fader(boolean fadeIn, AudioPlayer player, int secondsToFade) 
    {
        this.fadeIn = fadeIn;
        this.seconds = secondsToFade;
        this.player = player;
        if(fadeIn)
            increaseParam = 0.01F;
        else
            increaseParam = -0.01F;
    }

    @Override
    public void run() 
    {
        try
        {
            encapsulateRun();
        }
        catch(Exception ex)
        {
            if(fadeIn)
                player.setVolume(1.0F);
            else
                player.setVolume(0.0F);
        }
    }

    private void encapsulateRun() throws Exception
    {
        synchronized(player)
        {            
            float per;
            if(fadeIn)
            {
                Logger.getLogger(getClass().getName()).info("Fazendo fade in");
                per = 0.0F;
            }
            else
            {
                Logger.getLogger(getClass().getName()).info("Fazendo fade out");
                per = 1.0F;
            }
            player.setVolume(per);
            if(fadeIn)
            {
                while(per < 1.00F)
                {
                    per = per + increaseParam;
                    player.setVolume(per);
                    Thread.sleep(10*seconds);
                }
            }
            else
            {
                while(per > 0.00F)
                {
                    per = per + increaseParam;
                    player.setVolume(per);
                    Thread.sleep(10*seconds);
                }
            }
        }
    }

} 
```

它还支持淡入淡出 mp3 您只需要在项目中添加 3 个 jar。我已经用这些版本进行了测试：

**jl.1.0.1.jar (或更新) mp3spi1.9.5.jar (或更新)**

在[http://www.javazoom.net/projects.html找到](http://www.javazoom.net/projects.html)

**tritonus_share.jar**

见[http://www.tritonus.org/](http://www.tritonus.org/)

AudioUtil.java

```
import java.io.File;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;
import javax.sound.sampled.AudioFileFormat;
import javax.sound.sampled.AudioSystem;
public class AudioUtil
{
    private static ArrayList<FileMap> cache = new ArrayList<FileMap>();
    private static int _CACHE_SIZE = 5;

    public static Map<String, Object> getMetadata(File filename) throws Exception
    {
        FileMap fm = new FileMap(filename, null);
        int index = cache.indexOf(fm);
        if(index >= 0)
            return cache.get(index).getMap();

        AudioFileFormat format = AudioSystem.getAudioFileFormat(filename);

        Map<String, Object> mapa = new HashMap<String, Object>();
        mapa.putAll(format.properties());

        if(mapa.get("author") == null && filename.getName().contains(" - "))
        {
            mapa = new HashMap<String, Object>();
            String[] s = filename.getName().split(" - ");
            mapa.put("author", s[0]);
            s[1] = s[1].substring(0, s[1].length()-4);
            mapa.put("title", s[1]);
        }

        if(mapa.get("author") == null)
        {
            mapa.put("author", "Desconhecido");
            mapa.put("title", "Desconhecido");
        }

        Object o = format.properties().get("duration");

        if(o == null)
            mapa.put("duration", 0);

        fm.setMap(mapa);
        cache.add(fm);
        while(cache.size() > _CACHE_SIZE)
            cache.remove((int)0);

        return mapa;
    }
}

class FileMap
{
    private File file;
    private Map<String, Object> map;

    public FileMap(File file, Map<String, Object> map) 
    {
        this.file = file;
        this.map = map;
    }

    public File getFile() {
        return file;
    }

    public void setFile(File file) {
        this.file = file;
    }

    public Map<String, Object> getMap() {
        return map;
    }

    public void setMap(Map<String, Object> map) {
        this.map = map;
    }

    @Override
    public boolean equals(Object obj) 
    {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final FileMap other = (FileMap) obj;
        if (this.file != other.file && (this.file == null || !this.file.equals(other.file))) 
        {
            return false;
        }
        return true;
    }

} 
```

# c# - 图表未出现在 FlowLayoutPanel 中？

> ID：14959569
> 
> 赞同：0
> 
> 时间：2013-02-19T14:12:25.260
> 
> 标签：c#, charts

我正在尝试在 flowlayoutpanel 中添加图表作为控件，但是在执行所有图表后显示为空白如何解决这个问题？这是我的代码

```
flowLayoutPanel1.Controls.Clear();
System.Windows.Forms.DataVisualization.Charting.Series Series = new Series();
Chart[] chartMensal = new Chart[12];
for (int i = 1; i <= 12; i++)
{
  string[] seriesArray = { "Total Contrato", "Total Vendas", "Total Despeses" };
  Double[] pointsArray = { 1000, 1500, 500 };

  chartMensal[i] = new Chart();
  chartMensal[i].Width = this.Width - 100;
  chartMensal[i].Height = 200;

  chartMensal[i].Titles.Add(CultureInfo.CurrentCulture.DateTimeFormat.GetMonthName(i).ToUpper());
  chartMensal[i].Palette = ChartColorPalette.Fire;
  chartMensal[i].Series.Clear();
  Series.Points.Clear();

  for (int t = 0; t < seriesArray.Length; t++)
  {
    Series.Points.Add(pointsArray[t]);
    Series = chartMensal[i].Series.Add(seriesArray[t]);
  }

  chartMensal[i].Visible = true;
  flowLayoutPanel1.Controls.Add(chartMensal[i]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:44:38.063

您缺少图表区域本身。在最后一行之前添加：

```
 ChartArea ca = new ChartArea();
            chartMensal[i].ChartAreas.Add(ca); 
```

看看设计师是如何创建图表的。您肯定也可以在此论坛中找到解决方案。

# vim - vim：如何从当前目录grep？

> ID：14959570
> 
> 赞同：5
> 
> 时间：2013-02-19T14:12:26.133
> 
> 标签：vim, grep

我`vim .` 在某个目录中运行。在 vim 中，我移动到另一个目录。在那里我运行`:grep`从我运行的第一个目录搜索的命令`vim .`。如何`:grep`从当前路径配置 vim？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-19T14:33:14.377

我也有`<leader>cd`映射`%:p:h`，很好。

但是根据您的需要，这条线可能会更好

```
:grep [options] 'pattern' %:p:h/* 
```

这将从`grep`当前打开文件的路径开始，并保持您真正的当前目录 ( `pwd`) 不变。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-19T14:30:16.537

您可以通过其短格式插入当前缓冲区的目录`%:h`。见`:help cmdline-special`。

```
:grep foo %:h/* 
```

或者，

```
:set autochdir 
```

将自动将当前目录更改为当前缓冲区的目录（因此您可以`.`在 each中使用`:grep`）。这是一个不同的范例，但我发现这非常有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:14:38.590

更改当前工作目录。我有这个映射在我的`.vimrc`

```
map ,cd :cd %:p:h<CR> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-19T14:16:57.667

您使用 cmd 在当前位置列表中 grep

```
:lv[imgrep][!] /{pattern}/[g][j] {file} ... 
```

# php - 使用 php 的 MYSQL 不会对数据进行排名，而 Root mysql 用户会

> ID：14959576
> 
> 赞同：2
> 
> 时间：2013-02-19T14:12:52.343
> 
> 标签：php, mysql, phpmyadmin

我的排名计算查询

```
SELECT @i := @i +1 AS rank, t . * 
FROM groups t, ( 

SELECT @i :=0 
)foo 

WHERE ( 
t.group_id = '1' 
) 
ORDER BY t.views DESC 
)r 
WHERE r.id =4 
```

在 phpmyadmin 中以 root 身份登录，它会正确计算所有内容。通过php使用php的mysql账号，输出计算不正确。它不计算排名，它获取所有行，找到我给它的 ID 的行号，然后它返回行号相对于它之前的所有行的位置。

因此，如果有 5 行，并且 r.id = 4 在表中的第 4 行，它会忽略 t.views 的顺序，只告诉我 id #4 是表中的第 4 行。r.id = 1000 是表中的第 1000 位。它不会告诉我它的等级。当我以 root 身份运行查询时，它会正确告诉我排名。

我假设需要为 php mysql 用户授予某种权限才能允许使用@'s？这是我对它的唯一合乎逻辑的解释，似乎它无视逻辑。有谁知道权限是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T17:41:09.090

创建每个新会话时都会丢弃用户变量。根据您在 PHP 代码中管理会话的方式，您可能会在一个会话中设置变量并尝试在另一个会话中使用这些值——它们不会被设置。

例如，如果您有一个命令行 mysql 客户端，您将看到以下行为：

```
mysql> set @x = 5;
mysql> select @x;
+------+
| @x   |
+------+
|    5 |
+------+
mysql> quit
%
% mysql -u user -p
mysql> select @x;
+------+
| @xxx |
+------+
| NULL |
+------+ 
```

因此，请确保在一个用户会话中设置和使用所有用户变量。

# iphone - 检测 `UIWebView` 中 iframe 的结束加载

> ID：14959580
> 
> 赞同：1
> 
> 时间：2013-02-19T14:13:05.643
> 
> 标签：iphone, cordova, iframe, uiwebview, phonegap-plugins

我正在做一个 Phonegap 项目。我需要获取在`UIWebView`.

可以使用下面的代码。

```
NSMutableString *html = [[[sender stringByEvaluatingJavaScriptFromString:@"document.documentElement.outerHTML"] mutableCopy] autorelease]; 
```

现在我的问题是我在 html 页面中有 iframe。我无法在“webViewDidFinishLoad”方法中获取 iframe 的内容。

如何在 iframe 中获取内容。

请给我阳光。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:43:40.763

这是我的示例代码：

```
- (void)webViewDidFinishLoad:(UIWebView *)sender 
{
NSMutableString *html = [[[sender stringByEvaluatingJavaScriptFromString:@"document.documentElement.outerHTML"] mutableCopy]  autorelease];
}

- (BOOL)webView:(UIWebView*)webView shouldStartLoadWithRequest:(NSURLRequest*)request navigationType:(UIWebViewNavigationType)navigationType {
  return YES;   
}

- (void)loadAddress:(id)sender event:(UIEvent *)event
{
NSString* urlString = self.addressField.text;
NSURL* url = [NSURL URLWithString:urlString];
NSURLRequest* request = [NSURLRequest requestWithURL:url];
[webView loadRequest:request];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T11:23:46.103

我得到了答案。我需要将此字符串添加到

```
NSString jsString = @"$('iframe').ready(function() {
              var document1 = window.document.getElementsByTagName('iframe')[0].contentWindow.document.getElementsByTagName('input');
             }";

[webView stringByEvaluatingJavaScriptFromString:jsString]; 
```

# javascript - 从“YYYY，M，D”等选择选项中创建一个以毫秒为单位的日期数组

> ID：14959581
> 
> 赞同：0
> 
> 时间：2013-02-19T14:13:05.993
> 
> 标签：javascript, arrays, date, gettime

我有一个选择菜单，其中的选项看起来像这样......

```
<option value="2013, 2, 1">01/03/2013</option> 
```

我想从此菜单创建一个日期数组，但以毫秒为单位

所以我需要类似的东西：

```
myArray = [1368140400000,... etc] 
```

任何想法我怎么能得到这个？到目前为止，我已经尝试过了，但它不起作用，而是返回 NaN。

```
var startDates = new Array;
$("select.startdates").find("option").each( function() {
    startDates.push(new Date($(this).val()).getTime()) 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:16:28.813

`2013, 2, 1`不是由 识别的有效日期[`Date.parse`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)。这应该会更好：

```
var ms = Date.UTC.apply(Date, this.value.split(",").map(Number)); 
```

但是，我认为将毫秒本身存储在值中应该更容易`option`，以便您可以轻松使用`new Date(parseInt(this.value, 10))`

# jquery - 在我的表单中为所有选择指定最大宽度

> ID：14959583
> 
> 赞同：0
> 
> 时间：2013-02-19T14:13:10.963
> 
> 标签：jquery, css, select

我有一个带有多个选择（下拉列表）的表单。

我希望所有这些都具有最大宽度：300px，我尝试了这个，但没有工作：

```
$(#myform 'select').css(width, '300px'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:14:40.387

你的语法错误

```
$('#myform select').css(width, '300px'); 
```

但无论如何你都可以用纯 CSS 做到这一点

```
#myform select{
    width:300px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T14:18:12.347

在 jQuery 中它应该是：

```
$('#myform select').css('max-width', '300px'); 
```

和纯 CSS：

```
#myform select{
    max-width:300px;
} 
```

# macos - aquamacs 红色光标

> ID：14959593
> 
> 赞同：2
> 
> 时间：2013-02-19T14:13:46.197
> 
> 标签：macos, emacs, dot-emacs, aquamacs

我的 .emacs 文件中的旧的、可靠的（set-cursor-color "#aa88dd"）会因 Aquamacs 而失败，除非它在 ​​Aquamacs 启动后运行。这种类型的失败是 Emacs 在启动期间做一些秘密的典型，但我不知道是什么。我修改并保存了光标的 Aquamacs 设置（光标面：背景:)，它适用于会话，并保存设置，但没有为下一个会话正确初始化。即便如此，我还是有一个鲜红色的光标。

工作 Emacs：GNU Emacs 23.2.1（i686-apple-darwin，NS apple-appkit-1038.29）

失败的 Aquamacs：GNU Emacs 23.3.50.1（i386-apple-darwin9.8.0，NS apple-appkit-949.54）

1) 解决方法和修复表示赞赏。目前我正在使用 23.2.1。我不觉得有必要升级，但迟早我必须升级。

2）搜索互联网一无所获。我怀疑这个问题是与其他问题相关的问题，即 Aquamacs 无法确定某些设置并选择红色作为光标颜色。是否有让 Emacs 将每个加载的配置文件的名称打印到*Messages*的技巧？

3）相关的大图问题：一般有没有办法强制新版本的 Emacs 表现得像旧版本？它将解决我当前的问题，以及新版本偶尔发生的剧变。

下面是 Aquamacs customizes.el，它似乎已正确保存了光标背景。我没有编辑这个文件。将 (cursor...) 语句添加到我的 .emacs custom-set-variable 没有任何效果。

```
(custom-set-variables
  ;; custom-set-variables was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 '(cua-mode nil nil (cua-base))
 '(cua-normal-cursor-color "#aa88dd")
 '(cursor-type (quote box))
 '(ess-S-assign "_")
 '(ido-everywhere t)
 '(ido-show-dot-for-dired t)
 '(line-move-visual nil)
 '(term-bind-key-alist (quote (("C-c C-x b" . switch-to-buffer) ("C-c M-x" . execute-extended-command) ("C-c C-c" . term-interrupt-subjob) ("M-`" . other-frame) ("C-m" . term-send-raw))))
 '(term-unbind-key-list (quote ("C-c"))))
(custom-set-faces
  ;; custom-set-faces was added by Custom.
  ;; If you edit it by hand, you could mess it up, so be careful.
  ;; Your init file should contain only one such instance.
  ;; If there is more than one, they won't work right.
 '(default ((t (:inherit nil :stipple nil :background "White" :foreground "black" :inverse-video nil :box nil :strike-through nil :overline nil :underline nil :slant normal :weight normal :height 210 :width normal :foundry "apple" :family "Inconsolata"))))
 '(cua-normal-cursor-color "#aa88dd")
 '(cursor ((t (:background "#AA88DD" :foreground "black" :box nil))))) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T21:45:14.073

我并不完全迷恋 Aquamacs，但 emacsforosx 有一个非常烦人的（对我而言）属性，即窗口位置不会跨会话保存......它总是在我的主显示器的左上角打开，而不是我放置它的位置. 而且没有办法修复它。

我不记得我在哪里找到/了解到这是设置光标颜色的方法，但请参阅此常见问题解答：

[http://www.emacswiki.org/emacs/AquamacsFAQ#toc16](http://www.emacswiki.org/emacs/AquamacsFAQ#toc16)

打开缓冲区并按照您喜欢的方式设置内容。然后选择

选项->外观->采用面和框架参数作为框架默认值

这将`default-frame-alist`在`custom-set-variables`您的`customizations.el`.

如果您以后想要不同的光标颜色，您可以根据口味进行调味。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-03T22:35:27.437

Try putting a message at the bottom of your `.emacs` file `(message "Hello -- this message came from the bottom of your .emacs file.")` and a different message at the bottom of your `customizations.el` file `(message "Hello -- this message came from the bottom of your customizations.el file.")`. The one that loads last will determine your cursor color settings if you have conflicting settings in each configuration file. If there is *only one* setting for the cursor color in either of those files, then you need to do a word search in the source files of Aquamacs to find out where else that cursor color is being set. For example, the following are the results of a word search for `set-cursor-color` in the source files for the most recent version of the Aquamacs24 branch on Github: [https://github.com/davidswelt/aquamacs-emacs](https://github.com/davidswelt/aquamacs-emacs)

The source files in the packaged application of Aquamacs are probably going to be compressed in a *.gz format. Depending upon the word search file utility you are using, you may need to perform a search on source files that are not compressed -- it may be easier to just download the source from Github since those source files will all be in an uncompressed format. There is *zip* download button once you select the branch you want.

```
Searching 9317 files for "set-cursor-color"

/Users/HOME/Desktop/aquamacs-emacs-aquamacs24/lisp/aquamacs/oneonone/oneonone.el:
 1453    "Set cursor type depending on whether an input method is used or not."
 1454    (when 1on1-change-cursor-on-input-method-flag
 1455:     (set-cursor-color
 1456       (if current-input-method
 1457           1on1-default-frame-cursor-color-input-method

/Users/HOME/Desktop/aquamacs-emacs-aquamacs24/lisp/emulation/cua-base.el:
 1141        (stringp color)
 1142        (not (equal color (frame-parameter nil 'cursor-color))))
 1143:  (set-cursor-color color))
 1144      (if (and type
 1145        (symbolp type)

/Users/HOME/Desktop/aquamacs-emacs-aquamacs24/lisp/emulation/viper-util.el:
  156  ;; This was equally true before the advent of viper-frame-value.
  157  ;; Now it could be changed by passing frame to v-f-v.
  158: (defun viper-set-cursor-color-according-to-state (&optional frame)
  159    (cond ((eq viper-current-state 'replace-state)
  160    (viper-change-cursor-color

/Users/HOME/Desktop/aquamacs-emacs-aquamacs24/lisp/emulation/viper.el:
  946        ))
  947  
  948:   (defadvice set-cursor-color (after viper-set-cursor-color-ad activate)
  949      "Change cursor color in VI state."
  950      (modify-frame-parameters

/Users/HOME/Desktop/aquamacs-emacs-aquamacs24/lisp/frame.el:
 1208        (face-set-after-frame-default (selected-frame))))
 1209  
 1210: (defun set-cursor-color (color-name)
 1211    "Set the text cursor color of the selected frame to COLOR-NAME.
 1212  When called interactively, prompt for the name of the color to use.

/Users/HOME/Desktop/aquamacs-emacs-aquamacs24/lisp/term/pc-win.el:
  349  (fset 'set-default-font 'ignore)
  350  (fset 'set-mouse-color 'ignore)      ; We cannot, I think.
  351: (fset 'set-cursor-color 'ignore) ; Hardware determined by char under.
  352  (fset 'set-border-color 'ignore) ; Not useful.
  353 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T23:02:07.517

如果您怀疑您的 Emacs 版本在启动期间做了一些我们覆盖您的偏好的事情，您可以尝试在初始化时间之后通过在以下位置添加一个函数来设置您的偏好`after-init-hook`：

```
(add-hook 'after-init-hook (lambda () (set-cursor-color "#aa88dd")) 'append) 
```

也许这会导致您的自定义被评估得足够晚以覆盖默认值。（编辑：使用“append”参数，这个函数将被添加到钩子列表的末尾，希望覆盖 Aquamacs 放在那里的任何其他东西。）

# playframework-2.1 - 如何在play framework 2.1中使用wro4j

> ID：14959594
> 
> 赞同：8
> 
> 时间：2013-02-19T14:13:48.900
> 
> 标签：playframework-2.1

有没有办法 在 java play framework 2.1 中包含 wro4j [http://code.google.com/p/wro4j/ ？](http://code.google.com/p/wro4j/)
我需要编译 hogan.js 模板并在不重新设计路线的情况下做更多事情。
也许我应该使用拦截器（@Before、@After、@Finally）并创建一个扩展应用程序的类？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-16T09:25:02.637

wro4j 在构建时或运行时处理资源。

我还不知道有任何 Play2 集成/插件/示例。

您可以使用此处提供的 wro4j SBT 插件：[https ://github.com/BowlingX/xsbt-wro4j-plugin/](https://github.com/BowlingX/xsbt-wro4j-plugin/)

或者您可以编写一个 wro4j 控制器，在 DEV 模式下动态处理资源并在 PROD 模式下缓存它们。

# python - 在 python.py 中设置默认编码

> ID：14959595
> 
> 赞同：0
> 
> 时间：2013-02-19T14:13:51.590
> 
> 标签：python, encoding, python-2.7

我正在调用某种 API，它返回一个具有三个属性的对象：

```
obj.name
obj.id
obj.text 
```

所有这些都可能采用不同的编码。

为了将它正确输出到我的终端，我现在正在做

```
print obj.name.encode('UTF-8')
print obj.id.encode('UTF-8')
print obj.text.encode('UTF-8') 
```

有没有一种方法可以简单地将我的默认编码设置为 UTF-8？

我读了一些其他帖子，建议调用 sys.setdefaultencoding('UTF-8')，这在 python 2.7.x 中不再可用

请指教。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:19:46.647

*通常*Python 从终端设置中检测输出编码；您可以通过运行查看 Python 检测到的内容：

```
import sys
sys.stdout.encoding 
```

如果这对您不起作用，您真的想配置您的终端以指定正确的编码；`LC_CTYPE`例如，在 POSIX 系统上设置环境变量。

`PYTHONIOENCODING`您还可以通过设置环境变量来强制 Python 使用编码：

```
$ PYTHONIOENCODING=latin-1 python -c 'import sys; print sys.stdout.encoding'
latin-1
$  PYTHONIOENCODING=utf8 python -c 'import sys; print sys.stdout.encoding'
utf8 
```

# android - 我如何在 2 个活动之间传递价值

> ID：14959596
> 
> 赞同：-1
> 
> 时间：2013-02-19T14:13:53.333
> 
> 标签：android, android-intent, bundle

我正在尝试编写一个像备忘录这样的应用程序。首先是 A_activity 中的 listView。我还有第二个名为 B_activity 的活动来做备忘录。我在 A_activity 中放了一个按钮，并用它来添加备忘录。因此，我使用意图将 A_activity 切换到 B_activity。

现在问题来了：
我使用相同的方式将 B_activity 切换回 A_activity，并使用一个包存储值。我想要的结果是 listView 会添加我刚刚创建的备忘录，而旧的备忘录将保留。但都失败了。我知道该怎么做，但不知道如何编写代码。有人可以给我一些例子吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:24:16.277

在将数据传递给 listView 之前，在您的 A 活动中检查 bundle 是否为空。

前任 -

```
Bundle bundle = getIntent().getExtras();
if(bundle != null)
{
    // pass your values to listview
} else {
    return;
} 
```

而是使用 startActivityForResult(); 这类操作的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:27:46.477

如果我理解正确，您`Intent`从 A 发送到 B，然后经过一些逻辑`Intent`从 B 发送到 A，并执行多次。如果我是正确的，这是非常糟糕的方法。您的活动堆栈将被填充，并且后退按钮将不正确。我认为你应该`startActivtyForResult()`从 A 和`setResult()`B 中使用。我希望我是对的。通过这种方式，您可以`Bundle`从 A 传递到 Intent 并返回`Bundle`到`onResult()`;

祝你好运！

# sql - Azure SQL 定价

> ID：14959599
> 
> 赞同：1
> 
> 时间：2013-02-19T14:13:57.797
> 
> 标签：sql, azure, azure-sql-database

我有一个关于 azure SQL 的小问题。

我在 azure 上有一个免费网站（网站预览），并想为其添加一个数据库。

我已经尝试过 cleardb 的免费 mysql，但是连接限制使它很难使用。

现在我想添加一个 azure sql 数据库，但我不知道它的定价。

一个 100mb 的数据库每月花费 5 美元。但仅此而已，还是会产生额外的流量、计算等费用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:16:12.743

发送到 Windows Azure 的所有入站数据都是免费的。出站数据根据给定计费周期内通过 Internet 从 Windows Azure 数据中心移出的数据总量收费。位于同一数据中心内的 Windows Azure 服务之间的数据传输不收取任何费用。每个计费月的前 5 GB 出站数据传输也是免费的。

在您的情况下，每月 5 美元，您不太可能在接近 5GB 免费带宽限制的任何地方使用。

# jquery - 是否可以将视差滚动效果添加到其他页面？

> ID：14959608
> 
> 赞同：1
> 
> 时间：2013-02-19T14:14:26.413
> 
> 标签：jquery, ajax

通常视差滚动站点只有一页，它会滚动到其他页面。有没有办法使用 JQuery 和 AJAX 滚动到同一站点中的其他页面？比如从 index.html 到 aboutus.html。有可能这样做吗？还是视差滚动仅适用于一页网站？

谢谢

# javascript - Javascript“for循环”变量指针

> ID：14959611
> 
> 赞同：1
> 
> 时间：2013-02-19T14:14:33.337
> 
> 标签：javascript

我确信我根本没有足够的咖啡来清楚地看到，这似乎微不足道，但是，我有一个 for 循环，它在 jQuery 插件中传递一些函数。var i 被传递，当然，传递 i 的最后一个值，而不是传递时分配的值。

```
for (var i = 1; i < 3 + 1; i++) {
    $('#div' + i).plugin({ // i returns correctly here
    onDelete: function () {
            alert("Deleting #" + i); // i returns 4 every time - last value of i
        }
    });
} 
```

我如何“复制”我，所以它按我的预期返回？我有一个解决方法，但我很想知道，所以我可以把头埋在沙子里。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T14:17:03.710

这是一个众所周知的 for 循环问题。每次都必须将其包装在一个闭包中：

```
for (var i = 1; i < 4; i++)(function(i) {
    $('#div' + i).plugin({
        onDelete: function() {
            alert("Deleting #" + i);
        }
    });
})(i); 
```

或者你可以使用这个：

```
for (var i = 1; i < 4; i++) {
    $('#div' + i).plugin({
        onDelete: callback(i)
    });
};

function callback(i) {
    return function() {
        alert("Deleting #" + i);
    };
} 
```

# c# - MSI 安装程序数据属性

> ID：14959612
> 
> 赞同：1
> 
> 时间：2013-02-19T14:14:35.230
> 
> 标签：c#, windows-installer, custom-action

我正在为我正在从事的一个大型项目进行 MSI 安装，并且我很想了解更多关于我看到的这些属性的信息。

它们是诸如 [TARGETDIR] 之类的东西或任何包装在“[PROPERTNAMEHERE]”中的东西。我想知道他们是否是这些地方的列表？

附带说明一下，无论如何都可以从自定义操作中访问所有这些属性。我查看了 Context.Parameters 集合，但没有看到任何内容。我一直将 /name="[TARGETDIR]\" 作为 CustomActionData 传递给 customaction，但这还不够。

谢谢

史蒂夫

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:24:23.073

[在使用基于 MSI 的包时，了解属性](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370905%28v=vs.85%29.aspx)非常重要。首先你应该知道有两种属性，[公共属性](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370912%28v=vs.85%29.aspx)和[私有属性](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370851%28v=vs.85%29.aspx)。使用自定义操作时，您应该始终使用公共属性，以避免在安装过程从 InstallUI 序列传递到 InstallExecute 序列时重置它们的值。

此外，**非常重要**的是，自定义操作在延迟运行时无法获取/设置属性。只有立即的（即非延迟的）[自定义操作](http://msdn.microsoft.com/en-us/library/windows/desktop/aa372409%28v=vs.85%29.aspx)可以获取/设置属性值。

有一个例外，当运行延迟自定义操作时，您可以从名为“ [CustomActionData](http://msdn.microsoft.com/en-us/library/2w2fhwzz%28v=vs.100%29.aspx) ”的特殊属性中获取值。

现在，关于自定义操作，您可以编写 C++、C# 或 VBScript 自定义操作来在安装期间获取/设置属性。

[不建议将](http://blogs.msdn.com/b/robmen/archive/2004/05/20/136530.aspx)VBScript用于官方应用程序版本，但您可以将它用于需要在内部使用的快速操作。

对于[C++ 自定义操作](http://www.codeproject.com/Articles/1747/MSI-Custom-Action-DLL)，您将获得一个 DLL，您可以从中导出一个或多个方法，以便在触发自定义操作时调用。请注意，函数签名与标准 DLL 不同，请仔细分析链接的示例。

如果这样更方便，您还可以获得类似的 DLL[编写 C# 代码。](http://www.advancedinstaller.com/user-guide/qa-c-sharp-ca.html)

确保您不尝试将[标准 DLL 作为自定义操作运行](https://stackoverflow.com/questions/7789921/how-can-i-execute-dll-in-custom-action-in-installshield-basic-msi-project)非常重要，一些[商业/免费设置创作工具](http://en.wikipedia.org/wiki/Windows_Installer#Tools)也支持这一点，但不是全部。如果您打算编写一个 DLL 自定义操作，最好从一开始就使用上面链接的两个示例 (C++/C#) 之一。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:19:14.490

发布此消息后几秒钟，我找到了有关属性列表的内容：http: [//msdn.microsoft.com/en-us/library/windows/desktop/aa370905 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370905(v=vs.85).aspx)

现在我正在寻找一种从代码中访问这些的方法？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:59:12.677

如果您使用的是 WIX...

首先回答您的旁注-您可以从自定义操作中访问自定义值（我假设您知道如何设置自定义操作...）-查看您的会话对象（自定义操作的参数）-这个有一个带有索引器的 CustomActionData。通过指定来指定要从中删除的属性的名称

```
session.CustomActionData["INSTALLLOCATION"] 
```

但是，您需要先将该属性添加到您的自定义操作中，然后才能访问它 - 为此，您需要告诉 wix 进行设置...

```
<CustomAction Id="UNIQUEID" Return="check" Property="YourCustomActionNameInWix" Value="INSTALLLOCATION=[INSTALLLOCATION]" /> 
```

要回答您的其他问题 - 不，我认为您无法在代码中获得这些值，我一直不得不编写它们的脚本。

高温高压

# c# - 如何获取所选单选按钮列表项的值

> ID：14959613
> 
> 赞同：-3
> 
> 时间：2013-02-19T14:14:38.360
> 
> 标签：c#, asp.net, radiobuttonlist

如何从下面的代码中获取选定的单选按钮值

```
protected void Page_Load(object sender, EventArgs e)
{
     string query="select top 0.1 percent Title, Answer1, Answer2, Answer3, Answer4 from [Question] order by newid()" ;
     SqlCommand cmd=new SqlCommand(query,con);
     con.Open();
     SqlDataReader dr=cmd.ExecuteReader();
     if(dr.Read())
     {
         rbList1.Items.Add(dr[0].ToString());
         rbList1.Items.Add(dr[1].ToString());
         rbList1.Items.Add(dr[2].ToString());
         rbList1.Items.Add(dr[3].ToString());
     }
     else
     {
         MessageBox.Show("Some Proble Occure !");
     }
     con.Close();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:22:09.300

试试这些

`rbList1.SelectedIndex // Gets the index of the currently selected item`

`rbList1.SelectedItem // Gets the currently selected item`

`rbList1.SelectedValue // Gets the value of the currently selected item`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:23:36.137

先提几点建议：

*   不要在每次回发时对`RadioButtonList`from进行数据绑定，请检查属性，否则不会触发事件并且您将无法获得所选项目`Page_Load``IsPostBack`
*   将`using`-statement 用于任何实现`IDisposable`，尤其是在 System.Data 命名空间中，以确保所有非托管资源（如连接）都被释放/关闭
*   使用`DbDatareader`like的适当方法`GetInt`或`GetString`代替使用`ToString`for all（如果字段为空，也会引发异常）

* * *

```
string query = "select top 0.1 percent Title, Answer1, Answer2, Answer3, Answer4 from [Question] order by newid()";
using (var con = new SqlConnection("YourConnectionString"))
using (var cmd = new SqlCommand(query, con))
{
    con.Open();
    using (var dr = cmd.ExecuteReader())
    {
        if (dr.Read())
        {
             rbList1.Items.Add(dr.GetString(0));
             rbList1.Items.Add(dr.GetString(1));
             rbList1.Items.Add(dr.GetString(2));
             rbList1.Items.Add(dr.GetString(3));
        }
    }
} 
```

* * *

对于您的问题：我不知道，因为您没有提到实际问题。

> 如何从下面的代码中获取选定的单选按钮值

然后处理`RadioButtonList`'s [`SelectedIndexChanged`-event](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.selectedindexchanged.aspx)。

# html - 一个元素的正常流动

> ID：14959616
> 
> 赞同：0
> 
> 时间：2013-02-19T14:14:42.447
> 
> 标签：html, css, internet-explorer-7

是否可以仅为一个元素添加正常流量？这是我的麻烦：

html:

```
<div class="block pink float"></div>
<div class="block blue float clear"></div>
<div class="block green float"></div> 
```

CSS：

```
.block {
   width: 200px;
   height: 200px;
}
.clear { clear: left; }
.float { float: left; }
.pink { background: #ee3e64; }
.blue { background: #44accf;}
.green { background: #b7d84b; height: 400px;} 
```

[http://jsfiddle.net/E2uLk/](http://jsfiddle.net/E2uLk/)

我需要我的绿色块从粉红色的块开始浮动（位于文档的顶部和粉红色的右侧）。我无法更改 html 结构或添加任何额外的包装器。您可以在 Internet Explorer 7 中看到的预期结果 :) （由于一些错误，但我在所有现代浏览器中都需要相同）。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:21:39.630

这是一个干净的方法：http: [//jsfiddle.net/E2uLk/5/](http://jsfiddle.net/E2uLk/5/)

你漂浮着粉红色和蓝色。
你用蓝色清除浮动。
你从粉红色和蓝色的宽度中抵消绿色。

```
.pink  { background: #ee3e64; float: left; }
.blue  { background: #44accf; float: left; clear: both; }
.green { background: #b7d84b; height: 400px; margin-left: 200px; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:34:03.407

因为您的块有 200px 的固定高度，所以您可以添加：

```
.green{ margin-top: -2OOpx;} 
```

这会将您的绿色块向上移动粉红色块的高度（200px）。

# javascript - 通过单击按钮删除文本框

> ID：14959617
> 
> 赞同：0
> 
> 时间：2013-02-19T14:14:43.090
> 
> 标签：javascript, html, forms, function

我正在尝试通过单击按钮来动态添加和删除文本框。`add()`有效，但无效`remove()`。

```
$ctra = 1;
function add() { 
    var ni = document.getElementById('myDiv');
    var numi = document.getElementById('theValue');
    var num = (document.getElementById('theValue').value -1)+ 2;
    numi.value = num;
    var newdiv = document.createElement('div');
    var divIdName = 'my'+num+'Div';
    newdiv.setAttribute('id',divIdName);
    newdiv.innerHTML = "<table><tr><td width=159> Name</td>"+
            "<td> <input type='text' name='name' size=20> </td>"+
            "<td> Address </td>"+
            "<td> <input type='text' name='address' size=20> </td>"+
            "<td> Tel. No </td>"+
            "<td> <input type='text' name='telno' size=20><td> <button type='button' onclick='remove(divIdName);'>Remove</button></table>";

    if($ctra<5){
        ni.appendChild(newdiv);
        $ctra++;
    }
    $total = $ctra;
} 
```

这是`remove()`. 它接受`div`.

```
function remove(dId) {
    var ni = document.getElementById('myDiv');
    ni.removeChild(dId);
} 
```

请帮我解决问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:28:05.867

你的代码结构是这样的

```
<div id='mydiv'>
  <div id='my'+num+'div'>
    //You had written table code here
  </div>
</div> 
```

删除`document.getElementById('myDiv');`的孩子是您动态创建的`'my'+num+'div'`。请调查一下

将此 divId 传递给删除..希望您理解

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:58:07.837

您需要将 onclick 更改为以下内容：

```
onclick=\"remove('" + divIdName + "');\" 
```

然后像这样调用删除函数

```
function remove(dId) {
  var ni = document.getElementById('myDiv');
  ni.removeChild(document.getElementById(dId));
  return false;
} 
```

这是它的一个jsfiddle：http: [//jsfiddle.net/JFzCf/5/](http://jsfiddle.net/JFzCf/5/)

# iphone - 将数组的属性提取到新数组中

> ID：14959618
> 
> 赞同：0
> 
> 时间：2013-02-19T14:14:44.367
> 
> 标签：iphone, ios, objective-c

我尝试仅将属性提取到一个数组中以为此创建一个 NSPredicate。有没有比创建一个可变数组并遍历所有对象更短的方法？

```
NSMutableArray *extractedIDs = [NSMutableArray array];
for (SomeObject *aObject in self.addedSearchResults) {
    [addedIDs addObject:aObject.someProperty];
}

[NSPredicate predicateWithFormat:@"NOT (someOtherProperty IN %@)", addedIDs] 
```

用谷歌找不到东西（真的不知道如何搜索这个问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:27:55.527

@Mark 是对的，但我认为您正在寻找：

```
NSArray* extractedIDs = [self.addedSearchResults valueForKeyPath:@"nameOfSomeObject.nameOfSomeProperty"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:20:02.023

KVC 可以帮助你。只需使用：

```
NSArray* extractedIDs = [self.addedSearchResults valueForKey:@"someProperty"]; 
```

# jsf - 根据行条件隐藏 p:dataTable 选择复选框

> ID：14959622
> 
> 赞同：5
> 
> 时间：2013-02-19T14:15:07.840
> 
> 标签：jsf, jsf-2, primefaces, datatable, selection

我已经实施了`org.primefaces.model.SelectableDataModel`。

`<p:dataTable>`现在，当基于我渲染我时，`SelectableDataModel`我使用以下方法添加一个带有复选框的列：

```
<p:column selectionMode="multiple" /> 
```

对于某些行，我不希望复选框出现，基于行的某些属性。

我看不出有办法做到这一点。没有开箱即用的 Prime Faces 功能是否可行？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2014-10-21T12:54:27.337

I would suggest to use:

```
<p:dataTable disabledSelection="#{car.color =='Black'}" ... > 
```

For me it works fine with PF 5.1\. No need to manipulate column styleClass.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-19T15:10:04.493

您可以禁用该复选框：

```
<p:column selectionMode="multiple" style="width:18px" 
   disabledSelection="#{car.color =='Black'}" 
   styleClass="#{car.color =='Black' ? 'selectionDisabled':''}"/> 
```

该复选框现在被禁用，但是可见。使用 CSS 隐藏禁用的复选框：

```
td.selectionDisabled .ui-chkbox{
display: none;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-01-10T14:04:10.940

我可以确认根据 user4165984 将 disabledSelection 属性放在 dataTable 上适用于 primefaces 6.1。

```
<p:dataTable disabledSelection="#{car.color =='Black'}" ... > 
```

或者

```
<p:dataTable disabledSelection="#{car.disabled}" ... > 
```

仅当您想添加一些花哨的 css 魔法来做更多的事情时，才需要设置样式类。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-08-09T09:53:02.903

从 Primefaces 5.2 开始，maciek 和 planetjones 建议的 p:column 的 disabledSelection 属性**不会**禁用该复选框。

disabledSelection 属性应该插入到 p:datatable 标记中，如 user4165984 所建议的或[这里](http://forum.primefaces.org/viewtopic.php?f=3&t=38042)提到的。

# c - 在 GTK+ 窗口中列出小部件

> ID：14959624
> 
> 赞同：0
> 
> 时间：2013-02-19T14:15:12.917
> 
> 标签：c, gtk

我有一个包含很多微调按钮的顶级窗口。

实际上，用户选择他需要多少对象，并在按下按钮后应用程序提供一些操作。

通常我使用的是结构

```
typedef struct
{
.......
GtkWidget *widget;
.......
} _GUI; 
```

它包含通过 gtk_builder_get_object() 初始化的小部件。之后我可以从他们那里得到信息。

但是在这里我需要覆盖很多（> 50）的旋转按钮，并且我还需要设置它们的属性（例如设置敏感选项等）。

所以问题是可以列出顶层窗口的所有小部件（也有框和扩展器）并以某种方式按它们的类型（GtkSpinButton、GtkWidget 等）对它们进行排序？

我想避免直接指向特定的微调按钮。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:32:57.287

由于顶层窗口（一个 GtkWindow）是 GtkContainer 的子类，例如，您可以使用[`gtk_container_forall()`](http://developer.gnome.org/gtk3/stable/GtkContainer.html#gtk-container-forall)来遍历窗口的子级。

然后对于每个孩子，您可以使用 GObject 的 API:s（例如[`G_OBJECT_TYPE()`宏](http://developer.gnome.org/gobject/stable/gobject-The-Base-Object-Type.html#G-OBJECT-TYPE%3aCAPS)宏）来确定每个孩子的类型。如果您在窗口内的嵌套容器中有旋转按钮，您可能需要递归。

# php - 在 opensuse 中安装 oci8_11g 扩展

> ID：14959625
> 
> 赞同：0
> 
> 时间：2013-02-19T14:15:18.240
> 
> 标签：php, oracle11g, opensuse, suse, oci8

我使用 Oracle-11g 作为数据库服务器并使用 11 64 位服务器作为应用程序服务器。我想在 PHP 中启用 oci8 和 oci8_11g 扩展，所以任何人都可以告诉我这个步骤

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T19:54:04.407

来自：[在Opensuse环境中安装oracle和php oracle extension(OCI8)](https://stackoverflow.com/questions/14960650/install-oracle-and-php-oracle-extensionoci8-in-opensuse-environment)

您需要安装以下软件包：

> php5-devel libxml2-devel zlib-devel readline-devel oracle-instantclient11.2-basic oracle-instantclient11.2-devel

并编译[oci8 php扩展](http://pecl.php.net/package/oci8)

来自[suse](https://www.suse.com/communities/conversations/installing-oracle-php-extensions-suse-linux/)网站的操作指南

[这](https://serverfault.com/questions/360835/suse-12-1-apache-startup-after-oci8-installation)也可以帮助你

# php - 如何在 sfWidgetFormTextareaTinyMCE 中添加 onchange 事件？

> ID：14959627
> 
> 赞同：1
> 
> 时间：2013-02-19T14:15:24.540
> 
> 标签：php, tinymce, symfony-1.4, symfony-forms

我需要检测tinymce 内容是否已更改。我正在使用 symfony 1.4，sfWidgetFormTextareaTinyMCE。

我的表单的一部分具有以下代码：

```
$tiny_mce_config =  'theme: "advanced",' . 
        'theme_advanced_buttons1: "bold,italic,link",' .
        'theme_advanced_buttons2: "",' .
        'theme_advanced_buttons3: "",' .
        'theme_advanced_statusbar_location : "none",'.
        'cleanup: true,'.
        'force_br_newlines: true,'.
        'force_p_newlines: false,'.
        'forced_root_block: "",'.
        'valid_elements : "br,strong,b,em,i,a[href|title|target]"';

$this->setWidgets(array(
'intro'  => new sfWidgetFormTextareaTinyMCE(
    array(
       'width'  => '616',
       'config'     => $tiny_mce_config
    )
)
)); 
```

在我的模板中渲染，我这样做了：

```
<?php echo $form['intro']->renderLabel('Introduction'); ?>
<?php echo $form['intro']->render(array('rows' => 3, 'cols' => 100)); ?>
<?php echo $form['intro']->renderError(); ?> 
```

我尝试将 onchange 事件放到原始的 textarea 中，但是没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:29:49.670

您可以尝试在`attributes`Widget 的数组中传递 onchange 函数：

```
new sfWidgetFormTextareaTinyMCE(array(...), array('onchange' => '...')); 
```

或者给小部件一个特定的 id 或类并使用 jQuery 添加行为。

```
$('#myTinyMCETextarea').change(function() {...}); 
```

我会选择后一种选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:14:43.063

正如@MichalTrojanowski 所说，使用jQuery 选择器是我认为的最佳方式。它是畅通无阻的。

您还可以从`->render()`方法中提供属性，就像对`cols`&所做的那样`rows`：

```
<?php echo $form['intro']->render(array(
    'rows'     => 3, 
    'cols'     => 100, 
    'onchange' => 'myfunction();'
 )); ?> 
```

顺便说一句，我认为当用户编辑内容时不会触发此方法。由于 TinyMCE 重新创建了一个 iframe（或某种）来处理编辑器。

你最好看看 TinyMCE 中内置的 onChange 事件。像这样的东西：

*   [TinyMCE onchange 文档](http://www.tinymce.com/wiki.php/API3%3aevent.tinymce.Editor.onChange)
*   [TinyMCE onchange_callback 文档](http://www.tinymce.com/wiki.php/Configuration%3aonchange_callback)

# django - 使用 get_queryset 的 Django ListView 分页

> ID：14959629
> 
> 赞同：7
> 
> 时间：2013-02-19T14:15:39.477
> 
> 标签：django, django-models, django-templates, django-views

我一直在尝试学习并掌握在 Django 中使用分页的 ListViews，但我似乎在理解概念方面遇到了一些麻烦。所以，让我展示一些代码 - 我的 view.py 看起来像这样：

```
class SearchDisplayListView(ListView):
    model = BlogPosts
    template_name = "searchres_list.html"
    paginate_by = '15'
    context_object_name = "searchres"

    def get_context_data(self, **kwargs):
        context = super(SearchDisplayListView, self).get_context_data(**kwargs)
        q = self.request.GET.get('q')
        q = q.replace(" ","+")
        context['searchq'] = q
        return context

    def get_queryset(self):
        queryset = super(SearchDisplayListView, self).get_queryset()
        # Get the q GET parameter
        q = self.request.GET.get('q')
        q = q.replace(" ","+")
        if q is None:
        # Return the base queryset
        return queryset
        # Return a filtered queryset
       ## do some awesome calculations using "q" i.e send request to search server
       ## get back a list from the search server.. example: range(0,100)
        queryset = range(0,100)
        return queryset 
```

正如你所看到的，我实际上并没有使用模型填充我的查询集——而是从我自己的“搜索服务器”返回结果——在这个例子中是 range(0,100)。

现在，我试图在我的模板代码中使用以下内容：

```
<table class="table table-hover">
<tbody>
{% for i in searchres %}
<tr>
<td><img src="http://placehold.it/140x140" class="img-polaroid"></td>
<td>{{i}}</td>
</tr>
{% endfor %}
</tbody>
</table> 
```

我的分页如下：

```
{% if is_paginated %}
<div class="pagination pagination-centered">
    <ul>
        {% if page_obj.has_previous %}
<li><a href="/search/?q={{searchq}}/page={{ page_obj.previous_page_number }}">Prev</a></li>
        {% endif %}

        {% for i in paginator.page_range %}
            {% if page_obj.has_next %}
<li><a href="/search/?q={{searchq}}/page={{ page_obj.number }}">{{i}}</a></li>
            {% endif %}
        {% endfor %}

        {% if page_obj.has_next %}
<li><a href="/search/?q={{searchq}}/page={{ page_obj.next_page_number }}">Next</a></li>
        {% endif %}

    </ul>
</div> 
```

现在，我有以下问题：

[1] 虽然模板似乎对第一组进行了分页（即 0 到 14），但我无法在后续页面中看到其他值。所以，当我点击下一页时，我得到：

```
 - http://mydata:8000/search/?q=myquery/page=2 
```

当我再次单击下一页时，我得到：

```
 - http://mydata:8000/search/?q=boots/page=2/page=2 
```

这显然是错误的。我看不到如何生成：

```
 - http://mydata:8000/search/?q=boots/page=3 
```

[2] 即使我手动设置：

```
 - http://mydata:8000/search/?q=boots/page=3 
```

我再次看到从 0 到 14 的值，而不是 page:3 中的逻辑集。

此外，这基本上告诉我，在每一页上，get_queryset 似乎都在运行，生成前 0 到 14 个值——这不是我想要的。

如您所见，我在 get_queryset 中有自己的自定义数据集——而不是任何数据库交互——所以，我不确定如何对这些自定义数据进行分页。

感谢您花时间阅读我相当长的帖子！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T16:49:23.043

查询参数必须用**& 分隔，而不是 /**

```
/search/?q={{searchq}}/page={{ page_obj.previous_page_number }} 
```

应该：

```
/search/?q={{searchq}}&page={{ page_obj.previous_page_number }} 
```

此外，最好的做法是使用 URL 解析器而不是硬编码 url，例如：

```
{% url 'search' searchq page_obj.previous_page_number %} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-21T11:56:42.707

仅作记录，代码应为：

```
{% if is_paginated %}
    <div class="pagination pagination-centered">
    <ul>
    {% if page_obj.has_previous %}
        <li><a href="/search/?q={{searchq}}&page={{ page_obj.previous_page_number}}">Prev</a></li>
    {% endif %}

    {% if page_obj.has_next %}
       {% for i in paginator.page_range %}
          <li><a href="/search/?q={{searchq}}&page={{ i }}">{{i}}</a></li>
        {% endfor %}
          <li><a href="/search/?q={{searchq}}&page={{ page_obj.next_page_number }}">Next</a></li>
    {% endif %}

</ul>
</div> 
```

有两个变化： 1\. page_obj.number 返回实际页面，因此它被递增变量 i 替换。2\. 为清楚起见，将 for 循环移到 page_obj.has_next 内。如果您这样做，则页码链接仅在比提问者预期的页面多的情况下才会显示。如果您仍然想展示它：只需将其移出即可。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-07T21:50:59.320

在研究了这个问题一段时间并从这个条目开始之后，我最终得到了一个复杂但通用的可重用解决方案。

对 OP 来说太过分了，但很多人似乎都有分页和搜索问题，所以这是我的 0.02 美元。

**（对于 Django 来说有点新手，所以我确信有一些需要改进的地方，但是我现在能够很快地将搜索和分页结合起来。请忽略任何关于 'db' 或 'mdb' 的内容，这是高度特定于我的应用程序经常在 Django 数据库之外执行原始 SQL。）**

**概要：**

基本上，我认为我可以用一块石头杀死两只鸟。我处理过滤行集的原因是因为我正在从表单中进行搜索。

而且...该表单非常有能力提供重建分页 URL 所需的信息。

因此，基本上最终得到了一个系统，该系统的工作主要包括构建一个普通的搜索表单，然后将其与 ListView 的适当子类化版本连接起来。请参阅类 RoleListView。

我还需要创建列表视图的模板，但是如果您参考它，@ pssecurity/security_list.html 您会发现它非常基本。

**细节：**

关于分页的聪明之处在于 KSearchListView(ListView) 类。这些东西是完全通用的，我可以在尽可能多的搜索页面上重复使用它。

方法 get_queryset，其中通过调用 form.doSearch 进行数据库过滤。

实际的分页在方法 get_context_data 上，该方法检查是否存在表单，是否有效，然后通过使用表单的已清理参数重新填充它来操作分页 URL。

另请注意，有两个传入的 URL，一个未过滤的列表，一个过滤的搜索）。两者都映射到同一个 ListView。

```
urls

    #Roles aka PSROLEDEFN
    url(r'^roles/search',
        login_required(RoleListView.as_view()),
        name="psroledefn_search"),

    url(r'^roles/$',
        # 'pssecurity.views.psroledefn_list',
        login_required(RoleListView.as_view()),
        name="psroledefn_list"),

        #generic
class KSearchListView(ListView):
    def __str__(self):
        return self.__class__.__name__

    __repr__ = __str__

    form_class = form = None
    di_hardcoded_context = {}

    def setdb(self):
        #specific to my app
        self.db = self.rdb

    def dispatch(self,*args,**kwargs):
        #specific to my app
        if not self.mdb:
            self.mdb = MultiDb.get(self.kwargs["dbr"])
            self.djangodb = self.mdb.djangodb
            self.rdb = self.mdb.rdb
            self.setdb()
        #specific to my app

        return super(KSearchListView, self).dispatch(*args,**kwargs)

    def get_queryset(self,*args,**kwargs):
        # logging.info("%s.get_queryset(%s,%s)" % (self,args,kwargs))

        self.request.get = self.request.GET

        if self.form_class:
            #pagination info
            #do we have a form and are we coming from it?
            if self.request.method == "GET":
                self.form = self.form_class(self.db, self.request.GET)

                if self.form.is_valid():
                    logging.info("form.doSearch")
                    li_c = self.form.doSearch()
                    return li_c
                else:
                    logging.debug("not is_valid branch")
            else:
                self.form = self.form_class(self.mdb.rdb)
        #fetch all rows for the underlying table
        return self.fetch_all()

    def fetch_all(self):
        #specific to my app
        #you would probably use a <model>.objects.all()
        return list(pssys.Pssys.fetch(self.db,self.recname))

    def _override_context_data(self,context):
        pass

    def get_context_data(self,*args,**kwargs):
        # logging.info("%s.get_context_data(%s,%s)" % (self,args,kwargs))

        context = super(KSearchListView, self).get_context_data(**kwargs)
        context['form'] = self.form
        context["dbr"] = self.mdb.rdbname

        #pagination info
        #we are going to put the GET variables right back into the next/prev
        url = ""
        page_obj = context["page_obj"]
        if self.form and self.form.is_valid() and self.form.cleaned_data:

            li = [self.request.path,"?"]

            #driving the url assembly from the form fields and
            #using the cleaned data should be pretty safe
            di = self.form.cleaned_data
            for k in self.form.fields:
                li.append("%s=%s" % (k,di[k]))
                li.append("&")
            # li = li[:-1]
            url = "".join(li)

        #if we didn't come in through a search form
        if not url:
            url = "?"

        #now conditionally add the previous/next as appropriate. 
        #url has either a trailing ? or & at this point
        kpaging_previous_url = kpaging_next_url = ""
        if page_obj.has_previous():
            kpaging_previous_url = context["kpaging_previous_url"] = url + "page=%s" % (page_obj.previous_page_number())
        if page_obj.has_next():
            kpaging_next_url = context["kpaging_next_url"] = url + "page=%s" % (page_obj.next_page_number())

        logging.debug("url:%s" % (url))
        logging.debug("kpaging_previous_url:%s" % (kpaging_previous_url))
        logging.debug("kpaging_next_url:%s" % (kpaging_next_url))

        #pickup anything the subclass has set for the context
        context.update(self.di_hardcoded_context)
        self._override_context_data(context)
        return context

        #what I need to write for every list/search page...

class RoleListView(KSearchListView):

    template_name = "pssecurity/security_list.html" 
    paginate_by = 20
    recname = "PSROLEDEFN"
    form_class = Search_PSROLEDEFN
    di_hardcoded_context = dict(
        title="Search Roles",
        header="Roles",
        templatename_inst="PSROLEDEFN_list",
        url_action='security:psroledefn_search')

#pagination info the forms

        #generic
class SearchForm(forms.Form):
    def __init__(self, db, request=None):
        self.db = db
        li_arg = [request] if request else []

        super(forms.Form, self).__init__(*li_arg)

    def __str__(self):
        return self.__class__.__name__

    __repr__ = __str__

        #what I need to write for every list/search page...
class Search_PSROLEDEFN(SearchForm):
    ROLENAME = forms.CharField(max_length=20, required=False)
    DESCR = forms.CharField(max_length=32, required=False)

    status_custom = ChooseStatusCustomizationField()
    hasUsers = ChooseYesNoDontCareField("has Users?")
    hasPermissions = ChooseYesNoDontCareField("has Permissions?")
    hasPortalReferences = ChooseYesNoDontCareField("has Portal?")

    def doSearch(self):

        ROLENAME = self.cleaned_data["ROLENAME"]
        DESCR = self.cleaned_data["DESCR"].strip()
        status_custom = self.cleaned_data["status_custom"]

        hasPortalReferences = self.cleaned_data["hasPortalReferences"]
        hasPermissions = self.cleaned_data["hasPermissions"]
        hasUsers = self.cleaned_data["hasUsers"]

        #cut out a lot of code specific to my app
        #you would want to do an appropriate
        #<model>.objects.filter()...
        returns <select from my db>

#a typical template, note that isn't even specific to an object
#refer to class RoleListView to see how the template is built.
#the actual details of the fetched objects are left to <templatename_inst>

pssecurity/security_list.html
{% block search %}
<div id="block_search">
<span>{{header}}</span>

<div class="row">
{% if form %}

<div id="search" class="well col-xs-9" >
    <form class= "form-horizontal" action="{% url url_action dbr=dbr %}" method="get">
        {{form.as_table}}
        <input type="submit" value="search">
    </form>
</div>
{% endif %}
{% endblock %}

{%block content %}
<div id = "block_content">
{% for inst in object_list %}
    <div class="row">
        {% include templatename_inst %}
    </div>
{% endfor %}

{% include "websec/kpagination.html" %}

</div>
{%endblock %}

        #generic
kpagination.html
<div class="pagination">
    <span class="step-links" >
        {% if li_inst.has_previous %}
            <a href="?page={{ li_inst.previous_page_number }}">previous</a>
        {% endif %}

        <span class="current" >
            Page {{ li_inst.number }} of {{ li_inst.paginator.num_pages }}.
        </span>

        {% if li_inst.has_next %}
            <a \href="?page={{ li_inst.next_page_number }}">next</a>
        {% endif %}
    </span>
</div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-20T11:59:16.380

我们可以在基于 django 类的 Listview 中执行如下操作

视图.py

```
try:
    from urllib import urlencode
except ImportError:
    from urllib.parse import urlencode

class MyListView(ListView):
    # ............
    def get_context_data(self, *args, **kwargs):
        context = super(
            GroupSubsListView, self
        ).get_context_data(*args, **kwargs)
        query_params = self.request.GET.copy()
        query_params.pop('page', None)
        context['query_params'] = urlencode(query_params)
        return context 
```

模板.html

```
<!-- pagination -->
{% if is_paginated %}
  <p>showing {{ page_obj.start_index }} to {{ page_obj.end_index }} of {{ page_obj.paginator.count }}</p>
  <div class="text-center">
    <nav>
      <ul class="pagination">
        {% if page_obj.has_previous %}
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.previous_page_number }}&{{ query_params }}" aria-label="Previous">
            Previous
          </a>
        </li>
        {% endif %}
        <li class="page-item"><a class="page-link"> Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}. </a></li>
        {% if page_obj.has_next %}
        <li class="page-item">
          <a class="page-link" href="?page={{ page_obj.next_page_number }}&{{ query_params }}" aria-label="Next">
            Next
          </a>
        </li>
        {% endif %}
      </ul>
    </nav>
  </div>
{% endif %}
  <!-- end/ --> 
```

# r - ggplot2 geom_bar 在某些情况下 position="fill" 时会出错

> ID：14959630
> 
> 赞同：3
> 
> 时间：2013-02-19T14:15:54.307
> 
> 标签：r, ggplot2

尝试对 geom_bar 使用 position="fill" 时出现错误。这是一个MWE：

```
temp = data.frame( X=rep(1:10,10), weight=runif(100), fill=rbinom(100,size=3,p=.5) )
temp$weight[temp$fill==3] = 0
ggplot( temp, aes(x=X, weight=weight, fill=as.factor(fill)) ) +
  geom_bar(bin_width=1)
ggplot( temp, aes(x=X, weight=weight, fill=as.factor(fill)) ) +
  geom_bar(bin_width=1,position="fill") 
```

第一个 ggplot 调用工作正常，生成一个条形图，其中每个条形图由对应于级别 0、1 和 2 的 3 种颜色组成。图例显示了最终级别 (3)，但由于权重始终为 0，因此它不会t 出现在图上。

但是，第二个 ggplot 调用返回错误。我原以为它会返回与以前相同的图，但只需将每个条的高度缩放到 1。知道为什么会发生这种情况，是否有解决方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:26:59.970

当`weight`您使用`position=fill`. 如果你这样做：

```
ggplot(temp[temp$weight > 0,], 
    aes(x=X, weight=weight, fill=factor(fill))) + 
    geom_bar(bin_width=1, position="fill") 
```

然后它工作。

# hibernate - 如何自定义 IntelliJ 使用的实体模板？

> ID：14959632
> 
> 赞同：1
> 
> 时间：2013-02-19T14:15:56.640
> 
> 标签：hibernate, templates, intellij-idea

我正在尝试查找 IntelliJ 用于从数据库生成实体的文件模板，但无法找到它。我已经进入设置-> 文件模板，但似乎无法在任何地方找到它。这是可以定制的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:41:12.070

我认为这些类是使用 IntelliJ 的[PSI 树](http://confluence.jetbrains.com/display/IDEADEV/IntelliJ+IDEA+Architectural+Overview#IntelliJIDEAArchitecturalOverview-PsiElements)API 生成的，即由某种 AST 生成，然后将其转换为 Java 代码。所以没有可以修改的模板，而且由于 Java EE 插件不是开源的，所以你没有其他选择来生成不同的类......

# algorithm - 具有优先队列的 Dijkstra 算法

> ID：14959634
> 
> 赞同：5
> 
> 时间：2013-02-19T14:16:03.503
> 
> 标签：algorithm, priority-queue, dijkstra

在我的 Dijkstra 算法的实现中，我有 1 个包含所有节点的数组和 1 个包含所有节点的优先级队列。每当一个节点出队时，我都会用新的距离和它的来源更新所有相邻的节点，这样我就可以回溯路径。

优先级队列中的节点用新的距离更新，数组中的节点用新的距离更新它的来源。当一个节点出队时，数组中的最终距离被更新：

```
 PathInfo current = pq.remove();
  path[current.pos].distance = current.distance; 
```

使用有关前一个节点的信息更新数组和使用距离的优先级队列是否可以接受？

只要找到更好的距离，就会发生这种情况：

```
 PathInfo key(i, newDistance);
      path[i].distance = newDistance;
      path[i].previous = current.pos;
      pq.decreaseKey(key); 
```

用基本相同的信息更新我的数组和优先级队列似乎有点多余。

我目前在 PQ 中使用常规数组作为数据结构。更新优先级是在线性时间内完成的，出队也是在线性时间内完成的。

我应该在优先级队列中使用什么数据结构，我应该如何更改节点优先级？

我正在使用 C++

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T20:56:29.083

您在这里有两种距离：您的优先级队列具有需要更新的“暂定距离”，而您的数组具有“最终距离”，而不是（因为 Dijkstra 的算法不需要更新已从优先级队列）。

您似乎在不必要地更新数组中的距离。也许更改数组节点中的字段名称以记录这一点也是一个好主意：从`arrayNode.distance`到`arrayNode.finalDistance`。

换句话说：您似乎正在使用您的数组节点来输出 Dijkstra 算法的结果——所以您应该只在每个数组节点中设置一次距离，当它从优先级队列中删除时。

* * *

如果您的优先级队列实现不提供查询与给定键关联的当前距离的能力，请检查其`decreaseKey()`操作的行为。如果`decreaseKey()`操作拒绝了新优先级实际上并没有降低的更新，那么您不需要自己执行该检查——您可以为当前节点的每个邻居调用它。

但是，如果该`decreaseKey()`函数不能正确处理这种情况，并且没有辅助查询函数可以让您手动执行该检查，并且没有机会修复任何一个缺陷，那么您需要为此目的维护冗余信息……

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:36:10.977

您可以使用的数据结构：

*   [最小堆](http://en.wikipedia.org/wiki/Min_heap)
*   [段树](http://en.wikipedia.org/wiki/Segment_tree)
*   [芬威克树](http://en.wikipedia.org/wiki/Fenwick_tree)

也许其他一些可以在数组中找到最小的。

当您更新节点的优先级时，您还必须同步您喜欢的数据结构。

**注意：**如果您使用矩阵来检查连接节点，您可能根本不使用数据结构，因为它不会改变算法复杂度我仍然是 O(N^2)（使用直接循环找到具有适当优先级的节点）图有很多节点和少量连接，并存储为连接节点列表（放电图）

# c# - 切换输入

> ID：14959638
> 
> 赞同：0
> 
> 时间：2013-02-19T14:16:14.773
> 
> 标签：c#, windows-7, toggle, slimdx, gamepad

我正在使用 SlimDX 来使用我的 Xbox 360 控制器，我想要一种方法，当按下控制器上的按钮时，状态会变为开启并保持开启，但当我再次按下它时，它会变为关闭。有点像拨动开关。但到目前为止我一直无法做到（真的只是一个初学者）。

谢谢你的帮助。托马斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:17:49.820

您可以使用 a`bool`来确定按钮是打开还是关闭。您还需要知道游戏手柄的先前状态，因此`bool`不会一直切换，只是因为您一直按下按钮。

```
bool myCommand = false; // declare the bool
GamePadState oldState; // you need to know the previous state of your gamepad

public void Update()
{
    if (GamePad.GetState().KeyPressed == /*key*/ && oldState.KeyPressed != /*key*/)
        myCommand = !myCommand;
    oldState = GamePad.GetState();
} 
```

请记住，您可能需要使用`GamePad`or以外的东西`GamePadState`，因为这只是伪代码

# excel - 在文件名中另存为 HHMMSS 的文件上重新使用 SaveAs 功能

> ID：14959639
> 
> 赞同：0
> 
> 时间：2013-02-19T14:16:15.537
> 
> 标签：excel, vba

我有一个文件保存为：

```
wbkVer.SaveAs fileName:=folderPath & Format(Now, "mm-dd-yyyy_hhmmss") & "_Compare.xlsx" 
```

但是，我需要执行其他逻辑，然后再次将其保存到相同的文件名。如果没有再次用 hhmmss 保存它，我找不到这样做的方法。有没有办法像上面那样捕获文件名并将其放入变量中，所以它不会再次将 hhmmss 分配给它？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:21:38.150

只需首先在变量中构造您想要的文件名并使用它来保存，然后再重新使用。

```
dim name as string
name = folderPath & Format(Now, "mm-dd-yyyy_hhmmss") & "_Compare.xlsx"
wbkVer.SaveAs fileName:=name
' now you still have name around to re-use later 
```

说了这么多，如果你需要用相同的名字保存相同的东西，一旦你`wbkVer.SaveAs`第一次完成，你不能`wbkVer.Save`以后使用吗？

# java - 在反射中摆脱未经检查的演员表

> ID：14959642
> 
> 赞同：3
> 
> 时间：2013-02-19T14:16:17.403
> 
> 标签：java, reflection

我正在使用返回我的类加载器加载一个类`Class<?>`，现在我想将该类传递给另一个需要`Class<? extends SomeClass>`.

现在，当我尝试投射时：

```
Class<?> clazzFromClassLoader = Class.forName(nameOfClass);
Class<? extends Someclass> clazz = (Class<? extends SomeClass>)clazzFromClassLoader;
//second line gives unchecked cast warning 
```

我可以通过使用确保没有类转换异常

```
SomeClass.isAssignableFrom(clazzFromClassLoader); 
```

但是有没有办法摆脱未经检查的演员表？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-19T14:19:26.170

是的：你可以写：

```
Class<? extends Someclass> clazz =
    clazzFromClassLoader.asSubclass(Someclass.class); 
```

（有关更多信息，请参阅[`asSubclass`的 Javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#asSubclass%28java.lang.Class%29)。）

# ruby-on-rails - 查看 Rails 文件网络上的原始文件

> ID：14959644
> 
> 赞同：1
> 
> 时间：2013-02-19T14:16:19.673
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我想通过网络上的浏览器查看这个和另一个 rails 3.2.8 文件。

actionpack-3.2.8/lib/action_view/template/resolver.rb

我知道 GitHub 有 railsdoc，但我不知道是哪个版本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:25:09.757

[该文件可在此处](https://github.com/rails/rails/blob/v3.2.8/actionpack/lib/action_view/template/resolver.rb)供公众使用

在 github 上查找文件时，只需确保您设置了正确的标签，请参见下图：

![在此处输入图像描述](../Images/b022e210a73cfab1f7cb91768df95333.png)

# linux - 如何为 SystemTap 使用 stapdev 和 stapusr 组？

> ID：14959645
> 
> 赞同：1
> 
> 时间：2013-02-19T14:16:25.590
> 
> 标签：linux, ubuntu, linux-kernel, setuid, systemtap

我试图将自己添加到`stapdev`并`stapusr`在`stap`没有`sudo`. 我正在尝试运行一个简单的示例，但出现如下错误：

```
$ groups
gokce adm cdrom sudo dip plugdev lpadmin sambashare stapdev stapusr
$ cat hello.stp
probe begin
{
  print ("hello world\\n")
  exit ()
}
$ stap hello.stp
Warning: /usr/bin/staprun exited with status: 1
Pass 5: run failed.  Try again with another '--vp 00001' option. 
```

使用`sudo`它似乎工作正常：

```
$ sudo stap hello.stp
hello world 
```

我怎样才能做到这一点？

**笔记**

我使用的是 ubuntu 12.04 系统并安装了`systemtap`包

**编辑**

```
$ ls -la /usr/bin | grep staprun
-rwsr-x---  1 root   stapusr   148712 Jan 30  2012 staprun 
```

# android - 获取相对于屏幕的标记坐标 Google Maps API v3

> ID：14959646
> 
> 赞同：3
> 
> 时间：2013-02-19T14:16:27.523
> 
> 标签：android, google-maps, google-maps-api-3, google-maps-markers, google-maps-android-api-2

据我了解，jQuery 无法读取谷歌地图数据。那么有没有一种纯javascript方法来获取相对于屏幕的标记坐标？（左上方（））。谢谢。

编辑： *投影*类通过 API v2 中的 toScreenLocation() 方法做到了这一点，但我如何在 v3 中实现相同的效果？

编辑 2：我正在使用 Android SDK 中的 WebView 来加载地图。

**答案**见：[https ://stackoverflow.com/a/6671206/997633](https://stackoverflow.com/a/6671206/997633)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:19:03.737

也许试试这个？

```
var point;
var pointIWant = projection.fromLatLngToPoint(marker.getPosition(), point); 
```

根据[Google Maps API docs](https://developers.google.com/maps/documentation/javascript/reference)，[google.maps.Projection.fromLatLngToPoint()](https://developers.google.com/maps/documentation/javascript/reference#Projection)将纬度/经度坐标转换为屏幕上的一个点。

# spring - 迭代 ResultSet 时 JDBC 丢失连接

> ID：14959648
> 
> 赞同：2
> 
> 时间：2013-02-19T14:16:28.797
> 
> 标签：spring, jdbc, resultset, jdbctemplate

在我的应用程序中，我使用 Spring 和 JdbcDAOSupport 通过 TCP/IP 连接到 MSSQL 数据库。当连接稳定时它工作正常，但是当我在遍历结果集时拔下以太网电缆时，应用程序会挂起。它不会抛出任何异常。

```
JdbcTemplate jdbc = getJdbcTemplate();
return jdbc.query(sql, mapper, someArgs); 
```

其中 mapper 是我自己的 RowMapper 类。我尝试使用 Connection 和 PreparedStatement 并没有解决问题。有没有人对此有任何解决方案或有类似的问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T15:12:51.837

应用程序挂起，因为 TCP/IP 的设计考虑了不良连接。当一个数据包没有到达它的目的地时，发送者简单地用指数回退重试。如果此行为不可取，则配置套接字阻塞超时 (SO_TIMEOUT)。

不幸的是，SQL Server JDBC 驱动程序没有配置套接字超时的选项，因此它会无限期地阻塞。

正如 Nathan Hughes 在他的评论中指出的那样，[jTDS 驱动程序](http://jtds.sourceforge.net/)确实有一个配置 socketTimeout 的选项，因此您可以尝试使用该驱动程序。

# c# - 通过 TCP 订阅，反序列化每个收到的 JSON 行

> ID：14959653
> 
> 赞同：0
> 
> 时间：2013-02-19T14:16:38.250
> 
> 标签：c#, json, streaming, deserialization, tcpclient

```
tcp_connection = tcp_connect('localhost', 20060)
// the server will always send responses on one line.
tcp_connection.on('line', function (line) {
json = json.decode(line)
if(json.result == "success") {
    // etc, etc, etc.
}
})
tcp_connection.write("/api/subscribe?source={sourceName}&key={key}&show_previous={true|false}") //stream API request 
```

嗯，这是我得到的一个伪代码，我不知道如何用 C# 重写它。我得到了这样的东西：

```
TcpClient connection = new TcpClientWithTimeout(host, 20059, 20000).Connect();
NetworkStream stream = connection.GetStream(); 
```

我不知道如何替换“tcp_connection.on”，所以，在我通过 TCP 订阅后，我得到的每一行都使用 json.decode 转换为字符串（如果有帮助，响应格式为：

```
{"result":"success/error","source": "{source}","success":{"time": TIME RECEIVED,"line":"RECEIVED LINE"}} ) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T07:12:22.873

就像是：

```
TcpClient connection = new TcpClientWithTimeout(host, 20059, 20000).Connect();
NetworkStream stream = connection.GetStream();
var reader = new StreamReader(stream);
var writer = new StreamWriter(stream);
var line = reader.ReadLine();
if (line != "success")
    throw new InvalidOperationException("Failed to connect");

writer.WriteLine(@"/api/subscribe?source={sourceName}&key={key}&show_previous={true|false}"); 
```

之后，您只需开始阅读行：

```
while ((line = reader.ReadLine()) != null)
{
    Console.WriteLine("Got event: " + line);
} 
```

# asp.net-mvc - 在 .net MVC 中上传文件

> ID：14959656
> 
> 赞同：0
> 
> 时间：2013-02-19T14:16:48.823
> 
> 标签：asp.net-mvc, file-upload, asp.net-mvc-4

我正在使用fineuploader 上传文件。对于 200MB 以下的文件，一切正常。一切都失败了。创建了一个新文件，但它是空的（意思是 0kb）

已经修改了我的 web.config 以允许最多 500mb 的上传。但似乎没有帮助。

**网络配置：**

```
 <security>
      <requestFiltering>
          <requestLimits maxAllowedContentLength="524288000" />
      </requestFiltering>
  </security> 
```

和

```
<httpRuntime targetFramework="4.5" maxRequestLength="512000" executionTimeout="900" requestLengthDiskThreshold="512000" /> 
```

**控制器：**

```
[HttpPost]
public ActionResult Upload(string qqfile)
{
    try
    {
        Stream stream = Request.Files.Count > 0 ? Request.Files[0].InputStream : Request.InputStream;

        string filePath = Path.Combine(@"C:\Temp\100", qqfile);
        using (Stream file = System.IO.File.OpenWrite(filePath))
        {
            stream.CopyTo(file);
        }
.... 
```

为什么我不能上传超过 200MB 的文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T07:25:20.453

想通了：这是一个 web.config 设置：

网络配置：

```
<httpRuntime targetFramework="4.5" maxRequestLength="2147483647" executionTimeout="90" requestLengthDiskThreshold="2147483647" /> 
```

和

```
 <system.webServer>
      <security>
          <requestFiltering>
              <requestLimits maxAllowedContentLength="4294967295" />
          </requestFiltering>
      </security>
  </system.webServer> 
```

感谢 Yasser 为我指明了正确的方向

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T23:25:46.690

首先想到的是 IIS 中的限制。在 IIS7 中的“集成模式”之前，必须处理 IIS-MetaBase 以设置 IIS 属性。

如果您在“集成模式”下运行您的网站或使用 VS Development Webserver（基于 Cassini），它可能会工作，如果您在“经典模式”下运行生产，它将不会使用集成配置并回退到元数据库。如果是这样并且您还没有编辑元数据库，那么任何超过默认元数据库上传限制的上传都将失败。

从您的代码/配置/问题中，我无法确定您遇到问题的网站正在运行什么模式 - 这对于回答您的问题可能至关重要 - 所以请提供这些详细信息。

# gcc - 带有 gcc 的 STM32F4 上的 FreeRTOS 堆栈损坏

> ID：14959663
> 
> 赞同：3
> 
> 时间：2013-02-19T14:17:17.910
> 
> 标签：gcc, arm, freertos, stack-corruption, stm32f4discovery

我试图让 FreeRTOS 在我的 stm32f4discovery 板上运行。我已经安装了[召唤臂工具链](https://github.com/esden/summon-arm-toolchain)并创建了一个 Makefile 来编译我的代码。这是生成文件：

```
TOOLCHAIN_PATH:=/usr/local/sat/bin
TOOLCHAIN_PREFIX:=arm-none-eabi
OPTLVL:=0
FREERTOS:=..
STARTUP:=$(CURDIR)/startup
LINKER_SCRIPT:=$(FREERTOS)/Utilities/stm32_flash.ld
INCLUDE=-I$(CURDIR)
# Setting other include path...
BUILD_DIR = $(CURDIR)/build
BIN_DIR = $(CURDIR)/binary
vpath %.c  $(CURDIR)
# Setting other vpath...
vpath %.s $(STARTUP)
ASRC=startup_stm32f4xx.s
# Project Source Files
SRC+=stm32f4xx_it.c
SRC+=system_stm32f4xx.c
SRC+=main.c
# FreeRTOS Source Files
SRC+=port.c
SRC+=list.c
SRC+=queue.c
SRC+=tasks.c
SRC+=timers.c
SRC+=heap_2.c
SRC+=syscalls.c
SRC+=stm32f4xx_usart.c
# Other peripheral source files...
CDEFS=-DUSE_STDPERIPH_DRIVER
CDEFS+=-DSTM32F4XX
CDEFS+=-DHSE_VALUE=8000000
MCUFLAGS=-mcpu=cortex-m4 -mthumb -mfpu=fpv4-sp-d16 -mfloat-abi=softfp
COMMONFLAGS=-O$(OPTLVL) -g -Wall
CFLAGS=$(COMMONFLAGS) $(MCUFLAGS) $(INCLUDE) $(CDEFS)
LDLIBS=
LDFLAGS=$(COMMONFLAGS) -fno-exceptions -ffunction-sections -fdata-sections -nostartfiles -Wl,--gc-sections,-T$(LINKER_SCRIPT)
OBJ = $(SRC:%.c=$(BUILD_DIR)/%.o)
CC=$(TOOLCHAIN_PATH)/$(TOOLCHAIN_PREFIX)-gcc
LD=$(TOOLCHAIN_PATH)/$(TOOLCHAIN_PREFIX)-gcc
OBJCOPY=$(TOOLCHAIN_PATH)/$(TOOLCHAIN_PREFIX)-objcopy
AS=$(TOOLCHAIN_PATH)/$(TOOLCHAIN_PREFIX)-as
AR=$(TOOLCHAIN_PATH)/$(TOOLCHAIN_PREFIX)-ar
GDB=$(TOOLCHAIN_PATH)/$(TOOLCHAIN_PREFIX)-gdb

$(BUILD_DIR)/%.o: %.c
    $(CC) $(CFLAGS) $< -c -o $@

all: $(OBJ)
    $(AS) -o $(ASRC:%.s=$(BUILD_DIR)/%.o) $(STARTUP)/$(ASRC)
    $(CC) -o $(BIN_DIR)/$(TARGET).elf $(LDFLAGS) $(OBJ) $(ASRC:%.s=$(BUILD_DIR)/%.o) $(LDLIBS)
    $(OBJCOPY) -O ihex $(BIN_DIR)/$(TARGET).elf $(BIN_DIR)/$(TARGET).hex
    $(OBJCOPY) -O binary $(BIN_DIR)/$(TARGET).elf $(BIN_DIR)/$(TARGET).bin 
```

我修改了 FreeRTOS 演示项目的文件夹 CORTEX_M4F_STM32F407ZG-SK 中的项目（删除现有任务并创建我自己的）。这是主要功能：

```
int main(void) {
    int ret;
    prvSetupHardware();
    DebugPrintf("FreeRTOS v7.3.0 starting\n");
    ret = xTaskCreate(SampleTask0, (signed char *) "T0", configMINIMAL_STACK_SIZE, NULL, 2, NULL);
    if (ret == pdTRUE) {
        DebugPrintf("Task %x creared successfully:%d.\n", SampleTask0, ret);
    } else {
        DebugPrintf("Task 0 created failed.\n");
    }
    ret = xTaskCreate(SampleTask1, (signed char *) "T1", configMINIMAL_STACK_SIZE, NULL, 1, NULL);
    if (ret == pdTRUE) {
        DebugPrintf("Task %x creared successfully:%d.\n", SampleTask1, ret);
    } else {
        DebugPrintf("Task 1 created failed.\n");
    }
    DebugPrintf("Starting scheduler...\n");
    vTaskStartScheduler();
    for (;;);
} 
```

我在 FreeRTOSConfig.h 中将 configMINIMAL_STACK_SIZE 配置为 4096，并且代码运行良好，因为任务计划程序启动并调用了我的 SampleTask0 函数。下面是任务代码：

```
void SampleTask0(void *pvParameters) {
    (void) pvParameters;
    uint16_t delay;
    for (;;) {
        delay = 10000;
        DebugPrintf("Task 0 running\n");
        while(delay) {delay--;}
    }
    vTaskDelete(NULL);
} 
```

任务 1 的功能与任务 0 几乎相同，只是它打印不同的信息。这些代码可以编译，并且在我将二进制文件写入我的开发板后，SampleTask0 无法按预期工作。通过 USART3 发送字符的 DebugPrintf 函数只打印“Tas”，然后一切都停止。我用gdb跟踪代码并逐步执行代码，打印了“Task 0 running”，但是当它返回到任务函数时（在“while（delay）{delay--;}”之前）发生错误：

无法访问地址 0xa5a5a5a5 的内存

在 main.c 中的 SampleTask0 (pvParameters=0x0)...

根据 FreeRTOS[文档](http://www.freertos.org/FAQMem.html#StackSize)，每个任务的堆栈在创建时填充 0xa5 字节。我认为堆栈可能有问题。我已将 configCHECK_FOR_STACK_OVERFLOW 设置为 2 以启用堆栈溢出检测，但发生这种情况时尚未调用我的钩子函数。

CORTEX_M4F_STM32F407ZG-SK 中的 startup_stm32f4xx.s 是为 EWARM 工具链创建的，我将其替换为我从 ST 网站下载的 STM32F4-Discovery_FW_V1.1.0 中的启动文件。所以它可能会破坏堆栈，但我不确定这一点。有人对此有想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T08:13:45.490

此顶部的线程存档在这里：自上次存档快照以来的任何其他信息都可以在实时 FreeRTOS 支持论坛上找到。[http://www.freertos.org/FreeRTOS_Support_Forum_Archive/February_2013/freertos_FreeRTOS_stack_corruption_on_STM32F4_with_gcc_6772412.html](http://www.freertos.org/FreeRTOS_Support_Forum_Archive/February_2013/freertos_FreeRTOS_stack_corruption_on_STM32F4_with_gcc_6772412.html)

# php - new PHPMailer() 销毁 Session

> ID：14959666
> 
> 赞同：2
> 
> 时间：2013-02-19T14:17:25.530
> 
> 标签：php, session, phpmailer

我的脚本中有一个非常奇怪的错误，我找不到错误。

我想通过外部服务器上的 SMTP 发送电子邮件，例如发送到 gmail-Server。发送电子邮件后，脚本应使用附加参数重定向到自身。会话 ID 也存储为 $_GET 参数。我的代码如下：

```
$mail = new PHPMailer();
    $mail->IsSMTP();
    $mail->SMTPAuth = false; 
    $webmaster_email = "hayo@gmail.com"; 
    $email="hayo@gmail.com"; 
    $name="Simon";
    $mail->From = $webmaster_email;
    $mail->FromName = "Simon";
    $mail->AddAddress($empfaenger, $row['name'] . " " .$row['name']);
    $mail->AddReplyTo($webmaster_email,"Webmaster");
    $mail->WordWrap = 50; 
    $mail->AddAttachment($filename); 
    $mail->IsHTML(false); 
    $mail->Subject = $betreff;
    $mail->Body = $nachricht; 
    $mail->AltBody = $nachricht; 
    if(!$mail->Send())
    {
        echo "Mailer Error: " . $mail->ErrorInfo;
    }
header('Location: http://somedomain.com/somedirectory?sid='.$_GET['sid'].'&step=step2&message=a1'); 
```

现在的问题是，我的 Session 总是丢失/破坏，我不知道到底是什么。奇怪的是：当我评论 new PHPMailer(); 时重定向有效。线路输出。

我现在正在寻找问题几个小时......我希望有人能够帮助我。

问候，西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:45:29.573

我明白了，删除行

```
$email="hayo@gmail.com"; 
```

没有问题了。不知道为什么，但感谢您的帮助！

# shell - 在 shell 脚本中为变量添加空格

> ID：14959671
> 
> 赞同：1
> 
> 时间：2013-02-19T14:17:34.610
> 
> 标签：shell, sh, spaces

我想从 sh 脚本创建一个 yaml 配置文件。所以我需要向这样的变量添加多个空格：

```
SERVERS=""
for i in $(seq 1 5); do
    SERVERS="$SERVERS      -server`printf "%03d" $i`.$URL\n"
done 
```

但是空间减少到只有一个空间。如何确保不替换空格？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:20:43.047

我怀疑您在回显时忘记使用双引号`$SERVER`=)

```
SERVERS=""
for i in $(seq 1 5); do
    SERVERS="$SERVERS      -server$(printf "%03d" $i).$URL\n"
done
echo "$SERVER" 
```

输出 ：

```
 -server001.\n      -server002.\n      -server003.\n      -server004.\n(...) 
```

这就是（不是那么）了不起的[*分词规则*](http://www.gnu.org/software/bash/manual/html_node/Word-Splitting.html)

* * *

[使用perl](/questions/tagged/perl "显示标记为“perl”的问题")的另一种解决方案：

```
perl -le 'for (1..5) { print "   -server$_"}' | tee -a file.yaml 
```

或使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")：

```
awk 'BEGIN{for (i=1; i<=5; i++) print "   -server"++c}'  |
    tee -a file.yaml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:28:12.547

你最终会做什么`SERVERS`？而不是尝试建立一个多行字符串，这样的事情可能会更好：

```
for i in $(seq 1 5); do
    echo "     -server$(printf "%03d" $i).$URL"
done >> file 
```

# c# - WPF 在代码中动态设置 CommandParameter 绑定

> ID：14959672
> 
> 赞同：3
> 
> 时间：2013-02-19T14:17:40.530
> 
> 标签：c#, wpf, dynamic, binding, commandparameter

我需要动态创建一些 TreeViewItem，它们中的每一个都需要有一个绑定到 DoubleClick 鼠标操作的命令。问题是我想向这个命令传递一个参数，但我不知道该怎么做。

当前代码：

```
 private void AddExecuted(object sender, ExecutedRoutedEventArgs e)
    {
        MyTreeViewItem T = new MyTreeViewItem();

        InputBinding IB = new InputBinding(RenameCommand, new MouseGesture(MouseAction.LeftDoubleClick));
        Binding B = new Binding("SelectedItem");
        B.Source = MainTV;

        //BindingOperations.SetBinding(IB, IB.CommandParameterProperty /*CommandParameterProperty  does not exist*/, B);

        T.InputBindings.Add(IB);

        MainTV.Items.Add(T);            

        e.Handled = true;
    } 
```

我通常以这种方式在 XAML 中设置：

```
 CommandParameter="{Binding Path=SelectedItem, ElementName=MainTV}" 
```

如何在代码中动态设置？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T08:30:30.203

解开谜团！
我真的不知道为什么，但 InputBinding.CommandParameterProperty 仅从 .NET 框架 4.0 开始可用。我正在使用 3.0，所以我无法在代码中绑定 CommandParameter。
如果有人知道如何绕过它，那将非常有帮助。

[https://msdn.microsoft.com/it-it/library/system.windows.input.inputbinding.commandparameterproperty(v=vs.100).aspx](https://msdn.microsoft.com/it-it/library/system.windows.input.inputbinding.commandparameterproperty(v=vs.100).aspx)

# java - Android Dropbox API - 如何从 SharedPreferences 中检索身份验证密钥

> ID：14959680
> 
> 赞同：2
> 
> 时间：2013-02-19T14:18:00.990
> 
> 标签：java, android, sharedpreferences, dropbox-api

我在我的应用程序中使用 Dropbox 核心 Api。当用户在启动时授权应用程序时，会创建一个密钥和一个密钥，允许应用程序与他们的 Dropbox 交互。我通过这样做将这些密钥存储在 SharedPreferences 中：

```
private void storeKeys(String key, String secret) {
    // Save the access key for later
    SharedPreferences prefs = getSharedPreferences(ACCOUNT_PREFS_NAME, 0);
    Editor edit = prefs.edit();
    edit.putString(ACCESS_KEY_NAME, key);
    edit.putString(ACCESS_SECRET_NAME, secret);
    edit.commit();
    Log.d("DbAuthLog", key);
    Log.d("DbAuthLog", secret);
} 
```

密钥和秘密在日志窗口中显示为 jkhfdsfuyuefd 和 yde767eyshy（当然是为了安全的假密钥）。

现在，当我去取回他们的钥匙时，我正在这样做：

```
private AccessTokenPair getStoredKeys() { //Need to fix this and test

    SharedPreferences accessKey = getSharedPreferences(ACCESS_KEY_NAME, 0);
    SharedPreferences secretKey = getSharedPreferences(ACCESS_SECRET_NAME, 0);
    System.out.println(accessKey + "--" + secretKey + "from storeKeys");
    return null; 
```

问题是，当我从 getStoredKeys 输出项目时，它们以 --android.app.SharedPreferencesImpl@41201188--android.app.SharedPreferencesImpl@41201928 的形式返回 - 现在与我存储的内容相匹配。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:19:53.287

您正在错误地访问您的首选项。

```
SharedPreferences prefs = getSharedPreferences(ACCOUNT_PREFS_NAME, 0);
String accessKey = prefs.getString(ACCESS_KEY_NAME);
String secretKey = prefs.getString(ACCESS_SECRET_NAME); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:22:46.357

您将这些令牌作为字符串存储在 SharedPreference 中，您需要将它们作为字符串取回。

```
private AccessTokenPair getStoredKeys() { //Need to fix this and test
SharedPreferences prefs = getSharedPreferences(ACCOUNT_PREFS_NAME, 0);
String accessKey = prefs.getString(ACCESS_KEY_NAME, "");
String secretKey = prefs.getString(ACCESS_SECRET_NAME, "");
System.out.println(accessKey + "--" + secretKey + "from storeKeys");
return null; 
```

# c# - 如何自动更新包含文件最后修改日期的属性？

> ID：14959683
> 
> 赞同：1
> 
> 时间：2013-02-19T14:18:22.633
> 
> 标签：c#, asp.net, asp.net-mvc, file

我有一个具有 datetime 属性的实体，`ImageModifiedDate`它存储图像的最后修改日期。如果我更改图像，这个属性可以以某种方式自动更新吗？我的意思是这个属性可以绑定到文件（图像）并且可以在实际文件更改时（自动）更改吗？

我在 asp.net mvc 3 应用程序中需要这个，但我认为它也可以标记为 c# 问题。

**已编辑：**我将图像存储在文件流中，而不是数据库中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:25:09.130

看起来你有两个方面的问题：更新数据库中的最后修改日期，并知道数据库已经更改，然后显示更改。

首先，创建一个 Windows 服务或类似程序，并让它使用 FileSystemWatcher 来监视文件更改。然后它可以用新信息更新数据库。

至于在 Web 应用程序中显示更改，您可以让应用程序通过 AJAX 轮询并更新显示日期的 HTML。这样，您就不必在日期更改时更新整个页面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:25:38.647

您将需要某种服务来检查您的图像并检查它们以查看它们是否已更新。它需要做这样的事情：

```
foreach (var image in dbcontext.Images)
{
    var filename = image.Filename;
    var lastModified = System.IO.File.GetLastWriteTime(filename);

    if (lastModified != image.LastModified) 
    {
        image.LastModified = lastModified;        
    }
}

dbcontext.SaveChanges(); 
```

请记住，您需要做出权衡决定。您可以让它不断运行，但这会降低您的服务器速度。或者您可以每分钟或每五分钟运行一次，具体取决于您拥有多少图像以及完成该过程需要多长时间。

或者，您可以使用`FileSystemWatcher`, 类似的东西（请记住，我尚未测试此代码，但这足以让您入门）：

```
FileSystemWatcher watcher = new FileSystemWatcher();
watcher.Path = "your path here";
watcher.NotifyFilter = NotifyFilters.LastWrite | NotifyFilters.FileName | NotifyFilters.DirectoryName;
watcher.Filter = "*.jpg";

watcher.Changed += new FileSystemEventHandler(OnChanged);
watcher.Created += new FileSystemEventHandler(OnChanged);
watcher.Deleted += new FileSystemEventHandler(OnChanged);
watcher.Renamed += new RenamedEventHandler(OnRenamed);

private static void OnChanged(object source, FileSystemEventArgs e)
{
    // Specify what is done when a file is changed, created, or deleted.
   Console.WriteLine("File: " +  e.FullPath + " " + e.ChangeType);
}

private static void OnRenamed(object source, RenamedEventArgs e)
{
    // Specify what is done when a file is renamed.
    Console.WriteLine("File: {0} renamed to {1}", e.OldFullPath, e.FullPath);
} 
```

# netbeans - 类和 Jar 的 Microsoft Access 数据库连接路径

> ID：14959685
> 
> 赞同：1
> 
> 时间：2013-02-19T14:18:27.533
> 
> 标签：netbeans

我一直在这个论坛上搜索这个和谷歌搜索。我仍然坚持这一点。我是 Netbeans/Java 的新手。这是我想做的，并尝试通过几天。

我有一个名为资源的文件夹，路径就像这个 src/resources，在“资源”文件夹中，有一个 MS Access 数据库文件：Database1.mdb。

如果我使用完整路径：示例：

```
C:\Users\Mr A B\Documents\NetBeansProjects\Report\src\report\resources\Database1.mdb

java.sql.Connection conn = DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)}; DBQ=C:\\Users\\Mr A B\\Documents\\NetBeansProjects\\Report\\src\\report\\resources\\Database1.mdb 
```

我能够测试和运行。但是当从包含清理和构建的 jar 文件的“Dist”文件夹运行时，`Exception "Data Source Name not found and No Default Driver Specified"`

我试过了

`getClass().getResource("resources/Database1.mdb")`

和

`URL url=Connection.class.getResource(resources/Database1.mdb");`

只需提供 App.path 即可在 C#/VB.net 中轻松完成。

我快没主意了。

请帮忙

谢谢

# sql - 使用动态 SQL 创建表

> ID：14959690
> 
> 赞同：1
> 
> 时间：2013-02-19T14:18:43.570
> 
> 标签：sql, sql-server, sql-server-2008-r2, dynamic-sql

以下作品：

```
DECLARE @cols AS NVARCHAR(MAX),
        @query AS NVARCHAR(MAX);

SET @cols = 
STUFF
    (
        (
        SELECT   ',' + QUOTENAME(b."NewName")
        FROM    (
                    SELECT  myKey, 
                        win = SUM(win)
                    FROM    xxx.dbo.yyy
                    GROUP BY myKey
                    ) x
                    INNER JOIN #NameSwitch b ON
                        x.myKey = b.myKey
        ORDER BY x.win DESC
        FOR XML PATH(''), TYPE
        ).value('.', 'NVARCHAR(MAX)') 
    ,1,1,'');

SET @query =    
    'SELECT [Measure],' + @cols + ' 
    FROM  
        (
            SELECT  [NewName], [Measure], [Amount]
            FROM    #UnpivottedData x
        ) x
        PIVOT 
        (
            SUM(Amount)
            FOR [NewName] in (' + @cols + ')
        ) p ';

EXECUTE(@query); 
```

但问题是我想将结果输入到一个临时表中`#xxx`，然后以后就可以通过`SELECT * FROM #xxx`.

在运行上述之前我需要`CREATE`#xxx使用吗？`dynamic sql`如果是这样，任何人都可以向我指出完成此操作的示例的方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:23:36.150

尝试更改包括 into 子句

```
SET @query =    
'SELECT [Measure],' + @cols + ' 
 into ##xxx
FROM  
    (
        SELECT  [NewName], [Measure], [Amount]
        FROM    #UnpivottedData x
    ) x
    PIVOT 
    (
        SUM(Amount)
        FOR [NewName] in (' + @cols + ')
    ) p '; 
```

这将为结果创建临时表...

如果你真的想在选择之前创建..

您需要收集列的类型来构建创建表语句..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T14:29:57.570

弗雷德里克*几乎*是对的——

动态 SQL 在与调用批处理不同的范围内执行。在动态 SQL 批处理中声明的任何临时对象（表、变量）仅在动态 SQL 批处理中可用。您将能够`SELECT INTO`创建一个**全局**临时表——因为它们是特定于连接的，并且将在动态 SQL 批处理中持续存在。

[sp_executesql](http://msdn.microsoft.com/en-us/library/ms188001.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T14:58:21.820

似乎您可以获取列名，所以我假设您可以获取列类型。所以你可以这样做（伪代码）

```
CREATE TABLE #XXX (Measure <type>)
//
   generate scripts like 
SET @SQL = N'ALTER TABLE #XXX ADD '+ ColumnName+' '+ColumnTypeInfo
EXEC SP_ExecuteSQL @SQL
//

SET @query =    
    'INSERT INTO #XXX ([MEASURE], '+@cols+')
     SELECT [Measure],' + @cols + ' 
    FROM  
        (
            SELECT  [NewName], [Measure], [Amount]
            FROM    #UnpivottedData x
        ) x
        PIVOT 
        (
            SUM(Amount)
            FOR [NewName] in (' + @cols + ')
        ) p ';

EXECUTE(@query); 
```

附言

1.  我自己会选择`EXEC sp_executeSQL @SQL`，`EXEC (@SQL)`但在这种情况下只是口味问题
2.  我会简化代码 - 您实际上并不需要该`STUFF`部分，因为您需要连接中的第一个逗号，因此无需删除它。此外，您正在强制 XML 列（带有`TYPE`子句）仅将其转换为`NVARCHAR`

**稍后编辑**

免责声明：这未经测试，因为我没有您的表结构和数据

```
DECLARE @cols NVARCHAR(MAX),
        @query NVARCHAR(MAX), 
        @alter_query NVARCHAR(max);

SET @cols = 
        (
        SELECT   ',' + QUOTENAME(b."NewName")
        FROM    (
                    SELECT  myKey, 
                        win = SUM(win)
                    FROM    xxx.dbo.yyy
                    GROUP BY myKey
                    ) x
                    INNER JOIN #NameSwitch b ON
                        x.myKey = b.myKey
        ORDER BY x.win DESC
        FOR XML PATH('')
        ) -- this will render smth like ",col1,col2" 
SET @alter_query = 
        (
        SELECT   ';ALTER TABLE #XXX ADD ' + QUOTENAME(b."NewName") +' '+ QUOTENAME(b."ColType") +' NULL'
        FROM    (
                    SELECT  myKey, 
                        win = SUM(win)
                    FROM    xxx.dbo.yyy
                    GROUP BY myKey
                    ) x
                    INNER JOIN #NameSwitch b ON
                        x.myKey = b.myKey
        ORDER BY x.win DESC
        FOR XML PATH('')
        ) -- this will render smth like ";ALTER TABLE #XXX ADD col1 VARCHAR(MAX);ALTER ..." 

CREATE TABLE #XXX (Measure INT NULL)

EXEC sp_ExecuteSQL @alter_query

SET @query =    
    'INSERT INTO #XXX (Measure+'@Cols+') SELECT [Measure]' + @cols + ' 
    FROM  
        (
            SELECT  [NewName], [Measure], [Amount]
            FROM    #UnpivottedData x
        ) x
        PIVOT 
        (
            SUM(Amount)
            FOR [NewName] in (' + STUFF(@cols, 1, 1, '') + ') -- here you need the STUFF to remove the first comma
        ) p ';

EXEC sp_ExecuteSQL @Query

SELECT * from #XXX 
```

# php - 检查 WHERE 子句中的条件

> ID：14959692
> 
> 赞同：0
> 
> 时间：2013-02-19T14:18:52.977
> 
> 标签：php, mysql, sql

我的选择查询有问题。我有 4 个条件来检查这个查询。

```
$subject // This condition is always true that mean it has a value when executing the query
$option // This condition is also true that mean it has a value when executing the query
$district // Maybe this is true or not
$city // Maybe this is true or not 
```

现在我需要使用这 4 个条件进行选择查询。

我能知道有没有办法将这 4 个条件添加到我的 WHERE 子句中，然后检查哪些是真或假，然后根据查询满足的条件返回记录。

希望有人能帮助我。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:20:38.440

当然 - 将它们与`AND`或连接`OR`

```
SELECT * FROM .. WHERE subject=? AND ... 
```

希望，您逃避输入（如果您使用准备好的语句，PDO 会为您完成这项工作）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:21:26.533

这个怎么样？

```
WHERE   $subject = 1 AND
        $option = 1 AND
        $district IN (0,1) AND
        $city IN (0,1) 
```

# intellij-idea - 如何在不删除实体的情况下重新生成实体？

> ID：14959693
> 
> 赞同：0
> 
> 时间：2013-02-19T14:18:54.267
> 
> 标签：intellij-idea, entities

我在我的一个 MySQL 表中添加了一列，然后去重新生成我的实体，虽然它似乎正在重新生成，但我没有看到我添加的列反映在模型中。IntelliJ 不支持实体的再生，还是我需要做其他事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T17:12:20.423

生成基于**缓存的模式**工作。如果在生成对话框中`Database View`或在生成对话框中看不到此新列，请**刷新**架构。

# python - python ftplib 奇怪的行为

> ID：14959694
> 
> 赞同：4
> 
> 时间：2013-02-19T14:18:54.483
> 
> 标签：python, ftplib

尝试使用 ftplib 连接到 ftp 服务器时，我遇到了一些非常奇怪的行为。我正在做的是：

```
import ftplib
ftp = ftplib.FTP('my-ftp-server')
ftp.login('user ', 'pass') 
```

现在，如果我从 python 解释器运行它们，它工作正常，我得到：

```
'230 Login successful.' 
```

但我想把这些放在一个可以为我做事的好脚本中。当我把这些都放在一些python脚本中并运行时：

```
 python my_ftp_stuff.py 
```

我得到：

```
 ftplib.error_perm: 530 Login incorrect. 
```

我真的不知道是什么导致了这种奇怪的行为。有人对尝试什么有任何提示吗？

最好的祝福

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T14:32:57.730

您的用户名字段中有一个空格 ( `' '`) 字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T14:34:49.413

您应该将登录名和密码传递给 __init__ 而不是登录方法：

```
import ftplib
ftp = ftplib.FTP('my-ftp-server', 'login', 'password')
print(ftp.dir()) 
```

# c# - 如何为 Json 使用 DataContractJsonSerializer？

> ID：14959698
> 
> 赞同：3
> 
> 时间：2013-02-19T14:19:06.997
> 
> 标签：c#, asp.net, json

我有这样的json结构：

```
{
   "id":"12345",
   "first_name": "dino",
   "last_name": "he",
   "emails": {
      "preferred": "1",
      "personal": "2",
      "business": "3",
      "other": "4"
   }
} 
```

我想在电子邮件中获得价值所以我写了两个类：

```
[DataContract]
public class UserInformation
{
    [DataMember(Name = "id")]
    public string ID { get; set; }
    [DataMember(Name = "emails")]
    public Emails emails { get; set; }
    [DataMember(Name = "last_name")]
    public string Name { get; set; }

}
[DataContract]
public class Emails
{
    [DataMember(Name = "preferred")]
    public string Preferred { get; set; }

    [DataMember(Name = "personal")]
    public string Account { get; set; }

    [DataMember(Name = "business")]
    public string Personal { get; set; }

    [DataMember(Name = "other")]
    public string Business { get; set; }
} 
```

我写这样的代码：

```
StreamReader stream = new StreamReader(@"C:\Visual Studio 2012\Projects\ASP.net\WebApplication1\WebApplication2\TextFile1.txt");
string text = stream.ReadToEnd();
stream.Close();

byte[] byteArray = Encoding.UTF8.GetBytes(text);
MemoryStream stream1 = new MemoryStream(byteArray);

DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(UserInformation));
var info = serializer.ReadObject(stream1) as UserInformation;
stream1.Close(); 
```

对于信息，我可以在 UserInformation 中获得其他价值，但对于电子邮件，我什么也得不到。为什么，我应该如何写这门课？请帮我！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-20T02:55:46.507

我发现问题是我需要将电子邮件中的所有属性更改为小写......我不知道为什么......但它有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-07-03T14:23:21.690

您的对象属性的大小写必须与 JSON 中的大小写匹配。（见下面的粗体字）。

```
public Emails **emails** { get; set; }

{ "id":"12345", "first_name": "dino", "last_name": "he", "**emails**": { "preferred": "1", "personal": "2", "business": "3", "other": "4" } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-09T09:12:14.210

或者您可以像为 DataMember 所做的那样将 Name 添加到 DataContract 属性：

```
[DataContract (Name="emails")]
public class Emails
{ 
```

# excel - 在 Excel 工作表中预定义列数据类型

> ID：14959699
> 
> 赞同：1
> 
> 时间：2013-02-19T14:19:10.957
> 
> 标签：excel

有什么方法可以预定义 excel 表的列的数据类型？

例如。当我在一列中输入 0022598741 时，它将被格式化为 22598741 但我希望它保持原样。在这种情况下，这个特定的列将数据作为数字类型，但我希望它作为文本类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:22:07.513

将其格式化为`Text`输入之前：右键单击>单元格属性。

# php - html净化器库使用概念

> ID：14959707
> 
> 赞同：1
> 
> 时间：2013-02-19T14:19:33.137
> 
> 标签：php, mysql, mysql-real-escape-string, xss, htmlpurifier

嗨
，我的网站正处于原型阶段。我在这个网站上阅读了 html 净化器主页和关于这个库的问题，但我仍然不清楚我心中的问题。你能指导我吗？
谢谢，BR

**我的理解：**

从我读过的文档中，我明白我能做的最好的是：

1.  在*将不受信任的数据输入到我的 mysql 数据库*`mysqli_real_escape_string`时使用
**   *在将数据从 mysql 数据库输出到 sscreen 作为 html 时*使用 html 净化器库*

 ****我的问题**

**Q1)**我的理解有意义吗？

**Q2)**在将数据输入 mysql 或从 mysql 输出到屏幕时，我是否还有另一种清理方法？我认为这两种方法对于业余爱好者来说已经足够了，但你能分享你的想法吗？**

# jquery-ui-datepicker - 哪种方式将文本添加到 jquery ui datepicker 单元格？

> ID：14959709
> 
> 赞同：9
> 
> 时间：2013-02-19T14:19:41.577
> 
> 标签：jquery-ui-datepicker

我需要**在 Jquery UI datepicker 的某些日期上显示自定义文本**，更准确地说，以呈现某些日期的特定价格。我的想法是使用 beforeShowDay 在此类日期的标题中附加特定价格，然后在 beforeShow 中检查每个 td 并将标题的文本放入单元格中。例子：

```
var m, d, y, checkDate, specificPrice = '';    
var specificPrices = {"2013-3-8":"300 EUR", "2013-2-26":"263 EUR"}

$('#my-datepicker').datepicker({
    beforeShowDay:     function checkAvailable(date) {
    m = date.getMonth();
    d = date.getDate();
    y = date.getFullYear();
    checkDate = y + '-' + (m+1) + '-' + d;
    if(specificPrices[checkDate]){
        specificPrice = specificPrices[checkDate];
    }else{
        specificPrice = '';
    }
    return [true, "", specificPrice];
},
    beforeShow: function(elem, inst){
        $('table.ui-datepicker-calendar tbody td', inst.dpDiv).each(function(){
            var calendarPrice = $(this).attr('title');
            if(calendarPrice != undefined){
                $(this).find('a').append('<span class="calendar-price">' + calendarPrice + '<span>');
            }
        });         
    }
}); 
```

这将在第一次日历渲染（更改月份/年份之前）和仅用于内联日历时渲染价格。

**我需要在非内联日历以及任何月/年更改上显示价格。**

我尝试了其他一些变体，并尝试使用 onChangeMonthYear，但到目前为止没有成功。

感谢您的关注，欢迎您的想法。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-04-02T20:25:04.973

我遇到了同样的情况，并认为我会为内联日期选择器发布我的解决方案，但也应该适用于弹出日期选择器。

首先，您不能修改由 datepicker 插件创建的表格单元格的内容。这样做会破坏其核心功能，因为它会读取单元格内容以生成选定的日期字符串。因此，必须使用纯 css 添加内容。

创建你的日期选择器

```
$('#DatePicker').datepicker({
    changeMonth: true,
    changeYear: true,
    minDate: 0,
    //The calendar is recreated OnSelect for inline calendar
    onSelect: function (date, dp) {
        updateDatePickerCells();
    },
    onChangeMonthYear: function(month, year, dp) {
        updateDatePickerCells();
    },
    beforeShow: function(elem, dp) { //This is for non-inline datepicker
        updateDatePickerCells();
    }
});
updateDatePickerCells(); 
```

创建插入单元格内容的方法

```
function updateDatePickerCells(dp) {
    /* Wait until current callstack is finished so the datepicker
       is fully rendered before attempting to modify contents */
    setTimeout(function () {
        //Fill this with the data you want to insert (I use and AJAX request).  Key is day of month
        //NOTE* watch out for CSS special characters in the value
        var cellContents = {1: '20', 15: '60', 28: '100'};

        //Select disabled days (span) for proper indexing but apply the rule only to enabled days(a)
        $('.ui-datepicker td > *').each(function (idx, elem) {
            var value = cellContents[idx + 1] || 0;

            /* dynamically create a css rule to add the contents with the :after                         
               selector so we don't break the datepicker functionality */
            var className = 'datepicker-content-' + value;

            if(value == 0)
                addCSSRule('.ui-datepicker td a.' + className + ':after {content: "\\a0";}'); //&nbsp;
            else
                addCSSRule('.ui-datepicker td a.' + className + ':after {content: "' + value + '";}');

            $(this).addClass(className);
        });
    }, 0);
} 
```

添加一个方法来动态创建新的 CSS 规则，同时跟踪已经创建的规则。

```
var dynamicCSSRules = [];
function addCSSRule(rule) {
    if ($.inArray(rule, dynamicCSSRules) == -1) {
        $('head').append('<style>' + rule + '</style>');
        dynamicCSSRules.push(rule);
    }
} 
```

最后，新单元格内容的一些默认 css

```
.ui-datepicker td a:after
{
    content: "";
    display: block;
    text-align: center;
    color: Blue;
    font-size: small;
    font-weight: bold;
} 
```

这适用于基本内容，但如果您想使用“$20.95”（包含 CSS 特殊字符）之类的内容，您可以使用内容的 md5 哈希来创建`className`变量。

**编辑从@yuga 的** [JSFiddle](http://jsfiddle.net/e3uu9/210/)修改的 JSFiddle 以包含唯一类名的 MD5 散列以获取更复杂的内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-09-22T21:48:10.693

基于@PrestonS 的回答和[这篇文章](https://stackoverflow.com/a/5734583/1798697)，我有一个不错的简单解决方案，不需要`<style>`在标题中添加标签。

我的解决方案更新了 Preston 的：

**修改`updateDatePickerCells`功能：**

```
function updateDatePickerCells(dp) {
    /* Wait until current callstack is finished so the datepicker
       is fully rendered before attempting to modify contents */
    setTimeout(function () {
        //Fill this with the data you want to insert (I use and AJAX request).  Key is day of month
        //NOTE* watch out for CSS special characters in the value
        var cellContents = {1: '20', 15: '60', 28: '100'};

        //Select disabled days (span) for proper indexing but apply the rule only to enabled days(a)
        $('.ui-datepicker td > *').each(function (idx, elem) {
            var value = cellContents[idx + 1] || 0;

            /***** MAGIC! *****/

            $(this).attr('data-content', value);

            // and that's it! (oh, so easy)
        });
    }, 0);
} 
```

使用此解决方案，您根本不需要该`addCSSRule`功能。

**修改后的css：**

```
/* to target all date cells */
.ui-datepicker td > *:after {
    content: attr(data-content);  /***** MAGIC! *****/

    /* add your other styles here */
}

/* to target only allowed date cells */
.ui-datepicker td > a:after {
}

/* to target only disabled date cells */
.ui-datepicker td > span:after {
} 
```

**使用 datepicker 对象初始化**

如果您需要`updateDatePickerCells`函数中的 datepicker 对象，这里有一种在初始化时获取它的方法。（基于[这篇文章](https://stackoverflow.com/a/36366226/1798697)）

```
var calendarElem = $('#DatePicker').datepicker({
    changeMonth: true,
    changeYear: true,
    minDate: 0,
    //The calendar is recreated OnSelect for inline calendar
    onSelect: function (date, dp) {
        updateDatePickerCells( dp );
    },
    onChangeMonthYear: function(month, year, dp) {
        updateDatePickerCells( dp );
    },
    beforeShow: function(elem, dp) { //This is for non-inline datepicker
        updateDatePickerCells( dp );
    }
});

var datepicker = $.datepicker._getInst(calendarElem[0]);
updateDatePickerCells(datepicker); 
```

# javascript - emberjs 配方：之前/动作过滤器、控制器命名空间、共享对象

> ID：14959710
> 
> 赞同：0
> 
> 时间：2013-02-19T14:19:41.607
> 
> 标签：javascript, filter, ember.js, namespaces, dom-events

我们使用 rails 4 beta 和 emberjs 1.0.0rc1 开始了一个项目。

我正在寻找以下问题的“食谱”或模式：

1.  拥有/模拟“过滤器之前”，例如在没有当前用户时重定向用户

2.  拥有控制器和模型命名空间，例如 /admin/videos | /视频 | /member/videos 用于根据您的角色访问不同的集合（例如，admin/videos 返回所有视频，/videos 仅公共视频和 /member/videos 仅我的视频......）

3.  何时何地加载和存储共享对象，例如 currentUser ？它应该随处可用，例如“rails” current_user（我们现在使用需求或 App.set()，但对它并不满意

4.  在“文档”DOM 元素上捕获事件的最佳方法，而不是 emberjs 应用程序视图（例如隐藏/显示类似 facebook 用户菜单的菜单）：我单击图标来显示它，我单击 DOM 文档来隐藏它（有时在我的 ember 应用程序之外......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:43:04.953

1.  你有一个`redirect`钩子`Ember.Route`。它记录在网站上。

2.  我不确定这与客户端应用程序有什么关系。我会想象后端有这种过滤器。

3.  `needs`或者 `App.inject`绝对是你想要的。您应该有一个`currentUser`控制器并在所有控制器上要求/注入它。

4.  也许在其中注册一个处理程序`ApplicationRoute`并从那里分派路由器事件。

一些注意事项：

`App.inject`并且`App.register`应该在这样的任何钩子之外调用：

`App.inject('controller', 'gobalUser', 'controller:currentUser');`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T16:21:07.873

例如，我们正在尝试这样做：

```
App.ApplicationRoute = Ember.Route.extend 
  setupController: ->
    App.register('controller:currentUserController', App.CurrentUserController );
    App.inject('controller', 'gobalUser', 'controller:currentUserController'); 
```

我们得到了这个错误：Uncaught RangeError: Maximum call stack size exceeded

# asp.net - targetFramework="4.0" 据说是可选的，但没有它我的网站无法构建

> ID：14959714
> 
> 赞同：0
> 
> 时间：2013-02-19T14:19:47.647
> 
> 标签：asp.net, web-config

即使 targetFramework="4.0" 据说是可选的，并且如果没有提到，默认为 IIS 网站设置，但我的网站无法构建，对系统 dll 版本感到困惑，似乎引用了旧版本 我检查了所有添加的引用都是 4.0我在 Linq 和 lambda 表达式上收到错误，表明如果没有 web.config 中的设置，它实际上不是针对 4.0，知道吗？

# symfony - Symfony2 多对一关系形式

> ID：14959717
> 
> 赞同：0
> 
> 时间：2013-02-19T14:19:54.443
> 
> 标签：symfony, symfony-2.1, symfony-forms

我有两个实体 City OneToMany Anagrafic，我以这种方式使用字段 AnagraficType city（使用隐藏属性，因为手机使用 javascript）制作表单：

```
class Anagrafic
{
/**
 * @ORM\ManyToOne(targetEntity="City", inversedBy="anagrafics", cascade={"persist"})
 * @ORM\JoinColumn(name="city_id", referencedColumnName="id")
 */
private $city;
//..
//..
class City
{
/**
 * @ORM\OneToMany(targetEntity="Anagrafic", mappedBy="city", cascade={"persist"})
 */
private $anagrafics;
//...
//...
class AnagraficType extends AbstractType
{
public function buildForm(FormBuilderInterface $builder, array $options)
{
    $builder->add('comune', 'hidden') 
```

当我将表单保存回给我时，此错误：

```
Warning: spl_object_hash() expects parameter 1 to be object,
string given in /var/www/MyBusiness0_1/vendor/doctrine/orm/lib/Doctrine/ORM/UnitOfWork.php line 1559 
```

我不明白怎么了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:01:16.753

如果我理解正确，您的`AnagraficType`表格将让您选择一个城市。如果是，您应该使用[实体字段类型](http://symfony.com/doc/master/reference/forms/types/entity.html)呈现`<select>`元素。

顺便说一句，您的映射是错误的：`cascade`应该在**双向关系的反面**定义，即`City`（**拥有方`Anagraphic`**拥有该`inversedBy`属性）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-23T17:44:24.490

[https://stackoverflow.com/a/15043485/2036211](https://stackoverflow.com/a/15043485/2036211)

在这里解决这个问题，你应该使用DataTransformer。

# wpf - 我可以在 WPF 中编写一个 XAML 标记触发器以将值从窗口控件动态分配给主窗口类中的变量吗？

> ID：14959719
> 
> 赞同：0
> 
> 时间：2013-02-19T14:20:00.473
> 
> 标签：wpf, triggers, markup

下午好。我的名字是尤金。首先，请原谅我的英语不好。我有以下问题。在 WPF 应用程序主窗口中，我有一个 TextBox，在 XAML 标记中，我将其描述如下：

```
<TextBox Name="tbxRange" Grid.Row="1" Grid.Column="3" TextAlignment="Center"
         Text="{Binding Path=CurCompassRange.Range, UpdateSourceTrigger=PropertyChanged,
         Mode=OneWayToSource, RelativeSource={RelativeSource AncestorType={x:Type Window}}}"/> 
```

在这个 TextBox 中，我打印一个浮点数值。可以多次更改 Text 属性的内容以等待程序执行。在 MainWindow 类中，我有以下成员作为字段：

```
private static Double topMargin = 0;
private static Double bottomMargin = 0;
private static Double initialValue; 
```

应用程序开始运行时分配给“initialValue”的值。我需要以下内容。当我在 TextBox 中打印一个新数字时，它的值首先必须从“initialValue”中减去（“initialValue”本身的值不会改变），减法的结果必须存储在“bottomMargin”中，其次是打印数字的值必须添加到“initialValue”，并且添加的结果必须存储在“topMargin”中。我可以多次更改 TextBox 的 Text 属性的内容，以等待程序执行。我的问题如下。**我可以在 XAML 标记中编写一些触发器，这些触发器可以在每次 TextBox Text 属性的值发生变化时执行上述减法和加法吗？**当然，我知道我可以尝试编写（在 C# 上）TextBox TextInput 事件处理程序来执行这些操作并在其主体中执行减法和加法，但是在 XAML 标记中使用触发器似乎更优雅。我会非常感谢你的帮助。我对WPF不是很擅长。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:07:56.847

首先，您不能动态地将 Margin.Top 或 Margin.Bottom 更改为“Top”或“Bottom”本身不是依赖属性。但是，Margin 本身是一个依赖属性，它接收“Thickness”类型的实例。简而言之，这意味着即使您打算单独更改 Margin.Top，您也必须应用新的 Margin..

其次，您需要执行的各种计算不是仅使用 XAML 就能完成的事情，您必须在后面的代码中创建一个值转换器并将 XAML 绑定关联到使用该值转换器。

所以简单的答案是否定的 - 你不能以纯粹的形式做你在 XAML 中描述的事情，你将不得不以一种或另一种方式编写一些代码隐藏。

# python - 将 qcut 分配为新列

> ID：14959722
> 
> 赞同：5
> 
> 时间：2013-02-19T14:20:08.310
> 
> 标签：python, pandas

在这里的熊猫笔记本上

[http://nbviewer.ipython.org/urls/raw.github.com/carljv/Will_it_Python/master/ARM/ch5/arsenic_wells_switching.ipynb](http://nbviewer.ipython.org/urls/raw.github.com/carljv/Will_it_Python/master/ARM/ch5/arsenic_wells_switching.ipynb)

我看到 qcut 的结果被分配为 DataFrame 的新列。Dataframe 有两列，但是以某种方式将 qcut 输出分配给一个新列会神奇地找到“var”变量所在的正确级别——另一个变量没有被检查。这里的 Pandas 语义是什么？示例输出如下：

```
In [2]:
from pandas import *
from statsmodels.formula.api import logit
from statsmodels.nonparametric import KDE
from patsy import dmatrix, dmatrices

In [3]:
df = read_csv('wells.dat', sep = ' ', header = 0, index_col = 0)
print df.head()
   switch  arsenic       dist  assoc  educ
1       1     2.36  16.826000      0     0
2       1     0.71  47.321999      0     0
3       0     2.07  20.966999      0    10
4       1     1.15  21.486000      0    12
5       1     1.10  40.874001      1    14

In [4]:
model_form = ('switch ~ center(I(dist / 100.)) + center(arsenic) + ' +
              'center(I(educ / 4.)) + ' +
              'center(I(dist / 100.)) : center(arsenic) + ' + 
              'center(I(dist / 100.)) : center(I(educ / 4.)) + ' + 
              'center(arsenic) : center(I(educ / 4.))'
             )
model4 = logit(model_form, df = df).fit()   

In [20]:
resid_df = DataFrame({'var': df['arsenic'], 'resid': model4.resid})
resid_df[:10]
Out [20]:
       resid   var
1   0.842596  2.36
2   1.281417  0.71
3  -1.613751  2.07
4   0.996195  1.15
5   1.005102  1.10
6   0.592056  3.90
7   0.941372  2.97
8   0.640139  3.24
9   0.886626  3.28
10  1.130149  2.52

In [15]:
qcut(df['arsenic'], 40)
Out [15]:
Categorical: arsenic
array([(2.327, 2.47], (0.68, 0.71], (1.953, 2.07], ..., [0.51, 0.53],
       (0.62, 0.64], (0.64, 0.68]], dtype=object)
Levels (40): Index([[0.51, 0.53], (0.53, 0.56], (0.56, 0.59],
                    (0.59, 0.62], (0.62, 0.64], (0.64, 0.68],
                    (0.68, 0.71], (0.71, 0.75], (0.75, 0.78],
                    (0.78, 0.82], (0.82, 0.86], (0.86, 0.9], (0.9, 0.95],
                    (0.95, 1.0065], (1.0065, 1.0513], (1.0513, 1.1],
                    (1.1, 1.15], (1.15, 1.2], (1.2, 1.25], (1.25, 1.3],
                    (1.3, 1.36], (1.36, 1.42], (1.42, 1.49],
                    (1.49, 1.57], (1.57, 1.66], (1.66, 1.76],
                    (1.76, 1.858], (1.858, 1.953], (1.953, 2.07],
                    (2.07, 2.2], (2.2, 2.327], (2.327, 2.47],
                    (2.47, 2.61], (2.61, 2.81], (2.81, 2.98],
                    (2.98, 3.21], (3.21, 3.42], (3.42, 3.791],
                    (3.791, 4.475], (4.475, 9.65]], dtype=object)

In [17]:
resid_df['bins'] = qcut(df['arsenic'], 40)
resid_df[:20]
Out [17]:
       resid   var            bins
1   0.842596  2.36   (2.327, 2.47]
2   1.281417  0.71    (0.68, 0.71]
3  -1.613751  2.07   (1.953, 2.07]
4   0.996195  1.15     (1.1, 1.15]
5   1.005102  1.10   (1.0513, 1.1]
6   0.592056  3.90  (3.791, 4.475]
7   0.941372  2.97    (2.81, 2.98]
8   0.640139  3.24    (3.21, 3.42] 
```

为“var”找到了正确的bin，分配没有注意“resid”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:59:05.033

我想我明白了.. qcut Categorical（其结果）对象上有一个“标签”属性；标签根据点所在的四分位数为每个点携带一个数字，例如 1,2,3。然后，如果将 qcut 结果分配到 DataFrame 上的新列中，Pandas 会将此“标签”与 DataFrame 的“索引”匹配.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-26T20:13:31.577

我发现做问题*标题*所描述的唯一一般方法是：

```
quartiles = pd.qcut(df['ValToRank'], 4, labels=range(1,5))
df = df.assign(Quartile=quartiles.values) 
```

这会将四分位数排名值分配为新`DataFrame`列`df['Quartile']`。

[这里给出了一种更一般化的解决方案，在这种情况下，人们想要将切割划分为多列](https://stackoverflow.com/q/19403133/2662901)。

# ios - 使用 Xcode 为 iOS 应用程序解析在线 CSV 文件

> ID：14959725
> 
> 赞同：-3
> 
> 时间：2013-02-19T14:20:13.100
> 
> 标签：ios, xcode, string, csv

我正在尝试解析在线存储在我的服务器上的 CSV 文件。

[http://idoodler.de/liftinfo.csv](http://idoodler.de/liftinfo.csv)

我喜欢将每个字符串放入标签中，但我不知道如何解析 CSV 文件。我在网上搜索但没有解决方案帮助我。请帮助我，如果您知道解决方案，请用 sorcecode 向我解释，因为解析 CSV 文件对我来说是新的。非常感谢！！

我现在知道我应该使用[CHCSVParser](https://github.com/davedelong/CHCSVParser)但我不知道如何使用它，我不知道如何从 CSV 文件中获取字符串。有人知道吗？

好的，我现在有这个代码：

```
NSData *responseData = [NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://www.idoodler.de/liftinfo.csv"]];
    NSString *csvResponseString = [[NSString alloc] initWithData:responseData   encoding:NSUTF8StringEncoding];
    NSLog(@"String: %@",csvResponseString); 
```

但我总是得到这个：`String: (null)`

那么有没有人知道获取字符串而不是（null）的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:28:28.570

我认为您的意思是“解析”而不是“措辞”，在这种情况下您可以试试这个[https://github.com/davedelong/CHCSVParser](https://github.com/davedelong/CHCSVParser)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T17:37:50.693

我终于成功了，但没有 CHCSVParser。我刚刚使用了这段代码：

```
//From File URL get entire CSV as NSstring 
NSString *absoluteURL = @"Put your URL here!!";
NSURL *url = [NSURL URLWithString:absoluteURL];
NSString *fileString = [[NSString alloc] initWithContentsOfURL:url];

NSArray *contentArray = [fileString componentsSeparatedByString:@"\r"];     
for (NSString *item in contentArray) {
    NSArray *itemArray = [item componentsSeparatedByString:@";"];

    NSLog(@"String -----> %@",[itemArray objectAtIndex:0]);
} 
```

# c# - 无法加载文件或程序集或其依赖项之一。访问被拒绝

> ID：14959737
> 
> 赞同：0
> 
> 时间：2013-02-19T14:20:41.800
> 
> 标签：c#, winforms, iis, client-server

我正在运行 C# Winform 客户端/服务器应用程序。

我在服务器端项目中添加（引用）了第三方 dll。

一切都可以编译，但在运行时出现错误：无法加载文件或程序集''或其依赖项之一。访问被拒绝。

我相信这个错误是 IIS (7.0) 相关的。

如何纠正此错误或如何调试此错误？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:25:02.953

这意味着运行您的 Web 应用程序的用户没有对程序集（或其依赖项之一）的读取文件访问权限。

您需要向 Web 应用用户授予对程序集的读取文件访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:26:18.743

你能发布你的堆栈跟踪吗？

可能的解决方案是：

1）授予“用户”组“完全控制”到文件夹“C:\windows\Microsoft.NET\Framework\v3.XXX\Temporary ASP.NET Files”（根据您的环境修改框架版本，根目录.)

2) 确保您的第 3 方程序集在 GAC 中

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:34:46.337

尝试在管理员模式下运行 Visual Studio 并再次启动应用程序。我不确定确切的问题是什么，因为您没有显示任何堆栈跟踪......但尝试在您的 dll 的属性窗口中设置`Copy Local`为`true`。

请显示一些代码....堆栈跟踪....或讨论有关您正在使用的 dll 的信息以获取更多信息。

希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-20T12:14:15.870

问题是由笔记本电脑加密软件引起的。它加密所有下载的文件。IIS 不知道如何解密它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-01-22T09:08:13.677

我有类似的问题，调试编译没问​​题，发布编译触发了这个错误。就我而言，解决方案是运行[这个微软工具](https://www.microsoft.com/en-us/download/confirmation.aspx?id=30135)来修复.NET 中的坏事。

# python - 在没有 numpy 的情况下制作多维数组的好方法

> ID：14959739
> 
> 赞同：4
> 
> 时间：2013-02-19T14:20:45.137
> 
> 标签：python, arrays

我需要一些方法来跟踪布尔标志的四维数组。只是真/假值。似乎 numpy 是执行此类操作的规范方式，但安装起来似乎比我真正想要处理的要复杂得多。（我需要在多个操作系统环境中工作。）

那么，有没有一种简单的方法或简单的模块，可以让我从一个四维数组中存储和获取真/假值，而不用给自己挖一堆比海洋更深的意大利面？

我可以做一个列表列表列表的列表，但这似乎相当笨拙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:25:51.593

如果您只想存储和获取 4 维对象，则可以使用 dict：

```
In [7]: x = {}

# store
In [8]: x[1,2,3,4] = True

# get
In [9]: x[1,2,3,4]
Out[9]: True 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T14:26:01.370

如果数组是稀疏的（罕见的 True 值）；你可以使用[`collections.defaultdict`](http://docs.python.org/2/library/collections.html#collections.defaultdict)：

```
from collections import defaultdict

a = defaultdict(bool)
a[i,j,k,m] = True 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T14:23:17.957

您可以只使用 python 列表代替 numpy 数组来生成多维数组。

就像是：

```
values = [[[[True, False, False], [False, False, False], ...]]] 
```

您会使用 numpy 数组的其他哪些功能？如果您需要很多，它应该很容易在大多数平台上安装。大多数 Linux 发行版在他们的包管理方案中都有它，有一个用于 Windows 的“下一个，下一个，下一个，安装”安装程序，您可以使用 PIP 或类似的方式在 OS X 上安装。

正如其他人所建议的那样，一种替代方法是使用`dict`, 或者可能`defaultdict`并使用元组对其进行索引：

```
values = {}

values[1, 2, 3, 4] = True
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T14:25:25.853

像这样的东西怎么样

```
def make_array(shape):
    data = False
    while len(shape) > 0:
        data = [data for x in range(shape[-1])]
        shape.pop()
    return data

>>> make_array([3,4,5])
[[[False, False, False, False, False], [False, False, False, False, False], [False, False, False, False
, False], [False, False, False, False, False]], [[False, False, False, False, False], [False, False, Fa
lse, False, False], [False, False, False, False, False], [False, False, False, False, False]], [[False,
 False, False, False, False], [False, False, False, False, False], [False, False, False, False, False],
 [False, False, False, False, False]]]
>>> 
```

您可以`shape[0]`转置输出形状。当然，这只会让你得到“空”数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-19T14:52:39.670

```
from collections import defaultdict
def make(depth):
    return defaultdict(lambda: make(depth - 1)) if depth > 1 else False

>>> d = defaultdict(lambda: make(4))     
>>> d[1][2][3][4] = True
>>> d[1][2][3][4] 
True
>>> d[1][2][3][2]
False
>>> d[1][2][3]
defaultdict(<function <lambda> at 0x10d08d488>, {2: False, 4: True}) 
```

# itextsharp - iTextSharp 字体标签不适用于 XMLWorker 类

> ID：14959741
> 
> 赞同：2
> 
> 时间：2013-02-19T14:20:56.307
> 
> 标签：itextsharp

我正在使用 itextsharp 5.3.5 和 xml worker 从我的 html 页面生成 PDF。在我的 html 页面中，我有一个富文本编辑器，它使用 div 标签和字体标签生成 html。请参阅我的领域生成的以下 html 片段。

```
<html xml:space="preserve" xmlns="http://www.w3.org/1999/xhtml">
    <div>
        this text is not <strong>working</strong>
    </div>
    <div>
        <font color="#ff0000">text in Red now</font>.
    </div>
    <div>
        <font face="Tahoma" size="5">a font thoma and size 5.</font>
    </div>
    <div>
        <font face="Tahoma" size="5">
            <font face="Arial" size="3">here is a link to </font>
            <a href="http://www.google.co.uk/">
                <font face="Arial" size="3">Google</font>
            </a>.
        </font>
    </div>
</html> 
```

我发现如果我使用 html worker 代替，那么它将上面的 html 完美地转换为 pdf。但不是 xml 工作者。它只是没有用。

我还发现，如果我更改一些标签并像下面那样更新我的 html，那么 xml worker 会将其转换为 pdf。

```
<p>this text is not <strong>working</strong></p>
<span style="color:#ff0000">text in Red now</span>.
        <br />
        <span style="font-family:Tahoma; font-size:5">a font thoma and size 5.</span>
        <br/>
        <span style="font-family:Tahoma; font-size:5">
          <span style="font-family:Arial; font-size:3">here is a link to </span><a href="http://www.google.co.uk/">
            <span style="font-family:Arial; font-size:3">Google</span>
          </a>.
        </span>
        <br /> 
```

现在显然我不能在运行时更改 html 标签，这将是一团糟。我的代码如下。

```
StringReader html = new StringReader(htmlString);
var xmlWorkerFontProvider = new XMLWorkerFontProvider();
var cssAppliers = new CssAppliersImpl(xmlWorkerFontProvider);
CssFilesImpl cssFiles = new CssFilesImpl(); 
cssFiles.Add(XMLWorkerHelper.GetInstance().GetDefaultCSS()); 
StyleAttrCSSResolver cssRevolver = new StyleAttrCSSResolver();
HtmlPipelineContext htmlContext = new HtmlPipelineContext(cssAppliers); 
htmlContext.SetTagFactory(Tags.GetHtmlTagProcessorFactory());
PdfWriterPipeline pdfWriterPipeline = new PdfWriterPipeline(document, writer);
IPipeline pipeline = new CssResolverPipeline(cssRevolver, new HtmlPipeline(htmlContext, pdfWriterPipeline)); 
XMLWorker worker = new XMLWorker(pipeline, true);                 
XMLParser xmlParser = new XMLParser(worker);
xmlParser.Parse(html); 
```

如果您能指导我，我将非常感激我如何使用 xml worker 将上述 html 转换为 pdf 格式。

如果您需要任何进一步的信息，请告诉我。

# android - 在哪里可以找到 Android 应用程序的 out.xml 文件？

> ID：14959743
> 
> 赞同：0
> 
> 时间：2013-02-19T14:21:16.147
> 
> 标签：android, xml, string, out

由于我是 Android 新手，在尝试在我的 strings.xml 文件中添加新字符串后，我遇到了一个对于新手来说似乎很常见的问题（XML 文件中的错误：正在中止构建）。

我在网上搜索了许多开发人员（实际上是大多数人）建议我应该删除 blabla.out.xml。我知道这听起来可能很愚蠢（或超级愚蠢，你的电话），但我在查找 out.xml 文件时确实遇到了问题。要么我的问题与其他人的问题没有相同的性质（我对此表示怀疑），但我找不到我的 out.xml 文件。

如果你能告诉我我在哪里可以找到它，或者你能告诉我另一个很棒的解决方案。

先感谢您。

编辑：

我的 activity_main.xml 文件：

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:paddingBottom="@dimen/activity_vertical_margin"
android:paddingLeft="@dimen/activity_horizontal_margin"
android:paddingRight="@dimen/activity_horizontal_margin"
android:paddingTop="@dimen/activity_vertical_margin"
android:orientation="horizontal"
tools:context=".MainActivity" >

 <EditText>
    android:id="@+id/edit_message"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:hint="@string/edit_message"
 </EditText> 
```

在 strings.xml 中，我想添加一个名为 edit_message 的字符串，以便在我的文本框（EditBox）中显示初始消息

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:29:04.573

我建议您阅读本指南：[字符串资源](http://developer.android.com/guide/topics/resources/string-resource.html)

您需要了解 Android 项目文件夹层次结构。
在 Eclipse 中查看：您的项目名称 > res > values > strings.xml。它应该是这样的：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

    <string name="hello">Hello World!</string>
    <string name="app_name">Hello Android</string>

</resources> 
```

**编辑**：您需要添加`edit_message`到`strings.xml`：

```
<?xml version="1.0" encoding="utf-8"?>
    <resources>

        <string name="hello">Hello World!</string>
        <string name="app_name">Hello Android</string>
        <string name="edit_message">Your message</string>

    </resources> 
```

# winapi - 在带有滚动条的静态控件 win32 上显示图像

> ID：14959753
> 
> 赞同：0
> 
> 时间：2013-02-19T14:21:41.217
> 
> 标签：winapi, bitmap, scrollbar

是否可以制作静态控件（win32）`SS_BITMAP | WS_VSCROLL | WS_HSCROLL`？

我要做的只是在固定大小的静态控件上加载位图，如果图像大小大于控件的大小，则可以滚动它。

提前致谢！

# cassandra - CQL3 order by statement 是先排序大写字符串

> ID：14959756
> 
> 赞同：0
> 
> 时间：2013-02-19T14:21:47.227
> 
> 标签：cassandra, cql3

我发现我的 CQL3 order by 语句返回了奇怪的结果，其中任何以大写字母开头的字符串首先排序，然后小写字符串排序第二。

下面是一个示例表：

```
CREATE TABLE tester 
(rowkey text, colname text, colvalue text, primary key (rowkey, colname)) 
WITH COMPACT STORAGE; 
```

如果我用一些测试数据填充它并运行以下查询，这就是我得到的：

询问：

```
SELECT * FROM tester WHERE rowkey = 'test' ORDER BY colname ASC 
```

结果：

```
rowkey | colname | colvalue
-------+---------+---------
test   | ABC     | blah
test   | Abc     | blah
test   | BBC     | blah
test   | abc     | blah
test   | bbC     | blah
test   | bbc     | blah 
```

我看不出这是预期的行为。有谁知道为什么要这样订购它以及如何实现更明智的订购？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T14:33:24.363

您的列按字典顺序排序，其中大写字符优先于小写字符。

# mysql - MySQL反向匹配

> ID：14959757
> 
> 赞同：2
> 
> 时间：2013-02-19T14:21:49.567
> 
> 标签：mysql

我有以下脚本，它显示了 ADATA 表和 CDATA 表中记录的数据，由名字和姓氏匹配（我拥有的唯一字段在两个表中都是相同的）：

```
SELECT
c.asdf AS ASDF,
CONCAT(a.genr, ' ' ,a.firstname, ' ' ,a.lastname) AS Name,
a.rcvdate AS Report_Date,
c.enroll AS Enroll_Date,
a.cvb AS CVB,
c.pctcomp AS Percent_Complete

FROM
adata a,
cdatas c

WHERE
a.firstname = c.firstname
AND a.lastname = c.lastname 
```

从这里我需要做的是获取 ADATA 中但不在 CDATA 中的记录列表，以及 CDATA 中不在 ADATA 中的记录。我尝试了在脚本的 WHERE 部分中使用的所有不同变体，`NOT`但总是给我 800 - ADATA 中的记录总数（CDATA 表只有 130 条记录）。

有没有办法正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:24:58.683

```
SELECT columns
FROM
    adata a
    LEFT JOIN cdatas c ON (a.firstname = c.firstname AND a.lastname = c.lastname)
WHERE
    c.asdf IS NULL
UNION ALL
SELECT columns
FROM
    cdatas c
    LEFT JOIN adata a ON (c.firstname = a.firstname AND c.lastname = a.lastname)
WHERE
    a.cvb IS NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:25:10.230

```
mysql> create table a (x int);
mysql> create table b (y int);
mysql> insert into a values (1), (2), (3), (4), (5);
mysql> insert into b values (2), (4), (6);
mysql> select x from a where not x in (select y from b);
+------+
| x    |
+------+
|    1 |
|    3 |
|    5 |
+------+
mysql> select y from b where not y in (select x from a);
+------+
| y    |
+------+
|    6 |
+------+ 
```

# c# - 静态类 System.Configuration.ConfigurationManager 的别名；

> ID：14959762
> 
> 赞同：1
> 
> 时间：2013-02-19T14:22:09.627
> 
> 标签：c#, static-members

我想为静态类声明一个别名：`System.Configuration.ConfigurationManager;`

我希望这个别名可用于我班级的所有方法，所以我尝试这样做：

```
public class MyClass 
{
   using conf = System.Configuration.ConfigurationManager;

   public void MethodOne()
   {
      string appConfigStr = conf.AppSettings["someAppSettings"].ToString()
   }
} 
```

**但是上面会引发以下错误**：类、结构或接口成员声明中的无效标记“使用”

我可以做些什么来给这个配置管理器类起别名吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:23:22.280

你不能`using`在一个类中声明。您收到的错误消息在这方面非常具体。
要解决它，只需将其放在课堂之外：

```
using conf = System.Configuration.ConfigurationManager;

public class MyClass 
{
    public void MethodOne()
    {
        string appConfigStr = conf.AppSettings["someAppSettings"].ToString()
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:23:29.940

`using`创建别名必须在类范围之外使用，但在程序集或命名空间范围内！

```
// Here here here here here here :)
using conf = System.Configuration.ConfigurationManager;

public class MyClass 
{
   public void MethodOne()
   {
      string appConfigStr = conf.AppSettings["someAppSettings"].ToString()
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T14:25:43.633

`using`指令可用于在当前`.cs`文件范围内创建别名。

```
using conf = System.Configuration.ConfigurationManager;

namespace MyNamespace
{
    public class MyClass 
    {
        public void MethodOne()
        {
            string appConfigStr = conf.AppSettings["someAppSettings"].ToString()
        }
    }
} 
```

有关更多信息，请参阅[此文档](http://msdn.microsoft.com/en-us/library/sf0df423.aspx)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-19T14:28:18.830

您必须将 using 语句放在类定义之外，就像编译器告诉您的那样。

```
using conf = System.Configuration.ConfigurationManager;

public class MyClass 
{
   public void MethodOne()
   {
      string appConfigStr = conf.AppSettings["someAppSettings"].ToString()
   }
} 
```

请参阅第 9.4 节“使用指令”下的 C# 语言规范。

# java - Java：删除点后的所有字符

> ID：14959763
> 
> 赞同：14
> 
> 时间：2013-02-19T14:22:08.680
> 
> 标签：java

我有一个快速的问题，我得到了以下代码

```
String chapterNumber = "14.2.1"; 
```

我怎样才能从我的“chapterNumber”中获得如下所示的字符串

```
String mainChapterNumber = "14"; 
```

*编辑：* 我想要 int/String 中的所有数字（对我来说没关系）直到第一点

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-19T14:24:40.967

如果它只是您想要的输入字符串的第一部分，您应该这样做

```
String mainChapterNumber = chapterNumber.split("\\.", 2)[0]; 
```

`split`( )的第二个参数`2`表明我们应该只在第*一次*出现`.`;时进行拆分。`.`如果我们不提供第二个参数，它比在所有实例上拆分要快。

* * *

**相关文件**

*   [`split`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-19T14:30:40.393

只需使用以下内容：

```
String mainChapterNum = chapterNumber.substring(0, chapterNumber.indexOf(".")); 
```

这将返回当前章节编号的子字符串，从位于索引号 0 中的第一个字符开始，并在“。”第一次出现之前结束。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-19T14:27:01.453

```
String chapterNumber = "1.2.1";
int index = chapterNumber.indexOf(".");
String mainChapterNumber = chapterNumber.substring(0,index); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-02-19T14:30:29.620

```
String mainChapterNumber = chapterNumber.substring(0,chapterNumber.indexOf(".")); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-02-19T14:32:28.603

有多种方法可以做到这一点。我推荐的最简单的方法是使用子字符串和 indexOf: 像这样：

```
String result = chapterNumber.substring(0, chapterNumber.indexOf(".")); 
```

另一种方法是这样的：

```
String result = chapterNumber.split("\\.")[0]; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-19T14:24:46.633

由于我们没有任何证据证明您确实在尝试某些东西，因此我会提出建议而不是给您代码。

尝试使用字符串的索引。找到第一个点的索引，然后使用该`substring`方法将子字符串保持在原点和出现点之间。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-19T14:27:42.857

尝试如下...

```
String chapterNumber = "1.2.1";
String[] getdt = chapterNumber.split("\\.");
String mainChapterNumber = getdt[0]; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-19T14:44:01.053

仅作记录，使用[Guava 的 splitter 的](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/base/Splitter.html)另一种解决方案：

```
String mainChapterNumber = Iterables.get(Splitter.on('.').split(chapterNumber), 0); 
```

这样做的好处是不使用正则表达式机制（它不是轻量级的，不要在循环中使用公认的解决方案）。

# c - 我的结构数组的 sizeof 不同...为什么？

> ID：14959767
> 
> 赞同：0
> 
> 时间：2013-02-19T14:22:16.593
> 
> 标签：c, struct, sizeof

```
#include <stdio.h>

#define SIZE 10

typedef struct dynArrStruct
{
    double value1;
    int value2;
    int value3;
}dynArr;

int main(int argc, char** argv)
{
    dynArr a1[SIZE];
    dynArr* a2[SIZE];
    printf("Size of a1 array: %d\n", sizeof(a1));
    printf("Size of a2 array: %d\n", sizeof(a2));
    return 0;
} 
```

第一个打印出 160。

第二个打印出 40。

我计算每个元素 4 个字节，第二个元素有 10 个元素。但我不明白为什么第一个有 160。

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-02-19T14:23:49.600

`a1`是一个结构数组，`a2`是一个结构指针数组。

* * *

`a1`由`SIZE`(10) 个结构组成，在内存中连续布局。

```
----------- ----------- ------- ----------- -----------
| struct0 | | struct1 | | ... | | struct8 | | struct9 |
----------- ----------- ------- ----------- ----------- 
```

它的大小是`SIZE * sizeof(dynArr)`= 10 * 16 = 160

**为什么每个结构 16 个字节？**

```
typedef struct dynArrStruct
{
    double value1; // sizeof(double) = 8
    int value2;    // sizeof(int)    = 4
    int value3;    // sizeof(int)    = 4
} dynArr; 
```

把它们加起来，你就有 16 个字节。（甚至可能超过各个尺寸的总和，具体取决于填充）

* * *

`a2`由`SIZE`(10) 个指向结构的指针组成，在内存中连续布局。它的大小是`SIZE * sizeof(dynArr*)`= 10 * 4 = 40

**为什么每个指针 4 个字节？**

这是大多数 32 位系统上指针的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:24:45.737

假设在您的平台上，

```
typedef struct dynArrStruct
{
    double value1;  /* 8 Bytes */
    int value2;     /* 4 bytes */
    int value3;     /* 4 Bytes */
}dynArr; 
```

并且结构元素之间没有填充字节。

然后，结构的大小将是 16 个字节，所以 16 * 10 = 160

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:27:00.580

`a1`在你的情况下是一个结构数组。该结构本身的大小为 16 字节（double 为 8 字节，int 为 4 字节），因此您得到 160 字节的大小。

`a2`是一个指针数组。一个指针的大小为 4 字节（由于您的 32 位系统），因此您得到的总大小为 40 字节。

请记住，此时`a2`未初始化。所以它并不真正包含你的结构，它只是保留一些空间，你可以存储指向你的结构的指针。

# c# - 如何从 C# 应用程序输出资源文件？

> ID：14959769
> 
> 赞同：1
> 
> 时间：2013-02-19T14:22:26.677
> 
> 标签：c#, file, resources

我正在使用 Visual C# 2010 Express。我想将 .dotx 或 Word 模板文件放入我的应用程序的 Resources 文件夹中，安装后，将文件输出到另一个目录，最好是 C://Myfolder/。我在这里找不到任何关于它的信息。有没有办法解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:23:30.907

为什么要将此作为资源？为什么不将它捆绑为安装程序包的一部分，它可以在安装应用程序时确定文件的放置位置？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:25:49.067

单击资源（在“属性”中），然后单击“字符串”旁边的箭头并选择“文件”。

然后将文件拖入并命名。然后使用：

```
Properties.Resources.fileName; 
```

这将是 a `byte[]`，并使用以下方法保存：

```
File.WriteAllBytes(Environment.GetFolderPath(Environment.SpecialFolder.UserProfile) + @"\filename", Properties.Resources.fileName); 
```

# apache - Apache 服务器安装 没有 .msi 安装程序

> ID：14959770
> 
> 赞同：0
> 
> 时间：2013-02-19T14:22:26.817
> 
> 标签：apache

我正在尝试使用NetWare 二进制文件从该[链接安装 apache 服务器](http://httpd.apache.org/download.cgi)**：确切地说，httpd_2.4.3-netware-bin.zip**链接，我在互联网上寻找一个好的指南**不**使用**.msi**安装程序，因为没有**. msi**安装程序在我从上面的链接下载 zip 文件后解压缩的文件夹中，因为我想学习如何安装而不使用**.msi**安装程序，所以如果有人知道不使用安装 apache 服务器的方法**.msi**安装程序我将非常感激，谢谢大家，祝您有美好的一天。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:28:01.843

由于您正在寻找一个 msi 安装程序，您可能需要 win32 版本而不是 NetWare 版本。从这里选择合适的：http: [//ftp.download-by.net/apache//httpd/binaries/win32/](http://ftp.download-by.net/apache//httpd/binaries/win32/)

如果您想在没有 msi 的情况下安装，如果您运行的是 Windows，您仍然不需要 NetWare 版本。

您可以在此处阅读有关 NetWare 操作系统的更多信息：[http ://en.wikipedia.org/wiki/NetWare](http://en.wikipedia.org/wiki/NetWare)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T19:54:38.080

更容易安装 Xammp，您拥有 win 32/64 的 allinone 解决方案，其中嵌入了 php 版本 5.6.3：备份和恢复 MySQL 数据库配置 FTP 访问配置虚拟主机配置基于通配符的子域使用 Git 部署应用程序使用 WordPress 快速入门重置MySQL Root 密码使用 PHP 发送邮件解决 Apache 启动问题

简单又酷不是吗？？

# sql-server - Script 和 ScriptWithList 有什么区别？

> ID：14959774
> 
> 赞同：4
> 
> 时间：2013-02-19T14:22:50.657
> 
> 标签：sql-server

`Scripter.Script`在 SQL Server SMO 中，和 和有什么区别`Scripter.ScriptWithList`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:56:33.283

不同之处在于返回值。Script 方法返回一个 StringCollection 对象值，该值指定对象列表的 Tranasact-SQL 脚本。参考 Scripter.Script 方法[1](http://msdn.microsoft.com/en-US/library/ms209761%28v=sql.105%29.aspx) ScriptWithList 方法返回一个 SqlSmoObject 对象数组值，该值指定要编写脚本的对象列表。参考 Scripter.ScriptWitList [2](http://msdn.microsoft.com/en-US/library/ms209760%28v=sql.105%29.aspx)

# charts - 如何将可视化添加到使用 d3.js 创建的图表中？

> ID：14959775
> 
> 赞同：1
> 
> 时间：2013-02-19T14:23:01.937
> 
> 标签：charts, d3.js, visualization

这是我生成条形图的示例代码。当我单击特定列时，它应该指向另一个页面。请帮帮我。另一件事是如何使图表更具交互性并使用事件处理？

```
<!DOCTYPE html>
<meta charset="utf-8">
<style>

body {
  font: 10px sans-serif;
}

.axis path,
.axis line {
  fill: none;
  stroke: #000;
  shape-rendering: crispEdges;
}

.bar {
  fill: steelblue;
}

.x.axis path {
  display: none;
}

</style>
<body>
<script src="http://d3js.org/d3.v3.min.js"></script>
<script>

var margin = {top: 20, right: 20, bottom: 30, left: 40},
    width = 960 - margin.left - margin.right,
    height = 500 - margin.top - margin.bottom;

var formatPercent = d3.format(".0%");

var x = d3.scale.ordinal()
    .rangeRoundBands([0, width], .1);

var y = d3.scale.linear()
    .range([height, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left")
    .tickFormat(formatPercent);

var svg = d3.select("body").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

d3.tsv("data.tsv", function(error, data) {

  data.forEach(function(d) {
    d.frequency = +d.frequency;
  });

function mouseover(d, i) {
  d3.select(rect[0][i]).style("fill", "red");
}

  x.domain(data.map(function(d) { return d.letter; }));
  y.domain([0, d3.max(data, function(d) { return d.frequency; })]);

  svg.append("g")
      .attr("class", "x axis")
      .attr("transform", "translate(0," + height + ")")
      .call(xAxis);

  svg.append("g")
      .attr("class", "y axis")
      .call(yAxis)
    .append("text")
      .attr("transform", "rotate(-90)")
      .attr("y", 6)
      .attr("dy", ".71em")
      .style("text-anchor", "end")
      .text("Frequency");

  svg.selectAll(".bar")
      .data(data)
    .enter().append("rect")
      .attr("class", "bar")
      .attr("x", function(d) { return x(d.letter); })
      .attr("width", x.rangeBand())
      .attr("y", function(d) { return y(d.frequency); })
      .attr("height", function(d) { return height - y(d.frequency); });

});

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T15:17:06.780

在这两种情况下，请使用[d3 api 中](https://github.com/mbostock/d3/wiki/Selections#wiki-on)`.on()`描述的函数。

要导航到新页面，请使用类似的事件处理程序将“on()”方法附加到您的列（矩形）

```
.on( "click", function(d,i) {
        window.location.href='mynextPage';
}) 
```

# cakephp - UTF-8 编码适用于 Cake 1.3.11，但不适用于 Cake 2.2.3

> ID：14959777
> 
> 赞同：0
> 
> 时间：2013-02-19T14:23:19.813
> 
> 标签：cakephp, utf-8, cakephp-1.3, cakephp-2.0

我有一个正在运行的 CakePHP 1.3.11 项目，所有特殊字符（如 äüöß）看起来都很好。在同一台机器上并共享完全相同的数据库，我还有一个 Cake 2.2.3 项目，这里所有的特殊字符都搞砸了。

两个项目的设置基本相同：

**核心.php**

```
Configure::write('App.encoding', 'UTF-8'); 
```

**数据库.php**

```
'encoding' => 'utf-8' # Cake 1.3.11
'encoding' => 'utf8'  # Cake 2.2.3 (utf-8 doesn't work with 2.2.3) 
```

**查看/布局/default.ctp**

```
<head>
    <?php echo $this->Html->charset(); ?>
    ... 
```

我也尝试添加`header('Content-Type: text/html; charset=utf-8');`到**bootstrap.php**，但仍然无法正常工作。

有任何想法吗？提前非常感谢！

# coldfusion - 适用于 windows 或 unix 的通用目录格式

> ID：14959788
> 
> 赞同：0
> 
> 时间：2013-02-19T14:23:52.700
> 
> 标签：coldfusion

我正在从事一个可以部署在 Windows 和 unix 系统上的 CF 服务器上的辅助项目。有没有一种方法可以以通用的方式管理目录结构中的绝对路径？换句话说，如果您是 windows 服务器还是 unix 服务器，我不希望有一堆条件语句乱扔代码来管理。

在过去的 8 年里，我一直专注于基于 unix 的操作系统，所以很长时间以来我都不必担心 Windows。

我在 CF 9.01 FWIW 工作。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T14:40:50.377

查看[ColdFusion 系统功能](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec1a60c-7ffc.html#WSc3ff6d0ea77859461172e0811cbec22c24-69b7)。无论平台如何，您都可以使用其中一些函数从服务器动态检索路径信息。

只需创建一个 test.cfm 文件并开始输出这些值以熟悉它们。我认为这些将特别有趣。

示例 test.cfm：

```
<html>
    <head></head>
<body>
    <cfoutput>
        <p>GetBaseTemplatePath() = #GetBaseTemplatePath()#</p>
        <p>GetDirectoryFromPath(GetBaseTemplatePath()) = #GetDirectoryFromPath(GetBaseTemplatePath())#</p>
        <p>GetCurrentTemplatePath() = #GetCurrentTemplatePath()#</p>
        <p>ExpandPath("*.*") = #ExpandPath("*.*")#</p>
    </cfoutput>
</body>
</html> 
```

# javascript - JavaScript 正则表达式匹配字符串中的几个类名之一

> ID：14959789
> 
> 赞同：0
> 
> 时间：2013-02-19T14:23:57.683
> 
> 标签：javascript, regex

嗨，我有一个字符串，可以是以下字符串之一，也可以没有，我正在尝试测试字符串中是否存在两个类名之一。

```
<span class="italic bold">beatae</span>
<span class="bold italic">beatae</span>
<span class="bold">beatae</span>
<span class="italic">beatae</span> 
```

成功的匹配应该意味着字符串是一个完整的跨度标签，上面有这两个类名之一。理想情况下，如果可能，我希望 string.match 返回类名（斜体、粗体或两者）。

我在这里找到的最相关的帖子是：[Need Regexp for classname replace](https://stackoverflow.com/questions/1635927/need-regexp-for-classname-replace)我尝试调整正则表达式以满足我的需求，但我遗漏了一些东西。

这是我到目前为止所拥有的：

```
/^<span class="(bold|italic)">[^<]*<\/span>$/i 
```

但我总是得到 null 的比赛。提前致谢！

编辑：它是 Javascript 中的实际字符串，而不是 DOM 节点，因此它相当于；

```
var mystring = '<span class="bold italic">beatea</span>';
var matches = mystring.match( /regex/ ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:27:18.897

试试这个：

```
/^<span\sclass="[\w\s]*(bold|italic)+[\w\s]*">[^<]*<\/span>$/i 
```

您忘记匹配可能出现的任何附加类，这就是附加`[\w\s]*`的内容。

**更新**

由于您不能[在 javascript 正则表达式中重复组，](https://stackoverflow.com/questions/3537878/how-to-capture-an-arbitrary-number-of-groups-in-javascript-regexp)因此如果您想在组结果中获取*两个*类，则必须为每个要获取的类多次匹配字符串（最好通过，`indexOf`因为`RegExp`在这种情况下无用）：

```
 var classesToMatch = ['italic', 'bold'],
     matchedClasses = [],
     htmlString = "<span class='bold italic'>beatae</span>";
 for (var i = 0; i < classesToMatch.length; i++) {
   if (htmlString.indexOf(classesToMatch[i]) > -1) {
     matchedClasses.push(classesToMatch[i]);
   }
 } 
```

`matchedClasses`将包含所有匹配的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:43:55.850

我不确定你需要正则表达式。最好使用您需要的元素：

```
var array = document.getElementsByTagName('span'); // get all span elements
//check each span element for class 'italic' or 'bold'
for(i=0;i<array.length;i++) {
    if((array[i].className.indexOf('bold') != -1) || (array[i].className.indexOf('italic') != -1))  {
    //if there are our classes - do something with this span
    console.log(array[i]); // array[i] - is a span which contains certain classes
    }
} 
```

# c# - 如何使用通道工厂

> ID：14959795
> 
> 赞同：1
> 
> 时间：2013-02-19T14:24:19.220
> 
> 标签：c#, wcf, proxy

基本上我有来自[MSDN 的代码。](http://msdn.microsoft.com/en-us/library/ms734681.aspx)

代码是：

```
using System;
using System.ServiceModel;

// This code generated by svcutil.exe.
[ServiceContract()]
interface IMath
{
     [OperationContract()]
     double Add(double A, double B);
}

public class Math : IMath
{
public double Add(double A, double B) 
{
    return A + B;
}
}

public sealed class Test
{
    static void Main()
   {
       // Code not shown.
   }

public void Run()
{
    // This code is written by an application developer.
    // Create a channel factory.
    BasicHttpBinding myBinding = new BasicHttpBinding();

    EndpointAddress myEndpoint = new EndpointAddress("http://localhost/MathService/Ep1");

    ChannelFactory<IMath> myChannelFactory = new ChannelFactory<IMath>(myBinding, myEndpoint);

    // Create a channel.
    IMath wcfClient1 = myChannelFactory.CreateChannel();
    double s = wcfClient1.Add(3, 39);
    Console.WriteLine(s.ToString());
((IClientChannel)wcfClient1).Close();

    // Create another channel.
    IMath wcfClient2 = myChannelFactory.CreateChannel();
    s = wcfClient2.Add(15, 27);
    Console.WriteLine(s.ToString());
((IClientChannel)wcfClient2).Close();
myChannelFactory.Close();
}
} 
```

但是根据我的肤浅理解，它是一个自托管的 WCF。上面的代码是将服务代码和客户端代码组合在一起。如果 WCF 托管在服务器中，我们根本不知道它的内部结构。那么如何在客户端消费呢？我使用了代码

```
ChannelFactory<IMath> myChannelFactory = new ChannelFactory<IMath>(myBinding, myEndpoint); 
```

但是智能感知根本不知道**IMath**。我不擅长代理、ChannelFactory 等。现在我的问题是，如果服务 IMath 托管在[http://www.someserver/IMath.svc](http://www.someserver/IMath.svc)，如何在客户端编写代码来使用它？

请不要认为将网络引用添加到客户端...

**更新**：在服务 wsdl：我有类似的东西：

```
<wsdl:binding name="BasicHttpBinding_iMath" type="tns:iMath">
<soap:binding transport="http://schemas.xmlsoap.org/soap/http" /> 
 - <wsdl:operation name="Add">
 <soap:operation soapAction="http://tempuri.org/iMath/add" style="document" /> 
 - <wsdl:input>
<soap:body use="literal" /> 
 </wsdl:input>
- <wsdl:output>
 <soap:body use="literal" /> 
  </wsdl:output>
  </wsdl:operation>
- <wsdl:operation name="LoadUnbillsFromOrion">
  <soap:operation soapAction="http://tempuri.org/iMath/LoadUnbillsFromOrion" style="document" /> 
- <wsdl:input>
  <soap:body use="literal" /> 
  </wsdl:input>
- <wsdl:output>
   <soap:body use="literal" /> 
   </wsdl:output>
   </wsdl:operation>
  </wsdl:binding>
 - <wsdl:service name="Math">
 - <wsdl:port name="BasicHttpBinding_iMath" binding="tns:BasicHttpBinding_iMath">
   <soap:address location="http://wsvc01/Imath.svc" /> 
  </wsdl:port>
 </wsdl:service> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:37:28.120

基本上，您需要知道的只是客户端的绑定和端点地址。

要使用 WCF 服务，您需要创建一个代理。除非您特别需要 ChannelFactory 的理由，否则创建从[ClientBase<>](http://msdn.microsoft.com/en-us/library/ms576141.aspx)继承的“客户端”类可能更容易。

```
public class Client : ClientBase<IMath>
{
    private static Binding MyBinding { get; set; }

    private static EndpointAddress MyEndpoint { get; set; }

    public Client() : base(MyBinding, MyEndpoint)
    {
    }

    public double Add(double a, double b)
    {
        Open();
        var c = Channel.Add(a, b);
        Close();

        return c;
    }
} 
```

然后，您创建代理的实例，为其提供端点并在构造函数中绑定（或让代理在默认情况下自动执行此操作，您可以做任何您想做的事情）以与您的 WCF 服务进行通信。然后您只需打开和关闭您的客户端对象，然后调用您的 Client.IMathOperation 对服务执行操作。ClientBase<> 将处理 Channel 创建、处理、池化等。

```
Client proxy = new Client();
proxy.Add(1, 2); 
```

您可能希望在客户端放置各种包装器和帮助器类来处理异常，在尝试访问之前测试您的连接，封装打开和关闭通道等，以减少在客户端使用的冗长。

# php - mysql 'likes' 结构表

> ID：14959803
> 
> 赞同：2
> 
> 时间：2013-02-19T14:24:51.483
> 
> 标签：php, mysql, database, create-table

我正在一个网站上工作，用户可以在该网站上发布具有此表结构的文章：

```
CREATE TABLE IF NOT EXISTS `articles` (
  `id_articles` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `id_users` int(10) unsigned NOT NULL,
  `articles` text NOT NULL,
  PRIMARY KEY (`id_articles`),
  UNIQUE KEY `id_articles` (`id_articles`),
  KEY `id_users` (`id_users`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 AUTO_INCREMENT=1 ; 
```

每个用户都可以“喜欢”这些文章。

这是创建“like table”的正确方法吗：

```
CREATE TABLE IF NOT EXISTS `articles_likes` (
  `id_articles` int(10) unsigned NOT NULL,
  `id_users` int(10) unsigned NOT NULL,
  KEY `id_articles` (`id_articles`,`id_users`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:36:48.247

这是正确的，但您需要在 id_articles 和 id_users 上添加单独的索引（您也可能需要将列命名为 'id_article' 和 'id_user' 以保持理智）。

```
CREATE TABLE IF NOT EXISTS `article_likes` (
    `id_article` int(10) unsigned NOT NULL,
    `id_user` int(10) unsigned NOT NULL,
     KEY `id_article` (`id_article`),
     KEY `id_user` (`id_user`)
) ENGINE=InnoDB; 
```

您需要单独索引的原因是因为在mysql中，如果您在列（A，B）上创建索引，该索引将用于where子句列A或列A和B中的查询。例如，如果您做了一个查询“SELECT * FROM article_likes WHERE id_user=X”这个查询不会使用索引。一个更好的选择是在组合索引的第二列上添加一个组合索引和一个单独的索引。像这样：

```
CREATE TABLE IF NOT EXISTS `article_likes` (
    `id_article` int(10) unsigned NOT NULL,
    `id_user` int(10) unsigned NOT NULL,
     KEY `id_article_user` (`id_article`, `id_user`),
     KEY `id_user` (`id_user`)
) ENGINE=InnoDB; 
```

这样，您将在诸如“WHERE id_user=X”、“WHERE id_article=X”、“WHERE id_article=X AND id_user=Y”之类的查询上获得最佳性能

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T14:32:13.183

这是克里斯的有效方式。您可以使用将表中的 与您正在查看的当前文章`COUNT()`进行匹配。`id_articles``articles_likes``articles`

```
$articles_id = 23;

mysql_query("SELECT COUNT(*) FROM articles_likes
WHERE id_articles = ".$articles_id); 
```

您也可以不使用 COUNT() (MySQL) 并立即知道哪些用户是文章的“喜欢者”，并在返回的数组上使用 count() (PHP) 来复制 MySQL 中 COUNT() 的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-19T14:32:30.420

我总共有 3 张桌子。一个文章表，用户 id 可以是提交文章的用户的列，但是您需要一个单独的用户表，因为并非所有用户都会提交文章（我假设），然后是第三个表的喜欢，这需要用户的主键和文章的主键，并将它们用作外键。所以每次点赞一篇文章时，都会在第 3 个表中创建一个条目

# android - 获取android sax xml解析中的属性值

> ID：14959804
> 
> 赞同：0
> 
> 时间：2013-02-19T14:24:52.790
> 
> 标签：android, xml-parsing, android-imageview, saxparser

我必须开发一个 android xml 解析使用 sax 。

这是我的 xml 提要：

```
 <root>
 <Categories>
         <Category name="book">
   <Articles>
     <article articleid="170" title="java programming">
      <thumb_image>
     <image url="http://website/var/tmp/thumb_2536_design_pavitra-rajaram_1_thumb_dec2012__forfeed.jpeg"/>
      </thumb_image>
      <images>
      <image url="http://food/dec2012/1_chef-olaf-niemeier_main_dec2012.jpg" alttext="Chef Olaf Niemeier"/>
       <image url="http://food/dec2012/2_chutneys-from-hamburg_main_dec2012.jpg" alttext="Chef Olaf Niemeier"/>
       </images>
       </article>
     <article articleid="171" title="Android programming">
     <thumb_image>
     <image url="http://website/var/tmp/thumb_2220_1_itc-grand-chola-chennai_main_dec2012__forfeed.jpeg"/>
     </thumb_image>
       <images>
       <image url="http://food/dec2012/1_chef-olaf-niemeier_main_dec2012.jpg" alttext="Chef Olaf Niemeier"/>
      <image url="http://food/dec2012/2_chutneys-from-hamburg_main_dec2012.jpg" alttext="Chef Olaf Niemeier"/>
        </images>
       </article>
       </Article>
  </Category>
  <Category name="Animals">
  <Articles>
          <article articleid="81" title="Dog">
          <thumb_image>
          <image url="http://website/var/tmp/thumb_2220_1_itc-grand-chola-chennai_main_dec2012__forfeed.jpeg"/>
         </thumb_image> 
         <images>
         <image url="http://food/dec2012/1_chef-olaf-niemeier_main_dec2012.jpg" alttext="Chef Olaf Niemeier"/>
           <image url="http://food/dec2012/2_chutneys-from-hamburg_main_dec2012.jpg" alttext="Chef Olaf Niemeier"/>
         </images>
          </article>
        <article articleid="81" title="Cat">
         <thumb_image>
           <image url="http://website/var/tmp/thumb_2220_1_itc-grand-chola-chennai_main_dec2012__forfeed.jpeg"/>
          </thumb_image>  
          <images>
          <image url="http://food/dec2012/1_chef-olaf-niemeier_main_dec2012.jpg" alttext="Chef Olaf Niemeier"/>
          <image url="http://food/dec2012/2_chutneys-from-hamburg_main_dec2012.jpg" alttext="Chef Olaf Niemeier"/>
           </images>
           </article>
          </Article>
          </Category>
          </Categories> 
```

我有类别名称和文章标题..但我没有得到图像..我怎样才能得到图像..请帮助我......

我使用了以下代码：

```
 public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    // reset
    tempVal = "";
    if (qName.equalsIgnoreCase("Category")) {
        // create a new instance of Laptop
        laptop = new Laptop();
        laptop.setBrand(attributes.getValue("name"));
    }
    else  if (qName.equalsIgnoreCase("article")) {
        // create a new instance of Laptop
        article = new Laptop();
        article.setModel(attributes.getValue("title"));
    } 
    else  if (qName.equalsIgnoreCase("thumb_image")) {

        // create a new instance of Laptop
        image = new Laptop();
        image.setImageURL(attributes.getValue("url"));
    } 

} 
```

请给我这些的解决方案...我怎样才能从 thum_image 标签中获取图像 url ...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:12:17.720

对 startElement 和 endElement 都使用处理程序。我建议你使用 Stack 作为解析器的成员。

```
 private tagStack = new Stack();

    public void startElement(String uri, String localName, String qName,
    Attributes attributes) {
      ...
      else if (qName.equals("image")) {
        if ("thumb_image".equals(tagStack.peek())) {
          image = new Laptop();
          image.setImageURL(attributes.getValue("url"));
        }
      }
      // make sure it is at the end of method
      tagStack.push(qName);
    }

    public void endElement(String uri, String localName, String qName) {
      ...
      tagStack.pop();
    } 
```

如果您只想要缩略图而不需要更多嵌套，您可以将 bool in_thumb_image 从 startElement() 设置为 true，如果它是 qName=="thumb_image"，则从 endElement() 设置为 false。堆栈更通用。对于更高级别，您可以使用 tagStack.search();

和题外话。XML 区分大小写，我认为不应该使用 ignoreCase。

# magento - 运行扩展评级功能的 url 可以是什么

> ID：14959805
> 
> 赞同：0
> 
> 时间：2013-02-19T14:24:56.067
> 
> 标签：magento, magento-1.7, magento-1.5, magento-1.6

当我给出类别 ID 并且结果应该是 JSON 格式时，我想获得产品的评级（来自 magento）。我想在浏览器页面中获取 JSON 数据。为此，我扩展了位于 app/code/core/mage/Rating/Model/Rating.php 的 Rating.php

根据inchoo网站，我刚刚将模型文件复制并粘贴到app/code/local/mynamespace/appname/Model/Rating.php。我在 app/code/local/mynamespace/appname/etc/config.xml 中创建了一个 config.xml 文件，还在 app/etc/modules 中创建了一个 xml。

在他们告诉他们添加'var_dump（get_class（$this））行的站点中；出口（）;' 在所需的功能。但是我尝试了很多方法来获取评分，但是没有用......文件如下：

评级.php

```
<?php

class mnamespace_appname_Model_Rating extends Mage_Core_Model_Abstract
{
    /**
     * rating entity codes
     *
     */
    const ENTITY_PRODUCT_CODE           = 'product';
    const ENTITY_PRODUCT_REVIEW_CODE    = 'product_review';
    const ENTITY_REVIEW_CODE            = 'review';

    /**
     * Define resource model
     *
     * @return void
     */
    protected function _construct()
    {
        $this->_init('rating/rating');
    }

    public function addOptionVote($optionId, $entityPkValue)
    {
        Mage::getModel('rating/rating_option')->setOptionId($optionId)
            ->setRatingId($this->getId())
            ->setReviewId($this->getReviewId())
            ->setEntityPkValue($entityPkValue)
            ->addVote();
        return $this;
    }

    public function updateOptionVote($optionId)
    {
        Mage::getModel('rating/rating_option')->setOptionId($optionId)
            ->setVoteId($this->getVoteId())
            ->setReviewId($this->getReviewId())
            ->setDoUpdate(1)
            ->addVote();
        return $this;
    }

    /**
     * retrieve rating options
     *
     * @return array
     */
    public function getOptions()

    {
        if ($options = $this->getData('options')) {
            return $options;
        }
        elseif ($id = $this->getId()) {
            return Mage::getResourceModel('rating/rating_option_collection')
               ->addRatingFilter($id)
               ->setPositionOrder()
               ->load()
               ->getItems();
        }
        return array();

    }

    public function getEntitySummary($entityPkValue,  $onlyForCurrentStore = true)
    {
        $this->setEntityPkValue($entityPkValue);
        return $this->_getResource()->getEntitySummary($this, $onlyForCurrentStore);
    }

    public function getReviewSummary($reviewId,  $onlyForCurrentStore = true)
    {
        $this->setReviewId($reviewId);
        return json_encode($this->_getResource()->getReviewSummary($this, $onlyForCurrentStore));
    var_dump(get_class($this)); //these are the lines added specially
    exit();                      //these two lines(upline also)
    }

    /**
     * Get rating entity type id by code
     *
     * @param string $entityCode
     * @return int
     */
    public function getEntityIdByCode($entityCode)
    {
        return $this->getResource()->getEntityIdByCode($entityCode);
    }
} 
```

config.xml 文件位于 app/code/local/Mynamespace/Appname/etc/cnfig.xml

```
<?xml version="1.0"?>
<config>
    <modules>
        <Mynamespace_Appname>
            <version>0.1</version>
        </Mynamespace_Appname>
    </modules>
    <global>
       <models>
          <Appname>
              <rewrite>
                  <item>Mynamespace_Appname_Model_Rating</item>
              </rewrite>
          </Appname>
       </models>
    </global>
</config> 
```

app/etc/modules/Mynamespace_Appname.xml 中的文件

```
<?xml version="1.0"?>
<config>
    <modules>
        <Mynamespace_Appname>
            <active>true</active>
            <codePool>local</codePool>
        </Mynamespace_Appname>
    </modules>
</config> 
```

在管理面板中它显示模块已激活..但我没有找到正确的 url 来运行模型文件..**我需要为此创建一个视图文件吗？？？**

谁能帮我解决这个问题...如果有任何错误，请提及..

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T20:31:33.547

将您的班级名称更改为： `class Mynamespace_Appname_Model_Rating`

确保您的文件路径也匹配案例（即 myname vs Myname）

# ios - 为什么 MFMailComposeViewController 会崩溃？

> ID：14959807
> 
> 赞同：5
> 
> 时间：2013-02-19T14:25:03.120
> 
> 标签：ios, uikit

调用“[MFMailComposeViewController canSendMail]”后，我看到一个奇怪的崩溃。

我无法复制它，它来自 iTunesConnect。正在从主线程调用该方法（canSendMail），此时，我没有对通讯簿做*任何事情。*

任何想法/建议将不胜感激。

提前致谢！

注意：这发生在 iOS 5.1.1 中。

```
Exception Type:  SIGABRT
Exception Codes: #0 at 0x3583232c
Crashed Thread:  0

Thread 0 Crashed:
0   libsystem_kernel.dylib              0x3583232c __pthread_kill + 8
1   libsystem_c.dylib                   0x347e729f abort + 95
2   AppSupport                          0x3133cc57 abortAfterFailingIntegrityCheck + 39
3   AppSupport                          0x3133ceef runIntegrityCheckAndAbort + 535
4   AppSupport                          0x3133d025 checkResultWithStatement + 113
5   AppSupport                          0x3133ea13 _connectAndCheckVersion + 1059
6   AppSupport                          0x3133eab7 CPSqliteDatabaseConnectionForWriting + 43
7   AppSupport                          0x3133eb8d CPSqliteDatabaseRegisterFunction + 21
8   AddressBook                         0x337873f7 ABCDBContextCreateWithPathAndAddressBook + 215
9   AddressBook                         0x3377b429 ABCCreateAddressBookWithDatabaseDirectoryAndForceInProcessMigrationInProcessLinkingAndResetSortKeys + 233
10  AddressBook                         0x33789cd7 ABAddressBookCreate + 15
11  Message                             0x31072453 MFThreadLocalAddressBook + 87
12  MessageUI                           0x313a5471 +[MFMailComposeController initialize] + 9
13  libobjc.A.dylib                     0x35edc973 _class_initialize + 239
14  libobjc.A.dylib                     0x35edc87b prepareForMethodLookup + 143
15  libobjc.A.dylib                     0x35edc747 lookUpMethod + 47
16  libobjc.A.dylib                     0x35edc713 _class_lookupMethodAndLoadCache3 + 19
17  libobjc.A.dylib                     0x35edbfcb objc_msgSend_uncached + 27
18  MessageUI                           0x313a5455 +[MFMailComposeViewController canSendMail] + 33 
```

==============

更新：

导致此崩溃的代码片段如下：

```
-(IBAction)helpButtonPressed
{
    if([MFMailComposeViewController canSendMail])
    {   
        NSString* mail  = self.feedbackSettings[@"mail"];
        NSString* title = self.feedbackSettings[@"title"];

        MFMailComposeViewController* mailComposer = [[MFMailComposeViewController alloc] init];
        mailComposer.mailComposeDelegate = self;
        mailComposer.toRecipients = @[ mail ];
        mailComposer.subject = title;

        [self presentViewController:mailComposer animated:YES completion:nil];
        [mailComposer release], mailComposer = nil;
    }
    else
    {
        [UIAlertView showAlertViewWithTitle:nil message:NSLocalizedString(@"Please, setup a mail account in your phone first.", nil) buttonTitle:NSLocalizedString(@"OK", nil)];
    }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-14T23:35:44.723

我最近看到一个运行 iOS 5 的客户的崩溃报告，该报告本质上与此相同。我最好的猜测是它是由损坏的通讯录数据库引起的。请注意，崩溃发生在调用`ABAddressBookCreate`（这是一个误导性的名称；它更像是 open）；您所做的任何事情都不会导致这种情况。

如果您对通讯簿有控制权，并且正在某个地方同步它，您可以尝试关闭同步，删除所有联系人，然后再次将它们同步回来（当然是先备份）。

`MFMailComposeViewController`正在访问地址簿，大概是为了向用户提供 To: 地址。

[Nit：在退出函数之前取消自动变量没有多大意义。]

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-14T19:13:52.443

只是在这里添加一些数据，这看起来超出了您的控制范围。来自实时应用程序的崩溃数据显示，同样的崩溃发生在数以万计的 11 个用户身上。所有的崩溃都发生在 iOS 5.1 和 5.1.1 的某些版本中，所以看起来问题在 iOS 6 中已经解决了。

正如另一个答案中提到的，您可以将调用包装`[MFMailComposeViewController canSendMail]`在一个`@try { }`块中，并且在它引发异常的情况下不执行任何操作。这至少可以防止那些通讯簿损坏的可怜用户崩溃。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-06-16T21:11:30.727

这是 iOS 5 中的一个错误，已在 iOS 6 中解决。它无法在 iOS 5 设备上“修复”，这不是您的错。

这是我要处理的...

我所做的是在我的代码周围放置一个 try/catch，如果这个异常被捕获，我要么：

答：如果用户使用的设备无法升级到 iOS 6（旧设备且不在此列表中：http: [//ipod.about.com/od/iPhoneQandA/f/What-Devices-Are-Ios-6 -Compatible.htm](http://ipod.about.com/od/iPhoneQandA/f/What-Devices-Are-Ios-6-Compatible.htm) )，优雅地弹出一个对话框，说我们遇到了由 Apple 引起的错误，我们无法控制或修复，并且只有较新的 iOS 设备才能修复此问题。

或者

B：如果用户使用的是可以升级 iOS 6 的设备，弹出一个对话框，让用户知道该错误并指示他们升级到 iOS 6 以修复该问题。

希望以最好的方式处理这个问题。

# batch-file - 批量更改文件路径

> ID：14959817
> 
> 赞同：0
> 
> 时间：2013-02-19T14:25:19.580
> 
> 标签：batch-file, cmd, exe

我对这个蝙蝠有问题：

```
@echo off

set CD1OLD=%CD%
cd /d %~dp0

%CD%\xxx.Http.Client.exe http://localhost:8081/aaa/comparer/aa/base/aa/compare >     debug_aaa_base.xml
echo.
%CD%\xxx.Http.Client.exe http://localhost:8081/aaa/comparer/aa/complessi/aa/compare > debug_aaa_complessi.xml
echo.
echo ****** LANCIO xxxx ******
%CD%\Lancio_xxxx.bat
echo. 
```

在这段代码之后，我需要运行它：

```
echo ****** SPOSTA FILES ****** 
%CD%\Elaborazione_aaa_Spostamento_files.exe
cd /d %CD1OLD% 
```

但它不起作用..似乎第一个代码在执行代码本身时改变了他的执行路径，导致第二个代码块的执行出现问题..

特别是，如果我删除此行

```
%CD%\Lancio_xxxx.bat 
```

一切正常。但我也需要运行那条线！

有什么建议么？提前致谢

最好的祝福

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:48:37.153

请注意，如果您只是从另一个调用 .bat，命令处理器将不会返回给调用者。调用批处理不会恢复执行，“调用”就像一个简单`goto`的转到引用的批处理文件。

如果你更换

```
%CD%\Lancio_xxxx.bat 
```

和

```
call %CD%\Lancio_xxxx.bat 
```

然后在执行该批处理文件之后，该`call`行之后的命令也将被执行，这似乎是您正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:43:14.163

在执行 Lancio_xxx.bat 的行周围尝试命令 PUSHD 和 POPD

这些命令分别保存和恢复当前目录

有关详细信息，请参阅以下链接：

[http://ss64.com/nt/pushd.html](http://ss64.com/nt/pushd.html)

[http://ss64.com/nt/popd.html](http://ss64.com/nt/popd.html)

# javascript - 覆盖visualforce页面中的选项列表值

> ID：14959822
> 
> 赞同：0
> 
> 时间：2013-02-19T14:25:37.303
> 
> 标签：javascript, html, salesforce, apex-code, visualforce

我通过表单中的 apex:inputField 在 vi​​sualforce 页面中使用选项列表。我将该值保存在自定义对象中。该值被保存在对象中。但是当我以相同的形式（visualforce 页面）打开该记录时。加载表单时，保存的值就在那里。但是当表单被加载时，该值变为 null 并且 --None-- 被选中。

我尝试使用带有警报的javascript，但它显示了正确的值。我找不到问题。

我使用了以下代码：

```
<apex:pageBlockSectionItem id="Menopausal_StatusItem">  
                        <apex:outputText value="Menopausal Status:" />
                        <apex:outputPanel >
                            <apex:inputField value="{!msd.AgeVal__c}" id="ageValId" label="" style="display:none;"/>
                            <apex:inputField value="{!msd.Menopausal_Status__c}" id="Menopausal_Status" required="true"/>
                        </apex:outputPanel>
                    </apex:pageBlockSectionItem>
                    <!--<script>
                        alert('{!msd.Menopausal_Status__c}');
                        alert(document.getElementById('pageId:formId:pageBlockId:pageBlockSectionId:Menopausal_StatusItem:Menopausal_Status').value);
                    </script>
                --> 
```

这是一个从属选项列表 (msd.Menopausal_Status_c *)，控制选项列表是 msd.AgeVal* _c。

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T15:40:13.567

我认为这与依赖选择列表有关。你有价值`AgeVal__c`吗？如果不是，`Menopausal_Status__c`则在 Visualforce 页面中加载它时可能无法正确呈现。

您可以通过暂时使控制选择列表可见来验证这一点，以检查其内容。

# c# - 将列表转换为逗号分隔的字符串

> ID：14959824
> 
> 赞同：201
> 
> 时间：2013-02-19T14:25:41.367
> 
> 标签：c#, .net

我的代码如下：

```
public void ReadListItem()
{
     List<uint> lst = new List<uint>() { 1, 2, 3, 4, 5 };
     string str = string.Empty;
     foreach (var item in lst)
         str = str + item + ",";

     str = str.Remove(str.Length - 1);
     Console.WriteLine(str);
} 
```

输出：`1,2,3,4,5`

`List<uint>`将转换为逗号分隔字符串的最简单方法是什么？

* * *

## 回答 #1

> 赞同：387
> 
> 时间：2013-02-19T14:27:16.227

享受！

```
Console.WriteLine(String.Join(",", new List<uint> { 1, 2, 3, 4, 5 })); 
```

第一个参数：`","`
第二个参数：`new List<uint> { 1, 2, 3, 4, 5 })`

[String.Join](http://msdn.microsoft.com/en-us/library/57a79xd0.aspx)将列表作为第二个参数，并使用作为第一个参数传递的字符串将所有元素连接成一个字符串。

* * *

## 回答 #2

> 赞同：79
> 
> 时间：2013-02-19T14:27:19.693

您可以使用[String.Join](http://msdn.microsoft.com/en-us/library/dd992421.aspx)方法来组合项目：

```
var str = String.Join(",", lst); 
```

* * *

## 回答 #3

> 赞同：29
> 
> 时间：2013-02-19T14:30:27.157

使用`String.Join`：

```
string.Join<string>(",", lst); 
```

使用 LINQ 聚合：

```
lst .Aggregate((a, x) => a + "," + x); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-08-18T09:43:56.873

如果您有一个整数集合：

```
List<int> customerIds= new List<int>() { 1,2,3,3,4,5,6,7,8,9 }; 
```

您可以使用`string.Join`获取字符串：

```
var result = String.Join(",", customerIds); 
```

享受！

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2015-04-11T06:59:49.907

按照这个：

```
List<string> name = new List<string>();

name.Add("Latif");
name.Add("Ram");
name.Add("Adam");
string nameOfString = (string.Join(",", name.Select(x => x.ToString()).ToArray())); 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2016-03-23T16:37:52.207

您可以参考以下示例从列表中获取逗号分隔的字符串数组。

例子：

```
List<string> testList= new List<string>();
testList.Add("Apple"); // Add string 1
testList.Add("Banana"); // 2
testList.Add("Mango"); // 3
testList.Add("Blue Berry"); // 4
testList.Add("Water Melon"); // 5

string JoinDataString = string.Join(",", testList.ToArray()); 
```

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2017-02-12T12:27:05.630

> 如果您使用的是 .NET framework> 4.0，则可以为此使用 String.Join。

```
var result= String.Join(",", yourList); 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2015-09-30T10:14:46.793

```
@{ var result = string.Join(",", @user.UserRoles.Select(x => x.Role.RoleName));
    @result
} 
```

我在 MVC Razor View 中使用来评估和打印以逗号分隔的所有角色。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-02-19T14:37:22.890

尝试

```
Console.WriteLine((string.Join(",", lst.Select(x=>x.ToString()).ToArray()))); 
```

高温高压

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-02-19T09:37:06.213

我们可以尝试这样用逗号分隔列表条目：

```
string stations = 
haul.Routes != null && haul.Routes.Count > 0 ?String.Join(",",haul.Routes.Select(y => 
y.RouteCode).ToList()) : string.Empty; 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-06-17T11:10:31.883

```
static void Main(string[] args) {
    List<string> listStrings = new List<string>() {"C#", "ASP.NET", "SQL Server", "PHP", "Angular"};
    string CommaSeparateString = GenerateCommaSeparateStringFromList(listStrings);
    Console.Write(CommaSeparateString);
    Console.ReadKey();
}

private static string GenerateCommaSeparateStringFromList(List<string> listStrings){return String.Join(",", listStrings);} 
```

*[在 C# 中将字符串列表转换为逗号分隔的字符串](http://www.codesolution.org/convert-a-list-of-string-to-comma-separated-string-c/)*

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-05-07T21:47:43.183

如果您的列表项有多个字符串，您还可以覆盖 ToString()：

```
public class ListItem
{
    public string string1 { get; set; }

    public string string2 { get; set; }

    public string string3 { get; set; }

    public override string ToString()
    {
        return string.Join(
        ","
        , string1
        , string2
        , string3);
    }
} 
```

要获取[CSV](https://en.wikipedia.org/wiki/Comma-separated_values)字符串：

```
ListItem item = new ListItem();
item.string1 = "string1";
item.string2 = "string2";
item.string3 = "string3";

List<ListItem> list = new List<ListItem>();
list.Add(item);

string strinCSV = (string.Join("\n", list.Select(x => x.ToString()).ToArray())); 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2020-01-10T09:56:39.113

```
categories = ['sprots', 'news'];
categoriesList = ", ".join(categories)
print(categoriesList) 
```

这是输出：sprots, news

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-06-03T18:18:48.397

您可以用逗号分隔列表实体，如下所示：

```
//phones is a list of PhoneModel
var phoneNumbers = phones.Select(m => m.PhoneNumber)    
                    .Aggregate(new StringBuilder(),
                        (current, next) => current.Append(next).Append(" , ")).ToString();

// Remove the trailing comma and space
if (phoneNumbers.Length > 1)
    phoneNumbers = phoneNumbers.Remove(phoneNumbers.Length - 2, 2); 
```

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2015-11-19T10:39:16.387

您可以使用*google-collections.jar*，它有一个名为 Joiner 的实用程序类：

```
String commaSepString = Joiner.on(",").join(lst); 
```

或者你可以使用 StringUtils 类，它有一个叫做*join*的函数。要使用 StringUtils 类，您需要使用 common-lang3.jar

```
String commaSepString=StringUtils.join(lst, ','); 
```

作为参考，请参阅此链接*[将集合转换为逗号分隔字符串](http://techno-terminal.blogspot.in/2015/08/convert-collection-into-comma-separated.html)*

# php - $_GET, & 正在打断

> ID：14959830
> 
> 赞同：0
> 
> 时间：2013-02-19T14:25:52.607
> 
> 标签：php, get

尝试使用 $_GET['url'] 变量从 URL 中获取数据：

[http://mysite.com/?url=](http://mysite.com/?url=) **[http://this.is/?q=an&?example=url](http://this.is/?q=an&?example=url)**

我上面想要的是粗体，但遗憾的是 $_GET['url'] 只会得到“http://this.is/?q=an”，因为 & 使它解释为新变量的开头网址。

有没有办法忽略与号，以便我的脚本可以获取我需要的整个 URL？附加到 ?url= 的 URL 不在我的控制范围内，所以大多数工作都包含可怕的 &。在阅读了有关 Stack Overflow 的问题后，我并没有抱太大希望:(

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:29:27.520

如果您完全无法控制查询字符串上的参数（无论出于何种原因），您也可以通过手动解析`$_SERVER['QUERY_STRING']`变量来做到这一点，例如

```
$page = str_replace("url=", "", $_SERVER['QUERY_STRING']); 
```

当然，如果可能的话，您应该使用其他人发布的答案对其进行编码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:27:26.177

采用[`urlencode()`](http://www.php.net/manual/en/function.urlencode.php)

```
$get_url = urlencode('http://this.is/?q=an&?example=url');
$url = 'http://mysite.com/?url=' . $get_url; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:36:49.333

如果您无法控制查询字符串，则可以使用

```
$query = $_SERVER['QUERY_STRING'];
$pos = strpos($query, "url=");
if ($pos !== false) {
    $url = substr($query, $pos + 4);
} 
```

此代码返回之后的所有内容`url=`

如果有可能，您应该对 url 进行编码`urlencode`以创建一个干净的 url。如果你不这样做，你最终会得到一个服务器错误，带有奇怪的 url，你不能传递多个 url（因为 url= 之后的所有内容都被解释为 url）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-19T14:52:24.567

这是经过测试的代码：

```
if (!empty($_GET['url'])) {
    echo $_GET['url'].'<br />';
}
$url = urlencode('http://this.is/?q=an&?example=url');
echo '<a href="http://mysite.com/?url='.$url.'">LINK</a>'; 
```

希望它会帮助你。

# joomla - 使用 JMapMyLDAP 的 LDAP Joomla

> ID：14959831
> 
> 赞同：1
> 
> 时间：2013-02-19T14:25:59.627
> 
> 标签：joomla, ldap

我在理解 LDAP 方面真的很糟糕，而且我还没有找到可靠的来源来了解我需要什么。我现在需要使用 LDAP 目录对 joomla 中的用户进行身份验证，并且我正在使用[JMapMyLDAP](http://shmanic.com/tools/jmapmyldap/about.htm)。在配置中，它要求我提供一个基本 DN，我不确定那是什么，但在这种情况下，我有

```
ou=People,do=uniandes,do=edu,do=co 
```

然后在过滤器中，我想按 Uid 过滤，我希望能够按 Uid 映射用户，以便根据他们的 uid 我可以为他们分配适当的查看和编辑权限，但我不太确定该怎么做所以在过滤器中我有

```
(&(uid=[username])) 
```

然后在查找类型中我有 -forward- 在查找属性中我有 -member- 在查找成员中我有 -Uid- 并且在 DN 属性中 -distinguishedName-。最后，我将映射设置为 myusername:group，当尝试使用我的 LDAP 用户登录时，我无法登录。我不知道我是否做错了什么或可能发生了什么。任何人有任何想法？有什么推荐的读物吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T03:28:32.667

您使用的是什么 LDAP 目录。您的基本 DN`ou=People,do=uniandes,do=edu,do=co`几乎可以肯定是不正确的。, `cn=`,部分是众所周知的对象命名属性 `ou=`。似乎不太可能。`dc=``do=`

如果您使用 Active Directory 作为 LDAP 目录，最后一部分（通常是两个）需要`dc=`.

`ou=People,dc=uniandes,dc=edu`除非最后一点关于`do=co`在您的上下文中意味着某些东西，否则更有可能是。

如果您将 eDirectory 用作 LDAP 目录，则更有可能是：`ou=People,ou=uniandes,o=edu`

至于您的过滤器，`(&(uid=[username]))`您可能只需`(uid=[username])`假设`[username]`提供的用户名是 Joomla 宏即可。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-20T06:49:57.513

例如：labs.com

        / \

  登录公司

   / \ / \

用户组单位客户

          / | \

      错误帐户小时

根单元.ldif：

# 根节点

dn：dc=实验室，dc=com

直流：实验室

对象类：dcObject

对象类：组织单位

ou: labs 点 com

# 登录顶部

dn: ou=login,dc=labs,dc=com

ou: 登录

对象类：组织单位

# 用户、uid、密码

dn: ou=user,ou=login,dc=labs,dc=com

ou：用户

对象类：组织单位

# 团体

dn: ou=group,ou=login,dc=labs,dc=com

ou：组

对象类：组织单位

## 对于公司组织顶部

dn: ou=company,dc=labs,dc=com

欧：公司

对象类：组织单位

# 用于公司组织（单位）

dn: ou=unit,ou=company,dc=labs,dc=com

ou：单位

对象类：组织单位

# 人力资源（单位下）

dn: ou=hr,ou=unit,ou=company,dc=labs,dc=com ou: hr objectClass: organizationsUnit

# MIS（单位下）

dn：ou=mis，ou=unit，ou=company，dc=labs，dc=com ou：mis objectClass：organizationalUnit

# 账户（单位下）

dn: ou=account,ou=unit,ou=company,dc=labs,dc=com

ou：账号

对象类：组织单位

# 供客户信息

dn：ou=客户，ou=公司，dc=labs，dc=com

ou：客户

对象类：组织单位

[参考](http://iori.tw/ldap%E5%9F%BA%E6%9C%AC%E5%AE%89%E8%A3%9D%E5%8F%8A%E6%95%B4%E5%90%88%E7%99%BB%E5%85%A5%E8%AA%8D%E8%AD%89%E6%A9%9F%E5%88%B6%E7%9A%84%E6%9E%B6%E8%A8%AD-on-centos-6-2_x64/)

# ruby-on-rails-3 - 如何两次引用同一模型并以多选形式创建关联？

> ID：14959833
> 
> 赞同：0
> 
> 时间：2013-02-19T14:26:00.877
> 
> 标签：ruby-on-rails-3, associations, polymorphism

我有两个类（游戏和报告），并希望将它们与附加属性（默认 = 是或否）链接起来。然后游戏应该有 default_reports 和 optional_reports。然后通过在游戏创建/编辑表单中的选择（多个）中选择默认和可选报告来更新关联。

我尝试过使用 has_many 和 through 以及多态关联，但似乎没有什么适合用例，其中关联的对象是固定的，您只想管理关联。

```
class Game < ActiveRecord::Base
  has_many :game_reports
  has_many :reports, :through => :game_reports
end

class Report < ActiveRecord::Base
  has_many :game_reports
  has_many :games, :through => :game_reports
end

class GameReport < ActiveRecord::Base
  belongs_to :game
  belongs_to :report
end 
```

任何帮助表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:41:51.153

这只是模型。创建记录的视图和形式是完全不同的事情。

您始终可以向 has_many 添加条件选项。我假设您要为 game_reports 添加默认值，因此将您的类更改为类似。

```
class Game < ActiveRecord::Base
  has_many :game_reports
  has_many :reports, :through => :game_reports
  has_many :default_reports, through: :game_reports, source: :report, conditions: { game_reports: { default: true } }
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-04T21:25:23.143

Rails 4.2+，使用带范围的多态关联并指定**foreign_key**和**foreign_type**选项。

```
class GameReport
   belongs_to :report, :polymorphic => true
end

class Game
   has_many :game_reports, :as => :report, :dependent => :destroy
   has_many :reports, -> { where attachable_type: "GameReport"},
     class_name: GameReport, foreign_key: :game_report_id,
     foreign_type: :game_report_type, dependent: :destroy
end 
```

其他方法：

[Rails 多态关联与同一模型上的多个关联](https://stackoverflow.com/questions/2494452/rails-polymorphic-association-with-multiple-associations-on-the-same-model)

# java - Hadoop 1.0.4 的 JobConf v/s 配置

> ID：14959834
> 
> 赞同：7
> 
> 时间：2013-02-19T14:26:04.933
> 
> 标签：java, hadoop, mapreduce

嗨，我是 Hadoop 新手，它是文件系统。我看到两个不同的 WordCount 示例使用`JobConf`和`Configuration`。他们有什么区别。

我研究了它`JobConf`是旧包的一部分`org.apache.hadoop.mapred`（在 0.20.x 中已弃用），但配置是新包的一部分`org.apache.hadoop.mapreduce`。但现在在 v1.0.4 中它已被弃用。

目前我们有两种在java中运行map reduce作业的方法，一种是使用（扩展）`org.apache.hadoop.mapreduce`包中的类，另一种是实现`org.apache.hadoop.mapred`包中的类。

我想知道：

1.  `mapred`和`mapreduce`包结构有什么区别，为什么`mapred`不推荐使用？

2.  哪种方法更适合 v1.0.4 使用，为什么？`JobConf`还是`Configuration`？

3.  哪个更适合 v1.0.4？`mapred`还是`mapreduce`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T20:01:07.670

如果您查看[发布页面](http://hadoop.apache.org/releases.html)，您会看到 1.0.4 对应于大约 0.20.20x

[为了提供一些背景信息，以下是邮件列表](http://www.mail-archive.com/mapreduce-dev@hadoop.apache.org/msg01833.html)中正在讨论的内容：

```
The "old" MapReduce API in org.apache.hadoop.mapred was deprecated in the 0.20 
release series when the "new" (Context Objects) MapReduce API was added in
org.apache.hadoop.mapreduce. Unfortunately, the new API was not complete in 0.20
and most users stayed with the old API. This has led to the confusing situation 
where the old API is generally recommended, even though it is deprecated. 
```

如您所见，这主要是一个复古兼容性问题。

所以底线是，如果您现在使用 1.0.4 启动您的应用程序，您**应该**使用`mapreduce`而不是`mapred`因为它现在是首选方式，但如果您有遗留应用程序，您仍然可以使用旧**的方式。**`mapred`这意味着您**应该**使用`Configuration`.

至于 和 之间的区别`mapred`，`mapreduce`正如上面的摘录中所解释的，主要来自于`Context`对象的引入，但是还有很多其他的变化和新的类是旧的`mapred`。

# rabbitmq - amq.topic 的预期用途是什么？

> ID：14959835
> 
> 赞同：5
> 
> 时间：2013-02-19T14:26:05.773
> 
> 标签：rabbitmq, amqp

预定义的 amq.topic 交换的目的是什么？

我可以将其用于我自己的目的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T22:27:37.500

是的。

看看这个： http: [//lostechies.com/derekgreer/2012/03/28/rabbitmq-for-windows-exchange-types/](http://lostechies.com/derekgreer/2012/03/28/rabbitmq-for-windows-exchange-types/)了解更多关于 RabbitMQ 提供的不同交换类型的细节

和[http://lostechies.com/derekgreer/2012/05/18/rabbitmq-for-windows-topic-exchanges/](http://lostechies.com/derekgreer/2012/05/18/rabbitmq-for-windows-topic-exchanges/)专门用于`Topic exchange`

您可以以任何方式使用预定义的 amq.topic 交换，添加/删除绑定。如果需要，您也可以删除此交换并使用完全不同的交换。

# jpa - 在 OQL 或 JQL 中，你如何做这种类型的外连接

> ID：14959840
> 
> 赞同：0
> 
> 时间：2013-02-19T14:26:22.407
> 
> 标签：jpa, jql, oql

假设我们有两个完全不相关的实体 EntityX 和 EntityY，它们都具有列年龄。我如何在 OQL 中进行这样的连接

select x,y from EntityX as x full external join EntityY as y on x.age = y.age

这不可能吗？

谢谢，院长

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:41:02.417

`full outer join`几乎不应该使用。您应该改用`left outer join`JP-QL/OQL 支持的：http: [//docs.jboss.org/hibernate/entitymanager/3.5/reference/en/html/queryhql.html#queryhql-joins](http://docs.jboss.org/hibernate/entitymanager/3.5/reference/en/html/queryhql.html#queryhql-joins)

# ruby - 如何使 Ruby 方法传递输出参数（更改引用参数的值）？

> ID：14959841
> 
> 赞同：2
> 
> 时间：2013-02-19T14:26:24.167
> 
> 标签：ruby, methods, ruby-on-rails-3.2, pass-by-reference, argument-passing

我正在尝试使用 ruby​​ 中的输出参数创建一个方法。

[我在这里](https://stackoverflow.com/questions/6527034/when-passing-objects-as-parameters-are-they-passed-by-reference)和[这里](https://stackoverflow.com/questions/1872110/is-ruby-pass-by-reference-or-by-value)阅读了关于红宝石是否按值或按引用传递其参数的讨论的不同帖子和

我理解严格来说，Ruby 总是按值传递，但传递的值实际上是一个引用。为什么会有这么多争论的原因。

我发现有几种方法可以更改引用变量的值。例如，当它是一个数组、一个哈希或一个字符串时使用**替换方法，或者****合并！**当它是一个哈希。

我发现使用**integer**，我可以在我的方法之外更改和传递值，而无需使用任何特殊方法。

**我的问题是关于其他对象**。例如，我想检索对象的“id”属性，以及对象引用本身：

```
 class RestaurantController < ApplicationController
    def pizza_to_deliver(pizza_name, id_of_the_order, pizza)

      # pizza to eat
      pizza = Pizza.where(:name => pizza_name).first

      # unknown pizza
      return false if pizza.nil?

      # first customer order about this pizza
      id_of_the_order = Orders.where(:pizza_id => pizza.id).first

      true
    end
  end

my_pizza_name = 'margerita'
My_order_id = nil
my_pizza = nil

my_restaurant = RestaurantController.new

if my_restauant.pizza_to_deliver(my_pizza_name, My_order_id, my_pizza) then
  puts "Pizza to deliver : #{my_order_id}"
  rex_dog.eat(my_pizza)
end 
```

如何使这个工作？（order_id 和 my_pizza 保持为零）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T22:08:49.630

Ruby 只能通过值传递，就像 Python 和 Java 一样。与 Python 和 Java 一样，对象不是直接的值，而是通过引用进行操作的。

您似乎已经了解它是如何工作的——分配给局部变量永远不会对调用方作用域产生任何影响。并且要与调用方范围“共享”信息而不是返回，您必须在对象上使用某种方法来“改变”传递的引用所指向的对象（如果存在这样的方法；即，如果对象是可变的） . 但是，这只是修改了同一个对象，而不是提供对您想要的新对象的引用。

如果您不愿意返回该值，则可以传递一个可变容器（如一个元素的数组），然后被调用函数可以对其进行变异并将任何内容放入其中，并在调用者范围内看到它。

另一种选择是让函数占用一个块。该函数将为块提供 的新值`pizza`，然后块（由调用者给出）可以决定如何处理它。调用者可以传递一个简单地将比萨饼设置在自己范围内的块。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-20T03:06:07.120

在大多数情况下，out 参数是没有多值返回的语言的一种解决方法。在 Ruby 中，我只返回一个包含函数所有输出值的数组。或者使对象中的可变值实例变量和函数成为该对象上的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T14:08:16.867

感谢您的两个答案。

看来我终于找到了一个等效的解决方案：**可变容器**。

我创建了一个新类 ' `OutputParameter`'，其中包含（作为**attr_accessors**）我想从我的方法中输出的参数。然后我将这个类的一个实例传递给我的方法。

```
 class OutputParameters
    attr_accessor :order_id, pizza
  end

  class RestaurantController < ApplicationController
    def pizza_to_deliver(pizza_name, output_parameters)

      # pizza to eat
      pizza = Pizza.where(:name => pizza_name).first

      # unknown pizza
      return false if pizza.nil?

      # first customer order about this pizza
      id_of_the_order = Orders.where(:pizza_id => pizza.id).first

      # Output values returned
      output_parameters.pizza = pizza
      output_parameters.order_id = id_of_the_order
      true
    end
  end

my_pizza_name = 'margerita'
my_output = OutputParameters.new
my_restaurant = RestaurantController.new

if my_restaurant.pizza_to_deliver(my_pizza_name, my_output) then
  puts "Pizza to deliver : #{my_output.order_id}"
  rex_dog.eat(my_output.pizza)
end 
```

* * *

您建议的哈希或数组似乎是一个更好的主意，因为它更具适应性：我不必声明一个类。

我只会使用合并！方法

```
 class RestaurantController < ApplicationController
    def pizza_to_deliver(pizza_name, output_hash)

      # pizza to eat
      pizza = Pizza.where(:name => pizza_name).first

      # unknown pizza
      return false if pizza.nil?

      # first customer order about this pizza
      id_of_the_order = Orders.where(:pizza_id => pizza.id).first

      # Output values returned
      output_hash.merge!({:pizza => pizza})
      output_hash.merge!({:id_of_the_order => id_of_the_order})
      true
    end
  end

my_pizza_name = 'margerita'
my_output_hash = {}
my_restaurant = RestaurantController.new

if my_restaurant.pizza_to_deliver(my_pizza_name, my_output_hash) then
  puts "Pizza to deliver : #{my_output_hash[:id_of_the_order]}"
  rex_dog.eat(my_output_hash[:pizza])
end 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-25T07:06:59.613

您可以像这样使用多个返回值：

```
def maybe_get_something
  ...
  return nil, "sorry" if bad_condition
  ...
  something, nil
end

...
something, err = maybe_get_something
if !err.nil?
  handle(err)
  return
end
do_something_with(something) 
```

与人们在使用[Go](https://blog.golang.org/error-handling-and-go)时所做的非常相似：

```
f, err := os.Open("filename.ext")
if err != nil {
    log.Fatal(err)
}
// do something with the open *File f 
```

# c++ - 调用祖父构造函数的虚拟但不是多重继承

> ID：14959842
> 
> 赞同：4
> 
> 时间：2013-02-19T14:26:26.023
> 
> 标签：c++, virtual-inheritance

我有这种代码：

```
class Ref {<undefined>};
Ref refObjectForA, refObjectForB;

class Base
{
  public:
    Base(const Ref & iRef) : _ref(iRef) {}
    virtual ~Base() {}

    const Ref & ref;
};

class A: public Base
{
  public:
     A() : Base(refObjectForA) {}
     virtual ~A() {}
};

class B: public A
{
  public:
    B() : Base(refObjectForB) {} // won't compile: Base is not direct base of B
    virtual ~B() {}
}; 
```

由于属性是一个引用，我想我只能在构造函数中设置它，所以我需要`Base`在`B()`. 我找到了两种方法：提供一个“前向”构造函数`A`（但这意味着在所有*可能*被继承的类中添加代码）：

```
A(const Ref& iRef): Base(iRef) 
```

或使用虚拟继承：

```
class A: public virtual Base 
```

第二个选项允许在`B`实现中使用更直接的代码，但我想知道我是否在丑陋的把戏中滥用了虚拟继承，或者它是否是一个有效的用例。

*   在这种情况下我可以使用虚拟继承吗？
*   如果不是，是什么原因？

我发现的“意外”行为之一是，由于虚拟继承，不可能指向指向指针的`static_cast`指针。`Base``B`

此外，我还想知道它为什么起作用（我的意思是为什么 a `B().ref == refObjectForB`）：我认为对默认`A()`构造函数的隐式调用`B()`会在显式构造函数之后覆盖`ref`属性`Base`，但虚拟继承可能并非如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:34:15.147

如果你想坚持你的继承层次结构，我能看到的最好的选择是实现受保护的构造函数，它们将引用它们转发给`Base`类。使构造函数受保护确保无法使用此构造函数构造（最终）实例，因此它将仅在子类中用于初始化超类。

使用一些或多或少丑陋和危险的宏，这变得很容易编写：

```
#define REF_FORWARD_CTOR(ClassName, DirectSuperClassName) \
    protected: ClassName(class Ref &r) : DirectSuperClassName(r) {} \
    public:

class A : public Base
{
    REF_FORWARD_CTOR(A, Base)
public:
    A() : Base(refObjectForA) {} // normal ctor
};

class B : public A
{
    REF_FORWARD_CTOR(B, A)
public:
    B() : A(refObjectForB) {} // normal ctor
}; 
```

另一种设计是让`A`和`B`两者都（直接）从`Base`. 然后，通过使用多重继承和“公共类”添加功能，可能是私有的，具体取决于它们的用途：

```
class Base {
};

class Common {
    // common stuff used by both A and B
};

class A : public Base, public Common {
    // no further stuff here
};

class B : public Base, public Common {
    // add more stuff, or put it in a common super-class again,
    // if some classes want to inherit from B again
}; 
```

这种设计的问题是 in 的功能`Common`无法访问`A`and中的内容`B`。要解决此问题，请执行以下操作之一：

*   如果只需要静态的东西：使用[CRTP](https://en.wikibooks.org/wiki/More_C++_Idioms/Curiously_Recurring_Template_Pattern)在具体类型中指定`A`/ ：然后可以使用，但与具体实例没有任何关系`B``Common``Common<A>``A::...``A`
*   如果需要实例：在构造函数中提供指针/引用`Common`（轻微开销）
*   将前两个解决方案放在一起：使用 CRTP，在其中实现包装函数，`A`并在`B`其中调用函数`Common<A>`并`Common<B>`提供`this`（这是一个`A*`或`B*`通过一个额外的参数。
*   `Common`与上面相同，但是如果您在此指针参数上重载/模板化这些函数（“CRTP on functions”，如果您想这样称呼它），则该类也可以是非模板化的（无 CRTP）。[代码胜于雄辩。](http://ideone.com/wFDygc)（示例代码没有您的引用，并且专注于“公共类”。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T14:34:50.103

是的，您可以在技术上使用虚拟继承来实现在最派生类中提供引用的目标。

是的，这是一种设计的味道。

你的类应该不需要知道除了它们的直接基础之外的任何东西（当出于其他原因需要时，虚拟继承是规则的例外）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-11T10:53:45.620

坚持建议的类层次结构，为了解决问题，使用“使用声明”将Base的构造函数带到类A的受保护部分就足够了，即：

```
class A: public Base
{
  public:
     A() : Base(refObjectForA) {}
     virtual ~A() {}
  protected:
    using Base::Base;
}; 
```

# azure - 部署到 Windows azure 实例时升级数据库架构

> ID：14959843
> 
> 赞同：1
> 
> 时间：2013-02-19T14:26:32.917
> 
> 标签：azure, azure-sql-database

我在 Windows azure 实例上托管了 Web 应用程序。我们有一个测试和实时云服务，测试服务有 1 个实例，实时服务有 3 个实例。

测试应用程序每晚通过 TFS Builds 自动部署，并使用 power shell 脚本部署到 Windows Azure。

问题是我们有用于数据库模式和数据更改（如果需要）的老式 sql 脚本。目前我们必须手动登录到 azure sql 数据库 (SMSS) 并运行脚本。

我想使用 powershell 脚本在每晚通过 TFS Build Machine 运行的每个构建上自动化 sql 脚本。我怎样才能做到这一点 ？

SQL 脚本是可重新运行的，所以不用担心，如果它每天运行相同的脚本，因为这不会在测试应用程序上产生任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T22:56:03.893

也许我错了，但我认为这很简单。为什么不从将 SQL 脚本文件作为参数传递的 PowerShell 脚本中调用“sqlcmd.exe”实用程序？

请务必使用 SQL Server 2008 R2 或更高版本附带的 sqlcmd.exe，以便与 SQL Azure 一起正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-29T16:06:56.273

我想了解如何部署 SQL 包。

看起来您有一个必须在每次部署数据库后运行的脚本。这可以使用 powershell (ExecuteNonQquery) 来完成，就像它可以用于本地 SQL Server 一样。

**对于单个查询：**

```
$SqlConnection = New-Object System.Data.SqlClient.SqlConnection
$sqlQuery = "Your Query here"
$SqlConnection.ConnectionString = "Database Conncetion String"
$SqlCmd = New-Object System.Data.SqlClient.SqlCommand
$SqlCmd.CommandText = $sqlQuery
$SqlCmd.CommandTimeout = 300
$SqlCmd.Connection = $SqlConnection
$sqlConnection.Open()
$result = $sqlCmd.ExecuteNonQuery()
$sqlConnection.Close() 
```

准备好查询和连接字符串

**对于 SQL 脚本：您可以在**[此处](https://stackoverflow.com/questions/10894688/how-to-execute-sql-file-using-powershell) 参考问题

希望这可以帮助

# sql - 加权时间长度以每次获得不同的日期

> ID：14959845
> 
> 赞同：0
> 
> 时间：2013-02-19T14:26:34.713
> 
> 标签：sql

我有一个到达日期 2010 年 1 月 1 日，这已经发生了 50 次，我想使用下面的停留时间加权指南随机化 50 个离开日期，因为您可以看到其中大部分将在 2 天后离开，但我想不出出如何写代码，你能帮忙。

```
LengthofStay LengthofStayWeighting
------------ ---------------------
1            1
2            5
3            4
4            3
5            3
6            3
7            3
8            1
9            1
10           1 
```

我已经开始但已经卡住了

```
SELECT ArrivalDate,RAND(checksum(NEWID())) * LengthOfStay.LengthofStayWeighting AS Expr1, 
ArrivalDate + Expr1 as DepartureDate

FROM Bookings, LengthOfStay
ORDER BY ArrivalDate 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:30:56.800

您可能需要使用 DATEADD

```
SELECT ArrivalDate, DATEADD(day, RAND(checksum(NEWID())) * LengthOfStay.LengthofStayWeighting, ArrivalDate) AS DepartureDate    
FROM Bookings, LengthOfStay
ORDER BY ArrivalDate 
```

**更新**：根据您的评论，我想我误解了这个问题。这是你需要的吗？：

```
SELECT ArrivalDate, 
DATEADD(day, (select TOP 1 LengthofStayWeighting FROM LengthOfStay group by LengthofStayWeighting ORDER BY LengthofStayWeighting DESC), ArrivalDate) AS DepartureDate    
    FROM Bookings
    ORDER BY ArrivalDate 
```

基本上，您需要获得重复次数最多的长度，在您的情况下为“1”。如果是这样，我认为你需要包括一个外键..

```
SELECT ArrivalDate, 
DATEADD(day, (select TOP 1 LengthofStayWeighting FROM LengthOfStay l WHERE b.Id = l.BookingId GROUP BY LengthofStayWeighting  ORDER BY LengthofStayWeighting DESC), ArrivalDate) AS DepartureDate    
    FROM Bookings b
    ORDER BY ArrivalDate 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:01:04.400

您正在尝试从累积分布中提取数字。这需要生成一个随机数，然后从分布中提取。

下面的代码给出了一个例子：

```
with LengthOfStay as (select 1 as LengthOfStay, 1 as LengthOfStayWeighting union all
                   select 2 as LengthOfStay, 5 union all
                   select 3, 4 union all
                   select 4, 4
                  ),
     Bookings as (select cast('2013-01-01' as DATETIME) as ArrivalDate),
     CumeLengthOfStay as
         (select los.*,
                 (select SUM(LengthOfStayWeighting) from LengthOfStay los2 where los2.LengthOfStay <= los.LengthOfStay
                 ) as cumeweighting
          from LengthOfStay los
         ) -- select * from CumeLengthOfStay
SELECT ArrivalDate, clos.LengthOfStay, randnum % sumweighting, sumweighting,
       ArrivalDate + clos.LengthOfStay as DepartureDate
FROM (select b.*, ABS(CAST(NEWID() AS binary(6))+0) as randnum
      from Bookings b
     ) b cross join
     (select SUM(LengthOfStayWeighting) as sumweighting from LengthOfStay) const left outer join
     CumeLengthOfStay clos
     on (b.randnum % const.sumweighting) between clos.cumeweighting - clos.LengthOfStayWeighting  and clos.cumeweighting - 1
ORDER BY ArrivalDate 
```

基本上，您将权重相加，生成一个小于最高权重的随机数（使用`%`运算符），然后在权重的累积总和中查找该值。

# ssrs-2008 - SSRS 报告 parameter.label 显示 parameter.value

> ID：14959849
> 
> 赞同：17
> 
> 时间：2013-02-19T14:26:49.503
> 
> 标签：ssrs-2008, axapta, dynamics-ax-2012

我有一个 SSRS 报告，在我的报告中我有一个具有 ID 和 NAME 字段的数据集，然后我创建了一个参数并将其值设置为数据集的 ID，并将标签设置为数据集的名称。当我预览报告并选择它时，我可以看到标签，但我也在报告上显示选定的参数，我正在使用表达式：

> =参数！P_TargetBrand.Label

但是当报告运行时，它显示的是参数 VALUE 而不是标签。

我的 SQL 版本是：

Microsoft SQL Server 2008 R2 (SP1) - 10.50.2550.0 (X64) 2012 年 6 月 11 日 16:41:53 版权所有 (c) Microsoft Corporation Standard Edition (64-bit) o​​n Windows NT 6.1 (Build 7601: Service Pack 1)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-02-19T15:02:53.513

参数为 Single Value 的情况：

```
=Parameters!<ParameterName>.Label 
```

当您的参数为多值时的情况：

```
=Parameters!<ParameterName>.Label(0) 
```

或者

```
=Join(Parameters!<MultivalueParameterName>.Label,", ") 
```

[有关其他信息，请尝试此处。](http://msdn.microsoft.com/en-us/library/dd255264%28v=sql.105%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-06T21:53:16.500

我遇到了这个问题，据我所知，这是一个不支持的~~错误~~功能。

在此页面上 - [http://technet.microsoft.com/en-us/library/gg731894.aspx](http://technet.microsoft.com/en-us/library/gg731894.aspx)

# 他们有两个与我们的问题相关的问题：

### “Label 引用未正确显示。Value 属性设置为 Parameters!MyParm.Value 参数。”

添加tl。信息：“参数必须使用 Visual Studio Tools for Microsoft Dynamics AX 报表模型中的数据集显式绑定到数据。”

和

### “该参数显式绑定到具有两列标签和值的数据集。该值正确显示。标签引用在除客户端之外的任何地方都正确显示。”

添加tl。信息：“报表查看器控件不支持指定报表参数标签的功能，仅支持值。”

* * *

在我的情况下，我们没有使用绑定数据集。只是我们自己的后端并将参数值添加到报告视图对象中。所以我们是SOL。我们必须得到一个标签/值对真的很糟糕。然后再次访问数据库以获取所选值的标签，因为我们无法直接访问标签。

我很想被证明是错误的。

# asp.net-mvc-3 - 下拉列表将空值发送到发布操作

> ID：14959852
> 
> 赞同：0
> 
> 时间：2013-02-19T14:26:52.187
> 
> 标签：asp.net-mvc-3

这是我的 Get actionresult ：

```
public ActionResult Add()
        {
            ViewData["categoryList"]= _categoryRepository.GetAllCategory().
            ToSelectList(c => c.Id, c => c.Name);

            return View("Add");
        } 
```

这是我呈现 categoryList 的剃须刀，我对此没有任何问题！

```
<div>
        @Html.LabelFor(b => b.Category)
        @Html.DropDownList("Category", ViewData["categoryList"] as IEnumerable<SelectListItem>)
        @Html.ValidationMessageFor(b => b.Category)
    </div> 
```

最后在提交页面后，类别选择通过空值发送来发布这个动作

```
 [HttpPost]
        public ActionResult Add(BlogPost blogPost)
        {
            if (ModelState.IsValid)
            {
                blogPost.PublishDate = DateTime.Now;

                _blogPostRepository.AddPost(blogPost);

                _blogPostRepository.Save();
                return RedirectToAction("Add");
            }
            return new HttpNotFoundResult("An Error Accoured while requesting your               order!");
        } 
```

谁能告诉我为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:30:00.747

控制器

```
public ActionResult Add()
{
    ViewBag.CategoryList = new SelectList(_categoryRepository.GetAllCategory(), "Id", "Name");

    // you dont need the specify View name 
    // like this: return View("Add")
    // you need to pass your model.
    return View(new BlogPost());
} 
```

看法

```
@Html.DropDownListFor(model => model.CategoryId, ViewBag.CategoryList as SelectList, "--- Select Category ---", new { @class = "some_class" }) 
```

控制器后操作

```
[HttpPost]
public ActionResult Add(BlogPost blogPost)
{
    if (ModelState.IsValid)
    {
        blogPost.PublishDate = DateTime.Now;

        _blogPostRepository.AddPost(blogPost);

        _blogPostRepository.Save();

        // if you want to return "Add" page you should
        // initialize your viewbag and create model instance again
        ViewBag.CategoryList = new SelectList(_categoryRepository.GetAllCategory(), "Id", "Name");
        return View(new BlogPost());
    }
    return new HttpNotFoundResult("An Error Accoured while requesting your               order!");
} 
```

# firefox - Firefox 扩展测试和开发 - 我很困惑

> ID：14959858
> 
> 赞同：2
> 
> 时间：2013-02-19T14:27:04.547
> 
> 标签：firefox, google-chrome-extension, firefox-addon, firefox-addon-sdk

当我为 Google Chrome 编写扩展程序时，我只创建“manifest.json”文件和 JS 文件，这是我的脚本。安装后，我可以更改代码中的任何内容，我只刷新浏览器并且更改了扩展版本。

1) 我可以在安装 Firefox 扩展后更改一些代码吗？还是我应该重新安装它？或者我是否需要重新加载它 - 如果可能的话怎么办？

2) 我应该手动创建 install.rdf、chrome.manifest、*.xul 文件等（whick 文件夹结构等）吗？还是有另一种最简单的方法来做到这一点？

3）我不明白，我应该通过“Add-on SDK”创建扩展还是用记事本手写？他们有什么区别？

4）我正在编写最简单的脚本，当我通过浏览器打开任何页面时会调用 alert('hello world') 。最好和最快的方法是什么？

多谢;

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-22T02:28:20.167

> 1) 我可以在安装 Firefox 扩展后更改一些代码吗？还是我应该重新安装它？或者我是否需要重新加载它 - 如果可能的话怎么办？

使用`<em:bootstrap>true</em:bootstrap>`和[引导函数可以进行实时更新](https://developer.mozilla.org/en-US/docs/Extensions/Bootstrapped_extensions)

> 2) 我应该手动创建 install.rdf、chrome.manifest、*.xul 文件等（whick 文件夹结构等）吗？还是有另一种最简单的方法来做到这一点？

两者都不; 修改[现有的](https://github.com/dgutov/bmreplace) [简单](https://github.com/cztchoice/vimkey) [扩展](https://github.com/benmmurphy/jsdeminifier_xpi)

> 3）我不明白，我应该通过“Add-on SDK”创建扩展还是用记事本手写？他们有什么区别？

附加 SDK 是一个[sdk](/questions/tagged/sdk "显示标记为“sdk”的问题")；手工是[xul](/questions/tagged/xul "显示标记为“xul”的问题")；取决于你

> 4）我正在编写最简单的脚本，当我通过浏览器打开任何页面时会调用 alert('hello world') 。最好和最快的方法是什么？

hello_world.xpi (chrome / content / hello.xul):

```
<?xml version="1.0"?>
<?xml-stylesheet href="chrome://global/skin" type="text/css"?>

<window xmlns:html="http://www.w3.org/1999/xhtml"
        xmlns="http://www.mozilla.org/keymaster/gatekeeper/there.is.only.xul">

  <caption label="Hello World"/>

</window> 
```

此外，[扩展开发工具](https://developer.mozilla.org/en-US/docs/Setting_up_extension_development_environment)应该会有所帮助。

**参考**

*   [探索 XUL 中的多线程编程](http://www.ibm.com/developerworks/web/library/x-multixul/)

# xsd - 如何从 XSD 定义中生成“HTML 选择”

> ID：14959862
> 
> 赞同：1
> 
> 时间：2013-02-19T14:27:15.323
> 
> 标签：xsd

我尝试从 XSD 生成 HTML 代码，并计划生成具有定义值的选择。我可以在 XSD 中使用限制，但我也需要选项的值。

```
<select name="Pizza" size="5">
      <option value="P101">Pizza Napoli</option>
      <option value="P102">Pizza Funghi</option>
</select> 
```

用选项和值定义 HTML 选择的正确 XSD 是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T22:33:13.977

一个标准`xs:restriction`将允许您标记这些值，但对于描述，我只需在架构之上使用自定义命名空间。这样的事情会做到这一点：

```
 <xs:element name="Pizza" xmlns:pizza="http://my.custom.namespace/pizza">
   <xs:simpleType>
     <xs:restriction base="xs:string">
       <xs:enumeration value="P101" pizza:description="Pizza Napoli"/>
       <xs:enumeration value="P102" pizza:description="Pizza Funghi"/>
     </xs:restriction>
   </xs:simpleType>
 </xs:element> 
```

XML 是可扩展的，因此 XML 模式也是如此。

这种方法的好处是您仍然可以轻松地根据模式验证数据（验证器将简单地忽略自定义命名空间），但是在转换为 HTML 时，您可以按照您想要的方式写出选项。

# matlab - Matlab - 矩阵数组

> ID：14959868
> 
> 赞同：3
> 
> 时间：2013-02-19T14:27:23.253
> 
> 标签：matlab

我有两个矩阵 A1 和 A2，例如 A1 = [1 0; 1 1]; A2 = [0 1; 1 1];

现在我不想将它们称为 A1 和 A2，因为我将拥有 An 矩阵。

所以我想要类似的东西

A(1) = [1 0; 1 1]; A(2) = [0 1; 1 1]; .. A(n) = [...];

但是 Matlab 不允许我这样做。

我知道可以使用 A(:,:,1) = [ ... ] 但这很丑陋，让我一直输入:,:, ...所以我想知道是否有不同的解决方案。

我尝试了 A.1，但结构字段名称需要是字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T14:31:36.443

使用元胞数组：

```
A = cell(N, 1);

A{1} = [ 1 0; 1 1 ];
A{2} = [ 0 1; 1 1 ]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-19T14:34:17.783

您可以使用结构数组。

```
A(1).mat = [1 0; 1 1];
A(2).mat = [0 0; 1 1];
...
A(n)... 
```

或单元阵列

```
A{1} = [1 0; 1 1];
A{2} = [0 1; 1 1];
...
A{n}... 
```

# db2 - 插入在 IBM DB2 上抛出 SQLCODE: -180, SQLSTATE: 22007

> ID：14959872
> 
> 赞同：3
> 
> 时间：2013-02-19T14:27:24.647
> 
> 标签：db2, talend

我正在使用数据集成工具 (Talend) 在 IBM Db2 上插入一些行，但以下命令会引发错误：

插入 "TOTCHQ" ("CODREM","NUMDOCC8","NOMPES","NUMBAN","CODAGEBN","QTDCHQDL","DATULTOA") 值 ('3080',99999999999,'FULANO DE TAL',100, '0000',2,'2012-11-28')

DB2 SQL 错误：SQLCODE：-180，SQLSTATE：22007，SQLERRMC：空 - 行：0

似乎日期列 (DATULTOA) 格式错误，但事实并非如此。

相同的命令，当在另一个工具（如 DbVisualizer）上甚至直接执行时，运行正常。

这是我的表元数据：

```
CODREM      VARCHAR(4)     
NUMDOCC8    DECIMAL(14, 0)
NOMPES      VARCHAR(50) 
NUMBAN      SMALLINT  
CODAGEBN    VARCHAR(6)
QTDCHQDL    SMALLINT    
DATULTOA    DATE 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T14:42:34.180

SQLCODE -180 的描述是“日期、时间或时间戳值无效”。

我计算了 7 个列名和 7 个数据值。所以，这不是错位问题。

日期“2012-11-28”采用 yyyy-mm-dd 格式。也许[talend](http://www.talendforge.org/bugs/view.php?id=2259)期待 yyyy-dd-mm 格式或其他日期格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-06T15:32:54.517

确保日期格式正确：

示例：yyyy-MM-dd

# javascript - 是否可以在电话间隙中设置特定的文件路径？

> ID：14959875
> 
> 赞同：0
> 
> 时间：2013-02-19T14:27:34.017
> 
> 标签：javascript, html, xcode, cordova

我目前正在研究 PhoneGap 在 iPhone 应用程序开发中可以/不能做什么。到目前为止，我已经设法使用 FileWriter 将文件写入 LocalFileSystem 并单击按钮将文件读回给用户。我被要求找到一种设置应用程序的方法，因此当应用程序写入文件时，该文件将保存到用户指定的文件夹/位置。我一直在寻找，但我找不到任何与此有关的信息。甚至有可能这样做吗？如果是这样，你能帮帮我吗？

（*我在这个应用程序的 Xcode 中使用 JavaScript、HTML 和 PhoneGap*）

这是我用来使用 LocalFileSystem 写入/读取文件的代码；

```
 var reader;
    var text;
    var myFileSystem;

    document.addEventListener("deviceready", onDeviceReady, false);

    function onDeviceReady() {
        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotFS, fail);
    }

    function myfile() {
        window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, gotmyFS, fail);
    }

    function gotFS(fileSystem) {
        fileSystem.root.getFile("readme.txt", {create: true, exclusive: false}, gotFileEntry, fail);
        myFileSystem = fileSystem;
        console.log(fileSystem.name);
    }

    function gotmyFS(fileSystem) {
        fileSystem.root.getFile("readme2.txt", {create: true, exclusive: false}, gotFileEntry, fail);
    }

    function gotFileEntry(fileEntry) {
        fileEntry.createWriter(gotFileWriter, fail);
        fileEntry.file(gotFile, fail);
    }

    function gotFileWriter(writer) {
        writer.write("some sample text");
    }

    function gotFile(file){
        readAsText(file);
    }

    function readDataUrl(file) {
        reader = new FileReader();
        reader.onloadend = function(evt) {
            console.log("Read as data URL");
            console.log(evt.target.result);
        };
        reader.readAsDataURL(file);
    }

    function readAsText(file) {
        reader = new FileReader();
        reader.onloadend = function(evt) {
            console.log("Read as text");
            console.log(evt.target.result);
            console.log(file);
            text = evt.target.result;
        };
        reader.readAsText(file);
    }

    function readmyfile() {
        var myPara = document.getElementById("mytext");
        myPara.innerText = text;
    }
    function fail(error) {
        console.log(error.code);
    } 
```

这一切都有效，但是我应该添加/删除一些东西以使其工作吗？

提前非常感谢xx

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:45:25.857

iOS 应用程序是沙盒的，您只能写入特定目录。更多细节[在这里](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/FileSystemProgrammingGUide/FileSystemOverview/FileSystemOverview.html)。

# xaml - GridView - 限制组项目

> ID：14959876
> 
> 赞同：0
> 
> 时间：2013-02-19T14:27:34.443
> 
> 标签：xaml, windows-8

我的数据是一组组的列表，每个组都有未定义数量的项目。对于 Hubpage，我想将每个组的项目限制为特定数量。我是否必须创建仅包含这十个项目的第二个集合，或者是否有 XAML 方法将组项目限制在前 n 个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:58:57.203

如果您从[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604.aspx)（或其他 Collection 类型）绑定到 IEnumerable，请使用 Take 扩展方法返回 Top N。在示例模板中，您将执行类似...

```
protected override void LoadState(Object navigationParameter, Dictionary<String, Object> pageState)
{
    // TODO: Create an appropriate data model for your problem domain to replace the sample data
    var sampleDataGroups = SampleDataSource.GetGroups((String)navigationParameter);
    this.DefaultViewModel["Groups"] = sampleDataGroups.Take(5);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T20:59:37.933

这两种方法都是可能的，但有一些注意事项。如果您想使用标准 XAML 控件，则必须有效地创建一个包含尽可能多的项目的新集合。`Take(N)`例如将创建具有 N 个元素的新集合。您还可以创建自己的自定义控件来限制可见元素的数量。我一般新的收藏方式是最常见的一种。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-24T09:29:19.747

您可以在网格的“分组”事件中执行以下操作：

```
 if(xamDataGridHotworkS_Flow.FieldLayouts[0].SortedFields.Count > 1)
    {
         xamDataGridHotworkS_Flow.FieldLayouts[0].SortedFields.RemoveAt(1);
    } 
```

如果网格上有分组，则删除用户提供的下一个分组。

# c# - 为什么我在解决方案中的任何地方都看不到类型不匹配错误？

> ID：14959898
> 
> 赞同：6
> 
> 时间：2013-02-19T14:28:41.353
> 
> 标签：c#, .net, asp.net-mvc-4

我在我的编辑器模板中收到以下错误`ApplicantAddressMode`：

> 错误 CS0019：运算符“！=”不能应用于“Comair.RI.ViewModels.ApplicantAddressType”和“Comair.RI.Models.ApplicantTypesOfAddress”类型的操作数”}

该类型`Comair.RI.ViewModels.ApplicantAddressType`无处可寻。仅针对所有文件的全局解决方案搜索`ApplicantAddressType`不返回任何结果。我将枚举的名称`Comair.RI.Models`从`ApplicantAddressType`to`ApplicantTypesOfAddress`更改为试图避免无意匹配，并清除了 32 位和 64 位 ASP Internet 临时文件，但编辑器模板的这一行仍然存在错误：

```
@using Comair.RI.Models
@model Comair.RI.ViewModels.ApplicantAddressModel
@Html.ValidationSummary(true)
<fieldset>
    <legend>@Model.AddressTypeDescription</legend>
    <ul class="form-column">
        @if (Model.AddressType != ApplicantTypesOfAddress.Residential)
        { 
```

`Model.AddressType`声明为：

```
[ScaffoldColumn(false)]
public ApplicantTypesOfAddress AddressType { get; set; } 
```

我不知所措，即将开始四处投掷燃烧的尖旗，例如`IsResidentialStreetNumber`和`IsPostalSuburb`。我不认为救护车会在那之后很长时间到达并带我去和平。

枚举声明是这样的：

```
namespace Comair.RI.Models
{
    public enum ApplicantTypesOfAddress
    {
        Residential,
        Postal
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-24T08:21:38.717

怀疑丢失的 tpe 在项目中未包含的文件中声明。当您告诉 VS 在编译时构建视图时，通常只在渲染它们之前执行，而不是在构建应用程序程序集时，它会构建所有视图，并使用它们引用的任何文件，无论它们是否包含在项目中.

[Jim Lamb](http://blogs.msdn.com/b/jimlamb/)有一篇关于如何执行此操作的好帖子，名为[Turn on Compile-time View Checking for ASP.NET MVC Projects in TFS Build 2010](http://blogs.msdn.com/b/jimlamb/archive/2010/04/20/turn-on-compile-time-view-checking-for-asp-net-mvc-projects-in-tfs-build-2010.aspx)

不过，我不知道*TFS Build*部分。我不使用它，在我的情况下，只需将以下元素添加到我的`.csproj`文件中就可以了。注意，如果`MvcBuildViews`元素已经存在，它的文本值必须为*真。*

```
<PropertyGroup>
    <MvcBuildViews>true</MvcBuildViews>
</PropertyGroup> 
```

买者自负。

# java - Logback 打印空白行代替过滤后的输出

> ID：14959899
> 
> 赞同：4
> 
> 时间：2013-02-19T14:28:41.737
> 
> 标签：java, logback

我在带有 Marker TurboFilter 的项目中使用 Logback 来过滤掉用给定标记标记的信息。

我目前规定我不希望输出 VERBOSE_INFO 和 STD_INFO 日志。

我遇到的问题是 Logback 似乎仍在打印空白行来代替过滤掉的信息。

```
<configuration>
<appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
        <pattern>
            %d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n
        </pattern>
    </encoder>
</appender>
<!-- %-4relative [%thread] %-5level %logger{35} - %msg%n -->
<appender name="FILE" class="ch.qos.logback.core.FileAppender">
    <file>ms-log.log</file>
    <append>false</append>
    <encoder>
      <pattern>%d %5p %c{1}:%L - %m%n</pattern>
    </encoder>
</appender>

<turboFilter class="ch.qos.logback.classic.turbo.MarkerFilter">
    <Marker>VERBOSE_INFO</Marker>
    <OnMatch>ALLOW</OnMatch>
</turboFilter>

<turboFilter class="ch.qos.logback.classic.turbo.MarkerFilter">
    <Marker>STD_INFO</Marker>
    <OnMatch>DENY</OnMatch>
</turboFilter>

<root level="INFO">
    <appender-ref ref="STDOUT" />
    <appender-ref ref="FILE" />
</root> 
```

示例输出：

```
2013-02-19 11:35:59,757 INFO u.c.d.m.i.m.LanguageParser:88 - Initialising...

2013-02-19 11:35:59,777 INFO u.c.d.m.i.m.LanguageParser:88 - Initialisation Complete.

2013-02-19 11:35:59,788 INFO u.c.d.m.i.m.LanguageParser:88 - Restoring Saved State...

2013-02-19 11:35:59,798 INFO u.c.d.m.i.m.LanguageParser:88 - Saved State Successfully Restored. 
```

非常感谢您可以给予 x 的任何帮助。

# .net - 权重和百分比

> ID：14959902
> 
> 赞同：-1
> 
> 时间：2013-02-19T14:28:46.120
> 
> 标签：.net, math, numbers, puzzle, equation

我需要能够按百分比编辑整数类型的权重值。

例如：我得到以下权重：

```
变量权重
× 100
是 50
z 50

所以 z 是 25%，y 是 25%，x 是 50%

```

现在，如果我希望能够编辑现有权重或按百分比输入添加新权重，我如何确保权重仍然是整数类型并且不需要任何舍入。

例如，如果我想添加一个占总重量 25% 的新重量，我该如何计算？请注意，我可以更改其他权重（增量/减量）以实现此目的。

但是这里需要发生的必要条件是权重将保持整数，并且新/编辑权重的百分比将按照要求。

如果我不必确保权重是整数，那么这很容易，我可以使用以下等式：

NewWeight = (Sum*RequestedPerecentage)/(1-RequestedPerecentage)

但事实并非如此……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T16:18:27.030

假设您想在列表中添加 w% 的权重。在您的第一个示例中，w = 25。

首先，找到当前权重的总和。

```
x 100
y 50
z 50
----
Total 200 
```

将每个当前权重乘以 (100-w)。

```
x 7500
y 3750
z 3750 
```

将 w 乘以您之前找到的总数，然后将其添加到列表中。

```
x 7500
y 3750
z 3750
w 5000 
```

您可以通过将每个数字除以所有权重的[GCD来将数字减少到最小形式。](http://en.wikipedia.org/wiki/Greatest_common_divisor)

```
x 6
y 3
z 3
w 4 
```

使用此方法时请注意溢出错误。最好使用某种 bignum 数据类型。

# java - Eclipse 匿名内部类型模板

> ID：14959903
> 
> 赞同：4
> 
> 时间：2013-02-19T14:28:46.910
> 
> 标签：java, eclipse, eclipse-templates

当我使用 Eclipse 的快速完成功能输入内部类型时，它使用一些模板来生成它。

我得到的在左侧看到，我想要的在图片右侧显示。![问题描述图片](../Images/7243f34f5ae29e46530a6f10df2d30da.png)

我想要的是删除空行和自动生成的方法存根，我该如何管理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:31:55.600

*   **删除 TODO：** *Window* → *Preferences* → *Java* → *Code Style* → *Code Templates*。

    （`// ${todo} Auto-generated method stub`从*代码*树中的*方法主体*中删除）。

**   **删除空行：** *Window* → *Preferences* → *Java* → *Formatter* → *Edit* → *Blank Lines* → *Before First Declaration = 0*。* 

 *您会在那里看到许多选项，您可以根据需要进行设置。*

# erlang - 在erlang中测试之前知道类型

> ID：14959905
> 
> 赞同：0
> 
> 时间：2013-02-19T14:28:54.950
> 
> 标签：erlang

我有这个代码：

```
 io:format("id retour: ~w\n",[Idretour]), 
```

我想知道**Idretour的类型**

因为我想添加这个测试：`if Idretour =:= 40 ->`

可能这条线可以帮助我们了解**Idretour的类型**

```
io:format("id retour: ~w\n",[Idretour]), 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:31:04.017

`if Idretour =:= 40`无论是什么类型的，您都可以进行测试`Idretour`。

我认为您正在寻找的是：

```
case Idretour of
    Int when is_integer(Idretour) -> do_domething_with_int;
    _ -> not_an_int
end 
```

# android - 我们可以将音频文件直接发送到电话运营商的上行链路吗？

> ID：14959908
> 
> 赞同：0
> 
> 时间：2013-02-19T14:29:04.770
> 
> 标签：android, audio, call, voice, carrier

我是 android 开发的初学者，感觉 google 文档无法帮助我。因此，如果有人知道是否可以在通话之间将音频文件直接发送到上行链路？还分享它是如何可能的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T14:40:39.720

没有允许您在调用中访问、读取或写入音频流的 Android API。如果任何制造商提供这些 API，我不知道它们。

这样做的原因是，至少对于 AOSP Android 来说，设备的调用部分是在硬件层面处理的，Android 本身没有太多的控制权。

也无法通过 NDK。实现这一目标的唯一方法是直接从源代码修改和构建 Android。

# html - xml 中的 html 标记子集

> ID：14959909
> 
> 赞同：0
> 
> 时间：2013-02-19T14:29:10.807
> 
> 标签：html, xml, tags, xsd

我是 xml 和 html 的新手，我有一个问题:)

在以下 xml 中：

```
<element name="itemDescription"> 
    <any minOccurs="0"/>            
</element> 
```

“itemDescription”标签如何能够支持仅使用 ul、li、b、i 和 span 标签的 HTML 子集？目前它被定义为接受任何 XML。

我在这方面搜索了很多 - 但我无法提出解决方案。只有我可能可以使用 complexTypes。

有人能帮我吗？:)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T16:47:56.857

如果您想允许一组特定的 XHTML 元素作为 itemDescription 的子元素，您需要做的是通过定义适当的复杂类型来指定它们是哪些子元素。（如果您的模式是 XSD，那么您还需要更正现有元素声明中的语法错误。）从您提到的特定 XHTML 元素中，我猜您还希望允许 idemDescription 包含字符数据。

完成这项工作的 itemDescription 声明如下所示：

```
<xsd:element name="itemDescription">
  <xsd:complexType mixed="true">
    <xsd:choice minOccurs="0" maxOccurs="unbounded">
      <xsd:element ref="xhtml:ul"/>
      <xsd:element ref="xhtml:b"/>
      <xsd:element ref="xhtml:i"/>
    </xsd:choice>
  </xsd:complexType>
</xsd:element> 
```

由于您需要引用 XHTML 名称空间中的特定项，因此您也需要导入它。最简单的方法是使用如下所示的导入：

```
<xsd:import namespace="http://www.w3.org/1999/xhtml"/> 
```

但是在某些时候，您需要将 XSD 验证器指向 XHTML 的模式文档；有些人更喜欢在 import 语句上而不是在调用时这样做，所以他们在 import 语句上指定了 schemaLocation 属性：

```
<xsd:import namespace="http://www.w3.org/1999/xhtml"  
            schemaLocation="..."/> 
```

这里的“...”需要被一个指向你想要使用的 XHTML 模式的指针替换。（建议使用本地副本，因为[W3C 使得从他们的站点检索模式文档的速度非常慢，](http://www.w3.org/Help/Webmaster.html#slowdtd)以此来阻止过多的 DTD 和模式流量。）

既然您说您是 XML 新手，那么拥有一个包含所有内容的完整模式文档可能会有所帮助。同样，如果您想在实践中使用它，请记住用 URI 替换 schemaLocation 值。

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
  elementFormDefault="qualified"> 

  <xsd:import namespace="http://www.w3.org/1999/xhtml"  
              schemaLocation="..."/>

  <xsd:element name="itemDescription">
    <xsd:complexType mixed="true">
      <xsd:choice minOccurs="0" maxOccurs="unbounded">
        <xsd:element ref="xhtml:ul"/>
        <xsd:element ref="xhtml:b"/>
        <xsd:element ref="xhtml:i"/>
      </xsd:choice>
    </xsd:complexType>
  </xsd:element>

</xsd:schema> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T15:00:51.907

请记住，除了类似的语法之外，HTML 与 XML 几乎没有关系。

您可以查看[XHTML 的模式](http://www.w3.org/TR/xhtml1-schema/)并复制出您需要的部分，但自己实现它们可能会更容易。

无论如何，恕我直言，尝试在 XML 应用程序中重新实现 (X)HTML 并不是一个好主意。这可能会更容易

*   实现类似于 HTML 的内容，并让读取 XML 的应用程序将其转换为 HTML
*   将您的 HTML 存储为 (CDATA) 字符串
*   不要使用 HTML，而是使用[轻量级标记语言](http://en.wikipedia.org/wiki/Lightweight_markup_language)

# php - 在 Chrome 中页面加载后会话终止

> ID：14959910
> 
> 赞同：0
> 
> 时间：2013-02-19T14:29:16.607
> 
> 标签：php

任何人都有任何建议或遇到过这个问题——因为迁移到 SSL chrome 只是讨厌会话。我尝试了一个非常简单的设置会话，并在设置测试之前对其进行了回显 - 所以在第二次页面加载会话显示之后。但是除了 Chrome 之外，每个浏览器都可以使用。

我试过把它扔进去，但还是不行：

```
ini_set('session.use_trans_sid', false);
ini_set('session.use_cookies', true);
ini_set('session.use_only_cookies', true);
$https = false;
if(isset($_SERVER['HTTPS']) and $_SERVER['HTTPS'] != 'off') 
{
  $https = true;
}
$dirname = rtrim(dirname($_SERVER['PHP_SELF']), '/').'/';
session_name('token');
session_name('money_republic_token');
session_set_cookie_params(0, $dirname, $_SERVER['HTTP_HOST'], $https, true);
session_start(); 
```

我完全没有想法了——为什么 chrome 会以不同的方式处理会话，即使 IE 也可以！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T15:43:28.020

如果您的站点位于本地主机上，那么您可能遇到了这个错误：

[localhost 域的 chrome.cookies 失败](http://code.google.com/p/chromium/issues/detail?id=56211)：

# spring - 如何将请求参数传递给'default-target-url'

> ID：14959913
> 
> 赞同：3
> 
> 时间：2013-02-19T14:29:24.543
> 
> 标签：spring, spring-security

我在 login.jsp 页面的隐藏字段中设置了“cat=1”，并希望它可以在 default-target-url 上使用。spring-security.xml 中的条目是，

```
<form-login login-page="/login.html" default-target-url="/index.html"
            authentication-failure-url="/loginfailed.html" /> 
```

在控制器中，

```
@RequestMapping(value="/index", method = RequestMethod.GET)
    public String index(HttpServletRequest request) {
        String cat = request.getParameter("cat");
        if (cat != null && cat.equalsIgnoreCase("1")) {
            return "add";
        }  
        return "redirect:/index.jsp";
    } 
```

但无法获取请求参数值（cat 为空），所以我认为这是因为“default-target-url”重定向了请求（并且不转发它？）。是这样吗？

如果是，那么有什么方法可以将参数传递给'default-target-url'？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T17:05:41.727

I have changed implementation approach a bit. Details give below,

**spring-security.xml**

```
<form-login login-page="/login.html" authentication-success-handler-ref="feedSuccessHandler"
            authentication-failure-url="/loginfailed.html" />
        <logout logout-success-url="/loggedout.html"/>

<beans:bean id="feedSuccessHandler"
     class="main.java.com.sp.utilities.FeedSuccessHandler">
    </beans:bean> 
```

**FeedSuccessHandler.java**

```
public class FeedSuccessHandler implements AuthenticationSuccessHandler {

    public void onAuthenticationSuccess(HttpServletRequest request,
            HttpServletResponse response, Authentication authentication)
            throws IOException, ServletException {

        String cat = request.getParameter("cat");
        if (cat != null && cat.equalsIgnoreCase("1")) {
            response.sendRedirect(request.getContextPath()+"/add.html");
        }else{
            SavedRequest savedRequest = new HttpSessionRequestCache().getRequest(request, response);
            if(savedRequest != null) {
                response.sendRedirect(savedRequest.getRedirectUrl());
            }else{
                response.sendRedirect(request.getContextPath()+"/");
            }
        }
    }
} 
```

Application is working as desired also in future if I want to customize redirection based on roles, I can use same class.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T15:02:49.453

它确实通过默认*重定向*，但是您可以使用几个配置选项来更改此行为。它们都定义在 `AbstractAuthenticationTargetUrlRequestHandler`which 是两个现有身份验证成功处理程序实现的父类上（默认情况下`SavedRequestAwareAuthenticationSuccessHandler`由命名空间配置使用）。

1.  设置它的`targetUrlParameter`属性，以便它检查 HTTP 请求是否具有具有该名称的参数。如果是这样，它将重定向到该请求参数中给出的 URL。

2.  或者设置自定义`redirectStrategy`。默认实现调用`response.sendRedirect()`，但您可以在自定义实现中随意更改它。

但是您会遇到一些困难，因为这些配置点都不是通过命名空间配置公开的，因此您需要更深入地了解并手动编写 bean 定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T15:00:25.993

重定向由 的`redirectStrategy`属性中定义的重定向策略控制`SimpleUrlAuthenticationSuccessHandler`。

默认值`redirectStrategy`是 的一个实例`DefaultRedirectStrategy`。

你需要做的是实现你自己的 `redirectStrategy`（implements `RedirectStrategy`）。然后配置它：

```
...
<bean id="usernamePasswordAuthenticationFilter">
    ...
    <property name="authenticationSuccessHandler">
        <bean
           class="org.springframework.security.web.authentication.SavedRequestAwareAuthenticationSuccessHandler">
            <property name="redirectStrategy">
               <bean class="yourRedirectStrategy"/>
            <property>
         </bean>
    </property>
</bean> 
```

# java - 在哪里可以找到 JUnit 4.8 到 4.8.2 的原始发行说明？

> ID：14959917
> 
> 赞同：0
> 
> 时间：2013-02-19T14:29:34.277
> 
> 标签：java, junit, documentation

我有一些使用不同版本的 JUnit 4.8 的不同环境。我想看看发行说明，看看这些版本有什么不同。但是它们在[最初发布](http://kentbeck.github.com/junit/doc/ReleaseNotes4.8.2.html)的地方不再可用。有人给我另一个链接，或者有人可以发布它们的副本吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:35:29.567

您可以在此处找到发行说明：[https ://github.com/junit-team/junit/tree/master/doc](https://github.com/junit-team/junit/tree/master/doc)

# jasper-reports - 从 Java 代码发送参数以报告

> ID：14959919
> 
> 赞同：0
> 
> 时间：2013-02-19T14:29:43.570
> 
> 标签：jasper-reports

我需要将时间戳值作为参数从 java 发送到*JR*报告。我尝试了以下代码，但我得到一个**空白报告**。

我的 JRXML 文件：`

` 该报告使用正常的日期参数工作正常，但无法使用时间戳值显示。

我的 Java 代码：`

我尝试了各种时间戳值 Ex: (new java.sql.Timestamp(2013-02-27) 但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:34:14.413

采用：

`new SimpleDateFormat("yyyy-MM-dd").parse("2012-01-01");`

简单地说：

`new Date(2012-01-01);`

肯定会给出错误的日期，可能是 EPOCH 的开始日期。

确保在解析月份日期时`MM`不是。`mm`请参阅[SimpleDateFormat javadoc](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

**编辑**

看图片。您的默认值将生成的日期是 1970 年左右。因此，您的**`Between`**Condition 将获得 1970 到**Today**之间的所有值。

![在此处输入图像描述](../Images/5c9aa20846a1288b66bb3f86089d1067.png)

**编辑：2**

在*我看来*，您在表的数据源中设置了错误的参数。

而不是设置 From_Date & To_Date from`Fields`将它们设置为主报告本身的参数。

参考图片。

![在此处输入图像描述](../Images/70e801f1ad26aae4c75655947be8efb0.png)

# blogger - Blogger 模板标记参考

> ID：14959922
> 
> 赞同：3
> 
> 时间：2013-02-19T14:29:55.370
> 
> 标签：blogger

我正在尝试查找 Blogger 模板标签引用的完整列表，例如“post”、“blog”和“top”属性。Blogger 上有许多功能，但没有很好地记录。我发现了这个：[http](http://blogger2ools.mystady.com/) ://blogger2ools.mystady.com/ ，非常大但未完成，并且已更新。

是否有类似的文档用于开发模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-16T16:51:25.310

试试这个链接[GeekThis.com](http://geekthis.net/blog/132/blogger-theme-data-tags-for-widgets)。在那里你可以找到很多 Blogger 标签列表。

[您还可以通过下载 xml 模板DeveloperTheme-v0.0.1.zip](http://www.geekthis.net/uploads/projects/DeveloperTheme-v0.0.1.zip)的链接来测试标签行为。

注意：在您尝试 GeekThis.com 提供的此模板之前，请备份您的当前页面！或者，您可以创建另一个带有一些虚拟帖子的博客。

看待。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-05T06:59:53.983

我正在/正在寻找相同的列表。到目前为止，我发现的唯一*“好”*的东西是标准的谷歌信息，它似乎很薄，但这里是[Goolge 的列表](https://support.google.com/blogger/answer/47270?hl=en)（日期 15\. Feb 2013）

有关如何开发等的更多信息，这里似乎没有什么信息是[*“高级部分”*](https://support.google.com/blogger/topic/1711140?hl=en&ref_topic=1697868)的链接，但它只有一些提示和指针。网络上的教程似乎没有提供更多信息。

我希望这有帮助。如果您发现其他或更好的东西，请分享。

# dynamics-crm-4 - 在 CRM Dynamics 4.0 中创建任何电子邮件活动时，无法按工作流更新联系人记录

> ID：14959924
> 
> 赞同：1
> 
> 时间：2013-02-19T14:29:58.877
> 
> 标签：dynamics-crm-4

我正在尝试取消订阅电子邮件以获取联系记录，我已经完成了[http://community.dynamics.com/product/crm/crmtechnical/b/crminogic/archive/2009/07/31下方网址中的建议/crm-quick-campaign-unsubscribe-option.aspx](http://community.dynamics.com/product/crm/crmtechnical/b/crminogic/archive/2009/07/31/crm-quick-campaign-unsubscribe-option.aspx)。一切对我来说都很好。

我现在想更新联系人实体上的一些属性，例如“Lead Opt In”，在退订时允许“电子邮件”、“批量电子邮件”、“电话”、“邮件”在 CRM 中收到电子邮件。请看下面

![在此处输入图像描述](../Images/413049f62ba7db787bf6b1235251eeac.png)

如我所见，电子邮件活动已在 CRM 中创建，因此我正在触发下面的工作流程，检查主题是否包含“未订阅：”

![在此处输入图像描述](../Images/b8639b8e9349ba4e9a3cfab72b7ea194.png)

然后，这必须更新我在工作流中提供的联系人记录以取消订阅联系人，但这会失败，说**“找不到此工作流作业所需的记录”**

![在此处输入图像描述](../Images/f70426ef426af472178ad2a17f107cbc.png)

请尝试帮助我解决这些问题。我已经尝试了很长时间，但没有运气。

任何这样做的方式，它的替代方式也将不胜感激。

# jquery - 使用 Jquery 捕获 Gridview SelectedIndexChanged

> ID：14959928
> 
> 赞同：0
> 
> 时间：2013-02-19T14:30:21.717
> 
> 标签：jquery, asp.net, .net, master-pages

我有***母版页 ---> 内容页 ---> 用户控件 ---> Gridview***

如何`SelectedIndexChanged`使用 Jquery 捕获 Gridview 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:13:36.677

没有客户端事件`OnSelectedIndexChanged`。但是，您可以在服务器端事件处理程序中注册一个脚本：

```
protected void gridView1_SelectedIndexChanged(object sender, EventArgs e)
{
    ScriptManager.RegisterStartupScript(this, this.GetType(), "selectedIndexChanged", "javascriptFunctionCallHere();", true)
} 
```

# mysql - 将 Solr 结果与 MySQL 数据相结合的最有效方法

> ID：14959931
> 
> 赞同：3
> 
> 时间：2013-02-19T14:30:28.750
> 
> 标签：mysql, solr

在我们的新网站（一个购物网站）上，我们将使用 Solr 作为我们网站的搜索引擎。在 Solr 索引中，我们保留了产品 ID 列表和每个产品的关键字列表。搜索查询是针对关键字进行的。

Solr 返回产品 ID 的列表。然后将这些 id 插入到 MySQL 查询中以从数据库中选择所有产品数据。MySQL 还处理结果的排序。例如，MySQL 查询可能如下所示：

```
SELECT * FROM product WHERE id IN (1,4,42,32,46,...,39482) ORDER BY price ASC 
```

我们在网站上有大约 100,000 种产品。当有几千个结果时，这种方法工作得很好，但当有 - 例如 - 50,000 个结果时，它会变得很慢。

我的假设是瓶颈是“WHERE IN”子句。一个长期的解决方案是将所有产品数据移至 Solr，以便它可以处理对结果进行排序并将细化过滤器应用于搜索（例如，也许用户只想查看某个价格范围内的产品）。但是，我们对 Solr 缺乏经验，需要短期修复才能实施。

一种选择是在短期内放弃 Solr 并将关键字存储在 MySQL 的表中，并使用 FULL-TEXT 搜索对此进行搜索。

我错过了任何其他选择吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T15:21:05.820

您的主要问题是 Solr 将返回按匹配关键字数量排序的结果，但您希望结果按价格排序。正如您正确提到的，将所有数据移至 Solr 是最佳选择 - 您会非常高兴 Solr 满足您的搜索、排序、分面和分页需求。

然而，就短期而言，将`price`字段添加到 Solr 将是非常值得的。当您收到类似的搜索查询时，`tooth paste`您可以发出 Solr 查询，例如

```
q=keywords:(tooth AND paste)&rows=10&fl=id&sort=price%20asc 
```

仅获取前 10 个结果，然后通过指定`start`参数进行分页，例如：

```
q=keywords:(tooth AND paste)&rows=10&start=10&fl=id&sort=price%20asc 
```

# c - Windows 上下文菜单 %1 使用错误的变音符号扩展文件名

> ID：14959937
> 
> 赞同：0
> 
> 时间：2013-02-19T14:30:40.683
> 
> 标签：c, windows, windows-applications

我制作了一个这样的 Windows 上下文菜单项：
key: HKEY_CLASSES_ROOT*\shell\Test\command
command: "c:\Test.exe" "%1"

发送“C:\Users\John\Desktop\Testă.pdf”时，%1 未按预期扩展我收到以下字符串：“C:\Users\John\Desktop\Testa.pdf”“ă”正在替换为“a”，我不想要那个。这是一个编码问题吗？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T08:41:33.630

谢谢各位，我发现问题了。我的程序使用的是“int main(int argc, char** argv)”，即使在使用 Windows 函数 MultiByteToWideChar() 之后，结果仍然相同。修改为“int wmain (int argc, PWSTR* argv)”后，终于得到了我想要的结果。

似乎 Windows 仅将 unicode 字节发送到“wmain”。

# sql-server - Azure 表存储镜像

> ID：14959941
> 
> 赞同：0
> 
> 时间：2013-02-19T14:30:54.410
> 
> 标签：sql-server, azure, azure-storage, azure-blob-storage, azure-table-storage

我提出了一个具有以下内容的 Azure 环境：

*   用于核心关系数据的 VM SQL Server
*   大容量数据的表存储

我想将 SQL Server 数据库镜像到另一台服务器，以便

1.  报告可以在此服务器上运行，以最大限度地减少主数据库上的数据负载，并且
2.  如果主服务器出现故障，它可以用作故障转移服务器。

为了实现这两个目标，我还需要镜像 Azure 表存储。我似乎找不到任何关于此的信息。这甚至可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:52:53.103

很少有需要镜像表存储的情况。无论如何，Windows Azure 都会这样做，如果使用异地冗余选项，则会在多个位置保留 4 个数据副本。3 个跨不同故障和升级域存储在当前数据中心，另外一个副本存储在不同的数据中心。

因此，Azure 存储“原样”可以处理数据中心的完全故障。如果您想反映自己，这意味着您正在计划同时在两个数据中心发生中断的可能性。这仅在极少数情况下是必需的。

镜像（或复制）不是备份。因此，除了复制数据之外，您可能还想备份它，这是一个不同的问题。如果您错误地删除或更新某些内容，复制将无济于事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-22T11:00:02.880

如果在设置存储帐户时选择 RA-GRS 冗余选项，则 Azure 存储服务将在辅助数据中心异步复制存储数据（表、blob）。所有 azure 数据中心都有一个预定义的辅助数据中心，请在此处查看配对 dc 的完整列表：[https ://docs.microsoft.com/en-us/azure/best-practices-availability-paired-regions](https://docs.microsoft.com/en-us/azure/best-practices-availability-paired-regions)

在回退方面要知道的关键是，如果您选择 RA-GRS，您将可以访问辅助数据中心存储帐户，但它将是只读的。所以你将无法写入它。这就是为什么 RA-GRS 存储帐户的读取可用性为 99.99% 而写入可用性为 99.9%。在托管主存储帐户的 dc 上的存储服务关闭的后备方案中，SDK 将透明地重试对辅助帐户的读取，但如果您希望能够继续写入，那么您需要为此提供自定义解决方案，因为像提到的辅助帐户是只读的。

我相信 azure 确实会在整个 dc 出现故障时回退到次要读取和写入等。我从来没有遇到过这种情况，所以我不太确定这方面的细节。

而且，如果您出于延迟目的等原因想要跨 2 个以上的区域进行复制，那么您也需要您的解决方案，这可能只是将写入加载到队列和将实体复制到多个区域的工作角色。

# c# - 将日志文件读入 DataGridView

> ID：14959942
> 
> 赞同：0
> 
> 时间：2013-02-19T14:30:55.613
> 
> 标签：c#, string, datagridview, log-files

我有一个要在 DataGridView 中显示的日志文件。

文件中的示例数据行是：-

```
<![LOG[Creating mandatory request for advert 0002124C, program Shutdown Desktops Overnight, package 0000073C]LOG]!><time="05:00:00.192+000" date="02-11-2013" component="execmgr" context="" type="1" thread="3712" file="execreqmgr.cpp:2858"> 
```

我想提取上面示例的各个方面，日志描述、时间和日期、组件、上下文、类型和线程......并将它们作为列添加到 DataGridView 的数据源中。

解决提取这些数据的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:54:42.283

我会建议 DJ Kraze 的方法：创建一个自定义列表并将其绑定到您的 DataGridView。只需使用自定义代码来解析该行。如果必须，您也可以使用 DataTable，但是 List 方法通常更简洁。

类似的东西（我没有检查确切的语法或方法调用，因此仅用作示例，例如，您将需要一个文本阅读器）：

```
public class LogEntry {
   public string Description { get; set; }
   public DateTime LogDate { get; set; }
   // other properties you want to extract
}

public class LogReader {
   public List<LogEntry> ReadLog(string fileName){
       var parsedLog = new List<LogEntry>();
       using(var file = File.Open(filename, ....)){
           while(var line = file.ReadLine()){
               var logEntry = ParseLine(line);
               parsedLog.Add(logEntry);
           }
       }
       return parsedLog;
   }

   private LogEntry ParseLine(string line){
       var logEntry = new LogEntry();
       // go through the line and parse it with string functions and populate values.
       // I use a helper class, a shortened version is below - note, you might need to
      //adjust to compile
       var parser = new StringParser(line);
       //now just use GetBetween to find the values you need. just pick your delimiters
       // carefully as the parser will move beyond the end string.  But it will go
       // sequentially so just experiment
      logEntry.Description = parser.GetBetween("LOG[", "]LOG");
      // go through in order
   } 
}

public class StringParser {
    private string text;
    private int position;

    public StringParser(string text)
    {
        this.Text = text;
    }  

    public string Text
    {
        get { return this.text; }
        private set
        {
            this.text = value;
            Position = 0;
        }
    }

    public int Position
    {
        get { return this.position; }
        private set
        {
            if (value < 0)
            {
                this.position = 0;
            }
            else
            {
                this.position = value > this.Text.Length ? this.Text.Length : value;
            }
        }
    }

    public bool AtEnd
    {
        get { return this.Position >= this.Text.Length; }
    }

    public string GetBetween(string beforeText, string afterText)
    {
        var startPos = MoveAfter(beforeText);
        if (startPos == -1)
        {
            return "";
        }

        var endPos = FindNext(afterText);
        return GetBetween(startPos, endPos);
    }

     public string PeekBetween(int startPos, int endPos)
    {
        if (startPos < 0 || startPos >= this.text.Length)
        {
            return "";
        } 
        if (endPos < 0 || endPos > this.text.Length)
        {
            endPos = this.text.Length;
        } 
        if (startPos >= endPos)
        {
            return "";
        }

        var result = this.text.Substring(startPos, endPos - startPos);
        return result;
    }

    public string GetBetween(int startPos, int endPos)
    {
        if (endPos < 0 || endPos > this.text.Length)
        {
            endPos = this.text.Length;
        } 
        var result = PeekBetween(startPos, endPos);
        if (!string.IsNullOrEmpty(result))
        {
            this.Position = endPos;
        }
        return result;
    }

    public int FindNext(string searchText)
    {
        if (string.IsNullOrEmpty(searchText) || this.AtEnd)
        {
            return -1;
        } 
        return this.text.IndexOf(searchText, this.Position, StringComparison.Ordinal);
    }   

    public int MoveAfter(string searchText)
    {
        var found = FindNext(searchText);
        if (found > -1)
        {
            found += searchText.Length;
            this.Position = found;
        }
        return found;
    } 
} 
```

# joomla - 如何构建 Joomla 扩展？

> ID：14959947
> 
> 赞同：0
> 
> 时间：2013-02-19T14:31:11.157
> 
> 标签：joomla, module

首先我想知道**扩展**和**插件**和**模块之间有什么区别**

然后我想知道如何开始？我必须拥有哪些工具和知识

什么是最好的武术？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T18:05:21.047

组件、模块和插件都是扩展类型，就像奥迪、宝马和福特都是汽车类型一样。

**组件**是您的主要应用程序，例如论坛、商店系统等。这些通常显示在您网站的中心（显示您的文章的位置）。

**模块**就像您通常会在网站侧面看到的小部件，例如喊话框、Twitter 提要等。

**插件**基本上通过触发事件来操纵站点行为，例如它可以用于加载库或在 2 个组件之间集成用户配置文件。

要开始学习，您首先应该了解 Joomla 的工作原理，特别注意它基于 MVC 的事实。查看[Joomla Docs](http://docs.joomla.org)。

一旦你开始有信心，尝试制作一个 Hello World 模块，安装它并搞砸。要开始使用，请阅读[文档](http://docs.joomla.org/Creating_a_Module_for_Joomla_2.5)、观看[此视频](http://www.slideshare.net/vishwashgaur/simple-module-development-in-joomla-25)或使用[模块生成器](http://joomjunk.co.uk/extras/module-generator.html)。

或者，如果您想开发一个组件，请按照[为 Joomla 2.5 开发基本组件的文档开始](http://docs.joomla.org/Developing_a_Model-View-Controller_Component/2.5/Developing_a_Basic_Component)

插件提供了相当多的可能性，因此最好从[这里](http://docs.joomla.org/Plugin_Development)开始并选择你想从那里继续的方式。

只是一个忠告，不要开始使用 Joomla 1.5，要么去 2.5 要么 3.0 ;)

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:56:11.950

[http://docs.joomla.org/Extension_types_(general_definitions)](http://docs.joomla.org/Extension_types_(general_definitions))

扩展是通用的，涵盖组件、插件和模块。插件和模块都是独立的东西。有关此内容的更详细说明，请参见上面的链接。

假设您了解 HTML、CSS、PHP 和 Javascript（Joomla 2.5 的 Mootools 和 Joomla 3.0 的 jQuery） - 那么我将首先阅读 Joomla 文档页面上的开发人员文章：http: [//docs.joomla.org /开发者](http://docs.joomla.org/Developers)

模块开发：[http ://docs.joomla.org/Module_Development](http://docs.joomla.org/Module_Development)

插件开发：[http ://docs.joomla.org/Plugin_Development](http://docs.joomla.org/Plugin_Development)

# c# - 如何从 CCD 模式生成类

> ID：14959951
> 
> 赞同：1
> 
> 时间：2013-02-19T14:31:22.907
> 
> 标签：c#, xsd

我尝试使用以下步骤将 CCD.xsd 生成为 C# 类文件：

1.  [从这个示例](http://developer.healthvault.com/pages/types/type.aspx?id=9c48a2b8-952c-4f5a-935d-f3292326bf54)中复制整个架构，将其粘贴到记事本中并将其保存为 xsd 文件。

2.  从命令提示符执行 xsd 命令`xsd D:\ccd.xsd /c /n:CCD`（以管理员身份运行）。

3.  ccd.cs 类文件已成功创建，没有任何错误或警告。

但我收到了这个错误。

```
Microsoft (R) Xml Schemas/DataTypes support utility
[Microsoft (R) .NET Framework, Version 4.0.30319.17929]
Copyright (C) Microsoft Corporation. All rights reserved.
Schema validation warning: The 'urn:hl7-org:sdtc:patient' element is not declare
d. Line 5902, position 8.
Schema validation warning: The 'urn:hl7-org:sdtc:patient' element is not declare
d. Line 4868, position 8.
Schema validation warning: The 'urn:hl7-org:sdtc:patient' element is not declare
d. Line 4852, position 8.

Warning: Schema could not be validated. Class generation may fail or may produce
 incorrect results.

Error: Error generating classes for schema 'ccd'.
  - The element 'urn:hl7-org:sdtc:patient' is missing. 
```

如果您需要更多帮助，请输入“xsd /?”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T17:22:46.983

要消除警告，您必须找到定义`patient`元素的 SDTC XSD (targetNamespace='urn:hl7-org:sdtc')。除了 ccd.xsd之外，将新文件添加到 xsd.exe 命令行**（**确保还列出了 SDTC XSD 需要的任何文件）。

您需要将 SDTC 文件添加到命令行的原因与 ccd.xsd 没有显式导入 SDTC 命名空间这一事实有关。

# javascript - 是否有 Javascript LLVM IR 位码解释器？

> ID：14959953
> 
> 赞同：5
> 
> 时间：2013-02-19T14:31:28.483
> 
> 标签：javascript, llvm, interpreter, llvm-ir

我正在尝试在浏览器中运行现有的 C 项目而不依赖插件/插件/等。源为 3MB，生成的编译位码（llvm-link）为 3.5M。

使用 lli 运​​行 bitcode 时，内存使用量约为 150MB，与编译本机 ELF 二进制文件并运行它时相同。

Emscripten (-O2 --closure 0) 将位码编译为 24MB .js 文件，当使用 Node.js 运行该文件时，我的内存不足（顶部显示大约 2GB 的内存使用）。

正如 jslinux 演示所示，应该可以解释本机代码。可以说，以可接受的性能解释编译的位码应该更容易。我的问题是是否有任何项目试图在 javascript 中解释 LLVM IR（而不是将 IR 翻译为 javascript，如 Emscripten、mandreel 和其他人所做的）。

# android - 将 ScrollView 添加到布局

> ID：14959954
> 
> 赞同：0
> 
> 时间：2013-02-19T14:31:32.383
> 
> 标签：android, android-layout, xamarin.android

我有以下布局，并试图使布局滚动。我添加了一个 ScrollView，但我必须将它放在错误的位置。有android布局知识的任何人都可以帮忙吗？

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView
    android:id="@+id/myScrollLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical"
        android:background="@drawable/gradient"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/filterOptions">
        <TextView
            android:id="@+id/tvHeaderText"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:layout_marginLeft="0dp"
            android:layout_marginRight="0dp"
            android:text=""
            android:textColor="#ffffffff"
            android:textSize="20sp"
            android:shadowColor="#7F000000"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="2"
            android:layout_centerVertical="true"
            android:paddingTop="3dp"
            android:paddingBottom="3dp"
            android:background="@drawable/gradientNews" />
        <TextView
            android:id="@+id/textView1"
            android:text="Distance"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:textSize="16sp"
            android:textColor="#ff000000" />
        <RelativeLayout
            android:minWidth="25px"
            android:minHeight="25px"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/relativeLayout1">
            <Spinner
                android:id="@+id/spWithinMiles"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/textView1"
                android:textColor="#FF0000" />
        </RelativeLayout>
        <TextView
            android:id="@+id/tvPracticeType"
            android:text="Practice Type"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:textSize="16sp"
            android:textColor="#ff000000" />
        <RelativeLayout
            android:minWidth="25px"
            android:minHeight="25px"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/relativeLayout2">
            <Spinner
                android:id="@+id/spPracticeType"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/tvPracticeType"
                android:textColor="#FF0000" />
        </RelativeLayout>
        <TextView
            android:id="@+id/tvForeignLanguage"
            android:text="Language"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:textSize="16sp"
            android:textColor="#ff000000" />
        <RelativeLayout
            android:minWidth="25px"
            android:minHeight="25px"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/relativeLayout3">
            <Spinner
                android:id="@+id/spForeignLanguage"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/tvForeignLanguage"
                android:textColor="#FF0000" />
        </RelativeLayout>
        <TextView
            android:id="@+id/tvTreatmentOptions"
            android:text="Treatment Options"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:textSize="16sp"
            android:textColor="#ff000000" />
        <RelativeLayout
            android:minWidth="25px"
            android:minHeight="25px"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/rlTreatmentOptions">
            <CheckBox
                android:text="Handicapped Accessible"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="#ff000000"
                android:id="@+id/cbHandicappedAccessible" />
            <CheckBox
                android:text="Home Visits"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/cbHandicappedAccessible"
                android:textColor="#ff000000"
                android:id="@+id/cbHomeVisits" />
            <CheckBox
                android:text="Treat Age One"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/cbHomeVisits"
                android:textColor="#ff000000"
                android:id="@+id/cbTreatAgeOne" />
            <CheckBox
                android:text="Treat Special Needs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/cbTreatAgeOne"
                android:textColor="#ff000000"
                android:id="@+id/cbTreatSpecialNeeds" />
            <CheckBox
                android:text="Grin &amp; Wear It Mouthguard"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/cbTreatSpecialNeeds"
                android:textColor="#ff000000"
                android:id="@+id/cbGrinWearItMouthguard" />
        </RelativeLayout>
        <TextView
            android:id="@+id/tvPracticeOptions"
            android:text="Practice Options"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:textSize="16sp"
            android:textColor="#ff000000" />
        <RelativeLayout
            android:minWidth="25px"
            android:minHeight="25px"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/rlPracticeOptions">
            <CheckBox
                android:text="Website"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="#ff000000"
                android:id="@+id/cbWebsite" />
            <CheckBox
                android:text="Early hours"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/cbWebsite"
                android:textColor="#ff000000"
                android:id="@+id/cbEarlyHours" />
            <CheckBox
                android:text="Late hours"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/cbEarlyHours"
                android:textColor="#ff000000"
                android:id="@+id/cbLateHours" />
            <CheckBox
                android:text="Saturday hours"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/cbLateHours"
                android:textColor="#ff000000"
                android:id="@+id/cbSaturdayHours" />
            <CheckBox
                android:text="Multispecialty Practice"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/cbSaturdayHours"
                android:textColor="#ff000000"
                android:id="@+id/cbMultispecialtyPractice" />
        </RelativeLayout>
    </LinearLayout>
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:41:00.857

如前所述`f20k`：

> xlmns:android="..." 应该在最上面的布局

看一看 ：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView  xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/myScrollLayout"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content">
    <LinearLayout
        android:orientation="vertical"
        android:background="@drawable/gradient"
        android:focusable="true"
        android:focusableInTouchMode="true"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:id="@+id/filterOptions">
        <TextView
            android:id="@+id/tvHeaderText"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:gravity="center"
            android:layout_marginLeft="0dp"
            android:layout_marginRight="0dp"
            android:text=""
            android:textColor="#ffffffff"
            android:textSize="20sp"
            android:shadowColor="#7F000000"
            android:shadowDx="1"
            android:shadowDy="1"
            android:shadowRadius="2"
            android:layout_centerVertical="true"
            android:paddingTop="3dp"
            android:paddingBottom="3dp"
            android:background="@drawable/gradientNews" />
        <TextView
            android:id="@+id/textView1"
            android:text="Distance"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:textSize="16sp"
            android:textColor="#ff000000" />
        <RelativeLayout
            android:minWidth="25px"
            android:minHeight="25px"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/relativeLayout1">
            <Spinner
                android:id="@+id/spWithinMiles"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/textView1"
                android:textColor="#FF0000" />
        </RelativeLayout>
        <TextView
            android:id="@+id/tvPracticeType"
            android:text="Practice Type"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:textSize="16sp"
            android:textColor="#ff000000" />
        <RelativeLayout
            android:minWidth="25px"
            android:minHeight="25px"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/relativeLayout2">
            <Spinner
                android:id="@+id/spPracticeType"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/tvPracticeType"
                android:textColor="#FF0000" />
        </RelativeLayout>
        <TextView
            android:id="@+id/tvForeignLanguage"
            android:text="Language"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:textSize="16sp"
            android:textColor="#ff000000" />
        <RelativeLayout
            android:minWidth="25px"
            android:minHeight="25px"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/relativeLayout3">
            <Spinner
                android:id="@+id/spForeignLanguage"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_toRightOf="@+id/tvForeignLanguage"
                android:textColor="#FF0000" />
        </RelativeLayout>
        <TextView
            android:id="@+id/tvTreatmentOptions"
            android:text="Treatment Options"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:textSize="16sp"
            android:textColor="#ff000000" />
        <RelativeLayout
            android:minWidth="25px"
            android:minHeight="25px"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/rlTreatmentOptions">
            <CheckBox
                android:text="Handicapped Accessible"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="#ff000000"
                android:id="@+id/cbHandicappedAccessible" />
            <CheckBox
                android:text="Home Visits"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/cbHandicappedAccessible"
                android:textColor="#ff000000"
                android:id="@+id/cbHomeVisits" />
            <CheckBox
                android:text="Treat Age One"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/cbHomeVisits"
                android:textColor="#ff000000"
                android:id="@+id/cbTreatAgeOne" />
            <CheckBox
                android:text="Treat Special Needs"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/cbTreatAgeOne"
                android:textColor="#ff000000"
                android:id="@+id/cbTreatSpecialNeeds" />
            <CheckBox
                android:text="Grin &amp; Wear It Mouthguard"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/cbTreatSpecialNeeds"
                android:textColor="#ff000000"
                android:id="@+id/cbGrinWearItMouthguard" />
        </RelativeLayout>
        <TextView
            android:id="@+id/tvPracticeOptions"
            android:text="Practice Options"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:textSize="16sp"
            android:textColor="#ff000000" />
        <RelativeLayout
            android:minWidth="25px"
            android:minHeight="25px"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:id="@+id/rlPracticeOptions">
            <CheckBox
                android:text="Website"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="#ff000000"
                android:id="@+id/cbWebsite" />
            <CheckBox
                android:text="Early hours"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/cbWebsite"
                android:textColor="#ff000000"
                android:id="@+id/cbEarlyHours" />
            <CheckBox
                android:text="Late hours"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/cbEarlyHours"
                android:textColor="#ff000000"
                android:id="@+id/cbLateHours" />
            <CheckBox
                android:text="Saturday hours"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/cbLateHours"
                android:textColor="#ff000000"
                android:id="@+id/cbSaturdayHours" />
            <CheckBox
                android:text="Multispecialty Practice"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_below="@+id/cbSaturdayHours"
                android:textColor="#ff000000"
                android:id="@+id/cbMultispecialtyPractice" />
        </RelativeLayout>
    </LinearLayout>
</ScrollView> 
```

# html - CSS：在按钮的跨度中垂直对齐 p ......或者不是？

> ID：14959957
> 
> 赞同：0
> 
> 时间：2013-02-19T14:31:43.750
> 
> 标签：html, css, button, responsive-design, vertical-alignment

所以我有这个代码：

**HTML**

```
<button type="submit" id="button" name="send-message">
    <span class="content">Lorem ipsum</span>
    <span class="container"><p>Lorem ipsum dolor sit amet, consetetur sadipscing elitr</p</span>
</button> 
```

**CSS**

```
button {
    width: 100%;
    padding: 0;
    border: 0;
    background-color: green;
    position: relative;
}

.content {
    display: inline-block;
    padding: 1em;
}

.container {
    width: 100%;
    height: 100%;
    background-color: blue;
    position: absolute;
    top: 0;
    left: 0;
}

.container p {
    background: yellow;
    vertical-align: middle;
} 
```

[小提琴](http://jsfiddle.net/nLN4W/)

我整天都在尝试让.`<p>`里面的垂直居中`span`，但没有成功。问题是这个按钮必须是响应式的：如果文本不适合一行，它必须流入第二行。如您所见，这很有效，但看起来不太好，因为文本位于按钮顶部，而不是很好地居中。

该课程`container`旨在成为某种叠加层，这就是为什么我离开`.content`那里以表明我的意思。

实际上问题可能是`position: absolute`，但我不知道没有它来执行该任务，因为我需要涵盖 IE8+、（移动）Safari、Firefox 和 Chrome。

如果这个问题有更简单的解决方案，我很想听听，因为我不喜欢用于这种效果的标记。

请帮我！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T15:07:24.507

更改`Height : 100%`为`line-height:60px;`on`CSS .container {}`将开始工作...

试试这个小提琴：http: [//jsfiddle.net/nLN4W/5/](http://jsfiddle.net/nLN4W/5/)

# c# - 以编程方式从 Windows 8 中的“开始”（或 Metro）屏幕调出桌面应用程序

> ID：14959958
> 
> 赞同：0
> 
> 时间：2013-02-19T14:31:45.740
> 
> 标签：c#, wpf, windows-8

我正在编写一个 LOB WPF 程序，它`MessageBox.Show();`向用户提供一些文本警报（只是简单）。

但正如您想象的那样，除非用户通过单击“桌面”磁贴切换到桌面模式，否则我编写的桌面应用程序不会**显示给用户。**

我尝试使用[InputSimulator](http://inputsimulator.codeplex.com/)虚拟按 Win+D，但抛出异常。

如何以编程方式将桌面应用程序调到前台？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:45:42.377

如果我正确理解了这个问题，那么您也没有编写额外的 Windows Store/Metro 应用程序......您只是希望用户看到您的 WPF 桌面应用程序引发的警报，即使他们目前处于完整状态 -屏幕 Windows Store/Metro 应用程序，而不是在桌面上。

为了解决这个问题，我推荐使用 toast 通知系统。您可以从 Windows 应用商店应用程序或桌面应用程序发送 toast 通知，因此您的 WPF 应用程序可以引发 toast 通知，而不是使用您的文本警报/MessageBox.Show() 机制。无论用户身在何处，此 Toast 通知都将显示给用户……在桌面、开始屏幕、Windows Store/Metro 应用程序中……这能解决您的问题吗？

这是有关[从桌面应用程序发送 toast 通知](http://msdn.microsoft.com/en-us/library/windows/apps/hh779727.aspx#sending_toast_notifications_from_desktop_apps)的文档。它还链接到[快速入门代码演练](http://msdn.microsoft.com/en-us/library/windows/apps/hh802768.aspx)。

# security - 等待处理的敏感瞬态数据的安全策略

> ID：14959960
> 
> 赞同：1
> 
> 时间：2013-02-19T14:31:47.190
> 
> 标签：security, system-design

我目前正在进行基于 REST API 的服务的 alpha 测试/开发，该服务代表其用户为客户端执行自动化任务。Web 应用程序托管在我的服务器上，任务由在后台服务中运行的工作人员处理。可能有许多服务实例跨多个服务器运行，具体取决于负载。

用户通过 API 创建会话，会话存储在数据库中并排队等待处理。然后用户为他们的会话发出命令。工作进程使会话出队并开始一一处理命令，直到用户关闭会话。命令结果存储在数据库中，供用户在完成后访问。

什么是确保命令输入在处理之前保持安全的好策略，因为它们可能包含不应泄露的敏感数据。处理后，可以删除输入，但我想向我的用户保证，我的系统处理的任何数据泄漏的可能性可以忽略不计。

# delphi - 阻塞套接字会触发哪些事件？

> ID：14959962
> 
> 赞同：1
> 
> 时间：2013-02-19T14:31:52.340
> 
> 标签：delphi, sockets

出于好奇，如果 TServerSocket/TClientSocket 是 ThreadBlocking 类型，会触发哪些事件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-19T22:55:03.590

`TClientSocket`在阻塞模式下会触发除`OnRead`和之外的所有事件`OnWrite`。此外，`OnDisconnect`仅当客户端关闭自己的套接字端时，才会在远程断开连接时触发该事件。读取/写入数据的代码负责检测这些套接字状态。可读性是通过`TWinSocketStream.WaitForRead()`或 WinSock`select()`函数检测的。仅通过 WinSock`select()`函数检测可写性。通过首先检测可读性然后`TCustomWinSocket.ReceiveBuf()`或`TWinSocketStream.Read()`返回 0 来检测远程断开连接。

`TServerSocket`默认情况下，在阻塞模式下会触发其所有事件。但是，如果您从中派生一个`TServerClientThread`覆盖虚拟`ClientExecute()`方法的类，然后从事件中返回该类的实例`OnGetThread`，那么您将丢失`OnRead`和`OnWrite`事件，并且必须使用与`TClientSocket`阻塞模式类似的逻辑来检测这些套接字状态。

# c# - 反应式中使用的类中的内存不足异常

> ID：14959964
> 
> 赞同：1
> 
> 时间：2013-02-19T14:32:01.640
> 
> 标签：c#, memory-management, system.reactive, idisposable

在 RX Framework 中使用类时，我们如何释放类中的资源？我在 C# 4.0 lib 项目中有一个类，其中包含 Web 服务代理、ado.net 对象等，我也实现了 IDisposable。这个类有一个运行运行方法，在这个方法中，我将数据保存到数据集中，最后当方法完成时，我将数据集保存到 DB。

在 Dispose 方法中，我将数据集设置为 null，将其他 Web 服务代理对象设置为 null。然而，当此类在反应式扩展方法中频繁使用时，它会引发内存异常。

```
public class MyClass : IDisposable
 {
     proxy object;
     DataSet object; // This dataset has 2 tables with relation set each other

     public string LongRunMethods(string code)
     {
        // iterrating a for loop...
        // insert new row into the 1st table of dataset in each loop
        // another loop
        // insert new row into the 2nd table of dataset in each loop
        // Bulk save the dataset to Database
        // return string;
      }

      private void Dispose()
      {
         // nulling all the objects...[proxies, datasets, etc

      }
  } 
```

并且这个类是通过创建1000次来使用的，如下所示。

```
 IObservable<string> RunProcess(Employee emp)
    {           
       using (MyClass p = new MyClass ())
        {
          return Observable.Start(() => p.LongRunMethods(emp.Code), scheduler.ThreadPool);
        }                        
    } 
```

此 EmployeeDatas 是 1000 个员工对象的列表。

```
 EmployeeDatas.ToObservable().Select(x => RunProcess(x).Select(y => new { edata = x, retval = y }))
                .Merge(10)
                .ObserveOn(Scheduler.CurrentThread)
                .Subscribe(x =>
                {
                    SendReportStatus(x.retval.Item1, x.retval);                           
                }); 
```

一切正常。但是当处理第 300 个或以上的员工对象时，有时会在 MyClass 中抛出内存不足的异常。

我在 MyClass 中使用 dispose 方法，一旦完成，它将释放所有资源。然而为什么内存不足异常。

这里有什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T21:33:09.600

据我所知，您发布的 Rx 中没有任何内容本身会出现内存泄漏。正如其他人所指出的那样，您是在查询完成之前处理您的类 - 如果没有看到更多代码，很难说出可能导致什么问题。

但是，您显然有泄漏。当遇到此类问题时，我建议在您的代码上运行内存分析器。这是深入了解它的最快方法。

如果您没有足够高的 Visual Studio 版本，则可以下载 Visual Studio 的试用版或任意数量的商业产品。我强烈推荐[SciTech 的分析器](http://memprofiler.com/)，因为它非常易于使用并且有很好的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T09:14:59.400

我不确定你那里没有太多代码。据我所知，当您认为它会调用时，不会调用您的 Disposable clean up 。假设 MyClass 填充 LongRunMethods 中的 DataTables，那么您实际上永远不会清理。

您的 Dispose 在 MyClass 实例化后立即调用，并且很可能在 LongRunMethods 开始之前调用！

尝试将上面的替换为...

```
IObservable<string> RunProcess(Employee emp)
{  
   return Observable.Using(() => new MyClass(), p => p.LongRunMethods(emp.Code), scheduler.ThreadPool);
} 
```

这将在您调用 OnCompleted() 之后处理您的 MyClass。

# ruby-on-rails - 一个用户如何评论另一个用户？自我参照？

> ID：14959968
> 
> 赞同：0
> 
> 时间：2013-02-19T14:32:13.523
> 
> 标签：ruby-on-rails

假设我有一个`User`和`Post`一个`Comment`模型，它允许用户对帖子发表评论。我已经建立了一个多态关系，如下所示：

```
class User < ActiveRecord::Base
  has_many :comments
end

class GroupRun < ActiveRecord::Base
  has_many :comments, :as => :commentable
end

class Comment < ActiveRecord::Base
  belongs_to :commentable, polymorphic: true
  belongs_to :user
end 
```

我现在想允许一个用户评论另一个用户，但我遇到了困难。我原以为我可以做一些类似的事情，`has_many :notes, :as_commentable`但这不起作用。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:42:14.043

您必须将其添加到您的用户模型中：

```
class User < ActiveRecord::Base
  has_many :comments
  has_many :comments_from_other_users, :as => :commentable, :class_name => 'Comment'
end 
```

我知道关系的名称很糟糕，但它很容易理解，您可以根据需要更改它。

所以你应该有这个之后：

```
current_user.comments.each do |comment|
  comment.user # author of the comment
  comment.commentable # object that you posted the comment on (GroupRun for instance)
end
current_user.comments_from_other_users.each do |comment|
  comment.user # author of the comment
  comment.commentable # user on which the comment is posted (should be equal here to current_user)
end 
```

# c# - 如何将解析的 aspx 加载到字符串变量中

> ID：14959969
> 
> 赞同：2
> 
> 时间：2013-02-19T14:32:22.047
> 
> 标签：c#, asp.net

我正在尝试将解析的 aspx 文件加载到字符串中。这样做的原因是因为我有一个页面上有相当数量的 html，其中也有需要处理的部分才能插入正确的信息。然后，该页面需要显示为确认页面，并在用户提交表单时通过确认电子邮件发送。

显示确认页面很简单，但我防止代码重复的想法是将 aspx 文件呈现为字符串变量以用作电子邮件的内容。

我意识到我可以将所有内容添加为一个巨大的多行字符串并将其加载到 aspx 页面上，然后加载到电子邮件中，但是这个解决方案对我来说感觉很乱，如果我想的话，需要重新编译应用程序改变内容。

也许有人可以提出更好的方法来实现我正在尝试的目标？

我想出的代码如下，但我不确定是否有可能在 ProcessRequest 的输出被发送到浏览器之前以某种方式捕获它：

```
IHttpHandler handler = PageParser.GetCompiledPageInstance("/SubmitConfirmation.aspx?appid=" + this.Id, "SubmitConfirmation.aspx", HttpContext.Current);
handler.ProcessRequest(HttpContext.Current);
string str_out = ???; 
```

基本上我要实现的目标与以下 PHP 代码相同：

```
<?php
ob_start();
include("SubmitConfirmation.php");
$str_out = ob_get_contents();
ob_end_clean();
?> 
```

欢迎任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-19T14:41:50.797

你试过了吗

```
System.IO.StringWriter htmlStringWriter = new System.IO.StringWriter();
Server.Execute("Page.aspx", htmlStringWriter);
string htmlOutput = htmlStringWriter.GetStringBuilder().ToString(); 
```

在[Kiyoshi 的博客](http://weblogs.asp.net/kiyoshi/archive/2009/02/14/render-aspx-page-as-a-string.aspx)上找到。测试它 - 并为我工作。也见[MSDN](http://msdn.microsoft.com/en-us/library/system.web.httpserverutility.execute.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-19T14:47:11.007

您需要执行该页面。最简单的方法是：

```
var writer = new StringWriter();

Server.Execute("/SubmitConfirmation.aspx?appid=" + this.Id, writer );

string str_out = writer.GetStringBuilder().ToString(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-19T14:42:09.920

你可以试试：

```
WebClient client = new WebClient();
string html = client.DownloadString(@"???"); // your site 
```

# git - 使用我的 GitHub 帐户错误设置 git 时遇到问题：无法锁定配置文件

> ID：14959972
> 
> 赞同：61
> 
> 时间：2013-02-19T14:32:39.063
> 
> 标签：git

尝试设置全局配置时出现此错误：

```
$ git config --global user.name "Your Name Here"
error: could not lock config file /pathto/file/.gitconfig: No such file or directory 
```

并且文件 .gitconfig 已经存在，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-02-19T15:03:37.350

有点像“ [Trouble setting up Tower with my GitHub Account - error: could not lock config file](https://stackoverflow.com/a/10502155/6309) ”，检查该`~/.gitconfig`文件是如何创建的。
即：与它相关的权利？

还要确保在执行命令`$HOME`时正确设置了变量。`git config --global`

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2015-07-07T15:36:24.577

检查您的主文件夹中是否有 .git 目录，如果没有：

mkdir ~/.git

解决了我的问题。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-11-07T16:01:32.067

当 gitconfig 存在锁定文件时，我收到此错误。尝试查找并删除 .gitconfig.lock （在我的 linux 机器上，它位于我的主目录中）

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-12-15T16:44:40.123

只需以管理员身份运行.......您需要在 Windows 中以管理员身份运行模式运行程序

* * *

## 回答 #5

> 赞同：18
> 
> 时间：2014-06-09T12:26:57.053

**Windows 用户**：确保您的环境变量设置正确。

我的帐户用户名“*回形针*”有以下内容：

`My Computer (right-click) > Properties > Advanced (tab) > Environment Variables (under System Variables)`：

`HOME -> %HOMEPATH%`

`HOMEPATH -> C:\Documents and Settings\paperclip`

似乎 Git 无法像您期望的那样解析/`%HOME%`扩展`%HOMEPATH%`。相反，我需要通过将`%HOME%`其`%HOMEPATH%`更改为：

`HOME -> C:\Documents and Settings\paperclip`

* * *

## 回答 #6

> 赞同：14
> 
> 时间：2016-03-02T14:53:25.953

在 Windows 中：右键单击“Git Bash”图标 -> 以管理员身份运行。它帮助了我。

Git 尝试在磁盘 C:/ 上创建一个配置文件，但它没有这样做的权限。

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2016-08-31T18:29:28.533

如果用户不能写入用户主目录，则会发生这种情况。 `git config --global`需要`~/.gitconfig.lock`在用户主目录中创建一个“锁定”文件 ()。

检查权限并尝试创建一个。

```
# cat ~/.gitconfig.lock
cat: /home/users/developer/.gitconfig.lock: No such file or directory
# touch ~/.gitconfig.lock

## Now check, if a file has been created?
# cat ~/.gitconfig.lock
# 
```

**注意：**如果成功，**你必须删除这个文件**，否则 git 会抛出另一个错误！

如果用户没有创建此文件的权限，您必须检查并更改主目录的权限。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2017-12-18T01:13:08.007

如果您想在系统级别设置配置，只需使用以下命令：

```
$ sudo git config --system user.name "my_name" 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2019-08-13T03:00:39.967

我将.gitconfig文件重命名为xyz.gitconfig，然后git会生成一个新的.gitconfig文件，即wokrd

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2014-08-21T05:59:18.043

我在 Windows 上“遇到”了这个错误，因为我的名字（因此`%HOMEPATH%`）包含一个非 ascii 字符（`é`）。git 或 cmd.exe 或其他任何东西都无法解决这个问题。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2014-02-19T14:01:54.360

更新你的 Git 客户端插件。它对我有用 =) [https://issues.jenkins-ci.org/browse/JENKINS-21016](https://issues.jenkins-ci.org/browse/JENKINS-21016)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2017-11-02T18:02:06.270

这可能是由 ~/.gitconfig.lock 的存在引起的。这个文件可能是以前运行的 git 的工件，由于某种原因被中止，例如 ansible 超时或 ^C

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-10-14T12:50:26.023

这对我有用，

1.  打开开始菜单
2.  键入不带引号的“环境”
3.  选择编辑环境变量（系统或用户，任何）
4.  在用户变量下，选择 HOME
5.  点击编辑
6.  添加 %USERPROFILE% 缺少的 % 前缀
7.  继续为所有打开的窗口单击“确定”

[ ![逐步说明在 Windows 10 上当前用户变量](../Images/b7522da64019f9ecb0504cdd55dfa670.png)]

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2018-07-16T13:44:08.680

这是一篇旧帖子，但我最近遇到了这个问题，但我解决这个问题的方式与这里的其他人不同。我收到了同样的错误，因为我没有权限访问我的计算机上的 $HOME 路径。只需通过双击文件中的文件夹来访问该文件夹，系统就会提示我在第一次进入这些文件夹后获得对这些文件夹的永久访问权限。在我访问 $HOME 变量中最深的文件夹后，该命令起作用了。

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2020-06-10T19:56:48.813

我对聚会很老了，但可能这会对某些人有所帮助。感谢@paperclip

在 Windows 10 中：

第 1 步：转到 `This PC`> 右键单击`Properties`

第 2 步：单击`Advanced System Settings`并单击`Environment Variables`

第 3 步：在`System Variables`创建新变量下调用`HOME`并输入值，`%USERPROFILE%`如下所示

[![在此处输入图像描述](../Images/3fe1c8dd4532615269a6bb8005b22513.png)](https://i.stack.imgur.com/bKCsQ.png)

第 4 步：**重要** 您必须重新启动 PC 才能生效

第 5 步：`Git for Windows`现在安装，`Tortoise Git for windows`如果您愿意，可以选择安装。

发出 git clone 请求或尝试将某些内容推送到您的存储库中。魔法它会起作用的。现在一切都应该正常工作。

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2015-10-25T17:11:23.530

对我来说，问题不是 git config，而是我当前 repo 中的 .git 目录是由 root 创建的，我正试图对我的其他用户做一些事情。我换了烫发

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2019-06-04T18:23:51.367

您也可以尝试在主目录中发出命令。

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-07-01T18:41:12.950

就我而言，该`.git/config`文件不是在我的`$HOME`目录中创建的，而是在我的存储库中创建的`.git/config.lock`

删除文件解决了问题。该文件被创建，当我切换分支时`git checkout -f branchname`，来自最近创建的子模块的文件被 git checkout 覆盖。

```
$ git branch --set-upstream-to=origin/branchname
error: could not lock config file .git/config: File exists
error: Unable to write upstream branch configuration
hint: 
hint: After fixing the error cause you may try to fix up
hint: the remote tracking information by invoking
hint: "git branch --set-upstream-to=origin/branchname". 
```

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2019-11-26T08:09:24.527

Windows 升级后我开始收到此错误。Windows 升级后，我的 Home 变量以某种方式被删除。通过将 HOME 变量添加为“C”\Users\myusername”解决了问题。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2020-02-16T15:07:47.327

所以我知道这个线程很旧，但我遇到了同样的问题并修复了它。希望这对其他人有用。

当我尝试在 powershell/cmd 中使用“sudo”或任何东西时，它是一个无法识别的命令。所以我重新安装了 git for windows，在安装过程中它失败并指向 C:/ProgramFiles/git/etc/gitconfig 我删除了那个文件，然后重新安装。保存凭据时出现同样的错误，所以我将新创建的 gitconfig 从程序文件移动到我的 HomePath 位置 C:/Users/Name

现在我可以在 file-->Options-->git 下保存凭据 最后，我可以在 githubdesktop 上提交/推送

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2021-10-05T09:31:58.617

我遇到了同样的问题并尝试了这里提供的几种解决方案，这对我有用

删除`.gitconfig`和`.gitconfig.lock`文件，然后再次运行全局配置的设置，为我解决这个问题，只需按顺序运行

`rm -rf ~/.gitconfig.lock ~/.gitconfig`

然后

`git config --global user.name "YOUR NAME"`

# java - jar文件下载到缓存后只能打开一次

> ID：14959973
> 
> 赞同：2
> 
> 时间：2013-02-19T14:32:43.910
> 
> 标签：java, nullpointerexception, jnlp, java-web-start

我对位于服务器上的 .jar 文件有疑问。我正在使用 JNLP 协议来打开它。
当我第一次打开 .jnlp 文件时，jar 文件被下载到浏览器的缓存中并且应用程序运行没有问题，但是当我再次尝试打开 .jnlp 文件时（jar 文件已经在缓存中），应用程序无法打开并引发此异常：

```
java.lang.NullPointerException
        at.com.sun.javaws.Launcher.executeApplication(Unknown Source)
        at.com.sun.javaws.Launcher.executeMainClass(Unknown Source)
        at.com.sun.javaws.Launcher.doLaunchApp(Unknown Source)
        at.com.sun.javaws.Launcher.run(Unknown Source)
        at.java.lang.Thread.run(Unknown Source) 
```

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:50:29.017

请务必使用[JaNeLA](http://pscode.org/janela/)验证 JNLP 。各种 Java Web Start 客户端（启动 JWS 应用程序）将以不可预知的方式解析无效的 JNLP 文件。

# c# - 我可以将 TcpClient 从一台服务器传递到另一台服务器吗？

> ID：14959974
> 
> 赞同：1
> 
> 时间：2013-02-19T14:32:49.820
> 
> 标签：c#, networking, tcp, mmo

所以基本上我正在创建一个在线游戏。我有一台保存所有用户名/密码信息的服务器（登录服务器），然后是一台或多台托管游戏的服务器（游戏服务器）。客户端连接到验证其凭据的登录服务器，检查他们在哪个游戏服务器上，然后告诉该服务器连接到客户端。

我对安全性知之甚少，但我认为让客户端监听来自其游戏服务器的连接而不是让游戏服务器监听客户端会更安全。我认为这至少会使 DDoS 攻击更容易被阻止。

问题是我读到如果您的服务器位于某些类型的路由器或负载平衡器之后，您将无法轻松获取客户端的 ip。我需要登录服务器告诉游戏服务器要连接到谁......除非我可以转移一个打开的连接。我相信某些游戏具有服务器集群，可以让客户端在一个或另一个之间浮动，所以我认为可以通过某种方式将连接从一台服务器传递到另一台服务器。一般是怎么做的？

也许我已经走远了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-19T14:42:07.483

为了避免 DDoS，一种可能的解决方案是`login server`连接到`game server`并要求它打开一个端口，它会这样做，`game server`然后可以返回随机数`port number`，`login server`然后可以将其发送到`client`.

然后`client`假设有一分钟的窗口连接到它的随机分配的端口，然后`game server`才能关闭该端口。

只是一个想法。

```
Client connects to Login Server:Standard Port
Login Server connects to Game Server:Standard Port
Game Server sends Random Port to Login Server
Login Server sends Random Port to Client
Client connects to Game Server:Random Port 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:40:18.867

您不能像您想的那样传输连接，您基本上必须告诉客户端创建另一个到新服务器的连接。

您可以使用某种传输命令来响应客户端，该命令说明您希望它们连接的新游戏服务器 IP 和端口。它可以连接到新服务器并与现有服务器断开连接。

# java - svn 中的 grepcode 浏览方式

> ID：14959979
> 
> 赞同：0
> 
> 时间：2013-02-19T14:33:01.803
> 
> 标签：java, svn

是否有任何用于 svn 的 GrepCode 类型的代码浏览器。GrepCode 类型是指带有超链接的类型，您可以单击 Java 类名并导航到 Java 类。

谢谢，凯沙瓦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T18:34:08.817

[Opengrok](http://opengrok.github.io/OpenGrok/)使您能够单击源 Java 类并交叉引用它们。

FishEye 通常对用户更友好，但缺少此特定功能。他们有一个[JIRA](https://jira.atlassian.com/browse/FE-2529)反对这一点。

# svm - SVM：网格搜索结果与我的分数不同，全类缺失和错误预测。为什么？

> ID：14959980
> 
> 赞同：2
> 
> 时间：2013-02-19T14:33:03.463
> 
> 标签：svm, scikit-learn

我有 155 个图像和 8 个类，前提是这些特征没有在 [0-1] 范围内缩放。

网格搜索交叉验证建议我使用线性内核和 C = 1000 的分数：

```
 precision    recall  f1-score   support

      1       0.54      0.88      0.67         8
      2       0.73      1.00      0.84         8
      3       1.00      1.00      1.00         6
      4       0.75      0.50      0.60        12
      5       0.83      0.83      0.83         6
      6       0.92      0.65      0.76        17
      7       0.71      0.42      0.53        12
      8       0.60      1.00      0.75         9

avg / total       0.77      0.73      0.72        78 
```

但是当我尝试线性内核和 C=1000 时，我得到：

```
 precision    recall  f1-score   support

      1       0.00      0.00      0.00         0
      2       1.00      0.70      0.82        10
      3       1.00      1.00      1.00        13
      4       0.73      0.58      0.65        19
      5       1.00      0.95      0.97        19
      6       0.96      0.88      0.92        25
      7       0.82      0.67      0.73        27
      8       0.70      1.00      0.82        16

avg / total       0.88      0.81      0.84       129

Confusion matrix:
[[ 0  0  0  0  0  0  0  0]
[ 0  7  0  0  0  0  3  0]
[ 0  0 13  0  0  0  0  0]
[ 2  0  0 11  0  1  0  5]
[ 0  0  0  1 18  0  0  0]
[ 0  0  0  0  0 22  1  2]
[ 6  0  0  3  0  0 18  0]
[ 0  0  0  0  0  0  0 16]] 
```

为什么第 1 类全为零？

我还看到，使用 rbf 内核我得到了最好的结果，但在头等舱中总是为零：

```
 precision    recall  f1-score   support

      1       0.00      0.00      0.00         0
      2       1.00      1.00      1.00        10
      3       1.00      1.00      1.00        13
      4       0.94      0.89      0.92        19
      5       1.00      0.95      0.97        19
      6       0.93      1.00      0.96        25
      7       1.00      0.78      0.88        27
      8       1.00      1.00      1.00        16

avg / total       0.98      0.93      0.95       129

Confusion matrix:
[[ 0  0  0  0  0  0  0  0]
 [ 0 10  0  0  0  0  0  0]
 [ 0  0 13  0  0  0  0  0]
 [ 1  0  0 17  0  1  0  0]
 [ 0  0  0  1 18  0  0  0]
 [ 0  0  0  0  0 25  0  0]
 [ 5  0  0  0  0  1 21  0]
 [ 0  0  0  0  0  0  0 16]] 
```

最后，当我尝试预测训练集的一些相同图像时

```
print(clf.predict(fv)) 
```

其中 fv 是图像特征向量：

```
[0.16666666666628771, 5.169878828456423e-26, 2.3475644278196356e-21, 1.0, 1.0000000000027285] 
```

并将错误的类分配给特征向量！（即图像拥有 4 类，但 predict() 结果是 5 类）

**重新更新**

图片集：[https ://docs.google.com/file/d/0ByS6Z5WRz-h2V3RkejFkb21Fb0E/edit?usp=sharing](https://docs.google.com/file/d/0ByS6Z5WRz-h2V3RkejFkb21Fb0E/edit?usp=sharing)

功能图像集：[https ://docs.google.com/file/d/0ByS6Z5WRz-h2YlhuUmFBaElXVEE/edit?usp=sharing](https://docs.google.com/file/d/0ByS6Z5WRz-h2YlhuUmFBaElXVEE/edit?usp=sharing)

完整代码：

```
import os
import glob
import numpy as np
from numpy import array
import cv2

target = [      1,1,1,1,
          1,1,1,1,1,1,1,
          1,1,1,1,1,1,1,
          1,2,2,2,2,2,2,
          2,2,2,2,2,2,2,
          2,2,2,2,3,3,3,
          3,3,3,3,3,3,3,
          3,3,3,4,4,4,4,
          4,4,4,4,4,4,4,
          4,4,4,4,4,4,4,        
          4,5,5,5,5,5,5,
          5,5,5,5,5,5,5,
          5,5,5,5,5,5,6,
          6,6,6,6,6,6,6,
          6,6,6,6,6,6,6,
          6,6,6,6,6,6,6,
          6,6,6,7,7,7,7,               
          7,7,7,7,7,7,7,
          7,7,7,7,7,7,7,
          7,7,7,7,7,7,7,                  
          7,7,8,8,8,8,8,
          8,8,8,8,8,8,8,
          8,8,8,8]

features = [ [0.26912666717306399, 0.012738398606387012, 0.011347858467581035, 0.1896938013442868, 2.444553429782046]
,
[0.36793086934925351, 0.034364344308391102, 0.019054536791551006, 0.0076875387476751395, 3.03091214703604]
,
[0.36793086934925351, 0.034364344308391102, 0.019054536791551006, 0.0076875387476751395, 3.03091214703604]
,
[0.30406240228443038, 0.047100329090555518, 0.0049653458889261448, 0.0004618404341300081, 5.987025009738751]
,
[0.36660353297714748, 0.034256126367653919, 0.01892501331178556, 0.007723901183105499, 3.0392760101225234]
,
[0.26708884220978957, 0.012126741224471632, 0.0063753119877062942, 0.0005937801528983894, 2.403113171408598]
,
[0.27070254516425241, 0.01293684867974746, 0.01159661796151442, 0.008380724334031727, 2.4492688425144986]
,
[0.27076540467770038, 0.012502407901054009, 0.011180048331833999, 0.0007116977225672878, 2.4068989750876266]
,
[0.22832314403919951, 0.010491475428909061, 0.0027317652016312271, 0.001417434443656981, 2.6271926274711968]
,
[0.22374814412737717, 0.0095258889624651646, 0.0040833924467236719, 0.1884906960716747, 2.5474055920602514]
,
[0.23860556210266026, 0.0067860933136106557, 0.0052050705189953389, 0.01498751040799334, 2.0545849084769694]
,
[0.32849751530034654, 0.0082079572128769367, 0.017950580842136479, 0.07211170619739862, 1.761646715256231]
,
[0.3536962871782694, 0.04335618127793292, 0.0084705562859388305, 0.003939815915497741, 3.8626463078353632]
,
[0.23642964900011443, 0.0060530993708264348, 0.0041172882106328976, 0.003276003276003276, 1.9809324414862304]
,
[0.35468301957048581, 0.043735489028639378, 0.0085420200506240735, 0.00041124057573680605, 3.873602628153773]
,
[0.35549112610207528, 0.043992218599656373, 0.0086354414147218166, 0.004276259969455286, 3.8781644572829106]
,
[0.97303451800669749, 0.075165987107118692, 0.23350656471824954, 0.04989418850724402, 1.7845923298199189]
,
[0.32292438991638828, 0.0078312712861588109, 0.018256154769458615, 0.05861489639723726, 1.754975905310628]
,
[0.36415716731096714, 0.033783635359516562, 0.0087048690616182353, 0.0007989674881691353, 3.0382507494699778]
,
[0.23247799686964493, 0.023970481957641395, 0.0020180739588722754, 0.2511737089201878, 4.987537342956105]
,
[0.25249755819322928, 0.03355835554037629, 0.0024745974458906918, 0.49168600154679043, 6.286228850887637]
,
[0.25524836990657951, 0.035216193154545015, 0.0023524820730296808, 0.49272798742138363, 6.553001816315555]
,
[0.25226043727172792, 0.033580607886770704, 0.002399474603048905, 0.4913428241631397, 6.310803986284148]
,
[0.2552359153348957, 0.034993472521483299, 0.0024465696242431606, 0.49311565696302123, 6.488164071764478]
,
[0.25249755819322928, 0.03355835554037629, 0.0024745974458906918, 0.49168600154679043, 6.286228850887637]
,
[0.19296658297366265, 0.0073667093687413854, 0.0010128002719554498, 0.20292887029288703, 2.6022382484976103]
,
[0.23130715659438109, 0.023652143308649062, 0.0020734509865596379, 0.2519981194170193, 4.96809084167716]
,
[0.23646940610897133, 0.025909457534721684, 0.0019634358569802723, 0.25097465886939574, 5.263654156113397]
,
[0.61892415483059771, 0.1855733578950316, 0.024118739298890277, 0.00010742003920831431, 5.579333799263049]
,
[0.61892415483059771, 0.1855733578950316, 0.024118739298890277, 0.00010742003920831431, 5.579333799263049]
,
[0.62187109165606835, 0.18810005977070685, 0.060143785970969831, 0.005752046658462197, 5.609811692923419]
,
[0.64410628333823972, 0.20178318336365086, 0.039546324622261202, 8.006565383614564e-05, 5.609490756132282]
,
[0.6214309265075304, 0.18779664186718673, 0.061337975720487534, 0.006350402281839464, 5.608301926807521]
,
[0.20135445416653119, 0.0070220507238874311, 0.0027092098815647042, 0.4125833006664053, 2.4256545571324732]
,
[0.20123494853445922, 0.0069845347246147793, 0.0027020357704780201, 0.4106724003127443, 2.420576584506546]
,
[0.2015816556223165, 0.0070631416111702362, 0.0025149608542164329, 0.4106073986851143, 2.4300340608128606]
,
[0.70115857527896985, 0.35625759453714789, 0.028386898853323388, 0.001234186979327368, 12.446918085552586]
,
[0.68366020888533297, 0.2387861974848598, 0.04047049559400958, 0.0725675987982436, 6.011803834536788]
,
[0.70115857527896985, 0.35625759453714789, 0.028386898853323388, 0.001234186979327368, 12.446918085552586]
,
[0.71378846605495283, 0.37185054375086962, 0.078338189105938844, 0.4899937460913071, 12.727628852581882]
,
[0.72219309919241148, 0.37567368174335658, 0.029371875736917675, 0.48066298342541436, 12.21840343375]
,
[0.84033907078880576, 0.29025638999406633, 0.090118665350957639, 0.00013319126265316994, 4.572824986179928]
,
[0.84033907078880576, 0.29025638999406633, 0.090118665350957639, 0.00013319126265316994, 4.572824986179928]
,
[0.84078478547550572, 0.28881268265635862, 0.092759120470064349, 0.0005334044539271903, 4.542932448095888]
,
[0.86195880470328134, 0.31149212664075476, 0.090341088591145105, 0.00044657097288676234, 4.673692966632184]
,
[0.85542893012496013, 0.29898764801731947, 0.17279563533793374, 0.0005314202205393915, 4.543371196521408]
,
[0.68653873117620423, 0.24135977292901584, 0.031609483792605572, 0.4553053169259345, 6.032229402405299]
,
[0.68937407444389065, 0.2429428175127194, 0.031783181019183315, 0.07118412046543464, 6.017180801429501]
,
[0.66262362984605561, 0.22830191525650573, 0.027222059698182095, 0.4712353884941554, 6.170703008647743]
,
[0.85191326598415906, 0.0066280315423251869, 0.18568977018064967, 0.24070082098793744, 1.211324246965761]
,
[0.41763663758743241, 0.0042550997098748248, 0.01052268995786553, 0.000998003992015968, 1.3702049090803978]
,
[0.47955540731641061, 0.036031336698149265, 0.0037552308556160824, 0.41911764705882354, 2.3102900509255964]
,
[0.28510645493450759, 0.017800467984914338, 0.0013560744373383752, 0.6212718064153067, 2.7591153064421485]
,
[0.28093855472961832, 0.017019535454492932, 0.0025233674347249074, 0.6243626062322947, 2.733908520445971]
,
[0.28510645493450759, 0.017800467984914338, 0.0013560744373383752, 0.6212718064153067, 2.7591153064421485]
,
[0.29957424000441979, 0.020997289413265056, 0.0032514165703168524, 0.002352941176470588, 2.8737257187232768]
,
[0.28093855472961832, 0.017019535454492932, 0.0025233674347249074, 0.6243626062322947, 2.733908520445971]
,
[0.94384505611284442, 0.0070361165614443756, 0.17778161251377933, 0.00013138014845956775, 1.1950816827585424]
,
[1.2480442396269933, 0.013169393067805945, 0.37414805554448649, 0.0018769272020378066, 1.202522486580245]
,
[0.82815785035628164, 0.0071847611802335776, 0.17226935935994725, 0.24680054800013365, 1.2280429227515923]
,
[0.55468014442636804, 0.04844726528488761, 0.074669093941655343, 0.3799483919692869, 2.3157520760049994]
,
[0.85603162865577076, 0.010190325204698992, 0.14635589096917062, 0.00018691588785046728, 1.2673797230628077]
,
[0.55881837183305305, 0.048068057730781634, 0.06639403930381195, 0.3722541921910773, 2.291289872230647]
,
[0.55650701031519434, 0.047379164870780005, 0.075834025272625227, 0.3768812839567851, 2.2847828255276856]
,
[0.59736941845983627, 0.054964632904472815, 0.089651232352172761, 0.0002190940461192967, 2.291980379225357]
,
[0.55468014442636804, 0.04844726528488761, 0.074669093941655343, 0.3799483919692869, 2.3157520760049994]
,
[0.37385965430511475, 0.019136318061858774, 0.0017515265254845647, 0.002456248081056187, 2.1746841721523915]
,
[0.3755068478409902, 0.019166948350188812, 0.0045621553498242356, 0.4868705591597158, 2.1680040687479902]
,
[0.376117657056177, 0.020048016077051325, 0.004081551918441755, 0.48440424204616345, 2.20746211913412]
,
[0.18567611209815035, 0.0017735326711233123, 0.00026719643703200545, 0.37649076434123163, 1.5866887090683386]
,
[0.15935887794419157, 3.0968737461516311e-05, 4.6106803792004044e-06, 7.109594397639615e-05, 1.0723690004464064]
,
[0.1598493732922015, 9.6513614204532248e-05, 1.4807540465080871e-05, 0.020011435105774727, 1.130966420539851]
,
[0.15976502679964721, 9.179670697435723e-05, 1.1098997372160861e-05, 0.027888446215139442, 1.127590980529105]
,
[0.15948519514589277, 8.8904788108173233e-05, 3.0493405326069049e-07, 0.825754804580883, 1.1256719774569757]
,
[0.16617638537179313, 0.0020240604885197228, 3.5948671354276501e-05, 0.00017182868679926113, 1.7424826840700272]
,
[0.16617882105231332, 0.002010285330985506, 3.1650697838912209e-05, 0.00017161489617298782, 1.7390017992958084]
,
[0.16601904246228144, 0.001959487143766989, 3.2733987503779933e-05, 0.10968404829180581, 1.7271461688896599]
,
[0.16628339469915165, 0.0020643314471593802, 1.4502279324313873e-05, 0.14276914653343373, 1.7519319117125625]
,
[0.16629298316796565, 0.0020800819965552542, 1.9020907349023509e-05, 0.13840607699240376, 1.755817053262183]
,
[0.18572210382333143, 0.0018178104959919194, 0.0002453722722107162, 6.292672183242613e-05, 1.5959450271122788]
,
[0.78164051870269824, 0.051523793666842309, 0.015067726988898911, 4.814636494944632e-05, 1.818489926889651]
,
[0.18566012446433577, 0.0017919804956179246, 0.00018368826559889194, 0.3746835841076679, 1.590696751465318]
,
[0.1593593872646801, 3.0965616570412022e-05, 4.7608077176119086e-06, 0.013757065159432655, 1.072364982247259]
,
[0.15935971192682988, 3.4228786893989237e-05, 2.8175989802780335e-06, 0.011385902663771647, 1.0762239433773122]
,
[0.1593758710624088, 3.1730097257658988e-05, 6.5545372607421827e-06, 0.19480358030830433, 1.0732774861268992]
,
[0.15935651884191823, 3.2075768916173883e-05, 2.6894443902692268e-06, 0.011169712144620248, 1.0736994974496823]
,
[0.1593593872646801, 3.0965616570412022e-05, 4.7608077176119086e-06, 0.013757065159432655, 1.072364982247259]
,
[0.72806364396184653, 0.080927033958709829, 0.082024727906757688, 0.0003304829181641674, 2.282620340759594]
,
[0.34064008340950969, 0.031713563937392303, 0.0223935905703848, 0.5525150905432595, 3.191021756804023]
,
[0.34161716425171257, 0.032414962195661444, 0.023399763826767502, 0.5634559735427863, 3.228573480379]
,
[0.33995795036914717, 0.032291160309302944, 0.014503695651070611, 0.5517519130084575, 3.2425659662137543]
,
[0.53755813910874839, 0.12514260672326116, 0.047097530510313457, 0.0022522522522522522, 4.849281676080233]
,
[0.53892887245870857, 0.12723100136939183, 0.047871070696486759, 0.0003630422944273008, 4.914680204854179]
,
[0.52941013268525083, 0.12033870626971493, 0.044950934295866135, 0.00036251586006887804, 4.801391369341545]
,
[0.5153795221866847, 0.11396653431855266, 0.046028411270117815, 0.0017374383209396067, 4.797613736965006]
,
[0.55889931613495802, 0.13776801275023373, 0.054206231614929122, 0.0003675794890645102, 4.954346523167349]
,
[0.53892887245870857, 0.12723100136939183, 0.047871070696486759, 0.0003630422944273008, 4.914680204854179]
,
[0.53876191407701801, 0.12675358533640296, 0.048092146277654686, 0.0003630422944273008, 4.896575690597256]
,
[0.64579700029686937, 0.053345962571719745, 0.047671705312373282, 0.00021581957483543757, 2.1135534993967275]
,
[0.52907834506993823, 0.11839951044942501, 0.046693278117526091, 0.001802451333813987, 4.720197357775248]
,
[0.62431811267333093, 0.16822847351832676, 0.078460359627903944, 0.0002954864445593558, 4.830349593161275]
,
[0.52957671831590236, 0.1206620716356978, 0.044424337085019652, 0.00036251586006887804, 4.812745400588476]
,
[0.64778861076667615, 0.011264454903514588, 0.26034582337509793, 0.00017355085039916696, 1.3918887090929497]
,
[0.64767923033014785, 0.011511416466409427, 0.26619423461723268, 0.0001713355606956224, 1.3970897837418754]
,
[0.64175254514795532, 0.051344373338613858, 0.047562712202626603, 0.0015838339705079192, 2.091594563276403]
,
[0.74328372556577627, 0.069102582620664751, 0.082952746646336797, 0.0001621665450417579, 2.094372254494601]
,
[0.63983023392719118, 0.050957609005336219, 0.04065234770126492, 0.0002180787264202377, 2.0902782497935077]
,
[0.64175254514795532, 0.051344373338613858, 0.047562712202626603, 0.0015838339705079192, 2.091594563276403]
,
[0.39929495902359424, 0.088487529110910193, 0.022225937358985204, 0.0016210739614994933, 6.842658946475011]
,
[0.40318161986196532, 0.091372930642081962, 0.029342259032521321, 0.0016383370878558263, 6.991543657993919]
,
[0.40286945787178563, 0.092489700223200605, 0.029477042699685527, 0.0008298755186721991, 7.159524821606994]
,
[0.401527045553835, 0.092940206887656154, 0.022384335964308343, 0.0008262755629002272, 7.307506331212089]
,
[0.48221520941584561, 0.080925707098030486, 0.01508266157389335, 0.016811768237766436, 3.877246216887803]
,
[0.23300739937344839, 0.0081726649803679097, 0.00070589920573164966, 0.7233009708737864, 2.267880404181219]
,
[0.4889793426754816, 0.13379642486830962, 0.0079207484968624713, 0.0012550988390335738, 6.938143452247703]
,
[0.50805268679046123, 0.15157146566770596, 0.002286367854475147, 0.0015261350629530714, 7.558054436128668]
,
[0.50504588069443601, 0.14372144884265609, 0.002332370870321935, 0.4888972525404592, 7.020435652999047]
,
[0.49053398407596349, 0.13596678236015974, 0.0068673835378752004, 0.5062523683213338, 7.054927383254023]
,
[0.27047698059047881, 0.02400759815979293, 0.0042725763257732184, 0.1406003159557662, 3.6822411994354223]
,
[0.67217292360607472, 0.21411359416298198, 0.038240138048085716, 0.00030014256771966684, 5.418493234141116]
,
[0.66809561834310183, 0.20843134771175456, 0.055569614057154701, 0.0005965697240865026, 5.316112363334643]
,
[0.69764902288163122, 0.23441611695166623, 0.040989861350760971, 0.00030097817908201655, 5.535854638867057]
,
[0.69337536416934831, 0.23122440548075349, 0.039932976305992858, 0.0011285832518245428, 5.5253522283788445]
,
[0.48053616103332131, 0.078827555080480394, 0.014699769292604886, 0.00040342914775592535, 3.810804845605404]
,
[0.51893243284454049, 0.14486098229876093, 0.007011404157031503, 0.0013995801259622112, 6.503015780005906]
,
[0.51611281879296478, 0.14397569681830566, 0.0063953861901166996, 0.0024067388688327317, 6.552602133840095]
,
[0.52265570318341037, 0.14786059553298658, 0.021856594872657918, 0.002438599547117227, 6.567632701584826]
,
[0.30079480228240624, 0.022512205511218238, 0.00042758792096778651, 0.016516516516516516, 2.990535008572801]
,
[0.30656959740479811, 0.025225633729599333, 0.00052074639660009423, 0.014692653673163419, 3.1500163953105362]
,
[0.36561931104389456, 0.034065616542602442, 0.00073193209081989026, 0.5295319844676067, 3.0388637406298646]
,
[0.30523253105219622, 0.024888851231432006, 0.00049965741600376489, 0.014692653673163419, 3.1395734571173244]
,
[0.30228106501925794, 0.02294279475480349, 0.00029015539686061685, 0.016315633343221597, 3.0087064225809246]
,
[0.48449572183350859, 0.08057148632400099, 0.014649379545360155, 0.0008072653884964682, 3.8293932305935345]
,
[0.48696620229608523, 0.082309882547938931, 0.015050994484143265, 0.0008004802881729037, 3.8679773897921153]
,
[0.28412339537248588, 0.026648939499942827, 0.0040253434951236042, 0.652089407191448, 3.7009800669447657]
,
[0.28496156479277329, 0.02656759057204762, 0.0040076364850396805, 0.6479146459747818, 3.672807600295908]
,
[0.27750673534987835, 0.024513847513161952, 0.0040536738369991365, 0.6610337972166997, 3.589249226795383]
,
[0.23076358836711391, 0.0081276558884353922, 0.0011346229787721842, 0.004830917874396135, 2.2823193871783753]
,
[0.23009954177415121, 0.0067688972295314211, 0.00050627342206410546, 0.7085308056872038, 2.1131083582556887]
,
[0.74667089537876641, 0.017808021782196932, 0.00058715813729321711, 0.20097746402389358, 1.4352297290097118]
,
[0.46459021914407012, 0.015923283050662724, 0.0096104956720461029, 0.07748745012228087, 1.7457829468097172]
,
[0.46915422400128481, 0.016432642899682152, 0.019842029469490614, 0.07962922414422305, 1.75192535048515]
,
[0.46603526212803831, 0.014906446836800192, 0.034027862564102791, 0.00017277871366247678, 1.709953995454109]
,
[0.74667089537876641, 0.017808021782196932, 0.00058715813729321711, 0.20097746402389358, 1.4352297290097118]
,
[0.74667089537876641, 0.017808021782196932, 0.00058715813729321711, 0.20097746402389358, 1.4352297290097118]
,
[0.79130699331490484, 0.018730652999112182, 0.0025843522081647448, 0.18977700753966478, 1.4182461597025509]
,
[0.78526444941147622, 0.019630664985282237, 0.0014735307445837577, 0.19151016964319956, 1.43434362458419]
,
[1.2360091274851985, 0.11319166323186233, 0.037129035449204553, 0.13274704929414488, 1.7480015935515811]
,
[1.2379748172284306, 0.11372770880048684, 0.03880647583352842, 0.1327272446632812, 1.748796779378963]
,
[1.0687065973690613, 0.06124884507730273, 1.0261941877753638, 0.0006237784339002786, 1.6027241684534652]
,
[1.0719786963564104, 0.066016997091209076, 0.67377325492164508, 0.000951317367746205, 1.6304903448777237]
,
[1.0726105544893461, 0.060421845064782209, 0.68185690192755832, 0.0016887717274899085, 1.5946007712754786]
,
[0.46459021914407012, 0.015923283050662724, 0.0096104956720461029, 0.07748745012228087, 1.7457829468097172]
,
[0.46578048886757484, 0.014968271641939066, 0.034797974069617273, 0.009791711402190251, 1.7124764457384176]
,
[0.47125303755595782, 0.015662651510987502, 0.0092152255656893708, 0.00017202081451855674, 1.723199095190638]
             ]

############################ PREDICTION TEST 1 IMAGE ################
print("TRY IMAGE")
import numpy as np
from sklearn import svm, metrics
X = features
y = target
from sklearn.svm import SVC
C = 1000.0
clf = svm.SVC(kernel='rbf', C=C).fit(X, y)
#svm.SVC(kernel='linear', C=C).fit(X, y) #SVC()
#clf.fit(X, y)
print("predizione")

#fv is class 8 but show me 5
fv = [0.16666666666628771, 5.169878828456423e-26, 2.584939414228212e-22, 1.0, 1.0000000000027285]
print(fv)
print(clf.predict([fv]))

############### METRICS ##########

# We learn the digits on the first half of the digits

# Now predict the value of the digit on the second half:
import matplotlib.pyplot as plt

expected = y[26:]
predicted = clf.predict(X[26:])
print("expected")
print(len(expected))
print("predicted")
print(len(predicted))

print "Classification report for classifier %s:\n%s\n" % (
    clf, metrics.classification_report(expected, predicted))
print "Confusion matrix:\n%s" % metrics.confusion_matrix(expected, predicted) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-20T09:51:21.347

您在完整数据集上训练模型，然后在训练集的子集上计算得分，即数据集的所有末尾，除了 26 个第一个样本，其中包括来自类 0 的整个样本集。

您不能以这种方式评估模型：您需要随机打乱数据，然后在训练模型之前拆分训练集和测试集（否则整个数据集就是训练集，而您没有单独的测试集）。如果你这样做：

```
import numpy as np
from sklearn import svm, metrics
from sklearn.cross_validation import train_test_split
from sklearn.svm import SVC

X = features
y = target

X_train, X_test, y_train, y_test = train_test_split(X, y,
        test_size=0.25, random_state=42)

C = 1000.0
clf = svm.SVC(kernel='rbf', C=C).fit(X_train, y_train)
y_predicted = clf.predict(X_test)

print "Classification report for classifier %s:\n%s\n" % (
    clf, metrics.classification_report(y_test, y_predicted))
print "Confusion matrix:\n%s" % metrics.confusion_matrix(y_test, y_predicted)

print "Predicting on 1 sample"
print "Input features:"
fv = [0.16666666666628771, 5.169878828456423e-26, 2.584939414228212e-22, 1.0, 1.0000000000027285]
print fv
print "Predicted class index:"
print clf.predict([fv]) 
```

您将获得以下输出：

```
Classification report for classifier SVC(C=1000.0, cache_size=200, class_weight=None, coef0=0.0, degree=3,
  gamma=0.0, kernel=rbf, max_iter=-1, probability=False, shrinking=True,
  tol=0.001, verbose=False):
             precision    recall  f1-score   support

          1       0.50      0.25      0.33         4
          2       0.75      1.00      0.86         6
          3       1.00      1.00      1.00         2
          4       0.75      1.00      0.86         3
          5       1.00      0.88      0.93         8
          6       1.00      1.00      1.00         5
          7       0.75      0.75      0.75         8
          8       1.00      1.00      1.00         3

avg / total       0.84      0.85      0.83        39

Confusion matrix:
[[1 1 0 0 0 0 2 0]
 [0 6 0 0 0 0 0 0]
 [0 0 2 0 0 0 0 0]
 [0 0 0 3 0 0 0 0]
 [0 0 0 1 7 0 0 0]
 [0 0 0 0 0 5 0 0]
 [1 1 0 0 0 0 6 0]
 [0 0 0 0 0 0 0 3]]
Predicting on 1 sample
Input features:
[0.1666666666662877, 5.169878828456423e-26, 2.584939414228212e-22, 1.0, 1.0000000000027285]
Predicted class index:
[5] 
```

当然，这是一个单一的随机训练/测试拆分，并且由于您的数据集非常小，您获得的分数估计值会受到很大的方差。您可以通过迭代交叉验证计算此模型类和参数集的预期平均分数的估计值：

```
from sklearn.cross_validation import ShuffleSplit
from sklearn.cross_validation import cross_val_score
from scipy.stats import sem

params = dict(kernel='rbf', C=1000)
clf = svm.SVC(**params)
cv = ShuffleSplit(X.shape[0], n_iter=50)
cv_scores = cross_val_score(clf, X, y, cv=cv) 
```

这将输出：

```
print "Cross Validated test scores for SVC with params {0} on full dataset:".format(params)
print "Mean: {0:.3} +/-{1:.3}".format(np.mean(cv_scores), sem(cv_scores))
print "Standard deviation: {0:.3}".format(np.std(cv_scores))

Cross Validated test scores for SVC with params {'kernel': 'rbf', 'C': 1000} on full dataset:
Mean: 0.834 +/-0.0125
Standard deviation: 0.0872 
```

因此，您可以合理地期望总体上具有 83% 的预测准确度（或者略高一点，因为 CV 程序被低估了一点）。

如果您想显着提高这种性能水平，我的第一个建议是收集更多标记样本以获得更大的数据集。

第二个建议是通过对原始图像应用小的扰动（例如小的平移、旋转和一点均匀的随机噪声）从现有的数据中生成更多的标记数据，以便通过提取从现有图像中生成更多的标记数据这些额外样本的特征。

**编辑**：补充问题：

> 我还遗漏了 8/10 图像样本，因为我认为它们不属于任何类别。

您可能应该为不属于其他先前类的所有图像添加一个名为“其他”的附加类别。

> 我应该为每个类添加一个新类并通过小平移旋转创建新样本？

不，目标是通过从现有样本中构建新样本来为每个类添加更多样本，从而提高现有类的分类精度。

> 我收到了这个错误：TypeError: **init** () got an unexpected keyword argument 'n_iter' at this line cv = ShuffleSplit(X.shape[0], n_iter=50)

`n_iter`是 0.13 版本中的新名称。在 0.12 中是`n_iterations`：

[http://scikit-learn.org/0.12/modules/generated/sklearn.cross_validation.ShuffleSplit.html](http://scikit-learn.org/0.12/modules/generated/sklearn.cross_validation.ShuffleSplit.html)

# c# - Windows 应用商店：SecondaryTile.Exists(tileId) - TileId 似乎有一些未记录的限制？

> ID：14959981
> 
> 赞同：1
> 
> 时间：2013-02-19T14:33:05.593
> 
> 标签：c#, windows-store-apps, live-tile

任何人都可以阐明以下内容吗？

tileId 的确切规则是什么。长度限制，字符限制？

显然看过这里，但什么也没有：http: [//msdn.microsoft.com/library/windows/apps/BR242183](http://msdn.microsoft.com/library/windows/apps/BR242183)

找到这篇文章，但没有关于长度限制： [http](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/b3cb317c-edca-46c1-8dfa-7979f12c96b6/) ://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/b3cb317c-edca-46c1-8dfa-7979f12c96b6/ 他关于字符限制的断言也没有'不适合我——我可以使用他说被禁止的字符。

谢谢，

乔恩

当 i == 65 时：

[System.ArgumentException] = {"参数不正确。\r\n"}

```
 string concat = "";

        for (int i = 0; i < 70; i++)
        {
            try
            {
                var boo = SecondaryTile.Exists(concat);
                Debug.WriteLine("{0} {1}", boo, i);
                concat = concat + ".";
            }
            catch (Exception ex)
            {
                continue;
            }
        }

        return; 
```

输出：

```
False 0
False 1
... Truncated for brevity
False 63
False 64 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T14:39:29.100

它记录在[这个构造函数重载](http://msdn.microsoft.com/en-US/library/windows/apps/hh701602)中：

> 将唯一标识应用程序包中的磁贴的字符串。选择一个对您的应用具有描述性和意义的唯一 ID。它限制为 64 个字符，并且必须以数字或字母开头，并由字符 az、AZ、0-9、句点 (.) 或下划线 (_) 组成。如果您提供与现有辅助磁贴的 ID 相同的 ID，则现有辅助磁贴将被覆盖。可以通过 TileId 属性设置或检索。

（它也记录在[`TileId`属性](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.startscreen.secondarytile.tileid.aspx)中。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-19T14:39:40.200

[根据文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh701602.aspx)，id 的最大长度为 64 个字符

> 将唯一标识应用程序包中的磁贴的字符串。选择一个对您的应用具有描述性和意义的唯一 ID。它限制为 64 个字符，并且必须以数字或字母开头，并由字符 az、AZ、0-9、句点 (.) 或下划线 (_) 组成。如果您提供与现有辅助磁贴的 ID 相同的 ID，则现有辅助磁贴将被覆盖。可以通过 TileId 属性设置或检索。

# hudson - 构建工作流以通过功能构建构建 Eclipse rcp 应用程序

> ID：14959984
> 
> 赞同：0
> 
> 时间：2013-02-19T14:33:16.720
> 
> 标签：hudson, eclipse-rcp, maven-3, tycho

我正在寻找一个构建工作流程，通过使用 maven 3 和 tycho 和 hudson的**功能构建来构建一个 eclipse rcp 应用程序。**

我的例子：

**3 特点**

*   特征 A
*   特征 B
*   特征 C

**2 产品**

*   产品 1 - 基于功能 A 和 B
*   产品 2 - 基于特性 B 和 C

对于每个功能和产品，都存在一项 Hudson 工作。我要求的工作流程是

1.  每个功能都将被构建和部署，然后
2.  每个产品都将基于已部署的功能创建。

有没有*最好的实用*工作流程（最好有教程）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T12:12:47.057

您应该能够通过在所有作业中使用相同的本地 Maven 存储库来使其工作。例如，当您使用 调用功能 A 构建时`mvn clean install`，构建结果将对在同一本地存储库上运行的所有 Tycho 构建可见。

请注意，您可能应该在共享的本地 Maven 存储库上放置一个 Hudson 锁，因为 Maven 和 Tycho 不会以多进程安全的方式访问该存储库。

# java - servlet 上的 Tomcat 错误 500：“响应后无法转发”

> ID：14959986
> 
> 赞同：0
> 
> 时间：2013-02-19T14:33:26.197
> 
> 标签：java, servlets, runtime-error

当我尝试验证请求参数时，Tomcat 向我显示错误 500。

堆栈跟踪：

```
HTTP Status 500 - Cannot forward after response has been 
type Exception 
message Cannot forward after response has been 
description The server encountered an internal error that prevented it from 
fulfilling this request. exception

java.lang.IllegalStateException: Cannot forward after response has been committed 
```

这是我的 servlet 的一部分（没有 PrintWriter.flash 或类似的东西）。

此代码位于 servlet 的开头。为什么我会收到`IllegalArgumentException`“已经提交”的回复？

```
String login = req.getParameter("login");
String password = req.getParameter("password");

if (login.length() == 0 || password.length() == 0) {
    req.setAttribute("wrong", "Your login or password is empty");

    RequestDispatcher rd = req.getRequestDispatcher("jsp/index.jsp");
    rd.forward(req, resp);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:41:45.400

`return`在调度页面之后添加。这将解决您的异常。

```
 RequestDispatcher rd = req.getRequestDispatcher("jsp/index.jsp");
    rd.forward(req, resp);
    return; 
```

**原因：**

当您使用 ' `forward`' 或 ' `include`' 时，将相同的`request`and`response`传递给该资源。如果关闭输出流，则不能使用它`JSP`来返回数据。一旦任何数据被写入`client`，响应已经`committed`

# angularjs - 在 Angular.js 中观察 $locationProvider

> ID：14959987
> 
> 赞同：5
> 
> 时间：2013-02-19T14:33:28.897
> 
> 标签：angularjs, window.location

我需要观察 URL 栏上的变化并据此执行某些操作。我想知道添加手表以查看更改的最佳方式是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-19T15:45:29.517

事件存在，它们只是由于某种原因没有记录。

尝试以下事件：`$locationChangeStart`和`$locationChangeSuccess`

```
scope.$on('$locationChangeStart', function (event, newLoc, oldLoc){
   console.log('changing to: ' + newLoc);
});

scope.$on('$locationChangeSuccess', function (event, newLoc, oldLoc){
   console.log('changed to: ' + newLoc);
}); 
```

或者您可以按照 Anders 的建议通过将函数传递给 $watch 的第一个参数来 $watch 任何您想要的值：

```
scope.$watch(function() { return $location.path(); }, function(newLoc, oldLoc){
   console.log(newLoc, oldLoc);
}); 
```

然而，这会在你的 $digest 上产生更多的开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-19T14:38:33.287

假设您在控制器中请求了 $location 对象，您可以这样做：

```
$scope.$watch(function() { return $location.path() }, function() {
    // Do stuff when the location changes
}); 
```

# jquery - 使用 jquery javascript 搜索 jstree 节点

> ID：14959988
> 
> 赞同：7
> 
> 时间：2013-02-19T14:33:29.573
> 
> 标签：jquery, jstree

我正在使用 jstree 插件来构建我的树。我的网页中有一个搜索框，我需要用户能够在其中搜索 jstree 节点。

```
<fieldset id="search">

    <input type="text" name="search_field" id="search_field" value="" />
    <button id="search_tree">Search</button>

  </fieldset> 
```

单击搜索时，jstree 节点应展开，如果找到，则应突出显示节点。如果未找到，则应向用户显示错误，如“未找到”。我的代码展开下面的所有节点。有没有一种简单的方法可以搜索 jstree 中的所有节点？

```
<script type="text/javascript"> 
     $(document).ready(function(){

         $("#search_tree").click(function () {  
    var value=document.getElementById("search_field").value; 
         $("#tree").jstree("search",value);  

     });  

     $("#tree").jstree({  

         "xml_data" : {  

             "ajax" : {  

                 "url" : "jstree.xml" 

             },  

             "xsl" : "nest"

         },  
         "themes" : {  

             "theme" : "classic",  

            "dots" : true,  

             "icons" : true 

         },  

             "search" : {  

                 "case_insensitive" : true,  

                 "ajax" : {  

                     "url" : "jstree.xml" 

                 }  

             },  
              "plugins" : ["themes", "xml_data", "ui","types", "search"] 

         });  

 }); 

</script> 
```

我收到此错误：

Instances[...] 为 null 或不是对象。这是一个jstree错误。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-19T17:04:25.423

I have added this piece of code to my function:

```
"search" : {  

                 "case_insensitive" : true,  

                 "ajax" : {  

                     "url" : "jstree.xml" 

                 }  

             },  
              "plugins" : ["themes", "xml_data", "ui","types", "search"] 
```

and

created this function and assoicated with my click button:

```
function myFunction()
{
$(document).ready(function(){

var value=document.getElementById("search_field").value; 

    $("#search_tree").click(function () { 

        $("#tree").jstree("search",value) 
 }); 

 }); 
} 
```

# javascript - 在 JavaScript/Web 浏览器中捕获 2 个或更多键盘的事件

> ID：14959989
> 
> 赞同：6
> 
> 时间：2013-02-19T14:33:30.797
> 
> 标签：javascript, keyboard-events

我正在编写一些执行简单键盘事件捕获的测试应用程序。

我对这种基本方法没有任何问题。

**但现在我需要更好的应用程序体验，我想连接至少两个或更多 USB 或 PS/2 键盘，区分哪个键盘是按键事件的来源，以便能够使用 JavaScript 在本地使用 Web 浏览器（和 HTML5），就好像它是一个游戏控制台，同时为多个玩家提供多个控制器。**

我知道即使在 Windows 或 Linux 下，正常的行为是让多个键盘触发相同的事件。但是，我也知道完全有可能知道是哪个特定的键盘硬件设备触发了该事件。

有可能还是 JavaScript 的限制？将来可能会支持区分相同基本类型的多个输入设备，是否有一些替代方案，至少在 HTML5 中，或者在 Web 浏览器的上下文中，JavaScript 会几乎失去希望和 HTML5？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-19T22:04:57.980

不，在当前的浏览器环境中，您不能支持特定类型的多个不同输入设备。我也不知道任何即将推出的规范会启用这样的功能。通常假设浏览器一次只有一个用户。我认为不会支持这样的事情。

也就是说，目前正在开发[游戏手柄支持规范。](http://www.w3.org/TR/gamepad/)非开发版本的浏览器还不支持它，但 Firefox 和 Chrome 都在开发它。如果你对这项技术感兴趣，已经有一个有趣的库叫做[gamepad.js 。](http://www.gamepadjs.com/)

目前，要支持多个玩家，您可能必须像大多数游戏一样支持多个基于键盘的玩家，将每个玩家映射到不同的键组。

## 2015-05-04 更新

自此答案以来[，对 Gamepad API 的支持变得更好，Firefox 和 Chrome 现在都支持返回多个版本，Opera 也支持它。](http://caniuse.com/#search=gamepad)但并非所有浏览器都这样做，Safari 和 IE 没有。微软的新浏览器 Edge 看起来将支持 Gamepad API，但可能需要很长时间才能让大多数 IE 用户迁移到 Edge 或其他浏览器。

# c++ - cv::Mat 框架和 SCILAB

> ID：14959990
> 
> 赞同：0
> 
> 时间：2013-02-19T14:33:37.427
> 
> 标签：c++, opencv, image-processing, scilab

我在opencv中有一个框架，我不想使用imwrite（）保存，我使用此代码提取每个通道并保存它，然后打开三个文件并首先组合一个新框架，这里是c ++代码：

```
 .........
  mean_fb.open("d:\\mean_blue",ios::out);
ostream osb(&mean_fb);
mean_fg.open("d:\\mean_green",ios::out);
ostream osg(&mean_fg);
mean_fr.open("d:\\mean_red",ios::out);
ostream  osr(&mean_fr);
resultframe *= 1.0/255.0; // adjusting the colors of the mean value 
for(int row = 0; row < resultframe.rows; row++) {
    for (int col = 0; col < resultframe.cols; col++) {
    //  std::cout << resultframe.at<cv::Vec3f>(row, col)[1] <<std::endl;
        std::cout << resultframe.at<cv::Vec3f>(row, col)[2] <<std::endl;

        //fwrite(&resultframe.at<cv::Vec3f>(row,col )[0],sizeof(float),1,inpR);
        osr<< resultframe.at<cv::Vec3f>(row, col)[0]<<"\n";
        osg<< resultframe.at<cv::Vec3f>(row, col)[1]<<"\n";
        osb<< resultframe.at<cv::Vec3f>(row, col)[2]<<"\n";
    }
}
 ....... 
```

保存的文件是正确的，所以我使用 SCILAB 打开它们，框架是 1920*1080 ，这是 SCILAB 代码：

```
 clear 
  clc
  stacksize('max');
  cd 'd:\'
  width = 1080;
  height =1920 ;
  im = zeros(width, height);
     // read the  values of the red channel  

   red  = mgetl('mean_red'); // read the file as  
   red  = matrix(red,[width, height]);
   red  = strtod(red);
   im(:,:,3) = red;//  because opencv defaullt color Model is BGR 
   clear red;  // clear red to get enough stack 

  // read the  values of the green channel  

 green  = mgetl('mean_green'); // read the file as 
 green  = matrix(green,[width,height]);
 green  = strtod(green);
 im(:,:,2) = green;
  clear green;

   // read the  values of the blue channel  

  blue  = mgetl(mean_blue'); // read the file as 
  blue  = matrix(blue,[width, height]);
  blue  = strtod(blue);
  im(:,:,1) =blue ; 
  clear blue;

 imshow(im);///////////////////////////////////////// 
```

这是我得到的条纹图像的一部分![在此处输入图像描述](../Images/cbfda008a1e691137ad7b1ab70c535d3.png)：感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-19T14:43:17.390

看来您的宽度和高度参数颠倒了。图像可能被转置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T09:09:20.077

在 Ted W 的建议之后，我想也许我不得不在 SCILAB 中而是在 c++ 中切换宽度和高度，这很有效，所以如果有人需要，这里是代码：

```
mean_fb.open("d:\\mean_blue",ios::out);
ostream osb(&mean_fb);
mean_fg.open("d:\\mean_green",ios::out);
ostream osg(&mean_fg);
mean_fr.open("d:\\mean_red",ios::out);
ostream  osr(&mean_fr);
  adjusting the colors of the mean value 
for (int col = 0; col < resultframe.cols; col++) {
    for(int row = 0; row < resultframe.rows; row++) {
    //  std::cout << resultframe.at<cv::Vec3f>(row, col)[1] <<std::endl;
        std::cout << resultframe.at<cv::Vec3f>(row, col)[2] <<std::endl;

        //fwrite(&resultframe.at<cv::Vec3f>(row,col )[0],sizeof(float),1,inpR);
        osb<< resultframe.at<cv::Vec3f>(row, col)[0]<<"\n";
        osg<< resultframe.at<cv::Vec3f>(row, col)[1]<<"\n";
        osr<< resultframe.at<cv::Vec3f>(row, col)[2]<<"\n";
    }
}
mean_fb.close();
mean_fr.close();
mean_fg.close();

std_fb.open("d:\\std_blue",ios::out);
ostream std_osb(&std_fb);
std_fg.open("d:\\std_green",ios::out);
ostream std_osg(&std_fg);
std_fr.open("d:\\std_red",ios::out);
ostream  std_osr(&std_fr);

for (int col = 0; col < deviationframe.cols; col++)   {
    for(int row = 0; row < deviationframe.rows; row++) {

        std::cout << deviationframe.at<cv::Vec3f>(row, col)[2] <<std::endl;
        std_osb<< deviationframe.at<cv::Vec3f>(row, col)[0]<<"\n";
        std_osg<< deviationframe.at<cv::Vec3f>(row, col)[1]<<"\n";
        std_osr<< deviationframe.at<cv::Vec3f>(row, col)[2]<<"\n";
    }
}
std_fb.close();
std_fr.close();
std_fg.close(); 
```

# jquery - Google Prettify 切换行数

> ID：14959993
> 
> 赞同：0
> 
> 时间：2013-02-19T14:33:39.243
> 
> 标签：jquery

我正在使用 Google Prettify，想知道是否可以切换 linenums 类？

```
$('.hide').on('click',function(e){
        $('ol, pre').toggleClass('linenums');

    }); 
```

上面切换了类，但行号仍然显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:38:00.410

看起来你需要类似的东西：

```
$('.hide').on('click',function(e){
    $('ol.linenums li').toggleClass("nolinenums");
}); 
```

并且在你的 CSS 中有类似的东西

```
li.nolinenums 
{
    list-style-type:none;
} 
```

# php - 检查登录尝试

> ID：14959996
> 
> 赞同：1
> 
> 时间：2013-02-19T14:33:52.147
> 
> 标签：php, login

我有一个登录表单，我想检查失败的登录尝试并根据尝试采取适当的措施。

**我是这样想的：**

1.  连续失败尝试之间的最短允许时间为 1 秒。

2.  当尝试失败时，首先删除数据库中 1 秒前发生的旧条目。

3.  如果大于 1 秒，则在特定次数的尝试后（比如说 3 次），向用户显示一条消息，询问他是否要重置密码或重试（类似于 facebook）。

4.  如果最后一次登录尝试发生在不到 1 秒内，则阻止该 IP 地址 15 分钟。

我**已经浏览了该网站上的其他帖子，**并且我看到人们使用不同的方法，例如显示验证码或使用 cookie 和其他方法。

所以我的问题是解决这个问题的最佳方法（或标准方法）是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T14:41:38.357

在您的用户/成员表上添加两个新列：“上次登录日期（时间）”和“登录尝试次数”。

对于登录尝试，将“上次登录日期”设置为当前日期并增加“登录尝试次数”。然后，您可以检查每次尝试是否已超过最大尝试次数，或者尝试是否发生得太快。尽管从事物的声音来看，您可能希望对定时尝试进行客户端和服务器端验证的混合。

成功登录后，您清除“登录尝试次数”。