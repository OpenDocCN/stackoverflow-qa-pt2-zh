# StackOverflow 问答 15931000-15931999

# erlang - Mnesia 中的 MatchHead 选择

> ID：15931001
> 
> 赞同：1
> 
> 时间：2013-04-10T16:08:13.690
> 
> 标签：erlang, mnesia

我在使用时遇到了一些问题，`mnesia:select/2`但我认为它们与 MatchHead 有关。在我的代码中，我有以下记录：

```
-record(pet_info, {name, id, type}). 
```

我在 Mnesia 表（即 pet_table）中使用此记录放置了一些值。我使用 tv:start()) 检查了它们实际上是否在表中。

我想检索所有 ID，但我的代码总是返回一个空列表。

这是我的代码的显着部分

```
F = fun() ->
            Pet = #pet_info{id = '$1', _ = '_'},
            mnesia:select(pet_table, [{Pet, [], ['$1']}])
    end,
Reply = case mnesia:transaction(F) of
            {atomic, ResultOfFun} ->
                ResultOfFun;
            {aborted, _Reason} ->
                {error, aborted}
        end,
Reply. 
```

你能告诉我错误在哪里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:09:50.493

我找到了解决我的问题的方法。

该表创建为：

```
mnesia:create_table(pet_table, [{disc_copies, [node()]},
                                {type, set},
                                {attributes, record_info(fields, pet_info)}]) 
```

这没有用。

另一方面，通过将表的名称更改为与它工作的记录相同的名称。

```
mnesia:create_table(pet_info, [{disc_copies, [node()]},
                                {type, set},
                                {attributes, record_info(fields, pet_info)}]) 
```

# ios - 从 iPhone 应用程序下载的媒体文件的加密

> ID：15931008
> 
> 赞同：-1
> 
> 时间：2013-04-10T16:08:23.710
> 
> 标签：ios, security, encryption, download, media

我正在开发一个 iPhone 应用程序，其中包含通过网站下载的敏感媒体（视频）文件。我需要确保数据被安全加密并且没有人访问它。我打算使用现有的加密机制。我曾尝试搜索好的应用程序/文章，但其中大多数都在谈论加密图像，这不是 100% 安全的。我还研究了 Crypo API。请有人指导我使用什么是最好的 API。如果他们是一个很好的例子，那将是很好的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T16:45:03.177

加密很简单，使用 CommonCrypto 和 AES。困难的部分是处理钥匙。“处理密钥”是指安全地创建密钥并将其提供给用户，处理他们的生命周期。

如果媒体文件有任何实际价值，请考虑雇用在该领域具有丰富经验的人。完全使安全无用的错误非常容易。

参见Rob Napier 的[RNCryptor](https://github.com/rnapier/RNCryptor)。

# javascript - 透明的 HTML

> ID：15931011
> 
> 赞同：1
> 
> 时间：2013-04-10T16:08:24.253
> 
> 标签：javascript, jquery, html, css

我想做的是在 html 文档中创建一个 'div' 元素，并使用 CSS 或 Javascript/JQuery 更改背景透明度，使其看起来像Android 中的[Simple Calendar Widget](https://play.google.com/store/apps/details?id=com.anod.calendar)或[Glass Widgets](https://play.google.com/store/apps/details?id=dk.nicolai.buch.andersen.glasswidgets)。有谁知道这样做的方法？我已经尝试过 css Opacity 功能，但它与所有文本混淆，如果我制作第二个“div”并设置它的透明度，我需要手动调整它的大小，我不希望这样做。

如果有一个简单的方法可以做到这一点，我很抱歉，我浪费了大家的时间，但我真的坚持这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:10:47.723

`rgba(0,0,0,0.5)`如果您不希望不透明度影响后代文本节点，则应使用 alpha 值。

[http://www.w3.org/TR/css3-color/#rgba-color](http://www.w3.org/TR/css3-color/#rgba-color)

唯一的缺点是不支持低于 IE 9 ( [http://caniuse.com/css3-colors](http://caniuse.com/css3-colors) )

# eclipse - 提供的依赖项显示在部署程序集部分

> ID：15931012
> 
> 赞同：1
> 
> 时间：2013-04-10T16:08:27.030
> 
> 标签：eclipse, gradle

我有两个模块 A 和 B。模块 A 是通用的，可以包含在许多不同的项目中。我通过以下方式配置了一个自定义依赖项：

**build.gradle（模块 A）**

```
configurations { providedCompile }

eclipse.classpath.plusConfigurations += configurations.providedCompile

sourceSets {
    main { compileClasspath += configurations.providedCompile }
    test { compileClasspath += configurations.providedCompile }
} 
```

模块 A 对某些库（例如 com.test.gradle.C）有一个自定义的“providedCompile”依赖。像这样：

**build.gradle（模块 A）**

```
providedCompile "com.test.gradle.C:common-tests:${myTestsVersion}" 
```

现在，在模块 B 中，我定义了对模块 A 的依赖。

**build.gradle（模块 B）**

```
compile project(':moduleA') 
```

在模块 B（一个 Web 项目）中，我想使用不同版本的库 com.test.gradle.C，例如

```
compile "com.test.gradle.C:common-tests:${myTestsVersion}" 
```

问题是，在 Eclipse 部分部署程序集中我可以看到模块 A 中的库。这是因为 .classpath 文件包含

```
<classpathentry ...>
    <attributes>
        <attribute .../>
    </attributes>
</classpathentry> 
```

为了摆脱属性元素，我在 gradle 中编写了以下内容：

**build.gradle（模块 A）**

```
eclipse {

    classpath.file {
        // Classpath entry for Eclipse which changes the order of classpathentries; otherwise no sources for 3rd party jars are shown
        withXml { xml ->
            def node = xml.asNode()
            def provided = node.findAll { it.@path.contains('com.test.gradle.C') }

            provided.each{ dep ->
                dep.children().clear()
            }
        }
    }
} 
```

这就是我解决问题的方法，但我认为必须有更好的方法。有人可以帮忙吗？

# jquery - 在 content_for 标记中使用 jQuery 引用 Cookie -- 未捕获的 ReferenceError: $ 未定义

> ID：15931014
> 
> 赞同：0
> 
> 时间：2013-04-10T16:08:28.973
> 
> 标签：jquery, ruby-on-rails, cookies

我试图在`content_for`标签内引用我的 cookie。我不断收到错误 - `Uncaught ReferenceError: $ is not defined`。

我有以下代码片段：

```
<% content_for :script_onload do %>
  //irrelevant code
  var mixpanelCookie = JSON.parse($.cookie('mp_mixpanel_development'));
  mixpanel.people.identify(mixpanelCookie.distinct_id);
<% end %> 
```

我尝试将代码包装在`content_for`标签内

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script> 
```

有没有办法让我在没有 jQuery 的情况下引用 cookie 或在`content_for`标签中包含 jQuery？

# python - Jinja2：Flask 的 url_for() 结合 Knockout 的 attr 绑定

> ID：15931015
> 
> 赞同：2
> 
> 时间：2013-04-10T16:08:30.943
> 
> 标签：python, knockout.js, flask, jinja2

我在以 Jinja2 作为模板引擎的 Web 应用程序中同时使用 Flask 和 Knockout。在我的 Flask 应用程序中，我有两条路线：`/accounts/`和`/accounts/<int:acc_id>/`，看起来像这样：

```
@app.route("/accounts/")
@login_required
def accounts():
    return render_template("accounts.html")

@app.route("/accounts/<int:acc_id>/")
@login_required
def account(acc_id):
    return render_template("account.html",
        account_id=acc_id) 
```

该`/accounts/`路由加载一个带有 Knockout 视图模型的 HTML 页面。视图模型然后 AJAX 将帐户列表加载到 an 中`observableArray`并呈现如下内容：

```
<!-- ko foreach: accounts -->
    <span data-bind="text: name></span>
<!-- /ko --> 
```

该`/accounts/<int:acc_id>/`路由显示有关单个帐户的信息。

我要做的是`href`在上面的 HTML 片段中使用 为每个帐户创建一个属性`url_for()`，将帐户的 id 作为参数传递。我在使用`url_for()`Knockout 模型中的参数进行 Python 调用时遇到问题。

到目前为止我尝试过的几种变体：

**将 id 连接到 url_for 函数调用中：**

```
<a data-bind="attr: { href: '{{ url_for('account', acc_id=' + id() + ' }}'}">
    <span data-bind="text: name"></span>
</a> 
```

这会产生 a `ValueError: invalid literal for int() with base 10: '+ id() +'`，因为它将对 id() 的调用读取为字符串文字。

**在视图模型中创建一个返回 url_for 字符串的函数：**

```
self.accountUrl = function(account_id) {
    return '{{ url_for("admin.account", acc_id=' + account_id + ') }}';
}; 
```

并这样称呼它：

```
<a data-bind="attr: { href: $root.accountUrl(id()) }">
    <span data-bind="text: name"></span>
</a> 
```

这导致 href 属性被设置为从 返回的字符串文字`accountUrl()`，即 HTML 如下所示：

```
<a href='{{ url_for("account", acc_id=1) }}'> 
```

我觉得我必须在这里忽略一些东西。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T05:16:17.433

当生成 HTML 时，您的 python 代码 ( `url_for`) 在服务器端运行，但在呈现页面时，Knockout 代码在浏览器中运行。所以你不能将变量从 Knockout 传递给 python`url_for`方法。

您可以做的是仅生成`/accounts/`并使用 KO 构建 URL 的其余部分：

```
<a data-bind="attr: { href: '{{ url_for('account') }}' + '/' + id() }">
    <span data-bind="text: name"></span>
</a> 
```

# .net - 实体框架 4.1 T4 输出到 IDbset

> ID：15931016
> 
> 赞同：3
> 
> 时间：2013-04-10T16:08:36.810
> 
> 标签：.net, c#-4.0, entity-framework-4.1

我想让 Visual Studio 创建的 T4 模板将我的实体输出为 IDbset 而不是 DbSet 知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:52:30.970

我假设您已经有一个 t4 模板，可以生成一个`DbContext`. 所以只需编辑上下文的 T 模板，它可能命名为`Yourmodelname.Context.tt`. 里面有一个这样的块（我使用的是 EF 5）：

```
public string DbSet(EntitySet entitySet)
{
    return string.Format(
        CultureInfo.InvariantCulture,
        "{0} DbSet<{1}> {2} {{ get; set; }}",
        Accessibility.ForReadOnlyProperty(entitySet),
        _typeMapper.GetTypeName(entitySet.ElementType),
        _code.Escape(entitySet));
} 
```

现在更改`"{0} DbSet<{1}>`，`"{0} IDbSet<{1}>`上下文将具有`IDbSets`.

旁注：如果这是模拟上下文的操作的一部分，您应该知道这是非常没有希望的。

# iphone - 是否有替代设置 iOS 6.1 的 UIApplication idleTimerDisabled 来简单地表示用户已经主动做了某事？

> ID：15931017
> 
> 赞同：3
> 
> 时间：2013-04-10T16:08:41.427
> 
> 标签：iphone, ios, xcode, cocoa-touch, external-accessory

我有一个应用程序，如果它有前台，它可能会从硬件附件接收定期更新。该硬件配件上有一个物理硬件按钮。用户认为这是“与设备的交互”（在这种情况下是 iPhone 或 iPad 触摸），我希望按下这些硬件按钮来重置 UIApplication 内的计数器或计时器机制，这样它就不会在用户时立即进入睡眠状态正在积极使用该应用程序。

我怎么做？目前我只能完全禁用定时器，然后从一些内部辅助定时器重新启用它。所有这些计时器到计时器的东西似乎都很愚蠢。

我正在寻找类似的方法 `[UIApplication userDidSomethingSoPleaseDontGoToSleepYouSillyThing];`

现在，如果我的应用程序禁用空闲计时器然后忘记重新启用它，用户的设备只会耗尽电池并关闭。这对于电池寿命测试很有用，但可能会让最终用户感到不安。我宁愿不碰这个 idleTimerDisabled 并简单地告诉应用程序保持清醒至少一段时间，然后如果用户再次按下按钮，告诉 UIApplication 再次重置其内部计时器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T15:00:08.280

也许我不明白你...但是

```
/* Block idleTimer */
application.idleTimerDisabled = YES;

/* DO ALL YOUR STUFF */
/* AND IF SOMETHING APPEN */

/* Restore idleTimer */
application.idleTimerDisabled = NO; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-25T14:50:48.917

也许尝试以下方法来重置空闲计时器：

```
[UIApplication sharedApplication].idleTimerDisabled = YES;
dispatch_after(dispatch_time(DISPATCH_TIME_NOW, (int64_t)(0.5 * NSEC_PER_SEC)), dispatch_get_main_queue(), ^{
  [UIApplication sharedApplication].idleTimerDisabled = NO;
}); 
```

其中 0.5 为 0.5 秒。请注意，我自己没有尝试过这段代码。我不确定是否存在（m）gcd 块不会执行的任何条件。

# css - 网络安全字体列表和导入字体？

> ID：15931022
> 
> 赞同：3
> 
> 时间：2013-04-10T16:09:05.790
> 
> 标签：css, webfonts, font-family

我正在为我的网站制作自己的文本编辑器。此文本编辑器基于具有类似布局和功能的 Microsoft Word 2010。我目前正在处理您可以选择的字体类型的下拉列表，我想知道网络上是否有可以使用的安全字体。

* * *

![在此处输入图像描述](https://i.stack.imgur.com/dKL5k.gif)

# 衬线字体

*   格鲁吉亚，衬线
*   “Palatino Linotype”，“Book Antiqua”，Palatino，衬线
*   “时代新罗马”，时代，衬线

# 无衬线字体

*   Arial, Helvetica, sans-serif
*   “Arial Black”，小工具，无衬线
*   “Comic Sans MS”，草书，无衬线
*   Impact、木炭、无衬线字体
*   “Lucida Sans Unicode”、“Lucida Grande”、无衬线字体
*   Tahoma，日内瓦，无衬线字体
*   “Trebuchet MS”，黑体，无衬线
*   Verdana，日内瓦，无衬线

* * *

[单击此处查看此页面。](http://www.w3schools.com/cssref/css_websafe_fonts.asp)

* * *

以上内容是 w3schools.com 上列出的一些您可以使用的字体的预览。它列出了诸如“Tahoma，Geneva，sans-serif”之类的字体，我不知道其中的哪一部分是实际的字体名称。在我的编辑器上，我只想在列表“Arial、Arial Black、Arial Narrow”等中显示最常用字体的列表。其中一些字体不在安全的网络字体上，因此我必须导入字体。

我不仅想知道是否有更好的网络安全字体类型列表，包括它们的简化名称以及如何导入字体。另外，关于导入字体，一旦我导入它们，它们会在所有应用程序/设备上正确显示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:11:14.503

我会看看谷歌网络字体是这样的：

[谷歌网络字体](http://www.google.com/fonts/)

希望这可以帮助

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T16:16:42.730

You can check which fonts work with which OS [here](http://cssfontstack.com/) and [here](http://www.awayback.com/revised-font-stack/).

These websites have the list of web safe fonts along with which OS it can be used with. It is always best and safe to choose fonts that can work on all types of OS.

As mentioned by @Stefen V., [Google fonts](http://www.google.com/fonts/) are awesome. However, it has a drawback that it may effect the page load time (makes the page load slower than using web safe fonts).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:17:41.993

您给出的上述示例是字体树的示例。

所以“Georgia, serif”意味着如果它可用，则使用 georgia，如果它不可用，则使用任何可用的“serif”字体。

“Arial, Helvetica, sans-serif”意味着如果 Arial 可用，则使用 Arial，如果不可用则使用 Helvetica，最后如果不可用，则使用可用的 ans sans-serif 字体。

Stefan V. 提到的 Google 字体是一个不错的选择，尽管我不能 100% 确定您是否能够将它们与您的编辑器集成。不过，一切皆有可能，所以您也许可以。

您可以下载单独的 Google 字体以在您的网站上使用，也可以仅链接到托管在 Google 网络服务器上的它们。

# javascript - 选择 div 中的链接一组“动画”

> ID：15931023
> 
> 赞同：0
> 
> 时间：2013-04-10T16:09:08.607
> 
> 标签：javascript, jquery, mouseevent

我试图更改 div 中链接的颜色（鼠标悬停/鼠标悬停），但它不起作用......为什么？

html代码：

```
 <div id="Navigation">

            <a href="#">Products</a>
            <a href="#">Projects</a>
             <a href="#">Tutorials</a>
              <a href="#">Forum</a>
               <a href="#">Contact</a>

        </div> 
```

js代码：

```
$('#Navigation a').mouseover(function() {

   $(this).css("color", "#75c3ff");
});

$('#Navigation a').mouseout(function() {

   $(this).css("color", "#c5c5c5");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:12:28.683

您不应该将 JS 用于您可以通过 CSS 实现的目标。

```
#Navigation a { color: #c5c5c5 }
#Navigation a:hover { color: #75c3ff } 
```

请注意 - 您的代码[正在运行](http://jsfiddle.net/T2DuR/)

# iphone - iOS - 定位 UIViews

> ID：15931025
> 
> 赞同：0
> 
> 时间：2013-04-10T16:09:11.697
> 
> 标签：iphone, ios, ipad, interface-builder

我有一个 UIView，在界面生成器中我将它的位置设置为 160、57。

在应用程序生命周期的某个时刻，UIView 可能会移动，因此我有一个按钮可以将其放回原来的位置。所以我使用以下代码：

```
[self.myView setCenter:CGPointMake(160, 57)]; 
```

但是，当 UIView 向后移动时，它与应用程序首次加载时的位置并不完全相同。一侧是一点点。

知道这是为什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:21:43.473

我已经通过使用解决了我的问题：

```
[self.myView setCenter:CGPointMake(159.5, 57)]; 
```

我没有意识到 CGPointMake 会接受浮点值，所以我认为我必须使用 159（太少）或 160（太多）。不过 159.5 刚刚好。

它仍然没有解释为什么 160 在界面生成器中工作，但我可以在视图加载时设置这个值。

感谢大家的回答。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:15:15.633

尝试使用`view.bounds.origin`而不是设置视图的位置`view.center`。

# css - 编写特定的第 n 个子选择器

> ID：15931028
> 
> 赞同：1
> 
> 时间：2013-04-10T16:09:27.010
> 
> 标签：css, css-selectors

在以下情况下，我需要一些帮助来编写 CSS 中的 nth-child 选择器

孩子 #1、#4、#7、#10，... 应该有特定的 css
孩子 #2、#3、#5、#6，... 应该有一些其他特定的 css

第一个有这个 (:nth-child(3n-2)) ，但第二个想不出什么。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:14:23.230

孩子 #2、#3、#5、#6、... 只是孩子 #1、#4、#7、#10...以外的任何东西吗？

如果是这样，您可以为所有子项创建一个规则，然后覆盖子项#1、#4、#7、#10...的样式，如下所示：

```
.child {
    /* All children */
}

.child:nth-child(3n-2) {
    /* Override for #1, #4, #7, #10, ... */
} 
```

或者，如果您需要在不覆盖的情况下专门将样式应用于这些子项，则可以在单独的规则中否定相同`:nth-child()`的：`:not()`

```
.child:nth-child(3n-2) {
    /* #1, #4, #7, #10, ... */
}

.child:not(:nth-child(3n-2)) {
    /* #2, #3, #5, #6, ... */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T16:13:07.920

你可以用`:not(:nth-child(3n-2))`第二个

# haskell - Haskell 中的图形函数

> ID：15931029
> 
> 赞同：0
> 
> 时间：2013-04-10T16:09:28.020
> 
> 标签：haskell, graph

我有这样的数据类型：

```
data Node a = Node
    { label :: a,
        adjacent :: [(a,Int)] } deriving Show 
```

示例：`( Node 'a' [ ( 'b' , 3 ) , ( 'c' ,2 ) ] )` 我想从此结构中获取标签，我编写了这个函数（以及我认为可能有效的其他几种组合）：

```
giveLabel Node a [(c,b)] = a; 
```

但我不断收到错误。你能告诉我应该如何改变我的功能吗？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T16:11:07.510

```
giveLabel (Node a [(c,b)]) = a 
```

是您想要的语法吗 - 定义函数使用与调用它们相同的优先级规则，并且根据这些规则，您定义了一个`giveLabel`具有三个参数（`Node`、`a`和`[c,b]`）的函数；这是非法的，因为在这种情况下`Node`缺少论据。

即使这可能不是你想要的 - 模式 [(c,b)] 只匹配只有一个项目的列表。由于你不关心邻居列表，你可以写：

```
giveLabel (Node a xs) = a 
```

... where`xs`将绑定到整个邻居列表；但实际上，由于您甚至不关心这一点，您可以写：

```
giveLabel (Node a _) = a 
```

...where`_`是针对您不会使用的参数进行模式匹配的有用方法。

# ios - 集合视图和详细视图分页

> ID：15931030
> 
> 赞同：3
> 
> 时间：2013-04-10T16:09:43.627
> 
> 标签：ios, xcode, uicollectionview

我一直在阅读和查看应用程序示例，但仍然不确定如何实现一个通过分页推送到详细视图的集合视图？

我可以让集合视图推送到静态详细信息视图（不幸的是没有标题），并且我可以在没有集合视图的情况下进行分页，但不能同时使用！？我还需要考虑一个标题，这是一个重要的部分。

请有人帮我解决这个问题，因为我可能很快就会发疯:)

提前谢谢了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:49:20.650

只需将另一个具有流布局、水平滚动方向、启用`paging`属性并将`itemSize`布局的属性设置为全屏的集合视图控制器即可。在将此控制器的设置内容偏移量推送到所选图像上之前。试试下面的代码。您应该调用`initWithCollectionViewLayout`来初始化您的集合视图。

```
-(id)initWithCollectionViewLayout:(UICollectionViewLayout *)layout {
if (self = [super initWithCollectionViewLayout:layout]) {
    [self.collectionView registerClass:[UICollectionViewCell class] forCellWithReuseIdentifier:@"Cell"];
    UICollectionViewFlowLayout *layout = (UICollectionViewFlowLayout *)self.collectionView.collectionViewLayout;
    layout.itemSize = self.collectionView.bounds.size;
    layout.minimumLineSpacing = 0;
    layout.scrollDirection = UICollectionViewScrollDirectionHorizontal;
    self.collectionView.pagingEnabled = YES;

    // In order to see cells you can declare something like colors array in .h
    self.colors = @[[UIColor redColor], [UIColor greenColor], [UIColor blueColor]];
}
return self;
}

-(NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView {
    return 1;
}

-(NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section {
    return self.shopNames.count;
}

-(UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath {
    UICollectionViewCell *cell = [self.collectionView dequeueReusableCellWithReuseIdentifier:@"Cell" forIndexPath:indexPath];

    [cell.contentView setBackgroundColor:self.colors[indexPath.item]];

    return cell;
} 
```

PS 设置内容偏移使用`[self.collectionView setContentOffset:CGPointMake(40, 0)];`

# vb.net - vb.net 通过 Sharpssh 与 Unix 服务器连接并等待响应

> ID：15931031
> 
> 赞同：0
> 
> 时间：2013-04-10T16:09:49.613
> 
> 标签：vb.net, sharpssh

您好，我通过**sharpssh**连接到 Unix 服务器：

```
Imports Tamir.SharpSsh
Imports Tamir.Streams

Public Class Form1

    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click

        Dim ssh As SshExec
        ssh = New SshExec("********", "******", "*****")
        ssh.Connect()
        ssh.RunCommand("amos RNC111")
        ssh.RunCommand("lt all")
        ssh.RunCommand("bye")
        ssh.Close()

    End Sub
End Class 
```

问题是在`ssh.Connect()`我必须**连接到 RNC**（无线电网络控制器）并等待它连接之后。我不知道如何处理它，我检查通过重定向标准输入来做到这一点，但我发现创建一个新进程：

```
 myProcess.StartInfo.FileName = "pepe.exe"
    myProcess.StartInfo.UseShellExecute = False
    myProcess.StartInfo.RedirectStandardInput = True
    myProcess.Start()
    Dim ssh As SshExec
    ssh = New SshExec("********", "******", "*****")
    ssh.Connect()
    ssh.RunCommand("amos RNC111")
    MsgBox(myProcess.StandardInput)
    ssh.Close() 
```

但我不工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-03T12:15:58.140

您可以在 Tamir Assemblies 中使用 SshShell 类并使用 Expect 模式：

```
string pattern="admin@localhost:~$";
string res = string.Empty;
myshell2 = new Tamir.SharpSsh.SshShell(ipaddress, cteUser, ctePasswd);
myshell2.ExpectPattern = pattern;
myshell2.RemoveTerminalEmulationCharacters = true;
myshell2.Connect(); 
```

//启动命令

```
myshell2.WriteLine("ls -la");
res = myshell2.Expect(pattern); 
```

shell 将等待，直到找到该终端行。

# silverlight - 在冻结 Silverlight UI 线程之前显示文本指示器

> ID：15931032
> 
> 赞同：1
> 
> 时间：2013-04-10T16:09:50.647
> 
> 标签：silverlight, ui-thread

在我的 Silverlight 应用程序的某个时刻，我需要执行一个繁重的操作，将 UI 线程冻结大约 4 秒。在实际执行操作之前，我试图通过`TextBlock`控件显示一个简单的文本指示器。

```
StatusTextBlock.Text = "Performing Some Operation...";
System.Threading.Thread.Sleep(4000); // Just as an example 
```

问题是 UI 线程在`TextBlock`控件文本更新之前冻结。如何获取操作开始前显示的通知文本？

此外，将繁重的操作转移到后台线程对我来说不是一个选项，因为它处理 UI 对象（它切换应用程序的可视根）并且应该在 UI 线程上执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:37:11.620

我的建议是将其从 UI 线程中移除并使用后台线程...

```
StatusTextBox.Text = "Before Sleep";
BackgroundWorker bw = new BackgroundWorker();
bw.DoWork += new DoWorkEventHandler(bw_DoWork);
bw.RunWorkerCompleted += new RunWorkerCompletedEventHandler(bw_RunWorkerCompleted);
bw.RunWorkerAsync();

void bw_DoWork(object sender, DoWorkEventArgs e)
{
    System.Threading.Thread.Sleep(8000);}

void bw_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    StatusTextBox.Text = "after Sleep";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-16T07:48:22.293

我在 Jeff Prosise 的博客文章的帮助下找到了一个解决方案：http: [//www.wintellect.com/cs/blogs/jprosise/archive/2008/10/25/cool-silverlight-trick-5.aspx](http://www.wintellect.com/cs/blogs/jprosise/archive/2008/10/25/cool-silverlight-trick-5.aspx)

这个想法是延迟执行长时间运行任务的调用，直到触发 Silverlight UI 呈现事件。为此，我使用了该`CompositionTarget.Rendering`事件。我在用户控件的构造函数中订阅了它：

```
CompositionTarget.Rendering += this.CompositionTargetRendering; 
```

更新控件的文本后，`TextBlock`我设置了一个私有标志，这表明应该在事件处理程序中进行一些处理：

```
StatusTextBlock.Text = "Performing Some Operation...";
this.processRenderingEvent = true; 
```

这是处理程序的代码：

```
private void CompositionTargetRendering(Object sender, EventArgs e)
{
    if (this.processRenderingEvent)
    {
        if (++this.renderingEventCounter == 2)
        {
            System.Threading.Thread.Sleep(4000); // Example of long running task
            this.processRenderingEvent = false;
        }
    }
} 
```

这里要提到的重要一点是，我`renderingEventCounter`不是第一次触发事件，而是第二次使用私有整数字段来开始长时间运行的任务。原因是`CompositionTarget.Rendering`事件在 Silverlight UI 呈现引擎在应用程序的显示表面上绘制新帧之前触发，这意味着在第一次触发事件时，`TextBlock`控件的文本尚未更新。不过会第二次更新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:14:23.863

这很丑陋，但它有效。通过使用 DispatcherTimer 延迟长时间运行的操作的初始化，我们可以允许在操作开始之前更新 UI。

XAML：

```
<UserControl x:Class="SilverlightApplication13.MainPage"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="300"
             d:DesignWidth="400">

    <Grid x:Name="LayoutRoot"
          Background="White">

        <StackPanel>

            <Border x:Name="Brd01"
                    Visibility="Collapsed"
                    Background="Red">
                <TextBlock VerticalAlignment="Center"
                           Margin="30">Sleeping for 4 seconds...</TextBlock>
            </Border>

            <Border x:Name="Brd02"
                    Visibility="Collapsed"
                    Background="Lime">
                <TextBlock VerticalAlignment="Center"
                           Margin="30">Done!</TextBlock>
            </Border>

            <Button Content="Start Operation"
                    Click="Button_Click_1"></Button>
        </StackPanel>

    </Grid>
</UserControl> 
```

代码隐藏：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Threading;
using System.Windows;
using System.Windows.Controls;
using System.Windows.Documents;
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using System.Windows.Threading;

namespace SilverlightApplication13
{
    public partial class MainPage : UserControl
    {
        public MainPage()
        {
            InitializeComponent();
        }

        private void Button_Click_1(object sender, RoutedEventArgs e)
        {
            //Show the "working..." message
            Brd01.Visibility = System.Windows.Visibility.Visible;

            //Initialize a timer with a delay of 0.1 seconds
            var timer = new DispatcherTimer();
            timer.Interval = TimeSpan.FromMilliseconds(100);
            timer.Tick += Timer_Tick;
            timer.Start();
        }

        private void Timer_Tick(object sender, EventArgs e)
        {
            //Start the long running operation
            Thread.Sleep(4000);

            Brd01.Visibility = System.Windows.Visibility.Collapsed;
            Brd02.Visibility = System.Windows.Visibility.Visible;

            //Kill the timer so it will only run once. 
            (sender as DispatcherTimer).Stop();
            (sender as DispatcherTimer).Tick -= Timer_Tick;
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T20:47:23.107

我自己也遇到过这种情况。问题（我认为）是在文本更新之前你已经开始密集操作，所以你必须等待。

您可以做的是在文本框上附加一个已侦听的方法，该方法仅在文本更新后才被调用（可能是 textChanged？），然后调用您的密集操作。

不过，这对我来说似乎很骇人听闻......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T20:05:03.387

我认为你应该实现 BackgroundWorker 线程是 tsiom 的答案，但是使用 Dispatcher.BeginInvoke 对 UI 对象进行操作，这里有一篇关于如何使用该方法的 MSDN 文章：http: [//msdn.microsoft.com/en-us /library/cc190824%28v=vs.95%29.aspx](http://msdn.microsoft.com/en-us/library/cc190824%28v=vs.95%29.aspx)

此外，请参阅另一个 StackOverflow 问题，了解使用 Dispatcher 的更全面的场景：[了解 Silverlight Dispatcher](https://stackoverflow.com/questions/2581647/understanding-the-silverlight-dispatcher)

# mysql - MySQL：在视图中将小数转换为百分比

> ID：15931049
> 
> 赞同：2
> 
> 时间：2013-04-10T16:10:52.253
> 
> 标签：mysql, view

我继承了一个数据库，并使用 MySQL 中的视图从数据库返回特定信息。我在一个部分遇到了一点麻烦 - 将返回的小数数值转换为百分比。

我不想在 php 中执行此操作——我特别想先格式化视图中的所有内容。我意识到这不一定是每个人都这样做的方式，但对于我的具体情况，这是最好的整体解决方案。

数据库中的示例值：0.46

我想退货：46%

当前查询的相关部分：

```
 SELECT CONCAT(a.fa_rate, '%') as rate_percent
    FROM accounts a; 
```

这将返回 0.46%。是否可以在不将数字转换为字符串的情况下返回我想要的结果？当前数据类型是浮点数。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T16:15:37.117

试试这个

```
 SELECT CONCAT(a.fa_rate * 100 , '%') as rate_percent
   FROM accounts a; 
```

# javascript - 将鼠标事件传递给 HTML 中的以下元素

> ID：15931050
> 
> 赞同：2
> 
> 时间：2013-04-10T16:10:59.593
> 
> 标签：javascript, html, css

我在一个透明元素下面有几个元素（它里面有一些可见的东西）。但似乎填充不允许鼠标事件通过。我有它，所以当鼠标悬停在一个较低的元素上时，它会改变颜色，然后当它离开时，它会慢慢变回原来的颜色。但是对于上面的元素覆盖它们的区域，悬停不会通过。有谁知道如何让这些事件传递到较低的元素？

这是我精简的代码。每当页面调整大小时都会制作网格框，因此它们总是填满背景。尽管是透明的，但诸如此类`<div id="content">`的东西在背景前面。所以这些盒子是可见的，但你不能与它们互动。

HTML

```
<body>
<div id="background">
    <canvas class="gridBox" id="grid1x1"></canvas>
    <canvas class="gridBox" id="grid2x1"></canvas>
    <canvas class="gridBox" id="grid3x1"></canvas>
    ...
    <canvas class="gridBox" id="grid18x8"></canvas>
</div>
<div id="header">
    <p id="logo"><img src="img/logo.png"></p>
</div>  
<div id="content">
    <p>Nothing here yet</p>
</div>  
<div id="footer">
</div>
</body> 
```

CSS

```
body,html{
padding:0;
margin:0;
}
#background{
padding:0;
margin:0;
width:110%;
height:100%;
z-index:-1;
position:fixed;
top:0;
left:0;
overflow:visible;
line-height: 0;
}
.gridBox{
margin:0;
padding:0;
height:50px;
width:50px;
border:1px solid #000000;
background:black;
transition:background-color 1s linear;
}
.gridBox:hover{
background-color:green;
transition:background-color 0s linear;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-12-24T05:32:26.767

`pointer-events: none;`在 CSS 中尝试。#content 元素将不再检测鼠标，但下面的框会检测到它。

```
#content {
  pointer-events: none;
} 
```

# objective-c - 如何从 imagePickerController 属性保存 UIImage

> ID：15931051
> 
> 赞同：2
> 
> 时间：2013-04-10T16:11:02.973
> 
> 标签：objective-c, xcode, uiviewcontroller, uiimageview, uiimage

你如何从 imagePickerController 中保存图像？我可以很好地将图像显示到 UIImageView 中，但是当我尝试对图像执行任何其他操作时，图像仍然为零。您可以在下面看到我如何保存图像。

```
-(void)imagePickerController:(UIImagePickerController *)picker
didFinishPickingMediaWithInfo:(NSDictionary *)info
{

[self dismissViewControllerAnimated:YES completion:nil];
self.image =  [info objectForKey:UIImagePickerControllerOriginalImage]; //self.image is a UIImage property
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:17:52.787

```
[self dismissViewControllerAnimated:YES completion:nil];
self.image =  [info objectForKey:UIImagePickerControllerOriginalImage]; 
```

保存图像后，您应该关闭图像选择器，因为`info`图像选择器保留了对象（并且信息一直存在，直到图像选择器没有被关闭），正确的方法：

```
self.image =  [info objectForKey:UIImagePickerControllerOriginalImage];
[self dismissViewControllerAnimated:YES completion:nil]; 
```

现在你可以用图像做你想要的一切。

# rest - Wso2 Restful API

> ID：15931052
> 
> 赞同：1
> 
> 时间：2013-04-10T16:11:03.300
> 
> 标签：rest, wso2, esb

我从我的客户端获得了一个 REST URI，如下所示：

[https://vm3.digitary.net/verifier/HEDDRequestDocumentAccess](https://vm3.digitary.net/verifier/HEDDRequestDocumentAccess)

必须将以下请求 xml 发布到上述 URI 以获取响应 xml。

```
<documentAccessRequest   xmlns="http://www.digitary.net/schema/dare/hedd/documentAccessRequest/2013" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://www.digitary.net/schema/dare/hedd/documentAccessRequest/2013 http://www.digitary.net/schema/dare/hedd/documentAccessRequest/2013">
                    <head>
                    <institutionCode>BBCU</institutionCode>
                    <username>HEDDUser</username>
                    <password>HEDDPass</password>
                    </head>
                    <body>
                       <heddEnquiryId>12347895844</heddEnquiryId>
                       <enquiree>
                          <email>jane@doe.com</email>
                          <firstName>Jane</firstName>
                          <lastName>Doe</lastName>
                       </enquiree>
                       <enquirer>
                          <organisation>BBC</organisation>
                          <contactName>Jeremy Clarkson</contactName>
                       </enquirer>
                       <documentRequested>HEAR</documentRequested>
                    </body>
                </documentAccessRequest> 
```

现在我需要在 WSO2 ESB 4.6.0 中创建自己的包装 REST API，它会简单地调用上述具有相同请求和响应 XML 的 REST URI。这个想法是通过 REST API 传递到上述 API。

我已经实现了以下 REST API：

```
 <api xmlns="http://ws.apache.org/ns/synapse" name="TestDareRest" context="/documentRequest" hostname="46.137.187.137" port="8280">
   <resource methods="POST" url-mapping="/request/*">
      <inSequence>
         <log/>
         <property name="FORCE_SC_ACCEPTED" value="true" scope="axis2"/>
         <send>
            <endpoint>
               <address uri="https://vm3.digitary.net/verifier/HEDDRequestDocumentAccess" format="pox"/>
            </endpoint>
         </send>
      </inSequence>
      <outSequence>
         <log/>
         <property name="ContentType" value="application/xhtml+xml" scope="axis2"/>
         <send/>
      </outSequence>
   </resource>
</api> 
```

但是上面的 API 根本不工作，它在 esb 控制台中给出了很多错误。我正在使用 SOAPUI 来测试这个 REST 服务并从那里发布相同的请求 xml。该服务部署在我们的公共IP服务器上，可以通过登录以下来查看

```
https://46.137.187.137:9443/carbon/admin/index.jsp with username/pwd as admin/admin 
```

我尝试将 SOAPUI 中的媒体类型设置为 text/xml 和 application/xml

在 text/xml 的情况下，它会给出如下错误：

org.apache.axiom.soap.SOAPProcessingException: First Element 必须包含本地名称 Envelope ，但在 org.apache.axiom.soap.impl.builder.StAXSOAPModelBuilder.constructNode(StAXSOAPModelBuilder.java:305) 找到 documentAccessResponse

如果是应用程序/xml，则会出现以下错误

INFO - LogMediator 收件人：[http](http://www.w3.org/2005/08/addressing/anonymous) ://www.w3.org/2005/08/addressing/anonymous，WSAction：，SOAPAction：，MessageID：urn：uuid：53a782ab-2081-4cb1-9e94-910b75816361，方向：响应 [2013 -04-10 16:05:12,911] 错误 - PassThroughHttpSender 无法提交响应 java.lang.UnsupportedOperationException

请帮助我解决这个问题，因为它对我来说非常重要。

在此先感谢 Shakshi

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:53:46.573

您可以将传输切换到非阻塞传输并检查吗？您可以在axis2.xml 中更改传输发送方和接收方。媒体类型是 application/xml ..不是 text/xml，它用于肥皂请求。

要发布请求，您可以使用 curl 实用程序。

```
# curl -X POST -d @request.xml "URL" 
```

# php - PHP 5.3.2 的 Silex 问题？

> ID：15931056
> 
> 赞同：4
> 
> 时间：2013-04-10T16:11:10.633
> 
> 标签：php, silex

我尝试了 Silex 中的示例并将我的控制器放在单独的目录和类中。

默认情况下，控制器方法不会获取`Request`和`Application`传递的对象。这适用于我的开发机器，它有 5.3.14，但不适用于默认的 Ubuntu 5.3.2。它给了我：

> PHP Catchable 致命错误：传递给 Sv\Controller\Index::index() 的参数 1 必须是 Symfony\Component\HttpFoundation\Request 的实例，没有给出，在第 23 行的 /site/include/app/bootstrap.php 中调用并在第 46 行的 /site/include/app/Sv/Controller/Index.php 中定义

这是我的引导 PHP：

```
<?php

require_once __DIR__ . '/../vendor/autoload.php';

use Sv\Repository\PostRepository;
use Sv\Controller;

$app = new Silex\Application();

// define global service for db access
$app['posts.repository'] = $app->share( function () {
    return new Sv\Repository\PostRepository;
});

// register controller as a service
$app->register(new Silex\Provider\ServiceControllerServiceProvider());
$app['default.controller'] = $app->share(function () use ($app) {
    return new Controller\Index();
});
$app['service.controller'] = $app->share(function () use ($app) {
    return new Controller\Service($app['posts.repository']);
});

// define routes
$app->get('/', 'default.controller:index');
$app->get('/next', 'default.controller:next');

$service = $app['controllers_factory'];
$service->get('/', "service.controller:indexJsonAction");
// mount routes
$app->mount('/service', $service);

// definitions
$app->run(); 
```

这是控制器代码：

```
namespace Sv\Controller;

use Silex\Application;
use Symfony\Component\HttpFoundation\Request;

class Index
{
    public function index(Request $request, Application $app)
    {
        return 'Route /index reached';
    }

    public function next(Request $request, Application $app)
    {
        return 'Route /next reached';
    }
} 
```

为什么这不起作用？

我希望这不是阻止我在 PHP 5.3.2 下使用 ZF2 的问题......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T17:11:57.597

Silex 需要 PHP 5.3.3，正如您在[他们的`composer.json`](https://github.com/fabpot/Silex/blob/master/composer.json#L18)：

```
"require": {
    "php": ">=5.3.3",
    ... 
```

它还在[README 文件](https://github.com/fabpot/Silex#silex-a-simple-web-framework)中说明：

> Silex 适用于 PHP 5.3.3 或更高版本。

这是因为 Symfony2 不再支持 PHP 5.3.2。

# vb.net - System.Transactions.Diagnostics.DiagnosticTrace 引发异常

> ID：15931062
> 
> 赞同：1
> 
> 时间：2013-04-10T16:11:28.377
> 
> 标签：vb.net, exception-handling, db2, odbc

有人可以调查一下并帮助我......

* * *

我最近开发了一个 VB.NET 实用程序，用于从 DB2 表中提取数据并填充 HTML 报告格式。我正在使用 ISeries ODBC 提供程序进行连接。对于大多数用户来说，该实用程序似乎运行良好。

对于某些用户，显然是那些在他们的系统上没有管理员权限的用户，这不起作用。用户收到以下错误：

> System.Transactions.Diagnostics.DiagnosticTrace 引发异常

错误发生在`connection.Open`DB 连接部分的线路上。

```
Dim cn = New OdbcConnection("DSN=dsnname;UID=user;PWD=pswd")
Dim cmd As New OdbcCommand(qry, cn)
cn.Open() ' here 
```

有没有办法在不授予用户管理员权限的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-22T19:08:49.207

我的 App.Config 文件有问题。

我删除了它并从一个新项目中添加了一个新的，它为我修复了它。

# javascript - 如果不在自己的声明中，“显示：隐藏”将不起作用

> ID：15931065
> 
> 赞同：-2
> 
> 时间：2013-04-10T16:11:29.407
> 
> 标签：javascript, html, css

使用这段代码，如果它`formOne.classname = "";`是独立的，它会完美地工作，并且表单会被隐藏。但是为什么当我在它周围有其他代码行时，它只执行一秒钟然后返回到它的原始状态？

```
var name = formOne.name.value;
var email =  formOne.email_address.value;   
var e = document.getElementById("typeOfWork");
var q = e.options[e.selectedIndex].text;

var work =  q;

formTwo.className = "form2Vis";

document.getElementById("name1").value= name;
var d = document.forms['formTwo'].elements['name1'].value;// = name;

formOne.className = "form1Hidden"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:34:10.420

这可能不是您所期望的，但希望它能为您指明正确的方向。我已经排除了示例中的表单字段，因为它在 jsFiddle 中无法正常工作。但是，您可以使用一个单一的表单，并在其中使用淡入和淡出不同的容器。

这是一个使用 jQuery 的两页表单的简单示例。

[**jsFiddle**](http://jsfiddle.net/sjXPF/3/)

你可以使用这样的东西：

```
<form id="myForm" action="" method="POST">
<div id="page1">
<input type="text" name="field1" />
</div>
<div id="page2">
<input type="text" name="field2" />
</div>
</form> 
```

# iphone - 获取segmentControl iphone的selectedsegment对应的id值

> ID：15931067
> 
> 赞同：0
> 
> 时间：2013-04-10T16:11:33.583
> 
> 标签：iphone, objective-c, uisegmentedcontrol

首先对不起标题。

我的应用程序中有一个段控件。段的标题从服务器获取并进行相应设置（即是和否）。

每个段也有一个对应的 id 值。因此，当用户选择 YES 时，将保存相应的 id 8，当用户选择 NO 时，将保存相应的 id 5（8 和 5 来自服务器）。

我尝试通过设置标签但徒劳无功。

谁能帮我解决这个问题。

提前非常感谢。

```
 //Code
     for(WTMobileDataService_DataAccess_ClsYesNo *temp in YesNo)
        {
            NSString *s = [NSString stringWithFormat:@"%@",temp.m_YesNoDescription];
             ind = [temp.m_PK_YesNoID intValue] - 1;

            [items addObject:s];
            [serverids addObject:[NSString stringWithFormat:@"%d",ind]];

           // [segmentControl setTitle:s forSegmentAtIndex:ind];
        }

segmentControl  = [[UISegmentedControl alloc]initWithItems:items]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:34:57.367

我很想创建一个对象来将这两个值保存在一起，因为它们看起来像是一个自然分组

```
@interface SegmentInfo : NSObject

@property (nonatomic, copy)  NSString  *title;
@property (nonatomic, assign NSInteger  value;

- (instancetype)initWithTitle:(NSString *)title value:(NSInteger)value;

@end

@implementation SegmentInfo

- (instancetype)initWithTitle:(NSString *)title value:(NSInteger)value
{
  self = [super init];
  if (self) {
    _title = [title copy];
    _value = value;
  }
  return self;
}

@end 
```

现在您填充这些对象并将它们存储在一个数组中

```
self.segmentInfos = @[
  [[SegmentInfo alloc] initWithTitle:@"Yes" value:8],
  [[SegmentInfo alloc] initWithTitle:@"No"  value:5],
]; 
```

要设置分段控件，您只需将所有标题抓取到一个数组中

```
some set up method
{
  NSArray *segmentTitle = [self.segmentInfo valueForKey:@"title"];
  self.segmentControl   = [[UISegmentedControl alloc] initWithItems:segmentTitle];
} 
```

现在在处理值更改的方法中，您只需在同一索引处抓取对象并获取值

```
- (IBAction)segmentedControlChanged:(UISegmentedControl *)segmentedControl
{
  SegmentInfo *selectedSegment = self.segmentInfos[segmentedControl.selectedSegmentIndex];
  NSLog(@"title: %@, value: %d", selectedSegment.title, selectedSegment.value);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:20:58.703

有两个数组，一个带有标题，另一个带有值。当用户选择一个段时，使用选择的段返回标题，然后用它来获取标题的索引。然后你可以引用 values 数组，你就得到了相应的值。

您也可以使用 NSDictionary 来实现相同的目的，其中标题是您的键，值是......值。

像这样的东西：

```
NSArray titles = @[@"YES", @"NO"];
NSArray values = @[8, 5];

UISegmentedControl control; // Likely defined as a property
if ([control selectedSegmentIndex] != UISegmentedControlNoSegment) {
    NSString title = [control titleForSegmentAtIndex:];

    int index = [titles indexOfObject:title];
    NSString value = [values objectAtIndex:index];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:22:37.093

由于每个`UISegmentedControl`标签只有一个标签，因此您需要执行以下操作：

```
NSMutableArray *items = [NSMutableArray new];
NSMutableArray *serverIds = [NSMutableArray new];

for (ServerResponseObject *response in serverResponses) {
    [items addObject:response.title];
    [serverIds addObject:response.id];
}

mySegmentedControl = [[UISegmentedControl alloc] initWithItems:items]; 
```

此后，当用户点击 时`UISegmentedControl`，访问`selectedIndex`分段控件的属性以找出他们点击了哪个分段，并使用该值作为`serverIds`数组的键，根据服务器查看对应的 ID 号是多少。

# android - 向列表视图项添加动画

> ID：15931068
> 
> 赞同：2
> 
> 时间：2013-04-10T16:11:35.347
> 
> 标签：android, listview, android-animation

我正在用 simplecursoraapter 填充列表视图有什么方法可以为项目添加动画吗？我想要类似 android 声音选择器应用程序的东西，它在启动项目时会一一出现..这是我的适配器

```
 Cursor c = db.rawQuery(mySQL, null);

SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, R.layout.list_item, c, 
            columns, new int[] {R.id.list_item_text_sub,R.id.list_item_text_main,R.id.list_item_text_id,R.id.list_item_img}, 0);

adapter.setViewBinder(new CustomViewBinder());
ListView list = (ListView) findViewById(R.id.list_poet_name);
list.setAdapter(adapter); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-10T16:15:59.057

看看索尼爱立信开发人员的这个项目：

[http://developer.sonymobile.com/2010/06/23/android-tutorial-making-your-own-3d-list-part-3/](http://developer.sonymobile.com/2010/06/23/android-tutorial-making-your-own-3d-list-part-3/)

并查看这些链接：

[http://android-er.blogspot.co.il/2009/10/listview-and-listactivity-layout.html](http://android-er.blogspot.co.il/2009/10/listview-and-listactivity-layout.html)

[http://graphics-geek.blogspot.co.il/2013/02/devbytes-listview-animations.html](http://graphics-geek.blogspot.co.il/2013/02/devbytes-listview-animations.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-04T12:06:00.253

请参阅此 Lib It Work [库链接](https://github.com/twotoasters/JazzyListView/tree/master/library)

例子

[动画示例](http://lab.hakim.se/scroll-effects/)

在你的 xml 文件中使用它

```
<com.twotoasters.jazzylistview.JazzyListView
    android:id="@id/android:list"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:divider="@null"
    app:effect="fan"
    app:only_animate_new_items="false"
    app:only_animate_fling="false"
    app:max_velocity="0" /> 
```

只有您可以更改“JazzyListView”的属性，
即

```
app:effect="Card" r "Curl" OR "Fade" OR "flip" OR "fly" OR "Grow" OR "Wave" OR "tilt" 
```

等等

# java - 游戏角色类设计、继承还是组合？

> ID：15931079
> 
> 赞同：3
> 
> 时间：2013-04-10T16:12:16.700
> 
> 标签：java

我正在尝试为游戏创建角色类。

关于角色类： - 它有不同的角色，例如战士，射手，国王。- 每个都有不同的属性，例如攻击，防御。

我的问题是我应该使用继承还是组合？我有一个角色类，那么我应该创建战士类并扩展角色类，还是应该在角色类中放置一个类似 String ID ="Warrior" 的标识符？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T16:23:18.513

如果有组合属性的选项（例如，如果你有一个 WarriorKing 类），我会做的是对类 + 接口使用继承。

如果您想在 WarriorKing 之类的情况下享受这两种类型的属性，您可以执行以下操作：

```
class Character { ... }

interface Warrior {...}

interface King {...}

abstract class KingImpl extends Character implements King

abstract class WarriorImpl extends Character implements Warrior 
```

然后你结合一切：

```
class WarriorKing extends Character implements Warrior, King {
    private King kingImpl;
    private Warrior warriorImpl;

    public WarriorKing() {
        kingImpl = new KingImpl();
        warriorImpl = new WarriorImpl();

    } 
```

现在假设您`kill()`在 Warrior 接口中有一个方法需要由每个实现类实现（WarriorKing 必须实现它），并且已经在抽象 WarriorImpl 类中实现，您可以执行以下操作：

```
class WarriorKing extends Character implements Warrior, King {
    private King kingImpl;
    private Warrior warriorImpl;

    public WarriorKing() {
        kingImpl = new KingImpl();
        warriorImpl = new WarriorImpl();

    }

    public void kill() {
      this.warriorImpl.kill()
    }

 } 
```

通过这种方式，您可以通过一次实现所有内容，拥有模块化的类设计来享受所有世界，并且您可以享受您可能需要的任何角色组合。祝你好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:30:21.393

我喜欢这样做的方式是写出您想要拥有的每个类的所有属性和参数。查看类之间共享哪些参数并决定如何处理它。

由于您已经有一个 Character 类，请决定您希望 Character 的实际子类有多大不同。

您还可以为不同的类使用不同的[接口](http://docs.oracle.com/javase/tutorial/java/concepts/interface.html)。接口将具有特定类的唯一方法。

不要犹豫，去做吧，你如何处理它并不重要，但是接口和继承肯定会让你的代码更容易理解。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:15:17.637

我认为就模块化设计和（后来的）复杂性而言，最好的解决方案是扩展基类，因为您可以仅将接口用于“战士”或“射手”等。

并考虑添加您只想为特定字符设置的不同方法或属性（现在或以后）。

希望这可以帮助。

最好的，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T16:16:21.393

如果所有字符共享某些属性，那么我将拥有一个具有所述属性的 Character 类，并且每种特定类型的字符都将扩展 Character 并添加它们的特定属性。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T16:18:16.363

String id = "Warrior" 听起来像“字符串类型编程”，你应该避免它。

经验法则是类层次结构不应该很深（不超过 3 或 4 个级别）。

我会定义一个基类（Character）和**一些**派生类（Warrior、Wizard 等），但不会更深入：

*   角色 < 战士 < 斧头战士
*   字符<向导<LightWizard
*   角色<巫师<邪恶巫师

看起来您的角色确实具有不同的属性，但具有基本相同的行为（攻击、防御等）。但是攻击和防御的手段是不同的（战士会散打和砍杀，巫师会施法）。这是继承和多态性的一个很好的候选。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T16:21:24.203

如果角色对相同属性具有不同的值，那么您不应该创建不同的类，但如果战士作为一个整体可以做事/具有其他人不能做的不同属性，那么可以。例如：如果战士的“力量”属性值与魔术师不同，那么在这种情况下，不需要为每个人创建子类，因为它们在概念上是相同的。但是，如果魔术师可以飞，那么是的，你应该。

# c# - 将 GridView 导出到 Excel 时出错

> ID：15931080
> 
> 赞同：0
> 
> 时间：2013-04-10T16:12:21.357
> 
> 标签：c#, asp.net, excel, gridview

当我将网格视图导出到 Excel 时出现此消息错误我的数据库是 SQL Server 并且我的表有 8000 行当我只选择 1 行到 gridview 它导出到 excel 时没有错误但是当我选择所有行时出现这个问题这是我的代码

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!IsPostBack)
    { 
    System.Data.SqlClient.SqlDataReader reader = objCalep.SelectAll(true, false, "[تاريخ الاستشهاد]");
    //    System.Data.SqlClient.SqlDataReader reader = objCCP.CPSelectNo(2700);
    DataTable dataTable = new DataTable();
    dataTable.Load(reader);
    GridView1.DataSource = dataTable;
    GridView1.DataBind();
    }

}

protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{

    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        //System.Data.Common.DbDataRecord drv = e.Row.DataItem as System.Data.Common.DbDataRecord;
        DataRowView dataRowView = e.Row.DataItem as DataRowView;
        DataRow drv = dataRowView.Row;

        Object ob = drv["تاريخ الاستشهاد"];
        if (!Convert.IsDBNull(ob))
        {
            DateTime dateTime = (DateTime)ob;
            e.Row.Cells[4].Text = dateTime.ToString("dd/MM/yyyy");
            e.Row.Cells[4].Width = 100;
        }
    }
}
protected void btn_Add_Click(object sender, ImageClickEventArgs e)
{
    PrepareGridViewForExport(GridView1);
    ExportGridView();
}
private void ExportGridView()
{
    string attachment = "attachment; filename=حلب.xls";
    Response.ClearContent();
    Response.AddHeader("content-disposition", attachment);
    Response.ContentType = "application/ms-excel";
    StringWriter sw = new StringWriter();
    HtmlTextWriter htw = new HtmlTextWriter(sw);
    GridView1.RenderControl(htw);
    Response.Write(sw.ToString());
    Response.End();
}
public override void VerifyRenderingInServerForm(Control control)
{
}

private void PrepareGridViewForExport(Control gv)
{
    LinkButton lb = new LinkButton();
    Literal l = new Literal();
    string name = String.Empty;
    for (int i = 0; i < gv.Controls.Count; i++)
    {
        if (gv.Controls[i].GetType() == typeof(LinkButton))
        {
            l.Text = (gv.Controls[i] as LinkButton).Text;
            gv.Controls.Remove(gv.Controls[i]);
            gv.Controls.AddAt(i, l);
        }
        else if (gv.Controls[i].GetType() == typeof(DropDownList))
        {
            l.Text = (gv.Controls[i] as DropDownList).SelectedItem.Text;
            gv.Controls.Remove(gv.Controls[i]);
            gv.Controls.AddAt(i, l);
        }
        else if (gv.Controls[i].GetType() == typeof(CheckBox))
        {
            l.Text = (gv.Controls[i] as CheckBox).Checked ? "True" : "False";
            gv.Controls.Remove(gv.Controls[i]);
            gv.Controls.AddAt(i, l);
        }
        if (gv.Controls[i].HasControls())
        {
            PrepareGridViewForExport(gv.Controls[i]);
        }
    }
} 
```

这是图像错误[错误消息](http://im37.gulfup.com/Lpu13.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:22:51.763

好吧，我无法阅读太多该错误消息，但我猜测网格的 ViewState 数据大于您站点上配置的最大请求长度（我相信默认值为 4MB）。

尝试更改web.config 部分`<httpRuntime maxRequestLength="158334976" />`。`<system.web>`

如果这样可行，您可以将 maxRequestLength 保持在足够高的值，或者为您的网格禁用 ViewState，尽管您必须在回发后再次从数据库中检索数据。

# java - 如何使用 JsonCreator 反序列化具有重载构造函数的类

> ID：15931082
> 
> 赞同：91
> 
> 时间：2013-04-10T16:12:24.847
> 
> 标签：java, json, jackson

我正在尝试使用 Jackson 1.9.10 反序列化此类的实例：

```
public class Person {

@JsonCreator
public Person(@JsonProperty("name") String name,
        @JsonProperty("age") int age) {
    // ... person with both name and age
}

@JsonCreator
public Person(@JsonProperty("name") String name) {
    // ... person with just a name
}
} 
```

当我尝试这个时，我得到以下

> 冲突的基于属性的创建者：已经有 ... {interface org.codehaus.jackson.annotate.JsonCreator @org.codehaus.jackson.annotate.JsonCreator()}]，遇到 ... ，注释：{interface org.codehaus. jackson.annotate.JsonCreator @org.codehaus.jackson.annotate.JsonCreator()}]

有没有办法使用杰克逊反序列化具有重载构造函数的类？

谢谢

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2013-04-10T16:32:17.883

尽管没有正确记录，但每种类型只能有一个创建者。您可以在类型中拥有任意数量的构造函数，但其​​中只有一个应该有`@JsonCreator`注释。

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2016-07-01T14:32:49.420

**编辑**：看哪，在杰克逊的维护者的[博客文章](https://medium.com/@cowtowncoder/jackson-2-11-features-40cdc1d2bdf3)中，似乎 2.12 可能会看到构造函数注入方面的改进。（本次编辑时的当前版本是 2.11.1）

> 改进构造函数创建者的自动检测，包括解决/缓解含糊不清的 1 参数构造函数的问题（委托与属性）

* * *

这仍然适用于 Jackson 数据绑定 2.7.0。

Jackson[`@JsonCreator`注释 2.5 javadoc](http://fasterxml.github.io/jackson-annotations/javadoc/2.5/com/fasterxml/jackson/annotation/JsonCreator.html)或[Jackson 注释文档](https://github.com/FasterXML/jackson-annotations)语法（*构造函数**和**工厂方法**）***确实让人相信可以*标记*多个构造函数。

> 可用于将构造函数和工厂方法定义为用于实例化关联类的新实例的标记注释。

*查看标识创建者*的代码，看起来 Jackson`CreatorCollector`忽略了**重载的构造函数**，因为它只[检查构造函数的第一个参数](https://github.com/FasterXML/jackson-databind/blob/2.7/src/main/java/com/fasterxml/jackson/databind/deser/impl/CreatorCollector.java#L320-L326)。

```
Class<?> oldType = oldOne.getRawParameterType(0);
Class<?> newType = newOne.getRawParameterType(0);

if (oldType == newType) {
    throw new IllegalArgumentException("Conflicting "+TYPE_DESCS[typeIndex]
           +" creators: already had explicitly marked "+oldOne+", encountered "+newOne);
} 
```

*   `oldOne`是第一个确定的构造函数创建者。
*   `newOne`是重载的构造函数创建者。

这意味着这样的代码**行不通**

```
@JsonCreator
public Phone(@JsonProperty("value") String value) {
    this.value = value;
    this.country = "";
}

@JsonCreator
public Phone(@JsonProperty("country") String country, @JsonProperty("value") String value) {
    this.value = value;
    this.country = country;
}

assertThat(new ObjectMapper().readValue("{\"value\":\"+336\"}", Phone.class).value).isEqualTo("+336"); // raise error here
assertThat(new ObjectMapper().readValue("{\"value\":\"+336\"}", Phone.class).value).isEqualTo("+336"); 
```

但是这段代码可以工作：

```
@JsonCreator
public Phone(@JsonProperty("value") String value) {
    this.value = value;
    enabled = true;
}

@JsonCreator
public Phone(@JsonProperty("enabled") Boolean enabled, @JsonProperty("value") String value) {
    this.value = value;
    this.enabled = enabled;
}

assertThat(new ObjectMapper().readValue("{\"value\":\"+336\"}", Phone.class).value).isEqualTo("+336");
assertThat(new ObjectMapper().readValue("{\"value\":\"+336\",\"enabled\":true}", Phone.class).value).isEqualTo("+336"); 
```

**这有点骇人听闻，可能不是未来的证明**。

* * *

文档对对象创建的工作方式含糊不清；从我从代码中收集的内容来看，可以混合使用不同的方法：

例如，可以有一个带有注释的静态工厂方法`@JsonCreator`

```
@JsonCreator
public Phone(@JsonProperty("value") String value) {
    this.value = value;
    enabled = true;
}

@JsonCreator
public Phone(@JsonProperty("enabled") Boolean enabled, @JsonProperty("value") String value) {
    this.value = value;
    this.enabled = enabled;
}

@JsonCreator
public static Phone toPhone(String value) {
    return new Phone(value);
}

assertThat(new ObjectMapper().readValue("\"+336\"", Phone.class).value).isEqualTo("+336");
assertThat(new ObjectMapper().readValue("{\"value\":\"+336\"}", Phone.class).value).isEqualTo("+336");
assertThat(new ObjectMapper().readValue("{\"value\":\"+336\",\"enabled\":true}", Phone.class).value).isEqualTo("+336"); 
```

它有效，但并不理想。最后，它可能是有意义的，例如，如果 JSON 是*动态*的，那么也许应该考虑使用委托构造函数来比使用多个带注释的构造函数更优雅地处理有效负载变化。

另请注意，杰克逊[按优先级对创建者进行排序](https://github.com/FasterXML/jackson-databind/blob/2.7/src/main/java/com/fasterxml/jackson/databind/deser/impl/CreatorCollector.java#L23-L31)，例如在此代码中：

```
// Simple
@JsonCreator
public Phone(@JsonProperty("value") String value) {
    this.value = value;
}

// more
@JsonCreator
public Phone(Map<String, Object> properties) {
    value = (String) properties.get("value");

    // more logic
}

assertThat(new ObjectMapper().readValue("\"+336\"", Phone.class).value).isEqualTo("+336");
assertThat(new ObjectMapper().readValue("{\"value\":\"+336\"}", Phone.class).value).isEqualTo("+336");
assertThat(new ObjectMapper().readValue("{\"value\":\"+336\",\"enabled\":true}", Phone.class).value).isEqualTo("+336"); 
```

这一次 Jackson 不会引发错误，但 Jackson 只会使用*委托*构造函数`Phone(Map<String, Object> properties)`，这意味着`Phone(@JsonProperty("value") String value)`从未使用过。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-04-05T23:53:11.807

如果我得到了你想要达到的目标，你可以在**没有构造函数重载的情况下**解决它。

如果您只想将空值放在 JSON 或 Map 中不存在的属性中，您可以执行以下操作：

```
@JsonIgnoreProperties(ignoreUnknown = true)
public class Person {
    private String name;
    private Integer age;
    public static final Integer DEFAULT_AGE = 30;

    @JsonCreator
    public Person(
        @JsonProperty("name") String name,
        @JsonProperty("age") Integer age) 
        throws IllegalArgumentException {
        if(name == null)
            throw new IllegalArgumentException("Parameter name was not informed.");
        this.age = age == null ? DEFAULT_AGE : age;
        this.name = name;
    }
} 
```

当我发现你的问题时，这就是我的情况。我花了一些时间才弄清楚如何解决它，也许这就是你想做的。 [@Brice 解决方案](https://stackoverflow.com/a/38148025/2789895)对我不起作用。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-29T02:13:30.893

如果您不介意多做一些工作，可以手动反序列化实体：

```
@JsonDeserialize(using = Person.Deserializer.class)
public class Person {

    public Person(@JsonProperty("name") String name,
            @JsonProperty("age") int age) {
        // ... person with both name and age
    }

    public Person(@JsonProperty("name") String name) {
        // ... person with just a name
    }

    public static class Deserializer extends StdDeserializer<Person> {
        public Deserializer() {
            this(null);
        }

        Deserializer(Class<?> vc) {
            super(vc);
        }

        @Override
        public Person deserialize(JsonParser jp, DeserializationContext ctxt) throws IOException {
            JsonNode node = jp.getCodec().readTree(jp);
            if (node.has("name") && node.has("age")) {
                String name = node.get("name").asText();
                int age = node.get("age").asInt();
                return new Person(name, age);
            } else if (node.has("name")) {
                String name = node.get("name").asText();
                return new Person("name");
            } else {
                throw new RuntimeException("unable to parse");
            }
        }
    }
} 
```

# xcode - Cocoa touch NSInteger 加 4 不是 1

> ID：15931087
> 
> 赞同：0
> 
> 时间：2013-04-10T16:12:43.247
> 
> 标签：xcode, cocoa-touch, math, nsinteger

我有这个可可触摸代码，你按下一个按钮，一个 NSInteger 用数字 1 添加它自己，然后一个标签变成 NSInteger 值

这是代码

```
- (IBAction)out:(id)sender {

outnum = outnum + 1;

self.outnumberlabel.text =  [[NSString alloc] initWithFormat: @"%d", outnum]; 
```

一切正常，但 NsInteger 在加 1 时加 4

当我投入

```
outnum = outnum + 2; 
```

标签变为 8

它四分五裂有没有人知道为什么以及如何解决它

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T13:14:11.683

检查您的 outnum 声明 - 如果您声明，您将看到此行为

```
NSInteger *outnum; 
```

而不是

```
NSInteger outnum; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:14:48.770

听起来您的`out:`方法被调用的频率是您预期的四倍。尝试`NSLog`在此代码中添加一行以确认。如果是这种情况，您将需要弄清楚为什么如此频繁地调用该方法。

# java - Java 中嵌套 switch 语句的替代方案

> ID：15931089
> 
> 赞同：20
> 
> 时间：2013-04-10T16:12:46.307
> 
> 标签：java, nested, switch-statement, performance

所以我今天写了一个方法，结合了嵌套 switch 语句的使用，代码在我看来相当干净简洁，但有人告诉我嵌套 switch 语句通常不是最好的方法，因为它们可能会混淆更多您添加的 switch 语句。这是我的代码的示例：

```
EnumOne enumOne;
EnumTwo enumTwo = null;
EnumTwo enumThree = null;

switch (enumOne) {
   case CASE_ONE:

      switch (enumTwo){
         case A: enumTwo = EnumTwo.B; break;
         case C: enumTwo = EnumTwo.D; break;
         default: break;
      }

      switch (enumThree) {
         case AA: enumThree = EnumTwo.BB; break;
         case CC: enumThree = EnumTwo.DD; break;
         default: break;
      }

      break;

   case CASE_TWO:
   case CASE_THREE:

      switch(EnumTwo) {
         default: break;
      }

      switch (enumThree) {
         case AA: enumThree = EnumTwo.XX; break;
         case CC: enumThree = EnumTwo.YY; break;
         default: break;
      }

      break;

   default:
      break;
} 
```

所以我的问题是，本质上，这些 switch 语句的合适替代方案是什么？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-04-10T16:48:42.403

1.  由于使用大量开关变得非常难以阅读。
2.  每当出现新案例时，我们都必须修改代码并添加 CASE

我们可以考虑`polymorphism`在这种情况下使用

我将给出一个简单的类，只是为了让你理解。假设前面有一个带有 switch case 的类

```
class Test
{ 
    Animal a;
    public Test(Animal a)
    { 
        this.a=a;
    }

    public moveThisAnimal()
    {
        switch(this.a)
        {
            case fish:
            System.out.println("swim");
            break;

            case dog:
            System.out.println("walk");
            break;

            case bird:
            System.out.println("fly");
            break;
        }
    }
} 
```

现在我们用我们的多态逻辑替换这些开关

```
Interface Animal
{
    String move();
} 

Class Dog implements Animal
{
    public String move()
    {
        return "walk";
    }
}

Class Bird implements Animal
{
    public String move()
    {
        return "fly";
    }
}

Class Fish implements Animal
{
    public String move()
    {
        return "swim";
    }
} 
```

现在我们有没有开关盒的测试类

```
class Test
{ 
    Animal a;
    public Test(Animal a)
    { 
        this.a=a;
    }
    public moveThisAnimal()
    {
        System.out.println(this.a.move()); // all switch case statements removed 
    }
} 
```

即使我们必须添加更多案例，我们也只需要添加实现，这里没有变化

查看您的完整代码，看看是否可以做

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-10T16:18:44.440

我建议您将每个嵌套的 switch 语句替换为对随后执行嵌套 switch 代码的过程的调用。

写这样的东西：

```
 EnumOne enumOne;
    EnumTwo enumTwo = null;
    EnumTwo enumThree = null;

    switch (enumOne)
    {
       case CASE_ONE:

          nested_switch1();

       case CASE_TWO:
       case CASE_THREE:

          nested_switch2();

          break;

       default:
          break;
    }

    nested_switch1() {
          switch (enumTwo)
          {
             case A:
                enumTwo = EnumTwo.B;
                break;
             case C:
                enumTwo = EnumTwo.D;
                break;
             default:
                break;
          }

          switch (enumThree)
          {
             case AA:
                enumTwo = EnumTwo.BB;
                break;
             case CC:
                enumTwo = EnumTwo.DD;
                break;
             default:
                break;
          }

          break;
    }

nested_switch2() {
          switch(EnumTwo)
          {
             default:
                break;
          }

          switch (enumThree)
          {
             case AA:
                enumTwo = EnumTwo.XX;
                break;
             case CC:
                enumTwo = EnumTwo.YY;
                break;
             default:
                break;
          }
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-04-11T01:01:43.987

如果你有整数 X 和 Y 并且你需要同时打开它们，你可以以某种明确的方式组合它们并打开组合。例如，如果 y < 10：

```
switch (x*10+y)
{
case 0: // x == y == 0
case 1: // x ==0, y == 1
///
case 10: // x == 1, y == 0
case 11: // x == y == 1
//
} 
```

# javascript - 如何使用 jquery 仅操纵 -box-shadow 的颜色？

> ID：15931091
> 
> 赞同：0
> 
> 时间：2013-04-10T16:12:47.623
> 
> 标签：javascript, jquery

我正在尝试使用[**tinycolor**](http://bgrins.github.io/TinyColor/)设置框阴影颜色。我知道我可以使用

```
$("CLASS").css("box-shadow", "VALUE"); 
```

但我想通过在现有颜色变量上使用 tinycolor（颜色操作框架）来添加颜色。

我努力了 ：

```
$(".riHover").css("box-shadow", "inset 0px 0px 13px 0px tinycolor.lighten($('.Color').css('background-color'))"
); 
```

但我认为我没有正确构建字符串。关于我做错了什么有什么想法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:19:46.130

为什么不首先使用变量让你的生活更轻松？像这样的东西：

```
var shadowColor = tinycolor.lighten($('.Color').css('background-color'));
$(".riHover").css("box-shadow", "inset 0px 0px 13px 0px " + shadowColor); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:30:25.690

您需要删除调用 javascript 函数的引号...

```
$(".riHover")
  .css("box-shadow", 
       "inset 0px 0px 13px 0px "+ 
       tinycolor.lighten($('.Color').css('background-color'))
      ); 
```

# asp.net-mvc - 使用 Twitter Bootstrap MVC 4 实现不同操作的 ViewModel 继承

> ID：15931093
> 
> 赞同：0
> 
> 时间：2013-04-10T16:12:48.957
> 
> 标签：asp.net-mvc, twitter-bootstrap

我正在尝试在 MVC 中创建一个 ViewModel，它允许我在显示格式和编辑格式之间切换。

我可以让控制器选择正确版本的 ViewModel，并且在调试器中显示继承类和基类的所有属性。

当 ViewModel 被传递给视图时，只显示继承类的属性。

这种方法可以工作还是我应该创建两个单独的 ViewModel？

**视图模型：**

```
public partial class HouseholdViewModel
    {
        public int Id { get; set; }
        public int familyID { get; set; }
        public string entityName { get; set; }
        public System.DateTime attachmentDate { get; set; }
    }

    public partial class DisplayHouseholdViewModel : HouseholdViewModel
    {
        public string phone { get; set; }
    }

    public partial class CreateHouseholdViewModel : HouseholdViewModel
    {
        public string familyPhoneCode { get; set; }
        public string familyPhone { get; set; }
    } 
```

**控制器（片段）：**

```
public class HouseholdController : Controller
    {
        private WhatWorksEntities db = new WhatWorksEntities();

        //return viewmodel object
        private string displayView = "displayView";
        private string createView = "createView";

        public IEnumerable<object> GetModel(string view)
        {
            if (view == displayView)
            {
                var householdView = (from h in db.tHouseholds
                                     select new DisplayHouseholdViewModel
                                     {
                                         Id = h.householdID,
                                         familyID = h.familyID,
                                         entityName = h.tEntity.entityName,
                                         attachmentDate = h.attachmentDate,
                                         phone = h.familyPhoneCode + " " + h.familyPhone
                                     }).AsEnumerable();
                return (householdView);
            }
            else
            {
                var householdView = (from h in db.tHouseholds
                                     select new CreateHouseholdViewModel
                                     {
                                         Id = h.householdID,
                                         familyID = h.familyID,
                                         entityName = h.tEntity.entityName,
                                         attachmentDate = h.attachmentDate,
                                         familyPhoneCode = h.familyPhoneCode,
                                         familyPhone = h.familyPhone
                                     }).AsEnumerable();
                return (householdView);
            }
        }

        //
        // GET: /Household/
        public ActionResult Index()
        {

            var householdView = GetModel(displayView).Cast<DisplayHouseholdViewModel>();

            return View(householdView);

        } 
```

返回的视图不显示*电话*属性：

![索引视图](https://i.stack.imgur.com/yfbno.png)

---编辑以显示带有电话数据的调试器---

**调试视图：** ![调试器](https://i.stack.imgur.com/SFM7F.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:55:17.793

在您看来，您需要一些逻辑来显示该字段 -

```
@Html.LabelFor(l => l.Phone, "Phone")
@Html.DisplayFor(p => p.Phone) 
```

在顶部，您需要确保显示正确的视图模型

```
@model YourNamespace.ViewModels.DisplayViewModel 
```

如果您尝试在两个 ViewModel 之间更改同一视图，则需要创建两个单独的局部视图并切换它们的显示设置

# email - VBA Outlook - 从附加的 .msg 文件中获取电子邮件地址

> ID：15931095
> 
> 赞同：0
> 
> 时间：2013-04-10T16:12:54.163
> 
> 标签：email, vba, outlook

我想要一些代码来帮助我获取附加的 .msg 文件的发件人的电子邮件地址。

我有一封附有大约 10 封电子邮件的电子邮件。我需要将发件人地址从它们复制到剪贴板或 Excel 表中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:19:22.930

你需要

1.  将附件另存为`msg`文件，
2.  使用打开它`Namespace.OpenSharedItem`
3.  一旦你打开它`MailItem`，你可以读取`MailItem.Sender`属性。

您还可以使用[Redemption](http://www.dimastr.com/redemption) - 它允许使用[RDOAttachment.EmbeddedMsg](http://www.dimastr.com/redemption/RDOAttachment.htm)直接将消息附件作为 RDOMail 对象打开。

# java - 限制数字输入 JTextField

> ID：15931099
> 
> 赞同：5
> 
> 时间：2013-04-10T16:12:56.373
> 
> 标签：java, swing, limit, jtextfield

我正在研究数独求解器，我正在尝试限制用户可以输入单元格的**数字数量**以及**只能**输入数字，目前它还接受字母。目前它的工作方式如下：如果用户输入“11125455876”，它将只使用最后输入的数字（在本例中为“6”）。我想将用户可以输入单个单元格的数字数量限制为 1 并且只接受数字**1-9**。我不确定我该怎么做。所以也许它只会覆盖以前的数字或其他东西，如果我按字母键作为“a”，什么都不会发生。

这是我的代码：

```
public PanelGUI(int size) {

    super(size);
    NumberFormat f = NumberFormat.getInstance();
    f.setMaximumIntegerDigits(1);
    f.setMinimumIntegerDigits(0);
    f.setGroupingUsed(false);
    cells = new JTextField[size][size];
    panel.setLayout(new GridLayout(size, size));
    for (int i = 0; i < size; i++) {
        for (int j = 0; j < size; j++) {
            cells[i][j] = new JFormattedTextField(f);
            cells[i][j].setEditable(true);
            cells[i][j].setFont(boldFont);
            cells[i][j].setBorder(BorderFactory.createMatteBorder(1, 1, 1,
                    1, Color.white));
            cells[i][j].setHorizontalAlignment(JTextField.CENTER);
            panel.add(cells[i][j]);
        }
    }
} 
```

如您所见，我目前正在使用`number format`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:30:50.407

```
NumberFormat f = NumberFormat.getInstance();
f.setMaximumIntegerDigits(1);
f.setMinimumIntegerDigits(0);
f.setGroupingUsed(false); 
```

您想使用 MaskFormat 插入：

```
MaskFormatter f = new MaskFormatter( "#" );
f.setValidCharacters("123456789"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:35:33.997

您可以按照以下链接中的说明编写自己的格式化程序：

[JTextField 限制字符量输入并仅接受数字](https://stackoverflow.com/questions/12793030/jtextfield-limiting-character-amount-input-and-accepting-numeric-only?rq=1)

# android - Android 在应用启动时启动系统服务

> ID：15931102
> 
> 赞同：1
> 
> 时间：2013-04-10T16:13:16.100
> 
> 标签：android, broadcastreceiver

在 AndroidManifest.xml 中，我将 BroadcastReceiver 注册到“android.intent.action.BOOT_COMPLETED”事件。这会在每次 Android 设备启动时启动服务。

```
...
        <receiver android:name="MySystemScheduleReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
            </intent-filter>
        </receiver>
... 
```

但是，我希望在安装应用程序后立即启动系统服务，而无需重新启动设备。

应用程序启动时我可以使用系统事件吗？还是我需要设置自定义事件？

我应该将清单文件修改为类似

```
...
        <receiver android:name="MySystemScheduleReceiver" >
            <intent-filter>
                <action android:name="android.intent.action.BOOT_COMPLETED" />
                <action android:name="com.myapp.StartSysService" />
            </intent-filter>
        </receiver>
... 
```

然后从我的主要活动中启动服务，例如

```
...
        Intent intent = new Intent();
        intent.setAction("com.myapp.StartSysService");
        sendBroadcast(intent);
... 
```

如果是这样，我应该使用哪种方法？(onCreate, onResume...)

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T16:28:06.987

您可以对具有 onCreate() 回调的应用程序进行子类化。您可以在那里开始您的服务。

```
public class MyApplication extends Application {
    public void onCreate() {
        // start your service
    }
} 
```

在`<application>`清单的标签中，添加`android:name="MyApplication"`

# android - 在 bundle 中添加一个 LinearLayout

> ID：15931103
> 
> 赞同：0
> 
> 时间：2013-04-10T16:13:16.280
> 
> 标签：android, android-activity, bundle, android-linearlayout, parcelable

我正在开发一个应用程序，在该应用程序中我用一些数据构建了一个 treeView。由于这个过程很长，我希望能够以某种方式保存我构建的treeView（一个LinearLayout），以便在调用活动时恢复它。

让我们用树视图 T 调用我的活动。我有 Home->T->Resource 并从 Resource 我回到 Home。我在 T 中实现了 onSaveInstance ，因此我可以将我需要的变量保存在一个包中，当我从 Resource 回到 Home 并且 T 被破坏时，但问题是我无法将所有 linearLayout 作为单一信息保存在一个捆绑，LinearLayout 似乎不可打包。

所以总结一下我的周期是：

```
Home-->T-->Resouce-->Home (T is destroyed and onSaveInstance is executed)-->T (I want to avoid the rebuilding of the LinearLayout). 
```

许多thnaks

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T16:51:31.673

不要这样做。当您创建任何视图、布局或其他方式时，它会使用膨胀 Activity 的上下文来获取和使用系统资源和内部应用程序资源。当您的 Activity 被销毁时，此上下文不再处于活动状态。

如果您确实设法保存并重新加载 LinearLayout，您将得到很多泄漏的窗口和其他崩溃，可能包括 NullPointerExceptions 和 Dead Objects。

如果 Activity 被销毁并重新启动，您应该始终让 Android 为 Activity 重新创建布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:23:08.903

为什么不将“treeView T”的资源元素保存在一些有序的数据结构中，例如 ArrayList、HashMap 等...将此数据结构保存到 SharedPreference/Bundle 等...在构建活动视图时，动态创建 LinearLayout通过从之前保存的 SharedPreference/Bundle 中读取元素。

```
/* Posting an example code below */

LinearLayout linLayout =  new LinearLayout(this);

View childView = null; // read this childView in a sequential manner from the sharedPreference/Bundle

linLayout.addView(childView); 
```

# ios - 在 NSNumbers 的 NSArray 中查找最小值和最大值

> ID：15931112
> 
> 赞同：49
> 
> 时间：2013-04-10T16:13:36.000
> 
> 标签：ios, objective-c, cocoa-touch, nsarray

`NSArray`什么是比较包含`NSNumbers`from的所有值`floats`以找到最大和最小的有效且出色的方法？

任何想法如何在Objective-C中快速完成这项工作？

* * *

## 回答 #1

> 赞同：146
> 
> 时间：2013-04-10T16:43:46.667

如果*执行速度*（不是*编程速度*）很重要，那么显式循环是最快的。我用一个包含 1000000 个随机数的数组进行了以下测试：

版本 1：对数组进行排序：

```
NSArray *sorted1 = [numbers sortedArrayUsingSelector:@selector(compare:)];
// 1.585 seconds 
```

版本 2：键值编码，使用“doubleValue”：

```
NSNumber *max=[numbers valueForKeyPath:@"@max.doubleValue"];
NSNumber *min=[numbers valueForKeyPath:@"@min.doubleValue"];
// 0.778 seconds 
```

版本 3：键值编码，使用“self”：

```
NSNumber *max=[numbers valueForKeyPath:@"@max.self"];
NSNumber *min=[numbers valueForKeyPath:@"@min.self"];
// 0.390 seconds 
```

版本 4：显式循环：

```
float xmax = -MAXFLOAT;
float xmin = MAXFLOAT;
for (NSNumber *num in numbers) {
    float x = num.floatValue;
    if (x < xmin) xmin = x;
    if (x > xmax) xmax = x;
}
// 0.019 seconds 
```

版本 5：块枚举：

```
__block float xmax = -MAXFLOAT;
__block float xmin = MAXFLOAT;
[numbers enumerateObjectsUsingBlock:^(NSNumber *num, NSUInteger idx, BOOL *stop) {
    float x = num.floatValue;
    if (x < xmin) xmin = x;
    if (x > xmax) xmax = x;
}];
// 0.024 seconds 
```

测试程序创建一个包含 1000000 个随机数的数组，然后将所有排序技术应用于同一个数组。上面的时间是一次运行的输出，但我做了大约 20 次运行，每次运行的结果非常相似。我还更改了应用 5 种排序方法以排除缓存效果的顺序。

**更新：**我现在创建了一个（希望）更好的测试程序。完整的源代码在这里：[https](https://gist.github.com/anonymous/5356982) ://gist.github.com/anonymous/5356982 。对包含 1000000 个随机数的数组进行排序的平均时间为（以秒为单位，在 3.1 GHz Core i5 iMac 上，发布编译）：

```
排序 1.404
KVO1 1.087
KVO2 0.367
快速枚举 0.017
块枚举 0.021

```

**更新 2：**正如我们所看到的，快速枚举比块枚举更快（这里也有说明：http: [//blog.bignerdranch.com/2337-incremental-arrayification/](http://blog.bignerdranch.com/2337-incremental-arrayification/)）。

**编辑：**以下是*完全错误*的，因为我忘记初始化用作锁的对象，正如 Hot Licks 正确注意到的那样，因此根本没有进行同步。而且`lock = [[NSObject alloc] init];`并发枚举*速度太慢* 了，我不敢显示结果。也许更快的同步机制可能会有所帮助......）

~~如果您将`NSEnumerationConcurrent`选项添加到块枚举，这会发生巨大变化：~~

 ~~```
__block float xmax = -MAXFLOAT;
__block float xmin = MAXFLOAT;
id lock;
[numbers enumerateObjectsWithOptions:NSEnumerationConcurrent usingBlock:^(NSNumber *num, NSUInteger idx, BOOL *stop) {
    float x = num.floatValue;
    @synchronized(lock) {
        if (x < xmin) xmin = x;
        if (x > xmax) xmax = x;
    }
}]; 
```~~ 

这里的时间是

```
并发枚举 0.009

```

~~所以它的速度大约是快速枚举的两倍。结果可能不具有代表性，因为它取决于可用的线程数。但还是很有趣！请注意，我使用了“最容易使用”的同步方法，这可能不是最快的。~~

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-10T16:20:49.720

然后通过包裹在 NSNumber 下保存浮点数

```
NSNumber *max=[numberArray valueForKeyPath:@"@max.doubleValue"];
NSNumber *min=[numberArray valueForKeyPath:@"@min.doubleValue"]; 
```

**没有编译和检查，已经用intValue检查过，不确定是double还是float*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T16:15:15.930

把它分类。取第一个和最后一个元素。

顺便说一句：您不能将浮点数存储在 NSArray 中，您需要将它们包装在 NSNumber 对象中。

```
NSArray *numbers = @[@2.1, @8.1, @5.0, @.3];
numbers = [numbers sortedArrayUsingSelector:@selector(compare:)];

float min = [numbers[0] floatValue];
float max = [[numbers lastObject] floatValue]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T16:56:32.023

我同意对数组进行排序，然后选择第一个和最后一个元素，但我发现这个解决方案更优雅（通过更改块内的比较，这也适用于非数字对象）：

```
NSArray *unsortedArray = @[@(3), @(5), @(1)];
NSArray *sortedArray = [unsortedArray sortedArrayUsingComparator:^NSComparisonResult(id obj1, id obj2) {
    NSNumber *item1 = (NSNumber *)obj1;
    NSNumber *item2 = (NSNumber *)obj2;
    return [item1 compare:item2];
}]; 
```

如果你真的想要花哨并且有一个很长的列表并且你不想阻塞你的主线程，这应该工作：

```
 NSComparator comparison = ^NSComparisonResult(id obj1, id obj2) {
    NSNumber *item1 = (NSNumber *)obj1;
    NSNumber *item2 = (NSNumber *)obj2;
    return [item1 compare:item2];
};

void(^asychSort)(void) = ^
{
    NSArray *sortedArray = [unsortedArray sortedArrayUsingComparator:comparison];
    dispatch_sync(dispatch_get_main_queue(), ^{
        NSLog(@"Finished Sorting");
        //do your callback here
    });
};

dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), asychSort); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-14T15:09:05.953

变得简单

```
NSArray *numbers = @[@2.1, @8.1, @5.0, @.3];
numbers = [numbers sortedArrayUsingSelector:@selector(compare:)];

float min = [numbers[0] floatValue];
float max = [[numbers lastObject] floatValue];

NSLog(@"MIN%f",min);
NSLog(@"MAX%f",max); 
```

# java - 与 JavaVM 框架链接的 OS X 应用程序能否与 Oracle 的 JRE 1.7 一起运行？

> ID：15931113
> 
> 赞同：2
> 
> 时间：2013-04-10T16:13:37.730
> 
> 标签：java, macos

我试图弄清楚 Mac 上可用的所有不同 JDK/JRE 是如何交互的。我在 Lion 上的 XCode 4.6 中创建了一个虚拟 Cocoa 应用程序项目，并添加了 JavaVM.framework。我还添加了一个#include 以确保它在搜索路径中，并构建了应用程序。当我尝试在未安装 Java 的 Mountain Lion 机器上运行该应用程序时，OS X 会提示为 OS X 2013-002 安装 Java，如果已安装则运行该应用程序。令我惊讶的是，即使机器上已经安装了 Oracle 的 JRE 或 JDK (1.7)，OS X 仍然会尝试安装它。

有没有办法让用户选择他想要安装哪个 JRE，而不会丢失 Apple 提供的让用户在需要时安装 JRE 的回退提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:32:35.523

> 有没有办法让用户选择他想要安装哪个 JRE，而不会丢失 Apple 提供的让用户在需要时安装 JRE 的回退提示？

不。

`JavaVM.framework`仅适用于 Apple Java，正如您所发现的，它将忽略恰好安装在机器上的任何 Oracle Java 7 JRE 或 JDK。同样，如果您使用 Oracle 的`<appbundler>`任务来构建`.app`与 Oracle Java 7 一起使用的任务，它将不会使用 Apple Java 6。我相信这些天推荐的方法是将 Oracle JRE 捆绑在您的内部`.app`（`<appbundler>`可以为您做某事）并使用那个而不是依赖于系统范围的 Java 安装。

# c# - VersionControlServer - 在特定日期/时间获取最新版本的文件

> ID：15931114
> 
> 赞同：0
> 
> 时间：2013-04-10T16:13:50.680
> 
> 标签：c#, version-control, tfs, download, timestamp

我有一个程序使用以下代码从 TFS 服务器获取最新版本的文件。

```
TeamFoundationServer myTFS = TeamFoundationServerFactory.GetServer(myURL);
VersionControlServer myVCS = (VersionControlServer)myTFS .GetService(typeof(VersionControlServer));

ItemSet downloadItems = myVCS.GetItems(myDirectory, RecursionType.Full);
foreach (Item item in downloadItems.Items)
{
    item.DownloadFile(myDownloadPath);
} 
```

我希望能够指定日期和时间，并在该时间点获取项目的 ItemSet，而不是获取最新版本。然后，在 DownloadFile 调用中，我想在指定的日期和时间获取 ItemSet 中文件的最新版本。

我看到 Item 有一个 CheckinDate 属性，但如果这个值在我要查找的日期和时间之后，我不确定如何获取以前的版本。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T17:29:23.330

当您使用 查询项目时[`GetItems`](http://msdn.microsoft.com/en-US/library/microsoft.teamfoundation.versioncontrol.client.versioncontrolserver.getitems%28v=vs.80%29.aspx)，您应该提供您感兴趣的版本规范，在本例中为[`DateVersionSpec`](http://msdn.microsoft.com/en-us/library/microsoft.teamfoundation.versioncontrol.client.dateversionspec%28v=vs.80%29.aspx).

例如：

```
DateTime whenever = DateTime.Now;
ItemSet downloadItems = myVCS.GetItems(myDirectory, new DateVersionSpec(whenever), RecursionType.Full); 
```

显然替换`DateTime.Now`为您感兴趣的任何内容。

# asp.net - MVC Razor - 影响 TextBoxFor 和模型属性值的查询字符串

> ID：15931118
> 
> 赞同：2
> 
> 时间：2013-04-10T16:13:58.663
> 
> 标签：asp.net, asp.net-mvc-3, razor

这有点奇怪（至少对我来说），所以要做好准备。我有一个简单的对象

```
public class User
{
  public FirstName { get; set; }
  public LastName { get; set; }
} 
```

还有一个非常简单的视图：

```
@Model User
@{
    Layout = null;
}
@Html.TextBoxFor(x => x.FirstName)
@Html.Raw(Model.FirstName) 
```

和控制器：

```
public ActionResult GetUserInfo(Guid id, string firstName = "")
{
  User user;
  /* ... lookup the user instance ... */
  return View(user);
} 
```

我传递的模型有 FirstName = "John" 和 LastName = "Doe"。当我导航到 /Users/{Id} 时，文本框和 Html.Raw 值的值为“John”。当我导航到 /Users/{Id}?firstName= 时，文本框的值为空，Html.Raw 输出的值为“John”。当我导航到 /Users/{Id}?firstName=Tom 时，文本框的值为“Tom”，而 Html.Raw 的值为“John”。

我已经调试了控制器和视图。进入视图的模型具有正确的属性。我的问题：

为什么会这样？我以前从未见过这种情况，也无法使用其他类型的对象、视图等来重现它。

我正在使用 .NET 4.5 和 MVC 3。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:21:36.167

经过数小时的搜索并在此处发布，我发现了一个几乎相同的 stackoverflow 问题。

[MVC4 TextBox用于覆盖模型属性](https://stackoverflow.com/questions/12716297/mvc4-textboxfor-overwritting-model-property)

总结[Aviran Cohen](https://stackoverflow.com/users/358820/aviran-cohen)在链接帖子中的回答，可以通过将行添加`ModelState.Clear();`到受影响的控制器操作的开头来解决此问题：

```
public ActionResult GetUserInfo(Guid id, string firstName = "")
{
  ModelState.Clear();
  User user;
  /* ... lookup the user instance ... */
  return View(user);
} 
```

# javascript - 如何包含 gl-matrix？

> ID：15931119
> 
> 赞同：10
> 
> 时间：2013-04-10T16:14:00.347
> 
> 标签：javascript, math, webgl

我做了什么：

从这里下载的 master 分支：[https](https://github.com/toji/gl-matrix) ://github.com/toji/gl-matrix 将 src 文件夹放入我的项目文件夹中。从那里包括 gl-matrix-manifest.js。试过这个：

```
var mvMatrix = mat4.create(); 
```

结果：

```
var mvMatrix = mat4.create();
ReferenceError: mat4 is not defined 
```

好吧，让我们直接引入mat4。包括。结果：

```
var out = new GLMAT_ARRAY_TYPE(16);
ReferenceError: GLMAT_ARRAY_TYPE is not defined 
```

好吧，也许它需要 common.js：

```
var x = axis[0], y = axis[1], z = axis[2],
TypeError: axis is undefined 
```

WTF，包括 src 文件夹中的所有其他文件（常见、向量、矩阵、quat）：

```
var x = axis[0], y = axis[1], z = axis[2],
TypeError: axis is undefined 
```

（相同的）

如何正确包含？特别是我需要mat4和vec4。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2018-11-28T07:55:05.217

一旦正确指定了源，我仍然无法直接调用 mat4.

我不得不输入“glMatrix.mat4”。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-10T19:19:29.293

只需包含 /dist/gl-matrix-min.js 或 /dist/gl-matrix.js :)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-02-02T12:21:49.643

在head中添加这个cdn链接

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/gl-matrix/2.8.1/gl-matrix-min.js"
        integrity="sha512-zhHQR0/H5SEBL3Wn6yYSaTTZej12z0hVZKOv3TwCUXT1z5qeqGcXJLLrbERYRScEDDpYIJhPC1fk31gqR783iQ=="
        crossorigin="anonymous" defer>
</script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-15T02:29:57.090

1.  从[这里下载](https://github.com/toji/gl-matrix/zipball/master)
2.  提取并获取 gl-matrix-min.js
3.  在您的 index.html 文件中`<script src="gl-matrix-min.js"></script>`
4.  现在试试`var mvMatrix = glMatrix.mat4.create();`

# jquery - 未捕获的类型错误：对象 [对象对象] 没有“粘性”方法

> ID：15931121
> 
> 赞同：0
> 
> 时间：2013-04-10T16:14:08.780
> 
> 标签：jquery

**更新：根据以下有用的建议，我移动了 1.9.1。版本到顶部并取出1.4。没有更多错误，但 Sticky 仍然不起作用。**

我正在使用此处（[http://labs.anthonygarand.com/sticky](http://labs.anthonygarand.com/sticky)）找到的 Sticky menu jquery 插件，这看起来很简单，但我似乎无法让它没有错误。

这是我的标题：

```
<head>
  <meta charset="utf-8">
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <meta name="robots" content="" />
    <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Oxygen">
    <link href="css/reset.css" rel="stylesheet" type="text/css" />
    <link href="css/960.css" rel="stylesheet" type="text/css" />
    <link href="css/styles.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="css/example.css">
    <style>
        body {-webkit-font-smoothing: antialiased;font: normal 15px/1.5 "Helvetica Neue", Helvetica, Arial, sans-serif;}
        #slides {display: none;margin-top:36px;}
        .slidesjs-container {width:1000px;height:252px;margin-bottom:-21px;}
        #slides .slidesjs-navigation {margin-top:-17px;visibility: hidden;}
        #slides .slidesjs-previous {margin-right: 5px;float: left;visibility: hidden;}
        #slides .slidesjs-next {margin-right: 5px;float: left;visibility: hidden;}
        .slidesjs-pagination {margin: 0px 6px 0;float: right;list-style: none;position:relative;z-index:1000;}
        .slidesjs-pagination li {float: left;margin: 0 1px;}
        .slidesjs-pagination li a {visibility:hidden;display: block;width: 14px;height: 0;padding-top: 14px;background-image: url(images/pagination.png);background-position: 0 0;float: left;overflow: hidden;}
        .slidesjs-pagination li a.active,
        .slidesjs-pagination li a:hover.active {background-position: 0 -14px}
        .slidesjs-pagination li a:hover {background-position: 0 -28px}
        #slides a:link,
        #slides a:visited {color: #333}
        #slides a:hover,
        #slides a:active {color: #9e2020}
        .navbar {overflow: hidden}
    </style>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>  
    <script type="text/javascript" src="js/smooth-scroll.js"></script>
    <script type="text/javascript" src="js/jquery.sticky.js"></script>
    <script type="text/javascript" src="cform.js"></script>
    <script>
        $(window).load(function(){
          $("#header").sticky({ topSpacing: 0 });
        });
    </script>
</head> 
```

我在体内也有这个来运行滑块：

```
<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
<script src="js/jquery.slides.js"></script>
<script>
$(function(){
  $("#slides").slidesjs({
    play: {
      active: true,
      effect: "slide",
      interval: 5000,
      auto: true,
      swap: true,
      pauseOnHover: true,
      restartDelay: 2500,
      width:936,
      height:247
    }
  });
});
</script> 
```

谢谢！我是一个新的stackoverflow-er，喜欢这里的知识！

# c - 通过消息队列发送 void* 对象[linux]

> ID：15931129
> 
> 赞同：0
> 
> 时间：2013-04-10T16:14:26.370
> 
> 标签：c, unix, mqueue

所以，我实现了我自己的 mpi 库（一个简化版本），我需要在进程之间发送/接收一些数据。MPI_Send 看起来像这样（void *buf,int count,datatype data,etc...）。所以这意味着我需要发送指向 buf 地址的数据类型（char、double 或 int）的计数元素。我需要通过消息队列（mq）发送 em。MPI_Recv 采用相同的参数。目前这是我在发送和接收中所做的：

```
 //Sender part of code
    ret=mq_send(mq,buf,sizeof(buf),0);
        if(ret < 0)
    return MPI_ERR_IO;
    //Receiver part of code
    ret = mq_receive(mq, buf, MSGSIZE, NULL );
    if(ret < 0)
    return MPI_ERR_IO; 
```

现在我只收到数组的第一个元素。我将如何发送整个事情？这是我的想法

```
 //Sender part of pseudocode
    for(i=0,count)
       element=(cast to datatype)buf[i]; 
       mq_send(mq,element,sizeof,0);
    //Receiver part of pseudocode
    //i receive the count number of elements prior to this message
    for(i=0,count)
       mq_receive(mq,local_variable,etc...)
       somehow store them into my void *buf which i receive as an argument ?? 
```

如果有什么不够清楚，我会回复

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:30:41.807

您使用 mq_send 的第三个参数指定要放入队列的数据量。在您的情况下，它是：

```
ret=mq_send(mq,buf,sizeof(buf),0); 
```

假设 buf 在某处被初始化

```
float f[2];
void *buf = f; 
```

那么表达式的`sizeof(buf)`意思是：指针的大小叫做“buf”。虽然它可能适用于某些架构，但正确的方法是

```
ret=mq_send(mq,buf,sizeof(float) * <number of elements>, 0); 
```

这意味着，浮点数的大小乘以存储在数组中的浮点数。

在这种情况下，您会将整个数组放入队列中。您还可以避免迭代并仅使用恒定数量的消息，而不是线性数字。

# java - 调用泛型参数的构造函数或获取 Class 对象（或者为什么它不起作用？）

> ID：15931130
> 
> 赞同：1
> 
> 时间：2013-04-10T16:14:33.890
> 
> 标签：java, generics, reflection, compiler-construction

我现在只是为了好玩而喜欢用java。

假设我想将一个对象添加到集合中；无论集合类型如何。通过使用泛型和 T 扩展集合，这将很容易。但是，现在假设我还想通过创建一个新集合来处理我的集合为空的情况；但我希望返回的集合是调用方法想要的类型。所以是这样的：

```
public <T extends Collection<MyObject> addToCollection (Myobject object, T collection){
    if(collection==null)
        collection=new T();

    collection.add(object);

    return collection;
} 
```

显然我不能调用 new T()，但是有没有一种等效的方法呢？通过反射我可以做到，但反射假设我知道 T 类是什么，如果集合为空，我不能只调用“collection.getClass()”我的直觉是这是不可能的，因为编译器无法推断类型; 只是它似乎在理论上应该是可行的

如果我有一个方法可以说类似

```
HashSet<MyObject> set=addToCollection(object, null); 
```

我可以在运行时看到，当我调用这个集合时，我期望返回一个 HashSet，因此理论上我可以告诉方法它期望 T 是什么类型，因此我的方法现在将创建什么集合。我强烈怀疑 Java 不会这样做。但如果不是，那么就是不实现此功能的原因，因为它太极端了，Sun/Oracle 不会费心编写解决它的方法；还是编译器和运行时交互的方式有什么使这变得不可能或极其困难？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:21:13.923

如果集合为空，您需要告诉您的方法要创建什么类型的集合。为此，您可以将类作为参数传递。

```
public <T extends Collection<String>> T addToCollection(String object, T collection, Class<T> clazz) {
if (collection == null)
    collection = clazz.newInstance();

collection.add(object);

return collection;
} 
```

**编辑**

正如评论中所指出的，重要的是要注意`Class.newInstance()`只有当构造函数的参数为​​零并且已经可以访问时才会成功。否则，必须使用`Constructor.newInstance()`

# android - 如何在活动之间传递数据

> ID：15931134
> 
> 赞同：0
> 
> 时间：2013-04-10T16:14:38.610
> 
> 标签：android

我的问题是如何在两个活动之间传递像字符串这样的数据。通常我会这样做：

```
Intent i = new Intent(thisclass.this,NextClass.class); 
Bundle b = new Bundle();
i.putExtras(b);
b.putString("Name",Name);
StartActivity(i); 
```

但这会使我的活动关闭并打开下一个活动，不是吗？有什么方法可以让我只传递数据而不打开其他活动？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:23:21.430

我认为您正在寻找带有 SharedPreference 的东西，请参阅文档：[SharedPreference](http://developer.android.com/guide/topics/data/data-storage.html#pref)

如果这是正在寻找的东西。

尝试这个：

全球的：

```
private SharedPreferences pref; 
```

创建：

```
pref = this.getSharedPreferences("SharedPreference", Context.MODE_PRIVATE); 
```

你要保存数据的地方：

```
String data = "yourData"
pref.edit().putString("myData", data).commit(); 
```

另一个活动：

全球的：

```
private SharedPreferences pref; 
```

创建：

```
pref = this.getSharedPreferences("SharedPreference", Context.MODE_PRIVATE); 
```

您要获取数据的地方：

```
String dataFromFristActivity = pref.getString("myData", null); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:22:10.500

您的呼叫活动不会关闭，而是暂停。我同意@Egor。调用的活动尚不存在。除非您尝试在两个不同应用程序的活动之间发送数据。那是完全不同的蠕虫罐头。

# ruby - Number Bases & Ruby - 增加用于特定数字基数的变量的最快方法是什么？

> ID：15931147
> 
> 赞同：1
> 
> 时间：2013-04-10T16:15:21.500
> 
> 标签：ruby, numbers

我希望能够有一个变量“num”，我可以增加它并让它理解它的基数。

例如，如果 num 以 7 为底，等于 66，如果我做 num+= 1，则 num 应该设置为 100。

一种解决方案涉及 to_s 和 to_i，但是，有这么多的转换正在进行，它似乎不是很有效。

```
def increment_with_base(number, base)
  number_base_ten = number.to_s.to_i(base)
  number_base_ten += 1

  number_base_ten.to_s(base).to_i
end 
```

还有比这更合适的吗？是否可以告诉 Ruby 我使用的是哪个数字基数，这样我就不必进行如此多的转换？

正如我在下面的评论中提到的，我非常熟悉数字基数 - 只是不是 Ruby 中的数字基数。我实际上需要显示每个增加的数字（我会增加很多）。

如果您知道问题的答案，则无需阅读下一部分。但是，我添加它是为了澄清我为什么要做我正在做的事情。除非您正在寻找更多信息，否则无需阅读以下内容。

有关更多信息，我正在生成一组图，其中每个节点只有 0 或 1 个转换。每个节点由一个数字表示，特定数字表示有向边指向的其他节点。例如，数字 4.3.1.0 是一个有四个节点的图，其中第一个节点到第四个节点有一条边，第二个到第三个节点有一条边，第三个到第一个节点有一条边，第四个节点没有有任何过渡。

因此，如果我想生成所有四个节点图，其中每个节点只有一个退出边，我需要从 0.0.0.0 计数到 4.4.4.4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:23:54.903

基数对算术无关紧要。数字只是数字，所有基数只是表示它们的方式略有不同。例如，66 [7]（x [y]表示 x 以 y 为基数）是 48 [10]，无论您在向其添加 1 时认为的基数如何，结果始终是相同的数字：100 [7] = 49 [10] = 31 [16] = ...对于任何其他基础（即使是非常奇怪的基础，如黄金比例基础），依此类推。这是相同的操作具有相同的结果。

只需对*数字*进行算术运算，只在它真正重要时才担心基数（例如，在为用户渲染时）。即使您需要在每次更新后显示它，您仍然可以节省几次转换，这不仅更快，而且更简单、更清洁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:48:27.770

如果您只是想在不同的基数中枚举，则不需要显式递增：

```
BASE = 4
MAX = 100
(0..MAX).each do |x|
   puts x.to_s( BASE )
end 
```

这不是很多代码，而且速度非常快。这适合要求吗？

为了更好地匹配您的潜在问题（以及我的理解？）

```
NODES = 4
BASE = NODES + 1
MAX = BASE ** NODES
(0...MAX).each do |x|
   puts ("0" * NODES + x.to_s( BASE )).chars.to_a[(-NODES..-1)].join('.')
end 
```

我在笔记本电脑上将上述时间设置为 0.01 秒。但是，如果您尝试使用 9 个节点，则需要更长的时间（毫不奇怪，您将循环 10 亿次！）

# iphone - 如何从 mkmapview 隐藏当前位置注释

> ID：15931154
> 
> 赞同：0
> 
> 时间：2013-04-10T16:15:42.650
> 
> 标签：iphone, ipad, ios6, mkmapview

在我的应用程序中，我使用了 MKmapview，我想隐藏用户当前位置注释点，这是我的代码

```
 - (void)viewDidLoad
 {
  [super viewDidLoad];
  appDel=(AppDelegate *)[UIApplication sharedApplication].delegate;
  DatabaseController *dbObj=[[DatabaseController alloc] init];
  NSString *query=[NSString stringWithFormat:@"select * from petBoundarySettings where petId=%@",self.petID];
  NSMutableArray *alertSettingArray=[dbObj getPetAlertSerrings:query :[appDel getDBPath]];
 if([alertSettingArray count]>0){
    distance=[[[alertSettingArray objectAtIndex:0] objectForKey:@"distance"] integerValue];
 address=[[alertSettingArray objectAtIndex:0] objectForKey:@"address"];
 lat2=[[alertSettingArray objectAtIndex:0] objectForKey:@"lat"] ;
 lon2=[[alertSettingArray objectAtIndex:0] objectForKey:@"lang"] ;
}
UIImageView *imageNav = [[UIImageView alloc] initWithImage: [UIImage imageNamed: @"sml-cat_03.png"]];
self.navigationItem.rightBarButtonItem = [[UIBarButtonItem alloc] initWithCustomView:imageNav];
[imageNav release];
[dbObj release];
MKCoordinateSpan span;
span.latitudeDelta=.01;
span.longitudeDelta=.01;
MKCoordinateRegion region;
//distance=appDel.alertDistance;
locationManager = [[CLLocationManager alloc] init];
locationManager.delegate = nil;
locationManager.desiredAccuracy = kCLLocationAccuracyBest;
locationManager.distanceFilter = kCLDistanceFilterNone;
[locationManager startUpdatingLocation];
currentAnnotation=[[MyAnnotations alloc]init];
NSLog(@"GL%f",appDel.getlat);
NSLog(@"GN%f",appDel.getlon);
regionCoordinate.latitude =[lat2 floatValue];
regionCoordinate.longitude = [lon2 floatValue];
currentAnnotation.coordinate=regionCoordinate;
currentAnnotation.title=@"Boundary Location";
currentAnnotation.subtitle=appDel.address;
     region.center=CLLocationCoordinate2DMake(regionCoordinate.latitude,regionCoordinate.longitude);

region.span=span;
[_myMapView setRegion:region animated:YES];
[_myMapView regionThatFits:region];

region1=region;
petAnnotation=[[MyAnnotations alloc]init];
petCoordinate.latitude = +11.028549739;
petCoordinate.longitude = +76.89644586;
petAnnotation.coordinate=petCoordinate;
petAnnotation.title=@"My Pet Location";
petAnnotation.subtitle=@"Vadavalli";
MKCircle *circle = [MKCircle circleWithCenterCoordinate:regionCoordinate radius:distance];
[_myMapView addOverlay:circle];
CLLocation *whereIAm = [locationManager location];
NSLog(@"MI%@",whereIAm);
[_myMapView addAnnotation:currentAnnotation];
MKMapPoint p1 = MKMapPointForCoordinate(regionCoordinate);
MKMapPoint p2 = MKMapPointForCoordinate(petCoordinate);
CLLocationDistance dist = MKMetersBetweenMapPoints(p1, p2);
i=0;
[self getPetData];
timer= [NSTimer scheduledTimerWithTimeInterval:60 target:self selector:@selector(getPetData) userInfo:nil repeats:YES];
if(appDel.checkGPS==NO)
{
    [self getPetDataFromGPS];
}
} 
```

如何从 mkmapview 隐藏当前位置，请帮我整理一下。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:25:00.690

`MKMapView`有一个名为的属性`showsUserLocation`，您可以设置它来确定是否可以显示用户的位置。但是，我看到您没有在代码中设置它，默认值为 NO。

如果您使用的是 Xib 或 Storyboard，请`MKMapView`在其中选中，因为属性检查器中有一个用于此行为的复选框。（显示用户位置）

# iphone - 如何在调用方法目标 c 之前设置 NSString

> ID：15931155
> 
> 赞同：0
> 
> 时间：2013-04-10T16:15:43.977
> 
> 标签：iphone, ios, objective-c, xcode

这可能是一个简单的问题，但我无法弄清楚我错过了什么。

在 ViewControl.h 我声明了 UIColor

```
@property (nonatomic, strong) UIColor * myColor; 
```

在 ViewControl.m 我有一个方法可以做一些事情并返回新的 UIColor

```
@synthesize myColor = _myColor; 
```

在 ViewDidLoad 方法中

```
- (void)viewDidLoad
{
    myColor = [UIColor RedColor];
}

-(void) ShowColorPopUpView
{
    if (!self.wePopoverController)
    {

        ColorViewController *contentViewController = [[ColorViewController alloc] init];
        contentViewController.delegate = self;
        self.wePopoverController = [[WEPopoverController alloc] initWithContentViewController:contentViewController];
        self.wePopoverController.delegate = self;
        self.wePopoverController.passthroughViews = [NSArray arrayWithObject:self.navigationController.navigationBar];

        [self.wePopoverController presentPopoverFromRect:self.tvTweetDetails.frame
                                                  inView:self.view
                                permittedArrowDirections:(UIPopoverArrowDirectionUp|UIPopoverArrowDirectionDown)
                                                animated:YES];

    } else
    {
        [self.wePopoverController dismissPopoverAnimated:YES];
        self.wePopoverController = nil;
    }
}

-(void) colorPopoverControllerDidSelectColor:(NSString *)hexColor
{
    _myColor = [GzColors colorFromHex:hexColor];
    [self.view setNeedsDisplay];
    [self.wePopoverController dismissPopoverAnimated:YES];
    self.wePopoverController = nil;
}
- (UIColor *) returnColor
{
    return _myColor;
} 
```

我的问题从这里开始：我有两种方法可以更改 textview 字体和背景颜色

```
- (IBAction)btnFontColorPopUpMenu:(id)sender
{
    [self ShowColorPopUpView];
    tvTweetDetails.textColor = [self returnColor];
}
- (IBAction)btnTextViewBackGroundColor:(id)sender
{
    [self ShowColorPopUpView];
    tvTweetDetails.backgroundColor = [self returnColor];
} 
```

现在的问题是，当我调用它返回的方法时，它会返回 RED，如果我再次调用它，它会返回 BlackColor。

如何调用该方法并将颜色更改为新颜色，然后返回。我想直接获得黑色。

我想先执行该方法，然后返回颜色，但发生的是在执行该方法之前分配颜色。

我希望我把问题说清楚了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:03:32.917

好的，我会解决这个问题。

我怀疑您在换色器方法中正在执行某种`presentViewController:`... 方法。这很好，但它有影响。您调用的方法在该演示文稿期间*继续执行*。这意味着它可能会返回等。

这就是委托概念的用武之地。您可能会从这里稍微重构数据流中受益。

我的建议（如果我对颜色选择器 UI 的呈现是正确的）是您进行以下更改：

1.  `@protocol ColorPickerDelegate`用一种方法创建一个：`-(void) userChoseColor:(UIColor *) color`
2.  添加`@property (weak) id<ColorPickerDelegate> delegate`到您的颜色选择器视图控制器
3.  让你的VC在这里实现那个协议
4.  在委托方法中，设置您的本地属性
5.  为本地属性实现自定义设置器，并在颜色更改*时更新背景颜色。*

# c - 将内存分配给指向结构的指针

> ID：15931160
> 
> 赞同：0
> 
> 时间：2013-04-10T16:16:04.733
> 
> 标签：c, pointers, struct

在我正在开发的程序中，我有这样的结构：

```
typedef struct _event {
  int id;
  char title[30];
  char desc[60];
  int state;
} event; 
```

在这个程序的某个部分，我将使用一个需要指向该结构的指针的函数。

```
void event_foo(event *e)
{
 /* Something will be done on this function, 
    with certain parameters of the pointer to the struct are needed */
} 
```

但是在访问这个函数之前，我需要为这个指向结构的指针分配内存。

```
int main()
{
  event newevent;

  /* In some place before invoking the function, 
     memory assignation is required */

  event_foo(&newevent);

  return 0;
} 
```

¿ 有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:19:24.517

这个：

```
event newevent; 
```

创建 的堆栈分配实例`event`，并为其提供内存。此内存将一直有效，直到`newevent`超出范围。如果`event_foo()`要读取 的任何成员`newevent`而不仅仅是更新它们，那么您必须`newevent`在调用 之前初始化 的成员`event_foo()`。

如果您声明了一个指向`event`：

```
event* newevent; 
```

那么有必要`newevent`在访问其成员之前为其分配内存：

```
newevent = malloc(sizeof(*newevent)); 
```

在这种情况下，内存的`newevent`存在直到`free(newevent)`被调用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T16:17:43.070

你的做法是对的

你所做的声明

```
event newevent; 
```

正在为`newevent`with 类型分配静态内存`event`

当你调用函数时

```
event_foo(&newevent); 
```

`&`在开头添加`newevent`意味着您已经提供了地址（指针） `newevent` 作为函数的输入参数

进入函数可以修改结构体的参数

**例子**

```
void event_foo(event *e)
{
  e->id = 5;
  strcpy(e->title, "any string");
  strcpy(e->desc, "any string2");
  e->state = 1;
} 
```

并且在`main()`调用 之后`event_foo()`，你可以通过这种方式访问​​你的数据

```
event_foo(&newevent);
printf("id = %d\ntitle = %s\ndesc = %s\nstate = %d\n",
       newevent.id,
       newevent.title,
       newevent.desc,
       newevent.state);
return 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:21:09.900

如果只需要 e 指向作为参数传递的对象，则无需为其分配内存。通过指针，我们直接访问对象的内存位置，因此我们可以直接对传递的对象的成员进行任何更改

# c# - 在 Windows / C# 上加速 Redis

> ID：15931164
> 
> 赞同：5
> 
> 时间：2013-04-10T16:16:20.397
> 
> 标签：c#, redis, servicestack

我在我的本地机器上试验 Redis。到目前为止，我已经让它工作了，尽管*速度很*慢。

我有一个大约 14,000 个对象的数组，每次检索它们只需要 3 秒多一点，这对于生产目的来说显然太慢了。

我有一种感觉，大部分时间都花在反序列化对象上，但我不确定是否有什么可以纠正的。

我可以在不序列化它们的情况下首先存储它们（如果有意义的话）？如果做不到这一点，我能做些什么来加快反序列化过程吗？我已经实现了 ISerialization，但它似乎没有任何区别。

使用 Redis 的 ServiceStack 改编供参考。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-27T00:42:44.240

> 除非你测量，否则你不会知道。
> 
> [资料来源：我的一位明智的开发经理，大约在 1992 年！]

在指责所谓的罪魁祸首之前，您应该首先分析/测量您的代码，以确定您的性能问题究竟出在哪里。然后实施修复并重新测量。重复直到你的表现令人满意。

有许多分析器可供使用，包括[Visual Studio 的内置分析器](http://msdn.microsoft.com/en-us/library/ms182372.aspx)，其他可作为插件使用（例如[RedGate 的 Ants 分析器](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)、[JetBrains 的 dotTrace](http://www.jetbrains.com/profiler/)或[Telerik 的 JustTrace](http://www.telerik.com/products/memory-performance-profiler.aspx)等）

或者，尝试使用`Trace.WriteLine(...)`和`Stopwatch`检测您的代码，以计算出执行数据访问操作需要多长时间以及反序列化数据需要多长时间。

FWIW，如果最近构建的 Redis 运行速度与您在 Windows 或任何其他操作系统上看到的一样慢，我会感到惊讶。哎呀，即使是 SQL Server Express (2012) 也可以在不到 1 秒的时间内返回 199000 行并将它们存储在 CSV 中： ![在此处输入图像描述](https://i.stack.imgur.com/7H4Cv.png)

# git - 是否有理由不将 ssh 和智能 http 访问与 git 混合使用？

> ID：15931171
> 
> 赞同：5
> 
> 时间：2013-04-10T16:16:36.057
> 
> 标签：git, gitolite, git-remote

我已经为一个小团队使用 gitolite 建立了一个 git 服务器。我们中的一个人创建了一个 repo 并使用智能 http 推送了初始提交 - 假设它位于

```
http://ourhost/project.git 
```

然后我继续使用 ssh 克隆项目，即

```
git clone git@ourhost:project.git 
```

Git 让我这样做并创建了项目文件夹，但报告说 repo 是**空**的。此外，我所做的任何 git pull 都给了我“**找不到远程 ref master** ”错误。当我然后跑

```
git remote -v show origin 
```

它显示 HEAD 分支：（未知）。当我检查服务器（运行 gitlab）时，我可以看到 master 分支和所有代码，所以它很明显就在那里。

最后，我使用智能 http 和 lo 克隆了它，发现一切正常，我可以继续使用它。

但这是为什么呢？为什么我们每个人使用哪种方法来推/拉很重要？Gitlab 甚至显示了两个 URL（用于 ssh 或智能 http）作为 repos 的替代品，因此它似乎可以正常工作......）

还是我错过了什么……？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T10:58:35.053

对于 GitLab V4 和 Gitolite，ssh 仍然是首选的访问方法。
Https 访问可以完全绕过 Gitolite。

由于[GitLab V5 不再使用 Gitolite](http://blog.gitlab.org/gitlab-5-dot-0-has-been-released/)（但现在[**`gitlab-shell`**](https://github.com/gitlabhq/gitlab-shell)改为使用），因此 ssh 和 https 访问可以更一致地使用访问权限管理。

# php - How to have control of printing every element of an array in PHP?

> ID：15931175
> 
> 赞同：0
> 
> 时间：2013-04-10T16:16:42.853
> 
> 标签：php, database, arrays

I want to be able to have control of what I print in this array. So far this is what I have:

```
<?php
/* DB CONNECTION */
try {
  $pdo = new PDO('mysql:host=' . DB_HOST . '; dbname=' . DB_NAME . '', DB_USER, DB_PASSWORD);
  $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
  $pdo->exec('SET NAMES "utf8"');
  $sql = 'SELECT nombre,categoria,descripcion FROM equipos ORDER BY nombre ASC';
  $result = $pdo->query($sql);
}
catch(PDOException $e) {
  echo $error = 'Error fetching jokes: ' . $e->getMessage();
  exit();
}

/*FETCH ARRAY */
$equipos = array();
while ($row = $result->fetch()) {
  $equipos[] = $row['nombre'];
  $equipos[] = $row['categoria'];
  $equipos[] = $row['descripcion'];
}
?>       
<?php
/* PRINT ARRAY */
foreach($equipos as $equipo): ?>
  <p><?php
  echo htmlspecialchars($equipo);
?></p>
<?php
endforeach; 
?> 
```

My results are:

```
Value1
value2
Value3

etc. 
```

I want to be able to print something like:

```
Value1, Value2, Value3
Value4, Value5, Value6 
```

There's must be a practical easier way.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:31:37.503

很难说你想要什么，但我在黑暗中拍摄
注意连接到 PDO的**正确方法**

```
<?php

$opt = array(
    PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
    PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
);
$dsn = 'mysql:host=' . DB_HOST . '; dbname=' . DB_NAME . ';charset=utf8';
$pdo = new PDO($dsn, DB_USER, DB_PASSWORD, $opt);

$sql    = 'SELECT nombre,categoria,descripcion FROM equipos ORDER BY nombre ASC';
$result = $pdo->query($sql);
$data   = $result->fetchAll();
?> 
```

现在在`$data`变量中，您有一个包含所有行的数组，每行都包含一个带有选定字段的数组。因此，您可以通过字段名称控制它们：

```
<?php foreach($data as $row): ?>
  <p>
    <?=htmlspecialchars($row['nombre'])?>,
    <?=htmlspecialchars($row['categoria'])?>,
    <?=htmlspecialchars($row['descripcion'])?>
  </p>
<?php endforeach ?> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T16:21:16.793

而不是使用 foreach 语句使用

```
for(var i = 0;i<(sizeof($equipos);i++)
{
 echo htmlspecialchars($equipo[i]);
} 
```

# highstock - Highstock bug: dragging one navigator handle changes both dates

> ID：15931177
> 
> 赞同：0
> 
> 时间：2013-04-10T16:16:53.410
> 
> 标签：highstock

When dragging one of the navigator handles, both dates change.

To reproduce, go to [http://jsfiddle.net/rNer2/5/](http://jsfiddle.net/rNer2/5/) and drag one of the navigator handles. In the provided test case, the problem only occurs the first time a handle is dragged. It can actually also happen in other situations, but perhaps fixing it here will fix it for the other cases as well.

See duplicate code below:

```
<div id="container" style="height: 400px; min-width: 600px"></div>  
<script src="http://code.highcharts.com/stock/highstock.js"></script>
<script src="http://code.highcharts.com/stock/modules/exporting.js"></script>
<div id="mindate" style="position:absolute;top:40px;left:0px;margin-left:20px;"></div>
<div id="maxdate" style="position:absolute;top:40px;right:0px;margin-right:50px;">

$(function() {
  var data = [];

  for (var i = 1971; i < 2020; ++i) {
      data.push([Date.UTC(i, 0, 1), 1]);
  }

  var chart = new Highcharts.StockChart({
        chart: {
            renderTo: 'container',
            type: 'column',
            events: {
                load: function() {
                    displayDates(this.xAxis[0].getExtremes());
                }
            }
        },
        xAxis: {
            ordinal: false,
            events: {
                afterSetExtremes: function(e) {
                    displayDates(e);
                }
            },
            min: Date.UTC(1984, 0, 1),
            max: Date.UTC(1988, 0, 1)
        },
        series: [{
            data: data
        }]
    });                    
});

function displayDates(e) {
    $('#mindate').html(Highcharts.dateFormat('%m/%d/%y %I:%M:%S%p', e.min));
    $('#maxdate').html(Highcharts.dateFormat('%m/%d/%y %I:%M:%S%p', e.max));    
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:01:35.713

请熟悉非常简单的例子：

[http://jsfiddle.net/ebLTE/](http://jsfiddle.net/ebLTE/)

```
 $('#container').highcharts('StockChart', {
        chart:{
            type:'column'
        },

        rangeSelector : {
            selected : 1
        },

        title : {
            text : 'AAPL Stock Price'
        },
        xAxis:{
            min:1172707200000,
            max:1175126400000
        },

        series : [{
            name : 'AAPL',
            data : data,
            tooltip: {
                valueDecimals: 2
            }
        }]
    }); 
```

# java - android.database.sqlite.SQLiteDiskIOException - 不知道为什么

> ID：15931182
> 
> 赞同：0
> 
> 时间：2013-04-10T16:17:06.717
> 
> 标签：java, android, database, sqlite, exception

在我的开发者控制台中，我收到了这个错误报告：

```
android.database.sqlite.SQLiteDiskIOException: error code 10: disk I/O error
at android.database.sqlite.SQLiteStatement.native_execute(Native Method)
at android.database.sqlite.SQLiteStatement.execute(SQLiteStatement.java:61)
at android.database.sqlite.SQLiteDatabase.delete(SQLiteDatabase.java:1777)
at android.webkit.WebViewDatabase.clearCache(WebViewDatabase.java:708)
at android.webkit.CacheManager.clearCache(CacheManager.java:605)
at android.webkit.WebViewWorker.handleMessage(WebViewWorker.java:199)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:130)
at android.os.HandlerThread.run(HandlerThread.java:60) 
```

我的应用程序中没有 swlite 数据库，我使用 adMob、Facebook API 和 Google Maps api v2，有人知道这可能是由什么引起的吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:23:01.807

检查这个网址。它可以帮助你

```
Since you are using External Storage, your application must be aware of the External Storage state, which you can get via `Environment.getExternalStorageState()'.

You must only access External Storage when the state is MOUNTED. 
```

[关联](https://stackoverflow.com/questions/7009699/sqlitediskioexception-error-code-10-disk-i-o-error)

谢谢

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-19T16:35:22.540

这似乎是android的一个已知错误。但还没有摆脱它。看这里：

[https://android.googlesource.com/platform/external/sqlite.git/](https://android.googlesource.com/platform/external/sqlite.git/)

并通知提交

42c3f41 添加更多日志记录以跟踪磁盘 I/O 错误。通过杰夫布朗 - 10 个月前

# mp3 - 你如何编码成 mp3 文件？

> ID：15931189
> 
> 赞同：0
> 
> 时间：2013-04-10T16:17:21.960
> 
> 标签：mp3

我有兴趣创建一个drm类型的程序。我想将代码放入一个 mp3 文件中，该文件可以在线检查它是否已获得许可。在线方面不是我目前关心的问题，但我在网上寻找了一些关于这样做的资源，但我发现没有什么真正有用的。有人在谈论病毒，但我希望这是故意的，而不是恶意的。只需在您播放 mp3 时，它会快速在线检查许可证是否允许播放。如果是，它会播放，如果不是，它会给出错误并说您需要登录或购买歌曲。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:42:42.430

我很确定这是不可能的。mp3 文件不能包含可执行代码。它们可以包含可以表示代码的字节数据，但 mp3 播放器需要将其解释为这样并执行它，而不是尝试将其作为音乐播放，而没有播放器这样做。您必须编写自己的播放器来执行此操作，但由于无法将 mp3 文件限制为只有一个播放器（同样，因为它们不能包含代码），您必须创建自己的竞争标准。此外，没有什么可以阻止某人将此 mp3 转换为普通的无约束 mp3 并共享它。

从技术含量较低的角度来看，作为一个用户（鄙视 DRM），如果一个 mp3 正在检查我是否被“允许”拥有它，那会让我感到无休止，如果我被要求在线时更是如此为了听它，我只会删除它，再也不会购买/下载/窃取该格式的任何东西。

（这算作答案吗？评论太长了。）

# ios - 自定义 Segue 后退按钮使应用程序崩溃

> ID：15931190
> 
> 赞同：4
> 
> 时间：2013-04-10T16:17:32.813
> 
> 标签：ios, storyboard, segue, uistoryboardsegue

我为我的应用程序编写了一个自定义的 segue，它部分地掩盖了源视图控制器。segue 工作正常，我得到了预期的效果。当我按下按钮将 segue 展开回源控制器时，应用程序崩溃。我在各种方法中放置了一些日志语句，但没有调用任何方法，所以我认为我把视图连接错了。这是segue代码：

```
- (void)perform {
NSLog(@"performing!");
UIView *sourceView = ((UIViewController *)self.sourceViewController).view;
UIView *destView = ((UIViewController *)self.destinationViewController).view;
UIViewController *sourceController = ((UIViewController *)self.sourceViewController);

if (!_rewinding) {
[sourceView.window insertSubview:destView aboveSubview:sourceView];
    destView.center = CGPointMake(sourceView.frame.size.width * 1.5, sourceView.center.y);
}

CGPoint newSourceCenter = CGPointMake(sourceView.frame.origin.x - sourceView.frame.size.width * 0.4, sourceView.center.y);
CGPoint newDestCenter = CGPointMake(sourceView.center.x + sourceView.frame.size.width * 0.1, sourceView.center.y);

[UIView animateWithDuration:1.4
                 animations:^{
                     if (_rewinding) {
                         NSLog(@"rewind in segu");
                         destView.center = CGPointMake([UIScreen mainScreen].bounds.size.width/2, destView.center.y);
                         sourceView.center = CGPointMake([UIScreen mainScreen].bounds.size.width*1.5, sourceView.center.y);
                         destView.alpha = 1.0;
                     } else {
                         destView.center = newDestCenter;
                         sourceView.center = newSourceCenter;
                         sourceView.alpha = 0.5;
                     }
                 } completion:^(BOOL finished) {
                     if (_rewinding)
                     NSLog(@"completed animation");
                 }];
} 
```

几张照片显示发生了什么。点击一个单元格时，详细视图从屏幕右侧向左滑动，源视图也向左滑动。

![主/源视图](https://i.stack.imgur.com/x1hpD.png) ![转场之后](https://i.stack.imgur.com/Z4ptp.png)

我试过使用`[source presentViewController:dest]`，但这样做会从窗口中删除源视图。由于我部分遮挡了源，因此动画后它必须留在屏幕上。设置它的正确方法是什么？

编辑：启用僵尸后，我在日志中得到了这个。这对应于destinationViewController。所以很明显它在segue期间没有被保留。

```
[58880:c07] *** -[UIStoryboardUnwindSegueTemplate performSelector:withObject:withObject:]: message sent to deallocated instance 0x1f3c7fe0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:48:38.473

我将用我最终做的事情来回答这个问题，但让它保持开放，因为我对一种在屏幕上留下部分原始视图的转场方式非常感兴趣。

我的快速解决方案是在原始视图控制器中处理所有动画。我认为这涵盖了上述所有与内存相关的问题，但可能不正确，因此使用风险自负。

```
- (void)showModalDetailView {
NSLog(@"show modal");
if (!self.detailViewController) {
    self.detailViewController = (SegmentDetailViewController *)[[UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil] instantiateViewControllerWithIdentifier:@"segDetail"];
    self.detailViewController.view.center = CGPointMake(self.view.frame.size.width * 1.5, self.view.center.y);
    [self.view.superview addSubview:self.detailViewController.view];
    self.detailViewController.delegate = self;
}

CGPoint newSourceCenter = CGPointMake(self.view.frame.origin.x - self.view.frame.size.width * 0.4, self.view.center.y);
CGPoint newDestCenter = CGPointMake(self.view.center.x + self.view.frame.size.width * 0.1, self.view.center.y);

[UIView animateWithDuration:1.4
                 animations:^{
                     if (self.shouldRewind) {
                         self.view.center = CGPointMake([UIScreen mainScreen].bounds.size.width/2, self.view.center.y);
                         self.detailViewController.view.center = CGPointMake([UIScreen mainScreen].bounds.size.width*1.5, self.detailViewController.view.center.y);
                         self.view.alpha = 1.0;
                         self.shouldRewind = NO;
                         self.detailViewController = nil;
                     } else {
                         self.detailViewController.view.center = newDestCenter;
                         self.view.center = newSourceCenter;
                         self.view.alpha = 0.5;
                         self.shouldRewind = YES;
                     }
                 } completion:^(BOOL finished) {
                     NSLog(@"animation complete");

                 }];

} 
```

# forms - 无法使用 CKEditor 提交表单？

> ID：15931191
> 
> 赞同：1
> 
> 时间：2013-04-10T16:17:33.527
> 
> 标签：forms, symfony, ckeditor, submit-button

我有以下表格：

```
<form action="/web/app_dev.php/system/blog/new" method="post" >
    <div id="newblogpost">
    <div>
        <label for="newblogpost_title" class="required">Title</label>
        <input type="text" id="newblogpost_title" name="newblogpost[title]" required="required" />
    </div>
    <div>
        <label for="newblogpost_status">Status</label>
        <input type="checkbox" id="newblogpost_status" name="newblogpost[status]" value="1" />
    </div>
    <div>
        <label for="newblogpost_content" class="required">Content</label>
        <textarea id="newblogpost_content" name="newblogpost[content]" required="required"    class="ckeditor" id="editor1"></textarea>
    </div>
    <input type="hidden" id="newblogpost__token" name="newblogpost[_token]" value="f58cad16c1948231a504f592ec74edd7aaeca29d" /></div>

    <button type="submit">Cmon?</button>
</form> 
```

由于某种原因，我无法提交该死的东西。如果我在我的 textarea 字段上禁用 CKEditor，它将提交，这（显然）使我相信这是 CKEditor 的问题。

我已经尝试了一些东西，例如字段输入的各种名称，输入类型 =“提交”而不是按钮等，但没有运气。

我似乎找不到其他人有同样的问题，我最终发现的只是人们对 AJAX 表单有问题。这只是一个简单的、老式的可提交表单。

我是否遗漏了一些阻止提交的语义？或者其他人可以发现问题吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T16:29:02.497

您显然在所有浏览器上都有问题，并且这篇文章很旧，但[这篇文章](http://ckeditor.com/forums/CKEditor-3.x/Chrome-specific-HTML5-specific-bug)似乎表明“必需”属性可能是来源。你可以检查没有这个属性吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-04-09T06:48:37.157

这个问题仍然存在 `https://cdn.ckeditor.com/#ckeditor5`

如前所述，它可以通过绕过 html5 验证来修复。IE
`<button type="submit" formnovalidate="formnovalidate" >Submit Data</button>`

# r - R中的层次聚类默认行为？

> ID：15931192
> 
> 赞同：2
> 
> 时间：2013-04-10T16:17:35.623
> 
> 标签：r, statistics, cluster-analysis, hierarchical-clustering

当您在 R 中执行以下聚类时：

```
> d <- dist(as.matrix(mtcars))
> hc <- hclust(d)   
> plot(hc) 
```

你会得到一棵树，其节点的分支长度不相等。在普通的层次聚类（upgma）中，所有的长度都必须相等。有人可以解释一下 hclust 的默认行为，以及它如何产生不相等的长度吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T14:07:48.007

我也认为，这是一种奇怪的行为。但它不是由`hclust`而是`plot.hclust`相反引起的。如果您查看帮助 ( `? plot.hclust`)，您会发现`hang`默认设置为 0.1 的参数：

> 标签应悬挂在绘图其余部分下方的绘图高度分数。负值将导致标签从 0 下垂。

因此，从 upgma 已知的行为可以通过

```
plot( hc, hang = -1 ) 
```

我猜这两种不同的行为是不同定义的结果，应该将高度分配给只包含一个观察的集群，即不与另一个合并。显然这里的定义是：它们根本没有高度。形式上，用 . 绘制它们是正确的`hang = 0`。但由于这看起来很难看，我猜这`hang = 0.1`是设置为默认值。

在任何情况下，你都会得到长度不等的分支`hang >= 0`。

# boost-asio - boost 线程和套接字

> ID：15931200
> 
> 赞同：0
> 
> 时间：2013-04-10T16:17:55.110
> 
> 标签：boost-asio, boost-thread

我有一个非常奇怪的问题。在服务器类中，如果我评论 t1.join() 我无法从 HandleFunction 中的套接字读取任何内容。但是，如果我取消注释 t1.join()，就可以了。但我需要这个监听函数永远运行并创建一个线程来处理套接字，只要它接受一个。如果我添加加入肯定会产生一些问题。我该如何解决？提前致谢

```
class server
{
  io_service;
  acceptor;
  void listen()
  {
  for(;;)
  {
    boost::asio::ip::tcp::socket socket(io_service);
    socketPtr = &socket;
    acceptor.accept(socket);
    HandleClass objHandleClass;
    boost::thread t1(boost::bind(&HandleClass::HandleFunction, &objHandleClass, boost::ref(socketptr)));
    //t1.join();
  }
  }
}

int main()
{
  server objServer;
  objServer.listen();
}

class HandleClass
{
  HandleFunction(socket* socketPtr)
  {
    //read from this socket;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:37:05.673

在你的循环里面`void listen()`

```
for(;;)
  {
    boost::asio::ip::tcp::socket socket(io_service);
    socketPtr = &socket;
    acceptor.accept(socket);
    HandleClass objHandleClass;
    boost::thread t1(boost::bind(&HandleClass::HandleFunction, &objHandleClass, boost::ref(socketptr)));
    //t1.join();
  } 
```

您的对象将超出范围并在此循环的每次迭代中被销毁，这就是为什么在注释掉`socket`时您无法从套接字读取。`t1.join()`

# android - 如果在片段被拆除时并不总是调用 onSaveInstanceState ，那么它与片段的相关性是什么？

> ID：15931202
> 
> 赞同：1
> 
> 时间：2013-04-10T16:17:58.720
> 
> 标签：android, android-fragments

正如文档所说：

> 在很多情况下，一个片段可能大部分被拆除（例如当放置在没有显示 UI 的后台堆栈时），但它的状态不会被保存，直到它拥有的 Activity 实际需要保存它的状态。

重点是什么？假设您有在片段被销毁时要保存的成员变量：

```
@Override
public void onSaveInstanceState(Bundle outState) 
{
    super.onSaveInstanceState(outState);
    outState.putLong("userId", mUserId);
    outState.putString("username", mUsername);
} 
```

当 onSaveInstanceState 最终被调用时（例如当宿主活动被销毁时），这些变量不再存在，所以你得到一个空指针异常。

有什么办法解决这个问题？谢谢！

# security - 数据库密码安全，用php加密真的有区别吗？

> ID：15931204
> 
> 赞同：1
> 
> 时间：2013-04-10T16:18:06.220
> 
> 标签：security, passwords

关于密码和数据库安全，请注意用户访问用户m 的唯一方法是询问是否有人可以访问数据库，他不需要用户密码，他可以对数据库本身进行更改。 关于加密，我在 php 手册上发现河豚是最受关注的，但我在谷歌的第一个结果搜索中发现了一个在线解密器，而且，黑客可能会知道如何解密他已经获得数据库的任何密码密码本身。 你怎么看？密码加密真的需要并且安全吗？先感谢您。`s passwords is if he somehow acess the database itself (probably he got the db password), so does it really makes diference if the user password is hashed or encrypted?
I`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:16:06.267

我想对已经给出的好的答案做一些补充。

首先，你提到的Blowfish确实是一种加密算法，可以解密。但不要将**Blowfish**与**BCrypt 混为一谈**，BCrypt是一种基于 Blowfish 的散列算法。

**其次，您对可以读取**您的数据库的攻击者的密码进行哈希处理。获得读取访问权限比写入访问权限容易得多，常用的技术是 SQL 注入。[您可以在此演示](http://www.martinstoeckli.ch/hash/en/hash_sqlinjection.php)中自己尝试一下，单击 → 箭头以填写准备好的输入。

1.  因此，虽然攻击者可能会读取您的数据库，但这并不意味着他可以对其进行写入。因为他只知道密码的哈希值，所以他无法在登录表单中输入原始密码。
2.  如果攻击者也有写权限，你无法阻止他使用你的账户，但他仍然不知道原始密码，无法在其他网站上尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:23:13.633

有人可以使用 SQL 注入来获取用户的密码。在这种情况下，他可能无法访问除了用户表之外的任何表，所以

> 如果用户密码被散列或加密，它真的会有所不同吗

是的。除此之外，如果您有版主、开发人员和您查看此表，作为用户，如果您查看的是哈希而不是实际密码，我会感觉更舒服，因为我可能会在其他地方使用该密码网站。总体而言，它为您的用户提供了更多的安全性和舒适性，所以真正的问题是，为什么不呢？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:24:30.373

> 关于加密，我在 php 手册上发现河豚是最受关注的，但我在谷歌的第一个结果搜索中发现了一个在线解密器

最好的解决方案是散列你的密码，而不是加密它们。许多人错误地将加密与散列混淆（反之亦然）。加密的文本可以被解密，而散列是单向的。即一旦你散列一些东西，你就不能“去散列”它。您正在寻找的是[Bcrypt](http://en.wikipedia.org/wiki/Bcrypt)，它是一种***基于***[Blowfish](http://en.wikipedia.org/wiki/Blowfish_%28cipher%29)密码的散列算法。

关于攻击者访问您的密码哈希：

> 除了加入盐来防止彩虹表攻击之外，bcrypt 还是一个自适应函数：随着时间的推移，可以增加迭代次数以**使其变慢**，因此即使在计算能力增加的情况下，它仍然可以抵抗暴力搜索攻击。

Bcrypt 的好处是它很慢，这意味着尝试破解 Bcrypt 哈希相对昂贵（取决于盐的迭代和随机性）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T16:29:17.813

如果攻击者掌握了用户的密码，他就有了他的密码。
如果攻击者获得了用户密码的哈希值，他只有密码的哈希值，而不是密码本身。

现在想想人们的懒惰：很可能检索到的密码不是该帐户独有的，但也适用于其他帐户（电子邮件、Twitter、Facebook 等）。这实际上一直在发生。

如果您只是使用 bcrypt、scrypt 或 PBKDF2 等强密码散列方案存储用户密码的散列，黑客将需要大量资源（时间或处理能力）来猜测或暴力破解密码。

顺便说一句：哈希函数是不可逆的。那些哈希反转站点只是巨大的查找表，它们为已知的密码+哈希对返回*一个密码。*

# javascript - 我需要'document.ready()'这段Javascript吗？

> ID：15931205
> 
> 赞同：0
> 
> 时间：2013-04-10T16:18:10.847
> 
> 标签：javascript, jquery, html

我使用 freemarker 为用户请求动态生成 HTML 页面。这些包括在标头中指向 javascript 文件的链接。在这个文件中，定义了一个数组。我需要`myArray[0]`为每个生成的页面分配不同的动态值。

我正在考虑在 HTML 中添加一个脚本：

```
<body>
  <script>myArray[0]="MyDynamicValue";</script>
  ...
</body> 
```

我想知道我是否应该在（例如）JQuery 的文档就绪中执行这个初始化？我不这么认为，但我在犹豫...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T16:19:25.273

它与访问 DOM 无关，因此无需等待 DOM 准备好。

（虽然没有任何东西构造一个`myArray`对象，所以在没有任何其他代码的情况下，这将抛出一个错误......但等待 DOM 准备好不会改变这一点，除非它同时也导致它在`myArray`创建后执行。）

# powershell - 从 PowerShell 运行控制台 EXE：本地和远程会话中的输出行为不同

> ID：15931208
> 
> 赞同：2
> 
> 时间：2013-04-10T16:18:20.337
> 
> 标签：powershell, powershell-remoting

我正在尝试使用 PowerShell 中的 7za.exe（7-zip 的独立版本）解压缩存档。基本上，剥离所有服务代码，我的尝试如下所示：

```
 [string]$pathTo7z = "$env:TEMP\7za.exe"
  [Array]$arguments = "x", $dist, "-o$targetDir"

  & $pathTo7z $arguments 2>&1 
```

这`$dist`是 ZIP 文件的本地路径。这`$targetDir`是本地目录的完整路径。

如果我按原样运行它，我的意思是，在本地运行它，不涉及任何远程处理，我可以毫无问题地得到 7za.exe 的输出。就像我从 cmd.exe 运行它一样。

现在，如果我在远程会话中运行它，就会出现问题：

```
....
Invoke-Command -Session $s -ScriptBlock {
  ....
  [string]$pathTo7z = "$env:TEMP\7za.exe"
  [Array]$arguments = "x", $dist, "-o$targetDir"

  & $pathTo7z $arguments 2>&1
} 
```

当然，我确保远程 PC 上存在 7za.exe，等等。所以，当我以这种方式运行它时，我看到了一个非常奇怪的行为。它可以显示一些 7za.exe 的输出，然后就挂起。一段时间后（足够长，与提取 150 MB zip 所需的时间相比），它输出以下内容：

```
WARNING: The network connection to MyServer has been interrupted. Attempting to reconnect for up to 4 minutes...
WARNING: Attempting to reconnect to MyServer ...
WARNING: The network connection to MyServer has been restored. 
```

有时它会恢复运行并输出更多。但更多情况下它无法完成其工作并失败并出现以下错误：

```
Processing data for a remote command failed with the following error message: The WinRM client cannot process the request. The encrypted 
message body has an invalid format and cannot be decrypted. Ensure that the service is encrypting the message body according to the 
specifications. For more information, see the about_Remote_Troubleshooting Help topic.
    + CategoryInfo          : OperationStopped: (MyServer:String) [], PSRemotingTransportException
    + FullyQualifiedErrorId : JobFailure
    + PSComputerName        : MyServer 
```

那是什么？我应该怎么做才能获得控制台 EXE 输出，就像我在本地运行它时一样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-11T13:00:28.500

同样，它原来是 ESET NOD32 防病毒软件。只需按照[此处](http://mikefrobbins.com/2012/06/21/welcome-to-powershell-hell/)描述的步骤操作，它应该可以工作。

摘自那篇文章：

> 我推荐的解决此问题的方法是在协议过滤 > 排除的应用程序下为 PowerShell 和 PowerShell ISE 添加例外：
> 
> ![在此处输入图像描述](https://i.stack.imgur.com/vdYXv.png)

# sql - Excel 2013 不会导入 SQL Server 2012

> ID：15931210
> 
> 赞同：3
> 
> 时间：2013-04-10T16:18:23.313
> 
> 标签：sql, import, import-from-excel

我遇到了麻烦，因为 Excel 2013 无法导入 SQL Server 2012。我总是必须将 Excel 转换为旧版本，例如 97-2003 才能使其工作。

有谁知道解决方法，或者这是唯一的方法？

我有带有 Service Pack 1 的 SQL Server Management Studio 2012，我有最新的 Office 2013。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-19T01:18:05.483

您可以在 SSMS 的导入向导中编写命令行脚本。记住 SQL Server 2012 默认支持的 excel 格式是 .xlsx,.xlsm,.xlt。

还有另一个称为 SQL 服务器迁移助手的 UI，它可以帮助您执行相同的操作，其中 UI 为您提供选择格式和命令行脚本为默认格式的选项。

希望这个答案能澄清你。如果这有帮助，请标记为答案。

# c# - Asp.net MVC4, C# 创建对象实例

> ID：15931211
> 
> 赞同：5
> 
> 时间：2013-04-10T16:18:24.237
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-4

我应该在哪里创建实例？**哪种方式更好，为什么？**

1）在构造函数中？

```
public class UserController : Controller
{
    private UnitOfWork unitofwork;

    public UserController(){
         unitofwork = new UnitofWork();
    }

    public ActionResult DoStuff(){
    ... 
```

2）作为私人班级成员？

```
public class UserController : Controller
{
    private UnitOfWork unitofwork = new UnitofWork();

    public ActionResult DoStuff(){
    ... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:26:30.840

这是个人喜好，真的。有些人喜欢在构造函数之外进行初始化，仅仅是因为其他人出现并添加新成员而不初始化它的可能性较小，因为他们面前有一个示例。

作为一般规则，如果对象的初始化需要任何逻辑或需要参数，那么我更喜欢在构造函数中进行。但是，无论您选择什么，请确保保持一致。

**编辑：**注意，在构造函数中初始化还允许您调用非静态方法和属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:23:56.667

取决于你想要达到的目标。如果你使用一个字段来做，它会在构造函数**之前**被初始化，所以你可以在以后做其他事情。

在这个特定的例子中，它不会有太大的区别（除了序列）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:25:53.537

我更喜欢将它保留在构造函数中，因为它允许您在需要时将其扩展，而无需更新您调用它的所有位置，并且还可以使您的调用代码更简洁。

# macos - 找不到 vm_region

> ID：15931213
> 
> 赞同：2
> 
> 时间：2013-04-10T16:18:27.657
> 
> 标签：macos, kernel, osx-lion

在osx上，我做了一个小程序来编辑我的进程的内存（主要是在flash游戏中作弊）。很长一段时间后我试图重新编译这个程序，我意识到我升级了我的操作系统（并更换了我的笔记本电脑）并且发生了一些变化。现在我在 10.7.5

我有一个链接错误：

```
Undefined symbols for architecture x86_64:
   "_vm_region", referenced from:
... 
```

但是我没有找到任何可链接的库来获取 vm_region 函数。而且我没有为 vm_region 和大部分 /usr/include/mach 部分安装任何手册页！

有什么建议可以重新编译该程序吗？我在哪里可以找到这些手册页？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T19:26:31.273

那就是你要找的 mach_vm_region，Xoff。API 已在 10.5 中重命名。所以 vm_* API 变成了 mach_vm_*。“_”只是链接器符号前缀。进行搜索/替换，它应该可以工作。您可能还需要将标题调整为 . API 本身（有意）没有记录，除了与内核源代码（来自 opensource.apple.com 的 XNU 包）一起打包的一些 HTML 手册页。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-25T07:44:07.640

当我尝试在 64 位进程上使用“vm_region”时弹出此错误消息，并且应该使用带有适当参数的“vm_region_64”

```
mach_msg_type_number_t info_count = VM_REGION_BASIC_INFO_COUNT_64; 
```

# java - @Nullable 似乎不适用于 @AssistedInject

> ID：15931215
> 
> 赞同：3
> 
> 时间：2013-04-10T16:18:47.310
> 
> 标签：java, guice, nullable, assisted-inject

我有一个看起来像这样的构造函数：

```
@Inject
public MyClass(
        @Named("config") String configFile,
        @Named("template") String templateFile,
        CachedSettings settings,
        @Assisted String channelId,
        @Nullable @Assisted("NetworkA") NetworkInterface localNetworkInterfaceA,
        @Nullable @Assisted("NetworkB") NetworkInterface localNetworkInterfaceB) { 
```

我收到以下错误（两次，每个参数一次）

```
1) null returned by binding at my.company.package.MyClassFactory.create()
 but parameter 4 of my.company.package.MyClass.<init>() is not @Nullable
  while locating java.net.NetworkInterface annotated with @com.google.inject.assistedinject.Assisted(value=NetworkA)
   for parameter 4 at my.company.package.MyClass.<init>(MyClass.java:24)
  while locating my.company.package.MyClass annotated with interface com.google.inject.assistedinject.Assisted 
```

知道有什么问题吗？我在这个问题上发现了另外两个问题，其中一个说这是一个我认为没有的[依赖问题，另一个说这是一个](https://stackoverflow.com/questions/12483650/nullable-ignored-by-guice)[Eclipse 问题](https://stackoverflow.com/questions/8226310/guice-ignoring-nullable-on-injected-constructor-parameter)，我确实使用过，但我刷新、清理并重建了我的maven项目从头开始，所以我不确定问题是什么。

我正在使用[javax.annotation.Nullable](http://jsr-305.googlecode.com/svn/trunk/javadoc/javax/annotation/Nullable.html)，它应该在运行时保留。我还应该尝试什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-03T09:57:35.263

`@Nullable`需要在构造函数和工厂声明上设置。我们`FactoryModuleBuilder`用来声明我们的工厂。我正在粘贴对我们有用的相关代码

## 构造函数：

```
@Inject
public AddressActions(EC2Service ec2Service,
                      RequestFactory requestFactory,
                      @Assisted("spiceManager") SpiceManager spiceManager,
                      @Assisted("parent") Context parent,
                      @Assisted("publicIp") @Nullable String publicIp) { 
```

## 抽象工厂：

```
public static interface Factory {
    AddressActions create(@Assisted("spiceManager") SpiceManager spiceManager,
                          @Assisted("parent") Context context,
                          @Assisted("publicIp") @Nullable String publicIp);
} 
```

## 工厂模块构建器：

```
install(new FactoryModuleBuilder().build(AddressActions.Factory.class)); 
```

## 来电：

```
AddressActions actions = actionsFactory.create(spiceManager, getSherlockActivity(), null); 
```

相关版本：

*   吉斯：`guice-3.0-no_aop.jar`
*   辅助注射：`guice-assistedinject-3.0.jar`
*   JSR305：`jsr305-1.3.9.jar`

-k

# dom - DOM 树是如何构建的？

> ID：15931216
> 
> 赞同：1
> 
> 时间：2013-04-10T16:18:47.330
> 
> 标签：dom, xml-parsing, tree

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE people SYSTEM "validator.dtd">

<people>
    <student>
        <name>John</name>
        <course>Computer Technology</course>
        <semester>6</semester>
        <scheme>E</scheme>
    </student>

    <student>
        <name>Foo</name>
        <course>Industrial Electronics</course>
        <semester>6</semester>
        <scheme>E</scheme>
    </student>
</people> 
```

这是我的 XML 文档。我已经对此进行了树状表示。
![在此处输入图像描述](https://i.stack.imgur.com/DhekZ.png)

这种树表示是正确的还是错误的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:39:08.563

你可以通过打印一个 DOM 树得到一个很好的主意：

```
public static void main(String[] args) throws UnsupportedEncodingException, IOException, ParserConfigurationException, SAXException {
    final String xml = "<?xml version=\"1.0\" encoding=\"UTF-8\" ?>"
            + "<people>"
            + "    <!-- a comment -->"
            + "    <student>"
            + "        <name>John</name>"
            + "        <!-- a comment -->"
            + "        <course>Computer Technology</course>"
            + "        <semester>6</semester>"
            + "        <scheme>E</scheme>"
            + "    </student>"
            + ""
            + "    <student>"
            + "        <name>Foo</name>"
            + "        <course>Industrial Electronics</course>"
            + "        <semester>6</semester>"
            + "        <scheme>E</scheme>"
            + "    </student>"
            + "</people>";
    final Document document = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new ByteArrayInputStream(xml.getBytes()));
    printNodes(document.getDocumentElement(), 0);
}

private static void printNodes(final Node node, final int depth) {
    final StringBuilder prefix = new StringBuilder();
    for (int i = 0; i < depth; ++i) {
        prefix.append("\t");
    }
    if (node.getNodeType() == Node.ELEMENT_NODE) {
        System.out.println(prefix.toString() + "Going into " + node.getNodeName());
        final NodeList nodeList = node.getChildNodes();
        for (int i = 0; i < nodeList.getLength(); ++i) {
            printNodes(nodeList.item(i), depth + 1);
        }
    } else if (node.getNodeType() == Node.COMMENT_NODE) {
        System.out.println(prefix.toString() + "Comment node: \"" + node.getTextContent() + "\"");
    } else {
        System.out.println(prefix.toString() + "Text node: \"" + node.getTextContent() + "\"");
    }
} 
```

这个的输出是：

```
Going into people
    Text node: "    "
    Comment node: " a comment "
    Text node: "    "
    Going into student
        Text node: "        "
        Going into name
            Text node: "John"
        Text node: "        "
        Comment node: " a comment "
        Text node: "        "
        Going into course
            Text node: "Computer Technology"
        Text node: "        "
        Going into semester
            Text node: "6"
        Text node: "        "
        Going into scheme
            Text node: "E"
        Text node: "    "
    Text node: "    "
    Going into student
        Text node: "        "
        Going into name
            Text node: "Foo"
        Text node: "        "
        Going into course
            Text node: "Industrial Electronics"
        Text node: "        "
        Going into semester
            Text node: "6"
        Text node: "        "
        Going into scheme
            Text node: "E"
        Text node: "    " 
```

如您所见，在可见节点之间到处都有文本节点。这是因为理论上您可以在子节点*周围*放置文本- 例如

```
<student>
    some random text
    <course>Computer</course>
    some more text
</student> 
```

所以 DOM 树需要考虑到这一点。如果 XML 打印得不是很漂亮，而只是一行，那么下一个节点将是空的，而不是充满空格。

摆弄文档，看看它对输出有什么影响。

# php - Mysql查询，PHP计数

> ID：15931217
> 
> 赞同：0
> 
> 时间：2013-04-10T16:18:47.363
> 
> 标签：php, mysql

我有以下 MySQL 第一个表的结构：

[http://www.clubmadam.com/zadatak.jpg](http://www.clubmadam.com/zadatak.jpg)

MySQL第二张表的结构：

[http://www.clubmadam.com/country.jpg](http://www.clubmadam.com/country.jpg)

我需要一个 SQL 查询来计算每个国家/地区的城市数量并汇总该国家/地区所有城市的人口；

这是我到目前为止所拥有的：

```
$upit = "SELECT";
$rezultat = mysql_query($upit);
{
} 
```

MySQL 可以处理这个，还是我还需要使用 PHP？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:21:37.497

这真的是 SQL 101 的东西，我建议你做很多阅读

```
SELECT CountryCode,
       COUNT(Name) as Cities,
       SUM(Population) as Population
  FROM <tablename>
 GROUP BY CountryCode 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:23:27.487

如果我理解正确，此查询将根据国家/地区提供城市计数：

```
SELECT COUNT(*) AS CityCount, CountryCode, SUM(Population) AS CountryPopulation
FROM myTableName
GROUP BY CountryCode 
```

根据您的评论，您可以通过以下方式跨多个表执行此操作：

```
SELECT City.COUNT(*) AS CityCount, Country.LocalName, City.SUM(Population) AS CountryPopulation
FROM City, Country
GROUP BY City.CountryCode 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:26:47.623

**统计 Country-code 中的城市数量**

```
$upit = "SELECT COUNT(DISTINCT CountryCode) FROM table_name
$num_rows = mysql_num_rows($upit);
echo "$num_rows Rows\n"; 
```

**汇总国家代码中所有城市的人口**

参考@Mark Ba​​ker 答案

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T16:22:37.450

`SUM()`这是一个使用和`COUNT()` [聚合函数](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html)的简单 MySQL 聚合作业：

```
$sql = 'SELECT 
  CountryCode, 
  COUNT(ID) as numCities, 
  SUM(Population) as totalPopulation 
  FROM Cities 
  GROUP BY CountryCode'; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T16:23:40.800

```
$upit = "SELECT COUNT(ID) AS cities, SUM(Population) AS population, ContryCode FROM table GROUP BY CountryCode";
$result = mysql_query($upit);
while ($data = mysql_fetch_object($result)) {
    // $data->cities is the number of cities and $data->population the sum of people and $data->CountryCode the country code
} 
```

# r - 使用 tryCatch() 捕获引导循环

> ID：15931219
> 
> 赞同：2
> 
> 时间：2013-04-10T16:19:02.490
> 
> 标签：r, loops, try-catch, statistics-bootstrap

我对使用的了解不足，`tryCatch()`但在正在进行的讨论中很难找到一个好的解决方案。

我有一个返回对象的自编程函数。它实际上是一个列表对象，但为简单起见，假设它是一个标量。我正在使用`for()`循环来引导此功能。我的循环是以下形式：

```
boot<-1000
for(i in 1:boot){
  bootstrap_data<-data[sample(nrow(data),nrow(data),replace=T),]
  out[i]<-myfunction(bootstrap_data,X,...)
} 
```

`myfunction()`有时会返回错误消息，因为它用于`lm()`在数据子集上拟合模型，然后从不同的子集中预测新数据。然后可能会发生某些因素，某些水平偶然不会出现在用于拟合的数据中，但它们确实出现在预测子集中。这确实很少发生（例如，大约每 15,000 次迭代），但它确实发生了（我需要引导`myfunction()`很多次）。

我想使用`tryCatch()`或类似的功能来捕获我的引导循环。此外，我想定义一个索引来计算循环`tryCatch()`中必须捕获函数的频率。`boot`最后，无论错误发生的次数如何，我都希望有一个常数。

R 返回以下消息：

```
 Error in model.frame.default(Terms,newdata,na.action=na.action,
xlev=object$xlevels) : factor X has new levels 2 
```

`X`是用户指定的预测器`lm()`。我不确定 2 代表什么，我猜是新关卡的数量（？）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:15:07.817

这是一个有时会失败的功能

```
f <- function() {
    r <- rnorm(1)
    if (r > 1)
        stop("oops")
    r
} 
```

我们分配一个结果向量并设置一个计数器来更新第 i 个元素

```
out <- numeric(100)
i <- 0 
```

然后反复尝试调用该函数。如果有错误，我们不增加 i 或记录结果，而是直接进入下一次迭代

```
while (i < length(out)) {
    tryCatch({
        out[[i + 1]] <- f()
        i <- i + 1
    }, error=function(...) NULL)
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T17:03:49.947

包装有时会在“尝试”中引发错误的函数通常对我有用。

```
boot<-1000
for(i in 1:boot){
  bootstrap_data<-data[sample(nrow(data),nrow(data),replace=T),]
  out[i] = NA  #
  try({      
    out[i]<-myfunction(bootstrap_data,X,...)
  }, silent=T)
} 
```

如果你想计算抛出的错误数，你可以总结 NA 的输入。

```
sum(is.na(out)) 
```

# asp.net-mvc - 使用 RESTul 服务构建 MVC 应用程序

> ID：15931220
> 
> 赞同：1
> 
> 时间：2013-04-10T16:19:04.230
> 
> 标签：asp.net-mvc, rest

我们正在开发一个 ASP.NET MVC 应用程序，并希望使用 Web API 来处理业务功能。此外，我们还集成了 Dynamics AX 和 Dynamics CRM 产品。因此，本质上我正在考虑开发以下组件：

1.  构建与 AX（通过 SOAP）通信并返回数据传输对象的 RESTFul 服务。
2.  构建与 CRM 通信（再次通过 SOAP）并返回数据传输对象的 RESTFul 服务。

现在我的问题是，例如将数据加载到订单屏幕（需要来自 AX 和 CRM 的数据），

```
a. Use the controller to make calls to the RESTFUL Services and then use a Model object to pass the data to the screen.  
(or)
b. Do nothing in the controller, but use AJAX calls from the Razor to get data from the RESTFul services and load data into the screen. 
```

如果有人能对采用的最佳实践（关于在这种场景中使用 MVC 和 RESTFUL 服务进行架构设计）有所了解，我将不胜感激？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:50:19.177

如果您正在调用外部 RESTful 服务，则需要通过 POST 或 GET 创建 HTTP 请求并适当地处理请求返回的响应。如果返回的数据是 XML，您将需要使用 XML 文档解析器来使用 XML。如果返回的数据是 JSON，您可以使用如下所示的动态解析：将[JSON 反序列化为 C# 动态对象？](https://stackoverflow.com/questions/3142495/deserialize-json-into-c-sharp-dynamic-object) 这是处理 JSON 的一种非常好的方法，因为它提供了一种类似于在 JavaScript 中访问 JSON 对象的机制。

以下是我在 Web API 中使用的一些代码：

```
public class Base
{
    public string Username { get; set; }
    public string Password { get; set; }
    public string UserAgent { get; set; }
    public string ContentType { get; set; }
    public CookieCollection Cookies { get; set; }
    public CookieContainer Container { get; set; }

    public Base()
    {
        UserAgent = "Mozilla/5.0 (Windows NT 6.2; WOW64; rv:18.0) Gecko/20100101 Firefox/18.0";
        ContentType = "application/x-www-form-urlencoded";
        Cookies = new CookieCollection();
        Container = new CookieContainer();
    }

    public Base(string username, string password)
    {
        Username = username;
        Password = password;
        UserAgent = "Mozilla/5.0 (Windows NT 6.2; WOW64; rv:18.0) Gecko/20100101 Firefox/18.0";
        ContentType = "application/x-www-form-urlencoded";
        Cookies = new CookieCollection();
        Container = new CookieContainer();
    }

    public string Load(string uri, string postData = "", NetworkCredential creds = null, int timeout = 60000, string host = "", string referer = "", string requestedwith = "")
    {
        HttpWebRequest request = (HttpWebRequest)WebRequest.Create(uri);
        request.CookieContainer = Container;
        request.CookieContainer.Add(Cookies);        
        request.UserAgent = UserAgent;
        request.AllowWriteStreamBuffering = true;
        request.ProtocolVersion = HttpVersion.Version11;
        request.AllowAutoRedirect = true;
        request.ContentType = ContentType;
        request.PreAuthenticate = true;

        if (requestedwith.Length > 0)
            request.Headers["X-Requested-With"] = requestedwith; // used for simulating AJAX requests

        if (host.Length > 0)
            request.Host = host;

        if (referer.Length > 0)
            request.Referer = referer;

        if (timeout > 0)
            request.Timeout = timeout;

        if (creds != null)
            request.Credentials = creds;

        if (postData.Length > 0)
        {
            request.Method = "POST";
            ASCIIEncoding encoding = new ASCIIEncoding();
            byte[] data = encoding.GetBytes(postData);
            request.ContentLength = data.Length;
            Stream newStream = request.GetRequestStream(); //open connection
            newStream.Write(data, 0, data.Length); // Send the data.
            newStream.Close();
        }
        else
            request.Method = "GET";

        HttpWebResponse response = (HttpWebResponse)request.GetResponse();
        Cookies = response.Cookies;
        StringBuilder page;
        using (StreamReader sr = new StreamReader(response.GetResponseStream()))
        {
            page = new StringBuilder(sr.ReadToEnd());
            page = page.Replace("\r\n", ""); // strip all new lines and tabs
            page = page.Replace("\r", ""); // strip all new lines and tabs
            page = page.Replace("\n", ""); // strip all new lines and tabs
            page = page.Replace("\t", ""); // strip all new lines and tabs
        }

        string str = page.ToString();
        str = Regex.Replace(str, @">\s+<", "><"); // remove all space in between tags

        return str;
    }
} 
```

我正在开发用于与 Xbox Live、PSN 和 Steam 数据交互的 API。每个服务都有自己的结构，这是我用于每个服务的基类。但是，我不打算在这里详细介绍如何从这些服务中获取数据。

# spring - 如何使长时间运行的@Scheduled spring 方法，休眠工作？

> ID：15931224
> 
> 赞同：4
> 
> 时间：2013-04-10T16:19:15.833
> 
> 标签：spring, hibernate, transactions, autocommit, spring-scheduled

我尝试制作一个 Jersey 网络服务，允许客户创建工作。这些作业存储在数据库中，使用 Hibernate 作为持久性提供程序。这些作业将由计划服务在后台执行，我想用 Spring 来安排。

我创建了一个 Spring Scheduled 方法，如下所示：

```
@Service
public class MyTimedService
{
    @Inject
    IJobs allJobs;

    private static final Logger LOG = LoggerFactory.getLogger( MyTimedService.class );

    @Scheduled(fixedRate=5000)
    public void processJobs()
    {
        for(BaseJob job: allJobs.getQueuedJobs())
        {
            processJob(job, new JobContext());
        }
    }

private void processJob( final BaseJob job, JobContext context ) throws JobException
{
    job.start();

    LOG.info( "Starting: " + job.getName() );
    job.execute( context );
    LOG.info( "Finished: " + job.getName() );

    if ( job.getErrors().size() > 0 )
    {
        Throwable e = job.getErrors().get( 0 );
        throw new JobException( e );
    }
    job.finished();

}
...
} 
```

因为 Job 会运行很长时间，所以我需要让 job.start() 向数据库报告状态变化（从 QUEUE 到 IN_PROGRESS）。之前，我使用命令行实现并拥有自己的事务管理，基本上`begin()`就`commit()`在`job.start()`.

现在我需要使用 Spring 使其工作......

关于如何分离关注点并使其发挥作用的任何建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T20:31:42.370

**编辑**

> 我不太明白的一件事是为什么 doWork 需要一笔大交易。

它不一定是。任何一个方向都有警告。我在 doWork(...) 方法上方的修改后的类打击 (JobRunnerService) 中注意到了其中的一些。这些笔记是值得注意的。

> 我想要实现的是doWork定期可以设置工作的进度

这可能很难实现，也可能不难实现，具体取决于您是否希望 doWork(...) 绑定到 Transaction 以及每个 Job 是否可以以相同的方式分解（即：更新总是发生在静态代码中的位置）。我不知道您的所有要求，所以我无法真正回答这个问题。但是，我会重申我对研究 Spring Batch 的建议。

**JobRunnerService**

```
import me.mike.jobs.model.Job;
import me.mike.jobs.model.JobState;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.config.ConfigurableBeanFactory;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Service;

/**
 * !!This bean is STATEFUL!!
 */
@Service
@Scope(value = ConfigurableBeanFactory.SCOPE_PROTOTYPE)
public class JobRunnerService {
    @Autowired
    private JobService js;

    public void processJob(Job job) {
        job.setState(JobState.WORKING_0);
        js.update(job);
        try {
            doWork(job);
            job.setState(JobState.COMPLETE);
        } catch (Exception e) {
            job.setState(JobState.FAILED);
        }
        System.out.println("I'm done working.");
        js.update(job);
    }

    /**
     * Be sure that any unchecked exception you throw gets added into the "rollbackFor" since it won't trigger
     * a rollback if you don't...
     *
     * The @Transactional is optional - I assumed you would want the work performed in the job to be transactional.
     *
     * Note: Remember, when doing the work represented by these jobs, that your EntityManager (or SessionFactory) is
     * configured with a TransactionManager and, as such, will throw exceptions when you attempt to do work within them
     * without a Transaction.  You will either need a separate EntityManager (SessionFactory) or something like a
     * JdbcTemplate.
     *
     * Note: If the Job's work DOES need to be Transactional, this will probably not work.  A very simple solution
     * would to be to split up the work within the job into "steps" or "stages."  The processJob(...) method above
     * could then call each stage and, at the conclusion, update the Job's state appropriately.  This, of course,
     * would not work if each Job had N number of stages where N could vary an indeterminate amount.
     */
    //@Transactional(propagation = Propagation.REQUIRES_NEW, rollbackFor = { IllegalArgumentException.class })
    public void doWork(Job job) throws IllegalArgumentException {
        // This method begins its own transaction, every single time its called.  Period.
        // Do some work...
        job.setState(JobState.WORKING_10);
        js.update(job);
        // Do more work...
        job.setState(JobState.WORKING_90);
        js.update(job);
        // At the conclusion, the transaction bound to this method is committed, unless a rollback was initiated.
    }
} 
```

* * *

前言：我认为你最好考虑利用像 SpringBatch 这样的东西。它可能需要更多的配置，但它也提供了更多的支持。

如果我理解正确，您希望将“作业”存储在表中（RESTful 创建）。您需要一个可以在后台定期运行的 @Scheduled 任务来执行每个作业所代表的工作。您还希望在处理这些实体之前和之后更改每个实体的状态 (heh)。需要注意的是，初始状态更改需要在其自己的事务范围内发生，不可避免的结束状态更改也是如此。

我已经使用 Spring、JPA 和 Hibernate 对 MySQL 5.x DB 运行了此代码。如果您需要，我可以为您提供我的 applicationContext 和我的 rest-servlet xml 文件。

这将执行我理解的您的既定目标：

**该模型：**

```
import org.hibernate.validator.constraints.Length;

import javax.persistence.*;
import javax.validation.constraints.NotNull;
import java.util.UUID;

@Entity
public class Job {
    @Id
    private String id;

    @Column
    @NotNull
    @Length(min = 3, max = 50)
    private String name;

    @Enumerated(EnumType.STRING)
    @Column(length = 50, nullable = false)
    private JobState state;

    public UUID getId() {
        return UUID.fromString(id);
    }

    public void setId(UUID id) {
        this.id = id.toString();
    }

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public JobState getState() {
        return state;
    }

    public void setState(JobState state) {
        this.state = state;
    }
} 
```

**存储库：**

```
import me.mike.jobs.model.Job;
import me.mike.jobs.model.JobState;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.criteria.CriteriaBuilder;
import javax.persistence.criteria.CriteriaQuery;
import javax.persistence.criteria.Root;
import java.util.HashSet;
import java.util.Set;
import java.util.UUID;

@Repository
public class JobDao {
    @PersistenceContext
    private EntityManager em;

    @Transactional(propagation = Propagation.REQUIRED)
    public void create(Job job) {
        // ...
    }

    @Transactional(propagation = Propagation.REQUIRED, readOnly = true)
    public Set<Job> readAll() {
        // ...
    }

    @Transactional(propagation = Propagation.REQUIRED, readOnly = true)
    public Job readById(UUID id) {
        // ...
    }

    @Transactional(propagation = Propagation.REQUIRED, readOnly = true)
    public Set<Job> readByState(JobState state) {
        // ...
    }

    @Transactional(propagation = Propagation.REQUIRED)
    public void update(Job job) {
        // ...
    }

    @Transactional(propagation = Propagation.REQUIRED)
    public void delete(Job job) {
        // ...
    }
} 
```

**JobService**（它处理您的 Job 实体上的 RESTful 操作）

```
import me.mike.jobs.dao.JobDao;
import me.mike.jobs.model.Job;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

import java.util.Set;

@Service
public class JobService {
    @Autowired
    private JobDao jd;

    @Transactional(propagation = Propagation.REQUIRED)
    public void create(Job job) {
        // Business logic...
        jd.create(job);
        // More business logic...
    }

    @Transactional(propagation = Propagation.REQUIRED, readOnly = true)
    public Set<Job> read() {
        // Business logic...
        Set<Job> jobs = jd.readAll();
        // More business logic...
        return jobs;
    }

    @Transactional(propagation = Propagation.REQUIRED)
    public void update(Job job) {
        // Business logic...
        jd.update(job);
        // More business logic...
    }

    @Transactional(propagation = Propagation.REQUIRED)
    public void delete(Job job) {
        // Business logic...
        jd.delete(job);
        // More business logic...
    }
} 
```

**MaintenanceService**（这个人会持有你所有的 @ScheduledTask 方法）

```
import me.mike.jobs.dao.JobDao;
import me.mike.jobs.model.Job;
import me.mike.jobs.model.JobState;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.scheduling.annotation.Scheduled;
import org.springframework.stereotype.Service;

@Service
public class MaintenanceService {
    @Autowired
    private JobRunnerService jrs;

    @Autowired
    private JobDao jd;

    @Scheduled(fixedDelay = 5000, initialDelay = 5000)
    public void processQueuedJobs() {
        // This may be somewhat dangerous depending on how many jobs could potentially be racked up during the 'downtime'
        for (Job curJob : jd.readByState(JobState.QUEUED))
            jrs.processJob(curJob);
    }

    // Any other timed service methods...
} 
```

**JobRunnerService**这是实际运行作业的服务

```
import me.mike.jobs.model.Job;
import me.mike.jobs.model.JobState;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.config.ConfigurableBeanFactory;
import org.springframework.context.annotation.Scope;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

/**
 * !!This bean is STATEFUL!!
 */
@Service
@Scope(value = ConfigurableBeanFactory.SCOPE_PROTOTYPE)
public class JobRunnerService {
    @Autowired
    private JobService js;

    public void processJob(Job job) {
        job.setState(JobState.WORKING);
        js.update(job);
        try {
            doWork(job);
            job.setState(JobState.COMPLETE);
        } catch (Exception e) {
            job.setState(JobState.FAILED);
        }
        System.out.println("I'm done working.");
        js.update(job);
    }

    /**
     * Be sure that any unchecked exception you throw gets added into the "rollbackFor" since it won't trigger
     * a rollback if you don't...
     */
    @Transactional(propagation = Propagation.REQUIRES_NEW, rollbackFor = { IllegalArgumentException.class })
    public void doWork(Job job) throws IllegalArgumentException {
        // This method begins its own transaction, every single time its called.  Period.
        // Do your work here...
        // At the conclusion, the transaction bound to this method is committed, unless a rollback was initiated.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-17T10:32:45.673

我假设您在 spring 配置中启用了注释驱动的事务管理

```
@Service
public class MyTimedService {

    @Inject
    IJobs allJobs;

    @Inject
    JobService jobService;

    private static final Logger LOG = LoggerFactory.getLogger( MyTimedService.class );

    @Scheduled(fixedRate=5000)
    public void processJobs() {
        for(BaseJob job: allJobs.getQueuedJobs()) {
            processJob(job, new JobContext());
        }
    }

    private void processJob( final BaseJob job, JobContext context ) throws JobException {
        jobService.start(job);

        LOG.info( "Starting: " + job.getName() );
        job.execute( context );
        LOG.info( "Finished: " + job.getName() );

        if ( job.getErrors().size() > 0 ) {
            Throwable e = job.getErrors().get( 0 );
            throw new JobException( e );
        }

        jobService.complete(job);

    }

}

@Service
public class JobService {

    @Transactional(readOnly = false, propagation = Propagation.REQUIRES_NEW)
    public void start(BaseJob job){
        job.start();
    }

    @Transactional(readOnly = false, propagation = Propagation.REQUIRES_NEW)
    public void complete(BaseJob job){
        job.finished();
    }

} 
```

还有一点要记住

如果在处理作业时出现异常，其状态将保持不变`IN_PROGRESS`，而不是类似`COMPLETED_WITH_EXCEPTION`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T10:23:35.077

在我提出我的想法之前，我应该说你所描述的问题是相当笼统的，可以从不同的角度来处理。我尝试尽可能多地重用您的代码。

1.  为您的项目配置[Spring 事务 (spring-tx)](http://static.springsource.org/spring/docs/3.0.x/reference/transaction.html#transaction-declarative-annotations)模块。这允许`@Transactional`在持久事务的方法上使用。
2.  我假设您所指的`IJobs`是一个作业存储库，它遵循标准 Spring 持久实现之一，例如[Spring JPA](http://static.springsource.org/spring/docs/3.0.x/reference/orm.html#orm-jpa)或[Spring Repositories](http://static.springsource.org/spring/docs/3.0.x/reference/dao.html#dao-annotations)
3.  我在下面重用您的代码
    *   尝试将表示作业和持久化的模型（`JobModel`）与表示可执行作业的对象（ ）分开`ExecutableJob`。您可以有一个简单的方法将这两者映射在一起。
    *   使“最小”可能的代码块成为“事务性”。方法`updateJobStatus`具有更新作业状态的一项职责。
    *   在必要时使用更新作业状态的方法。这包括在开始作业时、成功完成作业时，以及作业完成失败或可能发生运行时异常并且您想再次报告状态的情况。

复用原理图代码：

```
@Service
public class LongRunningJobService {

    @Inject
    JobRepository jobs; // IJobs

    @Scheduled(fixedDelay = 60000)
    public void processJobs() {
        for (JobModel j : jobs.getQueuedJobs()) {
            JobContext context = null;
            processJob(j, context);
        }
    }

    protected void processJob(JobModel jobModel, JobContext context) {
        // update the status of the job
        updateJobStatus(jobModel, JobStatus.RUNNING);

        ExecutableJob job = null; // createJob(jobModel);
        job.execute(context);

        // process job results
            // if necessary, catch exceptions and again update job status

        // success
        updateJobStatus(jobModel, JobStatus.FINISHED);

    }

    @Transactional
    protected void updateJobStatus(JobModel jobModel, JobStatus status) {
        jobs.updateJobStatus(jobModel, status);
    }

    static enum JobStatus {
        QUEUED, RUNNING, FINISHED;
    }

} 
```

# ios - UITextField 将光标设置为开始文本位置

> ID：15931227
> 
> 赞同：16
> 
> 时间：2013-04-10T16:19:22.093
> 
> 标签：ios, objective-c, uitextfield

我需要移动光标以在文本字段上设置焦点时开始文本位置。有可能做吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-10T16:27:08.837

将您的视图控制器（或其他适当的对象）设置为文本字段`delegate`并实现如下`textFieldDidBeginEditing:`方法：

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    UITextPosition *beginning = [textField beginningOfDocument];
    [textField setSelectedTextRange:[textField textRangeFromPosition:beginning
                                                          toPosition:beginning]];
} 
```

请注意，这`setSelectedTextRange:`是`UITextInput`（`UITextField`实现）的协议方法，因此您不会直接在`UITextField`文档中找到它。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T16:24:09.767

```
self.selectedTextRange = [self textRangeFromPosition:newPos toPosition:newPos]; 
```

检查此[在 UITextField 中查找光标位置](http://neofight.wordpress.com/2012/04/01/finding-the-cursor-position-in-a-uitextfield/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-01-27T23:10:18.173

如果有人在 Swift 中寻找答案：

```
let desiredPosition = textField.beginningOfDocument
textField.selectedTextRange = textField.textRangeFromPosition(desiredPosition, toPosition: desiredPosition) 
```

但我相信这只有在光标已经在文本字段中时才有效。您可以使用它来做到这一点：

```
textField.becomeFirstResponder()
let desiredPosition = textField.beginningOfDocument
textField.selectedTextRange = textField.textRangeFromPosition(desiredPosition, toPosition: desiredPosition) 
```

# .net - Powerpack 10 形状无法在不同尺寸的屏幕上正确显示

> ID：15931228
> 
> 赞同：0
> 
> 时间：2013-04-10T16:19:22.880
> 
> 标签：.net, vb.net, vb-power-pack

您好我正在尝试部署我在另一台计算机上制作的应用程序。屏幕似乎具有不同的分辨率。

当我在另一台计算机上运行表单时，表单上的所有 Powerpack 形状似乎都卡在了表单上的固定位置，因此无法与表单上的其余控件正确缩放。

有没有其他人遇到过这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:07:43.120

是的，这是一个常见问题，因为形状没有“停靠”属性。您可以尝试的一件事是使用表格布局面板并将形状的大小编码为面板的大小。

# backbone.js - 我可以强制更新模型的属性以注册为更改，即使它不是？

> ID：15931233
> 
> 赞同：5
> 
> 时间：2013-04-10T16:19:31.390
> 
> 标签：backbone.js

我知道我可以设置 Backbone 模型属性的值，这样它就不会使用*{silent:true}触发**更改*事件。我还知道，如果我将模型的属性设置为它已有的值，它不会触发更改事件，这几乎总是一件好事。但是，有没有办法强制更新模型以触发更改事件，即使它设置为相同的值？

 *因此，如果在我的模型中我设置了：

```
defaults:{
    attributeToChange: "myValue"
} 
```

然后在使用此模型的视图中，我调用：

```
this.model.set('attributeToChange', 'myNewValue', {silent:true}); 
```

该值将更改，但不会触发任何更改事件。但是，如果我想在设置属性值时触发更改事件，而不管它设置为什么？所以如果我只是这样做了

```
this.model.set('attributeToChange','myValue'); 
```

我可以添加一个参数来强制这被视为一种变化吗？我相信我可以使用

```
this.model.trigger('change:attributeToChange'); 
```

但我想知道是否有办法强制更改事件在没有这个的情况下触发。

额外的问题：如果我将模型的属性设置为它已有的值，这是否会使属性的*先前*值成为我启动更改之前的值？

```
this.model.set('attributeToChange','someValue');
this.model.set('attributeToChange','anotherValue');
this.model.set('attributeToChange','anotherValue');
console.log(this.model.previous('attributeToChange')); //someValue or anotherValue? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T08:24:40.593

当您在 Backbone 中为模型设置值时，Backbone 会将新值与当前值进行比较，并将更改的值添加到数组中（请参阅[https://github.com/documentcloud/backbone/blob/master/backbone. js#L342](https://github.com/documentcloud/backbone/blob/master/backbone.js#L342)）。

然后，如果`changes`数组包含元素，如果silent 未设置为true，Backbone 将为每个更改的项目触发“change:{key}”事件。（参见[https://github.com/documentcloud/backbone/blob/master/backbone.js#L357](https://github.com/documentcloud/backbone/blob/master/backbone.js#L357)）。

最后，它还会触发全局“change”事件（同样，如果silent 未设置为true）。

因此，如果您想在未更改的属性上强制触发，您可以像 Backbone 一样手动触发事件，或者像 @Loamhoof 建议的那样覆盖 set 方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T18:36:06.207

可悲的是，这里什么都没有。我想您可以更改 set 方法的代码，但这会很丑陋。另一种解决方案是在开头或结尾重写它（这是您可以做的“简单”更改来重写方法）。

一开始，问题是您的属性尚未设置（也未验证）。
那么，让我们拭目以待。

```
var set = Backbone.Model.prototype.set;
Backbone.Model.prototype.set = function() {
  // do stuff before
  set.apply(this, arguments);
  // do stuff after
  this.trigger('myCustomEvent');
  return this;
}; 
```

（我认为在定义模型之前您不必这样做，但可能是。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-23T11:07:01.510

当我设置存在模型属性另一个具有相同键和值的对象时，我遇到了这个问题。那是不同的对象，但模型没有触发“更改”事件。因此，对于这个问题，我使用了这样的解决方案：我将属性设置为“静默”模式下的模型，然后触发特定属性的“更改”事件。例如

```
this.model.set({currentPage: page,
                currentPanel: panel}, {silent:true});
this.model.trigger('change:currentPanel'); 
```*

# jaxb - JAXB Eclipse MOXy Nullable 值并仅检索 Map 中的指定键

> ID：15931235
> 
> 赞同：1
> 
> 时间：2013-04-10T16:19:35.993
> 
> 标签：jaxb, eclipselink, jaxb2, moxy

我还有一个更棘手的问题：

```
E.g. Person Class has: --String firstName --String lastName --Map stringMap

   Person person = new Person ();
   person.setFirstName("FirstName");
   person.setLastName("LastName");
   Map<String,String> stringMap = new HashMap<String,String>();
   stringMap.put("IwantThisKeyInXml","IwantThisValueInXml");
   stringMap.put("IDONTwantThisKeyInXml","IDONTwantThisValueInXml");

   InputStream iStream1 = classLoader.getResourceAsStream("person-binding.xml");
   List<Object> fileList = new ArrayList<Object>();
            fileList.add(iStream1);
   Map<String, Object> properties = new HashMap<String,Object>();               

   properties.put(JAXBContextProperties.OXM_METADATA_SOURCE,  fileList);
   JAXBContext ctx = JAXBContext.newInstance(new Class[] { GaDictionary.class, Person.class }, properties);

   Marshaller marshaller = ctx.createMarshaller();
   marshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

   Writer output = new StringWriter();
   marshaller.marshal(person, output);
   System.out.println(output); 
```

person-binding.xml 如下

```
 <?xml version="1.0"?>
   <xml-bindings
    xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm"
    package-name="my.test.model"  xml-mapping-metadata-complete="true">
    <xml-schema
        element-form-default="QUALIFIED"/>
    <java-types>
        <java-type name="Person"  xml-accessor-type="NONE">
            <xml-root-element/>
            <xml-type prop-order="firstName lastName"/>
            <java-attributes>
                <xml-element java-attribute="firstName" name="first-name"/>
                <xml-element java-attribute="lastName" name="last-name"/>
                <xml-element java-attribute="stringMap" name="string-map"/>
            </java-attributes>
        </java-type>
      </java-types>
    </xml-bindings> 
```

因此，结果的定义是：

```
 <?xml version="1.0" encoding="UTF-8"?>
   <person>
   <first-name>FirstName</first-name>
   <last-name>LastName</last-name>
   <string-map>
      <entry>
         <key>IwantThisKeyInXml</key>
         <value>IwantThisKeyInXml</value>
      </entry>
      <entry>
         <key>IDONTwantThisKeyInXml</key>
         <value>IDONTwantThisKeyInXml</value>
      </entry>
   </string-map>
   </person> 
```

如何在 stringMap 上排除该条目？我尝试了虚拟访问方法，但也许我无法正确配置它？！我应该在编组后删除该值吗？这可能是一种智能且可维护的方式吗？

最后一个问题是我的属性是否为空值。如何配置 person-binding-xml 文件 (oxm.file) 以使相关 xml 标记为空？

我可以更改模型类，但如果可能的话，我宁愿不要添加任何代码行。（这就是我填充 xml 文件的原因）

所以我想得到的结果是：

```
 <?xml version="1.0" encoding="UTF-8"?>
   <person>
     <first-name>FirstName</first-name>
     <last-name>LastName</last-name>
     <string-map>
       <entry>
         <key>IwantThisKeyInXml</key>
         <value>IwantThisKeyInXml</value>
       </entry>
      </string-map>
  </person> 
```

对于第二个相关问题：我尝试了 nillable="true" 但它不起作用！因此，例如，如果我有一个 stringMap 或 firstName 或其他东西的空值，我将分别获得并用任何主体关闭标签。

或者我想获得的另一种方式是：

```
 <?xml version="1.0" encoding="UTF-8"?>
   <person>
     <first-name>FirstName</first-name>
     <last-name>LastName</last-name>
     <string-map>
       <entry>
         <key>IwantThisKeyInXml</key>
         <value>IwantThisKeyInXml</value>
       </entry>
       <entry><!-- I have the entry but I have an empty value-->
         <key>KEY</key>
         <value></value>
       </entry>
      </string-map>
  </person> 
```

谢谢大家

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T18:10:25.077

在您的解决方案中，空策略是正确的想法，但它需要在 StringEntryType 的 value 属性上而不是在整个地图上。所以你的绑定文件应该包括这样的东西：

```
 <java-type name="StringEntryType">
        <java-attributes>
            <xml-element java-attribute="value" name="value">
                <xml-null-policy null-representation-for-xml="EMPTY_NODE"/>
            </xml-element>
        </java-attributes>
    </java-type> 
```

您的解决方案看起来不错，但我想我还会发布一个替代解决方案，该解决方案利用您可能更喜欢的 MOXy 的只读和只写属性。在此示例中，变量 myMap 将在解组期间设置，但在编组期间将从 getModifiedMap 方法返回的 Map 将被调用。在 getModifiedMap 中，我们还将空值替换为空字符串，以便对空标签进行编组。

```
public class Root {

    public Map<String, String> myMap = new HashMap<String, String>();

    public Map<String, String> getModifiedMap(){
         Map modifiedMap = new HashMap<String, String>();       
         Set<Entry<String, String>> entries = myMap.entrySet();
         Iterator<Entry<String, String>> iter = entries.iterator();
         while(iter.hasNext()){
             Entry<String, String> nextEntry = iter.next();
             String nextKey = nextEntry.getKey();
             if(!nextKey.equals("omitthiskey")){
                 String nextValue = nextEntry.getValue();
                 if(nextValue == null){
                     nextValue ="";
                 }               
                 modifiedMap.put(nextKey, nextValue);
             }
         }
         return modifiedMap;
    }

    public void setModifiedMap(Map<String, String> newMap){
        //this method shouldn't get hit but needs to be present 
    }
} 
```

并且相应的绑定文件将包含如下内容：

```
<xml-bindings xmlns="http://www.eclipse.org/eclipselink/xsds/persistence/oxm" package-name="test2" >
    <xml-schema element-form-default="QUALIFIED"/>  
    <java-types>
    <java-type name="Root"  xml-accessor-type="NONE">
        <xml-root-element/>
        <java-attributes>
            <xml-element java-attribute="myMap" name="myMap" read-only="true" />
            <xml-element java-attribute="modifiedMap" name="myMap" write-only="true"/>                      
        </java-attributes>
    </java-type>                    
    </java-types>
</xml-bindings> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:27:11.640

如果您想防止某些 Map 条目被编组为 XML，您可以提供一个 XmlAdapter 来在编组时删除任何不需要的条目：

```
import java.util.Map;

import javax.xml.bind.annotation.adapters.XmlAdapter;

public final class MyAdapter extends XmlAdapter<Map<String, String>, Map<String, String>> {

    private final String OMIT = "IDONTwantThisKeyInXml";

    @Override
    public Map<String, String> unmarshal(Map<String, String> arg0) throws Exception {
        return arg0;
    }

    @Override
    public Map<String, String> marshal(Map<String, String> arg0) throws Exception {
        if (arg0 != null) {
            arg0.remove(OMIT);
        }
        return arg0;
    }

} 
```

不确定我是否理解您的第二个问题，您能否再解释一下您希望看到的行为？

希望这可以帮助，

瑞克

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-17T14:47:59.427

我找到了正确的解决方案：

```
 import java.util.HashMap;
        import java.util.Map;
        import java.util.Map.Entry;

        import javax.xml.bind.annotation.adapters.XmlAdapter;

        public final class StringMapAdapter extends XmlAdapter<StringAdapterMap, Map<String, String>> {

            private final String OMIT = "birthPlaceString";

            @Override
            public Map<String, String> unmarshal(StringAdapterMap v) throws Exception {
                 HashMap<String, String> hashMap = new HashMap<String, String>();
                 System.out.println("unmarshal"); 
                 for(StringEntryType myEntryType : v.entry) {
                     hashMap.put(myEntryType.key, myEntryType.value);
                  }
                  return hashMap;
            }

            @Override
            public StringAdapterMap marshal(Map<String, String> v) throws Exception {
                StringAdapterMap myMapType = new StringAdapterMap();
              for(Entry<String, String> entry : v.entrySet()) {
                  StringEntryType EntryType = new StringEntryType();
                   EntryType.key= entry.getKey();
                   EntryType.value = entry.getValue();
                   if (!OMIT.equals(EntryType.key))
                       myMapType.entry.add(EntryType);
              }
              return myMapType;

            } 
```

StringAdapterMap 类：

```
 import java.util.ArrayList;
        import java.util.List;

        public class StringAdapterMap {
             public List<StringEntryType> entry = new ArrayList<StringEntryType>();

        } 
```

StringEntryType 类：

```
 public class StringEntryType {

               public String key;

               public String value;

        } 
```

在 oxm.file 中记得配置适配器

```
 <xml-element java-attribute="stringMap" name="string-map" >
      <xml-java-type-adapter value="it.cineca.jaxb.adapter.StringMapAdapter" />    
     </xml-element> 
```

# git - 无法删除真正存在的文件 - 致命：pathspec ...不匹配任何文件

> ID：15931238
> 
> 赞同：176
> 
> 时间：2013-04-10T16:19:44.520
> 
> 标签：git, intellij-idea

> 无法删除真正存在的文件 - 致命：pathspec ...不匹配任何文件

我有一个在 git 控制下的文件，根本不会被删除。失败的命令是：

```
$ git rm .idea/workspace.xml
fatal: pathspec '.idea/workspace.xml' did not match any files 
```

下面我列出了目录内容、分支等。到目前为止，我已经从目录中尝试了 rm，并转义以防万一有有趣的字符，我真的很难过。我搜索了网络和 SO，但找不到具体的。

```
$ git branch -a
* dot-output
  master
  remotes/origin/HEAD -> origin/master
  remotes/origin/master
  remotes/origin/modelspace
$ 

$ git status
# On branch dot-output
# Untracked files:
# ...

$ ls .idea/
ant.xml         encodings.xml       modules.xml     workspace.xml
compiler.xml        inspectionProfiles  scopes
copyright       libraries       testrunner.xml
dictionaries        misc.xml        vcs.xml

$ ls -al
total 56
drwxr-xr-x  16 matt  staff    544 Apr 10 11:33 .
drwxr-xr-x@ 33 matt  staff   1122 Apr 10 09:40 ..
-rw-r--r--@  1 matt  staff  12292 Apr 10 11:19 .DS_Store
drwxr-xr-x  18 matt  staff    612 Apr 10 11:39 .git
-rw-r--r--   1 matt  staff     98 Mar  6 13:40 .gitignore
drwxr-xr-x  16 matt  staff    544 Apr 10 11:34 .idea
-rw-r--r--   1 matt  staff   1113 Feb 25 11:07 README
...

$ head -n 2 .idea/workspace.xml
<?xml version="1.0" encoding="UTF-8"?>
<project version="4">

$ git rm .idea/workspace.xml
fatal: pathspec '.idea/workspace.xml' did not match any files 
```

### 更新

@Nevik 和 @Boris 的回答很有帮助。我意识到我对正在发生的许多事情感到困惑，其中一些被 IntelliJ IDEA（我通常喜欢的工具，顺便说一句）加剧了。首先，来自的“致命：pathspec”消息既无用`git rm`又具有误导性。

其次，我有该文件`.gitignore`，但在问我的问题之前已将其删除。但是，它也独立于 git 包含在 IDEA 的 Ignored Files 功能中，并在项目查看器中显示（而不是未跟踪，如 git status 所示）。最后，我在试验时运行了 IDEA，看起来它在我的`rm`.

我的收获是，如果我对 Git 行为感到困惑，请确保退出 IDEA 并在调试时仅在命令行（和 gitk）中工作。

* * *

## 回答 #1

> 赞同：139
> 
> 时间：2013-04-10T16:35:36.920

您的文件`.idea/workspace.xml`不受 git 版本控制。您尚未添加它（检查 git status/Untracked 文件）或忽略它（使用 .gitignore 或 .git/info/exclude 文件）

您可以使用以下 git 命令验证它，该命令列出了所有被忽略的文件：

```
git ls-files --others -i --exclude-standard 
```

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2016-02-24T07:48:08.070

```
$>git add .
$>git rm file_Name 
```

有用。您使用右键单击添加新文件-> 创建新文件，然后立即将其删除。该文件将进入未跟踪的文件列表。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-08-01T00:25:35.537

我知道这不是 OP 的问题，但是我在完全不同的基础上遇到了同样的错误，所以我只是想把它放在这里，以防其他人也有同样的错误。这是特定于 Windows 的，我认为不会影响 Linux 用户。

我有一个 LibreOffice doc 文件，称之为`final report.odt`. 我后来将它的大小写更改为`Final Report.odt`. 在 Windows 中，这甚至不算作重命名。`final report.odt`, `Final Report.odt`,`FiNaL RePoRt.oDt`都是一样的。在 Linux 中，这些都是不同的。

当我最终去`git rm "Final Report.odt"`并得到“pathspec不匹配任何文件”错误时。只有当我在添加文件时使用原始外壳时 `git rm "final report.odt"`——它才起作用。

经验教训：为了改变情况，我应该这样做：

```
git mv "final report.odt" temp.odt
git mv temp.odt "Final Report.odt" 
```

同样，这不是这里的 OP 的问题。并且不会影响 Linux 用户，正如他的帖子所表明的那样。我只是为其他可能在 Windows git 中遇到此问题并偶然发现此问题的人提供了它。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-13T20:05:05.763

如果您的文件`idea/workspace.xml` 被添加到 .gitignore （或其父文件夹），只需`add`手动将其添加到 git 版本控制。你也可以使用 TortoiseGit 添加它。下一次推送后，您将看到，您的问题已解决。

![使用 TortoiseGit 添加到 git 版本控制](https://i.stack.imgur.com/iR8hw.jpg)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-02T07:02:07.230

这些步骤帮助了我：

1.  混帐添加。
2.  混帐藏匿

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-27T15:16:06.173

在我的例子中，有一些完全奇怪的事情，我不确定原因是什么。之前提交了整个文件夹。我可以在 Git、Windows 资源管理器和 GitHub 中看到它，但是我对文件夹本身和其中的文件所做的任何更改都被忽略了。使用`git check-ignore`查看忽略它的内容，并尝试使用删除它`git rm --cached`没有任何影响。更改无法上演。

我通过以下方式修复了它：

1.  在另一个位置复制文件夹和文件。
2.  我删除了以某种方式被忽略的原件。
3.  提交并推送此更新。
4.  最后，我重新添加了文件和文件夹，git 再次按预期看到并对其做出反应。
5.  阶段并提交此操作，您就可以开始了！:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-10-18T14:43:31.097

在这种情况下，我个人偶然发现了类似的错误消息：

我创建了一个一直为**空**的文件夹，所以自然只要是空的，打字`git add *`就不会考虑这个空文件夹。因此，当我尝试运行`git rm -r *`或简单地运行 git时`rm my_empty_folder/ -r,`，我收到了该错误消息。

解决方案是在没有 git: 的情况下简单地删除它，`rm -r my_empty_folder/` 或者在这个文件夹中创建一个数据文件，然后添加它（`git add my_no_long_empty_folder`）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-12-03T05:47:17.937

对我有用的是运行：

1.  `git add .idea/workspace.xml`
2.  `git rm -r --cached .idea/*`

* * *

## 回答 #9

> 赞同：-6
> 
> 时间：2015-02-10T15:07:11.057

暂时将 .gitignore 移动到 .gitignore.bck

# html - PayPal：选择具有数量的多个项目

> ID：15931241
> 
> 赞同：0
> 
> 时间：2013-04-10T16:20:01.383
> 
> 标签：html, forms, paypal

我已经制作了一个 PayPal 表格，我希望在其中销售多种商品和数量（见屏幕截图）。但是，当我使用类似于下面编写的代码时，如果尚未选择某些项目（数量 = 0），则会出现错误。错误提示“数量值必须是大于或等于 1 的整数”。但是如果我不能拥有一些数量为 0 的项目，我无法弄清楚如何使表单表现得像我想要的那样。

有没有人有适合我需求的解决方案？我不想在每件商品上都有一个“添加到购物车”按钮。

谢谢！

```
<form>
<input type="hidden" name="cmd" value="_cart">
<input type="hidden" name="business" value="myemail">
<input type="hidden" name="upload" value="">

<input type="hidden" name="item_name_1" value="First item">
<input type="hidden" name="amount_1" value="9">
<select name="quantity_1"><option value="0">0</option><option value="1">1</option><option value="2">2</option><option value="3">3</option></select>

<!-- more items -->

<input type="image" src="http://www.paypal.com/en_US/i/btn/x-click-but01.gif" name="submit" alt="Make payments with PayPal - it's fast, free and secure!">
</form> 
```

[截图 http://kejk.se/skar.png](http://kejk.se/skar.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:14:09.123

您需要在逻辑中编写代码，以免发送没有数量的物品。购物车上传只想发送数量至少为 1 的商品。

# mp4 - 使用 ffmpeg 的 ppm 到 mkv/avi/mp4 转换的视频无法由 Lightworks 打开，但可以完美观看

> ID：15931243
> 
> 赞同：1
> 
> 时间：2013-04-10T16:20:03.627
> 
> 标签：mp4, avi, ppm, video-conversion, mkv

我正在尝试为我自己的个人项目做古尔西工作。我设置了所有内容，并且已经将 ppm 输出转换为视频文件。我可以毫无问题地打开并观看文件。但是在编辑程序时 Lightworks 不会加载它。我用 .mkv、.avi 和 .mp4 尝试过，但它不起作用。

这是我的命令行命令（在批处理文件中调用）：

```
ffmpeg -y -r 30 -vcodec ppm -f image2pipe -i render.ppm -c:v libx264 -crf 18 -preset slow -pix_fmt yuv420p -c:a copy gource.mkv 
```

对于 .avi 和 .mp4，错误是：`Format unlicensed` 对于 .mkv，错误是：`failed to import`

我应该使用哪些设置？或者我应该使用另一个程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T17:43:27.630

Lightworks 对它接受的格式非常挑剔（在最近的更新中较少），它绝对不接受 mkv 容器。这些设置对我来说效果很好。

`avconv -i input.mkv -c:v mpeg2video -pix_fmt yuv422p -g:v 1 -q:v 1 -qmin:v 1 -c:a mp2 -r:a 48000 -b:a 384k output.mp4`

这里有更详细的解释：[http](http://www.thehelloworldprogram.com/convert-videos-for-import-into-lightworks-with-avconv) ://www.thehelloworldprogram.com/convert-videos-for-import-into-lightworks-with-avconv 。

# c++ - 函数指针作为模板参数，类型推导失败

> ID：15931247
> 
> 赞同：1
> 
> 时间：2013-04-10T16:20:20.900
> 
> 标签：c++, templates, function-pointers

我试图使用函数指针作为非类型模板参数，但有时我不明白为什么它无法推断出类型。

这里有一个例子

```
template <class T, class U, class R>
R sum(T a, U b) { return a + b; }

template <class T, class R, R (*Func)(T, R)>
R reduce(T *in, R initial, int len) {
    for (int i = 0; i < len; ++i)
        initial = Func(in[i], initial);
    return initial;
}

int main() {
    double data[] = {1, 2, 3, 4, 5};
    std::cout << "Sum: " << reduce<sum>(data, 0.0, 5) << "\n";
    return 0;
} 
```

不幸的是，GCC 似乎没有提供失败的原因：

```
test.cpp: In function ‘int main()’:
test.cpp:15:64: error: no matching function for call to ‘reduce(double [5], double, int)’
test.cpp:15:64: note: candidate is:
test.cpp:7:3: note: template<class T, class R, R (* Func)(T, R)> R reduce(T*, R, int)
test.cpp:7:3: note:   template argument deduction/substitution failed: 
```

相反，指定所有数据类型将使其工作：

```
std::cout << "Sum: " << reduce<double, double, sum>(data, 0.0, 5) << "\n"; 
```

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:25:08.723

您提供模板部分专业化的错误。有作品规则全部或全部。因此，如果您更改签名如下：

```
template <class T, class R>
 R reduce(R (*Func)(T, R), T *in, R initial, int len) { 
```

...

```
reduce(sum, data, 0.0, 5) 
```

一切都编译好

# linux - find 不递归查找

> ID：15931248
> 
> 赞同：13
> 
> 时间：2013-04-10T16:20:24.107
> 
> 标签：linux, shell, find

我在目录“home”中，我运行这个命令

```
find . -iname *.mov 
```

它产生

```
./root/movies/Corey/holtorf/Intro.mov 
```

现在，我“cd ..”并运行相同的命令

```
find . -iname *.mov 
```

这次“Intro.mov”不在结果中。这背后的原因是什么？递归搜索当前目录中每个以“.mov”结尾的文件的命令是什么？谢谢。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-10T16:26:35.057

在参数中使用通配符时，它由 shell 扩展。为防止这种情况，您需要编写“*.mov”。

在您的情况下，shell在将参数传递给 find**之前**会扩展到它找到的任何文件，然后它会获取文件列表并且不会根据原始模式进行搜索。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-10T16:26:34.170

`-follow`如果您的主目录实际上是一个符号链接，您可能需要添加。还要引用该模式，否则外壳会在将其传递给`find`.

```
find . -iname "*.mov" -follow 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-10T16:35:11.613

我还不能发表评论，所以我会发布这个作为答案（我提前道歉）。

请查看这篇文章[“查找：路径必须在表达式之前：”如何指定递归搜索，同时在当前目录中查找文件？](https://stackoverflow.com/questions/6495501/find-paths-must-precede-expression-how-do-i-specify-a-recursive-search-that)

以及可能使您受益的其他信息：要在当前目录中递归查找具有特定名称的文件，您可以使用 grep 或 find

```
grep -r "*.mov" . 
```

或用于不区分大小写的搜索

```
grep -ri "*.mov" . 
```

和寻找

```
find . -type f -exec grep -l "*.mov" {} + 
```

也是一个有用的链接[http://www.cyberciti.biz/faq/howto-recursively-search-all-files-for-words/](http://www.cyberciti.biz/faq/howto-recursively-search-all-files-for-words/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T16:37:31.013

我会使用：

```
 grep -rn 'mov' . 
```

递归数字搜索

# ruby-on-rails - Rails 数据库和表单中的持续时间

> ID：15931249
> 
> 赞同：1
> 
> 时间：2013-04-10T16:20:33.240
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, forms, time

我需要在数据库中存储一个持续时间，但我不知道该怎么做。我在时间类型的表中添加了一个“持续时间”列，但我不知道如何让用户填写他想要的内容。基本上，持续时间总是少于 24 小时，用户应该能够填写小时和分钟（而不是秒）

关于表单使用什么以及使用时间作为类型是否是一个好主意的任何建议？稍后我还需要计算和减去几个小时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:57:22.920

我在上班/下班系统上工作，我使用[time_dif](http://rubygems.org/gems/time_diff) gem 来获取小时数。对于表单，我只是使用了一个数字字段来允许用户输入小时和分钟。下面的屏幕截图显示了用户如何输入他们的时间。

![截屏](https://i.stack.imgur.com/UrlmX.png)

# deployment - 如何安装 Windows 服务应用程序

> ID：15931250
> 
> 赞同：0
> 
> 时间：2013-04-10T16:20:37.563
> 
> 标签：deployment, windows-services, installutil

我在计算机上安装 Windows 服务应用程序时遇到问题。如果我成功了，我希望看到我的服务列在**计算机管理**-**服务和应用程序**-**服务**下。

我首先尝试单击我的 exe。我收到这条消息：

> 无法从命令行或调试器启动服务。必须首先安装 Windows 服务（使用 installutil.exe），然后使用 ServiceExplorer、Windows 服务管理工具或 Net Start 命令启动。

所以我尝试使用该`installutil`工具。在命令提示符下，我输入了*installutil ooaservice.exe*。我收到一条消息

> 初始化安装时发生异常：System.badimageformatexception：无法加载文件或程序集“文件///（我的 exe 的路径如下）ooaservice.exe”或其依赖项之一。这个程序集是由比当前加载的运行时更新的运行时构建的，无法加载……</p>

我还尝试构建一个设置项目。安装程序安装成功，但服务未列为服务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:43:16.773

你的机器上应该安装了好几个版本的.NET frameworks，尽量使用最高版本`installutil`安装。

在我的机器上，它位于`E:\Windows\Microsoft.NET\Framework\v4.0.30319\InstallUtil.exe`.

# visual-studio-2012 - 使用 Fortran 在更新的 Visual Studio 中调试负字符长度

> ID：15931252
> 
> 赞同：-1
> 
> 时间：2013-04-10T16:20:46.033
> 
> 标签：visual-studio-2012, fortran, intel-fortran

我最近从 Windows XP 和 Visual Studio 2005 更新到 Windows 7 和 Visual Studio 2012，并带来了大量的 Fortran 代码（内置 VS 和英特尔编译器）。我现在遇到了几个可能相关或不相关的错误：

1.  当调用 foo(char1,real1,real2) 形式的子例程时，其中 char1 在调用子例程和 foo 中的长度均为 200，我得到*“forrtl：严重（408）：fort：（18）：虚拟字符变量 'char1 ' 长度为 200，大于实际变量长度 -858993460 Image PC Routine Line Source libifcoremdd.dll 02AED3FE Unknown Unknown Unknown Stack trace异常终止”* 我环顾四周，该数字似乎是转换为整数的十六进制地址（0xcccccccc）。为什么它会传递一个无意义的地址而不是长度？

2.  当我尝试调试问题时，我在子例程调用处设置了一个断点并尝试介入，我收到一个错误*“No Source Available No symbols are loaded for any call stack frame. The source code cannot be display”*。

3.  我还注意到我收到了几十个*“无法找到或打开 PDB 文件”。*似乎与我的源代码没有直接关系的错误。

不幸的是，该错误嵌入了数千行专有代码中，因此我无法将其全部发布，也无法通过一个简单的示例重现该错误。

有人对尝试的事情有任何建议吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:59:30.570

没有符号...源代码都与 .pdb 文件有关。pdb 文件是在您构建代码时生成的。它就像一张地图，显示每一行代码的位置和位置。如果您尝试设置断点并得到一个实心红色圆圈，则它可以找到 pdb。如果你只是得到一个空的灰色圆圈，它就找不到 pdb 文件。将 pdb 文件从您构建代码的位置复制到可执行文件所在的位置，这应该可以解决该问题。不幸的是，在复制文件后，您需要退出 Visual Studio 并重新进入。它不会立即读取您将它放在那里的 pdb。

至于你的未初始化变量错误（一切都被c填充），你做了干净的构建吗？如果您从 XP 转移到 W7，是 XP32 到 W764 吗？您是否也移动了源或对象。如果是这样，您的可执行文件是 x86/win32 或 x64 还是两者兼而有之？首先尝试将所有内容构建为 x86/win32。看看这是否不起作用，然后看看代码生成选项：它们都是 MT、MTD、MD 还是 MDD？它们都应该是一样的。混合它们是一场等待发生的灾难（通常是当你向一些高级官员展示时）。

# jquery - 如何将两个表单字段合并为一个字段与jquery一起提交？

> ID：15931255
> 
> 赞同：1
> 
> 时间：2013-04-10T16:20:52.577
> 
> 标签：jquery, e-commerce, velocity

好的，这是我的问题。
我制作了一个表单，您可以在其中输入多个项目和数量 - 如果您需要添加更多项目，您可以添加其他表单字段。

该表格可在以下网址访问：[https ://store.jerrysnuthouse.com/wholesaleform](https://store.jerrysnuthouse.com/wholesaleform)

为了让我的购物车识别提交的多个项目，它需要提交为

```
http://store.jerrysnuthouse.com/cgi-bin/UCEditor?MerchantID=2101&ADD_ITEM=Quantity 
```

其中 Item 被客户输入的数字替换，数量也被替换。

现在我有两个字段，项目和数量。提交后，它们被发送为

```
http://store.jerrysnuthouse.com/cgi-bin/UCEditor?MerchantID=2101&ADD_Item="ITEM"&quanity="Quantity" 
```

额外的等号不能在那里。

所以几个可能的解决方案 - 需要去除等号或

需要为每个项目和数量输入值 - 并以某种方式提交以遵循我概述的格式。

考虑过创建另一个隐藏的输入并将它们加入那里......但是我只需要将该输入提交到我的购物车

任何想法都非常感谢。

顺便说一句 - 可以使用 jquery 或速度。

谢谢，尼克

```
<!------Wholesale Form ------->

#ucTemplate("jnh_header_v2")

<head>

<script type="text/javascript">
$(function() {
var addDiv = $('#addinput');
var i = $('#addinput p').size();

$('#addNew').live('click', function() {
$('<p '+ i +'>Item#<input type="text" id="item" size="" name="ADD_" value="" placeholder="I am New item" />Quantity#<input type="text" id="quantity" name=""  value="" placeholder="I am New quantity" /><a href="#" id="remNew">Remove</a> Or <a href="#" id="addNew">Add</a> </p>').appendTo(addDiv);
i++;

return false;
});

$('#remNew').live('click', function() {
if( i > 2 ) {
$(this).parents('p').remove();
i--;
}
return false;
});
});
</script>

</head>

 #set($itemFormSubmitUrl = "http://store.jerrysnuthouse.com/cgi-bin/UCEditor?")
                            <form action="$itemFormSubmitUrl" method="get" id="wholesale_form">
  <input type="hidden" name="MerchantID" value="${merchantID}">
<div id="addinput">
<p>
Item#<input type="text" id="item" size="20" name="ADD_" value="" placeholder="Item #" />  Quantity:<input type="text" id="quantity" size="20" name="" value="" placeholder="Quantity" /><a href="#" id="addNew">Add</a>
</p>
</div>

<div id="addtocart" style="float:left;"><input type="submit" value="add to cart"/></div>
</form>

</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:31:54.663

似乎有几件事需要修复。

也许点击处理程序中的行`#addNew`应该如下所示：

```
$('<p '+ i +'>Item#<input type="text" name="ADD_ITEM" value="Quantity" placeholder="I am New item" />Quantity#<input type="text" placeholder="I am New quantity" /><a href="#" id="remNew">Remove</a> Or <a href="#" id="addNew">Add</a> </p>').appendTo(addDiv); 
```

请记住，具有相同`id`属性的多个元素是无效的，这可能会导致问题。您可能想改用一个类。请参阅[我的另一个问题](https://stackoverflow.com/questions/7505350/why-is-it-a-bad-thing-to-have-multiple-html-elements-with-the-same-id-attribute)。

另外，您要对说的部分做`'<p '+ i +'>...'`什么？这将输出类似`<p 1>`or的东西`<p 2>`。我认为将数字作为属性名称是没有意义的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:40:46.567

我假设您必须重定向到上述网址。在这种情况下，您可以将 url 形成为 javascript 中的字符串并将值分配给`location.href`

```
location.href = 'http://store.jerrysnuthouse.com/cgi-bin/UCEditor?MerchantID=2101&ADD_ITEM=Quantity'; 
```

这将提交数据并重定向到页面。

# javascript - Jquery .load 进行第一次加载，但不是第二次

> ID：15931256
> 
> 赞同：0
> 
> 时间：2013-04-10T16:20:53.810
> 
> 标签：javascript, jquery, html, razor

我试图拨打另一个页面，以接收该页面上的代码。当我第一次调用`JSON.cshtml`它时，它工作正常，但调用`JSON2.cshtml`它时什么也不返回。怎么会这样？

默认.cshtml

```
@{  
Layout = "~/_Layout_Main.cshtml";
}

@section head{
<script>
    $(".btn").click(function ()
    {
        get_update();
    });

    function get_update()
    {
        $("#success").load("JSON2.cshtml");
    };

    function get_contact()
    {
        $("#success").load("JSON.cshtml");
    };
</script>
}

<div id="success"></div>

<script>
get_contact();
</script>

<a href="#" class="btn" style="color: #fff;">btn</a> 
```

JSON.cshtml

```
<p style="color: #fff;">
Hello
</p> 
```

JSON2.cshtml

```
@{
for(int i = 0; i > 10; i++)
{
    <p style="color: #fff;">
        @i
    </p>
    <br />
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:04:47.020

真的很简单。您将需要创建一个控制器：

```
public class YourController: Controller
{
    public ActionResult JSON2()
    {
        return View()
    }
} 
```

然后在您的视图/jquery 中：

```
$("#success").load('@Url.Action("JSON2", "YourController")'); 
```

确保您的控制器的名称与您的 JSON2.cshtml 视图所在的文件夹的名称相匹配，因此框架将找到该视图。

我会谦虚地建议您在这里查看入门教程：[http ://www.asp.net/mvc](http://www.asp.net/mvc)

# iphone - UICollectionView 单元格重叠

> ID：15931259
> 
> 赞同：15
> 
> 时间：2013-04-10T16:21:04.767
> 
> 标签：iphone, ios, uicollectionview, uicollectionviewcell, uicollectionviewlayout

我有一个水平的 UICollectionView。我想让单元格相互重叠一定数量的 60 像素，以便第二个单元格与第一个单元格重叠 60 个像素，第三个单元格与第二个单元格重叠相同的数量，依此类推。

我尝试对 UICollectionViewFlowLayout 进行子类化。但我无法将 UICollectionviewCell 放在另一个之上。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-11-05T18:36:02.687

从本教程开始：[https ://web-beta.archive.org/web/20151116053251/http://blog.tobiaswiedenmann.com/post/35135290759/stacklayout](https://web-beta.archive.org/web/20151116053251/http://blog.tobiaswiedenmann.com/post/35135290759/stacklayout)

我专门为水平 UICollectionView 修改了 stacklayout

UICollectionViewStackLayout.h

```
#import <UIKit/UIKit.h>

@interface UICollectionViewStackLayout : UICollectionViewFlowLayout

#define STACK_OVERLAP 60 //this corresponds to 60 points which is probably what you want, not pixels
#define ITEM_SIZE CGSizeMake(190,210)

@end 
```

UICollectionViewStackLayout.m

```
#import "UICollectionViewStackLayout.h"

@implementation UICollectionViewStackLayout

-(id)init{

    self = [super init];

    if (self) {
        [self commonInit];
    }

    return self;
}

-(id)initWithCoder:(NSCoder *)aDecoder
{
    if (self = [super init]) {
        [self commonInit];
    }

    return self;
}

-(void)commonInit
{
    self.itemSize = ITEM_SIZE;

    //set minimum layout requirements
    self.scrollDirection = UICollectionViewScrollDirectionHorizontal;
    self.minimumInteritemSpacing = 0;
}

-(CGSize)collectionViewContentSize
{
    NSInteger xSize = [self.collectionView numberOfItemsInSection:0]
    * self.itemSize.width;
    NSInteger ySize = [self.collectionView numberOfSections]
    * (self.itemSize.height);

    CGSize contentSize = CGSizeMake(xSize, ySize);

    if (self.collectionView.bounds.size.width > contentSize.width)
        contentSize.width = self.collectionView.bounds.size.width;

    if (self.collectionView.bounds.size.height > contentSize.height)
        contentSize.height = self.collectionView.bounds.size.height;

    return contentSize;
}

-(NSArray*)layoutAttributesForElementsInRect:(CGRect)rect
{
    NSArray* attributesArray = [super layoutAttributesForElementsInRect:rect];
    int numberOfItems = [self.collectionView numberOfItemsInSection:0];

    for (UICollectionViewLayoutAttributes *attributes in attributesArray) {
        CGFloat xPosition = attributes.center.x;
        CGFloat yPosition = attributes.center.y;

        if (attributes.indexPath.row == 0) {
            attributes.zIndex = INT_MAX; // Put the first cell on top of the stack
        } else {
            xPosition -= STACK_OVERLAP * attributes.indexPath.row;
            attributes.zIndex = numberOfItems - attributes.indexPath.row; //Other cells below the first one
        }

        attributes.center = CGPointMake(xPosition, yPosition);
    }

    return attributesArray;
}

- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)path {
    UICollectionViewLayoutAttributes* attributes = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:path];
    return attributes;
}

@end 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-05-19T14:41:37.737

我使用了 mdewitt 的答案，将其转换为 swift 3，效果很好！对于任何有兴趣的人：

```
class CollectionViewOverlappingLayout: UICollectionViewFlowLayout {

var overlap: CGFloat = 30

required init?(coder aDecoder: NSCoder) {
    super.init(coder: aDecoder)
    self.scrollDirection = .horizontal
    self.minimumInteritemSpacing = 0
}

override var collectionViewContentSize: CGSize{
    let xSize = CGFloat(self.collectionView!.numberOfItems(inSection: 0)) * self.itemSize.width
    let ySize = CGFloat(self.collectionView!.numberOfSections) * self.itemSize.height

    var contentSize = CGSize(width: xSize, height: ySize)

    if self.collectionView!.bounds.size.width > contentSize.width {
        contentSize.width = self.collectionView!.bounds.size.width
    }

    if self.collectionView!.bounds.size.height > contentSize.height {
        contentSize.height = self.collectionView!.bounds.size.height
    }

    return contentSize
}

override func layoutAttributesForElements(in rect: CGRect) -> [UICollectionViewLayoutAttributes]? {

    let attributesArray = super.layoutAttributesForElements(in: rect)
    let numberOfItems = self.collectionView!.numberOfItems(inSection: 0)

    for attributes in attributesArray! {
        var xPosition = attributes.center.x
        let yPosition = attributes.center.y

        if attributes.indexPath.row == 0 {
            attributes.zIndex = Int(INT_MAX) // Put the first cell on top of the stack
        } else {
            xPosition -= self.overlap * CGFloat(attributes.indexPath.row)
            attributes.zIndex = numberOfItems - attributes.indexPath.row //Other cells below the first one
        }

        attributes.center = CGPoint(x: xPosition, y: yPosition)
    }

    return attributesArray
}

override func layoutAttributesForItem(at indexPath: IndexPath) -> UICollectionViewLayoutAttributes? {
    return UICollectionViewLayoutAttributes(forCellWith: indexPath)
}
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-09-11T08:05:51.373

基于 Maik Fruhner 的回答。要使用：

```
let someCollectionView = UICollectionView(frame: <frame you want>,
                            collectionViewLayout: CollectionViewOverlappingLayout()) 
```

自定义布局代码：

```
class CollectionViewOverlappingLayout: UICollectionViewFlowLayout {

  var overlap: CGFloat = 14

  override init() {
    super.init()
    self.sharedInit()
  }
  required init?(coder aDecoder: NSCoder) {
    super.init(coder: aDecoder)
    self.sharedInit()
  }
  func sharedInit(){
    self.scrollDirection = .horizontal
    self.minimumInteritemSpacing = 0
  }

  override var collectionViewContentSize: CGSize{
    let xSize = CGFloat(self.collectionView!.numberOfItems(inSection: 0)) * self.itemSize.width
    let ySize = CGFloat(self.collectionView!.numberOfSections) * self.itemSize.height

    var contentSize = CGSize(width: xSize, height: ySize)

    if self.collectionView!.bounds.size.width > contentSize.width {
      contentSize.width = self.collectionView!.bounds.size.width
    }

    if self.collectionView!.bounds.size.height > contentSize.height {
      contentSize.height = self.collectionView!.bounds.size.height
    }

    return contentSize
  }

  override func layoutAttributesForElements(in rect: CGRect) -> [UICollectionViewLayoutAttributes]? {

    let attributesArray = super.layoutAttributesForElements(in: rect)
    let numberOfItems = self.collectionView!.numberOfItems(inSection: 0)

    for attributes in attributesArray! {
      var xPosition = attributes.center.x
      let yPosition = attributes.center.y

      if attributes.indexPath.row == 0 {
        attributes.zIndex = Int(INT_MAX) // Put the first cell on top of the stack
      } else {
        xPosition -= self.overlap * CGFloat(attributes.indexPath.row)
        attributes.zIndex = numberOfItems - attributes.indexPath.row //Other cells below the first one
      }

      attributes.center = CGPoint(x: xPosition, y: yPosition)
    }

    return attributesArray
  }

  override func layoutAttributesForItem(at indexPath: IndexPath) -> UICollectionViewLayoutAttributes? {
    return UICollectionViewLayoutAttributes(forCellWith: indexPath)
  }
} 
```

适用于 swift 5（可能还有 4.x）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-16T09:16:33.967

这不会在调用 numberOfItemsInSection 时使用 UICollectionViewDiffableDataSource 爆炸）

（注意，其他解决方案修复了 collectionViewContentSize / 我欢迎进行编辑以解决此问题，而无需调用 numberOfItemsInSection。

```
 var cellLayout = OverlapLayout()
    cellLayout.scrollDirection = .horizontal
    cellLayout.sectionInset = UIEdgeInsets(top: 0, left: 0, bottom: 0, right: 0)
    cellLayout.itemSize = CGSize(width: 44, height: 44)

class OverlapLayout: UICollectionViewFlowLayout {

    var overlap: CGFloat = 20
    override func layoutAttributesForElements(in rect: CGRect) -> [UICollectionViewLayoutAttributes]? {
        let arr = super.layoutAttributesForElements(in: rect)!
        return arr.map { atts in
            var atts = atts
            if atts.representedElementCategory == .cell {
                let ip = atts.indexPath
                atts = self.layoutAttributesForItem(at: ip)!
            }
            return atts
        }
    }

    override func layoutAttributesForItem(at indexPath: IndexPath) -> UICollectionViewLayoutAttributes? {
        let atts = super.layoutAttributesForItem(at: indexPath)!
        var xPosition = atts.center.x
        if indexPath.item == 0 {
            return atts
        }else{
           xPosition -= self.overlap * CGFloat(atts.indexPath.row)
           atts.center = CGPoint(x: xPosition, y: atts.center.y)
           return atts
        }

    }

} 
```

[![在此处输入图像描述](https://i.stack.imgur.com/fRTkS.jpg)](https://i.stack.imgur.com/fRTkS.jpg)

```
// Requires Snapkit
class BubbleCell: UICollectionViewCell {
    static let ID = "BubbleCell"
    var magicCornerRadius = 22 // make this half the collectionview height
    lazy var bubbleImageView: UIImageView = UIImageView(frame: .zero)

    override init(frame: CGRect) {
        super.init(frame: frame)

        setupViews()

    }

    required init?(coder: NSCoder) {
        fatalError("init(coder:) has not been implemented")
    }

    private func setupViews() {

        self.backgroundColor =  .clear
        contentView.backgroundColor = .clear

        // Hero Image
        contentView.addSubview(bubbleImageView)
        bubbleImageView.snp.remakeConstraints { (make) in
            make.edges.equalToSuperview()
        }
        bubbleImageView.layer.cornerRadius = magicCornerRadius
        bubbleImageView.layer.borderColor = UIColor.white.cgColor
        bubbleImageView.layer.borderWidth = 2
        bubbleImageView.clipsToBounds = true
        bubbleImageView.image = kPlaceholderImage
        bubbleImageView.contentMode = .scaleAspectFill

    }

    func configureCell(imageURL: URL) {
      // use third party library to fetch image here / that caches eg. SDWebImage

    }

} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-26T01:22:52.630

我使用上面的两个答案为 Xamarin.iOS 创建了一个示例：

```
public class CustomFlowLayout : UICollectionViewFlowLayout
{
    public CustomFlowLayout(nfloat width, nfloat height)
    {
        ItemSize = new CGSize(width, height);
        ScrollDirection = UICollectionViewScrollDirection.Horizontal;
    } 

    public override CGSize CollectionViewContentSize
    {
        get
        {
            var xSize = CollectionView.NumberOfItemsInSection(0) * ItemSize.Width;
            var ySize = CollectionView.NumberOfSections() * ItemSize.Height;

            var contentSize = new CGSize(xSize, ySize);

            if (CollectionView.Bounds.Size.Width > contentSize.Width)
                contentSize.Width = CollectionView.Bounds.Size.Width;

            if (CollectionView.Bounds.Size.Height > contentSize.Height)
                contentSize.Height = CollectionView.Bounds.Size.Height;

            return contentSize;
        }
    }

    public override UICollectionViewLayoutAttributes[] LayoutAttributesForElementsInRect(CGRect rect)
    {
        var attributesArray = base.LayoutAttributesForElementsInRect(rect);
        var numberOfItems = CollectionView.NumberOfItemsInSection(0);

        foreach (var attributes in attributesArray)
        {
            var xPosition = attributes.Center.X;
            var yPosition = attributes.Center.Y;

            if (attributes.IndexPath.Row == 0)
                attributes.ZIndex = int.MaxValue; // Put the first cell on top of the stack
            else
            {
                xPosition -= 20 * attributes.IndexPath.Row; //20 - value based on your cell width
                attributes.ZIndex = numberOfItems - attributes.IndexPath.Row; //Other cells below the first one
            }

            attributes.Center = new CGPoint(xPosition, yPosition);
        }

        return attributesArray;
    }
} 
```

# dart - Android 浏览器渲染飞镖网页，但 webviews 不

> ID：15931260
> 
> 赞同：1
> 
> 时间：2013-04-10T16:21:08.300
> 
> 标签：dart

当我从 android 浏览器加载 dart 生成的网页时，它会完美呈现。当我尝试在 webview 上渲染时，图像不会加载。任何想法如何在 webview 上呈现相同的网页？

Android 版本：在 api 8 15 和 17 上的情况相同

javascript（dart2js 输出）给出未捕获的类型错误：无法读取 null 的属性“构造函数”

我认为这是因为图像从未加载。

我在 webview 上设置了所有权限。我设置了chrome客户端。我也设置了 webview 客户端

```
WebView engine = (WebView) findViewById(R.id.web_engine);
    engine.getSettings().setJavaScriptEnabled(true); 
    engine.getSettings().setAllowFileAccess(true);
    engine.getSettings().setJavaScriptCanOpenWindowsAutomatically(true);
    engine.getSettings().setLoadsImagesAutomatically(true);
    engine.getSettings().setAllowUniversalAccessFromFileURLs(true);
    engine.getSettings().setAllowContentAccess(true); 
    engine.getSettings().setLoadsImagesAutomatically(true); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-12T17:52:07.387

在 Kitkat (4.4) 之前，WebView 不是基于 Chrome。根据这篇文章的日期，我猜这是你的问题。

从 4.4 开始，有一个基于 Chrome 的 WebView，但它仍然与 Chrome 不完全一样。这里有一些关于差异和 Chrome 开发者网站支持的内容的详细信息：

[https://developer.chrome.com/multidevice/webview/overview](https://developer.chrome.com/multidevice/webview/overview)

# python - 从 Rpy2 将距离矩阵馈送到 R 聚类

> ID：15931261
> 
> 赞同：1
> 
> 时间：2013-04-10T16:21:08.360
> 
> 标签：python, r, numpy, cluster-analysis, rpy2

我在 numpy/scipy 中有以下定制的 NxN 距离矩阵：

```
dist_matrix =    array([array([5, 4, 2, 3, 2, 3]),
                        array([4, 5, 2, 3, 2, 2]), 
                        array([2, 2, 5, 2, 2, 1]), 
                        array([3, 3, 2, 5, 4, 2]), 
                        array([2, 2, 2, 4, 5, 1]), 
                        array([3, 2, 1, 2, 1, 5])]) 
```

如何使用此矩阵在 R / ggplot2 中进行层次聚类和绘制树状图？如果我尝试通过 rpy2 将此距离矩阵输入 R：

```
r.hclust(dist_matrix) 
```

我得到错误：

```
 res = super(Function, self).__call__(*new_args, **new_kwargs)
rpy2.rinterface.RRuntimeError: Error in if (is.na(n) || n > 65536L) stop("size cannot be NA nor exceed 65536") : 
  missing value where TRUE/FALSE needed 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:10:23.110

R 函数`hclust()`采用“距离”对象：

```
from rpy2.robjects.packages import importr
stats = importr("stats")
d = stats.as_dist(m)
hc = r.hclust(d) 
```

[注意：错误消息还暗示了 rpy2 中可能存在的转换错误。您可以提交错误报告吗？谢谢]

# bash - Rsync 和动态排除

> ID：15931269
> 
> 赞同：1
> 
> 时间：2013-04-10T16:21:24.270
> 
> 标签：bash, shell, loops, rsync

我正在尝试使这个小脚本工作，但我错过了一些东西..

```
exclude=""
while read line
do
    exclude+="--exclude $line "
done < exclude.ini
echo "$exclude"
"rsync -rvi --delete $exclude /var/www/$1 /var/export" 
```

该脚本正在读取需要从文件中排除的文件，但我无法正确连接这些字符串

文件中的条目是这样写的 .svn _svn .htaccess ReadAndDeleteMe.ini cache/* documentation

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:47:13.647

我会用

```
--exclude-from=exclude.ini 
```

事实上，手册页说：

```
 --exclude-from=FILE
          This option is related to the --exclude option, but it specifies
          a FILE that contains exclude patterns  (one  per  line).   Blank
          lines  in  the  file  and  lines  starting  with  ’;’ or ’#’ are
          ignored.  If FILE is -, the list  will  be  read  from  standard
          input. 
```

# html - 是否可以在没有额外标记或样式父容器的情况下将内联元素水平居中？

> ID：15931270
> 
> 赞同：16
> 
> 时间：2013-04-10T16:21:25.157
> 
> 标签：html, css, inline, centering

这个问题基本上已经在标题中说明了，但要澄清一下：我正在尝试将锚点水平居中`<a>`在主要内容区域中。

我想这样做*没有*：

*   使用固定宽度
*   添加额外的标记（例如额外的父级`div`）
*   样式化父容器（`text-align:center`例如将父容器设置为）
*   设置`<a>`为全宽块（我想保持可点击区域与链接本身一样大）

所以基本上我想通过在css中以动态（收缩包装）方式设置锚本身的样式来做到这一点。我一直在尝试，但还没有找到方法，有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-10T16:30:58.170

试试这个 -[**演示**](http://jsfiddle.net/4YqXd/)

```
a {
    display: table;
    margin: auto;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-24T01:57:53.250

如果可能的话，我个人尽量不更改元素的显示类型，尤其是出于可访问性原因，更改为“表格”之类的内容。

不幸的是，正常的`margin: 0 auto;`技巧在这里不起作用。

希望这可以帮助！

```
a {
  display: inline-block;
  left: 50%;
  transform: translateX(-50%);
  position: relative;
}
```

```
<a href="#">Center Me</a>
```

* * *

## 回答 #3

> 赞同：-5
> 
> 时间：2018-05-19T06:34:54.620

试试这个

```
a{
display:block;
text-align:center;
} 
```

# php - 在php中输出详细的错误

> ID：15931273
> 
> 赞同：1
> 
> 时间：2013-04-10T16:21:36.007
> 
> 标签：php, error-handling, error-reporting

我已经浏览了我的 php.ini 并打开了错误报告，现在我的错误会像这样输出

![我的 php 错误](https://i.stack.imgur.com/Im0ab.png)

但是在网上看教程我看到人们的错误是这样显示的

![在此处输入图像描述](https://i.stack.imgur.com/EDl55.png)

我怎样才能启用这样的详细错误报告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:22:53.960

**这是一个名为XDebug**的扩展。您需要下载 Xdebug DLL 并启用您的设置。然后这将以所示形式给出错误消息。

有关更多详细信息，请访问[XDebug](http://xdebug.com/)

# c# - 如何在命令启动后更改 sql 超时

> ID：15931289
> 
> 赞同：0
> 
> 时间：2013-04-10T16:22:16.337
> 
> 标签：c#, mysql, sql, multithreading, executenonquery

***问：* 有没有办法阻止`Command.ExecuteNonQuery()`在它完成之前停止它，而不使用超时？**

我创建了一个存储和运行 sql 语句的多线程 MySQL 程序。允许一组事务同时运行（因为它们不修改同一张表）。我不得不禁用超时（将其设置为 0），因为某些 SQL 语句可能需要几分钟才能运行。
当我想停止查询时，问题就来了。现在我必须等到当前的 SQL 语句完成（就像我说的可能需要几分钟）。

*根据我现有的知识，以下是有效的代码（帮助他人）：*

```
MySqlConnectionStringBuilder ConnectionString = new MySqlConnectionStringBuilder();
ConnectionString.Server = ServerName;  // ServerName is a user defined string
ConnectionString.Database = DatabaseName; // DatabaseName is a user defined string
ConnectionString.UserID = UserName; // UserName is a user defined string
if (!Password.Equals(string.Empty)) // Password is a user defined string
{ ConnectionString.Password = Password; } // If Password string is not empty, then add it.
ConnectionString.AllowUserVariables = true; 

using (MySqlConnection connection = MySqlConnection(ConnectionString))
{
   try
   {
       connection.Open();
      DBTransaction Trans = connection.BeginTransaction();

       using (MySqlCommand Command = connection.CreateCommand())
       {
              foreach(String SQLCommandString in SQLCommands) // SQLCommands is user defined List<String>
              {
                   try
                   {
                          Command.CommandText = SQLCommandString; // SQLCommandString is a user defined string ex "UPDATE MyTable SET MyVar = 3 WHERE id = 3;"
                         NumOfRecordAffected = Command.ExecuteNonQuery();
                   }
                   catch (MySql.Data.MySqlClient.MySqlException ex)
                   {
                         Trans.RollBack();
                         // If code reaches here then there was a problem with the SQLCommandString executing.
                         throw ex;
                   }
                   catch (Exception ex)
                   {
                           // There was a problem other than with the SQLCommandString.
                           throw ex;
                   }
              }
       }
       Trans.Commit();
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:31:58.850

您不能在单线程应用程序中执行此操作，因为在 a) 查询完成执行或 b) 异常强制控制返回之前，控制不会返回。

相反，您可以在工作线程中启动和执行所有事务，并在需要时关闭来自原始线程的连接。调用[`MySqlConnection.Close()`](http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlconnection.html#connector-net-examples-mysqlconnection-close)将回滚任何待处理的事务。

# c# - 极其奇怪的 ClickOnce Web 部署行为（缓存）

> ID：15931290
> 
> 赞同：2
> 
> 时间：2013-04-10T16:22:21.467
> 
> 标签：c#, winforms, apache, .net-4.0, clickonce

所以我最近通过 ClickOnce 将我的应用程序部署到 Web 服务器（确切地说是 WAMP），并让 VS2010 自动生成网页和所有爵士乐。用户能够很好地下载该应用程序。

当我推出我的第一次更新时，奇怪就开始了。发生了2种不同的情况。然后什么时候到网站并点击安装，它总是安装第一个版本而不是更新。此外，我在应用程序本身中有一个“检查更新”按钮，当他们点击它时，它会说“没有可用的更新”（使用[此代码](http://msdn.microsoft.com/en-us/library/ms404263.aspx)的变体）。

我有预感让他们清除浏览器缓存并再次尝试应用程序中的“检查更新”按钮……你瞧，它起作用了。

这里发生了什么？它是否缓存了网页，因此看不到更新？当他们访问它时，网页上的文字已经更新，说它是新版本，但在清除缓存之前他们无法安装。此外，是否也会检查网页上的更新代码（否则这也不起作用）？在自动生成的网页标题中放置一个 NO-CACHE HTML 行会解决这个问题吗？欢迎任何建议/见解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-12T06:21:41.003

正如你所说，我会研究你的 Apache 是如何设置缓存的。查看它发送的标头。确保它正在发送具有正确 MIME 类型的 .application 文件`application/x-ms-application`

安装 ClickOnce 后，它总是会得到相同的 Uri `example.com/app/app.application`，并将安装的版本号与刚刚下载的版本号进行比较。当您通过 Visual Studio 发布时，它会覆盖该位置的文件。所以，是的，我可以看到这是一个缓存问题。我很奇怪 ApplicationDeployment API 会使用相同的浏览器缓存，但谁知道它可能在内部使用 IE。

[我在 MSDN 的异步示例](http://msdn.microsoft.com/en-US/library/system.deployment.application.applicationdeployment.checkforupdateasync%28v=vs.110%29.aspx)之上编写了我的测试 ClickOnce 应用程序。有一个进度字符串，您可以在其中看到它在每次运行时下载 .application。我没有看到与您在 UNC 路径或启用了静态 Web 托管的 AWS S3 上托管部署相同的问题。这就是为什么我认为它可能是 Apache 中的东西？

# sql - 我可以改进这个查询吗？

> ID：15931293
> 
> 赞同：6
> 
> 时间：2013-04-10T16:22:27.973
> 
> 标签：sql, sql-server, sql-server-2008

我有一个非常简单的表（用于演示目的）

```
CREATE TABLE t1 (id int,d1 date); 
```

和这个查询。

```
SELECT
    A.id,
    minA,
    minB
FROM (SELECT id, MIN(d1) AS minA
    FROM t1
    GROUP BY id) AS A
    LEFT JOIN (SELECT C.id, MIN(C.d1) AS minB
        FROM t1 AS C
        INNER JOIN (SELECT id, MIN(d1) AS minD
            FROM t1
            GROUP BY id) AS D ON C.id = D.id AND C.d1 > D.minD
        GROUP BY C.id) AS B ON A.id = B.id 
```

[SQL Fiddle 链接在这里](http://sqlfiddle.com/#!6/b52e7/9)

基本上，我试图将每个 ID 的两个“最低”日期值排成一行，如果 ID 只有一个日期，则为空值。上面的查询有效，但必须有一种更好/更清洁的方法来做到这一点，而我只是没有看到。如果这很重要，我正在使用 SQL Server 2008。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-10T16:27:05.637

您可以使用`row_number()`来获取两个最旧的日期，然后使用带有 a 的聚合函数将数据转换为列`CASE`：

```
select id,
  max(case when rn = 1 then d1 end) MinA,
  max(case when rn = 2 then d1 end) MinB
from
(
  select id,
    d1,
    row_number() over(partition by id order by d1) rn
  from t1
) src
where rn < 3
group by id; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!6/b52e7/14)。

或者您可以使用该`PIVOT`函数将日期行转换为列：

```
select id,
  [1] MinA,
  [2] MinB
from
(
  select id,
    d1,
    row_number() over(partition by id order by d1) rn
  from t1
) src
pivot
(
  max(d1)
  for rn in ([1], [2])
) piv; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!6/b52e7/17)

# php - 网站已移动且 php 表单无法正常工作（旧 php 版本）

> ID：15931300
> 
> 赞同：0
> 
> 时间：2013-04-10T16:22:48.553
> 
> 标签：php, forms

我将网站从其他托管服务器移至其他托管服务器，但联系表格不起作用。当前版本的 php 是 5.2，之前版本更旧。我在论坛上看到，为了让旧的 php 代码工作，我应该打开我所做的全局变量（我知道它不安全，我将完全替换该代码，但现在我必须让它工作）。在我打开全局变量之前没有任何工作，现在如果缺少某些字段，我会收到消息，但仅此而已。有什么建议如何使此联系​​表格起作用吗？任何答案将不胜感激。

```
<?
$contact = 'contact';

require('inc_meta.php');

if($form)
{
$error = Array();
if(!trim($c_name)){ $error[sizeof($error)] = "Name"; }
if(!trim($email)){ $error[sizeof($error)] = "E-mail Address"; }
else {
if(!eregi("^[_\.0-9a-z-]+@([0-9a-z][0-9a-z-]+\.)+[a-z]{2,3}$",$email)){ $error[sizeof($error)] = "'" . $email . "' is not avalid E-mail Address."; }
}
}
$filePath = getenv("SCRIPT_NAME");
if($_SERVER['HTTP_REFERER'] == 'http://'.$_SERVER['SERVER_NAME'].''.$filePath.'')
{
if($form && !$error)
{
$contents = "Name: $c_name\r
Address:\r
$c_address\r
$c_city, $c_state $c_zip\n
Phone: $c_phone\r
Fax: $c_fax\r
Email: $email\n
Comments or Questions:\r
$c_comments";

mail("$EMAILADMIN","email from $c_name","$contents","From: $c_name<$email>");

          $status = "Thank You, <b>$c_name</b><br><br>";
          $status .= "Your e-mail message has been sent. We will contact you shortly about your inquiry. ";
          $status .= "If you need more assistance or have questions, please call us at <b>1234567</b><br><br>";
          $status .= "Thank You,<br><b>Owner</b><br>";

}}
?>
<table width="860" border="0" cellspacing="0" cellpadding="0">
  <tr valign="top"> 
    <td width="325"> 
      <? include('inc_sideBar.php'); ?>
    </td>
    <td width="535">
      <table width="100%" border="0" cellspacing="0" cellpadding="0">
        <tr> 
          <td> 
            <? include('inc_header.php'); ?>
          </td>
        </tr>
        <tr> 
          <td> 
            <table width="100%" border="0" cellspacing="0" cellpadding="6">
              <tr> 
                <td align="center" valign="top"> 
                  <? if(!$status){ ?>
                  <br>
                  <table width="95%" border="0" cellspacing="0" cellpadding="0">
                    <tr> 
                      <form name="form" method="post" action="<? echo $PHP_SELF; ?>">
                        <td> 
                          <? if(sizeof($error)){ ?>
                          <font color="#FADE82"><b> The following fields are still 
                          required:<br>
                          <?
         for($i = 0; $i < sizeof($error); $i++) {
         echo "&nbsp;*", "&nbsp;", $error[$i];
         }
         ?>
                          </b></font><br>
                          <br>
                          <? } ?>
                          <table width="100%" border="0" cellspacing="1" cellpadding="1">
                            <tr> 
                              <td width="54%" valign="top"><font color="#FFF9DD">Name</font><font color="#CC0000"> 
                                <font color="#FADE82"></font></font><b><font color="#CC0000"><font color="#FADE82">*</font><br>
                                <input type="text" name="c_name" value="<? echo $c_name; ?>" size="23">
                                </font></b></td>
                              <td width="46%" valign="top"><font color="#FFF9DD">State</font><b><br>
                                </b> 
                                <select name="c_state">
                                  <option> 
                                  <? echo $c_state; ?>
                                  </option>
                                  <option value="AL">Alabama</option>
                                  <option value="AK">Alaska</option>
                                  <option value="AZ">Arizona</option>
                                  <option value="AR">Arkansas</option>
                                  <option value="CA">California</option>
                                  <option value="CO">Colorado</option>
                                  <option value="CT">Connecticut</option>
                                  <option value="DE">Delaware</option>
                                  <option value="FL">Florida</option>
                                  <option value="GA">Georgia</option>
                                  <option value="HI">Hawaii</option>
                                  <option value="ID">Idaho</option>
                                  <option value="IL">Illinois</option>
                                  <option value="IN">Indiana</option>
                                  <option value="IA">Iowa</option>
                                  <option value="KS">Kansas</option>
                                  <option value="KY">Kentucky</option>
                                  <option value="LA">Louisiana</option>
                                  <option value="ME">Maine</option>
                                  <option value="MD">Maryland</option>
                                  <option value="MA">Massachusetts</option>
                                  <option value="MI">Michigan</option>
                                  <option value="MN">Minnesota</option>
                                  <option value="MS">Mississippi</option>
                                  <option value="MO">Missouri</option>
                                  <option value="MT">Montana</option>
                                  <option value="NE">Nebraska</option>
                                  <option value="NV">Nevada</option>
                                  <option value="NH">New Hampshire</option>
                                  <option value="NJ">New Jersey</option>
                                  <option value="NM">New Mexico</option>
                                  <option value="NY">New York</option>
                                  <option value="NC">North Carolina</option>
                                  <option value="ND">North Dakota</option>
                                  <option value="OH">Ohio</option>
                                  <option value="OK">Oklahoma</option>
                                  <option value="OR">Oregon</option>
                                  <option value="PA">Pennsylvania</option>
                                  <option value="RI">Rhode Island</option>
                                  <option value="SC">South Carolina</option>
                                  <option value="SD">South Dakota</option>
                                  <option value="TN">Tennessee</option>
                                  <option value="TX">Texas</option>
                                  <option value="UT">Utah</option>
                                  <option value="VT">Vermont</option>
                                  <option value="VA">Virginia</option>
                                  <option value="WA">Washington</option>
                                  <option value="DC">Washington, D.C.</option>
                                  <option value="WV">West Virginia</option>
                                  <option value="WI">Wisconsin</option>
                                  <option value="WY">Wyoming</option>
                                </select>
                              </td>
                            </tr>
                            <tr> 
                              <td valign="top" width="54%"><font color="#FFF9DD">E-mail</font><font color="#CC0000"> 
                                <font color="#FADE82"></font></font><b><font color="#CC0000"><font color="#FADE82">*</font> 
                                <br>
                                <input type="text" name="email" value="<? echo $email; ?>" size="23">
                                </font></b></td>
                              <td valign="top" width="46%"><font color="#FFF9DD">Zip</font><b><br>
                                </b> 
                                <input type="text" name="c_zip" value="<? echo $c_zip; ?>" size="20">
                              </td>
                            </tr>
                            <tr> 
                              <td valign="top" width="54%"><font color="#FFF9DD">Address</font><b><br>
                                <input type="text" name="c_address" value="<? echo $c_address; ?>" size="23">
                                </b></td>
                              <td valign="top" width="46%"><font color="#FFF9DD">Phone</font><b><br>
                                </b> 
                                <input type="text" name="c_phone" value="<? echo $c_phone; ?>" size="20">
                              </td>
                            </tr>
                            <tr> 
                              <td valign="top" width="54%"><font color="#FFF9DD">City</font><b><br>
                                <input type="text" name="c_city" value="<? echo $c_city; ?>" size="23">
                                </b></td>
                              <td valign="top" width="46%"><font color="#FFF9DD">Fax</font><b><br>
                                </b> 
                                <input type="text" name="c_fax" value="<? echo $c_fax; ?>" size="20">
                              </td>
                            </tr>
                            <tr> 
                              <td valign="top" width="54%">&nbsp;</td>
                              <td valign="top" width="46%">&nbsp; </td>
                            </tr>
                            <tr> 
                              <td valign="top" colspan="2"> <font color="#FFF9DD">Comments 
                                or Questions?:</font><br>
                                <textarea name="c_comments" wrap="VIRTUAL" cols="30" rows="5"><? echo $c_comments; ?></textarea>
                                <br>
                                <br>
                              </td>
                            </tr>
                            <tr> 
                              <td valign="top" colspan="2"> 
                                <input type="image" border="0" name="imageField" src="images/submit.gif" class="select">
                              </td>
                            </tr>
                          </table>
                          <input type="hidden" name="form" value="one">
                        </td>
                      </form>
                    </tr>
                  </table>
                  <? }else{ ?>
                  <table width="100%" border="0" cellspacing="0" cellpadding="0">
                    <tr> 
                      <td> <br>
                        <table width="100%" border="0" cellspacing="0" cellpadding="0">
                          <tr> 
                            <td> 
                              <font color="#FFF9DD"><? echo $status; ?></font>
                            </td>
                          </tr>
                        </table>
                      </td>
                    </tr>
                  </table>
                  <? } ?>
                </td>
              </tr>
            </table>
            <br>
            <? include('footer_info.php'); ?>
          </td>
        </tr>
      </table>
    </td>
  </tr>
</table>
<? require('inc_footer.php'); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:30:08.997

您应该使用 $_POST 数组访问表单数据。
阅读 php 文档此页面中的警告：[http ://www.php.net/manual/en/language.variables.predefined.php](http://www.php.net/manual/en/language.variables.predefined.php)

# java - 使用 Spring JDBC 填充完整的域模型

> ID：15931301
> 
> 赞同：0
> 
> 时间：2013-04-10T16:22:49.033
> 
> 标签：java, jdbc, spring-jdbc

**TL;DR：**您如何使用 Spring JDBC 以最佳方式填充复杂的域模型？

我以前只使用 JPA 从数据库中检索内容，但我们的数据库管理员抱怨框架向数据库发送了多少查询以及它们的效率如何，因此在我们的新项目中，我们决定尝试使用 Spring JDBC。我开始使用每个实体一个查询的方法来实现对我们相当复杂的域模型的检索，但是将结果放在模型中它们所属的位置的逻辑变得很难很快地遵循。

例如：项目可以有许多影响它们的动作，而一个动作可以影响许多项目。当我获取一个项目时，我想查看它的操作，并且我还想查看它们受影响的项目，不包括我首先获取的项目。所以这个数据：

```
Item: | id |  name |  Action: | id |  actNo  | itemId |
      |  1 | 'One' |          |  1 | '001-1' |      1 |
      |  2 | 'Two' |          |  1 | '001-1' |      2 |
                              |  2 | '002-2' |      2 | 
```

获取“二”时会产生这个结果：

```
Item {id: 2, name: 'Two',
  actionList: {
    Action {id: 1, actNo: '001-1',
      itemList: {
        Item {id: 1, name: 'One'}
      }
    },
    Action {id: 2, actNo: '002-2'}
  }
} 
```

这是我到目前为止的代码：

```
@Transactional
public List<Item> getItems(List<Integer> idList) {
    initializeTempTable(idList);
    return runQueries();
}

private void initializeTempTable(List<Integer> idList) {
    String createSql = "create temporary table if not exists temp_table (id int) on commit delete rows";
    jdbcTemplate.update(createSql, (SqlParameterSource) null);

    String insertSql = "insert into temp_table (id) values (:value)";
    List<MapSqlParameterSource> parameters = new ArrayList<MapSqlParameterSource>(idList.size());
    for(Integer id : idList) {
        parameters.add(new MapSqlParameterSource("value", id));
    }
    jdbcTemplate.batchUpdate(insertSql, parameters.toArray(new SqlParameterSource[parameters.size()]));
}

private List<Item> runQueries() {
    List<Item> itemList = getItems();
    addActions(itemList);
    // Add the rest...
    return itemList;
}

private List<Item> getItems() {
    String sql = "select i.* from item i join temp_table t on i.id = t.id";
    return jdbcTemplate.query(sql, (SqlParameterSource) null, new RowMapper<Item>() {
        public Item mapRow(ResultSet rs, int rowNum) throws SQLException {
            Item item = new Item();
            item.setId(rs.getInt("id"));
            item.setName(rs.getString("name"));
            return item;
        }
    });
}

private void addActions(List<Item> itemList) {
    String sql = "select a.* from action a " + 
            "join item i on a.itemId = i.id " +
            "join temp_table t on i.id = t.id;

    final Map<Integer, List<Item>> resultMap = new HashMap<Integer, List<Item>>();

    jdbcTemplate.query(sql, (SqlParameterMap) null, new RowCallbackHandler() {
        public void processRow(ResultSet rs) throws SQLException {
            Action action = new Action();
            action.setId(rs.getInt("id"));
            action.setActNo(rs.getString("actNo"));

            int itemId = rs.getInt("itemId");
            if(resultMap.containsKey(itemId)) {
                List<Action> actionList = resultMap.get(itemId);
                actionList.add(action);
            } else {
                List<Action> actionList = new ArrayList<Action>(Arrays.asList(action));
                resultMap.put(itemId, actionList);
            }
        }
    });

    for(Item item : itemList) {
        List<Action> actionList = resultMap.get(item.getId());
        item.setActionList(actionList);
    }

    addItemsToActions(resultMap);
}

private void addItemsToActions(final Map<Integer, List<Action>> resultMap) {
    String sql = "select i2.*, a2.id as actionId, i.id as orgId from item i2 " +
            "join action a2 on i2.id = a2.itemId " +
            "join action a on a2.id = a.id " +
            "join item i on a.itemId = i.id " +
            "join temp_table t on i.id = t.id " +
            "where i2.id != i.id";

    jdbcTemplate,query(sql, (SqlParameterSource) null, new RowCallbackHandler() {
        public void processRow(ResultSet rs) throws SQLException {
            Item item = new Item();
            item.setId(rs.getInt("id"));
            item.setName(rs.getString("name"));

            int orgItemId = rs.getInt("orgId");
            if(resultMap.containsKey(orgItemId)) {
                List<Action> actionList = resultMap.get(orgItemId);
                int actionId = rs.getInt("actionId");
                for(Action action : actionList) {
                    if(action.getId() == actionId) {
                        if(action.getItemList() == null) {
                            action.setItemList(new ArrayList<Item>());
                        }
                        action.getItemList().add(item);
                        break;
                    }
                }
            }
        }
    });
} 
```

如您所见，对于这样一个简单的关系，我得到了一些不明显的 sql 和许多难以理解的映射代码。我能看到如何解决这个问题的唯一方法就是完全按照 JPA 框架所做的那样：深度优先遍历模型并运行大量小查询来填充每个实例。这将使数据库管理员再次不高兴。

有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-23T14:54:31.980

不，没有更好的方法，如果你想要这样的查询 ORM 绝对不是要走的路（尽管一些 ORM 粉丝会告诉你）你最好将结果集作为动态平面结构返回，比如映射，并忘记尝试将其映射到域对象以及随之而来的所有父子噩梦。

上次我检查过 Spring 时有一个 queryForMap，尽管我不确定它是否返回一个类型化的 Map。

# php - Access-Control-Allow-Origin 不允许 php Origin

> ID：15931302
> 
> 赞同：1
> 
> 时间：2013-04-10T16:22:49.233
> 
> 标签：php, ftp, cross-domain

我的 ftp/php 跨域请求有问题。使用我的浏览器，我可以通过传递如下参数来访问内容：http: //xxx.org/models/get.php?file=default_app/y_car_new/ [stock.jpg](http://xxx.org/models/get.php?file=default_app/y_car_new/stock.jpg)。但是对于 JavaScript，相同的链接给了我`http://localhost:8000 is not allowed by Access-Control-Allow-Origin` 我已经尝试过的 Origin

> header("访问控制允许来源：*")

以下脚本没有运气。我的 ftp 访问服务器中有一个 get.php 文件，代码如下：

```
<?

if(isset($_GET["file"])) {
    $filepath = "/.../models/".$_GET["file"];
    //echo "path: " , $filepath;
    $filetype = pathinfo($filepath);
    //echo $filetype['extension'], "\n";
    header('Access-Control-Allow-Origin: *');
    header('Content-Type: '.$filetype['extension']);
    // //header('Content-Type: application/octet-stream');
    header('Content-Length: ' . filesize($filepath));
    ob_clean();

    readfile($filepath);
}//if

else {
   echo '<img src="http://stupidbadmemes.files.wordpress.com/2013/02/no-you-may-not.jpg"></img>';
}

?> 
```

我在这个脚本中做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:34:33.697

如果您要来回发送 GET 数据，我会尝试更多地打开您的访问控制。同源规则可能非常挑剔。

Allow-Origin 管理哪些服务器可以发出请求。

Max-Age 实现了过期。

Allow-Methods 允许请求者发送 GET/POST/等。数据给你。

**这是一个例子：**

```
header('Access-Control-Allow-Origin: *');
header('Access-Control-Max-Age: 3628800');
header('Access-Control-Allow-Methods: GET, POST, PUT, DELETE'); 
```

**旁注**

Allow-Origin 应在生产时设置为您的特定请求域，* 会增加一些风险。

请考虑清理您的输入，访问这样的文件是一件有风险的事情。您实际上是让人们阅读您工作目录中的任何文件。

`$filepath = "/.../models/".$_GET["file"];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:30:55.397

这是客户端的“问题”。这是一个安全问题，由浏览器实现以禁止从一个域到另一个域的请求。有一些方法可以解决这个问题，尤其是 JSONP。

# c# - 如何将任意方法（或委托）作为参数传递给函数？

> ID：15931306
> 
> 赞同：7
> 
> 时间：2013-04-10T16:23:09.010
> 
> 标签：c#, delegates, argument-passing

我需要能够将任意方法传递给某个函数`myFunction`：

```
void myFunction(AnyFunc func) { ... } 
```

应该可以使用其他静态、实例、公共或私有方法甚至委托来执行它：

```
myFunction(SomeClass.PublicStaticMethod);
myFunction(SomeObject.PrivateInstanceMethod);
myFunction(delegate(int x) { return 5*x; }); 
```

传递的方法可以有任意数量的参数和任何返回类型。还应该可以`myFunction`通过反射了解参数的实际数量及其类型。满足这些要求`AnyFunc`的定义是什么？`myFunction`有几个重载版本是可以接受的`myFunction`。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T16:25:54.377

该`Delegate`类型是所有其他委托类型的超类型：

```
void myFunction(Delegate func) { ... } 
```

然后，[`func.Method`](http://msdn.microsoft.com/en-us/library/system.delegate.method.aspx)将为您提供一个`MethodInfo`可用于检查返回类型和参数类型的对象。

调用该函数时，您必须明确指定要创建的委托类型：

```
myFunction((Func<int, int>) delegate (int x) { return 5 * x; }); 
```

对您要在更高级别上完成的工作有所了解会很好，因为这种方法可能并不理想。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:25:44.053

让方法接受一个`Delegate`，而不是一个特定的委托：

```
void myFunction(Delegate func)
{

} 
```

# c# - 我需要在我的 C# 程序中使用一个 VB 文件中的方法，我该如何调用这个方法？

> ID：15931307
> 
> 赞同：1
> 
> 时间：2013-04-10T16:23:09.963
> 
> 标签：c#, vb.net, dll

我有一个用 VB 编码的文件，我需要在我的 C# 程序中引用和使用它。我无法让我的 C# 程序识别我的 .vb 文件，以便我可以通过 C# windows 窗体方法向它发送变量。我怎样才能让这两个文件一起工作？我是否需要包含结合系统方法的 using 语句？你有什么建议？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T16:25:01.867

1.  创建一个 VB.NET 新项目
2.  将您的 VB 文件添加到其中。
3.  编译项目并从`bin`文件夹中获取 DLL。
4.  在 C# 项目中添加对此 DLL 的引用。
5.  现在您可以访问VB文件的功能了。

或者，您可以在一个解决方案中同时添加您的 C# 和这个新的 VB 项目，并在您的 C# 项目中添加对 VB 项目的引用。从调试的角度来看，这是首选的解决方案。

您可能想尝试免费提供的转换工具，这些工具可以将您的 VB.NET 代码转换为 C# 代码（反之亦然），从而摆脱上述所有问题。我经常使用[这里](http://econnetvert.codeplex.com/)提供的名为 Econ NetVert 的出色转换工具。

我刚刚注意到您已将 VB6 添加为问题中的标签之一。VB6中有问题的代码吗？如果是这样，您可能首先需要将其升级到 VB.NET。我知道 VS2003 中有一个向导可以为你做这件事。不确定现在在 VS2010 或 VS2012 中是否有任何其他等效工具或方法。

# javascript - 如何在 blueimp jQuery File Upload 上使用自己的文件处理处理程序？

> ID：15931308
> 
> 赞同：1
> 
> 时间：2013-04-10T16:23:13.137
> 
> 标签：javascript, jquery, file-upload, blueimp

我有自己的 PHP 图像文件上传过程处理程序。我只是在寻找一个 jQuery 解决方案来优化上传栏和多个文件选择。所以我花了几个小时进入 jQuery File Upload - 没有 ui，基本设置。我做了我需要的所有 js 更改，并尝试将它实施到我现有的文件上传表单中。

但现在我意识到，/server/php/UploadHandler.php 对 jQuery 脚本来说是必不可少的。如果没有这个 php 文件，我就无法进入“完成”事件。

我不想使用文件处理 UploadHandler 类，因为我有很多自己的步骤，比如水印，需要对上传的图像文件进行处理。我喜欢做这样的事情：

```
done: function (e, data) {
    // alert('done!');
    document.upload.submit(); // existing upload form including jQueryFileUpload
}, 
```

如何摆脱这个 PHP 类中的文件处理？我只希望“jQuery 文件上传”提供一个不错的多部分文件选择、一个 jQuery 图像预览和一个很棒的处理栏。

有没有办法阻止 PHP 触摸文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T10:16:11.820

我有一个类似的问题。我们希望在 HTML 表单中上传文件以及其他一些数据，而不是简单的上传。为此，提供的 PHP 类是不够的。

您可以轻松编写自己的 PHP 上传处理程序，使用提供的作为参考。或者使用其他一些后端技术。重要的是使用后端上传处理程序的 url 作为表单操作。

在 JS 中，如果您不想立即提交，则必须覆盖 fileupload 小部件的“添加”选项。“完成”仅对评估结果有用。我们将添加处理程序中的数据保存在一个闭包变量中，并在用户想要提交时使用它来提交。这样，其他表单数据将与上传请求一起自动发送。像这样：

```
(function()
{
  var uploadData;
  $("#uploadInput").fileupload(
  {
    add : function(e, data)
    {
      uploadData = data;
    },
   ... other options ...
  });
  $("#submit").submit(function()
  {
    if (uploadData != null)
      uploadData.submit();
   }
})(); 
```

不确定这是否适用于多次上传，但我希望这会有所帮助。

# html - @media 打印页脚信息相互重叠

> ID：15931310
> 
> 赞同：2
> 
> 时间：2013-04-10T16:23:14.860
> 
> 标签：html, css

我在打印时使用以下 css 创建页脚：

```
@media all {
   .page-break  { display: none; }
   .footer {display: none; }    
}

@media print {
   .page-break  { display: block; page-break-before: always; }
  .footer {display: block; position: fixed; bottom: 0; text-align: center; width:100%;}  
} 
```

在html中，我有类似的东西：

```
<body>
  ...
  ...
 <div class='footer'>Page Number: 1</div>
 <div class='page-break'></div>
 ...
 ...
 <div class='footer'>Page Number: 2</div>
 <div class='page-break'></div>
 ...

</body> 
```

现在的问题是，在打印视图中，第 1 页和第 2 页的页脚，它们的内容相互重叠。

我知道这是由 css“位置：固定；底部 0”引起的。我的问题是：如何使第 1 页和第 2 页的页脚在打印视图中仍显示在第 1 页和第 2 页的底部但它们不相互重叠？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:56:34.270

也许您可以将其中一个放在不在中心的位置。

# php - 在 cakephp 中将数据从视图传递到控制器

> ID：15931319
> 
> 赞同：-1
> 
> 时间：2013-04-10T16:23:45.810
> 
> 标签：php, cakephp, variable-assignment

在我的应用程序中，用户可以使用 xml 上传汽车条目列表。然后显示上传的条目，使用户可以选择要保存在数据库中的汽车。应再次显示未保存的条目，使用户可以选择更多或相应地丢弃。

我现在这样做是通过将控制器中的条目设置到视图中，将这些条目作为 json 字符串保存在隐藏字段中，当用户选择条目时，它们被反序列化为数组并保存在数据库中。

现在的问题是这是否是一个好的做法，或者是否有更好的方法来做到这一点？

谢谢，罗兰。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:28:20.283

我认为按照您的方式这样做没有问题。但是您也可以使用会话来临时存储这些数据。

# ruby-on-rails - 访问自定义 simple_form 输入中的 :namespace 选项值

> ID：15931329
> 
> 赞同：0
> 
> 时间：2013-04-10T16:24:31.093
> 
> 标签：ruby-on-rails, simple-form

我正在尝试为 simple_form (2.1.0) 创建新的输入，它知道`:namespace`. `simple_form_for`是否有可能在我的类扩展中获得这个值`SimpleForm::Inputs::Base`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:19:12.433

`:namespace`值可用于：`@builder.options[:namespace]`。

# visual-paradigm - 视觉范式识别关系

> ID：15931330
> 
> 赞同：2
> 
> 时间：2013-04-10T16:24:55.463
> 
> 标签：visual-paradigm

这个复选框是什么意思？当我单击它时，foreign_key 线表示变为实心而不是虚线。当我单击它时，我还会查看“同步到关联”下拉菜单。这是在做什么？

![在此处输入图像描述](https://i.stack.imgur.com/Bkv9E.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T06:32:33.767

以下帖子解释了识别和非识别关系之间的区别。 [识别关系和非识别关系有什么区别？](https://stackoverflow.com/questions/762937/whats-the-difference-between-identifying-and-non-identifying-relationships)

在 ERD 中，实线连接器用于表示标识关系，其中虚线连接器用于表示非标识关系。

“同步到关联”选项用于 Visual Paradigm 中的 ERD 和类模型同步功能。在 Visual Paradigm 中，您可以将您的 ER 模型映射到您的类模型（即实体映射到类，列映射到属性，以及 ERD 映射到类模型中的关联），并且您可以从中生成休眠。通过关闭“同步到关联”，当您将此 ER 模型同步到类模型时，该关系将不会转换为关联。有关同步的详细信息，[请访问 http://www.visual-paradigm.com/product/vpuml/features/dbobjectpersistence.jsp#syncorm](http://www.visual-paradigm.com/product/vpuml/features/dbobjectpersistence.jsp#syncorm)

# python - 如何在 Mac OS X 上安装 Python 开发头文件？

> ID：15931331
> 
> 赞同：32
> 
> 时间：2013-04-10T16:24:55.580
> 
> 标签：python, macos, header, homebrew

对于使用 Boost.Python 的项目（请参阅[另一个问题](https://stackoverflow.com/questions/15929566/need-help-getting-started-with-boost-python)），我需要包含例如`pyconfig.h`.

我的系统显然缺少这些。我已经通过 Homebrew 安装了 Python 3：

```
cls ~ $ brew info python3
python3: stable 3.3.0
http://www.python.org/
Depends on: pkg-config, readline, sqlite, gdbm
/usr/local/Cellar/python3/3.2.3 (4420 files, 78M)
/usr/local/Cellar/python3/3.3.0 (4843 files, 93M) *
https://github.com/mxcl/homebrew/commits/master/Library/Formula/python3.rb 
```

我也更喜欢通过 Homebrew 获取标题，但我找不到它们的包。

```
cls ~ $ brew search python-dev
No formula found for "python-dev". Searching open pull requests... 
```

安装这些标头有哪些选择？有自制包吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2014-02-14T07:07:32.170

最新的 Python 3 公式链接了一个名为`python3-config`. 您可以使用它来查找这样的标题：

`python3-config --include`

在我的机器上，这输出：

```
-I/usr/local/Cellar/python3/3.3.4/Frameworks/Python.framework/Versions/3.3/include/python3.3m -I/usr/local/Cellar/python3/3.3.4/Frameworks/Python.framework/Versions/3.3/include/python3.3m 
```

您可能需要`brew update && brew rm python3 && brew install python3`启用此功能。

有一个`python-config`用于 Python 2 的等效程序。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-10T16:35:43.397

这些是您正在寻找的标题：

```
Cellar/python3/3.3.0//Frameworks/Python.framework/Versions/3.3/include/python3.3m/ 
```

# breeze - BreezeJS 中包含单引号或双引号的字符串查询返回错误

> ID：15931334
> 
> 赞同：4
> 
> 时间：2013-04-10T16:25:01.873
> 
> 标签：breeze

我有一个搜索字段的文本输入，然后将字符串传递给 EntityQuery。当查询包含单引号时，我会收到如下消息：

在 'substringof(O'Malley,FirstName) eq true' 的位置 39 处有一个未终止的字符串文字。

甚至在像这样对查询进行硬编码时也会发生这种情况：

```
var query = breeze.EntityQuery
                .from("Users")
                .expand("GroupUsers.Group")
                .where("lastName", "contains","O'Malley")
                .skip(skipAmt)
                .take(pageSize)
                .inlineCount(true); 
```

我尝试通过执行双单引号或执行 \' 来转义单引号，但它仍然返回错误。双引号也会发生类似的情况。转义字符串文字字符的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T06:40:14.873

我无法重现这个。您应该能够通过简单地将其翻倍来逃避单个 ' 。例如，以下查询在**v 1.2.8**上没有问题。

```
 var q = EntityQuery.from("Employees")
        .where("lastName", "contains", "O''Malley"); 
```

如果您将查询“简化”到仅 where '子句'，问题是否仍然存在？

# actionscript-3 - 使用 actionscript 3 补间

> ID：15931338
> 
> 赞同：1
> 
> 时间：2013-04-10T16:25:09.070
> 
> 标签：actionscript-3, animation, flash, tween

我一直在研究这个。在这种情况下，我有一个名为“mcBall”的影片剪辑对象。我用补间设置了两个按钮“btnLeft”和“btnRight”，这样 mcBall 将在两点之间平滑地缓和。工作正常，但问题在于这两个按钮仍然处于活动状态，如果用户单击任一按钮，当然球会像预期的那样回到起点。我的问题是……在“mcBall”对象移动时停用按钮的最佳方法是什么。最好为按钮使用 removeEventListener 然后再次添加它。使用“If (mcBall.x = >=81 || <=469) removeEventListener”之类的 if 语句会更好吗？也许使用 tweenEvent。

任何帮助将不胜感激。谢谢

使用 Flash cs3

在这段代码中，我设法关闭了一个按钮，以便在球移动时它保持非活动状态，而另一个按钮仍处于活动状态。我不确定 removeEventListener 的位置。

```
import fl.transitions.Tween;
import fl.transitions.easing.*;

function moveBallRight(evt:MouseEvent):void {
    var moveBall:Tween=new Tween(mcBall,"x",Regular.easeOut,80,470,4,true);
    btnRight.removeEventListener(MouseEvent.CLICK,moveBallRight);
    btnLeft.addEventListener(MouseEvent.CLICK,moveBallLeft);

}
btnRight.addEventListener(MouseEvent.CLICK,moveBallRight);

function moveBallLeft(evt:MouseEvent) {
    var moveBall:Tween=new Tween(mcBall,"x",Regular.easeOut,470,80,4,true);
    btnRight.addEventListener(MouseEvent.CLICK,moveBallRight);
    btnLeft.removeEventListener(MouseEvent.CLICK,moveBallLeft);

}

btnLeft.addEventListener(MouseEvent.CLICK,moveBallLeft); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T00:31:25.257

就个人而言，我建议使用[Actuate](https://code.google.com/p/actuate/) tween 库。与 TweenLite/Max 不同，它是完全开源的，具有大部分功能，而且速度更快，没有专业/付费版本。

我也比 TweenLite 更喜欢 Actuate 的界面。它非常相似，人们很容易开始使用它，但我喜欢如何以更明确的方式添加补间修饰符。

简单的例子：

```
Actuate.tween(mySprite, 1, { alpha:1 }); 
```

那么您是否要指定一个缓动方程，只需将其链接到最后：

```
Actuate.tween(mySprite, 1, { alpha:1 }).ease(Quad.easeOut); 
```

也想要延迟？将其添加到链中：

```
Actuate.tween(mySprite, 1, { alpha:1 }).delay(1).ease(Quad.easeOut); 
```

当然你也可以调用 onComplete 函数，即使有参数：

```
Actuate.tween(mySprite, 1, { alpha:1 }).onComplete(trace, 'Tween finished'); 
```

查看上面链接的 Actuate Google Code 页面以获取带有示例的完整方法列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T16:37:43.293

我建议不要使用来自 fl.transitions.Tween 的原生 Tween 类。它不是很好。行业标准是[greensock 的 TweenMax](http://www.greensock.com/tweenmax/)。

使用 TweenMax 很容易响应补间结束事件。您只需`onComplete:myhandlerfunction`在补间中添加一个。上面代码中的一个示例如下所示： 而不是

```
 var moveBall:Tween=new Tween(mcBall,"x",Regular.easeOut,80,470,4,true); 
```

你将会拥有：

```
TweenMax.to(mcBall, 4, {x:470, ease:Expo.easeOut, onComplete:onBallMovedLeftComplete}; 
```

希望有帮助。我希望你永远不必再使用那些原生补间类。他们是坑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T18:44:56.730

我同意您应该按照其他答案的建议使用 TweenLite 或 TweenMax。

不过，据我所知，问题是为按钮激活/停用事件侦听器的最佳方法。

我想说最好的方法是有一个添加按钮侦听器的功能和另一个删除它们的功能。

然后，无论何时调用补间，在执行补间之前首先调用删除函数。

然后在完成后，您调用该函数再次添加它们。您可以将 onComplete 参数与 Tweenlite 一起使用来指定添加按钮侦听器的函数。

例如 ：

```
function moveBallRight(evt:MouseEvent):void
{
    removeButtonListeners();
    TweenLite.to(mcBall, 4, {x:470, ease:Expo.easeOut, onComplete:addButtonListeners};
}

function moveBallLeft(evt:MouseEvent):void
{
    removeButtonListeners();
    // do your tween
    TweenLite.to(mcBall, 4, {x:80, ease:Expo.easeOut, onComplete:addButtonListeners};
}

function addButtonListeners():void
{
   // add both listeners here
}

function removebuttonListeners():void
{
  // remove both listeners here
} 
```

此外，您显然还想在程序开始时调用 addButtonListeners，以便在程序运行时侦听器最初处于活动状态。

# android - Android HTTP URLConnection..setConnectTimeout(TIME_OUT);

> ID：15931340
> 
> 赞同：0
> 
> 时间：2013-04-10T16:25:12.580
> 
> 标签：android, http, httpurlconnection

我是 android 新手，我正在关注本教程：[http](http://www.9android.net/android-http-tutorial/) ://www.9android.net/android-http-tutorial/ 。但我不明白 TIME_OUT 值。有人可以向我解释并告诉我 TIME_OUT 值的正确值。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:29:11.693

20 秒后，URLConnection 将自动抛出 SocketTimeoutException。您在

```
conection.setConnectTimeout(TIME_OUT); 
```

线。这意味着系统将取消连接，这将导致您的 catch 块执行并且 connectionTimeout 变量将为 true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:29:12.593

超时值用于

设置连接时等待的最长时间（以毫秒为单位）。

[http://developer.android.com/reference/java/net/URLConnection.html#setConnectTimeout%28int%29](http://developer.android.com/reference/java/net/URLConnection.html#setConnectTimeout%28int%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:29:28.983

从javadoc：

> 设置一个指定的超时值，以毫秒为单位，在打开到此 URLConnection 引用的资源的通信链接时使用。如果在建立连接之前超时到期，则会引发 java.net.SocketTimeoutException。

这意味着您的连接未在 20 秒内建立，将引发 SocketTimeoutException。这可能是由于网络不稳定/不可用而发生的。

# javascript - 在 IE 中本地保存画布

> ID：15931341
> 
> 赞同：8
> 
> 时间：2013-04-10T16:25:17.377
> 
> 标签：javascript, html, internet-explorer, canvas, download

嗨，我想在 IE 中本地保存画布。

```
 var img = canvas.toDataURL("image/png").replace("image/png", "image/octet-stream"); 
```

我无法通过以下方式下载它。

```
1) document.execCommand("SaveAs"..
2) window.location.href = img;
3) $.fileDownload(img);  // jquery download file library-
4) canvas2image // cross domain problem. 
```

有没有办法在 IE 中本地保存画布而没有 base64 或跨域问题？非常感谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-02-18T22:32:53.133

我知道这已经晚了，但我在寻找做同样的事情时偶然发现了这个问题，我想分享一个对我有用的解决方案。

假设您已经有一个数据 URI，您可以创建一个[blob](https://msdn.microsoft.com/en-us/library/windows/apps/hh453178.aspx)，然后使用[msSaveBlob](https://msdn.microsoft.com/en-us/library/windows/apps/hh441122.aspx)或[msSaveOrOpenBlob](https://msdn.microsoft.com/en-us/library/windows/apps/hh441127.aspx)

例子：

```
dataURItoBlob = function(dataURI) {
        var binary = atob(dataURI.split(',')[1]);
        var array = [];
        for(var i = 0; i < binary.length; i++) {
            array.push(binary.charCodeAt(i));
        }
        return new Blob([new Uint8Array(array)], {type: 'image/png'});
    }

var blob = dataURItoBlob(uri);
window.navigator.msSaveOrOpenBlob(blob, "my-image.png"); 
```

我将这个[答案](https://stackoverflow.com/a/11954337/584710)用于我的大部分解决方案。

输入此内容后，我意识到这并不能真正帮助您解决跨域问题，因此充其量只是部分答案。有了这个，我只能说如果跨域是一个问题，请考虑在可能的情况下使用数据 URI。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-28T09:44:33.727

好吧，看起来这在 IE 中也不起作用，但是由于您没有列出它，我将提供一个示例。这使用[HTML5`download`属性](http://updates.html5rocks.com/2011/08/Downloading-resources-in-HTML5-a-download)（[更多here](http://davidwalsh.name/download-attribute)），并允许用户单击链接，然后下载文件。

```
<a href="data:text/html;base64,PCF...." download="file.png"></a> 
```

# asp.net-mvc - @Html.DisplayName 未正确显示电子邮件地址

> ID：15931342
> 
> 赞同：0
> 
> 时间：2013-04-10T16:25:21.557
> 
> 标签：asp.net-mvc, c#-4.0, model-view-controller, asp.net-mvc-4, asp.net-mvc-views

我正在尝试这样显示

```
var value = "Kartheek@gmail.com"

@Html.DisplayName(value) 
```

结果是：仅 com。

为什么？在这种情况下必须使用什么

我在这里解释更多

我的意图是用网格以非常通用的方式显示内容。

```
public class Grid
{
    private  Type type { get; set; }

    public Grid(IEnumerable datasource)
    {
        if (datasource == null)
        {
            throw new ArgumentNullException("datasource");
        }

        this.type = datasource.GetType().GetGenericArguments().Single();
        this.Data = datasource;
    }

    public IEnumerable Data { get; set; }

    public IEnumerable<System.Reflection.PropertyInfo> Props
    {
        get
        {
            return this.type.GetProperties().AsEnumerable();
        }
    }
} 
```

这是我的网格 C# 类。我将值分配给 Grid.data 并使用 viewbag 我将网格数据发送到视图，然后我在部分视图中使用它

这是我的部分视图代码

```
 @if (Model != null)
{
    <table style="width: 100%">
        <thead>
            <tr>
                @foreach (var col in Model.Props)
                {

                    <th>@Html.Label(col.Name)</th>

                }
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model.Data)
            {
                <tr>
                    @foreach (var prop in Model.Props)
                    {
                        var val = prop.GetValue(item, null).ToString();
                        <td>@Html.DisplayName(val)</td>

                    }
                    </tr>
                }
            </tbody>

    </table>
} 
```

最后我得到了这个答案。但我对bcz不满意，还有另一个很好的解决方案。

```
var val = "kartheek@gmail.com";
    <span>@val</span> 
```

# android - 将矩阵文件读入 Android

> ID：15931344
> 
> 赞同：0
> 
> 时间：2013-04-10T16:25:28.367
> 
> 标签：android, xml, file-io, matrix, mat

我正在尝试从 MATLAt 读取一个大矩阵并在我的 android 上读取它。您会将其转换为文本并从文本文件或 XML 文件中读取吗？您如何阅读它并将其显示给用户？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:30:10.840

试试 JSON——它更像是一个矩阵——

[http://www.json.org/](http://www.json.org/)

[http://www.mathworks.com/matlabcentral/fileexchange/33381-jsonlab-a-toolbox-to-encodedecode-json-files-in-matlaboctave](http://www.mathworks.com/matlabcentral/fileexchange/33381-jsonlab-a-toolbox-to-encodedecode-json-files-in-matlaboctave)

[http://developer.android.com/reference/org/json/JSONObject.html](http://developer.android.com/reference/org/json/JSONObject.html)

至于显示，这真的取决于你所追求的 - 你可以使用 TextView 或一些自定义解决方案

# c# - 如何在 Parallel.For 中配置最大线程数

> ID：15931346
> 
> 赞同：29
> 
> 时间：2013-04-10T16:25:39.947
> 
> 标签：c#, for-loop, parallel-processing

这是微软为并行提供的示例，我想知道如何为此代码配置最大线程数。

```
 // A basic matrix multiplication.
     // Parallelize the outer loop to partition the source array by rows.
     System.Threading.Tasks.Parallel.For(0, matARows, i =>
     {
        for (int j = 0; j < matBCols; j++)
        {
           // Use a temporary to improve parallel performance.
           double temp = 0;
           for (int k = 0; k < matACols; k++)
           {
              temp += matA[i, k] * matB[k, j];
           }
           result[i, j] = temp;
        }
     }); // Parallel.For 
```

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-04-10T16:29:03.837

您需要使用 a 指定一个[`ParallelOptions`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.aspx)值`MaxDegreeOfParallelism`：

例如：

```
Parallel.For(0, 10, new ParallelOptions { MaxDegreeOfParallelism = 4 }, count =>
{
    Console.WriteLine(count);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T16:28:13.323

使用[MaxDegreeOfParalelism](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx)属性运行循环

```
Parallel.For(0, 1000, new ParallelOptions { MaxDegreeOfParallelism = 2 }, ...); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T16:28:54.397

我建议您看一下[ParallelOption.MaxDegreesofParellelism](http://msdn.microsoft.com/en-us/library/system.threading.tasks.paralleloptions.maxdegreeofparallelism.aspx)并将其传递给`For`方法

# java - 我不知道如何修复此代码？

> ID：15931353
> 
> 赞同：0
> 
> 时间：2013-04-10T16:25:54.423
> 
> 标签：java, actionlistener

我知道我在这里的编码是一团糟，但我在编程方面相当陌生......无论如何，我希望我的程序从用户那里读取半径和高度并计算圆柱体的体积。我不知道如何处理我的最后两行。

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Volume extends JFrame implements ActionListener{

    private double h, r, v;
    JFrame frame = new JFrame();
    JLabel labelRadius = new JLabel("Radius: ");
    JLabel labelHight = new JLabel("Hight: ");
    JLabel labelVolume = new JLabel("Volume: ");
    JLabel volume = new JLabel();
    JTextField textRadius = new JTextField(10);
    JTextField textHight = new JTextField(10);
    JPanel panel = new JPanel();

    public Volume(){
        setLayout(new GridLayout(2,2));
        add(panel);
        panel.add(labelHight);
        panel.add(textHight);
        textHight.addActionListener(this);
        panel.add(labelRadius);
        panel.add(textRadius);
        textRadius.addActionListener(this);
        panel.add(labelVolume);
        panel.add(volume);
        panel.setLayout(new GridLayout(3,2));
        panel.setSize(600, 600);
        pack();
        panel.setVisible(true);
        panel.setOpaque(true);
        setDefaultCloseOperation(EXIT_ON_CLOSE);
    }

    public void actionPerformed(ActionEvent e) {
        String hight = textHight.getText();
        h = Double.parseDouble(hight);

    }

    public void actionPermormed(ActionEvent e){
        String radius = textRadius.getText();
        r = Double.parseDouble(radius);
    }

    public static void main(String[] args) {
        Volume vlm = new Volume();
        vlm.setVisible(true);

    }

    v = Math.PI*r*r*h; // I DONT KNOW WHERE TO PUT -
    volym.setText(Double.toString(v)); // THESE TWO LINES (IF MY CODING IS RIGHT)
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:37:34.593

您必须创建一个方法，例如：

```
public double ZylinderVolumen (double r, double h) {
   return Math.PI*r*r*h;
} 
```

# c++ - 使用（python，perl）（linux）在excel中创建图表

> ID：15931354
> 
> 赞同：1
> 
> 时间：2013-04-10T16:25:56.490
> 
> 标签：c++, python, perl, python-2.7

我需要从 Excel 表中存在的数据将图表/图形生成到 Excel 表中。我在linux环境中使用python。我已经完成了以下问题，但没有找到任何答案。我在 linux 环境中使用 python 2.7。如果我们有任何解决方案，我也可以灵活地使用 perl。

[使用python在excel中生成图形](https://stackoverflow.com/questions/5568319/use-python-to-generate-graph-in-excel)

[如何生成带有嵌入图形的 Excel 电子表格？](https://stackoverflow.com/questions/8462025/how-to-generate-excel-spreadsheets-with-embedded-graphs)

（尝试使用 openpyxl：[xlsx 文件中的图形被 openpyxl 覆盖](https://stackoverflow.com/questions/15905610/graphs-in-xlsx-file-overwrite-by-openpyxl)）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T09:56:14.507

我在下面找到了可能有用的 url。

[https://metacpan.org/pod/Spreadsheet::WriteExcel::Chart#NAME](https://metacpan.org/pod/Spreadsheet::WriteExcel::Chart#NAME)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-28T19:03:06.917

Python 模块 XlsxWriter[支持图表](https://xlsxwriter.readthedocs.org/en/latest/chart_examples.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-03T05:30:31.547

取自你的另一个问题...

[这](http://packages.python.org/openpyxl/charts.html)是有关如何在 openpyxl 中创建图表的文档

该示例有点损坏，请与此进行比较。

```
values = Reference(ws, (1, 1), (1, 95))
series = Series(values, title="Sample" )
chart = LineChart()
chart.append(series)
ws.add_chart(chart) 
```

# android - 如何使用具有 2 个表关联的 Android SQLite 数据库？

> ID：15931355
> 
> 赞同：0
> 
> 时间：2013-04-10T16:26:01.210
> 
> 标签：android, sqlite

我正在按照本教程[http://www.9android.net/how-to-code-android-sqlite/](http://www.9android.net/how-to-code-android-sqlite/) 进行编码，以使用 android sqlite 数据库。但它只有一个表，在我的情况下，我有 2 个表，它们通过 1 个字段关联在一起，第一个是：class_table: class_id(PK), class_name; 一个是：student_table: student_id(PK), class_id(FK), student_name 如何使用 SQLite 数据库代码将这 2 个表 CRUD。请把样本源发给我。太感谢了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:33:35.813

由于您的查询可能涉及多个表，因此最好的办法是使用[rawquery](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#rawQuery%28java.lang.String,%20java.lang.String%5B%5D,%20android.os.CancellationSignal%29)。通过这种方式，您可以像在 dbmss 上执行连接一样提供 sqllite 查询并获取结果。

# jakarta-ee - 带有 JBoss 7.1.1 的 EJB 导致 WELD 001303 错误

> ID：15931356
> 
> 赞同：1
> 
> 时间：2013-04-10T16:26:01.253
> 
> 标签：jakarta-ee, ejb, jboss7.x, sip, jboss-weld

我正在尝试触发导致 WELD 001303 问题的获取请求。@Path("/test") @RequestScoped 公共类 TestRest {

```
 @EJB
    HelloWorldInterface helloWorld;

    @GET
    @Path("/get")
    public Response get() {
        return Response.status(201).entity(helloWorld.sayHello()).build();
    }

    @POST
    @Path("/post")
    @Produces(MediaType.APPLICATION_JSON)
    @Consumes(MediaType.APPLICATION_JSON)
    public Response post(String request) {
        String answer = helloWorld.sayHello() + request;
        return Response.status(201).entity(answer).build();
    }

} 
```

[使用：来自http://sourceforge.net/projects/mobicents/files/Mobicents%20Sip%20Servlets/Mobicents%20Sip%20Servlets%201.7.0.FINAL/](http://sourceforge.net/projects/mobicents/files/Mobicents%20Sip%20Servlets/Mobicents%20Sip%20Servlets%201.7.0.FINAL/)的 mss-1.7.0FINAL-jboss-as-7.1.1.FINAL

我需要这个 MSS 包来支持 sip。

我的项目为[Sourecode](https://sipservlets.googlecode.com/issues/attachment?aid=1870000000&name=example_project_REST_error.zip&token=Oc_wNVtSOlkDAvPd-jz56l1oCQw:1365610849205)，项目为[.war](https://sipservlets.googlecode.com/issues/attachment?aid=1870000001&name=my-sipapp.war&token=GYJWAqg94kEr3bbpB1Pr9Tgq694:1365610849205)

工作流程：

```
1\. install mss package

2\. start mss/jboss server with sip support (standalone-sip.xml) and deploy project

3\. open http://127.0.0.1:8080/my-sipapp/rest/test/get 
```

--> `org.jboss.resteasy.spi.UnhandledException: org.jboss.weld.context.ContextNotActiveException: WELD-001303 范围类型 javax.enterprise.context.RequestScoped org.jboss.resteasy.core.SynchronousDispatcher 没有活动上下文。 handleApplicationException(SynchronousDispatcher.java:340) org.jboss.resteasy.core.SynchronousDispatcher.handleException(SynchronousDispatcher.java:214) org.jboss.resteasy.core.SynchronousDispatcher.handleInvokerException(SynchronousDispatcher.java:190) org.jboss.resteasy。 core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:540) org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:502) org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:119) org. jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher。服务(ServletContainerDispatcher.java:208) org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:55) org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java: 50) javax.servlet.http.HttpServlet.service(HttpServlet.java:847) org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) 根本原因62) 根本原因62) 根本原因

org.jboss.weld.context.ContextNotActiveException: WELD-001303 范围类型 javax.enterprise.context.RequestScoped org.jboss.weld.manager.BeanManagerImpl.getContext(BeanManagerImpl.java:598) org.jboss.weld 没有活动上下文。 bean.proxy.ContextBeanInstance.getInstance(ContextBeanInstance.java:71) org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:79) com.mycompany.app.rest.TestRest$Proxy$_$$ *WeldClientProxy .get(TestRest$Proxy$*$$_WeldClientProxy.java) sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) java.lang.reflect .Method.invoke(Method.java:601) org.jboss.resteasy.core.MethodInjectorImpl.invoke(MethodInjectorImpl.java:155) org.jboss.resteasy.core.ResourceMethod.invokeOnTarget(ResourceMethod.java:257) org.jboss .resteasy.core.ResourceMethod.invoke(ResourceMethod.java:222) org.jboss.resteasy.core.ResourceMethod.invoke(ResourceMethod.java:211) org.jboss.resteasy.core.SynchronousDispatcher.getResponse(SynchronousDispatcher.java:525 ) org.jboss.resteasy.core.SynchronousDispatcher.invoke(SynchronousDispatcher.java:502) org.jboss.resteasy.core。SynchronousDispatcher.invoke(SynchronousDispatcher.java:119) org.jboss.resteasy.plugins.server.servlet.ServletContainerDispatcher.service(ServletContainerDispatcher.java:208) org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher. java:55) org.jboss.resteasy.plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50) javax.servlet.http.HttpServlet.service(HttpServlet.java:847) org.jboss.weld.servlet。 ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62)`plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50) javax.servlet.http.HttpServlet.service(HttpServlet.java:847) org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) `plugins.server.servlet.HttpServletDispatcher.service(HttpServletDispatcher.java:50) javax.servlet.http.HttpServlet.service(HttpServlet.java:847) org.jboss.weld.servlet.ConversationPropagationFilter.doFilter(ConversationPropagationFilter.java:62) `

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T14:00:27.667

有2个解决方案。您等到weld-core-1.1.8.FINAL.jar 更新！或者您获取源代码并在 org.jboss.weld.context.AbstractBoundContext 中进行硬修复：

```
public void deactivate() {
if (getBeanStore() != null )
{ getBeanStore().detach(); super.deactivate(); }
} 
```

有关更多信息，请参阅[https://issues.jboss.org/browse/WELD-1020?_sscc=t](https://issues.jboss.org/browse/WELD-1020?_sscc=t)

# mercurial - Mercurial 与 subrepo 合并抛出关于 .hgsubstate 的错误

> ID：15931359
> 
> 赞同：3
> 
> 时间：2013-04-10T16:26:16.580
> 
> 标签：mercurial, tortoisehg, branching-and-merging

我正在尝试将我的本地与我提取的更改合并，我收到此错误：

```
% hg merge --verbose --tool=internal:fail 68
resolving manifests
'.hgsubstate'
[command returned code 255 Wed Apr 10 09:10:59 2013] 
```

我正在使用 TortoiseHg 并且 subrep 没有显示任何未提交的更改。

此错误消息对于帮助我弄清楚要修复什么以及如何修复它不是很有帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T12:30:11.660

这看起来像在[hg 2.5.4中修复的](https://www.mercurial-scm.org/wiki/WhatsNew/Archive#Mercurial_2.5.4_.282013-04-04.29)[错误 3855](https://bz.mercurial-scm.org/show_bug.cgi?id=3855)。似乎还没有包含此版本的 TortoiseHG 版本，但您也许可以在 thg 邮件列表上询问他们是否计划发布新版本。在此之前，您要么必须降级到旧版本的 thg，要么从[此处](https://www.mercurial-scm.org/wiki/Download)下载仅命令行版本。

# xslt - 在模板中不起作用

> ID：15931360
> 
> 赞同：1
> 
> 时间：2013-04-10T16:26:16.933
> 
> 标签：xslt

我花了2个小时在互联网上寻找帮助，但我没有找到任何答案......

我希望你能:)

所以，我的 xslt 文件如下（简化）：

```
<?xml version="1.0" encoding="utf-8" ?>
   <xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" />
    <xsl:param name="basename"/>
    <xsl:param name="purpose"/>
    <xsl:param name="xml_input_path"/>
    <xsl:param name="self"/>

    <xsl:template match="testspec">
        <xsl:call-template name="call_commands"/>
    </xsl:template>

    <xsl:template name="call_commands">
        <xsl:variable name="root" select="document($xml_input_path)/testspec"/>
        <xsl:for-each select="$root//command">
            <xsl:sort select="."/>
            <xsl:variable name="current" select="."/>
            <xsl:apply-templates select="document($self)/xsl:stylesheet/xsl:template[@name = $current/@label]"/>
        </xsl:for-each>
    </xsl:template>

    <xsl:template name="TOTO_short">
        <xsl:text>Fonction TOTO :</xsl:text>
        <xsl:variable name="dda" select="'b'"/>
        <xsl:copy-of select="$dda"/>
    </xsl:template>

    <xsl:template name="TATA_interrupt">
                Fonction TATA :
        <xsl:variable name="v1_name" select="'NaN'"/>
        <xsl:value-of select="$v1_name" />
    </xsl:template>
</xsl:stylesheet> 
```

这是我的输入 XML：

```
<testspec>
   <command label="TOTO_short"/>
   <command label="TATA_interrupt"/>
   <command label="TOTO_short"/>
   <command label="TATA_interrupt"/>
</testspec> 
```

我的问题如下：在模板 TOTO_short 和 TATA_short 中，我想定义 2 个变量并显示它们的值...

但它不起作用！

你能帮我理解它的来源吗？

提前非常感谢:)

阿尔诺

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:32:39.783

问题在于这条看起来很疯狂的线

```
<xsl:apply-templates select="document($self)/xsl:stylesheet/xsl:template[@name = $current/@label]"/> 
```

看起来您正在尝试使用与当前`label`属性相同的名称来调用命名模板。但是要调用命名模板，您必须使用**xsl:call-template**。为了让您当前的**xsl:apply-templates**找到任何东西，您需要一个像这样的模板：

```
<xsl:template match="xsl:template[@name='TOTO_short']">
    <xsl:call-template name="TOTO_short" />
</xsl:template> 
```

这真的不是做事的方式！您的命名模板似乎工作的原因是这里使用了 XSLT 中的内置模板。当它找不到像上面这样的匹配模板时，它会简单地输出元素的文本。

我真的不认为需要这种复杂的方法。而不是您当前的**xsl:for-each**，您可以简单地执行以下操作：

```
<xsl:apply-templates select="$root//command" /> 
```

然后你有一个匹配的模板，像这样：

```
<xsl:template match="command[@label='TOTO_short']">
    <xsl:text>Fonction TOTO :</xsl:text>
    <xsl:variable name="dda" select="'b'"/>
    <xsl:copy-of select="$dda"/>
</xsl:template> 
```

试试这个 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" />
    <xsl:param name="basename"/>
    <xsl:param name="purpose"/>
    <xsl:param name="xml_input_path" select="'C:\Users\Tim Case\Documents\Test.xml'" />
    <xsl:param name="self"/>

    <xsl:template match="testspec">
        <xsl:call-template name="call_commands"/>
    </xsl:template>

    <xsl:template name="call_commands">
        <xsl:variable name="root" select="document($xml_input_path)/testspec"/>
        <xsl:apply-templates select="$root//command" />
    </xsl:template>

    <xsl:template match="command[@label='TOTO_short']">
        <xsl:text>Fonction TOTO :</xsl:text>
        <xsl:variable name="dda" select="'b'"/>
        <xsl:copy-of select="$dda"/>
    </xsl:template>

    <xsl:template match="command[@label='TATA_interrupt']">
                Fonction TATA :
        <xsl:variable name="v1_name" select="'NaN'"/>
        <xsl:value-of select="$v1_name" />
    </xsl:template>
</xsl:stylesheet> 
```

实际上，我不确定您为什么在这里将 XML 的路径作为参数传递。您实际上可以将 XSLT 简化为：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="text" />
    <xsl:param name="basename"/>
    <xsl:param name="purpose"/>

    <xsl:template match="testspec">
        <xsl:apply-templates select="command" />
    </xsl:template>

    <xsl:template match="command[@label='TOTO_short']">
        <xsl:text>Fonction TOTO :</xsl:text>
        <xsl:variable name="dda" select="'b'"/>
        <xsl:copy-of select="$dda"/>
    </xsl:template>

    <xsl:template match="command[@label='TATA_interrupt']">
                Fonction TATA :
        <xsl:variable name="v1_name" select="'NaN'"/>
        <xsl:value-of select="$v1_name" />
    </xsl:template>
</xsl:stylesheet> 
```

# r - 如何计算二阶马尔可夫链的转移概率矩阵

> ID：15931362
> 
> 赞同：-1
> 
> 时间：2013-04-10T16:26:29.127
> 
> 标签：r, markov-chains, markov, markov-models

我有这样的数据

Broker.Position

IP BP SP IP IP ..

我想以这种形式计算二阶转换矩阵

```
 BP IP SP 
```

血压

SPSP

IPIP

BPSP

SPBP

IPSP

SPIP

BPIP

IPBP

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:22:37.050

您可以使用`embed`生成连续转换对、 `table`对它们进行计数、 `apply`计算总数并将计数转换为概率， `dcast`以及`melt`将数组转换为 data.frame。

```
# Sample data
states <- sample(LETTERS[1:3], 1e5, replace=TRUE)

# Pairs of transitions
d <- embed( states, 3 )
colnames(d) <- c("today", "yesterday", "day before yesterday")
head(d)

# Count the transitions
counts <- table( as.data.frame( d ) )

# Divide by the total number of transitions, to have probabilities
probabilities <- counts
probabilities[] <- as.vector(counts) / rep( as.vector(apply( counts, 2:3, sum )), each=dim(counts)[1] )

# Check that the probabilities sum up to 1
apply( probabilities, 2:3, sum )

# Convert the 3-dimensional array to a data.frame
library(reshape2)
dcast( melt( probabilities ), yesterday + `day before yesterday` ~ today ) 
```

# c++ - 如何在 C++ 中获取指向具有绑定变量的成员函数的函数指针？

> ID：15931364
> 
> 赞同：0
> 
> 时间：2013-04-10T16:26:33.010
> 
> 标签：c++, function-pointers, member-function-pointers

我想调用一个函数`g`（来自第 3 方库），该函数将指向函数的指针作为输入`f`。这个函数指针`f`本身就带有一些参数。

由于我的函数`f`依赖于数据并且我不能将此数据作为参数传递（引用）给函数`f`，因为我需要`f`使用函数指针中使用的签名来实现，所以我想做以下两件事之一：

*   实现`f`为类的（非静态）成员函数
*   实现一个辅助函数`fHelper`，该函数接受附加参数，然后构造一个函数指针（但不是函数对象），该函数指针具有使用的函数指针的签名，并使用绑定到特定值的附加参数进行`g`调用。`fHelper`

从设计的角度来看，第三种既不是线程安全的也不是可接受的解决方案是使用全局变量。

我已经看过`boost:bind`但`std::mem_fun`不明白这些概念在这种情况下是否有效。我非常感谢一个有启发性的答案，可能还有一些关于通常如何处理这种情况的背景知识。

# meteor - 用于同步大量数据的 DDP 与直接 MongoDB 访问

> ID：15931368
> 
> 赞同：2
> 
> 时间：2013-04-10T16:26:41.937
> 
> 标签：meteor

我们正在 Meteor 中构建一个将参与教育生态系统的应用程序。有许多应用程序（例如，GradeBook、学生信息系统、报告系统……）都需要使其数据存储与 Meteor 保持同步。数据存储大小将在数十万个文档中。

我的理解是，DDP 用于将“客户端”连接到 Meteor 应用程序（通过在 Meteor 推送数据更改和 RPC 以将数据获取到 Meteor 时订阅提要）。并且“客户端”通常仅限于用户......因此与数据世界相比，数据集的大小相对较小（教师可能可以访问 250K 文档中的 100 个）。

如果我使用 DDP 将报告系统（作为“客户端”）连接到 Meteor，则需要同步存储中的所有数据......这是否意味着每次报告系统失去与 Meteor 的连接时，所有数据都将是从 Meteor 重新发送到 DDP 客户端？（因为报告系统对所有数据都感兴趣）......如果是这样的话，DDP 不会是保持应用程序同步的方式，对吧？......对于更小的范围数据集来说意味着更多...... ..我们可能应该直接与 Mongo 交互以保持同步。

谢谢！麦克风

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:02:51.670

基于此 [http://meteor.com/blog/2012/03/21/introducing-ddp](http://meteor.com/blog/2012/03/21/introducing-ddp)

> 分布式数据协议。DDP 是解决客户端 JavaScript 开发人员面临的最大问题的标准方法：查询服务器端数据库，将结果发送到客户端，然后在数据库发生任何变化时将更改推送到客户端。

似乎很明显，任何新的 DDP 客户端都会接收所有数据，然后随着数据的变化而变化。

我建议如果您的“客户端”不需要反应性/实时更新/2 路同步，您应该直接从 mongo 中提取数据并避免“同步”的开销。对于“报告系统”，这应该是完全可以接受的，获取一堆数据，生成报告。您不应该关心在这种情况下更改数据，只关心快照和来自该快照的报告。

如果您确实需要更实时的功能，那么 DDP 可能值得开销和初始设置困难。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T19:02:43.417

我认为 nate 的回答非常适合您应该做什么，特别是考虑到数据量。如果您需要显示大量数据，如果您使用页面来使用分页订阅，这样您就可以享受实时功能（如果您决定使用它）而无需一次全部下载。请记住，目前数据是这样发送的（对于每个会话，因此如果选项卡关闭并重新打开，它将被重做）：

```
1 - Connect to DDP Server/Proxy (Long Polling now due to websocket issues with chrome)
2 - Establish a 'subscription'
3 - Fetch all data relevant to subscription (initial download)
4 - Subscription is complete, now the client will 'listen' for changes
5 - Any updates (remove/update/insert, etc) are sent down to the client 
```

在这一点上确实没有一个同步系统，旧数据保持离线（在本地存储或索引数据库或任何东西中），因此可以避免第 3 步，并且只会发生从该点开始的同步。

请注意，如果存在连接中断（例如，在短时间内失去连接性，Meteor 将失去与 DDP 线的连接，并且当它重新连接时，它会重新下载所有内容，就像从头开始一样。

# python - 使用 NumPy 在 Python 中进行简单的多处理

> ID：15931370
> 
> 赞同：1
> 
> 时间：2013-04-10T16:26:43.913
> 
> 标签：python, multiprocessing

尽管我从关于这个主题的大量问题中得到了警告和困惑的感觉，尤其是在 StackOverflow 上，我并行化了一个令人尴尬的并行问题的幼稚版本（基本上是**read-image-do-stuff-return**的列表许多图像），为每个计算返回生成的 NumPy 数组，并通过`callback`参数更新一个全局 NumPy 数组，并立即在 8 核机器上获得**x5 加速。**

现在，由于每次回调调用都需要锁定，我可能没有得到 x8，但我得到的结果令人鼓舞。

我试图找出这是否可以改进，或者这是否是一个好的结果。问题 ：

*   我想返回的 NumPy 数组被腌制了？
*   底层的 NumPy 缓冲区是*复制*的还是只是*通过引用传递的*？
*   我怎样才能找出瓶颈是什么？有什么特别有用的技术吗？
*   我可以对此进行改进，还是在这种情况下这种改进很常见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-20T17:43:53.800

我使用`sharedmem`模块在多个进程之间共享大型 NumPy 数组（当然是通过引用）取得了巨大成功：[https](https://bitbucket.org/cleemesser/numpy-sharedmem) ://bitbucket.org/cleemesser/numpy-sharedmem 。基本上它抑制了在 NumPy 数组周围传递时通常发生的酸洗。您所要做的就是，而不是：

```
import numpy as np
foo = np.empty(1000000) 
```

做这个：

```
import sharedmem
foo = sharedmem.empty(1000000) 
```

然后你`foo`就从一个进程传递到另一个进程，比如：

```
q = multiprocessing.Queue()
...
q.put(foo) 
```

但是请注意，该模块在不正常的程序退出时存在内存泄漏的已知可能性，此处在某种程度上进行了描述：http: [//grokbase.com/t/python/python-list/1144s75ps4/multiprocessing-shared-memory-vs -腌制副本](http://grokbase.com/t/python/python-list/1144s75ps4/multiprocessing-shared-memory-vs-pickled-copies)。

希望这可以帮助。我使用该模块来加速多核机器上的实时图像处理（我的项目是[https://github.com/vmlaker/sherlock](https://github.com/vmlaker/sherlock)。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-21T19:03:37.987

*Note: This answer is how I ended up solving the issue, but Velimir's answer is more suited if you're doing intense transfers between your processes. I don't, so I didn't need `sharedmem`.*

# How I did it

It turns out that the time spent pickling my NumPy arrays was negligible, and I was worrying too much. Essentially, what I'm doing is a MapReduce operation, so I'm doing this :

*   First, on Unix systems, any object you instantiate before spawning a process will be present (and copied) in the context of the process if needed. This is called **copy-on-write** (COW), and is handled automagically by the kernel, so it's pretty fast (and definitely fast enough for my purposes). The docs contained a lot of warnings about objects needing pickling, but here I didn't need that at all for my inputs.

*   Then, I ended up **loading my images from the disk**, from *within* each process. Each image is individually processed (mapped) by its own worker, so I neither lock nor send large batches of data, and I don't have any performance loss.

*   Each worker does its own reduction for the mapped images it handles, then **sends the result to the main process with a `Queue`**. The usual outputs I get from the reduction function are 32-bit float images with 4 or 5 channels, with sizes close to 5000 x 5000 pixels (~300 or 400MB of memory each).

*   Finally, I retrieve the intermediate reduction outputs from each process, then do a final reduction in the main process.

I'm not seeing any performance loss when transferring my images with a queue, even when they're eating up a few hundred megabytes. I ran that on a 6 core workstation (with HyperThreading, so the OS sees 12 logical cores), and using `multiprocessing` with 6 cores was 6 times faster than without using `multiprocessing`.

*(Strangely, running it on the full 12 cores wasn't any faster than 6, but I suspect it has to do with the limitations of HyperThreading.)*

# Profiling

Another of my concerns was profiling and quantifying how much overhead `multiprocessing` was generating. Here are a few useful techniques I learned :

*   Compared to the built-in (at least in my shell) `time` command, the `time` *executable* (`/usr/bin/time` in Ubuntu) gives out much more information, including things such as average RSS, context switches, average %CPU,... I run it like this to get everything I can :

    ```
     $ /usr/bin/time -v python test.py 
    ```

*   Profiling (with `%run -p` or `%prun` in IPython) only profiles the main process. You can hook `cProfile` to every process you spawn and save the individual profiles to the disk, like in [this answer](https://stackoverflow.com/questions/11041683/python-multiprocess-profiling).

    I suggest adding a `DEBUG_PROFILE` flag of some kind that toggles this on/off, you never know when you might need it.

*   Last but not least, you can get some more or less useful information from a syscall profile (mostly to see if the OS isn't taking ages transferring heaps of data between the processes), by attaching to one of your running Python processes like :

    ```
     $ sudo strace -c -p <python-process-id> 
    ```

# java - 读取 SD 卡上的文件时出错

> ID：15931371
> 
> 赞同：0
> 
> 时间：2013-04-10T16:26:44.200
> 
> 标签：java, android, io

我的对话框显示目录`/sdcard`及其所有文件。选择文件/图像后，路径与位图图像一起保存，例如

```
file.name = "/sdcard/Pictures/Screenshots/Screenshot_2013-01-15-10-42-02.jpg";` 
```

但是，每次我尝试通过单击位图打开文件时，都会导致打开的应用程序崩溃，而不是我的应用程序。

我已经设置了写外部存储权限。代码片段如下所示。我真的不知道出了什么问题。我还尝试了所有文件类型，例如`txt`, `pdf`,`doc`等，都导致打开文件应用程序崩溃，并且无法打开文件。

**Adapter.java**（到位图）

```
public View getView(int position, View convertView, Viewgroup parent(){
   case Image:
   Bitmap bp = new BitmapFactory().decodeFile(file.name);
   image.setImageBitmap(Bitmap.create(bp, 200, 200, true));
   break;

} 
```

**活动.java**

```
public void onItemClick(AdapterView<?> parent, View v, int position, long id){
    Intent intent = new Intent();
    intent.setAction(Intent.ACTION_VIEW);
    intent.setData(Uri.fromFile(new File(file.name)));
    intent.setFlags(Intent.FLAG_ACTIVITY_NO_HISTORY);

  switch(file.getTypeByName()){
  case Image:
       intent.setType("image/*");
       break;
  }
 startActivityforResult(intent, 000);
} 
```

**日志猫**

```
04-10 12:04:42.164: E/AndroidRuntime(4513): FATAL EXCEPTION: main
04-10 12:04:42.164: E/AndroidRuntime(4513): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.android.sec.gallery3d/com.android.sec.gallery3d.app.Gallery}: java.lang.NullPointerException
04-10 12:04:42.164: E/AndroidRuntime(4513):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1968)
04-10 12:04:42.164: E/AndroidRuntime(4513):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1993)
04-10 12:04:42.164: E/AndroidRuntime(4513):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
04-10 12:04:42.164: E/AndroidRuntime(4513):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1159)
04-10 12:04:42.164: E/AndroidRuntime(4513):     at android.os.Handler.dispatchMessage(Handler.java:99)
04-10 12:04:42.164: E/AndroidRuntime(4513):     at android.os.Looper.loop(Looper.java:137)
04-10 12:04:42.164: E/AndroidRuntime(4513):     at android.app.ActivityThread.main(ActivityThread.java:4512)
04-10 12:04:42.164: E/AndroidRuntime(4513):     at java.lang.reflect.Method.invokeNative(Native Method)
04-10 12:04:42.164: E/AndroidRuntime(4513):     at java.lang.reflect.Method.invoke(Method.java:511)
04-10 12:04:42.164: E/AndroidRuntime(4513):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:978)
04-10 12:04:42.164: E/AndroidRuntime(4513):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:745)
04-10 12:04:42.164: E/AndroidRuntime(4513):     at dalvik.system.NativeStart.main(Native Method)
04-10 12:04:42.164: E/AndroidRuntime(4513): Caused by: java.lang.NullPointerException
04-10 12:04:42.164: E/AndroidRuntime(4513):     at com.android.sec.gallery3d.app.Gallery.startViewAction(Gallery.java:377)
04-10 12:04:42.164: E/AndroidRuntime(4513):     at com.android.sec.gallery3d.app.Gallery.initializeByIntent(Gallery.java:237)
04-10 12:04:42.164: E/AndroidRuntime(4513):     at com.android.sec.gallery3d.app.Gallery.onCreate(Gallery.java:149)
04-10 12:04:42.164: E/AndroidRuntime(4513):     at android.app.Activity.performCreate(Activity.java:4469)
04-10 12:04:42.164: E/AndroidRuntime(4513):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1052)
04-10 12:04:42.164: E/AndroidRuntime(4513):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1932)
04-10 12:04:42.164: E/AndroidRuntime(4513):     ... 11 more
04-10 12:04:42.164: W/ActivityManager(668):   Force finishing activity r.intent.getComponent().flattenToShortString()
04-10 12:04:42.234: E/android.os.Debug(668): !@Dumpstate > dumpstate -k -t -n -z -d -o /data/log/dumpstate_app_error
04-10 12:04:42.244: I/dumpstate(4530): begin 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:45:46.443

所以我发现了这个：[https](https://stackoverflow.com/a/3677598/1704011) ://stackoverflow.com/a/3677598/1704011答案

引用评论者：

> 使用 setDataAndType() 而不是 2 个单独的调用解决了她的问题。

这真的让我很困惑，为什么这是必要的。然后我查看了`Intent.setType()`,`Intent.setData()`和的实现`Intent.setDataAndType()`。看看这个：

```
public Intent setType(String type) {
    mData = null;
    mType = type;
    return this;
}

public Intent setData(Uri data) {
    mData = data;
    mType = null;
    return this;
} 
```

所以调用`setType`after `setData`clobbers 数据和调用`setData`clobbers 类型。这就是画廊应用程序中断的原因，您`setType`之后`setData`发送意图时数据为空。诚然[文档](http://developer.android.com/reference/android/content/Intent.html#setType%28java.lang.String%29)确实提到了这种行为，但它基于方法名称并不直观，类似于`setTypeOnly`并且`setDataOnly`似乎更明确地传达了这些方法的目的。否则，不清楚这些方法是否相互排斥。

使用`setDataAndType()`它应该可以解决您的问题。

# c# - 实现具有 2 个返回的方法的最佳方法是什么？

> ID：15931372
> 
> 赞同：2
> 
> 时间：2013-04-10T16:26:44.527
> 
> 标签：c#, asp.net

我经常遇到一些代码，我必须返回一个布尔值来指示方法是否成功完成，并在出现问题时返回一个带有错误消息的字符串。

我以两种方式实现了这一点。首先是一个响应类，所有类的所有方法都使用这个响应类进行通信。例子：

```
public class ReturnValue {
    public bool Ok;
    public string Msg;
    public object SomeData;

    public ReturnValue() {
        this.Ok = true;
        this.Msg = null;
    }

    public ReturnValue(string Msg) {
        this.Ok = true;
        this.Msg = Msg;
    }

    public ReturnValue(object SomeData) {
        this.Ok = true;
        this.SomeData = SomeData;
    }

    public ReturnValue(bool Ok, string Msg) {
        this.Ok = Ok;
        this.Msg = Msg;
    }

    public ReturnValue(bool Ok, string Msg, object SomeData) {
        this.Ok = Ok;
        this.Msg = Msg;
        this.SomeData = SomeData;
    }
}

public class Test {
    public ReturnValue DoSomething() {
        if (true) {
            return new ReturnValue();
        } else {
            return new ReturnValue(false, "Something went wrong.");
        }
    }
} 
```

第二种方法是有一个方法来存储消息以防出错并查看消息只需调用此方法即可。例子：

```
public class Test {
    public string ReturnValue { get; protected set; }

    public bool DoSomething() {
        ReturnValue = "";

        if (true) {
            return true;
        } else {
            ReturnValue = "Something went wrong.";
            return false;
        }
    }
} 
```

有正确的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:29:31.603

C# 不依赖于返回值来知道某事是否成功，或者如果没有成功，则错误是什么，C# 通常依赖于异常。如果您的程序有效，请不要抛出异常。如果它不起作用，则抛出异常并将错误消息包含在抛出的异常中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:29:14.217

就个人而言，我更喜欢使用`ref`关键字。

```
public bool DoSomething(ref string returnValue) {
    returnValue = "something";
    return true;
} 

string returnValue = "";
DoSomething(ref returnValue);
// returnValue now has new value. 
```

# javascript - Firefox offsetWidth 没有报告任何内容。

> ID：15931374
> 
> 赞同：0
> 
> 时间：2013-04-10T16:26:51.647
> 
> 标签：javascript, dom, offsetwidth

我正在尝试使用 javascript 进行一些动态调整大小。作为其中的一部分，我需要报告容器的当前大小。我编写了一个函数来执行此操作（如下），它在 chrome 中效果很好......但是在 Firefox 中，宽度不会被报告。我已经阅读了 offsetWidth 方法，理论上它应该在 Firefox 中工作。

```
function currentBoxW() {
    return document.getElementById("wrapper").offsetWidth;
} 
```

所有这些报告都是“NaN”。

在实际页面中该功能还有更多内容，但所有附加代码已被注释掉以进行测试......这是执行报告的实际行。

我是否遗漏了什么，或者有没有更聪明的方法来使用 JS 和 DOM 报告宽度？有没有另一种方法来获取 div 的宽度？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:34:58.350

你可能有两个问题：

1.  确保您已通过 CSS 明确设置元素（包装器）的宽度
2.  确保在文档准备好后执行 javascript 代码。 `window.onload()`或类似的东西，如果你正在使用任何其他 javascript 库

如果您可以改用 jquery，则可以轻松使用

```
$(document).ready(function(){ 
  function currentBoxW() {
    return $('#wrapper').width();
    or 
    return $('#wrapper').innerWidth(); //depending on the requirement. 
  }

}); 
```

# php - php加入具有相同初始值的数组

> ID：15931375
> 
> 赞同：0
> 
> 时间：2013-04-10T16:27:03.793
> 
> 标签：php

这是我的数组

```
Array
(
    [0] => Array
        (
            [0] => Jan 2010
            [1] => 65.75
        )

    [1] => Array
        (
            [0] => Jan 2010
            [1] => 211.05
        )

    [2] => Array
        (
            [0] => Jan 2010
            [1] => 582.7
        )

    [3] => Array
        (
            [0] => Feb 2010
            [1] => 136.3
        )

    [4] => Array
        (
            [0] => Feb 2010
            [1] => 215.32
        )

    [5] => Array
        (
            [0] => Feb 2010
            [1] => 413.9
        )

    [6] => Array
        (
            [0] => Mar 2010
            [1] => 156.35
        )

    [7] => Array
        (
            [0] => Mar 2010
            [1] => 210.54
        )

    [8] => Array
        (
            [0] => Mar 2010
            [1] => 585.15
        )

    [9] => Array
        (
            [0] => Apr 2010
            [1] => 126.1
        )

    [10] => Array
        (
            [0] => Apr 2010
            [1] => 255.47
        )

    [11] => Array
        (
            [0] => Apr 2010
            [1] => 329.1
        )

    [12] => Array
        (
            [0] => May 2010
            [1] => 109
        )

    [13] => Array
        (
            [0] => May 2010
            [1] => 170
        )

    [14] => Array
        (
            [0] => May 2010
            [1] => 716.7
        )

) 
```

有什么办法可以让所有数组在 [0] 合并中具有相同的值？我希望它是这样的：

```
Array[0] = (Jan 2010, 65.75, 211.05, 582.7)
Array[1] = (Feb 2010, 136.3, 215.32, 413.9) 
```

等等...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:35:55.870

我能想到的最接近的“简单”（阅读：利用原生 PHP 功能）是切换到文本键（关联数组）以获得结果。从数据建模的角度来看，这也是有道理的，因为在您的示例结果数组中，您混合了“键”数据和“值”数据（例如，第一个值负责作为集合 == 坏的标签）。诀窍是使用隐式“push”运算符`[]`，它将一个新值附加到数组中。

```
foreach($sourceArray as $currentSubArray) {
  $resultArray[$currentSubArray[0]][] = $currentSubArray[1];
} 
```

您的结果将如下所示：

```
Array (
  'Jan 2010' => Array (
    0 => 65.75,
    1 => 211.05,
    2 => 582.7,
  )
  ...
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T21:36:06.790

这是[@ctrahey 建议](https://stackoverflow.com/a/15931547/2261774)的变体，直接对输入数组进行操作：

```
foreach($array as $key => &$entry) {
    list($month, $value) = $entry;
    if (isset($ptr[$month])) {
        $ptr[$month][] = $value;
        unset($array[$key]);
    } else {
        $ptr[$month] = &$entry;
    }
}
unset($ptr); 
```

使用您的示例数据输出：

```
Array
(
    [0] => Array
        (
            [0] => Jan 2010
            [1] => 65.75
            [2] => 211.05
            [3] => 582.7
        )

    [3] => Array
        (
            [0] => Feb 2010
            [1] => 136.3
            [2] => 215.32
            [3] => 413.9
        )

    [6] => Array
        (
            [0] => Mar 2010
            [1] => 156.35
            [2] => 210.54
            [3] => 585.15
        )

    [9] => Array
        (
            [0] => Apr 2010
            [1] => 126.1
            [2] => 255.47
            [3] => 329.1
        )

    [12] => Array
        (
            [0] => May 2010
            [1] => 109
            [2] => 170
            [3] => 716.7
        )

) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T17:14:36.463

这很可怕，但它确实有效......

```
$resarray=Array(
    0 => Array(0 => 'Jan 2010',1 => 65.75),
    1=> Array(0 => 'Jan 2010',1 => 211.05),
    2 => Array(0 => 'Jan 2010',1 => 582.7),
    3 => Array(0 => 'Feb 2010',1 => 136.3),
    4 => Array(0 => 'Feb 2010',1 => 215.32),
    5 => Array(0 => 'Feb 2010',1 => 413.9),
    6 => Array(0 => 'Feb 2010',1 => 156.35),
    7 => Array(0 => 'Feb 2010',1 => 210.54),
    8 => Array(0 => 'Mar 2010',1 => 585.15),
    9 => Array(0 => 'Apr 2010',1 => 126.1),
    10 => Array(0 => 'Apr 2010',1 => 255.47),
    11 => Array(0 => 'Apr 2010',1 => 329.1),
    12 => Array(0 => 'May 2010',1 => 109),
    13 => Array(0 => 'May 2010',1 => 170),
    14 => Array(0 => 'May 2010',1 => 716.7)

    );
$CatArray=array();
$FinArray=array();
$count=count($resarray);
for($i=0;$i<$count;$i++){
    $index=array_search($resarray[$i][0],$CatArray);
    if(is_numeric($index) && $index>=0)
        $FinArray[$index][]=$resarray[$i][1];
    else{
        $CatArray[]=$resarray[$i][0];
        $FinArray[]=array($resarray[$i][0],$resarray[$i][1]);
    }
}
unset($CatArray);
unset($resarray);
$count=count($FinArray);
for($i=0;$i<$count;$i++){
    $resarray[$i]=implode(',',$FinArray[$i]);
} 
```

输出：

```
Array
(
    [0] => Jan 2010,65.75,211.05,582.7
    [1] => Feb 2010,136.3,215.32,413.9,156.35,210.54
    [2] => Mar 2010,585.15
    [3] => Apr 2010,126.1,255.47,329.1
    [4] => May 2010,109,170,716.7
) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T18:24:04.677

```
 actionMerge($inputArray);

            function actionMerge($inputArray){

                $month = array();
                $earn = array();
                $parentKey = 0;
                $callback = function ($value, $key) use (&$month, &$earn, &$parentKey) {
                    if(!is_array($value)){
                        if($key == 0){
                            if(!in_array($value, $month)){

                                array_push($month, $value);
                                $earn[$value] =  array();
                            }
                            $parentKey = $value;
                        }elseif($key == 1){
                                array_push($earn[$parentKey], $value);
                        }
                    }

                };

                array_walk_recursive($inputArray, $callback);

                echo 'You should use this array';
                var_dump($earn); // group money by month, I recommend you to use it

                $Array = array();
                foreach($month as $m){
                    $arr = array($m);
                    $arr  = array_merge($arr, $earn[$m]);
                    array_push($Array, $arr);
                }

                echo '...Intead of array result what you expect';
                var_dump($Array); // your expect result

            }

            ?> 
```

这是结果：

```
 //You should use this array
        array (size=5)
          'Jan 2010' => 
            array (size=3)
              0 => float 65.75
              1 => float 211.05
              2 => float 582.7
          'Feb 2010' => 
            array (size=3)
              0 => float 136.3
              1 => float 215.32
              2 => float 413.9
          'Mar 2010' => 
            array (size=3)
              0 => float 156.35
              1 => float 210.54
              2 => float 585.15
          'Apr 2010' => 
            array (size=3)
              0 => float 126.1
              1 => float 255.47
              2 => float 329.1
          'May 2010' => 
            array (size=3)
              0 => int 109
              1 => int 170
              2 => float 716.7
        //...Intead of array result what you expect
        array (size=5)
          0 => 
            array (size=4)
              0 => string 'Jan 2010' (length=8)
              1 => float 65.75
              2 => float 211.05
              3 => float 582.7
          1 => 
            array (size=4)
              0 => string 'Feb 2010' (length=8)
              1 => float 136.3
              2 => float 215.32
              3 => float 413.9
          2 => 
            array (size=4)
              0 => string 'Mar 2010' (length=8)
              1 => float 156.35
              2 => float 210.54
              3 => float 585.15
          3 => 
            array (size=4)
              0 => string 'Apr 2010' (length=8)
              1 => float 126.1
              2 => float 255.47
              3 => float 329.1
          4 => 
            array (size=4)
              0 => string 'May 2010' (length=8)
              1 => int 109
              2 => int 170
              3 => float 716.7 
```

# asp.net - 试图在 Global.asax 中获取会话值，但它是 NULL

> ID：15931378
> 
> 赞同：0
> 
> 时间：2013-04-10T16:27:08.767
> 
> 标签：asp.net, vb.net, session, global-asax

我有一个会话，其中包含`List(of String)`我在`Main.aspx`. 在我`Global.asax`的中，我执行以下代码以在触发`Session`a 后检索值。`Timer`

```
 Private Sub Application_AcquireRequestState(sender As Object, e As EventArgs)
        If System.Web.HttpContext.Current.Session IsNot Nothing Then
            If Session("Products") IsNot Nothing Then
                Response.Write(Session("Products").ToString())
            End If
        End If
    End Sub 
```

但是，`Session("Products")`返回 Null 并`Sub`退出。我想知道`End Sub`in是否`Main.aspx`会释放 the `Session`，因此每当`Timer`发生火灾时，the`Session`都是空的。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:35:45.767

在您的 Main.vb 代码后面，除了要继承的任何内容之外，请务必继承该 `System.Web.SessionState.IRequiresSessionState`接口。

像这样的东西应该工作：

```
Public Class Main 
    Inherits System.Web.UI.Page, System.Web.SessionState.IRequireSessionState
' Your application code
End Class 
```

这是一种奇怪的行为，因为 ASP.NET 网页应该已经处理了会话数据。通常，您继承`IRequireSessionState`通用处理程序 (.ashx)，因为默认情况下它们不支持会话数据。

# c# - 为什么不能在一种方法中调用两次 OpenConnection()？

> ID：15931381
> 
> 赞同：1
> 
> 时间：2013-04-10T16:27:17.413
> 
> 标签：c#, mysql, database-connection

为什么我不能在一种方法中调用 OpenConnection() 两次？当我调用它时，会出现此错误：

> 连接已经打开。

`SelectDisPatient()`我在和中调用它两次`Count()`。请参阅我的代码`for (int index = 0; index < Count(); index++)`

这种方法`SelectDisPatient`：

```
public void SelectDisPatient(FrmVIRGO frm)
{
   string query = "SELECT id_pasien FROM tb_patient_information ";
   if (this.OpenConnection() == true)
   { //Create Command
      MySqlCommand cmd = new MySqlCommand(query, connection);
      //Create a data reader and Execute the command
      MySqlDataReader dataReader = cmd.ExecuteReader(CommandBehavior.CloseConnection);
      if (dataReader.HasRows)
      {
         for (int index = 0; index < Count(); index++)
         dataReader.Read();
         frm.tbName.Text = dataReader[0].ToString(); 
      } 
         //close Data Reader
         dataReader.Close();

         //close Connection
         this.CloseConnection();

    }
 } 
```

这种`Count()`方法：

```
public int Count()
{
   string query = "SELECT Count(*) FROM tb_patient_information";
   int Count = -1;

   //Open Connection
   if (this.OpenConnection() == true)
   {
      //Create Mysql Command
      MySqlCommand cmd = new MySqlCommand(query, connection);

      //ExecuteScalar will return one value
      Count = int.Parse(cmd.ExecuteScalar()+"");

      //close Connection
      this.CloseConnection();

      return Count;
    }
    else
    {
       return Count;
    }
 } 
```

`(this.OpenConnection() == true)`但是当我在方法中删除时，`Count()`它说我需要关闭连接。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:35:14.257

尝试：

```
public void SelectDisPatient(FrmVIRGO frm)
{
   int count =  Count();
   string query = "SELECT id_pasien FROM tb_patient_information ";
   if (this.OpenConnection() == true)
   { //Create Command
      MySqlCommand cmd = new MySqlCommand(query, connection);
      //Create a data reader and Execute the command
      MySqlDataReader dataReader = cmd.ExecuteReader(CommandBehavior.CloseConnection);
      if (dataReader.HasRows)
      {
         for (int index = 0; index < count ; index++)
         dataReader.Read();
         frm.tbName.Text = dataReader[0].ToString(); 
      } 
      //close Data Reader
      dataReader.Close();

      //close Connection
      this.CloseConnection();

    }
 } 
```

# c++ - 来自 .txt 文件的 C++ 2d 数组

> ID：15931382
> 
> 赞同：0
> 
> 时间：2013-04-10T16:27:19.227
> 
> 标签：c++, arrays, file, file-io, multidimensional-array

我的代码打印出一个 .txt 文件的版本，该文件显示一个 20x20 的字符表和空格。我怎样才能让数组像在 .txt 中一样正确显示。我不能使用向量或全局变量。没有这些也可以做到。文本中的前两行是 20 和 20，用于获取数组的维度。

```
ifstream inputFile;
int boardSizeRow;
int boardSizeCol;
inputFile.open("fileboard1.txt");
inputFile >> boardSizeRow;
inputFile >> boardSizeCol;
inputFile.get();

char gameBoard[20][20];
for (int row = 0; row < boardSizeRow; row++)
{
    for (int col = 0; col < boardSizeCol; col++)
    {
        gameBoard[row][col] = inputFile.get();
    }
}

for (int row = 0; row < boardSizeRow; row++) //////////////TO TEST PRINT
{
    for (int col = 0; col < boardSizeCol; col++)
    {
        cout << gameBoard[row][col];
    }
    inputFile.get();
    cout << endl;
}
return 0;

20

20

WWWWWWWWWWWWWWWWWWWW
  W GO  W          W
W WW      w    S   W      
W   W   GW  w      W  
WPW  WW          G W    
 WK       W        W     
W W W  W    w   w  W  
W WK W             W    
W   SW  U    w  w  W
                   W
    w          G   W
  G         w    w W 
D   wwwww          W
             w  D  W
w w   W w   w      W
    ww  w     w w  W
  G        w       W
    ww  w S    w   W
   WWW      G      W
WWWWWWWWWWWWWWWWWWWW 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:48:27.090

这就是答案:) 好的几个编辑：输入：

```
   3
   3
   2 2 3
   2 2 3
   2 2 3

```

编码：

```
#include <fstream>
#include <iostream>

int main(){
using namespace std;
ifstream inputFile;
int boardSizeRow;
int boardSizeCol;
inputFile.open("fileboard1.txt");
inputFile >> boardSizeRow;
inputFile >> boardSizeCol;

char *gameBoard= new char[boardSizeRow*boardSizeCol];
for (int row = 0; row < boardSizeRow; row++)
{
    for (int col = 0; col < boardSizeCol; col++)
    {   
        inputFile >> *(gameBoard + boardSizeCol * row + col);
    }   
}

for (int row = 0; row < boardSizeRow; row++) //////////////TO TEST PRINT
{
    for (int col = 0; col < boardSizeCol; col++)
    {   
        cout << *(gameBoard + boardSizeCol * row + col) << " ";
    }   
    cout << endl;
}
delete []gameBoard
return 0; 
```

}

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T17:07:08.120

从[如何使用 new 在 C++ 中声明二维数组？](https://stackoverflow.com/questions/936687/how-do-i-declare-a-2d-array-in-c-using-new)

做就是了：

```
inputFile >> boardSizeRow;
inputFile >> boardSizeCol;

char **gameBoardRow = new char*[boardSizeCol];
for(int i = 0; i < sizeY; ++i) {
    ary[i] = new char[boardSizeRow];
}

for (int row = 0; row < boardSizeRow; row++)
{
    for (int col = 0; col < boardSizeCol; col++)
    {   
        inputFile >> gameBoard[row][col];
     }   
}

for (int row = 0; row < boardSizeRow; row++) //////////////TO TEST PRINT
{
    for (int col = 0; col < boardSizeCol; col++)
    {   
        cout << gameBoard[row][col] << " ";
    }   
    cout << endl; 
}

for(int i = 0; i < boardSizeCol; ++i) {
    delete [] gameBoard[boardSizeRow];
}
delete [] gameBoard; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T17:01:58.040

该文件包含行之间的换行符，您无需处理。因此，在阅读完第一行之后，将换行符的一个（或两个在 Windows 平台上）字符作为第二行中的第一个字符读取。

我建议你使用`std::vector`. `std::string`每行一个字符串。

就像是：

```
inputFile >> boardSizeRows;
inputFile >> boardSizeCols;

// Skip newline after the number of columns
inputFile.ignore(std::numeric_limits<std::streamsize>::max(), '\n');

// And the empty line after that
inputFile.ignore(std::numeric_limits<std::streamsize>::max(), '\n');

// Declare our game board
std::vector<std::string> gameBoard;

// Read the board
std::string line;
for (int row = 0; row < boardSizeRows && std::getline(inputFile, line); row++)
    gameBoard.push_back(line);

// And finally print the board
for (const std::string& l : gameBoard)
    std::cout << l << '\n'; 
```

读取文件时 for 循环中的条件是首先检查我们在文件中读取的内容不超过请求的内容，并且读取操作是否成功。

* * *

如果您的编译器无法处理[C++11 基于范围的 for 循环](http://en.wikipedia.org/wiki/C++11#Range-based_for-loop)（用于打印板），则必须使用迭代器以“老式”方式进行：

```
std::vector<std::string>::const_iterator li;
for (li = gameBoard.begin(); li != gameBoard.end(); li++)
    std::cout << *li << '\n'; 
```

# c# - 形式=形式=形式，语句是做什么的？

> ID：15931390
> 
> 赞同：0
> 
> 时间：2013-04-10T16:27:59.503
> 
> 标签：c#, winforms, .net-4.0

我以前从未遇到过这种类型的语句，任何人都可以告诉我它的功能。

```
Form = CardForm = MainForm; 
```

这是一个桌面应用程序（我一般是桌面应用程序的新手）

谢谢

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-10T18:42:53.553

到目前为止，所有答案都包含细微的错误。让我在这里直接记录。

形式的链式赋值表达式的语义

```
x = y = z 
```

是：

*   对第一个表达式 x、y 和 z 求值，并按顺序产生它们的副作用（如果有）。

*   其次，通过计算 z 产生的值被转换为与表达式 y 关联的类型。将此值称为 z1。请注意，这可能不是 z 的值；可能涉及转换。

*   第三，执行将 z1 分配给 y 的副作用。

*   第四，将 z1 转换为与表达式 x 关联的类型。将此值称为 z2。同样，z2 不必与 z1 或 z 相同。

*   第五，z2 分配给 x。

总结起来，这具有以下语义：

```
side effects of x
side effects of y
side effects of z
z1 = value of z converted to type of y
y = z1 
z2 = value of z1 converted to type of x
x = z2 
```

其他一些答案试图告诉您， 的语义`x = y = z;`只是那些`y = z; x = y;`完全**错误**的语义。在该程序中，y 和 z 的副作用发生*在*x 的副作用之前，并且在该程序中，*y 是从 读取的*。这些都不是真的`x = y = z;`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T16:30:18.120

在 C# 以及许多其他语言中，将值分配给变量的行为本身会返回一个值。这称为表达式的*逻辑值*（或左值）。

假设您要设置五个变量：

```
int a, b, c, d, e; 
```

到数字 5。你可以这样做：

```
a = b = c = d = e = 5; 
```

表达式`e = 5`的值为`5`，将设置为`d`。 `d = 5`的值为`5`，将设置为`c`。 `c = 5`的值为`5`，将设置为`b`。 `b = 5`的值为`5`，将设置为`a`。 `a`然后将设置为`5`.

由于我们不知道 , 和 的类型`Card`，`CardForm`因此`MainForm`我们无法准确告诉您代码将做什么，因为类型可以定义隐式转换，并且被覆盖的赋值运算符可以返回任何感觉的值（当然是那种类型的） ）。

表达方式：

```
CardForm = MainForm 
```

具有最终分配给 的任何内容的*逻辑值*`CardForm`。最有可能`CardForm`将 设置为 的值`MainForm`，并且该表达式本身将返回 的*新*值`CardForm`，然后将其设置为`Form`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T16:29:54.633

假设`Form`,`CardForm`和`MainForm`是变量...

它是 2 个赋值运算符，赋值运算符的独特之处在于它们是从右到左求值的。

首先它设置`CardForm`为`MainForm`，然后设置`Form`为`CardForm = MainForm`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T16:30:41.453

Given `Form`,`CardForm`和`MainForm`实际上是*variables*，但由于命名约定不太可能推荐它们使用 camelCase 格式：

该`=`运算符可以传递使用，因此该语句等效于（相当粗略，有关详细信息，请参见[https://stackoverflow.com/a/15931435/17713](https://stackoverflow.com/a/15931435/17713)和注释！）：

```
CardForm = MainForm;
Form = MainForm; 
```

注意`=`是*右操作*（赋值顺序）。

`=`在 C# 中不能重载。因此，必须是一项任务，并且此行没有特定于桌面应用程序的方面。

另请参阅：http: [//msdn.microsoft.com/en-us/library/sbkb459w.aspx](http://msdn.microsoft.com/en-us/library/sbkb459w.aspx)

# php - 如何将任意数量的值绑定到 mysqli 中的准备好的语句？

> ID：15931394
> 
> 赞同：3
> 
> 时间：2013-04-10T16:28:13.330
> 
> 标签：php, mysqli

我真的很希望有人花一点时间来查看我的代码。我正在解析一些新闻内容，我可以将初始解析插入到包含新闻 URL 和标题的数据库中。我想进一步扩展它，传递每个文章链接并解析文章的内容并将其包含在我的数据库中。初始解析完美地像这样工作：

```
<?php
include_once ('connect_to_mysql.php');
include_once ('simple_html_dom.php');
$html = file_get_html('http://basket-planet.com/ru/');
$main = $html->find('div[class=mainBlock]', 0);
  $items = array();
  foreach ($main->find('a') as $m){
    $items[] = '("'.mysql_real_escape_string($m->plaintext).'",
                "'.mysql_real_escape_string($m->href).'")';
  }
$reverse = array_reverse($items);
mysql_query ("INSERT IGNORE INTO basket_news (article, link) VALUES 
             ".(implode(',', $reverse))."");
?> 
```

如您所见，我使用的是[PHP Simple HTML DOM Parser。](http://simplehtmldom.sourceforge.net/) 为了扩展，我正在尝试使用 mysqli 语句，我可以在其中绑定参数，以便将所有 html 标记插入到我的数据库中。我以前用 XML 解析做过这个。问题是我不知道如何绑定数组，看看我的代码是否正确，如果它可以这样工作......这是整个代码：

```
<?php
$mysqli = new mysqli("localhost", "root", "", "test");
$mysqli->query("SET NAMES 'utf8'");
include_once ('simple_html_dom.php');
$html = file_get_html('http://basket-planet.com/ru/');
//find main news
$main = $html->find('div[class=mainBlock]', 0);
$items = array();
  foreach ($main->find('a') as $m){
    $h = file_get_html('http://www.basket-planet.com'.$m->href.'');
    $article = $h->find('div[class=newsItem]');
    //convert to string to be able to modify content
    $a = str_get_html(implode("\n", (array)$article));
      if(isset($a->find('img'))){
        foreach ($a->find('img') as $img){
          $img->outertext = '';}} //get rid of images
      if(isset($a->find('a'))){
        foreach ($a->find('a') as $link){
          $link->href = 'javascript:;';
          $link->target = '';}} //get rid of any javascript
      if(isset($a->find('iframe'))){
        foreach ($a->find ('iframe') as $frame){
          $frame->outertext = '';}} //get rid of iframes
     @$a->find('object', 0)->outertext = '';
     @$a->find('object', 1)->outertext = '';
     //modify some more to retrieve only text content
     //put entire content into a div (will if statements work here???)
     $text_content = '<div>'.$a.'<br>'.
       ($a->find('object', 0)->data > 0 ? '<a target="_blank" href="'.$a->find('object', 0)->data.'">Play Video</a>&nbsp;&nbsp;')
       ($a->find('object', 1)->data > 0 ? '<a target="_blank" href="'.$a->find('object', 1)->data.'">Play Video</a>&nbsp;&nbsp;')
       ($a->find('iframe[src*=youtube]', 0)->src > 0 ? '<a target="_blank" href="'.$a->find('iframe', 0)->src.'">Play Video</a>&nbsp;&nbsp;')
       //couple more checks to see if video links are present
    .'</div>';
$items[] = '("'.$m->plaintext.'","'.$m->href.'","'.$text_content.'")';
}
//reverse the array so the latest items have the last id
$reverse = array_reverse($items);
$stmt = $mysqli->prepare ("INSERT IGNORE INTO test_news (article, link, text_cont) VALUES (?,?,?)");
$stmt->bind_param ???; //(implode(',', $reverse));
$stmt->execute();
$stmt->close();
?> 
```

因此，逻辑是针对找到的文章的每个 href，我将其传递给解析内容，并尝试将其添加到数组中。我可能有很多错误，但我还不能测试它，因为我不知道如何绑定它以查看它是否有效。而且我也不确定我是否可以在 $text_content div 中执行 if 语句......意思是如果存在“播放视频”则显示它们。所以，如果有人能花时间和我一起工作，我将非常感激。

更新：将 if 语句更改为 $text_content div 中的比较运算符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T18:33:57.153

这正是mysqli真正尴尬的场景。要绑定多个参数，您必须将它们作为可变长度参数列表传递给 mysql->bind_param()，但棘手的部分是您必须*通过引用*绑定它们。PHP 中的引用可能非常令人困惑。

这是一个粗略的例子（虽然我没有测试过这个确切的代码）：

```
$stmt = $mysqli->prepare("INSERT IGNORE INTO test_news 
    (article, link, text_cont) VALUES (?,?,?)");
foreach ($reverse as &$value) {
  $params[] = &$value;
}
array_unshift(str_repeat('s', count($params)));
call_user_func_array(array($stmt, 'bind_param'), $params); 
```

当我想编写一个通用函数来将参数绑定到 SQL 时，我发现使用 PDO 要容易得多。不需要绑定，只需将一组值传递给 PDOStatement::execute() 方法。

```
$stmt = $pdo->prepare("INSERT IGNORE INTO test_news 
    (article, link, text_cont) VALUES (?,?,?)");
$stmt->execute($reverse); 
```

* * *

更新：如果您需要 $items 包含多行数据，我会这样做：

首先，在构建 $items 时，将其设为数组数组，而不是将值连接在一起：

```
foreach ($main->find('a') as $m){
    $items[] = array($m->plaintext, $m->href, $text_content);
} 
```

然后准备一个插入一行的 INSERT 语句，并循环 $items 为每个元组执行一次准备好的语句：

```
$stmt = $pdo->prepare("INSERT INTO test_news 
    (article, link, text_cont) VALUES (?,?,?)");
foreach ($items as $tuple) {
    $stmt->execute($tuple);
} 
```

我根本不知道你为什么使用 array_reverse()，我也不知道你为什么使用 INSERT IGNORE，所以我把它们省略了。

# ios - 编辑时对齐自定义 UITableViewCell 的标签

> ID：15931398
> 
> 赞同：0
> 
> 时间：2013-04-10T16:28:20.663
> 
> 标签：ios, uitableview, alignment, label

我有一个带有几个原型单元格的 UITableView，一些可编辑的单元格是基本单元格和一些习惯。
(XCode 4.6.1 / iOS 6.1)

我的问题是如何自动对齐自定义单元格的标签（在情节提要中），就像默认情况下对基本单元格的*textLabel*所做的那样？

这是两个屏幕截图，可以理解我的意思： ![编辑模式之前](https://i.stack.imgur.com/OMu5o.png) ![在编辑模式](https://i.stack.imgur.com/vsr7o.png)

顺便说一句，我显然以前用谷歌搜索过，但没有找到任何东西，但也许我错过了一些东西，因为我是 iOS 上的新手 :)

**编辑：**您可能已经理解了屏幕，但如果：“添加”单元格是默认的基本单元格，“删除”单元格是带有我自己的 UILabel 的自定义单元格（对齐错误）。

# c# - 异步客户端服务设计模式

> ID：15931401
> 
> 赞同：0
> 
> 时间：2013-04-10T16:28:27.347
> 
> 标签：c#, service, .net-4.0, tcpclient

我正在尝试设计一个允许使用 TcpClient 类连接和发送/接收命令的邮件客户端服务。我还想在每个函数的回调时自动调用调用线程，这样调用者就不需要了。

我发现我需要为每个函数编写至少三到四倍的代码才能实现这一点，而不是同步编写它。最大的问题是我必须为每个回调编写单独的 try/catch。

我将发布我的 Connect 功能，希望有人可以提出更好的方法：

```
public virtual void Connect(Action<Exception> callback, string hostname, int port, bool ssl, RemoteCertificateValidationCallback validateCertificate)
{
    if (State != ConnectionState.Disconnected)
        throw new InvalidOperationException(AlreadyConnectedString);

    Host = hostname;
    Port = port;
    Ssl = ssl;

    var context = SynchronizationContext.Current;

    // Callback on the caller's thread
    Action<Exception> onCallback = (Exception ex) =>
        {
            context.Post(_ =>
                {
                    callback(ex);
                }, null);
        };

    // Called on any raised exceptions
    Action<Exception> onFail = (Exception ex) =>
        {
            State = ConnectionState.Disconnected;
            Cleanup();
            onCallback(ex);
        };

    // Check for a valid response
    Action<string, Exception> onConnectResponse = (string response, Exception ex) =>
        {
            if (ex != null)
                onFail(ex);

            try
            {
                OnConnected(response);
                onCallback(ex);
            }
            catch (Exception responseException)
            {
                onFail(responseException);
            }
        };

    // Callback after SSL authentication
    AsyncCallback onAuthenticated = (IAsyncResult result) =>
        {
            try
            {
                var sslStream = (SslStream)result.AsyncState;
                sslStream.EndAuthenticateAsClient(result);

                State = ConnectionState.Authorization;

                GetResponse(onConnectResponse);
            }
            catch (Exception authenticateException)
            {
                onFail(authenticateException);
            }
        };

    // Callback after TcpClient connect
    AsyncCallback onConnect = (IAsyncResult result) =>
        {
            try
            {
                _Connection.EndConnect(result);

                _Stream = _Connection.GetStream();

                if (ssl)
                {
                    SslStream sslStream;

                    if (validateCertificate != null)
                        sslStream = new SslStream(_Stream, false, validateCertificate);
                    else
                        sslStream = new SslStream(_Stream, false);

                    _Stream = sslStream;

                    sslStream.BeginAuthenticateAsClient(hostname, onAuthenticated, sslStream);
                }
                else
                {
                    State = ConnectionState.Authorization;

                    GetResponse(onConnectResponse);
                }
            }
            catch (Exception connectException)
            {
                onFail(connectException);
            }
        };

    try
    {
        _Connection = new TcpClient();
        _Connection.BeginConnect(hostname, port, onConnect, null);
    }
    catch (Exception ex)
    {
        onFail(ex);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T21:15:11.463

这是迄今为止我成功使用的代码的一般格式。

它不会阻塞调用线程 (UI)，它总是在调用线程上调用其回调，但它在后台线程中完成每个任务的大部分工作。

如果线程需要独占访问共享资源（例如开放网络/SSL 流），那么您可以使用 locker 来编组对该资源的使用，以便一次只有一个线程使用它。

```
public void Connect(Action<Exception> callback, string hostname, int port, bool ssl, RemoteCertificateValidationCallback validateCertificate)
{
    if (State != ConnectionState.Disconnected)
        throw new InvalidOperationException(AlreadyConnectedString);

    Host = hostname;
    Port = port;
    Ssl = ssl;
    State = ConnectionState.Connecting;

    var callingThread = TaskScheduler.FromCurrentSynchronizationContext();

    Action connectAction = () =>
    {
        // Connect asynchronously in order to specify a timeout
        TcpClient connection = new TcpClient();
        connection.SendTimeout = SendTimeout;
        connection.ReceiveTimeout = ReadTimeout;

        IAsyncResult ar = connection.BeginConnect(hostname, port, null, null);
        WaitHandle waitHandle = ar.AsyncWaitHandle;

        try
        {
            if (!ar.AsyncWaitHandle.WaitOne(TimeSpan.FromMilliseconds(ConnectTimeout), false))
                throw new TimeoutException();

            connection.EndConnect(ar);
        }
        finally
        {
            waitHandle.Close();
        }

        Stream stream = connection.GetStream();

        if (ssl)
        {
            SslStream sslStream;

            if (validateCertificate != null)
                sslStream = new SslStream(stream, false, validateCertificate);
            else
                sslStream = new SslStream(stream, false);

            sslStream.AuthenticateAsClient(hostname);

            stream = sslStream;
        }

        lock (_locker) // Perform thread unsafe operations here
        {
            _connection = connection;
            _stream = stream;
        }

        OnConnected(GetResponse());
    };

    Action<Task> completeAction = (Task task) =>
    {
        Exception ex = (task.Exception != null) ? task.Exception.InnerException : task.Exception;

        if (task.Exception != null)
        {
            Cleanup();
        }
        else
        {
            State = ConnectionState.Authorization;
        }

        if (callback != null)
            callback(ex);
    };

    Task.Factory.StartNew(connectAction, CancellationToken.None, TaskCreationOptions.None, TaskScheduler.Default)
                .ContinueWith(completeAction, callingThread);
} 
```

# r - 修改 glm 函数以在 R 中采用用户指定的链接函数

> ID：15931403
> 
> 赞同：10
> 
> 时间：2013-04-10T16:28:33.070
> 
> 标签：r, glm

在R 中，族`glm`的默认链接函数`Gamma`是和。现在对于我的特定问题，我需要使用带有响应的 gamma 回归和修改后的链接函数，其形式为. 因此，我考虑修改 R 中的一些-related 函数。有几个函数可能是相关的，我正在为以前有这样做经验的任何人寻求帮助。`inverse``identity``log``Y``log(E(Y)-1))``glm`

例如，函数`Gamma`定义为

```
function (link = "inverse") 
{
  linktemp <- substitute(link)
  if (!is.character(linktemp)) 
    linktemp <- deparse(linktemp)
  okLinks <- c("inverse", "log", "identity")
  if (linktemp %in% okLinks) 
    stats <- make.link(linktemp)
  else if (is.character(link)) 
    stats <- make.link(link)
  else {
    if (inherits(link, "link-glm")) {
      stats <- link
      if (!is.null(stats$name)) 
        linktemp <- stats$name
    }
    else {
      stop(gettextf("link \"%s\" not available for gamma family; available links are %s", 
                    linktemp, paste(sQuote(okLinks), collapse = ", ")), 
           domain = NA)
    }
  }
  variance <- function(mu) mu^2
  validmu <- function(mu) all(mu > 0)
  dev.resids <- function(y, mu, wt) -2 * wt * (log(ifelse(y == 
                                                            0, 1, y/mu)) - (y - mu)/mu)
  aic <- function(y, n, mu, wt, dev) {
    n <- sum(wt)
    disp <- dev/n
    -2 * sum(dgamma(y, 1/disp, scale = mu * disp, log = TRUE) * 
               wt) + 2
  }
  initialize <- expression({
    if (any(y <= 0)) stop("non-positive values not allowed for the 'gamma' family")
    n <- rep.int(1, nobs)
    mustart <- y
  })
  simfun <- function(object, nsim) {
    wts <- object$prior.weights
    if (any(wts != 1)) 
      message("using weights as shape parameters")
    ftd <- fitted(object)
    shape <- MASS::gamma.shape(object)$alpha * wts
    rgamma(nsim * length(ftd), shape = shape, rate = shape/ftd)
  }
  structure(list(family = "Gamma", link = linktemp, linkfun = stats$linkfun, 
                 linkinv = stats$linkinv, variance = variance, dev.resids = dev.resids, 
                 aic = aic, mu.eta = stats$mu.eta, initialize = initialize, 
                 validmu = validmu, valideta = stats$valideta, simulate = simfun), 
            class = "family")
} 
```

另外，为了使用命令`glm(y ~ log(mu), family = Gamma(link = MyLink))`，我还需要修改`glm.fit`功能吗？谢谢！

* * *

**更新和新问题**

根据@Ben Bolker 的评论，我们需要编写一个名为`vlog`（实名`"log(exp(y)-1)"`）的新链接函数。我发现该`make.link`功能可能是造成这种修改的原因。它被定义为

```
function (link) 
{
  switch(link, logit = {
    linkfun <- function(mu) .Call(C_logit_link, mu)
    linkinv <- function(eta) .Call(C_logit_linkinv, eta)
    mu.eta <- function(eta) .Call(C_logit_mu_eta, eta)
    valideta <- function(eta) TRUE
  }, 

  ...

  }, log = {
    linkfun <- function(mu) log(mu)
    linkinv <- function(eta) pmax(exp(eta), .Machine$double.eps)
    mu.eta <- function(eta) pmax(exp(eta), .Machine$double.eps)
    valideta <- function(eta) TRUE
  }, 

  ...

  structure(list(linkfun = linkfun, linkinv = linkinv, mu.eta = mu.eta, 
                 valideta = valideta, name = link), class = "link-glm")
} 
```

**我的问题是**：如果我们想把这个链接函数**永久**`vlog`添加到 中`glm`，以便在每个 R 会话中，我们可以`glm(y~x,family=Gamma(link="log(exp(y)-1)"))`直接使用，我们是否应该使用`fix(make.link)`然后将定义添加`vlog`到它的主体？还是`fix()`只能在当前的 R 会话中这样做？再次感谢！

**还有一件事：**我意识到可能需要修改另一个功能。，`Gamma`定义为

```
function (link = "inverse") 
{
  linktemp <- substitute(link)
  if (!is.character(linktemp)) 
    linktemp <- deparse(linktemp)
  okLinks <- c("inverse", "log", "identity")
  if (linktemp %in% okLinks) 
    stats <- make.link(linktemp)
  else if (is.character(link)) 
    stats <- make.link(link)
  else {
    if (inherits(link, "link-glm")) {
      stats <- link
      if (!is.null(stats$name)) 
        linktemp <- stats$name
    }
    else {
      stop(gettextf("link \"%s\" not available for gamma family; available links are %s", 
                    linktemp, paste(sQuote(okLinks), collapse = ", ")), 
           domain = NA)
    }
  }
  variance <- function(mu) mu^2
  validmu <- function(mu) all(mu > 0)
  dev.resids <- function(y, mu, wt) -2 * wt * (log(ifelse(y == 
                                                            0, 1, y/mu)) - (y - mu)/mu)
  aic <- function(y, n, mu, wt, dev) {
    n <- sum(wt)
    disp <- dev/n
    -2 * sum(dgamma(y, 1/disp, scale = mu * disp, log = TRUE) * 
               wt) + 2
  }
  initialize <- expression({
    if (any(y <= 0)) stop("non-positive values not allowed for the 'gamma' family")
    n <- rep.int(1, nobs)
    mustart <- y
  })
  simfun <- function(object, nsim) {
    wts <- object$prior.weights
    if (any(wts != 1)) 
      message("using weights as shape parameters")
    ftd <- fitted(object)
    shape <- MASS::gamma.shape(object)$alpha * wts
    rgamma(nsim * length(ftd), shape = shape, rate = shape/ftd)
  }
  structure(list(family = "Gamma", link = linktemp, linkfun = stats$linkfun, 
                 linkinv = stats$linkinv, variance = variance, dev.resids = dev.resids, 
                 aic = aic, mu.eta = stats$mu.eta, initialize = initialize, 
                 validmu = validmu, valideta = stats$valideta, simulate = simfun), 
            class = "family")
} 
```

我认为我们还需要修改

```
okLinks <- c("inverse", "log", "identity") 
```

到

```
okLinks <- c("inverse", "log", "identity", "log(exp(y)-1)") 
```

?

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T20:16:18.100

我基本上遵循示例的形式，`?family`其中显示了用户指定的表单链接`qlogis(mu^(1/days))`。

我们想要一个形式的链接`eta = log(exp(y)-1)`（所以反向链接是`y=log(exp(eta)+1)`, 和`mu.eta = dy/d(eta) = 1/(1+exp(-eta))`

```
vlog <- function() {
    ## link
    linkfun <- function(y) log(exp(y)-1)
    ## inverse link
    linkinv <- function(eta)  log(exp(eta)+1)
    ## derivative of invlink wrt eta
    mu.eta <- function(eta) { 1/(exp(-eta) + 1) }
    valideta <- function(eta) TRUE
    link <- "log(exp(y)-1)"
    structure(list(linkfun = linkfun, linkinv = linkinv,
                   mu.eta = mu.eta, valideta = valideta, 
                   name = link),
              class = "link-glm")
} 
```

基本检查：

```
vv <- vlog()
vv$linkfun(vv$linkinv(27))  ## check invertibility
library("numDeriv")
all.equal(grad(vv$linkinv,2),vv$mu.eta(2))  ## check derivative 
```

例子：

```
set.seed(101)
n <- 1000                       
x <- runif(n)
sh <- 2                        
y <- rgamma(n,scale=vv$linkinv(2+3*x)/sh,shape=sh)
glm(y~x,family=Gamma(link=vv))                       
## 
## Call:  glm(formula = y ~ x, family = Gamma(link = vv))
## 
## Coefficients:
## (Intercept)            x  
##       1.956        3.083  
## 
## Degrees of Freedom: 999 Total (i.e. Null);  998 Residual
## Null Deviance:       642.2 
## Residual Deviance: 581.8     AIC: 4268 
## 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-07-12T00:54:35.787

试试`gnlm::gnlr()`。使用Ben Bolker 的示例中的`x`, :`y``sh`

```
library(gnlm)
# custom link / inverse 
custom_inv <- function(eta)  log(exp(eta)+1)
library(gnlm)
gnlr(y=y,
     distribution = "gamma",
     mu = ~ custom_inv(beta0 + beta1*x),
     pmu = list(beta0=0, beta1=0),
     pshape=sh
)
# Location parameters:
#        estimate      se
# beta0     1.956  0.1334
# beta1     3.083  0.2919
# 
# Shape parameters:
#       estimate       se
# p[1]     0.625  0.04133 
```

# c++ - 剪裁线到三角形c ++

> ID：15931404
> 
> 赞同：1
> 
> 时间：2013-04-10T16:28:34.363
> 
> 标签：c++, graphics

在裁剪算法中，有许多技术，例如用于 2D 线裁剪的 Cohen-Sutherland、Cyrus-Beck 算法，还有许多其他用于圆形和多边形的技术。但我正在寻找一种将线条剪辑到 C++ 中的三角形窗口的方法，如下图所示： ![在此处输入图像描述](https://i.stack.imgur.com/6QPIa.png)

所以我有三种情况，第一种是线在必须绘制的三角形内部，第二种情况在三角形外部，不能绘制，第三种情况线在三角形内部有一个端点，第二种在外部需要绘制被剪裁到三角形边框，那么就处理性能而言，最好的方法是什么？！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:26:01.900

您在这里需要的基本原则是计算三角形每一边的交点，并计算出交点是在边缘内部还是在角落之外（相交算法应该给你）。

基本上，线段 AB 与三角形边 CD 的交点将为您提供相交时间，其中 A 和 C 代表时间 = 0，B 和 D 代表时间 1。两条线段的 0 和 1 之间的任何值都意味着它们相交，并且您需要修改您正在测试的线段，以便将三角形外部的点放置在交点上。超出该范围的任何值都意味着您可以忽略三角形的那一侧。（要么线段完全在三角形之外，要么你将它与其他两侧夹住。）

您只需依次为每一侧执行此操作。

# java - 服务器处理许多客户端java

> ID：15931405
> 
> 赞同：0
> 
> 时间：2013-04-10T16:28:35.787
> 
> 标签：java, multiserver

伙计们！我编写了简单的服务器客户端 (udp) 应用程序。现在我正在尝试制作可以接受许多客户端的服务器。据我了解，我需要创建接受和处理客户端的函数，但我对应用程序结构感到困惑。你能检查我的应用程序是否有正确的骨架吗？也许你可以给我一些提示或例子。所有建议表示赞赏！:)

```
class MultiServer {

    private DatagramSocket serversocket;

    public MultiServer() {
        try {
            this.serversocket = new DatagramSocket(6789);
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }

    public void start() throws IOException {
        while(true) {
            DatagramSocket serversock = serversocket.accept();
            new Thread(new ClientHandler(serversock)).start();
        }
    }

    public static void main(String[] args) {
        Server1 server = new Server1();
        try {
            server.start();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

    }
}

class ClientHandler implements Runnable {

        private final DatagramSocket clientsocket;

        ClientHandler(DatagramSocket sock) {
            this.clientsocket = sock;
        }

        @Override
        public void run() {
            //receive packet, send msg, get ip, get portnumber ?
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:47:00.223

所以您希望您的服务器能够同时处理多个请求？很好，这就是大多数网络服务器的工作方式。您必须了解多线程和并发的基本概念。

一个简单的服务器一次只能处理一件事。如果在服务器处理其他事情时收到另一个请求会发生什么？没什么，所以应用程序效率不高，根本无法扩展。

如果您尚未在应用程序中使用多线程并且对并发了解不多，那么现在是尝试的好时机，阅读[Oracle 并发课程](http://docs.oracle.com/javase/tutorial/essential/concurrency/)或在线查找教程，这里有很多。

现在，一旦（或如果）你知道线程是如何工作的，请确保你尽可能地分解你的函数，看看哪些函数可以同时发生。我能想到的 Web 服务器示例如下：

*   在端口上侦听请求的单独线程。收到请求后，将其放入“请求池”并排队等待处理
*   处理请求的单独线程（或多个线程/线程池）

您的结构看起来像是在同一个 Runnable 中同时接收和处理。无论如何，这只是一个想法，你必须看看什么更适用于你的应用程序。另外，看看较新的 Java 版本提供的并发工具，Java 6 和 7 提供了很多你可以使用的非常有效的工具（但在我看来也很难理解和使用）。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:44:31.793

您正在寻找一个线程池服务器。你开始的方式很好。现在您只需实现一个 Java 执行服务来处理请求。线程池有一个固定的线程。它确实接受您的请求并将其放入队列中，如果请求完成，它将接受下一个请求。所以你通常不会丢失任何请求。

这是我做的一个小例子：

```
public class PoolServer implements Runnable {
    private static final int DEFAULT_PORT = 8080;
    private static final String CONFIG = "config.xml";
    protected ServerSocket serverSocket = null;
    protected boolean isStopped = false;
    protected Thread runningThread = null;
    protected ExecutorService threadPool = Executors.newFixedThreadPool(100);
    protected int serverPort;

    public PoolServer() {
        // getting the port from the XML
        this.serverPort = getPortFromXML();
    }

    public void run() {
        synchronized (this) {
            this.runningThread = Thread.currentThread();
        }
        openServerSocket();
        // accepting loop
        while (!isStopped()) {
            Socket clientSocket = null;
            try {
                // accept the client
                clientSocket = this.serverSocket.accept();
                clientSocket.setSoTimeout(2000);

            } catch (IOException e) {
                if (isStopped()) {
                    return;
                }
                throw new RuntimeException("Error accepting client connection",
                        e);
            }
            this.threadPool.execute(new ThreadHandler(clientSocket));
        }
        // loop end
        // server stopped shut down the ThreadPool
        this.threadPool.shutdown();
    }

    private synchronized boolean isStopped() {
        return this.isStopped;
    }

    public synchronized void stop() {
        this.isStopped = true;
        try {
            this.serverSocket.close();
        } catch (IOException e) {
            throw new RuntimeException("Error closing server", e);
        }
    }

    private void openServerSocket() {
        try {
            this.serverSocket = new ServerSocket(this.serverPort);
        } catch (IOException e) {
            throw new RuntimeException("Cannot open port " + this.serverPort, e);
        }
    } 
```

此时`this.threadPool.execute(new ThreadHandler(clientSocket));`，如果线程空闲，我会执行请求。否则它进入线程池的队列。

您甚至可以将其从 Fixed 更改为其他一些 Threadpool！只需看看 Executors 并采取你需要的东西。[执行者](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executors.html)
希望这有帮助！

# jenkins - 通过 REST API 的覆盖结果

> ID：15931413
> 
> 赞同：7
> 
> 时间：2013-04-10T16:29:04.117
> 
> 标签：jenkins

我正在尝试使用 REST API 和 Cobertura 插件从 Jenkins 获取覆盖结果。

看起来我可以获得有关覆盖结果的顶级信息，因为 Cobertura 插件将底线结果放入作业的 healthReport 中。

但是，我想要有关代码覆盖率的更多详细信息。

所以我尝试了：

```
<jenkins url>/job/<job>/<buildNo>/cobertura/api/json 
```

我得到的只是空的结果。我由此假设 Cobertura 插件只是没有实现返回此信息的 API。

除了修改 Cobertura 插件之外，还有其他方法可以通过编程方式获取此信息吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-18T08:21:04.627

如果您将“?depth=2”附加到您的查询中，您将获得额外的百分比信息。较高的深度值显示单个文件的覆盖范围。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-18T18:57:43.643

原来有一个[詹金斯插件缺陷](https://issues.jenkins-ci.org/browse/JENKINS-13877?page=com.atlassian.jira.plugin.system.issuetabpanels%3aall-tabpanel)在此打开。但上面的答案是正确的——你可以通过添加“深度”（覆盖率）来获取大部分信息。

然而，不幸的是，这仍然没有给出你通过 html 获得的所有信息，即每个模块中扫描的行数，它只是给你 pct. 这总比没有好，但仍然不完整。我已经注释了缺陷以反映这一点......

# html - 悬停时如何使特定链接改变颜色？

> ID：15931417
> 
> 赞同：0
> 
> 时间：2013-04-10T16:29:10.240
> 
> 标签：html, hyperlink, dreamweaver

有人告诉我 a:hover {}，但问题是它为页面中的所有链接提供了这些设置，而我只想要具有特定 CSS 样式的链接来执行此操作。有没有办法将 a:hover 设置放在另一个类中？任何事情都可以有所帮助。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:31:14.670

```
a.class:hover {} 
```

差不多就是这个。:)

[http://jsfiddle.net/9SfaG/](http://jsfiddle.net/9SfaG/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:34:05.267

你可以试试

```
a.myclass:hover {} 
```

并像这样使用它

```
<a href="my/url.html" class="myclass">Link</a> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T16:36:26.563

```
<html>
<head>
    <style>
        a.class1:hover {
            color: red;
        }
    </style>
</head>
<body>
    <a href="#">test1</a>
    <a href="#" class="class1">test2</a>
</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T16:32:13.353

HTML：

```
<a href=/url/ class="speciallink">link</a> 
```

在 CSS 中：

```
a.speciallink {
    option: value;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T16:34:18.687

**伪类和 CSS 类**

伪类可以与 CSS 类结合：

```
a.red:hover {color:#FF0000;}

<a class="red" href="css_syntax.asp">CSS Syntax</a> 
```

如果您将鼠标悬停在示例中的链接上，它将显示为红色。

来自[http://www.w3schools.com/css/css_pseudo_classes.asp](http://www.w3schools.com/css/css_pseudo_classes.asp)

# c# - 验证所需的两个字段之一

> ID：15931422
> 
> 赞同：4
> 
> 时间：2013-04-10T16:29:21.417
> 
> 标签：c#, asp.net-mvc, model-view-controller

我有 2 个字段：

> 名
> 
> 姓

并且只需要其中之一。但如果两者都被省略，我希望这两个字段都被突出显示。如果其中一个被填写，那么模型就可以了，表格应该提交。

如何才能做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T18:03:02.370

所有复杂的验证都从继承自**IValidatableObject**的视图模型开始。然后，您覆盖**Validate**并输入您自己的验证规则。

```
IEnumerable<ValidationResult> IValidatableObject.Validate(ValidationContext validationContext)
{
    if (String.IsNullOrWhiteSpace(FirstName) && String.IsNullOrWhiteSpace(LastName))
    {
        yield return new ValidationResult("A name must be entered.", new string[] { "FirstName", "LastName" });
    }
} 
```

请注意，这仅确保此规则的服务器端验证。如果您想要它在客户端，您需要编写自己的 JavaScript / jQuery 代码来处理验证。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T16:46:03.230

你可以使用[这个库](http://blogs.msdn.com/b/simonince/archive/2010/06/04/conditional-validation-in-mvc.aspx)，它会帮助你做这样的事情

```
[RequiredIf("PropertyValidationDependsOn", true)]
   public string PropertyToValidate { get; set; } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T18:48:13.820

如果您愿意在客户端执行此操作，这可能会给您一个开始

HTML

```
<input type="text" class="name" id="firstName" />
<input type="text" class="name" id="lastName" />
<input type="button" id="btnSubmit" value="submit" /> 
```

按钮点击事件

```
$("#btnSubmit").click(function () {
    var isValid = false;
    $("input[class='name']").each(function (key, keyValue) {
        //alert(keyValue.value);
        if (keyValue.value.length > 0) {
            isValid = true;
            $(this).css("background", "White");
        }
        else {
            $(this).css("background", "RED");
        }
    })
    if (!isValid) {
        // do something 
    }
}); 
```

如果未通过验证，防止表单提交

```
$('input[type=submit]').bind('click', function(e) {
   var isValid = false;
        $("input[class='name']").each(function (key, keyValue) {
            //alert(keyValue.value);
            if (keyValue.value.length > 0) {
                isValid = true;
                $(this).css("background", "White");
            }
            else {
                $(this).css("background", "RED");
            }
        })
        if (!isValid) {
           e.preventDefault() // prevents the form from being submitted
        }    
}); 
```

[在http://jsfiddle.net/habo/UpmCv/](http://jsfiddle.net/habo/UpmCv/)测试它

# c# - ListView selectionChanged 在键盘导航上触发

> ID：15931424
> 
> 赞同：0
> 
> 时间：2013-04-10T16:29:27.400
> 
> 标签：c#, windows-8, windows-runtime, windows-store-apps

我有一个 ListView 显示一些项目，但是当我选择它并使用键盘导航（向下箭头）时，它会触发 selection-changed 事件。

我可以阻止这种情况，因此它只会在“返回/输入”键上触发 selectionChanged 吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:39:29.483

您应该考虑使用[ItemClick](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.listviewbase.itemclick%28v=win.10%29.aspx)处理程序而不是[SelectionChanged](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.primitives.selector.selectionchanged.aspx)处理程序。ItemClick 处理程序由鼠标左键或回车键调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:39:30.597

您可以将`ListView`'`IsTabStop`属性设置为 false，因此它不会按制表符顺序出现。

# java - 在 HashSet 中使用联合和交集方法

> ID：15931427
> 
> 赞同：1
> 
> 时间：2013-04-10T16:29:31.987
> 
> 标签：java, set, union, intersection

我在使用我的自定义集 MySet 时遇到问题，使用联合和相交的基本功能。该程序编译没有错误，但只返回一个空集。

有人看到问题出在哪里了吗？

```
public class MySet<E> extends TreeSet<E> {
    Set<E> set;

    public MySet(){
        set = null;
    }

    public MySet(Set<E> set){
        this.set = set;
    }

    public void union(Set<E> s){
        set.addAll(s);
    }

    public void intersection(Set<E> s){ 
        set.retainAll(s);
    }

} 
```

主要方法

```
public class TestSet {

    public static void main(String[] args) throws FileNotFoundException{
        File f1 = new File("courseList1.txt");
        File f2 = new File("courseList2.txt");

        Scanner scan1 = new Scanner(f1);
        Scanner scan2 = new Scanner(f2);

        Set<Coarse> set1 = new HashSet<Coarse>();
        Set<Coarse> set2 = new HashSet<Coarse>();

        MySet<Coarse> mySet = new MySet<Coarse>(set1);

        String designator;
        int number;

        while(scan1.hasNext()){
            designator = scan1.next();
            number = scan1.nextInt();
            set1.add(new Coarse(designator, number));
        }

        while(scan2.hasNext()){
            designator = scan2.next();
            number = scan2.nextInt();
            set2.add(new Coarse(designator, number));
        }

        mySet.union(set2);
        mySet.intersection(set2);

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-06T06:27:25.820

似乎您正在尝试实现组合并同时扩展树集，但这不是一个好习惯，您要么使用组合并实现 Set 接口（带有 TreeSet 的后端），要么扩展树集

扩展树集

```
 class MySet<E> extends TreeSet<E> {
        public void union(Set<E> s){
            addAll(s);
        }

        public void intersection(Set<E> s){
            retainAll(s);
        }
    } 
```

使用组合

```
 class MySet<E> implements Set<E> {
        private TreeSet<E> set;

        public MySet(TreeSet<E> set) {
            this.set = new TreeSet<>(set);
        }

        public void union(Set<E> s){
            set.addAll(s);
        }

        public void intersection(Set<E> s){
            set.retainAll(s);
        }

        @Override
        public int size() {
            return set.size();
        }

        @Override
        public boolean isEmpty() {
            return set.isEmpty();
        }

        @Override
        public boolean contains(Object o) {
            return set.contains(o);
        }

        @Override
        public Iterator<E> iterator() {
            return set.iterator();
        }

        @Override
        public Object[] toArray() {
            return set.toArray();
        }

        @Override
        public <T> T[] toArray(T[] a) {
            return set.toArray(a);
        }

        @Override
        public boolean add(E e) {
            return set.add(e);
        }

        @Override
        public boolean remove(Object o) {
            return set.remove(o);
        }

        @Override
        public boolean containsAll(Collection<?> c) {
            return set.containsAll(c);
        }

        @Override
        public boolean addAll(Collection<? extends E> c) {
            return set.addAll(c);
        }

        @Override
        public boolean retainAll(Collection<?> c) {
            return set.retainAll(c);
        }

        @Override
        public boolean removeAll(Collection<?> c) {
            return set.removeAll(c);
        }

        @Override
        public void clear() {
            set.clear();
        }

        @Override
        public boolean equals(Object o) {
            return set.equals(o);
        }

        @Override
        public int hashCode() {
            return set.hashCode();
        }
    } 
```

# r - 通过在 R 中添加缺失时间的行来填充缺失的时间步长 (yyyy-mm-dd HH:MM:SS)

> ID：15931428
> 
> 赞同：3
> 
> 时间：2013-04-10T16:29:33.917
> 
> 标签：r, datetime, time-series, xts, zoo

我有一个大型数据集，如下所示：

```
Time,Volume    
1996-02-05 00:34:00,0.01
1996-02-05 00:51:00,0.01
1996-02-05 00:52:00,0.01
1996-02-05 01:04:00,0.01
1996-02-05 01:19:00,0.01
1996-02-05 05:00:00,0.01
1996-02-05 05:07:00,0.01
1996-02-05 05:08:00,0.01
1996-02-05 05:14:00,0.01 
```

我想`Volume`对每 30 分钟间隔的列求和。这是我尝试过的：

```
z <- read.zoo("precip.csv", header = TRUE, sep = ",", FUN = as.chron)
half_hour <- period.apply(z, endpoints(z, "minutes", 30), length) 
```

哪个返回：

```
Time,Volume
02/05/96 00:52:00,3
02/05/96 01:19:00,2
02/05/96 05:14:00,4 
```

我试图让输出看起来像：

```
Time,Volume
02/05/96 00:29:00,0
02/05/96 00:59:00,3
02/05/96 01:29:00,2
02/05/96 01:59:00,0
02/05/96 02:29:00,0
02/05/96 02:59:00,0 
```

...等等。

或者，我认为如果我可以填写原始数据集以便计算每一分钟（缺失`Volumes`等于 0），它会起作用。

我找到[了这篇文章](https://stackoverflow.com/questions/5041677/convert-an-irregular-time-series-m-d-y-hhmmss-to-regular-ts-filling-with-na)，但无法使它工作。

```
> z_xts<- xts(precip[,c("Volume")],precip[,"Time"])
Error in xts(precip[, c("Volume")], precip[, "Time"]) : 
  order.by requires an appropriate time-based object 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:03:22.227

这应该做你想要的：

```
library(xts)
x <- as.xts(read.zoo(text="Time,Volume    
1996-02-05 00:34:00,0.01
1996-02-05 00:51:00,0.01
1996-02-05 00:52:00,0.01
1996-02-05 01:04:00,0.01
1996-02-05 01:19:00,0.01
1996-02-05 05:00:00,0.01
1996-02-05 05:07:00,0.01
1996-02-05 05:08:00,0.01
1996-02-05 05:14:00,0.01",
sep=",", FUN=as.POSIXct, header=TRUE, drop=FALSE))

# 1) Create POSIXct sequence from midnight of the first day
#    until the end of the last day    
midnightDay1 <- as.POSIXct(format(start(x),"%Y-%m-%d"))
timesteps <- seq(midnightDay1, end(x), by="30 min")
# 2) Make a copy of your object and set all values for Volume to 1
y <- x
y$Volume <- 1
# 3) Merge the copy with a zero-column xts object that has an index
#    with all the values you want.  Fill missing values with 0.
m <- merge(y, xts(,timesteps), fill=0)
# 4) Align all index values to 30-minute intervals
a <- align.time(m, 60*30)
# 5) Sum the values for Volume in each period
half_hour <- period.apply(a, endpoints(a, "minutes", 30), sum) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-28T16:04:58.730

我对上面提到的步骤 3) 有点困惑，所以我所做的是：

```
library("lubridate")
library("xts")
my_data <- read.csv("my_data.csv", stringsAsFactors=FALSE, sep=",", 
header=T) 
colnames(my_data) <- c("Time", "PAR", "NDVI", "LWS")
#It is easier if you subset your data
my_data_short_short <- subset(my_data, select = c("Time", "NDVI")) 
my_data_short$Time <- ymd_hm(my_data_short$Time, tz="UTC") 
beginning <- as.POSIXct("2016-05-12 00:00",format = "%Y-%m-%d %H:%M", 
tz="UTC")
end <- as.POSIXct("2016-06-05 00:00",format = "%Y-%m-%d %H:%M", tz="UTC")
timesteps <- seq(beginning, end, by="5 min")
volume <- rep_len(1, length.out=length(timesteps))
time_series <- data.frame(timesteps, volum)
merge <- merge(time_series, my_data_short, by.x= "timesteps", by.y="Time", 
all.x=TRUE, all.y = FALSE)

#This formats your data to run the package xts
my_data_brief.xts <- xts(x= merge$NDVI, order.by=merge$timesteps, frequency 
= 1, tzone="UTC") 

# Align all index values to 30-minute intervals
a <- align.time(my_data_brief.xts, 60*30)
# 5) Sum the values for Volume in each period
result <- period.apply(a, endpoints(a, "minutes", 30), sum, na.rm=TRUE)

saveRDS (result, file="result.rds") 
```

# vba - MapPoint：在一个州内旅行的距离

> ID：15931430
> 
> 赞同：0
> 
> 时间：2013-04-10T16:29:38.967
> 
> 标签：vba, ms-access-2010, mappoint

我想要一个过程来获取两个点并在它们之间建立一条路线，并且能够按州计算英里数。在 Access VBA 或 VB.net 中可以实现这样的过程吗？

到目前为止，我能够制定路线并获得距离，但我不确定接下来会发现哪些州已经旅行以及每个州的里程数。

这是我到目前为止所拥有的：

```
Public Sub route()

  Dim objApp As New MapPoint.Application
  Dim objMap As MapPoint.Map
  Dim objRoute As MapPoint.route

  'Set up application
  Set objMap = objApp.ActiveMap
  Set objRoute = objMap.ActiveRoute
  objApp.Visible = True
  objApp.UserControl = True

  'Add route stops and calculate the route
  objRoute.Waypoints.Add objMap.FindResults("Iron Mountain, MI").Item(1)
  objRoute.Waypoints.Add objMap.FindResults("Chicago, IL").Item(1)
  objRoute.Calculate

    For Each Item In objRoute.Directions
        MsgBox Item.Instruction & " " & Item.ElapsedDistance
    Next

End Sub 
```

我仍然遇到的一个问题是我尝试使用 Item.Location.StreetAddress.Region 但我得到：“对象变量或未设置块变量。” 谁能告诉我如何找到特定方向点的状态？如果是这样，我相信我可以通过添加经过的里程来按州查找经过的里程 - 以前经过的里程添加到它所属的州。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T10:41:02.387

我一直在修改以下 Access VBA 代码。它是问题中代码的扩展，但我使用它`GetObject()`以便可以附加到现有的 MapPoint 实例。这样我就可以在 MapPoint 中创建我的路线（并根据需要进行调整），然后 [Alt-Tab] 进入 Access 并运行代码。

代码绝不是完整的，但它似乎涵盖了基础知识。作为测试，我计划了一条从“纽约，纽约”到“洛杉矶，加利福尼亚”的路线，当我运行我的 VBA 代码时，VBA 编辑器的即时窗口中会出现以下内容：

```
"Origin_State: New York",0
"Entering New Jersey",1.57828283309937
"Entering Pennsylvania",76.8766632080078
"Entering Ohio",387.730041503906
"Entering Indiana",624.323974609375
"Entering Illinois",776.259155273438
"Entering Iowa",939.418151855469
"Entering Nebraska",1245.23413085938
"Entering Colorado",1599.96252441406
"Entering Utah",2054.32885742188
"Entering Arizona",2418.78686523438
"Entering Nevada",2448.091796875
"Entering California",2572.029296875
"End_of_route",2798.63793945313 
```

代码如下：

```
Option Compare Database
Option Explicit

Dim objApp As MapPoint.Application
Dim objMap As MapPoint.Map

Const DebugMode = True  '' controls how error messages are displayed

Public Sub RouteTest()
    Dim objRoute As MapPoint.Route
    Dim objDirection As MapPoint.Direction
    Dim StateOfOrigin As String

    On Error GoTo RouteTest_Error
    '' attach to existing instance of MapPoint
    Set objApp = GetObject(, "MapPoint.Application")
    On Error GoTo 0  '' for debugging
    Set objMap = objApp.ActiveMap
    Set objRoute = objMap.ActiveRoute

    If objRoute.Directions Is Nothing Then
        DisplayErrorMessage "No route.", vbExclamation
        Exit Sub
    End If

    StateOfOrigin = GetState(objRoute.Directions(1).Location)
    Debug.Print """Origin_State: " & StateOfOrigin & """,0"

    For Each objDirection In objRoute.Directions
        If objDirection.Instruction Like "Entering *" Then
            Debug.Print """" & Replace(objDirection.Instruction, """", """""", 1, -1, vbBinaryCompare) & """," & objDirection.ElapsedDistance
        End If
    Next
    Set objDirection = objRoute.Directions(objRoute.Directions.Count)
    Debug.Print """End_of_route""," & objDirection.ElapsedDistance
    Set objDirection = Nothing

    Set objRoute = Nothing
    Set objMap = Nothing
    Set objApp = Nothing
    Exit Sub

    RouteTest_Error:
    If Err.Number = 429 Then
        DisplayErrorMessage "Unable to attach to existing instance of MapPoint.", vbCritical
    Else
        Err.Raise Err.Number
    End If
End Sub

Public Function GetState(loc As MapPoint.Location) As String
    '' adapted from code at http://www.mp2kmag.com/articles.asp?ArticleID=47
    Dim objResults As MapPoint.FindResults
    Dim objTempLoc As MapPoint.Location
    Dim rgn As String
    rgn = ""
    loc.Goto
    objMap.Altitude = 1
    Set objResults = objMap.ObjectsFromPoint(objMap.LocationToX(loc), objMap.LocationToY(loc))
    If objResults.ResultsQuality = geoAllResultsValid Then
        For Each objTempLoc In objResults
            If objTempLoc.Type = geoShowByRegion1 Then
                rgn = objTempLoc.Name
                Exit For
            End If
        Next
        Set objTempLoc = Nothing
    End If
    Set objResults = Nothing
    GetState = rgn
End Function

Private Sub DisplayErrorMessage(ErrorMessage As String, MessageBoxStyle As Long)
    If DebugMode Then
        Debug.Print ErrorMessage
    Else
        MsgBox ErrorMessage, MessageBoxStyle
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T11:53:16.680

您看到的实际错误是由于滥用 FindResults 集合。您盲目地假设元素 1 已设置。不一定是这种情况，您应该首先检查 ResultsQuality 属性。这是一个非常常见的问题，经常出现在各种在线论坛上 - 很常见，我在这里写了一篇关于它的快速文章：

[http://www.mapping-tools.com/howto/programming/using-the-findresults-collection/](http://www.mapping-tools.com/howto/programming/using-the-findresults-collection/)

对于 City、State 位置，您可能还会使用 FindAddressResults 做得更好。在大多数情况下，这将导致“不明确的结果”，但您可以遍历结果并选择第一个城市（通常有两个结果：城市和州）。

* * *

*以上是对问题第二部分的回答。以下是我对总体策略的回应。从评论中，看起来 OP 已经解决了，但我将其保留在这里，以便评论有意义。*

我不认为你可以做你想做的事，除非你在内部有一个形状定义列表并做了一个多边形点测试（是的，很多编程）。

仅当 Location 对象是从街道地址显式创建时（例如，在导入时），才设置 Location 的 StreetAddress 属性。

另请注意，您的方法可能会出现一些大错误，因为无法保证方向靠近州边界。此外，Direction Location 对象并不位于路线上 - 它们仅供查看。是的，有时它们确实位于路段上，但无法保证。这个想法是您可以缩放到该位置，并获得该方向的理想地图视图（左转等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T17:26:58.967

我认为它实际上在更改状态时添加了一个方向，所以它不应该那么不准确吗？我知道出于会计目的计算里程数+/-几美元并没有太大区别，而且它可能比依靠司机记住在穿越州界线时低头并正确记录里程更准确。在任何情况下，您都可以添加休息站以强制将其他方向添加到路线中，这可能会使其更加准确 - [http://www.mp2kmag.com/update/mappoint.newsletter/2011-05-05 /](http://www.mp2kmag.com/update/mappoint.newsletter/2011-05-05/)
埃里克米
：312-399-1586

# jquery - 如何处理 jquery ui 的选项卡小部件的选择事件？

> ID：15931433
> 
> 赞同：5
> 
> 时间：2013-04-10T16:29:47.463
> 
> 标签：jquery, jquery-ui, tabs

我在我的网页中使用 jquery ui 的选项卡小部件初始化没问题。但想捕获选项卡的 on_selected 事件以执行其他操作。我关注了 jquery 的文档，但它不起作用。[医生](http://docs.jquery.com/UI/Tabs#events)！

我努力了

```
 $( "#editor-tabs" ).tabs();
    $("#editor-tabs").bind("tabsshow",function(event,ui){
            alert(ui.index);
    }); 
```

和

```
$( "#editor-tabs" ).tabs({
    select: function(event,ui){alert(ui.index);}
}); 
```

给回调函数设置断点，它们不会被命中。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T19:14:35.157

如果您使用 jquery ui 1.10.* ，则以下代码是正确的。我错误地使用了[文档](http://docs.jquery.com/UI)。它仅适用于 1.8

如果您遇到类似问题，最好检查您的版本号。

```
 $("#editor-tabs" ).tabs({                                                                  
            activate:function(event,ui){                                                       
                            alert(ui.index);                                                   
                    }                                                                          
         }); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-07-07T06:10:08.100

请参阅我对这个问题的类似回答：

[https://stackoverflow.com/a/17509685/763629](https://stackoverflow.com/a/17509685/763629)

注意 jQuery UI 1.10.x+ 使用这个：

```
ui.newTab.index() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:34:18.830

你介意发布一个代码示例吗？根据[http://api.jqueryui.com/tabs/](http://api.jqueryui.com/tabs/) 没有“on_selected”事件，而是activate、beforeActivate、beforeLoad、create和load。

还有你想达到什么目标？

可以参考这个：[jQuery - Trapping tab select event](https://stackoverflow.com/questions/3641154/jquery-trapping-tab-select-event)

```
 $('#tabs, #fragment-1').tabs({
  select: function(event, ui){
    // Do stuff here
  }
}); 
```

# c# - 存储库模式是否只能与实体框架一起使用？

> ID：15931434
> 
> 赞同：5
> 
> 时间：2013-04-10T16:29:49.077
> 
> 标签：c#, .net, entity-framework, ado.net, entity-framework-5

我已经使用`Entity Framework`了`repository pattern`一段时间了。

前几天我被要求在不使用实体框架的情况下编写数据层，只是简单的旧`ADO.NET`. 我想知道什么是最好的方法？我是否还使用普通的旧 ADO.NET 为我的 CRUD 操作使用存储库模式？

如果我去`Codeplex`搜索存储库模式，那么 99.9% 的示例项目都使用实体框架。如果我将普通 ADO.NET 与存储过程一起使用，是否需要使用不同的模式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T16:34:11.487

不，存储库模式在实体框架之外广泛使用，并且是一种处理数据访问的全面有用的方式。

*来自 MSDN*

*   它集中了数据逻辑或 Web 服务访问逻辑。
*   它为单元测试提供了一个替代点。
*   它提供了一个灵活的架构，可以随着应用程序整体设计的发展而调整。

[http://msdn.microsoft.com/en-us/library/ff649690.aspx](http://msdn.microsoft.com/en-us/library/ff649690.aspx)

其他福利：

*   易于在存储库中添加逻辑，例如通过 Web 请求缓存结果
*   可以添加常见查询，例如`userRepository.FindByEmailAddress(emailAddress);`
*   可以将存储库更改为另一个存储库，例如以最小的努力将 dabase 切换到 Web 服务

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T09:28:11.850

我不认为这是正确的方法。但是有一些假设

在 EF 代码之上添加存储库模式。这使您远离 ORM 的功能。实体框架已经是您数据库上的一个抽象层。

如果你想通过 EF 使用依赖注入和测试驱动开发，那么你遵循存储库模式。通过使用 RP，您的代码变得可测试和可注入/可维护。

开箱即用的 EF 不是非常可测试的，但是使用可以注入的接口制作 EF 数据上下文的可模拟版本非常容易。

如果我们不希望我们的代码可测试或可注入，那么就不要使用 RP。

我看到一篇博文：[http ://www.nogginbox.co.uk/blog/do-we-need-the-repository-pattern](http://www.nogginbox.co.uk/blog/do-we-need-the-repository-pattern)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:37:55.470

Martin Fowler 的“企业架构模式”为存储库提供了以下定义：

> 使用类集合接口访问域对象，在域和数据映射层之间进行调解。

在 C# 中实现它的一种常见方法是拥有一个泛型`Repository<T>`类，其中 T 是一个持久对象，它实现`IQueryable<T>`并提供额外的方法，如`Add(entity)`, `Remove(entity)`.

如果没有 ORM，将很难实现。您可以创建一个更简单的存储库，将 SQL 语句作为 WHERE 条件，但它可能会变得混乱。

许多示例使用具有不同持久性方法的每种类型的具体存储库类。但那些只是伪装的 DAO 类。

# ios - 显示键盘时Phonegap防止滚动

> ID：15931436
> 
> 赞同：3
> 
> 时间：2013-04-10T16:30:02.733
> 
> 标签：ios, cordova

在 Phonegap 应用程序上，当文本输入聚焦并且软键盘显示时，是否有任何方法可以防止页面滚动？如果没有办法，有没有办法将页面滚动到文本输入的位置，而不是将文本输入“带到”屏幕中心？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T05:34:22.907

在 phonegap 2.6 中有一个新选项可以通过调整 webview 的大小来防止滚动。查看[文档](http://docs.phonegap.com/en/2.6.0/guide_project-settings_ios_index.md.html#Project%20Settings%20for%20iOS)并找到`KeyboardShrinksView`选项。

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-15T17:44:50.060

我已经成功地使用了这个 javascript 代码。它覆盖了 window.scrollTo 函数并将其取消...

```
window.oldScrollTo = window.scrollTo;

window.scrollTo = function (x, y) {

    console.log("window.scrollTo");
    return;
}; 
```

# ffmpeg - ffmpeg如何控制fps tbr tbn tbc参数

> ID：15931437
> 
> 赞同：8
> 
> 时间：2013-04-10T16:30:08.593
> 
> 标签：ffmpeg

RT，我有两个 avi 文件，

```
A.avi: fps 30 tbr 30 tbn 30 tbc 30.
B.avi: fps 2 tbr 2 tbn 2 tbc 2. 
```

问题是如何在 B.avi 上设置相同的值 30？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T19:51:49.800

您可以使用指定的帧速率重新编码：

```
ffmpeg -i B.avi -codec:v mpeg4 -r 30 -qscale:v 2 -codec:a copy C.avi 
```

这些选项的含义：

*   `-codec:v mpeg4`- 使用编码器调用`mpeg4`MPEG-4 Part 2 视频。
*   `-r 30`- 将输出帧速率设置为 30。
*   `-qscale:v 2`- 使用恒定量化参数设置视频输出质量。推荐范围为 2-5 `mpeg4`。
*   `-codec:a copy`- 将音频从输入复制到输出以避免重新编码。

请注意，这`ffmpeg`将简单地复制帧以实现您想要的输出帧速率。相反，如果您降低帧速率`ffmpeg`，则会丢帧。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-10-09T05:03:34.963

您可以更改时基或`tbn` `tbc`按`-video_track_timescale`，例如将`tbn`and更改`tbc`为 30：

```
ffmpeg -i 1.avi -c:v copy -video_track_timescale 30 1.avi 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-29T04:25:56.730

如果您想要更多的精度控制，不仅要控制 fps。还有 tbr、tbn、tbc。假设您了解它的含义。 [待定，待定，待定](https://stackoverflow.com/questions/3199489/meaning-of-ffmpeg-output-tbc-tbn-tbr)

查看

```
ffmpeg -x264opts timebase=??? 
```

或者

```
ffmpeg -time_base 
```

或使用格式工厂，默认为您提供相同的 tbr、tbn、tbc。

# javascript - BrightCove 视频时长数据类型

> ID：15931440
> 
> 赞同：-3
> 
> 时间：2013-04-10T16:30:16.063
> 
> 标签：javascript, brightcove

我们如何在 Javascript 中将 Bright Cove 视频持续时间转换为 HH:MM:SSS？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:06:50.500

Brightcove 的 API 以毫秒为单位返回持续时间。除以 1000，然后应用将秒数格式化为 HH:MM:SS 的答案之一，例如[JavaScript 秒数以格式为 hh:mm:ss 的时间字符串](https://stackoverflow.com/questions/6312993/javascript-seconds-to-time-with-format-hhmmss)

# ruby-on-rails - 如何在 Rails 中启动和停止调度程序作业

> ID：15931443
> 
> 赞同：1
> 
> 时间：2013-04-10T16:30:18.613
> 
> 标签：ruby-on-rails, ruby

在 Rails 中启动和停止某种定期（比如每天一次）执行的调度程序的好方法是什么？

我正在寻找不需要独立管理的 Rails 应用程序开始和停止的东西。对于这样的事情，Rails 中有什么好的做法？

# android - 在 ListView 中获取对视图的引用

> ID：15931457
> 
> 赞同：1
> 
> 时间：2013-04-10T16:31:09.890
> 
> 标签：android, listview, reference, get, visibility

我在这里的等级制度有点挣扎。我想在我的 listView 中获取对每个 ID 为 delete_img 的 ImageButton 视图的引用。imagebutton 通过行布局 xml 中的 XML 添加。

本质上，我希望能够在每一行中设置某个元素的可见性，但我不知道如何获得这种参考。有没有其他方法可以做到这一点？方法 deleteShow() 是我到目前为止的尝试，但它显然是错误的，因为我在尝试设置可见性时得到一个空指针。

**笔记片段**

```
public class NotesFragment extends ListFragment {

private CommentsDataSource datasource;
private View v = null;

public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
    Cursor theNotes = (Cursor) returnNotes();
    String[] projection = { MySQLiteHelper.COLUMN_ID,
            MySQLiteHelper.COLUMN_COMMENT,
            MySQLiteHelper.COLUMN_COMMENTNAME,
            MySQLiteHelper.COLUMN_FOLDERFK };
    int[] to = new int[] { R.id.id_txt, R.id.content_txt, R.id.title_text };
    @SuppressWarnings("deprecation")
    SimpleCursorAdapter sca = new SimpleCursorAdapter(getActivity(),
            R.layout.notes_list_layout, theNotes, projection, to);
    setListAdapter(sca);

    View v = inflater.inflate(R.layout.notesfragment, container, false);
    deleteShow();

    return v;
}

@Override
public void onListItemClick(ListView parent, View v, int position, long id) {

    Intent intentView = new Intent(getActivity().getApplicationContext(),
            ViewNote.class);
    intentView.putExtra("id", id);

    startActivity(intentView);
}

public Cursor returnNotes() {
    Cursor theNotesCursor = null;
    datasource = new CommentsDataSource(getActivity());
    datasource.open();
    theNotesCursor = datasource.getAllCommentsAsCursor();
    return theNotesCursor;
}

public void deleteShow() {
    ImageButton b = (ImageButton) getActivity().findViewById(R.id.delete_img);
    b.setVisibility(View.INVISIBLE);
}

public void onPause() {
    super.onPause();
    datasource.close();
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:56:27.733

`ListView`一旦你了解了发生了什么，处理的层次结构就没有那么复杂了。可以将其`ListView`视为拥有一堆子视图或项目的框架。这些项目每个都有子视图，这些子视图由组成`ListView`. 要修改列表`Item`，您需要 (1) 更改支持该项目的数据并更新您的`ArrayAdapter`或 (2)`Item`从内部找到您尝试修改的个人`ListView`，然后对该单个项目的子视图执行操作。

最简单的方法是修改支持列表的适配器中的数据，然后调用`notifyDataSetChanged()`您`ArrayAdapter`更新`ListView`. 我不知道您的适配器是如何设置的，因此很难给您直接建议，但总体思路是您要更改支持要修改的数据，更改该`Item`数据，然后调用反映了变化。`notifyDataSetChanged()``ArrayAdapter``ListView`

直接修改单个项目要复杂得多。您不能按照您的代码建议一步完成 - 通过 id 查找单个视图然后更改其可见性 - 不会像您怀疑的那样在整个列表中运行。`findViewById`可能会返回`null`，因为它不是在单个列表元素中而是在整个列表中查找 - 即外部列表结构 - 寻找不存在的视图。

要以编程方式执行您想要的操作，您需要 (1) 获取对`ListView`自身的引用；(2) 通过调用找到列表中第一个显示的视图`getFirstVisiblePosition()`；(3) 弄清楚你要修改的项目离第一个可见项目有多远；(4) 获得该物品；(5) 修改它

这最终只是一个痛苦的屁股。修改支持列表和更新的数据比查找单个视图要容易得多。

# configuration - 在ec2上手动配置hadoop

> ID：15931458
> 
> 赞同：1
> 
> 时间：2013-04-10T16:31:13.843
> 
> 标签：configuration, hadoop, amazon-ec2

有人可以向我指出任何可以帮助我在 EC2 上**手动**设置/配置 Hadoop (1.0.4) 的资源的方向。我同意有很多资源可以使用工具、服务等来完成这项工作，但我正在寻找的是一些帮助，以确定**手动**对从属和主控的 conf/*.xml 文件进行哪些修改，以便让 Hadoop 工作。

现在，我有 5 个 ec2 实例正在运行，它们都能够在伪分布式模式下单独运行 hadoop 作业。所以，我需要通过配置conf文件的方式把一个变成master，剩下的变成slave，这样slave就知道namenode和jobtracker在哪里，master知道所有的slave。

我的理解是，我还必须配置实例的 EC2 安全组，以便它们都可以在正确的端口上相互通信。我想我可以接受。

任何人都可以帮助我完成配置部分，或者指出一些可能有帮助的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:51:41.627

我在这里找到了这个详尽的教程，它最终让我启动并运行：http: [//cloudblog.8kmiles.com/2011/12/05/hadoop-fully-distributed-setup/](http://cloudblog.8kmiles.com/2011/12/05/hadoop-fully-distributed-setup/)

# algorithm - Bellman-Ford算法的差分约束

> ID：15931461
> 
> 赞同：3
> 
> 时间：2013-04-10T16:31:17.647
> 
> 标签：algorithm, bellman-ford

假设我们想使用 Bellman-Ford 来最小化 max_i x_i - min_i x_i

在变量 x_1, x_2, ... x_n 上（变量的总数 n）

服从 x_i - x_j <= c_{i,j} 形式的 m 个约束

其中 c_{i,j} 是一个可以为负数的指定常数。

我如何证明 Bellman-Ford 可以在 O(n*m) 时间内解决此类问题？

我尝试了以下方法：

为每个变量 x_i 创建一个节点 i

创建一个源节点 s

创建从 s 到所有其他节点的 0 权重边

不知道在此之后该怎么办...请帮助，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T23:43:38.953

这是我的方法，但我不认为它是 O(m * n)，但它可能会引导你朝着正确的方向前进。尝试画一幅画是一件好事，假设我们有以下约束：

![约束集](https://i.stack.imgur.com/bgJu2.png)

对应的约束图如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/4sHXt.png)

现在请注意，在您的情况下，您有一组完整的约束，因此约束图将是一个完整的图。我们现在将从您的问题考虑图中的路径。现在考虑一条从 x_i 开始到 x_j 结束的路径。这经过点 x_i1、x_i2 ...、x_ik。所以我们的路径是 { x_i, x_i1, ..., x_ik, x_j }。由于设置不等式的方式，这条路径给了我们一个新的约束 (x_i - x_i1) + (x_i1 - x_i2) + ... + (x_ik - x_j) = x_i - x_j。

这里发生的情况是，即使我们有一个约束 x_i - x_j <= c[i,j]，我们可以通过采用其他约束的线性组合来找到对 x_i 和 x_j 更严格的约束，这些约束由这个完整图中的路径表示。

因此，修复任何顶点 x_i 并找到其最严格的约束，即 bellman ford 到任何其他顶点的最短路径。然后对所有 i 执行此操作，并取最小值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-07T17:40:22.587

在一般情况下，您不能使用 bellman-ford 算法来解决这个问题。[anil](https://stackoverflow.com/users/815977/anil)的回答（在此页面上）提到了一个反例。在他的回答中提到的图表中，我们有一个负圆 ( `sum of weights = -1`): `x1->x2->x3->x4->x5->x1`，所以我们不能对这种类型的图表和问题使用贝尔曼福特算法。

# android - Android Service 多实例

> ID：15931462
> 
> 赞同：4
> 
> 时间：2013-04-10T16:31:19.377
> 
> 标签：android, service, instance

我对 Android 服务类还是有点陌生​​。我知道您需要使用 startService(intent) 从您的应用程序启动服务，但是我的问题是我的服务内部有方法。我需要以意图启动服务，然后在我的 Activity 中创建该类的对象，以便我可以调用服务的方法。问题是，当我这样做时，我会在以意图启动服务时创建一个服务实例，而当我在我的活动中创建类的对象时会创建另一个服务实例。这意味着当我创建服务对象时，从 startService(intent) 传递给服务的任何数据都不存在。有什么方法可以解决这个问题，还是我只是完全滥用了服务类？我可以给出一些代码，但基本上是这样的：

```
//Create Object of ControlPanel service class.
ControlPanel cPanel = new ControlPanel();
//Create intent for starting ControlPanel service class
Intent controlPanel = new Intent(this, cPanel.getClass());
//Start Service
startService(controlPanel); 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-10T16:36:50.030

我会说你在滥用课程:-)。

多次调用 startService() 不会导致启动多个服务。

从[文档](http://developer.android.com/reference/android/content/Context.html#startService%28android.content.Intent%29)：

> 请求启动给定的应用程序服务。Intent 可以包含要启动的特定服务实现的完整类名，也可以包含要启动的服务种类的操作和其他字段的抽象定义。如果此服务尚未运行，它将被实例化并启动（如果需要，为它创建一个进程）；如果它正在运行，那么它会继续运行。

您也应该覆盖[onStartCommand()](http://developer.android.com/reference/android/app/Service.html#onStartCommand%28android.content.Intent,%20int,%20int%29)。如果服务尚未启动，则第一个 startService 调用将启动该服务。在任何情况下，onStartCommand 都会拦截任何进一步的 startService 调用以及您要发送给它的意图。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-04-10T16:38:09.083

> 有什么方法可以解决这个问题，还是我只是完全滥用了服务类？

您完全在滥用`Service`课程。

A`Service`通过两种基本模式使用：

1.  通过 向它发送命令`startService()`。

2.  绑定到它，调用由它公开的 API `Service`，通过`bindService()`.

绑定更准确地描述了您正在尝试做的事情（“所以我可以调用服务的方法”），但是绑定很难正确处理，尤其是在配置更改时。

因此，我建议您先坐下来，**完全准确地***确定您首先使用 a的***原因***`Service`。`ControlPanel`，例如，是我将与 UI 相关联的名称，而不是无 UI（“背景”）操作。只有这样，您才能确定命令或绑定模式是否适合您的用例。*

 ** * *

## 回答 #3

> 赞同：-8
> 
> 时间：2015-09-27T00:23:30.173

您可以使用一个服务类来做到这一点。

```
public static int myStaticMethod(){
        return 1;
    } 
```

只需将访问所需的方法设为静态即可。*

# php - 使用 PDO 执行插入/更新查询

> ID：15931463
> 
> 赞同：0
> 
> 时间：2013-04-10T16:31:22.423
> 
> 标签：php, mysql, pdo

我的代码在这里遇到问题。我有一个表单，用户填写一些信息并将其提交以添加到数据库中。该表单可用于提交新行或编辑现有行。但是，这两个查询似乎都不起作用，我不明白为什么。任何人都可以在这里看到我的代码中的任何错误吗？

另外，我知道我不应该回显我的 PDO 异常，但出于调试目的，我暂时这样做了。但没有任何回应。似乎没有任何错误。

```
try {
    $db = new PDO('mysql:host=x.x.x.x;dbname=xxx', "xxx", "xxx");
} catch (PDOException $ex) {
    echo $ex->getMessage();
}

if (isset($_POST['title'])) {
    try {
        $stmt = $db->prepare("SELECT * FROM xxxxx WHERE Title = :title;");
        $stmt->bindParam(':title', $_POST['title']);
        $stmt->execute();
        $rows = $stmt->fetchAll();
    } catch (PDOException $ex) {
        echo $ex->getMessage();
    }
    if (count($rows) > 0){
    $result = $rows[0];
        if($result['Author'] == $_SESSION['user_name']) {
            try {
                $stmt = $db->prepare("UPDATE xxxxx SET Title = :title, `Short Desc` = :short, Description = :desc, Location = :loc, Genre = :genre, Date = :date, lat = :lat, lng = :lng WHERE ID = :id and Author = :user LIMIT 1;");
                $stmt->bindParam(':title', $_POST['title']);
                $stmt->bindParam(':short', $_POST['shortdesc']);
                $stmt->bindParam(':desc', $_POST['description']);
                $stmt->bindParam(':loc', $_POST['location']);
                $stmt->bindParam(':genre', $_POST['genre']);
                $stmt->bindParam(':date', $_POST['date']);
                $stmt->bindParam(':lat', $_POST['lat']);
                $stmt->bindParam(':lng', $_POST['lng']);
                $stmt->bindParam(':user', $_SESSION['user_name']);
                $stmt->execute();
                $err = "Your ad was successfully updated.";
            } catch (PDOException $ex) {
                echo $ex->getMessage();
            }
        } else {
            $err = "An ad already exists with that title.";
        }
    } else {
        try {
            $stmt = $db->prepare("INSERT INTO xxxxx (`Title`, `Short Desc`, `Description`, `Location`, `Genre`, `Date`, `Author`, `lat`, `lng`) VALUES (:title,:short,:desc,:loc,:genre,:date,:user,:lat,:lng)");
            $stmt->bindParam(':title', $_POST['title']);
            $stmt->bindParam(':short', $_POST['shortdesc']);
            $stmt->bindParam(':desc', $_POST['description']);
            $stmt->bindParam(':loc', $_POST['location']);
            $stmt->bindParam(':genre', $_POST['genre']);
            $stmt->bindParam(':date', $_POST['date']);
            $stmt->bindParam(':lat', $_POST['lat']);
            $stmt->bindParam(':lng', $_POST['lng']);
            $stmt->bindParam(':user', $_SESSION['user_name']);
            $stmt->execute();
            $err = "Your ad was successfully added to our database.";
        } catch (PDOException $ex) {
            echo $ex->getMessage();
        }
    }
} 
```

# cucumber - 切换到 Poltergeist 时出现 NotImplementedError

> ID：15931464
> 
> 赞同：6
> 
> 时间：2013-04-10T16:31:28.580
> 
> 标签：cucumber, capybara, phantomjs, poltergeist

我有这个与 Selenium 一起使用的*黄瓜步骤定义，但是当我使用**poltergeist*驱动程序`NotImplementedError`尝试它们时我得到了。

 *phantom.js 已安装，我什至可以从看起来正确的步骤定义中截取屏幕截图。我正在测试一个 Ember.js/Rails 应用程序。看到它正确地访问了页面，但是当我尝试查找链接时它失败了。

```
When(/^I visit the App$/) do
  visit("/")
end

Then(/^I should see link "(.*?)"$/) do |arg1|
  find_link(arg1)
end

When(/^I click "(.*?)"$/) do |arg1|
  find_link(arg1).click
end

When(/^I fill in "(.*?)" with "(.*?)"$/) do |arg1, arg2|
  fill_in arg1, :with => arg2
end

When(/^I click "(.*?)" button$/) do |arg1|
  find_button(arg1).click
end 
```

确切的错误是这样的：

```
When I visit the App                                  # features/step_definitions/sign_in_steps.rb:1
Then I should see link "Sign Up"                      # features/step_definitions/sign_in_steps.rb:5
  NotImplementedError (NotImplementedError)
  ./features/step_definitions/sign_in_steps.rb:6:in `/^I should see link "(.*?)"$/'
  features/sign_in.feature:9:in `Then I should see link "Sign Up"' 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-10T16:58:28.237

我最近也遇到了这个问题 - 当前版本的 poltergeist (1.1.0) 不支持 capybara 2.1.0 - 将 capybara 降级到 2.0.x，你应该很高兴。*

# java - 具有相同符号名称的包的 OSGi 包导出行为

> ID：15931465
> 
> 赞同：0
> 
> 时间：2013-04-10T16:31:29.800
> 
> 标签：java, osgi, modularity, osgi-bundle

考虑一下我有两个具有相同符号名称但版本不同的 OSGi 包。两个包都导出相同的未版本化包（例如，`my.package`）。让 OSGi 保证将使用哪个包来提供包？（参考 OSGi 规范会很有帮助。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:44:38.030

不。

具有相同名称和相同版本的两个包被认为是等效的，因此选择哪个并不重要。因此 OSGi 可以自由选择。请参阅 OSGi 核心规范 R5，第 3.6.4 节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:40:35.810

不，除非版本化和非版本化包之间存在“使用”约束。

# php - 从mysql计算数组结果

> ID：15931467
> 
> 赞同：2
> 
> 时间：2013-04-10T16:31:35.647
> 
> 标签：php, mysql, arrays

我的 php 脚本有问题。我想检查我的脚本数组中是否有任何内容，如果没有回显消息，但是当数组为空时，它不会回显任何内容。

那是我的代码：

```
 include("mysql_connect.php");
$name = $_POST['playerName'];
$users = mysql_query('SELECT * FROM playerdata WHERE username LIKE "'.$name.'%"');
        if($name==""){
        echo 'Type in player name!';
    }else{
while($usersList= mysql_fetch_assoc($users)){
    if(!array_count_values($usersList)){
        echo 'Player not found';
    }else{
        echo $usersList['username'].', ';
    }
}//While end.
}//If name is empty end. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:17:33.650

问题似乎是，如果用户输入`invalid`名称，`while loop`则不会执行，因为查询根本找不到任何行，`code`应该如下

```
include("mysql_connect.php");
$name = $_POST['playerName'];

if( $name === "" ){
    echo 'Type in player name!';
} else {
    $users = mysql_query('SELECT * FROM playerdata WHERE username LIKE "'.$name.'%"');

    if ( mysql_num_rows($users) == 0) {
        echo "Invalid Player name provided";
    } else {
        while($usersList= mysql_fetch_assoc($users)){
        {
            echo $usersList['username'].', ';
        } //While end.
    }
}//empty name 
```

**笔记：**

1.  我有`re-formatted`代码，因为它看起来很丑
2.  仅当用户为名称提供一些文本时才会执行查询，为什么`execute`当名称为`empty`!

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:10:30.230

如前所述，您必须在循环之前检查行。

```
$rows = mysql_num_rows($users);
if($rows==0) echo "No rows..";
else {
  foreach() { 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:44:55.233

代替

```
if(!array_count_values($usersList)){ 
```

利用

```
if(empty($usersList)){ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T16:50:50.897

如果 $users 为空，则不会执行您的 while 循环，因此条件：

```
if(!array_count_values($usersList)){
        echo 'Player not found';
   } 
```

永远不会满足，因为它包含在一个永远不会运行的循环中。

# php - 让正则表达式在某个字符处停止，但在匹配中包含该字符

> ID：15931472
> 
> 赞同：1
> 
> 时间：2013-04-10T16:31:44.457
> 
> 标签：php, regex

现在，这个正则表达式匹配一些东西并停在斜线（ / ），但我需要它停在斜线并包含斜线。或者换句话说，在斜线之后的任何字符处停止。但是，我不知道那个字符是什么。

关于如何做到这一点的任何想法？

这是正则表达式：

```
 (?:https?:\/\/|www)[^\/]* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:35:14.940

您可以通过 2 种方式做到这一点：

```
(?:https?:\/\/|www)[^\/]*\/ 
```

或这个 ：

```
(?:https?:\/\/|www).*?\/ 
```

**编辑：**

要在最后一个斜杠处停止，请使用以下命令：

```
(?:https?:\/\/|www)[^\/]+(?:\S*?\/)* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:33:19.387

添加斜杠作为正则表达式的一部分：

```
(?:https?:\/\/|www)[^\/]*\/
                         ^^ add this 
```

# msbuild - 在需要它的 MonoDroid 项目中键入引用转发

> ID：15931473
> 
> 赞同：1
> 
> 时间：2013-04-10T16:31:46.380
> 
> 标签：msbuild, xamarin.android, mvvmcross, portable-class-library

关于本文中描述的解决方案[，](https://stackoverflow.com/questions/10361457/is-it-possible-to-use-a-portable-class-library-that-references-system-net-in-mon)需要第三个程序集才能将类型解析转发到正确的程序集。在使用该类型添加这个对Android类库项目的引用时，转发似乎没有完成。该引用需要添加到作为构建过程的终点的 Android 应用程序项目中。

是否存在任何解决方案来添加在需要它的项目中嵌入转发的引用？

我的意思是，如果在我的解决方案架构中我使用：

*   MyApp.Core - PCL
*   MyApp.Core.Droid - Android 类库
*   MyApp.UI.Droid - Android 应用程序

System.Net 命名空间（例如 System.Net.Socket.AddressFamily）的使用是在我的 ViewModel 中完成的，它位于 MyApp.Core.Droid 中（使用一些插件重定向 MyApp.Core）。在这种情况下，在 MyApp.Core.Droid 中有引用更合乎逻辑（和可读性）。但实际上，在打包应用程序时（据我所知）完成了程序集解析，所以在 MyApp.UI.Droid 中。所以在这种情况下，需要将引用添加到 MyApp.UI.Droid 才能找到（如果添加到 MyApp.Core.Droid 则失败）。

在这种情况下，解决方案有效，但对于加入团队的新程序员来说，理解这一点很明显，他们没有遇到麻烦并理解为什么需要将此引用添加到 UI 项目中......

我不确定我的想法很容易通过我介绍它的方式来理解。如果您需要更多解释，请告诉我。

谢谢，

纪尧姆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:55:29.783

我不完全确定为什么这个“如果添加到 MyApp.Core.Droid 会失败” - 感觉应该添加这个。但是，我知道 Xamarin 已经对依赖项解析脚本进行了几次调整和更改。

* * *

话虽如此，我认为您问题的最佳答案是“不要太担心” - 这只是现在的一个小不便，它将通过 Xamarin 的更新“很快”得到解决。

当前的 PCL 支持是我和其他一些人为了让事情顺利进行而进行的工作。这组“hacks”是缺乏“适当的 PCL”支持的解决方法——它模拟了 Microsoft PCL 构建平台在 WindowsPhone、WPF 等上所做的事情，但它不是一个完美的实现。

Xamarin 现在已承诺提供“适当的 PCL”支持。发生这种情况时，将自动添加这些类型转发依赖项。好消息是，这种支持现在可能只有几天、几周或最多几个月的时间了。

# php - 从数据库存储多个下载的图像 - PHP

> ID：15931477
> 
> 赞同：1
> 
> 时间：2013-04-10T16:31:56.140
> 
> 标签：php, sql, file, download

我在数据库中将各种图像拆分为 blob 文件。我编写了一个 php 脚本来访问这些 blob 文件并将它们下载到本地。

由于有很多图像，我放置了一个循环来下载存储在数据库中的所有图像，但是当我在循环中运行脚本时，我得到一个大的下载并且没有单独的图像。

我的代码如下：

```
$query="SELECT `id` FROM `images` LIMIT 10";
$result=mysql_query($query);
$imageid = array();

while($row = mysql_fetch_assoc($result)){
//iterate over all the fields
foreach($row as $key){ 
    $imageid[] = $key;
    }
} 

$fileName ='';

for ($i = 0; $i < count($imageid); $i++) {

    $query="SELECT `filename` FROM `images` WHERE `id`=".$imageid[$i]."";

    $result=mysql_query($query);

    while($row = mysql_fetch_assoc($result)){
        foreach($row as $key){ 
            $fileName = $key;
        }
    } 

    header("Pragma: public");
    header("Expires: 0"); // set expiration time
    header("Cache-Control: must-revalidate, post-check=0,pre-check=0");

    header("Content-Type: application/force-download");
    header("Content-Type: application/octet-stream");
    header("Content-Type: application/download");

    header("Content-Transfer-Encoding: binary");

    header('Content-type: application/octet-stream');
        header('Content-Disposition: inline; filename='.$fileName.'');

    $sql = "SELECT `data` FROM `images_data` WHERE `image_id`=".$imageid[$i]." ORDER BY id";    
        $result1=mysql_query($sql);

    while($row = mysql_fetch_array($result1)) echo $row['data'];

}//END FOR LOOP 
```

有什么办法可以通过运行脚本下载所有图像？如果我手动更改 $imageid[$i] 的参数（例如 0,1,2,3 等），将下载不同的图像，但对于我必须使用的图像数量来说它是无用的。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:54:19.407

您只能从一个 php 脚本运行中获取一次文件。在您的情况下，我认为最好的方法是，将 DB 中的所有文件存储到临时文件夹中，当压缩（或 GZ）此文件夹时，并在使用 header() 中的相应 MIME 类型输出此 ZIP（或 GZ）存档后

# ios - 具有不兼容类型“双”的表达式的 CLLocationDegrees

> ID：15931479
> 
> 赞同：4
> 
> 时间：2013-04-10T16:32:05.820
> 
> 标签：ios, cllocation

话题说明了一切。为什么我在这 2 行收到此错误消息？

```
NSArray *coordinates = [locationDetails[@"coordinates"] componentsSeparatedByString:@","];
CLLocationDegrees *lat = [coordinates[1] doubleValue]; //here is the red arrow <---- 
```

并且将出现此消息：

> 使用不兼容类型“double”的表达式初始化“CLLocationDegrees *”（又名“double *”）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T16:33:22.177

改变这个：

```
CLLocationDegrees *lat = [coordinates[1] doubleValue]; 
```

至：

```
CLLocationDegrees lat = [coordinates[1] doubleValue]; 
```

去掉星号。`CLLocationDegrees`不是类，它是`double`（基本类型）的 typedef。

# javascript - 如何在选中“全部”复选框时取消选择相关复选框并在选中任何相关复选框时取消选择“全部”复选框？

> ID：15931484
> 
> 赞同：0
> 
> 时间：2013-04-10T16:32:22.943
> 
> 标签：javascript, jquery, checkbox

我有一个包含多个复选框组的表单，每个复选框组都有一个相关的“全部”选项，单击该选项会取消选择所有相关的复选框。当检查任何相关的复选框时，该表格还需要取消选中“所有”选项。基本上，表单可以提交“全部”选项、任何相关选项或不提交选项。

选中任何复选框时，相关标签会变为粗体，包括“全部”选项。

我已经用jQuery编写了这种逻辑，但是，我似乎无法让一件能够正常工作 - 当检查了一个相关选项时，请删除“全部”选项。当用户单击相关选项之一时它会起作用，但它也会在刚刚选中后取消选中“全部”选项。

我想我的问题是，如何确定“源”事件是什么，以便确定是否运行那段代码？

带有“取消选择'全部'”的演示注释掉：http: [//jsfiddle.net/8Ctvd/](http://jsfiddle.net/8Ctvd/)

JS：

```
$(function () {
    $(".all").change(function () {
        if ($(this).is(":checked")) $("input[rel='" + $(this).attr("rel") + "']:checked").not(".all").removeAttr("checked").change();
    });

    $("input[type='checkbox']").change(function (e) {
        if ($(this).is(":checked")) $("label[for='" + $(this).attr("id") + "']").css("font-weight", "bold");
        else {
            $("label[for='" + $(this).attr("id") + "']").css("font-weight", "normal");
            /* THIS UNCHECKS THE ALL EVERYTIME
            if  ($(this).not(".all"))
                $("input.all[rel='" + $(this).attr("rel") + "']").removeAttr('checked').change();
            */
        }
    });
}); 
```

HTML：

```
<INPUT id=items_All class="checkbox all" name=items value=ALL type=checkbox rel="items">
<LABEL class="items checkbox-label" for=items_All>All</LABEL>
<INPUT id=items_1 class=checkbox name=items value=1 type=checkbox rel="items">
<LABEL class="items checkbox-label" for=items_1>Item 1</LABEL>
<INPUT id=items_2 class=checkbox name=items value=2 type=checkbox rel="items">
<LABEL class="items checkbox-label" for=items_2>Item 2</LABEL>
<INPUT id=items_3 class=checkbox name=items value=3 type=checkbox rel="items">
<LABEL class="items checkbox-label" for=items_3>Item 3</LABEL>
<br />
<INPUT id=widgets_All class="checkbox all" name=widgets value=ALL type=checkbox rel="widgets">
<LABEL class="widgets checkbox-label" for=widgets_All>All</LABEL>
<INPUT id=widgets_1 class=checkbox name=widgets value=1 type=checkbox rel="widgets">
<LABEL class="widgets checkbox-label" for=widgets_1>Widget 1</LABEL>
<INPUT id=widgets_2 class=checkbox name=widgets value=2 type=checkbox rel="widgets">
<LABEL class="widgets checkbox-label" for=widgets_2>Widget 2</LABEL>
<INPUT id=widgets_3 class=checkbox name=widgets value=3 type=checkbox rel="widgets">
<LABEL class="widgets checkbox-label" for=widgets_3>Widget 3</LABEL> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:56:17.953

我通过使用相关复选框的“单击”事件来解决这个问题。这样，更改事件就不会触发它。

JS：

```
$('.all').change(function(){
    if ($(this).is(':checked'))
        $('input[rel="' + $(this).prop('rel') + '"]:checked').not('.all').removeProp('checked').change();
});

$('input[type="checkbox"]').change(function(e){
    var $label = $('label[for="' + $(this).prop('id') + '"]');

    if ($(this).is(':checked'))
        $label.css('font-weight', 'bold');
    else
        $label.css('font-weight', 'normal');
});

$('input[type="checkbox"]').not('.all').click(function(e){
    var $allCheckbox =
        $('input.all[rel="' + $(this).prop('rel') + '"]');

    if ($allCheckbox.is(':checked'))
        $allCheckbox.removeProp('checked').change();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:42:40.547

## 编辑

我已经调整了 JS 以适应我误解的要求。部分问题是您的逻辑有点偏离，并且可以大大简化。将格式化逻辑分离到一个单独的函数中，您可以将格式化与检查分开查看。

```
$("input[type='checkbox']").change(function (e) {
    var $o = $(this);
    if ($o.hasClass("all")) {
        //all box was checked, uncheck others
        if ($o.prop("checked"))
            $("input[rel='" + $o.attr("rel") + "']").not(this).prop("checked", false);
    } else {
        // other box was checked, uncheck all
        if ($o.prop("checked")) {
            $("input.all[rel='" + $o.attr("rel") + "']").prop("checked", false);
        }
    }
    fixMarkup();
}); 
```

有关完整示例，请参见此处：http: [//jsfiddle.net/8Ctvd/3/](http://jsfiddle.net/8Ctvd/3/)

## 原始答案

您正在使用`attr`，这会给您带来不可预测的结果。此外，使用`.is`速度比`.prop`. 您应该`.prop`在 jQuery 中使用，它被转换为布尔值并反映标签的当前状态，而不是其初始标记。请参阅[此 SO 答案以供参考](https://stackoverflow.com/questions/5874652/prop-vs-attr)。

此外，您调用`.change()`final`not('.all')`会导致在“全部”复选框上触发更改事件。检查这个更新的小提琴。

[http://jsfiddle.net/8Ctvd/1/](http://jsfiddle.net/8Ctvd/1/)

# ruby-on-rails-3 - 模板中的 Rails link_to

> ID：15931489
> 
> 赞同：-1
> 
> 时间：2013-04-10T16:32:39.010
> 
> 标签：ruby-on-rails-3, css, twitter-bootstrap

当我将 link_to 添加到预制引导模板时，它最终会将链接放在导航图标下方。我不确定这是 CSS 问题还是我的代码错误。

```
<li><a href="#"><i class="icon-off icon-white"></i><%= link_to('Logout', destroy_user_session_path, :method => :delete) %></a></li> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:55:47.490

试试这个

```
<%= link_to("<i class='icon-off icon-white'></i> Logout".html_safe, destroy_user_session_path, :method => :delete) %> 
```

# hibernate - 了解乐观锁定 StaleObjectStateException

> ID：15931491
> 
> 赞同：3
> 
> 时间：2013-04-10T16:32:44.893
> 
> 标签：hibernate, jpa, spring-data-jpa

我已经为此苦苦挣扎了`StaleObjectStateException`一个多星期，并决定在这里发布一个简单的应用程序来重现该问题。

我知道这`org.hibernate.StaleObjectStateException`是一个**乐观锁定异常**。此外，**乐观锁定依赖于**在每个实体类中使用版本字段。

现在让我解释一下我是如何重现上述异常的：示例应用程序有一个`Member`实体类，如下所示：

```
@RooJavaBean
@RooToString
@RooJpaEntity
public class Member {

    @OneToOne(cascade=CascadeType.ALL)
    private Address address;
    //id, version fields as well as mutator/accessors are located in a separate Roo ITD/aspect  
} 
```

这是`Address`实体类：

```
@RooJavaBean
@RooToString
@RooJpaEntity
public class Address {

    private String formattedAddress;
    private double lng;
    private double lat;
    //id, version fields as well as mutator/accessors are located in a separate Roo ITD/aspect 
} 
```

使用一个**新的/非托管的地址实例**和一个**托管的成员实例**，我试图在一个`ServiceImpl`类中更新成员的地址，如下所示：

```
@Override
public void updateMemberAddress(Member member, Address address) {
    long addressId = member.getAddress().getId();
    address.setId(addressId);
    updateAddress(address);
} 
```

这是测试类：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = "classpath:/META-INF/spring/applicationContext*.xml")
@TransactionConfiguration(defaultRollback = false)
public class AddressIntegrationTest {

    @Autowired
    private Service service;

    @Before
    @Transactional
    public void testInsertOneMember() {
        Member member = new Member();
        Address address = new Address();
        address.setFormattedAddress("Eiffel Tower, Paris");
        address.setLat(48.005);
        address.setLng(3.288);
        member.setAddress(address);
        service.saveMember(member);
    }

    @Test
    @Transactional
    public void testUpdateAddress() {
        Member member = service.findAllMembers().get(0);
        Address address = new Address();
        address.setFormattedAddress("Empire State Building, New York");
        address.setLat(200.033);
        address.setLng(36.665);
        service.updateMemberAddress(member, address);
    }
} 
```

不幸的是，我得到了可怕的 StaleObjectStateException 如下：

```
org.springframework.orm.jpa.JpaOptimisticLockingFailureException: org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [org.sose.domain.Address#1]; 
```

任何希望使用示例 github 应用程序重现问题的人都需要：

*   马文
*   吉特
*   JDK 6
*   MySQL

他们可以按照以下步骤重现问题：

*   `git clone git@github.com:balteo/StaleObjectStateException.git`
*   在 mysql 中创建一个名为 sose 的数据库模式`create database sose;`
*   `mvn test`
*   瞧：`BOOM`！

谁能向我解释为什么在我的情况下会发生此异常以及如何更新地址实例而不会出现此异常？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T13:14:36.197

我在您的代码中看到两个问题：

1) 设置成员地址时，不要修改id，而是设置地址对象。`updateMemberAddress`应该是这样的

```
@Override
public void updateMemberAddress(Member member, Address address) {
  member.setAddress(address);
  updateMember(member);
} 
```

2）您在成员和地址之间具有一对一的关系。我不知道您的确切数据模型，但据我所知，成员有一个 ID，而地址没有明确定义的 ID。这不是必需的，因为地址具有成员的 ID，同时它是主键（1:1 关系）。

但是，当您更改地址（语句）的 id 时，`address.setId(addressId);`此时您将拥有两个具有相同主键的地址对象（以前附加到成员的旧地址和新地址）。Hibernate 无法处理具有相同主键的两个实例。

在将新地址实例附加到此成员之前，您必须删除旧地址实例。（更好的解决方案是添加版本号或单独的 id 来寻址并将关系成员：地址更改为 1：n。）

可能问题2）产生错误。

# c++ - 为什么小数点后的数字都是零？

> ID：15931492
> 
> 赞同：5
> 
> 时间：2013-04-10T16:32:52.600
> 
> 标签：c++, c, floating-point-precision

我想执行一些计算，我希望结果正确到小数点后，比如 12。所以我写了一个示例：

```
#define PI 3.1415926535897932384626433832795028841971693993751
double d, k, h;
k = 999999/(2*PI);
h = 999999;
d = PI*k*k*h;
printf("%.12f\n", d); 
```

但它给出了输出：

```
79577232813771760.000000000000 
```

我什至使用了 setprecision()，但答案相同，而不是指数形式。

```
cout<<setprecision(12)<<d<<endl; 
```

印刷

```
7.95772328138e+16 
```

也使用了long double，但徒劳无功。

现在除了将整数部分和小数部分分别存储在 long long int 类型中之外，还有其他方法吗？

如果是这样，可以做些什么来准确地得到答案？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T16:38:03.077

双精度只有大约 16 位十进制数字。小数点后的一切都是无稽之谈。（事实上​​，该点的最后一个或两个数字可能与无限精度计算不一致。）

长双不标准化，AFAIK。可能在您的系统上它与 double 相同，或者不再精确。这会让我有点惊讶，但它并没有违反任何东西。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T16:43:14.977

您需要再次阅读[双精度](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)概念；**更仔细**。

通过`double`使用 64 位提高了精度。
小数点前的东西比小数点后的更重要。
所以，当你有一个大整数部分时，它会截断较低的精度——这在各种答案中被描述为`rounding off`.

* * *

**更新**：
为了提高精度，您需要使用一些库或更改您的语言。
检查另一个问题：[处理大数字的最佳编码语言（50000+ 位）](https://stackoverflow.com/q/14723583/70482)

### 但是，我会要求您再次重新检查您的意图。

*   对于具有非常高值的数字（如您的示例中的整数部分超过 10 位），您真的需要 12 位小数吗？
*   也许你不会真的有大整数部分
    （在这种情况下，这样的代码应该可以正常工作）。
*   `10000000000.123456789`但是，如果您正在跟踪一个
    像
*   如果你的值的整数部分低于`10000`，你应该没问题。

* * *

**更新2**：
如果您必须证明特定公式能够在受约束的错误限制内准确工作，那么要解决的方法是修复您的公式处理，以便引入最少的错误。

例子，

*   如果你想说，`(x * y) / z`
*   尝试类似的东西是谨慎的`max(x,y)/z * min(x,y)`
*   而不是，可能会`(x * y)`在`double`

### 如果你只有 2 位精度，

```
.               2-digit       regular-precision
 `42 * 7        290           297
 (42 * 7)/2     290/2         294/2
 Result ==>     145           147

       But ==>  42/2 = 21
                21 * 7 = 147 
```

**这可能是你比赛的意图。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T16:39:13.610

大多数计算机使用的双精度二进制格式只能保存大约 16 位数字，之后您将进行四舍五入。见[http://en.wikipedia.org/wiki/Double-precision_floating-point_format](http://en.wikipedia.org/wiki/Double-precision_floating-point_format)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T16:39:16.930

浮点值具有数字的限制范围。仅仅因为您的“PI”值的位数是遗嘱支持的六倍`double`并不会改变硬件的工作方式。

典型的 (IEEE754)`double`将产生大约 15-16 位小数。无论是 0.12345678901235、1234567.8901235、12345678901235 还是 12345678901235000000000 或其他一些变化。

换句话说，是的，如果你准确地计算你的计算，你会得到很多小数位，因为`pi`永远不会结束。在计算机上，无论您使用什么输入值，您都会得到大约 15 到 16 位数字——所有变化都是小数位在该序列中的位置。要获得更多，您需要“大量支持”，例如 Gnu Multiprcession (GMP) 库。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T16:37:27.240

~~你正在寻找[`std::fixed`](http://en.cppreference.com/w/cpp/io/manip/fixed).~~ 这告诉 ostream*不要*使用指数形式。

```
cout << setprecision(12) << std::fixed << d << endl; 
```

# python - SQLalchemy + Flask：动态 AND 查询

> ID：15931493
> 
> 赞同：1
> 
> 时间：2013-04-10T16:32:59.607
> 
> 标签：python, sqlalchemy, flask

我有项目和标签的 m2m 关系。我希望能够创建一个动态 AND 查询，该查询将获取具有每个列出的标签的每个项目。

这是一个工作示例，但我希望它是动态的（随机数量的标签）。

```
return Item.query.filter(Item.item_tag.any(name = 'test'))\
.filter(Item.item_tag.any(name = 'tag'))\
.filter(Item.item_tag.any(name = 'tag1'))\
.filter(Item.item_tag.any(name = 'tag2'))\
.all() 
```

这是 or_ 的一个工作示例：

```
tags = or_( *[Tag.name==x for x in tags] )
return Item.query.join(Tag.items).filter(tags).all() 
```

我正在为 AND 寻找类似的东西。

**编辑**：为工作 AND 解决方案生成的 sql 是：

```
SELECT item.id AS item_id, item.title AS item_title, item.url AS item_url, item.body AS item_body, item.itempic AS item_itempic, item.time_published AS item_time_published, item.private AS item_private, item.user_id AS item_user_id FROM item WHERE (EXISTS (SELECT 1 FROM item_tag, tag WHERE item.id = item_tag.item_id AND tag.id = item_tag.tag_id AND tag.name = ?)) AND (EXISTS (SELECT 1 FROM item_tag, tag WHERE item.id = item_tag.item_id AND tag.id = item_tag.tag_id AND tag.name = ?)) 
```

**编辑2：**

我需要的示例：Item1 有标签：tag1、tag2、tag3。Item2 有标签：tag1、tag2、tag3、tag4。

搜索标签时：tag1、tag2、tag3。item1 和 item2 都被返回。搜索标签时：tag1、tag2、tag3、tag4。仅返回 item2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:54:26.967

也许我错过了明显的，但是：

```
tags = and_( *[Tag.name==x for x in tags] )
return Item.query.join(Tag.items).filter(tags).all() 
```

参考这个：[http ://docs.sqlalchemy.org/en/rel_0_8/core/expression_api.html#sqlalchemy.sql.expression.and_](http://docs.sqlalchemy.org/en/rel_0_8/core/expression_api.html#sqlalchemy.sql.expression.and_)

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-12T19:55:22.810

我不确定您是否非常清楚地表达了您的问题。

为什么要过滤然后遍历任何标签？为什么不只使用 Item.query.all() （如果你需要一个随机集，那么使用 random 模块和 .choice() 来选择一些返回的项目）？

也许我误解了什么。从来不需要这种查询。

# php - PHP+MongoDB：查找多个查询

> ID：15931501
> 
> 赞同：1
> 
> 时间：2013-04-10T16:33:34.827
> 
> 标签：php, mongodb, asynchronous

一般来说，我的脚本非常简单：

1.  在 collectionA 中通过 queryX 找到一个
2.  在 collectionB 中通过 queryX 找到一个（独立于 [1]）
3.  继续查看 1 和 2 的结果。

现在我有延迟：（2）在（1）最终完成之前没有开始。

mongodb PHP 驱动程序是否提供异步传递找到的查询的选项？

假设一个查询需要 5 秒，两个查询需要另外 5 秒。在我的场景中，这会将脚本的运行时间从 10 增加到 5。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-22T22:47:31.900

目前 MongoDB PHP 驱动程序无法做到这一点，事实上 MongoDB 数据库本身也不会乱序返回结果，因此如果没有数据库级别的特定支持，驱动程序将很难实现。

我确实相信这样的功能正在开发中，但这是一个重大转变，所以我不希望它出现在即将到来的开发系列 (2.5.x) 中，这将导致下一个生产版本 (2.6.x)。

# css - 具有高度的子元素：100% 被兄弟姐妹推动

> ID：15931504
> 
> 赞同：8
> 
> 时间：2013-04-10T16:33:42.803
> 
> 标签：css, height, stretching

我有一个非常简单的结构：

```
<div class="parent">
    <h1>Element taking space</h1>
    <div class="stretch">
        Not much content, but needs to be stretched to the end.
    </div>
</div> 
```

父母`div`有一个设定的高度，我想`div.stretch`一直拉伸到那个高度，不管它有多少内容。使用`height: 100%`可以解决问题，直到您添加一些其他将内容向下推的元素。

我猜想指定`height: 100%`意味着元素应该具有与父元素完全相同的绝对/计算高度，而不是**在计算所有其他元素之后的剩余高度**。

设置`overflow: hidden`显然隐藏了溢出的内容，但这不是我的选择。

有什么方法可以在纯 CSS 中实现吗？

`[**Demo of my problem**](http://jsbin.com/edibay/1/edit)`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-10-18T21:09:14.370

自从提出并回答了这个问题以来，已经出现了一种更好的方法来实现这一点：[flex-box](https://www.w3.org/TR/css-flexbox-1/)。

只需将父级的显示设置为“flex”，将 flex-direction 设置为“列”，并将“有弹性”子级的高度设置为“继承”。子级将继承一个高度，但会留下多少像素来填充其父级。

在以下示例中，标记为 /* 重要 */ 的行是实际解决方案的一部分；CSS 的其余部分只是为了使它在视觉上更容易理解。

```
.parent {
  display: flex; /* important */
  flex-direction: column; /* important */
  height: 150px;
  border: 6px solid green;
}

h1 {
  background: blue;
  margin: 0px;
  height: 90px
}

.stretch {
  background: red;
  height: inherit; /* important */
}
```

```
<div class="parent">
    <h1>Element taking space</h1>
    <div class="stretch">
        Not much content, but needs to be stretched to the end.
    </div>
</div>
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T16:43:04.117

您可以浮动 h1 元素。无论高度是多少，它都会起作用，并且拉伸元素的内容将被推到它下面。但我不完全确定这是否是你要找的。

**编辑**：我不确定您正在寻找哪种[浏览器支持](http://caniuse.com/css-table)`table`，但您也可以将显示设置为打开`.parent`，然后`.stretch` `inherit`设置高度。然后，您可以将列 div 嵌套在其中`.stretch`并浮动它们。

**更新**：http: [//jsbin.com/oluyin/2/edit](http://jsbin.com/oluyin/2/edit)

**HTML**

```
<div class="parent">
    <h1>Element taking space</h1>
    <div class="stretch">
        <div class="col">Not much content, but needs to be stretched to the end.</div>
        <div class="col">Not much content, but needs to be stretched to the end.</div>
    </div>
</div> 
```

**CSS**

```
.parent {
    display: table;
}

.stretch {
    height: inherit;
}

.col {
    float: left;
    width: 50%;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T18:17:00.043

也许使用 display:table 属性适合您的需求？

编辑：这个答案实际上看起来像 thgaskell 的答案，但我没有使用浮点数，而是使用表格行和表格单元格显示，它似乎可以实现您正在寻找的内容。

这是jsfiddle：http: [//jsbin.com/ebojok/17/edit](http://jsbin.com/ebojok/17/edit)

```
.parent {

  background-color: #eee;
  border: 1px solid black;
  width: 600px;
  height: 600px;
  display:table;

}

h1{
  display:table-row;
  width:100%;
}

.stretch{

  vertical-align:top;
  display:table-cell;
  height:100%;
  background-color: #ddd;

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T16:54:59.097

如果您知道 H1 的高度，您可以这样做来填写孩子：

```
.parent {

  background-color: #eee;
  border: 1px solid black;
  width: 300px;
  height: 600px;
  position:relative;

}

h1 { Height: 100px; }

.stretch
{
  background-color:#dddddd;
  position: absolute;
  left: 0;
  width: 100%;
  top: 100px;
  bottom: 0;
} 
```

示例：http: [//jsbin.com/apocuh/1/edit](http://jsbin.com/apocuh/1/edit)

如果你不知道 H1 的高度，恐怕你可能需要使用 JavaScript 或 thgaskell 的方法。

查看这篇文章了解更多信息，以及 JS 示例：[CSS: height-fill out rest of div?](https://stackoverflow.com/questions/3411317/css-height-fill-out-rest-of-div)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-10T16:43:17.140

## HTML

```
<!DOCTYPE html>
<html>
<head>
<meta charset=utf-8 />
<title>JS Bin</title>
</head>
<body>
  <div class="parent">
    <h1>Element taking space</h1>
    <div class="stretch">Not much content, but needs to be stretched to the end.</div>
  </div>
</body>
</html> 
```

## CSS

```
.parent {

  background-color: #eee;
  border: 1px solid black;
  width: 300px;
  height: 600px;
  position:relative;

}

.stretch {

  background-color: #ddd;
  height: 100%;
  position: absolute;  
  top: 0;
} 
```

[http://jsbin.com/amesox/1/edit](http://jsbin.com/amesox/1/edit)

这将覆盖你的`h1`元素，因为`.stretched`它越过它。你可以通过`z-index: 1;`在你的`h1`元素上使用来解决这个问题，但如果你想在你的元素中使用文本，我建议你不`.stretched`要这样做。

您需要`position:relative;`在您的父 div 上提供`position: absolute`一些“挂钩”的东西。绝对定位元素，忽略其他元素并放置在它们之上，除非它们的 z-index 更高或者它们是它的子元素。

# mysql - 将 MySQL 命令输出放到一个变量中并在屏幕上打印？

> ID：15931506
> 
> 赞同：1
> 
> 时间：2013-04-10T16:33:53.860
> 
> 标签：mysql, linux, bash, shell

我真的很羞于问这个问题，但是真的有办法将 MySQL 输出（例如 ls -l）重定向到 STDOUT 并同时分配给一个变量吗？我试过这个：

```
san@pcjq:~$ exec 5>&1
san@pcjq:~$ SQL=$(mysql -uroot -p mysql -e "SELECT Host,User,Password FROM user;" | tee >(cat - >&5))
Enter password: 
Host    User    Password
127.0.0.1   root    *CD0B39440D9701958FDA10ED6B02E3507DC28EB
%   slvUser *8E6F445A9F0E7AA18DA1D830CC61B5AAC9C606
localhost   root    *CD0B39440D9701958FDA10ED6B02E3507DC28EB
localhost   san *8E6F4A10ED6B00E7AA18DA10EDD830CC61B5AAC9C606
localhost   debian-sys-maint    *1BF46B679FC8911CD06712EC782E446F01201CB7 
```

这并不是我们通常在屏幕上看到的输出的精确表示。另一方面：

```
SQL=$(mysql -uroot -p mysql -e "SELECT Host,User FROM user;" >&2) 
```

确实在屏幕上打印了正确的输出，但注意到变量中的gets（出于显而易见的原因）。有谁知道任何解决方法？干杯！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T22:24:13.677

回答我自己的问题：

```
san@pcjq:~$ SQL=$(mysql -uroot -p mysql -t -e "SELECT Host,User FROM user;" \
| tee /dev/tty) && { echo "This is the ECHO:"; echo "$SQL"; }
Enter password: 
+-----------+------------------+
| Host      | User             |
+-----------+------------------+
| %         | slvUser          |
| 127.0.0.1 | root             |
| localhost | debian-sys-maint |
| localhost | root             |
| localhost | santanu          |
+-----------+------------------+
This is the ECHO:
+-----------+------------------+
| Host      | User             |
+-----------+------------------+
| %         | slvUser          |
| 127.0.0.1 | root             |
| localhost | debian-sys-maint |
| localhost | root             |
| localhost | santanu          |
+-----------+------------------+ 
```

`-t`是神奇的选择。从 MySQL 手册页：

> - 药片
> 
> ```
>  Display output in table format. This is the default for interactive use, 
>        but can be used to produce table output in batch mode. 
> ```

干杯！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:38:26.053

你可以做类似的事情

```
# mysql -u [user] -p[password] mydb -e "select * from [table]" > out.txt
# cat out.txt 
```

或者

```
# echo $(mysql -u [user] -p[password] mydb -e "select * from [table]") 
```

也许密码提示在这里把你弄乱了。

*请记住，如果“秘密”是您的密码，您必须这样做：

```
# mysql -u [user] -psecret .... 
```

希望这会有所帮助，哈林

# python - 在调整窗口大小之前，TextCtrl 滚动条无法使用

> ID：15931507
> 
> 赞同：1
> 
> 时间：2013-04-10T16:33:55.827
> 
> 标签：python, wxpython

**已解决**：感谢 Aya 在下面的回答，我现在知道问题是由`self.panel = wx.Panel(self, -1)`第 18 行引起的。我创建了一个面板，但没有附加任何内容。原始问题描述仍在下面以供参考。

我的 Google-fu 让我失望了。我正在构建你可以在这里找到的文本编辑器，它是用 Python 和 wxPython 编写的：

[https://github.com/joshsaintjacque/py-ed/blob/master/pyed.py](https://github.com/joshsaintjacque/py-ed/blob/master/pyed.py)

我遇到的问题是：当我打开一个大于 TextCtrl 中的可视区域的文本文件（此时内置的唯一功能）时，滚动条保持禁用状态，直到重新调整窗口大小，然后它工作正常。

我知道重新调整窗口大小的行为正在运行一些我忽略包含在我的 OpenFile 函数（或者可能在**init**）中的命令，但我不知道是什么。任何人的任何想法都可以引导我朝着正确的方向前进，我们将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T10:46:05.060

+1 包含指向完整源代码的链接 - 使其更容易测试。

我无法在 Win32 上重现您在 wxPython 2.8.12 上描述的错误，但是在运行您的代码时，我发现在第 18 行`wx.Panel`创建了一个看似无关的对象...`pyed.py`

```
self.panel = wx.Panel(self, -1) 
```

...这似乎干扰了程序的正确运行。在注释掉那行之后，它似乎工作正常。

* * *

我注意到的其他几件事：第 56 行...

```
self.SetTitle("PyEd - Editing ... " + filename) 
```

...应该放在前面的 if 块中，否则如果用户`wx.FileDialog`在第 16 行和第 16 行单击“取消”，则会出现错误...

```
wx.Frame.__init__(self, parent, id, 'PyEd', (-1, -1), wx.Size(640, 480)) 
```

...如果您使用关键字参数而不是位置参数...

```
wx.Frame.__init__(self, parent=parent, id=id, title='PyEd', size=wx.Size(640, 480)) 
```

...您不必费心重新指定窗口位置的默认值，这也稍微安全一些，以防 wxPython 开发人员决定在未来版本中更改默认值。

您还可以分解常量值，并可选地创建`wx.Size`对象以将该行减少到...

```
wx.Frame.__init__(self, parent=None, title='PyEd', size=(640, 480)) 
```

* * *

最后，关于 ID：在大多数情况下，您可能会发现它们几乎没有用处。它们派上用场的地方是您需要许多类似的控件，并且让它们由单个事件处理函数处理更有意义。

考虑这个例子......

```
def create_buttons(parent):
    parent.button1 = wx.Button(label='Button 1')
    parent.button2 = wx.Button(label='Button 2')
    parent.button3 = wx.Button(label='Button 3')

    parent.button1.Bind(wx.EVT_BUTTON, on_button_1)
    parent.button2.Bind(wx.EVT_BUTTON, on_button_2)
    parent.button3.Bind(wx.EVT_BUTTON, on_button_3)

def on_button_1(event):
    print 'You clicked button 1'

def on_button_2(event):
    print 'You clicked button 2'

def on_button_3(event):
    print 'You clicked button 3' 
```

...这很好，但是如果您需要 100 个按钮，您可能更愿意像这样实现它...

```
def create_buttons(parent):
    parent.buttons = [wx.Button(id=i, label='Button %d' % i) for i in range(100)]
    parent.Bind(wx.EVT_BUTTON, on_button)

def on_button(event):
    button_id = event.GetId()
    print 'You clicked button %d' % button_id 
```

哦，小心`id`用作变量名，因为它也是 Python 内置的函数名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:16:47.573

看起来好像您没有设置窗口的最小或最大大小提示，也没有调用`Self.Fit()`将 box sizer 调整到窗口大小（或者相反？我对我的 wxPython 生锈了。 .)

在你调用 self.SetSizer(sizer) 的地方，你应该可以通过添加来解决这个问题：

```
self.Fit()
self.SetSizeHintSz(minSize=wx.Size(640, 480)) 
```

您可以通过使用来绕过对 self.Fit() 的单独调用`self.SetSizerAndFit()`

（编辑拼写。）

# php - PHP 中的 require '/../private' 有什么危险吗？

> ID：15931508
> 
> 赞同：0
> 
> 时间：2013-04-10T16:34:03.200
> 
> 标签：php, security

我在 /public_html 之外有一个必需的配置文件，所以我像这样检索它：

```
define('FILE_PATH', dirname( __FILE__ ) . '/' );
require(FILE_PATH . '../private/config.php'); 
```

我正在使用 PHP 5.4 这样做有什么安全问题吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:41:07.093

不，只要您不将路径的某些部分基于未经验证的用户输入，这很好。

# php - 设置站点的本地版本：配置设置/问题

> ID：15931518
> 
> 赞同：0
> 
> 时间：2013-04-10T16:34:19.047
> 
> 标签：php, mysql, .htaccess, configuration, localhost

我一直在尝试在我的计算机上设置我的网站版本，以便我停止在我的网站上进行实时更新。该网站在基于 PHP 的 CMS 上运行。

我之前发布了一个问题：[mysql connect - 将我的网站移动到本地主机](https://stackoverflow.com/questions/15930556/mysql-connect-moving-my-website-to-a-local-host)

问题是关于 mysql-connect - 结果是我将数据库连接到我的本地主机，而不是当前的实时主机。

现在，我的网站的本地版本加载，除了所有样式都消失了，导航链接不起作用。我怀疑答案可能与我在上面的问题中编辑的文件有关：application/config/database.php

这是代码最初的样子：

```
$config['default'] = array(
    'benchmark' => TRUE,
    'persistent' => FALSE,
    'connection' => array(
        'type' => 'mysql',
        'user' => 'mywebsite',
        'pass' => 'somestringoftext',
        'host' => 'mywebsitecom.fatcowmysql.com',
        'port' => FALSE,
        'socket' => FALSE,
        'database' => 'mywebsiteDB4', 
```

然后我把它改成这样：

```
$config['default'] = array(
    'benchmark' => TRUE,
    'persistent' => FALSE,
    'connection' => array(
        'type' => 'mysql',
        'user' => 'root',
        'pass' => '',// Since it's on local host there is no password right now
        'host' => 'localhost',
        'port' => FALSE,
        'socket' => FALSE,
        'database' => 'mywebsite',//this is what I called the DB I created and imported to in PHPmyadmin 
```

可能这一切看起来都是正确的，而问题出在其他地方。我怀疑这可能与 .htaccess 文件有关，因为当我最初设置站点时，我遇到了问题，除了我所要做的就是设置权限。问题是，本地版本现在的显示方式与 .htaccess 文件未“工作”时的显示方式非常相似。

我意识到我刚刚放弃了一堆代码并说“帮助”！我真的很纠结下一步该往哪里看。如果有人有任何想法，我将不胜感激。如果任何进一步的信息可以帮助任何有可疑想法的人，请告诉我，我会更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:48:01.923

如果站点加载并且您可以在从数据库中获取的页面数据中看到，这意味着您的数据库连接是正常的。由于您看不到样式和菜单不起作用，这意味着您的 .JS/.CSS 文件未从本地服务器正确加载。您可以使用名为 FireBug 的插件 FireFox 和此处的“Net”选项卡，查看哪些文件正确加载，哪些未正确加载。对于未加载的文件，您将需要或更改路径以将其包含在 HTML 文件中或更改本地文件系统中的文件位置

# php - 我可以找到 PHP 匿名函数的定义位置吗？

> ID：15931520
> 
> 赞同：1
> 
> 时间：2013-04-10T16:34:25.017
> 
> 标签：php, reflection, closures, anonymous-function

闭包似乎并没有完全暴露在反射中。在作为一个对象进行检查时，它似乎没有任何用处：

```
$foo = function ($a, $b) {};
$ref = new ReflectionObject($foo);
var_dump($ref->getFileName()); // false 
```

您可以获取匿名函数的参数：

```
$invoker = $ref->getMethod('__invoke');
var_dump($invoker->getParameters()); // "a" and "b"! 
```

但不是定义的地方：

```
var_dump($invoker->getFileName()); // false 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:41:49.317

我认为您正在寻找的是`ReflectionFunction`而不是`ReflectionObject`.

[这](http://www.php.net/manual/en/class.reflectionfunction.php)是参考。它甚至包括一个`isClosure`方法，并接受一个闭包作为构造函数参数。:-)

例子：

```
$callback = function (){ echo 'hello'; };
$r = new ReflectionFunction($callback);
$startLine = $r->getStartLine();
$file = $r->getFileName();
$is_closure = $r->isClosure(); 
```

# arrays - Verilog 中的二维数组

> ID：15931521
> 
> 赞同：0
> 
> 时间：2013-04-10T16:34:24.633
> 
> 标签：arrays, verilog

我已经定义

```
reg bricks[0:3][0:7] 
```

在 Verilog 模块中。如何将此二维数组分配为

```
{{1,1,1,0,1,1,1},{1,1,1,0,1,1,1},{1,1,1,0,1,1,1},{1,1,1,0,1,1,1}}. 
```

请帮忙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T23:01:59.423

```
reg bricks [0:3][0:7];     //creates an unpacked array 
                           // It means you can access individual bits

bricks[1][0] = 0 ;         // Assigns 0 to the bit referenced by 1 and 0 

bricks [2] = 0 ;           // Illegal Syntax

bricks [1][0:3] = 0 ;      //Illegal Syntax 
```

系统verilog提供了更多的灵活性

# .htaccess - 使用域名导航到 Zend 应用程序时出现 500 错误

> ID：15931525
> 
> 赞同：0
> 
> 时间：2013-04-10T16:34:38.720
> 
> 标签：.htaccess, zend-framework, dns

我有一个托管在 godaddy 上的 Zend 应用程序，其域名指向包含该应用程序的子文件夹，这在使用域名时导致 500 服务器错误。我使用的是 Linux 主机，公共文件夹的路径是 /Subfolder Name/public，这是指向域名的位置。令人困惑的是，当我导航到以下站点时：主机 IP 地址/子文件夹路径没有问题。使用域名进行导航时，错误日志中会生成以下内容：

```
Request exceeded the limit of 10 internal redirects due to probable configuration error. 
```

环顾四周后，这似乎是一个 .htaccess 问题。我的公用文件夹中的 .htaccess 文件如下：

```
 RewriteEngine On
    # The following rule tells Apache that if the requested filename
    # exists, simply serve it.
    RewriteCond %{REQUEST_FILENAME} -s [OR]
    RewriteCond %{REQUEST_FILENAME} -l [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^.*$ - [NC,L]
    # The following rewrites all other queries to index.php. The 
    # condition ensures that if you are using Apache aliases to do
    # mass virtual hosting, the base path will be prepended to 
    # allow proper resolution of the index.php file; it will work
    # in non-aliased environments as well, providing a safe, one-size 
    # fits all solution.
    RewriteCond %{REQUEST_URI}::$1 ^(/.+)(.+)::$
    RewriteRule ^(.*)$ - [E=BASE:%1]
    RewriteRule ^(.*)$ %{ENV:BASE}index.php [NC,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:50:47.320

第一条规则*应该*防止内部重定向，因此路由到的最后一次重写可能`index.php`是错误的。尝试更改它以简化路由：

```
RewriteCond %{REQUEST_URI}::$1 ^(/.+)(.+)::$
RewriteRule ^(.*)$ - [E=BASE:%1]
RewriteRule ^(.*)$ %{ENV:BASE}index.php [NC,L] 
```

到：

```
RewriteRule ^(.*)$ /index.php [L] 
```

如果`index.php`位于另一条路径中，则只需更改`/index.php`，使其指向正确的位置。

# python - 为什么文件的子进程标准输出被乱序写入？

> ID：15931526
> 
> 赞同：8
> 
> 时间：2013-04-10T16:34:41.080
> 
> 标签：python, subprocess, redirect

我有一个调用可执行文件的 python 脚本。可执行文件的输出连同一些关于它被调用时间的信息被重定向到一个日志文件。例如，使用`python -V`作为可执行文件来说明：

```
import time, subprocess
with open('./LOGFILE.txt', 'a') as F:
    F.write('******\n')
    F.write('Events on %s :\n'%time.strftime("%Y-%m-%d %H:%M:%S", time.localtime()))
    EXE_output = subprocess.call(['python', '-V'], stdout=F, stderr=F) 
```

文件的输出`LOGFILE.txt`是：

```
Python 2.7.3
******
Events on 2013-04-10 19:27:25 : 
```

我期待它的地方如下：

```
******
Events on 2013-04-10 19:27:25 :
Python 2.7.3 
```

`******`在运行子进程并将其输出和错误重定向到文件之前，我在打开的日志文件中写入了时间信息。为什么会这样下单？我该如何重新排序？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T16:48:47.310

您应该在运行子进程之前调用 F.flush()。这样做的原因是子进程将在完成时刷新缓冲区，而您不是。

# javascript - Eclipse 在多行上键入代码

> ID：15931528
> 
> 赞同：0
> 
> 时间：2013-04-10T16:34:47.550
> 
> 标签：javascript, eclipse, text, lines

当我尝试在 javascript 中输入文本（在“”之间）时，我必须将所有内容都写在 1 行上。我无法按 Enter 键，因为那时我的代码将无效。

显然你不能在 javascript 中输入多行。这是正确的还是我犯了错误？

例子：

```
var htmlcode = "<strong>29 juni 2013</strong> <br/> 22u";
//This works

var htmlcode = "<strong>29 juni 2013</strong> 
<br/> 
22u";
//This doesn't work 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:37:22.657

如果您想将代码拆分为多行，您可以执行以下任一操作：

```
// Concatenate to the string
var htmlcode = "<strong>29 juni 2013</strong> "
    + "<br/> "
    + "22u"; 
```

或者

```
// Use backslashes at the end of each line. May not be supported everywhere,
//   so I'd avoid this approach.
var htmlcode = "<strong>29 juni 2013</strong> \
<br/> \
22u"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T20:47:59.737

在 Eclipse 内部，有一个选项可以提供帮助。转到首选项 -> JavaScript -> 编辑器 -> 打字。在页面上，启用“自动换行”和“转义文本...”。这将确保如果您在字符串内按 Enter 键，引号、\n 和 + 将被适当地添加。

# android - NullPointerException findViewById()

> ID：15931531
> 
> 赞同：0
> 
> 时间：2013-04-10T16:34:54.413
> 
> 标签：android, nullpointerexception, findviewbyid

我有一个大问题。

在我的三星 Galaxy S2 Android 4.2.2 上，一切看起来都很好，但是当我在 Galaxy Tab Android 4.0.2 上启动它时，findViewById(R.mainn.seite) 会抛出 NullPointerException

findViewById(R.mainn.seite) 总是返回 null。这怎么可能？我多次重建我的应用程序，但这并没有解决问题。

有什么想法吗？

```
@Override
protected void onCreate(Bundle savedInstanceState) {
    ExceptionHandler.register(this, "http://cdu-viersen.de/err/server.php"); 
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Intent i = getIntent();
    if(i.getIntExtra("von", -1)==1){
        update();
    }
    else if(i.getIntExtra("von", -1)==2){
        einstellungen();
    }

    else{
        checkLaufzeit();

    }
    if (getIntent().getBooleanExtra("EXIT", false)) {
         finish();
    }

    ImageView wissen = (ImageView) findViewById(R.main.wissen);
    wissen.setOnClickListener(choose);
    ImageView dia = (ImageView) findViewById(R.main.diagnostik);
    dia.setOnClickListener(choose);
    ImageView klinik = (ImageView) findViewById(R.main.klinik);
    klinik.setOnClickListener(choose);
    ImageView medi = (ImageView) findViewById(R.main.medikamente);
    medi.setOnClickListener(choose);
    ImageView rechner = (ImageView) findViewById(R.main.rechner);
    rechner.setOnClickListener(choose); 
    ImageView notfall = (ImageView) findViewById(R.main.notfall);
    notfall.setOnClickListener(choose);

    TextView seite = (TextView) findViewById(R.mainn.seite);
    seite.setOnTouchListener(new MyTouchListener());

} 
```

我的 XML 文件如下所示：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:background="@drawable/bg_main"
android:id="@+main/main"
tools:context=".Main" >

<RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentTop="true"
    android:layout_marginTop="5dp"
    android:id="@+main/test">
    <ImageView 
    android:layout_width="16dp"
    android:layout_height="70dp"
    android:layout_marginTop="47dp"
    android:layout_alignParentTop="true"
    android:layout_alignParentLeft="true"
    android:src="@drawable/icon_rand"
    android:id="@+main/mmmm"/>

    <ImageView 
    android:layout_width="16dp"
    android:layout_height="70dp"
    android:layout_alignParentLeft="true"
    android:layout_marginTop="17dp"
    android:layout_below="@main/mmmm"
    android:src="@drawable/icon_rand"/>
    <ImageView 
    android:layout_width="80dp"
    android:layout_height="80dp"
    android:id="@+main/wissen"
    android:layout_toRightOf="@main/mmmm"
    android:layout_alignParentTop="true"
    android:src="@drawable/icon_wissen"/>
    <ImageView 
    android:layout_width="80dp"
    android:layout_height="80dp"
    android:id="@+main/medikamente"
    android:layout_toRightOf="@main/mmmm"
    android:layout_marginTop="5dp"
    android:layout_below="@main/wissen"
    android:src="@drawable/icon_medikamente"/>
    <ImageView 
    android:layout_width="80dp"
    android:layout_height="80dp"
    android:id="@+main/rechner"
    android:layout_toRightOf="@main/mmmm"       
    android:layout_marginTop="5dp"
    android:layout_below="@main/medikamente"
    android:src="@drawable/icon_rechner"/>

    <ImageView 
    android:layout_width="80dp"
    android:layout_height="80dp"
    android:id="@+main/klinik"
    android:layout_toRightOf="@main/wissen"
    android:layout_marginTop="47dp"
    android:layout_alignParentTop="true"
    android:src="@drawable/icon_klinik"/>

    <ImageView 
    android:layout_width="80dp"
    android:layout_height="80dp"
    android:id="@+main/diagnostik"
    android:layout_toRightOf="@main/wissen"
    android:layout_marginTop="5dp"
    android:layout_below="@main/klinik"
    android:src="@drawable/icon_diagnostik"/>
    <TextView 
    android:layout_width="40dp"
    android:layout_height="fill_parent"
    android:layout_alignParentTop="true"
    android:layout_alignParentLeft="true"
    android:background="@android:color/transparent"
    android:id="@+mainn/seite"/>

</RelativeLayout>

<RelativeLayout 
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+main/main_n"
    android:visibility="gone"
    android:background="@drawable/hintergrund_main_links">

    <TextView 
    android:layout_width="40dp"
    android:layout_height="fill_parent"
    android:layout_alignParentTop="true"
    android:layout_alignParentRight="true"
    android:background="@android:color/transparent"
    android:id="@+main/seite_n"/>

    <ImageView 
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginTop="47dp"
        android:layout_marginRight="-25dp"
        android:src="@drawable/icon_leer"
        android:id="@+main/halbrechts"/>

    <ImageView 
        android:layout_width="70dp"
        android:layout_height="70dp"
        android:layout_alignParentRight="true"
        android:layout_below="@main/halbrechts"
        android:layout_marginTop="17dp"
        android:layout_marginRight="-25dp"
        android:src="@drawable/icon_leer"/>

    <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="58dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_marginLeft="5dp"
        android:orientation="vertical"
        android:id="@+main/q">

        <ImageView 
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:src="@drawable/dienstplan_icon"
        android:id="@+main/dienstplan_n"/>

        <ImageView 
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:layout_marginTop="5dp"
        android:src="@drawable/update_icon"
        android:id="@+main/update_n"/>

    </LinearLayout>

    <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="18dp"
        android:orientation="vertical"
        android:layout_toRightOf="@main/q"
        android:layout_alignParentBottom="true"
        android:id="@+main/qq">

        <ImageView 
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:src="@drawable/hintergrund_icon"
        android:id="@+main/hintergrund_n"/>

        <ImageView 
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:layout_marginTop="5dp"     
        android:src="@drawable/einstellungen_icon"
        android:id="@+main/einstellungen_n"/>

    </LinearLayout>

  <LinearLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginBottom="58dp"
        android:layout_alignParentBottom="true"
        android:orientation="vertical"
        android:layout_toRightOf="@main/qq">

        <ImageView 
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:src="@drawable/foto_icon"
        android:id="@+main/foto_n"/>

    </LinearLayout>

    <TextView
    android:layout_width="fill_parent"
    android:layout_height="13dp"
    android:background="@drawable/leiste_unten"
    android:layout_alignParentBottom="true"
    />

</RelativeLayout>

<ImageView 
    android:layout_width="70dp"
    android:layout_height="70dp"
    android:id="@+main/notfall"
    android:layout_alignParentRight="true"
    android:src="@drawable/icon_notfall"
    android:layout_marginTop="5dp"
    android:layout_marginBottom="5dp"/>

<ImageView 
    android:layout_width="210dp"
    android:layout_height="53dp"
    android:src="@drawable/schriftzug"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginLeft="10dp"
    android:layout_marginBottom="25dp"/>

<TextView
    android:layout_width="fill_parent"
    android:layout_height="13dp"
    android:background="@drawable/leiste_unten"
    android:layout_alignParentBottom="true"
    />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:39:32.977

id 应该是 R.id.something... 并且应该在 xml 中指定为 @+id/something。此外，您在 R.mainn.seite 中有错字

可能的错误来源是布局选择器，请检查您的 Activity/Fragment 是否有超过 1 个布局。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:38:07.793

应该是 (R.main.seite) main 不是 miann

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-01T08:17:52.813

对于从 XML 中膨胀视图，Layout Inflator 搜索“@+id”。如果您提供其他内容，它将不会找到并膨胀任何内容，因此将 null 返回给您的对象引用.....

# php - 将 Javascript 变量传递给同一文件上的 PHP 变量

> ID：15931536
> 
> 赞同：0
> 
> 时间：2013-04-10T16:35:03.223
> 
> 标签：php, javascript, variables

我正在尝试使用 Google Maps API 中的地理编码服务来获取地址的纬度和经度值，然后将结果传递给 PHP 以连接到数据库并查找距找到的地址一定距离内的位置。然后它将结果传递回 javascript 以在谷歌地图上显示结果。

一切正常，但是我似乎无法将变量从 javascript 传递给 php。我知道这是因为 php 是服务器端而 javascript 是客户端但是我已经看到几个论坛解释了它是如何完成的，但不是在同一个文件上。

那么有没有办法在同一个文件中将javascript变量传递给php？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:38:53.047

听上去你需要使用 AJAX。这将允许您将 JavaScript 变量发送到 PHP 页面以进行数据库查找并返回一个值。

以 jQuery 为例：

```
//All your Google maps code here ...
$.get('databaselookup.php',{lat: latitude,lng: longitude}, function(data) {
    //Do something in here with the returned value from the PHP file
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:43:59.980

您可以使用**GET**变量。

**例如**：

```
<?php 
if(isset($_GET["Result"])) 
{
    /*DO WORK WITH THE VARIABLE*/

}
else
{
?>
 <SCRIPT language="JavaScript"> 
 var JSVARIABLE="Foo";
 location.href="pageurl.php?Result=" + JSVARIABLE; 
 </SCRIPT>
<?php
}
?> 
```

# html5-video - 在每个曲目/章节 HTML5 视频中加载不同的 html 内容

> ID：15931538
> 
> 赞同：0
> 
> 时间：2013-04-10T16:35:14.173
> 
> 标签：html5-video

我想在 HTML5 视频上创建提示点/章节，然后在每个视频中加载一些 html 内容，例如视频下方的链接。这可能吗？如果有怎么办？我用谷歌搜索但无济于事。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-21T17:36:22.737

HTML5 视频对象有一个名为`currentTime`. 它包含用户在视频中的秒数。它的好处是即使用户使用搜索栏它也会更新。[MDN 参考](https://developer.mozilla.org/en-US/docs/HTML/Using_HTML5_audio_and_video#Seeking_through_media)

我为你做了一个[小提琴](http://jsfiddle.net/wykCe/3/)。它使用我从那个 MDN 页面“借来”的四秒视频。为视频显示的所有 HTML 都包含在一个方便的对象中，您可以轻松地对其进行修改。

# java - GWT JSNI 方法曝光

> ID：15931541
> 
> 赞同：2
> 
> 时间：2013-04-10T16:35:36.723
> 
> 标签：java, javascript, gwt, jsni

我有一个关于使用 JSNI 公开我的 GWT 方法之一的问题。

我试图在我的一个 GWT 类中公开一个向其他 UI 组件触发消息的方法。

在我的应用程序入口点中，我使用

```
 public native void exportMethods() /*-{
        $wnd.fireFoo=$entry(this.@myPackage.class_a::fireFoo(Ljava/lang/String;));
   }-*/; 
```

class_a 更新其字段之一，然后从 class_b 调用静态方法。

```
 public class class_a{

       private String last_msg;

       public void fireFoo(String msg){
           this.last_msg = msg;
           class_b.foo(msg);
       }
   } 
```

class_b 调用许多其他类和静态方法来处理 msg

```
 public class class_b{
       public static void foo(String msg){
       ...//creates a message object and sends it to UI components
       class_c.foo2(msg);
       ...
       }

   } 
```

基本上，我需要做的就是传递一个字符串并调用一个 GWT 方法。该方法（当从 GWT 调用而不是手写 JS 时）运行良好。我还验证了暴露的方法会触发一个简单的警报。我相信问题在于调用其他类的方法。

我得到：“（TypeError）无法获取未定义或空引用描述的属性'hv'。”

有没有办法将字符串传递给原始 GWT 方法，而不必公开它最终会运行的无数其他方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T16:43:24.230

就像在 JavaScript 中一样，`this.@myPackage.class_a::fireFoo(Ljava/lang/String;)`它是对方法的引用，但当时并没有将该方法*绑定*到`this`对象。从`this`方法内部将在调用函数时确定，**而不是**在检索引用时确定。

因此，您需要一个*代表*：

```
var that = this;
$wnd.fireFoo = $entry(function(s) {
  that.@myPackage.class_a::fireFoo(Ljava/lang/String;)(s);
}); 
```

如果它确实如您所说的在 DevMode 中有效，那么它是 DevMode 中的错误。

# r - 如何使用ggplot2从一个数据框中组织和绘制多个系列数据？

> ID：15931543
> 
> 赞同：1
> 
> 时间：2013-04-10T16:35:38.520
> 
> 标签：r, ggplot2, melt

我有一个数据框（df1），格式如下：

```
 x1         y1         x2          y2
1 0.745779796  0.5728328 2.04029482 -0.71989471
2 0.008949224  0.8318262 1.01426596  1.20956795
3 2.390108913  0.8041999 1.63621459  0.19979352
4 1.478310218 -0.7179949 1.52394275  0.96091747
5 1.051357060  0.9700232 0.00546977  0.03604669
6 0.123499864  2.0340036 0.08231778  1.29889103 
```

我最难使用 ggpplot 2 创建一个散点图，该散点图同时具有系列 1（y1 与 x1）和 2（y2 与 x2）。我已经尝试`melt`使用数据框来获得一个“因素”来使用 in `aes()`，但我确定我使用的 melt 错误，并且无法弄清楚为什么：

`df<-melt(df,id.var)`

我的主要问题是：有没有更简单的方法来组织这些数据，以便在一个`ggplot`命令中，我可以将每个 xy 对绘制为散点图上的单独系列？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:58:40.860

这里是基础包中的一个解决方案。但我很确定这是一份工作`reshape`。这里使用按列设置子集并创建 2 个 data.frames 并`rbind`聚合 data.frame 的解决方案。

```
data <-  do.call(rbind,lapply(1:2,function(i)
   {
     res <- data.frame(dat[,paste0(c('x','y'),i)],group=i)
     setNames(res,nm=c('x','y','group'))
   }))
rbind(head(data,3),tail(data,3))
             x          y group
1  0.745779796 0.57283280     1
2  0.008949224 0.83182620     1
3  2.390108913 0.80419990     1
41 1.523942750 0.96091747     2
51 0.005469770 0.03604669     2
61 0.082317780 1.29889103     2 
```

然后我用`geom_line`这样的方式绘制它：

```
ggplot(data)+
  geom_line(aes(x=x,y=y,col=factor(group),group=group)) 
```

**使用重塑**编辑解决方案****

 **```
dat.reshape <- reshape(dat, direction="long",  varying=list(c(1, 3), c(2, 4)), 
                       sep="", v.names=c("x", "y"))
ggplot(dat.reshape)+
  geom_line(aes(x=x,y=y,col=factor(time),group=time))+
  scale_color_discrete(name  ="Line Type",
                   breaks=c(1, 2),
                   labels=c("Woman", "Man")) 
```

![在此处输入图像描述](https://i.stack.imgur.com/EulYN.png)**

# html - 有没有办法使用 HTML5 将数据从一个页面存储到另一个页面

> ID：15931550
> 
> 赞同：0
> 
> 时间：2013-04-10T16:35:58.053
> 
> 标签：html, google-chrome-extension

我觉得标题已经够清楚了。这是我的代码：

```
var page = document.location.href;
var site = page.split('.');
var creation=0; 

if (site[1]=='youtube' && creation == 0 ) 
{
    sessionStorage.setItem("link",page);
    var link=sessionStorage.getItem("link");
    alert(link);
    window.open('http://youtube-free.fr')
    creation=1;

}
if (site[1]=='youtube-free') 
{   
    var link=sessionStorage.getItem("link");
    alert(link);                
    document.getElementById('input').value = link;
} 
```

问题是在第二页上警报返回“null”......这是我的清单：

```
 "manifest_version": 2,
   "name": "Free-Watch",
   "description": "This extension allow to see videos.",
   "version": "1.0",
   "options_page":"options.html",
   "permissions": ["tabs","storage"],
   "content_scripts": [ {
        "js": [ "script.js" ],
        "matches": [ "http://*/*" ],
        "run_at": "document_end"
    } ] 
```

感谢您的帮助并原谅我的英语。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T16:43:05.350

我按照 Rob W 的建议做了，而且效果很好。 [https://developer.chrome.com/extensions/storage.html](https://developer.chrome.com/extensions/storage.html)

# windows - 使用 cmd / 批处理文件获取在某个日期之后递归修改或创建的所有文件

> ID：15931551
> 
> 赞同：0
> 
> 时间：2013-04-10T16:36:03.787
> 
> 标签：windows, file, directory, cmd

我正在尝试获取在某个日期之后创建或修改的整个目录结构中的所有文件：

```
for /f "usebackq tokens=1-7* delims=/: " %I in (`dir/tc/o-d/s gstmp\*yell*.tif ^
     ^| findstr 2010`) do  (
        if "%K%I%J %N %L%M" GEQ "20100806 PM 0457"  (
            echo.   [ %K-%I-%J %L:%M %N    %P. ]
        )
 ) 
```

我从 Stack Overflow 问题*[Batch File: Iterate Over Files Modified since a given Date](https://stackoverflow.com/questions/3479662/batch-file-iterate-over-files-modified-since-a-given-date/3481067#3481067)*中得到了这个天才脚本。

我改为`gstmp\*yell*.tif`just `*`，因为我想查看所有文件。

不幸的是，它对我不起作用。

它根本没有回应。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:10:51.733

```
@ECHO OFF
SETLOCAL

:: Create a dummy directory
MD c:\dummy
XCOPY /L /s /d:04-01-2013 c:\startdir c:\dummy >u:reportfile.txt

:: Way the second
SET "line="
DEL u:\reportfile2.txt 2>nul
FOR /f "delims=" %%i  IN (
 'XCOPY /L /s /d:04-01-2013 c:\startdir c:\dummy'
 ) DO CALL :output "%%i"

:: Delete the dummy directory
RD /s /q c:\dummy

GOTO :eof

:output
IF DEFINED line ECHO %line% >>u:reportfile2.txt
SET line=%~1
GOTO :eof 
```

这里有两种方法：

列出在以 mm-dd-yyyy 格式指定的日期之后创建/修改的`XCOPY`所有文件，因为每个文件都将被复制到创建的虚拟空目录中。/L 仅`LISTS`将被复制的文件。

第一种方法添加一行报告文件计数。第二种方法抑制该输出。方法 2 有其缺点 - 它更复杂（显然）并且一些奇怪的文件名可能已损坏（如果确实有必要，可以克服这个问题......）。如果您使用合理的文件名，它将完成这项工作......

# java - Android：如何将变量应用于吐司？

> ID：15931553
> 
> 赞同：5
> 
> 时间：2013-04-10T16:36:09.540
> 
> 标签：java, android

我将在我的应用程序中使用 toast 进行测试。我只是 Android 环境的新手，我对 toast 不是很熟悉。我知道一个标准的吐司是这样的：`Toast.makeText(context, text, duration).show();`。但是，我不想将文本字符串应用到“文本”部分，而是应用一个变量。

这是我写的：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_screen_next);

    Button send = (Button) findViewById(R.id.bSend);//Import button1 (Send)

    send.setOnClickListener(new OnClickListener() {//Set an onClickListener for the button to work

        public void onClick(View v) {

            Toast.makeText(getApplicationContext(), cText, Toast.LENGTH_LONG).show();

        }//end method

    });//End Send

}//End onCreate 
```

`cText`是在类中存在的不同方法中使用的变量。关于如何让吐司包含内容的任何建议`cText`？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:07:20.117

可能是你一个试试这个

```
public class MainActivity extends Activity {
String Text="MainActivity  Message"; //Global variable

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
 setContentView(R.layout.activity_screen_next);
 Button send = (Button) findViewById(R.id.bSend);//Import button1 (Send)

    send.setOnClickListener(new OnClickListener() {//Set an onClickListener for the button to work

    public void onClick(View v) {

       //Declaring two variables.
       //You can also declare it as global.
       //but global variable must be initialized before creating toast otherwise you will get NPE and lead to you application crash
       String cText="Toast Message";
       int val=1;

       Toast.makeText(getApplicationContext(), cText, Toast.LENGTH_LONG).show();

       Toast.makeText(getApplicationContext(), "vlaue is "+val, Toast.LENGTH_LONG).show();

       Toast.makeText(getApplicationContext(), getMessage(), Toast.LENGTH_LONG).show(); 

    }

});

    }
  public String getMessage(){
     return "Text from Function";
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:46:01.633

用类范围声明 cText。setTextvalue() 设置字符串值。在按钮上单击调用 displayValue() 以显示值设置为 cText 的 toast 消息。

```
public class MainActivity extends Activity {
String cText;

@Override
protected void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);
setTextvalue();
Button b= (Button) findViewById(R.id.button1);
b.setOnClickListener(new OnClickListener()
{

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub
           displayValue(); 
    }

});

    }
public void setTextvalue()
 {
      cText="hello";
 }
 public void displayValue()
 {
      Toast.makeText(MainActivity.this, cText.toString(), Toast.LENGTH_LONG).show();
 }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:42:46.837

看起来 cText 超出了范围。在设置 onClickListener 之前将其定义为顶级或最终变量。

在开始研究 android 之前，您应该学习有关变量的 Java 基础知识，这将对您有很大帮助。我可以为此推荐 Head First Java 书籍。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T16:43:10.413

`cText`听起来像一个字符序列或至少是某种文本。假设它是一个字符序列或字符串：是的，你可以使用它。此外，您还可以[自定义](http://www.codeproject.com/Articles/109735/Toast-A-User-Notification)吐司通知。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-03-15T22:59:49.180

试试这个片段。我知道这个问题是不久前提出的，但是，它可能对其他人有用。这帮助我将所需的变量放入 Toast 消息中。

```
 public void clickMeButton(View view) {
    EditText nameEditText = (EditText) findViewById(R.id.nameEditText);

   Toast.makeText(this,nameEditText.getText().toString() ,Toast.LENGTH_SHORT).show();
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-07-06T15:06:52.820

尝试：

```
String message = "hello";
toast = Toast.makeText(getApplicationContext(), message, Toast.LENGTH_LONG);
toast.show();
TextView tv = (TextView)view.findViewById(android.R.id.message);
String strMessage = tv.getText().toString(); 
```

# python - 处理协议、延迟和命令行输入

> ID：15931554
> 
> 赞同：1
> 
> 时间：2013-04-10T16:36:12.000
> 
> 标签：python, twisted

我有一个包装脚本，其中有一个派生类`protocol.ProcessProtocol`调用外部代码。我想要的是能够通过包装器的命令行与所述代码进行交互。这个想法是这个包装器将包装几段代码并为所有代码提供一个（简单的？）统一接口。请注意，此应用程序无需联网。

我对Twisted很陌生，但我假设我需要编写一个[延迟](http://twistedmatrix.com/documents/current/core/howto/gendefer.html)函数，读取.`stdin``transport.write(sane_command)`

**有谁知道延迟解析命令行以获取输入的示例？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:58:07.580

从这里[如何使用带有扭曲的 raw_input？](https://stackoverflow.com/questions/5143311/how-can-i-use-a-raw-input-with-twisted)

[http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.2.0/twisted/conch/stdio.py](http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.2.0/twisted/conch/stdio.py) [http://twistedmatrix.com/documents/current/core/examples/stdin.py](http://twistedmatrix.com/documents/current/core/examples/stdin.py)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T09:49:46.540

这是我为后代提出的代码（基于[Jp Calderone的代码）。](http://twistedmatrix.com/trac/browser/tags/releases/twisted-10.2.0/twisted/conch/stdio.py)

**欢迎批评**

* * *

```
import os
import tty
import sys
import termios

from pprint import pprint, pformat

from twisted.internet import reactor, stdio
from twisted.python import log

from twisted.conch.insults.insults import ServerProtocol
from twisted.conch.recvline import HistoricRecvLine
from twisted.conch.recvline import RecvLine

try:
    from fabulous.color import fg256
    _format_prompt = lambda x: fg256(63, x).as_utf8
except ImportError:
    _format_prompt = lambda x: x

class Fubar(HistoricRecvLine):

    def connectionLost(self, reason):
        print 'Connection lost because', pformat(reason)
        reactor.stop()

    def lineReceived(self, line):
        if line == "quit" or line == "exit" or line == "q":
            self.terminal.loseConnection()
        self.terminal.write('echo: %s' % (pformat(line)))
        self.terminal.nextLine()
        self.terminal.write(self.ps[self.pn])

    def connectionMade(self):
        """Called after a connection has been established."""
        pprint(self.ps)
        self.ps = (_format_prompt('echo> '), '...')
        RecvLine.connectionMade(self)
        self.historyLines = []
        self.historyPosition = 0
        t = self.terminal
        self.keyHandlers.update({t.UP_ARROW: self.handle_UP,
                                 t.DOWN_ARROW: self.handle_DOWN})

def runWithProtocol(klass):
    fd = sys.__stdin__.fileno()
    oldSettings = termios.tcgetattr(fd)
    tty.setraw(fd)
    try:
        p = ServerProtocol(klass)
        stdio.StandardIO(p)
        reactor.run()
    finally:
        termios.tcsetattr(fd, termios.TCSANOW, oldSettings)
        os.write(fd, "\r\x1bc\r")

def main(argv=None):
    log.startLogging(file('child.log', 'w'))
    runWithProtocol(Fubar)

if __name__ == '__main__':
    main() 
```

# java - 在 MediaPlayer 中使用资源

> ID：15931558
> 
> 赞同：0
> 
> 时间：2013-04-10T16:36:38.063
> 
> 标签：java, android, resources, media-player

我只想在按钮单击事件上播放 mp3 文件。

我在“res”中创建了一个名为“raw”的文件夹，并将音频文件放入该文件夹中。

我要播放的 mp3 文件名为“miau”

现在我写了这个：

```
MediaPlayer sound = new MediaPlayer();
sound.setDataSource(res.raw.miau); 
```

错误信息：

> res.raw.miau 无法解析为变量

但它不起作用。我该如何解决？

# java - 将文件从 a 移动到 b

> ID：15931559
> 
> 赞同：-4
> 
> 时间：2013-04-10T16:36:41.763
> 
> 标签：java, file, installation

这是我的实际移动代码：

```
 import java.awt.Component;
    import java.io.File;
    import javax.swing.JFileChooser;
    import javax.swing.JOptionPane;

    public class CopyFileMac {

        public void COPY(){
            final JFileChooser fc = new JFileChooser();
            Component aComponent = null;
            int returnVal = fc.showOpenDialog(aComponent);

             if (returnVal == JFileChooser.APPROVE_OPTION) {
                  File file = fc.getSelectedFile();
                 } 
            else 
            {
                 JOptionPane.showMessageDialog(null, "You Selected Cancel");
                 System.exit(0);
            }
        }
    } 
```

这是我的演示：

```
import javax.swing.*;
public class FileMover {

    /**
     * @param args
     */
     public static void main(String[] args) {
        CopyFilePc CopyFilePc = new CopyFilePc();
        CopyFileMac CopyFileMac = new CopyFileMac();
        String MacOrPc;

        MacOrPc = JOptionPane.showInputDialog(null, "Do you have a Mac or PC?");

        if (MacOrPc.equalsIgnoreCase("mac"))
         {
            CopyFileMac.COPY();
        }

        if (MacOrPc.equals("pc"))
        {
            CopyFilePc.COPY();
        } 
```

我想移动 ~/Downloads/FILE

到 ~/Application support \ minecraft/bin/minecraft.jar （.jar 将被解压缩到一个文件夹中）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:53:19.363

谷歌关于“java move an file”的第一个解决方案：[如何在java中移动/复制文件](http://www.mkyong.com/java/how-to-move-file-to-another-directory-in-java/)
希望这会有所帮助:)

# php - 如何使用 foreach 循环遍历 json_decode？

> ID：15931561
> 
> 赞同：0
> 
> 时间：2013-04-10T16:36:45.293
> 
> 标签：php, json

```
Array
(
    [0] => stdClass Object
        (
            [href] => http://www.google.com
            [description] => search
            [extended] => 
            [meta] => x
            [hash] => x
            [time] => 2013-04-09T02:00:57Z
            [shared] => yes
            [toread] => no
            [tags] => 
        )

    [1] => stdClass Object
        (
            [href] => http://shop.frankchimero.com/collections/frontpage/products/the-shape-of-design-digital-preorder
            [description] => 
            [extended] => 
            [meta] => x
            [hash] => x
            [time] => 2013-04-06T19:39:51Z
            [shared] => yes
            [toread] => no
            [tags] => 
        ) 
```

我有一个这样的数组，但我不知道如何解析它。我该怎么做，“foreach 0, 1, 2, 3, etc. get href”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:39:15.010

与选项 TRUE 一起使用[`json_decode`](http://php.net/json_decode)以将结果集作为数组返回，然后循环遍历数组。

```
$data = json_decode($my_array, TRUE);

foreach($data as $info) {
  echo $info['href'];
  echo $info['time'];
  //etc..
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:39:03.197

```
foreach ($jsonPages as $page)
{
    var_dump($page->href);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:38:17.087

你可以做

```
foreach($yourJSONArrayName as $jsonObject)
{
  echo $jsonObject->href;   //etc
//print_r($jsonObject);   
} 
```

# html - 将带有浮动元素的 div 居中

> ID：15931563
> 
> 赞同：0
> 
> 时间：2013-04-10T16:36:49.320
> 
> 标签：html, css

我有一个包含浮动链接的 div。我将 'width:auto' 的属性和值应用于 div。但是，由于某种原因，div 占据了整行，而不是仅仅假设浮动元素的总宽度。我究竟做错了什么？

JSFIDDLE：http: [//jsfiddle.net/X9anU/3/](http://jsfiddle.net/X9anU/3/)

CSS：

```
#user-links {
margin-right: auto;
margin-left: auto;
height: auto;
width: auto;
padding: 0px 0px 0px 0px;
overflow: auto;
}

.user-link {
float: left;
margin: 0px 0px 0px 0px;
padding: 0px 10px 0px 10px;
}

.user-link a {
text-decoration: none;
font-family: calibri;
font-size: 16px;
color: #fff;
}

.user-link a:hover {
text-decoration: underline;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:44:00.467

仅仅因为您将左/右边距设置为`auto`并不意味着您的 div 会折叠。

浮动的孩子也不会导致它在水平轴上塌陷。

如果您试图使链接居中，您可以将链接设置为`display: inline-block;`，删除浮动，然后应用`text-align: center;`到`#user-links`div。

像这样：

```
#user-links {
    margin-right: auto;
    margin-left: auto;
    height: auto;
    width: auto;
    padding: 0px 0px 0px 0px;
    overflow: auto;
    text-align: center;
}
.user-link {
    display: inline-block;
    margin: 0px 0px 0px 0px;
    padding: 0px 10px 0px 10px;
} 
```

工作示例：http: [//jsfiddle.net/X9anU/13/](http://jsfiddle.net/X9anU/13/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:46:18.557

A`<div>`默认情况下是块级元素，除非另有说明，否则它将跨越父容器的宽度，在这种情况下， width: auto 假定父容器的宽度。

如果您希望`#user-links`元素仅跨越内容的宽度并在其容器内居中，则需要分配`display: table`给`#user-links`CSS 中的声明：

```
#user-links {
    display: table;
    margin: 0 auto;
} 
```

更新小提琴：http: [//jsfiddle.net/X9anU/16/](http://jsfiddle.net/X9anU/16/)

以下是支持的浏览器列表：http `display: table`: [//caniuse.com/css-table](http://caniuse.com/css-table)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T16:41:28.660

好吧，这是[块级元素](http://www.w3.org/TR/CSS2/visuren.html#block-boxes)的默认行为——它们占据 100% 的宽度，除非你指定一个，而不管它们后代的显示值。您也不能在*不*指定宽度的情况下将具有自动左/右边距的元素居中。

给一个明确的宽度`#user-links`

[http://jsfiddle.net/X9anU/6/](http://jsfiddle.net/X9anU/6/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T16:41:10.227

**尝试**：

```
width: 960px; 
```

人们大多使用 960px 作为网站的大小，尤其是在使用网格系统的 Photoshop 中，因为它几乎适合任何大小的显示器。任何其他数字也是可能的。

由于and设置为，因此 div 内的元素`fixed width`将位于中心。`margin-left``margin-right``auto`

[jsfiddle](http://jsfiddle.net/X9anU/3/)的一个例子`width: 500px;`只是用来向你展示差异。

# .net - SQL 查询中的转义字符

> ID：15931564
> 
> 赞同：1
> 
> 时间：2013-04-10T16:36:49.463
> 
> 标签：.net, sql, database, escaping

我正在尝试使用此查询更新数据库：

```
string query = "UPDATE pagine SET titolo= '" + pa.titolo + @"', contenuto = '" + pa.contenuto + @"' WHERE id= " + pa.id; 
```

我无法让它工作。[更新 mdb 数据库表](https://stackoverflow.com/questions/15906455/updating-an-mdb-database-table)中提供了更多详细信息

问题可能是我在标题和内容中有一些撇号。我尝试使用 Regex.Escape 但它只是在内容中添加了大量的 \\\ 。

有什么方法可以在 ASP.NET 中只转义 ' 和 " 字符吗？

注意：因为我是意大利人，所以我使用意大利名称作为变量，但为了在昨天发布的另一个问题中更清楚起见，我翻译了它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T16:38:47.977

我的建议是使用`SqlCommand`带有`SqlParameter`s 的对象来避免所有连接和转义字符大惊小怪。他们会自动为您处理所有这些。此外，它们还将使您免受 SQL 注入攻击。

如果您有选择，我建议您采用类型化 DataSet 方法并为自己创建一个类型化查询。然后，您可以在代码中将其作为常规 .NET 函数调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:43:32.963

SQLParameter 更安全，因为您不会忘记清理文本。
您可以转义文本。

```
string userText = @"you realy shouldn't do this";

string sqlSafeText = sqlSafeText.Replace(@"'", @"''"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T16:46:20.890

在 C# 中，您可以像下面这样逃脱`"`->`" to \"`

```
"ABELE\"o\"" 
```

你可以转义单引号`'`，如下所示`' to ''`

```
"ABELE''o" 
```

# asp.net - Azure 网站中的机器密钥（不是 webroles）

> ID：15931565
> 
> 赞同：1
> 
> 时间：2013-04-10T16:36:49.860
> 
> 标签：asp.net, azure, azure-web-app-service

如何在 Azure 网站中设置机器密钥？我有一个包含数十万个子域的解决方案，使用同一个 Web 应用程序。我想在繁忙的子域上将应用程序的一部分移动到 Azure，但没有看到为“网站”执行此操作的方法，但我确实为 WebRole 看到了一些东西，但我不喜欢 WebRoles。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T17:42:36.803

如果您的目标是使用 Windows Azure 网站设置机器密钥，您可以在网站的 web.config 文件中设置元素。

```
<configuration>
  <system.web>
    <machineKey 
            decryptionKey="Key_Decryption,IsolateApps" 
            validationKey="Key_Validation,IsolateApps" 
    />
  </system.web>
</configuration> 
```

此外，如果您对多个实例使用 inproc 会话状态，最好的选择是使用[Windows Azure 共享缓存](http://msdn.microsoft.com/en-us/library/windowsazure/hh697522.aspx)来存储特定于会话的数据。

# oracle - 如何使用 Hibernate 两次锁定同一个对象？

> ID：15931567
> 
> 赞同：1
> 
> 时间：2013-04-10T16:36:52.423
> 
> 标签：oracle, hibernate, grails, locking

因此，我确实从数据库中检索了相同的对象。两次都使用 DB 级锁定。全部在单个会话/事务中。

```
funk()
funk()

def funk() {
    def account = Account.withCriteria {
        id 123
        lock true
        lockMode LockMode.UPGRADE_NOWAIT
    }
    account.save()
} 
```

问题：第二次检索永远挂起读取 HTTP 套接字。

是否可以在不重新设计代码的情况下解决问题？

*   也许通过手动解锁
*   或通过重入锁定
*   或者如果我知道它已经被锁定，我可以跳过锁定......

Grails 2.2.0、一些 Hibernate、Oracle XE

# python - 艾托夫投影，Python

> ID：15931583
> 
> 赞同：1
> 
> 时间：2013-04-10T16:37:39.323
> 
> 标签：python, matplotlib

我正在尝试使用 Aitoff Projection 绘制我的数据`matplotlib`

一个例子是[here](http://www.google.de/imgres?um=1&hl=en&safe=off&client=ubuntu&sa=N&channel=fs&biw=1276&bih=858&tbm=isch&tbnid=tqfN4bH9sfB6SM%3a&imgrefurl=http://matplotlib.org/examples/pylab_examples/geo_demo.html&docid=5gQzolqaUnPcTM&imgurl=http://matplotlib.org/mpl_examples/pylab_examples/geo_demo.hires.png&w=1100&h=900&ei=8Y9lUebaN4fWsgaNoIDIAQ&zoom=1&iact=rc&dur=408&page=1&tbnh=148&tbnw=173&start=0&ndsp=29&ved=1t:429,r:4,s:0,i:97&tx=126&ty=35)，但我想设置xaxis限制并只可视化球体的一部分。例如，我应该使用什么来仅可视化 0 到 90 度之间的纬度和 -90 到 90 度之间的经度？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T21:43:51.423

matplotlib 中的 Aitoff 投影不能改变它的限制——它们在全局范围内是固定的（我认为这是因为它简化了轴的创建）。

在您可用的其他工具中，Basemap 和 Cartopy 都不支持 Aitoff 投影。

因为它相当容易做到，我只是在 Cartopy 中创建了一个 Aitoff 投影定义，但是事情并不顺利，因为 proj.4 没有得到逆 Aitoff 定义。

恐怕目前看来还没有一个好的解决方案。我将继续研究使用 Cartopy 执行此操作的可能性，如果我找到任何东西，请告诉您。

高温高压

# opencart - 更改 OpenCart 从默认值中选择选项颜色

> ID：15931584
> 
> 赞同：0
> 
> 时间：2013-04-10T16:37:40.277
> 
> 标签：opencart

使用 OpenCart，在编辑产品时，在选项选项卡中，当我添加选择菜单时，我希望将铬和黑色作为仅有的两种颜色选项。问题是它不允许我定义颜色并给我一个“蓝色、绿色、黄色、红色”的静态列表。

我在哪里编辑 OpenCart 的选择菜单的颜色选项？

OpenCart --> 控制面板 --> 产品 --> 编辑产品 --> 选项 [tab] --> 创建选择（自动完成，只需为新字段键入 s）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:53:02.440

转到`Catalog >> option >> Select [edit]`此处，您可以重命名`select`并添加所需的额外颜色等。默认情况下，只有“蓝色、绿色、黄色、红色”，因此列表仅显示这些颜色。

# .net - 用于 Netduino Plus 2 的 GPS 模块

> ID：15931587
> 
> 赞同：0
> 
> 时间：2013-04-10T16:37:43.700
> 
> 标签：.net, embedded, .net-micro-framework, .net-cf-3.5

我正在使用运行于 .NET 微框架的 Netduino plus 2。该板适用于我所有的应用程序。

最近，我使用带有天线 GPS 模块的 20 通道 EM-406A SiRF III 接收器将 GPS 功能集成到板上，该天线 GPS 模块能够通过串行接口进行通信。

但是，我无法在室内进行修复。即使 GPS 模块需要 30 分钟才能获得定位，在室内获得定位对我来说也很重要。我通过串行接口获取 GPS 数据就好了。我知道在室内获得 GPS 定位并不容易，而且 GPS 卫星信号很弱，但是我知道有 GPS 模块可以在室内获得定位，即使它们需要几分钟才能获得定位。有没有人有什么建议？

提前致谢。

干杯，

副部

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:44:19.720

这与所使用的 GPS 接收器的灵敏度以及与后者一起使用的天线的增益有关，后者很可能是这里最关键的。天线设计是一个非常重要的问题，由于 GPS 信号在必须穿过任何材料时很容易衰减，所以如果没有射频工程师。

# java - JavaFX 中的 HTML 编辑选项

> ID：15931588
> 
> 赞同：5
> 
> 时间：2013-04-10T16:37:45.630
> 
> 标签：java, swing, tinymce, javafx-2, html-editor

我希望将在基于 Swing 的应用程序中使用的 HTML 编辑器替换为基于 JavaFX 的编辑器。

据我所知，有两种可能的选择： 1) 使用 JavaFX HTML 编辑器。*虽然这对于它确实*具有的功能来说非常好，但它仍然缺少其他几个功能（例如插入图像、插入表格、操作图像或表格等）。我还希望包括其他功能，例如拼写检查和支持自定义标签的能力。2) 使用JavaFX WebView 组件并使用嵌入式编辑器，例如TinyMCE。

那么最好的选择是什么？有人增强了 JavaFX HTML 编辑器吗？使用第二种选择是否有任何“陷阱”？我应该考虑第三种选择吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T17:24:03.203

定义最佳选项是一个无法回答的问题，因为这取决于手头的应用程序。

相关信息见：

*   [如何隐藏 HTMLEditor 的控件？](https://stackoverflow.com/questions/10075841/how-to-hide-the-controls-of-htmleditor)
*   [JavaFX HTMLEditor - 插入图像功能](https://stackoverflow.com/questions/10968000/javafx-htmleditor-insert-image-function)
*   [在 JavaFX HTMLeditor 中设置本地图像](https://stackoverflow.com/questions/15802619/set-a-local-image-in-javafx-htmleditor)
*   [HtmlEditorCustomizationSample](https://gist.github.com/jewelsea/2514709)
*   [浅谈HtmlEditor定制的利弊](https://forums.oracle.com/forums/thread.jspa?messageID=10301445)
*   [具有 contenteditable 的 Webview 无法以编程方式聚焦](https://stackoverflow.com/questions/10685395/webview-with-contenteditable-cannot-be-focused-programmatically)
*   [在 WebView 中嵌入第 3 方编辑器基于 JavaScript 的编辑器](https://gist.github.com/jewelsea/1463485)
*   [在 HtmlEditor 中创建表格](https://javafx-jira.kenai.com/browse/RT-28926)

# c# - Visual Studio 安装项目——如何打包 .rpt 文件以便我的应用程序与主应用程序一起安装

> ID：15931589
> 
> 赞同：1
> 
> 时间：2013-04-10T16:37:51.710
> 
> 标签：c#, visual-studio-2010, crystal-reports, installation, setup-project

我是水晶报表安装的新手。我有一个包含 Crystal 报告 *rpt 文件的应用程序。我有一个设置项目，可以正确构建 *.msi 文件，为我的应用程序安装 dll 和 exe 文件，但目前也没有打包 *.rpt 文件。如何设置它以复制 *.rpt 文件并将它们复制到安装的本地文件夹？我什至想指定 *.rpt 文件应该复制到的本地计算机上的特定路径。请问我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:53:40.593

我能够在我的项目设置项目中解决这个问题。

a) 在 Visual Studio 中打开您的项目设置项目。b) 右键单击​​项目，然后选择查看 > 文件系统 c) 右键单击​​应用程序文件夹（在文件系统窗口的左侧面板中，在菜单中目标机器上的文件系统的右侧），然后选择添加> 文件夹 d) 添加您希望在客户端计算机上安装报告的文件夹的名称，在我的情况下，我的文件夹名称为 REPORTS e) 将 *.rpt 文件的副本从您的应用程序添加到您刚刚在设置中创建的文件夹项目 f) 构建您的安装项目，安装后，将创建一个报告文件夹，您的报告文件的副本将包含在该文件夹中。

# android - Videoview：在 Android 中从本地服务器播放 mp3/视频

> ID：15931597
> 
> 赞同：2
> 
> 时间：2013-04-10T16:38:10.847
> 
> 标签：android, sockets, video-streaming, inputstream, android-videoview

我整天都在努力使用 DatagramSocket 和 DatagramPacket 通过本地服务器读取音频文件 (mp3)。这是代码和错误日志：

客户端

```
 OutputStream out = client.getOutputStream();
    ... 
    // after receiving the datapacket => I'm trying to write it to a Http socket
    // which is not working
    udpSocket.receive(dataPacket);
    http_outputStream.write(dataPacket.getData(),dataPacket.getOffset(),
                              dataPacket.getLength()); 
```

我对处理音频/视频文件的功能有些怀疑，因为当尝试从服务器向客户端发送一些文本时，一切都很好。我在用着 ：

服务器端

```
 File audio = new File(Environment.getExternalStorageDirectory()+File.separator, "bob.mp3");
   FileInputStream is = new FileInputStream(audio);
   is.read(buf);
   DatagramSocket socket = new DatagramSocket();
   DatagramPacket out = new DatagramPacket(buf, buf.length, hostAddress, UDP_PORT);
   socket.send(out); 
```

日志 ：

```
 4-10 17:26:25.943 I/amplayer( 2307): [parse_sysparam_str]j=0 vc1: start:17 end:39
   04-10 17:26:25.943 I/amplayer( 2307): [vc1 profile] progress:1; interlace:0; wmv1:0; wmv2:0; wmv3:1
   04-10 17:26:25.943 I/amplayer( 2307): [parse_sysparam_str]j=1 h264: start:40 end:46
   04-10 17:26:25.943 I/amplayer( 2307): [parse_sysparam_str]j=2 real: start:55 end:66
   04-10 17:26:25.943 I/amplayer( 2307): [parse_sysparam_str]j=3 mpeg12: start:0 end:8
   04-10 17:26:25.943 I/amplayer( 2307): [parse_sysparam_str]j=4 mpeg4: start:9 end:16
   04-10 17:26:25.943 I/amplayer( 2307): [parse_sysparam_str]j=5 mjpeg: start:47 end:54
   04-10 17:26:25.943 I/amplayer( 2307): pid[8]::Init State: mute_on=0 black=1        t_pos:1074475459s read_max_cnt=0
   04-10 17:26:25.943 I/amplayer( 2307): file::::[shttp://127.0.0.1:1666/],len=23
   04-10 17:26:26.003 I/ActivityManager( 3241): Displayed com.example.server/.MainActivity:        +858ms
   04-10 17:26:26.043 I/VideoView( 4440): Layout changed,left=202 top=100 right=642        bottom=417
   04-10 17:26:26.043 I/VideoView( 4440): Layout changed,oldLeft=202 oldTop=100        oldRight=642 oldBottom=417
   04-10 17:26:26.043 I/VideoView( 4440):        .left=202.top=100.right=642.bottom=417.oldLeft=202.oldTop=100.oldRight=642.oldBottom=417.Rotati       on=0
   04-10 17:26:26.043 I/amplayer( 2307): **[update_state]pid:8        status=BEGIN_INIT(last:UNKNOW_STATE) err=0x0 curtime=0 (ms:0) fulltime=0 lsttime=0
   04-10 17:26:26.043 I/amplayer( 2307): **[update_state]abuflevel=0.000 vbublevel=0.000        abufrp=0 vbufrp=0 read_end=0
   04-10 17:26:26.043 V/AmlogicPlayer( 2307): update_process pid=8, current=0,status=       [BEGIN_INIT]
   04-10 17:26:26.043 V/AmlogicPlayer( 2307): Playing percent =0,mPlayTime:0,mStreamTime:0
   04-10 17:26:26.043 V/AmSuperPlayer( 2307): [notify::405]
   04-10 17:26:26.043 V/AmSuperPlayer( 2307): [Notify::412]
   04-10 17:26:26.043 V/AmSuperPlayer( 2307): cookie=0x46970,msg=3,ext1=0,ext2=0
   04-10 17:26:26.043 I/amffmpeg( 2307): [tcp @ 0x44a40] TCP connect to 127.0.0.1 port 1666 
   04-10 17:26:26.043 I/amffmpeg( 2307): HTTP[GET / HTTP/1.1
   04-10 17:26:26.043 I/amffmpeg( 2307): User-Agent: AppleCoreMedia/1.0.0.8C148 (iPad; U;        CPU OS 4_2_1 like Mac OS X; zh_cn)
   04-10 17:26:26.043 I/amffmpeg( 2307): Accept: */*
   04-10 17:26:26.043 I/amffmpeg( 2307): Range: bytes=0-
   04-10 17:26:26.043 I/amffmpeg( 2307): Connection: close
   04-10 17:26:26.043 I/amffmpeg( 2307): Host: 127.0.0.1:1666
   04-10 17:26:26.043 I/amffmpeg( 2307): 
   04-10 17:26:26.043 I/amffmpeg( 2307): ]
   04-10 17:26:26.043 I/amffmpeg( 2307): [shttp @ 0x4c1b0] process_line:HTTP/1.1 200 OK 
   04-10 17:26:26.043 I/amffmpeg( 2307): [shttp @ 0x4c1b0] process_line:Content-Type:               audio/mp3 
   04-10 17:26:26.043 I/amffmpeg( 2307): [shttp @ 0x4c1b0] process_line:Connection: keep-       alive 
   04-10 17:26:26.043 I/amffmpeg( 2307): [shttp @ 0x4c1b0] process_line: 
   04-10 17:26:26.043 I/amffmpeg( 2307): getloopbuf size=4000000
   04-10 17:26:26.043 I/amffmpeg( 2307): ffio_fdopen (h->is_slowmedia=1,flags=1
   04-10 17:26:26.043 I/amffmpeg( 2307): lpbuffer block size=32768
   04-10 17:26:26.043 I/amffmpeg( 2307): url_lpopen used lp buf size=67108864
   04-10 17:26:26.043 I/amffmpeg( 2307): url_lpseek:offset=0        whence=65536,buffer=47968020,rp=47968020,wp=47968020,end=4b968020,pos=0
   04-10 17:26:26.043 I/amffmpeg( 2307): ffio_fdopen Register lpbuf
   04-10 17:26:26.043 I/amffmpeg( 2307): auto_switch_protol_t:list::
   04-10 17:26:26.053 V/MediaPlayerService( 2307): [103] setParameter(2000)
   04-10 17:26:26.053 V/AmSuperPlayer( 2307): [setParameter::352]
   04-10 17:26:26.213 I/amffmpeg( 2307): m3u_format_get_line line 4=ID3?
   04-10 17:26:26.213 I/amffmpeg( 2307): auto_switch_protol_t:nsc::
   04-10 17:26:26.213 I/amffmpeg( 2307): is_ncs_file check lineID3? ret=4
   04-10 17:26:26.213 I/amffmpeg( 2307): is_ncs_file check line ret=0
   04-10 17:26:26.213 I/amffmpeg( 2307): is_ncs_file=0
   04-10 17:26:32.483 I/ActivityManager( 3241): No longer want com.android.keychain (pid        4406): hidden #16
   04-10 17:26:32.483 I/ActivityManager( 3241): No longer want com.anttek.clockwiget (pid        3064): hidden #17
   04-10 17:26:32.493 W/ActivityManager( 3241): Scheduling restart of crashed service        com.anttek.clockwiget/.service.LocationService in 5000ms
   04-10 17:26:32.513 I/amplayer( 2307): [ffmpeg_open_file]        file=shttp://127.0.0.1:1666/,header=
   04-10 17:26:32.513 I/amplayer( 2307): ffmpeg error: Couldn't open input file!        ret==bebbb1b7
   04-10 17:26:32.513 I/amplayer( 2307): [player_dec_init]ffmpeg_open_file        failed(shttp://127.0.0.1:1666/)*****ret=fcffffff!
   04-10 17:26:32.513 I/amplayer( 2307): 
   04-10 17:26:32.513 I/amplayer( 2307): pid[8]player_thread release0 begin...(sta:0x30001)
   04-10 17:26:32.513 I/amplayer( 2307): [get_pts_video]No codec handler
   04-10 17:26:32.513 I/amplayer( 2307): **[update_state]pid:8               status=ERROR(last:BEGIN_INIT) err=0x3000001 curtime=0 (ms:0) fulltime=0 lsttime=0
   04-10 17:26:32.513 I/amplayer( 2307): **[update_state]abuflevel=0.000 vbublevel=0.000        abufrp=0 vbufrp=0 read_end=0
   04-10 17:26:32.513 V/AmlogicPlayer( 2307): update_process pid=8, current=0,status=[ERROR]
   04-10 17:26:32.513 V/AmSuperPlayer( 2307): [notify::405]
   04-10 17:26:32.513 V/AmSuperPlayer( 2307): [Notify::412]
   04-10 17:26:32.513 V/AmSuperPlayer( 2307): cookie=0x46970,msg=64,ext1=1,ext2=fcffffff
   04-10 17:26:32.523 V/AmSuperPlayer( 2307): [CreatePlayer::703]
   04-10 17:26:32.523 I/AmSuperPlayer( 2307): media.amplayer.enable is enabled
   04-10 17:26:32.523 I/AmSuperPlayer( 2307): media.stagefright.enable-player is disabled
   04-10 17:26:32.523 V/AmSuperPlayer( 2307): [CreatePlayer::714]
   04-10 17:26:32.523 V/AmSuperPlayer( 2307): Need to creat new player=3
   04-10 17:26:32.523 V/AmlogicPlayer( 2307): stop
          04-10 17:26:32.523 D/HTTP !!!( 4440): ERROR !!!
   04-10 17:26:32.523 I/amplayer( 2307): [player_stop:enter]pid=8
   04-10 17:26:32.523 I/amplayer( 2307): [player_stop]player_status=30001
   04-10 17:26:32.523 I/amplayer( 2307): [player_stop]pid=8 thread is already stopped
   04-10 17:26:32.523 D/#hello# ( 4440): nothing => just ending !!!!!
   04-10 17:26:32.523 V/AmlogicPlayer( 2307): AmlogicPlayer destructor
   04-10 17:26:32.523 V/AmlogicPlayer( 2307): release
   04-10 17:26:32.523 V/AmlogicPlayer( 2307): [release::1499]
   04-10 17:26:32.523 I/amplayer( 2307): [player_stop:enter]pid=8
   04-10 17:26:32.523 I/amplayer( 2307): [player_stop]player_status=30001
   04-10 17:26:32.523 I/amplayer( 2307): [player_stop]pid=8 thread is already stopped
   04-10 17:26:32.523 I/amplayer( 2307): [player_exit:enter]pid=8
   04-10 17:26:32.523 I/amplayer( 2307): [player_exit]player_state=0x30001
   04-10 17:26:32.523 I/amplayer( 2307): [player_stop:enter]pid=8
   04-10 17:26:32.523 I/amplayer( 2307): [player_stop]player_status=30001
   04-10 17:26:32.523 I/amplayer( 2307): [player_stop]pid=8 thread is already stopped
   04-10 17:26:32.523 I/amplayer( 2307): [player_thread_wait_exit:80]pid=[8] thead_id=427752
   04-10 17:26:32.523 V/AmlogicPlayer( 2307): Player status:ERROR, error occur
   04-10 17:26:32.523 V/AmSuperPlayer( 2307): [notify::405]
   04-10 17:26:32.523 V/AmSuperPlayer( 2307): [Notify::412]
   04-10 17:26:32.523 V/AmSuperPlayer( 2307): cookie=0x46970,msg=64,ext1=1,ext2=ffffffff
   04-10 17:26:32.523 I/amplayer( 2307): **[update_state]pid:8 status=EXIT(last:ERROR)        err=0x0 curtime=0 (ms:0) fulltime=0 lsttime=0
   04-10 17:26:32.523 I/amplayer( 2307): **[update_state]abuflevel=0.000 vbublevel=0.000 abufrp=0 vbufrp=0 read_end=0
   04-10 17:26:32.523 V/AmlogicPlayer( 2307): update_process pid=8, current=0,status=[EXIT]
   04-10 17:26:32.523 V/AmlogicPlayer( 2307): Player status:EXIT, playback exit
   04-10 17:26:32.523 I/amplayer( 2307): 
   04-10 17:26:32.523 I/amplayer( 2307): pid[8]::stop play, exit player thead!(sta:0x30004)
   04-10 17:26:32.523 I/amplayer( 2307): [player_thread_wait_exit:86]thead_id=427752 returning
   04-10 17:26:32.523 I/amplayer( 2307): [player_exit]player thread already exit: 0
   04-10 17:26:32.523 I/amplayer( 2307): [player_release_pid:72]release pid=8
   04-10 17:26:32.523 I/amplayer( 2307): [player_exit:exit]pid=8
   04-10 17:26:32.523 I/amplayer( 2307): [get_display_mode]mode=panel
   04-10 17:26:32.523 I/amplayer( 2307): 
   04-10 17:26:32.523 I/amplayer( 2307):  strlen=7
   04-10 17:26:32.523 I/amplayer( 2307): [get_display_mode]display_mode=panel
   04-10 17:26:32.523 I/amplayer( 2307): 
   04-10 17:26:32.523 I/amplayer( 2307): 
   04-10 17:26:32.523 I/amplayer( 2307): [display_mode_convert]disp_mode=panel
   04-10 17:26:32.523 I/amplayer( 2307): 
   04-10 17:26:32.523 I/amplayer( 2307): 
   04-10 17:26:32.523 I/amplayer( 2307): [display_mode_convert]disp_mode=panel
   04-10 17:26:32.523 I/amplayer( 2307): 
   04-10 17:26:32.523 I/amplayer( 2307): -->ffff
   04-10 17:26:32.523 I/amplayer( 2307): [enable_freescale]
   04-10 17:26:32.523 V/AmlogicPlayer( 2307): VideoViewClose=0
   04-10 17:26:32.523 V/AmlogicPlayer( 2307): [release::1509]
   04-10 17:26:32.523 V/AmlogicPlayer( 2307): History mgt old[shttp://127.0.0.1:1666/,0,0]
   04-10 17:26:32.523 V/AmlogicPlayer( 2307): History mgt    [shttp://127.0.0.1:1666/,1,0]
   04-10 17:26:32.523 V/AmSuperPlayer( 2307): createPlayer
   04-10 17:26:32.523 V/AmSuperPlayer( 2307):  create StagefrightPlayer
   04-10 17:26:32.523 V/AmSuperPlayer( 2307): [CreatePlayer::679]
   04-10 17:26:32.523 I/AwesomePlayer( 2307): setDataSource_l('http://127.0.0.1:1666/')
   04-10 17:26:32.523 V/AmSuperPlayer( 2307): [CreatePlayer::714]
   04-10 17:26:32.523 V/AmSuperPlayer( 2307): [CreatePlayer::730]
   04-10 17:26:32.523 V/AmSuperPlayer( 2307): Start new player now=3
   04-10 17:26:32.523 V/AmSuperPlayer( 2307): [initThread::763]
   04-10 17:26:32.523 V/ChromiumHTTPDataSource( 2307): connect on behalf of uid 0
   04-10 17:26:32.523 I/ChromiumHTTPDataSource( 2307): connect to http://127.0.0.1:1666/ @0 
```

我感谢您的帮助。

编辑：我忘了提到“服务器”类代码每次将“mp3-data”发送到客户端的同一端口时都使用不同的端口。这个可以吗 ？

# vb.net - 根据光标所在的位置向文本框添加文本

> ID：15931602
> 
> 赞同：2
> 
> 时间：2013-04-10T16:38:21.740
> 
> 标签：vb.net, button, textbox, cursor

让我先说我环顾四周，我想我的问题太具体了，无法得到任何直接的结果。这也是我的第一个 VB 项目。

我正在尝试制作一个简单的销售点 GUI。我有两个文本框（价格、现金）和 11 个按钮来制作数字键盘。我想要做的是能够单击数字键盘按钮（例如，按钮“1”和“0”输入 10 美元），然后转到光标最后单击的文本框。

所以这里有一个例子：我点击文本框“价格”，然后点击按钮“1”和按钮“0”。这将在“价格”文本框中输入 10。之后，我希望能够单击“Cash Tendered”文本框并能够使用与以前相同的数字键盘按钮进行相同的操作。

[提供了 GUI](http://imgur.com/aHu6zO4)的图片。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:47:27.657

您可以使用布尔值来跟踪上次选择的文本框

当您单击价格文本框时，将布尔值设置为真。当您单击 Cash Tendered 文本框时，将布尔值设置为 false。当您单击键盘中的一个数字按钮时，测试布尔值以查看最后选择的文本框，然后将数字输入该文本框。

例子：

```
Public Class Form1

    Dim lastClickedTextBox1 As Boolean

    Private Sub TextBox1_Click(sender As Object, e As EventArgs) Handles TextBox1.Click
        lastClickedTextBox1 = True
    End Sub

    Private Sub TextBox2_Click(sender As Object, e As EventArgs) Handles TextBox2.Click
        lastClickedTextBox1 = False
    End Sub

    Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
        If lastClickedTextBox1 = True Then
            TextBox1.Text = "Box 1 was it"
        Else
            TextBox2.Text = "Box 2 was it"
        End If
    End Sub
End Class 
```

# spring - Spring oxm 的使用

> ID：15931604
> 
> 赞同：0
> 
> 时间：2013-04-10T16:38:29.923
> 
> 标签：spring, maven-3, xstream, sts-springsourcetoolsuite, spring-oxm

我是春天的新手。我正在研究 spring-oxm 的 XStreamMarshaller。我希望找到一种方法来使用它将我的对象转换为 xml。spring 站点清楚地告诉我如何做到这一点，但它仍然需要我在我的 POM 中添加一个 XStream 依赖项。我不明白spring-oxm有什么用？如果无论如何我都必须添加 xstream 依赖项，那么我可以直接使用 xstreams toXml 操作并完成它吗？我非常感谢我在理解 spring-oxm 的使用方面能得到的任何帮助。

提前非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:12:55.587

Spring 通过消除您需要编写的脚手架代码，为您提供了更高级别的抽象。例如，在 OXM 的情况下，您将使用`Marshaller`和`Unmarshaller`抽象，而不管底层实现使用（XStream、JAXB、Castor、XmlBeans 等）。此外，它允许您使用 DI 将编组/解组服务注入您自己的服务。另一个优点是一致的异常层次结构，而与底层实现无关。所有这些都在他们的[参考文档](http://static.springsource.org/spring-ws/site/reference/html/oxm.html)中得到了很好的解释。

如果您有非常简单的需求并且尚未使用 Spring，那么我建议您坚持使用 JDK 6 附带的 JAXB。

# sql - 在 SQL Server 中使用“透视”将行转换为列

> ID：15931607
> 
> 赞同：312
> 
> 时间：2013-04-10T16:38:38.677
> 
> 标签：sql, sql-server, pivot, pivot-table

我已经阅读了 MS 数据透视表上的内容，但我仍然无法正确解决这个问题。

我有一个正在创建的临时表，我们会说第 1 列是商店编号，第 2 列是周数，最后第 3 列是某种类型的总数。周数也是动态的，商店数是静态的。

```
Store      Week     xCount
-------    ----     ------
102        1        96
101        1        138
105        1        37
109        1        59
101        2        282
102        2        212
105        2        78
109        2        97
105        3        60
102        3        123
101        3        220
109        3        87 
```

我希望它以数据透视表的形式出现，如下所示：

```
Store        1          2          3        4        5        6....
----- 
101        138        282        220
102         96        212        123
105         37        
109 
```

将数字存储在侧面，将数周存储在顶部。

* * *

## 回答 #1

> 赞同：386
> 
> 时间：2013-04-10T16:44:22.623

如果您使用的是 SQL Server 2005+，那么您可以使用该`PIVOT`函数将数据从行转换为列。

如果周数未知，听起来您将需要使用动态 sql，但最初使用硬编码版本更容易看到正确的代码。

首先，这里有一些快速的表定义和数据供使用：

```
CREATE TABLE yt 
(
  [Store] int, 
  [Week] int, 
  [xCount] int
);

INSERT INTO yt
(
  [Store], 
  [Week], [xCount]
)
VALUES
    (102, 1, 96),
    (101, 1, 138),
    (105, 1, 37),
    (109, 1, 59),
    (101, 2, 282),
    (102, 2, 212),
    (105, 2, 78),
    (109, 2, 97),
    (105, 3, 60),
    (102, 3, 123),
    (101, 3, 220),
    (109, 3, 87); 
```

如果您的值是已知的，那么您将对查询进行硬编码：

```
select *
from 
(
  select store, week, xCount
  from yt 
) src
pivot
(
  sum(xcount)
  for week in ([1], [2], [3])
) piv; 
```

查看[SQL 演示](https://data.stackexchange.com/stackoverflow/query/580181)

然后，如果您需要动态生成周数，您的代码将是：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME(Week) 
                    from yt
                    group by Week
                    order by Week
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT store,' + @cols + ' from 
             (
                select store, week, xCount
                from yt
            ) x
            pivot 
            (
                sum(xCount)
                for week in (' + @cols + ')
            ) p '

execute(@query); 
```

请参阅[SQL 演示](https://data.stackexchange.com/stackoverflow/query/580183)。

动态版本生成`week`应转换为列的数字列表。两者都给出相同的结果：

```
| STORE |   1 |   2 |   3 |
---------------------------
|   101 | 138 | 282 | 220 |
|   102 |  96 | 212 | 123 |
|   105 |  37 |  78 |  60 |
|   109 |  59 |  97 |  87 | 
```

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2014-12-17T18:43:13.673

这是动态的 # 周。

此处的完整示例：[SQL Dynamic Pivot](http://sqlhints.com/2014/03/18/dynamic-pivot-in-sql-server/)

```
DECLARE @DynamicPivotQuery AS NVARCHAR(MAX)
DECLARE @ColumnName AS NVARCHAR(MAX)

--Get distinct values of the PIVOT Column 
SELECT @ColumnName= ISNULL(@ColumnName + ',','') + QUOTENAME(Week)
FROM (SELECT DISTINCT Week FROM #StoreSales) AS Weeks

--Prepare the PIVOT query using the dynamic 
SET @DynamicPivotQuery = 
  N'SELECT Store, ' + @ColumnName + ' 
    FROM #StoreSales
    PIVOT(SUM(xCount) 
          FOR Week IN (' + @ColumnName + ')) AS PVTTable'
--Execute the Dynamic Pivot Query
EXEC sp_executesql @DynamicPivotQuery 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-02-03T19:16:58.143

我之前通过使用子查询实现了同样的事情。因此，如果您的原始表名为 StoreCountsByWeek，并且您有一个单独的表列出了商店 ID，那么它将如下所示：

```
SELECT StoreID, 
    Week1=(SELECT ISNULL(SUM(xCount),0) FROM StoreCountsByWeek WHERE StoreCountsByWeek.StoreID=Store.StoreID AND Week=1),
    Week2=(SELECT ISNULL(SUM(xCount),0) FROM StoreCountsByWeek WHERE StoreCountsByWeek.StoreID=Store.StoreID AND Week=2),
    Week3=(SELECT ISNULL(SUM(xCount),0) FROM StoreCountsByWeek WHERE StoreCountsByWeek.StoreID=Store.StoreID AND Week=3)
FROM Store
ORDER BY StoreID 
```

这种方法的一个优点是语法更清晰，并且可以更轻松地连接到其他表以将其他字段也拉入结果中。

我的轶事结果是，在不到一秒的时间内完成了对几千行运行此查询，而我实际上有 7 个子查询。但正如评论中所指出的，这样做的计算成本更高，因此如果您希望它在大量数据上运行，请谨慎使用此方法。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2013-04-10T16:46:20.600

这是你可以做的：

```
SELECT * 
FROM yourTable
PIVOT (MAX(xCount) 
       FOR Week in ([1],[2],[3],[4],[5],[6],[7])) AS pvt 
```

[演示](http://www.sqlfiddle.com/#!3/16fd1/1)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2017-10-30T14:35:41.823

我正在编写一个可能对此有用的 sp，基本上这个 sp 旋转任何表并返回一个旋转的新表或只返回一组数据，这是执行它的方式：

```
Exec dbo.rs_pivot_table @schema=dbo,@table=table_name,@column=column_to_pivot,@agg='sum([column_to_agg]),avg([another_column_to_agg]),',
        @sel_cols='column_to_select1,column_to_select2,column_to_select1',@new_table=returned_table_pivoted; 
```

**请注意**，在参数@agg 中，列名必须是 with`'['`并且参数必须以逗号结尾`','`

SP

```
Create Procedure [dbo].[rs_pivot_table]
    @schema sysname=dbo,
    @table sysname,
    @column sysname,
    @agg nvarchar(max),
    @sel_cols varchar(max),
    @new_table sysname,
    @add_to_col_name sysname=null
As
--Exec dbo.rs_pivot_table dbo,##TEMPORAL1,tip_liq,'sum([val_liq]),sum([can_liq]),','cod_emp,cod_con,tip_liq',##TEMPORAL1PVT,'hola';
Begin

    Declare @query varchar(max)='';
    Declare @aggDet varchar(100);
    Declare @opp_agg varchar(5);
    Declare @col_agg varchar(100);
    Declare @pivot_col sysname;
    Declare @query_col_pvt varchar(max)='';
    Declare @full_query_pivot varchar(max)='';
    Declare @ind_tmpTbl int; --Indicador de tabla temporal 1=tabla temporal global 0=Tabla fisica

    Create Table #pvt_column(
        pivot_col varchar(100)
    );

    Declare @column_agg table(
        opp_agg varchar(5),
        col_agg varchar(100)
    );

    IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(@table) AND type in (N'U'))
        Set @ind_tmpTbl=0;
    ELSE IF OBJECT_ID('tempdb..'+ltrim(rtrim(@table))) IS NOT NULL
        Set @ind_tmpTbl=1;

    IF  EXISTS (SELECT * FROM sys.objects WHERE object_id = OBJECT_ID(@new_table) AND type in (N'U')) OR 
        OBJECT_ID('tempdb..'+ltrim(rtrim(@new_table))) IS NOT NULL
    Begin
        Set @query='DROP TABLE '+@new_table+'';
        Exec (@query);
    End;

    Select @query='Select distinct '+@column+' From '+(case when @ind_tmpTbl=1 then 'tempdb.' else '' end)+@schema+'.'+@table+' where '+@column+' is not null;';
    Print @query;

    Insert into #pvt_column(pivot_col)
    Exec (@query)

    While charindex(',',@agg,1)>0
    Begin
        Select @aggDet=Substring(@agg,1,charindex(',',@agg,1)-1);

        Insert Into @column_agg(opp_agg,col_agg)
        Values(substring(@aggDet,1,charindex('(',@aggDet,1)-1),ltrim(rtrim(replace(substring(@aggDet,charindex('[',@aggDet,1),charindex(']',@aggDet,1)-4),')',''))));

        Set @agg=Substring(@agg,charindex(',',@agg,1)+1,len(@agg))

    End

    Declare cur_agg cursor read_only forward_only local static for
    Select 
        opp_agg,col_agg
    from @column_agg;

    Open cur_agg;

    Fetch Next From cur_agg
    Into @opp_agg,@col_agg;

    While @@fetch_status=0
    Begin

        Declare cur_col cursor read_only forward_only local static for
        Select 
            pivot_col 
        From #pvt_column;

        Open cur_col;

        Fetch Next From cur_col
        Into @pivot_col;

        While @@fetch_status=0
        Begin

            Select @query_col_pvt='isnull('+@opp_agg+'(case when '+@column+'='+quotename(@pivot_col,char(39))+' then '+@col_agg+
            ' else null end),0) as ['+lower(Replace(Replace(@opp_agg+'_'+convert(varchar(100),@pivot_col)+'_'+replace(replace(@col_agg,'[',''),']',''),' ',''),'&',''))+
                (case when @add_to_col_name is null then space(0) else '_'+isnull(ltrim(rtrim(@add_to_col_name)),'') end)+']'
            print @query_col_pvt
            Select @full_query_pivot=@full_query_pivot+@query_col_pvt+', '

            --print @full_query_pivot

            Fetch Next From cur_col
            Into @pivot_col;        

        End     

        Close cur_col;
        Deallocate cur_col;

        Fetch Next From cur_agg
        Into @opp_agg,@col_agg; 
    End

    Close cur_agg;
    Deallocate cur_agg;

    Select @full_query_pivot=substring(@full_query_pivot,1,len(@full_query_pivot)-1);

    Select @query='Select '+@sel_cols+','+@full_query_pivot+' into '+@new_table+' From '+(case when @ind_tmpTbl=1 then 'tempdb.' else '' end)+
    @schema+'.'+@table+' Group by '+@sel_cols+';';

    print @query;
    Exec (@query);

End;
GO 
```

这是一个执行示例：

```
Exec dbo.rs_pivot_table @schema=dbo,@table=##TEMPORAL1,@column=tip_liq,@agg='sum([val_liq]),avg([can_liq]),',@sel_cols='cod_emp,cod_con,tip_liq',@new_table=##TEMPORAL1PVT; 
```

然后`Select * From ##TEMPORAL1PVT`会返回：

[![在此处输入图像描述](https://i.stack.imgur.com/pGHCK.png)](https://i.stack.imgur.com/pGHCK.png)

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2018-04-19T21:01:34.153

这是上面@Tayrn 答案的修订版，可以帮助您更轻松地理解旋转：

这可能不是做到这一点的最佳方式，但这正是帮助我了解如何透视表的原因。

ID = 您要旋转的行

MY_KEY = 您从原始表中选择的列，其中包含要转换的列名。

VAL = 您希望在每列下返回的值。

MAX(VAL) => 可以替换为其他聚合函数。总和（VAL），MIN（VAL），等等...

```
DECLARE @cols AS NVARCHAR(MAX),
@query  AS NVARCHAR(MAX)
select @cols = STUFF((SELECT ',' + QUOTENAME(MY_KEY) 
                from yt
                group by MY_KEY
                order by MY_KEY ASC
        FOR XML PATH(''), TYPE
        ).value('.', 'NVARCHAR(MAX)') 
    ,1,1,'')
set @query = 'SELECT ID,' + @cols + ' from 
         (
            select ID, MY_KEY, VAL 
            from yt
        ) x
        pivot 
        (
            sum(VAL)
            for MY_KEY in (' + @cols + ')
        ) p '

        execute(@query); 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-11-28T13:53:22.637

```
select * from (select name, ID from Empoyee) Visits
    pivot(sum(ID) for name
    in ([Emp1],
    [Emp2],
    [Emp3]
    ) ) as pivottable; 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-05-11T01:18:52.290

只是让您了解其他数据库如何解决此问题。`DolphinDB`还具有对旋转的内置支持，并且 sql 看起来更加直观和整洁。它就像指定键列 ( `Store`)、透视列 ( `Week`) 和计算指标 ( `sum(xCount)`) 一样简单。

```
//prepare a 10-million-row table
n=10000000
t=table(rand(100, n) + 1 as Store, rand(54, n) + 1 as Week, rand(100, n) + 1 as xCount)

//use pivot clause to generate a pivoted table pivot_t
pivot_t = select sum(xCount) from t pivot by Store, Week 
```

DolphinDB 是一个柱状高性能数据库。在戴尔 xps 笔记本电脑 (i7 cpu) 上，演示中的计算成本低至 546 毫秒。欲了解更多详情，请参考在线 DolphinDB 手册[https://www.dolphindb.com/help/index.html?pivotby.html](https://www.dolphindb.com/help/index.html?pivotby.html)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-11-16T11:23:14.480

Pivot 是 SQL 运算符之一，用于将输出中的唯一数据从一列转换为多列。这也意味着将行转换为列（旋转表）。让我们考虑这张表，

[![在此处输入图像描述](https://i.stack.imgur.com/iEOQ0.png)](https://i.stack.imgur.com/iEOQ0.png)

如果我想根据每个客户的产品类型（扬声器、玻璃、耳机）过滤此数据，请使用 Pivot 运算符。

```
Select CustmerName, Speaker, Glass, Headset  
from TblCustomer  
   Pivot  
    (  
     Sum(Price) for Product in ([Speaker],[Glass],[Headset])  
    ) as PivotTable 
```

[![在此处输入图像描述](https://i.stack.imgur.com/Y1kSv.png)](https://i.stack.imgur.com/Y1kSv.png)

# ios - 如何清除表格单元格imageView

> ID：15931613
> 
> 赞同：-1
> 
> 时间：2013-04-10T16:39:04.090
> 
> 标签：ios, objective-c, uitableview

当您在 cellForRowAtIndexPath 中重用表格单元格时，清除 cell.imageView.image 的最简单方法是什么？问题是当我滚动表格并开始加载新图像时，我仍然可以在几秒钟内看到以前的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:02:30.270

设置占位符 image`nil`或[imageview.image](http://developer.apple.com/library/ios/documentation/uikit/reference/UIImageView_Class/Reference/Reference.html#//apple_ref/occ/instp/UIImageView/image)。

# android - 获取选中复选框的位置

> ID：15931618
> 
> 赞同：2
> 
> 时间：2013-04-10T16:39:10.427
> 
> 标签：android, listview, checkbox

我有一个关于获取所选文件位置的奇怪问题。它最多只能获取前 6 个文件。如果我在第 7 个文件上选择，则它不会返回任何内容。如果我只是点击第 7 个文件。它会将我作为第一个文件返回。

编辑：我认为问题是由于我滚动时视图发生了变化，并且复选框被重置。

这是我的代码的一部分。

```
private boolean[] selection;  
private int count;
private List<Media> getMediaList = new ArrayList<Media>();
private ArrayList<String> storeSelectedMedia = new ArrayList<String>();

String[] projection = {
            MediaStore.Video.Media._ID,
            MediaStore.Video.Media.ARTIST,
            MediaStore.Video.Media.TITLE,
            MediaStore.Video.Media.DATA,
            MediaStore.Video.Media.DISPLAY_NAME,
            MediaStore.Video.Media.DURATION,
            MediaStore.Video.Media.SIZE
    };

    cursor = getContentResolver().query(
            MediaStore.Video.Media.EXTERNAL_CONTENT_URI,
            projection,
            null,
            null,
            null);

    while(cursor.moveToNext()){
        getMediaList.add(new Media (cursor.getString(2), cursor.getString(6), cursor.getString(3), cursor.getString(5)));
        //Log.i("media", "" + cursor.getString(5));
    }

    cursor.close ();
    count = getMediaList.size();  
    Log.i("MediaSize", "" + count);
    selection = new boolean[count];  

    ArrayAdapter<Media> adapter = new MyMediaAdapter(this, getMediaList);
    setListAdapter(adapter);

public class MyMediaAdapter extends ArrayAdapter<Media> {

    private final List<Media> list;
    private final Activity context;

    public MyMediaAdapter(Activity context, List<Media> list) {
        super(context, R.layout.media_view, list);
        this.context = context;
        this.list = list;
    }

    private class ViewHolder {
        protected TextView fName, fSub, fDuration, fSize;
        protected CheckBox checkbox;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View view = null;
        if (convertView == null) {
            LayoutInflater inflator = context.getLayoutInflater();
            view = inflator.inflate(R.layout.media_view, null);
            final ViewHolder viewHolder = new ViewHolder();
            viewHolder.fName = (TextView) view.findViewById(R.id.tvfname);
            viewHolder.fSub = (TextView) view.findViewById(R.id.tvsub);
            viewHolder.fDuration = (TextView) view.findViewById(R.id.tvduration);
            viewHolder.fSize = (TextView) view.findViewById(R.id.tvsize);
            viewHolder.checkbox = (CheckBox) view.findViewById(R.id.check);
            viewHolder.checkbox.setId(position);
            viewHolder.checkbox.setOnClickListener(new OnClickListener() {  
                public void onClick(View v) {  
                    // TODO Auto-generated method stub  
                    CheckBox cb = (CheckBox) v;  
                    int id = cb.getId();  
                    if (selection[id]) {  
                        cb.setChecked(false);  
                        selection[id] = false;  
                    } else {  
                        cb.setChecked(true);  
                        selection[id] = true;  
                    }  
                }  
            });  
            view.setTag(viewHolder);
            viewHolder.checkbox.setTag(list.get(position));
        } else {
            view = convertView;
            ((ViewHolder) view.getTag()).checkbox.setTag(list.get(position));
        }
        ViewHolder holder = (ViewHolder) view.getTag();
        holder.fName.setText(list.get(position).getName());
        holder.fSub.setText(list.get(position).getPath());
        // Converting duration from String to Long
        long milli = Long.valueOf(list.get(position).getDuration());
        // Put it in % min, % sec format to display
        holder.fDuration.setText(String.format("%d:%d sec", 
                TimeUnit.MILLISECONDS.toMinutes(milli),
                TimeUnit.MILLISECONDS.toSeconds(milli) - 
                TimeUnit.MINUTES.toSeconds(TimeUnit.MILLISECONDS.toMinutes(milli))
            ));

        // Convert data size from String to Long
        long datasize = Long.valueOf(list.get(position).getData());
        // Put in human readable format
        holder.fSize.setText(readableFileSize(datasize));
        holder.checkbox.setChecked(list.get(position).isSelected());
        return view;
    }
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {

    final ArrayList<Integer> posSel = new ArrayList<Integer>();  

    posSel.clear();  
    storeSelectedMedia.clear();

    /*
     * Construct the list of selected items
     */
    boolean noSelect = false;  
    Log.i("MediaSelection", "" + selection.length);
    for (int i = 0; i < selection.length; i++) {  
        if (selection[i] == true) { 
            noSelect = true;  
            Log.e("Mediasel pos thu-->", "" + i);  
            posSel.add(i);  
            storeSelectedMedia.add(getMediaList.get(i).getPath());
        }  
    }

    switch (item.getItemId()) {

    case R.id.action_refresh:
        try {
            rescanSdcard();
        } catch (Exception e1) {
            // TODO Auto-generated catch block
            e1.printStackTrace();
        }
        Toast.makeText(this, "Action refresh selected", Toast.LENGTH_SHORT)
        .show();
        finish();
        startActivity(getIntent());
        break;

    case R.id.action_findfile:
        if (noSelect) {
        if (storeSelectedMedia.size() > 0) {

            for (String file : storeSelectedMedia) {
                try {
                    // Doing something
                    Log.i("Media", file.toString());
                } catch (Exception e) {
                    Toast.makeText(this,  
                            "Exception: '" + e.getMessage(),  
                            Toast.LENGTH_LONG).show();
                }
            }
        } 
```

我与 Log.i（“媒体”）相关的日志我选择了 7 个文件。但它只在日志中显示 6。

```
 04-11 00:31:26.879: I/MediaSelection(23155): 22
04-11 00:31:26.879: E/Mediasel pos thu-->(23155): 0
04-11 00:31:26.879: E/Mediasel pos thu-->(23155): 1
04-11 00:31:26.879: E/Mediasel pos thu-->(23155): 2
04-11 00:31:26.879: E/Mediasel pos thu-->(23155): 3
04-11 00:31:26.879: E/Mediasel pos thu-->(23155): 4
04-11 00:31:26.879: E/Mediasel pos thu-->(23155): 5
04-11 00:31:26.889: I/Media(23155): /storage/sdcard0/DCIM/100MEDIA/VIDEO0001.3gp
04-11 00:31:26.889: I/Media(23155): /storage/sdcard0/DCIM/100MEDIA/VIDEO0002.3gp
04-11 00:31:26.889: I/Media(23155): /storage/sdcard0/DCIM/100MEDIA/VIDEO0004.mp4
04-11 00:31:26.889: I/Media(23155): /storage/sdcard0/DCIM/100MEDIA/VIDEO0001.mp4
04-11 00:31:26.889: I/Media(23155): /storage/sdcard0/DCIM/100MEDIA/VIDEO0002.mp4
04-11 00:31:26.889: I/Media(23155): /storage/sdcard0/DCIM/100MEDIA/VIDEO0003.mp4
04-11 00:31:27.059: I/MediaSize(23155): 22
04-11 00:31:52.243: I/MediaSelection(23155): 22
04-11 00:31:52.243: E/Mediasel pos thu-->(23155): 0
04-11 00:31:52.243: I/Media(23155): /storage/sdcard0/DCIM/100MEDIA/VIDEO0001.3gp
04-11 00:31:52.353: I/MediaSize(23155): 22 
```

不知道哪里出错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:28:20.993

如果您正在使用该`ViewHolder`模式，那么您需要了解您的列表中的每个项目都没有一个`ViewHolder`。对于Android 正在为您回收的`ViewHolder`每个s，您只有一个。`View`如果您可以在显示器上放置 6 个项目，那么您可能会有 8 或 9`ViewHolder`秒。这意味着当`getView()`被调用时，您需要更新`ViewHolder`与正在显示的项目相关的所有内容。在您的情况下，这意味着您需要移动此代码：

```
 viewHolder.checkbox.setId(position);
    viewHolder.checkbox.setTag(list.get(position)); 
```

走出困境`if`并在**所有情况下**都这样做（无论您是刚刚创建了一个`ViewHolder`还是刚刚回收了一个）。我会这样做：

```
 } else {
        view = convertView;
        viewHolder = (ViewHolder) view.getTag();
    }
    viewHolder.checkbox.setTag(list.get(position));
    viewHolder.checkbox.setId(position); 
```

此外，您应该将您的`ViewHolder`类声明为`static`，因为它不需要对周围类的引用。

# javascript - 为什么在谷歌浏览器中拖动滚动条时 mousemove 不触发？

> ID：15931620
> 
> 赞同：2
> 
> 时间：2013-04-10T16:39:13.960
> 
> 标签：javascript, google-chrome

有谁知道如何解决这个问题或找到替代解决方案？

提前致谢。

这是一个简单的例子

**html**

```
<div id="parent">
  <div id="child"></div>
</div> 
```

**css**

```
#parent { width: 200px; height: 100px; overflow: scroll }
#child { width: 1000px; height: 10px;} 
```

**js**

```
window.onmousemove = function(e)  {
    console.log(e.pageX);
}; 
```

# php - 什么是带有两个 $ 符号的变量？$$ myVar

> ID：15931621
> 
> 赞同：-6
> 
> 时间：2013-04-10T16:39:14.860
> 
> 标签：php, variables

我在求职面试的 php 测试中看到了 $$var。我想知道它是什么..

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:41:30.297

变量变量 - 检查链接！

[变量变量](http://php.net/manual/en/language.variables.variable.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:40:48.937

这将引用特定变量的值。

例如：

```
$test = "Hi";

$var  = "test"; 
```

现在`$$var`将显示**“嗨”**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:41:43.270

```
$var = 'something';
$$var = 'lol';

echo $something will output "lol" 
```

它是一个变量变量。

# c++ - 在 C++ 中的派生类之间切换

> ID：15931624
> 
> 赞同：0
> 
> 时间：2013-04-10T16:39:20.037
> 
> 标签：c++, inheritance

这是我能找到的最接近[可能重复](https://stackoverflow.com/questions/10951504/changing-an-object-from-one-derived-class-to-anothe)的东西。然而，答案仍然给我留下了疑问。

这是一个代码示例：

```
class A {
   A() {}
   virtual void print() = 0;
}

class B : public A {
   B() {}
   void print() { printf("B"); }
}

class C : public A {
   C() {}
   void print() { printf("C"); }
}

int main() {
   A** n;

   n = new A*[4];
   n[0] = new B;
   n[1] = new C;
   n[2] = new B;
   n[3] = new C;

   for(int i = 0; i < 4; i++)
      n[i]->print();
   printf("\n");

   delete n[0];
   delete n[1];
   delete n[2];
   delete n[3];
   delete [] n;
} 
```

使用这段代码，您将获得“BCBC”。有没有办法在**不分配新对象**的情况下更改派生类类型？就像是：

```
n[2] = (C*)n[2]; 
```

因此，当您打印出数组时，您现在会得到“BCCC”。我在链接的帖子中读到，必须这样做是设计不佳的证据。如果是这样的话，能解释一下吗？对我来说，这似乎是面向对象设计的一个正常且频繁的用例。假设所有属性都在基类中定义。类的唯一区别在于方法的实现。

如果 C++ 不支持在运行时更改这样的对象类型，那么获得类似结果的公认方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:52:50.070

最接近的方法是在 B 和 C 构造函数中实现，它们将接受 A（或 A*）作为输入并将任何需要的数据复制到新对象中。然后你应该得到这样的东西。

```
A* temp = n[2];  
n[2] = new C(A);  
delete temp; 
```

但更好的解决方案是创建将保存数据的类，并且 A* 指向实现不同数据操作方式的类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:46:35.300

我不相信你可以从 B 类转换到 C 类。这两个类也是 A 类，因为 B 是 A，C 是 A，但是 B 不是 C，C 不是 B。要么可以转换为 A 但由于切片问题，这是一种危险的做法。在这种情况下，派生类中的数据不会因强制转换而丢失，因此您不会丢失任何东西。但是，您无需将 B 或 C 转换为 A 即可调用父类方法。

也许可以编写一个将 B 对象作为输入并返回 C 对象的函数和一个将 C 对象作为返回 B 对象的函数，但您必须自己完成所有工作，手动将其转换为其他。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T17:14:11.257

一旦创建了对象，您就无法*真正更改它的类型。*但这并不意味着您不能在运行时更改行为。你需要做的是重构你的代码。

```
class A;

class ImplA
{
public:
  void print (A&) = 0;
};

class A
{
  std::unique_ptr<ImplA> impl;

public:
  A (ImplA* ia) : impl(ia)
  {}

  void print()
  {
    impl->print(*this);
  }

  void changeImpl (ImplA* ia)
  {
    impl.reset(ia);
  }
}; 
```

这当然是使用 C++11 的智能指针，但无论如何想法都是一样的。您应用软件工程的基本定理：抽象变化的事物。

我建议您阅读设计模式。它会在不破坏 OOP 工作方式的情况下为您提供做您想做的事情的想法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T16:42:48.990

指针指向的对象`n[2]`是`B`对象。它不能神奇地变成一个`C`物体。如果你想要一个`C`对象，你将不得不创建一个。但是，不要忘记`delete`现有`B`对象。

```
delete n[2];
n[2] = new C; 
```

# jquery - jquery.form.js 图片上传在 IE 中不起作用

> ID：15931626
> 
> 赞同：0
> 
> 时间：2013-04-10T16:39:29.173
> 
> 标签：jquery, internet-explorer, jquery-plugins, file-upload

我正在使用 jquery.form.js 上传图片，它可以在除 IE 之外的所有浏览器中使用。版本：3.32.0-2013.04.03

我收到 SCRIPT5：访问被拒绝。jquery.form.js，第 531 行字符 21

我还使用自定义上传按钮来提交文件，这可能是问题的一部分，但我不确定。

我什至尝试更改为另一个插件但没有成功，但我真的很想让这个插件工作，因为我在网站的其他页面中使用该插件。

HTML： `<input type="button" id="uploadButton" name="upload" value="" class="uploadButton"/> <br><div id="uploadLimit">Images cannot exceed 5mb.</div> <form id="uploadForm" action="inc/ajax-ftlib.php" method="post" enctype="multipart/form-data" style="position:absolute;left:-99999px;"> <input id="uploadFile" type="file" name="image" /> <input type="submit" value="Submit" id="submit-btn" /> <input type="hidden" name="cmd" value="uploadImage"> <input type="hidden" name="postId" value="0"> </form>`

JS：

```
// hook up custom upload button
  $('#uploadButton').bind('click', function() {
    $('#uploadFile').trigger('click');
  });
  $('#uploadFile').bind('change', function() {
    $('#submit-btn').trigger('click');
  });

var options = {iframe: true, dataType: 'json', beforeSubmit: imageUploadRequest, success: imageUploadResponse, uploadProgress: imageUploadProgress, submit: imageUploadSubmit};
  $form = $('#uploadForm');
  $form.ajaxForm(options);

function imageUploadResponse(response){
  var fileName = response;
  //alert(fileName);
  // add the image to the thumbnail ui here / remove any loader image
  var path = "img/post/" + postId + "/" + fileName;
  var $newdiv = $('<div class="item" name=' + fileName + '><input type="button" class="thumbClose"/></div>');
  $newdiv.css('background-image', 'url(' + path + ')');
  $("#list").append($newdiv);

  $('#uploadButton').show();
  $('#uploadLimit').show();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:49:16.493

如果选择的文件输入被 JavaScript 篡改，则 IE 不允许您上传文件。触发该点击事件会污染您的文件输入，因此如果您尝试上传文件，您将被拒绝访问。另请参阅[IE8 上的访问被拒绝错误](https://stackoverflow.com/questions/3935001/getting-access-is-denied-error-on-ie8/4335390#4335390)

# ruby-on-rails - 当“朋友”删除他的帐户时，如何从数据库中删除友谊？

> ID：15931628
> 
> 赞同：0
> 
> 时间：2013-04-10T16:39:34.893
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, ruby-on-rails-3.2

我已经成功实现了一个友谊模型，它在创建友谊时会在数据库中创建两行。

```
 # Accept a friend request.
  def self.accept(customer, friend)
    transaction do
      accepted_at = Time.now
      accept_one_side(customer, friend, accepted_at)
      accept_one_side(friend, customer, accepted_at)
    end
  end

  # Update the db with one side of an accepted friendship request.
  def self.accept_one_side(customer, friend, accepted_at)
    request = find_by_customer_id_and_friend_id(customer, friend)
    request.status = 'accepted'
    request.accepted_at = accepted_at
    request.save!
  end 
```

现在当用户 A 删除他的帐户时，我如何确保数据库中的整个友谊（两行）也被删除。我相信`dependent: destroy`只有在删除他的帐户后才会删除与用户 A 相关的数据。但我也希望删除属于用户 B 的数据库中的另一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:52:25.027

首先，为什么要创建两条记录？这不是那么有效而且是多余的，一条记录就足够了。在这里查看一个很棒的指南：[http ://railscasts.com/episodes/163-self-referential-association](http://railscasts.com/episodes/163-self-referential-association)

`belongs_to`无论如何，即使在这种情况下，它也应该删除两个友谊记录，因为我想，您的 Friendship 模型的两个 id 在两个记录中都与一个用户绑定了两次。

您是否尝试过两者都将被删除？

如果不是这种情况（但应该是这种情况），您可以`before_destroy`在 User 模型中使用回调来删除另一条记录。

# c# - 这个前缀在我的 C# 函数前面是什么意思

> ID：15931630
> 
> 赞同：-2
> 
> 时间：2013-04-10T16:39:40.320
> 
> 标签：c#, xslt

**str:**前缀是什么意思？就在mycsharpextmethod前面

```
<xsl:template name="name1">
        <xsl:param name="text" select="." />
        <xsl:value-of disable-output-escaping="yes" select="str:mycsharpextmethod($text)" />
    </xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:38:07.407

在没有看到整个文档的情况下，我猜它是一个命名空间引用（以避免与任何其他名为 的方法发生冲突`mycsharpextmethod`）。从[`W3 Namespaces in XML 1.0 Spec`](http://www.w3.org/TR/REC-xml-names/#ns-qualnames)（强调我的）：

> 在符合本规范的 XML 文档中，某些名称（对应于非终结名称的结构）必须作为限定名称给出……**前缀提供限定名称的名称空间前缀部分，并且必须与名称空间 URI 引用相关联命名空间声明。**LocalPart 提供限定名称的本地部分。

作为一个（稍微不相关的）示例，[`EXSLT String Library`](http://www.exslt.org/str/)使用`str:`前缀来正确命名任何与字符串相关的函数。

# javascript - HTML 收音机在 Javascript 函数的 newPage 上显示输出

> ID：15931634
> 
> 赞同：0
> 
> 时间：2013-04-10T16:40:02.340
> 
> 标签：javascript, html

在输入所有信息后，我有一个学校项目涉及酒店的账单。我希望`newPage`在`function displayBill()`javascript 下显示“折扣：20 美元”，仅当错误折扣在 html 表单上被选中为是时。当有人在表单上选择 no 选项时，javascript 函数应该说`bugDiscount = 0`，但是，我不希望折扣显示在新页面上（账单摘要）。我知道它会显示出来，因为当`displayBill()`调用该函数时，它总是显示折扣。我应该做2个不同`displayBill()`的，1个有折扣，1个没有？或者有更简单的方法吗？

这是html代码：

```
<form>
    Guest ID Number: <input type="text" id="custID" /><br />
    Room Type: 
    <select id="roomType" />
        <option></option>
        <option>Double</option>
        <option>Single</option>
        <option>Parlor</option>
    </select><br />
    Length of Stay: <input type="text" id="stayLength" name="numOranges" /><br />
    Number of Drinks: <input type="text" id="drinkNum" name="numOranges" /><br />
    Number of Towels: <input type="text" id="towelNum" name="numOranges" /><br />
    Number of Flushes: <input type="text" id="flushNum" name="numOranges" /><br />
    Bug Complaints?: <br /> <label>
        <input type="radio" name="bugComplaint" value="Yes" onclick="getCheckedRadio(this)" />Yes<br />
        <input type="radio" name="bugComplaint" value="No" onclick="getCheckedRadio(this)" />No<br />
        <br />
    Customer Comments: <br />
    <textarea name="customerComment" cols="50" rows="5">Enter your comments here...</textarea> <br />
    <br />

    <input type="button" onclick="calculateFinalBill()" value="Calculate">
</form> 
```

这是Javascript：

```
const doublePrice = 150;
const singlePrice = 100;
const parlorPrice = 80;
const drinkPrice = 5;
const towelPrice = 3;
const flushPrice = 1;

var custID;
var roomPrice;
var stayLength;
var drinkNum;
var towelNum;
var flushNum;
var totalDue;
var subtotal;
var roomType;
var bugDiscount;

function calculateFinalBill() {
validateForm();
    if(roomType == "Double"){
    roomPrice = doublePrice;
    }

    if(roomType == "Single"){
    roomPrice = singlePrice;
    }

    if(roomType == "Parlor"){
    roomPrice = parlorPrice;
    }

    roomTotal = roomPrice * stayLength

    towelTotal = towelPrice * towelNum

    flushTotal = flushPrice * flushNum

    drinkTotal = drinkPrice * drinkNum

    subtotal = roomTotal + towelTotal + flushTotal + drinkTotal

    totalDue = subtotal - bugDiscount

    displayBill();
}

function getCheckedRadio(which){
var bugValue = which.value;
    if (bugValue == "No"){
    bugDiscount = 0;
    }
    if (bugValue == "Yes"){
    bugDiscount = 20;
    }
}

function validateForm(){
custID = parseInt(document.getElementById("custID").value);
if(isNaN(custID)){
    alert('Customer ID must be a number');
    return;
}
if(custID <= 0){
    alert('Customer ID must be greater than zero');
    return;
}

roomType = document.getElementById("roomType").value;
if(roomType == ""){
    alert("Room type must be selected");
    return;
}

stayLength = parseInt(document.getElementById("stayLength").value);
if(isNaN(stayLength)){
    alert('Length of Stay must be a number');
    }
if(stayLength < 0){
    alert('Length of Stay must be greater than zero');
    return;
}

drinkNum = parseInt(document.getElementById("drinkNum").value);
if(isNaN(drinkNum)){
    alert('Number of Drinks must be a number');
    }
if(drinkNum < 0 || drinkNum > 25){
    alert('Number of Drinks must be 0-25');
    return;
}

towelNum = parseInt(document.getElementById("towelNum").value);
if(isNaN(towelNum)){
    alert('Number of Towels must be a number');
    }
if(towelNum < 0){
    alert('Number of Towels must be zero or greater');
    return;
}

flushNum = parseInt(document.getElementById("flushNum").value);
if(isNaN(flushNum)){
    alert('Number of Flushes must be a number');
    }
if(flushNum < 0){
    alert('Number of Flushes must be zero or greater');
    return;
}

customerComment = document.getElementById("customerComment");
}

function displayBill(){
var newPage =  "<html><head><title>Billing Summary</title></head>"; //Add CSS after title
    newPage += "<body><h1>Happy Hoppin Hotel</h1>";
    newPage += "<h2>Guest Billing Summary</h2>";
    newPage += "Guest Identification: " + custID;
    newPage += "<br />";
    newPage += "Room Type: " + roomType;
    newPage += "<br />";
    newPage += "Length of Stay: " + stayLength;
    newPage += "<br />";
    newPage += "Room Charge: $" + roomTotal;
    newPage += "<br />";
    newPage += "Drink Charge: $" + drinkTotal;
    newPage += "<br />";
    newPage += "Towel Charge: $" + towelTotal;
    newPage += "<br />";
    newPage += "Flushing Charge: $" + flushTotal;
    newPage += "<br />";
    newPage += "Subtotal: $" + subtotal;
    newPage += "<br />";
    newPage += "Discount: $" + bugDiscount;
    newPage += "<br />";
    newPage += "Total Due: $" + totalDue;
    newPage += "<br />";

var j = window.open('','','width=400,height=500');
j.document.write(newPage);
j.document.close();
} 
```

这是有错误折扣时新页面（账单摘要）的样子[http://i.imgur.com/2ipm4LL.jpg](http://i.imgur.com/2ipm4LL.jpg)

如果没有错误折扣，这就是它的样子[http://i.imgur.com/amYl1fu.jpg](http://i.imgur.com/amYl1fu.jpg)

如果我的问题令人困惑，请指定我需要澄清的内容。我在思考如何在不让人困惑的情况下提出这个问题时遇到了麻烦。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:47:02.903

您的问题确实很不清楚，因为也不清楚您为什么要在 javascript 中执行所有这些操作。无论如何，您可以做的是测试 bugDiscount 值：

```
function displayBill(){
var newPage =  "<html><head><title>Billing Summary</title></head>"; //Add CSS after title
    newPage += "<body><h1>Happy Hoppin Hotel</h1>";
    newPage += "<h2>Guest Billing Summary</h2>";
    newPage += "Guest Identification: " + custID;
    newPage += "<br />";
    newPage += "Room Type: " + roomType;
    newPage += "<br />";
    newPage += "Length of Stay: " + stayLength;
    newPage += "<br />";
    newPage += "Room Charge: $" + roomTotal;
    newPage += "<br />";
    newPage += "Drink Charge: $" + drinkTotal;
    newPage += "<br />";
    newPage += "Towel Charge: $" + towelTotal;
    newPage += "<br />";
    newPage += "Flushing Charge: $" + flushTotal;
    newPage += "<br />";
    newPage += "Subtotal: $" + subtotal;
    newPage += "<br />";
    if(bugdiscount != 0)
    {
        newPage += "Discount: $" + bugDiscount;
        newPage += "<br />";
    }
    newPage += "Total Due: $" + totalDue;
    newPage += "<br />";

var j = window.open('','','width=400,height=500');
j.document.write(newPage);
j.document.close();
} 
```

# winforms - RichTextBox 支持显示哪些类型的文件？

> ID：15931635
> 
> 赞同：0
> 
> 时间：2013-04-10T16:40:04.067
> 
> 标签：winforms, richtextbox

我查看了 MSDN，但无法找到可以在 Winforms 的 RichTextBox 中显示的文件类型（扩展名）。

我编写了一个应用程序，允许用户根据用户选择的文件扩展名显示特定文件夹中的文件。例如仅显示 .txt 和 .html 并忽略其他任何内容。

因此，我需要一个能够正确呈现的扩展的详尽列表，以便我可以填充一个列表供用户选择。

我不认为它是相关的，但我使用的是 C#。

任何帮助表示赞赏。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:16:36.963

从 MSDN 的文档来看，它似乎`RichTextBox`仅用于打开 .rtf 文件，但也可以使用`LoadFile`带有`RichTextBoxStreamType`参数的方法打开纯文本 (.txt) ASCII 和 Unicode 文件。

资料来源：

*   [RichTextBox.LoadFile 方法](http://msdn.microsoft.com/en-us/library/d76176b1.aspx)
*   [RichTextBoxStreamType 枚举](http://msdn.microsoft.com/en-us/library/system.windows.forms.richtextboxstreamtype.aspx)

# c# - 以相反的顺序一次一个字节地读取文件

> ID：15931639
> 
> 赞同：4
> 
> 时间：2013-04-10T16:40:11.187
> 
> 标签：c#

嗨，我正在尝试以相反的顺序一次读取一个文件。到目前为止，我只设法从头到尾读取文件并将其写入另一个文件。

我需要能够从头到尾读取文件并将其打印到另一个文件。

这是我到目前为止所拥有的：

```
 string fileName = Console.ReadLine();
        using (FileStream file = new FileStream(fileName ,FileMode.Open , FileAccess.Read))
        {

            //file.Seek(endOfFile, SeekOrigin.End);

            int bytes;
            using (FileStream newFile = new FileStream("newsFile.txt" , FileMode.Create , FileAccess.Write))
            {
                while ((bytes = file.ReadByte()) >= 0)
                {
                    Console.WriteLine(bytes.ToString());
                    newFile.WriteByte((byte)bytes);
                }
            }
        } 
```

我知道我必须在 fileStream 上使用 Seek 方法，这会让我到达文件的末尾。我已经在代码的注释部分这样做了，但我现在不知道如何读取文件环形。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:56:49.553

```
 string fileName = Console.ReadLine();
    using (FileStream file = new FileStream(fileName, FileMode.Open, FileAccess.Read))
    {
        byte[] output = new byte[file.Length]; // reversed file 

        // read the file backwards using SeekOrigin.Current
        //
        long offset;
        file.Seek(0, SeekOrigin.End);        
        for (offset = 0; offset < fs.Length; offset++)
        {
           file.Seek(-1, SeekOrigin.Current);
           output[offset] = (byte)file.ReadByte();
           file.Seek(-1, SeekOrigin.Current);
        }

        // write entire reversed file array to new file
        //
        File.WriteAllBytes("newsFile.txt", output);
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:33:19.700

您可以一次读取一个字节，或者您可以读取一个更大的缓冲区，将其反向写入输出文件，然后像这样继续，直到到达文件的开头。例如：

```
string inputFilename = "inputFile.txt";
string outputFilename = "outputFile.txt";
using (ofile = File.OpenWrite(outputFilename))
{
    using (ifile = File.OpenRead(inputFilename))
    {
        int bufferSize = 4096;
        byte[] buffer = new byte[bufferSize];
        long filePos = ifile.Length;
        do
        {
            long newPos = Math.Max(0, filePos - bufferSize);
            int bytesToRead = (int)(filePos - newPos);
            ifile.Seek(newPos, SeekOrigin.Set);
            int bytesRead = ifile.Read(buffer, 0, bytesToRead);
            // write the buffer to the output file, in reverse
            for (int i = bytesRead-1; i >= 0; --i)
            {
                ofile.WriteByte(buffer[i]);
            }
            filePos = newPos;
        } while (filePos > 0);
    }
} 
```

一个明显的优化是在您读取缓冲区后反转缓冲区，然后将其以一整块的形式写入输出文件。

如果您知道该文件将适合内存，那真的很容易：

```
var buffer = File.ReadAllBytes(inputFilename);
// now, reverse the buffer
int i = 0;
int j = buffer.Length-1;
while (i < j)
{
    byte b = buffer[i];
    buffer[i] = buffer[j];
    buffer[j] = b;
    ++i;
    --j;
}
// and write it
File.WriteAllBytes(outputFilename, buffer); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-09T15:21:25.930

如果文件很小（适合您的 RAM），那么这将起作用：

```
public static IEnumerable<byte> Reverse(string inputFilename)
{
    var bytes = File.ReadAllBytes(inputFilename);
    Array.Reverse(bytes);

    foreach (var b in bytes)
    {
        yield return b;
    }
} 
```

用法：

```
foreach (var b in Reverse("smallfile.dat"))
{

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-09T15:25:31.313

如果文件很大（比您的 RAM 大），那么这将起作用：

```
using (var inputFile = File.OpenRead("bigfile.dat"))
using (var inputFileReversed = new ReverseStream(inputFile))
using (var binaryReader = new BinaryReader(inputFileReversed))
{
    while (binaryReader.BaseStream.Position != binaryReader.BaseStream.Length)
    {
        var b = binaryReader.ReadByte();
    }
} 
```

它使用`ReverseStream`可以在[此处](https://stackoverflow.com/a/68324133/171846)找到的类。

# c# - 在循环c#中编写XML

> ID：15931640
> 
> 赞同：2
> 
> 时间：2013-04-10T16:40:11.650
> 
> 标签：c#, xml, linq

我将如何写出xml

```
<?xml version="1.0" encoding="UTF-8"?>
<calibration>
  <ZoomLevel 250>0.0100502512562814</ZoomLevel 250>
  <ZoomLevel 250>0.0100502512562814</ZoomLevel 250>
  ........
</calibration> 
```

我知道如何写出来，但我不能在一个循环中写出来，我需要 atm 我有写 xml 表是

```
public void XMLWrite(Dictionary<string, double> dict)
{
    //write the dictonary into an xml file
    XmlDocument doc = new XmlDocument();
    XmlNode docNode = doc.CreateXmlDeclaration("1.0", "UTF-8", null);
    doc.AppendChild(docNode);

    XmlNode productsNode = doc.CreateElement("calibration");
    doc.AppendChild(productsNode);

    foreach (KeyValuePair<string, double> entry in dict)
    {
        XmlNode zoomNode = doc.CreateElement("ZoomLevel");

        XmlAttribute ZoomLevel = doc.CreateAttribute(entry.Key.ToString());
        //XmlElement PixelSize = doc.CreateElement (entry.key = entry.Value.ToString());
        zoomNode.Attributes.Append(ZoomLevel);

        productsNode.AppendChild(zoomNode);
    }
    doc.Save(pathName);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T17:10:00.027

正如其他人所说，您想要的 xml 无效。我注意到的另一件事是，在您的示例中，有两个节点的级别缩放为*250*，这是字典的一个键，并且您知道它应该是**唯一的**。但是我建议您使用更简单的**LINQ to XML** ( `System.Xml.Linq`)，那么：

```
public void XMLWrite( Dictionary<string, double> dict ) {
   //LINQ to XML
   XDocument doc = new XDocument( new XElement( "calibration" ) );

   foreach ( KeyValuePair<string, double> entry in dict )
     doc.Root.Add( new XElement( "zoom", entry.Value.ToString( ), new XAttribute( "level", entry.Key.ToString( ) ) ) );

   doc.Save( pathName );
} 
```

我通过传递这个字典测试了这段代码：

```
"250", 0.110050251256281
"150", 0.810050256425628
"850", 0.701005025125628
"550", 0.910050251256281 
```

结果是：

```
<?xml version="1.0" encoding="utf-8"?>
<calibration>
  <zoom level="250">0,110050251256281</zoom>
  <zoom level="150">0,810050256425628</zoom>
  <zoom level="850">0,701005025125628</zoom>
  <zoom level="550">0,910050251256281</zoom>
</calibration> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:51:13.257

正如 Michiel 在评论中指出的那样，您要创建的 XML 无效。从[W3C XML 规范](http://www.w3.org/TR/2008/REC-xml-20081126/#NT-Name)开始：

> 几乎所有字符都可以在名称中使用，除了那些可以用作或可以合理用作分隔符的字符。

您可能想要生成这样的东西：

```
<?xml version="1.0" encoding="UTF-8"?>
<calibration>
  <zoom level="250">0.0100502512562814</zoom>
  <zoom level="260">0.0100502512562815</zoom>
</calibration> 
```

使用这样的代码片段生成：

```
foreach (KeyValuePair<string, double> entry in dict)
{
  var node = doc.CreateElement("zoom");

  var attribute = doc.CreateAttribute("level");
  attribute.Value = entry.Key;

  node.InnerText = entry.Value.ToString(CultureInfo.InvariantCulture);

  node.Attributes.Append(attribute);

  productsNode.AppendChild(node);
} 
```

# asp.net-mvc - 如何使用 ajax get 将数据从 View 传递到 Controller 或使用参数在 mvc 中发布

> ID：15931641
> 
> 赞同：4
> 
> 时间：2013-04-10T16:40:12.150
> 
> 标签：asp.net-mvc, jquery, parameter-passing, viewbag, asp.net-mvc-views

我正在尝试使用 ajax 将数据从视图传递到控制器操作方法，如下所示：-

我有用户的 Membership 实例，我使用 viewbag 从另一个控制器传递到下面的这个视图，有点像这个 ViewBag.MyUser = MyUser;

现在我想使用 ajax 将“MyUser”传递给另一个控制器，如下所示。

```
 $('#Link').click(function () {      
        $.ajax({
            url: http://localhost/Account/Process,
            type: 'POST',
            data: '@ViewBag.MyUser',
            success: function () {
            },
            error: function () {                
            }
        }); 
```

我发布的 ActionMethod 如下

```
public ActionResult Process(MembershipUser MyUser)
{
   //Do somethihng with MyUser
} 
```

如果我通过 do ajax post，我会在内部收到错误 `BeginExecuteCore(AsyncCallback callback, object state)`声明“没有为此对象定义无参数构造函数”。我的行动方法甚至没有控制权。

如果我`(MembershipUser MyUser)`从 Action Method 中删除参数，它会发布到 Action 方法，但随后

1.  在这种情况下，我怎样才能将“MyUser”从该视图传递给控制器​​而没有参数？
2.  路线有问题吗？如果是的话应该是什么路线？
3.  还是我应该使用 get 或 post ？
4.  我应该在哪里将 MyUser 转换回 MembershipUser ？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T18:08:11.720

问题是您不能将*MyUser*作为 JQuery 的参数传递，因为 JQuery 不知道类*MembershipUser*。请记住，JQuery 是一种客户端语言，而*MembershipUser*是在服务器端的 C# 中定义的。

您可以使用*GET将**MyUser*对象中所需的属性传递给*Process*操作，如下所示（假设*MyUser*对象具有和*ID*为 a *Name*）：

 ***```
$('#Link').click(function () {      
    $.ajax({
        url: http://localhost/Account/Process,
        type: 'GET',
        data: { 
                id: "@ViewBag.MyUser.ID",
                name: "@ViewBag.MyUser.Name" 
              },
        success: function () {
        },
        error: function () {                
        }
    }); 
```

动作应该是这样的：

```
public ActionResult Process(int id, string name)
{
   //Do something
} 
```

我希望它对你有帮助！***

# ruby-on-rails - Rails 3 - NoMethodError：nil的未定义方法：每次迭代中的NilClass

> ID：15931645
> 
> 赞同：1
> 
> 时间：2013-04-10T16:40:26.247
> 
> 标签：ruby-on-rails, ruby, iteration

我正在遍历 Rails 模型的一组实例。这是我的代码：

```
product_details.each do |product_detail|
  product_detail.label = Backend::ProductGroup.where(product_group_number: product_detail.product_group).first.label

end 
```

'product_detail' 中的属性 'label' 不是我的 Rails ActiveRecord 模型中的属性。我在我的类定义中用 attr_accessor 添加了它。我这样做是因为我想动态添加这个属性，只有当我需要这样做的时候。当我在 Rails 控制台中运行没有“每次”迭代的代码时，它工作得很好。但是当我执行上面的代码时，我收到以下错误消息：

NoMethodError：nil 的未定义方法“标签”：NilClass

我做了什么明显错误的事情吗？提前谢谢了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:47:50.553

您可能有几个`product_detail`不匹配的项目`product_group`。所以调用`.first`空集合返回`nil`。要解决该错误，您可以在继续之前测试是否找到了 product_group：

```
product_details.each do |product_detail|
  product_group = Backend::ProductGroup.where(product_group_number: product_detail.product_group).first
  product_detail.label = product_group.label if product_group
end 
```

您也可以像这样更有效地执行此操作：

```
group_labels = BackEnd::ProductGroup.
                 where(product_group_number: product_details.map(&:product_group)).
                 inject({}){|m, g| m[g.product_group_number] = g.label; m}
product_details.each do |product_detail|
  product_detail.label = group_labels[product_detail.product_group]
end 
```

这将导致一个单一的数据库调用来获取所有相关组，并将标签放在一个键控散列中，以便于发现和分配。

# select - 如何选择一个道场TabBarButton？

> ID：15931648
> 
> 赞同：2
> 
> 时间：2013-04-10T16:40:31.653
> 
> 标签：select, button, dojo, tabbar

我有一个名为 divChal 的视图。当我将视图更改为该视图时，我还想将选项卡栏中的选定按钮更改为 ID 为 tabBarButtonChal 的按钮。我试过这样，这是行不通的。

```
var divChal = dijit.registry.byId("divChal");
dojo.aspect.after(divChal,"onBeforeTransitionIn", function(){
   var tabBarButtonChal = dijit.registry.byId("tabBarButtonChal");
   tabBarButtonChal.select();
}); 
```

问候汤姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T17:47:40.113

这种在节点上设置属性的方法是`set(property, value)`在其上调用：

```
dojo.aspect.after(divChal,"onBeforeTransitionIn", function(){
   dijit.registry.byId("tabBarButtonChal").set('selected', true);
}); 
```

# vb.net - 查找字符串 VB 的子字符串

> ID：15931649
> 
> 赞同：0
> 
> 时间：2013-04-10T16:40:36.277
> 
> 标签：vb.net

1.以下程序将从用户那里获得两个输入，即 A 和 B
2.然后从 B 中找到子字符串
。3.最后打印结果。

虽然我的代码是

```
 Dim a As String
    Dim b As String
    a = InputBox("Enter First String", a)
    b = InputBox("Enter 2nd String", b)
        Dim i As Integer
        Dim j As Integer = 0
        Dim k As Integer = 0
        Dim substr As Integer = 0
        For i = 0 To a.Length - 1

            If a(i) = b(j) Then
                j += 1

                If b(j) = 0 Then
                MsgBox("second string is substring of first one")
                    substr = 1
                    Exit For
                End If
            End If
        Next i
        For i = 0 To b.Length - 1
            If b(i) = a(k) Then
                k += 1
                If a(k) = 0 Then
                MsgBox(" first string  is substring of second string")
                    substr = 1
                    Exit For
                End If
            End If
        Next i
        If substr = 0 Then
        MsgBox("no substring present")
        End If
End Sub 
```

编译时会出现以下调试错误。

```
 Line Col
Error 1 Operator '=' is not defined for types 'Char' and 'Integer'. 17  24  
Error 2 Operator '=' is not defined for types 'Char' and 'Integer'. 27  24 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:54:18.247

这是因为这些行：

```
If b(j) = 0 Then

If a(k) = 0 Then 
```

`a(k)`两者`b(j)`都是 Char 数据类型（将字符串视为字符数组），但您试图将它们与 int (0) 进行比较。

如果您正在寻找子字符串并且您正在使用 VB.NET，您可以尝试使用该[`IndexOf`](http://msdn.microsoft.com/en-us/library/k8b1470s.aspx)方法，例如：

```
If a.IndexOf(b) > -1 Then
    MsgBox("b is a substring of a")
ElseIf b.IndexOf(a) > -1 Then
    MsgBox("a is a substring of b")     
Else
    MsgBox("No substring found")
End 
```

如果您使用的是 VBA，您也可以使用[`InStr`](http://www.techonthenet.com/excel/formulas/instr.php)，但我认为字符串是 1-indexed 而不是 0-indexed（因为它们在 VB.NET 中）所以您的检查可能类似于：

```
If InStr(a,b) > 0 Then
    MsgBox("b is a substring of a")
ElseIf InStr(b,a) > 0 Then
    MsgBox("a is a substring of b")     
Else
    MsgBox("No substring found")
End 
```

# centos - 管理 ROCKS 集群

> ID：15931650
> 
> 赞同：2
> 
> 时间：2013-04-10T16:40:36.673
> 
> 标签：centos, cluster-computing, rocks

我突然成为实验室集群的管理员，我迷路了。我有管理 linux 服务器但没有管理集群的经验。集群似乎完全不同。

我认为集群正在运行 CentOS 和 ROCKS。我不确定 SGE 是什么以及它是否在集群中使用。

您能否向我指出有关如何配置集群以及如何管理集群的概述或文档？我用谷歌搜索，但似乎有很多方法可以构建集群，而且从哪里开始令人困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-31T15:05:50.703

我也突然成为了 Rocks Clusters 的管理员。虽然您的 CentOS 知识会很方便，但您需要阅读一些“摇滚”的做事方式。它们大多从 CLI 命令 Rocks list|set 命令开始，当你开始学习它们时，它们非常好用。

您可能应该首先阅读文档（对于最新版本，您可以使用“rocks report version”找到您的文档）： [http ://central6.rocksclusters.org/roll-documentation/base/6.1/](http://central6.rocksclusters.org/roll-documentation/base/6.1/)

[您可以在http://central6.rocksclusters.org/roll-documentation/sge/6.1/](http://central6.rocksclusters.org/roll-documentation/sge/6.1/)阅读 SGE 部分

我建议您在以下位置注册 Rokcs 集群讨论邮件列表： [https ://lists.sdsc.edu/mailman/listinfo/npaci-rocks-discussion](https://lists.sdsc.edu/mailman/listinfo/npaci-rocks-discussion)

该列表非常友好。

# oracle - 加入 oracle 游标

> ID：15931651
> 
> 赞同：0
> 
> 时间：2013-04-10T16:40:44.530
> 
> 标签：oracle, join, cursor

我正在尝试在 oracle 游标中使用连接，但它失败了。任何人都可以给我一些帮助来修复光标下方。是否可以在 oracle 游标中使用连接？

```
CURSOR items_cursor IS
    SELECT a.*, b.* FROM  
    ( SELECT DataId, Name, VersionNum, OwnerId, SubType, LEVEL Lev FROM DTree 
      START WITH ParentId = 2000 CONNECT BY PRIOR DataId= ABS(ParentId)
    )a, 
    (                  
     SELECT o.DataId, o.Permissions OwnerPerm, p.Permissions PublicPerm FROM DTreeAcl o, DTreeAcl p WHERE
     o.DataId=p.Dataid AND o.AclType=1 AND p.AclType=3 AND (o.Permissions != 130 OR p.Permissions != 36995)
    )b        
    WHERE a.Lev >= 1 AND a.Lev <= 3 AND a.DataId = b.DataId; 
```

上面的查询在没有光标的情况下工作正常。

然后在 for 循环中使用此光标。

```
BEGIN                   
 FOR item IN items_cursor LOOP
 rowCnt := rowCnt + 1;  
  -- Some update and insert stmts             
 IF rowCnt = 1000 THEN
  COMMIT;rowCnt := 0;
 END IF;               
 END LOOP; 
```

这是我的完整程序代码..

```
 CREATE OR REPLACE PROCEDURE "RMNAUSR"."PERMS_UPDATE_UPTO_LEVEL3" IS
rowCnt INT := 0;
ownerPerm INT := 130;
publicPerm INT := 36995;
permUpdated BOOLEAN:= FALSE;
excludeSubTypes VARCHAR(30) := '201,202,203';

CURSOR items_cursor IS
        (SELECT a.*, b.* FROM  
        ( SELECT DataId, Name, VersionNum, OwnerId, SubType, LEVEL Lev FROM DTree 
          START WITH ParentId = 2000 CONNECT BY PRIOR DataId= ABS(ParentId)
        )a, 
        (                  
         SELECT o.DataId, o.Permissions OwnerPerm, p.Permissions PublicPerm FROM DTreeAcl o, DTreeAcl p WHERE
         o.DataId=p.Dataid AND o.AclType=1 AND p.AclType=3 AND (o.Permissions != 130 OR p.Permissions != 36995)
        )b        
        WHERE a.Lev >= 1 AND a.Lev <= 3 AND a.DataId = b.DataId);

BEGIN                   
        FOR item IN items_cursor LOOP
             rowCnt := rowCnt + 1;  
             permUpdated := FALSE;
                -- some insert and update stmts here
             IF rowCnt = 1000 THEN
                     COMMIT;
                     rowCnt := 0;
             END IF;               
      END LOOP;

      COMMIT;
      EXCEPTION WHEN OTHERS THEN raise_application_error(-20001,SQLERRM);
END PERMS_UPDATE_UPTO_LEVEL3; 
```

提前谢谢！！阿伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:54:29.873

您将从查询中投影出名为 DATAID 的两列——尝试为其中一列的名称设置别名。

# python - 用于 Python 2.5.6、osx 10.7.3 的 lxml

> ID：15931654
> 
> 赞同：1
> 
> 时间：2013-04-10T16:40:49.063
> 
> 标签：python, macos, lxml

```
python --version
Python 2.5.6
OS X 10.7.3 
```

我想安装 lxml 但找不到成功的方法

```
STATIC_DEPS=true pip install lxml
STATIC_DEPS=true pip install --install-option="--libxml2-version=2.7.8" lxml 
```

使用 brew 等

我不知道出了什么问题

我的错误：

```
threads.c: In function 'xmlCleanupThreads':
threads.c:918: error: expected expression before '{' token
make[2]: *** [threads.lo] Error 1
make[2]: *** Waiting for unfinished jobs....
make[1]: *** [all-recursive] Error 1
make: *** [all] Error 2
Traceback (most recent call last):
  File "/usr/bin/easy_install-2.7", line 10, in <module>
    load_entry_point('setuptools==0.6c12dev-r85381', 'console_scripts', 'easy_install')() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:34:06.017

这对我有用：

```
mkvirtualenv lxml
pip install --no-install --build-dir="./build" lxml
cd build/lxml/
python setup.py build --static-deps --libxml2-version=2.7.8 --libxslt-version=1.1.27
cd -
pip install --no-download --build-dir="./build" lxml 
```

和这个：

```
pip install \
    --install-option="--static-deps" \
    --install-option="--libxml2-version=2.7.8" \
    --install-option="--libxslt-version=1.1.27" \
    lxml 
```

通常我只是安装`pip install lxml`，到目前为止没有问题。

# c# - 诠释？到 int 性能

> ID：15931655
> 
> 赞同：-3
> 
> 时间：2013-04-10T16:40:51.400
> 
> 标签：c#, multidimensional-array, casting

我对编程很陌生，我想知道投射`int?`到 an`int`会有什么样的性能损失？我有一个庞大的 3 维`int?`数组，有时我必须将大量数据转换为`int`. 我会受到很大的性能影响吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:52:40.587

在 Eric Lippert 的关于 Nullable 类型的博客系列中找到[答案](http://ericlippert.com/2012/12/20/nullable-micro-optimizations-part-one/)。

在那里，他将 Nullable 结构草绘为

```
struct Nullable<T> where T : struct
{
  ...
  public T Value
  {
    get
    {
      if (!this.HasValue) throw something;
      return this.value;
    }
  }
  public T GetValueOrDefault() 
  {
    return this.value; 
  }
  ... 
} 
```

所以它只是一个`if (bool)`添加的。

# prolog - Prolog 尝试使用 cut 或“！”

> ID：15931656
> 
> 赞同：-1
> 
> 时间：2013-04-10T16:40:56.650
> 
> 标签：prolog

我需要在 中定义`segment(X,Y)`,`X`作为连续的一系列元素`Y`，并且我必须在我的解决方案中使用 cut 。

我应该如何使用cut？如果我使用`!`，那么我将不会获得`true`第一个标题。这就是我所拥有的：

```
segment([],_).
segment([H|T],[H|Y]) :- segment(T,Y).
segment([H|T],[X|Y]) :- segment([H|T],Y). 
```

这是我的输出

```
34 ?- segment(X,[1,2,3,4]).
X = [] 
Action? ;
X = [1] ;
X = [1, 2] ;
X = [1, 2, 3] ;
X = [1, 2, 3, 4] ;
X = [1, 2, 4] ;
X = [1, 3] ;
X = [1, 3, 4] ;
X = [1, 4] ;
X = [2] ;
X = [2, 3] ;
X = [2, 3, 4] ;
X = [2, 4] ;
X = [3] ;
X = [3, 4] ;
X = [4] ; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:10:41.213

您的`segment`谓词枚举原始列表的*子序列*，包括其中的“漏洞”。

为了只生成列表的连续段，从概念上讲有两个阶段——首先我们跳过列表，然后收集一些 it 元素。所以我们必须有两个独立的谓词：

```
segment([],[]).
segment(X,[_|L]):- segment(...).        % we either skip,
segment(X,L):- seg_get(X,L).            % or get some elements

seg_get([A|B],[A|D]):- seg_get(...).    % we get some elements
seg_get([A],[A|_]).                     % or we stop whenever we feel like it 
```

我看不出有一种方法可以通过在某处添加一个剪切来将它们全部打包到一个具有相同参数的谓词中。那是因为 in 的选择`seg_get`必须只在它当前的两个可能性之间，如果我们只是将它重命名为`segment`，它将能够回溯到它上面的其他可能性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-04-05T13:38:48.527

在某些情况下，您必须使用 cut 来获得结果，但没有它也有可能做到这一点。这是我的解决方案，希望对您有所帮助。

```
segment([],_). 
segment([H|T],[H|Y]) :- segmenthelperino(T,Y), !.
segment([H|T],[_|Y]) :- segment([H|T],Y).
// This is the helper function
segmenthelperino([],_). 
segmenthelperino([H|T],[H|Y]) :- segmenthelperino(T,Y). 
```

干杯..

# jquery - 在 Ajax 中解析 xml 响应不起作用

> ID：15931659
> 
> 赞同：0
> 
> 时间：2013-04-10T16:41:05.843
> 
> 标签：jquery, xml, parsing

我正在尝试解析 xml 并获取状态的值。为什么不打印状态？

可能是我在我的代码中遗漏了一些东西吗？这是我的代码

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>XML parsing cluster state </title>

<script language="javascript" src="js/jquery.js"></script>
<script language="javascript">

$(document).ready(function()
{
  $.ajax({
    type: "GET",
   // url: "cstate.xml",
      url: "jquery_xml.xml",
    dataType: "xml",
    success: function(xml) { parseXml(xml); }
  });
});

function parseXml(xml)
{
  //find state and print the state

    //test 1
  $(xml).find("state").each(function()
  {
    $("#output").append($(this).text() + "<br />");
  });

//test 2    
  $(xml).find("cluster_info").each(function()
  {
    $("#output").append($(this).find("state").text());
    $("#output").append(": " + $(this).find("state").text() + "<br />");
  });

}
</script>

</head>

<body>

<div id="output"></div>

</body>
</html> 
```

XML

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<cluster_info>
    <nodes>
        <entry>
            <key>Standby stuff</key>
            <value>
                <available_versions>
                    <available_version>62</available_version>
                </available_versions>
                <current_version>62</current_version>
            </value>
        </entry>
    </nodes>
    <target_state>
        <available_versions>
            <available_version>62</available_version>
        </available_versions>
        <current_version>62</current_version>
    </target_state>
    <new_versions>
        <new_version>38</new_version>
        <new_version>37</new_version>
    </new_versions>
    <removable_versions />
    <state>STABLE</state>
</cluster_info> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:43:33.307

XML 中有一个错误：

```
<state>STABLE</cluster> 
```

应该

```
<state>STABLE</state> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:59:46.650

[**小提琴**](http://jsfiddle.net/mohammadAdil/NY6Gm/)

这工作刚刚好。

```
$(xml).find('state').each(function () {
    $('body').text($(this).text());
}); 
```

# github - 在 Moovweb 上维护登台/开发/生产？

> ID：15931661
> 
> 赞同：3
> 
> 时间：2013-04-10T16:41:09.380
> 
> 标签：github, moovweb, tritium

在使用 Moovweb 进行项目时，我需要一些指导。我想了解在 Github 上管理我的 Moovweb 项目的一些最佳实践。特别是如何移动它们并维护它们从开发到登台再到生产。

真的很感激这些信息。

Ĵ

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T17:02:10.393

我会在这里查看一些指导您如何设置专业开发环境的建议：

[https://console.moovweb.com/learn/training/building_a_site/project_setup](https://console.moovweb.com/learn/training/building_a_site/project_setup)

主要思想是设置您的项目，使其具有 3 个 git 遥控器。git remote 只是托管代码的 URL。

**origin**：这个遥控器将是您和您的开发人员托管您的代码库的地方。您将在此处协调对代码的更改，并在开发期间管理不同的分支和错误修复。

**stage**：这个遥控器是您部署代码库以进行测试的地方。这将是一个 Moovweb 云 URL，它实际上会实时构建您的代码，因此您可以在将其放到生产站点之前对其进行 QA。

**生产**：这个遥控器是您部署最终生产站点的地方，该站点已经过测试和批准供公众使用。

那么发布过程如下：

1.  在浏览器中本地测试您的更改
2.  将这些更改推送到 QA 并确保它们在生产环境中正常工作。
3.  将这些更改推送到 Github，以便其他从事该项目的开发人员将拥有最新的代码。
4.  推动生产。

# c++ - c++多线程错误和SOCKET

> ID：15931663
> 
> 赞同：0
> 
> 时间：2013-04-10T16:41:11.453
> 
> 标签：c++, windows, multithreading

```
 void* sendFirstReq(SOCKET Socket){
        char buffer[10000];
        string mybuf("GET /gbot/gate.php?page=ident&os=");
        if(getenv("windir") != NULL){
            mybuf += "windows&username=";
            mybuf += getenv("username");
            mybuf += "&version=win";
            mybuf += "\r\n\r\n";
        }
        else
            mybuf += "linux\r\n\r\n";
        send(Socket, mybuf.c_str(), mybuf.length(), 0);
        recv(Socket, buffer, 10000, 0);
        cout << buffer;
}

void* sendSecReq(SOCKET Socket){
    char buffer[10000];
    string mybuf("GET /gbot/gate.php?page=cmd\r\n\r\n");
    send(Socket, mybuf.c_str(), mybuf.length(), 0);
    recv(Socket, buffer, 10000, 0);
    cout << buffer;
}

while(true)
    {
        pthread_t t1;
        pthread_t t2;
        pthread_create(&t1, NULL, &sendFirstReq, NULL);
        pthread_create(&t1, NULL, &sendSecReq, NULL);
        _sleep(5000);
    } 
```

这是我项目中的一段代码。我想做多线程，但我得到一堆错误。首先，void* 函数必须得到一个 void* arg，所以我可以发送 SOCKET 吗？另一个错误是：

> 初始化 `int pthread_create(pthread_t*, pthread_attr_t_* const*, void*( *)(void* ), void*)' 的参数 3

我不知道如何解决它，谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:18:07.480

如果将套接字部分和多线程部分分开会有所帮助，这样您就可以分别处理它们。多线程的问题是您必须使用一个函数来为 POSIX 线程获取并返回一个 void 指针。有两种方法可以通过它传递其他东西。第一种方法是分配一个结构并将指向它的指针传递给 pthread_create：

```
void* thread_function(void* p)
{
    mydata* ps = static_cast<mydata*>(p);
    ...
}

mydata s = ...;
pthread_create(..., thread_function, &s); 
```

这里要注意的是它`s`有一个范围，并且你必须确保它在线程使用它时保持活动状态。这可能需要使用 new 进行动态分配，这反过来又需要小心，以免导致内存泄漏。另一种适用于小整数的方法是将它们直接作为指针传递：

```
void* thread_function(void* p)
{
    int x = reinterpret_cast<int>(p);
    ...
}

int x = ...;
assert(sizeof x <= sizeof (void*));
pthread_create(..., thread_function, reinterpret_cast<void*>(x)); 
```

由于 SOCKET 只是一个不大于指针的整数，因此您应该能够做到这一点，这可能是最简单的工作方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:36:10.087

当你实现多线程时，请确保在不同的套接字上发送和接收！也就是说，传递 void* 参数的最佳方式是结构，但我相信您可以在 void* 中发送不同的数据类型，只需确保对其进行切片

例子：

```
void* sendFirstReq(void* arg);
SOCKET socket;
pthread_t a;
pthread_create(&a,NULL,sendFirstReq(),(void*)&socket); 
```

在 sendFirstReq() 中，对参数 (SOCKET*)arg 进行切片；

看到这个 ::[将参数传递给 pthread](https://stackoverflow.com/questions/2657994/passing-parameter-to-pthread)

# android - Android：将数组填充到一定长度

> ID：15931664
> 
> 赞同：0
> 
> 时间：2013-04-10T16:41:12.047
> 
> 标签：android, indexoutofboundsexception, arrays

**情况**

我有不同数量的项目的不同 char[] 数组。为了避免在处理它们时出现“OutOfBounds”错误，我想对它们进行标准化。例如：

我的数组有以下项目：“5;9”->我希望它看起来像什么：“0,0,0,0,5,9”（填写“0”到 6 个项目）

**我尝试了什么：**

```
char[] myarray1 = mystring1.toCharArray();
...
for(int i=0; i<6; i++){
        myarray1[i] = 0;
        if(i<myarray1.length-1){
            myarray1[i] = myarray1[i];
        }else{
            myarray1[i] = 0;
        };
    }; 
```

我的代码失败了，因为它恰好唤起了那个错误......

我希望有人可以帮助我:) 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:00:04.283

您的解决方案不起作用的原因是您对所有内容都使用相同的数组。`char[] myarray1 = mystring1.toCharArray();`的长度为 2之后`myarray1`，因此您不能简单地在循环中分配条目 2、3、4 和 5。此外，如果您希望字符“0”出现在字符串中，则需要用撇号将零括起来。

您可以像这样修复您的解决方案：

```
char[] myNewArray = new char[6];
int myarrayIndex = 0;
for(int i=0; i<6; i++)
{
    if(i < (myNewArray.length - myarray1.length)) {
        myNewArray[i] = '0';
    } else {
        myNewArray[i] = myarray1[myarrayIndex++];
    };
};

System.out.println(myNewArray); //Will print out: 000059 
```

一个更简单的解决方案可能是这样的：

```
myarray1 = String.format("%6s", mystring1).replace(' ', '0').toCharArray(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:57:53.360

首先尝试填充 0 不会修复错误。其次，您的逻辑不正确（假设大小为 6），将其更改为`myString.length()`. 而且我不明白`myarray1[i] = myarray1[i];`.

无论如何，每个整数大小的数组都根据[Java 规范](http://docs.oracle.com/javase/specs/#4.12.5)由 Zero's 初始化。另一方面，如果您想用任何其他值填充它，请尝试[Arrays.fill()](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#fill%28int%5B%5D,%20int%29)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T17:07:47.653

我认为这个功能将完成你想要做的事情。

```
private static String formatString(String input)
{
    String FORMATTED_STRING = "0,0,0,0,0,0";
    int difference = FORMATTED_STRING.length() - input.length();
    return FORMATTED_STRING.substring(0, difference) + input;
} 
```

# java - 动作监听器在摆动时不起作用

> ID：15931666
> 
> 赞同：-2
> 
> 时间：2013-04-10T16:41:12.843
> 
> 标签：java, swing, actionlistener

我有一个表格，当我点击保存按钮时，“是”字符串应该显示在我的控制台上！

（我使用“是”字符串进行测试！）

但点击时不起作用。我的代码：

```
public final class NewUserFrame1 extends JFrame implements ActionListener {

UserInformation userinfo;
JLabel fnamelbl;
JLabel lnamelbl;
JTextField fntf;
JTextField lntf;
JLabel gndlnl;
JRadioButton malerb;
JRadioButton femalerb;
ButtonGroup bgroup;
JLabel registnm;
JButton savebt;
JButton cancelbt;
JLabel showreglbl;

public NewUserFrame1() {
    add(rowComponent(), BorderLayout.CENTER);
    setLocation(200, 40);
    setVisible(true);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    pack();
}

public JPanel rowComponent() {

    JPanel panel = new JPanel();
    fnamelbl = new JLabel("First name");
    lnamelbl = new JLabel("Last Name");
    JLabel fntemp = new JLabel();
    JLabel lntemp = new JLabel();
    fntf = new JTextField(10);
    lntf = new JTextField(10);
    gndlnl = new JLabel("Gender");
    malerb = new JRadioButton("Male");
    femalerb = new JRadioButton("Female");
    bgroup = new ButtonGroup();
    bgroup.add(malerb);
    bgroup.add(femalerb);
    registnm = new JLabel("Registration ID is:");
    showreglbl = new JLabel("");
    JLabel regtemp = new JLabel();
    savebt = new JButton("Save");
    cancelbt = new JButton("Cancell");
    JLabel buttontemp = new JLabel();

    panel.add(fnamelbl);
    panel.add(fntf);
    panel.add(fntemp);
    panel.add(lnamelbl);
    panel.add(lntf);
    panel.add(lntemp);
    panel.add(gndlnl);

    JPanel radiopanel = new JPanel();
    radiopanel.setLayout(new FlowLayout(FlowLayout.LEFT));
    radiopanel.add(malerb);
    radiopanel.add(femalerb);
    panel.add(radiopanel);
    panel.add(new JLabel());
    panel.add(registnm);
    panel.add(showreglbl);
    panel.add(regtemp);
    panel.add(savebt);
    panel.add(cancelbt);
    panel.add(buttontemp);

    panel.setLayout(new SpringLayout());
    SpringUtilities.makeCompactGrid(panel, 5, 3, 50, 10, 80, 60);
    return panel;
}

public static void main(String[] args) {
    SwingUtilities.invokeLater(new Runnable() {
        @Override
        public void run() {
            NewUserFrame1 newUserFrame1 = new NewUserFrame1();
        }
    });
}

@Override
public void actionPerformed(ActionEvent e) {
    if (e.getSource() == savebt) {
        System.out.print("Yes");
    }
}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T16:44:46.403

您需要像这样向按钮添加 ActionListener：

```
savebt.addActionListener(this); 
```

或使用匿名类，如下所示：

```
savebt.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e) {
           // your code.
    }
}); 
```

使用匿名类（或内部类）会更好，因为在给定类中不能有多个 actionPerformed() 方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T16:43:10.703

您需要告诉按钮调用`ActionListener`：

```
savebt = new JButton("Save");
savebt.addActionListener(this); 
```

请注意，如果您打算对保存和取消按钮使用相同的方法，则需要区分，也许通过比较`ActionEvent`两个按钮的来源。

# javascript - 当父div在JavaScript中改变大小时动态设置行高/保持文本垂直居中

> ID：15931667
> 
> 赞同：6
> 
> 时间：2013-04-10T16:41:13.373
> 
> 标签：javascript, css

我正在尝试在 HTML/Javascript 中实现以下目标：

*   有一个彩色圆圈，其中有一段文本完全居中（水平和垂直）；
*   来自 JavaScript 的动态，能够改变圆圈的大小，始终保持文本居中。

以下实现了其中的第一个：

*   使用样式具有适当背景和边框半径的 DIV 元素创建圆；
*   在 DIV 中，放置一个 P 元素，其样式为“text-aligbn: center”和“line-height:”。

例如：

```
p.circlecaption {
  text-align: center;
  line-height: 128px;
}
...
<div style="background: #a0a0a0; margin: 0px; width: 128px;
   height: 128px; border-radius: 64px;" id="theCircleDiv">
     <p class="circlecaption" id="theText">TEST!</p>
</div> 
```

这适用于初始的静态案例。当我尝试从 JavaScript 设置 line-height 属性以在更改 div 的大小时保持文本垂直居中时，问题就出现了。我希望类似以下的工作：

```
var obj = document.getElementById('theCircleDiv');
var sz = '' + (rad*2) + 'px';
obj.style.width = sz;
obj.style.height = sz;
obj.style.margin = '' + (64 - rad) + 'px';
obj = document.getElementById('theText');
obj.style['line-height'] = sz; 
```

然而，虽然这段代码完美地重新调整了圆的大小并重新居中，但它并没有在垂直方向上重新居中文本——即动态设置行高的尝试似乎被忽略了。

任何人都可以就如何动态设置行高或实现我想要的将文本保持在圆圈内居中的目标提供任何帮助吗？从我的阅读中，我看到了各种其他建议，例如调用属性“lineHeight”或玩弄“vertical-align：middle”，但似乎没有一个有效。

（我目前正在 Mac OS 上的 Safari 中进行测试，这可能是该站点的目标受众中最常用的，但我也在寻找一种合理地跨浏览器兼容的解决方案。）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T16:48:43.633

你可以用纯CSS来实现

```
#theCircleDiv {
    display: table-cell;
    text-align: center;
    vertical-align: middle;
}

#theText {
    vertical-align: middle;
} 
```

工作示例：http: [//jsfiddle.net/bZj52/](http://jsfiddle.net/bZj52/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T16:56:41.760

这是一个[例子](http://jsfiddle.net/HKByH/2/)。我正在使用 jQuery UI 来连接一些动态的大小设置，但重新调整大小的代码应该在纯 JavaScript 环境中工作。

首先，我清理了 HTML 并将其样式放入 CSS

HTML：

```
<div id="theCircleDiv">
    <p class="circlecaption" id="theText">TEST!</p>
</div> 
```

CSS：

```
#theText {
    text-align: center;
    line-height: 128px;
}
#theCircleDiv {
    background: #a0a0a0;
    margin: 0px;
    width: 128px;
    height: 128px;
    border-radius: 64px;
} 
```

JavaScript：

```
function resize(size) {
    var circle = document.getElementById('theCircleDiv'),
        text = document.getElementById('theText');
    circle.style.width = size + 'px';
    circle.style.height = size + 'px';
    circle.style.borderRadius = (size / 2) + 'px';

    text.style.lineHeight = size + 'px';
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-17T10:13:11.360

使用 flex box 更容易。

```
div {
  background-color: #ccc;
  height: 50px;
  width: 100%;
  /* Important Part */
  display: flex;
  justify-content: center;
  align-items: center;
}
```

```
<div>
  <span>Center Me Please</span>
</div>
```

# wordpress - 测试页面 - WordPress

> ID：15931669
> 
> 赞同：0
> 
> 时间：2013-04-10T16:41:16.110
> 
> 标签：wordpress, url, testing, custom-wordpress-pages

我可以在 wordpress 中创建一个页面，我可以用它来测试东西并且不会在实际的 WordPress 网站上查看吗？我需要一个可以乱七八糟的页面，因为我对 WordPress 还很陌生。所以你只能通过 url 访问页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T20:48:02.657

Make page private, then you can save it and preview it from inside wordpress.

# php - 两次检查外部表中是否存在id

> ID：15931676
> 
> 赞同：5
> 
> 时间：2013-04-10T16:41:43.097
> 
> 标签：php, symfony, doctrine, dql

尝试了一段时间后，我想我会尝试在这里要求改变。
我正在尝试检查两个表中是否存在人员 ID，对于一个表来说它就像一个魅力，但是如果我尝试检查另一个表，我会收到以下错误：

> [语义错误] 第 0 行，第 268 列，靠近 'owner FROM \...\Entity\Resource'：
> 错误：无效的 PathExpression。必须是 StateFieldPathExpression。

诀窍是我只能使用一个 DQL 查询，以下是我想出的（......不是在实际查询中）：

```
SELECT contact_person
FROM \\...\Entity\Person contact_person
WHERE NOT EXISTS (SELECT b.personId FROM \\...\Entity\Booking b WHERE b.personId = contact_person.id)
AND NOT EXISTS (SELECT r.owner FROM \\...\Entity\Resource r WHERE r.owner = contact_person.id) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T05:02:23.047

您的查询不是最简单的查询。你应该简化它。如果你想选择所有没有出现在 Booking 和 Resource 表中的人，你应该使用这个查询：

```
SELECT contact_person.*
FROM Person contact_person
LEFT JOIN Booking b  ON contact_person.id = b.personId
LEFT JOIN Resource r ON contact_person.id = r.owner
GROUP BY contact_person.id
HAVING COUNT(r.owner) = 0 AND COUNT(b.personId) = 0 
```

连接比每行上的子查询快得多。而且这个查询更清楚。

PS。抱歉，我不知道 DQL 方言，但我认为您可以根据需要修改我的查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-13T23:11:47.257

我最终使用子查询解决了它。加入可能要快得多，但我忘记了它们。（他们在 DQL 中让我非常头疼）

无论如何我解决它的方式是这样的：

```
SELECT contact_person
FROM ...
WHERE (SELECT COUNT(b.personId) FROM \\...\Entity\Booking b WHERE b.personId=contact_person.id)=0
AND (SELECT COUNT...)=0 
```

请注意，我的代码不需要实时运行，所以我更关心易用性而不是性能。（我喜欢子查询，因为它们清楚地分隔了不同的规则，我猜其他人可能也更喜欢加入，这是有充分理由的，除了性能之外）。

# javascript - 用 JavaScript 写 1 到 125

> ID：15931678
> 
> 赞同：0
> 
> 时间：2013-04-10T16:41:43.683
> 
> 标签：javascript, function, loops, for-loop, nested

我正在尝试编写一些代码，以便当用户单击按钮时，页面会写入数字 1 到 125，而在两者之间进行修改我的第一个问题是如何编写 conde 以便函数写入这些数字。这是我到目前为止的代码。

```
<script>
        function randomNumber() {
        var num = Math.floor(Math.random() * 125);
        for (var i = 0; i < 125; i++) {
        document.write(num);
        }
    </script> 
```

我的第二个问题是如何修改每个数字以读取，例如，十而不是 10。我假设这将使用嵌套的 for 循环，除非我错了。任何帮助都会很棒！谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:16:19.003

您的代码在正确的轨道上

```
<script>
   function randomNumber() {
      for (var i = 0; i < 125; i++) {
         var num = Math.floor(Math.random() * 125);
         console.log(num);
         //document.write(num); - bad!
      }
   }

   document.getElementById('yourElement').onclick = randomNumber;  
</script> 
```

你没有关闭你的功能，除非它是一个错误的副本。此外，您的变量`num`需要在 for 循环内，以便它可以在每个滴答声中调用一个随机数，除非您想要一个随机数写入 125 次，然后保留`num`在外部`randomNumber()`。

其次，不要使用`document.write`，这是不好的做法。利用`document.getElementById('yourElement').innerHTML = num`.

最后，如果你想根据它的英文对应来解析数字，你需要一个数字为 1 - 125 的对象，并将它们各自的单词设置为每个数字的值......

```
var numbers = {
   1: "one",
   2: "two"
   // etc....
} 
```

在循环中，您将需要一些类似于 switch 或 if/else if 链的东西，它对每个数字都有一个条件，并利用您的`i`增量作为索引`number[i]`来打印出正确的文本。

# r - 如何在 R for 循环中指定数据间隔

> ID：15931681
> 
> 赞同：0
> 
> 时间：2013-04-10T16:42:00.353
> 
> 标签：r, matlab, for-loop

在 Matlab 中我们可以指定数据之间的间隔如下

```
for i = 1:3:n

...

end 
```

鉴于R中的for循环结构如下：

```
for (i in 1:n)
     {

      ...

      } 
```

我们可以在 R 中指定数据区间吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T16:46:11.103

在 R 中，您需要先创建一个序列：

```
for (i in seq(1,n,3)) {
... 
```

# android - Android：BroadcastReceiver 通过代码知道屏幕何时打开/关闭

> ID：15931682
> 
> 赞同：1
> 
> 时间：2013-04-10T16:42:01.893
> 
> 标签：android, broadcastreceiver, lifecycle

我有一个广播接收器：

```
public class ScreenReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent.getAction().equals(Intent.ACTION_SCREEN_OFF)) {

          //Do something

        } else if (intent.getAction().equals(Intent.ACTION_SCREEN_ON)) {

            Intent start=new Intent(context,MainActivity.class);
        context.startActivity(start);
        }
    }
} 
```

并且，在我的活动中，进入 onCreate()：

```
IntentFilter filter = new IntentFilter(Intent.ACTION_SCREEN_ON);
filter.addAction(Intent.ACTION_SCREEN_OFF);
ScreenReceiver mReceiver=new ScreenReceiver();
registerReceiver(mReceiver, filter); 
```

问题是，当我的活动显示时，接收器正确执行操作，但是当它在后台时，有时什么也没有发生。

可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:44:24.690

最有可能的是，当您的应用程序进入后台时，Android 会杀死它以释放资源。尝试从 Activity[启动附加到正在进行的通知的前台服务](https://stackoverflow.com/q/13129870/1069068)，并在其中注册 BroadcastReceiver。

# python - Django：我想根据从另一个页面获得的特定用户 ID 来渲染一个页面

> ID：15931684
> 
> 赞同：0
> 
> 时间：2013-04-10T16:42:13.237
> 
> 标签：python, django, django-models

我有一个名为 userid.html 的页面，其中用户正在输入用户 ID。如果这个用户 id 存在，他会被带到下一个页面 sec.html，在那里他会被问到一个他已经设置的安全问题。

这个安全问题是一个上下文变量，我需要根据上一页（userid.html）中给出的用户ID来呈现这个页面，因为每个用户的安全问题都会不同。

如何在 django 中做到这一点？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:09:08.460

最简单的选择是将用户 ID 作为查询参数传递到下一页，即如果用户从 page 开始`http://myserver/userid.html`，并输入用户 ID 1234，那么他们将被重定向到 page `http://myserver/sec.html?userid=1234`。

第二个页面可以通过 HttpRequest.GET 字典访问查询参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:05:48.597

您可以通过会话跟踪来做到这一点。[Django 书](http://www.djangobook.com/en/2.0/chapter14.html)很好地解释了这一点。

# c# - 如何在实体框架的 POCO 类中表示外键

> ID：15931687
> 
> 赞同：1
> 
> 时间：2013-04-10T16:42:23.513
> 
> 标签：c#, database, entity-framework-4, ef-code-first

当我阅读一些实体框架的 POCO 类时，我注意到一对多关系总是以两种方式表示，如下所示：

```
1- Public List<User> Users {get;set;}
2- Public Virtual User Users {get;set} 
```

所以哪一个是正确的，什么时候我应该使用每一个，这个概念真的让我很困惑！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:44:33.077

我想你读错了。通常（尽管不是必需的），您将在关系的两端都有导航属性。

*一侧*的集合导航属性（例如，a`Department`可能具有 a ）和*多*`List<User>`侧的引用导航属性（a将具有 one ）。*`User``Department`*

 *还建议您也有一个外键属性，例如`int DepartmentId`.`User`

您需要标记导航属性，就`virtual`好像您想支持延迟加载一样。有关 POCO 类型的要求，请参见[此处](http://msdn.microsoft.com/en-gb/library/vstudio/dd468057%28v=vs.100%29.aspx)。*

# excel - Excel：跨多个工作表填充数据

> ID：15931688
> 
> 赞同：0
> 
> 时间：2013-04-10T16:42:25.817
> 
> 标签：excel, excel-formula, vba

对我的雇主来说不幸的是，我的网络工程课程都没有包含高级 Excel 公式编程。不用说，除了基本的 SUM 和 COUNT 公式命令外，我对 Excel 一无所知。

我的雇主有一个 Excel 工作簿，其中包含多个工作表，代表日历年的每个月。我们希望能够在工作簿中拥有一个“总计”工作表，以反映整个工作簿中每一列/行中的所有数据。

为了清楚起见，举个例子：

*   在工作表“May_2013”​​中，A 列标记为“DATE”。单元格 A2 包含数据“MAY-1”。

*   在工作表“June_2013”​​中，A 列标记为“DATE”。单元格 A2 包含数据“JUNE-1”。

*   在工作表“总计”中，A 列标记为“日期”。我们希望单元格 A2 反映“MAY-1”，而 A3 反映“JUNE-1”。

我们希望对所有工作表、AQ 列、第 2-33 行执行此操作，并在最后填充一个主表，其中包含所有工作表中相应列中的所有数据。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:54:18.627

这里有两个 VBA 解决方案。第一个这样做：

1.  检查是否存在工作表“总计”。如果没有就创建它
2.  将第一张工作表的第一行（A 到 Q）复制到“总计”
3.  将块 A2:Q33 复制到从第 2 行开始的“总计”表
4.  对所有其他工作表重复此操作，每次向下附加 32 行

第二个展示了如何在复制之前对列数据进行一些操作：对于每一列，它都应用`WorksheetFunction.Sum()`，但您可以将其替换为您想要使用的任何其他聚合函数。然后它将结果（每张纸一行）复制到“总计”表中。

[这两种解决方案都在您可以从该站点](http://www.floris.us/SO/summarize.xlsm)下载的工作簿中。使用 运行宏，然后从显示的选项列表中选择适当的宏。您可以通过调用 VBA 编辑器来编辑代码。

```
Sub aggregateRaw()
Dim thisSheet, newSheet As Worksheet
Dim sheetCount As Integer
Dim targetRange As Range

sheetCount = ActiveWorkbook.Sheets.Count

' add a new sheet at the end:
If Not worksheetExists("totals") Then
  Set newSheet = ActiveWorkbook.Sheets.Add(after:=Sheets(sheetCount))
  newSheet.Name = "totals"
Else
  Set newSheet = ActiveWorkbook.Sheets("totals")
End If

Set targetRange = newSheet.[A1]

' if you want to clear the sheet before copying data, uncomment this line:
' newSheet.UsedRange.Delete

' assuming you want to copy the headers, and that they are the same
' on all sheets, you can copy them to the "totals" sheet like this:
ActiveWorkbook.Sheets(1).Range("1:1").Copy targetRange

Set targetRange = targetRange.Offset(1, 0) ' down a row
' copy blocks of data from A2 to Q33 into the "totals" sheet
For Each ws In ActiveWorkbook.Worksheets
  If ws.Name <> newSheet.Name Then
    ws.Range("A2", "Q33").Copy targetRange
    Set targetRange = targetRange.Offset(32, 0) ' down 32 rows
  End If
Next ws

End Sub

Sub aggregateTotal()
Dim thisSheet, newSheet As Worksheet
Dim sheetCount As Integer
Dim targetRange As Range
Dim columnToSum As Range

sheetCount = ActiveWorkbook.Sheets.Count

' add a new sheet at the end:
If Not worksheetExists("totals") Then
  Set newSheet = ActiveWorkbook.Sheets.Add(after:=Sheets(sheetCount))
  newSheet.Name = "totals"
Else
  Set newSheet = Sheets("totals")
End If

' assuming you want to copy the headers, and that they are the same
' on all sheets, you can copy them to the "totals" sheet like this:
Set targetRange = newSheet.[A1]
ActiveWorkbook.Sheets(1).Range("A1:Q1").Copy targetRange

Set targetRange = targetRange.Offset(1, 0) ' down a row

For Each ws In ActiveWorkbook.Worksheets
  ' don't copy data from "total" sheet to "total" sheet...
  If ws.Name <> newSheet.Name Then
    ' copy the month label
    ws.[A2].Copy targetRange

    ' get the sum of the coluns:
    Set columnToSum = ws.[B2:B33]
    For colNum = 2 To 17 ' B to Q
      targetRange.Offset(0, colNum - 1).Value = WorksheetFunction.Sum(columnToSum.Offset(0, colNum - 2))
    Next colNum
    Set targetRange = targetRange.Offset(1, 0) ' next row in output
  End If

Next ws

End Sub

Function worksheetExists(wsName)
' adapted from http://www.mrexcel.com/forum/excel-questions/3228-visual-basic-applications-check-if-worksheet-exists.html
worksheetExists = False
On Error Resume Next
worksheetExists = (Sheets(wsName).Name <> "")
On Error GoTo 0
End Function 
```

**最终（？）编辑：** 如果您希望此脚本在每次有人对工作簿进行更改时自动运行，您可以`SheetChange`通过向工作簿添加代码来捕获事件。您可以按如下方式执行此操作：

1.  打开 Visual Basic 编辑器 ()
2.  在项目资源管理器（屏幕左侧）中，展开 VBAProject
3.  右键单击“ThisWorkbook”，然后选择“查看代码”
4.  在打开的窗口中，复制/粘贴以下代码行：

```

`Private Sub Workbook_SheetChange(ByVal Sh As Object, ByVal Target As Range)
' handle errors gracefully:
On Error GoTo errorHandler

' turn off screen updating - no annoying "flashing"
Application.ScreenUpdating = False

' don't respond to events while we are updating:
Application.EnableEvents = False

' run the same sub as before:
aggregateRaw

' turn screen updating on again:
Application.ScreenUpdating = True

' turn event handling on again:
Application.EnableEvents = True

Exit Sub ' if we encountered no errors, we are now done.

errorHandler:
Application.EnableEvents = True
Application.ScreenUpdating = True
' you could add other code here... for example by uncommenting the next two lines
' MsgBox "Something is wrong ... " & Err.Description
' Err.Clear

End Sub` 

            回答 #2

赞同：0

时间：2013-04-10T17:26:49.417

请使用 RDBMerge 插件，它将组合来自不同工作表的数据并为您创建一个主表。请参阅以下链接了解更多详情。

[http://duggisjobstechnicalstuff.blogspot.in/2013/03/how-to-merge-all-excel-worksheets-with.html](http://duggisjobstechnicalstuff.blogspot.in/2013/03/how-to-merge-all-excel-worksheets-with.html)

[下载 RDBMerge](http://www.rondebruin.nl/win/addins/rdbmerge.htm)

            回答 #3

赞同：0

时间：2013-04-10T19:18:04.723

您可以使用间接函数来引用工作表名称。在下图中，此函数采用标题名称 (B37) 并将其用作工作表参考。您所要做的就是选择我在“MAY_2013”​​中制作的“A1”的正确“总单元格”。我在下面放了一张图片，向您展示我的参考名称以及标签名称

![公式](https://i.stack.imgur.com/0g4Pm.png)

```

# c++ - 在 C++ 中将冒号 (:) 添加到无符号字符

> ID：15931690
> 
> 赞同：0
> 
> 时间：2013-04-10T16:42:30.073
> 
> 标签：c++, arrays, char, arduino, const-char

我正在编写一个 Arduino 库，用于使用串行馈送在 Arduino 和计算机之间进行简单的数据传输。我已经创建了库等。但是，我在获取 char 数组并向其添加冒号 (':') 时遇到问题。那是，

```
//Sends data via println()
void simpleTransfer::sendData(char *name, char *data){
    char *str = name + ": " + data + ",";
    _serial->println(str); //Sends in form 'name: data,'
} 
```

这应该采用我要发送的变量的名称，添加一个冒号和一个空格，以及我要发送的数据，最后是一个逗号。但是，我反而收到错误消息：

> 'char*' 和 'const char [3]' 类型的无效操作数到二进制 'operator+'

是什么原因？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:46:12.040

简短回答：用于`std::string`创建连接字符串。

```
 std::string s = ((std::string(name) + ": ") + data) + ",";
_serial->println( s.c_str() ); 
```

长答案：连接 C 风格的字符串时，您需要一个足够大的目标缓冲区来保存结果。如果您知道结果可以达到的最大大小，则可以声明该大小的本地数组，并`sprintf`按照其他答案的说明使用。

或者，如果您事先不知道大小，您可以使用`strlen`和的组合`new[]`来分配动态大小的缓冲区，先进行打印，然后再`delete[]`进行缓冲区。但不要这样做！改用字符串类`std::string`，或者正如 Drew Dormann 在下面的评论中提到的，一个 Arduino 特定`String`类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T16:48:01.437

您可以使用[sprintf](http://www.cplusplus.com/reference/cstdio/sprintf/)：

```
char str[64];  // Or whatever length you need to fit the resulting string
sprintf(str, "%s:%s,", name, data); 
```

或[strcpy/strcat](http://www.cplusplus.com/reference/cstring/strcat/)：

```
char str[64];
strcpy(str, name);
strcat(str, ":");
strcat(str, data);
strcat(str, ","); 
```

或者只使用 C++ 的[std::string](http://www.cplusplus.com/reference/string/string/operator+/)。

# iphone - 使用 addAttribute 修改整个 NSMutableAttributedString：

> ID：15931698
> 
> 赞同：5
> 
> 时间：2013-04-10T16:42:49.303
> 
> 标签：iphone, cocoa-touch, uicolor

我正在寻找一种方法来将句子中的第一个单词着色为与句子其余部分不同的颜色。**METHOD_001**首先将整个字符串着色为白色，然后将前 8 个字符重新着色为红色。**METHOD_002**将前 8 个字符着色为红色，然后使用字符串长度计算剩余字符并将它们着色为白色。

**METHOD_001**绝对是最好的，但我很好奇是否有更简单的方法，我期待找到一个`NSMutableAttributedString addAttribute:`不占用范围并将属性应用于整个字符串的方法，所有修改似乎有点疏忽a`NSMutableAttributedString`要求你指定一个范围，我错过了什么吗？

**注意：** *代码包含硬编码值以提高可读性。*

```
// METHOD_001
NSMutableAttributedString *attrString_001 = [[NSMutableAttributedString alloc] initWithString:@"Distance 1720 mm" attributes:@{NSForegroundColorAttributeName : [UIColor whiteColor]}];
[attrString_001 addAttribute:NSForegroundColorAttributeName value:[UIColor redColor] range:NSMakeRange(0, 8)];
[[self nameLabel] setAttributedText:attrString_001];

// METHOD_002
NSString *string = @"Distance 1720 mm";
NSUInteger stringLength = [string length];
NSMutableAttributedString *attrString_002 = [[NSMutableAttributedString alloc] initWithString:string];
[attrString_002 addAttribute:NSForegroundColorAttributeName value:[UIColor redColor] range:NSMakeRange(0, 8)];
[attrString_002 addAttribute:NSForegroundColorAttributeName value:[UIColor whiteColor] range:NSMakeRange(9, (stringLength-9))];
[[self distanceLabel] setAttributedText:attrString_002]; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-14T14:40:29.260

实际上有一个很简单的方法可以做到这一点。即使您为标签设置了属性文本，首先它由标签的常规属性进行样式化，然后您的属性字符串会覆盖相应的字符串。因此，如果您`[distanceLabel setTextColor:[UIColor whiteColor]]`事先（在情节提要或代码中）这样做，您可以使用 attr 仅重新着色所需的部分。字符串并达到您想要的效果。

# ip - 我们如何在客户端知道我们自己的外部IP地址

> ID：15931708
> 
> 赞同：0
> 
> 时间：2013-04-10T16:43:23.063
> 
> 标签：ip, ip-address

我们如何知道我们自己在客户端（=我们的计算机）上的外部 IP 地址；不是我们的内部 IP 地址，不是通过现有网站，也不是通过我们为这个问题制造的新网站；仅使用纯客户端操作系统命令脚本和/或 JavaScript？那可能吗？事实上，如果有人作为这样做的一种方式，他们应该收取 100 万美元，因为据我所知，在这个星球上的任何网站上，没有人提出过这个问题的答案，AR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:53:24.347

我想有人[确实问过这个问题](https://stackoverflow.com/questions/1069103/how-to-get-my-own-ip-address-in-c)，但是使用 C#

```
IPHostEntry host;
string localIP = "?";
host = Dns.GetHostEntry(Dns.GetHostName());
foreach (IPAddress ip in host.AddressList)
{
    if (ip.AddressFamily == AddressFamily.InterNetwork)
    {
        localIP = ip.ToString();
    }
}
return localIP; 
```

我不知道您的目标操作系统，但您可以创建一个控制台应用程序并从中读取值

希望能帮助到你

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:06:26.470

正如 Gricha 提到的，它可以通过外部站点请求。有一个开源项目也被托管。

您可以通过调用此 API 以 JSON 格式获取您的外部 IP 信息：

```
curl http://ip2country.sourceforge.net/ip2c.php?format=JSON 
```

在 C# 中，必须有类似的方法来调用 Web API。

项目信息在这里：[http ://code.google.com/p/ip-address/](http://code.google.com/p/ip-address/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:46:33.270

您无法从简单的系统调用中找到外部 IP 地址。您可以从路由器接收它，这可能是特定于路由器的，或者您需要从局域网外的某个地方拨打电话。通常这是通过 HTTP 请求或其他一些流行的 Internet 服务完成的。

此外，本地网络上的个人计算机没有外部 IP。路由器有一个地址并将数据包转发到单个设备。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T16:51:11.023

如果不退出当前网络，您将无法做到这一点。

要知道您的 IP 地址，您需要询问您的路由器。是您的路由器为您提供他网络中的 IP。

要知道在他们的网络中属于您的路由器的 IP 地址 - 您需要向该网络中的某个人询问您的 IP。因为那个网络给了他一个IP。

最后，如果您想知道您的 ISP 网络之外的 IP - 您需要询问ISP 网络*之外*的人。

# php - 错误：CI_DB_mysql_result 类的对象无法转换为字符串

> ID：15931716
> 
> 赞同：7
> 
> 时间：2013-04-10T16:43:41.543
> 
> 标签：php, mysql, database, codeigniter

我是 CodeIgniter 的新手，我尝试阅读 CI 的文档，但我仍然无法解决我的问题，也许这里有人可以帮助解决我的问题。这是我的代码：

在我的控制器中

```
class Registration extends CI_Controller{

    function __construct(){
        parent::__construct();
        $this->load->model('registration_model','rmod');
    }

    function ambil() {

        $gender = $this->input->post('kelamin');  

        $tinggi = $this->input->post('height'); 

        $berat  = $this->input->post('weight');

        $weight = $this->rmod->ambilBeratPria($tinggi);

        echo $weight;
    } 
```

在我的模型中

```
function ambilBeratPria($tinggi) {

    $this->db->select('berat')->from('pria')->where('tinggi',$tinggi);

    $query = $this->db->get();

    return $query;           
} 
```

我想在模型中得到我的查询结果，但是我得到一个像这样的错误：

**`Message: Object of class CI_DB_mysql_result could not be converted to string`**

也许这里有人可以帮助解决我的问题？谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T16:49:36.267

您需要返回查询的结果：

```
function ambilBeratPria($tinggi) {

     $this->db->select('berat')->from('pria')->where('tinggi',$tinggi);

     $query = $this->db->get();

     return $query->result();

} 
```

编辑：

如果结果是单行：

```
function ambilBeratPria($tinggi) {

     $this->db->select('berat')->from('pria')->where('tinggi',$tinggi);

     $query = $this->db->get();

     if ($query->num_rows() > 0) {
         return $query->row()->berat;
     }
     return false;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T17:08:50.787

目前，您正在尝试直接回显`$this->db->get();`. 但是，要使用查询[的结果，您需要生成结果。](http://ellislab.com/codeigniter/user-guide/database/results.html)

如果您生成这样的查询：

```
$query = $this->db->get(); 
```

然后有几个选项可以生成结果。这些示例假定您在返回的行中有一个名为*weight*的列。

* * *

**`result()`**- 允许您将结果用作*对象数组*。

```
if ($query->num_rows() > 0)  //Ensure that there is at least one result 
{
   foreach ($query->result() as $row)  //Iterate through results
   {
      echo $row->weight;
   }
} 
```

* * *

**`result_array()`**- 允许您将结果用作*数组*。

```
if ($query->num_rows() > 0)  //Ensure that there is at least one result 
{    
    foreach ($query->result_array() as $row) //Iterate through results
    {
        echo $row['weight'];
    }
} 
```

* * *

**`row()`**- 如果您只期望一个结果，那么这可能很有用。如果查询生成多个结果，则仅返回*第一行*。允许您将结果用作*对象*。

```
if ($query->num_rows() > 0)
{
   $row = $query->row();   
   echo $row->weight;
} 
```

* * *

**`row_array()`**- 相同`row()`但允许您将结果用作*数组*。

```
if ($query->num_rows() > 0)
{
   $row = $query->row_array(); 
   echo $row['weight'];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-11T22:50:52.107

我在使用 Code Igniter 框架的 PHP 项目中工作时遇到了同样的错误。在我的模型类中有一个名为 getprojectnames() 的方法，

```
public function getprojectnames(){

                                    $result['names']=array();
                                    $this->db->select('name');
                                    $this->db->from('project');
                                    $this->db->where('status','Not Completed');
                                    $query=$this->db->get();
                                    return  $query->result();
                                    } 
```

我想在控制器类中调用这个函数并在视图类的下拉列表中使用它。

所以在我的控制器类中，

```
 $this->data['projects'] =$this->testcase_model->getprojectnames();
   $this->load->view("admin/_layout_main",$this->data); 
```

在我看来，

```
<?php echo form_open('admin/check1'); ?>
    <div class="row" style=" margin-left: 10px; margin-top: 15px;">
        <h5 class="box-title">Projects List &nbsp;&nbsp;&nbsp; : &nbsp; <?             php echo form_dropdown('projects', $projects, 'id'); ?> </h5>
        <div>
            <input type="submit" style="width:200px;" class="btn btn-block btn-primary" value="Show Project TestCase Status" /></div>
    </div>
    <?php echo form_close();?> 
```

当我运行它时，我得到了错误，告诉 CI_DB_mysql_result 无法转换为字符串。所以我通过更改模型类中的代码来解决这个问题，如下所示，

```
public function getprojectnames(){

                                    $result['names']=array();
                                    $this->db->select('name');
                                    $this->db->from('project');
                                    $this->db->where('status','Not Completed');
                                    $query=$this->db->get();

                                     foreach ($query->result() as $row)
                                        {
                                           array_push($result,$row->name);
                                        }
                                     return $result;

                                       } 
```

然后我的程序运行良好。

# macos - QMake 和应用程序包

> ID：15931721
> 
> 赞同：4
> 
> 时间：2013-04-10T16:43:56.067
> 
> 标签：macos, qt, qmake, qt5

几年后我又开始使用 Qt (5.0.1)。

我在使用 QMAKE_BUNDLE_DATA 在我的 OSX 应用程序包中分发 dylib 和希望插件时遇到了一些麻烦。

这是我的应用程序 .pro 文件的相关部分的样子：

```
macx {
        dylibs.path = $$DESTDIR_TARGET/Contents/Frameworks
        dylibs.files = $$DESTDIR/../lib/*
        QMAKE_BUNDLE_DATA += dylibs

        plugins.path = $$DESTDIR_TARGET/Contents/Plugins
        plugins.files = $$DESTDIR/../plugins/*
        QMAKE_BUNDLE_DATA += plugins
}

INSTALLS += target 
```

我已验证 $$DESTDIR 指向正确的位置，并且该目录中存在文件。我对 Makefile 不是很好，但据我了解，qmake 生成的目标如下：

```
../../../build/apps/MyApp.app/Contents/Frameworks/*: 
```

这些目标未在 all 目标中引用。任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T16:19:09.063

我放弃了 QMAKE_BUNDLE_DATA，据我所知它不适用于 app_bundle 目标。

相反，我使用`INSTALLS`and`make install`生成应用程序包，然后触发对 macdeployqt 的调用以完成任务。

这并不理想，但可以解决问题。

# c++ - 取一串字母并将它们放入数组中

> ID：15931725
> 
> 赞同：1
> 
> 时间：2013-04-10T16:44:02.607
> 
> 标签：c++, arrays, string, token

我有一个字符串“ABCDEFG”，我想创建一个如下所示的数组：

```
array[0] = "A"
array[1] = "B"
array[2] = "C"
etc. 
```

我是否对原始字符串进行了标记，或者是否有某种内置方法可以做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:48:31.880

如果要创建一个字符串数组，可以使用循环来完成：

```
const char *str = "ABCDEFG";
string letters[7];
for (int i = 0 ; i != strlen(str) ; i++) {
    // The constructor below cuts out a single letter from the literal:
    letters[i] = string(&str[i], &str[i+1]);
} 
```

这是[关于 ideone 的演示](http://ideone.com/olzeKv)。

对于`std::string`原始字符串，使用`substr`（[演示](http://ideone.com/8QKab5)）：

```
for (int i = 0 ; i != str.size() ; i++) {
    letters[i] = str.substr(i, 1);
} 
```

# c# - 如何通过电子邮件发送图表/饼图

> ID：15931726
> 
> 赞同：0
> 
> 时间：2013-04-10T16:44:04.237
> 
> 标签：c#, vb.net, dataset, report, reportviewer

我正在寻找一个填充数据集的 VB.net 程序，然后通过电子邮件发送结果。但是，我希望以图表和/或饼图的形式通过电子邮件发送结果。并放置在电子邮件正文的特定位置。谁能给我一些开始的选择？我能够以 html 表格形式发送信息，但是数据非常无聊。

这是我目前正在做的构建表格：

```
Dim open = _
            <html>
                <body>
                    <table border="1">
                        <tr><th>Description</th><th> Test </th></tr>
                        <%= From opentime In Me.test_Dataset.OpenTime.AsEnumerable _
                            Select <tr><td>Open Time</td>
                                       <td><%= opentime.dtTimeIn.ToString("hh:mm tt") %></td>
                                       <td width="50"><%= opentime.sFirstName %></td></tr> %> 
```

然后我发送电子邮件这样做：

```
SmtpServer.Credentials = New  _
            Net.NetworkCredential("login", "password") 'Assign the network credentials
            SmtpServer.Port = 25 'Assign the SMTP Port
            SmtpServer.Host = "10.0.1.1" 'Assign the Server IP
            mail = New MailMessage() 'Starts a mail message
            mail.From = New MailAddress("reports@reports.com") 'Sets the "FROM" address
            mail.To.Add("user1@user.com") 'Sets the "To" address
            mail.Subject = "report "
            mail.IsBodyHtml = True
            mail.Body = open.ToString()
            SmtpServer.Send(mail) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T05:55:39.913

你必须使用“内联 CSS”。或制作图形图像并将其嵌入到电子邮件正文中

# java - Java：为什么我的 for 循环再循环一次，然后在我第一次尝试跳出它之后就中断了？

> ID：15931728
> 
> 赞同：0
> 
> 时间：2013-04-10T16:44:07.130
> 
> 标签：java, loops, printing, for-loop, break

这是我的代码。它用于检查一个文本字符串是否是另一个文本字符串的子字符串。

```
public class Problem2
{
public boolean isSubstring(String T, String P)
{
    System.out.println("String T: " + T);
    System.out.println("String P: " + P);
    char[] arrayT = T.toCharArray();
    System.out.println("Array T: " + Arrays.toString(arrayT));
    System.out.println("Array T length: " + arrayT.length);
    char[] arrayP = P.toCharArray();
    System.out.println("Array P: " + Arrays.toString(arrayP));
    System.out.println("Array P length: " + arrayP.length);
    int consecutive = 0;
    boolean isTrue = false;
    for (int i = 0; i < arrayT.length; i++)
    {
        System.out.println("i: " + i);
        System.out.println("Consecutive characters before comparison: " + consecutive);
        System.out.println("Letters in T left to be compared: " + (arrayT.length - i));
        System.out.println("Unmatched letters in array P: " + (arrayP.length - consecutive));
        if(arrayT.length - i < arrayP.length - consecutive)
        {
            System.out.println("isTrue: " + isTrue);
            System.out.println("Break #1");
            break;
        }
        System.out.println("arrayT[i]: " + arrayT[i]);
        System.out.println("arrayP[consecutive]: " + arrayP[consecutive]);
        if(arrayT[i] == arrayP[consecutive])
        {
            consecutive += 1;
        }
        else
        {
            consecutive = 0;
        }
        System.out.println("Consecutive characters after comparison: " + consecutive);
        if(consecutive == arrayP.length)
        {
            System.out.println("Consecutive = Array P length, " + consecutive + " = " + arrayP.length);
            isTrue = true;
            System.out.println("isTrue: " + isTrue);
            System.out.println("Break #2");
            break;
        }
    }
    return isTrue;
}} 
```

这是我的测试结果。正如您将在下面看到的那样，每个测试在实际中断并返回布尔值之前循环两次 for 循环。为什么会发生这种情况，我该如何解决？任何人的帮助将不胜感激。

```
Test 1
String T: MINNESOTA
String P: INNE
Array T: [M, I, N, N, E, S, O, T, A]
Array T length: 9
Array P: [I, N, N, E]
Array P length: 4
i: 0
Consecutive characters before comparison: 0
Letters in T left to be compared: 9
Unmatched letters in array P: 4
arrayT[i]: M
arrayP[consecutive]: I
Consecutive characters after comparison: 0
i: 1
Consecutive characters before comparison: 0
Letters in T left to be compared: 8
Unmatched letters in array P: 4
arrayT[i]: I
arrayP[consecutive]: I
Consecutive characters after comparison: 1
i: 2
Consecutive characters before comparison: 1
Letters in T left to be compared: 7
Unmatched letters in array P: 3
arrayT[i]: N
arrayP[consecutive]: N
Consecutive characters after comparison: 2
i: 3
Consecutive characters before comparison: 2
Letters in T left to be compared: 6
Unmatched letters in array P: 2
arrayT[i]: N
arrayP[consecutive]: N
Consecutive characters after comparison: 3
i: 4
Consecutive characters before comparison: 3
Letters in T left to be compared: 5
Unmatched letters in array P: 1
arrayT[i]: E
arrayP[consecutive]: E
Consecutive characters after comparison: 4
Consecutive = Array P length, 4 = 4
isTrue: true
Break #2
    //Why does it break here, but continue to loop once again below before returning the boolean?

String T: MINNESOTA
String P: INNE
Array T: [M, I, N, N, E, S, O, T, A]
Array T length: 9
Array P: [I, N, N, E]
Array P length: 4
i: 0
Consecutive characters before comparison: 0
Letters in T left to be compared: 9
Unmatched letters in array P: 4
arrayT[i]: M
arrayP[consecutive]: I
Consecutive characters after comparison: 0
i: 1
Consecutive characters before comparison: 0
Letters in T left to be compared: 8
Unmatched letters in array P: 4
arrayT[i]: I
arrayP[consecutive]: I
Consecutive characters after comparison: 1
i: 2
Consecutive characters before comparison: 1
Letters in T left to be compared: 7
Unmatched letters in array P: 3
arrayT[i]: N
arrayP[consecutive]: N
Consecutive characters after comparison: 2
i: 3
Consecutive characters before comparison: 2
Letters in T left to be compared: 6
Unmatched letters in array P: 2
arrayT[i]: N
arrayP[consecutive]: N
Consecutive characters after comparison: 3
i: 4
Consecutive characters before comparison: 3
Letters in T left to be compared: 5
Unmatched letters in array P: 1
arrayT[i]: E
arrayP[consecutive]: E
Consecutive characters after comparison: 4
Consecutive = Array P length, 4 = 4
isTrue: true
Break #2
INNE is a substring of MINNESOTA: true

Test 2
String T: MINNESOTA
String P: INEN
Array T: [M, I, N, N, E, S, O, T, A]
Array T length: 9
Array P: [I, N, E, N]
Array P length: 4
i: 0
Consecutive characters before comparison: 0
Letters in T left to be compared: 9
Unmatched letters in array P: 4
arrayT[i]: M
arrayP[consecutive]: I
Consecutive characters after comparison: 0
i: 1
Consecutive characters before comparison: 0
Letters in T left to be compared: 8
Unmatched letters in array P: 4
arrayT[i]: I
arrayP[consecutive]: I
Consecutive characters after comparison: 1
i: 2
Consecutive characters before comparison: 1
Letters in T left to be compared: 7
Unmatched letters in array P: 3
arrayT[i]: N
arrayP[consecutive]: N
Consecutive characters after comparison: 2
i: 3
Consecutive characters before comparison: 2
Letters in T left to be compared: 6
Unmatched letters in array P: 2
arrayT[i]: N
arrayP[consecutive]: E
Consecutive characters after comparison: 0
i: 4
Consecutive characters before comparison: 0
Letters in T left to be compared: 5
Unmatched letters in array P: 4
arrayT[i]: E
arrayP[consecutive]: I
Consecutive characters after comparison: 0
i: 5
Consecutive characters before comparison: 0
Letters in T left to be compared: 4
Unmatched letters in array P: 4
arrayT[i]: S
arrayP[consecutive]: I
Consecutive characters after comparison: 0
i: 6
Consecutive characters before comparison: 0
Letters in T left to be compared: 3
Unmatched letters in array P: 4
isTrue: false
Break #1
    //Why does it break here, but continue to loop once again below before returning the boolean?

String T: MINNESOTA
String P: INEN
Array T: [M, I, N, N, E, S, O, T, A]
Array T length: 9
Array P: [I, N, E, N]
Array P length: 4
i: 0
Consecutive characters before comparison: 0
Letters in T left to be compared: 9
Unmatched letters in array P: 4
arrayT[i]: M
arrayP[consecutive]: I
Consecutive characters after comparison: 0
i: 1
Consecutive characters before comparison: 0
Letters in T left to be compared: 8
Unmatched letters in array P: 4
arrayT[i]: I
arrayP[consecutive]: I
Consecutive characters after comparison: 1
i: 2
Consecutive characters before comparison: 1
Letters in T left to be compared: 7
Unmatched letters in array P: 3
arrayT[i]: N
arrayP[consecutive]: N
Consecutive characters after comparison: 2
i: 3
Consecutive characters before comparison: 2
Letters in T left to be compared: 6
Unmatched letters in array P: 2
arrayT[i]: N
arrayP[consecutive]: E
Consecutive characters after comparison: 0
i: 4
Consecutive characters before comparison: 0
Letters in T left to be compared: 5
Unmatched letters in array P: 4
arrayT[i]: E
arrayP[consecutive]: I
Consecutive characters after comparison: 0
i: 5
Consecutive characters before comparison: 0
Letters in T left to be compared: 4
Unmatched letters in array P: 4
arrayT[i]: S
arrayP[consecutive]: I
Consecutive characters after comparison: 0
i: 6
Consecutive characters before comparison: 0
Letters in T left to be compared: 3
Unmatched letters in array P: 4
isTrue: false
Break #1
INEN is a substring of MINNESOTA: false 
```

以下是测试用例。

```
public class Problem2Test
{
/**
 * Test of isSubstring method, of class Problem2.
 */
@Test
public void testIsSubstring()
{
    System.out.println("Test 1");
    String T = "MINNESOTA";
    String P = "INNE";
    Problem2 instance = new Problem2();
    boolean expResult = true;
    boolean result = instance.isSubstring(T, P);
    System.out.println(P + " is a substring of " + T + ": " + instance.isSubstring(T, P));
    assertEquals(expResult, result);

    System.out.println("Test 2");
    T = "MINNESOTA";
    P = "INEN";
    Problem2 instance2 = new Problem2();
    expResult = false;
    result = instance.isSubstring(T, P);
    System.out.println(P + " is a substring of " + T + ": " + instance.isSubstring(T, P));
    assertEquals(expResult, result);}} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:58:01.963

因为您`instance.isSubstring(T,P)`为“测试 1”调用了两次 - 一次是保存`result`变量，一次是在`System.out`调用中。

# javascript - Javascript 修复表头

> ID：15931729
> 
> 赞同：1
> 
> 时间：2013-04-10T16:44:08.483
> 
> 标签：javascript, css

我无法修复表格的标题，这是我的问题：

我使用了这篇文章中的相同代码： [当用户使用 jQuery 将表头滚动到视图之外时，表头保持固定在顶部](https://stackoverflow.com/questions/4709390/table-header-to-stay-fixed-at-the-top-when-user-scrolls-it-out-of-view-with-jque)

它几乎可以工作，但问题是当我向下滚动时标题的宽度发生了变化。

我想知道我做错了什么。我尝试了以下代码来修复宽度，但不起作用。

```
$("#header-fixed td").each(function(index){
var index2 = index;
$(this).width(function(index2){
    return $("#table-1 td").eq(index).width();
});
}); 
```

这是链接：http: [//vvb.me/test.html](http://vvb.me/test.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:49:17.810

表格单元格的宽度不仅取决于该特定表格单元格的内容，还取决于与其相同的垂直列中的其他单元格。这是因为表格形成块，所以列的宽度必须对齐。

这里发生的情况是，附加单元格的计算宽度与`thead`为分离的固定`thead`单元格计算的宽度不同。

在附件`thead`中，单元格的宽度主要由以下数据确定。在第二种情况下，它没有附加到`tbody`，宽度完全由标题`td`s 决定。

一种解决方案是在两者中指定单元格的宽度`theads`。例如，指定，

```
<td style='...; width: 50px;'> 
```

在你所有的`thead`细胞上会使它们相等。

您还可以使用 javascript 来确定每个附加`thead`单元格的宽度，并将底部`thead`单元格设置为与其对应的单元格相等。可以使用 Javascript/Jquery 计算 DOM 元素的尺寸。查看[类似这样](https://stackoverflow.com/questions/294250/how-do-i-retrieve-an-html-elements-actual-width-and-height)的答案，了解如何做到这一点的方法。

# mysql - 使用具有 2400 万行的 where 子句的 mysql 查询

> ID：15931730
> 
> 赞同：0
> 
> 时间：2013-04-10T16:44:12.370
> 
> 标签：mysql

```
 SELECT DISTINCT `Stock`.`ProductNumber`,`Stock`.`Description`,`TComponent_Status`.`component`, `TComponent_Status`.`certificate`,`TComponent_Status`.`status`,`TComponent_Status`.`date_created` 
FROM Stock , TBOM , TComponent_Status
WHERE  `TBOM`.`Component` = `TComponent_Status`.`component` 
AND `Stock`.`ProductNumber` = `TBOM`.`Product` 
```

基本上表 TBOM 有：

24,588,820 行

查询速度非常慢，我不太确定我能做些什么来让它变得更好。我已经索引了查询中的所有其他表，但是 TBOM 在列中有一些重复项，所以我什至无法运行该命令。我有点困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:48:26.237

首先，索引以下字段：

```
TBOM.Component
TBOM.Product 
TComponent_Status.component   
Stock.ProductNumber 
```

并非所有上述索引都可能是必需的（例如，最后两个），但这是一个好的开始。

另外，`DISTINCT`如果您不是绝对需要它，请删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:01:50.563

我唯一能真正想到的就是在您的 Stock 表上有一个索引

```
(ProductNumber, Description) 
```

这可以通过两种方式提供帮助。由于您只在查询中使用这两个字段，因此引擎不需要转到每个股票记录的完整数据行，因为这两个部分都在索引中，它可以使用它。此外，您正在执行 DISTINCT，因此拥有可用于帮助优化 DISTINCTness 的索引也应该有所帮助。

现在，时间的另一个问题。由于您正在从库存到产品再到产品状态进行区分，因此您要求所有 2400 万个 TBOM 项目（假设材料清单），并且每个 BOM 组件都可以创建多个状态，您将获得每个组件的每个 BOM 更改。

如果您真正要寻找的是任何组件项的最新更改，您可能希望反向执行...类似...

```
SELECT DISTINCT 
      Stock.ProductNumber,
      Stock.Description,
      JustThese.component, 
      JustThese.certificate,
      JustThese.`status`,
      JustThese.date_created 
   FROM 
      ( select DISTINCT 
               TCS.Component,
               TCS.Certificate,
               TCS.`staus`,
               TCS.date_created
            from
               TComponent_Status TCS
            where
               TCS.date_created >= 'some date you want to limit based upon' ) as JustThese
         JOIN TBOM
            on JustThese.Component = TBOM.Component
            JOIN Stock
               on TBOM.Product = Stock.Product 
```

如果是这种情况，我会确保在组件状态表上有一个索引，例如（ date_created, component, certificate, status, date_created ）作为索引。这样，WHERE 子句将被优化，并且 distinct 也将被优化，因为片段已经是索引的一部分。

但是，如果您目前拥有它，如果单个“组件”有 10 个 TBOM 条目，并且该组件有 100 个更改，那么您的结果集中现在有 10 * 100 或 1,000 个条目。拿这个跨越2400万，它肯定不会好看。

# java - 重新启动android并以编程方式截取当前屏幕的屏幕截图

> ID：15931739
> 
> 赞同：-2
> 
> 时间：2013-04-10T16:44:35.870
> 
> 标签：java, android, screenshot, reboot

*你好*

有没有办法重启并截取android的截图？

`Settings.System`不适合我。

```
Settings.System.putInt(context.getContentResolver(),android.provider.Settings.System.SCREEN_BRIGHTNESS, 200); 
```

而且，有没有办法从应用程序/服务中截取当前设备屏幕的屏幕截图？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:46:20.777

> 有没有办法以编程方式重新启动android？

除非您的应用程序由系统密钥签名，否则不会。

> 有没有办法从应用程序中截取当前设备屏幕的屏幕截图？

在大多数无根设备上，这是不可能的，但在某些设备上，如果帧缓冲区可访问（它不在大多数设备上），您可能能够解析它。

# python - 如何在一个类中使用一个独立于python中创建的任何对象的变量？

> ID：15931740
> 
> 赞同：2
> 
> 时间：2013-04-10T16:44:36.390
> 
> 标签：python, class, variables

我想使用一个独立于类可能具有的任何对象的变量：

```
 class A:
        var = 5
    ob1 = A()
    ob2 = A()
    ob1.var += 2
    print ob2.var 
```

我希望一旦 ob1 将 var 的值从 5 修改为 7，ob2.var 也会显示 7 而不是 5。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T16:48:28.473

当您这样做时，`ob1.var += 2`您不是在修改类属性，而是在创建一个与类属性同名的新实例变量。例如：

```
>>> ob1 = A()
>>> ob1.var += 2
>>> ob1.__dict__
{'var': 7}
>>> ob1.__class__.__dict__
{'var': 5, '__module__': '__main__', '__doc__': None} 
```

如果要修改类属性，只需使用`A.var += 2`. 如果您需要从实例执行此操作，您可以使用`ob1.__class__.var += 2`.

以下是您如何使用[新样式类](http://docs.python.org/2/glossary.html#term-new-style-class)的属性来实现您想要的行为：

```
class A(object):
    _var = 5

    @property
    def var(self):
        return self.__class__._var

    @var.setter
    def var(self, value):
        self.__class__._var = value 
```

现在有了这个类，当您`var`在 的实例上获取或设置变量时`A`，它实际上将获取或设置类属性。例如：

```
>>> ob1 = A()
>>> ob2 = A()
>>> ob1.var += 2
>>> ob2.var
7 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T16:47:28.803

你已经很近了

```
class MyData:
    my_data_var = 4

class A:
    def fun1():
       MyData.my_data_var += 2

    def fun2():
       return MyData.my_data_var

def main():
    print MyData.my_data_var 
    a = A()
    a.fun1()    
    print a.fun2()
    b = A()
    b.fun1()
    print b.fun2()
    print a.fun1()

main() 
```

这些是静态类变量......还有其他方法可以类似地利用它们......但这是一个简单的快速示例

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T16:54:59.030

我想你可以使用 a`property`来做这样的事情：

```
class Foo(object):
    _var = 5

    @property
    def var(self):
        return self._var

    @var.setter
    def var(self,value):
        self.__class__._var = value

a = Foo()
b = Foo()

a.var += 3
assert a.var == 8
assert b.var == 8

c = Foo()
assert c.var == 8 #(un-instantiated objects pick up the change as well)

class Bar(Foo):
    pass

bar = Bar()
assert bar.var == 8
a.var += 1

#changes to Foo.var affect Bar until a bar object makes it's own changes
assert bar.var == 9    

# changes to a subclass's property don't have any effect on the parent class
bar.var += 2
assert bar.var == 11
assert a.var == 9 
```

如评论中所述，如果您有很多以这种方式运行的属性，这可能会有点乏味。稍微更通用的解决方案是执行以下操作：

```
class ClassAttribute(object):
    def __init__(self,vname,default=None):
        self.vname = '_'+str(vname)
        self.default = default

    def __get__(self,instance,owner):
        return getattr(owner,self.vname,self.default)

    def __set__(self,instance,value):
        setattr(instance.__class__,self.vname,value)

class Foo(object):
    var = ClassAttribute("var",5)

a = Foo()
b = Foo()
a.var += 2
print a.var
print b.var 
```

# php - 时差不正确

> ID：15931748
> 
> 赞同：-2
> 
> 时间：2013-04-10T16:45:15.377
> 
> 标签：php, time

为什么下面代码的输出是负数？

**代码：**

```
$date=strtotime("2013-04-10 21:31:30");
$now=time();
$diff=$now-$date;
echo $diff; 
```

上面代码的输出是`-17295`

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:47:06.637

因为您`strtotime("2013-04-10 21:31:30")`从较小的 ( ) 中减去较大的 ( `$date`)

但这也可能是因为你没有设置时区或者在 PHP 中设置不正确，if`$now`真的大于`$date`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:47:07.537

因为 $date 的时间戳在未来，因此 $now 小于它，因此产生一个负数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T16:56:56.487

我认为你得到了否定的答案`2013-04-10 21:31:30`，因为你分配给`$date`PHP 变量的时间是**印度标准时间**。

您的服务器时区可能不是 **Asia/Calcutta**。因此，您需要使用**[date_default_timezone_set](http://php.net/manual/en/function.date-default-timezone-set.php)****函数将脚本中所有日期/时间函数使用的默认时区设置为Asia/Calcutta**。

这应该可以完美运行：**[IDEONE DEMO](http://ideone.com/rW12aq)**

```
<?php
$date=strtotime("2013-04-10 21:31:30");
if(function_exists('date_default_timezone_set')) 
                                date_default_timezone_set("Asia/Calcutta");
$now=time();
$diff=$now-$date;
echo $diff;
?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T16:53:33.473

如果我们是`1365612708`1970 年 1 月 1 日的秒数，今晚 21:31:30 是 1970 年 1 月 1 日的秒数，当您从今晚的指定时间 ( ) 中`1365625890`减去现在 ( ) 时，您将得到秒数（即 3.6 小时（也就是 3 小时 30 分钟） ish））将来）`1365612708``1365625890``-13182`

# c - (*) 在纯 C 中是什么意思？

> ID：15931757
> 
> 赞同：6
> 
> 时间：2013-04-10T16:45:54.493
> 
> 标签：c, pointers

我无法理解以下语句中“(*)”表达式的含义：

```
#define PySpam_System \
 (*(PySpam_System_RETURN (*)PySpam_System_PROTO) PySpam_API[PySpam_System_NUM]) 
```

在哪里

```
#define PySpam_System_NUM 0
#define PySpam_System_RETURN int
#define PySpam_System_PROTO (const char *command) 
```

（摘自[http://docs.python.org/2/extending/extending.html](http://docs.python.org/2/extending/extending.html)）。那意味着什么？（请原谅我提出一个愚蠢的问题）。类似于函数指针，但语法非常混乱。

更新：感谢 Shahbaz 和 Jonathan，事情变得越来越清楚，但我仍然无法得到两个细微差别：

1.  为什么`const char *command`，不只是`const char *`。我认为在函数指针类型声明和类型转换中应该省略参数的名称？所以一定不能省略，而只是可以？
2.  为什么`(*(int (*)(const char *command))`，不只是`(int (*)(const char *command)`？外部`(*`[这里的所有其他内容]的目的是什么`)`？这是对函数本身的函数指针的可选取消引用，对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T16:50:29.710

```
PySpam_System_RETURN (*)PySpam_System_PROTO 
```

扩展为：

```
int (*)(const char *command) 
```

这是一个函数指针类型。所以基本上如下：

```
(*(PySpam_System_RETURN (*)PySpam_System_PROTO) PySpam_API[PySpam_System_NUM]) 
```

翻译为：

```
(*(int (*)(const char *command)) PySpam_API[0]) 
```

正在调用 的值，`PySpam_API[0]`就好像它是一个带有`const char*`参数和`int`返回值的函数（转换为函数指针）。请注意，这仍然缺少参数，因此使用宏的人应该给它参数，例如：

```
PySpam_System("some string"); 
```

* * *

在您的更新中：

1.  参数名称是可选的。他们本来可以写`const char *`的。我相信这个名字是为了清楚起见而写的。现在，不用看其他任何地方，我就知道该函数需要一个命令，所以我说这很有帮助。
2.  再说一次，你是对的。初始`*`取消引用函数指针。在 C 中，这是完全可选的。说起来会更对称，因为您正在取消引用一个指针，但是由于不取消引用函数指针没有意义，如果您不取消引用它不会有任何区别，C 会做唯一理智的事情为你。事实上，即使你放`******`了一个而不是一个，它仍然可以工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T16:52:30.350

用预处理器展开`PySpam_System`，你会看到：

```
(*(int (*)(const char *command)) PySpam_API[0]) 
```

该表达式（或多或少）是对“返回 int 并采用一个类型`const char *`的参数的函数的指针”的强制转换。之后必须`("something")`通过指向函数的指针将整体转换为函数调用。因此，在代码中，您可能会看到：

```
PySpam_System("abc"); 
```

编译器会看到：

```
(*(int (*)(const char *command)) PySpam_API[0])("abc"); 
```

那是对存储在`PySpam_API`索引位置 0 的数组中的函数的调用。显然，参数可能不是简单的字符串文字，但简单的字符串文字是一个代表`const char *`。

* * *

### 问题更新

> 为什么`const char *command`，不只是`const char *`。我认为在函数指针类型声明和类型转换中应该省略参数的名称？所以一定不能省略，而只是可以？

参数的名称（例如`command`在示例中）在原型声明中是可选的。也没有规定原型声明中的名称必须与函数定义中的名称匹配。遗憾的是，如果您编写函数以符合接口但函数的特定实现不需要参数，则 C 尚未采用 C++ 约定，即名称在函数定义中是可选的。也就是说，在 C++ 中，您可以编写：

```
typedef int (*interface)(const char *cmd, int arg1, int arg2);

static int implementation(const char *cmd, int arg1, int)  // C++, not C
{
    return some_other_function(cmd, arg1, 23, 19);
} 
```

该函数`implementation`符合`interface`类型，但不使用`arg2`参数，但编译器不会抱怨未使用的参数。C 不允许这种便利性，因此即使您非常清楚它未使用，您也会被告知“未使用的参数”。我相信有一些特定于编译器的方法可以解决这个特定问题。

> 为什么`(*(int (*)(const char *command))`，不只是`(int (*)(const char *command)`？外挂的目的是`(*[everything else here])`什么？这是对函数本身的函数指针的可选取消引用，对吗？

对。

请注意，通过函数指针调用函数有两种方法，大致是“旧”和“新”（其中新的意思是“由 C89 标准引入和祝福”，因此它不完全是“新”）。

所需的旧符号（提供或获取当时不可用的原型）：

```
#include <math.h>

double (*func)(double) = sin;

double x = (*func)(1.0); 
```

带括号和`*`函数指针。这个想法是，如果你有一个指向函数的指针，你需要取消引用它来调用函数。更现代的表示法指出，函数的名称变成了指向函数的指针（例如在赋值中），因此您实际上并不需要这种`(*func)`表示法。因此，较新的样式是：

```
#include <math.h>

double (*func)(double) = sin;

double x = func(1.0); 
```

由于我在旧式是强制性的时候学习了 C，所以我仍然更喜欢稍微冗长但完全明确的表示法。宏中的代码`PySpam_System`也使用旧的表示法。

您还可以使用函数指针玩各种愚蠢的游戏，添加额外的`*`和使用 a `&`，所有这些都是不必要的。

```
double (*funca)(double) =   &sin;
double (*func0)(double) =    sin;
double (*func1)(double) =   *sin;
double (*func2)(double) =  **sin;
double (*func3)(double) = ***sin; 
```

只有`func0`声明是明智的；其余的都是模糊的 C.

# android - 使用新的反向 DNS 命名约定更新 Play 商店列表

> ID：15931760
> 
> 赞同：0
> 
> 时间：2013-04-10T16:46:08.223
> 
> 标签：android, google-play

我在 Play 商店中列出了一个名为`com.foo.bar`的应用程序，但我想将 Play 商店中应用程序的 URL 更改为`com.foo.baz`. 上传带有新软件包名称的 APK 作为更新会自动更改 URL，还是我必须创建新的应用列表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:48:12.160

如果您上传具有新包名称的应用程序，则必须创建一个新列表。这将导致您丢失任何现有的下载次数、评论等。在您的应用程序的整个生命周期中，有两件事*必须保持不变：*

*   包名
*   签名密钥

# java - OpenNLP 的解析器标签

> ID：15931765
> 
> 赞同：2
> 
> 时间：2013-04-10T16:46:18.983
> 
> 标签：java, parsing, nlp, opennlp, pos-tagger

有没有关于 OpenNLP 中解析器标签含义的文档？我知道 POS 标签类型遵循 TreeBank 约定，但不幸的是我没有找到任何关于解析器标签的信息，例如“SBAR”等。

该文档是否存在于某个地方，或者我必须自己弄清楚？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T23:31:15.103

请参阅[Penn Treebank 标记集](http://bulba.sdsu.edu/jeanette/thesis/PennTags.html)和[树库注释指南](ftp://ftp.cis.upenn.edu/pub/treebank/doc/manual/root.ps.gz)

# mysql - MySql 查询优化父子关系

> ID：15931784
> 
> 赞同：1
> 
> 时间：2013-04-10T16:47:03.373
> 
> 标签：mysql, database, query-optimization, parent-child, union

我在大型数据库中遇到问题，其中一个查询显然不正确，而且我在数据库方面做得不好，所以我不确定我能做些什么来优化这个查询。下面是我的表结构，并详细说明了我需要获取的数据。

用户表

```
UserID    UserName    UserRole    ParentID
  1        ABC1            2          0
  2        ABC2            2          0
  3        ABC3            2          1
  4        ABC4            2          1
  5        ABC5            2          2 
```

调查表结构

```
SurveryID     SurveyTitle      UserID
   1           S1                3
   2           S2                3
   3           S3                4
   4           S4                4
   3           S3                4
   4           S4                5
   3           S3                3
   4           S4                5
   3           S3                3
   4           S4                4 
```

没有 parentID 的用户是主管，而有 parentID 的用户是该父主管下的销售人员。

所以，我想通过他们所做的一些操作系统调查来获取主管的名单和他们的销售人员。像下面的东西。

```
SuperVisorName     SurveyCount 
ABC1                    10
     ABC3           4    
     ABC4           6

ABC2                     18
     ABC5           18 
```

在我们当前的系统中，我们首先获取所有主管，然后查看所有主管以获取他们的销售人员及其调查。

这使得查询非常慢，从而导致超时错误。我们现在有 40k 条调查记录，希望增长超过 100k。

我对此进行了很少的搜索，我们发现 Union 可以在这方面提供帮助，但我不确定如何在我的场景中应用？我想这应该是完成上述结果的单个查询？

请让我知道，如果你有任何问题。我会澄清这些。

将感谢您对此的帮助。谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:39:05.620

试试这个查询

```
select 
   if(a.username is null, b.username, a.username) as username, 
   a.parentid, -----if(a.username is null, 0, a.parentid) parentid,  
   a.cnt       -----Replace above line if you want value to be 0 of parentId
from
   (select 
       parentid, 
       username,  
       count(*) cnt 
   from 
       tbl1 a 
   inner join 
       tbl2 b
   on 
       a.userid = b.userid
   group by 
       parentid, 
       username 
   with rollup) a
inner join
   tbl1 b
on 
   a.parentid = b.userid 
```

**结果**：

```
| USERNAME | PARENTID | CNT |
-----------------------------
|     ABC3 |        1 |   4 |
|     ABC4 |        1 |   4 |
|     ABC1 |        1 |   8 |
|     ABC5 |        2 |   2 |
|     ABC2 |        2 |   2 | 
```

## **[SQL 小提琴](http://sqlfiddle.com/#!2/bffee/12)**

# build - eglibc-2.16 libc.so 缺少 ruserok

> ID：15931785
> 
> 赞同：0
> 
> 时间：2013-04-10T16:47:03.333
> 
> 标签：build, compilation, glibc, configure, inet

我正在为两个不同的 ARM 板（一个 RaspberryPi 和一个 Gumstix Overo）创建一个优化的嵌入式 linux 系统，它们都将 eglibc-2.16 用于 GNU C 库。但是，我注意到我的 RaspberryPi 的 libc.so 库具有来自 inet lib 的 ruserok、ruserok_af 和 iuserok 符号，但我的 Gumstix Overo 板的 libc.so 库不包含这些符号。

我查看了配置帮助输出，看看我是否缺少包含这些符号的开关，但没有任何反应。我需要做一些特别的事情来让inet库及其所有符号编译到libc.so中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T07:31:41.043

我通过重新配置我的 OpenEmbedded 构建环境解决了这个问题。

# php - vim：使用 :php 过滤器在 HAML 中突出显示 php 语法

> ID：15931789
> 
> 赞同：0
> 
> 时间：2013-04-10T16:47:07.893
> 
> 标签：php, vim, syntax, haml

我正在使用`:php`随附的 HAML 过滤器`haml-contrib`在 haml 文件中编写 php 代码块。

这让我可以写：

```
!!! 5
%html
     %body
     -# HAML code ...
     :php
         // php code ... 
```

我想使用这个[vim-tip 突出](http://vim.wikia.com/wiki/Different_syntax_highlighting_within_regions_of_a_file)显示 vim 中的 php 代码。但是，我的股票 vim 提供的默认 php 语法文件仅突出显示 , 标签内的 php`<?php`代码`?>`。

我怎样才能解决这个问题？

请注意，我可以让 vim-tip 工作，因此突出显示以下内容：

```
!!! 5
%html
     %body
     -# HAML code ...
     :php
         <?php
              // php code ...
         ?> 
```

确实有效！它只是创建了糟糕的 HAML 输出（双`<?php ... ?>`标签），并没有反映我想要使用 HAML 实现的简单性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:52:00.890

更重要的是，您需要更新的 HAML 语法规则，以允许 vim 检测您何时从 haml->php 开始。

请记住，没有“php 脚本”之类的东西。只有文件中嵌入了 php 代码块，并且这些代码块用`<?php ... ?>`. vim 的 php 规则无法直接检测到您已进入 php 模式，因为您没有`<?php`发出信号。

# vb.net - 字符串或二进制数据将被截断 VB.Net 应用程序

> ID：15931792
> 
> 赞同：1
> 
> 时间：2013-04-10T16:47:17.503
> 
> 标签：vb.net, ado.net

我正在开发一个应用程序`VB.Net`，这是我的应用程序的主要形式：

[http://i.stack.imgur.com/a4KfQ.png](http://i.stack.imgur.com/a4KfQ.png)

当我单击按钮时，我希望`Ajouter`将控件中的所有信息添加到数据库中的表中。

这是表结构：

```
Create table Etudiant (
   num_insc varchar(20) primary key,
   CIN varchar(8),
   sexe varchar(1),
   nom_prenom varchar(30),
   date_naiss date,
   adresse varchar(150),
   Code_niveau varchar(5)
) 
```

这是我尝试过的代码：

```
Dim ds As New DataSet
Dim row As DataRow
Dim builder As SqlCommandBuilder
Dim adapter As SqlDataAdapter

Private Sub Form1_Load(sender As Object, e As EventArgs) Handles MyBase.Load
    code_niveau.Items.Add("BTS1")
    code_niveau.Items.Add("BTS2")
    adapter = New SqlDataAdapter("SELECT * FROM Etudiant", cn)
    adapter.Fill(ds, "Etudiant")

End Sub

Private Sub Button1_Click(sender As Object, e As EventArgs) Handles Button1.Click
    row = ds.Tables("Etudiant").NewRow
    row(0) = num_insc.Text
    row(1) = CIN.Text
    If (sexe_f.Checked) Then
        row(2) = sexe_f.Name
    Else
        row(2) = sexe_m.Name
    End If
    row(3) = nom_prenom.Text
    row(4) = date_naiss.Value
    row(5) = adresse.Text
    row(6) = code_niveau.Text
    ds.Tables("Etudiant").Rows.Add(row)
    builder = New SqlCommandBuilder(adapter)
    adapter.InsertCommand = builder.GetInsertCommand
    adapter.Update(ds, "Etudiant")
End Sub 
```

但是当我单击按钮时，`Ajouter`我收到此错误消息：

> 字符串或二进制数据将被截断。
> 
> 该语句已终止

.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:56:50.490

这是由于试图将太多数据写入表列之一。

在 处设置断点`row(0) = nun_insc.Text`，并从那里单步执行您的代码以找出它是哪一列以及为什么要写入太多文本，然后找出需要如何修复它。（解决方案将是缩短您尝试编写的文本或加宽表中的列以存储更多数据。）

为了更清楚，请在代码运行时逐步*执行每一行代码。*对于每一行：

*   查看运行该语句时它将写入的列，并查看它允许多少个字符。
*   查看即将写入该列的实际值，看看它是否等于或小于您在上述第一步中获得的数字。

当您确定它是哪一列时，您可以根据应用程序的需要决定是否需要限制用户可以输入的文本数量，或者使列更大以容纳更多字符。

# flash - Red5 简易录音机

> ID：15931796
> 
> 赞同：1
> 
> 时间：2013-04-10T16:47:38.857
> 
> 标签：flash, actionscript-2, red5

我使用 Red5 简单记录器来捕获视频并遇到以下问题：我如何阻止它为每个记录生成元文件，我使用带有播放列表的 jwplayer 将其流回并且元文件也出现在我的播放列表中。如何将记录限制添加到 5 分钟。简单的记录器是用 AS2 编写的，使用 Sorenson Spark 录制视频，使用 Nellymoser 录制 1 个剪辑 5 分钟 480x270 生成文件 30mb :) 当我尝试 wowza 内置录制器时，它是 AS3 和带有 SPEEX 的高级视频编解码器，相同的 480x270 视频约为 2mb。如果未按下从服务器删除录制的视频，我如何为用户添加保存按钮。谢谢

# r - 为什么当 ... = [.data.table 时 trace(..., edit=TRUE) 不起作用

> ID：15931801
> 
> 赞同：9
> 
> 时间：2013-04-10T16:47:51.093
> 
> 标签：r, data.table, trace

为了临时编辑一个打包函数的主体`func`，我经常使用`trace(func, edit=TRUE)`. 但是，出于某种原因，R 不允许我在以下情况`func`下这样做`[.data.table`：

```
## Note: In this and the other cases below, once an editor pops up, I save and 
## and then exit without making any edits to the function. The commented-out
## message below each call to trace() is what is then printed to my R console.

trace("[.data.table", where=data.table, edit=TRUE)
# Error in .makeTracedFunction(def, tracer, exit, at, print, doEdit) : 
#   the editing in trace() can only change the body of the function, not 
#   the arguments or defaults 
```

**问题：**什么可能导致此错误？还有哪些其他功能也会触发它？对于此类功能，是否有一些替代解决方法可以让我编辑它们？

FWIW，这似乎不是**data.table**命名空间中的函数的一般问题（见`#1`下文），也不是一般子集方法的问题（见`#2`下文）。

```
## (#1)     
trace("within.data.table", where=data.table, edit=TRUE)
# Tracing function "within.data.table" as seen from package "data.table"
# [1] "within.data.table"

## (#2)
trace("[.Date", edit=TRUE)
# Tracing function "[.Date" in package "base"
# [1] "[.Date" 
```

我在 Windows XP 机器上运行`R-3.0.0`，无论我使用 set还是使用 R GUI 的默认编辑器都会得到相同的错误。`data.table_1.8.8``options(editor="emacs")``options(editor="notepad")`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-11T17:13:57.480

这显然是由于最近在的正式参数列表中的`{}`一个位置添加了花括号（即）。`data.table`

首先，一个 MRE 表明牙套确实会导致`trace(..., edit=TRUE)`窒息：

```
## Without braces, no problem
func <- function(inColor=FALSE, col = if(inColor) "red" else "grey") { 
    plot(rnorm(99), col=col)}

trace(func, edit=TRUE)
# [1] "func"

## With braces, tracing fails
funcB <- function(inColor=FALSE, col = if(inColor) "red" else {"grey"}) { 
    plot(rnorm(99), col=col)}

trace(funcB, edit=TRUE)
# Error in .makeTracedFunction(def, tracer, exit, at, print, doEdit) : 
#   the editing in trace() can only change the body of the function, not 
#   the arguments or defaults 
```

然后，为了记录，这里是`[.data.table`版本 1.8.6（跟踪工作）和版本 1.8.8（不跟踪）中的形式：

```
## Version 1.8.6 -- Tracing worked
function (x, i, j, by, keyby, with=TRUE, nomatch=getOption("datatable.nomatch"), 
    mult="all", roll=FALSE, rolltolast=FALSE, 
    which=FALSE, .SDcols, verbose=getOption("datatable.verbose"), drop=NULL)

## Version 1.8.8 -- Tracing doesn't (See {} in the 'rollends' argument)
function (x, i, j, by, keyby, with=TRUE, nomatch=getOption("datatable.nomatch"), 
    mult = "all", roll = FALSE, 
    rollends = if (roll == "nearest") c(TRUE, 
        TRUE) else {
        if (roll >= 0) 
            c(FALSE, TRUE)
        else c(TRUE, FALSE)
    }, 
    which = FALSE, .SDcols, verbose = getOption("datatable.verbose"), 
    allow.cartesian = getOption("datatable.allow.cartesian"), 
    drop = NULL, rolltolast = FALSE) 
```

# sql - 如何将垂直数据透视到具有可变行长的水平数据 SQL？

> ID：15931803
> 
> 赞同：0
> 
> 时间：2013-04-10T16:47:55.753
> 
> 标签：sql, sql-server-2005, pivot, unpivot

**好的，我有下表。**

```
Name    ID  Website

Aaron | 2305 |  CoolSave1

Aaron | 8464 |  DiscoWorld1

Adriana |   2956 |  NewCin1

Adriana |   5991 |  NewCin2

Adriana | 4563  NewCin3 
```

我想将其转换为以下方式。

```
Adriana  |  2956 |  NewCin1 |   5991 |  NewCin2 | 4563  | NewCin3

Aaron | 2305 | CoolSave1 |  8464 |  DiscoWorld | NULL | NULL 
```

正如您所看到的，我正在尝试从第一个表中获取名字，并使用与该名称关联的所有 ID / 网站创建一行。问题是，可能与每个名称相关联的网站数量不定。为了处理这个问题，我只想制作一个字段数等于最大行项目的表，然后对于后续的行项目，在没有足够数据的地方插入一个 NULL。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T17:08:35.427

为了获得结果，您需要将 UNPIVOT 和 PIVOT 函数应用于数据。UNPIVOT 将获取列（ID、网站）并将它们转换为行，一旦完成，您就可以将数据 PIVOT 回列。

UNPIVOT 代码将类似于以下内容：

```
select name,
  col+'_'+cast(col_num as varchar(10)) col,
  value
from
(
  select name, 
    cast(id as varchar(11)) id, 
    website,
    row_number() over(partition by name order by id) col_num
  from yt
) src
unpivot
(
  value
  for col in (id, website)
) unpiv; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/83267/6)。这给出了一个结果：

```
|    NAME |       COL |       VALUE |
-------------------------------------
|   Aaron |      id_1 |        2305 |
|   Aaron | website_1 |   CoolSave1 |
|   Aaron |      id_2 |        8464 |
|   Aaron | website_2 | DiscoWorld1 | 
```

如您所见，我`row_number()`在取消透视之前将 a 应用于数据，行号用于生成新的列名。UNPIVOT 中的列也必须是相同的数据类型，我将 a 应用于子查询中`cast`的`id`列以将数据转换为数据`varchar`透视之前的数据。

`col`然后在 PIVOT 中使用这些值。取消透视数据后，应用 PIVOT 函数：

```
select *
from
(
  select name,
    col+'_'+cast(col_num as varchar(10)) col,
    value
  from
  (
    select name, 
      cast(id as varchar(11)) id, 
      website,
      row_number() over(partition by name order by id) col_num
    from yt
  ) src
  unpivot
  (
    value
    for col in (id, website)
  ) unpiv
) d
pivot
(
  max(value)
  for col in (id_1, website_1, id_2, website_2, id_3, website_3)
) piv; 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/83267/7)。

如果您的值数量有限或已知，则上述版本非常有用。但如果行数未知，则需要使用动态 SQL 生成结果：

```
DECLARE @cols AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX)

select @cols = STUFF((SELECT ',' + QUOTENAME( col+'_'+cast(col_num as varchar(10))) 
                    from
                    (
                      select row_number() over(partition by name order by id) col_num
                      from yt
                    ) t
                    cross apply
                    (
                      select 'id' col union all
                      select 'website'
                    ) c
                    group by col, col_num
                    order by col_num, col
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 'SELECT name,' + @cols + ' 
            from 
            (
               select name,
                col+''_''+cast(col_num as varchar(10)) col,
                value
              from
              (
                select name, 
                  cast(id as varchar(11)) id, 
                  website,
                  row_number() over(partition by name order by id) col_num
                from yt
              ) src
              unpivot
              (
                value
                for col in (id, website)
              ) unpiv
            ) x
            pivot 
            (
                max(value)
                for col in (' + @cols + ')
            ) p '

execute(@query); 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/83267/8)。两个版本都给出了结果：

```
|    NAME | ID_1 | WEBSITE_1 | ID_2 |   WEBSITE_2 |   ID_3 | WEBSITE_3 |
------------------------------------------------------------------------
|   Aaron | 2305 | CoolSave1 | 8464 | DiscoWorld1 | (null) |    (null) |
| Adriana | 2956 |   NewCin1 | 4563 |     NewCin3 |   5991 |   NewCin2 | 
```

# c# - 从 GenericClass 访问静态方法 其中 T 由 Type 实例给出

> ID：15931805
> 
> 赞同：4
> 
> 时间：2013-04-10T16:48:01.407
> 
> 标签：c#, generics, reflection, types, static

我有一个带有静态方法的泛型类，该方法使用类型参数：

```
GenericClass<T>
{
    public static void Method()
    {
        //takes info from typeof(T)
    }
} 
```

现在，我需要访问该静态方法，而不是简单地使用`GenericClass<KnownType>.Method()`. 我需要有一个 Type 实例来做到这一点。所以：

```
public void OutsiderMethod(Type T)
{
    GenericClass<T>.Method() 
    //it's clear this line won't compile, for T is a Type instance
    //but i want some way to have access to that static method.
} 
```

使用反射，我可能可以使用一些 MethodInfo 的东西通过它的字符串名称来调用该方法。这部分好，解决了问题。但如果可能的话，我希望不必将名称用作字符串。

任何人？？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T16:57:47.043

非泛型类的泛型方法比泛型类的非泛型方法更容易访问。

您可以创建一个简单地调用真实方法的辅助方法：

```
void OutsiderMethodHelper<T>()
{
    GenericClass<T>.Method();
} 
```

然后，您可以获取该`MethodInfo`方法的方法，而无需通过 name-as-string 查找它：

```
public void OutsiderMethod(Type T)
{
    Action action = OutsiderMethodHelper<object>;
    action.Method.GetGenericMethodDefinition().MakeGenericMethod(T).Invoke(null, null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:46:21.097

这是一个使用*表达式*的示例：

```
public static class GenericHelper
{
    public static object Invoke(Expression<Action> invokeMethod, object target, Type genericType, params object[] parameters)
    {
        MethodInfo methodInfo = ParseMethodExpression(invokeMethod);
        if (!methodInfo.DeclaringType.IsGenericType)
            throw new ArgumentException("The method supports only generic types");
        Type type = methodInfo.DeclaringType.GetGenericTypeDefinition().MakeGenericType(genericType);
        MethodInfo method = type.GetMethod(methodInfo.Name);
        return method.Invoke(target, parameters);
    }

    public static object Invoke(Expression<Action> invokeMethod, Type genericType, params object[] parameters)
    {
        return Invoke(invokeMethod, null, genericType, parameters: parameters);
    }

    private static MethodInfo ParseMethodExpression(LambdaExpression expression)
    {
        Validate.ArgumentNotNull(expression, "expression");
        // Get the last element of the include path
        var unaryExpression = expression.Body as UnaryExpression;
        if (unaryExpression != null)
        {
            var memberExpression = unaryExpression.Operand as MethodCallExpression;
            if (memberExpression != null)
                return memberExpression.Method;
        }
        var expressionBody = expression.Body as MethodCallExpression;
        if (expressionBody != null)
            return expressionBody.Method;
        throw new NotSupportedException("Expession not supported");
    }
} 
```

方法调用将如下所示：

```
GenericHelper.Invoke(() => GenericClass<object>.Method(), typeof(string)); 
```

# android - 哪个是 LocationSource 的默认提供程序？

> ID：15931807
> 
> 赞同：0
> 
> 时间：2013-04-10T16:48:08.180
> 
> 标签：android

`LocationSource`只是一个帮助我处理位置数据的接口。它使用[onLocationChanged(Location location)](http://developer.android.com/reference/com/google/android/gms/maps/LocationSource.OnLocationChangedListener.html#onLocationChanged%28android.location.Location%29)方法，该方法将 Location 对象作为参数（lat、long 和其他信息）。

因此，如果我理解这里所说的内容：

```
A GoogleMap object has a built-in location provider for its my-location layer, but it can be replaced with another one that implements this interface. 
```

...我的 GoogleMap 对象有一个**新**的（内置位置提供程序）位置提供程序，尽管我可以使用`LocationManager`并从中选择

我的代码在下面（如您所见，我没有使用 LocationManager），当我点击我的位置时，我得到了一个非常准确的位置（`mMap.setMyLocationEnabled(true);` ）如果我有 GPS，我可以得到我的位置，所以我什么时候我只有wifi。

所以我的问题是：这个新的提供商与 GPS/网络“不同”吗？如果我不使用 locationManager 会有问题吗？（是的，我知道对于官方应用程序，我最好使用 LocationManager 来检查每个案例，但它仍然有效）。

我的猜测是它使用 GPS 或网络，但如果我都启用了哪个是默认设置？该应用首先使用哪个提供商？

**代码**：

```
public class MainActivity extends FragmentActivity implements OnMapClickListener, OnMapLongClickListener, LocationSource, LocationListener {

private GoogleMap mMap;
private OnLocationChangedListener mapLocationListener=null;

private static final LatLng SKG_VIEW = new LatLng(40.6402778, 22.9438889);

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    setUpMapIfNeeded();               

//   mMap = ( (SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)  ).getMap();

}

@Override
protected void onResume() {
    super.onResume();
    setUpMapIfNeeded();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.menu_main, menu);
    return true;
}

/**  **************** SetUp Map if needed *****************
 * 
 * Sets up the map if it is possible to do so (i.e., the Google Play services APK is correctly
 * installed) and the map has not already been instantiated.. This will ensure that we only ever
 * call {@link #setUpMap()} once when {@link #mMap} is not null.
 * <p>
 * If it isn't installed {@link SupportMapFragment} (and
 * {@link com.google.android.gms.maps.MapView
 * MapView}) will show a prompt for the user to install/update the Google Play services APK on
 * their device.
 * <p>
 * A user can return to this Activity after following the prompt and correctly
 * installing/updating/enabling the Google Play services. Since the Activity may not have been
 * completely destroyed during this process (it is likely that it would only be stopped or
 * paused), {@link #onCreate(Bundle)} may not be called again so we should call this method in
 * {@link #onResume()} to guarantee that it will be called.
 */
private void setUpMapIfNeeded() {
    // Do a null check to confirm that we have not already instantiated the map.
    if (mMap == null) {
        // Try to obtain the map from the SupportMapFragment.
        mMap = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map))
                .getMap();
        mMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
        mMap.setMyLocationEnabled(true);
        mMap.setOnMapClickListener(this);

             /***
              *         *****   CAMERA ***** 
              ***/

     // Construct a CameraPosition focusing on Mountain View and animate the camera to that position.
        CameraPosition cameraPosition = new CameraPosition.Builder()
            .target(SKG_VIEW)      // Sets the center of the map to SKG_VIEW point
            .zoom(7)                   // Sets the zoom
            .build();                   // Creates a CameraPosition from the builder

        mMap.animateCamera(CameraUpdateFactory.newCameraPosition(cameraPosition));

        // Check if we were successful in obtaining the map.
        if (mMap != null) {
            setUpMap();
        }
    }
}
/** ******************   Add Markers ***************************
 * 
 * This is where we can add markers or lines, add listeners or move the camera. In this case, we
 * just add a marker near Africa.
 * 
 * This should only be called once and when we are sure that {@link #mMap} is not null.
 */
private void setUpMap() {
    mMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker"));
    mMap.addMarker(new MarkerOptions().position(new LatLng(10, 10)).title("Marker 2"));
    mMap.addMarker(new MarkerOptions().position(new LatLng(40, 40)).title("Marker 2"));

}

/**
 * 
 * *****************  onMapClick *******************************
 * 
 */

@Override
public void onMapClick(LatLng point) {
        mMap.animateCamera(CameraUpdateFactory.newLatLng(point));

}

@Override
public void onMapLongClick(LatLng point) {
    //dont need it right now        
}

@Override
public void activate(OnLocationChangedListener listener) {
    // LocationSource
    this.mapLocationListener=listener;
}

@Override
public void deactivate() {
    // LocationSource
    this.mapLocationListener=null;
}

public void OnLocationChanged(Location location)    {                               //LocationListener
        if( mapLocationListener != null )   {
            mapLocationListener.onLocationChanged(location);

            double lat = location.getLatitude();
            double lon = location.getLongitude();

            Log.v("TAG", "i was here");
        }
}

@Override   
public void onProviderDisabled(String provider) {                                   //LocationListener
    // TODO Auto-generated method stub

}

@Override
public void onProviderEnabled(String provider) {                                    //LocationListener
    // TODO Auto-generated method stub

}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
    // TODO Auto-generated method stub

}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:04:35.140

> 这个新的提供商与 GPS/网络“不同”吗？

No.[`LocationSource`是一个接口](https://developers.google.com/maps/documentation/android/reference/com/google/android/gms/maps/LocationSource)，而不是一个提供者。

> 如果我不使用 locationManager 会有问题吗？

如果您愿意，欢迎您通过自己的自定义让您的位置来自随机数生成器`LocationSource`。请注意，这可能会使用户感到困惑。:-)

> 我的猜测是它使用 GPS 或网络，但如果我都启用了哪个是默认设置？

由于 Maps V2 是封闭源代码，我们无法确定，并且 AFAIK 的行为没有记录。我假设它将使用更准确的可用位置，并且它可能会在 GPS 提供商等待其第一次修复时同时使用*这两个提供商。*

# sql-server - 如何在涉及 2 个数据库的 SQL Server 中创建数据库图？

> ID：15931818
> 
> 赞同：7
> 
> 时间：2013-04-10T16:48:37.660
> 
> 标签：sql-server, sql-server-2008, database-diagramming, database-diagram

是否可以在同一个 SQL Server 项目中创建涉及两个数据库的数据库图？我在一个数据库中有一个表，我想为另一个数据库中的另一个表创建一个外键。

我正在使用 MS SQLServer 2008 R2。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T16:52:54.197

唯一的方法是在一个数据库中为另一个数据库中的表创建空代理项，然后使用代理项创建图表...您可能希望将这些代理项放在将它们标识为代理项的模式中对于另一个数据库中的实际表。

# ios - 如何遍历 sqlite_step 结果

> ID：15931822
> 
> 赞同：0
> 
> 时间：2013-04-10T16:48:46.677
> 
> 标签：ios, sqlite

有人可以填写下面缺少的几段代码吗？我正在努力使用 sqlite3_step 执行 sqlite 语句，遍历每一行结果并将数据放入可用的格式。

这是创建数据库的代码（数据库只有两列）

```
// Check if database is setup, if not create it
NSString *documents_directory;
NSArray *directory_path;

// Get the documents directory
directory_path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);

documents_directory = [directory_path objectAtIndex:0];

// Build the path to the database file
databasePath = [[NSString alloc] initWithString: [documents_directory stringByAppendingPathComponent:  @"weights.db"]];

NSFileManager *file_manager = [NSFileManager defaultManager];

// Create database if it doesn't already exist
if([file_manager fileExistsAtPath: databasePath ] == NO){
    const char *database_path = [databasePath UTF8String];

    if(sqlite3_open(database_path, &contactDB) == SQLITE_OK){
        char *error_message;
        const char *sql_statement = "CREATE TABLE IF NOT EXISTS RECORDED_WEIGHTS (ID INTEGER PRIMARY KEY AUTOINCREMENT, WEIGHT TEXT, TIME TEXT)";

        if(sqlite3_exec(contactDB, sql_statement, NULL, NULL, &error_message) != SQLITE_OK){
            status.text = @"Failed to create table";                
        }
        sqlite3_close(contactDB);

    }else{
        status.text = @"Failed to open/create database";
    }
} 
```

这是我要完成的代码；

```
// Get info from database and load it.
const char *database_path = [databasePath UTF8String];
sqlite3_stmt *statement;

if(sqlite3_open(database_path, &contactDB) == SQLITE_OK){

    NSString *SQLquery = [NSString stringWithFormat:@"SELECT * FROM RECORDED_WEIGHTS ORDER BY TIME DESC"];

    const char *query_statement = [SQLquery UTF8String];

    if(sqlite3_prepare_v2(contactDB, query_statement, -1, &statement, NULL) == SQLITE_OK){

        // Please help me execute statement and get results into useable format here.

    }

    sqlite3_finalize(statement);

}
sqlite3_close(contactDB); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T12:40:23.440

你想做这样的事情：

```
while(sqlite3_step(statement) == SQLITE_ROW) 
{
   // int value
   int intValue = sqlite3_column_int(statement,fieldIndex);

   // string value
   NSString* stringValue;
   if (sqlite3_column_type(dbps, fieldIndex) != SQLITE_NULL) 
   {
       const char *c = (const char *)sqlite3_column_text(dbps, fieldIndex);
       if (c) 
       {
          stringValue = @(c);
       }
   }

        ... etc...
} 
```

查看不同列类型的文档。您还可以查看不同的objective-c 包装器，以了解如何访问数据库。

# javascript - D3.js scale：返回常数和比例值中的较小者？

> ID：15931824
> 
> 赞同：1
> 
> 时间：2013-04-10T16:48:47.857
> 
> 标签：javascript, d3.js

我有一个在条形图中使用的 D3 序数比例：

```
var y = d3.scale.ordinal().rangeRoundBands([0, height], .1); 
```

我这样称呼它来定位许多`g`元素，一个用于条形图中的每个条形：

```
var barEnter = bar.enter()
  .insert("g", ".axis")
  .attr("class", "bar")
  .attr("transform", function(d, i) {
    return "translate(0," + (y(d.State) + height) + ")";
  }); 
```

当有许多条时，它的效果非常好，因为它们分布均匀。

![在此处输入图像描述](https://i.stack.imgur.com/6Br7K.png)

但是，它可以工作，但当只有几个条时看起来不太好：

![在此处输入图像描述](https://i.stack.imgur.com/xk8nf.png)

有没有办法我可以修改`y`函数或`transform`属性，以便`transform`在只有几条时更明智地设置？我不完全理解序数比例在幕后做了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:08:34.303

为了他人的利益，我就是这样解决的。

我意识到问题发生在 y 比例域中只有几个元素时。所以我最终填充了规模的域，如下所示：

```
if (ydomain.length < 12) {
  for (var i = ydomain.length; i < 12; i++) {
    ydomain.push('y_' + i);
  }
}
y.domain(ydomain); 
```

我怀疑这是最优雅的做事方式，但它确实有效。

# jquery - 在gridview行中插入jquery滑块

> ID：15931828
> 
> 赞同：0
> 
> 时间：2013-04-10T16:49:07.933
> 
> 标签：jquery, asp.net, gridview, slider

-- 我正在使用 asp.net 创建一个 gridview 控件，我想在设置为预定义值的列中添加一个 jquery 滑块。我的方法是使用gridview的行创建事件来调用具有预定义值的滑块函数，但是当页面呈现时没有滑块。关于为什么的任何想法？

```
 <%@ Page Title="" Language="vb" AutoEventWireup="false" MasterPageFile="~/Site.Master" CodeBehind="AssessmentLoggedIn.aspx.vb" Inherits="BCEE_KAIV2.WebForm1" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
    <!-- HTTP 1.1 -->
<meta http-equiv="Cache-Control" content="no-store"/>
<!-- HTTP 1.0 -->
<meta http-equiv="Pragma" content="no-cache"/>
<!-- Prevents caching at the Proxy Server -->
<meta http-equiv="Expires" content="0"/>
    <style type="text/css">
        .btnHolder {
            text-align: center;
            width: 175px;
            margin: 0 auto;

        }
    #slider {
        float: left;
        width: 305px;
        padding-left:10px;
        padding-right:10px;
    }
     .auto-style3 {
         color:Gray;
     }
 </style>
    <link href="Styles/jquery-ui.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="Scripts/tinybox2/tinybox.js"></script>
    <link href="Scripts/tinybox2/style.css" rel="stylesheet" />
    <script src="Scripts/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="Scripts/jquery-ui.js" type="text/javascript"></script>
    <script type="text/javascript">
        $(function () {
            $("#accordion").accordion({
                collapsible: true,
                heightStyle: "content"
            });
        });
    </script>
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <h3> <span class="auto-style3">Welcome</span>&nbsp;
    <asp:Label ID="lastNameHolder" runat="server" Text="Label" CssClass="auto-style3"></asp:Label>,
    &nbsp; 
    <asp:Label ID="firstNameHolder" runat="server" Text="Label" CssClass="auto-style3"></asp:Label>
    </h3>
    <div id="accordion">
        <h3>Step 1: Complete Optional Information</h3>
    <div>Displ some box <br /></div>
    <h3>Step 2: Take Assessment</h3>
    <div id="divStep2" runat="server"><div class="btnHolder"><asp:Button ID="btnAssessStart" runat="server" Text="Start Your Assessment" /></div></div>
    <h3>Step 3: Review Responses</h3>
    <div>
           <asp:LinqDataSource ID="linqDSUserResponse" runat="server" 
            ContextTypeName="BCEE_KAIV2.kaiDataContext" EntityTypeName="" 
            TableName="tblAssessmentQuestions">
        </asp:LinqDataSource>

        <asp:GridView ID="gvDisplayUserResponse" runat="server" 
            AutoGenerateColumns="False" DataKeyNames="questionPK" 
            DataSourceID="linqDSUserResponse">
            <Columns>
                <asp:CommandField ShowSelectButton="True" />
                <asp:TemplateField>
                    <ItemTemplate>
                        <asp:Label ID="lblItemNum" runat="server" Text="Label"></asp:Label>
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:TemplateField HeaderText="questionPK" SortExpression="questionPK" 
                    Visible="False">
                    <ItemTemplate>
                        <asp:Label ID="Label1" runat="server" Text='<%# Bind("questionPK") %>'></asp:Label>
                    </ItemTemplate>
                    <EditItemTemplate>
                        <asp:Label ID="Label1" runat="server" Text='<%# Eval("questionPK") %>'></asp:Label>
                    </EditItemTemplate>
                </asp:TemplateField>
                <asp:BoundField DataField="questionPresentationOrder" HeaderText="questionPresentationOrder" 
                    SortExpression="questionPresentationOrder" Visible="False" 
                    InsertVisible="False" />
                <asp:BoundField DataField="questionChoice1Text" 
                    HeaderText="questionChoice1Text" 
                    SortExpression="questionChoice1Text" />
                <asp:TemplateField>
                <ItemTemplate>
                    <div id="slider"> </div>
                </ItemTemplate>
                </asp:TemplateField>
                <asp:BoundField DataField="questionChoice2Text" 
                    HeaderText="questionChoice2Text" SortExpression="questionChoice2Text" />
                <asp:CheckBoxField DataField="questionStatus" HeaderText="questionStatus" 
                    SortExpression="questionStatus" Visible="False" />
            </Columns>
        </asp:GridView>
    </div>
    <h3>Step 4: Evaluate Assessment</h3>
        <div><div class="btnHolder"><asp:Button  ID="evaluateAssessment" runat="server" Text="Evaluate Your Assessment"/></div></div>
</div>
<script type="text/javascript">
         function open_win() {
             window.open("AssessmentLoggedIn.aspx", "_self");
         }
</script>

    </asp:Content> 
```

和我背后的代码

```
Protected Sub gvDisplayUserResponse_RowCreated(ByVal sender As Object, ByVal e As System.Web.UI.WebControls.GridViewRowEventArgs) Handles gvDisplayUserResponse.RowCreated

    If e.Row.RowType = DataControlRowType.DataRow Then

        Dim myUserID As String = "13-zTest1RaffertyRichard0000"
        Dim myRowNumLabel As Label = CType(e.Row.Cells(1).Controls(1), Label)
        Dim myQuestionID As Guid = New Guid(gvDisplayUserResponse.DataKeys(e.Row.RowIndex).Value.ToString)

        myRowNumLabel.Text = e.Row.RowIndex.ToString() + 1

        Dim cxt As kaiDataContext = New kaiDataContext

        Dim myUserInput = From ui In cxt.tblAssesseeResults
                        Where ui.assesseeUniqueID = myUserID And
                              ui.assesseeQuestionID = myQuestionID
                        Select ui.assesseeResponseScore

        Dim mySliderValue As Integer = 0

        For Each mui In myUserInput
            mySliderValue = CType(mui, Integer)
        Next

        Dim csname As String = "userResponseSlider"
        Dim cstype As Type = Me.GetType()
        Dim cs As ClientScriptManager = Page.ClientScript

        If (Not cs.IsClientScriptBlockRegistered(cstype, csname)) Then
            Dim sb As New StringBuilder()

            sb.Append("(function () {")
            sb.Append("$('#slider').slider({")
            sb.Append("value: ")
            sb.AppendFormat("{0}", mySliderValue)
            sb.Append(", min: 10, max: 90, step: 1")
            sb.Append(" }); }); ")
            cs.RegisterStartupScript(cstype, csname, sb.ToString(), True)
        End If
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:05:00.473

首先，`key`参数 in`RegisterStartupScript`是唯一的，因此如果为多行调用此代码，则实际上只会将第一个脚本块呈现到页面。

我不认为这是你的主要问题。打开您的 javascript 控制台并查找错误，并查看页面的源代码并确保您确实有 1) id 为“slider”的 div 和 2) 用于呈现页面上呈现的滑块的客户端脚本。

# linq - LINQ初学者，文档版本的表连接查询

> ID：15931830
> 
> 赞同：0
> 
> 时间：2013-04-10T16:49:11.333
> 
> 标签：linq

我有一张`Document`桌子和一张`Version`桌子。两者都有相同的信息。每当创建一个文档时，它就会被插入到文档表中。每当编辑该文档时，就会在版本表中添加一行。

它有一个字段 dateApproved ，`null`直到它被批准。我目前正在处理 MVC 4 Approval 页面，我之前从未接触过 linq，它需要在 linq 中完成。

如何加入这两个表 Document/Version 并仅显示 dateApproved 所在的项目`null`？

```
from v in Versions
select v

from v in Document
select v 
```

编辑#1

用户添加一个全新的文档，然后将该文档添加到文档表中。此时，文件需要批准。Documents 表中的 dateApproved 字段为空。假设该文档获得批准，然后用户进行更改，并且由于该文档已经存在，因此将一行添加到 Versions 表中。现在，该文档存在于两个表中，原始文档的修订版 0 和 dateApproved，而 Versions 表的修订版 1 的 dateApproved 为空。

我需要的是 dateApproved 为 null 的文档，这个 null 在 Documents 表或 Versions 表中。批准后，我们​​保留 Version 表中的行，并使用批准的版本更新 Documents 表中的行。

键主键是 DocumentID。

编辑#2

感谢 Peter Kiss，它现在显示所有需要批准的文件。我又遇到了一个小问题。它返回 3 个正确的结果。2 个文件是全新的，1 个已被编辑。

2个全新的文件正确显示文档表中的信息。编辑后的文件显示文档表中的信息，但我需要修订表中的信息。是否可以让它在版本表中存在时返回版本表信息，在版本表中不存​​在时返回文档表信息（即全新）。

希望我解释得当。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:00:04.993

仅选择具有`dateApproved`为空的记录。并将其收集在某种列表中`listofVersions`。

```
var listofVersions=(from v in Versions 
         where v.dateApproved==null
         select v).ToList(); 
```

您可以对`Document`. 只需替换`Version`为`Document`. 注意：我只是收集它`var`以使其简单。您可以根据需要创建一个列表`Versions/Document`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:06:41.523

```
var documents = 
    ctx.Documents
         .Where(x => x.dateApproved == null 
                     || x.Versions.Any
                           (y => y.dateApproved == null)); 
```

文档变量将仅包含那些具有未经批准版本的文档。然后，当您遍历此集合时，当前文档可以通过名为 Versions 的导航属性访问它的 Versions（全部）。在该集合中，您可以过滤未批准的版本。

所有这一切只有在您的上下文中正确设置映射（又名外键）时才会发生。

## 编辑 #2 后

```
class DocumentToApprove
{
    public string Name { get; set; }
    /* other stuff */
    public int version { get; set; }
}

var documents = ctx.Documents
          .Where(x => x.dateApproved == null 
                      || x.Versions.Any(y => y.dateApproved == null));

var toApprove = from d in documents
            let v = d.Versions.FirstOrDefault(y => y.Approved == null)
        select new DocumentToApprove
                   {    Name = d.Name
                                ,
                                /* other stuff */
                                Version = v == null ? 1 : v.VersionNumber
                            }; 
```

# opencv - 关键点响应（）方法

> ID：15931833
> 
> 赞同：0
> 
> 时间：2013-04-10T16:49:23.167
> 
> 标签：opencv, javacv

我已经成功地使用 response() 方法在我的图像检索软件中对关键点进行排序，我可以清楚地看到它带来的优势。尽管试图弄清楚其背后的科学原理，但我遇到了一些麻烦，因为文档只说该方法可以让您知道给定关键点的强弱程度。

我想知道它实际上是如何工作的，因为我喜欢了解事情在后台是如何运作的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-06T19:19:46.990

可以在[这里](https://stackoverflow.com/a/10333506/59184)找到一个相当详细的答案，但本质上是斑点检测步骤的响应产生了这个特征点。因此，当算法找到图像中有趣的区域时，它是对 blob 看起来像 blob 的程度的度量。

# doctrine-orm - Zend Framework 2 Doctrine 2 - 多个表单相同的视图

> ID：15931835
> 
> 赞同：1
> 
> 时间：2013-04-10T16:49:28.030
> 
> 标签：doctrine-orm, zend-framework2, zend-form

我创建了一个具有以下依赖项的 ZF2 项目：

```
 "php": ">=5.3.3",
    "zendframework/zendframework": "2.*",
    "zendframework/zend-developer-tools": "dev-master",
    "doctrine/doctrine-orm-module": "dev-master",
    "bjyoungblood/bjy-profiler": "dev-master" 
```

我创建了一个用户实体和一个 RegisterUser 表单。在我的索引操作中，我将用户实体绑定到我的注册表单并将其传递给我的视图 - 如下所示：

```
public function indexAction() {

    $entityManager = $this->getServiceLocator ()->get ( 'Doctrine\ORM\EntityManager' );

    $form = new RegisterUserForm ( $this->serviceLocator );

    $user = new User ();
    $form->bind ( $user );

    if ($this->getRequest()->isPost()) {
        $form->setData ( $this->getRequest()->getPost () );
        if ($form->isValid ()) {
            $entityManager->persist($user);
            $entityManager->flush();
        }
    }

    return new ViewModel(array('form' => $form));
} 
```

现在我想在同一个视图中添加另一个表单（登录）。我在找出最好的方法时遇到了一些麻烦。将多个表单绑定到同一个用户实体感觉很危险，而且我不确定如何在不同的操作中处理帖子。

这是我的表格：

```
class RegisterUserForm extends Form
{
public function __construct(ServiceManager $serviceManager)
{

    parent::__construct('register-user-form');

    $entityManager = $serviceManager->get('Doctrine\ORM\EntityManager');

    $this->setHydrator(new DoctrineHydrator ($entityManager, 'Application\Entity\User'));

    $userPostFieldset = new UserPostFieldset($serviceManager);
    $userPostFieldset->setUseAsBaseFieldset(true);

    $this->add($userPostFieldset);

}

} 
```

以及对应的Fieldset：

```
class UserPostFieldset extends Fieldset implements InputFilterProviderInterface {
public function __construct(ServiceManager $serviceManager) {
    parent::__construct ( 'user' );

    $entityManager = $serviceManager->get ( 'Doctrine\ORM\EntityManager' );

    $this->setHydrator ( new DoctrineHydrator ( $entityManager, 'Application\Entity\User' ) )->setObject ( new User () );

    $this->add ( array (
            'type' => 'Zend\Form\Element\Text',
            'name' => 'firstName',
            'options' => array (
                    'label' => 'First Name'
            )
    ) );

    $this->add ( array (
            'type' => 'Zend\Form\Element\Email',
            'name' => 'email',
            'options' => array (
                    'label' => 'Email Address'
            )
    ) );

    $this->add ( array (
            'type' => 'Zend\Form\Element\Email',
            'name' => 'emailCheck',
            'options' => array (
                    'label' => 'Re-Enter Email Address'
            )
    ) );

    $this->add ( array (
            'name' => 'submit',
            'attributes' => array (
                    'type' => 'submit',
                    'value' => 'Submit'
            )
    ) );
}
public function getInputFilterSpecification() {
    return array (
            'email' => array (
                    'required' => true,
                    'filters' => array (
                            array (
                                    'name' => 'StripTags'
                            ),
                            array (
                                    'name' => 'StringTrim'
                            )
                    ),
                    'validators' => array (
                            array (
                                    'name' => 'Identical',
                                    'options' => array (
                                            'token' => 'emailCheck',
                                            'message' => 'Emails do not match'
                                    )
                            )
                    )
            )
    );
}
} 
```

任何见解将不胜感激。

问题：

1 - 将多个表单添加到处理同一实体的视图的最佳实践是什么？

2 - 如何分解我的索引操作，以便将多个表单传递到我的视图，然后将帖子映射到不同的操作以执行验证检查？

感谢：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:18:21.813

这些表格真的相同吗？注册表单通常至少有一个 PW-Confirmation Field 或一个 PW-Checkbox 以将 PW 显示为文本。

但最终，您只需将 2 个表单对象传递给您的视图。两个表单对象都应该指向不同的操作，例如：

```
// Class Module#getServiceConfig()
return array( 'factories' => array(
'my-login-form' => function($sm) {
    $url  = $sm->get('viewhelpermanager')->get('url');
    $form = new RegisterLoginForm($sm);
    $form->setAttribute('action', $url('my/route/login'));
    return $form;
}
'my-register-form' => function($sm) {
    $url  = $sm->get('viewhelpermanager')->get('url');
    $form = new RegisterLoginForm($sm);
    $form->setAttribute('action', $url('my/route/register'));
    return $form;
} 
```

这样你就有了两个表单对象，一切都应该很好。然后，您的控制器将如下所示：

```
$sl           = $this->getServiceLocator();
$formLogin    = $sl->get('my-login-form');
$formRegister = $sl->get('my-register-form');

return array(
    'loginform'    => $formLogin,
    'registerform' => $formRegister
); 
```

意识到，最终“绑定”到您的实体只会在发布表单时进行。因此只涉及一种形式/实体。

# ninject - Ninject 激活过程的推荐 v2 资源

> ID：15931837
> 
> 赞同：1
> 
> 时间：2013-04-10T16:49:29.703
> 
> 标签：ninject, ninject-2

一直在阅读 Ninject 的文档，v2 中激活过程发生了变化，目前没有支持文档。有人可以推荐一个好的资源吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:19:51.197

通过浏览GitHub 上的[源代码](https://github.com/ninject/ninject/tree/master/src)，我获得了很多见解，特别是涵盖您感兴趣的方面的[单元测试。](https://github.com/ninject/ninject/tree/master/src/Ninject.Test/Unit)

通常，您会在任何 wiki 文档所涵盖的场景和那里的单元测试中看到相似之处 - 不确定哪个是鸡，哪个是鸡蛋，但它就在那里。

此外，浏览由[Remo Gloor](https://stackoverflow.com/users/448580/remo-gloor)、[Ruben Bartelink](https://stackoverflow.com/users/11635/ruben-bartelink)和[Ian Davis](https://stackoverflow.com/users/122096/ian-davis?tab=answers&sort=votes)***回答***的问题，这些问题由任何与 Ninject 相关的标签过滤，对我很有帮助。

您能否指定您感兴趣的激活过程更改中的特定场景？您更有可能获得此类问题的集中答案，这有助于更广泛地了解发生的变化......

# java - 如何从事务中提取更新以稍后完成？

> ID：15931842
> 
> 赞同：0
> 
> 时间：2013-04-10T16:49:43.957
> 
> 标签：java, spring, hibernate

我有一个事务，它获取一些数据，插入一些数据并在一个表上进行更新。这个更新的表导致了一些 Oracle 锁定，所以我想从这个事务中取出更新，并在我的进程结束时启动一个新事务来进行更新。

所以目前我在连接中获得更新的表，然后我更新对象中的一些数据，然后在事务结束时，休眠它很神奇并更新表。我想改变这一点，在事务开始时获取数据，分离对象，更新对象中的数据，然后在新事务中执行合并（）。可能的？我不知道如何分离它，因为 HibernateTemplate 没有 detach() 方法。

不确定这是否重要，但我有一个一对一的关联：

```
 <one-to-one name="itmInstSum" class="dds.tmatic.domain.ItmInstSum" fetch="join"  /> 
```

有任何想法吗？我不理解分离吗？我相信 evict() 将其从缓存中删除或其他东西，这不是我想要做的......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T12:45:16.860

首先：在 commit() 方法中，Hibernate 重新排列数据库语句的顺序，这有时会产生不需要的结果。`Session.flush()`你可以影响这种行为。Hibernate 只在两个flush() 语句之间重新排列语句（commit() 隐式调用flush()）。

第二：Hibernate没有detach，但是有`Session.evict()`方法，让对象脱离Hibernate的控制。如果您想再次将其置于 Hibernate 的控制之下并合并它，那么您必须再次从数据库中加载对象并合并它，即手动复制修改后的属性。

# javascript - 如何创建一个半透明的弹出框？

> ID：15931844
> 
> 赞同：0
> 
> 时间：2013-04-10T16:49:51.393
> 
> 标签：javascript, html, popup, webpage, transparent

我根本不了解javascript，我还没有研究过它。我正在为一家小型企业编写网页，我非常了解 HTML 和 CSS。

我的问题; 是我可以使用什么代码（可能是一些 java 脚本），这样当我单击一些文本（在 ul 标签内）时，选项卡内会出现一个带有圆边的半透明/黑框（*）（不是新窗口) 将显示一些文本。它也应该有一个关闭按钮。

在这种情况下，在菜单下：联系我们，我有：

```
Email
Phone
Postal Address. 
```

我的目标是让它们都可以点击，并且在不切换到新页面的情况下显示电子邮件/电话/地址。

非常感谢任何帮助/提示/评论；）如果您不确定我的意思，我可以在 GIMP 中创建一个模型；）

( *)我的目标是与android 4.1+中通知菜单的背景相似的外观(/* )

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T15:23:57.143

JQuery`overlay.`或者使用我的代码。 [http://jsfiddle.net/sGeVT/10/](http://jsfiddle.net/sGeVT/10/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:08:19.770

因此，如果您查看[JQuery](http://jqueryui.com/dialog/)，他们已经内置了此功能。然后您可以编辑 CSS 并使用 RGBA 和不透明度使其透明

# couchdb - 列表函数是否适合我的场景？

> ID：15931846
> 
> 赞同：0
> 
> 时间：2013-04-10T16:49:58.400
> 
> 标签：couchdb

我在 couchDb 中有一个这样定义的视图

```
 function (doc) {
 if (doc.url) {
     var a = new Date(doc.postedOn);
     emit([a.toLocaleDateString(), doc.count, doc.userId], {
         _id: doc.userId,
         postTitle: doc.postTitle,
         postSummary: doc.postSummary,
         url: doc.url,
         count: doc.count
     });
  }
}; 
```

这为我提供了我想要的格式的结果。首先按日期排序，然后按计数，然后按用户 ID。

但是我无法查询它。我想要的是仅通过 userId 查询此视图。即保留日期和计数参数为空。

```
 _view/viewName?limit=20&descending=true&endkey=["","","userId"] 
```

没有给我想要的结果。

我是否应该使用[列表功能](http://couchdb.readthedocs.org/en/latest/ddocs.html#list-functions)来过滤掉视图的结果。如果我这样做会对性能有任何影响吗？

[权威指南](http://guide.couchdb.org/editions/1/en/transforming.html)中的这句话首先让我想到了可以使用列表函数来过滤和聚合结果。

> 强大的迭代器 API 允许灵活地动态过滤和聚合行，以及输出原始转换，以便轻松制作 Atom 提要、HTML 列表、CSV 文件、配置文件，甚至只是修改过的 JSON。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:07:44.093

列表功能与您的情况无关。从您链接到自己的文档中：

*   > 虽然 Show 函数用于自定义文档呈现，但 List 函数用于相同目的，但针对 View 函数结果。

*   > Show 函数用于表示各种格式的文档，通常是格式更好的 HTML 页面。它们还可用于运行服务器端功能，而无需预先存在的文档。

要解决您的问题，只需更改发出键的顺序，`userId`首先放置，即：

```
[ doc.userId, a.toLocaleDateString(), doc.count ] 
```

并适当地更新您的查询。

如果更改发射键的顺序不是一个选项，只需创建另一个视图。

# c# - 计时器回调委托不会在每次运行时从参数中获取刷新值

> ID：15931850
> 
> 赞同：0
> 
> 时间：2013-04-10T16:50:30.147
> 
> 标签：c#

我现在有以下代码。它可以正常工作，但`picturesDownloaded`不会更新。在这 5 秒内，未调用 sendData`picturesDownloaded`获取另一个值。每次计时器运行时如何刷新它？所以这`obj.ToString()`将是正确的值。

有一点`picturesDownloaded`得到值“11”，但`object obj`仍然有值“0”。

```
public static volatile string picturesDownloaded = "0";
System.Threading.Timer timer = new System.Threading.Timer(sendData, picturesDownloaded, 1000 * 5, 1000 * 5);

public static void sendData(object obj)
{
    WebClient wc = new WebClient();
    string imageCountJson = wc.DownloadString("http://******/u.php?count=" + obj.ToString());
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:57:05.633

尝试这个：

```
public static volatile string picturesDownloaded = "0";
System.Threading.Timer timer = new System.Threading.Timer(sendData, new Func<string>(() => picturesDownloaded), 1000 * 5, 1000 * 5);

public static void sendData(object obj)
{
    var value = ((Func<string>)obj)();
    WebClient wc = new WebClient();
    string imageCountJson = wc.DownloadString("http://******/u.php?count=" + value);
} 
```

问题是，当您创建计时器时，您向构造函数传递了对字符串的引用`"0"`。当您更新 的值时`picturesDownloaded`，它不会更改传递给`Timer`构造函数的对象的值。

这可以通过向`Timer`构造函数提供一个可以检索更新值的匿名方法来解决`picturesDownloaded`，然后在回调中调用该方法。

# apache-flex - Flex：BusyIndi cator 在按钮之上？

> ID：15931851
> 
> 赞同：1
> 
> 时间：2013-04-10T16:50:33.357
> 
> 标签：apache-flex, button, depth, busyindicator

我是 flex 的新手，使用 flex 4.6 和 FB 4.7。我正在尝试在按钮“前面”（和中间）创建一个 BusyIndi​​cator。我在 Google 上找到了一些关于图像堆叠的示例，但由于某种原因，它不适用于按钮/指示器组合，我不知道为什么......我尝试使用 depth 属性，但没有效果，按钮出现在指标上方，即假设指标由 [x] 标记：

```
[button]
  [x]   <== indicator 
```

我想要的是指示器将在按钮的前面和中间：

```
[bu[x]ton] 
```

这是我正在使用的布局：

```
<s:VGroup width="100%" height="100%" verticalAlign="top" horizontalAlign="center">       
    <s:Button id="mybtn" label="My Inbox" click="onInbox()" depth="1"/>
    <s:BusyIndicator id="myBusyIndicator" rotationInterval="50" depth="2" />
</s:VGroup> 
```

任何想法如何做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:54:17.947

您似乎误解了布局组 ( `VGroup`, `HGroup`, `TileGroup`) 的作用。它们在二维而不是三个维度上工作。因此，通过将两个对象放在一个 VGroup 中，它们会沿 y 轴垂直堆叠，而不是沿 z 轴（如您所愿）。

你想要的只是`Group`在这里使用一个简单的。Group 没有`Layout`它（它是 Vgroup 的父级，以及许多其他类），因此所有定位都由子级处理，而不是父级（组）。

```
<s:Group>
    <s:Button/>
    <s:BusyIndicator horizontalCenter="0" verticalCenter="0"/>
</s:Group> 
```

这会在 0 级创建一个按钮，然后在 1 级 (1 > 0) 放置一个 BusyIndi​​cator，并将其水平和垂直居中（`horizontalCenter`并且`verticalCenter`从中心到它们各自的轴以像素为单位）

# mysql - Mysql查询以获取上周的计数

> ID：15931853
> 
> 赞同：1
> 
> 时间：2013-04-10T16:50:37.627
> 
> 标签：mysql, count, group-by

我试图从上周的访问中获得计数。

到目前为止，我有这个工作：

```
SELECT FROM_UNIXTIME(login),COUNT(*)
FROM users
WHERE FROM_UNIXTIME(login) >= (CURDATE() - INTERVAL DAYOFWEEK(CURDATE())+6 DAY)
GROUP BY DAYOFWEEK(FROM_UNIXTIME(login)); 
```

结果：

```
+----------------------+----------+
| FROM_UNIXTIME(login) | COUNT(*) |
+----------------------+----------+
| 2013-04-08 12:49:04  |        1 |
| 2013-04-10 17:29:21  |        2 |
| 2013-04-05 21:27:00  |        1 |
+----------------------+----------+ 
```

问题：

- 表格未按日期排序；

-我想显示所有 7 行，即使计数值='0'。

我怎样才能解决这个问题？提前致谢！

[更新]

按日期排序解决了：

```
ORDER BY FROM_UNIXTIME(login); 
```

只需要显示所有 7 行一周！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:00:30.963

您可以使用此答案中的查询，该查询可以生成日期列表，然后加入您的查询：

[从日期范围生成天数](https://stackoverflow.com/questions/2157282/generate-days-from-date-range/2157776#2157776)

# jquery - 字符类型检测

> ID：15931855
> 
> 赞同：0
> 
> 时间：2013-04-10T16:50:49.787
> 
> 标签：jquery

以下是我已经写过的内容，并且运行良好：

```
var $remaining = $('#remaining'),
$messages = $remaining.next();

$('#message').keyup(function(){
var chars = this.value.length,
    messages = Math.ceil(chars / 160),
    remaining = messages * 160 - (chars % (messages * 160) || messages * 160);

$remaining.text(remaining + ' characters remaining');
$messages.text(messages + ' message(s)'); 
```

}); [这是上面的代码](http://jsfiddle.net/lonesomeday/nkuBa/)

现在我想做的是：

```
var text_max_En = 100;
var text_max_utf8 = 200;
if   /*  what user has typed is English   */
{
   Do this
}
else if /*  what user has typed is in utf8 type*/
{
   Do that
} 
```

简而言之 ：

`**If**`用户在此处输入英文，则每条消息最多应计为 100 个字符

`AND **if**`那是 urf8 类型，那么它应该最多计数 200 个。

有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:28:22.210

使用[String.charCodeAt](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/charCodeAt)获取字符串中任何或所有字符的数值。如果该值 > 127，那么您正在处理 unicode 值。

由于您是 callback is `keyUp`，因此您可以一次执行此操作：

```
var str = $('#textarea').val();
var ascii = str.charCodeAt(str.length - 1) < 128; 
```

（您也可以只循环字符串长度，但这是多余的，因为您一次只敲击一个键。）

# python - mongoDB：python代码问题

> ID：15931857
> 
> 赞同：1
> 
> 时间：2013-04-10T16:50:51.193
> 
> 标签：python, mongodb, pymongo

会不会是错误的瓶子版本？

我查看了管理员提供的 sessionDAO 文件，他们的做法和我一样；

编码：

```
def __init__(self, db):
        self.db = db
        self.users = self.db.users
        self.SECRET = 'verysecret' 
```

说：

[1] 连接到`blog`数据库 [2] 选择`users`集合

在登录代码中我有：

```
def validate_login(self, username, password):

        user = None
        try:
            # XXX HW 2.3 Students Work Here
            # you will need to retrieve right document from the users collection.

            password = self.make_pw_hash(password)
                    user = self.users.find({"_id":username,"password":password}) 
```

我知道自己、用户名和密码；正如我写的那样，它应该是一个简单的文档查找；我现在看到可能存在缩进问题，我只能在 stackoverflow 上看到它，在 notepad++ 中它不存在；

和：

```
def add_user(self, username, password, email):
            password_hash = self.make_pw_hash(password)

            user = {'_id': username, 'password': password_hash}
            if email != "":
                user['email'] = email

            try:
                # XXX HW 2.3 Students work here
                # You need to insert the user into the users collection.
                # Don't over think this one, it's a straight forward insert.

                self.users.insert(user) 
```

我知道自己、用户名、密码和电子邮件；

该文档是默认准备的：`user = {'_id': username, 'password': password_hash}`

它应该是一个简单的插入：`self.users.insert(user)`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:07:47.297

每当您对源代码进行任何更改时，您都需要重新启动服务器以使这些更改生效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-17T02:02:27.947

Change the line

`user = self.users.find({"_id":username,"password":password})` to

`user = self.users.find_one({"_id":username})`

# java - 使用 java 库进行压缩的分块 http 编码

> ID：15931858
> 
> 赞同：1
> 
> 时间：2013-04-10T16:50:53.420
> 
> 标签：java, http

我已经阅读了很多关于堆栈溢出的帖子，似乎 gzip 可以压缩流（即，我假设它们的意思是一次压缩 X 个字节的流）。我不明白如何正确执行此操作，以便浏览器将其解压缩？假设我有一个人们需要下载的 1GB 文件，我不想同时将所有文件都放入内存中。如何压缩每个块并发送它？

密切相关的问题[gzip 压缩分块编码响应？](https://stackoverflow.com/questions/5280633/gzip-compression-of-chunked-encoding-response)

尽管如果有人知道的话，java代码会很棒。我查看了旧的 playframework 1.2.x 代码，但这似乎没有对写出块进行任何压缩:(。

谢谢，院长

# extjs4.1 - Extjs 4 日期字段获取值

> ID：15931863
> 
> 赞同：0
> 
> 时间：2013-04-10T16:51:11.433
> 
> 标签：extjs4.1, extjs-mvc

我觉得应该很简单但是还是不行，“toDate.getValue();” 不返回 Ext.date 对象。我无法格式化日期。

错误：格式未定义。

下面是我的表单域。

```
var toDate = new Ext.form.DateField(
        {
            fieldLabel: "date"
            value: new Date(), name: "abs-to-date",
            width: 100,
            allowBlank: false
        } 
```

在提交表格时，我想格式化日期。

```
var toDateTime = toDate.getValue();
console.log(toDate.getValue());
toDateTime.setHours( toHour.getValue(), toMinute.getValue(), 0 );
abs.to = toDateTime.format( Date.patterns.JSONdateTime );   <--------------------- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:25:33.850

您在“fieldLabel”之后缺少逗号。代码应该是：

```
 var toDate = new Ext.form.DateField({
        fieldLabel: "date", //<----------
        value: new Date(),
        name: "abs-to-date",
        width: 100,
        allowBlank: false
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:50:45.050

Extjs 4 中有 2 种不同的日期类型。

1) 日期

2) 延长日期

Ext.date 可以使用方法“format”，而 toDateTime 是 Date 的对象。以下是正确的语法。

```
abs.to = Ext.Date.format(toDateTime, Date.patterns.JSONdateTime ); 
```

# freebase - 是否有一个 freebase 转储可以让我访问 Freebase 的架构

> ID：15931867
> 
> 赞同：1
> 
> 时间：2013-04-10T16:51:21.510
> 
> 标签：freebase, mql

我想知道房产的预期类型是什么。有没有包含这些信息的转储？我试图在四转储中找到它，但它不存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:44:38.440

所有模式都包含在 RDF 转储中。预期类型可用，`type.property.expected_type`例如

```
ns:people.person.date_of_birth  ns:type.property.expected_type  ns:type.datetime. 
```

# html - 如何在vb6中填充文本区域

> ID：15931871
> 
> 赞同：-1
> 
> 时间：2013-04-10T16:51:36.033
> 
> 标签：html, dom, vb6, webbrowser-control

我正在尝试填写`textarea`网页。首先我打电话

```
site.navigate "www.mysite.com" 
```

这是我更改内容的代码`textarea`：

```
Private Sub Command1_Click()
    site.Document.All.Item("message").Value = "mycontent"
End Sub 
```

我也尝试了以下任何一种：

```
site.Document.All.Item("message").innerhtml = "mycontent"

site.Document.All.Item.form("message").Value = "mycontent" 
```

该代码不起作用，因为它是`textarea`，不是`input`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:45:57.517

我假设“站点”是标准的 WebBrowser 控件。尝试使用非标准属性 innerText。它适用于 Micorosft 的 VB 浏览器控件。

```
Private Sub Command1_Click()
    site.Document.All.Item("message").innerText = "mycontent"
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T23:04:11.797

我创建了一段简单的 HTML：

```
<HTML>
    <HEAD>
        <TITLE>Test</TITLE>
    </HEAD>
    <BODY>
        <FORM ID="Tart">
            <TEXTAREA ID="Lemon">Lots of text.</TEXTAREA>
        </FORM>
    </BODY>
</HTML> 
```

我可以很高兴地从我的浏览器控件 <wb> 访问名为“Lemon”的文本区域，使用：

```
wb.Document.All.Item("Lemon").Value = "More Text." 
```

... 甚至 ...

```
wb.Document.All.Lemon.Value = "More Text" 
```

也许您没有正确设置元素 ID？

# ruby-on-rails - 没有路线匹配“设计/会话”

> ID：15931877
> 
> 赞同：0
> 
> 时间：2013-04-10T16:51:59.893
> 
> 标签：ruby-on-rails, devise

我在我的应用程序中安装了 Devise，一切正常，但突然它开始给我这个错误**No route matches {:controller=>"devise/sessions"}**

我的路线

```
resources :profiles

get "payment_notifications/create"
get "cart_items/destroy"

devise_for :users

namespace :admin do
  resources :pages
  resources :users
  resources :books
  resources :messages
  resources :programs
  resources :catalogs
  resources :courses
  resources :online_courses
  resources :orders
  resources :announcements
  resources :guides
  resources :onliners
  resources :articles
  get '', to: 'dashboards#index', as: '/'
  match '/guides_calendar', :controller => 'guides', :action => 'calendar'
end

resources :articles
resources :payment_notifications
resources :tests
resources :carts
resources :online_courses, :path => 'cursos_en_linea' do
  member do
    get 'add_to_cart'
  end
end

resources :cart_items
resources :pages
resources :books, :path => 'libros' do
 member do
   get 'add_to_cart'
 end
end

resources :messages
resources :programs, :path => 'videos' do
 member do
   get 'add_to_cart'
 end
end

resources :catalogs
match '/empresas', :controller => 'pages', :action => 'empresas'
match '/quienessomos', :controller => 'pages', :action => 'quienes_somos'
match '/privacidad', :controller => 'pages', :action => 'privacidad'
match '/comunidad', :controller => 'pages', :action => 'comunidad'
resources :courses, :path => 'cursos' do
 member do
   get 'add_to_cart'
 end
end

root :to => 'messages#index' 
```

应用程序.html.erb

```
<% if user_signed_in? %>
   <li class="login"><%= link_to('<i class="icon-shopping-cart"></i> Carrito'.html_safe, current_user.carts.last) %></li>
   <li class="login"><%= link_to('<i class="icon-user"></i> Your Account'.html_safe, current_user.profile) %></li>
   <li class="login"><%= link_to('Logout', destroy_user_session_path, :method => :delete) %></li>
<% else %>
   <li class="login"><%= link_to("<i class='icon-user'></i> Login ".html_safe, new_user_session_path) %></li>
<% end %> 
```

我还运行 rails g devise:install 和 rails g devise User 我有 devise:views 但我没有改变任何东西。

有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T04:27:20.530

我发现了错误，我认为这是一个奇怪的错误。

在我的 application.html.erb 我有：

```
 <li><%= link_to "Servicios", :action => "index" %></li> 
```

并改为：

```
 <li><%= link_to "Servicios" %></li> 
```

这行代码我认为它与设计控制器无关，是错误。

# web - 如何正确拆分网站？

> ID：15931880
> 
> 赞同：0
> 
> 时间：2013-04-10T16:52:07.760
> 
> 标签：web, sitemap, robots.txt, google-search-console

假设我有一个网站的**新**版本：

```
 http://www.mywebsite.com 
```

我想将**旧**站点保留在子目录中并单独处理：

```
 http://www.mywebsite.com/old/ 
```

我的**新**网站在主页上有一个指向**旧**网站的链接，但反之亦然。

1) 我应该创建 2 个站点地图吗？一个给**新**的，一个给**旧**的？

2）当我的网站被爬取时，如何限制爬虫的路径？换句话说，由于**新**站点有指向**旧**站点的链接，爬虫将到达**旧**站点。如果我在 robots.txt 中执行以下操作：

```
 User-agent: *
 Disallow: /old/ 
```

我担心它不会抓取**旧**网站（使用第二个站点地图），因为它被阻止了。那是对的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:01:19.037

1) 您可以将所有 URL 包含在一个文件中，也可以创建单独的文件。可以将站点地图理解为“每个（网站）站点”，例如参见[http://www.sitemaps.org/](http://www.sitemaps.org/)：

> 在最简单的形式中，站点地图是一个 XML 文件，其中列出**了站点的**URL以及有关每个 URL 的附加元数据

由于您现在有两个站点，您可以创建两个站点地图。但同样，我不认为它是这样严格定义的。

2) 好吧，如果您阻止 robots.txt 中的 URL，那么符合要求的机器人将不会访问这些 URL。这并不意味着这些*URL*永远不会被搜索引擎索引，但页面（= 内容）不会。

# logging - 如何使用 `clojure.tools.logging` 决定哪些附加程序对日志起作用？

> ID：15931881
> 
> 赞同：2
> 
> 时间：2013-04-10T16:52:12.007
> 
> 标签：logging, clojure, logback

在我的`project.clj` `:dependencies`，我有：

```
[org.clojure/tools.logging "0.2.6"]
[ch.qos.logback/logback-classic "1.0.11"]
[net.logstash.logback/logstash-logback-encoder "1.0"] 
```

在我的`core.clj`，我有：

```
(clojure.tools.logging/info "both stdout and stash")
(clojure.tools.logging/log "stash" :info nil "only stash?") 
```

在我的资源路径上，我有一个文件`logback.xml`，我在其中定义了两个附加程序`stdout`，并且`stash`都附加到根目录：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration debug="false">

  <appender name="stdout" class="ch.qos.logback.core.ConsoleAppender">
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
    </encoder>
  </appender>

  <appender name="stash" class="ch.qos.logback.core.FileAppender">
    <file>example.log</file>
    <encoder class="net.logstash.logback.encoder.LogstashEncoder" />
  </appender>

  <root level="all">
    <appender-ref ref="stash" />
    <appender-ref ref="stdout" />
  </root>

</configuration> 
```

当我运行我的程序时，我看到以下（期望的）输出`example.log`：

```
{"@timestamp":"2013-04-10T12:42:16-04:00","@message":"both stdout and stash","@fields":{"logger_name":"scheduler.core","thread_name":"main","level":"INFO","level_value":20000}}
{"@timestamp":"2013-04-10T12:42:16-04:00","@message":"only stash?","@fields":{"logger_name":"stash","thread_name":"main","level":"INFO","level_value":20000}} 
```

但是，我看到以下两行都打印到标准输出——我只想看到第一行：

```
12:42:16.573 [main] INFO  scheduler.core - both stdout and stash
12:42:16.641 [main] INFO  stash - only stash? 
```

如何选择使用哪个 appender 登录`clojure.tools.logging`？具体来说，两者都`stdout`附加`stash`在根目录下，我怎样才能只登录到`stash`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:04:54.280

logback 应用不仅匹配第一个的所有活动附加程序，因此您的根级别将应用于所有消息。
从`<appender-ref ref="stdout" />`根级别中取出并添加一个专门用于使用它的记录器。

```
 <logger name="project.core" level="INFO"> 
    <appender-ref ref="stash" /> 
  </logger>

 <root level="ERROR"> 
    <appender-ref ref="stdout" />
  </root> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T19:24:27.553

为您澄清几点：

日志记录的配置完全由您的日志记录实现控制（在本例中为 logback）。

所有`clojure.tools.logging`消息都使用日志命名空间。默认情况下，使用的值是调用日志调用的 clojure 命名空间；这类似于在 Java 中如何将当前类传递给记录器工厂。

大多数日志记录实现都使用此日志记录命名空间，以允许您在命名空间级别设置日志记录配置。

至于你的问题：

**如何选择使用哪个 appender 登录`clojure.tools.logging`？**

完全按照您在从 Java 进行日志记录时的操作方式进行操作，无论是全局的还是特定于某个包/类/命名空间的。

**具体来说，两者都`stdout`附加`stash`在根目录下，我怎样才能只登录到`stash`？**

在 logback 中，appender 的名称与日志消息命名空间无关。如果要配置特定于命名空间的日志记录，可以执行以下操作：

```
<appender name="foo">...</appender>
<appender name="bar">...</appender>

<root level="WARN">
  <appender-ref ref="foo" />
</root>

<logger name="myproject.core" level="DEBUG">
  <appender-ref ref="bar" />
</logger> 
```

在上面，`WARN`任何命名空间中的每条（或更高）消息都将发送到`foo`appender，并且`DEBUG`来自`myproject.core`命名空间的每条（或更高）消息都将发送到`bar`appender。

# c# - 我可以为整个班级 c# 创建一个委托吗

> ID：15931882
> 
> 赞同：0
> 
> 时间：2013-04-10T16:52:16.623
> 
> 标签：c#, delegates

我已经使用委托来表示方法 - 但我现在有许多具有相同方法的类（但这些方法中的代码不同）。

有没有办法委派整个班级？

伪代码：

```
class myModelA
{
     void update()
     {

     }
}

class myModelB
{
     void update()
     {

     }
}

delegate class myModel;

if (x==1)
     myModel = myModelA;
else
     myModel = myModelB;

myModel.update(); 
```

我知道我可以委托“üpdate”方法但在现实世界中我有很多方法，我宁愿只是简单地委托类。

```
EDIT1 based on Jon Skeet's answer 
```

但是我如何声明一个公共变量？（非公共变量编译OK）

```
public interface IModel
{
    double myDouble; <<<< this gives an error
    void Update();
}

public class MyModelA : IModel
{
    public double myDouble;
    public void Update() { ... }
}

public class MyModelB : IModel 
{
    public double myDouble;
    public void Update() { ... }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T16:53:19.840

不，在这种情况下，您不需要委托 - 您需要一个[*interface*](http://msdn.microsoft.com/en-us/library/vstudio/ms173156.aspx)。

您创建一个所有类都实现的接口：

```
public interface IModel
{
    void Update();
}

public class MyModelA : IModel
{
    public void Update() { ... }
}

public class MyModelB : IModel 
{
    public void Update() { ... }
} 
```

然后：

```
IModel model;
if (x == 1)
{
    model = new MyModelA();
}
else
{
    model = new MyModelB();
}
model.Update(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:02:49.403

作为 Jon Skeet，我认为您需要使用接口。稍微改变了代码

[http://www.dotnetperls.com/interface](http://www.dotnetperls.com/interface)

```
 using System;

    interface IPerl
    {
        void Read();
    }

    class TestA : IPerl
    {
        public void Read()
        {
        Console.WriteLine("Read TestA");
        }
    }

    class TestB : IPerl
    {
        public void Read()
        {
        Console.WriteLine("Read TestB");
        }
    }

    class Program
    {
        static void Main()
        {
        IPerl perl = new TestA(); // Create instance.
        perl.Read(); // Call method on interface.
        }
    } 
```

# javascript - 所示方法上的引导模式多次运行

> ID：15931886
> 
> 赞同：2
> 
> 时间：2013-04-10T16:52:30.497
> 
> 标签：javascript, twitter-bootstrap

我使用[twitter bootstrap modals](http://twitter.github.io/bootstrap/javascript.html#modals)的 js 来显示和隐藏一个模态：

```
$('#myModal').modal('show')//show
$('#myModal').on('shown', function () {
// do something…
})
$('#myModal').on('hidden', function () {
// do something…
})

....
$('#myModal').modal('hide')//hide 
```

我的问题是当多次显示和隐藏模式时，代码`//do something...`运行多次。我想那是因为每次我显示一个模态时，它会`shown`在模态隐藏和打开 5 次时侦听并且函数运行 5 次，有什么方法可以防止这种情况发生吗？

* * *

使用`fco`下面建议的方式确实解决了显示的问题，但不幸的是隐藏不起作用，即仍然执行多次，不同的是，我使用`data-dismiss="modal"`标记隐藏对话框，而不是通过 js。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-25T10:27:15.973

您应该使用 one 而不是 on

.one() 方法与 .on() 方法相同，只是处理程序在第一次调用后是未绑定的。例如：

```
$('#myModal').modal('show')//show
$('#myModal').one('shown', function () {
// do something…
})
$('#myModal').one('hidden', function () {
// do something…
})

....
$('#myModal').modal('hide')//hide 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T18:14:42.757

签出[.off()](http://api.jquery.com/off/%20.off%28%29)

如果您希望事件处理程序仅在第一次运行时运行，您需要执行以下操作：

```
function myHandler() {
    //your event handling code here
    $('#myModal').off('show', myHandler);
}
$('#myModal').on('shown', myHandler);
$('#myModal').modal('show');
//...
$('#myModal').modal('hide'); 
```

# mysql - mysql在日期范围内选择日期

> ID：15931894
> 
> 赞同：-5
> 
> 时间：2013-04-10T16:52:53.743
> 
> 标签：mysql, sql, select

我有以下列：

*   日期开始 | 日期结束
*   2013-01-14 | 2013-01-16
*   2013-01-16 | 2013-03-18
*   2013-01-22 | 2013-03-21
*   2013-02-02 | 2013-02-10
*   2013-03-25 | 2013-03-28

我需要创建一个可以过滤这些记录的 sql 语句

日期开始：2013-01-17 日期结束：2013-03-22

发现的结果是：

*   日期开始 | 日期结束
*   2013-01-16 | 2013-03-18
*   2013-01-22 | 2013-03-21
*   2013-02-02 | 2013-02-10

有谁知道如何做到这一点？

谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:55:19.690

尝试这个

```
 select * from your_table where date_start >=  '2013-01-17'
                          and   date_end   <=  '2013-03-22' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:55:52.700

```
SELECT *
FROM table
WHERE date_start BETWEEN '2013-01-17' AND '2013-03-22'
  AND date_end BETWEEN '2013-01-17' AND '2013-03-22' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T16:56:50.890

```
SELECT * FROM `table` WHERE `date_start` > '2013-01-17' && `date_end` < '2013-03-22' 
```

您需要`table`用数据库中的实际表名替换。

# java - @Rule 声明导致调试尝试出错

> ID：15931895
> 
> 赞同：0
> 
> 时间：2013-04-10T16:52:53.697
> 
> 标签：java, eclipse, groovy, junit, junit-rule

一个 groovy JUnit 测试类只有一个静态声明：

```
@Rule
public static ErrorCollector errorCollector; 
```

尝试在调试模式下启动测试后，会引发异常：

```
java.lang.NullPointerException
at org.junit.runners.BlockJUnit4ClassRunner.withRules(BlockJUnit4ClassRunner.java:354)
at org.junit.runners.BlockJUnit4ClassRunner.methodBlock(BlockJUnit4ClassRunner.java:270)
at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:49)
at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

在代码中的任何行开始之前引发异常。如果我扔掉“@Rule”这个词，测试运行正常（至少从一开始）

进口是：

```
import static org.hamcrest.CoreMatchers.*;
import org.hamcrest.Matcher;
import static org.hamcrest.Matchers.*;

import org.junit.Rule;
import org.junit.rules.ErrorCollector;
import org.junit.Test;
import static org.junit.Assert.*;
import org.junit.Before;

import groovy.util.slurpersupport.NodeChild
import groovy.xml.MarkupBuilder
import groovy.xml.StreamingMarkupBuilder
import groovy.xml.XmlUtil
import org.codehaus.groovy.tools.xml.DomToGroovy

import org.joda.time.DateTime
import org.w3c.dom.Document;

import java.util.concurrent.Callable; 
```

JUnit 版本 4.8.2

Eclipse 版本：3.6

Java版本：1.6.41

请问我应该去哪里找问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T18:28:58.060

正如您在[ErrorCollector javadoc](http://javasourcecode.org/html/open-source/junit/junit-4.8.1/org/junit/rules/ErrorCollector.html)中看到的，您必须创建一个实例才能使用它，如下所示：

```
 @Rule
    public ErrorCollector collector= new ErrorCollector(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T07:46:08.980

这似乎是 Runner 中的一个错误：

```
//Correct variants:
@Rule
public ErrorCollector collector1= new ErrorCollector();

public ErrorCollector collector2= null;
@Rule
collector2= new ErrorCollector();

public ErrorCollector collector3;
@Rule
collector3= new ErrorCollector();

// incorrect variants:
@Rule
public ErrorCollector collector4= null;

@Rule
public ErrorCollector collector5;

@Rule
public ErrorCollector collector5=somethingThatIsNotRule;

@Rule
public ErrorCollector collector5=anotherRule;

//BUT:
//the runner takes the following, and runs it without problems, too:

public ErrorCollector collector6= null;
{
  @Rule
  collector6= null;
} 
```

因此，跑步者在构建测试之前会进行过度检查。

# facebook - Facebook：如何创建和分享到 facebook 小部件，比如 soundcloud 小部件或 youtube 播放器？

> ID：15931898
> 
> 赞同：2
> 
> 时间：2013-04-10T16:53:01.857
> 
> 标签：facebook, widget, share

如何创建小部件并将其分享到 Facebook，例如 soundcloud 小部件或 youtube 播放器？我的意思是，当您共享 soundcloud 或 youtube 小部件时，您可以在 facebook 的墙页内使用它。您可以使用此小部件的“播放”、“返回”和其他按钮。

# visual-studio-2010 - Visual Studio 2010 Ultimate Windows 8 操作系统上的 Windows Phone sdk 8

> ID：15931921
> 
> 赞同：0
> 
> 时间：2013-04-10T16:54:10.793
> 
> 标签：visual-studio-2010, windows-8, windows-phone-8

我在我的系统上安装了 Windows 2008 我在我的系统上安装了 Visual Studio 2010 Ultimate。

有什么方法可以在 Visual Studio 2010 Ultimate 上安装 Windows Phone 8 SDK。

我可以将 Visual Studio 2010 Ultimate 升级到 Visual Studio 2012 Ultimate。

我可以下载 wp8 sdk，但我无法开发 Web 应用程序。

有没有办法免费下载vs 2012 终极完整版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:56:01.367

您需要安装 Windows 8 和 Visual Studio 2012 以进行 Windows Phone 8 开发。因为我是学生，所以我通过 DreamSpark (www.dreamspark.com) 免费获得了 Visual Studio 2012 Professional。

您可以获得免费版本：[Visual Studio 2012 Express](http://www.microsoft.com/visualstudio/eng/downloads)

# android - 安卓平板电脑上的 Corona SDK 开发应用程序黑屏

> ID：15931925
> 
> 赞同：1
> 
> 时间：2013-04-10T16:54:20.753
> 
> 标签：android, lua, coronasdk, tablet

嗨，我正在使用 corona sdk 开发一个应用程序。它适用于 iPhone、iPad 和我的安卓手机 (2.2)。但是，在三星 Galaxy Tab 2 上，该应用程序会加载初始菜单，然后黑屏。我仍在使用免费版的电晕。我也无法更改 android 的目标构建操作系统。这是我的构建设置。感谢您的帮助。我难住了。

```
settings = {

    orientation = {
        default = "portrait",
        supported = { "portrait"}
    },

    iphone = {
        plist = {
                        "Icon.png", 
                        "Icon@2x.png", 
                        "Icon-72.png",
            UIStatusBarHidden = false,
            UIPrerenderedIcon = true, -- set to false for "shine" overlay
            --UIApplicationExitsOnSuspend = true, -- uncomment to quit app on suspend

        }
    },

    android =                                                               
    {
        versionCode = "2"                                                   
    },
    androidPermissions = 
    {
        "android.permission.INTERNET",
    },        

} 
```

# c++ - 如何在 Qt Creator 中访问其他 ui 文件

> ID：15931932
> 
> 赞同：0
> 
> 时间：2013-04-10T16:54:46.660
> 
> 标签：c++, qt, qt-creator

如何使用 Qt Creator 从代码中访问其他 ui 文件？
我正在尝试创建一个小型文本编辑器。与往常一样，我通过按“设计”按钮来设计主窗口。之后，我从 Qt creator 创建了一个名为 about.ui 的新 ui 文件（IDE 还添加了 about.h 和 about.cpp）。主窗口的功能（如 on_button_cliked() ）在文件 textedit.cpp 中

我创建了一个带有 about 条目的小菜单，然后转到 Action Editor ，我选择了条目、Go to Slot 和 triggerred();
IDE 为我创建了所有东西，所以我只需要定义函数。
如何访问我之前创建的关于 ui？
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:05:59.897

您不需要访问“.ui”文件。Qt 的`ui`应用程序为您完成一切。您现在所需要做的就是创建一个作为父`About`类的对象并显示它。`MainWindow`

大概的代码是：

```
#include "about.h"

// ...

void MainWindow::on_about_triggered()
{
    About dialog(this);
    dialog.exec();
} 
```

# forms - 提取部分 Google Docs 表单数据并将其写入单独的行

> ID：15931937
> 
> 赞同：1
> 
> 时间：2013-04-10T16:55:04.540
> 
> 标签：forms, google-apps-script, google-sheets, google-docs

假设我有一个收集以下信息的 Google 文档表单：

*   时间戳（默认字段）
*   名称
*   参考#

表单数据随后显示在电子表格上，如下所示：

```
4/10/2013 16:20:31  |  Jack, Jill, Oscar  |  Ref6656X 
```

（注意：名称的数量可能是从 1 到多个）

我需要数据出现在电子表格上，如下所示：

```
4/10/2013 16:20:31  |  Jack  |  Ref6656X
4/10/2013 16:20:31  |  Jill  |  Ref6656X
4/10/2013 16:20:31  |  Oscar |  Ref6656X 
```

我经常可以破译和编辑 Google Apps 脚本（JavaScript？），但我不知道如何用那种语言思考以便为自己创建它（尤其是在名称字段中名称数量未知的情况下）。我怎样才能开始解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T18:20:00.933

首先，在开始编写代码之前，您需要做出一些选择。

*   您想修改接受表单输入的电子表格，还是生成包含修改后数据的单独工作表？如果您想记录用户实际输入的内容，最好不要管原始数据。如果您使用第二张表进行按摩输出，则多个选项卡的存在可能会让您的用户感到困惑，除非您采取措施将其隐藏。

*   您想在表格进入时进行修改，还是在之后的某个时间（批量）进行修改？如果您已经收集了数据，则必须进行批量处理，这将涉及循环并必须在中间处理新行的插入。要处理传入的表单，您需要设置一个由表单提交触发的函数，并且只会将表格进一步向下扩展......但您还有更多学习要做 - 请参阅[Container-Specific Triggers](https://developers.google.com/apps-script/execution_container_triggers)，[了解触发器](https://developers.google.com/apps-script/understanding_triggers)和[了解](https://developers.google.com/apps-script/understanding_events)背景信息的事件。

*   您将主要使用电子表格服务函数还是 javascript 数组？这种选择通常与速度有关 - 您在 javascript 中可以做的越多，您的脚本就会越快，但在两者之间切换一开始可能会令人困惑。

这是一个执行批量处理的示例函数。它将所有现有数据读入一个数组，遍历该数组并将所有行复制到一个新数组中，将多个名称扩展为多行。完成后，现有的工作表数据将被覆盖。（注意 - 未经调试或测试。）

```
function bulkProcess() {
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var dataIn = ss.getDataRange().getValues();
  var dataOut = [];

  for (var row in dataIn) {   // Could use:  for (var row = 0; row < dataIn.length; row++)
    var names = dataIn[row][1].split(','); // array of names in second column
    var rowOut = dataIn[row];
    for (var i in names) {
      rowOut[1] = names[i];  // overwrite with single name
      dataOut.push(rowOut);  // then copy to dataOut array
    }
  }
  // Write the updated array back to spreadsheet, overwriting existing values.
  ss.getRange(1,1,dataOut.length,dataOut[0].length).setValues(dataOut);
} 
```

# .net - 检查滚动条是否可以在 WebBrowser 中聚焦/滚动

> ID：15931940
> 
> 赞同：1
> 
> 时间：2013-04-10T16:55:08.940
> 
> 标签：.net, vb.net, browser, scrollbar

是否可以检查网络浏览器的滚动条是否可以滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:55:07.503

您可以尝试请求屏幕的高度并将其与文档的高度进行交叉检查。由于滚动条仅在文档的高度/宽度大于屏幕宽度时启用，您可以使用它来检查它是否可以滚动。

您可以将其用于屏幕高度：

`My.Computer.Screen.Bounds`

这为您的浏览器打开网页高度：

```
Dim docWidth as Integer 
Dim docHeight as Integer

docHeight = WebBrowser1.Document.Body.ScrollRectangle.Height
docWidth = WebBrowser1.Document.Body.ScrollRectangle.Width 
```

# sockets - 如何保持连接以在没有请求的情况下向远程客户端发送实时数据

> ID：15931941
> 
> 赞同：1
> 
> 时间：2013-04-10T16:55:09.830
> 
> 标签：sockets, networking, binding, portforwarding

我正在开发一个移动项目，可以控制一个家庭，从房子内部或外部接收信息。如果我从外部使用我的应用程序，我会在我的路由器上设置端口转发机制以连接到我的服务器。

我认为从服务器接收数据的事实应该由客户端（android 应用程序）女巫发起，否则它将被阻止。 *** 有没有一种解决方案，只需请求一次就可以从外部实时接收数据（温度），或者我应该发送一个像 evrey minute 这样的请求？***我很困惑，因为像视频流这样的一些应用程序只需启动视频播放器就可以从服务器接收数据，然后它会自动接收 udp 数据包

**更具体地说，我可以通过只发送一次请求（也许通过让每个客户端、VPN、SIP 打开套接字）来将数据从服务器发送到远程客户端吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T17:33:26.780

# 向远方客户发送数据：安全可靠

只有一种*合理可靠的*方法可以将 a 发送`signal`给远方的客户。我想确认您最初的假设，即在没有请求的情况下向客户端发送，这在理论上是不可能的，因为设备需要在某个地方打电话并通知代理网关 (SIP) 或其他地址。但是请忽略这一点，因为正确的方法将在这里与源代码一起传递。

## 安全重要性

重要的是要意识到打开防火墙超出了良好做法。最好遵守防火墙的入站流量锁定规则。以下部分是一种安全方法，可让您以最大的安全性打开出站连接，以**防止**窥探和其他不安全的安全漏洞。

## 下载 Android 源库

请参阅此处下载 Android 源库文件的说明：[https ://github.com/pubnub/java/tree/master/android](https://github.com/pubnub/java/tree/master/android)

## 在 Android 上从远处按需接收数据

您需要复制/粘贴以下代码才能快速推进。首先获取此 Java 代码并将其粘贴到您的应用程序中。然后下载库文件。

```
// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
// ANDROID PHONE
// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Pubnub pubnub = new Pubnub(
    "",      // PUBLISH_KEY   (Optional, supply "" to disable)
    "demo",  // SUBSCRIBE_KEY (REQUIRED)
    "",      // SECRET_KEY    (Optional, supply "" to disable)
    "",      // CIPHER_KEY    (Optional, supply "" to disable)
    true     // SSL_ON?
);
Hashtable args = new Hashtable(1);
args.put( "channel", "distant-client-ABC-DEF" );
pubnub.subscribe(args, new Callback() {
    public void connectCallback(String channel) {
        System.out.println("CONNECT on channel:" + channel);
    }

    public void disconnectCallback(String channel) {
        System.out.println("DISCONNECT on channel:" + channel);
    }

    public void reconnectCallback(String channel) {
        System.out.println("RECONNECT on channel:" + channel);
    }

    public void successCallback(String channel, Object message) {
        System.out.println(channel + " " + message.toString());
    }

    public void errorCallback(String channel, Object message) {
        System.out.println(channel + " " + message.toString());
    }
}); 
```

## 按需向远程客户端发送数据

在您的家庭计算机/系统上的 Java VM 上，您可以使用相同的代码将数据安全地发送到远程客户端。使用以下代码执行此操作：

## 下载 JVM 服务器源库

请参阅此处下载/使用 JVM 服务器源库文件的说明：[https ://github.com/pubnub/java/tree/master/java](https://github.com/pubnub/java/tree/master/java)

```
// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
// HOME SERVER
// =-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=
Pubnub pubnub = new Pubnub(
    "demo",  // PUBLISH_KEY   (REQUIRED on Server)
    "demo",  // SUBSCRIBE_KEY (REQUIRED)
    "",      // SECRET_KEY    (Optional, supply "" to disable)
    "",      // CIPHER_KEY    (Optional, supply "" to disable)
    true     // SSL_ON?
);

Hashtable args = new Hashtable(1);
args.put( "channel", "distant-client-ABC-DEF" ); // SEND TO CLIENT ABC-DEF
pubnub.publish(args, new Callback() {
    public void successCallback(String channel, Object message) {
        System.out.println("PUBLISH : " + message);
    }
    public void errorCallback(String channel, Object message) {
        System.out.println("PUBLISH : " + message);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:59:48.603

我不喜欢 Android 世界，但它不是您正在寻找的服务吗？：http: [//developer.android.com/google/gcm/index.html](http://developer.android.com/google/gcm/index.html)

# c++ - 取消引用迭代器作为 boost::bind 复合链的一部分

> ID：15931942
> 
> 赞同：0
> 
> 时间：2013-04-10T16:55:10.873
> 
> 标签：c++, boost, bind, composite, dereference

我正在尝试使用 bind 来生成一个函数：

*   收到地图 m
*   返回 m.begin()->first

为此，我正在尝试使用 boost::bind:

```
typedef map<int,int>::const_iterator (map<int,int>::*const_begin_end) () const;
bind(&pair<const int,int>::first, bind(static_cast<const_begin_end>(&map<int, int>::begin), _1)); 
```

这不起作用，因为需要取消引用 begin 的结果。我想像

```
bind(&pair<const int,int>::first, bind(&operator*, bind(static_cast<const_begin_end>(&map<int, int>::begin), _1))); 
```

但这行不通，因为没有全局运算符*。

问题：

*   是否可以使用 boost::bind 复合链来实现这一点？如何？
*   更容易阅读的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:28:16.673

您可以使用成员函数指针调用 bind，成员运算符只不过是成员函数：

```
 const_begin_end pBegin = &map<int,int>::begin;
 x = bind(&std::pair::first, 
    bind(&std::map<int, int>::const_iterator::operator*, 
      bind(pBegin, _1)
    ); 
```

但说真的，你也可以只写一个合适的函数来做你需要的，而不是那些难以理解的 boost.bind 混乱（你能说“可维护性”吗？）。

因此，对于 C++03，一个函数：

```
template <class Map>
typename Map::key_type keyBegin(Map const& m)
{ 
  return m.begin().first;
} 
```

或 C++03 仿函数（您可以在函数中本地定义它）

```
struct KeyBegin
{
  typedef std::map<int, int> IntMap;
  int operator()(IntMap const& m) {
    return m.begin().first;
  }
}; 
```

或 C++11 lambda（比绑定狂欢更具可读性）：

```
auto keyBegin = [](std::map<int, int> const& m) -> int {
  return std::begin(m).first;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T17:30:51.593

我强烈推荐[Boost.Phoenix](http://www.boost.org/doc/libs/1_53_0/libs/phoenix/doc/html/index.html)，它是我在 C++03 中动态编写函子时的首选库。它是 Boost.Bind 的更好替代品——该库正在显示其时代。

例如，Phoenix 允许我们在其仿函数上使用运算符来表示调用仿函数时该运算符的实际使用。因此`arg1 + arg2`是一个返回其前两个操作数之和的函子。这大大减少了`bind`噪音。第一次尝试可能如下所示：

```
bind(&pair<const int, int>::first
     , *bind(static_cast<const_begin_end>(&map<int, int>::begin), arg1)) ) 
```

（[LWS 演示](http://liveworkspace.org/code/37qYCp%248)）

但凤凰的另一个优点是它带有一些电池。在我们的案例中，我们非常感兴趣，`<boost/phoenix/stl/container.hpp>`因为这包括一些熟悉的容器操作的惰性版本，包括`begin`. 这在我们的例子中非常方便：

```
// We don't need to disambiguate which begin member we want anymore!
bind(&pair<const int, int>::first, *begin(arg1)) 
```

（[LWS 演示](http://liveworkspace.org/code/37qYCp%247)）

* * *

作为最后一点，我将补充一点，C++11 绑定表达式是指定的，因此指向成员的指针适用于*任何*使用`operator*`. 所以开箱即用，您可以执行以下操作：

```
bind(&pair<const int, int>::first, bind(static_cast<begin_type>(&std::map<int, int>::begin), _1)) 
```

（[LWS 演示](http://liveworkspace.org/code/3Kg46J%247)）

# binary-search-tree - 通过旋转平衡二叉搜索树（在 AVL 树上）

> ID：15931946
> 
> 赞同：0
> 
> 时间：2013-04-10T16:55:19.753
> 
> 标签：binary-search-tree

我想知道，最终平衡的二叉搜索树是否只有一个可能的结果？有时我会得到不同的最终平衡树，具体取决于我在哪里进行旋转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:57:28.170

不，有几种自平衡类型的树，最流行的是 AVL 和 Red-Black。如果您将相同的数据放在这些树中，则生成的树将不同，但平衡。

如果谈到 AVL 树，我将仅举一个简单的例子：

```
 2     |      4     |      3     
 1   4   |    2   5   |    2   4   
    3 5  |   1 3      |   1     5 
```

它们都是平衡的 AVL 树，可以通过不同的操作顺序创建。但是如果你用完全相同的数据重复相同的操作顺序，结果树应该是相同的，因为在 AVL 树算法中没有任何概率。

# javascript - 在 ajax javascript 中同步

> ID：15931950
> 
> 赞同：-4
> 
> 时间：2013-04-10T16:55:31.690
> 
> 标签：javascript, jquery, ajax, call, synchronous

在我的脚本中，我有一个对 php 文件的 ajax 调用，我希望在执行下面的其余脚本之前完成调用

这是我指的脚本：

```
function game_settings(state){
    if(state == "load"){
        ui.load_game();

        //do ajax call to load user last save
        var dataString = {"user_data": "true"};
        $.ajax({
           type:"POST",
            url:"PHP/class.ajax.php",
            data: dataString,
            dataType: 'JSON',
            success: function(success) {
                    player_details_init(success)
            },
            error: function(){
                alert("ERROR in User data");
            }
        });

        console.log (player_level);
        //scene.load("level_"+level);

        //instantiate a heroObject
        player = new Player(20,20,game_width, game_height);
        // set it's image to the proper src URL
        player.image.src = "images/Mage_Sprite.png";
        // once the image has completed loading, render it to the screen
        player.image.onload = function()
        {
            player.render();
        };

        lastUpdate = Date.now();
    } 
```

所以例如现在当脚本运行时，我可以在控制台中看到 ajax 请求被发出，然后脚本的其余部分在 ajax 完成之前执行，从而导致此调用：

```
console.log (player_level); 
```

返回 undefined 而不是应该返回的值，因为 ajax 尚未完成。

为了澄清我的问题是：

我应该如何在脚本的其余部分得到处理之前完成 ajax 调用？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T16:56:57.467

将“脚本的其余部分”放在成功回调函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:57:39.280

您可以将脚本的其余部分放在 AJAX 调用的成功回调中，或者将`async`AJAX 调用配置的属性设置为 false，这将使其同步。

# git - GIT作者身份验证

> ID：15931952
> 
> 赞同：1
> 
> 时间：2013-04-10T16:55:33.577
> 
> 标签：git, security

我们公司正在研究使我们的版本控制现代化，通常我们希望使用 git。我以前使用过分布式版本控制，但仅用于个人项目和开源项目（有某种用户管理）（Google 代码上的 Mercurial 和 LaunchPad 上的 Bazaar）。如果我们在自己的存储库上使用 GIT，我不确定如何验证每个提交的作者。我不是在谈论推送的身份验证，而是提交的身份验证。

所以让我们说.. 1.我克隆回购并检查一个分支。2.我将我的用户名更改为我的工人并进行更改并最终提交。3\. 我改回我的 user.name 并推送（例如使用我的 ssh 帐户）。4\. 我可以把所有的变化都归咎于我的同事。

这会是一个问题吗？我们如何解决这个问题？

我确信那里有一些东西，但我想我不是在寻找正确的信息，所以如果你们能给我一些基本的概述，这将非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:58:46.160

您无法规范提交的创建，因为这发生在每个用户的工作站上，在他们自己的存储库本地副本中。

您可以在中央存储库中进行一些检查（使用挂钩），并要求传入的提交带有连接用户的名称。 **然而，这是一个坏主意。**

考虑一个用户可能需要重用其他人的工作但不想合并它的情况。他可能会挑选其他人的提交，或者将他们的分支重新定位到他自己的分支上。在这种情况下，作者信息与原始提交匹配是**正确**的，并且将传入提交限制为具有与推送它们的用户匹配的作者姓名会破坏此工作流程。

只有当它成为一个问题时，我才会担心这个。归结为信任：如果您不信任开发人员，他们为什么要为您工作？

# wpf - WPF 布局 - 填充高度、自动滚动条

> ID：15931956
> 
> 赞同：1
> 
> 时间：2013-04-10T16:55:54.817
> 
> 标签：wpf, layout, grid, ribbon

`Grid`底部的 包含一个`ListBox`. 它垂直拉伸，但滚动条到达底部时不会出现。

![在此处输入图像描述](https://i.stack.imgur.com/A8Zy7.png)

布局 -

```
<RibbonWindow ResizeMode="CanResize">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <StackPanel>
            <Ribbon ... />

            <ListBox
                VerticalAlignment="Stretch"
                ScrollViewer.VerticalScrollBarVisibility="Auto"
            />
        </StackPanel>
    </Grid>
</RibbonWindow> 
```

我听说这`StackPanels`可能会导致这种行为，但是用 a 替换它`Grid`会导致一系列问题。

编辑 -

此布局有效 -

```
<RibbonWindow ResizeMode="CanResize">
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Ribbon Grid.Row="0" />

        <ListBox Grid.Row="1"
            VerticalAlignment="Stretch"
            ScrollViewer.VerticalScrollBarVisibility="Auto"
        />
    </Grid>
</RibbonWindow> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:15:46.043

原来我需要 Grid.Row="x" 标签，然后我可以删除 StackPanel，一切正常。

# java - 如何获取当前打开的windows目录？

> ID：15931961
> 
> 赞同：1
> 
> 时间：2013-04-10T16:56:16.237
> 
> 标签：java

我们是否有任何选项可以通过 java 代码检索当前打开的窗口目录。

我有一个`thread`，当用户在 Windows 中打开任何目录/文件夹时需要监听它，它应该返回相同的绝对路径。

# firefox - 右键单击 Firefox，引导下拉菜单消失

> ID：15931962
> 
> 赞同：5
> 
> 时间：2013-04-10T16:56:25.197
> 
> 标签：firefox, twitter-bootstrap, drop-down-menu

我对 twitter-bootstrap 和 firefox 有一些问题。我有一个按钮和一个带有输入文本的下拉菜单。如果我右键单击输入（例如右键单击 + 粘贴），Firefox 会关闭下拉菜单。这很无聊。

有什么解决方案可以防止这种行为吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T19:37:10.937

作为一种直接的权宜之计，您可以使用以下几行来防止**单击**事件在单击事件是右键单击时传播

## JS

```
$(document).on('click', function(e) {
  e.button === 2 && e.stopImmediatePropagation()
}) 
```

这需要放在**jQuery**加载和**Bootstrap**加载之间。

## [普朗克](http://plnkr.co/edit/Wq1B46zhuW1wrGMoEr1E?p=preview)

然而，这是一种相当生硬的方法，如果可能的话，你最好做一些更微妙的事情。

* * *

# 更新

以更有针对性的方式规避此问题的一种方法是禁用原始事件侦听器并将其替换为首先检查右键单击的事件侦听器。

## JS

```
// obtain a reference to the original handler
var _clearMenus = $._data(document, "events").click.filter(function (el) {
    return el.namespace === 'data-api.dropdown' && el.selector === undefined
  })[0].handler;

// disable the old listener
$(document)
  .off('click.data-api.dropdown', _clearMenus)
  .on('click.data-api.dropdown', function (e) {
    // call the handler only when not right-click
    e.button === 2 || _clearMenus()
  }) 
```

与前面的示例不同，此代码需要在Bootstrap 加载*后运行。*

## [普朗克](http://plnkr.co/edit/I9lcwmVaRqmGRaBCfuMS?p=preview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-02T01:26:37.730

对于**Bootstrap 3**，您必须将命名空间更新为`bs.data-api.dropdown`.

## JS

```
// obtain a reference to the original handler
var _clearMenus = $._data(document, "events").click.filter(function (el) {
  return el.namespace === 'bs.data-api.dropdown' && el.selector === undefined
})[0].handler;

// disable the old listener
$(document)
  .off('click.data-api.dropdown', _clearMenus)
  .on('click.data-api.dropdown', function (e) {
    // call the handler only when not right-click
    e.button === 2 || _clearMenus()
  }) 
```

## [普朗克](http://plnkr.co/edit/PKnPcQ5YcCQJDyw0ijPx?p=preview)

# android - 从 android 解析 linux PC 名称

> ID：15931969
> 
> 赞同：0
> 
> 时间：2013-04-10T16:56:37.007
> 
> 标签：android, linux, dns

我正在使用 Apache 托管一个内部网络，如果我写了托管我访问的网络的 PC 名称，则从 windows PC 托管，但如果我在带有 android 的设备中写入 PC 名称，我无法访问。我一直在阅读，但我找不到这个问题的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:01:29.640

您可以从 PC 访问您的网站，只需访问它的名称，因为您的 PC 和拥有 Apache 服务的 PC 在同一个网络上（甚至是同一台 PC）。另一方面，您的 android 设备通常不会连接到您的网络。即使它使用无线连接，您仍然需要进行配置才能使其正常工作。

这就是您无法以这种方式访问​​它的原因。

# java - 切换计算机时的 R.Java 问题

> ID：15931972
> 
> 赞同：0
> 
> 时间：2013-04-10T16:56:40.313
> 
> 标签：java, android, eclipse, adt

当我在笔记本电脑和台式机之间切换时，Windows 7 和 64 位都具有完全相同的用户名和文件夹名称，无法解析 R.Java。然而，它正在完美地生成，如果我将它包含在每个 java 文件中，它就会完美地工作。

我只是不想每次都包含该文件。为什么会生成 R.Java 文件，但不会自动包含在 Android 项目中，这是有原因的吗？我已经完成了 Java Buildpaths 和项目设置。尽管我可能错过了一些微妙的东西，但一切似乎都完全相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:58:37.587

我可以想到几种可能性：

1.  如果资源编译器遇到错误，将不会生成 R.java。检查资源是否编译干净。
2.  Java 构建路径可能没有在新环境中正确设置，或者 Android SDK 安装可能设置不同。

您可能只需要清理和构建您的项目。

# php - 检查在 CakePHP 中发送电子邮件是否成功/失败？

> ID：15931984
> 
> 赞同：5
> 
> 时间：2013-04-10T16:57:16.277
> 
> 标签：php, email, cakephp, error-handling

如何检查在 CakePHP 中发送电子邮件是否成功？

我可以发送电子邮件没问题，但如果发送失败，我希望能够处理错误。我怎样才能做到这一点？

这是我到目前为止所做的：

```
$email = new CakeEmail();
$email->from(array('email' => 'title'));
$email->to($to);
$email->subject('Account activation');     
$activate_url = 'http://' . env('SERVER_NAME') .'/cakephp/users/activate/'.$id.'/'.$token;
$message = "Thank you for signing up. Click on the activation link to activate your account \n";
return $email->send($message.$activate_url); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T17:06:58.297

您可以使用 try catch 块来检查邮件是否已成功移交给 MTA，您无法真正检测或检查邮件是否已成功交付给收件人。那是另一种情况。

```
try {
    if ( $this->Email->send() ) {
        // Success
    } else {
        // Failure, without any exceptions
    }
} catch ( Exception $e ) {
    // Failure, with exception
} 
```

或者，如果您在邮件标题中设置了回复，那么您可以检查是否有任何退回的邮件，这将使您可以肯定地说邮件尚未送达。

# grails - 如何更新 grails 域对象列表上的属性？

> ID：15931986
> 
> 赞同：2
> 
> 时间：2013-04-10T16:57:24.410
> 
> 标签：grails, grails-2.0, grails-domain-class

我有一个域类对象列表：

```
def books = Books.findAllByTitleLike("%Hobbit%") 
```

现在我想更新此列表中所有书籍中的“可用”属性。通常，我会做

```
books.each {
   it.available = false;
   it.save()
} 
```

有没有更好的方法来做到这一点？我应该在一笔交易中完成吗？喜欢：

```
Book.withTransaction { ... } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T17:37:50.337

您可以使用 executeUpdate 进行批量更新

```
def updatedRecords = Book.executeUpdate("update Book set available = 'false' where title like'%Hobbit%' ") 
```

每条评论：它的 hql 和它的类似于 sql。

这是您可以做到的另一种方式（内部查询）：

```
def sql = """update Domain
set $fieldName = '$fieldValue'
where id in (select id from Domain1 where seqId = '$myid')"""
def updatedRecords = Domain.executeUpdate(sql) 
```

或此行中的某些内容：

```
"... where id in ('123','132','111') 
```

我还没有测试过，但你可能会说

```
def list= ['123','132','111']
" ... where id in ($list)" 
```

# c# - 是什么导致 Linq to SQL 中的“指定强制转换无效”？

> ID：15931990
> 
> 赞同：0
> 
> 时间：2013-04-10T16:57:29.107
> 
> 标签：c#, linq-to-sql, .net

老实说，我对此感到困惑！我在另一个工作得很好的桌子上有非常相似的代码。

我正在使用 Linq to Sql 在表中插入一行，并且仅在以下任一情况下才有效

1.  触发器的一部分被禁用。
2.  我将总成本列（SQL 钱，C# 十进制）设置为 0。

触发器汇总一组行的总成本，然后更新不同表的总成本。

**触发代码**

```
 ;WITH CalculatedTotals AS
    (
        SELECT A.ID, SUM(B.TotalCost) AS TotalCost
        FROM dbo.TableA A
        INNER JOIN dbo.TableB B ON B.GroupID = A.ID
        GROUP BY A.ID
    )

    UPDATE A
    SET A.TotalCost = CT.TotalCost
    FROM dbo.TableA A
    INNER JOIN CalculatedTotals CT ON A.ID = CT.ID 
```

在此代码中，CalculatedTotals.TotalCost 是可为空的 int，而 TableA.TotalCost 是不可为空的钱。我尝试过使用 IsNull、Convert 等。使用 Linq to Sql 时总是遇到同样的异常。但是，直接使用 SQL 插入行可以正常工作。再一次，我有与另一个工作表类似的代码。我正在使用.NET 4。

怎么了？

**更新**

InvalidCastException 堆栈跟踪：

```
 at System.Data.SqlClient.SqlBuffer.get_Int64()
   at System.Data.SqlClient.SqlDataReader.GetInt64(Int32 i)
   at Read_Object(ObjectMaterializer`1 )
   at System.Data.Linq.SqlClient.ObjectReaderCompiler.ObjectReader`2.MoveNext()
   at System.Linq.Enumerable.FirstOrDefault[TSource](IEnumerable`1 source)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.DynamicInsert(TrackedObject item)
   at System.Data.Linq.ChangeDirector.StandardChangeDirector.Insert(TrackedObject item)
   at System.Data.Linq.ChangeProcessor.SubmitChanges(ConflictMode failureMode)
   at System.Data.Linq.DataContext.SubmitChanges(ConflictMode failureMode)
   at System.Data.Linq.DataContext.SubmitChanges()
   at Repository`2.Save() in C:\...\Repository.cs:line 104
   at TableBManager.CreateTableB(TableB tableB) in C:\...\TableBManager.cs:line 45
   at MyService.SetTableB(TableB tableB) in C:\...\MyService.cs:line 371
   at SyncInvokeSetExtraFormItem(Object , Object[] , Object[] )
   at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs)
   at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc) 
```

当我尝试调用`SubmitChanges`我的数据上下文时会发生这种情况。

** 更新 **

这是我使用的通用 repo 类。

```
 /// <summary>
        /// Creates the item.
        /// </summary>
        /// <param name="entity">The entity.</param>
        public void CreateItem(T entity)
        {
            _db.GetTable<T>().InsertOnSubmit(entity);
        }

        /// <summary>
        /// Saves this instance.
        /// </summary>
        public void Save()
        {
            _db.SubmitChanges();
        } 
```

**更新**

好的，所以我的其他代码也不再工作了。我唯一改变的是触发器。

**更新**

找到了这个 SO 问题，其中包含 2 篇文章的有用链接：[Linq-To-SQL Invalid Cast on insert, not on update](https://stackoverflow.com/questions/995184/linq-to-sql-invalid-cast-on-insert-not-on-update)

这可能是一个错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:21:16.297

当我测试它时，我的触发器中有一个 select 语句。所以触发器返回了一个实体集，但是 Linq to Sql 创建需要一个 64 位的 int。我删除了 select 语句，插入再次起作用。

# recursion - 计算前缀并将其转换为中缀

> ID：15931996
> 
> 赞同：1
> 
> 时间：2013-04-10T16:57:47.217
> 
> 标签：recursion, converter, prefix, infix-notation, stack

我在编写将前缀转换为中缀的程序时遇到了一些严重的问题。我已经编写了 2 个使用堆栈但使用方式不同的程序 - 一个使用两个堆栈，另一个使用递归方法。但是我仍然在正确执行它时遇到问题，因为要求要求它使用两个堆栈（操作数和运算符）并使用递归方法。我在将这两个要求一起可视化时遇到了严重的问题。有谁知道算法会是什么样子？如果我可以简单地拥有一个算法，那将真的是一个救生员。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T18:25:01.290

这样做。

```
(define (prefix->infix pre)
  (cond ((list? pre)
         (assert (= 3 (length pre)))
         (let ((operator (list-ref pre 0))
               (operand1 (list-ref pre 1))
               (operand2 (list-ref pre 2)))
           (list (prefix->infix operand1)
                 operator
                 (prefix->infix operand2))))
        (else pre)))

> (prefix->infix '(+ 1 2))
(1 + 2)
> (prefix->infix '(+ 1 (* 2 3)))
(1 + (2 * 3))
> (prefix->infix '(+ (/ 1 4) (* 2 3)))
((1 / 4) + (2 * 3)) 
```

它没有明确使用“堆栈”（但递归使用调用堆栈）。

# facebook - 如何将 OAuth 对话框从 php 服务器发送到 javascript 客户端

> ID：15931997
> 
> 赞同：0
> 
> 时间：2013-04-10T16:57:48.420
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-php-sdk

我已经在我的程序中添加了一个 php 脚本（服务器端），我可以从 Facebook 登录、注销和检索信息。我的 JavaScript 客户端可以通过使用 url 调用方法从服务器检索这些信息，但无法登录 Facebook。

有没有办法，一个脚本能够将 OAuth 对话框从 php 应用程序（服务器端）发送到 Javascript 客户端？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:00:59.530

您可以尝试使用 json_encode() 函数对结果进行编码，并通过带有 AJAX 的 GET 获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T20:44:35.243

我不认为“发送”对话会起作用。

JavaScript Facebook API 用作弹出窗口，而 Facebook PHP API 用作重定向。

最好的方法是在客户端通过 JavaScript 实现 OAuth，将接收到的令牌发送到 HTTPS 到服务器，让 PHP 自己完成工作或从客户端考虑 AJAX 调用。

另一种选择 - 通过 JavaScript 打开弹出窗口，里面有一个 PHP 页面。该页面进行身份验证并自行关闭。

干杯。

# javascript - jQuery.ScrollTo 和滚动事件无法正常工作

> ID：15931998
> 
> 赞同：1
> 
> 时间：2013-04-10T16:57:52.233
> 
> 标签：javascript, jquery, scroll

我还没有找到这个问题的任何解决方案，所以我再问一次，这是上一个问题的链接：[jQuery.ScrollTo onAfter settings is not working correct](https://stackoverflow.com/questions/15501304/jquery-scrollto-onafter-settings-isnt-working-correctly)

我正在使用 jQuery.ScrollTo 脚本来垂直滚动到所选图像或下一个图像。（这取决于“演示文稿”类是否附加到我的图像容器）

为此，我创建了两种状态：“演示模式”和“无演示模式”。

当我们通过将全局类“presentation”添加到我的容器“#galleries”中来单击图像时，我将激活演示模式。使用此类“打开”，我可以确定是否必须显示当前图像或滚动到下一个图像。

为了演示模式，我编写了“$(window).scroll”函数。当用户在页面内滚动时，此功能将退出演示模式。

问题：当我在演示模式中使用 .scrollTo 事件时，由于“$(window).scroll”功能，我总是退出“演示”模式。所以，我有全局变量“presentation_mode_stop_scrolling”来阻止它，但这不起作用

这是我的问题：在图片上单击事件后，有时，我的 $(window).scroll 函数删除了我的类“演示文稿”，有什么想法吗？？？

这是演示：http: [//jsfiddle.net/qnQSP/12/](http://jsfiddle.net/qnQSP/12/)

这是我的代码：

```
<div id="galleries">
    <div id="pictures-content" class="1"><img src="http://www.sb-designs.co.uk/ckfinder/userfiles/images/free%20web%20hosting.jpg"></div>
    <div id="pictures-content" class="2"><img src="http://www.mastercreations.net/wp-content/uploads/2012/10/5.jpg"></div>
    <div id="pictures-content" class="3"><img src="http://www.sb-designs.co.uk/ckfinder/userfiles/images/free%20web%20hosting.jpg"></div>
    <div id="pictures-content" class="4"><img src="http://www.webdesign4essex.co.uk/images/essex_website_design.jpg"></div>
    <div id="pictures-content" class="5"><img src="http://www.mastercreations.net/wp-content/uploads/2012/10/5.jpg"></div>
</div> 
```

我的剧本

```
presentation_mode_stop_scrolling = "off";

// Calling functions
$(document).ready(function(){ 

// ADD THE POST ANIMATION ON PICTURE TO CENTER IT IN THE MIDDLE OF THE SCREEN

    var picture_to_center_class = "";   
    var picture_to_center = "";

    $("#galleries #pictures-content").unbind("click");
    $("#galleries #pictures-content").bind("click", function(event) {

        // Check if we are in the presentation mode
        var class_galleries = $("#galleries").attr('class');
        if(class_galleries == "picture_presentation")
        {
        // WE ARE IN THE PRESENTATION MODE
        // GO TO THE NEXT ONE
        $("#galleries").addClass('picture_presentation');  
            console.log("WE ARE IN THE PRESENTATION MODE, GO TO THE NEXT ONE");
            var new_picture = parseInt(picture_to_center_class)+1;

            // Stopping the scroll event to cancelled the presentation mode
            presentation_mode_stop_scrolling="on";

            //scrolling to the next one
            var picture_to_center = $("#galleries ."+new_picture);      
            $("body").scrollTo(picture_to_center, 800, {onAfter:function(){

                console.log("galleries class: "+$("#galleries").attr('class'));
                presentation_mode_stop_scrolling="off";
                return false;
                console.log("removed class");
            }});
        }
        else
        {
        // THE PRESENTATION MODE
        // FOCUS THIS ONE
            // We are adding the presentation mode to the DOM 
            $("#galleries").addClass("picture_presentation");
            console.log("PRESENTATION MODE, FOCUS THIS ONE, ADDING THE PRESENTATION CLASS ");

            // Get the binding element class number 
            picture_to_center_class = $(this).attr('class');
            console.log("picture_to_center: "+picture_to_center_class);

            picture_to_center = $("#galleries ."+picture_to_center_class);

             // Stoping the (windows).scroll to removed the galleries class 
            presentation_mode_stop_scrolling="on";
            $("body").scrollTo(picture_to_center, 800, {onAfter:function(){
                 presentation_mode_stop_scrolling="off"; 
                 return false;
                 $("#galleries").addClass('picture_presentation');
//               console.log("galleries class: "+$("#galleries").attr('class'));
                 } });
         }
         return false;
    });

    // ADD THE FUNCTION TO REMOVE THE USER FROM THE PRESENTATION MODE   
    $(window).scroll(function () {
//  console.log("presentation_mode_stop_scrolling: "+presentation_mode_stop_scrolling); 
      if(presentation_mode_stop_scrolling=="off")
      {
          $("#galleries").removeClass("picture_presentation");
          console.log("THE PRESENTATION MODE HAS BEEN REMOVED");
      }
    }); 

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:40:45.237

我相信这是您正在寻找的结果，我已经清理了一些代码，但想法是一样的。

[http://jsfiddle.net/cf26A/5/](http://jsfiddle.net/cf26A/5/)

主要问题是函数执行**后**`$(window).scroll`触发一次，这就是为什么标志总是被关闭的原因。 **`onAfter``presentation_mode_stop_scrolling`**

 **我添加了一点延迟来处理这个问题，这可能不是最佳实践。应该有办法阻止 $(window).scroll 被触发。如果有人知道，请发表评论，因为我也想学习。

希望能帮助到你。**