# StackOverflow 问答 13258000-13258999

# objective-c - MKMapView 中的奇怪行为 - 引脚消失

> ID：13258000
> 
> 赞同：6
> 
> 时间：2012-11-06T19:29:46.970
> 
> 标签：objective-c, ios, mkmapview, rubymotion

在我的应用程序中，我们有一个带有 MKMapView 的屏幕。

此地图显示了一组位置的引脚（位置是在应用程序中定义的模型）。

在模拟器中运行时，这工作正常。但是，当在设备上运行此程序时，几乎每次平移地图时，引脚似乎都会消失并重新出现。即使是轻微的触摸和移动也会导致地图显示和隐藏图钉。

地图不是特别忙，即使显示一个图钉它也会显示和隐藏它。

有谁知道为什么会发生这种情况？我在下面粘贴了我的代码……这是一个 Rubymotion 应用程序，所以代码是用 Ruby 编写的。

## - 更新 -

我在下面添加了与此 Ruby 代码等效的 Objective C。抱歉，如果有几个拼写错误或惯用错误，我已经有一段时间没有写任何 OC 了。

## - 更新 2 -

看着记录器，我可以看到`mapView:viewForAnnotation`每次地图针消失/重新出现时都会调用它。

此外，每次`mapView:regionDidChangeAnimated`我可以看到注释的对象 ID 是相同的 - 所以我认为它们不会被删除（它们不应该被删除）

```
# ====================
# = MKMapKitDelegate =
# ====================

# Don't react if the user has moved less than three meters
USER_MOVE_THRESHOLD = 3

# The user location has changed
def mapView(mapView, didUpdateUserLocation: newLocation)
  NSLog("mapView:didUpdateUserLocation")
  return unless userLocation
  coord = newLocation.coordinate
  newLocationAsCL = CLLocation.alloc.initWithCoordinate(coord, altitude: 1, horizontalAccuracy:1, verticalAccuracy: -1, timestamp: nil)    
  meters = newLocationAsCL.distanceFromLocation(@lastUserCLLocation)

  # If user has moved less than 3m, return
  if meters > 0 and meters < USER_MOVE_THRESHOLD
    log "Distance was less than #{USER_MOVE_THRESHOLD} meters (#{meters}) - returning ***"
    return
  end

  # If the coord is the same as the previous user location
  if userLocation.coordinate.latitude == coord.latitude && userLocation.coordinate.longitude == coord.longitude
    log "User hasn't moved - returning ***"
  else
    log 'User has moved'
  end

  log "Did update user location: #{coord.latitude},#{coord.longitude}"

  if coord.latitude.to_f == 0.0 and coord.longitude.to_f == 0.0
    log 'Invalid coordinate received - returning ***'
  else
    fetchLocationsFromAPI
  end
end

def mapView(mapView, regionDidChangeAnimated: animated)
  NSLog("mapView:regionDidChangeAnimated:#{animated}")
  # do nothing here yet...
end

# create map pins...
def mapView(mapView, viewForAnnotation: annotation)
  log "mapView:viewForAnnotation: #{annotation.inspect}"

  if annotation.is_a?(Location)
    # If there's already an annotation we can use, use it! Otherwise create a new one
    annotationView = mapView.dequeueReusableAnnotationViewWithIdentifier(annotation.class.to_s) || begin
      annotationView = MKPinAnnotationView.alloc.initWithAnnotation(annotation, reuseIdentifier: annotation.class.to_s)
      annotationView.enabled        = true
      annotationView.canShowCallout = true
      annotationView.animatesDrop   = false
      annotationView.pinColor = MKPinAnnotationColorRed

      rightButton = UIButton.buttonWithType(UIButtonTypeDetailDisclosure)
      rightButton.addTarget(self, action: 'showLocationScreen:', forControlEvents: UIControlEventTouchUpInside)
      annotationView.rightCalloutAccessoryView = rightButton      
      annotationView      
    end
    annotationView.annotation = annotation
    annotationView.rightCalloutAccessoryView.tag = @mapLocations.index(annotation)
    return annotationView
  end
end

def mapView(mapViewm, didAddAnnotationViews: views)
  NSLog("mapView:didAddAnnotationViews - #{views}")
  # do nothing here yet...
end 
```

## 目标 C

```
#define kUserMoveThreshold 1

-(void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)newLocation
{
  NSLog(@"mapView:didUpdateUserLocation")
  if (!userLocation) {
    return;
  }
  CLLocationCoordinate2D coord = newLocation.coordinate;
  CLLocation newLocationAsCL = [[CLLocation alloc] initWithCoordinate: coord altitude: 1 horizontalAccuracy: 1 verticalAccuracy: -1 timestamp: NULL];
  CLLocationDistance meters = [newLocationAsCL distanceFromLocation: lastUserCLLocation];

  // If user has moved less than 3m, return
  if (meters > 0 && meters < kUserMoveThreshold){
    NSLog(@"Distance was less than %d meters (%d) - returning ***", kUserMoveThreshold, meters);
    return;
  }

  // If the coord is the same as the previous user location
  if (userLocation.coordinate.latitude == coord.latitude && userLocation.coordinate.longitude == coord.longitude){
    NSLog(@"User hasn't moved - returning ***");
    return;
  } else {
    NSLog(@"User has moved");  
  }
  NSLog(@"Did update user location: %f,%f", coord.latitude, coord.longitude);
  if (coord.latitude == 0.0 && coord.longitude == 0.0){
    NSLog(@"Invalid coordinate received - returning ***");
  } else {
    [self fetchLocationsFromAPI];
  }
}

-(void)mapView:(MKMapView *)mapView regionDidChangeAnimated:(BOOL)animated
{
  NSLog(@"mapView:regionDidChangeAnimated: %s", animated ? @"TRUE" : @"FALSE");
}

-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id < MKAnnotation >)annotation
{
  NSLog(@"mapView:viewForAnnotation %s", annotation.description);

  if ([annotation isKindOfClass: [Location class]]){
      // If there's already an annotation we can use, use it! Otherwise create a new one
    MKAnnotationView *annotationView = [mapView dequeueReusableAnnotationViewWithIdentifier: [annotation className]];
    if (!annotationView){
      annotationView = [[MKPinAnnotationView alloc] initWithAnnotation: annotation reuseIdentifier: [annotation className]];
      [annotationView setEnabled: YES];
      [annotationView setCanShowCallout: YES];
      [annotationView setAnimatesDrop: NO];
      [annotationView setPinColor: MKPinAnnotationColorRed];

      UIButton *rightButton = [UIButton buttonWithType: UIButtonTypeDetailDisclosure];
      [rightButton addTarget: self action: @selector(showLocationScreen:) forControlEvents: UIControlEventTouchUpInside];
      [annotationView setRightCalloutAccessoryView: rightButton];
    }

    [annotationView annotation: annotation];
    [[annotationView rightCalloutAccessoryView] setTag: [mapLocations indexOfObject: annotation]];
    return annotationView
  }
}

-(void)mapView:(MKMapView *)mapView didAddAnnotationViews:(NSArray *)views
{
  NSLog(@"mapView:didAddAnnotationViews %@", views)
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T14:15:48.990

这是 Rubymotion 的一个错误，似乎已在 1.30 版中解决

= RubyMotion 1.30 =

...

*   修复了 MapKit 注释引脚会消失的错误，因为某些 Ruby 对象（在本例中为 MKAnnotations）将使用 Bignum 值作为“哈希”方法的返回值，这在 MapKit 中使用时无法正常工作。

...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T17:22:44.120

当您创建 pin 注释时，您是否将它们添加到 mapView 的注释数组中？

```
CLLocationCoordinate2D locationForSelectedFloorOffice;
locationForSelectedFloorOffice.longitude = [[myGeoCode objectAtIndex:0] floatValue] * 1.0;
locationForSelectedFloorOffice.latitude = [[myGeoCode objectAtIndex:1] floatValue] * 1.0;
MyLocation *annotation = [[MyLocation alloc] initWithName:dStore.selectedFloorRoomName address:@" " coordinate:locationForSelectedFloorOffice];
[self.mapView addAnnotation:annotation]; 
```

# vba - VBA 将数据透视表的源数据更新到行尾

> ID：13258001
> 
> 赞同：5
> 
> 时间：2012-11-06T19:29:53.883
> 
> 标签：vba, excel, excel-2007

我试图弄清楚当数据使用 VBA 更改时如何将我的数据透视表源数据更新到行尾。我当前的代码如下：

```
Dim shBrandPivot As Worksheet
Dim shCurrentWeek As Worksheet
Dim shPriorWeek As Worksheet
Dim shPivot As Worksheet
Dim lr As Long

Set shBrandPivot = ActiveWorkbook.Sheets("Brand Pivot")
Set shCurrentWeek = ActiveWorkbook.Sheets("Current Week")
Set shPriorWeek = ActiveWorkbook.Sheets("Prior Week")
Set shPivot = ActiveWorkbook.Sheets("Pivot")
lr = shCurrentWeek.Range("A" & Rows.Count).End(xlUp).Row

With ActiveWorkbook.Sheets("Pivot").Activate

ActiveSheet.PivotTableWizard SourceType:=xlDatabase, SourceData:="CurrentWeek!A3:X & lr"

End With 
```

我得到的错误是运行时错误 1004：无法打开数据透视表源文件：E:\offline\KXM2103\Data\CurrentWeek

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T19:55:42.147

要仅在 VBA 中执行此操作，您可以尝试此操作。

```
Dim shBrandPivot As Worksheet
Dim shCurrentWeek As Worksheet
Dim shPriorWeek As Worksheet
Dim shPivot As Worksheet
Dim lr As Long
dim rng as range

Set shBrandPivot = ActiveWorkbook.Sheets("Brand Pivot")
Set shCurrentWeek = ActiveWorkbook.Sheets("Current Week")
Set shPriorWeek = ActiveWorkbook.Sheets("Prior Week")
Set shPivot = ActiveWorkbook.Sheets("Pivot")
lr = shCurrentWeek.Range("A" & Rows.Count).End(xlUp).Row
set rng = shcurrentweek.range("A3:X" & lr)

With shPivot.PivotTables(1).PivotCache 
        .SourceData = rng.Address(True, True, xlR1C1, True)
        .Refresh
End With 
```

# javascript - 如何在 onlick 期间让“this”引用 Class 而不是 html 按钮？

> ID：13258004
> 
> 赞同：1
> 
> 时间：2012-11-06T19:30:03.700
> 
> 标签：javascript, jquery, javascript-events

我在 JavaScript 中创建了一个秒表类，当用户单击“开始秒表”按钮时，秒表应该启动。

我的问题是，当用户单击“开始秒表”按钮时，“this”引用的是按钮而不是 Stopwatch 对象。

有什么建议么？

这是一个示例： [https ://c9.io/rjfreund/stopwatch/workspace/stopwatch.html](https://c9.io/rjfreund/stopwatch/workspace/stopwatch.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:33:19.887

由于您使用的是 jQuery：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script> 
```

...使用`.bind()`或`.on()`绑定处理程序，并在*event-data*中设置对象。

```
$('.yourElement').on("click", {obj: yourObject}, function(event) {
    alert(event.data.obj);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:33:54.357

This is the best I can do without code:

```
<a id="start_stopwatch" onclick="yourStopwatchClass.start.call(yourStopwatchClass)">Start stopwatch!</a> 
```

`call` refers the `this` variable to whatever you pass in, in this case your `Stopwatch` class.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T21:08:33.253

函数的值`this`由函数的调用方式设置。对于侦听器，如果分配如下：

```
element.onclick = instance.method; 
```

然后它将被处理程序或多或少地作为元素的方法调用，并将其设置`this`为元素。使用其他方法（和各种库方案）附加侦听器`addEventListener`会做同样的事情。

您可以使用[`call`](http://ecma-international.org/ecma-262/5.1/#sec-15.3.4.4)or [`apply`](http://ecma-international.org/ecma-262/5.1/#sec-15.3.4.3)，但您也可以包装该函数并调用它来设置`this`您想要的对象：

```
element.onclick = funciotn() {insance.method()}; 
```

您还可以使用[`bind`](http://ecma-international.org/ecma-262/5.1/#sec-15.3.4.5)ES5 提供的各种库和[shims](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)。

# java - Spring Security 过滤器映射 - 在某些 Url 模式上禁用

> ID：13258005
> 
> 赞同：0
> 
> 时间：2012-11-06T19:30:13.310
> 
> 标签：java, spring, servlets, spring-security, servlet-filters

我有以下 servlet 定义：

```
 <servlet>
        <servlet-name>licenseGenService</servlet-name>
        <servlet-class>org.springframework.web.context.support.HttpRequestHandlerServlet</servlet-class>
    </servlet>

    <servlet-mapping>
        <servlet-name>licenseGenService</servlet-name>
        <url-pattern>/remoting/licensing</url-pattern>
    </servlet-mapping>

    <!-- Restful API Servlet-->
    <servlet>
        <servlet-name>licensingRestService</servlet-name>
        <servlet-class>
            com.sun.jersey.spi.spring.container.servlet.SpringServlet
        </servlet-class>
        <init-param>
            <param-name>
                    com.sun.jersey.config.property.packages
            </param-name>
            <param-value>
                com.mydomain.licensing.rest
            </param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>licensingRestService</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping> 
```

然后是以下安全过滤器：

```
 <filter>
        <filter-name>springSecurityFilterChain</filter-name>
        <filter-class>
            org.springframework.web.filter.DelegatingFilterProxy
        </filter-class>
    </filter>

    <filter-mapping>
        <filter-name>springSecurityFilterChain</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

因此，根据我所阅读的内容，`/*`具有显式 url 的 url 模式会被覆盖。这适用于我的 servlet。问题是，我不想要`licenseGenService`servlet 所需的基本身份验证。如何将安全过滤器定义为仅适用于 REST servlet，而不适用于那个`licenseGenService`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:18:09.933

我最终在我的安全应用程序上下文中放置了以下内容：

```
<http pattern="/remoting/**" security="none"/> 
```

这适用于 Spring 3.1

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:04:44.537

可以在应用上下文xml中配置需要授权的url。

```
<http use-expressions="true">
  <intercept-url pattern="/remoting/licensing/**"  filters="none" />
</http> 
```

# regex - 正则表达式的 SAS 代码

> ID：13258012
> 
> 赞同：1
> 
> 时间：2012-11-06T19:30:46.097
> 
> 标签：regex, sas

我有一个以空格分隔的地址字符串，我试图用第三个参数替换第二个参数。我在下面发布的代码不起作用。请帮我改正。

```
data sasuser.word_exchange;
set sasuser.testnew3;
retain re1 re2 ;
if _N_ = 1 then do;
re1 = prxparse('s/DR/DRIVE/');
re2= prxparse('s/AVE/AVENUE/');
end;
call prxchange( re1,-1, strip(CITYSTATE));
call prxchange( re2,-1, strip(CITYSTATE));
RUN; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:15:58.553

您不能在那种情况下使用 STRIP。这是一个使用 /io 的示例（i=不区分大小写，o=编译一次，因此不需要 if *n* =1 块）。根据您的数据，“i”可能是不可取的。

```
data have;
input @1 CITYSTATE $200.;
infile datalines truncover;
datalines;
2001 Bellini Ave Michigan City IN 58431
123 Anywhere Dr Boston MA 00123
456 Nowhere Lane New York City NY 10035
;;;;
run;

data want;
set have;
re1 = prxparse('s/DR/DRIVE/io');
re2= prxparse('s/AVE/AVENUE/io');
call prxchange( re1,-1, CITYSTATE);
call prxchange( re2,-1, CITYSTATE);
put CITYSTATE=;
RUN; 
```

# javascript - jQuery POST，错误 405 方法不允许

> ID：13258014
> 
> 赞同：11
> 
> 时间：2012-11-06T19:30:46.423
> 
> 标签：javascript, jquery, asp.net-mvc-4, iis-7.5

我正在尝试使用 IIS 7.5 托管 ASP.NET MVC4 Web 应用程序。调试应用程序时一切正常（我假设这是因为 Windows 身份验证）。但是，当我发布应用程序并浏览到它时，我收到 405 Method not allowed 错误：

```
POST http://localhost/ 405 (Method Not Allowed)
send 
i.extend.ajax 
i.(anonymous function)
(anonymous function) 
```

从我一直在阅读的内容来看，这要么是 IIS 中的处理程序映射问题，要么是 web.config 中需要一些配置。无论哪种方式，我都没有找到正确的解决方案。谁能告诉我我的 web.config 应该包含在所有 POSTS 中的内容吗？和/或如何在 IIS 中设置正确的处理程序映射，因为我是 Web 开发的新手，发现选项数量有点压倒性。

引发错误的 javascript 片段如下：

```
$.post("/", { latitude: locLat, longitude: locLon, username: $('#onlineUsers').attr('itemid') }); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-06T21:26:08.800

当请求 HTTP 动词（GET、PUT、POST、DELETE、HEAD 等）并且指定的处理程序不支持/不允许时，IIS 会抛出 405。

您需要打开 IIS 管理器 -> 默认网站 -> 处理程序映射（或特定于您的 Web 应用程序的处理程序映射）

![在此处输入图像描述](../Images/63d1ee106a0cb4c2ecc7b4982ecc8f9c.png)

在这里，您需要使用处理程序映射，因为其中之一不允许“POST”动词。

由于您没有发布到任何特定页面（.aspx、.ashx 等），因此很难确定导致您问题的确切处理程序。

感兴趣的处理程序可能是：

*   ExtensionlessUrlHandler-ISAPI-4.0_32bit /64bit
*   静态文件

一旦您确定您的请求被路由到的处理程序，双击它以打开对话框。

![在此处输入图像描述](../Images/7240eb5f4a0493a4297f44930e490dc5.png)

从那里点击“请求限制”，然后点击“动词”

确保文本区域中存在适当的动词。

![在此处输入图像描述](../Images/2b86e8961f83884c288794f4591fa8c6.png)

正如我之前提到的，我不确定哪个处理程序正在处理您的请求，因为您没有发布到任何特定页面（您可能需要重新编写 URL 以适当地路由您的请求）。

* * *

如果上述方法失败，您可能需要检查是否安装了 WebDAV Publishing 并将其删除（需要重新启动）。

![网络视频](../Images/a61fe6aec5af319ba5061a15f0d4f8b7.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-28T02:30:56.833

也许你应该像这样修改你的 post'URl 格式：

```
$.post('@Url.Content("~/Attach/UpdateAttach")' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-08T08:13:41.467

这里的一些用户拥有共享主机而不是专用服务器，因此他们可能无法访问 IIS 控制面板。

这是我的情况，这就是我发现的..

我在通过 Godaddy 控制面板创建的根目录中有我的 Web 应用程序.. 并且确认了 POST 请求..

然后我使用 FileZilla 为我的 jquery 创建了一个测试文件夹 ..（注意我使用了 FileZilla，所以 Web 应用程序和 GoDaddy 的 IIS 不知道我希望这个文件夹成为我的应用程序的一部分）

然后每当我在这个测试文件夹上测试这个 jQuery.. 我得到那个错误 [405 Method not allowed]..

解决方案非常简单：

我将我的测试页面从 FileZilla 创建的测试文件夹中移出，并将其放置在通过 Godaddy 控制面板创建的文件夹中（在这种情况下，IIS 将知道该页面是我的 Web 应用程序的一部分 :)）

希望对共享主机有帮助

# objective-c - 从 Obj-c 中的数字中减去一个数字

> ID：13258015
> 
> 赞同：1
> 
> 时间：2012-11-06T19:30:51.230
> 
> 标签：objective-c, ios

这可能会给我很多反对票，但是啊。请记住，我来自 AS3 背景。

没错，我正在编写代码，显示自从种植/施工开始以来已经有多久了。我有我的 timeToCompletion 值和我的 timeSincePlanting 值，就像这样..

```
 //get seconds since planting/construction start
    NSDate *now = [NSDate date];
    NSTimeInterval secondsSincePlantingInterval = [now timeIntervalSinceDate:plantingDate];

    //convert to Number
    NSNumber *secondsSincePlanting = [NSNumber numberWithDouble:secondsSincePlantingInterval];

    //get template object
    NSDictionary *templateObject = [self getTemplate:kingdomObject];

    //get how long I should take (in seconds)
    NSNumber *timeToCompletion = [templateObject objectForKey:@"constructionTime"]; 
```

在我尝试这样做之前，一切都在顺利进行......

```
 NSNumber *timeLeft = [NSNumber numberWithInt:0];

 timeLeft = timeToCompletion - secondsSincePlanting; 
```

哪个来自 AS3 是我的本能，但现在我意识到这可能只是试图从指针中减去一个指针？

所以第一个问题是，我怎样才能用 2 个 NSNumbers 做到这一点？如果这是不可能的并且我必须使用 NSDecimalNumber，我是否只需将所有内容都转换为 NSDecimalNumber 并像那样做减法？唯一的问题是我只需要整数，因为我代表秒，不需要进入小数位等等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T19:35:57.290

Don't use the NSNumber objects.

```
NSDate *now = [NSDate date];
NSTimeInterval secondsSincePlantingInterval = [now timeIntervalSinceDate:plantingDate];

//get template object
NSDictionary *templateObject = [self getTemplate:kingdomObject];

//get how long I should take (in seconds)
NSNumber *timeToCompletion = [templateObject objectForKey:@"constructionTime"];
NSTimeInterval completionInterval = [timeToCompletion doubleValue];

NSTimeInterval timeLeft = completionInterval - secondsSincePlantingInterval; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T19:37:28.633

您可能没有过多地处理面向对象的语言。并且很容易混淆`NSInteger`（这是一个“标量”值）和`NSNumber`（这是一个对象）。

An`NSNumber`是数值的“容器”，但不能像数字一样在算术中使用。相反，您必须访问其中包含的值。

另请注意，saying`NSNumber *timeLeft = [NSNumber numberWithInt:0];`不会将数值初始化为零，而是存储在`timeLeft`指向“包装”值 0 的不可变 NSNumber 对象的指针中。然后，您无需使用下一条语句修改该对象（如果它按照您的方式工作）想），但是你会用另一个指针替换一个指针，所以第一行是没用的。

# r - 更改列名的字母大小写

> ID：13258020
> 
> 赞同：22
> 
> 时间：2012-11-06T19:31:10.293
> 
> 标签：r

我有大量数据集，每个数据集都包含一长串列名。在某些文件中，列名都是大写字母，而在某些文件中，只有列名的第一个字母大写。我需要附加数据集，并认为在数据集中匹配列名的最简单方法是将全大写名称转换为仅首字母大写的名称。

我希望找到一个通用的解决方案，甚至可能是单线。

这是我的示例数据集。所需的名称包含在`names`语句中。

```
my.data2 <-  "
landuse units grade CLAY    LINCOLN  BASINANDRANGE  MCCARTNEY  MAPLE
apple   acres AAA     0         2          3             4         6
apple   acres AA   1000       900         NA            NA       700
pear    acres AA   10.0        20         NA          30.0        40
peach   acres AAA   500       400        350           300       200
"
my.data2 <- read.table(textConnection(my.data2), header=TRUE)

names(my.data2)[names(my.data2)=="CLAY"]            <- "Clay"
names(my.data2)[names(my.data2)=="BASINANDRANGE"]   <- "BasinandRange"
names(my.data2)[names(my.data2)=="LINCOLN"]         <- "Lincoln"
names(my.data2)[names(my.data2)=="MCCARTNEY"]       <- "McCartney"
names(my.data2)[names(my.data2)=="MAPLE"]           <- "Maple"

my.data2 
```

请注意，我包括了名称`McCartney`，`BasinandRange`并使事情变得更现实和更困难。但是，如果我能找到一个单行代码来处理 95% 的名称，并使用上述`names`语句来处理诸如`McCartney`和之类的复杂情况`BasinandRange`，那就太好了。

我搜索了互联网，包括 StackOverflow 档案，但没有找到解决方案。对不起，如果我忽略了一个。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-06T19:41:22.030

这是我能想到的实现“在数据集中匹配列名的最简单方法”的单行代码：

```
## Columns 1:3 left unaltered since they are not place names.
names(my.data2)[-1:-3] <- tolower(names(my.data2)[-1:-3])

## View the results
names(my.data2)
# [1] "landuse"       "units"         "grade"         "clay"         
# [5] "lincoln"       "basinandrange" "mccartney"     "maple" 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2020-03-30T16:12:54.430

简单的解决方案

`names(DF) <- toupper(names(DF))`

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2018-12-12T05:04:01.367

# 现代解决方案

现在这是一项工作`janitor::clean_names()`，只需选择`case`适合您需要的参数即可。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-07-05T14:40:43.697

data.table 语法，相信会节省更多时间和效率。它也是一个单行语句，甚至更短。

```
library(data.table)
setnames(my.data2, tolower(names(my.data2[4:8])))

#   landuse units grade clay lincoln basinandrange mccartney maple
#1:   apple acres   AAA    0       2             3         4     6
#2:   apple acres    AA 1000     900            NA        NA   700
#3:    pear acres    AA   10      20            NA        30    40
#4:   peach acres   AAA  500     400           350       300   200 
```

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2019-07-25T12:32:06.400

一个“整洁”的解决方案：

```
library(dplyr)

my.data2.mod <- my.data2 %>% 
  rename_at(c("CLAY", "LINCOLN", "BASINANDRANGE", "MCCARTNEY",  "MAPLE"),
            .funs = tolower)

names(my.data2.mod) 
# [1] "landuse"       "units"         "grade"         "clay"         
# [5] "lincoln"       "basinandrange" "mccartney"     "maple" 
```

此外，要回答原始问题并使某些情况大写，您可以使用该`snakecase`包：

```
library(snakecase)

my.data2.mod = my.data2 %>% 
  rename_at(
    c("CLAY", "LINCOLN", "BASINANDRANGE", "MCCARTNEY",  "MAPLE"),
    .funs = list(
      ~ to_upper_camel_case(., 
                            abbreviations = c("McCartney", "BasinandRange")
                            )
      )
    )

names(my.data2.mod)
# [1] "landuse"       "units"         "grade"         "Clay"         
# [5] "Lincoln"       "BasinandRange" "McCartney"     "Maple" 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2021-01-07T11:30:34.143

结合这里的两个答案，我想出了一个优雅的`tidy`方法：

这通过大写每个单词的第一个字母来重命名所有列/变量名称。

```
library(tidyverse)

my.data2 %>%
  rename_with(str_to_title) 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2020-05-27T12:37:41.757

另外一个选项：

```
colnames(df) <- stringr::str_to_title(colnames(df)) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-11-11T19:51:47.077

我使用了 Josh O'Brien 的答案，但最终编写了下面的代码，该代码创建了第一个字母为大写字母和其他字母为小写字母的列名，除了原始帖子中处理的一些例外情况。下面我使用了与原始帖子中相同的数据集，但将该数据读入 R 的方式不同，其中`n.col`确定了数据文件中的列数：

```
n.col <- as.numeric(length(scan("c:/users/mark w miller/simple R programs/names_with_capital_letters.txt", 
         what="character", nlines=1)))

my.data2 <- read.table(file = "c:/users/mark w miller/simple R programs/names_with_capital_letters.txt", 
            na.string=NA, header = T, colClasses = c('character', 'character', 'character', 
            rep('numeric', (n.col[1] - 3))))

first.letter  <- substring(names(my.data2)[-1:-3], 1, 1)
other.letters <- tolower(substring(names(my.data2)[-1:-3], 2))
newnames      <- paste(first.letter, other.letters, sep="")

names(my.data2)[-1:-3] <- newnames
names(my.data2)[names(my.data2)=="Basinandrange"]   <- "BasinandRange"
names(my.data2)[names(my.data2)=="Mccartney"]       <- "McCartney"

my.data2

#   landuse units grade Clay Lincoln BasinandRange McCartney Maple
# 1   apple acres   AAA    0       2             3         4     6
# 2   apple acres    AA 1000     900            NA        NA   700
# 3    pear acres    AA   10      20            NA        30    40
# 4   peach acres   AAA  500     400           350       300   200 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-26T14:14:08.013

这将使每一列都大写。

```
rename_with(names,toupper) 
```

# sql - case语句中的不同条件

> ID：13258021
> 
> 赞同：1
> 
> 时间：2012-11-06T19:31:10.543
> 
> 标签：sql, oracle

我有一个 SQL，它为每个 Event_ID 返回一个 cnt1 和 cnt2，同时测试列“POSA”的条件

这将根据需要返回以下内容：

事件ID | CNT1 | 碳纳米管2

我想在每个 CASE 语句中添加另一个条件，以测试同一个表中的另一列“S”是否不同。下面是代码片段：

```
SELECT Event_ID, 
 sum  
 (CASE WHEN POSA IN ('SX', 'DX')  THEN 1 
    ELSE 0 
 END) 
 AS cnt1,
sum 
(CASE  
    WHEN POSA IN ('SP', 'DP')  THEN 1 
    ELSE 0 
 END) AS cnt2

FROM Station_Processed_Info GROUP BY EVENT_ID; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:44:07.493

```
SELECT Event_ID,   
SUM(CASE 
   WHEN POSA IN ('SX', 'DX')  THEN 1
   WHEN DISTINCT("S") THEN something 
    ELSE 0   END)   AS cnt1, 
SUM (CASE  
    WHEN POSA IN ('SP', 'DP')  THEN 1
    WHEN DISTINCT("S") THEN something 
    ELSE 0   END) AS cnt2    
FROM Station_Processed_Info GROUP BY EVENT_ID; 
```

# jquery - 外部链接上的任何滑块悬停 (MouseMove) 也有 ahref 链接？

> ID：13258022
> 
> 赞同：1
> 
> 时间：2012-11-06T19:31:11.510
> 
> 标签：jquery, hover, slider, mousemove, anythingslider

我想使用 AnySlider，它允许您通过将鼠标悬停在外部链接上进行导航。但我希望那些外部“导航”链接具有指向不同页面的链接。因此，悬停功能会移动滑块，但是当您单击 1-5 时，它们会将您定向到不同的页面（例如 page1.html、page2.html、page3.html 等）。例如，请参阅我的 jsfiddle：

```
$('#slider').anythingSlider({
buildNavigation: false,
buildStartStop: false,
buildArrows: false
});

$('ul.nav a').bind('mousemove', function() {
var h = this.hash;
// external links will fall through and go to the external url
if (/#\d/.test(h)) {
    $('#slider').anythingSlider(h.substring(1));
    return false;
}
});

<ul id="slider">
<li><img src="http://placekitten.com/300/200" alt="" /></li>
<li><img src="http://placehold.it/300x200" alt="" /></li>
<li><img src="http://placebear.com/300/200" alt="" /></li>
<li><img src="http://lorempixel.com/300/200" alt="" /></li>
<li><img src="http://placedog.com/300/200" alt="" /></li>
</ul>

<ul class="nav">
<li><a href="#1">1</a></li>
<li><a href="#2">2</a></li>
<li><a href="#3">3</a></li>
<li><a href="#4">4</a></li>
<li><a href="#5">5</a></li>
</ul> 
```

但我希望导航区域也有链接（但也激活悬停滑块进度）：

```
<ul class="nav">
<li><a href="1.html">1</a></li>
<li><a href="2.html">2</a></li>
<li><a href="3.html">3</a></li>
<li><a href="4.html">4</a></li>
<li><a href="5.html">5</a></li>
</ul> 
```

[http://jsfiddle.net/58Qmg/](http://jsfiddle.net/58Qmg/)

重申一下：是否有悬停功能移动滑块，但也有 li ahref (onclick) 将用户带到另一个页面？说得通？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T06:56:01.550

您可以向链接添加一个附加属性，例如`data-slide`并阅读它而不是`href`. 我还删除了`return false`以使链接再次可点击。这是[一个演示](http://jsfiddle.net/Mottie/58Qmg/5/)：

```
$('ul.nav a').bind('mousemove', function(e) {
    // get slide number
    var h = $(this).attr('data-slide');
    // external links will fall through and go to the external url
    if (h) {
        $('#slider').anythingSlider(h);
    }
});​ 
```

请注意，由于 jsFiddle 不允许您在框架中打开其他网页，因此我`target="_blank"`在每个链接中添加了一个：

```
<a data-slide="1" target="_blank" href="http://www.google.com">1</a> 
```

# java - phonegap 应用程序中的神秘“设置”菜单？

> ID：13258027
> 
> 赞同：0
> 
> 时间：2012-11-06T19:31:21.667
> 
> 标签：java, javascript, android, cordova

一个用户刚刚给我发了这个截图：![用户视图](../Images/797e1c98cdd0ec45ce5cbfa66860f1c1.png) 你可以在底部看到一个“设置”菜单，正如字体所示，我的（phonegap）应用程序与此无关。他正在运行 Android Jelly Bean。有谁知道这个菜单来自哪里，更重要的是，如何摆脱它？顺便说一句，单击它不会做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:00:55.507

看起来他正在使用自定义 ROM，因为“设置”中的字体与状态栏匹配，并且看起来不像标准的 Android 系统字体。他可能想询问 ROM 构建器是否有一些特殊的手势/按键来进入设置菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T13:15:11.713

解决方案：它只是一个自动生成的设置菜单（在 Java 中），默认情况下，它只包含字符串“设置”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-11T19:46:05.513

我知道这是一个旧线程，但您需要做的是`onCreateOptionsMenu`从主*活动类**中*删除该方法（与您加载 url 的类相同）

# c++ - 异步任务。哪种架构？（或 zeroMQ 中的模式）

> ID：13258030
> 
> 赞同：3
> 
> 时间：2012-11-06T19:31:29.417
> 
> 标签：c++, networking, network-programming, client-server, zeromq

我希望 Linux（服务器）主机上的一个应用程序与 VM 中 Win7（客户端）上的应用程序通信。选择的库是 ZeroMQ。但是如何管理异步任务呢？

让我举个例子：VM中的应用程序以任意间隔生成任务并将它们发送到Linux机器。这将处理它们，但需要一些时间来回答。此时 REQ/REP 模式中的套接字被阻塞，来自 WinApp 的传入任务无法转发到 LinuxApp。我应该如何解决这个问题？这一般是如何解决的，即使没有 0MQ。我是否必须同时连接服务器和客户端并建立两个连接？

要求：

*   客户端是一个独特的任务生成器。
*   服务器为每个连接的客户端创建一个工作线程。
*   服务器在客户端和工作线程之间建立唯一的连接。（一些隧道）
*   ->（每个客户端-工作线程对在一个套接字上的请求/请求）
*   服务器必须立即转发传入的任务。
*   服务器必须能够处理多个客户端（因此连接到 WT）。

因此，它不可能实现 REQ/REP/REQ/REP/... 序列。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T20:15:16.887

[查看ZMQ 指南](http://zguide.zeromq.org/page%3aall)中描述的几种模式，看看其中一种是否比简单更适合`REQ/REP`。

一般来说，您在 linux 机器上的服务器似乎需要实现`ROUTER/DEALER`将传入任务转发给一组工作人员的模式。

与传统的基于套接字的客户端/服务器解决方案相比，ZMQ 有自己的拓扑结构。其他解决方案可能是实现基于套接字的服务器，该服务器使用线程池转发传入任务。

**更新：** 由于您一直在精确满足您的要求，我认为majordomo 模式可能是您的目的的一个良好且可靠的起点。正如@gvd 在他的评论中提到的那样，可能会有更好的拟合模式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-10T05:07:30.477

正如 DevNoob 所说，异步客户端服务器模式听起来像是您需要的模式。

“LRU”表示最近最少使用，但我已从指南的最新文本中删除了该术语，并改用“负载平衡”。由于目标是在一组工作人员之间进行负载平衡......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-18T12:33:54.397

我知道您提到 ZMQ 作为您选择的库，但我可以谦虚地建议 Akka（www.akka.io）吗？Akka 有一个 ZQM 扩展，我们有很好的经验，因此您可以轻松地在其传输机制（基于网络）和 ZMQ 之间进行转换。它实现了 Actor 模型，更重要的是，它为跨工作 Actor 的异步处理提供了“询问”和“告诉”。在消息传递速度方面，Akka 似乎也与 ZMQ 之类的竞争相当有利，并且在我的经验中记录得更好。

Akka 没有的一件事是跨语言支持，但我们现在使用 ZMQ 扩展来实现这一点。事实证明，ZMQ 和 Akka 的结合确实是一个非常强大和灵活的平台。

# javascript - 第二次打开滑块时停止 jquery 调用函数

> ID：13258031
> 
> 赞同：1
> 
> 时间：2012-11-06T19:31:32.290
> 
> 标签：javascript, jquery

我有一个简单的 jquery 设置来打开一个滑动面板，然后启动第二个函数以在该面板中启动幻灯片放映。当我关闭面板并再次打开它时，它也会再次调用该函数，从而给我重复的滑块。

```
 $(function() {   
  $('a.everyday').click(function() {
    $('#everyday').addClass('open').stop().animate({top:'30px'},{queue:false,duration:400});

  // Activates Blinds jquery image slider 
  $(function() { 

    $('.slideshow').blinds();

   });
  });
}); 
```

所以第二次发生 .click 函数时，我希望 jquery 不启动 .blinds 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:41:33.060

```
$(function() {   
  var show = new MyShow();
    show.initialize();
});

var MyShow = function(){
    this.started = false;
    var that = this;
    this.initialize = function (){
    $('a.everyday').click(function() {
            $('#everyday').addClass('open').stop().animate({top:'30px'},{queue:false,duration:400});
        if(!that.started){
            that.started = true;
            // Activates Blinds jquery image slider
            $(function() {

            $('.slideshow').blinds();

       });
        }else{return;}
  });
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:33:24.937

Oops. Misread needs, here's a better version.

```
$(function(){  
    var opened = 0; 
    $('a.everyday').on('click', function() {
        $('#everyday').addClass('open').stop().animate({top:'30px'},{queue:false,duration:400});
        if(opened < 1){
            $('.slideshow').blinds();
            opened++;
        }

     });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:37:44.653

加载百叶窗应该在您的 document.ready 中，而不是在每个 onclick 处理程序中

```
$(document).ready(function(){
    $('.slideshow').blinds();
}); 
```

# joomla2.5 - 如何更改现有用户的 Joomla 用户组

> ID：13258040
> 
> 赞同：0
> 
> 时间：2012-11-06T19:32:06.487
> 
> 标签：joomla2.5

我们想在下订单时将用户从“注册”更改为自定义用户组“客户”。我一直在修补各种 ACL 功能，但似乎找不到实现它的方法。

我从这个开始，我在某个地方找到了它，但它似乎已经过时了，因为`$authorize->get_group_id`没有找到，这让我认为整个方法一开始就是错误的。

```
$user           = & JFactory::getUser();
$authorize      = & JFactory::getACL();
$newUsertype    = 'Customer';
$user->set('usertype', $newUsertype);
$user->set('gid', $authorize->get_group_id( '', $newUsertype, 'ARO' ));
$user->save(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T20:20:18.320

简单粗暴......

```
$newUserGroup = 9;
$result = JUserHelper::addUserToGroup($user_id, $newUserGroup); 
```

# javascript - 造型 win8 应用程序中的元素 (html/js)

> ID：13258041
> 
> 赞同：0
> 
> 时间：2012-11-06T19:32:09.033
> 
> 标签：javascript, html, css, video, windows-8

如何在win8应用程序的视频元素中更改加载进度条、视频进度条和音量控制的颜色？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:00:44.107

您不能更改元素中进度条的颜色。如果你想改变颜色，例如“静音/音量”按钮，你必须自己创建那个 html 按钮。

# powershell - 使用 powershell 递归提取信息

> ID：13258042
> 
> 赞同：3
> 
> 时间：2012-11-06T19:32:14.893
> 
> 标签：powershell

我正在使用 mediainfo 程序从我的文件中提取信息。我可以在 Powershell 中运行以下命令，它会返回我想要的信息。我不知道该怎么做是递归地遍历每个目录并仅查看某些扩展名。我知道我需要并包含我想要的扩展，但不知道该怎么做。

现在有效的命令是：

```
.\mediainfo.i386 --inform=file://x:\stuff.txt x:\pic >>x:\output.txt 
```

`stuff.txt`具有我正在寻找的参数。并且`x:\pic`是包含更多需要搜索的目录的目录。然后将信息附加到`output.txt`文件中。这适用于 cmd 行，但它会提取我只想查找`.png, .jpg, .bmp`文件的所有内容。

另一个好处是将此脚本放在任何目录中并运行它。我知道我必须将脚本和 txt 文件放在同一个目录中，但是有没有办法像 dos 一样使用 %1.

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:45:40.443

您可以使用过滤器仅返回您正在寻找的项目。例如，这将列出当前文件夹及其子文件夹中的所有 JPG 文件：

```
gci -name -recurse . | ? { $_.Contains(".jpg") } | % { "file: " + $_ } 
```

两个关键部分是：

*   ? -- `Where-Object`，它只将匹配的名称传递给管道中的下一个项目
*   % -- `Foreach-Object`，它对管道中的每个项目做一些事情

正如克里斯蒂安在评论中指出的那样，这更有效：

```
gci -name -recurse . -filter *.jpg | % { "file: " + $_ } 
```

我希望这足以回答你的问题。

# replace - 为什么在 Prototype JS 中使用 child.nodeValue.replace() 时添加 ()

> ID：13258045
> 
> 赞同：1
> 
> 时间：2012-11-06T19:32:23.223
> 
> 标签：replace, prototypejs, parentheses, nodevalue

我正在使用以下 Prototype JS 代码来替换文本：

```
document.body.select('*:not(script)').each(function(el){
  $A(el.childNodes).each(function(child){
    if (child.nodeType === 3) { // only get text nodes
      child.nodeValue = child.nodeValue.replace('an Appointment', 'a Session').replace('Appointment', 'Session').replace('appointment', 'session');
    }
  })
}); 
```

它一直在工作，但由于某种原因，现在在`()`之后添加了 a `Request a Session`，即`Request an Appointment`.

我无法找到问题所在。不会在`()`任何其他替换词之后添加。

您可以在此处查看我的 iframe 的来源：[https](https://acuityscheduling.com/schedule.php?owner=11134756) ://acuityscheduling.com/schedule.php?owner=11134756 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T16:07:39.207

括号似乎是页面内容的一部分。尝试禁用 javascript 并转到该页面 - 你会看到“Pick an Appointment ()”

# javascript - JQuery Mobile 覆盖更改页面

> ID：13258048
> 
> 赞同：0
> 
> 时间：2012-11-06T19:32:31.160
> 
> 标签：javascript, jquery, jquery-mobile

我试图完成的不是在历史记录中记录某些页面，所以后退按钮不会带你回到上一页。

例如，如果该页面是登录页面或注册页面，则不记录，否则记录页面：

```
function changePage(page)
if(page == 'login' || page == 'register') {

$.mobile.changePage( "#" + page , {
    transition: "pop",
    reverse: false,
    changeHash: false
});

} else {
$.mobile.changePage( "#" + page, {
    transition: "pop",
    reverse: true,
    changeHash: true
});
}

}//end change page 
```

但我想以全局方式覆盖 mobile.changePage 函数，以便检查每个函数被调用。谁能给我任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T18:08:37.313

我会将更改页面的功能保存到一个变量中，然后如果在某些情况下您不需要覆盖该功能，您可以直接代理回该功能：

```
var cp = $.mobile.changePage;
$.mobile.changePage = function(to, options) {
    if(youdontneedtoverride) {
        cp(to, options);
    } else {
        ....
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:54:42.807

`changePage()`您可以使用自定义函数替换代码中的所有调用`myChangePage()`并扩展 jQuery Mobile，如下所示：

```
$(document).bind('mobileinit', function(){

  $.mobile.myChangePage = function(page, options){

    if ($.inArray(page.substr(1), ['login', 'register']))
    {
      $.extend(options, {
        reverse: false,
        changeHash: false
      });
    }

    $.mobile.changePage(page, options);

  };
}); 
```

示例用法：

```
$.mobile.myChangePage('#login'); 
```

# javascript - 为什么 e += 1 和 e = e + 1 在 CoffeeScript 中的编译方式不同？

> ID：13258049
> 
> 赞同：7
> 
> 时间：2012-11-06T19:32:35.313
> 
> 标签：javascript, coffeescript, global-variables, compiler-bug

我一直假设`<var> += 1`并且`<var> = <var> + 1`在 JS 中具有相同的语义。
现在，这个 CoffeeScript 代码在应用于全局变量时编译为不同的 JavaScript `e`：

```
a: ->
  e = e + 1
b: ->
  e += 1 
```

注意`b`使用全局变量，而`a`定义局部变量：

```
({
  a: function() {
    var e;
    return e = e + 1;
  },
  b: function() {
    return e += 1;
  }
}); 
```

[自己试试。](http://coffeescript.org/#try:a%3A%20-%3E%0A%20%20e%20%3D%20e%20%2B%201%0Ab%3A%20-%3E%0A%20%20e%20%2B%3D%201%0A)
这是一个错误还是有原因？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T20:09:50.897

我想我会称之为错误或至少是未记录的边缘情况或歧义。我在文档中没有看到任何明确指定何时在 CoffeeScript 中创建新局部变量的内容，因此归结为通常的

> 当当前实现执行**X**时，我们执行**X**并且发生这种情况是因为当前实现这样做。

那类的东西。

似乎触发创建新变量的条件是赋值：看起来 CoffeeScript 在您尝试为其赋值时决定创建一个新变量。所以这：

```
a = ->
  e = e + 1 
```

变成

```
var a;
a = function() {
  var e;
  return e = e + 1;
}; 
```

使用局部`e`变量，因为您正在显式分配`e`一个值。`e`如果您只是在表达式中引用：

```
b = ->
  e += 1 
```

那么 CoffeeScript 不会创建一个新变量，因为它无法识别其中有一个赋值`e`。CS 可以识别表达式，但不够聪明，无法将`e +=1`其视为等效于`e = e + 1`.

有趣的是，当您使用`op=`属于 CoffeeScript 而不是 JavaScript 的表单时，CS 确实会发现问题。例如：

```
c = ->
  e ||= 11 
```

产生一个错误：

> 变量“e”不能用 ||= 赋值，因为它没有被定义

我认为提出类似的投诉`e += 1`是明智和一致的。或者所有`a op= b`表达式都应该扩展到`a = a op b`并被平等对待。

* * *

如果我们查看 CoffeeScript 源代码，我们可以看到发生了什么。如果您稍微浏览一下，您会发现所有`op=`构造最终都会通过[`Assign#compileNode`](https://github.com/jashkenas/coffee-script/blob/master/src/nodes.coffee#L1020)：

```
compileNode: (o) ->
  if isValue = @variable instanceof Value
    return @compilePatternMatch o if @variable.isArray() or @variable.isObject()
    return @compileSplice       o if @variable.isSplice()
    return @compileConditional  o if @context in ['||=', '&&=', '?=']
  #... 
```

因此，`op=`正如预期的那样，对特定于 CoffeeScript 的条件结构进行了特殊处理。快速回顾表明，`a op= b`对于非条件`op`（即,和`op`之外的 s ）直接传递给 JavaScript。那么这是怎么回事？好吧，正如预期的那样，[它会检查您是否没有使用未声明的变量](https://github.com/jashkenas/coffee-script/blob/master/src/nodes.coffee#L1125)：`||``&&``?``compileCondtional`

```
compileConditional: (o) ->
  [left, right] = @variable.cacheReference o
  # Disallow conditional assignment of undefined variables.
  if not left.properties.length and left.base instanceof Literal and 
         left.base.value != "this" and not o.scope.check left.base.value
    throw new Error "the variable \"#{left.base.value}\" can't be assigned with #{@context} because it has not been defined."
  #... 
```

有我们从中看到的错误消息`-> a ||= 11`和一条注释，指出在某处未定义`a ||= b`时不允许您这样做。`a`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T20:25:42.837

这可以从文档中拼凑起来：

*   `=`[:词法范围内](http://coffeescript.org/#lexical_scope)的赋值

    > CoffeeScript 编译器会注意确保您的所有变量都在词法范围内正确声明——您永远不需要`var`自己编写。
    > 
    > `inner`另一方面，在函数内部，不应更改同名外部变量的值，因此**有自己的声明**。

    本节中给出的示例与您的情况完全相同。

*   `+=`和`||=`

    这不是声明，因此上述内容不适用。在它不存在的情况下，`+=`它具有其通常的含义，就像`||=`.

    事实上，由于 CoffeeScript 没有重新定义这些，它们的含义来自 ECMA-262（底层目标语言），它产生了您观察到的结果。

    不幸的是，这种“失败”似乎没有明确记录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T20:54:16.683

最近[在 CoffeeScript 的 Github 问题上讨论了这个问题](https://github.com/jashkenas/coffee-script/issues/2605)。[似乎编译器的当前行为已在上一个问题](https://github.com/jashkenas/coffee-script/issues/1122)上达成一致，或至少已讨论过。

基本上，在 JavaScript 中，表达式`e = e + 1`和`e += 1`总是等价的，因为它们从不引入新变量：它们总是添加`1`到（局部或全局）`e`变量中，否则如果`typeof e === 'undefined'`. 现在，该表达式`var e = e + 1`在 JavaScript 中有效，并将声明`e`变量并将其分配给加`undefined`和`1`( `NaN`，显然 =P) 的值，而`var e += 1`在语法上是无效的。

在 CoffeeScript中，如果之前没有声明，`e = e + 1`可以是一个变量声明，或者如果在当前范围内定义，则只是一个赋值语句，而从不引入新变量（这是一种有点合理的行为，因为增加 a 没有意义以前未声明的变量）。`e``e``e += 1`

这是我理解的当前行为。我认为这有点不幸，`e = e + 1`并且`e += 1`可能意味着不同的东西，但我理解这是隐式变量声明和 JavaScript 范围规则相结合的结果（[这个评论](https://github.com/jashkenas/coffee-script/issues/2605#issuecomment-10095685)可能是相当有偏见的解释）。

# ruby-on-rails - 在 psql 数据库中保存 URL 字符串列导致 Rails 3.2 挂起

> ID：13258050
> 
> 赞同：0
> 
> 时间：2012-11-06T19:32:37.157
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

例如，尝试保存图像 url

```
http://ecx.images-amazon.com/images/I/51d2Qu4RGFL._BO2,204,203,200_PIsitb-sticker-arrow-click,TopRight,35,-76_AA300_SH20_OU01_.jpg 
```

我的迁移：

```
t.string   "promo_url" 
```

我的表格：

```
<i class="icon-link"></i><%= f.text_field :promo_url, autocomplete: "off", placeholder: "Image URL" %> 
```

在 Event#Create 上莫名其妙地无声地挂起：

```
@event.save 
```

痕迹：

```
Request
User Load (0.6ms)  SELECT "users".* FROM "users" WHERE "users"."id" = 12 ORDER BY name LIMIT 1
Event Load (0.4ms)  SELECT "events".* FROM "events" WHERE "events"."id" = $1 LIMIT 1  [["id", "64"]]
(0.1ms)  BEGIN 
```

感谢您的帮助——我以前从未见过 Rails 服务器像这样挂起。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:40:47.973

我的 url 验证对于域 url 是准确的，但不是图像 url。

```
@url = /^((https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?)?$/ 
validates :link, :promo_url :format => { :with => @url }, allow_blank:true 
```

# ruby-on-rails - 更新 has_one 关系模型

> ID：13258051
> 
> 赞同：0
> 
> 时间：2012-11-06T19:32:42.807
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

我有两个模型

```
class User < ActiveRecord::Base
  has_one :user_information, :dependent => :destroy
  attr_accessible :email, :name
end 
```

和

```
class UserInformation < ActiveRecord::Base
  belongs_to :user
  attr_accessible :address, :business, :phone, :user_id
end 
```

创建用户后，我使用控制器的 new 和 create 操作创建了用户信息：

```
 def new
         @user = User.find(params[:id])
         @user_information = @user.build_user_information

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @user_information }
    end
  end

def create
    @user_information = UserInformation.new(params[:user_information])

    respond_to do |format|
      if @user_information.save
        format.html { redirect_to @user_information, notice: 'User information was successfully created.' }
        format.json { render json: @user_information, status: :created, location: @user_information }
      else
        format.html { render action: "new" }
        format.json { render json: @user_information.errors, status: :unprocessable_entity }
      end
    end
  end 
```

一切正常，但是当我尝试更新记录时出现此错误：

```
RuntimeError in User_informations#edit

Called id for nil, which would mistakenly be 4 -- if you really wanted the id of nil, use object_id 
```

这是我的 user_information 控制器的编辑和更新操作

```
 def edit
        @user_information = UserInformation.find(params[:id])
      end 

  def update
    @user_information = UserInformation.find(params[:id])

    respond_to do |format|
      if @user_information.update_attributes(params[:user_information])
        format.html { redirect_to @user_information, notice: 'User information was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render action: "edit" }
        format.json { render json: @user_information.errors, status: :unprocessable_entity }
      end
    end
  end 
```

我以为我只需要找到记录和编辑，但没有。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:45:00.707

尝试`belongs_to :user`从`UserInformation` [http://guides.rubyonrails.org/association_basics.html#the-has_one-association中删除](http://guides.rubyonrails.org/association_basics.html#the-has_one-association)

**讨论后更新**：

`@user`您的链接助手应该在第一个位置接受两个参数。（您可以从 的结果中看到它`rake routes | grep user_information`）

```
<%= link_to 'Edit', edit_user_information_path(@user, @user_information) %> 
```

其次在你的控制器中

```
params[:id] # => @user.id
params[:user_information_id] # => @user_information.id 
```

所以你应该`find`改为

```
@user_information = UserInformation.find(params[:user_information_id]) 
```

# android - 两个按钮在 Android 上拉伸到全屏

> ID：13258054
> 
> 赞同：2
> 
> 时间：2012-11-06T19:32:48.417
> 
> 标签：android, layout, fullscreen, android-relativelayout, grid-layout

我认为这很容易，但没有找到解决我的问题的方法：我只想要两个按钮，一个在另一个之上。两者都具有屏幕宽度，都具有一半屏幕高度，因此它们填满了屏幕。我尝试了不同的 RelativeLayout 和 GridView 解决方案，但一切都出错了。

有人对我有解决方案吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T19:37:18.390

```
LinearLayout

    android:id="@+id/layout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button

        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.5"
        android:text="One" />

    <Button

        android:id="@+id/button2"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.5"
        android:text="Two" />

</LinearLayout> 
```

关键点是 layout_weight 和 0dp 的高度。布局权重划分子控件之间的剩余空间，并且由于每个按钮都是零像素，因此它们每个都被赋予 50% 的可用高度 - 在这种情况下，如果 LinearLayout 是根，则为全屏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:42:18.080

尝试这个：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <Button
        android:id="@+id/button2"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:text="Button" />

    <Button
        android:id="@+id/button1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_weight="1"
        android:text="Button" />

</LinearLayout> 
```

# regex - Need guidance in dealing with null strings

> ID：13258062
> 
> 赞同：1
> 
> 时间：2012-11-06T19:33:23.777
> 
> 标签：regex, tcl

I have an expression like `/a/b/c.d/f.` I need all the characters in between `/` or `.`. When I tried to split them using `split` command, I am getting the result as `{} a b c d f {}`. How can I avoid these null strings? Is there a way to get this done using `regsub`?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:41:43.440

那些空字符串（它们*不是*空值）表示字符串的开头和结尾有*分隔符。*如果你有两个相邻的分隔符，你也会得到它们；该`split`命令实际上面向处理记录，而不是更“普通”文本中的单词。

提取非分隔符部分的最简单的方法之一（注意：我已经在它的头上翻转了问题）是使用`regexp -all -inline`，它将返回所有匹配事物的列表：

```
set pieces [regexp -all -inline {[^/.]+} "/a/b/c.d/f."] 
```

对此要稍微小心：如果您有捕获子正则表达式，它们也会在您使用`-all -inline`选项时返回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:02:42.350

使用 regsub 我得到了所需的结果。它是 "regsub -all {(/)|(.)} $a "\t" result" 这没有为我提供任何空字符串

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:18:34.920

我做了两种不同的方法：

1.  [匹配并保存它们](http://regex101.com/r/bE0nU8)
2.  [更换它（不完全是 tcl）](http://regexr.com?32niu)

我希望它对你有点帮助，如果你想添加大写，`A-Z`也可以使用。

# objective-c - iOS GCDAsyncSocket writeData 导致 EXC_BAD_ACCESS

> ID：13258065
> 
> 赞同：1
> 
> 时间：2012-11-06T19:33:31.880
> 
> 标签：objective-c, xcode, gcdasyncsocket

当点击播放按钮时，它在 Xcode 中崩溃并显示消息“线程 6 GCDAsyncSocket 0 objc_msgSend”。有时它只是工作，但大多数时候我得到这个错误。有什么线索吗？

快照：http: [//i.imgur.com/G2Nv4.png](http://i.imgur.com/G2Nv4.png)

以下是代码行：

```
- (void)viewDidLoad {
    [self initSocket];
}

-(void) initSocket
{
    dispatch_queue_t mainQueue =  dispatch_get_main_queue();
    asyncSocket = [[GCDAsyncSocket alloc] initWithDelegate:self delegateQueue:mainQueue];
    [self connectToVLC];
}

-(void) connectToVLC
{
    NSString *host = @"192.168.0.8";
    uint16_t port = 8080;
    NSError *error = nil;

    if (![asyncSocket connectToHost:host onPort:port error:&error]){
        NSLog(@"unable connect to VLC server");
    }else{
        NSLog(@"connected to VLC server");
    }
}

-(IBAction) btnPlayTapped
{
    [self writeCommand:@"stop" tag:TAG_NONE];
    [self writeCommand:@"repeat off" tag:TAG_NONE];
    [self writeCommand:@"loop off" tag:TAG_NONE];
    [self writeCommand:@"add /abc.wav" tag:TAG_NONE];
    [self writeCommand:@"play" tag:TAG_PLAY];
}

-(void) writeCommand:(NSString *)cmd tag:(long)theTag
{
    NSMutableData *data = [NSMutableData dataWithData:[cmd dataUsingEncoding:NSUTF8StringEncoding]];
    [data appendData:[GCDAsyncSocket CRLFData]];
    [asyncSocket writeData:data  withTimeout:-1 tag:theTag];
}

- (void)socket:(GCDAsyncSocket *)sock didWriteDataWithTag:(long)tag
{
    if(tag==TAG_PLAY){
        //handle rest operation here
    }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T00:29:21.527

通过在 writeCommand 方法中保留数据对象解决：

```
-(void) writeCommand:(NSString *)cmd tag:(long)theTag
{
    NSMutableData *data = [NSMutableData dataWithData:[cmd dataUsingEncoding:NSUTF8StringEncoding]];
    [data appendData:[GCDAsyncSocket CRLFData]];
    [data retain];//release it in dealloc
    [asyncSocket writeData:data  withTimeout:-1 tag:theTag];
} 
```

# ruby-on-rails - work around Ruby's broken URI.parse, follow redirects

> ID：13258068
> 
> 赞同：2
> 
> 时间：2012-11-06T19:33:39.093
> 
> 标签：ruby-on-rails, ruby, httparty, rest-client, faraday

I am using Ruby to scrape webpages that sometimes return redirects which I want to follow. There is many Ruby gems that do that, but there is a problem:

Ruby's `URI.parse` explodes on some URIs that are technically invalid but work in browsers like `"http://www.google.com/?q=<>"`

```
URI.parse("http://www.google.com/?q=<>")               #=> error

require 'addressable/uri'
Addressable::URI.parse("http://www.google.com/?q=<>")  #=> works 
```

All the HTTP client libraries I have tried (HttParty, Faraday, RestClient) break when they encounter such a URI in a redirect (this is on ruby 1.9.3)

### rest-client:

```
require 'rest-client'
RestClient.get("http://bitly.com/ReeuYv") #=> explodes 
```

### faraday:

```
require 'faraday'
require 'faraday_middleware'
Faraday.use(FaradayMiddleware::FollowRedirects)
Faraday.get("http://bitly.com/ReeuYv")    #=> explodes 
```

### httparty:

```
require 'httparty'
HTTParty.get("http://bitly.com/ReeuYv")   # => explodes 
```

### open-uri:

```
require 'open-uri'
open("http://bitly.com/ReeuYv")           # => explodes 
```

What can I do to make this work?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:32:17.143

Mechanize 是我最喜欢的网页抓取工具。

> Mechanize 库用于自动与网站交互。Mechanize 自动存储和发送 cookie，跟踪重定向，并且可以跟踪链接和提交表单。可以填充和提交表单字段。Mechanize 还会记录您访问过的网站作为历史记录。

```
require 'mechanize'
agent = Mechanize.new
page = agent.get('http://bitly.com/ReeuYv')
puts page.uri.to_s
=> http://www.google.com/?q=%3C%3E 
```

它使用 nokogiri 来解析 html，因此每个`Mechanize::Page`对象都可以被视为 nokogiri 对象，因此您可以获得 html 之类的部分

```
puts page.form('f').q
=> <> 
```

最后一部分可能看起来像黑魔法，但你真的需要自己尝试`pp page`。它使 HTML 很容易被抓取。

[这](http://mechanize.rubyforge.org/GUIDE_rdoc.html)是入门指南和文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T20:13:34.240

[台风](https://github.com/typhoeus/typhoeus)作品：

```
require 'typhoeus'
Typhoeus::VERSION #=> "0.5.0.rc" 
Typhoeus.get("http://bitly.com/ReeuYv", followlocation: true).body 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T19:51:01.473

[遏制](https://github.com/taf2/curb)似乎工作：

```
require 'curb'
Curl.get("http://bitly.com/ReeuYv") { |c| 
  c.follow_location = true 
}.body_str  #=>  works 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T20:02:06.240

这将起作用：

```
uri = URI.escape "http://www.google.com/?q=<>"

#=> "http://www.google.com/?q=%3C%3E"

URI.parse(uri) #=> no error 
```

# javascript - 使用 jquery 设置所有 css3 背景图像

> ID：13258069
> 
> 赞同：4
> 
> 时间：2012-11-06T19:33:39.703
> 
> 标签：javascript, jquery, html, css

嗨，我想`background-image`使用 jquery 为所有浏览器设置：

```
background-image:linear-gradient(green, blue); /* Norme W3C */
background-image:-moz-linear-gradient(green, blue); /* Firefox */
background-image:-webkit-gradient(linear, green, blue); /* Chrome, Safari */
background-image:-o-linear-gradient(green, blue); /* Opera */
background-image:-ms-linear-gradient(green, blue); /* IE */ 
```

我这样设置：

`$("#"+elmt).css("background-image" , "linear-gradient("+hex+","+$('#test2').val()+")" );`

仅适用于 W3C，但它适用于 firefox，但不适用于 Chrome。

如何设置所有这些设置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T19:37:12.337

[**来自 jQuery 1.8 博客的发布**](http://blog.jquery.com/2012/08/09/jquery-1-8-released/)

*自动 CSS 前缀：当您在 .css() 或 .animate() 中使用 CSS 属性时，我们将为该浏览器使用正确的前缀属性（如果合适）。例如取 .css("user-select", "none"); 在 Chrome/Safari 中，我们将值设置为“-webkit-user-select”，Firefox 将使用“-moz-user-select”，IE10 将使用“-ms-user-select”。*

升级到最新版本，这应该会自动处理。

**编辑**

这应该会自动工作，以下*应该*在 jQuery 1.8 中实现，

```
var cssPrefixString = {};
var cssPrefix = function(propertie) {
    if (cssPrefixString[propertie] || cssPrefixString[propertie] === '') return cssPrefixString[propertie] + propertie;
    var e = document.createElement('div');
    var prefixes = ['', 'Moz', 'Webkit', 'O', 'ms', 'Khtml']; // Various supports...
    for (var i in prefixes) {
        if (typeof e.style[prefixes[i] + propertie] !== 'undefined') {
            cssPrefixString[propertie] = prefixes[i];
            return prefixes[i] + propertie;
        }
    }
    return false;
}; 
```

用途

```
var cssTransform = cssPrefix('Transform'); // "MozTransform" or "WebkitTransform"
if (cssTransform ) {
    var cssProp = {};
    cssProp['border'] = '1px solid rgba(0, 0, 0, .5)';
    cssProp[cssPrefix('Transform')] = 'rotate(20deg)';
    cssProp[cssPrefix('borderRadius')] = '5px'; // Keep the camelCaze (jQuery like)
    cssProp[cssPrefix('boxShadow')] = '2px 2px 6px grey';
    $('div#myDiv').css(cssProp);
    // console.log(cssProp);
} 
```

[来自链接——一个工作的jsFiddle](http://jsfiddle.net/molokoloco/f6Z3D/)

因此，这两种方法中的一种应该适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:38:11.643

您可以改为使用**-prefix-free**： http: [//leaverou.github.com/prefixfree/](http://leaverou.github.com/prefixfree/)

它会动态地将供应商前缀添加到您的 CSS 中。

# java - Android BackupManager 在卸载或其他设备后无法恢复？

> ID：13258075
> 
> 赞同：1
> 
> 时间：2012-11-06T19:33:56.120
> 
> 标签：java, android, android-backup-service

我正在使用`BackupManager`备份`SharedPreferences`到云端。现在，当我在单个设备上使用它并且只执行重新安装而不是完全卸载时，这可以按预期工作。为此，我正在清除擦除首选项的数据，而不是从 Eclipse 重新安装应用程序。如果我首先卸载该应用程序并在重新安装后恢复调用报告没有要恢复的数据。当我在另一台设备上安装应用程序时也会发生同样的情况。

据我了解，无论应用程序被重新安装还是全新安装，我都希望数据能够恢复到任何设备。让我知道发布代码是否会有所帮助，但我认为因为它正在工作，我可能只是误解了该服务应该用于什么以及它是如何工作的。我正在尝试备份用户设置以及他们在搜索字段中输入的一些信息。我希望这些数据能够跟随用户使用新设备，或者如果用户卸载应用程序并在以后重新安装。请让我知道是否`BackupManager`不是完成此操作的正确工具。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:22:54.157

我从 Android Advocate 的话中得知：

> 通常，如果从 Play 商店重新安装应用程序，似乎`BackupManager`只有备份应用程序数据才能可靠，这些数据稍后将在同一设备上恢复。
> 
> 如果您想跨多个设备进行备份同步，那么您可以尝试使用[Google Drive API](https://developers.google.com/drive/v1/reference/)，而不是，并且[Google I/O 2012 上关于该主题](https://developers.google.com/events/io/sessions/gooio2012/705/)`BackupManager`的非常有用的会话。

# android - Scroll Postion not being saved in ListViews on 2.3 and lower devices?

> ID：13258077
> 
> 赞同：0
> 
> 时间：2012-11-06T19:34:02.867
> 
> 标签：android

I noticed that in my app when I start a new activity from my ListActivity the scroll position does not get saved when I return to the ListActivity. I am automatically brought to the top of the list. However, the position of my ListView is automatically saved on my new 4.0 and above devices. Is this a known issue or would it be something I am doing within my application?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:02:31.627

发现出了什么问题。在我的 onResume 中，我正在修改列表视图的抖动设置，这导致它无法保存滚动位置。我删除了它，它工作正常。不知道为什么它可以在较新的设备上运行:(如果有人有任何想法，请告诉我。

# python - Django-Rest-Framework 中缺少引导资源

> ID：13258087
> 
> 赞同：13
> 
> 时间：2012-11-06T19:34:36.637
> 
> 标签：python, django-rest-framework

我正在使用新的[django-rest-framework 2.0](http://django-rest-framework.org/topics/rest-framework-2-announcement.html "Django REST 框架 2.0")并且一直在按照教程创建基于休息的 API。API 现在已经完成，但是我无法加载引导资源，所有资源都返回 404 Not Found 从 Django。

我觉得应该从 django-rest-framework 模块的静态目录加载资源，当我在 'python2.7/dist-packages/rest_framework/static/rest_framework' 上列出时，我看到了 css、js 和 img 目录我需要，但我无法在文档中找到任何地方显示如何将 CSS 从模块链接到我的项目。

这里最好的做法是什么？我应该下载源代码并将文件夹复制到我的 /static 目录中吗？符号链接是不可能的，因为我需要将项目签入中央仓库。想法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-06T20:19:59.187

首先，我假设您的意思是引导静态资源没有为可浏览的 API 加载？（虽然我猜可能是你试图在项目的其他地方使用它们？）

如果您正在运行，`DEBUG=True`它们应该自动提供服务，但是一旦您运行，`DEBUG=False`您需要确保运行`manage.py collectstatic`并确保您的`STATIC_ROOT`和`STATIC_URL`设置正确。

Django 的静态文件文档应该有所帮助：[https ://docs.djangoproject.com/en/dev/howto/static-files/](https://docs.djangoproject.com/en/dev/howto/static-files/)

如果您仍然没有任何运气，我建议您仔细检查您的 Django 版本（支持 1.3 及更高版本）和 REST 框架版本（从版本 2 开始的任何版本），并确保您逐步完成教程-step，特别注意项目设置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-13T08:59:43.507

如果您使用 Heroku，您需要确保您使用的是入门文档 ( [https://devcenter.heroku.com/articles/getting-started-with-django](https://devcenter.heroku.com/articles/getting-started-with-django) ) 中的配置。请参阅“settings.py”和“wsgi.py”部分。我遇到了同样的问题，这解决了它。

设置.py

```
import os
BASE_DIR = os.path.dirname(os.path.abspath(__file__))
STATIC_ROOT = 'staticfiles'
STATIC_URL = '/static/'
STATICFILES_DIRS = (
    os.path.join(BASE_DIR, 'static'),
) 
```

wsgi.py

```
from django.core.wsgi import get_wsgi_application
from dj_static import Cling
application = Cling(get_wsgi_application()) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-09-15T10:44:48.487

未找到 CSS。解决方法是使丢失的 css 文件（在浏览器控制台中看到的文件为 404）可用。就是这样。

您可以使 css 文件在后端（需要一些调整）或前端（比较容易）中访问。

如果您有单独的前端和后端（restful）设置，例如 Django-Django REST 框架和 AngularJS，则此解决方案非常有效。

假设 django 后端运行在 8000，前端运行在 9000。

*   frontend.example.com 加载运行在 9000 的前端 JS 应用程序

*   backend.example.com 加载运行在 8000 的 django 应用程序

在`settings.py`

```
import os
BASE_DIR = os.path.dirname(os.path.dirname(__file__))

STATIC_URL = 'http://frontend.example.com/static/'
STATIC_ROOT = os.path.join(BASE_DIR, 'static') 
```

然后在终端

```
$ python manage.py collectstatic 
```

然后转到您拥有该文件夹的目录`static`

```
$ cp -rf static/* /frontend-code-directory/static/ 
```

完毕。

我所做的基本上是将所有 django 应用程序的 css 复制到前端。前端很容易做到这一点，因为前端已经是静态文件的集合。

# vb.net - call method from other application

> ID：13258088
> 
> 赞同：0
> 
> 时间：2012-11-06T19:34:36.453
> 
> 标签：vb.net, methods, vb6, call

I have application 'a' (vb6) and application 'b' (vb.net). What is the best way to call method in 'a' using 'b' source code? I mean 'a' is recording calling numbers and when particular number calls it should change application's 'b' panel text (name). Yes, app 'a' could save all calling numbers to text file and 'b' could check for that particular number every one second or so, but it would be not efficient at all. Any ideas?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T03:03:10.513

一种方法是使用套接字。在项目 A 中放置一个插座，在项目 B 中放置另一个插座，并允许它们相互交谈。这样，每次数据从 Socket 发送到另一个时都会引发一个事件

# iphone - 无法将 NSString 保存到 Internet 上的 .txt 文件

> ID：13258092
> 
> 赞同：-2
> 
> 时间：2012-11-06T19:35:09.570
> 
> 标签：iphone, ios, xcode, nsstring

txt 文件在我的域中，我无法保存到其中，这是我的代码：

```
NSString *countstring = [NSString stringWithContentsOfURL:[NSURL URLWithString:@"http://www.DomainName.com/MyAppName/count.txt"] encoding:NSUTF8StringEncoding error:nil];
        int countInt = [countstring intValue];
        NSLog(@"count string is:%i",countInt);
        int newCount = countInt + 1;
        NSLog(@"new count is: %i",newCount);
        NSString *newString = [NSString stringWithFormat:@"%i",newCount];
        [newString writeToURL:[NSURL URLWithString:@"http://www.DomainName.com/MyAppName/count.txt"] atomically:NO encoding:NSUTF8StringEncoding error:nil]; 
```

（我审查了我的域名和应用程序名称）
日志是：

```
count string is:0
new count is: 1 
```

哪个是对的！但是当我在域上打开文件时它仍然是 0。我该如何修复它？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:38:22.770

您无法从应用程序将某些内容保存到 Internet 上的文件中。您必须使用服务器端代码来更新文件。

尝试使用此处的答案使用 Web 服务更新文件：

[iOS：如何执行 HTTP POST 请求？](https://stackoverflow.com/questions/5537297/ios-how-to-perform-a-http-post-request)

这还要求您编写某种 Web 服务供您的应用程序调用，这将更新文件。这比您尝试的要复杂得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:38:31.487

这不是这样的。您不能写入您在网络上随机找到的这个和那个 URL？通常的方法是使用数据发出 HTTP POST 请求，然后使用一些服务器端脚本来实际更新文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:43:53.243

@H2CO3 是正确的，通常的方法是 HTTP 帖子。我还没有尝试过，但是直接将字符串写入文件应该可以，但是您的 URL 必须采用以下形式。`file://`在您的情况下，它是 http，它不起作用！

# c# - How to log Exceptions in Nlog2?

> ID：13258094
> 
> 赞同：0
> 
> 时间：2012-11-06T19:35:21.897
> 
> 标签：c#, .net, nlog

I am a bit confused what way is the right way to log exceptions

```
 Log.Fatal(exception format, args); 
```

or

```
 logger.FatalException("Got exception.", ex); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:42:21.100

似乎主要是一个偏好问题。我倾向于使用该`log.FatalException("blah", ex)`模型有两个原因。

1.  这显然就是它的用途。
2.  您可以控制异常在 nlog 配置中的显示格式。请参阅：[https ://github.com/nlog/nlog/wiki/How-to-log-exceptions](https://github.com/nlog/nlog/wiki/How-to-log-exceptions)

# java - Blackberry dialog launched on PhoneListener's callInitiated method

> ID：13258096
> 
> 赞同：0
> 
> 时间：2012-11-06T19:35:33.237
> 
> 标签：java, blackberry, dialog, listen

Hy.

I have a situation with an UiApplication for Blackberry 5.0.0 OS that may be of interest to the communnity or with wich someone could help me.

My application implements the PhoneListener interface to be notified when an outbound call is detected on the device (callInitiated method). Upon that, the app simulates a disconnect key press to cancel the call. Then, a Dialog is launched and some action is required on the user side...

All works well when the number is dialed through the phone app, the dialog is launched, the phone app dissapears and the dialog remains on screen waiting for user action. But if the user dials through the contacts list, speed dial or numbers in web pages, the dialog appears but quickly dissapears when the phone app dissapears (after the call is artificially disconnected).

I'll be paciently awaiting for a response from someone that can shed some light on this... thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T13:54:12.023

解决方案：

必须以另一种方式创建对话框。顺便说一句，我正在使用 Dialog.ask。

```
Screen screen = null;
synchronized(UiApplication.getEventLock()){ 

    UiEngine ui = Ui.getUiEngine();
    screen = new Dialog("<dialog text>", <options>, <values>, 0, Bitmap.getPredefinedBitmap(Bitmap.EXCLAMATION));
    ui.pushGlobalScreen(screen, 1, UiEngine.GLOBAL_MODAL);

}
int appMethodAsked = ((Dialog) screen).getSelectedValue(); 
```

需要注意的是，此代码工作的一个关键细节是传递给 pushGlobalScreen 方法的 UiEngine.GLOBAL_MODAL 值。没有这个，将发生与问题相同的事情。

# vb.net - VB.NET 中的 API 调用比 VB6 慢得多

> ID：13258103
> 
> 赞同：3
> 
> 时间：2012-11-06T19:36:07.353
> 
> 标签：vb.net, performance, vb6

有人能解释一下为什么使用 VB6 比使用 VB.NET 更快地返回相同的 API 调用吗？

这是我的VB6代码：

```
Public Declare Function GetWindowTextLength Lib "user32" Alias "GetWindowTextLengthA" (ByVal hWnd As Long) As Long
Public Declare Function GetWindowText Lib "user32" Alias "GetWindowTextA" (ByVal hWnd As Long, ByVal lpString As String, ByVal cch As Long) As Long

Public Function GetWindowTextEx(ByVal uHwnd As Long) As String

Dim lLen&
lLen = GetWindowTextLength(uHwnd) + 1

Dim sTemp$
sTemp = Space(lLen)

lLen = GetWindowText(uHwnd, sTemp, lLen)

Dim sRes$
sRes = Left(sTemp, lLen)

GetWindowTextEx = sRes

End Function 
```

这是我的 VB.NET 代码：

```
Private Declare Function GetWindowText Lib "user32" Alias "GetWindowTextA" (ByVal hwnd As Integer, ByVal lpWindowText As String, ByVal cch As Integer) As Integer

    Dim sText As String = Space(Int16.MaxValue)
    GetWindowText(hwnd, sText, Int16.MaxValue) 
```

我运行每个版本 1000 次。

VB6 版本需要 2.04893359351538 毫秒。VB.NET 版本需要 372.1322491699365 毫秒。

Release 和 Debug 版本都差不多。

这里发生了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T22:48:01.540

不要使用 *A 版本，只是跳过后缀，使用 StringBuilder 代替 String：

```
Private Declare Auto Function GetWindowText Lib "user32" (ByVal hwnd As Integer, ByVal lpWindowText As StringBuilder, ByVal cch As Integer) As Integer
Private Declare Function GetWindowTextLength Lib "user32" (ByVal hwnd As Integer) As Integer

Dim len As Integer = GetWindowTextLength (hwnd)
Dim str As StringBuilder = new StringBuilder (len)
GetWindowText (hwnd, str, str.Capacity) 
```

# javascript - 使用查询字符串和 javascript/jquery 将 ID 值传递给 SharePoint 对话框

> ID：13258104
> 
> 赞同：0
> 
> 时间：2012-11-06T19:36:08.087
> 
> 标签：javascript, jquery, sharepoint, query-string

如果我使用以下内容：

```
function openFSCUploadDialog()
{
    var diaOptions = SP.UI.$create_DialogOptions();
    diaOptions.url = "<server>/mySite/_layouts/Upload.aspx?List={E2489E65-BE6T-4569-BE36-FCE8D47DG8EB}&IsDlg=1&ReqID=1";
    diaOptions.width = 700;
    diaOptions.height = 310;
    diaOptions.title = "Trying to Pass the Value in the Dialog URL";
    diaOptions.dialogReturnValueCallback = Function.createDelegate(null, CloseCallBack);
    SP.UI.ModalDialog.showModalDialog(diaOptions);
} 
```

打开网站集的 upload.aspx 对话框。我正在尝试使用 javascript/jquery 并从我在上面的 dialog.url 中传递的查询字符串中读取值。我不确定如何使用 javascript / jquery 访问 upload.aspx 背后代码中的值。

我真的很感激这方面的任何背景/帮助。

编辑：是的，对不起，我想访问`$(document).ready`表单中的值。

# stata - 有序logit模型中的双向聚类，限制学生以减轻异常值影响

> ID：13258109
> 
> 赞同：0
> 
> 时间：2012-11-06T19:36:57.103
> 
> 标签：stata

我有一个有序的因变量（1 到 21）和连续的自变量。我需要运行有序 logit 模型，按公司和时间进行聚类，消除 Studentized Residuals <-2.5 或 > 2.5 的异常值。我只知道`ologit`命令和命令的一些选项；但是，我不知道如何进行双向聚类并使用学生化残差消除异常值：

```
ologit rating3 securitized retained, cluster(firm) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T23:09:22.230

据我所知，双向聚类只扩展到了一些估计命令（如 scc 中的 ivreg2 和[此处](http://www.kellogg.northwestern.edu/faculty/petersen/htm/papers/se/se_programming.htm)的 tobit/logit/probit ）。您可以轻松地自行消除异常值，并且没有自动化的方法可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:41:42.687

使用 Dimitriy 给出的链接（Mitchell Petersen 的网站）中的 logit2.ado 并修改它以使用 ologit 命令。只需一点点试错就足够简单了。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-12T17:43:01.777

如果您有一个包含 21 个序数类别的变量，那么将其视为连续类别将毫无问题。如果你想以某种方式支持这一点，我写了一篇关于用序数变量测量福利的论文，请参阅[DOI:10.1111/j.1475-4991.2008.00309.x](http://dx.doi.org/10.1111/j.1475-4991.2008.00309.x)。然后你可以使用`ivreg2`. 您应该意识到与该估计器有关的所有问题，特别是它隐含地假设相关性完全由这种双向结构建模，并且对公司`i`和`j`时间的观察结果与`t`和`s`绝对不相关。有时，这是一个强有力的假设——即纽约和新泽西在 2010 年可能相关，但纽约 2010 与新泽西 2009 不相关。`i!=j``t!=s`

我不知道您所说的序数异常值是什么意思。一定有人堆积了一堆论文建议（或更糟糕的分析请求），而没有真正尝试理解每一点。

# validation - 为什么这种自定义 Yii 验证消息不起作用？

> ID：13258119
> 
> 赞同：1
> 
> 时间：2012-11-06T19:37:25.817
> 
> 标签：validation, yii

它没有工作

```
array('fio', 'length', 'min'=>5, 'max'=>30, 'message' => 'custom'), 
```

但这项工作

```
array('fio, login, password', 'required', 'message' => '{attribute} custom'), 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:57:56.877

对于`CStringValidator`，还有另一个[属性称为`is`](http://www.yiiframework.com/doc/api/1.1/CStringValidator#is-detail "http://www.yiiframework.com/doc/api/1.1/CStringValidator#is-detail")指定字符串的确切长度，并且该`message`属性仅在`is`输入不满足该属性时使用。

看看[源代码](https://github.com/yiisoft/yii/blob/1.1.12/framework/validators/CStringValidator.php#L99 "https://github.com/yiisoft/yii/blob/1.1.12/framework/validators/CStringValidator.php#L99")，这将变得清晰：

```
if($this->is!==null && $length!==$this->is)
{
    $message=$this->message!==null?$this->message:Yii::t('yii','{attribute} is of the wrong length (should be {length} characters).');
    $this->addError($object,$attribute,$message,array('{length}'=>$this->is));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:43:42.367

对于这种类型的验证器：

> 除了用于设置自定义错误消息的 {@link message} 属性之外，* CStringValidator 还有一些您可以设置的自定义错误消息，它们对应于不同的 * 验证场景。要在字符串太短时定义自定义消息， * 您可以使用 {@link tooShort} 属性。与 {@link tooLong} 类似。消息可能包含 * 占位符，这些占位符将替换为实际内容。除了被所有验证器识别的“{attribute}” * 占位符（参见 {@link CValidator}），CStringValidator 还允许指定以下 * 占位符：

# bash - Shell Scripting 不需要的 '?' 文件名末尾的字符

> ID：13258123
> 
> 赞同：10
> 
> 时间：2012-11-06T19:37:35.457
> 
> 标签：bash, shell, cp

我得到一个不需要的“？” 执行此操作时，在我的文件名末尾：

```
emplid=$(grep -a "Student ID" "$i".txt  | sed 's/(Student ID:  //g' | sed 's/)Tj//g' ) 
 #gets emplid by doing a grep from some text file
echo "$emplid"   #prints employee id correctly 
cp "$i" "$emplid".pdf  #getting an extra '?' character after emplid and before .pdf 
```

即，我没有得到像 123456.pdf 这样的文件名，而是得到 123456?.pdf 。如果 echo 打印正确，为什么会发生这种情况？如何删除尾随问号字符？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-06T19:45:41.420

听起来您的脚本文件具有 DOS 样式的行结尾（\r\n）而不是 unix 样式（只是 \n）——当脚本采用这种格式时，\r 被视为命令的一部分。在这种情况下，它被包含在 $emplid 中，因此也包含在文件名中。

许多平台支持`dos2unix`将文件转换为 unix 样式的行尾的命令。一旦转换完成，请坚持使用支持 unix 样式文本文件的文本编辑器。

编辑：我假设问题行结尾在 shell 脚本中，但看起来它们在输入文件 ("$i".txt) 中。您可以在输入文件上使用 dos2unix 来清理它和/或在脚本中的 sed 命令中添加清理步骤。顺便说一句，您可以使用 -e 选项让一个 sed 实例应用多个编辑：

```
emplid=$(grep -a "Student ID" "$i".txt  | sed '-e s/(Student ID:  //g' -e 's/)Tj//g' -e $'s/\r$//' ) 
```

我建议*不要*使用`sed 's/.$//'`-- 如果文件是 unix 格式，那将切断文件名的最后一个字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T21:31:12.057

使用 file 命令来检测它是纯 unix 还是与 DOS 混合。

DOS 文件：ASCII 文本，**带有 CRLF 行终止符**

Unix 文件是纯 ASCII 文件。

# jquery - 如何在跨度内换行嵌套在锚标记中的文本？

> ID：13258124
> 
> 赞同：0
> 
> 时间：2012-11-06T19:37:35.653
> 
> 标签：jquery, html, dom

我有以下标记：

```
<div class="print">
  <p><a href="/">Printable Format</a></p>
</div> 
```

但是，我想将“可打印格式”包装在：

```
<div class="print">
  <p><a href="/"><span>Printable Format</span></a></p>
</div> 
```

我看过几个例子，但它们似乎没有完成我想要的。

先感谢您！

*   乙

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T19:41:01.173

使用[.contents()](http://api.jquery.com/contents/)和[.wrap()](http://api.jquery.com/wrap/)

```
// 
$('.print').find('a').contents().wrap('<span/>')
// same as $('.print a').contents().wrap('<span/>') 
```

或[wrapInner()](http://api.jquery.com/wrapInner/) - 做同样的事情

```
$('.print').find('a').wrapInner('<span/>')
// same as $('.print a').wrapInner('<span/>') 
```

@Alfo 的纯 JS 示例

```
// returns an array of elements
var dtag = document.getElementsByClassName('print');
// gets first anchor tag inside first class=print
var atag = dtag[0].getElementsByTagName('a')[0];
// add span tag
atag.innerHTML = '<span>' + atag.innerHTML+ '</span>'; 
```

如果要执行多个元素，则必须遍历数组

[http://jsfiddle.net/KkAkk/](http://jsfiddle.net/KkAkk/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:40:47.570

```
$('.print a').html(function(i, h){
     return '<span>' + h + '</span>';
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:42:10.030

假设您想使用 jQuery 执行此操作：

```
var $span = $( "<span></span>" ), // Create element
    $link = $( '.print > p > a' );

$span.text( $link.text() );
$link.html( $span ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T19:47:06.820

```
$('.print a').wrapInner('<span/>');​​​​​​​​​​​​ 
```

将产生：

```
<a href="/"><span>Printable Format</span></a> 
```

这是 jQuery 参考：[http ://api.jquery.com/wrapInner/](http://api.jquery.com/wrapInner/)

这是我的小提琴：http: [//jsfiddle.net/tracyfu/bHVtg/](http://jsfiddle.net/tracyfu/bHVtg/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T20:27:41.473

使用纯 Javascript 你可以试试这个

```
var elem = document.getElementsByClassName('print')[0]
                   .getElementsByTagName('a')[0] ;

var html = elem.innerHTML;

elem.innerHTML = '<span class="red">'+ html + '</span>' ; 
```

**[工作小提琴](http://jsfiddle.net/sushanth009/ZncZd/)** </p>

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-05-05T21:15:07.823

将 break-word 属性设置为 span。

示例 HTML：

```
<span class="wrapped-link"><a href="#">my link</a> 
```

示例 CSS

```
.wrapped-link{
    word-break: break-word;
} 
```

# eclipse - struts2 无法加载配置

> ID：13258125
> 
> 赞同：-1
> 
> 时间：2012-11-06T19:37:37.610
> 
> 标签：eclipse, apache, struts2, tomcat7

```
SEVERE: Exception starting filter struts2
  Unable to load configuration. - bean -  jar:file:/C:/Users/vaio/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/StrutsCRUD/WEB-INF/lib/struts2-core-2.3.4.1.jar!/struts-default.xml:29:72
at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:450)   at
org.apache.struts2.dispatcher.ng.InitOperations.initDispatcher(InitOperations.java:74)
    at
org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.init(StrutsPrepareAndExecuteFilter.java:51)
    at
org.apache.catalina.core.ApplicationFilterConfig.initFilter(ApplicationFilterConfig.java:277)
    at
org.apache.catalina.core.ApplicationFilterConfig.getFilter(ApplicationFilterConfig.java:258)
    at
org.apache.catalina.core.ApplicationFilterConfig.setFilterDef(ApplicationFilterConfig.java:382)
    at
org.apache.catalina.core.ApplicationFilterConfig.<init>(ApplicationFilterConfig.java:103)
    at
org.apache.catalina.core.StandardContext.filterStart(StandardContext.java:4638)
    at
org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5294)
    at
org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
    at
org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1568)
    at
org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1558)
    at java.util.concurrent.FutureTask$Sync.innerRun(Unknown Source)    at
java.util.concurrent.FutureTask.run(Unknown Source)     at
java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)   at
java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)  at
java.lang.Thread.run(Unknown Source) Caused by: Unable to load
configuration. - bean -
jar:file:/C:/Users/vaio/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/StrutsCRUD/WEB-INF/lib/struts2-core-2.3.4.1.jar!/struts-default.xml:29:72
    at
com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:69)
    at
org.apache.struts2.dispatcher.Dispatcher.init_PreloadConfiguration(Dispatcher.java:390)     at org.apache.struts2.dispatcher.Dispatcher.init(Dispatcher.java:437)
    ... 16 more Caused by: Unable to load bean: type:
class:com.opensymphony.xwork2.ObjectFactory - bean -
jar:file:/C:/Users/vaio/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/StrutsCRUD/WEB-INF/lib/struts2-core-2.3.4.1.jar!/struts-default.xml:29:72
    at
com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.register(XmlConfigurationProvider.java:243)
    at
org.apache.struts2.config.StrutsXmlConfigurationProvider.register(StrutsXmlConfigurationProvider.java:102)
    at
com.opensymphony.xwork2.config.impl.DefaultConfiguration.reloadContainer(DefaultConfiguration.java:210)
    at
com.opensymphony.xwork2.config.ConfigurationManager.getConfiguration(ConfigurationManager.java:66)
    ... 18 more Caused by: Bean type class
com.opensymphony.xwork2.ObjectFactory with the name xwork has already
been loaded by bean -
jar:file:/C:/apache-tomcat-7.0.25-windows-x86/apache-tomcat-7.0.25/lib/struts2-core-2.3.4.1.jar!/struts-default.xml:29:72
- bean - jar:file:/C:/Users/vaio/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/StrutsCRUD/WEB-INF/lib/struts2-core-2.3.4.1.jar!/struts-default.xml:29:72
    at
com.opensymphony.xwork2.config.providers.XmlConfigurationProvider.register(XmlConfigurationProvider.java:227)
    ... 21 more Nov 06, 2012 10:46:46 PM
org.apache.catalina.core.StandardContext startInternal SEVERE: Error
filterStart Nov 06, 2012 10:46:46 PM
org.apache.catalina.core.StandardContext startInternal SEVERE: Context
[/StrutsCRUD] startup failed due to previous errors Nov 06, 2012
10:46:46 PM org.apache.coyote.AbstractProtocol start INFO: Starting
ProtocolHandler ["http-bio-8786"] Nov 06, 2012 10:46:46 PM
org.apache.coyote.AbstractProtocol start INFO: Starting
ProtocolHandler ["ajp-bio-8009"] Nov 06, 2012 10:46:46 PM
org.apache.catalina.startup.Catalina start INFO: Server startup in
3977 ms 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T02:23:36.747

您已将 Struts 2 jar 放在 Tomcat 库目录中：

```
Caused by: Bean type class com.opensymphony.xwork2.ObjectFactory with 
the name xwork has already been loaded by bean - 
jar:file:/C:/apache-tomcat-7.0.25-windows-x86/apache-tomcat-7.0.25/lib/struts2-core-2.3.4.1.jar!/struts-default.xml:29:72 
```

从 servlet 容器中移除 Struts 相关的库；*仅*使用您的应用程序部署它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:30:01.853

第 29 行有关 struts-default.xml 的错误意味着您没有所有需要的 struts2 库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T05:22:15.000

检查你的库。确保你没有一个以上的 struts2-core-2.3.1.2.jar 库。比如 struts2-core-2.3.1.2.jar(1) 或类似的。

# java - GWT 2.5.0 战争创建在 Eclipse 中生成内存不足

> ID：13258127
> 
> 赞同：2
> 
> 时间：2012-11-06T19:37:41.097
> 
> 标签：java, gwt, war

我们正在使用 Maven 开发 GWT 2.4 应用程序。由于[这里描述的问题](http://code.google.com/p/google-web-toolkit/issues/detail?id=6809)我们尝试切换到 GWT 2.5。我们还从 org.codehaus.mojo 切换到 maven-gwt-plugin 的 2.5 版。我们对这种安排没有任何问题（我的意思是运行和调试 GWT 2.5 应用程序 - 使用目标 gwt:run 和 gwt:debug），直到我们决定建立新的战争。为此，我们使用 maven-war-plugin 2.3 版。令我们惊讶的是，无论我们在 vm 参数中允许多少内存，war 文件构建都会耗尽内存 - 我们增加了这些内存，直到物理内存的限制（大约 4 GB）但没有结果。我们用来构建战争的目标组合是“编译 gwt:compile war:war”，源代码被正确编译，但是构建过程甚至没有创建第一个排列，因为它耗尽了内存。如果我们回到第 2 版。4 对于 gwt 和 maven-gwt-plugin，战争是正确构建的，没有其他更改。以前有人遇到过这个问题吗？任何有关允许我们建立 2.5 gwt 战争的适当解决方案的建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:33:48.980

如何更改 JVM 内存配置？`MAVEN_OPTS`? 派生一个新进程，`gwt-maven-plugin`因此请确保使用[`extraJvmArgs`](http://mojo.codehaus.org/gwt-maven-plugin/compile-mojo.html#extraJvmArgs).`gwt-maven-plugin`

# forms - 服务器检查点通过后表单创建错误

> ID：13258130
> 
> 赞同：1
> 
> 时间：2012-11-06T19:37:45.910
> 
> 标签：forms, creation, checkpoint

我正在为这个应用程序的新版本创建一个服务器检查点。当我的应用程序尝试打开我的主窗体时，我遇到了这个错误。

> 创建表单时出错。有关详细信息，请参阅 Exception.InnerException。错误是：ActiveX 控件 '6bf52a52-394a-11d3-b153-00c04f79faa6' 无法实例化，因为当前线程不在单线程单元中。

我不确定这是什么，因为它类似于通常的表单，除了此表单用作启动画面。当我删除启动画面时，表单会正常打开所有插件和模块。这是我使用的代码的一部分

```
Public Class example_form
    Public Function servercheck() As Boolean
        Dim objUrl As New System.Uri("http://google.com")
        Dim objWebReq As System.Net.WebRequest
        objWebReq = System.Net.WebRequest.Create(objUrl)
        Dim objresp As System.Net.WebResponse

        Try
            objresp = objWebReq.GetResponse
            objresp.Close()
            objresp = Nothing
            Return True

        Catch ex As Exception
            objresp = Nothing
            objWebReq = Nothing
            Return False
        End Try
    End Function

    Private Sub Form4_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        BackgroundWorker1.RunWorkerAsync()
        Control.CheckForIllegalCrossThreadCalls = False

    End Sub

    Private Sub BackgroundWorker1_DoWork(ByVal sender As System.Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork
        If servercheck() = True Then
            Form1.Show()
            Me.Hide()
            BackgroundWorker1.CancelAsync()
        Else : PictureBox1.Image = My.Resources._12383u9
            MsgBox("some text here", MsgBoxStyle.Critical)
            End
        End If
    End Sub
End Class 
```

现在你有了代码。后台工作人员尝试打开表单时出现错误。（在代码末尾）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T17:29:52.570

好的，我发现了错误。有这个错误的请不要在工作模式的backgroundworker中添加form.show()命令。当后台工作人员完成时，应该加载表单。所以正确的代码是这样的

```
Private Sub BackgroundWorker1_DoWork(ByVal sender As System.Object, ByVal e As System.ComponentModel.DoWorkEventArgs) Handles BackgroundWorker1.DoWork
              If servercheck() = True Then
            Me.Hide()
            BackgroundWorker1.CancelAsync()
        Else : PictureBox1.Image = My.Resources._12383u9
            MsgBox("Some text here", MsgBoxStyle.Critical)
            End
        End If
    End Sub

    Private Sub BackgroundWorker1_RunWorkerCompleted(ByVal sender As Object, ByVal e As System.ComponentModel.RunWorkerCompletedEventArgs) Handles BackgroundWorker1.RunWorkerCompleted
        Form1.Show()
    End Sub 
```

# matlab - matlab中鼠标拖动画线

> ID：13258133
> 
> 赞同：1
> 
> 时间：2012-11-06T19:37:55.560
> 
> 标签：matlab, mouse, line, draw, drag

我想通过在按住左键的同时拖动鼠标在图像顶部绘制一组断开的线。但是，如果我单击先前绘制的线以指定下一行的起点，则不会调用回调函数并且我不明白这一点。这是我的代码：

```
function main_test

S.fH = figure('menubar','none');
im = imread( 'image.jpg' );

S.aH = axes;
S.iH = imshow( im ); hold on
axis image;

X = [];
Y = [];

set(S.aH,'ButtonDownFcn',@startDragFcn)
set(S.iH,'ButtonDownFcn',@startDragFcn)
set(S.fH, 'WindowButtonUpFcn', @stopDragFcn);

function startDragFcn(varargin)
    set( S.fH, 'WindowButtonMotionFcn', @draggingFcn );
    pt = get(S.aH, 'CurrentPoint');
    x = pt(1,1);
    y = pt(1,2);
    X = x;
    Y = y;
end

function draggingFcn(varargin)
    pt = get(S.aH, 'CurrentPoint');
    x = pt(1,1);
    y = pt(1,2);
    X = [X x];
    Y = [Y y];

    plot(X, Y, 'r', 'LineWidth', 6);
    hold on
    drawnow 
end

function stopDragFcn(varargin)
    set(S.fH, 'WindowButtonMotionFcn', '');  %eliminate fcn on release
end

end 
```

请您帮我找出其中的问题。

提前谢谢你..

干杯，索桑

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T19:42:20.170

您还需要`ButtonDownFcn`在绘图线上设置属性，即

```
plot(X,Y,'r','LineWidth',6,'ButtonDownFcn',@startDragFcn) 
```

# jquery - 修改 CSS 或 jQuery 以防止屏幕闪烁

> ID：13258140
> 
> 赞同：3
> 
> 时间：2012-11-06T19:38:30.527
> 
> 标签：jquery, css, image, draggable, jquery-ui-sortable

我有一个使用 jQuery UI 可排序的图像查看器/放大器。当有很多图像时，窗口变为可滚动以容纳它们。在这种情况下，将图像从一个地方拖到另一个地方时会出现抖动。出现的滚动条也会跳动。

我曾在除 IE 之外的所有领域工作过的原始 CSS。然后我生成了一些新的 CSS，它现在可以在所有浏览器中使用，但是我必须保持查看器的区域相对较小，如果有很多图像（即有些完全隐藏并且拖动变得困难），这并不理想。它似乎只发生在观看者的实际区域超出窗口边界时。我对通过 CSS 或 jQuery 的解决方案持开放态度。首先尝试了 CSS b/c，这就是我所知道的。谢谢！

**首先，这里是 jQuery：**

```
 $(document).ready(function($){
var deviceAgent = navigator.userAgent.toLowerCase();
var agentID = deviceAgent.match(/(iphone|ipod|ipad)/);
if (agentID) {

    $("#gallery, #viewer").sortable({
        connectWith: ".images",
        items: "div",
        forcePlaceholderSize: true,
        forceHelperSize: true,
        receive: function (event, ui) {
            switch (ui.item.parent().attr("id")) {
                case "viewer":
                    ui.item.animate({ height: "250px", width: "250px" });
                    break;
                case "gallery":
                    ui.item.animate({ height: "96px", width: "96px" });
                    break;
            }
        }

    }).disableSelection();

}

else {
    $("#gallery, #viewer").sortable({
        connectWith: ".images",
        items: "div",
        forcePlaceholderSize: true,
        forceHelperSize: true,
        receive: function (event, ui) {
            switch (ui.item.parent().attr("id")) {
                case "viewer":
                    ui.item.css({ height: "525px", width: "auto" });
                    break;
                case "gallery":
                    ui.item.css({ height: "150px", width: "auto" });
                    break;
            }
        }

    }).disableSelection();
} 
```

});

**除了 IE 之外的所有内容都不会跳转的 CSS：**

```
 html, body {min-height:100%;}
    .hangingIndent{ padding-left:22px; text-indent:-22px;}
    #gallery {width: 95%; min-height: 100px; overflow:auto; *overflow:inherit; margin-bottom: 10px;}
    *html #gallery {height: 100px; }
    #gallery .image {float: left; width: auto; height: 150px; padding: 0; margin-right: 10px; text-align: center; background-color:#e2e2e2;}
    #gallery .image img { width: auto; height: 148px; border: solid 1px black; cursor: move; }
    #viewer {width: 95%; min-height: 250px; background-color:#A3A3A3; padding: 1%; overflow:auto; *overflow:inherit;}
    * html #viewer {height: 250px;}
    #viewer .image {float: left; height: 325px; width: auto; padding: 0; margin-right: 10px; text-align: center; background-color:#e2e2e2;}
    #viewer .image img {width: auto; height: 525px; border: solid 3px white; cursor: move; }
    #viewer h4 {line-height: 1em; margin: 0 0 0.4em; color:#000;} 
```

**和所有可以工作的 CSS，但放大的图像在可滚动区域内：**

```
 html, body {min-height:100%;}
    .hangingIndent{ padding-left:22px; text-indent:-22px;}
    #gallery
    {
        width: 95%;
        min-height: 100px;
        height: 100px;
        overflow: auto;
        margin-bottom: 10px;
    }
    #gallery {}
    #gallery .image {float: left; width: auto; height: 150px; padding: 0; margin-right: 10px; text-align: center; background-color:#e2e2e2;}
    #gallery .image img { width: auto; height: 148px; border: solid 1px black; cursor: move; }
    #viewer
    {
        width: 95%;
        height: 250px;
        min-height: 250px;
        background-color: #A3A3A3;
        padding: 1%;
        overflow: auto;
    }
        #viewer .image
        {
            float: left;
            height: 325px;
            width: auto;
            padding: 0;
            margin-right: 10px;
            text-align: center;
            background-color: #e2e2e2;
                border:none;
        }
            #viewer .image img
            {
                width: auto;
                height: 525px;
                border: solid 3px white;
                cursor: move;
            }
    #viewer h4 {line-height: 1em; margin: 0 0 0.4em; color:#000;} 
```

**和 HTML：**

```
 <div id="gallery" class="images">
<div class="ui-corner-tr image"><img src="../../../../../images/Fig267b.jpg" alt="" title="" /></div>
<div class="ui-corner-tr image"><img src="../../../../../images/Question_9a.jpg" alt="" title="" /></div>
<div class="ui-corner-tr image"><img src="../../../../../images/Question_9b.jpg" alt="" title="" /></div>
<div class="ui-corner-tr image"><img src="../../../../../images/Question_9c.jpg" alt="" title="" /></div>
<div class="ui-corner-tr image"><img src="../../../../../images/xray1.JPG" alt="" title="" /></div>
<div class="ui-corner-tr image"><img src="../../../../../images/xray2.JPG" alt="" title="" /></div>
</div>
<div id="viewer" class="images">
<h4>Drag the images to the area above to remove them from the viewing tool.</h4>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T22:09:24.590

尝试添加溢出：隐藏；到父元素。我不确定这在这种情况下是否有效，但它通常会消除“闪烁”效果。

# haskell - 使用多参数函数

> ID：13258142
> 
> 赞同：2
> 
> 时间：2012-11-06T19:38:50.087
> 
> 标签：haskell

假设我有一个带有一个参数的函数 a 和一个带有可能输入的列表 b ，定义为：

```
let a x1 = x1 == 3
let b = [3, 3] 
```

现在我想测试 b 中的所有值是否返回 True 作为 a 的参数，我可以使用 all 函数来执行此操作：

```
all a b
> True 
```

但是，如果 a 将采用两个参数并且 b 将是一个元组列表，其中元组中的每个值对应于每个参数，我可以做类似的事情吗？

例如：

```
let a x1 x2 = x1 == 3 && x2 == 1
let b = [(3,1), (3,1)]
all a b 
```

这将返回：

```
<interactive>:1:4:
    Couldn't match expected type `Bool'
           against inferred type `a1 -> Bool'
    In the first argument of `all', namely `a'
    In the expression: all a b
    In the definition of `it': it = all a b 
```

关于如何做到这一点的任何想法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T19:42:58.487

要将具有两个参数的函数转换为需要一对的函数，请使用

```
uncurry :: (r -> s -> t) -> (r, s) -> t 
```

那么，怎么样

```
all (uncurry a) b 
```

?

# javascript - $ 未定义，但 jQuery 已在 Wordpress 中定义

> ID：13258143
> 
> 赞同：0
> 
> 时间：2012-11-06T19:38:55.020
> 
> 标签：javascript, jquery, wordpress

没有定义可能导致 Firefox 告诉我 $ 的原因，但使用 'jQuery' 可以按预期工作。

我在 Wordpress 3.4 上，而 Wordpress 与 jQuery 一起打包。它是 WordPress 特有的吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T19:42:27.363

[`jQuery.noConflict()`](http://api.jquery.com/jQuery.noConflict/)已被调用。要通过最少的代码更改来解决此问题，请执行此操作。

前：

```
$("your").code(function () {
  $("that").uses($.all("over").the("place"));
}); 
```

后：

```
(function ($) {
  $("your").code(function () {
    $("that").uses($.all("over").the("place"));
  });
})(jQuery); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-06T19:40:55.573

作为文档状态，jQuery 在 wordpress 中以 noConflict 模式工作：http: [//codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers](http://codex.wordpress.org/Function_Reference/wp_enqueue_script#jQuery_noConflict_wrappers)

# algorithm - 找到圆圈中的索引，以便旅行者可以完成一轮

> ID：13258144
> 
> 赞同：5
> 
> 时间：2012-11-06T19:38:54.563
> 
> 标签：algorithm, search, data-structures, binary-search, greedy

我出现在采访中。我陷入了一个问题。我也在问同样的问题。

> **问题：** 给出了环形路。那条路有许多加油泵。每个汽油泵都有一定量的汽油。还给出了每两个连续汽油泵之间的距离。现在有一种车辆具有无限容量的空油箱。建立一个算法，使车辆可以覆盖整个回合而无需任何回溯。假设这样的路径绝对是可能的。

**输入：** （int燃料[]，int距离[]）

**输出：**车辆可以绕完一圈环形道路的汽油泵指数。

**我的方法：**

1.  从每个汽油泵检查，如果油箱在路径之间是空的，则移动到下一个汽油泵。并再次开始相同的过程。这个算法需要 O(N^2)，这里 N = 汽油泵的数量。

2.  然后我转向二进制搜索概念，以将复杂性降低到 O(n*logn)。但我未能得出解决方案。我在这个解决方案中搞砸了。

3.  然后我尝试应用一些智能，通过选择在两个汽油泵之间剩余汽油最大的汽油泵。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-07T05:24:54.307

（这可能相当于 Evgeny Kluev 发布的算法，我不明白。如果是这样，则该答案具有优先权。）

令 F_i_j 为到达 j 时油箱中的净有符号燃油量，在 i 处开始，油箱中的燃油为零，然后在 i 处加注。

通过在每个节点处添加燃料并减去每条边的燃料成本来计算每个节点 i 的 F_0_i。

如果 F_0_0（从 0 开始的回路末端的净燃料）为负数，则系统中没有足够的燃料（根据问题陈述，这不应该发生）。

如果没有 F_0_i 为负，则报告 0 作为结果。

否则，找到 F_0_s 负值最大的节点 s。选择 s 作为起始节点。

对于任何节点 i，F_s_i 等于 F_0_i + abs(F_0_s)。由于 F_0_s 是最负的 F_0_i，这使得 F_s_i 非负。

```
Worked example, as suggested in a comment by Handcraftsman:
Label nodes 0 through 4

node: 0,1,2,3,4
fuel: 1,3,4,4,1
dist: 1,4,2,2,2

First calculate F_0_i for i = 1, 2, 3, 4, 0
Start at node 0 with 0 fuel.

f_0_1 = 0 + 1 - 1 = 0, min score 0, node 1;
f_0_2 = 0 + 3 - 4 = -1, min score -1, node 2;
f_0_3 = -1 + 4 - 2 = 1;
f_0_4 = 1 + 4 - 2 = 3;
f_0_0 = 3 + 1 - 2 = 2;

f_0_0 is non-negative, so there is enough fuel.

The minimum score was -1, at node 2, so the result is node 2. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-12-19T16:13:17.400

蛮力解决方案应该是显而易见的。从每个 i 开始，检查每个点是否可以通过可用的气体到达。返回第一个 i ，您可以为其完成行程而不会达到负数。然而，这种方法将是二次的。让我们看看如何改进。

我们可以在这里采取贪婪的方法。

1 如果 gas 的总和大于 cost 的总和，则意味着不会有任何解决方案。我们可以丢弃我们开始的点

2 假设您从 i 开始，并在 j 处达到 sum(gas) - sum(cost) 的第一个负数。我们知道 TotalSum(gas) - TotalSum(cost) > 0。所以我们可以将 i 丢弃到 j 并从 j + 1 开始。

上述算法的Java代码

```
 public int canCompleteCircuit(final List<Integer> gas, final List<Integer> cost) {
            int start = 0;
            int totalGas = 0;
            int totalCost = 0;
            int currentCost = 0;
            for (int i = 0; i < gas.size(); i++) {
                totalCost += cost.get(i);
                totalGas += gas.get(i);
                currentCost += gas.get(i) - cost.get(i);
                if (currentCost <0){
                    start = i + 1;
                    currentCost = 0;
                }
            }

            if (totalCost > totalGas){
                return -1;
            }

            return start;

        } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-07T06:52:34.333

如果可以找到正确的课程，我必须先了解才能解决问题。

`D`- 所有距离的 `P`总和 - 所有燃油泵的总和

1.  如果`P < D`问题无法解决
2.  如果`P = D`它总是有解决方案，请在下面证明
3.  如果`P > D`我们可以减少一些泵并像应用溶液一样`P = D`。

因此，我们假设`P = D`，即我们拥有完成课程所需的确切燃料量。让我们画一张图表，油箱中的燃料量作为时间的函数。如果tanking time 等于0，它不是一个真正的函数，但它并不重要。我们从任何地方开始，油箱里有一些燃料。

泵 1、4、3 和距离 2、5、1 的示例：

```
 |\       
   | \      
|\ |  \  |\ 
  \|   \ |  
        \| 
```

注意事项：

1.  我们可能会无限地四处走动，图表也会以同样的方式重复。我们将以与开始时相同的燃料量回到起点。
2.  总会有一个油量最低的点，并且总是同一个站点（如果有几个最小站点，它不会改变任何东西）
3.  如果我们从不同的地方开始，最小的点总是落在同一个站。

基于上述，我们从一个最小的泵开始并为其分配 0 级。这就是我们的燃料永远不会低于 0 的证据，也就是说，我们将能够继续绕着绕绕…

现在我们看到**Evgeny 的解决方案是正确的**，尽管`S`和的计算`S/N`是不必要的。我们只需要加上泵值并减去距离，在 Evgeny 的算法中是`V`。因此，最佳出发站是我们到达时燃料含量最少的站。

我花了很多时间才明白为什么 Evgeny 会从任意方向开始。为什么他确定解决方案存在于他所采取的方向而不是相反的方向？但是当我们知道这`P = D`是完成课程的充分条件时，我们也知道**方向并不重要**。我们应该选择一个不同的车站作为相反方向的起点，但我们可以在两个方向上都这样做。

Nithis，给了你多少时间？能说一下公司名字吗？:) 我认为这是一项相当艰巨的任务，至少对于一个不熟悉类似循环问题的人来说。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T05:11:58.723

这是递归的条件。首先，您检查最后一段是否还有燃料。如果需要的燃料是 x 并且泵 n 中的燃料是 y。如果 x>y 那么我们需要 (xy)+泵 n,n-1 之间的伸展所需的燃料，否则只有最后一个所需的燃料但是泵 n-1 需要拉伸。这会一直持续到到达泵 1。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-02T02:41:28.580

```
 public static void main(String[] args) {

  int petrol[] = { 1, 3, 4, 4, 1 };
  int distance[] = { 1, 4, 2, 2, 2 };

  petrol = new int[] { 4, 6, 7, 4 };
  distance = new int[] { 6, 5, 3, 5 };
  List<PetrolPump> petrolPumps = PetrolPump.getAll(petrol, distance);

  int start = 0;
  int end = petrol.length;

  int remainingPetrol = 0;

  do {
     remainingPetrol += petrolPumps.get(start).petrol - petrolPumps.get(start).distance;

     if (remainingPetrol < 0) {
        remainingPetrol = 0;
        end = start;
     }

     start++;
     if (start >= petrol.length) {
        start = 0;
     }
  } while (start != end);

  System.out.println(end + 1); 
```

}

```
static class PetrolPump {
  int petrol;
  int distance;

  PetrolPump(int petrol, int distance) {
     this.petrol = petrol;
     this.distance = distance;
  }

  static List<PetrolPump> getAll(int[] petrol, int[] distance) {
     List<PetrolPump> petrolPumps = new ArrayList<PetrolPump>(distance.length);

     for (int i = 0; i < distance.length; i++) {
        petrolPumps.add(new PetrolPump(petrol[i], distance[i]));
     }

     return petrolPumps;
  }
} 
```

# orchardcms - 重新设置文化的果园 CMS

> ID：13258145
> 
> 赞同：1
> 
> 时间：2012-11-06T19:38:57.243
> 
> 标签：orchardcms, currentculture

我最近观看了Piotr Szmyd 的关于本地化和国际化的非常有用的[果园收获视频](http://www.youtube.com/watch?v=_sBU3qjb0-w)

我想使用这种方法设置文化，检查 cookie

```
public class CultureSelector : ICultureSelector
    {
        public const int SelectorPriority = 5;
        public const string CookieName = "Riders-Location-Cookie";
        public const string CookieValueName = "location-code";

        public CultureSelectorResult GetCulture(HttpContextBase context)
        {
            if (context == null || context.Request == null || context.Request.Cookies == null)
            {
                return null;
            }

            // check for a cookie 
            var cookie = context.Request.Cookies[CookieName];

            if (cookie != null && !string.IsNullOrEmpty(cookie.Values[CookieValueName]))
            {
                return new CultureSelectorResult { Priority = SelectorPriority, CultureName = cookie.Values[CookieValueName] };
            }

            return null;

        }
    } 
```

这行得通，但是，我确实希望用户能够在网站上重置自己的文化。当用户选择时，如何重置整个网站的文化。

例如，如果我有一个作为自定义模块的一部分输出的选择列表。

我查看了[Orchard CulturePicker 模块](http://orchardculturepicker.codeplex.com/SourceControl/changeset/view/bc506c0d1729#Controllers/UserCultureController.cs)中的 ChangeCulture 代码，但这似乎并没有像使用 ICultureSelector 的实现设置它那样改变整个站点的文化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T03:52:59.927

如果我理解正确，您希望用户能够*更改他当前的文化和/或能够返回到默认站点文化*，对吗？

在您的情况下，它应该像更改[cookie](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.cookies.aspx)值或将其删除（以设置默认文化）一样简单，作为对某些用户操作的响应。

# java - JTree 在应用程序启动时添加节点

> ID：13258150
> 
> 赞同：4
> 
> 时间：2012-11-06T19:39:18.430
> 
> 标签：java, swing, jtree

我想用文件浏览器制作文本编辑器，所以当我启动我的应用程序时，我希望我的程序在 JTree 上添加节点，以便它向我显示所有文件和文件夹，例如在我的文档文件夹中，并让我能够访问这些文件和文件夹（尤其是文件夹）。[我试图从这个例子](https://codereview.stackexchange.com/questions/4446/file-browser-gui/4451#4451)中弄清楚 Andrew Thompson 是如何做到这一点的， 但我失败了。我设法使用[此示例](https://stackoverflow.com/questions/9543970/add-jlabel-with-image-to-jlist-to-show-all-the-images/9544652#9544652)为 My Documents 中的所有文件和文件夹创建节点 。但这就是全部，当单击代表文件夹的节点之一时，我无法弄清楚如何为其他文件和文件夹生成节点。

这是我到目前为止所做的：

```
import java.awt.Dimension;
import java.awt.event.MouseAdapter;
import java.awt.event.MouseEvent;
import java.io.File;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JSplitPane;
import javax.swing.JTabbedPane;
import javax.swing.JTree;
import javax.swing.SwingUtilities;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeModel;
import javax.swing.tree.TreeSelectionModel;

public class MyTextEditor extends JFrame{

    JTree tree;
    JTabbedPane tabbedPane = new JTabbedPane();
    File myDocumentsFolder = new File("C:/Documents and Settings/User/My Documents");
    File[] listOfFiles = myDocumentsFolder.listFiles();
    String dirTitle = myDocumentsFolder.getName();
    DefaultMutableTreeNode rootNode = new DefaultMutableTreeNode(dirTitle);
    DefaultTreeModel treeModel = new DefaultTreeModel(rootNode);

    public MyTextEditor() {

        tree = new JTree(treeModel);
        tree.setEditable(false);
        tree.getSelectionModel().setSelectionMode(TreeSelectionModel.SINGLE_TREE_SELECTION);
        tree.setShowsRootHandles(true);

        JSplitPane splitPane = new JSplitPane(JSplitPane.HORIZONTAL_SPLIT,new JScrollPane(tree),tabbedPane);
        add(splitPane);

        tree.addMouseListener(new MouseAdapter(){
            public void mouseClicked(MouseEvent e){
                for (int i = 0; i < listOfFiles.length; i++) {
                    String nameOfFile = listOfFiles[i].getName();
                    rootNode.add(new DefaultMutableTreeNode(nameOfFile));
                }
            }
        });

    }

    public static void main(String[] args) {
        try {
            UIManager.setLookAndFeel("com.sun.java.swing.plaf.nimbus.NimbusLookAndFeel");
        } catch (ClassNotFoundException e) {
            e.printStackTrace();
        } catch (InstantiationException e) {
            e.printStackTrace();
        } catch (IllegalAccessException e) {
            e.printStackTrace();
        } catch (UnsupportedLookAndFeelException e) {
            e.printStackTrace();
        }

        SwingUtilities.invokeLater(new Runnable(){
            public void run(){
                MyTextEditor mte = new MyTextEditor();
                mte.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                mte.setPreferredSize(new Dimension(800,600));
                mte.pack();
                mte.setLocationByPlatform(true);
                mte.setVisible(true);
            }
        });
    }

} 
```

有人可以告诉我如何为特定文件夹的所有文件和文件夹生成节点。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T20:12:51.480

我将它[`FileTreeModel`](https://dzone.com/articles/taking-new-swing-tree-table-a-)用于`TreeModel`、[`Outline`](https://codereview.stackexchange.com/a/4447/6692)视图和`user.dir`起始目录。

```
TreeModel treeModel = new FileTreeModel(
    new File(System.getProperty("user.dir")));
OutlineModel outlineModel = DefaultOutlineModel.createOutlineModel(
    treeModel, new FileRowModel(), true, "User Directory"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T19:52:38.007

创建一个递归函数，接收根节点，为其下面的每个文件/目录添加节点，然后在每个节点上再次调用自身。

编辑：如果每个节点已经包含相对路径，则无需从 DefaultMutableTreeNode 继承。

# android - Android：带有 URL 的 openInputStream 抛出 FileNotFoundException

> ID：13258151
> 
> 赞同：3
> 
> 时间：2012-11-06T19:39:22.413
> 
> 标签：android

我正在尝试运行以下代码

```
 Uri uri = Uri.parse("URL of a photo");

    ContentResolver cr = getContentResolver();

    try {
        InputStream fis = cr.openInputStream(uri);
        // Do some stuff here ..
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

但这会引发 FileNotFoundException，我确定 URL 是正确的。是否有另一种方法可以打开 URL 的输入流？

编辑：LogCat 输出

```
11-06 22:05:37.939: W/System.err(20057): java.io.FileNotFoundException: No content provider: http://www.vnvlvokc.com/ow_userfiles/plugins/shoppro/images/product_1.jpg
11-06 22:05:37.939: W/System.err(20057):    at android.content.ContentResolver.openAssetFileDescriptor(ContentResolver.java:481)
11-06 22:05:37.939: W/System.err(20057):    at android.content.ContentResolver.openInputStream(ContentResolver.java:319)
11-06 22:05:37.939: W/System.err(20057):    at com.example.myfacebook.Act1.post_photo(Act1.java:68)
11-06 22:05:37.939: W/System.err(20057):    at com.example.myfacebook.Act1.onActivityResult(Act1.java:58)
11-06 22:05:37.939: W/System.err(20057):    at android.app.Activity.dispatchActivityResult(Activity.java:3908)
11-06 22:05:37.939: W/System.err(20057):    at android.app.ActivityThread.deliverResults(ActivityThread.java:2694)
11-06 22:05:37.939: W/System.err(20057):    at android.app.ActivityThread.handleSendResult(ActivityThread.java:2740)
11-06 22:05:37.939: W/System.err(20057):    at android.app.ActivityThread.access$2000(ActivityThread.java:121)
11-06 22:05:37.939: W/System.err(20057):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:991)
11-06 22:05:37.939: W/System.err(20057):    at android.os.Handler.dispatchMessage(Handler.java:99)
11-06 22:05:37.939: W/System.err(20057):    at android.os.Looper.loop(Looper.java:130)
11-06 22:05:37.939: W/System.err(20057):    at android.app.ActivityThread.main(ActivityThread.java:3892)
11-06 22:05:37.949: W/System.err(20057):    at java.lang.reflect.Method.invokeNative(Native Method)
11-06 22:05:37.949: W/System.err(20057):    at java.lang.reflect.Method.invoke(Method.java:507)
11-06 22:05:37.949: W/System.err(20057):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:886)
11-06 22:05:37.949: W/System.err(20057):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:642)
11-06 22:05:37.949: W/System.err(20057):    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T20:02:01.437

如果你想将图片的内容下载到手机上，那么你不应该使用意图解析器，而是使用 HttpUrlConnection 并将其内容复制到文件中。

有几种方法可以做到这一点，很少是正确的。如果这就是你想要做的告诉我，我会给你一些提示。

您对内容解析器所做的事情是试图从应用程序或系统中获取一个 ContentProvider，它可以为您提供此 url 的内容。这真的有点尴尬。

# haskell - Haskell 中的热代码加载

> ID：13258152
> 
> 赞同：17
> 
> 时间：2012-11-06T19:39:29.397
> 
> 标签：haskell

可以用 Haskell 实现代码热交换吗？我正在阅读有关 Erlang 的文章，这引起了我的兴趣，我想将这些功能与 Haskell 一起使用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-06T19:43:22.813

请参阅[dyre](http://hackage.haskell.org/package/dyre)包，它正是为这种目的而设计的。还有[hotswap](http://hackage.haskell.org/package/hotswap)，不过几年没更新了。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-06T20:23:47.303

Cabal 中有一个`plugins`包，它提供了加载插件代码的工具。但总的来说，Haskell 比动态的、字节码驱动的 Erlang 更反对在运行时更改代码。

# php - 如何剥离部分网址？

> ID：13258154
> 
> 赞同：2
> 
> 时间：2012-11-06T19:39:37.393
> 
> 标签：php, apache, .htaccess

如何剥离部分网址？我不太了解 htaccess 或 apache。

`www.mysite.com/page=services`例如，我想剥离`www.mysite.com/services`。

为了实现这一点，我究竟需要在 .htaccess 文件中放入什么，这对其他页面也有效吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:46:03.793

我认为您的意思是您的原始网址是`www.mysite.com/index.php?page=services`而不是`www.mysite.com/page=services`

另外，您的意思可能相反，您应该切换`www.mysite.com/services`到`www.mysite.com/index.php?page=service`

无论如何，要更改`www.mysite.com/services`为`www.mysite.com/index.php?page=services`您需要.htaccess，而规则是`RewriteRule ^([^/]+)/?$ /index.php?page=$1 [L]`

如前所述，您应该阅读有关 .htaccess、正则表达式和重写规则的信息。最好的资源是这里的 apache 文档：[http ://httpd.apache.org/docs/2.2/howto/htaccess.html](http://httpd.apache.org/docs/2.2/howto/htaccess.html)

我之前读过您的评论，您需要相反的内容，我不确定您为什么需要这样做，因为 URL 缩短的整个想法是除了可以解决一些安全问题之外，还可以制作易于记忆的 URL。URL 是发送来加载您的网页的第一件事，然后 .htaccess 将其更改为 PHP 无法接受的某种形式，然后 PHP 处理例如获取参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:07:56.023

我最近在我的一个网站上尝试了这个并想出了这个，对我来说效果很好，

这进入 .htaccess 文件：

```
RewriteEngine On
RewriteRule ^([A-Za-z]+)/?$    index.php?page=$1    [NC,L] 
```

那么如果你写 yoursite.com/pagename 它会将 yoursite.com/index.php?page=pagename 发送到你的php。您将像这样链接到该页面： yoursite.com/pagename 它不会在您发送后将 yoursite.com/index.php?page=pagename 更改为地址栏中的 yoursite.com/pagename 。（如果这有意义:) )

我希望这就是你正在寻找的...

# android - 如何正确使用android支持库

> ID：13258160
> 
> 赞同：8
> 
> 时间：2012-11-06T19:40:17.977
> 
> 标签：android, android-support-library

我正在通过专业的 Android 4 应用程序开发工作。第 4 章修改了 To Do List 应用程序以使用片段，但我正在尝试在 Gingerbread 设备上进行测试。书中提到了使用支持库来允许在较低版本的设备上使用 Android v3 或 v4 功能，但没有很好地涵盖。

我遇到了一个特别的问题：

```
 // Get references to the Fragments
    android.app.FragmentManager fm = getFragmentManager();
    ToDoListFragment    todoListFragment = (ToDoListFragment) fm.findFragmentById( R.id.ToDoListFragment ); 
```

我在顶部有这些导入： import android.support.v4.app.FragmentManager; 导入android.support.v4.app.ListFragment；

但 lint 在“ToDoListFragment todoListFragment = (ToDoListFragment)”行发出警告：无法从 Fragment 转换为 ToDoListFragment

在我的 ToDoListFragment 类中，我有：

```
 import android.support.v4.app.ListFragment;

    public class ToDoListFragment extends ListFragment {
    } 
```

这几乎是书中的逐字记录，除了使用支持库的更改。

我不清楚如何使用 v4 支持库使此代码正常工作。如果这不是足够的信息，我提前道歉。我还在学习这个，而且我对 C/C++ 比对 Java 更熟悉。如果我不使用支持库，代码构建得很好，可以在 Ice Cream Sandwich 设备上运行，但我也想让它在较低级别的设备上运行。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T19:43:32.383

你应该使用`getSupportFragmentManager()`而不是`getFragmentManager()`

```
android.support.v4.app.FragmentManager fm = getSupportFragmentManager() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T23:05:15.453

我想对这个例子做同样的事情。有几个地方需要更改才能使其与支持库一起使用。这是我完整的 java 文件，注释中突出显示了更改：

```
package com.paad.todolist;

import java.util.ArrayList;
import android.support.v4.app.FragmentActivity; // Because we're using the support library 
                                                // version of fragments, the import has to be
                                                // FragmentActivity rather than Activity
import android.support.v4.app.FragmentManager;  // Support version of Fragment Manager
import android.os.Bundle;
import android.util.Log;
import android.widget.ArrayAdapter;

// because we're using the support library version of fragments, the class has to extend the
// FragmentActivity superclass rather than the more usual Activity superclass
public class ToDoListActivity extends FragmentActivity implements NewItemFragment.OnNewItemAddedListener {

    // logging tag
    private static final String TAG = "ToDoListActivity";

    // create an array adaptor ready to bind the array to the list view
    private ArrayAdapter<String> aa;

    // set up array list to hold the ToDo items
    private ArrayList<String> todoItems;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        Log.i(TAG, "The onCreate method has started");

        // inflate the view
        setContentView(R.layout.activity_to_do_list);

        // get references to the fragments

        // FragmentManager fm = getFragmentManager(); this won't work with the support library version
        FragmentManager fm = getSupportFragmentManager();   // this is the equivalent for support library

        ToDoListFragment todoListFragment = (ToDoListFragment)fm.findFragmentById(R.id.ToDoListFragment);

        // Create the array list of to do items
        todoItems = new ArrayList<String>();

        // Create the array adapter to bind the array to the listview
        aa = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, todoItems);

        // bind the array adapter to the list view
        todoListFragment.setListAdapter(aa);        
    }

    // implement the listener... It adds the received string to the array list
    // then notifies the array adapter of the dataset change
    public void onNewItemAdded(String newItem) {
        todoItems.add(newItem);
        aa.notifyDataSetChanged();
    }           
} 
```

# javascript - 尝试将 JSON 数据插入数据表小部件

> ID：13258161
> 
> 赞同：2
> 
> 时间：2012-11-06T19:40:20.453
> 
> 标签：javascript, jquery, ajax, json, datatables

我有一个 Java Web 项目，其中有一个 GET 端点，我正在点击该端点来检索 JSON 数据。Firebug 显示我正在获取表单中的 JSON 数据

```
[{"id":7,"serial":"7bc530","randomDouble":0.0,"randomDouble2":0.0,"randomDouble3":0.0,"date":1352228474000,"removed":null},
{"id":8,"serial":"4a18d27","randomDouble":0.0,"randomDouble2":0.0,"randomDouble3":0.0,"date":1352228474000,"removed":null},
{"id":9,"serial":"f30ef","randomDouble":0.0,"randomDouble2":0.0,"randomDouble3":0.0,"date":1352228474000,"removed":null},
{"id":10,"serial":"9e6d","randomDouble":0.0,"randomDouble2":0.0,"randomDouble3":0.0,"date":1352228474000,"removed":null},
{"id":11,"serial":"4d8665a3","randomDouble":0.0,"randomDouble2":0.0,"randomDouble3":0.0,"date":1352228474000,"removed":null},
{"id":12,"serial":"4fe1457","randomDouble":0.0,"randomDouble2":0.0,"randomDouble3":0.0,"date":1352228474000,"removed":null}] 
```

在 HTML 方面，我有这个，

```
<table id="table_id">
   <thead>
      <tr>
      <th>id</th>
      <th>serial</th>
      <th>randomDouble</th>
      <th>randomDouble2</th>
      <th>randomDouble3</th>
      <th>date</th>
      <th>removed</th>
      </tr>
</thead>
 <tbody>
</tbody>
</table> 
```

这是我在 javascript 方面的内容，我在这里找到了某人的另一篇文章，这种格式适用于他们。

```
$(document).ready(function() {

    var Table = $("#table_id").dataTable({
       "bFilter":false,
       "bPaginate":false,
       "bProcessing": true,
       "bServerSide":true,
       "bInfo":false,
       "sAjaxSource": ApiUrl(),
       "fnServerData": function (sSource, aoData, fnCallback){
           $.ajax({
            "dataType": 'json',
               "type": "GET",
               "url": sSource,
               "data": aoData,
               "success": fnCallback
           }); 
       }
    }); 
```

该表正在显示列，但没有提取数据。正如我所说，我确实验证了 JSON 数据是通过 Firebug 发送到网页的——通过这发出的 GET 请求。

我发现数据表非常混乱，我无法让这个 JSON 真正填充......

任何帮助将不胜感激。

编辑：

我试过这个，

```
var Table = $("#table_id").dataTable({
       "bFilter":false,
       "bPaginate":false,
       "bProcessing": true,
       "bServerSide":true,
       "bInfo":false,
       "sAjaxSource": ApiUrl(),
       "sAjaxDataProp": ""
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:29:36.893

您可以从任意数据源读取。查看下面的文档（在[此处](http://datatables.net/release-datatables/examples/ajax/custom_data_property.html)找到）。这适用于服务器端处理和 ajax 数据源。

> 此外，可以将 sAjaxDataProp 设置为空字符串，这会导致 DataTables 将给定数据源视为表数据数组（而不是对象的属性）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:25:37.460

这应该适用于服务器端：

```
 var Table = $("#table_id").dataTable({
   "bFilter":false,
   "bPaginate":false,
   "bProcessing": true,
   "bServerSide":true,
   "bInfo":false,
    "aoColumns": [
    { "mData": "id" },
    { "mData": "serial" },
    { "mData": "randomDouble" },
    { "mData": "randomDouble2" },
    { "mData": "randomDouble3" },
    { "mData": "date" },
    { "mData": "removed" }

    ],
   "sAjaxSource": "url",
   "fnServerData": function ( sSource, aoData, fnCallback ) {
    $.getJSON( sSource, aoData, function (json) { 
        map = {}
        map["aaData"] = json
        fnCallback(map)
    } );
}
}); 
```

关于最后评论的更新：

```
"fnServerData": function ( sSource, aoData, fnCallback ) {
  $.getJSON( sSource, aoData, function (json) { 
        $.getJSON('second_json_url', function(secondjson) {
            $.each(secondjson, function(index, object) {
              json[index].serial = secondjson[index].name
            })
            map = {}
            map["aaData"] = json
            fnCallback(map)
        })
  });
} 
```

# c# - .NET 中的 JSON 反序列化

> ID：13258163
> 
> 赞同：2
> 
> 时间：2012-11-06T19:40:41.503
> 
> 标签：c#, .net, vb.net, json, json.net

我已经查看了一些线程，但我的目标似乎找不到。
我返回了以下 JSON 字符串：

成功时：

```
{"success":{"username":"key"}} 
```

出错时：

```
{"error":{"type":101,"address":"/","description":"link button not pressed"}} 
```

我需要能够将它们反序列化为一个类，并确定我是否有错误或成功消息来继续执行此操作。关于如何实现这一目标的任何想法？

谢谢，

亚当

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:59:11.153

No need to declare a lot of tiny classes. `dynamic` keyword can help here.

```
dynamic jObj = JObject.Parse(json);
if (jObj.error!= null)
{
    string error = jObj.error.description.ToString();
}
else
{
    string key = jObj.success.username.ToString();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:46:05.893

一种选择是使用[http://nuget.org/packages/newtonsoft.json](http://nuget.org/packages/newtonsoft.json) - 您可以创建自己的自定义类以反序列`dynamic`化或用作目标类型。

```
var result = JsonConvert.DeserializeObject<Result>(jsonString);

class Result
{
    public SuccessResult success { get; set; }
    public ErrorResult error { get; set; }
}

class SuccessResult
{
    public string username { get; set; }
}

class ErrorResult
{
    public int type { get; set; }
    public string address { get; set; }
    public string description { get; set; }
} 
```

如果您只需要检查是否成功，则可以只检查`result.StartsWith("{\"success\":")`以避免不必要的解析。但这只有在您保证 JSON 字符串始终与此完全相同（没有额外的空格等）时才应该这样做 - 所以通常只有您自己拥有 JSON 生成时才合适。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:49:43.863

这个答案涵盖了大多数选项，包括滚动您自己的解析器和使用 JSON.Net：

[在 C# 中解析 JSON](https://stackoverflow.com/questions/1212344/parse-json-in-c-sharp)

如果格式如此简单，您也可以只编写一个正则表达式......

# php - 为什么 PHP 中的这个 xPath 查询不起作用？

> ID：13258164
> 
> 赞同：1
> 
> 时间：2012-11-06T19:40:41.547
> 
> 标签：php, xpath, xml-parsing, domxpath

我是 PHP 和 stackoverflow 的新手。我创建了一个脚本，它从表单中获取内容并搜索与给定类别和主题相对应的文件列表。现在，启动脚本时 xPath 部分会引发错误。它说：

**致命错误：**在第 10 行对非对象调用成员函数 getElementsByTagName()。

这是代码：

```
if (isset($_GET["subject"])){
    $subject = $_GET["subject"];
    $category = $_GET["category"];
    $doc = new DOMDocument();
    $doc->load('Files.xml');
    $xpath = new DOMXPath($doc);
    //subject
    $subjectpath = 'subject[@name="' . $subject . '"]';
    $ssubjectfiles = $xpath->query($subjectpath)->item(0);
    $subjectfiles = $ssubjectfiles->getElementsByTagName('file');
    //category
    $categorypath = 'subject[@name="' . $subject . '"]/category[@name="' . $category . '"]';
    $scategoryfiles = $xpath->query($categoryfiles)->item(0);
    $categoryfiles = $scategoryfiles->getElementsByTagName('file');
    function getFiles($files){
    foreach($files as $file){
        $filevalue = $file->nodeValue;
        echo '<li>' . $filevalue . '</li>';
    }
    }
    switch($category){
    case 'Select a category or leave to get all the results':
        getFiles($subjectfiles);
    break;
    default:
        getFiles($categoryfiles);
    }
} 
```

为什么它不起作用？我必须以某种方式转换对象吗？

谢谢！

* * *

**编辑**

看起来问题出在相对链接上。我把它改成它`http://localhost/Files.xml`似乎工作。总之谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:18:50.720

$xpath->query($subjectpath) - 返回不是一个空的 DOMNodeList，所以 $xpath->query($subjectpath)->item(0) 返回 null，然后当你调用 $ssubjectfiles->getElementsByTagName('file') , $ssubjectfiles 为空，这里发生错误。

请阅读手册[http://www.php.net/manual/en/book.dom.php](http://www.php.net/manual/en/book.dom.php)

# php - 模型类在 symfony2 中的位置

> ID：13258169
> 
> 赞同：11
> 
> 时间：2012-11-06T19:40:50.643
> 
> 标签：php, symfony, doctrine-orm

我是 Symfony2 的新手。来自 Zend 背景，我没有看到任何模型文件夹。模型和控制器如何通信？

如果我不想使用 Doctrine 怎么办。即使我使用 Doctrine，模型将住在哪里以及它们如何与控制器通信？

Symfony 网站上有一些关于 symfony2 的很好的文档，但它与我注意到的 symfony1.X 的文档不同。官方文档没有说明在使用不同的学说方法时应该添加哪些命名空间。提前感谢社区的提示。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-09-15T14:45:45.393

您可以手动创建模型。

**型号**：

*   在你的包中创建新目录（模型）
*   创建我的模型

*   设置**命名空间** （company\mybundle\models）

*   设置 Doctrine 和使用实体（**使用**）
*   在您的模型中放置**DQL**

**控制器**：

*   `use company\mybundle\models\mymodel;`

    > ```
    > public function getRecentUserAction ($max = 10)  
    > {
    >      $user = new MyModel();
    >      $list = $user->getRecentUser($max) // DQL
    >     return $this->render('CompanyBundle:controller:index.html.twig',array('list'=>$list));
    > } 
    > ```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-06T21:47:15.847

> Symfony2 实际上是为控制器部分、视图部分提供工具，而不是模型部分。您可以手动创建模型或使用任何其他工具，如 ORM。
> 
> ——法比恩·波滕西尔（[来源](http://fabien.potencier.org/article/49/what-is-symfony2)）

### 但是我如何在没有模型的情况下与数据库通信呢？

你可以选择你的方式来做这件事。您可以创建自定义模型并使用它们，也可以使用 DataMappers 或其他东西。Symfony2 标准版包括 Doctrine 和 Propel ORM。默认情况下使用教义。

在此处阅读有关这些 ORM 以及如何在 Symfony2 中使用它们的更多信息：[教义](http://symfony.com/doc/current/book/doctrine.html)或[推进](http://symfony.com/doc/current/book/propel.html)。

# java - 在 android 中使用 HTTPClient 处理 Post 请求时出现“无法从 STDIN 读取 CGI 输入”

> ID：13258171
> 
> 赞同：1
> 
> 时间：2012-11-06T19:40:54.870
> 
> 标签：java, android, html, post, httpclient

我目前正在开发一个android应用程序，提交一个post请求并处理相应的响应。

我可以将 post 请求发送到相应的 URL，但是当我尝试检索响应时，我得到了一半的 HTML 内容，后面跟着“ ***Couldn't read CGI input from STDIN.AFTER ALLOC_READ 0*** ”

谁能帮我解决这个问题。

这是代码片段

```
private void processRequest(String... params){

        HttpPost post = new HttpPost("http://www.xyz.com");
        HttpParams httpParams = post.getParams();
        pnr = params[i];
        httpParams.setParameter("param1", params[i]);
        //User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1
        httpParams.setParameter(CoreProtocolPNames.USER_AGENT, "Mozilla/5.0 (Windows NT 6.1; WOW64; rv:14.0) Gecko/20100101 Firefox/14.0.1");

        post.setParams(httpParams);
        HttpClient client = new DefaultHttpClient();

        try {
            HttpResponse response = client.execute(post);

            HttpEntity entity = response.getEntity();

            try {
                processHtmlString(pnr, inputStreamToString(entity.getContent()).toString());
            } catch (IllegalStateException e) {
                e.printStackTrace();
            } catch (Exception e) {
                e.printStackTrace();
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        } finally{
            client.getConnectionManager().shutdown();
        }
  }

   private String processHtmlString(String pnr, String htmlString) throws Exception{

    int index = 0;
    while(index < htmlString.length()){
        int endIndex = (index + 3000) < (htmlString.length()) ? (index + 3000) : htmlString.length();
        Log.i("HttpHelper1","HTML1 : "+htmlString.substring(index, endIndex));
        index += 3000;
    }
    } 
```

并且输出是............无法从 STDIN.AFTER ALLOC_READ 0 读取 CGI 输入

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:48:49.013

看起来您没有正确地形成请求（您将参数放入相同的部分标题中，而不是在正文中）：试试这个。

```
 List<NameValuePair> bodyParams = new ArrayList<NameValuePair>();
    bodyParams.add(new BasicNameValuePair("param1", params[i]);
    if (bodyParams.size() > 0) {
        try {
            // Include the request body
            post.setEntity(new UrlEncodedFormEntity(bodyParams));
        } catch (UnsupportedEncodingException e) {
            throw new IllegalStateException("Body parameters produced unsupported encoding?", e);
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:58:30.333

不要使用字符串，使用实体本身提供的 InputStream。字符串的长度有限，这可能会导致您的问题。直接从流中读取。

# c++ - 不能在从 std::vector 继承的类中键入定义迭代器

> ID：13258175
> 
> 赞同：0
> 
> 时间：2012-11-06T19:41:04.883
> 
> 标签：c++, visual-studio-2010, templates, vector

> **可能重复：**
> [为什么我需要在 g++ 中使用 typedef typename 而不是 VS？](https://stackoverflow.com/questions/642229/why-do-i-need-to-use-typedef-typename-in-g-but-not-vs)

我正在定义一个模板类如下

```
template <class T>
class MyVector : public std::vector<boost::shared_ptr<T>>
{
public:
   typedef MyVector::iterator MyIter;
}; 
```

我在 typedef 中收到此错误`MyIter`

```
error C4430: missing type specifier - int assumed. Note: C++ does not support default-int 
```

我正在使用 VS 2010 进行编译，我已确保包含 for`vector`和`boost::shared_ptr`存在。如果我删除模板`T`并将其替换为`int`所有编译没有错误的内容。

我错过了什么？我想定义一个模板类并 typedef 迭代器。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T19:50:42.080

这个问题在这里得到了很好的回答： [Why do I need to use typedef typename in g++ but not VS?](https://stackoverflow.com/questions/642229/why-do-i-need-to-use-typedef-typename-in-g-but-not-vs)

但长话短说，您必须以这种方式使用关键字*typename*：

```
typedef typename MyVector::iterator MyIter; 
```

因为在第一遍（验证模板语法）中，编译器并不真正知道*MyVector::iterator*是类型还是变量（它实际上将在专用模板上是什么）。所以暗示它是一种类型可以解决这个问题。

# ios - 核心数据自动迁移后fetch返回错误对象

> ID：13258178
> 
> 赞同：1
> 
> 时间：2012-11-06T19:41:07.757
> 
> 标签：ios, core-data

从我正在开发的旧版本的应用程序更新到下一个版本的 iOS 中的自动轻量级迁移有一个奇怪的问题。

在 iOS5 和 6 中，我没有问题。

特别是在 iOS4*中*（我不支持更早的版本），迁移后，查询一种类型的对象会返回类型不正确的对象。例如，如果我对 Client 对象进行了 fetch，我会取回一个 DataRecords 数组。并非所有对象都会发生这种情况，但它是……一种致命的问题。

这似乎是由核心数据中超过 50 个实体类型触发的。我使用了我的旧数据模型并从它派生了一个新版本（并将其设置为新的默认值），我所做的只是向它添加了 4 个实体定义。而在 iOS4 中，问题就出现了。

有任何想法吗？我在 Apple 文档中找不到任何关于这种限制的信息。

谢谢！

# ruby-on-rails - 在不使用模型的情况下，在 Rails 视图中对电话号码进行表单字段验证的最佳方法是什么？

> ID：13258179
> 
> 赞同：0
> 
> 时间：2012-11-06T19:41:10.197
> 
> 标签：ruby-on-rails, validation, phone-number, form-fields

我的 index.html.erb 视图中有以下表单字段：

```
 <%= form_tag("/calls/call", :method => "post") do %>
  <br />
  <%= text_field_tag(:call_to, "Number to call") %>
  <br />
  <%= text_field_tag(:call_from, "Number to call from") %>
  <br />
  <%= submit_tag("Dial") %></a>
  <br />
<% end %> 
```

我想将该字段限制为仅允许 10 位美国电话号码而不使用模型验证（因为没有模型）。

可能有很多方法可以做到这一点，但是你们认为最简单的实现方式是什么？

我试过使用'active_attr' gem，但运气不佳。使用“active_attr”，我创建了一个名为 Call 的模型。这是模型的样子：

```
class Call

include ActiveAttr::Model

  attribute :call_to
  attribute :call_from

  # attr_accessible :call_to, :call_from

  validates_presence_of :call_to
  validates_presence_of :call_from
end 
```

我的控制器如下所示：

```
class CallsController < ApplicationController

  def call

    call_to = params["call_to"]

    call_from = params["call_from"]

    call_to.to_i
    call_from.to_i

    puts call_to
    puts call_from

  end 

end 
```

我是否应该在控制器中实例化 Call 类的实例或类似的东西？

```
@call = Call.new 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:44:53.627

一种客户端选项是使用 HTML5 type=tel 输入。[这是](http://www.w3.org/TR/html-markup/input.tel.html)一些文档的链接。不过，您仍然需要一些服务器端验证。

# apache - 用apache忽略大小写

> ID：13258181
> 
> 赞同：2
> 
> 时间：2012-11-06T19:41:22.963
> 
> 标签：apache, ubuntu, webserver

我有一个网站，我被迫从 Windows 服务器移动一堆 pdf 文件，其中许多文件都有大写。如果有人在没有正确大小写的情况下指向文件的链接，这当然会显示文件未找到。这是一个大问题，因为我的客户有许多指向这些文件的链接，其中包含无数的案例选项。

我在 apache 中启用了拼写模块，它似乎有助于忽略 url 的大小写，但不适用于 PDF。

有没有人可以解决这个问题？

我按照以下说明启用拼写模块：[http ://keystoneit.wordpress.com/2007/02/19/making-apache-case-insensitive/](http://keystoneit.wordpress.com/2007/02/19/making-apache-case-insensitive/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T06:09:18.903

由于它是 *nix 框而不是 apache 下的文件系统功能，因此您可以使用 shell 或使用某些服务器端脚本语言将所有 pdf 文件批量重命名为小写，并且可以

*使用htaccess*将所有不匹配的 pdf 请求重定向到指南页面，您可以在其中通知用户为 pdf 文件键入小写字母，以及

你可以给他从url中提取的文件名的小写字母下载链接..

# javascript - Raphael.js 动画方法是否在 2.0 版本中发生了变化？

> ID：13258184
> 
> 赞同：0
> 
> 时间：2012-11-06T19:41:34.267
> 
> 标签：javascript, animation, raphael

从 2009 年开始，这个经常被引用的 Raphael.js[教程](http://net.tutsplus.com/tutorials/javascript-ajax/an-introduction-to-the-raphael-js-library/)（参见“示例 6”）在 jsfiddle 中使用 Raphael 版本 1.5.2 而不是版本 2.0 进行动画处理。它*渲染*，它只是没有*动画*。

```
var paper = new Raphael(document.getElementById('canvas_container'), 500, 500);

var tetronimo = paper.path("M 250 250 l 0 -50 l -50 0 l 0 -50 l -50 0 l 0 50 l -50 0 l 0 50 z");

tetronimo.attr(
   {
       gradient: '90-#526c7a-#64a0c1',
       stroke: '#3b4449',
       'stroke-width': 10,
       'stroke-linejoin': 'round',
       rotation: -90
   }
);

tetronimo.animate({rotation: 360}, 2000, 'bounce'); 
```

[http://jsfiddle.net/cdW3u/](http://jsfiddle.net/cdW3u/)

为什么？似乎没有不同的“动画”语法，（尽管没有变更日志，所以这并不完全清楚。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:04:47.340

旋转属性已替换为变换属性，试试这个：

```
tetronimo.animate({'transform':"r360"}, 2000, 'bounce'); 
```

# apache - 将子域重定向到端口并使用 Java 套接字连接

> ID：13258188
> 
> 赞同：2
> 
> 时间：2012-11-06T19:41:45.953
> 
> 标签：apache, sockets, wamp

我正在尝试从子域重定向到特定端口，例如`sub1.domain.com`重定向到`domain.com:1337`. 但直接，而不是通过网页。我正在制作一个Java程序来连接到子域，并且套接字像这样连接`Socket --> sub1.domain.com --> domain.com:1337`，中间没有页面。就像[这篇文章](https://stackoverflow.com/questions/12183112/redirect-non-http-traffic-to-a-port-based-on-a-subdomain)一样。

另外，如果我将其添加到我的 httpd 配置中

```
<VirtualHost *:80>
    Servername sub1.domain.com
    redirect / http://domain.com:1337/
</VirtualHost> 
```

它连接到网站，但获取重定向页面的 html，而不是服务器端连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:00:52.887

您正在尝试做的事情可以通过 mod_proxy 指令来完成。您应该使用它而不是重定向。就像是：

```
<VirtualHost *:80>
  ServerName sub1.domain.com
  ProxyPass / http://domain.com:1337/
  ProxyPassReverse / http://domain.com:1337/
  ProxyPreserveHost On
</VirtualHost> 
```

# activerecord - Rails 3 - 范围

> ID：13258189
> 
> 赞同：0
> 
> 时间：2012-11-06T19:41:56.440
> 
> 标签：activerecord, ruby-on-rails-3.2

我的模型设置类似于：

```
class Book < ActiveRecord::Base
  has_many :histories, as: :object
end

class Magazine < ActiveRecord::Base
  has_many :histories, as: :object
end

class Action < ActiveRecord::Base
  belongs_to :object, polymorphic: true

  default_scope order(:done_at)

  # a history contains an action and the time that action 
  # occurred on the object it belongs to
end 
```

现在，我想获取所有对象上发生的 5 个最新操作的列表。所以我可以做类似的事情：

```
Action.limit(5) 
```

但是，问题在于，如果最近在同一本书上发生了两个动作，则将检索这两个动作。我只想检索最新的。我如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T14:27:18.080

发现我想要的是组选项。所以我可以做类似的事情：

```
Action.group(:object_id).group(:object_type).limit(5) 
```

# android - 内存不足错误 - 位图大小

> ID：13258192
> 
> 赞同：0
> 
> 时间：2012-11-06T19:42:12.447
> 
> 标签：android

我想显示此图像并将其上传到服务器。

我正在使用相机应用程序拍照并将照片的文件路径返回到活动。我在某些手机上遇到内存不足错误，因为我尝试在设备之间导入恒定的图像大小。

如何在手机内存限制内工作的同时将最大的图像尺寸上传到服务器？

代码如下：

请求加载 Aync

```
GetBitmapTask GBT = new GetBitmapTask(dataType, path, 1920, 1920, loader);
GBT.addAsyncTaskListener(new AsyncTaskDone() 
{
    @Override
    public void loaded(Object resp) 
    {               
        crop.setImageBitmap((Bitmap)resp);
        crop.setScaleType(ScaleType.MATRIX);
    }

    @Override
    public void error() {
    }
});

GBT.execute(); 
```

引发 OOM 错误的异步任务

```
public class GetBitmapTask extends AsyncTask<Void, Integer, Bitmap> 
{

 ...

@Override
public Bitmap doInBackground(Void... params) 
{
    Bitmap r = null;

    if (_dataType.equals("Unkown"))
    {
        Logger.e(getClass().getName(), "Error: Unkown File Type");
        return null;
    }
    else if (_dataType.equals("File")) 
    {   
        Options options = new Options();            
        options.inJustDecodeBounds = true;

        //Logger.i(getClass().getSimpleName(), _path.substring(7));

        BitmapFactory.decodeFile(_path.substring(7), options);

        options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

        Logger.i(getClass().getSimpleName(), 
                "height: " + options.outHeight +
                "\nwidth: " + options.outWidth +
                "\nmimetype: " + options.outMimeType +
                "\nsample size: " + options.inSampleSize);

        options.inJustDecodeBounds = false;
        r = BitmapFactory.decodeFile(_path.substring(7), options);

    } 
    else if (_dataType.equals("Http")) 
    {
        r = _loader.downloadBitmap(_path, reqHeight);

        Logger.i(getClass().getSimpleName(), "height: " + r.getHeight() +
                                            "\nwidth: " + r.getWidth());
    }

    return r;
}

public static int calculateInSampleSize( Options options, int reqWidth, int reqHeight) 
{
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    while (height / inSampleSize > reqHeight || width / inSampleSize > reqWidth) 
    {
        if (height > width)
        {
            inSampleSize = height / reqHeight;
            if (((double)height % (double)reqHeight) != 0) 
            {
                inSampleSize++;
            }
        } 
        else 
        {
            inSampleSize = width / reqWidth;
            if (((double)width % (double)reqWidth) != 0) 
            {
                inSampleSize++;
            }
        }
    }
    return inSampleSize;
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T22:26:55.140

您可以为相机提供指向要将图像保存到的文件的 uri：

```
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
intent.putExtra(MediaStore.EXTRA_OUTPUT, mDefaultPhotoUri); // set path to image file 
```

然后，您可以将该文件上传到您的服务器，这样您就有了完整的位图大小。另一方面，没有必要（并且在许多设备上没有办法）在 UI 中解码和显示位图 1920x1920（或类似），它太大了。

希望这可以帮助。

# jquery - 用 datejs 和 timejs 计算时间

> ID：13258193
> 
> 赞同：1
> 
> 时间：2012-11-06T19:42:14.430
> 
> 标签：jquery, datejs

我正在尝试使用 datejs 和 timejs 计算时间，但我没有得到它。

我怎样才能做到这一点？

```
var startTime ="20:55",
    endTime ="22:33",    
    st = (startTime.toString("HH:mm")),
    et=(endTime.toString("HH:mm"));
console.log(new TimeSpan(et-st));

logged: NaN:NaN:NaN { milliseconds=NaN, days=NaN, hours=NaN 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:09:54.843

```
var startTime = Date.parse("20:55"),
    endTime = Date.parse("22:33");

console.log(new TimeSpan(endTime - startTime)); 
```

`startTime`和`endTime`是字符串，你希望它们是毫秒。

*编辑：我最初`.getTime()`在 s 的末尾`Date.parse()`，但正如 geoffrey.mcgill 指出的那样，没有必要。*

# python - 表达以下内容的更简单，更pythonic的方式是什么？

> ID：13258197
> 
> 赞同：3
> 
> 时间：2012-11-06T19:42:25.710
> 
> 标签：python

```
return not a and not b 
```

^ 如何以更好的格式表达这一点

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-06T19:43:47.407

也许是[德摩根定律？](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)

```
return not (a or b) 
```

我认为在这一点上它足够简单

# android - Eclipse环境看不到LG VS950手机

> ID：13258199
> 
> 赞同：2
> 
> 时间：2012-11-06T19:42:28.933
> 
> 标签：android, eclipse, mobile

我已经阅读并尝试了所有我能找到的东西，尽管很多答案都是旧的。我正在 Windows Vista 上开发。（我知道，我知道......）我试过重新安装驱动程序，将USB模式设置为“仅充电”，打开“USB调试”，手动关闭并重新启动adb服务器，重新启动PC和电话，打开和打开......所有文件共享和更新实用程序都能正常工作。只是 Eclipse 不会说话。手机正在运行 4.0.4。所以 4.0.3 是 SDK 最接近的版本。我还不能发布图片。但是“选择正在运行的 Android 设备”对话框从不显示我的设备。设备列表始终为空。

# ruby-on-rails - delay_job pid 文件位置

> ID：13258203
> 
> 赞同：2
> 
> 时间：2012-11-06T19:42:47.283
> 
> 标签：ruby-on-rails, ruby-on-rails-3, delayed-job

有谁知道如何配置delayed_jobs 将pid 文件放在另一个文件夹中？我将 pid_dir 视为一个选项，但不确定如何在初始化程序或脚本/延迟作业中包含该选项。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T20:44:29.347

好的，它并不漂亮，但这是一种解决方案。我修改了delayed_job 脚本，这样无论它如何被调用（命令行、capistrano 等），它都将始终使用我指定的pid 位置。

这一行只是将参数添加到脚本中：

```
ARGV << "--pid-dir=#{RAILS_ROOT}/pids" 
```

对于上下文，这是整个修改后的 script/delayed_job 文件：

```
#!/usr/bin/env ruby
require File.expand_path(File.join(File.dirname(__FILE__), '..', 'config', 'environment'))
require 'delayed/command'

# Will always specify the pid directory
ARGV << "--pid-dir=#{RAILS_ROOT}/pids"

Delayed::Command.new(ARGV).daemonize 
```

# python - Python中字典的替代方案 - 需要通过命名键引用值并按插入顺序迭代

> ID：13258211
> 
> 赞同：3
> 
> 时间：2012-11-06T19:43:27.607
> 
> 标签：python, dictionary, loops

我正在使用 Python 和 Django，并且将 JSON 对象作为 Python 字典返回，但我并不满意，因为我无法按照插入的顺序遍历字典的元素。

如果我按如下方式创建字典：

```
measurements = {
  'units': 'imperial',
  'fit': request.POST[ 'fit' ],
  'height': request.POST[ 'height' ],
  'weight': request.POST[ 'weight' ],
  'neck': request.POST[ 'neck' ],
  # further elements omitted for brevity
} 
```

我可以尝试像这样迭代它：

```
for k,v in measurements.iteritems():
  print k, 'corresponds to ', v 
```

结果是：

```
shoulders corresponds to  shoulders_val
weight corresponds to  weight_val
height corresponds to  height_val
wrist corresponds to  wrist_val
... 
```

我还尝试使用 sorted()，它按字母顺序遍历我的元素

```
bicep corresponds to  bicep_val
chest corresponds to  chest_val
fit corresponds to  fit_val
height corresponds to  height_val
... 
```

我是 Python 新手。我希望找到某种方法来通过命名键（如measurements['units']）引用我的字典元素，但仍然能够按照它们的创建顺序遍历这些元素。我知道那里有一个[有序的字典模块](http://docs.python.org/2/library/collections.html#ordereddict-examples-and-recipes)，但我想远离非标准包。任何其他标准 Python 数据结构（列表、数组等）是否允许我按插入顺序迭代并通过命名键引用值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T19:47:48.253

[`collections.OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict)如果您使用的是 py2.7 或更新版本， 您可以使用 a来保留插入顺序。**这是标准库的一部分**。对于旧版本，有一个[activestate 配方](http://code.activestate.com/recipes/576693/)浮动，您可以将其复制并用作您的包/模块的一部分。否则，标准库中没有任何东西可以做到这一点。

您可以对`dict`自己进行子类化并使其记住插入的顺序——例如将信息存储在列表中——但是当标准库中已经存在一些新版本的东西和你可以复制的配方时，这就太过分了如果您想支持旧版本，/paste 很容易获得。

* * *

请注意，如果您将字典传递给它们，则接受字典 ( `__init__`, `update`) 的字典方法将无法正确排序：

```
import collections
dd = collections.OrderedDict({
  'units': 'imperial',
  'fit': 'fit' ,
  'height': [ 'height' ],
  'weight': [ 'weight' ],
  'neck': [ 'neck' ],
})

print( dd )  #Order not preserved

#Pass an iterable of 2-tuples to preserve order.
ddd = collections.OrderedDict([
  ('units', 'imperial'),
  ('fit', 'fit') ,
  ('height', [ 'height' ]),
  ('weight', [ 'weight' ]),
  ('neck', [ 'neck' ]),
])

print( ddd ) #Order preserved 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T19:47:37.380

`OrderedDict`在`collections`模块中，这是核心 Python 发行版的重要组成部分（至少，正如 mgilson 指出的，在 2.7+ 中）。

OrderedDict 在 CPython 2.7、3.1、3.2 和 3.3 中默认可用。它在 2.5、2.6 或 3.0 中不存在。

# php - 我可以在 JavaFX 中将自签名证书添加到我的 WebEngine 以连接到 https Web 服务器吗？

> ID：13258212
> 
> 赞同：8
> 
> 时间：2012-11-06T19:43:27.643
> 
> 标签：php, ssl, https, javafx-2

我有一个 JavaFX-2.2 应用程序，它使用 web 引擎从 web 服务器加载一些 php 和 html 页面。我的应用程序和 Web 服务器不在同一台机器上。我的登录 php 页面使用自签名证书。在webengine所在的客户端，我想使用由相同CA签名的客户端证书作为服务器证书连接到该php。我希望通过这种方式，只有我的应用程序才能访问服务器页面。我已经阅读了 webengine [api](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html)，但我还没有找到这样做的方法。谷歌搜索也返回了一些引理。

我可以这样做吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T05:58:30.417

您可能可以添加一个，但每次访问者访问您的站点时，它都会显示“此站点的安全性无法信任”页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-01T10:02:47.613

据我了解，您想使用 SSL 授权。1.您的服务器作为服务器签名。2\. 您的应用程序作为客户端签名。

只有两个标志可以连接。没有其他服务器，没有其他客户端。

在这种情况下，您必须在客户端中集成服务器公钥。和服务器中的客户端公钥。（使用不同的 API 和方法）几乎所有语言和服务器都可以在 SSL 授权下正常工作。

您可以使用自签名密钥，也可以在此处生成免费对：www.startssl.com

# c++ - 访问多维数组是否比访问线性数组慢？

> ID：13258215
> 
> 赞同：1
> 
> 时间：2012-11-06T19:43:35.520
> 
> 标签：c++, arrays

我正在为我的 3D 几何库开发一个 4x4 矩阵 C++ 类。我对如何以更有效的方式表示矩阵数据值有些困惑。

那是因为[矩阵和四元数常见问题解答](http://www.j3d.org/matrix_faq/matrfaq_latest.html)说：

> 使用二维数组也会导致 CPU 性能损失，因为 C 编译器通常会使用乘法运算来解析数组索引操作。因此，坚持使用线性阵列会更有效。

1.  访问多维数组真的比线性数组慢吗？
2.  我真的应该更喜欢线性数组而不是多维来存储 4x4 矩阵数据值吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-10T14:58:35.627

我知道的大多数实现都使用带有包装器的 1D 数组，或者通过 MACROS 或方法来访问 2D 数据。我自己不能说哪个更快，我几乎看不出这真的很重要。

然而，话虽如此，我仍然建议使用一维数组，原因如下：

1.  更容易动态分配和释放（如果您想动态分配数据并维护 matrix[i][j] 模式，那么您正在分配一个数组数组 - 分配速度较慢更容易出现错误，您必须分别释放每个数组）
2.  如果您动态分配并且必须将数据复制到 3d 方库，例如 OpenGL 或 OpenCV，您就会遇到一些麻烦，因为它们需要数据是连续的。
3.  从文件或其他持久存储中存储和读取矩阵会更容易。
4.  即使您不动态分配，您也必须进行各种丑陋的铸造来处理将内存转移到 3d 方库。
5.  使用方法创建结构非常容易，无需乘法或不明确的索引即可有效地二维访问您的数据。或者就此而言，使用 MACROS 为您封装丑陋的乘法。
6.  您甚至可以创建一个看起来像下一个示例的结构，并保持一维数组的相同优点和二维数组的可读性：

```
 template<typename T>
struct Matrix4x4
{
    struct index
    {
        int row, col;
        index(int r = 0, int c = 0)
            : row(r), col(c){}
        index(index const & cp)
            : row(cp.row), col(cp.col)
        {
        }
        //Assignment ommited for brevity
    };
    /*
        Constructors, Assignments etc. ommited for brevity
    */
    T m00, m01, m02, m03;
    T m10, m11, m12, m13;
    T m20, m21, m22, m23;
    T m30, m31, m32, m33;

    T * toArray() const
    {
        return &m00;
    }
    T * toArray()
    {
        return &m00;
    }

    T * row(int r)
    {
        return (&m00) + r*4;
    }
    T * row(int r) const
    {
        return (&m00) + r*4;
    }

    T & operator()(int r, int c)
    {
        return *row(r)[c];
    }
    T const & operator()(int r, int c) const
    {
        return *row(r)[c];
    }

    T & operator[](index const & idx)
    {
        return row(idx.row)[idx.col];
    }
    T const & operator[](index const & idx) const
    {
        return row(idx.row)[idx.col];
    }

}; 
```

在您的代码中，您可以执行以下操作：

```
typedef Matrix4x4<double> Matrix4x4d;

Matrix4x4d mat;
/* You can do any of the following */
mat.m23 = 6.0;
mat(2,3) = 6.0;
mat[Matrix4x4d::index(2,3)] = 6.0;
mat.row(2)[3] = 6.0;
mat.toArray()[2*4 + 3] = 6.0;

#define M(m,r,c) (*((&m.m00) + r*4 + c))

M(mat,2,3) = 6.0; 
```

多年来，我自己实现了几个矩阵库，并且总是选择一维解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:47:30.320

您可以在第一维中存储指向一维数组的指针，然后在第二维中存储具有行长的一维数组。

据我回忆，间接比乘法成本更低。

访问/编辑成员的语法是相同的。唯一的区别是分配/解除分配数组的时间。

# regex - 包含未指定顺序字符的字符串的正则表达式

> ID：13258221
> 
> 赞同：0
> 
> 时间：2012-11-06T19:43:51.470
> 
> 标签：regex, string, permutation

当有像这样的字符串时

```
helloworld
worldhello
ollehdlrow 
```

是否有可以匹配所有这些情况的正则表达式？所以，基本上一个模式将**匹配所有包含所有字符的字符串，以未指定的顺序**。

我尝试使用

```
/[helloworld]{10}/ 
```

但这由于明显的原因不起作用，因为它也会匹配`eeeeeeeeee`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:03:22.293

您绝对不想为此使用正则表达式。

为了检查字符串中是否存在字符，在您的情况下，您必须使用积极的前瞻。`(?=a)`检查字符看起来像这样`a`。没关系。如果我们想检查包含该字符的字符串`a`，`b`我们可以做`/^(?=.*a)(?=.*b)/`. 如果我们要检查多个`a`s，就会出现问题。

查看此示例：[http ://regex101.com/r/iV2jC8](http://regex101.com/r/iV2jC8)

如您所见，正则表达式已被“告知”两次查找字母“a”。但是，第一种情况仍然匹配。这是因为引擎没有保存它最初找到第一个'a'的位置，因此下一个断言找到了相同的a。在所有三个示例中都是这种情况。所以实际上，它们都没有真正得到验证。

你必须做这样的事情：[http ://regex101.com/r/cR8eR4](http://regex101.com/r/cR8eR4)

正如您可能想象的那样，较大的模式会很快失控。

我希望这会有所帮助，祝你好运。

# assembly - 汇编理解 ldi 的高字节和低字节

> ID：13258223
> 
> 赞同：1
> 
> 时间：2012-11-06T19:43:56.083
> 
> 标签：assembly, cpu-registers

我无法理解下面的代码片段加载到每个寄存器中的内容。代码执行后每个寄存器会存储什么？

```
ldi r20, low(-1)
ldi r21, high(-1)
ldi r17, low(0x600)
ldi r18, high(0x600) 
```

编辑：修正了我的降价，对此感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T00:47:54.903

好的，既然这是 AVR 汇编，并假设 8 位寄存器（如 Atmega32 或类似的东西，从寄存器名称来看）。

首先，让我们看一下low() 和high() 在AVR Assembly 中的作用。根据[此](https://sites.google.com/site/avrasmintro/)消息来源和个人经验，它仅适用于 16 位数字，并给出高字节或低字节，左侧为最高有效位（MSB）。

-1 作为 16 位数字 = 0b1111111111111111 或 0xFFFF （两者相等），因为负数是使用[2 的补码](http://en.wikipedia.org/wiki/Two%27s_complement)计算的，所以取每个的 low() 和 high() 应该产生以下结果：

`ldi r20, low(0b1111111111111111)`
`ldi r21, high(0xFFFF)`

r20 和 r21 都将保存 0b11111111 的值，或十进制表示法中的 -1

至于其他的 0x600，我们先把它显示为一个完整的 16 位数字，这样更容易。0x600 == 0x0600 （只需在 MSB 位置输入 0，因为您实际上并没有添加任何内容）

如果我们取高（0x0600），我们得到前两个数字，高字节，或 0x06。
如果我们取低（0x0600），我们得到底部的两个数字，低字节，或 0x00。

# html - CSS 和 JS 外部链接服务器部署

> ID：13258227
> 
> 赞同：2
> 
> 时间：2012-11-06T19:44:22.893
> 
> 标签：html, css, twitter-bootstrap, zurb-foundation

我将 twitter bootstrap 和 Foundation (zurb) 用于两个演示单列页面。我可以在本地机器上轻松测试主题，但无法在自己的服务器上检测样式表和 js 文件。它托管在 hostgator 上，我不确定是什么导致了问题。

如果我没有错误地将目录上传到服务器上，则不必对服务器端托管产生任何影响，不是吗？我只是从引导网站上传基本的 html 页面示例，并在文本内容方面进行了细微更改。

所以

```
<link href="css/bootstrap.min.css" rel="stylesheet" media="screen"> 
```

这个 css 文件引用也应该在服务器部署之后获取。我还尝试使用 ../ 并使用网站 URL。

```
<link href="../css/bootstrap.min.css" rel="stylesheet" media="screen">
<link href="http://mywebsite.com/css/bootstrap.min.css" rel="stylesheet" media="screen"> 
```

我不知道这里出了什么问题，因为在服务器端我可以看到文本内容，但不能看到 css 和 js 解析。

链接外部css或js的三种方法都错了？这里可能是什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T19:50:41.723

尝试

```
<link href="/css/bootstrap.min.css" rel="stylesheet" media="screen" /> 
```

使用站点根目录的路径

> /css/bootstrap.min.css

并关闭`<link />`元素`/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:07:51.700

既然我已经看到了这个例子，我可以说这绝对是css文件的路径有问题。我通过在 DOM 检查器中修复来确认。

您可以将您的 CSS 上传到此处：

`http://sparxengine.net/assets/css/bootstrap.css`

或者您可以更改 HTML 模板以引用已上传的此文件：

`http://sparxengine.net/css/bootstrap.css`

# asp.net-mvc-4 - .NET MVC 4 内容协商不起作用

> ID：13258233
> 
> 赞同：0
> 
> 时间：2012-11-06T19:44:40.727
> 
> 标签：asp.net-mvc-4, asp.net-web-api, content-negotiation

我有一个使用 .NET MVC 4 在 C# 中实现的 Web 服务，但由于某种原因，尽管我发送了一个 Accept: application/json 标头，但它们总是以 XML 格式返回数据。有什么想法可能是错的吗？

提前致谢

**更新**：控制器代码如下所示

```
public HttpResponseMessage GetData()
{
     ...
     DashboardInformation d = new DashboardInformation()
     {
            Name = "Test",
            employees = employees,
            shortcuts = shortcuts,
            notes = dashboardNoteList,
            timeEntries = dashboardTimeList,
            timeTracker = timeTracker,
            timeTrackerFromDate = ToUnixTimestamp(fromDate),
            timeTrackerToDate = ToUnixTimestamp(toDate),
            timeSummary = timeSummary,
            userInfo = uInfo
     };
     return Request.CreateResponse(HttpStatusCode.OK, d);
} 
```

**更新 2**：原始请求和响应

要求

```
GET /RestService/api/Dashboard/GetData HTTP/1.1
Host: xxx
Connection: keep-alive
Cache-Control: max-age=0
X-Requested-With: XMLHttpRequest
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.4 (KHTML, like Gecko)         Chrome/22.0.1229.94 Safari/537.4
Accept: application/json, text/javascript, */*; q=0.01
Referer: http://xxx/Firm4.0/dashboard.html
Accept-Encoding: gzip,deflate,sdch
Accept-Language: es-ES,es;q=0.8
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

回复

```
HTTP/1.1 200 OK
Cache-Control: no-cache
Pragma: no-cache
Content-Type: application/xml; charset=utf-8
Expires: -1
Server: Microsoft-IIS/7.5
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Tue, 06 Nov 2012 19:01:59 GMT
Content-Length: 3610
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:52:00.870

我发现了问题。有一个自定义的 IContentNegotiator 实现，它总是返回一个 XmlMediaTypeFormatter。谢谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:06:40.117

我需要更多信息来诊断您的问题

1.  是否以任何方式修改了默认格式化程序集？例如，在 App_Start\WebApi.Config.cs 中：

    ```
     config.Formatters.Clear();
        config.Formatters.Add(...); 
    ```

2.  您尝试调用的 ApiController 中的操作如何？

3.  您能否向我们提供您的原始请求和响应消息？

# jquery-validate - 当 json_encode 引用布尔值时，JQuery 验证失败

> ID：13258234
> 
> 赞同：1
> 
> 时间：2012-11-06T19:44:50.927
> 
> 标签：jquery-validate, boolean, quotes, json

我发现使用 json_encode 创建一个字符串以作为元数据传递给 JQuery Validate（bassistance 版本）的问题：它将布尔值括在 JQuery Validate 不喜欢的引号中。这是我对 json_encode 的输入：

```
Array
(
    [messages] => Array
    (
        [required] => notEmpty
    )

    [required] => true
) 
```

输出是

```
{"messages":{"required":"notEmpty"},"required":"true"} 
```

但 JQuery Validate 只是忽略它。但是，如果我破解我的代码并将其更改为：

```
{"messages":{"required":"notEmpty"},"required":true} 
```

验证工作正常（注意 true 周围缺少双引号）。

我没有看到任何与布尔值相关的 json_encode 选项，但是是否有任何选项可以获取 Validate 所需格式的字符串（除了编写我自己的 json_encode）？

# android - 数字小键盘后的Phonegap Android文本小键盘

> ID：13258236
> 
> 赞同：0
> 
> 时间：2012-11-06T19:44:53.183
> 
> 标签：android, html, cordova, text, input

我在一个表单中有两个输入，首先我有这个：

```
<input id="mynumber" type="number"> 
```

然后：

```
<input id="myname" type="text"> 
```

每当我在聚焦数字输入后聚焦文本输入时，就会出现数字键盘而不是文本键盘。

有没有办法强制输入文本键盘？我讨厌不得不取消文本输入的焦点，然后重新调整焦点以使正确的键盘出现。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:27:00.877

根据我的阅读，似乎只有“数字”、“网址”和“电子邮件”字段类型会触发键盘的更改。

虽然我没有对此进行测试，但您可能希望将“文本”字段切换为“电子邮件”或“网址”，看看是否符合您的需要。

# android - Android Content Area 改动（九补丁背景图）

> ID：13258238
> 
> 赞同：0
> 
> 时间：2012-11-06T19:45:01.797
> 
> 标签：android, android-listview, nine-patch

我有一个自定义的列表视图，我使用 setBackground 方法添加了一个带有九个补丁的背景图像，但问题是内容区域不受尊重我有超出的文本，而当我手动设置属性时，列表看起来很好

如何解决这个问题？

![在此处输入图像描述](../Images/0890504b69efba816b7d7a9c676aa836.png)

![在此处输入图像描述](../Images/3d8b1f4b52ce87e90aecfc1886368eaa.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:45:04.133

这甚至不是一个有效的 9 补丁。您应该连接底部和右侧边界上的点（以定义您的内容区域），并且您的 9-patch 应该比这小得多。从左到右的空白区域除了一个像素外都是多余的，可以删除。确实，最好将旋转的 TextView 放置在某种布局中（线性、相对等）

# objective-c - @private - 使用与否？

> ID：13258241
> 
> 赞同：3
> 
> 时间：2012-11-06T19:45:12.223
> 
> 标签：objective-c, cocoa-touch, class-design, encapsulation, private-members

当您单独工作或与可以访问应用程序的所有属性、ivars 的团队一起工作时，在 Xcode 中使用 @private 指令有什么意义？

是否有内存使用、性能等优势？或者这只是大型团队的一个东西，其中一个部分不应该使用将来可以改变的东西？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T19:48:31.573

`@private`在类声明中使用`@interface`确保没有其他类可以访问 ivars。这对于封装很重要。这对于单个开发人员而言与对于数十名开发人员的团队一样重要。

封装可确保您仅将提供的 API 用于一个类，而无需知道它在内部是如何工作的。一段时间后，您可能希望更改实施。这应该对任何已经使用该类的类没有影响。API 不会改变，只会改变它的实现。

请记住，只能在给定类的实现中访问 ivars。没有其他类应该有权访问这些 ivars。否则，您的代码将变得非常脆弱且难以维护。

编辑：使用现代 Objective-C，您甚至不应该在 .h 文件中有任何 ivars。将它们移动到@implementation 行，保证它们是私有的，使用 .h 文件的人甚至都不知道你有什么 ivars。

# c++ - c ++试图初始化我在for循环中编写的类的对象

> ID：13258243
> 
> 赞同：0
> 
> 时间：2012-11-06T19:45:22.660
> 
> 标签：c++, object, initialization

这可能是一个非常基本的 C++ 问题，但我有点生疏。我正在尝试建立一个带有点的迷宫类型数据结构。这是我的代码。

```
class Point{

    public :

    int xCoord;
    int yCoord;
    bool visited;

    //constructors
    Point(){}
    Point(int x, int y){
        xCoord = x;
        yCoord = y;
        visited = false;
    }
    int makeVisited(){
        visited = true;
    }

    int makeUnvisited(){
        visited = false;
    }
};

class Maze{

    public :

    int width;
    int height;
    Point ** grid; 

    //constructors
    Maze(){}
    Maze(int X, int Y){
        width = X;
        height = Y;
        grid = new Point*[width];
        for(int i = 0; i < width; i++){
            grid[i] = new Point[height];
            for(int j = 0; j < height; j++){
                grid[i][j] = new Point(i, j);
            }
        }
    }
}; //end of Maze class 
```

当我尝试分配 grid[i][j] 一个新的点实例时，我收到一条错误消息

"error no operator "=" 匹配这些操作数"

有人能告诉我我在初始化点对象时做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:54:33.243

您的 for 循环应如下所示：

```
for(int i = 0; i < width; i++){
    grid[i] = new Point[height];
    for(int j = 0; j < height; j++){
        grid[i][j] = Point(i, j);
    }
} 
```

您的数组按值包含其所有点，它不包含指向它们的指针。我认为这是您正确的设计选择。但这意味着您不要尝试将指针放在那里。的类型`grid[i][j]`是`Point`，不是`Point *`。`new`运算符将为`Point`堆上的对象分配空间并返回指向它的指针`Point *`。但是您的数组中已经有了一个完美的`Point`对象。

您的代码看起来像是习惯了 Java。在 C++ 中，您实际上可以直接包含值，而不是总是引用它们。您的所有点实际上都使用它们在读取的行中的默认构造函数进行了初始化`grid[i] = new Point[height];`。在那里您创建`height` `Point`对象，并调用它们的每个默认构造函数来初始化它们。

如果您使用我的代码，您稍后会从临时`Point`对象重新分配它们的值。这个对象的创建将被编译器优化为不存在，它会简单地变成直接从和分配已经存在的新值`xCoord`和。`yCoord``Point``i``j`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:49:28.997

由于`grid`被声明为 a `Point**`， then`grid[i][j]`的类型为`Point`。所以你不能分配`new Point`给这个。

* * *

您可以做的一件事是定义一个 setter 成员函数，例如：

```
void Point::set(int x, int y) {
  xCoord = x;
  yCoord = y;
} 
```

然后在你的循环中你可以使用：

```
grid[i][j].set(i, j); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T19:48:58.140

嗯，您需要 Point ***grid，因为您显然希望有 2 个暗淡的数组存储指针。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T19:54:17.287

编译器指出您没有该类的赋值运算符。您必须定义一个 'operator=' 方法来实现您想要做的事情。在这种情况下，您也最好使用向量。

# c# - 有没有办法下载气象局降雨雷达图像？

> ID：13258246
> 
> 赞同：0
> 
> 时间：2012-11-06T19:45:23.610
> 
> 标签：c#, image, api, internationalization, weather

我正在用 c# 开发一个天气雷达应用程序。它目前仅在美国有效，因为我还没有找到下载任何国际雷达的方法。对于美国来说，有一种从国家气象服务访问雷达的简单方法，他们将所有雷达图像保存[在这里](http://radar.weather.gov/ridge/RadarImg)，所有地图和叠加层以及文档保存[在](http://www.srh.noaa.gov/jetstream/doppler/ridge_download.htm)[这里](http://radar.weather.gov/ridge/Overlays)。是否有任何官方的气象局雷达馈送，或任何其他方式访问雷达图像？我在他们的[网站](http://www.metoffice.gov.uk/)上四处逛逛，没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:57:43.590

Met Office 似乎有一项名为[DataPoint](http://www.metoffice.gov.uk/datapoint)的服务。获取[API 密钥](http://www.metoffice.gov.uk/datapoint/support/API)并检查他们的[雷达功能](http://www.metoffice.gov.uk/datapoint/support/observation-layer-capabilities)。

# mongodb - mongodb 模式设计命名约定

> ID：13258248
> 
> 赞同：17
> 
> 时间：2012-11-06T19:45:35.273
> 
> 标签：mongodb, naming-conventions, database-schema

所以我有一个东西叫

```
exports.create = function(projectJSON){

 var project = new ProjectModel({
   id : projectJSON.id,
   projectName : projectJSON.projectName ,
   authorName : projectJSON.authorName,
   firstPostDate : projectJSON.firstPostDate

 })
} 
```

**上述多词元素`firstPostDate`（驼峰式）的命名约定是否正确，或者它们是否应该`_`全部小写？**

我看到其他博客更喜欢它是小型大写字母..

编辑：

我还读到元素应该是单数而不是复数，即：

```
`comment` instead of `comments` for a blog schema design 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-06T19:50:55.903

我自己使用[Google 的 JSON 样式指南](https://google.github.io/styleguide/jsoncstyleguide.xml)，他们建议使用 camelCase 即**firstPostDate**。以下是部分摘录

**属性名称格式**

属性名称必须符合以下准则：

*   属性名称应该是具有定义语义的有意义的名称。
*   属性名称必须是驼峰式大小写的 ascii 字符串。
*   第一个字符必须是字母、下划线 (_) 或美元符号 ($)。
*   后续字符可以是字母、数字、下划线或美元符号。
*   应避免保留 JavaScript 关键字（可以在下面找到保留的 JavaScript 关键字列表）。

这些准则反映了命名 JavaScript 标识符的准则。这允许 JavaScript 客户端使用点符号访问属性。（例如，result.thisIsAnInstanceVariable）。这是具有一个属性的对象的示例：

```
{
  "thisPropertyIsAnIdentifier": "identifier value"
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-25T15:26:20.693

不需要缩短字段名称。

检查[文档](http://docs.mongodb.org/manual/faq/developers/#faq-small-documents)：

> 缩短字段名称会降低表达能力，并且不会为较大的文档提供相当大的好处，并且文档开销不是很重要。较短的字段名称不会减小索引的大小，因为索引具有预定义的结构。**一般来说，没有必要使用短字段名**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-15T08:55:30.897

# javascript - 在 For 循环内发生每次提交后如何保持延迟？

> ID：13258249
> 
> 赞同：1
> 
> 时间：2012-11-06T19:45:35.617
> 
> 标签：javascript

我想在每次提交后保持 10 秒的延迟

这是我的示例程序

```
<html>
 <head>
 <script type="text/javascript">
function sleep(ms)
    {
        var dt = new Date();
        dt.setTime(dt.getTime() + ms);
        while (new Date().getTime() < dt.getTime());
    }

function test() {
var windowCounter = 1; 
var myStringArray = [ "user1", "user2" , "user3" , "user4" ]
var len = myStringArray.length;
for (var i=0; i<3; ++i) {
   document.inform.target = windowCounter++; // a different target each time
    document.inform.submit();
}
}
</script>
 </head>
 <body >
  <form name="inform"   target="newWin" action="https://www.google.co.in/">
 <input type="hidden" name="throttle" value="999" />
    <input type="submit" value="go" onclick="test()">
  </form>
 </body>
</html> 
```

到目前为止，我已经尝试过这些选项

```
for (var i=0; i<3; ++i) {

if(i==1)
sleep(10000);
if(i==2)
sleep(10000);

   document.inform.target = windowCounter++; // a different target each time
    document.inform.submit();
} 
```

但仍然同时调用所有提交

然后

```
var windowCounter = 1;
for (var i=0; i<=2; i++) {
    setTimeout(function() {
        document.inform.target = windowCounter++; 
        document.inform.cid.value="XXXX";
        document.inform.pw.value="xxxxx";
        document.inform.submit();
    }, i*10000); // 
} 
```

但是当我添加这个超时时，我得到了一些 cr-ns-error-not-available （由于超时）

最后我试过了，但仍然被同时调用

```
 var len = 1;
    var len2 = 1;
    var len3 = 1;

    if(len==1)
    {
    sleep(4000);
       document.inform.target = 1; // a different target each time
        document.inform.submit();
    }

    if(len2==1)
    {
    sleep(4000);
       document.inform.target = 2; // a different target each time
        document.inform.submit();
    } 
```

有什么解决办法吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:49:39.323

您可以尝试创建这样的函数并调用它：-

```
 var i = 1;                     
   function A() {           
  setTimeout(function () {    
  i++;                    
  if (i < 10) {            
     A();            
  }                        
  }, 3000)
}

 A(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:56:05.380

我不太了解您的大部分问题，但这可能/可能有用：如果每个表单都有 test() 作为内联 onclick 函数，那么这可能应该以某种方式起作用。

```
var windowCounter = 0;
function test() { 
   windowCounter++;
   setTimeout(function(){
     if(windowCounter == 1) // bla
     else if(windowCounter == 2) // bla
  }, 10000);
} 
```

# c# - c# XElement.Parse() 从 yahoo API 检索 WOEID

> ID：13258253
> 
> 赞同：1
> 
> 时间：2012-11-06T19:45:49.563
> 
> 标签：c#, xml-parsing

我会用我已经做过的事情来解决问题。所以我有以下 XMLfile：

```
<places yahoo:start="0" yahoo:count="23" yahoo:total="23">
    <place yahoo:uri="http://where.yahooapis.com/v1/place/523920" xml:lang="en-us">
        <woeid>523920</woeid>
        <placeTypeName code="7">Town</placeTypeName>
        <name>Warsaw</name>
        <country type="Country" code="PL" woeid="23424923">Poland</country>
        ...
    </place>
    ...
</places> 
```

我跳过了不必要的部分（我相信至少如此）。无论如何，有 <places> 包含可变数量的 <place> 在这种特殊情况下它是 23。我执行以下代码：

```
List<XElement> list = XElement.Parse(e.Result).Elements().ToList(); 
```

结果，我有 23 个 XElements（位置）的列表，但由于某种原因，我无法获得 <woeid> 内的值波纹管代码不起作用:-(

```
foreach (XElement element in list) {
    String woeid = element.Element("woeid").Value;
    // ... sth else to do with each woeid
} 
```

你能帮我得到这些值吗？

[更新]

我想我已经通过从上下文菜单中获取页面源找到了您一直在要求 @LB 的内容，就是这样。你能帮助我吗？

```
<?xml version="1.0" encoding="UTF-8"?>
<places xmlns="http://where.yahooapis.com/v1/schema.rng" xmlns:yahoo="http://www.yahooapis.com/v1/base.rng" yahoo:start="0" yahoo:count="23" yahoo:total="23"> 
```

[解决了]

感谢您提供有关名称空间的提示。使用试验和错误方法我已经做到了。答案是，您必须在元素名称之前的括号中添加命名空间，如下所示。

```
String woeid = element.Element("{http://where.yahooapis.com/v1/schema.rng}woeid").Value; 
```

现在它只是简单地工作。再次感谢。

# django - Django Formsets：如何对表单集中的每个表单应用不同的验证？

> ID：13258258
> 
> 赞同：2
> 
> 时间：2012-11-06T19:46:29.913
> 
> 标签：django, formsets

我正在使用 Django 1.4 表单集，我想对表单集中的第一个表单执行不同的验证。

我有一个 LocationForm ，其中显示 4 个文本字段，允许用户输入最多 4 个位置：

```
class LocationForm(forms.Form):
    user_entered_address = forms.CharField(required=False, max_length=255)
    full_address = forms.CharField(max_length=255, required=False, widget=forms.HiddenInput())
    city = forms.CharField(max_length=255, required=False, widget=forms.HiddenInput())
    state = forms.CharField(max_length=255, required=False, widget=forms.HiddenInput())
    country = forms.CharField(max_length=255, required=False, widget=forms.HiddenInput())
    latitude = forms.CharField(required=False, widget=forms.HiddenInput())
    longitude = forms.CharField(required=False, widget=forms.HiddenInput())

LocationFormSet = formset_factory(LocationForm, extra=4, max_num=4) 
```

这非常适合显示输入字段，但我希望表单集中的第一个 LocationForm 是必需的，其余表单是可选的（这意味着用户必须在第一个表单中输入至少一个位置，但其余的是选修的）。

如果我修改表单，删除`required=False`：

```
 user_entered_address = forms.CharField(max_length=255) 
```

然后`user_entered_address`是所有表格所必需的。我觉得我需要编写一个自定义 clean() 方法，但我不知道如何找到第一个表单，确定是否`user_entered_address`为空白，如果是，则引发 ValidationError：

```
class BaseLocationFormSet(BaseFormSet):
    def clean(self):
        # How to do I find the first form and ensure user_entered_address isn't blank?

LocationFormSet = formset_factory(LocationForm, extra=4, max_num=4, formset=BaseLocationFormSet) 
```

或者这是错误的方法，有更好的方法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T19:57:32.667

您可以访问以下表格：

```
form = self.forms[0] 
```

因此，在您的清洁中，只需检查第一个表格并忽略其他表格。

```
form = self.forms[0]
title = form.cleaned_data['title']
if title is None:
    raise forms.ValidationError("Missing title") 
```

# haskell - ghc中的字节串链接

> ID：13258259
> 
> 赞同：7
> 
> 时间：2012-11-06T19:46:35.063
> 
> 标签：haskell, ghc, static-linking, bytestring

考虑以下简单代码：

```
import Crypto.Hash.SHA1 (hashlazy)
import qualified Data.ByteString as BS
main = return () 
```

我安装`cabal install --global bytestring`然后获得（在使用 ghc 7.4.1 的新安装的 Ubuntu 12.04 机器上）：

```
GHCi runtime linker: fatal error: I found a duplicate definition for symbol
   fps_minimum
whilst processing object file
   /usr/local/lib/bytestring-0.10.0.1/ghc-7.4.1/HSbytestring-0.10.0.1.o
This could be caused by:
   * Loading two different object files which export the same symbol
   * Specifying the same object file twice on the GHCi command line
   * An incorrect `package.conf' entry, causing some object to be
     loaded twice.
GHCi cannot safely continue in this situation.  Exiting now.  Sorry. 
```

我能用它做什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T13:25:16.923

这是一个钻石依赖问题。你有一个基于一个字节串版本构建的 cryptohash 版本，但 GHC 系统的其余部分是针对另一个版本构建的。因此，当包链接在一起时，会链接两个略有不同的字节串版本。

通常这是可以的，只要字节串类型是兼容的。

但是，bytestring 包含一个用于某些实用程序的小型 C 库。C 库具有非唯一符号，可防止重复链接，从而导致您的错误。

您需要确保 cryptohash 是针对相同版本的字节串构建的。

# ruby-on-rails - Rails - 避免表中的重复

> ID：13258260
> 
> 赞同：1
> 
> 时间：2012-11-06T19:46:36.707
> 
> 标签：ruby-on-rails, dry

我有一个数据表，我在其中遍历每个用户属性，并将其显示在一个表中。这似乎是很多重复，即使单词不一样，每个属性的过程都是一样的。有没有办法自动制作一个表头`attribute.titleize`和数据单元格的表格行`user.attribute`？

```
%table
  %tr
    %th First Name
    %td= @user.first_name
  %tr
    %th Middle Name
    %td= @user.middle_name
  %tr
    %th Last Name
    %td= @user.last_name 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:55:13.650

您可以进行`_attribute`局部渲染以呈现表格的单行：

```
# app/views/users/_attribute.html.haml
%tr
  %th= attribute.first.titleize
  %td= attribute.second

# app/views/users/show.html.haml
%table
  %tbody= render partial: 'attribute', collection: @user.attributes.to_a 
```

如果您不想渲染 的每个属性`User`，请在模型上创建一个方法，该方法返回您想要的属性并调用它而不是`@user.attributes`：

```
# app/models/user.rb
class User
  def public_attributes
    attributes.slice('first_name', 'middle_name', 'last_name')
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:51:13.553

也许你可以使用部分。

[http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials](http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials)

# c# - 将递归转换为迭代代码

> ID：13258274
> 
> 赞同：0
> 
> 时间：2012-11-06T19:47:46.660
> 
> 标签：c#, recursive-query

我想将递归代码“转换”为迭代代码。例子是：

```
 public int CalcTime(double AnnualIncome, int Time, double Value)
 {
     if (AnnualIncome / 12 > Value / Time) 
         return Time;
     else
         return CalcTime(AnnualIncome, Time + 1, Value);
 } 
```

我试过但不能...

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T19:50:24.703

尝试这个：

```
public int CalcTime(double AnnualIncome, int Time, double Value)
{
    while (AnnualIncome / 12 <= Value / Time) 
    {
        Time++;
    }
    return Time;
} 
```

同样正如@CodesInChaos 在上面的评论中指出的那样，最佳实践规定小写变量名：

```
public int CalcTime(double annualIncome, int time, double value)
{
    while (annualIncome / 12 <= value / time) 
    {
        time++;
    }
    return time;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:58:27.017

通过使用您自己的堆栈模拟 CPU 自然调用堆栈，最容易实现从递归到迭代的转换。这对于用递归函数自然解决的问题是有效的。（不是说这是最正确的做法）

在这种情况下，是这样的：（请注意，我不希望这段代码按应有的方式编译或运行，这只是我认为应该如何完成的一个示例）

```
Stack stack;
int time = 1; 
stack.add(time);

while(!stack.isEmpty)
{
   currentTime = stack.pop();

   if(AnnualIncome / 12 > Value / currentTime )
        return currentTime ;
   else
   {
        stack.push(time+1);
   }
} 
```

# android - 为什么 HierarchyViewer 的 findViewById 这么慢？

> ID：13258277
> 
> 赞同：3
> 
> 时间：2012-11-06T19:48:03.880
> 
> 标签：android, monkeyrunner

找到一些 UI 控件（例如按钮）需要 5-6 秒。

两个问题：

1）为什么这么慢？

2）有没有办法让它更快或寻找UI控件的替代解决方案（在monkeyrunner测试范围内）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T19:47:42.420

我稍微查看了 Android 源代码，发现当您在 monkeyrunner 中使用 findViewById 搜索控件时，它实际上会遍历 Android 中所有正在运行的窗口上的所有控件。

因此，如果您有一些 Activity 被暂停（并且不可见），未被销毁，findViewById 将花时间搜索它。

我现在有几个想法

a) 在 HierarhyViewer 上使用 getFocusedWindowName API 检查是否显示了正确的窗口。尝试先搜索此窗口，然后在 findViewById(id, parent) 方法中将其指定为父窗口。这样，我们就不会搜索 Android 上的所有窗口。

2) 尝试绕过 com.android.chimpchat.hierarchyviewer.HierarchyViewer 提供的接口，直接进入 DeviceBridge 类（它为相同的协议提供了一点低级）。在这种情况下，我们可以精确地指出应该搜索哪个窗口，而不是获取所有窗口的所有控件。

正如罗曼指出的那样。HierarchyViewer 将来可能会发生变化。但是，作为测试自动化的一部分，我没有看到任何其他替代品。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:53:00.413

通常只需找到一次控件并将其存储在字段中就足够了。

在适配器视图的情况下，它们通常将对其子视图的所有引用存储在一个对象中，然后使用 setTag() 将该对象附加到视图。稍后可以使用 getTag() 为同一视图检索它。您可以在网上搜索 ViewHolder 示例以查看此技术

我怀疑虽然它需要 5-6 秒，但也许你有这么多的控​​制..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T21:02:10.010

[AndroidViewClient](https://github.com/dtmilano/AndroidViewClient)虽然不是更快，因为它依赖于与 HierarchyViewer 相同的协议，但它可以提供更简单的替代方法来编写测试。

看看[例子](https://github.com/dtmilano/AndroidViewClient/tree/master/AndroidViewClient/examples)。在某些情况下，AndroidViewClient 为已知的 monkeyrunner 错误提供了解决方法（请参阅此[示例](https://github.com/dtmilano/AndroidViewClient/blob/master/AndroidViewClient/examples/monkeyrunner-issue-36544-workaround.py)）

# vim - 如何在vim中替换指定的单词

> ID：13258285
> 
> 赞同：2
> 
> 时间：2012-11-06T19:48:40.570
> 
> 标签：vim

当我搜索一个词时，可能会有很多匹配项，但我只想替换其中一些，所以使用

```
/keyword 
```

和

```
n 
```

我可以访问每个匹配

有什么方法可以访问每个匹配然后决定是否替换它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T19:57:54.267

这：

```
:%s/keyword/replacement/gc 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T22:58:04.717

一直按`n`，直到找到要更改的第一个单词。

然后键入`c``w`*替换*`Esc`。

从那时起，您可以键入`n`以跳到下一场比赛以及`.`是否要更改它（否则只需`n`再次跳到下一场比赛）。

# fonts - 大多数 Microsoft 制造的 Windows 8 应用程序使用什么字体？

> ID：13258287
> 
> 赞同：14
> 
> 时间：2012-11-06T19:48:46.330
> 
> 标签：fonts, windows-8

看看这个![在此处输入图像描述](../Images/9e2376f13ba26539e75a85acbb9a2f87.png)

在“Windows 更新”之前，左侧列表框“PC 设置”中使用什么字体？它看起来确实很漂亮

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-06T20:54:56.603

这是**Segoe 用户界面**。
有关 Windows 8 中的排版和字体的更多信息，请访问：http:
[//msdn.microsoft.com/en-us/library/windows/apps/hh700394.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh700394.aspx)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-06-04T12:59:05.503

对。世高用户界面。但实际上很多都是**Segoe UI Light**并且有区别。如果您查看 Microsoft 网站上的链接（[字体示例](http://msdn.microsoft.com/en-us/library/windows/apps/hh700394.aspx)），您会看到他们的示例都很大，而且字体看起来还不错。
但是，当字体较小时（因为它大部分时间都在使用，并且在 Visual Studio 2012 中），它看起来很糟糕。

# 微软的新可乐错误

当可口可乐公司在 80 年代测试他们的新可乐产品时，他们给了人们一种小玻璃杯大小的味道。人们在盲测中选择了百事可乐。可口可乐认为他们杀死了百事可乐。推出新可乐，每个人都会比百事可乐更喜欢它。他们发布了它，每个人都讨厌它。什么？
问题是他们让新可乐变得更甜了。在小酒杯中，每个人都更喜欢它，但是喝一整罐就令人作呕。失败！

## Segoe UI 字体 == 新可乐

Segoe UI 字体也是如此。放大后看起来很棒。但是在正常字体大小下看起来很糟糕。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-09-10T21:54:30.097

它是“Segoe UI Light”。

如果您打算为您的网站使用该字体，请记住您不得免费使用该字体。当我想找到一种相似的字体时，我遇到了这个： [http ://www.dafont.com/weblysleek-ui.font](http://www.dafont.com/weblysleek-ui.font)

希望这对你所有的谷歌用户有帮助。

# php - 通过 php 将 txt 分号分隔的文件导入新格式

> ID：13258288
> 
> 赞同：1
> 
> 时间：2012-11-06T19:48:46.283
> 
> 标签：php, javascript, import

我可能用这个咬得比我能咀嚼的还多，但希望你们能提供帮助。这是故事。

我有一个用户生成的 .txt 文件，该文件通过我安装在我网站上的日历模块全天定期更新。我需要能够访问其中的一些数据以阻止日历中保留的日期。首先，这是日历 .txt 文件的语法。为了使其更具可读性，我将把每段数据放在单独的一行：

```
2012-11-08;;1;;0,
2012-11-09;;1;;0,
2012-11-10;;1;;0,
2012-11-13;;2;;0,
2012-11-14;;2;;0,
2012-12-05;;1;;150,
2012-12-06;;1;;150 
```

这就是事情变得复杂的地方。我可以使用一个小的 php 脚本轻松地将它导入到我的 CMS 中。但是我只需要来自上述提要的某些数据，并且我需要以与当前输出的格式略有不同的格式组织它。我在另一个日历上使用 jquery datepicker 来向客人显示可用性，并且我有一个 JS 脚本使用这种格式屏蔽日期。

```
var disabledDays = [
    "11-21-2012",
    "12-17-2012",
    "12-02-2012",
    "01-03-2013",
    "01-04-2013",
    "01-05-2013"
]; 
```

.txt 文件中日期后有“2”或“0”的任何项目分别是“已预订”或“不可用”日期，需要包含在上面的 JS 提要中；IE; 2012-11-13;;2;;0,

.txt 文件中的最终数字（上面是 0 或 150）可以完全丢弃，因为这是价格，与 JS 日历无关。最后一件事是日期在 .txt 文件中的顺序与我需要在 .JS 文件中的顺序略有不同（我将使用 PHP 创建）。

我确信使用 PHP 可以实现上述所有操作，但我正在绕圈子试图让它工作。有人有想法么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:20:06.443

如果我理解正确，您在日期格式和访问文本文件的数据时遇到问题，您始终可以使用 explode 函数正确分离元素，然后是遍历元素的问题，例如：

```
$string = '2012-11-08;;1;;0,
2012-11-09;;1;;0,
2012-11-10;;1;;0,
2012-11-13;;2;;0,
2012-11-14;;2;;0,
2012-12-05;;1;;150,
2012-12-06;;1;;150';

$element = explode(",", $string);
$array = array();
foreach($element as $row){
    array_push($array, explode(";", $row));
}

foreach($array as $date){
    $newdate = new DateTime($date[0]);
    $newdate = $newdate->format('m-d-Y');
    echo $newdate;
    if($date[2] == 2)
        //Do your processing
       echo "Book"; 
```

}

可能有一个更好的解决方案和更快我只是想指出如何使用 php 来做到这一点。

# java - 在 Java 中使用静态嵌套类有什么缺点？

> ID：13258291
> 
> 赞同：7
> 
> 时间：2012-11-06T19:48:49.533
> 
> 标签：java

在我正在阅读的文本中，作者展示了一个使用静态嵌套类的代码示例，然后评论说，如果静态嵌套类“让您感到困扰”，您可以将其编写为单独的类。

为什么会打扰你？在 Java 中使用静态嵌套类有什么缺点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T20:02:05.313

**优点：** 作者的意思是静态嵌套类被编译成一个完全独立的 .class ，而不是包含它的外部类。因此，如果它困扰您或使事情复杂化或使您感到困惑，那么最好单独使用它。静态嵌套类不依赖于外部类实例，它可以自己运行。甚至一个 main 函数也可以写在静态嵌套类中并直接调用。它的好处是您可以在运行时创建更少的对象，而其他类型的嵌套类则不然。

**缺点** 我能想到的唯一缺点是静态嵌套类可以访问外部类的受保护成员和私有成员。假设您有一个类 X 和一个类 Y。为了让 Y 访问 X 的私有成员而不是世界其他地方，使 Y 成为 X 的内部类会有所帮助。通过将它们组合在一起来满足封装的要求。

但是静态嵌套类在访问它的成员时并不关心 Outer 类的可访问性修饰符。由于它可以独立生活，它可以允许来自外部世界的人与 Outer 类的私有成员混合，从而打破封装。

将静态嵌套类视为另一个顶级类，它可以在不使用外部类的上下文/实例的情况下访问外部类的私有和受保护成员，并将它们自由出售给外部世界以供不当使用。

为了更好地理解嵌套类或 Java 中的任何内容，我建议在阅读任何书籍之前先阅读 Oracle 文档，[http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T19:55:50.330

嵌套类可能会打扰初学者，因为他不理解它。作者小心翼翼地不让这样的初学者迷惑，为了安慰他，他提供了一个简单的顶级课程。另一方面，嵌套类在示例中可能更合适，因为它的内容很可能是极简的，并且它有助于将所有相关的东西放在一个地方的可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T19:54:37.693

静态嵌套类不能直接引用在其封闭类中定义的实例变量或方法——它只能通过对象引用来使用它们。

静态嵌套类与其外部类（和其他类）的实例成员交互，就像任何其他顶级类一样。静态嵌套类在行为上是嵌套在另一个顶级类中的顶级类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T20:15:55.947

也许这可以帮助你----> [http://www.techrepublic.com/article/explore-javas-static-nested-classes-and-inner-classes/5815620](http://www.techrepublic.com/article/explore-javas-static-nested-classes-and-inner-classes/5815620)

# xml - 使用 VBA 从 Excel 中的范围获取 Unicode 值

> ID：13258294
> 
> 赞同：1
> 
> 时间：2012-11-06T19:48:58.763
> 
> 标签：xml, excel, character-encoding, vba

我有一个 Excel 文件和一个 XML 文件。Excel 中的数据以俄语或亚美尼亚语编写，并采用 Unicode 编码。我想从 Excel 中获取数据并写入 XML。当我从 VBA 中的 Excel 获取范围的值时，我看到了这个字符串：`??????`.

有没有办法像这样更改 Range 值的编码？

# php - 向大型 SQL 查询添加检查

> ID：13258296
> 
> 赞同：0
> 
> 时间：2012-11-06T19:49:08.067
> 
> 标签：php, mysql

这是查询：

```
SELECT tbl_product.id, tbl_productspecification.id AS specificationId,
            tbl_product.ProductId, tbl_seller.CompanyName, tbl_product.ProductName, tbl_product.Description, mst_Categories.id AS 'Category',
            tbl_productspecification.RetailPrice, tbl_productspecification.SalePrice,
            tbl_product.image, tbl_productspecification.Discount, tbl_product.EndTime, tbl_product.Seller_Id
            FROM tbl_product
            LEFT OUTER JOIN tbl_seller ON tbl_seller.SelId = tbl_product.Seller_Id
            LEFT OUTER JOIN mst_Categories ON (mst_Categories.id = tbl_product.Category OR mst_Categories.id = tbl_product.SubCategory)
            LEFT OUTER JOIN tbl_productspecification ON tbl_productspecification.ProductId = tbl_product.ProductId
            LEFT OUTER JOIN mst_image ON mst_image.Product = tbl_product.ProductId
            LEFT OUTER JOIN tbl_dealinterest ON tbl_dealinterest.ProductId = tbl_product.ProductId
            where tbl_product.Active='y' and tbl_product.StartTime <= '".date("Y-m-d H:i:s")."' and tbl_product.EndTime>'".date("Y-m-d")." 06:00:00'
            ".$subquery." ".$groupby; 
```

该`tbl_dealinterest`表有几个字段：

```
[BuyerId] [ProductId] [Active] 
```

我需要过滤掉`tbl_dealinterest`匹配中的任何记录`[BuyerId]` `[ProductId]`并且`[Active]`不等于`n`

我尝试了一些东西，但并未列出所有产品`tbl_dealinterest`。只有当有人选择一个选项时，它才会被输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:04:49.220

这应该过滤掉 tbl_dealinterest 中的任何匹配记录。这是假设 tbl_dealinterest.BuyerId 如果存在记录，则永远不会为 NULL。

如果没有匹配，tbl_dealinterest 表的左连接将为 tbl_dealinterest 表中的所有字段返回 NULL 值。where 子句中的“tbl_dealinterest.BuyerId IS NULL”将过滤掉匹配项。

```
SELECT tbl_product.id, tbl_productspecification.id AS specificationId,
            tbl_product.ProductId, tbl_seller.CompanyName, tbl_product.ProductName, tbl_product.Description, mst_Categories.id AS 'Category',
            tbl_productspecification.RetailPrice, tbl_productspecification.SalePrice,
            tbl_product.image, tbl_productspecification.Discount, tbl_product.EndTime, tbl_product.Seller_Id
            FROM tbl_product
            LEFT OUTER JOIN tbl_seller ON tbl_seller.SelId = tbl_product.Seller_Id
            LEFT OUTER JOIN mst_Categories ON (mst_Categories.id = tbl_product.Category OR mst_Categories.id = tbl_product.SubCategory)
            LEFT OUTER JOIN tbl_productspecification ON tbl_productspecification.ProductId = tbl_product.ProductId
            LEFT OUTER JOIN mst_image ON mst_image.Product = tbl_product.ProductId
            LEFT OUTER JOIN tbl_dealinterest ON tbl_dealinterest.BuyerId = tbl_product.BuyerId AND tbl_dealinterest.ProductId = tbl_product.ProductId AND tbl_dealinterest.active <> 'n'
            where tbl_product.Active='y' and tbl_product.StartTime <= '".date("Y-m-d H:i:s")."' and tbl_product.EndTime>'".date("Y-m-d")." 06:00:00'
            AND tbl_dealinterest.BuyerId IS NULL
            ".$subquery." ".$groupby; 
```

# sql - 测试主键是否存在的脚本

> ID：13258297
> 
> 赞同：10
> 
> 时间：2012-11-06T19:49:08.727
> 
> 标签：sql, sql-server, sql-server-2005

试图找出一个 SQL 脚本来测试 cerain 表中是否存在主键。如果表没有主键，那么脚本应该输出表名。

```
Tables to test:
TableA
TableB
TableC 
```

运行脚本后（假设 TableA 和 TableC 有 PK，但没有 TableB），那么输出将如下所示：

```
NoKeys
TableB 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T19:55:17.003

我没有适合您的确切/完整代码，但这是一个想法：

您需要遍历数据库中的表列表：

```
SELECT *  
FROM information_schema.tables 
```

检查表是否存在主键的代码类似于：

```
SELECT *  
FROM information_schema.table_constraints  
WHERE constraint_type = 'PRIMARY KEY'   
AND table_name = @Your_Table_Name 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-06T20:01:56.523

```
;WITH tables_with_pk AS (
  SELECT t.table_schema, t.table_name  
  FROM INFORMATION_SCHEMA.TABLES t 
    INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc 
      ON t.TABLE_NAME = tc.TABLE_NAME AND t.table_schema = tc.table_schema
  WHERE tc.constraint_type = 'PRIMARY KEY'
)
SELECT t.table_schema, t.table_name 
FROM INFORMATION_SCHEMA.TABLES t 
EXCEPT
SELECT table_schema, table_name
FROM tables_with_pk 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-02-27T21:59:26.073

没有主键返回0，有主键返回1

```
SELECT OBJECTPROPERTY(OBJECT_ID(N'MyTable'),'TableHasPrimaryKey') 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-03-30T13:46:41.243

我的版本：

```
SELECT 1  
FROM SYS.KEY_CONSTRAINTS
WHERE [TYPE] = 'PK' AND [PARENT_OBJECT_ID] = OBJECT_ID('USER.USER'); 
```

作为参考，请[在此处](https://docs.microsoft.com/en-us/sql/relational-databases/tables/delete-primary-keys?view=sql-server-ver15#:%7E:text=Using%20SQL%20Server%20Management%20Studio,-To%20delete%20a&text=In%20Object%20Explorer%2C%20expand%20the,is%20specified%20and%20click%20OK.)查看 Microsoft 文档。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-06T19:59:18.273

How about

```
USE information_schema;
SELECT 'TABLE_NAME' FROM 'TABLES' LEFT JOIN 'TABLE_CONSTRAINTS' USING('TABLE_SCHEMA', 'TABLE_NAME') WHERE 'TABLE_SCHEMA' = '__PUT_YOUR_DB_NAME_HERE__' AND 'CONSTRAINT_NAME' LIKE '%PRIMARY%' AND ISNULL('CONSTRAINT_CATALOG') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-11-01T00:06:55.063

我喜欢肖恩的回答，它对我有用。您可以添加子句

`WHERE t.TABLE_TYPE = 'BASE TABLE'`

`EXCEPT`如果您不想同时获得视图，请在声明之前。

```
;WITH tables_with_pk AS (
  SELECT t.table_schema, t.table_name
  FROM INFORMATION_SCHEMA.TABLES t 
    INNER JOIN INFORMATION_SCHEMA.TABLE_CONSTRAINTS tc 
      ON t.TABLE_NAME = tc.TABLE_NAME AND t.table_schema = tc.table_schema
  WHERE tc.constraint_type = 'PRIMARY KEY' 
)
SELECT t.table_schema, t.table_name
FROM INFORMATION_SCHEMA.TABLES t 
WHERE t.TABLE_TYPE = 'BASE TABLE'
EXCEPT
SELECT table_schema, table_name
FROM tables_with_pk 
```

# git - Git没有分支问题

> ID：13258302
> 
> 赞同：0
> 
> 时间：2012-11-06T19:49:27.830
> 
> 标签：git, github

我认为我在 HEAD@{6} 或 HEAD@{7} 做错了什么。两次结帐看起来不奇怪吗？也许 HEAD@{0} 也很奇怪？

如果有经验的人可以指导我完成此操作，我将不胜感激，这样我就不会丢失数据。我见过其他“无分支”的讨论，但对我来说这看起来更复杂。我已经签到了一整天，但是当我尝试推送到 github 时我注意到了这一点。

```
eternity$ git reflog show
d15e9e7 HEAD@{0}: checkout: moving from 09e40efea3a4831ce8cbfd2a82634e23e2013d92 to master
09e40ef HEAD@{1}: commit: Rewards points for defensive strike.
33efb7d HEAD@{2}: commit: Multiple score labels can be shown.
a548ccf HEAD@{3}: commit: Resolution in Kamcord works
0f56190 HEAD@{4}: commit: Ctrl layer msg is displayed in the center of the screen
c2b195d HEAD@{5}: commit: Added setup view in director. Resolution is still bad.
d15e9e7 HEAD@{6}: checkout: moving from 0311aa9b0a2a9f26de0a8a0d95adfc2fc2e5fd9e to d15e9e7de8332dc
0311aa9 HEAD@{7}: checkout: moving from master to 0311aa9b0a2a
d15e9e7 HEAD@{8}: commit: Possible to export Kamcord replay.
7225b6c HEAD@{9}: commit: Kamcord in application, but no API calls.
eef0d78 HEAD@{10}: commit: Updated AppDelegate in accordance with 1.1 RC0
b551782 HEAD@{11}: commit: OnDevice match is handled correctly in menu after app start.
e374935 HEAD@{12}: commit: Bat glow is removed upon dealloc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:41:57.403

当我在 30 分钟前尝试时，我收到一条消息，说明我没有任何分支。我无法推动。但现在它奏效了。也许是一些网络问题？我什么都没改...

# haxe - 在 Haxe 中使用单个 .hxml 文件编译为多种语言

> ID：13258304
> 
> 赞同：1
> 
> 时间：2012-11-06T19:49:36.110
> 
> 标签：haxe, hxml

这是基本的 Haxe “Hello World！” 程序：

```
class Main 
{
    public static function main() 
    {
        trace("Hello world");
    }
} 
```

这是上述程序的构建文件：

```
-main Main
-java java 
```

现在我想用一个 .hxml 文件将此程序编译为 Java、Javascript 和 C++。在这种情况下，应该如何格式化 .hxml 文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T09:57:25.350

您应该使用命令“--next”来指定下一个编译目标。所以：

```
-main Main
-java java

--next

-main Main
-cpp cpp

--next
-flash out.swf 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-19T06:26:23.590

我已经编写了一个`compile.hxml`将类编译`Test.hx`为各种目标语言的文件。需要首先安装所有必要的库才能使其正常工作。

```
-js test.js
-main Test

--next
-php www
-main Test

--next
-cpp cpp
-debug
-main Test

--next
-main Test
-java java

--next
-cs test
-main Test
-D haxe3 
```

# php - 自定义数据库会话处理程序 - 特定的读取问题

> ID：13258311
> 
> 赞同：0
> 
> 时间：2012-11-06T19:49:44.377
> 
> 标签：php, mysql, session, handler

关于使用 mysql 数据库的自定义会话处理程序，我有一个非常具体的问题。我浏览了其他主题，因为这里有一些主题涉及自定义会话处理程序，但没有一个人回答我的问题。我在一个名为“会话”的类中使用自定义会话处理程序：

```
require_once "mySQL.php";

class sessions {
private $db;
public function __construct(){
    $this->db=new mySQL('localhost', user, pw, database);
    session_set_save_handler(array(&$this,"open"),
                     array(&$this,"close"),
                     array(&$this,"read"),
                     array(&$this,"write"),
                     array(&$this,"destroy"),
                     array(&$this,"gc"));
    register_shutdown_function('session_write_close');
    session_start();
} 
public function read($sessionID){
    $abfrage="SELECT * FROM sessions WHERE id='".$sessionID."'";
    $result= $this->db->query($abfrage);
    if ($result == false){
        return '';
    }
    if (count($result) > 0){
        return $result[0]["value"];
    }
    else{ 
    return '';
    }
} 
```

在“mySQL.php”中只写了一个“mySQL”类，它创建了一个到数据库的mysqli连接。这是有效的，而不是问题。我想将注意力集中在“读取”例程上，因为这似乎是主要问题。如果我现在通过

```
require_once "classes/sessions.php";
$SESSION=new sessions();
$token=hash("sha256",session_id().time());
$_SESSION['token']=$token;
$_SESSION['running']=1 
```

并将值写入会话中创建正确的数据库值：

```
id (varchar 64) = 54ul84nhc3aimqc55efcs49js4
lastUpdated (int 11) = 1352226239
start (int 11) = 1352226233
value (varchar 20000) =     token|s:64:"2b92aa848a86741ef11d800c3dce527fdcee264f50de10381941241c3d9cc9ee";running|i:1; 
```

甚至垃圾收集器也可以正常工作，但是当我重新加载页面并尝试回显时

```
$_SESSION['running'] 
```

我收到错误“通知：未定义的索引：正在运行”。调试器运行通知上面发布的读取例程返回 1（这将等于布尔值“true”？！）而不是值。我检查了该案例的读取例程中的“sessionID”是会话表中的那个，所以我基本上迷路了。如果您能帮助我，那就太好了，因为到目前为止，我已经对这种自定义会话处理程序提供的可能性印象深刻。

也许在这里也可以提出一个附带问题。当我重新加载页面时，会话的构造函数被“$SESSION=new sessions();”调用对吗？即使已经有一个会话正在运行（但是这种行为不会改变 session_id）？或者这是由于我的会话读取程序中断？

谢谢您的帮助。

编辑：我在 xampp 发行版中使用 PHP/5.4.4 和 MySQL 5.5.25a 以及 phpmyAdmin 3.5.2 来设置数据库。会话表是格式为“MEMORY”的表，这就是我使用 varchar 20000 字段而不是文本字段的原因。我刚看到这篇文章[为什么mysql_query() 使用SELECT 语句返回TRUE？](https://stackoverflow.com/questions/6208156/why-does-mysql-query-return-true-with-a-select-statement) 说明当服务器突然中断连接时，mysql_query 会不时返回 true。但是我无法弄清楚这可能是什么原因。我现在正在添加 mySQL 类，可能存在错误与此问题有关：

```
<?php
class mySQL
{
public $mySQLiObj;
public $lastSQLQuery;
public $lastSQLStatus;
public $lastInsertID;
public function __construct($server,$user,$password,$db,$port="3306"){
    //erstelle db-objekt
    $this->mySQLiObj= new mysqli($server,$user,$password,$db,$port);
    if (mysqli_connect_errno()){
        echo "Keine Verbindung zum MySQL-Server möglich.";
        trigger_error("MYSQL-Connection-Error",E_USER_ERROR);           
        die();
    }
    //Zeichensatz auf utf8 setzen
    $this->query("SET NAMES utf8");
}
public function __destruct(){
    $this->mySQLiObj->close();
}
public function query($sqlQuery,$resultset=false){
    $this->lastSQLQuery=$sqlQuery;
    $result=$this->mySQLiObj->query($sqlQuery);
    if($resultset == true){
        if($result == false) {
            $this->lastSQLStatus=false;
        }
        else
        {
            $this->lastSQLStatus = true;
        }
        return $result;
    }
    if($resultset == false) {
        $return = $this->makeArrayResult($result);
        return $return;
    }
}
private function makeArrayResult($ResultObj){
    if ($ResultObj==false){
        //Fehler aufgetreten
        $this->lastSQLStatus=false;
        return false;
    }
    else if ($ResultObj == true) {
        //UPDATE,INSERT etc. statement es wird nur true zurückgegeben
        $this->lastSQLStatus = true;
        $this->lastInsertID = $this->mySQLiObj->insert_id;
        return true;
    }
    else if ($ResultObj->num_rows == 0){
        //Kein Ergebnis bei SELECT,SHOW,DESCRIBE oder EXPLAIN Statement
        $this->lastSQLStatus = true;
        return array();
    }
    else {
        $array = array();
        while($line = $ResultObj->fetch_array(MYSQLI_ASSOC)){
            array_push($array,$line);
        }
        $this->lastSQLStatus=true;
        return $array;
    }
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T19:08:56.243

因此，经过大量尝试和错误并回顾这本书，我从中获得了会话处理程序的基本布局，我自己回答了这个问题。看起来像这样

```
$SESSION=new sessions(); 
```

是关键点。而不是通过显式调用创建会话，而是必须调用

```
session_set_save_handler(new sessions); 
```

并从会话类的构造函数中删除该行。然而有趣的是，这种奇怪的错误由此产生。

感谢您查看，也许这对某人有帮助。

# python - Python将列表添加到只有元素的单个列表中

> ID：13258312
> 
> 赞同：0
> 
> 时间：2012-11-06T19:49:49.243
> 
> 标签：python, list

抱歉标题尴尬，但我会在这里解释得更好；

在下面的函数中；

```
def returnList():
  list = []
  for i in xrange(4):
    list.append(i)

  return list 
```

它返回列表 [0,1,2,3]。在另一个功能中；

```
def returnAllLists():
  totalList = []
  for i in xrange(4):
    totalList.append(returnList())

  return totalList 
```

正如预期的那样，它变成了这样的结果

```
[[1,2,3,4],[1,2,3,4],[1,2,3,4],[1,2,3,4]]
```

. 棘手的部分是我需要结果

```
[1,2,3,4,1,2,3,4,1,2,3,4,1,2,3,4]
```

. 我当然可以轻松地将 returnAllList 的结果分配给另一个列表**并进行两个循环并将元素单独插入另一个列表**但是我认为可以完成更有效的方法，因为我的方法具有**O(N^2)**复杂度只是以不同的方式分配相同的值。有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T19:52:55.593

`extend()`代替`append()`: _

```
 totalList.extend(returnList()) 
```

做你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:55:42.327

从[itertools 文档](http://docs.python.org/2/library/itertools.html#recipes)：

```
def flatten(listOfLists):
    "Flatten one level of nesting"
    return chain.from_iterable(listOfLists) 
```

这当然是假设您不能只更改`append()`为`extend()`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:06:34.563

像这样的东西：

```
In [17]: lis=[[1,2,3,4],[1,2,3,4],[1,2,3,4],[1,2,3,4]]

In [18]: sum(lis,[])
Out[18]: [1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4, 1, 2, 3, 4] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T02:36:01.790

```
 python 3.2

    a=[[1,2,3,4],[1,2,3,4],[1,2,3,4],[1,2,3,4]]        

    res=[i for v in a for i in v]

    another method:
    list(i.chain(*a)) 
```

# c# - Entity Framework 5 Code First 中的一对一和一对多关系

> ID：13258314
> 
> 赞同：5
> 
> 时间：2012-11-06T19:49:52.370
> 
> 标签：c#, ef-code-first, one-to-many, entity-framework-5, one-to-one

我尝试了一整天来让这个工作。我学到了很多关于 EF 的 Fluent API（例如[这](http://weblogs.asp.net/manavi/archive/2010/12/19/entity-association-mapping-with-code-first-one-to-one-shared-primary-key-associations.aspx)是一篇很棒的文章），但是我没有成功。

我有三个实体：

```
public class Address
{
   [Key]
   public virtual int AddressId { get; set; }
   public virtual string AddressString { get; set; }
}
public class User
{
   [Key]
   public virtual int UserId { get; set; }
   public virtual ICollection<Address> Addresses { get; set; }
}
public class House
{
   [Key]
   public virtual int HouseId { get; set; }
   public virtual Address Address { get; set; }
} 
```

并尝试了所有我能想到的和`HasMany, HasOptional, WithOptional, WithOptionalDependent`的组合`WithOptionalPrincipial``User``House`

```
protected override void OnModelCreating(DbModelBuilder modelBuilder) 
```

我只是无法让它工作。我想应该很清楚，我想要什么。一个用户可能有多个地址（首先我想强制至少一个，但现在如果用户可以有可选的地址，我会很高兴......）而房子只有一个地址 - 这是必需的。如果房子的地址被级联删除，那就太好了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T08:44:47.183

我相信以下内容应该适合您

```
public class Address
{
    public int AddressId { get; set; }
    public string AddressString { get; set; }
}

public class User
{
    public int UserId { get; set; }
    public virtual ICollection<Address> Addresses { get; set; }
}

public class House
{
    public int HouseId { get; set; }
    public virtual Address Address { get; set; }
}

public class TestContext : DbContext
{
    public DbSet<Address> Addresses { get; set; }
    public DbSet<User> Users { get; set; }
    public DbSet<House> Houses { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        modelBuilder.Entity<User>().HasMany(u => u.Addresses).WithMany();
        modelBuilder.Entity<House>().HasRequired(h => h.Address).WithOptional().Map(m => m.MapKey("AddressId"));
    }
} 
```

请注意，通常最好自己指定外键字段，这可以使您以后的生活更轻松。如果你这样做，那么你可以选择重写House如下：

```
public class House
{
    public int HouseId { get; set; }
    public int AddressId { get; set; }
    public virtual Address Address { get; set; }
} 
```

约定将连接 AddressId 和 Address。如果您在 House 和 Address 之间有一对一的映射，您还可以将它们链接到它们的主键上：

```
public class House
{
    [ForeignKey("Address")]              
    public int HouseId { get; set; }
    public virtual Address Address { get; set; }
} 
```

您提到您希望强制执行至少一个地址 - 这对于一对多关系是不可能的。仅当用户只有一个地址时才能执行此操作，此时您可以在 User 类上添加必需的 AddressId 属性。

另一条评论-您在代码中使所有内容都成为虚拟的。您只需要将导航属性设为虚拟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:14:16.157

像这样的东西怎么样：

`Address`对 a强制执行`House`：

```
modelBuilder.Entity<House>().HasRequired(d => d.Address); 
```

`User`在和之间创建一对多关系`Address`：

```
modelBuilder.Entity<User>().HasMany(u => u.Addresses).WithMany().Map(x =>
{
    x.MapLeftKey("UserId");
    x.MapRightKey("AddressId");
    x.ToTable("UserAddress");
}); 
```

这应该做的是创建一个名为的表`UserAddress`，将 a 映射`User`到`Address`.

或者，您可以为自己创建一个 POCO`UserAddress`并修改相关表：

```
public class UserAddress
{
    [Key]
    public int UserAddressId { get; set; }
    public User User { get; set; }
    public Address Address { get; set; }
}

public User
{
    ...
    public virtual ICollection<UserAddress> UserAddresses { get; set; }
    ...
}

public Address
{
    ...
    public virtual ICollection<UserAddress> UserAddresses { get; set; }
    ...
} 
```

然后，您将需要以下内容以确保两者`User`都是`Address`必需的：

```
modelBuilder.Entity<UserAddress>().HasRequired(u => u.Address);
modelBuilder.Entity<UserAddress>().HasRequired(u => u.User); 
```

# c# - 检查两个字符串是否共享相同的重复字符模式

> ID：13258315
> 
> 赞同：15
> 
> 时间：2012-11-06T19:49:53.970
> 
> 标签：c#, regex

是否有一个有效的正则表达式来断言两个字符串共享相同的重复字符模式。

```
("tree", "loaa") => true
("matter", "essare") => false
("paper", "mime") => false
("acquaintance", "mlswmodqmdlp") => true
("tree", "aoaa") => false 
```

事件如果不是通过正则表达式，我正在寻找执行任务的最有效方式

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-06T20:00:16.813

The easiest way is probably to walk through both strings manually at the same time and build up a dictionary (that matces corresponding characters) while you are doing it:

```
if(input1.Length != input2.Length)
    return false;
var characterMap = new Dictionary<char, char>();
for(int i = 0; i < input1.Length; i++)
{
    char char1 = input1[i];
    char char2 = input2[i];
    if(!characterMap.ContainsKey(char1))
    {
        if (characterMap.ContainsValue(char2))
            return false;
        characterMap[char1] = char2;
    }
    else
    {
        if(char2 != characterMap[char1])
            return false;
    }
}
return true; 
```

In the same manner you could construct a regex. This is certainly not more efficient for a single comparison, but it might be useful if you want to check one repetition pattern against multiple strings in the future. This time we associate characters with their back-references.

```
var characterMap = new Dictionary<char, int>();
string regex = "^";
int nextBackreference = 1;
for(int i = 0; i < input.Length; i++)
{
    char character = input[i];
    if(!characterMap.ContainsKey(character))
    {
        regex += "(.)";
        characterMap[character] = nextBackreference;
        nextBackreference++;
    }
    else
    {
        regex += (@"\" + characterMap[character]);
    }
}
regex += "$"; 
```

For `matter` it will generate this regex: `^(.)(.)(.)\3(.)(.)$`. For `acquaintance` this one: `^(.)(.)(.)(.)\1(.)(.)(.)\1\6\2(.)$`. If could of course optimize this regular expression a bit afterwards (e.g. for the second one `^(.)(.)..\1.(.).\1\3\2$`), but in any case, this would give you a reusable regex that checks against this one specific repetition pattern.

**EDIT:** Note that the given regex solution has a caveat. It allows mapping of multiple characters in the input string onto a single character in the test strings (which would contradict your last example). To get a correct regex solution, you would have to go a step further to disallow characters already matched. So `acquaintance` would have to generate this awful regular expression:

```
^(.)(?!\1)(.)(?!\1|\2)(.)(?!\1|\2|\3)(.)\1(?!\1|\2|\3|\4)(.)(?!\1|\2|\3|\4|\5)(.)(?!\1|\2|\3|\4|\5|\6)(.)\1\6\2(?!\1|\2|\3|\4|\5|\6|\7)(.)$ 
```

And I cannot think of an easier way, since you cannot use backreferences in (negated) character classes. So maybe, if you **do** want to assert this as well, regular expressions are not the best option in the end.

Disclaimer: I am not really a .NET guru, so this might not be the best practice in walking through arrays in building up a dictionary or string. But I hope you can use it as a starting point.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-31T23:53:30.597

只是因为我喜欢 LINQ::)

```
void Main()
{
    Console.WriteLine(Map("tree") == Map("loaa"));
    Console.WriteLine(Map("matter") == Map("essare"));
    Console.WriteLine(Map("paper") == Map("mime"));
    Console.WriteLine(Map("acquaintance") == Map("mlswmodqmdlp"));
    Console.WriteLine(Map("tree") == Map("aoaa"));  
}

public string Map(string input)
{
    var seen = new Dictionary<char,int>();
    var index = 0;
    return string.Join(
      string.Empty, 
      input.Select(c =>seen.ContainsKey(c) ? seen[c] : seen[c] = index++));
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T19:58:06.190

我不知道如何使用正则表达式来做到这一点，但在代码中我会一次遍历两个字符串一个字符，在进行时进行比较并构建一个比较列表：

```
t = l
r = o
e = a
etc. 
```

在添加每个比较之前，我会检查第一个字符串中的字符是否已存在于列表中。如果第二个字符串中的相应字符与比较列表不匹配，则字符串模式不匹配。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T20:57:53.057

编辑：接受的代码现在是正确的。这个将作为替代方案留在这里（几乎在任何意义上都不太好）。

```
 private static List<int> FindIndices(string str, char c, int ind)
    {
        var retval = new List<int>();
        int last = ind, temp;
        while (0 < (temp = str.IndexOf(c, last)))
        {
            retval.Add(temp);
            last = temp + 1;
        }           
        return retval;
    }

    public static int[] CanonicalForm(string s)
    {
        string table = String.Empty;
        var res = new int[s.Length];
        int marker = 0;
        int lastInd;

        for(int i=0; i < s.Length-1; ++i)
        {
            if (table.Contains(s[i]))
                continue;

            table += s[i];              
            lastInd = i+1;

            if (s.IndexOf(s[i], lastInd) > 0)
                res[i] = ++marker;
            else
                continue;

            foreach (var v in FindIndices(s, s[i], lastInd))
                res[v] = marker;
        }
        return res;
    } 
```

和比较：

```
 public static bool ComparePatterns(string s1, string s2)
    {
        return ( (s1.Length == s2.Length) && CanonicalForm(s1).SequenceEqual(CanonicalForm(s2)) );
    } 
```

所以关键是建立一个可以在以后进行比较的规范形式。这不是特别聪明，但确实给出了正确的结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-11-05T18:56:48.903

刚遇到同样的问题。我为它写了一段python代码。它相当简单，无需导入额外的模块。其基本思想是利用ascii字符与其对应数值之间的关系，将给定的两个字符串分别翻译成一个新的模式字符串。最后比较两个模式字符串。

```
def SamePattern(s1, s2):
  i = j = 97
  p1 = p2 = ""

  for index1, l1 in enumerate(s1):
    if l1 not in s1[0:index1]:
      p1 += chr(i)
      i += 1
    else:
      p1 += chr(97 + s1.index(l1))

  for index2, l2 in enumerate(s2): 
    if l2 not in s2[0:index2]:
      p2 += chr(j)
      j += 1
    else:
      p2 += chr(97 + s2.index(l2))

  if p1 == p2:
    return True
  else:
    return False 
```

# java - 是否可以将 COLT 与大型矩阵一起使用？

> ID：13258316
> 
> 赞同：0
> 
> 时间：2012-11-06T19:49:58.570
> 
> 标签：java, numerical, colt

我从某个时候开始使用 COLT，现在我的代码正在使用它的很多功能。

我现在需要能够处理大型*稀疏*张量或矩阵。张量非常稀疏，但它们的维度可能非常大。

看来我不能为此使用 COLT，因为它要求张量/矩阵中潜在元素的总数小于 Integer.MAX_VALUE。

是这样吗？即使是稀疏矩阵，我也无能为力？我觉得这很令人惊讶——我认为 COLT 是 BLAS 例程的最先进的实现，稀疏矩阵的总容量自然会超过 Integer.MAX_VALUE。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:18:51.783

几年前，我在Java中有一个稀疏矩阵奇异值分解问题，并做了一个性能测试，比较了COLT和将矩阵通过文件传递给Matlab。Matlab 获胜，很大程度上是因为它对稀疏矩阵运算有更好的支持。

我最终得到了一个混合语言应用程序，它使用 Java 完成所有数据收集、组织、存储和报告，但使用 Matlab 进行核心线性代数运算。

# web-services - ListView（使用 CustomListAdapter）和 AsyncTask 不更新 UI

> ID：13258318
> 
> 赞同：1
> 
> 时间：2012-11-06T19:50:07.543
> 
> 标签：web-services, listview, android-asynctask, android-arrayadapter, ksoap2

目前我正试图让我的列表视图在异步任务中更新。获取数据不是问题，问题在于更新主线程的ui。我正在使用网络服务方法来获取数据，以防万一你想知道。

我试过了 adapter.notifyDataSetChanged(); , listView.refreshDrawableState(); & listView.requestLayout(); 单独和一起都没有奏效。

我还在我的 asynctask 的doingInbackground 和 onPostExecute 中尝试了 runOnUiThread 函数，但它们都不起作用。

我已经通过论坛并尝试了几乎所有的东西，但不知何故我仍然遇到问题，而其他人已经在解决方案方面取得了进展。

最初，第一项显示在我从 xml 数据存储中检索到的数据中，但所有其他项目均未显示。但是，如果我将方向更改为横向，则最后两行不会立即显示在视图中，如果向下滚动到列表中的最后一项，则值在那里，然后不会显示最上面的两行。当您向上滚动时，现在会显示列表中的第二行。

这是应用程序最初的外观：

[http://img525.imageshack.us/img525/1035/androidimage.png](http://img525.imageshack.us/img525/1035/androidimage.png)

这是我的名为 NewListView 的主线程的一些片段。

```
package com.nico.gg;

import java.util.ArrayList;
import java.util.List;

import android.app.Activity;
import android.app.ProgressDialog;
import android.content.res.Configuration;
import android.os.AsyncTask;
import android.os.Bundle;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ListView;
import android.widget.Toast;

public class NewListView extends Activity {
    @Override
    public void onConfigurationChanged(Configuration newConfig) {
        super.onConfigurationChanged(newConfig);
    }

    ListView listView;
    List<RowItem> rowItems;
    ProgressDialog PostingDialog;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        PostingDialog = new ProgressDialog(this);
        PostingDialog.setTitle("Updating Rates");
        PostingDialog.setMessage("Retrieving Rates, Please wait...");
        PostingDialog.setIndeterminate(true);
        PostingDialog.setCancelable(true);

        rowItems = new ArrayList<RowItem>();
        listView = (ListView) findViewById(R.id.listView);
        listView.setAdapter(new CustomListViewAdapter(this, R.layout.list_row,
                rowItems));
        new DownloadXmlTask().execute();

        listView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                     Toast.makeText(getApplicationContext(), "Clicked!", Toast.LENGTH_SHORT).show();
            }
        });

    }

    public class DownloadXmlTask extends
            AsyncTask<Void, Integer, ArrayList<Rate>> {

        @Override
        protected ArrayList<Rate> doInBackground(Void... value) {
            ArrayList<Rate> val = loadXmlFromNetwork();
            return val;

        }

        @Override
        protected void onPreExecute() {
            // TODO Auto-generated method stub
            super.onPreExecute();
            PostingDialog.show();
        }

        @Override
        protected void onProgressUpdate(Integer... values) {
            // TODO Auto-generated method stub
            super.onProgressUpdate(values);
        }

        protected void onPostExecute(ArrayList<Rate> val) {
            super.onPostExecute(val);
            PostingDialog.dismiss();
            CustomListViewAdapter adapter = (CustomListViewAdapter)listView.getAdapter();
            try {

                if (val.size() > 1) {

                    // for(Rate y: x){
                    for (int i = 0; i < val.size(); i++) {

                        RowItem item = new RowItem(R.drawable.rihanna,
                                String.valueOf(val.get(i).getGasRate()), val
                                        .get(i).getDateModified()
                                        .toLocaleString());
                        adapter.add(item);
                    }

                    adapter.setNotifyOnChange(true);
                    listView.setAdapter(adapter);
                    Toast.makeText(NewListView.this, "Rates Updated",
                            Toast.LENGTH_SHORT).show();
                } else {
                    Toast.makeText(getApplicationContext(),
                            "Rates Updated Failed", Toast.LENGTH_SHORT).show();
                }
            } catch (Exception e) {
                Toast.makeText(getApplicationContext(), e.toString(),
                        Toast.LENGTH_LONG).show();
            }
        }
    }

    private ArrayList<Rate> loadXmlFromNetwork() {

        return new CallSoap().MostRecentPetrojamRate();
    }
} 
```

这是我的自定义适配器类

```
package com.nico.gg;

import java.util.List;

import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

public class CustomListViewAdapter extends ArrayAdapter<RowItem> {

    Context context;

    public CustomListViewAdapter(Context context, int resource,
            List<RowItem> items) {
        super(context, resource, items);
        this.context = context;
        // TODO Auto-generated constructor stub
    }

    private class ViewHolder{
        ImageView image;
        TextView txtRateName;
        TextView txtDatePosted;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub
        ViewHolder holder = null;
        RowItem rowItem = getItem(position);
        View row = convertView;
        LayoutInflater mInflater = (LayoutInflater)context.getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
        if(row == null){
            row = mInflater.inflate(R.layout.list_row,null);
            holder = new ViewHolder();
            holder.txtRateName = (TextView)row.findViewById(R.id.gastype);
            holder.txtDatePosted = (TextView)row.findViewById(R.id.date);
            holder.image = (ImageView)row.findViewById(R.id.list_image);
            row.setTag(holder);
        }else{
            holder = (ViewHolder)row.getTag();
            holder.txtRateName.setText(rowItem.getRateName());
            holder.txtDatePosted.setText(rowItem.getDatePosted());
            holder.image.setImageResource(rowItem.getRateImgId());
        }
        return row;
    }

} 
```

感谢您停下来并试图提供帮助...我等待您对我的问题发表评论。

# java - 当我尝试实例化一个对象时，“无法从静态上下文引用非静态变量” - 为什么？

> ID：13258323
> 
> 赞同：0
> 
> 时间：2012-11-06T19:50:30.087
> 
> 标签：java, class, non-static

该程序旨在接收用户输入信息并将其存储在 arraylist 员工对象中。我不确定为什么会出现这些错误。有什么帮助吗？

代码：

```
import java.util.*;
import java.io.*;
import java.io.File;
import java.io.FileReader;
import java.util.ArrayList;

public class P
{
//Instance Variables
private static String empName;
private static String wage;
private static double wages;
private static double salary;
private static int numHours;
private static double increase; 

//  static ArrayList<String> ARempName = new ArrayList<String>();
//  static ArrayList<Double> ARwages = new ArrayList<Double>();
//  static ArrayList<Double> ARsalary = new ArrayList<Double>();
static ArrayList<Employee> emp = new ArrayList<Employee>();

public static void main(String[] args) throws Exception
{       
    Employee emp1 = new Employee("", 0);    

clearScreen();
printMenu();
question();
exit();
}

public static void printArrayList(ArrayList<Employee> emp)
{
    for (int i = 0; i < emp.size(); i++){
            System.out.println(emp.get(i));
}
}

public static void clearScreen()
{
    System.out.println("\u001b[H\u001b[2J");
}

private static void exit()
{
System.exit(0);
}

private static void printMenu()
{
System.out.println("\t------------------------------------");
System.out.println("\t|Commands: n - New employee        |");
System.out.println("\t|          c - Compute paychecks   |");
System.out.println("\t|          r - Raise wages         |");
System.out.println("\t|          p - Print records       |");
System.out.println("\t|          d - Download data       |");
System.out.println("\t|          u - Upload data         |");
System.out.println("\t|          q - Quit                |");
System.out.println("\t------------------------------------");
System.out.println("");
}

private static void question()
{
System.out.print("Enter command: ");
Scanner q = new Scanner(System.in);
String input = q.nextLine();
input.replaceAll("\\s","").toLowerCase();

boolean valid = (input.equals("n") || input.equals("c") || input.equals("r") ||    input.equals("p") || input.equals("d") || input.equals("u") || input.equals("q"));

if (!valid){
    System.out.println("Command was not recognized; please try again.");
printMenu();
question();
}
else if (input.equals("n")){
    System.out.print("Enter the name of new employee: ");
    Scanner stdin = new Scanner(System.in);
    empName = stdin.nextLine();
    emp1.setName(empName);
    System.out.print("Hourly (h) or salaried (s): ");
    Scanner stdin2 = new Scanner(System.in);
    wage = stdin2.nextLine();
    wage.replaceAll("\\s","").toLowerCase(); 
    if (!(wage.equals("h") || wage.equals("s"))){
    System.out.println("Input was not h or s; please try again");
    }
    else if (wage.equals("h")){
    System.out.print("Enter hourly wage: ");
    Scanner stdin4 = new Scanner(System.in);
    wages = stdin4.nextDouble();
    emp1.setWage(wages);
    printMenu();
    question();}
    else if (wage.equals("s")){
    System.out.print("Enter annual salary: ");
    Scanner stdin5 = new Scanner(System.in);
    salary = stdin5.nextDouble();
    emp1.setWage(salary);
    printMenu();
    question();}}
else if (input.equals("c")){
    System.out.print ("Enter number of hours worked by " + empName);
    Scanner stdin = new Scanner(System.in);
    numHours = stdin.nextInt();
    System.out.println("Pay: ");
    System.out.print("Enter number of hours worked by " + empName);
        Scanner stdin2 = new Scanner(System.in);
        numHours = stdin2.nextInt();
        System.out.println("Pay: ");
    printMenu();
    question();}
else if (input.equals("r")){
    System.out.print("Enter percentage increase: ");
    Scanner stdin = new Scanner(System.in);
    increase = stdin.nextDouble();
    System.out.println("\nNew Wages");
    System.out.println("---------");
//      System.out.println(Employee.toString());
    printMenu();
    question();
    }
else if (input.equals("p")){
    printArrayList(emp);
    printMenu();
    question();
}
else if (input.equals("q")){
    exit();
}
}

public abstract class Employee {
private String name;
private double wage;

protected Employee(String name, double wage){
  this.name = name;
  this.wage = wage;
}

public String getName() {
  return name;
}

public double getWage() {
  return wage;
}

public void setName(String name) {
  this.name = name;
}

public void setWage(double wage) {
  this.wage = wage;
}

public void percent(double wage, double percent) {
  wage *= percent;
}
}

public class HourlyEmployee extends Employee {
//Instance Variables
public String result;

public HourlyEmployee(String name, double wage){
  super(name, wage);
}

public void computePay(double wage){
  if (numHours <= 40){
    wage *= numHours;}
  else {
    wage = numHours * (1.5 * wage);}
}

/*  public void toString(){
  System.out.println("Name: " + name);
}*/
}

public class SalariedEmployee extends Employee {
    //Instance Variables
private double salary;
private int salHours = 2080;

    public SalariedEmployee(String name, double wage){
      super(name, wage);
    }

    public void computePay(double wage){
      salary = (salHours * salary) / 52;}

public double getSalary(){
  return salary;
}

public void setSalary(double salary) {
  this.salary = salary;
}

/*     public void toString(){
      System.out.print("Name:  " name + getSalary() + "/year");
     }*/
}
} 
```

错误：

```
javac P.java
P.java:24: non-static variable this cannot be referenced from a static context
    Employee emp1 = new Employee("", 0);    
                    ^
P.java:82: cannot find symbol
symbol  : variable emp1
location: class P
    emp1.setName(empName);
    ^
P.java:94: cannot find symbol
symbol  : variable emp1
location: class P
    emp1.setWage(wages);
    ^
P.java:101: cannot find symbol
symbol  : variable emp1
location: class P
    emp1.setWage(salary);
    ^
4 errors 
```

任何能指出我正确方向的提示都将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:07:15.703

你不能实例化一个抽象类，emp1 也没有在本地初始化.. prolly 因为你不能将一个对象实例化为一个抽象..

```
 Employee emp1 = HiredEmployee("", 0) or SalaryEmployee("", 0); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:16:13.050

您的代码很容易修复：

你必须更换：

```
public abstract class Employee {} 
```

和

```
public static class Employee {} 
```

抽象类不能被实例化，另外我认为你的意思是员工类是静态的。

然后，移动

```
final Employee emp1 = new Employee("", 0); 
```

进入：

```
private static void question() {} 
```

因为 emp1 仅在该函数中使用，否则它将不可见（它“超出范围”），或者作为替代，将其声明为全局变量。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:22:28.297

> 非静态变量 this 不能从静态上下文中引用

`Employee`是一个非静态的内部类，因此它必须有一个外部类的封闭实例。因此，您无法创建`Employee`没有 a`P`

该机制在[Java 教程 > 嵌套类中进行了解释](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)

更改此行：

```
public abstract class Employee { 
```

至

```
public static abstract class Employee { 
```

它应该可以工作（您还必须更改不同的 Employee 子类型）

# php - PHP将二进制字符串转换为二进制的有效方法

> ID：13258327
> 
> 赞同：6
> 
> 时间：2012-11-06T19:50:47.430
> 
> 标签：php, algorithm, binary, performance, huffman-code

这是瘦的（向下滚动以查看问题）：我正在使用 Huffman 编码来压缩文件（用于项目）。我已经制作了地图，并将所有内容都变成了这样的字符串：

```
00101010001100001110011101001101111011111011 
```

现在，我需要将其转换为实际的二进制字符串，在其当前状态下，它只是一个由 1 和 0 组成的字符串。

这是**问题所在**：

1 和 0 的字符串长度为 17,747,595 个字符，在 550,000 左右确实变慢了

这是我的代码：

```
<?php

$i=0
$len = strlen($binaryString);

while ($i < $len){
    $section = substr($binaryString,$i,$i+8);
    $out .= chr(bindec($section));
    $i=$i+8;
}

?> 
```

我怎样才能让它足够高效地运行 1700 万个字符串？

非常感谢任何支持！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T20:27:21.920

你不需要循环你可以`gmp`使用`pack`

```
$file = "binary.txt";
$string = file_get_contents($file);
$start = microtime(true);

// Convert the string
$string = simpleConvert($string);
//echo $string ;

var_dump(number_format(filesize($file),2),microtime(true)- $start);

function simpleConvert($string) {
    return pack('H*',gmp_strval(gmp_init($string, 2), 16));
} 
```

**输出**

```
string '25,648,639.00' (length=13) <---- Length Grater than 17,747,595
float 1.0633520126343  <---------------- Total Conversion Time 
```

**链接**

*   [原始字典文件（349,900 字） 3,131KB](http://www.math.sjsu.edu/~foster/dictionary.txt)
*   [二进制版本 25,048 KB](http://bayfiles.com/file/qBMJ/2g700N/binary.txt)

**注意 解决方案需要[GMP 功能](http://www.php.net/manual/en/ref.gmp.php)**

# javascript - 包含登录凭据以自动化登录页面的脚本

> ID：13258331
> 
> 赞同：-1
> 
> 时间：2012-11-06T19:51:00.287
> 
> 标签：javascript, vbscript, batch-file

当我浏览它时，我有一个 URL，它询问我的用户名和密码。我想让它自动化，所以我想要脚本，通过它我可以在该脚本中传递用户凭据，以便在 URL 浏览该页面时自动获取这些凭据并登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T21:19:41.043

有些网站接受 url 中的用户名和密码，例如

`http://username:password@www.stackoverflow.com`

请注意，出于安全考虑，必须在某些机器上启用此功能。IE 现在[默认禁用此功能](http://support.microsoft.com/default.aspx?scid=kb;%5bLN%5d;834489)

该页面还有一些您可以使用的解决方法，具体取决于站点。

# facebook - Facebook API 错误 191 无效的 redirect_uri（不在本地主机上）

> ID：13258335
> 
> 赞同：1
> 
> 时间：2012-11-06T19:51:25.573
> 
> 标签：facebook, facebook-graph-api, facebook-authentication

是的，另一个 API 错误 191 问题。

所以，我有一个在页面选项卡中使用的应用程序。
我的页面有 2 个不同的 DNS：一个用于 http (cime.fm)，一个用于 https (securecdi.com)。
在我的身份验证页面上，我确保我重定向到 http 或 https 服务器，所以它看起来像这样：

```
if($_SERVER['HTTP_HOST'] == 'dev.securecdi.com' || $_SERVER['HTTP_HOST'] == 'www.securecdi.com'){
    $http = 'https://';
}else{
    $http = 'http://';
}
$pageTabUrl = $http.'www.facebook.com/cime.fm/app_'.$appId; 
window.top.location.href = "http://www.facebook.com/dialog/oauth?client_id=<?php echo $appId;?>&locale=fr_CA&origin=1&redirect_uri=<?php echo $pageTabUrl;?>&response_type=token%2Csigned_request&scope=publish_stream%2Cuser_likes&sdk=joey"; 
```

在 facebook 的文档中，对于 redirect_uri，它说：

> 用户单击对话框中的按钮后要重定向到的 URL。您指定的 URL 必须是与您的应用程序设置中指定的具有相同基本域的 URL、格式为[https://apps.facebook.com/YOUR_APP_NAMESPACE的画布 URL 或格式为](https://apps.facebook.com/YOUR_APP_NAMESPACE)[https://](https://www.facebook.com/PAGE_USERNAME/app_YOUR_APP_ID)的页面选项卡 URL [www.facebook.com/PAGE_USERNAME/app_YOUR_APP_ID](https://www.facebook.com/PAGE_USERNAME/app_YOUR_APP_ID)

所以我有一个有效的redirect_uri 条目。

在我的应用程序的配置中，我将 cime.fm 和 securecdi.com 放在 App 域中。（我什至尝试将 facebook.com 放在...但它并没有改变任何东西）

最重要的是，我已经与同一服务器上的其他站点进行了此调用（使用 DNS 用于 http，另一个用于 https）并且一切正常...

有任何想法吗？？

我以为可能是因为. 在用户名中，但事实并非如此，因为我在另一个网站上遇到了错误......

## 什么有效，什么无效的例子：

```
I have a page tab with   
Page Tab URL: http://www.rythmefm.com/montreal/$linkToMyPage 
Secure Page Tab URL: https://www.securecdi.com/rythmefm/montreal/$linkToMyPage   
App Domains: rythmefm.com and securecdi.com   
Redirects to: http://www.facebook.com/pages/1057-rythme-FM/124140938458?sk=app_$appId;  
--> works.

But a page tab with
Page Tab URL: http://www.cime.fm/$linkToMyPage
Secure Page Tab URL: https://www.securecdi.com/cimefm/$linkToMyPage
App Domains: cime.fm and securecdi.com  
Redirects to: http://www.facebook.com/cime.fm/app_$appId;  
--> does not work.

And a page tab with 
Page Tab URL: http://www.fm93.com/$linkToMyPage 
Secure Page Tab URL: https://www.securecdi.com/fm93/$linkToMyPage  
App Domains: fm93.com and securecdi.com  
Redirects to: http://www.facebook.com/fm93/app_$appId;  
--> does not work. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T19:27:08.977

我找到了！尽管 Facebook 在文档中声明您可以使用以下形式的 url 重定向到页面选项卡：[https://www.facebook.com/PAGE_USERNAME/app_YOUR_APP_ID](https://www.facebook.com/PAGE_USERNAME/app_YOUR_APP_ID)，但实际上并非如此。

您必须使用表单的网址：
[https://www.facebook.com/pages/PAGE_NAME/PAGE_ID?sk=app_YOUR_APP_ID](https://www.facebook.com/pages/PAGE_NAME/PAGE_ID?sk=app_YOUR_APP_ID)；
这是没有设置用户名的页面形式。

# java - 递归计算Java中的目录大小但不包括重复项

> ID：13258336
> 
> 赞同：0
> 
> 时间：2012-11-06T19:51:29.847
> 
> 标签：java

我编写了一个小函数来计算目录中所有文件的大小。实际的功能做的更多，但这个例子是为了简洁起见。

这很有效，递归地遍历目录很容易，但我想排除所有已经处理过的文件名。我想跟踪 a 中的所有文件名，`List`以便在获取文件大小之前检查它是否存在于 中`List`，如果存在，则应将其排除。我不想要任何 MD5 校验和或任何东西。文件名足以满足我的情况。

因为我只能从一个函数返回一个值，而 Java 不允许通过引用传递，所以我很不知道什么是实现这一点的最佳方法。这是我的代码：

```
public static Long getFileSize(File dirDirectory) {
    Long lngSize = new Long(0);

    for (File filItem : dirDirectory.listFiles()) {
        if (filItem.isDirectory()) {
            lngSize += getFileSize(filItem);
        }
        else {
            //Is a file with the same filename alrwady been calculated
            //then exclude it
            //else
            //include it.
            lngSize += filItem.length();
        }
    }

    return lngSize;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:00:26.003

Don't use a `List`, use a `HashSet`. A list will use `O(n)` lookups to see if the file is there, whereas a `HashSet` will use `O(1)`.

By making the method public and the helper function private, you don't expose the `HashSet` implementation to the rest of your program (which doesn't and shouldn't care about it).

```
public static Long getFileSize(File dirDirectory) {
    return getFileSize(File dirDirectory, new HashSet<File>());
}

private static Long getFileSize(File dirDirectory, HashSet<File> prevProcess) {
    Long lngSize = new Long(0);

    for (File filItem : dirDirectory.listFiles()) {
        if (prevProcess.contains(filItem) continue;
        if (filItem.isDirectory()) {
            lngSize += getFileSize(filItem);
        }
        else {
            lngSize += filItem.length();
        }
        prevProcess.add(filItem);
    }

    return lngSize;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T19:56:57.970

你可以这样做：

```
public static Long getFileSize(File dirDirectory) {
    return getFileSize(dirDirectory, new HashSet<String>());
}

public static Long getFileSize(File dirDirectory, Set<String> previouslyProcessedFiles) {
    //DO IT HERE AS YOU WISH
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:01:14.820

传递一组：

```
public static Long getFileSize(Set<File> alreadySeen, File dirDirectory) {
    long lngSize = 0;

    for (File filItem : dirDirectory.listFiles()) {
        if (filItem.isDirectory()) {
            lngSize += getFileSize(filItem);
        }
        else {
            //Is a file with the same filename alrwady been calculated
            //then exclude it
            //else
            //include it.
            if (! alreadySeen.contains(filItem.getName())) {
                alreadySeen.add(filItem.getName());
                lngSize += filItem.length();
            }
        }
    }
    return lngSize;
} 
```

打电话：

```
Long size = getFileSize(new HashSet<File>(), myDirectory) 
```

此外，您最好使用`long`计数器，而不是`Long`避免 Java 需要不断地拆箱/重新装箱。

顺便说一句，无需递归即可遍历目录树很简单，只需将遇到的目录添加到列表中以供稍后处理：

```
public static Long getFileSize(File dirDirectory) {
    long lngSize = 0;
    Deque<File> unprocessedDirs = new ArrayDeque<File>();
    unprocessedDirs.add(dirDirectory);
    Set<File> alreadySeen = new HashSet<File>();
    while (!unprocessedDirs.isEmpty()) {
        File dir = unprocessedDirs.removeFirst();

        for (File filItem : dir.listFiles()) {
            if (filItem.isDirectory()) {
                unprocessedDirs.addFirst(filItem); 
            }
            else {
                //Is a file with the same filename alrwady been calculated
                //then exclude it
                //else
                //include it.
                if (! alreadySeen.contains(filItem.getName())) {
                    alreadySeen.add(filItem.getName());
                    lngSize += filItem.length();
                }
            }
        }
    }
    return lngSize;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T20:01:56.733

这个怎么样：

```
public static Long getFileSize(File dirDirectory, List<String> processed) {
    Long lngSize = new Long(0);

    for (File filItem : dirDirectory.listFiles()) {
        if (filItem.isDirectory()) {
            lngSize += getFileSize(filItem, processed);

        } else {
            String filName = filItem.getName();
            if (processed.contains(filName)) {
                continue;
            }
            lngSize += filItem.length();
            processed.add(filName);
        }
    }

    return lngSize;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T20:02:42.660

您可以使用全局变量或将列表作为参数传递给函数。但我的建议不是使用 List，而是使用 Set，尤其是 TreeSet 或 HashSet。

您不需要存储重复项，并且必须在完整列表中搜索文件名 - 在列表 O(n) 中执行非常昂贵的操作。一个集合将防止重复，但特别是 HashSet 是 O(n) 而 TreeSet 是 O(ln n) - 使搜索更快

请参阅：[哈希集与树集](https://stackoverflow.com/questions/1463284/hashset-vs-treeset)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-06T20:31:18.763

我建议您使用内置过滤器或[`FileFilter`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#listFiles%28java.io.FileFilter%29)方法。这种方式更加优雅和直观。[`FilenameFilter`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#list%28java.io.FilenameFilter%29)`File.listFiles()`

```
public class FileSizeCalculator {

    public static void main(String[] args) {
        System.out.println(getFileSize(new File(".")));
    }

    public static Long getFileSize(File directory) {

        FileFilter uniqueFilter = new FileFilter() {
            Set<File> uniqueFiles = new HashSet<File>();
            @Override
            public boolean accept(File file) {
                /**
                 * This will return true only if this set 
                 * did not already contain the specified element
                 */
                return uniqueFiles.add(file);
            }
        };

        long size = 0L;
        for (File file : directory.listFiles(uniqueFilter)) {
            size += file.isDirectory() ? getFileSize(file) : file.length();
        }
        return size;
    }
} 
```

# python - 制作动态变量集

> ID：13258338
> 
> 赞同：0
> 
> 时间：2012-11-06T19:51:39.357
> 
> 标签：python

我正在尝试组合一个具有“级别”概念的工具。每个“级别”都有一组变量来支持我想要实现的特定于每个级别的活动。

我写了一个硬编码的版本（在一定程度上），但它仅限于我硬编码的级别数。让我感到震惊的是，必须有一种更巧妙的方式来编写这个函数，这样才能动态生成关卡变量：

```
def levelVarsGetter(level):
    if level == 1:
        levelDict = {'URLRegEx':baseDict['L1Regex'], 'titleRegEx':baseDict['L1TitleRegex'], 'buildPortion':baseDict['L1buildPortion'], 'levelParser':'level_1'}
    elif level ==2:
        levelDict = {'URLRegEx':baseDict['L2Regex'], 'titleRegEx':baseDict['L2TitleRegex'], 'buildPortion':baseDict['L2buildPortion'], 'levelParser':'level_2'}
    elif level ==3:
        levelDict = {'URLRegEx':baseDict['L3Regex'], 'titleRegEx':baseDict['L3TitleRegex'], 'buildPortion':baseDict['L3buildPortion'], 'levelParser':'level_3'}
    elif level ==4:
        levelDict = {'URLRegEx':baseDict['L4Regex'], 'titleRegEx':baseDict['L4TitleRegex'], 'buildPortion':baseDict['L4buildPortion'], 'levelParser':'level_4'}
    elif level ==5:
        levelDict = {'URLRegEx':baseDict['L5Regex'], 'titleRegEx':baseDict['L5TitleRegex'], 'buildPortion':baseDict['L5buildPortion'], 'levelParser':'level_5'}
    return levelDict 
```

dict 中的所有变量都是在初始化函数中手动输入的。如果需要，可以更改标签。

对于上下文，引用代码：

```
for x in xrange (1, baseDict['numberOfLevels']+1):
    links=[]
    levelDict= levelVarsGetter(x)
    URLRegEx = levelDict['URLRegEx'] 
    titleRegEx = levelDict['titleRegEx']
    buildPortion = levelDict['buildPortion']
    level = levelDict['levelParser'] 
    go = siteParser() 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T19:53:52.967

你可以这样做：

```
def levelVarsGetter(l):
    return {'URLRegEx': baseDict['L%dRegex' % l],
            'titleRegEx': baseDict['L%dTitleRegex' % l],
            'buildPortion': baseDict['L%dbuildPortion' % l],
            'levelParser': 'level_%d' % l} 
```

但是，我怀疑您的数据结构应该以不同的方式设计。存储在其中的任何内容`baseDict`都可以存储在字典中，该字典首先按级别键入，然后按类型键入，例如

```
{1: {"Regex": ..., "TitleRegex": ..., "buildPortion": ...},
 2: {"Regex": ..., "TitleRegex": ..., "buildPortion": ...}... 
```

如果您的级别是连续的（不跳过数字），您应该将它们保留为一个列表：

```
levels = [{"Regex": ..., "TitleRegex": ..., "buildPortion": ...},
          {"Regex": ..., "TitleRegex": ..., "buildPortion": ...}... 
```

（但请注意，您必须访问它`levels[0]`才能获得 1 级）。

确实，最好的设计可能是拥有一个名为的类，该类具有、等`Level`属性。这将使该类还包含常见任务的方法。例如：`regex``title_regex``Level`

```
class Level:
    def __init__(self, url_regex, title_regex, build_portion):
        self.url_regex = url_regex
        self.title_regex = title_regex
        self.build_portion = build_portion

    def method1(self):
        """use build_portion to do something"""
        self.build_portion.do_something()

    def method2(self):
        """use title_regex and url_regex to do something else"""
        x = self.title_regex + self.url_regex 
        x.do_something_else() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:56:16.070

您是否有理由不能将其放入列表中，并使用列表索引作为您的级别编号？前任：

```
levels = [{'URLRegEx' : 'l1url', 'titleRegEx' : 'l1title', 'buildPortion' : 'l1build'},
          {'URLRegEx' : 'l2url', 'titleRegEx' : 'l2title', 'buildPortion' : 'l2build'},
          ...] 
```

# c++ - OpenGL VAO's - 在多个上下文中处理 VAO's

> ID：13258345
> 
> 赞同：9
> 
> 时间：2012-11-06T19:52:26.837
> 
> 标签：c++, qt, opengl

我遇到了一个恐怕很难解决的问题，至少就谷歌搜索显示的情况而言。

我有一个使用 Qt 的编辑器实用程序，它为编辑器中的不同工具创建多个 OpenGL 上下文，它们是一个“世界”编辑器，它托管我的游戏场景的 QGLWidget，以及一个具有“预览”QGLWidget 的材质编辑器，它显示当前建造材料。

我已经能够让上下文共享正常工作，我使用 gDEBugger 查看 OpenGL 上下文，它们共享纹理、VBO、着色器等。但是有一个规定让我想知道这将如何工作，你不能共享顶点数组对象上下文之间。据我了解，顶点数组对象现在是标准，我们应该真正使用它们，而不是使用没有 VAO 的 VBO。

我想了两种方法来解决这个问题，但我并不认为这两种方法都是理想的

1.  在每次渲染之前生成 VAO，但这似乎违背了 VAO 的目的
2.  使用 std::map 将 GL 上下文映射到 VAO，如果当前上下文没有此 VAO，则为所述上下文生成一个，这似乎很糟糕，甚至可能不起作用。

我忽略了哪些其他解决方案？我还考虑过以某种方式将所有内容放在一个上下文中，并为每个所需的 opengl 小部件使用单独的视口，我希望这是可能的，但我没有运气使用 Qt 和它的 QGLWidget 来解决它。

*编辑*

好的，所以我试图让这个工作，但它给我带来了很多悲伤，我尝试了 2 种不同的方法，它们都导致了我的错误。

1）我创建了一个QGLContext，然后在创建它们时将其传递给我的QGLWidgets。

```
QGLFormat    fmt = QGLFormat();
QGLContext*  pContext = new QGLContext(fmt);

QGLWidget*   pWidget1 = new QGLWidget(pContext);
someLayout->addWidget(pWidget1);

QGLWidget*   pWidget2 = new QGLWidget(pContext);
anotherLayout->addWidget(pWidget2); 
```

这里的错误是，一旦我将小部件添加到布局中，或者将其设置为主窗口的中央小部件，它就会删除上下文，真的很奇怪。如果我然后尝试将上下文从第一个小部件传递到第二个小部件

```
QGLFormat    fmt = QGLFormat();
QGLContext*  pContext = new QGLContext(fmt);

QGLWidget*   pWidget1 = new QGLWidget(pContext);
someLayout->addWidget(pWidget1);

pContext = (QGLContext*)pWidget1->context();
QGLWidget*   pWidget2 = new QGLWidget(pContext);
anotherLayout->addWidget(pWidget2); 
```

我得到一个 Qt 错误说 QGLWidget::setContext: Context must refer to this widget

2）我创建了我的第一个小部件并将它的上下文用于所有其他小部件

```
QGLWidget* pWidget1 = new QGLWidget();

QGLContext* pContext = (QGLContext*)pWidget->context();
QGLWidget* pWidget2 = new QGLWidget(pContext); 
```

这给了我从第一个方法结束时得到的相同错误，它说 QGLWidget::setContext: Context must refer to this widget。

这里有些不对劲，我觉得我错过了一些东西。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T20:09:50.907

不能共享 VAO 的原因与不能共享 FBO 的原因相同：它们不保存实际数据，而只是保存缓冲区对象的数据集合。保存您可以共享的数据的 BO。

但是，为什么要跳过上下文共享的圈子呢？您可以为多个窗口重用一个 OpenGL 上下文，只要这些窗口具有相同的视觉格式/FBConfig/PIXELFORMATDESCRIPTOR。

看看下面的 QGLWidget 构造函数：

```
QGLWidget::QGLWidget (
    QGLContext * context, 
    QWidget * parent = 0, 
    const QGLWidget * shareWidget = 0, 
    Qt::WindowFlags f = 0 ) 
```

您可以使用现有的 QGLContext 创建 QGLWidget。要么创建一个独立的 QGLContext 并将其附加到多个窗口，要么创建一个主 QGLWidget，并使用由该窗口创建的上下文。你甚至可以在不丢失上下文和其中的数据的情况下销毁单个 QGLWidget，只要至少有一个 QGLWidget 持有它。

# jquery - 用 Parsefloat 向下取整

> ID：13258347
> 
> 赞同：0
> 
> 时间：2012-11-06T19:52:31.080
> 
> 标签：jquery

我有一个将数字（在本例中为 2500）除以 24 的函数。在本例中，它是 104.166666 重复，当我将它计算到 2 个位置时，我得到 104.17（这是正确的）。但是，我怎样才能将其舍入到 104.16（向下舍入）？

```
var sum = parseFloat(val1) * parseFloat(val2); //here sum is = to 104.1666666
    if (isNaN(sum)) { 
        sum = 0;
    }
    total.val(parseFloat(sum).toFixed(2)); // here it becomes 104.17, but I want it to round down instead 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T19:55:14.273

尝试这样做，通过乘以 100，你得到你想要的精度，把它降低，然后除以 100，把小数位放回它们所属的位置:)

```
parseFloat(Math.floor(sum * 100) / 100).toFixed(2) 
```

# php - 使用表单构建器 symfony2 创建数组输入字段

> ID：13258352
> 
> 赞同：8
> 
> 时间：2012-11-06T19:52:59.363
> 
> 标签：php, symfony, formbuilder

我在 Symfony2 中使用表单生成器时遇到问题。确切地说，我需要输入字段是 html 数组，但我无法使用 createFormBuilder->add 创建它。这是我尝试过的：

```
$attributesForm = $this->createFormBuilder()
        ->add('attribute[0]', 'text') ... 
```

依此类推，但我得到以下异常：

> 名称“attribute[0]”包含非法字符。名称应以字母、>数字或下划线开头，并且只能包含字母、数字、数字、下划线 ("_")、连字符 >("-") 和冒号 (":")。

有什么好的解决方案还是我必须手动创建字段？

提前致谢！

编辑：进一步澄清这一点......我想要生成这样的东西：

```
<div id="msoft_adminbundle_offertype">
<div>Name <input type="text" name="name"></div>
<div>...</div>
<div>Attribute 0 <input type="text" name="attribute[0]"></div>
<div>Attribute 1 <input type="text" name="attribute[1]"></div>
<div>Attribute 3 <input type="text" name="attribute[3]"></div>
<ul>
    </ul>
<p>
    <button type="submit">Edit</button>
</p> 
```

帮助？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-07T22:58:56.277

如上一个答案所述，使用集合类型或嵌套形式，其中每个字段对应于数组的一个条目。如果您不能/不想这样做，您可以执行以下操作：

```
->add('attribute_0', 'text', array(
    'property_path' => 'attribute[0]',
)) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-06T21:02:08.903

您可以使用“集合”字段类型创建输入字段数组。

关于如何使用它的文档可以在这里找到：

[收集文件](http://symfony.com/doc/current/reference/forms/types/collection.html)

如果这还不够清楚，或者您仍有疑问，我很乐意为您提供帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-20T20:57:41.093

您也可以在 TWIG 中覆盖字段。例子：

```
 {{ form_row(form[field_name],{ 'full_name':  'attribute[' ~ step ~ ']' })}} 
```

step 是你的索引。

# objective-c - 您的 mac os x 启动盘没有更多空间可用于应用程序内存

> ID：13258355
> 
> 赞同：7
> 
> 时间：2012-11-06T19:53:12.380
> 
> 标签：objective-c, instruments

因此，在运行我的 Objective-C 应用程序大约 8 小时后，我的机器最终将显示此错误消息。但是在使用 Instruments 24 小时后，它只完成了应用在 8 小时内不使用 Instruments 所能完成的工作的 1% 左右。

我的应用程序基本上采用输入几何并创建导航网格。

我的问题：我怎样才能找出我的问题在哪里？我确定在我的应用程序的某个地方我正在请求内存并且从不释放它。我运行了分析，它发现了一个泄漏，但并不严重，我已经修复了它。

我现在正在为分配/泄漏运行 Instruments，但 16 分钟后我看不到任何明显的东西（我要让它继续下去）。

这是迄今为止它所在位置的快照： ![仪器](../Images/b13abbbd7f9dbbaae194d7b3e7af5663.png)

有人对我如何调试这个有任何想法吗？我希望能够运行大约 20 小时，这样它就可以完成而不是不可避免地死亡：/

提前致谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T22:29:20.477

你会像冠军一样泄露内存！

*   在分配工具中打开“仅跟踪实时分配”

*   打开“跟踪引用计数事件”（或任何名称）

*   重新运行您的会话并按“总字节数”列排序

*   从顶部开始，最占用内存的分配，然后单击小箭头以查看所有这些分配的来源，继续向下列表...

它很像 Heapshot 分析，因此，我不久前写的[这篇博客文章](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)可能会有所帮助。

# openerp - OpenERP：如何覆盖继承视图的操作？

> ID：13258359
> 
> 赞同：7
> 
> 时间：2012-11-06T19:53:31.980
> 
> 标签：openerp

我想禁止在制造页面的默认视图上显示库存值变化图表。我正在使用继承来修改表单。现在我可以继承表单并获得额外的操作来显示。但是，我无法将 position="replace" 用于操作、表单或“arch”字段。那么如何停止显示股票价值变化或其他图表？

背景：我是 OpenERP 新手，我正在尝试使用制造模块创建一个自定义应用程序来跟踪原型硬件开发。我想要的大部分功能已经存在，所以 OpenERP 是天作之合。但是，第一步是禁用任何不必要的东西。继承和替换*字段*以阻止它们出现并不是问题，但我没有任何运气摆脱创建报告和图表的*操作。*

相关问题：

*   单独留下制造页面并创建一个全新的“原型”模块会更好吗？换句话说，现在我正在尝试更改制造页面的行为——创建一个新模块并添加一个“原型”按钮以及销售/采购/仓库/制造/会计/设置会更好吗？默认页面的顶部？

*   我不确定默认制造页面顶部的额外“更改布局”按钮来自哪里，或者如何摆脱它。有任何想法吗？

*   我从动态名称派生并在另一个模块中引用它们的问题是什么？（例如，mrp_boot_view.xml 中的名称="%(procurement.procurement_exceptions)d"）。

Windows 上的 OpenERP 6.1，在本地安装所有内容。

这是代码：

```
__openerp__.py:

{
    "name" : "prototyping tool",
    "version" : "0.1",
    "author" : "",
    "website" : "",
    "category" : "Manufacturing",
    "sequence": 19,
    "images" : [],
    "depends" : ["mrp", "base"],
    "description": """initial version doesn't do much, simplifies MRP views.""",
    'init_xml': [],
    'update_xml': ["mrp_boot_view.xml"],
    'demo_xml': [],
    'test': [],
    'installable': True,
    'application': True,
    'auto_install': False,
    'certificate': '',
} 
```

* * *

```
__init__.py:
    import mrp_boot
    import mrp 
```

* * *

```
mrp_boot.py:

# None of this functionality is currently used

import mrp_boot
import mrp

from osv import fields, osv

class mrp_boot(osv.osv):
   _name = "mrp_boot"
   _inherit = "purchase.order"

   def _get_boot_expense_category(self, cursor, user_id, context=None):
       return (
           ('NRE', 'NRE'),
           ('MatProto', 'Materials / Prototype'),
           ('Capital', 'Capital'),
           ('Loaner', 'Loaner'))

   _columns = {
       'boot_expense_category':
           fields.selection( _get_boot_expense_category
                           , 'Expense Category'
                           , help="How the equipment for the entire PO is to be expensed. If multiple methods will be used, multiple POs must be created"),
       }

mrp_boot() 
```

* * *

```
mrp_boot_view.xml:

# I'd like to supress the display of the charts generated by the actions 
<?xml version="1.0" ?>

<openerp>
<data>
     <record id="board_mrp_manager_form" model="ir.ui.view">
          <field name="name">board.mrp.manager.form</field>
          <field name="model">board.board</field>
          <field name="inherit_id" ref="mrp.board_mrp_manager_form" />
          <field name="type">form</field>
          <field name="priority" eval="15"/>
          <field name="arch" type="xml">

               <form string="Manufacturing board">
                    <board style="2-1">
                        <column>
                            <action name="%(procurement.procurement_exceptions)d" string="New Prototype Outlook" domain="[('state','=','exception')]"/>
                        </column>
                        <column>
                        </column>
                    </board>
                </form>

          </field>
     </record>
</data>
</openerp> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T04:47:00.780

您不能使用替换属性来修改任何实际操作。

要继承操作或更改操作，您可以覆盖操作的 ID。
例如，我想覆盖采购模块的操作，然后我可以根据我的要求更改 view_type 或 view_mode 或 context 或 search_view_id ：

```
<record id="procurement.procurement_exceptions" model="ir.actions.act_window">
        <field name="name">Procurement Exceptions</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">procurement.order</field>
        <field name="view_type">form</field>
        <field name="view_mode">form</field>
        <field name="context">{'search_default_perm_exceptions':1}</field>
        <field name="search_view_id" ref="procurement.view_procurement_filter"/>
</record> 
```

要从继承的视图中删除额外的东西（取自评论）：

```
<record id="my_customized_board_mrp_manager_form" model="ir.ui.view">
    <field name="name">board.mrp.manager.form</field>
    <field name="model">board.board</field>
    <field name="inherit_id" ref="mrp.board_mrp_manager_form" />
    <field name="type">form</field>
    <field name="arch" type="xml">
        <action name="%(mrp.action_report_in_out_picking_tree)d" position="replace"/>
    </field>
<record> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-07T10:13:55.367

当您从 purchase.order 继承所有字段时，您无需使用 _name='mrp_boot' .. 因为您使用的是现有对象，而不是创建新对象

# gruntjs - yeoman 构建过程

> ID：13258360
> 
> 赞同：3
> 
> 时间：2012-11-06T19:53:33.823
> 
> 标签：gruntjs, yeoman

所以我目前正在使用我非常喜欢的 Yeoman。我有一个任务要做，就是抓取我的 Angular 应用程序并使其无服务器。基本上这意味着抓取所有模板并将它们插入到 index.html 文件中

```
<script type="text/ng-template" id="dir to template"> ..template html goes here </script> 
```

现在 yeoman 有自己的 gruntfile，我完全是 Grunt 的新手，所以我想知道
a) 这应该是 grunt 处理的任务吗？
b) 我应该调整现有的 grunt 文件还是创建一个新文件？
c) 关于在哪里可以找到有关如何执行此操作的文档的任何好主意？

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-08T16:25:28.610

我们正在努力使 Yeoman 更易于定制，但与此同时，您可以`build`通过在 Gruntfile 中添加以下内容来覆盖该任务：

```
grunt.renameTask('build', 'oldbuild');
grunt.registerTask('build', 'your-task oldbuild'); 
```

这将允许您将任何您想要的任务添加到构建过程中。

* * *

如果您想进一步自定义，您可以改写`build`并从 yeoman 提供的任务中拼凑您想要的内容：`usemin-handler rjs concat css min img rev usemin manifest html`.

例子：

```
grunt.registerTask('build', 'your-task rjs concat css whatever-you-want'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T14:48:00.227

目前无法自定义 yeoman 构建过程。但是您可以使用此**解决方法**。将以下代码复制到您自己的 Gruntfile 中：

```
// Clobber the original targets
var targets = {
    // Add as many custom targets as you want, using custom modules, etc.

    // Keep the existing targets
    default   : '               rjs concat css min img rev usemin manifest',
    usemin    : 'usemin-handler rjs concat css img rev usemin manifest',
    text      : 'usemin-handler rjs concat css min     rev usemin manifest',
    buildkit  : 'usemin-handler rjs concat css min img rev usemin manifest html:buildkit',
    basics    : 'usemin-handler rjs concat css min img rev usemin manifest html:basics',
    minify    : 'usemin-handler rjs concat css min img rev usemin manifest html:compress',
    test      : 'usemin-handler rjs concat css img rev usemin manifest',

    yourbuild : 'intro clean mkdirs rjs'
};

// If we clobber targets, we have to rebuild targetList, the below is copy paster from Yeoman.js
var targetList = grunt.log.wordlist(Object.keys(targets));

// We also have to rebuild the build task with the new targetList
grunt.registerTask('build', 'Run a predefined target - build:<target> \n' + targetList,  function(target) {
    var valid = Object.keys(targets);
    target = target || 'usemin';

    if ( valid.indexOf( target ) === -1 ) {
        grunt.log
        .error('Not a valid target')
        .error(grunt.helper('invalid targets', targets));
        return false;
    }

    var tasks = ['intro', 'clean coffee compass mkdirs', targets[target], 'copy time'].join(' ');

    // Now overwrite the task for our costume build
    if( target === 'yourbuild') {
        tasks = targets[target];
    }

    // Conditionally remove compass / manifest task if either compass or
    // phantomjs binary is missing. Done only for `test` target (specifically
    // used for our `npm test`). For each, output warning infos.
    if( target === 'test' ) {
        tasks = grunt.helper( 'build:skip', tasks, 'compass' );
        tasks = grunt.helper( 'build:skip', tasks, 'phantomjs', 'manifest' );
    }

    grunt.log.subhead('Running ' + target + ' target')
    .writeln('  - ' + grunt.log.wordlist(tasks.split(' '), { separator: ' ' }));

    grunt.task.run(tasks);
}); 
```

现在您可以更改以下行来自定义您自己的构建过程：

```
yourbuild : 'intro clean mkdirs rjs' 
```

但请记住，此代码是**从 yeoman 源复制的**，如果更新，您必须自己执行相同操作。

# c# - SignalR 不适用于自定义序列化程序

> ID：13258362
> 
> 赞同：2
> 
> 时间：2012-11-06T19:53:45.723
> 
> 标签：c#, javascript, .net, signalr

我正在尝试将信号器配置为发送带有小写成员的 JSON 对象。目前我正在使用自定义 ContractResolver 进行配置，并将其放入我的启动代码中：

```
var serializer = new JsonNetSerializer(new JsonSerializerSettings
{
    ContractResolver = new CamelCasePropertyNamesContractResolver()
});
GlobalHost.DependencyResolver.Register(typeof (IJsonSerializer), () => serializer); 
```

但是，这样配置时不会收到任何 javascript 调用。有什么想法有什么问题吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:16:14.827

好的，这帮助我解决了这个问题：

[https://github.com/SignalR/SignalR/issues/500#issuecomment-7453751](https://github.com/SignalR/SignalR/issues/500#issuecomment-7453751)

# javascript - Javascript - 使用 apply 调用绑定函数

> ID：13258365
> 
> 赞同：3
> 
> 时间：2012-11-06T19:54:05.810
> 
> 标签：javascript

假设我们有以下示例 Javascript 代码：

```
var modeller = "foo";
var provider1 = function (modeller, content, optionalArg) {
    alert("this: " + this + ", content: " + content + ", optionalArg: " + optionalArg);
}.bind(null, modeller);

var provider2 = function (content, optionalArg) {
    alert("this: " + this + ", content: " + content + ", optionalArg: " + optionalArg);
};

var createConsumer = function () {
    // some arbitrary private vars
    var content = 1; 
    var option = 2; 

    var doConsume = function(provider) {
        provider.apply(this, [content, option])
    };
    return {consume: doConsume};
};

// Now use them
var consumer = createConsumer();

consumer.consume(provider1);
consumer.consume(provider2); 
```

出于演示目的，这被简化了很多，但要点是`provider1`已经绑定，而`provider2`不是 - 消费者不能将自己`this`作为`provider1`.

**问题：**有没有办法检测这种函数已经绑定的情况？有没有办法`provider1`将消费者用作`this`？假设答案是否定的，解决这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T20:04:19.630

> *“有没有办法检测这种已经绑定函数的情况？”*

不。

> *“有没有办法`provider1`使用`consumer`as `this`？”*

不。

> *“......解决这种情况的最佳方法是什么？”*

由于您似乎想要绑定一个参数而不是`this`值，因此我会创建一个参数绑定方法，`Function.prototype`该方法返回一个仅绑定参数的函数，而不是`this`.

```
Function.prototype.argBind = function() {
    var _slicer = [].slice,
        orig_args = _slicer.call(arguments),
        orig_func = this;
    return function() {
        return orig_func.apply(this, orig_args.concat(_slicer.call(arguments)));
    };
}; 
```

* * *

然后你会像这样使用它：

```
var modeller = "foo";
var provider1 = function (modeller, content, optionalArg) {
    alert("this: " + this + ", content: " + content + ", optionalArg: " + optionalArg);
}.argBind(modeller); 
```

现在将使用给定`provider1`的任何正常值调用该函数`this`，但`modeller`将绑定为第一个参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-28T14:47:54.193

有一种方法可以检测一个函数是否已经被绑定，但它并不是很优雅： `/\[native code]/.test(foo.toString());` 绑定函数的本地代码为 toString()。这适用于 Chrome（NodeJS）。我不知道其他浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-17T17:31:32.937

这是一些示例代码，它演示了 apply() 和 call() 的第一个参数不会更改绑定函数内的 'this' 的值：

```
let bf = f .bind  (123);
let n  = bf.call  (234);
let n2 = bf.apply (234);
ok (n  === 123);
ok (n2 === 123);

function f ()
{ return this;
} 
```

（上面的 ok() 是一个函数，如果使用不真实的参数调用，则会引发错误）。

**你能检测出一个函数是否被绑定吗？**

在我看来，上面 Mihai Voicescu 的答案似乎是正确的。一种变体是：

将一些唯一的字符串（比如说你的名字作为函数的作者）到函数的源代码中的注释中，你以后将要测试“绑定”。取被测试函数的 toString() 。如果这不包括它在原始源中所做的唯一字符串，那么您就知道它是一个绑定。最好一如既往地测试您想要支持的浏览器。

**解决这种情况的最佳方法是什么？**

使用一个普通的可选参数来传递您想要用作“替代-this”的对象。例如，称其为“自我”。'self' 参数可以将其默认值声明为 'this'。然后在函数内部到处使用'self'而不是'this'。默认情况下，它的值将与绑定的“this”相同，但您可以通过为可选参数“self”传入一个显式的不同值来更改它。如果您确实想使用绑定的“this”，则根本不需要传入可选的自参数。

# ios - Apple 如何在 SMS 消息中完成动画 GIF？

> ID：13258366
> 
> 赞同：1
> 
> 时间：2012-11-06T19:54:08.290
> 
> 标签：ios

我刚刚了解到，从 iOS 5.0 开始，您可以在 SMS 消息中发送动画 GIF。

鉴于 UIImage 和 UIImageView 不提供处理动画 GIF 的开箱即用解决方案，有谁知道 Apple 是如何实现它的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T10:02:37.417

动画 UIImageView ？

```
self.imgview_animation.animationImages = [NSArray arrayWithObjects:
                                              [UIImage imageNamed:@"animation_1.jpg"],
                                              [UIImage imageNamed:@"animation_2.jpg"],
                                              [UIImage imageNamed:@"animation_3.jpg"],
                                              [UIImage imageNamed:@"animation_4.jpg"],
                                              [UIImage imageNamed:@"animation_5.jpg"],
                                              [UIImage imageNamed:@"animation_6.jpg"],
                                              [UIImage imageNamed:@"animation_7.jpg"],
                                              [UIImage imageNamed:@"animation_8.jpg"],
                                              [UIImage imageNamed:@"animation_9.jpg"],
                                              [UIImage imageNamed:@"animation_10.jpg"],nil];

self.imgview_animation.animationDuration = 4; // seconds
self.imgview_animation.animationRepeatCount = 1; // 0 = loops forever
[self.imgview_animation startAnimating]; 
```

# magento - magento ：根据当前产品集合获取最畅销的产品

> ID：13258371
> 
> 赞同：2
> 
> 时间：2012-11-06T19:54:31.597
> 
> 标签：magento

我正在尝试通过覆盖 Catalog/Product/List.php 来使用当前产品集合检索畅销产品

```
<?php
 if($this->getRequest()->getParam('best')==1){ 

     $this->_productCollection->getSelect()
          ->joinLeft(array('items'=>'sales_flat_order_item'), "items.product_id = e.entity_id", array('count'=>'SUM(qty_ordered)'))
          ->group('e.entity_id');
     $this->_productCollection->getSelect()->having('SUM(items.qty_ordered) > ?',0);
     return $this->_productCollection;
 }
?> 
```

使用上面的代码，我得到以下 SQL 错误，该错误是由于 having 子句引起的，我如何在上面的代码中使用 havinh 子句来避免结果行具有 qty_ordered<1

```
SQLSTATE[42S22]: Column not found: 1054 Unknown column 'items.qty_ordered' in 'having clause' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T20:03:49.787

如果您只是想获得最畅销的产品

```
$storeId    = Mage::app()->getStore()->getId();

$products = Mage::getResourceModel('reports/product_collection')
            ->addOrderedQty()
            ->addAttributeToSelect(array('name', 'price', 'small_image')) //edit to suit tastes
            ->setStoreId($storeId)
            ->addStoreFilter($storeId)
            ->setOrder('ordered_qty', 'desc'); //best sellers on top

Mage::getSingleton('catalog/product_status')->addVisibleFilterToCollection($products);
Mage::getSingleton('catalog/product_visibility')->addVisibleInCatalogFilterToCollection($products);

print_r($products->getData()); 
```

查看更多@ [http://magentocommerce.com/boards/viewthread/14764](http://magentocommerce.com/boards/viewthread/14764)

# javascript - 如何将部分模板加载到grails中的div中

> ID：13258373
> 
> 赞同：3
> 
> 时间：2012-11-06T19:54:32.740
> 
> 标签：javascript, jquery, grails

我是 grails 的新手，找不到解决方案。

每当单击创建客户端时，我想用部分模板 _client.gsp 的内容填充主内容 div。

我有以下 gsp 页面 admin.gsp

```
<!DOCTYPE html>
<html>
  <head>
    <title>Admin Create</title>
<meta name="layout" content="main"/>
  </head>
  <body>
    <aside class="sidebar span3">

      <ul class="nav nav-list">
        <li class="nav-header">Admin Console</li>
        <li class="create-client"><a href="#">Create Client</a></li>
        <li><a href="#">Library</a></li>
      </ul>
    </aside>

    <div class="main-content span7">
    </div>

    <g:javascript src="admin.js"/>
  </body>
</html> 
```

我有一个名为 _client.gsp 的部分模板

```
<g:hasErrors bean="${client}">
  <div class="alert alert-error alert-block client ">
    <g:renderErrors bean="${client}" as="list" />
  </div>
</g:hasErrors>
<g:form controller="admin" action="createClient">               
  <div class="row">
    <legend>Create Client</legend>
      <div class="span4">
        <label>Client Name:</label>
        <g:textField name="client.name" />
      </div>
      <div class="span4">
        <label>Client Type:</label>
        <g:textField name="clientType.type"/>
      </div>
      <div class="span4">
        <label>External Id:</label>
        <g:field type="number" required="" min="0" value="1" name="client.externalId"/>
      </div>
    </div>
  </div>    
</g:form> 
```

我的 admin.js 看起来像这样

```
$(function(){
  $('.create-client').on('click', function(e){
    e.preventDefault();
    $('.create-client').addClass('active');
    $('main-content').load('_client.gsp');
  });
}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-06T20:23:27.507

首先，创建一个控制器，为 AJAX 调用提供模板内容：

```
class AdminController {
    def client() {
        render template: 'client',
            model: [...],
            contentType: 'text/plain'

    }
} 
```

这会将 的内容呈现`_client.gsp`为字符串并以`text/plain`内容类型返回。在您的 javascript 中，使用以下命令调用它`load`：

```
$('.main-content').load('/myapp/admin/client'); 
```

# java - 使用 createAndShowGUI() 方法时如何将图标设置为 JFrame？

> ID：13258375
> 
> 赞同：3
> 
> 时间：2012-11-06T19:54:33.120
> 
> 标签：java, swing, netbeans, icons, jframe

我正在使用一种`createAndShowGUI()`方法来创建一个`JFrame`. 我正在尝试设置一个图标，但是当我在 NetBeans 中运行它时，它没有显示。但是，当我运行一个`.jar`文件（图像在同一个文件夹中）时，它可以正常工作。

```
private static void createAndShowGUI() {
    //Create and set up the window.
    JFrame game = new JFrame();
    game.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    game.setSize(198, 409);  
    game.setResizable(false);
    game.setTitle("Frame Title"); 
    ImageIcon img = new ImageIcon("Icon.png");
    game.setIconImage(img.getImage());
    game.setVisible(true);

} 
```

问题可能出在哪里？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T21:19:54.913

你为什么不制作这样的包：

```
org.icon 
```

并将图标添加到该包。

要设置图标，请使用：

```
ImageIcon img = new ImageIcon(Game.class.getResource("/org/Icon/NameOfIcon.png"));
game.setIconImage(img.getImage()); 
```

您的程序将没有问题找到一个图标。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T20:27:02.270

当我使用测试图像运行上述代码时，图标已正确更改。添加：

```
System.out.println(System.getProperty("user.dir")); 
```

到方法以显示图像*应*位于的文件夹并在必要时将其复制到那里。

# php - 用于 PHP 的更快的 XSL 处理器

> ID：13258377
> 
> 赞同：7
> 
> 时间：2012-11-06T19:54:37.693
> 
> 标签：php, xslt

我们目前使用内置 php XSL 处理器作为我们 Web 应用程序的模板引擎。这又使用 libxslt 库。它的速度似乎并不令人满意。是否有可以与 PHP 一起使用的更快/更好的 XSL 处理引擎？或者有没有办法加快 libxslt 的安装速度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T23:00:49.547

我在性能方面遇到了同样的问题。当我在 Windows 下运行时，我编写了一个类，它是我通过 COM 访问的 msxml 的包装器。这比原生 PHP XSL 转换要快得多。（当然，如果您没有运行 Windows，这对您毫无帮助。）

我将在这里包含我的一些代码，通常需要注意的是我不是 PHP 专家，我不承诺它是完美的：

```
class xsltransform {
    private $xmlfilename;
    private $xslfilename;
    private $xslt;
    private $xslDoc;
    private $xmlDoc;
    private $xslProc;
    private $parameters = array();
    public function __construct() {
        $this->xslt = new COM("Msxml2.XSLTemplate.6.0");
        $this->xslDoc = new COM("Msxml2.FreeThreadedDOMDocument.6.0");
        $this->xslDoc->async = false;
        //to allow xsl:import in xsl since security changes in MSXML 6.0
        //http://msdn.microsoft.com/en-us/library/windows/desktop/ms763800(v=vs.85).aspx
        $this->xslDoc->resolveExternals = true;
        //to allow xsl:document in xsl since security changes in MSXML 6.0
        $this->xslDoc->setProperty("AllowDocumentFunction", true);
        $this->xmlDoc = new COM("Msxml2.DOMDocument.6.0");
        $this->xmlDoc->async = false;
    }
    private function loadxml() {
        $this->xmlDoc->load($this->xmlfilename);
        $this->checkParseError($this->xmlDoc, "xmlDoc, filename={$this->xmlfilename}");
    }   
    private function loadxsl() {
        $this->xslDoc->load($this->xslfilename);
        $this->checkParseError($this->xslDoc, "xslDoc, filename={$this->xslfilename}");    

    }
    private function addParameters() {
        foreach ($this->parameters as $name => $value) {
            $this->xslProc->addParameter($name, $value, '');
        }

    }                    
    public function setxmlfilename($filename) {
        $this->xmlfilename = $filename;    
    }
    public function setxslfilename($filename) {        
        $this->xslfilename = $filename;    
    }
    public function addProperty($name, $value) {
        $this->parameters[$name] = $value;
    }
    private function checkParseError($doc, $message = '') {
        if ($doc->parseError->errorCode) {
            print("XML Parse Error (" . $message . "): " . $doc->parseError->errorCode . $doc->parseError->reason);
            exit; 
        }
    }
    private function loadAndTransform() {
        $this->loadxsl();
        $this->xslt->stylesheet = $this->xslDoc;
        $this->xslProc = $this->xslt->createProcessor();
        $this->xslProc->input = $this->xmlDoc;
        $this->addParameters();
        $this->xslProc->transform();
    }
    public function output() {
        $this->loadxml();
        $this->loadAndTransform();            
        return $this->xslProc->output;
    }
    public function transform($xmlText) {
        $this->xmlDoc->loadXML($xmlText);
        $this->checkParseError($this->xmlDoc, "xmlDoc");
        $this->loadAndTransform();            
        return $this->xslProc->output;
    }
}; 

function xslTransform($xmlfilename, $xslfilename, $params) {
    $scriptPath = (dirname(__FILE__));
    $xslfilenameabsolute = "{$scriptPath}'\\..\\xsl\\{$xslfilename}";
    if (!file_exists($xmlfilename)) {
        die("{$xmlfilename} does not exists.");
    }
    if (!file_exists($xslfilenameabsolute)) {
        die("{$xslfilenameabsolute} does not exists.");
    }
    $xsltransform = new xsltransform();
    $xsltransform->setxmlfilename($xmlfilename);
    $xsltransform->setxslfilename($xslfilenameabsolute);
    foreach($params as $key=>$param) {
        $xsltransform->addProperty($key, $param, '');
    }
    return $xsltransform->output();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-08T03:47:39.060

使用对 XSLT 的原生 PHP 支持，它的内存使用率很低。这确实为 DOMDocument 和 XSLTProcessor 类创建了一个依赖项，这些类可以在 PHP 5 的 XSL.dll 中找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-30T17:07:09.910

是的，PHP 使用[libxml2 的 Libxslt](http://xmlsoft.org/XSLT.html)，它非常流行，也许是最安全和**更快的（！）XSLT 处理器**，用于 15 年的[XSLT1 标准](http://www.w3.org/TR/xslt)。所以，这是最好的解决方案……在 XSLT 社区正在迁移到 XSLT2（非常复杂且比 v1 慢）的情况下，因为使用 2014 年的服务器机器，性能问题消失了。

* * *

## 提高 XSLT1 的性能

有许多方法可以改进处理，从 XML-get 到 XSLT-processed-cache。

1.  您正在使用“大 XML 文件”吗？为什么？今天，您可以[使用 PostgreSQL](http://www.postgresql.org/docs/9.3/static/functions-xml.html)*在 SQL 数据库中拆分记录* ，并仅检索（使用 SQL 和/或 XPath）您必须使用的片段。

2.  **重用**（XSLT 和 XML）DOM 转换的对象：参见[ex. 与 DOMDocument 链接的方法](https://stackoverflow.com/a/17765627/287948)。

3.  检查并**简化**您的 XSLT：就像在任何 MVC 上下文中一样，MVC-View 不能用作“图灵完备算法”，而只能用作占位符和循环解析器（参见[T. Parr 2004](http://www.cs.usfca.edu/~parrt/papers/mvc.templates.pdf)和[2008](http://www.artima.com/lejava/articles/stringtemplate.html)）。所以进行基准测试，将性能与更简单的进行比较。
    *重要提示*：好的，如果您在模板中需要“辅助方法”和其他快速（如[修剪](https://stackoverflow.com/a/23849409/287948)！）或复杂函数，不要尝试将 XSLT1 用作 XSLT2（！），XSLT1 不适合它......相反，**使用 [registerPHPFunctions 作为在本教程中显示](http://en.wikibooks.org/wiki/PHP_Programming/XSL/registerPHPFunctions)**。

4.  **缓存**：获得性能的最后机会...如果多次使用， 您*可以缓存您的 XSLT ，请参阅*[这个关于 XSLT-caching in PHP 的好答案](https://stackoverflow.com/a/20132839/287948)，以及[这个其他选项](http://pecl.php.net/package/xslcache)。

* * *

Libxml2处理 XSLT1的*Libxslt 的*替代方案？我不建议浪费时间。但是，如果您真的需要复杂的模板，而不是浪费时间使用 XSLT1，那么请使用 XSLT2！

使用 PHP 的解决方案：嗯……是问题所在，请参阅[此处的讨论](https://softwareengineering.stackexchange.com/q/205580/84349)，其中出现了一个可能的解决方案，即[Saxon/C](http://www.saxonica.com/saxon-c/index.xml)，它是唯一一款免费且良好的 XSLT2 处理器，它不是 Java，并且有一个 PHP 端口……但是是测试版（v0.3.1）。

# objective-c - NSMutableArray indexOfObject 返回一个非常大的数字

> ID：13258378
> 
> 赞同：2
> 
> 时间：2012-11-06T19:54:38.697
> 
> 标签：objective-c, ios, nsmutablearray

我有一个 NSMutableArray 返回一个非常大的索引？

```
po [masterArray count] < returns "2"

NSUInteger theIndex = [masterArray indexOfObject:validateEnrollmentStatus]; 
```

以上返回“2147483647”的NSUInteger？我不确定这怎么可能或发生了什么？masterArray 显然必须在调试控制台中给定计数方法调用。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-06T19:55:17.723

这就是 的价值`NSNotFound`。这意味着您要查找的对象不在数组中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:27:05.750

像这样试试。`validateEnrollmentStatus`中不存在`masterArray`。因此，您可以在尝试获取`indexOfObject`.

```
 NSUInteger theIndex = 0;

    if ([masterArray containsObject:validateEnrollmentStatus]) {
        theIndex = [masterArray indexOfObject:validateEnrollmentStatus];
    } else {
        NSLog(@"%@ is not present in masterArray", validateEnrollmentStatus);
    } 
```

# ios - cocos2d 2.0 App在设备上崩溃但在模拟器中没有

> ID：13258379
> 
> 赞同：1
> 
> 时间：2012-11-06T19:54:38.877
> 
> 标签：ios, xcode, cocos2d-iphone

我的应用程序在我的设备上崩溃了，但在我的模拟器中没有

我正在使用 cocos2d 2.0 我有 macbook air 2011 osx 10.8.2 我的设备是 iPad 2 ios 6.0.1

它发生在 b2math.h 中，在下面的行中

```
void Set(float32 x_, float32 y_) { x = x_; y = y_; } 
```

它在启动时崩溃

# android - 滚动时Android ListView闪烁/不正确刷新

> ID：13258380
> 
> 赞同：0
> 
> 时间：2012-11-06T19:54:45.000
> 
> 标签：android, listview

我是一个尝试我的第一个项目（API 级别 10）的 android 新手。我正在我的 ListActivity 中下载 json 数据，将其填充到本地 sqlite db 并使用自定义 CursorAdapter 显示它。我现在的布局中只有 TextViews，但会改变它，因此自定义 CursorAdapter。一切似乎都正常，数据库已填充并显示数据，但在滚动列表时它会闪烁，并且我正在覆盖文本/不干净的刷新。任何帮助，将不胜感激。我尝试在我的 ItemAdapter 中使用“ViewHolder”，但没有帮助，然后将其删除。我没有指定背景..

我的代码：

```
public class ItemList extends ListActivity {

    private static ItemDBAdapter dao;
    private static ProgressDialog dialog;
    private static Cursor ItemCursor;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_Item_list);
        getListView().setSmoothScrollbarEnabled(true);
        dao = new ItemDBAdapter(this);
        dao.open();
        dialog = ProgressDialog.show(this, "Download", "Downloading");
        load();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_Item_list, menu);
        return true;
    }

    @Override
    protected void onDestroy() {
      if (dialog != null && dialog.isShowing()) {
        dialog.dismiss();
        dialog = null;
      }
      super.onDestroy();
    }

    private class DownloadDataTask extends AsyncTask<String, Void, String> {
        @Override
        protected String doInBackground(String... urls) {
          String success = "false";
          String response = "";

          for (String url : urls) {
            DefaultHttpClient client = new DefaultHttpClient();
            HttpGet httpGet = new HttpGet(url);
            try {
              HttpResponse execute = client.execute(httpGet);
              InputStream content = execute.getEntity().getContent();

              BufferedReader buffer = new BufferedReader(new InputStreamReader(content));
              String s = "";
              while ((s = buffer.readLine()) != null) {
                response += s;
              }
              JSONArray Items = new JSONArray(response);
              dao.saveAll(Items);

            } catch (Exception e) {
              e.printStackTrace();
            }
          }
          success = "true";

          return success;
        }

        @Override
        protected void onPostExecute(String result) {
            // TODO: check if internet failed, not all data loaded, etc...
            dialog.dismiss();
            fillData();
            if (result == "true") {

            }
        }
      }

      public void load() {
        DownloadDataTask task = new DownloadDataTask();
        task.execute(new String[] { "http://247.85.45.12:3000/Item/index.json" });
      }

      public void fillData() {
          ItemCursor = dao.getAll();
          ItemAdapter adapter = new ItemAdapter(this, ItemCursor);
          setListAdapter(adapter);
          startManagingCursor(ItemCursor);

      }
}

public class ItemAdapter extends CursorAdapter {

private final Context context;
private int NAME, ADDRESS, PHONE, URL;
private LayoutInflater inflater;
public ItemAdapter(Context context, Cursor c) {
    super(context, c);
    this.context = context;
    NAME = c.getColumnIndex(ItemDBAdapter.KEY_NAME);
    URL = c.getColumnIndex(ItemDBAdapter.KEY_URL);
    ADDRESS = c.getColumnIndex(ItemDBAdapter.KEY_ADDRESS);
    PHONE = c.getColumnIndex(ItemDBAdapter.KEY_PHONE);
    inflater = LayoutInflater.from(context);
}
@Override
public void bindView(View view, Context context, Cursor cursor) {
    if (view != null) {
    TextView name = (TextView)view.findViewById(R.id.name);
    TextView url = (TextView)view.findViewById(R.id.url);
    TextView address = (TextView)view.findViewById(R.id.address);
    TextView phone = (TextView)view.findViewById(R.id.phone);

    name.setText(cursor.getString(NAME));
    url.setText(cursor.getString(URL));
    address.setText(cursor.getString(ADDRESS));
    phone.setText(cursor.getString(PHONE));
    }

}
@Override
public View newView(Context context, Cursor cursor, ViewGroup parent) {

     View v = inflater.inflate(R.layout.Item_item, null);        

    return v;
} 
```

}

活动布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
      android:layout_width="wrap_content"
        android:layout_height="wrap_content">

    <ListView android:id="@+id/android:list"
          android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

</LinearLayout> 
```

列表项布局：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/address"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

     <TextView
        android:id="@+id/phone"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

    <TextView
        android:id="@+id/url"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T17:06:21.237

问题已解决，我已将 ListView 宽度和线性布局宽度更改为“match_parent”

```
 <ListView android:id="@+id/android:list"
          android:layout_width="match_parent"
            android:layout_height="wrap_content"/> 
```

我注意到有不干净的刷新和覆盖文本的区域是未使用的区域。这解决了问题。根本看不到虚拟设备上的问题，但在高分辨率 Galaxy s3 上非常明显

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-06T22:06:53.240

试着打电话

```
getListView.setCacheColorHint(...); 
```

使用您的项目的背景颜色或 0 如果没有这种颜色（它将禁用缓存）。如果您根本没有背景，甚至没有窗口背景，那也可能是问题所在。

希望能帮助到你。

# android - 如何使用 Scala 在 Android 上执行活动测试？

> ID：13258381
> 
> 赞同：0
> 
> 时间：2012-11-06T19:54:48.953
> 
> 标签：android, scala, testing, android-activity

我已经按照本教程在 Intellij 上开发 Scala-Android 项目，并且一切（ActivityTests 除外）都可以正常工作：http://i-apply.blogspot.gr/2012/09/android-scala-intellij-on-ubuntu-for [。 html](http://i-apply.blogspot.gr/2012/09/android-scala-intellij-on-ubuntu-for.html)

我还在 Build.scala 文件中包含了所有这些库依赖项（已经包含了 junit 4.10）：

```
libraryDependencies += "org.scalatest" %% "scalatest" % "1.8" % "test",
libraryDependencies += "org.specs2" %% "specs2" % "1.12.2" % "test" 
```

位于 [项目文件夹]/src/test/scala/SomeTestClass.scala 的单元测试通过运行以下命令执行：

AndroidTests 和 ActivityTests 位于子项目“tests”中

```
<project folder>/tests/src/main/scala/Tests 
```

似乎不起作用！

我愿意

```
cd tests 
```

转到测试文件夹并在我执行的那个子项目上

```
sbt test 
```

我得到的错误是

```
ActivityInstrumentationTestCase2(classOf[MainActivity]) has too many arguments 
```

和

```
junit library is not found 
```

我怎么能让它们跑起来？

# ios - KIF 可以针对 UIWebView 组件吗？

> ID：13258382
> 
> 赞同：3
> 
> 时间：2012-11-06T19:54:50.723
> 
> 标签：ios, testing, uiwebview, kif-framework

是否可以在 KIF 测试中针对 UIWebView 组件？

我已经设法通过使用来获得有限的功能，`stepToTapScreenAtPoint`但是当目标内容“低于首屏”时会出现重大问题。

我也取得了有限`stepToEnterText:kTestEmail intoViewWithAccessibilityLabel:@"Email"]`的成功，但虽然它可以找到输入字段并开始输入，但在完成输入后测试失败。

所以我的问题是 KIF 是否支持定位基于 webview 的步骤？测试这个的正确方法是什么？

谢谢！（KIF结果如下）

```
Integration[29024:c07] PASS (0.01s): Tap screen at point "{50, 520}"
2012-11-06 14:49:58.493 Integration[29024:c07] FAIL (4.48s): Type the text "[redacted]" into the view with accessibility label "Email"
2012-11-06 14:49:58.494 Integration[29024:c07] FAILING ERROR: Error Domain=KIFTest Code=0 "Failed to actually enter text "[redacted]" in field; instead, it was "SIGN UP
Sign in

Email

Password

   Stay signed in
Can't access your account?
Coming soon: A new sign-in page! Try it now Learn more
© 2012 Google Privacy Policy Help"" UserInfo=0x14eda060 {NSLocalizedDescription=Failed to actually enter text "[redacted]" in field; instead, it was "SIGN UP
Sign in

Email

Password

   Stay signed in
Can't access your account?
Coming soon: A new sign-in page! Try it now Learn more
© 2012 Google Privacy Policy Help"}
2012-11-06 14:49:58.494 Integration[29024:c07] ---------------------------------------------------
2012-11-06 14:49:58.494 Integration[29024:c07] END OF SCENARIO (duration 11.15s)
2012-11-06 14:49:58.495 Integration[29024:c07] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-08T01:41:04.350

一年后，仍然没有人发布解决方案，所以我将分享我有一个类似的问题，我只是通过使用第一响应者而不是输入文本字段来解决这个问题。

这是我项目中的代码片段。让它和你的一起工作。希望这对某人有帮助！

```
//Make sure the field is in view
[scenario addStep:[KIFTestStep stepToWaitForTappableViewWithAccessibilityLabel:@"Username"]];

//This will pop the keyboard to screen
[scenario addStep:[KIFTestStep stepToTapViewWithAccessibilityLabe:@"Username"]];

[scenario addStep:[KIFTestStep stepToEnterTextIntoCurrentFirstResponder:@"testUser"]]; 
```

# ravendb - POST 上的 RavenDB HTTP 错误 409（冲突）

> ID：13258385
> 
> 赞同：1
> 
> 时间：2012-11-06T19:55:05.573
> 
> 标签：ravendb

我使用全新的干净 RavenDB 安装发起的每个 POST 请求都会不断收到 HTTP 409 错误。我在我的 Windows 7 64 位开发工作站上提取了 build 960（超过了推荐的最低系统要求）。我的配置包含在下面。我通过运行 Start.cmd 来启动服务器。在服务器运行时，我从 RavenDB 网站的 HTTP API 文档中复制粘贴 CURL 命令并运行它，但我收到 HTTP 代码 409 错误。除了设置适当的匿名访问之外，我还没有找到任何关于适当处理此错误的说明或用于显式配置的特殊说明。我也看到了从其他工作站运行相同的服务器设置并使用其他客户端（Ruby rest-client gem）的同样问题。

配置

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="Raven/Port" value="*"/>
    <add key="Raven/DataDir" value="~\Data"/>
    <add key="Raven/AnonymousAccess" value="All"/>
    <add key="Raven/RunInMemory" value="true"/>
  </appSettings>
    <runtime>
        <loadFromRemoteSources enabled="true"/>
        <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
            <probing privatePath="Analyzers"/>
        </assemblyBinding>
    </runtime>
</configuration> 
```

命令行客户端：

```
C:\dev\RavenDB> curl -v -X POST http://localhost:8080/docs -d "{ FirstName: 'Bob', LastName: 'Smith', Address: '5 Elm St' }"
* timeout on name lookup is not supported
* About to connect() to localhost port 8080 (#0)
*   Trying XXX.XXX.XXX.XXX...
* connected
* Connected to localhost (XXX.XXX.XXX.XXX) port 8080 (#0)
> POST /docs HTTP/1.1
> User-Agent: curl/7.26.0
> Host: localhost:8080
> Accept: */*
> Content-Length: 60
> Content-Type: application/x-www-form-urlencoded
>
* upload completely sent off: 60 out of 60 bytes
< HTTP/1.1 409 Conflict
< Transfer-Encoding: chunked
< Server: Microsoft-HTTPAPI/2.0
< Raven-Server-Build: 960
< Date: Tue, 06 Nov 2012 19:36:35 GMT
<
{
  "Url": "/docs",
  "ActualETag": "00000000-0000-0000-0000-000000000000",
  "ExpectedETag": "213966fe-5c42-41c4-80c1-6a73c44e77d3",
  "Error": "PUT attempted on document 'ac171c38-5428-40d5-beb6-56ea006dbcf6' using a non current etag (document deleted)"
}* Connection #0 to host localhost left intact
* Closing connection #0 
```

这是我尝试通过 Web 界面手动创建新文档时出现的错误。

```
Message: PUT attempted on document 'bbc8a11d-94fb-4e80-958d-4b5c74d8e8be' using a non current etag (document deleted)
Uri: /edit?mode=new&database=Default
Server Uri: unknown

-- Error Information --
Raven.Abstractions.Exceptions.ConcurrencyException: PUT attempted on document 'bbc8a11d-94fb-4e80-958d-4b5c74d8e8be' using a non current etag (document deleted)
   at Raven.Client.Silverlight.Connection.Async.AsyncServerClient.<>c__DisplayClass39.<PutAsync>b__38(Task`1 task1)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.Execute()

Inner StackTrace: 
   at Raven.Studio.Infrastructure.InvocationExtensions.Catch(Task parent, Action`1 action)
   at Raven.Studio.Models.EditableDocumentModel.SaveDocumentCommand.SaveDocument()
   at Raven.Studio.Models.EditableDocumentModel.SaveDocumentCommand.Execute(Object parameter)
   at System.Windows.Controls.Primitives.ButtonBase.ExecuteCommand()
   at System.Windows.Controls.Primitives.ButtonBase.OnClick()
   at System.Windows.Controls.Button.OnClick()
   at System.Windows.Controls.Primitives.ButtonBase.OnMouseLeftButtonUp(MouseButtonEventArgs e)
   at System.Windows.Controls.Control.OnMouseLeftButtonUp(Control ctrl, EventArgs e)
   at MS.Internal.JoltHelper.FireEvent(IntPtr unmanagedObj, IntPtr unmanagedObjArgs, Int32 argsTypeIndex, Int32 actualArgsTypeIndex, String eventName, UInt32 flags) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:22:32.310

这是一个错误是 960，它不支持 POST 到 /docs 您需要对 /docs/[Guid.NewGuid()] 执行 PUT

# django - 使用 django 和 nginx 注销标准

> ID：13258391
> 
> 赞同：0
> 
> 时间：2012-11-06T19:55:31.337
> 
> 标签：django, nginx

我正在尝试调试我用 django 制作的应用程序，并且使用 django 的 manage.py 可以正常工作，但是当我使用 nginx 时，某些功能不起作用。我检查了错误日志，它们是空的，可能是因为我正在捕获所有异常并将它们发送到标准输出。有没有一种简单的方法可以使用 nginx 查看应用程序的输出？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T23:50:43.783

WSGI 服务器经常禁用标准输出，我认为因为它会导致某种兼容性问题。Django 有内置的日志记录；我建议使用它而不是打印语句。它应该更容易配置，并且还允许您在日志记录中具有更多特异性，即：

log.debug('只在调试时看到')

或者

log.warn('此消息可能表明有问题')

相关 django 文档： [https ://docs.djangoproject.com/en/dev/topics/logging/](https://docs.djangoproject.com/en/dev/topics/logging/)

# php - 在 CakePHP 中按类别列出帖子

> ID：13258397
> 
> 赞同：0
> 
> 时间：2012-11-06T19:56:04.787
> 
> 标签：php, cakephp, cakephp-model

我是 CakePHP 的新手。请帮助我编写一个函数来检索特定类别下的帖子，以便为我使用 CakePHP 构建的博客应用程序。

我的表结构：

帖子：id、post、body、created、category_id 类别：id、组

我还定义了：内部帖子模型 -`var $belongsTo = 'Category';` 内部类别模型 -`var $hasMany = 'Post';`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:00:48.137

[`find()`](http://book.cakephp.org/2.0/en/models/retrieving-your-data.html#find) is the generic *query* method for Models in CakePHP.

An example would be:

```
$results = $this->Post->find('recursive' => -1, 'conditions' => array('Post.category_id' => 1));
debug($results); 
```

There are many ways to achieve what you want. I encourage you to [read the docs](http://book.cakephp.org/2.0/en/models/associations-linking-models-together.html) or working through the [CakePHP Blog Tutorial](http://book.cakephp.org/2.0/en/getting-started.html#blog-tutorial).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T09:42:39.510

```
$this->Post->find('all', array('conditions' => array('Post.category_id' => $category_id))); 
```

其中 $category_id 是您要从数据库中检索结果的类别的 ID

希望这可以帮助

# xpages - 如何使用工具栏复制“取消”按钮

> ID：13258399
> 
> 赞同：0
> 
> 时间：2012-11-06T19:56:07.510
> 
> 标签：xpages

我正在使用工具栏控件，它有几个操作允许用户切换文档模式、保存、返回视图等。

我想添加一个取消按钮以允许用户取消他们的编辑并将它们切换回阅读模式。

由于所有这些操作共享相同的事件（我在计算的操作组中使用简单的操作），我无法勾选“不验证或更新数据”。如果我这样做`context.redirectToPage("newpage.xsp")`会导致验证发生。

我希望能够“取消”验证，然后执行一些操作，例如切换到阅读模式或另一个 XPage。有什么建议么？

我想我需要一种`context.DontSave()`方法...有没有一种方法可以在提交时禁用验证/更新？

谢谢，

霍华德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T07:27:42.333

您可以创建一个独立的取消按钮来放弃更改并重新加载当前页面。在下面的示例中，我没有考虑到当前页面可以包含诸如 editDocument、documentId 等参数。

```
<xp:button id="cancel" value="Cancel" rendered="#{javascript:document.isEditable()}">
    <xp:eventHandler event="onclick" submit="true" refreshMode="complete" immediate="true" save="false" id="eventHandler1">
        <xp:this.action>
            <xp:actionGroup>
                <xp:openPage name="#{javascript:view.getPageName()}"></xp:openPage>
            </xp:actionGroup>
        </xp:this.action></xp:eventHandler>
</xp:button> 
```

# objective-c - 如何制作只能在库中看到的目标 c 方法，而不是在导出的标头中

> ID：13258400
> 
> 赞同：1
> 
> 时间：2012-11-06T19:56:09.440
> 
> 标签：objective-c, ios, objective-c-category

我正在构建一个用于控制 iOS 外部附件的静态库。作为其中的一部分，我想展示一组最小的公共头文件，以与编译的库一起分发。

我有一个需要公开的类，但我想在它上面创建一些框架私有方法。我为其中一个公共类创建了一个类别来添加私有方法，包括一个初始化程序。这适用于项目测试，但会生成 -[MyClass initMethodDefinedInCategory:]: unrecognized selector sent to instance 错误。

**类别标题：**

```
#import "MyClass.h"

@interface MyClass (LibraryPrivateMethods)
- (id)initMethod:(NSData *)data;
- (int)someOtherMethod:(NSData *)data;
@end 
```

**使用类**

```
#import "MyOtherClass.h"
#import "MyClass.h"
#import "MyClass+LibraryPrivateMethods.h"

@implementation MyOtherClass

#pragma mark - Instance Methods
- (id)initWithData:(NSData *)data
{
    self = [super init];
    if(self)
    {

        MyClass *mc = [[MyClass alloc] initMethod:data]; // errors here
        _property = mc;
    }
    return self;
} 
```

我已尝试按照[此 Apple 技术说明](http://developer.apple.com/library/ios/#qa/qa1490/_index.html)`-ObjC`中的建议添加链接器标志。我还尝试按照[此 SO answer](https://stackoverflow.com/a/3998700/417906)中的建议添加标志。`-all_load`

**编辑**：意识到我只是在 XCode 构建中添加，忘记检查构建脚本，如下所示。

```
set -ex

INSTALL_PATH=$WORKSPACE/artifacts
[ -z $INSTALL_PATH ] || INSTALL_PATH=$PWD/artifacts

rm -rf $INSTALL_PATH
mkdir -p $INSTALL_PATH

PROJ=$SRCROOT/MyLib.xcodeproj

xcodebuild -project $PROJ -sdk iphoneos INSTALL_ROOT=$INSTALL_PATH/device install
xcodebuild -project $PROJ -sdk iphonesimulator INSTALL_ROOT=$INSTALL_PATH/simulator install

lipo -create -output $INSTALL_PATH/libMyLib.a $INSTALL_PATH/device/libMyLib.a $INSTALL_PATH/simulator/libMyLib.a
mv $INSTALL_PATH/device/Headers $INSTALL_PATH
rm -rf $INSTALL_PATH/device $INSTALL_PATH/simulator

# create zip for distribution.
(cd $INSTALL_PATH; zip -r ../MyLib-release.zip libMyLib.a Headers ../documentation/LibraryDocs/html ../documentation/LibraryDocs/docset) 
```

**我应该在哪里将 -ObjC 标志添加到构建脚本中？**

有什么理由不能在类别中使用初始化方法吗？[正如这个 Apple 文档](http://developer.apple.com/library/mac/#documentation/cocoa/conceptual/objectivec/Chapters/ocCategories.html#//apple_ref/doc/uid/TP30001163-CH20-SW1)所说，这似乎是可能的

> 类别方法可以做任何在类中定义的方法可以做的事情。在运行时，没有区别。类别添加到类的方法被该类的所有子类继承，就像其他方法一样。

然后我尝试使用类扩展，但我不确定如何使该方法仅对框架类可见。

```
@interface MyClass ()
- (id)initMethod;
@end 
```

如果我随后`[[MyClass alloc] initMethod]`从库中的另一个类调用，我会收到“MyClass 的无可见 @interface 声明选择器 initMethod”错误。

如何使对象上的方法只能由框架中的其他类访问并且不在 MyClass.h 中导出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:01:43.583

将类别声明放在单独的 .h 文件中。将此私有 .h 文件导入框架中需要访问类别方法的任何 .m 文件中。不要将此 .h 文件打包到分发给客户使用的公共 .h 文件集中。

BTW = 不要使用类扩展，使用命名类别。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-11T21:53:34.047

无法在为该问题分配的时间内使其工作。我最终删除了该类别并将初始化程序代码移动到 MyOtherClass initWithData 方法中。这编译得很好并且可以工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T21:01:49.820

[请参阅Apple 技术说明](http://developer.apple.com/library/ios/#qa/qa1490/_index.html)底部的说明：

> 重要提示：对于 64 位和 iPhone OS 应用程序，存在阻止 -ObjC 从仅包含类别且不包含类的静态库加载对象文件的链接器错误。解决方法是使用 -all_load 或 -force_load 标志。

由于`MyClass+LibraryPrivateMethods.m`仅包含类别代码，听起来您看到了注释中描述的错误。

将您的私有实现移动到主 MyClass.m 或尝试`-all_load`or`-force_load`标志。

# ios - mobileconfig 文件添加对位置服务的访问

> ID：13258403
> 
> 赞同：0
> 
> 时间：2012-11-06T19:56:12.730
> 
> 标签：ios, ipad, core-location, profile

我们有一个需要使用核心位置的企业应用程序。我们将分发给我们员工的 Ipad 有一些内置应用程序成功地“锁定”了某些应用程序，例如 Safari 和 Camera 等。我们确实允许其他内置应用程序，例如邮件、联系人和地图，这是我目前的问题。地图将加载，但仅显示空白网格。没有地图和位置管理器失败，如下面的错误所示。

其他人创建了配置文件并对 iPad 进行了更改。这个人是无法联系到的，我面临着修复它的挑战。我猜它与 mobileconfig 文件有关，因为当我从测试 iPad 中删除它时，一切都很好。我需要更新 mobileconfig 文件，但不知道如何允许位置更新。我们确实有一个我们连接到的特定服务器，但就像我说的那样，它可以在没有安装 mobileConfig 配置文件的测试 iPad 上运行。请帮忙！谢谢

我得到的信息是：

> 11 月 6 日 11:45:23 iPad 定位[40]：PBRequester 失败，错误域=NSURLErrorDomain 代码=-1004“无法连接到服务器。” UserInfo=0x1d687fc0 {NSErrorFailingURLStringKey=https://gs-loc.apple.com/clls/wloc, NSErrorFailingURLKey=https://gs-loc.apple.com/clls/wloc, NSLocalizedDescription=无法连接到服务器。, NSUnderlyingError=0x1d67c020“无法连接到服务器。”} 11 月 6 日 11:45:23 iPad 定位 [40]：网络：服务器无响应，可达性，2，queryRetries，11 月 6 日 11:45:37 iPad 健美操[ 117]：位置管理器失败，位置：错误域=kCLErrorDomain 代码=0“操作无法完成。（kCLErrorDomain 错误 0。）”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-08T18:57:35.923

原来新的 .mobileconfig 配置文件不是原因，或者是但不是直接原因。我需要登录到我们的服务器并与位置管理器建立连接，然后登录到我们的私人服务器并再次执行此操作，其中包括一个指南针错误，但通过挥动 ipad 来解决这个问题 - 哈哈。花了一整天的时间试图解决这个问题，所以我希望它对某人有所帮助。感谢所有调查我的问题的人。

# ruby-on-rails-3 - 在新的 Rails 3 应用程序中找不到 application.html.haml

> ID：13258406
> 
> 赞同：0
> 
> 时间：2012-11-06T19:56:24.887
> 
> 标签：ruby-on-rails-3, haml

我想创建 Rails 3 应用程序只是为了更新自己，但我有一个奇怪的问题。

我已经`welcome#index`使用创建了动作

```
rails generate controller welcome#index 
```

（我有`haml-rails`宝石）并且我观察到`index.html.haml`已经创建了一个新视图。这个动作是我的root_path，所以`localhost:3000`我得到了这个视图的内容。

我已经`application.html.erb`手动更改了它，`application.html.haml`并在ApplicationController中添加`layout 'application'`了它，但是我得到了

```
Template is missing

Missing template layouts/application with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :haml]} 
```

现在，任何想法为什么？

也许一些代码片段：

```
class ApplicationController < ActionController::Base
  layout "application"
  protect_from_forgery
end 
```

该文件已到位：

```
mkk:~/projects/rails/gifts/app/views/layouts$ ls
application.html.html 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:08:24.967

您`ls`显示的布局文件被调用`application.html.html`，将其更改为`application.html.haml`.

# ruby-on-rails - Selenium Web 驱动程序错误

> ID：13258407
> 
> 赞同：2
> 
> 时间：2012-11-06T19:56:25.367
> 
> 标签：ruby-on-rails, selenium, capybara, selenium-webdriver

尝试单击 Capybara 元素时出现奇怪的错误

*   我正在使用 find(:xpath,"//a[contains(text(),'Connect')]").click
*   (find(:xpath,"//a[contains(text(),'Connect')]").present?return true)

我得到的错误是：

Selenium::WebDriver::Error::MoveTargetOutOfBoundsError 异常：元素无法滚动到视图中：javascript:void(0);

我做了一些研究，我发现的唯一解决方案是将硒版本设置为 2.16 可以解决这个问题（我使用的是 2.25）。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T05:29:46.943

当正在测试的页面不适合当前窗口大小时，可能会发生这种情况。如果您知道通常会发生这些错误的页面，则可以在对此类隐藏元素进行操作（如单击、清除等）之前显式向下滚动。这里是显式向下滚动页面的代码。

在java中，

```
JavascriptExecutor js = (JavascriptExecutor) driver;
js.executeScript("javascript:window.scrollBy(250,350)"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:02:04.573

从我使用 selenium webdriver 测试 .NET 应用程序的时候开始，当问题与听起来完全一样时，我会收到该错误：它正在页面上寻找一个由于某种原因无法滚动到的对象。在我的情况下，这是因为某些对话框会出现而没有滚动条，并且驱动程序无法“将对象滚动到视图中”

你能观察你的测试的执行情况，看看是否是这样吗？我有一些运气回滚到以前的 Firefox 版本，因为 15+（截至大约 2 个月前，当我遇到问题时）不受 Web 驱动程序支持并且定期出现此问题。回滚 selenium 版本也可能有所帮助。

第一步肯定是观察测试的执行，看看发生了什么。一个好的调试想法可能是尝试自己手动完成您的步骤，以确保手动进行测试。

还值得注意的是，要让 webdriver 能够执行 click 对象实际上必须是可见的。IsPresent 不需要，它只是搜索页面文件。也是我遇到的一个问题。IsPresent 仍会为页面上不可见且不可见的对象返回 true（即您当时看不到的页面底部的内容）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-19T09:18:05.460

这里有几个提示：

1.  理想情况下，Webdriver 应该是最新的更新，这是最常用的（除非你正在做 Ruby 自动化）

2.  使用 css 选择器、xpath（在渲染时）几乎总是在资源和代码上都比较重。

3.  尝试防御性编码，首先确定它是否存在。有很多方法可以做到这一点，具体取决于您使用的包。在红宝石中你会做`page.has_css?('css_string')`

# objective-c - 锁屏中断 NSURLConnection

> ID：13258408
> 
> 赞同：6
> 
> 时间：2012-11-06T19:56:29.530
> 
> 标签：objective-c, ios, nsurlconnection, nsurlrequest

我想知道当用户锁定和解锁 iPad 屏幕时幕后发生了什么。我有一个使用 NSURLConnection 下载文件的应用程序，下载失败并出现 SOAP 错误（“找不到具有指定主机名的服务器”），但不是在用户锁定屏幕时，而是在解锁屏幕时。无论何时弹出错误，下载都不会完成。任何想法为什么以及可以做些什么？

```
NSMutableURLRequest* request = [NSMutableURLRequest requestWithURL:url cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:300];

NSURLConnection* conn = [[NSURLConnection alloc] initWithRequest: request delegate: self]; 
```

据我所知，当我点击主页按钮时，我得到：

```
applicationWillResignActive
applicationDidEnterBackground 
```

三分钟后我回忆起该应用程序后，我得到：

```
applicationWillEnterForeground 
```

并且下载要么已经完成，要么甚至在后台进行。

当我将它留在后台更长时间（5 分钟）时，它会因错误而超时。

当我锁定屏幕时，我得到相同的应用程序状态顺序，但还有一条关于下载断开的错误消息。

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-07T04:13:48.093

我的猜测是您的连接正在断开，因为它在应用程序进入后台时正在运行，并且您没有正确的实现来保持它运行。也许你应该看看 Apple 的[Background Execution and Multitasking](http://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)文档。它将向您展示如何让您的应用程序在后台运行长达约 10 分钟而不会被终止。查找以下示例代码并了解它如何解决您的问题：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
    bgTask = [application beginBackgroundTaskWithExpirationHandler:^{
        // Clean up any unfinished task business by marking where you.
        // stopped or ending the task outright.
        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    }];

    // Start the long-running task and return immediately.
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        // Do the work associated with the task, preferably in chunks.

        [application endBackgroundTask:bgTask];
        bgTask = UIBackgroundTaskInvalid;
    });
} 
```

# sql - 如何编写更改表语句以添加约束

> ID：13258412
> 
> 赞同：0
> 
> 时间：2012-11-06T19:56:49.953
> 
> 标签：sql, oracle, constraints, check-constraints

我是 SQL 新手。我创建了几个表：

```
CREATE TABLE MAINTINANCE
(Maint_mname char(10),
Maint_date date,
Maint_duedate date NOT NULL,
Maint_mdesc char (15));    

CREATE TABLE DESIGNERR
(Dez_emp_number varchar(11),
Dez_field char(12),
Dez_qualification char(10) NOT NULL,
Dez_experience smallint); 
```

对于第一个表，我添加了以下约束：

```
ALTER TABLE MAINTINANCE ADD CONSTRAINT CHK_maintdate CHECK(Maint_date<MAint_duedate); 
```

但我得到了错误`invalid ALTER TABLE option`。你能告诉我为什么会出现这种情况吗？这同样适用于朋友，但不适用于我。

对于第二个表，我必须为业务规则编写 SQL 命令：

> 如果设计师的资格是 BS，则需要至少 4 年的经验。但是，如果设计师的资格是 MS，那么至少 2 年的经验就足够了。

我们如何在 SQL 中定义这个业务规则？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:13:37.670

您发布的代码有效

```
SQL> CREATE TABLE MAINTINANCE
  2  (Maint_mname char(10),
  3  Maint_date date,
  4  Maint_duedate date NOT NULL,
  5  Maint_mdesc char (15));

Table created.

SQL> ALTER TABLE MAINTINANCE ADD CONSTRAINT CHK_maintdate CHECK(Maint_date<MAint_duedate);

Table altered. 
```

如果您遇到错误，

*   从准确显示您正在执行的语句的 SQL*Plus 会话中剪切和粘贴
*   发布完整的错误堆栈

尽管它不会影响您的代码，但“MAINTINANCE”一词拼写错误。它应该是“维护”。如果您的表名拼写正确，未来的人类开发人员将不胜感激。

# xna - 四元数，旋转模型并与方向对齐

> ID：13258413
> 
> 赞同：1
> 
> 时间：2012-11-06T19:56:52.670
> 
> 标签：xna, rotation, alignment, point, quaternions

假设您有描述 3D 模型旋转的四元数。

我想要做的是，给定一个对象（带有rotationQuaternion，侧向量......），我想将它与目标点对齐。

对于宇宙飞船，我希望驾驶舱指向一个目标。

这是我的一些代码......它没有做我想要的，我不知道为什么......

```
 if (_target._ray.Position != _obj._ray.Position)
        {
            Vector3 vec = Vector3.Normalize(_target._ray.Position - _obj._ray.Position);
            float angle = (float)Math.Acos(Vector3.Dot(vec, _obj._ray.Direction));
            Vector3 cross = Vector3.Cross(vec, _obj._ray.Direction);

            if (cross == Vector3.Zero)
                cross = _obj._side;

            _obj._rotationQuaternion *= Quaternion.CreateFromAxisAngle(cross,angle);
        }
        // Updates direction, up, side vectors and model Matrix
        _obj.UpdateMatrix(); 
```

一段时间后，旋转四元数在 X、Y、Z 和 W 处几乎为零

有什么帮助吗？谢谢 ;-）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T11:55:04.493

这是我用来获取*锁定目标*旋转的四元数的快捷方式：

```
Matrix rot = Matrix.CreateLookAt(_arrow.Position, _cube.Position, Vector3.Down);
_arrow.Rotation = Quaternion.CreateFromRotationMatrix(rot); 
```

对于这个例子，我正在渲染一个箭头和一个立方体，立方体在一个圆圈中移动，并且在上面的代码中，箭头总是指向立方体。（虽然我想当立方体正好在上面或下面时会有一些边缘情况）。

![在此处输入图像描述](../Images/9ced1ad066c51aefefc602b6d00fc516.png)

一旦你得到这个四元数（从宇宙飞船到目标），你可以`Quaternion.Lerp()`用来在当前的飞船旋转和对齐的旋转之间进行插值。这将使您的旋转平滑过渡（不仅仅是捕捉到目标）。

* * *

顺便说一句，可能是您的轮换减少到零，因为您`*=`在分配给它时正在使用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T16:36:55.133

你的代码有点时髦。

```
if (_target._ray.Position != _obj._ray.Position)
{ 
```

这可能正确也可能不正确。显然，您已经覆盖了 equals 比较器。正确的做法是确保两条（单位长度）射线之间的点积接近 1。如果射线具有相同的原点，那么可能具有相同的“位置”意味着它们是相同的。

```
 Vector3 vec = Vector3.Normalize(_target._ray.Position - _obj._ray.Position); 
```

这似乎特别错误。除非减号运算符以一种奇怪的方式被覆盖，否则以这种方式减去是没有意义的。

这是我推荐的伪代码：

```
normalize3(targetRay);
normalize3(objectRay);
angleDif = acos(dotProduct(targetRay,objectRay));
if (angleDif!=0) {
  orthoRay = crossProduct(objectRay,targetRay);
  normalize3(orthoRay);
  deltaQ = quaternionFromAxisAngle(orthoRay,angleDif);
  rotationQuaternion = deltaQ*rotationQuaternion;
  normalize4(rotationQuaternion);
} 
```

这里需要注意两点：

1.  四元数不可交换。我假设您的四元数是旋转列向量；所以我把deltaQ放在左边。目前尚不清楚您的 *= 运算符在做什么。
2.  在乘法之后定期标准化你的四元数很重要。否则小错误会累积，它们会偏离单位长度，导致各种悲伤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T20:36:50.337

我的天啊！有效！！！

```
 Vector3 targetRay = Vector3.Normalize(_target._ray.Position - _obj._ray.Position);
        Vector3 objectRay = Vector3.Normalize(_obj._ray.Direction);
        float angle = (float)Math.Acos(Vector3.Dot(targetRay, objectRay));

        if (angle!=0)
        {
            Vector3 ortho = Vector3.Normalize(Vector3.Cross(objectRay, targetRay));
            _obj._rotationQuaternion = Quaternion.CreateFromAxisAngle(ortho, angle) * _obj._rotationQuaternion;
            _obj._rotationQuaternion.Normalize();
        }
        _obj.UpdateMatrix(); 
```

非常感谢JCooper！！！

和 niko 我喜欢 Lerp 的想法 ;-)

# python - 命名自动生成的对象，python

> ID：13258415
> 
> 赞同：1
> 
> 时间：2012-11-06T19:56:58.410
> 
> 标签：python, object, naming

可以跳过斜体文本。

*首先：如果我要求的是基本知识，也很容易找到答案，或者任何类似的东西可能会让我的帖子对任何人感到厌烦，请原谅我。我是编程新手，刚开始有借口不为考试阅读。我正在尝试制作一个程序，可以模拟从人类部落到……嗯，更先进的人类部落的进化。我的目标是在未来的某个时间制作一款非常简单的类似文明的游戏，专注于人而不是建筑物和单位。从头开始，目前对编程几乎一无所知，我知道这是我可能永远无法完成的任务。希望我能在路上学到一些东西。因为我的知识非常有限，我的问题会很笨拙而且表述很糟糕。对不起，感谢阅读。*

当前的问题：我创建了一个类来制作应该代表人的对象。

该类目前看起来像这样：

```
class Settler:
    settlerCount = 0
    iqlistfemale = []
    iqlistmale = []
    maleCount = 0
    femaleCount = 0
    surnameMale = []
    surnameFemale = []

    def __init__(self, sex):
        if sex=="m" or sex=="f" or sex=="M" or sex=="F":
            self.name = choice(surnames)
            Settler.settlerCount += 1
            self.iq=round(random.normalvariate(100,10))
            if sex=="m" or sex=="M":
                self.sex = "Male"
                Settler.iqlistmale=Settler.iqlistmale+[self.iq]
                Settler.surnameMale += [self.name]
                Settler.maleCount += 1
            else:
                self.sex = "Female"
                Settler.iqlistfemale=Settler.iqlistfemale+[self.iq]
                Settler.surnameFemale += [self.name]
                Settler.femaleCount += 1 
```

稍后它将包含更多属性，这只是一个开始。

我还制作了一个循环，要求您创建一定数量的男性，然后创建一定数量的女性。

循环的东西看起来像这样：

```
x=int(input("Number of male Settlers to generate? (1-20) "))
if x >0 and x <21:
    tellergenerator=0  
    while tellergenerator<x:
        Settler("M")
        tellergenerator=tellergenerator+1

else:
    print("Wrong input!")

x=int(input("Number of female Settlers to generate? (1-20) "))
if x >0 and x <21:
    tellergenerator=0  
    while tellergenerator<x:
        Settler("F")
        tellergenerator=tellergenerator+1

else:
    print("Wrong input!") 
```

另外，我做了一个 def 的东西，可以让你调用对象属性的信息：

```
def displaySettler(self):
        print("Name:", self.name, "Sex:", self.sex, "IQ:", self.iq) 
```

**现在，对于问题：**

1.  主要问题：我的循环东西工作正常，这意味着它创建了我想要创建的正确性别的对象数量。据我所知，我的问题是它创建了没有名称的对象。这意味着我不能调用 displaySettler()，因为它需要我调用 nameofobject.displaySettler()。我怎样才能使用某种循环函数来创建一堆对象，使这些对象具有名称。

我找到了一种将数字组合到字符串的方法，这可能允许我将一个创建对象名称的系统放入循环中，例如settler1、settler2、settler3，但我这样做的方式是执行类似的操作

```
x=settler
y=(some counter)
z=x+str(y) 
```

那是我可以使用的东西吗？我知道用名称创建对象的唯一方法是编写类似

```
settler1=Settler("F") 
```

或者

```
w=Settler("F") 
```

是否可以使用变量 z 的内容来命名？

1.  我还想问以下问题：正如您在我的课堂上看到的那样，我正在做一堆列表。我想我必须为每种性别的每个属性制作一个列表，其中包含所有对象的特定属性。我希望这些列表能够计算每个属性的总体平均值，诸如此类。

是否可以直接从对象中获取这些值，并直接遍历所有对象并从中计算平均值？

或者换一种说法：如果我有 200 个对象，有没有办法将所有对象的 IQ 加在一起？

感谢阅读（如果有人走到这一步）。所有建设性的反馈将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:05:23.707

您需要让人员生成器将生成的人员记录在数据结构中，例如列表或字典，然后从创建的结构中访问这些人员。代替你的`while`循环，尝试：

```
people = []
for i in range(x):
    people.append(Settler('M')) # or 'F', for the other loop 
```

然后你可以使用：

```
people[n].displaySettler() # where n is any integer from 0 to x-1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:32:23.370

两件事情：

1）最好有两个不同的类，男性和女性，它们都扩展了基类`Settler`。因此你避免了大部分的`if sex = M then this else that`东西

例子：

```
class Settler:
    def __init__(self, name):
        self.name = name
        self.iq = round(random.normalvariate(100,10))

class Male(Settler):
    def __str__(self):
        return '{0.name}, male, iq {0.iq}'.format(self)

class Female(Settler):
    def __str__(self):
        return '{0.name}, female, iq {0.iq}'.format(self) 
```

请注意这两个类如何`__str__`以字符串形式“表示”自己。

2) 将所有关于对象**列表**的内容保留在对象定义之外。好的对象不知道它们外面发生了什么。例如，这是生成人员列表的方法：

```
def generate(klass, how_many):
    surnames = ['Doe', 'Smith', 'Mueller', 'Polly-Parrot']
    return [klass(random.choice(surnames)) for _ in range(how_many)]

people = generate(Male, 10) + generate(Female, 20) 
```

`[stuff for _ in range(N)]`基本上意味着“做N次”。

最后，让我们把它们放在一起并打印一个人员列表：

```
for person in people:
    print(person) 
```

输出将类似于：

```
母鹿，男性，智商 114.0
母鹿，男性，智商 110.0
波利鹦鹉，雄性，智商 89.0
史密斯，男，智商 96.0
波利鹦鹉，雄性，智商 83.0
穆勒，女，智商 118.0
穆勒，女性，智商 90.0
史密斯，女性，智商 90.0
史密斯，女，智商 103.0
穆勒，女，智商 89.0
史密斯，女，智商 87.0

```

如果您有更多问题，请告诉我们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:21:55.940

在回答您的第二个问题时，假设您有一个称为 Settler 的列表`people`（这是一个列表理解）...

```
iqs = [person.iq for person in people]
total_iq = sum(iqs) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T20:21:56.563

编辑：Sr2222 打败了我。我认为我们使用的是相同的想法。

不确定这是否是最好的方法，但是：

您可以使用从循环生成的名称将对象存储在字典中。

举个例子：

```
group_of_vars = {}
for name in range(5):
    entry = 'object_'+str(name)
    group_of_vars[name] = entry

print group_of_vars

print group_of_vars
{0: 'object_0', 1: 'object_1', 2: 'object_2', 3: 'object_3', 4: 'object_4 
```

所以

```
>>> print group_of_vars[1]
object_1 
```

因此，通过使用这些知识，您可以制作一个变量名称列表（自动生成或手动）并将其保存在一个列表中。然后在 for 循环中引用列表的名称作为您的范围，并引用该列表中的每个变量。

至于将对象的所有 IQ 的总和加在一起，您可以这样做（按照我之前的示例，假设 dict 中的条目是具有 iq 属性值的对象）

```
sum = 0
for name in group_of_vars:
    sum += group_of_vars[name].iq

>>> print sum 
```

这应该返回字典 group_of_vars 中所有对象的 iq 属性的总和。

# python - Python 粘贴并在非 Python 源文件更改时自动重启

> ID：13258416
> 
> 赞同：2
> 
> 时间：2012-11-06T19:57:02.960
> 
> 标签：python, automation, paster

[`paster serve`](http://pythonpaste.org/script/#running-the-server)当任何 Python 源文件或更改时，可以`--reload`选择自动重新启动服务 wsgi 应用程序。当其他文件（不是 Python 源文件）发生更改时，`CONFIG_FILE`如何使*粘贴程序也启动自动重启？*

更新

[`watch_file()`](https://bitbucket.org/ianb/paste/src/160f4747e53ccbc8ed5e474e7a2c589fc21199e3/paste/reloader.py#cl-31)*mksh*建议的功能看起来像是问题的解决方案。然而*mksh*建议将其调用添加到应用程序的入口点，这似乎比它应该的更具侵入性。我可以（非侵入性地）扩展粘贴的`serve`命令添加新选项，这将导致调用`watch_file()`从应用程序部分读取的文件名`CONFIG_FILE`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:44:20.680

见[贴图源链接](https://bitbucket.org/ianb/paste/src/160f4747e53ccbc8ed5e474e7a2c589fc21199e3/paste/reloader.py#cl-31)

因此，您可以像在应用程序的入口点底部放置这样的行一样简单地查看非源文件：

```
from paste.reloader import watch_file

#
# logic that puts list of your non-source file names suitable 
# for open() into iterable non_source_file_list
#

for non_source_file in non_source_file_list:
    watch_file(non_source_file_name) 
```

一般来说，在使用像 Paste 这样现代且真正用 Python 风格编写的框架时，尝试更多地依赖源代码而不是文档，它们的代码大多是有据可查的，而且是自记录的。

# c# - 从 C# 中 FormsAuthentication.RedirectFromLoginPage 制作的 cookie 中获取信息

> ID：13258420
> 
> 赞同：1
> 
> 时间：2012-11-06T19:57:42.850
> 
> 标签：c#, asp.net

嗨，我在 C# 中使用了这个：

```
FormsAuthentication.RedirectFromLoginPage(userID, chkPersistCookie.Checked) 
```

为我的网络应用程序创建一个 cookie。

我需要知道如何从 cookie 中取回用户 ID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:07:22.097

要获取用户 ID，您只需要访问主体。更多[阅读](http://msdn.microsoft.com/en-us/library/ff649204.aspx)

```
 HttpContext.Current.User.Identity.Name; 
```

如果你想从 cookie 中获取它，cookie 可以读作（我不推荐这个）：

```
 HttpCookie authCookie = Request.Cookies[FormsAuthentication.FormsCookieName]; 
```

# asp.net-mvc-3 - 列名 Entity Framework base Repository

> ID：13258423
> 
> 赞同：0
> 
> 时间：2012-11-06T19:57:44.143
> 
> 标签：asp.net-mvc-3, entity-framework, select, repository, columnname

**IRepositoryBase**

```
IQueryable<T> GetAll(Expression<Func<T, bool>> predicate = null, params Expression<Func<T, object>>[] includes); 
```

**存储库库**

```
 public IQueryable<T> GetAll([OptionalAttribute][DefaultParameterValueAttribute(null)]Expression<Func<T, bool>> predicate, params Expression<Func<T, object>>[] includes)     
 {
   var set = CreateSet().IncludeMultiple(includes);
   return (predicate == null) ? set : set.Where(predicate);            
 } 
```

**IAccountService**

```
IEnumerable<int> GetAllReferenceIds(); 
```

**账户服务**

```
public IEnumerable<int> GetAllReferenceIds()       
{    
  var accountOwners = _accountOwnerRepository.GetAll();
  return accountOwners.Select(m => m.ReferenceId).ToList();
} 
```

**帐户控制器**

```
public ActionResult ReferenceIdPartial()      
{

ViewData["AccountOwners"] = accountOwnerService.GetAllReferenceIds();

return PartialView();

} 
```

**MVC 部分视图**- devexpress 组合框 mvc 扩展

```
settings.Properties.Columns.Add("ReferenceId", "Reference Id", Unit.Percentage(100)); 
```

错误 - 未找到列 ReferenceId

我正在通过 GetReferenceIds() 发送一个 int 集合

有没有办法从 Controller 调用列。AccountOwner(a=>a.ReferenceIds, select ReferenceIds) 之类的东西 - 我应该能够获取列名和数据。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T22:24:33.990

这是一个进入黑暗的镜头，我实际上只理解你的最后一句话“*我应该能够获取列名以及数据*” - 并且可以想象如果你将一个集合绑定到一个组合框（我不知道DevExpress 组合框扩展） 组合框控件需要一个具有*属性名称/属性值对的**类*对象的集合，而不仅仅是一个值的集合 ( )。因此，无需触摸您可以尝试：*`int``AccountService`*

 *```
public ActionResult ReferenceIdPartial()      
{
    ViewData["AccountOwners"] = accountOwnerService.GetAllReferenceIds()
        .Select(i => new { ReferenceId = i });

    return PartialView();
} 
```

`ViewData["AccountOwners"]`现在将持有（匿名）对象的集合。每个对象都有一个调用属性`ReferenceId`，其值`i`从您从服务返回的 Id 中获取。*

# wordpress - 上传文件 wordpress

> ID：13258432
> 
> 赞同：2
> 
> 时间：2012-11-06T19:58:33.370
> 
> 标签：wordpress, permissions, file-permissions

我正在尝试使用`Media > Add New`-- 选项在 wordpress 中上传文件，但是当我单击上传时，出现以下错误：

> 无法创建目录 wp-content/uploads/2012/11。它的父目录是否可以被服务器写入？

我安装了 Wordpress 4.3.1。

谢谢

编辑：我在一个共享服务器上：host=i686-redhat-linux-gnu 和 Apache。我将 wp-content/uploads 的权限更改为 755 和 777，但出现以下错误：

> 由于错误无法创建目录 wp-content/uploads/2012/11，“my_file.jpg”未能上传。它的父目录是否可以被服务器写入？

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T20:18:58.703

您需要为 /uploads/ 设置文件夹权限，也可能为 /wp-content/ 设置文件夹权限。

通常，两个文件夹都应该是 755。您可能需要*暂时*将 /uploads/ 提高到 777 并上传图像（这也会强制服务器将文件夹权限和用户更改为正确的设置），*但将其更改回 755 对离开。*

使用 FTP 客户端设置权限是最简单的。请参阅[Filezilla](http://filezilla-project.org/)和[FTP 客户端 « WordPress Codex](http://codex.wordpress.org/FTP_Clients)。

并查看[更改文件权限 « WordPress Codex](http://codex.wordpress.org/Changing_File_Permissions)了解正确的 Wordpress 权限设置：

> **来自 codex.wordpress：**通常，所有文件都应归您的 Web 服务器上的用户 (ftp) 帐户所有，并且应可由该帐户写入。在共享主机上，文件永远不应该归网络服务器进程本身所有（有时是 www、apache 或nobody 用户）。
> 
> 任何需要 WordPress 写入权限的文件都应该由 WordPress 使用的用户帐户（可能与服务器帐户不同）拥有或归组所有。例如，您可能有一个用户帐户，可以让您通过 FTP 文件来回传送到您的服务器，但您的服务器本身可能使用单独的用户在单独的用户组中运行，例如 dhapache 或nobody。如果 WordPress 作为 FTP 帐户运行，则该帐户需要具有写入权限，即是文件的所有者，或者属于具有写入权限的组。在后一种情况下，这意味着权限设置比默认设置更宽松（例如，文件夹设置为 775 而不是 755，而 664 而不是 644）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-12T06:11:24.777

ssh 进入并导航到该`wp-content`文件夹​​并输入以下两行：

```
sudo chown -R www-data uploads/
sudo chmod -R 755 uploads/ 
```

或者您可以使用静态和完整路径：

```
sudo chown -R www-data /var/www/wp-content/uploads/
sudo chmod -R 755 /var/www/wp-content/uploads/ 
```

不要将其更改为权限 777，因为这根本不安全

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-23T09:21:05.557

上周我遇到了同样的问题。在尝试了所有提出的解决方案都没有成功后，我突然想到我们在服务器上启用了 SElinux。在我的情况下，也许对于许多其他人来说，SElinux 负责错误消息：

```
Unable to create directory wp-content/uploads/2013/04\. Is its parent directory writable by the server? 
```

我的解决方案基于此处提出的解决方案：[http](http://doc-ok.org/?tag=selinux) ://doc-ok.org/?tag=selinux ，它可能更适合其他人的需求。

就我而言，我的 wordpress 目录位于服务器上的主文件夹中，我可以通过 ssh 访问该文件夹。否则，您将不得不询问您的管理员。

无论如何，这是我的解决方案。

```
chgrp -R apache wordpress #change wordpress with your base directory for wp..
#alternatively, chown the whole directory to apache
chmod -R 774 wordpress/wp-content #if chown by apache, the permissions can be more restrictive 
```

在我的情况下，不仅文件夹所有权/组所有权必须更改为 apache。wp-content 目录的 SElinux 标签也必须更改为 httpd_sys_rw_content_t 或 httpd_sys_content_t：

```
chcon -Rv --type=httpd_sys_content_t wordpress/wp-content 
```

这对我有用。

有关 SElinux 的更多信息可以在例如以下位置找到：

wiki.centos.org/HowTos/SELinux

和

fedoraproject.org/wiki/SELinux

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T20:08:52.887

该`/wp-content/uploads`目录需要可由您的网络服务器写入。假设您在 Linux 上使用 Apache，并且它以用户身份运行`apache`（更改为适当的用户），一个快速解决方法是从您的 Web 根目录运行以下命令。

```
chown -R apache.apache wp-content/uploads
chmod -R 755 wp-content/uploads 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-04-24T17:30:02.117

我遇到了同样的问题，我找到了更好的解决方案：

1.  转到 cpanel > phpmyadmin
2.  选择数据库
3.  打开 wp_options 表
4.  进行sql查询`SELECT * FROM wp_options WHERE option_name LIKE '%upload_path%'`
5.  改变路径

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-28T09:58:27.763

这应该解决它。

```
 sudo chown -R www-data:www-data wp-content/uploads 
```

如果没有必要，不要将权限更改为 755。如果它仍然不起作用，请尝试：

```
 chmod -R 755 wp-content/uploads 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-10-08T05:32:11.220

这对我有用，经过数周的头痛

```
sudo chown -R apache uploads
sudo chmod -R 755 uploads 
```

假设你在`wp-content`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-11-02T14:25:10.637

对于那些偶然发现 selinux 权限问题的人，这里是我修复它们的步骤。我们需要允许以下 selinux 布尔变量以允许使用 FTP 从 wordpress 管理控制台安装 wordpress 插件。它们是 httpd_can_network_connect 和 ftpd_full_access。它们可以通过以下方式激活

**setsebool ftpd_full_access on**

**setsebool httpd_can_network_connect on**

用于上传的 ftp 用户也应该允许写入 wp-content 文件夹。

# html - CSS horizontal nav bar displaying diagonally in IE 5.5 - 7

> ID：13258438
> 
> 赞同：0
> 
> 时间：2012-11-06T19:58:58.700
> 
> 标签：html, css, internet-explorer

The nav bar displays the correct way (horisontally) in IE 8 and above and every other browser. However only IE 5.5, 6 and 7 it displays diagonally. Can any body help?

```
.top-nav ul {
margin: 0;
list-style: none;
line-height: normal;
}

.top-nav li {
margin-left: 220px;
}

.top-nav a {
display: block;
float: left;
height: 38px;
margin-right: 1px;
padding: 4px 30px 0 30px;
text-decoration: none;
font-size: 34px;
font-weight: bold;
font-family: 'Exo', sans-serif;
color: #FFF;
}

.top-nav a:hover {
background:  #272727;
color: #18942f;
}

.top-nav .current_page_item a {
background:  #252525;
color: #FFF;
} 
```

HTML

```
<div class="top-nav"> 
  <ul> 
    <li><a href="index.html" class="links">Home</a></li> 
    <li><a href="aboutme.html" class="links">About Me</a></li> 
    <li><a href="skills.html" class="links">Skills</a></li> 
    <li class="current_page_item"> <a href="#">Contact</a></li> 
    </ul> 
</div> 
```

![here's a screenshot](../Images/efcbf32abc688b95a98eea6d32e4e5be.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-10T11:15:22.297

而不是浮动每个链接，为什么不在你的 li 上使用 display:inline，display:inline 在 IE 5.5 上工作

您还需要删除“显示：阻止”，因为这是导致链接向下移动的原因。

```
.top-nav ul {
margin: 0;
list-style: none;
line-height: normal;
}

.top-nav li {
 display: inline;
}

.top-nav a {
height: 38px;
margin-right: 1px;
padding: 4px 30px 0 30px;
text-decoration: none;
font-size: 34px;
font-weight: bold;
font-family: 'Exo', sans-serif;
color: #aaa;
}​ 
```

[http://jsfiddle.net/YJjya/](http://jsfiddle.net/YJjya/)

* * *

如果您需要将项目设置为块，请使用 inline-block。可以在此处找到使其适用于旧版本或 IE 的解决方法：[Work Around Inline Block](http://work.arounds.org/issue/18/using-inline-block-ie7-and-ie6/)

* * *

这里还有一段方便的代码，可以放在你的第一个 head 标签之后。它只会显示用户正在使用 IE 7 或更高版本，并会告诉他们把他们的 sh*t 放在一起并下载新的浏览器。真的不值得花时间让你的网站在每个 IE 版本上都能运行，因为你最终会为了取悦一些显然不精通互联网的人而费尽心思。正如马里奥所说，世界上只有 6% 的人仍在使用 IE6……但如果你仔细看看美国或英国等国家，这个数字低于 1%

## 头后

```
<!--[if lt IE 7]>
    <p class="chromeframe">You are using an outdated browser. <a href="http://browsehappy.com/">Upgrade your browser today</a> or <a href="http://www.google.com/chromeframe/?redirect=true">install Google Chrome Frame</a> to better experience this site.</p>
<![endif]--> 
```

## CSS

```
.chromeframe {
    margin: 0.2em 0;
    background: #ccc;
    color: #000;
    padding: 0.2em 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-06T18:22:50.263

我已经多次看到这个问题。您想要浮动 LI 而不是 LI 内的 A。

您需要做的就是从 [.top-nav a] 类中删除 [float:left] 并将其添加到 [.top-nav li] 类中。您的 CSS 将是：

```
.top-nav ul {
margin: 0;
list-style: none;
line-height: normal;
}

.top-nav li {
margin-left: 220px;
float: left;
}

.top-nav a {
display: block;
height: 38px;
margin-right: 1px;
padding: 4px 30px 0 30px;
text-decoration: none;
font-size: 34px;
font-weight: bold;
font-family: 'Exo', sans-serif;
color: #FFF;
}

.top-nav a:hover {
background:  #272727;
color: #18942f;
}

.top-nav .current_page_item a {
background:  #252525;
color: #FFF;
} 
```

# java - 将 Hashset 保存到 Java 中的文件

> ID：13258441
> 
> 赞同：0
> 
> 时间：2012-11-06T19:59:15.990
> 
> 标签：java, hashset

我知道这个问题已经被问了一百万次，我已经看到了一百万个解决方案，但没有一个对我有用。我有一个要写入文件的哈希集，但我希望哈希集中的每个元素都位于单独的行中。这是我的代码：

```
 Collection<String> similar4 = new HashSet<String>(file268List);
    Collection <String> different4 = new HashSet<String>();
    different4.addAll(file268List);
    different4.addAll(sqlFileList);

    similar4.retainAll(sqlFileList);
    different4.removeAll(similar4);

    Iterator hashSetIterator = different.iterator();
    while(hashSetIterator.hasNext()){
        System.out.println(hashSetIterator.next());
    }
    ObjectOutputStream writer = new ObjectOutputStream(new FileOutputStream("HashSet.txt"));
    while(hashSetIterator.hasNext()){
        Object o = hashSetIterator.next();
        writer.writeObject(o);
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T20:05:07.087

你弄错的地方是你试图序列化字符串而不是仅仅将它们打印到文件中，就像你将它们打印到屏幕上一样：

```
PrintStream out = new PrintStream(new FileOutputStream("HashSet.txt")));
Iterator hashSetIterator = different.iterator();
while(hashSetIterator.hasNext()){
    out.println(hashSetIterator.next());
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T20:03:27.307

ObjectOutputStream 将尝试将 String 序列化为对象（二进制格式）。我认为您想改用 PrintWriter 。例子：

```
PrintWriter writer= new PrintWriter( new OutputStreamWriter( new FileOutputStream( "HashSet.txt"), "UTF-8" )); 
while(hashSetIterator.hasNext()) {
    String o = hashSetIterator.next();
    writer.println(o);
} 
```

请注意，根据此答案和 Marko 的答案，您可以使用 PrintStream 或 PrintWriter 输出字符串（字符）。两者之间几乎没有区别，但如果您使用非标准字符或需要跨不同平台读取/写入文件，请务必指定字符编码。

# sql - SELECT DISTINCT HAVING Count unique conditions

> ID：13258442
> 
> 赞同：21
> 
> 时间：2012-11-06T19:59:16.630
> 
> 标签：sql

I've searched for an answer on this but can't find quite how to get this distinct recordset based on a condition. I have a table with the following sample data:

```
Type    Color   Location    Supplier
----    -----   --------    --------
Apple   Green   New York    ABC
Apple   Green   New York    XYZ
Apple   Green   Los Angeles ABC
Apple   Red     Chicago     ABC
Apple   Red     Chicago     XYZ
Apple   Red     Chicago     DEF
Banana  Yellow  Miami       ABC
Banana  Yellow  Miami       DEF
Banana  Yellow  Miami       XYZ
Banana  Yellow  Atlanta     ABC 
```

I'd like to create a query that shows the count of unique locations for each distinct Type+Color where the number of unique locations is more than 1, e.g.

```
Type    Color   UniqueLocations
----    -----   --------
Apple   Green   2
Banana  Yellow  2 
```

Note that {Apple, Red, 1} doesn't appear because there is only 1 location for red apples (Chicago). I think I've got this one (but perhaps there is a simpler method). I'm using:

```
SELECT Type, Color, Count(Location) FROM
(SELECT DISTINCT Type, Color, Location FROM MyTable)
GROUP BY Type, Color HAVING Count(Location)>1; 
```

How can I create another query that lists the `Type, Color`, and `Location` for each distinct `Type,Color` when the count of unique locations for that `Type,Color` is greater than 1? The resulting recordset would look like:

```
Type    Color   Location
----    -----   --------
Apple   Green   New York
Apple   Green   Los Angeles
Banana  Yellow  Miami
Banana  Yellow  Atlanta 
```

Note that `Apple, Red, Chicago` doesn't appear because there is only 1 location for red apples. Thanks!

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-06T20:02:22.957

对子查询使用 a `COUNT(DISTINCT Location)`and join`Type`和`Color` The `GROUP BY`and`HAVING`子句，因为您尝试使用它们将完成这项工作。

```
/* Be sure to use DISTINCT in the outer query to de-dup */
SELECT DISTINCT
   MyTable.Type,
   MyTable.Color,
   Location
FROM 
  MyTable
  INNER JOIN (
    /* Joined subquery returns type,color pairs having COUNT(DISTINCT Location) > 1 */
    SELECT
      Type,
      Color,
      /* Don't actually need to select this value - it could just be in the HAVING */
      COUNT(DISTINCT Location) AS UniqueLocations
    FROM
      MyTable
    GROUP BY Type, Color
    /* Note: Some RDBMS won't allow the alias here and you 
       would have to use the expanded form
       HAVING COUNT(DISTINCT Location) > 1
     */
    HAVING UniqueLocations > 1
  /* JOIN back against the main table on Type, Color */
  ) subq ON MyTable.Type = subq.Type AND MyTable.Color = subq.Color 
```

[这是一个演示](http://sqlfiddle.com/#!2/0618f/4)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T20:05:57.340

你可以这样写你的第一个查询：

```
Select Type, Color, Count(Distinct Location) As UniqueLocations
From Table
Group By Type, Color
Having Count(Distinct Location) > 1 
```

*（如果您使用 MySQL，您可以`UniqueLocations`在`having`子句中使用别名，但在许多其他系统上，别名尚不可用，因为`having`子句在子句之前进行评估`select`，在这种情况下，您必须对两个子句重复计数）。*

对于第二种，有很多不同的写法，这可能是一种：

```
Select Distinct Type, Color, Location
From Table
Where
  Exists (
    Select
      *
    From
      Table Table_1
    Where
      Table_1.Type = Table.Type
      and Table_1.Color = Table.Color
    Group By
      Type, Color
    Having
      Count(Distinct Location) > 1
  ) 
```

# python - Finding groups in Regex - Python

> ID：13258445
> 
> 赞同：0
> 
> 时间：2012-11-06T19:59:27.997
> 
> 标签：python, regex

I am not able to understand the output of following code I just wrote. I am trying to extract the complete value of the group in a string value.

```
>> str1 = "CREATE TABLE TABLE1 (NAME VARCHAR, PHONE VARCHAR) as SELECT NAME, PHONE FROM SCHEMA1.ADDRESS"
>> pat1 = re.compile("CREATE TABLE .+ FROM (\w).+")
>> ret= pat1.search(str1)
>> ret.groups()
('S',) 
```

I was expecting the value to be `SCHEMA1`. How can I retrieve the entire value ?

Why I am doing this?

I have a file filled with DML statements intended for different schemas. So, I need to create separate files for each schema with DML statement from the file mentioned before.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:02:13.967

你的意思是写：

```
pat1 = re.compile("CREATE TABLE .+ FROM (\w+)\..+") 
```

`\w`只捕获一个字符；你想捕获所有字符直到点。`\.`表示点，并`.+`表示线的其余部分 ( `address`)。

# python-3.x - Python clipboard manager?

> ID：13258448
> 
> 赞同：0
> 
> 时间：2012-11-06T19:59:41.980
> 
> 标签：python-3.x, clipboardmanager

Where would be a good place start learning to program a clipboard manager in python. i want to be able to copy selected text with a keyboard macro and set it to a slot identified ny the key combo "ctrl+alt+c+1", "ctrl+alt+c+2" storing more than one thing, also so would be got to be able to contaminate on to what is in a slot, if one would want. Any way that is the project i want to write, i write in python 3.2, python 2.7, and java 7\. what libraries should i start learning i guess is what i am asking.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T23:27:33.827

剪贴板是特定于框架的。所以一个好地方是选择一个 GUI 框架，并查看它的文档以了解如何处理剪切和粘贴。

# android - Setting Theme Programmactically Causes black background

> ID：13258449
> 
> 赞同：6
> 
> 时间：2012-11-06T19:59:45.397
> 
> 标签：android, dialog, themes

When I run my android application I am calling a method to check if the app is being run on a tablet using:

```
public boolean isTablet(Context context){
  boolean xlarge = ((context.getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == 4);
  boolean large = ((context.getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK)== Configuration.SCREENLAYOUT_SIZE_MASK);
  return(xlarge || large);
} 
```

if the method returns true(i.e. the device satisfies one of these conditions)

I set my theme to a Dialog theme via:

```
setTheme(R.style.MyTheme); 
```

where `MyTheme` is a theme that inherits from the parent `Theme.Holo.Light.Dialog`

This logic works fine however it gives me a weird effect in the background. The Calling intent is completely blacked out, whereas if i just set the theme in the manifest the background is only slightly greyed out.

**Update - code added**

```
 private Context mClassContext = this;
 @Override
 public void onCreate(Bundle savedInstanceState){
     if(isTablet(mClassContext)){
       setTheme(R.style.MyTheme);
     }
  super.onCreate(savedInstanceState);
  setContentView(R.layout.myLayout);
} 
```

How do I replicate this?

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T20:02:56.160

我似乎找到了自己问题的答案。

为了避免黑色背景：

在 android 清单中，将所有可能是对话框（如果是平板电脑）的活动设置为对话框主题：

然后`onCreate`添加这个 else 情况以将其更改为非平板设备（即手机）

```
if(isTablet(mContext)){
setTheme(R.style.myDialogTheme);}
else{ 
  setTheme(R.style.MyTheme);
} 
```

# javascript - How to retrieve both html and styles of a page section?

> ID：13258452
> 
> 赞同：1
> 
> 时间：2012-11-06T19:59:59.823
> 
> 标签：javascript, css, innerhtml

I am trying to retrieve the current content of a Web page section (usually a div or table element). The objective is to display it as standalone (for example for printing purposes) or insert it in another page. It is essential for me to collect not only the elements but also their computed styles, as some content has been highlighted or color coded by other scripts.

I can get the html with innerHTML, and get the style of a specific element with getComputedStyle. But how would I get both html and styles for a whole section?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:20:43.030

我曾经在 jQuery 中做了一些可以检索所有（不是特定部分）样式的东西；.css 文件、样式标签和特定页面的内部样式。我不知道如何处理它，但也许你可以以某种方式使用这个脚本。它并非在所有情况下都有效，有时它会有点错误，因为我没有对其进行足够的测试。也许 StackOverflow 上还有其他人可以继续使用这段代码。;)

```
var all_css = {stylesheets:[], inner_head_styles:[], body_styles:[]};

$(function(){
  $.ajaxSetup({ 
    async: true,
    crossDomain: true,
    dataType: "text",
    type: "GET"
  });

  var calls = [];
  /*every non-cross-domain .css file*/
  $("head link[rel='stylesheet']").each(function(a, stylesheet){
    if($(stylesheet).attr("href").match(/((ftp|http|https):\/\/)?/)[0] == ""){
      var css_source = $(stylesheet).attr("href");
      var css_call = $.ajax({
        url: css_source,
        success: function(data){
          all_css.stylesheets.push(data);
        },
        error: function(e, f){
          alert(e, f);
        }
      });

      calls.push(css_call);
    }
    else{
      console.log("CSS SOLVER: Cross domain CSS's aren't going to be loaded!");
    }
  });

  /*every head style*/
  $("style").each(function(b, style){
    all_css.inner_head_styles.push($(this).text());
  });

  /*every element in the body that has a style attribute*/
  $("body[style], body *[style]").each(function(c, style){
    var css_html_node = $(style).context.nodeName;
    var css_class = typeof($(style).attr("class")) != "undefined" ? "."+$(style).attr("class") : "";
    var css_id = typeof($(style).attr("id")) != "undefined" ? "#"+$(style).attr("id") : "";

    css_class = css_class.replace(/\s/g, ".");
    var css_string = css_html_node + css_id + css_class + "{" + $(style).attr("style") + "}";
    all_css.body_styles.push(css_string);
  });

  $.when.apply(null, calls).done(function(){
    console.log(all_css);
  });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:15:39.113

您无法真正检索某个部分的样式，您必须获取元素上的样式。

您必须记住，您不再处理原始 CSS，而是每个元素的计算样式。

# c# - Running a Windows application as a Command Line application

> ID：13258453
> 
> 赞同：2
> 
> 时间：2012-11-06T20:00:12.480
> 
> 标签：c#, .net, winforms

I am working on a migration tool that is primarily a Windows Forms application. What I want to do is provide the ability to run the application as a sort of command line utility where parameters can be passed in and the migration occurs completely void of the GUI. This seems straight forward enough and the entry point for my application looks like this:

```
 [STAThread]
    static void Main(string[] args)
    {
        if (args.Length == 0)
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new MainWindow());
        }
        else
        {
            //Command Line Mode
            Console.WriteLine("In Command Line Mode");
            Console.ReadLine();
        }
    } 
```

The problem I am running into is that when execution passes into the else block the text is not wrote back to the user at the command prompt which is problematic as I want to update the user at the command prompt as various executions complete. I could easily write a standalone console application but I was hoping to provide a single tool that allowed to different types of entries for a given scenario. Is what I am looking to do possible and, if so, how is it achieved?

Thanks!

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:05:17.920

这是一个讨论这个问题的主题：http: [//social.msdn.microsoft.com/forums/en-US/Vsexpressvb/thread/875952fc-cd2c-4e74-9cf2-d38910bde613/](http://social.msdn.microsoft.com/forums/en-US/Vsexpressvb/thread/875952fc-cd2c-4e74-9cf2-d38910bde613/)

关键是[`AllocConsole`](http://pinvoke.net/default.aspx/kernel32/AllocConsole.html)从 kernel32.dll 调用函数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T20:06:12.147

通常的模式是将逻辑写入类库，您可以从可视 UI 或命令行应用程序调用该类库。

例如，如果您在 UI 上接受了“宽度”、“高度”和“深度”，然后计算出体积，您会将计算结果放入类库中。

因此，您要么有一个接受三个参数的控制台应用程序，要么有一个具有三个输入的表单应用程序，在这两种情况下，它们都会进行相同的调用......

```
var volumeCalculations = new VolumeCalculations();
var volume = volumeCalculations.GetVolume(width, height, depth); 
```

控制台应用程序非常薄，表单应用程序非常薄，因为它们所做的只是将输入传递给类库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-14T03:29:55.403

这是完整的可运行示例。编译：

```
csc RunnableForm.cs RunnableForm.Designer.cs 
```

RunnableForm.cs：

```
using System;
using System.Linq;
using System.Windows.Forms;

namespace Test
{
    public partial class RunnableForm : Form
    {
        public RunnableForm()
        {
            InitializeComponent();
        }

        private void button1_Click(object sender, EventArgs e)
        {
            MessageBox.Show("bang!");
        }

        [STAThread]
        static void Main()
        {

            string[] args = Environment.GetCommandLineArgs();
            // We'll always have one argument (the program's exe is args[0])
            if (args.Length == 1)
            {
                // Run windows forms app
                Application.Run(new RunnableForm());
            }
            else
            {
                Console.WriteLine("We'll run as a console app now");
                Console.WriteLine("Arguments: {0}", String.Join(",", args.Skip(1)));
                Console.Write("Enter a string: ");
                string str = Console.ReadLine();
                Console.WriteLine("You entered: {0}", str);
                Console.WriteLine("Bye.");
            }
        }
    }
} 
```

RunnableForm.Designer.cs：

```
namespace Test
{
    partial class RunnableForm
    {
        /// <summary>
        /// Required designer variable.
        /// </summary>
        private System.ComponentModel.IContainer components = null;

        /// <summary>
        /// Clean up any resources being used.
        /// </summary>
        /// <param name="disposing">true if managed resources should be disposed; otherwise, false.</param>
        protected override void Dispose(bool disposing)
        {
            if (disposing && (components != null))
            {
                components.Dispose();
            }
            base.Dispose(disposing);
        }

        #region Windows Form Designer generated code

        /// <summary>
        /// Required method for Designer support - do not modify
        /// the contents of this method with the code editor.
        /// </summary>
        private void InitializeComponent()
        {
            this.button1 = new System.Windows.Forms.Button();
            this.SuspendLayout();
            // 
            // button1
            // 
            this.button1.Location = new System.Drawing.Point(42, 42);
            this.button1.Name = "button1";
            this.button1.Size = new System.Drawing.Size(153, 66);
            this.button1.TabIndex = 0;
            this.button1.Text = "button1";
            this.button1.UseVisualStyleBackColor = true;
            this.button1.Click += new System.EventHandler(this.button1_Click);
            // 
            // RunnableForm
            // 
            this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
            this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
            this.ClientSize = new System.Drawing.Size(284, 261);
            this.Controls.Add(this.button1);
            this.Name = "RunnableForm";
            this.Text = "RunnableForm";
            this.ResumeLayout(false);

        }

        #endregion

        private System.Windows.Forms.Button button1;
    }
} 
```

# r - 在 geom_tile() / geom_raster() 中标记特定图块

> ID：13258454
> 
> 赞同：12
> 
> 时间：2012-11-06T20:00:13.633
> 
> 标签：r, ggplot2

假设我有一个这样的data.frame：

```
df <- matrix( rnorm(100), nrow = 10)
rownames(df) <- LETTERS[1:10]
molten <- melt(df)
molten$na <- FALSE
molten[ round(runif(10,  0, 100 )), "na" ] <- T
head(molten)

  Var1 Var2      value    na
1    A    1 -0.2413015 FALSE
2    B    1  1.5077282 FALSE
3    C    1 -1.0798806 TRUE
4    D    1  2.0723791 FALSE 
```

现在，我想使用 ggplot 绘制平铺（或栅格）图并*标记*具有`na=TRUE`. 目前我将标记绘制为点：

```
g <- ggplot( molten ) +
  geom_raster( aes( x = Var1, y = Var2, fill = value )  ) + 
  scale_fill_gradient2( low = "blue", high = "red", na.value="black", name = "" ) +
  geom_point( aes( x = Var1, y = Var2, size= as.numeric(na) ) ) 
```

![带点的瓷砖](../Images/352f966570ac6947487312147446cffc.png)

但是，我不太喜欢这个情节，原因有两个：

1.  即使 仍然画了一个点`molten$na = FALSE`。当然我可以指定`data=molten[ molten$na, ]`，但实际上这应该可以在不指定另一个数据集的情况下进行。
2.  我不喜欢这些点，但更喜欢在瓷砖周围有框架或条纹。但我不知道如何实现这一目标。如果我要使用`geom_segment()`条纹，我将如何指定`yend`和`xend`？

任何帮助表示赞赏。

**编辑 1** 这里是`dput`再现性：

```
structure(list(Var1 = structure(c(1L, 2L, 3L, 4L, 1L, 2L, 3L, 
4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L, 1L, 2L, 3L, 4L), .Label = c("A", 
"B", "C", "D", "E", "F", "G", "H", "I", "J"), class = "factor"), 
    Var2 = c(6L, 6L, 6L, 6L, 7L, 7L, 7L, 7L, 8L, 8L, 8L, 8L, 
    9L, 9L, 9L, 9L, 10L, 10L, 10L, 10L), value = c(-0.468920099229389, 
    0.996105987531978, -0.527496444770932, -0.767851702991822, 
    -0.36077954422072, -0.145335912847538, 0.114951323188032, 
    0.644232124274217, 0.971443502096584, 0.774515290180507, 
    -0.436252398260595, -0.111174676975868, 1.16095688943808, 
    0.44677656465583, -0.708779168274131, 0.460296447139761, 
    -0.475304748445917, -0.481548436194392, -1.66560630161765, 
    -2.06055347675196), na = c(FALSE, FALSE, FALSE, FALSE, FALSE, 
    FALSE, FALSE, FALSE, TRUE, FALSE, FALSE, FALSE, FALSE, FALSE, 
    FALSE, FALSE, TRUE, FALSE, FALSE, FALSE)), .Names = c("Var1", 
"Var2", "value", "na"), row.names = c(51L, 52L, 53L, 54L, 61L, 
62L, 63L, 64L, 71L, 72L, 73L, 74L, 81L, 82L, 83L, 84L, 91L, 92L, 
93L, 94L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-07T00:15:04.707

这里有两种可能的方法：

在示例 1 中，我使用`ifelse`和`scale_size_manual`来控制是否在每个单元格中绘制一个点。

在示例 2 中，我创建了一个小的辅助 data.frame 并用于`geom_rect`绘制一个矩形而不是一个点。为方便起见，我将 Var2 转换为因子。在 ggplot2 中，沿离散/因子轴的每一步长度为 1.0。这允许轻松计算 的值`geom_rect`。

```
# Using ggplot2 version 0.9.2.1
library(ggplot2)

# Test dataset from original post has been assigned to 'molten'.

molten$Var2 = factor(molten$Var2)

# Example 1.
p1 = ggplot(data=molten, aes(x=Var1, y=Var2, fill=value)) +
     geom_raster() +
     scale_fill_gradient2(low="blue", high="red", na.value="black", name="") +
     geom_point(aes(size=ifelse(na, "dot", "no_dot"))) +
     scale_size_manual(values=c(dot=6, no_dot=NA), guide="none") +
     labs(title="Example 1")

ggsave(plot=p1, filename="plot_1.png", height=3, width=3.5) 
```

![在此处输入图像描述](../Images/e191eabc2727c10930150c86d2fb933d.png)

```
# Example 2.
# Create auxiliary data.frame.
frames = molten[molten$na, c("Var1", "Var2")]
frames$Var1 = as.integer(frames$Var1)
frames$Var2 = as.integer(frames$Var2)

p2 = ggplot(data=molten) +
     geom_raster(aes(x=Var1, y=Var2, fill=value)) +
     scale_fill_gradient2(low="blue", high="red", na.value="black", name="") +
     geom_rect(data=frames, size=1, fill=NA, colour="black",
       aes(xmin=Var1 - 0.5, xmax=Var1 + 0.5, ymin=Var2 - 0.5, ymax=Var2 + 0.5)) +
     labs(title="Example 2")

ggsave(plot=p2, filename="plot_2.png", height=3, width=3.5) 
```

![在此处输入图像描述](../Images/08a1b4f387d23ea5c8c72db365e7c71a.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T23:20:49.830

正如@joran 在评论中建议的那样，您可以将数据的子集传递到特定层。

使用您的示例数据

```
g <- ggplot( molten ) +
  geom_raster( aes( x = Var1, y = Var2, fill = value )  ) + 
  scale_fill_gradient2( low = "blue", high = "red", na.value="black", name = "" ) +
  geom_point(data = molten[molten$na,], aes( x = Var1, y = Var2, size= as.numeric(na) ) )

g 
```

![在此处输入图像描述](../Images/d43ed8d5e87770089d3bdaff54dc9857.png)

如果您想让传奇人物说明点的含义

```
 g <- ggplot( molten ) +
  geom_raster( aes( x = Var1, y = Var2, fill = value )  ) + 
  scale_fill_gradient2( low = "blue", high = "red", na.value="black", name = "" ) +
  geom_point(data = molten[molten$na,], aes( x = Var1, y = Var2, colour = 'black' )) +
  scale_colour_manual(name = 'Ooh look', values = 'black', labels = 'Something cool') 
```

![在此处输入图像描述](../Images/4e875d2386b46a660dde3fba5b04eab6.png)

# coldfusion - CFinclude 问题

> ID：13258456
> 
> 赞同：1
> 
> 时间：2012-11-06T20:00:23.930
> 
> 标签：coldfusion

我正在尝试 cfinclude 一个文件并将一些值传递给该特定文件。我不知道这是否可能，所以任何答复表示赞赏。

这是我的代码：

```
<cfoutput>

    <cfset path = "?id=#email_id#&contactid=#email_contactid#&ownerid=#email_ownerid#">

    <cfinclude template="/email_results#path#">

</cfoutput> 
```

我的映射是这样的：

> E:\sites\exampleCom\cf_modules\reports\resultsTemplate.cfm

我做了一个#expandPath("/email_results#path#")# 它给了我正确的输出

> (E:\sites\exampleCom\cf_modules\reports\resultsTemplate.cfm?id=123&contactid=123&ownerid=123)

但是当我试图包含该文件时，它会出错。我可以通过 cfinclude 传递变量吗？这是它破坏我的代码的原因吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T20:06:14.650

不，您不会将变量传递给包含页面。包含将在相同的上下文中执行，因此它可以直接看到`email_id`和其他变量。

# error-handling - How to get current token in yyerror?

> ID：13258460
> 
> 赞同：1
> 
> 时间：2012-11-06T20:00:27.910
> 
> 标签：error-handling, syntax-error, token, yacc, lex

My problem is that the message passed to `yyerror` is already formatted (i.e. it is actually an English explanation what went wrong), and what I would like to get is just the current token (i.e. the one before the error pseudo-token).

So how to get it?

I use gplex/gppg which are lex/yacc implementations in C#.

* * *

I am sorry for not being 100% precise -- what I need is token (symbol) not the body (text) which was matched (by the token).

Let's say I have a rule `[A-Za-z0-9_]+` constitutes an `ID`. So I would like to get token `ID` not a `foobar`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:12:25.643

在我的一个旧项目中找到了这个，重新定义了 yyerror：

```
int yyerror (char *msg) {
  printf("oha, %s: '%s' in line %d\n", msg, yytext, yylineno);
  return 0;
} 
```

这是一个使用 flex/bison 的 c++ 项目，我认为你可以在 yytext 中找到有趣的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T22:23:25.020

没有标准，但是 bison 和大多数版本的 yacc 将当前令牌存储在`yychar`. 不幸的是，这通常是一个局部变量 (of `yyparse`)，因此您无法在其他函数 (例如`yyerror`) 中访问它，只能在解析器操作中访问它。

如果您说为什么要使用当前令牌，这可能会有所帮助——它通常不是有用的信息。您提到了错误伪标记，这没有任何意义，因为它与错误恢复相关联，而不是错误本身——当它进入图片时，通常输入中的一堆标记已被丢弃。

# python - Provide called shell script with input in Python

> ID：13258462
> 
> 赞同：3
> 
> 时间：2012-11-06T20:00:33.783
> 
> 标签：python, python-3.x, subprocess

I have a python program which uses various Bash shell scripts. However, some of them require (y/n) input. I know the input required based on the question number so it's a matter of being able to provide that automatically.

Is there a way in Python to do that?

As a last resort I can send a signal to a window etc. but I'd rather not do that.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:52:48.267

可能最简单的方法是使用[pexpect](http://pypi.python.org/pypi/pexpect/)。一个示例（来自wiki 中的[概述）：](http://www.noah.org/wiki/Pexpect#Overview)

```
import pexpect

child = pexpect.spawn('ftp ftp.openbsd.org')
child.expect('Name .*: ')
child.sendline('anonymous')
child.expect('Password:')
child.sendline('noah@example.com')
child.expect('ftp> ')
child.sendline('cd pub')
child.expect('ftp> ')
child.sendline('get ls-lR.gz')
child.expect('ftp> ')
child.sendline('bye') 
```

如果您不想使用额外的模块，使用`subprocess.Popen`是可行的方法，但它更复杂。首先，您创建流程。

```
import subprocess

script = subprocess.Popen(['script.sh'], stdin=subprocess.PIPE,
                          stdout=subprocess.PIPE, shell=True) 
```

您可以在`shell=True`此处使用，也可以将 shell 的名称添加到命令参数中。前者更容易。

接下来，您需要阅读，`script.stdout`直到找到您的问题编号。然后你写答案`script.stdin`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T20:03:28.473

使用`subprocess.Popen`.

```
from subprocess import Popen, PIPE

popen = Popen(command, stdin=PIPE)
popen.communicate('y') 
```

# c - rep_movsl 的破坏者列表

> ID：13258464
> 
> 赞同：1
> 
> 时间：2012-11-06T20:00:40.777
> 
> 标签：c, gcc, assembly, x86, inline-assembly

我正在尝试以下内联汇编的示例：http: [//www.delorie.com/djgpp/doc/brennan/brennan_att_inline_djgpp.html](http://www.delorie.com/djgpp/doc/brennan/brennan_att_inline_djgpp.html) 但是有些事情让我对破坏感到困惑：

*   关于 clobber 的行为
    Clobbering 本质上是告诉 GCC 不信任指定寄存器/内存中的值。

    > “好吧，当 GCC 可以准确地知道你在之前和之后对寄存器做了什么时，它真的很有帮助......它甚至足够聪明地知道如果你告诉它把 (x+1) 放在一个寄存器中，那么如果你不破坏它，然后 C 代码引用 (x+1)，并且它能够保持该寄存器空闲，它将重用计算。唷。”

这一段是否意味着破坏将禁用常见的子表达式消除？

*   教程中关于clobber列表的一些不一致之处：
    对于输入/输出列表中指定的寄存器，不需要像GCC所知的那样将它们放入clobber列表中；但是在关于 rep_movsl（或 rep_stosl）的示例中：

    asm ("cld\n\t" "rep\n\t" "stosl" : /* 没有输出寄存器 */ : "c" (count), "a" (fill_value), "D" (dest) : " %ecx", "%edi" );

尽管“S，D，c”在输出操作数中，但它们再次被列为clobbered。我在 C 中尝试了一个简单的片段：

```
#include<stdio.h>
int main()
{
  int a[] = {2, 4, 6};
  int b[3];
  int n = 3;
  int v = 12;
  asm ("cld\n\t"
       "rep\n\t"
       "movsl"
       :
       : "S" (a), "D" (b), "c" (n)
       : );
//     : "%ecx", "%esi", "%edi" );
  printf("%d\n", b[1]);
} 
```

如果我使用注释掉的clobber 列表，GCC 会抱怨：

> ac:8:3: 错误: 在重新加载 'asm' 时找不到类 'CREG' 中的寄存器 ac:8:3: 错误: 'asm' 操作数有不可能的约束

如果我使用空的clobber列表，它将编译并且输出为4。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T20:43:51.843

您引用的文件似乎非常不准确。以下是 asm 操作数约束对 GCC 的实际意义：

*   输入：汇编操作从此操作数中读取。GCC 假设所有的读取在汇编操作的最开始*同时发生*。
*   输出：汇编操作写入该操作数；完成后，关联变量将具有有意义的值。（没有办法告诉 GCC 那个值是什么。） GCC 假设所有的写操作都在汇编操作的*最后**同时发生。*
**   Clobber：组装操作会破坏此操作数中任何有意义的值。像写入一样，所有的破坏都被假定在操作*结束时**同时发生*。**   Earlyclobber：与clobber相同，只是它发生在操作*开始*时。**

 **此外，当前的（GCC 4.7）手册包括以下关键段落：

> 您不能以与输入或输出操作数重叠的方式编写clobber 描述。例如，如果您在 clobber 列表中提及该寄存器，则您可能没有描述具有一个成员的寄存器类的操作数。声明为存在于特定寄存器中的变量（参见 Explicit Reg Vars），并用作 asm 输入或输出操作数，不得在 clobber 描述中提及任何部分。您无法在不将输入操作数指定为输出操作数的情况下指定修改输入操作数。请注意，如果您指定的所有输出操作数都用于此目的（因此未使用），那么您还需要为 asm 构造指定 volatile，如下所述，以防止 GCC 将 asm 语句删除为未使用。

这就是为什么尝试输入和破坏某些寄存器对您来说失败的原因。

现在，插入 rep movsl 现在有点傻 - 只需使用`memcpy`并让 GCC 用适合您的最佳指令序列替换它 - 但是编写示例的正确方法是

```
int main()
{
  int a[] = {2, 4, 6};
  int b[3];
  int n = 3;
  int v = 12;

  int *ap = a, *bp = b;

  asm volatile ("rep movsl" : "+S" (ap), "+D" (bp), "+c" (n) : : "memory");
  printf("%d\n", b[1]);
} 
```

您需要 the`ap`和`bp`中间变量，因为数组的地址不是左值，因此它不能出现在输出约束中。“+r”符号告诉 GCC，这个寄存器既是输入也是输出。'volatile' 是必要的，因为在 之后所有输出操作数都未使用`asm`，因此 GCC 否则会愉快地删除它（理论上它只是因为它对输出操作数所做的事情而存在）。将“内存”放入 clobber 列表是告诉 GCC 操作修改了内存的方式。最后，进行微优化：GCC 永远不会发布“std”，因此您不需要“cld”（这实际上是由 x86 ABI 保证的）。

我所做的大部分更改都不会影响像这样的小型测试程序是否正确运行；但是，它们对于全尺寸程序来说都是必不可少的，以防止细微的优化错误。例如，如果您遗漏了“内存”破坏者，GCC 将有权`b[1]`将`asm`!**

# java - SQLServerException while trying to use Fitnesse and DbFit and SQL Server

> ID：13258469
> 
> 赞同：2
> 
> 时间：2012-11-06T20:00:51.817
> 
> 标签：java, sql-server, jdbc, fitnesse, dbfit

I am new to both (Java) FitNesse and SQL Server, I want to have a basic SQL test working with DbFit,

I have the following in root:

```
!path c:\fitnesse\lib\dbfit.jar
!path c:\fitnesse\lib\fitlibrary.jar
!path c:\fitnesse\lib\sqljdbc4.jar
|Import|
|dbfit.SqlServerTest| 
```

I have the following in my HelloWorldTest,

```
!contents -R2 -g -p -f -h

!|dbfit.SqlServerTest|

|Connect|LOCALSQLEXPRESS|sa|Password|somePassword:|

|eg.Division|
|numerator|denominator|quotient?|
|10       |2          |5        |
|12.6     |3          |4.2      |
|100      |4          |33       | 
```

What I have tried:

*   I have double checked my SQLExpress username and password and the SqlServer instance is at localhost.I doubt this is a firewall issue. (My understaning of firewall is quite weak admittedly.)
*   Looking at Sql Server Configuration Manager (SSCM),
    *   I see that "SQL Server (SQLEXPRESS) is running as Process with ID 2316,
    *   Using the PowerShell command "nestat -a -no | Select-String 2316", I see that the process on port 55618.
*   In SSCM, I then create alias called "LOCALSQLEXPRESS" in both "SQL Native Client 11.0 Configuration (32bit)" and "SQL Native Client 11.0 Configuration" as I have no idea what my JDBC is using. (Apparently, JDBC for SQL Server does not support named instance, I got an exception telling me so when I was trying to connect to \localhost\SQLEXPRESS directly) I have also enabled "TCP/IP" and "Shared Memory" in "Protocols for SQLEXPRESS".

I am getting the following error when I run the test:

> com.microsoft.sqlserver.jdbc.SQLServerException: The TCP/IP connection to the host LOCALSQLEXPRESS, port 1433 has failed. Error: "null. Verify the connection properties. Make sure that an instance of SQL Server is running on the host and accepting TCP/IP connections at the port. Make sure that TCP connections to the port are not blocked by a firewall.".

(Note the port number of 1433, despite my alias point to port 55618.)

This is my first post at StackOverflow, please excuse any silliness. Can anyone shed any light?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-10T03:13:42.950

我希望 lingo_journey 现在已经解决了这个问题。对于其他可能有同样问题的人，我最初也无法使命名实例与多参数 Connect 一起工作。

为了解决这个问题，我切换到连接字符串作为 Connect 的参数：

1) 确保 SQL Server Browser 服务正在运行（如上面评论中所述）

2) 将 Connect 参数更改如下：

```
!| Connect | jdbc:sqlserver://localhost\SQLEXPRESS;databaseName=DB_NAME;integratedSecurity=true | 
```

以下使用 SQL Server 身份验证也可以正常工作（这可能更适用于 lingo_journey：

```
!| Connect | jdbc:sqlserver://localhost\SQLEXPRESS;databaseName=DB_NAME;user=user1;password=Welcome!| 
```

请注意，在我在网上看到的一些示例中，连接字符串中省略了 sqlserver:，这对我不起作用。

# ruby-on-rails - 根据关联属性查找记录

> ID：13258472
> 
> 赞同：0
> 
> 时间：2012-11-06T20:00:54.133
> 
> 标签：ruby-on-rails, activerecord, spree

我正在尝试根据两个关联属性查找记录。如果该记录的关联包含这两条记录，则应选择该记录。

到目前为止，我尝试遵循 - 在我看来这是一种非常糟糕的做法，我想避免使用它。

```
@size = Spree::OptionValue.find(params[:size])
@color = Spree::OptionValue.find(params[:color])

vari = Spree::Variant.all
vari.each do |va|
  if va.option_values.include?(@size && @color)
    @variant = va
  end
end 
```

到目前为止，我也尝试过

```
@variant = Spree::Variant.all(:include => :option_values, :conditions => ['option_value.id = ?', params[:color]) 
```

这似乎是要走的路，但我似乎无法找出获得结果的正确方法。我不断收到的返回错误如下：

> ActiveRecord::StatementInvalid: PG::Error: ERROR: missing FROM-clause entry for table "option_values" LINE 1: ..._option_values_variants"."option_value_id" WHERE (option_val...

编辑：

由于接受的答案提供了很大的帮助，我得到了它的工作：

```
Spree::Variant.joins(:option_values).where("spree_option_values.id in (?)", [size, color]) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:22:10.237

首先，您的代码可能已损坏。我怀疑这`.include?(@size && @color)`是否符合您的想法。您实际上只检查是否`option_values`包含`@color`。这相当于做`(true && @color)`. 如果要包含*这两个*值，则需要`.include?(@size) && .include?(@color)`.

所以你的代码应该看起来像这样：

```
vari = Spree::Variant.all
vari.each do |va|
  if va.option_values.include?(@size) && va.option_values.include?(@color)
    @variant = va
  end
end 
```

接下来，您可以使您的代码更加 Ruby 风格：

```
@variant = Spree::Variant.all.select do |v|
  v.option_values.include?(@size) && v.option_values.include?(@color)
end 
```

但是，在数据库级别实际评估条件要比将整个表加载到应用程序中要好得多。您似乎正在查找相关`OptionValue`s 包括您选择的两个`@size`和的所有记录`@color`。

您要查找的查询可能如下所示：

```
Spree::Variant.joins(:option_values).where("option_values.id in (?)", [@size, @color]) 
```

# jquery - 检测 JQuery UI Slider 事件键码

> ID：13258474
> 
> 赞同：1
> 
> 时间：2012-11-06T20:00:55.360
> 
> 标签：jquery, jquery-ui, jquery-ui-slider

为了收集有关用户如何与 Web 应用程序交互的一些统计数据，我想知道他们如何使用某个 JQuery UI Slider。具体来说，我想知道他们是使用鼠标还是键盘（箭头键）来操作滑块。

我的代码如下：

```
$test.slider({range: "min", step: 0.1, slide: updatePosition, stop: slideEnd, start: slideStart}); 
```

`slideStart`在我的功能中，我如何检测`slideEnd`是否按下了箭头键或使用了鼠标？我必须修改插件源吗？这就是我想避免的。

将另一个处理程序添加到 $test 以进行单击/按键是最好的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:38:26.257

您可以将事件侦听器绑定到`slidechange`和/或`slide`事件。第一个参数是一个事件对象，其中包含`originalEvent`. 它的`type`属性包含您要查找的内容。

```
$test.bind('slide slidechange', function(event, ui) {
    if (event.originalEvent) {
        console.info(event.originalEvent.type);
    }
}); 
```

警告！仅当`originalEvent`事件由用户交互触发时才会出现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:20:43.043

我想出了一个看起来最干净的方法。我刚刚补充说：

```
$test.keyup(slideKey); 
```

$test 是我的滑块 div。我不得不使用`keyup()`而不是`keypress()`抓住 Chrome 中的箭头键。

在slideKey函数中，我只是使用传入的事件对象。

```
function slideKey(e)
{
    console.log(e.keycode);
} 
```

# iphone - 没有从网络服务获取数据

> ID：13258476
> 
> 赞同：0
> 
> 时间：2012-11-06T20:01:01.253
> 
> 标签：iphone, ios, xcode

我是 iphone 开发新手，我想使用 JSON 解析从 Web 服务获取数据这里是代码

```
-(void)loadDataSource

  {

   NSString *URLPath = [NSString stringWithFormat:@"https://ajax.googleapis.com/ajax/services/feed/find?v=1.0&q=Official%20Google%20Blogs"];

  NSURL *URL = [NSURL URLWithString:URLPath];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:URL];

 [NSURLConnection sendAsynchronousRequest:request queue:[NSOperationQueue mainQueue] completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {

    NSInteger responseCode = [(NSHTTPURLResponse *)response statusCode];

    if (!error)// && responseCode == 200)
    {
        id res = [NSJSONSerialization JSONObjectWithData:data options:NSJSONReadingMutableContainers error:nil];

        if (res && [res isKindOfClass:[NSDictionary class]])
        {

           self.dict=[res objectForKey:@"responseData"];  
          self.items = [self.dict objectForKey:@"entries"];
            [self dataSourceDidLoad];
        } 
        else 
        {
            [self dataSourceDidError];
        }
    } 
    else 
    {
        [self dataSourceDidError];
    }
}]; 
```

}

当我运行此代码时，它什么也不显示，并且索引处的集合视图的代码是

```
- (PSCollectionViewCell *)collectionView:(PSCollectionView *)collectionView viewAtIndex:(NSInteger)index 

{

NSDictionary *item = [self.items objectAtIndex:index];

PSBroView *v = (PSBroView *)[self.collectionView dequeueReusableView];
if (!v) 
{
    v = [[PSBroView alloc] initWithFrame:CGRectZero];
}

[v fillViewWithObject:item];

return v; 
```

}

在 fillViewWithObject 的代码下方

```
- (void)fillViewWithObject:(id)object
{
[super fillViewWithObject:object];

self.captionLabel.text = [object objectForKey:@"title"];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:00:50.077

你显然没有检查你的错误，因为当我运行这个时，我得到“错误的 URL”作为错误。我还收到一个编译器警告，“转换率比参数多”。那是因为 % 在您的 url 字符串中。您不应该使用 stringWithFormat - 只需传递文字字符串，它应该可以工作：

```
NSString *URLPath = @"https://ajax.googleapis.com/ajax/services/feed/find?v=1.0&q=Official%20Google%20Blogs"; 
```

我经常看到这个错误（或只是浪费代码）。除非您提供格式字符串和参数，否则不应使用 stringWithFormat。

# c# - C# Regex.Split 强制结果不转义字符

> ID：13258477
> 
> 赞同：1
> 
> 时间：2012-11-06T20:01:02.917
> 
> 标签：c#, regex, string, escaping

我正在尝试进行一些字符串操作，我需要获取多行字符串并`List<String>`通过拆分创建一个，`\r\n`以便最终得到字符串中找到的行列表。

但是，在执行 Regex.Split 之后，我最终得到的行中的每一行都
`"`以`\`.

例如，输入字符串的片段是：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<g2s:g2sMessage xmlns:g2s="http://www.gamingstandards.com/g2s/schemas/v1.0.3">
   <g2s:g2sBody g2s:dateTimeSent="2012-11-06T09:12:38.006-08:00" g2s:egmId="RBG_1234"
                g2s:hostId="1">
      <g2s:communications g2s:commandId="37102" g2s:dateTime="2012-11-06T09:12:38.004-08:00"
                          g2s:deviceId="1"
                          g2s:errorCode="G2S_none" 
```

当我执行以下操作将此字符串拆分为`List<String>`using 时：

```
List<string> lines = new List<string>(Regex.Split(message, "\r\n")); 
```

结果是：

```
<?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?>
<g2s:g2sMessage xmlns:g2s=\"http://www.gamingstandards.com/g2s/schemas/v1.0.3\">
   <g2s:g2sBody g2s:dateTimeSent=\"2012-11-06T09:12:38.006-08:00\" g2s:egmId=\"RBG_1234\"
            g2s:hostId=\"1\">
      <g2s:communications g2s:commandId=\"37102\" g2s:dateTime=\"2012-11-06T09:12:38.004-08:00\"
            g2s:deviceId=\"1\"
            g2s:errorCode=\"G2S_none\" 
```

**`"`如果不以逃脱的字符串结束，我将如何做到这一点？**
**C# 真的是在转义字符，还是只是调试器显示字符串的方式？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T20:04:31.703

这就是字符串在调试器中显示的方式（我猜是 Visual Studio 吗？）。这些反斜杠实际上并不在您的字符串中。您可以通过将字符串输出到控制台或文件来证明这一点，并注意没有出现反斜杠。

![视觉工作室](../Images/ad6974ece912d6a9052bfa6cab9ab101.png)

# assembly - AVR 微控制器

> ID：13258481
> 
> 赞同：1
> 
> 时间：2012-11-06T20:01:26.727
> 
> 标签：assembly, mips, pic, avr

我想写`MIPS`汇编代码。atmel avr 微控制器是否支持 MIPS（就像 PIC 微控制器一样）或者我是否必须使用 avr 程序集。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-08T01:39:13.677

您似乎对微控制器和架构有点困惑。我认为最好给你一些好的起点：

*   [Atmel AVR 网站](http://www.atmel.com/products/microcontrollers/avr/default.aspx)。文档、勘误表、规格、示例等。您可以选择 AVR-8（8 位）或 AVR-32（如果您熟悉 MIPS 等，则更好的选择）

    该站点提供了大量工具链等。但是，您可以为 AVR 交叉编译[GCC](http://gcc.gnu.org/)，前提是您已经为 AVR 构建了[binutils](http://ftp.gnu.org/gnu/binutils/)。

*   您需要一个[C 库](http://www.nongnu.org/avr-libc/)，它的功能比托管的 C 库要少，但它可以构建多个目标，具体取决于您使用的 8 位 AVR 架构。

*   最后，您需要能够使用您的程序刷新微控制器。例如，[avrdude](http://www.nongnu.org/avrdude/)。

如果您想在此路径上节省一些试验和错误，我有（Unix/BSD）AVR 开发环境的最新构建说明。

--

你的软件就搞定了。到目前为止，这一切都是*免费*的。现在你需要一个编程器来进行转换，从 DIY 串行编程器到复杂的 STK 编程器。我对 AVR-32 没有太多经验，所以如果您需要与 MIPS 相媲美的东西，也许这是一个更好的选择。尽管如此，创建小型 AVR-8 设备教会了我很多东西，并为我揭开了很多嵌入式开发的神秘面纱。

此外，AVR 被授权生产一系列 ARM 微控制器。除非您坚持使用它，否则可能是比 MIPS 更好的选择。

顺便说一句，从开发人员的角度来看，PIC 很糟糕。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-27T15:12:19.597

基本系列 AVR 通常分为六大类： tinyAVR — ATtiny 系列 0.5–16 kB 程序存储器 6–32 引脚封装 有限外设集 megaAVR — ATmega 系列 4–512 kB 程序存储器 28–100 引脚封装 扩展指令集（将指令和指令相乘以处理更大的程序存储器） 扩展外设集 XMEGA — ATxmega 系列 16–384 kB 程序存储器 44–64–100 引脚封装（A4、A3、A1） 扩展性能特性，例如 DMA、“事件系统”和密码学支持。具有 DAC 的广泛外设集 具有 AVR 系列其他成员所没有的特殊功能的特定应用 AVR megaAVR，例如 LCD 控制器、USB 控制器、高级 PWM、CAN 等 FPSLIC（带 FPGA 的 AVR）FPGA 5K 到 40K 门用于 AVR 程序代码的 SRAM，

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-03T06:45:49.170

MIPS 汇编语言特定于 MIPS 体系结构。据我所知，Atmel AVR 设备不直接支持 MIPS 指令集。如果您打算使用 AVR，我建议您专门学习 AVR 的指令集。

如果您更关心 MIPS 程序集编程而不关心物理硬件，那么我会考虑虚拟 MIPS 环境。我参加了一门围绕 MIPS 汇编的课程，我们使用了一个名为 MARS 的基于 java 的模拟器：

[http://courses.missouristate.edu/kenvollmar/mars/](http://courses.missouristate.edu/kenvollmar/mars/)

如果您正在寻找可编程 MIPS 硬件，我不确定有什么可用的。

我希望这有帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-11-01T04:40:01.430

PIC32 是一个使用 MIPS 作为 CPU 内核的微控制器系列。但是 Attiny ATmega 和 ATxmega 使用 AVR 作为 CPU 内核。AVR 和 MIPS 是不同的指令集架构，因此您不能使用相同的指令

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-06-07T19:28:03.823

the answer is no you can't write MIPS assembly codes for avr microcontroller because assembly language is tightly coupled to cpu architecture ... and avr not based on MIPS architecture

if you like to write your code in assembly .. you have to learn the cpu instruction sets provided by the cpu manufacturers for each cpu families you target ! ... so as you said you have to learn `avr assembly` if you target avr families

## Good resource to learn avr assembly

1.  the first 6 chapters of this book: **the avr microcontroller and embedded systems using assembly and c by mazidi**

2.  [avr freaks websit](https://www.avrfreaks.net/) will help you

3.  [AVR Assembly](https://www.youtube.com/watch?v=d-2Peb3pCBg&list=PL_x6IsROdlqoYsYXvdxXMue3ZilVR-PrV) playlist on youtube

if you like to write the code only once and run it for different cpu with little modification just use **C /or C++ languages** instead of assembly

# objective-c - 所有测试都没有完成 - xcode 4.5

> ID：13258483
> 
> 赞同：6
> 
> 时间：2012-11-06T20:01:46.540
> 
> 标签：objective-c, ipad, ios-simulator, xcode4.5

当我尝试为我的项目运行单元测试时，我得到了测试成功。但是在日志导航器中，我收到警告说“所有测试都没有完成”。但相同的代码在另一台机器上运行良好，所有测试都成功，没有任何警告。我搜索了与此相关的其他帖子并尝试了一切，但对我没有任何帮助。而且突然之间，一些单元测试无缘无故地失败了，但是当我再次运行它时成功了。我什至尝试重置模拟器，没有任何效果。

有什么建议么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T01:32:56.617

试试这个...在你的项目文件夹中打开一个终端并输入以下内容：

```
xcodebuild -list 
```

如果您的项目中有单元测试，您应该至少看到两个目标：ProjectName 和 ProjectNameTests。

现在键入以下命令（注意：如果 ProjectNameTests 有空格，则需要在它周围加上引号）：

```
xcodebuild -target ProjectNameTests build 
```

您几乎肯定会在输出末尾看到类似以下内容：

```
/Applications/Xcode.app/Contents/Developer/Tools/RunUnitTests:68: note: RunUnitTests exited without running tests because TEST_AFTER_BUILD was set to NO. 
```

您可以在 Xcode 中通过在 Project Navigator (Cmd-1) 中选择您的项目、选择您的 ProjectNameTests 目标、选择 Build Settings 并向下滚动到 Unit Testing 部分来解决此问题。将 Test After Build 设置从 No 更改为 Yes 并键入 Cmd-U 以再次运行单元测试。这次应该可以了。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-12T16:16:48.127

如果您使用 OCMOCK 并尝试模拟“自我”，您似乎会收到此警告。一旦我改变了这个，它就解决了我的问题。

# wcf - WCF 在 VS 中有效，但在 IIS 中无效

> ID：13258486
> 
> 赞同：0
> 
> 时间：2012-11-06T20:01:55.540
> 
> 标签：wcf, wcf-binding, wcf-client

有一个网络应用程序。它运行 2 个 wcf 服务，并且是另一个的客户端。一个 wcf 服务工作正常，另一个不能在开发服务器上工作，但在本地工作。错误是“响应消息的内容类型 text/html; charset=UTF-8 与绑定的内容类型不匹配”

Web 应用程序配置的 wcf 部分是

```
 <system.serviceModel>
<diagnostics>
  <messageLogging logMalformedMessages="true" logMessagesAtTransportLevel="true" />
</diagnostics>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
<services>
  <service name="company.eShopWorld.Wcf.eShopWorldWCFService" behaviorConfiguration="company.Web.Wcf.ServiceBehavior">
   <endpoint address="" binding="basicHttpBinding" contract="Nad.CheckoutVendor.Interfaces.ICheckoutVendorService" /> 
   <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
  </service>
    <service name="company.Mobile.Wcf.MobileService" behaviorConfiguration="company.Mobile.Wcf.ServiceBehavior" />
        <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
    </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="company.Web.Wcf.ServiceBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>

      <behavior name="company.Mobile.Wcf.ServiceBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
      </behavior>
  </serviceBehaviors>
</behaviors>
<bindings />
<client>
  <endpoint address="http://123.123.123.123:501/shipmentservice.svc" binding="basicHttpBinding" bindingConfiguration="" contract="Shipping.IShipmentWcfService" name="WSHttpBinding_IShipmentWcfService">
  </endpoint>
</client> 
```

配置的测试客户端 wcf 部分是

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_ICheckoutVendorService" closeTimeout="00:02:00"
                openTimeout="00:02:00" receiveTimeout="00:10:00" sendTimeout="00:02:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
            <binding name="BasicHttpBinding_ICheckoutVendorService1" closeTimeout="00:02:00"
                openTimeout="00:02:00" receiveTimeout="00:10:00" sendTimeout="00:02:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings>
    <client>
        <endpoint address="http://test.com:50128/eShopWorldService.svc"
            binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICheckoutVendorService1"
            contract="eShopWorldSvc.ICheckoutVendorService" name="BasicHttpBinding_ICheckoutVendorService" />
    </client> 
```

移动服务有效，所以我认为 iis 设置正确。如果我将 svc url 放在浏览器中，它会显示服务页面，如果我将 wsdl 添加到 url，则会显示 wsdl。

2 天来我一直在反对这个问题，但找不到问题。

非常感谢任何帮助

所以尝试 Dimitri 的建议，我的 web.config 现在看起来像这样

```
 <services>
        <service name="company.eShopWorld.Wcf.eShopWorldWCFService" behaviorConfiguration="company.Web.Wcf.EshopServiceBehavior">
            <endpoint address="/eShopWorldService.svc" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICheckoutVendorService" contract="Nad.CheckoutVendor.Interfaces.ICheckoutVendorService"/>
            <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
        </service>
        <service name="company.Mobile.Wcf.MobileService" behaviorConfiguration="company.Mobile.Wcf.ServiceBehavior" >
            <endpoint address="/MobileService.svc" binding="basicHttpBinding" contract="company.Mobile.Wcf.IMobileService" />
            <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
        </service>
    </services>
    <behaviors>
        <serviceBehaviors>
            <behavior name="company.Web.Wcf.EshopServiceBehavior">
                <serviceMetadata httpGetEnabled="true" />
                <serviceDebug includeExceptionDetailInFaults="true" />
            </behavior>

            <behavior name="company.Mobile.Wcf.ServiceBehavior">
                <serviceMetadata httpGetEnabled="true" />
                <serviceDebug includeExceptionDetailInFaults="true" />
            </behavior>
        </serviceBehaviors>
    </behaviors>
    <bindings>
        <basicHttpBinding>
            <binding name="BasicHttpBinding_ICheckoutVendorService" closeTimeout="00:02:00"
                openTimeout="00:02:00" receiveTimeout="00:10:00" sendTimeout="00:02:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
        </basicHttpBinding>
    </bindings> 
```

但我仍然有错误。请注意，我必须包含服务名称以防止出现 404 错误

每个服务都有自己的 web.config 以及 Web 应用程序的 web.config，这让我有些困惑。我假设它们在编译时会以某种方式卷入项目中，就好像它们中存在错误一样。还有其他想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:32:05.127

在您的 Web 应用程序（不是客户端）的配置中试试这个：

```
<system.serviceModel>
<diagnostics>
  <messageLogging logMalformedMessages="true" logMessagesAtTransportLevel="true" />
</diagnostics>
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" multipleSiteBindingsEnabled="true" />
<services>
  <service name="company.eShopWorld.Wcf.eShopWorldWCFService" behaviorConfiguration="company.Web.Wcf.ServiceBehavior">
   <endpoint address="" binding="basicHttpBinding" bindingConfiguration="BasicHttpBinding_ICheckoutVendorService" contract="Nad.CheckoutVendor.Interfaces.ICheckoutVendorService" /> 
   <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
  </service>
    <service name="company.Mobile.Wcf.MobileService" behaviorConfiguration="company.Mobile.Wcf.ServiceBehavior" />
        <endpoint contract="IMetadataExchange" binding="mexHttpBinding" address="mex" />
    </service>
</services>
<behaviors>
  <serviceBehaviors>
    <behavior name="company.Web.Wcf.ServiceBehavior">
      <serviceMetadata httpGetEnabled="true" />
      <serviceDebug includeExceptionDetailInFaults="true" />
    </behavior>

      <behavior name="company.Mobile.Wcf.ServiceBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
      </behavior>
  </serviceBehaviors>
</behaviors>
<bindings>
    <basicHttpBinding>
            <binding name="BasicHttpBinding_ICheckoutVendorService" closeTimeout="00:02:00"
                openTimeout="00:02:00" receiveTimeout="00:10:00" sendTimeout="00:02:00"
                allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
                useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="None">
                    <transport clientCredentialType="None" proxyCredentialType="None"
                        realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
    </basicHttpBinding>
</bindings>
<client>
  <endpoint address="http://123.123.123.123:501/shipmentservice.svc" binding="basicHttpBinding" bindingConfiguration="" contract="Shipping.IShipmentWcfService" name="WSHttpBinding_IShipmentWcfService">
  </endpoint>
</client> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:32:11.593

看起来您正在尝试使用相同的服务合同配置两个不同的服务。如果您真的想这样做，只需为同一服务中的不同端点定义不同的地址值，但这可能不是很有用。

如果移动服务公开了不同的合同，那么您确实需要两种不同的服务配置，每个合同一个。在这种情况下，克隆`company.eShopWorld.Wcf.eShopWorldWCFService`service 元素并更改`contract`属性以使 Mobile 服务具有正确的 .NET 命名空间和接口类型。您还需要为每个服务提供单独的 *.svc 文件。我相信这两个服务的默认地址是这样的：

```
http://HostName/service.svc

http://HostName/mobileservice.svc 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-29T20:48:25.810

所以问题原来是一个将服务名称转换为全小写的规则。它在 VS 调试中没有引起问题，但在 IIS 中出现了问题

# ms-access - 如何在表单中输入重复键的自定义消息？

> ID：13258494
> 
> 赞同：1
> 
> 时间：2012-11-06T20:02:06.987
> 
> 标签：ms-access

如何为重复键提供自定义消息？

在我的表的设计视图中，我打开了“索引”并且我选择了 YES(No Duplicates)，但是如果我尝试再次添加现有行（在我的表单中），我会收到默认的 Access 错误消息。我想用弹出消息框制作自己的错误消息。但我不知道怎么做。我试图制作一个宏，但我不知道如何定义如果行重复，那么你会收到一条错误消息

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:25:05.143

您可以使用表单错误事件：

```
Private Sub Form_Error (DataErr As Integer, Response As Integer)
  Const REQUIREDFIELD_VIOLATION = 3314
  Const INPUTMASK_VIOLATION = 2279
  Const DUPLICATEKEY_VIOLATION = 3022
  If DataErr = DUPLICATEKEY_VIOLATION Then
     MsgBox "There was a key violation!"
     Response = acDataErrContinue
  End If
End Sub 
```

# html - 文本过长时跨度不对齐

> ID：13258503
> 
> 赞同：1
> 
> 时间：2012-11-06T20:02:31.713
> 
> 标签：html, css, content-management-system, dotnetnuke

首先，有几个限制：

1.  我的 CSS 词汇量有限，所以我会很感激这方面的一些教育，并且
2.  我唯一能改变的是全局样式表。

我有一个称为面包屑的链接列表，如下所示：

![前](../Images/6ac1f3da72d4e550c0b0b40d42a09046.png)

除非您增加文本大小或子元素的数量，否则它看起来像这样：

![后](../Images/efc866c920f350d48c26287ce2452bb8.png)

当我按 F12 并查看 HTML 时，它看起来像这样：

```
<div id="Breadcrumb">
    <span id="dnn_dnnTEXT_lblText" class="Intro">You are here:</span>
    <span id="dnn_dnnBreadcrumb_lblBreadCrumb">
        <a class="SkinObject" href="https://www.c-ied.org/Projects.aspx">Projects</a>
        <span class="Sep"></span>
        <a class="SkinObject" href="https://www.c-ied.org/Projects/Capabilities.aspx">Capabilities</a>
        <span class="Sep"></span>
        <a class="SkinObject" href="https://www.c-ied.org/Projects/Capabilities/MaritimeInitiative.aspx">Maritime Initiative</a>
        <span class="Sep"></span>
        <a class="SkinObject" href="https://www.c-ied.org/Projects/Capabilities/MaritimeInitiative/MSC2012.aspx">MSC 2012</a>
        <span class="Sep"></span>
        <a class="SkinObject" href="https://www.c-ied.org/Projects/Capabilities/MaritimeInitiative/MSC2012/6June.aspx">6 June</a>
    </span>
</div> 
```

这是在 DotNetNuke CMS 中，所以我可以进入站点设置并弄乱样式表编辑器。我在那里尝试过的任何东西都没有任何效果，除了`#dnn_dnnBreadcrumb_lblBreadCrumb {width: 100%}`让它看起来更糟。

我还采用了上面的 HTML 并将其放在我在另一个模块中添加的一些文本简介之上。那里，看起来不错。再次返回 F12，TraceStyles 中唯一与 dnn_dnnBreadcrumb_lblBreadCrumb 跨度不同的行是一些被划掉的样式：

![F12 之后](../Images/eb93458ef4572e27fa61cfa3f0767dad.png)

而之前是：

![F12 之前](../Images/56780b5c94461045d07d9d94a92537b7.png)

所以，这一切都必须在 IE 中查看。我可以在某个选择器上使用 CSS 属性吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T23:00:12.640

虽然很讨厌，但您可以尝试在您的容器#Breadcrumb 上溢出：隐藏。虽然应该防止包装，但您可能会将长面包屑丢失到容器的隐藏部分。

另一种解决方案，测量每个面包屑项目的宽度，当它接近容器的边界时，截断内容，例如通过替换“你在这里”之间的中间项目，并用单个不可点击的内容说最后的两/三个项目省略号 (...) 项。例如：

```
 You Are Here: Projects > ... Msc 2012 > 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:12:35.457

看起来`font-size`面包屑的 已设置为特定的像素值。您可能还需要将 设置`line-height`为特定的像素值。

（虽然这并不理想。用户应该能够增加文本大小。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:33:43.120

如果不查看 DOM 的其余部分，真的很难知道，但似乎 #dnn_dnnBreadcrumb_lblBreadCrumb 只是被放大并且不再适合其容器元素 (#Breadcrumb)。因此它包装。

我首先尝试用这样的东西来破解它：

```
#Breadcrumb {
  white-space: nowrap;
  width: 100%;
} 
```

# jquery - jQuery 不显眼的表单验证器在重置表单时不会隐藏错误消息

> ID：13258504
> 
> 赞同：11
> 
> 时间：2012-11-06T20:02:34.303
> 
> 标签：jquery, asp.net-mvc, asp.net-mvc-3, validation

我正在尝试正确验证和重置表单。验证工作正常——成功监控了所需的字段。但是，当我去重置我的表单时——我只看到我的输入的红色背景清晰，而不是验证消息。

根据[jQuery 验证文档](http://docs.jquery.com/Plugins/Validation/Validator/resetForm)：

> 将输入字段重置为其原始值（需要表单插件），删除指示无效元素的类并**隐藏错误消息**。

这是我认为与该问题相关的所有信息。如果您还想看其他内容，请告诉我。

这是我在模型中生成 DOM 元素的方法。此元素需要验证：

```
//Model.ascx
<div class="detailsRow required">
    <%= Html.LabelFor(model => model.Site) %>
    <%= Html.DropDownListFor(model => model.SelectedSiteID, new SelectList(Model.Site, "Key", "Value"))%>
    <%= Html.ValidationMessageFor(model => model.SelectedSiteID)%>
</div>

//Model.cs
[DisplayName("Site")]
public List<KeyValuePair<int, string>> Site { get; set; }

[Range(0, int.MaxValue, ErrorMessage = "Site required")]
public int SelectedSiteID { get; set; } 
```

站点是一个选择列表，它以值 -1 开头。任何其他选择都是有效的。因此，我在从 0 到最大值的范围内进行验证。

在 JavaScript 中，当用户按下表单上的“提交”按钮时，我对我的表单运行以下代码：

```
var form = workflowDialogContent.find('form');
$.validator.unobtrusive.parse(form);
//Maintain a reference to the current formValidator to be able to reset.
var formValidator = $.data(form[0], 'validator');

if (form.valid()) {
} 
```

当用户按下提交时，表单会被验证，如果所选站点的值为 -1，则会显示我的验证消息。

现在，每当更改选择时，我都想重置我的表单。我从以下逻辑中获取了这个逻辑：[如何清除 Jquery 验证错误消息？](https://stackoverflow.com/questions/2086287/how-to-clear-jquery-validation-error-messages)

```
$(window).on('change', '#SelectedSiteID', function () {
    //Returns the formValidator we maintained a reference to.
    var validator = WorkflowDialogBuilder.getCurrentFormValidator();
    validator.resetForm();
    //TODO: resetForm's documentation says that it hides the errors, but I did not experience this, so I am doing it manually.
    //$('.field-validation-error').empty();
} 
```

但是，当我运行此代码时......突出显示被删除，但错误消息仍然存在。如果我调用注释代码位 - 验证错误被隐藏，但下次验证我的表单时它们不会重新出现。

验证 ![在此处输入图像描述](../Images/8663df372f26f62a9380918806055510.png) 后：调用resetForm后： ![在此处输入图像描述](../Images/178e0300d3eb275fa2ba51cfc3c08d19.png)

任何想法为什么我会看到这种行为？

**更新：**作为一种解决方法，以下代码似乎可以进行适当的清理：

```
$('.field-validation-error').empty(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-15T10:17:38.230

为什么不在字段更改后立即[触发元素验证](http://jqueryvalidation.org/Validator.element/)

```
$('#myFormId input').on('change', function(){
    validator.element($(this));
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T16:46:12.650

我认为您可以将其添加到您的解决方法中：

```
var form = $("#MyFormId");
form.find(':input').removeClass("input-validation-error"); 
```

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-09T13:15:19.700

到目前为止给出的答案的唯一问题是所有错误都消失了，而不仅仅是您想要的错误。我在获取地址时遇到了类似的问题，如果状态是 DC，我需要输入象限（NW，NE，SW，SE）。我使用 jquery 添加和删除要求，然后将 @Html.ValidationMessageFor() 包装在 div 中，然后在选择不同状态时简单地隐藏 div。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-04-14T11:24:28.980

你在下面使用，对吗？

```
var form = workflowDialogContent.find('form'); 
```

那么你必须使用

```
form.resetForm(); 
```

重置表格，它将起作用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-11-05T08:11:48.723

尝试这个。

```
var validator = $( "#myform" ).validate();
validator.resetForm(); 
```

# string - matlab如何将单元格转为字符串

> ID：13258508
> 
> 赞同：18
> 
> 时间：2012-11-06T20:03:19.487
> 
> 标签：string, matlab, cell

假设我有一个细胞

```
v =    'v'    [576.5818]    [3.0286]    [576.9270]

       'v'    [576.5953]    [3.1180]    [576.8716]

       'f'    [      56]    [    58]    [      52]

       'f'    [      56]    [    58]    [      52] 
```

我想使用每个元素的格式字符串将其转换为元胞数组：`' %.5f'`

我怎样才能做到这一点？我尝试了以下方法，但出现错误：

```
f1 = @(x) sprintf('   %.5f',x);
cellfun(f1, num2cell(v),'UniformOutput', false) 
```

我收到一个错误？？？

> `Error using ==> sprintf`
> 
> `Function is not defined for 'cell' inputs.`
> 
> `Error in ==> @(x)sprintf(' %.5f',x)`

任何人都可以帮助我提前谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-18T22:41:45.173

# 字符串是一个元胞数组

好吧，不是真的.. 这是一个矩阵，但继续阅读。

我猜单元格数组是 MATLAB 中最神秘的数据类型。所以让我们稍微**揭开它的神秘面纱;-)**

认为

```
fruits = {...
    'banana',...
    'apple',...
    'orange'...
} 
```

首先，小型数组不需要整数索引。**使用类似 foreach**的结构要好得多。的确，

```
for index = 1:numel(fruits)
    fruits{index}
end 
```

相当于

```
for fruit = fruits
    fruit
end 
```

正确的？

嗯，不完全是。第一个循环产生字符串，而第二个循环产生单元格。你可以检查它

```
for index = 1:numel(fruits)
    [isstr(fruits{index}) iscell(fruits{index})]
end

for fruit = fruits
    [isstr(fruit) iscell(fruit)]
end 
```

，即**[1 0]**和**[0 1]**。

如果您发现了差异，那么您必须知道如何处理下一个示例（在这个示例中确实与您的问题有关**（！）**我保证！）。假设您尝试在循环中进行水平连接：

```
for fruit = fruits
    [fruit 'is a fruit']
end 
```

你会得到

```
ans = 

    'banana'    'is a fruit' 
```

等等。为什么？显然，此代码尝试将嵌套单元格数组连接到字符串（包含字符矩阵的单元格数组，这些字符构成字符串，如“香蕉”）。所以，正确答案是

# 利用 {：}

```
for fruit = fruits
    [fruit{:} 'is a fruit']
end 
```

神奇的是，这已经产生了预期*的“香蕉是水果”*、*“苹果是水果”*等。

# 提示

一些提示：

*   无索引循环与结构很好地配合，如`for fruit = [fieldnames][1](fruits)'`
*   以上对于开源**八度都是***正确的*
***   香蕉不仅是水果，在分类学上它也是一种草本植物 ;-) 就像 MATLAB 中的 'banana' 既是字符串又是矩阵，即 assert(isstr('banana') && ismat('banana')) 通过，但是断言（iscell（'banana'））失败。*   `{:}`相当于`cell2mat`**

 **# 附言

您的问题的解决方案可能如下所示：

给定

```
vcell = {...
    'v'    576.5818    3.0286  576.9270;
    'v'    576.5818    3.0286  576.9270    
} 
```

将仅按索引的数字类型转换为字符串

```
 vcell(cellfun(@isnumeric, vcell)) =  cellfun(@(x) sprintf('%.5f', x), vcell(cellfun(@isnumeric, vcell)), 'UniformOutput', false) 
```

以上代码输出

vcell =

```
'v'    '576.58180'    '3.02860'    '576.92700'
'v'    '576.58180'    '3.02860'    '576.92700' 
```

可以串联。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-21T01:23:05.467

假设我们有一个单元格如下：

```
my_cell = {'Hello World'}  
class(my_cell)
ans = 
cell 
```

我们可以简单地通过直接在其上使用运算符来从中取出字符串`{:}`。

```
 class(my_cell{:})
    ans =
    char 
```

请注意，我们可以在`mycell{:}`使用普通字符串的任何地方使用表达式。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-30T15:17:02.497

尝试这个：

```
sprintf('   %.5f',x{:}) 
```

（根据一些[谷歌结果](https://www.google.be/search?q=matlab%20sprintf%20cell)工作。）

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-02T07:48:29.600

通过查看 strjoin.m 文件，我发现了这一点：

```
string = [x{:}]; 
```**

# vim - 在 vim 中重新映射 Ctrl-D

> ID：13258517
> 
> 赞同：4
> 
> 时间：2012-11-06T20:04:09.597
> 
> 标签：vim

我想重新映射另一个键组合，比如`CTRL`- `G`，以起到`CTRL`-的`D`作用（注意：与`S`- `Down`/ `PageDown`/ `CTRL`-不同`F`）。

到目前为止，我所拥有的是：

```
nmap ^G :exe 'normal '.&scroll.'^E<CR>' 
```

调出我的 vim 命令模式并输入它，它工作得很好。但是，当我保存我的 .vimrc 并重新加载 vim 时，推送`CTRL`-时出现以下错误`G`：

```
E114: Missing quote: '
E15: Invalid expression: 'normal '.&scroll.' 
```

它似乎被困在不适当地评估 ^E 上。但是，我在使用或任何其他方式指定`CTRL`-时完全不成功`E`。我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T20:29:23.927

`^G`和`^E`是特殊字符，将它们放在 . 中时效果不佳`.vimrc`。您需要使用`<C-g>`and `<C-e>`，但由于您的 Ctrl+E 放置在字符串中，因此您需要对其进行转义并写入`\<C-e>`. 您还需要使用双引号而不是单引号 - 否则您无法进行转义。

在其他注意事项中 - 您可能应该使用`nnoremap`而不是`nmap`，因此如果您在`<C-e>`其他地方重新映射，`<C-g>`仍然会像原来的`<C-e>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T20:08:13.140

我认为你可以只`<C-E>`写`CTRL`- `E`。

# javascript - 如何从中删除错误消息 在win8应用程序中？(html/js)

> ID：13258520
> 
> 赞同：2
> 
> 时间：2012-11-06T20:04:17.633
> 
> 标签：javascript, html, video, windows-8

如何在 win8 应用程序的视频元素中禁用左下错误消息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T23:58:57.853

我认为你需要提供更多关于你到底想要做什么的信息？截至目前，我认为提供正确的视频源将有助于消除错误消息。

```
<video id="video" width="320" height="240" controls="controls">
        <source src="Videos/abc.mp4" type="video/mp4" />    
</video> 
```

其中 Videos 是项目包中的文件夹，abc.mp4 是 Videos 文件夹中的视频文件。希望这可以帮助 ：）

# javascript - JavaScript 按钮单击以更改变量

> ID：13258525
> 
> 赞同：-1
> 
> 时间：2012-11-06T20:04:32.047
> 
> 标签：javascript

大家好，我正在做一个复杂的统计项目，其中显示了几个数字，并且想要更改他们计算的小数位数。我想这样做，以便页面的查看者可以通过单击增加或减少按钮来更改此数字。但现在我知道如何更改它的唯一方法是通过代码本身，即开头的“dec”变量。在这里，我将其设置为 2 个位置，但我怎样才能使它通过按钮更改值？谢谢！

```
<input type="button" onclick="increase()" value="Increase"/>
<input type="button" onclick="decrease()" value="Decrease"/>
<br/><table border="1"><tr>
<script type="text/javascript">
dec=2;
for(n=1;n<=9;n++)
{
    document.write("<td>");
    for(t=0;t<=45;t++)
    {
        if(t<n)
        result=0;
        else
        result=fixed(((combin(t,n)*fact(n)*fact(45-n)/fact(45))*100),dec);
        document.write(result);
        zero(result,dec);
        document.write("%<br/>");
    }
    document.write("</td>");
}
function increase()
{
    ???
}
function decrease()
{
    ???
}
function fact(num)
{
    result=1;
    for(cnt=num;cnt>0;cnt--)
    result*=cnt;
    return result;
}
function combin(n,r)
{
    result=fact(n)/(fact(r)*fact(n-r));
    return result;
}
function fixed(num,d)
{
    result=Math.round(num*Math.pow(10,d))/Math.pow(10,d);
    return result;
}
function zero(num,dec)
{
    if(dec!=0&&num-Math.floor(num)==0)
    document.write(".");
    for(cnt=dec;cnt>0;cnt--)
    {
        test=num*Math.pow(10,cnt)
        if(test%10==0)
        document.write("0");
    }
}
</script></tr></table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:13:12.407

我会将 for 循环包装在一个以 dec 作为参数的函数中，然后监听按钮单击事件。

`<button onclick="increase()" text="Increase"></button>`

和增加功能将是这样的：

```
function increase(){
  calculate(++dec)
} 
```

希望这可以帮助！

# java - 从 Java 应用程序中动态加载和运行 Java 代码

> ID：13258526
> 
> 赞同：2
> 
> 时间：2012-11-06T20:04:42.050
> 
> 标签：java

我正在考虑编写一个 Java 应用程序，用户可以在其中编写一些 Java 模块并将它们添加到该应用程序的库中。这些模块将是一些使用来自主应用程序的数据的计算。可能有点像 Office 中的 VBA。
如果有人能给我一些从哪里开始的提示，我将不胜感激，因为我在网上找不到有用的东西。
提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:06:59.003

如果您愿意，可以尝试从头开始开发模块框架。但是，如果您正在开发任何严肃的东西，您应该考虑使用 OSGi。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:13:39.543

理论上是可以的。您可以允许用户编写 java 类，然后您可以使用 java 编译器编译该类，生成`.class`文件。您可以使用自定义类加载器（可能`URLClassLoader`或其子类等）加载它们。

但这是非常严肃的应用。实际上它是一种IDE。所以，你们真的希望这个检查一下创建基于 Eclipse 的应用程序的可能性，即实现几个 Eclipse 插件。

其他方法可能是允许用户使用一种流行的脚本语言编写代码。例如，groovy 具有类似 java 的语法，但无需编译即可运行，并且不需要创建类等。Javascript 也是一种选择。Javascript 解释器是 JDK 的一部分，所以你甚至不需要外部依赖。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T22:50:56.507

你可能会更好地结合某种形式的 jvm 脚本语言。像 groovy、jruby 或 jython 之类的东西。这些不需要实际编译，可以作为源存储在您的系统中。另外，它们也可以很好地编写代码。Groovy 具有成为 java 超集的优势。（在大多数情况下）您可以降级为 java 代码，并在 groovy 解释器中运行它。

# django-testing - 在 Django 中组织 Selenium 测试

> ID：13258529
> 
> 赞同：0
> 
> 时间：2012-11-06T20:04:50.120
> 
> 标签：django-testing

我正在尝试在 Django 项目中更好地组织我的硒测试。

我有一个文件夹`project/app/selenium_tests/`，我在其中放置了一个`__init__.py`, 和一个`tests.py`包含我的硒测试的文件夹。在`__init__.py`我像这样导入测试：

```
from tests import * 
```

但是当我这样做时，`./manage.py test app.selenium_tests`我得到：

```
ValueError: Test label 'app.selenium_tests' does not refer to a test 
```

我在这里能错过什么？我什至在 selenium_test 包中添加了一个models.py，但没有任何乐趣。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-06T23:30:29.997

需要把文件夹放到app`selenium_tests`的`tests`目录下，否则默认的Django test runner是找不到的。

所以，把它`project/app/selenium_tests/`移到`project/app/tests/selenium_tests/`

# android - 标准时间与军事时间

> ID：13258531
> 
> 赞同：1
> 
> 时间：2012-11-06T20:04:57.767
> 
> 标签：android

我试图以晚上 7:45 而不是 19:45 的格式显示当前时间，但我似乎找不到正确的格式选项。

```
Time cTime= new Time(Time.getCurrentTimezone());
cTime.setToNow();
clock.setText(cTime.format("%H:%M")); 
```

这似乎显示了军事

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:15:23.893

`SimpleDateFormat`与- 一起使用，`a`表示上午/下午标记。

例子：

```
Calendar cal = Calendar.getInstance();

SimpleDateFormat dateFormat = new SimpleDateFormat("h:mmaa"); 

try {                   
    String now = dateFormat.format(cal.getTime());

} catch (ParseException e) {
    e.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:15:43.270

您正在使用[`Time.format()`](http://developer.android.com/reference/android/text/format/Time.html#format%28java.lang.String%29)，因此您可以参考[C++`strftime`文档](http://www.cplusplus.com/reference/clibrary/ctime/strftime/)以了解格式化规则。您的格式字符串应`%I:%M%P`为 12 小时时间。

# html - 表单 div 上的 Css 定位无法正常工作

> ID：13258536
> 
> 赞同：0
> 
> 时间：2012-11-06T20:05:06.093
> 
> 标签：html, css

嗨，我正在尝试在我的表单中放置一个名为 label 的 div，它位于输入表单旁边，它适用于表单中的第一个选择框。但是，对于后续输入框或选择框，它的位置似乎并不相同，而是似乎将标签 div 居中。

此外，名为 context 的 div 应该出现在输入框/选择框的右侧，但没有正确定位。我使用了格式化表单的样式，过去它运行良好，但在这里效果不佳。

要点....您需要在 jsfiddle 中重新调整 html 屏幕才能看到我遇到的问题。

**[JsFiddle 示例](http://jsfiddle.net/mgvLk/)**

有没有人有这个问题的解决方案。欢迎任何帮助！

插入.php

```
 <div id="contactform"> <!-- Contact Form Div -->
    <div id="formWrap">
    <div id="form">
    <form action="insert.php" method="post" name="insert" id="comments_form">
    <div class="row">
    <div class="label">No. of Bedroms</div>
    <div class="input"> 
            <select name="bedrooms" id="bedrooms" class="detail">

                </div> <!-- end input -->
                 <div class="context"> e.g. John Smith </div> <!-- end context -->
                </div> <!-- end .row -->
            </select> 
    <div class="row">
    <div class="label">Description</div>
    <div class="input">            
            <textarea name="description" name="description" id="description" class="detail"></textarea>
                 </div> <!-- end input -->
                 <div class="context"> e.g. 3 Bedroom house in London close to University bus stops. </div> <!-- end context -->
                </div> <!-- end .row -->      
    <div class="row">
    <div class="label">Road Name</div>
    <div class="input">        
            <input type="input" name="roadname" id="roadname" class="detail"/>
                 </div> <!-- end input -->
                 <div class="context"> e.g. New Road </div> <!-- end context -->
                </div> <!-- end .row -->                      
            <input type="submit" id="submit" name="submit" value="Submit Message" />
                    <div class="subimt"> </div> <!-- end submit -->                
        </form>
 </div> <!-- end form -->
 </div> <!-- end form wrapper -->​ 
```

样式.css

```
/*    ---------------------------------------------------------------------    * 
 *    Contact Form Styling 
 *    ---------------------------------------------------------------------    */

#formWrap {
background-color:#232527;
width:85%;
margin:0px 0px 0px 100px;
color:#FFF;    
padding: 16px 10px 40px;
}

#formWrap #form {
border-top:1px solid #EEE;
width:100%;

}

#form .row {
border-bottom:1px solid dotted #EEE;
display:block;
line-height: 38px;
overflow:auto;
padding: 24px 0px;
width: 100%;
}

#form .row .label {
font-size:16px;
font-weight:bold;
font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;
width:180px;
text-align:right;
float:left;
padding-right:10px;
margin-right:10px;
}

#form .row .input {
float:left;
margin-right:10px;
/*width:auto;*/
width:285px;
}

#form .row .input2 {
float:left;
margin-right:10px;
/*width:auto;*/
width:466px;
}

#form .row .context {
color:#FFF;
font-size:11px;
font-style:italic;
line-height:14px;
font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;
width:200px;
float:left;
}

.detail {
width:260px;
font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;
font-size:20px;
padding:7px 8px;
margin:0px;
display:block;
border-radius:5px 5px 5px 5px;
background:#E9E9E9;
border:1px solid #CCC;
}

.detail:focus {
background:#FFF;
border:1px solid #999;
outline:none;    
}

.mess:focus {
background:#FFF;
border:1px solid #999;
outline:none;    
}    

.mess {
width:450px;
max-width:450px;
height:280px;    
overflow:auto;
font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;
font-size:20px;
padding:7px 8px;
line-height: 1em;
margin:0;
display:block;
border-radius:5px 5px 5px 5px;
background:#E9E9E9;
border:1px solid #CCC;

}

#form #submit{ 
font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;
margin-top:-10px;
margin-left:200px;
cursor: pointer;
  background: #ffffff; 
color: #232527;
border-radius: 24px;
display: inline-block;
font-size: 14px;
font-weight: bold;
padding: 8px 32px;
-webkit-transition: background .1s linear;
-moz-transition: background .1s linear;
-o-transition: background .1s linear;
-ms-transition: background .1s linear;
transition: background .1s linear;
text-decoration: none;
border:none;    
}

#form #submit:hover{
    color:#5eb9f9;

}

span.error {
display:block;
font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;
background-image:url(../images/x.png);
background-repeat:no-repeat;
background-postion:left 6px;
padding-left:25px;
font-size:11px;
}

#formWrap h2 {
font-family:"Helvetica Neue", Helvetica, Arial, sans-serif;
text=shadow: 1px 1px 1px #CCC;
color:#FFF;
font-weight:bold;
font-size:30px;
margin-left:25px;    
} 
```

​</p>

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:25:38.983

你的结束`</select>`标签来晚了。如果它在打开之后直接移动`<select ...>`（因此不再包含`div`标签），它似乎可以工作。

# c# - 我想播放我存储在我的 Windows 8 应用程序的资产文件夹中的歌曲我如何设置该歌曲按钮的来源？

> ID：13258539
> 
> 赞同：1
> 
> 时间：2012-11-06T20:05:15.033
> 
> 标签：c#

xml.cs

```
void playButton_Click(object sender, RoutedEventArgs e) 
{
    this.mediaplayer.Source = new Uri("Assets/heydude.mp3", UriKind.Relative);
    this.mediaplayer.Play();
} 
```

# ios - 从 NSMutableArray 中删除所有匹配条件的对象

> ID：13258541
> 
> 赞同：0
> 
> 时间：2012-11-06T20:05:21.447
> 
> 标签：ios, arrays, nsmutablearray

> **可能重复：**
> [迭代时从 NSMutableArray 中删除的最佳方法？](https://stackoverflow.com/questions/111866/best-way-to-remove-from-nsmutablearray-while-iterating)

模组：我意识到这是[这个问题](https://stackoverflow.com/questions/111866/best-way-to-remove-from-nsmutablearray-while-iterating/129942#129942)的重复，你能关闭/删除它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T20:22:57.437

如果您不想创建临时或新数组，可以使用：

```
NSMutableArray *array = ...; // your mutable array

NSIndexSet *toBeRemoved = [array indexesOfObjectsPassingTest:^BOOL(id obj, NSUInteger idx, BOOL *stop) {
    // The block is called for each object in the array.
    BOOL removeIt = ...; // YES if the element should be removed and NO otherwise
    return removeIt;
}];
[array removeObjectsAtIndexes:toBeRemoved]; 
```

（但使用了一个临时`NSIndexSet`的。）

**备注：**我的想法是，像 Richard J. Ross III 所建议的那样，“一次”删除所有匹配元素而不是在迭代期间单独删除每个元素可能更有效。

但一个简短的测试表明情况并非如此。在我的计算机上使用这两种方法从具有 1000000 个元素的数组中删除每个第二个元素所花费的时间几乎相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T20:16:40.203

您可以使用 NSPredicate 来执行此操作，请参阅此 SO question and answer。

[https://stackoverflow.com/a/129942/36984](https://stackoverflow.com/a/129942/36984)

苹果文档为此：

[https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableArray/filterUsingPredicate](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSMutableArray_Class/Reference/Reference.html#//apple_ref/occ/instm/NSMutableArray/filterUsingPredicate)：

# web-config - MVC4 自定义 404 页面？

> ID：13258549
> 
> 赞同：5
> 
> 时间：2012-11-06T20:05:46.470
> 
> 标签：web-config, asp.net-mvc-4, http-status-code-404

我已经把它放在 web.config`<system.webServer>`

```
<httpErrors errorMode="Custom" defaultResponseMode="ExecuteURL">
    <remove statusCode="404" subStatusCode="-1" />
    <error statusCode="404" subStatusCode="-1" path="/cv/" responseMode="ExecuteURL" />
</httpErrors> 
```

此处暂时使用的路径 [myapplication]/cv/ 返回一个页面。

但是，如果我去 [myapplication]/[anything that doesn't exist] 得到 404 响应，那么什么都不会发生。

这目前正在我的旧 Web 表单站点上运行，但我无法在 MVC4 站点上运行。我怎样才能使这项工作？（我不想使用“重定向/文件”方法）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-07T19:45:19.600

这是我在当前 MVC 4 项目中所拥有的：

```
<customErrors mode="On" defaultRedirect="~/Error/General">
   <error statusCode="404" redirect="~/Error/Http404" />
</customErrors> 
```

我有一个错误控制器，以及“常规”和“Http404”（操作方法）的视图。

奇迹般有效。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-11T07:27:59.443

部分问题也可能源于`<customErrors>`标签不是`<system.webServer>`. 试着把它`<system.web>`放进去。

# javascript - 两种形式，一个提交按钮，一个 iframe

> ID：13258551
> 
> 赞同：0
> 
> 时间：2012-11-06T20:05:50.673
> 
> 标签：javascript, forms, submit

我有一个包含两个字段的 iframe 和一个包含多个字段的表单。我想要做的是当用户单击非 iframe 表单上的提交时单击 iframe 上的“提交”，以便提交第一个表单，然后提交第二个表单。这可能吗？谢谢

```
--- IFRAME ---
[Input 1]
[Input 2]
[Hidden Submit]
--- IFRAME ---

[Input 3]
[Input 4]
[Submit] <-- user is gonna click this, then iframe form and this form gets submitted 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:22:50.567

是的，这是可能的。

```
<iframe name="myframe" onload="submitForm()"></frame>

<form action="" method="post" onsubmit="return subIframe()" id="form1">
<input type="text" name="input1" value=""/>
<input type="text" name="input2" value=""/>
<input type="submit" value="submit">
</form>

<script>
var flag=1;
/*submit the iframe form fist*/
function subIframe(){
    /*submit the form in iframe here*/
    if(flat==1){
       myframe.document.getElementById("myform").submit();
       flat=0;
       return false;
    }else{
       return true;
    }

}

/*after the iframe form been submited, submit the form in the current page*/
function submitForm(){
 document.getElementById("form1").submit();
}
</script> 
```

# python - 将“未知格式”字符串转换为日期时间对象？

> ID：13258554
> 
> 赞同：27
> 
> 时间：2012-11-06T20:05:55.700
> 
> 标签：python, date, date-conversion

这可能是一个非常基本的问题，但在阅读文档后我仍然无法弄清楚如何去做......

我在 Python 中有两个字符串，其中包含*未知格式*的日期。我不知道它们采用什么格式，但我知道它们都是有效的日期时间表达式。例如，其中一个可能是 ISO 格式，另一个可能是其他格式。

我所需要的只是能够比较日期。将字符串转换为适当的日期时间对象以便进行比较的正确方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-06T20:07:49.427

dateutil[模块](http://niemeyer.net/python-dateutil#head-a23e8ae0a661d77b89dfb3476f85b26f0b30349c)有一个日期解析器，可以解析多种格式的日期字符串。

例如，

```
In [13]: import dateutil.parser as parser

In [14]: parser.parse("19970902T090000")
Out[14]: datetime.datetime(1997, 9, 2, 9, 0)

In [15]: import datetime as dt

In [16]: now = dt.datetime.now()

In [17]: now.isoformat()
Out[18]: '2012-11-06T15:08:51.393631'

In [19]: parser.parse('2012-11-06T15:08:51.393631')
Out[19]: datetime.datetime(2012, 11, 6, 15, 8, 51, 393631)

In [20]: parser.parse('November 6, 2012')
Out[20]: datetime.datetime(2012, 11, 6, 0, 0) 
```

请注意，某些日期时间字符串可能不明确：`10-09-2003`例如，可能表示 10 月 9 日或 9 月 10 日。`dateutil`有参数`dayfirst`和`yearfirst`处理这个：

```
In [21]: parser.parse("10-09-2003")
Out[21]: datetime.datetime(2003, 10, 9, 0, 0)

In [22]: parser.parse("10-09-2003", dayfirst = True)
Out[22]: datetime.datetime(2003, 9, 10, 0, 0)

In [23]: parser.parse("10-09-03", yearfirst = True)
Out[23]: datetime.datetime(2010, 9, 3, 0, 0) 
```

# facebook-graph-api - FQL 如何检索已删除的帖子？

> ID：13258558
> 
> 赞同：1
> 
> 时间：2012-11-06T20:06:09.587
> 
> 标签：facebook-graph-api

我正在徘徊在检索已删除的帖子或隐藏的帖子和评论时使用什么 Facebook 查询语言 (fql) 查询。

我做了很多搜索但没有成功

# vb.net - 如何在 VB.net 中使用 CInt 和 Split 从列表中删除项目

> ID：13258562
> 
> 赞同：0
> 
> 时间：2012-11-06T20:06:23.207
> 
> 标签：vb.net, string, list, split, int

我想从列表和数据库中删除一个项目。这是我使用的代码：

```
Dim nr As Integer
        Dim s As String
        s = lstPatiënten.ToString
        nr = CInt(s.Split("-"c)(0))
        For Each d In patienten
            If d.nr = nr Then
                If patientenDB.PatientVerwijderen(d) > 0 Then
                    initGetPatienten()
                End If
            End If
        Next 
```

但它不起作用..错误是：

> 从字符串“System.Windows.Forms.ListBox, It”到类型“Integer”的转换无效。

但是当我输入 Nr = 83 （83 是我的患者的用户 ID）时，它起作用了。

有人能帮帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:09:48.357

您需要更改`s = lstPatiënten.ToString`为`s = lstPatiënten.SelectedItem.ToString`. 试一试，让我知道它是否有效。

[Listbox.SelectedItem](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.selecteditem.aspx)

# castle-windsor - 我必须用 Castle Windsor 解决 ILogger 吗？

> ID：13258564
> 
> 赞同：3
> 
> 时间：2012-11-06T20:06:29.350
> 
> 标签：castle-windsor, log4net, ioc-container

[所有这些代码都是我自己的库，供我的客户端消费者应用程序使用我的安装程序与此处](http://docs.castleproject.org/Windsor.Windsor-Tutorial-Part-Five-Adding-logging-support.ashx)找到的文档中的安装程序完全相同。[我也有一个与在这里](http://docs.castleproject.org/Windsor.Installers.ashx)找到的几乎相同的引导程序，除了我使用：`_bootStrapContainer = new WindsorContainer().Install(FromAssembly.Named("MyAssembly"));`

我以为安装程序会将其注入`Castle.Core.Logging.ILogger`到下面的`MyLogger`类中，但我总是得到空记录器，除非我解决了`MyLogger.Logger`这样的问题：

```
MyLogger lgr = new MyLogger();            
lgr.Logger = container.Resolve<ILogger>(); 
```

所以我的问题是我是否总是必须解决或者我在注册期间没有做正确的事情？

```
using Castle.Core.Logging;

public class MyLogger
{
   private ILogger _logger = NullLogger.Instance;

   public ILogger Logger
   {
       get
       {
           return _logger;
       }
       set
       {
           _logger = value;
       }
    } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T04:28:58.147

您需要注册 Windsor 日志记录工具，以使 Windsor 能够为您解析 Logger 属性。

[这是使用xml](http://mikehadlow.blogspot.com/2008/06/more-windsor-love-using-log4net.html)和使用[代码](http://docs.castleproject.org/Default.aspx?Page=Windsor-Tutorial-Part-Five-Adding-logging-support&NS=Windsor&AspxAutoDetectCookieSupport=1)设置日志记录工具的示例

基本上可以归结为：

```
container.AddFacility<LoggingFacility>(f => f.UseLog4Net()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-09T07:50:13.557

也许它不起作用，因为它已经有一个值，在不初始化字段的情况下重试，将它移到属性的 get

# xdebug - 无法在 Apache conf 中设置 xdebug.idekey

> ID：13258571
> 
> 赞同：0
> 
> 时间：2012-11-06T20:06:52.760
> 
> 标签：xdebug, sublimetext2

在尝试配置我的 Sublime Text 2 IDE 以使用 Xdebug 时，我注意到在 phpinfo() 中 xdebug.idekey 值设置为“root”。我尝试了很多方法来改变这一点并到处搜索。根据 Xdebug 文档，如果没有隐式设置，它将首先使用 DBGP_IDEKEY、USER 和 USERNAME 环境变量（按此顺序）并使用首先找到的值集。在我的开发环境中，USER 是“ROOT”值的赢家。尽管如此，当我在我的 vhost conf 文件中设置 DBGP_IDEKEY（并对其进行验证）时，xdebug.idekey 仍然是“root”。

这还能从哪里来，或者我该如何绕过它。ST2 正在寻找 idekey 为 sublime.xdebug，所以我必须以某种方式得到这个集合才能让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T13:41:15.737

使用它的最佳方法可能是使用浏览器扩展之一来启用/禁用 Xdebug：http: [//xdebug.org/docs/remote#browser-extensions——](http://xdebug.org/docs/remote#browser-extensions)所有这些都允许您设置 idekey。或者，您可以指定为 GET 参数：XDEBUG_SESSION_START=submlime.xdebug

不过需要注意的是，Sublime Text必须要求特定的 IDEKEY是*不正确的。*它们的目的是让不同的用户可以在同一台机器上进行调试。因为这个原因，一个好的 IDE 不应该关心设置了哪个 IDEKEY。另见：http: [//xdebug.org/docs-dbgp.php#connection-initialization](http://xdebug.org/docs-dbgp.php#connection-initialization)

# javascript - Cordova/Phonegap 消息框

> ID：13258580
> 
> 赞同：0
> 
> 时间：2012-11-06T20:07:30.630
> 
> 标签：javascript, cordova

我将以下[插件](https://github.com/mgcrea/cordova-messagebox)与 Cordova/Phonegap 一起使用

我可以使用它弹出一个提示窗口，但我在使用用户输入的值时遇到了困难。我有以下创建提示的代码 -

```
window.plugins.messageBox.prompt({title: 'Title', message: 'Message'}, function(button, value){
    console.log(button, value)
}); 
```

这完美地工作，并将输入的值输出到控制台。当我尝试传递`value`给另一个函数时，我收到以下错误 -

```
Error in success callback: MessageBox2 = TypeError: 'undefined' is not an object 
```

无论如何，可以看到我哪里出错了吗？

这就是我试图将值发送到函数的方式 -

```
window.plugins.messageBox.prompt({title: 'Title', message: 'Message'}, function(button, value){
      outPutValue(button, value);
});

function outPutValue(button, value){
      alert(value);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T12:09:45.460

问题似乎是包含旧版本的 MessageBox.js.... 我已将其更新为在 github 上的示例文件夹中找到的版本，问题已经消失。

# r - 给定一个向量，返回大小为 n 的所有组合的列表

> ID：13258586
> 
> 赞同：3
> 
> 时间：2012-11-06T20:08:07.323
> 
> 标签：r, combinations

我正在尝试在R中编写一个函数，给定一个向量和最大大小n，它将返回该向量中元素的所有组合，最大大小为n。

例如：

```
multi_combn(LETTERS[1:3], 2) 
```

会产生：

```
[[1]]
[1] "A"

[[2]]
[1] "B"

[[3]]
[1] "C"

[[4]]
[1] "A" "B"

[[5]]
[1] "A" "C"

[[6]]
[1] "B" "C" 
```

我已经找到了一种不优雅的方式来运行`combn`每个大小到 n 的大小，但我似乎无法将结果合并到一个列表中。有什么建议么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T20:19:14.223

试试这个：

```
multi_combn <- function(dat, n) {
    unlist(lapply(1:n, function(x) combn(dat, x, simplify=F)), recursive=F)
} 
```

返回

```
> multi_combn(LETTERS[1:3], 2)
[[1]]
[1] "A"

[[2]]
[1] "B"

[[3]]
[1] "C"

[[4]]
[1] "A" "B"

[[5]]
[1] "A" "C"

[[6]]
[1] "B" "C" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T20:59:49.047

只是为了好玩，这里有几个完全不同的方法：

**备选方案 1：**

```
multi_combn <- function(X) {
    ii <- do.call(expand.grid, 
                  replicate(length(X), c(FALSE, TRUE), simplify=FALSE))[-1,]
    apply(ii, 1, function(i) X[i])
}
multi_combn(LETTERS[1:3]) 
```

**备选方案 2：（**我通常不喜欢混淆代码，但这个函数是个例外。）

```
multi_combn <- function(X) {
    sapply(seq_len(2^(length(X)) - 1), 
           FUN = function(n) {
               X[as.logical(rawToBits(as.raw(n)))]
           })
}    
multi_combn(LETTERS[1:3]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T20:13:15.477

与您想要的输出格式不完全相同，但可能足够接近？

```
multi_combn <- function(dat, n) {
    lapply(seq_len(n), function(x) t(combn(dat, x))) 
}

> dat <- LETTERS[1:3]
> multi_combn(dat,3)
[[1]]
     [,1]
[1,] "A" 
[2,] "B" 
[3,] "C" 

[[2]]
     [,1] [,2]
[1,] "A"  "B" 
[2,] "A"  "C" 
[3,] "B"  "C" 

[[3]]
     [,1] [,2] [,3]
[1,] "A"  "B"  "C" 
```

# objective-c - 如何防止 webView 从搜索字段中获得焦点。Objc-C，可可

> ID：13258587
> 
> 赞同：2
> 
> 时间：2012-11-06T20:08:08.523
> 
> 标签：objective-c, cocoa, webview, focus

我有一个具有 webView 的应用程序。它有一个包含搜索字段的工具栏。此搜索字段会在您键入时自动搜索。（在这种情况下，它搜索维基百科）。但是，如果您输入维基百科不知道的内容。维基百科将带您进入“高级搜索”页面。

但是，此页面会自动从我的搜索字段中集中注意力。从而打乱用户的打字。如何使我的 webView 永远不会集中注意力？这是在 Cocoa 上，而不是 Cocoa Touch。

# javascript - 从数组中提取背景图像

> ID：13258592
> 
> 赞同：-1
> 
> 时间：2012-11-06T20:08:24.600
> 
> 标签：javascript, arrays, background-image

这是一个真正的“菜鸟”问题，但我正在努力使用 javascript。我希望背景图像在一周中的每一天都发生变化。我想我已经正确实现了日期功能。对于放置在数组中的 7 个图像中的每一个，我都有一个完整的 URL。我有一个通过正文中的按钮起作用的功能。我想我错误地调用了数组元素以将它们传递给 changeImage 函数。如果我用完整的 URL 替换数组引用 (piclnk[wkdy])，它就可以工作。当然，我希望它每天都在变化。可能是一个简单的答案，但我还没有找到它。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Strict//EN">

<head>
<script type="text/javascript">

function changeImage(newImage)
{
 elem = document.getElementById("mainpage");
 elem.style.backgroundImage = newImage;
}
</script>

</head>
<body id="mainpage" style="background-color:aqua">
<script type="text/javascript">
var piclnk = new Array();
var now = new Date();
var wkdy = now.getDay();
piclnk[0]='http://johndoc1.smugmug.com/2012Pictures/Beach/Mom-and-Brian-Visit-Avalon/i-  3Mp7SqD/0/X3/Moms-Visit-Beach-Busch14-X3.jpg';
piclnk[1]='http://johndoc1.smugmug.com/2012Pictures/Beach/Mom-and-Brian-Visit-Avalon/i-NpbsQVZ/0/X3/Moms-Visit-Phillies02-X3.jpg';
piclnk[2]='http://johndoc1.smugmug.com/2011Pictures/Beach/Brian-rests-a-shore-house/i-KtdDb9z/0/X3/Brian-beach-Frescos-007-X3.jpg';
piclnk[3]='http://johndoc1.smugmug.com/2012Pictures/Beach/Mom-and-Brian-Visit-Avalon/i-6FBTfLn/0/X3/Moms-Visit-Ed-Frescos03-X3.jpg';
piclnk[4]='http://johndoc1.smugmug.com/2011Pictures/Events/John-Cecilia-Wedding-Day/i-2D44Xrj/0/X3/John-and-Cecilia-wedding-068-X3.jpg';
piclnk[5]='https://sphotos-a.xx.fbcdn.net/hphotos-snc6/248107_3426722028174_1990858472_n.jpg';
piclnk[6]='http://johndoc1.smugmug.com/2002-pictures/Birthdays/Eileens-40th-at-Hershey/mom-michael-pippi/226530953_ULboq-X3.jpg';
var lnk = document.createElement('link');
lnk.type='text/css';
lnk.href=piclnk[wkdy];
lnk.rel='stylesheet';
changeImage('url(piclnk[wkdy])');
</script>
<button onclick="changeImage('url(http://johndoc1.smugmug.com/2012Pictures/Beach/Mom-and-Brian-Visit-Avalon/i-DNLjwPs/0/XL/Moms%20Visit%20Porch%2002-XL.jpg)')">Mom Celeste Julia</button><br>
<button onclick="changeImage('url(http://johndoc1.smugmug.com/2012Pictures/Beach/Mom-and-Brian-Visit-Avalon/i-sd3Cp9b/0/XL/Moms%20Visit%20Ed%20Frescos06-XL.jpg)')">Woltemates</button><br>
<button onclick="changeImage('url(http://johndoc1.smugmug.com/2011Pictures/Events/John-Cecilia-Wedding-Day/i-2D44Xrj/0/X3/John-and-Cecilia-wedding-068-X3.jpg)')">Eileen / Hilda</button><br>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:13:36.097

您正在将文本传递`'url(piclnk[wkdy])'`给`changeImage()`函数 - 如下更改它，它应该开始工作：

```
changeImage('url(' + piclnk[wkdy] + ')'); 
```

此外，正如您所知，构建数组的更好方法是：

```
var piclnk = [
    'http://first/image.jpg',
    'http://second/image.jpg',
    'etc'
]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:17:18.147

我可以建议在更改函数中添加 url 字符串吗？像这样：

```
function changeImage(newImage) {
    document.getElementById('mainpage').style.backgroundImage = 'url(' + newImage + ')';
} 
```

现在您可以使用：

```
changeImage(piclnk[wkdy]); 
```

或者：

```
<button onclick="changeImage('http://johndoc1.smugmug.com/2012Pictures/Beach/Mom-and-Brian-Visit-Avalon/i-DNLjwPs/0/XL/Moms%20Visit%20Porch%2002-XL.jpg')">Mom Celeste Julia</button><br> 
```

无需每次都添加 url 字符串。

**编辑：**

在美化代码时，它可能看起来像这样：

```
function changeImage(newImage) {
    document.getElementById('mainpage').style.backgroundImage = 'url(' + newImage + ')';
}

var picUrls = [
    'http://johndoc1.smugmug.com/2012Pictures/Beach/Mom-and-Brian-Visit-Avalon/i-3Mp7SqD/0/X3/Moms-Visit-Beach-Busch14-X3.jpg',
    'http://johndoc1.smugmug.com/2012Pictures/Beach/Mom-and-Brian-Visit-Avalon/i-NpbsQVZ/0/X3/Moms-Visit-Phillies02-X3.jpg',
    'http://johndoc1.smugmug.com/2011Pictures/Beach/Brian-rests-a-shore-house/i-KtdDb9z/0/X3/Brian-beach-Frescos-007-X3.jpg',
    'http://johndoc1.smugmug.com/2012Pictures/Beach/Mom-and-Brian-Visit-Avalon/i-6FBTfLn/0/X3/Moms-Visit-Ed-Frescos03-X3.jpg',
    'http://johndoc1.smugmug.com/2011Pictures/Events/John-Cecilia-Wedding-Day/i-2D44Xrj/0/X3/John-and-Cecilia-wedding-068-X3.jpg',
    'https://sphotos-a.xx.fbcdn.net/hphotos-snc6/248107_3426722028174_1990858472_n.jpg',
    'http://johndoc1.smugmug.com/2002-pictures/Birthdays/Eileens-40th-at-Hershey/mom-michael-pippi/226530953_ULboq-X3.jpg'
], weekDay = (new Date()).getDay();

changeImage(picUrls[weekDay]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:13:27.530

您需要将数组项插入到字符串中（您现在拥有它的方式，它只是一个文字字符串，根本不引用您的数组）：

```
changeImage('url(' + piclnk[wkdy] + ')'); 
```

# java - 通过 Struts 在重定向期间控制浏览器 URL

> ID：13258593
> 
> 赞同：0
> 
> 时间：2012-11-06T20:08:32.107
> 
> 标签：java, redirect, struts

如果我提供的信息有限，请原谅我，但我能提供的信息有限。

我们有一个调用 struts 动作的登录过程。此操作与 http 服务器和重定向相结合，通过一种“虚拟”操作将用户发送到特定 JSP。问题是此页面/操作需要“设置”才能正常运行。客户想要为登录页面添加书签，但是当他们这样做时，然后调用书签，它会失败，因为它没有正确设置。

我的问题是：有没有办法控制 URL，以便他们为设置此操作/页面的操作添加书签？

谢谢你。

[编辑]

更多信息：

j_security 使用受保护的页面来触发登录。当登录被触发时，我们通过 urlrewrite 拦截以进行上下文切换......但最终结果是一个不受保护的页面（登录页面）并且人们正在为该页面添加书签。不幸的是，如果您直接进入该页面，登录过程将失败，因为它需要“设置”受保护的页面。

有没有办法屏蔽 URL，即使转发一次以反映触发登录的受保护页面？某种重写声明？

# android - 为什么第一次显示键盘时布局与后续时间不同？

> ID：13258599
> 
> 赞同：1
> 
> 时间：2012-11-06T20:09:04.697
> 
> 标签：android, layout, graphics, keyboard

![](../Images/dbdb1854f677d52d78e492046516e481.png)对比 ![](../Images/11cc1f8f0cfd16f9c26ad16994614481.png)

我有一个 Button 和 EditText 将重力设置为底部的活动。

键盘第一次出现时，它会将底部元素向上移动，直到光标位于键盘上方。如果我关闭键盘然后再次单击 EditText，则底部元素现在向上移动到它们完全位于键盘上方的位置。

我想知道为什么会发生这种情况，以及立即正确布置事物的解决方法是什么？

**更新：**当我对此进行更多研究时，事实证明这似乎是摩托罗拉设备（Droid Razr HD）的一个特殊错误，因为它没有出现在 Galaxy Nexus 或 HTC 设备上。

# android - 画布绘制的位图小于原始图片

> ID：13258600
> 
> 赞同：3
> 
> 时间：2012-11-06T20:09:05.917
> 
> 标签：android, bitmap, draw, android-canvas

我实际上在做一个游戏，需要一些备份，因为 Canvas。

我用画布绘制背景。所以我为我们工作的屏幕分辨率制作了图片。在设备上，图片太小，不适合屏幕。我错过了什么让平局变小的东西吗？

这是一些代码

```
public class Map extends View{
int[][] mapArray = new int[32][18];
private Bitmap picture;
private Paint paint;

public Map(Context context){
    //basic init map
    super(context);

    this.setPicture(BitmapFactory.decodeResource(context.getResources(), R.drawable.newmap2));
}

public Bitmap getPicture() {
    return picture;
}

public void setPicture(Bitmap background) {
    this.picture = background;
}

@Override
protected void onDraw(Canvas canvas) {
    canvas.drawBitmap(picture, 0, 0, paint);
} 
```

希望你能帮助我最好的问候本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:19:23.613

Maybe you put the bitmap in a high dpi directory (e.g. res/drawable-xhdpi) and your device is of a lower dpi ? In this case the image is scaled down on open. What you are doing is not safe, other devices will have other screen sizes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:19:23.507

您的设备可能具有明显不同的 DPI（像素密度），可能要高得多，这会使图像看起来比应有的小得多。如果您有一张图片可以准确显示它们的不同之处，那么调试问题可能会更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:25:00.697

This segments of code explain how to use the dimensions of the display to determine the amount of down sampling that should occur when loading the image. Hope that could help you

```
Display currentDisplay = getWindowManager().getDefaultDisplay();
int dw = currentDisplay.getWidth();
int dh = currentDisplay.getHeight(); 
```

# nhibernate - 字典上的 NHibernate Linq

> ID：13258602
> 
> 赞同：2
> 
> 时间：2012-11-06T20:09:20.610
> 
> 标签：nhibernate, linq-to-nhibernate

我有以下我的域（和 FNH 映射）的摘录

```
public class Product
{
  public virtual int Id { get; set; }
  public virtual string Name { get; set; }        
  public virtual IDictionary<LimSet, string> Attributes { get; set; }
  /*equality logic there*/
}

public class LimSet
{
  virtual public int Id { get; set; }
  public virtual string Name { get; set; }
  /*equality logic there*/
}                

internal class LimSetMap : ClassMap<LimSet>
{
  public LimSetMap()
  {
      Table("LIMSET");
      Id(x => x.Id).GeneratedBy.Assigned();
      Map(x => x.Name);
  }
}
internal class ProductMap : ClassMap<Product>
{
  public ProductMap()
  {
      Table("PRODUCT");
      Id(x => x.Id).GeneratedBy.Assigned();
      Map(x => x.Name);            
      HasMany(x => x.Attributes)
          .AsEntityMap("LIMSET_ID")
          .Table("PRODUCT_ATTR")
          .KeyColumn("PRODUCT_ID")
          .Cascade.AllDeleteOrphan()
          .Element("VALUE");
  }   
} 
```

问题在于使用另一个实体作为键的组件的映射（字典）（到目前为止是简单的字符串值）。一切似乎都很好，例如我可以生成数据库模式，也可以操作字典并使用级联保存它。当我使用查询属性字典时

```
var prodWithAttrs = session.Query<Product>()
  .Where(p => p.Id == 1)
  .SelectMany(p => p.Attributes,
     (p, a) => new
               {
                 Product = p.Name,
                 Attribute = a.Key.Name,
                 Value = a.Value
               }); 
```

我遇到了一个例外

`cannot dereference scalar collection element: Key [.SelectMany[Domain.Product,System.Collections.Generic.KeyValuePair`2[...`

我已经尝试了几个选项来改写查询但没有成功。您知道当前（3.3.2）NH Linq 提供程序是否可以实现这样的事情？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T18:51:45.750

不确定这是否对您有帮助...

我刚刚从 NH 2.2 升级到 3.3.2，并且之前在 NH 2.2 中使用 NH.Linq 提供程序运行良好的某些 SelectMany 查询出现了相同的错误。

我的 NH 2.2（工作）查询的形式为：

```
Session.Query<T>().SelectMany(o => o.DictionaryProperty.Values) 
```

我会在 NH 3.3.2 中收到以下错误：

```
cannot dereference scalar collection element: Values 
```

我能够通过将查询更改为：

```
Session.Query<T>().SelectMany(o => o.DictionaryProperty).ToList().Select(kvp => kvp.Value) 
```

这有效地将字典值访问从 Linq-to-NHibernate 移到 Linq-to-Objects 中。还不确定这里发生了什么...

# file - 使用 awk 连接两个文件

> ID：13258604
> 
> 赞同：6
> 
> 时间：2012-11-06T20:09:35.460
> 
> 标签：file, join, awk

我有两个如下所示的文件，它们是制表符分隔的：

档案A

```
chr1   123 aa b c d
chr1   234 a  b c d
chr1   345 aa b c d
chr1   456 a  b c d
.... 
```

文件 B

```
xxxx  abcd    chr1   123    aa    c    d    e
yyyy  defg    chr1   345    aa    e    f    g
... 
```

我想加入基于 3 列与“chr1”、“123”和“aa”的两个文件，并将文件 B 的前两列添加到文件 A，这样输出如下所示： 输出：

```
chr1   123    aa    b    c    d    xxxx    abcd
chr1   234    a     b    c    d
chr1   345    aa    b    c    d    yyyy    defg
chr1   456    a    b    c    d 
```

任何人都可以帮助在 awk 中执行此操作。如果可能的话，使用 awk oneliners？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-08-06T20:25:02.557

这是使用的一种方法`awk`：

```
$ awk 'NR==FNR{a[$3,$4]=$1OFS$2;next}{$6=a[$1,$2];print}' OFS='\t' fileb filea
chr1    123     a    b    c     xxxx    abcd
chr1    234     a    b    c 
chr1    345     a    b    c     yyyy    defg
chr1    456     a    b    c 
```

解释：

```
NR==FNR             # current recond num match the file record num i.e in filea
a[$3,$4]=$1OFS$2    # Create entry in array with fields 3 and 4 as the key
next                # Grab the next line (don't process the next block)
$6=a[$1,$2]         # Assign the looked up value to field 6 (+rebuild records)  
print               # Print the current line & the matching entry from fileb ($6)

OFS='\t'            # Seperate each field with a single TAB on output 
```

**编辑：**

对于 3 字段问题，您只需添加额外字段：

```
$ awk 'NR==FNR{a[$3,$4,$5]=$1OFS$2;next}{$6=a[$1,$2,$3];print}' OFS='\t' fileb filea
chr1    123    aa     b      c     xxxx     abcd
chr1    234    a      b      c  
chr1    345    aa     b      c     yyyy     defg
chr1    456    a      b      c 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T20:31:08.427

您可以使用`join`，但管道变得如此复杂，切换到更强大的语言（如 Perl）可能会更容易。

```
join -11 -21 -o1.1,1.2,1.3,1.4,1.5,2.4,2.5 \
     <(sed 's/ \+/:/' fileA | sort) \
     <(sed 's/ \+/:/' fileB | sort) \
 | join -11 -22 -a1 -o1.1,1.2,1.3,1.4,1.5,1.6,1.7,2.5,2.6 \
     - <(sed 's/ \+\([^ ]\+\) \+\([^ ]\+\)/ \1:\2/' fileC | sort -k2) \
 | sed 's/:/ /' 
```

Perl 解决方案，使用哈希来记住所有信息：

```
#!/usr/bin/perl
use warnings;
use strict;

#             key_start  key_end  keep_from  output
my %files = (A => [0,      1,      2,       [0 .. 3]],
             B => [0,      1,      2,       [-2, -1]],
             C => [1,      2,      3,       [-2, -1]],
            );

my %hash;

for my $file (keys %files) {
    open my $FH, '<', "file$file" or die "file$file: $!";
    while (<$FH>) {
        my @fields = split;
        $hash{"@fields[$files{$file}[0], $files{$file}[1]]"}{$file}
            = [ @fields[$files{$file}[2] .. $#fields] ];
    }
}

for my $key (sort keys %hash) {
    print $key, join(' ', q(),
                     grep defined, map {
                         @{ $hash{$key}{$_} }[@{ $files{$_}[-1] }]
                     } sort keys %files), "\n";
} 
```

# socialengine - Socialengine 中的匿名评论

> ID：13258614
> 
> 赞同：3
> 
> 时间：2012-11-06T20:10:46.100
> 
> 标签：socialengine

如何实现非会员对 Socialengine 文章、照片等发表评论的功能？有没有这样做的模块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T11:00:00.493

我认为最好的方法是开始尝试 disqus 系统。但它需要一些时间来适应社交引擎。如果您需要帮助，请与我联系。

# version-control - 在 Illustrator 中保存文件时如何自动触发导出操作？

> ID：13258621
> 
> 赞同：1
> 
> 时间：2012-11-06T20:11:09.423
> 
> 标签：version-control, automation, export, applescript, adobe-illustrator

感谢阅读这个问题：

我一直在和其他几位设计师一起做一个图标项目。我们正在用版本控制试验 Github，我们想使用 Image View 模式来区分我们的图标。

但是，由于我们在 Illustrator 中工作，图像模式不支持，因此我们无法直接比较图标的版本。这就是为什么我们希望 illustrator（或 automator、applescript）在编辑/保存文件时触发自动导出选项，因此我们可以将导出的版本（PNG 或 JPG）与 Github 上的图像查看模式进行比较。

我希望这能让您了解我们的情况。任何答案都会非常有帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:03:00.697

这本身不是一个答案，只是一些观察。随意转换成评论

*   我认为，您选择了错误的 VCS 来管理二进制数据。Git 对二进制文件的工作很糟糕（嗯：次优，效率低下）
*   **我认为，当您拥有专门**为此类任务设计的本地工具（我更喜欢 update+diff）时，您选择了错误的工作流程（比较“服务器”端的非原始图像）。您只需要为 *ai 文件类型配置特殊的不同
*   在任何情况下，提交前的导出都不是那么频繁和复杂的任务，需要自动化这个过程

# android - 如何在我的应用程序中显示特定的 Facebook 页面？

> ID：13258626
> 
> 赞同：4
> 
> 时间：2012-11-06T20:11:30.197
> 
> 标签：android, facebook

如何在 Android 中嵌入 Facebook 页面，而无需使用`webView`? 我知道这个问题之前在[这里](https://stackoverflow.com/questions/7946427/embed-facebook-fan-page-into-view-in-android-app)被问过，但是这个问题没有答案。

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T22:09:00.760

要从应用程序中的特定页面获取帖子，您所要做的就是发出一个`GET`on `PAGE_ID/feed`。例如，要查看我的主页 InstaWifi 发布的帖子，您可以单击此处的此链接查看响应的样子：

[https://developers.facebook.com/tools/explorer/?method=GET&path=325806087495884%2Ffeed](https://developers.facebook.com/tools/explorer/?method=GET&path=325806087495884%2Ffeed)

收到此 JSON 后，您可以对其进行解析以在您的应用程序中显示内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:33:29.733

你可以这样做

```
Intent browserIntent = new Intent(Intent.ACTION_VIEW, Uri.parse("https://www.facebook.com/stackoverflowpage"));
startActivity(browserIntent); 
```

不要忘记为您的 AndroidManifest.xml 文件添加权限

```
<uses-permission android:name="android.permission.INTERNET"/> 
```

# c# - 如何强制 Visual Studio 忽略“System.StackOverflowException”？

> ID：13258634
> 
> 赞同：-2
> 
> 时间：2012-11-06T20:12:32.600
> 
> 标签：c#, visual-studio-2010, stack-overflow

我已经实现了可以在这个[链接](https://stackoverflow.com/questions/12978253/whats-the-fastest-way-to-find-deepest-path-in-a-3d-array)下找到的递归算法。当 3d 数组为 10x10x10 时，它工作得很好。

我试图让它运行 200x200x200 数组但是，Visual Studio 说我可能正在使用无限递归（我很确定我的 prog 没问题）。有什么办法可以处理吗？我试过把`[DebuggerNonUserCode]`递归方法放在前面，但没有奏效。

忘了说，它是 Visual Studio 2010。

这是我程序中的递归函数。我正在为每个标记为未访问的单元格运行它。

```
 public static int tmp_lowest_floor = 0;
    public static int tmp_maks_size = 0;

    static void function1(Point[, ,] array, int pos_y, int pos_z, int pos_x) // recursive function
    {
        Point cell = array[pos_y, pos_z, pos_x];

        if (cell.Visited == false && cell.IsCave)
        {
            cell.Visited = true; // changing to visited so we do not count anything for this cell anymore
            tmp_maks_size++; // increasing for each cell in this cave (in this run)

            if (tmp_lowest_floor < pos_y) { tmp_lowest_floor = pos_y; }
            cell.FillNeighbourList(array, pos_y, pos_z, pos_x);// adds neighbours into cell's list (max 6) up, down, north, east, south, west

            foreach (Point p in cell.neighbours) // max 6 times recursion in here (I know it sounds horrible, but once I check all the neighbours for a cell, I'll not have to check it ever again)
            {
                if (p != null)
                {
                    if (p.IsCave == true && p.Visited == false)
                    {
                        function1(tablica, p.pos_y, p.pos_z, p.pos_x);
                    }
                }
            }

        }

    } 
```

ps 我知道我可以用迭代的方式来做，但是，作业说它必须用递归来完成

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T20:15:33.030

你不能忽视它，你真的把堆栈搞砸了。

您所做的是要么增加堆栈（从而延迟问题），要么意识到手头的问题是算法的一个非常糟糕的实现并修复它（例如，通过使用迭代方法，或利用尾调用递归） .

顺便说一句，想知道您使用多少堆栈来遍历 200x200x200 阵列中的每个单元格，只跟踪您的 x、y 和 z 坐标，仅此而已？96MB。Windows 默认为您提供 1MB 宽的堆栈。

编辑：要解决您的特定问题，您拥有的是一个非常基本的填充算法。它的迭代形式使用队列和列表。在伪代码中：

```
list visited=[];
queue q=[];

q.push(startnode);           // the starting point
while(!q.empty())
{
  // make sure we don't revisit nodes
  if(visited.contains(node))
     continue;

  visited.add(node=q.pop()); // we just visited the top

  // do your conditions here, the cave thing? no clue what that is
  // if it passes your filter, do any extra operations on your node here (none in your code)

  // and push the neighbours in the queue
  q.push_all(node.get_neighbours());
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T20:15:51.320

运行时环境具有有限堆栈。每次调用方法时，都会将更多数据添加到该堆栈中。每次方法返回时，数据都会从堆栈中删除。如果您在方法中的方法中继续调用方法并且这些方法没有返回，最终您的堆栈将耗尽空间，您将获得堆栈溢出。

如果你想避免这种情况，你真的只需要修改你的算法以使用更少的递归（在方法中调用方法），或者满足于使用足够小的数据集，你的堆栈不会变得太大。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-09-11T12:35:00.563

您可以通过以下方式增加堆栈大小：

*   右键单击您的项目
*   选择属性 -> 配置属性 -> 链接器 -> 系统
*   为“堆栈保留大小”和“堆栈提交大小”设置不同的值（以字节为单位）。从这里您还可以更改堆大小。

[在这个问题中，我遇到了与尾递归类似的问题](https://stackoverflow.com/questions/32523171/recursion-in-visual-studio)。

# c# - NotifyIcon DoubleClick 事件不会被触发

> ID：13258637
> 
> 赞同：0
> 
> 时间：2012-11-06T20:12:47.080
> 
> 标签：c#, events, notifyicon

目前正在使用 notifyIcon，我按照本教程将 Minimize 设置为 Tray 选项。 [http://www.codeproject.com/Articles/27599/Minimize-window-to-system-tray](http://www.codeproject.com/Articles/27599/Minimize-window-to-system-tray)

因此，当用户单击窗口最小化按钮时，它会使托盘图标出现。

当我只有一个表格时，本教程工作正常。当我实例化一个包含计时器的新表单（不同于主表单）时，不会触发 notifyIcon DoubleClick 事件，因此无法弹出主表单。

有人知道这种行为的原因吗？是否可以在不添加断点的情况下实时查看事件？

编辑：

看来这不是计时器问题。在我的第二种形式中，我使用的是 AttachThreadInput (http://msdn.microsoft.com/en-us/library/windows/desktop/ms681956(v=vs.85).aspx) 函数，当我评论它时， doubleClick 事件被触发。所以我认为问题在于我将另一个线程附加到第二个线程形式。但我不明白为什么它会阻止主要形式的事件......

# android - ContentProvider UriMatcher 与 Uri 不匹配

> ID：13258643
> 
> 赞同：1
> 
> 时间：2012-11-06T20:13:12.930
> 
> 标签：android, android-contentprovider

我为我的 SQLiteDatabase 创建了一个 ContentProvider，而我正在使用的 Uri 与 UriMatcher 不匹配。在我的 ContentProvider 中，我有这些全局变量：

```
private static final String AUTHORITY = "com.MyProject.project.MyContentProvider";
private static final String TABLE_BASEPATH = "MyTable_tbl";
public static final Uri My_URI = Uri.parse("content://" + AUTHORITY + "/" + TABLE_BASEPATH);
public static final int EVERYTHING = 100;
public static final int FILTERED = 110; 
```

然后，我有这个 UriMatcher：

```
private static final UriMatcher sURIMatcher = new UriMatcher(UriMatcher.NO_MATCH);
static {    
    sURIMatcher.addURI(AUTHORITY, TABLE_BASEPATH, EVERYTHING);    
    sURIMatcher.addURI(AUTHORITY, TABLE_BASEPATH + "/#", FILTERED);
    } 
```

在我的活动中，我有：

```
MyContentProvider mycontentProvider = new MyContentProvider ();
    mycontentProvider .delete(MY_URI, null, null); 
```

在我的 SQLiteDatabase 中，我有：

```
public void onCreate(SQLiteDatabase db) {
    db.execSQL("CREATE TABLE " + DATABASETABLE + " (" + KEY_ROWID
            + " INTEGER PRIMARY KEY AUTOINCREMENT, " + KEY_STITCHNAME
            + " TEXT NOT NULL, " + KEY_USES + " TEXT NOT NULL, "
            + KEY_VIDEOID + " TEXT NOT NULL, " + KEY_INSTR
            + " TEXT NOT NULL, " + KEY_NOTES + " TEXT NOT NULL, "
            + KEY_LEVEL + " TEXT NOT NULL, " + KEY_CHART
            + " TEXT NOT NULL)");

} 
```

其中 DATABASETABLE 是我的 SQLiteDatabase 中的全局变量。它被分配了一个值，如下所示：

```
private static final String DATABASETABLE = "MyTable_tbl"; 
```

在我的 ContentProvider 的删除方法中，我做的第一件事是：

```
int uriType = sURIMatcher.match(uri); 
```

这是我在清单中的应用程序标签内的内容：

```
<provider
    android:authorities="com.MyProject.project.MyContentProvider"
    android:exported="false"
    android:name="com.MyProject.project.MyContentProvider">        
</provider> 
```

这将返回 uriType = -1。为什么？我如何构建我的 Uri 有什么问题？

# configuration - 使用见证 db2 进行数据库镜像

> ID：13258653
> 
> 赞同：-1
> 
> 时间：2012-11-06T20:13:39.653
> 
> 标签：configuration, db2, backup, mirroring

我正在寻求一些关于在 DB2 中与见证人一起执行镜像的指导。我已经搜索了好几个小时......我找到了一些关于拆分镜像的信息，但是我没有找到关于如何在 DB2 中配置见证的信息。请帮忙！

问候

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T02:08:29.077

在 Linux、UNIX 和 Windows 平台上，自从多年前在 v8.2 中首次引入[HADR特性以来，它一直是一种将 DB2 数据库镜像到相同备用数据库的流行方法。](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.ha.doc/doc/c0011267.html)从 DB2 v10.1 开始，HADR 可以将主数据库镜像到[最多三个备用数据库](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.ha.doc/doc/c0059994.html)，而不仅仅是一个。HADR 通过 TCP/IP 上的事务传送而不是 SAN 层的拆分镜像来同步主数据库和辅助数据库。

[在 DB2 HADR 实现中（以及在 DB2 pureScale 集群中），见证人的角色由IBM Tivoli System Automation for Multiplatforms](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.qb.server.doc/doc/t0051289.html) (SA MP)的捆绑和集成安装处理，该安装监视 DB2 引擎内部的各种资源和在整个操作系统中。监视策略、心跳检测和自动故障转移脚本由 IBM 作为捆绑包的一部分提供，以及配置实用程序[db2haicu 。](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.ha.doc/doc/c0051371.html)SA MP 软件在与 HADR 相关的每个 DB2 服务器上运行，并且不与单独的专用见证服务器隔离（就像在 MS SQL Server 中所做的那样）。

# extjs4 - 将 extjs 4 颜色主题更改为其他内容

> ID：13258654
> 
> 赞同：1
> 
> 时间：2012-11-06T20:13:41.000
> 
> 标签：extjs4, extjs4.1

如何更改 extjs 4 的默认主题。

例如，我不想使用蓝色。

我希望它默认为我选择的其他颜色？我不知道如何覆盖 css 来做到这一点。任何帮助，将不胜感激。

有安装新主题的教程吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T21:10:41.903

请参阅主题指南，它几乎涵盖了您需要的所有内容：[http ://docs.sencha.com/ext-js/4-1/#!/guide/theming](http://docs.sencha.com/ext-js/4-1/#!/guide/theming)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-18T13:27:04.540

您可以尝试覆盖基本主题：

```
this.columnChart.on('afterrender', function() {
         var colors = ['#1486fb','#fbe500','#00b300','#1486fb','#999']; 
        var baseColor = '#eee'; 
        Ext.define('Ext.chart.theme.Fancy', {
            extend: 'Ext.chart.theme.Base', 
            constructor: function(config) {
                this.callParent([Ext.apply({           
                    colors: colors
                }, config)]);
            }
        }); 
```

并简单地使用

# ms-access - 访问表单查找

> ID：13258655
> 
> 赞同：1
> 
> 时间：2012-11-06T20:13:45.673
> 
> 标签：ms-access

我一直在使用 Access 2010 和创建表单。

我有一个`table1`和相关的`form1`.
我还有一个`table2`值是yes、no 和missing ( `lookupyesnomissing`)。

我希望在特定字段中`form1`显示“是”、“否”和“缺失”选项。我还希望在表中将相同的字段存储为 0、1 或 -1（0-否、1-是、-1 缺失、---`lookupyesnomissing`表值）。

我无法在表格和表格的 2 个地方为同一字段设置不同的值。我要么都应该作为数字，要么都应该作为文本。

请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:53:36.207

您可以在组合框中包含多个列，但将其选定值绑定到当前表单中的字段。只需正确设置其[属性](http://office.microsoft.com/en-us/access-help/properties-of-list-boxes-combo-boxes-drop-down-list-boxes-and-lookup-fields-HP005188491.aspx)。

1.  确保**RowSource**查询正确，并从 table2 中提取两列。
2.  将**ColumnCount**设置为`2`（或您想要显示的数量，加 1）。
3.  将**ColumnWidths**设置为`0;1`（即隐藏第一列，我假设第一列是您要绑定的值）
4.  将**BoundColumn**设置为 0（将其绑定到数据集中的第一列）
5.  最后，将绑定字段属性设置为要绑定到的表单数据源中的字段

# c++ - 返回自定义类数组的c ++函数会出错

> ID：13258659
> 
> 赞同：1
> 
> 时间：2012-11-06T20:13:53.507
> 
> 标签：c++, class, methods

我有一堂课：

```
class cAsset{
  public:
     void data(int);
     int returnInfo(void);
} 
```

和一个假设返回 cAssets 数组的函数

```
cAsset[] myFunc(int a, int b){
   ...
} 
```

错误是：

```
Expected member name or ';' after declaration specifiers 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T20:15:30.493

您不能在 C++ 中返回数组。尝试返回 a `std::vector<cAsset>`。

```
std::vector<cAsset> myFunc(int a, int b){
  std::vector<cAsset> result;
  result.push_back(cAsset(4,2));
  result.push_back(cAsset(a,b));
  return result;
} 
```

# java - 为什么 FormComponentPanels 中的共享模型不起作用？

> ID：13258661
> 
> 赞同：3
> 
> 时间：2012-11-06T20:14:04.753
> 
> 标签：java, wicket

当TextField及其周围的FormComponentPanel使用相同的模型时，我真的很想了解为什么以下代码的模型对象始终为空：

```
public class MyPanel extends FormComponentPanel<String> {

    private TextField<String> _field;

    public MyPanel(String id, IModel<String> model) {
        super(id, model);
        _field = new TextField<String>("field", model);
        add(_field);
    }

} 
```

我知道我可以通过覆盖 Javadocs 中描述的 Panel 的 convertInput 来解决这个问题：

```
@Override   
protected void convertInput() {
    setConvertedInput(_field.getConvertedInput());
} 
```

我真的很想了解为什么 TextField 的更改不会像我期望的那样更新模型：将模型对象设置为用户的输入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T05:08:53.077

正如“Wicket in Action”所说：

> 在组件验证的第一阶段（在执行任何验证器之前）调用 convertInput 方法。实现应该解析用户输入并使用 setConvertedInput 设置转换后的输入，或者报告输入无法直接解释。**表单组件面板通常不直接接收用户输入。但是因为它的嵌套组件会这样做，并且因为它想相应地更新自己的模型值，所以我们重写了这个方法。**

在您的示例中，最初将调用文本字段的 convertInput 方法。它将使用正确的值更新共享模型。

然后会调用表单组件面板的convertInput方法。但是因为表单组件面板不直接接收任何输入，所以它的 getInputAsArray 方法将返回 null （如果输入在您的情况下可以为空）。所以共享模型将再次更新，这次是空值，模型的结果值最终将为空。

# ruby - Ruby中的乘法导致溢出？

> ID：13258663
> 
> 赞同：1
> 
> 时间：2012-11-06T20:14:17.197
> 
> 标签：ruby, math, multiplication

所以，我从理论上读到，Ruby 中的整数没有最大值，它们可以任意大。然而，当我乘以下面的结果是一个负值（我认为这是溢出的标志？）：

> > 44404051714 * 44404051714 => -2081807267335685116

谁可以给我解释一下这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:54:17.183

这看起来像是 Ruby 的类乘法实现中的一个错误`Fixnum`。查看源代码，[numeric.c](http://bugs.ruby-lang.org/projects/ruby-trunk/repository/entry/numeric.c#L2667)`fixmul`中函数的以下行（大量删减）跳出可疑：

```
...
2645:   long a, b;
...
2663:   c = a * b;
2664:   r = LONG2FIX(c);
...
2667:   if (FIX2LONG(r) != c || c/a != b) {
2668:       r = rb_big_mul(rb_int2big(a), rb_int2big(b));
... 
```

如果我没看错，那是来自进行`Fixnum`乘法运算的代码，以及应该进行溢出检测以确定结果是否实际上应该重新计算为`Bignum`. 问题在于它是糟糕的 C 代码： `a`并且`b`具有 long 类型，并且 if`a * b`溢出会根据 C 标准产生未定义的行为。一个好的编译器可以通过假设在正确的 C 程序中永远不会发生溢出来利用这一点，并且基于该逻辑可以优化溢出检查`c / a != b`。

因此，如果您的 Ruby 版本是使用相当新的编译器编译的（最新版本的 Clang 就是一个很好的例子），那可能就是造成这种情况的原因。

无论如何，我认为值得报告错误：即使这不是您所看到的原因，上面的 C 代码也是可疑的。

* * *

编辑：Daniel Fischer 在评论中指出有一个`volatile long c`声明。理论上，这应该可以防止溢出检查被优化掉。因此，如果这*是*问题的原因，那么这将使其成为编译器错误，而不是 Ruby 代码中的错误。

# bash - echo "-n" 不会打印-n？

> ID：13258664
> 
> 赞同：13
> 
> 时间：2012-11-06T20:14:39.213
> 
> 标签：bash, echo

[与这个问题](https://stackoverflow.com/questions/320313/echo-e-doesnt-print-anything)非常相似。

我正在使用 BASH 中的自动脚本迭代一些事情。偶尔脚本会遇到“-n”，echo 会尝试解释它。

尝试了这个：

```
 $ POSIXLY_CORRECT=1 /bin/echo -n 
```

和

```
 $ POSIXLY_CORRECT=1 /bin/echo "-n" 
```

但它每次都解释这个论点。

然后这是可行的，但可以在字符串中命中转义字符，这就是为什么我不想将空字符应用于所有输入并使用 -e。

```
$ echo -e "\x00-n"
-n 
```

printf 是可能的，但除非没有其他选项，否则应避免使用（并非所有机器都将 printf 作为实用程序）。

```
$ printf "%s" "-n"
-n 
```

那么有没有办法让 echo 打印“-n”？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T20:24:06.037

`printf`应该是所有 shell 中的内置程序，除非你的某些机器有非常旧的 shell 版本。长期以来，它一直是内置的`bash`。它可能比`echo -e`.

否则，真的没有办法获得`echo`它关心的选项。

**编辑**：从另一个类似问题[的答案；](https://stackoverflow.com/questions/13042734/parsing-command-line-arguments-in-bash-strange-behavior/13042777#13042777)`printf`通过使用这个方便的 no-digital-rights-retained 包装器来避免引用问题：

```
ech-o() { printf "%s\n" "$*"; } 
```

（这是 ech-o，如“没有选项”）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-06T21:13:45.533

如果在字符串前面加上一个字符（例如“x”），该字符会在运行时通过剪切被删除：

```
echo "x-n" | cut -c 2- 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-06T20:28:23.353

如果您使用该名称调用 Bash `sh`，它将模仿*sh*，其中该`-n`选项不可用`echo`。我不确定这是否符合您的需求。

```
$ /bin/sh -c 'echo -n' 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-06T21:19:45.463

echo "-n" 告诉 shell 把 '-n' 作为 echo 的第一个参数，一个字符一个字符。语义上，`echo "-n"`与 相同`echo -n`。试试这个（它是一个 POSIX 标准，应该在任何 shell 上工作）：

```
printf '%s\n' "-n" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-05-16T16:57:48.770

`echo "-n"`不会打印`-n`，因为`-n`它被解释为`echo`（请参阅`help echo`）的一个选项。但是你可以使用：

```
echo -e "\055n" 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2014-08-07T11:56:50.720

作弊方法：

```
echo -e  "\r-n" 
```

# c++ - 函数指针类型定义

> ID：13258665
> 
> 赞同：0
> 
> 时间：2012-11-06T20:14:47.453
> 
> 标签：c++, function, pointers, function-pointers

和有什么区别

```
typedef double F(double) 
```

和

```
typdedef double (*FPT)(double); 
```

?

在我看来，我可以将两者都作为参数传递给函数，即

```
bar1(FPT f);
bar2(F f); 
```

但虽然我能做到

```
FPT f = &foo; 
```

我不能做

```
F f = foo; 
```

即我不能创建F 类型的变量？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T20:24:57.973

你在很多方面都是对的。`F`是函数类型，`FPT`是函数指针类型。

如果你有一个函数类型的对象，你可以获取它的地址并获得一个函数指针。但是，函数类型的对象并不是真正的一流 C++ 对象。只有实际函数属于这种类型，并且您不能创建作为函数的对象（除了通过声明函数！），因此您不能分配给它（如 中`F f = foo;`）。

引用函数的唯一方法是通过函数指针或引用：

```
FPT f1 = &foo;
F * f2 = &foo;
F & f3 = foo; 
```

另请参阅[此答案](https://stackoverflow.com/a/13242329/596781)。

请注意，对于回调，我更喜欢引用类型而不是指针类型，因为与传递任何其他变量的方式相比，它更自然，并且因为您可以将地址和衰减应用于引用并获取指针，您可以'不要用指针：

```
double callme(F & f, double val)       // not: "F *" or "FPT"
{
    return f(val);

    // "&f" and "std::decay<F>::type" still make sense
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:25:14.953

在参数列表中，函数类型衰减为适当的函数指针类型，这样可以像在参数列表中一样传递相同类型的函数，它本身会衰减为相同的指针类型。

这对数组同样适用；`void foo(int arg[4])`具有实际的第一个参数类型`int *`。

> ### 8.3.5 函数[dcl.fct]
> 
> 5 - [...] After determining the type of each parameter, any parameter of type "array of `T`" or "function returning `T`" is adjusted to be "pointer to `T`" or "pointer to function returning `T`," respectively. [...]

The use of a function type in a declaration is covered in the same section:

> 10 - A typedef of function type may be used to declare a function but shall not be used to define a function.

# java - JList 使用 LinkedList？

> ID：13258667
> 
> 赞同：1
> 
> 时间：2012-11-06T20:15:12.003
> 
> 标签：java, swing, linked-list, jlist, defaultlistmodel

我有一个正在创建的库存计划。它可以添加、编辑和删除 JList 中显示的项目（这就是我正在做的事情）。目前我可以加载一个文件并读取它的内容。然后我有一个保存对话框，可以将读取的内容保存到文件中。目前这一切都是通过链表完成的。

问题在于将其与 GUI 集成。我在菜单栏中有一个添加、修改和删除选项。我让删除选项部分工作，我将 LinkedList invList 加载到 DefaultListModel modelInvList 中。这让我可以在 JList 中显示我想要的库存（当然我会遍历 LinkedList）：

```
String element = "Item: " + curInv.getDesc() + " Location: " + curInv.getLoc() + 
          " Value: $" + curInv.getValue() + " Purchased: " + curInv.getMonth() + "/" +
           curInv.getDay() + "/" + curInv.getYear();
modelInvList.addElement(element); 
```

显示（示例）： 项目：汽车 位置：车库 价值：5000.00 美元 购买：2/12/2003

linkedlist 也有一个 getImageLoc 字段，但它不会显示在 JList 中（仅当用户去修改项目时）。这工作......有点。我也有它，默认列表模型将被重建以仅显示某个位置的项目。当我从 Jlist 中删除一个项目（在选定索引处删除）时，该索引与链表不匹配（删除错误的项目）。所以我想知道如何在 JList 中更直接地显示我的链表......或者我应该使用链表以外的东西吗？我还需要能够对 JList 中的项目进行排序......还没有那么远。

# vb.net - 使用 Linq 中的分组创建 Dictionary(of Dictionary)（第 2 部分）

> ID：13258669
> 
> 赞同：0
> 
> 时间：2012-11-06T20:15:16.870
> 
> 标签：vb.net, linq

几天前，我通过[这个线程](https://stackoverflow.com/questions/13198355/create-dictionaryof-dictionary-using-grouping-in-linq)问了一个几乎与此相同的问题，并得到了很棒的回复——对我来说最大的教训（除了答案本身）是为我的持有数据创建一个自定义对象。那么，既然已经这样做了，我可以请各位专家向我展示最有效的 Linq 语句来满足我的要求吗？

我的场景如下：

假设我有以下控股类：

```
Public Class Class_Info
    Public Property Teacher As String
    Public Property Name As String
    Public Property Sex As String
End Class 
```

然后，假设我在另一个模块中有以下内容：

```
Dim X as new list(of Class_Info) 
```

列表中包含以下元素：

```
Element.Teacher:     Element.Sex:        Element.Name:
Teacher 1            Male                Whatever Name 1
Teacher 2            Female              Whatever Name 2 
Teacher 1            Female              Whatever Name 3
Teacher 1            Female              Whatever Name 4
Teacher 2            Male                Whatever Name 5
Teacher 3            Male                Whatever Name 6
Teacher 3            Female              Whatever Name 7
Teacher 1            Male                Whatever Name 8
Teacher 1            Female              Whatever Name 9
Teacher 2            Male                Whatever Name 10 
```

现在，假设我想使用以下值创建以下结构：

```
Dim dictTeacherSexName as New Dictionary(Of String, Dictionary(Of String, List(of String)))

Dict1_Key:        Dict1_Value / Dict2_Key:         Dict2_Value:
Teacher 1         Male                             Whatever Name 1
                                                   Whatever Name 8
                  Female                           Whatever Name 3
                                                   Whatever Name 4
                                                   Whatever Name 9
Teacher 2 ... 
```

我怎样才能以最有效的方式通过 Linq 创建它？

谢谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:45:55.697

它与上次相同，但是您可以直接指向对象，而不是依赖索引。

```
var result = X.GroupBy(i => i.Teacher)
     .ToDictionary(g => g.Key, g => g
         .GroupBy(i => i.Sex)
         .ToDictionary(h => h.Key, h => h
             .Select(i => i.Name)
             .ToList())); 
```

* * *

您也可以使用 ILookup 进行此操作，以便更清洁地使用。您可以使用自定义类作为查找对象，但它需要实现 IComparable。

```
class Program
{
    public static void Main()
    {
        var X = new List<Class_Info>();

        X.Add(new Class_Info { Teacher = "Teacher 1", Sex = "Male", Name = "Whatever Name 1" });
        X.Add(new Class_Info { Teacher = "Teacher 2", Sex = "Female", Name = "Whatever Name 2" });
        X.Add(new Class_Info { Teacher = "Teacher 1", Sex = "Female", Name = "Whatever Name 3" });
        X.Add(new Class_Info { Teacher = "Teacher 1", Sex = "Female", Name = "Whatever Name 4" });
        X.Add(new Class_Info { Teacher = "Teacher 2", Sex = "Male", Name = "Whatever Name 5" });
        X.Add(new Class_Info { Teacher = "Teacher 3", Sex = "Male", Name = "Whatever Name 6" });
        X.Add(new Class_Info { Teacher = "Teacher 3", Sex = "Female", Name = "Whatever Name 7" });
        X.Add(new Class_Info { Teacher = "Teacher 1", Sex = "Male", Name = "Whatever Name 8" });
        X.Add(new Class_Info { Teacher = "Teacher 1", Sex = "Female", Name = "Whatever Name 9" });
        X.Add(new Class_Info { Teacher = "Teacher 3", Sex = "Male", Name = "Whatever Name 10" });

        var result = X.ToLookup(key => new Tuple<string,string>(key.Teacher, key.Sex), value => value.Name);

        // Name is a IEnumerable<string> of all names who have "Teacher 1" and are Male.
        var name = result[new Tuple<string,string("Teacher 1","Male")];
    }

    public class Class_Info
    {
        public string Teacher;
        public string Name;
        public string Sex;
    }
} 
```

# android - OpenCV 支持哪些 Android 操作系统？

> ID：13258676
> 
> 赞同：0
> 
> 时间：2012-11-06T20:15:41.453
> 
> 标签：android, c++, opencv, android-4.0-ice-cream-sandwich, android-4.2-jelly-bean

[OpenCV](http://opencv.org/)支持哪些 Android 操作系统？

示例中的最低要求似乎是 3.0，但有谁知道您是否可以支持旧设备？反之亦然，它可以支持ICS吗？4.1或4.2怎么样？我似乎无法在任何地方找到细节，我不想购买无法使用的测试设备。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:35:24.817

它支持从 Android 2.2（API 级别 8）开始的所有版本。

您在示例中看到的最小值只是编译时。代码在运行时检查当前操作系统版本，如果 API 级别足够高，则选择更好的实现，否则将回退到旧实现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-09T23:07:21.703

没有理由相信它不适用于 nexus4 4.2。对某些 4.2 设备上的问题进行了更正，您可以在此处阅读[发行说明](http://code.opencv.org/projects/opencv/wiki/Android_Release_Notes)。所以你可以看到人们一直在用 4.2 测试它。

# php - 在类中包含来自外部 php 文件的方法

> ID：13258686
> 
> 赞同：4
> 
> 时间：2012-11-06T20:16:08.747
> 
> 标签：php, oop

我有一个有自己的方法的类，另一方面是一个包含外部方法的 php 文件。从文档中可以清楚地看出，在包含外部函数的类内部是不可能的

我怎么能在我的课堂上加入这个功能。制作另一个课程并扩展我的第一个课程，这不是一个选择。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T20:18:14.153

你不能。所有类定义，包括方法和字段都必须在同一个文件中。您不能在两个不同的文件中声明同一个类。

扩展或使用**[特征](http://php.net/manual/en/language.oop5.traits.php)**（如果您有 PHP 5.4.x+）是您唯一的选择。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T20:21:48.930

您可以从类中调用外部函数，即使它们没有包含在自己的类中：

全局.php

```
<?php
function doSomething() {
    return 'Hello';
}
?> 
```

ExampleClass.php

```
<?php
include_once('Global.php');

class ExampleClass
{
    public function example() {
        return doSomething();
    }
}
?> 
```

尽管您可能不会`include`在实际的类文件中拥有 。

# ruby-on-rails - 为 ActiveRecord 对象的属性定义一个 '<<' 方法

> ID：13258689
> 
> 赞同：3
> 
> 时间：2012-11-06T20:16:42.123
> 
> 标签：ruby-on-rails, ruby, activerecord

我有一个活动记录对象，它具有用于将数组存储为逗号分隔文本的自定义访问器。

```
class Thing < ActiveRecord::Base
  attr_accessible :object_list

  def objects
    self.object_list.split(",") rescue []
  end

  def objects=(input)
   self.object_list = input.join(',')
  end
end 
```

我想添加以下内容

```
def objects<<(input)
  unless self.object_list == nil
    self.object_list << ",#{input}"
  else
    self.object_list = "#{input}"
  end
end 
```

这样我就可以做类似的事情

```
thing.objects << 'this' 
```

那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:57:34.660

我会这样做：

```
class Thing < ActiveRecord::Base
  def objects
    @objects ||= read_attribute(:objects).split(',')
  end

  def objects=(input)
    @objects=input
    write_attribute(:objects, @objects.join(','))
  end
end 
```

这应该允许您将对象视为数组，但将其保存为 db 中的逗号分隔列表。

请参阅[覆盖](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)Rails API 中的默认访问器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:38:00.613

我不知道您的 << 方法，但为什么不知道用户序列化？

[http://api.rubyonrails.org/classes/ActiveModel/Serialization.html](http://api.rubyonrails.org/classes/ActiveModel/Serialization.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T20:38:48.490

我能够通过使用如下所述的 define_method 来解决这个问题

```
define_method("objects<<"){|input|
  unless self.object_list == nil
    self.object_list << ",#{input}"
  else
    self.object_list = "#{input}"
  end
} 
```

# c# - 从页面中删除请求验证

> ID：13258697
> 
> 赞同：0
> 
> 时间：2012-11-06T20:17:31.187
> 
> 标签：c#, asp.net

我有一个页面，它是 CMS 控制面板的一部分，用户可以在其中使用要保存在数据库中的 javascipt 代码填充某些文本框。回调被服务器阻止，但有以下异常：

> 异常消息：从客户端检测到潜在危险的 Request.Form 值 (ctl00$ContentPlaceHolder1$txtMenuAdsenseCode="

当我没有进行完整的回发时，我不确定为什么服务器会抱怨文本框值，但是有什么办法可以关闭它吗？我把`ValidateRequest="false"`页面和这个放在`web.config`：

```
 <location path="~/Admin/Settings.aspx">
      <system.web>
        <httpRuntime requestValidationMode="2.0" />
      </system.web>
    </location> 
```

但它仍然抛出异常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:26:56.407

尝试使用 Javascript 将文本框代码的内容序列化为 Base64，然后在代码隐藏中从 Base64 解码。

我通常使用这样的扩展方法：

```
public static string DecodeFrom64(this string encodedData)
{
    var data = Convert.FromBase64String(encodedData);
    string result = System.Text.ASCIIEncoding.ASCII.GetString(data);
    return result;
} 
```

# tsql - 将空日期时间值插入 SQL 表

> ID：13258699
> 
> 赞同：1
> 
> 时间：2012-11-06T20:17:37.727
> 
> 标签：tsql, datetime, null

下面是我们用来在 SQL 数据库中填充表的存储过程。@expDate 是从 C# 批处理作业发送的参数，它从 Excel 电子表格中获取其值。

如果当前座席的培训处于活动状态，则电子表格的到期日期单元格中将没有值。这会导致从 C# 代码向存储过程发送一个空白字符串，然后将其转换为日期时间值 1900-01-01。这很好，直到我需要使用游标将新记录插入表中。

如果@expDate 值为 1900-01-01，那么我需要 SQL 记录的到期日期字段中的值为 NULL。但是，我不能设置 @expDate = NULL 也不能简单地将其设置为空白 ('') [编辑：由于业务规则，我无法设置为空白。空白值将导致该字段的值设置为 1900-01-01]。有什么建议么？

```
 DECLARE @date datetime = GETDATE()
    IF @expDate = '1900-01-01' SET @flag = '1'
    IF @expDate = '1900-01-01' SET @expDate = GETDATE()

    DECLARE prod_cursor CURSOR LOCAL SCROLL FOR
    SELECT ProductCode 
    FROM CourseToProduct 
    WHERE CourseCode = @courseCode and (TerminationDate >= @expDate OR TerminationDate IS NULL)

    IF @flag = '1' SET @expDate = ''

    OPEN prod_cursor

    FETCH NEXT FROM prod_cursor
    INTO @productCode

    WHILE @@FETCH_STATUS = 0
    BEGIN
        IF NOT EXISTS
        (
        SELECT *
        FROM AgentProductTraining
        WHERE @sNumber = SNumber and 
              @courseCode = CourseCode and 
              @productCode = ProductCode and 
              @dateTaken = DateTaken
        )
        BEGIN
            IF @sNumber IS NOT NULL
            BEGIN
                INSERT INTO AgentProductTraining
                            (
                             SNumber,
                             CourseCode,
                             ProductCode,
                             DateTaken,
                             DateExpired,
                             LastChangeOperator,
                             LastChangeDate
                            ) 
                VALUES      (
                             @sNumber,
                             @courseCode,
                             @productCode,
                             @dateTaken,
                             COALESCE(@expDate, 'NULL'),
                             @lastChangeOperator,
                             @lastChangeDate
                           )    
            END
        END

        FETCH NEXT FROM prod_cursor
        INTO @productCode
    END
    CLOSE prod_cursor;
    DEALLOCATE prod_cursor; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:40:36.870

通过遵循 Oded 的评论，我摆脱了 COALESCE 语句并将@flag 值设置为 NULL 而不是 NULL。通过更改这行代码：

```
IF @flag = '1' SET @expDate = '' 
```

对此：

```
IF @flag = '1' SET @expDate = NULL 
```

sproc 现在可以工作了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:41:12.007

这行得通吗？

```
 INSERT INTO AgentProductTraining
                        (
                         SNumber,
                         CourseCode,
                         ProductCode,
                         DateTaken,
                         DateExpired,
                         LastChangeOperator,
                         LastChangeDate
                        ) 
            VALUES      (
                         @sNumber,
                         @courseCode,
                         @productCode,
                         @dateTaken,
                         CASE WHEN @expDate = '1900-01-01' THEN Null ELSE @expDate END, 
                         @lastChangeOperator,
                         @lastChangeDate
                       ) 
```

# php - 在 html 表中显示 mysql 数据库

> ID：13258704
> 
> 赞同：-4
> 
> 时间：2012-11-06T20:17:51.613
> 
> 标签：php, html, mysql

我想从我的数据库中获取所有数据并将其放入 HTML 表中。我的数据库如下所示：

```
username password q1 q2 q3 q4 q5 hscore lscore 
```

我想获取所有用户名并将它们与他们的 hscore（代表高分）放在一起，最高分在顶部，最小在底部。这基本上是一个排行榜。（数据库称为用户）

我自己也尝试过，但我无法获得任何有成效的东西。如果您需要更多信息，请询问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:25:01.803

快速而肮脏的解决方案：

```
<?
echo '<table><thead><tr><th>Username</th><th>High Score</th></tr></thead><tbody>';
$q = mysql_query("SELECT username,hscore FROM TABLENAME ORDER BY hscore");
while($f = mysql_fetch_array($q)) {
    echo '<tr><td>'.$f['username'].'</td><td>'.$f['hscore'].'</td><tr>';
}
echo '</tbody></table>';
?> 
```

TABLENAME 应替换为您的表名。这是假设每个用户只有一行。如果您允许每个用户多于一条记录，则可以使用 GROUP BY。

# wix - msi 日志输出中的未知字段

> ID：13258707
> 
> 赞同：0
> 
> 时间：2012-11-06T20:18:05.997
> 
> 标签：wix, windows-installer

我想知道 (A4:68) 字段是什么意思，是否可以用来帮助调试代码。

MSI (s) (A4:68) [09:44:03:998]: 执行 op: ActionStart(Name=AttachDB,,)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:39:04.960

链接的博客非常清楚地解释了如何解释 MSI 日志：

*   [如何解释 Windows 安装程序日志](http://blogs.technet.com/b/richard_macdonald/archive/2007/04/02/how-to-interpret-windows-installer-logs.aspx)

正如文章所述，`(A4:68)`它们分别是进程 ID 和线程 ID。

# javascript - 指令完全编译/渲染后调用函数

> ID：13258711
> 
> 赞同：3
> 
> 时间：2012-11-06T20:18:16.313
> 
> 标签：javascript, angularjs

（如果我弄错了一些术语，请原谅我；我是 Angular 的新手。）

我有一个看起来像这样的指令：

```
return {
    template: "<p>{{size}}</p><div ng-transclude></div>",
    link: function(scope, element) {
        scope.size = element.outerWidth();
    }
}; 
```

我希望此设置在解决`scope.size`后生效`ng-transclude`。但是，当`link`调用该函数时，情况并非如此。有没有办法`ng-transclude`在其内容中的 subs 之后运行代码？我必须监听 DOM 中的加载事件吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-30T04:08:06.870

$timeout() 将工作放在本机事件队列上，因此它将在浏览器呈现后得到服务。所以试试这个：

```
return {
    transclude: true,
    template: "<p>{{size}}</p><div ng-transclude></div>",
    link: function(scope, element) {
        //scope.size = element.outerWidth();
        $timeout(function() {
            scope.size = element.outerWidth();
        },0)

    }
}; 
```

# c# - 将变量传递给 catch 块

> ID：13258713
> 
> 赞同：4
> 
> 时间：2012-11-06T20:18:37.010
> 
> 标签：c#, web-services, c#-4.0

基本上我有一个字符串errorMessage，我想将它传递给catch块。请帮忙。

```
[WebMethod]
public List<SomeResult> Load(string userName)
{
   string errorMessage;
    using (VendorContext vendorContext = new VendorContext())
    {
         // ....
          foreach(....)
          {
               if(something happens)
                  errorMessage = "Vote Obama";
                else
                  errorMessage ="vote Romney";
              // blah
               try
                     {
                        // blah         
                     }
               catch (Exception e)
               {
                    logger.Trace(errorMessage);
               }
          }
     }
 } 
```

更新：

错误：使用未分配的局部变量“errorMessage”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T20:25:06.440

将错误初始化`errorMessage`为 null、string.Empty 或其他一些默认值。这是其中一种情况，编译器不够聪明，无法在使用之前确定它已被分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:28:02.307

看起来您正在尝试更改基于某些条件记录的错误消息。与其在 try / catch 块之前创建错误消息变量并设置它，不如从 try / catch 块中抛出异常并将错误消息传递给构造函数。

见下文：

```
[WebMethod]
public List<SomeResult> Load(string userName)
{

    using (VendorContext vendorContext = new VendorContext())
    {
         // ....
          foreach(....)
          {

              // blah
               try
                     {
                        if(something happens) 
                            throw new Exception("Vote Obama");
                         else
                            throw new Exception("vote Romney");      
                     }
               catch (Exception e)
               {
                    logger.Trace(e.ErrorMessage);
               }
         }
     }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:34:31.193

您的字符串中需要一个初始值。

```
string errorMessage = ""; 
```

# java - 使用java就地修改文件内容

> ID：13258714
> 
> 赞同：4
> 
> 时间：2012-11-06T20:18:38.290
> 
> 标签：java, file-io, inputstream, nio

我需要**就地修改文件的**特定内容。
我**不想**创建一个新文件并重写旧文件。文件也很小，每个最大只有几 MB。
对于那些想知道的人（尽管我不确定这是否与 OP 有关），我需要修改属于版本控制的文件并且需要修改只读版本。就地进行修改要简单得多。
Java api可以做到这一点吗？
如果没有，是否有提供此功能的图书馆？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T21:03:08.783

Java 允许随机访问和写入磁盘上的文件。但是，写入文件中间只能覆盖字节——即用其他字节替换特定字节——并且不能*将*数据插入文件中间。为此，您必须在插入点之后重写所有内容。`char[]`将文件视为恰好位于磁盘上的字符数组 ( )。随机访问允许你做相当于

```
char[] file    = ... // the file on disk
char[] newData = ... // the data to be written
int pos = ...        // the position in the file to write to
for (i=0; i<newData.; i++) 
{ 
    file[pos+i] = newData[i];
} 
```

在文件中*插入*数据需要与向数组中插入数据相同的过程。插入点之后的所有数据都必须向右移动以容纳插入的数据。如果您要替换为*较短*的字符串（即删除字节），则必须将编辑后的数据左移。

其次，你说：

> 我需要修改属于版本控制的文件并且需要修改只读版本

只读就是这个意思。如果文件是只读的，则无论是否使用随机访问，都不能以任何方式对其进行修改。

你还在评论中说：

> 新文件将不受源代码控制。我将不得不找到一种方法来添加它。我试图避免这种情况

如果文件受源代码控制，您很可能正在处理*本地副本*。只要更新的文件与原始文件具有相同的名称并且位于同一目录中，那么创建文件的新实例应该没有区别。您只需将更新的版本提交到源代码控制系统。

但是，如果您*在源代码控制系统的存储库*中更新文件，那么您可能会永久损坏系统。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T20:47:25.587

假设您希望能够将文件内容作为文本进行操作，并假设文件适合内存（您说这是一个有效的假设），那么您可能会发现 Commons IO 中的方法`FileUtils`很有用：

[http://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html](http://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html)

例如：

```
File f = new File("my-file.txt");
List<String> lines = FileUtils.readLines(f, "UTF-8");
List<String> outLines = modify(lines); // Do some line-by-line text processing
FileUtils.writeLines(f, "UTF-8", outLines); 
```

因此，您将文件内容读入内存，在内存中对其进行修改，然后用内存中的新内容覆盖原始文件。这是否符合您的“就地”标准？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:20:50.737

Java 支持随机文件访问，尤其是使用`seek()`.

看看：[http ://docs.oracle.com/javase/tutorial/essential/io/rafs.html](http://docs.oracle.com/javase/tutorial/essential/io/rafs.html)

# mule - HTTP POST 接收到无效的子类型错误

> ID：13258715
> 
> 赞同：0
> 
> 时间：2012-11-06T20:18:39.410
> 
> 标签：mule

我有两个试图通过 HTTP POST 连接的 Mule 流。运行时，我收到无效的子类型错误。我在下面包含了请求和 Web 服务的代码。我还包括了给出的错误。知道我做错了什么吗？

要求

```
<http:outbound-endpoint exchange-pattern="request-response" host="localhost" port="8081" contentType="text/xml" doc:name="HTTP" mimeType="text/xml" path="***some path removed***" method="POST"/> 
```

网络服务

```
<mule xmlns:jersey="http://www.mulesoft.org/schema/mule/jersey" xmlns:http="http://www.mulesoft.org/schema/mule/http" xmlns="http://www.mulesoft.org/schema/mule/core"
xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
xmlns:spring="http://www.springframework.org/schema/beans" version="EE-3.3.1"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/http http://www.mulesoft.org/schema/mule/http/current/mule-http.xsd
http://www.mulesoft.org/schema/mule/jersey http://www.mulesoft.org/schema/mule/jersey/current/mule-jersey.xsd
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd ">

<spring:beans>
<spring:bean id="propertyConfigurer" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
<spring:property name="ignoreResourceNotFound" value="true"/>
<spring:property name="locations">
<spring:list>
<spring:value>classpath:local_valueDate.properties</spring:value>
<spring:value>classpath:valueDate.properties</spring:value>
</spring:list>
</spring:property>
</spring:bean>
<spring:bean id="staticDataLoader" name="staticDataLoader" class="StaticDalaLoader"
scope="singleton" init-method="initialize" />
<spring:bean id="valueDateService" name="valueDateService" class="ValueDateService">
<spring:property name="staticDataLoader" ref="staticDataLoader" />
</spring:bean>
</spring:beans>

<flow name="paymentHubServicesFlow1" doc:name="paymentHubServicesFlow1">
<inbound-endpoint exchange-pattern="request-response" responseTimeout="10000" address="${valueDate.host.url}"/>

<jersey:resources doc:name="REST">
<component doc:name="Value Date Service">
<spring-object bean="valueDateService"/>
</component>
</jersey:resources>
</flow>
</mule> 
```

错误

```
********************************************************************************
Message : Failed to invoke JerseyResourcesComponent{paymentHubServicesFlow1.component.28420486}. Component that caused exception is: JerseyResourcesComponent{paymentHubServicesFlow1.component.28420486}. Message payload is of type: ContentLengthInputStream
Code : MULE_ERROR--2
--------------------------------------------------------------------------------
Exception stack is:
1\. Sub type is invalid. (javax.activation.MimeTypeParseException)
javax.activation.MimeType:-1 (http://java.sun.com/j2ee/sdk_1.3/techdocs/api/javax/activation/MimeTypeParseException.html)
2\. javax.activation.MimeTypeParseException: Sub type is invalid. (org.mule.api.MuleRuntimeException)
org.mule.transformer.types.SimpleDataType:53 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/api/MuleRuntimeException.html)
3\. Failed to invoke JerseyResourcesComponent{paymentHubServicesFlow1.component.28420486}. Component that caused exception is: JerseyResourcesComponent{paymentHubServicesFlow1.component.28420486}. Message payload is of type: ContentLengthInputStream (org.mule.component.ComponentException)
org.mule.component.AbstractComponent:148 (http://www.mulesoft.org/docs/site/current3/apidocs/org/mule/component/ComponentException.html)
--------------------------------------------------------------------------------
Root Exception stack trace:
javax.activation.MimeTypeParseException: Sub type is invalid.
at javax.activation.MimeType.parse(Unknown Source)
at javax.activation.MimeType.<init>(Unknown Source)
at org.mule.transformer.types.SimpleDataType.<init>(SimpleDataType.java:43)
+ 3 more (set debug level logging or '-Dmule.verbose.exceptions=true' for everything)
******************************************************************************** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-07T12:55:31.027

如果您从 http:outbound 中删除 mimeType="text/xml"。它将停止错误。但是你会收到一个警告，说没有设置 Content-Type。如果您需要添加 Conent-Type，我会添加一个 set-property 来解决它。

```
<set-property propertyName="Content-Type" value="text/xml" doc:name="Property" /> 
```

有一个 JIRA 已经为 contentType 打开了它的外观：http: [//www.mulesoft.org/jira/browse/MULE-6487](http://www.mulesoft.org/jira/browse/MULE-6487)

但是对 Content-Type 有影响的 mimeType 很可能是另一个值得报告的错误。

# jquery - 文本溢出时放置一个按钮

> ID：13258718
> 
> 赞同：7
> 
> 时间：2012-11-06T20:18:55.747
> 
> 标签：jquery, css

所以说我有一个`<div>`里面有一个长文本并定义了高度，当文本溢出那个 div 高度时，我想`...`在文本的末尾显示，所以这很容易用一点 css，但我想要更高级的东西。

我想要的是拥有那个`...`和一个按钮`(Show more)`，我做到了，但这是一个相当肮脏的黑客，我知道应该有更好的解决方案，无论如何请看看这个小提琴：http: [//jsfiddle.net/ DgBR2/1/](http://jsfiddle.net/DgBR2/1/)

基本上我只是在文本顶部浮动了另一个带有白色背景的 div，但是如果我想更改该文本高度或其他东西，这会在未来产生问题，所以我想要更好的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:20:12.107

*2012 年 11 月 7 日修订*

**强大的文本溢出滑块**

[**健壮的小提琴**](http://jsfiddle.net/videsignz/wyJZV/)

特点：
1\. 自动调整字体大小
2\. 自动调整“显示更多/显示更少”按钮
3\. 轻松更改动画速度
4\. 轻松更改“显示更多/显示更少”按钮间距
5\. 轻松选择“显示”的哪一侧更多/显示更少'显示
6\. 轻松设置最初应显示的文本行数

**jQuery**

```
//Editable Values

var lines = 5; //Choose how many lines you would like to initially show
var buttonspacing = 7; //Choose Button Spacing
var buttonside = 'right'; //Choose the Side the Button will display on: 'right' or 'left'
var animationspeed = 1000; //Choose Animation Speed (Milliseconds)

//Do not edit below

var lineheight = $('.text').css("line-height").replace("px", "");
startheight = lineheight * lines;
$('.text_container').css({'height' : startheight });

var buttonheight =  $('.button').height();

$('div.container').css({'padding-bottom' : (buttonheight + buttonspacing ) });

if(buttonside == 'right'){
    $('.button').css({'bottom' : (buttonspacing / 2), 'right' : buttonspacing });
}else{
   $('.button').css({'bottom' : (buttonspacing / 2), 'left' : buttonspacing });
}

$('.open').on('click', function(){
        var newheight = $(this).parent('div.container').find('div.text').height();
        $(this).parent('div.container').find('div.text_container').animate({'height' : newheight }, animationspeed );
        $(this).hide().siblings('.close').show();

        });

$('.close').on('click', function(){
    var h = $(this).parent('div.container').find('div.text').height();
    $(this).parent('div.container').find('div.text_container').animate({'height' : startheight }, animationspeed );
    $(this).hide().siblings('.open').show();
    });

$('div.container').each(function(){
    if( $(this).find('div.text').height() >= $(this).find('div.text_container').height() ){
        $(this).find('.button.open').show();

    }
}); 
```

**HTML**

```
<div class="container">
    <div class="text_container">
        <div class='text'>

           // Text goes Here

        </div>
     </div>
    <div class='button open'>...Show More</div>
    <div class='button close'>...Show Less</div>
</div> 
```

**CSS**

```
.button {position:absolute; z-index:5; display:none; cursor:pointer; color:#555555;}
.close {display:none; }
.open {display:none;}

.container{
    width:200px;
    overflow:hidden;
    border:1px solid #cacaca;
    border-radius:5px;
    font-size:12px;
    position:relative;
    margin:auto;
    padding:10px 10px 0px 10px;
    float:left;
    margin:5px;
}

.text_container{
    height:105px;
    overflow:hidden;

}

.text {} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:34:48.287

为了使其更健壮，您可以简单地删除设置的高度，而不是设置新的高度。这将允许容器增长到它的内容有多大。

另外，我建议使用类似`.collapsed`或类似的单独类，并且只是切换该类，而不是在某个值和`auto`.

这是您编辑的小提琴：http: [//jsfiddle.net/DgBR2/9/](http://jsfiddle.net/DgBR2/9/)

新的JS：

```
$(".enlarge").click(function(){
    $(this).siblings('.text').toggleClass('collapsed');   
}); 
```

新的 CSS：

```
.container{
    width:200px;
    border:1px solid #cacaca;
    font-size:12px;
    position:relative;
    margin:auto;
    padding: 10px 10px 26px;
}

.text.collapsed {
    height: 100px;
    overflow: hidden;
}

.enlarge{
    position:absolute;
    height: 21px;
    bottom: 0;
    left: 0; right: 0; text-align: center;
    color:blue;
} 
```

* * *

好的，我正在编辑我的答案以保留动画。这个解决方案有点棘手，涉及三个关键事项：

1.  当你的元素没有折叠时获取 -classed 元素的`height`值`.collapsed`，这样你就可以在不使用幻数的情况下将元素折叠到所需的高度。为此，您可以创建一个新元素并为其指定`.collapsed`类，然后检查该新（但未渲染）元素的高度。

2.  在折叠时获取展开元素的完整高度，以便您可以将其动画到新高度 - 因为`.animate()`不适用于该`auto`值。

3.  动画完成后删除设置`height`值，这样你的文本元素就没有固定的高度，如果你以后改变它的内容，它会自动扩展/收缩。

这是您的新启用动画的小提琴：http: [//jsfiddle.net/DgBR2/13/](http://jsfiddle.net/DgBR2/13/)

JS看起来像这样：

```
$(".enlarge").click(function(){
    var btn = $(this),
        text = btn.siblings('.text'),
        collapsed = text.hasClass('collapsed'),
        // predict the height that the element SHOULD be: its full (scroll) height if it is currently collapsed, or the value of the 'height' CSS property that it will have when collapsed if it is not currently collapsed
        height = collapsed ? text[0].scrollHeight : $('<div>', {'class': 'text collapsed'}).css('height');

    text.animate({'height': height}, 400, function() {
        // do all further changes after the animation completes
       text.toggleClass('collapsed'); // we use this class for our animation logic, so we need to toggle it correctly
       text.css('height', ''); // we don't want the text element to have a fixed height, so remove whatever height we set earlier
       btn.text(collapsed ? 'Show Less' : '...(Show More)');
    });    

}); 
```

* * *

最后的编辑使其更加模块化：从标记中删除扩展器 div（因为它们不是语义的）并将它们添加到 JS 中。这种方法还确保 1) 内容不溢出的文本容器不会有扩展按钮 2) 当您添加新文本 div 或更改现有文本 div 的内容时，您可以正确隐藏/显示扩展按钮。

我将画出 JS 的草图，以展示它与上一次迭代相比有何变化：

```
// PSEUDOCODE
$(document).ready(function() {
    var addExpander = function() {
            if (this.scrollHeight <= collapsedHeight) {
                // remove expander button if it exists
            } else if (this /* contains no expander button */) {
                // add the expander with its click function
            }
        };

    // call it on all collapsed text divs currently in the document
    $('.text.collapsed').each(addExpander);

    // how to call it again after changing a text div's content:
    addExpander.call(/* your changed div */);
}); 
```

工作演示：http: [//jsfiddle.net/DgBR2/18/](http://jsfiddle.net/DgBR2/18/)

# windows-8 - 如何使用 Javascript 在 Windows 8 应用程序中使用表存储服务

> ID：13258721
> 
> 赞同：0
> 
> 时间：2012-11-06T20:19:10.097
> 
> 标签：windows-8, azure-storage, azure-table-storage

我正在使用 JavaScript 开发 Windows 8 应用程序。我想使用 Azure 表存储作为我的数据库，因为我存储的数据只是一个键值对。我在 Azure 网站上找不到任何相同的链接。我可以使用 Azure 表存储服务通过 javascript 与我的应用程序连接吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T08:02:23.393

是的，您可以，请下载 widows.azure.storage.winmd：http: [//blogs.msdn.com/b/windowsazurestorage/archive/2012/11/05/windows-azure-storage-client-library-for- windows-runtime.aspx](http://blogs.msdn.com/b/windowsazurestorage/archive/2012/11/05/windows-azure-storage-client-library-for-windows-runtime.aspx) 虽然我还没有搞定，但我认为这是一种可能的方式，因为我可以在我的 C#/xmal 商店应用程序中使用它。

移动服务是另一种选择，但我认为这不是一个好选择，因为它很难调试。

# qt - Qt 模型/视图框架，树视图

> ID：13258725
> 
> 赞同：1
> 
> 时间：2012-11-06T20:19:24.970
> 
> 标签：qt, treeview, model-view, qstandarditemmodel

我正在试验 Qt 和模型/视图框架。
我有一些数据想在树形视图中显示和编辑。
我已经阅读了文档和[本](http://qt-project.org/doc/qt-4.8/modelview.html)教程，但我仍然不确定在我的案例中最佳实践是什么。
数据来自服务器，看起来像这样：

```
int id;
int parentId;
QString name;
float price; 
```

id 是“正在运行”的数字，并且都是唯一的，因此数据可能看起来像这样。

```
Id =1
parentId =0 
name= food

id = 5 
parentId =1
name = pizza 
```

该 id 对最终用户不感兴趣，不应显示。

使用递归函数将其纳入层次结构应该非常简单。（但这里也欢迎任何想法）

1.  我应该将我从服务器获得的数据直接放入一个`QStandardItemModel`?
2.  创建我自己的类并继承有什么意义`QStandardItemModel/Item`吗？
3.  每个字段（id、name、price）是它自己的`QStandardItem`吗？

如果在＃3 上是，当我编辑包含名称的项目时，我如何将 id 连接到该名称，以便我可以将更改发布回服务器。

正如您所了解的这些是基础知识，推荐结构的草图会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:44:28.880

不要使用 QStandardItemModel。如果您有一个 id，则将其存储为 QModelIndex 的 internalId 并使用 QAbstractItemModel。

# android - 如何使用 robolectric 覆盖注入的 @Singleton 类？

> ID：13258730
> 
> 赞同：4
> 
> 时间：2012-11-06T20:20:03.280
> 
> 标签：android, mockito, roboguice, robolectric

我有一个片段，我正在尝试使用使用 @Singleton api 类的 Robolectric（和 Mockito）进行测试。我试图以一种可以自定义每个测试的响应的方式来模拟单例。这是我的片段引用的 API 类：

```
@Singleton
public class MyApi {
    @Inject
    public MyApi(Context context) {
        //Do something
    }

    public MyObject getMyFeed(){
    }
} 
```

这是我正在尝试设置的测试类：

```
@RunWith(RobolectricTestRunner.class)
public class MyFragmentTest extends TestCase {

    @Inject MyApiInterceptor myApi;
    @Inject Activity shadowActivity;
    @Inject LayoutInflater shadowLayoutInflator;
    @Inject ViewGroup shadowViewGroup;

    @Before
    public void setUp() throws Exception {
        Robolectric.bindShadowClass(SingleThreadActivity.class);
        ShadowApiModule module = new ShadowApiModule();
        Module roboGuiceModule = RoboGuice.newDefaultRoboModule(Robolectric.application);
        RoboGuice.setBaseApplicationInjector(Robolectric.application, RoboGuice.DEFAULT_STAGE,
                roboGuiceModule);
        RoboInjector injector = RoboGuice.getInjector(Robolectric.application);
        injector.injectMembers(this);
    }
    @After
    public void tearDown() {
        RoboGuice.util.reset();
        Application app = Robolectric.application;
        DefaultRoboModule defaultModule = RoboGuice.newDefaultRoboModule(app);
        RoboGuice.setBaseApplicationInjector(app, RoboGuice.DEFAULT_STAGE, defaultModule);
    }

    @Test
    public void testOnCreateView() throws Exception{

        myApi.mock = mock(MyApi.class);
        when(myApi.mock.getMyFeed()).thenReturn(new MyObject());

        MyFragment frag = new MyFragment();
        frag.onAttach(shadowActivity);
        frag.onCreate(null);
        frag.onCreateView(shadowLayoutInflator,shadowViewGroup, null);
        frag.onActivityCreated(null);
        frag.onStart();
        frag.onResume();
    }
}

@Singleton
class MyApiInterceptor extends MyApi
{
    public MyApi mock;

    @Inject
    public MyApiInterceptor(Context context) {
        super(context);
    }

    @Override
    public MyObject getMyFeed() throws Exception {
        return mock.getMyFeed();
    }
}
@Implements(Activity.class)
class SingleThreadActivity extends ShadowActivity{

    @Override
    public void runOnUiThread(Runnable action) {
        action.run();
    }
}

class ShadowApiModule extends AbstractModule {

    @Override
    protected void configure() {
        bind(Context.class).to(MockContext.class);
        bind(ViewGroup.class).toInstance(mock(ViewGroup.class));
        bind(MyApi.class).to(MyApiInterceptor.class);
    }
} 
```

但是，当我运行测试时，我得到以下信息：

```
com.google.inject.ConfigurationException: Guice configuration errors:

1) No implementation for android.view.ViewGroup was bound.
  while locating android.view.ViewGroup
    for field at com.mysource.MyFragmentTest.shadowViewGroup(Unknown Source)
  while locating com.mysource.MyFragmentTest

1 error
    at com.google.inject.internal.InjectorImpl.getMembersInjector(InjectorImpl.java:952)
    at com.google.inject.internal.InjectorImpl.getMembersInjector(InjectorImpl.java:957)
    at com.google.inject.internal.InjectorImpl.injectMembers(InjectorImpl.java:943)
    at roboguice.inject.ContextScopedRoboInjector.injectMembersWithoutViews(ContextScopedRoboInjector.java:243)
    at roboguice.inject.ContextScopedRoboInjector.injectMembers(ContextScopedRoboInjector.java:236)
    at com.mysource.MyFragmentTest.setUp(RSSFeedActivityTest.java:58)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at com.xtremelabs.robolectric.RobolectricTestRunner$1.evaluate(RobolectricTestRunner.java:292)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76)
    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:195)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at com.intellij.rt.execution.application.AppMain.main(AppMain.java:120) 
```

根据我对 roboguice 的了解，由于某种原因，它似乎无法用 ShadowViewGroup 注入“shadowViewGroup”，但我不知道为什么。如果我以错误的方式解决这个问题，请让我知道，但这似乎应该有效。

你们都可以告诉我：1）为什么我的测试不起作用或 2）注入类使用的自定义单例的更好方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:49:02.943

`ViewGroup`实施是不可见的。您已声明`ShadowApiModule`它不会传递给 RoboGuice。

反而：

```
Module roboGuiceModule = RoboGuice.newDefaultRoboModule(Robolectric.application); 
```

试试这个：

```
Module roboGuiceModule = Modules.override(RoboGuice.newDefaultRoboModule(Robolectric.application)).with(new ShadowApiModule()) 
```

## 评论回复：

* * *

如果您在测试中遇到单例问题，那么只需将其删除。测试应该是隔离的，所以这里不需要单例模式。

在生产代码中，使用in 设置绑定而不是`@Singleton`类注释`Singleton.class``Module`

```
bind(MyApi.class).to(MyApiImpl.class).in(Singleton.class); 
```

对于测试模块，在您的情况下`ShadowModule`，设置不带`Singleton`.

```
bind(MyApi.class).to(MyApiImpl.class); 
```

* * *

注入影子类的另一种情况。您应该注入必须获得注入成员或具有不同实现的对象。无需注入`ViewGroup`或`Activity`除非有自定义实现的绑定。

Look at the first Robolectric example: [http://pivotal.github.com/robolectric/](http://pivotal.github.com/robolectric/)
There is only constructor and it works.

# windows-7 - 更新路径而不是覆盖 cmd

> ID：13258732
> 
> 赞同：0
> 
> 时间：2012-11-06T20:20:06.133
> 
> 标签：windows-7, cmd

我正在运行以下 cmd 来设置我的系统环境变量。

```
call C:\Windows\system32>reg add "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control
\Session Manager\Environment" /v JAVA_HOME /t REG_EXPAND_SZ /d "C:\Program Files\Java
\jdk1.6.0_37" 
```

我想对我的路径做类似的事情，但我不想覆盖那里的值，我只想添加到它们中。运行上述命令会覆盖还是更新？如果它覆盖了我将如何让它更新呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-22T01:45:44.673

是的，`REG ADD`会覆盖现有值，但我写了一个脚本，应该可以帮助你。

请注意后面的字符`delims=`：这些不是空格，它是一个制表符（ASCII #9）。

```
@ECHO OFF
REM Declare all variables as local.
SETLOCAL

SET GET_PATH=REG QUERY "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment" /v Path
SET SET_PATH=REG ADD "HKEY_LOCAL_MACHINE\SYSTEM\CurrentControlSet\Control\Session Manager\Environment" /v Path /t REG_EXPAND_SZ /f /d

REM Get %PATH% from registry and filter REG output (drop all but actual %PATH% value).
FOR /F "tokens=3* delims=   " %%P IN ('%GET_PATH% ^| FINDSTR Path') DO SET RESULT=%%P

REM Check for the trailing semicolon.
IF "%RESULT:~-1%" == ";" (SET SEMICOLON=) ELSE (SET SEMICOLON=;)

REM Add new directories to %PATH%. 
SET DIRS=C:\Foo\Bar;E:\Bar\Baz
SET RESULT=%RESULT%%SEMICOLON%%DIRS%

REM Save result to the registry.
%SET_PATH% "%RESULT%" 
```

# java - MVC 对在哪里放置逻辑感到困惑。

> ID：13258733
> 
> 赞同：0
> 
> 时间：2012-11-06T20:20:16.710
> 
> 标签：java, model-view-controller

所以我目前正在建模一个 MVC 类型系统，完全不了解这种模式，我试图弄清楚一些事情，但有一个特别的事情我不知道如何处理。

在我的系统中，我创建了一个具有 CRUD 功能的客户类和 DAO，我理解（在一定程度上）等等......

我的数据库中有一个记录数据的表，用户永远不会访问该表，只有在他们可以查看该表中数据的计算/结果的范围内。

我如何在我的设计中表示这一点，我不需要 CRUD 功能，只需从 SQL 返回结果（例如选择平均值/总计/等）。

我显然需要访问数据，但我不确定我是否需要一个为表格建模的类，或者只是在某个地方放置逻辑。

任何帮助或指示将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:29:54.347

视图（显示模型的 JSP 或 JSF）-> 服务层（启动事务的业务代码，使用 DAO 等，填充模型）-> 数据访问层（您的 doa 和数据映射器）-> DB

*   确保您的模型反映了用户的需求。
*   在服务层执行事务划分
*   在数据访问层执行数据库访问和数据映射

**注意：这些都不需要 Spring。纯 Java EE 绰绰有余。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:33:54.143

您应该使用一些框架来实现 MVC，例如 Struts 或 Spring。对于您的场景，Struts 会很好，业务逻辑应该在普通的 java 类中。

前端控制器应该将请求发送到具有业务逻辑的模型类，并且表应该使用 Java Beans 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:26:49.877

如果你想要严格的 MVC，那么你必须创建代表你的表的类，并且不要直接访问表。

PS 这个类可能只包含一个方法，没关系。

# postgresql - 如何在 LIKE 和 PostgreSQL 中不使用替换函数的情况下进行转义

> ID：13258735
> 
> 赞同：1
> 
> 时间：2012-11-06T20:20:22.347
> 
> 标签：postgresql, escaping, sql-like

简短版本：我需要一个函数来转义字符串以在`LIKE`表达式中使用，所以`fr_e%d`变成`fr\_e\%d`.

* * *

我正在寻找转义查询结果而不需要使用替换。因为在这个结果中我有这个 char _ 里面的路径。并且因为我在 LIKE 语句中使用了这个结果，所以它使“_”成为像 start * 一样的小丑。

我必须使用 LIKE，因为我在同一个语句中做一些东西连接，需要我使用 LIKE 的事实。

我尝试 ~ 替换 LIKE 但我会遇到与 char '.' 相同的问题 因为 ~ 是使用正则表达式，所以也跳过这个解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T23:19:04.350

```
create function quote_like(text) returns text language sql immutable strict as
  $quote_like$
    select regexp_replace($1, $$[_%\\]$$, $$\\\&$$, 'g');
  $quote_like$; 
```

此函数将所有出现的`_`,`%`和`\`在提供的字符串中添加`\`. 例如，您可以像这样使用它：

```
select * from tablename
  where tablecolumn like
    '%'
    ||
    (select quote_like(substring) from substrings where substring_id=123)
    ||
    '%'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T21:28:51.933

### 更新

由@Tometzky 的声明触发：

> 使用`regexp_replace`比简单地更好`replace`（...）

我不得不不同意。正则表达式函数功能强大但速度相对*较慢*。
因此，事件 3x`replace()`比单个简单的要快`regexp_replace()`- 至少在我的测试中：

```
CREATE OR REPLACE FUNCTION quote_like2(text)
  RETURNS text LANGUAGE SQL IMMUTABLE STRICT AS
$func$
SELECT replace(replace(replace(
         $1
        ,'\', '\\') -- must come first
        ,'_', '\_')
        ,'%', '\%');
$func$; 
```

请注意，我使用普通单引号而不是美元引号。这需要[`standard_conforming_strings = on`](http://www.postgresql.org/docs/current/interactive/sql-syntax-lexical.html#SQL-SYNTAX-STRINGS-ESCAPE)，这是自 PostgreSQL 9.1 以来的默认值。

使用您的数据尝试这两个功能：

```
EXPLAIN ANALYZE SELECT quote_like1(col) from tbl; 
```

### 原始答案

与您的问题标题相反，您通常会使用[`replace()`或类似的字符串函数](http://www.postgresql.org/docs/current/interactive/functions-string.html)来准备您的模式。考虑这个演示：

```
SELECT 'abcde' LIKE ('abc_' || '%')  -- TRUE
      ,'abc_e' LIKE ('abc_' || '%')  -- TRUE
      ,'abcde' LIKE (replace('abc_', '_', '\_')  || '%')   -- FALSE
      ,'abc_e' LIKE (replace('abc_', '_', '\_')  || '%');  -- TRUE 
```

# .net - 如何确保已安装的软件包通过 TFS 到达团队成员？

> ID：13258736
> 
> 赞同：0
> 
> 时间：2012-11-06T20:20:25.857
> 
> 标签：.net, tfs, nuget, nuget-package

在我的开发团队中，我们遇到了一些关于 Nuget 包无法通过 TFS 传递给团队成员的问题。有没有办法保证这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T04:10:34.100

正如 Xavier 所提到的，您应该在您的解决方案中启用“包还原”功能。有关详细信息，请参阅[使用 NuGet 而不将包提交到源代码管理](http://docs.nuget.org/docs/workflows/using-nuget-without-committing-packages)。

# sql-server-2008 - 新 SQL Server 用户登录失败

> ID：13258737
> 
> 赞同：3
> 
> 时间：2012-11-06T20:20:40.813
> 
> 标签：sql-server-2008

我在安全选项卡的 SQL Server Management Studio (SQL Server 2008 Express) 中创建了新用户。

指定登录名、SQL Server 身份验证、输入密码、分配服务器角色`sysadmin`、映射到我的数据库并指定为`db_owner`. 此外，在该用户拥有的选项卡 Schemas 中指定了数据库安全性`db_owner`。

我检查了很多教程，但所有教程都和我一样，但是当我尝试登录 SQL Server（甚至手动）时，会抛出错误消息：

> *“MyUser”登录失败（Microsoft SQL Server，错误：18456）*

知道有什么问题吗？

非常感谢。

彼得

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-17T02:49:14.027

安装 SQL Server 并为 SQL Server 创建新的登录用户后无法登录 SQL Server？您可以首先**检查错误日志文件**中的错误描述。查找条目，然后确认“**状态**”在条目中的含义。

在确定导致此 SQL Server 登录错误的原因后，采取适当的措施。一般来说，你需要根据不同的情况来做。

1.  您需要将身份验证模式更改为混合身份验证或 SQL Server 身份验证模式。
2.  如果登录被禁用，您必须启用 SQL 登录用户。
3.  如果登录用户密码不正确，请重置 SQL Server 用户密码。
4.  如果登录有效但服务器访问失败，则将 Windows 防火墙配置为允许 SQL Server 访问。有关修复用户登录失败错误的更多详细信息，您可以参考这篇文章。 [http://www.isunshare.com/sql-server/fix-sql-server-failed-login-error.html](http://www.isunshare.com/sql-server/fix-sql-server-failed-login-error.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-14T09:28:10.793

我遇到了同样的问题，并通过将服务器更改为混合身份验证模式解决了我的问题。就我而言，我尝试使用 SQL 服务器登录名登录，但服务器仅设置为接受 Windows 身份验证。

请参阅此链接了解如何更改它：http: [//support.microsoft.com/kb/555332](http://support.microsoft.com/kb/555332)

我意识到这个问题很老，但我希望答案对某人有所帮助。

谢谢

# jquery - 应用表格排序器后复选框无法保留其状态

> ID：13258738
> 
> 赞同：0
> 
> 时间：2012-11-06T20:20:41.530
> 
> 标签：jquery, html, knockout.js, tablesorter

我在 html 表中有一个复选框。使用 knockoutjs，我将我的 html 表绑定到 json 对象。直到现在一切正常。但是当我应用 tablesorter 时，之前选中的复选框会被取消选中。它发生在从下面列出的代码中调用 Buildtable() 函数之后。我使用的浏览器是IE6。不确定它是否是一个更严重的问题。目前无权访问任何其他浏览器。任何帮助，将不胜感激。

谢谢

```
 <div id="unassignedDiv" style="text-align:center;display:none;">
    <table class="tablesorter" id="unassignedTable">
    <thead><tr>
    <th align="center">Date</th>
    <th align="center">Rush?</th>
    </thead></tr>
    <tbody id="resultsbody" data-bind="template: { name: 'resultsTemplate', foreach: Results }"></tbody></table>

    <script id="resultsTemplate" type="text/html">
    <tr><td data-bind="text: dateneeded" align="center"></td>
    <td align="center">
    <input type="checkbox" data-bind="checked:rushindicator" disabled="disabled" />
    </td>
    </tr>
    </script>
    </div>

    //Build JsonObject
    BuildArray = function () {
           var searchjson = {
                "Results": [
                   { "dateneeded": "11/08/12", rushindicator: true },
                   { "dateneeded": "11/10/12", rushindicator: false }]};
    };

    BuildResultsPage = function () {
            $j('#unassignedDiv').show();
            var resultArray = BuildArray();
            exported.viewmodelExpanded = ko.mapping.fromJS(resultArray);
            ko.applyBindings(exported.viewmodelExpanded, $j('#unassignedDiv')[0]);        
            BuildTable(); //If this is commented, html loads checkbox with checked.
        };

    BuildTable = function () {
            $j("#unassignedTable").tablesorter({ widgets: ['zebra'], widgetZebra: { css: ["oddcolor", "evencolor"] },
                sortInitialOrder: 'desc',
                headers:
                {
                  0: { sorter: 'Date' },
                  1: { sorter: false }
                }
            }).tablesorterPager({ container: $j("#pager"), removeRows: true });
    }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T16:11:01.823

如果您使用的是原始表格排序器，请尝试[此答案](https://stackoverflow.com/a/1913041/145346)中的代码。*

如果您使用我[的 tablesorter 分支](http://mottie.github.com/tablesorter/docs/)，请使用此解析器（[演示](http://jsfiddle.net/Mottie/abkNM/78/)）：

```
$.tablesorter.addParser({
    id: 'checkbox',
    is: function(s) {
        return false;
    },
    format: function(s, table, cell, cellIndex) {
        var $t = $(table), $c = $(cell), c,

        // resort the table after the checkbox status has changed
        resort = false;

        if (!$t.hasClass('hasCheckbox')) {
            $t
            .addClass('hasCheckbox')
            // make checkbox in header set all others
            .find('thead th:eq(' + cellIndex + ') input[type=checkbox]')
            .bind('change', function(){
                c = this.checked;
                $t.find('tbody tr td:nth-child(' + (cellIndex + 1) + ') input').each(function(){
                  this.checked = c;
                  $(this).trigger('change');
                });
            })
            .bind('mouseup', function(){
                return false;
            });
            $t.find('tbody tr').each(function(){
                $(this).find('td:eq(' + cellIndex + ')').find('input[type=checkbox]').bind('change', function(){
                    $t.trigger('updateCell', [$(this).closest('td')[0], resort]);
                });
            });
        }
        // return 1 for true, 2 for false, so true sorts before false
        c = ($c.find('input[type=checkbox]')[0].checked) ? 1 : 2;
        $c.closest('tr')[ c === 1 ? 'addClass' : 'removeClass' ]('checked');
        return c;
    },
    type: 'numeric'
});

$(function() {
    $('table').tablesorter({
        headers: {
            0: { sorter: 'checkbox' }
        }
    });
});​ 
```

*   此解析器无法与原始插件一起使用的原因是格式函数参数 - cellIndex 不可用。

# ios - iOS 属性字符串——最小的例子

> ID：13258742
> 
> 赞同：7
> 
> 时间：2012-11-06T20:20:51.143
> 
> 标签：ios, nsattributedstring

我最近决定解决我遇到的问题的最佳方法是使用 NSAttributedString 实例。至少对于新手来说，文档似乎缺乏。关于stackoverflow的答案主要有两种：

1.  阅读文档
2.  使用 AliSoftware 最优秀的[OHAttributedLabel](https://github.com/AliSoftware/OHAttributedLabel "OHAttributedLabel")类。

我真的很喜欢第二个答案。但是我想更好地理解 NSAttributedString，所以我在这里提供了最小的 (?) 组装和显示属性字符串的示例，以防它帮助其他人。

我使用 Storyboards 和 ARC 在 Xcode (4.5.2) 中为 iPad 创建了一个新的单窗口项目。

AppDelegate 没有变化。

我创建了一个基于 UIView 的新类，称之为 AttributedStringView。对于这个简单的示例，最简单的方法是使用 drawAtPoint: 方法将属性字符串放在屏幕上，这需要有效的图形上下文，并且在 UIView 子类的 drawRect: 方法中最容易获得。

这是完整的 ViewController.m （没有对头文件进行任何更改）：

```
#import "ViewController.h"
#import "AttributedStringView.h"

@interface ViewController ()

@property (strong, nonatomic) AttributedStringView *asView;

@end

@implementation ViewController

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.view addSubview:self.asView];
}

- (AttributedStringView *)asView
{
    if ( ! _asView ) {
        _asView = [[AttributedStringView alloc] initWithFrame:CGRectMake(10, 100, 748, 500)];
        [_asView setBackgroundColor:[UIColor yellowColor]]; // for visual assistance
    }
    return _asView;
}

@end 
```

这里是完整的 AttributedStringView.m（没有对头文件进行任何更改）：

```
#import "AttributedStringView.h"

@interface AttributedStringView ()

@property (strong, nonatomic) NSMutableAttributedString *as;

@end
@implementation AttributedStringView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
if (self) {
    NSString *text = @"A game of Pinochle is about to start.";
    //                 0123456789012345678901234567890123456
    //                 0         1         2         3
    _as = [[NSMutableAttributedString alloc] initWithString:text];
        [self.as addAttribute:NSFontAttributeName value:[UIFont boldSystemFontOfSize:36] range:NSMakeRange(0, 10)];
        [self.as addAttribute:NSFontAttributeName value:[UIFont italicSystemFontOfSize:36] range:NSMakeRange(10, 8)];
        [self.as addAttribute:NSFontAttributeName value:[UIFont boldSystemFontOfSize:36] range:NSMakeRange(18, 19)];

        if ([self.as size].width > frame.size.width) {
            NSLog(@"Your rectangle isn't big enough.");
            // You might want to reduce the font size, or wrap the text or increase the frame or.....
        }
    }
    return self;
}

- (void)drawRect:(CGRect)rect
{
    [self.as drawAtPoint:CGPointMake(0, 100)];
}

@end 
```

# asp.net-mvc-3 - 如何在 IIS 中将虚拟目录作为应用程序

> ID：13258743
> 
> 赞同：1
> 
> 时间：2012-11-06T20:20:51.807
> 
> 标签：asp.net-mvc-3, iis, web-applications, directory, virtual

如何在 IIS 中将虚拟目录配置为应用程序以避免此类错误？我有一个使用 C# Visual Studio 构建的网页，并将虚拟目录添加到 ISS。运行页面时，我收到错误

```
 It is an error to use a section registered as allowDefinition ='MachineToApplication' beyond application level.  This error can be caused by a virtual directory not being configured as an application in IIS.

</compilation>
    <authentication mode="Forms">
    <forms loginUrl="~/LogOn" timeout="2880" /> 
```

所有这些代码目前都在我的主 web.config 中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:25:08.173

在 IIS6 中，您打开网站的属性，然后单击“主目录”选项卡。

标签“应用程序名称”旁边有一个框 - 应该有一个“创建”按钮。

点击按钮，它会将您的虚拟目录变成一个应用程序。

# css - 每边大小不同的盒子阴影

> ID：13258744
> 
> 赞同：1
> 
> 时间：2012-11-06T20:20:58.223
> 
> 标签：css

我目前正在做一个设计，其中设计师在 div 上使用了阴影。由于我不喜欢在这类事情上使用图像，所以我决定将我的 CSS 技能提升到一个新的水平。我对 CSS3 完全陌生，但我想尝试使用 box-shadow。我一直在阅读这个新功能，但我似乎无法让我的确切设计工作。

这就是我正在寻找的：

![在此处输入图像描述](../Images/e94a0fc06cbd0a0a481f7f9b7cae3da6.png)

顶部：1px；右：5px；底部：9px；左：5px

设计师为阴影使用了不同的传播（嗯，我相信在这种情况下它被称为传播）。我的问题是我无法在 div 的每侧使用不同的点差来实现这个工作，有人可以帮助我吗？

提前致谢。

```
div {
    box-shadow: 0px 0px 5px #000;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:25:54.103

box-shadow 的目的是为您分配给它的 div 创建一个阴影。您不能使特定的左上右下部分更大或更小

见：[http ://css3gen.com/box-shadow/](http://css3gen.com/box-shadow/)

可以做到这一点的唯一方法是摆弄变量

例如：

```
box-shadow: 0px 9px 15px 5px #888888; 
```

这个 box-shadow 将生成一个 box-shadow ..

*   [0px] 不向左或向右移动
*   [9px] 向下 9px
*   [15px] 有 15px 的模糊（玩弄它以获得所需的效果）
*   [5px] 是 5px 宽（在所有边上）
*   [#888888] 有灰色

另一种方法是使用边框图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T23:50:42.453

这非常接近：http: [//jsfiddle.net/EG6FA/](http://jsfiddle.net/EG6FA/)

```
div {
    ...
    box-shadow: 0px 4px 10px #777;
}​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-30T01:19:56.807

```
-webkit-box-shadow: 0px 0px 10px 5px #888888;
-moz-box-shadow: 0px 0px 10px 5px #888888;
box-shadow: 0px 0px 10px 5px #888888; 
```

（IE9 和 IE10 将呈现较小的 box-shadow。早期的 Explorer 版本将不显示阴影。）

# tomcat - 为什么 netstat 显示 Tomcat 进程监听多个端口？

> ID：13258745
> 
> 赞同：0
> 
> 时间：2012-11-06T20:21:04.197
> 
> 标签：tomcat, netstat

使用tomcat进程（pid：28899）的netstat输出如下：

```
Proto Recv-Q Send-Q Local Address           Foreign Address         State       PID/Program name
tcp        0      0 0.0.0.0:8009            0.0.0.0:*               LISTEN      28899/java      
....
tcp        0      0 0.0.0.0:8000            0.0.0.0:*               LISTEN      28899/java        
....
tcp        0      0 127.0.0.1:8005          0.0.0.0:*               LISTEN      28899/java 
```

那么为什么一个进程可以监听三个 tcp 端口呢？是不是因为8009和8005被tomcat的两个子进程监听，netstat只显示父进程ID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:52:38.563

Tomcat 侦听多个端口。8005 是关闭端口，8009 是连接器端口，用于为来自 Apache 服务器的请求提供服务。

一般来说，只要打开多个服务器套接字，一个进程就可以监听任意数量的端口。在内部，每个端口极有可能由其自己的线程处理，但即使是`select()`服务调用和异步 I/O 也不需要这样做。

# oracle - Oracle LISTAGG() 用于查询

> ID：13258746
> 
> 赞同：1
> 
> 时间：2012-11-06T20:21:14.697
> 
> 标签：oracle, plsql, oracle11g

所以我试图利用**LISTAGG()**函数来简单地构建一个逗号分隔的列表以在基础查询中使用。列表生成工作正常，我只是为了调试目的应用了一个输出，我可以看到我的列表应该是这样的：

> 值：'AB'，'AZ'，'BC'，'CA'，'CT'，'DC'，'FL'，'FO'，'GA'，'IL'，'KS'，'MA'， 'MB','ME','MN','MS','MT','NB','NC','NL','NOVA SCOTIA','NS','NT','NU',' NY','ON','ONTARIO','OR','PE','QC','QUEBEC','QUEBEC','SASKATCHEWAN','SK','TX','VT','WA' ,'YT'

当我尝试将此列表变量传递给我的查询时，只是想看看是否有任何东西会回来，什么都不会回来，但是如果我从上面（原样）复制/过去的省/州列表而不是在我的where 子句，我得到一个结果。我究竟做错了什么？

```
 DECLARE
     v_PROVINCE varchar2(500);
     v_results varchar2(1000);
  BEGIn
        dbms_output.enable(1000000);  

       Select '''' || LISTAGG(STATE, ''',''') WITHIN GROUP (ORDER BY STATE) || '''' PROV 
       INTO v_PROVINCE
       from (Select distinct STATE from ADDRDATA where STATE IS NOT NULL);

   DBMS_OUTPUT.PUT_LINE('VALUES: ' || v_PROVINCE);

   Select CITY
   INTO v_results
   from VWPERSONPRIMARYADDRESS
   where state in (v_Province)
   AND ROWNUM <= 1;

   DBMS_OUTPUT.PUT_LINE(v_results);

  END;
  / 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:38:54.527

首先，如果可能的话，在单个语句中完成所有事情几乎总是更有效。

您的第二个查询不起作用，因为您将所有内容都返回到单个字符串中。这*不是*IN 语句所要求的逗号分隔列表。

不过，有一个小技巧可以解决这个问题。假设您将字符串用于两个 SELECT 语句之间的某些内容，您可以[`regexp_substr()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions150.htm#SQLRF06303)尝试将字符串转换为可用的内容。

像这样的东西会起作用；

```
select city
  from vwpersonprimaryaddress
 where state in ( 
           select regexp_substr(v_province,'[^'',]+', 1, level) 
             from dual
          connect by regexp_substr(v_province, '[^'',]+', 1, level) is not null
                  ) 
```

该变量`v_province`必须更改为被引用两次，例如`'''AB'',''AZ'',''BC'''`为了使其工作。

这是一个[工作示例](http://www.sqlfiddle.com/#!4/666fd/5)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:51:25.223

您尝试执行的操作将不起作用，因为`IN`运算符将逗号分隔的列表视为单个值。理论上，您可以将值收集到单个字符串中，然后将字符串解析为单独的值，以便您的下一个查询可以解释它。但是，这将是一个非常糟糕的主意。

一个更好的主意是使用数组将您的值列表从第一个查询传递到第二个查询：

```
create type nt_varchar_50 as table of varchar2(10)
/

DECLARE
     v_PROVINCE nt_varchar_50;
     v_results varchar2(1000);
     cursor cur_provinces is
        Select distinct STATE from ADDRDATA where STATE IS NOT NULL;
     i pls_integer;
BEGIN
     dbms_output.enable(1000000); 
     open cur_provinces;
     fetch cur_provinces bulk collect into v_PROVINCE;
     close cur_provinces;

     DBMS_OUTPUT.PUT('VALUES: ');
     for i in v_PROVINCE.first .. v_province.last loop
         if i <> 1 then
            DBMS_OUTPUT.PUT(', ');
         end if;              
         DBMS_OUTPUT.PUT(v_PROVINCE(i));
     end loop;
     DBMS_OUTPUT.PUT_LINE();

     Select CITY
     INTO v_results
     from VWPERSONPRIMARYADDRESS
     where state in (select * from table(v_Province))
     AND ROWNUM <= 1;

     DBMS_OUTPUT.PUT_LINE(v_results);
END;
  / 
```

当然，即使这样也比最初使用单个 SQL 语句的效率要低得多。确实，如果您需要在两个查询之间进行某种不适合 SQL 的处理，或者可能需要多次使用第一个结果集时，您应该只使用这种技术。

# c++ - 多重定义，甚至包含保护

> ID：13258751
> 
> 赞同：1
> 
> 时间：2012-11-06T20:21:29.347
> 
> 标签：c++

我已经完成了需要面向对象程序的第一个任务。我开始研究（相当大和复杂的）项目，在链接多个类文件及其关联的 .h 文件时遇到了一些障碍。基本上我不断收到“类的多重定义”错误，即使我有我的包含警卫并且没有全局变量。我不会为作业本身发布我的代码，但这是一个非常简化的示例，它给了我一个相同的错误：

```
//Runner file.
#include "Class1.cpp"
int main(){
    Class1 classtest();
    return 0;
} 
```

-

```
//Class1.h
#ifndef CLASS1_H
#define CLASS1_H
class Class1
{
    public:
        Class1();
};
#endif // CLASS1_H 
```

-

```
//Class1.cpp
#include "Class1.h"
#include <iostream>
#include "Class2.cpp"
using namespace std;
Class1::Class1()
{ 
    cout << "Created Test Class1";
    Class2 testClass();
} 
```

然后几乎相同的 Class2 文件

```
//Class2.h
#ifndef CLASS2_H
#define CLASS2_H
class Class2
{
    public:
        Class2();
};
#endif // CLASS2_H 
```

-

```
#include "Class2.h"
#include <iostream>
using namespace std;

Class2::Class2()
{
    cout << "Created Class 2";
} 
```

然后整个事情会产生大约 1.4 公制的错误，其中大部分格式为： `obj\Debug\Runner.o||In function`Class2':|C:\Users\MikeD\Desktop\C++\ObjectOTesting\Class2.cpp|6| 多重定义`Class2::Class2()'| obj\Debug\Class2.o:C:\Users\MikeD\Desktop\C++\ObjectOTesting\Class2.cpp|6|first defined here|`

I KNOW I'm doing something stupid here, but I haven't been able to find out what exactly. Any help is really appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:58:35.047

You don't `#include` CPP files -- you compile them. CPP files, in turn, `#include` H files.

# jqgrid - 需要从 jqgrid 为不同的隐藏字段获取过滤器和排序行为

> ID：13258752
> 
> 赞同：0
> 
> 时间：2012-11-06T20:21:28.690
> 
> 标签：jqgrid, filter, http-post

我的页面上有一个独立于 jqgrid 提交的表单。我需要获取当前加载在客户端上的网格的任何过滤器和排序行为，并将其包含在我发送到服务器的帖子数据中，以便它可以使用相同的方式执行它需要执行的操作搜索条件。

我试过这个无济于事：

```
$("#settings").val($("#list").getGridParam("postData")); 
```

其中 settings 是我表单中隐藏字段的 id。它确实将 gridsettings 对象传递到后端，但它不包括我的任何过滤器和排序行为。

有什么建议么？

**编辑：**当我做 console.log($("#settings").val()); 在 Firefox 中，它显示了正确的过滤器和搜索条件。我在后端使用与实际网格相同的对象，但它不起作用。我是否需要以某种方式更改该对象，因为我是通过常规的 http 帖子而不是 ajax 回发来发布的？

**编辑 2：** 如果您阅读 Oleg 帖子下的评论，您会看到我是如何解决这个问题的。我必须分别传递由 getGridParam() 创建的对象中保存的每个属性。我将他的答案标记为正确答案，因为他的评论引导我走上正确的道路。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:24:34.283

我想你可以通过添加来解决问题

```
searchoptions: {searchhidden: true} 
```

`colModel`对于可以在搜索期间使用的隐藏列。如果要设置所有列的设置，可以使用`cmTemplate`jqGrid 选项：

```
cmTemplate: {searchoptions: {searchhidden: true}} 
```

有关更多详细信息，请参阅[答案](https://stackoverflow.com/a/6047856/315935)`cmTemplate`。

# zend-framework - 如何使用 Memcached 后端修复错误“无法将元数据保存到 metadataCache”？

> ID：13258754
> 
> 赞同：1
> 
> 时间：2012-11-06T20:21:31.347
> 
> 标签：zend-framework, memcached, zend-cache

我在 Zend Framework 1.6 上有应用程序，我使用 Memcached 作为后端缓存。当我重新启动 Memcached 时，我收到错误消息“将元数据保存到 metadataCache 失败”。请建议我该如何解决这个问题。

在我的 memcached.conf 中，我写了 setting -u www-data

# sql - 如何将图像加载到 varbinary 列中

> ID：13258755
> 
> 赞同：0
> 
> 时间：2012-11-06T20:21:41.133
> 
> 标签：sql, sql-server-2008, tsql

我有这样的桌子

```
CREATE TABLE [dbo].[Product](
    [Id] [int] IDENTITY(1,1) NOT NULL,
    [Name] [nvarchar](100) NOT NULL,
    [Description] [nvarchar](max) NOT NULL,
    [Price] [decimal](16, 3) NOT NULL,
    [SmallPhoto] [varbinary](max) NULL); 
```

我想将图像加载到 [SmallPhoto] 字段中

主脚本看起来像这样

```
declare @filePath varchar(max)
declare @productId int

set @filePath = 'D:\myfile.png'
set @productId = 1

update Product
set SmallPhoto = -- some actions
where Id = @productId 
```

预期结果

命令成功完成。:)

升级版：

1）我的数据库位于其他机器

2）我没有机会将文件复制到远程机器

# sql - 更新 DateTimes 的时间，但不更新日期

> ID：13258759
> 
> 赞同：1
> 
> 时间：2012-11-06T20:21:53.943
> 
> 标签：sql, sql-server

```
MyTable:
 id     int
 Date1  DateTime
 Date2  DateTime 
```

如何在不影响 Date2 日期的情况下将 Date2 的时间设置为与 Date1 相同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:38:18.330

仅更新`Date2`两个日期之间的天数差异。

```
UPDATE MyTable
SET Date2 = DATEADD(DAY, DATEDIFF(DAY, Date1, Date2), Date1); 
```

这将保留`Date2`.

**更新：**`Date2`此方法本质上是通过使用作为参考进行重构，并且仅添加和`Date1`之间的天数差异- 保留来自.`Date1``Date2``Date1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:37:41.627

这适用于 sql server 2008+

```
select cast(cast(date2 as date) as datetime) + cast(date1 as time) newdate2
from (select getdate() date2, cast('2012-01-01 20:00' as datetime) date1) a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:37:07.630

```
SELECT DATEADD(dd, 0, DATEDIFF(dd, 0, @Date2)) + DATEADD(day, -datediff(day, 0, @Date1), @Date1) 
```

# .net - 如何从 libSVM 中获取边距

> ID：13258762
> 
> 赞同：-2
> 
> 时间：2012-11-06T20:21:58.000
> 
> 标签：.net, libsvm, svm

我正在为.net 使用 libSVM。运行 SVM 训练后，我得到一个 alpha 向量。据我了解，边距是任何点与决策超平面之间的最小距离。

我不确定如何使用 alphas 来做到这一点。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T20:31:57.690

> 问：如何获得点与超平面之间的距离？
> 
> 距离为 |decision_value| / |w|。我们有 |w|^2 = w^Tw = alpha^TQ alpha = 2*(dual_obj + sum alpha_i)。因此在 svm.cpp 中请找到我们计算对偶目标值的地方（即子程序 Solve()）并添加一条语句来打印 w^Tw。

[从`libsvm`常见问题解答：](http://www.csie.ntu.edu.tw/%7Ecjlin/libsvm/faq.html#f4151)

# java - 我应该在发送数据包之间有延迟吗？

> ID：13258763
> 
> 赞同：0
> 
> 时间：2012-11-06T20:22:05.857
> 
> 标签：java, udp

我有一个应用程序正在向接收器发送 UDP 数据包，我是否应该在每个发送数据包之间有延迟，以避免接收器不堪重负，如果我这样做了，我该如何设置延迟时间？

注意：我通过不可靠的网络发送文本文件。

```
 for(int x = 0; x < len; x++)
        {
                send_msg(packet);
                Thread.sleep(200); //Should I have this?   
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:32:12.747

让操作系统为您处理时间。发送是阻塞的，所以它将依赖于操作系统缓冲区和相关的东西。PAcket 将被传递到 serer 或丢失，但一旦它们被传递 - 然后将通知对等方。它可能会推迟处理或将数据包放入队列。

# jquery-selectors - 深度嵌套，任意长度的定义列表，Jquery 中的斑马条纹

> ID：13258766
> 
> 赞同：1
> 
> 时间：2012-11-06T20:22:11.723
> 
> 标签：jquery-selectors, jquery, zebra-striping

我有一个页面，其中标记包括与任何 DT 关联的随机深度和随机数 DD 的嵌套定义列表。因此：

```
DL
- DT
- DD
- DT
- DD
- DD
  --DL
     --DT
     --DD
     --DT
     --DD
     --DD
 -DT
 -DD
 -DD 
```

我需要：

1.  zebra 将 DT/DD 组相互条纹化，并且
2.  为遇到的每个嵌套列表重新开始偶数/奇数序列。

    *   由于额外的 DD，使用 :even 和 :odd 将不起作用。
    *   我尝试使用 each 循环，如下所示：[http://jsfiddle.net/XJ9j4/](http://jsfiddle.net/XJ9j4/)，它修复了 A 但忽略了 B。即将第一个孩子 dt/dd 组合的背景颜色与第一个父母进行比较，并考虑返回应该是蓝色而不是绿色的父列表。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:36:27.070

随着我对你想要什么的新理解，我认为这会做到。如果我仍然误解，请告诉我。

```
$("dl").each(function(){
   $this = $(this);

   $this.children("dt:even").addClass("even").nextUntil("dt").addClass("even");  
   $this.children("dt:odd").addClass("odd").nextUntil("dt").addClass("odd");
}); 
```

[http://jsfiddle.net/XJ9j4/8/](http://jsfiddle.net/XJ9j4/8/)

# junit - 为什么当我使用 Mockito 的时候我的测试方法返回 null？

> ID：13258774
> 
> 赞同：1
> 
> 时间：2012-11-06T20:22:48.023
> 
> 标签：junit, mockito

我正在尝试使用 Mockito 1.9.x 模拟以下代码，它恰好位于 Spring AOP 连接点的建议方法中

```
protected void check(ProceedingJoinPoint pjp) {
   final Signature signature = pjp.getSignature();
   if (signature instanceof MethodSignature) {
      final MethodSignature ms = (MethodSignature) signature;
      Method method = ms.getMethod();
      MyAnnotation anno = method.getAnnotation(MyAnnotation.class);
      if (anno != null) {
        .....
} 
```

这是我到目前为止的模拟

```
ProceedingJoinPoint pjp = mock(ProceedingJoinPoint.class);
Signature signature = mock(MethodSignature.class);
when(pjp.getSignature()).thenReturn(signature);

MethodSignature ms = mock(MethodSignature.class);
Method method = this.getClass().getMethod("fakeMethod");
when(ms.getMethod()).thenReturn(method);

.... 
```

所以我必须在我的测试类中使用 fakeMethod() 创建一个 Method 实例，因为你不能模拟/监视最终类。使用调试器，我看到调用“this.getClass().getMethod("fakeMethod");”后方法实例很好。但在我的 check() 方法中，方法在执行“Method method = ms.getMethod();”行后为空 这会导致下一行出现 NPE。

为什么我的方法对象在测试用例中为非空，但在使用 when().thenReturn() 时我正在测试的方法中为空？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T21:54:58.037

该方法使用`signature`返回的，`pjp.getSignature()`而不是添加`ms`模拟的位置`MethodSignature`。尝试：

```
ProceedingJoinPoint pjp = mock(ProceedingJoinPoint.class);
MethodSignature signature = mock(MethodSignature.class);
when(pjp.getSignature()).thenReturn(signature);

Method method = this.getClass().getMethod("fakeMethod");
when(signature.getMethod()).thenReturn(method); 
```

# macos - Qt4是否实现了窗口图标的拖放？

> ID：13258776
> 
> 赞同：0
> 
> 时间：2012-11-06T20:22:52.470
> 
> 标签：macos, user-interface, drag-and-drop, qt4, pyqt4

OS X 中的几个窗口具有可拖放的窗口图标（例如终端、Keynote、Finder）。Qt4窗口图标可以设置拖放吗？我不知道点击窗口图标是否会触发任何事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:27:03.903

由于此功能仅适用于一个平台，因此它可能无法在 Qt 中直接使用。可能您将不得不使用 Cocoa API 来处理此类事件。您可以获得本机窗口句柄：

> WId QWidget::winId () const 返回小部件的窗口系统标识符。
> 
> 原则上是便携的，但如果你使用它，你可能会做一些非便携的事情。当心。
> 
> 如果一个小部件是非本地的（外来的）并且在其上调用了 winId()，则该小部件将被提供一个本地句柄。
> 
> 在 Mac OS X 上，返回的类型取决于 Qt 所链接的框架。如果 Qt 使用的是 Carbon，{WId} 实际上是一个 HIViewRef。如果 Qt 使用 Cocoa，{WId} 是一个指向 NSView 的指针。

使用这样的句柄，您可能可以使用本机（不可移植！）Mac OS X 代码处理“窗口图标拖动”

# icons - wavemaker 6.5 - 右侧的标题栏图标？

> ID：13258778
> 
> 赞同：1
> 
> 时间：2012-11-06T20:23:09.997
> 
> 标签：icons, titlebar, right-to-left, wavemaker

有没有办法在对话框的右侧设置对话框标题栏图标？我在主题-> 面板-对话框-> 标题栏下发现标题栏图标可以更改为另一个图像，但我想在对话框的右侧设置图标。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-09T01:29:10.927

答案取决于 WaveMaker 版本，并在 WM 论坛上讨论：[http ://dev.wavemaker.com/forums/?q=node/9485](http://dev.wavemaker.com/forums/?q=node/9485)

# c++ - 简化这个表达式

> ID：13258782
> 
> 赞同：2
> 
> 时间：2012-11-06T20:23:15.757
> 
> 标签：c++, c, expression

令`a`,`b`为具有不同值的正整数。有什么方法可以简化这些表达式：

```
bool foo(unsigned a, unsigned b)
{
    if (a % 2 == 0)
      return (b % 2) ^ (a < b); // Should I write "!=" instead of "^" ?
    else      
      return ! ( (b % 2) ^ (a < b) ); // Should I write "(b % 2) == (a < b)"? 
} 
```

我将返回的值解释为布尔值。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T20:29:48.610

它与

```
 (a%2)^(b%2)^(a<b) 
```

这又是

```
 ((a^b)&1)^(a<b) 
```

或者，确实

```
 ((a ^ b) & 1) != (a < b) 
```

**编辑补充：**再想一想，这只是第一个和最后一个位的异或`(a-b)`（如果你使用 2 的补码），所以可能有一个机器特定的 ASM 序列更快，涉及旋转指令。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T20:46:13.367

根据经验，不要混合使用不同运算符系列的运算符。您将关系/布尔运算符与位运算符和常规算术混合在一起。

这就是我*认为*你正在尝试做的事情，我不确定，因为我不明白你的代码的目的：它既不可读也不自我解释。

```
bool result;
bool a_is_even = (a % 2) == 0;
bool b_is_even = (b % 2) == 0;

if (a_is_even == b_is_even) // both even or both odd
  result = a < b;
else
  result = a >= b;

return result; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T20:30:36.210

如果您返回一个真值，一个布尔值，那么您提议的更改不会改变代码的语义。这是因为按位异或，在真值上下文中使用时，与`!=`.

在我看来，您提出的更改使代码更容易理解。为什么作者认为按位 XOR 是合适的，我很难理解。我猜有些人认为这种编码很聪明。我不。

如果你想知道两个版本的相对性能，写一个程序和时间的差异。如果你能测量它们之间的任何差异，我会感到惊讶。如果这些代码行是您的性能瓶颈，我同样会感到惊讶。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-06T20:33:49.400

我用 C# 编程，但我会考虑这样的事情：

返回 (a % 2 == 0) && ((b % 2) ^ (a < b))

考虑到您的评论，'^' 等同于 '=='

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-06T20:58:34.080

由于有关此问题的信息不多，请尝试以下操作：

```
int temp = (b % 2) ^ (a < b);
if (a % 2 == 0)
  return temp;
else      
  return !temp; 
```

如果编译器还没有优化它，这应该是更少的代码。

# javascript - 在页面卸载时停止 $.ajax 调用

> ID：13258784
> 
> 赞同：2
> 
> 时间：2012-11-06T20:23:28.820
> 
> 标签：javascript, jquery

我有一个超时运行的程序在后台加载数据：

```
(function getSubPage() {
    setTimeout(function() {
        if (cnt++ < pagelist.length) {
            loadSubPage(pagelist[cnt]);
            getSubPage();
        }
    }, 500);
})(); 
```

在`loadSubPage()`我`$.ajax()`打电话时：

```
function loadSubPage(page) {
    if (typeof(initSubPages[page]) === "undefined") {
        $.ajax({
            type: "POST",
            url: '/Main/GetPageData',
            data: { page: page },
            success: function (returndata) {
                // ...
            },
            error: function() {
                alert("Error retrieving page data.");
            }
        });
        initSubPages[page] = true;
    }
} 
```

我遇到的问题是，`error`如果打开任何 ajax 请求，当用户导航离开时，处理程序就会被击中。我试图`.stop()`通过在请求上解决这个问题`window.onbeforeunload`，但我不确定要调用什么对象`.stop()`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T20:26:38.243

jQuery 公开了 XMLHttpRequest 对象的 abort 方法，因此您可以调用它并取消请求。您需要将打开的请求存储到变量中并调用`abort()`.

```
activeRequest = $.ajax({... 
```

并阻止它

```
activeRequest.abort() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:26:05.447

具有功能的`$.ajax`回报。此函数将在请求完成之前停止请求。`XMLHTTPRequestObject``.abort`

```
var xhr = $.ajax({ /*...*/

..
..
/* Later somewhere you want to stop*/
xhr.abort(); 
```

**阅读更多：** [如何取消/中止 jQuery AJAX 请求？](https://stackoverflow.com/questions/4551175/how-to-cancel-abort-jquery-ajax-request)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:28:08.057

[使用 jQuery 中止 Ajax 请求](https://stackoverflow.com/questions/446594/abort-ajax-requests-using-jquery)

这应该会派上用场.. 你有一个 jQuery 方法可以做到这一点。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T20:55:02.517

这是我根据反馈使用的解决方案：

```
window.onbeforeunload = function() {            
    for (page in ajaxing) {
        if (ajaxing[page] != null)
            ajaxing[page].abort();
    }
};

var ajaxing = {};

function loadSubPage(page) {
    if (typeof(initSubPages[page]) === "undefined") {
        var ajaxRequest = $.ajax({
            type: "POST",
            url: '/Main/GetPageData',
            data: { page: page },
            success: function (returndata) {
                 // ...
            },
            error: function() {
                alert("Error retrieving page data.");
            },
            complete: function() {
                ajaxing[lot] = null;
            }
        });
        ajaxing[page] = ajaxRequest;
        initSubPages[page] = true;
    }
} 
```

# c++ - 用 C++ 编写自定义异常

> ID：13258786
> 
> 赞同：7
> 
> 时间：2012-11-06T20:23:38.083
> 
> 标签：c++, custom-exceptions

我来自 Ruby 和 Java 背景，最近开始探索 C++。

虽然我最初通过简单地继承异常类来创建自定义异常的尝试因晦涩而失败，但我发现以下示例发布在网站上：

```
class Exception : public exception
{
public:
  Exception(string m="exception!") : msg(m) {}
  ~Exception() throw() {}
  const char* what() const throw() { return msg.c_str(); }

private:
  string msg;
}; 
```

目前我对 C++ 语义的理解还不是很成熟，我想对这里发生的事情有一个更好的理解。

在语句`const char* what() const throw()`中，该部分`const throw()`做了什么，它是什么类型的编程结构？

`throw()`另外，析构函数规范的目的和意图是什么`~Exception()`，为什么我需要一个析构函数规范，尽管我不需要它做一些特别的事情？从异常继承不`destructor`应该足够吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-06T20:37:39.023

`const`在方法声明该方法不会改变对象之后。（也有例外，通常它用来表示“不以外部可见的方式改变对象。）

方法声明之后是`throw()`异常说明；它类似于`throws E1, E2`您在 Java 中看到的异常规范。但是，在 C++ 中，异常规范不会在编译时检查，通常被认为几乎没有用（它们现在已被弃用）。`throw()`是唯一有用的形式，这意味着函数声明它不能抛出异常（如果是，这是一个逻辑错误，程序将调用意外的异常处理程序，默认情况下终止程序）。

析构函数是显式声明的，因为如果未指定，编译器将生成一个调用基类析构函数的析构函数，并且编译器生成的析构函数不会使用`throw()`异常规范（尽管在析构函数中抛出异常从来都不是一个好主意） .

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T20:30:37.013

你目前正在处理一些 C++ 风格的东西！因此，当您想要实际拥有一个`exception`-object 时，您可以使用`std::exception`，这[在 cppreference 上](http://de.cppreference.com/w/cpp/error/exception)进行了解释。

但是由于您可以在 C++ 中抛出和捕获所有内容，您甚至可以定义自己的异常类或使用更基本的方面，例如

```
try  {
    throw("S0M3, M4YB3 CR1PT1C STR1NG!");  
} catch(char const* exceptStr) {  
    SomeFuncThatDecodesTheString(exceptStr); 
} 
```

你的其他话题更多是一种个人风格或标准：

*   一个空的析构函数`~FooClass() {}`只有两个显示“我真的什么都不做！”。有时它们也可能很有用，当你使用一个严格的系统来编写你的类时（例如，首先是公共空间，首先包括标准 ctor 和作为第二个函数的标准 dtor ......）来强制你（或一些其他编码器）写入现有的大括号/函数，因此不会破坏你的神圣秩序:)
*   您可以为其他人编写`throw()`保险类，该类仅抛出括号中所述类型的异常。因此，一个函数`void FooFunc() throw(int,char)` **应该**只抛出*ints*和*chars*。一个空`throw()`的只是实际上说“嘿编码器，我什么都不扔！”。您经常会在 C++ 标准库中找到它，因为您（大多数情况下）只能查看原型而不是源代码。顺便说一句，这`throw(someType(s))`可能是一个谎言。该函数**可能会**抛出任何其他类型，或者什么也不会！但是，当您使用此功能时，请不要撒谎；）

## 编辑：

我想补充一点，它`noexcept`也可以（从*C++11*开始）用于声明函数，而不是抛出任何异常。这个比较好理解`throw()`。

LG ntor

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-06T20:48:59.433

`throw()`在析构函数规范中意味着析构函数不会抛出异常。C++ 中的析构函数不应该抛出异常——[这就是为什么](http://www.parashift.com/c++-faq/dtors-shouldnt-throw.html)。

C++ 中的析构函数不是继承的。如果您不编写自己的析构函数，那么编译器会自动为您生成析构函数。如果存在此类，则该析构函数将调用基类的析构函数。

`const`声明中的说明符`Exception::what()`意味着可以为类型的常量对象调用此方法`Exception`。`throw()`说明符的含义与析构函数相同。

你应该买一本关于 C++ 的书，这些都是非常基本的问题。

# ios - 带有iOS客户端的Google App Engine Channel API？

> ID：13258787
> 
> 赞同：1
> 
> 时间：2012-11-06T20:23:41.830
> 
> 标签：ios, google-app-engine, channel-api

我正在研究使用 Channel API 将消息推送到我的 iOS 客户端。我还没有完全理解它，但唯一的方法是使用一个隐藏的 UIWebView 来触发一个 Objective-C 方法。

这行得通吗？让隐藏的 UIWebView 收听频道消息？频道将如何通知 Web 视图有新消息？当收到一条新消息时，我将如何触发一个 Objective-C 方法，例如“你收到一条新消息”的警报？

这种方法有什么缺点吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-07T05:24:15.837

我正在做相反的事情。我正在使用 Urban Airship 将 iOS 通知发送到我的 iOS 应用程序，它实际上是一个围绕 UIWebView 的 iOS 包装器。

根据我的经验，GAE 频道并不是特别强大，我注意到没有发送消息，尤其是当您必须重新建立连接时。我想知道当应用程序进入后台时 UIWebView 连接是否会断开。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-05T20:31:11.710

我正在做你所要求的。您需要能够做两件事：从 Objective-C 调用 UIWebView，并从 UIWebView 获取事件以回调到 Objective-C。首先调用 UIWebView 的“stringByEvaluatingJavaScriptFromString”方法。要回调到 Objective-C，您注册一个 Web 视图委托，然后在“shouldStartLoadWithRequest”方法中查找“假”协议（例如“js-callback”或类似的东西），以便在您的 javascript 中导航“js-callback:informationForObjectiveCToOperateOn”的 iframe。这篇博文解释了这个过程：[http](http://blog.techno-barje.fr/post/2010/10/06/UIWebView-secrets-part3-How-to-properly-call-ObjectiveC-from-Javascript/) ://blog.techno-barje.fr/post/2010/10/06/UIWebView-secrets-part3-How-to-properly-call-ObjectiveC-from-Javascript/ 。

# java - 如何使用getter在java中返回图像？

> ID：13258790
> 
> 赞同：1
> 
> 时间：2012-11-06T20:23:46.057
> 
> 标签：java, image, getter, drawimage

我有一个类，它的属性中有一个图像。我做了一个简单的吸气剂来返回这个图像..

```
public Image getImage() {
    return image;
} 
```

后来我尝试在 drawImage() 中使用这个 getter，但没有得到图像。

```
g.drawImage(c.getImage(), c.getXcord(), c.getYcord(), null, this); 
```

正如你所看到的，我有这个类的其他吸气剂（getXcord、getYcord）工作正常，但我似乎无法获得图像。

这里是 WoodlandCreatures 类

```
public class WoodlandCreatures extends Animals {
public String favPlant;

public WoodlandCreatures(String fPlant, String animal, Image im, int x, int y) {
    this.favPlant = fPlant;
    this.animalType = animal;
    this.image = im;
    this.xCord = x;
    this.yCord = y;
}
/*
public Image getImage() {
    return image;
}
      */ 
```

这个类扩展了动物

```
public abstract class Animals {
public String animalType;
public Image image; 
public int xCord;
public int yCord;

public Image getImage() {
    return image;
}
public int getXcord() {
    return xCord;
}
public int getYcord() {
    return yCord;
} 
```

这就是我创建我正在使用的图像的方式。

```
Image squir2;
BufferedImage squir1 = createImage("images/Squirrel/Squirrel1.png");

squir2 = (squir1.getScaledInstance(100, 100, Image.SCALE_SMOOTH)); 
```

这是 createImage 函数...

```
private BufferedImage createImage(String x){
    BufferedImage bufferedImage;
    try {

        bufferedImage = ImageIO.read(new File(x));

        return bufferedImage;
    } catch (IOException e) {
        e.printStackTrace();
    }
    return null;
} 
```

希望其中一些代码可以清除一些东西。

# firefox - 重新加载页面后输入值未重置

> ID：13258791
> 
> 赞同：0
> 
> 时间：2012-11-06T20:23:53.480
> 
> 标签：firefox, input

重新加载页面输入值未重置后，Firefox 浏览器出现问题，重置 Chrome 浏览器值。

# python - fetchall（）python中的换行符

> ID：13258793
> 
> 赞同：1
> 
> 时间：2012-11-06T20:24:00.923
> 
> 标签：python, database

我正在从 python 的数据库中选择数据。

```
cur.execute("Select a,b,c from tab1")
print "a,b,c"
print "\n"
data = cur.fetchall()
print "".join(str(e) for e in data).replace("(","").replace(")","") 
```

我想在每一行的末尾放置一个换行符。

输出应该看起来像

```
a,b,c
A,B,C        //These values are from the database.
D,E,F 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:28:16.943

尝试：

```
'\n'.join(str(e) for e in data) 
```

代替：

```
''.join(str(e) for e in data) 
```

因为前一个命令将在每个数据字符串之间插入一个换行符，而后者插入一个空字符串（即什么都没有）。

# java - eclipse中的Spring类路径问题

> ID：13258797
> 
> 赞同：0
> 
> 时间：2012-11-06T20:24:29.663
> 
> 标签：java, eclipse, spring

我正在尝试设置一个 Spring 应用程序以第一次在 Eclipse 中运行。我将它作为独立的 java 应用程序运行。该应用程序构建时没有任何错误，但是当我去执行它时，我得到一个带有以下堆栈跟踪的 ClassNotFoundException：

```
DataLoadService [Java Application]  
    com.pikefin.services.DataLoadService at localhost:52871 
        Thread [main] (Suspended (exception ClassNotFoundException))    
            URLClassLoader$1.run() line: 217    
            AccessController.doPrivileged(PrivilegedExceptionAction<T>, AccessControlContext) line: not available [native method]   
            Launcher$AppClassLoader(URLClassLoader).findClass(String) line: 205 
            Launcher$AppClassLoader(ClassLoader).loadClass(String, boolean) line: 321   
            Launcher$AppClassLoader.loadClass(String, boolean) line: 294    
            Launcher$AppClassLoader(ClassLoader).loadClass(String) line: 266    
            ClassPathXmlApplicationContext(AbstractApplicationContext).<init>(ApplicationContext) line: 161 
            ClassPathXmlApplicationContext(AbstractRefreshableApplicationContext).<init>(ApplicationContext) line: 90   
            ClassPathXmlApplicationContext(AbstractRefreshableConfigApplicationContext).<init>(ApplicationContext) line: 59 
            ClassPathXmlApplicationContext(AbstractXmlApplicationContext).<init>(ApplicationContext) line: 61   
            ClassPathXmlApplicationContext.<init>(String[], boolean, ApplicationContext) line: 136  
            ClassPathXmlApplicationContext.<init>(String) line: 83  
            DataLoadService.main(String[]) line: 20 
    /usr/lib/jvm/java-1.6.0-openjdk-1.6.0.0.x86_64/bin/java (Nov 6, 2012 1:14:23 PM) 
```

它发生在这行代码上：

```
ApplicationContext context=new ClassPathXmlApplicationContext("classpath:spring.xml"); 
```

spring.xml 在构建过程中被移动到 class/ 文件夹中，所以我尝试将 class 文件夹添加到启动配置中（参见屏幕截图）。

![在此处输入图像描述](../Images/4d90eef421c2f95e48835a8aeb397719.png)

我正在使用 eclipse 3.7.2 和 spring 3.1.1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:32:14.047

检查弹簧库。这个问题是关于项目构建路径和配置的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:51:03.020

我不知道`spring`，但以下是可疑的：

```
ApplicationContext context=new ClassPathXmlApplicationContext("classpath:spring.xml"); 
```

也许应该是

```
ApplicationContext context=new ClassPathXmlApplicationContext("spring.xml"); 
```

例如，在 [这个问题](https://stackoverflow.com/questions/5012636/spring-using-new-classpathxmlapplicationcontext-and-getting-error-being-unable)中，用法是

```
ApplicationContext context = new ClassPathXmlApplicationContext("applicationContext.xml"); 
```

除非您的文件实际上被称为`classpath:spring.xml`，否则`sprint.xml`，但我对此表示怀疑。

# actionscript-3 - ActionScript 3：获取 File 对象的字符串值

> ID：13258798
> 
> 赞同：0
> 
> 时间：2012-11-06T20:24:39.460
> 
> 标签：actionscript-3

我的 Flash 项目属性设置为： AIR 3.4 for Desktop 和 ActionScript 3.0...

我创建了一个按钮，供用户从本地驱动器中选择文件 (csv)。然后我希望能够获取文件对象的字符串值，但不知道如何......

这是我到目前为止所拥有的：

```
BTN_CSV.addEventListener(MouseEvent.CLICK, getCSV);

var myFile:File = new File();

function getCSV(e:MouseEvent):void {
    var docFilter:FileFilter = new FileFilter("Documents", "*.csv");

    myFile.browse([docFilter]);
    myFile.addEventListener(Event.COMPLETE, completeHandler);
}

function completeHandler(event:Event) {
    var csvData = myFile.nativePath;
    csvData = csvData.data.split("\n");

    parseCSV(csvData);
} 
```

我收到错误 1061：调用可能未定义的方法，该方法通过静态类型 flash.utils:ByteArray 的引用拆分。我不知道如何获取文件 obj 的文件路径...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:43:03.263

文件类基本上只是一个指向你想要的文件的指针。
您的代码几乎就在那里，您只需在 FileStream 类中添加即可。 [来源](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/filesystem/FileStream.html#openAsync%28%29)

```
import flash.filesystem.*;
import flash.events.Event;

var file:File = File.documentsDirectory;
file = file.resolvePath("Apollo Test/test.txt");
var fileStream:FileStream = new FileStream();
fileStream.addEventListener(Event.COMPLETE, fileCompleteHandler)
fileStream.openAsync(file, FileMode.READ);

function fileCompleteHandler(event:Event):void {
    var str:String = fileStream.readMultiByte(fileStream.bytesAvailable, File.systemCharset);
    trace(str);
    fileStream.close();
} 
```

[编辑]

```
import flash.events.Event;
import flash.filesystem.File
import flash.filesystem.FileStream
import flash.filesystem.FileMode

var file:File =File.documentsDirectory;
file.addEventListener(Event.SELECT,onSelect)
file.browse()

function onSelect(event:Event):void{
    var fileStream:FileStream = new FileStream();
    fileStream.open(file, FileMode.READ);
    var str:String = fileStream.readMultiByte(file.size, File.systemCharset);
    trace(str);   
} 
```

# javascript - 用于根据屏幕大小更改 div 位置的媒体查询与 javascript

> ID：13258799
> 
> 赞同：2
> 
> 时间：2012-11-06T20:24:40.120
> 
> 标签：javascript, css, mobile, screen

我的网站上有一个包含滑块的大横幅，位置`absolute`为

我最初是`media screen only`用来调整移动设备和各种屏幕尺寸的，我基本上会为每个尺寸应用不同的左负左位置，但这似乎效率低下，而且它似乎并不完美，因为我需要考虑到它的所有可能尺寸要整洁。

然后我想到了javascript，但不幸的是我一点也不知道。我想知道是否有一些简单的代码可以应用于 js 中的 div，它会根据屏幕大小自动更改其左侧位置。

甚至任何基于此的建议`media screen only`都会非常感谢。我最大的问题是不知道我应该将哪个左侧位置应用于什么分辨率。

如果您需要更多信息，请告诉我。谢谢阿德里安

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:40:29.210

不久前我写[了一篇文章](http://www.onextrapixel.com/2012/10/04/10-useful-and-time-saving-javascript-snippets/)，其中包含一些有用的片段，这是其中之一：

> 此实用程序是一种在响应式设计时设置宽度断点的简单方法。这是在您的 JavaScript 代码中关联 CSS 媒体查询的快速方法。

```
function isBreakPoint(bp) {
  // The breakpoints that you set in your css
  var bps = [320, 480, 768, 1024];
  var w = $(window).width(); // or window.innerWidth with plain JS
  var min, max;
  for (var i = 0, l = bps.length; i < l; i++) {
    if (bps[i] === bp) {
      min = bps[i-1] || 0;
      max = bps[i];
      break;
    }
  }
  return w > min && w <= max;
} 
```

然后在你的脚本中：

```
if ( isBreakPoint(320) ) { 
  // breakpoint at 320 or less
}
if ( isBreakPoint(480) ) { 
  // breakpoint between 320 and 480
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T21:19:48.107

我不确定为什么你需要绝对定位横幅，但假设你需要，如果横幅是*图像并且可以调整大小*，你可以使用`method 1`.

如果它*必须*是*原始像素完美尺寸*，请使用`method 2`它在屏幕中居中。

### 方法一

```
#banner {
/* Your normal banner code */
position: absolute;
/* positioning etc. */
}

@media (max-width: {banner-size}px) {
#banner {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
}
} 
```

### 方法二

```
#banner {
    position: absolute;
    top: 20px; /* anything you want */
    left: 50%; /* you can adjust to off-center */
    margin-left: -{width/2}px;
} 
```

# php - 从 SQL Server 中提取 PHP 中的数据

> ID：13258801
> 
> 赞同：0
> 
> 时间：2012-11-06T20:24:43.957
> 
> 标签：php, sql

我的脚本在某处有问题，但不知道它到底在哪里不正确。这是代码：

```
<title>Log</title>
</head>

<h1> Log </h1>

<form method="get" action="getlog.php"> 

<table width="300" border="0">
  <tr>
    <td> Forte ID:</td>
    <td><select id="ForteID" name="ForteID">                    
                    <option value="nc4682">nc4682</option>
                    <option value="bs1441">bs1441</option>
                    <option value="sp3212">sp3212</option>                 
        </select></td>
  </tr>
</table>

 <input type="submit" name="getLog" value="Get Log">
 </form> 

</head>

<body>
</body>
</html>
<?php
/*print_r($_POST);*/
$serverName = 'SRB-Nick_Desktop\SQLEXPRESS';
$connectionInfo = array('Database'=>'cslogs', 'UID'=>'cslogslogin', 'PWD'=>'123456');
$connection = sqlsrv_connect($serverName, $connectionInfo);

$query = 'SELECT    ForteID, Disposition, appNumber, Finance_Num, Num_Payments, ACH_CC,     Notes from logs';

$result = sqlsrv_query($connection,$query);

if (!$result) 
{
    $message = 'ERROR: ' . sqlsrv_errors();
    return $message;
}
else
{
    $i = 0;
    echo '<html><body><table><tr>';
    while ($i < sqlsrv_num_rows($result))
    {
        $meta = sqlsrv_fetch($result, $i);
        echo '<td>' . $meta->name . '</td>';
        $i = $i + 1;
    }
    echo '</tr>';

    while ( ($row = sqlsrv_fetch_array($result))) 
    {
        $count = count($row);
        $y = 0;
        echo '<tr>';
        while ($y < $count)
        {
        $c_row = current($row);
        echo '<td>' . $c_row . '</td>';
        next($row);
        $y = $y + 1;
    }
    echo '</tr>';
}
sqlsrv_free_stmt ($result);

echo '</table></body></html>';
}
sqlsrv_close( $connection);
?> 
```

这就是我得到的结果，无论在下拉框中选择什么并点击按钮获取日志。

nc4682 nc4682保存保存ASDF ASDF FDAS FDAS 1 1 CC CC ASDF ASDF bs1441 bs1441 LOC LOC AN00336862 AN00336862无无0 0 ACH ACH回退回退nc4682 nc4682保存保存AN00336862 AN00336862 easdf easdf 2 2 ACH ACH ASDF ASDF sp3212 sp3212塞尔塞尔NCXXXXXX1 NCXXXXXX1无无1 1 cc cc asdfasdfasdf asdfasdfasdf

每列都是重复的。应该有7列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:30:33.617

`sqlsrv_fetch_array()`默认情况下返回数值数组和关联数组。

尝试仅指定一种类型的数组

`while ( $row = sqlsrv_fetch_array( $result, SQLSRV_FETCH_ASSOC ))`

在查询中使用您的 dropdpwn。

```
$query = 'SELECT    ForteID, Disposition, appNumber, Finance_Num, Num_Payments, ACH_CC,     Notes FROM logs WHERE ForteID =' . $_GET['ForteID']; 
```

请注意，如果不清理 $_GET 变量，此查询很容易受到 sql 注入的攻击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:42:19.703

要仅显示下拉列表中的结果，您可以将 WHERE ForteID = {$_GET['ForteID']} 之类的内容附加到 SQL 语句的末尾。

# iphone - iOS5 和 iOS 5.1 中的按钮上缺少字体文本

> ID：13258803
> 
> 赞同：3
> 
> 时间：2012-11-06T20:24:46.927
> 
> 标签：iphone, objective-c, ios, xcode, ios5

上周我向 App Store 上传了一个应用程序。一些按钮有“Telugu Sangam MN Bold 17.0”字体。它在运行 iPhone 的 iOS 6 上显示良好。但是在运行 iOS 5 和 iOS 5.1 的 iPhone 上，按钮文本是空白的，没有任何文本。

我到底需要做什么来解决这个问题？即使在 iOS 5 和 iOS 5.1 的模拟器中，按钮也是空白的，没有文字，但在 iOS 6 模拟器中，一切看起来都不错。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T20:47:25.900

我刚刚找到了解决方案。我将字体标题设置为“Attributed”，这不适用于 iOS 5 和 iOS 5.1，现在我将其更改为“Plain”，现在所有版本都可以正常工作。谢谢大佬回复

# ruby-on-rails-3 - 模型的参数未返回 rails 3

> ID：13258805
> 
> 赞同：0
> 
> 时间：2012-11-06T20:24:50.803
> 
> 标签：ruby-on-rails-3

在此之前我已经发布了一些关于如何向用户添加最喜欢的食谱的帖子。我有一个应用程序，您可以在登录后上传食谱，用户可以在整个表中搜索所有食谱并在会员中查看他们自己的食谱区域..

现在我希望用户能够保存他们最喜欢的食谱，到目前为止我可以保存最喜欢的食谱，我得到的输出是

```
[#<Favourite id: 1, user_id: 8, recipe_id: nil, created_at: "2012-11-06 19:25:34", updated_at: "2012-11-06 19:25:34">, 
```

所以我得到了正确的 user_id 但没有实际食谱的参数，即菜名、原产国。

我的模型是这样的

**用户**

```
class User < ActiveRecord::Base

has_many :recipes 
has_many :favourites 
```

食谱

```
has_many :ingredients 
has_many :preperations
has_many :favourites 
```

最喜欢的

```
belongs_to :user
belongs_to :recipe 
```

我最喜欢的控制器看起来像这样

```
 def create

 @favourite = current_user.favourites.new(params[:recipe])
 if @favourite.save
 redirect_to my_recipes_path, :notice => "Recipe added to Favourites"
 end
end 
```

添加到收藏夹链接

```
 <%= link_to "Add to favorites",  {:controller => 'favourites', :action => 'create'}, {:method => :post } %> 
```

我希望我没有错过任何东西，任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:43:25.123

您需要在链接中添加额外信息并修改创建操作

```
# View
<%= link_to "Add to favorites",  favorite_path(:recipe_id => @recipe.id), {:method => :post } %>

# Controller
def create
  @favourite = current_user.favourites.new(recipe_id: params[:recipe_id)
  if @favourite.save
   redirect_to my_recipes_path, :notice => "Recipe added to Favourites"
  end
end 
```

问题是您没有向参数中的控制器发送任何内容`params[:recipe]`

**注意**：记住`attr_accessible :user_id, :recipe_id`内部`Favorite`模型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T12:18:17.533

就像声明的那样

```
<%= link_to "Add to favorites",  favorite_path(:recipe_id => @recipe.id), {:method => :post } %> 
```

但这一切都取决于你的控制器中定义的@recipe - 例如，如果你有

```
@recipes = Recipie.all 
```

在你的视野中

```
@recipes.all do |recipe| 
```

然后在您的链接中（在块内），您需要：

```
<%= link_to "Add to favorites",  favorite_path(:recipe_id => recipe.id), {:method => :post } %> 
```

这有帮助吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T20:45:23.277

您没有通过链接发送任何参数。

```
<%= link_to "Add to favorites",  {:controller => 'favourites', :action => 'create'}, {:method => :post } %> 
```

这还不足以将食谱添加到收藏夹中。您需要做的是通过配方的 ID 以及此链接：

```
<%= link_to "Add to favorites",  {:controller => 'favourites', :action => 'create', :recipe_id => recipe.id}, {:method => :post } %> 
```

或者你可以通过使用路由助手来缩短这个时间：

```
<%= link_to "Add to favorites",  add_to_favorites_path(:recipe_id => recipe), {:method => :post } %> 
```

像这样在你的内部定义路由助手`config/routes.rb`：

```
post '/favorites' => "favorites#create", :as => "add_to_favorites" 
```

然后只需`params[:recipe_id]`在控制器内部找到配方并使用它执行您需要执行的操作。

# javascript - 在javascript中从json获取值

> ID：13258821
> 
> 赞同：4
> 
> 时间：2012-11-06T20:25:32.603
> 
> 标签：javascript, json

嗨，我有一个简单的 JSON 输出：

```
"{
   \"max_output_watts\": 150, 
   \"frame_length_inches\": \"62.20\",
   \"frame_width_inches\": \"31.81\"
 }" 
```

我在这样的函数中使用它：

```
...
$.getJSON(pop_model_dims_url, {model_id: selected}, function(data, jqXHR){
              alert(data.max_output_watts);
          });
... 
```

警报现在只是一个占位符，但我不明白为什么警报值是“未定义”。如果我做：

```
...
$.getJSON(pop_model_dims_url, {model_id: selected}, function(data, jqXHR){
              alert(data);
          });
... 
```

我按预期得到了完整的 json 转储。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T20:29:56.383

由于您`alert(data);`为您提供了完整的 JSON 转储，这可能意味着 JSON 已在服务器上进行了*双重编码。*

jQuery 会为您解析一次，但您需要再次解析它。

```
$.getJSON(pop_model_dims_url, {model_id: selected}, function(data, jqXHR){
    data = $.parseJSON(data);
    alert(data.max_output_watts);
}); 
```

当然，这*不是一个适当的解决*方法。正确的解决方案是在服务器上修复它。

一旦你这样做了，你就不再需要`$.parseJSON`了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T20:29:45.800

您的 JSON 可能是一个字符串。你必须先解析它。利用

```
var obj = JSON.parse(data);
alert(obj.max_output_watts); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-06T20:33:38.340

jQuery getJSON**应该**自己解析 JSON。如果 JSON 是这样的：

```
"{
   \"max_output_watts\": 150, 
   \"frame_length_inches\": \"62.20\",
   \"frame_width_inches\": \"31.81\"
 }" 
```

解析器将其误认为是字符串。

它应该像这样以纯文本形式出现：

```
{
   "max_output_watts": 150, 
   "frame_length_inches": "62.20",
   "frame_width_inches": "31.81"
 } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T20:31:56.257

您必须解析为 JSON，因为它看起来不是 json，因为该方法未定义：

这是 jQuery 的符号：

```
data = $.parseJSON(data);

data.max_output_watts; 
```

这是你应该如何做的：

```
data = JSON.parse(data);

data.max_output_watts; 
```

问候！

# jquery-ui - 使 JQuery 可排序表的一列内的单个项目可拖动，而无需移动其他列中的项目

> ID：13258825
> 
> 赞同：3
> 
> 时间：2012-11-06T20:25:51.417
> 
> 标签：jquery-ui, jquery-ui-sortable

*我想创建一个表，该表在单个列*中具有拖放可排序项目，但单个列中项目的移动*不会*影响其他列中项目的位置。

下面的代码对整行（左列和右列）进行排序，而不仅仅是右列。JQuery UI 文档中似乎没有解决它。有没有人尝试过这样做？

```
<script>
  $(function() {
    $("table tbody").sortable({
        handle: '.handle'
    }).disableSelection();
  });
</script>

<table>
  <tbody id="sortable">
    <tr>
      <td>1 - Column Item I Want to Stay In Place</td>
      <td class="handle">Item 1 - The Part That Should Be Draggable/Sortable</td>
    </tr>
    <tr>
      <td>2 - Column Item I Want to Stay In Place</td>
      <td>Item 2 - The Part That Should Be Draggable/Sortable</td>
    </tr>
    <tr>
      <td>3 - Column Item I Want to Stay In Place</td>
      <td class= "handle">Item 3 - The Part That Should Be Draggable/Sortable</td>
   </tr>
 </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-24T01:32:29.700

我不相信你可以用表格单元格做到这一点（至少我不能让它与普通的可排序对象一起工作）。

不过还有另一种选择。您可以使用看起来像表格的列表，而不是使用表格。

您可以为列设置样式以定义其宽度：

```
.column {
    width: 100px;
    list-style: none;
    float: left;
} 
```

然后，将每一列定义为一个列表：

```
<ul class="column">
    <li>Fixed 1</li>
    <li>Fixed 2</li>
</ul>
<ul class="sortable column">
    <li>Sortable 1</li>
    <li>Sortable 2</li>
</ul>
<ul class="sortable column">
    <li>Sortable 3</li>
    <li>Sortable 4</li>
</ul> 
```

然后您所要做的就是将您的可排序应用到可排序列表：

```
$(".sortable").sortable(); 
```

这是一个小提琴来说明：[demo](http://jsfiddle.net/tgSJF/1/)

另一种选择是完全忽略可排序并使用可拖动和可放置的控件。尽管使用这些控件的“拖放”事件，您必须手动更改 DOM。

# android - Android Permission Denial：广播意图

> ID：13258836
> 
> 赞同：2
> 
> 时间：2012-11-06T20:26:40.923
> 
> 标签：android, android-widget, broadcastreceiver, permission-denied

我真的不知道出了什么问题，但是我的如果小部件是由系统通过“APPWIDGET_UPDATE”更新的，它会引发以下异常。我尝试了几件事，导出接收器（真/假），我在模拟器和真机上尝试过，但它是一样的。我添加了几个`intent-filters`，但它没有工作。

```
11-06 20:10:10.279: W/ActivityManager(61): Permission denied: checkComponentPermission() reqUid=1000
11-06 20:10:10.279: W/ActivityManager(61): Permission Denial: broadcasting Intent { act=android.appwidget.action.APPWIDGET_UPDATE (has extras) } from com.ency.easychange (pid=1196, uid=10034) requires null due to receiver com.android.settings/com.android.settings.widget.SettingsAppWidgetProvider 
```

我的 AppWidgetProvider 仅被声明，因为我试图消除可能性，但在`ExchangeRateWidgetProvider.onReceive()`调用之前抛出异常。

```
public class ExchangeRateWidgetProvider extends AppWidgetProvider {
    public static final String tag = "ExchangeRateWidgetProvider"; 

        @Override
        public void onUpdate(Context context, AppWidgetManager appWidgetManager,
                int[] appWidgetIds) {

        }   
} 
```

我的清单：

```
<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.INTERNET" />

<!--  TODO: Remove, only for traces  -->
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 

<application
    android:icon="@drawable/ic_launcher_main"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".EasyChange"
        android:label="@string/title_activity_easy_change" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <service android:name=".ExchangeRateWidgetService"
             android:exported="true">
        <intent-filter>
        <action android:name="android.intent.action.MAIN" />
        <action android:name="android.appwidget.action.APPWIDGET_ENABLED" />
        </intent-filter>        
    </service>

    <receiver
        android:name=".ExchangeRateWidgetProvider"
        android:label="@string/exchange_rate_widget_name"
        android:exported="true">
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            <action android:name="android.intent.action.MAIN" />
        </intent-filter>

        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/exchange_rate_widget_providerinfo" />
    </receiver>

   <activity
        android:name=".WidgetConfigSmall"
        android:label="@string/title_activity_widget_config_small"
        android:theme="@android:style/Theme.Holo.Dialog"
        android:excludeFromRecents="true"
        android:exported="true" >
        <intent-filter>
            <action android:name="android.appwidget.action.APPWIDGET_CONFIGURE"/>
        </intent-filter>
    </activity>

</application> 
```

如果你能看一下，我很感激......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T20:30:25.043

您的问题出在您尝试*发送*`android.appwidget.action.APPWIDGET_UPDATE`广播的 Java 代码中。那是由操作系统而不是应用程序广播的，这就是它的意义`Permission Denial`所在。

# postgresql - 如何截断（子字符串）PostgreSQL 数据库中表的特定列的所有值？

> ID：13258839
> 
> 赞同：4
> 
> 时间：2012-11-06T20:26:50.350
> 
> 标签：postgresql, postgresql-9.1

我对 PostgreSQL 很陌生。我正在使用一个没有在“标题”列中强制执行最大长度（字符数）的表。应用程序需要它少于 1000 个字符，但某些字段为 1200、1300 等。

我对 mySql 非常熟悉，但我很难掌握 PostgreSQL。

如果这是 mySql 我会这样：

```
UPDATE TABLE entries SET title = LEFT(title,1000) 
```

我怎样才能用 PostgreSQL 完成同样的事情？

我可以使用 phppgadmin 和命令行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-06T20:30:09.067

其实在postgresql中也是一样的

```
UPDATE TABLE entries SET title = LEFT(title,1000) 
```

或者你可以做这样的事情

```
UPDATE TABLE entries SET title = substring(title from 1 for 1000) 
```

[这是](http://www.postgresql.org/docs/current/interactive/functions-string.html)关于 postgresql 中的字符串函数的文档

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T20:31:08.167

在 PostgreSQL 中它可能是：

```
UPDATE TABLE entries SET title = substring(title from 1 for 1000) 
```

从[pg 文档](http://www.postgresql.org/docs/current/interactive/functions-string.html)：

**功能** `substring(string [from int] [for int])`
**描述** `Extract substring`
**示例** `substring('Thomas' from 2 for 3)`
**结果** `hom`

# sql - 视图中列的表名

> ID：13258850
> 
> 赞同：1
> 
> 时间：2012-11-06T20:27:35.483
> 
> 标签：sql, sql-server, database, sql-server-2008

我有一个返回 30 列的视图。视图是通过三个表的内部连接创建的。我希望找出使用查询从哪个表中取出哪一列，而不是逐行浏览视图。有没有办法在 sql server 2008 中做到这一点？提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:29:56.727

> 我希望找出使用查询从哪个表中取出哪一列，而不是逐行浏览视图

不，没有。

如果数据来自的表很重要，您可以在您的视图中使用列的别名来标识它们来自哪些表。

然而，这将否定首先拥有视图的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T07:03:33.563

您可以在执行计划 XML 中查询列名和表名。

使用此设置：

```
create table Table1
(
  Table1ID int identity primary key,
  Name varchar(10)
)

create table Table2
(
  Table2ID int identity primary key,
  Table1ID int not null references Table1(Table1ID),
  Name varchar(10)
)

go

create view Table_1_2 as
select T1.Table1ID,
       T1.Name as Table1Name,
       T2.Name as Table2Name
from Table1 as T1
  inner join Table2 as T2
    on T1.Table1ID = T2.Table1ID 
```

在启用“包括实际执行计划”的情况下，从 SQL Server Management Studio 对视图执行查询。

```
select *
from Table_1_2
where 0 = 1 
```

选择执行计划选项卡，右键单击并选择显示执行计划 XML。将 XML 复制到一个新的查询窗口，将其分配给一个 XML 变量，然后在 XML 中查询您需要的信息。

```
declare @XML xml = N'<?xml version="1.0" encoding="utf-16"?>
<ShowPlanXML xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" Version="1.2" Build="11.0.2100.60" xmlns="http://schemas.microsoft.com/sqlserver/2004/07/showplan">
  <BatchSequence>
    <Batch>
      <Statements>
        <StmtSimple StatementCompId="1" StatementEstRows="0" StatementId="1" StatementOptmLevel="TRIVIAL" StatementSubTreeCost="1.57E-07" StatementText="select *&#xD;&#xA;from Table_1_2&#xD;&#xA;where 0 = 1" StatementType="SELECT" QueryHash="0xEBAD405D39FDCB6A" QueryPlanHash="0xAE962A4D575B83FE" RetrievedFromCache="true">
          <StatementSetOptions ANSI_NULLS="true" ANSI_PADDING="true" ANSI_WARNINGS="true" ARITHABORT="true" CONCAT_NULL_YIELDS_NULL="true" NUMERIC_ROUNDABORT="false" QUOTED_IDENTIFIER="true" />
          <QueryPlan DegreeOfParallelism="1" CachedPlanSize="16" CompileTime="0" CompileCPU="0" CompileMemory="112">
            <MemoryGrantInfo SerialRequiredMemory="0" SerialDesiredMemory="0" />
            <OptimizerHardwareDependentProperties EstimatedAvailableMemoryGrant="25600" EstimatedPagesCached="25600" EstimatedAvailableDegreeOfParallelism="8" />
            <RelOp AvgRowSize="27" EstimateCPU="1.57E-07" EstimateIO="0" EstimateRebinds="0" EstimateRewinds="0" EstimatedExecutionMode="Row" EstimateRows="0" LogicalOp="Constant Scan" NodeId="0" Parallel="false" PhysicalOp="Constant Scan" EstimatedTotalSubtreeCost="1.57E-07">
              <OutputList>
                <ColumnReference Database="[xx]" Schema="[dbo]" Table="[Table1]" Alias="[T1]" Column="Table1ID" />
                <ColumnReference Database="[xx]" Schema="[dbo]" Table="[Table1]" Alias="[T1]" Column="Name" />
                <ColumnReference Database="[xx]" Schema="[dbo]" Table="[Table2]" Alias="[T2]" Column="Name" />
              </OutputList>
              <RunTimeInformation>
                <RunTimeCountersPerThread Thread="0" ActualRows="0" ActualEndOfScans="1" ActualExecutions="1" />
              </RunTimeInformation>
              <ConstantScan />
            </RelOp>
          </QueryPlan>
        </StmtSimple>
      </Statements>
    </Batch>
  </BatchSequence>
</ShowPlanXML>';

with xmlnamespaces(default 'http://schemas.microsoft.com/sqlserver/2004/07/showplan')
select T.N.value('@Table', 'sysname') as TableName,
       T.N.value('@Column', 'sysname') as ColumnName
from @XML.nodes('//ColumnReference') as T(N) 
```

结果：

```
TableName            ColumnName           
-------------------- -------------------- 
[Table1]             Table1ID             
[Table1]             Name                 
[Table2]             Name 
```

# android - Android - 屏蔽视图

> ID：13258856
> 
> 赞同：2
> 
> 时间：2012-11-06T20:28:02.097
> 
> 标签：android, masking

我有一个具有背景的 FrameLayout，并且包含一个可以在视图中滑动的 ViewPager。我还有一个 PNG 图像，我想将它用作 ViewPager 上的蒙版，这样我就可以保留我的背景，但只显示 ViewPager 元素的一部分。本质上，我想创建一个自定义遮罩效果，如此处所示[，](http://android.cyrilmottier.com/?p=230&cpage=1#comment-35184)但我不想将其应用于图像，而是将其应用于视图。我怎样才能做到这一点？

我开始：

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="vertical" android:padding="4dip"
        android:gravity="center_horizontal"
        android:layout_width="fill_parent" 
        android:layout_height="fill_parent">

        <android.support.v4.view.ViewPager
                android:id="@+id/pager"
                android:layout_width="match_parent"
                android:layout_height="match_parent"/>

        <ImageView
            android:layout_width="fill_parent"
            android:layout_height="match_parent"
            android:scaleType="fitXY"
            android:src="@drawable/mask"/>

</FrameLayout> 
```

我使用的图像基本上在 PNG 文件中有一个切口，所以有一个透明部分。使用这种技术的问题是图像的一部分具有渐变。通过做一个适当的面具，我希望角色会“淡入”，但相反，它现在只是明显地出现，因为你可以看到它出现的边缘，所以它并不漂亮。如果有人有更好的想法如何干净地掩盖它，我对他们持开放态度......

# css - 如何使用 div 覆盖 Drupal 内容区域中的 css

> ID：13258858
> 
> 赞同：1
> 
> 时间：2012-11-06T20:28:08.907
> 
> 标签：css, drupal

我想强制 div 中的所有 html 具有相同的字体大小和行距。html包括

和元素。我试图简单地为 div 使用内联样式，例如

```
<div style="font-size: .75em;">
 <p>blah</p>
 <ul>
  <li>blah2</li>
 </ul>
 <p>blah 3</p>
</div> 
```

但是样式表导致 p 和 li 是更大的字体。这导致我在每一行中添加了更多的内联样式，这是不对的。

我无权访问样式表，所以我必须内联在这里做任何事情。我只需要一个代码片段给作者（内容在 Drupal 中），这样他们就可以完成这项任务，而无需推送新的站点 css 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:51:30.470

如果以像素为单位设置大小，则子元素应继承设置的大小。为此，您还必须对 textarea 字段使用“完整 HTML”过滤器选项。

```
<div style="font-size: 12px;">
 <p>blah</p>
 <ul>
  <li>blah2</li>
 </ul>
 <p>blah 3</p>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-27T18:25:28.020

您的站点主题的 CSS 可能在“p”或“ul”或“li”元素上设置样式，因此即使您的 div 定义了内联样式，它仍然被更全局的 CSS 文件覆盖。使用 firebug 或 Chrome 工具查看设置样式的 .css 文件，在同一级别定义本地覆盖样式（例如在 p 或 ul 或 li 元素上）。

# weka - Weka中SimpleLogistic和Logistic的区别

> ID：13258859
> 
> 赞同：7
> 
> 时间：2012-11-06T20:28:11.333
> 
> 标签：weka, logistics

我正在研究 Weka，但我无法理解 SimpleLogistic 和 Logistic 分类器之间的区别。有人知道区别吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T21:15:03.177

根据文档（[SimpleLogistic](http://weka.sourceforge.net/doc.dev/weka/classifiers/functions/SimpleLogistic.html)和[Logistic](http://weka.sourceforge.net/doc.dev/weka/classifiers/functions/Logistic.html)），SimpleLogistic 使用 LogitBoost 而 Logistic 使用岭估计器。描述算法的论文是

Niels Landwehr、Mark Hall、Eibe Frank (2005)。逻辑模型树。机器学习 95(1-2):161-205 用于 SimpleLogistic

le Cessie, S., van Houwelingen, JC (1992)。逻辑回归中的岭估计量。应用统计。41(1):191-201 用于物流。

# android - Android：在 Sqlite 数据库中插入日期时间

> ID：13258862
> 
> 赞同：-1
> 
> 时间：2012-11-06T20:28:23.330
> 
> 标签：android, sqlite

我正在尝试在 Andoird 项目的 Sqlite 数据库中插入日期时间字段。尝试了很多[这样](https://stackoverflow.com/questions/13105609/inserting-datetime-in-sqlite-database-android)的方法，但插入日期时间字段没有运气。以下是事实

1] 我的 Sqlite 字段是类型时间戳

2]数据库类

```
package com.gcm.pushandroid;
import java.util.Date;

public class Notifications {

     //private variables 
      String _type; 
      String _time_stamp;

       // Empty constructor 
       public Notifications(){ 

       } 
       // constructor 
       public Notifications(String type, String timeStamp){ 
           this._type = type; 
           this._time_stamp = timeStamp;
       } 

      // getting ID 
      public String getType(){ 
          return this._type; 
       } 

      // setting id 
      public void setType(String type){ 
         this._type = type; 
      } 

     // getting timestamp
     public String getTimeStamp(){ 
        return this._time_stamp; 
     } 

     // setting 
     public void setTimeStamp(String time_stamp){ 
          this._time_stamp = time_stamp; 
     } 

} 
```

3]这是代码

```
SQLiteDatabase db = this.getWritableDatabase(); 
ContentValues values = new ContentValues(); 
values.put(KEY_TYPE, notificationObj.getType());  
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss"); 
Date date = new Date();
values.put("time_stamp", dateFormat.format(date));
db.insert(TABLE_CONTACTS, null, values); 
db.close(); 
```

不知道出了什么问题。帮助表示赞赏。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:22:18.137

您必须将 sqlite 字段类型更改为字符串/文本。'timestamp' 类型不允许：或 - Timestamp 只能包含整数

更多详情请参见[http://www.sqlite.org/datatype3.html](http://www.sqlite.org/datatype3.html)第 1.2 点

# symfony - Symfony2 继承自两个表单模板

> ID：13258868
> 
> 赞同：1
> 
> 时间：2012-11-06T20:28:48.470
> 
> 标签：symfony, twig

我已将表单设置为使用自定义模板（生成 DL）并且效果很好

```
twig:
    form:
        resources:
            - 'myBundle:Form:row.html.twig' 
```

但是后来我想自定义一个表格的一行，我想我必须这样做

```
{% form_theme edit_form _self, ' %}

{% block _startYear_row %}
    {% block form_row %}
        {{ parent() }}
        <div id="startCalendaryear"></div>
    {% endblock %}
{% endblock %} 
```

这使得整个表单继承自 _self 并失去了 row.html.twig 的自定义。

如何为所有表单设置自定义模板，同时仍覆盖其中一个表单上的单行？

# joomla - 如何使用 joomla 设置将信息保存在数据库中的表单？

> ID：13258872
> 
> 赞同：0
> 
> 时间：2012-11-06T20:29:26.003
> 
> 标签：joomla

我一直在尝试创建一个将信息保存在我的数据库中的表单......听起来很容易，但我的文档很乱（或者我不太聪明），我只想在提交时发送一些参数，在另一边捕获他们并在数据库中保存一些信息....

**所以，我这样做了：**

在我的*`component/views/myview/tmpl/default.php`*我写了这个：

```
<form action="index.php">
<input type="submit" value="test" />
</form> 
```

然后，我转到我的文件`view.html.php`并`/mycomponent/view/component/view.html`执行此操作：

```
$this->get('SaveClient'); 
```

在我的模型中，我这样做了（仅用于尝试）：

```
public function getSaveClient(){

  $query ="
      Insert into client ( `id_client` ,`test`)
      VALUES 
      (NULL , '1')
  ";
  $db = & JFactory::getDBO();
  $db->Execute($query);
} 
```

但是仍然..不起作用，知道如何使它起作用吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T21:16:54.613

您没有正确定义表名。应该是`#__tablename`。一旦你尝试了这个并且它仍然不起作用，请尝试使用下面的代码。

```
public function getSaveClient($test){ 
    $db = JFactory::getDBO();
    $data = new stdClass();
    $data->id_client = null;
    $data->test = $test;
    $db->insertObject( '#__tablename', $data, 'id_client' );  
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-07T04:22:45.087

你的布局 default.php 形式像

```
<form action="<?php echo JRoute::_('index.php?option=com_example&view=example&layout=default'); ?>" method="post" name="adminForm">
<input size="60" type="text" name="settings[key]" id="settings[key]" value="<?php echo (isset ($this->settings ['key']) ? htmlspecialchars ($this->settings ['key']) : ''); ?>" />
// More html entites.
<input type="hidden" name="task" value="" />
</form> 
```

你的 view.html.php //你的班级

```
public function display ($tpl = null)
    {
        $document = &JFactory::getDocument ();
        $document->addStyleSheet ('components/com_example/assets/css/example.css');

        $model = &$this->getModel ();
        $this->settings = $model->getSettings ();
        $this->form = $this->get ('Form');
        $this->addToolbar ();
        parent::display ($tpl);
    } 
```

你的模型你的模型类

```
public function saveSettings ()
    {
        //Get database handle
        $db = $this->getDbo ();
        $api_settings = array();
        $mainframe = JFactory::getApplication();
        //Read Settings
        $settings = JRequest::getVar ('settings');
                //Insert new settings
          foreach ($settings as $k => $v)
          {

             $sql = "INSERT INTO #__yourtable ( setting, value )" . " VALUES ( " . $db->Quote ($k) . ", " . $db->Quote ($v) . " )";
            $db->setQuery ($sql);
            $db->query ();
          }
              } 
```

# python - Zbar 树莓派安装

> ID：13258883
> 
> 赞同：1
> 
> 时间：2012-11-06T20:30:17.793
> 
> 标签：python, raspberry-pi, zbar

我正在尝试在我的树莓派上安装 zbar。我通过输入以下内容来构建源代码：

./configure
make
安装

安装完成后，我输入python并尝试导入zbar。这样做会导致分段错误。

关于可能是什么问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-15T18:05:34.967

除非您想要一个不在存储库中的版本，否则请执行以下操作：

```
apt-get install python-zbar 
```

# c# - 正则表达式匹配具有相同组的可选参数

> ID：13258884
> 
> 赞同：1
> 
> 时间：2012-11-06T20:30:23.997
> 
> 标签：c#, regex

匹配所有这些行的最佳方法是什么。在前两行中，我将有 3 个组，用户/密码/模式，但在最后一行中，我希望拥有所有三个组，但只有 3 的值是一个空字符串。

```
set admin user "user1" password "password1" privilege "all"
set admin user "user2" password "password2" privilege "all"
set admin user "user3" password "password3" 
```

我当前的正则表达式只匹配前 2 个。

```
set admin user "(?<user>[\w-]+)" password "(?<password>.*)"(\s+privilege\s+"(?<mode>[\w-]+)") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:32:04.317

```
set admin user "(?<user>[\w-]+)" password "(?<password>.*?)"(\s+privilege\s+"(?<mode>[\w-]+)")? 
```

尾随`?`使最后一组可选

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:36:54.347

只需添加一个`?`作为可选组或字符。

`ab?`将匹配`a`，并且`ab`由于`?`之后的`b`指示字符或组是可选的。

另一个例子：`a(abc)?`这也将匹配`a`并`aabc`带有`abc`反向引用，因为您已经告诉模式“编译器”该`"abc"`字符串是可选的。

对可选项目的很好解释：[Regex中的可选项目](http://www.regular-expressions.info/optional.html)

# ios - 在 UITableView 上添加子视图

> ID：13258890
> 
> 赞同：0
> 
> 时间：2012-11-06T20:30:56.703
> 
> 标签：ios, uitableview, uitoolbar, autolayout

我正在做一个项目，我主要使用 UITableViews。用户输入数据，应用程序给出计算结果。我有两个按钮：“计算”和“重置”。我想添加一个包含这两个按钮的子视图并将它们显示在屏幕底部。通过情节提要，我可以添加子视图，但它坚持 UITableView 的按钮，而不是屏幕。

关于如何做到这一点的任何想法？我应该弄乱带有按钮的子视图和 self.tableview.superview 之间的约束吗？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:34:14.010

您可以使用标准的 UIViewController 代替 UITableViewController，并将 UITableView 添加到您的视图控制器。然后，您可以随意放置子视图。

不要忘记连接数据源和 tableview 的委托。

# php - MySql - 加入另一个具有多行的表，将查询插入另一个查询？

> ID：13258893
> 
> 赞同：1
> 
> 时间：2012-11-06T20:31:09.860
> 
> 标签：php, mysql, sql

我一直在绞尽脑汁想弄清楚如何加入这两个查询..

我的目标是根据某些条件返回多个场地行（来自场地）......这就是我当前的查询所做的......

```
SELECT venues.id AS ven_id, 
   venues.venue_name, 
   venues.sub_category_id, 
   venues.score, 
   venues.lat, 
   venues.lng, 
   venues.short_description, 
   sub_categories.id, 
   sub_categories.sub_cat_name, 
   sub_categories.category_id, 
   categories.id, 
   categories.category_name, 
   ((ACOS(  SIN(51.44*PI()/180)*SIN(lat*PI()/180) + COS(51.44*PI()/180)*COS(lat*PI()/180)*COS((-2.60796 - lng)*PI()/180)) * 180/PI())*60 * 1.1515) AS dist

FROM venues, 
  sub_categories, 
  categories 
WHERE 
  venues.sub_category_id = sub_categories.id 
  AND sub_categories.category_id = categories.id 
HAVING 
  dist < 5 
ORDER BY score DESC 
LIMIT 0, 100 
```

但是，我需要在此查询（缩略图）中包含另一个字段，该字段来自另一个表（venue_images）。这个想法是根据它与哪个场地相关以及它的顺序来提取一个图像行。然而，只需要提取一张图像。所以限制1。

我基本上需要插入这个查询：

```
SELECT 
  venue_images.thumb_image_filename, 
  venue_images.image_venue_id,  
  venue_images.image_order 
FROM venue_images 
WHERE venue_images.image_venue_id = ven_id //id from above query
ORDER BY venue_images.image_order 
LIMIT 1 
```

进入我的第一个查询，并将这个新字段标记为“缩略图”。

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:48:40.117

首先，您可以使用 INNER JOIN 编写第一个查询：

```
SELECT
  ...
FROM
  venues INNER JOIN sub_categories ON venues.sub_category_id = sub_categories.id 
  INNER JOIN categories ON sub_categories.category_id = categories.id
HAVING
  ... 
```

结果应该是相同的，但我更喜欢这个。

我接下来想做的是加入一个子查询，如下所示：

```
...
INNER JOIN (SELECT ... FROM venue_images 
              WHERE venue_images.image_venue_id = ven_id //id from above query
              ORDER BY venue_images.image_order 
              LIMIT 1) first_image 
```

但不幸的是，这个子查询看不到`ven_id`，因为它在外部查询之前先被评估（我认为这是MySql的限制），所以我们不能使用它，我们必须找到另一个解决方案。而且由于您使用的是 LIMIT 1，因此仅使用 JOINS 来重写您需要的条件并不容易。

如果 MySql 提供了 FIRST() 聚合函数会更容易，但由于它没有，我们必须模拟它，例如看这个问题：[How to fetch the first and last record of a grouped record in a MySQL query with聚合函数？](https://stackoverflow.com/questions/1379565/mysql-first-and-last-record-of-a-grouped-record-aggregate-functions)

因此，使用这个技巧，您可以编写一个首先提取的`image_id`查询`every image_venue_id`：

```
SELECT
  image_venue_id,
  SUBSTRING_INDEX(
    GROUP_CONCAT(image_id order by venue_images.image_order),',',1) as first_image_id
FROM venue_images
GROUP BY image_venue_id 
```

并且此查询可以集成到您上面的查询中：

```
SELECT
  ...
FROM
  venues INNER JOIN sub_categories ON venues.sub_category_id = sub_categories.id 
  INNER JOIN categories ON sub_categories.category_id = categories.id
  INNER JOIN (the query above) first_image on first_image.image_venue_id = venues.id
  INNER JOIN venue_images on first_image.first_image_id = venue_images.image_id
HAVING
  ... 
```

我还添加了一个 JOIN，将第一个图像 ID 与实际图像连接起来。我无法检查您的查询，但我们的想法是这样进行。

由于查询现在变得越来越复杂且难以维护，我认为最好创建一个视图来提取每个场所的第一张图像，然后在查询中加入视图。这只是一个想法。让我知道它是否有效或您需要任何帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:35:44.483

我不太确定您的数据，但与缩略图表的 JOIN 和对您的大型查询的 group by 可能会起作用。

```
GROUP BY venues.id 
```

# php - 通过 php (curl) 访问 webservice ssl 失败 - ClientSoap

> ID：13258895
> 
> 赞同：0
> 
> 时间：2012-11-06T20:31:26.567
> 
> 标签：php, ssl, curl, wsdl, soap-client

当我使用此 PHP 代码访问未使用基本身份验证保护的 wsdl 文件时，它运行良好。

```
<?php
try{

    ini_set('soap.wsdl_cache_enabled', false);
    $url = 'https://webservicexx:10443/Service.asmx?WSDL';
    $wsdl = get_wsdl($url); 
    $client = new SoapClient($wsdl); 
    print_r($client);

} catch (SoapFault $e) {
        echo $e;

} 

function get_wsdl($url) { 
    clearstatcache();
    $cache_file = "/var/www/webservice2/soap.wsdl." . md5($url); 
    $ch = curl_init($url);
    $options = array(                           
                        CURLOPT_FOLLOWLOCATION=>true,
                        CURLOPT_FRESH_CONNECT=>true,
                        CURLOPT_RETURNTRANSFER=>true,
                        CURLOPT_SSL_VERIFYPEER=>false,
                        CURLOPT_USERAGENT=>"Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)");
    curl_setopt_array($ch, $options);
    $data = curl_exec($ch);
    curl_close($ch);
    file_put_contents($cache_file, $data);
    return $cache_file; 

} 
?> 
```

当我尝试访问使用身份验证基本（.NET）保护的 wsdl 文件时，通过更改 $option 数组来添加登录名并通过：

```
$options = array( 
  CURLOPT_POST=>true,
  CURLOPT_HTTPAUTH=>CURLAUTH_BASIC,
  CURLOPT_USERPWD=>'myLOGIN:myPASSWORD',
  CURLOPT_FOLLOWLOCATION=>true,
  CURLOPT_FRESH_CONNECT=>true,
  CURLOPT_RETURNTRANSFER=>true,
  CURLOPT_SSL_VERIFYPEER=>false,
  CURLOPT_USERAGENT=>"Mozilla/4.0 (compatible; MSIE 5.01; Windows NT 5.0)"); 
```

我对文件结果有疑问。我没有得到安全的 wsdl 文件，我在我的服务器上的文件上有页面错误。这意味着我无权访问该文件，因为身份验证基本障碍以及我在 $option 数组上添加的登录名和密码不起作用。

我该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T21:28:58.073

也尝试设置`CURLOPT_SSL_VERIFYHOST`为`FALSE`

# knockout.js - 如何将 Knockout Mapping 库用于需要默认值的可观察对象

> ID：13258900
> 
> 赞同：2
> 
> 时间：2012-11-06T20:31:50.657
> 
> 标签：knockout.js, knockout-mapping-plugin

现在，我可以简单地初始化一堆具有默认值的可观察对象，例如......

```
self.a = ko.observable(data.A || "");
self.b = ko.observable(data.B || "");
self.c = ko.observable(data.C || ""); 
```

但是如果我想做类似的事情

```
var ViewModel = ko.mapping.fromJS(data) 
```

并设置默认值，我该怎么做？

我真的必须做类似的事情吗

```
var ViewModel = function(data) {
   ko.mapping.fromJS(data, {
     c: {
       create: function(options) { return ko.observable(options.data.c || "") }
     };
   }, this)
}; 
```

如您所见，这是一吨开销。我还想补充一点，映射库对我来说突出的一个好处是，当属性名称发生变化时，它可以减少一个更新的地方。但是，如果您确实必须显式声明属性名称以指定创建回调，那么该好处就被破坏了。

我错了吗，有一种简单的方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T15:05:26.017

如果您需要为所有字段设置相同的默认值，您可以构造映射选项动态迭代 all`data`的属性：

```
var ViewModel = function(data) {
    var mappingOptions = {};
    for (var key in data) {
        mappingOptions[key] = {
            create: function(options) {
                return ko.observable(options.data || "123");
            }
        };           
    }

    ko.mapping.fromJS(data, mappingOptions, this);
}; 
```

这是工作小提琴：http: [//jsfiddle.net/vyshniakov/tDAGU/](http://jsfiddle.net/vyshniakov/tDAGU/)

# java - 当我使用 PrintWriter 写入文件时，如何摆脱 0D 输出？

> ID：13258901
> 
> 赞同：1
> 
> 时间：2012-11-06T20:31:51.487
> 
> 标签：java

代码工作正常，我只是想知道如果可能的话，如何防止 char 0D 在我的文本文件末尾打印。谢谢你。如果有帮助，这是代码。对不起，如果它是平庸的，还在学习java。

```
 import java.util.*;  
   import java.io.*;

   public class Driver{
      String inputFile, input;
      Scanner kb = new Scanner(System.in);
      PrintWriter output = new PrintWriter(System.out);
      File file; 
      BST tree = new BST();
      Trie trie = new Trie();

      public static void main(String[] args){
         Driver driver = new Driver();
         boolean done = false;  

         driver.initialDataFromFile();
         while (!done){      
            done = driver.menu(true);   
         }
      }

      public void initialDataFromFile() {
         System.out.println("Welcome to Project0");
         System.out.println("What is the name of the input file?");
         System.out.print("> ");
         inputFile = kb.nextLine(); 
         File file = new File(inputFile);

         try{
            Scanner scanner = new Scanner(file);

            while(scanner.hasNextLine()){
               String in = scanner.nextLine();
               tree.insert(in);
               trie.insert(in);
            }
            System.out.println("Finished reading the file");

         }
            catch(FileNotFoundException e){
               System.out.println("File does not exist");
               System.exit(1);
            }
      }

      public boolean menu(boolean done){      
         System.out.print("Please enter your command\r>");
         input = kb.next();
         File file = new File(inputFile);
         PrintWriter output = null;// = new PrintWriter(inputFile);

         if(input.toLowerCase().equals("quit")){
            System.out.println("Quitting");
            System.out.println("Writing updated info to " + inputFile);     
            try{
               output =  new PrintWriter(file);
             //   String str = "";
//                str += tree.toString();
               output.println(tree.toString());  

               output.close();

            }
               catch(IOException e){
                  System.out.print("error");}
            System.out.println("Goodbye");    
            return true;       
         }

         else if(input.toLowerCase().equals("insert")){
            input = kb.next();
            tree.insert(input);
            trie.insert(input);
            System.out.println();
            return false;
         }
         else if(input.toLowerCase().equals("delete")){
            input = kb.next();
            tree.delete(input);
            trie.delete(input);
            System.out.println();  
            return false;
         }
         else if(input.toLowerCase().equals("find")){
            input = kb.next();
            tree.find(input);
            trie.find(input);
            System.out.println();
            return false;
         }
         else if(input.toLowerCase().equals("print")){
            tree.print();
            trie.print();
            System.out.println();
            return false;
         }
         else{
            System.out.println("Not A Valid Choice");
            System.out.println();
            return false;
         }
      }
   } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:39:18.903

```
printWriter.println("...") 
```

将使用操作系统相关`line.separator`属性来确定行分隔符顺序：

> 这些方法使用平台自己的行分隔符概念，而不是换行符。

它恰好是`\r`(?) 在您的计算机 ( `OD`) 上（来自 JavaDoc of [`PrintWriter.println()`](http://docs.oracle.com/javase/7/docs/api/java/io/PrintWriter.html#println%28%29)）：

> 行分隔符字符串由系统属性定义，`line.separator`不一定是单个换行符 ( `'\n'`)。

只需使用普通`print()`并附加您想要的任何字符：

```
printWriter.print("...\n") 
```

...或覆盖该`line.separator`属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:35:28.437

您可以使用 line.separator 系统属性，例如，提供独立于操作系统的输出。

[http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

# linux - 使用 linux 脚本进行简单聚合

> ID：13258902
> 
> 赞同：4
> 
> 时间：2012-11-06T20:31:53.563
> 
> 标签：linux, bash, awk

假设我有一个包含如下行的文本文件：

```
foo 10
bar 15
bar 5
foo 30
... 
```

生成以下输出的最简单方法是什么：

```
foo 40
bar 20 
```

?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T20:37:43.730

这将做：

```
awk '{arr[$1]+=$2;} END { for (i in arr) print i, arr[i]}'  file 
```

有关更多信息，请阅读 Awk 的关联数组。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-06T20:38:45.613

使用这个 awk 脚本：

```
awk '{sums[$1] += $2} END {for (a in sums) print a, sums[a]}' infile 
```

**输出：**

```
foo 40
bar 20 
```

[使用这个关于使用关联数组的 awk 教程](http://www.thegeekstuff.com/2010/03/awk-arrays-explained-with-5-practical-examples/)：

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T05:53:47.460

如果你对 perl 感兴趣：

```
perl -F -lane '$X{$F[0]}=$X{$F[0]}+$F[1];if(eof){foreach (keys %X){print $_." ".$X{$_}}}' your_file 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-07T10:58:01.227

这是排序、GNU sed 和 bc 的一种方法：

```
sort infile | 
  sed -r ':a; N; s/([^ ]+) +([^\n]+)\n\1/\1 \2 +/; ta; P; D' |
  sed -r 'h; s/[^ ]+/echo/; s/$/ | bc/e; G; s/([^\n]+)\n([^ ]+).*/\2 \1/' 
```

输出：

```
bar 20
foo 40 
```

第一个 sed 使用相同的键`+`在数字之间添加 a 连接相邻行，第二个将总和传递给 bc。

# pointers - Fortran：指向父模块中子例程的指针过程

> ID：13258915
> 
> 赞同：0
> 
> 时间：2012-11-06T20:32:50.417
> 
> 标签：pointers, fortran

我偶然发现了一种在子模块中运行父亲程序的方法。我的意思是，这个技巧允许我以与模块的依赖关系树相关的上游方式运行进程。具体来说，这里是一个例子：

```
module parent
  procedure(likefoo),pointer :: to_foo
  interface 
    subroutine likefoo
    end subroutine likefoo
  end interface
contains
  subroutine run
   call to_foo
  end subroutine
end module 

module child
  use parent
contains
  subroutine foo
      print *, 'hola'
  end subroutine foo
end module 

program main
  use parent
  use child

  to_foo => foo
  call run

end program 
```

此示例使用 ifort 13.0.0 进行了正面测试。我想知道，此代码是标准允许的，还是因为编译器依赖功能而运行正常？谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:43:39.420

该方法很好（使用 F2003 功能），但使 likefoo 的接口抽象。对模块依赖的有向图的要求是与这些模块中对过程的调用嵌套的正交概念。

# python - Python xlwt 模块，隐藏网格

> ID：13258918
> 
> 赞同：0
> 
> 时间：2012-11-06T20:33:02.740
> 
> 标签：python, xlwt

我正在尝试在成功生成的 .xls 上隐藏网格，其中包含 2 张纸。我阅读了 xlwt 文档以及可以在 xlwt 相关对象上设置的其他属性，其中包括 show_grid 函数。我正在尝试关注，但它不会改变任何东西：

```
with open(os.path.join('sheet1_test.csv'), 'rb') as cf:
    reader = csv.reader(cf)
        for r, row in enumerate(reader):
            for c, col in enumerate(row):
                sheet1.write(c, r, col, easyxf(
                'font: name Arial;',
                'show_grid: off'
                )) 
```

我很感激任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T21:24:36.767

[在这里](http://www.youlikeprogramming.com/2011/04/examples-generating-excel-documents-using-pythons-xlwt/)调整第一个示例：

```
import xlwt
workbook = xlwt.Workbook(encoding = 'ascii')
worksheet = workbook.add_sheet('My Worksheet')
worksheet.show_grid = False # "show_grid" is a property of the worksheet!
worksheet.write(0, 0, label = 'Row 0, Column 0 Value')
workbook.save('Excel_Workbook.xls') 
```

您可以看到这`show_grid`是工作表的属性，而不是`easyxf`. （`show_grid`关闭工作表中的网格）

# javascript - 选择 2 个标签之间的所有 HTML

> ID：13258920
> 
> 赞同：-2
> 
> 时间：2012-11-06T20:33:12.257
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [jquery - 如何选择两个标签之间的所有内容](https://stackoverflow.com/questions/481076/jquery-how-to-select-all-content-between-two-tags)

假设我有一些 HTML，例如：

```
<div>
<span>
<a>Link</a>
</span>
<p id="start">Foo</p>
<!-- loads of HTML goes here -->
<img src="bar.png" />
<form id="end">
<input type="text" />
</form>
</div> 
```

现在假设我想选择 和 之间的所有内容`<p>`，`</form>`并将其放入一个字符串中。我将如何做到这一点（请注意，我不一定知道 2 个标签之间是什么？欢迎使用 JQuery 答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:39:49.360

只需使用[nextUntil()](http://api.jquery.com/nextUntil/)获取直接兄弟，直到给定选择器

```
​$('#start').nextUntil('form')​​​​​​​​​​​​​​​ 
```

# objective-c - 如何访问用户的 Facebook 帐户？OSX 山狮

> ID：13258922
> 
> 赞同：0
> 
> 时间：2012-11-06T20:33:18.823
> 
> 标签：objective-c, facebook, macos, cocoa, acaccount

我正在使用来自 WWDC 的代码来访问用户的 facebook 帐户：

```
self.accountStore = [[ACAccountStore alloc] init];
ACAccountType *facebookAccountType = [self.accountStore
                                      accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
[self.accountStore requestAccessToAccountsWithType:facebookAccountType
                             withCompletionHandler:^(BOOL granted, NSError *e) {
                                 if (granted) {
                                     NSArray *accounts = [self.accountStore
                                                          accountsWithAccountType:facebookAccountType];
                                     self.facebookAccount = [accounts lastObject];
                                 } else {
                                     // Fail gracefully...
                                 }
                             }]; 
```

但它给了我错误`requestAccessToAccountsWithType:withCompletionHandler:`。
![在此处输入图像描述](../Images/70405039235b51b1960c6b47e50ece6f.png)
如何访问用户的 Facebook 帐户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T20:39:59.060

Facebook 支持仅在 10.8.2 中添加。你还在用 10.8.2 吗？如果是这样，*你得到什么具体的错误代码*？我们不是读心术者。

* * *

如果你按照你应该做*的那样阅读标题*`-requestAccessToAccountsWithType:withCompletionHandler:`，你会看到它在 Mac 上不存在，并且在 iOS 上已被弃用。你应该使用`-requestAccessToAccountsWithType:options:completion:`.

# objective-c - 数据封装，Instance变量无法访问

> ID：13258923
> 
> 赞同：1
> 
> 时间：2012-11-06T20:33:22.713
> 
> 标签：objective-c, ios, xcode

我在理解哪些类可以读取其他类中的哪些变量时遇到了一些麻烦。我在网上阅读了很多不同的东西，但似乎在这里找不到任何可靠的东西。在过去的两天里，我确实浪费了试图让我的程序正常工作，但没有类可以读取任何其他类变量。任何帮助将不胜感激。

这是我的 ViewController.h：

```
@interface ViewController : UIViewController
{
    @public
    NSString *nameOfLabel;
}

@property (strong, nonatomic) IBOutlet UILabel *firstLabel;
- (IBAction)Switch:(id)sender;
- (IBAction)changeLabel:(UIButton *)sender;
-(NSString *) nameOfLabel;
@end 
```

nameOfLabel 是一个公共变量，应该可以被外部类访问，对吧？

视图控制器.m：

```
#import "ViewController.h"
#import "NewView.h"

@interface ViewController ()
@end

@implementation ViewController

- (IBAction)Switch:(id)sender {
    NewView * new = [[NewView alloc] initWithNibName:nil bundle:nil];
    [self presentViewController: new animated:YES completion:NULL];
}
- (IBAction)changeLabel:(UIButton *)sender  {
    nameOfLabel = @"Test Name";
    _firstLabel.text = nameOfLabel;
}
-(NSString *) nameOfLabel   {
    return nameOfLabel;
}
@end 
```

changeLabel 按钮将 *firstLabel.text 更改为“测试名称”。

第二类是NewView.h：

```
#import "ViewController.h"

    @interface NewView : UIViewController
    @property (strong, nonatomic) IBOutlet UILabel *secondLabel;
    - (IBAction)changeSecondLabel:(UIButton *)sender;
    @end 
```

和 NewView.m：

```
#import "NewView.h"

@interface NewView ()
@end

@implementation NewView
{
    ViewController *view;
}
- (IBAction)changeSecondLabel:(UIButton *)sender {
    view = [[ViewController alloc] init];
    _secondLabel.text = view.nameOfLabel;
}
@end 
```

changeSecondLabel 应该将 secondLabel.text 更改为 nameOfLabel ，即“测试名称”，但是，标签实际上消失了，这让我认为无法达到 nameOfLabel。我玩过nameOfLabel，将其设为@property，然后对其进行合成，并尝试将其放入{ NSString *nameOfLabel; } 在@implementation 下，但我仍然得到相同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:48:11.593

这一行：`view = [[ViewController alloc] init];`创建一个**新**的ViewController，它不知道你可能对其他 ViewController 做了什么。在您的情况下，它特别不知道`changeLabel:`在这个新的 ViewController 存在之前在另一个 ViewController 上调用了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:52:15.283

首先请阅读编码标准，这不是一个好习惯：

1.  命名变量，如“新”

2.  命名方法，如“开关”

3.  将 UIViewController 命名为“view”或“NewView”

关于逻辑：这一切都搞砸了。您实际上要做的是创建带有 nameOfLabel 的 viewController，它是空的，并且仅在按下按钮时才更改。我假设你按下那个按钮所以它被改变了。然后在 switch 操作上创建另一个 viewController 并呈现它。然后从新的 viewController 内部创建另一个新的 viewController，它的 nameOfLabel 为空，获取这个空值并将其放入 secondLabel 中。

有几种方法可以更改 secondLabel：

1.  将 nameOfLabel 移动到模型并在您想要更改 secondLabel 时从那里读取它，
2.  因为您的新 viewController 是保留 nameOfLabel 的 viewController 的子级，所以您可以通过调用 [[self presentingViewController] nameOfLabel] 来访问它，但首先将其设为属性，
3.  通过指定的初始化程序传递 nameOfLabel。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:52:38.340

当第二个视图控制器 (NewView) 出现时，它没有引用第一个视图控制器 (ViewController) 和它的数据。

这里有几个建议。

*   在现代 Objective-C 中，我建议使用属性而不是公开变量。
*   大体上看一下命名。例如，“ViewController”不是一个好名字。
*   如果属性是类内部状态的一部分，则在类扩展中声明它。
*   在呈现第二个视图控制器之前，请设置对来自第一个视图控制器的字符串的引用。

ViewController.m 的一部分：

```
@interface ViewController ()
@property (copy,nonatomic) NSString *nameOfLabel;
@end

@implementation ViewController

- (IBAction)Switch:(id)sender {
    NewView *new = [[NewView alloc] initWithNibName:nil bundle:nil];
    new.secondLabel.text = self.nameOfLabel;
    [self presentViewController: new animated:YES completion:NULL];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T21:22:28.043

好吧，如果你想简单演示一下公共 ivar 的访问，语法是：

```
view->nameOfLabel;
    ^^ 
```

不是点语法：

```
view.nameOfLabel; 
```

（点语法只是通过访问器方法）。

这些年来，我只看到少数有保证的边缘案例。很少，很少有充分的理由将 ivar 公开（此外，protected 也很少是一个*好的*选择）。

# mysql - Query giving undesirable results

> ID：13258932
> 
> 赞同：0
> 
> 时间：2012-11-06T20:33:56.297
> 
> 标签：mysql, sql

I have the following two tables:

```
lab_assistant
la_id - la_firstname - la_lastname
1 - Dennis - Rodman
2 - Michael - Jordan
3 - Horace - Grant

hours_worked
hw_semester - hw_date - hw_hours - la_id
Fall 2012 - 2012-11-01 - 4 - 2
Fall 2012 - 2012-11-04 - 5 - 3
Spring 2012 - 2012-02-12 - 4 - 1
Spring 2012 -2012-03-10 - 4 - 1 
```

The result of my query is supposed to look like the following:

and I'm trying to run the following query in order to list the Lab Assistant and the number of hours they worked each semester

```
SELECT DISTINCT(CONCAT(la.la_firstname, ' ', la.la_lastname)) AS 'Lab Assistant',
   hw.hw_semester AS 'Semester Worked', hw.hw_hours AS 'Hours Worked'
FROM lab_assistant la
    JOIN hours_worked hw
        ON la.la_id = hw.la_id; 
```

The results of my quere are SUPPOSED to look like this:

```
Michael Jordan - Fall 2012 - 4
Horace Grant - Spring 2012 - 5
Dennis Rodman - Fall 2012 - 8 
```

BUT the results I'm getting are as follows:

```
Michael Jordan - Fall 2012 - 4
Horace Grant - Fall 2012 - 5
Dennis Rodman - Spring 2012 - 4 
```

So basically, it just isn't counting the proper hours for Dennis Rodman. It should be 8 and not 4.

And I probably shouldn't use DISTINCT here because it's possible the same person could work different semesters.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:36:05.840

`DISTINCT` needs to go at the beginning of the `SELECT`:

```
SELECT DISTINCT CONCAT(la.la_firstname, ' ', la.la_lastname) AS 'Lab Assistant',
    hw.hw_semester, COUNT(w.hw_hours)
FROM lab_assistant la
    JOIN hours_worked hw
        ON la.la_id = hw.la_id; 
```

But since you are using aggregate functions, you will want to use `GROUP BY`:

```
SELECT CONCAT(la.la_firstname, ' ', la.la_lastname) AS 'Lab Assistant',
    hw.hw_semester, COUNT(w.hw_hours)
FROM lab_assistant la
    JOIN hours_worked hw
        ON la.la_id = hw.la_id
GROUP BY hw.hw_semester; 
```

Based on your edit, you need something like this:

```
SELECT CONCAT(la.la_firstname, ' ', la.la_lastname) AS 'Lab Assistant',
  hw.hw_semester AS 'Semester Worked', 
  sum(hw.hw_hours) AS 'Hours Worked'
FROM lab_assistant la
JOIN hours_worked hw
  ON la.la_id = hw.la_id
GROUP BY la.la_id, hw.hw_semester; 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!2/425a9/4)

Results:

```
|  LAB ASSISTANT | SEMESTER WORKED | HOURS WORKED |
---------------------------------------------------
|  Dennis Rodman |     Spring 2012 |            8 |
| Michael Jordan |       Fall 2012 |            4 |
|   Horace Grant |       Fall 2012 |            5 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:35:59.583

This is because `DISTINCT` is a modifier to `SELECT` and cannot be used like that. What's best in your case is to apply a `GROUP BY` on `hw.hw_semester` to fix it.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:36:12.520

The [MySQL syntax for `SELECT`](http://dev.mysql.com/doc/refman/5.5/en/select.html) shows that `DISTINCT` needs to come before the column names:

```
SELECT
[ALL | DISTINCT | DISTINCTROW ]
  [ .. etc .. ]
select_expr [, select_expr ...] 
```

> Each **select_expr** indicates a column that you want to retrieve.

Basically, `DISTINCT` can only apply to the entire query, not a single column.

# python - 将 LIMIT 和 OFFSET 应用于 SQLAlchemy 中的所有查询

> ID：13258934
> 
> 赞同：50
> 
> 时间：2012-11-06T20:34:03.870
> 
> 标签：python, sqlalchemy, api-design

我正在使用 SQLAlchemy（查询 MySQL）设计一个 API，我想强制我的所有查询都具有 page_size（LIMIT）和 page_number（OFFSET）参数。

有没有用 SQLAlchemy 做到这一点的干净方法？也许建立某种工厂来创建自定义 Query 对象？或者也许有一个很好的方法可以使用 mixin 类来做到这一点？

我尝试了显而易见的事情，但它不起作用，因为在应用所有过滤条件后必须调用 .limit() 和 .offset() ：

```
def q(page=0, page_size=None):
    q = session.query(...)
    if page_size: q = q.limit(page_size)
    if page: q = q.offset(page*page_size)
    return q 
```

当我尝试使用它时，我得到了异常：

```
sqlalchemy.exc.InvalidRequestError: Query.filter() being called on a Query which already has LIMIT or OFFSET applied. To modify the row-limited results of a  Query, call from_self() first.  Otherwise, call filter() before limit() or offset() are applied. 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-11-06T20:37:06.460

尝试添加第一个必需参数，它必须是一组查询过滤器。因此，

```
# q({'id': 5}, 2, 50)
def q(filters, page=0, page_size=None):
    query = session.query(...).filter_by(**filters)
    if page_size:
        query = query.limit(page_size)
    if page: 
        query = query.offset(page*page_size)
    return query 
```

或者，

```
# q(Model.id == 5, 2, 50)
def q(filter, page=0, page_size=None):
    query = session.query(...).filter(filter)
    if page_size:
        query = query.limit(page_size)
    if page: 
        query = query.offset(page*page_size)
    return query 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-06-22T10:21:23.997

在这个问题的时候不是一个选项，因为版本 1.0.0 你可以利用[查询事件](http://docs.sqlalchemy.org/en/latest/orm/events.html#query-events)来确保`limit`和`offset`方法总是在你的对象被编译之前被调用，在`query`你的函数的用户执行任何操作之后`q`：

```
from sqlalchemy.event import listen

def q(page=0, page_size=None):
    query = session.query()
    listen(query, 'before_compile', apply_limit(page, page_size), retval=True)
    return query

def apply_limit(page, page_size):
    def wrapped(query):
        if page_size:
            query = query.limit(page_size)
            if page:
                query = query.offset(page * page_size)
        return query
    return wrapped 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-11-24T20:05:41.060

您可以调用`query.limit(None).`以删除以前应用的限制或偏移量。

# wpf - 具有自定义数据类型的自定义 DependencyProperty

> ID：13258936
> 
> 赞同：0
> 
> 时间：2012-11-06T20:34:15.743
> 
> 标签：wpf, xaml, dependency-properties

我想为用户控件创建一个自定义的 DependencyProperty

```
 public Table Grids
    {
        get { return (Table)GetValue(GridsProperty); }
        set { SetValue(GridsProperty, value); }
    }

    // Using a DependencyProperty as the backing store for Grids.  This enables animation, styling, binding, etc...
    public static readonly DependencyProperty GridsProperty =
                DependencyProperty.Register("Grids", typeof(Table), 
                typeof(MyViewer), new UIPropertyMetadata(10)); 
```

这里的 Table 是用于存储行和列的自定义数据类型。这将帮助我像使用它们一样；

```
<my:MyViewer 
    HorizontalAlignment="Left" 
    Margin="66,54,0,0" 
    x:Name="MyViewer1" 
    VerticalAlignment="Top" 
    Height="400" 
    Width="400"
    Grids="10"/> 
```

或者

```
<my:MyViewer 
    HorizontalAlignment="Left" 
    Margin="66,54,0,0" 
    x:Name="MyViewer1" 
    VerticalAlignment="Top" 
    Height="400" 
    Width="400"
    Grids="10,20"/> 
```

我试图将 Table 数据类型定义为；

```
public class Table 
    {
        public int Rows { get; set; }
        public int Columns { get; set; }

        public Table(int uniform)
        {
            Rows = uniform;
            Columns = uniform;
        }

        public Table(int rows, int columns)
        {
            Rows = rows;
            Columns = columns;
        }
    } 
```

但它不起作用；当我在 XAML 中使用 Grids="10" 时，它会中断。任何人都可以帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:40:23.787

您在注册方法中设置的默认值不是数据类型不匹配吗？我相信您希望第一个`FrameworkPropertyMetadata`参数类似于：

```
new FrameworkPropertyMetadata(new Table()) 
```

或者

```
new FrameworkPropertyMetadata(null) 
```

然后在 XAML 中，您可以执行以下操作：

```
<my:MyViewer>
    <my:MyViewer.Grids>
        <Table Rows="10" Column="20"/>
    </my:MyViewer.Grids>
</my:MyViewer> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T21:05:01.133

属性元数据中的默认值类型错误。这将在加载 MyViewer 类时导致异常。将默认值设置为例如`new Table(10)`。

除此之外，XAML/WPF 不会通过调用正确的构造函数自动将字符串`"10"`或转换`"10,20"`为 Table 类的实例。您必须编写一个[TypeConverter](http://msdn.microsoft.com/en-us/library/ayybcxe5.aspx)来执行此转换。

一个简单的 TypeConverter 可能如下所示：

```
public class TableConverter : TypeConverter
{
    public override bool CanConvertFrom(ITypeDescriptorContext context, Type sourceType)
    {
        return sourceType == typeof(string);
    }

    public override object ConvertFrom(ITypeDescriptorContext context, System.Globalization.CultureInfo culture, object value)
    {
        string tableString = value as string;
        if (tableString == null)
        {
            throw new ArgumentNullException();
        }

        string[] numbers = tableString.Split(new char[] { ',' }, 2);
        int rows = int.Parse(numbers[0]);
        int columns = rows;

        if (numbers.Length > 1)
        {
            columns = int.Parse(numbers[1]);
        }

        return new Table { Rows = rows, Columns = columns };
    }
} 
```

TypeConverter 将与您的 Table 类相关联，如下所示：

```
[TypeConverter(typeof(TableConverter))]
public class Table
{
    ...
} 
```

# c++ - 具有多个类型名的 C++ 模板

> ID：13258937
> 
> 赞同：2
> 
> 时间：2012-11-06T20:34:19.367
> 
> 标签：c++, arrays, function, templates

我正在学习一种用于查找数组中元素数量的技术（这样我就可以开始编写排序算法，而无需将数组的长度作为参数传递给数组），但是在本教程中，这个行显示为模板声明：

```
template <typename T, size_t N> 
```

老实说，我不知道您可以在一个模板声明中声明多个类型名，但是“size_t N”还有什么作用？这也是模板声明中的变量声明吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-06T20:38:09.767

`size_t`是一种类似于 的类型`unsigned int`。将它放在模板参数中仅意味着您传递的是`size_t`，而不是类型。`N`大概表示数组的大小，是一个无符号值。例如：

```
template<typename T, size_t N>
void zeroArray(T (&arr)[N]) {    //arr is a reference to an array 
    std::fill(arr, arr + N, 0);  //of N elements of type T
}

int main() {
    int arr[3];
    zeroArray<int, 3>(arr);
} 
```

在示例中，我可以说：

```
zeroArray(arr); 
```

因为两个模板参数都是推导出来的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T20:40:00.527

> “size_t N”是做什么的？这也是模板声明中的变量声明吗？

是的，基本上。

模板参数可以是整数类型的类型或值。它们也可以是其他一些东西（请参阅`[C++11: 14.3.2/1]`），我不会称它们为“变量”*本身*，但是......

无论如何，这些值也可以像类型一样推导出来，所以：

```
template <typename T, size_t N>
size_t array_size(const T (&)[N])
{
    return N;
}

int main()
{
   int  x[5];
   char y[10];
   std::string z[20];

   std::cout << array_size(x) << ',' << array_size(y) << ',' << array_size(z) << '\n';
} 
```

输出：`5,10,20`。

完全有效。

# iphone - 自动滚动滚动视图

> ID：13258938
> 
> 赞同：4
> 
> 时间：2012-11-06T20:34:21.460
> 
> 标签：iphone, objective-c, ios, uiscrollview

我有个问题。我想向用户显示一些内容`UIScrollView`。我想从下到`autoscroll`上`UIScrollView`快速（就像在苹果商店里一样`iPad`）。我尝试使用`DDAutoscrollview`（如果有人知道），但它对我不起作用。有人为我解决问题`autoscroll`吗`UIScrollView`？任何代码片段都会很好。

### 。H

```
@interface Interface1 : UIViewController {

    IBOutlet UIScrollView *scroller;
    IBOutlet UILabel *warnung;

}

@property (nonatomic, retain) IBOutlet UIScrollView* scrollView; 
```

### .m

```
- (void)viewDidAppear:(BOOL)animated {
    [super viewDidAppear:animated];
    CGPoint bottomOffset = CGPointMake(self.scrollView.contentOffset.x, 
                                       self.scrollView.contentSize.height - 
                                         self.scrollView.bounds.size.height);
    [self.scrollView setContentOffset:bottomOffset animated:NO];

    CGPoint newOffset = self.scrollView.contentOffset;
    newOffset.y = 0;
    [self.scrollView setContentOffset:newOffset animated:YES];
}

- (void)viewDidLoad {        
    [scroller setScrollEnabled:YES];
    [scroller setContentSize:CGSizeMake(320, 420)];    
    [super viewDidLoad];
} 
```

谢谢。

* * *

### > 为 TOBI 提供的 AWNSER 点赞！！！

* * *

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T20:41:39.660

只需使用`setContentOffset:animated:`

```
UIScrollView *scrollView = ...;
CGPoint newOffset = scrollView.contentOffset;
newOffset.y = 0;
[scrollView setContentOffset:newOffset animated:YES]; 
```

**编辑：**

要像某种开始动画一样使用它，您可以在 scrollView 的视图控制器中执行此操作：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // ...

    CGPoint bottomOffset = CGPointMake(self.scrollView.contentOffset.x, self.scrollView.contentSize.height - self.scrollView.bounds.size.height);
    [self.scrollView setContentOffset:bottomOffset animated:NO];
}
- (void)viewDidAppear:(BOOL)animated
{
    [super viewDidAppear:animated];

    CGPoint newOffset = self.scrollView.contentOffset;
    newOffset.y = 0;
    [self.scrollView setContentOffset:newOffset animated:YES];
} 
```

**编辑 2 / 3：**

要使滚动速度变慢，请使用以下命令：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    // ...

    CGPoint bottomOffset = CGPointMake(self.scrollView.contentOffset.x, self.scrollView.contentSize.height - self.scrollView.bounds.size.height);
    [self.scrollView setContentOffset:bottomOffset animated:NO];
}

- (void)viewDidAppear:(BOOL)animated
{    
    [super viewDidAppear:animated];

    float scrollDuration = 4.0;

    [UIView animateWithDuration:scrollDuration animations:^{
        self.scrollView.contentOffset = CGPointMake(self.scrollView.contentOffset.x, 0);
    }];
} 
```

# c# - 在创建 HtmlHelper 之后，在视图之前访问它

> ID：13258944
> 
> 赞同：1
> 
> 时间：2012-11-06T20:34:33.273
> 
> 标签：c#, asp.net-mvc, model-view-controller, html-helper, application-start

我知道我从 Application_Start 可以 ActionFilterAttribute 添加自定义全局过滤器并操纵 ModelState 等等。

有没有类似的方法来访问@Html (HtmlHelper) 在它被发送到视图之前？

这样做的原因是我想编辑（或删除并重新创建）UnobtrosiveValidationAttributes。如果我尝试在这样的视图中这样做：`@Html.GetUnobtrusiveValidationAttributes("PhoneNumber").Clear();`什么都没有发生，但我想如果我早点得到它可能会起作用？

（如果你想知道为什么：我需要翻译里面的 ErrorMessages）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:49:40.943

我不确定是否有办法拦截不显眼的验证代码分配消息文本的位置。我不确定这是不是最好的主意，因为一个属性可能有许多不同的验证（必需、正则表达式、字符串长度等......）

我可以告诉你还有其他方法可以本地化错误消息。一种开箱即用的方法是使用资源文件并定义资源键而不是错误消息。

```
[Required(ErrorMessageResourceName="resource-key")]
public string PhoneNumber { get; set; } 
```

另一种可行但需要编写更多代码的方法是创建您自己的自定义验证器，以便从存储错误消息的任何位置检索错误消息。我最近不得不这样做，因为我们所有的本地化都发生在数据库中。

# jquery - jQueryUI 自动完成 - 选择中的 A ND/OR 条件

> ID：13258946
> 
> 赞同：4
> 
> 时间：2012-11-06T20:34:40.637
> 
> 标签：jquery, jquery-ui

我正在使用来自[jQuery UI 自动完成的](https://stackoverflow.com/questions/4866699/jquery-ui-autocomplete-with-values)[http://jsfiddle.net/dhoerster/BXYpt/](http://jsfiddle.net/dhoerster/BXYpt/)以值作为基础。这正是我需要的，除了我需要能够有 OR 条件。我创建了一个小提琴作为演示：

[http://jsfiddle.net/B8bWX/1/](http://jsfiddle.net/B8bWX/1/)

我的问题是：演示项目是汽车、电话和带电话的汽车。有没有办法让自动完成处理三种情况：字符串包含大小写（默认），然后是 ANDed 大小写，最后是 OR 大小写？因此，如果我输入“车载电话”，它将导致：

1) 第一种情况 - 0 结果为“车载电话”不是任何标签的子字符串。

2) 第二种情况 - 1 个结果，因为“汽车”和“电话”出现在“带电话的汽车”中。这将添加到前面 0 结果下方的列表中。

3) 第三种情况 - 因为标签“汽车”和“电话”至少包含一个搜索项，所以显示了另外 2 个结果。这些结果显示在第 1 阶段和第 2 阶段的先前结果下方，因此现在应该呈现下面的选择框：

带电话的汽车

车

电话（汽车和电话订单真的无关紧要，因为它们都同样正确）

这是有问题的javascript：

```
$(document).ready(function() {
$( "#topics" ).autocomplete({
    minLength: 1,
    source: topics,
    focus: function( event, ui ) {
        $( "#topics" ).val( ui.item.label );
        return false;
    },
    select: function( event, ui ) {
        $( "#topics" ).val( ui.item.label );
        $("#topicID").val(ui.item.id);
        $( "#results").text($("#topicID").val());    
        return false;
    }
 })

}); 
```

那么是否有可能按顺序执行：

1) string.contains (默认)

2) 字符串拆分 --> AND 条件

3) 字符串拆分 --> OR 条件（不优先按包含的术语数排序）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-08T20:51:57.310

我们需要做的是对数据进行我们自己的搜索以获取“AND”和“OR”结果。我的第一个想法是使用自动选择的事件来做到这一点`response`，并将结果添加到库本身收集的结果中。但是，在编写它时，我意识到无论如何我都必须进行正常搜索，以防止结果出现两次。相反，我将为`source`属性指定一个函数并自己进行所有排序。

（使用较早的方法，我还遇到了一个 jquery-ui 错误（新消息显示找到了多少结果），它没有提出较新的方法。）

好吧，从这里开始很简单，所以让我展示一下代码：

```
var topics = [
    {
    value: "carphone",
    label: "Car With Phone",
    id: "1"},
{
    value: "car",
    label: "Car",
    id: "2"},
{
    value: "phone",
    label: "Phone",
    id: "3"}
];

$(document).ready(function() {
    $("#topics").autocomplete({
        minLength: 1,
        focus: function(event, ui) {
            $("#topics").val(ui.item.label);
            return false;
        },
        select: function(event, ui) {
            $("#topics").val(ui.item.label);
            $("#topicID").val(ui.item.id);
            $("#results").text($("#topicID").val());
            return false;
        },
        source: function(request, response) {
            var fullResults = [];
            var andResults = [];
            var orResults = [];
            var fullNeedle = request.term;
            var needles = $.grep(fullNeedle.split(" "), function(element) {
                return element !== '';
            });

            $.each(topics, function(key, topic) {
                var found = 0;
                $.each(needles, function(needleKey, needle) {
                    if (topic.label.toLowerCase().indexOf(needle.toLowerCase()) != -1) {
                        found++;
                    }
                });

                if (topic.label.toLowerCase().indexOf(fullNeedle.toLowerCase()) != -1) {
                    fullResults.push(topic);
                }
                else if (found == needles.length) {
                    andResults.push(topic);
                }
                else if (found > 0) {
                    orResults.push(topic);
                }
            });

            $.merge(fullResults, andResults);
            $.merge(fullResults, orResults);
            response(fullResults);
        }
    });
}); 
```

稍微解释一下：我们不再将我们的主题作为来源提供给图书馆，而是在我们自己搜索时为自己保留来源。我们使用三个数组来执行此操作，每个数组将包含三种类型的结果之一，因此我们可以保持顺序正确。最后，我们在完成填充后合并这三个数组。

# python - 从先前终止的数据库连接提交 SQLite 中的现有日志文件

> ID：13258948
> 
> 赞同：6
> 
> 时间：2012-11-06T20:34:43.143
> 
> 标签：python, database, sqlite, commit, journal

我正在制作一个脚本，该脚本创建具有四天时间限制的大型 SQLite 数据库。在脚本完成之前达到时间限制并且将执行 connection.commit() 命令。脚本被删除，数据库连接终止，但日志仍在创建数据库的文件目录中。

我想提交现有的日志，看看当前的脚本是否在正确的轨道上。最初我只是尝试（使用 iPython 上的 Python sqlite3 模块）：

```
connection = sqlite3.connect('mydatabase')

connection.commit() 
```

但我怀疑我需要指定我要提交现有的期刊。我尝试在 commit() 中将日志名称作为参数传递，但 commit() 在 sqlite3 Python 模块中不接受参数。

将来我会逐步增加 .commit()

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-07T08:27:25.797

当 SQLite 更改数据库时，一些新数据在 SQLite 的缓存中，其他新数据是否已写入磁盘。当 SQLite 在事务中被杀死时，缓存中的所有数据都已丢失，因此数据库的状态将不一致。在这种情况下，唯一的选择是回滚事务以恢复到一致状态。

该`-journal`文件实际上包含*旧*数据，*新*数据已写入实际的 DB 文件。如果你真的想看到你的部分事务所做的更改，你可以尝试删除`-journal`文件（这会阻止 SQLite 自动回滚）然后打开数据库，但是数据库的状态是不一致的，所以很可能您将无法访问所有数据。

# php - 如果到期日期 = 今天的日期，则重定向到页面？

> ID：13258951
> 
> 赞同：0
> 
> 时间：2012-11-06T20:35:23.687
> 
> 标签：php, sql

我有一个有用户的网站。每个用户帐户在 mysql 表中都有一个到期日期`subscription_expires`。

有没有办法将用户重定向到dashboard.php以外的另一个页面，如果他们的个人资料或在尝试登录后表示他们的个人资料已过期的今天日期`subscription_expires`。`=`

我尝试过使用`sub_expires`等，但如果用户的个人资料过期，它仍然会登录用户。

这是我的登录脚本：

```
<?php

    if (logged_in()) {
        redirect_to("dashboard.php");
    }

    include_once("includes/form_functions.php");

    // START FORM PROCESSING
    if (isset($_POST['submit'])) { // Form has been submitted.
        $errors = array();

        // perform validations on the form data
        $required_fields = array('email', 'password');
        $errors = array_merge($errors, check_required_fields($required_fields, $_POST));

        $fields_with_lengths = array('email' => 30, 'password' => 30);
        $errors = array_merge($errors, check_max_field_lengths($fields_with_lengths, $_POST));

        $email = trim(mysql_prep($_POST['email']));
        $password = trim(mysql_prep($_POST['password']));
        $hashed_password = md5($password);

        if ( empty($errors) ) {
            // Check database to see if email and the hashed password exist there.
            $query = "SELECT id, email, close_account ";
            $query .= "FROM ptb_users ";
            $query .= "WHERE email = '{$email}' ";
            $query .= "AND password = '{$hashed_password}' ";
            $query .= "AND close_account = '0' ";
            $query .= "LIMIT 1";
            $result_set = mysql_query($query);
            confirm_query($result_set);
            if (mysql_num_rows($result_set) == 1) {
                // email/password authenticated
                // and only 1 match
                $found_user = mysql_fetch_array($result_set);
                $_SESSION['user_id'] = $found_user['id'];
                $_SESSION['email'] = $found_user['email'];
                $_SESSION['sub_expires'] = $found_user['subscription_expires'];

                $result = mysql_query("UPDATE ptb_users SET user_online='Online' WHERE id=".$_SESSION['user_id']."") 
or die(mysql_error());

                redirect_to("dashboard.php");
            } else {
                // email/password combo was not found in the database
                $message = "<div class=\"infobox\"><strong>Email/Password combination incorrect.</strong><br />
                    Please make sure your caps lock key is off and try again.</div>";
            }

                } else {
            if (count($errors) == 1) {
                $message = "<div class=\"infobox\">There was 1 error in the form.<div>";

            } else {
                $message = "<div class=\"infobox\">There were " . count($errors) . " errors in the form.<div>";
            }
        }

    } else { // Form has not been submitted.
        if (isset($_GET['logout']) && $_GET['logout'] == 1) {
            $message = "<div class=\"infobox\">You are now logged out.</div>";
        } 
        $email = "";
        $password = "";
    }
?>
            <?php if (!empty($message)) {echo "<p class=\"message\">" . $message . "</p>";} ?>
            <?php if (!empty($errors)) { display_errors($errors); } ?>
            <form action="login.php" method="post">

Email<br />
<input name="email" type="text" value="<?php echo htmlentities($email); ?>" size="40" maxlength="50" />

  <br />
  <br />
  Password<br />
  <input name="password" type="password" value="<?php echo htmlentities($password); ?>" size="40" maxlength="30" />

  <br />
  <br />
<input type="submit" name="submit" value="Login" />

            </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T20:43:20.070

您没有在选择查询中包含“subscription_expires”字段。所以你将得到 $_SESSION['sub_expires'] 的空值。此外，我在您的逻辑中看不到任何地方尝试使用 $_SESSION['sub_expires'] 值来做任何有意义的事情，例如阻止用户登录。您只是自动更新您的 ptb_users 表以将它们显示为在您甚至对该值进行任何检查之前在线。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:55:03.803

您也在使用该`'{$hashed_password}'`参数，但没有设置它（而是设置`trim(mysql_prep($_POST['password']))`。该查询几乎可以肯定永远不会返回一个值......

# android - 如何传递 ListView 中的值？

> ID：13258953
> 
> 赞同：3
> 
> 时间：2012-11-06T20:35:25.670
> 
> 标签：android, string, listview, android-arrayadapter

我想在 ListView 中传递字符串值。首先，我将所有值存储在 Bundle 中，这些值通过用户输入，然后我尝试将所有这些值放入 String [] Array。它确实向我显示了一个错误，但它没有加载在模拟器上。

```
public void onCreate(Bundle savedInstanceState) 
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.list);
    Intent myIntent = getIntent(); 
    Bundle b = myIntent.getExtras(); 
    String std = b.getString("std"); 
    String name = b.getString("name");
    String lastname = b.getString("lastname ");
    String country = b.getString("country ");
    String adrs = b.getString("adrs ");
    String pro = b.getString("pro");
    String pcode = b.getString("pcode");

    String[] listItems = new String[7];
    listItems[0] = std ;
    listItems[1] = name;
    listItems[2] = lastname;
    listItems[3] = country;
    listItems[4] = adrs;
    listItems[5] = pro;
    listItems[6] = pcode;

    ArrayAdapter<String> listItemAdapter = new ArrayAdapter<String>(this
            ,android.R.layout.simple_list_item_1
            ,listItems);
    ListView lv = (ListView)this.findViewById(R.id.list_view_id);
    lv.setAdapter(listItemAdapter);

} 
```

当我在 String[] Array 中编写所有硬编码值时。它显示了整个列表。请帮助我。我错过了什么。如何解决它？？我检查了所有类似的问题，但它不起作用。我非常Android中的新功能，请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-08T22:48:29.347

也许某些字符串不在捆绑包中，在使用捆绑包中的任何字符串之前检查它是否存在 b.containsKey(key)

# java - 接口的层次结构

> ID：13258956
> 
> 赞同：2
> 
> 时间：2012-11-06T20:35:30.167
> 
> 标签：java, jakarta-ee

在 Java 中创建接口层次结构是否被认为是不好的？

我设计了这样的存储库层：

*   `Repository`, 包含 CRUD 方法
*   `JPARepository`, 仅在 JPA 中需要的潜在方法
*   `SomeModelRepository`，该模型的存储库的特定方法。
*   `SomeModelJPARepository`, 扩展 JPARepository 和 SomeModelRepository

这被认为是不好的做法，是一种奇怪的有组织的等级制度吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T20:37:26.747

不，事实上创建接口层次结构是相当普遍的，至少在库中是这样。以[NavigableSet](http://docs.oracle.com/javase/7/docs/api/java/util/NavigableSet.html)为例，它上面有 4 层接口（SortedSet、Set、Collection、Iterable）。

在这个例子中，菱形继承有点特殊，但如果有必要，它本身并不是一个糟糕的选择。但通常树层次结构更清晰更好。在这种情况下，我会考虑制作：

1.  SomeModelRepository 是 JPARepository 的子类，从而强制所有实现类支持 JPA
2.  在不同的接口中指定 JPA 支持，而不是 Repository 的子类。然后所有类都可以选择是否独立于其特定的 Repository 接口来实现 JPA。有关示例，请参见可[序列化。](http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html)这是事实上的解决方案，用于表明类支持特定功能，如“序列化”，或者可能像本例中的“持久性”。

# c# - 下拉列表样式

> ID：13258959
> 
> 赞同：2
> 
> 时间：2012-11-06T20:35:36.157
> 
> 标签：c#, asp.net-mvc

> **可能重复：**
> [如何在所有浏览器中加粗选择的第一个选项？](https://stackoverflow.com/questions/8356797/how-to-bold-the-first-option-of-a-select-across-all-browsers)

我们如何需要为下拉列表编码，以便下拉列表中只有第一个项目是斜体和不同的颜色。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T20:39:57.143

CSS可以解决问题...

```
select option:first-child{
 font-style:italic;
 color:red;
} 
```

[http://jsfiddle.net/79dk5/](http://jsfiddle.net/79dk5/)

# entity-relationship - 上下文图与 0 级图有何不同？

> ID：13258960
> 
> 赞同：10
> 
> 时间：2012-11-06T20:35:39.867
> 
> 标签：entity-relationship, diagram

上下文图和 0 级图之间有什么区别（如果有）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-06T20:44:43.447

文献中关于这两个术语存在一些冲突。
例如，请参阅[本书](http://books.google.co.in/books?id=ytdKQGJ8f_AC&printsec=frontcover&dq=k%20k%20agarwal&hl=en&sa=X&ei=NnaZUIWcGce8rAeVt4DACg&ved=0CD0Q6AEwAw#v=onepage&q=Context%20diagram&f=false)第 54 页。它在谷歌图书上获得了很高的评价，并且是许多学校的标准文本。它说上下文图与0 级 DFD*相同。*[这](http://books.google.co.in/books?id=-ot62DeCKO4C&pg=PA208&dq=context%20diagram&hl=en&sa=X&ei=ROKZUKHaJYSzrAfjuoCADg&ved=0CC8Q6AEwAA#v=onepage&q=context%20diagram&f=false)在第 210 页不同意。

我将首先解决“级别”的概念。

正如我们所知，最初，整个系统由一个大块表示，并且与系统的交互被清晰地描绘出来。*最初，我们用肉眼看到系统。*

现在，想想你自己拿着像显微镜这样的东西。您将镜头放在系统块上方并放大。这种“放大”将您带到层次结构的下一个级别。所以现在，您会看到系统由许多块组成。

您拿起任何子块，然后再次放大，从而进入下一个级别，依此类推。

所以我们看到有一个层次结构的图表，每个层次都将我们带到下一个细节层次。现在唯一争论的焦点是第一层的名称（肉眼的视图）。

如您所见，这个问题不是很客观，因此含糊不清。

我们可以有 ：

```
Context Diagram -> 
                  Level 0 DFD ->
                                    -> Level n DFD</pre> 
```

或者

```
Context Diagram/Level 0 DFD 
                              ->Level 1 DFD
                                              ->Level n DFD 
```

归结为哪个看起来更好。在我个人看来，第一层更贴切。这是因为最初，我们所看到的只是系统及其运行的环境。我觉得任何理解解释的人都不应该太担心命名法。

[请参阅此](http://www2.mccombs.utexas.edu/courses/mis374/Resources/ProcessModeling/ProcessModelingReading.pdf)了解更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-26T14:01:31.570

上下文图在要开发的系统中建立上下文，即它表示系统与各种外部实体的交互。其中数据流图是一种简单的图形符号，可用于表示系统的输入数据，对该数据进行的各种处理以及系统生成的输出。它易于理解和使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-23T12:37:35.110

一个非常困难的讨论。我的想法：上下文图只有 1 个进程，而 DFD 级别 0**可以**有更多。

# php - 使用链接和格式存储用户提供的文本

> ID：13258964
> 
> 赞同：0
> 
> 时间：2012-11-06T20:36:00.777
> 
> 标签：php, mysql, escaping, user-input

如何在维护链接、格式等的同时存储用户贡献的文本？（基本上正是堆栈溢出对我们的帖子所做的）

允许将任何 HTML 存储在文本中似乎是极其危险的。有哪些现有的约定？

网站是用 PHP 构建的，如果重要的话，数据库是 MySQL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:38:16.447

[StackOverflow和](https://stackoverflow.com/editing-help)[Github](http://github.github.com/github-flavored-markdown/)等其他网站扩展了[Markdown](http://daringfireball.net/projects/markdown/)。

这是 Markdown 的[PHP 端口](https://github.com/michelf/php-markdown/)。您可以使用它来显示和存储原始 Markdown 格式的输入。

# ios - iOS 应用验证问题：非公开 API 使用、libsqlite 使用

> ID：13258966
> 
> 赞同：3
> 
> 时间：2012-11-06T20:36:04.987
> 
> 标签：ios, xcode, validation, sqlite

一旦我尝试在 appstore 上验证我的 iOS 应用程序，我在 XCODE 上收到以下错误：

> 您的应用包含非公共 API 使用。请检查错误，更正它们并重新提交您的申请。

该错误没有解释我们使用了哪些非公共类。我怎么才能得到它？

> 该应用程序引用 Payload/...app/libsqlite3.0.dylib 中的非公共符号：_dispatch_sources_type_vm、guarded_close_np、guarded_open_np

我试图通过`libsqlite3.dylib`从 xcode 中删除并添加链接器标志' `-lsqlite3`'或' `-libsqlite3`'（应用程序未编译的最后一个标志）来解决问题。

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T06:21:41.380

您也可以只下载 sqlite 合并并将 sqlite 源代码包含到您的应用程序中。这不会链接到系统 libsqlite3.0.dylib 并且可以避免该问题。您的应用程序二进制文件会变得更大一些，但构建/验证问题会消失。

# php - hotmail：使用 PHP 进行用户身份验证和联系人检索

> ID：13258971
> 
> 赞同：4
> 
> 时间：2012-11-06T20:36:37.413
> 
> 标签：php, oauth, hotmail

我正在尝试编写一个 PHP 脚本，它允许我做两件事：

1.  允许用户使用他们的 Hotmail（我认为它现在称为“Live”？）帐户向网站验证自己的身份

2.  从 Hotmail 检索经过身份验证的用户联系人列表。

在过去的 6 个小时里，我一直在互联网上搜索，寻找至少一个我可以修改/扩展以完成上述两件事的工作示例。例如，这里有几十个类似的问题在这里提出 -**提供**的答案都不再有效（诚然，其中一些问题已经存在几年了）。

我尝试了 Microsoft 站点并下载了他们的 API 的最新版本，该 API 似乎以相当惊人的速度发展。我终于设法找到了一个[尚未弃用的 API（还没有？）](https://github.com/liveservices/LiveSDK)。

我按照说明进行操作，当我尝试进行身份验证时，由于我的努力，我得到了以下信息：

> ```
> We're unable to complete your request
> Windows Live ID is experiencing technical difficulties. Please try again later. 
> ```

我立即尝试了[演示的在线版本，](http://isdk.dev.live.com/ISDK.aspx)也许不出所料，它就像一个魅力。

顺便说一句，我设法为 Yahoo 和 GMail 实现了相同的功能，使用它们的 OPEN API，每个不到一个小时。现在，我对所有专有事物的彻底仇恨（对不起，微软）有可能导致我在这里失去了一点情节。

有没有人实际上（在 2012 年）设法在 PHP 中获得了一个工作示例，它允许：

1.  Hotmail（实时？）用户身份验证
2.  Hotmail 用户联系人邮箱检索

如果你有，一个代码片段，或者我可以找到这样一个片段的链接将非常有用，因为到目前为止，我浪费了整个下午试图通过 PHP 使用 Microsoft Live API。

PS：不，我对 OpenInviter 不感兴趣，它坏了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T01:24:40.123

我围绕每个服务提供商的单个数组编写了自己的 oauth 库。此数组包含执行身份验证和检索用户数据所需的所有数据。我用于 msdn（即 hotmail、outlook、xbox、msn）的数组是：

```
$msdn = array
(
  'oauth_version'              => '2',
  'oauth_method'               => 'GET',
  'redirect_user_params'       => array
  (
    'url'                      => 'https://oauth.live.com/authorize',
    'response_type'            => 'code',
    'http_params'              => array
   (
     'url',
     'client_id',
     'redirect_uri',
     'response_type',
     'scope',
     'state'
   )
 ),
 'obtain_access_token_params'  => array
 (
   'url'                       => 'https://oauth.live.com/token',
   'grant_type'                => 'authorization_code',
   'http_params'               => array
   (
     'url',
     'client_id',
     'client_secret',
     'code',
     'grant_type',
     'redirect_uri',
     'scope'
    )
  ),
  'scope'                      => 'wl.signin wl.basic',
  'obtain_user_data_params'    => array
  (
    'url'                      => 'https://apis.live.net/v5.0/me',
    'http_params'              => array
    (
      'url',
      'access_token',
      'scope'
    )
  ),
  'client_id'                  => 'xxxxx', // = oauth_consumer_key in oauth 1.0 lingo
  'client_secret'              => 'xxxxxxxxxxxxxxx',
  'readme_url'                 => 'http://msdn.microsoft.com/en-us/library/live/hh243647.aspx'
); 
```

三个 oauth 阶段（即“重定向用户”、“获取访问令牌”和“获取用户数据”）中的每一个的参数都在`http_params`数组中。在 msdn 的情况下，这些参数最终出现在我使用 curl 发出的 url 的查询查询字符串中（因为 msdn 只接受 GET，不接受 POST）。

我没有尝试检索用户的联系人通讯录，但这只是使用`scope`您需要的任何额外信息扩展元素的情况（记录在此处[http://msdn.microsoft.com/en-us/library/live/ hh243646.aspx](http://msdn.microsoft.com/en-us/library/live/hh243646.aspx)）。`http_params`从数组中可以看出，该`scope`参数用于三个 oauth 阶段的每一个阶段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:25:43.023

[在CloudSponge 测试驱动器](http://www.cloudsponge.com/test-drive)上尝试 Hotmail/MSN/Live 导入，看看这是否是您希望的用户体验。

如果它适合您，您可以使用我们的小部件或我们的 API。如果您想使用 API，我们已经为您编写了一个[PHP 包装器](https://github.com/arizonabay/cloudsponge-lib-php/)以方便您使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-04T06:33:32.497

如果您只输入 www.domain.com，请确认您的回调 url 是 http://，然后得到这个问题..

# xml - 像 JSONLint.com 这样的 XML 工具

> ID：13258972
> 
> 赞同：0
> 
> 时间：2012-11-06T20:36:42.077
> 
> 标签：xml, json, jsonlint

我使用 JSONLint.com 帮助我快速将 JSON 转储转换为可读的内容，现在我正在处理一些我希望能够更容易阅读的大量不断变化的 XML。有谁知道像 JSONLint for XML 这样的工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T20:48:19.137

如果您只是在寻找格式，而不是验证，您可以使用[http://xmlbeautifier.com/](http://xmlbeautifier.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T17:49:08.340

可用于格式化和验证 XML 的最佳工具是[http://codebeautify.org/xmlviewer](http://codebeautify.org/xmlviewer)

# python - 通过将函数应用于熊猫系列来获取字典

> ID：13258974
> 
> 赞同：2
> 
> 时间：2012-11-06T20:36:45.370
> 
> 标签：python, pandas

我想将一个函数应用于数据帧并接收一个字典作为结果。pandas.apply 给了我一系列的 dicts，所以目前我必须组合每个的键。我将用一个例子来说明。

我有一个像这样的熊猫数据框。

```
In [20]: df
Out[20]:
          0  1
0  2.025745  a
1 -1.840914  b
2 -0.428811  c
3  0.718237  d
4  0.079593  e 
```

我有一些返回字典的函数。对于这个例子，我使用了一个`lambda x: {x: ord(x)}`返回字典的玩具 lambda 函数。

```
In [22]: what_i_get = df[1].apply(lambda x: {x: ord(x)})
In [23]: what_i_get
Out[23]:
0     {'a': 97}
1     {'b': 98}
2     {'c': 99}
3    {'d': 100}
4    {'e': 101}
Name: 1 
```

apply() 给了我一系列字典，但我想要的是一个字典。

我可以用这样的东西创建它：

```
In [41]: what_i_want = {}
In [42]: for elem in what_i_get:
   ....:    for k,v in elem.iteritems():
   ....:        what_i_want[k] = v
   ....:

In [43]: what_i_want
Out[43]: {'a': 97, 'b': 98, 'c': 99, 'd': 100, 'e': 101} 
```

但似乎我应该能够更直接地得到我想要的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T20:42:26.217

而不是从你的函数返回一个字典，只返回映射的值，然后在映射操作之外创建一个字典：

```
>>> d
   Stuff
0     a
1     b
2     c
3     d
>>> dict(zip(d.Stuff, d.Stuff.map(ord)))
{'a': 97, 'b': 98, 'c': 99, 'd': 100} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T20:41:40.710

去掉 items() 中间人：

```
what_i_want = {}
for elem in what_i_get:
    what_i_want.update(elem) 
```

# java - 后端数据库异步更改时如何刷新JPA实体？

> ID：13258976
> 
> 赞同：38
> 
> 时间：2012-11-06T20:36:52.430
> 
> 标签：java, postgresql, jpa, netbeans, glassfish

我有一个 PostgreSQL 8.4 数据库，其中包含一些表和视图，它们本质上是一些表的连接。我使用 NetBeans 7.2（如此[处](http://netbeans.org/kb/70/websvc/rest.html)所述）创建从这些视图和表派生的基于 REST 的服务，并将它们部署到 Glassfish 3.1.2.2 服务器。

还有另一个进程异步更新用于构建视图的某些表中的内容。我可以直接查询视图和表并查看这些更改是否正确发生。但是，当从基于 REST 的服务中提取时，这些值与数据库中的值不同。我假设这是因为 JPA 已经在 Glassfish 服务器上缓存了数据库内容的本地副本，并且 JPA 需要刷新关联的实体。

我尝试向 NetBeans 生成的 AbstractFacade 类添加几个方法：

```
public abstract class AbstractFacade<T> {
    private Class<T> entityClass;
    private String entityName;
    private static boolean _refresh = true;

    public static void refresh() { _refresh = true; }

    public AbstractFacade(Class<T> entityClass) {
        this.entityClass = entityClass;
        this.entityName = entityClass.getSimpleName();
    }

    private void doRefresh() {
        if (_refresh) {
            EntityManager em = getEntityManager();
            em.flush();

            for (EntityType<?> entity : em.getMetamodel().getEntities()) {
                if (entity.getName().contains(entityName)) {
                    try {
                        em.refresh(entity);
                        // log success
                    }
                    catch (IllegalArgumentException e) {
                        // log failure ... typically complains entity is not managed
                    }
                }
            }

            _refresh = false;
        }
    }

...

}
```

然后，我从NetBeans 生成`doRefresh()`的每个方法中调用。`find`通常发生的情况`IllegalArgumentsException`是抛出类似`Can not refresh not managed object: EntityTypeImpl@28524907:MyView [ javaType: class org.my.rest.MyView descriptor: RelationalDescriptor(org.my.rest.MyView --> [DatabaseTable(my_view)]), mappings: 12].`

所以我正在寻找一些关于如何正确刷新与视图关联的实体的建议，以便它是最新的。

**更新：**原来我对潜在问题的理解是不正确的。[这与我之前发布的另一个问题](https://stackoverflow.com/questions/12980332/glassfish-postgresql-table-with-composite-two-part-primary-key-generating-co)有些相关，即视图没有可用作唯一标识符的单个字段。NetBeans 要求我选择一个 ID 字段，所以我只选择了应该是多部分键的一部分。这表现出具有特定 ID 字段的所有记录都相同的行为，即使数据库具有具有相同 ID 字段但其余部分不同的记录。JPA 只是查看了我告诉它的唯一标识符，并简单地提取了它找到的第一条记录。

我通过添加一个唯一标识符字段解决了这个问题（永远无法让多部分密钥正常工作）。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-11-07T00:11:24.457

我建议添加一个`@Startup` `@Singleton`与 PostgreSQL 数据库建立 JDBC 连接并使用[`LISTEN`和`NOTIFY`](http://www.postgresql.org/docs/current/static/sql-notify.html)处理缓存失效的类。

**更新**：[这是另一种有趣的方法，使用 pgq 和一组工作人员进行 invalidation](http://momjian.us/main/blogs/pgblog/2014.html#March_1_2014)。

## 失效信号

在正在更新的表上添加一个触发器，该触发器在`NOTIFY`实体更新时发送一个。在 PostgreSQL 9.0 及更高版本上，它`NOTIFY`可以包含有效负载，通常是行 ID，因此您不必使整个缓存无效，只需使已更改的实体无效。在不支持有效负载的旧版本上，您可以将无效的条目添加到带时间戳的日志表中，当助手类获取时查询该日志表`NOTIFY`，或者只是使整个缓存无效。

您的助手类现在在触发器发送`LISTEN`的事件上。`NOTIFY`当它收到一个`NOTIFY`事件时，它可以使单个缓存条目无效（见下文），或刷新整个缓存。您可以使用[PgJDBC 的监听/通知支持](http://jdbc.postgresql.org/documentation/91/listennotify.html)来监听来自数据库的通知。您将需要打开任何连接池管理`java.sql.Connection`器以访问底层 PostgreSQL 实现，以便您可以将其转换为`org.postgresql.PGConnection`并调用`getNotifications()`它。

`LISTEN`作为and的替代方法`NOTIFY`，您可以在计时器上轮询更改日志表，并在问题表上设置触发器，将更改的行 ID 和更改时间戳附加到更改日志表中。除了需要为每种数据库类型使用不同的触发器之外，这种方法将是可移植的，但它效率低且不及时。它需要频繁的低效轮询，并且仍然存在侦听/通知方法所没有的时间延迟。在 PostgreSQL 中，您可以使用`UNLOGGED`表来稍微降低这种方法的成本。

## 缓存级别

EclipseLink/JPA 有几个级别的缓存。

一级缓存在[`EntityManager`](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html)级别。如果实体附加到`EntityManager`by `persist(...)`、`merge(...)`、`find(...)`等，则在同一会话中再次访问该实体时，无论您的应用程序是否仍然具有对它的引用，`EntityManager`都需要返回*该实体的相同实例。*如果您的数据库内容已更改，则此附加实例将不是最新的。

二级缓存是可选的，属于一级缓存，是[`EntityManagerFactory`](http://docs.oracle.com/javaee/6/api/javax/persistence/EntityManager.html)比较传统的缓存。目前尚不清楚您是否启用了二级缓存。检查 EclipseLink 日志和`persistence.xml`. `EntityManagerFactory.getCache()`您可以使用;访问二级缓存。见[`Cache`](http://docs.oracle.com/javaee/6/api/javax/persistence/Cache.html)。

@thedayofcondor 展示了如何刷新二级缓存：

```
em.getEntityManagerFactory().getCache().evictAll(); 
```

但您也可以通过以下[`evict(java.lang.Class cls, java.lang.Object primaryKey)`](http://docs.oracle.com/javaee/6/api/javax/persistence/Cache.html)调用逐出单个对象：

```
em.getEntityManagerFactory().getCache().evict(theClass, thePrimaryKey); 
```

您可以从`@Startup` `@Singleton` `NOTIFY`侦听器中使用它来仅使那些已更改的条目无效。

一级缓存并不容易，因为它是应用程序逻辑的一部分。您将想了解`EntityManager`、附加和分离实体等如何工作。一种选择是始终对有问题的表使用分离的实体，`EntityManager`每当您获取实体时都使用新的实体。这个问题：

[使 JPA EntityManager 会话无效](https://stackoverflow.com/q/2400430/398670)

对处理实体管理器缓存的失效进行了有用的讨论。但是，缓存不太可能`EntityManager`是您的问题，因为 RESTful Web 服务通常使用短`EntityManager`会话来实现。`EntityManager`如果您使用扩展的持久性上下文，或者如果您正在创建和管理自己的会话而不是使用容器管理的持久性，这可能只是一个问题。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-06T20:43:09.263

您可以完全禁用缓存（请参阅：[http](http://wiki.eclipse.org/EclipseLink/FAQ/How_to_disable_the_shared_cache%3F) ://wiki.eclipse.org/EclipseLink/FAQ/How_to_disable_the_shared_cache%3F ），但要准备好相当大的性能损失。

否则，您可以通过编程方式执行清除缓存

```
em.getEntityManagerFactory().getCache().evictAll(); 
```

您可以将其映射到 servlet，以便在外部调用它 - 如果您的数据库很少在外部修改并且您只想确保 JPS 会选择新版本，这会更好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:57:47.350

只是一个想法，但是您如何收到您的 EntityManager/Session/whatever？

如果您在一个会话中查询实体，它将在下一个会话中分离，您必须将其合并回持久性上下文中才能再次对其进行管理。

尝试使用分离的实体可能会导致那些非托管异常，您应该重新查询实体，或者您可以尝试使用合并（或类似方法）。

* * *

## 回答 #4

> 赞同：-4
> 
> 时间：2012-11-06T20:44:25.557

JPA 默认不做任何缓存。您必须明确配置它。我相信这是您选择的架构风格的副作用：REST。我认为缓存发生在 Web 服务器、代理服务器等。我建议您阅读[此](http://odino.org/rest-better-http-cache/)内容并进行更多调试。

# javascript - Leaflet JS：在定义事件处理程序之前是否需要实例化事件对象

> ID：13258982
> 
> 赞同：1
> 
> 时间：2012-11-06T20:37:19.947
> 
> 标签：javascript, leaflet

我正在尝试根据传单 js 地图类上的 location() 方法的成功创建事件处理程序

这是我目前所拥有的：

```
function initMap() {
    var map = L.map('map').locate({setView: false});

    map.on('locationfound', function(s) {
        map.setView(s.latlng).setZoom(14);
    });

    map.on('locationerror', function(e) {
        message: 'Sorry, We were unable to determine your current location.';
    });

    L.tileLayer('http://{s}.tile.cloudmade.com/0e35616818144f159fa412e57f190939/997/256/{z}/{x}/{y}.png', {
        attribution: 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, Imagery © <a href="http://cloudmade.com">CloudMade</a>',
        maxZoom: 18
    }).addTo(map);
} 
```

's' 或 'e' 是否需要在定义事件处理程序之前启动，或者 s 和 e 是否通过事件处理程序承担 LocationEvent 对象的角色。如果是这样，这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T18:00:45.380

它不需要启动。您作为事件侦听器传递的函数会自动以某些对象作为参数（在本例中为位置数据）调用。

# sql - 使用 SQL 对表进行“转置”

> ID：13258984
> 
> 赞同：4
> 
> 时间：2012-11-06T20:37:23.420
> 
> 标签：sql, sybase, linear-algebra, transpose, unpivot

我不知道这个操作是否有名字，但它类似于线性代数中的转置。

有没有办法通过 n 表 T1 翻转 1，例如

```
c_1|c_2|c_3|...|a_n
-------------------
1  |2  |3  |...|n 
```

进入如下的 by 2 表

```
key|val
-------
c_1|1
b_2|2
c_3|3
.  |.
.  |.
a_n|n 
```

我假设 T1 中的每一列 c_i 都不太可能被识别。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T20:48:28.293

基本上，您需要`UNPIVOT`这些数据，您可以使用以下命令执行此操作`UNION ALL`：

```
select 'c_1' col, c_1 value
from yourtable
union all
select 'c_2' col, c_2 value
from yourtable
union all
select 'c_3' col, c_3 value
from yourtable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T20:51:27.420

@swasheck 然后我猜他们必须将列名读入列表

```
mylistobject = SELECT sql FROM sqlite_master WHERE tbl_name = 'table_name' AND type = 'table' 
```

创建新表，列名是主键，然后是值，然后在列表上迭代，这在 Python 中比这要麻烦得多

```
for columnName in list:

   row = cursor.execute('SELECT ' + str(value) + 'FROM tableToBeTransposed WHERE COLUMN = ' + str(c_i) + ';').fetchone()

   cursor.execute('INSERT INTO newTable(c_i, values), (?,?)' (columnName, value)) 
```

# c# - 组合框选定值验证

> ID：13258986
> 
> 赞同：1
> 
> 时间：2012-11-06T20:37:33.017
> 
> 标签：c#

> **可能重复：**
> [如何在 C# 中验证组合框值](https://stackoverflow.com/questions/13296801/how-to-validate-combo-box-values-in-c-sharp)

我有 6 个 C# 形式的组合框，它们都从同一列的数据库中填充。即用于使学生结果组合框填充主题名称。现在我想要的是如果已经在前一个组合框中选择了主题，如何从第二个组合框中删除主题名称。

# xpages - 部分刷新时出现运行时错误

> ID：13258987
> 
> 赞同：1
> 
> 时间：2012-11-06T20:37:33.207
> 
> 标签：xpages

我需要对多个组件进行部分刷新，如下所示：

[http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/Work_with_events_and_partial_or_full_refresh](http://xpageswiki.com/web/youatnotes/wiki-xpages.nsf/dx/Work_with_events_and_partial_or_full_refresh)

所以我想我会从一个小组件开始，然后放置代码：

```
XSP.partialRefreshPost("#{txtProductType}"); 
```

在单选按钮组的客户端单击事件中。显示页面时，我得到：

```
The runtime has encountered an unexpected error. 
```

知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T21:09:53.590

XSP.partialRefreshPost 方法需要客户端 id 和可选参数。因此，在您的情况下，正确的语法是：

```
XSP.partialRefreshPost("#{id:txtProductType}", {}); 
```

# oracle - Oracle sql计算单列中不同值的实例 - 继续

> ID：13258990
> 
> 赞同：0
> 
> 时间：2012-11-06T20:37:41.880
> 
> 标签：oracle

这是我之前发布的问题的延续 这是 [Oracle sql 的链接，用于计算单列中不同值的实例](https://stackoverflow.com/questions/13238142/oracle-sql-to-count-instances-of-different-values-in-single-column)

在枢轴查询的进一步延续中，我正在尝试做类似的事情

for col in ( Count_status20 as col20, Count_status30 or Count_status40 as col30, Count_status50 as col50) 输入与前面的问题相同。

基本上在这里，我试图将 30 或 40 中的状态汇总为一列。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T21:48:04.637

试试这样：

```
select *
from
(
  select tkey, status, 
    decode(status, 30, 30, 40, 30,status) as col
  from tableB b
  left join tableA a
    on a.fkey = b.fkey
) src
pivot
(
  count(status)
  for col in ('20' as Count_Status20, 
              '30' as Count_Status3040,
              '50' as Count_Status50)
) piv; 
```

[这](http://www.sqlfiddle.com/#!4/ef499/5)是一个小提琴

# php - 清理货币输入

> ID：13258994
> 
> 赞同：0
> 
> 时间：2012-11-06T20:38:01.747
> 
> 标签：php

我正在处理货币输入。只能使用小数点后两位数。我尝试将输入转换为浮点数并乘以 100，这可以正常工作，直到有人在小数点后输入超过两位数：

```
// Returns 6999.8 instead of 6999
$cents = floatval('69.998') * 100; 
```

然后我尝试将结果转换为 int，因此小数点后的连续数字被忽略。它解决了上述问题（'69.998' 变为 6999），但创建了一个具有浮点到整数转换的新问题：

```
// Returns 6998 instead of 6999
$cents = intval(floatval('69.99') * 100); 
```

我也考虑过 floor()，但它会触发与 intval() 相同的浮动问题。

这就是我正在考虑使用的：

```
$cents = intval((string)(floatval('69.99') * 100)); 
```

它在这两种情况下都有效，但感觉就像一个黑客，而且已经很晚了，我的头很痛，所以也许我在这里遗漏了一些明显的东西。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T20:40:04.957

是

```
$cents = intval(round(floatval('69.99') * 100)); 
```

你需要什么？

您还可以指定精度。例如，在您提到的情况下，您希望将原始数据四舍五入到小数点后两位：

```
$twodecimal = round(floatval('69.998'),2);//returns a float representation of 70 
```

请务必查看这些[文档中的红色大通知](http://php.net/manual/en/language.types.float.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-06T21:13:45.270

这是因为`69.99 * 100`有一个[浮点](http://en.wikipedia.org/wiki/Floating_point)表示`6998.9999999*`（关闭：您也可以在 javascript 控制台上检查它）。如果你想要精确，你应该使用带有 php 扩展的[定点数，比如](http://en.wikipedia.org/wiki/Fixed-point_arithmetic)[BCMath](http://www.php.net/manual/en/book.bc.php) - 或者，你可以为这个特定问题编写一个简单的正则表达式

```
$amount = '69.99';

if (preg_match('/^(-?\d+)(\.(\d{1,2}))?/', $amount, $matches))
{
    $amount = (int) ($matches[1] . (isset($matches[3]) ? str_pad($matches[3], 2, '0') : '00'));
}
else
{
    $amount = ((int) $amount) * 100;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T20:42:21.647

```
$cents = intval(round(floatval('69.99') * 100)); 
```

这将正确地得到最接近的数字，这是因为浮动指针精度问题，因为`69.99`它可能在内存中表示为类似`69.9899999`

`intval`只是截断小数的其余部分，所以`69.989999 * 100`变成`6998.9999`并被截断为`6998`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T20:44:46.677

我建议您使用整数来包含货币值。使用浮点数会迅速导致舍入错误。

在我看到的应用程序中，整数与假定的小数点一起使用。所有价值均以最接近的货币单位为准，例如美元或欧元的美分。有些货币没有小数点，有些货币不是两位小数，而是三位小数。

通过使用带有假定小数位的整数进行操作，您可以真正减少舍入误差和浮点可以看到的其他问题。

要进行转换，我建议使用字符串操作并使用字符串操作删除小数点，并执行检查以确保仅输入所需的位数。

# swt - 所有列的 SWT 表复选框

> ID：13258998
> 
> 赞同：5
> 
> 时间：2012-11-06T20:38:15.730
> 
> 标签：swt

我正在尝试创建一个带有复选框的双列表，我创建了一个包含以下代码段的表：

```
 Table table = new Table(parent, SWT.CHECK | SWT.BORDER | SWT.V_SCROLL | SWT.H_SCROLL);

 TableColumn tableColumn = new TableColumn(table, SWT.NONE);
 tableColumn.setWidth(300);
 tableColumn.setText("Check Column1");

 TableColumn tableColumn1 = new TableColumn(table, SWT.NONE);
 tableColumn1.setWidth(300);
 tableColumn1.setText("Check  Column2");

 TableItem tableItem=new TableItem(table,SWT.NONE);
 Image image=getImage(imagePath);
 tableItem.setImage(0, image); 
```

我得到的是复选框被创建的第一列但不是在第二列你知道为什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:45:20.390

标准 SWT Table Widget 不支持此功能。试试 Nebula 的[Nattable](http://www.eclipse.org/nattable/)以获得功能更丰富的表格小部件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T21:01:39.283

如果要在`Table`Cell 中显示 CheckBox，可以通过两种方式进行。

1.  根据您拥有的数据状态显示图像（检查开/关），并且您需要在鼠标单击表格单元格时收听。

2.  你可以添加`Button ( SWT.CHECK)`我下面提到的

[SWT - Tableviewer 将删除按钮添加到表中的列](https://stackoverflow.com/questions/12480402/swt-tableviewer-adding-a-remove-button-to-a-column-in-the-table/12486929#12486929)