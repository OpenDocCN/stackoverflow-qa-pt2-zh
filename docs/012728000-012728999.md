# StackOverflow 问答 12728000-12728999

# jquery - 带有背景图像动画的 JQuery 菜单

> ID：12728000
> 
> 赞同：0
> 
> 时间：2012-10-04T13:08:43.767
> 
> 标签：jquery, html, css

我有这个： http: [//jsfiddle.net/bnNSW/](http://jsfiddle.net/bnNSW/) 我想要一个功能导航菜单。如何？

1.  点击背景必须动画到底部才能选择并链接到页面。同时，另一个选定的选项卡必须动画到顶部。
2.  在悬停背景上必须只显示提示以演示用户所有选项卡都是可选的。

代码？

更新：这是我正在开发的网站[http://www.accastelli.com.ar/](http://www.accastelli.com.ar/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:21:06.573

查看[演示](http://jsbin.com/usijof/3/edit)

```
$("#nav li a").hover(
function () {
    //$("#nav li a li").css({'background-position-y':'-102px'});
    if( $(this).parent('li').not('select') ){
        $(this).parent('li').animate({'background-position-y':'-82px'},300);
    }
},
function () {
    if( $(this).parent('li').not('select') ){
        $(this).parent('li').animate({'background-position-y':'-102px'},300);
    }
}
);

$('#nav li a').click(function(e){
    e.preventDefault();
    e.stopPropagation();
    $('#nav li').animate({'background-position-y':'-102px'},300,function(){ $('#nav li').removeClass('select');});

      $(this).parent('li').animate({'background-position-y':'0'},300,function(){$(this).addClass('select')});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:42:40.527

试试[这个](http://jsfiddle.net/UE9B2/)

```
 $("#nav li a").hover(
    function () {
        if ($(this).parent('li').not('select')) {
            $(this).parent('li').animate({ 'background-position-y': '-82px' }, 300);
        }
    },
    function () {
        if ($(this).parent('li').not('select')) {
            $(this).parent('li').animate({ 'background-position-y': '-102px' }, 300);
        }
    }
);

        $('#nav li a').click(function (e) {
            e.preventDefault();
            e.stopPropagation();
            $(this).parents().find('li').removeClass('select');
            $(this).parent('li').animate({ 'background-position-y': '0' },
                                        {
                                            duration: 300,
                                            complete: function () { $(this).addClass('select'); }
                                        }
                                    );

        }); 
```

# javascript - Span 不会在 div 中更新

> ID：12728001
> 
> 赞同：1
> 
> 时间：2012-10-04T13:08:48.310
> 
> 标签：javascript, jquery, html

您好我正在尝试从 ajax 调用更新 div span 文本，这是我的 html 结构：

```
<div id="23" class="message product error">
        <strong>
            <br> 
            <strong>Unique id Id:</strong>
            <span class="uniqueId" style="color: #000; font-weight: bold;">job_201208311928_78749</span>
            <br> 
            <strong>Job Status:</strong> 
            <span class="status" style="color: #000; font-weight: bold;">IN PROGRESS</span>
</div> 
```

我正在尝试将状态更新`IN PROGRESS`为`SHIPPED`

但是我的 jquery 没有做到这一点：

```
function update (item){
    $('#' + item.id + "span.status").text(item.CurrentStatus);
} 
```

`Item.id`当我发出警报时，`item.CurrentStatus`两者都有正确的值。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T13:10:46.387

您需要在跨度之前包含一个空格：

```
function update (item){ 
    $('#' + item.id + " span.status").text(item.CurrentStatus); 
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T13:11:02.877

必须在那里插入一个空格。

```
$('#' + item.id + ' span.status').text(item.CurrentStatus); 
```

或者让它更清楚：

```
$('#' + item.id).find('span.status').text(item.CurrentStatus); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T13:10:54.373

我相信您的选择器中需要一个空格：

```
function update (item){
    $('#' + item.id + " span.status").text(item.CurrentStatus);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T13:11:45.430

我认为您错过了选择器中的空格

试试这个

```
 $('#' + item.id + " .status").text(item.CurrentStatus); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T13:34:40.903

正如已经指出的，您需要插入一个空格。该空格表示，`<span>`具有类*状态*的元素是具有给定 的元素的**后代**`id`。

没有空格，你是说给我带有`id` `<id>span`（例如`23span`）类*status*的元素。

```
function update (item){ 
    $('#' + item.id + " span.status").text(item.CurrentStatus); 
} 
```

# python - 错误：没有名为 psycopg2.extensions 的模块

> ID：12728004
> 
> 赞同：107
> 
> 时间：2012-10-04T13:08:49.877
> 
> 标签：python, django, postgresql, psycopg2

我正在尝试为我的 django 项目设置一个 PostgreSQL 数据库，我相信我现在已经完成了，这要归功于对我最后一个问题[Problems setting up a postgreSQL database for a django project](https://stackoverflow.com/questions/12710715/problems-setting-up-a-postgresql-database-for-a-django-project/12713737#comment17168054_12713737)的回复。我现在正在尝试在终端中运行命令“python manage.py runserver”来启动我的本地主机，但是当我运行命令时，我看到了这个响应......

```
Error: No module named psycopg2.extensions 
```

我不确定这意味着什么——我尝试下载 psycopg2，但似乎找不到使用自制软件下载 psycopg2 的方法。我尝试过 easy_install、pip install 和 sudo，但都返回这样的错误......

```
Downloading http://www.psycopg.org/psycopg/tarballs/PSYCOPG-2-4/psycopg2-2.4.5.tar.gz
Processing psycopg2-2.4.5.tar.gz
Writing /tmp/easy_install-l7Qi62/psycopg2-2.4.5/setup.cfg
Running psycopg2-2.4.5/setup.py -q bdist_egg --dist-dir /tmp/easy_install-l7Qi62/psycopg2-2.4.5/egg-dist-tmp-PBP5Ds
no previously-included directories found matching 'doc/src/_build'
unable to execute gcc-4.0: No such file or directory
error: Setup script exited with error: command 'gcc-4.0' failed with exit status 1 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：190
> 
> 时间：2013-01-13T22:28:38.447

首先要做的是安装依赖项。

```
sudo apt-get build-dep python-psycopg2
sudo apt install python3-psycopg2 *# Python 3*
```

之后进入你的 virtualenv 并使用：

```
pip install psycopg2-binary 
```

这两个命令应该可以解决问题。

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2018-03-15T20:34:52.900

```
pip install psycopg2-binary 
```

psycopg2 轮子包将从 2.8 版重命名；为了继续从二进制安装，请改用“pip install psycopg2-binary”。有关详细信息，请参阅：http: [//initd.org/psycopg/docs/install.html#binary-install-from-pypi](http://initd.org/psycopg/docs/install.html#binary-install-from-pypi)。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-01-04T15:34:07.913

使用`Django 2`并`python 3`安装：`psycopg2`_`pip3`

```
pip3 install psycopg2 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-03-17T18:34:12.573

对于`macOS Mojave`刚刚运行`pip install psycopg2-binary`。对我来说很好，python版本->`Python 3.7.2`

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-06-09T05:05:14.167

我使用以下命令成功安装了它：

```
sudo apt-get install libpq-dev python-dev
pip install psycopg2 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2013-04-04T21:32:58.287

This is what helped me on Ubuntu if your python installed from Ubuntu installer. I did this after unsuccessfully trying 'apt-get install' and 'pip install':

In terminal:

```
sudo synaptic 
```

then in synaptic searchfield write

```
psycopg2 
```

choose

```
python-psycopg2 
```

mark it for installation using mouse right-click and push 'apply'. Of course, if you don't have installed synaptic, then first do:

```
sudo apt-get install synaptic 
```

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2012-10-04T14:31:20.897

首次安装`apt-get install python-setuptools`

然后尝试`easy_install psycopg2`

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2021-03-28T05:59:56.580

我最近遇到了同样的问题，这段代码有效。

```
sudo apt-get install libpq-dev python-dev-is-python3 
```

然后

```
pip3 install psycopg2 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-06-12T22:15:32.867

在 python 3.4 中，在虚拟环境中，请确保首先具有构建依赖项：

```
sudo apt-get build-dep python3-psycopg2 
```

然后安装它：

```
pip install psycopg2 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2020-11-06T04:41:39.480

```
pip3 install django-psycopg2-extension 
```

我知道我迟到了，这里有很多答案也解决了这个问题。但是今天我也遇到了这个问题，这些都对我没有帮助。然后我发现上面的神奇命令解决了我的问题：-P。所以我发布这个可能也是你的情况。
快乐编码。

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2018-12-25T13:41:38.867

在 Alpine Linux（大多数 docker 容器）上：

```
apk add postgresql-dev 
```

然后：

```
pip install psycopg2-binary 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-10-04T13:18:36.730

我只在导入 psycopg2 后使用了扩展：

```
import psycopg2

...

psycopg2.extensions.AsIs(anap[i]) 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2012-10-04T13:33:47.660

看来您需要`gcc-4.0`，并且指定您的操作系统类型和版本会有所帮助。

也许这个问题会对你有所帮助：[Installing GCC to Mac OS X Leopard without installed Xcode](https://stackoverflow.com/questions/4360110/installing-gcc-to-mac-os-x-leopard-without-installing-xcode)

**更新**

我是 Windows 用户，所以我无法测试您的设置，但快速 google 指出了更多链接：

*   [http://hardlifeofapo.com/psycopg2-and-postgresql-9-1-on-snow-leopard/](http://hardlifeofapo.com/psycopg2-and-postgresql-9-1-on-snow-leopard/)
*   [无法使用 XCode4 在 OSX 10.6.7 上安装 psycopg2](https://stackoverflow.com/questions/5427157/cannot-install-psycopg2-on-osx-10-6-7-with-xcode4)

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2020-06-22T20:20:19.627

我在尝试将 python 脚本作为 sudo 运行时遇到了这样的问题，而 psycopg2 是通过 pip3 安装到我自己的用户目录中的。

我设法为自己解决了这个问题，删除了 pip3 版本，并通过 apt 安装它：

```
pip3 uninstall psycopg2
sudo apt install python3-psycopg2 
```

* * *

## 回答 #15

> 赞同：1
> 
> 时间：2017-02-24T23:33:16.420

try this:
**sudo pip install -i [https://testpypi.python.org/pypi](https://testpypi.python.org/pypi) psycopg2==2.7b2**
.. this is especially helpful if you're running into egg error

on aws ec2 instances if you run into gcc error; try this
**1\. sudo yum install gcc python-setuptools python-devel postgresql-devel
2\. sudo su -
3\. sudo pip install psycopg2**

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2016-06-15T13:41:55.797

`No module named psycopg2.extensions`尝试在`pip2 install psycopg2`运行 Mavericks (10.9) 的 Mac 上运行时遇到错误。我不认为我的堆栈跟踪包含有关 gcc 的消息，它还包含一个提示：

```
Error: pg_config executable not found.

Please add the directory containing pg_config to the PATH
or specify the full executable path with the option:

    python setup.py build_ext --pg-config /path/to/pg_config build ...

or with the pg_config option in 'setup.cfg'. 
```

我在我的 Postgres 安装中查找了该`pg_config`文件，并将包含它的文件夹添加到我的路径中：`/Applications/Postgres.app/Contents/Versions/9.4/bin`. 您的路径可能不同，特别是如果您安装了不同版本的 Postgres - 我会四处寻找，直到您找到该`bin/`文件夹​​。完成此操作后，安装工作。

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2020-05-20T04:59:35.683

这个对我有用

python manage.py 迁移

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2012-10-04T14:02:28.927

[您可以在安装 gcc 后从https://github.com/kennethreitz/osx-gcc-installer](https://github.com/kennethreitz/osx-gcc-installer) 为 macos 安装 gcc，您将能够使用或使用
psycopg 安装`easy_install``pip`

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2013-03-12T06:25:36.943

如果没有，请检查您是否安装了 psycopg2

```
sudo apt-get install psycopg2 
```

安装依赖项。

```
sudo apt-get build-dep python-psycopg2 
```

这两个命令应该可以解决问题。

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-01-15T11:37:29.450

出现此错误是因为您没有在项目虚拟环境中安装 postgres 数据库。您应该运行这些命令之一。从终端您可以命令 sudo。

```
sudo apt-get install build-dep python-psycopg2 
```

对于 pip（pip 基本上适用于 python）

```
pip install psycopg2 
```

或者

```
pip3 install psycopg2-binary 
```

我很确定它会为你工作。

# camera - 如何锁定 AVCaptureVideoPreviewLayer 的旋转？

> ID：12728005
> 
> 赞同：3
> 
> 时间：2012-10-04T13:09:00.233
> 
> 标签：camera, containers

在我对锁定 AVCaptureVideoPreviewLayer 旋转的无尽追求中（就像在 camera.app 中一样），我决定尝试 VC 遏制。

我的想法是，如果我将 AVCaptureVideoPreviewLayer 代码放入单独的 VC 并禁用它的旋转，我应该能够将锁定的“*视图*”作为我的背景层（增强现实应用程序）。

但是当我尝试这样做时， AVCaptureVideoPreviewLayer 根本无法工作，我没有得到任何相机视频。

下面是我的设置。

在**ViewController.m**中：

```
 @property (nonatomic, strong, readwrite) cameraViewController *cameraVC;

-(void) viewDidAppear:(BOOL)animated
{
        self.cameraVC = [self.storyboard instantiateViewControllerWithIdentifier:@"cameraVC"];

        [self addChildViewController:self.cameraVC];

        [self.view addSubview:self.cameraVC.view]; 
```

在**cameraViewController.m**中：

```
-(void) viewDidAppear:(BOOL)animated
{
    NSLog(@"cameraViewController : viewDidAppear");

     self.captureManager = [[CaptureSessionManager alloc] init];
     [self.captureManager addVideoInput];
     [self.captureManager addVideoPreviewLayer];

     CGRect layerRect = self.cameraView.bounds;
     [[self.captureManager previewLayer] setBounds:layerRect];
     [[self.captureManager previewLayer] setPosition:CGPointMake(CGRectGetMidX(layerRect), CGRectGetMidY(layerRect))];

     [self.cameraView.layer addSublayer:self.captureManager.previewLayer];

     [[self.captureManager captureSession] startRunning];

} 
```

但是当我将**cameraViewController.m**设置为在我的故事板中首先自动加载的根控制器时，相机视频 (AVCaptureVideoPreviewLayer) 工作正常。（减去旋转烦恼）

为什么它可以作为根 VC 而不是子 VC？

[我正在使用 XCode 4.5、iOS 6.0 和故事板。]

# spring - 实体的 RestTemplate 帖子

> ID：12728006
> 
> 赞同：16
> 
> 时间：2012-10-04T13:09:01.660
> 
> 标签：spring, spring-mvc, spring-3

我的 post 方法被调用，但我的个人资料为空。这种方法有什么问题？我必须使用 @Requestbody 来使用 RestTemplate 吗？

```
Profile profile = new Profile();
profile.setEmail(email);        
String response = restTemplate.postForObject("http://localhost:8080/user/", profile, String.class);

@RequestMapping(value = "/", method = RequestMethod.POST)
    public @ResponseBody
    Object postUser(@Valid Profile profile, BindingResult bindingResult, HttpServletResponse response) {

    //Profile is null
        return profile;
    } 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-04T13:57:34.423

您必须以这种方式构建配置文件对象

```
MultiValueMap<String, Object> parts = new LinkedMultiValueMap<String, Object>();
parts.add("email", email);

Object response = restTemplate.postForObject("http://localhost:8080/user/", parts, String.class); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-11-16T13:16:33.790

`MultiValueMap`对我来说是一个很好的起点，但在我的情况下，它仍然将空对象发布到`@RestController`我的实体创建解决方案中，并且发布最终看起来像这样：

```
HashedMap requestBody = new HashedMap();
requestBody.put("eventType", "testDeliveryEvent");
requestBody.put("sendType", "SINGLE");

HttpHeaders headers = new HttpHeaders();
headers.setContentType(MediaType.APPLICATION_JSON);

// Jackson ObjectMapper to convert requestBody to JSON
String json = new ObjectMapper().writeValueAsString(request);
HttpEntity<String> entity = new HttpEntity<>(json, headers);

restTemplate.postForEntity("/generate", entity, String.class); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-03-01T20:05:47.497

我目前的做法：

```
final Person person = Person.builder().name("antonio").build();

final ResponseEntity response = restTemplate.postForEntity(
         new URL("http://localhost:" + port + "/person/aggregate").toString(),
         person, Person.class); 
```

# java - 如何从 Servlet 2.3 或 2.5 中的响应中获取标头

> ID：12728017
> 
> 赞同：4
> 
> 时间：2012-10-04T13:09:37.233
> 
> 标签：java, jakarta-ee, servlets, servlet-filters, servlet-2.5

我知道 v3.0 有方法`getHeader()`但是 2.3 呢？也许有可能从蒸汽中获得？

更新：

实际上，我需要 HTTP 响应标头 RESTful 应用程序。出于某种原因，我决定在 servlet 过滤器中执行此操作……但没有成功……解决方案`@javax.ws.rs.core.Context HttpHeaders requestHeaders`。

例如，

```
@javax.ws.rs.GET
public String invoceRestMethod(@Context HttpHeaders requestHeaders){
      MultivaluedMap<String, String> map = headers.getRequestHeaders();
      for (Map.Entry<String, List<String>> entry : map.entrySet()) {
      //  processing header.... 
      }     
} 
```

也许对某人有帮助。但无论如何，对于 Servlet 问题仍然存在

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T13:19:52.220

您无法从流^*中获取标题。

您需要做的是在调用 Servlet 之前将代理响应对象插入过滤器链，并让它捕获标头。

* * *

^(* 实际上，您可以使用代理响应从流中捕获内容并解码标头。但是，如果您要插入代理响应，则直接捕获标头会更简单。)

# delphi - 如何在 Virtual TreeView 列标题中启用复选框？

> ID：12728022
> 
> 赞同：4
> 
> 时间：2012-10-04T13:09:46.837
> 
> 标签：delphi, virtualtreeview

我在 Delphi XE2 中使用 Virtual TreeView V5.0.1（2012 年 9 月 6 日）。在标题列属性上设置`CheckBox := True`不会启用复选框，所以这里有一个问题，如何在列标题上启用复选框？

![在此处输入图像描述](../Images/4390c41d057c54d7ca9385d803214955.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T13:09:46.837

这个看似简单的问题的答案带来了十几个谷歌结果，这些结果试图破解标题绘图`OwnerDraw`并手动绘制复选框。

我要分享的解决方案在哪里很简单，在IDE中启用以下两项：include `hoShowImages`into `VirtualTree.Header.Options`set 和`toCheckSupport`into `VirtualTree.TreeOptions.MiscOptions`set。

然后您可以启用`Header.Column[0].CheckBox`属性并查看所需的结果。

# rest - 为什么 REST Web 服务叫 REST

> ID：12728026
> 
> 赞同：11
> 
> 时间：2012-10-04T13:10:01.223
> 
> 标签：rest

“Representational state transfer”是什么意思，当前的 REST Web 服务是这样调用的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T13:14:45.437

对 REST 最好的解释之一是[How to GET A Cup of Coffee](http://www.infoq.com/articles/webber-rest-workflow)。

**编辑：**它被称为 REST，因为客户端启动客户端状态表示的传输。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:17:38.047

[http://en.wikipedia.org/wiki/Representational_state_transfer](http://en.wikipedia.org/wiki/Representational_state_transfer)说

> REpresentational State Transfer (REST) 是一种用于分布式系统（如万维网）的软件架构风格。REST 已经成为一种主要的 Web 服务设计模型。

* * *

RESTful Web 服务（也称为 RESTful Web API）是**使用 HTTP 和 REST 原则**实现的 Web 服务。它是资源的集合，具有四个定义的方面：

1.  Web 服务的基本 URI，例如[http://example.com/resources/](http://example.com/resources/)
2.  Web 服务支持的数据的 Internet 媒体类型。这通常是 XML，但可以是任何其他有效的 Internet 媒体类型，只要它是有效的超文本标准。
3.  Web 服务使用 HTTP 方法（例如，GET、PUT、POST 或 DELETE）支持的一组操作。
4.  API 必须是超文本驱动的。

# selenium - 无法使用 Selenium 定位动态输入元素

> ID：12728027
> 
> 赞同：2
> 
> 时间：2012-10-04T13:10:01.873
> 
> 标签：selenium, webdriver, selenium-webdriver, xpath

我的应用程序中有一个`textfield`，当我点击它时它会被启用。我可以使用 *CSS*进行点击，但是当它突出显示时我无法输入文本。

我尝试使用**xpath**动态识别，但 webdriver 抛出错误

> "无法定位元素：{"method":"xpath","selector":"//input[@class='x-form-field x-form-text']"}![在此处输入图像描述][ 1]

单击屏幕截图中的字段后，显示了 n 之前的差异。

请帮助如何动态识别和输入该字段中的文本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:57:22.483

尝试以下操作：

```
 String cssSelector = "[class='x-form-field x-form-text']"
//but verify found css selector in firepath, firebug addon in ffox to make sure selenium //locate web element for input properly.
 driver.findElement(By.cssSelector(cssSelector)).clear();
 driver.findElement(By.cssSelector(cssSelector)).sendKeys("blablabla"); 
```

希望这对你有用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-07T10:36:16.743

试试这个代码：

```
String cssSelector = ".x-form-field x-form-text"
driver.findElement(By.cssSelector(cssSelector)).clear();
driver.findElement(By.cssSelector(cssSelector)).sendKeys("blablabla"); 
```

让我知道上面的脚本是否有效。

# prolog - 简单的 Prolog 阶乘程序加载

> ID：12728029
> 
> 赞同：1
> 
> 时间：2012-10-04T13:10:08.007
> 
> 标签：prolog, factorial

我正在使用 SWI-Prolog 学习 Prolog。这是我在文件中的练习代码`fact.pl`：

```
factorial(N,F) :- N is 0, F is 1;
              N > 0, M is N - 1, factorial(M,G), F is N*G. 
```

当我尝试使用 加载此文件时`[fact.pl]`，解释器给了我以下错误：

```
?- [fact.pl].
ERROR: Syntax error: Operator expected
ERROR: [fact
ERROR: ** here **
ERROR: .pl] . 
```

我不确定这是怎么发生的，我很确定我所做的是标准程序加载命令。

有谁见过这个，请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:23:48.403

要么`?- [fact].`或`?- ['fact.pl'].`应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-05T19:18:51.137

> 使用 `consult(fact)`或`consult('fact.pl')`

下面是另一个简单的程序

```
factorial(0,1). 

factorial(N,F) :-  
   N>0, 
   N1 is N-1, 
   factorial(N1,F1), 
   F is N * F1. 
```

`the factorial of 0 is 1`

`the factorial of N is F if N>0 and N1 is N-1 and the factorial of N1 is F1 and F is N*F1`

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-17T10:46:39.127

当我编译你的程序时，它给了我以下答案。

阶乘（5，F）。F = 120 ; 错误的。

这意味着您的程序可以正常工作。

`factorial(N,F) :- N is 0, F is 1,**!**;N > 0, M is N - 1, factorial(M,G), F is N*G.`

包括剪切运算符（！）。然后您可以避免输出中的错误部分。

# windows-7 - Win7上的Win XP兼容硬件和软件

> ID：12728031
> 
> 赞同：-1
> 
> 时间：2012-10-04T13:10:08.387
> 
> 标签：windows-7, windows-xp, hardware, compatibility

有一个为 Win XP 开发和测试的定制软件，目前在 Win XP 系统上使用，有与该软件接口的仪器硬件。到目前为止，一切都按设计工作。

现在有一个计划将所有 Win XP 迁移到 Win 7。在可能无法在 Win 7 上运行该软件的情况下，我确定了以下选项

1.  在 Win 7 上以 XP 模式运行软件
2.  在 Win 7 上从 XP 虚拟机运行软件

我想知道

1.  如果还有其他选择需要考虑
2.  它将如何影响与仪器硬件的接口？
    一个。如果软件在 XP 模式下运行，仪器硬件是否仍然能够将数据发送到软件？
    湾。如果仪器硬件位于 Win 7 上的 Win XP 虚拟机中，仪器硬件是否仍能够将数据发送到软件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:04:13.547

该软件可能会或可能不会在 Windows 7 下运行。您应该尝试一下。

XP 模式（或其他 VM 解决方案）可以很好地保持旧用户应用程序的运行。基本上，您通过在 XP 下运行应用程序来“欺骗”升级路径。但是，由于您的应用程序与硬件设备连接，您可能会遇到麻烦。您的典型 VM 解决方案从软件中“隐藏”了底层主机 PC 硬件。

仪表硬件如何与主机 PC 连接？它是带有特殊驱动程序的 PCI/USB 设备吗？

一些 VM 解决方案允许 PCI 或 USB 直通，这将使您的设备即使在 VM 中也能继续工作。但是，这仍然不是 Windows 7 的升级。（您可能会在 VMware ESX 下运行 XP VM。）

那么升级到 Windows 7 并忘记 VM 怎么办？

如果您需要硬件设备的驱动程序，您的新系统是 Windows 7 x64，而您的旧系统是 Windows XP 32 位，那么您将遇到问题。 ***64 位版本的 Windows 需要 64 位驱动程序。***

如果您的 Win7 系统是 32 位，则 32 位 Windows XP 驱动程序***可能***工作。这取决于驱动程序是如何编写的。您很可能会遇到问题，但除非您尝试，否则您不会知道。

# actionscript-3 - AIR 按钮的键盘快捷键

> ID：12728042
> 
> 赞同：0
> 
> 时间：2012-10-04T13:10:45.170
> 
> 标签：actionscript-3, apache-flex, air

我使用 AIR 应用程序。在此应用程序中，显示了几个窗口。

我喜欢用 和 之类的快捷方式关闭`Esc`窗口`Enter`。

我尝试这样做：

```
// On creation complete
this.addEventListener(KeyboardEvent.KEY_DOWN, exit_keyDownHandler);

// exit function
protected function exit_keyDownHandler(event:KeyboardEvent):void{
 if  ((event.keyCode == Keyboard.ENTER)
    ||(event.keyCode == Keyboard.NUMPAD_ENTER)
    ||(event.keyCode == Keyboard.ESCAPE)){
       stage.nativeWindow.close();
    }
} 
```

但是如果窗口上存在文本区域，就会出现问题。因为当用户按下 `Enter`键文本区域窗口关闭。怎么能避免呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:37:43.700

对我来说，使用除转义键以外的单个键关闭似乎不是一个好主意，尤其是不使用回车键。

但是，如果您坚持这样做，那么您可以尝试检查当前焦点对象以确保它不是接受输入键的输入元素/组件。

请参阅[FocusManager.getFocus(](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/mx/managers/FocusManager.html#getFocus%28%29) ) 和[Stage.focus](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/Stage.html#focus)。例如，一个非常严格的检查可能如下所示：

```
if(focusManager.getFocus() is IFocusManagerComponent ||
   stage.focus is InteractiveObject || stage.focus is IFocusManagerComponent)
{

} 
```

# c++ - 构造函数在静态 std::map 上调用了两次

> ID：12728051
> 
> 赞同：3
> 
> 时间：2012-10-04T13:11:10.063
> 
> 标签：c++, static, constructor, ogre3d

我确信我做错了什么来实现这一点。我正在使用一个库，它以一种似乎有意义的方式静态声明地图。

在标题中，在一个名为 Codec 的类中：

```
 typedef map< String, Codec* >::type CodecList; 
    static CodecList msMapCodecs; 
```

在 cpp 文件中：

```
 map< String, Codec * >::type Codec::msMapCodecs; 
```

当我在 cpp 文件的行上放置一个断点时，我看到它在一个名为“__static_initialization_and_destruction_0”的堆栈帧中调用它，如果我进入它，我可以看到它在达到 main 之前调用了这个映射的构造函数。在 main 启动之后，我通过库 API 的函数调用插入了一些条目，然后我注意到构造函数被第二次调用，其方式与第一次类似。

是什么导致了这种情况，或者是什么和我的误解可能让我感到困惑以至于认为这正在发生？我已经搜索过，但没有看到对构造函数的显式调用。我无法在最小的测试用例中复制它。我知道提供一个准确的答案是不可能的，但是任何能给我指明好的方向的东西都将不胜感激。

如果重要的话，我在 Ubuntu 12.04 上使用 gcc 4.6.3。x64

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T21:05:44.830

这是可见性/符号版本问题。有多种方法可以纠正这一点。由于这仅存在于此操作系统上的此编译器中，因此我决定稍微更改头文件并自己维护更改。如果他们想要合并此更改，我将让图书馆的创建者知道。

有关符号可见性的更多详细信息，请访问：http: [//gcc.gnu.org/wiki/Visibility](http://gcc.gnu.org/wiki/Visibility)

以下是我对代码所做的更改：

```
#if __GNUC__ >= 4
    // This block will be included only will the compiler
    #define DLL_LOCAL  __attribute__ ((visibility ("hidden")))
#else
    #define DLL_LOCAL
#endif

// <- Some details omitted here

typedef map< String, Codec* >::type CodecList; 
DLL_LOCAL static CodecList msMapCodecs; 
```

# java - 如何比较从csv文件读取并保存在字符串数组中的两个字符串

> ID：12728054
> 
> 赞同：0
> 
> 时间：2012-10-04T13:11:23.687
> 
> 标签：java, string, csv, compare

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我从 csv 文件中读取一些记录并将它们存储到字符串类型数组中，然后在转换后将每个字段保存在适当的变量中。在部分代码中，我必须将数组中的字段与其中一个字符串类型的变量进行比较。这两个数组都是从 csv 文件填充的。

```
 int count=0;
            String name=resourceArray[i][j+1] ;
            while(machineArray[count][0]==name)
            {

                machineID=Integer.parseInt(machineArray[count][1]);
                machinePe=Integer.parseInt(machineArray[count][2]);
                count++;
             } 
```

问题是'while'条件永远不会成为真的。我调试它，我确定 machineArray[0][0] 和 'name' 具有相同的值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:15:08.050

本质上，您通过使用 == 而不是比较字符串来比较指向两个字符串对象的指针。

要比较字符串，您必须使用字符串 equals 方法：

```
machineArray[count][0].equals(name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:13:29.880

尝试将您的条件从 更改`machineArray[count][0]==name`为`machineArray[count][0].equals(name)`。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-04T13:13:27.587

字符串并不总是具有相同的标识（尽管它很常见）。尝试：

```
machineArray[count][0].equals(name) 
```

# ios - 启动应用程序时加载所有 UIViewController

> ID：12728058
> 
> 赞同：0
> 
> 时间：2012-10-04T13:11:30.623
> 
> 标签：ios, uiviewcontroller, load, storyboard, tabbarcontroller

我有一个带有标签栏控制器和很多 UIViewController 的应用程序，我在情节提要上定义了界面，我希望当用户午餐应用程序时（加载应用程序时）加载所有 ControllerView，而不是当用户选择选项卡时（我的 UIViewController 很复杂，加载时间很短）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:50:43.243

您发布的答案不正确；您不应该`-loadView`手动调用。从[文档](https://developer.apple.com/library/ios/documentation/uikit/reference/UIViewController_Class/Reference/Reference.html#//apple_ref/occ/instm/UIViewController/loadView)中：

> **讨论**
> 
> 你不应该直接调用这个方法。视图控制器在其视图属性被请求但当前为 nil 时调用此方法。此方法加载或创建视图并将其分配给视图属性。

因此，您应该改为简单地访问该`view`属性。您修改后的代码将是：

```
UITabBarController *tabBar = (UITabBarController *)self.window.rootViewController;
for(int i = 0; i < 5; i++) {
    [[tabBar.tabBarController.viewControllers objectAtIndex:i] view];
} 
```

另请注意，这项工作可能不应该在您的`-application:didFinishLaunchingWithOptions:`方法中进行，因为如果此方法在 5 秒内没有返回，iOS 将终止您的应用程序。您可以在下一次 runloop 迭代中安排此任务，如下所示：

```
[[NSOperationQueue mainQueue] addOperationWithBlock:^{
    [self preloadTabs];
}]; 
```

# jira - 已关闭的问题在 JIRA 中未标记为已关闭

> ID：12728060
> 
> 赞同：0
> 
> 时间：2012-10-04T13:11:34.650
> 
> 标签：jira, transitions

吉拉版本：**3.13.5**

我在 JIRA 的仪表板上有一个部分，显示分配给我的所有未解决的问题。但在这个列表中也有一些已经关闭的问题。

所以我看了一下**工作流程**。
我只是得到 1 次近距离过渡。我在“发布功能”下添加以下内容：

```
Set issue status to the linked status of the destination workflow step.
— THEN
Add a comment to an issue if one is entered during a transition.
— THEN
Update change history for an issue and store the issue in the database.
— THEN
Re-index an issue to keep indexes in sync with the database.
— THEN
Fire a Issue Closed event that can be processed by the listeners. 
```

但它不起作用！所有已关闭的问题都不会标记为已关闭！

有谁知道我在哪里可以找到这个设置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T07:22:35.463

仪表板上的“分配给我”应用程序不显示**分配给您和 Open 的**问题。它显示**分配给您的问题，其状态为 Unresolved**。

我怀疑您的后期功能不会这样做。我目前对 JIRA 5.03 和 Greenhopper 自动生成的工作流有同样的问题。我还向 Atlassian Support 提出了问题。检查您的解决状态，如果未解决，您已经找到了问题。

# playframework - 播放框架 - 找不到驱动程序：[com.mysql.jdbc.Driver] - intelli J

> ID：12728063
> 
> 赞同：4
> 
> 时间：2012-10-04T13:11:42.927
> 
> 标签：playframework, intellij-idea, playframework-2.0

> **可能重复：**
> [将 MySQL 数据库与 Play 框架 2.0 一起使用所需的步骤](https://stackoverflow.com/questions/10007029/steps-needed-to-use-mysql-database-with-play-framework-2-0)

我正在尝试在 IntelliJ 中运行 Play 2.0 框架应用程序，但它给出了一个错误：找不到驱动程序：[com.mysql.jdbc.Driver]。但它在 Eclipse 中运行良好。

我多次查看 conf 文件，但找不到任何错误。

```
 db.default.driver=com.mysql.jdbc.Driver
      db.default.url="jdbc:mysql://localhost/resource_planning"
      db.default.user=root
      db.default.pass=password 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T13:23:10.517

在这里，您有配置 MySQL DB 的完整配方：

*   [在 Play framework 2.0 中使用 MySQL 数据库所需的步骤](https://stackoverflow.com/questions/10007029/steps-needed-to-use-mysql-database-with-play-framework-2-0/10007515#10007515)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-04T13:17:52.517

刚刚我得到了答案！！

忘记`"mysql" % "mysql-connector-java" % "5.1.18"`在`Build.scala`文件中包含依赖项

# algorithm - 将对象分布在一个圆圈内

> ID：12728065
> 
> 赞同：3
> 
> 时间：2012-10-04T13:11:48.543
> 
> 标签：algorithm, 2d, shapes

> **可能重复：**
> [如何将正方形打包成圆形？](https://stackoverflow.com/questions/9537333/how-to-pack-squares-into-circles)

我有一个问题，我需要在一个圆圈内放置一堆不同大小的矩形。所有矩形都必须适合圆圈，不能相互重叠，也不能溢出圆圈。

假设矩形可以放在圆圈内，如何开发一种算法将它们分布在圆圈内？

我能想到的就是一遍又一遍地随机分布矩形并测试是否满足条件（蛮力）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T13:20:36.073

这是一个经典的约束问题，蛮力是解决问题的一种方法，但还有其他方法可以更好地使用启发式算法等方法来帮助引导算法找到解决方案。您将不得不在 Google Scholar 之类的东西上查找一些约束规划和装箱论文，以获得更好的算法。

维基百科有一个很好的概述： [http ://en.wikipedia.org/wiki/Packing_problem](http://en.wikipedia.org/wiki/Packing_problem)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:05:02.820

正如其他人所提到的，最佳解决方案（例如最小面积或均匀分布）可能是 NP 难的。不过，根据您的需要，有一些很棒的算法可以将不同大小的矩形打包到其他矩形中。例如：[用于构建 CSS Sprites 的快速优化矩形打包算法](http://www.codeproject.com/Articles/210979/Fast-optimizing-rectangle-packing-algorithm-for-bu)：

> 本文介绍了一种快速算法，可将一系列不同宽度和高度的矩形打包成一个单独的封闭矩形，没有重叠，并且可以最大限度地减少封闭矩形中浪费的空间量。[...] 一步一步地展示了算法如何到达最佳封闭矩形。

请注意，在上述过程中，允许边界矩形变化（我也不相信解决方案是*最佳*封闭矩形）。您可以通过将圆分解为离散的矩形来近似圆。

虽然不是您正在寻找的完整解决方案，但我认为这可能是一个很好的第一步。

# installation - InnoSetup：用于在文件/文件夹存在时取消设置的 Pascal 脚本

> ID：12728069
> 
> 赞同：0
> 
> 时间：2012-10-04T13:12:12.693
> 
> 标签：installation, inno-setup

在我的 InnoSetup 中，我在 InstallRun 部分使用了几个文件操作。如果这些都正确执行而没有问题，那么应该删除某个临时文件夹。

如果出现问题，则临时文件夹仍然存在。在这种情况下，我希望使用显示我选择的错误消息的消息框取消设置。

由于我（还）没有使用 Pascal 脚本的经验，我恳请您为我提供一个示例脚本，您可以这样做。

提前致谢！

补充：我现在将解释我需要这个的原因。该方案正在更新现有版本，即 Windows 服务应用程序。在更新这些文件之前，我必须先卸载服务。为此，我使用安装包中的我自己的命令行。其他新文件将临时解压缩到临时文件夹（应用文件夹的子文件夹）。卸载 Windows 服务后，新文件将从 temp 文件夹移动到 app 文件夹。如果这里出现问题，我想取消设置并向用户显示错误消息。通过检查临时文件夹是否仍然存在，我可以最好地判断是否出现问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T22:26:03.797

假设您指的是该`[Run]`部分，则无法在该过程后期取消安装。

相反，您应该考虑使用`PrepareToInstall`. 在这种情况下，您需要做的就是停止和取消注册旧服务，可以直接通过 API 或根据您的选择在旧服务 EXE 上调用命令。（对于新安装，不要忘记处理该服务尚不存在的情况。）

之后`[Files]`将正常替换文件，然后您可以`[Run]`或使用代码（通过`AfterInstall`或`CurStepChanged(ssPostInstall)`，取决于您希望它发生的时间）重新注册并启动服务。

无需使用临时文件夹 - 这很好，因为这也会导致卸载问题。

# c# - 在动态 texbox 中使用会话

> ID：12728071
> 
> 赞同：0
> 
> 时间：2012-10-04T13:12:19.803
> 
> 标签：c#, asp.net, dynamic, textbox, session-variables

好的，所以我需要将文本框中的每个输入保存在会话变量中。问题是这是动态的，这意味着 texbox ID 是 NatureTextbox_1、NatureTexbox_2 等。由于可用的 texbox 数量无限，因此很难保存每个会话变量。我一直把头撞在墙上，试图弄清楚这一点，我想成为一个菜鸟，向你们征求意见。如果您能给我任何有关该做什么的信息，我将不胜感激。

这是 C# 代码（记住文本框是动态的，意味着无限）：

```
protected void Page_Load(object sender, EventArgs e)
{
    // Add any controls that have been previously added dynamically

    for (int i = 0; i < TotalNumberAdded; ++i)
    {
        AddControls(i + 1);
    }

}
private void AddControls(int controlNumber)
{

    var newPanel = new Panel();
    var natureLabel = new Label();
    var dateLabel = new Label();
    var fatalLabel = new Label();
    var injurLabel = new Label();
    var natureTextbox = new TextBox();
    var dateTextbox = new TextBox();
    var fatalTextbox = new TextBox();
    var injurTextbox = new TextBox();

    //Validations 

    var dateRegex = new RegularExpressionValidator();

    //*****CURRENT IDEA THAT ISNT WORKING***********************************
    Session["Nature" + (TotalNumberAdded - 1)] = natureTextbox.Text.ToString(); 
    Session["Date" + (TotalNumberAdded - 1)] = dateTextbox.Text.ToString();
    Session["Fatal" + (TotalNumberAdded - 1)] = fatalTextbox.Text.ToString();
    Session["injury" + (controlNumber - 1)] = injurTextbox.Text.ToString();
    //**********************************************************************

    // textbox needs a unique id to maintain state information
    natureTextbox.ID = "NatureTextBox_" + controlNumber;
    dateTextbox.ID = "DateTextbox_" + controlNumber;
    fatalTextbox.ID = "fatalTextbox_" + controlNumber;
    injurTextbox.ID = "injurTextbox_" + controlNumber;

    natureLabel.Text = "Nature Of Accident: ";
    dateLabel.Text = "Date: ";
    fatalLabel.Text = "Fatalities: ";
    injurLabel.Text = "Injuries: ";

    dateRegex.ID = "DateRegex_" + controlNumber;
    dateRegex.Text = "Please enter in format MM/DD/YYY";
    dateRegex.ValidationExpression = @"^(((0?[1-9]|1[012])/(0?[1-9]|1\d|2[0-8])|(0?[13456789]|1[012])/(29|30)|(0?[13578]|1[02])/31)/(19|[2-9]\d)\d{2}|0?2/29/((19|[2-9]\d)(0[48]|[2468][048]|[13579][26])|(([2468][048]|[3579][26])00)))$";
    dateRegex.ControlToValidate = dateTextbox.ID;

    // add the label and textbox to the panel, then add the panel to the form
    newPanel.Controls.Add(new LiteralControl("<table><tr>"));
    newPanel.Controls.Add(new LiteralControl("<br />"));
    newPanel.Controls.Add(new LiteralControl("<td class='title-text'  >"));
    newPanel.Controls.Add(natureLabel);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'width='180px'>"));
    newPanel.Controls.Add(natureTextbox);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text' >"));
    newPanel.Controls.Add(dateLabel);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
    newPanel.Controls.Add(dateTextbox);
    newPanel.Controls.Add(new LiteralControl("<br />"));
    newPanel.Controls.Add(dateRegex);
    newPanel.Controls.Add(new LiteralControl("</td></tr>"));

    newPanel.Controls.Add(new LiteralControl("<tr><td class='title-text'>"));
    newPanel.Controls.Add(fatalLabel);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
    newPanel.Controls.Add(fatalTextbox);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
    newPanel.Controls.Add(injurLabel);
    newPanel.Controls.Add(new LiteralControl("</td><td class='title-text'>"));
    newPanel.Controls.Add(injurTextbox);
    newPanel.Controls.Add(new LiteralControl("</td></tr></table><br /><hr />"));
    AccidentPlaceHolder.Controls.Add(newPanel);

}
protected int TotalNumberAdded
{
    get { return (int)(ViewState["TotalNumberAdded"] ?? 0); }
    set { ViewState["TotalNumberAdded"] = value; }

}

protected void AccidentButton_Click(object sender, EventArgs e)
{
    TotalNumberAdded++;
    AddControls(TotalNumberAdded);

}
protected void PrevPage_Click(object sender, EventArgs e)
{

    Response.Redirect("employment_driversapplication_personalinfo.aspx");

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:33:46.150

这对我有用，请记住，这些值仅在您单击“添加”时才会保留 - 所以我建议在不添加新项目时使用另一个保存按钮或其他东西来保留这些值。

```
public partial class TestRJF2 : System.Web.UI.Page
{
    private IList<TextBox> AddedControls = new List<TextBox>();
    protected override void CreateChildControls()
    {
        BuildControls();
        base.CreateChildControls();
    }

    private void BuildControls()
    {
        for (var x = 0; x < TotalNumberAdded; x++)
        {
            var id = String.Format("NatureTextBox{0}", x);
            //Check if control was already added 
            //only create controls that are new for this postback
            if (AccidentPlaceHolder.FindControl(id) == null)
            {
                var textBox = new TextBox() {ID = id};
                AccidentPlaceHolder.Controls.Add(textBox);
                AddedControls.Add(textBox);
            }
        }
    }

    protected override void OnPreRender(EventArgs e)
    {
        foreach (var ctrl in AddedControls)
        {
            var key = ctrl.ID.Replace("TextBox", String.Empty);
            Session[key] = ctrl.Text;
        }

        foreach (string session in Session.Keys)
        {
            System.Diagnostics.Debug.WriteLine(String.Format("{0} = {1}", session, Session[session]));
        }
        base.OnPreRender(e);
    }

    protected void AccidentButton_Click(object sender, EventArgs e)
    {
        TotalNumberAdded++;
        BuildControls();
    } 
    protected int TotalNumberAdded
    {
        get { return (int)(ViewState["TotalNumberAdded"] ?? 0); }
        set { ViewState["TotalNumberAdded"] = value; }
    } 
} 
```

# php - 附近地点

> ID：12728077
> 
> 赞同：0
> 
> 时间：2012-10-04T13:12:41.157
> 
> 标签：php, symfony, geolocation

我的数据库有一个坐标列表，我需要为移动应用程序构建一个 API，这是应用程序向我发送当前纬度/经度的一种方法，我必须根据我的数据库检索附近的位置。

问题是，我该怎么做？我只找到 MySQL 的方法，但它对性能有好处。

我将 PHP 与 Symfony2 框架一起使用。

编辑：

我正在使用 MySQL，但我将拥有数千条记录，并且我进行了一些非常慢的性能测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:31:27.653

改用 PostgreSQL 是否可行？

我只提到它是因为它具有您正在寻找的功能，因此对于这个用例来说可能会更有效率。请参阅：[Doctrine2](https://github.com/KnpLabs/DoctrineBehaviors#geocodable)（或[Propel 等效](https://github.com/willdurand/GeocodableBehavior)项）的地理编码行为

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T17:13:26.160

如果这是一个选项，您可以使用 Solr 和地理空间搜索。查看[http://wiki.apache.org/solr/SpatialSearch](http://wiki.apache.org/solr/SpatialSearch)

设置 solr 和索引位置数据库似乎有点开销，但是使用 solr 而不是 mysql 进行搜索操作的性能提升是巨大的。

# php - SocialEngine 使用预定义的文本为用户撰写消息

> ID：12728078
> 
> 赞同：0
> 
> 时间：2012-10-04T13:12:50.007
> 
> 标签：php, zend-framework, socialengine

我在主题的个人资料（正在查看的用户）上有一个按钮，当您单击该按钮时，它应该向该用户发送带有预定义消息的消息，例如：“嘿，我认为你的星座是金牛座”。

SE4中是否有可能发生类似的事情？我看到 URL 是这样组成的： `http://website.com/index.php/messages/compose/to/4`

最后是`4`主题的ID。如何向此添加自定义消息？或者即使可能，一个自定义主题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-31T06:20:15.020

你可以试试，[http:](http://website.com/index.php/messages/compose/multi/) //website.com/index.php/messages/compose/multi/ {your-subject}/to/4..BUt 这个对话将被锁定对话......

# java - 从 Java/Android url 获取参数名称集合

> ID：12728084
> 
> 赞同：6
> 
> 时间：2012-10-04T13:13:05.733
> 
> 标签：java, android, url, parameters, uri

这绝对是奇怪的，但我找不到任何兼容返回完整参数列表的 Java/Android URL 解析器。

我找到了 java.net.URL 和 android.net.Uri 但它们无法返回参数集合。

我想传递 url 字符串，例如

```
String url = "http://s3.amazonaws.com/?AWSAccessKeyId=123&Policy=456&Signature=789&key=asdasd&Content-Type=text/plain&acl=public-read&success_action_status=201";

SomeBestUrlParser parser = new SomeBestUrlParser(url);
String[] parameters = parser.getParameterNames();
// should prints array with following elements
// AWSAccessKeyId, Policy, Signature, key, Content-Type, acl, success_action_status 
```

有谁知道现成的解决方案？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-05T11:29:29.177

有办法收集所有参数名称。

```
String url = "http://domain.com/page?parameter1=value1&parameter2=value2";
List<NameValuePair> parameters = URLEncodedUtils.parse(new URI(url));
for (NameValuePair p : parameters) {
    System.out.println(p.getName());
    System.out.println(p.getValue());
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-30T16:35:33.980

此静态方法从给定 URL 构建参数映射

> ```
> private Map<String, String> extractParamsFromURL(final String url) throws URISyntaxException {
>     return new HashMap<String, String>() {{
>         for(NameValuePair p : URLEncodedUtils.parse(new URI(url), "UTF-8")) 
>             put(p.getName(), p.getValue());
>     }};
> } 
> ```

用法

> extractParamsFromURL(url).get("key")

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T13:17:18.070

看看[URLEncodedUtils](http://hc.apache.org/httpcomponents-client-ga/httpclient/apidocs/org/apache/http/client/utils/URLEncodedUtils.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-09T20:41:36.043

在 API 级别 1 中添加的 UrlQuerySanitizer

```
 UrlQuerySanitizer sanitizer = new UrlQuerySanitizer(url_string);
        List<UrlQuerySanitizer.ParameterValuePair> list =  sanitizer.getParameterList();
        for (UrlQuerySanitizer.ParameterValuePair pair : list) {
            System.out.println(pair.mParameter);
            System.out.println(pair.mValue);
        } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-12T20:20:34.713

[urllib](https://github.com/EricEdens/urllib)库将解析查询字符串参数，并允许您以列表或映射的形式访问参数。如果可能有重复的键，请使用列表，否则地图非常方便。

鉴于此片段：

```
String raw = "http://s3.amazonaws.com/?AWSAccessKeyId=123&Policy=456&Signature=789&key=asdasd&Content-Type=text/plain&acl=public-read&success_action_status=201";
Url url = Url.parse(raw);
System.out.println(url.query().asMap());
for (KeyValue param : url.query().params()) {
  System.out.println(param.key() + "=" + param.value());
} 
```

输出是：

```
{Policy=456, success_action_status=201, Signature=789, AWSAccessKeyId=123, acl=public-read, key=asdasd, Content-Type=text/plain}
AWSAccessKeyId=123
Policy=456
Signature=789
key=asdasd
Content-Type=text/plain
acl=public-read
success_action_status=201 
```

# javascript - 从jQuery中的数量输入框计算价格

> ID：12728092
> 
> 赞同：2
> 
> 时间：2012-10-04T13:13:44.827
> 
> 标签：javascript, jquery, html, input

我在 jQuery 中从 Quantity 计算价格时遇到了一个小问题。这些是我的输入框。

```
Quantity: <input type="text" style="width: 50px;" name="quantity" id="quantity" class="txt" value="1" />

Price: <input type="text" style="width: 50px;" name="item_price" id="item_price" class="txt" value="2990" />

Total Price: <input type="text" style="width: 50px;" name="total_price" id="total_price" class="txt" value="" /> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T13:16:14.967

我假设您想要公式或如何获取输入元素的值：

```
var quantity = $("#quantity").val();
var iPrice = $("#item_price").val();

var total = quantity * iPrice;

$("#total_price").val(total); // sets the total price input to the quantity * price

alert(total); 
```

**编辑 Keyup**：

```
$('#quantity').keyup(function() {
   var quantity = $("#quantity").val();
   var iPrice = $("#item_price").val();

   var total = quantity * iPrice;

   $("#total_price").val(total); // sets the total price input to the quantity * price
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T13:18:18.690

> ***更新***以在脚本标签中显示完整示例

如果您想要公式以及如何“看到”更改：

```
<script type="text/javascript">
    $(function() {  //  In jQuery 1.6+ this is same as $(document).ready(function(){})
        $('#quantity, #item_price')  //  jQuery CSS selector grabs elements with the ID's "quantity" & "item_price"
            .on('change', function(e) {  //  jQuery 1.6+ replcement for .live (dynamically asigns event, see jQuery API)
            //  in this case, our event is "change" which works on inputs and selects to let us know when a value is changed
                //  below i use inline if statements to assure the values i get are "Real"
                var quan = $("#quantity").val() != "" ? parseFloat($("#quantity").val()) : 1,  //  Get quantity value
                    pric = $("#item_price").val() != "" ? parseFloat($("#item_price").val()) : 0;  //  Get price value
                $('#total_price').val(pric*quan); // show total
            });
    });
</script> 
```

*   [jQuery API](http://api.jquery.com/)
*   [jQuery API .ready()](http://api.jquery.com/ready/)
*   [jQuery API 选择器](http://api.jquery.com/change/)
*   [jQuery API .on()](http://api.jquery.com/on/)
*   [jQuery API .live()](http://api.jquery.com/live/)
*   [jQuery API .change()](http://api.jquery.com/change/)
*   [jQuery API .val()](http://api.jquery.com/val/)
*   [内联如果](https://stackoverflow.com/questions/10270351/how-to-write-a-inline-if-statement-in-javascript)

# c++ - 从 C++ 应用程序在 Excel 中绘制图形

> ID：12728097
> 
> 赞同：1
> 
> 时间：2012-10-04T13:14:03.473
> 
> 标签：c++, visual-studio-2010, excel

我的 C++ 应用程序生成一个包含 10000 个浮点数的 .csv 文件。现在的要求是在同一个文件中应该有一个图表来描述这些浮点数。

我知道 csv 文件不能有图表。所以我必须切换到Excel

假设我可以将数据写入 excel 表中的列，有人可以告诉我是否可以在我的 C++ 程序中调用任何函数来在 excel 表中绘制数据？

我已经看到了一些基于 Python 的解决方案，但我正在探索它是否可能仅来自 C++。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T00:39:08.793

www.google.com/search?q=C%2B%2B+Excel+OLE

MSDN 文档通常也很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T04:38:42.177

CSV 是一种图形格式。它代表逗号分隔值。您可以将此文件加载到 Excel 中。它还将导入到 SQL，MYSQL 使用（PHPMyadmin 用于此）。SQL 代表结构化查询语言。MYSQL 是基于网络的。
向您致以最良好的祝愿。 [http://www.whatisacnc.com](http://www.whatisacnc.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T12:57:13.070

试试这个库[SimpleXlsxWriter](http://sourceforge.net/projects/simplexlsx/)。可以在 Excel 书中的单独表格上绘制基本图形。在项目的wiki页面上也有一些使用示例

该库不提供外部依赖项

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-10T13:15:20.397

这可能有用，尤其是最后一章：

[www.maths.manchester.ac.uk/~ahazel/EXCEL_C++.pdf](http://www.maths.manchester.ac.uk/~ahazel/EXCEL_C++.pdf)

# python - 减去，除非为负然后返回 0

> ID：12728099
> 
> 赞同：27
> 
> 时间：2012-10-04T13:14:17.760
> 
> 标签：python, math

我会先说，这只是为了满足我的好奇心，而不是在编码项目上需要帮助。但我想知道是否有人知道一个函数（特别是在 python 中，但我会接受一个有效的数学概念）类似于绝对值，如果给定一个数字，如果为负数将返回 0，如果为正数，则返回该数字。

伪代码：

```
def myFunc(x):
    if x > 0:
        return x
    else:
        return 0 
```

同样，不是出于复杂性而提出问题，只是出于好奇。我现在需要它几次，想知道我是否真的需要编写自己的函数，或者是否已经存在。如果没有执行此操作的函数，是否有一种方法可以使用不会计算两次的表达式将其写在一行中。

IE

```
myVar = x-y if x-y>0 else 0 
```

如果 xy 没有被评估两次，我会接受这样的解决方案。因此，如果有人有任何解决方案，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-10-04T13:17:50.787

单程...

```
>>> max(0, x) 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-04T13:17:41.883

这应该这样做：

```
max(x-y, 0) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T13:33:28.663

听起来像一个分析类型的问题。numpy 可以来救援！

如果您将数据放在数组中：

```
x = np.arange(-5,11)
print x
[-5 -4 -3 -2 -1  0  1  2  3  4  5  6  7  8  9 10]

# Now do your subtraction and replacement.  
x[(x-y)>0] -= y
x[(x-y)<0]  = 0 
```

如果我正确理解你的问题，你想用零替换 xy<0 的 x 中的值，否则用 xy 替换。

注意，上面的解决方案适用于从数组中减去一个整数，或者对两个相等维度的数组进行操作。但是，在处理两个长度相等的列表时，Daniel 的解决方案更加优雅。这完全取决于您的需求（以及您是否想冒险进入 numpy 的世界）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-21T14:11:55.080

另一种表达方式是

```
x -= min(x, y) 
```

# git - Git 更新陈旧的本地仓库

> ID：12728101
> 
> 赞同：3
> 
> 时间：2012-10-04T13:14:20.883
> 
> 标签：git

我尝试寻找一种优雅的方式（即不涉及删除本地目录并再次克隆）来使用 git 从远程仓库更新严重陈旧的本地仓库，但没有找到好的答案。我正在寻找的命令基本上可以解决任何冲突，方法是使用远程仓库所说的任何内容并在需要时删除本地文件（以防它们不再存在于远程仓库中）并忽略我可能做出的任何和所有更改跟踪的文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:26:16.523

你可以：

*   删除所有本地分支（参见“[删除所有本地 git 分支](https://stackoverflow.com/questions/10610327/delete-all-local-git-branches)”）
*   重新创建本地分支，跟踪远程仓库的远程分支：请参阅“[将所有远程 git 分支跟踪为本地分支](https://stackoverflow.com/questions/379081/track-all-remote-git-branches-as-local-branches/6300386#6300386)”
*   清理新分支不再引用的旧提交：“[如何删除不需要的 git 提交？](https://stackoverflow.com/questions/6975272/how-to-remove-unneeded-git-commits) ”

因此，您不必处理“合并冲突”：这是一种全局重置（如果您有任何想要保留的工作，请谨慎行事，您的问题似乎并非如此）。

[OP Syrahn](https://stackoverflow.com/users/268968/syrahn)采用了一种更简单的方法：

> 那时我只是`rm -Rf`目录并从头开始克隆。
> Git 确实需要一种`--theirs --all --force`东西。

请注意，有一些方法可以模拟“他们的”选项，即使“ [Git merge -s theirs: Simply?](https://stackoverflow.com/questions/2303124/git-merge-s-theirs-simply/2303198#2303198) ”解释了为什么它不是很明显：参见“ [git command for making a branch like another](https://stackoverflow.com/questions/4911794/git-command-for-making-one-branch-like-another/4912267#4912267) ”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-15T03:44:32.720

尝试使用以下命令：

```
git fetch
git reset --hard origin/master 
```

这将强制您的本地分支匹配远程分支，同时丢弃任何更改。但是请注意，您需要为每个分支执行第二步。

# javascript - jQuery 加载函数修改为包含相关脚本

> ID：12728107
> 
> 赞同：0
> 
> 时间：2012-10-04T13:14:39.490
> 
> 标签：javascript, jquery, ajax, load

我一直在玩加载、获取、ajax 和获取脚本功能。

最适合我打算在页面上加载内容的大多数功能是加载功能。这是从关联页面获取相关内容的一种简单而有效的方法。

但是由于它不包含脚本并且新内容不会响应页面准备就绪。我想知道是否有一个简单的增强功能可以让页面的脚本被刷新以包含加载的内容。

就像是

```
function loadall(url,container){
$(container).load(url);
scritps.reset();
} 
```

这样做的方法是什么。

# css - 有没有办法防止：悬停？

> ID：12728112
> 
> 赞同：1
> 
> 时间：2012-10-04T13:14:47.183
> 
> 标签：css, jquery-ui, jquery-mobile

jQuery mobile 和 jQuery UI 用它们自己的元素包装你的元素。有时这些包装元素有一个 :hover 规则。如果出于某种原因，您不希望悬停规则触发您可以做什么？

1.  一个反 :hover 类，它使元素在悬停期间保持您想要的方式
2.  在元素上方放置一个 div

问题是如果你应用主题，反类将会失败。您可以使用 getComputedStyles 和 Javascript 构建类，但由于某种原因，它似乎只保留了大约 90% 的所需样式。

顶部 div 的问题是：当鼠标触摸覆盖 div 的角落时， :hover 仍然会在底层 div 上触发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:18:57.297

为撤消任何 CSS 更改的元素创建一个更新的更具体的 :hover 选择器。您可以阅读特异性，但最快的方法通常是添加一个额外的祖先，但保留选择器的其余部分。

例如，如果当前选择器是类似的，`.jquery-ui-dialog .jquery-ui-button:hover {...}`那么在类似中添加父级`body .jquery-ui-dialog .jquery-ui-button:hover {...}`将提供更多的特异性，从而覆盖任何冲突的规则。

# zbar-sdk - 为什么我来自 ZBarCameraSimulator 的图像没有得到处理？

> ID：12728114
> 
> 赞同：1
> 
> 时间：2012-10-04T13:15:06.323
> 
> 标签：zbar-sdk

在模拟器中，我使用 ZBarCameraSimulator 加载带有 qrcode 的图片。

这从不调用委托方法

```
- (void) readerView:(ZBarReaderView*)view
     didReadSymbols:(ZBarSymbolSet*)syms
          fromImage:(UIImage*)image 
```

ZBarReader 在实际设备上运行良好 - 使用 ZBarCameraSimulator 有什么我忽略的吗？

# python - 使用 python 检查 pdf 限制

> ID：12728118
> 
> 赞同：1
> 
> 时间：2012-10-04T13:15:15.020
> 
> 标签：python, pdf, restriction

我正在使用 python 将 pdf 提供给 OCR 引擎。然而，其中一些可能有复制限制。访问和检查文档限制的最简单方法是什么（最好使用标准库，但那不是破坏者）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:44:48.600

您可以使用[pyPoppler](https://launchpad.net/poppler-python/)，这是开源 Poppler 库的 Python 接口。

```
import poppler
doc = poppler.document_new_from_file('file://some/file.pdf', None) # replace None with password if required
if doc.props.permissions & poppler.PERMISSIONS_OK_TO_PRINT:
     # print the file 
```

# sql-server - SQL Server 选择查询 - 条件联接

> ID：12728120
> 
> 赞同：0
> 
> 时间：2012-10-04T13:15:15.957
> 
> 标签：sql-server, select

我有这个查询，但我只想加入`PostageRules`，`PostageGroups`如果`p.delivery`值为 -1

澄清一下，我只想要一个交付值，如果`p.delivery`是 -1，那么我们需要从表中获取`po.delivery`值。`PostageRules`目前查询得到的`po.delivery`值不管`p.delivery`

这可以在单个查询中实现吗？

```
SELECT  
   p.id as prod_id, p.delivery as delivery, 
   po.delivery AS delivery 
FROM 
   products AS p 
LEFT JOIN 
   PostageRules AS po ON p.shopkeeper = po.shopkeeper
LEFT JOIN 
   PostageGroups  AS pg ON po.groupID = pg.id
        AND po.minQty <= 1
        AND po.maxQty >= 1
        AND po.minPrice <= p.Price
        AND po.maxPrice >= p.Price
        AND po.minWeight <= p.weight
        AND po.maxWeight >= p.weight                
WHERE 
    (p.id = '32323') 
ORDER BY 
    po.preference 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:20:35.517

```
SELECT  p.id as prod_id, ISNULL(po.delivery, p.delivery) AS delivery 
    FROM products AS p 
    LEFT JOIN PostageRules AS po ON p.shopkeeper = po.shopkeeper and p.delivery = -1
    LEFT JOIN PostageGroups  AS pg ON po.groupID = pg.id and p.delivery = -1
    AND po.minQty <= 1
    AND po.maxQty >= 1
    AND po.minPrice <= p.Price
    AND po.maxPrice >= p.Price
    AND po.minWeight <= p.weight
    AND po.maxWeight >= p.weight                
    WHERE (p.id = '32323') ORDER BY po.preference 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:18:55.140

试试这个：

```
SELECT  p.id as prod_id, p.delivery as delivery, CASE WHEN p.delivery=-1 then po.delivery else null end AS delivery 
        FROM products AS p 
        LEFT JOIN PostageRules AS po ON p.shopkeeper = po.shopkeeper
        LEFT JOIN PostageGroups  AS pg ON po.groupID = pg.id
        AND po.minQty <= 1
        AND po.maxQty >= 1
        AND po.minPrice <= p.Price
        AND po.maxPrice >= p.Price
        AND po.minWeight <= p.weight
        AND po.maxWeight >= p.weight                
        WHERE (p.id = '32323') ORDER BY po.preference 
```

# javascript - jqGrid 搜索延迟

> ID：12728121
> 
> 赞同：4
> 
> 时间：2012-10-04T13:15:18.540
> 
> 标签：javascript, jquery, jqgrid

我使用带有选项 searchOnEnter: false 的 jqGrid 过滤器工具栏。在我在字段中输入一些文本后，它会立即发送请求。在我的应用程序中，最好等待用户输入他想要的文本并在他停止输入时搜索它。那么，在 jqGrid 中是否可以在请求发送到服务器之前添加延迟？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:31:02.997

这是正确的问题，但 jqGrid 在应用自动搜索之前没有指定超时的选项。它始终为 500 毫秒。

如果您检查源代码，`filterToolbar`您会发现[以下几行](https://github.com/tonytomov/jqGrid/blob/v4.4.1/js/grid.custom.js#L446-463)使用了该`searchOnEnter`选项。

```
$("input",thd).keydown(function(e){
    var key = e.which;
    switch (key) {
        case 13:
            return false;
        case 9 :
        case 16:
        case 37:
        case 38:
        case 39:
        case 40:
        case 27:
            break;
        default :
            if(timeoutHnd) { clearTimeout(timeoutHnd); }
            timeoutHnd = setTimeout(function(){triggerToolbar();},500);
    }
}); 
```

因此，您可以将几乎相同的代码与默认`searchOnEnter: false`选项一起使用，并`triggerToolbar`在您需要的超时后手动实现调用。例如，以下代码片段在搜索工具栏中键入后 3 秒（3000 毫秒）超时后开始搜索：

```
var timeoutHnd, k = $.ui.keyCode,
    toSkip = [k.TAB, k.SHIFT, k.ALT, k.ESCAPE, k.LEFT, k.UP, k.RIGHT, k.DOWN, k.HOME, k.END, k.INSERT];
$grid.jqGrid("filterToolbar", {defaultSearch: "cn"});
$grid.closest(".ui-jqgrid-view")
    .find(".ui-jqgrid-hdiv .ui-search-toolbar input[type=text]")
    .keydown(function (e) {
        var key = e.which;
        if (key === k.ENTER) {
            return false;
        }
        if ($.inArray(key, toSkip) < 0) {
            if (timeoutHnd) {
                clearTimeout(timeoutHnd);
                timeoutHnd = 0;
            }
            timeoutHnd = setTimeout(function () {
                $grid[0].triggerToolbar();
                timeoutHnd = 0;
            }, 3000);
        }
    }); 
```

[这](http://www.ok-soft-gmbh.com/jqGrid/toolbarsearchwithtimeout.htm)是相应的演示：

![在此处输入图像描述](../Images/6e4216fdb91bde12cd440e04caf10aab.png)

**更新： jqGrid 的** [免费 jqGrid](https://github.com/free-jqgrid/jqGrid)分支支持`autosearchDelay`选项（默认值为 500），`filterToolbar`其中可以与`autosearch: true`（默认）和`searchOnEnter: false`. 因此，不需要上述技巧。一个可以使用

```
$grid.jqGrid("filterToolbar", {
    searchOnEnter: false,
    autosearchDelay: 3000 // 3 sec
}); 
```

# javascript - 正则表达式匹配单括号对但不匹配双括号对

> ID：12728128
> 
> 赞同：4
> 
> 时间：2012-10-04T13:15:37.887
> 
> 标签：javascript, regex

是否可以使正则表达式匹配单括号内的所有内容但忽略双括号，例如：

```
{foo} {bar} {{baz}} 
```

我想匹配 foo 和 bar 但不匹配 baz？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T13:19:05.203

要仅匹配`foo`并且`bar`不匹配周围的大括号，您可以使用

```
(?<=(?<!\{)\{)[^{}]*(?=\}(?!\})) 
```

如果您的语言支持后向断言。

**解释：**

```
(?<=      # Assert that the following can be matched before the current position
 (?<!\{)  #  (only if the preceding character isn't a {)
\{        #  a {
)         # End of lookbehind
[^{}]*    # Match any number of characters except braces
(?=       # Assert that it's possible to match...
 \}       #  a }
 (?!\})   #  (only if there is not another } that follows)
)         # End of lookahead 
```

**编辑：**在 JavaScript 中，你没有后视。在这种情况下，您需要使用以下内容：

```
var myregexp = /(?:^|[^{])\{([^{}]*)(?=\}(?!\}))/g;
var match = myregexp.exec(subject);
while (match != null) {
    for (var i = 0; i < match.length; i++) {
        // matched text: match[1]
    }
    match = myregexp.exec(subject);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T13:17:12.447

在许多语言中，您可以使用环视断言：

```
(?<!\{)\{([^}]+)\}(?!\}) 
```

解释：

*   `(?<!\{)`: 前一个字符不是`{`
*   `\{([^}]+)\}`：大括号内的东西，例如`{foo}`
*   `(?!\})`: 后面的字符不是`}`

# php - 如果作者是 Post 的作者，那么做些什么？

> ID：12728132
> 
> 赞同：0
> 
> 时间：2012-10-04T13:16:00.743
> 
> 标签：php, arrays, wordpress

我想编写一些简单的代码来确定用户是否是任何帖子的作者（如果他们的角色是作者则不是）

我的尝试如下，但我无法弄清楚

*   我得到了用户 ID（在全局标题中将其设置为当前）
*   我为自定义帖子类型和作者创建了一个查询
*   我从查询中获得了所有当前的帖子
*   我添加了一个 IF 语句（我似乎无法正确）

这是我的代码尝试

```
<?php
// Global variable for current user ID
$user_ID;

// Create a new WP query object           
$my_query = new WP_Query( array(
'post_type' => 'farmers',
'author' => $user_ID
));

// Get all the current user posts from the query object
$posts = $my_query->posts;

IF There are Posts (Not sure how to write this line) {
// Do something
} else {
// Do Something else
} ?> 
```

感谢您的任何帮助指导

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:18:00.213

怎么样：

```
if( $posts ) {
  // Do something
} 
else {
  // Do Something else
} 
```

# android - 复制的 Android 项目 - APK 安装程序冲突

> ID：12728133
> 
> 赞同：0
> 
> 时间：2012-10-04T13:16:00.850
> 
> 标签：android, installation, apk

我想创建我的 android 项目的变体（用于调试目的），所以我在 eclipse 中复制了它，并重命名了一些东西（项目名称、类等、build.xml 中的项目名称）

它构建了一个不同的命名 APK，但是当我安装这个 APK 时，它会卸载原始应用程序，反之亦然。

我在logcat中注意到

D/ActivityManager（1853）：试图启动应用程序名称

当我尝试启动“其他”应用程序时，从主屏幕上的快捷方式显示“应用程序未安装在您的手机上”

好像某些属性尚未设置，但我找不到 applicationName 设置的位置（尽管这可能是一个红鲱鱼）。

所以我的问题是，如果我复制一个 android-sdk 项目，我应该更改哪些设置以确保它真的是一个单独的应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T13:34:20.130

您必须在 android manifest 中更改包，它不必与 java 包相同，您可以将其命名为任何您想要的名称，它是 android 包名称，用于识别 android 的 apk。

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="" android:versionCode="" android:versionName=""> 
```

# c++ - 一般规则：C/C++ 中错误代码的负值或正值

> ID：12728135
> 
> 赞同：10
> 
> 时间：2012-10-04T13:16:08.603
> 
> 标签：c++, c

我有自己的返回类型和函数定义如下：

```
typedef enum xx_return_t {
   success = 0,
   general_error = -1,
   specific_error = -2,
   [...]
} xx_return_type;

xx_return_type generalFunction(void) {
   if(there_was_an_error)
      return general_error;
} 
```

但是我对这里的错误类型值有点不确定； **C/C++ 中错误返回值的标准/最佳实践是什么 -*负数还是正数*？**

*更新：* 感谢您的回答！我一直在寻找有关 C 和 C++ 的信息，但我也意识到这对每种语言特定的一般结构和方法（异常、错误代码、对象返回等）提出了很好的问题。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-04T13:40:12.717

这实际上是伪装成一个的两个完全不同的问题（C 和 C++ 版本）。

在 C++ 中，答案很简单：对...返回的数据值使用返回值，并对错误/异常情况使用异常。不要在纯 C++ 中使用返回值进行错误检查（C 库 API 到 C++ 是另一回事）。

在 C 中你没有那个选项，所以我建议使用 0 表示成功，使用负数表示错误代码。如果需要，这可以灵活地使用正数来获取其他成功信息（例如`read`呼叫）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T13:17:02.887

C++：

1.  这是一个选择问题，我都见过。
2.  使用例外！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T13:30:04.440

有多种约定可供选择：

*   microsoft 对其大多数高级 api 使用 0=FALSE=error。并让用户使用全局函数查找特定错误`GetLastError()`
*   microsoft 将 0=ok 用于较低级别的 API，例如注册表、音频或电话。这些都返回一个类似于 的类型`HRESULT`，包含特定的错误代码。
*   返回状态的posix函数通常返回-1表示错误，并让用户通过全局变量查找错误`errno`
*   返回指针的函数通常返回 NULL 以表示错误
*   c++ STL 函数为“未找到”等状态返回“结束”。使用异常发出信号，例如“内存不足”。

通常，始终如一地使用约定比使用哪种约定更重要。

顺便说一句，如何不这样做的一些例子可以在微软的头文件中找到：

```
#define S_OK       ((HRESULT)0x00000000L)
#define S_FALSE    ((HRESULT)0x00000001L) 
```

还要注意 Windows 中 's 的两个不同错误值`HANDLE`：0 或`INVALID_HANDLE_VALUE`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-04T13:21:05.987

我不知道C...

...但在 C++ 中，一般来说，这个想法是不使用错误代码。

我并不是说您应该使用异常，但错误代码并不能提供太多信息（缺少上下文，`FILE_NOT_FOUND`当文件名未知时有什么价值？）。

在我不使用异常的情况下，我倾向于更喜欢完整的错误对象。一个例子可能是：

```
boost::variant<File, Error> open(std::string const& filename, FileMode mode); 
```

根据发生的情况，您将在哪里获得文件或错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-04T13:16:49.903

最好使用 0（零）和非零，因此它们也可以被视为布尔值。通常 false 为 0，而 true 为其他任何值。

# eclipse - SmartyPDT 不适用于 PDT

> ID：12728136
> 
> 赞同：0
> 
> 时间：2012-10-04T13:16:10.857
> 
> 标签：eclipse, smarty, eclipse-pdt

我有带有 PHP 开发工具 (PDT) SDK 功能 3.0.0.v201201110400-77-184_2BEICRgM_fMVcz0M4Va9O 的 Eclipse 3.7.2。根据 SmartyPDT [http://code.google.com/p/smartypdt/wiki/InstallSmartyPDT](http://code.google.com/p/smartypdt/wiki/InstallSmartyPDT)的安装说明，我尝试安装它，但是当我将本地存档 .zip 添加为存储库时，我有消息：

> 没有分类项目

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:56:14.740

我解决了。我取消选中“按类别分组项目”。是教程里的，之前没看到。

# asp.net-mvc - 何时使用路由与重写规则？

> ID：12728139
> 
> 赞同：2
> 
> 时间：2012-10-04T13:16:12.643
> 
> 标签：asp.net-mvc, asp.net-mvc-3, url-rewriting, url-rewrite-module

我正在尝试调试路由问题，我刚刚意识到 MVC 路由所做的事情与 url 重写非常相似，但我对哪些情况需要路由以及哪些情况需要 url 重写没有很好的理解。有人可以解释这两种技术的不同之处以及每种技术适用于哪些情况吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T13:22:15.390

Url Rewriting 分析请求的 URL 并将其更改为同一服务器上的不同 URL。URL 重写模块在请求处理管道的早期运行，*在 Web 服务器决定使用哪个处理程序来*处理请求之前修改请求的 URL。

路由是在URL 重写*之后*发生的*请求调度机制。*当向 Web 服务器发出请求时，ASP.NET 路由会在已注册路由列表中查找请求的 URL 路径。如果找到路由，则调用该路由的相应处理程序来处理该请求。

 *在开发新应用程序或维护现有应用程序时使用路由。当您想要修补遗留应用程序而不在内部更改它时，请使用 Url 重写。

[http://www.iis.net/learn/extensions/url-rewrite-module/iis-url-rewriting-and-aspnet-routing](http://www.iis.net/learn/extensions/url-rewrite-module/iis-url-rewriting-and-aspnet-routing)*

# android - 以编程方式创建 LayoutInflater 或视图

> ID：12728140
> 
> 赞同：1
> 
> 时间：2012-10-04T13:16:13.287
> 
> 标签：android, android-view, layout-inflater, performance

在 xml 布局文件中定义`Vie`w 并`LayoutInflater`在应用程序中使用它更快还是在程序中定义它更快？我知道定义`View`via xml 是“更干净”的，但在这里我只对性能方面感兴趣。（我正在编写一个使用大量非常简单类型的视图的适配器）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:26:51.217

这取决于您的需要，如果您以编程方式执行它会有点快，因为它可以节省 xml 解析时间，但是如果您想要一个复杂的相对视图，最好使用 xml，因为您必须添加很多行，所以不会节省时间复杂的代码可以通过 xml 轻松完成。

# ios - 自我添加观察者

> ID：12728141
> 
> 赞同：4
> 
> 时间：2012-10-04T13:16:14.513
> 
> 标签：ios, objective-c, key-value-observing, self, addobserver

一个非常简单的问题，但我似乎找不到答案。（开发 iOS 5+ 应用程序）。

在我的*AppDelegate*中，我有一个属性，我们称之为它`@property (non atomic) BOOL aFlag;`。如果值发生变化，我希望我的*AppDelegate*得到通知。这是我尝试过的（一切都发生在 中`AppDelegate.m`），这与我将两个不同的对象与观察者“链接”时相同：

```
-(BOOL)application:(UIApplication*)application 
       didFinishLaunchingWithOptions:(NSDictionary*)launchOptions {
    // Some stuff

    _aFlag = YES;
    [self addObserver:self 
           forKeyPath:@"aFlag" 
              options:(NSKeyValueObservingOptionNew | NSKeyValueObservingOptionOld) 
              context:nil];

    // Some other stuff
}

-(void)observeValueForKeyPath:(NSString*)keyPath 
                     ofObject:(id)object 
                       change:(NSDictionary*)change 
                      context:(void*)context {
    if ([keyPath isEqual:@"aFlag"]) {
        // Do something
    } else {
        // Do nothing
    }
} 
```

但`observeValueForKeyPath:`不叫。

我哪里错了？谢谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T16:50:36.420

您应该实现自己的设置器。在那个二传手你知道poperty已经改变了。

这种方式更加优化。比自己做 KVO 好得多，也便宜得多。

您的解决方案有效，从技术上讲，您可以自己进行 KVO。

但是，想象一下，如果你开始`NSNotificationCenter`在你的班级中使用 for 触发方法？可以做到吗？是的。应该是吗？可能不是。您可能会遇到这样的情况，但在干净的面向对象解决方案中却不行。您应该`self`为此发送消息。

好吧，这里也一样。实现这个：

```
- (void)setAFlag:(BOOL)flag; 
```

例如：

```
- (void)setAFlag:(BOOL)flag{
    BOOL valueChanged = NO;    

    if(_aFlag != flag){
       valueChanged = YES;
    }
    _aFlag = flag;

    if(valueChanged)
        [self doSomethingWithTheNewValueOfFlag];
} 
```

# html - 浮动：左属性

> ID：12728143
> 
> 赞同：0
> 
> 时间：2012-10-04T13:16:21.833
> 
> 标签：html, css, css-float, position

在我的网页上，当我使用浮动时：左侧导航栏按钮（水平排列）它使内容向右移动，例如：

```
[ Home About More ]
                   Text 
```

我希望它是：

```
[ Home About More ]
Text 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T13:19:57.563

您需要使用`clear`Text 中的属性。像这样：

```
.text {clear:left} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:20:01.303

使用 clearfix 解决方案来解决问题。

[http://themergency.com/css-clearfix-demystified/](http://themergency.com/css-clearfix-demystified/)

更新：在 CSS 文件中，添加以下内容：

```
.clearfix:before, .clearfix:after { content: ""; display: table; }
.clearfix:after { clear: both; }
.clearfix { zoom: 1; } 
```

然后在您的 HTML 中，将该`clearfix`类添加到浮动元素的父容器中。不确定您的 HTML 标记是什么样的，但它可能与 clearfix 解决方案类似：

```
<div class="clearfix">
  <ul>
    <li><a href="#">Home</a></li>
    <li><a href="#">About</a></li>
    <li><a href="#">More</a></li>
  </ul>
</div> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:24:28.887

这是一个非常常见的问题，我建议像这样定义一个 css 条目

`.clear {clear:both;}`

然后在将来，您可以简单地将此类添加到需要清除上述浮动的元素中，或者像这样简单地使用此类添加一个空 div。

`<div class="clear"></div>`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T13:25:21.217

或者这适用于（溢出技巧）：

```
<div style="overflow:auto">
   <div style="float:left">[ Home </div>
   <div style="float:left">About </div>
   <div style="float:left">More ]</div>
</div>
Your other text 
```

# web-services - 在 Web 服务调用中包含“主登录密码”的哈希值的想法是什么

> ID：12728145
> 
> 赞同：0
> 
> 时间：2012-10-04T13:16:33.627
> 
> 标签：web-services, authentication, hash

我正在阅读有关如何调用应用程序 Web 服务的文档，他们说出于安全原因，在 Web 服务调用中包含主登录用户名和主登录密码，例如

```
/jw/web/json/workflow/process/start/testcall?j_username=kermit&hash=9449B5ABCFA9AFDA36B801351ED3DF66&loginAs=john 
```

但这在我心中提出了一个问题，散列密码的想法是什么？因为我正在显示将与数据库中的哈希值匹配的密码哈希值？

**因此，如果服务器也期望密码哈希值，那么暴露密码哈希值仍然是不安全的**！！！? 我的意思是最后密码的值是否作为哈希值可见？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T11:30:52.977

我得到了答案。我应该只使用

```
/jw/web/json/workflow/process/start/testcall?j_username=kermit&hash=9449B5ABCFA9AFDA36B801351ED3DF66&loginAs=john 
```

在服务器端级别并且不使用 JavaScript，所以我不会暴露敏感数据。

# java - Eclipse-Tomcat 设置中的错误 - ClassNotFoundException“1catalina.org.apache.juli.FileHandler”

> ID：12728147
> 
> 赞同：14
> 
> 时间：2012-10-04T13:16:38.083
> 
> 标签：java, eclipse, tomcat, logging, classnotfoundexception

**设置：** Eclipse Juno R，Tomcat 7.0.8，tomcat 通过 eclipse 插件运行。来自 eclipse 的 Tomcat 启动配置有 VM 参数 -Djava.util.logging.config.file="C:\WS\Serverlogs\tomcat7\conf\logging .properties”（参考：[在哪里可以查看 Eclipse 中的 Tomcat 日志文件？](https://stackoverflow.com/questions/2233053/where-can-i-view-tomcat-log-files-in-eclipse)）出现以下错误。

```
Can't load log handler "1catalina.org.apache.juli.FileHandler"
java.lang.ClassNotFoundException: 1catalina.org.apache.juli.FileHandler
java.lang.ClassNotFoundException: 1catalina.org.apache.juli.FileHandler
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at java.util.logging.LogManager$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.util.logging.LogManager.loadLoggerHandlers(Unknown Source)
    at java.util.logging.LogManager.addLogger(Unknown Source)
    at java.util.logging.LogManager$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.util.logging.LogManager.<clinit>(Unknown Source)
    at java.util.logging.Logger.getLogger(Unknown Source)
    at org.apache.juli.logging.DirectJDKLog.<init>(DirectJDKLog.java:71)
    at org.apache.juli.logging.DirectJDKLog.getInstance(DirectJDKLog.java:196)
    at org.apache.juli.logging.LogFactory.getInstance(LogFactory.java:170)
    at org.apache.juli.logging.LogFactory.getInstance(LogFactory.java:242)
    at org.apache.juli.logging.LogFactory.getLog(LogFactory.java:293)
    at org.apache.catalina.startup.Bootstrap.<clinit>(Bootstrap.java:57)
Can't load log handler "1catalina.org.apache.juli.FileHandler" 
```

“1catalina.org.apache.juli.FileHandler”、“2localhost.org.apache.juli.FileHandler”等也有类似的错误。我知道这些类来自 /bin 的 tomcat-juli.jar。我将此 jar 添加到服务器类路径中（Eclipse -> 服务器 -> 打开 -> 打开启动配置 -> 类路径 -> 用户条目），但得到了同样的错误。logging.properties 的内容是：

```
handlers = 1catalina.org.apache.juli.FileHandler, 2localhost.org.apache.juli.FileHandler, 3manager.org.apache.juli.FileHandler, 4host-manager.org.apache.juli.FileHandler, java.util.logging.ConsoleHandler

.handlers = 1catalina.org.apache.juli.FileHandler, java.util.logging.ConsoleHandler

1catalina.org.apache.juli.FileHandler.level = FINE
1catalina.org.apache.juli.FileHandler.directory = C:\WS\Serverlogs\tomcat7/logs
1catalina.org.apache.juli.FileHandler.prefix = catalina.

2localhost.org.apache.juli.FileHandler.level = FINE
2localhost.org.apache.juli.FileHandler.directory = C:\WS\Serverlogs\tomcat7/logs
2localhost.org.apache.juli.FileHandler.prefix = localhost.

3manager.org.apache.juli.FileHandler.level = FINE
3manager.org.apache.juli.FileHandler.directory = C:\WS\Serverlogs\tomcat7/logs
3manager.org.apache.juli.FileHandler.prefix = manager.

4host-manager.org.apache.juli.FileHandler.level = FINE
4host-manager.org.apache.juli.FileHandler.directory = C:\WS\Serverlogs\tomcat7/logs
4host-manager.org.apache.juli.FileHandler.prefix = host-manager.

java.util.logging.ConsoleHandler.level = FINE
java.util.logging.ConsoleHandler.formatter = java.util.logging.SimpleFormatter

org.apache.catalina.core.ContainerBase.[Catalina].[localhost].level = INFO
org.apache.catalina.core.ContainerBase.[Catalina].[localhost].handlers = 2localhost.org.apache.juli.FileHandler

org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/manager].level = INFO
org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/manager].handlers = 3manager.org.apache.juli.FileHandler

org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/host-manager].level = INFO
org.apache.catalina.core.ContainerBase.[Catalina].[localhost].[/host-manager].handlers = 4host-manager.org.apache.juli.FileHandler 
```

非常感谢任何输入/指导。找到了这些 [How to configure Tomcat JULI logging to roll log files？](https://stackoverflow.com/questions/136300/how-to-configure-tomcat-juli-logging-to-roll-log-files) [Local Tomcat Environment Not Starting](https://stackoverflow.com/questions/2166414/local-tomcat-environment-not-starting) ，但我的问题似乎有所不同。

**Edit1** 将“-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager”添加到服务器的 VM 参数并在 logging.properties 中将“\”更改为“/”就可以了。感谢 Robin 提供指向 Tomcat Logging FAQ 的指针

谢谢你，VJ

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-02T22:44:49.347

确保设置了以下系统属性，

```
-Djava.util.logging.manager=org.apache.juli.ClassLoaderLogManager 
```

正如[在](http://tomcat.10.n6.nabble.com/logging-failure-with-tomcat-6-0-29-jvm-1-6-0-30-b12-ubuntu-10-04-3-LTS-td4531175.html#a4531359)tomcat 用户邮件列表中看到的那样。

我在使用[YAJSW](http://yajsw.sourceforge.net/)而不是使用 tomcat 启动脚本启动 tomcat 时遇到了同样的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:47:12.147

您可以查看此特定问题的常见问题解答： [http ://wiki.apache.org/tomcat/FAQ/Logging](http://wiki.apache.org/tomcat/FAQ/Logging)

或者您可以使用另一个 logging.properties，例如这个：

```
log4j.rootLogger=DEBUG, A1
log4j.appender.A1=org.apache.log4j.ConsoleAppender
log4j.appender.A1.layout=org.apache.log4j.PatternLayout

# Print the date in ISO 8601 format
log4j.appender.A1.layout.ConversionPattern=%d [%t] %-5p %c - %m%n

# Print only messages of level WARN or above in the package com.foo.
log4j.logger.com.foo=WARN 
```

# resharper - 制作自定义的 resharper 规则以支持字段名称中的多个大写字母

> ID：12728152
> 
> 赞同：3
> 
> 时间：2012-10-04T13:16:56.970
> 
> 标签：resharper

所以在我的新地方，我的 Resharper 选项文件以适应这里的工作方式，但我有一个小问题。他们喜欢命名像 _personBC 这样的东西。它无处不在，我无法改变，也不想开始告诉人们改变它，它不会伤害任何东西，这很好，只是我似乎无法定义一个规则来处理它。

我想说，“所有证明字段都需要以下划线/小写开头”但是当我转到“Resharper -> 选项 -> “高级设置”并尝试添加规则时，似乎没有说“^_[az]*”或类似的方式 - 任何人都知道我怎么能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T14:05:09.580

## 更新

你在使用 Resharper 7 吗？

您可以按 Alt-Enter 并将缩写（例如 BC 或 AD）添加到缩写列表中：

![在此处输入图像描述](../Images/8f9077d16777d1dfdf058e339b0f223f.png)

## 上一个答案

这也激怒了我，但是我不相信（从 Resharper 7 开始）您可以更改设置以容忍相邻的大写字母。私有字段的默认设置是：

![在此处输入图像描述](../Images/ad9366ca33a4fe803f917a925ed81d44.png)

这么多的选择，但不是你要找的！

我看到的唯一选择是关闭检查选项（或仅显示为提示），以免分散您的注意力。

# android - EditText 的 Holo 主题

> ID：12728155
> 
> 赞同：2
> 
> 时间：2012-10-04T13:17:10.600
> 
> 标签：android, view, themes, android-edittext

我有一个用户名`TextView`，下面有一个用户名`EditText`，密码也是一样的。我只需要`EditText`为各个设备更改为 Holo 主题。我尝试将父级设置`style.xml`为

```
parent="@android:style/Theme.Holo. 
```

`parent="@android:style/Widget.Holo.Light.EditText"`

但没用..有人有答案吗？

嗨，我得到了答案。原因是调用此对话框的活动在清单中具有主题 android:theme="@android:style/Theme.Translucent.NoTitleBar" ..我在 oncreate 中删除并添加了，editText 出现了全息！！！！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T13:31:37.470

使用[holoeverywhere](http://www.holoeverywhere.com/)库

或者

[您可以使用android-holo-colors](http://android-holo-colors.com/)生成 edittext Holo 样式 下载 zip.then 设置 edittext 背景

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-09-23T09:02:05.773

我或多或少有同样的问题。这是我的解决方案。=)

```
<style name="AppTheme" parent="android:Theme.Holo.Light">

            <item name="android:editTextStyle">@style/AppTheme.EditTextStyle</item>
            <item name="android:editTextBackground">@drawable/apptheme_edit_text_holo_dark</item>
        </style>

    <style name="AppTheme.EditTextStyle"  parent="@android:style/Widget.Holo.EditText">
        <item name="android:textSize">@dimen/etforlogin</item>
        <item name="android:singleLine">true</item>
        <item name="android:ellipsize">end</item>
        <item name="android:typeface">monospace</item>
    </style> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:30:53.380

在你的中添加`style`属性`EditText``XML`

```
<EditText
    android:layout_height="wrap_content"
    android:layout_width="wrap_content"
    style="@android:style/Widget.Holo.EditText"/> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-25T22:50:15.137

根据 Android 开发者网站，如果需要 Holo 主题，我们应该为以对话框形式显示的活动使用以下主题：

```
<activity android:theme="@android:style/Theme.Holo.Dialog" > 
```

[http://developer.android.com/guide/topics/ui/dialogs.html#CustomLayout](http://developer.android.com/guide/topics/ui/dialogs.html#CustomLayout)

# haskell - 约束包是如何工作的？

> ID：12728159
> 
> 赞同：13
> 
> 时间：2012-10-04T13:17:15.060
> 
> 标签：haskell, polymorphism, logic

[据我了解， Data.Constraint.Forall](http://hackage.haskell.org/packages/archive/constraints/0.3.2/doc/html/src/Data-Constraint-Forall.html)背后的想法是在实现中使用强制，但使用类型系统确保安全。关于后者，我有两个问题。

1.  为什么我们需要两个 skolem 变量——A 和 B？我想如果一个“未知”类型满足一个约束，那么它就是多态的。第二种类型如何提供更多安全性？
2.  为什么这些类型被称为 skolem 变量？我认为skolemnization是用来去除存在量化的，这里我们看到了全称量化。我错过了某个地方的标志翻转吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T15:19:05.270

当 Skolem 是单个变量时，可以使用 MPTC 和函数依赖来识别 Skolem，方法是使用在约束上参数化的约束。当有两个时，我曾经这样做的技巧不起作用。

从在此模块之外编写的代码的角度来看，变量*是*Skolemized。它们实际上是一个“新鲜”类型的构造函数。

但是鉴于您不能在模块之外明确引用这些类型，因为它们没有被导出，任何涵盖这些 Skolems 的实例都必须被普遍量化。

这就是我从存在主义升级到普遍主义的方式。“标志翻转”来自他们未出口的性质，而不是技术上他们作为 Skolems 的角色。

# android - 是否可以录制增强现实视频？

> ID：12728169
> 
> 赞同：0
> 
> 时间：2012-10-04T13:17:42.057
> 
> 标签：android, augmented-reality

我见过很多允许用户在标记上查看视频/ 3D 动画的 AR 应用程序？但我还没有看到允许录制视频或点击图片的应用程序。

我在 stackoverflow 上看到过一些帖子，其中提到了将图像复制到相机图像上以获得叠加 AR 图像效果

[在android中与相机捕获的图像叠加图像](https://stackoverflow.com/questions/8352062/image-overlay-with-camera-captured-image-in-android)

这是否意味着无法录制播放 AR 元素的视频？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T12:50:44.710

一般来说，在 AR 应用程序中，您可以在图像中添加对象或将图像放置在相机视图上。如果要创建视频，则必须将此图像连接到视频序列的每个图像。通过做出微小的差异，您可以创建动画对象。

捕获增强的图片或视频没有问题。开发人员还不需要它。但好主意；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T11:03:45.150

这不成问题。在 AR 中在相机视图上叠加虚拟 2d/3d 对象的实用方法是使用 openGL 在相机视图的纹理层上绘制虚拟对象（可以是 3D 对象或 2D 纹理）。通过OpenGL流水线中的光栅化过程，显示表面中的每个像素都被填充了适当的颜色，从而呈现出真实和虚拟的帧混合。存储在帧缓冲区中的像素，可以轻松保存。

# jquery - 使用 jQuery 的可扩展站点

> ID：12728180
> 
> 赞同：-2
> 
> 时间：2012-10-04T13:17:59.723
> 
> 标签：jquery, scalability, parallax

尝试使用 jQuery 视差创建一个在缩小或放大窗口时可以正确调整大小的站点。查看此 Flash 站点并拖动角以查看调整大小功能。

[http://www.intersectionpartners.com/](http://www.intersectionpartners.com/)

关于如何用 jQuery 做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T15:57:21.803

我相信您所期望的是全屏视差。就像我在这里的示例一样：

[http://jsfiddle.net/protron/hLHTP/embedded/result/](http://jsfiddle.net/protron/hLHTP/embedded/result/)（完整源代码[在这里](http://jsfiddle.net/protron/hLHTP/)）

我开始复制他们的[目标演示](http://stephband.info/jparallax/demos/target.html)，然后（在 CSS 内部）我将边距设置为“0” `parallax-port`：

```
.parallax-port {
    position: absolute;
    top:0px; bottom:0px; left:0px; right:0px;
} 
```

就是这样。然后我将图像更改为[视差主页](http://stephband.info/jparallax/)中的图像，并更改它们的坐标以获得与您显示的页面相似的采样器（但显然图像不足以容纳大屏幕）。

# javascript - 使用 AngularJS 更新集合时添加漂亮的转换

> ID：12728181
> 
> 赞同：2
> 
> 时间：2012-10-04T13:18:00.210
> 
> 标签：javascript, jquery, angularjs

我想知道如何在更新集合时添加一些效果

`<li ng-repeat="item in items | filter:filterFunction">
{{item.name}}
</li>`

**items**是一个集合，例如 30。

此列表仅显示验证**filterFunction**的项目。范围定期更新。

它有效，但它有点暴力！

使用 jquery添加**过渡**效果可能很棒（淡入淡出）。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-04T22:34:10.733

我建议您使用 AngularJS Core 中提供的新 ngAnimate 指令。它支持删除，并且使用起来更好。

[在此处](http://code.angularjs.org/1.1.5/docs/api/ng.directive:ngAnimate)阅读文档。[在这个很棒的 yearofmoo 教程](http://www.yearofmoo.com/2013/08/remastered-animation-in-angularjs-1-2.html)中了解更多信息

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-04T14:46:27.603

看看 angular-ui 中的 animate 指令

[http://angular-ui.github.com/#directives-animate](http://angular-ui.github.com/#directives-animate)

它应该可以帮助您实现您想要做的事情。只是为了让你知道，Angular 团队已承诺在下一个左右的主要版本中支持 ng-repeat 和 ng-switch 的动画。所以在此之前保持你的手指交叉。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-08T19:59:24.890

这是一篇关于 ngAnimate 功能和用法的不错的文章：[http ://www.yearofmoo.com/2013/04/animation-in-angularjs.html](http://www.yearofmoo.com/2013/04/animation-in-angularjs.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-22T15:21:32.883

这个网站上有很多不错的转换：

[AnuglarJS 动画](http://www.nganimate.org/)

# c# - 使用 MVVM 的选择更改事件

> ID：12728184
> 
> 赞同：6
> 
> 时间：2012-10-04T13:18:18.213
> 
> 标签：c#, wpf, mvvm, listbox, listitem

我有一个包含人员列表的**列表框。**当用户单击一个项目时，viewModel 应该将 currentPerson 对象设置为用户单击的对象。

我必须为此使用 ViewModel，因此**MainWindow.xaml.xs 中没有代码**。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T13:19:26.067

这很简单：

将属性添加`CurrentPerson`到您的 ViewModel 并将其绑定到`SelectedItem`ListBox 的属性。

像这样的东西：

查看型号：

```
public Person CurrentPerson
{
    get { return _currentPerson; }
    set
    {
        if(value == _currentPerson) return;
        _currentPerson = value;

        NotifyOfPropertyChange("CurrentPerson");
    }
} 
```

看法：

```
<ListBox SelectedItem="{Binding CurrentPerson}" ...> 
```

# ruby - Ruby中的堆栈级别太深，试图随机抽取一张卡片

> ID：12728186
> 
> 赞同：1
> 
> 时间：2012-10-04T13:18:21.733
> 
> 标签：ruby, stack-level

运行下面的代码时出现错误“堆栈级别太深”。如果随机选择的卡不存在，它会选择另一张随机卡。我想我应该以某种方式尝试代码，但我不确定如何。有什么建议么？

```
 def hit 
    choice_of_card = rand($deck.length); #choose a random card out of the deck
    drawn_card = $deck[choice_of_card]; #draw that random card from the deck
    if drawn_card != 0 #if there is a card there 
     $deck[choice_of_card] = 0; #remove that card from the deck by making the space blank
     if drawn_card == 11 #if you draw an ace
      self.ace_count += 1;
     end 
     self.hand_value += drawn_card ;
    else hit; #if there is no card at that space then redraw (recursion)
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:24:31.373

如前所述，递归深度基于随机数生成器是“无限的”。考虑一下牌组中只剩下一张牌的情况。它将继续选择随机数并递归，直到最终选择剩下的一张牌；潜在的非常深的堆栈。在 52 张牌中剩下一张牌，任何时候都不选择剩余牌的几率是 51/52=98%。要获得 50% 的选择机会，您需要大约 35 次迭代/递归。要达到 99% 的选择机会，它需要大约 237 次迭代： `(1.0 - (51/52)^237)=99%`.

要使用这个特定的实现，有必要将其更改为循环（只是迭代而不是递归）。但是，这仍然不是很有效，并且可能会循环很长时间才能找到为数不多的剩余卡片之一。另一种方法可能是在牌被移除时从牌组中移除间隙，然后总会有命中。或者，也许可以预先使用[洗牌算法](http://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)，然后按顺序遍历它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:28:12.903

我认为可以肯定地说递归导致了错误。在我看来你不需要递归，你可以循环直到你得到draw_card！= 0，例如，

```
drawn_card = 0
while drawn_card == 0
  choice_of_card = rand($deck.length); #choose a random card out of the deck
  drawn_card = $deck[choice_of_card]; #draw that random card from the deck
end 
```

# javascript - 上传前在浏览器中裁剪图像

> ID：12728188
> 
> 赞同：61
> 
> 时间：2012-10-04T13:18:23.830
> 
> 标签：javascript, html, html5-canvas

我发现的许多库，比如 Jcrop，实际上并没有进行裁剪，它只创建了一个图像裁剪 UI。然后，它取决于进行实际裁剪的服务器。

如何在不使用任何服务器端代码的情况下使用一些*HTML5 功能在**客户端进行图像裁剪。*

 *如果是，是否有一些例子或提示？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-10-04T14:52:35.007

是的，这是可以做到的。
它基于锚标签的新html5“下载”属性。
流程应该是这样的：

1.  加载图像
2.  将图像绘制到指定裁剪边界的画布中
3.  从画布中获取图像数据并使其成为`href`dom 中锚标记的属性
4.  将下载属性 ( `download="desired-file-name"`) 添加到该`a`元素就是这样。用户所要做的就是单击您的“下载链接”，图像将被下载到他的电脑上。

当我有机会时，我会带着演示回来。

**更新**
这是我承诺[的现场演示。](http://jsfiddle.net/gion_13/MmFkL/show/)它采用[jsfiddle 徽标](http://jsfiddle.net/img/logo.png)并裁剪每个边距的 5px。
代码如下所示：

```
var img = new Image();
img.onload = function(){
    var cropMarginWidth = 5,
        canvas = $('<canvas/>')
                    .attr({
                         width: img.width - 2 * cropMarginWidth,
                         height: img.height - 2 * cropMarginWidth
                     })
                    .hide()
                    .appendTo('body'),
        ctx = canvas.get(0).getContext('2d'),
        a = $('<a download="cropped-image" title="click to download the image" />'),
        cropCoords = {
            topLeft : {
                x : cropMarginWidth,
                y : cropMarginWidth 
            },
            bottomRight :{
                x : img.width - cropMarginWidth,
                y : img.height - cropMarginWidth
            }
        };

    ctx.drawImage(img, cropCoords.topLeft.x, cropCoords.topLeft.y, cropCoords.bottomRight.x, cropCoords.bottomRight.y, 0, 0, img.width, img.height);
    var base64ImageData = canvas.get(0).toDataURL();

    a
        .attr('href', base64ImageData)
        .text('cropped image')
        .appendTo('body');

    a
        .clone()
        .attr('href', img.src)
        .text('original image')
        .attr('download','original-image')
        .appendTo('body');

    canvas.remove();
}
img.src = 'some-image-src'; 
```

**更新二**
忘了提：当然有一个缺点:(。
因为同源策略也适用于图像，如果你想访问图像的数据（通过画布方法`toDataUrl`）。
所以你仍然需要一个服务器端代理，它将为您的图像提供服务，就好像它托管在您的域上一样。

**更新三** 虽然我不能为此提供现场演示（出于安全原因），但这里有一个解决同源策略的 php 示例代码：

文件 `proxy.php`：

```
$imgData = getimagesize($_GET['img']);
header("Content-type: " . $imgData['mime']);
echo file_get_contents($_GET['img']); 
```

这样，而不是直接从它的原点加载外部图像：

```
img.src = 'http://some-domain.com/imagefile.png'; 
```

您可以通过代理加载它：

```
img.src = 'proxy.php?img=' + encodeURIComponent('http://some-domain.com/imagefile.png'); 
```

这是一个示例 php 代码，用于将图像数据（base64）保存到实际图像中：

文件`save-image.php`：

```
$data = preg_replace('/data:image\/(png|jpg|jpeg|gif|bmp);base64/','',$_POST['data']);
$data = base64_decode($data);
$img = imagecreatefromstring($data);

$path = 'path-to-saved-images/';
// generate random name
$name  = substr(md5(time()),10);
$ext = 'png';
$imageName = $path.$name.'.'.$ext;

// write the image to disk
imagepng($img,  $imageName);
imagedestroy($img);
// return the image path
echo $imageName; 
```

您所要做的就是将图像数据发布到该文件中，它会将图像保存到光盘并返回现有的图像文件名。

当然，这一切可能感觉有点复杂，但我想向您展示您想要实现的目标是可能的。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-04T14:41:05.233

Pixastic库完全[符合](https://github.com/jseidelin/pixastic)[您的要求](http://www.pixastic.com/lib/docs/actions/crop.)。但是，它仅适用于支持画布的浏览器。对于那些较旧的浏览器，您需要：

1.  提供服务器端回退，或
2.  告诉用户你很抱歉，但他需要一个更现代的浏览器。

当然，选项#2 对用户不是很友好。但是，如果您的意图是提供纯客户端工具和/或您不支持后备后端裁剪器（例如，您可能正在编写浏览器扩展程序或离线 Chrome 应用程序，或者您负担不起一个提供图像处理库的体面的托管服务提供商），那么将您的用户群限制在现代浏览器中可能是公平的。

**编辑**：如果你不想学习 Pixastic，我在[这里](http://jsfiddle.net/Yuwvq/1)的 jsFiddle 上添加了一个非常简单的裁剪器。应该可以修改和集成和使用`drawCroppedImage`Jcrop的功能。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-04-23T11:09:35.793

`#change-avatar-file`是一个文件输入 `#change-avatar-file`是一个img标签（jcrop的目标）“关键”是FR.onloadend事件 [https://developer.mozilla.org/en-US/docs/Web/API/FileReader](https://developer.mozilla.org/en-US/docs/Web/API/FileReader)

```
$('#change-avatar-file').change(function(){
        var currentImg;
        if ( this.files && this.files[0] ) {
            var FR= new FileReader();
            FR.onload = function(e) {
                $('#avatar-change-img').attr( "src", e.target.result );
                currentImg = e.target.result;
            };
            FR.readAsDataURL( this.files[0] );
            FR.onloadend = function(e){
                //console.log( $('#avatar-change-img').attr( "src"));
                var jcrop_api;

                $('#avatar-change-img').Jcrop({
                    bgFade:     true,
                    bgOpacity: .2,
                    setSelect: [ 60, 70, 540, 330 ]
                },function(){
                    jcrop_api = this;
                });
            }
        }
    }); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-04T15:04:13.263

如果您仍将使用 JCrop，您将只需要此 php 函数来裁剪文件：

```
$img_src = imagecreatefromjpeg($src);
$img_dest = imagecreatetruecolor($new_w,$new_h);
imagecopyresampled($img_dest,$img_src,0,0,$x,$y,$new_w,$new_h,$w,$h);
imagejpeg($img_dest,$dest); 
```

客户端：

```
jQuery(function($){

    $('#target').Jcrop({
    onChange:   showCoords,
    onSelect:   showCoords,
    onRelease:  clearCoords
    });

});

var x,y,w,h; //these variables are necessary to crop
function showCoords(c)
{
    x = c.x;
    y = c.y;
    w = c.w;
    h = c.h;
};
function clearCoords()
{
    x=y=w=h=0;
} 
```*

# powerpoint - 以选定的顺序显示多个 PowerPoint 演示文稿

> ID：12728190
> 
> 赞同：0
> 
> 时间：2012-10-04T13:18:26.793
> 
> 标签：powerpoint, presentation

有没有人听说过一个应用程序，我可以在其中按某种顺序拖放 ppt 文件，然后循环播放它们？

我不想在 PowerPoint 中插入幻灯片/文件，我有很多演示文稿，我想每天显示一组不同的 ppt 文件。任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:42:04.550

你可以对它进行相当简单的编程。只需使用 Powerpoint 互操作，开始演示，完成后，播放下一个。

# javascript - Highcharts堆积柱形图可能具有不规则的时间间隔？

> ID：12728191
> 
> 赞同：0
> 
> 时间：2012-10-04T13:18:27.457
> 
> 标签：javascript, jquery, highcharts

我正在尝试在 x 轴上生成一个带有时间线的堆积柱形图，其中每个系列不一定具有与相关日期匹配的数据点。我能够生成一个每个数据点有多个列的柱形图，但我真的想要一个堆积图。图表的数据是 JSON，我可以根据需要操纵其格式。

```
var options = {
              chart: {
                  renderTo: 'timeline',
                  zoomType: 'x',
                  type: 'column'
              },
              title: {
                  text: 'Releases'
              },
              yAxis: {
                  title: {
                    text: 'Count'
                  }
              },
              xAxis: {
                  type: 'datetime'
              },
              legend: {
                  enabled: true
              },
              series: []
          };

/* 
Following URL returns json like:

{
    "rows": {
        "dynamicCategory1": {
            "0": {
                "count": "7",
                "unix_date": "1344225600"
            },
            "3": {
                "count": "2",
                "unix_date": "1344312000"
            }
        },
        "dynamicCategory2": {
            "5": {
                "count": "7",
                "unix_date": "1344225600"
            },
            "7": {
                "count": "2",
                "unix_date": "1345003200"
            }
        }
    }
}

*/

$.getJSON("/mydatainjsonformat/", function(data) {

  $.each(data.rows, function(key, val) {
    var series = { data: [] };

    series.name = key;

    $.each(val, function(key2, val2) {
      var x = parseFloat(val2.unix_date * 1000);
      var y = parseFloat(val2.count);

      series.data.push([x, y]);

    });

    options.series.push(series);

  });

  $(function () {
      var chart1;
      $(document).ready(function() {
          chart1 = new Highcharts.Chart(options);
      });
  });
}); 
```

从理论上讲，我可以更改数据，为每个没有给定日期值的类别包含一个 0，然后将日期设为类别 - 但这是正确的方法吗？这不会搞砸x轴上的时间吗？任何方向都非常感谢。

[jsfiddle](http://jsfiddle.net/KyqPj/123/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T15:48:44.797

所以：在经历了很多痛苦和折磨之后，我错过了这个需要作为图表配置传递的节：

```
 plotOptions: {
                column: {
                  stacking: 'normal'
                }, 
```

即便如此，我也花了很长时间才找到，因为在我的大部分测试中，我都有那节，但没有驼峰式 plotOptions。 *多次敲击键盘并哭泣*

现在工作得很好。其他麻烦：要让 jsfiddle 通过 AJAX 调用（'/echo/json/'）向你返回 json，你必须向它发布。我花了一段时间才确定为什么 $.getJSON 也不起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:19:00.977

我认为你想要实现这样的目标。

您有类似从 X 日期开始的事件，并且您想在 Y 日期之前画线。

因此，您正在尝试使用堆叠条形图来使用它，因此您会在 Y 轴上获得线条。

如果我是正确的，那么我建议您使用 Highstock，它是[Highcharts](http://www.highcharts.com)开发的库之一。

`Highstock`是创建时间线图表的首选 API。

我创建了一个示例小提琴，可以帮助您开始。给你：http: [//jsfiddle.net/mhardik/YmRUg/](http://jsfiddle.net/mhardik/YmRUg/)

# php - .htaccess 和 php 重写

> ID：12728194
> 
> 赞同：0
> 
> 时间：2012-10-04T13:18:52.220
> 
> 标签：php, .htaccess

我不能做简单，不明白什么问题。我只想创建一个漂亮的 URL。

我的链接如下所示： `www.mysite.com/coach/23/victor`

我的`.htaccess`文件如下所示：

```
RewriteEngine On
RewriteRule ^([^/]*)\.html$ /index.php?p=$1 [L]
RewriteRule ^([^/]*)/([^/]*)\.html$ /index.php?p=$1&id=$2 [L]
RewriteRule ^([^/]*)/([^/]*)/([^/]*)\.html$ /index.php?p=$1&id=$2&title=$3 [L] 
```

在`functions.php`文件中，我试图获取如下信息：

```
$page_type=$_GET['p'];
$page_type=$_GET['id'];
$page_type=$_GET['title']; 
```

在`index.php`我包含`functions.php`并进行切换。

```
switch($page_type){
  case "home": include "home.php";
               break;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:36:54.220

**你没有问**任何**问题**

但是，仅通过分析您所说的。你想去

```
www.mysite.com/coach/23/victor 
```

wowever 你重写规则的所有期望`.html`，所以正确的 url 将是

```
www.mysite.com/coach/23/victor.html 
```

# jquery - 使用 jQuery 更改复选框状态

> ID：12728197
> 
> 赞同：0
> 
> 时间：2012-10-04T13:18:56.777
> 
> 标签：jquery, asp.net, jquery-ui

我有一个 jQuery 对话框，其中包含带有多个复选框的表。

```
$("#custom-modal").dialog({
            height: 200,
            modal: true,
            buttons: { "OK": function () {
                var table1 = $("#MainContent_rtc1_customTable").html();
                alert(table1);
                //$.session('mytbl', $("#customTable").val());
                $.ajax({
                    type: "POST",
                    url: "MyPage.aspx/BindCustom",
                    data: ({ param1: table1 }),
                    error: function (XMLHttpRequest, textStatus, errorThrown) {
                        alert(errorThrown);
                    },
                    success: function (result) {
                        alert("success");
                    }
                });

                $(this).dialog("close");
                return true;
            }, "Cancel": function () {
                $(this).dialog("close");
                return false;
            }
            }

        });
    });

    $(':checkbox').click(function () {
        var $this = $(this);
        if ($this.is(':checked')) {
            //alert(event.target.id);
            $this.attr('checked', false);
        } else {
            //alert(event.target.id);
            $this.attr('checked', true);
        }
    }); 
```

更改复选框的状态后，当我看到带有 alert(table1) 的表格的 html 代码时；（按确定按钮后）；我看到所有复选框的状态都已选中。所以他们不会被改变。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:03:01.927

尝试使用`$(this).removeAttr('checked');`而不是`$this.attr('checked', false);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:35:14.523

```
$('input[type=checkbox]').click(function () {
        var $this = $(this);
        if (this.checked) {
            //alert(event.target.id);
            $this.prop('checked', false);
        } else {
            //alert(event.target.id);
            $this.prop('checked', true);
        }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-17T20:42:44.140

如果它们是 ASP 复选框，则实际的复选框输入不是控件。除此之外，您似乎没有正确绑定事件，正如wirey所提到的，如果您只是尝试更改选中的属性，则不需要。

如果您仍需要将事件处理程序添加到复选框，请参阅此帖子：

[需要选中所有复选框并为每个复选框动态添加特定的事件处理程序](https://stackoverflow.com/questions/6493383/need-to-select-all-checkboxes-and-dynamically-add-specific-event-handler-to-each)

该问题被报告为错误，但随后贴花无效且未修复（[http://bugs.jquery.com/ticket/7594](http://bugs.jquery.com/ticket/7594)）。

您可以做的一件事是正确处理点击事件，然后设置一个可以检查的自定义变量。在 asp 中，这将很难检查，因为复选框不仅仅是输入，它们与 span 一起打包，并且所有类和属性通常都添加到 span，而不是框。

因此，根据您的需要，您可以执行以下操作：

```
var table1;

$('.isCheckBox').each(function(){
    //default value set here
    $(this).attr('isChecked','false');
});

$('input:checkbox').click(function (event) {
    if($(this).prop('checked') == true)
    {
       $(this).attr('data-isChecked','true'); 
    }
    else
    {
        $(this).attr('data-isChecked','false'); 
    }

    table1 = $('#thetable').html();
    alert(table1);
}); 
```

带有 HTML 的：

```
<table id="thetable">
<tr>
    <td><input class='isCheckBox' type="checkbox"/></td>
    <td><input class='isCheckBox' type="checkbox"/></td>
    <td><input class='isCheckBox' type="checkbox"/></td>
</tr> 
```

小提琴：http: [//jsfiddle.net/DwerK/9/](http://jsfiddle.net/DwerK/9/)

然后检查属性“data-isChecked”。您需要添加数据前缀，以便 HTML 进行验证。

现在我推测您可以将属性添加到父元素，然后在后面的代码中检查它，不确定这将如何工作并且没有实例来检查它。

我希望这会有所帮助。

编辑：Wirey 要求查看问题，据我了解，这说明了问题：http: [//jsfiddle.net/w22Q4/2/](http://jsfiddle.net/w22Q4/2/)

# javascript - javascript中self和this之间的区别以及何时使用它们中的任何一个

> ID：12728202
> 
> 赞同：11
> 
> 时间：2012-10-04T13:19:10.013
> 
> 标签：javascript, titanium

> **可能重复：**
> [这个 JavaScript 习语的基础是什么：var self = this？](https://stackoverflow.com/questions/962033/what-underlies-this-javascript-idiom-var-self-this)

我很困惑什么时候在javascript中使用self和this。
我知道*this*指的是当前上下文，而*self*指的是当前窗口。
当我在 Titanium 中开发应用程序时。我想知道什么时候使用*self*或者*这个*OR 是否在钛开发中 有任何*self的概念。*

这是我在我的钛 commonJS 模块中做的示例代码

```
var auth = require('/SDKTest/auth');
var nodeAPI = require('/SDKTest/nodeAPI');
function myAPI() {
     this.auth = auth;
     this.nodeAPI = nodeAPI;
     return this;
    }
module.exports = myAPI; 
```

此代码有效，但我可以使用*self*代替*它*吗？而不是使用*它*，我可以创建一个命名空间并执行以下操作：

```
 function myAPI() {
     var api = {};
     api.auth = auth;
     api.nodeAPI = nodeAPI;
     return api;
    } 
```

这两种方法都有效，但是在这里使用*它有什么用*

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-05T10:46:31.333

`self`不是 JavaScript 关键字！程序员在定义类时使用它来始终有效地引用对象本身。

```
var Person = function() {
    var self = this;
    // private function
    function say(what) {
        alert(what);
    }
    self.fetchSomething = function() {
        var xhr = Ti.Network.createHTTPClient({
            onload: function() {
                // in this case 'this' is referencing to xhr!!!
                say(this.responseText);
            }
        });
        xhr.open('GET', 'http://www.whatever.com');
        xhr.send();
    }
    return self;
}
var p = new Person();
p.fetchSomething(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T14:12:26.127

你的问题有点令人困惑，就像在问：我买苹果还是西红柿？答案是，这真的取决于你想做什么，因为它们完全不同。

本质上，您已经在一定程度上回答了自己的问题，因为您已经知道两者之间的区别：

*   `this`指当前上下文
*   `self`指`window`

```
function myAPI() {
     this.auth = auth;
     this.nodeAPI = nodeAPI;
     return this;
    }
module.exports = myAPI; 
```

你问是否可以使用`self`。想一想，`this`你能做什么？它允许您参考上下文。上下文是什么，嗯，就是`module`你打电话的时候`module.exports()`。而且`module`很可能不会`window`，所以不，你不能`self`在这里使用。

这能回答问题吗？

第二个代码示例似乎做了一些完全不同的事情。我不知道该怎么做。

# mysql - 将 mySQL 默认时间从 00:00:00 更改为 23:59:59

> ID：12728209
> 
> 赞同：1
> 
> 时间：2012-10-04T13:19:28.680
> 
> 标签：mysql, sql

我有一列包含类似的数据`2012-09-09 13:20:00`，当我尝试使用以下查询查询表时，它不包括迄今为止的数据。

```
Procedure test (IN fromdate date, IN todate date)

Select * from table where date between fromdate and todate 
```

假设用户输入`2012-08-10`，`2012-09-09`那么它不包含 9 月 9 日的数据。但是，如果我将日期更改为`2012-09-10`，那么它将包含数据。似乎在没有时间的情况下，mySQL 默认为午夜或 00:00:00

有没有办法改变它或解决这个问题？比如，加入时间（23:59:59）到`todate`某个阶段？即使用以下

```
set todate = todate.STR_TO_DATE("23:59:59"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:22:50.533

慢 — 将列强制转换为 DATE 类型：

```
... WHERE DATE(column_yyyymmddhhmmss) BETWEEN fromdate AND todate 
```

更快 — 将上限强制为 DATETIME，包括当天的最后一秒：

```
... WHERE column_yyyymmddhhmmss BETWEEN user_fromdate AND CONCAT(user_todate, '23:59:59'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:23:14.093

您应该使用`>`and`<`运算符，而不是`BETWEEN`因为它不包含日期（假设您的列是`datetime`）。如果只指定`2011-01-31`，则相当于`2011-01-31 00:00:00`。

例子：

```
SELECT * FROM t1 WHERE date > DATE_SUB(fromdate, INTERVAL 1 SECOND) 
     AND date < DATE_ADD(todate, INTERVAL 1 DAY) 
```

看到它在[行动](http://sqlfiddle.com/#!2/728cf/1)

# php - CHMOD 0777 并返回 0644

> ID：12728214
> 
> 赞同：0
> 
> 时间：2012-10-04T13:19:38.977
> 
> 标签：php

我有一个需要将一些 html 写入文件的 cron 脚本。

需要编写 HTML 的文件位于 public_html 目录中，而脚本位于该目录上方的不同位置。如果我手动 CHMOD 一切正常，但我不想将其保留为 0777 或继续手动操作，所以我想让我的脚本为我做这件事。

```
ob_start();

// build my HTML

$myHTML = ob_get_clean();

// CODE TO SAVE INTO INCLUDE <<<

$filename = 'home/public_html/file.php';

if (is_writable($filename)) {

    if (!$handle = fopen($filename, 'w')) {
         mail("support@domain.com", "Failed to create include", "Script failed to create include", "From: Support <support@domain.com>");
    exit;
    }

    // Write $somecontent to our opened file.
    if (fwrite($handle, ($myHTML)) === FALSE) {
       mail("support@domain.com", "Failed to create include", "Script failed to create include", "From: Support <support@domain.com>");
    exit;
    }

    fclose($handle);

} else {
    mail("support@domain.com", "Failed to create include", "Script failed to create include", "From: Support <support@domain.com>");
    exit;
} 
```

不幸的是，它似乎不起作用。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T06:51:48.610

这看起来像一个绝对路径`home/public_html/`，你确定你没有拼错吗？
你可以

```
var_dump(file_exists($filename)) 
```

如果`true`返回，那么您可以尝试
使用

```
var_dump(file_put_contents($filename,$myHTML)) 
```

您可以检查您在其中写入了多少字节。
如果`false`返回，则表示您遇到权限问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:25:01.830

您必须先拥有对文件的写入权限，然后才能写入对权限的更改。

# javascript - 自定义事件外观 primefaces 时间表

> ID：12728215
> 
> 赞同：1
> 
> 时间：2012-10-04T13:19:38.860
> 
> 标签：javascript, primefaces

我正在使用 Primefaces Schedule 组件在我的网络应用程序中呈现事件。但我需要和他做个小把戏。对于每个呈现的事件，我需要显示一个带有事件详细信息的工具提示。使用 window.onload 监听器和一些 jquery 函数很容易显示当前日期框架的工具提示。但是，由于当我按下下一个和上一个按钮时，日程表使用 ajax 显示下一个日期帧，所以工具提示会崩溃。我试过使用：

```
window.addEventListener('DOMSubtreeModified', function(){
    // create bubble popups
    $('.fc-event-inner.fc-event-skin').CreateBubblePopup( options );
}, false); 
```

但似乎它需要太多处理并且页面变慢。还有其他方法可以将工具提示添加到呈现的每个事件中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T21:08:43.770

试试这样：

```
$(window).load(function() {
   $(document).delegate(".fc-event-inner", "mouseenter mouseover", function(event){
       $('.fc-event-inner.fc-event-skin').CreateBubblePopup( options );

   });
}); 
```

* * *

**更新**

我有这种感觉，他们在调度程序 js 文件中的某个`stopPropagation()`地方`mouseover`...

从位于*primefaces-3.4.1-sources\META-INF\resources\primefaces\schedule 的js 文件中查看以下代码*

```
/* Event Element Binding
-----------------------------------------------------------------------------*/

function lazySegBind(container, segs, bindHandlers) {
    container.unbind('mouseover').mouseover(function(ev) {
        var parent=ev.target, e,
            i, seg;
        while (parent != this) {
            e = parent;
            parent = parent.parentNode;
        }
        if ((i = e._fci) !== undefined) {
            e._fci = undefined;
            seg = segs[i];
            bindHandlers(seg.event, seg.element, seg);
            $(ev.target).trigger(ev);
        }
        ev.stopPropagation();
    });
} 
```

**所以...**

尝试删除`ev.stopPropagation();`

顺便说一下，调度器实际上是一个[FullCalendar jQuery 插件](http://arshaw.com/fullcalendar/)，所以如果你在谷歌上搜索*fullcalendar 工具提示，你可能会找到一些有用的信息。*

这是修改后的[Primefacess 3.4 jar](http://2shared.com/file/SOAvwgbL/primefaces-34.html)的链接（`stopPropagation`调度程序事件没有）

# c# - 将什么设置为 SMTP 服务器主机

> ID：12728220
> 
> 赞同：0
> 
> 时间：2012-10-04T13:19:55.997
> 
> 标签：c#, smtp

我正在使用带有 c# 的 Visual Studio。

我想向用户的外部电子邮件地址发送一封自动邮件。

为此，我发现了许多有用的代码片段。

但总的来说，我已经澄清了 SMTP.Host 之类的

```
Smtp.Host = "smtp.gmail.com"; // for example gmail smtp server 
```

现在写我只在本地主机工作。

那么代码是什么。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:38:12.030

您需要确定实际发送电子邮件的服务器。在您的示例中，Google 正在发送电子邮件（这也意味着您需要一个帐户来发送电子邮件）。如果您在本地主机上运行 SMTP 服务器，则 SMTP 服务器将是`localhost`.

基本上，SMTP 服务器（和凭据）是指*发送*电子邮件的机器。

# lucene - 弹性搜索 - 搜索资产可用性

> ID：12728221
> 
> 赞同：1
> 
> 时间：2012-10-04T13:19:57.073
> 
> 标签：lucene, elasticsearch

我想知道是否有办法使用弹性搜索来进行查询，只返回在特定日期范围内可用的对象？如何构造数据？

我需要的是查询一个给出开始和结束日期的数据库，并在开始日期和结束日期之间的整个持续时间内找到该期间可用的所有对象？

```
{object-available:
{
{start:'01/01/2012', end:'03/02/2012'},
{start:'05/05/2012', end:'31/12/2012'}
} 
```

搜索 01/01/2012 - 15/01/2012 之间可用的对象应该返回这个对象，但搜索 01/03/2012 - 01/04/2012 不应该返回它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-05T04:12:54.660

可以通过将可用性范围存储为[嵌套对象](http://www.elasticsearch.org/guide/reference/mapping/nested-type.html)，然后使用[嵌套查询](http://www.elasticsearch.org/guide/reference/query-dsl/nested-query.html)或[过滤器](http://www.elasticsearch.org/guide/reference/query-dsl/nested-filter.html)检查开始日期和结束日期是否都在所需的日期范围内来完成。[您可以使用带有两个包含Date Range Queries](http://www.elasticsearch.org/guide/reference/query-dsl/range-query.html)的 must 子句的[Bool Query](http://www.elasticsearch.org/guide/reference/query-dsl/bool-query.html)来执行此检查。例如：

```
# Delete old version to make sure new settings are applied
curl -XDELETE "localhost:9200/dates-test/"
echo
# Create a new index with proper mapping 
# See http://www.elasticsearch.org/guide/reference/index-modules/analysis/pathhierarchy-tokenizer.html
curl -XPUT "localhost:9200/dates-test" -d '{
    "mappings": {
        "doc": {
            "properties": {
                "name": {"type": "string"},
                "object-available": {
                    "type": "nested",
                    "properties" : {
                        "end" : {
                            "type" : "date"
                        },
                        "start" : {
                            "type" : "date"
                        }
                    }
                }
            }
        }
    }
}'
echo
# Put some test data
curl -XPUT "localhost:9200/dates-test/doc/1" -d '{
    "name": "Record 1",
    "object-available":[
        {"start":"2012-01-01", "end":"2012-02-03"},
        {"start":"2012-05-05", "end":"2012-12-31"}
    ]
}
'
curl -XPUT "localhost:9200/dates-test/doc/2" -d '{
    "name": "Record 2",
    "object-available":[
        {"start":"2012-02-01", "end":"2012-04-20"},
        {"start":"2012-04-25", "end":"2012-11-30"}
    ]
}
'
curl -XPOST "localhost:9200/dates-test/_refresh"
echo
echo Test for the range 2011-12-01 - 2012-02-05\. Should find only 1st record 
curl -XPOST "localhost:9200/dates-test/doc/_search?pretty=true" -d '{
    "query": {
        "nested": {
            "path": "object-available",
            "query": {
                "bool": {
                    "must": [
                        {
                            "range": {
                                "start": {
                                    "from": "2011-12-01",
                                    "to": "2012-02-05"
                                }
                            }
                        },
                        {
                            "range": {
                                "end": {
                                    "from": "2011-12-01",
                                    "to": "2012-02-05"
                                }
                            }
                        }

                    ]
                }
            }
        }
    }
}'
echo
echo Test for the range 2012-01-20 - 2012-12-01\. Should find only 2nd record 
curl -XPOST "localhost:9200/dates-test/doc/_search?pretty=true" -d '{
    "query": {
        "nested": {
            "path": "object-available",
            "query": {
                "bool": {
                    "must": [
                        {
                            "range": {
                                "start": {
                                    "from": "2012-01-20",
                                    "to": "2012-12-01"
                                }
                            }
                        },
                        {
                            "range": {
                                "end": {
                                    "from": "2012-01-20",
                                    "to": "2012-12-01"
                                }
                            }
                        }

                    ]
                }
            }
        }
    }
}'
echo
echo Test for the range 2012-04-01 - 2013-01-01\. Should find both record 
curl -XPOST "localhost:9200/dates-test/doc/_search?pretty=true" -d '{
    "query": {
        "nested": {
            "path": "object-available",
            "query": {
                "bool": {
                    "must": [
                        {
                            "range": {
                                "start": {
                                    "from": "2012-04-01",
                                    "to": "2013-01-01"
                                }
                            }
                        },
                        {
                            "range": {
                                "end": {
                                    "from": "2012-04-01",
                                    "to": "2013-01-01"
                                }
                            }
                        }

                    ]
                }
            }
        }
    }
}' 
```

# twitter-bootstrap - 在 Initializr.com 上的 Twitter Bootstrap 中发生了什么？

> ID：12728224
> 
> 赞同：0
> 
> 时间：2012-10-04T13:19:59.260
> 
> 标签：twitter-bootstrap, less, initializer

我刚刚用 Initializr 启动了一个新项目。首先，我意识到样式表的选项已被删除，后来我意识到 Twitter Bootstrap 也没有将 LESS 作为默认样式表。

我错过了什么？我真的很喜欢我没有任何配置的整个包。

我试图用谷歌搜索这个主题，但我找不到任何与之相关的东西。有人知道为什么 LESS 既不是 Bootstrap 也不是 Initializr 的一部分的背景？

亲切的问候，马文

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T15:07:48.450

这有点令人惊讶。我总是从一个 initializr/bootstrap 包开始，并且喜欢拥有 LESS 文件。

我在github上挖了一点，找到了[作者关于他为什么做出这个决定的评论](https://github.com/verekia/initializr/issues/65#issuecomment-8229564)：

他在评论中说：

> 我删除了 Less 选项主要是因为：
> 
> *   Less 比 Sass 更容易出错（大约 200 个未解决的问题）并且功能更少
> *   人们对 less.js 感到困惑，当使用客户端生产时，这是一个糟糕的坏习惯
> *   在这一点上，让人们使用 Less 就像让人们使用 Mootools 而不是 jQuery。Sass 赢得了这场战斗，让多个工具做同样的事情对我们不利。只用最好的，让社区尽可能地成长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:11:08.193

使用 Initializr > Bootstrap 仅包含 CSS 文件。从 Twitter Bootstrap 主页（蓝色大按钮）下载 ZIP 文件时也是如此。

但是：来自 GitHub Repo 的完整包仍然包含所有内容：[https](https://github.com/twbs/bootstrap) ://github.com/twbs/bootstrap - 您可以下载一个 zip 文件或从那里克隆它。它还包含 JS 测试和完整的文档等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T10:31:46.170

好的，对于所有真正喜欢它以前的方式的人，我找到了一个旧网站的镜像网站，包括更少的文档：

[http://bootstrap.lesscss.ru/scaffolding.html](http://bootstrap.lesscss.ru/scaffolding.html)

# c# - 使用自定义 ID 插入数据的 Code-First 实体框架

> ID：12728226
> 
> 赞同：11
> 
> 时间：2012-10-04T13:20:02.570
> 
> 标签：c#, .net-4.0, entity-framework-4.1, code-first

我在我的项目中使用代码优先 EF，并在插入具有自定义 ID 的数据时遇到问题。

当我尝试使用自定义 ID（例如 999）插入数据时，EF 会忽略它并将递增的 ID 插入表中。

我的模型：

```
public class Address
{
        [Key]
        public int Id { get; set; }
        public string FirstName { get; set; }
...
} 
```

如何解决这个问题？

**编辑：**

1) 如何从 N 开始递增，而不是从 0 开始？

2）如果我没有指定自定义 ID，DB 必须增加并插入自己的。如果我指定自定义 ID，DB 必须插入它。可能吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-04T13:30:32.983

您可以使用以下属性

```
[Key, DatabaseGenerated(DatabaseGeneratedOption.None)] 
```

在你的班级的钥匙上或使用 fluentAPI

```
modelBuilder.Entity<Address>().Property(p => p.Id).HasDatabaseGeneratedOption(DatabaseGeneratedOption.None); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-03-05T10:47:48.557

在**EF Core**中，您可以使用：

```
builder.Property(x => x.Id).ValueGeneratedNever(); 
```

或者

```
[DatabaseGenerated(DatabaseGeneratedOption.None)] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-26T20:58:01.423

它实际上是`OnModelCreating`在`DbContext`课堂上。您可以设置序列号。通过在“请参阅此处”中添加以下内容，从您开始和递增`DbContext class` ，例如：[https ://ef.readthedocs.io/en/staging/modeling/relational/sequences.html](https://ef.readthedocs.io/en/staging/modeling/relational/sequences.html)

```
 class MyContext : DbContext
    {
        public DbSet<Order> Orders { get; set; }

        protected override void OnModelCreating(ModelBuilder modelBuilder)
        {
            modelBuilder.HasSequence<int>("OrderNumbers", schema: "shared")
                .StartsAt(1000)
                .IncrementsBy(5);

            //Once a sequence is introduced, you can use it to generate values for properties in your model. For example, you can use Default Values to insert the next value from the sequence.
            modelBuilder.Entity<Order>()
                .Property(o => o.OrderNo)
                .HasDefaultValueSql("NEXT VALUE FOR shared.OrderNumbers");
        }
    } 
```

# jquery - 从 json 填充数据表头值

> ID：12728232
> 
> 赞同：0
> 
> 时间：2012-10-04T13:20:42.007
> 
> 标签：jquery, json, datatable

我有如下所示的json

```
{
    "aaData": [

        [
         "Name",
         "Description",
         "Date"
        ],
        [
            {
                "displayValue": "Home Page",
                "link": "http://somelink.com"
            },
            "London",
            "1983"
        ],
        [
            {
                "displayValue": "Backlog",
                "link": "http://BacklogApp.com"
            },
            "Paris",
            "1999"
        ]
    ]
} 
```

现在在 js 中，我使用 sAjaxSource 填充表，如下所示

```
$(document).ready(function() {
        $('#genericTable').dataTable( {
            "bProcessing": true,
            "sAjaxSource": "resources/json/" + key + ".json",
            "sPaginationType"   : "full_numbers",
            "bJQueryUI"         : true,
            "bRetrieve"         : true,
            "bPaginate"         : true,
            "bSort"             : true,
            "aaSorting"  : [[ 3, "desc" ]],
            "iDisplayLength"    : 50,
            "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) {
                if(typeof aData[0] != 'string'){
                    $('td:eq(0)', nRow).html( '<a href="' + aData[0]['link'] +'" >'  +
                            aData[0]['displayValue'] + '</a>');
                }
            }
        }).columnFilter({ sPlaceHolder: "head:after",
            aoColumns: [ { type: "text" },
                         { type: "text" },
                         null
                       ]
        }); 
    }); 
```

我可以在 jsp 中使用硬编码的标题名称填充表中的数据，但我也想从 json 填充标题名称。（名称、描述、日期）。我怎样才能做到这一点。

任何想法？？？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-03T19:18:24.713

可以在数据表初始化之前执行调用，以便您已经拥有列和数据。根据我的经验，您必须在“aoColumns”选项中定义列。

这是我的列标题的示例

```
"aoColumns" : [
                    { "sTitle" : "Status" },
                    { "sTitle" : "Name" },
                    { "sTitle" : "Url" },
                    { "sTitle" : "Page Views" },
                    { "sTitle" : "Leads" },
                    { "sTitle" : "Conv. Rate" },
                    { "sTitle" : "Actions" }
                ], 
```

所以mb这样写你的json，然后在ajax回调中将它传递给初始化

```
json = {
   "aoColumns": [ 
                   {"sTitle" : "Column Number 1"},
                   ....
                 ],
    "aaData": [ 
                 ....
                 .....
               ]
};

columns = json['aoColumns'];
data = json['aaData']; 
```

# c# - 赋值语句不起作用

> ID：12728235
> 
> 赞同：-3
> 
> 时间：2012-10-04T13:21:19.007
> 
> 标签：c#, winforms

我有以下代码块：

```
 Label[] TagLabels = { labelCITag, labelCATag, labelCAuthTag, labelCLTag, labelCCTag, labelOther1Tag, labelOther2Tag, labelOther3Tag, labelOther4Tag };
        TextBox[] TagTextBoxes = { textBoxCITag, textBoxCATag, textBoxCAuthTag, textBoxCLTag, textBoxCCTag, textBoxOther1Tag, textBoxOther2Tag, textBoxOther3Tag, textBoxOther4Tag };
        for (int i = 0; i < TagTextBoxes.Length; i++)
        {
            if (TagTextBoxes[i].Text == "")
                TagLabels[i].Visible = false;
            else
                TagLabels[i].Visible = true;
        } 
```

该代码遍历 TextBoxes 并根据 TextBoxes 是否为空来使标签可见/不可见。

在调试窗口中，我可以看到代码执行了 else 条件，但是当我将鼠标移到属性上时，它仍然显示为 false，并且在即时窗口中得到确认。

谁能告诉我为什么会发生这种疯狂的事情？

![在此处输入图像描述](../Images/884e31a2067a0475769e145cc4c2cb42.png)

![在此处输入图像描述](../Images/c0ba1d6c59adb295370e4e3c8572bb23.png)

![在此处输入图像描述](../Images/b0218a8f00f070b9d3fb79f6e4a8de7f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T13:38:36.800

如果你使用 Reflector 查看 Control.Visible 的实现，它的 getter 会这样做：

```
internal virtual bool GetVisibleCore()
{
    if (!this.GetState(0x2))
    {
        return false;
    }
    return ((this.ParentInternal == null) || this.ParentInternal.GetVisibleCore());
} 
```

但是，它的设置器要复杂得多。getter 和 setter 不对称。

.Visible 属性可能不仅仅返回您设置它的最后一个值，而是返回控件的当前状态。由于您在调试时更改了其属性，因此您尚未允许控件更新，因此它们当前不可见。

如果您允许代码运行以更新窗口，则状态应变为可见。

您也可以通过在更改 Visible 属性后立即放置 Application.DoEvents() 来测试这一点（但不要将 Application.DoEvents() 用于测试以外的任何事情 - 这太可怕了。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:30:08.140

尝试这个：

```
Label[] TagLabels = { labelCITag, labelCATag, labelCAuthTag, labelCLTag, labelCCTag, labelOther1Tag, labelOther2Tag, labelOther3Tag, labelOther4Tag };
TextBox[] TagTextBoxes = { textBoxCITag, textBoxCATag, textBoxCAuthTag, textBoxCLTag, textBoxCCTag, textBoxOther1Tag, textBoxOther2Tag, textBoxOther3Tag, textBoxOther4Tag };
for (int i = 0; i < TagTextBoxes.Length; i++)
{
    if (string.IsNullOrEmpty(TagTextBoxes[i].Text))
        TagLabels[i].Visible = false;
    else
        TagLabels[i].Visible = true;
} 
```

我已经用这个小改动重新创建了你的代码，如下所示，它对我有用：

![党卫军](../Images/a7bfb5973b9d365cfbe57520b477f250.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:33:41.270

如果一个控件设置为可见，如果它的父控件不可见，它仍然是不可见的。因此，如果它位于您尚未显示的表单上，则在显示表单之前它们不会显示。

# pervasive - Pervasive PSQL 10 - 更新 DDF

> ID：12728242
> 
> 赞同：0
> 
> 时间：2012-10-04T13:21:47.920
> 
> 标签：pervasive, pervasive-sql

我正在使用 Pervasive PSQL Server 10，我需要更新我的 DDF 文件，因为某些组件在访问使用以前版本创建的数据库时出现问题。

DDFBuilder 还说：“检测到可扩展 SQL v3.00 数据字典文件 (DDF)。DDFBuilder 不支持使用 v3.00 DDF 的操作。请使用 Pervasive 的可扩展 SQL v4.00 DDF 转换实用程序将 DDF 转换为 V4.00。 "

Pervasive 的网站上没有此类实用程序。它似乎是 PSQL 7 的一部分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:19:04.773

您唯一的选择是创建一组新的 DDF 并使用它们。您可以通过创建指向没有 DDF 的目录的 PSQL 数据库来创建一组新的空 DDF。
您将需要在新的 DDF 中重新创建表条目。
我的建议是在新目录中创建 DDF，备份旧 DDF，将新 DDF 复制到旧 DDF 所在的目录，然后使用 CREATE TABLE 语句或 DDF Builder 创建新表条目。

# sql-server - 使用 INFORMATION_SCHEMA.COLUMNS 视图检索大小整数值 SQL Server 表

> ID：12728243
> 
> 赞同：0
> 
> 时间：2012-10-04T13:21:49.520
> 
> 标签：sql-server, sql-server-2000

鉴于此表：

![在此处输入图像描述](../Images/cb5e9f2c7d3a3f9cb92564a60b58191d.png)

这个查询：

```
SELECT TABLE_NAME, COLUMN_NAME, DATA_TYPE, CHARACTER_MAXIMUM_LENGTH,
  NUMERIC_PRECISION, IS_NULLABLE
FROM
  INFORMATION_SCHEMA.COLUMNS 
WHERE
  TABLE_NAME='PARAMETERS'
ORDER BY TABLE_NAME, ORDINAL_POSITION 
```

我得到这个结果：

![在此处输入图像描述](../Images/9f16543ea11a47d34f491fba3913f646.png)

如何检索整数列的大小？对于`PAR_ID`（长度 = 2），我得到`NUMERIC_PRECISION`5 分。

的定义`NUMERIC_PRECISION`是“近似数值数据、精确数值数据、整数数据或货币数据的精度。否则，返回 NULL”。但是为什么 smallint(2) 的值为 5，例如 float(8) 的值为 53？这个值是什么意思？

更新：

感谢@Ed_Harper：长度和精度之间存在差异。长度是用于存储数字的字节数。精度是数字中的位数。见：http: [//goo.gl/EOTyC](http://goo.gl/EOTyC)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:32:19.713

对于 SQL 2000，试试这个（未经测试）：

```
SELECT c.name AS ColumnName, TYPE_NAME(c.xusertype) AS DataType, 
    c.length, c.PREC, c.scale
FROM sysobjects t
    JOIN syscolumns c ON t.id = c.id
WHERE t.name = 'PARAMETERS' 
```

从 SQL 2005+ 尝试：

尝试 sys.columns 代替...

```
SELECT c.name AS ColumnName, ty.name AS DataType, c.max_length, 
    c.precision, c.scale
FROM sys.tables t
    JOIN sys.columns c ON t.object_id = c.object_id
    JOIN sys.types ty ON c.system_type_id = ty.system_type_id
WHERE t.name = 'PARAMETERS' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:33:59.043

试试这个：

```
SELECT c.TABLE_NAME, c.COLUMN_NAME, c.DATA_TYPE, c.CHARACTER_MAXIMUM_LENGTH,
  c.NUMERIC_PRECISION, c.IS_NULLABLE,sc.max_length
FROM
  INFORMATION_SCHEMA.COLUMNS c inner join sys.columns sc
  on c.TABLE_NAME=object_name(sc.object_id)
WHERE
  c.TABLE_NAME='PARAMETERS'
ORDER BY TABLE_NAME, ORDINAL_POSITION 
```

SQL 服务器 2000

```
 SELECT distinct c.TABLE_NAME, c.COLUMN_NAME, c.DATA_TYPE, c.CHARACTER_MAXIMUM_LENGTH,
  c.NUMERIC_PRECISION, c.IS_NULLABLE,sc.length
FROM
  INFORMATION_SCHEMA.COLUMNS c inner join syscolumns sc

  on c.TABLE_NAME=object_name(sc.id)
WHERE
  c.TABLE_NAME='PARAMETERS' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-09T08:18:04.877

int 系列成员的存储大小是固定的，如此[处](http://msdn.microsoft.com/en-us/library/ms187745.aspx)所述（链接适用于 SQL 2012，但自 SQL 2000 以来没有改变）：

```
tinyint  = 1 byte
smallint = 2 bytes
int      = 4 bytes
bigint   = 8 bytes 
```

将此信息输入查询的最简单方法是将其硬编码在 case 语句中。

`NUMERIC_PRECISION`- 确定可以存储在数字数据类型中的小数位数的总数。这个值是 5 `smallint`， 10`int`等等，因为这是每个数据类型可以存储的最长的数字序列。

**编辑**

显示使用 case 语句的示例查询。请注意，数据类型列表不完整。

```
SELECT TABLE_NAME, COLUMN_NAME, CHARACTER_MAXIMUM_LENGTH,
  NUMERIC_PRECISION, IS_NULLABLE,DATA_TYPE,
  CASE DATA_TYPE WHEN  'tinyint'  THEN 1
                 WHEN  'smallint' THEN 2
                 WHEN  'int'      THEN 4
                 WHEN  'bigint'   THEN 8
                 WHEN  'datetime' THEN 8
                 WHEN  'nvarchar' THEN CHARACTER_MAXIMUM_LENGTH * 2
                 WHEN  'nchar'    THEN CHARACTER_MAXIMUM_LENGTH * 2
                 WHEN  'varchar'  THEN CHARACTER_MAXIMUM_LENGTH
                 WHEN  'char'     THEN CHARACTER_MAXIMUM_LENGTH
                 ELSE  NULL
  END AS column_size_bytes
FROM
  INFORMATION_SCHEMA.COLUMNS 
  order by data_type 
```

# c# - 从 TreeView C# 自动更新列表

> ID：12728244
> 
> 赞同：0
> 
> 时间：2012-10-04T13:21:54.170
> 
> 标签：c#, winforms, events, treeview

我想询问在这种情况下我应该如何实施解决方案的意见。

```
DataItem A = someDataItem;
DataItem B = someDataItem;
DataItem C = someDataItem;
DataItem D = someDataItem;

//CreateNode : this function convert the DataItem into TreeNode
TreeNode nodeA = CreateNode(A);
TreeNode nodeB = CreateNode(B);
TreeNode nodeC = CreateNode(C);
TreeNode nodeD = CreateNode(D);

//add the nodes to a TreeView component here
treeView.Nodes.Add(nodeA);
treeView.Nodes.Add(nodeB);
treeView.Nodes.Add(nodeC);
treeView.Nodes.Add(nodeD);

List<DataItem> specialWatchedNodeList = new List<DataItem>();
specialWatchedNode.Add(nodeA);
specialWatchedNode.Add(nodeD); 
```

我有`treeView`包含所有节点的。但是，我只有其中一些我想被监视（被监视）=>（`nodeA`和`nodeD`）。`nodeA`如果在和`nodeD`中发生任何事情`treeView`，我应该如何更新`nodeA`和`nodeD`在 中`specialWatchedNodeList`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:37:57.517

通过在 DataItem 类上实现 INotifyPropertyChanged 接口，您可以在 DataItem 更改时接收事件。

[http://msdn.microsoft.com/en-us/library/ms743695(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/ms743695%28v=vs.100%29.aspx)

您需要声明*PropertyChanged*事件，然后创建*OnPropertyChanged*方法。对于您想要更改通知的每个属性，只要属性更新，您就调用*OnPropertyChanged 。*

# sql - Access 2007 改进查询/vba 以按链表分组

> ID：12728248
> 
> 赞同：4
> 
> 时间：2012-10-04T13:22:08.087
> 
> 标签：sql, vba, ms-access, office-2007

我收到一些表格，其中有按链接列表分组的元素，但我很难处理它。

该功能可以正常工作，但我经常被问到自从任务调度程序启动后它的宏在哪里或有一些内存问题。

我使用以下代码找出 idGroup（翻译成英文），我想知道是否有办法改进它，特别是它的速度，因为 30 000 行和大约 2500 个组需要一个小时......（这就是为什么我使用 VBA 来查看进度...）

```
'Simple example
'idGroup,id2,id1
'6338546,14322882,13608969
'6338546,13608969,13255363
'6338546,6338546,14322882
'6338546,11837926,11316332
'6338546,12297571,11837926
'6338546,13255363,12811071
'6338546,12811071,12297571
'6338546,7610194,7343817
'6338546,7935943,7610194
'6338546,8531387,7935943
'6338546,6944491,6611041
'6338546,7343817,6944491
'6338546,9968746,9632204
'6338546,10381694,9968746
'6338546,6611041,0
'6338546,8920224,8531387
'6338546,9632204,8920224
'6338546,11316332,10941093
'6338546,10941093,10381694

Public Function GetidGroup()
    'first id1 is always 0
    sql = "SELECT idGroup, id2, id1 FROM TABLE_WITH_LINKED_LIST WHERE id1='0' ORDER BY id2 DESC"
    Dim rs As Recordset
    Dim uidLikedList As String, id2 As String, id1 As String

    Set rs = CurrentDb.OpenRecordset(sql)
    Dim total As Long
    Dim idGroup As String
    Dim incrément As Long, progress As Double

    total = rs.RecordCount
    incrément = 1

    While Not rs.EOF
        progress = Math.Round(100 * incrément / total, 2)

        'Print in order to avoir freezing
        Debug.Print progress

        If rs.Fields("idGroup") = "" Then
            id2 = rs.Fields("id2")

            idGroup = precedentUid(id2)

            rs.Edit
            rs.Fields("idGroup") = idGroup
            rs.Update
        End If

        incrément = incrément + 1
        rs.MoveNext
    Wend

    rs.Close
    Set rs = Nothing
    GetidGroup = total
End Function

'Recursive function
'Deepest so far is about 62 calls
Public Function precedentUid(id2 As String) As String
    sql = "SELECT idGroup, id2 FROM TABLE_WITH_LINKED_LIST WHERE id1 = '" & id2 & "'"
    Dim rs As Recordset
    Dim precedentid2 As String
    Dim idGroup As String
    Dim ret As String

    Set rs = CurrentDb.OpenRecordset(sql)
    If rs.EOF Then
        rs.Close
        Set rs = Nothing
        precedentUid = id2
    Else
        'Some records have several references
        '56 impacted records  :
        'TODO : Give the min id2 to the group
        ret = "-1"
        While Not rs.EOF           
            If rs.Fields("idGroup") = "" Then
                precedentid2 = rs.Fields("id2")
                idGroup = precedentUid(precedentid2)

                If ret = "-1" Or CLng(ret) > CLng(idGroup) Then
                    ret = idGroup
                End If

                'Debug.Print id2 & " " & precedentid2 & " " & idGroup

                rs.Edit
                    rs.Fields("idGroup") = idGroup
                rs.Update
            End If
            rs.MoveNext
        Wend
        rs.Close
        Set rs = Nothing
        precedentUid = ret
    End If
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-28T15:53:10.203

一些建议：

1.  您正在打开大量记录集（每次调用`precedentUid`）。`idGroup`相反，请考虑使用按+排序的单个记录集`id1`并向上或向下搜索适当的值。
2.  由于您总是在`idGroup`+上搜索`id1`，我建议将其设为主键。然后，您将能够使用该`Seek`方法进行更快的搜索。
3.  一旦有了主键，就不需要编辑单个记录集，而且加载速度会更快。当您必须更新`idGroup`时，将 SQL 语句与`CurrentDb.Execute`.
4.  `idGroup`缓存在 a中的搜索结果`Dictionary`（参考**Microsoft Scripting Runtime** in **Tools** -> **References**）。这样，您就不会在递归时重复搜索。
5.  您的示例数据似乎都是数字，但您正在从记录集中检索它们作为字符串。基础数据类型应该是`Long`，而不是`Text`。如果您对此无法控制，我会考虑创建一个具有适当数据类型的临时表。

# java - 电子邮件应用程序中的异常

> ID：12728249
> 
> 赞同：1
> 
> 时间：2012-10-04T13:22:12.960
> 
> 标签：java, servlets

在用 java 编写电子邮件应用程序时，我得到了这个异常：

```
javax.mail.MessagingException: Could not connect to SMTP host: mail.simsystech.com, port: 8443;
  nested exception is:
    java.net.ConnectException: Connection timed out: connect
    at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1934)
    at com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:638)
    at javax.mail.Service.connect(Service.java:317) 
```

＆这是我的代码（按照本教程[链接](http://www.tutorialspoint.com/java/java_sending_email.htm)）：

```
 Properties properties = System.getProperties();
          properties.put("mail.smtp.starttls.enable", "true");
          properties.put("mail.transport.protocol", "smtp");
          properties.setProperty("mail.smtp.host", host);
//        properties.put("mail.smtp.port", "8443");
          properties.setProperty("mail.smtp.auth", "true");
          properties.setProperty("mail.smtp.starttls.enable", "true");

          final String user = "abc@xyz.com";
          final String password = "*****";

          Authenticator authenticator = new Authenticator() {
                protected PasswordAuthentication getPasswordAuthentication() {
                    return new PasswordAuthentication(user,password);
                }
            };

          Session session = Session.getDefaultInstance(properties,authenticator);

          try{
              MimeMessage message = new MimeMessage(session);

              message.setFrom(new InternetAddress(sid));

              message.addRecipient(Message.RecipientType.TO,
                                       new InternetAddress(rid));

              message.setSubject(subject);

              BodyPart messageBodyPart = new MimeBodyPart();

              messageBodyPart.setText(text);

              Multipart multipart = new MimeMultipart();

              multipart.addBodyPart(messageBodyPart);

              messageBodyPart = new MimeBodyPart();
//            String filename = "file.txt";
              DataSource source = new FileDataSource(file);
              messageBodyPart.setDataHandler(new DataHandler(source));
              messageBodyPart.setFileName(file);
              multipart.addBodyPart(messageBodyPart);

              // Send the complete message parts
              message.setContent(multipart );

              // Now set the actual message
//            message.setText(text);

              // Send message
              Transport.send(message);
              System.out.println("Sent message successfully....");
           }catch (MessagingException ex) {
              ex.printStackTrace();
           } 
```

虽然我已经浏览了这些 stackoverflow 的[链接](https://stackoverflow.com/questions/1713116/javamail-exchange-authentication)：[1、2](http://www.tutorialspoint.com/java/java_sending_email.htm)

知道为什么我会收到此错误... :( :(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T13:28:30.127

> 知道为什么我会收到此错误...

两个最明显的潜在原因是：

*   您的 SMTP 主机的主机名和/或端口号错误。如果*该*主机上没有使用*该*端口运行的 SMTP 服务，那么您将不得不使用其他东西。

*   您的计算机无法通过该端口连接到该主机，因为防火墙阻止了您的访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:39:24.100

假设您的连接没有出现网络问题（您可以使用 telnet 来确保它）然后...

问题一定是因为`properties.setProperty("mail.smtp.starttls.enable", "true");`

根据[com.sun.mail.smtp](http://javamail.kenai.com/nonav/javadocs/com/sun/mail/smtp/package-summary.html)的 javadoc ，

> 如果为 true，则在发出任何登录命令之前启用使用 STARTTLS 命令（如果服务器支持）将连接切换到受 TLS 保护的连接。请注意，必须配置适当的信任库，以便客户端信任服务器的证书。默认为假。

下面说`mail.smtp.starttls.required`

> 如果为 true，则需要使用 STARTTLS 命令。如果服务器不支持 STARTTLS 命令，或者命令失败，则连接方法将失败。默认为假。

如果您的提供商不支持，请尝试删除上述属性。

# upload - wsadmin 上传文件到war

> ID：12728250
> 
> 赞同：0
> 
> 时间：2012-10-04T13:22:13.873
> 
> 标签：upload, websphere, websphere-7, wsadmin

是否可以使用 wsadmin (jacl/jython) 将文件上传到 webapp 模块？（fe app.war/custom/uploadedfile.txt）？我将 wsadmin 用作独立设备，并希望在启动应用程序之前执行一些安装后步骤。

网络球 7

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T08:10:31.430

您可以使用“AdminApp 更新文件”添加/替换文件。这是 AdminApp 的文档：

[http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.nd.doc/info/ae/ae/rxml_adminapp.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.nd.doc/info/ae/ae/rxml_adminapp.html)

..及其选项：

[http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.nd.doc/info/ae/ae/rxml_taskoptions.html](http://pic.dhe.ibm.com/infocenter/wasinfo/v7r0/topic/com.ibm.websphere.nd.doc/info/ae/ae/rxml_taskoptions.html)

这是一个例子：

```
AdminApp.update('TheAppName', 'file', ['-operation', 'add', '-contents', '/path/to/your/local/file', '-contenturi', 'path/within/the_app']) 
```

# android - Actionbarsherlock 底栏

> ID：12728252
> 
> 赞同：1
> 
> 时间：2012-10-04T13:22:20.927
> 
> 标签：android, actionbarsherlock

如何在显示屏**底部**显示第二个操作栏？我希望能够在应用程序运行时根据需要从代码中隐藏底部栏。

我希望始终显示操作按钮，不仅在顶部没有空间的情况下（我隐藏了顶部操作栏，只有选项卡在那里）。顶部和底部栏应该是独立的。

图片中的底栏有：http: [//goo.gl/pFvHI](http://goo.gl/pFvHI)

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:20:47.037

就其本身而言，无法拆分操作栏，因为 android 根据屏幕尺寸将其作为个案处理。看看这里：[有拆分操作栏..](https://stackoverflow.com/questions/10199845/have-the-split-actionbar-display-twice-as-many-icons)

大多数具有这种行为的应用程序都有在屏幕上显示的自定义视图。您可以创建一个具有添加按钮和隐藏或显示视图的方法的线性布局，并且只需在这些视图上设置一个点击侦听器。甚至谷歌也这样做了在他们的一些应用程序上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:27:10.977

是的，可以`Options Menu`使用`SHOW_AS_ACTION_IF_ROOM`for 菜单项创建。

像这样

```
@Override
public boolean onCreateOptionsMenu(Menu menu) { 
     int actionRoom = MenuItem.SHOW_AS_ACTION_IF_ROOM;
     menu.add(Menu.NONE, ACCOUNTS_MENU, Menu.NONE, "Search")
                .setIcon(R.drawable.ic_menu_account_list)
                .setAlphabeticShortcut('a')
                .setShowAsAction( accountRoom );

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-15T14:55:54.670

在您的 AndroidManifest 中使用：

```
<activity
         android:name=".MyActivity"
         android:uiOptions="splitActionBarWhenNarrow"
         android:label="@string/app_name" /> 
```

这里的关键是`uiOptions="splitActionBarWhenNarrow"`。

# android - 在 Android 中，如何以编程方式在 dp 中设置边距？

> ID：12728255
> 
> 赞同：499
> 
> 时间：2012-10-04T13:22:22.767
> 
> 标签：android, android-button

在[这个](https://stackoverflow.com/questions/2481455/set-margins-in-a-linearlayout-programmatically)、[这个](https://stackoverflow.com/questions/7981456/setting-buttons-margin-programmatically)和[这个](https://stackoverflow.com/questions/8312215/adding-margins-to-button-object-programatically)线程中，我试图找到关于如何在单个视图上设置边距的答案。但是，我想知道是否没有更简单的方法。我将解释为什么我不想使用这种方法：

我有一个扩展按钮的自定义按钮。如果背景设置为默认背景以外的其他内容（通过调用`setBackgroundResource(int id)`或`setBackgroundDrawable(Drawable d)`），我希望边距为 0。如果我称之为：

```
public void setBackgroundToDefault() {
    backgroundIsDefault = true;
    super.setBackgroundResource(android.R.drawable.btn_default);
    // Set margins somehow
} 
```

我希望将边距重置为 -3dp（我已经[在这里](https://stackoverflow.com/questions/4914039/margins-of-a-linearlayout-programmatically-with-dp)阅读了如何从像素转换为 dp，所以一旦我知道如何在 px 中设置边距，我就可以自己管理转换）。但是由于这是在`CustomButton`类中调用的，因此父级可以从 LinearLayout 到 TableLayout 不等，我宁愿不让他得到他的父级并检查该父级的实例。我想，这也将是非常低效的。

另外，当调用 (使用 LayoutParams) 时`parentLayout.addView(myCustomButton, newParams)`，我不知道这是否将它添加到正确的位置（但是没有尝试过），比如一排五个的中间按钮。

**问题：除了使用 LayoutParams 之外**，还有什么更简单的方法可以以编程方式设置单个 Button 的边距？

 **编辑：我知道 LayoutParams 方式，但我想要一个避免处理每种不同容器类型的解决方案：

```
ViewGroup.LayoutParams p = this.getLayoutParams();
    if (p instanceof LinearLayout.LayoutParams) {
        LinearLayout.LayoutParams lp = (LinearLayout.LayoutParams)p;
        if (_default) lp.setMargins(mc.oml, mc.omt, mc.omr, mc.omb);
        else lp.setMargins(mc.ml, mc.mt, mc.mr, mc.mb);
        this.setLayoutParams(lp);
    }
    else if (p instanceof RelativeLayout.LayoutParams) {
        RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams)p;
        if (_default) lp.setMargins(mc.oml, mc.omt, mc.omr, mc.omb);
        else lp.setMargins(mc.ml, mc.mt, mc.mr, mc.mb);
        this.setLayoutParams(lp);
    }
    else if (p instanceof TableRow.LayoutParams) {
        TableRow.LayoutParams lp = (TableRow.LayoutParams)p;
        if (_default) lp.setMargins(mc.oml, mc.omt, mc.omr, mc.omb);
        else lp.setMargins(mc.ml, mc.mt, mc.mr, mc.mb);
        this.setLayoutParams(lp);
    }
} 
```

因为`this.getLayoutParams();`返回 a `ViewGroup.LayoutParams`，它没有属性`topMargin`, `bottomMargin`, `leftMargin`, `rightMargin`。您看到的 mc 实例只是一个`MarginContainer`包含偏移 (-3dp) 边距和 (oml, omr, omt, omb) 和原始边距 (ml, mr, mt, mb) 的实例。

* * *

## 回答 #1

> 赞同：925
> 
> 时间：2012-10-04T13:36:01.627

您应该使用`LayoutParams`设置按钮边距：

```
LayoutParams params = new LayoutParams(
        LayoutParams.WRAP_CONTENT,      
        LayoutParams.WRAP_CONTENT
);
params.setMargins(left, top, right, bottom);
yourbutton.setLayoutParams(params); 
```

根据您使用的布局，您应该使用`RelativeLayout.LayoutParams`或`LinearLayout.LayoutParams`。

并将您的 dp 度量转换为像素，请尝试以下操作：

```
Resources r = mContext.getResources();
int px = (int) TypedValue.applyDimension(
        TypedValue.COMPLEX_UNIT_DIP,
        yourdpmeasure, 
        r.getDisplayMetrics()
); 
```

* * *

## 回答 #2

> 赞同：278
> 
> 时间：2014-03-23T22:32:13.910

LayoutParams - 不工作！！！

需要使用类型：MarginLayoutParams

```
MarginLayoutParams params = (MarginLayoutParams) vector8.getLayoutParams();
params.width = 200; params.leftMargin = 100; params.topMargin = 200; 
```

MarginLayoutParams 的代码示例：

[http://www.codota.com/android/classes/android.view.ViewGroup.MarginLayoutParams](http://www.codota.com/android/classes/android.view.ViewGroup.MarginLayoutParams)

* * *

## 回答 #3

> 赞同：142
> 
> 时间：2016-02-04T11:34:20.710

有史以来最好的方式：

```
private void setMargins (View view, int left, int top, int right, int bottom) {
    if (view.getLayoutParams() instanceof ViewGroup.MarginLayoutParams) {
        ViewGroup.MarginLayoutParams p = (ViewGroup.MarginLayoutParams) view.getLayoutParams();
        p.setMargins(left, top, right, bottom);
        view.requestLayout();
    }
} 
```

如何调用方法：

```
setMargins(mImageView, 50, 50, 50, 50); 
```

希望这会帮助你。

* * *

## 回答 #4

> 赞同：46
> 
> 时间：2015-08-16T19:49:33.763

```
int sizeInDP = 16;

int marginInDp = (int) TypedValue.applyDimension(
            TypedValue.COMPLEX_UNIT_DIP, sizeInDP, getResources()
                    .getDisplayMetrics()); 
```

然后

```
layoutParams = myView.getLayoutParams()
layoutParams.setMargins(marginInDp, marginInDp, marginInDp, marginInDp);
myView.setLayoutParams(layoutParams); 
```

或者

```
LayoutParams layoutParams = new LayoutParams...
layoutParams.setMargins(marginInDp, marginInDp, marginInDp, marginInDp);
myView.setLayoutParams(layoutParams); 
```

* * *

## 回答 #5

> 赞同：23
> 
> 时间：2017-11-29T17:38:28.973

# 这是最近更新的多合一答案：

**第 1 步，更新保证金**

基本思想是获取利润然后更新它。更新将自动应用，您无需重新设置。要获取布局参数，只需调用此方法：

```
LayoutParams layoutParams = (LayoutParams) yourView.findViewById(R.id.THE_ID).getLayoutParams(); 
```

来自`LayoutParams`您的视图布局。如果视图来自线性布局，则需要导入`LinearLayout.LayoutParams`. 如果您使用相对布局、导入`LinearLayout.LayoutParams`等。

现在，如果您使用`Layout_marginLeft`,`Right`等设置边距，您需要以这种方式更新边距

```
layoutParams.setMargins(left, top, right, bottom); 
```

如果您使用 new 设置边距`layout_marginStart`，则需要以这种方式更新边距

```
layoutParams.setMarginStart(start);
layoutParams.setMarginEnd(end); 
```

**第 2 步，更新 dp 中的边距**

以上两种更新边距的方法都是以像素为单位更新的。您需要将 dp 转换为像素。

```
float dpRatio = context.getResources().getDisplayMetrics().density;
int pixelForDp = (int)dpValue * dpRatio; 
```

现在将计算值放入上述保证金更新函数中，您应该已经设置好了

* * *

## 回答 #6

> 赞同：15
> 
> 时间：2021-07-01T08:46:15.457

使用[Android KTX](https://android.github.io/android-ktx/core-ktx/androidx.view/android.view.-view-group/update-layout-params.html)，您可以执行以下操作：

```
yourView.updateLayoutParams<ViewGroup.MarginLayoutParams> {
   setMargins(0, 0, 0, 0)
} 
```

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2019-09-23T12:33:50.627

在 Kotlin 中，它看起来像这样：

```
val layoutParams = (yourView?.layoutParams as? MarginLayoutParams)
layoutParams?.setMargins(40, 40, 40, 40)
yourView?.layoutParams = layoutParams 
```

* * *

## 回答 #8

> 赞同：10
> 
> 时间：2015-04-01T00:25:35.397

layout_margin 是视图子告诉其父视图的约束。然而，选择是否允许保证金是父母的角色。基本上通过设置 android:layout_margin="10dp"，孩子请求父视图组分配比其实际大小**大 10dp 的空间。**（另一方面，padding="10dp" 表示子视图会将自己的内容**缩小 10dp**。）

因此，**并非所有 ViewGroup 都尊重 margin**。最臭名昭著的例子是列表视图，其中项目的边距被忽略。在调用`setMargin()`LayoutParam 之前，您应该始终确保当前视图位于支持边距（例如 LinearLayouot 或 RelativeLayout）的 ViewGroup 中，并将结果`getLayoutParams()`转换为您想要的特定 LayoutParams。（`ViewGroup.LayoutParams`甚至没有`setMargins()`方法！）

下面的函数应该可以解决问题。**但是，请确保将 RelativeLayout 替换为父视图的类型。**

```
private void setMargin(int marginInPx) {
    RelativeLayout.LayoutParams lp = (RelativeLayout.LayoutParams) getLayoutParams();
    lp.setMargins(marginInPx,marginInPx, marginInPx, marginInPx);
    setLayoutParams(lp);
} 
```

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2015-05-26T07:32:46.143

此方法可让您在**DP中设置****边距**

 **```
public void setMargin(Context con,ViewGroup.LayoutParams params,int dp) {

        final float scale = con.getResources().getDisplayMetrics().density;
        // convert the DP into pixel
        int pixel =  (int)(dp * scale + 0.5f); 

        ViewGroup.MarginLayoutParams s =(ViewGroup.MarginLayoutParams)params;
        s.setMargins(pixel,pixel,pixel,pixel);

        yourView.setLayoutParams(params);
} 
```

**更新**

您可以更改适合您需要的参数。

* * *

## 回答 #10

> 赞同：8
> 
> 时间：2019-05-29T07:47:26.633

**您可以使用此方法并放置像 20 这样的静态维度，它会根据您的设备进行转换**

```
 public static int dpToPx(int dp) 
      {
          float scale = context.getResources().getDisplayMetrics().density;
       return (int) (dp * scale + 0.5f);
  } 
```

* * *

## 回答 #11

> 赞同：7
> 
> 时间：2020-08-30T04:59:33.717

## 简单的 Kotlin 扩展解决方案

独立设置所有/任何一侧：

```
fun View.setMargin(left: Int? = null, top: Int? = null, right: Int? = null, bottom: Int? = null) {
    val params = (layoutParams as? MarginLayoutParams)
    params?.setMargins(
            left ?: params.leftMargin,
            top ?: params.topMargin,
            right ?: params.rightMargin,
            bottom ?: params.bottomMargin)
    layoutParams = params
}

myView.setMargin(10, 5, 10, 5)
// or just any subset
myView.setMargin(right = 10, bottom = 5) 
```

直接引用一个资源值：

```
fun View.setMarginRes(@DimenRes left: Int? = null, @DimenRes top: Int? = null, @DimenRes right: Int? = null, @DimenRes bottom: Int? = null) {
    setMargin(
            if (left == null) null else resources.getDimensionPixelSize(left),
            if (top == null) null else resources.getDimensionPixelSize(top),
            if (right == null) null else resources.getDimensionPixelSize(right),
            if (bottom == null) null else resources.getDimensionPixelSize(bottom),
    )
}

myView.setMarginRes(top = R.dimen.my_margin_res) 
```

直接将所有边设置为属性：

```
var View.margin: Int
    get() = throw UnsupportedOperationException("No getter for property")
    set(@Px margin) = setMargin(margin, margin, margin, margin)

myView.margin = 10 // px

// or as res
var View.marginRes: Int
    get() = throw UnsupportedOperationException("No getter for property")
    set(@DimenRes marginRes) {
        margin = resources.getDimensionPixelSize(marginRes)
    }

myView.marginRes = R.dimen.my_margin_res 
```

要直接设置特定的一面，您可以像这样创建属性扩展：

```
var View.leftMargin
    get() = marginLeft
    set(@Px leftMargin) = setMargin(left = leftMargin)

var View.leftMarginRes: Int
    get() = throw UnsupportedOperationException("No getter for property")
    set(@DimenRes leftMarginRes) {
        leftMargin = resources.getDimensionPixelSize(leftMarginRes)
    } 
```

这也允许您制作`horizontal`或`vertical`变体：

```
var View.horizontalMargin
    get() = throw UnsupportedOperationException("No getter for property")
    set(@Px horizontalMargin) = setMargin(left = horizontalMargin, right = horizontalMargin)

var View.horizontalMarginRes: Int
    get() = throw UnsupportedOperationException("No getter for property")
    set(@DimenRes horizontalMarginRes) {
        horizontalMargin = resources.getDimensionPixelSize(horizontalMarginRes)
    } 
```

> 注意：如果未能设置边距，您可能会在渲染之前过早，这意味着`params == null`. 尝试用`myView.post{ margin = 10 }`

* * *

## 回答 #12

> 赞同：6
> 
> 时间：2020-09-24T23:01:52.597

我是怎么做到的`kotlin`

```
fun View.setTopMargin(@DimenRes dimensionResId: Int) {
    (layoutParams as ViewGroup.MarginLayoutParams).topMargin = resources.getDimension(dimensionResId).toInt()
} 
```

* * *

## 回答 #13

> 赞同：5
> 
> 时间：2019-09-23T13:12:40.823

如果你想为 TextView 添加边距，你必须使用 LayoutParams：

```
val params =  LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT)
params.setMargins(int left, int top, int right, int bottom)
your_view.layoutParams = params 
```

LayoutParams 可以是任何布局，如相对、线性、视图或视图组。根据需要选择 LayoutParams。谢谢

* * *

## 回答 #14

> 赞同：3
> 
> 时间：2018-06-20T15:29:57.593

使用此方法在 dp 中设置边距

```
private void setMargins (View view, int left, int top, int right, int bottom) {
    if (view.getLayoutParams() instanceof ViewGroup.MarginLayoutParams) {
        ViewGroup.MarginLayoutParams p = (ViewGroup.MarginLayoutParams) view.getLayoutParams();

        final float scale = getBaseContext().getResources().getDisplayMetrics().density;
        // convert the DP into pixel
        int l =  (int)(left * scale + 0.5f);
        int r =  (int)(right * scale + 0.5f);
        int t =  (int)(top * scale + 0.5f);
        int b =  (int)(bottom * scale + 0.5f);

        p.setMargins(l, t, r, b);
        view.requestLayout();
    }
} 
```

调用方法：

```
setMargins(linearLayout,5,0,5,0); 
```

* * *

## 回答 #15

> 赞同：3
> 
> 时间：2018-08-01T04:28:19.227

当您在自定义视图中时，您可以使用`getDimensionPixelSize(R.dimen.dimen_value)`，在我的情况下，我在 LayoutParams 创建的`init`方法中添加了边距。

在科特林

```
init {
    LayoutInflater.from(context).inflate(R.layout.my_layout, this, true)
    layoutParams = LayoutParams(MATCH_PARENT, WRAP_CONTENT).apply {
    val margin = resources.getDimensionPixelSize(R.dimen.dimen_value)
    setMargins(0, margin, 0, margin)
} 
```

在 Java 中：

```
public class CustomView extends LinearLayout {

    //..other constructors

    public CustomView(Context context, @Nullable AttributeSet attrs, int defStyleAttr) {
        super(context, attrs, defStyleAttr);
        init();
    }

    private void init() {
        LayoutParams params = new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
        int margin = getResources().getDimensionPixelSize(R.dimen.spacing_dime);
        params.setMargins(0, margin, 0, margin);
        setLayoutParams(params);
    }
} 
```

* * *

## 回答 #16

> 赞同：1
> 
> 时间：2019-05-09T10:26:22.823

在我的示例中，我以编程方式将 ImageView 添加到 LinearLayout。我已将顶部和底部边距设置为 ImagerView。然后将 ImageView 添加到 LinearLayout。

```
 ImageView imageView = new ImageView(mContext);
        imageView.setImageBitmap(bitmap);
        LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.MATCH_PARENT,
                LinearLayout.LayoutParams.WRAP_CONTENT
        );
        params.setMargins(0, 20, 0, 40);
        imageView.setLayoutParams(params);
        linearLayout.addView(imageView); 
```

* * *

## 回答 #17

> 赞同：1
> 
> 时间：2018-07-18T00:55:41.383

对于快速的单线设置使用

```
((LayoutParams) cvHolder.getLayoutParams()).setMargins(0, 0, 0, 0); 
```

但要注意对 LayoutParams 的任何错误使用，因为这将没有`if`statment 实例 chech

* * *

## 回答 #18

> 赞同：1
> 
> 时间：2019-04-26T04:35:33.453

为那些可能觉得很方便的人创建了一个 Kotlin 扩展函数。

确保传入像素而不是 dp。快乐编码:)

```
fun View.addLayoutMargins(left: Int? = null, top: Int? = null,
                      right: Int? = null, bottom: Int? = null) {
    this.layoutParams = ViewGroup.MarginLayoutParams(this.layoutParams)
            .apply {
                left?.let { leftMargin = it }
                top?.let { topMargin = it }
                right?.let { rightMargin = it }
                bottom?.let { bottomMargin = it }
            }
} 
```

* * *

## 回答 #19

> 赞同：1
> 
> 时间：2021-03-11T08:48:07.627

根据其他答案，我制作了一个通用扩展函数，它可以识别您的父母并相应地使用参数：

```
//takes margin values as integer , eg for 12dp top , you will pass 12
fun View?.setMarginFromConstant(mLeft:Int, mTop:Int, mRight:Int, mBottom:Int){
    this?.apply {
        val left = context?.dpToPixel(mLeft)?:0
        val top = context?.dpToPixel(mTop)?:0
        val right = context?.dpToPixel(mRight)?:0
        val bottom = context?.dpToPixel(mBottom)?:0
        when (val params = this.layoutParams) {
            is ConstraintLayout.LayoutParams -> {
                params.marginStart = left
                params.marginEnd = right
                params.topMargin = top
                params.bottomMargin = bottom
            }
            is FrameLayout.LayoutParams -> {
                params.marginStart = left
                params.marginEnd = right
                params.topMargin = top
                params.bottomMargin = bottom
            }
            is RecyclerView.LayoutParams -> {
                params.marginStart = left
                params.marginEnd = right
                params.topMargin = top
                params.bottomMargin = bottom
            }
        }
    }

} 
```

和

```
fun Context.dpToPixel(dp: Int): Int =
    (dp * applicationContext.resources.displayMetrics.density).toInt() 
```

您也可以添加对其他父视图组的支持

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2021-01-12T15:24:56.730

对于那些感兴趣的人，使用 DP 工作 utils 功能：

```
public static void setMargins(Context context, View view, int left, int top, int right, int bottom) {
    int marginLeft = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, left, context.getResources().getDisplayMetrics());
    int marginTop = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, top, context.getResources().getDisplayMetrics());
    int marginRight = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, right, context.getResources().getDisplayMetrics());
    int marginBottom = (int) TypedValue.applyDimension(TypedValue.COMPLEX_UNIT_DIP, bottom, context.getResources().getDisplayMetrics());

    if (view.getLayoutParams() instanceof ViewGroup.MarginLayoutParams) {
        ViewGroup.MarginLayoutParams p = (ViewGroup.MarginLayoutParams) view.getLayoutParams();
        p.setMargins(marginLeft, marginTop, marginRight, marginBottom);
        view.requestLayout();
    }
} 
```

* * *

## 回答 #21

> 赞同：0
> 
> 时间：2018-05-15T00:39:49.387

和今天一样，最好的可能是使用AirBnB 提供的库 Paris [。](https://github.com/airbnb/paris)

然后可以像这样应用样式：

```
Paris.style(myView).apply(R.style.MyStyle); 
```

它还支持使用注释的自定义视图（如果您扩展视图）：

```
@Styleable and @Style 
```

* * *

## 回答 #22

> 赞同：0
> 
> 时间：2021-09-17T19:54:34.243

使用此方法可以正确设置 dp：

```
public int dpFormat(int dp) {
    DisplayMetrics displayMetrics = getContext().getResources().getDisplayMetrics();
    return Math.round(dp * (displayMetrics.xdpi / DisplayMetrics.DENSITY_DEFAULT));
} 
```

然后打电话

```
setMargins(dpFormat(15), dpFormat(15), dpFormat(15), dpFormat(15)); 
```

* * *

## 回答 #23

> 赞同：0
> 
> 时间：2022-02-23T05:10:55.827

使用 Kotlin，

```
 yourLayoutId.updateLayoutParams<ViewGroup.MarginLayoutParams> {
            setMargins(15,15,15,15)
        } 
```

* * *

## 回答 #24

> 赞同：-1
> 
> 时间：2019-02-15T13:21:19.433

```
((FrameLayout.LayoutParams) linearLayout.getLayoutParams()).setMargins(450, 20, 0, 250);
        linearLayout.setBackgroundResource(R.drawable.smartlight_background); 
```

我不得不将我的转换`FrameLayout`为一个线性布局，因为它继承自它并在那里设置边距，因此活动只出现在屏幕的一部分上，并且背景与`setContentView`.

```
LinearLayout linearLayout = (LinearLayout) findViewById(R.id.activity);
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(WindowManager.LayoutParams.FILL_PARENT, WindowManager.LayoutParams.MATCH_PARENT);
linearLayout.setBackgroundColor(getResources().getColor(R.color.full_white));
setContentView(linearLayout,layoutParams); 
```

其他人都没有使用相同的活动并根据从不同菜单打开活动来更改边距！setLayoutParams 从来没有为我工作过——设备每次都会崩溃。尽管这些是硬编码的数字 - 这只是用于演示目的的代码示例。

* * *

## 回答 #25

> 赞同：-1
> 
> 时间：2019-06-03T18:20:03.370

您可以使用`ViewGroup.MarginLayoutParams`设置宽度、高度和边距

```
ViewGroup.MarginLayoutParams marginLayoutParams = new ViewGroup.MarginLayoutParams(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT);
marginLayoutParams.setMargins(0,16,0,16);
linearLayout.setLayoutParams(marginLayoutParams); 
```

该方法`setMargins();`分别接受左、上、右、下的值。顺时针！，从左边开始。****

# ios - iPhone - 应用内购买，无有效产品

> ID：12728259
> 
> 赞同：0
> 
> 时间：2012-10-04T13:22:39.217
> 
> 标签：ios, in-app-purchase, bundle

尝试在我的 iPhone/iPad 应用中测试应用内购买功能时，我不断收到“没有有效产品”的消息。我检查了网上的许多列表，并且肯定我涵盖了所有内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:22:39.217

在解决这个错误数小时后，我终于发现了实际问题，因此找到了解决方案。

是的，您不需要提交二进制文件来测试应用内购买。但是，由于我无法弄清楚问题出在哪里，我还是决定提交我的二进制文件。我想，我已经做了其他一切可能会伤害的事情。

所以，这就是我所做的：

1.  归档我的应用
2.  点击“分发”按钮
3.  选择“提交到iOS App Store”并点击下一步
4.  再次单击下一步以登录 iTunes Connect

砰！

我收到消息：“没有可用于签名的身份”

什么？！！！这意味着什么？

这是一个非常好的信息，可以让我缩小问题的范围。这告诉我我无法将我的应用程序提交到应用程序商店，嗯，所以我认为我应该仔细检查捆绑 ID。在应用程序中看起来不错，在 iTunes 连接中呢？我登录到 iTunes Connect 并转到管理应用程序并选择我的应用程序。

呃，哦！什么？我输入了错误的捆绑包 ID？怎么来的？

嗯，这是因为当我在最新的 Xcode 中创建我的应用程序的这个新版本时，我决定创建一个全新的项目，我更改了项目的名称，当然它有一个不同的 bundle id。啊哈！

下一步是将bundle id更改为旧的（这与Xcode项目的名称无关）问题是当我选择我的Target时，bundle id最后是我的新Xcode项目的灰色名称它不允许我删除名称。我用谷歌搜索了这个问题，这是你需要做的：

打开您的 -info.plist 并编辑 Bundle 标识符。删除后缀 ${PRODUCT_NAME}。现在您可以正确设置捆绑 ID。

就是这样！一旦我设置了捆绑 ID，我的应用内购买就可以工作了！耶！

提示：我误以为因为应用内购买项目的产品 ID (com.name.newprojectname) 与我的新捆绑包 ID (com.name.newprojectname) 匹配，所以一切正常。不。您可以在产品 ID 中添加任何您想要的内容。当您在 Xcode 中运行应用程序并尝试进行应用内购买时，它应该检查您在 Xcode 中运行的应用程序的捆绑 ID 是否存在于 iTunes 连接中，并在它们不匹配时显示一条消息。那会为我节省很多时间。

最后我可以将我的应用提交到应用商店。

我希望这个解决方案为其他一些开发人员节省了一些时间和头发。

# html - 电子邮件通讯：如何保持标题的行高一致？

> ID：12728263
> 
> 赞同：0
> 
> 时间：2012-10-04T13:22:50.037
> 
> 标签：html, css, email, newsletter, html-heading

我一直在浏览电子邮件通讯设计和编码的荆棘补丁。一个问题不断出现：我的标题的行高在不同的电子邮件客户端之间不一致。

一组为标题提供了很大的空间，其中包括 Gmail 和 iPhone： ![Gmail 中的简报](../Images/b8e2fe603ef042763e17fa0b44600192.png)

另一组，主要是 Outlook，呈现标题的余地较小： ![在此处输入图像描述](../Images/e32633211faea143236084d6a70b5507.png)

我的代码如下：

```
<table width="540" cellpadding="0" cellspacing="0" border="0">
<tr>
    <td colspan="5" width="270" height="7" style="line-height: 7px;"><img src="img/shading-top-orange.gif" width="270" height="7" style="display:block;"></td>
    <td rowspan="3" width="270" height="199"><img editable width="270" height="199" style="display:block;"></td>
</tr>
<tr bgcolor="#f68b1f" >
    <td width="10" height="185"><img src="img/shading-left-large.gif" width="10" height="185" style="display:block;"></td>
    <td width="15" height="185" bgcolor="#f68b1f"></td>
    <td width="223" height="185" bgcolor="#f68b1f" align="left" valign="top"><a name="item2" style="text-decoration: none;"><h2 style="font-family: Arial, Verdana, sans-serif; font-size: 15px; color: white !important; color:white;"><singleline label="Title" repeatertitle="true" style="color: white;">Lorem ipsum</singleline></h2></a><multiline><p style="font-family: Arial, Verdana, sans-serif; font-size: 12px; color: white;">Lorem ipsum dolor sit amet</p></multiline></td>
    <td width="15" height="185" bgcolor="#f68b1f"></td>
    <td width="7" height="185"><img src="img/shading-right-small.gif" width="7" height="185" style="display: block;"></td>
</tr>
<tr>
    <td colspan="5" width="270" height="7" style="line-height: 7px;"><img src="img/shading-bottom-orange.gif" width="270" height="7" style="display:block;"></td>
</tr> 
```

新信函应用程序根据需要填写文本。

我怎样才能以这样一种方式编码这个片段，让所有（或大多数）客户端都像在 Gmail 中一样呈现标题？我已经尝试了很多事情，比如为标题添加另一个嵌套表，给它一个橙色的顶部边框等。这些修复也影响了 Gmail 呈现，这不是我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:12:54.340

如您所见，您不想依赖`line-height`HTML 电子邮件，因为客户端之间的支持非常糟糕且不一致。不幸的是，解决这个问题的方法是重构你的代码以嵌套一些`tables`.

[在这里查看这个小提琴](http://jsfiddle.net/aLszn/)，我基本上只是在你的第二个中嵌套了`table`另一个。这张桌子有一个完整的人，唯一的工作就是设定一个特定的高度并在标题上方创建一些填充：`td``tr``td`

```
<tr bgcolor="#f68b1f" >
    <td width="10" height="185"><img src="img/shading-left-large.gif" width="10" height="185" style="display:block;"></td>
    <td colspan="3">  
        <table> <!--the new nested table-->
            <tr>
                <td bgcolor="#f68b1f" colspan="3" height="15"></td>
            </tr> 
```

不幸的是，在 HTML 电子邮件的世界中，您将不得不依赖这些基于表格的布局技巧，而不是像`line-height`.

# c# - 以不同的方式将布尔序列化为 XML

> ID：12728265
> 
> 赞同：0
> 
> 时间：2012-10-04T13:22:55.373
> 
> 标签：c#, xml, xml-serialization

我正在使用将`XmlSerializer`类序列化为 XML。该类包含一些布尔属性，它们像这样被序列化：

```
public bool Boolean1;
public bool Boolean2;

<Boolean1>true</Boolean1>
<Boolean2>false</Boolean2> 
```

我希望生成的 XML 看起来像这样：

```
<Boolean1/> 
```

也就是说，真正的布尔值将显示为一个空标签，而虚假的布尔值则根本不会出现。如果布尔值为假，我可以向两个布尔值添加一个`ShouldSerializeX`方法以使元素消失，但是如果元素为真，我如何让标签名称没有内容？

另外，是否有某种`[XmlIgnoreIfNull]`或`[XmlIgnoreIfDefault]`属性会使大多数`ShouldSerialize`方法变得多余？

# ruby-on-rails - 我应该在 node.js 或 rails 中实现 GCM 服务器吗？

> ID：12728267
> 
> 赞同：1
> 
> 时间：2012-10-04T13:23:05.747
> 
> 标签：ruby-on-rails, node.js, google-cloud-messaging

我正在使用 Rails 为移动应用程序构建 API，并且需要实现 Google Cloud Messaging 服务器。

我看到 Rails 和 node.js 都有现成的库，

什么是更好的方法呢？在 Rails 中实现 GCM 服务器（它涉及用于后台工作的数据库表和任务）或在 node.js 中（看起来更简单，GCM 使用 JSON 并且还用于快速实现指数退避。Rails 服务器将必须 HTTP POST 消息到 node.js 服务器）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T13:35:31.877

从长远来看，您应该选择更易于维护的解决方案。当然，这也取决于其他因素：您的日程安排是否紧迫 - 选择更快实施的解决方案。是您完全不熟悉的技术中的解决方案之一 - 选择您知道的解决方案。等等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:09:17.547

我最终使用了 node.js 和 node-gcm 模块。

它非常容易构建和测试，正如我在 OP 中所说，实现指数退避和重试非常容易，不需要任何数据库或额外的网络工作者。

# c# - 在 C# .Net 4.0 中使用 Web 服务时出错

> ID：12728268
> 
> 赞同：0
> 
> 时间：2012-10-04T13:23:07.233
> 
> 标签：c#, .net, web-services

我必须使用来自 .Net 的 Axis2 内置的第三方 Web 服务

因此，我尝试使用 webservice wsdl address( `https://service/Services.wsdl`) 添加服务引用，但出现以下错误：

```
The document was understood, but it could not be processed.
- The WSDL document contains links that could not be resolved.
- There was an error downloading https://service/Services.xsd. 
...etc 
```

最后一个错误（下载 .xsd 时出错）可能是导致我这个问题的原因。这是因为 VS2010 试图在这个地址下载它：`https://service/Services.xsd`

但实际上它就在这里：`https://service/GoodServices.xsd`

**编辑**

我如何告诉 VS2010 从上面的正确链接中获取 xsd 而不是由于不正确的 wsdl 导致的错误分辨率？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:34:17.087

这可能有很长的路要走，但对我有用。

*   从浏览器中下载 wsdl 并将其保存为 xml
*   在 Visual Studio 的项目中包含此 xml
*   在 Visual Studio 中打开 wsdl xml 文件。
*   将第 6 行的模式位置（“schemalocation”属性）修改为正确的 xsd 位置，即`https://preprodservices.crif-online.ch/CrifSS/CrifSoapServiceV1?xsd=crif-soap-service_v1.0.xsd`
*   保存文件
*   现在右键单击项目并选择“添加服务引用...”
*   在地址：框中，输入`C:\test\project....`下载/修改的 wsdl 的物理路径 ( )。
*   打去

# maven - 使用 Maven 停止 Jboss 服务器时出错

> ID：12728272
> 
> 赞同：0
> 
> 时间：2012-10-04T13:23:13.000
> 
> 标签：maven, jboss, pom.xml

我手动启动了 Jboss Server 5.1.0.GA 并使用以下 pom.xml 停止。下面给出的代码用于 Maven 2.2.1

```
<plugin>
  <groupId>org.codehaus.cargo</groupId>
  <artifactId>cargo-maven2-plugin</artifactId>
  <version>1.0.6</version>
  <configuration>
    <container>
      <timeout>400000</timeout>
      <containerId>jboss51x</containerId>
      <home>C:/jboss-5.1.0.GA-PaletteConfig-9.5.0.0</home>
    </container>
    <configuration>
      <type>existing</type>
      <home>C:/jboss-5.1.0.GA-PaletteConfig-9.5.0.0/server/default</home>
      <properties>
        <cargo.remote.username>admin</cargo.remote.username>
        <cargo.remote.password>admin</cargo.remote.password>
        <cargo.hostname>127.0.0.1</cargo.hostname>
        <cargo.rmi.port>1080</cargo.rmi.port>
      </properties>
    </configuration>
  </configuration>
  <executions>
    <execution>
      <id>stop-container</id>
      <phase>install</phase>
      <goals>
        <goal>stop</goal>
      </goals>
    </execution>
  </executions>
</plugin> 
```

但我得到一个错误，如下所示：

```
[WARNING] [talledLocalContainer] Exception in thread "main" 
    javax.naming.CommunicationException: 
  Could not obtain connection to any of these urls: 127.0.0.1:1080
  [Root exception is javax.naming.CommunicationException: Failed to retrieve 
      stub from server /127.0.0.1:1080 
  [Root exception is java.io.EOFException]]
[WARNING] [talledLocalContainer] at 
    org.jnp.interfaces.NamingContext.checkRef(NamingContext.java:1763) 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:21:05.800

你确定端口是1080？默认端口通常是 1099。

# iphone - MKMapView 中带有谷歌地图的搜索栏建议

> ID：12728274
> 
> 赞同：0
> 
> 时间：2012-10-04T13:23:19.567
> 
> 标签：iphone, ios, ipad, google-maps, mkmapview

> **可能重复：**
> [如何使用 UISearchBar 搜索 MKMapView？](https://stackoverflow.com/questions/2281798/how-to-search-mkmapview-with-uisearchbar)

我有一个带有 MKMapView 和谷歌地图的 UISearchBar。每当我开始打字时，我都需要建议。那我应该怎么做呢？google api 有没有网络服务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:33:02.400

用于`CLGeocoder`根据字符串生成地址结果。
这被称为`forward geocoding`.
您将获得一些返回的地标，您可以将它们填充到您的 UI 中。

[http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/CoreLocation/Reference/CLGeocoder_class/Reference/Reference.html)

这里的快速示例：

```
NSString *address = @"Big Ben";

CLGeocoder *coder = [[CLGeocoder alloc] init];
[coder geocodeAddressString:address completionHandler:^(NSArray *placemarks, NSError *error){

     //Do something with the returned placemarks
}]; 
```

如果具体，您还可以将结果限制在一个设定的区域，所有这些都记录在上面的链接中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T06:46:45.557

1.  创建请求[http://google.com/complete/search?output=toolbar&q=YOURQUERY](http://google.com/complete/search?output=toolbar&q=YOURQUERY)
2.  接收响应并解析它。
3.  将其作为建议显示到您的 UITableView 中。

要查看完整的插图，请[阅读这篇文章](http://sugartin.info/2012/10/05/implementing-google-suggestions-into-your-ios-app/)。

# telerik - 在过滤器之间使用 RadGrid 的语法是什么

> ID：12728276
> 
> 赞同：3
> 
> 时间：2012-10-04T13:23:22.050
> 
> 标签：telerik, telerik-grid

在内置上下文菜单中的过滤器之间使用 RadGrid 的语法是什么？我使用 DataTable 作为我的数据源。当我应用“大于”过滤器时，它可以工作，但中间过滤器不起作用。我努力了：

```
81000,82000
81000|82000
81000 and 82000 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:49:59.723

尝试用**[SPACE]分隔值**

喜欢：**81000 82000**

参考：[RadControls for ASP.NET AJAX 文档-基本过滤](http://www.telerik.com/help/aspnet-ajax/grid-basic-filtering.html)

> **之间：**与：value1 <= dataField <= value2 相同。请注意，作为过滤器输入时，value1 和 value2 应以**[空格]分隔。**

# mysql - 朴素树集上的嵌套连接

> ID：12728278
> 
> 赞同：4
> 
> 时间：2012-10-04T13:23:27.943
> 
> 标签：mysql, sql, tree, hierarchy

假设我有这个例子的内容：

```
CREATE TABLE NaiveTable
{
    id BIGINT NOT NULL, 
    parentId BIGINT NULL,
    name VARCHAR(20) NULL,
    CONSTRAINT hierarchy FOREIGN KEY (parentId) REFERENCES NaiveTable(id)
    PRIMARY KEY (id)
} 
```

注意 parentId 是对 NaiveTable 的 id 的引用（以防我错过了确切的语法）。

数据在这些地方

```
+---------+----------+----------+
|   id    | parentId |  name    | 
+---------+----------+----------+
|   1     |   null   |  node1   |
+---------+----------+----------+
|   2     |     1    |  node2   |
+---------+----------+----------+
|   3     |     1    |  node3   |
+---------+----------+----------+
|   4     |     2    |  node4   |
+---------+----------+----------+ 
```

列名包含一些未实现的标签。我正在寻找一种在 MySQL 表上构建 SQL 查询的方法，其中所有信息都将被展平并按层次排序，如下所示：

```
node 1, depth 0
node 2, depth 1
node 4, depth 2
node 3, depth 1 
```

注意：我不能以任何方式修改数据库架构。我只能创建 SQL 查询。我也不能使用`WITH`关键字，因为 MySQL 不支持它。有没有办法进行这样的查询？**但是，深度二或以上**的任何解决方案 都被认为**足够好**。

编辑：如果你喜欢实验，这里是[SQL fiddle :)](http://sqlfiddle.com/#!2/78b86)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:34:04.100

如果数据库的模式是固定的并且您不能添加/编辑任何表，您所能做的就是在内存中构建树（在某些编程语言中），然后尝试计算每个节点在内存中的深度。所以我的回答是，你不能只用一个查询来产生你想要的输出！

但是，如果您可以修改数据库的架构，那么您可能需要检查[一下](https://stackoverflow.com/questions/4291278/database-modeling-how-to-catogorize-products-like-amazon/12550306#12550306)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:45:21.947

这是一个小递归存储过程，它应该可以工作到任何深度。这是我的第一个存储过程，所以请告诉我如何改进它。

```
DROP PROCEDURE IF EXISTS tree_reader;
DELIMITER $$
CREATE PROCEDURE tree_reader(IN parent INT, IN depth INT) READS SQL DATA
BEGIN

  DECLARE id_val INT;
  DECLARE name_val VARCHAR(255);
  DECLARE _table_name VARCHAR(255);

  DECLARE no_more_rows BOOLEAN;
  DECLARE cur CURSOR FOR
      SELECT id, name
      FROM tree
      WHERE IF(parent IS NULL, parentid IS NULL, parentid = parent);

  DECLARE CONTINUE HANDLER FOR NOT FOUND SET no_more_rows = TRUE;

  -- create temporary table on outer call only --
  IF depth=0 THEN
    DROP TABLE IF EXISTS _tree;
    CREATE TEMPORARY TABLE _tree (id INT, name VARCHAR(255), depth INT);
  END IF;

  OPEN cur;

  -- loop with recursion --
  tree_loop: LOOP
    FETCH cur INTO id_val, name_val;
    IF no_more_rows THEN LEAVE tree_loop; END IF;
    INSERT INTO _tree VALUES (id_val, name_val, depth);
    CALL tree_reader(id_val, depth + 1);

  END LOOP tree_loop;

  CLOSE cur;

  -- output results on outer call only --
  IF depth=0 THEN
    SELECT * FROM _tree;
    DROP TABLE _tree;
  END IF;
END
$$
DELIMITER ; 
```

几点注意事项：

*   调用程序：`CALL tree_reader(NULL, 0);`

*   您可以使用*任何*父节点 ID，但第二个参数始终为`0`. 在实践中，我可能会添加一个不带参数并给出整个树的包装程序。

*   您必须设置递归限制才能使其工作：（`SET max_sp_recursion_depth = 6;`我任意选择了 6）。

# php - 将 foreach (smarty) 与二维数组一起使用

> ID：12728282
> 
> 赞同：0
> 
> 时间：2012-10-04T13:23:50.817
> 
> 标签：php, smarty

我有一个二维数组，我在 smarty 中使用了 foreach 构造。我已将 6 放入嵌套的第二个 foreach 的循环中，因为我知道数组的列数，但我会将循环更一般地放在第一个 foreach 循环中，其中行数由 array1 获取，我该怎么做？

```
 {section name=customer loop=$array1}

 {section name=contact loop=6}  
 {$array1[customer][contact]}
 {/section}
 <p>
 {/section} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:02:17.363

使用以下格式。该`loop`属性可以是一个`array`值或`integer`表示循环次数的一个。

```
{section name=customer loop=$array1}
  {section name=contact loop=$array1[customer]}  
    {$array1[customer][contact]}
  {/section}
{/section} 
```

# c# - ASP.Net webforms - 动态 SEO 友好的 URL

> ID：12728291
> 
> 赞同：3
> 
> 时间：2012-10-04T13:24:33.167
> 
> 标签：c#, asp.net, routing, webforms, asp.net-4.5

我已经阅读了很多关于 ASP.Net 中的 SEO 友好 URL 功能的信息。我读过的大部分内容都涉及获取一个使用查询字符串参数的 URL 并使它变得漂亮。我对制作标准 URL 很感兴趣。例如：

```
http://mysite.com/aboutus.aspx

should be...

http://mysite.com/about-us 
```

我发现下面的代码满足要求：

```
void Application_Start(object sender, EventArgs e) 
{
    // Enable routing
    RegisterRoutes(RouteTable.Routes);
}

void RegisterRoutes(RouteCollection routes)
{        
    // About us section routes
    routes.MapPageRoute(
        "AboutUsRoute",
        "{about-us}",
        "~/aboutus.aspx"
     );
} 
```

我的问题是我必须手动为站点中的每个页面指定一条路线。有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T15:33:04.133

这个简单的路由会将路由 Url 映射到物理 .aspx 页面。

```
routes.MapPageRoute("Page", "{name}", "~/{name}.aspx"); 
```

所以**/about**映射到**/about.aspx**，**/contact-us**映射到**contact-us.aspx**等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-06T20:40:45.637

微软最近发布了一个新的库，让这种事情在 Web 窗体中变得快速而简单。这是一个包含有用信息的链接： [http ://www.hanselman.com/blog/IntroducingASPNETFriendlyUrlsCleanerURLsEasierRoutingAndMobileViewsForASPNETWebForms.aspx](http://www.hanselman.com/blog/IntroducingASPNETFriendlyUrlsCleanerURLsEasierRoutingAndMobileViewsForASPNETWebForms.aspx)

# java - 组件不能为空 - Java SWING

> ID：12728292
> 
> 赞同：1
> 
> 时间：2012-10-04T13:24:36.447
> 
> 标签：java, eclipse, swing, user-interface, layout

我正在使用 SWING 并使用简单的 Group 布局进行写作

我为布局编写了这段代码：

```
 JPanel unterPanel = new JPanel();
    GroupLayout layout = new GroupLayout(unterPanel);
    unterPanel.setLayout(layout);
    layout.setAutoCreateGaps(true);
    layout.setAutoCreateContainerGaps(true);

    layout.setHorizontalGroup(
            layout.createSequentialGroup()
            .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                    .addComponent(header)
                    .addComponent(tableG)
                    .addGroup(layout.createSequentialGroup()
                            .addComponent(b3)
                            .addComponent(b4)
                            .addComponent(b5)
                            .addComponent(b6)
                            ))
            );
    layout.setVerticalGroup(
            layout.createSequentialGroup()
            .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(b3)
                    .addComponent(b4)
                    .addComponent(b5)
                    .addComponent(b6)
                    )   
                    .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                            .addComponent(header)
                            .addComponent(tableG))
            );

    layout.linkSize(SwingConstants.HORIZONTAL, b3, b4, b5, b6);

    return unterPanel; 
```

但是当我编译代码时，我得到：

```
Exception in thread "AWT-EventQueue-0" java.lang.IllegalArgumentException: Component must be non-null
    at javax.swing.GroupLayout$ComponentSpring.<init>(GroupLayout.java:2878)
    at javax.swing.GroupLayout$ComponentSpring.<init>(GroupLayout.java:2858)
    at javax.swing.GroupLayout$Group.addComponent(GroupLayout.java:1490)
    at javax.swing.GroupLayout$ParallelGroup.addComponent(GroupLayout.java:2414)
    at javax.swing.GroupLayout$ParallelGroup.addComponent(GroupLayout.java:2384)
    at javax.swing.GroupLayout$Group.addComponent(GroupLayout.java:1471)
    at javax.swing.GroupLayout$ParallelGroup.addComponent(GroupLayout.java:2406)
    at gui.guimain.Produktmaingui(guimain.java:97)
    at gui.guimain.showStart(guimain.java:306)
    at gui.guimain$1.run(guimain.java:410)
    at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:597)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:122) 
```

为什么？

我很欣赏你的回答！！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T13:27:03.680

您要添加的组件之一为 null，换句话说，这些变量之一是：

*   标题
*   表G
*   b3
*   b4
*   b5
*   b6

罪魁祸首在您班级的第 97 行，如堆栈跟踪中所述。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T13:27:27.770

转到 gui.guimain.Produktmaingui 中的第 97 行，您在那里调用 addComponent。该参数可能为空。如果参数不为空，它可能是参数的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T13:30:04.167

*   放入 ( ) `JTable`_`JScrollPane``BorderLayout.CENTER`

*   创建另一个`JPanel`并`GridLayout`放在那里 4\. 按钮，`1st JButton`在左侧更改为`setVisible(false)`( `BorderLayout.SOUTH`)

*   `JPanels`这些拖到`JTabbedPanes Tab`

# ruby - 块变量捕获什么？

> ID：12728295
> 
> 赞同：0
> 
> 时间：2012-10-04T13:24:44.993
> 
> 标签：ruby

一个教程有这个代码块：

```
h1 = ["a" => 111, "b" => 222]
h2 = ["b" => 333, "c" => 444]
h1.merge(h2) {|key, old, new| new}
# => ["a" => 111, "b" => 333, "c" => 444]
h1.merge(h2) {|key, old, new| old}
# => ["a" => 111, "b" => 222, "c" => 444] 
```

我们与合并有冲突。我们的两个数组中有两个重复的键。`new`正在捕获`h2`的值`"b"`，并输出它会强制它在合并中优先。同样，`old`正在捕获`h1`的值`"b"`，并强制它优先。

为什么我们似乎只获取 的值`"b"`？变量不应该抓取整个数组吗？块变量在使用时是否与上下文相关并改变功能，`.merge`而不是说，`.times`？或者当我们处理数组而不是简单的数字时，它们会改变函数吗？还是他们看到了合并冲突并且就像“我们必须抓住冲突点”？我想也许试着看看里面有什么`key`会有所帮助，

```
h1.merge(h2) {|key, old, new| key}
# => ["a" => 111, "b" => "b", "c" => 444] 
```

但它实际上只是让我更加困惑。为什么一个变量捕获键，而其他变量捕获两个不同的值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:29:51.880

它正在合并：在 中`h1.merge(h2)`，'h1' 是“旧”哈希，而 'h2' 是“新”哈希。只有在两个哈希中都有值的键才会调用该块。该块有 3 个参数：每个键和来自每个散列的相应值。块中的逻辑选择将哪个放入该键的输出哈希中。任何仅在一个散列中的键都会直接进入输出而不通过块进行处理。

通过运行，您可能会更好地了解发生了什么

```
 h1.merge(h2){|key,left,right| print "k=#{key} l=#{left} r=#{right} "} 
```

来自[Ruby-Doc.org](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-merge)的描述：

> 返回包含 other_hash 内容和 hsh 内容的新哈希。如果未指定块，则具有重复键的条目的值将是 other_hash 的值。否则，每个重复键的值是通过调用具有该键的块、其在 hsh 中的值和其在 other_hash 中的值来确定的。

因此，要回答您的一个具体问题，是的，该块是有条件地调用的，仅针对冲突的键，这与为每个键调用的 .each 或 .delete_if 等方法不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:40:21.923

我建议您研究块和块变量如何在 ruby​​ 中工作，因为我认为这就是让您感到困惑的原因。

例如，此[资源](http://www.skorks.com/2009/09/using-ruby-blocks-and-rolling-your-own-iterators/)可能会很有帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:34:03.847

从[merge](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-merge)的文档中。三个参数`key, old, new`是这样使用的：

*   如果`key`仅存在于其中一个哈希中，则该哈希中的值用于构建合并
*   如果`key`在两个哈希中都存在，则返回来自 proc（块）的返回值`{|key, old, new| key }`，在这种情况下是`key`要插入哈希中的键。

您可以执行其他操作，例如`{|key, old, new| old - new }`在两个哈希之间存在密钥冲突时调用计算。这是合并文档中的一个示例：

```
h1 = { "a" => 100, "b" => 200 }
h2 = { "b" => 254, "c" => 300 }
h1.merge(h2)   #=> {"a"=>100, "b"=>254, "c"=>300}
h1.merge(h2){|key, oldval, newval| newval - oldval}
               #=> {"a"=>100, "b"=>54,  "c"=>300} 
```

# ssis - 从不同数据库中的另一个表更新一个数据库中的表（相同的 sql 实例）

> ID：12728303
> 
> 赞同：1
> 
> 时间：2012-10-04T13:25:10.183
> 
> 标签：ssis

想要使用 SSIS - 但对 SSIS 还是有点陌生​​。我可以在不创建平面文件的情况下执行此操作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T18:41:01.080

您不需要平面文件。使用两个连接：第一个用于源数据库，第二个用于目标数据库。使用第一个连接的源和使用第二个连接的目标创建一个数据流。连接它们并可选地在它们之间添加转换。您的问题太笼统，无法写出更准确的建议。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T21:16:41.773

您没有提供太多细节，但假设您正在谈论 SQL Server，最简单的方法是在执行 SQL 任务中使用纯 TSQL。该文档[描述](http://msdn.microsoft.com/en-us/library/ms177523%28v=sql.100%29.aspx#OtherTables)了如何`UPDATE`从另一个表中获取一个表，而不是使用两部分名称 ( `dbo.Table1`)，您可以简单地使用三部分名称 ( `DB1.dbo.Table1`)：

```
update DB1.dbo.Table1
set Column1 = t2.Column2
from DB1.dbo.Table1 t1
join DB2.dbo.Table2 t2
on t1.JoinColumn = t2.JoinColumn
where... 
```

请始终提及您使用的数据库平台（因为 SSIS 是 ETL 工具，我们不能假设您正在使用 SQL Server）、您拥有的 SQL Server / SSIS 版本（例如 2008R2）以及版本（例如企业或标准）。

# regex - 使用 Perl 正则表达式搜索和替换特定长度的字符串

> ID：12728307
> 
> 赞同：2
> 
> 时间：2012-10-04T13:25:36.897
> 
> 标签：regex, perl, replace

我正在尝试搜索和替换长度不超过 3 个字符的字符串（因此“删除”元素内容）。

所以我有类似的东西：

```
foreach (@array) {
   s/^{1,3}$//;
} 
```

例如

```
@array = ('one', 'two', 'three', 'four', 'five', 'six', 'seven'); 
```

因此，在打印时，预期输出将是：

```
result:  result:  result: three  result: four  result: five  result:  result: seven 
```

因此，对于受影响的输入，输出将是一个“空的地方”。

目前这种情况不会发生......我打赌我犯了一个简单的错误，因为我对正则表达式的理解仍然不稳定。任何帮助表示赞赏！

如果有一种简单的方法可以在不创建新数组的情况下完全删除元素，那么了解这一点也很有用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T13:31:00.897

如果要匹配任意三个字符，`s/^.{1,3}$//`应该可以。我只是在 之后添加了一个点`^`，因为您的原始正则表达式没有指定您想要匹配 1-3 的字符类型。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T13:29:49.970

大概 `s/^\w{1,3}$//;`

您忘记`\w`将其与`{1,3}`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-04T13:46:24.710

除了简单的正则表达式问题，您可以使用它`grep`来选择您想要的元素：

```
@array = grep { !/^.{1,3}$/ } @array; 
```

然后只需打印结果：

```
print "Result: $_\n" foreach @array; 
```

结果：

```
Result: three
Result: four
Result: five
Result: seven 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T13:44:55.200

我阅读您的问题的方式是您想要实际修改数组的内容。你可以这样使用[拼接](http://perldoc.perl.org/functions/splice.html)：

```
#!/usr/bin/env perl
use strict;
use warnings;
use Data::Dumper;
my @array = qw(one two three four five six seven);
my $i = 0;
for (@array) {
    m/^\w{1,3}$/ && splice(@array, $i, 1, undef);
    $i++;
}
print Dumper \@array;
print "\n";
for my $e (@array) {
    print defined $e ? "result: $e  " : "result:  "
}
print "\n"; 
```

运行时：

```
$VAR1 = [
          undef,
          undef,
          'three',
          'four',
          'five',
          undef,
          'seven'
        ];

result:  result:  result: three  result: four  result: five  result:  result: seven 
```

# opengl - 图像效果后发光 - 如何在渲染后保存发光渲染缓冲区

> ID：12728308
> 
> 赞同：1
> 
> 时间：2012-10-04T13:25:46.603
> 
> 标签：opengl, opengl-es-2.0

我在
[http://http.developer.nvidia.com/GPUGems/gpugems_ch21.html](http://http.developer.nvidia.com/GPUGems/gpugems_ch21.html)
中实现了发光 现在我想为发光部分实现后图像效果，所以它们会留下痕迹，如*21.5.4 后图像中所述文章的效果*部分。

我的方法是在水平和垂直绽放后将发光纹理传递给另一个帧缓冲区（**轨迹支架**），并根据当前**轨迹计数**（我们已经渲染到**轨迹支架**的次数），使用修改过的 alpha 颜色渲染发光纹理四边形以实现淡出效果，然后将轨迹支架纹理与当前帧最终图像混合。所以我们在之前的精灵位置得到了一系列发光的部分。
如果**trail count** == **max trail size**，则清除 trail holder。

**问题是如何从清洁中保存跟踪持有人缓冲区**，即使我评论了所有跟踪计数检查和

```
//glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
//glClearColor(...); 
```

它不会保存有关先前渲染的信息。

PS即使没有任何缓冲区和绽放，如果只是移动并绘制到默认缓冲区纹理四边形并且不清除任何它将在黑屏上移动的东西，我认为它必须自己跟踪图像，因为我们不清除任何东西。为什么以及如何解决它？对于 OpenGL ES 2.0 和桌面 OpenGL，问题似乎是通用的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:07:23.900

我建议您在屏幕外帧缓冲区对象中渲染绑定为颜色附件的一堆纹理。然后通过在渲染到屏幕帧缓冲区的后处理步骤中组合纹理层来创建发光效果。

通过使用帧缓冲区对象，您可以在您寻求的清除操作上获得隔离。

# events - xlib / 主题：如何判断窗口何时被重绘以响应属性更改？

> ID：12728310
> 
> 赞同：2
> 
> 时间：2012-10-04T13:25:57.930
> 
> 标签：events, repaint, xlib, redraw, motif

开发一种 Motif GUI 设计工具。在我以编程方式更改属性、添加/删除小部件、移动小部件等之后，我捕获了 Motif 窗口的屏幕截图，显示了当前窗口状态。仅供参考，我正在使用 cairo 2d 将窗口的 Xlib 表面捕获为 png。

大多数情况下这工作正常，但有时我的窗口捕获发生在 UI 更新完成之前。特别是在更改小部件的字体或更改图形标签上的像素图时，我偶尔会注意到这一点。

我想等到窗口完成绘制新状态后再捕获表面。

我怎样才能可靠地做到这一点？看起来 Xlib 曝光事件发生在重绘之前。我看到有一个 PropertyChange 事件 - 但文档没有说明它何时发生与绘图有关。

# c# - Connecting to multiple instances of the same COM server in parallel

> ID：12728311
> 
> 赞同：0
> 
> 时间：2012-10-04T13:26:02.300
> 
> 标签：c#, .net, com, interop

I've written a C# program that talks to a COM server to conduct simulations. It works without any trouble, but the simulations being carried out by the COM server are fairly processor intensive, and only run single core.

As such, I've used [Parallel.For](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.for.aspx) to distribute the workload amongst multiple threads. It appears, however, that all the simulation results generated by the COM server are shared amongst all instances of its classes, so when I'm running the parallel task with only 1 thread, everything works as expected, but when I'm running the task with multiple threads, the results are completely garbled (as multiple threads are effectively causing the simulation engine to replace its results with new ones as they are being read).

I was wondering if there was a way to connect to the COM server multiple times in order to stop the results-sharing of class instances?

**Edit**

My process for connecting to the COM server was to:

*   Add a reference using Project->Add References->COM (VS2010)
*   Use the following code to instantiate the simulator object:

    ```
    dss = new OpenDSSengine.DSS();
    dss.Start(0); 
    ```

The above code is called in the local thread data initialiser (localInit) parameter of [Parallel.For](http://msdn.microsoft.com/en-us/library/system.threading.tasks.parallel.for.aspx), and thus a new `dss` object is created for each thread, but the results obtained seem to be common across all threads.

The COM server is a dll.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:35:44.750

As you specify that your COM server is actually an in-proc server (a .dll instead of .exe), it means that every time you execute `new DSS()` you actually create a new instance (unless it is created with singleton class factory, which is rare but possible).

The problem, according to your description, seems to be with the fact that the `DSS` implementation uses some static/global state which results in garbled data when you parallelize the execution.

In that case you can run each instance of the server in a separate process by using [DllSurrogate](http://msdn.microsoft.com/en-us/library/ms691260.aspx). If the default surrogate (dllhost.exe) doesn't suffice, [it is possible to write the custom one](http://msdn.microsoft.com/en-us/library/ms682432.aspx). Be aware that moving the server into another process will introduce marshaling overhead for each method call done against the server.

Please also not that if you are using an [STA COM server](http://www.codeproject.com/Articles/9190/Understanding-The-COM-Single-Threaded-Apartment-Pa), your parallelization will have no effect, as all the calls to the server are serialized by COM infrastructure.

All that being said, before going there make sure that the problem is not on the caller side, i.e. with your parallelization and not the server itself.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:45:08.623

First try creating multiple instances of the COM object (just call new OpenDSSengine.DSS() multiple times, storing the results in separate variables, or in an array). If the COM server was implemented well, those multiple instances will co-exist in your process without interfering with each other, and your multi-threaded client code can use them simultaneously.

If you still find that those instances are interfering with each other, that means the COM server is using some state that is global to the process. The only way to get around that would be to invoke the multiple COM objects via multiple surrogate processes, as others have suggested.

# php - 如果一个或多个字段为空，HTML 表单不会收集数据

> ID：12728312
> 
> 赞同：2
> 
> 时间：2012-10-04T13:26:02.863
> 
> 标签：php, html, forms, post, submit

我创建了一个表单供用户填写并在提交时对其进行处理并完成工作。通常只是一个数据库查询。

对于我正在使用的数据库，某些字段可以为 NULL，因此用户可以在某些字段中留空。但是，在对此进行测试时，我尝试将一个或多个字段留空，但表单根本不会真正提交任何内容。当我调试时，当我从 POST 方法中检索值时，几乎所有字段的值，即使是其中包含文本的字段值，也会变成 NULL。

问题是，我需要能够允许用户提交一些字段为空白的表单，因为它们不是完全必要的。我该怎么办？

我是否必须检查 isset() 是否所有可能为空白的内容并将其设置为 NULL （如果是）？

提前致谢！

编辑：这是表单代码。

```
 <form onsubmit="return confirm('Are you sure you want to save the edits?');" method="post" action="orgedit.php?id=<?php echo $organization_id?>" id="orgform" name="orgform" >
Parent Organization ID: <input type="text" name="parent_id" value="<?php echo $row['parent_id']; ?>"/> <br /><br />
Organization nm: <input type="text" name="org_nm" value="<?php echo $row['org_nm']; ?>"/> <br /><br />
TBR Organization Sysnm: <input type="text" name="tbr_sysnm" value="<?php echo $row['tbr_sysnm']; ?>"/> <br /><br />
Type: <input type="text" name="type" value="<?php echo $row['type']; ?>"/> <br /><br />
Contact nm: <input type="text" name="contact_nm" value="<?php echo $row['contact_nm']; ?>"/> <br /><br />
Financial Info: <input type="text" name="financial_info" value="<?php echo $row['financial_info']; ?>"/> <br /><br />
Other Info: <input type="text" name="other_info" value="<?php echo $row['other_info']; ?>"/> <br /><br />
Active: <input type="text" name="active" value="<?php echo $row['active']; ?>"/> <br /><br />
URL: <input type="text" name="url" value="<?php echo $row['url']; ?>"/> <br /><br />
<input type="submit" value="Save Entry" name="save" />
</form> 
```

这是php处理代码:)

```
if(isset($_GET['id']))
    {
    $organization_id = $_GET['id'];
    $parent_organization_id = $_POST['parent_organization_id'];
    $organization_nm = $_POST['organization_nm'];
    $tbr_organization_sysnm = $_POST['tbr_organization_sysnm'];
    $type = $_POST['type'];
    $contact_nm = $_POST['contact_nm'];
    $financial_info = $_POST['financial_info'];
    $other_info = $_POST['other_info'];
    $active = $_POST['active'];
    $url = $_POST['url']; 
```

获得值后，我只需将它们转义并执行查询。

我已经找到问题所在了！

```
if(isset($_GET['id']))
    {
    $organization_id = $_GET['id'];
    $parent_organization_id = $_POST['parent_id'];
    $organization_nm = $_POST['org_nm'];
    $tbr_organization_sysnm = $_POST['tbr_sysnm'];
    $type = $_POST['type'];
    $contact_nm = $_POST['contact_nm'];
    $financial_info = $_POST['financial_info'];
    $other_info = $_POST['other_info'];
    $active = $_POST['active'];
    $url = $_POST['url']; 
```

我从表单中检索错误的值。这可以通过更改 php 代码或 html 代码来解决。

问题是，一个或多个字段为空的问题仍然存在。如果其中一个字段为空，则不保存条目。我检查了日志，它输出的消息是：

```
PHP Notice: Undefined index: parent_id
PHP Notice: Undefined index: org_nm
PHP Notice: Undefined index: tbr_sysnm 
```

当我没有为任何这些字段编写任何内容并尝试保存表单时，就会发生这种情况。

编辑2：问题再次得到解决。做了一个 var 转储，发现当代码试图检索值时服务器没有给出任何东西。这是一些领域的拼写错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:32:41.193

## 我的第一个猜测是：

可能您的表单输入没有名称属性。仅当输入具有 name 属性并且 PHP`$_POST`键将是该属性的名称时才提交输入数据。

让我们看看 OP 的代码，看看我的猜测是否正确。

# phpexcel - PHPExcel_Chart_DataSeriesValues

> ID：12728313
> 
> 赞同：1
> 
> 时间：2012-10-04T13:26:14.567
> 
> 标签：phpexcel

我开发了一个程序，其中包括创建包含不同单元格的新 Excel 工作表。下一步是生成一个垂直条形图来显示从数据单元格中检索到的各种数据。

`rangeToArray()`所有图表示例都可以正常工作，我没有遇到任何特定问题，但是每当我尝试通过调用and方法创建自己的图表时，`fromArray()`工作表中都不会出现任何内容，请参阅下面的代码子集以澄清此问题：

第一步包括创建一个新的工作表，其中包含两个单元格，每个单元格有 40 个数据，之后，我通过调用`rangeToArray()`方法从这些单元格中检索数据，然后最后一步是调用该`fromArray()`方法以使用这些数据创建图表，但是它不起作用，图表仍然是空的，我只能显示标题和`yAxisLabel`.

我怀疑该`fromArray()`方法有问题，但我不知道为什么，您能否通过使用这种方法给出一个类似的工作示例来帮助我？提前致谢

```
$retrieve_data = array();

$retrieve_data = $worksheet->rangetoArray("D8:E48",null,null,null);

$worksheet = $objPHPExcel->getActiveSheet();   

$objWorksheet = $worksheet;   

$objWorksheet->fromArray($retrieve_data, NULL, 'D8', false);

$dataseriesLabels = array( new PHPExcel_Chart_DataSeriesValues('String', 'Worksheet!$D$8', null, 1), new PHPExcel_Chart_DataSeriesValues('String', 'Worksheet!$E$8', null, 1),);

$xAxisTickValues = array( new PHPExcel_Chart_DataSeriesValues('String', 'Worksheet!$D$8:$D$27', null, 20),);

$dataSeriesValues = array( new PHPExcel_Chart_DataSeriesValues('Number', 'Worksheet!$D$8:$D$27', null, 20), new PHPExcel_Chart_DataSeriesValues('Number', 'Worksheet!$E$8:$E$27', null, 20),);

$series = new PHPExcel_Chart_DataSeries( PHPExcel_Chart_DataSeries::TYPE_BARCHART, plotType PHPExcel_Chart_DataSeries::GROUPING_STANDARD, range(0, count($dataSeriesValues)-1), $dataseriesLabels, $xAxisTickValues, $dataSeriesValues);

$series->setPlotDirection(PHPExcel_Chart_DataSeries::DIRECTION_COL);

$plotarea = new PHPExcel_Chart_PlotArea(null, array($series));

$legend = new PHPExcel_Chart_Legend(PHPExcel_Chart_Legend::POSITION_RIGHT, null, false);

$title = new PHPExcel_Chart_Title('Test Column Chart');

$yAxisLabel = new PHPExcel_Chart_Title('Value');

$chart = new PHPExcel_Chart( 'chart1', $title, $legend, $plotarea, true, 0, null, $yAxisLabel);

$chart->setTopLeftPosition('G2');

$chart->setBottomRightPosition('S20');

$objWorksheet->addChart($chart);

header('Content-Type: application/vnd.openxmlformats-officedocument.spreadsheetml.sheet');   
header('Content-Disposition: attachment;filename="BAL_Delhaize2012.xlsx"');   
header('Cache-Control: max-age=0');

objWriter = PHPExcel_IOFactory::createWriter($objPHPExcel, 'Excel2007'); 
$objWriter->setIncludeCharts(TRUE); 
$objWriter->save('php://output'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:01:23.463

我可以在图表定义中看到两个明显的问题：

```
$xAxisTickValues = array( 
    new PHPExcel_Chart_DataSeriesValues('String', 'Worksheet!$D$8:$D$27', null, 20),
);

$dataSeriesValues = array( 
    new PHPExcel_Chart_DataSeriesValues('Number', 'Worksheet!$D$8:$D$27', null, 20), 
    new PHPExcel_Chart_DataSeriesValues('Number', 'Worksheet!$E$8:$E$27', null, 20),
); 
```

第一组数据系列值真的应该与您的 x 轴刻度值相同吗？

```
$series = new PHPExcel_Chart_DataSeries( 
    PHPExcel_Chart_DataSeries::TYPE_BARCHART, 
    plotType PHPExcel_Chart_DataSeries::GROUPING_STANDARD, 
    range(0, count($dataSeriesValues)-1), 
    $dataseriesLabels, 
    $xAxisTickValues, 
    $dataSeriesValues
); 
```

“plotType”一词应在此处引发解析器错误。

但是，如果您认为问题出在 fromArray() 方法上，请在没有图表的情况下对其进行测试，以确认它正在执行您期望的操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T04:22:44.057

标记，

糟糕，我忘了回答你的问题。我在示例中犯了一个错误，这是关于数据系列值和 x 轴刻度值的代码：

```
$dataseriesLabels = array(
new PHPExcel_Chart_DataSeriesValues('String', 'Worksheet!$D$8', null, 1),
new PHPExcel_Chart_DataSeriesValues('String', 'Worksheet!$E$8', null, 1),);

$xAxisTickValues = array(
new PHPExcel_Chart_DataSeriesValues('String', 'Worksheet!$D$9:$D$27', null, 20),); 
```

标签位于 $D$8 和 $E$8 单元格中，而数据从 $D$9 到 $D$27

顺便说一句，当您没有收到错误消息时，调试此类问题的最简单方法是什么？

# javascript - jquery datepicker - 选定的日期加上 6 天

> ID：12728315
> 
> 赞同：3
> 
> 时间：2012-10-04T13:26:17.250
> 
> 标签：javascript, jquery, datepicker, jquery-ui-datepicker

我目前有以下代码选择所选日期的周数以及所选日期：

```
$(this).val("Week Number " + $.datepicker.iso8601Week(new Date(dateText)) + " - " + $.datepicker.formatDate('d M yy', new Date(dateText))); 
```

输出类似：

`Week Number 41 - 8 Oct 2012`

我想要实现的是如下

`Week Number 41 - 8 Oct to 14 Oct 2012`

所以选择日期到选择日期+ 6天。

任何想法我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:34:08.367

像这样：

```
$(this).val( "Week Number " + 
          $.datepicker.iso8601Week(new Date(dateText)) + 
            " - " + $.datepicker.formatDate('d M', new Date(dateText)) +
            " to " + 
            $.datepicker.formatDate('d M y', new Date(new Date(dateText).getTime() +
                                           6*24*60*60*1000) )
)); 
```

**编辑：** 将 7 天更改为 6 天。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:37:35.293

```
var sixDaysTime = new Date();
var origDate = new Date(dateText);

sixDaysTime.setDate(origDate.getDate()+6);

$(this).val("Week Number " + $.datepicker.iso8601Week(origDate)) + " - " + $.datepicker.formatDate('d M yy', origDate) + " To " + $.datepicker.formatDate('d M yy', sixDaysTime)); 
```

# log4net - log4net 记录页眉和页脚两次

> ID：12728316
> 
> 赞同：3
> 
> 时间：2012-10-04T13:26:24.827
> 
> 标签：log4net, log4net-configuration

这是我的配置：

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="log4net"
       type="log4net.Config.Log4NetConfigurationSectionHandler, log4net" />
  </configSections>

  <log4net>
    <appender name="LogFileAppender" type="log4net.Appender.FileAppender">
      <param name="File" value="Logs\StubLog.txt" />
      <param name="AppendToFile" value="true" />
      <layout type="log4net.Layout.PatternLayout">
        <param name="Header" value="[Header]&#13;&#10;" />
        <param name="Footer" value="[Footer]&#13;&#10;&#13;&#10;" />
        <param name="ConversionPattern" value="%d [%t] %-5p %c %m%n" />
      </layout>
    </appender>

    <appender name="ConsoleAppender" type="log4net.Appender.ConsoleAppender" >
      <layout type="log4net.Layout.PatternLayout">
        <param name="Header" value="[Header]\n" />
        <param name="Footer" value="[Footer]\n\n" />
        <param name="ConversionPattern" value="%d [%t] %-5p %c %m%n" />
      </layout>
    </appender>

    <root>
      <level value="DEBUG" />
      <appender-ref ref="LogFileAppender" />
      <appender-ref ref="ConsoleAppender" />
    </root>
    <logger name="NHibernate">
      <level value="WARN" />
    </logger>
  </log4net>

  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
  </startup>
</configuration> 
```

这是日志：

```
[Header]
[Footer]

[Header]
2012-10-04 14:22:01,203 [1] INFO  Stub.Program Enter application
2012-10-04 14:22:01,328 [1] DEBUG Stub.FrmMain Test
2012-10-04 14:22:03,265 [1] INFO  Stub.Program Exit application
[Footer] 
```

第一对页眉/页脚来自哪里？我可以消除它们吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-09T05:46:53.297

> 将 XmlConfigurator.Configure() 放在多个位置可能会导致拥有多个页眉和页脚对。
> 
> XmlConfigurator.Configure() 应仅在解决方案中的一处定义。更好的方法是将它放在 AssemblyInfo.cs

# javascript - Javascript - 动态创建对象时出错

> ID：12728317
> 
> 赞同：0
> 
> 时间：2012-10-04T13:26:37.047
> 
> 标签：javascript

我正在尝试将数据模拟为通常会接收 JSON 解析数据结构的函数。运行此程序时，我在这里收到错误`TypeError: can't convert undefined to object`：`data.targets[i] = {`

我究竟做错了什么？

```
function SendFakeTargets(maxTargets, interval) {
    var data = {};
    data.timestamp = +new Date;

    var time = data.timestamp * 0.0005;
    var x = Math.sin(time) * 192 + 256;
    var y = Math.cos(time * 0.9) * 192 + 256;

    console.log(x, y);

    for (var i = 0; i < maxTargets; i++) {
        console.log(i);

        data.targets[i] = { //error is here
            id: i,
            x: x + (i * 10),
            y: y + (i * 10)
        };
    }

    HandleTargetData(data);

    setTimeout("SendFakeTargets("+maxTargets+", "+interval+")", interval);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T13:28:43.997

你应该事先声明

```
data.targets = []; 
```

`data.targets[i]`在循环内使用之前，否则`data.targets`为`undefined`. 用更短的方式你可以写

```
var data = {
    timestamp : +new Date,
    targets   : []
}; 
```

* * *

作为旁注，永远不要在`setTimeout/Interval`. 改为

```
 setTimeout(function() {
      SendFakeTargets(maxTargets, interval);
 }, interval); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:30:40.240

我认为您需要在使用它之前初始化目标数组，因为它是未定义的。您将数据定义为

`var data = {}`

这将它声明为一个空对象，您正在使用它执行的任何其他操作都是动态添加的 - 数组需要在您可以调用其中的任何索引之前进行初始化。我相信你需要做的是：

`var data = { targets: [] }`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:29:17.520

您从未将“data.targets”声明为对象，因此 javascript 不知道如何为其分配任何内容。

在您的代码顶部定义“目标”：

```
data.timestamp = +new Date;
data.targets = {} or [];
... 
```

# c++ - 在 lambda 中是否有很好的方法来记录函数名称？

> ID：12728318
> 
> 赞同：15
> 
> 时间：2012-10-04T13:26:49.793
> 
> 标签：c++, c++11

我们的日志框架，像大多数日志框架一样，使用`__FUNCTION__`预处理器宏将当前函数插入日志文件，以便我们的日志看起来像：

```
L4  T11332 609661594 [PreProcessorFunctions::RegenerateLinkIDs] [ENTER]
L4  T11332 609661594 [PreProcessorFunctions::RegenerateLinkIDs] [EXIT]
L4  T11332 609661594 [ConfigMerger::ValidateConfigObject] [ENTER]
L3  T11332 609661594 [ConfigMerger::ValidateConfigObject] Configuration Exists: 1 
```

随着我们开始更多地使用 C++11，我注意到 labmdas 会产生准确但无用的`__FUNCTION__`输出：

```
L4  T9604 609661594 [`anonymous-namespace'::<lambda1>::operator ()] Writing EMX config file: C:\windows\TEMP\CBE01448-32A2-493A-A9A1-2112F5709028\CA37BE5C-B398-4D61-980D-66B8E1E6D001\\EMXConfiguration.xml
L4  T11332 609661594 [`anonymous-namespace'::<lambda3>::operator ()] Writing Auditing config file: C:\windows\TEMP\CBE01448-32A2-493A-A9A1-2112F5709028\CA37BE5C-B398-4D61-980D-66B8E1E6D001\\Auditing.xml
L4  T11960 609661594 [`anonymous-namespace'::<lambda2>::operator ()] Writing UEM config file: C:\windows\TEMP\CBE01448-32A2-493A-A9A1-2112F5709028\CA37BE5C-B398-4D61-980D-66B8E1E6D001\\Configuration.xml 
```

如您所见，所有类范围都已丢失，我们现在只知道此日志记录语句来自匿名 lambda。有没有人有注销封闭功能的好策略？这似乎是最有用的记录...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-04T13:35:33.727

我认为唯一的解决方法是在封闭函数中扩展`__FUNCTION__`（或`__func__`在 C++11 中）并在 lambda 中捕获它。

```
void f(){
  auto& _func_ = __func__;
  [&]{ std::cout << _func_; };
} 
```

不过，我会将其标记为“实施质量”问题。例如，GCC 提供了`__PRETTY_FUNCTION__`可以更好地扩展 lambdas 的宏（并且通常）：

```
#include <iostream>

struct X{
  void f(){
    []{ std::cout << __PRETTY_FUNCTION__ << "\n"; }();
  }
};

int main(){
  X().f();
} 
```

输出：`X::f()::<lambda()>`

[活生生的例子。](http://ideone.com/TF8cD9)

# php - PHP、XML 获取记录节点和值并将它们放入 JSON 数组？

> ID：12728323
> 
> 赞同：-2
> 
> 时间：2012-10-04T13:27:06.647
> 
> 标签：php, xml, json

> **可能重复：**
> [在 XPath 和 XQuery](https://stackoverflow.com/questions/3448005/implementing-condition-in-xpath-and-xquery)
> [PHP 中实现条件将 XML 转换为 JSON](https://stackoverflow.com/questions/8830599/php-convert-xml-to-json)

如何从包含 Product = Product1 的记录中获取所有子注释并将它们放入 JSON 数组中？

```
<RECORD>
<PROP NAME="Product">
<PVAL><!CDATA[Produkt1]]</PVAL>
<PROP NAME="Value">
<PVAL><!CDATA[10]]</PVAL>
<PROP NAME="Status">
<PVAL><!CDATA[Active]]</PVAL>
</RECORD>
<RECORD>
<PROP NAME="Product">
<PVAL><!CDATA[Produkt2]]</PVAL>
<PROP NAME="Value">
<PVAL><!CDATA[20]]</PVAL>
<PROP NAME="Status">
<PVAL><!CDATA[Active]]</PVAL>
</RECORD>
<RECORD>
<PROP NAME="Product">
<PVAL><!CDATA[Produkt3]]</PVAL>
<PROP NAME="Value">
<PVAL><!CDATA[30]]</PVAL>
<PROP NAME="Status">
<PVAL><!CDATA[Active]]</PVAL>
</RECORD> 
```

我需要 iPad 应用程序的数据，调用类似 www.products.com/product.php?Product1

让 JSON 看起来像

```
{
 "Product": [
 { "Name":"Product1" , "Value":"10" , "Status":"Active" }
 ]
 } 
```

编辑：使用 XML 阅读器的解决方案

```
<?php
$z = new XMLReader;
$z->open('products.xml');

$doc = new DOMDocument;

// move to the first <product /> node
while ($z->read() && $z->name !== 'RECORD');

// now that we're at the right depth, hop to the next <product/> until the end of the tree
while ($z->name === 'RECORD')
{

    $node = simplexml_import_dom($doc->importNode($z->expand(), true));

    $strvalue = $node->PROP[6]->PVAL;
    echo $strvalue."<p>" ;

    // go to next <product />
    $z->next('RECORD');
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:01:39.277

首先，仅查看您的 XML 就让我头疼。以下是您需要进行的一些更改：

1.  如果您将有多个节点，那么您需要一个包装器，例如在所有节点之前和所有节点之后。
2.  你的 PROP 节点需要一个结束标签
3.  您的 CDATA 格式错误，正确的格式是

这是我新格式化的 XML 的示例：

```
<?xml version='1.0'?>
<RECORDS>
    <RECORD>
    <PROP NAME="Product">
        <PVAL><![CDATA[Produkt1]]></PVAL>
    </PROP>
    <PROP NAME="Value">
        <PVAL><![CDATA[10]]></PVAL>
    </PROP>
    <PROP NAME="Status">
        <PVAL><![CDATA[Active]]></PVAL>
    </PROP>
</RECORD>
<RECORD>
    <PROP NAME="Product">
        <PVAL><![CDATA[Produkt2]]></PVAL>
    </PROP>
    <PROP NAME="Value">
        <PVAL><![CDATA[20]]></PVAL>
    </PROP>
    <PROP NAME="Status">
        <PVAL><![CDATA[Active]]></PVAL>
    </PROP>
</RECORD>
<RECORD>
    <PROP NAME="Product">
        <PVAL><![CDATA[Produkt3]]></PVAL>
    </PROP>
    <PROP NAME="Value">
        <PVAL><![CDATA[30]]></PVAL>
    </PROP>
    <PROP NAME="Status">
        <PVAL><![CDATA[Active]]></PVAL>
    </PROP>
</RECORD> 
```

一旦 XML 的格式正确，我会使用 SimpleXML 之类的东西来解析它：

```
$xml = simplexml_load_string( $xml_string );
foreach ($xml->RECORD as $record)
{
    if ($record->PROP[0]->PVAL == 'Produkt1')
    {
        echo json_encode( $record );
    }
} 
```

我还认为您可以从重构整个 XML 中真正受益。就像是：

```
<RECORDS>
    <RECORD ID="1">
        <PRODUCT>PRODUCT 1</PRODUCT>
        <VALUE>10</VALUE>
        <STATUS>Active</STATUS>
    </RECORD>
    <RECORD ID="2">
        <PRODUCT>PRODUCT 2</PRODUCT>
        <VALUE>20</VALUE>
        <STATUS>Active</STATUS>
    </RECORD>
    <RECORD ID="3">
        <PRODUCT>PRODUCT 3</PRODUCT>
        <VALUE>30</VALUE>
        <STATUS>Active</STATUS>
    </RECORD>
</RECORDS> 
```

那么PHP就像：

```
foreach ($xml->RECORD as $record)
{
    $attr = $record->attributes();
    if( $attr['ID'] == '1' )
    {
        echo json_encode( $record );
    }
} 
```

# webforms - 自动检测信用卡类型与询问用户

> ID：12728329
> 
> 赞同：3
> 
> 时间：2012-10-04T13:27:27.473
> 
> 标签：webforms, credit-card, pci-compliance

询问用户正在输入什么类型的信用卡或尝试使用正则表达式自动检测卡类型更好吗？

一些在线商家会在下拉菜单中明确询问信用卡类型（Visa、Mastercard、Amex 等）。而其他人，包括亚马逊和 GitHub，从不明确询问，而是依靠卡的属性来确定卡号。

依赖卡类型自动检测的一个问题是信用卡正则表达式模式似乎需要随着时间的推移而更新。因此，这些正则表达式模式可能需要不断更新以保持准确并防止模式中出现漏洞。

明确询问用户卡类型或尝试自动检测卡类型哪个更好？还有其他考虑吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T20:37:56.727

我做这种 sfwr 已经 20 年了，但我仍然有时会在网上下订单时犯错误标记我的卡的错误。然后我得到我给的号码不是VISA卡的错误。愚蠢的，当程序员关注这个并且从不向购物者显示这样的错误时是如此微不足道。

Paypal 是唯一一个希望您在交易中提交卡类型的主要网关（我从未测试过如果您弄错了他们是否会返回错误）。购物者可能会像我有时那样弄错卡片，但正则表达式永远不会。如果您正在为任何主要网关写作，但 Paypal 无论如何都不会询问您，或者您提供的答案将被忽略。

让您的购物者和商家对更快的结帐感到满意，使结帐过程变得最简单。它不会对交易产生重大影响。

仔细查看您的网关 API - 我敢打赌他们甚至没有问过 - 他们可以通过查看卡号来判断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T14:38:28.407

他们可能要求信用卡类型的原因之一是提供多部分文本输入。

*   `XXX - XXXX - XXXX - XXXX`美国运通
*   `XXXX - XXXX - XXXX - XXX`为航路
*   `XXXX - XXXX - XXXX - XXXX`为他人

有人可能会争辩说，这种方式更有用，因为用户获得了与卡片匹配的视觉表示。此外，它可能是为了提示在哪里可以找到 CSC（虽然，这也可以从数字中推断出来）。

# javascript - 使用javascript更改浏览器缩放时如何检索tr高度？

> ID：12728332
> 
> 赞同：1
> 
> 时间：2012-10-04T13:27:41.640
> 
> 标签：javascript, jquery, asp.net, tablerow

我正在一个网站上工作，`ASP.Net`当浏览器缩放发生变化时，我需要使用 javascript 或 jquery 检索表格行高。我尝试使用`$("#idOfTableRow").height();`，但它给了我一个空值可能是因为该表存在于默认页面中，而我正在另一个与默认页面无关的页面中编写 jquery 代码。有人可以告诉我该怎么做才能找回 tr 高度吗？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:34:56.427

也许在 js 中它会在你的默认页面中工作。

```
 document.getElementById('yourtablerowid').clientHeight 
```

# android - Android：音频循环不完美

> ID：12728333
> 
> 赞同：1
> 
> 时间：2012-10-04T13:27:46.200
> 
> 标签：android, loops, media-player

在我的应用程序中，我使用以下说明设置了一个媒体播放器：

```
mpBackGround = MediaPlayer.create(context, R.raw.bg_music);
            mpBackGround.setVolume(0.7f, 0.7f);
            mpBackGround.setLooping(true);
            mpBackGround.start(); 
```

但是在第一个循环结束时，我在第一个循环和第二个循环之间有一点停顿；我还在文件（bg_music）中删除了静音空间。对于 .mid 类型的文件，我没有问题，但对于 mp3、wav 和其他文件，我有这个问题……而且我有所有 mp3 文件（不是 midi）。有没有另一种解决方案来解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:39:47.680

只是出于好奇，循环之间的这个小停顿是否大致相当于从文件的一端到另一端寻找所需的时间？对我来说，这听起来像是与性能问题相关的问题。

如果是这样的话，我会创建两个媒体播放器实例，并处理我自己的重复。如， .start() 一个在另一个完成时。然后你可以在另一个播放时“倒带”一个。

# mysql - 重构巨大的非规范化 mysql 数据库第 2 部分

> ID：12728340
> 
> 赞同：0
> 
> 时间：2012-10-04T13:28:15.857
> 
> 标签：mysql, database-design, innodb, database-schema, amazon-rds

我有一个约 4 亿行的非规范化数据库，我已将所有重复数据移动到一个新的规范化数据库中，因此我可以用 id 来表示它。

现在我需要移动所有数据条目并将其转换为包含 id 的条目。

问题是 400m 行需要一段时间.. 我需要帮助来优化。

此查询每行需要 0.4 秒，因此需要几个月的时间：

```
INSERT IGNORE INTO normalized.entry (insDate, `date`, project, keyword, url, position, competition, serachEngine)
SELECT 
CURDATE() as insDate
, d.id as dateId
, p.id as projectId
, k.id as keywordId
, z.id AS urlId 
, old.position
, old.competition
, s.id as searchEngineId

FROM unnormalized.bigtable old
INNER JOIN normalized.`date` d  ON old.insDate = d.`date`
INNER JOIN normalized.project p ON old.awrProject = p.project
INNER JOIN normalized.searchEngine s ON old.searchEngine = s.searchEngine
INNER JOIN normalized.keyword k ON old.keyword = k.keyword
INNER JOIN normalized.urlHash z ON old.url = z.url
WHERE old.id >= ".$start." AND old.id <= ".$stop.""; 
```

如果我使用更多的 php 并将其分成两个查询，那么每个条目只需要 0.07 秒，但这也需要几个月的时间：

```
$q = "SELECT tmp.id
              , d.id as dateId
              , p.id as projectId
              , k.id as keywordId
              , tmp.position
              , tmp.competition
              , s.id as searchEngineId
              , tmp.url
              , z.id AS urlId 
               FROM unnormalized.bigtable tmp
        INNER JOIN normalized.`date` d ON tmp.insDate = d.`date`
        INNER JOIN normalized.project p ON tmp.awrProject = p.project
        INNER JOIN normalized.searchEngine s ON tmp.searchEngine = s.searchEngine
        INNER JOIN normalized.keyword k ON tmp.keyword = k.keyword
        INNER JOIN normalized.urlHash z ON tmp.url = z.url
        WHERE tmp.id > ".$start." AND tmp.id < ".$stop."";
        // echo $q;
            $result = mysql_query($q, $local);
            if (mysql_num_rows($result) > 0) {
            while ($row = mysql_fetch_array($result)) {
            $q = "SELECT id FROM normalized.url WHERE url = '".$row["url"]."'";
            $resultUrl = mysql_query($q, $local);
            $rowUrl = mysql_fetch_array($resultUrl);

            $q = "INSERT IGNORE normalized.entry (insDate, `date`, project, keyword, url, position, competition, serachEngine) VALUES (NOW(), '".$row["dateId"]."', '".$row["projectId"]."', '".$row["keywordId"]."', '".$rowUrl["id"]."', '".$row["position"]."', '".$row["competition"]."', '".$row["searchEngineId"]."')"; 
```

如果不花半年时间，我不知道如何移植这些数据！/它需要的所有帮助

规格：我在 RDS 亚马逊服务器上使用 InnoDB。

编辑：第一个查询的解释选择：

id,select_type,table,type,possible_keys,key,key_len,ref,rows,Extra 1,SIMPLE,p,index,NULL,projectName,42,NULL,1346,"使用索引" 1,SIMPLE,s,index,NULL ,searchEngine,42,NULL,2336,"使用索引；使用连接缓冲区" 1,SIMPLE,k,index,NULL,keyword,42,NULL,128567,"使用索引；使用连接缓冲区" 1,SIMPLE,tmp,ref ,"keyword_url_insDate,keyword,searchEngine,url,awrProject",keyword_url_insDate,767,func,115,"使用 where" 1,SIMPLE,d,eq_ref,date,date,3,intradb.tmp.insDate,1,"使用 where ; 使用索引" 1,SIMPLE,z,ref,url,url,767,bbointradb.tmp.url,1,"使用索引"

显示创建表：

'rankingUrls201001', 'CREATE TABLE `rankingUrls201001`( `id`int(11) NOT NULL AUTO_INCREMENT, `insDate`datetime NOT NULL, `keyword`varchar(255) COLLATE utf8_swedish_ci NOT NULL, `searchEngine`varchar(25) COLLATE utf8_swedish_ci NOT NULL, `url`varchar(255) COLLATE utf8_swedish_ci NOT NULL, `position`int(11 ) ) NOT NULL, `competition`varchar(20) COLLATE utf8_swedish_ci NOT NULL, `awrProject`varchar(200) COLLATE utf8_swedish_ci NOT NULL, `server`varchar(20) COLLATE utf8_swedish_ci NOT NULL, `rank`varchar(40) COLLATE utf8_swedish_ci NOT NULL, PRIMARY KEY ( `id`), KEY `keyword_url_insDate`( `keyword`, `url`, `insDate`) , 键`keyword`( `keyword`), 键`searchEngine`( `searchEngine`), 键`url`( `url`), 键`awrProject`(`awrProject`) ) ENGINE=InnoDB AUTO_INCREMENT=2266575 默认字符集=utf8 COLLATE=utf8_swedish_ci'

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T15:38:07.463

@Robin，为了加快数据传输过程，您应该采取适当的步骤以确保所有处理都在内存中完成，并且您应该尽可能避免任何写入磁盘的操作。如果您执行以下步骤，文件传输处理时间应该会减少：

1.  首先，将您的数据库实例配置为分配尽可能多的临时工作区。

2.  其次，将流程拆分为多步骤流程，这样每个处理阶段都将以最少的写入磁盘活动完成。

3.  最后，禁用二进制日志；这将减少 WRITE 到磁盘的处理，在许多情况下可以将查询响应时间减少一半。

这些步骤应该会加快处理速度，但考虑到您拥有的数据行数量，传输和处理仍可能需要一定的时间。

# objective-c - iPad 自定义/动态布局

> ID：12728342
> 
> 赞同：2
> 
> 时间：2012-10-04T13:28:18.817
> 
> 标签：objective-c, ios, ipad

我是 iOS 开发的新手。我已经阅读了几个教程并了解了基础知识，但目前我被困在如何继续前进。我正计划为基本的家庭自动化（即开关灯、测量温度等）创建一个应用程序。后端都设置好了，所以这只是前端。这就是我打算做的：

*   应用程序的主视图应显示平面图或房屋布局
*   在这个平面图上，您应该能够添加灯光/传感器/等。- 让我们说对象保持通用
*   这些对象应该是可拖动的，以便您可以根据它们的实际位置（物理上）将它们排列在平面图上 - 理想情况下，这种拖动模式是可切换的，类似于在主屏幕上重新排列图标
*   每个对象都应该有一个弹出视图（即设置调光器强度、开关灯等）

我知道有很多工作要做，但我真的不知道如何设置它。目前的替代品：

1.  创建一个自定义 UIView 子类，其中包含在自定义代码中进行绘图的所有逻辑，即拖动、弹出框定位等 - 但我觉得我不会真正利用 iOS 框架功能
2.  将平面图显示为 UIImageView 和每个对象的一个​​ UIButton。这样做的好处是我可以使用 StoryBoard 进行布局和布线（即为弹出框创建 segues 等） - 但我根本无法弄清楚如何使用可变数量的按钮来做到这一点（因为我不知道提前有多少按钮）。有没有办法在代码中创建这些按钮？
3.  使用自定义 UITableView。我已经看到了几个示例，即使布局与表格无关（例如在我的示例中），它们似乎也使用表格视图，但是我还没有找到任何教程可以更详细地解释此概念

还是我完全走错了路？任何输入表示赞赏。

感谢：D。

更新：经过更多的研究和思考，我认为使用 iOS 6 的方法是使用带有自定义布局的 UICollectionView。一旦我想出了一个完整的解决方案，我会在这里发布。对于较旧的 iOS 版本，我认为使用 Option Nr 会很有希望。2 - 即在代码中创建每个 UIButton（用于自动化对象，例如灯）并使用自定义 UIView 子类来对这些按钮进行布局。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-10T14:40:54.787

好的，我认为 UICollectionView 非常适合这种使用场景，我很幸运能够开始使用 iOS 编程，就像它被引入框架一样。下面的示例是一个 UICollectionView，它根据元素的固有坐标显示其元素。这个例子也可以应用于在地图上定位对象。我在其他地方找不到任何示例，所以我将在此处发布主要步骤（因为我是初学者，请纠正任何错误）。

首先，我在 XCode 中创建了一个带有一个视图和故事板的简单项目。我删除了标准视图并插入了一个集合视图控制器，并将我的 UICollectionViewController 子类配置为应该使用的类（在情节提要中控制器的属性中）。

对于演示，只需将默认 UICollectionViewCell 的背景设置为一种颜色，并将此示例的 Identifier 设置为“AutomationCell”（如果您更改它，请务必调整下面的代码）。

首先，我创建了一个简单的对象，其中包含一些属性，这些属性表示应该在平面图上显示的对象：

```
@interface AULYAutomationObject : NSObject

@property NSString *title;
@property CGPoint position;

@end 
```

然后我需要我自己的委托作为标准 UICollectionViewDelegate 的子类，因为我的自定义 UICollectionViewLayout 将无法直接访问 dataSource 对象。因此，我提供了一种方法，可以为我提供对象的位置：

```
@protocol AULYAutomationObjectLayoutDelegate <UICollectionViewDelegate>

- (CGPoint)getPositionForItemAtIndexPath:(NSIndexPath *)indexPath;

@end 
```

确保在您的控制器中实现此协议，如下所示：

```
@interface AULYViewController : UICollectionViewController <AULYAutomationObjectLayoutDelegate> 
```

然后我在视图控制器子类中实现了标准数据源和委托方法以及我的自定义方法：

```
@interface AULYViewController ()

@property NSArray *objects;
@property (strong, nonatomic) IBOutlet UICollectionView *collectionView;

@end

@implementation AULYViewController

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Set up the data source
    NSMutableArray *automationObjects = [[NSMutableArray alloc] initWithCapacity:10];

    // add some objects here...

    self.objects = [automationObjects copy];

    UILongPressGestureRecognizer *longPressRecognizer = [[UILongPressGestureRecognizer alloc] initWithTarget:self action:@selector(handleTapGesture:)];
    [self.collectionView addGestureRecognizer:longPressRecognizer];
}

#pragma mark - UICollectionViewController 
- (NSInteger)numberOfSectionsInCollectionView:(UICollectionView *)collectionView
{
    return 1;
}

- (NSInteger)collectionView:(UICollectionView *)collectionView numberOfItemsInSection:(NSInteger)section
{
    return self.objects.count;
}

- (UICollectionViewCell *)collectionView:(UICollectionView *)collectionView cellForItemAtIndexPath:(NSIndexPath *)indexPath
{
    AULYAutomationObjectViewCell *cell = [collectionView     dequeueReusableCellWithReuseIdentifier:@"AutomationCell" forIndexPath:indexPath];
    // If you have a custom UICollectionViewCell with a label as outlet 
    // you could for example then do this:
    // AULYAutomationObject *automationObject = self.objects[indexPath.row];
    // cell.label.text = automationObject.title;
    return cell;
}

#pragma mark - AULYAutomationObjectLayoutDelegate

- (CGPoint)getPositionForItemAtIndexPath:(NSIndexPath *)indexPath
{
    AULYAutomationObject *automationObject = self.objects[indexPath.item];
    return automationObject.position;
} 
```

在实际项目中，您可能会从对象模型位置到屏幕上的位置（例如 GPS 数据到像素）进行一些转换，但为了简单起见，这里省略了这一点。

完成之后，我们仍然需要设置我们的布局。这具有以下属性：

```
@interface AULYAutomationObjectLayout : UICollectionViewLayout

@property (nonatomic, strong) NSIndexPath *draggedObject;
@property (nonatomic) CGPoint dragPosition;

@end 
```

以及以下实现：

```
@implementation AULYAutomationObjectLayout

- (void)setDraggedObject:(NSIndexPath *)draggedObject
{
    _draggedObject = draggedObject;
    [self invalidateLayout];
}

- (void)setDragPosition:(CGPoint)dragPosition
{
    _dragPosition = dragPosition;
    [self invalidateLayout];
}

- (UICollectionViewLayoutAttributes *)layoutAttributesForItemAtIndexPath:(NSIndexPath *)indexPath
{
    UICollectionViewLayoutAttributes *layoutAttributes = [UICollectionViewLayoutAttributes layoutAttributesForCellWithIndexPath:indexPath];
    id viewDelegate = self.collectionView.delegate;
    if ([viewDelegate respondsToSelector:@selector(getPositionForItemAtIndexPath:)])
    {
        CGPoint itemPosition = [viewDelegate getPositionForItemAtIndexPath:indexPath];
        layoutAttributes.center = itemPosition;
        layoutAttributes.size = CGSizeMake(ITEM_SIZE, ITEM_SIZE);
    }

    if ([self.draggedObject isEqual:indexPath])
    {
        layoutAttributes.center = self.dragPosition;
        layoutAttributes.transform3D = CATransform3DMakeScale(1.5, 1.5, 1.0);
        layoutAttributes.zIndex = 1;
    }

    return layoutAttributes;
}

- (NSArray *)layoutAttributesForElementsInRect:(CGRect)rect
{
    NSMutableArray *allAttributes = [[NSMutableArray alloc] initWithCapacity:4];
    for (NSInteger i = 0; i < [self.collectionView numberOfItemsInSection:0]; i++)
    {
        NSIndexPath *indexPath = [NSIndexPath indexPathForItem:i inSection:0];
        UICollectionViewLayoutAttributes *layoutAttributes = [self layoutAttributesForItemAtIndexPath:indexPath];
        [allAttributes addObject:layoutAttributes];
    }
    return allAttributes;
}

- (BOOL)shouldInvalidateLayoutForBoundsChange:(CGRect)newBounds
{
    return YES;
}

- (CGSize)collectionViewContentSize
{
    return [self.collectionView frame].size;
}

@end 
```

要在情节提要中设置自定义布局，只需转到控制器视图的属性并选择自定义作为布局类型 - 然后选择您的自定义类。

现在要使用长按手势启用拖放支持，只需将以下内容添加到您的控制器：

```
- (void)handleTapGesture:(UITapGestureRecognizer *)sender
{
    AULYAutomationObjectLayout *automationLayout = (AULYAutomationObjectLayout *)self.collectionView.collectionViewLayout;
    if (sender.state == UIGestureRecognizerStateBegan)
    {
        CGPoint initialPinchPoint = [sender locationInView:self.collectionView];
        NSIndexPath* tappedCellPath = [self.collectionView indexPathForItemAtPoint:initialPinchPoint];
        [self.collectionView performBatchUpdates:^{
            automationLayout.draggedObject = tappedCellPath;
            automationLayout.dragPosition = initialPinchPoint;
        } completion:nil];
    }
    else if (sender.state == UIGestureRecognizerStateChanged)
    {
        automationLayout.dragPosition = [sender locationInView:self.collectionView];
    }
    else if (sender.state == UIGestureRecognizerStateEnded)
    {
        AULYAutomationObject *automationObject = self.objects[automationLayout.draggedObject.item];
        automationObject.position = [sender locationInView:self.collectionView];
        [self.collectionView performBatchUpdates:^{
            automationLayout.draggedObject = nil;
            automationLayout.dragPosition = CGPointMake(0.0, 0.0);
        } completion:nil];
    }
} 
```

**一个重要的注意事项：（**这至少花费了我一个小时）：使用 transform3D 时，您应该确保将 QuartzCore 导入链接的框架（在方向设置下方的项目属性中）。否则，您将收到一个 Mach-O 链接器错误，提示找不到 _CATransform3DMakeScale。

# javascript - 在cordova程序中，如何在JAVASCRIPT中获取NSArray返回值

> ID：12728343
> 
> 赞同：1
> 
> 时间：2012-10-04T13:28:18.657
> 
> 标签：javascript, nsarray, cordova

我在我的 ios 程序中使用了 cordova(phonegap) 框架。在本机 *.m 代码中，我想将 Array 对象返回给 javascript。代码是：

```
 -(void)getDeviceInfo:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options
  {
    unsigned char deviceInfo[30]={0};
    sprintf(deviceInfo,"%s","aaabbb");
    NSData* returnValue=[[NSData alloc]initWithBytes:deviceInfo length:7];
    NSArray *jsResult = [NSArray arrayWithObjects:returnValue,nil];
    CDVPluginResult *result;
    result = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsArray:jsResult];
    [self writeJavascript:[result toSuccessCallbackString:globalCallbackId]];
  } 
```

在javascript中，代码是：

```
 function callGetDeviceInfo() {
            HijackMgrPlugin.getDeviceInfo( deviceInfoResultHandler, nativePluginErrorHandler,null);
        }

        function deviceInfoResultHandler (result) {
            alert("deviceInfo: \r\n");
            //alert("deviceInfo: \r\n"+result );
        }

        function nativePluginResultHandler (result) {
            alert("SUCCESS: \r\n"+result );
        } 
```

但是没有出现警告框。在我把返回值改成messageAsString:@"aabb"，然后alert box就ok了，我就可以得到返回值了。但是当它是 NSArray 值时，我可以得到任何结果，请帮忙。

# javascript - DOM 弹出窗口中的 JavaScript

> ID：12728344
> 
> 赞同：0
> 
> 时间：2012-10-04T13:28:20.427
> 
> 标签：javascript, silverstripe

**银条 2.4.7**

你好

我一直在阅读本[教程](http://www.ssbits.com/snippets/2011/inserting-javascript-into-a-dom-popup/)并尝试实现它，但我很困惑。它似乎不起作用，但我没有收到错误或任何东西。

我的问题是我缺少诸如模块之类的东西吗？我已经实现了这样的代码......

```
 JQ = jQuery.noConflict();
   JQ(document).ready(function() {
   // Find the select box, named differently on the update and add forms
   var sel = JQ('select[id="DataObjectManager_Popup_DetailForm_Status"]');
   if (sel.attr('id') == undefined) {
       sel = JQ('#DataObjectManager_Popup_DetailForm_Status');
   }

   // hide either the internal or external link editing box
   if (sel.val() == 'rejected' || 'Rejected') {
       JQ('#DataObjectManager_Popup_DetailForm_Reason').show();
   }  else {
       JQ('#DataObjectManager_Popup_DetailForm_Reason').hide();
   };

   // toggle boxes on drop down change
   sel.change(function(e) {
   if (sel.val() == 'rejected' || 'Rejected') {
     JQ('#DataObjectManager_Popup_DetailForm_Reason').show();
   }  else {
     JQ('#DataObjectManager_Popup_DetailForm_Reason').hide();
   };
 });
}); 
```

当我使用下拉菜单时没有任何反应，所以我还需要安装一个模块还是我还缺少其他东西？

提前致谢。

# html - 如何覆盖锚标记属性？

> ID：12728348
> 
> 赞同：-1
> 
> 时间：2012-10-04T13:28:27.637
> 
> 标签：html, css

我的 style.css 中已经有这段代码（使用 wordpress）：

```
a:link, a:visited {
    color: #3088FF;
    text-decoration: none;
} 
```

我想更改类别的锚文本颜色、字体样式、粗体等。我怎样才能覆盖这个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T13:35:03.463

如果必须覆盖现有样式，请使用`!important`声明。例如，

```
.myStyledLink{
    color: #FFF !important;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T13:34:20.353

假设您的意思是锚已经具有您希望用 CSS 覆盖的内联样式，请使用`!important`关键字：

```
<a href="#" style="color: red;">hello</a>​​​​​​​​​​​​​​​​ 
```

CSS：

```
a:link, a:visited {
    color: #3088FF !important;
    text-decoration: none;
}​ 
```

[现场测试用例](http://jsfiddle.net/3873c/)。

这将覆盖所有其他样式，包括内联样式，如果您担心跨浏览器兼容性，那么您不应该：[哪些浏览器支持“！important”？](https://stackoverflow.com/questions/1330184/what-browsers-support-important)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T12:25:00.980

在输出 HTML 中标识类别小部件的 ID。假设`id="widget-cat"`，然后按如下方式创建一个 CSS 规则来覆盖该小部件中的链接颜色，例如

```
#widget-cat a:link, #widget-cat a:visited  {
    color: #FFF;
} 
```

使用`!important`确实是覆盖样式的最后手段，我建议仅在需要覆盖无法更具体且由您无法控制的第三方开发人员编写的 CSS 规则时才使用它。

# java - 在 Java 中通过 SSL 使用 WebService

> ID：12728350
> 
> 赞同：0
> 
> 时间：2012-10-04T13:28:38.777
> 
> 标签：java, web-services

我想使用 Java 中的 Web 服务并且我正在使用 JAX.WS。一切正常，直到我尝试通过 SSL (https) 使用 web 服务。我已使用 keytool 将站点的证书添加到密钥库。仍然没有成功。以前有人做过吗？该网络服务来自第三方支付网关，如 paypal-payflo 等......因此，其证书来自 Verisign 的常规网络服务。任何提示都会有所帮助。它是一个带有 wsdl 的 SOAP 网络服务。

错误跟踪：

> 线程“主”javax.xml.ws.WebServiceException 中的异常：无法访问位于 xxxxx.xxxxxx.xxx/creditcardWS/CreditCardService/v1?wsdl 的 WSDL。它失败了：得到连接被拒绝：从 xxxxxx.xxxxxx.xxx/creditcardWS/CreditCardService/v1?wsdl 打开流时连接。在 com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.tryWithMex(RuntimeWSDLPars‌​er.java:173) 在 com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.ja‌​ va:155）在 com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.ja‌​va:120) 在 com.sun.xml.internal.ws.client.WSServiceDelegate.parseWSDL(WSServiceDelegate. jav‌​a:260) 在 com.sun.xml.internal.ws.client.WSServiceDelegate.(WSServiceDelegate.java:2‌​23) 在 com.sun.xml.internal.ws.client.WSServiceDelegate.(WSServiceDelegate.java:

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-15T11:17:39.210

将您自己的密钥库设置为 javax.net.ssl.trustStore 有帮助吗？

```
String keystorePath = "local.keystore";
System.setProperty("javax.net.ssl.trustStore", keystorePath); 
```

请务必检查您是否可以从该路径读取（当前示例假设`local.keystore`在类路径中。

# javascript - Ext JS 4 - 克隆节点并附加到 DOM 中的其他位置

> ID：12728355
> 
> 赞同：0
> 
> 时间：2012-10-04T13:29:05.777
> 
> 标签：javascript, dom, extjs, clone

我正在尝试`<thead>`在 Ext JS 中克隆一个元素并将其附加到 DOM 中的另一个位置。

我以这个小提琴为例：

[http://jsfiddle.net/DUnWy/3/](http://jsfiddle.net/DUnWy/3/)

作为框架的新手，我在基础知识方面有点挣扎，看不出为什么这段代码对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:37:39.813

Ext.select 方法返回一个`Ext.CompositeElement`遵循[Composite Pattern](http://en.wikipedia.org/wiki/Composite_pattern)的实例，这意味着它是一个封装了多个相同类型元素的对象。要访问第一个表头 DOM 元素，`Ext.select`您必须执行以下操作：

```
Ext.select('.data-grid thead').first().dom 
```

我不确定为什么`Ext.DomHelper.append`不起作用，但以下代码有效：

```
Ext.onReady(function() {

    var hdr = Ext.select('.data-grid thead').first().dom,
        cntr = Ext.select('.clone table').first().dom,
        clone = Ext.clone(hdr);

    cntr.appendChild(clone);

});​ 
```

# c# - 如何获取 IEnumerable 的基本类型

> ID：12728356
> 
> 赞同：8
> 
> 时间：2012-10-04T13:29:06.183
> 
> 标签：c#, ienumerable

> **可能重复：**
> [从 IEnumerable<T> 获取类型 T](https://stackoverflow.com/questions/906499/getting-type-t-from-ienumerablet)

我有一个属性类型`IEnumerable`

`public IEnumerable PossibleValues { get; set; }`

我怎样才能发现它被实例化的基本类型？

例如，如果它是这样创建的：

```
PossibleValues = new int?[] { 1, 2 } 
```

我想知道那个类型是'int'。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-04T13:39:58.280

```
Type GetBaseTypeOfEnumerable(IEnumerable enumerable)
{
    if (enumerable == null)
    {
        //you'll have to decide what to do in this case
    }

    var genericEnumerableInterface = enumerable
        .GetType()
        .GetInterfaces()
        .FirstOrDefault(i => i.IsGenericType && i.GetGenericTypeDefinition() == typeof(IEnumerable<>));

    if (genericEnumerableInterface == null)
    {
        //If we're in this block, the type implements IEnumerable, but not IEnumerable<T>;
        //you'll have to decide what to do here.

        //Justin Harvey's (now deleted) answer suggested enumerating the 
        //enumerable and examining the type of its elements; this 
        //is a good idea, but keep in mind that you might have a
        //mixed collection.
    }

    var elementType = genericEnumerableInterface.GetGenericArguments()[0];
    return elementType.IsGenericType && elementType.GetGenericTypeDefinition() == typeof(Nullable<>)
        ? elementType.GetGenericArguments()[0]
        : elementType;
} 
```

这个例子有一些限制，在您的应用程序中可能会或可能不会关注您。它不处理类型实现`IEnumerable`但不实现的情况`IEnumerable<T>`。如果该类型实现`IEnumerable<T>`了不止一次，它会任意选择一个实现。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T13:33:47.603

如果您想要可能值的类型，您可以这样做：

```
var type = PossibleValues.GetType().ToString(); // "System.Nullable`1[System.Int32][]" 
```

或者，如果您想要包含在 PossibleValues 中的项目的类型，您可以执行此操作（假设数组实际上具有您的问题中描述的值）：

```
var type = PossibleValues.Cast<object>().First().GetType().ToString(); // "System.Int32" 
```

* * *

**编辑**

如果数组可能不包含任何项目，那么您当然必须进行一些空值检查：

```
var firstItem = PossibleValues.Cast<object>().FirstOrDefault(o => o != null);
var type = string.Empty;
if (firstItem != null)
{
    type = firstItem.GetType().ToString();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T14:19:11.933

现有的两种方法是查看对象是否实现`IEnumerable<T>`或检查集合中第一项的类型。第一个依赖于实际实现的对象`IEnumerable<T>`，而第二个仅在序列中的所有项目都具有相同的派生类型时才有效。

您可能会问一个有趣的问题，即所有项目共有哪些类型，或者所有项目中最常见的最窄类型是什么。

我们将从一个简单的辅助方法开始。给定一个类型，它将返回该类型的序列及其所有基本类型。

```
public static IEnumerable<Type> getBaseTypes(Type type)
{
    yield return type;

    Type baseType = type.BaseType;
    while (baseType != null)
    {
        yield return baseType;
        baseType = baseType.BaseType;
    }
} 
```

接下来，我们将有一个方法来获取序列的所有常见类型，方法是首先找到所有最派生的类型，然后获取序列中每个类型的所有基本类型，最后`intersect`使用都有一个共同点：

```
public static IEnumerable<Type> getCommonTypes(IEnumerable source)
{
    HashSet<Type> types = new HashSet<Type>();
    foreach (object item in source)
    {
        types.Add(item.GetType());
    }

    return types.Select(t => getBaseTypes(t))
        .Aggregate((a, b) => a.Intersect(b));
} 
```

请注意，第一种方法中类型的排序是从最多派生到最少派生，并`Intersect`保持顺序，因此生成的序列将按照从最多派生到最少派生的顺序。如果您想找到所有这些类型共有的最窄类型，那么您可以简单地使用`First`此方法的结果。（请注意，由于所有内容都源自`object`这里，因此这里总是至少返回一种类型，除非原始`IEnumerable`.

# php - 如何创建 SoapParams 的 PHP SoapParam？

> ID：12728358
> 
> 赞同：4
> 
> 时间：2012-10-04T13:29:09.193
> 
> 标签：php, soap-client

我正在使用 SoapClient 与[http://weather.gov/forecasts/xml/SOAP_server/ndfdXMLserver.php?wsdl](http://weather.gov/forecasts/xml/SOAP_server/ndfdXMLserver.php?wsdl)交互 并调用 NDFDgenByDay() 工作正常，没有问题，但是当我想调用 NDFDgen() 我必须使用curl 而是因为我不知道在使用 SoapClient 时如何将 weatherParameters 传递给 NDFDgen()。这是我尝试过的：

```
...
$this->client =
    new SoapClient(
        'http://weather.gov/forecasts/xml/SOAP_server/ndfdXMLserver.php?wsdl',
        array('cache_wsdl'=>WSDL_CACHE_NONE)
    );
...
$this->xml =
    $this->client->NDFDgen(
        new SoapParam($this->latitude,  'latitude'),
        new SoapParam($this->longitude,'longitude'),
        new SoapParam('time-series',   'product'),
        new SoapParam($startTime,       'startTime'),
        new SoapParam($endTime,     'startTime'),
        new SoapParam('e',             'Unit'),
        new SoapParam(
            array(
                new SoapParam(false,'maxt'),        new SoapParam(false,'mint'),
                new SoapParam(true, 'temp'),        new SoapParam(true, 'dew'),
                new SoapParam(true, 'pop12'),       new SoapParam(true, 'qpf'),
                new SoapParam(true, 'sky'),         new SoapParam(true, 'snow'),
                new SoapParam(true, 'wspd'),        new SoapParam(true, 'wdir'),        //10
                new SoapParam(false,'wx'),          new SoapParam(false,'waveh'),
                new SoapParam(true, 'icons'),       new SoapParam(true, 'rh'),
                new SoapParam(true, 'appt'),        new SoapParam(false,'incw34'),
                new SoapParam(false,'incw50'),      new SoapParam(false,'incw64'),
                new SoapParam(false,'cumw34'),      new SoapParam(false,'cumw50'),      //20
                new SoapParam(false,'cumw64'),      new SoapParam(false,'critfireo'),
                new SoapParam(false,'dryfireo'),    new SoapParam(false,'conhazo'),
                new SoapParam(false,'ptornado'),    new SoapParam(false,'phail'),
                new SoapParam(false,'ptstmwinds'),  new SoapParam(false,'pxtornado'),
                new SoapParam(false,'pxhail'),      new SoapParam(false,'pxtstmwinds'), //30
                new SoapParam(false,'ptotsvrtstm'), new SoapParam(false,'pxtotsvrtstm'),
                new SoapParam(false,'tmpabv14d'),   new SoapParam(false,'tmpblw14d'),
                new SoapParam(false,'tmpabv30d'),   new SoapParam(false,'tmpblw30d'),
                new SoapParam(false,'tmpabv90d'),   new SoapParam(false,'tmpblw90d'),
                new SoapParam(false,'prcpabv14d'),  new SoapParam(false,'prcpblw14d'),  //40
                new SoapParam(false,'prcpabv30d'),  new SoapParam(false,'prcpblw30d'),
                new SoapParam(false,'prcpabv90d'),  new SoapParam(false,'prcpblw90d'),
                new SoapParam(true, 'precipa_r'),   new SoapParam(true, 'sky_r'),
                new SoapParam(true, 'temp_r'),      new SoapParam(true, 'td_r'),
                new SoapParam(true, 'wdir_r'),      new SoapParam(true, 'wspd_r'),      //50
                new SoapParam(true, 'wwa'),         new SoapParam(true, 'wgust')
            ),
            'weatherParameters'
        )
    ); 
```

我得到的错误是：

```
Fatal error: Uncaught SoapFault exception: [Client] SOAP-ERROR: Encoding: object has no 'maxt' property in [Redacted]\data\WeatherService.php:199 
```

这是通过 curl 工作的 xml：

```
<soapenv:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:ndf="http://graphical.weather.gov/xml/DWMLgen/wsdl/ndfdXML.wsdl">
   <soapenv:Header/>
   <soapenv:Body>
      <ndf:NDFDgen soapenv:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/">
         <latitude xsi:type="xsd:decimal">{$this->latitude}</latitude>
         <longitude xsi:type="xsd:decimal">{$this->longitude}</longitude>
         <product xsi:type="xsd:string">time-series</product>
         <startTime xsi:type="xsd:dateTime">{$this->startTime}</startTime>
         <endTime xsi:type="xsd:dateTime">{$this->endTime}</endTime>
         <Unit xsi:type="xsd:string">e</Unit>
         <weatherParameters xsi:type="ndf:weatherParametersType">
            <!--You may enter the following 52 items in any order-->
            <maxt xsi:type="xsd:boolean">false</maxt>
            <mint xsi:type="xsd:boolean">false</mint>
            <temp xsi:type="xsd:boolean">true</temp>
            <dew xsi:type="xsd:boolean">true</dew>
            <pop12 xsi:type="xsd:boolean">true</pop12>
            <qpf xsi:type="xsd:boolean">true</qpf>
            <sky xsi:type="xsd:boolean">true</sky>
            <snow xsi:type="xsd:boolean">true</snow>
            <wspd xsi:type="xsd:boolean">true</wspd>
            <wdir xsi:type="xsd:boolean">true</wdir>
            <wx xsi:type="xsd:boolean">false</wx>
            <waveh xsi:type="xsd:boolean">false</waveh>
            <icons xsi:type="xsd:boolean">true</icons>
            <rh xsi:type="xsd:boolean">true</rh>
            <appt xsi:type="xsd:boolean">true</appt>
            <incw34 xsi:type="xsd:boolean">false</incw34>
            <incw50 xsi:type="xsd:boolean">false</incw50>
            <incw64 xsi:type="xsd:boolean">false</incw64>
            <cumw34 xsi:type="xsd:boolean">false</cumw34>
            <cumw50 xsi:type="xsd:boolean">false</cumw50>
            <cumw64 xsi:type="xsd:boolean">false</cumw64>
            <critfireo xsi:type="xsd:boolean">false</critfireo>
            <dryfireo xsi:type="xsd:boolean">false</dryfireo>
            <conhazo xsi:type="xsd:boolean">false</conhazo>
            <ptornado xsi:type="xsd:boolean">false</ptornado>
            <phail xsi:type="xsd:boolean">false</phail>
            <ptstmwinds xsi:type="xsd:boolean">false</ptstmwinds>
            <pxtornado xsi:type="xsd:boolean">false</pxtornado>
            <pxhail xsi:type="xsd:boolean">false</pxhail>
            <pxtstmwinds xsi:type="xsd:boolean">false</pxtstmwinds>
            <ptotsvrtstm xsi:type="xsd:boolean">false</ptotsvrtstm>
            <pxtotsvrtstm xsi:type="xsd:boolean">false</pxtotsvrtstm>
            <tmpabv14d xsi:type="xsd:boolean">false</tmpabv14d>
            <tmpblw14d xsi:type="xsd:boolean">false</tmpblw14d>
            <tmpabv30d xsi:type="xsd:boolean">false</tmpabv30d>
            <tmpblw30d xsi:type="xsd:boolean">false</tmpblw30d>
            <tmpabv90d xsi:type="xsd:boolean">false</tmpabv90d>
            <tmpblw90d xsi:type="xsd:boolean">false</tmpblw90d>
            <prcpabv14d xsi:type="xsd:boolean">false</prcpabv14d>
            <prcpblw14d xsi:type="xsd:boolean">false</prcpblw14d>
            <prcpabv30d xsi:type="xsd:boolean">false</prcpabv30d>
            <prcpblw30d xsi:type="xsd:boolean">false</prcpblw30d>
            <prcpabv90d xsi:type="xsd:boolean">false</prcpabv90d>
            <prcpblw90d xsi:type="xsd:boolean">false</prcpblw90d>
            <precipa_r xsi:type="xsd:boolean">true</precipa_r>
            <sky_r xsi:type="xsd:boolean">true</sky_r>
            <temp_r xsi:type="xsd:boolean">true</temp_r>
            <td_r xsi:type="xsd:boolean">true</td_r>
            <wdir_r xsi:type="xsd:boolean">true</wdir_r>
            <wspd_r xsi:type="xsd:boolean">true</wspd_r>
            <wwa xsi:type="xsd:boolean">true</wwa>
            <wgust xsi:type="xsd:boolean">true</wgust>
         </weatherParameters>
      </ndf:NDFDgen>
    </soapenv:Body>
</soapenv:Envelope> 
```

所以基本上，我想对所有的Soap交互使用SoapClient，但是我不知道如何做复杂的参数，比如上面的weatherParameters参数，如果在使用SoapClient时可以指定weatherParameters，请告诉我如何，因为替代方案，使用 curl，实际上在我的 php 中添加了超过 100 行额外的代码，在制作肥皂信封和初始化和使用 curl 之间，然后从响应信封中解析出响应 xml。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T14:53:35.177

好的，我找到了解决方案。

这部分请求：

```
...
<weatherParameters xsi:type="ndf:weatherParametersType">
    <!--You may enter the following 52 items in any order-->
    <maxt xsi:type="xsd:boolean">false</maxt>
    <mint xsi:type="xsd:boolean">false</mint>
    <temp xsi:type="xsd:boolean">true</temp>
    <dew xsi:type="xsd:boolean">true</dew>
    <pop12 xsi:type="xsd:boolean">true</pop12>
    <qpf xsi:type="xsd:boolean">true</qpf>
    <sky xsi:type="xsd:boolean">true</sky>
    <snow xsi:type="xsd:boolean">true</snow>
    <wspd xsi:type="xsd:boolean">true</wspd>
    <wdir xsi:type="xsd:boolean">true</wdir>
    <wx xsi:type="xsd:boolean">false</wx>
    <waveh xsi:type="xsd:boolean">false</waveh>
    <icons xsi:type="xsd:boolean">true</icons>
    <rh xsi:type="xsd:boolean">true</rh>
    <appt xsi:type="xsd:boolean">true</appt>
    <incw34 xsi:type="xsd:boolean">false</incw34>
    <incw50 xsi:type="xsd:boolean">false</incw50>
    <incw64 xsi:type="xsd:boolean">false</incw64>
    <cumw34 xsi:type="xsd:boolean">false</cumw34>
    <cumw50 xsi:type="xsd:boolean">false</cumw50>
    <cumw64 xsi:type="xsd:boolean">false</cumw64>
    <critfireo xsi:type="xsd:boolean">false</critfireo>
    <dryfireo xsi:type="xsd:boolean">false</dryfireo>
    <conhazo xsi:type="xsd:boolean">false</conhazo>
    <ptornado xsi:type="xsd:boolean">false</ptornado>
    <phail xsi:type="xsd:boolean">false</phail>
    <ptstmwinds xsi:type="xsd:boolean">false</ptstmwinds>
    <pxtornado xsi:type="xsd:boolean">false</pxtornado>
    <pxhail xsi:type="xsd:boolean">false</pxhail>
    <pxtstmwinds xsi:type="xsd:boolean">false</pxtstmwinds>
    <ptotsvrtstm xsi:type="xsd:boolean">false</ptotsvrtstm>
    <pxtotsvrtstm xsi:type="xsd:boolean">false</pxtotsvrtstm>
    <tmpabv14d xsi:type="xsd:boolean">false</tmpabv14d>
    <tmpblw14d xsi:type="xsd:boolean">false</tmpblw14d>
    <tmpabv30d xsi:type="xsd:boolean">false</tmpabv30d>
    <tmpblw30d xsi:type="xsd:boolean">false</tmpblw30d>
    <tmpabv90d xsi:type="xsd:boolean">false</tmpabv90d>
    <tmpblw90d xsi:type="xsd:boolean">false</tmpblw90d>
    <prcpabv14d xsi:type="xsd:boolean">false</prcpabv14d>
    <prcpblw14d xsi:type="xsd:boolean">false</prcpblw14d>
    <prcpabv30d xsi:type="xsd:boolean">false</prcpabv30d>
    <prcpblw30d xsi:type="xsd:boolean">false</prcpblw30d>
    <prcpabv90d xsi:type="xsd:boolean">false</prcpabv90d>
    <prcpblw90d xsi:type="xsd:boolean">false</prcpblw90d>
    <precipa_r xsi:type="xsd:boolean">true</precipa_r>
    <sky_r xsi:type="xsd:boolean">true</sky_r>
    <temp_r xsi:type="xsd:boolean">true</temp_r>
    <td_r xsi:type="xsd:boolean">true</td_r>
    <wdir_r xsi:type="xsd:boolean">true</wdir_r>
    <wspd_r xsi:type="xsd:boolean">true</wspd_r>
    <wwa xsi:type="xsd:boolean">true</wwa>
    <wgust xsi:type="xsd:boolean">true</wgust>
</weatherParameters>
... 
```

必须转换为对象（结构）：

```
class weatherParameters {
    function weatherParameters() {
        $this->maxt     = false;    $this->mint     = false;
        $this->temp     = true;     $this->dew          = true;
        $this->pop12        = true;     $this->qpf          = true;
        $this->sky          = true;     $this->snow     = true;
        $this->wspd     = true;     $this->wdir     = true;
        $this->wx           = false;    $this->waveh        = false;
        $this->icons        = true;     $this->rh           = true;
        $this->appt     = true;     $this->incw34       = false;
        $this->incw50       = false;    $this->incw64       = false;
        $this->cumw34       = false;    $this->cumw50       = false;
        $this->cumw64       = false;    $this->critfireo    = false;
        $this->dryfireo = false;    $this->conhazo      = false;
        $this->ptornado = false;    $this->phail        = false;
        $this->ptstmwinds   = false;    $this->pxtornado    = false;
        $this->pxhail       = false;    $this->pxtstmwinds  = false;
        $this->ptotsvrtstm  = false;    $this->pxtotsvrtstm= false;
        $this->tmpabv14d    = false;    $this->tmpblw14d    = false;
        $this->tmpabv30d    = false;    $this->tmpblw30d    = false;
        $this->tmpabv90d    = false;    $this->tmpblw90d    = false;
        $this->prcpabv14d   = false;    $this->prcpblw14d   = false;
        $this->prcpabv30d   = false;    $this->prcpblw30d   = false;
        $this->prcpabv90d   = false;    $this->prcpblw90d   = false;
        $this->precipa_r    = true;     $this->sky_r        = true;
        $this->temp_r       = true;     $this->td_r     = true;
        $this->wdir_r       = true;     $this->wspd_r       = true;
        $this->wwa          = true;     $this->wgust        = true;
    }
} 
```

我对这些值进行了硬编码，但如果需要，您可以使这些值动态化。然后我实例化结构：

```
$wParameters = new weatherParameters(); 
```

然后我告诉 SoapClient 如何将该对象转换为 XML 片段：

```
$weatherParameters = new SoapVar(
    // object to convert,encoding,name to give the object, name space definition
    $wParameters, SOAP_ENC_OBJECT, 'weatherParameters', 'http://graphical.weather.gov/xml/DWMLgen/wsdl/ndfdXML.wsdl'
); 
```

然后将 SoapVar 作为 SoapParam 传递给函数调用：

```
$this->xml =
    $this->client->NDFDgen(
        new SoapParam($this->latitude,  'latitude'),
        new SoapParam($this->longitude,'longitude'),
        new SoapParam('time-series',   'product'),
        new SoapParam($startTime,       'startTime'),
        new SoapParam($endTime,     'startTime'),
        new SoapParam('e',             'Unit'),
        new SoapParam($weatherParameters,'weatherParameters')
    ); 
```

所以要弄清楚这一点，我必须阅读所有 PHP Soap... 文档，然后当我阅读 SoapVar [http://php.net/manual/en/class.soapvar.php](http://php.net/manual/en/class.soapvar.php)上的文档时，示例SoapVar 展示了它是如何与 SoapParam 一起使用的，我认为 SoapParam [http://php.net/manual/en/soapparam.soapparam.php](http://php.net/manual/en/soapparam.soapparam.php)中的示例也应该更好地说明 SoapVar 和 SoapParam 之间的关系，否则，您可能无法理解你需要一个 SoapVar 来创建一个复杂的 SoapParam。SoapParam doc 中有 7 个 SoapVar 提及/链接，但没有一个指出当您需要 SoapParam 表示复杂对象时，SoapParam 的参数 1 将是 SoapVar 的一个实例。

# php - 如何设置外键id的id？

> ID：12728365
> 
> 赞同：3
> 
> 时间：2012-10-04T13:29:23.953
> 
> 标签：php, doctrine-orm

基于这篇文章：[如何设置外键 id #sf2 #doctrine2 的 id](https://stackoverflow.com/questions/11539789/how-to-set-the-id-of-a-foreign-key-id-sf2-doctrine2)

在上一篇文章中我找到了这个解决方案

```
class Item
{
/**
 * @ORM\ManyToOne(targetEntity="MyBundle\Entity\ItemType", inversedBy="itemTypes")
 * @ORM\JoinColumn(name="type_id", referencedColumnName="id")
 */
protected $item_type;
/**
 * 
 * @var string $item_type_id
 * @ORM\Column(type="integer")
 */
protected $item_type_id;
}
.... Setter & Getter
} 
```

这让我可以做这样的事情

```
$item = new Item();
$item->setItemTypeId(2); // Assuming that the ItemType with id 2 exists. 
```

但是从理论上的最新更新 2.3 开始，它不再起作用了。

当我持久化项目（因此创建 INSERT SQL 查询）时，它不会设置 item_type_id 字段。只有所有其他字段。

知道如何手动设置 item_type_id 而无需在设置之前检索 ItemType 吗？查询的使用过度了！？

```
$item = new Item();
$itemType = $this->entity_manager->getRepository('Acme\MyBundle:ItemType')->find(2);
$item->setItemType($itemType); // Assuming that the ItemType with id 2 exists. 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T18:16:27.277

我找到了这个问题的解决方案。

当我们使用 ORM 时，我们通常不使用元素的标识符，而只使用对象本身。

但有时使用对象 ID 代替对象更方便，例如当我们在会话中存储标识符时（例如：user_id、site_id、current_process_id、...）。

在这种情况下，我们应该使用代理，我将参考 Doctrine 文档以获取更多信息： [http ://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/advanced-configuration.html #reference-proxy](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/advanced-configuration.html#reference-proxies)

在这个例子中，我们将有这样的事情：

```
$itemTypeId = 2; // i.e. a valid identifier for ItemType
$itemType = $em->getReference('MyProject\Model\ItemType', $itemTypeId);
$item->setItemType($itemType); 
```

希望它会帮助别人。

# c# - 在组合框中显示字典 [key, value] 但仅在选择后显示 [key]

> ID：12728379
> 
> 赞同：0
> 
> 时间：2012-10-04T13:30:16.260
> 
> 标签：c#, wpf, combobox

我有一个字典，我想允许在组合框中选择键，但也显示值而不必创建另一列。

例如，如果我的字典现在包含 3 个项目

```
Dictionary<string, double> test = new Dictionary<string, double>();
    //KEY , VALUE
    //"Item1" , 4.0
    //"Item2" , 4.5
    //"Item3" , 5.0 
```

我希望组合框下拉列表显示显示键和值的可用选择

```
[Item1, 4.0]
[Item2, 4.5]
[Item3, 5.0] 
```

并说如果`[Item2, 4.5]`被选中，那么只有键作为当前选择显示在组合框中，在这种情况下，选择后将显示以下内容...

`Item2`

我尝试了以下方法，但这`[key,value]`在组合框选择列表和选择后都显示

```
comboboxColumn2.SelectedValuePath= "Key";
comboboxColumn2.ItemsSource = test; 
```

我也尝试过使用组合，`comboboxColumn2.DisplayMemberPath= "Value";`但无法按照我的意愿对其进行格式化。

谁能说它是否可能以及正确的语法是什么？

编辑：

组合框实际上是 ComboboxColumns，所以只有 2 个可用的事件看起来不是很有用

```
<DataGrid.Columns>
    <DataGridComboBoxColumn Header="Department Id" x:Name="comboboxColumn1"
            SelectedValueBinding="{Binding Department Id}" />
    <DataGridComboBoxColumn Header="Department Id" x:Name="comboboxColumn2"
        SelectedValueBinding="{Binding Department Name}"/>
</DataGrid.Columns> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:00:39.907

如果您想在此处的代码上执行此操作，请执行以下操作：

```
<ComboBox Height="23" HorizontalAlignment="Left" Margin="168,100,0,0" Name="comboBox1" VerticalAlignment="Top" Width="120" DropDownOpened="comboBox1_DropDownOpened" DropDownClosed="comboBox1_DropDownClosed" />

public MainPage()
    {
        InitializeComponent();
        var source = new Dictionary<string, double>();
        source.Add("Item1", 0.4);
        source.Add("Item2", 0.3);
        source.Add("Item3", 0.1);

        var formateDSource = new Dictionary<string, string>();

        foreach (var item in source)
        {
            formateDSource.Add(string.Format("[{0}, {1}]", item.Key, item.Value), item.Key);
        }

        comboBox1.ItemsSource = formateDSource;
        comboBox1.DisplayMemberPath = "Value";
    }

    private void comboBox1_DropDownOpened(object sender, EventArgs e)
    {
        comboBox1.DisplayMemberPath = "Key";
    }

    private void comboBox1_DropDownClosed(object sender, EventArgs e)
    {
        comboBox1.DisplayMemberPath = "Value";
    } 
```

我刚刚创建了一个 formatedSource，然后根据您的描述更改了 displayMemberPath。

希望能帮助到你

# xcode - iOS6 中的纵向和横向模式

> ID：12728390
> 
> 赞同：5
> 
> 时间：2012-10-04T13:31:02.693
> 
> 标签：xcode, ios6, landscape-portrait

将我的应用程序更新到 iOS6 标准时，纵向/横向消失了。当我使用 Xcode 3 构建时，我工作得很好。但是现在使用最新的 Xcode 和最新的 SDK，旋转消失了，它始终处于纵向模式。不管我在“支持的界面方向”中放了什么。而我之前用来旋转的代码似乎根本没有效果。我有这些台词。

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
    switch (toInterfaceOrientation) {
        case UIInterfaceOrientationPortrait:
        case UIInterfaceOrientationLandscapeLeft:
        case UIInterfaceOrientationLandscapeRight:
            return YES;
        default:
            return NO;
    }
} 
```

我该如何改变以及如何改变才能让它再次工作？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-04T13:33:31.800

首先，在 AppDelegate 中，这样写。这是非常重要的

```
- (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
{
     return (UIInterfaceOrientationMaskAll);
} 
```

然后，对于只需要 PORTRAIT 模式的 UIViewControllers，编写这些函数

```
- (BOOL)shouldAutorotate
{
     return YES;
}

- (NSUInteger)supportedInterfaceOrientations
{
     return (UIInterfaceOrientationMaskPortrait);
} 
```

对于也需要 LANDSCAPE 的 UIViewController，将遮罩更改为全部。

```
- (NSUInteger)supportedInterfaceOrientations
{
    return (UIInterfaceOrientationMaskAllButUpsideDown);
    //OR return (UIInterfaceOrientationMaskAll);
} 
```

现在，如果您想在方向更改时进行一些更改，请使用此功能。

```
- (void)willRotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation duration:(NSTimeInterval)duration
{

} 
```

**编辑 ：**

很大程度上取决于您的 UIViewController 嵌入到哪个控制器中。

例如，如果它在 UINavigationController 中，那么您可能需要继承该 UINavigationController 以覆盖这样的方向方法。

子类 UINavigationController（层次结构的顶部视图控制器将控制方向。）确实将其设置为 self.window.rootViewController。

```
 - (BOOL)shouldAutorotate
 {
     return self.topViewController.shouldAutorotate;
 }
 - (NSUInteger)supportedInterfaceOrientations
 {
     return self.topViewController.supportedInterfaceOrientations;
 } 
```

从 iOS 6 开始，UINavigationController 不会向其 UIVIewControllers 请求方向支持。因此我们需要对它进行子类化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-14T15:46:44.787

ios6主要为纵向的app如何支持一个或多个横向控制器：

1) 在 AppDelegate

```
 - (NSUInteger)application:(UIApplication *)application supportedInterfaceOrientationsForWindow:(UIWindow *)window
    {
        UINavigationController* ns = (UINavigationController*)self.window.rootViewController;
        if (ns) {
            UIViewController* vc = [ns visibleViewController];
//by this UIViewController that needs landscape is identified
            if ([vc respondsToSelector:@selector(needIos6Landscape)])
                return [vc supportedInterfaceOrientations];

        }
        return UIInterfaceOrientationMaskPortrait; //return default value
    } 
```

2）在需要横向（或纵向+横向等）的 UIView 控制器中：

```
//flag method
-(void)needIos6Landscape {
}
- (BOOL)shouldAutorotate
{
    return YES;
}
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskAllButUpsideDown;
} 
```

3）在控制器中，您可以从控制器返回，可以在横向旋转 - 这很重要，否则它们在从启用横向的 VC 返回时仍然是横向。

```
- (BOOL)shouldAutorotate
{
    return YES;
}
- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationMaskPortrait;
} 
```

4）（可能不需要，但可以肯定..） - 您使用的子类导航控制器，并添加：

```
- (BOOL)shouldAutorotate
{
    return YES;
}
- (NSUInteger)supportedInterfaceOrientations
{
    UIViewController* vc = [self visibleViewController];
    if (vc) {
        if ([vc respondsToSelector:@selector(needIos6Landscape)]) {
             return [vc supportedInterfaceOrientations];
        }
    }
    return UIInterfaceOrientationMaskPortrait;
} 
```

重要的一步是从您的应用程序中请求仅方向控制器，因为在控制器之间的转换过程中，有一段时间有一些系统控制器作为 root，并且会返回不正确的值（这花了我 2 小时才发现，这是它的原因没有工作）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T13:11:41.167

不知道您的问题是否相似，但对我来说，状态栏的方向正确（横向）并且`UIViewController`被描绘了。我在应用程序委托应用程序中更改了以下行**：didFinishLaunchingWithOptions：**

```
//[window addSubview:navigationController.view];

self.window.rootViewController = navigationController; 
```

Apple=> 这花了我一天半的时间才找到，而且花了很多钱！！！

# ios - 更新到 iOS 6 后的可达性问题

> ID：12728391
> 
> 赞同：4
> 
> 时间：2012-10-04T13:31:08.020
> 
> 标签：ios, ios6, reachability

我有一个久经考验的企业级 iPhone 应用程序，它已经大量使用了一年多，而且效果很好。该应用程序经常使用异步 NSURLConnectionRequests 从服务器获取数据。

我使用 Apple 的“Reachability”示例代码监控网络连接的可用性。我一直认为可达性代码有点脆弱，但我已经让它稳定地工作了好几个月——从 iOS 4.3 开始。

但是，自从升级到 iOS 6 后，我现在看到了一个问题。似乎是随机地，在应用程序的一两天后，我打开应用程序并注意到（通过控制台）应用程序正在接收重复的 '来自 Reachability 类的网络可用通知。

如果我停止任务（我的意思是正确停止）并重新启动，问题就会消失，应用程序会再次正常运行。

当然，这可能归结为我的可达性代码集成的一个微妙问题（我已经提到我认为它“脆弱”），但我想知道自从更新到 iOS 6 后是否有人看到过类似的东西？

我确实玩过 iOS 6 -> 设置 -> 开发人员设置 -> 网络链接调节器，感觉从那时起就出现了这个问题，但现在肯定已经关闭了，我已经重新启动了设备。

自从更新到 iOS 6 后，还有其他人看到可达性问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:16:30.293

好的，我将假设我看到两次的这个问题已经神奇地“消失”了。

如果其他人也看到它，请添加评论。

# php - 当前页面到 PDF jQuery / PHP

> ID：12728392
> 
> 赞同：1
> 
> 时间：2012-10-04T13:31:13.687
> 
> 标签：php, javascript, jquery, pdf

我知道 PHP 中有几个库可用于将 HTML 内容输出到 PDF 文件中，但是我的情况稍微复杂一些。

我们有一系列包含用户输入数据的发票，然后是几个`input`元素，其内容是使用 jQuery 和 vanilla JavaScript 计算和输出的。

我正在寻找一种解决方案，一旦当前页面完成加载，并且所有计算都完成，然后页面将转换为 PDF，包括由 jQuery 内部`<input disabled="disabled" />`元素创建的值。

有谁知道将页面内容输出到 PDF 文件的合适库？

这是我想到的那种流程：

1.  在浏览器中加载 HTML 页面
2.  向用户展示“下载文件”对话框
3.  将 PDF 文件保存到用户的机器
4.  关闭 HTML 页面。

# python - 如何在 Python 3（0x80 及更高版本）中编写 ANSI 兼容字节？

> ID：12728394
> 
> 赞同：3
> 
> 时间：2012-10-04T13:31:20.843
> 
> 标签：python, encoding, hex, byte, ansi

我是 python 新手，尝试编写一个脚本，将字节 0x00-0xff 输出到文件。

这是我目前正在查看的代码

```
import sys

filename="binarywriter.txt"
openmode="wb"
charset="utf8"

file=open(filename, openmode)
for x in range(16,256):
    s="0x%.2x=\\x" %x
    s+=hex(x)[2:]
    d=bytes(s, charset).decode("unicode_escape")
    file.write(d.encode(charset))
    file.write("\r\n".encode(charset))
file.close()
sys.stdin.readline() 
```

问题是python脚本在这个（0x80）之后的字节0x7f（即ascii）之前写得很好，它将所有输出转换为具有2个字节的utf8编码。问题是要避免这种情况，只写这样的东西：

```
...
0x7f
0x80
0x81
... 
```

所以我需要像 8bit 编码这样的东西，但是经过一小时的搜索，我没有任何结果

还有一个小问题，数字 <16 返回一个无法解码的十六进制值，但我可能会找到解决方案

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T13:58:03.187

您可以使用 Latin-1（也称为[ISO_8859-1](http://de.wikipedia.org/wiki/ISO_8859-1)）编码。

```
charset="iso-8859-1" 
```

请参阅屏幕截图以证明文件中每个字符只需要一个字节： ![hexeditor 显示文件的屏幕截图](../Images/2a65d8f69078132e272c5b343e54cd55.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:51:51.550

如果您正在寻找一个长度为 256 字节、代表 0x00 到 0xFF 的文件，那么您可以使用：

```
with open('binary.dat', 'wb') as fout:
    fout.write(bytes(range(256))) 
```

# jquery - mouseleave 无法正常工作

> ID：12728401
> 
> 赞同：0
> 
> 时间：2012-10-04T13:32:02.660
> 
> 标签：jquery, mouseleave

当您将鼠标悬停在其上时，我使用 mouseenter 和 mouseleave 以获得更大的图像。如果鼠标移动得太快，mouseleave 不起作用，放大的图像仍然存在。

```
$(document).ready(function() {
    $('.productImg').bind('mouseenter', function(){
        if(!$('#zoom_product_image').length){
            var maxWidth=$(this).parents('form').width();
            var maxHeight=$(this).parents('form').height();

            var link=this.src.replace(/small/g, 'big');
            $(this).parents('form').append('<img id="zoom_product_image" style="display: none;" src="'+link+'">');
            var img=new Image();
            img.onload=function(){
                $('#zoom_product_image').css({'position': 'absolute', 'border': '1px solid #78C7FF', 'top': '0px', 'left': '0px', 'z-index': '10000', 'opacity': '0.95', 'cursor': 'pointer'});
                $('#zoom_product_image').fadeIn(200);

                if($('#zoom_product_image').width()>maxWidth){
                    $('#zoom_product_image').css({'width': maxWidth, 'height': $('#zoom_product_image').height()*(maxWidth/$('#zoom_product_image').width())});
                }
                if($('#zoom_product_image').height()>maxHeight){
                    $('#zoom_product_image').css({'height': maxHeight, 'width': $('#zoom_product_image').width()*(maxHeight/$('#zoom_product_image').height())});
                }
            }
            img.src=link;

            $('#zoom_product_image').bind('mouseleave', function(){
                $('#zoom_product_image').detach();
            });

            $('#zoom_product_image').bind('click', function(){
                window.location.href=$('#zoom_product_image').parent().find('.bigtitle').attr('href');
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:44:45.087

还可以考虑先加载图像，然后在加载后绑定事件。

另一个技巧是使用 jQuery hover 功能（工作原理相同，除了它可能更容易阅读）：

```
$(".productImg").hover(
    function() {
        // do mouse enter things
    },
    function() {
        // do mouse leave things
    }
); 
```

并将其放入 onload 事件中：

```
img.onload = function() {
    $(".productImg").hover(..);
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T13:31:32.430

```
$(document).ready(function() {
    $('.productImg').bind('mouseenter', function(){
        if($('#zoom_product_image').length)
            $('#zoom_product_image').detach();

        var maxWidth=$(this).parents('form').width();
        var maxHeight=$(this).parents('form').height();

        var link=this.src.replace(/small/g, 'big');
        $(this).parents('form').append('<img id="zoom_product_image" style="display: none;" src="'+link+'">');
        var img=new Image();
        img.onload=function(){
                $('#zoom_product_image').css({'position': 'absolute', 'border': '1px solid #78C7FF', 'top': '0px', 'left': '0px', 'z-index': '10000', 'opacity': '0.95', 'cursor': 'pointer', 'display': 'block'});

                if($('#zoom_product_image').width()>maxWidth){
                    $('#zoom_product_image').css({'width': maxWidth, 'height': $('#zoom_product_image').height()*(maxWidth/$('#zoom_product_image').width())});
                }
                if($('#zoom_product_image').height()>maxHeight){
                    $('#zoom_product_image').css({'height': maxHeight, 'width': $('#zoom_product_image').width()*(maxHeight/$('#zoom_product_image').height())});
                }
        }
        img.src=link;

        $(this).parents('form').bind('mouseleave', function(){
            $('#zoom_product_image').detach();
        });

        $('#zoom_product_image').bind('click', function(){
            window.location.href=$('#zoom_product_image').parent().find('.bigtitle').attr('href');
        });
    });
}); 
```

# ios - 核心数据和 CLGeocoder

> ID：12728404
> 
> 赞同：-1
> 
> 时间：2012-10-04T13:32:14.040
> 
> 标签：ios, xcode, core-data

我在完成这项工作时遇到问题，我使用核心数据来获取用户列表，

NSFetchrequets 额外的用户位置，地点列表和邮政编码

![图片](../Images/22f57b26873bb90379ecc2c6b2250ba9.png)

```
NSFetchRequest *request =[NSFetchRequest fetchRequestWithEntityName:@"SiteLocation"]; //request all objects
NSArray *fetchedObjects = [self.srmDatabase.managedObjectContext executeFetchRequest:request error:nil]; 
```

所以我有一个实体“SiteLocation”用 FetchedResultController 加载 tableview

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
     //NSLog(@"CELL");
    static NSString *CellIdentifier = @"Site Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    SiteLocation * siteLocation = [self.fetchedResultsController objectAtIndexPath:indexPath];
    cell.textLabel.text = siteLocation.siteName;

    return cell;
} 
```

然后我将选定的行发送到 MapViewController didSelectRowAtIndexPath

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
 {
   NSLog(@"didselect sitePC");

if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {

    UserDetails *userinfo = [[self fetchedResultsController] objectAtIndexPath:indexPath];
    self.mapview.sitePC = userinfo; //sitePC is (id)
    NSLog(@"object selected= %@", userinfo);
} 
}

2012-10-04 13:27:46.401 SRMAB[459:c07] didselect sitePC = <SiteLocation: 0x1d80ad20> (entity: SiteLocation; id: 0x1d86b210 <x-coredata://523E1EB6-01DF-4889-B1A1-2E38E92D385E/SiteLocation/p120> ; data: {
    projectName =     (
        "0x1d82bc20 <x-coredata://523E1EB6-01DF-4889-B1A1-2E38E92D385E/UserDetails/p144>"
    );
    siteName = "Bloomberg Place 1";
    sitePostCode = "W1B 5AU";
}) 
```

在 MapViewController 上，这会将 sitePostcode 转换为 PlaceMark

```
-(void)myMapview
{
    NSLog(@"mymapview");

    NSString *addressString = [self.sitePC valueForKey:@"sitePostCode"];

    CLGeocoder *geocoder = [[CLGeocoder alloc] init];

    [geocoder geocodeAddressString:addressString completionHandler:^(NSArray *placemarks, NSError *anError)
     {
         NSLog(@"Placemark count:%d",[placemarks count]);

         for(CLPlacemark *placemark1 in placemarks)
         {
             NSLog(@"Placemark: %@",placemark1);
             //[self displayPlacemarks:placemarks];
             CLLocationCoordinate2D zoomLocation;
             zoomLocation.latitude = placemark1.location.coordinate.latitude;
             zoomLocation.longitude= placemark1.location.coordinate.longitude;

             MKCoordinateRegion viewRegion = MKCoordinateRegionMakeWithDistance(zoomLocation, 1000, 1000);
             MKCoordinateRegion adjustedRegion = [self.mapview regionThatFits:viewRegion];
             [self.mapview setRegion:adjustedRegion animated:YES];

             MKPointAnnotation *pa = [[MKPointAnnotation alloc] init];
             pa.coordinate = placemark1.location.coordinate;
             pa.title = [self.sitePC valueForKey:@"siteName"];
             [self.mapview addAnnotation:pa];
         } 
```

我希望这是有道理的。

加载时如何在地图上显示所有位置？

问题已更新，因为原始问题是拼写错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:35:12.620

> `reason: '[<SiteLocation 0x1d80ad20> valueForUndefinedKey:]: the entity SiteLocation is not key value coding-compliant for the key "sitePostcode".'`

@"sitePostcode" 与 @"sitePostCode" 不同。您在调用`-valueForKey`in时使用前者`-myMapView`，但您的 Core Data 模型图片显示的是后者。

**更新：**要在地图上显示位置，请使用地图注释或叠加。例如，您可以`MKPinAnnotation`在地图中添加一个以指示地图上的位置。有关详细信息，请参阅[注释地图](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/LocationAwarenessPG/AnnotatingMaps/AnnotatingMaps.html)。我看到你已经在使用了`MKPointAnnotation`，所以不清楚你的问题是什么。也许您正试图一次显示所有注释 - 如果这是问题所在，您只需要计算限制所有位置的矩形并缩放地图以包含该区域。

# spring-mvc - OpenSessionInView 工作但不为@Transactional 提供其会话

> ID：12728405
> 
> 赞同：2
> 
> 时间：2012-10-04T13:32:16.923
> 
> 标签：spring-mvc, hibernate-4.x, session-per-request

我正在尝试使用 Spring MVC 3 和 Hibernate 4.1 来获得声明式事务管理，为整个请求长度提供一个开放会话。我只有一个用于数据访问的“管理器”层，它直接使用会话。这是用@Transactional 注释的，并且会话在退出该层时关闭，并且我在控制器中得到一个延迟加载异常。

因此，我添加了 OpenSessionInViewFilter 过滤器，并且日志表明此过滤器已正确配置，并且它们还显示此过滤器正在打开会话。不幸的是，我的管理层仍然像以前一样打开和关闭自己的会话，并且我在控制器中得到了相同的延迟加载异常。

编辑：注意到在我的日志中，我打开了过滤器会话，打开了 HibernateTransactionManager 会话，关闭了 HibernateTransactionManager 会话，延迟加载异常，然后关闭了过滤器会话。所以我知道在延迟加载异常期间某处有一个打开的会话，但是该对象是在与另一个关闭的会话关联的事务中加载的。

我认为从管理器类中删除 @Transactional 会从该层删除会话管理并让过滤器完成它的工作，但是 sessionFactory().getCurrentSession() 只是获得一个关闭的会话；它无权访问过滤器提供的打开会话。

如何访问 OpenSessionInViewFilter 的明确打开的会话？

springapp-servlet.xml

```
<beans ..

<context:component-scan base-package="springapp.web" />

<bean class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping"/>
<bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"/>

<!-- Enables the Spring MVC @Controller programming model -->
<mvc:annotation-driven />

<bean id="userManager" class="springapp.service.SimpleUserManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>

<bean id="viewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" />
</bean>

<import resource="hibernate-context.xml" />

</beans> 
```

web.xml

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/springapp-servlet.xml</param-value>
</context-param>

<filter>
    <filter-name>openSessionInView</filter-name>
    <filter-class>org.springframework.orm.hibernate4.support.OpenSessionInViewFilter</filter-class>
    <init-param>
        <param-name>sessionFactoryBeanName</param-name>
        <param-value>sessionFactory</param-value>
    </init-param>
</filter>

<filter-mapping>
    <filter-name>openSessionInView</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping>

<servlet>
    <servlet-name>springapp</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
</servlet>

<servlet-mapping>
    <servlet-name>springapp</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

休眠上下文.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans ..
  ">

<context:property-placeholder location="/WEB-INF/hibernate.properties" />

<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="${hibernate.connection.driver_class}" />
    <property name="url" value="${hibernate.connection.url}" />
    <property name="username" value="${hibernate.connection.username}" />
    <property name="password" value="${hibernate.connection.password}" />
</bean>

<bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory"/>
</bean>

<tx:annotation-driven />

<bean id="transactionInterceptor" class="org.springframework.transaction.interceptor.TransactionInterceptor">
    <property name="transactionManager" ref="transactionManager" />
    <property name="transactionAttributeSource">
        <bean class="org.springframework.transaction.annotation.AnnotationTransactionAttributeSource" />
    </property>
</bean>

<bean id="managerTemplate" abstract="true" class="org.springframework.aop.framework.ProxyFactoryBean">
    <property name="interceptorNames">
        <list>
            <value>transactionInterceptor</value>
        </list>
    </property>
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="packagesToScan" value="databeans" />
    <property name="dataSource" ref="dataSource" />
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
        </props>
    </property>
</bean>

</beans> 
```

管理器.java

```
@Service("userManager")
@Transactional
public class SimpleUserManager implements UserManager {

@Autowired
private SessionFactory sessionFactory;

public void setSessionFactory(SessionFactory sessionFactory){
    this.sessionFactory = sessionFactory;
}
.. 
```

控制器.java

```
@Controller
@RequestMapping("/users")
public class UserController {

@Autowired
private UserManager userManager;
.. 
```

我的异常发生在控制器中，在读取管理器类中加载并传递给该控制器的对象的第一个属性时：

org.springframework.web.util.NestedServletException：请求处理失败；嵌套异常是 org.hibernate.LazyInitializationException: 无法初始化代理 - 没有会话 org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:894) org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java: 778）javax.servlet.http.HttpServlet.service（HttpServlet.java:617）javax.servlet.http.HttpServlet.service（HttpServlet.java:717） java:119) org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)

我已经研究了好几个小时了..我所能找到的只是使用休眠 3 的解决方案和对休眠 4 会话/事务理论的粗略解释，没有示例。

有什么想法吗？

更新：已修复！

发现这个：

[Spring MVC OpenSessionInViewInterceptor 不工作](https://stackoverflow.com/questions/10904427/spring-mvc-opensessioninviewinterceptor-not-working)

不幸的是，这并没有帮助那里的 OP，但它帮助了我。值得注意的是，这：

“最好不要在 dispatcher-servlet.xml 中导入 applicationContext.xml，而是使用 ContextLoaderListener 加载它”

其中，应用于我的配置，正是我在上面发布的所有内容，但不是

```
<import resource="hibernate-context.xml" /> 
```

在我的 springapp-servlet.xml 中，我将 ContextLoaderListener 修改为：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>/WEB-INF/springapp-servlet.xml, /WEB-INF/hibernate-context.xml</param-value>
</context-param> 
```

这就是全部

```
sessionFactory.getCurrentSession() 
```

将 OSIV 创建的会话返回给我。而且，事实上，正在创建的第二个会话不再是，因为我发现了这些可爱的小日志行：

```
2012-10-04 14:43:48,743 DEBUG http-8080-1 org.springframework.beans.factory.support.DefaultListableBeanFactory - Returning cached instance of singleton bean 'transactionManager'
2012-10-04 14:43:48,743 TRACE http-8080-1 org.springframework.transaction.support.TransactionSynchronizationManager - Retrieved value [org.springframework.orm.hibernate4.SessionHolder@4146c5c0] for key [org.hibernate.internal.SessionFactoryImpl@12542011] bound to thread [http-8080-1]
2012-10-04 14:43:48,743 DEBUG http-8080-1 org.springframework.orm.hibernate4.HibernateTransactionManager - Found thread-bound Session [SessionImpl(PersistenceContext[entityKeys=[],collectionKeys=[]];ActionQueue[insertions=[] updates=[] deletions=[] collectionCreations=[] collectionRemovals=[] collectionUpdates=[] unresolvedInsertDependencies=UnresolvedEntityInsertActions[]])] for Hibernate transaction
2012-10-04 14:43:48,743 DEBUG http-8080-1 org.springframework.orm.hibernate4.HibernateTransactionManager - Creating new transaction with name [springapp.service.SimpleUserManager.find]: PROPAGATION_REQUIRED,ISOLATION_DEFAULT; '' 
```

这表明，在我的 @Transactional 服务层之外，OSIV 创建的会话还活着并且运行良好，并且只是为它启动了一个新事务。

希望这对其他人有帮助。我什至不想考虑我花了多少时间在这上面工作。

# html - 从文件夹中打开 PDF 的链接

> ID：12728411
> 
> 赞同：0
> 
> 时间：2012-10-04T13:32:29.010
> 
> 标签：html, hyperlink

我的电脑文件夹中有一些 PDF，有没有办法写一个链接来打开它们到网页上？

主要思想是当网站上线时，该链接将用于从文件夹中下载 pdf，但显然在稍后阶段该文件夹将成为我网站上的临时文件夹。

所以目前我只想从链接打开pdf，最终目标是让链接下载它们。

谁能帮我？

这是获取我要链接到的 pdf 的文件路径。

C:\Users\Shaun\Documents\FormValue\CS1.pdf

我将如何创建链接？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T13:55:02.500

如果您想获得 PDF 的链接，您只需将文件的相对路径放在标签的`href`属性中。`a`因此，假设您有一个名为 的文件夹`pdfs`，其中包含文件`boom.pdf`，而名为文件夹的文件夹`site`位于其旁边，其中包含文件`site.html`。然后你所要做的就是把这个链接放在 html 文件中：

```
<a href="../pdfs/boom.pdf">Link to a pdf</a> 
```

现在在大多数（所有？）浏览器中，这将在新选项卡中打开 PDF。要下载它，您可以右键单击它并执行此操作`Save Link As`。只需要走`href`正确的路。

* * *

**更新**

如果要使用文件的完整路径，则需要在其前面加上`file://`. 然后你只需将它放在与常规链接相同的 href 中，最终得到如下内容：

```
<a href="file://C:\Users\Shaun\Documents\FormValue\CS1.pdf">Link to a pdf</a> 
```

这应该适用于您的设置，但如果 pdf 和 html 文件存储在彼此附近，相对 URL 仍然是一个不错的选择。一点谷歌的工作应该会告诉你如何写这些。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T13:37:58.360

对于每个 PDF，只需执行我在[此处](https://stackoverflow.com/questions/12551287/show-pdf-files-in-a-php-page/12551342#12551342)讨论的内容。

```
<object height="950" data="sample-report.pdf" type="application/pdf" width="860">
  <p>It appears you don't have a PDF plugin for this browser.
    No biggie... you can <a href="sample-report.pdf">click here to
    download the PDF file.</a>
  </p>
</object> 
```

它适用于大多数浏览器，并且可以很好地降级。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-05T10:38:15.640

听起来您在问是否可以在网站上放置指向计算机上 PDF 的链接。你不能。这些文件必须位于另一个网站或您站点的服务器上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T13:50:56.197

如果您使用的是 ASP.NET，则可以将链接指向一个处理程序，该处理程序接受一个通过文件名或文件的哈希标识文件的查询字符串。然后处理程序可以在文件夹中查找与模式匹配的文件，将文件作为字节数组读取，然后将这些字节写入 HttpResponse。

# mono - 自定义图标未显示在单声道应用程序中

> ID：12728412
> 
> 赞同：0
> 
> 时间：2012-10-04T13:32:29.857
> 
> 标签：mono, monodevelop

我有一个使用 MonoDevelop 作为 IDE 开发的单声道应用程序。我正在使用 Windows 7。我设置了一个自定义图标（嵌入到 .exe 中）。当我从 MonoDevelop 内部运行我的应用程序时，一切都很好。

但是当我手动运行“mono.exe”时，我的自定义图标不会出现在 Windows 任务栏中。相反，它似乎是一个-在我看来-预定义的。

从命令行运行我的应用程序时，如何让我的自定义图标也可见？总是从 MonoDevelop 内部开始不是一种选择。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T20:55:29.633

当您从 MonoDevelop 运行应用程序时，它使用 .NET 运行时运行。因此 Windows 能够获取应用程序图标。当您使用 Mono 运行它时，可执行应用程序（从 Windows 的角度来看）是 Mono.exe。所以你得到了 Mono 的图标。

我建议您在 Windows 上在 .NET 上运行您的应用程序——即使 MonoDevelop 在 Windows 上的 .NET 上运行。适用于 Windows 的 Mono 包主要用于开发（检查您的应用程序将使用 Mono 运行）和专门的嵌入目的。

# ruby-on-rails-3 - 路由错误 - 传递参数以从 link_to 更新操作

> ID：12728413
> 
> 赞同：0
> 
> 时间：2012-10-04T13:32:31.173
> 
> 标签：ruby-on-rails-3, routing, parameter-passing, rails-routing

我有一个预订模型，我希望用户通过单击一个链接或另一个链接来确认/拒绝预订。我试图避免必须创建一个表单。

这是我尝试实现它的方法：

```
<% @bookings.each do |booking| %>
    <%= link_to "Confirm", appointment_booking_path(@appointment, booking, :status => "confirmed"), :method => :put, confirm: 'Are you sure?', :class => 'btn btn-success' %>
    <%= link_to "Reject", appointment_booking_path(@appointment, booking, :status => "rejected"), :method => :put, confirm: 'Are you sure?',:class => 'btn btn-danger' %>
<%end%> 
```

单击其中一个链接时出现此错误：

```
NoMethodError in BookingsController#update
undefined method `[]' for nil:NilClass
app/controllers/bookings_controller.rb:64:in `update' 
```

预订嵌套在约会中。这是我的耙子路线：

```
 PUT    /appointments/:appointment_id/bookings/:id(.:format) 
appointment_booking       GET    /appointments/:appointment_id/bookings/:id(.:format)
edit_appointment_booking  GET    /appointments/:appointment_id/bookings/:id/edit(.:format) 
```

BookingController 更新操作：

```
line 64*    @appointment = Appointment.find(params[:booking][:appointment_id])
            @booking = Booking.find(params[:id]) 
```

如果您需要更多信息，请告诉我。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:44:05.063

仔细查看您的 rake 路线，您会看到它是`appointment_booking`和不是`appointment_bookings`（即`s`在 结尾处是no `bookings`）。

您还需要传入约会实例作为第一个参数。假设您的约会被调用`@appointment`，试试这个：

```
<% @bookings.each do |booking| %>
  <%= link_to "Confirm", appointment_booking_path(@appointment, booking, :status => "confirmed"), :method => :put, confirm: 'Are you sure?', :class => 'btn btn-success' %>
  <%= link_to "Reject", appointment_booking_path(@appointment, booking, :status => "rejected"), :method => :put, confirm: 'Are you sure?',:class => 'btn btn-danger' %>
<% end %> 
```

# vb.net - NullReferenceException 但在调试期间我有一个对象？

> ID：12728414
> 
> 赞同：1
> 
> 时间：2012-10-04T13:32:33.890
> 
> 标签：vb.net, nullreferenceexception

我试图弄清楚为什么我的代码会引发空引用异常。

我正在尝试将对象添加到列表中。该对象可以是 4 种类型之一，我在相关代码之后拥有所有定义。此代码位于 select case 语句中 4 个图片框的按钮单击处理程序中

下面是有问题的代码

```
 Dim count As Integer = 0
    Dim a_component As Object = Nothing

    Select Case (p.Name)
        Case TranspositorPictureBox.Name
            Form2.ShowDialog(Me)
            count = TNumericUpDown.Value
            a_component = New Transpositor(tempTranspositorDivert)
        Case ZonePictureBox.Name
            count = ZNumericUpDown.Value
            a_component = New Zone()
        Case InductionPictureBox.Name
            count = IndNumericUpDown.Value
            a_component = New Induction()
        Case InclinePictureBox.Name
            count = IncNumericUpDown.Value
            a_component = New Incline()
    End Select

    For i = 1 To count
        Dim newPic As PictureBox = New PictureBox()
        newPic.Image = p.Image
        newPic.Size = p.Size
        newPic.SizeMode = p.SizeMode

        sys.Add(a_component)

        LayoutFlowLayout.Controls.Add(newPic)
    Next 
```

这是类定义。变量 sys 的类型是 TranSorter

```
Public Class TranSorter
Public width As Integer
Public components As List(Of Object)

Public Sub New(ByVal the_width As Integer)
    Me.width = the_width
    Me.components = New List(Of Object)
End Sub

Public Sub Add(ByVal next_component As Object)
    Me.components.Add(next_component)
End Sub

End Class

Public Class Transpositor
Public length As Integer
Public divert As Object

Public Sub New(ByVal a_divert As Object)
    Me.divert = a_divert
    Me.length = ComponentLengths.TranspositorLength
    Form1.Transpositors += 1
End Sub
End Class

Public Class Zone
Public length As Integer

Public Sub New()
    Me.length = ComponentLengths.ZoneLength
    Form1.Microzones += 1
End Sub
End Class

Public Class Induction
Public length As Integer

Public Sub New()
    Me.length = ComponentLengths.InductionLength
    Form1.Inductions += 1
End Sub
End Class

Public Class Incline
Public length As Integer

Public Sub New()
    Me.length = ComponentLengths.InclineLength
    Form1.Inclines += 1
End Sub
End Class 
```

sys.add 行正在引发异常。这是我初始化 sys 的代码

```
Dim sys As TranSorter

Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs)

sys = New TranSorter(temp_width) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:14:54.437

我怀疑出于某种原因，您的 p.Name 不等于您在 If 子句中检查的四种情况之一。我建议考虑添加一揽子 Else 子句和/或检查 a_component 是否为空，然后再将其添加为额外的预防措施。

```
Select Case (p.Name)
    Case TranspositorPictureBox.Name
        Form2.ShowDialog(Me)
        count = TNumericUpDown.Value
        a_component = New Transpositor(tempTranspositorDivert)
    Case ZonePictureBox.Name
        count = ZNumericUpDown.Value
        a_component = New Zone()
    Case InductionPictureBox.Name
        count = IndNumericUpDown.Value
        a_component = New Induction()
    Case InclinePictureBox.Name
        count = IncNumericUpDown.Value
        a_component = New Incline()
    Case Else
        Exit Sub ' Function/etc
End Select

if a_component IsNot Nothing Then
  For i = 1 To count
    Dim newPic As PictureBox = New PictureBox()
    newPic.Image = p.Image
    newPic.Size = p.Size
    newPic.SizeMode = p.SizeMode

    sys.Add(a_component)

    LayoutFlowLayout.Controls.Add(newPic)
  Next
End If 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:27:49.170

除非 sys 是 Nothing，否则您的代码不应引发任何异常。
这可能是您在哪里初始化 sys var 的 Form_Load 事件没有执行。只需在行上设置断点即可轻松检查这种情况

```
 sys = New TranSorter(temp_width) 
```

然后在

```
 sys.Add(a_component) 
```

行并检查 sys var 是否为空

# jboss - 无法调用部署在 JBoss 7.1.1 上的 JAX-WS 客户端

> ID：12728416
> 
> 赞同：0
> 
> 时间：2012-10-04T13:32:40.910
> 
> 标签：jboss, jax-ws, jbossws

我有一个生成的 jax-ws Web 服务客户端，当我将它作为 Java 独立项目运行时，它运行良好。但是，如果我将它添加到部署在 JBoss 7.1.1 上的 Web 应用程序（war）并调用 Web 服务，它会引发以下异常：

```
Caused by: java.lang.NoClassDefFoundError: com/ctc/wstx/io/DefaultInputResolver
at com.ctc.wstx.stax.WstxInputFactory.createSR(WstxInputFactory.java:628)
at com.ctc.wstx.stax.WstxInputFactory.createXMLStreamReader(WstxInputFactory.java:324)
at __redirected.__XMLInputFactory.createXMLStreamReader(__XMLInputFactory.java:139) [jboss-modules.jar:1.1.1.GA]
at org.apache.cxf.staxutils.StaxUtils.createXMLStreamReader(StaxUtils.java:1176)
at org.apache.cxf.interceptor.StaxInInterceptor.handleMessage(StaxInInterceptor.java:104)
at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
at org.apache.cxf.endpoint.ClientImpl.onMessage(ClientImpl.java:795)
at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponseInternal(HTTPConduit.java:1626)
at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.handleResponse(HTTPConduit.java:1493)
at org.apache.cxf.transport.http.HTTPConduit$WrappedOutputStream.close(HTTPConduit.java:1401)
at org.apache.cxf.transport.AbstractConduit.close(AbstractConduit.java:56)
at org.apache.cxf.transport.http.HTTPConduit.close(HTTPConduit.java:648)
at org.apache.cxf.interceptor.MessageSenderInterceptor$MessageSenderEndingInterceptor.handleMessage(MessageSenderInterceptor.java:62)
at org.apache.cxf.phase.PhaseInterceptorChain.doIntercept(PhaseInterceptorChain.java:263)
at org.apache.cxf.endpoint.ClientImpl.doInvoke(ClientImpl.java:531)
at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:461)
at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:364)
at org.apache.cxf.endpoint.ClientImpl.invoke(ClientImpl.java:317)
at org.apache.cxf.frontend.ClientProxy.invokeSync(ClientProxy.java:88)
at org.apache.cxf.jaxws.JaxWsClientProxy.invoke(JaxWsClientProxy.java:134)
at $Proxy189.getcodelists(Unknown Source) 
```

知道我可能会错过什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:18:00.340

正如错误所说，应用服务器无法找到所述类文件。是否有可能在您的独立应用程序中您的类路径具有库但 JBoss AS 7 无法找到它。

如果你可以隔离这个库的位置，你可以将它与你的 WAR 文件捆绑在一起，或者创建一个[jboss_module](https://docs.jboss.org/author/display/MODULES/Introduction?focusedCommentId=12648529#comment-12648529)来满足依赖关系。

祝你好运！

# java - 获取和使用应用程序传递的 InputStream

> ID：12728418
> 
> 赞同：3
> 
> 时间：2012-10-04T13:32:41.057
> 
> 标签：java, apache, swing, inputstream, event-dispatch-thread

最近我试图将普通终端的功能实现到一个图形化设计的基于 Swing 的控制台项目。我喜欢这里的一些人如何使这成为可能，但我偶然发现了另一个大问题。`InpuStreamListener`虽然我不太喜欢这个，但有些人实际上谈到了这一点。我工作的示例代码（几乎不完全是我的，但它是我的应用程序的源代码）如下：

```
// Making an executor
org.apache.commons.exec.DefaultExecutor exec = new org.apache.commons.exec.DefaultExecutor();
// Creating the streams (pretty much ignore this, I just include it as a general idea of the method)
consoleOutputStream = new ConsoleOutputStream();
consoleInputStream = new JTextFieldInputStream(gsc.mainWindow.getConsoleInput().getJTextField());
// Stream Handler with the customized streams I use for the process
org.apache.commons.exec.PumpStreamHandler streamHandler = new org.apache.commons.exec.PumpStreamHandler(consoleOutputStream, consoleOutputStream, consoleInputStream);
// Setting the handler and finally making command line and executing
exec.setStreamHandler(streamHandler);
org.apache.commons.exec.CommandLine commandline = org.apache.commons.exec.CommandLine.parse(String.valueOf(arg));  
            exec.execute(commandline); 
```

现在的事情是我通常尝试通过这种方法通过java命令运行java应用程序。`OutputStream`工作得很好，没有任何缺陷，并且给了我所有应该的东西，但是带有 Input 的应用程序给我带来了很多麻烦。我相信问题在于对`System.in`、`Scanner`类、`Console`类等的硬编码。所以这是我需要一些帮助的（最后）：我希望能够直接访问`InputStream`传递给我的应用程序或有人向我解释方法如何真正写一个`InputStreamListener`当我运行外部java应用程序时偶尔会使用它（是的，我通过我的界面而不是cmd或终端运行它们，我正在尝试在这里制作一个工具）。如果这太复杂，需要我进行大量调整或者通常是不可能的，有人可以帮助我获得通过`InputStream`，这样我就可以真正编写一个类，允许我编写特定于我的界面的应用程序？

在此先感谢，甚至感谢您花时间阅读整篇文章！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T18:00:50.417

假设这些 Apache 库实现了`InputStream`和`OutputStream`接口，您可以使用`PipedInputStream`和`PipedOutputStream`来访问信息。这是一个简单的例子：

```
import java.awt.event.*;
import java.io.*;
import javax.swing.*;

public class InputRedirection extends Box{

    public InputRedirection() {
        super(BoxLayout.X_AXIS);

        //Remap input
        //Create the input stream to be used as standard in
        final PipedInputStream pisIN = new PipedInputStream();
        //Create an end so we can put info into standard in
        PipedOutputStream posIN = new PipedOutputStream();
        //Wrap with a writer (for ease of use)
        final BufferedWriter standardIn = new BufferedWriter(new OutputStreamWriter(posIN));
        //Set standard in to use this stream
        System.setIn(pisIN);

        //Connect the pipes
        try {
            pisIN.connect(posIN);
        } catch (IOException e2) {
            e2.printStackTrace();
        }        

        //UI element where we're entering standard in
        final JTextField field = new JTextField(20);
        ActionListener sendText = new ActionListener(){

            @Override
            public void actionPerformed(ActionEvent arg0) {
                try {
                    //Transfering the text to the Standard Input stream
                    standardIn.append(field.getText());
                    standardIn.flush();
                    field.setText("");
                    field.requestFocus();
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }};

        field.addActionListener(sendText);
        add(field);

        //Why not - now it looks like a real messaging system
        JButton button = new JButton("Send");
        button.addActionListener(sendText);
        add(button);

        //Something using standard in
        //Prints everything from standard in to standard out.
        Thread standardInReader = new Thread(new Runnable(){

            @Override
            public void run() {
                boolean update = false;
                final StringBuffer s = new StringBuffer();
                while(true){
                    try {

                        BufferedInputStream stream = new BufferedInputStream(System.in);
                        while(stream.available() > 0){
                            int charCode = stream.read();
                            s.append(Character.toChars(charCode));
                            update = true;
                        }
                        if(update){
                            //Print whatever was retrieved from standard in to standard out.
                            System.out.println(s.toString());
                            s.delete(0, s.length());
                            update = false;
                        }

                    } catch (IOException e) {
                        e.printStackTrace();
                    } 
                }
            }});
        standardInReader.start();

    }

    public static void main(String[] args){
        JFrame frame = new JFrame();
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(new InputRedirection());
        frame.pack();
        frame.setLocationRelativeTo(null);
        frame.setVisible(true);
    }
} 
```

哦 - 使用 PipedStreams 时要考虑的一件事：只有一个线程可以写入输出，只有一个线程可以从输入中读取。否则你会遇到一些时髦的问题（有关更多详细信息，请参阅[http://techtavern.wordpress.com/2008/07/16/whats-this-ioexception-write-end-dead/](http://techtavern.wordpress.com/2008/07/16/whats-this-ioexception-write-end-dead/)）。

# javascript - API Foursquare javascript 不起作用

> ID：12728419
> 
> 赞同：2
> 
> 时间：2012-10-04T13:32:41.130
> 
> 标签：javascript, foursquare

我正在尝试将 Foursquare 与我的 WebApp 集成。我按照 Foursquare 开发人员文档的说明进行操作，但我的应用程序无法运行（有客户端 ID、客户端密码...）

得到以下错误：*“FoursquareClient 未定义”*

我试过这个：.html

```
 <!DOCTYPE html>
        <html  DIR=ltr >
         <head>
         <title>Foursquare</title>
         <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
         <meta name="viewport" content="width=320, initial-scale=1, minimum-scale=1,                       maximum-scale=1">
          <script src="/html5/jquery-1.8.2.min.js" type="text/javascript"></script>
           <script type="text/javascript" src="/html5/foursquare.js"></script>
          <script src="https://ss0.4sqi.net/scripts/third_party/jquery.ba-bbq-eddd4adf74d0c1310a401475178c57df.js" type="text/javascript"></script>
         <script src="https://ss1.4sqi.net/scripts/apisamples-35608dc9c26343e74f5d99fc20bae6c5.js" type="text/javascript"></script>
    </head>
       <body   onload="return viewFoursquareLoad(event)" >
      <div data-role="page"  id="viewFoursquare"  >
        <table id="viewFoursquare_table"><tr><td>
       </td></tr></table>
     </form></div>
   </body>
   </html> 
```

和foursquare.js：

```
 function viewFoursquareLoad(event) {
       var client = new FourSquareClient("<3PMAYEX2KZ11R25GWV4WVP0IYEVWU01NVP49890KHA5OWJ21VVB>", "<PRQKBBE0N0VBUQTQ5R2F1UFGEYFZ322ZNVLHO88991MHC3I0O0VI>", "<http://url.com.br>", "<remember_credentials>");

  client.venuesClient.venues("<IHR8THISVNU>", {
   onSuccess: function(data)
   {
       alert(data.response);
   },
   onFailure: function(data)
   {
   alert(data.response);
        // the request failed
   }
   });
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:40:52.647

尝试不使用所有尖括号。

```
 var client = new FourSquareClient("3PMAYEX2KZ11R25GWV4WVP0IYEVWU01NVP49890KHA5OWJ21VVB", "PRQKBBE0N0VBUQTQ5R2F1UFGEYFZ322ZNVLHO88991MHC3I0O0VI", "http://url.com.br", "remember_credentials"); 
```

和

```
client.venuesClient.venues("IHR8THISVNU", { 
```

# java - JavaFX 2.0 中的绑定

> ID：12728425
> 
> 赞同：1
> 
> 时间：2012-10-04T13:33:00.553
> 
> 标签：java, data-binding, javafx-2, javafx

也许我误解了 JavaFX 绑定，或者 SimpleStringProperty 中存在错误。

当我运行这个测试代码时，我更改的模型值没有得到新值。测试 testBindingToModel 失败。我认为我的模型应该使用 TextField tf 的值进行更新。但只有 prop1Binding 的绑定值获得值“test”。

```
public class BindingTest {  
    private TextField tf;
    private Model model;
    private ModelBinding mb;

    @Before
    public void prepare() {
        tf = new TextField();
        model = new Model();
        mb = new ModelBinding(model);
        Bindings.bindBidirectional(tf.textProperty(), mb.prop1Binding);
    }

    @Test
    public void testBindingToMB() {
        tf.setText("test");

        assertEquals(tf.getText(), mb.prop1Binding.get());
    }

    @Test
    public void testBindingToModel() {
        tf.setText("test");

        assertEquals(tf.getText(), mb.prop1Binding.get());
        assertEquals(tf.getText(), model.getProp1());
    }

    private static class ModelBinding {
        private final StringProperty prop1Binding;

        public ModelBinding(Model model) {
            prop1Binding = new SimpleStringProperty(model, "prop1");
        }

    }

    private static class Model {
        private String prop1;

        public String getProp1() {
            return prop1;
        }

        public void setProp1(String prop1) {
            this.prop1 = prop1;
        }       
    }
    } 
```

谢谢你的帮助。

最好的问候塞巴斯蒂安

编辑：有了这个类，我可以直接设置模型的值。我将在接下来的几天里测试这门课，并用我的结果评论这篇文章。

```
public class MySimpleStringProperty extends SimpleStringProperty {
    public MySimpleStringProperty(Object obj, String name) {
        super(obj, name);
    }

    public MySimpleStringProperty(Object obj, String name, String initVal) {
        super(obj, name, initVal);
    }

    @Override
    public void set(String arg0) {
        super.set(arg0);
        if (this.getBean() != null) {
            try {
                Field f = this.getBean().getClass().getDeclaredField(this.getName());
                f.setAccessible(true);
                f.set(this.getBean(), arg0);
            } catch (NoSuchFieldException e) {
                // logging here
            } catch (SecurityException e) {
                // logging here
            } catch (IllegalArgumentException e) {
                // logging here
            } catch (IllegalAccessException e) {
                // logging here
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T15:24:32.373

不幸的是，这个构造函数没有附加`SimpleStringProperty`到一个 bean 对象上。它只是说`SimpleStringProperty`属于哪个bean属性。

例如，如果你想在你的类中拥有一个属性，你应该这样做：

```
public static class Model {

    private StringProperty prop1 = 
          new SimpleStringProperty(this, "prop1", "default_value");

    public String getProp1() {
        return prop1.get();
    }

    public void setProp1(String value) {
        prop1.set(value);
    }

    public StringProperty prop1Property() {
        return prop1;
    }
} 
```

请注意，无法绑定到您的原始`Model`类，因为它不提供有关设置新`prop1`值的事件。如果你想拥有可观察的模型，你应该从一开始就使用 fx 属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-07T11:50:59.057

刚刚发现提供了 JavaBeanStringProperty 类，它正好满足了我的要求。

使用此代码，我可以直接将我的 bean 的值绑定到 StringProperty（包括设置和从我的 Bean 获取我的值）。

```
binding = JavaBeanStringPropertyBuilder.create().beanClass(Model.class).bean(model).name("prop1").build(); 
```

我发现的唯一问题是，当您在设置绑定后更改模型的值时，例如在 TextField 中没有更新。

# c - 如何跨多个文件使用静态 C 变量？

> ID：12728426
> 
> 赞同：8
> 
> 时间：2012-10-04T13:32:59.703
> 
> 标签：c, file, gcc, static

我有两个 C 文件 1.c 和 2.c

## 2.c

```
#include<stdio.h>

static int i;

int func1(){
   i = 5;
   printf("\nfile2 : %d\n",i);
   return 0;
} 
```

## 1.c

```
#include<stdio.h>

int i;

int main()
{
   func1();
   printf("\nFile1: %d\n",i);
   return 0;
} 
```

我用“gcc 1.c 2.c -o st”编译了这两个文件，输出如下

```
file2 : 5

File2: 0 
```

我期待输出如下

```
file2 : 5

File2: 5 
```

我想在两个文件中访问相同的变量“i”。我该怎么做？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-04T13:34:10.490

选择一个将存储变量的文件。不要使用`static`. 的全部要点`static`是保持变量私有并且其他模块无法触及。

在所有其他文件中，使用`extern`关键字来引用变量：

```
extern int i; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-04T14:05:09.250

永远没有理由访问另一个文件中的静态变量。您似乎不知道为什么要使用 static 关键字。有两种方法可以在文件范围（外部函数）声明变量。

**全局变量**

```
int i; 
```

好处：

*   在整个程序执行过程中都有效。

缺点：

*   可以使用**extern**访问以创建意大利面条代码。
*   “污染”全局命名空间。
*   不是线程安全的。
*   在程序启动时初始化，这会产生程序开销。

* * *

**本地/私有变量**

```
static int i; 
```

好处：

*   在整个程序执行过程中都有效。
*   只能由同一“模块”/“翻译单元”（同一 .c 文件）中的文件访问。
*   提供私有封装，因为调用者无法访问它。

缺点：

*   不是线程安全的。
*   在程序启动时初始化，这会产生程序开销。

* * *

我个人的看法是，没有理由使用全局变量或 extern 关键字。我已经编程了 15 年以上，从来不需要使用任何一个。我已经编写了从实时嵌入式系统到 Windows GUI 绒毛应用程序的所有程序，而且我从来不需要在任何形式的应用程序中使用全局变量。此外，几乎所有已知的 C 编码标准都禁止使用它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T13:40:29.123

`static`变量只能在单个翻译单元中访问，这意味着只有定义它的文件中的代码才能看到它。维基[百科文章](http://en.wikipedia.org/wiki/Static_variable)有一个很好的解释。在这种情况下，要跨多个文件共享变量，您将使用`extern`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-13T06:18:52.440

不推荐，但我们可以使用带有外部存储类的指针来实现。

**在 2.c**

```
static int i;
int *globalvar = &i; 
```

**在 1.c**

```
extern int *globalvar; 
```

# vb.net - 使用 vb.net 查找 gsm 调制解调器 com 端口

> ID：12728428
> 
> 赞同：1
> 
> 时间：2012-10-04T13:33:05.147
> 
> 标签：vb.net

如何使用 vb.net 找到 gsm 调制解调器的 com 端口？我写这段代码：

```
Imports System
Imports System.Threading
Imports System.ComponentModel
Imports System.IO.Ports

Public Class Form1
'connect your mobile/GSM modem to PC,
'then go in device manager and check under ports which COM port has been slected
'if say com1 is there then put com2 in following statement
Dim SMSEngine As New SMSCOMMS("COM5")
Dim i As Integer
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click

    SMSEngine.Open() 'open the port
    SMSEngine.SendSMS() 'send the SMS

End Sub
End Class
Public Class SMSCOMMS
Private WithEvents SMSPort As SerialPort
Private SMSThread As Thread
Private ReadThread As Thread
Shared _Continue As Boolean = False
Shared _ContSMS As Boolean = False
Private _Wait As Boolean = False
Shared _ReadPort As Boolean = False
Public Event Sending(ByVal Done As Boolean)
Public Event DataReceived(ByVal Message As String)

Public Sub New(ByRef COMMPORT As String)
    'initialize all values
    SMSPort = New SerialPort
    With SMSPort
        .PortName = COMMPORT
        .BaudRate = 19200
        .Parity = Parity.None
        .DataBits = 8
        .StopBits = StopBits.One
        .Handshake = Handshake.RequestToSend
        .DtrEnable = True
        .RtsEnable = True
        .NewLine = vbCrLf
    End With
End Sub
Public Function SendSMS() As Boolean
    If SMSPort.IsOpen = True Then
        'sending AT commands
        SMSPort.WriteLine("AT")
        SMSPort.WriteLine("AT+CMGF=1" & vbCrLf) 'set command message format to text mode(1)
        SMSPort.WriteLine("AT+CMGS=""+628988397877""" & vbCrLf) ' enter the mobile number whom you want to send the SMS
        _ContSMS = False
        SMSPort.WriteLine("SUCCESS" & vbCrLf & Chr(26)) 'SMS sending
        SMSPort.Close()
    End If
End Function

Public Sub Open()
    If Not (SMSPort.IsOpen = True) Then
        SMSPort.Open()
    End If
End Sub

Public Sub Close()
    If SMSPort.IsOpen = True Then
        SMSPort.Close()
    End If
End Sub
End Class 
```

但在这段代码中：

```
Dim SMSEngine As New SMSCOMMS("COM5") 
```

我需要知道我的调制解调器 gsm 连接了哪个 com 端口，所以我需要可以自动找到 com 端口的代码，有人可以帮我吗？

**非常感谢你。**
注意：我使用 Visual Basic 2012 (vb.net)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:56:59.077

无需在程序界面中选择 COM 端口或硬编码端口号而自动执行此操作的唯一方法是尝试打开所有可用的 COM 端口，并向每个端口发送某种状态命令并侦听（短超时时间）用于只有 GSM 调制解调器会返回的回复。当然，这意味着您可能会向连接到计算机的其他串行设备（如果有）发送奇怪的命令，但我猜在您的情况下，它将是唯一连接任何东西的串行端口。

获取当前计算机上的串口名称列表的功能请参见[此处。](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.getportnames.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T16:34:15.713

就像其他人说的那样，您必须循环所有端口并检查是否可以使用速率/端口连接到 GSM 调制解调器。这是一个库，它是 c#，但您可以下载源代码以查看它是如何工作的。

[http://www.scampers.org/steve/sms/libraries.htm](http://www.scampers.org/steve/sms/libraries.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-06T05:30:06.383

这是在 vb.net 中查找附加调制解调器及其属性的代码。

```
Dim searcher As New ManagementObjectSearcher( _
                    "root\CIMV2", _
                    "SELECT * FROM Win32_POTSModem")
                ComboBox1.Items.Clear()
                For Each queryObj As ManagementObject In searcher.Get()
                    If queryObj("Status") = "OK" Then
                        modems = queryObj("Description")
                        baud = queryObj("MaxBaudRateToSerialPort")
                        Port = queryObj("AttachedTo")
                         da.rows.add(1)
                        da.rows(incount).item(1)=Port 
                        da.rows(incount).item(2)=baud
                        ComboBox1.Items.Add(modems)
                        ComboBox1.SelectedIndex = ComboBox1.FindString("Nokia")
                        If ComboBox1.SelectedItem = "" Then
                            ComboBox1.SelectedIndex = ComboBox1.FindString("Samsung")
                            If ComboBox1.SelectedItem = "" Then
                                ComboBox1.SelectedIndex = 0
                            End If
                        End If
                    End If
                 intcount+=1
                Next 
```

您需要添加对 System.management 程序集的引用并导入命名空间 system.management。

# bash - 关于备份的 BASH 脚本的建议

> ID：12728429
> 
> 赞同：1
> 
> 时间：2012-10-04T13:33:05.570
> 
> 标签：bash, backup, centos, plesk

我有一台安装了 plesk 的服务器（centOS），我需要为每天计划一些备份。Plesk 只允许一个计划备份，所以我创建了这个解决方案：

1.  每天晚上在文件夹中创建一个备份
2.  启动一个脚本，该脚本将从文件夹内的 txt 文件的标题中读取日期（每晚通过 cronTAB 启动）
3.  将备份文件移动到正确的目录中（基于当天的名称）
4.  更改txt标题中的日期名称

这是我的脚本（目前未测试）：

```
BACKUPNAME="backupname"
cd /backup/daily
find . -type f | while IFS= read filename; do
  case "${filename,,*}" in 
    mon.txt) mv $BACKUPNAME ../mon
    mv mon.txt tue.txt;;
    tue.txt) mv $BACKUPNAME ../tue
    mv tue.txt wed.txt;;
    wed.txt) mv $BACKUPNAME ../wed
    mv wed.txt thu.txt;;
    thu.txt) mv $BACKUPNAME ../thu
    mv thu.txt fri.txt;;
    fri.txt) mv $BACKUPNAME ../fri
    mv fri.txt sat.txt;;
    sat.txt) mv $BACKUPNAME ../sat
    mv sat.txt sun.txt;;
    sun.txt) mv $BACKUPNAME ../sun
    mv sun.txt mon.txt;;
    * : ;; #nothing
  esac
done 
```

您认为这是一个好的/稳定的解决方案吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:33:45.510

根据日期轮换备份目标是合理的，但问题中显示的名称生成方法取决于每天运行一次的系统。如果系统关闭一天，或者脚本一天运行两次，您的`mon.txt`, `tue.txt`, ... 序列将不同步。不要使用文件名和笨拙的 case 语句来获取目标目录的名称，而是使用如下代码：

```
day=$(date +%a)
mv $BACKUPNAME ../${day,,} 
```

如果备份文件属于与当前不同的日期，请使用`date`如下形式之一，分别设置`day`为昨天的名称，或文件最后修改日期的名称。

```
day=$(date +%a --date=yesterday)
day=$(date +%a -r $BACKUPNAME) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:41:49.410

我不知道你所说的“只有一个计划的备份”是什么意思，你能解释一下吗？

另一方面，如果需要，为什么不做一个 rsync 并删除最旧的......这就是我这样做的方式：

```
#!/bin/bash
date=`/bin/date "+%Y-%m-%dT%H_%M_%S"`
HOME=/root

/bin/echo -e "\n\n# Backup from $date\n" >> /var/log/backup.log

/usr/bin/rsync -axzP \
  --delete \
  --delete-excluded \
  --exclude-from=$HOME/.rsync/exclude \
  --link-dest=/COREBACKUP/CurrentBackup \
  / /COREBACKUP/Backups/incomplete_back-$date >> /var/log/backup.log 2>&1 \
&& mv /COREBACKUP/Backups/incomplete_back-$date /COREBACKUP/Backups/back-$date \
&& rm -f /COREBACKUP/CurrentBackup \
&& ln -s /COREBACKUP/Backups/back-$date /COREBACKUP/CurrentBackup \
&& echo `/bin/date "+%Y-%m-%d - %H:%M:%S"` > /var/log/lastbackup.log 2>&1 
```

该脚本每天通过 cron 调用，它会完整备份“/”，不包括 $HOME/.rsync/exclude 中列出的所有内容。

备份存储在/COREBACKUP/Backups/back-$date，最新备份存储在/COREBACKUP/CurrentBackup。

它工作得很好，虽然它可以写得更用户友好;-)

# java - 获取 Foo.java 的一种实现

> ID：12728430
> 
> 赞同：0
> 
> 时间：2012-10-04T13:33:13.703
> 
> 标签：java, interface, enums

我有`Foo.java`，这是界面。

以及许多实现它的类。`Bar1.java , Bar2.java`等等

我在前端有一个方法，就像这样：`getBar(String bar)`

我可以这样做：

```
if(bar.equals("Bar1")) {
    return new Bar1();
} 
```

但是我能以某种方式做到这一点，即每次都有新的实现`Foo.java`，那么我不必用新的`ELSE`语句来更新我的方法。

我认为每个实现都有唯一的 ID 或其他东西，`BarX.java`每当我创建它时我都会添加它。

**有什么建议或想法吗？**我想也许我可以使用`enum`或 smthing 或任何其他解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:34:07.860

仅供参考：当然，您意识到您不应该这样写：

```
if(bar == "Bar1") {
    return new Bar1();
} 
```

你应该这样做：

```
if("Bar1".equals(bar)) {
    return new Bar1();
} 
```

看起来你需要一个工厂（又名虚拟构造函数）。如果你所有的 Foo 实现者都有一个默认构造函数，你可以这样做：

```
public class FooFactory {

    public static Foo create(Class<Foo> clazz) {
        return clazz.newInstance();
    }

    public static Foo create(String className) {
        return create(Class.forName(className));
    }
} 
```

有异常需要处理；我没有时间为你拼写出来。你应该看到这个想法。您需要做的就是编写一个新类，您的工厂可以处理它。

如果还有其他构造函数，只需用参数和附加调用详细说明主题。这应该让你开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T13:35:28.033

对我来说听起来像是依赖注入**或**反射的工作。

你可以做 ：

```
Class myClass = Class.forName("my.namespace.MyClass"); 
```

那将是反思。不是很好，但做的工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T13:38:08.523

您可以按类名创建对象：

```
Class<?> clazz = Class.forName(className);
Object object = ctor.newInstance(); 
```

或者，如果您需要调用特定的构造函数（例如，使用一个`String`参数`strArgument`）：

```
Constructor<?> c = clazz.getConstructor(String.class);
Object object = c.newInstance(new Object[] { strArgument }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T13:40:18.903

这是一个经典的工厂模式问题。

解决方案是每当您必须维护静态 Map 并且每当您有新的“Bar”类型时，您都需要首先在地图中注册它，因此无论何时您想要该类型的对象，您都可以简单地从地图中选择它。

考虑以下类

```
interface IVehicle {
    public void drive();
    public void stop();
}

class Car implements IVehicle {

    public void drive(){
        //logic goes here
    }

    public void stop(){
        //logic goes here
    }
}

class VehicleFactory{

    public IVehicle createVehicle(String VehicleType){
        IVehicle vehicle = null;

        if("Car".equalsIgnoreCase(VehicleType) ){
            vehicle = new Car();
        }
        if("Bus".equalsIgnoreCase(VehicleType) ){
            //vehicle = new Bus();
        }
        if("Train".equalsIgnoreCase(VehicleType) ){
            //vehicle = new Train();
        }
        return vehicle;
    }
} 
```

因此，每当您拥有一种新型车辆时，您都必须通过添加新车辆类型的代码来更改方法。

解决方案是改进 VehicleFactory 类，如下所示，所有车辆类型都应在地图中注册，如下所示。

```
class Car implements IVehicle {

    static{
        VehicleFactoryFlexible.registerVehicle("Car", new Car());
    }
    public void drive(){
        //logic goes here
    }

    public void stop(){
        //logic goes here
    }

    public IVehicle createVehicle(){
        return (IVehicle) new Car();
    }
}

public class VehicleFactoryFlexible {

    static Map vehicleRegistry = new HashMap();

    public static void registerVehicle(String vehicleType, IVehicle veh){
        vehicleRegistry.put(vehicleType, veh);
    }

    public IVehicle createVehicle(String vehicleType){
        IVehicle vehicle = (IVehicle)vehicleRegistry.get(vehicleType);
        return vehicle.createVehicle();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T13:43:18.090

**-** `Reflection`是要走的路...

**-**但你仍然可以使用这样的方法

```
public static Foo createObj(Class<Foo> clazz) {
    return clazz.newInstance();
} 
```

**-**是的，值得一提的是，它应该是`equals()`而**不是** `==`

```
if(bar.equals("Bar1")) {
    return new Bar1();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-04T13:49:26.067

使用反射，您可以扫描整个包中的所有 BarX 类，并使用此列表实例化您的输入是否存在于列表中。或者您可以直接使用 Class.forName 解决方案来捕获错误。编辑：看看这个[http://code.google.com/p/reflections/](http://code.google.com/p/reflections/)

# jquery - Highchart饼图点击悬停

> ID：12728432
> 
> 赞同：1
> 
> 时间：2012-10-04T13:33:15.573
> 
> 标签：jquery, highcharts, pie-chart

如何在鼠标悬停时在饼图上调用鼠标单击事件？我尝试了一些东西，但它的点击并不像我需要的那么顺利。这是代码示例：

```
 plotOptions: {
        pie: {
            innerSize: '50%',
            size: 100,
            cursor: 'pointer',
            dataLabels: false
        },
        series: {
            allowPointSelect: true,
            type: 'pie',
            name: 'Coordinates',
            point: {
                events: {
                    mouseOver: function (e) {
                      pieChart.tooltip.hide();
                        var serie = this.series.data[this.x];
                        var waitBeforeSelect = setTimeout(function () {
                            clearTimeout(waitBeforeSelect);
                            serie.select();
                            serie.series.show();
                            pieChart.tooltip.refresh(serie);
                        }, 500);

                        var serieName = serie.name;
                        var textToShow = serieName.substr(0, serieName.indexOf(';'));
                        $('#pieChartInfoText').children().text(textToShow);
                        $('#pieChartInfoText').children().css('color', serie.color);
                    },
                    mouseOut: function () {
                        pieChart.tooltip.hide();
                    }
                }
            }
        }
    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T17:50:19.870

如果您真正想做的只是选择 mouseOver 上的点（我需要做的就是让我提出您的问题），您可以在 mouseOver 函数中调用 this.select(true) 。这没有超时延迟，但仍然可以添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-05T13:48:11.567

谢谢你，伊戈尔！

是的，它对我帮助很大，但它也有一些缺点：如果你将鼠标多次移到图表上，它会反复来回移动，尤其是在`Donut`图表上可见。

这是代码片段：

```
series: {
            allowPointSelect: true,
            type: 'pie',
            name: 'Coordinates',
            point: {
                events: {
                    mouseOver: function (e) {
                        var serie = this.series.data[this.x];
                        if ((undefined == previousSerie) || (serie != previousSerie)) {
                            var point = this;

                            if (!point.selected) {
                                pieChart.tooltip.shared = true;

                                var timeout = setTimeout(function () {
                                    clearTimeout(timeout);
                                    point.firePointEvent('click');

                                    pieChart.tooltip.shared = false;
                                    pieChart.tooltip.refresh(point);
                                }, 700);
                            }

                            var serieName = serie.name;
                            var textToShow = serieName.substr(0, serieName.indexOf(';'));
                            $('#pieChartInfoText').children().text(textToShow);
                            $('#pieChartInfoText').children().css('color', serie.color);
                            previousSerie = serie;
                        } else {
                            previousSerie = serie;
                        }
                    },
                    mouseOut: function () {
                        //  pieChart.tooltip.hide();
                    }
                }
            }
        } 
```

# javascript - 存储记录编辑后和提交后网格丢失（可见）选择

> ID：12728433
> 
> 赞同：4
> 
> 时间：2012-10-04T13:33:24.587
> 
> 标签：javascript, extjs

我有一个简单的案例，我有一个带有附加商店的网格。

有 2 个按钮。一个带有修改所选记录的处理程序。一个带有提交所选记录的处理程序。

当我选择一条记录并推送编辑-> 编辑发生选择（看起来丢失）如果你打电话`grid.geSelectionModel().getSelection()`你会看到该记录仍然被选中。它只是没有那样显示。

您不能再次选择它，您首先必须选择另一条记录，然后再选择该记录。

其次，当您选择一条记录单击提交按钮时，该值已提交，但选择再次“显示”为丢失。

这是一个错误吗？我怎样才能解决这个问题？我希望它保持选择可见！

[这是一个小提琴](http://jsfiddle.net/Vandeplas/YZqch/5/)

这是示例代码：（我使用 Ext 4.1.1）

```
var cellEditing = Ext.create('Ext.grid.plugin.CellEditing', {
        clicksToEdit: 1
    });

Ext.create('Ext.data.Store', {
    storeId: 'simpsonsStore',
    fields: ['name', 'email', 'phone'],
    data: {
        'items': [{
            'name': 'Lisa',
            "email": "lisa@simpsons.com",
            "phone": "555-111-1224"
        }, {
            'name': 'Bart',
            "email": "bart@simpsons.com",
            "phone": "555-222-1234"
        }, {
            'name': 'Homer',
            "email": "home@simpsons.com",
            "phone": "555-222-1244"
        }, {
            'name': 'Marge',
            "email": "marge@simpsons.com",
            "phone": "555-222-1254"
        }]
    },
    proxy: {
        type: 'memory',
        reader: {
            type: 'json',
            root: 'items'
        }
    }
});

Ext.create('Ext.container.Container', {
    layout: 'fit',
    renderTo: Ext.getBody(),
    items: [{
        xtype: 'grid',
        store: Ext.data.StoreManager.lookup('simpsonsStore'),
        columns: [{
            text: 'Name',
            dataIndex: 'name'
        }, {
            text: 'Email',
            dataIndex: 'email',
            flex: 1
        }, {
            text: 'Phone',
            dataIndex: 'phone'
        }],
        height: 200,
        buttons: [{
            text: 'commit selection',
            handler: function(){
                this.up('grid').getSelectionModel().getSelection()[0].commit();
            }
        },{
            text: 'set selection name to maggy',
            handler: function(){
                this.up('grid').getSelectionModel().getSelection()[0].set('name', 'Maggy');
            }
        }]
    }]
});​ 
```

***更新：***

[我在煎茶论坛](http://www.sencha.com/forum/showthread.php?244974-Grid-loses-%28visible%29-selection-after-store-record-edit-and-after-comit&p=895406#post895406)上报告了它。Mitchel Simoens 告诉我它已在 Ext 4.1.2 中修复。太糟糕了，它是一个“仅限支持订阅者”版本..

***更新：***

我正在查找问题以尝试修复它。我相信问题出在 onUpdate 方法中的 Ext.view.Table 类中，更准确地说是围绕这段代码：

```
if (oldRowDom.mergeAttributes) {
    oldRowDom.mergeAttributes(newRow, true);
} else {
    newAttrs = newRow.attributes;
    attLen = newAttrs.length;
    for (i = 0; i < attLen; i++) {
        attName = newAttrs[i].name;
        if (attName !== 'id') {
           oldRowDom.setAttribute(attName, newAttrs[i].value);
        }
    }
} 
```

只留下这段代码是一个坏主意吗？我评论了它似乎现在可以工作了，但它不会破坏其他一些功能吗？[http://jsfiddle.net/Vandeplas/YZqch/10/](http://jsfiddle.net/Vandeplas/YZqch/10/)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T14:00:45.857

我认为这是一个错误，可能是刷新网格以显示脏位的一部分。[在您修改后的小提琴中](http://jsfiddle.net/YZqch/6/)
，我以一种丑陋的方式规避了这一点：

```
{
    text: 'set selection name to maggy',
    handler: function(){
        var sel = this.up('grid').getSelectionModel();
        var rec = sel.getSelection()[0];
        rec.set('name', 'Maggy');
        sel.deselectAll();
        sel.select(rec.index);
    }
} 
```

我这样做是为了`.set()`，但同样可以为`commit()`

希望这会有所帮助。

# c# - Specflow 测试随机失败

> ID：12728437
> 
> 赞同：1
> 
> 时间：2012-10-04T13:33:39.250
> 
> 标签：c#, visual-studio-2010, testing, bdd, specflow

**前题：虽然我在前面的**[Specflow 稳定性](https://stackoverflow.com/questions/11882712/specflow-stability)
主题中提到了这个问题，但我想在一个新的主题中再次提出这个问题。这是因为上一个主题的标题具有误导性（我现在认为 Specflow 稳定性不是问题），我可以更准确地解决问题。

**问题：**
当我运行大约 50 个测试的完整测试集时，大多数时候随机有一两个测试失败（有时没有测试失败）。当我将完整的测试集分割成更小的测试集（例如，每个单独的用户故事包含 7 或 8 个测试的测试集），并且这些集单独运行时，所有测试都通过了。就像 Luke McGregor 在[Specflow 稳定性](https://stackoverflow.com/questions/11882712/specflow-stability)中所说的那样，测试似乎正在共享数据，因此失败了。但是为什么只有在运行完整的集合时才会发生这种情况，而不是在我使用较小的集合时？

**背景：**
我正在尝试运行一组 50 个左右的 Specflow 测试。所有这些测试都旨在测试网站的 UI。测试在 Visual Studio 2010 中运行，使用 MsTest 作为运行器工具。使用的浏览器是 FireFox。目前，在测试中采取的步骤是：

*   在每个场景之前，都会启动一个新的 IIS 进程和一个新的 BrowserSession；
*   运行场景；
*   在每个场景之后，IIS 进程和 BrowserSession 都会终止；

我在每个单独的测试场景之前启动一个新的 IIS 进程和一个新的 BrowserSession 的原因是为了尽量减少卢克提到的“数据共享”的风险。不幸无济于事。

我现在有点迷失了问题可能是什么。我在这里遗漏了一些明显（或者可能不那么明显）的东西吗？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:25:06.440

如果您可以举一些测试失败的例子，这将有所帮助。

测试是否因为在页面上找不到某些元素而失败？如果是这种情况，如果您使用的是 WebDriver，我建议您启用隐式等待。这将使您的测试套件运行速度变慢，但您将获得稳定性。

```
WebDriver driver = new FirefoxDriver();
driver.Manage().Timeouts().ImplicitlyWait(TimeSpan.FromSeconds(10)); 
```

通过浏览器进行测试可能会导致随机失败，特别是如果您的测试不是为了等待元素出现在页面上而设计的。使用 ajax 调用也会变得非常棘手。

在旁注中，我建议您避免在每次测试之前运行新的浏览器并启动 IIS。原因是您的测试套件将需要很长时间才能运行。相反，我建议： - 您在测试套件开始时只运行一次 IIS。（您可以使用标签 [BeforeTestRun]） - 在您的测试套件开始时只打开一次浏览器会话。([BeforeTestRun]) - 在每次测试结束时，只需注销用户，以便清除所有 cookie。（[后情景]）

这将大大加快您的测试套件的速度。

关于共享状态，我建议您使用属性 [BeforeScenario] 重置测试使用的所有数据。例如，如果您的测试在数据库中设置数据，您将在每次测试运行之前清理数据库。

最后，确保您的测试是自包含的：不应使用其他测试使用的数据。测试需要始终从干净的初始状态运行并创建所需的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:06:30.883

静态类是一种可能性。
请仔细查看失败的测试。你能看到一个模式吗？也许有些测试永远不会失败，而其他测试偶尔会失败？仔细看看那些失败的。

* * *

多个单元测试中使用的静态类是数据共享或状态共享的经典案例。

例如，考虑这个类：

```
public static class TimeProvider
{
    static TimeProvider()
    {
        CurrentTimeProvider = () => DateTime.Now;
    }

    public static Func<DateTime> CurrentTimeProvider { get; set; }

    public static DateTime Now { get { return CurrentTimeProvider(); } }
} 
```

现在，假设一个单元测试想要测试与当前时间相关的东西：

```
public void AddItemSetsOrderDateAsCurrentTime()
{
    // Arrange
    var currentTime = new DateTime(2011, 1, 1, 12, 15);
    TimeProvider.CurrentTimeProvider = () => currentTime;

    // Act
    //...
} 
```

以下所有使用的单元测试`TimeProvider.Now`将获得 2011-01-01 12:15 而不是当前时间。这是一个测试如何影响不同测试的一个例子。

# php - 函数重写是否需要实例化？

> ID：12728443
> 
> 赞同：3
> 
> 时间：2012-10-04T13:33:55.263
> 
> 标签：php, oop

> **可能重复：**
> [PHP 中的后期静态绑定到底是什么？](https://stackoverflow.com/questions/1912902/what-exactly-is-late-static-binding-in-php)

在这个例子中，PHP 将打印“NO”而不是“YES”，这与我的预期相反。

如果我删除`static`on `function c()`，替换`self::`为`$this->`and do `$e = new B; $e->c();`，一切都会奏效。

这是否意味着需要实例化才能使父类中的函数调用继承类中的覆盖函数？

（附带问题：这是 PHP 的怪癖，还是这个逻辑也适用于大多数其他编程语言？如果是，它背后的基本原理是什么？）

```
class A {
  static function c() {
    self::d();
  }
  static function d() {
    echo "NO :(\n";
  }
}

class B extends A {
  static function d() {
    echo "YES :)\n";
  }
}

B::c(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T13:36:23.453

您需要使用`static`关键字而不是`self`or `$this`。

```
<?php

class A {
    static function c() {
        static::d();
    }
    static function d() {
        echo "NO :(\n";
    }
}

class B extends A {
     static function d() {
         echo "YES :)\n";
     }
}

B::c();

// YES :) 
```

这种行为称为[后期静态绑定](http://php.net/manual/en/language.oop5.late-static-bindings.php)。

# c# - 使用多线程或并行处理处理繁重的服务调用

> ID：12728448
> 
> 赞同：0
> 
> 时间：2012-10-04T13:34:03.830
> 
> 标签：c#, asp.net

我有一个如下所述的服务方法

```
GetDetails(List<int> ids) 
```

问题是，如果 id 的数量（计数）小于 50，则上述服务方法可以正常工作......超过 50 个 id 的任何东西都会引发错误......这就是服务的构建方式，我没有任何控制权更改此服务方法...

现在我有一种情况，我必须为 1000 个 Id 调用此服务方法，这意味着上述服务方法将不起作用，除非我猜测要做某种多线程/并行的东西......我的问题是......有没有办法使这项工作，同时不妥协的性能很多...任何帮助将不胜感激...

**更新** 错误是一个已处理的异常，服务说“无法处理请求”......这个服务是由一个远程团队工作的，我无法控制它......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T13:51:47.010

TPL + Linq。这将使用最多 50 个并行项目的列表调用服务。

```
Parallel.ForEach(
    ids.Select((Item, Index) => new { Item, Index })
        .GroupBy(x => x.Index / 50)
        .Select(g => g.Select(x => x.Item).ToList()),
    list =>
    {
        Console.WriteLine(String.Join(",", list));
        //GetDetails(list)
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:47:46.913

> 这意味着上述服务方法将不起作用，除非我猜测要做某种多线程/并行的东西......

为什么不使用`.Take()`and`.Skip()`遍历您的 ID 列表，一次使用 50 个 ID 拨打电话？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:48:42.253

可能可行的最简单的事情是将您对服务的调用批量化。

```
int index = 0;
while (index < ids.Count + 50)
{
    var batchedIds = ids.Skip(index).Take(50);
    GetDetails(batchedIds);
    index += 50;
} 
```

# fancybox-2 - YouTube（iframe）上的 Fancybox 2 标题“内部”？

> ID：12728449
> 
> 赞同：0
> 
> 时间：2012-10-04T13:34:04.703
> 
> 标签：fancybox-2

将 Fancybox 2 用于 YouTube/iFrame 内容时，是否可以将标题放在“内部”？每当我尝试插入

```
title: {
    type: 'inside'
} 
```

然后视频在新窗口中全屏播放。这是我目前正在使用的：

```
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<link rel="stylesheet" href="lib/jquery.fancybox.css" type="text/css" media="screen" />
<script type="text/javascript" src="lib/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
  $(document).ready(function() {
      $(".vids").fancybox({
            maxWidth    : 800,
            maxHeight   : 600,
            fitToView   : false,
            width       : '60%',
            height      : '60%',
            autoSize    : false,
            closeClick  : false,
            openEffect  : 'none',
            closeEffect : 'none'
      });
  });
</script> 
```

作为奖励，我希望标题文本包含一个可以打开的链接`_blank`。

此外，也许相关，要让视频在所有浏览器中播放，我必须更改 YouTube 链接，而不是执行以下操作：

```
<a class="vids fancybox.iframe" href="http://www.youtube.com/watch?v=whatever"> 
```

我得改一下，插入“embed”这个词，比如：

```
<a class="vids fancybox.iframe" href="http://www.youtube.com/embed/whatever"> 
```

这是一个合适的方法吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T17:59:55.637

很多问题是吗？

**首先**，要进入`title`fancybox，请使用`helpers`类似的选项

```
helpers: {  title : { type : 'inside' } } 
```

**其次**，`title`使用链接设置 a ...我建议您`data-*`在锚点中设置一个属性，这样链接就不会出现在普通浏览器的工具提示中...类似于

```
<a class="vids" href="http://www.youtube.com/watch?v=whatever" title="normal title" data-caption="<a href='{new link}' >See more</a>">open video</a> 
```

**请注意**，我没有添加`target="_blank"`，因为单击链接将自动导航到下一页（并关闭fancybox）

然后使用回调`beforeShow`构造`title`

```
beforeShow: function(){
 this.title = this.title + " " + $(this.element).data("caption");
} 
```

**第三**，显示 youtube 视频的正确方法是使用普通链接（如我上面的第二个示例），仅此而已。然后在您的文档中包含*fancybox-media* js 文件，例如

```
<script type="text/javascript" src="lib/helpers/jquery.fancybox-media.js"></script> 
```

（检查你自己的路径）

...并使用该`helpers`选项来设置媒体，如

```
helpers : {media : {} } 
```

所以，**总结一下**，你的 html 应该是这样的

```
<a class="vids" href="http://www.youtube.com/watch?v=whatever" title="normal title" data-caption="<a href='{new link}' >See more</a>">open video</a> 
```

和你的fancybox自定义脚本

```
<script type="text/javascript">
$(document).ready(function() {
 $(".vids").fancybox({
  maxWidth    : 800,
  maxHeight   : 600,
  fitToView   : false,
  width       : '60%',
  height      : '60%',
  autoSize    : false,
  closeClick  : false,
  openEffect  : 'none',
  closeEffect : 'none',
  helpers     : {  
        title : { type : 'inside' },
        media : {}
  },
  beforeShow: function(){
   this.title = this.title + " " + $(this.element).data("caption");
  }
 });
});
</script> 
```

# inno-setup - Inno 设置：使用 Windows 身份验证连接到 sql

> ID：12728450
> 
> 赞同：2
> 
> 时间：2012-10-04T13:34:05.147
> 
> 标签：inno-setup

谁能告诉我如何使用 Windows 身份验证通过 inno 连接到 SQL 2008？目前我正在使用ado 连接从 inno[连接到 SQL ，用户也需要 windows 身份验证选项。](https://stackoverflow.com/questions/12260493/connect-to-sql-2008-using-inno-setup#)请建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:06:13.167

当我们谈论您在问题中链接的示例并包含以下内容之一时，从您的连接字符串（`User Id`和）中删除凭据属性就足够了：`Password`

1.  `Integrated Security=SSPI;`
2.  `Trusted_Connection=True;`

这个答案只是基于[`this topic`](http://www.sql-server-helper.com/sql-server-2008/sqlconnection-connection-string.aspx#trusted)，我没有测试过。

***更新：***

我不知道这是否是你想要做的，但我会在这里发布。以下脚本创建一个带有单选按钮的自定义页面，让用户选择身份验证模式并可选择填写凭据。

***重要的：***

这些凭证字段没有针对 SQL 注入的保护！

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program

[Code]
const
  LT_WindowsAuthentication = 0;
  LT_SQLServerAuthentication = 1;
var
  LoginType: Integer;
  UsernameEdit: TNewEdit;
  UsernameLabel: TLabel;
  PasswordEdit: TNewEdit;
  PasswordLabel: TLabel;

procedure OnLoginTypeChange(Sender: TObject);
var
  EditColor: TColor;
  LabelColor: TColor;
begin
  LoginType := TNewRadioButton(Sender).Tag;
  UsernameEdit.Enabled := LoginType = LT_SQLServerAuthentication;
  PasswordEdit.Enabled := LoginType = LT_SQLServerAuthentication;
  case LoginType of
    LT_WindowsAuthentication: 
    begin 
      EditColor := clBtnFace;
      LabelColor := clGray;
    end;
    LT_SQLServerAuthentication: 
    begin
      EditColor := clWindow;
      LabelColor := clBlack;
    end;
  end;
  UsernameEdit.Color := EditColor;  
  PasswordEdit.Color := EditColor;
  UsernameLabel.Font.Color := LabelColor;
  PasswordLabel.Font.Color := LabelColor;
end;

procedure InitializeWizard;
var
  LoginPage: TWizardPage;
begin
  LoginPage := CreateCustomPage(wpWelcome, 'DB Login', 'Choose a login type to continue...');
  with TNewRadioButton.Create(WizardForm) do
  begin
    Parent := LoginPage.Surface;
    Left := 0;
    Top := 0;
    Width := LoginPage.Surface.ClientWidth;
    Checked := True;
    Tag := 0;
    Caption := 'Windows authentication';
    OnClick := @OnLoginTypeChange;    
  end;
  with TNewRadioButton.Create(WizardForm) do
  begin
    Parent := LoginPage.Surface;
    Left := 0;
    Top := 20;
    Width := LoginPage.Surface.ClientWidth;
    Checked := False;
    Tag := 1;
    Caption := 'SQL Server authentication';
    OnClick := @OnLoginTypeChange;
  end;

  UsernameLabel := TLabel.Create(WizardForm);
  with UsernameLabel do
  begin
    Parent := LoginPage.Surface;    
    Left := 12;
    Top := 44;
    Width := 200;
    Font.Color := clGray;
    Font.Style := [fsBold];
    Caption := 'Username';
  end;
  UsernameEdit := TNewEdit.Create(WizardForm);
  with UsernameEdit do
  begin
    Parent := LoginPage.Surface;    
    Left := 12;
    Top := UsernameLabel.Top + UsernameLabel.Height + 6;
    Width := 200;
    Color := clBtnFace;
    Enabled := False;    
  end;

  PasswordLabel := TLabel.Create(WizardForm);
  with PasswordLabel do
  begin
    Parent := LoginPage.Surface;    
    Left := 12;
    Top := UsernameEdit.Top + UsernameEdit.Height + 6;
    Width := 200;
    Font.Color := clGray;
    Font.Style := [fsBold];
    Caption := 'Password';
  end;
  PasswordEdit := TNewEdit.Create(WizardForm);
  with PasswordEdit do
  begin
    Parent := LoginPage.Surface;
    Left := 12;
    Top := PasswordLabel.Top + PasswordLabel.Height + 6;
    Width := 200;
    Color := clBtnFace;
    Enabled := False;    
    PasswordChar := '*';
  end;
end;

// and in your connection event then use
case LoginType of
  LT_WindowsAuthentication: 
    ADOConnection.ConnectionString := 
      'Provider=SQLOLEDB;' +                    // provider
      'Data Source=Default\SQLSERVER;' +        // server name
      'Initial Catalog=Northwind;' +            // default database
      'Integrated Security=SSPI;';              // trusted connection      
  LT_SQLServerAuthentication:
    ADOConnection.ConnectionString := 
      'Provider=SQLOLEDB;' +                    // provider
      'Data Source=Default\SQLSERVER;' +        // server name
      'Initial Catalog=Northwind;' +            // default database
      'User Id=' + UsernameEdit.Text + ';' +    // user name
      'Password=' + PasswordEdit.Text + ';';    // password
end; 
```

# c# - 在 WPF 中向用户报告错误的简单方法？

> ID：12728451
> 
> 赞同：0
> 
> 时间：2012-10-04T13:34:06.597
> 
> 标签：c#, wpf, logging, error-handling, nlog

现在在我的应用程序中，我正在使用`NLog`. 如果错误是`level = ERROR`，我想向用户展示一些东西，但允许他们继续，如果是`level = FATAL`，我也想向用户展示一些东西，但告诉他们他们需要关闭应用程序。最简单的方法是什么？它不需要什么花哨的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:02:34.050

您可能想要查看NLog的[Message Box Target 。](http://nlog-project.org/wiki/MessageBox_target)

# c++ - 在 AIX 上编译 boost 示例程序

> ID：12728459
> 
> 赞同：0
> 
> 时间：2012-10-04T13:34:21.480
> 
> 标签：c++, boost, aix

我可以使用以下命令成功编译 simple_ls.cpp：

```
xlc++  -qstrict -brtl -I /usr/local/include -L /usr/local/lib simple_ls.cpp -lboost_filesystem -o simple_ls 
```

但是，当我使用与 path_info.cpp 命令完全相同的语法时，我收到此错误：

```
xlc++  -qstrict -brtl -I /usr/local/include -L /usr/local/lib path_info.cpp -lboost_filesystem -o path_info
ld: 0711-317 ERROR: Undefined symbol: .boost::system::generic_category()
ld: 0711-317 ERROR: Undefined symbol: .boost::system::system_category()
ld: 0711-345 Use the -bloadmap or -bnoquiet option to obtain more information. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:53:26.280

您需要将第二个程序与 boost_system 链接。

```
xlc++ -qstrict -brtl -I /usr/local/include -L /usr/local/lib path_info.cpp -lboost_filesystem -o path_info -lboost_system 
```

# java - 创建文件然后稍后使用数据的最佳方法

> ID：12728463
> 
> 赞同：1
> 
> 时间：2012-10-04T13:34:39.943
> 
> 标签：java

Java：将数据存储在文件中的最佳方式。我正在对文件的 2 个版本进行比较，然后将文件之间的差异记录为插入、删除或更改。数据需要以类似的格式记录>>

```
Version_old=1.28 Version_new=1.29
Operation=Changed,SourceLineFrom=55,SourceLineTo=55 TargetFileFrom=55 TargetFileTo= 55
Operation=Delete, SourceLineFrom=57,SourceLineTo=59 TargetFilefrom=57 TargetFileTo= - 
```

以后需要这些数据。谁能建议我保存这些数据的最佳和最简单的格式？数据必须稍后检索以进行处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:38:52.673

我会查看 git diff 工具生成的格式。很清楚，可以很容易地被解析，而且我确信它有现有的解析器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:36:11.263

太多的选择真的很有帮助。

听起来可能是 XML - 至少您可以获得免费的解析器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:44:40.453

另一种选择是使用 JSON 格式存储数据。这主要是可能的，因为每个更改集都构造为名称-值对（基本上是 Map）。

# android - Android 备份服务在 IceCreamSandwitch 是否有效？

> ID：12728465
> 
> 赞同：3
> 
> 时间：2012-10-04T13:34:45.757
> 
> 标签：android, android-4.0-ice-cream-sandwich, restore, android-backup-service

我的应用程序使用[Android Backup Service](http://developer.android.com/guide/topics/data/backup.html)。

当应用程序安装在设备上时，通常会调用`onRestore()`我自己的方法`BackupAgent`，但是当我在具有冰淇淋三明治（API 级别 15）或更高级别的设备上使用它时，`onRestore()`根本**不会**调用方法！

设置的“备份和重置”中的两个系统选项（“备份我的数据”和“自动恢复”）均已启用。

有谁知道，为什么`onRestore()`不在 ICS+ 设备上调用？

# c - 示例 C 程序正在运行，但现有的多线程 C++ 程序在 Perl 5.16.0 的 Perl_sv_upgrade 中中止

> ID：12728468
> 
> 赞同：4
> 
> 时间：2012-10-04T13:34:54.283
> 
> 标签：c, perl, xs

在 Perl 5.16.0 中，示例 C 程序正在运行，但现有的多线程程序在`Perl_sv_upgrade`. 多线程程序在 Perl 5.8.8 中运行良好。相同的代码可以在 Linux 和 Solaris 上使用 Perl 5.16.0。

比较`sv`Linux 和 Hp-PA 之间的参数值显示该`sv`值是`NULL`在 Hp-PA 的情况下。以前有没有人注意到这个问题。请告诉我？

**调试并查看值后的 Linux 堆栈跟踪`sv`：**

```
Breakpoint 4, Perl_sv_upgrade (my_perl=0x14fe6400, sv=0x150317a8, new_type=SVt_PV)
    at sv.c:1140
1140    sv.c: No such file or directory.
(gdb) where
#0  Perl_sv_upgrade (my_perl=0x14fe6400, sv=0x150317a8, new_type=SVt_PV) at sv.c:1140 
```

**在分析 gdb 中的中止时看到 sv 值后的 HP-PA 堆栈跟踪：**

```
Thread 3 (system thread 428417):

#3 signal handler called
#4 0xca9825c4 in Perl_sv_upgrade (my_perl=0x40236f10, sv=0x0, new_type=SVt_PV)
    at sv.c:1260 
```

# .htaccess - Prestashop SEO 的 URL 复制

> ID：12728471
> 
> 赞同：0
> 
> 时间：2012-10-04T13:34:58.237
> 
> 标签：.htaccess, seo, friendly-url, prestashop

我有一个使用 CMS Prestashop 开发的电子商务。

昨天我在我的网站管理员工具中看到我有一些重复的 URL，如下所示：

```
www.mysite.com/manufacturers
www.mysite.com/it/manufacturers. 
```

其中“it”是网站默认语言的后缀，也是唯一的语言。

我已经在后台激活了友好的 URL，而且我还有一个由后台生成器自动生成的 .htaccess 文件。

我应该怎么做才能解决这个问题？

PS：另外我认为我已经受到了 googlebot 的惩罚。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T07:34:59.257

首先让我从搜索引擎优化的角度澄清标题。问题来自 Prestashop 方面，而不是来自 SEO 方面。它只会影响您的 SEO。

现在关于这个问题，Prestashop 因 URL 问题而臭名昭著。我不会向您推荐 .htaccess hack 解决方案，因为每次您从后端重新生成 .htaccess 时，您都必须再次手动插入该 hack 以解决问题。并且假设这个 url 问题在某个其他 url 之后再次出现，而不是你必须再次这样做。它可以变成一场噩梦。

所以这里有一些我个人的建议......

1.  如果此站点很重要（我假设），请从受信任的提供商处购买 Prestashop url 重写模块。如果将来再次出现此问题，您还将获得技术支持。

2.  如果你买不到，我建议你在 Prestashop 论坛上问这个问题，因为这是 Prestashop 特有的，以永久解决这个问题。您很可能会得到更多即时答案，因为您会发现在 Prestashop 上工作的人比这里更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T19:21:06.593

在文档根目录的 htaccess 文件或**mysite.com**的 vhost/server 配置中的某个位置，您需要进行 301 重定向。现在你只需要选择你想保留哪一个，`/it/`前面有还是没有？假设您想将所有内容都指向没有，您将使用以下之一：

使用 mod_alias：

```
Redirect 301 /it/manufacturers /manufacturers 
```

使用 mod_rewrite：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?mysite.com$ [NC]
RewriteRule ^/?it/manufacturers(.*)$ /manufacturers$1 [L,R=301] 
```

# excel - 在excel中生成趋势图

> ID：12728474
> 
> 赞同：1
> 
> 时间：2012-10-04T13:35:12.097
> 
> 标签：excel

我遇到了一个实际问题，可以简化如下：

我的 Excel 表只有一列，这是我喝啤酒罐的日期。它可以根据我一天的啤酒罐数重复。（例如，我在 2012 年 5 月 9 日喝了三杯啤酒）我需要生成每周啤酒消费的趋势。我怎样才能在excel中做到这一点？

```
**Date of beer**
5/9/2012
5/9/2012
5/9/2012
5/12/2012
...
7/3/2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T02:31:53.833

你可以做一个数据透视表。日期作为行字段，日期计数（即啤酒计数）作为数据字段。将行字段 Date 按 7 天分组以获得每周总计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:11:40.340

使用两列电子表格可能会更好。A 列 = 日期；B 列 = 罐数。然后，您可以轻松地从中制作折线图。

如果您的格式中已经有大量数据，您可以使用 excel 的小计功能为您创建两列格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:56:48.810

首先，我会输入一个公式来获取每个日期的周数，然后对一年中的每一周使用计数。此公式将为一年中的每一天分配其所在年份的周数。将其放在日期旁边的每个单元格中。

```
 =IFERROR(1+INT((AF12-DATE(YEAR(AF12+4-WEEKDAY(AF12+6)),1,5)+WEEKDAY(DATE(YEAR(AF12+4-WEEKDAY(AF12+6)),1,3)))/7),0) 
```

完成后，创建一列数字 1-52（闰年为 53）并执行

```
 =countif(rangeofcalcdweeknumbers,week1to52) 
```

并将其复制到所有 52 或 53 周

然后根据最后两列做一个图

# php - 使用 JSON 响应从 PHP 文件发出 http 请求

> ID：12728481
> 
> 赞同：-1
> 
> 时间：2012-10-04T13:35:48.383
> 
> 标签：php, json, http

我正在尝试通过 http 调用 php 脚本并从我计划进一步处理的地方接收一个 json 对象。

基本上，代码如下：

```
<?php
    if ($_SERVER['REQUEST_METHOD'] === 'GET') {
        $version=$_GET["v"];
        $product=$_GET["p"];
        $stream=$_GET["s"];
        $cmd=$_GET["c"];

        $string = file_get_contents("http://localhost:82/releasenote/src/getTSBDetails.php?p=$product&v=$version&s=$stream&c=$cmd");
        print_r($string);
        exit();
    } else {
        print("2");
        $string = file_get_contents('tsbDetails.json');
    } 
```

在浏览器中直接调用get_file_contents http请求时，输出的是一个json，但是尝试使用上面的时候没有响应。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:43:59.987

![在此处输入图像描述](../Images/1b04078331081040d3f103a2324edb28.png)

```
<?php
        // JSon request format is :
        // {"userName":"654321@zzzz.com","password":"12345","emailProvider":"zzzz"}

        // read JSon input
        $data_back = json_decode(file_get_contents('php://input'));

        // set json string to php variables
        $userName = $data_back->{"userName"};
        $password = $data_back->{"password"};
        $emailProvider = $data_back->{"emailProvider"};

        // create json response
        $responses = array();
        for ($i = 0; $i < 10; $i++) {
            $responses[] = array("name" => $i, "email" => $userName . " " . $password . " " . $emailProvider);
        }

        // JSon response format is :
        // [{"name":"eeee","email":"eee@zzzzz.com"},
        // {"name":"aaaa","email":"aaaaa@zzzzz.com"},{"name":"cccc","email":"bbb@zzzzz.com"}]

        // set header as json![enter image description here][2]
        header("Content-type: application/json");

        // send response
        echo json_encode($responses);
        ?>

  [1]: http://i.stack.imgur.com/I7imt.jpg
  [2]: http://i.stack.imgur.com/XgvOT.jpg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:01:18.893

首先，您应该确保您的变量可以在 url 中使用：

```
 $version=urlencode($_GET["v"]);
    $product=urlencode($_GET["p"]);
    $stream=urlencode($_GET["s"]);
    $cmd=urlencode($_GET["c"]); 
```

然后你应该检查你读入的值是否`$string`是有效的 json。你可以使用[这个答案](https://stackoverflow.com/a/2348181/42139)。

然后，如果你的字符串包含有效的 json，你应该只是`echo`它。

最后，如果您总是希望脚本中包含 json，您还应该对错误处理进行 json_encode：

```
} else {
    echo json_encode("2");
    // $string = file_get_contents('tsbDetails.json');  /* commented out as you don't seem to use it */
} 
```

# wolfram-mathematica - 在 Mathematica 中找到具有相同幂的数的质因数集的最小值和最大值

> ID：12728482
> 
> 赞同：0
> 
> 时间：2012-10-04T13:35:54.640
> 
> 标签：wolfram-mathematica, integer-division, prime-factoring

让

> n=2^10 3^7 5^4...31^2...59^2 61...97

是一个整数的因式分解，使得素数的幂是不增加的。

我想在 Mathematica 中编写一个代码来找到 n 的素数因子的最小值和最大值，以使它们具有相同的功率。例如，我想要一个函数，它通常采用 r（幂）并给出（最多两个）素数。上述示例的具体答案是

> minwithpower[7]=3
> 
> 最大功率[7]=3

* * *

> minwithpower[2]=31
> 
> 最大功率[2]=59

请有任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:01:15.417

`n = 91065388654697452410240000`那么让

```
FactorInteger[n] 
```

返回

```
{{2, 10}, {3, 7}, {5, 4}, {7, 4}, {31, 2}, {37, 2}, {59, 2}, {61, 1}, {97, 1}} 
```

和表达式

```
Cases[FactorInteger[n], {_, 2}] 
```

仅返回系数为 的因子和系数列表中的那些元素`2`，*即*

```
{{31, 2}, {37, 2}, {59, 2}} 
```

接下来是表达式

```
Cases[FactorInteger[n], {_, 2}] /. {{min_, _}, ___, {max_, _}} -> {min, max} 
```

返回

```
{31, 59} 
```

请注意，如果您感兴趣的幂仅在 FactorInteger 的输出中出现一次，则此方法将失败，例如

```
Cases[FactorInteger[n], {_, 7}] /. {{min_, _}, ___, {max_, _}} -> {min, max} 
```

返回

```
{{3, 7}} 
```

但是你应该能够很容易地解决这个缺陷。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:01:11.937

一种解决方案是：

```
getSamePower[exp_, n_] :=  With[{powers = 
 Select[ReleaseHold[n /. {Times -> List, Power[a_, b_] -> {a, b}}], #[[2]] == 
   exp &]}, 
  If[Length[powers] == 1, {powers[[1, 1]], powers[[1, 1]]}, {Min[powers[[All, 1]]], Max[powers[[All, 1]]]}]] 
```

用作：

```
getSamePower[7,  2^10 3^7 5^4 \[Pi]^1 31^2 E^1 59^2 61^1 I^1 97^1 // HoldForm]
(* {3, 3} *)

getSamePower[2,  2^10 3^7 5^4 \[Pi]^1 31^2 E^1 59^2 61^1 I^1 97^1 // HoldForm]
(* {31, 59} *) 
```

# ios - Xcode 自定义序列动作

> ID：12728485
> 
> 赞同：0
> 
> 时间：2012-10-04T13:36:01.513
> 
> 标签：ios, xcode, button, action, segue

我想要一个按钮操作来调用自定义序列。我的自定义序列称为“ClockSeque”。我已经搜索了所提出的问题，但找不到这个问题的答案。任何帮助，将不胜感激。谢谢。

PS：我已经创建了名为“ClockSeque.h & ClockSeque.m”的 .h 和 .m 文件，它们属于 UIStoryboardSegue 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:06:06.077

在 IB 中，将 segue 从当前视图控制器连接到目标视图控制器。命名 segue，将 segue 的类型设置为 custom，并给你自定义 segue 类的名称。最后，在按钮动作调用`-performSegueWithIdentifier:sender:`中使用 segue 的名称。

希望有帮助。

# c# - 在 iis 7 上托管时，Web 应用程序中的线程会导致会话超时

> ID：12728487
> 
> 赞同：1
> 
> 时间：2012-10-04T13:36:10.957
> 
> 标签：c#, asp.net, iis

在我的 asp.net 应用程序中，我使用 windows forms.dll 通过创建线程来使用某些 windows 控件。这在我的系统中运行良好，但在 IIS 上托管时会出现会话超时。创建线程使我在 IIS 上的会话超时。如何创建可以在 IIS 上正常工作的线程？

下面是 iam 创建线程的代码。

```
public string[] DisplayFileDialog()
    {
        string[] result = null;

        try
        {
            Thread objThread = new Thread(state =>{
                result = FnOpenFileDialog();
                // TODO: do something with the returned result
            });

            objThread.IsBackground = false;
            objThread.SetApartmentState(ApartmentState.STA);
            objThread.Start();
            objThread.Join();
            return result;

        }
        catch (Exception ex)
        {

            return result;
        }

 protected string[] FnOpenFileDialog()
    {
        IntPtr hdlr = GetForegroundWindow();

        WindowWrapper Mockwindow = new WindowWrapper(hdlr);

        OpenFileDialog fDialog = new OpenFileDialog();

        fDialog.Title = "Select Files";

        fDialog.Multiselect = true;
        fDialog.CheckFileExists = true;
        fDialog.CheckPathExists = true;

        System.Windows.Forms.DialogResult dr = fDialog.ShowDialog(Mockwindow);
        string[] filenames = fDialog.FileNames;
        return filenames;
    } 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:00:49.097

您的代码在服务器端执行，这就是您因超时响应而停滞不前的原因。您的主线程等待（objThread.Join）在服务器上打开一个对话框的响应，因为您在客户端看不到它，您永远不会得到响应。

如果您想在客户端打开对话框文件，您可以采用与 ActiveX 对象类似的方式进行操作。

您可以在以下地址找到有关如何执行此操作的 msdn 教程，但它仅适用于 IE：

[http://msdn.microsoft.com/fr-fr/magazine/cc301932(en-us).aspx](http://msdn.microsoft.com/fr-fr/magazine/cc301932%28en-us%29.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:52:50.707

如果我正确理解你的问题，答案很简单：你不能那样做。

Windows 窗体控件在浏览器中不起作用。它可以在您的计算机上运行，​​因为浏览器窗口是本地的，因此线程可以附加到它并将其用作父级。

IIS 进程没有窗口，它只提供文本、图像和视频文件。您实际上是在要求一个 IIS 线程在其他地方的服务器机房中的某台机器上运行，以连接到其他人机器上的浏览器窗口，然后开始在其上显示 Windows 窗体控件。

如果它们在 Linux 机器或 Mac 上怎么办？

创建 ASP.NET 是为了解决为 IIS 创建交互式表单的问题。

希望这可以帮助。

# .htaccess - 使用 .htaccess 将流量重定向到同一个域

> ID：12728490
> 
> 赞同：0
> 
> 时间：2012-10-04T13:36:24.540
> 
> 标签：.htaccess, redirect, mobile

好吧，输入标题来描述我想做的事情有点困难。

基本上我有一个网站，我被要求为其开发一个移动网站。该网站有多个域（例如`.co.za`, `.com`, `.za.net`），但它们都从服务器上的同一个文件夹中运行（所以我只有一个 .htaccess 文件）。

我希望能够重定向去往的流量`www.example.co.za`和去往的`m.example.co.za`流量。`www.example.com``m.example.com`

我需要如何修改这个 .htaccess 文件来实现这一点。

```
RewriteEngine on
RewriteCond %{HTTP_USER_AGENT} "alcatel|amoi|android|avantgo|blackberry|benq|cell|cricket|docomo|elaine|htc|iemobile|iphone|ipad|ipaq|ipod|j2me|java|midp|mini|mmp|mobi|motorola|nec-|nokia|palm|panasonic|philips|phone|playbook|sagem|sharp|sie-|silk|smartphone|sony|symbian|t-mobile|telus|up\.browser|up\.link|vodafone|wap|webos|wireless|xda|xoom|zte" [NC]
RewriteRule ^$ http://m.example.com/ [L,R=302] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:29:06.453

怎么样：

```
RewriteEngine On
RewriteCond %{HTTP_USER_AGENT} "alcatel|amoi|android|avantgo|blackberry|benq|cell|cricket|docomo|elaine|htc|iemobile|iphone|ipad|ipaq|ipod|j2me|java|midp|mini|mmp|mobi|motorola|nec-|nokia|palm|panasonic|philips|phone|playbook|sagem|sharp|sie-|silk|smartphone|sony|symbian|t-mobile|telus|up\.browser|up\.link|vodafone|wap|webos|wireless|xda|xoom|zte" [NC]
RewriteCond %{HTTP_HOST} ^(www\.)?(.*)$ [NC]
RewriteRule ^(.*)$ http://m.%2/ [L,R=302] 
```

# asp.net-mvc - 围绕基于 ORM 的 MVC 项目开发单元测试

> ID：12728491
> 
> 赞同：0
> 
> 时间：2012-10-04T13:36:26.433
> 
> 标签：asp.net-mvc, unit-testing, orm

对于单元测试如何与我当前的项目设计联系起来，我有点迷茫。我目前的测试都是集成测试，最终几乎只是测试第三方 ORM。我在想我需要使用存储库模式，但我不清楚如何将它作为一个层添加到我的应用程序中。这是我正在使用的一个基本对象作为示例：

```
public class Venue : ModelBase<Venue>
{
    public Venue ()
        : base()
    {
    }

    public virtual string VenueName { get; set; }
} 
```

及其行动：

```
 [HttpGet]
    public ActionResult Create ()
    {
        return View();
    }

    public ActionResult Create ([ModelBinder(typeof(VenueBinder))]Venue Venue)
    {
        Venue.Save();
        return RedirectToAction("List", "Venue");
    }

    [HttpGet]
    public ActionResult Edit (long id) 
    {
        return View(Venue.Load(id));    
    }

    [HttpPost]
    public ActionResult Edit ([ModelBinder(typeof(VenueBinder))]Venue v, long id)
    {
        VenueBinder.EditModel(v, id);
        return RedirectToAction("List", "Venue");
    }

    public ActionResult Delete (long id)
    {
        Venue temp = Venue.Load(id);
        var eventController = new EventController();
        foreach (var e in Event.All().ToList().FindAll(x => x.Venue.ID == id))
        {
            eventController.Delete(e.ID);
        }
        temp.Delete();
        return RedirectToAction("List", "Venue");

    } 
```

和模型粘合剂：

```
public class VenueBinder : IModelBinder
{
    /// <summary>
    /// bind form data to Venue model
    /// </summary>
    public object BindModel (ControllerContext controllerContext, ModelBindingContext bindingContext)
    {
        return new Venue
        {
            VenueName = bindingContext.ValueProvider.GetValue("name").AttemptedValue
        };
    }

    /// <summary>
    /// edits an existing Venue object
    /// </summary>
    public static void EditModel (Venue v, long id)
    {
        Venue temp = Venue.Load(id);
        temp.VenueName = v.VenueName;
        temp.Save();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:40:03.513

如果您想单独对控制器操作进行单元测试，则必须将可以在模型上执行的 CRUD 操作抽象在控制器将作为构造函数依赖项的接口后面。在单元测试中，您可以向控制器提供此接口的模拟实例，并能够对其定义期望。

话虽这么说，太多的抽象并不总是一件好事，你不应该仅仅为了单元测试而这样做。如果它们没有为您的站点带来其他价值，例如在其他应用程序中具有可重用的存储库层，您可能不应该这样做。集成测试也很好。您只需要确保您对每次测试都处于可预测状态的数据执行此操作，理想情况下在每次测试之前填充并在测试之后拆除。希望您的 ORM 支持这一点。Jimmy Bogard 写了一篇关于限制抽象的[不错的博客文章。](http://lostechies.com/jimmybogard/2012/09/20/limiting-your-abstractions/)

# iphone - 如何在后台运行课程？

> ID：12728492
> 
> 赞同：0
> 
> 时间：2012-10-04T13:36:26.803
> 
> 标签：iphone, objective-c, uilocalnotification

我创建了一个从网站（不是我的）检索数据并保存到核心数据的应用程序。我想在新记录插入到我的核心数据时创建通知。我认为检索数据方法和添加对象方法应该在后台运行，但我该怎么做呢？任何示例代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:09:53.040

这并不容易做到。在后台线程中使用 Core Data 需要您为该线程提供单独的上下文。我建议从阅读[Core Data Concurrency Guide](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/Articles/cdConcurrency.html)开始。另请阅读 Caleb 链接到的指南。

一旦你弄清楚如何让你的后台上下文运行，你很可能想要订阅[NSManagedObjectContextDidSaveNotification](http://developer.apple.com/library/mac/documentation/cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html#//apple_ref/c/data/NSManagedObjectContextDidSaveNotification)来更新主线程上的 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:47:44.657

在开始讨论之前，您确实应该对多线程编程有一个基本的了解，这是一个更大的主题，我们无法合理地在答案中涵盖。首先阅读 Apple 关于该主题的文档：

*   [线程编程指南](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/Multithreading/Introduction/Introduction.html#//apple_ref/doc/uid/10000057i-CH1-SW1)
*   [并发编程指南](http://developer.apple.com/library/ios/documentation/General/Conceptual/ConcurrencyProgrammingGuide/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008091-CH1-SW1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:47:01.257

您必须执行异步请求[不会在主线程上执行]，并且您将在**委托**方法中收到有关请求完成/错误/超时的通知，具体取决于您使用的库。

我有使用[RestKit的经验，您会在](http://restkit.org/)[存储库](https://github.com/RestKit/RestKit/tree/master/Examples)中找到大量示例。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T17:00:48.963

您提到在将数据插入 CoreData 时创建通知。你不能只看CoreData发送的通知，比如NSManagedObjectContextDidSaveNotification吗？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T13:42:41.547

```
[self performSelectorInBackground:@selector(yourMethod:) withObject:]; 
```

# javascript - Javascript对象，在C中制作类似

> ID：12728496
> 
> 赞同：-4
> 
> 时间：2012-10-04T13:36:55.400
> 
> 标签：javascript, c, object, char, int

在 JavaScript 中，我通常会这样做..

```
var myObject = { "Name" : "Liam", "Address" : "UK"}; 
```

我如何在 C 中制作类似的东西？

最好有一些结构

```
myObject { CHAR : INT} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:39:12.250

```
struct myObj
{
 char* string;
 int num;
}; 
```

这是最基本的。如果你想使用它，你应该学习 c。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:47:38.833

你需要的是一个关联数组。例如，您可以使用 lighttpd 项目 [array.c array.h中的](http://redmine.lighttpd.net/projects/lighttpd/repository/entry/trunk/src/array.c) [一个](http://redmine.lighttpd.net/projects/lighttpd/repository/entry/trunk/src/array.h)

您需要的是 data_integer 结构。这样的辅助数组有点像 javascript 对象，“键”是字段名称，值是字段的数据。

由于 JS 对象基本上是字段名称与其值之间的美化字典（映射），带有一些语法糖 - 这就是您所需要的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T14:00:08.723

C与 JavaScript*非常*不同，尤其是在字符串和内存管理方面。根据您想要做什么，C 等效项可能会变得非常麻烦。

如果你知道你的字符串成员的最大长度，你可以这样做

```
struct obj {
  char name[LENGTH];
  int num;
};

struct obj myObj;
...
strcpy(obj.name, "Some Name");
obj.num = 1; 
```

C 本身没有字符串数据类型；字符串表示为`char`以 0 结尾的值序列，并存储为`char`. 没有为数组类型定义赋值运算符`=`，因此您必须使用库函数，例如`strcpy`如上所述分配字符串值。

如果你*不*知道你的字符串成员的最大长度，你会做类似的事情

```
struct obj {
  char *name;
  int num;
};

struct obj myObj;

myObj.name = malloc(length_of_string);
if (myObj.name)
{
  strcpy(myObj.name, "Some Name");
}
myObj.num = 1;
...
free(myObj.name); 
```

`myObj.name`在这种情况下，您必须手动使用库调用分配内存`malloc`，并且必须使用`free`库调用释放它。

如果要存储该类型的序列，则可以执行类似的操作

```
struct obj myObjArray[NUMBER_OF_OBJECTS]; 
```

做你的作业

```
myObjArray[i].num = 1;
strcpy(myObjArray[i].name, "Some Name"); 
```

# android - 初始化一个类或活动中不同活动中使用的常见 UI 元素

> ID：12728499
> 
> 赞同：0
> 
> 时间：2012-10-04T13:37:00.190
> 
> 标签：android, android-layout

我有几个 EditText 和 TextView 在我的应用程序中用于不同的布局和活动，并且必须在每个相应的类中初始化它们。我已经`<include>`为布局使用了标签。我正在寻找的是我是否可以拥有一个类，我可以在其中初始化所有这些常见视图并设置一些所需的属性并在所有其他类中使用此方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:54:48.303

创建新类 CustomTextView.java

```
public class CustomTextView extends TextView {

    Context mContext;

    public CustomTextView(Context context,AttributeSet attrs){
        super(context,attrs);
        init(context);
    }
    public CustomTextView(Context context) {
        super(context);
        init(context);  
    }

    private void init(Context context){
        LayoutInflater inflater = (LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        if(inflater != null){       
            LinearLayout layout = (LinearLayout) inflater.inflate(R.layout.custom_text_view, new LinearLayout(context));

            mContext = context;

            // set any TextView attribute here...
            this.setText("hello!!!");
        }
    }
} 
```

然后调用 new CustomTextView(this)，或将其包含在您的 xml 中。

custom_text_view.xml：

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >    
</TextView> 
```

# android - 'Universal Image Loader' 丢失了我的 ImageView 的参数（大小和位置）

> ID：12728500
> 
> 赞同：2
> 
> 时间：2012-10-04T13:37:02.983
> 
> 标签：android, image, android-layout, listview, universal-image-loader

我正在尝试使用“通用图像加载器”在我的 ListView 中加载图像。我的代码如下所示：

```
public View getView(int position, View convertView, ViewGroup parent) 
if (convertView == null) {
        convertView = mInflater.inflate(R.layout.offers_list_adapter, null);

        holder = new ViewHolder();
        holder.mIvImage = (ImageView) convertView
                .findViewById(R.id.ivImage);
        holder.mTxtName = (TextView) convertView.findViewById(R.id.txtName);
        holder.mTxtCategoryName = (TextView) convertView
                .findViewById(R.id.txtCategoryName);
        convertView.setTag(holder);
    } else {
        holder = (ViewHolder) convertView.getTag();
    } 
```

我有一个规则：

如果我列表中的这个项目是特殊的，**我必须更改我的 ImageView 的参数**（例如特殊项目的 imageView 比正常大）。

所以在我的代码中我这样做：

```
if (holder.isSpecial) {
LinearLayout.LayoutParams layoutParams = new LinearLayout.LayoutParams(
                    LayoutParams.WRAP_CONTENT, 50);
            layoutParams.gravity = Gravity.CENTER_HORIZONTAL;
            holder.mIvImage.setLayoutParams(layoutParams);
} 
```

更改参数后，我照常调用“通用图像加载器”库：

```
imageLoader.displayImage(holder.url, holder.mIvImage); 
```

但是当库在我的 UI 线程中执行以将图像放入我的 ImageView 时，我的 ImageView 不在中心并且大小错误。**我因为这个项目是特殊的而做出的更改没有应用。**

**我有自己的 ImageDownloader，当我使用它时，ImageView 会正确加载新参数**（中心和新大小），但在许多其他方面，我自己的类不如这个库好。

有人知道会发生什么吗？

提前致谢，

干杯!

* * *

我的“通用图像加载器”配置：

```
DisplayImageOptions options = new DisplayImageOptions.Builder()
                .cacheInMemory().cacheOnDisc()
                .imageScaleType(ImageScaleType.IN_SAMPLE_POWER_OF_2)
                .displayer(new RoundedBitmapDisplayer(0)).build();

        ImageLoaderConfiguration config = new ImageLoaderConfiguration.Builder(
                mContext)
                .memoryCacheExtraOptions(480, 800)
                .discCacheExtraOptions(480, 800, CompressFormat.JPEG, 75)
                .threadPoolSize(3)
                .threadPriority(Thread.NORM_PRIORITY - 1)
                .denyCacheImageMultipleSizesInMemory()
                .offOutOfMemoryHandling()
                .memoryCache(new UsingFreqLimitedMemoryCache(2 * 1024 * 1024))
                .discCache(new UnlimitedDiscCache(file))
                .discCacheFileNameGenerator(new HashCodeFileNameGenerator())
                .imageDownloader(
                        new URLConnectionImageDownloader(5 * 1000, 20 * 1000))
                .defaultDisplayImageOptions(DisplayImageOptions.createSimple())
                .enableLogging().defaultDisplayImageOptions(options).build();

        imageLoader.init(config); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T12:16:34.107

您已从 GitHub 自述文件中复制粘贴配置。此配置（在 GitHub 上）仅显示所有可能的选项，但您不应调用所有选项。

您应该查看示例项目 ( [UniversalImageLoaderExample](https://github.com/nostra13/Android-Universal-Image-Loader/tree/master/UniversalImageLoaderExample) ) 以了解调整和使用 UIL 的正确方法。

# scopes - 范围如何工作？

> ID：12728505
> 
> 赞同：-1
> 
> 时间：2012-10-04T13:37:17.663
> 
> 标签：scopes

作用域是指函数作用域、类作用域、库、DLL 等等。

如果最后所有代码都被翻译成一系列指令（由编译器），高级语言中的高级范围如何对最低级别的代码产生任何影响？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:44:28.767

每个变量名或函数名等都对应于内存中存储相应信息或代码的位置。（这是一个轻微的简化，但你明白了）。范围表示从名称到位置的映射。把它想象成你最喜欢的语言的字典或类似的数据结构。

嵌套范围作为一种堆栈工作。当语言语法引入一个新的范围时，一个新的映射被推送到堆栈中。当您使用变量名时，例如`i`，编译器或解释器会在顶级映射中查找它，然后（如果在那里找不到）根据语言规则向上查找。当作用域结束时，相关的映射会从堆栈中弹出，之前的映射会重新生效。

其工作原理的丑陋细节可能会有所不同：在最简单的情况下，编译器可以生成直接引用内存位置的代码。更实际的是：C 编译器生成可执行对象，其中包括一个“符号表”，该表将变量和函数名称映射到内存中的位置。链接器通过在另一个模块的符号表中查找来自一个模块的引用来解析模块之间的引用。并且名称不会映射到绝对位置，而是映射到某个参考点的偏移量。这允许库成为“可重定位代码”，这意味着它们可以在执行期间加载到内存中的任何位置并且仍然可以正常工作。编译到虚拟机的语言可能会走捷径，但原理是一样的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:42:38.327

这就是重点——一个是高级，另一个是低级。CPU 指令对范围一无所知。这是内存管理的问题。

“范围”是高级编程环境的一部分——编译器会检查你（根据编程语言的规则）你可以访问你试图访问的东西（例如，你不能访问变量 x这是另一个功能的本地）。有人可能会说这是一种减少错误的方法。

正在执行的“真实”代码不知道范围。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:40:20.813

范围是一种高级语言结构和机制。低级 CPU 指令与范围无关。

# wcf - Wcf 通过 basicHttp 自托管和浏览

> ID：12728507
> 
> 赞同：0
> 
> 时间：2012-10-04T13:37:22.000
> 
> 标签：wcf, self-hosting

嘿嘿，

我觉得自己像个彻头彻尾的白痴，但我似乎找不到答案。

我在控制台应用程序中自托管 WCF 服务。这就像一个魅力，我已经做了一百万次了:)

从另一个控制台应用程序或使用 wcftestclient 使用此服务完全没有问题。

但是当尝试浏览服务时，我得到了“奇怪”的行为。

该服务托管在`http://localhost:50666/MyService.Foo/BarServiceHttp`（使用 base-address `http://localhost:50666/MyService.Foo`）。

因此，当浏览到浏览器时`http://localhost:50666/MyService.Foo/BarServiceHttp`确实会在浏览器中返回 HTTP 400 错误。

浏览到基地址会给出我期望的完整地址的输出。

这是怎么回事？（插入 http 后的空格以绕过有关 localhost 的警告...）

这是服务器配置：

```
<service name="FooService" behaviorConfiguration="FooBarServiceBehavior">
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:50666/MyService.Foo" />
      </baseAddresses>
    </host>

    <endpoint address="BarServiceHttp"
              binding="basicHttpBinding"
              bindingConfiguration="basicHttpBindingConfiguration"
              contract="IBarService" />
    <endpoint address="BarServiceHttp/mex"
              binding="mexHttpBinding"
              contract="IMetadataExchange" />
</service>

<behavior name="FooBarServiceBehavior">
  <!-- Enable MEX http get for this service. -->
  <serviceMetadata httpGetEnabled="true"/>
  <serviceDebug includeExceptionDetailInFaults="true"/>
</behavior> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T00:27:10.753

您收到 HTTP 400 错误，因为您尝试直接访问端点。端点需要 SOAP 请求，但浏览器会发送 HTTP GET 请求，该请求无法由端点处理。浏览服务时应使用基地址，因为您在浏览器中看到的元数据和帮助页面位于此处：

```
http://localhost:50666/MyService.Foo 
```

# css - 如何“区分”来自两个不同页面的 HTML 元素的有效/计算 css 规则？

> ID：12728509
> 
> 赞同：2
> 
> 时间：2012-10-04T13:37:24.603
> 
> 标签：css, diff

我已经多次遇到这个问题，我想找到一个更聪明的方法。场景是我对 Web 应用程序进行了更改，页面上的元素最终看起来与以前不同，我不知道为什么。有时是因为我重构了标记和 css，有时是因为我在页面上添加了新的 css 包含，或其他原因。

有时 css 看起来几乎相同，因此我必须在浏览器开发工具中仔细寻找已应用的 css 规则。如果我无法在 Chrome 开发工具的“属性”部分找到原因，我会查看“计算样式”部分。有时我仍然无法发现差异，因此我将损坏版本和工作版本的“计算样式”部分粘贴到文本文件中，保存到磁盘，然后对两者进行比较。它最终变得令人沮丧，例如损坏版本中的元素从祖先元素继承了不同的行高。

有没有更简单的方法来做到这一点？

# c# - 将图像转换为浮点数组并返回 .NET

> ID：12728513
> 
> 赞同：0
> 
> 时间：2012-10-04T13:37:38.687
> 
> 标签：c#, .net, image-processing

我在 Python 中有代码，可以将图像打开为灰度，将其转换为 numpy 浮点数组，对其执行大量数学运算，然后对其进行规范化并将其转换为二进制图像（每像素 1 位），再次将其保存到磁盘（ PNG 文件）。

我应该使用哪些 .NET 类（最好）来执行类似的操作？

下面是我的 Python 代码的一个子集：

```
im = Image.open(in_name)
a  = numpy.asarray(im.convert('L'), dtype=float)  ## implicit conversion to grayscale

## lots of element-wise arithmetical operations with 'a'
## and other similar-shaped arrays from other images

out_im = Image.fromarray(a.astype('uint8')).convert('1')
out_im.save(out_name) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:52:01.113

有两种方法可以做到这一点。您需要 XNA 或 DirectX 才能做到这一点。

在 XNA [Texture2D](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.texture2d.aspx)对象中包含 GetData 和 SetData 方法，它们可以满足您的需求。

您还可以在 Texture2D 上使用 HLSL 像素着色器来操作它。您可以更改渲染目标以渲染到您保存为图像文件的另一个 Texture2D。

第二个将是最快和最有效的，第一个将是最简单的。

# ios - 在 Xcode 中更改基础 SDK

> ID：12728517
> 
> 赞同：10
> 
> 时间：2012-10-04T13:37:50.923
> 
> 标签：ios, xcode

我正在使用 Xcode 4.5。我正在开发一个 iOS 应用程序，我的目标是 iOS 5.1。

我想将 Base SDK 更改为 iOS 5.1，但它只显示 iOS 6。

其他人都去哪儿了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T13:40:14.980

您应该始终使用最新的 SDK。如果您想以较旧的 iOS 版本为目标，请将**部署目标**设置更改为您想要支持的最低 iOS 版本。

# javascript - 如何在特定行顶部的html表中添加行？

> ID：12728520
> 
> 赞同：0
> 
> 时间：2012-10-04T13:37:55.333
> 
> 标签：javascript, html, html-table, tablerow

我有一张桌子，每一行都有一个按钮，可以在上面添加一个新行。每行都有新的输入。

我知道如何在表格顶部添加一行，但不是在我单击按钮的每一行顶部。有人可以提供有关如何解决它的提示吗？我也许能做到，但是我看到的解决方案非常复杂，我相信一定有更聪明的解决方案。

哦，我也不知道如何更新函数中发送的参数`insertNewRow(id)`。到目前为止，这就是我所拥有的：

```
<script type="text/javascript">
  function insertNewRow(id){
    var row = document.getElementById("bottomRow");
    var newrow = row.cloneNode(true);
    console.log(newrow);
    var newInputs = newrow.getElementsByTagName('input');

    var allRows = row.parentNode.getElementsByTagName('tr');

    row.parentNode.insertBefore(newrow, row);

    var i=row.rowIndex;
    console.log(i);

}
</script>

<table id="myTable">
    <tr>
        <td>Title1:</td>
        <td></td>
        <td>Title2:</td>
        <td></td>
        <td>Title3:</td>    
        <td></td>
        <td></td>
    </tr>

    <tr>

        <td><input class="c1" readonly maxlength="9" size="7" id="gTop" type="text" value ="11"></td>
        <td> <-></td>
        <td id="l1"><input class="c2"  style="width:35px;" maxlength="9" size="7" type="text" id="lTop" value="33"></td>
        <td>=</td>
        <td id="rv1"><input id="rvTop" input class="c2"  style="width:105px;" maxlength="100" size="37" type="text" value="blahblahblah"></td>
        <td></td>
        <td>x</td>  
    </tr>
    <tr id="bottomRow">                 
        <td><input class="c1" readonly maxlength="9" size="7" id="gBottom" type="text" value =""></td>
        <td> </td>
        <td id="l1"><input class="c2"  style="width:35px;" maxlength="9" size="7" type="text" id="lBottom" value="11"></td>
        <td>=</td>
        <td id="rv1"><input id="rvBottom" input class="c2"  style="width:105px;" maxlength="100" size="37" type="text" value="blahblahblah"></td>
        <td><button type="button" onclick="insertNewRow(1)">+</button></td>
        <td>x</td>                      
    </tr>

</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:06:10.103

在`onclick`属性中，不仅仅是调用`insertNewRow()`，而是执行类似的操作

```
insertNewRow.apply(this); 
```

属性内的`this`关键字`onclick`是点击元素的引用。使用`insertNewRow.apply(this)`，我们将调用`insertNewRow()`并同时将该`this`函数调用中的关键字分配给单击的元素，或者在本例中为按钮（如果我们不这样做，`this`内部`insertNewRow()`将是对该`Window`对象的引用） . 然后在你的`insertNewRow()`函数中，检查当前被点击的元素是否是一个`tr`元素。如果不是，就上一层，看看那个元素是不是`tr`元素。继续这样做，直到你到达第一个`tr`元素。所以，基本上你会寻找最接近的`tr`元素。

```
<button type="button" onclick="insertNewRow.apply(this);">+</button> 
```

```
function insertNewRow(){
    var row = null,
        el = this;
    // Get the closest tr element
    while (row === null)
    {
        if (el.tagName.toLowerCase() === 'tr')
        {
            row = el; // row is now the closest tr element
            break;
        }
        el = el.parentNode;                 
    }

    // Rest of the code here

}​ 
```

[提琴手](http://jsfiddle.net/HfnZa/1/)

如果您仍然不确定是什么，请查看[此处](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)`Function.apply()`的文档。

# apache - cxf 故障转移恢复

> ID：12728523
> 
> 赞同：3
> 
> 时间：2012-10-04T13:37:58.770
> 
> 标签：apache, jax-ws, cxf, failover

我有一个 cxf JAX-WS 客户端。我添加了故障转移策略。问题是客户端如何从备份解决方案中恢复并再次使用主 URL？因为现在客户端切换到辅助 URL 后仍然存在，即使主 URL 再次可用，也不会使用主 URL。

客户端部分的代码是：

```
JaxWsProxyFactoryBean factory = new JaxWsProxyFactoryBean();
factory.setServiceClass(GatewayPort.class);
factory.setAddress(this.configFile.getPrimaryURL());

FailoverFeature feature = new FailoverFeature();
SequentialStrategy strategy = new SequentialStrategy();
List<String> addList = new ArrayList<String>();
addList.add(this.configFile.getSecondaryURL());
strategy.setAlternateAddresses(addList);
feature.setStrategy(strategy);

List<AbstractFeature> features = new ArrayList<AbstractFeature>();
features.add(feature);
factory.setFeatures(features);

this.serviceSoap = (GatewayPort)factory.create();

Client client = ClientProxy.getClient(this.serviceSoap);
if (client != null)
{
    HTTPConduit conduit = (HTTPConduit)client.getConduit();
    HTTPClientPolicy policy = new HTTPClientPolicy();
    policy.setConnectionTimeout(this.configFile.getTimeout());
    policy.setReceiveTimeout(this.configFile.getTimeout());
    conduit.setClient(policy);
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T04:07:58.093

您可以将主 URL 添加到备用地址列表，而不是将其设置为 JaxWsProxyFactoryBean。这样，由于您使用的是 SequentialStrategy，因此将首先检查每个服务调用的主 URL，如果失败，则将尝试辅助 URL。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T11:41:19.243

您不妨尝试使用故障回复的替代 CXF 故障转移功能。

[https://github.com/jaceko/cxf-circuit-switcher](https://github.com/jaceko/cxf-circuit-switcher)

# c++ - 使用 libCurl 和 GdkPixBuff 将图像从 JPEG 保存到 PNG

> ID：12728524
> 
> 赞同：0
> 
> 时间：2012-10-04T13:38:01.317
> 
> 标签：c++, gtk, libcurl, gdk, gdkpixbuf

我正在尝试构建一种算法，该算法从 URL 下载 JPEG 图像并将其作为 PNG 保存到磁盘中。为了实现这一点，我使用了 libCurl，用于下载，以及 GdkPixbuff 库用于其他东西（对于项目限制，我坚持使用 Gdk 库）

这里实现数据的代码：

```
CURL     *curl;
GError   *error = NULL;

struct context ctx;
memset(&ctx, 0, sizeof(struct context));

curl = curl_easy_init();

if(curl) {
    curl_easy_setopt(curl, CURLOPT_URL, *file_to_download*);

    curl_easy_setopt(curl, CURLOPT_WRITEFUNCTION, writeDownloadedPic);
    curl_easy_setopt(curl, CURLOPT_WRITEDATA, &ctx);

    curl_easy_perform(curl);
    curl_easy_cleanup(curl);
} 
```

其中*上下文*定义如下：

```
struct context
{
    unsigned char *data;
    int allocation_size;
    int length;
}; 
```

并以这种方式*writeDownloadedPic ：*

```
size_t writeDownloadedPic (void *buffer, size_t size, size_t nmemb, void *userp)
{
   struct context *ctx = (struct context *) userp;

   if(ctx->data ==  NULL)
   {
    ctx->allocation_size = 31014;
    if((ctx->data = (unsigned char *) malloc(ctx->allocation_size)) == NULL)
    {
        fprintf(stderr, "malloc(%d) failed\n", ctx->allocation_size);
        return -1;
    }
   }

   if(ctx->length + nmemb > ctx->allocation_size)
   {
    fprintf(stderr, "full\n");
    return -1;
   }

   memcpy(ctx->data + ctx->length, buffer, nmemb);
   ctx->length += nmemb;

   return nmemb;

} 
```

最后我尝试以这种方式保存图像：

```
GdkPixbuf   *pixbuf;
pixbuf = gdk_pixbuf_new_from_data(ctx.data,
                         GDK_COLORSPACE_RGB,
                         FALSE, 8,
                         222, 310,
                         222 * 3,
                         NULL, NULL);

gdk_pixbuf_save(pixbuf, "src/pics/image.png", "png", &error, NULL); 
```

但是，我得到的是一张带有一堆随机像素的missy png图像，根本没有形成。现在，我确定了图像、宽度和高度的尺寸，但我认为我对计算为*宽度** 3的*RowStride做了一些混乱。*

 *我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:54:02.627

`gdk_pixbuf_new_from_data`不支持JPEG格式。您必须先将 JPEG 保存到文件中，然后使用`gdk_pixbuf_new_from_file`. 或者创建一个`GInputStream`周围`ctx.data`并使用`gdk_pixbuf_new_from_stream`.*

# java - joda time - 将工作日添加到日期

> ID：12728527
> 
> 赞同：9
> 
> 时间：2012-10-04T13:38:13.310
> 
> 标签：java, jodatime

是否可以将工作日添加到 joda 时间？

例如，如果当前日期是 01/03 星期五，则 date + 1 应该返回星期一 04/03，而不是 02/03。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T13:42:46.320

据我所知，在 Joda Time 中没有内置方法可以自动为您执行此操作。但是，您可以编写自己的方法，在循环中递增日期，直到到达工作日。

请注意，根据您的确切需要，这可能比您想象的要复杂得多。例如，它也应该跳过假期吗？哪天是假期取决于您所在的国家/地区。此外，在某些国家/地区（例如阿拉伯国家），周末是周四和周五，而不是周六和周日。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-11T13:28:55.057

```
LocalDate newDate = new LocalDate();
int i=0;
while(i<days)//days == as many days as u want too
{
    newDate = newDate.plusDays(1);//here even sat and sun are added
    //but at the end it goes to the correct week day.
    //because i is only increased if it is week day
    if(newDate.getDayOfWeek()<=5)
    {
        i++;
    }

}
System.out.println("new date"+newDate); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-08-29T11:04:22.767

请注意，一次添加 N 天迭代可能相对昂贵。对于较小的 N 值和/或对性能不敏感的代码，这可能不是问题。在哪里，我建议通过计算您需要调整多少周和几天来最小化添加操作：

```
/**
 * Returns the date that is {@code n} weekdays after the specified date.
 * <p>
 * Weekdays are Monday through Friday.
 * <p>
 * If {@code date} is a weekend, 1 weekday after is Monday.
 */
public static LocalDate weekdaysAfter(int n, LocalDate date) {
    if (n == 0)
        return date;
    if (n < 0)
        return weekdaysBefore(-n, date);
    LocalDate newDate = date;
    int dow = date.getDayOfWeek();
    if (dow >= DateTimeConstants.SATURDAY) {
        newDate = date.plusDays(8 - dow);
        n--;
    }
    int nWeeks = n / 5;
    int nDays = n % 5;
    newDate = newDate.plusWeeks(nWeeks);
    return ( (newDate.getDayOfWeek() + nDays) > DateTimeConstants.FRIDAY)
            ? newDate.plusDays(nDays + 2)
            : newDate.plusDays(nDays); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-27T21:18:33.903

```
 public LocalDate getBusinessDaysAddedDate(LocalDate localDate, int businessDays){

        LocalDate result;
        if(localDate.getDayOfWeek().getValue() + businessDays > 5) {
            result = localDate.plusDays(2);
        }
        result = localDate.plusDays(businessDays);

        return result;
    } 
```

为了使用 Date 而不是 LocalDate，请参阅[https://stackoverflow.com/a/47719540/12794444](https://stackoverflow.com/a/47719540/12794444)进行转换。

* * *

## 回答 #5

> 赞同：-4
> 
> 时间：2012-10-04T13:54:33.147

类[YearMonthDay](http://joda-time.sourceforge.net/apidocs/org/joda/time/YearMonthDay.html)已弃用，您不应使用它。如果您更改为简单的 DateTime，您可以通过调用以下方式获取工作日：

```
dateTime.getDayOfWeek(); 
```

星期五将是 5。

其中一种方法可以是制作一个看起来像这样的自定义 addDays 方法：

```
addDays(DateTime dateTime, int days) {
    for(int i=0;i<days;i++){
        dateTime.plusDays(1);
        if(dateTime.getDayOfWeek()==6) dateTime.plusDays(2); // if Saturday add 2 more days    }
} 
```

# html - HTML：如何在 amazon dot com 上设置 favicon

> ID：12728528
> 
> 赞同：6
> 
> 时间：2012-10-04T13:38:31.063
> 
> 标签：html, favicon

网站图标（favicons）通常设置为

```
<link rel="shortcut icon" href="favicon.png" /> 
```

但不是在 amazon.com，悬停网络浏览器会显示其 [amazon] 图标，它是如何制作的？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-04T13:43:00.097

大多数浏览器`favicon.ico`在域的根目录中查找。

如果您查看[http://www.amazon.com/favicon.ico](http://www.amazon.com/favicon.ico)，您会发现这里就是这种情况

# c# - Windows phone 绑定来自两个不同类的数据

> ID：12728530
> 
> 赞同：1
> 
> 时间：2012-10-04T13:38:36.167
> 
> 标签：c#, windows-phone-7, xaml

我的目标是在带有 Datatemplate 和两个 TextBlocks 的 ListBox 中显示：用户消息文本和用户名。

```
<ListBox.ItemTemplate>
  <DataTemplate>
    <StackPanel Orientation="Horizontal">
      <TextBlock Text="{Binding MessageText}"/>
      <TextBlock Text="{Binding UserName}"/>
    </StackPanel>
  </DataTemplate>
</ListBox.ItemTemplate> 
```

我有两个单独的类从 json 响应生成并解析为列表：

```
Message
{
   int MessageID;
   string MessageText;
   int UserID;
}
User
{
   int UserID;
   string UserName;
}

List<Message> Messages;
List<User> Users; 
```

如何在类中的用户消息旁边的`UserName`类中绑定 xaml ？两个类都有相同的。`User``Message``UserId`

当然，最简单的方法是`UserName`在`Message`类中创建附加属性，然后将`UserName`属性从 User 类传递到`Message`然后绑定它，但这似乎是重复性任务和不好的做法。

想到的一种解决方案是使用某种值转换器，然后传递其他参数，例如`UserId`和用户列表，但这似乎有点骇人听闻。所以我想知道是否有某种 linq、sql 风格的实现来获得我想要的结果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T15:26:33.763

您提到的任何一种解决方法都可以使用，我认为无论如何都不会绑定到两个不同的对象。原因在于 .NET 数据绑定的工作方式。它使用第一个对象来确定属性，然后期望其余的对象跟随。

就个人而言，我会创建另一个包含用户和消息的类，然后在需要时“转接呼叫”。显然，当您创建此类时，请确保将具有匹配 ID 的 User 和 Message 放在一起。

例如，

```
class Chat
    {
        private User user;

        private Message message;

        public string UserName
        {
            get
            {
                return user.Username;
            }
        }

        public string MessageText
        {
            get
            {
                return message.MessageText;
            }
        }
    } 
```

参考：[community.devexpress](http://community.devexpress.com/forums/t/30797.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T23:55:04.533

这应该可以帮助您：

```
 Message mess = null; 

   var item = from user in Users
              where (mess = Messages.First(m => m.UserID == user.UserID)) != null
              select new {user.UserName, mess.MessageText}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T03:52:23.793

使用您的预定义类，您也可以这样做。

```
public class DisplayBox
{
    public User user{get;set}

    public Message message{get;set;}
} 
```

现在创建一个`public List<DisplayBox> list = new List();`

并向其中添加项目。

```
 list.Add(new DisplayBox()
   {
        user = new User(){UserName=""}, message = new Message(){Message=""}
   }); 
```

现在将您的列表框绑定到此列表。

```
 <ListBox ItemSource={Binding list}
  <ListBox.ItemTemplate>
    <DataTemplate>
      <StackPanel Orientation="Horizontal">
        <TextBlock Text="{Binding message.MessageText}"/>
        <TextBlock Text="{Binding user.UserName}"/>
      </StackPanel>
    </DataTemplate>
  </ListBox.ItemTemplate>
 </ListBox> 
```

我希望它有所帮助。

# c# - 在 TreeNode 中嵌入图像

> ID：12728532
> 
> 赞同：2
> 
> 时间：2012-10-04T13:38:37.673
> 
> 标签：c#, treeview, treenode

如何将全尺寸图像嵌入到 TreeNode？

目标是显示详细的日志文件，其中每个节点代表窗口标题，其子节点包含键盘日志。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T13:48:34.607

使用以下模式将图像添加到`TreeView`图像列表中。

```
ImageList treeList = new ImageList();
treeList.Images.Add("imageKey", myImage); 
```

然后将图像设置为节点使用

```
myNode.ImageKey = "imageKey"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:45:29.223

试试这个功能：

```
 private void FillTreeView()
{
    // Load the images in an ImageList.
    ImageList myImageList = new ImageList();
    myImageList.Images.Add(Image.FromFile("1.gif"));
    myImageList.Images.Add(Image.FromFile("2.gif"));
    myImageList.Images.Add(Image.FromFile("3.gif"));
    myImageList.Images.Add(Image.FromFile("4.gif"));
    myImageList.Images.Add(Image.FromFile("5.gif"));
    myImageList.Images.Add(Image.FromFile("6.gif"));
    myImageList.Images.Add(Image.FromFile("7.gif"));

    // Assign the ImageList to the TreeView.
    myTreeView.ImageList = myImageList;

    // Set the TreeView control's default image and selected image indexes.
    myTreeView.ImageIndex = 0;
    myTreeView.SelectedImageIndex = 1;

    /* Set the index of image from the 
    ImageList for selected and unselected tree nodes.*/ 
    this.rootImageIndex = 2;
    this.selectedCustomerImageIndex = 3;
    this.unselectedCustomerImageIndex = 4;
    this.selectedOrderImageIndex = 5;
    this.unselectedOrderImageIndex = 6;

    // Create the root tree node.
    TreeNode rootNode = new TreeNode("TheList");
    rootNode.ImageIndex = rootImageIndex;
    rootNode.SelectedImageIndex = rootImageIndex;

    // Add a main root tree node.
    myTreeView.Nodes.Add(rootNode);

    // Add a root tree node for each Customer object in the ArrayList. 
    foreach(Customer myCustomer in customerArray)
    {
        // Add a child tree node for each Order object. 
        int countIndex=0;
        TreeNode[] myTreeNodeArray = new TreeNode[myCustomer.CustomerOrders.Count];
        foreach(Order myOrder in myCustomer.CustomerOrders)
        {
            // Add the Order tree node to the array.
            myTreeNodeArray[countIndex] = new TreeNode(myOrder.OrderID,
              unselectedOrderImageIndex, selectedOrderImageIndex);
            countIndex++;
        }
        // Add the Customer tree node.
        TreeNode customerNode = new TreeNode(myCustomer.CustomerName,
            unselectedCustomerImageIndex, selectedCustomerImageIndex, myTreeNodeArray);
        myTreeView.Nodes[0].Nodes.Add(customerNode);
    }
} 
```

# spring - Hibernate 异常 - 瞬态对象异常

> ID：12728533
> 
> 赞同：0
> 
> 时间：2012-10-04T13:38:38.430
> 
> 标签：spring, hibernate

我一直在网上浏览这个例外。我找到了很多文章并试图修复它，但不幸的是，在我花费了这么多时间之后，我仍然遇到同样的错误。

hbm.xml 文件..

```
<hibernate-mapping>
    <class name="AbstractLoadKey" table="loadkey" abstract="true">
        <id name="id" type="long">
            <generator class="org.hibernate.id.enhanced.SequenceStyleGenerator">
                <param name="sequence_name">hibernate_sequence</param>
            </generator>
        </id>
        <discriminator type="string" length="1" column="subclass" not-null="true"/>
        <version name="version" type="long" column="version"/>
        <property name="insertTime" type="org.jadira.usertype.dateandtime.joda.PersistentLocalDateTime" column="INSERTTIME"/>
        <property name="updateTime" type="org.jadira.usertype.dateandtime.joda.PersistentLocalDateTime" column="UPDATETIME"/>
        <component name="origin" class="SortPlan">
            <property name="country" type="string" length="2" column="orig_country" not-null="true" />
            <property name="slic" type="string" length="5" column="orig_slic" not-null="true" />
            <property name="portCode" type="string" length="5" column="orig_portcode" not-null="true" />
            <many-to-one
                name="code"
                class="SortCode"
                column="orig_sort_id"
                foreign-key="domloadplan_origsort_fk"
                index="domloadplan_origsort_fk"
                not-null="true"
            /> 
```

我想将多对一属性保存在主表中，但不保存在`SortCode`（多对一相关表）中

在控制器中调用此方法：

```
dkey = domLoadKeyDao.read(dkey);

    @Transactional
    public DomLoadKey read(DomLoadKey domLoadKey) {
        Session s = getSessionFactory().getCurrentSession();
        Criteria c = s.createCriteria(getEntityClass());
        c.add(Restrictions.eq("origin.country", domLoadKey.getOrigin().getCountry()));
        c.add(Restrictions.eq("origin.slic", domLoadKey.getOrigin().getSlic()));
        .
        .
        .
        DomLoadKey result = (DomLoadKey) c.uniqueResult();
        if(result == null)
        return domLoadKey;
        return result;
} 
```

当我进去查看它失败的地方时，在这个特定的片段中它失败了......而不是去`success = true`它出来......

这个片段来自

```
sessionImpl.class

boolean success = false;
        try {
            for( int i=0; i<size; i++ ) {
                final List currentResults = loaders[i].list(this);
                currentResults.addAll(results);
                results = currentResults;
            }
            success = true;
        }
        finally {
            dontFlushFromFind--;
            afterOperation(success);
        } 
```

这是它失败的地方..

```
final List currentResults = loaders[i].list(this); 
```

这条线进一步调用了这个方法并失败了，

```
public List list(SessionImplementor session) 
    throws HibernateException {
        return list( session, translator.getQueryParameters(), querySpaces, resultTypes );

    } 
```

`autowired`我的控制器里 有我所有的道，比如，

```
@Autowired
private SortCodeDao sortCodeDao; 
```

在我的应用程序中使用 spring MVC，Hibernate。使用criteriaImpl，在它来到这里之前返回

```
DomLoadKey result = (DomLoadKey) c.uniqueResult(); 
```

它给出了例外。我有类似的方法

```
IntlLoadKey 
```

这是工作。但是当谈到 Dom 时，它的失败..

以下是我的堆栈跟踪..

```
org.hibernate.TransientObjectException: object references an unsaved transient instance - save the transient instance before flushing: ca.ups.tle.sortCode.SortCode
    at org.hibernate.engine.ForeignKeys.getEntityIdentifierIfNotUnsaved(ForeignKeys.java:243)
    at org.hibernate.type.EntityType.getIdentifier(EntityType.java:456)
    at org.hibernate.type.ManyToOneType.nullSafeSet(ManyToOneType.java:130)
    at org.hibernate.loader.Loader.bindPositionalParameters(Loader.java:1873)
    at org.hibernate.loader.Loader.bindParameterValues(Loader.java:1844)
    at org.hibernate.loader.Loader.prepareQueryStatement(Loader.java:1716)
    at org.hibernate.loader.Loader.doQuery(Loader.java:801)
    at org.hibernate.loader.Loader.doQueryAndInitializeNonLazyCollections(Loader.java:274)
    at org.hibernate.loader.Loader.doList(Loader.java:2542)
    at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
    at org.hibernate.loader.Loader.list(Loader.java:2271)
    at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:119)
    at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1716)
    at org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:347)
    at org.hibernate.impl.CriteriaImpl.uniqueResult(CriteriaImpl.java:369)
    at ca.ups.tle.loadKey.DomLoadKeyHbmDao.read(DomLoadKeyHbmDao.java:74)
    at ca.ups.tle.loadKey.DomLoadKeyHbmDao$$FastClassByCGLIB$$3036def2.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:191)
    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:688)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621)
    at ca.ups.tle.loadKey.DomLoadKeyHbmDao$$EnhancerByCGLIB$$71e33677_2.read(<generated>)
    at ca.ups.tle.web.controller.assignLoads.NISLoadEntryController.usePositionInformationNis(NISLoadEntryController.java:1010)
    at ca.ups.tle.web.controller.assignLoads.NISLoadEntryController$$FastClassByCGLIB$$c0ff7011.invoke(<generated>)
    at net.sf.cglib.proxy.MethodProxy.invoke(MethodProxy.java:191)
    at org.springframework.aop.framework.Cglib2AopProxy$CglibMethodInvocation.invokeJoinpoint(Cglib2AopProxy.java:688)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.Cglib2AopProxy$DynamicAdvisedInterceptor.intercept(Cglib2AopProxy.java:621)
    at ca.ups.tle.web.controller.assignLoads.NISLoadEntryController$$EnhancerByCGLIB$$64e555c_2.usePositionInformationNis(<generated>)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.expression.spel.support.ReflectiveMethodExecutor.execute(ReflectiveMethodExecutor.java:58)
    at org.springframework.expression.spel.ast.MethodReference.getValueInternal(MethodReference.java:104)
    at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:57)
    at org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:102)
    at org.springframework.expression.spel.standard.SpelExpression.getValue(SpelExpression.java:97)
    at org.springframework.binding.expression.spel.SpringELExpression.getValue(SpringELExpression.java:84)
    at org.springframework.webflow.action.EvaluateAction.doExecute(EvaluateAction.java:75)
    at org.springframework.webflow.action.AbstractAction.execute(AbstractAction.java:188)
    at org.springframework.webflow.execution.AnnotatedAction.execute(AnnotatedAction.java:145)
    at org.springframework.webflow.execution.ActionExecutor.execute(ActionExecutor.java:51)
    at org.springframework.webflow.engine.support.ActionTransitionCriteria.test(ActionTransitionCriteria.java:82)
    at org.springframework.webflow.engine.support.TransitionCriteriaChain.test(TransitionCriteriaChain.java:71)
    at org.springframework.webflow.engine.Transition.canExecute(Transition.java:195)
    at org.springframework.webflow.engine.Transition.execute(Transition.java:211)
    at org.springframework.webflow.engine.impl.FlowExecutionImpl.execute(FlowExecutionImpl.java:393)
    at org.springframework.webflow.engine.impl.RequestControlContextImpl.execute(RequestControlContextImpl.java:214)
    at org.springframework.webflow.engine.TransitionableState.handleEvent(TransitionableState.java:119)
    at org.springframework.webflow.engine.Flow.handleEvent(Flow.java:555)
    at org.springframework.webflow.engine.impl.FlowExecutionImpl.handleEvent(FlowExecutionImpl.java:388)
    at org.springframework.webflow.engine.impl.RequestControlContextImpl.handleEvent(RequestControlContextImpl.java:210)
    at org.springframework.webflow.engine.ViewState.handleEvent(ViewState.java:232)
    at org.springframework.webflow.engine.ViewState.resume(ViewState.java:196)
    at org.springframework.webflow.engine.Flow.resume(Flow.java:545)
    at org.springframework.webflow.engine.impl.FlowExecutionImpl.resume(FlowExecutionImpl.java:261)
    at org.springframework.webflow.executor.FlowExecutorImpl.resumeExecution(FlowExecutorImpl.java:169)
    at org.springframework.webflow.mvc.servlet.FlowHandlerAdapter.handle(FlowHandlerAdapter.java:183)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:790)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:719)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:644)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:560)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:368)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:97)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:100)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:78)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:54)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:35)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilter(BasicAuthenticationFilter.java:177)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:187)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:105)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.context.SecurityContextPersistenceFilter.doFilter(SecurityContextPersistenceFilter.java:79)
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:380)
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:169)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:237)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:52:34.130

这意味着您尝试在此处加载的 DomLoadKey 先前已附加到会话，被弄脏并且从未持久化。当该会话关闭时，实体被分离。现在您正在尝试获取 hibernate 知道处于脏状态的同一实体，因此出现异常。它不一定是脏的 DomLoadKey，它也可能是一个没有被持久化的引用实体。

您要么需要确保在会话关闭之前保留所有更改，要么将实体重新附加到新会话。这取决于您的用例。

# c++ - （全局）静态变量会在程序结束时被销毁吗？

> ID：12728535
> 
> 赞同：1
> 
> 时间：2012-10-04T13:38:41.253
> 
> 标签：c++, destructor, lifetime

> **可能重复：**
> [C++ 是否为全局和类静态变量调用析构函数？](https://stackoverflow.com/questions/2204608/does-c-call-destructors-for-global-and-class-static-variables)

寿命是多少

*   全球的`MyClass myclass;`
*   全球的`static MyClass myclass;`
*   全球的`const MyClass myclass;`
*   全球的`static const MyClass myclass;`
*   `static MyClass myclass;`实际发生初始化时的本地函数
*   `static constexpr MyClass myclass;`C++11 中的全局

尤其是**它们会在常规程序结束时被销毁**（即`main`没有错误）？标准在哪里如此说明。

我注意到*私有析构函数*阻止了所有这些变量的创建。但是，如果我没记错的话，它在某处明确提到，一些静态数据可能已被放入静态数据部分并已预先构建加载。这对我来说意味着不会调用任何析构函数。这意味着我可以定义这样一个变量......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T13:58:29.487

具有静态生命周期的对象的析构函数（您提到的所有情况都定义具有静态生命周期的对象-尽管我不认为 a 中的对象`constexpr`可以具有非平凡的析构函数）从内部调用`exit()`，对象的顺序相反被建造。

从返回值返回`main`导致`exit`调用，所以从主返回将导致这些析构函数被调用。程序终止的其他方式（`abort()`、断言失败、`_exit()`等）不会调用析构函数。

如果对象在 DLL 中（`.so`在 Unix 下），则通常会在卸载 DLL 时调用析构函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-04T13:43:07.770

文件或命名空间范围对象的析构函数在控制流离开时被调用`main()`。

如果一个异常离开`main()`，那么它的实现定义了是否调用任何对象的析构函数。使用现代编译器，在这种情况下不会调用析构函数，以便在引发未处理的异常时轻松检查程序状态。早期的 C++ 实现使用基于`setjmp`/的异常机制，`longjmp`它会在搜索异常处理程序时展开堆栈，因此即使最终没有找到合适的异常处理程序也会调用析构函数。

如果应用程序终止`_exit()`或`_Exit()`没有`std::quick_exit()`调用析构函数。

# c# - 从 XmlNodeList 中提取节点，带有命名空间，并且同一个子节点出现在多个级别

> ID：12728536
> 
> 赞同：7
> 
> 时间：2012-10-04T13:38:43.577
> 
> 标签：c#, xml

我正在尝试提取那些子节点，但到目前为止我只是头疼...

```
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
<soapenv:Body>
  <supplyCrew xmlns="http://site.ddf.com">
     <login>
        <login>XXXX</login>
        <password>XXXX</password>
     </login>
     <flightInformation>
        <flights>
           <item>
              <arrivalDateTime>2010-11-08T22:48:00.000Z</arrivalDateTime>
              <arrivingCity>ORD</arrivingCity>
              <crewMembers>
                 <item>
                    <employeeId>020040</employeeId>
                    <isDepositor>Y</isDepositor>
                    <isTransmitter>N</isTransmitter>
                 </item>
                 <item>
                    <employeeId>09000</employeeId>
                    <isDepositor>N</isDepositor>
                    <isTransmitter>Y</isTransmitter>
                 </item>
              </crewMembers>
           </item>
           <item>
              <arrivalDateTime>2010-11-08T20:29:00.000Z</arrivalDateTime>
              <arrivingCity>JFK</arrivingCity>
              <crewMembers>
                 <item>
                    <employeeId>0538</employeeId>
                    <isDepositor>Y</isDepositor>
                    <isTransmitter>N</isTransmitter>
                 </item>
                 <item>
                    <employeeId>097790</employeeId>
                    <isDepositor>N</isDepositor>
                    <isTransmitter>Y</isTransmitter>
                 </item> 
```

使用代码我可以得到它们，但我不知道如何根据它们的标签名称选择每一个以将它们插入数据库。

```
XmlDocument xmlDoc = new XmlDocument();
xmlDoc.Load("C:/Crew_Request_Sample.xml"); 
XmlNodeList elemList = xmlDoc.GetElementsByTagName("item");
foreach (XmlNode node in elemList)
{
    Debug.WriteLine(node.InnerText);
} 
```

我需要一些方向，拜托。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-04T13:47:46.913

在这里使用的问题`GetElementsByTagName("item")`是节点有 2 个级别`item`- 一个作为子级`flights`，另一个作为子级`crewMembers`。

**编辑**现在粘贴了完整的 xml，很明显还涉及到一个命名空间。要处理命名空间，请使用命名空间管理器为命名空间定义别名，然后您可以在 xpath 查询中使用这些别名：

```
var nsm = new XmlNamespaceManager(xmlDoc.NameTable);
nsm.AddNamespace("s", "http://site.ddf.com");
var elemList = xmlDoc.SelectNodes("//s:crewMembers/s:item", nsm);
foreach (var node in elemList)
{
    Debug.WriteLine(node.SelectSingleNode("s:employeeId", nsm).InnerText);
    Debug.WriteLine(node.SelectSingleNode("s:isDepositor", nsm).InnerText);
    Debug.WriteLine(node.SelectSingleNode("s:isTransmitter", nsm).InnerText);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T13:56:30.867

您可以使用 LINQ2XML..

```
XElement doc=XElement.Load("C:/Crew_Request_Sample.xml"); 
XNamespace e = "http://schemas.xmlsoap.org/soap/envelope/";
XNamespace s = "http://site.ddf.com";
//this would access the nodes of item->crewMembers->item and put it into an Anonymous Type

var yourList=doc.Descendants(e+"Body")
.Descendants(s+"supplyCrew")
.Descendants(s+"flightInformation")
.Descendants(s+"flights")
.Descendants(s+"item")
.Descendants(s+"crewMembers")
.Descendants(s+"item")
.Select(
x=>new
{
//Anonymous Type
employeeId=x.Element(s+"employeeId").Value,
isDepositor=x.Element(s+"isDepositor").Value,
isTransmitter=x.Element(s+"isTransmitter").Value
}
); 
```

然后，您可以使用 for-each 循环访问 yourList

```
foreach(var item in yourList)
{

Console.WriteLine(item.employeeId);
Console.WriteLine(item.isDepositor);
Console.WriteLine(item.isTransmitter);
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T13:47:21.833

我认为你会使用这种技术更快更容易地做到这一点

[链接到 XML](http://msdn.microsoft.com/en-us/library/bb387061.aspx)

该站点中有很多示例，因此很容易找到您想要的内容。希望能帮助到你。

# ios - 防止在多个设备上安装存折

> ID：12728542
> 
> 赞同：1
> 
> 时间：2012-10-04T13:39:00.190
> 
> 标签：ios, ios6, passbook

不完全是一个编程问题，但在这里：

通过电子邮件或网络分发存折通行证的公司如何防止通行证安装在多个设备上？

我在 Apple 文档上找不到任何关于此的内容。我唯一能想到的就是在设备注册webservice上检查pass type和serial的组合是否有设备已经注册并删除它，但我不知道有什么命令可以远程删除pass。

另一种选择是在生成通行证之前检查它是否已经注册，但这仅适用于 URL 分发，不适用于电子邮件。

有没有办法通过推送通知+更新远程删除通行证？关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:02:49.367

Mail 和 Mobile Safari 将显示他们获得的任何通行证，用户可以决定将它们添加到他们的 Passbook。通行证创建者无能为力，只能小心处理 .pkpass 文件的传递方式。

如果您真的只想为特定设备提供特定的通行证，您可能会考虑使用自定义 API 与后端通信并以这种方式请求该设备的通行证的配套应用程序。然后，您拥有比通过电子邮件或 URL 链接分发更多的控制权。

Apple 不赞成以编程方式删除通行证；只有用户应该删除通行证，因为他们添加了通行证。但是，您可以更新通行证以明确说明无效并应将其删除。例如，您可以删除条形码（如果有），并使用带有大红色“INVALID”的背景图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-06T16:42:33.950

只是为了扩展@ohmi的答案：

1.  您无法阻止将通行证安装在多个设备上 - 例如，如果用户为 Passbook 启用 iCloud，通行证将在设备之间自动同步。
2.  考虑到您的 pkpass 链接是公开的，您可能需要考虑引入一次性下载链接，但虽然它可以很好地满足您的需求，但如果无法重新添加他们手动删除的通行证，用户可能会非常失望。所以我不会推荐这样的解决方案。
3.  您可以使您的 pkpass 链接成为私有的，因此只有来自您的应用程序并带有特定标头字段（例如 auth_token）的特定值的 GET 请求才会收到 pkpass 文件，但是这样您几乎可以禁用通过电子邮件或通过共享通行证的 URL 并使通行证更新可能是不可能的。

# javascript - document.getElementById('email' + (2)).innerText 在 Firefox 中不起作用

> ID：12728545
> 
> 赞同：1
> 
> 时间：2012-10-04T13:39:09.497
> 
> 标签：javascript, jsp, firefox

在一个 Jsp 页面中，我有一个 ADD 按钮，它可以动态添加一个带有`id ="email"+rowindex`.

当我尝试获取通过添加的电子邮件的值时，行索引值`document.getElementById('email' + (2)).innerText`在哪里`(2)`，它在 Firefox 中不起作用，但在 IE 中运行良好。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T13:39:35.353

该`.innerText`属性是非标准的。改为使用`.textContent`。

* * *

或者，如果您支持较旧的 IE，那么您可以这样做：

```
var email = document.getElementById('email' + 2);

var text = email.textContent || email.innerText; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:43:31.593

这个小代码可能会有所帮助

```
var email = document.getElementById('email' + (2));
var text = email.value; 
```

希望这可以帮助！

# python - 在多个项目中包含通用的Django Project

> ID：12728547
> 
> 赞同：1
> 
> 时间：2012-10-04T13:39:15.990
> 
> 标签：python, django

我有两个 Django 项目，我使用了很多常见的模型。自定义用户类、算法类、产品类。这两个项目都与电子商务有关，都在不同的机器上运行，并且服务于完全不同的目的。

但是，考虑到他们在“通用”中有这些模型，我想知道是否值得创建第三个通用项目作为基础模型的“基础”，然后这两个项目都将导入此基础项目的通用模型。

这也将有所帮助，因为我们可以将两个电子商务网站的两个不同的客户和产品数据库加入到这个大型通用数据库中。

我的问题是：1）是否有人对可能的开销有任何经验或可以实际估计它？将来有必要加入两个 Django 项目的共同部分，但我估计导入第三个项目（可能是实时的）会有很多开销。

2) 在第三个项目中导入的最佳方法是什么？我可以想到多种方法：

*   创建一个打包的、可安装的 Python 模块，例如 Internet 上的现有模块（setuptools、lxml、tastepie），并将该模块导入到两个 Django 项目中；
*   让项目位于机器中的目录上，并在 Python 文件中实时从该路径导入（以前做过，可以工作，但似乎有一些开销）；

编辑：此外，我们的通用模型/功能包含商业机密和可专利的内容，因此公开分发是不可能的。我猜该路线将是创建类似包的东西，但不公开分发，仅分发并安装在 2 台特定机器上。

有人可以对此提供一些反馈吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:53:08.323

我会将常用模型等分离出来，放入它自己的 python 包中。然后每个项目都会安装这个包，或者只是在系统级别安装包，他们都可以使用它。如果你处理得当，你不应该改变很多你的导入，你可以通过将一个新的鸡蛋推送到服务器并通过安装来轻松更新包`easy_install`or `pip`。

这是我目前设置项目的方式。常见的非业务逻辑被分离到他们自己的项目中，我从中创建一个包，然后像任何其他 python 库一样安装和使用。

这里的一点额外工作可以为您节省大量时间，并允许在各种项目之间透明地更新您的公共代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:55:16.403

在单个项目中将您的模型组织成逻辑应用程序。

例如具有 4 个应用程序的单个项目：

```
myproject/
    blog/
    contact/
    project1specific/
    project2specific/ 
```

使用站点框架： [https ://docs.djangoproject.com/en/dev/ref/contrib/sites/](https://docs.djangoproject.com/en/dev/ref/contrib/sites/)

有 2 个 settings.py 文件（settings_p1.py、settings_p2.py）

在每个设置文件中，为每个项目将 SITE_ID 设置为不同的值。

```
SITE_ID = 1 (or 2 for the second project) 
```

不要忘记在您的站点表中实际创建第二个站点记录！

在每个 settings.py 中的 INSTALLED_APPS 中，仅包含您要用于此特定项目的应用程序。

也许在 2 个项目的设置文件中设置 2 个不同的模板目录，STATIC_ROOT（MEDIA_ROOT 可能保持不变）和 urls 文件。

此时，您可以为每个项目 settings.py 使用不同的数据库设置，或者向模型添加站点 FK 并使 AdminForms 查询集仅反映当前站点记录。

如果您需要任何细节，请告诉我，但这就是我将如何完成您正在做的事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:56:09.240

如果您计划在可预见的未来并行支持这些应用程序，这绝对是值得的。没有什么比改变一件事然后在另一个地方几乎逐字重复更令人沮丧的了，尤其是当奇怪的项目特定错误开始出现时，因为两者仍然存在微妙的不同。

实现您未列出的此类共享的一种方法可能是[git submodules](http://markhansen.co.nz/git-repo-inside-git/)或 felixge 的[Git Fake](http://debuggable.com/posts/git-fake-submodules:4b563ee4-f3cc-4061-967e-0e48cbdd56cb) Submodules 。

# c# - 使用 asp.net 远程杀死进程

> ID：12728550
> 
> 赞同：0
> 
> 时间：2012-10-04T13:39:19.817
> 
> 标签：c#, asp.net, remote-server

请帮助我，因为我需要远程终止/重新启动进程。

我已经尝试过了，但对我来说没有运气。错误是 - “无法连接到远程机器”

```
Process[] prs = Process.GetProcesses("SERVERNAME");

   foreach (Process pr in prs)
    {
       if (pr.ProcessName == "process")
       {
           pr.Kill();
       }
    } 
```

我也尝试了这个，但仍然无法正常工作并收到此错误：“访问被拒绝。（来自 HRESULT 的异常：0x80070005（E_ACCESSDENIED））”

```
ManagementScope scope = new ManagementScope("\\\\SERVERNAME\\root\\cimv2");
scope.Connect();
ObjectQuery query = new ObjectQuery("SELECT * FROM Win32_Process WHERE Name='process'");
ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);
ManagementObjectCollection objectCollection = searcher.Get();

   foreach (ManagementObject managementObject in objectCollection)
      {
       managementObject.InvokeMethod("Terminate", null);
      } 
```

我希望有人对此有解决方案。在此先感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T13:45:55.577

好吧，这些错误实际上是在告诉你到底出了什么问题。您的应用程序无法连接到远程计算机。这可能由于某些原因而发生：

1.  远程计算机不可用（不存在）
2.  远程计算机没有为远程连接打开 WMI，或者它在远程计算机上或途中被防火墙保护。
3.  您无权执行此操作。由于我在您的代码模拟中看不到任何地方，因此连接将使用当前进程令牌（它是哪个帐户？取决于您在应用程序池上的配置，或者如果您使用标签，则在您的 web.config 中，默认情况下- 这是 NT AUTHORITY）。您可能无权使用 WMI 和您正在运行的凭据访问远程计算机。它可以通过在您的代码、web.config 或应用程序池设置中模拟一个具有足够权限的帐户来解决（如果您在域中，请向您的 IT 部门询问一个帐户）。

祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-07T20:10:37.203

`web.config`使用适当的帐户（具有权限的帐户）将此添加到您的帐户。

```
<identity impersonate="true" userName="UserWithPermissions" password="pw" /> 
```

# python - DNS 服务器客户端通信协议

> ID：12728560
> 
> 赞同：2
> 
> 时间：2012-10-04T13:39:52.703
> 
> 标签：python, sockets, dns

我需要写一篇关于 DNS 如何工作的论文，并在 python 中构建一个小型但功能强大的 DNS 服务器。

我有一个简单的 UDP 套接字服务器，它在收到这样的数据包时打开一个线程：

```
while 1:
  try:
    stream, addr = serversocket.recvfrom(buffr)
    threading.Thread(target=handler, args=(stream, addr, threading.activeCount(),)).start()
  except:
    exc_type, exc_value, exc_traceback = sys.exc_info()
    except_catch(exc_type.__name__, exc_value, exc_traceback, threading.current_thread().name) 
```

处理函数只是尝试在内存中查找请求的记录，如果没有，它将执行另一个函数，在另一台服务器上运行 dns 查询以获取记录（如果他没有记录）。这有点像故障保险，也是我的问题所在。

```
def dnsrn(ip, type):
  try:
    mkr = dns.resolver.Resolver()
    mkr.nameservers = ['192.168.0.1']
    res = mkr.query(ip, type)

    for rdata in res:
      return rdata.address # this works for A records
      # to do for other types of records

  except:
    exc_type, exc_value, exc_traceback = sys.exc_info()
    except_catch(exc_type.__name__, exc_value, exc_traceback, threading.current_thread().name) 
```

**如您所见，我还没有完成它，但我已经遇到了问题。有时，这个函数会处理，如果没有在错误日志中给出任何错误，线程将永远不会完成。我已经测试过，错误日志应该会记录孩子抛出的所有错误。我有一个简单的客户端，它被编程为在每个设定的时间发送一个随机请求出一堆预设，而且孩子挂起时似乎没有模式。经过大约 24 小时的测试，我剩下大约 1-3 个僵尸线程。**

如果您想知道这是异常函数的样子：

```
def except_catch(type, value, track, thread=None):
  if type != "SystemExit":
    import traceback

    rawreport = traceback.format_exception(type, value, track)
    report = "\n" . join(rawreport)

    errorlog = open(error_log_path + "/errors.log", "a")

    if thread != None:
      errorlog.write("Exception in thread: " + thread + "\n\n")

    errorlog.write(("%s\n" + "-" * 30 + "\n\n") % report)

    errorlog.close()
sys.excepthook = except_catch 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:42:28.350

我会检查 RFC，因为这是协议的确切规范。DNS 的问题在于，存在不止一个 RFC。作为一个简单的开始，我会检查包含基础知识的[RFC 1035 。](https://www.rfc-editor.org/rfc/rfc1035)如果您需要高级功能，请查看其他相关 RFC。

# wordpress - 我可以从 Selenium 测试中获取我的应用程序代码吗？

> ID：12728563
> 
> 赞同：0
> 
> 时间：2012-10-04T13:39:58.567
> 
> 标签：wordpress, unit-testing, selenium

我正在使用 PHPUnit 和 Selenium 为 WordPress 网站编写单元和集成测试。PHPUnit 有一个有用的 WP 测试库，通过扩展一个特殊的 WP_UnitTestCase 而不是 PHPUnit_TestCase 来使用。

到目前为止，一切都很好。但是，真正有用的是，如果我的 Selenium 测试也可以在 WordPress 的上下文中执行代码。因此，例如，我可以在测试客户端行为的同时构建和操作用户、帖子等，这与 Rails 集成测试的方式非常相似。

有什么方法可以在 Selenium 测试的上下文中使用 WP_UnitTestCase 的功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:20:36.537

我不熟悉 WP_UnitTestCase，但你可以看看我开发的这个轻量级工具，它创建了一个测试 WordPress 实例。

[https://github.com/evomase/phpunit-wordpress](https://github.com/evomase/phpunit-wordpress)

您应该能够像使用独立应用程序一样轻松地将其与 Selenium 集成。唯一的区别是`build.php`，您需要将 更改`WP_SITEURL`为您为测试实例创建的 VirtualHost。

# objective-c - 以编程方式调用 segue 导致 NSInvalidArgumentException，原因：“UILabel 长度”无法识别的选择器

> ID：12728564
> 
> 赞同：3
> 
> 时间：2012-10-04T13:40:01.633
> 
> 标签：objective-c, ios, exception, uiviewcontroller, segue

我正在尝试做一个有条件的segue。但我得到：

```
 Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[UILabel length]: unrecognized selector sent to instance 0x763c8e0' 
```

设计是，当我按下按钮时，应用程序将使用 AFNetworking 的 AFJSONRequestOperation 从互联网检索一些数据。如果请求成功，它将从我当前的 UIViewController 调用另一个 UIViewController。我使用[这种方法](https://stackoverflow.com/questions/8581766/proper-way-to-do-conditional-segue-in-ios5)做了我的条件启动segue ，下面是我的代码：

```
-(void) login:(NSString*)pinString{    
NSString* urlString = [NSString stringWithFormat:@"%@%@%@", [super.serverResource getURL], [super.serverResource getRequestByKey:@"login"] ,pinString];
NSURL *url = [NSURL URLWithString:urlString];
NSURLRequest *request = [NSURLRequest requestWithURL:url];    
AFJSONRequestOperation *operation = [MenuletJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    [self performSegueWithIdentifier:@"login" sender:self];
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON){
    switch([response statusCode]){
        case (403):{
            UIAlertView* alert = [[UIAlertView alloc] initWithTitle:@"Log in failed"
                                                      message:@"Log in denied, check your PIN."
                                                      delegate:nil cancelButtonTitle:@"OK"
                                                      otherButtonTitles:nil];
            [alert show];
            break;
        }
    }
}];
[operation start]; 
```

}

```
- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
SettingViewController *settingVC = (SettingViewController*)[storyboard instantiateViewControllerWithIdentifier:@"SettingViewController"];
[self presentViewController:settingVC animated:YES completion:nil]; 
```

}

在 SettingViewController 中执行“ViewDidLoad”后，我得到了上面的异常。如果我不使用条件segue，只需ctl从按钮拖动到IB上的SettingViewController，一切正常......请给我一些建议......我真的没有想法......

以下是我来自 SettingViewController 的代码：

```
- (void)viewDidLoad{
[super viewDidLoad];
// Do any additional setup after loading the view.
//StringResources* resource = [[StringResources alloc]init];
[self.titleLabel setText:[super.stringResource getStringByKey:@"screen_setting_title"]];
[self.createOrderLabel setText:[super.stringResource getStringByKey:@"screen_setting_create_order_label"]];
[self.refreshMenuLabel setText:[super.stringResource getStringByKey:@"screen_setting_refresh_menu_label"]];
[self.tableNumberLabel setText:[super.stringResource getStringByKey:@"screen_setting_table_number_label"]]; 
```

}

实际上，我并没有在 SettingViewController 中放太多东西，我所做的只是以编程方式设置一些标签。我在每个 setText 上都设置了断点，它们都执行没有错误。所以异常一定是发生在 ViewDidLoad 之后...

这是发生错误的地方：

```
#import <UIKit/UIKit.h>
#import "AppDelegate.h"
int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); //error occur here
    }
} 
```

解决了...原来Segue处理一切。我需要做的就是设置一个通用的segue。一旦我调用 [self performSegueWithIdentifier:@"login" sender:self]，一切正常。谢谢大家...（覆盖 prepareForSegue 只会导致问题...）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:00:57.950

# 选项 1：相信 segue

确保 segue 从您当前的视图控制器转到 SettingViewController。

那你留着`-performSegueWithIdentifier:sender:`。

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
   // load data from current view controller to segue.destinationViewController
} 
```

# 选项 2：手动加载模态视图控制器

把segue全部扔掉，然后从情节提要中加载视图控制器。

```
AFJSONRequestOperation *operation = [MenuletJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
    SettingViewController *settingVC = (SettingViewController*)[storyboard instantiateViewControllerWithIdentifier:@"SettingViewController"];
    // load data from current view controller to settingVC
    [self presentViewController:settingVC animated:YES completion:nil];
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON){
    // Error handler
}]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T14:12:14.637

您想要做的是从 ViewController（橙色背景图标上的白色方块）单击并拖动，这将创建通用序列。然后你可以从代码中调用它。在 prepareForSegue 你可以访问你的目标 VC ：

```
 segue.destinationViewController 
```

并在那里加载数据或设置您想要的任何属性。我确实相信这是解决此问题的推荐方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:59:10.787

由于您在新 VC 上的 viewDidLoad 中遇到异常，我猜 segue 工作正常，问题出在新 VC 实现中。

看到错误，您是否直接在 UILabel 对象上使用类似 isEqualToString 的 NSString 比较而不是其 text 属性？

嗯..如果您发布一些 SettingViewController 的代码，指的是导致崩溃的 UILabel，我们可以帮助您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-08T06:41:28.430

今天我也遇到了这个错误。我不知道是什么原因造成的，我认为这是一个 Xcode 错误。通过删除 segue 并重新创建它（通过 CTRL 将其从 viewcontroller 拖动到 viewcontroller）来删除它。

我喜欢 Xcode，但有时它让我发疯。

# iphone - 以动态方式在 UITableView 中打印 JSON 数据

> ID：12728567
> 
> 赞同：0
> 
> 时间：2012-10-04T13:40:08.507
> 
> 标签：iphone, objective-c, ios, json

我在下面给出了一些 JSON 数据，我想在表格视图中显示它。我已经成功地使用了静态数据，但现在我想使用动态数据来做到这一点。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:46:08.693

它非常简单，使用 JSON Parser 解析 JSON 数据并将数据存储在`NSMutableArray`其中并将该数组传递给您的表视图。希望这可以帮助你..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:47:50.550

您必须使用 JSON 解析器来构建您可以正常操作的数据结构（通常是嵌套的 NSArray、NSDictonary、NSNumber 和 NSString 实例）。[请参阅我的解决方案。](https://github.com/H2CO3/CarbonateJSON)

旁注：如果您不熟悉从非结构化数据创建结构化数据这样的基本概念，那么您应该学习熟悉此类内容，而不是已经制作了**The Most Bestest iPhone App Yet (TM)。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:49:01.347

一旦您下载并解析了 JSON 数据，您就可以有效地获得静态数据。您可以在显示表格视图之前下载并解析 JSON 数据，然后使用数组或字典来指定您希望表格视图的布局方式。您需要以自己的方式将 JSON 数据表示为值对象，然后您可以对其进行计数和读取，以向表格视图提供所需的数据。如果您要在显示表格视图后获取数据，那么一旦您有了数据，只需调用`-[<tableViewName> reloadData]`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T13:50:40.380

您可以创建具有背景颜色和文本对齐的标题。

```
-(UIView *) tableView:(UITableView *)tableView viewForHeaderInSection:(NSInteger)section{

  UIView *headerView = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, tableView.bounds.size.width, 30)] autorelease];
if (section == 0){
   [headerView setBackgroundColor:[UIColor redColor]];
    UILabel * headerLabel=[[UILabel alloc]initWithFrame:CGRectMake(0, -5, headerView.frame.size.width, headerView.frame.size.height)];

    headerLabel.textAlignment = UITextAlignmentCenter;
    headerLabel.text =@"Current Schedule";
    [headerLabel setFont:[UIFont fontWithName:@"Arial-ItalicMT" size:18]];
    headerLabel.backgroundColor = [UIColor clearColor];

    [headerView addSubview:headerLabel];
    [headerLabel release];

    return headerView;
} 
```

}

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-11T10:34:53.517

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
  {

return [[[[jsonObject valueForKey:@"companies"] objectAtIndex:0] valueForKey:@"Departments"]count];
 }

   - (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
  {
return [[[[[[jsonObject valueForKey:@"companies"] objectAtIndex:0] valueForKey:@"Departments"] objectAtIndex:0] valueForKey:@"Employees"] count];
}

 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

label1.text = [[[[[[[jsonObject valueForKey:@"companies"] objectAtIndex:0] valueForKey:@"Departments"]objectAtIndex:section]valueForKey:@"Employees"]objectAtIndex:row]valueForKey:@"name"];

  }
  - (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
     {
     return [[[[[jsonObject valueForKey:@"companies"] objectAtIndex:0] valueForKey:@"Departments"]objectAtIndex:section]valueForKey:@"name"];
  } 
```

# inno-setup - 如何在 Inno Setup 中创建包含安装日期和时间的 destname

> ID：12728572
> 
> 赞同：5
> 
> 时间：2012-10-04T13:40:13.493
> 
> 标签：inno-setup

我想使用该`[Files]`部分创建一个具有以下格式的新文件：

```
Program Name plus date plus time .fmpur 
```

我会很感激任何想法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T13:57:05.933

比如下面的方式。如何修改日期时间模式，请参见[`GetDateTimeString`](http://www.jrsoftware.org/ispphelp/index.php?topic=getdatetimestring)页面：

```
[Setup]
AppName=My Program
AppVersion=1.5
DefaultDirName={pf}\My Program

#define FileNamePattern SetupSetting("AppName") + " " + GetDateTimeString('dd-mm-yyyy hh-nn-ss', '-', ':') + ".fmpur";

[Files]
Source: "MyProg.exe"; DestDir: "{app}"; DestName: "{#FileNamePattern}" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-19T10:49:46.917

TLama 示例的替代方法，使用函数获取文件名。

```
[code]
function GetFileName(Dummy: String): String;
begin
    Result := SetupSetting("AppName") + " " + GetDateTimeString('dd-mm-yyyy hh-nn-ss', '-', ':') + ".fmpur";
end;

[Files]
Source: "MyProg.exe"; DestDir: "{app}"; DestName: "{code:GetFileName}" 
```

# javascript - 在锚链接jQuery中滚动动画

> ID：12728574
> 
> 赞同：-1
> 
> 时间：2012-10-04T13:40:15.600
> 
> 标签：javascript, jquery, scroll, jquery-animate, scrolltop

当有人访问锚链接时，我正在尝试制作滚动动画，如下所示：

```
www.miweb.com/section/#anchorLink 
```

我正在使用此代码执行此操作，但其中有问题，因为在用户访问**没有锚 ID**的 URL 的情况下，我无法在它之后执行任何其他操作（在这种情况下为 alert("the end")） 。

```
$('html, body').animate({
    scrollTop:$('[name="'+window.location.hash.replace("#", "")+'"]').offset().top
}, 500);

alert("the end"); 
```

如果用户从带有锚 ID 的 URL 访问，它将被执行。

在任何情况下，我该怎么做才能在这个函数之后执行代码？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T13:43:18.530

如果您想要在动画**之后执行代码，请执行以下操作：**

```
$('html, body').animate({
    scrollTop:$('[name="'+window.location.hash.replace("#", "")+'"]').offset().top
}, 500, function() {
    alert("the end");
}); 
```

**更新**：
在 OP 的评论之后，我认为当 offset() 为 null 时访问 top 属性时出现 javascript 错误（当没有锚时就是这种情况），所以你要防止访问可能的 null 引用，如下所示：

```
dest = $('[name="'+window.location.hash.replace("#", "")+'"]').offset();
dtop = dest != null ? dest.top : null;
$('html, body').animate({
    scrollTop: dtop
}, 500);

alert("the end");​ 
```

现在`alert()`应该打印得很好。

如果您查看浏览器 javascript 控制台，您以后可以很容易地发现类似的错误，我刚刚这样做并看到了有关空引用的错误。

# java - Java Swing : GUI 冻结 - jstack 解释

> ID：12728589
> 
> 赞同：4
> 
> 时间：2012-10-04T13:41:09.840
> 
> 标签：java, multithreading, swing, event-dispatch-thread, jstack

我有一个正在使用的 Gui 应用程序，它在串行热敏打印机上打印一张票。当我点击启动此操作的按钮时，我的 GUI 被冻结。我认为那是因为代码是在 EDT 上执行的。我使用 jstack 来确定，但我不明白下面的结果：

```
Full thread dump Java HotSpot(TM) Client VM (23.3-b01 mixed mode, sharing):

"Thread-12" prio=6 tid=0x03012000 nid=0xd04 runnable [0x038ef000]
java.lang.Thread.State: RUNNABLE
    at gnu.io.RXTXPort.eventLoop(Native Method)
    at gnu.io.RXTXPort$MonitorThread.run(RXTXPort.java:1575)

"Thread-6" prio=6 tid=0x0302c400 nid=0x1b0 waiting on condition [0x039ef000]
java.lang.Thread.State: TIMED_WAITING (sleeping)
    at java.lang.Thread.sleep(Native Method)
    at posO2.Threads.ThreadHorloge.run(ThreadHorloge.java:46)

"Thread-5" prio=6 tid=0x03511c00 nid=0x9e4 waiting on condition [0x0399f000]
java.lang.Thread.State: TIMED_WAITING (sleeping)
    at java.lang.Thread.sleep(Native Method)
    at posO2.Threads.ThreadIgor.run(ThreadIgor.java:29)

"Thread-7" prio=6 tid=0x034b9800 nid=0xb40 waiting on condition [0x0394f000]
java.lang.Thread.State: TIMED_WAITING (sleeping)
    at java.lang.Thread.sleep(Native Method)
    at posO2.Threads.ThreadHorloge.run(ThreadHorloge.java:46)
    at java.lang.Thread.run(Unknown Source)

"Thread-4" prio=6 tid=0x0318ec00 nid=0xa08 waiting on condition [0x0323f000]
java.lang.Thread.State: TIMED_WAITING (sleeping)
    at java.lang.Thread.sleep(Native Method)
    at posO2.Threads.ThreadMajProduits.run(ThreadMajProduits.java:49)

"TimerQueue" daemon prio=6 tid=0x03036400 nid=0x9b8 waiting on condition [0x0344
f000]
java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x27e76778> (a java.util.concurrent.locks.Abstra
ctQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(Unknown Source)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject
.await(Unknown Source)
    at java.util.concurrent.DelayQueue.take(Unknown Source)
    at javax.swing.TimerQueue.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

"DestroyJavaVM" prio=6 tid=0x003c8400 nid=0xfe4 waiting on condition [0x00000000
]
java.lang.Thread.State: RUNNABLE

"AWT-EventQueue-0" prio=6 tid=0x02b6e000 nid=0xcbc runnable [0x033fe000]
java.lang.Thread.State: RUNNABLE
    at java.net.SocketInputStream.socketRead0(Native Method)
    at java.net.SocketInputStream.read(Unknown Source)
    at java.net.SocketInputStream.read(Unknown Source)
    at java.io.BufferedInputStream.fill(Unknown Source)
    at java.io.BufferedInputStream.read(Unknown Source)
    - locked <0x22f33f30> (a java.io.BufferedInputStream)
    at java.io.DataInputStream.readByte(Unknown Source)
    at org.hsqldb.result.Result.newResult(Unknown Source)
    at org.hsqldb.ClientConnection.read(Unknown Source)
    at org.hsqldb.ClientConnection.execute(Unknown Source)
    - locked <0x22f32700> (a org.hsqldb.ClientConnection)
    at org.hsqldb.jdbc.JDBCStatement.fetchResult(Unknown Source)
    at org.hsqldb.jdbc.JDBCStatement.executeQuery(Unknown Source)
    - locked <0x22be23b0> (a org.hsqldb.jdbc.JDBCStatement)
    at posO2.Printer.flash(Printer.java:1058)
    at posO2.Printer.bigFlash(Printer.java:1111)
    at posO2.Panels.Accueil$5.actionPerformed(Accueil.java:314)
    at javax.swing.AbstractButton.fireActionPerformed(Unknown Source)
    at javax.swing.AbstractButton$Handler.actionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.fireActionPerformed(Unknown Source)
    at javax.swing.DefaultButtonModel.setPressed(Unknown Source)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(Unknown Source)
    at java.awt.Component.processMouseEvent(Unknown Source)
    at javax.swing.JComponent.processMouseEvent(Unknown Source)
    at java.awt.Component.processEvent(Unknown Source)
    at java.awt.Container.processEvent(Unknown Source)
    at java.awt.Component.dispatchEventImpl(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.processMouseEvent(Unknown Source)
    at java.awt.LightweightDispatcher.dispatchEvent(Unknown Source)
    at java.awt.Container.dispatchEventImpl(Unknown Source)
    at java.awt.Window.dispatchEventImpl(Unknown Source)
    at java.awt.Component.dispatchEvent(Unknown Source)
    at java.awt.EventQueue.dispatchEventImpl(Unknown Source)
    at java.awt.EventQueue.access$200(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.awt.EventQueue$3.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.awt.EventQueue$4.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(Unknown Source)
    at java.awt.EventQueue.dispatchEvent(Unknown Source)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForFilter(Unknown Source)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.pumpEvents(Unknown Source)
    at java.awt.EventDispatchThread.run(Unknown Source)

"AWT-Shutdown" prio=6 tid=0x02b81800 nid=0xefc in Object.wait() [0x033af000]
java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x27c707c0> (a java.lang.Object)
    at java.lang.Object.wait(Object.java:503)
    at sun.awt.AWTAutoShutdown.run(Unknown Source)
    - locked <0x27c707c0> (a java.lang.Object)
    at java.lang.Thread.run(Unknown Source)

"AWT-Windows" daemon prio=6 tid=0x03002800 nid=0xe58 runnable [0x0328f000]
java.lang.Thread.State: RUNNABLE
    at sun.awt.windows.WToolkit.eventLoop(Native Method)
    at sun.awt.windows.WToolkit.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

 "Java2D Disposer" daemon prio=10 tid=0x03000400 nid=0x4d0 in Object.wait() [0x03
1ef000]
java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x27c2bf18> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    - locked <0x27c2bf18> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at sun.java2d.Disposer.run(Unknown Source)
    at java.lang.Thread.run(Unknown Source)

"Service Thread" daemon prio=6 tid=0x02b63000 nid=0xb94 runnable [0x00000000]
java.lang.Thread.State: RUNNABLE

"C1 CompilerThread0" daemon prio=10 tid=0x02b54c00 nid=0x3f0 waiting on conditio
n [0x00000000]
java.lang.Thread.State: RUNNABLE

"Attach Listener" daemon prio=10 tid=0x02b53400 nid=0x924 waiting on condition [
0x00000000]
java.lang.Thread.State: RUNNABLE

"Signal Dispatcher" daemon prio=10 tid=0x02b52000 nid=0xb88 runnable [0x00000000
]
java.lang.Thread.State: RUNNABLE

"Finalizer" daemon prio=8 tid=0x02b43c00 nid=0xfc8 in Object.wait() [0x02dff000]

java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x27c2c148> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    - locked <0x27c2c148> (a java.lang.ref.ReferenceQueue$Lock)
    at java.lang.ref.ReferenceQueue.remove(Unknown Source)
    at java.lang.ref.Finalizer$FinalizerThread.run(Unknown Source)

"Reference Handler" daemon prio=10 tid=0x02b3f000 nid=0x488 in Object.wait() [0x
02daf000]
java.lang.Thread.State: WAITING (on object monitor)
    at java.lang.Object.wait(Native Method)
    - waiting on <0x27c2bdd8> (a java.lang.ref.Reference$Lock)
    at java.lang.Object.wait(Object.java:503)
    at java.lang.ref.Reference$ReferenceHandler.run(Unknown Source)
    - locked <0x27c2bdd8> (a java.lang.ref.Reference$Lock)

"VM Thread" prio=10 tid=0x02b3d400 nid=0xa6c runnable

"VM Periodic Task Thread" prio=10 tid=0x02b76800 nid=0xf30 waiting on condition

JNI global references: 426 
```

有人可以向我解释我在哪里可以看到我的 GUI 由于第一个线程“Thread-12”而被冻结。

其次，“Thread-6”和“Thread-7”之间有什么区别，只要我确定我只运行过这个线程一次。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T16:34:02.887

`AWT-EventQueue-0`是您的事件调度线程，它确实被阻止通过套接字从~~串行端口`RXTX`~~`hsqldb`读取。您应该`SwingWorker`按照@Kumar 的建议使用 。可以在[此处](https://stackoverflow.com/a/4637725/230513)和[此处](https://stackoverflow.com/a/11372932/230513)找到示例。我发现在[分析器](https://stackoverflow.com/q/2064427/230513)中检查此类示例以进行研究很有帮助。

`Thread-6`并且作为in`Thread-7`的实例似乎属于您的应用程序。关于线程名称：`Threads.ThreadHorloge``posO2`

> 每个[线程](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)都有一个用于识别目的的名称。多个线程可能具有相同的名称。如果在创建线程时未指定名称，则会为其生成一个新名称。

请注意，`SwingWorker`并且`Executors`通常包括文本*pool-n*，其中*n*是序列号。

附录：*我的 EDT 处于一个* `RUNNABLE` *状态，所以从我粘贴的代码中你发现它被阻止了；您在哪里发现通过 RXTX 读取是阻塞原因*？

抱歉，是我的错; 上面更正了。EDT 并不是`BLOCKED`在`Thread.STATE`等待监视器锁定。它在等待数据库响应的意义上被阻塞，至少足够长的时间可以在您发送`-QUIT`信号时在调用堆栈顶部看到。不应在 EDT 上安排串行或网络操作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-04T13:49:09.460

**一个非常基本的规则：**

*   保持 UI 在 UI 线程上工作，而 Non-UI 在 Non-UI 线程上工作。

这样我们就可以保持 GUI 的**交互性**和**响应**性。

*   在 Java中，**事件调度线程 (EDT)**是 UI 线程，`main()`Java GUI 应用程序中的方法寿命不长，因此在**事件调度队列**中调度 GUI 构建工作后，它退出，然后由 EDT 处理 GUI。

*   要么用`Thread`做 Long Non-UI 处理工作，要么用`SwingWorker`，这是 java 中提供的，用来做 UI 和 Non-UI 工作之间的无缝同步……

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-04T13:53:15.837

该线程是从事件队列启动的线程

> “AWT-EventQueue-0”prio=6 tid=0x02b6e000 nid=0xcbc 可运行 [0x033fe000] java.lang.Thread.State: RUNNABLE

你可以看出，因为在这个线程的堆栈跟踪的最后，它是由 EventDispatchThread 启动的：

> 在 java.awt.EventDispatchThread.run（未知来源）

至于您关于“线程 6 和线程 7 之间有什么区别”的问题，我没有直接的答案，但我认为这些线程中的大多数都是由您的分析器创建的（所以您是看到的是它旋转起来的线程）。但这可能是错误的。我在它临时引用的 Threads.ThreadHorloge 类上找不到任何东西。

# html - 使用 image-url 内容设置伪元素的宽度

> ID：12728594
> 
> 赞同：2
> 
> 时间：2012-10-04T13:41:24.737
> 
> 标签：html, css, pseudo-element

我有一个应该是可打印的页面。问题是页面包含一些元素`background-image`（打印时我看不到图像），所以我尝试为打印机创建一个样式表，其中包含一些伪元素可以帮助我显示图像，它看起来喜欢：

```
.pbar-fill {
  background: none !important;
}
.pbar-fill::before {
  content: url("/images/bg-progress-bar-big01.gif") !important;
  position: absolute !important;
  z-index: 1003 !important;
  width: 23px !important;
} 
```

它并不顺利，因为图像总是得到它的全宽（220px）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T01:52:17.267

Pseudo Elements are just a box containing the generated content. So you can't resize the image inside.

This thread covers all the options pretty thoroughly
[Can I change the height of an image in CSS :before/:after pseudo-elements?](https://stackoverflow.com/questions/8977957/can-i-change-the-height-of-an-image-in-css-before-after-pseudo-elements)

The best option seems to be scale the image to what ever suits. But this is probably way to fiddly to implement everywhere.

```
.pbar-fill::before {
    content: url('image.jpg');
    transform: scale(.5);
} 
```

# microprocessors - 为什么在 Windows 或 MAC 或 Linux 上运行的程序不运行

> ID：12728595
> 
> 赞同：-2
> 
> 时间：2012-10-04T13:41:27.767
> 
> 标签：microprocessors

如果编译器将高级语言（例如 C++）转换为要由微处理器执行的机器代码。

为什么在 Windows 上运行的程序不能在 Mac 或 Linux 上运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:45:31.597

只要一个高级程序真的 100% 用 C++ 或其他语言编写*并且完全不使用任何外部代码，*事实上，用编译器让它在任何操作系统上编译都相对容易，而且它的行为也一样方法。

困难在于几乎每个程序都使用操作系统的库，例如用于输入/输出、UI 绘图等，而这些在阳光下的每个操作系统上都是不同的。在实践中，如果不利用操作系统或操作系统附带的库中存在的大量帮助代码，就不可能在计算机程序中完成任何实际操作。这就是让移植变得更加困难的原因——通常实际上并不困难，只是很乏味。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:48:35.653

因为您的很多调用都引用了操作系统的元素。像绘图，访问文件系统。这些调用必须翻译，如 Java 或 Qt。

# java - 如何扩展一个组件？

> ID：12728596
> 
> 赞同：2
> 
> 时间：2012-10-04T13:41:30.917
> 
> 标签：java, mt4j

我是一个专业项目的新手，它使用 mt4j 库；事实上，我需要重构部分代码，并且我想知道在某些情况下的最佳实践。

我们需要自定义一些 mt4j 元素，例如 MTSceneMenu ；目前，以前的开发人员只需将类复制/粘贴到新包中并修改他们想要的内容。我认为最好创建一个扩展 mt4j 的新类，但问题是：大多数属性都是私有的，所以我无法从派生类中调用它们......

你怎么看这个问题？复制/粘贴方法是否正确？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:06:14.337

您可以修改库本身，而不仅仅是继承要更改的类。您不太可能需要原始行为，因为您已经在更改它以满足您的需求。这样您就可以访问私有字段并且也不需要复制代码。

# ios - 如何在 iOS 应用程序中获取 MFi 蓝牙设备的友好名称？

> ID：12728597
> 
> 赞同：3
> 
> 时间：2012-10-04T13:41:34.277
> 
> 标签：ios, mfi, external-accessory

因此[EAAccessory](http://developer.apple.com/library/ios/#documentation/ExternalAccessory/Reference/EAAccessory_class/Reference/Reference.html)提供了一个属性来检索设备的名称。从我查询的设备来看，这通常与您在`Settings > Bluetooth`页面中看到的友好名称不同。它通常是设备的通用型号名称。

有没有办法使用`EAAccessory`或其他类来获取设备的友好名称？

# php - PHP MySQL - 使用不同表记录的代码生成器

> ID：12728600
> 
> 赞同：0
> 
> 时间：2012-10-04T13:41:47.740
> 
> 标签：php, mysql, system, generator

又是我，

在这种情况下，我有一个会计代码表 [ACCOUNTINGCODE]，其中包含以下字段：
ACC1CUST（例如：IVMA）
ACC2DATE（例如：12）
ACC3NROFPROJ（例如：05）
ACC4USER（例如：JD）

让我解释。
这些是会计代码的示例：
IVMA-12-01-JD
IVMA-12-02-RP
IVMA-12-03-WD
IVMA-12-04-JD

ACC1CUST 填充了 [CUSTOMER] 的 NAMECODE。
ACC2DATE 是用户制作 [ACCOUNTINGCOE] 年份的 2 个结束编号。
ACC3NROFPROJ 是同一[CUSTOMER]在同一年的项目数。所以 ACC1CUST、ACC2DATE 和 ACC3NROFPROJ 相互依赖。
ACC4USER 是 [EXECUTOR] 的 NAMECODE，所以这在这里并不重要。

我做了一个生成器查询。此生成器在他在 [会计代码] 中拥有的 MAX 个项目上计数 +1。但我的代码不取决于年份（ACC2DATE）。因此，如果我已经拥有 IVMA-12-01-JD 并且接下来放置 IVMA-13，它将不会从 01 重新开始，而是从 02 继续。当然，因为我的代码正在检查 ACC1CUST 的项目数量。

我的查询是：

```
$projectcount="
SELECT accountingcode.custid, customer.custid, MAX(acc3nrofproj) as 'projects'
FROM accountingcode, customer
WHERE accountingcode.custid= customer.custid
AND customer.custid = '$custid'
";

$result3=mysql_query($projectcount) or die("query fout " . mysql_error() );
while( $record3=mysql_fetch_array($result3) )
{
$projectcount=$record3['projects'];
$projectcount = $projectcount+1;
$format = '%1$03s';
$formatprojectcount = sprintf($format, $projectcount);
} 
```

但是，如果您开始一个在 ACC2DATE 中不存在的新的一年，这并没有什么不同。

任何人都知道我怎样才能做到这一点？

非常感谢您提前！

找到了

```
 $projectcount="
      SELECT accountingcode.custid, accountingcode.acc2date, MAX(acc3nrofproj) as 'projects'
      FROM accountingcode, customer
      WHERE accountingcode.custid= customer.custid
      AND customer.custid = '$custid'
      AND acc2date = '$formatdatefrom'
      ";

    $result3=mysql_query($projectcount) or die("query fout " . mysql_error() );
    while( $record3=mysql_fetch_array($result3) )
    {
        $projectcount=$record3['projects'];
        $projectcount = $projectcount+1;
        $format = '%1$03s';
        $formatprojectcount = sprintf($format, $projectcount);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:13:23.050

```
for($i = $startYear/*03, Let's say.*/; i <= $endYear /*12?*/; i++)
{

    $projectcount="SELECT accountingcode.custid, customer.custid, MAX(acc3nrofproj) as 'projects'
      FROM accountingcode, customer
      WHERE accountingcode.custid= customer.custid
      AND customer.custid = '$custid'
      AND ACC2DATE = $i";

    $result3=mysql_query($projectcount) or die("query fout " . mysql_error() );
    while( $record3=mysql_fetch_array($result3) )
    {
        $projectcount=$record3['projects'];
        $projectcount = $projectcount+1;
        $format = '%1$03s';
        $formatprojectcount = sprintf($format, $projectcount);
    }
} 
```

在从 baseYear 到最后一年的 for 循环中使用上述查询。

# post - 将 DropDownList 值发布到 MVC 控制器

> ID：12728602
> 
> 赞同：0
> 
> 时间：2012-10-04T13:41:50.697
> 
> 标签：post, asp.net-mvc-4, viewmodel, html-select, selectlistitem

我正在尝试从 DropDownList 获取信息并将 SelectListItem“值”发布到控制器中的另一个 ActionResult 方法。它将被传递给的控制器将采用一个整数值并在另一个查询中使用它。

我用于填充 DropDownList 的控制器方法如下：

```
public ActionResult SelectCategory()
{
    var model = new TestTypesViewModel();

    var query = (from ab in db.Tbl_Admin_Batch
                 from ub in db.Tbl_Admin_User_Batch
                 where ub.User_Id == 45875 && ab.Batch_Id == ub.Batch_Id
                select ab).ToList();

    model.Test_Types = query.Select(c => new SelectListItem
        {
            Text = c.Batch_Name,
            Value = c.Batch_Id.ToString()
        }).ToList();

   return View(model); 
```

我的 TestTypesViewModel 的 ViewModel 如下：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;

namespace HFI_Assessment_Administration.ViewModels
{
    public class TestTypesViewModel
    {
        public int Batch_ID { get; set; }
        public string Test_Type { get; set; }

        public IEnumerable<SelectListItem> Test_Types { get; set; }
    }
} 
```

我是 MVC 的新手，并试图保持简单，我知道 Batch_ID 和 Test_Type 尚未指定，但我不确定此时它们是否有必要。

任何建议或帮助将不胜感激，非常感谢！

**编辑：**

我现在有一个 SelectCategory 的视图，如下所示：

```
@model HFI_Assessment_Administration.ViewModels.TestTypesViewModel

@{
    ViewBag.Title = "SelectCategory";
}

@using (Html.BeginForm("Practice", "WebFormUserList"))
{
    @Html.DropDownListFor(x => x.Batch_ID, Model.Test_Types)
    <input type="submit" />
} 
```

它被传递给的控制器如下：

```
[HttpPost]
public ActionResult Practice(TestTypesViewModel model, int Parent_ID = 45875)
{
    var query = (from u in db.Users
                 join ur in db.User_Relationship on u.User_ID equals ur.Child_ID
                 join ub in db.Tbl_Admin_User_Batch on u.User_ID equals ub.User_Id

                 join ut in db.User_Tests on u.User_ID equals ut.User_ID into ps
                 from ut in ps.DefaultIfEmpty()

                 join lu in db.Lookups on u.First_LanguageID equals lu.LookupID

                 where ur.Parent_ID == Parent_ID && ub.Batch_Id == model.Batch_ID

                 group new { u, lu, ut } by new
                 {
                     u.User_ID,
                     u.Forename,
                     u.Surname,
                     u.Client_Code,
                     u.User_Name,
                     u.Password,
                     u.Email,
                     u.Gender,
                     u.Report_date,
                     u.EmailDate,
                     u.Job_Function,
                     lu.LookupValue
                 } into g

                 select new UserViewModel
                    {
                         User_ID = g.Key.User_ID,
                         Forename = g.Key.Forename,
                         Surname = g.Key.Surname,
                         Client_Code = g.Key.Client_Code,
                         User_Name = g.Key.User_Name,
                         Password = g.Key.Password,
                         Email = g.Key.Email,
                         Gender = g.Key.Gender,
                         Report_Date = g.Key.Report_date,
                         Email_Date = g.Key.EmailDate,
                         Test_Count = g.Count(p => p.ut.Test_ID != null),
                         Test_Completed = g.Count(p => p.ut.Completed != null),
                         Job_Function = g.Key.Job_Function,
                         Lookup_Value = g.Key.LookupValue
                     }).ToList();

        return View(query);
    } 
```

实践观如下：

```
@model IEnumerable<HFI_Assessment_Administration.ViewModels.UserViewModel>

@{
    ViewBag.Title = "ChildUsers";
}

<h2>Practice</h2>

<div>
    @{
        var grid = new WebGrid(Model);
    }

    @grid.GetHtml(

    tableStyle: "webgrid",
    headerStyle: "webgrid-header",
    footerStyle: "webgrid-footer",
    alternatingRowStyle: "webgrid-alternating-row",  
    selectedRowStyle: "webgrid-selected-row",
    rowStyle: "webgrid-row-style",

    columns: grid.Columns
    (
        grid.Column(columnName:"User_ID", header: "User ID", style: "text-align-center"),
        grid.Column(columnName:"Forename", header: "Forename", style: "text-align-center"),
        grid.Column(columnName:"Surname", header: "Surname", style: "text-align-center"),
        grid.Column(columnName:"Client_Code", header: "Client Code", style: "text-align-center"),
        grid.Column(columnName:"User_Name", header: "User Name", style: "text-align-center"),
        grid.Column(columnName:"Password", header: "Password", style: "text-align-center"),
        grid.Column(columnName:"Email", header: "Email", style: "text-align-center"),
        grid.Column(columnName:"Gender", header: "Gender", style: "text-align-center"),
        grid.Column(columnName:"Report_Date", header: "Report Date", style: "text-align-center"),
        grid.Column(columnName:"Email_Date", header: "Email Date", style: "text-align-center"),
        grid.Column(columnName:"Test_Count", header: "Count", style: "text-align-center"),
        grid.Column(columnName:"Test_Completed", header: "Completed", style: "text-align-center"),
        grid.Column(columnName:"Job_Function", header: "Job Function", style: "text-align-center"),
        grid.Column(columnName:"Lookup_Value", header: "Language", style: "text-align-center")
        )          
    )
</div> 
```

一切都很好，直到我尝试转到网格的下一页或尝试对网格进行排序。在我得到错误的地方，“/”应用程序中的服务器错误。无法找到该资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:51:17.837

有很多方法可以实现这一目标。您可以使用标准`<form>`标签或使用 AJAX 发送值。

我们来看第一个案例：

```
@model TestTypesViewModel
@using (Html.BeginForm("SomeAction", "SomeController"))
{
    @Html.DropDownListFor(x => x.Test_Type, Model.Test_Types)
    <button type="submit">OK</button>
} 
```

现在在您的目标操作中：

```
[HttpPost]
public ActionResult SomeAction(TestTypesViewModel model) 
{
    // model.Test_Type will contain the selected value here

    // Notice that if you intend to return the same view as the GET action 
    // (SelectCategory.cshtml) you should assign the Test_Types property on
    // your model by querying your database the same way you did in the GET action
    // before passing this model to the view. If on the other hand you intend to
    // redirect here you don't need to assign it.
} 
```

第二种可能性是使用 AJAX。因此，例如，您可以为您的下拉列表提供一个 id 并有一些链接，单击该链接将调用目标控制器操作，使用 AJAX 向其发送选定的值：

```
@Html.DropDownListFor(x => x.Test_Type, Model.Test_Types, new { id = "testTypeDdl" })
@Html.ActionLink("click me", "SomeAction", null, new { id = "myLink" }) 
```

然后当单击某个按钮或链接时使用`$.ajax`请求：

```
$(function() {
    $('#myLink').click(function() {
        $.ajax({
            url: this.href,
            type: 'GET',
            cache: false,
            data: { selectedValue: $('#testTypeDdl').val() },
            success: function(result) {
                alert('The value was submitted to the server');
            }
        });
        return false;
    });
}); 
```

现在您的控制器操作可能具有以下签名：

```
public ActionResult SomeAction(string selectedValue)
{
    // Process the selected value here and return some result.
    // This result could either be a PartialView or a JsonResult
    // depending on your requirements.
} 
```

# cocoa - 当鼠标靠近窗口边缘时如何自动滚动

> ID：12728604
> 
> 赞同：0
> 
> 时间：2012-10-04T13:41:57.867
> 
> 标签：cocoa, autoscroll

我有一个（大）NSImageView 嵌入在一个（较小的）NSScrollView 中。如果鼠标靠近窗口边缘，我想自动滚动，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:02:02.583

您可以创建一个 NSTrackingArea 以在鼠标进入视图的特定区域时收到通知，然后使用 NSResponder 的 scroll.. 例程之一来滚动视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-06-29T05:23:15.803

[Cocoa 有一个名为NSView.autoscroll(with:)](https://developer.apple.com/documentation/appkit/nsview/1483471-autoscroll)的内置方法，当跟踪鼠标事件并且光标位于滚动视图的剪辑视图之外时，它将自动滚动封闭的滚动视图。

# export - 如何在一个节点上的 cassandra 中将数据从一个键空间导出到另一个键空间？

> ID：12728608
> 
> 赞同：0
> 
> 时间：2012-10-04T13:42:08.187
> 
> 标签：export, backup, cassandra

我有用于开发项目的键空间，我需要将数据从它导出到另一个用于生产项目的键空间。两个键空间都在一个集群上。我怎样才能做到这一点？

# c# - 存储过程 - INSERT 查询不起作用

> ID：12728610
> 
> 赞同：2
> 
> 时间：2012-10-04T13:42:10.707
> 
> 标签：c#, asp.net, wpf

我正在使用 WPF (C#) 编写音乐播放器应用程序。作为其功能的一部分，我正在填充一个音乐库，其中我将标题和路径存储到一个 mp3 文件。用户可以为他的音乐库选择一个根文件夹，然后将内容填充到“歌曲”表中。这是我写的代码：

```
private void Populate_Click(object sender, RoutedEventArgs e)
{
    // Folder browser
    FolderBrowserDialog dlg = new FolderBrowserDialog();            
    dlg.ShowDialog();            
    string DirectoryPath = System.IO.Path.GetDirectoryName(dlg.SelectedPath);

    // Get the data directory
    string[] A = Directory.GetFiles(DirectoryPath, "*.mp3", SearchOption.AllDirectories);
    string[] fName = new string[A.Count()];

    // Initialize connection
    string connstr = "Data Source=.\\SQLEXPRESS;AttachDbFilename=|DataDirectory|\\Database.mdf;Integrated Security=True;User Instance=True";
    SqlConnection conn = new SqlConnection(connstr);
    conn.Open();

    // Create the SqlCommand
    SqlCommand cmd = new SqlCommand();
    cmd.Connection = conn;
    cmd.CommandType = CommandType.StoredProcedure;
    cmd.CommandText = "InsertSongs";

    // Create the parameters and execute the command
    for (int i = 0; i < A.Count(); i++)
    {
        fName[i] = System.IO.Path.GetFileName(A[i]);

        cmd.Parameters.AddWithValue("@Title", fName[i]);
        cmd.Parameters.AddWithValue("@Path", A[i]);

        try
        {
            cmd.ExecuteNonQuery();
        }
        catch (Exception ex)
        {
            System.Windows.MessageBox.Show("Error: " + ex.Message);
        }
        finally
        {
            listBox1.Items.Add(A[i]);
            listBox2.Items.Add(fName[i]);
            cmd.Parameters.Clear();
        }
    }

    // Close the connection
    cmd.Dispose();
    conn.Close();
    conn.Dispose();
} 
```

存储过程的代码很简单 -

```
ALTER PROCEDURE dbo.InsertSongs
(
    @Title nvarchar(50),
    @Path nvarchar(50)
)
AS
    INSERT INTO Songs(Title, Path) VALUES(@Title, @Path) 
```

现在，当我执行程序时，没有抛出错误消息（文件名和目录名的大小小于 50）。但是，在执行结束时，不会在 Songs 表中插入任何值。

歌曲表描述如下：

```
身份证号码
标题 nvarchar(50)
路径 nvarchar(50)

```

我不确定我哪里出错了：我也尝试过使用 SqlParameter，然后将参数类型定义为大小为 50 的 NVARCHAR，但无济于事。我可以请你在这里帮助我吗？提前谢谢了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:56:00.387

整个*用户实例和`AttachDbFileName=`*方法是有缺陷的——充其量！Visual Studio 将在`.mdf`文件周围进行复制，并且**很可能**，您的`INSERT`工作正常 - 但您最终只是查看了**错误的 .mdf 文件**！

如果您想坚持使用这种方法，请尝试在`myConnection.Close()`调用上设置断点 - 然后`.mdf`使用 SQL Server Mgmt Studio Express 检查文件 - 我几乎可以肯定您的数据在那里。

**我认为真正的解决**方案是

1.  安装 SQL Server Express（反正你已经完成了）

2.  安装 SQL Server Management Studio Express

3.  **在SSMS Express**中创建您的数据库，给它一个逻辑名称（例如`SongsDatabase`）

4.  使用它的逻辑**数据库名称**（在服务器上创建它时给出）连接到它——不要乱用物理数据库文件和用户实例。在这种情况下，您的连接字符串将类似于：

    ```
    Data Source=.\\SQLEXPRESS;Database=SongsDatabase;Integrated Security=True 
    ```

    其他一切都和以前**完全**一样...

# php - plupload - 如何设置文件上传到哪里？

> ID：12728611
> 
> 赞同：2
> 
> 时间：2012-10-04T13:42:13.250
> 
> 标签：php, file-upload, plupload

我刚刚将最新版本的 plupload 安装到我的本地测试 PHP 服务器上，运行 HTML5 上传器。一切似乎都正常，但是我无法确定文件上传到哪里（以及如何将其更改为我想要设置的目录）。

这是文件 - [http://jsfiddle.net/SQ9aB/](http://jsfiddle.net/SQ9aB/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:43:59.440

url 位于配置对象的属性“url”中。

```
$("#html5_uploader").pluploadQueue({
    // General settings
    runtimes : 'html5',
    url : 'upload.php',
    max_file_size : '10mb',
    chunk_size : '1mb',
    unique_names : true,
.... 
```

在这种情况下要上传.php

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-17T14:13:44.960

在`upload.php`新版本的 Plupload 的文件中，它应该有一行注释掉，如下所示：

`// $targetDir = 'uploads';`

只需删除`//`并保存文件（当然，您需要`uploads`在示例文件夹中创建名为的目录。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T15:46:06.403

设法在 $targetDir var 中使用以下内容来使其正常工作.. 希望我能节省一次查看相同问题的人

`$targetDir = realpath(getenv("DOCUMENT_ROOT")) . '\uploads';`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T13:49:23.297

对于等式的另一端（在文件上传后更改文件所在的位置）并假设您使用的是 plupload 提供的示例，打开`upload.php`并更改此行：

```
$targetDir = ini_get("upload_tmp_dir") . DIRECTORY_SEPARATOR . "plupload"; 
```

它应该位于`header()`调用下方文件的顶部，但这将改变文件上传后的去向。

文件底部也有这部分（这很奇怪，因为*通常*PHP 文件使用`move_uploaded_file`而不是读取 from `php://input`，排序到`.part`文件和`fread`/ `fwrite`ing 内容）：

```
// Check if file has been uploaded
if (!$chunks || $chunk == $chunks - 1) {
    // Strip the temp .part suffix off 
    rename("{$filePath}.part", $filePath);
} 
```

看起来它尽可能地从流中取出所有内容，创建一个“.part”文件来存储它（对于不完整的上传，我猜？）然后在当前目录中重命名它。再一次，很奇怪，但我猜对每个人来说都是他/她自己的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-09-22T06:27:38.987

对于 laravel（或任何类似的 MVC 框架）：

`url : /to-your-route`

在您的控制器中

```
$foldername = "yourFolderName";
$filename = $request->name;

    return Plupload::receive('file', function ($file) use ($foldername,$filename)
    {

        $file->move(public_path().DIRECTORY_SEPARATOR.$foldername.DIRECTORY_SEPARATOR, $filename);
        return ['result'=>'result','filename'=>$filename];

    }); 
```

# c++ - 如何将“Alt+space”热键绑定到 Qt 中的插槽？

> ID：12728628
> 
> 赞同：1
> 
> 时间：2012-10-04T13:43:14.650
> 
> 标签：c++, qt

我正在尝试在此热键上绑定一些“动作”（连接到插槽）`Qt::ALT + Qt::Key_Space`但没有成功（（（（（。

其他组合无需额外努力即可正常工作。例如`Qt::ALT+Qt::Key_Return`.

```
<!-- language: lang-cpp --> 
QShortcut* ptrHotKey = new QShortcut(QKeySequence(Qt::ALT + Qt::Key_Return), this);
connect(ptrHotKey, SIGNAL(activated()), this, SLOT(testSlot())); 
```

尝试捕捉`keyPressEvent`失败；他们甚至不通过那个处理程序。

在 Windows 系统上，它们默认调用系统菜单`"Restore", "Move", "Size", "Minimize", "Maximize", "Close"`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:46:12.677

如果您的桌面环境的窗口管理器使用该快捷方式做某事，Qt 甚至不会收到该事件。正如 David Heffernan 所指出的，您应该能够通过您的 DE API 访问它。

# ruby-on-rails - 如何仅在 Rails 的一页上更改 flash[:notice] 位置？

> ID：12728632
> 
> 赞同：0
> 
> 时间：2012-10-04T13:43:19.397
> 
> 标签：ruby-on-rails, notice

我需要将我所有的 Flash 通知放在标题下方，除了一页。

只有在一页上，我应该以不同的方式放置它。

**编辑**

我在我的动作中添加了，我想在这行中使用另一个布局：

```
 render :layout => 'show' 
```

现在，当我要显示页面时，它给了我：

```
 undefined method `url' for nil:NilClass 
```

但没有呈现这个布局 - 没有错误。

**编辑**

在 Rails 中可以吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T16:25:25.597

在我的脑海中，你可以在视图中检查当前的控制器#action，看看我们的 flash 消息是否需要移动。

Rails 将这些参数传递给每个视图（例如：如果我们在 的`show`操作中`UsersController`）：

```
params[:controller] #=> users
params[:action]     #=> show 
```

我们可以添加一个助手来简化视图中的条件：

```
# file: app/helpers/application_helper.rb
def move_flash_messages?
  params[:controller] == "users" && params[:action] == "show"
end 
```

然后在我们的布局中做这个简单的检查：

```
# file: app/views/layouts/application.html.haml
- unless move_flash_messages?
  = flash_messages
...
- if move_flash_messages?
  = flash_messages 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-30T13:08:40.130

这很容易在任何地方显示 Flash 消息

```
 <% flash.each do |name, msg| %>
    <%= content_tag :div, msg, class: "flash notice" , id:"flash_notice" %>
  <% end %> 
```

这是用于 Flash 消息的 css

```
div.flash.notice {
  background: url(../images/true.png) 8px 5px no-repeat;
  background-color: #dfffdf;
  border-color: #9fcf9f;
  color: #005f00;
} 
```

# sass - Sass 中的字符串替换

> ID：12728634
> 
> 赞同：20
> 
> 时间：2012-10-04T13:43:23.090
> 
> 标签：sass

萨斯 3.2.1

如何在字符串中替换部分文本？例如，从颜色#fefefe 中删除一个破折号#，成为fefefe。

谢谢！

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2016-02-19T13:01:34.713

这是我刚刚使用的一个功能！

**SCSS-FUNCTION**

```
/// Replace `$search` with `$replace` in `$string`
/// @author Hugo Giraudel
/// @param {String} $string - Initial string
/// @param {String} $search - Substring to replace
/// @param {String} $replace ('') - New value
/// @return {String} - Updated string
@function str-replace($string, $search, $replace: '') {
  $index: str-index($string, $search);

  @if $index {
    @return str-slice($string, 1, $index - 1) + $replace + str-replace(str-slice($string, $index + str-length($search)), $search, $replace);
  }

  @return $string;
} 
```

**SCSS 用法：**

```
.selector {
  $string: 'The answer to life the universe and everything is 42.';
  content: str-replace($string, 'e', 'xoxo');
} 
```

**SCSS-结果：**

```
.selector {
  content: "Thxoxo answxoxor to lifxoxo thxoxo univxoxorsxoxo and xoxovxoxorything is 42.";
} 
```

[SCSS 示例的来源](https://css-tricks.com/snippets/sass/str-replace-function/)

**我使用带有缩进样式的 SASS**，所以这是我的转换，以获取在背景中用 data:href 内联编码的 css svg-image 替换的颜色变量。# 需要进行 url 编码，我使用全局颜色，只需要在一个地方替换就可以了！

**SASS 功能：**

```
@function str-replace($string, $search, $replace: '')
  $index: str-index($string, $search)
  @if $index
    @return str-slice($string, 1, $index - 1) + $replace + str-replace(str-slice($string, $index + str-length($search)), $search, $replace)
  @return $string 
```

**SASS 用法：**

```
$color-blue-night: #172b47    
$icon-normal: str-replace('' + $color-blue-night, '#', '') 
```

或举个明显的例子

```
 .test
     color: str-replace('' + $color-blue-night, '#', '') 
```

**SASS结果：**

```
.test {
  color: "172b47"; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T15:06:20.870

简单的临时解决方案（以我的 Mac 为例）：

```
$ git clone -b string_functions https://github.com/chriseppstein/sass
$ cd sass
$ sudo rake install

$ sudo mv /usr/bin/sass /usr/bin/sass.orig
$ sudo ln -s /Library/Ruby/Gems/1.8/gems/sass-3.2.0.alpha.0/bin/sass /usr/bin/sass 
```

# css - 第一个元素的边距底部为 10px，第二个元素的边距顶部为 10px，这个边距顶部只有在我设置的值大于边距底部时才有效，为什么？

> ID：12728636
> 
> 赞同：0
> 
> 时间：2012-10-04T13:43:32.780
> 
> 标签：css

我不知道，但 li 元素 margin-top 只有在大于 h2 元素的 margin-bottom 时才有效，我想知道为什么？

```
<h2 style="padding:0px; margin:0; height:30px; line-height:30px; background-color:#FF0000; font-size:18px; font-family:Arial; margin-bottom:10px;">Test1</h2>
<ul style="list-style:none; padding:0; margin:0;">
<li style="height:50px; line-height:50px; background-color:#00FF00; font-size:12px; font-family:Arial; margin-top:10px;">Test2</li>
</ul> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:46:36.520

你所描述的听起来很像**折叠边距**。

我建议查看[http://reference.sitepoint.com/css/collapsingmargins](http://reference.sitepoint.com/css/collapsingmargins)，因为该问题已详细介绍以及解决方法。

# c# - 如何在不提交和重新查询的情况下获得记录的 ID？

> ID：12728643
> 
> 赞同：0
> 
> 时间：2012-10-04T13:43:57.570
> 
> 标签：c#, sql, linq-to-sql, auto-increment, insertonsubmit

我有一个设置为自动递增的 ID（显然是 int）。

```
var dc = new DataContext([STRING]);

var usersTable = dc.GetTable<Audit_User>();

var user = usersTable.FirstOrDefault(o => o.Username.Equals("NAME"));

if (user == null)
{
   user = new Audit_User()
   {
      Username = "NAME"
   };

   usersTable.InsertOnSubmit(user);
}

//HERE - I need access to the user Id

dc.SubmitChanges(); 
```

有关更多上下文，请参阅标签。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T20:09:52.510

> //这里 - 我需要访问用户 ID

其实你**没有**。如果您始终使用 linq-2-sql，则可以分配用户**实体**而不是设置 user.id 来填充关系（最可能的原因是您需要 ID）。

所以而不是做

```
somerelated_table.fk_user_id = user.id 
```

你做

```
somerelated_table.user = user 
```

当您调用 SubmitChanges 时，Linq-2-sql 将处理 user.id 的正确分配。另外，作为奖励，这一切都将在一次交易中完成。这就是 linq-2-sql 的美妙之处。

如果您在**不**使用 linq-2-sql 的情况下需要 Id 进行某些操作，您可以在 submitchanges 之后无论如何都可以这样做，无论如何都没关系

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:47:46.060

在将数据提交到 SQL Server 之前，您无法获取 ID，因为它是在服务器端生成的。如果您非常需要这样做，我建议在客户端生成 ID（这可能会很痛苦）。

另一个问题是为什么你需要在插入一行之前访问那个ID，在大多数情况下这可能是对linq2sql如何工作的误解。

有时在数据库中没有为表设置外键。要在引用的表中插入 ID，只需在插入后立即从 yourEntity.ID 中获取它，它应该由系统填充。不要忘记再次提交更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:54:30.067

好吧，在您的代码中，`user.ID`包括用户 ID（如果它以前存在，当然如果它是新的）。我不确定，但我认为 SubmitChanges 还会自动查询新记录的新 ID 并自动填充现有的对象标识属性，因此在您的情况下，**如果您使用 user.ID 之后使用它，则不会花费额外的查询SubmitChanges**（如果它是新记录并且您没有调用 SubmitChanges，它将为 0）

但是，如果您想在调用 SubmitChanges 之前使用 id，在将其添加到数据库之前定义“ID”的最佳方法是将 ID 设为数据库上的唯一标识符 (System.Guid)，然后简单地将其插入GUID 已在 INSERT 语句中定义。

请注意插入可能会失败，在这种情况下，您必须确保如果出现问题，您在假设与您使用的 Guid 具有相同 ID 的用户存在时所做的任何事情都将被回滚。

# jquery - slideToggle 切换两次

> ID：12728646
> 
> 赞同：0
> 
> 时间：2012-10-04T13:44:01.007
> 
> 标签：jquery, toggle, slidetoggle

我坐在这里有一个奇怪的问题。突然间，slideToggle 开始为我切换两次。

这是代码：

```
$("div.comment_container").children("p").click(function() {
        $(this).parent().find("div.comment_box").slideToggle();
    }); 
```

和html：

```
<div class="comment_container">
    <p>link</p>

            <div class="comment_box">
        <p class="comment_header"><?php echo $result2->author; ?></p>
            <p class="comment_content"><?php echo $result2->content; ?></p>
            <p class="comment_footer"><?php echo $result2->timestamp; ?></p>
        </div>

    </div> 
```

Div 是相对显示的。任何想法这里有什么问题？

# cakephp - 通过函数 CakePHP 使用计算字段对高级搜索进行分页、过滤和排序

> ID：12728647
> 
> 赞同：0
> 
> 时间：2012-10-04T13:44:01.623
> 
> 标签：cakephp, pagination, cakephp-2.1

我正在寻找更好的解决方案来解决此类问题。我需要对具有许多搜索选项的公寓进行高级搜索：关键字、类别、日期从、日期到、价格范围（最低价格、最高价格）和其他字段......如果您选择两个日期，我会计算每间公寓的租金。要计算价格，我不能使用 virtualField 或一个或多个子查询，但我必须使用模型 Apartment 的函数，因为它执行许多计算......

所以我决定使用 afterFind 回调来计算租金价格，并在查询结果数组中添加一个“列”rental_price：

```
public function afterFind($results, $primary){
   if($this->dateFrom && $this->dateTo){
      foreach ($results as $key => $val) {
         if(isset($val['Apartment']['id'])){
            $results[$key]['Apartment']['rental_price'] = $this->calculateRentalPrice($val['Apartment']['id'], $this->dateFrom, $this->dateTo);
         }
      }
   }
   return $results;
} 
```

在控制器上：

```
$this->paginate = array( ... ); // Array with the query
$apartments = $this->paginate('Apartment');

// EDIT
foreach ($apartments as $key => &$apartment) {
   if($apartment['Apartment']['rental_price'] < $priceMin || $apartment['Apartment']['rental_price'] > $priceMax){
      unset($apartments[$key]);
   }
}
$this->set('apartments', $apartments); 
```

问题是现在我想用最低价格和最高价格重新过滤数组 $apartments ，但是如果我直接操作 $apartments 我会遇到分页问题。解决这种情况的最佳方法是什么？

```
 // EDIT
   public function calculateRentalPrice($apartmentId, $dateFrom, $dateTo){
      $from = new DateTime($dateFrom);
      $to = new DateTime($dateTo);
      $period = new DatePeriod($from, DateInterval::createFromDateString('1 day'), $to);
      $rentalPrice = 0;
      foreach ($period as $day){
         $date = $day->format("Y-m-d");
         $dailyPrice = $this->ApartmentSeason->getDailyPrice($apartmentId, $date);
         $rentalPrice += $dailyPrice; 
      }
      return $rentalPrice;
   }

   public function getDailyPrice($apartmentId, $date){
      $apartmentSeason = $this->find('first', array(
         'conditions' => array(
            'ApartmentSeason.apartment_id' => $apartmentId,
            "'{$date}' BETWEEN ApartmentSeason.date_from AND ApartmentSeason.date_to", 
            "ApartmentSeason.date_to != " => $date, 
         )
      ));
      $dailyPrice = $apartmentSeason['ApartmentSeason']['price'] / 7;
      return $dailyPrice;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T15:16:30.657

解决此问题的一种方法是为日期范围内的每个价格绑定一个模型，然后将它们汇总在一个虚拟字段中。可能有一种更优雅的方法来解决这个问题，但我想不出不使用过程的方法。这也可以分成可重复使用、可测试的部分。

```
$from = new DateTime($this->dateFrom);
$to = new DateTime($this->dateTo);
$period = new DatePeriod($from, DateInterval::createFromDateString('1 day'), $to);
$i = 0;
$sums = array();
// bind a new model for each "season" price
foreach ($period as $day) {
  $date = $day->format("Y-m-d");
  // create a new alias
  $alias = "ApartmentSeasonPrice$i";
  $params = array(
    'className' => 'ApartmentSeason',
    'foreign_key' => 'apartment_id',
    'conditions' => array(
      "'{$date}' BETWEEN $alias.date_from AND $alias.date_to",
      "$alias.date_to != " => $date
  );
  // attach the model
  $this->Apartment->bindModel(array(
    'hasOne' => array(
      $alias => $params;
    )
  ));
  // save the column we want to sum
  $sums[] = "$alias.price";
}
// total them up in a virtual field
$this->Apartment->virtualFields['rental_price'] = 'COALESCE(SUM('+implode(',', $sums).', 0))';
// paginate
$this->set('apartments', $this->paginate()); 
```

# liferay - 将 Web 表单连接到动态数据列表

> ID：12728650
> 
> 赞同：0
> 
> 时间：2012-10-04T13:44:05.900
> 
> 标签：liferay, liferay-6, dynamic-data-list

我刚开始使用 Liferay，但遇到了问题。我已经设置了一个页面用作博客入口点。我将博客条目添加到页面，但是当我点击“添加博客条目”时，它什么也没做。

这是 Liferay 6.1 的错误吗？我检查了权限并且我有权添加到此（自然，因为我是管理员），所以如果我不能这样做，那么普通用户也将无法做到。

是什么赋予了？

# mysql - 为什么这个带有 NOT IN 语句的 MySQL 查询这么慢？

> ID：12728654
> 
> 赞同：3
> 
> 时间：2012-10-04T13:44:21.157
> 
> 标签：mysql, sql, query-optimization

我有一个包含大量记录的数据库，我想找到没有存储用户项目的用户：

```
select `name`
  from `users`
 where `ID` not in (select distinct `userID` from `userItem`) 
```

这个查询甚至不会在被 MySQL 服务器切断之前完成执行。这里有一些我不知道的巨大效率低下吗？

中有 200,000 条记录`userItem`和 14,000 条记录`users`。

查询解释的结果：

```
1   PRIMARY users   ALL NULL    NULL    NULL    NULL    13369   Using where
2   DEPENDENT SUBQUERY  userItem    index   NULL    userID  8   NULL    189861  Using where; Using index; Using temporary 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T13:51:54.043

1.  userItem.userID 和 user.ID 是否被索引？如果没有，请添加它们。
2.  在 MySQL JOIN 子句中可能会更快。

例如 -

```
SELECT name
  FROM users u
  LEFT JOIN userItem ui
    ON ui.userID = u.ID
  WHERE ui.userID IS NULL 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T14:00:16.063

你的问题是“为什么”它这么慢。原因是 MySQL 为每一行重新执行子查询。你会认为它会执行一次子查询，然后就完成了。但是不，它会重新执行无数次。

我相信最快的替代方法是对@Parado 稍作改动：

```
select `name`
  from `users` u
 where not exists (select 1 from userItem ui where ui.userID = u.id limit 1) 
```

您应该将它与 ui.UserId 上的索引结合使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:47:40.503

也许`not exists`会更快：

```
select `name`
  from `users` u
 where not exists
 (select 1 
  from `userItem` ui 
  where ui.userID=u.id) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T13:54:09.403

为用户（ID）和用户项目创建唯一索引（用户ID）。

```
Ex . SELECT DISTINCT a, b, c FROM t1 WHERE NOT EXISTS (SELECT NULL FROM t2 WHERE t1.a = t2.a AND t1.b = t2.b AND t1.c = t2.c) 
```

即使您只检查一个键，使用 NOT IN 也不是最好的方法。原因是，如果您使用 NOT EXISTS，则 DBMS 只需在所需列存在索引的情况下检查索引，而对于 NOT IN，它将必须读取实际数据并创建随后需要检查的完整结果集.

使用 LEFT JOIN 然后检查 NULL 也是一个坏主意，当表很大时它会非常慢，因为查询需要进行整个连接，完全读取两个表，然后丢弃很多。此外，如果列允许 NULL 值，则检查 NULL 将报告误报。

# ios6 - 苹果 ios 安全框架缺失

> ID：12728657
> 
> 赞同：1
> 
> 时间：2012-10-04T13:44:37.363
> 
> 标签：ios6, xcode4.5

好的，我的构建在 xcode 4.3 中运行良好，我升级到 xcode4.5，现在缺少安全框架。它甚至没有出现在项目设置 > 构建阶段 > 将二进制文件与库链接。

我应该怎么办？

# javascript - JQuery load() 上的错误 80020101

> ID：12728660
> 
> 赞同：1
> 
> 时间：2012-10-04T13:44:42.583
> 
> 标签：javascript, jquery, cross-browser, internet-explorer-7

> **可能重复：**
> [由于错误 80020101 无法完成操作。IE](https://stackoverflow.com/questions/10903989/could-not-complete-the-operation-due-to-error-80020101-ie)

我正在使用 JQuery 1.7.2 在 div 中加载 HTML 文件的内容。它适用于每个浏览器，但我有一个

```
`Could not complete the operation due to error 80020101` 
```

IE7 中的错误。我该如何解决？

# sharepoint - 如何在 Sharepoint 文档库上设置自定义权限并将其导出到模板中？

> ID：12728665
> 
> 赞同：1
> 
> 时间：2012-10-04T13:45:05.510
> 
> 标签：sharepoint, sharepoint-2010

共享点 2010

我有 3 组文档库，其中包含许多按文件夹组织的文档。这个想法是能够为集合中的任何站点实例化这 3 个文档库中的任何一个。这样结构就会在创建时被复制。

问题是库具有一组与父级不同的受限权限（停止继承权限选项）。但是我注意到，当我实例化任何库模板时，都不会保留权限。

有没有办法在模板本身中存储一组特定权限？

例如，这可能是其中一个文档库的结构：

*   文件 1（所有人均可访问）
*   文件 2（所有人均可访问）
*   文件夹 1（所有人都可以访问）
*   >> 文件 3
*   >> 文件 4
*   >> 文件 5
*   文件夹 2（只能由管理组访问）
*   >> 文件 6
*   >> 文件 7

- - - -编辑 - - - - -

我尝试过使用 Powershell cmdlet

导出库：

```
Export-SPWeb -Identity http://server/sites/site1/SampleLibrary -path "sampleLibraryExport.cmp" -IncludeUserSecurity -ItemUrl "3rd Party Engagements" 
```

删除库并重新导入：

```
Import-SPWeb -Identity http://server/sites/site1/SampleLibrary -path "sampleLibraryExport.cmp" -IncludeUserSecurity 
```

但是，自定义权限已消失，现在已设置为农场管理员帐户并跨文件继承

谢谢，

豪梅

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-08T17:00:18.963

要传输具有权限的库并存储用户身份，您可以尝试使用 SharePoint 部署。内部 Import-SPWeb 也使用 SharePoint 部署，但支持不充分。如果您将直接使用 SharePoint 对象模型并编写一些 C# 或 PowerShell，则可以传输具有权限的列表。您可以在[这里](http://khdraft.blogspot.ru/2011/04/sharepoint-content-deployment_10.html)找到一些用于传输 spweb 的示例，也可以找到一些列表代码，请查看 GetExportList 方法。我不是在假装现成的解决方案，但是如果您将查看 SharePoint 内容部署与您的问题，这可能会对您有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-10T14:48:13.193

这是我最后使用的解决方案，它涉及一个自定义 PowerShell 脚本，该脚本循环遍历文件和文件夹并设置单独定义的权限。

[http://codebroth.com/blog/2012/10/copying-sharepoint-2010-document-libraries-wit-powershell/](http://codebroth.com/blog/2012/10/copying-sharepoint-2010-document-libraries-wit-powershell/)

# ruby-on-rails-3 - Rails 中 has_one 关联的问题

> ID：12728671
> 
> 赞同：1
> 
> 时间：2012-10-04T13:45:27.400
> 
> 标签：ruby-on-rails-3, controller, has-one

我已经被这个问题困扰了几个小时，我希望有人能帮我弄清楚为什么这段代码不起作用。

我要做的是创建一个与特定用户关联的帐户。我可以创建一个用户，但是当我去创建帐户时，它看起来不像表单正在发布到我的控制器中的 create 方法（表单数据数组显示附加到我的浏览器栏中的帐户/新） .

这是我的模型：

```
class User < ActiveRecord::Base
  attr_accessible :email_address, :password, :password_confirmation
  has_secure_password
  has_one :account, dependent: :destroy

  before_save {|user| user.email_address = email_address.downcase} 
```

我的帐户模型：

```
class Account < ActiveRecord::Base
  attr_accessible :cell_phone, :first_name, :home_phone, :last_name, :middle_initial, :work_phone
  belongs_to :user
  has_many :addresses
  has_many :orders
  has_many :items

  #strip digits and return string of numbers
  before_save do |account|
    account.cell_phone = cell_phone.gsub(/\D/,'')
    account.home_phone = home_phone.gsub(/\D/,'')
    account.work_phone = work_phone.gsub(/\D/,'')
  end

  before_save do |account|
    account.first_name = first_name.capitalize
    account.last_name  = last_name.capitalize
    account.middle_initial = middle_initial.capitalize
  end 
```

在我的用户控制器中（这工作正常）：

```
def new
    if signed_in?
      @user = current_user
      redirect_to @user
    else
      @user = User.new
    end
  end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      redirect_to new_account_path
    else
      flash[:error] = "Sorry, something went wrong"
      render 'new'
    end
  end 
```

还有我的帐户控制器（我觉得问题出在哪里）：

```
class AccountsController < ApplicationController
  #before_filter :get_current_user
  before_filter :signed_in_user

  def new
    @user = current_user
    @account = @user.build_account(params[:account])
  end

  def create
    @user = current_user
    @account = @user.build_account(params[:account])
    if @account.save
      flash[:success]
      redirect_to user_path(current_user)
    else
      flash[:error]
      redirect_to root_path
    end
  end 
```

我将 current_user 和 sign_in 作为 Helper 文件中的方法。

最后，我的帐户表格

```
<%= form_for(@account) do |form| %>
    <%= render 'shared/user_form_error_messages', object: form.object %>

    <%= form.label :first_name, "First Name" %>
    <%= form.text_field :first_name %>

    <%= form.label :middle_initial, "Middle Initial (optional)" %>
    <%= form.text_field :middle_initial %>

    <%= form.label :last_name, "Last Name" %>
    <%= form.text_field :last_name %>

    <%= form.label :home_phone, "Home Phone" %>
    <%= form.text_field :home_phone %>

    <%= form.label :cell_phone, "Cell Phone" %>
    <%= form.text_field :cell_phone %>

    <%= form.label :work_phone, "Work Phone" %>
    <%= form.text_field :work_phone %>

    <%= form.submit "Complete Account", class:"btn" %>

<% end %> 
```

在此先感谢您的帮助。我一直在谷歌搜索示例，阅读 rdocs 并尝试了很多不同的东西。如果有人能解释为什么我的代码不起作用（而不是只给我答案），我将不胜感激。

在@thesis 请求中，当我在表单上单击“提交”时，这是我的日志的输出：

```
Started GET "/accounts/new?    utf8=%E2%9C%93&authenticity_token=DQ5mOiICI0C83l9xgkSlvToQKyWjE3Adm3X3U0HJ1W4%3D&account%5Bfirst_name%5D=Jesse&account%5Bmiddle_initial%5D=A&account%5Blast_name%5D=Flores&account%5Bhome_phone%5D=555-555-5555&account%5Bcell_phone%5D=&account%5Bwork_phone%5D=&commit=Complete+Account" for 127.0.0.1 at 2012-10-04 16:14:11 -0400
Connecting to database specified by database.yml
Processing by AccountsController#new as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"DQ5mOiICI0C83l9xgkSlvToQKyWjE3Adm3X3U0HJ1W4=", "account"=>{"first_name"=>"Jesse", "middle_initial"=>"A", "last_name"=>"Flores", "home_phone"=>"555-555-5555", "cell_phone"=>"", "work_phone"=>""}, "commit"=>"Complete Account"}
  User Load (1.0ms)  SELECT "users".* FROM "users" WHERE "users"."remember_token" = 'B_E1bsUASQhHC-Zb-6updg' LIMIT 1
  Account Load (0.6ms)  SELECT "accounts".* FROM "accounts" WHERE "accounts"."user_id" = 2 LIMIT 1
   (0.1ms)  begin transaction
   (0.0ms)  commit transaction
  Rendered shared/_user_form_error_messages.html.erb (0.5ms)
  Rendered forms/_form_account.html.erb (5.9ms)
  Rendered accounts/new.html.erb within layouts/application (13.2ms)
  Rendered layouts/_navigation.html.erb (0.4ms)
  Rendered forms/_form_header_signin.html.erb (0.8ms)
  Rendered layouts/_header.html.erb (2.7ms)
  Rendered layouts/_messages.html.erb (0.5ms)
  Rendered layouts/_footer.html.erb (0.3ms)
Completed 200 OK in 279ms (Views: 160.1ms | ActiveRecord: 4.6ms) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T17:14:06.627

对不起，我首先误解了这个问题。但是，您似乎想将现有`user`对象与新的`account`. 这是一个应该对您有所帮助的链接。

**[https://stackoverflow.com/a/11335976/1160106](https://stackoverflow.com/a/11335976/1160106)**

大问题陈述，但清晰而简短的答案。让我知道它是否对您有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:24:53.283

希望这将有助于您在代码中构建嵌套实例。在帐户控制器中，

```
 def new
    @user = current_user
    @account = @user.accounts.build(params[:account])
  end

  def create
    @user = current_user
    @account = @user.accounts.build(params[:account])
    if @account.save
      flash[:success] 
```

# visual-studio-lightswitch - Lightswitch 字段是只读的，尽管它不是在 SQL 中计算或计算的，为什么？

> ID：12728672
> 
> 赞同：1
> 
> 时间：2012-10-04T13:45:28.100
> 
> 标签：visual-studio-lightswitch

Lightswitch 字段是只读的，尽管它不是在 SQL 中计算或计算的，为什么？

我怎样才能破解为什么它是只读的......

# sql - SQL - 使用子查询返回多行

> ID：12728674
> 
> 赞同：0
> 
> 时间：2012-10-04T13:45:28.473
> 
> 标签：sql, join, subquery

我无法完全理解这个问题，所以我需要一些建议。

我有许多产品，我使用单独的表格为其分配了一些关键字。我想遍历这些关键字并生成包含相同关键字的其他产品列表...所以在下面的示例中，我有一个 ID 为 149 的产品，它分配了两个关键字，但是我的 SQL 只会使用一个关键字开发产品。

因此，我无法完全理解的是如何使用这两个关键字生成产品列表。任何帮助都会很棒。

SQL:-

```
 $products_id = $_GET['products_id'];
 $slideQuery = mysql_query("

 select p.products_id, p.products_image, p.products_price, 
 pd.products_name, k2p.key_key_id  

 from products p

 join products_description pd on 
 pd.products_id = p.products_id 

 join products_keyword_to_product k2p on 
 k2p.products_id = p.products_id 

 where k2p.key_key_id = (
      select key_key_id  
  from
  products_keyword_to_product
  where 
  products_id=" . $products_id ."
      )  

  group by p.products_id 
  order by p.products_price desc 
  limit 12 
```

编辑添加：我之前通过使用 php while 循环并在此循环中查询数据库来实现这一点，但我相信必须有更好的方法来做到这一点。

更新：我调查了我从这个问题收到的建议，但我的查询永远无法正常工作。在这一点上，它有点超出我的“工资等级”，所以我选择创建一个链接，将相关 ID 传递到 URL 字符串中并重新加载页面，随着网站的增长，这可能会成为更好的选择. 我认为这里吸取的教训是从你想要实现的目标中退后一步，并确保你正在做的事情是实现它的最佳方式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:51:57.650

尝试使用`IN`而不是`=`

IE：

```
 ....
 where k2p.key_key_id IN ( 
 .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:47:15.990

您需要使用 GROUP BY 和 HAVING 来执行此操作。

```
select p.products_id,
    p.products_image,
    p.products_price,
    pd.products_name,
    k2p.key_key_id
from products p
inner join (
    select products_id
    from products_keyword_to_product
    where key_key_id in (
        select key_key_id
        from products_keyword_to_product
        where products_id = " . $products_id ."
    )
    group by products_id
    having count(distinct key_key_id) = (
        select count(distinct key_key_id)
        from products_keyword_to_product
        where products_id = " . $products_id ."
    )
) pm on p.products_id = pm.products_id
inner join products_keyword_to_product k2p on k2p.products_id = p.products_id
inner join products_description pd on pd.products_id = p.products_id
order by p.products_price desc 
limit 12 
```

# scala - 简化 if (x) Some(y) else None？

> ID：12728678
> 
> 赞同：31
> 
> 时间：2012-10-04T13:45:39.297
> 
> 标签：scala

这种常见的模式感觉有点冗长：

```
if (condition) 
  Some(result)
else None 
```

我正在考虑使用一个函数来简化：

```
def on[A](cond: Boolean)(f: => A) = if (cond) Some(f) else None 
```

这将顶部示例简化为：

```
on (condition) { result } 
```

这样的东西已经存在了吗？或者这是矫枉过正？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-10-04T13:51:43.473

您可以创建第`Option`一个并根据您的条件对其进行过滤：

```
Option(result).filter(condition) 
```

或者如果`condition`不相关`result`

```
Option(result).filter(_ => condition) 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-04T13:56:32.000

[Scalaz](https://github.com/scalaz/scalaz)包含[选项](https://oss.sonatype.org/service/local/repositories/releases/archive/org/scalaz/scalaz_2.11/7.1.1/scalaz_2.11-7.1.1-javadoc.jar/!/index.html#scalaz.std.BooleanFunctions@option[A](cond:Boolean,a:=>A):Option[A])功能：

```
import scalaz.syntax.std.boolean._

true.option("foo") // Some("foo")
false.option("bar") // None 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2018-10-10T19:21:58.190

开始`Scala 2.13`,`Option`现在由执行此操作的[`when`](https://www.scala-lang.org/api/2.13.x/scala/Option$.html#when[A](cond:Boolean)(a:=%3EA):Option[A])构建器提供：

```
Option.when(condition)(result) 
```

例如：

```
Option.when(true)(45)
// Option[Int] = Some(45)
Option.when(false)(45)
// Option[Int] = None 
```

还要注意相反的耦合[`unless`](https://www.scala-lang.org/api/2.13.x/scala/Option$.html#unless[A](cond:Boolean)(a:=%3EA):Option[A])方法。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-04T13:55:38.630

您可以使用`PartialFunction`伴随对象和`condOpt`：

```
PartialFunction.condOpt(condition) {case true => result} 
```

用法：

```
 scala> PartialFunction.condOpt(false) {case true => 42}
 res0: Option[Int] = None

 scala> PartialFunction.condOpt(true) {case true => 42}
 res1: Option[Int] = Some(42) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-04T13:57:38.320

```
import scalaz._, Scalaz._
val r = (1 == 2) ? Some(f) | None
System.out.println("Res = " + r) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2017-08-25T18:44:16.543

这是另一种非常简单的方法：

```
Option(condition).collect{ case true => result } 
```

一个简单的例子：

```
scala> val enable = true
enable: Boolean = true

scala> Option(enable).collect{case true => "Yeah"}
res0: Option[String] = Some(Yeah)

scala> Option(!enable).collect{case true => "Yeah"}
res1: Option[String] = None 
```

这里有一些将条件放入模式匹配的高级非布尔示例：

```
val param = "beta"
Option(param).collect{case "alpha" => "first"} // gives None

Option(param).collect{case "alpha" => "first"
                      case "beta"  => "second"
                      case "gamma" => "third"} // gives Some(second)

val number = 999
Option(number).collect{case 0 => "zero"
                       case x if x > 10 => "too high"} // gives Some(too high) 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2019-11-01T02:11:11.693

与 Scalaz 类似，Typelevel 猫生态系统具有以下鼠标[包](https://github.com/typelevel/mouse)`option`：

```
scala> true.option("Its true!")
res0: Option[String] = Some(Its true!) 
```

# permissions - 这是什么权限？（组+角色）

> ID：12728681
> 
> 赞同：1
> 
> 时间：2012-10-04T13:45:47.130
> 
> 标签：permissions, acl, rbac

我开始需要对我的应用程序中的角色进行访问控制。

我对此了解不多，但我了解 vBulletin 的工作原理：

```
I create groups, then give permissions to groups. 
```

我认为我需要的是角色基础访问控制，但我不确定，因为我需要组来授予权限而不是单个用户（也许实现起来并不复杂）。

我在想的例子：

给定一个帖子：

```
Editor's Group has permission to view it before it's published.
Editor's Group has permission to edit its content.
Public Group (Default) has not permission to view it before it's published.
Admin Group has permission to delete the post. 
```

所以基本上我不想确定 RBAC 是否是我需要的。

而且，将组成员身份存储在用户中会有什么好处，例如，最好有：`ID NAME PASSWORD GROUPS (1, MyName, MyPassword, 1/2/3/4/5)`并通过 PHP 或一个注册表为名为 的表中的每个组成员身份展开它`permissions`，例如：`USERID, USERGROUP values (1, 1), (1, 2)`

由于正式规范，也许应该是第二种方式，但我还没有在大学学习数据库 1。

非常感谢！

# ios - 计数触发方法

> ID：12728684
> 
> 赞同：0
> 
> 时间：2012-10-04T13:46:07.207
> 
> 标签：ios

我有一个下载图像的对象......当完成图像时，调用方法 finishLoad 来保存这个图像......我的 UIViewController 中有这个对象的列表，我想知道这个方法多少次被调用，当这个计数 = 10 时，我将调用另一个方法。我该怎么做？

```
@implementation DownloaderImage
{
    - (void)finishLoad {
//:: hide default image ::
[self setImage:nil];

//:: fade in in loaded picture ::
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:0.5];
CGAffineTransform myTransform = CGAffineTransformMakeTranslation(0, 0);
[finalImage setTransform:myTransform];
finalImage.alpha = 1.0;

UIImage *scaledImage = [finalImage.image scaleToSize:CGSizeMake(320.0f, 345.0f)];
finalImage.image = scaledImage;

//:: fade out background picture ::
[backgroundImage setTransform:myTransform];
backgroundImage.alpha = 0.0;

[UIView commitAnimations];
 }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:55:40.340

您可以使用静态变量：

```
static int myCount = 0;

- (void)finishLoad
{
    // ...
    myCount++;
    if (myCount == 10)
        // call your method
} 
```

# jquery - 我需要使用 jQuery Mobile 还是可以只使用 CSS 和 HTML 设计一个非本地应用程序？

> ID：12728686
> 
> 赞同：1
> 
> 时间：2012-10-04T13:46:08.587
> 
> 标签：jquery, html, css, cordova, jquery-mobile

我正在使用带有一点 jQuery 的 HTML 和 CSS 设计一个应用程序。我一直在使用 jQuery Mobile，但默认的 CSS 会妨碍我。我可以本质上创建一个具有正确尺寸的网站，然后将其变成一个应用程序吗？谢谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T13:53:35.037

jQuery Mobile 适用于移动网站。[它使用渐进式增强功能为您提供大多数移动设备](http://jquerymobile.com/gbs/)的最佳体验。

有必要吗？不，您可以使用其他框架或推出自己的框架。

根据 PhoneGap 评论进行更新 - 您可以使用任何您想要制作网站的 html、javascript 和 css。但是，您可能会发现某些框架在 PhoneGap 的浏览器中的工作比其他框架更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:57:37.207

我一直在使用带有 PhoneGap 的 jQuery Mobile 并且没有遇到任何问题。如果您不喜欢过渡，可以将其关闭。

如果您不希望 JQM 样式影响您的页面，您可以简单地使用仅结构的 css 而不是整个 CSS - [http://code.jquery.com/mobile/1.2.0/jquery.mobile.structure-1.2 .0.css](http://code.jquery.com/mobile/1.2.0/jquery.mobile.structure-1.2.0.css)

对于诸如表单元素之类的东西，您还可以添加`data-role="none"`以防止 JQM 对其进行样式设置，以便您可以添加自己的样式。

但是，是的，如果您真的不喜欢它，您不必使用 JQM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T20:42:19.750

我使用 jQuery Mobile 从头开始​​构建了一个完整的 iOS 应用程序（Apple 于 10/2012 批准）。虽然应用程序本身有一些附加功能，但也可以作为用户浏览器中的 Web 应用程序运行，并且当其他设备（即 Andriod）上的某人访问 URL 时作为移动站点运行。

该应用程序基本上是一个`UIWebView`引入 jQuery Mobile 站点的应用程序。希望能回答您的问题……但如果没有，我可以提供更多详细信息/提示。

# ruby-on-rails - gem配置文件gemrc在ubuntu中的位置？它不在家里（~/.gemrc）或 /etc/gemrc

> ID：12728695
> 
> 赞同：2
> 
> 时间：2012-10-04T13:46:39.493
> 
> 标签：ruby-on-rails, ruby, rubygems

我已经在 ubuntu 12.04 上使用 rvm 安装了 ruby​​ 1.9.3p194。**它不在家里（~/.gemrc）或/etc/gemrc rvm** 是否将 gem 配置文件 gemrc 放在其他地方？

有什么办法可以找出这些文件保存在哪里...通过为 $ gem 命令提供一些选项。实际上，我想在安装任何新 gem 时默认禁用 rdoc 和 ri 安装。为此，我想将 gemrc 文件修改为：

```
安装：--no-rdoc --no-ri
更新：--no-rdoc --no-ri

```

请帮我。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T14:05:06.020

您可以使用 locate 定位 Linux/Ubuntu 系统上的任何文件，例如：

```
locate gemrc 
```

但是你可能还没有。你可以在你的 homedir 中自己创建它（如果你想将它应用到所有用户，甚至 /etc/gemrc。）你是对的，rvm 默认不安装一个（至少它没有在我的系统上。 ) 所以就这样做：

```
vi ~/.gemrc 
```

并插入您在帖子中写的那些行，它应该可以工作。

# c# - 白色 nodata 值而不是黑色

> ID：12728704
> 
> 赞同：0
> 
> 时间：2012-10-04T13:47:07.817
> 
> 标签：c#, image, gis, jpeg, gdal

我有个问题。`gdal_csharp.dll`我使用库在瓷砖上切割了一张地图（处理`gdal_retile.py`重写为的脚本`C#`）。除一种情况外，一切正常。当我切割具有`nodata`值的区域（边框上的图块）并将它们保存为`JPEG`文件时，这些`nodata`区域是黑色的（我需要它们为白色） - 下面包含示例图块。我尝试使用`tBand.SetNoDataValue(0);`但有时黑色`not-nodata`值（例如城市名称、道路名称等）包含白点......

示例瓷砖：[瓷砖 no1](http://s15.postimage.org/eldvuvx9n/qwe_00006_00023.jpg)和[瓷砖 no2](http://s16.postimage.org/bxdtjdb0l/qwe_00001_00001.jpg)

我不知道如何设置`SetNoDataValue(/* what to write in here? */)`......也许还有其他方法可以解决这个问题？

这是我的方法：

```
private void CreatePyramidTile(MosaicInfo levelMosaicInfo, int offsetX, int offsetY, int width, int height, string tileName, DataSource ogrds)
{
    double sx = levelMosaicInfo.ScaleX * _scaleFactor;
    double sy = levelMosaicInfo.ScaleY * _scaleFactor;

    AffineTransformDecorator dec =
        new AffineTransformDecorator(new[]
                                         {
                                             levelMosaicInfo.Ulx + offsetX*sx, sx, 0,
                                             levelMosaicInfo.Uly + offsetY*sy, 0, sy
                                         });

    Dataset sFh = levelMosaicInfo.GetDataSet((int) Math.Round(dec.Ulx),
                                             (int) Math.Round((dec.Uly + height*dec.ScaleY)),
                                             (int) Math.Round((dec.Ulx + width*dec.ScaleX)),
                                             (int) Math.Round(dec.Uly));

    if (sFh == null)
    {
        return;
    }

    if (ogrds != null)
    {
        var points = dec.PointsFor(width, height);
        AddFeature(ogrds, tileName, points);
    }

    DataType bt;
    if (_bandType == DataType.GDT_Unknown)
    {
        bt = levelMosaicInfo.BandType;
    }
    else
    {
        bt = _bandType;
    }

    double[] geotransform = { dec.Ulx, dec.ScaleX, 0, dec.Uly, 0, dec.ScaleY };
    int bands = levelMosaicInfo.Bands;

    Dataset tFh;
    if (_memDriver == null)
    {
        tFh = _driver.Create(tileName, width, height, bands, bt, _createOptions.ToArray());
    }
    else
    {
        tFh = _memDriver.Create(tileName, width, height, bands, bt, _createOptions.ToArray());
    }

    if (tFh == null)
    {
        throw new Exception("Creation failed, terminating gdal_tile.");
    }

    tFh.SetGeoTransform(geotransform);
    tFh.SetProjection(levelMosaicInfo.Projection);
// I think, the problem occurs in this loop; I tried to set nodata values
    for (int band = 1; band < bands + 1; band++)
    {
        Band tBand = tFh.GetRasterBand(band);

        if (levelMosaicInfo.Ct != null)
        {
            tBand.SetRasterColorTable(levelMosaicInfo.Ct);
        }
        tBand.SetRasterColorInterpretation(levelMosaicInfo.Ci[band - 1]);
//                tBand.SetNoDataValue(0);
    }

    var res = Gdal.ReprojectImage(sFh, tFh, null, null, _resamplingMethod, 0, 0, null, null);

    if (res != 0)
    {
        throw new Exception("Reprojection failed for " + tileName + ", error " + res + ".");
    }

    levelMosaicInfo.CloseDataSet(ref sFh);

    if (_memDriver != null)
    {
        Dataset ttFh = _driver.CreateCopy(tileName, tFh, 0, _createOptions.ToArray(), null, null);
        ttFh.Dispose();
    }

    tFh.Dispose();
} 
```

**[编辑]**
还有同样的问题......我改变了循环：

```
for (int band = 1; band < bands + 1; band++)
{
    Band tBand = tFh.GetRasterBand(band);
    tBand.Fill(255, 0);
    tBand.SetNoDataValue(255);

    if (levelMosaicInfo.Ct != null)
    {
        tBand.SetRasterColorTable(levelMosaicInfo.Ct);
    }
    tBand.SetRasterColorInterpretation(levelMosaicInfo.Ci[band - 1]);
} 
```

现在我认为我的问题可以通过我的转换方法出现。我得到的数据是`8-bit`格式的 - 重新投影瓷砖后 90% 被黑色填充。所以首先我将源数据转换为`24-bit`使用`pct2rgb.py`脚本（重写为`C#`）。

这是代码：

```
public Dataset Convert8To24Bit()
{
    Gdal.AllRegister();

    string[] argv = Gdal.GeneralCmdLineProcessor(_args, 0);

    int i = 1;
    while (i < argv.Count())
    {
        string arg = argv.ElementAt(i);
        switch (arg)
        {
            case "-of":
                i++;
                _format = argv[i];
                break;
            case "-b":
                i++;
                _bandNumber = int.Parse(argv[i]);
                break;
            case "-rgba":
                _outBands = 4;
                break;
            default:
                if (string.IsNullOrEmpty(_srcFileName))
                {
                    _srcFileName = argv[i];
                }
                else
                {
                    Usage();
                }
                break;
        }
        i++;
    }

    string tmpFileName = _srcFileName + ".bak";

    // open source file
    Dataset srcDS = Gdal.Open(_srcFileName, Access.GA_ReadOnly);
    if (srcDS == null)
    {
        throw new Exception("Unable to open " + _srcFileName + ".");
    }

    Band srcBand = srcDS.GetRasterBand(_bandNumber);

    // ensure we recognise the driver
    Driver dstDriver = Gdal.GetDriverByName(_format);
    if (dstDriver == null)
    {
        throw new Exception("\"" + _format + "\" not registered.");
    }

    // build color table
    int[][] lookup = new int[4][];
    lookup[0] = Enumerable.Range(0, 256).ToArray();
    lookup[1] = Enumerable.Range(0, 256).ToArray();
    lookup[2] = Enumerable.Range(0, 256).ToArray();
    lookup[3] = new int[256];

    for (i = 0; i < 256; i++)
    {
        lookup[3][i] = 255;
    }

    ColorTable ct = srcBand.GetRasterColorTable();

    if (ct != null)
    {
        for (i = 0; i < Math.Min(256, ct.GetCount()); i++)
        {
            ColorEntry entry = ct.GetColorEntry(i);
            for (int j = 0; j < 4; j++)
            {
                switch (j)
                {
                    case 0:
                        lookup[j][i] = entry.c1;
                        break;
                    case 1:
                        lookup[j][i] = entry.c2;
                        break;
                    case 2:
                        lookup[j][i] = entry.c3;
                        break;
                    case 3:
                        lookup[j][i] = entry.c4;
                        break;
                }
            }
        }
    }
    else
    {
        return srcDS;
    }

    // create the working file
    string tifFileName = string.Empty;
    if (_format.Equals("GTiff", StringComparison.OrdinalIgnoreCase))
    {
        tifFileName = tmpFileName;
    }
    else
    {
        tifFileName = Path.Combine(Directory.GetParent(tmpFileName).Name, "temp.gif");
    }

//            Driver gTiffDriver = Gdal.GetDriverByName("GTiff");
    Driver gTiffDriver = Gdal.GetDriverByName("MEM");

    Dataset tifDS = gTiffDriver.Create(tifFileName, srcDS.RasterXSize, srcDS.RasterYSize, _outBands, DataType.GDT_Byte,
                                       new string[] {});

    // we should copy projection information and so forth at this point
    tifDS.SetProjection(srcDS.GetProjection());
    double[] geotransform = new double[6];
    srcDS.GetGeoTransform(geotransform);
    tifDS.SetGeoTransform(geotransform);

    if (srcDS.GetGCPCount() > 0)
    {
        tifDS.SetGCPs(srcDS.GetGCPs(), srcDS.GetGCPProjection());
    }

    // do the processing one scanline at a time
    for (int iY = 0; iY < srcDS.RasterYSize; iY++)
    {
        byte[] srcData = new byte[srcDS.RasterXSize*1];
        srcBand.ReadRaster(0, iY, srcDS.RasterXSize, 1, srcData, srcDS.RasterXSize, 1, 0, 0);

        for (int iBand = 0; iBand < _outBands; iBand++)
        {
            int[] bandLookup = lookup[iBand];

            int[] dstData = new int[srcData.Count()];
            for (int index = 0; index < srcData.Count(); index++)
            {
                byte b = srcData[index];
                dstData[index] = bandLookup[b];
            }

            tifDS.GetRasterBand(iBand + 1).WriteRaster(0, iY, srcDS.RasterXSize, 1, dstData,
                                                       srcDS.RasterXSize, 1, 0, 0);
        }
    }

//            if (tifFileName != _srcFileName)
//            {
//                tifDS = Gdal.Open(tifFileName, Access.GA_ReadOnly);
//                dstDriver.CreateCopy(_srcFileName, tifDS, 0, new string[] { }, null, null);;
//            }

    srcDS.Dispose();

    return tifDS;
} 
```

整个类：[GdalRetile.cs](http://pastebin.com/N5wWDZnV)和[TiffConverter.cs](http://pastebin.com/8u1nYfHh)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-07T20:43:06.860

对于栅格，NoData 并不总是受到尊重。JPEG 不尊重大多数软件上的 NoData 元数据。因此，如果您的 NoData 为“0”，则可以将其解释为黑色的像素值。默认情况下，栅格填充为 0 或黑色。您只需重新定义 NoData 是什么。如果你希望它是白色的并且你的像素类型是字节，那么它应该是 255。

作为建议，在创建数据集之后和加载数据之前，试试这个：

```
...
    Band tBand = tFh.GetRasterBand(band);
    tBand.Fill(255); // otherwise it is filled with 0
    tBand.SetNoDataValue(255); // set metadata
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T11:12:37.920

好的，我找到了解决方案！我只是`TEMP`用白色填充了我的图像，这是结果图块的背景。

方法的变化`GetDataSet()`：

`Dataset resultDS = _tempDriver.Create("TEMP", resultSizeX, resultSizeY, _bands, _bandType, new string[] { });`

上面的行更改为：

```
Dataset resultDS = _tempDriver.Create("TEMP", resultSizeX, resultSizeY, _bands, _bandType, new string[] { });
for (int i = 1; i < _bands + 1; i++)
{
    Band band = resultDS.GetRasterBand(i);
    band.Fill(255, 0);
} 
```

# sql - sql - 比较两个表

> ID：12728705
> 
> 赞同：1
> 
> 时间：2012-10-04T13:47:08.430
> 
> 标签：sql

我有两张桌子，`table1`和`table2`。它们都有相同的列`program_id`，`scheduled_time`和`timezone_id`。

我想检索与`program_id`和相同`timezone_id`但与 不同`scheduled_time`的行`table1`。

所以这是我尝试的sql：

```
select t1.* 
from table1 t1, table2 t2 
where t1.program_id = t2.program_id 
  and t1.timezone_id = t2.timezone_id 
  and t1.scheduled_time != t2.scheduled_time; 
```

但我仍然看到具有相同`program_id`,`scheduled_time`和`timezone_id`.

有人可以修复sql吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:50:26.587

尝试使用子查询：

```
select t1.* 
from table1 t1
where exists
(
  select 1
  from table2 t2
  where t1.program_id = t2.program_id 
  and t1.timezone_id = t2.timezone_id 
  and t1.scheduled_time != t2.scheduled_time;
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-04T13:50:54.960

尝试这样的事情：

```
SELECT
    t1.* 
FROM
    table1 t1
INNER JOIN
    table2 t2 ON t1.program_id = t2.program_id AND t1.timezone_id = t2.timezone_id 
WHERE
     t1.scheduled_time <> t2.scheduled_time 
```

基本上，`INNER JOIN`对公共列 (`program_id`和`timezone_id`) 执行一次操作并确保该`scheduled_time`列具有不同的值。

另外：在 SQL 中使用`<>`运算符 -`!=`用于 C# / VB.NET ....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:51:27.147

这应该有效。我建议始终指定一个列列表，而不是使用`SELECT *`.

```
SELECT t1.program_id, t1.scheduled_time, t1.timezone_id
FROM table1 t1
INNER JOIN table2 t2 ON 
    t2.program_id = t1.program_id AND
    t2.timezone_id = t1.timezone_id
WHERE
    t2.scheduled_time <> t1.scheduled_time 
```

# backbone.js - 获取事件之前的 BackboneJS

> ID：12728706
> 
> 赞同：4
> 
> 时间：2012-10-04T13:47:11.203
> 
> 标签：backbone.js, backbone-events

我有一个集合（使用 Backbone.paginator ），它从服务器获取一组模型并返回给我。这个集合用于我的“主视图”和“子视图”。在这些视图中的每一个中，我都有一个 on("change") 事件，在每个视图中，该事件都会做一件特别的事情。我在想我是否可以听一些“开始获取”事件（类似于 jquery 上的 beforeLoad）来添加加载器 gif。Backbone 是否提供其中之一？

如果没有..我该如何扩展它？

谢谢！

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-15T08:05:30.157

只需使用事件“请求”。当模型（或集合）开始向服务器发出请求时，它会触发。它从 0.9.9 版开始可用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T13:54:19.793

您可以像这样扩展 Backbone Collection 原型：

```
(function() {
  var fetch = Backbone.Collection.prototype.fetch;
  Backbone.Collection.prototype.fetch = function() {
    this.trigger('beforeFetch');
    return fetch.apply(this, arguments);
  };
})(); 
```

现在您可以执行以下操作：

```
myCollection.on('beforeFetch', function() {
  // take care of before fetch business
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T13:56:14.123

您只需在每次 fetch 调用之前添加对设置加载屏幕的方法的调用：

```
this.collection.on('reset', this.displayNormal)
this.displayLoader();
this.collection.fetch(); 
```

这应该让你开始。如果你需要那个事件（我明白你为什么会这样），你可以像这样覆盖 fetch

```
fetch: function() {
  this.trigger('beforeFetch');
  return Backbone.Collection.prototype.fetch.apply(this, arguments);
} 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T13:49:38.697

您可以做的是在调用 fetch 时显示加载图像，然后为 fetch 设置成功回调以再次隐藏它。

# javascript - 在分区之间使用css创建子链接

> ID：12728708
> 
> 赞同：0
> 
> 时间：2012-10-04T13:47:12.277
> 
> 标签：javascript, jquery, html, css

我一直在研究家谱结构并提出了这个代码。我坚持将子元素动态链接到树。请提供帮助，因为我查看了[“CSS Family Tree”](http://thecodeplayer.com/walkthrough/css3-family-tree/)，但无法从中获得太多帮助。

HTML

```
<body>
<div class="tree" >
<div id="parent">
    <div id="dad" class="people" >Father</div>
    <div id="mom" class="people" >Mother</div>
    <div class="link"></div>
</div>
<div id="user">
    <div id="user" class="people" >User</div>
    <div id="spouse" class="people" >Spouse</div>
    <div style="clear:both; width:200px; height: 10px; margin-left:88px;border-left:2px #ccc solid;border-bottom:2px #ccc solid;border-right:2px #ccc solid; "></div>
</div>
<div style="width:2px; height:24px; background:#ccc; margin:0 auto;"></div>
<div id="children" style="margin:0 auto; display:block;">
    <div id="1" class="child" >child 1</div>
    <div id="2" class="child" >child 1</div>

</div>

</div>
</body>
​ 
```

CSS

```
.tree{
    width:960px;
    min-height: 600px;
}

#parent{
    margin: 0 129px;
    width:400px;
    height:70px;
    display:block;
}

.link{
    clear:both; 
    width:200px; 
    height: 10px; 
    margin-left:88px;
    border-left:2px #ccc solid;
    border-bottom:2px #ccc solid;
    border-right:2px #ccc solid; 
}

.people{
    height:60px; 
    width:185px; 
    float:left;  
    background:#999;
    margin-right:10px;
}

.child{
    height:60px; 
    width:185px; 
    background:#999;
    margin:0 auto;
    float:left;
    margin-right:10px;
}

#user{
    display:table;
    margin:0 auto;        
}

#user::before{
    width:0px;
    height:24px;
    margin-left:40px; 
    content:'';
    display:block;
    border-left: 2px #ccc solid;
}
#child::before{
    width:0px;
    height:24px;
    margin-left:40px; 
    content:'';
    display:block;
    border-left: 2px #ccc solid;
    border-top: 2px #ccc solid;
}
​ 
```

这是我的[“JS Fiddle”](http://jsfiddle.net/daneuchar/8wfyB/)我想要使用 css 的子元素的根行是否可能？类似于 CSS 树。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T15:19:10.550

如果有人遇到与我相同的问题，这可能会有所帮助。这是一个解决方案 [CSS Family Tree](http://www.dreamincode.net/forums/topic/285025-generating-a-genealogy-tree-using-css/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:10:55.477

。尝试这个：

```
<body>
<div class="tree" >
<div id="parent">
    <div class="people parent male" >Father</div>
    <div class="people parent female" >Mother</div>
    <div class="link"></div>
</div>
<div id="user">
    <div class="people user male" >User</div>
    <div class="people user female" >Spouse</div>
    <div style="clear:both; width:200px; height: 10px; margin-left:88px;border-left:2px #ccc solid;border-bottom:2px #ccc solid;border-right:2px #ccc solid; "></div>
</div>
<div style="width:2px; height:24px; background:#ccc; margin:0 auto;"></div>
<div id="children" style="margin:0 auto; display:block;">
    <div class="people child male" >child 1</div>
    <div class="people child female" >child 1</div>
</div>
</div>
</body> 
```

然后相应地创建类 .people、.parent、.user、.child、.male、.female。您还可以使用组合来隔离案例，例如 .user.male{} 或 .child.female{}

# android - 自定义适配器视图

> ID：12728712
> 
> 赞同：2
> 
> 时间：2012-10-04T13:47:23.103
> 
> 标签：android, android-adapterview

**目标**

我想在滚动视图中有一个列表（不是 ListView）

**问题**

ScrollView 中的 ListView 不起作用

**可能的解决方案**

我认为解决方案是执行以下操作：

1.  创建一个扩展 AdapterView 的类
2.  在 XML 布局中设置类
3.  用适配器填充adapterView。

**解决方案的问题**

如果我将扩展的 AdapterView 放在我的 xml 布局中，则应用程序崩溃。

错误：10-04 16:02:14.396：W/ActivityManager(2119)：ActivityRecord{422c1838 package/.activities.SelectWorkplaceActivity} 的活动暂停超时

**问题**

这里出了什么问题？

有没有更好的方法来使用适配器创建不可滚动的列表？

**代码**

风景：

```
public class BasicListView extends AdapterView<ListAdapter> {

private String tag = "BasicListView";

private ListAdapter mAdapter;

private DataSetObserver mDataSetObserver;

private Context mContext;

public BasicListView(Context context) {
    super(context);
    mContext = context;

}

public BasicListView(Context context, AttributeSet attrs) {
    super(context, attrs);
    mContext = context;
}

public BasicListView(Context context, AttributeSet attrs, int defStyle) {
    super(context, attrs, defStyle);
    mContext = context;
}

@Override
public ListAdapter getAdapter() {
    return mAdapter;
}
@Override
public View getSelectedView() {
    Log.i(tag, "getSelectedView not available");
    return null;
}
@Override
public void setAdapter(ListAdapter adapter) {
    if(mAdapter != null)
    {
        mAdapter.unregisterDataSetObserver(mDataSetObserver);
    }

    mAdapter = adapter; 

    requestLayout();
}

@Override
public void setSelection(int position) {
    Log.i(tag, "setSelection not available");
}
} 
```

和 XML 布局：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical" >

<ScrollView
    android:id="@+id/scrollView1"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="2"
     >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/TextView02"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Code scannen" />

        <Button
            android:id="@+id/btn_scan_code"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_gravity="bottom"
            android:text="Scan werkplek" />

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Code handmatig invoeren" />

        <LinearLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <EditText
                android:id="@+id/et_type_code"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:ems="10" >
            </EditText>

            <Button
                android:id="@+id/btn_send_code"
                style="?android:attr/buttonStyleSmall"
                android:layout_width="0dp"
                android:layout_height="wrap_content"
                android:layout_weight="1"
                android:text="Verzenden" />
        </LinearLayout>

        <TextView
            android:id="@+id/TextView01"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/label_current_sessions"
            />

        <package.views.BasicListView
            android:id="@+id/current_sessions"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" >
        </package.views.BasicListView>

        <TextView
            android:id="@+id/TextView02"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="10dip"
            android:text="@string/label_favorite_workplaces"
            />

        <ListView
            android:id="@+id/favorite_workplaces"
            android:layout_width="match_parent"
            android:layout_height="193dp"
            />

    </LinearLayout>
</ScrollView>

<include
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    layout="@layout/actionbar" /> 
```

如果您想了解更多信息，请询问:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:35:09.940

Romain Guy 的这个回答解释了为什么你应该为此使用 LinearLayout 而不是 ListView：[https ://stackoverflow.com/a/3496042/1717225](https://stackoverflow.com/a/3496042/1717225)

# python - 使用python更改xml

> ID：12728719
> 
> 赞同：1
> 
> 时间：2012-10-04T13:47:34.993
> 
> 标签：python, xml

我有这样的xml文件：

```
<lala>
  <blabla>
    <qweqwe>test</qweqwe>
  </blabla>
</lala> 
```

我需要打开它并将 qweqwe 中的 test 更改为另一个值，例如 newtest。之后，我需要将其保存为新的 xml 文件。请帮助我如何使用python以最好的方式做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:07:20.780

我推荐使用`lmxl`- 一个简单的例子是：

```
from lxml import etree as et

>>> xml="""<lala>
  <blabla>
    <qweqwe>test</qweqwe>
  </blabla>
</lala>
"""
>>> test = et.fromstring(xml)
>>> for i in test.xpath('//qweqwe'):
    i.text = 'adsfadfasdfasdfasdf' # put logic here

>>> print et.tostring(test) # write this to file instead
<lala>
  <blabla>
    <qweqwe>adsfadfasdfasdfasdf</qweqwe>
  </blabla>
</lala> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:49:04.873

与此处有关 python 的所有其他 XML 问题一样，请查看`lxml`

链接： http: [//lxml.de/](http://lxml.de/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:55:04.127

对于这样的任务，我发现内置库的[minidom 既快速又简单。](http://docs.python.org/library/xml.dom.minidom.html)但是，我不能说我已经在速度和内存使用方面对它与其他各种库进行了广泛的比较。

我喜欢它，因为它重量轻，自 Python 2.0 以来可以快速开发和呈现

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T13:57:28.913

[这是一个](https://stackoverflow.com/questions/8171146/python-lxml-modify-attributes)关于修改 xml 元素的值的问题，但使用建议的答案来修改 xml 元素的文本应该不会太过分。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T14:07:36.840

如果您尝试更改所有测试实例，您只需打开文件并查找字符串匹配项

所以

```
result = []
f = open("xml file")

 for i in f:
  if i == "<qweqwe>test</qweqwe>":
   i = "<qweqwe>My change</qweqwe>"
  result.append(i)

 f.close()

 f = open("new xml file")
 for x in result:
  f.writeline(x) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-01-04T01:47:03.500

对于打算做同样事情但编码困难的人来说，这是一个通用的解决方案，它用 UTF-16 编码更改了 .xml。

它在 python 2.7 中工作，修改位于文件夹“a”中名为“b.xml”的 .xml 文件，其中“a”位于 python 的“工作文件夹”中。它将新修改的文​​件输出为文件夹“a”中的“c.xml”，而在 python 2.7 之外进一步使用时不会产生编码错误（对我而言）。

```
file = io.open('a/b.xml', 'r', encoding='utf-16')
    lines = file.readlines()
    outFile = open('a/c.xml', 'w')
    for line in lines[0:len(lines)]:
        #replace author:
        pattern = '<Author>'
        subst = '    <Author>' + domain + '\\' + user_name + '</Author>'
        if pattern in line:
            line = subst
            print line

        outFile.writelines(line) 
```

# calendar - 排序 ekcalendar 或 ekreminder

> ID：12728722
> 
> 赞同：2
> 
> 时间：2012-10-04T13:47:39.530
> 
> 标签：calendar, ios6, eventkit, reminders, ekeventkit

有没有办法对日历或提醒进行排序？我还没有找到 sortIndex 属性或类似的东西......提醒应用程序如何对那里的项目进行排序？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T08:30:50.537

目前在 iOS 6 SDK 中，Reminders 应用程序使用的排序索引没有公共访问权限。您需要在应用程序中使用其他方法进行排序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T01:04:03.550

我用它来按优先级对 EKReminders 进行排序

```
NSSortDescriptor *sortDescriptor;
sortDescriptor = [[NSSortDescriptor alloc] initWithKey:@"priority" ascending:YES] ;
NSArray *sortDescriptors = [NSArray arrayWithObject:sortDescriptor];
NSArray *sortedArray = [unsortedArray sortedArrayUsingDescriptors:sortDescriptors]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-23T12:35:13.373

这是 EKReminder 的一个类别，包含一个比较 2 个提醒（EKReminder 实例）的方法。然后我使用 NSArray 方法“sortUsingSelector”如下：

[myReminders sortUsingSelector:@selector(compare:)];

排序标准如下： 1) 所有已完成的提醒都列在未完成（未完成）的提醒下方

2）打开的提醒按报警日期排序（alarm.absoluteDate）

3）完成的提醒按completionDate排序

希望这可以帮助！

# 导入“EKReminder+Sort.h”

@implementation EKReminder（排序）

-(NSComparisonResult)compare:(EKReminder*)reminder { NSComparisonResult 结果 = NSOrderedSame;

```
if(self.completed) {
    if(reminder.completed) {
        result = [reminder.completionDate compare:self.completionDate];
    } else {
        result = NSOrderedDescending;
    }
} else {
    if(reminder.completed) {
        //do nothing
        result = NSOrderedSame;
    } else {
        NSDate *date1 = [self.alarms.firstObject absoluteDate];
        NSDate *date2 = [reminder.alarms.firstObject absoluteDate];

        if(date1) {
            if(date2) {
                result = [date1 compare:date2];
            } else {
                result = NSOrderedDescending;
            }
        } else {
            //do nothing
            result = NSOrderedSame;
        }
    }
}

return result; 
```

}

@结尾

# javascript - propertyIsEnumerable(x) 与 x in

> ID：12728728
> 
> 赞同：1
> 
> 时间：2012-10-04T13:47:50.127
> 
> 标签：javascript, properties, enumeration, enumerable

`o.propertyIsEnumerable(x)`我在Javascript代码中遇到了该方法。我将其理解为`x in o`构造的同义词。有区别吗？如果是这样，您能否在一些实际示例中说明何时使用第一个构造以及何时使用第二个构造？

```
var o = {};
o.x = 1;
o.y = 2;

if ("x" in o) {
 // some code
}

if (o.propertyIsEnumerable(x)) {
  // some code
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T13:57:31.597

解决此类问题的最简单方法是遵循规范中的算法。这就是它告诉我们的[`propertyIsEnumerable`](http://es5.github.com/#x15.2.4.7)：

> *   令 desc 为调用*O的 [[GetOwnProperty]] 内部方法并将**P*作为参数传递的结果。
>     
>     
> *   如果 desc 未定义，则返回 false。
>     
>     
> *   返回*desc* .[[Enumerable]] 的值。

如您所见，它将调用相关对象的[`[[GetOwnProperty]]`内部方法](http://es5.github.com/#x11.8.7)。*这只是从对象本身*（而不是从其原型链中的任何内容）返回指定属性的值。

现在让我们看一下[`in`运算符](http://es5.github.com/#x11.8.7)：

> 返回使用参数 ToString(lval) 调用*rval*的 [[HasProperty]] 内部方法的结果。

如果您查看[`[[HasProperty]]`内部方法](http://jsfiddle.net/AjaGS/)：

> 令 desc 为调用*O*的 [[GetProperty]] 内部方法的结果，属性名为*P*

在这里你可以看到不同之处。`in`操作符导致使用[内部`[[GetProperty]]`方法][4]，而不是`[[GetOwnProperty]]`方法，这意味着它将找到原型链中对象的属性。

另一个主要区别是您可以在对象上定义不可枚举的属性（使用`Object.defineProperty`方法）。如果你定义了一个不可枚举的属性，它将*由*操作`in`符返回，但显然不是由`propertyIsEnumerable`方法返回。这是一个[演示差异的小提琴](http://jsfiddle.net/AjaGS/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:50:37.067

这考虑了原型属性并且没有考虑可枚举性。

```
if (x in o) 
```

另一个没有。它只查看“自己的”属性。

```
if (o.propertyIsEnumerable(x)) 
```

# php - 根据子值从数组中删除数组？

> ID：12728731
> 
> 赞同：1
> 
> 时间：2012-10-04T13:47:53.447
> 
> 标签：php, arrays, object, loops, recursion

我有一个数组数组，

我在下面发布了基本结构，递归可以是任何深度。

无论如何，我想要做的是，遍历数组中的每个项目，如果它的`['item']->data('id')`值等于`$id`然后删除树的那个部分，

但我不确定最有效的方法是什么？

我认为这可能有效，但我错过了什么吗？

```
function removeKey($key, &$categories){
    foreach($categories as $k => $category){
        if($category['item']->data('id') == $key){
            unset($categories[$k]);
            return;
        }
        if(!empty($category['children']))
            removeKey($key, $category['children']);
    }
}

removeKey($id, $categories); 
```

* * *

```
array(
    array(
        'item' => "category Object", //use ->data('id') to get the id!
        'children' => array(
            array(
                'item' => "category Object",
                'children' => array(
                    array(
                        'item' => "category Object",
                        'children' => array()
                    )
                )
            ),
            array(
                'item' => "category Object",
                'children' => array(
                    array(
                        'item' => "category Object",
                        'children' => array()
                    )
                )
            )
        )
    ),
    array(
        'item' => "category Object",
        'children' => array(
            array(
                'item' => "category Object",
                'children' => array(
                    array(
                        'item' => "category Object",
                        'children' => array()
                    )
                )
            ),
            array(
                'item' => "category Object",
                'children' => array(
                    array(
                        'item' => "category Object",
                        'children' => array()
                    )
                )
            )
        )
    )
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:54:53.343

您可以使用[array_map](http://php.net/manual/en/function.array-map.php)或[array_filter](http://php.net/manual/en/function.array-filter.php)遍历每个孩子并取消设置所需的孩子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:52:25.870

您可以`array_filter` 在顶部数组上使用，然后在回调函数中分析每个子数组。看看[http://www.php.net/manual/en/function.array-filter.php](http://www.php.net/manual/en/function.array-filter.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T13:54:06.033

尝试这个

```
function removeKey($key, &$categories){
    foreach($categories as $category){//y u were using $& 
        if($category['item']->data('id') == $key){
            unset($category);
            return;
        }
        if(!empty($category['children']))
            removeKey($key, $category['children']);
    }
}

removeKey($id, $categories); 
```

# rest - 直接在 REST 中编码是什么意思？

> ID：12728736
> 
> 赞同：1
> 
> 时间：2012-10-04T13:48:26.423
> 
> 标签：rest

在[skydrive LiveConnect Api](http://msdn.microsoft.com/en-us/library/live/hh243641.aspx#skydrive)站点中，他们提供了 javascript、java、c# 和 REST 等选项。

它给出了一个例子，说“如果你直接在 REST 中编码”

1）我们如何直接在 REST 中编码？

PS：我知道 REST 是什么，但我不知道如何通过 javascript 使用网站中给出的 REST？

如果有人对此有所了解，那将非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:52:02.490

实际上，当您说 Rest 时，您会想要一个带有端点的服务，它使用 HTTP 动词（GET、POST 等），并按照名称中的说明完成工作。如果您的网站完全使用 Javascript，那么 Ajax 将是您的朋友，因为它使您能够提出 GET、POST XMLHttpRequests。您还可以考虑使用 JQuery 代替 Javascript 来进行未来的开发。例如，如果您想使用 API，并向其中一个 API 函数发出 POST 请求，您可以执行以下操作：

```
req.open("POST", url, true);
req.setRequestHeader("Content-Type",
                 "application/x-www-form-urlencoded");
req.send(form-encoded request body); 
```

其中 url 是在线 api 函数的链接。或者，如果您有选择，您可以使用 C# 使用 ASP.NET Web API 开发 RESTful 服务，然后使用 JavaScript/JQuery 调用/使用它们

这里有一些让你开始的东西：

[http://rest.elkstein.org/2008/02/using-rest-in-javascript.html](http://rest.elkstein.org/2008/02/using-rest-in-javascript.html)

[http://blogs.msdn.com/b/brunoterkaly/archive/2011/11/17/how-to-consume-restful-services-using-jquery-and-or-javascript.aspx](http://blogs.msdn.com/b/brunoterkaly/archive/2011/11/17/how-to-consume-restful-services-using-jquery-and-or-javascript.aspx)

-- 附录

SkyDrive Rest API 本质上告诉您 SkyDrive API 支持这些 HTTP 动词集，以及使用这些动词的 URI。现在您可以使用 Javascript、C#、PHP 等发起请求，但您始终必须使用 REST API 提供的相同 URI 来进行调用和获取/发布资源。这样做可确保每次使用 REST API 执行操作（GET、POST）时，无论您从何处调用（C#、Javscript、PHP），都将始终获得一致的结果。如果您查看他们的代码示例，所有 GET 请求（C#、Javascript、Objective C）都使用相同的 REST URI。（[http://apis.live.net/v5.0/folder.a6b2a7e8f2515e5e.A6B2A7E8F2515E5E!114](http://apis.live.net/v5.0/folder.a6b2a7e8f2515e5e.A6B2A7E8F2515E5E!114)）。

所以本质上，你会有类似的东西：

**BaseURI ：http: [//apis.live.net/v5.0/](http://apis.live.net/v5.0/) **（**这将是任何类型请求的基本 uri，如 GET、POST） **资源位置**：文件夹.a6b2a7e8f2515e5e.A6B2A7E8F2515E5E!114**

 ****身份验证令牌**：access_token=ACCESS_TOKEN

然后，如果使用 C#，则必须创建一个 HttpWebRequest，并将 RequestType 设置为 GET（动词），并从上面给出的部分（BaseURI + ResourceLocation + AuthToken）构造 URI，并确保它与格式匹配REST API 中的 GET 请求，并执行该请求。如果您使用 JavaScript，您可以创建 XMLHttp Request (AJAX)，如他们所示的示例。REST API 充当端点，它说：“如果您想使用我来获取资源，这是您必须调用的 URI，并且您必须传递 URI 指定的所有信息”

在这里查看有关在 C# 中使用 SkyDrive REST API 的信息

[无法使用 REST API 从 skydrive 下载完整的图像文件](https://stackoverflow.com/questions/10402773/cant-download-complete-image-file-from-skydrive-using-rest-api)

您还可以使用 MS INteractive SDK 来了解 JavaScript 和 REST 实现之间的区别：

[http://isdk.dev.live.com/ISDK.aspx](http://isdk.dev.live.com/ISDK.aspx)**

# c# - 我可以测试什么值来检查变量是否有可能未选中的复选框值

> ID：12728740
> 
> 赞同：0
> 
> 时间：2012-10-04T13:48:37.510
> 
> 标签：c#, html, forms, checkbox

我有一些纠错代码，我想测试以确保由“Request.Form[”checkbox”]”分配的变量是检查时给出的值（比如说“勾选”）或任何值如果它没有被选中。

在尝试使用 Request.Form 为其分配值之前，我将变量声明为空字符串

我尝试了以下方法：

```
if(IsGangMember != "ticked" || IsGangMember != "")
    {
        errorMessage = "The \"Search For Street Gang Member\" field contains an invalid value.";
    } 
```

还有这个：

```
if(IsGangMember != "ticked" || IsGangMember != null)
    {
        errorMessage = "The \"Search For Street Gang Member\" field contains an invalid value.";
    } 
```

还有这个：

```
if(IsGangMember != "ticked" || IsGangMember.IsEmpty())
    {
        errorMessage = "The \"Search For Street Gang Member\" field contains an invalid value.";
    } 
```

我还尝试将值打印到屏幕上（如果未选中框）以查看它，它当然是空的，所以我看不出这个值除了空字符串或 null 之外的任何东西。

任何帮助表示赞赏，谢谢！

更新：

好的，所有给出的解决方案都很有意义，但是如果不选中，错误消息仍然会被设置。

这就是我正在做的所有事情：

```
var IsGangMember = ""; 
```

然后：

```
IsGangMember = Request.Form["sIsGangMember"]; 
```

（sIsGangMember 是输入复选框字段的名称）然后：

```
if(IsGangMember != "ticked" || !String.IsNullOrEmpty(IsGangMember))
{
    errorMessage = "The \"Search For Street Gang Member\" field contains an invalid value.";
} 
```

如果未选中，errorMessage 仍会被分配。：（ 为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:00:23.683

如果未选中该复选框，它将在 Request.Form 集合中不可用。如果选中，它将在集合中，键为“checkbox”，值为“on”。

所以你可以很容易地检查它

```
Request.Form["checkbox"] != null 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:01:01.710

采用`String.IsNullOrEmpty`

```
if(!String.IsNullOrEmpty(IsGangMember))
{
   //test for other values
}
else
{
   //String is empty
} 
```

认为应该反过来

```
if(IsGangMember != "ticked" || String.IsNullOrEmpty(IsGangMember))
{
    errorMessage = "The \"Search For Street Gang Member\" field contains an invalid value.";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:38:23.857

XD

捂脸！

很明显......我需要“&&”而不是“||” 嘘

我怎么没有早点发现这个......

当然，它永远是一个“或”另一个：S

我需要睡觉...

# caching - 如何在 ruby on rails 应用程序上禁用客户端缓存

> ID：12728746
> 
> 赞同：0
> 
> 时间：2012-10-04T13:48:43.970
> 
> 标签：caching, ruby-on-rails-3.1

我的 ruby​​ on rails 应用程序有问题。我的 Web 应用程序将 http 响应数据保存在缓存中，因此如果客户端浏览器查看太多页面，客户端缓存会填满客户端机器的 ram 内存！！！这是一个问题，因为我的应用程序显示照片，所以任何页面大约 17KB，这对客户端来说是个问题，特别是如果那是移动设备！！！！

如何禁用客户端缓存？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:51:31.450

我需要用 javascript 操作 img。现在系统是这样的：

在第一页有第一张图片的标签 img：

```
 <img id="photo" src="data:image/jpeg;base64,<%= @data %>" alt="photo"> 
```

在同一页面中有这个 javascript 代码；设置间隔（更新，1000）

```
 function update(){
         $.ajax({
            url: "LINK TO THE NEXT PHOTO"})
         });
      } 
```

ajax 请求调用者返回新代码照片的方法：

```
 ' $("#photo").attr('src', "data:image/jpeg;base64,<%= @data %>") 
```

# jquery - 移动设备上的 DICOM 图像/视频

> ID：12728747
> 
> 赞同：2
> 
> 时间：2012-10-04T13:48:59.907
> 
> 标签：jquery, html, mobile, streaming, dicom

我有一个最后一年的项目来开发一个能够查看 DICOM 图像和视频的移动应用程序。需要使用通过 http 的动态自适应流传输视频。

我希望使用 iOS 开发应用程序，但我在将 DCMTK/ITK 导入 xCode 时遇到了问题，因为大多数指南都已过时。

我开始考虑使用 HTML5/jQuery 和 Phonegap 开发应用程序以跨平台交付它。

我的问题是如何采用开发此类应用程序的方法？我没有太多的编程经验，也很难找到解决这个问题的方法。我想从 DropBox 或服务器中的某个地方存储和检索 DICOM 图像/视频。我不希望将它们用于 PACS 服务器，除非那是唯一的选择，因为我无法访问它们。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-05T07:17:23.867

为了在 HTML5 中显示 DICOM 图像，您需要：

1.  将它们转换为 JPEG 或其他网络兼容的图像格式
2.  在带有各种图像压缩编解码器的 javascript 中编写一个 DICOM 解析器，以读取原始 DICOM 并将其转换为可在 Web 上查看的格式（例如，转换为 8 位像素值以插入到画布元素中）

第一个比第二个容易得多。假设这就是你想要做的。您将需要一个服务器，当被要求提供图像时，它将获取相应的 DICOM 图像并将其转换为 JPEG，然后将其提供给您的客户端应用程序，然后客户端应用程序将显示它。

您可以使用 WADO 协议和开源 PACS 系统（类似于[dcm4chee](http://www.dcm4che.org/)）来获取 DICOM 文件的 JPEG 版本。WADO 是一种用于提供对 DICOM 对象的 Web 访问的协议，因此您所要做的就是请求正确的文件，WADO 兼容的服务器将能够为您提供所需的 JPEG。

然后有很多细节需要担心，但是，这应该足以让你开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-16T13:14:49.550

我的回答可能来得太晚了，但在你的情况下，你可以试试[Orthanc](http://www.orthanc-server.com/)。Orthanc 是一个轻量级的开源 DICOM 服务器，带有 RESTful API。因此，您可以通过标准 AJAX 调用与存储的 DICOM 图像进行交互，而无需使用任何 DICOM 工具包。

# magento - 连接管理器未响应“提交更改”或“检查升级”

> ID：12728749
> 
> 赞同：1
> 
> 时间：2012-10-04T13:49:03.073
> 
> 标签：magento

在连接管理器 1.5.0 magento 1.6.2 中，我的连接管理器没有响应......当我按下按钮时没有任何反应。其他一切似乎都有效。

所以我尝试使用粘贴扩展密钥进行安装：它进入一个单独的窗口，我点击继续，然后我得到一个新窗口检查包的依赖项已经安装：community/Klarna 4.0.10，跳过

以前可以用，有大神帮忙看看是怎么回事吗？

ps 我在我的现场商店，那里的设置是本地的（并且一直是）我猜

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T23:27:59.840

如果您尝试安装`community/Klarna`扩展并且它已经安装，您可以看到以下消息：

```
Already installed: community/Klarna 4.0.10, skipping 
```

使用频道的已安装扩展表`community`删除此扩展。而且你可以再次安装它。

# java - 如何在 Hibernate 中使用两个表来持久化自引用实体？

> ID：12728761
> 
> 赞同：1
> 
> 时间：2012-10-04T13:49:52.170
> 
> 标签：java, hibernate, relationship

我在使用 Hibernate 时遇到了一个小而奇怪的问题。我有两个表：“SERVICE”和 SERVICE_RELATIONSHIP，它定义了两个服务之间的关系。

```
CREATE TABLE TMS.TB_SERVICE ( 
    ID_SERVICE  INTEGER NOT NULL,
    NAME        VARCHAR(255),
)

CREATE TABLE SERVICE_RELATIONSHIP ( 
    ID_SERVICE      INTEGER NOT NULL,
    ID_SERVICE_REL  INTEGER NOT NULL,
    RELATIONSHIP    VARCHAR(1)  // Could be 'E' (Exclude) or 'I' (Include)
    ) 
```

我使用不同的方法（getInclude 和 getExclude）来根据他们所拥有的关系类型来获取服务。它们工作得很好，唯一的问题是当我想**持久化服务**时， ID_SERVICE 和 ID_SERVICE_REL 列被正确插入**但不是 RELATIONSHIP**。

```
@Table(name="SERVICE")
public class Service implements Serializable {
    private String name;
    private Integer id;
    private Collection<Service> exclude;
    private Collection<Service> include;
     [..]
    @JoinTable(name = "SERVICE_RELATIONSHIP", 
      joinColumns = {
        @JoinColumn(name="ID_SERVICE", unique = false, updatable = true)
      },
      inverseJoinColumns = {
        @JoinColumn(name="ID_SERVICE_REL")
      }
    )
    @WhereJoinTable(clause = "RELATIONSHIP='E'")
    public Collection<Service> getExclude() {
        return exclude;
    }

    [..] 
    @OneToMany(fetch=FetchType.EAGER)
    @JoinTable(name = "SERVICE_RELATIONSHIP",
      joinColumns = {
        @JoinColumn(name="ID_SERVICE", unique = false, updatable = true)           
      },
      inverseJoinColumns = {
        @JoinColumn(name="ID_SERVICE_REL")
      }
    )
    @WhereJoinTable(clause = "RELATIONSHIP='I'")
    public Collection<Service> getInclude() {
        return include;
    }
} 
```

有任何想法吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T19:40:27.213

`@WhereJoinTable`顾名思义，仅在对 select 子句进行连接时用于 Where 条件。

你有几个选项来实现这一点。

1.  将关系映射为一个类。
2.  创建包含和排除表。

就个人而言，我会映射关系类，但我会将其隐藏在外部`Service`，因此使用服务的代码不知道关系类。

# oracle-apex - oracle 顶点文件上传

> ID：12728763
> 
> 赞同：6
> 
> 时间：2012-10-04T13:49:55.680
> 
> 标签：oracle-apex

我想改变 APEX 上传文件的方式。我不希望文件作为 BLOB 进入数据库表。相反，我希望他们能够直接进入运行 apex 的机器上的 OS 目录。可能吗？如果是这样，我需要从什么开始？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T07:59:06.190

文件浏览项将始终上传到`BLOB`列。如果不在指定的表中，它将转到`wwv_flow_files`( `apex_application_files`)，这是备用选项。不过，这不应该是一个破坏交易的因素，因为您可以在完成处理`BLOB`.

*   确定文件需要结束的位置
*   确保您拥有必要的权限！（读，写，...）
*   在引用此位置的数据库中创建目录对象：[CREATE DIRECTORY 语句文档](http://docs.oracle.com/cd/B14117_01/server.101/b10759/statements_5007.htm)
*   确保您对该对象拥有必要的授权（读、写……）
*   创建一个将 a 写入`BLOB`文件的过程。此技术的一个示例在[此处 (dba-oracle.com)](http://www.dba-oracle.com/t_writing_blob_clob_os_file.htm)。简而言之，它将做的是：

    *   在文件系统上打开一个文件（需要一个目录，并且一个目录由您
        之前创建的目录对象的名称引用！）

        ```
        -- define output directory
        l_output := utl_file.fopen('DIR_TEMP', 'filename','wb', 32760); 
        ```

        在这个示例代码中，创建的目录是`DIR_TEMP`对象

    *   拿走
    *   读一段
    *   将该部分写入文件系统
    *   重复最后 2 个步骤，直到到达 blob 的末尾（除非`BLOB`小到可以一次性写入）
    *   设置要上传到的文件浏览项`wwv_flow_files`
    *   关闭文件（完成）
*   然后，您可以更改该过程以采用`BLOB`as in`IN` 参数。
*   在 apex 中，创建一个提交后的 plsql 进程。您可以在那里调用文件写入过程，并为其提供存储的 blob。
*   并清理上传表。

顶点过程示例：

```
DECLARE
   v_upl_blob BLOB;
BEGIN
   SELECT blob_content 
     INTO v_upl_blob
     FROM wwv_flow_files
    WHERE name = :Px_FILE_BROWSE_ITEM;

   my_file_write_procedure(v_upl_blob);

   DELETE FROM wwv_flow_files
    WHERE name = :Px_FILE_BROWSE_ITEM;
END; 
```

对于更多文档，当然总是有 google，这里使用的所有对象的 oracle 文档，甚至是 oracle 论坛（例如[OTN apex 论坛](https://forums.oracle.com/forums/forum.jspa?forumID=137)或[OTN PL/SQL 论坛](https://forums.oracle.com/forums/forum.jspa?forumID=75)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-28T18:32:44.747

```
declare
  v_length number;
  v_id number;
begin
   select doc_size
   into v_length
   from   wwv_flow_files
   where  name = :P105_PIC;

if v_length > 20000 then
   delete from wwv_flow_files where name = :P105_PIC;
   commit;

    apex_error.add_error (
    p_message          => 'Cannot upload pictures bigger than 20kB!',
    p_display_location => apex_error.c_inline_in_notification );

end if;
exception
 when others then
    apex_error.add_error (
    p_message          => 'Cannot upload pictures!',
    p_display_location => apex_error.c_inline_in_notification );
end; 
```

# html - Schema.org 网页 - isPartOf?

> ID：12728766
> 
> 赞同：5
> 
> 时间：2012-10-04T13:50:00.783
> 
> 标签：html, schema.org, microdata

我试图弄清楚如何使用[Schema.org](http://schema.org/WebPage)对象`isPartOf`中的属性。[`WebPage`](http://schema.org/WebPage)

据我了解，这应该用于指定您的页面是集合的一部分。所以我有一个曲棍球队名单，然后是球员名单。我的理解是单个玩家将成为团队的一部分，所以大概在玩家 HTML 页面上，我会添加该`isPartOf`元素。

但我不确定如何添加它。我应该将它作为 URL 添加到 pages 集合吗？或者我应该只添加一个`meta`带有集合名称的标签？我似乎在任何地方都找不到关于这个元素的太多信息。有谁知道如何正确使用它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-06T13:16:28.433

我认为您是对的：用于`isPartOf`指示页面或文件（播放器）所属的父集合（在本例中为团队）。

所以在播放器的页面上：

`<a href="/toronto-maple-leafs/" itemprop="isPartOf">Member of the Toronto Maple Leafs</a>`

在团队页面上，确保它被标记为 CollectionPage，例如：

`<body itemscope itemtype="http://schema.org/CollectionPage">`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-03T09:48:56.533

该[`isPartOf`](http://schema.org/isPartOf)属性（[及其逆属性](https://stackoverflow.com/a/41497624/1591669 "Schema.org 中 isPartOf 和 hasPart 的区别？"): [`hasPart`](http://schema.org/hasPart)）可用于传达 a`CreativeWork`是 another 的一部分`CreativeWork`。一个用例是类别页面（[示例](https://webmasters.stackexchange.com/q/98556/17633 "网站管理员 SE：“将 CollectionPage 类型用于“类别”页面的正确方法是什么？")）。

虽然可以使用 URL 值，但预期的方式是提供`CreativeWork`值（`WebPage`更具体`CreativeWork`）：

```
<div itemscope itemtype="http://schema.org/WebPage">
  <h1 itemprop="name">Child page</h1>
  <p itemprop="isPartOf" itemscope itemtype="http://schema.org/WebPage">
    <span itemprop="name">Parent page</span>
  </p>
</div> 
```

```
<div itemscope itemtype="http://schema.org/WebPage">
  <h1 itemprop="name">Parent page</h1>
  <p itemprop="hasPart" itemscope itemtype="http://schema.org/WebPage">
    <span itemprop="name">Child page</span>
  </p>
</div> 
```

### 对于运动队

然而，如果你想传达一个球员是球队的一部分，你不能使用`isPartOf`/ `hasPart`，因为球员和球队都不是创造性的作品。您将需要一个可以连接`Person`和`Organization`项目的合适属性。

Schema.org 现在有适合这种情况的类型和属性：

*   [`SportsTeam`](http://schema.org/SportsTeam)

    > 组织：运动队。

*   [`athlete`](http://schema.org/athlete)

    > 担任运动队表演成员的人；与教练相对的球员。

例子：

```
<div itemscope itemtype="http://schema.org/SportsTeam">
  <ul>
    <li itemprop="athlete" itemscope itemtype="http://schema.org/Person"></li>
    <li itemprop="athlete" itemscope itemtype="http://schema.org/Person"></li>
    <li itemprop="athlete" itemscope itemtype="http://schema.org/Person"></li>
  </ul>
</div> 
```

该`athlete`属性没有定义逆属性。如果您想在`Person`项目中指定此关系，您可以使用非标准`itemprop-reverse`属性 ( [example](https://stackoverflow.com/a/38663388/1591669) )，或者从使用 Microdata 切换到 RDFa ( [example](https://stackoverflow.com/a/46018087/1591669) ) 或 JSON-LD ( [example](https://stackoverflow.com/a/39331042/1591669) )。

# ruby-on-rails - Rails、PostgreSQL 和非标准字符的编码错误

> ID：12728777
> 
> 赞同：5
> 
> 时间：2012-10-04T13:50:46.710
> 
> 标签：ruby-on-rails, postgresql, heroku, character-encoding

我收到以下错误：

```
ActiveRecord::StatementInvalid: PG::Error: ERROR: invalid byte sequence for encoding "UTF8": 0xf66e6bf6 : INSERT INTO "response_sets" ("city") VALUES ('Jönköping') RETURNING "id" 
```

数据库是 Heroku 应用程序上的 PostgreSQL 9.0.6。

当有奇数字符时，不确定如何解决该错误。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T14:01:40.533

您的数据库未设置为与您尝试插入的字符串相同的编码方案。我想 Heroku 上的 Postgres 默认设置为使用 UTF-8，如果我不得不猜测，您的输入可能是拉丁语变体之一。您可以将数据库设置为接受您提供的编码方案，例如：

```
SET CLIENT_ENCODING 'ISO-8859-2' 
```

或者您可以将输入转码为 UTF-8（这可能更好）

```
"my string".encode('UTF-8') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-06T08:54:59.673

您的数据库可能未设置为与您插入的字符串相同的编码。Postgres 通常是 UTF-8。您必须在字符串上设置正确的编码。
这可能很简单

```
"string".encode('UTF-8') 
```

或者，如果字符串标记不正确，您可能还必须先进行 force_encoding。IE。它存储为“Windows-1252”，但 Ruby 未将其标记为“Windows-1252”。

```
"string".force_encoding('Windows-1252').encode('UTF-8') 
```

我们在使用 Sendgrid + Heroku Rails 时遇到了这个问题 [http://blog.zenlike.me/2013/04/06/sendgrid-parse-incoming-email-encoding-errors-for-rails-apps-using-postgresql/](http://blog.zenlike.me/2013/04/06/sendgrid-parse-incoming-email-encoding-errors-for-rails-apps-using-postgresql/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-16T08:30:47.393

这似乎对我有用：

```
"Hern\xE1ndez".encode('UTF-8','ISO-8859-1') 
```

第一个参数是您希望字符串所在的编码，第二个参数是您认为字符串所在的编码。

[字符串#编码](http://ruby-doc.org/core-2.1.0/String.html#method-i-encode "Ruby 2.1.0 文档")

文档中还有关于如何处理无效或未定义字符的选项。

这就是我最终使用的（为了安全起见）：

```
"Hern\xE1ndez".encode('UTF-8','ISO-8859-1', :invalid => :replace, :undef => :replace, :replace => "?") 
```

你也可以组成一个辅助方法：

```
def convert_to_utf_8(string)
  string.encode('UTF-8','ISO-8859-1', :invalid => :replace, :undef => :replace, :replace => "?")
end 
```

我遇到的问题是从 Amazon Merchant Services API 加载数据。

# sql-server - REST API 将对象更新保存到数据库

> ID：12728778
> 
> 赞同：1
> 
> 时间：2012-10-04T13:50:49.777
> 
> 标签：sql-server, json, wcf, rest

我正在使用 WCF 4.0 在 C# 中编写一个 RESTful API (json)。数据存储在 SQL Server 2012 数据库中。一个可用的调用将允许客户端保存对象，如下所示：

```
PUT /object/123

{
Subject: "my subject",
Comment: "my comment"
} 
```

到目前为止一切都很好。但有时客户端只想更新对象中的一个参数。像这样：

```
PUT /object/123

{
Comment: "I changed my comment"
} 
```

问题是：是否有在数据库表中进行更新的最佳实践？我怎么知道提供了哪些字段（假设某些字段应该可以为空）？如何编写只更新提供的那些列的好代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T13:54:30.160

一般我是这样做的。您的第一个示例应该是 POST。POST 告诉你这是一个创建。PUT 方法会告诉您这是一个更新，在这种情况下，我会更新 id 为 123 的对象的所有字段。这意味着客户端可以将其整个对象发送给您，其中任何/所有字段都已更新。你只是盲目地复制它们。

我想如果您不希望发送所有字段的开销，您可以检查默认值（null 或空字符串）并仅更新那些不等于该值的字段。

还要检查一下：

[仅更新 EF 实体上未设置为 null 的某些属性](https://stackoverflow.com/questions/9000702/only-update-some-properties-on-an-ef-entity-that-are-not-set-to-null)

# jquery - Jquery Mobile 中带有气泡计数的徽章图标（如 iOS）

> ID：12728782
> 
> 赞同：6
> 
> 时间：2012-10-04T13:51:00.487
> 
> 标签：jquery, jquery-mobile

我有一个带有几个图标的标题，我想在带有通知计数的徽章图标等图标中动态显示气泡计数。我们如何在 jquery mobile 中进行操作？我在 jquery mobile 中搜索气泡计数，但它目前可用于 listview，但我想在图标右上角显示计数，如 iOS 通知计数。找到下面需要在jquery mobile中实现的徽章图标的参考网址，网址：[http ://en.wikipedia.org/wiki/Apple_Push_Notification_Service](http://en.wikipedia.org/wiki/Apple_Push_Notification_Service)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T05:45:52.177

这可以通过 CSS 来完成。

HTML

```
<div class="icon">
    <span class="count">12</span>
</div> 
```

CSS

```
.icon {
   width: 50px;
   Height: 50px;
   background: url(/images/icon.png)
}

.icon .count {
    background:#ff0000;
    position: absolute; 
    top: -8px;
    Right: -8px;
    min-width:14px;
    height: 14px;
    color:#ffffff;
    border-radius: 50%;
    padding: 2px;
    text-align: center;
    font-size: 12px;
} 
```

现在您所要做的就是弄清楚何时将数字插入“气泡”

**编辑**：“图标”类点丢失。

# java - 在 spring 控制器中找不到请求映射

> ID：12728783
> 
> 赞同：0
> 
> 时间：2012-10-04T13:51:02.200
> 
> 标签：java, spring

我只是想创建一个简单的 spring web 应用程序。当我尝试导航到`http://localhost:8080/spring-test/VIEW/VIEW I receive 404 error :`

```
HTTP Status 404 - /spring-test/VIEW/VIEW

type Status report

message /spring-test/VIEW/VIEW

description The requested resource (/spring-test/VIEW/VIEW) is not available. 
```

我下面的配置正确吗？

测试控制器.java：

```
package com;

import org.springframework.stereotype.Controller;
import org.springframework.ui.ModelMap;
import org.springframework.web.bind.annotation.RequestMapping;

@Controller
@RequestMapping("VIEW")
public class TestController {

    @RequestMapping("VIEW")
    public String showView(final ModelMap argMap) {
        return "test.jsp";
    }

} 
```

应用上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
 xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
 xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd">

 <bean id="myController" class="com.TestController">

</bean>

 <bean id="portletModeHandlerMapping" class="org.springframework.web.portlet.handler.PortletModeHandlerMapping">
        <property name="order" value="0" />
        <property name="portletModeMap">
            <map>
                <entry key="view" value-ref="myController" />
            </map>
        </property>
    </bean>

</beans> 
```

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>

<web-app
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
    id="WebApp_ID"
    version="2.5">

    <display-name>Spring3MVC</display-name>

    <context-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/spring/*.xml</param-value>
    </context-param>

    <servlet>
        <servlet-name>spring</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <init-param>
            <param-name>contextConfigLocation</param-name>
            <param-value>/WEB-INF/applicationContext.xml</param-value>
        </init-param>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>spring</servlet-name>
        <url-pattern>*.html</url-pattern>
    </servlet-mapping>
</web-app> 
```

项目布局：

![在此处输入图像描述](../Images/afac526ab9460bdf34352e41af966f9e.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:59:23.410

我可能错了，但`spring`如果 URL 以`html`. 看看访问`/spring-test/VIEW/VIEW.html`是否会出现同样的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:04:28.090

```
<mvc:annotation-driven /> is missing 
```

[从这里](http://javapapers.com/spring/spring-mvc-hello-world/)看看

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T14:15:36.540

我需要将 servlet 映射更改为：

```
<servlet-mapping>
    <servlet-name>spring</servlet-name>
    <url-pattern>/</url-pattern>
</servlet-mapping> 
```

感谢[Spring MVC servlet 映射](https://stackoverflow.com/questions/8781789/spring-mvc-servlet-mapping)

# node.js - 使用 node.js 将图片保存到 mongodb

> ID：12728789
> 
> 赞同：1
> 
> 时间：2012-10-04T13:51:24.793
> 
> 标签：node.js, mongodb, gridfs

我想在 mongodb 数据库中保存一张图片，我正在使用 node.js。

没有驱动程序支持为 node.js 存储图像。

如何编写用于在 node.js 中存储图像的迷你驱动程序？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T16:11:41.373

事实上，所有官方 MongoDB 驱动程序都支持通过[GridFS API](http://www.mongodb.org/display/DOCS/GridFS)存储大文件。

这是 Node.js 的 GridFS 文档的链接：http: [//mongodb.github.com/node-mongodb-native/api-articles/nodekoarticle2.html](http://mongodb.github.com/node-mongodb-native/api-articles/nodekoarticle2.html)。

# c++ - 转发声明一切

> ID：12728793
> 
> 赞同：-1
> 
> 时间：2012-10-04T13:51:32.470
> 
> 标签：c++, coding-style, forward-declaration

事实：（**类类型的**）前向声明优于包含。

前向声明标题中的所有内容并包含该标题是否有缺点？（我猜编译时间不应该增加很多）

在大型代码库中，前向声明可能会占用大量屏幕空间，将它们替换为单个包含会很酷 - 但是，为每个标头设置前向声明标头没有意义前向声明。

有没有人这样做过或见过这个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:02:15.023

我认为如果不走极端，前锋几乎没有任何不利因素。

我个人不会关心屏幕空间。它肯定胜过将构建时间乘以 2 到 5 到 10。我们过去的构建时间大约为 2 小时......一些额外的前向包含可能会消除同一个文件被点击数千次。

无论如何，您不能总是对所有内容都使用前向声明。如果您要对某些东西进行子类化，则必须具有类定义，这可能意味着包含。没关系。

您可以做的一件事是删除依赖项，即在头文件中取消内联您的代码。确保将接口向上推，将实现向下推（参见 Sutter 和 Alexandrescu 的 C++ 编码标准）。这意味着如果可能的话，您的公共 API 更喜欢抽象接口。如果你能做到这一点，那么你需要包含或转发声明的金额可以最小化。

哦，也不要将数百个函数和类放在一个头文件中，所以它有 8000 行长。没有人可以阅读/理解这些文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:59:24.967

我通常在我的项目中这样做。但是我将前向声明拆分为`modules`. 例如：`gui`，`core`等等。这在由于在头文件中使用包含而进行大量重新编译和手动编写前向声明之间取得了很好的平衡

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-04T14:09:48.257

使用前向声明而不是包含的主要好处之一是，您无需在更改头文件时重新编译尽可能多的源文件，因为该头文件只会包含在实际需要的地方。

您的方法可能会降低这种好处，在某些情况下甚至会变得更糟：每次在某处添加或删除类时，都需要更改包含前向声明的全局头文件。然后您将需要重新编译代码库中的每个源文件，包括那些不使用添加的类的文件。

尽管如此，由于可能不会经常添加类，所以这也许不是太糟糕的权衡。

# c++ - 为什么我应该使用引用变量？

> ID：12728794
> 
> 赞同：29
> 
> 时间：2012-10-04T13:51:36.070
> 
> 标签：c++, pointers, reference

作为我的第一门编程语言，我学习了 Java，但由于我转到另一所大学，我现在正在学习 C++。

来自 Java 并学习了 C++ 的基础知识，我阅读了有关引用和引用变量的内容。以及它们有多危险，以及如何小心对待它们等等。

所以在我的脑海中出现了一个简单的问题：我为什么要费心使用那种复杂的，因此可能会导致问题的东西呢？

它是否值得，或者只是 RAM 大约 64MB 大的时代的遗物？

由于很多答案都提到了指针：这个概念显然来自石器时代，恕我直言。除了高性能计算，我什至不会碰那些东西。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-04T14:12:00.527

该问题与引用本身无关。

问题在于，在 C++ 中，对象生命周期的管理方式与 Java 或其他使用垃圾收集器的运行时环境不同。C++ 没有标准的内置垃圾收集器。C++ 对象生命周期可以是自动的（在本地或全局范围内）或手动的（在堆中显式分配/释放）。

C++ 引用只是对象的简单别名。它对对象生命周期一无所知（为了效率）。程序员必须关心它。一个例外是引用绑定到临时对象的特殊情况。在这种情况下，临时对象的生命周期会延长到绑定引用的生命周期。详情在[这里](http://en.cppreference.com/w/cpp/language/reference_initialization#Lifetime_of_a_temporary)。

引用是 C++ 基本概念的重要组成部分，您无法避免在 90% 的任务中使用它们。否则你必须使用指针，这通常更糟糕:-)

例如，当您需要**通过引用**而不是**按值**将对象作为函数参数传递时，您可以使用引用：

```
void f(A copyOfObj);       // Passed by value, f receives copy of passed A instance
void f(A& refToObj);       // Passed by ref, f receives passed A instance itself, modifiable
void f(const A& refToObj); // Passed by const ref, f receives passed A instance itself, non modifiable 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-04T13:58:52.997

如果您按值将大对象作为函数参数传递，则可能会出现非常实际的性能下降，通过将它们作为引用传递来解决。此外，如果您通过引用而不是值传递对象，则可以修改函数内部的对象。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-04T14:00:08.863

引用是有限制的指针。引用是访问对象的一种方式，但不是对象本身。如果您的代码使用这些限制是有意义的，那么使用引用而不是指针可以让编译器警告您意外违反它们。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-10-04T14:27:30.963

由于您刚从 Java 出来，我可以想象您在 C/C++ 允许您做的许多*危险*事情上遇到问题。在我看来，区别就在这里：

*   C/C++ 可以让你做很多*强大*而*危险*的事情。你可以做很多伟大的事情，但也可以打自己的腿
*   Java以安全的名义*限制*了你可以做的事情

你不喜欢的（“指针/引用是危险的”）正是我喜欢的（“它让我做很多事情，如果我搞砸了，那是我的错”）关于 C++。在我看来，这是一个编程语言品味的问题。

引用是为了避免指针的一些危险，但另一方面，除了明显的快速访问之外，即使是指针也有用途。例如，假设您有一个低级对象，它做了一些有用的工作，并在多个高级对象之间共享。它可以出于各种原因共享（例如，它每次执行有用的工作时都会更新内部状态，因此复制它不是一种选择）。

```
class HL{
    private:
    LL &object;

    public:
    HL(LL &obj){
        object = obj; // initialization of reference
    }
    // a no-argument constructor is not possible because you HAVE to
    // initialize the reference at object-creation (or you could initialize
    // it to a dummy static object of type LL, but that's a mess)
    void some_routine(){
        ....
        object.useful_work();
        ...
    }
} 
```

在这种情况下使用引用会*强制执行*internal 的初始化`object`。另一方面，如果对象提供的功能对于高级对象来说只是**可选的，那么指针是一种可行的方法：**

```
class HL{
    private:
    LL *object;

    public:
    HL(LL &obj){
        object = &obj; // initialization of reference
    }
    HL(){} // no-argument constructor possible
    void some_routine(){
        ....
        if (object != NULL)
           object->useful_work();
        ...
    }
} 
```

Also, as for use of the call-by-reference, that's the most useful when you're passing a big structure to a function, e.g. `vector<int>`.

```
void function(vector <int> a); // call by value, vector copied every time
void function(vector <int> &a); // call by reference, you can modify
                                // the vector in the function
void function(const vector <int> &a); // if you don't want to be able to modify
                                      // it, you can add const for "protection" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-04T14:08:17.137

实际的问题是“为什么使用引用而不是指针”。

我还没有完全弄清楚。目前，我使用参考

*   因为你不能分配给他们。最坏的情况，这对编译器没有任何意义，但编译器有机会利用这些知识。

*   通常当我想返回一个始终存在的指针，或者指示一个参数是必需的并且可能不是 nullptr（没有空引用）时。这不是硬性规定；有时，实际的指针感觉更自然。

*   当事情只是要求引用时，比如运算符重载。

一般来说，我最终会使用很多引用，因为我通常不想复制对象，除非我真的需要一个实际的副本，而且引用通常有效。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-10-04T14:19:17.363

引用最频繁的使用是为了避免昂贵的深拷贝；默认情况下，C++ 具有值语义，如果您编写如下内容：

```
void f( std::vector<double> d ); 
```

每次调用时都会复制整个向量`f`。所以你写了这样的东西：

```
void f( std::vector<double> const& d ); 
```

这一点特别重要的一个地方是定义复制构造函数时。如果你要写：

```
MyType( MyType other ); 
```

，您最终会得到无限递归，因为编译器必须调用复制构造函数才能将参数复制到此构造函数。（事实上​​，编译器只会接受一个引用复制构造函数的构造函数，正是为了避免这个问题。）

在构造函数之外，这实际上是一种优化，可以被认为是过早的优化。然而，在实践中，几乎通用的约定是通过引用 const 来传递类类型，而不是通过值。

引用也可以用作输出参数；与指针相比，它们的优点是它们不能为空。

引用也可用于为类数据提供一个“窗口”。经典的例子是`operator[]`in的重载`std::vector`；它返回一个引用，以便您可以修改、获取数组中实际元素的地址等。

除了作为参数和返回值之外，在上述情况下，引用很少见。例如，如果你使用一个作为类成员，你必须知道你不能给类经典赋值语义。（如果类不支持赋值，这不是问题。）作为全局变量，它们可能用于隐藏所引用内容的实现，但这非常罕见。作为一个局部变量，我知道的唯一用途是缓存另一个返回引用的表达式的结果：例如，如果我`someMap[aKey]`在一小段代码中多次访问，那么写：

```
ValueType& element = someMap[aKey]; 
```

在开始时，然后使用`element`。（请注意，这仅有意义，因为`someMap[aKey]`返回引用。）

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-04T14:08:43.640

引用使引用调用更容易，因为调用`&`者在传递对象时不必使用运算符。

像这样：

```
MyObject ob;

void foo_ref(MyObject& o){ ...}
void foo_ptr(Myobject* o){ ...}

//call

foo_ref(ob);
foo_ptr(&ob); 
```

此外，它们可以在函数中初始化指针：

```
MyObject* ob = nullptr;
MySubject* sub = nullptr;

void foo_init(MyObject *& o, MySubject *& s) {

   o = new MyObject;
   s = new MySubject;
}

//call

foo_init(ob, sub); 
```

如果没有对指针的引用，此示例只能使用指向指针的指针，这会使代码看起来很糟糕，因为您必须首先取消对每个参数的引用

```
MyObject* ob = nullptr;
MySubject* sub = nullptr;

void foo_init(MyObject ** o, MySubject ** s) {

   *o = new MyObject;
   *s = new MySubject;
}

//call

foo_init(&ob, &sub); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-04T14:00:57.053

例如，因为它们强迫您进行初始化，这使它们的危险性降低

# javascript - 是否可以在没有身份验证对话框的情况下从页面选项卡中检测用户是否喜欢 facebook 页面？

> ID：12728799
> 
> 赞同：0
> 
> 时间：2012-10-04T13:51:49.403
> 
> 标签：javascript, facebook, facebook-graph-api

我一直在筛选有关如何使用 FB javascript api 来检查用户是否喜欢页面并根据其显示不同页面选项卡内容的不同方法。

我已经看到一个产品页面的示例，它使用一个页面选项卡来为喜欢或不喜欢该产品的用户显示不同的内容，但是这个（显示不同的内容）本身并不需要一个请求应用程序访问的弹出窗口。从 SO 上找到的示例中，我可以发出 FB.getLoginStatus 请求来获取我需要的信息，但不能不将用户发送到登录/对话框请求特定页面应用程序的权限。

在没有应用访问权限请求的情况下如何做到这一点（检测类似页面）？

-

从我收集的所有示例中，我发现请求应用程序访问权限是强制性的，但这里有一个示例，如果您喜欢/不喜欢，选项卡的内容会发生变化，但它本身并不需要应用程序访问权限请求：[http ://www.facebook.com/HifiStudioSuomi/app_514442371917093](http://www.facebook.com/HifiStudioSuomi/app_514442371917093)（抱歉，如果此链接将来可能不可用 - 这是让我想知道如何做到这一点的一个应用程序：/）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:43:02.853

这是通过`signed_request`参数完成的，该参数在初始加载到 iframe 时发布到页面选项卡应用程序。

但是，由于它是 POST 的，因此您无法通过 JavaScript 访问它——因此，如果您想访问此信息，则必须使用某种服务器端技术。

# php - 我需要有关数组对象的帮助

> ID：12728804
> 
> 赞同：-1
> 
> 时间：2012-10-04T13:51:58.180
> 
> 标签：php

例如我有这个操作：

```
foreach ($data as $item)
{
    $arr[] = array(
      'subjcode' => $item->subjCode,
      'subjdesc' => $item->subjDesc,
      'lab' => $item->lab,
      'lec' => $item->lec,
      'units' => $item->units,
    );
} 
```

我将如何使用这样的 foreach 在表格的一行中显示它们中的 5 个（此代码是错误的，但这是我想要做的。应该改变什么？）：

```
foreach($arr as $val)
{
   echo '<tr>';
       echo '<td>'.$val->subjcode.'</td>';
       echo '<td>'.$val->subjdesc.'</td>';
       echo '<td>'.$val->lab.'</td>';
       echo '<td>'.$val->lec.'</td>';
       echo '<td>'.$val->units.'</td>';
  echo '</tr>';
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:00:34.213

如果您只想显示 5 个元素的 subjCode，那么您需要这样做：

```
echo '<tr>';
foreach ($arr as $val)
{
    echo '<td>'.$val['subjCode'].'</td>';
}
echo '</tr>'; 
```

这将显示一个`tr`元素，然后在`td`每个 subjCode 中，然后关闭`tr`.

请注意，尽管在数组中分配变量时使用的是对象，但该变量被设置为数组的元素而不是对象。

如果我们假设 $item->subjCode 是“Hello”，那么你在做的`$arr`是：

```
$arr['subjcode'] = 'Hello'; 
```

如果要在数组中使用对象，则需要将分配更改为：

```
foreach ($data as $item)
{
    $new_item           = new stdClass();
    $new_item->subjCode = $item->subjCode;
    $new_item->subjDesc = $item->subjDesc;
    $new_item->lab      = $item->lab;
    $new_item->lec      = $item->lec;
    $new_item->units    = $item->units;

    $arr[] = $new_item;
} 
```

或者

```
foreach ($data as $item)
{
    $new_item = array(
        'subjcode' => $item->subjCode,
        'subjdesc' => $item->subjDesc,
        'lab'      => $item->lab,
        'lec'      => $item->lec,
        'units'    => $item->units,
    );

    $arr[] = (object) $new_item;
}
$arr[] = 
```

}

或者如果你的 $item 元素不是很大并且你不介意存储它，你只需使用这个：

```
foreach ($data as $item)
{
    $arr[] = $item;
} 
```

但是话又说回来，上面的目的是什么，因为您已经在`$data`变量中拥有数据...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T13:56:22.367

如果你想这样回应：

```
foreach ($data as $item)
{
    $tempArray = array(
      'subjcode' => $item->subjCode,
      'subjdesc' => $item->subjDesc,
      'lab' => $item->lab,
      'lec' => $item->lec,
      'units' => $item->units,
    );
    $arr[] = (object)$tempArray;
} 
```

那么你的回声应该可以工作；

你想看看[这里](http://www.richardcastera.com/blog/php-convert-array-to-object-with-stdclass)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:00:58.537

你可以试试这个。

```
$val = (object)$arr 
```

参考：[http ://www.richardcastera.com/blog/php-convert-array-to-object-with-stdclass](http://www.richardcastera.com/blog/php-convert-array-to-object-with-stdclass)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T13:54:49.757

`echo '<td>'.$val['subjcode'].'</td>';`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T13:54:35.973

您已将对象重建为数组。所以使用：

```
foreach($arr as $val)
{
   echo '<tr>';
   echo '<td>' . $val['subjCode'] . '</td>';
   ...
   echo '</tr>';
} 
```

# java - Gradle JAR：依赖 jar 和实际类的顺序

> ID：12728805
> 
> 赞同：2
> 
> 时间：2012-10-04T13:52:00.100
> 
> 标签：java, ant, jar, gradle

我的 build.gradle：

```
jar {
    dependsOn configurations.runtime
    from { configurations.runtime.collect { it.isDirectory() ? it : zipTree(it) } }

    manifest {
        attributes(
            'Main-Class': 'com.company.product.veryNiceMainClass'
        )
    }
} 
```

我想告诉 Gradle 首先选择依赖 JAR，然后在创建 JAR 时选择实际的实现类，可能会覆盖一些东西。这是实际项目的必备条件。我做了一些 RTFM 但没有帮助。您可以在 ant 中执行此操作：

```
<target name="dist">
    <!-- deps first -->     
    <jar destfile="${dist.dir}/${ant.project.name}-${build.version}.jar">
        <zipgroupfileset dir="${lib.dir}" includes="**/*-jar-*.jar" />
        <zipgroupfileset dir="${lib.dir}" includes="**/*-bundle-*.jar" />
        <zipgroupfileset dir="${basedir}/lib-old" includes="**/*.jar" />
    </jar>
    <!-- classes, UPDATE (!) the JAR -->
    <jar destfile="${dist.dir}/${ant.project.name}-${build.version}.jar" update="true">
        <fileset dir="${build.classes.dir}" />
    </jar>
</target> 
```

有任何想法吗？

编辑：解决方案已验证（感谢 Ingo）。只需按照您希望的顺序定义多个 from 语句。

```
from { configurations.runtime.collect { it.isDirectory() ? it : zipTree(it) } } // deps
from sourceSets.main.output.classesDir // classes
from 'log4j.properties' // some file 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:58:23.707

您可以为任务定义多个`from`语句`jar`，生成的文件将按该顺序处理。

# sbt - 如何在 SBT 中获取内部项目依赖 jar 路径

> ID：12728809
> 
> 赞同：3
> 
> 时间：2012-10-04T13:52:03.710
> 
> 标签：sbt

我正在 SBT 中实现自定义部署任务，我需要将所有必需的 jar 复制到部署文件夹。我能够使用`update`TaskKey 获取所有外部依赖项的路径。不幸的是 updateReport 不包括内部依赖。这是我的简单配置

```
val deploy = TaskKey[Unit]("deploy","deploy")

lazy val projectA = Project(id=project-a,
settings=Project.defaultSettings)

lazy val projectB = Project(id=project-b,
settings=Project.defaultSettings) dependsOn(projectA)

lazy val projectC = Project(id=project-c,
settings=Project.defaultSettings, ++ Seq(deployTask)) dependsOn(projectB)

val deployTask = deploy <<= (update) map {(updateReport) =>
val externalDependency = updateReport.allFiles //paths to all external dependencies are available here
//project-a.jar and project-b.jar are not here
} 
```

所以，问题是如何获得内部项目依赖项的绝对路径，即 project-a.jar、project-b.jar

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-05T22:31:40.617

如果设置[`exportJars`](http://www.scala-sbt.org/howto/package.html)属性：

```
exportJars := true 
```

然后

```
exportedProducts in Compile 
```

应该为您提供项目的 jar 文件的路径：

```
> show export-jars
[info] true
> show exported-products
[info] List(Attributed(/Users/luke/Work/myproject/server/target/scala-2.9.2/server_2.9.2-0.3-SNAPSHOT.jar))
[success] Total time: 0 s, completed Oct 5, 2012 11:29:51 PM 
```

# vb.net - 是否可以将 TextFieldParser 与 Byte 一起使用？

> ID：12728810
> 
> 赞同：3
> 
> 时间：2012-10-04T13:52:08.943
> 
> 标签：vb.net, file-io, csv

是否可以使用 TextFieldParser `Byte`？我正在使用通过 Web 服务上传文件`Byte`，但在确定是否可以直接访问此 CSV 或是否需要先将其写入磁盘时遇到了一些麻烦。将其写入磁盘很容易，但我不相信我需要这样做。

[TextFieldParser](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.textfieldparser.aspx)接受`System.IO.Stream`, `System.String`（文件路径），或者`System.IO.TextReader`我不知道是否可以轻松地将 Byte 放入其中之一。

这就是我正在看的和我想做的（这段代码不起作用）

```
Public Function Import(ValidationKey As String, FileBytes() As Byte) As String

    Using MyReader As New Microsoft.VisualBasic.FileIO.TextFieldParser(FileBytes)
        MyReader.TextFieldType = FileIO.FieldType.Delimited
        MyReader.SetDelimiters(",")
        'other code here
    End Using

    'other code here

End Function 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T13:55:30.440

您可以将`byte`数组读入[`MemoryStream`](http://msdn.microsoft.com/en-us/library/system.io.memorystream.aspx)-`TextFieldParser`将接受它。

```
Using MemStream As New MemoryStream(FileBytes)
    Using MyReader As New Microsoft.VisualBasic.FileIO.TextFieldParser(MemStream)
        MyReader.TextFieldType = FileIO.FieldType.Delimited
        MyReader.SetDelimiters(",")
        'other code here
    End Using
End Using 
```

# facebook - 修改现有访问令牌权限

> ID：12728811
> 
> 赞同：0
> 
> 时间：2012-10-04T13:52:14.220
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

我有一个 facebook 应用程序，它使用访问令牌来设置/获取来自 facebook 的帖子。我想为此访问令牌添加新权限，有什么办法可以做到吗？（我想添加 rsvp_event 权限）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T14:09:15.543

您不能向现有令牌添加权限，因为用户需要接受它们。

因此，您需要请求具有此附加权限的新令牌，并且您的用户需要在您获得新生成的令牌之前接受它。

# facebook - Facebook api，如何测试一个动作是否有权限

> ID：12728812
> 
> 赞同：0
> 
> 时间：2012-10-04T13:52:15.213
> 
> 标签：facebook, facebook-graph-api

我正在做一个自动发布系统，因此用户可以通过我的应用发布内容。问题是我想在执行之前检测该帖子是否可行。

有些用户有公开帖子但不允许回复，如果我尝试回复他们的帖子，我会得到：

```
{"error":{"message":"(#210) User not visible","type":"OAuthException","code":210}} 
```

我想在执行操作之前检查是否可以执行我的操作。发布测试令牌然后删除它不是一种选择。

如果有人有任何提示，请分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:39:40.297

[FQL 用户表](https://developers.facebook.com/docs/reference/fql/user/)有一列`can_post`：

> 可以_post | 布尔 | 查看者是否可以发布到用户的墙。

# android - 键盘覆盖了部分编辑文本

> ID：12728813
> 
> 赞同：2
> 
> 时间：2012-10-04T13:52:18.027
> 
> 标签：android

我有一个数字选择器，但我的键盘没有像我想要的那样显示。

屏幕：

![在此处输入图像描述](../Images/cff0ab94982ab01f02bdc3f7d935b202.png)

如您所见，键盘覆盖了编辑文本的一部分。

如何在**不使用滚动视图的情况下**解决此问题？

我已经尝试过设置 android:windowSoftInputMode="adjustPan" 或 "adjustResize"。

当我使用滚动视图时，我遇到以下问题： [将焦点更改为下一个编辑文本时，屏幕会移动一点](https://stackoverflow.com/questions/12669308/screen-shifts-a-bit-when-change-focus-to-next-edittext)

谢谢 ：）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-04T14:20:03.137

在清单文件中设置活动属性

`android:windowSoftInputMode="adjustResize|stateHidden"`

喜欢 ：

```
<activity
            android:name=".LoginActivity"
            android:label="@string/app_name"
            android:screenOrientation="portrait"
            android:theme="@android:style/Theme.Black.NoTitleBar"
            android:windowSoftInputMode="adjustResize|stateHidden" > 
```

它应该工作

# php - 使用正则表达式替换文本，同时去除换行符和引号

> ID：12728821
> 
> 赞同：0
> 
> 时间：2012-10-04T13:52:39.607
> 
> 标签：php, regex, preg-replace, pcre

这现在主要是学术性的，因为我可以通过其他方式获得相同的结果，但是……它一直困扰着我，我敢肯定使用正则表达式是可能的。

我想使用 PHP 的 preg_replace 来替换内容：

```
Content: “String <tag>This is some content, which contains newlines and quotation marks.</tag> and other unrelated content”.

Regex: /<tag>(.*)<\/tag>/sU

Replace: “String of other content, including matched pattern $1” 
```

但是问题是，我想去掉元素之间的任何换行符和/或引号。什么正则表达式可以让我这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:58:58.993

PHPs preg_replace() 对主题进行一次性处理。您实际上可以指定一组模式和替换，但是主题字符串的每个部分只有一个匹配。使用单个正则表达式当然没有解决方案，因为这个问题不在常规语言中。理论计算机科学告诉你，你需要一个有状态的自动机来完成这样的任务。正则表达式是原始的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T15:42:29.477

正如 arkascha 指出的那样，这并不是一个可以一次性轻松完成的问题。

它可以在 Perl 中一步完成：

```
use strict;
use warnings;
my $string = "blah <tag> foo \"bar \n </tag> baz";

$string =~ s/(?<=\<tag\>)([^<]+)(?=\<\/tag\>)/$_=$1;s|[\n\"]||gs;$_/ges;

print $string; 
```

这利用了 Perl 允许您使用代码来生成替换字符串的事实。

我不知道是否可以在 PHP 中完成类似的操作。无论如何，这不是一个好的现实世界代码设计。但这很有趣。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T16:24:13.453

不容易，但有可能。

试试这个**PHP 代码**：

```
function myFn($a, $b, $c) {
  $b = preg_replace("!(?:\\\'|[\"\n\r])!", '', $b);
  return "BEGIN " . $b . " END";
}
$s = "abc <tag>def \n ghi 'jkl' mno \"pqr\" stu</tag> vwx";
$s = preg_replace('!(<tag>)(.*?)(</tag>)!ise', 'myFn("$1", "$2", "$3")', $s);
print $s; 
```

输出：

```
abc BEGIN def  ghi jkl mno pqr stu END vwx 
```

[在此处](http://ideone.com/dNvI8)测试此代码。

# html - 使用 MVC，如何在表单提交上传递锚标记？

> ID：12728827
> 
> 赞同：1
> 
> 时间：2012-10-04T13:52:50.263
> 
> 标签：html, asp.net-mvc

简而言之，我试图在我提交的页面上找到一个锚点。

所以我的代码看起来像：

```
@using (Html.BeginForm("Times#" + Model.SelectedTimeSort, "Patron", FormMethod.Post, new { id = "frmBuildings" })) 
```

但在形式上它是：

```
<form action="/Times%23Evening" id="frmBuildings" method="post"> 
```

如何设置它以提交和传递锚标记？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:06:18.873

假设您在应用程序上发布到另一个 MVC 方法：

您需要向页面添加一些 JavaScript，然后在 ViewModel 中添加在 MVC 控制器回发代码中设置的 Anchor 字符串属性，当视图加载时，javascript (onLoad) 可以检测参数并将页面滚动到锚点：

```
location.hash = "#" + "@(Model.MyAnchorName)"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-28T23:11:27.447

只需摆脱 Html.BeginForm 并使用带有 Url.Action的 html**表单标签**

```
<form action="@Url.Action("Times", "Patron")#@Model.SelectedTimeSort" id="frmBuildings" method="post">
</form> 
```

根据正确答案依赖javascript似乎只是为了保留“BeginForm”。

# mysql - 了解 MySQL 查询中的多列索引

> ID：12728832
> 
> 赞同：70
> 
> 时间：2012-10-04T13:53:21.610
> 
> 标签：mysql, indexing

这是查询：

```
SELECT * FROM table WHERE accountid = 1 ORDER BY logindate DESC LIMIT 1 
```

现在，如果我在字段上添加了一个包含多列的索引：

```
INDEX(accountid,logindate) 
```

MySQL 会利用这个多列索引吗？或者它不会因为一个字段在 where 子句中而另一个字段在 order 语句中而不使用它？或者只要我按照多列索引的顺序使用字段就没有关系？

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-04T13:59:56.840

好问题。

索引从左到右工作，因此您的`WHERE`标准将使用索引。在这种情况下，排序也将使用索引（下面的执行计划）。

从[手册](http://dev.mysql.com/doc/refman/5.0/en/order-by-optimization.html)：

> 即使`ORDER BY`索引不完全匹配索引，也可以使用索引，只要索引的所有未使用部分和所有额外`ORDER BY`列都是`WHERE`子句中的常量。以下查询使用索引来解析`ORDER BY`部件：
> 
> ```
> SELECT * FROM t1
> WHERE key_part1=constant
> ORDER BY key_part2; 
> ```

如果您有一个单列索引 ( `accountid`)，则将使用文件排序。因此，您的查询确实受益于该索引。

* * *

## 两列索引

```
create table t1 (
  accountid tinyint,
  logindate date);

create index idx on t1 (accountid, logindate);

insert into t1 values (1, '2012-09-05'), (2, '2012-09-09'), (3, '2012-09-04'), 
    (1, '2012-09-01'), (1, '2012-09-26'), (2, '2012-05-16'), 
    (1, '2012-09-01'), (3, '2012-10-19'), (1, '2012-03-01') 
```

**执行计划**

```
ID SELECT_TYPE TABLE TYPE POSSIBLE_KEYS KEY KEY_LEN REF ROWS FILTERED EXTRA
1 SIMPLE t1 ref idx idx 2 const 5 100 使用 where；使用索引
```

## 单列索引

```
create table t1 (
  accountid tinyint,
  logindate date);

create index idx on t1 (accountid);

insert into t1 values (1, '2012-09-05'), (2, '2012-09-09'), (3, '2012-09-04'), 
    (1, '2012-09-01'), (1, '2012-09-26'), (2, '2012-05-16'), (1, '2012-09-01'), 
    (3, '2012-10-19'), (1, '2012-03-01') 
```

**执行计划**

```
ID SELECT_TYPE TABLE TYPE POSSIBLE_KEYS KEY KEY_LEN REF ROWS FILTERED EXTRA
1 SIMPLE t1 range idx idx 2 5 100 使用 where；使用文件排序
```

# image - jsp中对数据库中blob类型图像的分页

> ID：12728839
> 
> 赞同：0
> 
> 时间：2012-10-04T13:53:47.543
> 
> 标签：image, jsp, pagination, blob

我尝试使用此分页代码从 mysql 数据库中获取图像（blob 类型），并显示在我的 jsp 页面上。我想让它像 Yotube 之类的网站一样发生，当用户搜索视频文件时，用户可以以分页方式查看缩略图格式的视频列表。我想做这样的事情。为此，我尝试了以下代码，但仅显示数据库中的一张图像。

```
 <%@page import="java.io.InputStream"%>
        <%@page import="java.io.OutputStream"%>
        <%@page contentType="text/html" pageEncoding="UTF-8"%>
        <%@page import="java.util.*,xugglerPack.bean"%>
        <%@page import="java.sql.*"%>
        <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
         "http://www.w3.org/TR/html4/loose.dtd">

       <%
          String myfile = session.getAttribute("myfile").toString();
       %>

       <html lang="en-US" xmlns="http://www.w3.org/1999/xhtml" dir="ltr">
       <head>

       <meta http-equiv="Content-type" content="text/html; charset=utf-8" />

       </head>
       <body>
       <div>

       <div>
            <ul>
                <li>
                    <%String user = (String) session.getAttribute("thisuser");%>
                    <%=user%>
                </li>

                <li>
                    <div>
                        <a href="logout.jsp"> Logout </a>
                    </div>

                </li>

            </ul>

        </div>

        <div>&nbsp;</div>
      </div>
      <div>

        <%!
            public int nullIntconvert(String str) {
                int num = 0;
                if (str == null) {
                    str = "0";
                } else if ((str.trim()).equals("null")) {
                    str = "0";
                } else if (str.equals("")) {
                    str = "0";
                }
                try {
                    num = Integer.parseInt(str);
                } catch (Exception e) {
                }
                return num;
            }
        %>
        <%

                    Blob image = null;

                    byte[] imgData = null;

                    Statement stmt = null;

                    ResultSet rs = null;

                    Connection conn = null;
                    Class.forName("com.mysql.jdbc.Driver").newInstance();
                    conn =  

           DriverManager.getConnection("jdbc:mysql://localhost:3306/lakhya","root",    
           "pass");
                    ResultSet rs1 = null;
                    ResultSet rs2 = null;
                    PreparedStatement ps1 = null;
                    PreparedStatement ps2 = null;

                    int showRows = 2;
                    int totalRecords = 10;
                    int totalRows = nullIntconvert(request.getParameter("totalRows"));
                    int totalPages = 
                    nullIntconvert(request.getParameter("totalPages"));
                    int iPageNo = nullIntconvert(request.getParameter("iPageNo"));
                    int cPageNo = nullIntconvert(request.getParameter("cPageNo"));

                    int startResult = 0;
                    int endResult = 0;
                    if (iPageNo == 0) {
                        iPageNo = 0;
                    } else {
                        iPageNo = Math.abs((iPageNo - 1) * showRows);
                    }
                    String query1 = "SELECT SQL_CALC_FOUND_ROWS thumbnail FROM files 
           where fname like '%" + myfile + "%' limit " + iPageNo + "," + showRows + "";
                    ps1 = conn.prepareStatement(query1);
                    rs1 = ps1.executeQuery();

                    String query2 = "SELECT FOUND_ROWS() as cnt";
                    ps2 = conn.prepareStatement(query2);
                    rs2 = ps2.executeQuery();
                    if (rs2.next()) {
                        totalRows = rs2.getInt("cnt");

                    }
                    if (totalRows == 0) {
        %>
        <table style="margin-left:450px">
            <tr>
                <td><b><font color="whitesmoke">No Results..</font> </b></td>
            </tr>

        </table>

        <%                                                            } else {
        %>
        <form>
            <input type="hidden" name="iPageNo" value="<%=iPageNo%>"/>
            <input type="hidden" name="cPageNo" value="<%=cPageNo%>"/>
            <input type="hidden" name="showRows" value="<%=showRows%>"/>
            <table style="margin-left:450px;margin-top: 15px;"width="50%" 
            cellpadding="0" cellspacing="0">

                <%

                                                String imgLen = "";
                                                if (rs1.next()) {
                                                    imgLen = 
                                                rs1.getString("thumbnail");

                                                    System.out.println("the image    
                                                length is" + imgLen.length());
                                                }
                                                String query11 = "SELECT thumbnail FROM 
                                            files where fname like '%" + myfile + "%'";
                                                ps1 = conn.prepareStatement(query11);
                                                rs1 = ps1.executeQuery();
                                                while (rs1.next()) {
                                                int len = imgLen.length();
                                                byte[] rb = new byte[len];
                                                InputStream readImg = 
                                                  rs1.getBinaryStream(1);
                                                int index = readImg.read(rb, 0, len);
                                                System.out.println("the index is " + 
                                                index);
                                                //stmt.close();
                                                response.reset();
                                                response.setContentType("image/jpg");

                %>
                <tr>
                    <td style="padding-bottom:2em">
                        <%  response.getOutputStream().write(rb, 0, len);

                response.getOutputStream().flush();
                        %>
                    </td>
                </tr> 

                <%
                                }

                            }

                %>

                <%
                            try {
                                if (totalRows < (iPageNo + showRows)) {
                                    endResult = totalRows;
                                } else {
                                    endResult = (iPageNo + showRows);
                                }
                                startResult = (iPageNo + 1);
                                totalPages = ((int) (Math.ceil((double) totalRows / 
                            showRows)));
                            } catch (Exception e) {
                                e.printStackTrace();
                            }
                %>

            </table>
            <br/>
            <table style="margin-left:450px">
                <tr>
                    <td colspan="1">
                        <div>
                            <%
                                        int i = 0;
                                        int cPage = 0;
                                        if (totalRows != 0) {
                                            cPage = ((int) (Math.ceil((double) 
                                      endResult / (totalRecords * showRows))));

                                            int prePageNo = (cPage * totalRecords) - 

                                            ((totalRecords - 1) + totalRecords);
                                            if ((cPage * totalRecords) - (totalRecords) 
                                       > 0) {
                            %>
                            <a href="add2list.jsp?iPageNo=<%=prePageNo%>&cPageNo=
                            <%=prePageNo%>"> << Previous</a>
                            <%
                                                                            }
                             for (i = ((cPage * totalRecords) - (totalRecords - 1)); 
                             i <= (cPage * totalRecords); i++)
                                {
                             if (i == ((iPageNo / showRows) + 1)) 
                                 {%>
                            <a href="add2list.jsp?iPageNo=<%=i%>" 
                             style="cursor:pointer;color: red"><b><%=i%></b></a>
                            <%

                             } else if (i <= totalPages) {
                            %>
                            <a href="add2list.jsp?iPageNo=<%=i%>"><%=i%></a>
                            <%
                                                                                }
                                                                            }
                                                                            if 
                             (totalPages > totalRecords && i < totalPages) {
                            %>

                            <a href="add2list.jsp?iPageNo=<%=i%>&cPageNo=<%=i%>"> >> 
                             Next</a>
                            <%
                                            }
                                        }
                            %>
                            <font color="whitesmoke"><b>Rows <%=startResult%> - 
                             <%=endResult%> Total Rows <%=totalRows%> </b></font>

                        </div>
                    </td>
                </tr>
            </table>

        </form>

        <%
                    try {
                        if (ps1 != null) {
                            ps1.close();
                        }
                        if (rs1 != null) {
                            rs1.close();
                        }

                        if (ps2 != null) {
                            ps2.close();
                        }
                        if (rs2 != null) {
                            rs2.close();
                        }

                        if (conn != null) {
                            conn.close();
                        }
                    } catch (Exception e) {
                        e.printStackTrace();
                    }
                 %>

            </div>

           </body>
           </html> 
```

# php - 正确使用bind_param？

> ID：12728842
> 
> 赞同：0
> 
> 时间：2012-10-04T13:53:53.347
> 
> 标签：php, mysql, mysqli, bindparam

我正在为一个应用程序（学校工作）登录，我正在学习如何以正确的方式使用 mysqli 类。以下是我的应用程序中的两种方法，用于检查用户输入的用户名和密码是否正确（即数据库中存在）。

我的问题是，这是否是使用 bind_param 的正确方法，或者将其用于此目的是否可能是“矫枉过正”？可以/应该以其他方式完成吗？

**来自 LoginModel.php**

```
public function DoLogin($username, $password){

    $query = "SELECT * FROM Users WHERE username=? AND password=?"; 
    $stmt = $this->m_db->Prepare($query);

    $stmt->bind_param("ss", $username, $password);

    $ret = $this->m_db->CheckUser($stmt);

    return $ret;
} 
```

**来自 Database.php**

```
public function CheckUser($stmt) {

    if ($stmt->execute() == false) {
        throw new \Exception($this->mysqli->error);
    }
    $ret = 0;

    // $field1 = id, $field2 = username, $field3 = password
    if ($stmt->bind_result($field1, $field2, $field3) == FALSE) {
        throw new \Exception($this->mysqli->error);
    }

    if ($stmt->fetch()) {
        return true;        // Match exists in db           
    } else {
        return false;       // Match doesn't exist in db
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T13:57:40.417

不，这不是矫枉过正。的目的`bind_param`是允许 MySQLi 引擎准备命令以防止不良影响。最常见的是，它有助于防止 SQL 注入类型的攻击。您正在按照您应该使用的方式使用它。

# c# - 如何将带有可选参数的方法作为参数传递？

> ID：12728844
> 
> 赞同：2
> 
> 时间：2012-10-04T13:54:00.170
> 
> 标签：c#, delegates, optional-parameters

比如说，我们有一个包含可选参数`ClassA`的方法。`Foo`因此，我们可以按照方法中所示使用它`DoFoo`。

```
public class ClassA
{
    public ClassA() { }

    public void Foo(bool flag = true)
    {
    }

    public void DoFoo()
    {
        Foo(); // == Foo(true);
    }
} 
```

一旦我需要将它传递给另一个班级`ClassB`。首先，我尝试将其传递为`Action`，但签名肯定不匹配。然后我将它作为 传递`Action<string>`，签名匹配，但参数 in`ClassB`不再是可选的。但我确实想让它成为可选的，并想出了一个想法来声明一个代表。所以，它奏效了。

```
public delegate void FooMethod(bool flag = true);

public class ClassB
{
    Action<bool> Foo1;
    FooMethod Foo2;

    public ClassB(Action<bool> _Foo1, FooMethod _Foo2)
    {
        Foo1 = _Foo1;
        Foo2 = _Foo2;
    }

    public void DoFoo()
    {
        Foo1(true);
        Foo2(); // == Foo2(true);
    } 
```

所以，问题是：我能否以某种方式将带有可选参数的方法作为参数传递，而不显式声明委托并保持其参数的可选质量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T13:59:21.087

> 所以，问题是：我能否以某种方式将带有可选参数的方法作为参数传递，而不显式声明委托并保持其参数的可选质量？

不。“可选性”是方法签名的一部分，编译器需要*在编译时*知道它以提供默认值。如果您使用的委托类型*没有*可选参数，那么当您尝试在没有足够参数的情况下调用它时，编译器会做什么？

最简单的方法可能是包装它：

```
CallMethod(() => Foo()); // Compiler will use default within the lambda.
...
public void Foo(bool x = true) { ... }

public void CallMethod(Action action) { ... } 
```

# c++ - ostream：在正数前加一个空格

> ID：12728848
> 
> 赞同：7
> 
> 时间：2012-10-04T13:54:08.693
> 
> 标签：c++

在 C 中，空格可以包含在 printf 格式化标志中，这会导致正数以空格为前缀。这是对齐有符号值的有用功能。我不知道如何在 C++ 中做同样的事情。在 C 中：

```
double d = 1.2;
printf("%f\n",d);
printf("%+f\n",d);
printf("% f\n",d); 
```

产生：

```
1.2
+1.2
 1.2 
```

使用ostream，我可以做前两个，但我怎么做第三个？

```
int d = 1.2;
std::cout << d << std::endl;
std::cout << std::showpos << d << std::endl;
// ?????????????? 
```

编辑：关于我是否只想在我的所有值前面加上一个空格似乎有些困惑。我只想在*正值*前加上一个空格，类似于 a) 就像 printf 空间标志所做的那样和 b) 类似于 showpos 所做的那样，除了空格而不是“+”。例如：

```
printf("%f\n", 1.2);
printf("%f\n", -1.2);
printf("% f\n", 1.2);
printf("% f\n", -1.2);

1.2
-1.2
 1.2
-1.2 
```

请注意，第三个值以空格为前缀，而第四个（负）值则没有。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T14:01:36.023

您可以使用`setfill`and `setw`，如下所示：

```
cout << setw(4) << setfill(' ') << 1.2 << endl;
cout << setw(4) << setfill(' ') << -1.2 << endl; 
```

这会产生以下输出：

```
 1.2
-1.2 
```

不要忘记包含`<iomanip>`以便编译（[指向 ideone 的链接](http://ideone.com/pCQ0M)）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-04T14:22:09.483

我没有自己的标准，而且我做这些事情的次数太少以至于无法对此充满信心：使用 IOStreams 实现这一目标有两个要素：

1.  用于`std:: showpos`显示正值指示符。当然，默认情况下这将使用`+`。
2.  我*认为*是`+`使用`std::use_facet<std::ctype<char> >(s.get_loc()).widen('+')`. 要将其转换为空间，您只需使用安装`std::locale`了`std::ctype<char>`facet 的 a 以响应要*加宽* `+`的请求的空间。

也就是说，像这样：

```
struct my_ctype: std::ctype<char> {
    char do_widen(char c) const {
        return c == '+'? ' ': this->std::ctype<char>::do_widen(c);
    }
};

int main() {
    std::locale loc(std::locale(), new my_ctype);
    std::cout.imbue(loc);
    std::cout << std::showpos << 12.34 << '\n';
} 
```

（代码未经测试，可能充满错误）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-04T14:00:10.353

怎么样

```
std::cout << (d >= 0 ? " ":"")  << d << std::endl; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T13:54:57.720

```
std::cout << " " << my_value; 
```

如果您只需要正面的空间：

```
if (my_value >=0 ) cout << " "; cout << my_value; 
```

# web-applications - Web表单/所见即所得编辑器的注释/评论

> ID：12728854
> 
> 赞同：1
> 
> 时间：2012-10-04T13:54:26.513
> 
> 标签：web-applications, annotations, comments, wysiwyg, web-application-design

我正在构建一个用户可以在其中撰写文章的 Web 应用程序。它是用 PHP/mySQL 编写的。

目前我使用一个简单的文本表单，用户可以在其中编写他们的内容。格式化稍后由 XML 导出/布局应用程序完成。

但是：用户想为彼此分享评论。要理解：Microsoft Word 有一个很好的评论功能。每个用户的评论都有讲话泡泡。目前，用户将他们的内容写在 Word 文档中，并通过电子邮件相互发送。

现在：有谁知道所见即所得编辑器（如“MarkItUp！”）中评论/注释的解决方案？或 TinyMCE。我目前不使用任何所见即所得，所以我可以实现其中任何一个。或者其他一些方法来做到这一点......

一个想法是实现一个评论功能，就像一个附加的文本框一样——但这不允许对单个单词/句子进行评论。

我找到了[http://www.youtube.com/watch?v=WzaCj6KGvWs](http://www.youtube.com/watch?v=WzaCj6KGvWs)，但我找不到要下载的插件。

非常感谢您的任何想法。席尔万

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-18T14:44:43.120

这就是你要找的： http: [//nytimes.github.io/ice/demo/](http://nytimes.github.io/ice/demo/)

# java - 如何在eclipse中的java中使用if（DEBUG）？

> ID：12728857
> 
> 赞同：2
> 
> 时间：2012-10-04T13:54:30.313
> 
> 标签：java, eclipse, debugging

我知道我提出了一个非常愚蠢的问题，但我保证我确实尝试过搜索设置以及谷歌和网络，但没有运气，所以我想我应该问一下。

我在很多开源项目中看到以下行：

```
if(DEBUG){
    //  do some logging
} 
```

我完全理解这条线在做什么，我似乎无法重复它。代码中没有任何地方的声明`boolean DEBUG;`，我无法在项目属性上找到一个位置来定义要在编译时替换的系统范围变量（转换为字节码）。据我所知，如果它是对应该是`Log.DEBUG`或类似的类常量的引用。

谁能帮我解开这个谜？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-04T18:47:45.283

你真的应该看看类的导入部分。

它可能是[静态导入](http://docs.oracle.com/javase/1.5.0/docs/guide/language/static-import.html)，如下所示：

* * *

爪哇

```
public class A {
    public static boolean DEBUG = false;
} 
```

* * *

B.java

```
import static A.DEBUG;

public class B {
  public void myMethod() {
    if (DEBUG) {
      // do something
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:28:01.720

您在前面`public static field`，查看`import`列表并选择原始类，或者使用 Eclipse 中的内联帮助，如评论中所述

# java - Java 性能问题 - Tomcat WebappClassLoader 被锁定

> ID：12728860
> 
> 赞同：4
> 
> 时间：2012-10-04T13:54:33.267
> 
> 标签：java, json, performance, struts, tomcat7

过去几天我在对我的产品进行性能测试时遇到了这个奇怪的问题，我使用的是 java 6、struts 3 框架和 tomcat 7 服务器

在性能测试期间，我们开始加载数千个 UI 请求访问服务器，最初它运行良好，但几个小时后请求开始被阻止，随后 CPU 使用率飙升至 100%，甚至 UI 变得无法访问。当我接受用于分析以下问题的线程转储是我一直得到的。

```
""http-nio-8443"-exec-1305" daemon prio=10 tid=0x00007f0458538000 nid=0x56dd waiting for monitor entry [0x00007f04345c9000]
   java.lang.Thread.State: BLOCKED (on object monitor)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:247)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1663)
    - locked <0x00000000a162f0c0> (a org.apache.catalina.loader.WebappClassLoader)
    at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1521)
    at java.beans.Introspector.instantiate(Introspector.java:1448)
    at java.beans.Introspector.findExplicitBeanInfo(Introspector.java:431)
    at java.beans.Introspector. (Introspector.java:380)
    at java.beans.Introspector.getBeanInfo(Introspector.java:232)
    at java.beans.Introspector.getBeanInfo(Introspector.java:218)
    at com.googlecode.jsonplugin.JSONWriter.bean(JSONWriter.java:169)
    at com.googlecode.jsonplugin.JSONWriter.process(JSONWriter.java:152)
    at com.googlecode.jsonplugin.JSONWriter.value(JSONWriter.java:120)
    at com.googlecode.jsonplugin.JSONWriter.write(JSONWriter.java:88)
    at com.googlecode.jsonplugin.JSONUtil.serialize(JSONUtil.java:90)
    at com.googlecode.jsonplugin.JSONResult.execute(JSONResult.java:119)
    at com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:348)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:253)
    at com.facetime.imauditor.sreach.action.CustomRequestInterceptorJson.intercept(CustomRequestInterceptorJson.java:69)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:221)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:150)
    at org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:48)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:123)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:167)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:105)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:83)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:207)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:74)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:127)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.interceptor.ProfilingActivationInterceptor.intercept(ProfilingActivationInterceptor.java:107)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:206)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:115)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:143)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:121)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:86)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:170)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:123)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:224)
    at com.opensymphony.xwork2.DefaultActionInvocation$2.doProfiling(DefaultActionInvocation.java:223)
    at com.opensymphony.xwork2.util.profiling.UtilTimerStack.profile(UtilTimerStack.java:455)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:221)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:50)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:504)
    at org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:419)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at com.facetime.imcoreserver.registration.AbsoluteSendRedirectFilter.doFilter(AbsoluteSendRedirectFilter.java:48)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:403)
    at org.apache.coyote.http11.Http11NioProcessor.process(Http11NioProcessor.java:369)
    at org.apache.coyote.http11.Http11NioProtocol$Http11ConnectionHandler.process(Http11NioProtocol.java:317)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.run(NioEndpoint.java:1532)
    - locked <0x00000000abb53778> (a org.apache.tomcat.util.net.SecureNioChannel)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

以下是线程的统计信息。

```
Threads locking monitor=1
Threads sleeping on monitor=0
Threads waiting to lock monitor=1097 
```

在这方面的任何帮助都会非常有帮助，在此先感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-17T13:42:23.573

这是 struts2 json 插件中的一个错误：

[https://issues.apache.org/jira/browse/WW-3902](https://issues.apache.org/jira/browse/WW-3902)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T13:58:24.410

**更新：**

我最近遇到了类似的问题。有时，当 Web 应用程序没有很好地编程时，它可能无法正确清理网络 (TCP) 套接字……例如数据库连接类。导致主机（Tomcat JVM）进程上打开的文件描述符过多。这可能会导致您面临同样的不负责任。

因此，在我的情况下，我通过使用 ThreadLocal 泛型在每个线程的基础上设计数据库连接来解决问题。这是在我的 Web-Apps 服务托管 bean 中管理的。：

```
private static ThreadLocal<YourConnectionClass> connection = new ThreadLocal<YourConnectionClass>();

public static YourConnectionClass getConnection(){
    if (connection.get() == null) connection.set(driver.getConnection());
    return connection.get();
} 
```

这将确保每个 tomcat 执行程序线程只打开一个 TCP 套接字。如果该问题适用于您，并且您添加了与我提到的类似的修复程序，那么您的问题将消失。好吧，但它仍然只是一个“猜测”。Tou 可以通过简单地将其输入服务器 unix/linux 控制台来验证这是否适用于您：

```
netstat | grep <YOUR_TCP_PORT> 
```

或使用 lsof （列出打开的文件）。因为 TCP 套接字的处理方式类似于打开文件句柄。

```
lsof <YOUR_JVM_PID> 
```

如果在tomcat启动后打开的套接字数量很少或很少，另一方面当你的责任问题发生时是毁灭性的高，那么你可能有一个打开的套接字文件描述符泄漏。

作为第二个猜测，如果没有正确清理 Java 对象的 HashTable（在 Web 应用服务器代码中的某个位置），即使在 Java 中也可能会导致 HashTable 内存泄漏。但正如我在上面的评论中看到的那样，情况可能并非如此。

干杯，

将要

* * *

**我的老答案：**

我打赌它的垃圾收集策略。

通过设置正确的 JVM OPTS 尝试使用另一个：

```
-XX:+UseParNewGC -XX:+UseConcMarkSweepGC -XX:SurvivorRatio=2 -XX:NewRatio=8 
```

检查此链接：

[http://www.petefreitag.com/articles/gctuning/](http://www.petefreitag.com/articles/gctuning/)

[http://www.idevelopment.info/data/Programming/java/miscellaneous_java/Java_Options_For_Garbage_Collection.html](http://www.idevelopment.info/data/Programming/java/miscellaneous_java/Java_Options_For_Garbage_Collection.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-25T07:58:15.270

该问题可以通过升级到 Tomcat 8.0.16 或更高版本并将 Loader 类设置为 org.apache.catalina.loader.ParallelWebappClassLoader 来解决。

在 [TOMCAT_HOME]/conf/context.xml 中，添加以下行并重新启动

`<Loader loaderClass="org.apache.catalina.loader.ParallelWebappClassLoader" />`

我们遇到了类似的问题，Hibernate 和 Spring JDBC 会尝试将 db 结果集行转换为对象。这种锁定行为严重影响了运行大量线程和大型结果集的 tomcat。

我建议用户在 Tomcat7 到 Tomcat 8 上运行 Hibernate 和 Spring JDBC 应用程序并打开 ParallelWebappClassLoader 以获得更好的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-28T22:12:21.980

由于在 WebappClassLoader 上同步，我发现了类似的问题；任何时候出现大量 loadClass 调用 - 不幸的是，许多 3rd 方库都会这样做。理想的解决方法是不要一直调用 loadClass，但这可能不是一个选择。

这源于作为错误 48903/44041/48694 的一部分引入 Tomcat 的更改，以修复一些用户遇到的死锁。

[http://svn.apache.org/viewvc?view=revision&revision=927565](http://svn.apache.org/viewvc?view=revision&revision=927565)

在我看来，修复对同步过于悲观，希望我能接受一个修复，允许在进入监视器之前检查本地缓存；这应该会让这个消失。

# javascript - 我们可以在没有 MSOffice 的情况下运行 JScript 来调用 excel 对象吗？

> ID：12728862
> 
> 赞同：0
> 
> 时间：2012-10-04T13:54:34.880
> 
> 标签：javascript

我在 ETL Shell Script 任务中有一段代码。下面是代码。它在我的系统中运行良好。当我在服务器上运行它时，它失败了。我注意到服务器中没有安装 MS Office。我尝试安装办公驱动程序（AccessDatabaseEngine - 免费分发），但没有运气。可以通过安装 ActiveXObjet for excel 来运行这个脚本吗？还是以其他方式完成？我不能要求客户在服务器上安装 MS Office。请给我推荐一个替代品。

```
main();
function main(){

var ExcelApp = new ActiveXObject("Excel.Application");

ExcelApp.Visible = false;
ExcelApp.DisplayAlerts = false
var filenamer="D:\\Net Drive\\Drive\\lator.xls"

var ExcelBook=ExcelApp.Workbooks.open(filenamer, false, false);
...
...} 
```

# bash - 在包含多个文件的文件夹中连接名称不同但编号相同的文件

> ID：12728866
> 
> 赞同：0
> 
> 时间：2012-10-04T13:54:50.160
> 
> 标签：bash, shell

我对 Shell/Bash 很陌生，但我想用它来建立一些分析的管道。我使用 bash 生成多个文件，如下所示：

```
for i in {1..10}; 
    do sim XX.in.$i.txt > XX.out.$i.txt;
    done;

for i in {1..10}; 
    do sim YY.in.$i.txt > YY.out.$i.txt;
    done; 
```

这给了我 20 个输出文件；XX.out.1.txt、XX.out.2.txt、YY.out.1.txt、YY.out.2.txt 等。

现在我想连接 XX.out.1.txt 和 YY.out.1.txt 然后 XX.out.2.txt 和 YY.out.2.txt 等，所以总是只有两个名称不同但相同的文件数字。最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:11:48.960

您可以避免重复循环：

```
for i in {1..10}; do
  ( sim XX.in.${i}.txt; sim YY.in.${i}.txt ) > concatenated.${i}.txt
done 
```

但是，如果您需要保留中间文件：

```
for i in {1..10}; do
  sim XX.in.${i}.txt > XX.out.${i}.txt
  sim YY.in.${i}.txt > YY.out.${i}.txt
  cat XX.out.${i}.txt YY.out.${i}.txt > concatenated.${i}.txt
done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:05:40.137

该解决方案与您创建文件的方式非常相似：

```
for i in {1..10} ; do
    cat XX.out.$i.txt YY.out.$i.txt > concatenated.$i.txt
done 
```

# java - 实现一个对象，两种目的

> ID：12728874
> 
> 赞同：0
> 
> 时间：2012-10-04T13:55:03.903
> 
> 标签：java, oop

这是我想知道如何做的事情，但找不到适合该问题的方法。

假设我有一个可以用于两个目的的类：上传和下载。本能地，我会创建一个有点像这样的对象：

```
public class File{
 private FormFile uploadFile;
 private File downloadFile;
 private String uploadLocation;
 private String downloadLocation;

 //setters and getters
} 
```

问题是，我希望每种类型只有一组访问器。例如，`setFile(Object obj)`班级里只有一个人。但这会导致问题，因为 FormFile 和 File 是两个不同的对象。

然后我会求助于OOP。将我的对象更改为：

```
public interface File{
 public void setFile(Object obj);
 public Object getFile();
 public void setLocation;
 public String getLocation;
} 
```

然后创建另外两个对象：

```
public UploadFile implements File{
 private FormFile file;
 private String location;

 //implementation of methods
}

public Download implements File{
 private File file;
 private String location;

 //implementation of methods
} 
```

如果您清理代码中的其他内容，这可能会起作用。但我意识到这在之后会更难维护。是否有另一种解决方法可以做到这一点？

像：**_**

```
File file = new File.UPLOAD; 
```

将限制用户：

仅使用方法`setFile(FileForm file){ }`，然后`setFile(File file){ }`将变得不可用。实例化时反之亦然`File file = new File.DOWNLOAD`

我并不是真的想解决这个问题。只是一个想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:04:55.290

尝试使用泛型：

```
public class File < T > {

    private T file;
    private String location;

    public T getFile() {
        return file;
    }
    public void setFile( T file ) {
        this.file = file;
    }

    public String getLocation() {
        return location;
    }
    public void setLocation( String location ) {
        this.location = location;
    }

} 
```

用法：

```
File< FormFile > uploadFile = new File< FormFile >();
uploadFile.setFile( new FormFile() );

File< java.io.File > downloadFile = new File< java.io.File >();
downloadFile.setFile( new java.io.File( "something.txt" ) ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:05:47.817

你想多了。

只需添加这两个方法：

```
public void setUploadFile(FormFile f);

public void setDownloadFile(File f); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:14:19.310

**-** `Interface`主要用于**提供角色**，或**表示不断变化的行为**，但由于上传和下载是两个不同的东西，我认为接口在这里不合适。

**-**试试这样的...

**文件类：**

```
class File{

private String fileName;
private String fileLocation;

public File(String fileName, String fileLocation){

  this.fileName = fileName;
  this.fileLocation = fileLocation;

}
        //Getters for the above Field

public boolean setDownload(File f){

     new Download(f);   // Composition

 }

public boolean setUpload(File f){

      new Upload(f);   // Composition

 }
} 
```

**下载类：**

```
class Download{

private String fromDestination;

// Getter and Setter for above field

public boolean dowload(File f){

   return false;  // set to true if successful
 }

} 
```

**上传类：**

```
class Upload{

private String toDestination;

// Getter and Setter for above field

public boolean upload(File f){

    return false;  // set to true if successful
 }

} 
```

好吧，您可以使用`Apache's commons`库进行**文件上传和文件下载**....

# css - 如何从跨度中删除默认的左边距？

> ID：12728875
> 
> 赞同：0
> 
> 时间：2012-10-04T13:55:08.723
> 
> 标签：css, html, twitter-bootstrap

我有这样的排液

```
<div class="row-fluid">
    <div class="span1"></div>
    <div class="span6"></div>
    <div class="span5"></div>
</div> 
```

现在我需要从span6中删除margin-left ...我尝试`bootstrap.css`通过设置在文件上执行此操作，`margin:0px`但这会影响span5。如何有效地从 span6 中删除 margin-left？

问候， 纳西尔

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T13:56:37.750

```
.span6 {
    margin: 0px; 
} 
```

只需将它放在您自己的自定义 CSS 文件中，该文件在 Bootstrap 文件之后运行。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-04T13:57:39.660

使用覆盖 Css`!important`

```
.span6 {
    margin: 0px !important; 
} 
```

# git - Git Tower 推拉自动化

> ID：12728877
> 
> 赞同：1
> 
> 时间：2012-10-04T13:55:17.713
> 
> 标签：git, git-tower

我正在使用[Tower](http://www.git-tower.com/)进行源代码控制，并且想知道是否有一种方法可以为我对 github/bitbucket/etc 所做的每次推送创建自动化，它还会自动调用 pull 到我的 live box（例如我的个人 .com） . 有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:01:07.650

您可以使用[gitook](http://www.kernel.org/pub/software/scm/git/docs/githooks.html)为更新后事件执行此操作。Git 钩子是在某些操作之后执行的 shell 脚本。您可以编写一个脚本，远程登录到 live box 并执行 pull 或对 live box 进行额外的推送。

# javascript - 向 .css 添加随机数，使其不缓存

> ID：12728879
> 
> 赞同：0
> 
> 时间：2012-10-04T13:55:26.933
> 
> 标签：javascript, jquery

我试图让styles.css 不缓存，因为服务器在缓存时遇到了css 问题。

```
<script>
var numBAH = Math.floor(Math.random()*100);
</script>

<link href="styles.css+ numBAH +" rel="stylesheet" type="text/css" /> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-04T13:56:44.713

您可以在文档的开头执行此操作：

```
<script>
document.write('<link href="styles.css?r='+ Math.floor(Math.random()*100) +'" rel="stylesheet" type="text/css" />');
</script> 
```

但 ：

*   你很有可能找到两次相同的数字
*   你通常不应该避免缓存

我提出的解决方案：

1）使用`(new Date()).getTime()`而不是随机数

2）只需在版本更改时更改数字：（`styles.css?v=3`不带javascript）

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-10-04T13:58:02.903

如果您可以访问服务器端语言，那么使用查询字符串呈现链接标记会更简洁，该查询字符串是文件全部内容的哈希。这样，缓存失效器只有在文件内容实际发生变化时才会发生变化。

* * *

在看过随后的讨论之后，关于你*永远*不想使用缓存，因为它*加载得太快*，我想改变我的答案。不是为了`new Date()`，而是为了：修复您的页面，以便快速加载是理想的结果。如果您对此有特定问题，请针对这些问题创建一个问题，不要直接寻求糟糕的解决方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-27T09:20:21.633

缓存破坏可以在没有服务器端渲染的情况下工作。我在移动设备和桌面设备上测试了最新版本的 firefox、chrome 和 safari，这段代码有效。（不过，我不确定 IE..）

```
<HEAD>
    <SCRIPT LANGUAGE="JavaScript">
    var numBAH = Math.floor(Math.random()*10000);

    document.write('<LI' + 'NK HREF="./path/to/style.css?cacheBusting='+numBAH+'" rel="stylesheet">');
    </SCRIPT>
</HEAD> 
```

# java - 在 Junit 中分离测试用例而不重复

> ID：12728885
> 
> 赞同：0
> 
> 时间：2012-10-04T13:55:38.420
> 
> 标签：java, function, junit, automated-tests

我已经为登录 Facebook 编写了一个基本测试。之后，我想编写另一个发布状态的测试用例。我想为此创建一个新功能，但是如何在不重复整个登录过程的情况下做到这一点。

```
 @Test
    public void Facebook_LoginTest() {

String title= null;
        // And now use this to visit facebook
        driver.get("http://www.facebook.com ");

        // Find the text input element by its name
        WebElement id = driver.findElement(By.id("email"));
        WebElement password = driver.findElement(By.id("pass"));
        WebElement login = driver.findElement(By.id("loginbutton"));

         // Enter something to search for
        id.sendKeys("id@blah.com");
        password.sendKeys("blahblahblah"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:00:44.947

将登录过程移动到测试初始化​​方法（用@Before注解）或Fixture初始化方法（用@BeforeClass注解）

# node.js - node.js, faye (bayeux) - 订阅事件之后

> ID：12728887
> 
> 赞同：0
> 
> 时间：2012-10-04T13:55:40.667
> 
> 标签：node.js, chat, real-time, faye, bayeux

我有一个聊天服务器。在客户订阅后，我想查看数据库以查看他们订阅的聊天室是否有任何历史记录。

问题是，我只能在扩展中捕获“订阅”事件，这些事件必须执行“返回回调（消息）；” 返回消息。如果我在这里执行历史记录，则不会向客户端发布任何内容，因为客户端实际上并未被订阅。

有什么方法可以知道客户何时准备好？或者成功订阅时发生的一些事件？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T21:25:22.413

您可以在创建订阅后附加一个回调，该回调将在您成功订阅时触发，在您订阅失败时触发：

```
var http = require('http');
var faye = require('faye');

var faye_server = new faye.NodeAdapter({mount: '/faye', timeout: 120});

faye_server.listen(8089);

var subscription = faye_server.getClient().subscribe('/testing', function(message){console.log(message);});

subscription.callback(function(){console.log('Subscription successful and ready to use!');});

subscription.errback(function(){console.log('ERROR: Subscription failed!');}); 
```

这记录在 faye 主页上，尽管它被隐藏了一点。. . [http://faye.jcoglan.com/browser/subscribing.html](http://faye.jcoglan.com/browser/subscribing.html)

这适用于我测试过的节点服务器、节点客户端或浏览器客户端。

此外，我一直在做的是确保我的客户端启动并运行是这样的：创建客户端，然后尝试订阅垃圾通道名称。一旦该订阅出现、失败或超时（在它周围设置 5 秒超时），我将其视为我的客户打开成功。这是一个关于方法的循环，但它对我来说效果很好，faye 通过使用回调和 errback 让它变得非常干净，就像在我之前的示例中一样。

现在这一切都在客户端，但在服务器端变得容易得多：http: [//faye.jcoglan.com/node/monitoring.html](http://faye.jcoglan.com/node/monitoring.html)。只需使用此处的扩展程序并查找来自特定客户端的订阅事件，您就可以开始了。

希望有帮助

# xslt - 如何使用 XSLT 在数组中动态存储值并进行值比较？

> ID：12728888
> 
> 赞同：-2
> 
> 时间：2012-10-04T13:55:40.350
> 
> 标签：xslt

下面是一个很好的例子，但我怎样才能动态存储值....你能解释一下吗？

```
 <xsl:variable name="countries" select="'EG, KSA, UAE, AG'" />
   <xsl:variable name="country"   select="'KSA'" />
     <xsl:choose>
      <xsl:when test="
      contains(
       concat(', ', normalize-space($countries), ', ')
        concat(', ', $country, ', ')
       )
     ">
 <xsl:text>IN</xsl:text>
 </xsl:when>
 <xsl:otherwise>
 <xsl:text>OUT</xsl:text>
</xsl:otherwise> 
```

看起来不错....我还有一些要求。你能调查一下吗？

```
 <xml>
   <test>
    <BookID>
      0061AB
    </BookID>
    <amount>
      16
    </amount>
   </test>
   <test>
    <BookID>
      0062CD
    </BookID>
    <amount>
      2
    </amount>
   </test>
   <test>
    <BookID>
      0061AB
    </BookID>
    <amount>
      2
    </amount>
   </test>
 </xml> 
```

这里根据BookID的相等值，我想添加金额值......就像上面的例子，如果BookID的值为0061AB，那么amount的值应该是18。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T05:07:30.093

正如其他人所提到的，您的问题不是很清楚，但是您可以使用调用模板在包含候选国家和搜索列表的 xml 文档中重用您的“国家查找”算法（您也可以使用`document`加载拆分候选和搜索目标到单独的 xml 文档中）

例如在应用 XSLT 时：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" omit-xml-declaration="yes"/>

  <xsl:template match="/xml">
    <xsl:apply-templates select="test"/>
  </xsl:template>

  <xsl:template match="test">
    <xsl:call-template name="FindCountry">
      <xsl:with-param name="countries" select="normalize-space(countries/text())"/>
      <xsl:with-param name="country" select="normalize-space(country/text())"/>
    </xsl:call-template>
  </xsl:template>

  <xsl:template name="FindCountry" xml:space="default">
    <xsl:param name="countries" />
    <xsl:param name="country" />
    Is <xsl:value-of select="$country" /> in <xsl:value-of select="$countries" /> ?
    <xsl:choose>
      <xsl:when test="contains(concat(', ', $countries, ', '),
                               concat(', ', $country, ', '))">
        <xsl:text>IN</xsl:text>
      </xsl:when>
      <xsl:otherwise>
        <xsl:text>OUT</xsl:text>
      </xsl:otherwise>
    </xsl:choose>
  </xsl:template>
</xsl:stylesheet> 
```

到 XML

```
<xml>
  <test>
    <countries>
      EG, KSA, UAE, AG
    </countries>
    <country>
      UAE
    </country>
  </test>
  <test>
    <countries>
      GBR, USA, DE, JP
    </countries>
    <country>
      AUS
    </country>
  </test>
</xml> 
```

**结果**

```
Is UAE in EG, KSA, UAE, AG ? IN 
Is AUS in GBR, USA, DE, JP ? OUT 
```

# objective-c - 从 Mac 获取用户和组

> ID：12728891
> 
> 赞同：0
> 
> 时间：2012-10-04T13:55:43.757
> 
> 标签：objective-c, macos, terminal

如何通过终端从 Mac 获取系统偏好设置下列出的用户和组？

我试过了

```
dscl . list /users
dscl . list /groups 
```

但他们也给了我一个系统用户列表。如果我进入系统偏好设置并查看它们，我只想要我会看到的用户和组。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:04:10.110

系统将具有 ID 的用户/组`<= 500`视为“系统”用户，这些用户对 UI 是隐藏的。所以你可以这样做：

```
$ for user in `dscl . list /users`; do if [ `dscl . read "/users/$user" | grep UniqueID | awk '{print $2;}'` -gt 500 ]; then echo "$user" ;fi; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:00:18.753

您可以使用`dscacheutil`来获取这些列表。

```
dscacheutil -q user
dscacheutil -q group 
```

# java - Wicket 表单中的多个 TextField

> ID：12728894
> 
> 赞同：3
> 
> 时间：2012-10-04T13:55:54.980
> 
> 标签：java, wicket

我有一个 bean，我使用 Model 将它附加到表单上，它工作正常。我也有一个像 bean 的字段`Map<String, javax.mail.Address>`。考虑到每个地图条目都应该像这样，我如何按模型将此字段与表单绑定`Label: TextField`？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T14:09:29.287

也许是这样的：

```
ListView<String> textAreasListView = new ListView<String>("someid", bean.map.keySet()) {
    @Override
    protected void populateItem(final ListItem<String> itemLang) {
        itemLang.add(new Label("label", itemLang.getModelObject()));
        Model<String> textModel = new Model<String>() {

            @Override
            public String getObject() {
                return bean.map.get(itemLang.getModelObject()).toString;
            }

            @Override
            public void setObject(String object) {
                bean.map.put(itemLang.getModelObject(), new Address(object));
            }
        };
        itemLang.add(new TextField<String>("email", textModel));
    }
}; 
```

并将其添加到您的表单中。

地址和字符串的自定义转换器将是一个额外的改进。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:08:25.423

我认为，您可以通过以下方式绑定它：

```
TextField<Address> textField = new TextField<Address>("address",
        beanModel.<Address> bind("addressMap[addressKey]"), Address.class) {

    @SuppressWarnings("unchecked")
    @Override
    public <C> IConverter<C> getConverter(Class<C> type) {
        if (Address.class.isAssignableFrom(type)) {
            return (IConverter<C>) new AddressConverter();
        } else {
            return super.getConverter(type);
        }
    }
};
form.add(textField); 
```

这里“addressMap”是映射字段的名称，“addressKey”是映射中地址值的键。

AddressConverter 类的清单：

```
public class AddressConverter implements IConverter<Address> {

    public Address convertToObject(String string, Locale locale) {
        try {
            return new InternetAddress(string);
        } catch (AddressException e) {
            return null;
        }
    }

    public String convertToString(Address address, Locale locale) {
        return address.toString();
    }
} 
```

当然，Address 类的转换器可以与 ConverterLocator 全局附加。只需将以下方法添加到您的 Application 类：

```
@Override
protected IConverterLocator newConverterLocator() {
    ConverterLocator locator = new ConverterLocator();
    locator.set(Address.class, new AddressConverter());
    return locator;
} 
```

然后您不需要在所有文本字段上覆盖 getConverter() 方法。

# php - PHP MySql 百分比

> ID：12728900
> 
> 赞同：8
> 
> 时间：2012-10-04T13:56:07.337
> 
> 标签：php, mysql, percentage

我的问题是关于百分比的，我不是专家，所以我会尝试以更好的方式解释。

我的 mysql 服务器中有一个表，比如 700 条记录，类似这样

```
+-------+---------+----------+-------+
| Name  | country | language | Birth |
+-------+---------+----------+-------+
| Lucy  | UK      | EN       | 1980  |
| Mari  | Canada  | FR       | 1990  |
| Gary  | Canada  | EN       | 1982  |
| Stacy | Jamaica | EN       | 1986  |
| Joao  | Brasil  | PT       | 1984  |
+-------+---------+----------+-------+ 
```

因此，我查询了 1980 年到 1985 年之间的所有记录，结果将是：

```
+------+---------+----------+-------+
| Name | country | language | Birth |
+------+---------+----------+-------+
| Lucy | UK      | EN       | 1980  |
| Gary | Canada  | EN       | 1982  |
| Joao | Brasil  | PT       | 1984  |
+------+---------+----------+-------+ 
```

从这个结果我想获得：

1.  那些年之间每种语言出现的百分比

    ```
    EN = 75% (3 is the total in this case)
    PT = 25% 
    ```

2.  结果表中出现的每个国家/地区的百分比

    ```
    UK = 33%
    Canada = 33%
    Brasil = 33% 
    ```

我的意思是如何将结果转换为变量以在最终函数中使用它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:02:27.373

这可能有效，但大致如下：

```
set @total_rows = (SELECT COUNT(*) FROM table WHERE Birth between 1980 and 1985);

SELECT language, percentage
FROM (
    SELECT language, concat(count(language)/@total_rows, "%") AS percentage 
    FROM table WHERE Birth between 1980 and 1985
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T05:23:25.747

我会在这里回答，因为在评论中做 SQL 不太舒服。

要获得百分比，您只需将先前的输出作为视图并添加百分比列，应该这样做：

```
select NAME, QUANTITY, QUANTITY/(select count(1) from TABLE) as PERCENTAGE
from (
    select NAME, count(1) as QUANTITY
    from TABLE
    where condition
    group by NAME
) 
```

但这并没有真正优化，因为您每次想要获取单行时都会调用整个表的计数，即使 MySQL 将索引计数结果，它仍然不是最好的。

您应该做的是首先将表格的总大小放入您的 php 中：

```
select count(1) as totalsize
from TABLE 
```

然后在您的下一个请求中使用它：

```
select NAME, QUANTITY, QUANTITY/[totalsize from php] as PERCENTAGE
from (
    select NAME, count(1) as QUANTITY
    from TABLE
    where condition
    group by NAME
) 
```

# validation - JSF/Primefaces 不验证 @AssertTrue

> ID：12728917
> 
> 赞同：0
> 
> 时间：2012-10-04T13:56:52.703
> 
> 标签：validation, jakarta-ee, jsf-2, primefaces, glassfish

我的实体类如下所示：

```
public class TimeFrame implements Serializable {    
@NotNull
private Date startTime;
@NotNull
@Future
private Date stopTime; 
```

为了获得正确的顺序，我添加了：

```
@AssertTrue(message="Wrong order")
public boolean isTimeFrameValid(){
    return this.startTime.before(stopTime);
} 
```

现在，JSF/Primefaces 应该在输入后直接验证这一点。

```
<p:calendar id="aucstop" required="true" pages="2" value="#{transportbean.stopTime}"   >
                            <p:ajax event="dateSelect"  />  
                            <f:validateBean/>
                        </p:calendar> 
```

例如，将过去的日期放入“StopTime”时，我立即收到一条消息。然而，“isTimeValid”- 方法仅在创建整个对象时才被验证。任何想法如何在输入后直接验证这一点？

GF 3.1.1 PrimeFaces 3.4

# iphone - iPhone 配置实用程序不安装 MDM 配置文件

> ID：12728918
> 
> 赞同：0
> 
> 时间：2012-10-04T13:56:56.603
> 
> 标签：iphone, plist, mdm, magic-numbers

设置：适用于 Windows 的 iPhone 配置实用程序，版本 3.5.0.289 iPhone (3G?) 软件版本 4.3.5 (8L1)

默认 MDM 配置。如果重要，MDM 服务将使用 Apple 的 Ruby 参考实现。

当尝试使用在 iPCU 中配置的 IPCU 安装配置文件时，IPCU 认为该配置文件有效，我收到以下错误：

```
Oct  4 15:39:46 Developments-iPhone profiled[644] <Warning>: MC|Profile cannot be queued for installation. Error: NSError 0x1f5510d0:
Desc   : Invalid Profile
Sugg   : The MDM payload com.example.mdmtest.mdm1 contains invalid access rights.
US Desc: Invalid Profile
US Sugg: The MDM payload com.example.mdmtest.mdm1 contains invalid access rights.
Domain : MCInstallationErrorDomain
Code   : 4000
Type   : MCFatalError
...Underlying error:
NSError 0x1f550960:
Desc   : The profile MDMTest is invalid.
Sugg   : The MDM payload com.example.mdmtest.mdm1 contains invalid access rights.
US Desc: The profile MDMTest is invalid.
US Sugg: The MDM payload com.example.mdmtest.mdm1 contains invalid access rights.
Domain : MCProfileErrorDomain
Code   : 1000
Type   : MCFatalError
Params : (
MDMTest
)
...Underlying error:
NSError 0x1f54f940:
Desc   : The payload MDMTest is invalid.
Sugg   : The MDM payload com.example.mdmtest.mdm1 contains invalid access rights.
US Desc: The payload MDMTest is invalid.
US Sugg: The MDM payload com.example.mdmtest.mdm1 contains invalid access rights.
Domain : MCPayloadErrorDomain
Code   : 2000
Type   : MCFatalError
Params : (
MDMTest
)
...Underlying error:
NSError 0x1f54f9b0:
Desc   : The MDM payload com.example.mdmtest.mdm1 contains invalid access rights.
US Desc: The MDM payload com.example.mdmtest.mdm1 contains invalid access rights.
Domain : MCMDMErrorDomain
Code   : 12000
Type   : MCFatalError
Params : (
"com.example.mdmtest.mdm1"
)
Extra info:
{
isPrimary = 1;
} 
```

我的问题是：什么是“isPrimary = 1”，它来自哪里，我该如何摆脱它？我已经尝试导出配置，但它不包含任何“isPrimary = 1”元素，并且访问权限字段是一个幻数，大概是一个位掩码，我无法找到任何文档，所以是除了随机尝试数字之外，还有什么过程可以让 iPhone 接受这个配置文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T23:24:00.833

该错误与无效的访问权限（您选择要使用 MDM 管理的选项）有关，并且您正在运行 iOS 4。我想您已经选择了 iOS 4 不支持的“添加/删除应用程序”访问权限. 关闭此访问权限，以及“添加/删除设置”权限，然后尝试重新安装。

# ruby-on-rails - rails 3.2 scope 与印象派 gem 的组合

> ID：12728919
> 
> 赞同：0
> 
> 时间：2012-10-04T13:56:58.193
> 
> 标签：ruby-on-rails, ruby, scope, ruby-on-rails-3.2

我的rails应用程序中有印象派gem，我想创建一个范围来返回查看次数最多的项目，通过添加`is_impressionable`到模型中，我能够使用`object.impressionist_count`方法返回资源上的视图计数（如视图数），但我没有知道如何在我的模型中为大多数查看的对象创建范围。创建的表名`impressionist gem`是`impressions` 您的帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T16:40:39.990

您可以创建一个模型，例如 CustomImpression 并设置表格：

```
class CustomImpression < ActiveRecord::Base
  set_table_name 'impressions'

  belongs_to :user

  scope :my_custom_scope, ...

  def my_custom_function 
    ...
  end
end 
```

# jquery-mobile - 控制组中单选按钮的动态替换

> ID：12728923
> 
> 赞同：0
> 
> 时间：2012-10-04T13:57:10.493
> 
> 标签：jquery-mobile, knockout.js

我需要能够动态替换控制组中的单选按钮。我想出了一个解决方案，但我想确保我以正确的方式去做。[这是一个 jsFiddle](http://jsfiddle.net/floyd_may/7Qnyz/)。

我应该在调用`.checkboxradio()`每个新创建的单选按钮后手动修改类，还是 jQuery Mobile 中的某个方法可以帮助我完成此操作？

**请注意，这里的 jsFiddle 可以按我的需要工作。**我在问是否有更简单（或更惯用）的方法来更新动态创建的单选按钮的视觉样式以符合控件组样式。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-04T15:26:39.183

内容应该在 jquery 移动增强之前添加到 DOM，例如通过绑定到`page beforecreate`事件而不是页面`pagebeforeshow`。这样，您的内容将得到适当的增强。

至于动态内容，您可以在将其插入 DOM 后立即对其进行增强。看到[这个修改过的小提琴](http://jsfiddle.net/c8cWF/)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-24T16:27:55.210

尝试这个：

```
 $('#creneauListPage #fieldcontain input').checkboxradio();
    $('#creneauListPage #fieldcontain .ui-btn').removeClass('ui-btn-corner-all');
    $('#creneauListPage #fieldcontain .ui-btn:first').addClass('ui-corner-top');
    $('#creneauListPage #fieldcontain .ui-btn:last').addClass('ui-corner-bottom ui-controlgroup-last'); 
```

# visualization - Sigmaplot：如何缩放 x 轴以正确显示箱线图

> ID：12728927
> 
> 赞同：0
> 
> 时间：2012-10-04T13:57:21.220
> 
> 标签：visualization, data-visualization, boxplot

我想使用 Sigmaplot 12 显示重叠的箱线图。当我选择 x 轴的比例为*线性*时，这些框确实重叠但太薄了。见下图。当然，它们应该更宽。

![太薄](../Images/f5844ba26a64162f231bfd2215115daf.png)

当我选择 x 轴的比例为“类别”时，框的宽度正确，但沿每个 x 值排列。

![错误的位置](../Images/05c22f37df4de5c6e4807f8aebedf395.png)

我想要图 1 中的位置和图 2 中的宽度。我尝试调整图 1 中的框的大小，但是当我在“条形宽度”中选择 100% 时，它仍然看起来像图 1。

非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T20:29:53.797

好吧，我自己找到了答案。在 Sigmaplot 中，通常需要准备“样式”列，例如，如果要为条形图着色，则需要一个包含特定颜色名称的列。

对于我的箱线图示例，我需要一个具有“宽度”值的列。这些必须相当大（2000 年）才能产生效果。为什么 ？我不知道。首先我认为这是因为纬度值，并且程序将该点解释为“1.000”，但是当我更改为没有小数的值时，它并没有变得更好。

好吧，这是颜色的结果。玩得开心 ！

![在此处输入图像描述](../Images/d3b51f13e9d6004859f9baf564797b5c.png)

# asp.net - 如何真正检查 VB.NET 中的内容是否为空？

> ID：12728935
> 
> 赞同：1
> 
> 时间：2012-10-04T13:57:51.427
> 
> 标签：asp.net, .net, vb.net

我有一个具有 NrPeso 十进制属性的实体，可以在数据库中保存为 0 或 null。这是我为属性分配值所做的工作：

```
entity.NrPeso = Convert.ToDecimal(object.value("value")) 
```

问题是：如果我不填充对象值，它会设置为`Nothing`. 当我进行演员表时，它变成0。但我不想要0，我想要`Nothing`。如果我将对象值与`Nothing`它进行比较，它将返回我`Nothing`，如果它是 Nothing 或 0。

我坚持了一些替代方案，但它们似乎并不好。

那么，这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:00:47.880

`Decimal`是一个结构 -`Nothing`根据定义不能。

你需要一个可以为*空* `Decimal`的.

如果`NrPeso`被定义为`Nullable(Of Decimal)`(aka `Decimal?`)，事情应该会如你所愿。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:00:55.697

如果您想区分使用（或任何其他值类型）`0`以及`Nothing`何时使用，您应该首先使用[可空类型](http://msdn.microsoft.com/en-us/library/ms235245.aspx)。`Decimal`

所以使用`Decimal?`而不是`Decimal`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:19:24.290

试试这个：

```
Dim obj As Object = object.value("value")
entity.NrPeso = If (obj Is Nothing, Nothing, Convert.ToDecimal (obj)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-04T14:20:56.630

考虑使用 Decimal.TryParse 而不是使用 Convert.ToDecimal，然后在失败条件下将 Nullable 类型显式设置为 Null：

```
Dim outVal As Decimal?
If Decimal.TryParse(object.value("value"), outVal)
   entity.NrPeso = outVal
Else
   entity.NrPeso = Nothing
End If 
```

此外，请考虑在您的项目中设置 Option Strict On 以避免将来出现此类类型问题。

# objective-c - UIViewController 自动旋转？

> ID：12728936
> 
> 赞同：0
> 
> 时间：2012-10-04T13:57:59.087
> 
> 标签：objective-c, modalviewcontroller

我在应用程序委托中将我的 UIViewController 设置为 self.window.rootViewController。出于某种原因，我需要从我的根视图控制器打开标志视图作为模态，例如：

```
 self.window.rootViewController.modalPresentationStyle = UIModalPresentationCurrentContext;
            [self.window.rootViewController presentModalViewController:signViewC animated:NO]; 
```

如果我在标志视图中更改设备方向，我的根视图控制器不会更改方向，并且在标志视图关闭后我的方向不正确。如果我在标志视图中更改方向，是否可以更改根视图方向？

在我的根控制器中，我添加了：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation
     {
        return YES;
     } 
```

如果我在没有模态视图的情况下旋转根视图，则自动旋转会起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T14:03:30.687

首先，您不应该从您的应用程序委托中呈现模式。无论您正在做什么检查以确定您是否应该呈现该视图控制器，都应该在您的主视图控制器中完成。从那里，您应该调用代码来呈现模态，如下所示：

```
[self presentModalViewController:signViewC animated:NO] 
```

这样，您的主视图控制器不会被解除，它只是被推下视图堆栈并且仍应响应旋转通知。

试试看，让我知道结果如何。

**编辑**

取出 ModalPresentationStyle。这就是让你陷入困境的原因。

# sql-server - 连接不同数据类型的表

> ID：12728937
> 
> 赞同：-1
> 
> 时间：2012-10-04T13:58:01.923
> 
> 标签：sql-server, join, sql-function

我有以下表格：

```
Orders
  id int
  orderName varchar(5000)

Communication
  body varchar(5000)
  attachment varchar(5000) 
```

样本订单数据：

```
id   name
132  ordGD
589  ordPG
6321 ordMF 
```

示例通信数据：

```
body    attachment
body1   132,589,6321 
```

我想创建一个存储过程，从中获取 2 列 {body,Attachment}`Communication`

在 SP 中，输入`@attachment varchar(5000)`包含多个 orderid，逗号分隔，引用 Orders 表

问题：我想要 OrderName 根据 Orderid 从 Orders 匹配到@Attachment

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T16:47:47.630

对于这种类型的过程，您需要列中`split`的数据`attachment`。我对字符串使用了类似这样的东西`Split`（分割字符串的方法有很多，你可以在网上搜索其他功能）：

```
CREATE FUNCTION [dbo].[Split](@String varchar(MAX), @Delimiter char(1))       
returns @temptable TABLE (items varchar(MAX))       
as       
begin     
    declare @idx int       
    declare @slice varchar(8000)       

    select @idx = 1       
        if len(@String)<1 or @String is null  return       

    while @idx!= 0       
    begin       
        set @idx = charindex(@Delimiter,@String)       
        if @idx!=0       
            set @slice = left(@String,@idx - 1)       
        else       
            set @slice = @String       

        if(len(@slice)>0)  
            insert into @temptable(Items) values(@slice)       

        set @String = right(@String,len(@String) - @idx)       
        if len(@String) = 0 break       
    end   
return      

end 
```

由于这会返回一个表，因此您可以加入数据。因此，您的查询将如下所示：

```
select o.id,
  o.name,
  c.body
from orders o
left join 
(
  select c.body, s.items as o_id
  from communications c
  cross apply dbo.split(c.attachment, ',') s
) c
  on o.id = c.o_id 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/740c5/3)

如果您只想`attachment`用正确的名称替换字段中的值，您可以使用该`Split`函数并`CTE`一步：

```
;with cte as (
  select o.id,
    o.name,
    c.body
  from orders o
  left join 
  (
    select c.body, s.items as o_id
    from communications c
    cross apply dbo.split(c.attachment, ',') s
  ) c
    on o.id = c.o_id
)
select distinct c2.body,
  stuff((select distinct ', ' + c1.name
         from cte c1
         where c2.body = c1.body
         for XML path('')),1,1,'') attachment
from cte c2 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/740c5/9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T17:06:48.097

正如其他人所评论的那样，正确的解决方案是将数据库模式更改为具有带有原子字段的规范化模式。

[当前模式的解决方案是首先使用多种可用方法](https://stackoverflow.com/questions/4250475/split-one-column-into-multiple-rows)中的任何一种将附件字段拆分为订单号列表。下一步是将结果与 id 上的 Orders 表连接起来以获取结果。第三步是[将名称连接回列表](http://www.simple-talk.com/sql/t-sql-programming/concatenating-row-values-in-transact-sql/)。有关拆分和连接的说明，请参阅提供的链接。

这是执行 3 个步骤的代码段：

```
WITH
-- Numbers table for split logic
L0 AS(SELECT 1 AS c UNION ALL SELECT 1),
L1 AS(SELECT 1 AS c FROM L0 AS A, L0 AS B),
L2 AS(SELECT 1 AS c FROM L1 AS A, L1 AS B),
L3 AS(SELECT 1 AS c FROM L2 AS A, L2 AS B),
Numbers AS(SELECT ROW_NUMBER() OVER(ORDER BY c) AS n FROM L3),

-- The join query for step 2
bodyOrders AS
(SELECT body,        
       o1.name orderName
FROM   Numbers AS nums 
INNER JOIN Communication AS valueTable 
ON nums.n <= CONVERT(int, LEN(valueTable.attachment)) 
AND SUBSTRING(N',' + valueTable.attachment, n, 1) = N','
INNER JOIN Orders o1
ON LTRIM(RTRIM(SUBSTRING(valueTable.attachment, nums.n, 
   charindex(N',', valueTable.attachment + N',', nums.n) - nums.n))) = o1.id
)

-- Concatenation logic for step 3
SELECT  body,
stuff( (SELECT ','+ orderName
               FROM bodyOrders b2
               WHERE b2.body = b1.body 
               ORDER BY orderName
               FOR XML PATH(''), TYPE).value('.', 'varchar(5000)')
            ,1,1,'')
       AS orderNumbers
      FROM bodyOrders b1
      GROUP BY body; 
```

此代码段没有为大型数据集提供最佳或高效的方式来执行此操作。如果您必须走这条路，这只是一个示例。

[示例 SQL 小提琴](http://sqlfiddle.com/#!3/e07e9/1)。

# python - 在 MPI Python 程序中查找 SegFault 的一般建议

> ID：12728943
> 
> 赞同：0
> 
> 时间：2012-10-04T13:58:19.633
> 
> 标签：python, c, debugging, segmentation-fault, mpi

我使用 mpi4py 库用 Python 编写 MPI 程序。Python 生成并调用低级 C 代码。

我刚刚遇到了一个段错误，需要追踪它。

如果我直接用 CI 编写代码，我会在 中编译和运行我的程序`gdb`，找到有问题的代码行，然后从那里开始调试。

如果我用 Python 编写，我仍然会使用`gdb`（你可以调用`gdb python filename.py`，gdb 会将你指向 C 的违规行。）

但是唉，我使用的是 MPI，它使用的是使用 C 的 Python。我得到了这样的堆栈跟踪

```
mrocklin@baconost:~/workspace/ape$ mpiexec -np 3 -hostfile tmp/hostfile -rankfile tmp/rankfile python ape/codegen/run.py tmp/
[baconost:27370] *** Process received signal ***
[baconost:27370] Signal: Segmentation fault (11)
[baconost:27370] Signal code: Address not mapped (1)
[baconost:27370] Failing at address: 0x8
[baconost:27370] [ 0] /lib/x86_64-linux-gnu/libpthread.so.0(+0xfc60) [0x7fcd529c5c60]
[baconost:27370] [ 1] /home/mrocklin/Software/openmpi/lib/libmpi.so.0(MPI_Comm_get_errhandler+0xa0) [0x7fcd46fae240]
[baconost:27370] [ 2] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/python2.7/site-packages/mpi4py/MPI.so(+0x2ddbc) [0x7fcd47234dbc]
[baconost:27370] [ 3] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/python2.7/site-packages/mpi4py/MPI.so(initMPI+0x1f2e) [0x7fcd4724f95e]
[baconost:27370] [ 4] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(_PyImport_LoadDynamicModule+0xc2) [0x7fcd52cc2e02]
[baconost:27370] [ 5] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(+0xecd90) [0x7fcd52cc0d90]
[baconost:27370] [ 6] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(+0xed031) [0x7fcd52cc1031]
[baconost:27370] [ 7] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(PyImport_ImportModuleLevel+0x2be) [0x7fcd52cc206e]
[baconost:27370] [ 8] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(+0xd3fed) [0x7fcd52ca7fed]
[baconost:27370] [ 9] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(PyObject_Call+0x68) [0x7fcd52c19d18]
[baconost:27370] [10] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(PyEval_CallObjectWithKeywords+0x56) [0x7fcd52ca8516]
[baconost:27370] [11] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x28b8) [0x7fcd52caba78]
[baconost:27370] [12] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x8d2) [0x7fcd52cb0722]
[baconost:27370] [13] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(PyEval_EvalCode+0x32) [0x7fcd52cb0772]
[baconost:27370] [14] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(PyImport_ExecCodeModuleEx+0xc2) [0x7fcd52cbf6e2]
[baconost:27370] [15] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(+0xebcae) [0x7fcd52cbfcae]
[baconost:27370] [16] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(+0xecd90) [0x7fcd52cc0d90]
[baconost:27370] [17] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(+0xed264) [0x7fcd52cc1264]
[baconost:27370] [18] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(PyImport_ImportModuleLevel+0x118) [0x7fcd52cc1ec8]
[baconost:27370] [19] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(+0xd3fed) [0x7fcd52ca7fed]
[baconost:27370] [20] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(PyObject_Call+0x68) [0x7fcd52c19d18]
[baconost:27370] [21] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(PyEval_CallObjectWithKeywords+0x56) [0x7fcd52ca8516]
[baconost:27370] [22] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(PyEval_EvalFrameEx+0x28b8) [0x7fcd52caba78]
[baconost:27370] [23] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(PyEval_EvalCodeEx+0x8d2) [0x7fcd52cb0722]
[baconost:27370] [24] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(PyEval_EvalCode+0x32) [0x7fcd52cb0772]
[baconost:27370] [25] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(PyImport_ExecCodeModuleEx+0xc2) [0x7fcd52cbf6e2]
[baconost:27370] [26] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(+0xebcae) [0x7fcd52cbfcae]
[baconost:27370] [27] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(+0xed58d) [0x7fcd52cc158d]
[baconost:27370] [28] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(+0xecd90) [0x7fcd52cc0d90]
[baconost:27370] [29] /home/mrocklin/Software/epd-7.2-1-rh5-x86_64/lib/libpython2.7.so.1.0(+0xed264) [0x7fcd52cc1264]
[baconost:27370] *** End of error message ***
--------------------------------------------------------------------------
mpiexec noticed that process rank 0 with PID 27370 on node baconost.cs.uchicago.edu exited on signal 11 (Segmentation fault).
-------------------------------------------------------------------------- 
```

两个问题：

1.  在一般情况下，在检测到错误后使用此软件堆栈调试程序的最佳方法是什么（我想避免“您应该通过测试而不是诊断错误来防止错误”评论。我同意这一点，但有时尽管我们尽了最大努力，但仍会发生段错误）

2.  在这种特定情况下，这是否将我指向 MPI/`mpi4py`问题？最后几行表明可能是这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T15:53:10.880

这个特定错误的问题是旧版本的 OpenMPI 不能很好地处理 rankfiles。报告了此错误，并且似乎已从`1.6.2`. 显然这部分代码很少使用且未经测试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-04T14:09:51.047

首先，当您使用不同的模块/产品时，可能会出现版本不匹配的情况。检查您是否使用了正确的 Python/MPI/mpi4y 版本组合。

检查完所有这些后，您几乎可以做的就是：

1.  假设是您的代码导致了问题 - 通常是一个很好的起点。
2.  尝试将案例分解为导致 SEGV 的几个简单语句。我知道，这是最难的部分。
3.  如果您的代码中的错误不明显，请询问有关您的代码的具体问题。
4.  如果所有其他方法都失败了，那么它可能是其他地方的错误。

# asp.net-mvc - 如何从 Ninject 获取实例

> ID：12728945
> 
> 赞同：6
> 
> 时间：2012-10-04T13:58:20.830
> 
> 标签：asp.net-mvc, ninject

下面是 NinjectHttpApplication 配置..

```
public class MvcApplication : NinjectHttpApplication
{
        public MvcApplication()
        {
            Error += NinjectWebsiteApplication_Error;
        }
}    

protected override IKernel CreateKernel()
{
        var kernel = new StandardKernel();
        kernel.Load<ApplicationConfig>();
        return kernel;
}

void NinjectWebsiteApplication_Error(object sender, System.EventArgs e)
{
        ILogger _iLogger = **//How to get instance of Applogger here from Ninject kernel..**
} 
```

下面是 ApplicationConfig 类...

```
public class ApplicationConfig : NHibernateNinjectModule
{

    public ApplicationConfig()
    {
     //other settings such as ddl script generation is present here
    }
    public override void Load()
    {                
        base.Load();
        Bind<ILogger>().To<AppLogger>().InSingletonScope();
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-04T14:29:55.277

```
void NinjectWebsiteApplication_Error(object sender, System.EventArgs e)
{
     var kernel = CreateKernel();
     ILogger _iLogger = kernel.Get<ILogger>();
} 
```

好的，因为它似乎`NinjectHttpApplication`将生成的内核对象存储在

```
public IKernel Kernel
{
    get { return _kernel; }
} 
```

所以你可以将上面重写为

```
void NinjectWebsiteApplication_Error(object sender, System.EventArgs e)
{
     ILogger _iLogger = Kernel.Get<ILogger>();
} 
```

# mysql - 使用用户变量对行进行编号时的保证

> ID：12728949
> 
> 赞同：6
> 
> 时间：2012-10-04T13:58:27.577
> 
> 标签：mysql, sql, variables, user-variables

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-04T14:05:06.193

你误读了声明。当使用多个变量时，它与 SELECT 列表中的表达式顺序有关。
如前所述，这个单变量语句上的 ORDER BY 有保证的顺序直到 MySQL 的当前版本，并且该文本中没有任何内容表明它会改变。

但**保证未来**？谁知道。

* * *

关于**中断查询**，您再次误解了 MySQL 的工作原理。让我们分解您的查询。请注意手册中的此声明

> 在 SELECT 语句中，每个选择表达式仅在发送到客户端时才被计算。这意味着在 HAVING、GROUP BY 或 ORDER BY 子句中，引用在选择表达式列表中分配了值的变量不会按预期工作

查询的处理顺序大致是

```
FROM / JOIN
WHERE / ON
GROUP BY / ROLLUP
HAVING
UNION
SELECT
ORDER BY
@variable resolution 
```

Your "broken" query attempts to use the variable WITHIN the same level, which is just about as sinful as using a WHERE/HAVING clause against a column alias. That's why you'll never see MySQL variable-based row_numbering solutions using the variable on the same query-level, it is always in a subquery. The outer query can be considered the `client` of the inner query at which stage the variable/placeholder-expression has been rendered. By your argument, you can just as easily break it using a WHERE clause involving the @row directly (yes it *will* run!).

# shell - 总记录数

> ID：12728955
> 
> 赞同：0
> 
> 时间：2012-10-04T13:58:37.900
> 
> 标签：shell, unix, awk

我是使用 AWK 的新手。我只是发现了`FNR`变量。我只是想知道是否可以在处理文件**之前**获得总记录数？所以`FNR`在文件的末尾。

我只需要它来做类似的事情

```
awk 'FNR<TOTALRECORDS-4 {print}' 
```

为了删除文件的最后 4 行。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T14:14:05.777

要从文件中删除最后 4 行，您可以使用`head`：

```
head -n -4 somefile > outputfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T17:31:00.920

如果您只想打印文件最后 4 行以外的所有内容，请使用不同的工具。但是，如果您正在使用 awk 进行一些其他处理并且需要合并它，只需将这些行存储在缓冲区中并根据需要打印它们。也就是说，存储最近的 4 行，并在获得换行符时打印缓冲区中的最后一行。例如：

```
awk 'NR>4 { print a[i%4]} {a[i++%4]=$0}' input 
```

这会在数组中保留 4 行`a`。如果我们在文件的前 4 行，则只将行存储在`a`. 如果我们在大于 4 的行上，您要做的第一件事就是将第 4 行打印回来（存储在`a`index中`i%4`）您可以根据需要放置`$0`在这两个操作语句之间进行操作的命令。

# java - 接听电话时语音识别

> ID：12728962
> 
> 赞同：0
> 
> 时间：2012-10-04T13:59:08.363
> 
> 标签：java, android

当电话响起时，我想将铃声静音并在android中启动语音识别。我尝试使用附加的代码来实现它，但是它对我不起作用。

为了使此代码起作用，我可以更改什么？

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.media.MediaPlayer;
import android.os.Bundle;
import android.speech.RecognizerIntent;
import android.telephony.TelephonyManager;
import android.util.Log;
import android.widget.Toast;

public class receivecall extends BroadcastReceiver {
private int REQUEST_CODE = 1234;
Toast toast;
@Override
public void onReceive(Context context, Intent intent) {

    Bundle extras = intent.getExtras();
    if (extras != null) {
        String state = extras.getString(TelephonyManager.EXTRA_STATE);
        if (state.equals(TelephonyManager.EXTRA_STATE_RINGING)) {
            String phoneNumber = extras.getString(TelephonyManager.EXTRA_INCOMING_NUMBER);

                toast = Toast.makeText(context,phoneNumber+"call",Toast.LENGTH_LONG);               
           toast.show();
               Intent i = new Intent(RecognizerIntent.ACTION_RECOGNIZE_SPEECH);
               i.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL,
                       RecognizerIntent.LANGUAGE_MODEL_FREE_FORM);
               i.putExtra(RecognizerIntent.EXTRA_PROMPT, "Voice recognition Demo...");
               context.startActivity(i); 

        }
    }
} 
```

* * *

```
10-05 14:51:50.384: E/AndroidRuntime(559): FATAL EXCEPTION: main
10-05 14:51:50.384: E/AndroidRuntime(559): java.lang.RuntimeException: Unable to instantiate receiver com.example.handsfree.IncomingCallInterceptor: java.lang.ClassNotFoundException: com.example.handsfree.IncomingCallInterceptor
10-05 14:51:50.384: E/AndroidRuntime(559):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2100)
10-05 14:51:50.384: E/AndroidRuntime(559):  at android.app.ActivityThread.access$1500(ActivityThread.java:123)
10-05 14:51:50.384: E/AndroidRuntime(559):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1197)
10-05 14:51:50.384: E/AndroidRuntime(559):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-05 14:51:50.384: E/AndroidRuntime(559):  at android.os.Looper.loop(Looper.java:137)
10-05 14:51:50.384: E/AndroidRuntime(559):  at android.app.ActivityThread.main(ActivityThread.java:4424)
10-05 14:51:50.384: E/AndroidRuntime(559):  at java.lang.reflect.Method.invokeNative(Native Method)
10-05 14:51:50.384: E/AndroidRuntime(559):  at java.lang.reflect.Method.invoke(Method.java:511)
10-05 14:51:50.384: E/AndroidRuntime(559):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-05 14:51:50.384: E/AndroidRuntime(559):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-05 14:51:50.384: E/AndroidRuntime(559):  at dalvik.system.NativeStart.main(Native Method)
10-05 14:51:50.384: E/AndroidRuntime(559): Caused by: java.lang.ClassNotFoundException: com.example.handsfree.IncomingCallInterceptor
10-05 14:51:50.384: E/AndroidRuntime(559):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:61)
10-05 14:51:50.384: E/AndroidRuntime(559):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
10-05 14:51:50.384: E/AndroidRuntime(559):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
10-05 14:51:50.384: E/AndroidRuntime(559):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:2095)
10-05 14:51:50.384: E/AndroidRuntime(559):  ... 10 more
10-05 14:51:52.113: I/Exception(538): PhoneStateListener() e = android.content.ActivityNotFoundException: No Activity found to handle Intent { act=android.speech.action.RECOGNIZE_SPEECH flg=0x10000000 (has extras) }
10-05 14:52:00.145: I/Process(559): Sending signal. PID: 559 SIG: 9
10-05 14:52:01.553: W/TextToSpeech(538): shutdown failed: not bound to TTS engine
10-05 14:52:03.134: E/ActivityThread(538): Activity com.example.handsfree1.HandsFree has leaked ServiceConnection android.speech.tts.TextToSpeech$Connection@412b7590 that was originally bound here
10-05 14:52:03.134: E/ActivityThread(538): android.app.ServiceConnectionLeaked: Activity com.example.handsfree1.HandsFree has leaked ServiceConnection android.speech.tts.TextToSpeech$Connection@412b7590 that was originally bound here
10-05 14:52:03.134: E/ActivityThread(538):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:936)
10-05 14:52:03.134: E/ActivityThread(538):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:830)
10-05 14:52:03.134: E/ActivityThread(538):  at android.app.ContextImpl.bindService(ContextImpl.java:1117)
10-05 14:52:03.134: E/ActivityThread(538):  at android.content.ContextWrapper.bindService(ContextWrapper.java:370)
10-05 14:52:03.134: E/ActivityThread(538):  at android.speech.tts.TextToSpeech.connectToEngine(TextToSpeech.java:614)
10-05 14:52:03.134: E/ActivityThread(538):  at android.speech.tts.TextToSpeech.initTts(TextToSpeech.java:584)
10-05 14:52:03.134: E/ActivityThread(538):  at android.speech.tts.TextToSpeech.<init>(TextToSpeech.java:547)
10-05 14:52:03.134: E/ActivityThread(538):  at android.speech.tts.TextToSpeech.<init>(TextToSpeech.java:522)
10-05 14:52:03.134: E/ActivityThread(538):  at android.speech.tts.TextToSpeech.<init>(TextToSpeech.java:507)
10-05 14:52:03.134: E/ActivityThread(538):  at com.example.handsfree1.HandsFree.onCreate(HandsFree.java:82)
10-05 14:52:03.134: E/ActivityThread(538):  at android.app.Activity.performCreate(Activity.java:4465)
10-05 14:52:03.134: E/ActivityThread(538):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
10-05 14:52:03.134: E/ActivityThread(538):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1920)
10-05 14:52:03.134: E/ActivityThread(538):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1981)
10-05 14:52:03.134: E/ActivityThread(538):  at android.app.ActivityThread.access$600(ActivityThread.java:123)
10-05 14:52:03.134: E/ActivityThread(538):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1147)
10-05 14:52:03.134: E/ActivityThread(538):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-05 14:52:03.134: E/ActivityThread(538):  at android.os.Looper.loop(Looper.java:137)
10-05 14:52:03.134: E/ActivityThread(538):  at android.app.ActivityThread.main(ActivityThread.java:4424)
10-05 14:52:03.134: E/ActivityThread(538):  at java.lang.reflect.Method.invokeNative(Native Method)
10-05 14:52:03.134: E/ActivityThread(538):  at java.lang.reflect.Method.invoke(Method.java:511)
10-05 14:52:03.134: E/ActivityThread(538):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
10-05 14:52:03.134: E/ActivityThread(538):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
10-05 14:52:03.134: E/ActivityThread(538):  at dalvik.system.NativeStart.main(Native Method) 
```

# workflow - Drools 专家和工作流：无法解析 ObjectType

> ID：12728965
> 
> 赞同：2
> 
> 时间：2012-10-04T13:59:12.147
> 
> 标签：workflow, drools, flow

我在 Drools Expert 中有这些验证规则，我已经测试过并且工作正常：

```
package com.myapp.validationPackage

import com.myapp.model.*;

declare Message 
    type : String 
    text : String 
end

function Message error(String text) { 
    Message message = new Message(); 
    message.setType("ERROR"); 
    message.setText(text);
    return message;
}

rule "First Validation"
    ruleflow-group "Entity Validation"
    when
        Entity( $h : history )
        not ( exists EntityHistory(closeDate == null) from $h
            ) 
    then
        insert( error("Entity must be open") );
end 
```

现在我想在工作流中使用这个规则，但是当我尝试在 Eclipse 上构建 .rf 文件时给我这个错误：

**无法解析 ObjectType 'Message'：[Rule name='RuleFlow-Split-XX'] ..**

我应该如何使用 delcared 类型来避免错误？

谢谢。

# css - 选择框元素和 :after

> ID：12728971
> 
> 赞同：7
> 
> 时间：2012-10-04T13:59:28.020
> 
> 标签：css, select, pseudo-element

为什么它不起作用？是否可以在不添加额外元素的情况下解决此问题？

[http://jsfiddle.net/86gb2/](http://jsfiddle.net/86gb2/)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-04T16:29:03.170

在您的小提琴中，以下声明可能没有达到您的预期。

```
select:after {content: "This doesn't work";} 
```

这实际上会将文本附加到选择框***的内容之后***，而不是选择框本身之后。因此，该文本被添加`option`到标记中的最后一个之后。（这当然是无效的，也不会被浏览器呈现。）

换句话说，如果你有这个标记：

```
<a href="#">My link</a> 
```

这个CSS：

```
a:after {content: " has now been appended to";} 
```

实际发生的是这样的：

```
<a href="#">My link has now been appended to</a> 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-10-04T14:09:19.257

我建议对这些事情使用 jQuery API：

```
$(document).ready(function(){
    $("select").after("<div>this doesnt work, or does it?</div>");
});​ 
```

# android - 连接android设备后Eclipse调试视图中的NullPointerException

> ID：12728972
> 
> 赞同：2
> 
> 时间：2012-10-04T13:59:30.833
> 
> 标签：android, linux, eclipse

我在 Fedora 16 操作系统上运行 Eclipse，我遇到了一些奇怪的问题。在我不选择调试视图之前一切正常。之后，如果连接了任何 android 设备，eclipse 就会卡住。我从终端启动了 Eclipse，发现这个异常发生在卡住之前：

`Exception in thread "LogCat output receiver for ????????????" java.lang.NullPointerException at com.android.ddmuilib.logcat.LogCatReceiver$1.run(LogCatReceiver.java:100) at java.lang.Thread.run(Thread.java:722)`

有什么想法如何处理它吗？

**更新**：看起来我遇到了这个问题：[http](http://code.google.com/p/android/issues/detail?id=34945) ://code.google.com/p/android/issues/detail?id=34945 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-16T08:47:02.523

这是 Eclipse [https://bugs.eclipse.org/bugs/show_bug.cgi?id=384315#c11](https://bugs.eclipse.org/bugs/show_bug.cgi?id=384315#c11)中的一个错误，它已经在上次更新中修复

# sharepoint - Sharepoint 2010 在部署或应用程序池重新启动后向每个用户发送一次错误 404

> ID：12728974
> 
> 赞同：2
> 
> 时间：2012-10-04T13:59:35.580
> 
> 标签：sharepoint, sharepoint-2010, error-handling

我们有一个大型的 SharePoint 项目，我们安装在不同的服务器上。每当我们部署任何功能/webpart 时，任何页面（包括“ManageFeatures.aspx”之类的后端页面）的首次访问都会引发 404 错误。

*每个*用户都会发生一次

我包含了一个 httphandler (IHttpModule) 来捕获这些错误以获取更多信息。在那个处理程序中，我发现虽然抛出了这个错误，但 SPContext.Current 为空。

当我第二次调用该页面时，404 消失了，页面显示正确。这不是零星的错误，而是每次我们部署某些东西时都会发生。

任何线索是什么导致了这种行为以及如何避免这种情况？

（我们在所有 10 台机器上都遇到了错误）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-07T08:46:08.943

尝试使用默认母版页来表示此错误。

# java - 动态加载符合接口的类

> ID：12728985
> 
> 赞同：7
> 
> 时间：2012-10-04T14:00:27.117
> 
> 标签：java, reflection, interface

我有几个实现两个接口的类。它们都实现了*BaseInterface*和其他一些特定于它们的接口。

我希望能够使用下面的*loadClass*方法来实例化*.properties*文件中引用的类并调用它们都包含的通用方法（因为它们实现*了 BaseInterface*）。

```
public interface BaseInterface {
    public void doBase();
}

public interface SpecificInterface extends BaseInterface {
    public void doSpecific();
}

public class SpecificClass implements SpecificInterface {
    public void doBase() { ... }

    public void doSpecific() { ... }
}

public class LoadClass() {
    private PropertiesLoader propertiesLoader = new PropertiesLoader();

    public <C extends BaseInterface> C loadClass(String propertyName) {
        Class<C> theClass;

        // Load the class.
        theClass = propertiesLoader.getPropertyAsClass(propertyName);

        // Create an instance of the class.
        C theInstance = theClass.newInstance();

        // Call the common method.
        theInstance.doBase();

        return theInstance;
    }
} 
```

不幸的是，当我运行代码时：

```
loadClassInstance.loadClass("SpecificClass"); 
```

我得到以下异常：

```
Exception in thread "main" java.lang.ClassCastException:
SpecificClass cannot be cast to BaseInterface
at LoadClass.loadClass 
```

任何想法我将如何解决这个问题？

非常感谢，丹尼

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-04T14:17:27.997

Java 的服务提供者接口 (SPI) 库允许您使用公共无参数构造函数根据它们实现的接口动态加载类，这一切都是通过使用`META-INF/services`.

首先，您需要`interface`：

```
package com.example;

public interface SomeService {

    String getServiceId();

    String getDisplayName();
} 
```

然后，当您需要它们时，您可以使用 Java 的类加载它们，[`ServiceLoader`](http://docs.oracle.com/javase/6/docs/api/java/util/ServiceLoader.html)该类实现`Iterable`：

```
ServiceLoader<SomeService> loader = ServiceLoader.load(SomeService.class);
for (SomeService serv : loader) {
    System.out.println(serv.getDisplayName());
} 
```

然后，当您的类路径上有 1 个或多个实现类时，它们会在`META-INF/services`. 因此，如果您有实现：

```
package com.acme;

public class SomeImplementation implements SomeService {

    // ...

    public SomeImplementation() { ... }

    // ...
} 
```

请注意，此类*需要*默认的无参数构造函数，这不是可选的。

`META-INF/services`您可以通过在类路径（例如 jar 的根目录）中创建具有以下属性的文件来向类加载器注册它：

1.  文件名是接口的全限定类名，在这种情况下，它是`com.example.SomeService`
2.  该文件包含一个以换行符分隔的实现列表，因此对于示例实现，它将包含一行：`com.acme.SomeImplementation`.

你去了，就是这样。你如何构建你的项目将决定你把`META-INF/services`东西放在哪里。Maven、Ant 等都有处理这种情况的方法。如果您在将这些文件添加到您的构建时遇到任何问题，我建议您询问有关您的特定构建过程的另一个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:12:25.620

如果你用下面的代码替换你的代码，它就可以工作。我怀疑这`PropertiesLoader`是在做不应该做的事情。

```
 Class<?> theClass;
    // Load the class.
    theClass = Class.forName("SpecificClass");
    // Create an instance of the class.
    C theInstance = (C) theClass.newInstance();

   BaseInterface base =  loadClass();//There is no problem in casting 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:17:02.850

Java 程序通常由系统类加载器加载。.properties 文件中引用的类由用户定义的类加载器加载。由不同类加载器加载的类被认为是不同的，即使它们具有相同的名称并且是从同一个类文件中加载的。在您的情况下，系统类加载器加载的接口 BaseInterface 与 PropertiesLoader 加载的 BaseInterface 不同。为了解决这个问题，PropertiesLoader 应该将 BaseInterface 的加载委托给系统类加载器。这样做的典型方法是使用系统类加载器作为 PropertiesLoader 的父类加载器。

# ninject - 如何：Ninject 绑定（工作单元、工厂和服务）

> ID：12728986
> 
> 赞同：1
> 
> 时间：2012-10-04T14:00:28.037
> 
> 标签：ninject, unit-of-work

关于这个问题的一点背景：在野外，我看到很多服务依赖于 IUnitOfWork 的某些实现。当我检查这些应用程序的 ninject 绑定时，我注意到它们非常简单，因为 IUnitOfWork 通常只有一个绑定。

不幸的是，我的应用程序必须为 IUnitOfWork 提供 2 个绑定。服务 A 和 B 将使用一个指向我们的暂存数据库的工作单元，而服务 C 和 D 将使用一个指向我们的生产数据库的工作单元。

我现在可以通过为服务 A 和 B 设置命名绑定，然后为 IUnitOfWork 创建绑定，如下所示：

```
Kernel.Bind<IUnitOfWork>()
            .To<StagingUnitOfWork>
            .WhenParentNamed("ServiceA")

kernel.Bind<IServiceA>()
            .To<ServiceA>
            .Named("ServiceA") 
```

但是，我不喜欢必须为“ServiceB”的 IUnitOfWork 创建另一个绑定。我只需要“接受”并使用这种方法吗？

注意：我想保持我的类没有注入属性等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-17T13:16:06.993

我想这是你唯一的方法。

```
kernel.Bind<IUnitOfWork>().To<StagingUnitOfWork>().WhenInjectedInto<ServiceA>();
kernel.Bind<IUnitOfWork>().To<StagingUnitOfWork>().WhenInjectedInto<ServiceB>();
kernel.Bind<IUnitOfWork>().To<ProductionUnitOfWork>().WhenInjectedInto<ServiceC>();
kernel.Bind<IUnitOfWork>().To<ProductionUnitOfWork>().WhenInjectedInto<ServiceD>(); 
```

# php - 如何在 .htaccess 中设置链接/profile/username

> ID：12728989
> 
> 赞同：1
> 
> 时间：2012-10-04T14:00:35.357
> 
> 标签：php, .htaccess

我正在编写一个脚本，我想制作诸如 www.mysite.com/signup 之类的链接。此链接用于注册。www.mysite.com/user/username 和用户个人资料的此链接。没有任何 php 扩展名的链接。当有人请求链接时，例如 www.mysite.com/signup.php 应该将他重定向到 www.mysite.com/signup

.my .htaccess

```
RewriteEngine On
RewriteRule ^/?([a-z]+)$ $1.php [L] 
```

这样，所有链接都可以正常工作，但是当我访问用户的个人资料时，例如 www.mystie.com/profile/username

我收到这个错误

找不到对象！

在此服务器上找不到请求的 URL。如果您手动输入了 URL，请检查您的拼写并重试。

如果您认为这是服务器错误，请联系网站管理员。

错误 404

我的问题：要添加什么代码才能让该链接正常工作？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T19:35:55.583

您的路由请求盲目地发送到 php 文件，这与您的问题无关：

```
RewriteEngine On

RewriteCond %{REQUEST_FILENAME}.php -f
RewriteRule ^/?([a-z]+)$ $1.php [L] 
```

现在您需要添加一条规则来路由配置文件，因为您没有规则，您的配置文件链接将无法正常工作。所以看起来像：

```
RewriteRule ^/?profile/(.*)$ /profile.php?username=$1 [L] 
```

替换`profile.php`为生成配置文件的任何脚本，并替换`username=`为脚本查找用户名的任何 _GET 参数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-06T00:52:58.850

好的，我解决了问题

非常感谢所有试图帮助我的人，尤其是 Jon Lin :)

这是代码

```
RewriteEngine On 
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^profile/(.*)$ profile.php?username=$1 [L] 
```

我的profile.php

```
$username = $_GET['username'];

$info = fetchUserInfo($username);

echo $info['username'];
echo $info['userid']; 
```

希望也能帮助一些有同样问题的人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-04T14:06:21.337

您想阅读 mod_rewrite 手册中有关“RewriteLog”和“RewriteLogLevel”这两个指令的信息。使用这些，您可以通过查看日志文件中的所有步骤来了解重写引擎如何处理请求。

# binary - JCR 避免文件流式传输

> ID：12728996
> 
> 赞同：1
> 
> 时间：2012-10-04T14:00:50.567
> 
> 标签：binary, java-io, jackrabbit, jcr

在我的 jackrabbit 数据存储中，存储了大型二进制文件。我可以浏览数据存储文件系统并毫无问题地打开这些文件。

现在如何在我的应用程序中使用这些文件？我当然可以使用 jcr.binary 类型的 getStream() 方法，但是我会将已经存在的文件的所有内容流式传输到一个新的临时文件中，对吗？由于我的二进制文件非常大，我不想要那个。我正在寻找一种方法来获取二进制文件的完整文件系统路径。jcr.Property 的 getpath() 方法只返回存储库中的路径，并且只返回映射的节点名称，而不是真正存储在我的文件系统上的节点名称。一般来说，我必须将二进制对象解析为 Java.IO.File 对象，并且我想避免 Streaming

编辑：通过反射我看到我的二进制类是类 org.apache.jackrabbit.core.value.BLOBInDataStore 我想我必须以某种方式从那里访问 File 值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T06:42:27.337

当我说反思可能会有所帮助时，我是对的。这是我的代码，它返回存储在 jackrabbit 数据存储中的二进制文件的物理文件路径：

```
public String getPhysicalBinaryPath(Binary b){
    try {
        Field idField=b.getClass().getDeclaredField("identifier");
        idField.setAccessible(true);
        String identifier = (String)idField.get(b).toString();
        Field storeField=b.getClass().getDeclaredField("store");
        storeField.setAccessible(true);
        Object store = storeField.get(b);
        Field pathField = store.getClass().getDeclaredField("path");
        pathField.setAccessible(true);
        String dataStorePath = (String)pathField.get(store);

        String binaryPath = identifier.substring(0,2)+File.separator+
                            identifier.substring(2,4)+File.separator+
                            identifier.substring(4,6)+File.separator+
                            identifier;

        return dataStorePath+File.separator+binaryPath;

    } catch (IllegalArgumentException ex) {
        Logger.getLogger(Repoutput.class.getName()).log(Level.SEVERE, null, ex);
    } catch (IllegalAccessException ex) {
        Logger.getLogger(Repoutput.class.getName()).log(Level.SEVERE, null, ex);
    } catch (NoSuchFieldException ex) {
        Logger.getLogger(Repoutput.class.getName()).log(Level.SEVERE, null, ex);
    } catch (SecurityException ex) {
        Logger.getLogger(Repoutput.class.getName()).log(Level.SEVERE, null, ex);
    }

        return "";

} 
```

编辑：这是官方的做法（你必须使用jackrabbit-api）

```
Binary b = session.getValueFactory().createBinary(in);
Value value = session.getValueFactory().createValue(b);
  if (value instanceof JackrabbitValue) {
   JackrabbitValue jv = (JackrabbitValue) value;
   String id = jv.getContentIdentity();
  } 
```