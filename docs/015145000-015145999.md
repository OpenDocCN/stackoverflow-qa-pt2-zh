# StackOverflow 问答 15145000-15145999

# c# - 带有 MessageBox 的 C# String.SubString 不显示任何内容

> ID：15145003
> 
> 赞同：3
> 
> 时间：2013-02-28T20:25:15.493
> 
> 标签：c#, string, substring, messagebox

我正在尝试`string`使用 a来显示 a 的一部分`MessageBox`，为此我使用了该`String.SubString`方法。但是，当我运行代码时，`MessageBox`不会显示并且不会引发错误。

出于故障排除的目的，我`MessageBox`在尝试显示`substring`.

这将显示以下 ( `Received |<BID>22|`)：

![](../Images/6cf00d9c8c2f8a65c7a18c8c875fd0e7.png)

我想显示字符串的数字部分，但是当我尝试这样做时，什么都没有显示。谁能看看出了什么问题？这是代码：

```
public void parseMessage(string theMessage)
{
    String message = theMessage.Replace("\n", String.Empty);

    MessageBox.Show("Received |" + message + "|");

    String zoneNumber = message.Substring(5, message.Length);

    if (message.StartsWith("<BID>"))
    {
        MessageBox.Show("Bid received for zone " + zoneNumber);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T20:29:16.080

我无法访问您的链接图像，所以我不确定`message`其中包含什么，但是

```
String zoneNumber = message.Substring(5, message.Length); 
```

应该抛出一个异常，因为它会使字符串的长度溢出 5 个字符。

采用

```
String zoneNumber = message.Substring(5); 
```

反而。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T20:29:27.653

怎么改

```
String zoneNumber = message.Substring(5, message.Length); 
```

到

```
String zoneNumber = message.Substring(5); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T20:32:43.727

> 我想显示字符串的数字部分，但是当我尝试这样做时，什么都没有显示

那是因为，查看您的消息，**它有前导空格**，而您正在尝试这样做`StartsWith("<BID>")`

首先，`TrimStart`然后尝试`StartsWith`，或者只是做`Contains`。

`StartsWith`：

```
if (message.TrimStart().StartsWith("<BID>"))
{
    MessageBox.Show("Bid received for zone " + zoneNumber);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T20:33:46.610

所以问题是`if (message.StartsWith("<BID>"))`不返回true？

这有帮助吗？

```
public void parseMessage(string theMessage)
{
       String message = theMessage.Replace("\r", String.Empty).Replace("\n", String.Empty).Replace("\r\n", String.Empty);
       MessageBox.Show("Received |" + message + "|");
       String zoneNumber = message.Substring(5, message.Length);
       if (message.TrimStart().StartsWith("<BID>"))
       {
          MessageBox.Show("Bid received for zone " + zoneNumber);
       }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-28T20:33:08.417

您可以使用 rplace 而不是 SubString

```
if (message.StartsWith("<BID>"))
{
    MessageBox.Show("Bid received for zone " + message.Replace("<BID>",""));
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-02-28T21:42:46.813

试试这个：

```
String bidMarker = "<BID>";
int startLoc = message.IndexOf(bid);
if (startLoc != -1)
{
    String zoneNumber = message.Substring(startLoc + bidMarker.Length).Trim();
    MessageBox.Show("Bid received for zone " + zoneNumber);
} 
```

# arrays - 数组最后一个元素的简明表示法

> ID：15145009
> 
> 赞同：5
> 
> 时间：2013-02-28T20:25:24.257
> 
> 标签：arrays, f#

是否有一个简洁的符号来访问数组的最后一个元素，类似于 C++ 中的 std::vector::back() ？我必须写：

```
veryLongArrayName.[veryLongArrayName.Length-1] 
```

每一次？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T18:31:49.573

[从评论扩展]

内置选项是`Seq.last veryLongArrayName`，但请注意，这是 O(N) 而不是 O(1)，因此对于除最小数组之外的所有数组，实际使用可能效率太低。

也就是说，自己抽象这个功能并没有什么坏处：

```
[<CompilationRepresentation(CompilationRepresentationFlags.ModuleSuffix)>]
[<RequireQualifiedAccess>]
module Array =
    let inline last (arr:_[]) = arr.[arr.Length - 1] 
```

现在你可以在`Array.last veryLongArrayName`没有任何开销的情况下做，同时保持代码非常惯用和可读。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2016-05-20T22:50:58.230

我在官方文档中找不到，但 F# 4 似乎已经`Array.last`实现了开箱即用：

```
/// Returns the last element of the array.
/// array: The input array.
val inline last : array:'T [] -> 'T 
```

[链接到 github 上的实现](https://github.com/fsharp/fsharp/blob/master/src/fsharp/FSharp.Core/array.fs)。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-04T14:48:41.897

作为为 _[] 编写函数的替代方法，您还可以为 IList<'T> 编写扩展属性：

```
open System.Collections.Generic

[<AutoOpen>]
module IListExtensions =
    type IList<'T> with 
        member self.Last = self.[self.Count - 1]

let lastValue = [|1; 5; 13|].Last // 13 
```

# mysql - 使用同一表中的第一个记录实例更新多行

> ID：15145023
> 
> 赞同：2
> 
> 时间：2013-02-28T20:26:30.887
> 
> 标签：mysql, sql, database

假设下表：

```
+----+-----------+
| id | session   |
+----+-----------+
|  1 | abcd1234  |
|  2 | abcd1234  |
|  3 | abcd1234  |
|  4 | qwert5678 |
|  5 | qwert5678 |
|  6 | abcd1234  |
|  7 | abcd1234  |
|  8 | qwert5678 |
|  9 | abcd1234  |
| 10 | qwert5678 |
| 11 | qwert5678 |
| 12 | qwert5678 |
+----+-----------+ 
```

假设我们想要获取给定会话的第一个 id，然后将该会话的每个实例设置*为所有会话*的 id ，这样表就变为：

```
+----+-----------+
| id | session   |
+----+-----------+
|  1 |     1     |
|  2 |     1     |
|  3 |     1     |
|  4 |     4     |
|  5 |     4     |
|  6 |     1     |
|  7 |     1     |
|  8 |     4     |
|  9 |     1     |
| 10 |     4     |
| 11 |     4     |
| 12 |     4     |
+----+-----------+ 
```

我们有一个包含大约 45M 记录的表，并且当按列 b 分组时，基本上将 b 列的每个实例都更改为 min(a 列) 的值。

有没有办法在一个查询中做到这一点？我们尝试了几个。

```
 update example e 
 set session = 
     (select id from 
         (select id,min(session) 
          from example as first_id
          group by session
         ) as this_id
 ); 
```

...错误输出：“子查询返回超过 1 行”。

```
 update example e 
 join 
     (select id 
      from 
          (select id,min(session) 
           from example as first_id 
           group by session
          ) as this_id
     ) as etable 
 set session = first_id; 
```

...错误输出：“'字段列表'中的未知列'first_id'”。也使用 'this_id' 达到同样的效果。

和其他查询。这可能在单个查询中吗？我们是不是在错误地思考这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:39:55.987

询问：

**[SQLFIDDLE示例](http://sqlfiddle.com/#!2/98690/1)**

```
UPDATE example
SET session =(SELECT MIN(e2.ID) 
              FROM (SELECT * 
                    FROM example) e2
              WHERE e2.session = example.session) 
```

结果：

```
| ID | SESSION |
----------------
|  1 |       1 |
|  2 |       1 |
|  3 |       1 |
|  4 |       4 |
|  5 |       4 |
|  6 |       1 |
|  7 |       1 |
|  8 |       4 |
|  9 |       1 |
| 10 |       4 |
| 11 |       4 |
| 12 |       4 | 
```

# javascript - 需要使用 JavaScript 中的键码为 tab 键分配事件侦听器吗？

> ID：15145024
> 
> 赞同：3
> 
> 时间：2013-02-28T20:26:32.400
> 
> 标签：javascript, firefox-addon, event-listener

我目前有一个事件监听器来监听用户何时在 html 网站的文本框中输入电子邮件地址。然后，它会在检测到正在输入电子邮件地址时显示警报。目前我已经设置它检测事件模糊然后检查它是否符合正则表达式然后将显示警报。这会产生许多警报，并且不像警报那样非常准确

我需要事件监听器来监听 Tab 键何时被按下。我知道我需要使用 KeyCodes 但以前没有使用过它们。此事件侦听器当前正在动态工作，因为它是扫描网页的 Firefox 插件，因此事件侦听器不会专门附加到特定的输入框。

代码：

```
vrs_getWin.document.getElementsByTagName("body")[0].innerHTML = bodyContents;
    var inputFields = vrs_getWin.document.getElementsByTagName("input");
    for(inputC=0; inputC < inputFields.length; inputC++)   {
        var elementT = inputFields[inputC].getAttribute("id");
        inputFields[inputC].addEventListener("blur", function(){
            var emailPattern = /(\w[-._\w]*\w@\w[-._\w]*\w\.\w{2,3})/g;
            var resultEmail = emailPattern.test(vrs_getWin.document.getElementById(elementT).value);
            if(result)  {
               prompts.alert(null, "Test", vrs_getWin.document.getElementById(elementT).value);         
            }
        }, false);
    } 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:45:08.130

我认为从用户体验的角度来看，我不建议使用 javascript 警报来通知用户问题，特别是如果您希望在他们完成单个表单输入时发生通知。模糊事件将是我的建议，并使用其他一些视觉提示来通知用户。

但是，如果您想使用 tab 键，您要查找的事件是“keydown”或“keyup”。要使用它，您需要监听 keydown 事件，然后检查 event.keyCode == '9'。（制表键）

```
document.addEventListener('keydown', function(e){
                if( e.keyCode == '9' ){
                    alert('You pressed the tab key.');
                }
            }, false); 
```

要获取键的键码，我喜欢打开控制台并输入：

```
document.addEventListener('keydown', function(e){
                console.log( e.keyCode );
            }, false); 
```

然后，当您按下一个键时，它将输出该键的键码。

# python - 尝试使用示例运行生菜场景时，我创建的步骤无法被识别

> ID：15145025
> 
> 赞同：1
> 
> 时间：2013-02-28T20:26:36.163
> 
> 标签：python, continuous-integration, lettuce

让我看看我能不能告诉你我有多困惑。

如果我只使用内联变量的生菜特征文件，那么一切正常。例如，如果我创建以下功能文件：

```
Feature: File Finder
    I need to just look for the presence of certain files on a system

Scenario Outline:  Verify the presence (or absence) of a file on a system
    Given I log into a system at "172.16.100.23" as user "cadmin" with password "cadmin"
    Then I can look for "/var/log/nginx.log" and know that it should "not" be there 
```

并针对它运行生菜，它告诉我创建以下步骤：

```
You can implement step definitions for undefined steps with these snippets:

# -*- coding: utf-8 -*-
from lettuce import step

@step(u'Given I log into a system at "([^"]*)" as user "([^"]*)" with password "([^"]*)"')
def given_i_log_into_a_system_at_group1_as_user_group2_with_password_group2(step, group1, group2, group3):
    assert False, 'This step must be implemented'
@step(u'Then I can look for "([^"]*)" and know that it should "([^"]*)" be there')
def then_i_can_look_for_group1_and_know_that_it_should_group2_be_there(step, group1, group2):
    assert False, 'This step must be implemented' 
```

如果我将该标题（“从生菜导入步骤”）和这些步骤粘贴到 filefinder.py 文件夹中，并将“assert False”更改为“assert True”以使测试通过，我将顺利通过：

```
Feature: File Finder
  I need to just look for the presence of certain files on a system

Scenario: Verify the presence (or absence) of a file on a system
  Given I log into a system at "172.16.100.23" as user "cadmin" with password "cadmin"
  Then I can look for "/var/log/nginx.log" and know that it should "not" be there

1 feature (1 passed)
1 scenario (1 passed)
2 steps (2 passed) 
```

现在，我想添加一个示例表。我所做的只是添加`Then I can ask <manager> for <item>`作为我的第三步和以下示例表：

```
Examples:
    | manager   | item            |
    | "bob"     | "raise"         |
    | "suzy"    | "more switches" |
    | "bill"    | "more coffee"   | 
```

当我对此运行生菜时，它告诉我：

```
You can implement step definitions for undefined steps with these snippets:

# -*- coding: utf-8 -*-
from lettuce import step

@step(u'Then I can ask <manager> for <item>')
def then_i_can_ask_manager_for_item(step):
    assert False, 'This step must be implemented' 
```

所以，我将它添加到我的 filefinder.py 文件中，并将“assert False”更改为“assert True”，只是为了让它通过并在我的控制台上看到绿色。如果我对此运行生菜，它会给我完全相同的响应，就好像它无法识别占位符`<manager>`并`<item>`创建一个有效的步骤一样，我猜。这是我唯一一次无法创建它要求的步骤 - 当我使用此处描述的占位符时：http: [//lettuce.it/tutorial/scenario-outlines.html](http://lettuce.it/tutorial/scenario-outlines.html) 奇怪的是示例显示“场景大纲: Factorials [0-4]" 因为我不知道是否需要 [0-4]。尽管我没有任何成功的示例测试，但在我的测试中似乎没有任何区别，所以我可能完全错了。

我需要做的是弄清楚为什么生菜看不到那些具有“ `<placeholder>`”语法内联的步骤。

有人可以为我解释一下吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T20:41:55.740

我遇到了这个页面： http: [//lettuce.it/intro/wtf.html](http://lettuce.it/intro/wtf.html)恰当地命名为 wtf！

我需要做的是`<placeholders>`在示例表中加上引号并删除引号。

现在，我的功能文件如下所示：

```
Feature: File Finder
    I need to just look for the presence of certain files on a system

Scenario Outline:  Verify the presence of a file on a system [0-3]
    Given I log into a system at "172.16.100.23" as user "cadmin" with password "cadmin"
    Then I can look for "/var/log/nginx.log" and know that it should "not" be there
    Then I can ask "<manager>" for "<item>"

Examples:
    | manager | item          |
    | bob     | raise         |       
    | suzy    | more switches |
    | bill    | more coffee   | 
```

它在我的控制台上以各种绿色传递：

```
Feature: File Finder
  I need to just look for the presence of certain files on a system

Scenario Outline: Verify the presence of a file on a system
  Given I log into a system at "172.16.100.23" as user "cadmin" with password "cadmin"
  Then I can look for "/var/log/nginx.log" and know that it should "not" be there
  Then I can ask "<manager>" for "<item>"

Examples:
  | manager | item          |
  | bob     | raise         |
  | suzy    | more switches |
  | bill    | more coffee   |

1 feature (1 passed)
3 scenarios (3 passed)
9 steps (9 passed) 
```

要点...“[0-4]”不是必需的，在使用示例时，请确保使用“场景大纲”而不是“场景”。

# jquery - 加载时自动浏览器缩放

> ID：15145026
> 
> 赞同：0
> 
> 时间：2013-02-28T20:26:52.733
> 
> 标签：jquery, html, css, zooming

是否可以在我正在制作的网页上设置浏览器缩放比例，以使用 javascript 自动加载 75%？如果是这样，你怎么能这样做？我用谷歌搜索，但还没有真正找到任何东西。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:29:48.900

```
<meta name="viewport" content="width=device-width"> 
```

在 CSS 中，`body { width:75%; margin:auto; }`缩小内容并将其居中。

# javascript - 使用缩略图库切换多个图像

> ID：15145032
> 
> 赞同：0
> 
> 时间：2013-02-28T20:27:20.090
> 
> 标签：javascript, jquery, css, html

我目前有一个使用`onclick`/jQuery/JavaScript 的缩略图库，尽管一切正常，但我认为用户必须单击缩略图将其打开，然后再次单击将其关闭，然后再继续下一个。

我目前有 8 个缩略图/更大的图像，并且我已经用不同的 id 输入了 8 次此代码：

```
function toggle_visibility(chLoTog) {
    var e = document.getElementById(chLoTog);
    if(e.style.display == 'block')
    e.style.display = 'none';
    else
    e.style.display = 'block';
} 
```

* * *

我是 jQuery 的新手，我敢打赌，有一种方法不必输入此代码 8 次。我真正想要的代码是：

1.  单击缩略图并显示相关图像
2.  单击隐藏当前缩略图并显示新缩略图的另一个缩略图
3.  为了能够以随机顺序进行。

我希望这一切都有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:06:39.317

您可以使用缩略图上的类和数据属性使用 jquery 非常简单地实现，即。

```
// HTML
// Add a class and a data attribute to the gallery thumbnal image
<img class="gallery-thumbnail" src="path/to/gallery-thumbnail.jpg" data-img="path/to/gallery-image.jpg" />

// jquery
// Bind a click function to each thumbnail image
$('.gallery-thumbnail').click(function(){
    // Hide all the currently showing gallery images
    $('.gallery-image').hide();

    // Get the id of the requested gallery image
    var id = '#' + $(this).attr('data-imge');

    // Show the requested gallery image
    $(id).show();
}): 
```

您甚至可以将单击功能绑定到每个图库图像，以便用户可以通过单击图像本身来隐藏它们，即。

```
// Hide gallery image when clicked
$('.gallery-image').click(function(){
    $(this).hide();
}); 
```

# c# - 防止高效消费者生产者模型中的竞争条件

> ID：15145037
> 
> 赞同：1
> 
> 时间：2013-02-28T20:27:49.800
> 
> 标签：c#, multithreading, race-condition

我想要实现的是拥有一个消费者生产者方法。可以有许多生产者，但只有一个消费者。由于可扩展性，不可能有专门的消费者，所以想法是让生产者在有数据要消费并且当前没有活动消费者的情况下启动消费过程。

```
 1\. Many threads can be producing messages. (Asynchronous)
 2\. Only one thread can be consuming messages. (Synchronous)
 3\. We should only have a consumer in process if there is data to be consumed 
 4\. A continuous consumer that waits for data would not be efficient if we add many of these classes. 
```

在我的示例中，我有一组发送数据的方法。多个线程可以写入数据`Write()`，但只有其中一个线程会循环并发送数据`SendNewData()`。之所以只有一个循环可以写入数据，是因为数据的顺序必须是同步的，而且在`AsyncWrite()`我们无法控制的情况下，我们只能通过一次运行一个来保证顺序`AyncWrite()`。

我遇到的问题是，如果一个线程被调用来`Write()`生产，它会将数据排队并检查`Interlocked.CompareExchance`是否有消费者。如果它看到另一个线程在循环中已经在消费，它会假设这个消费者将发送数据。如果该循环线程消费者位于“Race Point A”，这是一个问题，因为该消费者已经检查了没有更多消息要发送并且即将关闭消费进程。

有没有办法在不锁定大部分代码的情况下防止这种竞争条件。真实场景有很多队列，比这复杂一点。

在真正的代码`List<INetworkSerializable>`中实际上是一个 byte[] BufferPool。我使用 List 作为示例，以使该块更易于阅读。

由于有 1000 多个此类同时处于活动状态，我无法承受 SendNewData 使用专用线程连续循环。只有在有数据要发送时，循环线程才应该处于活动状态。

```
public void Write(INetworkSerializable messageToSend)
{
   Queue.Enqueue(messageToSend);

   // Check if there are any current consumers. If not then we should instigate the consuming.
   if (Interlocked.CompareExchange(ref RunningWrites, 1, 0) == 0)
   { //We are now the thread that consumes and sends data
     SendNewData();
   }
}

//Only one thread should be looping here to keep consuming and sending data synchronously.
private void SendNewData()
{
    INetworkSerializable dataToSend;
    List<INetworkSerializable> dataToSendList = new List<INetworkSerializable>();

    while (true)
    {
        if (!Queue.TryDequeue(out dataToSend))
        {
           //Race Point A
           if (dataToSendList.IsEmpty)
           {
              //All data is sent, return so that another thread can take responsibility.
              Interlocked.Decrement(ref RunningWrites);
              return;
           }

           //We have data in the list to send but nothing more to consume so lets send the data that we do have.             
           break;
        }

        dataToSendList.Add(dataToSend);
    }

    //Async callback is WriteAsyncCallback()
    WriteAsync(dataToSendList);
}

//Callback after WriteAsync() has sent the data.
private void WriteAsyncCallback()
{
    //Data was written to sockets, now lets loop back for more data
    SendNewData();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:38:59.743

听起来你会更好地使用[BlockingCollection](http://msdn.microsoft.com/en-us/library/dd267312.aspx)轻松实现的生产者-消费者模式：

```
var toSend = new BlockingCollection<something>();

// producers
toSend.Add(something);

// when all producers are done
toSend.CompleteAdding();

// consumer -- this won't end until CompleteAdding is called
foreach(var item in toSend.GetConsumingEnumerable())
   Send(item); 
```

为了解决知道何时调用 CompleteAdding 的评论，我将启动 1000 个生产者作为任务，等待所有这些任务完成 (Task.WaitAll)，然后调用 CompleteAdding。如果需要，有一些很好的重载可以让你更好地控制 CancellationTokens。

此外，TPL 在调度阻塞线程方面非常好。

更完整的代码：

```
var toSend = new BlockingCollection<int>();            
Parallel.Invoke(() => Produce(toSend), () => Consume(toSend));

...

private static void Consume(BlockingCollection<int> toSend)
{
    foreach (var value in toSend.GetConsumingEnumerable())
    {
        Console.WriteLine("Sending {0}", value);
    }
}

private static void Produce(BlockingCollection<int> toSend)
{
    Action<int> generateToSend = toSend.Add;

    var producers = Enumerable.Range(0, 1000)
                              .Select(n => new Task(value => generateToSend((int) value), n))
                              .ToArray();

    foreach(var p in producers)
    {
        p.Start();
    }

    Task.WaitAll(producers);
    toSend.CompleteAdding();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T10:59:21.777

检查此变体。代码中有一些描述性的注释。另请注意，`WriteAsyncCallback`现在不再调用`SendNewData`方法

```
private int _pendingMessages;

    private int _consuming;

    public void Write(INetworkSerializable messageToSend)
    {
        Interlocked.Increment(ref _pendingMessages);
        Queue.Enqueue(messageToSend);

        // Check if there is anyone consuming messages
        // if not, we will have to become a consumer and process our own message, 
        // and any other further messages until we have cleaned the queue
        if (Interlocked.CompareExchange(ref _consuming, 1, 0) == 0)
        {
            // We are now the thread that consumes and sends data
            SendNewData();
        }
    }

    // Only one thread should be looping here to keep consuming and sending data synchronously.
    private void SendNewData()
    {
        INetworkSerializable dataToSend;
        var dataToSendList = new List<INetworkSerializable>();
        int messagesLeft;

        do
        {
            if (!Queue.TryDequeue(out dataToSend))
            {
                // there is one possibility that we get here while _pendingMessages != 0:
                // some other thread had just increased _pendingMessages from 0 to 1, but haven't put a message to queue.
                if (dataToSendList.Count == 0)
                {
                    if (_pendingMessages == 0)
                    {
                        _consuming = 0;
                        // and if we have no data this mean that we are safe to exit from current thread.
                        return;
                    }
                }
                else
                {
                    // We have data in the list to send but nothing more to consume so lets send the data that we do have.             
                    break;
                }
            }

            dataToSendList.Add(dataToSend);
            messagesLeft = Interlocked.Decrement(ref _pendingMessages);
        }
        while (messagesLeft > 0);

        // Async callback is WriteAsyncCallback()
        WriteAsync(dataToSendList);
    }

    private void WriteAsync(List<INetworkSerializable> dataToSendList)
    {
        // some code
    }

    // Callback after WriteAsync() has sent the data.
    private void WriteAsyncCallback()
    {
        // ...
        SendNewData();
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T19:08:32.267

在我们声明我们不再是消费者之后，可以通过添加以下内容并仔细检查队列来防止竞争条件。

```
if (dataToSend.IsEmpty)
{
     //Declare that we are no longer the consumer.
     Interlocked.Decrement(ref RunningWrites);

     //Double check the queue to prevent race condition A
     if (Queue.IsEmpty)
         return;
     else
     {   //Race condition A occurred. There is data again.

         //Let's try to become a consumer.
         if (Interlocked.CompareExchange(ref RunningWrites, 1, 0) == 0)
               continue;

         //Another thread has nominated itself as the consumer. Our job is done.
         return;
     }                                    
}

break; 
```

# saml - 的角色 在 Saml 2.0 中的服务提供者元数据文件中

> ID：15145038
> 
> 赞同：0
> 
> 时间：2013-02-28T20:27:49.823
> 
> 标签：saml, x509, saml-2.0, opensaml

我已经处理了许多与 SAML 相关的问题，并假设我对 SAML 2.0 的工作原理有相当了解。我无法理解的一件事是服务提供者元数据中的角色。

规范说 saml 身份验证请求 (samlp:AuthnRequest) 将采用 base64 编码。我没有看到任何规范提到签署身份验证请求然后对其进行编码？

有人可以解释一下服务提供商元数据文件中角色的作用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T06:26:10.190

您可以对 authnrequest 进行签名，也可以指定要用于签名或加密的 x509 数据。

# windows-phone-8 - Rx 2.1：如何正确订阅和观察 Dispatcher

> ID：15145040
> 
> 赞同：4
> 
> 时间：2013-02-28T20:27:54.287
> 
> 标签：windows-phone-8, system.reactive, observable

首先，我使用的是最新的 Rx，即 2.1。据我了解，当 Rx 2 岁时，很多事情都发生了变化，所以我真的很期待收到最新的答案。提前致谢。

我正在为 Rx 实现一个经典任务：观察 TextBox 的文本（确切地说是来自 WPToolkit 的 AutoCompleteBox），以便向用户提供建议列表。建议是从网络上获取的，我想使用这些普通的 Rx 好东西，比如 Throttle、DistinctUntilChanged 等。

我还在使用最近发布的适用于 Windows Phone 8 的便携式 HttpClient，因为它提供了基于任务的异步 API，这很好。

我遇到的问题是*读取*`Text`“AutoCompleteBox”值时的跨线程访问。这是代码：

```
var http = new HttpClient();
var searchFunc = Observable.FromAsync<HttpResponseMessage>(() => 
            http.GetAsync(FormatUrl(SEARCH_URL, "DE", new GeoCoordinate(51, 13), searchBox.Text /* <-- causes exception */, 10, "")));

var uithread = new SynchronizationContextScheduler(SynchronizationContext.Current);
var textChange = Observable.FromEventPattern<RoutedEventArgs>(searchBox, "TextChanged")                             
        .Throttle(TimeSpan.FromMilliseconds(800))
        .DistinctUntilChanged()     
        .SubscribeOn(uithread)           
        .SelectMany(searchFunc)                
        .Select(async (resp) => SearchResultsParser.ParseSearchResults(await resp.Content.ReadAsStreamAsync(), new GeoCoordinate(51, 13)))
        .Select(async (results) => searchBox.ItemsSource = await results)
        .ObserveOn(uithread)
        .Subscribe(); 
```

执行时发生异常`searchFunc`。尽管我使用了 SubscribeOn，但我从 VS 中看到它在工作线程上执行。

这是使用的示例`SynchronizationContextScheduler`，但我也尝试过`SubscribeOnDispatcher`，结果相同。看起来我错过了一些重要的`ObserveOn`东西，或者可能是关于`Observable.FromAsync`. 你能指出我的错误吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-01T19:44:18.213

`SubscribeOn`几乎从来都不*是*你想要的——你可能认为它的意思是“我的`Subscribe`方法运行的地方”，但它实际上意味着“到`IDisposable`（和处置）的实际接线运行的地方”——`ObserveOn`相当于“这是我想要我的实际`Subscribe`代码的地方”执行”

参考：[Observable.SubscribeOn 和 Observable.ObserveOn](http://blogs.msdn.com/b/rxteam/archive/2009/11/21/observable-context-observable-subscribeon-and-observable-observeon.aspx)

# regex - Powershell 匹配正则表达式和替换

> ID：15145045
> 
> 赞同：0
> 
> 时间：2013-02-28T20:28:19.683
> 
> 标签：regex, powershell

我有一个大文件，我正在搜索它以查找和替换无效日期。我正在使用 REGEX 表达式来定位日期，然后确定它们是否有效。如果脚本发现无效日期，则需要将日期替换为当前日期。出于审计目的，我需要记录无效字符串和发现错误的行号。到目前为止（在 SO 的一些事先帮助下）我已经能够找到无效的日期，但我无法成功地更改它们。

这是我用来定位无效日期的代码。如何一次性定位和更改日期？

```
$matchInfos = @(Select-String -Pattern $regex -AllMatches -Path $file)
foreach ($minfo in $matchInfos)
{
    #"LineNumber $($minfo.LineNumber)"
    foreach ($match in @($minfo.Matches | Foreach {$_.Groups[0].value}))
    {
        if (([Boolean]($match -as [DateTime]) -eq $false ) -or ([DateTime]::parseexact($match,"MM-dd-yyyy",$null).Year -lt "1800")) {
            Write-host "Invalid date on line $($minfo.LineNumber) - $match"
            #Add-Content -Path $LOGFILE -Value "Invalid date on line $($minfo.LineNumber) - $match"

            # Replace the invalid date with a corrected one
            Write-Host "Replacing $match with $(Get-Date -Format "MM-dd-yyyy")"
            #Add-Content -Path $LOGFILE -Value "Replacing $match with $(Get-Date -Format "MM-dd-yyyy")"

        }
    }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:53:48.140

```
$lines = get-content $file
$len = $lines.count
$bad = @{}
for($i=0;$i-lt$len;$i++){
    if($lines[$i] -match ""){
        $bad_date = $lines[$i].substring(10) #Get the bad date
        $good_date = Get-Date -Format G
        $bad["$i"] += @($line[$i])
        $lines[$i] = $lines[$i].Replace($bad_date,$good_date)
    }
}
$lines > $NewFile
$bad > $bad_date_file 
```

这是我将如何解决这个问题的一些伪代码。不确定你的文件有多大。阅读和写作可能很慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:38:41.523

您必须用更改写出一个临时文件，并用临时文件替换该文件。这是我写的一篇文章，它将为你完成这部分：

[Windows IT Pro：使用 PowerShell 替换文件中的字符串](http://www.windowsitpro.com/article/scripting/Replacing-Strings-in-Files-Using-PowerShell-126454)

使用示例：

```
replace-filestring -pattern 'find' -replacement 'replace' -path myfile.txt -overwrite 
```

使用此命令，脚本将读取 myfile.txt，将 'find' 替换为 'replace'，将输出写入临时文件，然后将 myfile.txt 替换为临时文件。（如果没有**-Overwrite**参数，脚本只会输出 myfile.txt 的内容以及更改。）

账单

# python - 改变图片中的随机像素，python

> ID：15145046
> 
> 赞同：4
> 
> 时间：2013-02-28T20:28:33.453
> 
> 标签：python, image, random, pixels

我想编写一个函数，它将在这张照片的天空中创建一个随机数（在 m 和 n 之间，包括在内）的星星（[http://tinypic.com/r/34il9hu/6](http://tinypic.com/r/34il9hu/6)）。我希望星星应该由单个白色像素或 4 个相邻白色像素组成的正方形随机组成。我也不想在树枝、月亮或鸟上放置一个“星星”（1 个像素）尽管

我将如何在 python 中执行此操作？任何人都可以帮忙吗？谢谢！

到目前为止我有这个：

到目前为止，我已经开始并提出了这个问题，我不知道其中任何一个是否正确，或者即使我走在正确的轨道上：

```
def randomStars(small, large):
   import random
   file = pickAFile()
   pic = makePicture(myPic)
   #x = random.randrange(getWidth(pic))
   #y = random.randrange(getHeight(pic))
   for pixel in pic.getAllPixels():
      if random.random() < 0.25:
         pixel.red = random.randint(256)
         pixel.green = random.randint(256)
         pixel.blue = random.randint(256) 
   show(pic) 
```

我不知道我在做什么:(

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T22:25:35.853

这看起来像是一个尝试超像素的好例子，由[skimage](http://ivrg.epfl.ch/supplementary_material/RK_SLICSuperpixels/)[实现](http://scikit-image.org/)。您可能可以以更简单的方式解决您的问题。

```
import urllib
import random
import io
import matplotlib.pyplot as plt
import skimage.segmentation
import pandas

# Read the image
f = io.BytesIO(urllib.urlopen('http://oi46.tinypic.com/34il9hu.jpg').read())
img = plt.imread(f, format='jpg')

# Prefer to keep pixels together based on location
# But not too much, so we still get some branches.
superpixel = skimage.segmentation.slic(img, n_segments=200, ratio=20)
plt.imshow(superpixel%7, cmap='Set2') 
```

![超像素](../Images/4e961ed6c8f5698bb8c81138b09028b3.png)

现在我们有了超像素，我们可以通过对每个超像素进行分类来更容易地进行分类。你可以在这里使用一些花哨的分类，但是这个例子很简单，天空是蓝色的，让我们手动做。

```
# Create a data frame with the relative blueish of every super pixel

# Convert image to hsv 
hsv = matplotlib.colors.rgb_to_hsv(img.astype('float32')/255)
# Define blueish as the percentage of pixels in the blueish range of the hue space
df =pandas.DataFrame({'superpixel':superpixel.ravel(), 
    'blue':((hsv[:,:,0] > 0.4) & (hsv[:,:,0]<0.8)).astype('float32').ravel(), 
    'value':hsv[:,:,2].ravel()})    
grouped = df.groupby('superpixel').mean()    
# Lookup the superpixels with the least blue
blue = grouped.sort('blue', ascending=True).head(100)
# Lookup the darkest pixels
light = grouped.sort('value', ascending=True).head(50)

# If superpixels are too dark or too blue, get rid of them
mask = (np.in1d(superpixel, light.index ).reshape(superpixel.shape) | 
    np.in1d(superpixel, blue.index ).reshape(superpixel.shape))

# Now we can put the stars on the blueish, not too darkish areas
def randomstar(img, mask):
    """random located star"""
    x,y = random.randint(1,img.shape[0]-1), random.randint(1,img.shape[1]-1)
    if not mask[x-1:x+1, y-1:y+1].any():
        # color not so random
        img[x,y,:] = 255
        img[x-1,y,:] = 255
        img[x+1,y,:] = 255
        img[x,y-1,:] = 255
        img[x,y+1,:] = 255

for i in range(100):
    randomstar(img, mask)
plt.imshow(img) 
```

![天空中的星星](../Images/4cdeeea8480bc4f56dd552764f32fd20.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T20:34:21.963

Python 的标准库没有附带任何功能强大的图像处理代码，但有一些易于安装和使用的替代方案。我将展示如何使用[PIL](http://www.pythonware.com/products/pil/)做到这一点。

```
from PIL import Image

def randomStars(small, large):
    import random
    filename = pickAFile()
    pic = Image.open(filename)
    max_x, max_y = pic.size
    pixels = im.load()
    x = random.randrange(max_x)
    y = random.randrange(max_y)
    for i in range(max_x):
        for j in range(max_y):
            if random.random() < 0.25:
                red = random.randint(256)
                green = random.randint(256)
                blue = random.randint(256) 
                pixels[i, j] = (red, green, blue, 1)
    im.show() 
```

该`show`函数不会在您的应用程序中显示图像（为此，您需要某种带有事件循环的 GUI，例如`tkinter`or `PySide`）；它将文件保存到临时目录并运行特定于平台的程序（如 Preview 或 xv）来显示它。

我假设您还想保存文件。这也很容易：

```
 name, ext = os.path.splitext(filename)
    outfilename = '{}-with-stars.{}'.format(name, ext)
    im.save(outfilename) 
```

这会将其保存回具有默认 JPEG 设置的 .jpg，依赖于 PIL 从文件名中猜测您想要的内容。（这意味着，是的，您可以使用 . 将其保存为 PNG `'{}-with-stars.png'.format(name)`。）如果您想要更多控制，PIL 也可以这样做，指定明确的格式和特定​​于格式的选项。

* * *

到目前为止，这只是如何将您现有的代码变成可以工作的东西，您可以使用它并开始调试；它实际上并没有回答原来的问题。

> 我想编写一个函数，它将在这张照片的天空中创建一个随机数（在 m 和 n 之间，包括在内）的星星

所以首先，你需要这个作为你的循环，而不是所有像素的循环：

```
for _ in random.randint(m, n): 
```

现在：

> 我希望星星应该由单个白色像素或由 4 个相邻白色像素组成的正方形随机组成。

```
 x, y = random.randrange(max_x), random.randrange(max_y)
    if random.random() < .5:
        # draw white pixel at [x, y]
        pixels[x, y] = (1, 1, 1, 1)
    else:
        # draw square at [x, y], making sure to handle edges 
```

> 我也不想在树枝、月亮或鸟上放置一个“星星”（1 像素）

您需要定义如何知道树枝、月亮或鸟的一部分。你能用像素颜色来定义吗？

乍一看，您似乎可以做到。月亮的像素比其他任何东西都更亮、更饱和、更偏红等（除了角落的AP标志，它更亮）。鸟和树枝比其他任何东西都更黑。事实上，它们是如此不同，以至于您甚至不必担心进行正确的色彩空间数学；它可能像这样简单：

```
r, g, b, a = pixels[x, y]
fake_brightness = r+g+b+a
if fake_brightness < 0.2:
    # Tree or bird, pick a new random position
elif 1.2 < fake_brightness < 2.8:
    # Moon, pick a new random position
else:
    # Sky or API logo, scribble away 
```

（这些数字显然只是凭空捏造的，但经过一些试验和错误，应该可以为您提供可用的值。）

当然，如果您将此作为学习练习，您可能想学习正确的色彩空间数学，甚至可能编写一个边缘检测算法，而不是依赖于该图像如此简单可解析。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T20:37:04.413

尝试以下方法：

```
for n in xrange(number_of_stars):
    # Find a good position
    while True:
        x, y = random_coords_in_image()
        if is_sky(image, x, y):
            break

    # paint a star there
    c = star_colour()

    if large_star():
        image.put(x, y, c)
        image.put(x, y+1, c)
        image.put(x+1, y+1, c)
        image.put(x+1, y, c)
    else:
        image.put(x, y, c) 
```

我使用的功能非常不言自明；您可以实现`is_sky`在给定位置估计图像颜色的一些条件。

# jquery - 我的 jQuery 似乎不适用于 Wijmo Grid

> ID：15145048
> 
> 赞同：1
> 
> 时间：2013-02-28T20:28:50.273
> 
> 标签：jquery, wijmo

我构建了一个充满单元格的智能数据网格，这些单元格将识别（模糊）它们是否被更改，以及值是上升还是下降。

这是它的样子。当用户悬停已更改的框并告诉他们页面首次加载时的值是什么时，会出现灰色工具提示。

* * *

![在此处输入图像描述](../Images/4a114c883f4cd97b56ab42a561aec68f.png)

* * *

我想将其转换为 Wijmo Grid，但保留相同的上/下脚本以显示值何时以及如何更改。但是，当我将表格初始化为 Wijmo 网格时，我的脚本突然停止**在所有浏览器**中工作。

**问题：**为什么会发生这种情况，是否有简单的解决方法？您不能使用传统的 jQuery 和 Javascript 访问 Wijmo 单元吗？

**部分 HTML 代码（[此处没有 Widjmo 的完整代码和工作示例](http://jsfiddle.net/Fgdec/12/)）：**

```
<table id="data-grid">
    <thead>
        <tr>
            <th>March</th>
            <th>April</th>
            <th>May</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td><input type="text" value="12000" /></td>
            <td><input type="text" value="1000" /></td>
            <td><input type="text" value="100000" /></td>
        </tr> 
```

**这是我当前的 jQuery 代码（[此处没有 Widjmo 的完整代码和工作示例](http://jsfiddle.net/Fgdec/12/)）：**

```
$(function() {
    // Initializes data grid as a Widjmo Grid (currently commented out)
    //$("#data-grid").wijgrid();

    // Array to store the initial values in grid
    var initialValues = [];

    // Assigns an index ID to each cell in the grid
    $('input').each(function(index) {
        initialValues[index] = $(this).val();
        $(this).data('id', index);
    });

    // Checks cell(s) for changes on blur (lose focus)
    $("input").blur(function() {
        var $t = parseInt($(this).val(), 10);
        var $s = parseInt(initialValues[$(this).data('id')], 10);

        // Value has changed
        if($t != $s) {
            var sign = "";
            if($t-$s > 0) {
                sign="+";
            }
            $(this).parent().children(".tooltip").remove();
            $(this).parent().append("<div class='tooltip'>Initial " + $s + "<br/>Change " + sign + ($t-$s) + "</div>");
        }

        // Value is no different from intial value
        if($t == $s) {
            $(this).removeClass("up down");
            $(this).parent().children(".tooltip").remove();
            $(this).parent().children(".up-indicator, .down-indicator").remove();
        }

        // Value is greater than initial
        else if($t > $s) {
            $(this).removeClass("up down");
            $(this).parent().children(".up-indicator, .down-indicator").remove();
            $(this).addClass("up");
            $(this).parent().append("<div class='up-indicator'></div>");
        }

        // Value is less than initial
        else if($t < $s) {
            $(this).removeClass("up down");
            $(this).parent().children(".up-indicator, .down-indicator").remove();
            $(this).addClass("down");
            $(this).parent().append("<div class='down-indicator'></div>");
        }

        // Conpute the net change
        netChange(initialValues);
    });

    // Displays tooltip of changed items
    $("input").hover(function() {
        $(this).parent().children(".tooltip").toggle();
    });

    // Computes the net change in the data grid
    function netChange(initialValues) {
        var runningTotal = 0;
        $('input').each(function() {
           runningTotal += parseInt($(this).val(), 10);
        });

        var intialTotal = 0;
        for (var i = 0; i < initialValues.length; i++) {
            intialTotal += parseInt(initialValues[i], 10);
        }

        var changes = $(".up, .down").length;

        $("#items").text(changes + " Items");
        $("#net").text("Net: " + (runningTotal - intialTotal));
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:06:21.247

Wijmo 插件代码`$.browser.msie`在他们的代码中使用，该代码在 jQuery 1.3 中**已弃用**，并在 jQuery 1.9 中完全删除。请参阅 jQuery 文档：[http](http://api.jquery.com/jQuery.browser/) ://api.jquery.com/jQuery.browser/以下是**粗体**评论为什么它被删除。

> 我们建议不要使用此属性；请尝试改用特征检测（参见 jQuery.support）。jQuery.browser 可能会在 jQuery 的未来版本中移动到插件中。

* * *

`jQuery 1.8`在我选择早期版本的小提琴后，您的工具提示代码工作一次。

**固定小提琴：http:** [//jsfiddle.net/Fgdec/13/](http://jsfiddle.net/Fgdec/13/)

* * *

在您的小提琴中，您选择了没有 的 jQuery 1.9 `$.browser.msie`，因此它在 chrome 控制台中抛出了以下错误。

```
Uncaught TypeError: Cannot read property 'msie' of undefined jquery.wijmo-open.all.2.3.8.min.js:31
(anonymous function) jquery.wijmo-open.all.2.3.8.min.js:31
(anonymous function) jquery.wijmo-open.all.2.3.8.min.js:61
Uncaught TypeError: Cannot read property 'msie' of undefined jquery.wijmo-complete.all.2.3.8.min.js:34
(anonymous function) jquery.wijmo-complete.all.2.3.8.min.js:34
(anonymous function) jquery.wijmo-complete.all.2.3.8.min.js:34 
```

# php - 默认启用 PHP 5.4 扩展

> ID：15145050
> 
> 赞同：4
> 
> 时间：2013-02-28T20:29:02.273
> 
> 标签：php, compilation, installation

我正在尝试查找 PHP 5.4 中默认启用的扩展列表。我找到了[配置选项](http://www.php.net/manual/en/configure.about.php)列表。

但是，除了安装 PHP 5.4 之外，我想知道默认情况下启用了什么。

```
./configure
make
make install
php -i 
```

这应该记录在某处……有人知道在哪里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:45:05.750

看看下面的网站：

[编译选项配置-php-5-4-5](http://www.synet.sk/php/en/192-compile-options-configuration-php-5-4-5)

选项的默认值在括号中指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:36:51.300

我不知道有没有办法进行这种预构建。这是 5.4.12，没有在 OS X 上配置的任何选项：

```
php-5.4.12 matthew$ sapi/cli/php -m

[PHP Modules]
Core
ctype
date
dom
ereg
fileinfo
filter
hash
iconv
json
libxml
pcre
PDO
pdo_sqlite
Phar
posix
Reflection
session
SimpleXML
SPL
sqlite3
standard
tokenizer
xml
xmlreader
xmlwriter 
```

请注意，您不必`make install`. 简单地：

```
./configure
make
sapi/cli/php -m 
```

# java - 在android中检查两个字符串是否相同时出错

> ID：15145054
> 
> 赞同：0
> 
> 时间：2013-02-28T20:29:20.007
> 
> 标签：java, android

我正在尝试检查两个字符串是否相同，第一个字符串是我从 Pastebin RAW 获得的，第二个字符串是我保存在项目的资产文件夹中的。文本完全相同，但是当我尝试检查它们是否相同时

```
if(total.toString().equals(result)){
   display.setText(
      "The two files are the same \n Log.txt: " + total.toString() +
      "\n Pastebin: " + result);
} else if(total.toString()!=result) {
   display.setText(
      "The two files arent the same \n Log.txt: " + total.toString() +
      "\n Pastebin: " + result); 
```

它直接转到我的 else if 并显示，我尝试删除文件并制作新的 Pastebins。

我使用的完整代码是这个

```
 InputStream is = getAssets().open("Log.txt");
   BufferedReader r = new BufferedReader(new InputStreamReader(is));
   StringBuilder total = new StringBuilder();
   String line;
   while ((line = r.readLine()) != null) {
      total.append(line);
   }
   // Loads the text from the pastebin into the string result
   HttpClient httpClient = new DefaultHttpClient();
   HttpContext localContext = new BasicHttpContext();
   HttpGet httpGet = new HttpGet("Pastebin url");
   HttpResponse response = httpClient.execute(httpGet, localContext);
   String result = "";
   BufferedReader reader =
      new BufferedReader(
         new InputStreamReader(
            response.getEntity().getContent()));
   String line1 = null;
   while ((line1 = reader.readLine()) != null){
      result += line1 + "\n";
   }
   // Checks if the pastebin and Log.txt contains the same information
   if( total.toString().equals(result)){
      display.setText(
         "The two files are the same \n Log.txt: " + total.toString() +
         "\n Pastebin: " + result);
   } else if(total.toString()!=result) {
      display.setText(
         "The two files arent the same \n Log.txt: " + total.toString() +
         "\n Pastebin: " + result); 
   } 
```

那么任何人都可以告诉我我在这里做错了什么，因为它说它不一样吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:34:43.300

问题出在以下几行：

```
while ((line = r.readLine()) != null) {
    total.append(line);
} 
```

你忘记了换行符`\n`：

```
while ((line = r.readLine()) != null) {
    total.append(line + "\n");
} 
```

正如你所做的那样`result`：

```
while ((line1 = reader.readLine()) != null){
    result += line1 + "\n";
} 
```

* * *

另外，请注意

```
else if(total.toString()!=result) 
```

应该只是

```
else 
```

# sql - PostgreSQL 使用前一行的值（如果缺失）

> ID：15145056
> 
> 赞同：4
> 
> 时间：2013-02-28T20:29:23.720
> 
> 标签：sql, postgresql, group-by, subquery, postgresql-9.1

我有以下查询：

```
WITH t as (
  SELECT date_trunc('hour', time_series) as trunc 
  FROM generate_series('2013-02-27 22:00'::timestamp, '2013-02-28 2:00', 
                       '1 hour') as time_series
  GROUP BY trunc
  ORDER BY trunc
)
SELECT DISTINCT ON(trunc) trunc, id
FROM t
LEFT JOIN (
   SELECT id, created, date_trunc('hour', created) as trunc_u
   FROM event
   ORDER BY created DESC
) u
ON trunc = trunc_u 
```

产生以下结果：

```
"2013-02-27 22:00:00";
"2013-02-27 23:00:00";2
"2013-02-28 00:00:00";5
"2013-02-28 01:00:00";
"2013-02-28 02:00:00"; 
```

表`event`有`id`,`created`和其他一些列，但这里只有那些是相关的。上面的查询为我提供了`id`每个给定时间段生成的最后一个事件`trunc`（感谢每个时间段`DISTINCT ON`我得到了一个很好的聚合）。

`NULL`现在，如果在给定的时间段内没有发生任何事件，则此查询会产生。我希望它返回以前的可用`id`，即使它来自不同的时间段。IE：

```
"2013-02-27 22:00:00";0
"2013-02-27 23:00:00";2
"2013-02-28 00:00:00";5
"2013-02-28 01:00:00";5
"2013-02-28 02:00:00";5 
```

我确信我错过了一些简单的方法来实现这一点。有什么建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T20:45:26.423

您可以混合使用自联接和[Windows 功能](http://www.postgresql.org/docs/9.1/static/tutorial-window.html)

简化我使用此示例值获取此表：

```
create table t ( a int, b int);    
insert into t values 
( 1, 1),
( 2, Null),
( 3, Null),
( 4, 2 ),
( 5, Null),
( 6, Null); 
```

在您的查询`a`中是`trunc_u`并且`b`是您的`id`. 查询是：

```
with cte as (    
    select 
      t1.a, 
      coalesce( t1.b, t2.b, 0) as b,
      rank() OVER 
       (PARTITION BY t1.a ORDER BY t2.a DESC) as pos
    from t t1 
    left outer join t t2
      on t2.b is not null and
         t2.a < t1.a    
)
select a, b
from cte
where pos = 1; 
```

[结果](http://sqlfiddle.com/#!1/c5595/5/0)：_

```
| A | B |
---------
| 1 | 1 |
| 2 | 1 |
| 3 | 1 |
| 4 | 2 |
| 5 | 2 |
| 6 | 2 | 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T20:45:30.590

尝试：

```
WITH t as (
  SELECT time_series as trunc 
    FROM generate_series('2013-02-27 22:00'::timestamp, '2013-02-28 2:00', 
                         '1 hour') as time_series
)
SELECT DISTINCT ON(t.trunc) t.trunc, e.id
  FROM t
  JOIN event e
    ON e.created < t.trunc 
 ORDER BY t.trunc, e.created DESC 
```

如果它太慢 - 告诉我。我会给你一个更快的查询。

# java - Java，对象网格

> ID：15145061
> 
> 赞同：1
> 
> 时间：2013-02-28T20:29:46.513
> 
> 标签：java, swing, jpanel, paintcomponent, preferredsize

我需要帮助将网格绘制到 GUI 以及稍后让我更改绘制框的颜色的程序。我知道我将不得不使用paintComponent(Graphics g)，但我不知道如何或在哪里。

所以这里是我到目前为止得到的代码的副本（尽管有人告诉我，仅仅获得代码可能会非常令人生畏，但我认为这是人们提供帮助的最佳方式，而不仅仅是为我做这件事）。从顶部开始，它设置值，创建 GUI，调用 GUI，用盒子填充二维数组（我认为）。然后在 Boxes 类中设置 box 类需要的值，然后开始如何绘制它们（不知道如何解决），然后是一些用于 x 和 y 坐标的 seta 方法。

我希望你做的是展示如何将框绘制到 Jpanel，制作一个网格，然后向我展示如何根据外部值将颜色更改为不同的蓝色阴影。

```
import java.awt.*;
import java.awt.Graphics;
import java.util.*;
import javax.swing.*;

public class NewGrid {

   Boxes[][] Boxs;
   int BoxesX;
   int BoxesY;

   NewGrid() {
      buildtheGUI();

   }
    JFrame frame = new JFrame();
    JPanel panel = new JPanel();

    public void buildtheGUI() {
        frame.setSize(500, 500);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(panel);
        frame.setVisible(true);
    }

    public static void main(String[] args) {
         new NewGrid();
    }

    public void addboxes() {
        Boxs = new Boxes[panel.getWidth() / 10][panel.getHeight() / 10];
        for (int i = 0; i < panel.getWidth() / 10; i++) {
           for (int j = 0; j < panel.getHeight() / 10; j++) {
               Boxs[i][j] = new Boxes();
               Boxs[i][j].setx(i * (panel.getWidth() / 10));
               Boxs[i][j].sety(j * (panel.getHeight() / 10));
               Boxs[i][j].draw(null);
           }

       }
   }
}

public class Boxes extends JPanel {
int x;
int y;
int width = 10;
int hieight = 10;
Color colour = Color.BLACK;

 public void draw(Graphics g) {
    g.setColor(colour);
    g.fillRect(x, y, width, hieight);
}
 public void setx(int i ){
     x = i;
 }
 public void sety(int i ){
     y = i;
 }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:52:57.650

*   我不能发表评论，试图让事情变得更容易，

*   我在那里编码[box.putClientProperty(unique_identifier, value_for_identifier)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JComponent.html#putClientProperty%28java.lang.Object,%20java.lang.Object%29)，您可以根据需要使用多个此方法

*   从每个 Swing 侦听器中，您可以获得在 putClientProperty 中定义的这个和适当的协调

.

```
JComponent comp = event.getComponent();
String strRow = (String) comp.getClientProperty("row");
String strColumn = (String) comp.getClientProperty("column"); 
```

简单的代码

```
import java.awt.*;
import java.awt.Graphics;
import java.util.*;
import javax.swing.*;

public class NewGrid {

    private int row = 10;
    private int column = 10;
    private JFrame frame = new JFrame();
    private JPanel panel = new JPanel();

    private NewGrid() {
        addboxes();
        panel.setLayout(new GridLayout(row, column));
        frame.add(panel);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.pack();
        frame.setVisible(true);
    }

    private void addboxes() {
        for (int i = 0; i < row; i++) {
            for (int j = 0; j < column; j++) {
                Boxes box = new Boxes();
                box.putClientProperty("row", row);
                box.putClientProperty("column", column);
                panel.add(box);
            }
        }
    }

    public static void main(String[] args) {
        Runnable doRun = new Runnable() {
            @Override
            public void run() {
                new NewGrid();
            }
        };
        SwingUtilities.invokeLater(doRun);
    }
}

class Boxes extends JPanel {

    private static final long serialVersionUID = 1L;

    @Override
    public Dimension getMinimumSize() {
        return new Dimension(20, 20);
    }

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(20, 20);
    }

    @Override
    public Dimension getMaximumSize() {
        return new Dimension(20, 20);
    }

    @Override
    public void paintComponent(Graphics g) {
        int margin = 2;
        Dimension dim = getSize();
        super.paintComponent(g);
        g.setColor(Color.red);
        g.fillRect(margin, margin, dim.width - margin * 2, 
           dim.height - margin * 2);
    }
} 
```

# ruby-on-rails - Omniauth 重定向

> ID：15145065
> 
> 赞同：2
> 
> 时间：2013-02-28T20:29:54.457
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rubygems, omniauth

因此，我的 Omniauth 和 Twitter 验证功能大约 95%，换句话说，它几乎功能齐全。当单击 | 使用 Twitter 登录 | 我的应用程序上的按钮，它会将我重定向到 Twitter，然后提示我输入我的 Twitter 凭据，然后重新定向回应用程序。

但是，我没有在 Twitter 身份验证过程之后登录，而是在登录页面上收到以下错误：

```
1 error prohibited this user from being saved:

    Email can't be blank 
```

在 /posts 页面的情况下，如何让 Omniauth 将我重定向到登录页面？当 Omniauth 应该通过 Twitter 验证授权我时，为什么会产生这样的错误？

### 用户型号：

```
class User < ActiveRecord::Base
  has_many :authentications

  # Include default devise modules. Others available are:
  # :token_authenticatable, :lockable, :timeoutable and :activatable
  devise :database_authenticatable, :registerable, 
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation
  # attr_accessible :title, :body

  def apply_omniauth(omniauth)
    self.email = omniauth['info']['email'] if email.blank?
    authentications.build(:provider => omniauth['provider'], :uid => omniauth['uid'])

  end

  def password_required?
    (authentications.empty? || !password.blank?) && super
  end

end 
```

### 身份验证控制器：

```
class AuthenticationsController < ApplicationController
  def create
    omniauth = request.env["omniauth.auth"]
    authentication = Authentication.find_by_provider_and_uid(omniauth['provider'], omniauth['uid'])
    if authentication
      flash[:notice] = "Signed in successfully."
      sign_in_and_redirect(:user, authentication.user)
    elsif current_user
      current_user.authentications.create!(:provider => omniauth['provider'], :uid => omniauth['uid'])
      flash[:notice] = "Authentication successful."
      redirect_to authentications_url
    else
      user = User.new
      user.apply_omniauth(omniauth)
      if user.save
        flash[:notice] = "Signed in successfully."
        sign_in_and_redirect(:user, user)
      else
        session[:omniauth] = omniauth.except('extra')
        redirect_to new_user_registration_url
      end
    end
  end
end 
```

### 注册控制器：

```
class RegistrationsController < Devise::RegistrationsController
  def create
    super
    session[:omniauth] = nil unless @user.new_record?
  end

  private

  def build_resource(*args)
    super
    if session[:omniauth]
      @user.apply_omniauth(session[:omniauth])
      @user.valid?
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:45:28.303

我才想起来，原因其实很简单，twitter 没有在omniauth 请求中返回email，所以它会将你重定向到新的用户注册页面，你必须填写你的email。

[https://github.com/intridea/omniauth/wiki/Auth-Hash-Schema](https://github.com/intridea/omniauth/wiki/Auth-Hash-Schema)

此外，这可能会有所帮助

[在设计 2.0 上跳过对 omniauth-twitter 的电子邮件验证](https://stackoverflow.com/questions/10226203/skip-email-validation-for-omniauth-twitter-on-devise-2-0)

# asp.net-web-api - Webapi没有序列化返回对象

> ID：15145067
> 
> 赞同：0
> 
> 时间：2013-02-28T20:30:09.383
> 
> 标签：asp.net-web-api

嗨，我在 web-api 中构建了一个测试应用程序，但我返回的对象没有被序列化

控制器

```
 using System;
            using System.Collections.Generic;
            using System.Linq;
            using System.Web;
            using System.Web.Mvc;
            using Thoughts.Models;
            using Newtonsoft.Json;
            namespace Thoughts.Controllers
            {
            public class TagsController : Controller
            {
                //
                // GET: /Tags/

                public ActionResult Index()
                {
                    return View();
                }

                public Message test(){
                    Message msg = new Message();
                    msg.Content = "jo";
                    return msg;
                }
            }
            } 
```

消息模型

```
 using System;
            using System.Collections.Generic;
            using System.Linq;
            using System.Web;

            namespace Thoughts.Models
            {
            [Serializable]
            public class Message //: NamedObject
            {
                string content;

                public string Content
                {
                    get { return content; }
                    set { content = value; }
                }
                /*public NamedObject User;
                public string timestamp;
                public List<NamedObject> tags;
                public Guid communityid;
                public List<Message> comments;
                public int commentCount;
                public string parent;*/
            }
            } 
```

路由器配置

```
 using System;
            using System.Collections.Generic;
            using System.Linq;
            using System.Web;
            using System.Web.Mvc;
            using System.Web.Routing;

            namespace HelloWebAPI
            {
                public class RouteConfig
                {
                    public static void RegisterRoutes(RouteCollection routes)
                    {
                        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");

                        routes.MapRoute(
                            name: "Default",
                            url: "{controller}/{action}/{id}",
                            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
                        );
                    }
                }
            } 
```

WebApiConfig

```
 using System;
        using System.Collections.Generic;
        using System.Linq;
        using System.Web.Http;

        namespace Thoughts
        {
            public static class WebApiConfig
            {
                public static void Register(HttpConfiguration config)
                {
                    config.Routes.MapHttpRoute(
                        name: "DefaultApi",
                        routeTemplate: "api/{controller}/{action}/{id}",
                        defaults: new { id = RouteParameter.Optional }
                    );
                }
            }
        } 
```

我的 /api 网址也不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T00:58:18.320

您需要从`ApiController`Web API 继承（Web API 控制器与 MVC 控制器是分开的）：

```
public class TagsController : ApiController {

        [System.Web.Http.HttpGet]
        public Message test(){
                Message msg = new Message();
                msg.Content = "jo";
                return msg;
        }

 } 
```

由于您的 HTTP 路由是`api/{controller}/{action}/{id}`

您现在可以调用它：`/api/tags/test`

最后，对于 Web API，您不需要`[Serializable]`属性。

# string - 批处理文件替换一行

> ID：15145069
> 
> 赞同：0
> 
> 时间：2013-02-28T20:30:18.490
> 
> 标签：string, batch-file, line

这里有很多用于替换子环或字符串的示例，但我需要将包含某些字符串的所有行替换为具有常量文本的另一行。例如我有一个文件：

```
aaa=111
bbb=222
ccc=333
aaa=444 
```

我需要将“aaa=”替换为“aaa=000”。输出文件应如下所示：

```
aaa=000
bbb=222
ccc=333
aaa=000 
```

所有这些都必须在没有 sed、awk 等派对工具的情况下完成

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:31:43.660

尝试使用`for`循环来解析文件的每一行。如果`"!line:~0,4!"=="aaa="`然后回显您想要的替换，否则回显未触及的行。这些回声应该被[重定向](http://www.robvanderwoude.com/redirection.php)到一个文本文件。然后当你完成后，将新合成的文本文件移到你一直循环的文件的顶部。

在保留空行的同时循环遍历文本文件的常用方法是`for /f "tokens=1* delims=:" %%I in ('findstr /n "^" "filename.txt"') do ( something with %%J )` 该`findstr`命令将输出文件中的每一行，包括空行，并在行的开头带有行号。 `%%J`变成每行的行号之后的任何内容。

这应该足以让你开始。祝你好运！

# .net - 防止 .net 2.0 上的 Xpath 注入

> ID：15145071
> 
> 赞同：1
> 
> 时间：2013-02-28T20:30:28.623
> 
> 标签：.net, xml, xpath, .net-2.0

我有以下代码来获取旧网站的一些翻译（在其他一些具有更重要信息的功能中也是如此。）

```
Dim myDoc As New XmlDocument
myDoc.Load(Server.MapPath("\GlobalContent\TranslationXML\TranslationXML.xml"))
Dim translationText As XmlNodeList = myDoc.SelectNodes("Transaltions/language[@code='" + hLang.Value + "']") 
```

Hlang 来自用户输入，如您所见，这很容易受到 Xpath 注入攻击。

我正在尝试应用与 SQL 注入相同的方法，即使用参数，但尚未找到如何在 2.0 中执行此操作

我试过这个教程：[http ://weblogs.asp.net/cazzu/archive/2003/10/07/30888.aspx](http://weblogs.asp.net/cazzu/archive/2003/10/07/30888.aspx)

但是*DynamicContext*只是库的一部分，我不能使用它。

**谁能指导我如何解决这个问题？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T00:47:15.010

**防止 XPath 注入的主要思想是预编译您要使用的 XPath 表达式并允许其中的变量（参数），在评估过程中这些变量将被用户输入的值替换**。

**在 .NET 中**：

1.  **[使用XPathExpression.Compile()](http://msdn.microsoft.com/en-us/library/ms163317.aspx)**预编译您的 XPath 表达式。

2.  使用**[XPathExpression.SetContext()](http://msdn.microsoft.com/en-us/library/0cs084hw.aspx)方法将****[XsltContext](http://msdn.microsoft.com/en-us/library/system.xml.xsl.xsltcontext.aspx)**对象指定为上下文，该对象将某些特定变量解析为用户输入的值。

**[您可以在此处](http://msdn.microsoft.com/en-us/library/dd567715.aspx)**阅读有关如何计算包含变量的 XPath 表达式的更多信息。

这篇文章包含了很好和完整的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T04:31:27.830

不幸的是，无论是 XmlDocument 还是 XPathDocument 都没有提供一种用替换编译 XPath 的好方法（类似于已编译的 SQL 查询）。因此，我推荐一种稍微详细但安全的方法 - 使用主 XPath 获取 XmlNodeList，并遍历每个节点并检查属性，直到找到一个或多个匹配项：

示例 C# 代码（我会编写 VB，但我很生疏）：

```
XmlNodeList nodes = myDoc.SelectNodes("Transaltions/language");
foreach (XmlNode node in nodes) {
   XmlElement elem = (XmlElement)node;
   if (elem.GetAttribute("code") == hLang.Value) {
      //elem is your match
   }
} 
```

# ajax - 服务器从 IE 上的客户端 Ext.Ajax.request 获得不相关的参数

> ID：15145075
> 
> 赞同：0
> 
> 时间：2013-02-28T20:30:40.813
> 
> 标签：ajax, internet-explorer, post, extjs, params

此问题发生在 IE 8 和 IE 9 上。在 Firefox 上运行良好。客户端代码是这样的：

```
Ext.Ajax.request({
                url: myUrl,
                method: 'POST',
                params:{
                    myParams:myParams
                }); 
```

客户端的参数总是好的，但是在服务器端获取参数时，它会得到一些不相关的东西。

如果我添加`disableCachingParam : myString`到`Ext.Ajax.request`，服务器端将其`myString`作为参数的一部分。这个问题只发生在 IE 上。

对这个问题有任何想法吗？

# sql - Oracle SQL 查询非规范化

> ID：15145078
> 
> 赞同：1
> 
> 时间：2013-02-28T20:30:52.440
> 
> 标签：sql, oracle, pivot, denormalization

我正在尝试为一个新表准备数据，该表与现有表中的数据相同，但已非规范化。我有一个简单的场景，但我的大脑正在以最有效的方式返回结果

它基于以下简化场景：

```
Table X   | Table y
id        | id    Identifier  Value
123       | 123   1           A
          | 123   2           B 
```

连同表 XI 中的其他字段，我的查询需要返回：

```
123 A B 
```

我考虑过：

解决方案一

```
select 
id,
(select Value...),
(select Value...)... 
```

解决方案二：

```
select id,
y1.Value,
y2.Value
from x, y y1, y y2... 
```

解决方案三：使用 PL/SQL 并遍历游标

解决方案四：将 y 提取到两个表 identifier1 和 identifier2 中（可能使用触发器）并在查询中加入这些表

由于某种原因，这些解决方案中的每一个都有一个主要缺点，我相信一个词可以让我想起一个解决这个问题的概念

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T20:46:02.990

除非我遗漏了什么，否则您正在尝试对数据进行*透视*。有几种方法可以做到这一点。

您可以使用聚合函数和`CASE`表达式：

```
select x.id,
  max(case when y.identifier = 1 then y.value end) Value1,
  max(case when y.identifier = 2 then y.value end) Value2
from tablex x
left join tabley y
  on x.id = y.id
group by x.id 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/276e0/2)

根据您的 Oracle 版本，您可以使用以下`PIVOT`功能：

```
select id,
  Value1,
  Value2
from
(
  select x.id, y.identifier, y.value
  from tablex x
  left join tabley y
    on x.id = y.id
) 
pivot
(
  max(value)
  for identifier in ('1' as Value1, '2' as Value2)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/276e0/3)

您可以多次加入：

```
select x.id,
  y1.value Value1,
  y2.value Value2
from tablex x
left join tabley y1
  on x.id = y1.id
  and y1.identifier = 1
left join tabley y2
  on x.id = y2.id
  and y2.identifier = 2 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!4/276e0/4)。

如果您正在寻找动态解决方案，那么您可以使用 sys_refcursor 创建一个过程：

```
CREATE OR REPLACE procedure dynamic_pivot(p_cursor in out sys_refcursor)
as
    sql_query varchar2(8000) := 'select x.id ';

    begin
        for x in (select distinct identifier from tabley order by 1)
        loop
            sql_query := sql_query ||
                ' , max(case when y.identifier = '||x.identifier||' then y.value else null end) as Value'||x.identifier;

                dbms_output.put_line(sql_query);
        end loop;

        sql_query := sql_query || ' from tablex x
                                    left join tabley y
                                      on x.id = y.id
                                    group by x.id';
        dbms_output.put_line(sql_query);

        open p_cursor for sql_query;
    end;
/ 
```

这些解决方案在每个值的单独列中为您提供结果。如果您想要单列中的数据，那么您可以使用`LISTAGG()`：

```
select x.id,
  listagg(y.value, ' ') within group (order by y.id) as Value
from tablex x
left join tabley y
  on x.id = y.id
group by x.id 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!4/276e0/1)

# html - 如何使用溢出制作 div：隐藏重叠浮动 div？

> ID：15145079
> 
> 赞同：1
> 
> 时间：2013-02-28T20:30:59.340
> 
> 标签：html, css, ckeditor

我正在使用第 3 方嵌入式 HTML 编辑器（CKEditor）的网站上工作。我将编辑器控件包装在一个相对定位的 DIV 中，并有一个 z-index 放置在可见堆栈的顶部。问题是在某些页面上，右侧有浮动（浮动：右）的图像。某些 CKEditor 样式将元素溢出属性设置为隐藏（溢出：隐藏）。

因此，尽管我包含的 DIV 具有比浮动图像更大的 z-index，但 CKEditor 元素并没有在图像顶部溢出。这将创建一个看起来好像编辑器的右上角已被剪切的结果。

有没有办法在不尝试编辑 CKEditor 样式的情况下解决这个问题？查看此示例 sinario：

[http://jsfiddle.net/nmartin867/StHJA/](http://jsfiddle.net/nmartin867/StHJA/)

HTML

```
<body>
<div class="floating">
    I'm floating!
</div>
<div class="container">
    <div class="inner">
        Why am I not overlapping?
    </div>
</div> 
```

CSS：

```
div{
    border: solid 1px red;
}
.container{
    height:300px;
    position: relative;
    overflow: visible;
    z-index: 1;
    background-color:black;
    color: blue;    
}

.inner{
    background-color:yellow;
    overflow:hidden;
    /*overflow:visible;*/ <--This would work
    text-align: right;

}

.floating{
    color:black;
    width:100px;
    height:100px;
    background-color:green;
    float:right;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:51:06.900

你可以这样做，但我不确定它是否适用于你的情况。

```
.inner{
    background-color:yellow;
    position: absolute;
    width:100%;
    text-align: right;
} 
```

或者，当您想要覆盖第三方样式但不希望在第三方应用程序中编辑它们时，您可以在自己的样式表中重新创建相同的 css 类，并通过使用重要的强制它覆盖第三方！例如：

```
float: none !important; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:46:33.970

您是否尝试过绝对定位？因为您浮动的 DIV 不在您想要重叠的同一容器中，所以它将位于主体本身的外部。此外，您没有为浮动 DIV 设置 z-index，因此它将被分层，因为它按顺序位于另一个容器之前。

```
div{
border: solid 1px red;
}
.container{
height:300px;
position: relative;
overflow: visible;
z-index: 1;
background-color:black;
color: blue;    
}

.inner{
background-color:yellow;
overflow:hidden;
/*overflow:hidden;*/
text-align: right;

}

.floating{
color:black;
width:100px;
height:100px;
background-color:green;
/*  float:right;*/
position:absolute;
top:0px;
right:0px;
z-index:2;
} 
```

我不确定这是否是您想要完成的效果，但这会将第一个容器放在顶部。

# delphi - 每个成功的 HTTP 请求是否总是返回状态码 200？

> ID：15145087
> 
> 赞同：11
> 
> 时间：2013-02-28T20:31:34.463
> 
> 标签：delphi, http, indy, http-status-codes

在 Delphi 中，我使用 Indy's`TIdHTTPWebBrokerBridge`加上`TIdHTTP`通过 HTTP 发送/接收数据。在服务器上，我没有任何花哨的处理，我总是只用一个简单的内容流来响应。如果有任何问题，我只会在响应内容中返回有关该问题的信息（例如身份验证失败、无效请求等）。那么，在客户端，我是否可以假设我向该服务器发出的每个成功请求都将始终具有 200（OK）的响应代码？

我想知道，因为在客户端，请求被包装在函数中，这些函数只返回一个布尔值来表示请求是否成功。

在这个函数里面：

```
IdHTTP.Get(SomeURL, AStream);
Result:= IdHTTP.ResponseCode = 200; 
```

这个函数处理所有可能获取数据的请求。如果请求中有任何问题，此函数应返回 False。在我的场景中，由于我总是在服务器上返回某种内容，客户端会在这个函数中总是收到 200 的响应代码吗？

我想真正的问题是，如果我总是返回某种内容并处理服务器上的所有异常，那么服务器是否总是向每个请求返回状态码 200？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-02-28T21:20:54.583

> *“每个成功的 HTTP 请求是否总是返回状态码 200？”*

见[`w3.org: HTTP/1.1 Status Code Definitions`](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)( `RFC 2616`)

答案是**否定**的。所有 2xx 都被认为是成功的。这可能取决于使用的[HTTP 方法](http://www.w3.org/Protocols/rfc2616/rfc2616-sec9.html)。

*您的*Web 服务器应用程序是否应该在成功时始终返回 200？这也可能取决于请求方法和它为客户端准备的信号。例如

对于**`PUT`**方法（重点是我的）：

> 如果修改了现有资源，**则应发送****200**（OK）或**204**（No Content）响应代码以指示请求成功完成。

 **对于**`POST`**方法：

> POST 方法执行的操作可能不会产生可由 URI 标识的资源。在这种情况下，**200**（正常）或**204** （无内容）是适当的响应状态，具体取决于响应是否包含描述结果的实体。
> 
> 如果在源服务器上创建了资源，则响应 **应该**是**201**（已创建）并包含描述请求状态并引用新资源的实体和 Location 标头（参见第 14.30 节）。对此方法的响应是不可缓存的，除非响应包含适当的 Cache-Control 或 Expires 标头字段。但是，**303**（请参阅其他）响应可用于指示用户代理检索可缓存资源。

正如您可以从 中了解到的`RCF`，每个方法都*应该*有自己的成功状态代码，具体取决于实现。

你的另一个问题：

> *“我可以假设我向该服务器发出的每个成功请求都将始终具有 200（OK）的响应代码吗？”*

**如果您的**Web 服务器*始终以状态 200 响应，则您**始终*可以期待状态代码200。您的 Web 服务器应用程序控制它返回给客户端的响应。

 ***也就是说，状态码 200 是成功 HTTP 请求的**标准**响应（实际响应将取决于所使用的请求方法），在 Web 服务器的现实世界中，除非另有说明，否则应该在成功请求时将其设置为*默认值*（如在[雷米的回答](https://stackoverflow.com/a/15146820/937125)中解释）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-02-28T22:21:15.583

要回答您的具体问题：

> 我可以假设我**向该服务器**发出的每个成功请求都将始终具有 200（OK）的响应代码吗？

答案是**Yes**，因为`TIdHTTPWebBrokerBridge`wraps`TIdHTTPServer`总是将每个请求的默认响应代码设置为 200 ，除非您自己用不同的值覆盖它，或者让您的服务器执行一些隐式回复不同响应代码的操作（例如`Redirect()`使用 302 ，或者`SmartServeFile()`使用 304），或者遇到导致`TIdHTTPServer`分配 4xx 或 5xx 错误响应代码的错误。

然而，总的来说，其他人告诉你的都是真的。在客户端，您应该处理任何可能的 HTTP 成功响应代码，而不仅仅是 200 本身。不要对服务器实现做任何假设。

事实上，`TIdHTTP`已经为您处理好了。如果`TIdHTTP`遇到它认为是错误代码的响应代码，它将`EIdHTTPProtocolException`在您的代码中引发异常。因此，如果您没有收到异常，则假设响应成功。您无需手动检查响应代码。

如果有一个特定的响应代码通常会引发异常但您不希望它发生，您可以在or的可选`AIgnoreReplies`参数中指定该值。或者，如果您使用的是最新的 Indy 10 SVN 修订版，则最近向属性添加了一个新标志，因此不会针对任何响应代码引发异常。`TIdHTTP.Get()``TIdHTTP.DoRequest()``hoNoProtocolErrorException``TIdHTTP.HTTPOptions``EIdHTTPProtocolException`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T20:42:51.567

成功的响应是 2xx [List_of_HTTP_status_codes](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-04T15:50:14.390

我做了以下。直接处理所有 200 和 LOG 异常。工作，没有一个非 200 - 除了未经授权和超时（密码或有时不可用的服务器）。但是对于广泛的主流应用程序，将考虑许多/所有响应。

```
 while (iRedo < 3) do begin
        s := Self.HTTPComponent.Get( sUrl );

        if self.HTTPComponent.ResponseCode = 200 then begin
          break;
        end;

        // IDEIA - log what happend if not 200
        logWhatHappend( s, HTTPComponent ); // then log content, headers, etc
        inc( iRedo ); sleep( 5 );
      end; 
```*****

# java - 泽西岛：重定向到泽西岛根之外

> ID：15145088
> 
> 赞同：6
> 
> 时间：2013-02-28T20:31:35.737
> 
> 标签：java, jersey, jax-rs

我一直在编写一个原型 Jersey (JAX-RS) 应用程序，并想尝试使用 redirect-after-POST 方法来处理 application/x-www-form-urlencoded 帖子。

我想在成功时重定向到托管在应用程序根目录中的 html 页面，但是我似乎无法逃脱*Jersey 的*servlet 根目录。

这是一个允许您创建新用户的资源示例：

我想要的 URI：/jersey-test/user.html

我得到的 URI：/jersey-test/ **r** /user.html

```
@POST
@Consumes({MediaType.APPLICATION_FORM_URLENCODED})
public Response putUser(@Context UriInfo uriInfo, 
    MultivaluedMap<String, String> formParams) {

    // snip... do work and insert user here...

    URI uri = uriInfo.getBaseUriBuilder().path("user.html").build();
    return Response.seeOther(uri).build();
} 
```

我的 web.xml 中的相关片段：

```
<web-app ...>
  <display-name>jersey-test</display-name>
  ...
  <servlet>
    <servlet-name>Jersey REST Service</servlet-name>
    <servlet-class>com.sun.jersey.spi.container.servlet.ServletContainer</servlet-class>
    ...
  </servlet>
  ...
  <servlet-mapping>
    <servlet-name>Jersey REST Service</servlet-name>
    <url-pattern>/r/*</url-pattern>
  </servlet-mapping>
</web-app> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T22:53:58.400

像这样分配路径：

```
URI uri = uriInfo.getBaseUriBuilder().path("../user.html").build(); 
```

# jquery - 提交选中的复选框

> ID：15145089
> 
> 赞同：0
> 
> 时间：2013-02-28T20:31:36.887
> 
> 标签：jquery, jsp, checkbox, html-table

我需要向我的表中添加一个函数，因此当复选框选择多行然后按下“选择”按钮时，应该弹出另一个 JSP 页面以提交选定的行。我想要“选择”按钮来选择行并弹出提交页面进行提交。

![在此处输入图像描述](../Images/084da47669a44ddf77653d2411efdcdf.png) ![在此处输入图像描述](../Images/73cbd6860b0aea5ae13972b261ee0a72.png)

表 JSP：

```
<table id="summaryTable" class="tablesorter" > 
<thead> 
<tr> 
<th>&nbsp;</th>  
<th>Bar Code</th> 
<th>Origin</th> 
<th>Sender Name</th> 
<th>Recipient Name</th> 
<th>Receipt Date</th>
<th>Load Date</th>
<th>Forecast ISC</th>
<th>Actual ISC</th>
<th>Country</th>
<th>Source</th>
<th><input type="submit" name="selectCheckBox" value="Select"></th>
</tr> 
</thead> 
<tbody> 
<tr> 
<c:forEach items="${summary}" var="summary">

 <tr>
 <td><c:out value="${summary.eventDesc}" /></td>
 <td><c:out value="${summary.labelNbr}" /></td>
 <td><c:out value="${summary.origin}" /></td>
 <td><c:out value="${summary.senderName}" /></td>
  <td><c:out value="${summary.receiverName}" /></td>
  <td><c:out value="${summary.receiptDate}" /></td>
  <td><c:out value="${summary.loadDate}" /></td>
 <td><c:out value="${summary.forecastIsc}" /></td>
  <td><c:out value="${summary.actualIsc}" /></td>
  <td><c:out value="${summary.country}" /></td>
  <td><c:out value="${summary.source}" /></td>
  <td><input type="checkbox" value=""></td>
  </tr>
  </c:forEach> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:43:37.550

嗨，这是检查所选框的代码，但我不明白在那之后你到底想做什么。

```
 $.each($("input[type=checkbox]:checked"),function(){
                //your code here
            }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:01:24.843

你能清除“弹出提交页面”部分吗？对于第一部分，代码应该是这样的

```
$('[name="selectCheckBox"]').on('click', function() {
  $('[type="checkbox"]').prop('checked', true);
  //$.ajax call here if you just want to post it to the backend
}); 
```

# php - 我的电子邮件激活功能的错误在哪里？

> ID：15145097
> 
> 赞同：0
> 
> 时间：2013-02-28T20:31:57.513
> 
> 标签：php

我是初学者，我的电子邮件激活功能出现小错误。错误在 for 循环的行中。

```
<?php
function generateCode(){
$codelength = 20; 
// The length of the activation code.
$characters = "abcdefghijklmnopqrstuvwxyz1234567890"; // All accepted characters.
$activatecode = "";
for($i=0;$i&lt;=$codelength;$i++){
$activatecode .= substr(str_shuffle($characters),0,1);
}
return $activatecode;
}
$userActivationCode = generateCode();
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:33:16.330

您的一些源代码是 HTML 编码的。也许您已经从网站复制/粘贴了它。

在有`for`循环的那一行，更改`&lt;`为`<`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:33:40.637

您的小于符号是 html 编码的。

```
for($i=0;$i&lt;=$codelength;$i++){ 
```

改成

```
for($i=0;$i<=$codelength;$i++){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T20:34:43.580

```
$i&lt 
```

不是一个有效的条件

你可能的意思是：

```
for($i=0;$i<=$codelength;$i++){ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T20:53:33.360

```
<?php
function generateCode(){
$codelength = 20; 
// The length of the activation code.
$characters = "abcdefghijklmnopqrstuvwxyz1234567890"; // All accepted characters.
$activatecode = "";
for($i=0;<=$codelength;$i++){
$activatecode .= substr(str_shuffle($characters),0,1);
}
return $activatecode;
}
$userActivationCode = generateCode();
?> 
```

# django - Django 数据库查询错误：“x”是此函数的无效关键字参数

> ID：15145099
> 
> 赞同：1
> 
> 时间：2013-02-28T20:32:18.610
> 
> 标签：django, django-models

我收到以下错误：

```
"'used_intent' is an invalid keyword argument for this function" 
```

我的模型在这里：

```
class Intents(models.Model):
    id = models.AutoField(primary_key=True)
    intent = models.CharField(max_length=300)
    description = models.CharField(max_length=300)
    class Meta:
        db_table = u'intents'

class UsedIntents(models.Model):
    id = models.AutoField(primary_key=True)
    report_id = models.IntegerField()
    used_intent = models.IntegerField()
    class Meta:
        db_table = u'used_intents' 
```

以下是相应的代码行：

```
usedIntentsElement = xmldoc.getElementsByTagName('intent')
for element in usedIntentsElement:
    try:
        intentsEntry = Intents.objects.get(intent=element.childNodes[0].nodeValue)
        intentsEntryId = intentsEntry.id
    except:
        # if intent is unknown add it to the database and get the id of the new entry
        intentsEntry = Intents(intent=element.childNodes[0].nodeValue)
        intentsEntry.save()
        intentsEntryId = intentsEntry.id
    usedIntentsEntry = UsedIntents(report_id=int(reportEntryId), used_intent=int(intentsEntryId))
    usedIntentsEntry.save() 
```

你们中有人知道这个错误的原因是什么吗？

# excel - 创建宏模板以在电子表格上使用

> ID：15145100
> 
> 赞同：0
> 
> 时间：2013-02-28T20:32:20.837
> 
> 标签：excel, criteria, vba

我想知道是否有可能（以及如何）创建一个带有特定宏的 Excel 模板，以便在我们从测量硬件导出的电子表格中自动使用这个宏。

我们将硬件中的测量值导出到 Excel 电子表格中。现在我们必须为每个电子表格编写相同的宏来过滤我们只需要的特定标准。

所以我们想要一个保存有这个宏的 Excel 模板，从我们的硬件中导入 Excel 电子表格，这样它每次都会自动过滤条件，所以我们可以立即使用它。

我们该如何安排呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T23:10:38.883

如果假设您的测量硬件总是产生相同的输出文件名......

*   1 - 您可以拥有一个带有导入和过滤数据文件的宏的模板。在这种情况下，带有宏的文件不会作为模板服务器

子加载数据表（）

```
Dim sWbkPath As String
sWbkPath = "PATH_TO_FILE\" & "FILE_NAME"

Dim wbkData As Workbook
Set wbkData = Workbooks.Open(sWbkPath)

DataFilteringMacro wbkData 'or sheet 
```

结束子

*   2 - 您可以有一个仅在数据文件打开时显示功能区的插件

在“ThisWorkbook”模块中...

Dim WithEvents 应用程序作为应用程序

私有子 Workbook_Open()

```
Set App = Application 
```

结束子

Private Sub App_WorkbookActivate(ByVal Wb As Workbook)

```
'...
'if using a ribbon, you could put the code in the "GetVisible" callback
'and invalidate the ribbon in the App_WorkbookActivate()
'bVisible is the value set in the ribbon callback

Dim wbk As Workbook
Set wbk = ActiveWorkbook

If wbk.Name = "FILE_NAME" Then

    'bVisible = True 'the data file was loaded

Else

    'bVisible = False 'another file was loaded

End If 
```

结束子

# java - 为什么使用 Singleton 在 Java 中创建对象这么慢？

> ID：15145102
> 
> 赞同：-2
> 
> 时间：2013-02-28T20:32:25.267
> 
> 标签：java, performance, constructor, singleton

最近我做了一个单例类，其中有一个方法返回`myInstance`单例类的对象。它是这样的：

```
private final static Singleton myInstance = new Singleton(); 
```

之后，我编写了私有的整个构造函数，可以说：

```
private Singleton(){
   doStuff()
} 
```

然而表演很糟糕。也许有人可以给我一个提示，为什么`doStuff()`当我不使用 Singleton 时会慢得多？我想这与在声明变量时调用构造函数有关，但是有人可以分享一些关于它的信息吗？

我不知道为什么会这样，我试图寻找解释，但我找不到。

编辑： dostuff 函数包括诸如打开文件/读取它们/在它们上使用正则表达式，使用 levenstein 函数[探查器是代码中最慢的部分]之类的东西。当使用单例从构造函数运行该 levenstein 时，levenstein 函数的速度大约需要 10 秒。创建对象后，在这个单例对象中调用这个函数只用了 0.5 秒。现在，当不使用单例时，从构造函数调用 levenstein 函数也需要 0.5 秒，而单例调用时需要 10 秒。该函数的代码如下：[“odleglosci”只是一个简单的映射]

```
 private static int getLevenshteinDistance(String s, String t) {

    int n = s.length(); // length of s
    int m = t.length(); // length of t

    int p[] = new int[n + 1]; //'previous' cost array, horizontally
    int d[] = new int[n + 1]; // cost array, horizontally
    int _d[]; //placeholder to assist in swapping p and d

    // indexes into strings s and t
    int i; // iterates through s
    int j; // iterates through t

    char t_j; // jth character of t

    int cost; // cost

    for (i = 0; i <= n; i++) {
        p[i] = i * 2;
    }
    int add = 2;//how much to add per increase
    char[] c = new char[2];
    String st;
    for (j = 1; j <= m; j++) {
        t_j = t.charAt(j - 1);
        d[0] = j;

        for (i = 1; i <= n; i++) {
            cost = s.charAt(i - 1) == t_j ? 0 : Math.min(i, j) > 1 ? (s.charAt(i - 1) == t.charAt(j - 2) ? (s.charAt(i - 2) == t.charAt(j - 1) ? 0 : 1) : 1) : 1;//poprawa w celu zmniejszenia wartosci czeskiego bledu
            if (cost == 1) {
                c[0] = s.charAt(i - 1);
                c[1] = t_j;
                st = new String(c);
                if (!odleglosci.containsKey(st)) {
                    //print((int) c[0]);
                    //print((int) c[1]);
                } else if (odleglosci.get(st) > 1) {
                    cost = 2;
                }

            } else {
                c[0] = s.charAt(i - 1);
                c[1] = t_j;
                st = new String(c);

                if (!odleglosci.containsKey(st)) {
                    // print((int) c[0]);
                    // print((int) c[1]);
                } else if (odleglosci.get(st) > 1) {
                    cost = -1;
                }
            }

            d[i] = Math.min(Math.min(d[i - 1] + 2, p[i] + 2), p[i - 1] + cost);
        }

        _d = p;
        p = d;
        d = _d;
    }
    return p[n];
} 
```

我没想到这里的代码可能与我提出的问题有任何关系，这就是为什么我之前没有包含它，抱歉。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:47:12.577

它慢的原因是因为它`doStuff()`很慢。

# javascript - 点击提交表单

> ID：15145105
> 
> 赞同：1
> 
> 时间：2013-02-28T20:32:30.483
> 
> 标签：javascript, html

有一个 PHP 生成的 HTML 4 过渡页面，用于编辑来自单个记录的数据库中的数据。用户有两个选择：存储更改或删除记录。我使用带有控件的表单（其中一些是隐藏的）：

```
<form method="post" action="object_mod.php"><!-- this is another file -->
<!-- inputs follow --> 
```

因为我想处理两个动作，即。`</FORM>`删除或保存记录我在表单上的标记之前放置了两个提交按钮：

```
<input type="submit" id="btnSubmit" value="Save">
<input type="submit" id="btnDelete" value="Delete">
</form> 
```

因为用户应该确认删除，所以我添加了以下`onclick`事件：

```
<input type="submit" id="btnDelete" value="Delete" onclick="javascript:deleteRecordConfirm();"> 
```

（我也试过没有`javascript:`and `onclick="javascript:deleteRecordConfirm(); return true;"`），但它没有提交表单。

JS函数是

```
function deleteRecordConfirm(){
  if(confirm('Are you sure to delete?')){
    document.getElementById("field_action").value=-1;
    //document.forms[0].submit();
    return true;
  }
} 
```

这`field_action`设置为 -1，所以我在 object_mod.php 中知道我想删除记录而不是保存它。

问题来了，*为什么这个表格在删除时不提交*？

我认为，如果用户禁用了 Javascript 以提交表单，即使没有确认也是很好的，这就是我`<INPUT TYPE="submit">`用于删除的原因。这是个好主意吗？我正在考虑给两个独立的表单（实际上删除应该只有一个带有记录 id 的隐藏字段）和它们自己的提交按钮，一个用于删除，另一个用于保存。

事实上，该页面可以在某种 Intranet 中运行，我信任的用户和我不怕黑客攻击或其他什么的，但也欢迎任何安全说明。

（我在 Firefox 19.0 上对其进行了测试，Javascript 控制台没有显示任何错误，w3c 验证器说它是一个有效页面）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:46:42.570

表单应根据您的代码提交。我发现的唯一一件事是您应该使用`/>`.

但是...这样，即使取消了确认，也会提交表单。使用`form.onsubmit`处理程序，如果返回 false，表单将不会提交。

我不认为@B3aT 的答案是正确的，因为这不是无条件地“外部化”的最佳方式可以这么说。许多最简单的就是最好的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:41:19.913

我认为最好的方法是“外部化”实际的表单发布。

//制作常规按钮（不提交）//调用您自己的功能（保存和删除）//在您完成逻辑之后`document.forms["myform"].submit();`

另一种解决方案是添加一个名为“删除”的复选框并将“保存”按钮重命名为“完成或执行”。而在服务器端，如果“删除”被激活，那么..删除它。

通常“删除”是“每个条目”级别所必需的（同一用户有多个记录），因此您必须创建一个单独的按钮/链接并最终执行 ajax 请求/访问带有 ?delete=1&id=3 的 URL。

您需要制作自定义是/否窗口或为其使用 jQuery 插件，唯一的浏览器标准是“确认”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:34:52.723

好的，它起作用了，这实际上是一个*非常*愚蠢的错误。问题出在这个按钮上，因为它在表单之外。我非常确定我有它，所以我没有查看 PHP 代码，而是从脚本中复制了所有内容，而不是我应该做的 HTML 输出。

正如我正确理解的那样，这条线`document.forms[0].submit();`起作用了，但这不是因为提交表单的是按钮，而是`document.form[0]`对象本身。

感谢您的所有回答。我会试试`form.onsubmit`Marcell 的这个提示。

# xcode4.6 - 无法在 XCode 中重构类名

> ID：15145106
> 
> 赞同：2
> 
> 时间：2013-02-28T20:32:30.930
> 
> 标签：xcode4.6, automated-refactoring

`.xib`我正在尝试通过 XCode 的重构工具重命名视图控制器（具有关联文件）的类名。输入新名称后，我收到此错误消息（没有更改预览）：

> **选择不是可以重命名的类型。**
> 
> 做出不同的选择，然后重试。

我已经尝试了[这个 SO](https://stackoverflow.com/q/5527484/620197)线程中的所有建议，但没有运气。

当其他类和变量可以毫无问题地重构时，什么会阻止 XCode 能够重构一个类（和相关的文件名）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:38:53.227

我认为您尝试通过选择文件并按重构来更改类名，或者在#import“类名”中选择它。

而是尝试在@interface 之后的接口定义中选择“类名”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-05T06:12:19.283

我也遇到了这个问题这是我的解决方案 `Move the whole Project to another place Then it works(to me)`

# jquery - 在 IE10/Win7 上运行 jQuery 崩溃

> ID：15145108
> 
> 赞同：7
> 
> 时间：2013-02-28T20:32:33.410
> 
> 标签：jquery, asp.net, windows-7, visual-studio-2012, internet-explorer-10

我目前只是在我的 ASP.net 网页（实际上是 Site.Master 文件）中包含 jQuery（1.9.1，但旧 1.8.3 的行为方式相同）。在 IE9/Win7-64 下运行一切正常，但自从我升级到 IE10（仍然是 Win7-64）后，现在当我在本地运行网页，选择 Internet Explorer 并从 Visual Studio 中运行时，我遇到了异常。

例外是 jquery-1.9.1.js 文件的第 4224 行。

```
// Opera 10-12/IE8 - ^= $= *= and empty values
// Should not select anything
div.innerHTML = "<input type='hidden' i=''/>";
if ( div.querySelectorAll("[i^='']").length ) {
    rbuggyQSA.push( "[*^$]=" + whitespace + "*(?:\"\"|'')" );
}

// FF 3.5 - :enabled/:disabled and hidden elements (hidden elements are still enabled)
// IE8 throws error here and will not see later tests
if ( !div.querySelectorAll(":enabled").length ) {
    rbuggyQSA.push( ":enabled", ":disabled" );
}

// Opera 10-11 does not throw on post-comma invalid pseudos
div.querySelectorAll("*,:x");
rbuggyQSA.push(",.*:"); 
```

新旧 jQuery 似乎无法正确处理 Windows 7 上的 IE10。我在 Opera 10-11 崩溃了，这很有趣。

我还看到 4242 发生崩溃

```
if ( (support.matchesSelector = isNative( (matches = docElem.matchesSelector ||
    docElem.mozMatchesSelector ||
    docElem.webkitMatchesSelector ||
    docElem.oMatchesSelector ||
    docElem.msMatchesSelector) )) ) {

    assert(function( div ) {
        // Check to see if it's possible to do matchesSelector
        // on a disconnected node (IE 9)
        support.disconnectedMatch = matches.call( div, "div" );

        // This should fail with an exception
        // Gecko does not error, returns false instead
        matches.call( div, "[s!='']:x" );
        rbuggyMatches.push( "!=", pseudos );
    }); 
```

这是错误之一：

```
Exception was thrown at line 4224, column 4 in http://localhost:49928/jquery/jquery-1.9.1.js
0x800a139e - JavaScript runtime error: SyntaxError
Source line: div.querySelectorAll("*,:x"); 
```

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-11T12:25:46.407

jQuery 团队在某些情况下使用异常来实现逻辑流。请参阅我针对 WinJS 应用程序的相同问题提交的此错误：http: [//bugs.jquery.com/ticket/14123](http://bugs.jquery.com/ticket/14123)

由于处理了异常，他们不认为这是一个问题。我这样做了，因为它使调试应用程序变得更加困难，而没有设置“抛出中断”。

所以，这就是问题所在。你无能为力。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-05T04:19:03.473

除了消息，还有什么问题吗？正如评论所说，“这应该失败并出现异常。” 异常由`assert()`方法处理，不应导致程序终止。Visual Studio 中应该有一个选项来仅显示未处理的异常。

更多信息：[此页面](http://msdn.microsoft.com/en-us/library/windows/apps/hh700337.aspx)描述了如何在 Visual Studio 中找到“JavaScript 首次机会例外”设置，将其关闭应该会消除您所看到的内容。请注意，如果您正在调试 Promise，您可能不想将其关闭，链接中的文章进一步讨论了它。但我相信 jQuery 在这种情况下会正确处理异常，如果您没有在调试器中运行，您将看不到该消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T09:25:44.253

当调试器设置为在未捕获的错误上中断时，我在 Windows 7 上的 Safari 中遇到了同样的问题。问题似乎是调试器期望 catch(e) 发生在同一个函数中。如果您继续逐个执行语句，则 catch(e) 稍后会在 assert() 函数中很好地发现错误：

```
function assert( fn ) {
    var div = document.createElement("div");

    try {
        return fn( div );
    } catch (e) {
        return false;
    } finally {
        // release memory in IE
        div = null;
    }
} 
```

令人沮丧，是吧！？

# loops - 如何停止 Azure 数据库无限循环会话

> ID：15145109
> 
> 赞同：0
> 
> 时间：2013-02-28T20:32:34.180
> 
> 标签：loops, azure, azure-sql-database, infinite-loop

昨晚我可能在我的 Azure 网站上开始了一个无限循环，复制数据库中的数据。大约 24 小时前，我的桌子还在继续增长。我可以停下来还是会在某个时候烧坏？我的 Azure 订阅 cpu 时间完全用完了。

我什至取消了我的数据库与网站的链接，但该表每秒不断增长几行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:44:47.490

我建议您使用门户尽快停止它。很少有原因会导致它“烧毁”并被回收。Azure Fabric Controller 无法知道它是一个流氓进程，因此它永远不会介入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:11:42.103

我必须更改列上的数据类型 for 循环以遇到错误并停止。弄乱。CPU 时间为 518% :S Azure 太便宜了 :)

# java - 一旦外键是主键的一部分，如何使用复合键映射自联接

> ID：15145110
> 
> 赞同：2
> 
> 时间：2013-02-28T20:32:41.747
> 
> 标签：java, hibernate, composite-key, self-join

我遇到了以下问题：我必须将我的`Employee`类映射到以下数据库模式（**其中 id1 和 id2 是复合主键**）：

```
--------------------------
| id1 | id2 | ManagerId2 |
--------------------------
| 1   | 1   | NULL       | <--- Have no manager / Can be manager of many   
--------------------------
| 1   | 2   | 1          | <--- Is manager / Has manager 1-1 
--------------------------
| 1   | 3   | 1          | <--- Is manager / Has manager 1-1 
-------------------------- 
```

我知道外键必须具有与其引用的主键相同的列（相同的列数）。关键是，一旦`Employee`插入 an ，`id1 = 1`它就只能引用带有 . 的管理器`id1 = 1`。一种保持完整性并避免以下情况的方法：

```
---------------------------------------
| id1 | id2 | ManagerId1 | ManagerId2 |
---------------------------------------
| 1   | 1   | NULL       | NULL       | <--- Have no manager / Can be manager of many   
---------------------------------------
| 2   | 1   | NULL       | NULL       | <--- Have no manager / Can be manager of many   
---------------------------------------
| 1   | 2   | 2          | 1          | <--- THIS IS NOT ALLOWED
---------------------------------------
| 1   | 3   | 2          | 1          | <--- NOR THIS
--------------------------------------- 
```

到目前为止，我得到的最好的是以下映射（尽管它按预期创建了表，但它根本不会填充该`ManagerId2`字段）：

```
@Entity
@Table(name="Employee")
public class Employee {

    public Employee(){
    }

    @EmbeddedId
    private EmployeeId id;
    public void setId(EmployeeId id) {
        this.id = id;
    }
    public EmployeeId getId() {
        return id;
    }

    @ManyToOne(cascade={CascadeType.ALL})
    @JoinColumns({ 
        @JoinColumn(name = "id1", referencedColumnName = "id1", insertable=false, updatable=false), //its fine to have this attribute not insertable nor updatable
        @JoinColumn(name = "id2_manager", referencedColumnName = "id2", insertable=false, updatable=false) //but I must be able to update this one!
    })
    private Employee manager;
    public Employee getManager() {
        return manager;
    }
        public void setManager(Employee manager) {
        this.manager = manager;
    }
}

@Embeddable
public class EmployeeId implements Serializable{

    public EmployeeId() {

    }

    public EmployeeId(int id1, int id2) {
        this.id1 = id1;
        this.id2 = id2;
    }

    private int id1;

    private int id2;

    public int getId1() {
        return id;
    }

    public void setId(int id1) {
        this.id1 = id1;
    }

    public int getId2() {
        return id2;
    }

    public void setId2(int id2) {
        this.id2 = id2;
    }

            //hashCode and equals properly overriden
} 
```

经过一整天的观察，我似乎找不到任何东西！有人可以告诉我我做错了什么，或者指出任何好的资源吗？

**PS.：我无法更改数据库架构，这不是一个选项**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T12:47:58.650

我不确定如何使用注释来执行此操作，但我找到了一种可能对您有所帮助的解决方法。

```
@Entity
@Table(name = "Employee")
public class Employee {

    @EmbeddedId
    private EmployeeId id;

    private Integer id2_manager;

    @PrePersist
    @PreUpdate
    public void prePersistUpdate() {
        if (manager != null)
            id2_manager = manager.getId().getId2();
    }

    public Employee() {
    }

    public void setId(EmployeeId id) {
        this.id = id;
    }

    public EmployeeId getId() {
        return id;
    }

    @ManyToOne(cascade = { CascadeType.ALL })
    @JoinColumns({ @JoinColumn(name = "id1", referencedColumnName = "id1", insertable = false, updatable = false),
            @JoinColumn(name = "id2_manager", referencedColumnName = "id2", insertable = false, updatable = false, nullable = true) })
    private Employee manager;

    public Employee getManager() {
        return manager;
    }

    public void setManager(Employee manager) {
        this.manager = manager;
    }
} 
```

去测试

```
 static EntityManagerFactory emf;
    static EntityManager em;

    public static void main(String[] args) {

        emf = Persistence.createEntityManagerFactory("unit");
        em = emf.createEntityManager();

        Employee manager = new Employee();
        manager.setId(new EmployeeId(1, 1));

        Employee e1 = new Employee();
        e1.setId(new EmployeeId(1,2));
        e1.setManager(manager);

        em.getTransaction().begin();

        em.persist(manager);
        em.persist(e1);

        em.getTransaction().commit();

        Employee e2 = em.find(Employee.class, new EmployeeId(1, 2));

        System.out.println(e2.getManager().getId().getId1() + "-" + e2.getManager().getId().getId2());
        //  prints  1-1

    } 
```

# java - Java中的键监听器/键绑定

> ID：15145120
> 
> 赞同：1
> 
> 时间：2013-02-28T20:33:23.350
> 
> 标签：java, swing, paint, keylistener, key-bindings

如何编写一个事件，该事件在按下键（特别是空格键）时开始，在按住键时继续运行*，*并且仅在释放键时停止？我正在尝试模拟在粗糙表面上移动的带轮物体。我试过使用原始的 KeyListener 方法，但问题是，当我按住空格键时，我正在模拟的对象反复停止和启动。我听说一个可能的解决方案是键绑定，但即使在阅读了有关它的 Java 教程后我仍然不理解它们。

这是用于模拟的绘制方法（由每 10 毫秒休眠的线程控制）：

```
public void paint(Graphics g)
{

    Graphics2D g2 = (Graphics2D)g;
    g2.setRenderingHint(RenderingHints.KEY_ANTIALIASING, RenderingHints.VALUE_ANTIALIAS_ON);
    Shape roadsurface = new Rectangle2D.Float(0, 85, 1000, 200);
    g2.setColor(Color.BLACK);
    g2.setStroke(new BasicStroke(10));
    g2.draw(roadsurface);
    g2.setColor(new Color(102, 102, 153));
    g2.fill(roadsurface);
    Image carimage = Toolkit.getDefaultToolkit().getImage("cargrey.png");
    g2.drawImage(carimage, x_pos, y_pos, 60, 30, this);
    g2.finalize();
} 
```

以下是用于更改 x_pos 的方法（假定未声明的变量已在类主体中声明）：

```
public void accelerate()
{
    do 
    { acc = 15.0 - t;
    vel = ( t * 15.0)  -  ( 0.5 * Math.pow(t, 2.0) );
    disp = ( 0.5 * 15.0 * Math.pow(t, 2.0) ) - ( (1.0/6.0) * Math.pow(t, 3.0) ); 
    x_pos = (int)disp;  
    t += 0.01; break;} while (acc > 0);
    while (acc <= 0)
    { acc = 0;
    disp = t * vel; 
    x_pos = (int)disp;  
    t += 0.01;
    }
}
public void brake(double vel, double disp)
{
    double u = 0;
    double disp2;
    while (vel > 0)
    { 
    disp2 = (vel * u) + (0.5 * -100 * Math.pow(u, 2.0) );
    vel = vel + (-100 * u); 
    x_pos = (int)(disp + disp2);    
    u += 0.01;
    t += 0.01; break;}
    while (vel <= 0)
    {
        u += 0.01;
        t += 0.01;      
    }
} 
```

这是我对这次活动的最初想法：

```
 class Key1 extends Thread implements KeyListener
{
Track g;
boolean keyIsPressed;
Key1(Track g)
{
    this.g = g;
}
public void keyTyped(KeyEvent ke) {}
public void keyPressed(KeyEvent ke)
{
    if (ke.getKeyCode() == KeyEvent.VK_SPACE)
        keyIsPressed = true;
}
public void keyReleased(KeyEvent ke)
{
    if (ke.getKeyCode() == KeyEvent.VK_SPACE)
        keyIsPressed = false;
}
public void run() 
{
    while (keyIsPressed)
    {
    g.repaint();
    g.accelerate();
    try
    {
        Thread.sleep(10);
    }
    catch (InterruptedException ex)
    {
        // swallowed
    }
    while (!keyIsPressed)
    {
    g.repaint();
    g.brake(g.vel, g.disp);
    try
    {
        Thread.sleep(10);
    }
    catch (InterruptedException ex)
    {
        // swallowed
    }
} 
```

}

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T20:38:50.400

最好和最常见的方法之一是为每个映射键设置一个标志。当它被按下时（由 KeyEvent 检测到），该标志设置为 true。当它被释放时（也被 KeyEvent 检测到），该标志设置为 false。

应用程序状态（由另一个线程定期检查）将不是由键状态或事件决定，而是由标志状态决定。

这种简单的方法避免了由键重复设置引起的影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T22:33:55.557

我会是第一个争辩说有时 a`KeyListener`是好事的人，但我不认为这是其中之一。

基本上，这演示了如何使用键绑定来监视键的状态更改（在此空格键中）。

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.FontMetrics;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.KeyEvent;
import javax.swing.AbstractAction;
import javax.swing.ActionMap;
import javax.swing.InputMap;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.KeyStroke;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;

public class KeyBindingTest {

    public static void main(String[] args) {
        new KeyBindingTest();
    }

    public KeyBindingTest() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new TestPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class TestPane extends JPanel {

        private boolean spaceIsDown = false;

        public TestPane() {
            // Avoid all the issues with focusable and single
            // focused components
            InputMap im = getInputMap(WHEN_IN_FOCUSED_WINDOW);
            ActionMap am = getActionMap();

            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, 0, false), "space.pressed");
            im.put(KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, 0, true), "space.released");

            am.put("space.pressed", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    spaceIsDown = true;
                    repaint();
                }
            });
            am.put("space.released", new AbstractAction() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    spaceIsDown = false;
                    repaint();
                }
            });
        }

        public boolean isSpaceIsDown() {
            return spaceIsDown;
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            String text = isSpaceIsDown() ? "Space is DOWN" : "Space is UP";
            FontMetrics fm = g2d.getFontMetrics();
            g2d.drawString(text, (getWidth() - fm.stringWidth(text)) / 2, (((getHeight() - fm.getHeight())) / 2) + fm.getAscent());
            g2d.dispose();
        }
    }

} 
```

# wcf - 从 WCF 迁移到 node.js

> ID：15145133
> 
> 赞同：0
> 
> 时间：2013-02-28T20:34:16.350
> 
> 标签：wcf, node.js, migration

目前，我编写了一个提供以下功能的 WCF 服务：

*   视频上传和下载
*   用户管理
*   集团管理
*   文件管理
*   一个论坛
*   存在管理

作为数据库，我使用 Microsoft 的 SQL Server 2012。

该服务是通过 REST 调用的，所以这不是问题。

我的问题是，我可以使用 node.js 获得什么优势，或者更好地说，有什么优势吗？

在我看来，最大的优势是我完全独立于平台。还有其他优点吗？

问候克纳德

**更新，我在这里发布了一个新问题[https://softwareengineering.stackexchange.com/questions/188926/migrate-wcf-to-node-js](https://softwareengineering.stackexchange.com/questions/188926/migrate-wcf-to-node-js)**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T20:06:41.393

你会得到 Node.js 的常见优点和缺点。

IE：

*   平台独立性
*   一切都是异步的
*   后端的语言与 HTML 前端的语言相同
*   ...

基本上，您是否可以从 Node.js 恕我直言中受益的问题归结为您是否需要进行大量扩展，以及是否有大量 I/O 要做。

如果两者的答案都是“是”，那么 Node.js 对您来说可能是一个不错的选择。

PS：完全跑题了，但是 - 你是*winfuture.de*论坛的 Knerd 吗？

# javascript - 在我的主干视图中使用 Mixins 时遇到问题

> ID：15145135
> 
> 赞同：2
> 
> 时间：2013-02-28T20:34:27.327
> 
> 标签：javascript, jquery, backbone.js, underscore.js, mixins

我想在我的 BackBone 视图中使用 mixins。

这是我的混音：

```
var mixin = {
  events: {
    "click" : "doStuff"
  },
  doStuff: function() { alert("bah!"); }
} 
```

这是我如何将它混合到两个单独的视图中：

```
var view1 = Backbone.View.Extend({ ... });
_.extend(view1.prototype, mixin);

var view2 = Backbone.View.Extend({ ... });
_.extend(view2.prototype, mixin); 
```

我遇到的问题是 click 事件似乎只在`view1`. 如果我先初始化`view`2，那么 click 事件只适用于`view2`.

任何想法我做错了什么？

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:24:41.950

您可以覆盖主干上的扩展方法，以实现您期望的继承和合并。您只需要稍微挖掘一下文档和对象即可找到您想要的。

这样你就有了一个 BaseObject 然后扩展你的两个对象。

# ruby-on-rails - Rails 中的登录会话助手

> ID：15145144
> 
> 赞同：0
> 
> 时间：2013-02-28T20:35:23.180
> 
> 标签：ruby-on-rails, authentication

如果您观看任何与 Ryan Bates 身份验证相关的 Railscast，您会在创建 sigin/signout 功能时看到一个反复出现的主题，我想更清楚地理解这一点。

```
def current_user
    @current_user ||= User.find(session[:user_id]) if session[:user_id]
end
helper_method :current_user 
```

例如，通常在会话控制器中，创建操作将包含对会话哈希的分配，例如`session[:user_id] = user.id`假设变量 user 设置为 Active Record 对象。

然后在整个视图中使用上述辅助方法来查找当前登录的用户。

但是，当退出销毁操作时，仅包含该行`session[:user_id] = nil`

我的问题是也不`@current_user`需要设置为零，因为它将设置为以前登录的用户？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:45:48.017

通常在设置后`session[:user_id] = nil`您的控制器将返回，因此`@current_user`仍然处于活动状态并不重要。您必须记住，`@current_user`仅针对该请求存在，下一个通过的请求是该控制器类的新实例。

你是对的，如果你做了这样的事情：

```
def destroy
  session[:user_id] = nil
  logger.debug current_user.inspect  # Current user is still set for this request
  redirect_to admin_url, notice => "You've successfully logged out."
end 
```

您会在日志文件中看到用户信息，但通常您会在清除 session[:user_id] 后立即进行重定向，以便控制器实例完成。

# c++ - memcpy 进程安全吗？

> ID：15145152
> 
> 赞同：8
> 
> 时间：2013-02-28T20:36:01.153
> 
> 标签：c++, c, process, thread-safety, memcpy

我在网上看了，并没有让自己满意的答案。

memcpy 线程安全吗？（在 Windows 中）

我的意思是，如果我使用单个 memcpy 写入进程之间共享的内存区域（使用 boost::shared_memory_object），然后尝试使用单个 memcpy 从另一个进程读取该区域，那么在写入时一个进程会自动被阻止发生？我在哪里可以读到这个？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T20:38:25.357

memcpy 通常针对原始速度进行编码。它不会是线程安全的。如果你需要这个，你需要在临界区中执行 memcpy 调用或者使用一些其他的信号机制。

```
take_mutex(&mutex);
memcpy(dst, src, count);
yield_mutex(&mutex); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-02-28T20:37:42.897

memcpy 不是线程/进程安全的

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-28T21:13:54.880

像 memcpy()（或 memmove()）这样的例程是标准 C 库的一部分，包含在标准 <string.h> 头文件中，并且对任何锁定机制一无所知。锁定应该由一些外部方式提供，如进程间互斥体、信号量或类似的东西。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-11-14T16:50:26.427

您混淆了“原子”和“线程安全”。如果您`memcpy`在共享区域中同时读取和写入数据（有或没有），那是不安全的。当然，复制数据本身是线程安全的。

`memcpy`本身也是线程安全的，至少在 POSIX 系统上看到[这个](https://stackoverflow.com/questions/19974548/are-functions-in-the-c-standard-library-thread-safe)，因此我猜它也在 Windows 上。其他任何事情都会使它变得毫无用处。

如果它是“自动阻塞”，它必须是原子的（或者至少管理它自己的锁），这会减慢你的系统。因此，在您的情况下，您应该使用自己的锁。

# ajax - 跨浏览器 XML 插入

> ID：15145155
> 
> 赞同：0
> 
> 时间：2013-02-28T20:36:13.813
> 
> 标签：ajax, svg, xml-parsing, domparser

我需要将 XML (svg) 文件的内容插入到 html div 中。对于不支持 DOMParser() (IE7 & 8) 的浏览器，我该怎么做？

看来，在 IE8 中，我可以使用 innerHTML 将 xml 内容作为文本插入，但它不会呈现 svg。

我的工作在[http://ec2-174-129-62-227.compute-1.amazonaws.com:8080/](http://ec2-174-129-62-227.compute-1.amazonaws.com:8080/)上在线，但随着我调整解决方案，它可能会有所改变。**确保单击“多叶树”单选按钮。**如果它可以正常工作，它应该可以在 IE9 和 chrome 中正常工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:11:21.633

IE8 及更低版本不支持 SVG，因此即使您设法插入元素，它仍然不会呈现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T15:44:42.533

尽管它们不适用于我的情况，但我确实找到了一些可以在旧浏览器中使用 SVG 渲染某些东西的 polyfill。我特别喜欢[google 的这个](https://code.google.com/p/svgweb/)。它使用您的 svg 数据在较旧的 Internet Explorer 中实际呈现 Flash 版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:44:24.467

也许[jQuery parseXML](http://api.jquery.com/jQuery.parseXML/)会更好地为您服务？

# python - 导入模块 - 多少才算太多？

> ID：15145159
> 
> 赞同：7
> 
> 时间：2013-02-28T20:36:33.290
> 
> 标签：python, python-2.7, python-3.x

作为一个新手，当我开始编写一些东西时，我几乎默认地喜欢导入模块，因为我经常调用它们中的某些函数（像随机、时间、操作系统和系统这样的模块）。但是，这会影响性能吗？如果我只想要模块中的特定功能，那么明确要求它会更好还是不关心？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T20:37:29.070

当您这样做时`from module import name`，Python 仍然必须运行`module`，因此在性能方面没有区别。

一般来说，如果你只使用一个模块中的一个东西，那么使用`from x import y`就很好，但否则，使用`import x`然后`x.y`会导致名称冲突的可能性较低。

这样做的原因是 Python 没有特别对待函数和类。当您从模块导入时，您所做的就是从该模块中获取对象并使用它们。这很有用，因为它使模块（以及类和函数）非常灵活，但这确实意味着 Python 必须运行模块的整个脚本才能从中导入（当然，模块编写者可以通过使用`if name == "main":`成语插入不应在导入时运行的代码）。

# java - 没有类型参数的通用方法

> ID：15145162
> 
> 赞同：1
> 
> 时间：2013-02-28T20:36:38.117
> 
> 标签：java, generics

我想知道在 Java 中是否有一种方法可以在泛型方法中使用泛型类型，而无需指定类类型的参数。这是正常的做法：

```
public <T> T doSomethingGeneric(Class<T> type, int a) {
    return (T) doSomethingElse(type, a);
} 
```

我想这个作为替代：

```
public <T> T doSomethingGeneric(int a) {
    return (T) doSomethingElse(/* some magic with T here */, a);
} 
```

背景：我正在用 Hibernate 编写实用程序方法。这是我实际尝试做的一个示例，您可以推断它如何应用于此问题。

```
public static <M extends Model> M get(Class<M> type, Serializable id) {
    Session session = newSession();
    Transaction t = session.beginTransaction();
    Object model = null;
    try {
        model = session.get(type, id);
        t.commit();
    } catch (HibernateException ex) {
        t.rollback();
        throw ex;
    }
    return (M) model;
} 
```

这可能吗？如果是这样，它是如何完成的？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T20:39:08.373

你想`Class<T>`在运行时得到一个传递给`doSomethingElse()`? [不，那是不可能的。](https://stackoverflow.com/q/8436055/139010)

如果您描述了为什么`doSomethingElse`需要 a `Class<T>`，也许我们可以建议一种解决方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T20:39:00.503

这是不可能的： 的代码`doSomethingGeneric`只编译一次，这与 C++ 中模板的实例化不同。该类型在此过程中`T`被*擦除*`Object`。

另请注意，这`(T)`将被标记为未经检查的向下转换。

# asp.net-mvc - 使用什么来创建 cookie

> ID：15145166
> 
> 赞同：0
> 
> 时间：2013-02-28T20:37:29.087
> 
> 标签：asp.net-mvc, asp.net-mvc-3, cookies

无论我在哪里看，这都是添加 Cookie 的正确方法：

```
HttpCookie Session = new HttpCookie("Session");
Session.Value = someguid;
Session.Expires = somedatetime;

Response.Cookies.Add(Session); 
```

在没有解释如何将 Response 放入当前上下文的地方。所以我得到这个错误：

```
The name 'Response' does not exist in the current context 
```

我需要做什么才能使上述代码正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T18:22:24.520

`System.Web.HttpContext.Current.Response`如果您确定此代码将在 Web 应用程序中执行，您可能想要使用。
但是我有经过实践验证的实践（德米特法则也这么说）将 Response 作为参数传递给我想使用它的方法。

# python - NLTK ConditionalFreqDist 到 Pandas 数据帧

> ID：15145172
> 
> 赞同：7
> 
> 时间：2013-02-28T20:37:50.130
> 
> 标签：python, pandas, nltk

我正在尝试使用由 nltk.ConditionalFreqDist 生成的表格，但我似乎找不到任何关于将表格写入 csv 文件或导出为其他格式的文档。我很想在 pandas 数据框对象中使用它，这也很容易写入 csv。我能找到的唯一线程建议[对 CFD 对象进行酸洗，](https://stackoverflow.com/questions/9150722/storing-conditional-frequency-distribution-using-nltk)但这并不能真正解决我的问题。

我编写了以下函数来将 nltk.ConditionalFreqDist 对象转换为 pd.DataFrame：

```
def nltk_cfd_to_pd_dataframe(cfd):
    """ Converts an nltk.ConditionalFreqDist object into a pandas DataFrame object. """

    df = pd.DataFrame()
    for cond in cfd.conditions():
        col = pd.DataFrame(pd.Series(dict(cfd[cond])))
        col.columns = [cond]
        df = df.join(col, how = 'outer')

    df = df.fillna(0)

    return df 
```

但是，如果我要这样做，也许首先编写一个新的 ConditionalFreqDist 函数来生成一个 pd.DataFrame 是有意义的。但在我重新发明轮子之前，我想看看是否有任何我遗漏的技巧——无论是在 NLTK 中还是在其他地方，使 ConditionalFreqDist 对象与其他格式对话，最重要的是将其导出到 csv 文件。

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2018-09-05T21:15:57.067

您可以将 FreqDist 视为一个字典，并使用 from_dict 从那里创建一个数据框

```
fdist = nltk.FreqDist( ... )    
df_fdist = pd.DataFrame.from_dict(fdist, orient='index')
df_fdist.columns = ['Frequency']
df_fdist.index.name = 'Term'
print(df_fdist)
df_fdist.to_csv(...) 
```

输出：

```
 Frequency
Term
is                    70464
a                     26429
the                   15079 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-12-12T17:32:39.830

```
pd.DataFrame(freq_dist.items(), columns=['word', 'frequency']) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-03T00:19:29.107

好的，所以我继续编写了一个条件频率分布函数，它接受一个像`nltk.ConditionalFreqDist`函数一样的元组列表，但返回一个 pandas Dataframe 对象。比将 cfd 对象转换为数据框更快：

```
def cond_freq_dist(data):
    """ Takes a list of tuples and returns a conditional frequency distribution as a pandas dataframe. """

    cfd = {}
    for cond, freq in data:
        try:
            cfd[cond][freq] += 1
        except KeyError:
            try:
                cfd[cond][freq] = 1
            except KeyError:
                cfd[cond] = {freq: 1}

    return pd.DataFrame(cfd).fillna(0) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-24T12:09:16.770

这是使用 a 的好地方`collections.defaultdict`：

```
from collections import defaultdict
import pandas as pd

def cond_freq_dist(data):
    """ Takes a list of tuples and returns a conditional frequency 
    distribution as a pandas dataframe. """

    cdf = defaultdict(defaultdict(int))
    for cond, freq in data:
        cfd[cond][freq] += 1
    return pd.DataFrame(cfd).fillna(0) 
```

**说明：** a`defaultdict`基本上在幕后处理@primelens 的答案中的异常处理。`KeyError`不是在引用一个还不存在的键时引发，而是`defaultdict`首先使用提供的构造函数为该键创建一个对象，然后继续使用该对象。对于 inner `dict`，默认值是`int()`我们`0`随后添加的那个`1`。

请注意，由于 - 中的默认构造函数，这样的对象可能无法很好地`defaultdicts`腌制 a `defaultdict`，您需要将其转换为`dict`拳头：`dict(myDefaultDict)`。

# android - 使用 Maps V2 和 Fragments 的问题

> ID：15145174
> 
> 赞同：1
> 
> 时间：2013-02-28T20:37:49.427
> 
> 标签：android, google-maps, android-actionbar, fragment

我有以下情况：

*   我有一个使用 android 操作栏的带有 3 个选项卡的简单应用程序
*   第一个选项卡（不是选项卡，而是下面的 GUI）应该包含一个地图

我不太确定活动、片段 (Java) 和片段 (xml) 的设置应该是什么样子。您从 google playservices 获得的地图示例都只使用一个 Activity。

使用操作栏（选项卡导航）时，应使用片段。那正确吗？

所以我实现了以下无法正常工作的组件。

```
package ch.bfh.femtho.skiguide;

import android.app.ActionBar;
import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.Menu;

public class MainActivity extends Activity {

public static Context appContext;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    appContext = getApplicationContext();

    // Set up the action bar to show tabs.
    final ActionBar actionBar = getActionBar();
    actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

    // For each of the sections in the app, add a tab to the action bar.

    ActionBar.Tab mapTab = actionBar.newTab().setText(R.string.tab_title_map);
    ActionBar.Tab poiListeTab = actionBar.newTab().setText(R.string.tab_title_poiliste);
    ActionBar.Tab meetingpointTab =    actionBar.newTab().setText(R.string.tab_title_meetingpoint);

    mapTab.setTabListener(new TabListener<MyMapFragment>(
            this, "map", MyMapFragment.class));
    poiListeTab.setTabListener(new TabListener<PoiListeFragment>(
            this, "poiliste", PoiListeFragment.class));
    meetingpointTab.setTabListener(new TabListener<MeetingpointFragment>(
            this, "meetingpoint", MeetingpointFragment.class));

    actionBar.addTab(mapTab);
    actionBar.addTab(poiListeTab);
    actionBar.addTab(meetingpointTab);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

@Override
protected void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("tab", getActionBar().getSelectedNavigationIndex());
}

} 
```

选项卡监听器：

```
import android.app.ActionBar;
import android.app.ActionBar.Tab;
import android.app.Activity;
import android.app.Fragment;
import android.app.FragmentTransaction;

public class TabListener<T extends Fragment> implements ActionBar.TabListener {
    private Fragment mFragment;
    private final Activity mActivity;
    private final String mTag;
    private final Class<T> mClass;

    /** Constructor used each time a new tab is created.
      * @param activity  The host Activity, used to instantiate the fragment
      * @param tag  The identifier tag for the fragment
      * @param clz  The fragment's Class, used to instantiate the fragment
      */
    public TabListener(Activity activity, String tag, Class<T> clz) {
        mActivity = activity;
        mTag = tag;
        mClass = clz;
    }

    /* The following are each of the ActionBar.TabListener callbacks */

    public void onTabSelected(Tab tab, FragmentTransaction ft) {
        // Check if the fragment is already initialized
        if (mFragment == null) {
            // If not, instantiate and add it to the activity
            mFragment = Fragment.instantiate(mActivity, mClass.getName());
            ft.add(android.R.id.content, mFragment, mTag);
        } else {
            // If it exists, simply attach it in order to show it
            ft.attach(mFragment);
        }
    }

    public void onTabUnselected(Tab tab, FragmentTransaction ft) {
        if (mFragment != null) {
            // Detach the fragment, because another one is being attached
            ft.detach(mFragment);
        }
    }

    public void onTabReselected(Tab tab, FragmentTransaction ft) {
        // User selected the already selected tab. Usually do nothing.
    }
} 
```

分段：

```
import com.google.android.gms.common.GooglePlayServicesNotAvailableException;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.OnMapClickListener;
import com.google.android.gms.maps.GoogleMap.OnMapLongClickListener;
import com.google.android.gms.maps.MapView;
import com.google.android.gms.maps.MapsInitializer;
import com.google.android.gms.maps.UiSettings;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;

import android.app.Fragment;
import android.os.Bundle;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Toast;

public class MyMapFragment extends Fragment {

private MapView mMapView;
private GoogleMap mMap;
private Bundle mBundle;
private UiSettings mUiSettings;

int mCurCheckPosition = 0;

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);
    outState.putInt("curChoice", mCurCheckPosition);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    if (savedInstanceState != null) {
            // Restore last state for checked position.
        mCurCheckPosition = savedInstanceState.getInt("curChoice", 0);
    }
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View inflatedView = inflater.inflate(R.layout.map_fragment, container, false);

    try {
        MapsInitializer.initialize(getActivity());
    } catch (GooglePlayServicesNotAvailableException e) {
        // TODO handle this situation
    }

    mMapView = (MapView) inflatedView.findViewById(R.id.map);
    mMapView.onCreate(mBundle);
    setUpMapIfNeeded(inflatedView);

    return inflatedView;
}

@Override
public void onDestroyView() {
    super.onDestroyView();
    MyMapFragment f = (MyMapFragment) getFragmentManager().findFragmentById(R.id.map);
    if (f != null) {
        getFragmentManager().beginTransaction().remove(f).commit();
    }
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mBundle = savedInstanceState;
}

private void setUpMapIfNeeded(View inflatedView) {
    if (mMap == null) {
        mMap = ((MapView) inflatedView.findViewById(R.id.map)).getMap();
        if (mMap != null) {
            setUpMap();
        }
    }
}

private void setUpMap() {
    mMap.addMarker(new MarkerOptions().position(new LatLng(0, 0)).title("Marker"));
    mMap.setOnMapClickListener(this);
    mMap.setOnMapLongClickListener(this);
    mMap.setMyLocationEnabled(true);
    mUiSettings = mMap.getUiSettings();
    mUiSettings.setMyLocationButtonEnabled(true);
}

@Override
public void onResume() {
    super.onResume();
    mMapView.onResume();
}

@Override
public void onPause() {
    super.onPause();
    mMapView.onPause();
}

@Override
public void onDestroy() {
    mMapView.onDestroy();
    super.onDestroy();
}

} 
```

片段（xml）：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
   xmlns:tools="http://schemas.android.com/tools"
   android:layout_width="match_parent"
   android:layout_height="match_parent"
   tools:context=".MainActivity" >

   <fragment
       android:id="@+id/map"
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       class="com.google.android.gms.maps.MapFragment" />

</RelativeLayout> 
```

导航到另一个选项卡然后返回地图时会出现问题。添加的标记消失，相机位置丢失，...

有人可以帮我弄这个吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T20:28:26.350

我想您应该做的是覆盖 mapFragment 中的 onSaveInstanceState 方法，并将所有所需的数据保存在 savedInstantState 对象中（包括您创建的位置和标记位置，而不仅仅是您正在保存的 int ），并在 onCreate 方法中您应该重用所有这些数据。

更多关于保存状态的信息可以在这里找到：

[http://www.eigo.co.uk/labs/managing-state-in-an-android-activity/](http://www.eigo.co.uk/labs/managing-state-in-an-android-activity/)

# eclipselink - Informix 是否支持创建同名临时表的多个线程？

> ID：15145175
> 
> 赞同：1
> 
> 时间：2013-02-28T20:37:51.550
> 
> 标签：eclipselink, informix

我正在修复 EclipseLink 的`InformixPlatform`数据库支持类以使用我们的 Informix 11.70 安装。

需要工作的合约之一由以下代码表示。该文档解释了需要什么：

```
/**
 * INTERNAL:
 * Indicates whether the platform supports local temporary tables.
 * "Local" means that several threads may create
 * temporary tables with the same name.
   [snip]
 */
 public boolean supportsLocalTempTables() {
     return true; // is this correct?
 }

/**
 * INTERNAL:
 * Indicates whether the platform supports global temporary tables.
 * "Global" means that an attempt to create temporary table with the same
 * name for the second time results in exception.
   [snip]
 * Note that this method is ignored in case supportsLocalTempTables() returns true.
 */
 public boolean supportsGlobalTempTables() {
     return false; // is this correct?
 } 
```

我的感觉是*我*应该`true`从. ?`supportsLocalTempTables()``FRED`*`FRED`*

 *我查阅[了 Informix 11.70 InfoCenter 主题](http://publib.boulder.ibm.com/infocenter/idshelp/v117/index.jsp?topic=%2Fcom.ibm.admin.doc%2Fids_admin_0520.htm)，但没有看到任何具体内容。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T01:45:19.963

是的。Informix 中的临时表对于会话来说是本地的，并且只对会话可见。此外，当会话关闭时，它的所有临时表都将被删除。因此，在不同的会话中，您可以创建具有相同名称的临时表。无法在会话之间共享对临时表的访问。*

# java - JSP 错误——应为等号

> ID：15145177
> 
> 赞同：15
> 
> 时间：2013-02-28T20:37:56.527
> 
> 标签：java, jsp

我对 JSP 比较陌生，我正在尝试在我的一个文件中使用 FormBean。当我尝试在本地 Tomcat 服务器上打开 JSP 页面时，我收到以下错误：

```
org.apache.jasper.JasperException: /entryForm.jsp (line: 4, column: 21) equal symbol expected 
```

我的代码的前五行是：

```
 <!DOCTYPE html>
    <%@ page import = "jared.simpledatabase.* %>

    <jsp:useBean id="form" class="jared.simpledatabase.FormBean" scope="session"/>
    <jsp:setProperty name="form" property="*"/> 
```

任何想法我做错了什么？谢谢！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-28T20:40:51.247

这是一个猜测 - 缺少双引号：

```
<%@ page import = "jared.simpledatabase.*" %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-27T17:55:27.757

就我而言，jsp:param 标记中缺少 " 例如

```
<jsp:param name="X" value="{$someValue}/> 
```

将其更改为 ... 解决了问题

```
<jsp:param name="X" value="{$someValue}"/> 
```

# math - Z3Py：从方程组生成抽象公式

> ID：15145189
> 
> 赞同：1
> 
> 时间：2013-02-28T20:38:35.753
> 
> 标签：math, constraints, z3, proof, theorem-proving

## 我的例子：*方程组*

***伪代码约束库***

```
 a = b+c
∧ e = a*c

∧ a = +2     ; some replaceable concrete values
∧ c = +18 
```

***解决方案***

```
 b = -16
∧ e = -32 
```

## 我想要的信息

在方程组中，我想获得以下知识：

**我可以用来从给定值（在约束基础中）**计算变量值（解决方案）的****抽象公式。****

 **（就像在高中，老师不仅想要看到结果，还想要这样一个转换的抽象公式。）

***像...这样的公式***

```
 b = a-c     ; is an equivalent transformation from `a = b+c`
∧ e = (a-c)*c ; is an term replacement `b → a-c` of `e = a*c` 
```

## 我的问题

如何使用**Z3Py**从 Z3 约束方程系统中检索此信息？

谢谢。- 如果有任何不清楚的地方，请评论什么是错的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T03:21:36.920

Z3 并不是提取此类信息的理想工具。在内部，它有一些模块（例如，高斯消元法、[Groebner Basis](http://en.wikipedia.org/wiki/Gr%C3%B6bner_basis)）可能对在特定情况下实现这种功能很有用，但它们没有在 Z3 API 中公开。 [Z3 源代码可在线获取。](http://z3.codeplex.com)

你描述的问题很有趣，但也不是微不足道的。一般来说，输入不仅仅是一组方程。此外，即使我们只有方程，但它们是非线性的，那么可能无法获得像您的问题中描述的那样的“已解决”形式。在非线性情况下，我们可以将方程组以三角形形式表示，但仅此而已。另一个问题是，即使解的数量是有限的，它也不像线性情况那样是唯一的。此外，一般来说，非线性方程组的解不能用根式表示。在内部，Z3 使用[实数代数](http://research.microsoft.com/en-us/um/people/leonardo/blog/2013/02/02/inf-trans.html)来表示解决方案。**

# php - 具有多种可能产品类型的特色产品？

> ID：15145197
> 
> 赞同：0
> 
> 时间：2013-02-28T20:38:59.217
> 
> 标签：php, database, symfony

我有 3 个不同的实体，它们都需要进入特色产品/实体/其他表格。问题是特色产品的类型可能是 entityA、entityB 或 entityC。我如何建模并为它制作 symfony2 形式？最好的方法是什么？

例如，一家汽车经销商需要选择特色产品，但产品可能是“摩托车”、“汽车”或“卡车”（所有这些都是三个类，有 3 个表存储它们的数据）。

我可以想到一个表，其中包含一对多的可空外键，并且只能使一个表不为空，但这对我来说似乎不正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:43:52.793

大声笑完全误解了这个问题，对不起。

无论如何，我认为相同的策略适用于您实际要求的内容。

表 'featured_products' object_ID FOREIGN KEY on 'objects'.'ID'

```
object_ID
1
2
3 
```

表“对象”这将只保存您的对象 ID

```
ID (AI)
1
2
3 
```

表'cars'：'objects'上的object_ID FOREIGN KEY。'ID'（没有自动增量！）

```
object_ID | name
1         | Ferrari
2         | Duckatti 
```

表“卡车”：“对象”上的 object_ID FOREIGN KEY。“ID”（无自动增量！）

```
object_ID | name
3         | Monster truck 
```

此设置意味着您还必须更改一些代码。因为您必须将 NULL 值插入对象并将 insert_ID 用于您的汽车、卡车等。

我从来没有真正尝试过这个。但是您可能会成功使用以下查询。

```
SELECT
   truck.name, car.name
FROM
   objects
LEFT JOIN trucks ON trucks.object_ID=objects.ID
LEFT JOIN cars ON cars.object_ID=objects.ID
WHERE objects.ID IN((SELECT * FROM featured_products))
GROUP BY objects.ID 
```

# django - 重复用户注册时如何显示错误信息？

> ID：15145200
> 
> 赞同：0
> 
> 时间：2013-02-28T20:39:01.140
> 
> 标签：django, validation

我知道这很简单，我尝试过广泛搜索，但没有任何效果:(

当我在我的 forms.py 中尝试这个时：

```
class RegistrationForm(forms.Form):
    email = forms.EmailField(unique = True, error_messages = {'unique':'Duplicate Error!')
    password = forms.CharField( widget = forms.PasswordInput(render_value = False), label = "Password") 
```

我收到一条错误消息： `init() got an unexpected keyword argument: unique`

我看到人们让它很容易工作，但显然我错过了一些东西。如何使用上面给出的表单和查看代码为用户注册添加自定义错误消息？我想在用户名字段旁边显示错误消息，就像该字段留空时显示的错误消息一样。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:06:08.970

使用表单上的 clean 方法来验证这一点：

```
from django.contrib.auth.models import User

class RegistrationForm(forms.Form):
    email = forms.EmailField()
    password = forms.CharField( widget = forms.PasswordInput(render_value = False),label = "Password")

    def clean(self):

        if User.objects.filter(email=self.cleaned_data['email']).exists():
            msg = _(u'Duplicate Error!')
            self._errors['email'] = ErrorList([msg])
            del self.cleaned_data['email']
        return self.cleaned_data 
```

# android - Android SDK Image view 浮动在 webview 之上

> ID：15145201
> 
> 赞同：1
> 
> 时间：2013-02-28T20:39:02.343
> 
> 标签：android, sdk

您添加到 xml 文件中的所有内容以允许 imageview 浮动在 webview 或相机视图等之上

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="#e2e1e3" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="40dp"
    android:src="@drawable/pm" 
    />

 <WebView
    android:id="@+id/webView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent" />

 </LinearLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:41:25.497

您需要使用不同的布局，例如`FrameLayout`或`RelativeLayout`。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="#e2e1e3" >

    <WebView
        android:id="@+id/webView1"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_centerInParent="true" />

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:src="@drawable/pm"
        android:layout_centerInParent="true" />

 </RelativeLayout> 
```

# jquery-ui-autocomplete - 如何让 jQuery UI 自动完成工作

> ID：15145205
> 
> 赞同：0
> 
> 时间：2013-02-28T20:39:23.020
> 
> 标签：jquery-ui-autocomplete

我知道，这里有大约 20 个问题提到了 jQuery UI 自动完成。我读了一堆，我仍然卡住了......

我正在尝试学习如何实现 jQuery UI 的自动完成功能，我正在学习[本教程](http://www.jensbits.com/2010/03/29/jquery-ui-autocomplete-widget-with-php-and-mysql/)，因为它似乎最接近我的需求以及我需要如何处理 PHP/MySQL 端。

我一直在那个 tut 和文档之间来回走动，我似乎无法让它工作。

我正在尝试设置（我认为是）一个简单的自动完成功能，从数据库查询中获取单个字段。

这是我目前拥有的 jQuery 代码：

```
$('input.urlSearch').autocomplete({
    source: '../scripts/branchAdmin.php',
    minLength: 3
}); 
```

这是PHP代码：

```
if (isset($_GET['term'])) {
    $searchTerm = mysqli_real_escape_string($_GET['term']);

    require_once('dbConnect.php');

    $fetch = mysqli_query("SELECT url FROM branches WHERE url LIKE '%" . $searchTerm . "%'");
    $returnArr = array();

    while($row = mysqli_fetch_array($fetch, MYSQLI_ASSOC)) {
        $rowArr['url'] = $row['url'];

        array_push($returnArr,$rowArr);
    }

    mysqli_close($dbc);

    header('Content-Type: application/json');
    echo json_encode($arr);
} 
```

这是文本框的 HTML

```
<td id="newBranchUrl" class="branchData">
    <input type="text" id="txtNewBranchUrl" class="urlSearch" />
</td> 
```

查询中的“url”字段实际上是一个简短的州字符串，在两个单词的州（例如北卡罗来纳州）的情况下，单词之间有一个破折号。

当我开始在文本框中输入时，什么也没有发生 - 无论我输入 test 我知道是否在数据库中。我也没有在控制台中看到任何网络活动（使用 Chrome）。

tut 确实让它*看起来*很简单！我在这里做错了什么？

# css - 如何使页面左上角的徽标与其下方的文本对齐？

> ID：15145206
> 
> 赞同：0
> 
> 时间：2013-02-28T20:39:25.620
> 
> 标签：css, position, css-float, alignment, padding

如何使页面左上角的徽标与其下方的文本对齐？此外，无论我制作的浏览器窗口大小如何，我都需要徽标与其下方的文本保持一致。我已尝试更改 block_header 类的填充、边距和浮动设置，但如果浏览器窗口未按正确大小打开，则徽标和文本未对齐。这是我的CSS：

```
.main {width:100%; padding:0; margin:0 auto; min-width: 1020px; overflow: hidden;}
.header { background:url(images/slider_bgpng200.png); background-repeat: repeat-x; padding:0; margin:0 auto; width: 100%; }
.header .headertop{width: 100%; background: #d3e5e8; height: 30px;}
.block_header {margin:0 auto; width:1200px; padding:0; border:none; }
.space { float:left; padding:0; margin:0; }
.header_text { width:200px; float:right; font:normal 11px Tahoma, Geneva, sans-serif; color:#9a9a9a; padding:6px 10px 10px 10px; margin:0; text-align:center;}
.slider { background: transparent; margin:0 auto; padding:0; height:420px;} 
.slider .gallery { margin:0 auto; width:980px; height:420px; padding:0;} 
.slider .textholder {padding-top: 110px; float: left; width: 44%; font-family: 'Roboto', sans-serif; font-size: 40px; color: #93a0a2;padding-left: 30px;}
.formbox{float: right; width: 48%; padding-top: 90px; padding-right: 40px;} 
```

这是html：

```
<div class="main">
 <div class="header">
   <div class="headertop"> <img src="images/avidestlogo50perresave.png"  border="0" alt="logo" />
     <div class="header_text"><a href="#">Email</a> | <a href="#">Client Login</a> 
     </div>
   </div>
  <div class="block_header">
      <div class="space"><a href="index.html"></a>
      </div>
      <div class="slider">
         <div class="gallery">
            <div class="textholder">
            &nbsp;&nbsp;&nbsp;&nbsp;Where Student and <br />
            &nbsp;&nbsp;&nbsp;Alumni Freelancers <br />&nbsp;&nbsp;Get Hired
            </div>
            <div class = "formbox">Form is here
            </div>
         </div>
      </div>
  </div>
 </div>
</div> 
```

该网站位于 avidest.com/schneer，因此您可以看到我在说什么。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:49:53.757

徽标通常设置为 CSS 背景。然后，您可以使用边距和内边距的组合来对齐包含背景的元素内的文本。

```
<div class="logo">Welcome to XYZ</div> 
```

CSS：

```
.title {
     background-image:url(...);
     background-repeat:no-repeat;
     height:60px;
     padding-left:50px; <-- move the text to the right of the logo
     padding-top:10px; <-- add a bit of whitespace at the top
     ...font styling etc...
} 
```

# c# - 如何播放 WPF 声音文件资源

> ID：15145209
> 
> 赞同：19
> 
> 时间：2013-02-28T20:39:46.437
> 
> 标签：c#, .net, wpf, media-player

我正在尝试在我的 WPF 应用程序中播放声音文件。目前我有以下电话：

```
private void PlaySound(string uriPath)
{
    Uri uri = new Uri(@"pack://application:,,,/Media/movepoint.wav");
    var player = new MediaPlayer();
    player.Open(uri);
    player.Play();
} 
```

现在，如果我指定`Media/movepoint.wav`为构建操作`Content`并将其加载为相对或绝对文件路径，它工作正常，所以我怀疑这与`Pack URI`.

目标是将文件存储为资源，使其在输出目录中不可用。我可以提供 WAV 副本或 MP3 副本。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T22:48:05.900

我尝试使用图像文件进行此操作，就 uri 而言，它与声音文件的工作方式相同，因为它只是另一种资源。我使用了下面的代码，它基本上与你所拥有的相匹配。

```
new Uri(@"pack://application:,,,/Resources/logo.png") 
```

确保您的“媒体”文件夹没有嵌套在任何其他文件夹中。如果是，您还需要包含该文件夹。

使用 .NET Framework 4.0、VS2012。

[这个链接](http://msdn.microsoft.com/en-us/library/aa970069.aspx)很好地描述了整个“包装”方案。

**编辑**

对此主题的更多研究似乎表明，您想要做的事情可能无法使用音频或视频文件。下面的摘录摘自[此 MSDN 页面](http://msdn.microsoft.com/en-us/library/vstudio/system.windows.media.mediaplayer%28v=vs.100%29.aspx)的备注部分。

> 尽管您可以在可扩展应用程序标记语言 (XAML) 中声明此类的实例，但您无法在不使用代码的情况下加载和播放其媒体。若要仅在 XAML 中播放媒体，请使用 MediaElement。此外，如果您在 XAML 中声明一个实例，则唯一的实际用途是为 Player 属性填充属性元素语法。
> 
> **使用应用程序分发媒体时，不能将媒体文件用作项目资源。在您的项目文件中，您必须改为将媒体类型设置为 Content 并将 CopyToOutputDirectory 设置为 PreserveNewest 或 Always。**
> 
> MediaPlayer 可以在两种不同的模式下使用，具体取决于驱动播放器的内容：独立模式或时钟模式。在独立模式下，MediaPlayer 类似于图像，通过 Open 方法打开的媒体驱动播放。在 Clock 模式下，MediaPlayer 可以被认为是动画的目标，因此它在控制播放的 Timing 树中有相应的 Timeline 和 Clock 条目。有关媒体模式的更多信息，请参阅多媒体概述。
> 
> MediaPlayer 与 MediaElement 的不同之处在于它不是可以直接添加到应用程序的用户界面 (UI) 的控件。要显示使用 MediaPlayer 加载的媒体，必须使用 VideoDrawing 或 DrawingContext。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-16T06:45:01.593

以下似乎适用于 .NET Framework 4.5：

```
var sri = Application.GetResourceStream(new Uri("pack://application:,,,/MyAssemblyName;component/Resources/CameraShutter.wav"));

if ((sri != null)) 
{
  using (s == sri.Stream) 
  {
    System.Media.SoundPlayer player = new System.Media.SoundPlayer(s);
    player.Load();
    player.Play();
  }
} 
```

`CameraShutter.wav`**在我的项目中作为Resource**嵌入（并位于 Resources 子文件夹中，如包 URI 中所示）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-11-08T18:52:07.500

如果 .wav 文件是嵌入式资源，您还可以将 Stream 加载到 SoundPlayer。请注意，在此示例中，资源位于`Resources`项目根目录中名为的文件夹中，这就是编写它的原因`{0}.Resources.{1}`。

```
//the wav filename
string file = "emergency_alarm_002.wav";

//get the current assembly
var assembly = System.Reflection.Assembly.GetExecutingAssembly();

//load the embedded resource as a stream
var stream = assembly.GetManifestResourceStream(string.Format("{0}.Resources.{1}", assembly.GetName().Name, file));

//load the stream into the player
var player = new System.Media.SoundPlayer(stream);

//play the sound
player.Play(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-21T15:23:37.947

This also seems to work and is maybe simpler to remember than that long line of pack or assembly stuff.. I opened the Resources.resx and dragged a sound file in there called aa_pickup.wav Then set the properties of it to Copy to Output Dir = Copy Always.

```
System.IO.Stream str = Properties.Resources.aa_pickup;
System.Media.SoundPlayer snd = new System.Media.SoundPlayer(str);
snd.Play(); 
```

Now.. if I could only work out how to change the volume.

# jquery - 输入消失的 Jquery 对话框

> ID：15145212
> 
> 赞同：0
> 
> 时间：2013-02-28T20:40:06.510
> 
> 标签：jquery, jquery-ui

我有以下内容：

```
$(function(){
      // initialize dialogs for every row

$( ".new_dag").each(function(index){
    var this_id = index+1;
    $(this).attr("id", 'add_table_'+this_id);           
    $(this).dialog({
        autoOpen: false,
            height: 200,
            width: 260,
            resizable: true,
            draggable: true,
            modal: false,
            show: "blind",
            hide: "puff",
            title: "Additional Information on line "+this_id
    }); 
});

$('a#open_add').on('click', function(){
    var id = $(this).parents('tr').attr('id');
    $("div#add_table_"+id).dialog("open");
});

});

<form id="new" method="POST">
   <div class="new_dag" id="add_table_<?php echo $g; ?>">
      <table width="100%" border="1"  >
        <tr>
          <td height="22" colspan="2" align="center"><strong>Additional Information</strong></td>
          </tr>
        <tr>
          <td>E.D.L:</td>
          <td><input name="edl[]" size="15"  type="text"  /></td>
        </tr>
        <tr>
          <td>E.O:</td>
          <td><input name="eo[]" size="15" type="text"  /></td>
        </tr>
        <tr>
          <td>R.F.C:</td>
          <td><input name="rfc[]" size="15" type="text"  /></td>
        </tr>
      </table>
   </div> 
</form> 
```

这里发生的情况是，当单击链接时，会出现一个对话框，其中包含类“new_dag”的 div 中包含的信息。但是，一旦出现该对话框并填写输入中包含的信息，它们就永远不会发布。就好像这些输入以某种方式从表单中删除了……如果可能的话……

我怎样才能避免这种情况？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:52:40.863

创建对话框时，它会自动附加到`body`. 您可以使用参数指定放置它的位置[`appendTo`](http://api.jqueryui.com/dialog/#option-appendTo)。

# vb.net - 在 VB.NET 中获取和设置

> ID：15145217
> 
> 赞同：1
> 
> 时间：2013-02-28T20:40:23.243
> 
> 标签：vb.net

*我觉得很难在这里提出这个问题，因为我认为我无法为这个社区提供任何回报。*我目前正在编写一个应用程序，一旦启动，它就会要求用户登录。如果用户输入的数据与数据库中的数据匹配，则用户已登录。然后应用程序从数据库中获取有关用户的数据，例如用户 ID、姓名、角色。

现在我希望这些信息在应用程序中广泛使用。我现在的情况：

*   解决方案
    *   可执行文件（主项目）
    *   Database.dll（类等）

在 database.dll 中，我有以下类：

```
Public Class SessionProfile
Public _gebruikersID As String
Public _gebruikersNaam As String
Public _gebruikersRole As String

Public Property gebruikersID() As String
    Get
        Return _gebruikersID
    End Get

    Set(ByVal value As String)
        _gebruikersID = value
    End Set
End Property

Public Property gebruikersNaam() As String
    Get
        Return _gebruikersNaam
    End Get

    Set(ByVal value As String)
        _gebruikersNaam = value
    End Set
End Property

Public Property gebruikersRole() As String
    Get
        Return _gebruikersRole
    End Get

    Set(ByVal value As String)
        _gebruikersRole = value
    End Set
End Property
End Class 
```

在我的主要可执行文件中，我将此类称为如下：`Dim SessionProfile As New Database.SessionProfile()`在我的登录表单中，我使用以下代码设置设置器：

```
If loginResult = 1 Then
     SessionProfile.gebruikersID = SQLHook.Results("SELECT * FROM tblgebruikers WHERE GebruikersNaam = '" & TextGebruikersNaam.Text.Replace("'", "''") & "'", "GebruikersID")
     SessionProfile.gebruikersNaam = SQLHook.Results("SELECT * FROM tblgebruikers WHERE GebruikersNaam = '" & TextGebruikersNaam.Text.Replace("'", "''") & "'", "gebruikersNaam")
     SessionProfile.gebruikersRole = SQLHook.Results("SELECT * FROM tblgebruikers WHERE GebruikersNaam = '" & TextGebruikersNaam.Text.Replace("'", "''") & "'", "gebruikersRole")
     DialogResult = DialogResult.OK
Else
     SessionProfile.gebruikersID = ""
     SessionProfile.gebruikersNaam = ""
     SessionProfile.gebruikersRole = ""
     DialogResult = DialogResult.NO
End If 
```

现在我回到我的主要形式并使用例如`MsgBox(SessionProfile.GebruikersNaam)`，我没有得到任何回报。

这个理论不起作用是有原因的还是我做错了什么？查询很好，因为如果您将它们调暗为字符串并将它们添加到 msgbox 中，它会显示正确的文本。

有人可以帮我解决我的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:01:09.347

您发布的代码似乎没有任何问题，可以解释您面临的问题，因此您可能希望将代码发布在您的主表单和登录表单上，以便我们看看有什么问题正在进行。

但是，如果您有时间进行快速代码审查，我建议您将本地字段的范围限定为类私有，因为您通过公共属性公开它们。这将有助于“保护”字段中的数据免受外部来源修改数据的影响，而无需访问您的设置器。

所以这：

```
Public Class SessionProfile
Public _gebruikersID As String
Public _gebruikersNaam As String
Public _gebruikersRole As String

Public Property gebruikersID() As String
    Get
        Return _gebruikersID
    End Get

    Set(ByVal value As String)
        _gebruikersID = value
    End Set
End Property ... 
```

真的应该是这样的：

```
Public Class SessionProfile
'Limit the scope to be private to the class;
private _gebruikersID As String
private _gebruikersNaam As String
private _gebruikersRole As String

Public Property gebruikersID() As String
    Get
        Return _gebruikersID
    End Get

    Set(ByVal value As String)
        _gebruikersID = value
    End Set
End Property ... 
```

其次，也许更重要的是，您应该真正使用[参数化的 sql 语句](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)，而不是用户输入文本的字符串连接。我知道您正在使用已安装的应用程序，但仍然是一个很好的做法。

这些建议都不会帮助您解决最初的问题，因此请务必在有问题的两种表单上发布有关代码的更多详细信息，以便我们解决手头的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:57:17.467

如果我正确理解您的情况，您将处于以下情况。

在主可执行文件中，您在某处声明了一个变量（我将更改名称以便更好地解释）

```
Dim currProfile As New Database.SessionProfile() 
```

这意味着您已经创建了一个 SessionProfile 类型的变量，现在您调用 frmLogin

```
Dim form1 As new frmLogin()
if DialogResult.OK = form1.ShowDialog() then
    MsgBox(curProfile.GebruikersNaam) ' shows nothing' 
```

在 frmLogin 你已经声明了一个新的（不同的）变量

```
Dim profile As New Database.SessionProfile() 
```

这个变量是一个不同的变量，与主窗体中声明的变量没有任何共享，设置它的属性并不意味着另一个 SessionProfile 变量看到这些变化。
您需要将第一个变量传递给 frmLogin。也许在构造函数中。

```
Dim form1 As new frmLogin(currProfile)
if DialogResult.OK = form1.ShowDialog() then
    MsgBox(curProfile.GebruikersNaam) ' shows the name' 
```

并在 frmLogin 构造函数中接收并存储传入的变量

```
Dim profile As SessionProfile = Nothing
Public Sub New(ByVal p As SessionProfile)
    profile = p
    InitializeComponent()
End Sub 
```

现在，当您在内部 (frmLogin) 配置文件变量上设置属性时，您正在设置主窗体中使用的同一实例的属性。
顺便说一句，避免用你的类的同名来调用你的变量。真的很混乱

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:50:53.287

如果一次只能返回一个值，您的数据库查询似乎过于笼统。您只需进行一次查询即可获取所需的所有数据：

```
Dim sp As SessionProfile = Nothing

If loginResult = 1 Then
    Dim sqlConnStr = "your sql connection string"

    Dim nResults As Integer = 0
    Using sqlConn = New SqlConnection(sqlConnStr)

        ' N.B. always select only what you need, and always select explicitly
        Dim sql = "SELECT GebruikersID, gebruikersNaam, gebruikersRole FROM tblgebruikers WHERE GebruikersNaam = @Naam"

        Dim sqlCmd = New SqlCommand(sql, sqlConn)
        sqlCmd.Parameters.AddWithValue("@Naam", TextGebruikersNaam.Text)

        sqlConn.Open()

        Dim rdr = sqlCmd.ExecuteReader
        While rdr.Read
            sp = New SessionProfile With {.gebruikersID = rdr.GetString(0), _
                                          .gebruikersNaam = rdr.GetString(1), _
                                          .gebruikersRole = rdr.GetString(2)}

            nResults += 1
        End While

    End Using

    If nResults <> 1 Then
        Throw New Exception(String.Format("User {0} is in database more than once.", TextGebruikersNaam.Text))
    End If

    If sp IsNot Nothing Then
        ' sp now contains the session profile
    End If

End If 
```

通过使用 SQL 参数，您无需对撇号等字符进行特殊处理 - 请注意该代码如何不使用 .Replace("'", "''")。

# jquery - 抓取可见的 div 的类，然后添加一个 . 到找到的每个班级的前面

> ID：15145219
> 
> 赞同：3
> 
> 时间：2013-02-28T20:40:27.373
> 
> 标签：jquery

试图获取`divs`可见的类名，然后`prepend`获取我得到的类名的小数。任何帮助都会很棒，谢谢。

这是我到目前为止所拥有的。

```
$('#imagefiles ul li img').click(function() {
    var open = $(".open:visible").attr("class");
    var n = open.split(",");
    alert(n);
}); 
```

只有一个`div`是可见的，并且`div`有两个类名。
像这样获取类名的全部意义在于，我可以`append`将图像放到打开的文件夹`<div class="edititable">`中。当我尝试这段代码时，什么也没有发生。有什么想法吗？

```
$('#imagefiles ul li img').click(function() {
    //Get the source of the image that was clicked
    var img = $(this).attr('src');

    //Grab the class name of the opened folder and prepend a decimal to it.
    var classes = $(".open:visible").attr("class").split(" ");
    var classesWithDot = "";

    $.each(classes, function (index, value) {
        classesWithDot += " ." + value;
    });

    $(' + classesWithDot + ').find('.edititable').append('<img src="' + img + '" style="width:30%; height:30%;" ">');

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:43:42.277

这个怎么样？小提琴：http: [//jsfiddle.net/wf9u9/](http://jsfiddle.net/wf9u9/)

```
$('#imagefiles ul li img').click(function() {
   var classes = $(".open:visible").attr("class").split(" ");
   var classesWithDot = "";

   $.each(classes, function (index, value) {
       classesWithDot += " ." + value;
   });

   alert(classesWithDot);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:52:21.023

假设有多个 DIV，并且您想要聚合所有唯一的类名。

```
var result = [];
var uniqueClasses = {};
$(".open:visible").each(function() {
    var lst = $(this).attr('class').split(/\s+/); // this.className would also work
    for(var i=0; i<lst.length; i++)
        uniqueClasses[lst[i]] = true;
});
for(var k in uniqueClasses)
   result.push("." + k);
console.log(result);
console.log(result.join("")); 
```

# python - Python - 正则表达式辅助

> ID：15145222
> 
> 赞同：0
> 
> 时间：2013-02-28T20:40:40.640
> 
> 标签：python, regex

我想知道是否可以在提出正则表达式时获得一些帮助。我有一个文件，其中包含一长串各种别名和别名转发到的电子邮件地址。该文件的格式如下：

别名：something@gmail.com
alias2:something2@gmail.com
alias3:something3@gmail.com
alias4:something4@gmail.com
alias5:something5@gmail.com

如何编写正则表达式来获取冒号之前的部分（别名、别名 2 等）？抱歉，如果这是一个非常简单的问题，我是 Python 新手。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:44:03.977

这是它的列表理解

```
first_parts = [
    line.split(':')[0]
    for line in file("addresses.txt").readlines()
    if ':' in line
] 
```

它类似于这个

```
first_parts = []
lines = file("addresses.txt").readlines()
for lines in lines:
    if ":" in line:
        first = line.split(":")[0]
        first_parts.append(first) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:04:39.560

我建议你使用`split()`这个问题，因为你有一个非常明显的分隔符。但是，这是使用正则表达式的解决方案：

```
lines = open(filename).readlines()
regex = re.compile("(.*):.*@gmail\.com")
aliases = [m.group(1) for m in map(lambda x: regex.match(x), lines) if m] 
```

# asp-classic - IIS 7.5 上基于表单的身份验证中的会话超时

> ID：15145225
> 
> 赞同：0
> 
> 时间：2013-02-28T20:40:47.470
> 
> 标签：asp-classic, iis-7.5, forms-authentication, session-timeout

我正在尝试对部署在 IIS 7.5 上的经典 ASP 应用程序使用基于表单的身份验证。我有一个登录页面，它接受用户输入的用户名和密码，并针对 Active Directory 进行身份验证，如果通过身份验证，则将用户发送到应用程序。

在 global.asa 文件中，我在 Session_OnStart 方法中的 Session 中放置了一个变量。

Sub Session_OnStart Session("Timeout") = 1 End Sub

在我的所有屏幕上都存在的我的 asp 包含页面中，我有以下元标记，它工作正常。

下面是 Web.config 文件。服务器端会话超时似乎不起作用。会话状态仍然存在（当我打印 Session("Timeout") 它仍然具有值 1），在一分钟后..请告知。仅供参考，我没有使用 LDAP Membership 提供程序，目前只是为它编写代码。不确定这是否与它有关。请指教！

```
<system.webServer>
    <directoryBrowse enabled="false" />
</system.webServer>

<system.web>

    <compilation debug="true" />

    <authentication mode="Forms">           
        <forms cookieless="UseDeviceProfile" loginUrl="Login.asp" name=".ASPXAUTH" protection="All" requireSSL="false" timeout="1" />
    </authentication>

    <authorization>
        <deny users="?" />
        <allow users="*" />
    </authorization>

    <identity impersonate="false" />

    <sessionState cookieless="UseDeviceProfile" mode="InProc" regenerateExpiredSessionId="false" timeout="1" /> 
```

# java - 基数排序和计数排序

> ID：15145228
> 
> 赞同：0
> 
> 时间：2013-02-28T20:40:58.720
> 
> 标签：java, count, radix-sort

我现在正在研究实现计数排序的基数排序。我想我在很大程度上理解并遵循了伪代码，但是我得到了一个数组越界错误：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 12
    at RunRadixSort.radixSort(RunRadixSort.java:47)
    at RunRadixSort.main(RunRadixSort.java:15) 
```

我的代码

```
import java.text.DecimalFormat;
    import java.util.Arrays;

   import java.text.DecimalFormat;
import java.util.Arrays;

public class RunRadixSort {

    public static void main(String[] args) {

        int[] sortNumbers = {4,5,6,2,3,7,2,1,23,5,13};
        int[] sorted = new int[sortNumbers.length];
        DecimalFormat df = new DecimalFormat("#.########");
        int max = getMax(sortNumbers);
        long timeStart = System.nanoTime();
        sorted = radixSort(sortNumbers, max);
        long timeEnd = System.nanoTime();
        long elapsedTime = timeEnd - timeStart;
        double time = (double)elapsedTime / 1000000;
        System.out.println(Arrays.toString(sorted));
        System.out.println("\nTotal Execution Time: " + df.format(time)+ " miliseconds");
    }

    public static int getMax(int[] A){
        int max = A[0];
        for(int i = 1; i < A.length; i++){
            if(A[i] > max){
                max = A[i];
            }
        }
        return max;
    }

    public static int[] radixSort(int[] A, int d){
        int[] B = new int[A.length];
        int[] C = new int[d + 1];
        for(int i = 0; i < d; i++){
            for(int k = 0; k < A.length; k++){
                C[A[k]]++;
            }
            int total = 0;
            for(int l = 0; l < d; l++){
                int temp = C[l];
                C[l] = total;
                total += temp;
            }
            for(int m = 0; m < A.length; m++){
                B[C[A[m]]] = A[m];
                C[A[m]]++;
            }
        }
        return B;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:44:26.860

你没有增加 j。这可能是一个错字：

```
 for(int j = 0; j < d; i++){ 
```

尝试这个：

```
for(int j = 0; j < d; j++){ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:22:15.673

在行`for(int j = 0; j < d; i++){`

它应该是`for(int j = 0; j < d; j++){`

此外，`C[A[k]] = C[A[k]] + 1;` 当 k=8 和 A[K]=23 行时，您将得到一个 ArrayOutOfBoundsException ，因为当 C[] 被声明时，它被声明为长度为 23 的数组，您只能从 0 到 22 进行索引。值的实际范围应包括 0 到最大值。

因此，您需要将 C[] 声明为`int[] C = new int[d+1];`或存储到 中的值 `C[A[k]-1] = C[A[k]-1] + 1;`，具体取决于您是否将零视为输入数组 sortNumbers 中的可接受值。

然而，问题和代码发生了变化。这段代码对这些值求和，并逐渐将它们添加到数组 C 中。

```
 for(int l = 0; l < d; l++){
            int temp = C[l];
            C[l] = total;
            total += temp;
        } 
```

然后下一个区块

```
 for(int m = 0; m < A.length; m++){
            B[C[A[m]]] = A[m];
            C[A[m]]++;
        } 
```

使用数组 C 中条目的值作为数组 B 中的索引，但 B 与数组 A 的大小相同。

您确定 C 应该保存值的总和而不是值出现的总和吗？

# android - Android AudioTrack 错误：未初始化的 AudioTrack

> ID：15145229
> 
> 赞同：0
> 
> 时间：2013-02-28T20:40:58.940
> 
> 标签：android, audiotrack

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    int minBufferSize = AudioTrack.getMinBufferSize(44100, AudioFormat.CHANNEL_CONFIGURATION_MONO, 
            AudioFormat.ENCODING_PCM_16BIT);

  audioTrack = new AudioTrack(AudioManager.STREAM_MUSIC, 44100, AudioFormat.CHANNEL_CONFIGURATION_MONO, 
        AudioFormat.ENCODING_PCM_16BIT, minBufferSize, AudioTrack.MODE_STREAM); 

    playfilesound();
}

private void playfilesound() throws IOException
{

    int count = 512 * 1024; // 512 kb
    //Reading the file..
    byte[] byteData = null; 
    File file = null; 
    file = new File(Environment.getExternalStorageDirectory().getAbsolutePath() + "/"+"recordsound");    //filePath

    byteData = new byte[(int)count];
    FileInputStream in = null;
    try {
    in = new FileInputStream( file );

    } catch (FileNotFoundException e) {
    // TODO Auto-generated catch block
    e.printStackTrace();
    }

    int bytesread = 0, ret = 0;
    int size = (int) file.length();
    audioTrack.play();

    while (bytesread < size) {    // Write the byte array to the track 
        ret = in.read( byteData,0, count);   //ret =size in bytes

        if (ret != -1) {
            audioTrack.write(byteData,0, ret);
            bytesread += ret; }  //ret
        else break; 

    }   //while

    in.close();
   audioTrack.stop(); audioTrack.release();
    } 
```

我使用调试器单步执行代码并将鼠标悬停在 audioTrack 上方，它已分配并初始化。该文件也存在。

但是当它点击 audioTrack.play() 时，它会抛出一个错误，说它的非法状态异常，未使用的 AudioTrack。

我附上了包含录音文件部分的项目。 [http://www.mediafire.com/?6i2r3whg7e7rs79](http://www.mediafire.com/?6i2r3whg7e7rs79)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-02-02T00:24:17.520

您使用的频道的配置已停止，代替`AudioFormat.CHANNEL_CONFIGURATION_MONO`Uses `AudioFormat.CHANNEL_IN_MONO`To record and `AudioFormat.CHANNEL_OUT_MONO`play...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T15:21:07.243

看起来你在写之前就打电话了！尝试这个 ...

```
int bytesread = 0, ret = 0;
int size = (int) file.length();
//audioTrack.play();  <---- play called prematurely

while (bytesread < size) {    // Write the byte array to the track 
    ret = in.read( byteData,0, count);   //ret =size in bytes

    if (ret != -1) {
        audioTrack.write(byteData,0, ret);
        bytesread += ret; 
        audioTrack.play(); //<--- try calling it here!
    }  //ret
    else break; 

}   //while 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-23T01:30:09.900

您在这里遇到的问题不止一个：

*   已停产的频道部分尚未得到答复。
*   不要在 UI 线程上播放音频！

*还请格式化您的代码。*

编辑：我还添加了

```
android.os.Process.setThreadPriority(android.os.Process.THREAD_PRIORITY_AUDIO); 
```

使播放更柔和。然后您可以再次将其设置为默认值：

```
android.os.Process.setThreadPriority(Process.THREAD_PRIORITY_DEFAULT); 
```

# apache-flex - 使用 Maven/FlexMojos 4.2 beta 运行 AIR 应用程序测试

> ID：15145230
> 
> 赞同：1
> 
> 时间：2013-02-28T20:41:08.637
> 
> 标签：apache-flex, air, argument-dependent-lookup, flexmojos, flex-mojos

我有 Maven 模块，它是一个 AIR 应用程序。我使用 FlexMojos 插件（4.2-beta 版）。

**编辑**：*进一步调查显示问题是用于测试的描述符`TestRunner.xml`具有 AIR 2.6 命名空间，而我`adl`的是 3.6 版。因此，我需要一种方法来控制这个版本或整个描述符。*

运行测试目标时，我总是收到此错误：

`[ERROR] Failed to execute goal org.sonatype.flexmojos:flexmojos-maven-plugin:4.2-beta:test-run (default-test-run) on project mobile-app: Unexpected return code 9`

这是我的构建配置（`flex.sdk.version=4.5.1.21328`）

```
<plugin>
    <groupId>org.sonatype.flexmojos</groupId>
    <artifactId>flexmojos-maven-plugin</artifactId>
    <version>${flexmojos.version}</version>
    <extensions>true</extensions>
    <dependencies>
        <dependency>
            <groupId>com.adobe.flex</groupId>
            <artifactId>compiler</artifactId>
            <version>${flex.sdk.version}</version>
            <type>pom</type>
        </dependency>
        <dependency>
            <groupId>com.adobe.flex.compiler</groupId>
            <artifactId>adt</artifactId>
            <version>${flex.sdk.version}</version>
            <scope>compile</scope>
        </dependency>
    </dependencies>
</plugin> 
```

使用`mvn test -X`，我可以看到调用了 ADL：

`[DEBUG] [LAUNCHER] exec: [adl] - /XXX/mobile-app/target/test-classes/TestRunner.xml`

据我所知，来自 adl 的错误代码 9 表示：`The main application content file is not a valid SWF or HTML file.`.

我错过了什么？任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:38:42.663

不幸的是，我发现控制 Adob​​e AIR 版本的最佳方法是将 FlexMojos 升级到 5.1-beta。此版本接受一个参数`flex.airVersion`，然后将其写入描述符中。

# javascript - 需要从 json 创建 javascript 数组

> ID：15145233
> 
> 赞同：0
> 
> 时间：2013-02-28T20:41:17.510
> 
> 标签：javascript, jquery, ajax, json

我需要帮助将此 json 字符串转换为 javascript 数组。

我试过这样的事情：

```
var cityState = $.map(source, function (value) { return value; }); 
```

其中“source”是这个 ajax 调用的结果：

```
$.ajax({
    url: 'http://localhost:49858/Default.aspx/getstuff',
    dataType: 'json',
    type: "POST",
    data: "{}",
    contentType: "application/json; charset=utf-8"
}).done(function (source) { ... 
```

但它只是无法正常工作。

```
 {"query": "Unit","suggestions":[{"value":"FAIRFIELD, CONNECTICUT","data":"FAIRFIELD, CONNECTICUT"},{"value":"LONG BEACH, CALIFORNIA","data":"LONG BEACH, CALIFORNIA"},{"value":"NEW YORK, NEW YORK","data":"NEW YORK, NEW YORK"},{"value":"HONOLULU, HAWAII","data":"HONOLULU, HAWAII"},{"value":"KANSAS CITY, MISSOURI","data":"KANSAS CITY, MISSOURI"},{"value":"SAN JOSE, CALIFORNIA","data":"SAN JOSE, CALIFORNIA"},{"value":"SOUTH LAKE TAHOE, CALIFORNIA","data":"SOUTH LAKE TAHOE, CALIFORNIA"},{"value":"LAKE DALLAS, TEXAS","data":"LAKE DALLAS, TEXAS"},{"value":"BROOMFIELD, COLORADO","data":"BROOMFIELD, COLORADO"},{"value":"BROOMFIELD, COLORADO","data":"BROOMFIELD, COLORADO"}]} 
```

console.log(source) 的屏幕截图显示： ![在此处输入图像描述](../Images/6d4081c62bfa8a7fbfb64ef6a7d2c775.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:44:03.203

这是你得到的一个奇怪的物体。看起来您将某个对象编码为 JSON，将其设置为对象属性的值，然后再次对其进行编码。

如果您想获得所有数组的`value`数组`suggestions`，那么您可以这样做

```
var values = $.map(JSON.parse(source.d).suggestions, function(v){ return v.value }); 
```

# android - 在布局中部分滑动视图

> ID：15145234
> 
> 赞同：1
> 
> 时间：2013-02-28T20:41:19.953
> 
> 标签：android

我在布局中有两个视图。单击视图 1 中的按钮时，第二个视图必须可见，并且必须将视图 1 拖入（尽管不完全）。如果不清楚，我很抱歉。为了简化我的工作附上一些图片。![在此处输入图像描述](../Images/91b31ffb4b8a7def3be29181f9381197.png)

当我点击按钮 2 时；视图 1 变为可见（白色视图）并且应该占据大约 85% 的屏幕，并且只有一部分蓝色球应该在屏幕上可见。到目前为止我所做的是我已将视图 1 的权重设为 0.2 和将 2 视为 0.80。并且查看 1 已消失。在按钮单击（按钮 2）上，我已将视图 1 设为可见。这工作正常，但我希望只有部分蓝色球在屏幕上可见，但是蓝色球出现挤压而不是只有球的一部分可见。有人可以告诉我我在这方面做错了什么吗？或者有其他方法可以做到这一点吗？提前谢谢如果有人可以帮助我！！！

我的xml文件如下：

```
<LinearLayout
        android:id="@+id/rootlayout"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="horizontal"
        android:weightSum="1"
    >

    <LinearLayout
                android:id="@+id/bbb"
                android:layout_width="0dp"
                android:layout_height="match_parent"
                android:layout_weight="0.9"

               >
          <include
                android:id="@+id/background_template_top"
                android:layout_width="match_parent"
                android:layout_height="wrap_content"
                layout="@layout/menuitems"
           />

    </LinearLayout>

<RelativeLayout
    android:id="@+id/parentlayout"
    android:layout_width="0dp"
    android:layout_height="match_parent"
    android:orientation="vertical"
     android:layout_weight="0.1"
   >

   <include
        android:id="@+id/background_template_top"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        layout="@layout/template_top"
        android:layout_alignParentTop="true"
        >

     </include>

   <RelativeLayout
       android:id="@+id/parent_middle_botom"
       android:layout_width="match_parent"
       android:layout_height="match_parent"
       android:layout_below="@+id/background_template_top"
       >

<RelativeLayout
    android:id="@+id/middle"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="@drawable/black_strip_med"
    android:layout_below="@+id/background_template_top"
    >

    <LinearLayout
        android:id="@+id/text_data"
        android:layout_width="wrap_content"
       android:layout_height="wrap_content" 
       android:layout_centerInParent="true"
        android:layout_toRightOf="@+id/imageView1"
        android:layout_marginLeft="30dp"
        android:orientation="vertical"
        >

         <TextView
        android:id="@+id/welcome"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Welcome,"
        android:textColor="#FFFFFFFF"
        android:textSize="20sp"
          android:singleLine="true"
        >

    </TextView>

    <TextView
        android:id="@+id/name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Joyson"
        android:layout_below="@+id/welcome"
          android:textColor="#FFFFFFFF"
        android:textSize="24sp"
        android:singleLine="true"
        >
    </TextView>

        </LinearLayout>

    </RelativeLayout>

     <include
        android:id="@+id/background_template_bottom"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        layout="@layout/template_bottom"
       android:layout_below="@+id/middle"
       >
      </include>

     <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" 
        android:layout_alignParentTop="true"
        android:background="@drawable/round_sm_device"
        android:layout_marginLeft="20dp"
        android:layout_marginTop="10dp"

        />

          <RelativeLayout
         android:id="@+id/details"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_below="@+id/imageView1"
         android:layout_marginLeft="28dp"
         >
         <ImageView
         android:id="@+id/imageView2"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"

         android:src="@drawable/btn_on_small" />

         <TextView
         android:id="@+id/currentbatch"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:text="Current Batch :"
         android:layout_toRightOf="@+id/imageView2"
         android:textSize="20dp"
         android:textStyle="bold"
           android:singleLine="true"
         />

         <ImageView
         android:id="@+id/dummy"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:src="@drawable/btn_on_small" 
        android:layout_below="@+id/imageView2"
        android:visibility="invisible"
         />
         <TextView
             android:id="@+id/count"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:layout_below="@+id/currentbatch"
             android:text="0"
            android:layout_toRightOf="@+id/dummy"
            android:layout_marginLeft="4dp"
            android:layout_marginTop="4dp"
             >
             </TextView>

    <TextView
             android:id="@+id/Transaction"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="Transactions |"
            android:layout_toRightOf="@+id/count"
            android:layout_marginLeft="4dp"
            android:layout_below="@+id/currentbatch"
             android:layout_marginTop="4dp"
             android:textSize="15sp"
               android:singleLine="true"
             >
             </TextView>

         <TextView
             android:id="@+id/value"
             android:layout_width="wrap_content"
             android:layout_height="wrap_content"
             android:text="$ 0.00"
            android:layout_toRightOf="@+id/Transaction"
            android:layout_marginLeft="4dp"
            android:layout_below="@+id/currentbatch"
             android:layout_marginTop="4dp"
             android:textSize="15sp"
               android:singleLine="true"
             >
             </TextView>

       </RelativeLayout>

     <RelativeLayout
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
         android:layout_alignParentBottom="true"
         android:background="@drawable/welcome_bg_small"
         >
      </RelativeLayout>

     </RelativeLayout>
    </RelativeLayout>

</LinearLayout>
</RelativeLayout> 
```

这是我包含的文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

     <ScrollView 
        android:layout_height="wrap_content"
        android:layout_width="match_parent"
        android:layout_centerHorizontal="true"
         android:scrollbars="none"
         android:layout_marginTop="14dp">

<RelativeLayout
    android:id="@+id/parentlayout"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
   >

   <LinearLayout
       android:id="@+id/creditcard_functions"
       android:layout_width="match_parent"
       android:layout_height="wrap_content"
       android:background="@drawable/med_black_strip"
       android:orientation="vertical"
       >
       <TextView
           android:id="@+id/reporting"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="Reporting"
           android:textColor="#FFFFFFFF"
           android:paddingLeft="8dp"
           android:textSize="20dp"
           android:textStyle="bold"
           >
         </TextView>

       <TextView
            android:id="@+id/functions"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text="Functions"
           android:textColor="#FFFFFFFF"
           android:paddingLeft="8dp"
           android:textSize="20dp"
             android:textStyle="bold"
          >
        </TextView>
    </LinearLayout>

    <RelativeLayout
        android:id="@+id/sale"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/creditcard_functions"
        android:background="@drawable/med_black_strip"

        >
        <ImageView
            android:id="@+id/sale_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:background="@drawable/balance_inquiry_icon"
            android:layout_centerVertical="true"
            android:layout_marginLeft="10dp"
            >
        </ImageView>

        <TextView
            android:id="@+id/saletext"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Sale"
            android:layout_centerInParent="true"
            android:textColor="#FFFFFFFF"
            android:textSize="25sp"
            android:textStyle="bold"
            >

            </TextView>

        </RelativeLayout>

    <RelativeLayout
        android:id="@+id/authorizeonly"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/sale"
        android:background="@drawable/med_black_strip"

        >
        <ImageView
            android:id="@+id/authorize_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:background="@drawable/balance_inquiry_icon"
            android:layout_centerVertical="true"
            android:layout_marginLeft="10dp"
            >
        </ImageView>

        <TextView
            android:id="@+id/authorize_text"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
              android:text="Sale"
            android:layout_centerInParent="true"
            android:textColor="#FFFFFFFF"
            android:textSize="25sp"
            android:textStyle="bold"
            >
         </TextView>
        </RelativeLayout>

     <RelativeLayout
        android:id="@+id/Ticketonly"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/authorizeonly"
        android:background="@drawable/med_black_strip"

        >
        <ImageView
            android:id="@+id/ticketonly_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
             android:background="@drawable/balance_inquiry_icon"
            android:layout_centerVertical="true"
            android:layout_marginLeft="10dp"
            >
        </ImageView>

        <TextView
            android:id="@+id/tickettext"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             android:text="Sale"
            android:layout_centerInParent="true"
            android:textColor="#FFFFFFFF"
            android:textSize="25sp"
            android:textStyle="bold"
            >
         </TextView>
        </RelativeLayout>

     <RelativeLayout
         android:id="@+id/giftcardfunctions"
         android:layout_width="match_parent"
         android:layout_height="wrap_content"
        android:layout_below="@+id/Ticketonly"
        android:background="@drawable/med_black_strip"

         >
         <TextView
             android:id="@+id/giftcardfunctionstext"
           android:layout_width="wrap_content"
           android:layout_height="wrap_content"
           android:text=" Functions"
           android:textColor="#FFFFFFFF"
           android:paddingLeft="8dp"
           android:textSize="20dp"
           android:textStyle="bold"
           android:layout_centerVertical="true"
             >
             </TextView>

         </RelativeLayout>

         <RelativeLayout
        android:id="@+id/Redeem"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/giftcardfunctions"
        android:background="@drawable/med_black_strip"

        >
        <ImageView
            android:id="@+id/redeeem_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:background="@drawable/balance_inquiry_icon"
            android:layout_centerVertical="true"
            android:layout_marginLeft="10dp"
            >
        </ImageView>

        <TextView
            android:id="@+id/redeemtext"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
             android:text="Sale"
            android:layout_centerInParent="true"
            android:textColor="#FFFFFFFF"
            android:textSize="25sp"
            android:textStyle="bold"
            >
         </TextView>
        </RelativeLayout>

         <RelativeLayout
        android:id="@+id/Activate"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/Redeem"
        android:background="@drawable/med_black_strip"
        >
        <ImageView
            android:id="@+id/activate_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:background="@drawable/balance_inquiry_icon"
            android:layout_centerVertical="true"
            android:layout_marginLeft="10dp"
            >
        </ImageView>

        <TextView
            android:id="@+id/activatetext"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Sale"
            android:layout_centerInParent="true"
            android:textColor="#FFFFFFFF"
            android:textSize="25sp"
            android:textStyle="bold"
            >
         </TextView>
        </RelativeLayout>

          <RelativeLayout
        android:id="@+id/Deactivate"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/Activate"
        android:background="@drawable/med_black_strip"
        >
        <ImageView
            android:id="@+id/deactivate_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
             android:background="@drawable/balance_inquiry_icon"
            android:layout_centerVertical="true"
            android:layout_marginLeft="10dp"
            >
        </ImageView>

        <TextView
            android:id="@+id/deactivatetext"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
          android:text="Sale"
            android:layout_centerInParent="true"
            android:textColor="#FFFFFFFF"
            android:textSize="25sp"
            android:textStyle="bold"
            >
         </TextView>
        </RelativeLayout>

            <RelativeLayout
        android:id="@+id/Addvalue"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/Deactivate"
        android:background="@drawable/med_black_strip"
        >
        <ImageView
            android:id="@+id/addvalue_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:background="@drawable/add_value"
            android:layout_centerVertical="true"
            android:layout_marginLeft="10dp"
            >
        </ImageView>

        <TextView
            android:id="@+id/addvaluetext"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Add Value"
            android:layout_centerInParent="true"
            android:textColor="#FFFFFFFF"
            android:textSize="25sp"
            android:textStyle="bold"
            >
         </TextView>
        </RelativeLayout>

         <RelativeLayout
        android:id="@+id/BalanceInquiry"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/Addvalue"
        android:background="@drawable/med_black_strip"
        >
        <ImageView
            android:id="@+id/balanceinquiry_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:background="@drawable/balance_inquiry_icon"
            android:layout_centerVertical="true"
            android:layout_marginLeft="10dp"
            >
        </ImageView>

        <TextView
            android:id="@+id/balanceinquirytext"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Balance Inquiry"
            android:layout_centerInParent="true"
            android:textColor="#FFFFFFFF"
            android:textSize="25sp"
            android:textStyle="bold"
            >
         </TextView>
        </RelativeLayout>

         <RelativeLayout
        android:id="@+id/Transfer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_below="@+id/BalanceInquiry"
        android:background="@drawable/med_black_strip"
        >
        <ImageView
            android:id="@+id/transfer_image"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignParentLeft="true"
            android:background="@drawable/transfer_icon"
            android:layout_centerVertical="true"
            android:layout_marginLeft="10dp"
            >
        </ImageView>

        <TextView
            android:id="@+id/transfertext"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="Transfer"
            android:layout_centerInParent="true"
            android:textColor="#FFFFFFFF"
            android:textSize="25sp"
            android:textStyle="bold"
            >
         </TextView>
        </RelativeLayout>

    </RelativeLayout>
    </ScrollView>

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:55:38.183

您应该能够使用其中一种**[滑动菜单](http://www.androiduipatterns.com/2012/06/emerging-ui-pattern-side-navigation.html)**模式实现来获得这样的交互。Jeremy Feinstein 实现了最常用的方法之一，您可以在 github 上获取它：[https ://github.com/jfeinstein10/SlidingMenu](https://github.com/jfeinstein10/SlidingMenu)

它使用起来非常简单，您可以在 xml 或代码中使用它。查看github 上的[readme页面以获取有关设置的更多信息。](https://github.com/jfeinstein10/SlidingMenu/blob/master/README.md)

您甚至可以[在这里](https://github.com/jfeinstein10/SlidingMenu/tree/master/example)找到一个示例 Eclipse 项目。它将帮助您弄脏代码。

# java - 在 android (java) 中启用/禁用 MIDI 通道

> ID：15145237
> 
> 赞同：0
> 
> 时间：2013-02-28T20:41:21.827
> 
> 标签：java, android, midi

我正在 android 中开发一个简单的应用程序，它可以进行 MIDI 播放，这很好。我想知道是否可以使用 android/java 内置 API 启用/禁用 MIDI 通道，如果可以，如何？我正在努力实现此功能。

我在互联网上发现java包“javax.sound（.midi）”包含在早期版本的android系统中，但后来被删除了。我似乎在互联网上找不到任何提供我需要的功能的库。我遇到的一个库允许我在 MIDI 中添加和删除轨道，但轨道与通道不同。

我有一个将 midi 文件设置为数据源的 MediaPlayer 对象，它确实播放文件，但我真的想实现一个功能来启用/禁用 16 个标准 midi 通道中的任何一个。它不需要是实时的，任何解决方案都是可以接受的，只要它不需要服务器端。就像如果我需要修改现有的 MIDI 文件，将其写入磁盘并重新开始播放，这不是问题。任何建议/经验：\！？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T08:05:19.673

该库可以满足您的要求：[https ://code.google.com/p/android-midi-lib/](https://code.google.com/p/android-midi-lib/)

阅读文件。迭代每个轨道中的事件，检查事件的通道，删除指定通道上的事件。把它写出来。玩。麾。

# linux - Is there an equivalent to the windows GetSystemTimes() function in Linux?

> ID：15145241
> 
> 赞同：3
> 
> 时间：2013-02-28T20:41:26.377
> 
> 标签：linux, windows

In Windows there is a function called [GetSystemTimes()](http://msdn.microsoft.com/en-nz/library/windows/desktop/ms724400%28v=vs.85%29.aspx) that returns the system idle time, the amount of time spent executing kernel code, and the amount of time spent executing user mode code.

Is there an equivalent function(s) in linux?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:46:04.417

The original answer gave a solution to getting the user and system time of the current running process. However, you want the information on the entire system. As far as I know, the only way to get this information is to parse the contents of `/proc/stat`. In particular, the first line, labeled `cpu`:

```
cpu  85806677 11713309 6660413 3490353007 6236822 300919 807875 0 
```

This is followed by per `cpu` summaries if you are running an SMP system. The line itself has the following information (in order):

*   time in user mode
*   time in user mode with low priority
*   time in system mode
*   time idle
*   time waiting for I/O to complete
*   time servicing interrupts
*   time servicing software interrupts
*   time spent in virtualization

The times are reported in units of `USER_HZ`.

There may be other columns after this depending on the version of your kernel.

Original answer:

* * *

You want [`times(2)`](http://linux.die.net/man/2/times):

> `times()` stores the current process times in the `struct tms` that `buf` points to. The `struct tms` is as defined in `<sys/times.h>`:

```
 struct tms {
          clock_t tms_utime;  /* user time */
          clock_t tms_stime;  /* system time */
          clock_t tms_cutime; /* user time of children */
          clock_t tms_cstime; /* system time of children */
   }; 
```

Idle time can be inferred from tracking elapsed wall clock time, and subtracting away the non-idle times reported from the call.

# python - 在数独中分配数字

> ID：15145243
> 
> 赞同：-1
> 
> 时间：2013-02-28T20:41:29.307
> 
> 标签：python, python-3.x, sudoku

我正在创建一个 SuDuko 生成器，并试图将我的 1 分发到每个盒子。为此，我创建了一个包含两个项目的列表（充当坐标）。函数运行后，它会返回一个列表，例如`[a, 1]`. 然后我想要一种快速的方法来分配一个变量`a1`（`1`如果返回`a1`我想要的变量，因为我正在尝试分配我的 1）。有没有办法做到这一点？如果有怎么办？这是源代码：`[a, 1]``1`

```
import random
def func():
    rows1 = ['a', 'b', 'c']
    rows2 = ['d', 'e', 'f']
    rows3 = ['g', 'h', 'i']
    columns1 = [1, 2, 3]
    columns2 = [4, 5, 6]
    columns3 = [7, 8, 9]
    letter1 = random.choice(rows1)
    number1 = random.choice(columns1)
    random1 = [letter1, number1]
    rows1.remove(letter1)
    columns1.remove(number1)
    letter2 = random.choice(rows1)
    number2 = random.choice(columns2)
    random2 = [letter2, number2]
    rows1.remove(letter2)
    columns2.remove(number2)
    letter3 = random.choice(rows1)
    number3 = random.choice(columns3)
    random3 = [letter3, number3]
    columns3.remove(number3)
    letter4 = random.choice(rows2)
    random4 = [letter4, number4]
    rows2.remove(letter4)
    columns1.remove(number4)
    letter5 = random.choice(rows2)
    number5 = random.choice(columns2)
    random5 = [letter5, number5]
    rows2.remove(letter5)
    columns2.remove(number5)
    letter6 = random.choice(rows2)
    number6 = random.choice(columns3)
    random6 = [letter6, number6]
    columns3.remove(number6)
    letter7 = random.choice(rows3)
    number7 = random.choice(columns1)
    random7 = [letter7, number7]
    rows3.remove(letter7)
    letter8 = random.choice(rows3)
    number8 = random.choice(columns2)
    random8 = [letter8, number8]
    rows3.remove(letter8)
    letter9 = random.choice(rows3)
    number9 = random.choice(columns3)
    random9 = [letter9, number9]
    return  (random1, random2, random3)    #etc 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:05:34.287

> 然后我想要一种将变量 a1 分配给 1 的快速方法（如果返回 [a, 1] 和 1，a1 将是我想要的变量，因为我正在尝试分配我的 1）。有没有办法做到这一点？

是的，有办法做到这一点，但不，你不想这样做。正确的做法是：

与其创建 81 个不同的变量，不如创建一个可以索引的数据结构。

最明显的选择是`dict`使用 (row, col) 对作为键的 a。

首先，对于一个`dict`：

```
cells = {}
cells['a', '1'] = 1 
```

这里的缺点是单元格在您填充它们之前不存在。您可以像这样预先填充它们：

```
cells = {(letter, digit): None for letter in 'abcdefghi' for digit in '123456789'} 
```

或者，您可以使用`defaultdict`，或使用该`setdefault`功能代替`[]`。

您也可以使用某种明确的 2D 对象，例如 a `list`of `list`s 或 a`numpy.array`等，但是您需要一些方法将字母和数字转换为一对数组坐标：

```
cells = [[None for _ in range(9)] for _ in range(9)]

def getcell(letter, digit):
    return cells[letter - ord('a')][int(digit) - 1]

def setcell(letter, digit, value):
    cells[letter - ord('a')][int(digit) - 1] = value 
```

您可能会意识到这开始看起来很复杂，以至于值得将其包含在一个类中。如果是这样，你是对的。像这样的东西：

```
class Board(object):
    def __init__(self):
        self.cells = [[None for _ in range(9)] for _ in range(9)]
    def map_coords(self, letter, digit):
        return letter - ord('a'), int(digit) - 1
    def getcell(self, letter, digit):
        row, col = self.map_coords(letter, digit)
        return self.cells[row][col]
    def setcell(self, letter, digit, value):
        row, col = self.map_coords(letter, digit)
        self.cells[row][col] = value 
```

现在你可以这样做：

```
board = Board()
board.setcell('a', '1') = 1 
```

# c# - 用 new 实例化枚举有什么用？

> ID：15145246
> 
> 赞同：33
> 
> 时间：2013-02-28T20:41:51.787
> 
> 标签：c#

`enum`当您实例化using时，C# 的编译器不会抱怨`new`：

```
enum Foo
{
    Bar
}

Foo x = new Foo(); 
```

`x`然后将是一个`Foo`with value `Bar`。

`new Foo()`有什么我不知道的用途吗？还是我只是装箱并立即拆箱枚举值？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-02-28T20:44:33.790

`new T()`, when`T`是值类型，不是装箱操作。和 是一样的`default(T)`。`Foo x = new Foo();`, `Foo x = default(Foo)`, 并且`Foo x = Foo.Bar;`都做同样的事情。

[参考](http://msdn.microsoft.com/en-us/library/s1ax56ch.aspx)：

> **初始化值类型**
> 
> ```
> int myInt = new int(); 
> ```
> 
> ——或者——</p>
> 
> ```
> int myInt = 0; 
> ```
> 
> 使用 new 运算符调用特定类型的默认构造函数并将默认值分配给变量。在前面的示例中，默认构造函数将值 0 分配给 myInt。有关通过调用默认构造函数分配的值的更多信息，请参阅[默认值表](http://msdn.microsoft.com/en-us/library/83fhsxwc.aspx)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T21:30:03.443

`Foo.Bar`在 IL 级别上，和之间没有区别`new Foo()`。两者都将评估为同一组 IL 操作码

```
L_0001: ldc.i4.0 
L_0002: stloc.0 
```

这些操作转换为不同 IL 的唯一情况是`new`操作通常完成时

```
void Method<T>() where T : struct {
  T local = new T();
}

Method<Foo>(); 
```

在这种特殊情况下`new`将产生一组不同的操作码

```
L_0005: ldloca.s e3
L_0007: initobj !!T 
```

`Foo.Bar`除了这个有点深奥的区别之外，和之间没有实际区别`new Foo()`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-02-28T20:49:44.403

请参阅[MSDN 关于 System.Enum Class 的条目](http://msdn.microsoft.com/en-us/library/system.enum.aspx)，特别是标记为**Instantiating an Enumeration Type**的部分。

据我了解，创建 an 的实例会`Enum`为您提供默认值`Enum`（即`0`）。

**示例（直接取自 MSDN 文章）：**

```
public class Example
{
   public enum ArrivalStatus { Late=-1, OnTime=0, Early=1 };
   public static void Main()
   {
      ArrivalStatus status1 = new ArrivalStatus();
      Console.WriteLine("Arrival Status: {0} ({0:D})", status1);
   }
}
// The example displays the following output: 
//       Arrival Status: OnTime (0) 
```

# hornetq - 如何在 HornetQ 中以编程方式创建 JMS 主题和队列？

> ID：15145247
> 
> 赞同：4
> 
> 时间：2013-02-28T20:41:53.827
> 
> 标签：hornetq

如何使用 HornetQ 以编程方式创建 JMS 主题和队列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:21:59.910

[http://docs.jboss.org/hornetq/2.2.14.Final/user-manual/en/html/management.html](http://docs.jboss.org/hornetq/2.2.14.Final/user-manual/en/html/management.html)

如果您阅读有关如何将核心地址转换为 JMS 对象的章节：

[http://docs.jboss.org/hornetq/2.2.14.Final/api/org/hornetq/api/core/client/ClientSession.html#createQueue(org.hornetq.api.core.SimpleString,%20org.hornetq .api.core.SimpleString,%20boolean)](http://docs.jboss.org/hornetq/2.2.14.Final/api/org/hornetq/api/core/client/ClientSession.html#createQueue(org.hornetq.api.core.SimpleString,%20org.hornetq.api.core.SimpleString,%20boolean))

如果你愿意，你也可以只使用核心 api。

# asp.net-mvc-4 - 一般 System.Web.Razor 错误（也是邮政项目）

> ID：15145253
> 
> 赞同：0
> 
> 时间：2013-02-28T20:42:10.837
> 
> 标签：asp.net-mvc-4, postal

VS 2012，使用 Postal 0.8.0 的 MVC4 应用程序

当我 NuGet 安装 Andrew's Davey's Postal 0.8.0 时，它可以在我的开发机器上运行，但是当我部署它时，我收到以下错误消息：

> 无法加载文件或程序集“System.Web.Razor，Version=2.0.0.0，Culture=neutral，PublicKeyToken=31bf3856ad364e35”或其依赖项之一。该系统找不到指定的文件。

我花了几天时间试图让它发挥作用。这个问题的原因是什么，你如何解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:44:00.333

当您使用 NuGet 安装 Postal 时，它将 System.Web.Razor 2.0 替换为 System.Web.Razor 1.0。我不得不删除对 System.Web.Razor 1.0 的引用，然后在 System.Web.Razor 2.0 中重新添加。您必须在 System.Web.Razor 的属性中另外将 Copy Local 设置为 True，然后重新构建项目。一旦我这样做了，VS2012 将 System.Web.Razor.dll 复制到部署的 bin 目录中，问题就解决了。

Postal 还将这些依赖项添加到 web.config。我删除了它们，它仍然可以正常工作。

```
 <dependentAssembly>
    <assemblyIdentity name="System.Web.Razor" publicKeyToken="31bf3856ad364e35" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-1.0.0.0" newVersion="2.0.0.0" />
  </dependentAssembly>
        <dependentAssembly>
    <assemblyIdentity name="WebGrease" publicKeyToken="31bf3856ad364e35" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-1.3.0.0" newVersion="1.3.0.0" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="RazorEngine" publicKeyToken="9ee697374c7e744a" culture="neutral" />
    <bindingRedirect oldVersion="0.0.0.0-3.0.8.0" newVersion="3.0.8.0" />
  </dependentAssembly> 
```

**2013 年 3 月 3 日**更新****

 **AD 刚刚发布了 Postal v0.8.2，将 System.Web.Razor 更新到了 2.0。

[随着 ASP.NET 和 Web Tools 2012.2 ( http://www.asp.net/vnext/overview/fall-2012-update](http://www.asp.net/vnext/overview/fall-2012-update) )的发布，WebGrease 依赖项现在似乎是默认设置。**

# magento - 如何使关联的简单产品继承父产品类别？

> ID：15145254
> 
> 赞同：1
> 
> 时间：2013-02-28T20:42:14.597
> 
> 标签：magento, categories, configurable, configurable-product

我的问题：

在某一时刻，一切都运行良好。可配置产品的关联简单产品继承了可配置产品的类别。然后我们重新组织了一些类别，增加了一些新的，现在所有现有的子产品分配的类别都被清除了，当我创建一个新的可配置产品并使用快速创建关联子产品时，它不再通过父产品的类别分配。

我试过的：

我尝试通过管理类别>所需类别>类别产品选项卡>重置过滤器按钮>检查所有所需产品将产品分配给类别，但是Magento对我不满意并且不会进行更改。现在看起来我也被困在手动浏览所有简单的产品并分配类别。

我正在寻找的解决方案：

我不希望将扩展作为解决方案，因为我们已经使用了几个，并且遇到了它们相互冲突的问题。是否有一种简单的方法可以以编程方式将父产品的类别分配给其子产品？或者也许有一些我忽略的设置？

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:08:15.167

这是一项任务，而不是一个具体的问题。

编写一个扩展程序非常简单，其唯一任务是收集所有可配置产品，然后将其所有子产品的 category_ids 属性设置为原始可配置产品。然后使用 cron 以一定的时间间隔运行它（比如每天一次或每周一次）。

制作一个独立的脚本也很容易（尽管您必须访问该页面才能运行它）。

# java - Web 应用程序中的 Spring bean 范围。最佳实践

> ID：15145258
> 
> 赞同：7
> 
> 时间：2013-02-28T20:42:36.440
> 
> 标签：java, spring, jakarta-ee, spring-mvc

我对这个话题有些怀疑。在我们对大多数 Spring bean（dao`s、服务和控制器）的应用程序中，我们使用“请求”范围。这种方法允许我们减少内存使用并创建无状态层。但另一方面，我们在 Spring 上下文初始化的每个请求上都失去了性能。我考虑在“单例”或“原型”范围内创建一些 bean，例如 DAO 层。

您在应用程序中使用了哪些技术？也许存在一些设计 Spring Web 应用程序 bean 范围的建议？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-28T21:05:27.060

我在决定时倾向于使用的一般规则如下：

**长寿状态**

这是需要在多个请求 (http) 上保留状态的时候。**在这种情况下，存储在会话**范围内是有意义的。

**短暂的状态**

当您需要为任何给定请求保留状态时。也许您正在为表单实现类似支持 bean 的东西。在这种情况下，我使用**请求**范围。

**无状态**

这是单例，默认情况下从 spring 生成。除非我对状态有特定要求，否则这是我通常对所有 bean 都坚持的选项。当然它的性能也更高，因为 bean 只创建一次并被所有人使用。

在您的情况下，您的 DAO 和服务应该是无状态的（如果它们没有重新考虑您如何实现它们），因此应该是单例的。控制器应该再次是单例的，但是您的问题是**它们是否包含状态？**. 我不会太担心内存消耗，记住*万恶之源是过早优化*。坚持最佳实践，如果这不起作用，请修复它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T22:17:03.573

**Singleton**：将单个 bean 定义限定为每个 Spring IoC 容器的单个对象实例。

**Prototype**：将单个 bean 定义限定为任意数量的对象实例。

**Request**：将单个 bean 定义限定为单个 HTTP 请求的生命周期；也就是说，每个 HTTP 请求都将有自己的 bean 实例，该实例是在单个 bean 定义的后面创建的。仅在 Web 感知 Spring ApplicationContext 的上下文中有效。

**Session**：将单个 bean 定义限定为 HTTP Session 的生命周期。仅在 Web 感知 Spring ApplicationContext 的上下文中有效。

**全局会话**：将单个 bean 定义限定为全局 HTTP 会话的生命周期。通常仅在 Portlet 上下文中使用时才有效。仅在 Web 感知 Spring ApplicationContext 的上下文中有效。

除了这些信息，您应该将您的 DAO 标记为**@Repository**，将您的控制器标记为**@Controller** ，将您的服务层标记为**@Service**。

[服务、存储库和控制器讨论](https://stackoverflow.com/questions/6827752/whats-the-difference-between-component-repository-service-annotations-in)

# git - Redmine：非主分支的相关修订未更新

> ID：15145260
> 
> 赞同：4
> 
> 时间：2013-02-28T20:42:40.420
> 
> 标签：git, branch, redmine, revision

我已经用 git 存储库配置了 redmine。存储库正确更新，我可以毫无问题地浏览 redmine 中的所有存储库分支。但是，相关修订不会自动显示在对除 master 之外的任何分支的提交的问题中。

如果我跳转到存储库选项卡并浏览有问题的分支，我可以看到我最近的提交，并且只有在这一步之后，相关的修订才会在它们所引用的问题下列出。

无论我的更改提交到哪个分支，如何自动更新相关的修订？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:28:28.990

通常，有三种方法可以将提交加载到 Redmine：

*   通过加载存储库选项卡，就像您为分支所做的那样。
*   通过使用 Git 钩子，这似乎是用于 master 的。
*   通过使用 cron 任务，在您的情况下也可以用于 master 。

我猜，为 post-commit 钩子或在 cron 下运行的脚本会检查它是否是 master，然后更新 Redmine。所以，你需要检查这个脚本。

也可以看看：

*   [关于 Git 钩子](http://git-scm.com/book/ch7-3.html)
*   [关于配置存储库更改集的更新](http://projects.andriylesyuk.com/projects/mastering-redmine/sample-chapter#29)

# mysql - 提高 JOIN 查询速度

> ID：15145269
> 
> 赞同：1
> 
> 时间：2013-02-28T20:43:21.680
> 
> 标签：mysql, sql

我有这个简单的连接，效果很好，但我认为速度非常慢，因为技术表非常大。有许多 uid 实例，因为它跟踪 uid 的时间戳，因此是不同的。加快此查询的最佳方法是什么？

```
SELECT DISTINCT tech.uid, 
                listing.empno, 
                listing.firstname, 
                listing.lastname 
FROM   tech, 
       listing 
WHERE  tech.uid = listing.empno 
ORDER  BY listing.empno ASC 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T20:53:17.890

首先在各自的表上为 tech.UID 和 Listing.EmpNo 添加一个索引。在确定有索引后，您可以尝试像这样重写查询：

```
SELECT DISTINCT tech.uid, listing.EmpNo, listing.FirstName, listing.LastName
FROM  listing INNER JOIN tech ON tech.uid = listing.EmpNo
ORDER BY listing.EmpNo ASC; 
```

如果还不够快，可以在查询前加上 EXPLAIN 字样，以获取有关查询执行计划的一些提示。

```
EXPLAIN SELECT DISTINCT tech.uid, listing.EmpNo, listing.FirstName, listing.LastName
    FROM  listing INNER JOIN tech ON tech.uid = listing.EmpNo
    ORDER BY listing.EmpNo ASC; 
```

发布解释结果，以便我们获得更好的洞察力。

希望能帮助到你，

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:56:05.567

1.  这是一个非常简单的查询。只有您可以在 SQL 中做的事情 -如果没有索引，您可以在 JOIN/WHERE 和 ORDER BY 子句（tech.uid、listing.empno）中使用的字段上**添加索引。**

2.  如果有`JOIN`带有值的字段`NULL`- 它们可能会破坏您的表现。`WHERE`您应该在子句 ( `WHERE tech.uid is not null and listing.empno not null`)中过滤它们。如果有很多行带有`JOIN`on`NULL`字段 - 该数据可能会产生笛卡尔结果（不确定这在英语中是如何调用的）可能包含大量行。

3.  您可以更改 MySQL 配置。有许多对性能调整有用的选项，如 key_buffer_size、sort_buffer_size、tmp_table_size、max_heap_table_size、read_buffer_size 等。

# delphi - TChart - 不要绘制小于 0 的值？

> ID：15145270
> 
> 赞同：1
> 
> 时间：2013-02-28T20:43:23.453
> 
> 标签：delphi, charts

**介绍**

我正在使用 TChart 组件，发现选项相当混乱，很难找到我需要的东西。

图表的左轴最小值为 0，最大值为 5000，下轴最小值为 0，最大值为 52（一年中的周数）。

在我的图表中，我有 2 个系列，这些系列是根据我创建的记录中的值填充的，可以在运行时进行编辑，到目前为止一切正常。

**问题**

看看下面的图表部分填充了一些随机值的图像：

![在此处输入图像描述](../Images/16910dd57faeaa8384442526f92dca6c.png)

我不确定是否存在这样的选项，但请注意，从第 4 周开始，在没有添加任何值的情况下，有一条实线红线。

我不希望图表绘制小于 0 的值，因此在此示例中，从第 4 周开始应该不再有线条（我可以确认从第 4 周开始我将值设置为 -1）

第 1 周到第 4 周没有显示这条底部红线，显然是因为值大于 0，因此绘制在这条线的上方，但这应该让我的问题更清楚一点。

那么，如何防止图表绘制/绘制小于 0 的值，这对于图表的下轴很重要？

我确信某处必须有一个简单的选项，如果有一个我就找不到它，因为我对 TChart 组件不太熟悉。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T22:30:26.930

将值添加到系列以将它们添加为空时，您有可能。

这将阻止它们显示。

Ken 说得对，一个棘手的情况是处理被空值包围的单个值。选择另一种系列类型而不是`FastLine`显示点和线可能会更好。

对于`FastLine`显示间隙的系列，请设置：

```
Series1.IgnoreNulls := False; 
```

并区分低于零的值：

```
if (y < 0) then
  Series1.AddNullXY(x, y, '')
else
  Series1.AddXY(x, y, ''); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-23T14:52:57.547

```
if y < 0 then
   LineSeries1.AddXY(x, y, '', clNone)
else
   LineSeries1.AddXY(x, y, '', clRed); 
```

# jsf - 未在数据列表 JSF 中选择选定行

> ID：15145271
> 
> 赞同：0
> 
> 时间：2013-02-28T20:43:25.693
> 
> 标签：jsf, primefaces

我在带有primefaces的jsf中使用datalist，我面临的问题是所选对象的支持bean类字段没有更新到datalist的选定行，它总是给出空对象。这是代码

查看文件 ：

```
`<?xml version="1.0"?>`

<f:view xmlns="http://www.w3.org/1999/xhtml"
    xmlns:c="http://java.sun.com/jsp/jstl/core"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:p="http://primefaces.org/ui"
    xmlns:ui="http://java.sun.com/jsf/facelets">
    <h:head />
    <h:body>

        <h:form>
            <p:dataList value="#{tableBean.getList()}" var="job" id="cars" 
                paginator="true" rows="5" effectSpeed="fast"
                paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink} {RowsPerPageDropdown}"
                rowsPerPageTemplate="5" type="none">

                <f:facet name="header">  
                Applicants List
            </f:facet>

        <p:column>
                <div style="width: 200px">
                    <h:outputText value="Name:" style="margin-left:10px" />
                    <h:outputText value="#{job.name}" style="margin-left:10px" />
                    <br />
                    <h:outputText value="Applied for:" style="margin-left:10px" />
                    <h:outputText value="#{job.jobtitle}" style="margin-left:10px" />
                    <br />

                    <h:outputText value="Degree:" style="margin-left:10px" />
                    <h:outputText value="#{job.degree}" style="margin-left:10px" />
                    <br />
                    <h:outputText value="Experience:" style="margin-left:10px" />
                    <h:outputText value="#{job.experience}" style="margin-left:10px" />
                    <br />
                    <h:outputText value="Contact:" style="margin-left:10px" />
                    <h:outputText value="#{job.contact}" style="margin-left:10px" />
                    <br />
                    <h:commandLink value="Call for Interview" style="margin-left:10px"></h:commandLink>
                </div>
                <br/>

                <p:commandButton icon="ui-icon-search"
                    actionListener="#{tableBean.printView}" title="View Detail">
                    <f:setPropertyActionListener value="#{job}"
                        target="#{tableBean.selectedJob}" />
                </p:commandButton>

                <p:separator id="separator" />
                </p:column>
            </p:dataList>

        </h:form>

    </h:body>
</f:view> 
```

表 bean 类：

```
import java.io.Serializable;
import java.util.ArrayList;
import java.util.List;
import java.util.logging.Logger;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.SessionScoped;
import javax.faces.bean.ViewScoped;
import javax.faces.event.ActionEvent;

import DAO.JobApplicationDao;
import DTO.JobApplicationDto;

@ManagedBean
@ViewScoped
public class TableBean implements Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;

public JobApplicationDto selectedJob;

    public TableBean() {

    }

    public List<JobApplicationDto> getList() {
        List<JobApplicationDto> joblist = new ArrayList<JobApplicationDto>();
        JobApplicationDao dao = new JobApplicationDao();
        joblist =dao.getDroppedCv();

        return joblist;

    }

    public JobApplicationDto getSelectedJob() {
        return selectedJob;
    }

    public void setSelectedJob(JobApplicationDto selectedJob) {
        this.selectedJob = selectedJob;
    }

    public void printView(ActionEvent event) {
    try{
        System.out.print("Selected Person "+getSelectedJob.getName());
    }catch(Exception e){

    }

    } 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:34:49.753

您应该将 setPropertyActionListener 与 action 一起使用。在调用您的操作之前调用侦听器。似乎 setPropertyActionListener 在 actionListener 之后被调用。

更改`actionListener="#{tableBean.printView}"`为`action="#{tableBean.printView}"`

和方法

```
public void printView() {
    try{
        System.out.print("Selected Person "+getSelectedJob.getName());
    }catch(Exception e){

    }

    } 
```

请参阅此内容以更好地了解要使用的内容，

[http://balusc.blogspot.com/2006/06/communication-in-jsf.html](http://balusc.blogspot.com/2006/06/communication-in-jsf.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T21:30:30.397

您可以像这样使用数据表选择

```
<p:dataList value="#{tableBean.getList()}" selection="#{tableBean.selectedJob}"  var="job" id="cars" 
            paginator="true" rows="5" effectSpeed="fast"
            paginatorTemplate="{PreviousPageLink} {CurrentPageReport} {NextPageLink} {RowsPerPageDropdown}"
            rowsPerPageTemplate="5" type="none"> 
```

# asp.net - 如何将 www.webservicex.net/uszip.asmx 与 asp.net mvc 一起使用

> ID：15145272
> 
> 赞同：1
> 
> 时间：2013-02-28T20:43:28.947
> 
> 标签：asp.net, web-services

我正在尝试使用此网络服务...

[http://www.webservicex.net/uszip.asmx](http://www.webservicex.net/uszip.asmx)

当我添加对此 Web 服务的 Web 引用时，它提供的方法与 asmx 所说的不匹配。

我得到这样的方法....

```
ZipcodeLookup.GetInfoByZIPCompletedEventArgs
ZipcodeLookup.GetInfoByZIPCompletedEventHandler 
```

我不知道如何使用这些。添加参考时我做错了什么，或者有人可能会阐明我如何使用这些方法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:39:27.927

添加 Web 引用是一种较旧的已弃用的 WebServices 方法（尽管它仍然很好用）。对于这样的服务，您需要添加服务参考。为此，请右键单击项目中的引用并选择添加服务引用。在地址文本框中输入 URL，然后单击“开始”。然后，您会在输入的地址看到可用的服务列表。在这种情况下选择“USZip”并输入一个命名空间（ZipcodeLookup）。

您现在的用法是

```
 var service = new ZipcodeLookup.USZipSoapClient();
        XmlNode result1 = service.GetInfoByAreaCode("410");
        XmlNode result2 = service.GetInfoByCity("Annapolis");
        XmlNode result3 = service.GetInfoByState("MD");
        XmlNode result4 = service.GetInfoByZIP("21401"); 
```

正如@mattytommo 所说，您将获得与Web 服务关联的方法和类，这意味着如果Web 服务返回一种人类型，您将获得一个名为Person 的DTO 类型类。

希望这可以帮助。

# ios - 在ios6的导航栏上放置自定义按钮不起作用

> ID：15145279
> 
> 赞同：0
> 
> 时间：2013-02-28T20:43:43.263
> 
> 标签：ios, uinavigationbar

我对此进行了很多研究，并使用了几种不同的方法。此代码位于我的`ViewController.m`：

1）第一种方法

```
UIImage *settingsimage = [UIImage imageNamed:@"gearicon"];
  UIBarButtonItem *settingsBarButton =[[UIBarButtonItem alloc] initWithImage:settingsimage style:(UIBarButtonItemStylePlain) target:self action:@selector(switchpages)];

  self.navigationItem.leftBarButtonItem = settingsBarButton; 
```

此代码执行没有任何错误，但没有出现任何按钮！

2) 第二种方法

```
UIButton *settingbtn = [UIButton buttonWithType:UIButtonTypeCustom];
    [settingbtn addTarget:self action:@selector(switchpages) forControlEvents:UIControlEventTouchUpInside];
    [settingbtn setImage:[UIImage imageNamed:@"gearicon.png"] forState:UIControlStateNormal];
    UIBarButtonItem *newBarItem = [[UIBarButtonItem alloc] initWithCustomView:settingbtn];

    self.navigationItem.leftBarButtonItem = newBarItem; 
```

同上，没有错误，但没有按钮。请帮助我哪里出错了。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T21:06:27.190

所以，这是我的最终解决方案。这会在 NavigationBar 的右上角放置一个“齿轮”图标，没有边框：

。H

```
 @property (strong, nonatomic) IBOutlet UINavigationBar *navBar;
 @property (strong, nonatomic) IBOutlet UINavigationItem *settingsbtn;
 @property(strong, nonatomic)UIButton *navigationButton; 
```

.m

```
 @synthesize navigationButton;
 @synthesize settingsbtn;
 @synthesize navBar; 
```

ViewDidLoad

```
//custom settings button
navigationButton = [UIButton buttonWithType:UIButtonTypeCustom];
[navigationButton addTarget:self action:@selector(swithpages)   forControlEvents:UIControlEventTouchUpInside];
[navigationButton setImage:[UIImage imageNamed:@"gearicon.png"]forState:UIControlStateNormal];
[navigationButton setFrame:CGRectMake(0, 0, 30, 35)];
UIBarButtonItem *settingsbutton = [[UIBarButtonItem alloc] initWithCustomView:navigationButton];

settingsbtn.rightBarButtonItem = settingsbutton; 
```

我唯一缺少的是按下按钮“发光”（如Apple的远程应用程序）而不是默认颜色更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:56:22.907

您应该尝试`ImageView`在按钮后面加上图片，它会成功的

如果您没有使用任何 NavigationController 并且想查看如何将 NavigationItem 添加到 NavigationBar，那么您应该确保在 xib 上添加 NavigationBar 并在其 Connection Inspector 中连接 IBOutlet。这里你的类和代码会是什么样子......

在你的`.h`文件中

```
@property(strong,nonatomic)UIImageView *navigationImageView;
@property(strong,nonatomic)UIButton *navigationButton;
@property (strong,nonatomic) IBOutlet UINavigationBar *navBar; 
```

在`.m`文件中

```
@synthesize navigationButton;
@synthesize navigationImageView;
@synthesize navBar; 
```

如果您使用带图像的按钮，请首先创建一个 ImageView 并在其中添加自定义图像

```
UIImage *backImage = [UIImage imageNamed:@"back.png"];
self.navigationImageView = [[UIImageView alloc] initWithImage:backImage]; 
```

现在将图像视图的框架设置为图像

```
 [self.navigationImageView setFrame: CGRectMake(5, 7, backImage.size.width, backImage.size.height)]; 
```

创建自定义按钮并分配图像

```
self.navigationButton = [UIButton buttonWithType:UIButtonTypeCustom];
[self.navigationButton setImage:backImage forState:UIControlStateNormal]; 
```

将图像视图添加到导航栏

```
[self.navBar addSubview:self.navigationImageView];

[self.navBar addSubview:self.navigationButton];
[self.navBar bringSubviewToFront:self.navigationButton]; 
```

使用按钮创建一个`UIBarButtonItem`作为自定义方法的自定义视图

```
 UIBarButtonItem *customBarItem = [[UIBarButtonItem alloc] initWithCustomView:self.navigationButton];
    self.navigationItem.leftBarButtonItem = customBarItem;
    [self.navigationButton addTarget:self action:@selector(backMethod) forControlEvents:UIControlEventTouchUpInside]; 
```

最后你的自定义 backMethod 无论你想在这做什么......为了测试你可以显示警报

```
-(void)backMethod{
    UIAlertView *alert =[[UIAlertView alloc]initWithTitle:@"Info" message:@"custom navigation" delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    [alert show];

} 
```

# c - 如何在 C 中的 argv 位置 1 中拉出字符串

> ID：15145280
> 
> 赞同：0
> 
> 时间：2013-02-28T20:43:47.530
> 
> 标签：c, command-line-arguments

```
int main(int argc, char *argv[]) {
    int i;
    for(i = 0; i < argc; i++)
        printf("arg %d: %s\n", i, argv[i]);
    return 0;
} 
```

假设我在命令行中运行程序

```
./program mom cat dad 
```

`argv[1]`等于“妈妈”

如何获取字符数组`argv[1]`以将它们单独放入链表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:45:40.377

`argv[1]`是您要查找的数组。例如，这意味着`argv[1][0]`是第一个字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:46:57.417

在 C 中，字符串始终只是`char`数组，因此`argv[1]`已经是字符数组。例如，您可以这样做：

```
for (int i = 0; i < strlen(argv[1]); i++) {
    printf("Character %d = %c\n", i, argv[1][i]);
} 
```

已经有大量关于在 C 中实现链表的资源（例如：[here](http://www.macs.hw.ac.uk/~rjp/Coursewww/Cwww/linklist.html)），所以我建议您使用这些信息试一试，如果遇到困难，请返回。祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:01:19.050

除了这里已经给出的答案，值得一提的是，您通常会将字符串复制到您的列表中。您可以使用`strdup`(defined in `string.h`) 复制字符串。例如：

```
listnode->value = strdup(argv[1]); 
```

这意味着您的列表现在拥有一小块包含该复制字符串的内存，因此它负责`free`在释放列表节点时调用该指针。

但是，我应该提到您可以修改参数数组。因此，如果您的列表仅对提供的​​参数进行操作，您不一定需要复制它们（除非您想重新分配内存），即使您打算修改字符串数据。

如果您只是在每个列表节点中存储一个字符值，则没有这样的要求。你会简单地有一个这样的列表结构：

```
struct node {
    char value;
    struct node *next;
}; 
```

# python - 从 numpy 数组中绘制多个数据系列

> ID：15145287
> 
> 赞同：2
> 
> 时间：2013-02-28T20:44:13.777
> 
> 标签：python, numpy, matplotlib, loops

我有一个非常雄心勃勃的项目（对于我的新手级别）要在 numpy 数组上使用，我在其中加载一系列数据，并根据我的需要制作不同的图 - 我已经上传了我的数据文件[input_data](http://pastebin.com/DyUnteN8)的精简版本并想做绘图基于：F（我想在循环之前选择所需的 F），并且每个系列将具有来自 E 列的数据（例如 A12 一个数据系列，A23 绘图中的另一个数据系列等）和 X轴我想使用 D 中的相应值。

因此要总结 FI 列上的选定值，希望有 4 个不同的数据系列（作为 E 列上的变量数），并且数据应该是 D 列值（即日期）的参考（x 轴）

我在第一步中绊倒了（尽管花费了太多时间），我想将所有带有 F 列标识符的数据绘制为一个图。这是我到目前为止所拥有的：

```
import os 
import numpy as np
N = 8 #different values on column F
M = 4 #different values on column E
dataset = open('array_data.txt').readlines()[1:]
data = np.genfromtxt(dataset)
my_array = data
day = len(my_array)/M/N # number of measurement sets - variation on column D
for i in range(0, len(my_array), N):
    plt.xlim(0, )
    plt.ylim(-1, 2)
    plt.plot(my_array[i, 0], my_array[i, 2], 'o')
    plt.hold(True)
plt.show() 
```

这没有任何作用..我还有很长的路要走..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:09:35.053

使用熊猫，您可以：

```
import pandas as pd
dataset = pd.read_table("toplot.txt", sep="\t")
#make D index (automatically puts it on the x axis)
dataset.set_index("D", inplace=True)
#plotting R vs. D
dataset.R.plot()
#plotting F vs. D
dataset.F.plot() 
```

`dataset`是一个`DataFrame`对象，`DataFrame.plot`只是 matplotlib 函数的包装器，用于绘制系列。

我不清楚你想如何绘制它，但听起来你需要选择一列的一些值。这将是：

```
# get where F == 1000
maskF = dataset.F == 1000
# get the values where F == 1000
rows = dataset[maskF]
# get the values where A12 is in column E
rows = rows[rows.E == "A12"]
#remove the we don't want to see
del rows["E"]
del rows["F"]
#Plot the result
rows.plot(xlim=(0,None), ylim=(-1,2)) 
```

# javascript - 用for循环重复消息

> ID：15145289
> 
> 赞同：0
> 
> 时间：2013-02-28T20:44:27.203
> 
> 标签：javascript, for-loop, repeat

我在学校有一个作业，我们应该从 promt 中获取一个文本字符串，然后让警报打印该文本字符串 10 次。但是我们必须使用 for 循环。但是，即使我阅读了所有涉及此内容的页面，我似乎也无法让它工作。

```
function buttonAction7() {
    var someMsg = prompt("Write something");    
    for(var i = 0; i < 10; i++){
        someMsg+someMsg; 
    }   
    alert(someMsg);
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T20:46:22.947

该声明：

```
someMsg+someMsg; 
```

实际上*不做*任何事情，它只是返回一个逻辑值。您可能希望将此值分配给某些东西，例如：

```
someMsg = someMsg + someMsg; // Notice assignment operator, we're now actually modifying the value of someMsg 
```

如果你想用消息构建一个字符串 10 次，你可能想要更像：

```
var someMsg = prompt("Write something");
var msg = '';

for(var i = 0; i < 10; i++)
{
    msg += someMsg + '\n'; // Add a line break after each iteration
}

window.alert(msg); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T20:51:50.600

如果我明白你在问什么，你希望警报在同一个警报窗口中背靠背显示字符串 10 次吗？（比如“写一些东西写一些东西写一些东西......”）：

如果这是正确的，那么您的问题是您在 for 循环中的计算。您只需将两个字符串相加，但对结果不做任何事情。您需要在每次循环迭代时将结果保存回 someMsg 变量，如下所示：

```
var someMsg = promt("Write something");
var output = "";

for(var i=0; i<10; i++) {
   output = output + someMsg;
}

alert(output); 
```

您会看到 output+someMsg 的结果是如何在每次迭代中保存回变量 output 的。你也可以这样写那个简写：

```
output += someMsg; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-09T06:02:46.067

尝试这个。

```
var someMsg=prompt("Write Something");

var i;

for(i=0;i<10;i++){
   alert(someMsg);
} 
```

# php - 如何使用 PHP 和 JavaScript 列出服务器上的所有文件夹

> ID：15145294
> 
> 赞同：0
> 
> 时间：2013-02-28T20:44:53.250
> 
> 标签：php, javascript, prototypejs, directory-listing

在我的网络服务器上，我有几个目录，其中包含文件，例如：

*   文件夹/file.xml
*   另一个文件夹/file.xml
*   仍然另一个/file.xml

这些文件包含有关我想在地图上显示的一些位置的信息（使用 openlayers），因此我需要 JS 中的文件。问题是我不知道这些文件夹叫什么以及它们有多少，所以我需要一个它们的列表。

我需要这样的东西：

```
for each (folder as f)
    map.showLocations(f/file.xml) 
```

怎么可能做到这一点？

我搜索了解决方案，但我发现的只是客户端的文件和文件夹。我正在使用原型 js，并且可以使用 PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:56:30.473

如果你在 PHP 变量中列出你的目录`$directories`，你可以`echo`像这样的页面

```
echo '<script>var Directories = '.json_encode($directories).';</script>'; 
```

现在您的页面中有一个 javascript 变量，您可以对其进行迭代并施展魔法

```
for (dir in Directories) {
  map.showLocations(Directories[dir]/file.xml);
} 
```

另一种选择是让 AJAX 请求为您执行此操作（我在此示例中使用 jQuery，因为我不知道原型但它应该大致相同）

```
$.getJSON('directories.php', function(data) {
  $.each(data, function(index, value) {
    map.showLocations(value+'/file.xml');
  });
}); 
```

你的PHP代码应该是这样的

```
<?php
  *** iterate over the directories and save them into an array ***
  echo json_encode($directories);
  exit();
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:57:10.007

为了我的工作，我只需要在大约 2 小时前完成这项工作。我使用了[来自 A Beautiful Site 的一个名为 jQuery File Tree 的 jQuery 插件](http://www.abeautifulsite.net/blog/2008/03/jquery-file-tree/)。

如果您只是想将数据导入 JavaScript，那么这个 UI 插件可能有点矫枉过正，但它包含的源代码将返回包含路径列表的 JSON，您可以通过调用 jQuery.ajax 请求来获取。

**JavaScript (jQuery):**

```
$.ajax({
    type: "POST",
    data: {
        dir : '/your_directory'
    }
    contentType: "application/json; charset=utf-8",
    url: 'getDirectories.php',
    success: function(d) {
        //do something with the data 
        console.dir(d.directories); //d.directories will be an array of strings
    }
}); 
```

**PHP**

```
//return a JSON object with directories 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T04:28:09.703

这是其他人都在谈论的 PrototypeJS 版本

```
new Ajax.Request('getdirectories.php',{
    method : 'post',
    onSuccess : function(result){
        //result.responseJSON is the JSON object
        var dirs = result.responseJSON;

        dirs.each(function(item){
            map.showLocations(item+'/file.xml');
        });
    }); 
```

# c++ - 继承层次结构中的析构函数排序

> ID：15145298
> 
> 赞同：1
> 
> 时间：2013-02-28T20:45:11.783
> 
> 标签：c++, inheritance, polymorphism, virtual-destructor

如果我有以下层次结构：

*   F 类包含类型的成员对象（E 类和 D 类，按此顺序声明）
*   F类继承具体类C类
*   C类继承抽象/纯虚类B类
*   B类继承具体类A

如果调用 F 类对象的析构函数，则按以下顺序发生以下情况：

1.  调用 F 类（派生最多的）析构函数并完成
2.  调用 D 类（成员对象 2）析构函数并完成
3.  调用 E 类（成员对象 1）析构函数并完成
4.  调用 C 类（F 的基础）析构函数并完成
5.  调用 A 类（B 的基础，C 的基础）析构函数并完成
6.  B类（虚拟，C的基础）析构函数被调用并完成

它是否正确？所以基本上到最后C继承了虚拟B，虚拟B继承了A，但是C被破坏了，然后是A，然后是虚拟B？

编辑：C++ 常见问题解答 说：

> “虚拟基类是特殊的——它们的析构函数在最派生类的构造函数的末尾被调用”

这是我想要理解的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:46:09.113

析构函数的执行顺序与构造函数相反。这几乎就是您需要知道的所有内容。

更新：它甚至适用于虚拟基地。您只需要意识到虚拟基是在任何其他基类之前构建的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T21:35:47.947

也许将析构函数调用的顺序表示为算法是最简单的。

## 破坏

1.  做程序员在析构函数体内写的任何东西：`F::~F() { do_this; do_that; }`
2.  **销毁**（调用析构函数）成员
3.  **销毁**（调用析构函数）非虚拟基类
4.  **销毁**（调用析构函数）虚拟基类

该算法由语言（或编译器）执行，因此程序员只能控制第一步。

注意：每个进一步的步骤都是递归的。

析构函数调用的顺序是构造函数调用的相反顺序（很高兴知道，因为构造顺序很直观）。虚拟基地的破坏顺序指定为

> 基类图的深度优先从左到右遍历

幸运的是，您不需要这个，因为您只有一个。

# image - 当响应标头在 IE 和 Fiddler 中具有正确长度时，图像响应主体为空

> ID：15145300
> 
> 赞同：2
> 
> 时间：2013-02-28T20:45:15.207
> 
> 标签：image, internet-explorer, ssl, jetty

这里有很多细节：

1.  容器：JETTY 7.62 和 7.69（都试过了）
2.  图片：尝试过jpg和png
3.  浏览器：IE9 和 Fiddler 工具

所以我们有一个网页，其中包含一个标准的 img 标签。当我们在缓存被清除后从 IE 访问页面时，我们得到一个 200 的图像，事实上这就是我们在

请求标头：

```
Key Value
Request GET /cc/auth/images/test.jpg HTTP/1.1
Accept  image/png, image/svg+xml, image/*;q=0.8, */*;q=0.5
Accept-Language en-US
User-Agent  Mozilla/5.0 (compatible; MSIE 9.0; Windows NT 6.1; Trident/5.0)
Accept-Encoding gzip, deflate
Host    van-test-login9.login.dev.net:8443
Connection  Keep-Alive 
```

响应标头：

```
Key Value
Response    HTTP/1.1 200 OK
Date    Thu, 28 Feb 2013 19:59:48 GMT
Content-Length  25926
Content-Type    image/jpeg;charset=UTF-8
Last-Modified   Thu, 28 Feb 2013 19:58:38 GMT 
```

但是响应正文是空的..在服务器端我们看到

```
[28/Feb/2013:19:59:25 +0000] "GET /cc/auth/images/test.jpg HTTP/1.1" 200 25926 
```

因此图像在浏览器中出现损坏。我们一直在通过切换 JETTY 版本进行一些实验，这似乎没有什么不同。我们在使用 FF 或 Chrome 时看不到这个问题。此外，如果我们转到端口 8080，我们也无法重现该问题。所以它似乎是 SSL/JETTY/IE 的组合。

我们还可以通过在浏览器中输入资源位置来尝试直接访问图像来重现问题。我们也可以使用 Fiddler 重新创建。我们的 JETTY 日志、应用程序或其他方面没有错误。

我还应该补充一点，这是间歇性的。如果您继续按 F5，一旦发生这种情况，最终它将加载和渲染，然后在您清除缓存之前您不会看到损坏的图像。

那里的任何人都有建议或想法如何弄清楚这里发生了什么？

非常感谢

所以更多信息，我们在 web.xml 中有这个

```
<filter>
        <filter-name>characterEncodingFilter</filter-name>
        <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
        <init-param>
            <param-name>encoding</param-name>
            <param-value>UTF-8</param-value>
        </init-param>
        <init-param>
            <param-name>forceEncoding</param-name>
            <param-value>true</param-value>
        </init-param>
    </filter> 
```

和

```
<filter-mapping>
        <filter-name>characterEncodingFilter</filter-name>
        <url-pattern>/*</url-pattern>
    </filter-mapping> 
```

我们这样做是为了确保我们所有的输出都是 UTF-8 我们没有意识到的是，它还会将包括图像在内的所有内容都放入一个字符集！

有没有一种简单的方法来过滤掉图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:53:01.627

解决此问题的一种非常 Jetty 特定的方法是使用重写处理程序来删除响应标头中的该字符集。

[http://wiki.eclipse.org/Jetty/Feature/Rewrite_Handler](http://wiki.eclipse.org/Jetty/Feature/Rewrite_Handler)

我不确定我是否真的会推荐它，但它可能。对于其他 IE 历史奇点，我们甚至有一个 IE 特定规则。您可以使用现有的基于模式的重写规则或为此创建自己的规则。

不过，在您的应用程序中解决这个问题可能会更好。

# android - 为 ViewFlipper 实现 Android 缩小页面转换器

> ID：15145304
> 
> 赞同：6
> 
> 时间：2013-02-28T20:45:27.447
> 
> 标签：android, animation, android-viewpager, viewflipper

我正在寻找用于我的视图翻转器的动画，并在 Android 培训页面上找到了这个很棒的页面转换器动画：

[http://developer.android.com/training/animation/screen-slide.html](http://developer.android.com/training/animation/screen-slide.html)

但是，这是使用 ViewPager.PageTransformer 实现的，我在代码中使用了较新的 ViewFlipper。有没有人想出如何使用 ViewFlipper 和 ObjectAnimators 创建这样的动画？只是为了解释我到目前为止所做的事情：

*   我有一个 AdapterViewFlipper，它根据用户交互填充片段。
*   用户可以通过在 ViewFlipper 上滑动来“翻转”这些片段。这是使用 GestureDetector (OnGestureListener) 完成的。
*   onFling 方法定义了 ViewFlipper 的动画

最后一点是我需要定义动画的地方，这就是我迷路的地方。

有什么想法或帮助吗？！

# ios - 类别中的自定义 NSManagedObject 设置器

> ID：15145309
> 
> 赞同：2
> 
> 时间：2013-02-28T20:45:40.427
> 
> 标签：ios, objective-c, cocoa-touch, core-data, nsmanagedobject

我已将所有 NSManagedObject 的自定义逻辑放在一个类别中，这样当模型发生变化时，我就可以从模型中重新生成标准类。

我需要的一个这样的逻辑是对象属性之一的自定义设置器：

```
- (void) setName:(NSString *)name
{
    [self willChangeValueForKey:@"name"];
    [self setPrimitiveValue:name forKey:@"name"];
    [self didChangeValueForKey:@"name"];
    NSLog(@"name was changed");//for example
} 
```

我已将其放在类别中，在这种情况下是`Item+Custom.m`

我的问题：

为什么每次我设置一个Item的名字，**都不**需要导入Item+Custom.m？上面的日志语句仍然会触发。

只是好奇发送消息的类如何不需要知道逻辑仍然触发的类别？

并且（可能是一个单独的问题）如果我将具有不同日志记录语句的相同自定义设置器添加到同一对象的第二个类别会发生什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T21:08:59.760

加载程序时，所有类别方法都会被运行时知道。所以如果你声明了一个`-[Item setName:]`方法，那么 Core Data 将不再在运行时创建这个方法。

您无需导入任何内容，因为`name`已`@dynamic`在 Xcode 生成的托管对象子类文件中声明为属性。

如果两个类别声明了相同的方法，或者如果类别中声明的方法名称与原始类中的方法相同，则行为未定义，请参阅“使用 Objective-C 编程”中的[避免类别方法名称冲突](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/ProgrammingWithObjectiveC/CustomizingExistingClasses/CustomizingExistingClasses.html#//apple_ref/doc/uid/TP40011210-CH6-SW4)。

# c# - 定期更新 Lucene.net 索引

> ID：15145315
> 
> 赞同：3
> 
> 时间：2013-02-28T20:45:55.400
> 
> 标签：c#, asp.net-mvc, lucene.net

我有一个 MVC 站点使用 Lucene.net 的搜索功能。该网站拥有超过 10 万种产品。索引已经为该站点构建。但是，该站点也有 2 个数据源，它们会定期更新数据库（可能每 15 分钟一次）。所以数据变化很大。我应该如何更新 Lucene 索引或者我根本不需要？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-03T18:51:07.890

使用进程调度程序（如[Quartz.Net](http://quartznet.sourceforge.net)）每隔一段时间（可能每 15 分钟）运行一次，以获取数据库中未编入索引的项目。

使用字段作为 ID 进行比较（如序列号或日期时间）。您将从索引中获取最新添加的文档，并从数据库中获取最新添加的文档，并对介于两者之间的所有内容进行索引。您必须小心不要索引重复项（或者更糟糕的是，跳过未索引的文档）。

或者，将您的索引与 2 个数据馈送同步，并在文档存储在数据库中时对其进行索引，从而避免上述陷阱（重复/缺失）。我不确定这些提要如何更新您的数据库，但您可以拦截它们并相应地更新索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-22T05:29:59.430

看看这个解决方案，我有同样的要求，我使用了这个链接中的解决方案，它对我有用。使用计时器，它会经常创建索引，因此不会出现任何重叠/跳过问题。试试看。

[在代码中使 Lucene.Net 线程安全](https://stackoverflow.com/questions/41813610/making-lucene-net-thread-safe-in-the-code)

谢谢。

# jquery - Jquery Ajax WCF 参数

> ID：15145318
> 
> 赞同：2
> 
> 时间：2013-02-28T20:46:06.323
> 
> 标签：jquery, asp.net, ajax, wcf

在传递两个参数时，我无法从 jquery 获得 WCF 调用。如果我稍微更改代码以仅通过一件事就可以了。

Javascript：

```
 $.ajax({
    type: "POST", //GET or POST or PUT or DELETE verb
    url: "/Services/JobNumberService.svc/GetActiveJobNumberByCustomerOrJointBilling", // Location of the service
    data: '{"customerId": "' + customerId + '", "departmentId": "' + departmentId + '"}', //Data sent to server
    contentType: "application/json; charset=utf-8", // content type sent to server
    dataType: "json", //Expected data format from server
    processdata: true, //True or False
    success: function (msg) {//On Successfull service call
        fillDropDownFromLookupList(msg, jobNumberDropDownId);

        prependItemToDropDown('', 'NONE', jobNumberDropDownId); //Add blank item to top of list
    },
    error: ServiceFailed// When Service call fails
}); 
```

服务签名：

```
public LookupList GetActiveJobNumberByCustomerOrJointBilling(int customerId, int departmentId) 
```

这与我如何格式化传入的 json 格式有关。根据 JSONLint 它是有效的，但可能不是 .net 所期望的。

想法受到赞赏。

**编辑**

这就是我在回复中得到的

```
HTTP/1.1 500 Internal Server Error
Server: ASP.NET Development Server/11.0.0.0
Date: Thu, 28 Feb 2013 20:30:17 GMT
X-AspNet-Version: 4.0.30319
Cache-Control: private
Content-Length: 0
Connection: Close 
```

哦，我还试图关闭我的代码调试以追踪错误是什么，但由于某种原因我没有看到任何异常。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T20:49:37.473

您的服务将`int`值作为参数，但您发送的是字符串。如果`customerId`和`departmentId`是数字，则需要删除它们周围的引号，以便将它们解释为数字。

```
'{"customerId": ' + customerId + ', "departmentId": ' + departmentId + '}' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T22:53:25.483

根据您的评论，我相信您的问题可能是您试图将多个参数绑定到您的端点。我不是 WCF 专家，但我知道这在 WebAPI 中不起作用。

通常，解决方法是为您的绑定创建一个模型以解析为：

```
public class CustomerModel { 
    public int customerId; 
    public int departmentId; 
} 
```

然后使您的调用的预期参数：

```
public LookupList GetActiveJobNumberByCustomerOrJointBilling(CustomerModel model) 
```

现在您只需要从您提交的 JSON 对象周围删除引号，并且您的 AJAX 应该按原样工作，因为以下 JSON 对象将正确地反序列化为您的新`CustomerModel`对象：

```
{ "customerId": 1, "departmentId": 1 } 
```

如果保留引号，您可能会得到错误的结果 - 因为解析器会将其接收的数据解释为字符串，而不是 JSON 对象。

# json - 在 Windows 8 Store App 中使用 JSON.NET 反序列化 JSON

> ID：15145320
> 
> 赞同：-1
> 
> 时间：2013-02-28T20:46:17.970
> 
> 标签：json, microsoft-metro, json.net

我正在尝试将以下 JSON 反序列化为我的 Win 8 应用程序中的对象：

```
{
"success":true,
"pharmacies":[
{
"name":"Test Pharmacy",
"phone":null,
"description":"sample description",
"pharmacyid":"1234567",
"pic":"/1341864197.png",
"address":"211 Warren St., #205",
"city":"Newark",
"state":"NJ",
"zipcode":"07103",
"delivery":true,
"dob_check":false,
"name_check":false,
"can_pickup":true,
"barcode_template":"9999999XX"
}
]
} 
```

这是我正在使用的模型：

```
public class PharmacyList
{
    public List<Pharmacy> pharmacies { get; set; }
}
public class Pharmacy
{
    public string pharmacyid { get; set; }
    public string name { get; set; }
    public string phone { get; set; }

} 
```

这是我用来反序列化的代码

```
json = await results.Content.ReadAsStringAsync();
List<PharmacyList> p = JsonConvert.DeserializeObject<List<PharmacyList>>(json); 
```

我收到以下异常：

: 无法将当前 JSON 对象（例如 {"name":"value"}）反序列化为类型 'System.Collections.Generic.List`1[PharmacyHC.Models.PharmacyList]' 因为该类型需要 JSON 数组（例如 [1 ,2,3]) 以正确反序列化。

我是在尝试反序列化为错误的类型，还是应该在 JSON 以不同方式从 API 返回时对其进行格式化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-04T03:08:05.350

我才意识到我犯的愚蠢错误。p 应该被声明为 PharmacyList 类型而不是列表对象，因为 PharmacyList 的类声明已经包含一个 List 对象。

```
List<PharmacyList> p = JsonConvert.DeserializeObject<List<PharmacyList>>(json); 
```

应该是

```
PharmacyList p = JsonConvert.DeserializeObject<PharmacyList>(json); 
```

# jquery - 调整容器大小时，带有浮动右侧的图片正在跳跃

> ID：15145326
> 
> 赞同：0
> 
> 时间：2013-02-28T20:46:44.113
> 
> 标签：jquery, css, width

我在这里有一个网站：http: [//jaco.zz.mu/](http://jaco.zz.mu/)当你选择关于我的时候，然后游戏显示游戏菜单，当 $(...).animate({width: ... }, 200) 正在调整右侧滚动条的大小消失了（仅在通过单击游戏切换游戏菜单引起的调整大小期间，因此我的头像在 about me 页面右侧的样式浮动：对，搞砸了一会儿，

我想做的事：

1.即使在jquery改变宽度时也保持滚动条

或者

2.建议如何将图像一直保持在同一个地方，而不是像现在这样跳跃

我正在使用 chrome，但我认为在任何浏览器中都可以重复相同的错误，

当您检查您将看到的源代码时，整个 css 都在一个文件中，与 js 相同

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:13:28.733

您遇到的问题与浮动图像或浏览器无关。您在 about us 页面上有双滚动条，因为 #frame 的内容和页面一样有滚动条。

如果缩小浏览器窗口高度，您将看到双滚动条问题。

从 #main 中删除 overflow-y 应该可以解决这个问题，但由于页面的创建方式可能会导致其他问题。

# ruby-on-rails - 在 Rails 中动态插入参数到 link_to

> ID：15145330
> 
> 赞同：4
> 
> 时间：2013-02-28T20:46:59.150
> 
> 标签：ruby-on-rails, ajax, submit

在我的主页上，我有一个输入框，用户可以输入搜索查询。然后我有一个link_to，它将使用搜索查询向不同的页面（搜索页面）发出获取请求。按照设计，我不能使用 Rails form_for。

检测到输入框中的更改后，如何将查询动态插入“link_to”？

这是一个模拟：

```
%input{:type => "text", :id => "my_input"}
= link_to "Search", posts_path(query: "my_query_here") 
:javascript
  $(function(){
      $("#my_input").change(function() {
          ... do something here ...
          });
  }); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T21:05:45.093

你不能。您的 javascript 无法侵入您的服务器端代码。但是，它可以破解您的服务器端代码的*结果*，即 HTML。

为确保您的帖子链接的查询正确匹配，您应该将特定 ID 添加到您的`<%= link_to %>`:

```
<%= link_to "Search", posts_path, :id => "search_link" %> 
```

那么你的javascript应该是这样的：

```
$("#my_input").change(function() {
   $("#search_link").attr("href","/posts?q=" + encodeURIComponent( $(this).val() ) );
}); 
```

感谢用户 @beck03076 建议您可以简单地在点击时执行位置更改，而不是在每次输入更改时更新链接：

```
$("#link").click(function() {
    $(this).attr("href", "/posts?q=" + encodeURIComponent($("#my_input").val()));
}); 
```

根据您到底想要做什么，这可能与您的期望不完全相符。例如，如果您有一些其他代码检查链接 URL 以更新页面上的其他内容，则第二种方法将不起作用。另一方面，如果您只想在点击时执行搜索，这将更有效率。

# svn - 获取 authz_svn 工作 Apache Mac os x 服务器

> ID：15145336
> 
> 赞同：0
> 
> 时间：2013-02-28T20:47:23.227
> 
> 标签：svn, apache2, osx-server

我正在尝试在 Mac OS 10.6.8 服务器上实现基于路径的 SVN 访问。如果我使用 htpasswd 跟踪帐户，一切正常。但我想与 Open Directory 集成，以便团队成员可以轻松更改密码。但是，mod_auth_apple 似乎并没有将自己暴露为提供的 authn，因此 authz_svn 不会拾取它可以将其用于身份验证（我在 apache 日志中收到错误消息，显示“未配置 Authn 提供程序。”）。

我知道 Open Directory 可以通过 ldap 获得，但 mod_authn_ldap 没有随 Mac OS X 服务器上安装的 Apache 版本一起提供。我假设如果 authz_svn 包含在股票分配中，有一些方法可以让它工作（但我可能给苹果太多的信任）。有没有人无需使用自定义构建的 Apache 就能完成这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:47:23.227

经过几天的闲逛，发现了如何做到这一点。我添加了 authn_file 模块，然后还添加了 AuthBasicAuthoritative 关闭。这似乎仍然强制使用 mod_auth_apple 进行身份验证，但在未指定 AuthUserFile 时不会失败。它还将身份验证信息传递给 authz_svn，以便它可以正确检查访问控制。我希望更熟悉 apache 的人能够正确解释为什么会这样。

所以我的位置指令现在看起来像

```
<Location "/">
    Options All -Includes -ExecCGI -Indexes +MultiViews
    <IfModule mod_dav.c>
        DAV svn
        SVNPath /Users/path/to/repo
    </IfModule>
    AllowOverride None
    AuthName "Svn Repo"
    AuthType Basic
    AuthzSVNAccessFile /Users/path/to/access/file.txt
    AuthBasicAuthoritative Off
    Require valid-user
</Location> 
```

烦人的是，我必须将 AuthBasicAuthoritative Off 添加到我的服务器托管的任何其他站点。

# c# - OpenID，维护浏览器之间的登录

> ID：15145338
> 
> 赞同：0
> 
> 时间：2013-02-28T20:47:31.877
> 
> 标签：c#, openid, intuit-partner-platform

我需要在两个不同的浏览器（即 Chrome 和 IE）之间维护一个 OpenID 登录。如何才能做到这一点？

我正在使用这段代码：

[https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0200_DevKits_for_Intuit_Partner_Platform/0300_Windows_Azure_Program_for_Intuit_Anywhere/0001_Installing_the_Windows_Azure_SDK_2.0_for_Intuit_Anywhere](https://ipp.developer.intuit.com/0010_Intuit_Partner_Platform/0200_DevKits_for_Intuit_Partner_Platform/0300_Windows_Azure_Program_for_Intuit_Anywhere/0001_Installing_the_Windows_Azure_SDK_2.0_for_Intuit_Anywhere)

这是我的代码：

```
 /// <summary>
    /// Action Result for Index, This flow will create OAuthConsumer Context using Consumer key and Consuler Secret key
    /// obtained when Application is added at intuit workspace. It creates OAuth Session out of OAuthConsumer and Calls 
    /// Intuit Workpsace endpoint for OAuth.
    /// </summary>
    /// <returns>Redirect Result.</returns>
    public RedirectResult Index()
    {
        oauth_callback_url = Request.Url.GetLeftPart(UriPartial.Authority) + ConfigurationManager.AppSettings["oauth_callback_url"];
        consumerKey = ConfigurationManager.AppSettings["consumerKey"];
        consumerSecret = ConfigurationManager.AppSettings["consumerSecret"];
        oauthLink = Constants.OauthEndPoints.IdFedOAuthBaseUrl;
        IToken token = (IToken)Session["requestToken"];
        IOAuthSession session = CreateSession();
        IToken requestToken = session.GetRequestToken();
        Session["requestToken"] = requestToken;
        RequestToken = requestToken.Token;
        TokenSecret = requestToken.TokenSecret;

        oauthLink = Constants.OauthEndPoints.AuthorizeUrl + "?oauth_token=" + RequestToken + "&oauth_callback=" + UriUtility.UrlEncode(oauth_callback_url);
        return Redirect(oauthLink);
    } 
```

```
<add key="webpages:Version" value="1.0.0.0"/>
<add key="ClientValidationEnabled" value="true"/>
<add key="UnobtrusiveJavaScriptEnabled" value="true"/>
<add key="oauth_callback_url" value="/OauthResponse"/>
<add key="menuProxy" value="MenuProxy"/>
<add key="grantUrl" value="OauthGrant"/>
<add key="qbo_base_url" value="https://qbo.intuit.com/qbo1/rest/user/v2/"/>

<!-- Enter the Application Name by replacing YourAppName -->
<add key="openid_identifier" value="https://openid.intuit.com/Identity-YourAppName"/> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-01T16:43:38.253

您需要将 openid 与为该用户获得的 oauth 令牌映射并将其保存在商店中。下次用户登录时，您应该在应用程序中构建逻辑以查找该用户的令牌（基于 openid）。

# wordpress - 用多维数组替换 WordPress 的 wp_list_pages 函数以减少响应时间

> ID：15145339
> 
> 赞同：0
> 
> 时间：2013-02-28T20:47:34.423
> 
> 标签：wordpress, multidimensional-array, query-optimization, response-time

我试图在没有所有可能的参数和东西的情况下，拼凑一个比 WordPress 的 wp_list_pages 更有效（更少的数据库调用等）的函数。wp_posts 表如下所示：

```
ID      post_title          post_parent
1       Skate brand no1     5
2       Skate brand no2     5
3       Products            0
4       Bikes               3
5       Skateboards         3
6       About               0
7       Contact             6
8       Surfboards          3 
```

我想要一个看起来像这样的数组：

```
array
    1 => Products
        array
            1 => Bikes
            2 => Skateboards
                array
                    1 => Skate brand no1
                    2 => Skate brand no2
            3 => Surfboards
    2 => About
        array
            1 => Contact 
```

我应该如何处理这项任务？

## 更新！

通过用@Gedrox 提供的代码替换我网站首页上的大约 4 或 5 个 wp_list_pages，每日平均响应时间从不稳定的 780-1000 毫秒下降到稳定的 595-625 毫秒。惊人的！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:51:00.607

如果您需要完整的站点地图，您应该阅读所有记录（`SELECT`我假设是一条）并在 PHP 代码中按层次组织。

示例代码：

```
// TODO: get this from DB
$list = array(
    array('ID' => 1, 'post_title' => 'Skate brand no1', 'post_parent' => 5),
    array('ID' => 2, 'post_title' => 'Skate brand no2', 'post_parent' => 5),
    array('ID' => 3, 'post_title' => 'Products', 'post_parent' => 0),
    array('ID' => 4, 'post_title' => 'Bikes', 'post_parent' => 3),
    array('ID' => 5, 'post_title' => 'Skateboards', 'post_parent' => 3),
    array('ID' => 6, 'post_title' => 'About', 'post_parent' => 0),
    array('ID' => 7, 'post_title' => 'Contact', 'post_parent' => 6),
    array('ID' => 8, 'post_title' => 'Surfboards', 'post_parent' => 3),
);

$rootPages = array();
$pagesById = array();

foreach ($list as $key => &$row) {
    if ($row['post_parent'] == 0) {
        $rootPages[] = &$row;
    }
}

foreach ($list as $key => &$row) {
    $pagesById[$row['ID']] = &$row;
}

foreach ($list as $key => &$row) {
    if ($row['post_parent'] != 0) {
        $pagesById[$row['post_parent']]['children'][] = &$row;
    }
}

print_r($rootPages); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:02:33.247

据我所知，在您的示例中，您正在考虑您可以拥有任意数量的孩子。

这种方法必须通过使用递归来完成。事实上，在 wordpress 的结构中，如果不进行与节点数量一样多的查询来检查节点是否有子节点，就无法获得整个树。

这是一个树状结构，允许您`n`为每个节点创建子节点。目前，MySQL 不支持递归子查询，因此该表逻辑不允许您在不需要`log(m)`查询的情况下检索完整的“路径”（平均情况，`m`您考虑的树的节点数量在哪里）。

这并不像看起来那么简单。有一些方法可以在一个查询中检索所有树，并且通过这种方式将 sql 查询最小化为一个，但这需要您修改数据表。

这是一个包含示例的更详细的站点，您可以在其中看到一些您可以做的替代方案。

[http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/](http://mikehillyer.com/articles/managing-hierarchical-data-in-mysql/)

**编辑：** 我重复：这不是你可以通过 1 个 mysql 查询而没有递归得到的东西。请不要误解无限孩子的概念。在@Gedrox 的回答中，只有在树中有**3 个**级别时它才会起作用。

# ios - 以编程方式取消停靠键盘？

> ID：15145341
> 
> 赞同：-1
> 
> 时间：2013-02-28T20:47:47.383
> 
> 标签：ios, keyboard

我想我们不可能以编程方式解除虚拟键盘的连接。如果可能的话，当然，我想知道如何。我还认为我们不可能以编程方式打开**拆分键盘**开关（常规 > 键盘）。

反正我的情况如下。我在顶部有一个 tableview 控件，在它下面有一个 textview 控件，在底部有一个工具栏控件。textview 控件是可编辑的。因此，如果用户触摸它，虚拟键盘将打开，覆盖底部工具栏控件。这个键盘将覆盖工具栏控件上的按钮。我该怎么做才能让用户可以访问这些按钮？我确实准备好了**UIKeyboardDidShowNotification**和**UIKeyboardWillHideNotification**的通知，这样我就可以知道用户何时触摸 textview 控件。将工具栏控件放置在最底部以外的其他位置？我希望我不必那样做。也许，在键盘启动时将整个视图向上移动？我想我可以做到。

感谢您的意见。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-01T06:07:28.353

我刚刚决定在虚拟键盘打开时向上移动整个框架。它看起来并不坏。

```
- (void)keyboardWasShown:(NSNotification*)aNotification {
// NSLog(@"It's appeared.");

keyboardup = true;
[self.view setFrame:CGRectMake(self.view.frame.origin.x,self.view.frame.origin.y-300,self.view.frame.size.width,self.view.frame.size.height)]; 
```

}

```
- (void)keyboardWillBeHidden:(NSNotification*)aNotification {
// NSLog(@"It's gone");

keyboardup = false;
    [self.view setFrame:CGRectMake(self.view.frame.origin.x,self.view.frame.origin.y+300,self.view.frame.size.width,self.view.frame.size.height)]; 
```

}

```
- (void)keyboardCallingNotifications {
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWasShown:)
                                             name:UIKeyboardDidShowNotification object:nil];
[[NSNotificationCenter defaultCenter] addObserver:self
                                         selector:@selector(keyboardWillBeHidden:)
                                             name:UIKeyboardWillHideNotification object:nil];
} 
```

# c++ - c++ set::find by object property

> ID：15145342
> 
> 赞同：1
> 
> 时间：2013-02-28T20:47:50.220
> 
> 标签：c++, qt, boost, map, unordered-map

我有一个`object`with a `property`，这是该对象的方法所必需的：

```
class Object {
   Property property;
} 
```

然后我需要对这个对象进行分组。要求在该组中只有具有唯一属性的对象。将这些对象分组是很自然的`set`。我定义 a `operator<`or 如果它是`unordered_set` `operator==`and `hash()`。没关系。然后另一个问题出现了。我需要使用`property`. 所以我需要创建一个类型的对象，`Object`并将这个属性分配给它的字段。这就是我不喜欢的地方。

另一种方法是制作一个`map`. 并复制或创建指向对象属性的指针，然后将它们用作映射中的键。我认为这也是一项双重工作。

我想要类似的东西`set`，但能够不使用整个对象进行搜索，而是使用对象的属性来查找它。例如，我定义以下内容：

```
class Object {
   Property property;
   bool operator<(Object obj) { return property < obj.property; }
   bool operator<(Property obj) { return property < obj.property; }
};
some::set<Object> objSet; 
```

那么我可以执行以下操作：

```
Object obj;
objSet.insert(obj);
objSet.find(obj.property); 
```

你能提供一些对我有帮助的容器实现吗？boost，qt 都可以接受。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T21:08:02.330

[Boost Multi-Index 数组](http://www.boost.org/libs/multi_index/)可能是您所需要的。此示例[对单个集合进行多重排序](http://www.boost.org/libs/multi_index/doc/tutorial/basics.html#multiple_sort)与您正在寻找的内容非常匹配。

```
typedef multi_index_container<
  Object,
  indexed_by<
    ordered_unique<member<Object,Property,&Object::property> >
  > 
> object_set;

object_set oset;
Property prop;
oset.find( prop ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T20:50:46.553

您可以使用[std::equal_range](http://en.cppreference.com/w/cpp/algorithm/equal_range)的 4 参数重载，提供一个比较 a`Property`和 an的比较器`Object`。

```
struct Cmp
{
    bool operator() ( const Object& o, const Property& p ) const
    {
        return o.property < p;
    }
    bool operator() ( const Property& p, const Object& o ) const
    {
        return p < o.property;
    }
};

std::set<Object> s = ....;
Property property_val = ....;
auto r = std::equal_range(s.begin(),s.end(), property_val, Cmp()); 
```

另一种选择是使用`std::find_if`合适的一元谓词。但是您不会从`std::set`or的对数查找中受益`std::equal_range`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T21:33:47.023

我会选择[Boost Multi Index](http://www.boost.org/libs/multi_index/)

如果值没有直接公开，您甚至可以根据需要从 Property 定义键提取器和索引。（为了便于打印，我将 Property 设为 struct 和 Object 公开，但只要 Property::get_value() 是公开的，这将起作用）

```
#include <iostream>
#include <string>
#include <algorithm>

#include <boost/multi_index_container.hpp>
#include <boost/multi_index/ordered_index.hpp>
#include <boost/multi_index/sequenced_index.hpp>
#include <boost/multi_index/identity.hpp>
#include <boost/multi_index/member.hpp>
#include <boost/optional.hpp>

struct by_property_value{};
struct byseq{};
struct by_id{};

struct Property{
    int value;
    std::string name;

    int get_value() const{
        return value;
    }
};

class Object {
public:
   int id;
   Property property;
};

Object make_object(const int&id, const int& value, const std::string& name){
    Object res;
    res.id = id;
    Property p;
    p.value = value;
    p.name = name;
    res.property = p;
    return res;
}

bool operator<(const Object& lhs, const Object& rhs){
    return lhs.id < rhs.id;
}

using namespace boost;
using namespace boost::multi_index;

struct property_value_key_extractor{
    typedef int result_type;

    result_type operator()(const Object& o) const{
        return o.property.get_value();
    }
};

typedef multi_index_container<
    Object,
    indexed_by<
        sequenced<tag<byseq> >
        , ordered_unique<tag<by_id>,member<Object,int,&Object::id> >
        , ordered_non_unique<tag<by_property_value> , property_value_key_extractor >
    >
> Objects;

using namespace std;
int main(int argc, char *argv[]) {

    Objects objects;
    objects.push_back(make_object(1,1000,"a"));
    objects.push_back(make_object(2,200,"b"));
    objects.push_back(make_object(3,50,"c"));

    typedef Objects::index<by_property_value>::type objects_by_property_value;
    typedef objects_by_property_value::iterator property_value_iterator;

    property_value_iterator it = objects.get<by_property_value>().find(200);

    if(it != objects.get<by_property_value>().end()){
        cout << it->id << " " << it->property.get_value() << " " << it->property.name << endl;
    }

    cout << "Print by propety value" << endl;

    for(property_value_iterator it = objects.get<by_property_value>().begin(); it != objects.get<by_property_value>().end(); it++ ){
        cout << it->id << " " << it->property.get_value() << " " << it->property.name << endl;
    }

} 
```

输出：

> 2 200 b
> 按财产价值打印
> 3 50 c
> 2 200 b
> 1 1000 a

# c++ - 编译器错误：架构 x86_64 的未定义符号

> ID：15145346
> 
> 赞同：0
> 
> 时间：2013-02-28T20:48:06.827
> 
> 标签：c++, compiler-errors

当我尝试编译时，我收到了这个奇怪的错误。

体系结构 x86_64 的未定义符号： `readRecipe(std::basic_istream<char, std::char_traits<char> >&, std::basic_ostream<char, std::char_traits<char> >&, Cookbook&)`，引用自：cclDKibb.o 中的 _main ld：未找到体系结构 x86_64 的符号 collect2：ld 返回 1 个退出状态

这是它所指的功能：

```
void readRecipe(std::ifstream &istr, std::ofstream &ostr, Cookbook &cookbook)
{
    int units; std::string name, name2; 
    // Read recipe name. 
    istr >> name; 

     // Build the new recipe Recipe r(name);

    while (1)
    { 
        istr >> units; 
        if (units == 0)
            break; 
        assert (units > 0);

        istr >> name2; 
        Ingredient i(name2, units); 
        r.addIngredient(i);
    }

    // Add it to the list. 
    if (cookbook.addRecipe(r, ostr))
        ostr << "Recipe for " << name << " added" << std::endl; 
    else 
        ostr << "Recipe for " << name << "already exists" << std::endl;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:54:16.153

我想到了。我的函数原型搞砸了。

# java - 类似于 Applaud 的 Phonegap Eclipse 插件

> ID：15145347
> 
> 赞同：3
> 
> 时间：2013-02-28T20:48:07.677
> 
> 标签：java, android, eclipse, cordova

有人知道一个类似于 Applaud 的插件，用于快速开发 Android Phonegap 吗？掌声非常好，但最后支持的 Phonegap 版本是 1.9，从那时起他们没有更新它，我至少需要 Phonegap 2.1 的应用程序。谢谢你，我正在等待你的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-02T23:08:44.877

您应该[将 PhoneGap 下载](http://phonegap.com/download/)到本地文件夹。然后在创建项目时不要使用 Applaud 内置的 PhoneGap，而是将其指向您的 PhoneGap 下载文件夹，如下图所示：

![phonegap 的自定义位置](../Images/df46a13ec083bb787a42390246013900.png)

# javascript - jQuery ui 可选择表来选择/取消选择复选框

> ID：15145349
> 
> 赞同：2
> 
> 时间：2013-02-28T20:48:11.597
> 
> 标签：javascript, jquery, html, user-interface

我正在尝试构建一个表格网格，它代表一周中每一天的每小时块。然后我想做的是使表格中的每个单元格都可以选择，如果选择了该单元格，或者如果选择了多个单元格，则选中一个复选框，然后勾选每个单元格对应的所有复选框。我在这里整理了一个简化版本：http: [//jsfiddle.net/yxAjx/4/](http://jsfiddle.net/yxAjx/4/)。

我真的可以输入可选择的代码 -

`$(function() { $( "#selectable" ).selectable({ filter: ".block" }) });`

例如，如果我单击并拖动“星期二”行中的前 2 个单元格，我希望选中相应的复选框。

包含我无法控制的复选框的表，因为这部分 html 是从我正在使用的软件生成的，但我在示例中复制了它的布局。

我的 Javascript 和 jQuery 知识是有限的，所以会很感激任何关于如何实现这一点的指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-01T00:02:32.743

做这样的事情怎么样：

```
$(function() {
    $( "#selectable" ).selectable({
        filter: ".block",
        selected: function( event, ui ) {
            var row = $(ui.selected).parents('tr').index(),
                col = $(ui.selected).parents('td').index();
            $('#checks').find('tr').eq(row)
                        .children('td').eq(col)
                        .children('input').addClass('checked').prop('checked', true);
            $('#checks input:not(.checked)').prop('checked', false);
        },
        unselected: function( event, ui ) {
            var row = $(ui.unselected).parents('tr').index(),
                col = $(ui.unselected).parents('td').index();
            $('#checks').find('tr').eq(row)
                        .children('td').eq(col)
                        .children('input').removeClass('checked').prop('checked', false);
        }
    });

    $('#checks input').click(function(){
        var row = $(this).parents('tr').index(),
            col = $(this).parents('td').index();
        if($(this).prop('checked')){
             $('#selectable').find('tr').eq(row)
                        .children('td').eq(col)
                        .children('div').addClass('ui-selected');
        }else{
             $('#selectable').find('tr').eq(row)
                        .children('td').eq(col)
                        .children('div').removeClass('ui-selected');
        }
    });
}); 
```

演示：http: [//jsfiddle.net/dirtyd77/yxAjx/9/](http://jsfiddle.net/dirtyd77/yxAjx/9/)

# html - 显示父水平滚动条和子垂直滚动条

> ID：15145354
> 
> 赞同：1
> 
> 时间：2013-02-28T20:48:29.840
> 
> 标签：html, css

我有一个这样的自定义时间线视图：http: [//jsfiddle.net/B4xRb/1/](http://jsfiddle.net/B4xRb/1/)

内部垂直滚动仅影响标题下方的行。父水平滚动影响整个时间轴。

```
<div class="parentDiv">
    <div class="monthHeader"></div>
    <div class="lanes"></div>
</div> 
```

但是，我如何构造它以便可以看到垂直滚动条

*   调整行数据，因为它可能非常宽。
*   最初向右滚动，我想要它，以便在加载页面时，两个滚动条都可见

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:07:27.880

这是我想出的解决方案，使用 jQuery：http: [//jsfiddle.net/eB8WQ/6/](http://jsfiddle.net/eB8WQ/6/)

首先，要隐藏第二个外部垂直滚动条，添加此代码

```
html, body {
    overflow-y: hidden;
} 
```

对于`.lanes`，您要隐藏水平滚动条并将初始设置`width`为 100%。

```
width: 100%;
overflow-x: hidden; 
```

接下来，您要使用的javascript`.lanes`在滚动时将宽度设置为100％（以避免混乱的闪烁问题），当您完成滚动时，它会计算水平滚动条的位置并将该值添加到宽度你的`body`元素。使用`$.data`函数来存储值。

更多信息`$.data`：[http ://api.jquery.com/jQuery.data/](http://api.jquery.com/jQuery.data/)

```
$('.parentDiv').scroll(function() {
        $('.lanes').css("width", $('.monthHeader').width());
});
$('.parentDiv').scroll(function() {
    clearTimeout($.data(this, 'scrollTimer'));
    $.data(this, 'scrollTimer', setTimeout(function() {
        $('.lanes').css("width", $('.parentDiv').scrollLeft() + $('body').width() + "px");
    }, 100));
}); 
```

一些代码取自[这个先前的答案](https://stackoverflow.com/questions/14035083/jquery-bind-event-on-scroll-stops)。

# c++ - 我得到一个 STATUS_ACCESS_VIOLATION (C++)

> ID：15145355
> 
> 赞同：0
> 
> 时间：2013-02-28T20:48:35.243
> 
> 标签：c++, linked-list

我正在尝试在 LinkedList.ccp 文件中测试我的删除方法。当我处于调试模式时，它会从列表中完全删除所有 4s，但随后我收到以下消息：

```
 1 [main] trainlinkedlist 9904 exception::handle: Exception: STATUS_ACCESS_VIOLATION
614 [main] trainlinkedlist 9904 open_stackdumpfile: Dumping stack trace to trainlinkedlist.exe.stackdump 
```

有什么想法我需要做些什么来解决这个问题？

主文件

```
#include "LinkedList.h"
#include <iostream>     //ADDED BECAUSE IT IS NEED FOR PROGRAM TO RUN
#include <cstdlib>
using namespace std;    //ADDED BECAUSE IT IS NEED FOR PROGRAM TO RUN

/*
 * 
 */

int main() {
    LinkedList Train;
    srand(time(0));
        Train.InsertAtEnd(4);
    Train.InsertAtEnd(4);
    Train.InsertAtEnd(4);
    Train.InsertAtEnd(4);
        Train.InsertAtEnd(4);
    Train.InsertAtEnd(5);
    Train.InsertAtEnd(4);
    Train.InsertAtEnd(4);
    for(int i=0;i<5;i++){
        Train.InsertAtEnd((rand()%20));
    }
    Train.InsertAtEnd(4);
    Train.InsertAtEnd(4);
    Train.InsertAtEnd(4);
    Train.InsertAtEnd(4);
        Train.InsertAtEnd(35);
    Train.InsertAtEnd(2);
    Train.InsertAtEnd(4);
    Train.InsertAtEnd(4);
        Train.InsertAtEnd(4);
    Train.InsertAtEnd(4);
    Train.InsertAtEnd(5);
    Train.InsertAtEnd(4);
        Train.InsertAtEnd(4);
    Train.InsertAtEnd(6);
    Train.InsertAtEnd(4);
    Train.InsertAtEnd(4);
    Train.Delete(4);
    Train.Display();
    return 0;
} 
```

链表.h

```
#ifndef LINKEDLIST_H
#define LINKEDLIST_H

typedef int ElementType;
struct Node {
    ElementType data;
    Node * next;
};

class LinkedList
{
 public: 
   LinkedList();//create an empty list
   bool empty(); // return true if the list is empty, otherwise return false
   void InsertAtEnd(ElementType x);//insert a value x at the end of list
   void Delete(ElementType x); //if value x is in the list, remove x
   void Display();// Display the data values in the list
  private:
Node * first;   //The first node in a Linked list
};

#endif  /* LINKEDLIST_H */ 
```

链表.ccp

```
#include "LinkedList.h"
#include <iostream>
using namespace std;

/**
 * LinkedList() sets first as a Dummy Node
 */
LinkedList::LinkedList() {
    first = NULL;
}

bool LinkedList::empty() {
    if (first == NULL) {  //when this is true the list is empty
        return true;
    } else {
        return false;   //when this is false the list is NOT empty
    }
}

void LinkedList::InsertAtEnd(ElementType x) {
    Node *p;
    p = first;
    if(empty()){
        p = new Node;
        p->data = x;
        p->next = NULL;
        first=p;
        return;
    }
    while (p != NULL) { //this while loop looks for the end of the list
        if (p->next == NULL) {  //this is a check for if node p is the last node in the list
            p->next = new Node; //a new node is created at the end of the list with data value of x and the next is NULL
            p->next->data = x;
            p->next->next = NULL;
            break;      //breaks the while loop when a new node is added
        }
        p = p->next;
    }
}

void LinkedList::Delete(ElementType x) {
    Node *p;    //p is used to the find Node that will be deleted
    Node *q;    //q keeps track of the node before the one that is deleted
    p = first;
    q = NULL;
    while(p->data==x){
        first=first->next;
        p->data =0;
        p->next=NULL;
        delete p;
        p=first;
    }
    while(p!=NULL){     //this while loop goes through the list
        if(p->next->data==x){
            q=p->next;
            p->next=p->next->next;
            q->data=0;
            q->next=NULL;
            delete q;
            q=NULL;
        }else{
            p=p->next;
        }
//        if(p->data==x){ //check for the node that needs to be deleted
//            q->next=p->next;    //connects q's next to the p's next
//            delete p;   //deletes the node p points to
//            p->next= NULL;
//        }
//        q=p;
//        p=p->next;
    }
}

void LinkedList::Display() {
    Node *p;
    p = first;
    while (p != NULL) {
        if(p->data==-1){        //check used to skip the dummy node
            p=p->next;
            continue;
        }
        cout << p->data << " "; //prints out all the values in the list
        p = p->next;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:59:51.033

您没有进行足够的检查并且可能取消引用 NULL 指针。

`while(p->data==x)`不先检查是否`p`为0。

`if(p->next->data==x)`不先检查是否`p->next`为0。

# assembly - windows x64 汇编器？

> ID：15145357
> 
> 赞同：0
> 
> 时间：2013-02-28T20:48:49.153
> 
> 标签：assembly, 64-bit

我最近从 32 位升级到 64 位计算机。我以前使用 masm32 进行 x86 程序集。我的计算机可以运行 32 位进程，但我更愿意使用我所有的计算机功能并编写 x64 汇编程序。我不想安装额外的东西（比如 ide）来运行汇编程序。我应该使用什么汇编程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T20:57:23.170

是您正在寻找的适用[于 x64 的 MASM吗？](http://msdn.microsoft.com/en-ca/library/hb5z4sxd%28v=vs.90%29.aspx)

如果您想避免安装 Visual Studio，可以使用[YASM](http://yasm.tortall.net)、[NASM](http://www.nasm.us)和[FASM](http://www.flatassembler.net)。

[Intel 的 Introduction to x64 Assembly](http://software.intel.com/en-us/articles/introduction-to-x64-assembly/)中提到了以上所有内容。

# c - 如何在c中读取由“：”分隔的两个字符串

> ID：15145365
> 
> 赞同：1
> 
> 时间：2013-02-28T20:49:21.513
> 
> 标签：c, string, file, scanf

我需要知道如何读取字符串并将其分成两部分，如下例所示。

我在文件@amanda:@bruna 中有这个字符串，但我不能作为单独的单词读取，并且每个都存储在两个不同的变量中，如下所示：

```
char userA[20];
char userB[20];
scanf("%s:%s", userA, userB); 
```

你能帮助我吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T20:52:13.270

使用扫描集来防止第一次`%s`消耗整行，因为它`%s`只会在遇到空格时停止消耗：

```
if (scanf("%19[^:]:%19s", userA, userB) == 2)
{
    /* 'userA' and 'userB' have been successfully assigned. */
} 
```

where`%19[^:]`表示*最多读取 19 个字符，但在遇到冒号时停止*。指定宽度可防止缓冲区溢出。始终检查[`scanf()`](http://en.cppreference.com/w/c/io/fscanf)返回赋值数的结果，以确保后续代码不会处理陈旧或未初始化的变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T20:51:46.750

```
char buf[60];
char userA[20];
char userB[20];
char *ptr;

scanf("%s", buf);
ptr = strchr(buf, ':');
if (ptr == NULL)
{
  // whatever you want to do if there's no ':'
}
*ptr = 0;
strcpy(userA, buf);
strpcy(userB, ptr + 1); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:04:19.767

没有必要使用`scanf`. （事实上​​，在大学课程之外，`scanf`几乎没有任何目的）。只需读取数据：

```
int main( void )
{
  char line[ 80 ];
  char *userA, *userB;
  fgets( line, sizeof line, stdin );  /* Need to check that a full line was read */
  userA = line;
  userB = strchr( line, ':' );  /* Need to check that the input contains a colon */
  *userB++ = '\0'; 
```

# vb.net - 我如何初始化我的数组列表

> ID：15145372
> 
> 赞同：1
> 
> 时间：2013-02-28T20:49:38.550
> 
> 标签：vb.net, arraylist

我有一个将项目添加到我的数组列表的函数。我的问题是它一次只能保存一个项目，因为每次单击按钮时它都会重新初始化点亮的数组。VB 中的语法是什么，仅在尚未创建数组时才对其进行初始化？

```
 Dim itemSelectAs New ArrayList()
 Dim Quantities As New ArrayList()
 Dim itemQtyOrdered As Integer

Public Sub ShtickDataList_ItemCommand(ByVal source As Object, ByVal e As System.Web.UI.WebControls.ListViewCommandEventArgs) Handles ShtickDataList.ItemCommand

    If e.CommandName = "addToCart" Then
        Dim itemQuantity As DropDownList = e.Item.FindControl("QuantityDropDown")
        itemQtyOrdered = itemQuantity.SelectedValue
        ItemSelect.Add(e.CommandArgument)
        Quantities.Add(itemQtyOrdered)

        Session("itemInCart") = ItemSelect
        Session("quantities") = Quantities

        viewInvoice()

    End If

End Sub

Protected Sub viewInvoice()

    Dim itemSelected As ArrayList = DirectCast(Session("itemInCart"), ArrayList)
    Dim QuantityofItem As ArrayList = DirectCast(Session("quantities"), ArrayList)

    Dim conn As SqlConnection
    Dim comm As SqlCommand
    Dim reader As SqlDataReader
    Dim purimConnection2 As String = ConfigurationManager.ConnectionStrings("Purim").ConnectionString
    conn = New SqlConnection(purimConnection2)

    comm = New SqlCommand("SELECT ProductName FROM Products WHERE ProductID = @ProductID", conn)

    Dim i As Integer
    For i = 0 To ItemSelect.Count - 1
    comm.Parameters.Add("@ProductID", Data.SqlDbType.Int)
    comm.Parameters("@ProductID").Value = (ItemSelected.Count - 1)

    'Next

    Try
        conn.Open()
        reader = comm.ExecuteReader()
        ViewCartlink.Text = "View Cart: (" & ItemSelected.Count & ")"

    Finally
        conn.Close()
    End Try
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T20:54:42.410

首先，您需要确定数组列表的尺寸。

```
 Dim array_list as ArrayList() 
```

然后你可以实例化一个

```
 array_list = new ArrayList 
```

或者您可以将其合并为一个步骤：

```
 Dim array_list = new ArrayList() 
```

之后，您可以使用从数组列表中添加和删除元素

```
 array_list.add(obj) 
```

并删除

```
 array_list.remove(obj) 
```

看起来您的问题与访问数组列表的成员有关。新项目总是添加到数组列表的末尾。要直接访问它们，您将需要它们的索引。如果您知道要访问的项目的索引，请使用

```
 array_list(i) 
```

如果不这样做，则需要遍历数组。为此，您有两个选择。您可以使用“for each”，也可以使用普通的 for 循环并使用 array_list.count 作为上限。

每次调用按钮单击菜单时，您都在重新创建两个会话值。您需要将它们从 Session 变量中拉出，并将它们放入局部变量中，然后将它们放回会话变量中。

你的按钮方法应该是：

```
 Public Sub ShtickDataList_ItemCommand(ByVal source As Object, ByVal e As System.Web.UI.WebControls.ListViewCommandEventArgs) Handles ShtickDataList.ItemCommand

   if isNothing(itemSelect) Then itemSelect = New ArrayList()
   if isNothing(itemQtyOrdered) Then itemQtyOrdered= New ArrayList()

   If e.CommandName = "addToCart" Then

       Dim itemQuantity As DropDownList = e.Item.FindControl("QuantityDropDown")
       itemQtyOrdered = itemQuantity.SelectedValue
       ItemSelect.Add(e.CommandArgument)
       Quantities.Add(itemQtyOrdered)

       Session("itemInCart") = ItemSelect
       Session("quantities") = Quantities

       viewInvoice()

   End If

 End Sub 
```

并将您的全球电话更改为：

```
 Dim itemSelect As ArrayList() = Session("itemInCart")
 Dim Quantities As New ArrayList() = Session("quantities") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T20:56:46.300

在按钮单击事件之外定义您的数组。（表格级别）

然后在按钮点击事件中试试这个：

```
If myArrayList Is Nothing then
   'initializes the array list only if that hasn't happened yet
   myArrayList = new ArrayList
End If
'adds the item to the existing list without causing it to reintialize
myArrayList.add(item) 
```

这样，如果尚未初始化，则将其初始化，但如果已经初始化，则不会。如果它是在表单级别初始化的，即......它已经声明为新的，那么你可以添加它。

基本上确保您没有在按钮单击事件中为 arrayList 调用 New。

网络表单编辑：

您可能应该检查初始化arrayList 的位置。就像在 Page_Load 中一样：

```
If Not Page.IsPostBack Then
  myArrayList = New ArrayList
End If 
```

[MSDN 回传](http://msdn.microsoft.com/en-us/library/system.web.ui.page.ispostback.aspx)

# php - 函数错误。.php 文件

> ID：15145378
> 
> 赞同：-3
> 
> 时间：2013-02-28T20:50:11.920
> 
> 标签：php

我的 wordpress 博客中的所有草稿现在都有以下错误：

> 警告：stripos() [function.stripos]: needle 不是 /home/brightonkeller/brightontheday.com/wp-includes/functions.php 中第 658 行的字符串或整数
> 
> 警告：stripos() [function.stripos]: needle 不是 /home/brightonkeller/brightontheday.com/wp-includes/functions.php 第 661 行中的字符串或整数

有人知道这意味着什么或该怎么做吗？我看到了有关该主题的其他一些线程，但我对修改我的主题的任何 functions.php 文件感到紧张。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:47:50.717

[似乎有些人遇到了完全相同的问题，请单击此处阅读他们正在讨论的内容](http://wordpress.org/support/topic/getting-an-error-5)。

* * *

**可能的解决方案：**

我会通过打开支持票联系您的虚拟主机，并要求他们至少将您的 php 版本升级到 5.3。

* * *

`public_html`在联系他们之前，您可以通过在根目录中创建一个文件来验证您的 php 版本，将其命名为类似的名称`myphp.php`，然后将以下内容添加到文件中：

```
<?php
phpinfo();
?> 
```

然后通过访问 brightontheday.com/myphp.php 导航到该页面 - 您将在页面顶部看到版本（**注意**：一些网络主机禁用此功能，因此您可能会看到错误或访问被拒绝消息。）一次您已经看到它，然后删除您刚刚创建的那个文件 (myphp.php)。

# java - 与数据库的网络连接未关闭

> ID：15145379
> 
> 赞同：0
> 
> 时间：2013-02-28T20:50:24.070
> 
> 标签：java, postgresql

我有一个守护进程，它大量使用后端 PostgreSQL 数据库。使用 netstat，我可以看到在 ESTABLISHED 中打开的数据库的网络连接稳步增加。

内存转储显示大量`java.lang.ref.Finalizer`. 此外，线程转储显示所有线程：

```
"pool-1-thread-6" prio=10 tid=0x0000000000e4d800 nid=0x10eb waiting on condition     [0x00007f3736c5b000]
 java.lang.Thread.State: WAITING (parking)
    at sun.misc.Unsafe.park(Native Method)
    - parking to wait for  <0x00000000c5524bf8> (a java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject)
    at java.util.concurrent.locks.LockSupport.park(LockSupport.java:186)
    at java.util.concurrent.locks.AbstractQueuedSynchronizer$ConditionObject.await(AbstractQueuedSynchronizer.java:2043)
    at java.util.concurrent.LinkedBlockingQueue.take(LinkedBlockingQueue.java:442)
    at java.util.concurrent.ThreadPoolExecutor.getTask(ThreadPoolExecutor.java:1068)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1130)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:615)
    at java.lang.Thread.run(Thread.java:722) 
```

我怀疑这是因为我使用了一个固定的线程池执行器服务，并且这些线程显示执行器试图结束具有数据库资源的线程打开。

这里是我关闭各种数据库资源的地方：

```
 InitialContext ctx = null;
    Connection conn = null;
    PreparedStatement ps = null;
    ResultSet rs = null;

           ... 

    } finally {
        try {
            if (rs != null) {
                rs.close();
            }
        } catch (SQLException e) {
            Notification n = new Notification(this,e);
            n.log();
        }
        try {
            if (ps != null) {
                ps.close();
            }
        } catch (SQLException e) {
            Notification n = new Notification(this,e);
            n.log();
        }
        try {
            if (conn != null) {
                conn.close();
            }
        } catch (SQLException e) {
            Notification n = new Notification(this,e);
            n.log();
        }
        try {
            if (ctx != null) {
                ctx.close();
            }
        } catch (NamingException e) {
            Notification n = new Notification(this,e);
            n.log();
        }
    } 
```

我在这方面花费了大量时间，但无论我做什么，我似乎都无法从这段代码中拔出刺。

如果可以，请提供帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T20:57:05.877

作为第一步，我建议使用新的自动资源管理功能来关闭您的连接等。

[http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html](http://docs.oracle.com/javase/tutorial/essential/exceptions/tryResourceClose.html)

# iphone - 代码签名错误：应用程序代码签名验证失败 Xcode Archive

> ID：15145382
> 
> 赞同：0
> 
> 时间：2013-02-28T20:50:26.623
> 
> 标签：iphone, ios, objective-c, xcode, xcode4

我有一个没有错误的 iPhone 应用程序，并且我的应用程序正在正常存档，然后我在验证我的应用程序时遇到了问题，我收到消息“没有身份可用于签名”。

所以 Stack 上的一个问题告诉我下载我的分发证书并将其拖到我的应用程序中。我这样做了，然后出现以下错误。

我从我的项目中删除了文件，它运行良好，但是当我归档我的应用程序时，我收到了警告。我尝试了很多事情都无济于事。

```
(null):  Application failed codesign verification.  The signature was invalid, contains disallowed entitlements, or it was not signed with an iPhone Distribution Certificate. (-19011) 

Validate /Users/blakeloizides/Library/Developer/Xcode/DerivedData/Novolam-gwqochjjqgryxnedazbaosfjksmz/Build/Intermediates/ArchiveIntermediates/Novolam/InstallationBuildProductsLocation/Applications/Novolam.app
    cd /Users/blakeloizides/NETNRG/Novolam
    setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/usr/bin:/bin:/usr/sbin:/sbin"
    setenv PRODUCT_TYPE com.apple.product-type.application
    /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/Validation /Users/blakeloizides/Library/Developer/Xcode/DerivedData/Novolam-gwqochjjqgryxnedazbaosfjksmz/Build/Intermediates/ArchiveIntermediates/Novolam/InstallationBuildProductsLocation/Applications/Novolam.app

warning: Application failed codesign verification.  The signature was invalid, contains disallowed entitlements, or it was not signed with an iPhone Distribution Certificate. (-19011)Executable=/Users/blakeloizides/Library/Developer/Xcode/DerivedData/Novolam-gwqochjjqgryxnedazbaosfjksmz/Build/Intermediates/ArchiveIntermediates/Novolam/InstallationBuildProductsLocation/Applications/Novolam.app/Novolamcodesign_wrapper-4.1: using Apple CA for profile evaluation/Users/blakeloizides/Library/Developer/Xcode/DerivedData/Novolam-gwqochjjqgryxnedazbaosfjksmz/Build/Intermediates/ArchiveIntermediates/Novolam/InstallationBuildProductsLocation/Applications/Novolam.app: valid on disk/Users/blakeloizides/Library/Developer/Xcode/DerivedData/Novolam-gwqochjjqgryxnedazbaosfjksmz/Build/Intermediates/ArchiveIntermediates/Novolam/InstallationBuildProductsLocation/Applications/Novolam.app: satisfies its Designated Requirementtest-requirement: code failed to satisfy specified code requirement(s)codesign_wrapper-4.1: failed to execute codesign(1) - (null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T03:40:20.323

删除您`Provisioning Profile`的`iPhone Configuration Utility`并下载新的并添加到您的图书馆。您必须去`Keychain Access -> Preferences`并选择**最佳尝试**或**关闭**以下两件事：

```
1.在线证书状态协议（OCSP）
 2.证书撤销列表（CRL）

```

检查此答案以供[参考](https://stackoverflow.com/questions/9985320/code-signing-error-application-failed-codesign-verification#answer-10059876)

# forms - 表单过滤器之间的 MS-Access

> ID：15145383
> 
> 赞同：0
> 
> 时间：2013-02-28T20:50:27.393
> 
> 标签：forms, ms-access, filter, between

您好，我创建了一个访问表单，如下所示：![http://imgur.com/XS0vE08](../Images/78394a81e4fcc366de3c1ebabd4f85ed.png)

我可以做到，所有过滤器都可以工作，除了年份和长度过滤器。Year 框未绑定，左侧称为**Year1**，右侧称为**Year2**。我尝试使用**Me.Filter**代码，但它不起作用。它不会出现错误，只是不会过滤我的数据。所以我需要做的是让用户可以在**Year1**和**Year2**中输入一年，并过滤这两年之间的数据。例如，他们将 2000 放在**Year1**中，将 2010 放在**Year2**中，然后当他们运行查询时，它只显示从 2000 年到 2010 年的数据。

这是我目前正在使用的代码：

```
 Private Sub Year2_AfterUpdate()
 Me.Filter = "[Year] BETWEEN #" & Me.Year1 & "# AND #" &  Me.Year2 & "#"
 Me.Filteron = true 
```

任何帮助将非常感激！:) （如果你能解释什么代码做什么，那也将不胜感激，这样我就可以自己学习编写它，这样我就能更好地理解！谢谢！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:43:22.087

当您在过滤器中使用日期文字时，您只能使用**“#”字符。**如果它只是一个数字，您将使用：

```
 Me.Filter = "[Year] BETWEEN " & Me.Year1 & " AND " &  Me.Year2 
```

如果 [Year] 实际上是一个日期，那么您应该使用：

```
 Me.Filter = "[Year] BETWEEN #01/01/" & Me.Year1 & "# AND #12/31/" &  Me.Year2 & "#" 
```

`[Year] BETWEEN #01/01/2010# AND #12/31/2011#`如果您在年份文本框中输入 2010 和 2011，这将评估为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-25T11:46:05.193

您必须使用查询名称 (frmAufträgeQuery) 而不是表单 (frmAufträge)：

出错时继续下一步

FromDate = "01.01.2021"

ToDate = "01.04.2021"

Me.Filter = "([frmAufträgeQuery].[Administrativ abgeschlossen] 介于 #" & Format(FromDate, "yyyy-mm-dd") & "# AND #" & Format(ToDate, "yyyy-mm-dd") & “#)”

Me.FilterOn = 真

# c# - 从 Windows 服务器应用到 FTP 文件

> ID：15145384
> 
> 赞同：0
> 
> 时间：2013-02-28T20:50:28.613
> 
> 标签：c#, iis, windows-services, windows-server-2012

我有一个 ASP.NET MVC 网站，客户端将文件作为订单流程的一部分发布到该网站。这些文件最大可达 200MB。我需要通过 FTP 将这些文件传输到另一台服务器。我真的不想给 IIS 带来负担。因此正在考虑编写 c# 应用程序来处理每 x 分钟运行一次的文件传输并使用 Windows 服务来运行它。

这会是一个好的解决方案，还是有什么东西可以为我处理这个问题？

如果我编写了应用程序，我应该让 Windows 服务处理调度，即每 x 分钟启动一次应用程序，还是应该让它在启动时启动应用程序并让应用程序处理睡眠/唤醒。

我在设想一些非常基本的东西。使用 SQL 跟踪需要上传和已上传的内容。窗口服务是否还有其他特别的注意事项？

该网站在 windows 2012 vps 上的 iis8 上运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:56:17.153

一个架构技巧——使用简单的可执行文件和计划任务，而不是编写服务。你不需要担心几个月的内存泄漏。

您可能无需编写任何代码即可实现这一点——您可以非常有效地[编写 ftp.exe 脚本。](http://support.microsoft.com/kb/555976)我只是编写脚本来推送所有文件，然后假设 FTP.EXE 以 0 退出，清理上传文件夹并冲洗并重复。

# netbeans - Nutiteq Maps JavaMe 混淆错误

> ID：15145385
> 
> 赞同：0
> 
> 时间：2013-02-28T20:50:32.607
> 
> 标签：netbeans, java-me, maps, obfuscation, proguard

我有一个使用 Nutiteq 地图的 midlet，我在 Netbeans 中开发了它。我将库 jar 添加到项目中。一切正常。问题是当我混淆时，我得到了这个：

```
Note: duplicate definition of library class [javax.microedition.media.control.ToneControl]
Note: duplicate definition of library class [javax.microedition.media.control.VolumeControl]
Note: duplicate definition of library class [javax.microedition.media.Control]
Note: duplicate definition of library class [javax.microedition.media.Controllable]
Note: duplicate definition of library class [javax.microedition.media.Manager]
Note: duplicate definition of library class [javax.microedition.media.MediaException]
Note: duplicate definition of library class [javax.microedition.media.Player]
Note: duplicate definition of library class [javax.microedition.media.PlayerListener]
Note: duplicate definition of library class [javax.microedition.media.protocol.DataSource]
Note: there were 9 duplicate class definitions.
Warning: com.nutiteq.fs.MotoFileSystem: can't find referenced class com.motorola.io.FileConnection
Warning: com.nutiteq.fs.MotoFileSystem: can't find referenced class com.motorola.io.FileSystemRegistry
Warning: com.nutiteq.fs.MotoFileSystem: can't find referenced class com.motorola.io.FileSystemRegistry
Warning: com.nutiteq.fs.MotoFileSystem: can't find referenced class com.motorola.io.FileConnection
Warning: com.nutiteq.fs.MotoFileSystem: can't find referenced class com.motorola.io.FileConnection
Warning: com.nutiteq.fs.MotoFileSystem: can't find referenced class com.motorola.io.FileConnection
Warning: com.nutiteq.fs.MotoFileSystem: can't find referenced class com.motorola.io.FileConnection
Warning: com.nutiteq.fs.IDENFileSystem: can't find referenced class com.motorola.io.file.FileConnection
Warning: com.nutiteq.fs.IDENFileSystem: can't find referenced class com.motorola.io.file.FileConnection
Warning: com.nutiteq.fs.IDENFileSystem: can't find referenced class com.motorola.io.file.FileConnection
Warning: com.nutiteq.fs.IDENFileSystem: can't find referenced class com.motorola.io.file.FileConnection
Warning: com.nutiteq.fs.IDENFileSystem: can't find referenced class com.motorola.io.file.FileConnection
Note: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find dynamically referenced class com.siemens.mp.game.Light
Note: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find dynamically referenced class com.motorola.phonebook.PhoneBookRecord
Note: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find dynamically referenced class com.nokia.mid.ui.FullCanvas
Note: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find dynamically referenced class net.rim.device.api.system.Application
Note: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find dynamically referenced class com.mot.iden.util.Base64
Note: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find dynamically referenced class mmpp.media.MediaPlayer
  You should check if you need to specify additional program jars.
Warning: there were 12 unresolved references to classes or interfaces.
     You may need to specify additional library jars (using '-libraryjars'),
     or perhaps the '-dontskipnonpubliclibraryclasses' option.
Error: Please correct the above warnings first.
Note: there were 6 unresolved dynamic references to classes or interfaces. 
```

我正在使用 lwuit 库，但在包含地图库之前我没有任何问题。

我做了这个页面所说的：[http ://www.nutiteq.com/j2me-maps-forum](http://www.nutiteq.com/j2me-maps-forum)

现在我明白了：

```
.
.
.
te: duplicate definition of library class [com.sun.cldc.i18n.uclc.DefaultCaseConverter]
Note: duplicate definition of library class [com.sun.j2mews.xml.rpc.OperationImpl]
Note: duplicate definition of library class [com.sun.j2mews.xml.rpc.SOAPDecoder]
Note: duplicate definition of library class [com.sun.j2mews.xml.rpc.SOAPEncoder]
Note: duplicate definition of library class [com.sun.ukit.jaxp.Parser]
Note: duplicate definition of library class [com.sun.ukit.jaxp.ParserFactory]
Note: duplicate definition of library class [com.sun.ukit.jaxp.ReaderUTF16]
Note: duplicate definition of library class [com.sun.ukit.jaxp.ReaderUTF8]
Note: there were 564 duplicate class definitions.
Note: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find dynamically referenced class com.motorola.phonebook.PhoneBookRecord
Note: com.sun.lwuit.impl.midp.GameCanvasImplementation: can't find dynamically referenced class mmpp.media.MediaPlayer
Note: there were 2 unresolved dynamic references to classes or interfaces.
  You should check if you need to specify additional program jars.
Unexpected error while evaluating instruction:
Class       = [a]
Method      = [a$623fafe4(Ljava/lang/String;CI)[Ljava/lang/String;]
Instruction = [85] iload_3 v3
Exception   = [java.lang.NullPointerException] (null)
Unexpected error while performing partial evaluation:
Class       = [a]
Method      = [a$623fafe4(Ljava/lang/String;CI)[Ljava/lang/String;]
Exception   = [java.lang.NullPointerException] (null)
Error: null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T10:26:38.720

重复的类通常是无害的，但它们表明您的配置指定了 -libraryjars 选项，其中包含两次包含相同类的 jar。删除这些重复项会更干净。否则，您可以指定 -dontnote 来隐藏这些注释。

意外错误是 ProGuard 中的一个错误。您应该确保您使用的是最新版本（此时为 4.8 或 4.9 beta）。如果问题仍然存在，您应该在[ProGuard 网站](http://sourceforge.net/p/proguard/bugs/)上报告或邮寄给我，并附上一个允许我重现问题的小项目。您可以通过使用 -dontoptimize 关闭优化来解决它。

# c++ - 如何在 CUDA 的寄存器中创建对象？

> ID：15145386
> 
> 赞同：0
> 
> 时间：2013-02-28T20:50:36.677
> 
> 标签：c++, object, memory, cuda

我有一些课

```
class A {
int bla;
float blabla;
}; 
```

有没有办法`A`在**线程注册表中**创建对象？因为，`new`并且`malloc`正在**全局内存**中分配空间（我不想这样做）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T07:49:09.700

内核中的每个**局部**变量都**分配**在GPU的**寄存器文件中。**除非您已经使用了所有寄存器。寄存器文件的使用是自动处理的，所以你不能做太多的事情，但改变你的代码并使用编译器标志检查使用情况：`--ptxas-options=-v`。当寄存器文件已满时，数据会溢出到缓存 L1（如果启用）。否则数据进入缓存 L2。

示例内核将是：

```
__global__ regKernel(int length)
{
 A localA; // goes to register file
 int threadId = threadIdx.x;// goes to register file
 if (threadId < length)
 {
   localA.bla++;
   localA.blabla = 0.4;
 }
} 
```

# php - 无需重新加载页面即可显示 php 测验的结果

> ID：15145390
> 
> 赞同：0
> 
> 时间：2013-02-28T20:50:49.687
> 
> 标签：php, javascript, jquery, forms

这是一个简单的，但我就是想不通。

我有一个简单的表格：

```
<form action='#' method="post">

    <label for="question-1">Question One</label>

    <input type="radio" name="question-1-answers" value="1" />
    <input type="radio" name="question-1-answers" value="2" />

    <label for="question-2">Question Two</label>

    <input type="radio" name="question-2-answers" value="1" />
    <input type="radio" name="question-2-answers" value="2" />

    <input type="submit" value="Submit Quiz" class="submit"/>

</form> 
```

然后我有简单的 php`results.php`来计算结果：

```
<?php

$answer1 = $_POST['question-1-answers'];
$answer2 = $_POST['question-2-answers'];

    $result = 0;

     $a =array( 0=> "$answer1", 1=> "$answer2"); 

    $result = array_sum($a)/count(array_filter($a));
    echo "Your score is: "; echo round($result, 1); 
?> 
```

这一切都很好，但是当用户按下提交按钮时，我希望结果显示在与测验相同的页面上，而无需重新加载页面。我知道我需要使用 jQuery，但我所看到的任何地方都有不同的方法，但没有任何效果。

编辑：

所以我添加了以下内容：

```
 $function() {
   $.get('../results.php', function(data) {
   $('.result').html(data);
   alert('Load was performed.');
    });
} 
```

和

```
<div class="result">The results are:</div> 
```

并更新了提交按钮`<input type="submit" value="Submit Quiz" class="submit" onclick="function()"/>`

当我单击提交按钮时，我仍然没有得到任何东西，当我检查控制台时，我得到的唯一错误是：`Uncaught SyntaxError: Unexpected token {`但我不知道我在哪里有额外的 {.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:52:04.880

您需要使用 jQuery 加载 PHP 测验结果 HTML 页面。然后你想将它注入到 dom 中。

包括 jQuery，然后这个示例应该可以工作，假设测验结果页面位于 (php/quizResult.php) - 您可以根据需要进行设置

jQuery

```
$.get('php/quizResult.php', function(data) {
  $('.result').html(data);
  alert('Load was performed.');
}); 
```

HTML

```
<div class="result"></div> 
```

将 jQuery 放在 JavaScript 中的函数中，并在您想要加载结果时调用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:57:06.197

这是克里斯蒂安暗示的一个例子：

```
$.post('/callcenter/admin/postContacts', data, function(returnedData) {
    // do something here with the returnedData
    console.log(returnedData);
}); 
```

然后您的 PHP 页面将返回 JSON。

参考。 [将数据从 jQuery 传递到 PHP 以进行 ajax 帖子](https://stackoverflow.com/questions/4210025/pass-data-from-jquery-to-php-for-an-ajax-post)

# coldfusion - 图像和格式不适用于使用 ColdFusion 生成的多选项卡 XLSx 文件

> ID：15145391
> 
> 赞同：1
> 
> 时间：2013-02-28T20:50:58.857
> 
> 标签：coldfusion, excel-2007, excel-2010, coldfusion-9, cfspreadsheet

下面的代码将生成带有两个明显错误的文件：

1.  SpreadSheetSetColumnWidth 在第二个选项卡上的 21 行后似乎停止工作
2.  图像未出现在第二个选项卡上

希望这只是一个新手错误，而不是日期格式问题。任何帮助或建设性的批评来修复/改进都将受到极大的欢迎。

```
<!--- We cannot directly reference the image --->
<cfimage source="img/A2LA_Logo.jpg" name="A2LA_Logo">
<!--- We need an absolute path, so get the current directory path.  --->
<cfset theFile=GetDirectoryFromPath(GetCurrentTemplatePath()) & "Final_Report.xlsx">

<cfscript> 
/*********************************************************************** Page 1 ***********************************************************************/
//Create a new Excel spreadsheet object - SpreadsheetNew("Tab name", "yes=2007+ no=2003");
    Tab1 = SpreadsheetNew("Final Report Page 1","yes"); 

    SpreadSheetSetRowHeight(Tab1,1,45);
    SpreadsheetSetCellValue(Tab1,"Final Test Report",1,1); SpreadsheetMergeCells(Tab1,1,1,1,10);
    SpreadsheetAddImage(Tab1, A2LA_Logo,"jpg","1,12,2,20"); 
    SpreadsheetSetCellValue(Tab1,"Confidential",1,21); SpreadsheetMergeCells(Tab1,1,1,21,30);
</cfscript>

<cfscript>  
/*********************************************************************** Page 2 ***********************************************************************/
//Create a new Excel spreadsheet object - SpreadsheetNew("Tab name", "yes=2007+ no=2003");
    Tab2 = SpreadsheetNew("Final Report Page 2","yes"); 

    SpreadSheetSetRowHeight(Tab2,1,45);
    SpreadsheetSetCellValue(Tab2,"Final Test Report",1,1); SpreadsheetMergeCells(Tab2,1,1,1,10);
    SpreadsheetAddImage(Tab1, A2LA_Logo,"jpg","1,12,2,20"); 
    SpreadsheetSetCellValue(Tab2,"Confidential",1,21); SpreadsheetMergeCells(Tab2,1,1,21,30);
</cfscript> 

<!--- There must be a better way --->
<cfscript> 
    for(index=1; index LTE 30; index++) {SpreadSheetSetColumnWidth(Tab1,index,3);}
    for(index=1; index LTE 30; index++) {SpreadSheetSetColumnWidth(Tab2,index,3);}
</cfscript> 

<!--- Write the spreadsheet to a file, replacing any existing file, then append the other tabs.  --->
<cfspreadsheet action="write" filename="#theFile#" name="Tab1" overwrite=true>
<cfspreadsheet action="update" filename="#theFile#" name="Tab2">

<!--- Needs to be at the bottom --->
<cfheader name="Content-disposition" value="attachment;filename=Final_Report.xlsx">
<cfcontent type="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" file="#theFile#">
<!--- Clean up your mess after it is served to the browser --->
<cffile action="delete" file="#theFile#"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T18:39:35.343

（来自评论）

单独保存时会显示图像。所以我猜这是一个`update`错误。我通常的建议是“如果可以避免，请不要使用更新”。[创建一个工作簿，添加多个工作表并使用单个`write`操作](https://stackoverflow.com/questions/15010472/spreadsheet-cell-formatting/15027832#15027832)保存它。

**更新：**至于为什么，在您的原始代码中，您要创建两个单独的*工作簿*对象。从概念上讲，它就像创建两个单独的 Excel 文件，每个文件一张。然后尝试将它们合并到一个文件中：

```
 c:/path/to/MyWorkbookNamedTab1.xlsx   

          | Sheet1 / 

     c:/path/to/MyWorkbookNamedTab2.xlsx   

          | Sheet1 / 
```

这与创建具有多*张*工作表的单个工作簿不同（如上面的链接中所示）：

```
 c:/path/to/MySingleWorkbook.xlsx   

          | Sheet1 / Sheet2 / 
```

没有简单的方法可以合并单独的文件（或工作簿）。您基本上必须将*所有内容*从一个工作簿复制到另一个工作簿（这比听起来要复杂得多）。就是`action=update`这样。在复制过程中的某个地方，它会丢失其中一张图像。我不确定这是否是由于 POI 中的一个 CF 错误。

无论如何，最简单的解决方案是完全避免复制的*需要*。如果您坚持使用单个*工作簿*（并向其中添加多*张*工作表），则无需复制或合并。一切都已包含在一个工作簿中。因此，所`action=write`要做的就是将其完全“按原样”保存到磁盘。

# flyway - 迁移脚本的状态是“未来”

> ID：15145397
> 
> 赞同：1
> 
> 时间：2013-02-28T20:51:31.540
> 
> 标签：flyway

有人见过这个吗？这是什么意思？

```
[flyway@bndba0 ~]$ flyway.sh -configFile=nilestg2.properties info
Flyway (Command-line Tool) v.2.0.3 
```

* * *

```
+----------------+----------------------------+---------------------+---------+
| Version        | Description                | Installed on        | State   |
+----------------+----------------------------+---------------------+---------+
| 0              | << Flyway Init >>          | 2013-02-20 20:01:03 | Success |
| 2013.1.14.1    | setup                      | 2013-02-26 09:53:23 | Future  |
| 2013.1.15.2    | product site ets           | 2013-02-26 09:53:23 | Future  |
......
+----------------+----------------------------+---------------------+---------+ 
```

# joomla - 什么文件为 Joomla 组件构建分页 URL？

> ID：15145398
> 
> 赞同：1
> 
> 时间：2013-02-28T20:51:34.190
> 
> 标签：joomla, pagination

基本上，我创建了一个新视图，仅以列表形式显示小狗，没有其他内容。除了部分分页外，其他一切工作正常。

所以这个类别有40只小狗。每页显示 20 个，它显示 2 页并且工作正常。每页 5 个，它显示 8 页，但不能正常工作。当我将鼠标悬停在前四个页面链接上时，它仍然显示第 1 页的 href，最后四个页面链接显示第 2 页的 href。

这是原始/第一页：

[http://americasfavoritepuppybreeders.com/puppies/breed/labrador.html?tmpl=component&view=microsite](http://americasfavoritepuppybreeders.com/puppies/breed/labrador.html?tmpl=component&view=microsite)

点击第 2 页链接到这里：

[http://americasfavoritepuppybreeders.com/puppies/breed/labrador/page-1.html?tmpl=component](http://americasfavoritepuppybreeders.com/puppies/breed/labrador/page-1.html?tmpl=component)

如果我手动输入应该存在的 URL，它仍然会显示第一页中的小狗：

[http://americasfavoritepuppybreeders.com/puppies/breed/labrador/page-2.html?view=microsite&tmpl=component](http://americasfavoritepuppybreeders.com/puppies/breed/labrador/page-2.html?view=microsite&tmpl=component)

我需要将 view=microsite & tmpl=component 保留在 URL 的末尾。

不确定我应该包含哪些代码供任何人诊断，所以请询问，我会发布。

我已经为此工作了 2 1/2 天，现在我整天都在做这件事……如果有人能提供帮助，我将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:52:55.997

您可以尝试为分页创建自定义模板（pagination.php）。您可以在 /administrator/templates/bluestork/html/pagination.php 中找到示例，因此，第一步，您将在模板中创建文件 /templates/{$your_template}/html/pagination.php。第二步，您可以尝试使用 submitform() 和`<input type="hidden" name="view" value="microsite" /><input type="hidden" name="tmpl" value="component" />`/或根据需要调整分页中的链接。

# ember.js - toastr 和 ember.js

> ID：15145399
> 
> 赞同：6
> 
> 时间：2013-02-28T20:51:37.953
> 
> 标签：ember.js, toastr

由于 ember 不喜欢直接 dom 操作，弹出库[toastr 是否无法与 Ember 一起使用？](https://github.com/CodeSeven/toastr)有没有像这个一样的其他库可以很好地与 ember 配合使用？

## 编辑

即使通过下面发布的工作示例，我也无法使其在本地工作。我终于使用了[Pine Notify](https://sciactive.com/pnotify/)，它立即生效。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T21:51:58.987

这在 Ember 中运行良好，您只需在正确的位置处理事件。“正确的地方”取决于您的实施。如果您希望从视图中的按钮触发此操作，则需要使用`{{action}}`传递操作名称的帮助程序。例子：

```
<script type="text/x-handlebars" >
    <button class="btn btn-info" {{action showInfo}}>Info</button>
</script> 
```

在上面的模板中，我说按钮应该触发`showInfo`事件，所以`Controller`负责这个视图应该有一个同名的函数：

```
App.ApplicationController = Em.ArrayController.extend({
    showInfo: function() {
        toastr.info('This is some sample information');
    }
}); 
```

您还可以让视图处理事件；下面的代码定义了一个`click`事件，因此如果您单击视图中的任意位置，它将运行您的函数：

```
App.OtherView = Em.View.extend({
    click: function(e) {
        toastr.error('This is some sample error');
    }
}); 
```

并且在您的 Handlebars 模板中，您不必告诉操作，因为您已经在视图类中说要处理该`click`视图的事件，因此您可以简单地渲染视图并为其设置样式：

```
{{#view App.OtherView class="btn btn-danger"}}
    Error
{{/view}} 
```

这是 JSFiddle 中的一个示例：http: **[//jsfiddle.net/schawaska/YZwDh/](http://jsfiddle.net/schawaska/YZwDh/)**

我建议您阅读有关**[`{{action}}`](http://emberjs.com/guides/templates/actions/)**助手的 Ember 指南

# php - Buddypress：将自定义组件添加到成员部分

> ID：15145402
> 
> 赞同：0
> 
> 时间：2013-02-28T20:51:48.307
> 
> 标签：php, wordpress, buddypress

对于每个会员页面，您都可以选择组件（例如个人资料、设置、活动...）

我想要做的是向每个页面添加一个名为作业的新组件。我了解如何将链接添加到导航栏。它只是创建让我感到困惑的页面。

我是否添加一个新目录，如果是，我如何让 buddypress 知道。

具有如下 url 结构：

```
example.com/member/username/jobs 
```

很重要。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-02T03:54:04.770

全局变量 $bp 是您要插入新 Jobs 组件的位置。通过转储全局变量 $bp，您可以看到其中包含的所有元素，包括所有组件。要轻松转储 $bp，请将以下内容添加到 member-header.php 的顶部：

```
global $bp;
foreach ( (array)$bp as $key => $value ) {
    echo '<pre>';
    echo '<strong>' . $key . ': </strong><br />';
    print_r( $value );
    echo '</pre>';
} 
```

$bp 中要添加组件“Jobs”的数组是 bp_nav。

在functions.php中添加以下内容：

```
add_action( 'bp_setup_nav', 'add_subnav_items', 100 ); //Priority must be higher than 10
function add_subnav_items() {
    global $bp;

    //Jobs tab
    $tab_array['name'] = 'Jobs';    
    $tab_array['link'] =  $bp->displayed_user->domain.'jobs';   
    $tab_array['slug'] = 'jobs';    
    $tab_array['parent_url'] = $bp->displayed_user->domain; 
    $tab_array['parent_slug'] = bp_core_get_userlink(bp_loggedin_user_id());    
    $tab_array['css_id'] = 'jobs';  
    $tab_array['position'] = 100;   
    $tab_array['user_has_access'] = '1';    
    $tab_array['screen_function'] = 'bp_jobs_screen_general';   

    $bp->bp_nav['jobs'] = $tab_array;  //Add new array element to the 'bp_nav' array
} 
```

'screen_function' 是一个处理选择 'Jobs' 选项卡时要显示的屏幕的函数，因此您必须在 functions.php 中添加函数 'bp_jobs_screen_general'：

```
function bp_jobs_screen_general() {
    bp_core_load_template( apply_filters( 'bp_jobs_screen_general','members/single/jobs' ) );
} 
```

此函数在 members/single/ 中查找名为 jobs.php 的模板文件，因此您必须创建它。有关 screen_function 如何工作的示例，请参阅 wp-content/plugins/buddypress/bp-groups/bp-groups-screens.php 中用于显示组屏幕的函数。

# python - 如何使用 Python 的 twisted.internet 进行 XBMC 插件开发？

> ID：15145407
> 
> 赞同：1
> 
> 时间：2013-02-28T20:52:04.007
> 
> 标签：python, twisted, xbmc, zope.interface

我只是尝试将 Python 模块`twisted.internet`用于我目前正在编写的 XBMC 插件。当我尝试执行我的插件时，我遇到了一个我无法理解的异常。当我注意到以下几行引起了所有麻烦时，我感到非常惊讶：

```
import xbmc, xbmcgui, xbmcaddon # Can be removed; doesn't change anything.
from twisted.internet import reactor, defer 
```

*问：*我如何`twisted`用于开发我的 XBMC 插件？任何帮助，将不胜感激！

不幸的是，我对 XBMC 和 XBMC 都是新手，`twisted`而且我可以提供的细节很少。我认为插件没有在主线程中执行。我目前正在使用 XBMC 11 进行测试。（*更新：*我正在使用最新的 XBMC、Python 和 Debian 测试包`twisted`。导入和使用该模块可通过常规脚本和 XBMC 服务工作，但不能来自 XBMC 脚本。）`xbmc.log`文件中的堆栈跟踪是：

```
File "/home/markus/.xbmc/addons/script.marmay.wol/timewol.py", line 2, in <module>
  from twisted.internet   import  reactor, defer
File "/usr/lib/python2.7/dist-packages/twisted/internet/reactor.py", line 37, in <module>
  from twisted.internet import default
File "/usr/lib/python2.7/dist-packages/twisted/internet/default.py", line 50, in <module>
  install = _getInstallFunction(platform)
File "/usr/lib/python2.7/dist-packages/twisted/internet/default.py", line 44, in _getInstallFunction
  from twisted.internet.pollreactor import install
File "/usr/lib/python2.7/dist-packages/twisted/internet/pollreactor.py", line 19, in <module>
  from zope.interface import implements
File "/usr/lib/python2.7/dist-packages/zope/interface/__init__.py", line 58, in <module>
  _wire()
File "/usr/lib/python2.7/dist-packages/zope/interface/interface.py", line 805, in _wire
  classImplements(Attribute, IAttribute)
File "/usr/lib/python2.7/dist-packages/zope/interface/declarations.py", line 447, in classImplements
  spec = implementedBy(cls)
File "/usr/lib/python2.7/dist-packages/zope/interface/declarations.py", line 318, in implementedByFallback
  if isinstance(spec, Implements):
TypeError: 'NoneType' object is not callable 
```

这是第一个相关的错误消息。

谢谢你的帮助！

# ruby-on-rails - CanCan 与带下划线的名称一起使用时出错

> ID：15145413
> 
> 赞同：0
> 
> 时间：2013-02-28T20:52:15.843
> 
> 标签：ruby-on-rails, cancan

我正在使用 CanCan 进行授权，它工作正常，除非我尝试为名称中带有下划线的任何类设置授权，例如 message_board。例如，以下工作正常：

能力.rb

```
can [:read, :create, :destroy], Message do |message|
        message.user_id == user.access_id
      end 
```

但是当我添加以下内容时：

```
can [:create, :read], Message_board do |board|
        board.user_id == user.access_id
      end 
```

当我尝试做任何需要授权的事情时，我收到以下错误：

```
LoadError in TimelinesController#show 
Expected {app_name}/app/models/message_board.rb to define Message_board 
```

知道如何解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:24:45.427

关于如何解决这个问题的想法：不要在类名中使用下划线。

我知道这听起来有点像老笑话里的医生（病人：“医生，我这样做的时候很痛*！* ”医生：“不要那样做。”），但实际上是有原因的。

Rails 对命名约定非常固执。类名应为大写驼峰式 ( `MessageBoard`, 或`FooBarThing`)。包含该类的文件是带下划线的小写版本（`message_board.rb`或`foo_bar_thing.rb`）。因为总是如此，Rails 认为它​​“知道”如何从一个转换到另一个，因此它“知道”到哪里查找包含具有给定名称的类的文件。当名称不符合预期时，可能会出现问题。*可能*有可能说服它以其他格式工作，但我认为没有理由这样做。

# php - 使用 PHP 的 iPad 的最长会话生命周期？

> ID：15145414
> 
> 赞同：5
> 
> 时间：2013-02-28T20:52:16.663
> 
> 标签：php, ios, ipad, cookies, session-variables

我在我的 PHP 应用程序中为会话设置了以下变量：

```
ini_set('session.cache_expire',     200000);
ini_set('session.cache_limiter',    'none');
ini_set('session.cookie_lifetime',  94608000);
ini_set('session.gc_maxlifetime',   94608000);
ini_set('session.save_handler',     'user');
ini_set('session.use_cookies',      1);
ini_set('session.use_only_cookies', 1);
ini_set('session.use_trans_sid',    0); 
```

当我通过我的笔记本电脑（Chrome、Safari 或 Firefox）登录时，我从未退出过（至少 3 年内不会如上所述）。但是当我在 iPad 上登录时，我每周都会注销，有时每周会注销多次。

我尝试在我的 Mac 上使用调试、删除 cookie、检查会话 cookie 等。它们都有正确的到期日期（2016 年 2 月），但我仍然注销。

似乎 iPad 忽略了 cookie_lifetime 变量。

以前有人遇到过这个问题吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T13:51:15.193

也许这是一个错误，也许不是。但是我遇到了和你一样的问题。我使用的解决方法是：

```
session_start(); 
$lifetime = 94608000;
setcookie(session_name(),session_id(),time()+$lifetime); 
```

为我工作。

# java - Dojo/Spring DateTextBox 初始化失败，日期值，使用字符串？

> ID：15145416
> 
> 赞同：0
> 
> 时间：2013-02-28T20:52:23.057
> 
> 标签：java, javascript, spring, dojo

我正在努力从 Web 表单到 Spring 控制器来回获取 Date 值。将此值作为字符串传递时一切正常，但由于它在逻辑上是“日期”值，因此我将其更改为日期，一切都变得很糟糕。

我尝试了[此处](https://stackoverflow.com/questions/3367660/how-to-pass-java-date-object-to-dojo-datetextbox-through-spring-mvc-and-back-to)指示的修复程序，但它不起作用。

这是我在运行时遇到的错误（来自“locale.js”）：

```
Uncaught TypeError: Object 2/28/13 has no method 'getMonth' 
```

该页面是使用带有 Spring Forms 标记（form:form、form:input 等）的 JSP 构建的，并且客户端验证是使用依赖于 Dojo Javascript 库的 SpringValidation 装饰器完成的。

这是我要传递的字段：

```
@NotEmpty
@DateTimeFormat(style="S-")
private Date startDate; 
```

这是 Javascript/Dojo 客户端验证代码：

```
Spring.addDecoration(new Spring.ElementDecoration({
    elementId : "startDate",
    widgetType : "dijit.form.DateTextBox",
    widgetAttrs : {
        missingMessage : parms.required,
        invalidMessage : parms.wrongFormatMessage,
        required : true,
        regExp : parms.textFieldPattern }
})); 
```

这是实际的表单标签：

```
<form:input id="startDate" path="startDate" /> 
```

有人有什么想法吗？它发生在 Dojo/Spring 内部的某个地方，我不确定为什么如果我传递一个“日期”它会失败，但如果我传递一个包含日期值的“字符串”它会工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T00:09:21.133

问题原来是表单支持对象上 Date 属性的@DateTimeFormat。这没有用：

```
@DateTimeFormat(style="S-")
private Date startDate; 
```

但这确实：

```
@DateTimeFormat(iso = DateTimeFormat.ISO.DATE)
private Date startDate; 
```

显然 Javascript 和 Dojo DateTextBox 对日期格式非常挑剔。

# c++ - tcp 通信线程

> ID：15145418
> 
> 赞同：1
> 
> 时间：2013-02-28T20:52:40.863
> 
> 标签：c++, multithreading, tcp, boost-asio

我的问题是关于线程的使用。我正在制作一个通过 TCP/IP 连接到设备的应用程序。我正在使用 boost::asio lib。我决定使用读取或侦听线程和写入线程分别用于侦听和写入设备。我的困惑是创建处理通信的套接字的函数也应该是一个线程。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:23:52.690

在我的客户端类中，我创建了 2 个工作线程来处理发送和接收消息，这些消息用于与多个服务器的多个连接。创建这两个工作线程的线程恰好是用户界面线程。这就是我的代码的样子：

```
// Create the resolver and query objects to resolve the host name in serverPath to an ip address.
boost::asio::ip::tcp::resolver resolver(*IOService);
boost::asio::ip::tcp::resolver::query query(serverPath, port);
boost::asio::ip::tcp::resolver::iterator EndpointIterator = resolver.resolve(query);
// Set up an SSL context.
boost::asio::ssl::context ctx(*IOService, boost::asio::ssl::context::tlsv1_client);
// Specify to not verify the server certificiate right now.
ctx.set_verify_mode(boost::asio::ssl::context::verify_none);
// Init the socket object used to initially communicate with the server.
pSocket = new boost::asio::ssl::stream<boost::asio::ip::tcp::socket>(*IOService, ctx);
//
// The thread we are on now, is most likely the user interface thread.  Create a thread to handle all incoming socket work messages.
if (!RcvThreadCreated)
{
   WorkerThreads.create_thread(boost::bind(&SSLSocket::RcvWorkerThread, this));
   RcvThreadCreated = true;
   WorkerThreads.create_thread(boost::bind(&SSLSocket::SendWorkerThread, this));
 }
 // Try to connect to the server.  Note - add timeout logic at some point.
 boost::asio::async_connect(pSocket->lowest_layer(), EndpointIterator,
    boost::bind(&SSLSocket::HandleConnect, this, boost::asio::placeholders::error)); 
```

工作线程处理所有套接字 I/O。这取决于您在做什么，但是需要从另一个线程创建用于服务套接字的 2 个工作线程。如果您愿意，另一个线程可以是用户界面线程或主线程，因为它会很快返回。如果您与服务器或客户端有多个连接，则由您决定是否需要一组以上的线程来为它们提供服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:04:48.220

这取决于您是否要同时读取和写入。在这种情况下，您需要一个线程用于读取和一个线程用于写入，但您必须正确同步这些线程，以防进出设备的两个流相互关联（它们可能会做什么）。但是，在我看来，与设备交谈就像是建立连接、发送一些请求、等待并阅读答案、发送另一个请求、等待并阅读下一个答案等的任务。在这种情况下，只使用一个线程就足够了，让你的生活更轻松。

# html - 我可以让高度 100% 像宽度 100% 一样工作吗？

> ID：15145420
> 
> 赞同：0
> 
> 时间：2013-02-28T20:52:44.510
> 
> 标签：html, css

[小提琴](http://jsfiddle.net/SS2mx/)

我有两个`<div>`s 漂浮在一个`<section>`. 我正在寻找最简单的方法来获得`<div>`较短的那个，在这种情况下`<div id="one">`拉伸它的高度以匹配另一个（`<div id="two">`）。在小提琴中，你会看到`<div id="one">`有一个灰色背景，我想继续向下到`<section>`. 任何解决方法或任何完成此操作的方法都很棒。但我不想使用 javascript 来做到这一点。谢谢。

HTML：

```
<section>
    <div id="one"><p>Lorem</p></div>
    <div id="two">
        <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur, adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore</p>
    </div>
    <div class="clear"></div>
</section> 
```

CSS：

```
section {
    width: 80%;
    margin: 0 auto;
    border: 1px solid #ccc;
    border-radius: 5px;
}
#one, #two {
    float: left;
    width: 50%;
}
#one {
    background: rgb(230,230,230);
}
.clear {
    clear: both;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:01:42.307

加载 jquery 并添加以下 javascript

```
$(document).ready( function() {
    var x = $("#one").css('height');
    var y = $("#two").css('height');

    if(x > y) {
        $("#two").css('height', x);
    } else {
        $("#one").css('height', y);
    }
}); 
```

但是如果你对 JavaScript 过敏......并且会接受 CSS3，你可以试试

```
section {
    display: flex;
    width: 80%;
    margin: 0 auto;
    border: 1px solid #ccc;
    border-radius: 5px;
}

#one, #two {
    display: flex;
    width: 50%;
    display: table-cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T06:37:34.103

这是为您提供的纯 HTML 和 CSS 解决方案。它使用具有“内部”类的 div 来包装您想要匹配的 div。还添加了一些 CSS 以使其表现得像您想要的那样。

[jsFiddle 解决方案——纯 HTML 和 CSS](http://jsfiddle.net/chrisallenmoore/ujBJv/)

HTML 代码：

```
<section>
<div class="inner">
    <div id="one">
        <p>Lorem</p>
    </div>
    <div id="two">
        <p>Sed ut perspiciatis unde omnis iste natus error sit voluptatem accusantium
            doloremque laudantium, totam rem aperiam, eaque ipsa quae ab illo inventore
            veritatis et quasi architecto beatae vitae dicta sunt explicabo. Nemo enim
            ipsam voluptatem quia voluptas sit aspernatur aut odit aut fugit, sed quia
            consequuntur magni dolores eos qui ratione voluptatem sequi nesciunt. Neque
            porro quisquam est, qui dolorem ipsum quia dolor sit amet, consectetur,
            adipisci velit, sed quia non numquam eius modi tempora incidunt ut labore</p>
    </div>
</div>
<div class="clear"></div> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T21:06:34.323

您可以修改 #one div 中 p 上的填充，但这会在此 div 中丢弃您的文本。我不确定它与对齐其他文本有多相关，但它可能会对您有所帮助。

```
#one p {
padding: 9em; 
```

}

# xaml - 当包含在 LongListSelector 中时，ProgressBar 行为不正确

> ID：15145423
> 
> 赞同：0
> 
> 时间：2013-02-28T20:52:48.193
> 
> 标签：xaml, progress-bar, windows-phone-8, longlistselector, background-transfer

在我的 WP8 应用程序中，我使用后台传输服务并`LongListSelector`使用`ProgressBar`它`DataTemplate`向用户显示项目下载进度。问题是它`ProgressBar`并没有显示出真正的进步，而是不断地来回跳跃。

这是我的 XAML。`LongListSelector`定期接收`BackgroundTransferRequest`'s 列表并用于 `ProgressBar`显示它们：

```
<phone:LongListSelector IsGroupingEnabled="False" x:Name="Views">
    <phone:LongListSelector.ListHeader>
        <StackPanel Style="{StaticResource M20}">
            <controls:TextTile Txt="Cancel downloads" Sign="x" Tap="CancelDownloads" />
        </StackPanel>
    </phone:LongListSelector.ListHeader>
    <phone:LongListSelector.ItemTemplate>
        <DataTemplate>
            <ProgressBar Maximum="{Binding TotalBytesToReceive}" Value="{Binding BytesReceived}" Minimum="0" />
        </DataTemplate>
    </phone:LongListSelector.ItemTemplate>
</phone:LongListSelector> 
```

`LongListSelector`从类后面的代码中定期更新：

```
Views.ItemsSource = BackgroundTransferService.Requests.ToList() 
```

`LongListSelector`仅在显示多个项目时才会出现此问题。`ListBox`例如，如果我尝试使用，一切正常。为什么会发生这种情况，我应该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:12:26.090

我无法将其放入评论中-试试这个：

```
public class BackgroundTransferRequestWrapper : INotifyPropertyChanged {

    private BackgroundTransferRequest _request;

    public BackgroundTransferRequestWrapper(BackgroundTransferRequest request) {
        _request = request;
        _request.TransferProgressChanged += OnTransferProgressChanged;
    }

    private void OnTransferProgressChanged(object sender, BackgroundTransferEventArgs e) {
        BytesReceived = _request.BytesReceived;
        TotalBytesToReceive = _request.TotalBytesToReceive;
    }

    private long bytesReceived = 0;
    public long BytesReceived {
        get { return bytesReceived; }
        set {
            bytesReceived = value;
            OnPropertyChanged();
        }
    }

    private long totalBytesToReceive = 0;
    public long TotalBytesToReceive {
        get { return totalBytesToReceive; }
        set { totalBytesToReceive = value;
        OnPropertyChanged();}
    }

    public event PropertyChangedEventHandler PropertyChanged;

    protected virtual void OnPropertyChanged([CallerMemberName] string propertyName = null) {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null)
            handler(this, new PropertyChangedEventArgs(propertyName));
    }
} 
```

与其在计时器上重置 ItemsSource，不如这样做：

```
 foreach (var request in BackgroundTransferService.Requests) {
        Requests.Add(new BackgroundTransferRequestWrapper(request));
    } 
```

在此示例中，**Requests**是绑定到您的 ItemsSource 的 ObservableCollection。有了这个，你根本不需要手动更新——BackgroundTransferRequest 事件将驱动包装器在 prop 更改发生时通知它们。

我没有完全测试您的示例，但我怀疑您的问题与 LongListSelector 的 UI 虚拟化以及您不断重置 ItemsSource 的方式有关。另一种可能性是每次从 BackgroundTransferService 获取请求时，请求的顺序可能会发生变化。

祝你好运！

# c# - 登录表单 asp.net

> ID：15145424
> 
> 赞同：1
> 
> 时间：2013-02-28T20:52:48.827
> 
> 标签：c#, asp.net, authentication, login

我的网络应用每分钟注销一次，.aspxauth cookie 设置为（20 天），asp.net_sessionid 设置为（会话结束），我想创建我的网站（记住我）。

我正在使用以下代码-但无济于事-：

```
<authentication mode="Forms">
    <forms
    loginUrl="~/Account/Login.aspx"
    protection="All"
    timeout="30160"
    name=".ASPXAUTH"
    path="/"
    requireSSL="false"
    slidingExpiration="false"
    defaultUrl="~/Default.aspx"
    cookieless="UseCookies"
    enableCrossAppRedirects="false" />
</authentication> 
```

如何防止我的应用如此频繁地退出？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:13:28.383

看起来一切都是默认设置，所以使用以下设置。

```
<forms loginUrl="~/Account/Login.aspx"" timeout="30160" /> 
```

在 web.config 中，确保`sessionState`根本不存在或设置为某个值。

```
<sessionState timeout="20"/> 
```

如果您修改了默认表单身份验证，请参阅此帖子 -

[表单身份验证超时](http://weblogs.asp.net/owscott/archive/2006/07/15/Forms-Authentication-Timeout.aspx)

# android - 实时更新ListView中的TextView

> ID：15145425
> 
> 赞同：3
> 
> 时间：2013-02-28T20:52:51.773
> 
> 标签：android, android-listview

我`TextView`在实时更新 a 时遇到问题。我想用自定义适配器实时更新`TextView`a 。`ListView`我有接收 JSON 消息的套接字 I/O 处理程序。我想解析这个 JSON 并将该文本放入特定的列表行中`setText()`。如何获取该`ListView`行的索引并更新其`TextView`？

```
responseid=object.getString("ResponseID");
if(responseid!=null){
    for(int j=0;j<countryList.size();j++){
        //If the countryList row match then i want to update the textView of that particular row
        if(countryList.get(j).getName().equals(caseid)) {                        
            int oldcount = Integer.parseInt((dataAdapter.findViewById(R.id.replycount)).getText().toString());
            int total=oldcount+1;
            (dataAdapter.findViewById(R.id.replycount)).setText(Integer.toString(total));
            dataAdapter.notifyDataSetChanged();
        }
    }    
} 
```

**这是我的解决方案：**

```
for(int j=0;j<countryList.size();j++)
{
    if(countryList.get(j).getName().equals(caseid))
    {
        String oldcount = countryList.get(j).getCount();
        int oldcountint = Integer.parseInt(oldcount);
        int newcount = oldcountint + 1;
        countryList.get(j).setCount(Integer.toString(newcount));
        dataAdapter.notifyDataSetChanged();
        break;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T21:10:18.853

您应该更改 , 中的项目`ListAdapter`，然后调用`notifyDataSetChanged()`.

例子：

```
//Creating and adding ListAdapter to ListView
MyObject myFirstObject = new MyObject("Test1");
MyObject mySecondObject = new MyObject("Test2");

MyAdapter myAdapter = new MyAdapter();
myAdapter.add(myFirstObject);
myAdapter.add(mySecondObject);
myListView.setAdapter(myAdapter); 
```

更新特定位置时：

```
myAdapter.getItem(position).text = "My updated text";
myAdapter.notifyDataSetChanged(); 
```

# scala - Scala中的有效标量图/成语？

> ID：15145427
> 
> 赞同：2
> 
> 时间：2013-02-28T20:52:55.757
> 
> 标签：scala, bytecode

从另一个表达式的深处**多次**访问标量表达式的最简洁和字节码有效的方法是什么？

以下代码（不**包括 scalar4**）中的所有函数都可以根据需要运行。但是只有**字节**编码器发出有效的字节码（尽管它以 ISTORE 2 ILOAD 2 结尾很糟糕），其他的每个生成六个 INVOKE。

这个习惯用法对于传递元组的任意部分作为参数也很方便：

```
for (a_tuple) { f(_._3, _._1) + g(_._2) }  // caution NOT legal Scala 
```

在这个例子中， **intro**代表一个只应该被调用一次的昂贵函数。

```
object Hack extends App
{
  @inline final def fur[T, V](x :T)(f :T => V) :V = f(x)

  @inline final def pfor[T, V](x :T)(pf :PartialFunction[T, V]) = pf(x)

  @inline final def cfor[T, V](x :T)(f :T => V) :V = x match { case x => f(x) }

  def intro :Int = 600 // only one chance to make a first impression

  def bytecoder = intro match { case __ => __ + __ / 600 }

  def functional = fur(intro) (x => x + x / 600)

  def partial = pfor(intro) { case __ => __ + __ / 600 }

  def cased = cfor(intro) ($ => $ + $ / 600)

  def optional = Some(intro).map(? => ? + ? / 600).get

  def folder = Some(intro).fold(0)(? => ? + ? / 600)

  // the for I wish for
  def scalar4 = for(intro) (_ + _ / 600) // single underline!

  println(bytecoder, functional, partial, cased, optional, folder)
} 
```

公共字节编码器（）我

```
ALOAD 0
INVOKEVIRTUAL com/_601/hack/Hack$.intro ()I
ISTORE 1
ILOAD 1
ILOAD 1
SIPUSH 600
IDIV
IADD
ISTORE 2
ILOAD 2
IRETURN 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:20:11.780

只需使用临时 val 创建一个本地块。严重地。它很紧凑：只比“惯用”管道长一个字符

```
{ val x = whatever; x * x / 600 }
whatever match { case x => x * x / 600 }
whatever |> { x => x * x / 600 } 
```

它很有效：可能的最小字节码。

```
// def localval = { val x = whatever; x * x / 600 }
public int localval();
  Code:
   0:   aload_0
   1:   invokevirtual   #18; //Method whatever:()I
   4:   istore_1
   5:   iload_1
   6:   iload_1
   7:   imul
   8:   sipush  600
   11:  idiv
   12:  ireturn 
```

它唯一*不做*的就是充当后缀运算符，`match`当你真的需要那种形式并且不能容忍额外的字节码时，你就可以做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-10T12:47:08.177

```
// Canadian scalar "for" expression
@inline final case class four[T](x: T)
{
  @inline def apply(): T = x

  @inline def apply[V](f: Function1[T,          V]): V = f(x)
  @inline def apply[V](f: Function2[T, T,       V]): V = { val $ = x; f($, $) }
  @inline def apply[V](f: Function3[T, T, T,    V]): V = { val $ = x; f($, $, $) }
  @inline def apply[V](f: Function4[T, T, T, T, V]): V = { val $ = x; f($, $, $, $) }
  // ...
}

// Usage
val x = System.currentTimeMillis.toInt % 1 + 600

def a = four(x)() + 1
def b = four(x)(_ + 1)
def c = four(x)(_ + _ / x)
def d = four(x)(_ + _ / _)
def e = four(x)(_ + _ / _ - _) + 600

println(a, b, c, d, e) 
```

有了这个`four(){}`，字节码和性能被牺牲了，有利于风格。

此外，这**危险地**打破了传统，即每个参数仅使用一次下划线。

# wso2 - WSO2 Identity Server 可以与现有的 CAS 框架集成吗？

> ID：15145430
> 
> 赞同：0
> 
> 时间：2013-02-28T20:53:03.867
> 
> 标签：wso2

我正在试验 WSO2 API Manager，并希望将嵌入式 WSO2 身份服务器与我们机构现有的 CAS 框架集成。是否可以让 WSO2 身份服务器将登录重定向到我们的 CAS 登录页面并使用 CAS 票证代替用户名/密码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T09:55:44.110

[这](http://sureshatt.blogspot.com/2012/11/how-to-enable-sso-for-wso2-server.html)解释了如何使用 WSO2 IS 作为 WSO2 产品（如 WSO2 AS、ESB 等）的身份服务器。您可以以非常相似的方式配置 CAS 而不是 WSO2 IS。

# objective-c - 通过另一个变量更改变量的值

> ID：15145431
> 
> 赞同：1
> 
> 时间：2013-02-28T20:53:04.680
> 
> 标签：objective-c, variables, pointers, variable-assignment

为了改变，我怎样才能用一个变量替换`a`另一个变量？`b``b`

例如：

```
NSString *a = @"a";
NSString *b = @"b";
NSString *c = @"c";

a = b;
a = c; 
```

在这种情况下， 的值为`b`，`@"b"`对吗？我想制作 的值`b` `@"c"`，而不使用`b = c`。可能我应该尝试理解指针。

请理解我糟糕的解释，并给我任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T21:30:18.493

您可能会感到困惑，因为坦率地说，指针起初有点令人困惑。它们是保存内存位置的变量。如果您有两个持有相同位置的指针，并且您使用一个指针更改该位置的*内容*，那么您可以通过另一个指针查看这些新内容。不过，它仍然指向同一个位置。

```
int x = 10;

// xp is a pointer that has the address of x, whose contents are 10
int * xp = &x;
// yp is a pointer which holds the same address as xp
int * yp = xp;

// *yp, or "contents of the memory address yp holds", is 10
NSLog(@"%i", *yp);

// contents of the memory at x are now 62
x = 62;

// *yp, or "contents of the memory address yp holds", is now 62
NSLog(@"%i", *yp);
// But the address that yp holds has _not_ changed. 
```

根据您的评论，是的，您可以这样做：

```
int x = 10;
int y = 62; 

// Put the address of x into a pointer
int * xp = &x;
// Change the value stored at that address
*xp = y;

// Value of x is 62
NSLog(@"%i", x); 
```

你可以用`NSString`s 做同样的事情，尽管我想不出这样做的充分理由。`int`将示例中的any 更改为`NSString *`; `int *`变成`NSString **`. _ 根据需要更改分配和`NSLog()`格式说明符：

```
NSString * b = @"b";
NSString * c = @"c";

// Put the address of b into a pointer
NSString ** pb = &b;
// Change the value stored at that address
*pb = c;
// N.B. that this creates a memory leak unless the previous
// value at b is properly released.

// Value at b is @"c"
NSLog(@"%@", b); 
```

# eclipse - 为什么 Eclipse (Juno) 忽略“Ctrl+Shift+Arrow”的键绑定？

> ID：15145436
> 
> 赞同：2
> 
> 时间：2013-02-28T20:53:35.107
> 
> 标签：eclipse, macos, key-bindings, eclipse-juno

在 OS X 上的 Eclipse 中，我发现 ++ 的默认 `Ctrl`行为`Shift``→</kbd> and `Ctrl` + `Shift` + `←</kbd> key combinations extremely annoying. To make those combinations behave like every other editor on OS X, I changed them, along with many others.``

现在我正在尝试将 Eclipse 从 Indigo (3.8) 更新到 Juno (4.2)。我只是通过下载并解压缩新的 Juno 副本来完成此操作，其中没有我的旧 Indigo 插件。*安装后，除了*上述组合外，我工作区的每个自定义键绑定都可以在 Juno中使用。

在 Juno（和 当前的 Kepler 构建）中，无论我绑定什么命令`Ctrl`++`Shift``→</kbd> and `Ctrl` + `Shift` + `←</kbd>, Eclipse ignores it and always executes the default command, which is some sort of "Select Enclosing Element" command that's very similar to the default binding of `Ctrl` + `Shift` + `↑</kbd>.```

如果我返回并在 Indigo 中打开相同的工作区，绑定将再次正常工作。这意味着 Juno 中的一个错误，但我还没有在我的搜索中找到任何东西。有没有其他人注意到这种行为？更好的是，有人找到解决方法吗？

## 编辑

由于我找不到这个问题的任何记录，我已经[提交了一个错误报告](https://bugs.eclipse.org/bugs/show_bug.cgi?id=402065)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:14:57.687

我在 OS X 以及 Windows 和 Ubuntu 中使用 Eclipse Juno 试验了很多问题，我认为有很多错误需要报告。其中之一就是您提到的那个，我不得不再次回到 Indigo 工作而没有那个烦人的问题。您还可以注意到 Eclipse Juno 速度较慢，对于 OS X 用户来说是不可察觉的，但在 Windows 等其他操作系统中，您会感觉到延迟，Juno 消耗更多资源，我知道它有一个“改进的”用户界面，但如果它消耗更多性能对我来说没有意义。我还没有找到解决方法，但我可以告诉你，我尝试了相同的行为，不得不回到 Indigo，现在我的工作没有问题。此致。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-22T15:33:16.673

我遇到了和你类似的事情。可能是由于 Juno 导入键绑定中的错误所致。

请参阅此相关线程：[eclipse keybindings settings](https://stackoverflow.com/questions/481073/eclipse-keybindings-settings)

对我有用的 sulai 线程上的解决方法是手动复制文件

> 工作区/.metadata/.plugins/org.eclipse.core.runtime/.settings/org.eclipse.ui.‌​‌​workbench.prefs

和

> 工作区/.metadata/.plugins/org.eclipse.e4.workbench/workbench.xmi

到我的新工作区，而不是依赖 Eclipse 的导入（无论是隐式还是显式）。

# python - Django - WSGIHandler start_response 并返回响应

> ID：15145440
> 
> 赞同：1
> 
> 时间：2013-02-28T20:53:57.383
> 
> 标签：python, django, django-views

**我编辑了我的问题，因为我意识到我正在结合两个概念（WSGIHandler 和中间件），我不应该在这个问题中结合。**

我试图对它的作用有一些基本的了解`WSGIHandler`。

**django.core.handlers.wsgi.py**

> 类 WSGIHandler(base.BaseHandler): initLock = Lock() request_class = WSGIRequest
> 
> ```
> def __call__(self, environ, start_response):
> 
>     #...
> 
>     start_response(status, response_headers)
>     return response 
> ```

`WSGIHandler`将使用`environ`和`start_response`参数调用的实例。
`environ`将用于创建`request`对象，该对象是`WSGIRequest`.

```
request = self.request_class(environ) 
```

`WSGIHandler.get_response`将用于`HttpResponse`从`request`.

```
response = self.get_response(request) 
```

**我的问题：**
做 什么`start_response`？此时`response`已经创建了一个对象。那么它开始的反应是什么？它会在某处发送一些响应吗？它在哪里发送由发送的响应`return response`（即通常调用它的内容是什么？）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-22T15:42:15.397

当你编写一个 web 应用程序时，你需要向服务器提供`callable`一个请求到达时服务器将调用的服务器。此可调用对象负责生成响应并将响应发送回服务器。服务器依次将此响应发送回浏览器。

在 django 的情况下，可调用的是`WSGIHandler`. 由于它有一个`__call__`定义，所以这`__call__`将被服务器调用。

发送到的参数`__call__`来自服务器。`start_response`也是由服务器实现的可调用对象。您无需担心其实施。所以，`__call__`调用`WSGIHandler`这个 callable `start_response`。

`start_response`在内部创建标头，稍后必须将其发送回浏览器。但它只是在服务器上设置一些属性，它不会将响应发送回浏览器。它不会在任何地方发送任何响应。

调用后`start_response`，wsgi 处理程序返回行中的实际响应`return response`。执行此行时，服务器会检查响应是否正确，然后根据响应发送`start_response`调用中设置的 cookie 或引发一些异常。

检查[http://www.python.org/dev/peps/pep-0333/](http://www.python.org/dev/peps/pep-0333/)了解更多信息。

# java - 当我声明诸如 A+ 之类的变量时，我使用什么变量

> ID：15145442
> 
> 赞同：-4
> 
> 时间：2013-02-28T20:54:06.993
> 
> 标签：java

我正在制作一个计算一个人的gpa的程序。我的变量包括A+等...

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T20:59:00.817

我会创建你自己的枚举类。

```
enum Grade {
    A(4.0, "A"), B_PLUS(3.5, "B+"), B(3.0, "B"),  // etc.
      F(0, "F");

    private float gradePoints;
    private String asString;

    private Grade(float gradePoints, String asString) {
        this.gradePoints = gradePoints;
        this.asString = asString;
    }

    public float getGradePoints() {
        return gradePoints;
    }

    @Override
    public String toString() {
        return asString;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T20:58:49.137

这可能是领域驱动设计中[价值对象](http://lostechies.com/joeocampo/2007/04/23/a-discussion-on-domain-driven-design-value-objects/)的一个​​很好的候选者。

```
public class GpaGrade {
    private Int32 _inPercent;

    public GpaGrade(Int32 inPercent) {
        // TODO: check that inPercent is between 1 and 100
        _inPercent = inPercent;
    }

    public Int32 AsPercents() {
        return _inPercent;
    }

    public Double In40Scale() {
        // TODO: convert to 4.0 scale
    }

    public String AsLetterCode() {
        // TODO: convert to letter code
    }

    // TODO: override Equals and GetHashCode
} 
```

# actionscript-3 - AS3 帮助菜鸟进行一些调试？

> ID：15145445
> 
> 赞同：0
> 
> 时间：2013-02-28T20:54:41.290
> 
> 标签：actionscript-3, debugging

我还没有真正学到很多关于使用控制台调试的知识，但是当我运行 Flash 调试器时，我收到以下错误：

```
Attempting to launch and connect to Player using URL     
C:\Users\Isaac\Desktop\Shortcuts\Project Folder\FLA FILES\bug free version.swf [SWF] 
C:\Users\Isaac\Desktop\Shortcuts\Project Folder\FLA FILES\bug free version.swf - 16186539 bytes after decompression
ReferenceError: Error #1069: Property TIMER not found on flash.events.TimerEvent and there is no default value.
at bugfreeversion_fla::MainTimeline/completeFunction()[bugfreeversion_fla.MainTimeline::frame243:19]
at flash.events::EventDispatcher/dispatchEventFunction()
at flash.events::EventDispatcher/dispatchEvent()
at flash.utils::Timer/tick() 
```

我不确定如何从中提取我需要的信息，我所能想到的只是我的倒数计时器存在数据问题。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T20:58:53.887

当您的 TimerEvent 实例没有“TIMER”属性时，您似乎正在尝试访问 TimerEvent 实例上名为“TIMER”的属性。错误发生在您的`completeFunction()`

`Property TIMER not found on flash.events.TimerEvent`

```
at bugfreeversion_fla::MainTimeline/completeFunction()
at flash.events::EventDispatcher/dispatchEventFunction() 
at flash.events::EventDispatcher/dispatchEvent() at flash.utils::Timer/tick() 
```

# php - 得到一个未捕获的语法错误：意外的标识符

> ID：15145447
> 
> 赞同：0
> 
> 时间：2013-02-28T20:54:44.457
> 
> 标签：php, jquery, ajax

我正在为客户编写一个实时聊天程序，除了从服务器检索数据外，我一切正常。我几乎舔了它，但现在我在我的 jquery 函数中收到此错误，告诉未捕获的语法错误：意外标识符，我尝试了此代码的几种变体，但它一直给我这个问题。这是代码

```
 <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
         "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml">
    <?php
    session_start();
    include 'conection.php';
    include 'function.php';

    $name = $_GET['name'];
    $query = "SELECT * FROM chatSession WHERE user_name = '$name'";
    $result = mysql_query($query, $con) or die(mysql_error());
    $row = mysql_fetch_array($result);

    $session = json_encode($row['session_id']);
    /*
    function fetchMessages()
    {
        $get = ("SELECT * FROM chatRoom WHERE session_id = '$session'");
        $hold = mysql_query($get, $con);

        if($hold)
        {
            return mysql_fetch_array($hold);
        }
    }
    */
    if(isset($_GET['submitmsg']))
    {
        $message = mysql_real_escape_string($_GET['usermsg']);
        $throw = "INSERT INTO chatRoom(session_id, source, message, timestamp)
                  VALUES('".$_GET['id']."', '".$_GET['source']."', '$message'
                  , UNIX_TIMESTAMP())";

        if (!mysql_query($throw,$con))
        {
            die('Error: ' . mysql_error());
        }else
        {
            fetchMessages();
        }
    }
    ?>
<head>
    <title></title>
    <link type="text/css" rel="stylesheet" href="css/chatStyle.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
</head>
<body>
    <div id="wrapper">
        <div id="menu">
            <p class="welcome"><b>Welcome, <?php echo $row['user_name']; ?></b></p>
            <p class="logout"><a href="nameSub.php?logout=true&name=<?php echo $row['user_name']; ?>&id=<?php echo $row['session_id']; ?>">Exit Chat</a></p>
            <div style="clear:both"></div>
        </div>
        <div id="chatbox">
        </div>
        <form name = "message" action = "<?php echo $_SERVER['PHP_SELF']; ?>" method = "get">
            <input type = "hidden" name = "name" value = "<?php echo $_GET['name']; ?>" />
            <input name = "id" type = "hidden" value = "<?php echo $row['session_id']; ?>" />
            <input name = "source" type = "hidden" value = "<?php echo $row['user_name']; ?>" />
            <input name = "usermsg" type = "text" id = "usermsg" size = "63" />  
            <input name = "submitmsg" type = "submit"  id = "submitmsg" value = "Send" />  
        </form> 
    </div>
    <script type="text/javascript">
        $(document).ready(function()
        {
            fetchMessages = function()
            {
                var sess = <?php echo $session; ?>;
                $.ajax
                ({
                    url:'functions.php',
                    type:'post',
                    data:{method:'fetch, sess'},
                    success:function(data)
                    {
                        $('#chatbox').html(data);
                    }
                });
            }

            setInterval(fetchMessages, 5000);
            fetchMessages();
        });
    </script>
</body> 
```

当我尝试创建变量 sess 以传递给被调用的脚本时，就会出现问题，这样我就可以将它传递给必要的函数来检索数据。

好的，这是更新的 jquery

```
 fetchMessages = function()
    {
        var sess = <?php echo $session; ?>;
        $.ajax
        ({
            url:'functions.php',
            type:'post',
            data:{method:'fetch'},
            success:function(data)
            {
                $('#chatbox').html(data);
            }
        });
    } 
```

和functions.php

```
 <?php
    include 'core/conection.php';
    include 'function.php';

    if(isset($_POST['method']) === true && isset($POST['session']) === true && empty($_POST['method']) === false && empty($_POST['session']) === false)
    {
$method = trim($_POST['method']);
$session = trim($_POST['session'];

if($method === 'fetch')
{
    $messages = fetchMessages($session);

    if(empty($messages) === true)
    {
        echo 'A representative will be with you shortly';
    }else
    {
        foreach($messages as $message)
        {
            $ts = $message['timestamp'];
            ?>
            <div class = "message">
            <a href = "#"><?php echo date('n-j-Y h:i:s a', $ts); ?><?php echo $message['username']; ?></a>says:<p><?php echo nl2br($message['message']); ?></p>
            </div>
            <?php
        }
    }
}
    } 
```

?>

最后是 fetchMessages()

```
 <?php
    include 'core/conection.php';

    function fetchMessages($session)
    {
        $session = $_GET['$session'];
        $get = ("SELECT * FROM chatRoom WHERE session_id = '$session'");
        $hold = mysql_query($get, $con);

        if($hold)
        {
            return mysql_fetch_array($hold);
        }
    }
    ?> 
```

我知道我在这里的某个地方有错误，因为我仍然没有显示

最新更新 jquery 代码，这将 session_id 显示为整数但是我仍然得到意外的标识符

```
 fetchMessages = function()
{
    $.ajax
    ({
        url:'functions.php',
        type:'post',
        data:{method:'fetch'
              session:'<?php echo $row['session_id']; ?>'},
        success:function(data)
        {
            $('#chatbox').html(data);
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:01:54.263

我将此添加为一个答案，因为我相信这是您的问题之一。如果 sess 是 JSON 编码的字符串，并且您想将其传递给您需要的函数 php：

```
data: {method: 'fetch', session: sess} 
```

或者至少：

```
data: {method: 'fetch, '+sess} 
```

查看您的其他代码`fetchMessages()`：

```
$session = $_GET['$session']; 
```

这不是必需的，因为您将 $session 传递给函数。它不会在 $_GET 范围内。

也来自`functions.php`：

```
$session = trim($_POST['session']; 
```

在您更新的 javascript 中，您甚至没有在会话中发布任何内容，而只是在方法中发布。您需要添加 session: 'something' 以将其发送到 function.php。

# iphone - 如何确定单击了哪个 MKAnnotation？

> ID：15145448
> 
> 赞同：0
> 
> 时间：2013-02-28T20:54:53.693
> 
> 标签：iphone, dictionary, indexing, int, mkannotation

我是 iphone developmentoment 的菜鸟，我正在尝试确定注释的 int 值，因此我可以获取该 int 值并将其交叉引用到数组以获得相应的值。但是，当我尝试使用 .tag 方法获取 int 值时，该值始终返回为零。如果我有 5 个注释，我需要能够确定哪个注释是 0、1、2、3 和 4。非常感谢任何帮助。

我的代码

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view{

if (view.selected==YES) {
    NSInteger annotationIndex = view.tag; //Always returns zero
    NSLog(@"annotationIndex: %i", annotationIndex);
  }
} 

-(MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation {
// Define your reuse identifier.
  static NSString *identifier = @"MapPoint";   

  if ([annotation isKindOfClass:[MapPoint class]]) {
    MKPinAnnotationView *annotationView = (MKPinAnnotationView *) [self.mapView dequeueReusableAnnotationViewWithIdentifier:identifier];
    if (annotationView == nil) {
        annotationView = [[MKPinAnnotationView alloc] initWithAnnotation:annotation reuseIdentifier:identifier];
    } else {
        annotationView.annotation = annotation;
    }
    annotationView.enabled = YES;
    annotationView.canShowCallout = YES;
    annotationView.animatesDrop = YES;

    UIButton* rightButton = [UIButton buttonWithType:UIButtonTypeDetailDisclosure];
    NSInteger clickIndex = rightButton.tag; //Always returns zero, despite there being 5 annotations
    NSLog(@"buttonIndex: %i", clickIndex); 
    [rightButton addTarget:self
                    action:@selector(showDetails:)
          forControlEvents:UIControlEventTouchUpInside];
    annotationView.rightCalloutAccessoryView = rightButton;

    return annotationView;
  }
  return nil;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:58:59.427

tag 属性是你必须设置的。我认为你没有在任何地方设置它。

当然对于您使用 buttonWithType 创建的 UIButton。默认标记值为 0，因此在创建视图（按钮）后，您总是会得到 0 来请求标记。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-15T09:21:07.997

编写以下代码以获取索引值

```
- (void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view {
  // Annotation is your custom class that holds information about the annotation
  if ([view.annotation isKindOfClass:[Annotation class]]) {
    Annotation *annot = view.annotation;
    NSInteger index = [self.arrayOfAnnotations indexOfObject:annot];
  }
} 
```

在我之前的帖子[中 https://stackoverflow.com/a/34742122/3840428](https://stackoverflow.com/a/34742122/3840428)

# objective-c - awakeFromNib 无法从 UILabel 获取值，也无法禁用 UIButton

> ID：15145451
> 
> 赞同：0
> 
> 时间：2013-02-28T20:55:11.677
> 
> 标签：objective-c, uilabel, iboutlet, xcode4.6, awakefromnib

我在单视图应用程序主情节提要中有两个按钮，并希望禁用其中一个按钮，并使用 awakeFromNib 方法从 UILabel 获取值。就我而言，必须初始化所有关系和 GUI 项，并且必须在调用 awake 方法之前分配值。不幸的是，我无法通过应用获取值并禁用按钮

```
- (void)awakeFromNib {
     decreaseButton.enabled = NO;
     decreaseButton.alpha = 0.2;
     [polygon initWithNumberOfSides:numberOfSidesLabel.text.integerValue     
               minimumNumberOfSides:3
               maximumNumberOfSides:12]; 
} 
```

到我上过的课。我已经建立了 UILabel 和

```
IBOutlet UILabel *numberOfSidesLabel; 
```

在我创建的类文件中。有人可以看到错误还是我应该提供有关该问题的更多信息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:33:29.147

首先，您必须`[super awakeFromNib];`在覆盖此方法时调用。

其次，标准做法是使用`viewDidLoad`. 试试那个。

# asp.net - 如何从 php wordpress 服务器呈现 aspx 页面

> ID：15145452
> 
> 赞同：0
> 
> 时间：2013-02-28T20:55:14.063
> 
> 标签：asp.net, sql-server, wordpress, jquery, .net-4.0

我想在我们的 wordpress 服务器上有一个页面，以从我们拥有的 .net 服务器呈现一个 aspx 页面。有没有使用 jquery 或其他一些 php 库来处理这个问题的好方法？

我需要这样做，因为 aspx 能够从 sql server 中提取数据，并且我希望我们的网页设计师使用 wordpress 服务器正确呈现这些数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:01:35.540

如果 .NET 服务器与 WordPress 服务器不在同一个域中，最好的方法是使用 iframe

```
<iframe src="http://url/to/.net/server.aspx">   
</iframe 
```

如果 .NET 服务器和 WordPress 服务器在同一个域中，jQuery 也可以提供帮助。

你可以用 jQuery 做这样的事情：

```
$(function(){
   $('#result').load('http://google.com');
}); 
```

并且只需在您的 wordpress 服务器中使用 id 设置一个 div `result`，如下所示：

```
<div id="result" >
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:10:59.083

您想在 Wordpress 页面中呈现 apsx 页面吗？您也可以在 wordpress 中定义一个简码。这应该处理嵌入内容服务器端（可以使用优化、缓存）：

```
# shortcode  [embedcontent href="http://www.yoursite.com/page.aspx"]
function embedcontent($atts, $content = null) {
    if ( isset( $atts['href'] ) ) {
        return file_get_contents( $atts['href'] );
    }
    return '';
}

add_shortcode("embedcontent", "embedcontent"); 
```

否则，js 跨域访问内容确实有一些限制。

# objective-c - 镜像到外部屏幕时，我可以在后台运行电影播放器 吗 - 目标 c

> ID：15145453
> 
> 赞同：1
> 
> 时间：2013-02-28T20:55:15.500
> 
> 标签：objective-c, video, background, mirroring

我有一个从本地磁盘播放视频的应用程序，当连接第二个屏幕（通过 AV 复合电缆）时，它将电影视图切换到外部屏幕。到目前为止，这工作正常。我想要的是，当用户按下主页按钮并且应用程序进入后台模式时；当应用程序在后台模式下运行时，我想继续在第二个屏幕中播放视频。这适用于音频，因为我已将我的应用程序设置为在后台模式下继续播放音频并且它工作正常：音频继续在后台模式下正常播放。现在是否可以继续播放视频，以及如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:36:45.263

This is not possible. It is outside of the scope of an iOS app to continue powering a screen while it is in the background.

# asp.net-mvc-4 - 当用户单击一种文化时，应该将“文化”的标识符插入/更新到 URL 中吗？

> ID：15145456
> 
> 赞同：0
> 
> 时间：2013-02-28T20:55:30.597
> 
> 标签：asp.net-mvc-4, url-rewriting, routing, cultureinfo

我在 MVC4 中有一个自定义路由设置，它允许以下模式：

*文化/控制器/动作/id*

除了默认值：

*控制器/动作/ID*

我想向我的页面添加一个显示可用文化的菜单。当用户单击一种文化时，应该将“文化”的标识符插入/更新到 URL 中吗？

在 MVC4 中像这样修改路由（url）的最佳方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:38:30.643

Make an HtmlHelper

```
public static class UrlExtensions
{
    public static MvcHtmlString CultureUrl(this HtmlHelper htmlHelper, string cultureName)
    {
        RequestContext requestContext = htmlHelper.ViewContext.RequestContext;

        RouteValueDictionary values = requestContext.RouteData.Values;

        var data = new
        {
            culture = cultureName ?? Thread.CurrentThread.CurrentUICulture.Name,
            controller = values["controller"],
            action = values["action"],
            id = values["id"]
        };

        UrlHelper urlHelper = new UrlHelper(requestContext);
        string url =  urlHelper.RouteUrl(data);

        return MvcHtmlString.Create(url);
    }
} 
```

Then use it in the view:

```
<%foreach(var culture in Model.cultures){%>
    <%=Html.CultureUrl(culture)%>
<%}%> 
```

# cordova - childbrowser phonegap 打不开窗口

> ID：15145459
> 
> 赞同：0
> 
> 时间：2013-02-28T20:55:49.523
> 
> 标签：cordova, childbrowser

我试试这段代码

```
document.addEventListener("deviceready", function(){
    console.log('test');
    var root = this;
    cb = window.plugins.childBrowser;

    if(cb != null) {
    console.log('test1');
    cb.onLocationChange = function(loc){ root.locChanged(loc); };
    cb.onClose = function(){root.onCloseBrowser(); };
    cb.onOpenExternal = function(){root.onOpenExternal(); };
    cb.showWebPage("http://assas.archus.fr/thumbs/pdf/methodo/sdsdfsd_sdf.pdf");
    }
}, false); 
```

但是没有打开浏览器是正常的吗？我所有的 console.log 都会出现

谢谢

编辑：

2.4.0 的代码

```
window.open('http://assas.archus.fr/thumbs/pdf/methodo/sdsdfsd_sdf.pdf', '_blank', 'location=yes'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:47:49.327

您使用的是哪个版本的 PhoneGap。从 2.3.0 版本开始，您可以使用 PhoneGap 附带的 InAppBrowser 功能：http: [//docs.phonegap.com/en/2.4.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser](http://docs.phonegap.com/en/2.4.0/cordova_inappbrowser_inappbrowser.md.html#InAppBrowser)

这比 ChildBrowser 插件更易于使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T17:58:09.717

Android 没有 iOS 中的内置 PDF 查看器。因此，您需要在第三方查看器（如 Google 文档查看器）中打开 PDF，如下所示：

cb.showWebPage(encodeURI(" [http://docs.google.com/viewer?url=http://assas.archus.fr/thumbs/pdf/methodo/sdsdfsd_sdf.pdf](http://docs.google.com/viewer?url=http://assas.archus.fr/thumbs/pdf/methodo/sdsdfsd_sdf.pdf) ")

# spring - Spring MVC 应用程序不接受 JSON

> ID：15145460
> 
> 赞同：6
> 
> 时间：2013-02-28T20:55:52.610
> 
> 标签：spring, post, spring-mvc

我无法弄清楚为什么我不能将更新发布到我的控制器。我正在尝试通过 chrome 插件提交 json 数据。最终我将使用角度来处理请求。我检查了其他 stackoverflow 文章，似乎我有他们建议的一切。

对于它的价值，我有一个对同一个控制器的 GET 请求，它可以正常工作。

```
HTTP Status 415 -  The server refused this request because the request entity is in a format not supported by the requested resource for the requested method. 
```

我的服务器日志显示以下内容

```
INFO - Mapped "{[/service/products/addProduct],methods=[POST],params=[],headers=[],consumes=[application/json],produces=[],custom=[]}" onto public void com.cr.controllers.ProductsController.addProduct(com.cr.entity.Products) 
```

邮寄到地址

```
http://localhost:8082/service/products/addProduct 
```

正在发布的数据

```
{
    "productId": 2,
    "productModel": "Product Model 2",
    "productName": "Product Name 2",
    "dateAdded": 1361880001000,
    "productWeight": 2,
    "productStatus": "Hidden",
    "productTaxClass": {
        "taxId": 2,
        "taxClassTitle": "High Tax Class",
        "taxClassDescription": "This is a high tax class",
        "lastModified": 1361880001000,
        "dateAdded": 1361880001000
    },
    "productImages": {
        "imageId": 2,
        "imageDescription": "Product Image 2",
        "imageTitle": "Image 2",
        "imagePath": "prd_02.jpg",
        "imageRelation": 1
    },
    "productManufacturer": {
        "manufacturerId": 2,
        "manufacturerName": "Factory 2",
        "manufacturerImage": null
    },
    "quantityAvailable": 4,
    "quantityInWarehouse": 4,
    "stockAlert": 1,
    "productCost": 1,
    "productRetail": 1,
    "productPrice": 1,
    "productSalePrice": 1,
    "saleInd": null,
    "productSku": null,
    "backOrderMessage": null,
    "inStockMessage": null,
    "outOfStockMessage": null,
    "manufacturerproductsku": null,
    "productDescriptionId": {
        "productTextId": 2,
        "productTextData": "Este es en espanol",
        "lastModified": 1361793601000
    }
} 
```

控制器映射

```
@RequestMapping(value = "/service/products/addProduct",
        consumes = "application/json",
        method= RequestMethod.POST)
public @ResponseBody void addProduct(@RequestBody Products products){
    productsDao.createProduct(products);
} 
```

web.xml

```
 <servlet-mapping>
        <servlet-name>cr</servlet-name>
        <url-pattern>/</url-pattern>
    </servlet-mapping>

    <filter>
        <filter-name>httpMethodFilter</filter-name>
        <filter-class>org.springframework.web.filter.HiddenHttpMethodFilter</filter-class>
    </filter>

    <filter-mapping>
        <filter-name>httpMethodFilter</filter-name>
        <servlet-name>cr</servlet-name>
    </filter-mapping> 
```

****_更新*_* _****

 **我开始使用 amplify 来完成我的请求，因为我想确定它不是 chrome 插件。我现在买了400。以下是我的服务器上显示的错误。

```
org.springframework.http.converter.HttpMessageNotReadableException: Could not read JSON: Can not deserialize instance of com.cr.entity.Products out of START_ARRAY token
 at [Source: org.apache.catalina.connector.CoyoteInputStream@28d528d5; line: 1, column: 1]; nested exception is org.codehaus.jackson.map.JsonMappingException: Can not deserialize instance of com.cr.entity.Products out of START_ARRAY token
 at [Source: org.apache.catalina.connector.CoyoteInputStream@28d528d5; line: 1, column: 1 
```

这是放大定义和请求。

```
 amplify.request.define("addRequest", "ajax", {
            url: "service/products/addProduct",
            type: "POST",
            dataType: 'json',
            contentType: 'application/json'
        });
        amplify.request({
            resourceId: "addRequest",
            data: JSON.stringify(jsonData),
            success: function () {
                alert("success")
            },
            error: function () {
                alert("fail")
            }
        }); 
```

数据：

```
var jsonData = [{
    "productId": 4,
    "productModel": "Product Model 2",
    "productName": "Product Name 2",
    "dateAdded": 1361880001000,
    "productWeight": 2,
    "productStatus": "Hidden",
    "productTaxClass": {
        "taxId": 2,
        "taxClassTitle": "High Tax Class",
        "taxClassDescription": "This is a high tax class",
        "lastModified": 1361880001000,
        "dateAdded": 1361880001000
    }
}]; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T14:48:16.653

我需要将以下内容添加到 jsonConverter bean。

```
<property name="prefixJson" value="false"/> 
```

最终Bean如下

```
 <bean id="jsonConverter" class="org.springframework.http.converter.json.MappingJacksonHttpMessageConverter">
        <property name="prefixJson" value="false"/>
        <property name="supportedMediaTypes" value="application/json"/>
    </bean> 
```

[另一个堆栈溢出文章](https://stackoverflow.com/questions/10247639/deserialize-arraylist-from-string-using-jackson)**

# xml - excel 2010导入带有嵌套元素的xml创建重复记录

> ID：15145466
> 
> 赞同：1
> 
> 时间：2013-02-28T20:56:01.347
> 
> 标签：xml, excel-2010

我有一个 xml 文件，除了一个问题外，它可以很好地导入。xml 文件中的每条记录都有一个元素，该元素可以包含多个元素。

当我导入这个时，excel 会为每个 . 因此，如果我有一条包含 5 张图像的记录，我将在 excel 表中拥有 5 行，除了图像列之外，它们都是重复的。

如果 excel 只是添加了足够的列，以便与每条记录关联的所有图像都在一行上并且我没有重复的记录，我会喜欢它。

有人知道这是否可以用 excel 2010 完成吗？如果它会有所作为，我可以升级到 excel 2013。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:36:20.233

我认为这不会有什么不同。

Excel 不是分层的（如 XML），会将您的 5 个图像解释为 5 个不同的记录（具有相同的祖先数据）。

您可能可以使用一些 XML 映射来做您想做的事情，但我自己从未尝试过。

您还可以编写自定义 vba 函数来根据需要导入 xml。

# grails - 创建域类的新实例不保存

> ID：15145469
> 
> 赞同：0
> 
> 时间：2013-02-28T20:56:06.973
> 
> 标签：grails, grails-orm

我不想保存已编辑的域类，而是想使用我已制定的更改创建它的新实例。

```
def update =
{
        def VariantInstance = Variant.get(params.id)
        VariantInstance.properties = params
        def NewVariantInstance = new Variant()
        //Now Assign Variant Instance new Values
        NewVariantInstance.Name = VariantInstance.Name
        NewVariantInstance.LocationID = VariantInstance.LocationID
        NewVariantInstance.aliases = VariantInstance.aliases
        NewVariantInstance.closeToBoundary = VariantInstance.closeToBoundary

        if (VariantInstance) {
        if (!VariantInstance.hasErrors() && !NewVariantInstance.hasErrors()) {
            println("no errors")
            try {
            NewVariantInstance.save()
            }
            catch (Exception ex)
            {
                println(ex.toString())
            }

            flash.message = "${message(code: 'default.updated.message', args: [message(code: 'Variant.uniqueIdentifyingName', default: 'Variant'), VariantInstance.id])}"
            redirect(action: "list")
        }

} 
```

但是，当我运行此 A) 未保存新版本和 B) NewVariantInstance 没有 id。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:11:12.663

你的`VariantInstance`and`NewVariantInstance`永远不会被验证，所以`hasErrors()`总是会返回 false。你需要从

```
!VariantInstance.hasErrors() && !NewVariantInstance.hasErrors() 
```

至

```
VariantInstance.validate() && NewVariantInstance.validate() 
```

可能`NewVariantInstance`存在验证错误，因此`save()`不成功。

# c# - 如何在 Simple.Data 中正确执行急切加载？

> ID：15145482
> 
> 赞同：1
> 
> 时间：2013-02-28T20:56:32.160
> 
> 标签：c#, mysql, .net, sql, simple.data

当我尝试进行急切加载（`.WithXyz()`方法）时，我得到了错误的数据。它尝试使用两个表的主 ID 进行连接，而不是连接到辅助表 ID 的主表上的“属性”。

这是我的代码、Simple.Data.MySql 还是 Simple.Data 中的错误？

我正在使用 NuGet 的 Simple.Data (0.18.3.1) 和 Simple.Data.MySql (0.18.3.0) 版本。

我的代码：

```
var traceListener = new SimpleDataTraceListener(); // For logging SQL
Trace.Listeners.Add(traceListener);

var db = Database.Open();
OrderItem orderItem = db.OrderItems
    .WithCustomer()
    .Get(1)
    ;

Console.WriteLine(traceListener.Output);
Console.WriteLine(orderItem.Customer.FullName); 
```

这是我期望的 SQL 示例：

```
SELECT orderitem.id,
       orderitem.customer_Id,
       orderitem.productname,
       customer.id AS __with1__Customer__id,
       customer.fullname AS __with1__Customer__fullname
FROM orderitem
LEFT JOIN customer ON (orderitem.customer_Id = customer.id)
WHERE orderitem.id = ?p1 LIMIT 0, 1

?p1 (UInt64) = 1 
```

这是它实际创建的 SQL 的日志：

```
select orderitem.id,
       orderitem.customer_Id,
       orderitem.productname,
       customer.id AS __with1__Customer__id,
       customer.fullname AS __with1__Customer__fullname
from orderitem
LEFT JOIN customer ON (orderitem.id = customer.id)
WHERE orderitem.id = ?p1 LIMIT 0, 1

?p1 (UInt64) = 1 
```

我的数据：

```
CREATE TABLE `customer` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `fullname` VARCHAR(130) NOT NULL,
  PRIMARY KEY (`id`),
  UNIQUE INDEX `fullname_UNIQUE` (`fullname` ASC)
);

CREATE TABLE `orderitem` (
  `id` BIGINT(20) NOT NULL AUTO_INCREMENT,
  `customer_Id` BIGINT(20) NOT NULL,
  `productname` VARCHAR(130) NOT NULL,
  PRIMARY KEY (`id`),
  FOREIGN KEY (`customer_Id`) REFERENCES `customer` (`id`)
);

INSERT INTO `customer` (fullname)
VALUES ('wall-E'), ('merlyn'), ('someone');

INSERT INTO `orderitem` (customer_Id, productName)
VALUES (3, 'test item 1'), (2, 'test item 2'), (1, 'test item 3'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T11:24:10.870

看起来（来自[https://github.com/Vidarls/Simple.Data.Mysql/blob/master/Src/Simple.Data.Mysql.Mysql40/MysqlForeignKeyCreator.cs](https://github.com/Vidarls/Simple.Data.Mysql/blob/master/Src/Simple.Data.Mysql.Mysql40/MysqlForeignKeyCreator.cs)）MySQL提供程序的方式可能有问题处理外键。该提供程序是为 MySQL 4.0 编写的；自该版本以来，语法可能已经发生了很大变化。

我建议在该项目的 GitHub 页面 ( [https://github.com/Vidarls/Simple.Data.Mysql/issues](https://github.com/Vidarls/Simple.Data.Mysql/issues) ) 上提出问题，或者如果可以的话，可以帮助提出拉取请求。

同时，您可以像这样显式指定联接：

```
var db = Database.Open();
dynamic customer;
OrderItem orderItem = db.OrderItems
    .FindAllById(1)
    .OuterJoin(db.Customers.As("Customer"), out customer)
    .On(Id: db.OrderItems.CustomerId)
    .With(customer)
    .FirstOrDefault(); 
```

我还更改了代码以使用查询和 FirstOrDefault，以便显式连接起作用。

# objective-c - 具有 +0 保留计数的对象返回给调用者，其中预期 +1（拥有）保留计数 - 为什么？

> ID：15145491
> 
> 赞同：1
> 
> 时间：2013-02-28T20:57:10.850
> 
> 标签：objective-c, memory-management, memory-leaks

我在使用以下代码时遇到问题，其中 Xcode 正在标记内存问题。警告位于代码下方，在返回行上。有人知道为什么，我能做些什么吗？

```
- (id)copyWithZone:(NSZone *)zone
{
    NSData *archivedData = [NSKeyedArchiver archivedDataWithRootObject:self];
    return [NSKeyedUnarchiver unarchiveObjectWithData:archivedData];
} 
```

> Mvariable.m:177:2：具有 +0 保留计数的对象返回给调用者，其中预期 +1（拥有）保留计数
> Mvariable.m:177:9：方法返回具有 +0 保留计数的 Objective-C 对象
> Mvariable.m:177:2：返回给调用者的对象具有 +0 保留计数
> Mvariable.m:177:2：具有 +0 保留计数的对象返回给调用者，其中预期 +1（拥有）保留计数

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T20:59:38.327

以“copy”、“create”、“new”、“alloc”或“retain”开头的方法必须返回一个已保留的对象，即调用者必须释放它。

`[NSKeyedUnarchiver unarchiveObjectWithData:archivedData]`返回一个自动关联的对象。

见：[https ://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html)

# c# - 在另一个表达式树内的方法中使用表达式树

> ID：15145495
> 
> 赞同：1
> 
> 时间：2013-02-28T20:57:26.207
> 
> 标签：c#, nhibernate, expression-trees

我有两节课：

```
class Foo 
{
    string Name
}

class Bar
{
    IList<Foo> Foos;
} 
```

以及以下表达式树：

```
var fooFilters = (Expression<Func<Foo, bool>>)(foo => foo.Name == "baz"); 
```

在 NHibernate 中，我可以写：

```
Session.Query<Bar>().Where(bar => bar.Foos.Any(foo => foo.Name == "baz")); 
```

它有效。

虽然，我不能写：

```
Session.Query<Bar>().Where(bar => bar.Foos.Any(fooFilters)); 
```

这是一个编译错误，因为`IEnumerable.Any`不期望`Expression<TDelegate>`.

有没有可能实现？我是否必须重写 fooFilters 表达式，还是有其他方法？

我对表达式树操作知之甚少，谁能指出我正确的方向？

我正在使用框架 3.5，这很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T23:30:35.697

您可以使用`Invoke()`and `AsExpandable()`from [LINQKit](http://www.albahari.com/nutshell/linqkit.aspx)来执行此操作。

有了它，您的代码将如下所示：

```
Session.Query<Bar>().AsExpandable()
       .Where(bar => bar.Foos.Any(foo => fooFilters.Invoke(foo))) 
```

# bamboo - 是否可以在 Bamboo 的电子邮件通知中附加工件？

> ID：15145496
> 
> 赞同：8
> 
> 时间：2013-02-28T20:57:27.773
> 
> 标签：bamboo

我们有一个生成可执行工件的计划。有没有办法告诉竹子将这些工件作为附件发送到构建通知中？作为记录，我们正在按需使用 atlassian。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-06T06:50:48.430

`sendmail`您可以使用此处的快速[教程](https://ariejan.net/2007/06/10/send-mail-with-a-bash-shell-script)从 bash 脚本发送电子邮件。然后，您可以`artifact`在电子邮件中包含链接

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-18T18:41:45.413

难怪 Bamboo 仍然没有解决这个问题，我们在 2019 年，这个请求是从 2013 年开始的。我们确实有一个 html 报告，我们想连同来自 Bamboo 的通知电子邮件一起发送。

但我们被告知这在 Bamboo 中是不可能的。因此，我们在构建中提出了最后一个任务，它运行一个 powershell 脚本，该脚本使用我们生成的 html 报告发送电子邮件。

```
Send-MailMessage -SmtpServer smtp.yourcompanydomain.com -Port 25 -To $toEmail -From $fromEmail -Subject $subject -Body $message -BodyAsHtml -Attachments report.html -Credential $mycreds 
```

您必须声明变量，例如 $toEmail，例如 $toEmail = "abc@xyx.com" $mycreds = 您发送帐户的凭据

# git - Git：修复文件中的换行符（autocrlf 工作正常，但一个文件似乎卡住了）

> ID：15145498
> 
> 赞同：1
> 
> 时间：2013-02-28T20:57:45.950
> 
> 标签：git, github, line-breaks, core.autocrlf

我正在通过 github 进行跨平台协作，到目前为止，我`autocrlf`一直在透明地管理我们的换行格式方面做得很好。

然而，在最近的一次手动合并之后，一个文件以 CR 和 CRLF 结尾混合结束，从那以后它似乎“卡”在了那个状态——我已经推送它并检查了它的本地副本几次，但它仍然保留混合换行符。

我怎样才能要求`autocrlf`重新开始处理这个文件？（通过阅读，如果我理解正确的话，在我的编辑器中手动修复换行符会在下一次提交中明确显示，因此会掩盖文件历史记录——所以如果可能的话，我宁愿避免这种情况。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:05:44.883

如果混合换行符已进入存储库，则除了手动修复它们并为该更改创建历史条目之外别无他法。

# .net - WCF：处理程序“svc-ISAPI-4.0_32bit”有一个坏模块“IsapiModule”

> ID：15145501
> 
> 赞同：2
> 
> 时间：2013-02-28T20:57:57.343
> 
> 标签：.net, wcf, iis, .net-4.0, isapi

在浏览器中浏览到我的 .svc 端点时，我收到以下消息：**处理程序“svc-ISAPI-4.0_32bit”有一个错误模块“IsapiModule”**（在 64 位 Windows 上，消息是：**处理程序“svc-ISAPI-4.0_64bit”有一个坏模块“IsapiModule”**）。

我在 IIS 的任何地方都找不到 IsapiModule。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T20:57:57.343

1) 确保安装了适当的 IIS 功能。转到控制面板 > 程序和功能 > 打开或关闭 Windows 功能，然后选择*Internet 信息服务 > Web 管理工具*和*万维网服务*以及*Microsoft .NET Framework*下的所有内容。

2) 在 Visual Studio 命令提示符下，运行以下命令：

```
aspnet_regiis -i -enable

ServiceModelReg.exe -r 
```

3) 重新启动 IIS。

# eclipse - 在 Eclipse 上设置远程 glassfish 服务器

> ID：15145517
> 
> 赞同：0
> 
> 时间：2013-02-28T20:58:54.537
> 
> 标签：eclipse, glassfish

我不是 Java 程序员，对 Eclipse 或 Web 服务了解不多。我需要创建一个 Web 服务，然后在 Windows 服务器上进行设置。所以我在eclipse juno ee 中设置了一个本地主机Glassfish 3.1.2.2 并创建了一个Web 服务。现在将其转移到 vm windows 2008 服务器。

vm windows 2008 服务器已使用 java 1.7 和 Glassfish 3.1.2.2 进行设置。glassfish 启动，我可以访问管理员。

当试图将 eclipse 连接到这个远程 glassfish 时，它失败了。新建服务器 选择 glassfish 3.1.2 服务器主机名：服务器名。管理端口：4848 端口：8080 用户：admin ping 服务器无法连接 提示：运行 asadmin enable-secure-admin 我已经运行了 asadmin enable-secure-admin 但它仍然给出同样的抱怨。

`asadmin –host servername –user admin –port 4848 –secure list-applications`

连接，因此 glassfish 服务器在那里。

`asadmin --host servername --user admin --port 4848 get secure-admin.enable` `secure-admin.enabled=true`

命令执行成功。所以 Glassfish 是安全的。

我可以ping windows服务器。我可以从我的电脑登录到 http//:servername:4848。（它确实抱怨证书但仍然让我进入）

我错过了什么？它似乎没有尝试或靠近服务器，只要按下 ping 就会出现错误。

如果它类似于防火墙，我该如何测试/检查此连接？提示没有帮助是否有实际的错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-15T19:29:44.400

This is really annoying bug, but there is a workaround.

1.  Create a localhost glassfish server with default settings. It should appear in the Servers tab.
2.  Open server settings and uncheck "Use Anonymous Connection for Admin Commands".
3.  Change IP address of a server from localhost to your server address. Now it will connect remotely using admin name and password.

# jquery - jQuery get 请求返回 gmaps4rails，不显示任何内容

> ID：15145520
> 
> 赞同：1
> 
> 时间：2013-02-28T20:59:03.277
> 
> 标签：jquery, google-maps, ruby-on-rails-3.2, partial, gmaps4rails

很简单，我的 gmap 上方有一个 jquery-ui 滑块（使用 gmaps4rails）。

当我滑动它时，我将值从 2、4、6 等更改。这会触发以下 jQuery 函数，

```
$.get('/update_local_grid ,function(data){

                    $("#map-grid").html(data);               

 }); 
```

在控制器中，

```
def update_local_grid

  @json = self.set_json

  render :partial => "maps"

end 
```

看法，

```
<div id="map-grid"> 

  <%= render "maps" %>

</div> 
```

_maps.html.erb

```
<%= gmaps(:map_options => { :container_class => "map_container_renamed" },
                            :markers => {:data => @json,
                            :options => {:auto_adjust => true,
                            :center_on_user => true,
                            :auto_zoom => true,
                            :zoom => 50}}) %>

<%= yield :scripts %> 
```

**当我发出 HTML 请求时，地图就会显示出来。但是，当我滑动 jquery-ui 滑块并发出 javascript 请求时，我渲染的部分在 firebug 控制台上显示为空白。**

我知道apneadiving会帮助我。但其他人也一样，拯救我的一周。

# javascript - Go 中的 AES 编码和 CryptoJS 中的解码

> ID：15145521
> 
> 赞同：0
> 
> 时间：2013-02-28T20:59:05.453
> 
> 标签：javascript, go, cryptojs

我在 Go 中有这些：

```
var commonIV = []byte{0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00}
plaintext := []byte("hello, world")
key_text := "32o4908go293hohg98fh40gh"
c, err := aes.NewCipher([]byte(key_text))
if err != nil {
    fmt.Printf("Error: NewCipher(%d bytes) = %s", len(key_text), err)
    return
}
cfbdec := cipher.CBCEncrypter(c, commonIV)
ciphertext := make([]byte, len(plaintext))
cfbdec.CryptBlock(ciphertext, plaintext)
fmt.Printf("%x", ciphertext) //HEX 
```

输出：

> e0df84c3b83681a8133e1787

我导入以下网址：

```
<script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/aes.js"></script>
<script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/components/enc-base64-min.js"></script>
<script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/components/mode-cfb-min.js"></script>
<script src="http://crypto-js.googlecode.com/svn/tags/3.1/build/components/pad-nopadding.js"></script> 
```

我在 JS 中的代码如下：

```
var data = CryptoJS.enc.Hex.parse("e0df84c3b83681a8133e1787");
console.log(data);
var key = "32o4908go293hohg98fh40gh";
var iv = CryptoJS.enc.Base64.parse("AAAAAAAAAAAAAAAAAAAAAA==");
console.log(iv);

var encrypted = {};
encrypted.key=key;
encrypted.iv=iv;
encrypted.ciphertext = data;

var dec = CryptoJS.AES.decrypt(encrypted, key, { mode: CryptoJS.mode.CFB, iv: iv,  padding: CryptoJS.pad.NoPadding  });

console.log(dec);
console.log(dec.toString());
console.log(dec.toString(CryptoJS.enc.Utf8)); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T04:31:59.097

你不想在 Go 代码中使用 CBCEncrypter 吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T02:46:59.897

看起来您`CBCEncrypter`在 Go 中使用的是（块计数器模式），但`CryptoJS.mode.CFB`在 JS 代码中使用的是（密码反馈模式）。据我所知，这些不是兼容的块模式。

# c++ - 函数参数上的分号

> ID：15145524
> 
> 赞同：33
> 
> 时间：2013-02-28T20:59:12.533
> 
> 标签：c++, c, matrix, syntax

```
matrix_* matrix_insert_values(int n; double a[][n], int m, int n)
{
    matrix_* x = matrix_new(m, n);
    for (int i = 0; i < m; i++)
        for (int j = 0; j < n; j++)
            x->v[i][j] = a[i][j];
    return x;
} 
```

我的测试矩阵示例

```
double in[][3] = {
    { 12, -51,   4},
    {  6, 167, -68},
    { -4,  24, -41},
    { -1, 1, 0},
    { 2, 0, 3},
}; 
```

我有点迷茫，我不知道`int n;`我的参数声明里面是什么，它适用于 C 但 C++ 不允许这种实现。我想了解这是如何工作的，因为我要将此代码迁移到 C++。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-02-28T21:04:15.173

这是~~C99~~ GNU 扩展（[GCC 文档](http://gcc.gnu.org/onlinedocs/gcc/Variable-Length.html)）中很少使用的功能，用于前向声明 VLA 声明器中使用的参数。

```
matrix_* matrix_insert_values(int n; double a[][n], int m, int n); 
```

你看怎么`int n`出现两次？第一个`int n;`只是实际的前向声明`int n`，它在最后。它必须出现在前面，`double a[][n]`因为`n`在 的声明中使用`a`。如果你对重新排列参数没问题，你可以把它放在`n`前面`a`，然后你就不需要这个功能了

```
matrix_* matrix_insert_values_rearranged(int m, int n, double a[][n]); 
```

## 关于 C++ 兼容性的注意事项

需要明确的是，GNU 扩展只是函数参数的*前向声明*。以下原型是标准 C：

```
// standard C, but invalid C++
matrix_* matrix_insert_values_2(int m, int n, double a[][n]); 
```

您不能从 C++ 调用此函数，因为此代码使用C++ 不支持的*可变长度数组。*您必须重写该函数才能从 C++ 调用它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T21:19:07.493

如果这就是你总是从 C 调用它的方式（即在编译时固定 n 和 m），那么在 C++ 中你可以这样做：

```
template <int N, int M>
void matrix_insert_values(const double (&a)[M][N]);

int main() {
  double in[5][3] = {
    { 12, -51,   4},
    {  6, 167, -68},
    { -4,  24, -41},
    { -1, 1, 0},
    { 2, 0, 3},
  };

  matrix_insert_values(in);
}; 
```

它有 N 和 M 作为模板参数，这些是在编译时从传递给函数的输入自动推导出来的。

# android - 如何从 html 链接启动 Android 服务？

> ID：15145526
> 
> 赞同：2
> 
> 时间：2013-02-28T20:59:31.493
> 
> 标签：android, html, service

我知道有一种方法可以从 html 链接 url（例如单击电子邮件中的 url 链接）启动应用程序（活动），如下所示：（www.youtube.com 只是一个示例，我有自己的主机）

```
<intent-filter>
   <action android:name="android.intent.action.VIEW"></action>
   <category android:name="android.intent.category.DEFAULT"></category>
   <category android:name="android.intent.category.BROWSABLE"></category>
   <data android:host="www.youtube.com" android:scheme="http"></data>
</intent-filter> 
```

但这正在启动一项活动，有什么方法可以启动我的服务（在后台静默）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:11:57.990

是的。使用该意图过滤器注册一个活动，从活动的 onCreate 启动服务，然后调用 finish()。通过在 onCreate 完成之前调用 finish()，该活动不应该对用户可见。

# c# - Metro 从 Drop 事件中获取已删除的数据

> ID：15145532
> 
> 赞同：1
> 
> 时间：2013-02-28T20:59:42.620
> 
> 标签：c#, listview, drag-and-drop, microsoft-metro, windows-runtime

我有一个`Control`，我从其他几个`Controls`（全部`ListViewItems`）之一拖动项目。

`Control`正确引发`Drop`事件，因为我已经设置了所有适当的属性。

现在，我如何获得`ListViewItems`被拖到控件上的那些？我看到了一个`Data`可能有用的属性 - 但我不知道如何使用它来获取所需的信息。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T17:00:41.280

找到了：

订阅`Drop`事件。并通过`e.Data.GetView()`方法访问数据。

# php - 如何使超链接动态化？

> ID：15145533
> 
> 赞同：0
> 
> 时间：2013-02-28T20:59:43.290
> 
> 标签：php

如何配置 id 以便`$menu`变量输出与其 Id 对应的值。当前发生的是 id 值在 eg 时发生变化`pid=1`，`pid=7`但`$type`不会根据 ID 发生变化。因此，`$type`不是动态的。我如何使`$type`动态？

代码：

```
 if (!isset($_GET["pid"]) && !isset($_GET["type"])){
 $pageid="1";
   $type="";
  }else{
 $pageid=$_GET["pid"];
 $type=$_GET["pid"];
 }
$query = "SELECT Type FROM cart WHERE id='$pageid'";
$result = mysql_query($query) or die(mysql_error);

 while ($row = mysql_fetch_assoc($result)) {

 $type = $row['Type'];

 } 
```

$菜单=''。$类型。''; $menu2=''。$类型。'';

当我添加 $menu 和 $menu2 变量时会出现问题，因为它们输出相同的 $type 值。但是pid值是动态的

```
 <div class="clickerdown"></div>

  <div class="seperator"><div class="text"><?php echo $menu; ?></div></div>
 <div class="clickerdown"></div>

  <div class="clickerdown2"></div>

 <div class="seperator2"><div class="text1"></div><?php echo $menu2; ?></div>
  <div class="clickerdown2"></div> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-28T21:21:31.417

考虑以下：

```
$query = "SELECT id, type FROM cart";
$result = mysql_query($query) or die(mysql_error);

while ($row = mysql_fetch_**assoc**($result)) {
  $pid = $row['id'];
  $type = $row['type'];
  //etc
} 
```

使用 'mysql_fetch_assoc' 会将每一行作为关联数组返回。

希望有帮助。:D

此外，您在 while 循环中有菜单变量。每次通过都会重新分配这些。

[更多信息请访问 php.net 网站](http://php.net/manual/en/function.mysql-fetch-assoc.php)

# mysql - mysql子查询在哪里和分组

> ID：15145535
> 
> 赞同：3
> 
> 时间：2013-02-28T20:59:50.807
> 
> 标签：mysql, group-by, subquery, where

我正在学习 mysql 手册： [http](http://dev.mysql.com/doc/refman/5.6/en/example-maximum-column-group-row.html) : //dev.mysql.com/doc/refman/5.6/en/example-maximum-column-group-row.html 我对“where.s1.article = s2.article' 部分，这是什么意思？

```
Task: For each article, find the dealer or dealers with the most expensive price.

+---------+--------+-------+
| article | dealer | price |
+---------+--------+-------+
|    0001 | A      |  3.45 |
|    0001 | B      |  3.99 |
|    0002 | A      | 10.99 |
|    0003 | B      |  1.45 |
|    0003 | C      |  1.69 |
|    0003 | D      |  1.25 |
|    0004 | D      | 19.95 |
+---------+--------+-------+

SELECT article, dealer, price
FROM   shop s1
WHERE  price=(SELECT MAX(s2.price)
              FROM shop s2
              WHERE s1.article = s2.article);

+---------+--------+-------+
| article | dealer | price |
+---------+--------+-------+
|    0001 | B      |  3.99 |
|    0002 | A      | 10.99 |
|    0003 | C      |  1.69 |
|    0004 | D      | 19.95 |
+---------+--------+-------+ 
```

我正在尝试编写类似的代码：

```
SELECT sex, name, birthday
From   user
Where  birthday=(SELECT MAX(birthday)
              FROM user
              group by sex); 
```

但是我的输出错误：子查询返回超过 1 行，为什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T21:22:19.120

原始查询称为*相关子查询*。子查询中的`WHERE`子句将找到的最大值限制为仅与外部查询正在处理的行匹配的文章。

在您的查询中，您没有`WHERE`子句，因此它会处理表中的所有内容。然后它返回按性别分组的结果。我假设您的表中有两种性别，因此它返回一行男性的最大值，另一行包含女性的最大值。但是`WHERE price = (<subquery>)`要求子查询只返回一个结果，因为`=`只能与单个值一起使用。

您可以使用`IN`而不是`=`匹配多个返回值。这可能不是您想要的，但您还没有描述您希望查询做什么，所以很难说。

要获取每个性别中最年轻的人，您可以编写一个相关的子查询，就像手册中的那个：

```
select sex, name, birthday
from user u1
where birthday = (select max(birthday)
                  from user u2
                  where u1.sex = u2.sex) 
```

或者您可以将连接与分组子查询一起使用：

```
select u1.sex, name, u1.birthday
from user u1
join (select sex, max(birthday) maxbirthday
      from user
      group by sex) u2
on u1.sex = u2.sex and birthday = maxbirthday 
```

# ruby-on-rails - 在 Rails 中添加可用于所有 activerecord 模型的全局函数

> ID：15145542
> 
> 赞同：0
> 
> 时间：2013-02-28T21:00:14.230
> 
> 标签：ruby-on-rails, activerecord

嘿伙计们，我想添加一个这样的函数，它将随机记录返回到我的结构中存在的所有活动记录模型。我该怎么做呢？

```
 def self.random
   if (c = count) != 0
    find(:first, :offset =>rand(c))
   end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:03:46.617

为什么麻烦？

```
Model.order("RANDOM()").first 
```

在这个问题上有更好的性能查询

[Rails 3：获取随机记录](https://stackoverflow.com/questions/5342270/rails-3-get-random-record)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:06:04.857

尽管您可以直接使用 sql，但我将把它留在这里以供将来参考，以便将类方法添加到所有`ActiveRecord`对象。

```
class MyActiveRecordBase < ActiveRecord::Base
  def self.random
    if (c = count) != 0
      find(:first, :offset =>rand(c))
    end
  end
end 
```

现在确保你想要这个类方法的每个模型都扩展自`MyActiveRecordBase`

```
class Model < MyActiveRecordBase
end

class AnotherModel < MyActiveRecordBase
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:08:23.310

在您的 /lib 文件夹中创建一个模块作为 models_methods.rb。

在这个模块中创建一个方法，

```
def rand(model)

   model.order("RANDOM()").first

end

def string_to_url(model)

  model.find(2).name.gsub([^A-Za-z0-9],/ /).downcase)

end 
```

将此模块作为“include ModelsMethods”包含在您的所有模型中。该模块可以包含您要跨模型使用的所有方法。

# php - 我是 PHP+MySql 的新手，正在尝试编写一个简单的脚本来从数据库中删除用户，但我并没有摆脱错误

> ID：15145543
> 
> 赞同：0
> 
> 时间：2013-02-28T21:00:21.347
> 
> 标签：php, mysql

这是我删除用户的全部代码：

```
 <?php
  $page_title = 'Delete a User';
  include ('includes/header.html');
   echo '<h1>Delete a User</h1>';

   if ( (isset($_GET['id'])) && (is_numeric($_GET['id'])) ) { // From view_users.php
     $id = $_GET['id'];
     } elseif ( (isset($_POST['id'])) && (is_numeric($_POST['id'])) ) { // sbmsn
 $id = $_POST['id'];
     } else { // No valid ID, kill the script.
echo '<p class="error">This page has been accessed in error.</p>';
include ('includes/footer.html'); 
exit();

    }

  require_once ('../connect.php');

  if($_SERVER['REQUEST_METHOD'] == 'POST') {
if($_POST['sure'] == 'Yes') {
    $q="DELETE FROM user WHERE user_id= $id ";
    $r= @mysqli_query ($dbc, $q);
    if(mysqli_affected_rows($dbc) == 1) {
        echo '<p>The user has been deleted</p>';
    }
    else {
        echo '<p class="error">Sorry! the user could not be deleted.</p>';
        echo '<p>' . mysqli_error($dbc) . '<br/>Query: '.$q. '</p>';
    }
}
else {
    echo '<p>The user has not been deleted.</p>';
}
   }
    else {
$q="SELECT first_name FROM user WHERE user_id=$id";
$r= @mysqli_query($dbc,$q);

if(mysqli_num_rows($r) == 1) {
    $row = mysqli_fetch_array($r,MYSQLI_NUM);

    echo "<h3>Name: $row[0]</h3> Are you sure you want to delete this user?";
    echo '<form action="delete_user.php" method="post">
      <p> <input type="radio" name="sure" value="Yes" />Yes</p>
      <p> <input type="radio" name="sure" value="No" checked="checked" />No</p>
       <input type="submit" name="submit" value="submit" />
      <input type="hidden" name="id" value=" '.$id.' "/>

    </form>';
}
else {
    echo '<p class="error">ERROR Sorry!</p>';
}
  }

   mysqli_close($dbc);

  include ('includes/footer.html');
 ?> 
```

但每次我得到错误

```
This page has been accessed in error 
```

这些`$id`东西正在使用同一种脚本来编辑用户的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:06:53.523

这个问题与SQL无关。问题位于此代码中：

```
if ( (isset($_GET['id'])) && (is_numeric($_GET['id'])) ) { // From view_users.php
    $id = $_GET['id'];
} elseif ( (isset($_POST['id'])) && (is_numeric($_POST['id'])) ) { // sbmsn
    $id = $_POST['id'];
} else { // No valid ID, kill the script.
    echo '<p class="error">This page has been accessed in error.</p>';
    include ('includes/footer.html'); 
    exit();
} 
```

因此，这意味着以下情况属实：

1.  `$_GET['id']`不是数字或未设置
2.  `$_POST['id']`不是数字或未设置

检查发送到此页面的内容。

要调试，首先`print_r($_GET); print_r($_POST);`在页面顶部插入并查看输出。如果`$_GET`和`$_POST`为空，则不会向该页面发送任何内容。如果它们有值，它们可能不是数字。从这里开始根据需要进行修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:49:24.293

```
<?php

//Access From view_users.php?id=1;
//Access via form input with name "id" submitted via get or post methods
//You might want to do an integer casting (int)$_REQUEST['id']; //Not very necessary

  $page_title = 'Delete a User';
  include ('includes/header.html');
   echo '<h1>Delete a User</h1>';

   if ( (isset($_REQUEST['id'])) && (is_numeric(trim($_REQUEST['id']))) ) { // From view_users.php
     $id = mysqli_real_escape_string($dbc, trim($_REQUEST['id'])); //Be paranoid about security
     } else { // No valid ID, kill the script.
echo '<p class="error">This page has been accessed in error.</p>';
include ('includes/footer.html'); 
exit();

    } 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-02-28T21:05:31.417

我认为问题是 is_numeric($_GET['id']) 或 is_numeric($_POST['id'])。您发布一个字符串，它会将字符串检测为字符串而不是数字。

# python - Python FFI 中的 Haskell 函数

> ID：15145544
> 
> 赞同：2
> 
> 时间：2013-02-28T21:00:26.413
> 
> 标签：python, haskell, ffi

我尝试使用 FFI 在我的 Python 程序中使用 haskell 函数。

我的功能就像 f :: String -> String

任何人都可以帮助我吗？

我有另一个函数 f2 :: [(Double,Double,Double)] -> ((Double,Double,Double),(Double,Double,Double))

编辑：

我在这里找到了一些信息：[https ://github.com/nh2/call-haskell-from-anything](https://github.com/nh2/call-haskell-from-anything)

我知道如何在 Python 中调用 fib :: Int -> Int 之类的函数

前任。

```
module Example where

import Foreign.C.Types

fibonacci :: Int -> Int
fibonacci n = fibs !! n
    where fibs = 0 : 1 : zipWith (+) fibs (tail fibs)

fibonacci_hs :: CInt -> CInt
fibonacci_hs = fromIntegral . fibonacci . fromIntegral

foreign export ccall fibonacci_hs :: CInt -> CInt 
```

但我不知道如何在 Python 中使 funciton :: String -> String 可调用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T14:59:41.727

正如您需要将 fib 函数包装`Int`到函数 on 上`CInt`一样，您同样需要将函数包装为 on 上`String`的函数`CString`：[http ://www.haskell.org/ghc/docs/latest/html/libraries/base/ Foreign-C-String.html](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Foreign-C-String.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-17T16:21:46.573

以下是一些用于调用`Haskell`的选项`Python`

有一个开源项目[HaPy](https://github.com/sakana/HaPy)，它提供了一个漂亮且易于使用的绑定。这里支持 Char 和 String Haskell 类型。

[这里](https://github.com/nh2/haskell-from-python)还有`ctypes.cdll.LoadLibrary`一个例子的方法。您需要将 sclv 的答案与.`CString`

有关如何使用[CString的示例，请参阅此答案](https://stackoverflow.com/questions/17812166/how-to-pass-a-string-from-haskell-to-c)

# breeze - 按需加载相关实体时出错 (entityAspect.loadNavigationProperty())

> ID：15145547
> 
> 赞同：1
> 
> 时间：2013-02-28T21:00:36.483
> 
> 标签：breeze

我正在使用 durandaljs 和breathjs 做一个应用程序。我正在尝试获取导航属性的值。我的问题是，当我尝试在微风中调用此方法时：

```
user.entityAspect.loadNavigationProperty("userType"); 
```

我收到错误““'propertyOrExpr'参数必须是'字符串'”。以下代码部分会抛出此错误：

```
var q = new EntityQuery(navProperty.entityType.defaultResourceName);
var pred = buildNavigationPredicate(entity, navProperty);
q = q.where(pred); 
```

问题是“pred”为空，因为“buildNavigationPredicate”返回 null。进入“buildNavigationPredicate”：

```
if (navigationProperty.foreignKeyNames.length === 0) return null; 
```

问题是'foreignKeyNames'数组是空的，'navigationProperty'中的所有其余字段都被填充，但我不知道为什么，但我的服务器没有发送此信息。（foreignKeyNamesServer 也是空的）。

有人有同样的问题吗？会是微风的虫子吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-02T10:08:50.823

我昨天找到了解决方案，我没有时间刷新它。问题出在我的用户类的定义中。我首先使用 Web API 和 EF 代码。我的旧用户类是：

```
 public class User
{
    public Guid Id { get; set;}
    public string UserName { get; set; }
    public string Password { get; set; }
    public bool Active { get; set; }

    public virtual UserType UserType { get; set;}
} 
```

要使用 user.loadNavigationProperty('userType')，我必须更改旧的用户类：

```
 public class User
{
    public Guid Id { get; set;}
    public string UserName { get; set; }
    public string Password { get; set; }
    public bool Active { get; set; }

    public Guid UserType_Id { get; set; }

    [ForeignKey("UserType_Id")]
    public virtual UserType UserType { get; set;}
} 
```

这样做，我解决了这个问题。但是，我可以为多对多关系实施此解决方案。做了一些研究，我发现，微风目前不支持多对多关系。所以我唯一能做的就是在多对多关系中实现一个中间实体。

非常感谢 Ward 抽出宝贵时间。如果有任何其他方法可以解决这个问题，我会很乐意倾听。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T02:27:06.717

错误消息没有帮助。幸运的是，您已将问题追溯到缺少 foreignKeyNames。这表明您在导航属性的定义中遗漏了一些东西。出于某种原因，Breeze 没有检测到其中的 FK 属性`User`与`UserType`. 如果您使用 Web API 和 EF，您可能会确认在服务器上正确指定了 FK。

实际上，为了提供适当的帮助，我们必须查看您的类定义`User`，来自服务器的元数据部分描述`User`和`UserType`（**请不要打印整个元数据！**`EntityType` ）以及运行时返回的对象的快照`manager.metadataStore.getEntityType('User')`

# c# - 随机和即时超时错误

> ID：15145549
> 
> 赞同：0
> 
> 时间：2013-02-28T21:00:46.063
> 
> 标签：c#, asp.net-mvc-3

**超时已过期。在操作完成之前超时时间已过或服务器没有响应。**

我们正在使用 C#.net MVC3 和 Sql Server 2008。

我的应用程序有这个奇怪的问题。此错误会立即出现（启动新操作后没有等待时间）和随机出现（每次应用程序将数据保存在数据库中时）。

一个动作的例子是：点击下一个按钮，应用程序应该将数据保存在数据库中，但是没有等待时间就出现了错误。

此外，当出现错误时，您可以刷新页面，您可以毫无问题地继续。

我们已经在我们的 webconfig 上测试了增加 TimeOut 的应用程序，但它没有用。

你知道为什么会发生这个错误吗？如果您需要更多信息，请告诉我。

我会等的，谢谢

# java - 如何在 Eclipse 中关闭最终变量的折叠？

> ID：15145552
> 
> 赞同：0
> 
> 时间：2013-02-28T21:00:56.833
> 
> 标签：java, eclipse, eclipse-juno

我有以下代码：

```
public abstract class R {
private R(){}

public static abstract class Resources {
    private Resources() {
    }

    public static final String
    STR1 = "Foo",
    STR2 = "Foo";
    }
} 
```

事实证明，当我按下“全部折叠”快捷方式时，Eclipse 折叠了“公共静态最终字符串”部分。诀窍是这个折叠代码的左侧没有“加号”。因此，我可以建议仅通过查看左侧行的索引来显示此代码。但我仍然无法手动扩展此代码。下面是它的样子： ![截屏](../Images/a71710bf474ca58236837c49363510d3.png) 折叠的代码在第 21-23 行，显然不可见。那么，关于如何扩展它（仅在其中，仅此而已）或禁止 Eclipse 折叠静态最终字段的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:06:35.630

我认为正在发生的事情是因为两个变量声明对属性使用相同的标记，所以 AST 解析器正在从声明中构建一个块，即使从语法的角度来看没有块。我可以建议的唯一解决方法是将语句拆分为两个单独的声明。

# haskell - 如何为类型族编写 gcast？

> ID：15145556
> 
> 赞同：2
> 
> 时间：2013-02-28T21:01:02.400
> 
> 标签：haskell, type-families

我正在尝试编写一个`Data.Typeable.gcast`适用于 kind 类型系列的变体`* -> *`。我正在寻找的是：

```
{-# LANGUAGE TypeFamilies #-}
import Data.Typeable

type family T

gcastT :: (Typeable a,Typeable b) => T a -> Maybe (T b)
gcastT = undefined -- but that's not working too well! 
```

以此类推`gcast :: (Typeable a,Typeable b) => f a -> Maybe (f b)`。

这可能吗？

我*可以*将上下文更改为，`(Typeable (T a),Typeable (T b)) =>`但出于美学原因，我更喜欢这个签名：毕竟`gcast`不需要。`Typeable1 f`

* * *

一些背景，以防我解决了我真正想要实现的错误问题：我的目标是编写一个函数`matchAndExtract`：

```
matchAndExtract :: (Eq a, Typeable a, Eq b, Typeable b) => a -> b -> T b -> Maybe (T a)
matchAndExtract x k v = if (cast x == Just k) then gcastT v else Nothing 
```

它检查`x`and`k`是否属于同一类型并且相等，然后返回提供的`T b`（我们那时知道它与`T a`- T 可能不是单射的，但它*是*一个函数！）或`Nothing`，否则。

我有一个解决方法，将违规内容包装`T a`在 a `newtype`、 using 中`gcast`，然后再次展开：

```
matchAndExtractF :: (Eq a, Typeable a, Eq b, Typeable b) => a -> b -> f b -> Maybe (f a)
matchAndExtractF x k v = if (cast x == Just k) then gcast v else Nothing

newtype WrapT a = WrapT { unWrapT :: T a }

matchAndExtractViaWrap :: (Eq a, Typeable a, Eq b, Typeable b) => a -> b -> T b -> Maybe (T a)
matchAndExtractViaWrap x k v = fmap unWrapT $ matchAndExtractF a k (WrapT v) 
```

但这只是让我误会了！这也适用于`T a`不是 ; 的实例的实例`Typeable`。在我看来，这再次表明`Typeable (T a)`不需要上下文。

解决方法是完全可以接受的，但我想摆脱虚假`WrapT`类型。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T21:45:30.380

您尝试做的事情不可能按照您实施的方式进行。相反，您可以使用

```
type family T x :: *
newtype NT x = NT {fromNT :: T x}
gcastT :: (Typeable a, Typeable b) => NT a -> Maybe (NT b)
gcastT = gcast 
```

在这种情况下，您不需要使用`Eq`约束。

另一种选择是将可键入的字典具体化为 GADT

```
data Type x where
  Typeable :: Typeable x => Type x

asT :: NT x -> Type x -> NT x
asT = const

gcastTD :: Type a -> Type b -> Type a -> Maybe (T b)
gcastTD t@Typeable Typeable x = fmap fromNT $ gcastT $ (NT x) `asT` t 
```

（代码未经测试，但应该几乎是正确的）

一旦你有了这个，你可以通过传递显式类型签名来使用它

```
type instance T Int = ()

justUnit = gcastTD (Typeable :: Type Int) (Typeable :: Type Int) () 
```

# php - 计算数组中的值

> ID：15145557
> 
> 赞同：1
> 
> 时间：2013-02-28T21:01:05.327
> 
> 标签：php, arrays, count

好吧，这个小问题快把我逼疯了。

这是 $strap_materials 的 print_r 输出：

```
Array(
    [0] => steel
    [1] => leather
    [2] => polyester
    [3] => leather
    [4] => steel 
) 
```

我想计算每个值存在多少次并将每个总和放入数组中的数组中，就像这样：

```
Array(
    [0] => Array(
        "name"  => steel
        "count" => 2
    )
    [1] => Array(
        "name"  => leather
        "count" => 2
    )
    [0] => Array(
        "name"  => polyester
        "count" => 1
    )
) 
```

我的意图是像这样使用新创建的数组：

```
foreach($straps as $strap) {
    echo "Name: " . $strap->name;
    echo "Count: " . $strap->count;
} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T21:05:27.217

您可以使用[`array_count_values()`](http://php.net/manual/en/function.array-count-values.php)：

```
$counts = array_count_values($strap_materials);

foreach ($counts as $name => $count) {
    ...
} 
```

# javascript - javascript，jquery在文本内单击时插入元素

> ID：15145567
> 
> 赞同：0
> 
> 时间：2013-02-28T21:01:43.593
> 
> 标签：javascript, jquery, insert

我正在尝试创建一个脚本，当在包含文本的元素内单击时插入一个元素。

看看下面的图片。

![例子](../Images/43981e549943e741bc16233d1806a73c.png)

A 和 B 是最终用户的鼠标点击位置。

因此，如果用户单击点 A，则脚本必须在发生单击的行之间插入一个元素。

如果脚本将插入具有红色背景色的元素，则结果必须如下图所示。

![结果](../Images/9450cdd002e5a7372850eac425ab7428.png)

老实说，我不知道从哪里开始，我发现一些所见即所得的编辑器使用脚本在 carret 位置插入一些东西，但这是光标位置和两行之间或行尾。我真的很感谢你的帮助。

[http://cdpn.io/nocfe](http://cdpn.io/nocfe)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:08:58.840

假设您的标记是这样的：

```
<div class="text">
    <p>Thomas is rich...</p>
    <p>in the past...</p>
</div> 
```

您可以使用[$.after()](http://api.jquery.com/after/)插入新元素

```
$(".text p").click(function()
{
    $(this).after("<p>I'm the new element</p>");
}); 
```

# asp.net-mvc-4 - 找不到 SignalR ASP.NET MVC 4 Windows 8 Visual Studio 2012 JS 集线器

> ID：15145573
> 
> 赞同：1
> 
> 时间：2013-02-28T21:01:59.343
> 
> 标签：asp.net-mvc-4, signalr

我运行我在 VS 2012 / MVC 4 / Win8 中编写的这个超级简单的 SignalR 测试应用程序。

当我运行时，我每次都会收到以下错误。由于某种原因，它看起来无法加载`/signalr/hubs`JS。

![在此处输入图像描述](../Images/7810b92eb87fa6db1e8149d3371d2cd8.png)

我究竟做错了什么？您可以从这里获取解决方案。

[http://andrewherrick.com/spike/SignalR_AJ_Hi.zip](http://andrewherrick.com/spike/SignalR_AJ_Hi.zip)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:29:39.220

两件事情

1.  `RouteTable.Routes.MapHubs();`包含在 之后`RouteConfig.RegisterRoutes(RouteTable.Routes);`。它应该包含在任何其他路由之前。[SignalR 常见问题解答](https://github.com/SignalR/SignalR/wiki/Faq)。
2.  您的项目没有编译`Global.asax.cs`（至少是我下载的版本）。您可以通过在文件 Global.asax.cs 中插入一些无效代码来测试这一点，该项目仍然可以编译。将其从项目中排除。进行干净和完整的重建。将其包含回来，然后进行完全重建。确保您*确实*收到了无效代码的编译错误（以便您知道它正在被编译）。删除无效代码并重新编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T22:11:15.883

在你的应用开始做：

```
RouteTable.Routes.MapHubs(); 
```

请参阅**为什么信号器/集线器返回 404 或为什么我得到 'myhub' 未定义？**部分：[https ://github.com/SignalR/SignalR/wiki/Faq](https://github.com/SignalR/SignalR/wiki/Faq)

# jsf - 用户之间的 JSF 组件隐私

> ID：15145574
> 
> 赞同：1
> 
> 时间：2013-02-28T21:02:09.237
> 
> 标签：jsf, jsf-2

假设有两个页面，分别命名为登录和主页。预定义的登录过滤器正在检查我们的会话映射是否具有经过身份验证的用户对象，如果有则进入。

使用 bean 值渲染组件是处理诸如管理员 - 用户 - 访客等角色的最简单方法。但它并没有区分网站的更具体的用户角色。

想要在用户之间创建一个额外的隐私层。例如，如果两个用户有朋友关系，他们将完全看到彼此的个人资料。同时，应该阻止另一个不相关的用户查看这些完整的用户配置文件，而无需与这些用户建立友谊。

实际上，我不想使用任何第三方库，如 spring security 等。如何实现它并将其与一般角色结合使用纯 JSF ？

# sql - 通过 iReport 参数传递 SQL 运算符进行查询

> ID：15145575
> 
> 赞同：0
> 
> 时间：2013-02-28T21:02:10.143
> 
> 标签：sql, oracle, parameters, jasper-reports, ireport

我正在尝试基于处理事务的 oracle SQL 查询在 iReport 中创建报告。所涉及的实际表格非常冗长，并且与问题并不真正相关。我正在尝试创建一个报告，该报告将在交易金额满足以下 3 个标准之一时返回结果：

*   在 1000.00 和 2499.99 之间
*   在 2500.00 和 9999.99 之间
*   >= 10000.00

我正在尝试创建一个选择列表参数，运行报告的人可以在其中选择上述规范之一。在我实际创建参数之前，我一直在尝试在 SQL Developer 中测试查询。我试图实现这一点的查询行是：

```
alias.transaction_amount :amountRange 
```

我的测试输入是“1000 到 9999 之间”。当它在查询中被硬编码时，它工作正常，但是当我尝试通过这个输入传递它时，我得到一个“无效的关系运算符”错误。

还有另一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T06:32:23.600

尝试在查询中这样使用：
select ... from table1 where transaction_amount $P!{paramReport}

来自 JasperReports 终极指南：

```
$P{paramName} Syntax
The parameters are used like normal java.sql.PreparedStatement parameters, using
the following syntax:
<queryString>
<![CDATA[
SELECT * FROM Orders WHERE OrderID <= $P{MaxOrderID} ORDER BY
ShipCountry
]]>
</queryString>

$P!{paramName} Syntax
Sometimes it is useful to use parameters to dynamically modify portions of the SQL
query or to pass the entire SQL query as a parameter to the report-filling routines. In
such cases, the syntax differs a little, as shown in the following example. Notice the !
character:
<queryString>
<![CDATA[
SELECT * FROM $P!{MyTable} ORDER BY $P!{OrderByClause}
]]>
</queryString> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:58:10.390

在和一些同事交谈之后，我们发现了一个更好的解决这个问题的方法，虽然我不知道我正在寻找的方法是否真的可行，但这个解决方案更直观。

```
alias.transaction_amount between (CASE WHEN $P{Range} = 0
                                       THEN 1000.00
                                       WHEN $P{Range} = 1
                                       THEN 2500.00
                                       ELSE 10000.00
                                       END)
                                 and
                                 (CASE WHEN $P{Range} = 0
                                       THEN 2499.99
                                       WHEN $P{Range} = 1
                                       THEN 9999.99
                                       ELSE 9999999.99
                                       END) 
```

使用带有 switch 参数的 case 语句可以完美地工作，如果有一笔 10 亿美元或更多的交易，它们将被排除在外，但可以根据需要调整最大数量。

# android - 在 Android 中更改 SettingsPreferenceFragment 标题图标

> ID：15145576
> 
> 赞同：0
> 
> 时间：2013-02-28T21:02:12.090
> 
> 标签：android, icons, android-preferences, preferenceactivity

我正在尝试更改首选项片段的标题图标，但没有任何运气。我尝试在 Manifest 上设置它但没有用，另外，我通过调用 Window. 但它也行不通。有人有解决方案吗？

![在此处输入图像描述](../Images/8a2816d7593db6743b21c59140325a0e.png)

```
 <activity
        android:name=".Test"
        android:exported="true"
        android:icon="@drawable/ic_settings_test"
        android:label="Test"
        android:hardwareAccelerated="true"
        android:excludeFromRecents="false"
        android:launchMode="singleTask">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.DEFAULT" />
        </intent-filter>
    </activity> 
```

即使显示的首选项屏幕运行良好，标题上显示的图标仍然是股票设置图标：S

# php - 欧元符号打破了mysql插入过程

> ID：15145584
> 
> 赞同：0
> 
> 时间：2013-02-28T21:03:01.100
> 
> 标签：php, mysql, encoding, character-encoding, iconv

我已经编写了数据抓取引擎，它（到目前为止）一切正常，除了它在文本中出现欧元符号的位置完全停止数据插入过程。我相信这个符号可能不是唯一的。

如果即将插入数据库表的字符串如下所示：

```
Quick brown € fox jumped over the laizy dog. 
```

这将最终在数据库中：

```
Quick brown 
```

我的麻烦是*我已经按照这个网站上找到的几个关于这个问题*的说明，没有运气。

**我已经做了什么来解决这个问题（php端）：**

确保：

```
mysqli_set_charset($dblink, "utf8");
mysqli_real_escape_string($dblink, $string); 
```

尝试过：

```
iconv('windows-1250','utf8//TRANSLIT', $string );
iconv('windows-1250','utf8', $string );/*crawled web page declared windows-1250 characterset*/ 
```

（在这里我成功完成了保留€符号的数据插入，但是其他拉丁字符 čćšđž 完全降级了）

*   其他几个尝试`mb_convert_encoding()`
*   尝试使用 of`Accept`和 `Accept-Charset`headers更改服务器响应

**mysql端：**

表和字段设置为 utf8_unicode_ci

尝试修复`DEFAULT CHARACTER SET`为 utf8（对现有的非空数据库进行了修复）

没有成功。无论我尝试什么，插入过程都会以 € 符号停止。

有谁知道我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:53:40.397

我已经在我的 php/mysql 安装上测试了这些，并且都可以工作。请注意，由于我的字符编码不支持它，我无法让欧元在我的命令行上工作，所以我首先从一个运行良好的数据库中选择了它。

```
$original = 'Quick brown '.$euro.' fox jumped over the laizy dog.';
$escaped =  str_replace($euro,'\\'.$euro,$original);
echo $escaped;
$database->insertSQL('insert into test (text) values (\''.$original.'\')');
$database->insertSQL('insert into test (text) values (\''.$escaped.'\')'); 
```

原始和转义都正确插入到我的数据库中，并且转义没有反斜杠，因为 SQL 知道如何处理它。

我能想到的唯一可能与您的数据库不正确的是编码。我的编码是 latin1_swedish_ci。如果您更改表上的编码，我上面的代码块有帮助吗？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-28T21:14:44.267

这些字符是多字节的。因此，当您将其放入 var đ 时，它有点像 %71%41 或类似的东西。那是您出现问题的地方。

让我知道您是否需要更详细的帮助 Miloše :)

# oracle - ORA-00936: 缺少表达式 case 语句

> ID：15145585
> 
> 赞同：1
> 
> 时间：2013-02-28T21:03:10.243
> 
> 标签：oracle, select, case

使用 case 语句执行此选择时收到上述错误。我尝试了几种方法，但无法使语法正确。

```
SELECT m.md_security_id,
   thv.unit_qty,
   thv.contract_value_amt,
   thv.contract_currency_cd,
   (case when
   THV.BORROW_LOAN_TYPE_CD = 'B'
   then select THV.SENDER_ORG_ID as BORROWER_ORG_ID,
           select THV.RECIPIENT_ORG_ID as LENDER_ORG_ID
     end),
   (case when
   THV.BORROW_LOAN_TYPE_CD = 'L'
   THEN select THV.RECIPIENT_ORG_ID as BORROWER_ORG_ID,
            select THV.SENDER_ORG_ID as LENDER_ORG_ID
    end)   
    FROM eqmddev.txn_header_mv thv,
   eqmddev.md_security m,
   eqmddev.security_xref_vw_tbl x
   WHERE     m.isin = x.security_id
   AND ThV.SECURITY_MASTER_ID = X.SECURITY_MASTER_ID
   AND M.EXCHANGE_CD = X.EXCHANGE_CD 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:03:28.560

你需要像这样重写你的查询：

```
SELECT m.md_security_id,
   thv.unit_qty,
   thv.contract_value_amt,
   thv.contract_currency_cd,
   case 
    when THV.BORROW_LOAN_TYPE_CD = 'B' then THV.SENDER_ORG_ID 
    when THV.BORROW_LOAN_TYPE_CD = 'L' THEN THV.RECIPIENT_ORG_ID 
   end AS BORROWER_ORG_ID,
   case 
    when THV.BORROW_LOAN_TYPE_CD = 'B' then THV.RECIPIENT_ORG_ID 
    when THV.BORROW_LOAN_TYPE_CD = 'L' THEN THV.SENDER_ORG_ID 
   end AS LENDER_ORG_ID,
FROM eqmddev.txn_header_mv thv,
   eqmddev.md_security m,
   eqmddev.security_xref_vw_tbl x
WHERE     m.isin = x.security_id
   AND ThV.SECURITY_MASTER_ID = X.SECURITY_MASTER_ID
   AND M.EXCHANGE_CD = X.EXCHANGE_CD 
```

基本上，您不能从 CASE 语句中返回多个列。将其视为单个列的条件替换。`BORROWER_ORG_ID`在上面的示例中，我对别名和`LENDER_ORG_ID`别名使用了相同的 CASE 条件。

在旁注中，您还应该考虑在您的 CASE 中包含一个 ELSE 语句。否则，如果`THV.BORROW_LOAN_TYPE_CD`不是，`B`否则`L`您将获得 NULL

# java - JPA（Hibernate）表初始化，好习惯

> ID：15145586
> 
> 赞同：0
> 
> 时间：2013-02-28T21:03:11.153
> 
> 标签：java, hibernate, orm, persistence

问题是我不确定使用 Hibernate 进行第一个表初始化（创建表）是否是一种好方法。我想完全控制这个过程。

所以，我想到了使用 DDL 初始化脚本。但它似乎将依赖于 DBMS，这也很糟糕。

我想完全控制初始化过程，同时它应该独立于 DBMS。

我怎样才能达到这个目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:07:13.337

这取决于您尝试使用数据库的目的。您可以设置两个配置文件，例如一个用于在 derby 中创建表的测试，然后是一个生产配置文件，该文件将使用假设存在表的“生产”数据库。

此外，在开发过程中创建表是有意义的，这样您就可以动态创建对象/表，但是一旦发布，您就可以切换配置。

# installation - Python + Shell【创建用户自定义的unix命令及安装】

> ID：15145588
> 
> 赞同：0
> 
> 时间：2013-02-28T21:03:14.647
> 
> 标签：installation, command, user-defined

这是针对一个小型项目提案。
我想创建许多用户定义的 unix 命令，并使用 Python 编写的代码对文件执行各种操作。
例如 extractinfo 'filename' [此命令将提取存储在某个文件中的元数据或一般信息]

这就是我的工作方式：
1\. 假设我有一个 python 代码 extract.py。
2\. 现在，为了创建“我自己的 unix 命令”（比如 - 'extractinfo'），我编写了一个名为 -extractinfo 的 shell 脚本：

```
#/bin/bash
python /home/extract.py 
```

3.现在，我想把上面的shell脚本放在/usr/bin。所以我创建了另一个 shell 脚本 - install.sh：

```
#!/bin/bash
chmod u+x extractinfo  
sudo cp extractinfo /usr/bin/ 
```

4\. 现在我可以运行 install.sh 并使用命令“extractinfo”。

问题是，如果我使用另一个系统并运行 install.sh，命令 'extractinfo' 变得可用，但是在终端上执行命令时，出现错误（python：无法打开文件 'extract.py'：[Errno 2 ] 没有这样的文件或目录）被抛出。

当需要使用另一个系统时，如何处理原始 python 脚本的路径？

我知道尝试链接 shell 和 python 是非常粗糙的做事方式。任何有关此问题的帮助/建议都将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:20:31.220

有什么理由不直接将shebang用于python吗？如果您担心 python 的路径不一致，可能使用 /usr/bin/env 间接？

如果您不熟悉，请参阅[http://en.wikipedia.org/wiki/Shebang_%28Unix%29 。](http://en.wikipedia.org/wiki/Shebang_%28Unix%29)我不清楚您是否需要一个 bash 脚本。只需将 python 脚本放在 /usr/bin 中（或者可能更好，/usr/local/bin）

换句话说，如果不是很清楚，请在脚本的第一行设置：#!/usr/bin/python 或 #!/usr/bin/env python

# x++ - 究竟什么是“旧系统”，为什么我会因为缺少宏而在 2012 年收到错误消息？

> ID：15145593
> 
> 赞同：1
> 
> 时间：2013-02-28T21:03:26.170
> 
> 标签：x++, dynamics-ax-2012, axapta

我在 AX 2012 升级环境中收到此错误：

`Unable to compile int convert(){#SysBPCheck return #BPErrorSecurityKeyNotConnected;}.`

我已经将其追溯到`#SysBPCheck`缺少的宏`#BPErrorSecurityKeyNotConnected`。

宏未修改，如果我使用比较工具，我会看到“sys”和“old sys”。它存在于旧系统中。这如何/为什么会被吹走并且不起作用？我已经完成了完整的编译，但没有进行 CIL 编译。究竟什么是“旧系统”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:13:11.193

“旧系统”是由于升级而创建的对象的先前版本。在以前的 AX 版本（2012 年之前）中，在应用程序文件夹 (/app) 内的 /old 文件夹中（您可以在更新之前将图层文件手动移动到此文件夹中，以便您可以将对象与以前的版本进行比较）。从 AX 2012 开始，它应该在安装期间创建的 BaseLine 数据库中，您可以将旧的 .ald 文件导入此数据库（通过升级工具），以将实际 2012 对象与旧版本对象进行比较。

这些错误来自内部内核对象。你应该运行一个完整的内核编译，包括一个完整的 CIL 编译，如果你还没有用这个命令行完成它：

```
 ax32.exe -StartupCmd=KernelCompileAll 
```

# iphone - UITabbarController 释放我的视图控制器

> ID：15145595
> 
> 赞同：0
> 
> 时间：2013-02-28T21:03:35.257
> 
> 标签：iphone, ios

我有一些问题：我使用`UITabBarController`3 个标签，其中一个是相机。当我打开相机时，有时会发出收到内存警告。当它发生时，我所有的视图都被释放，除了相机。正常吗？有什么方法可以控制不发生吗？格拉茨。

编辑：我正在使用 3gs 模型进行测试

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:08:00.300

我想你的意思是你的视图控制器的视图被释放了，而不是视图控制器本身。

这是正常行为。UIViewController 是基于这样的假设，即在内存不足的情况下，如果视图控制器的视图不在屏幕上，则视图可以被丢弃。您可以保存您的状态，`-viewWillUnload`以便在视图控制器的视图返回屏幕并重新创建时重新构建它。

这种自动卸载行为在 iOS 6 中被移除。

# html - 如何使用 html5 和 File API 将单个文件从一个客户端浏览器发送到另一个而不将其保存在服务器（node.js）上

> ID：15145596
> 
> 赞同：2
> 
> 时间：2013-02-28T21:03:35.447
> 
> 标签：html, file, transfer, fileapi

我需要将文件从一个客户端浏览器发送到另一个浏览器，而无需将其保存在服务器 (node.js) 上 我如何使用 HTML5 和 File API 来做到这一点？

实际上实施的解决方案：

最终解决方案如下所示：

1.  在播种客户端从输入 [type=file] 获取文件

2.  文件数组包含一个存储文件对象的密钥。使用 slice/mozSlice 方法将其拆分为块，以便 Object.slice 将返回 Blob 对象。

3.  使用 FileReader Blob 可以读入原始二进制数据或 base64 编码数据。FileReader 实现 readAsDataURL(blob) 以读取 base64 和 readAsBinaryString(blob) 以读取原始二进制数据。请参阅 'onloadend' FileReader 事件以访问从 blob 读取的数据。

4.  您应该实现逻辑以根据块大小（通常为 1024 * 64）和下一个切片开始/停止位置计算块数以获得完全相同大小的块

5.  编码数据通过 socket.io 发送到 node.js，其中唯一的服务器端逻辑是将接收到的数据发送到也通过 socket.io 连接的 pear

6.  猜猜最有趣的是将所有这些块放在 pear 客户端浏览器上的 blob 中。从原始二进制数据创建 Blob 将导致错误大小的 blob 并导致错误的文件大小。这就是我们从播种机传输 base64 编码数据的原因。
    解码可能会成为问题，因为我们必须自己实现它。

    ```
    function decode64 (data) {
        var mimeString = data.split(',')[0].split(':')[1].split(';')[0],
        // remove all chars before ','
        byteString = atob(data.split(',')[1]),
        // if BlobBuilder available
        ab = new ArrayBuffer(byteString.length),
        ia = new Uint8Array(ab);

        for (var i = 0; i < byteString.length; i++) {
            ia[i] = byteString.charCodeAt(i);
        }
        blob    = new Blob([ia], {'type' : (mimeString) });
    return blob;
    } 
    ```

将数据解码为 blob 后，我们必须将其推送到包含另一个解码块的数组。7\. 从解码为 blob 的块数组创建一个 Blob，像这样

```
new Blob (array_of_decoded_blobs_returned_by_decode64_function, {type:'mime-type'}) 
```

使用文件 api 将 blob 写入文件或做任何你想做的事情

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:14:35.783

Websockets 是我能想到的唯一方法，你仍然需要一个服务器端代理。

请参阅：[Websockets 是否允许 p2p（浏览器到浏览器）通信？](https://stackoverflow.com/questions/4118272/do-websockets-allow-for-p2p-browser-to-browser-communication)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T08:52:33.947

查看[webrtc](http://www.webrtc.org/)。您可以直接将文件发送到浏览器。服务器只告诉一个客户端浏览器另一个客户端浏览器的“地址”。

# python - lxml - 忽略 html 中的标签

> ID：15145601
> 
> 赞同：5
> 
> 时间：2013-02-28T21:03:51.857
> 
> 标签：python, html-parsing, lxml

我使用 lxml 在 Python 中编写了一个小型 html 解析器。它非常有用，但我有一个问题。

我有以下代码：

```
tags = doc.xpath('//table//tr/td[@align="right"]/b')
for tag in tags:
    print(x.text.strip()) 
```

它工作正常。但是如果元素`<br>`内部有标签`<b>`，像这样：

```
<b> first-half <br>
    second-half </b> 
```

此代码只会打印`first-half`到`<b>`标签中。

`<b>`即使有`<br>`标签，如何获取所有文本？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T21:12:35.767

用于`text_content()`提取标签内的所有非标记文本。替换`x.text`为`x.text_content()`。

# php - cURL 没有从数据库发布到多个 url

> ID：15145607
> 
> 赞同：0
> 
> 时间：2013-02-28T21:04:13.160
> 
> 标签：php, mysql, curl

我遇到了这个问题，每当我尝试（从 MySQL 数据库）获取 url，然后使用 cURL 向 url 发布请求时，它只会发布其中一个 url。如果这改变了某些东西，我的数据库中总共有 11 个 url。

这是我的代码：

```
$result = mysql_query ("SELECT * FROM urls");
while ($row = mysql_fetch_array($result)) {

    $ch = curl_init(); 
    $url = $row['url']; 
    curl_setopt($ch, CURLOPT_URL,$url); // set url to post to 
    curl_setopt($ch, CURLOPT_FAILONERROR, 1); 
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1); // allow redirects 
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1); // return into a variable 
    curl_setopt($ch, CURLOPT_TIMEOUT, 0); // times out after Ns 
    curl_setopt($ch, CURLOPT_POST, 1); // set POST method 
    curl_setopt($ch, CURLOPT_POSTFIELDS, "user=test"); // add POST fields 
    $result = curl_exec($ch); // run the whole process 
    curl_close($ch); 

    echo $result; 
}; 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:13:24.323

您是否尝试过回显 $row['url'] 并查看循环中的内容？

# ruby - 在 haml 中创建一个 th 标记，其 id 是一个 Ruby 变量

> ID：15145609
> 
> 赞同：1
> 
> 时间：2013-02-28T21:04:16.250
> 
> 标签：ruby, haml

我在 haml 中有一个表，我希望表头的 id 能够根据 ruby​​ 变量@title_id 进行更改。在伪代码中，这就是我想要完成的：

```
%th.@title_id 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T21:06:27.800

这应该是这样的：

```
%th{:id => @title_id} 
```

# delphi - Delphi 2006 不允许在记录方法中记录类型的 const 参数？

> ID：15145615
> 
> 赞同：7
> 
> 时间：2013-02-28T21:04:40.477
> 
> 标签：delphi

## **更新：** 简单的解决方法。方法/操作员字段之前的数据字段。

今天我试图用我能做的最简单的例子来重现这个错误。

*   我从只有简单的设置和打印方法（没有运算符）的基本记录 (TBasicRecord) 开始，传递 const x:TBasicBecord 没有问题。

*   然后我添加了一个一元运算符，认为这会触发错误，但将记录作为 const 传递仍然没有问题。

*   然后我添加了一个二元运算符，但仍然没有出现错误。

*   最后，我注意到在我的简单示例中，我在方法字段之前声明了数据字段，结果证明这就是消除错误所需的全部内容。

我也将我的数据字段设为私有，所以起初我认为这一定是问题所在，但最终结果证明它无关紧要。唯一不同的是我是否将数据字段放在运算符和方法字段之前。

总的来说，我对这个决议很满意。就我个人而言，无论如何我总是将数据字段放在首位。有趣的是，反过来这样做似乎并没有引起任何其他问题，只要您不尝试将记录类型作为“const”参数传递到任何地方。

* * *

**原帖：**

以前我一直在使用 Delphi 7，但今天安装了 Delphi 2006 以访问 D7 不支持的操作员方法。

我正在尝试编译此处对较早问题的答复之一中列出的代码（复数实现）：[Request simple example of how to a TComplexMath class (source included)](https://stackoverflow.com/questions/15074316/request-simple-example-of-how-to-a-tcomplexmath-class-source-included/15074443#15074443)

以下是相关代码的部分列表：

```
type
  TComplex = record
  public
    class operator Implicit(const D: Double): TComplex;
    class operator Negative(const C: TComplex): TComplex;
    class operator Equal(const C1, C2: TComplex): Boolean;
    class operator NotEqual(const C1, C2: TComplex): Boolean;
    class operator Add(const C1, C2: TComplex): TComplex;
    class operator Add(const C: TComplex; const D: Double): TComplex;
    class operator Add(const D: Double; const C: TComplex): TComplex;
    class operator Subtract(const C1, C2: TComplex): TComplex;
    class operator Subtract(const C: TComplex; const D: Double): TComplex;
    class operator Subtract(const D: Double; const C: TComplex): TComplex;
    class operator Multiply(const C1, C2: TComplex): TComplex;
    class operator Multiply(const C: TComplex; const D: Double): TComplex;
    class operator Multiply(const D: Double; const C: TComplex): TComplex;
    class operator Divide(const C1, C2: TComplex): TComplex;
    class operator Divide(const C: TComplex; const D: Double): TComplex;
    class operator Divide(const D: Double; const C: TComplex): TComplex;
    function IsZero: Boolean;
    function IsNonZero: Boolean;
    function Conj: TComplex;
    function Sqr: TComplex;
    function Sqrt: TComplex;
    function Mag: Double;
    function SqrMag: Double;
  public
    r: Double;
    c: Double;
  end;

class operator TComplex.Negative(const C: TComplex): TComplex;
begin
  Result.r := -C.r;
  Result.c := -C.c;
end;
---- etc --- 
```

问题是，当我尝试编译此代码时（在 D2006 中），**每个**采用 TComplex 类型的运算符都会给出 E2037 错误：“----”的声明与之前的声明不同。（其中“---”是操作员名称）。

我的解决方法是从每个 TComplex 参数中删除**const**关键字，然后代码正确地符合（并运行）。我可以保留“const x: Double”参数，编译器没有给出错误，但我必须从所有其他参数中删除“const”。

有谁知道这是否是一些未启用的编译器选项？还是在更高版本的 Delphi 中支持此功能，但在 D2006 中不支持？还是只是我做错了其他事情？

**另外，如果我不能在这里使用 const 参数，那么将var**替换为**const**会有什么好处（与完全删除 const 关键字相比）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-28T21:42:39.907

您不*应该*替换`const`为`var`. 让我解释一下为什么。

# 背景

```
function Add(a: integer): integer;
begin
  result := a + 5;
end; 
```

返回其参数 + 5。尝试`ShowMessage(IntToStr(Add(10)))`. 您也可以这样做`a := 10; ShowMessage(IntToStr(Add(a)))`以获得相同的结果。在这两种情况下，传递给函数的东西`Add`都是数字`10`。消息显示`15`。

参数的预期用途`var`是这样的：

```
procedure Add(var a: integer);
begin
  a := a + 5;
end; 
```

`var`表示参数变量应该通过引用传递；也就是说，只有指向参数变量的指针应该传递给过程/函数。

因此，现在你可以做

```
a := 10;
Add(a);
ShowMessage(IntToStr(a)); // You get 15 
```

现在你甚至*不能*做`Add(10)`，因为`10`它根本不是一个变量！

比较，

```
function Add(a: integer): integer;
begin
  a := a + 5;
  result := a;
end; 
```

不会影响`a`。所以，

```
a := 10;
ShowMessage(IntToStr(Add(a))); // You get 15
ShowMessage(IntToStr(a)); // You get 10 
```

现在，考虑这个可怕的功能：

```
function Add(var a: integer): integer;
begin
  a := a + 5;
  result := a;
end; 
```

这也将返回它的参数 + 5，但它也会影响它的参数（非常意外！！），并且除了变量作为参数之外你不能传递任何东西（所以`Add(10)`不会工作！！）！

```
a := 10;
ShowMessage(IntToStr(Add(a))); // You get 15
ShowMessage(IntToStr(a)); // You get 15 (!!!) 
```

那么，什么是`const`？好吧，`const`粗略的意思是“尽可能通过引用传递（以加快速度；例如，您不需要复制大记录），但永远不要接受对参数的任何更改”。因此，一个`const`参数有效地作为普通参数工作，除了你不能改变它：

```
function Add(const a: integer): integer;
begin
  result := a + 5;
end; 
```

工作时

```
function Add(const a: integer): integer;
begin
  a := a + 5;
  result := a;
end; 
```

甚至不编译！但你仍然可以做到`Add(10)`。

# 相关案例

从这个讨论中，应该清楚你不应该替换`const`为`var`. 确实，

1.  如果您从 更改`const`为`var`，您的函数将不再接受文字 ( `10`) 或表达式 (`Tag + 30`或`SomeFunc(a, b)`) 的参数。**这是一个主要的表演停止者！**
2.  函数的未来实现可能会更改参数，这会意外更改作为参数传递的变量。

**第一点的例子。**使用`const`或普通参数：

```
function Complex(a, b: real): TComplex;
begin
  result.r := a;
  result.c := b;
end;

...

var
  c, d: TComplex;
begin    
  d := -c;                        // Works!
  d := -Complex(10, 20);          // Works! 
```

但是使用`var`：

```
var
  c, d: TComplex;
begin    
  d := -c;                        // Works!
  d := -Complex(10, 20);          // [DCC Error] Unit5.pas(262):
                                  // E2015 Operator not applicable to this
                                  // operand type 
```

这也不起作用（使用`var`）：

```
var
  a, b, c: TComplex;
begin

  a := -(b + c); 
```

确实，现在的参数`Negative`不是变量，而是表达式`b + c`。所以你输得很惨！

**第二点的例子。**假设你有一个糟糕的一天，你把 to 的实现搞砸`Negative`了

```
class operator TComplex.Negative(var C: TComplex): TComplex;
begin
  C.r := -C.r;
  C.c := -C.c;
  result := C;
end; 
```

然后是以下代码，

```
var
  c, d: TComplex;
begin

  c := Complex(10, 20);
  d := -c;

  ShowMessage(FloatToStr(c.r));
  ShowMessage(FloatToStr(d.r)); 
```

曾经导致消息`10`,`-10`会突然改变并产生`-10`, `-10`，这是非常出乎意料的！

# 结论

因此，在您的情况下，解决方案只是`const`完全删除（而不是用`var`！替换它）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-01T01:52:54.810

不要在运算符重载中用 var 替换 const。时期。

即使您承诺永远不会修改函数体内的 var 参数（一开始是一个可疑的基础），只是 var 参数的存在会破坏运算符函数的一个非常重要的方面：表达式的组合。运算符函数中的 var 参数使得无法将该运算符与复合表达式中的其他运算符组合在一起，因为函数结果无法传递给 var 参数。

示例：`(A + B) * C`。

如果 A、B 和 C 都是 TComplex 类型，则编译为`TComplex.Multiply(TComplex.Add(A, B), C)`. 如果 TComplex.Multiply 使用 var params 声明，则 Add 的函数结果不能传递给 Multiply（因为函数结果是中间值，而不是位于特定内存地址的变量），这意味着像 ( A + B) * C 不会编译。

因此，如果您希望您的运算符可用于复合表达式，请不要在您的运算符函数中使用 var 参数。

# security - 图形密码如何存储在计算机系统中？

> ID：15145616
> 
> 赞同：1
> 
> 时间：2013-02-28T21:04:46.803
> 
> 标签：security, passwords, computer-science

图形密码如何存储在计算机系统中？计算机如何知道用户输入的密码正确与否？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:44:36.300

我用谷歌搜索并找到[了这个](http://blogs.msdn.com/b/b8/archive/2011/12/16/signing-in-with-a-picture-password.aspx)。读一读，它似乎回答了您可能遇到的一些问题（图像是如何分解的，诸如此类）。从那里，推断它的存储方式应该更简单。

作为说明，澄清一下，这是一个基于手势的登录，类似于 Apple 在某些 iPhone 锁屏上使用的（但带有图像覆盖）。

# nsis - 如何在按钮单击事件后关闭自定义窗口 - nsis

> ID：15145618
> 
> 赞同：0
> 
> 时间：2013-02-28T21:04:53.497
> 
> 标签：nsis

我有以下代码：

```
Function fnc_custom_page
GetDlgItem $0 $HWNDPARENT 2 ; Find cancel button
System::Call *(i,i,i,i)i.r1
System::Call 'USER32::GetWindowRect(ir0,ir1)'
System::Call *$1(i.r2,i.r3,i.r4,i.r5)
IntOp $5 $5 - $3 ;height
IntOp $4 $4 - $2 ;width
IntOp $4 $4 + 50
System::Call 'USER32::ScreenToClient(i$HWNDPARENT,ir1)'
System::Call *$1(i.r2,i.r3)
System::Free $1
IntOp $2 $2 - $4 ;x
IntOp $2 $2 - 8  ;x+padding
System::Call 'USER32::CreateWindowEx(i0,t "Button",t "Open tch",i${WS_CHILD}|${WS_VISIBLE}|${WS_TABSTOP},ir2,ir3,ir4,ir5,i $HWNDPARENT,i 0x666,i0,i0)i.r0'
SendMessage $HWNDPARENT ${WM_GETFONT} 0 0 $1
SendMessage $0 ${WM_SETFONT} $1 1
GetFunctionAddress $R0 fnc_tch
ButtonEvent::AddEventHandler 0x666 $R0

nsDialogs::Show
FunctionEnd

Function fnc_tch
Exec "$INSTDIT\tch.exe" 
Abort
FunctionEnd 
```

我只有一页，我不想显示任何其他内容。如果我点击打开 tch，tch.exe 应该运行并且安装程序应该退出；但我无法让安装程序退出。请输入任何内容。

上述代码的来源：[NSIS：如何在左下角添加自定义按钮并处理它的点击？](https://stackoverflow.com/questions/11443620/nsis-how-to-add-custom-button-to-left-bottom-corner-and-handle-its-click)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:54:59.063

大多数时候你可以使用`Quit`，但插件相关的回调函数不处理它（退出标志不是插件 API 的一部分）。

另一种方法是模拟单击关闭按钮：

```
!include WinMessages.nsh
SendMessage $HwndParent ${WM_CLOSE} 0 0 
```

# vb.net - 如何将空白记录/行添加到winform gridview？

> ID：15145619
> 
> 赞同：0
> 
> 时间：2013-02-28T21:04:54.690
> 
> 标签：vb.net, winforms, gridview

这看起来很简单，但并不像我想象的那么简单。我在 gridview 上启用了添加/删除属性。我使用了 grid.rows.add() 但未能添加空白记录。我的 gridview 有一个数据源，它是一个对象列表。如何在末尾插入新行，以便用户可以键入新条目的值，以便稍后通过单击按钮将其插入数据库？

```
grid.datasource = list of objects
grid.rows.add() or grid.rows.add(grid.rows.count + 1) (neither works) 
```

我在这里错过了什么吗？空白记录用于插入数据库的数据，因此该行也需要与其他行的对象结构相匹配。

一个 | 乙 | c | | <---用户输入每个字段数据的新行；a,b,c

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:32:12.460

只需在您的列表中添加一个新元素。假设你有一个名为

```
Public Class Person
    Public Name as String
    Public Profession As String
End Class 
```

和一个列表（人员）

```
Dim people = new List(Of Person)()
people.Add(new Person With {.Name = "Jon", .Profession="Administrative"})    
people.Add(new Person With {.Name = "Steve", .Profession="Programmer"}) 
```

这个列表是你的数据网格的数据源

```
dgv.DataSource = people 
```

您只需添加一个新元素即可`people`在网格中显示新行

```
people.Add(new Person With {.Name = "Mary", .Profession="Boss"}) 
```

# c# - 使用 C# DataGridView 自定义选择

> ID：15145623
> 
> 赞同：2
> 
> 时间：2013-02-28T21:05:24.393
> 
> 标签：c#

我有一个带有单个文本字符的 DataGridView .. 基本上像字符映射，但希望能够从左到右选择单元格组，就好像它是文本一样。

即，如果我垂直选择 2 个单元格，则默认行为是只选择这 2 个单元格。但是，我希望它选择顶行右侧和第二行左侧的所有单元格。就像您要突出显示此问题文本中的两个垂直字符一样。

是否可以？（我是否设法以一种有意义的方式解释它？！）

谢谢！

编辑：添加了几张图片来帮助更好地解释这一点。

首先，如果我选择“P”并向下拖动到“d”，这就是选择的内容： ![默认 DataGridView 行为](../Images/05274d9198315fae3cd71de6127cdf84.png)

在这种情况下，我想发生的是： ![在此处输入图像描述](../Images/5b47023d7a2a1cd44ee5fa801230977c.png)

希望这能让它更清楚，谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:28:58.513

这个有效，看看

```
private void Form1_Load(object sender, EventArgs e)
    {
        dataGridView1.DataSource = li;
        dataGridView1.SelectionMode = DataGridViewSelectionMode.CellSelect;
        dataGridView1.SelectionChanged += dataGridView1_SelectionChanged;
    }

    private void dataGridView1_SelectionChanged(object sender, EventArgs e)
    {
        var la = dataGridView1.SelectedCells;
        if (la.Count == 2)
        {
            var rowFirst = ((DataGridViewCell)la[0]).RowIndex;
            var columnFirst = ((DataGridViewCell)la[0]).ColumnIndex;

            var rowSecond = ((DataGridViewCell)la[1]).RowIndex;
            var columnSecond = ((DataGridViewCell)la[1]).ColumnIndex;

            for (int column = 0; column <= columnFirst; column++)
            {
                dataGridView1[column, rowFirst].Selected = true;
            }

            for (int column = columnSecond; column < dataGridView1.ColumnCount; column++)
            {
                dataGridView1[column, rowSecond].Selected = true;
            }
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:13:30.420

用更通用的解决方案扩展了 simple-thomas 的答案，我想出了这个。它不能很好地处理缩小的选择，但对于我的目的来说已经足够了。谢谢简单的托马斯！

```
 private void characterGrid_SelectionChanged( object sender, EventArgs e )
    {
        if ( SelectionChanging == true )
        {
            return;
        }

        SelectionChanging = true;

        var la = characterGrid.SelectedCells;
        if ( la.Count > 1 )
        {
            var sorted = new List<DataGridViewCell>();
            System.Collections.IEnumerator enumerator = la.GetEnumerator();
            while ( enumerator.MoveNext() )
            {
                sorted.Add( (DataGridViewCell)enumerator.Current );
            }
            sorted.Sort( delegate( DataGridViewCell t1, DataGridViewCell t2 )
            {
                if ( t1.RowIndex != t2.RowIndex )
                {
                    return t1.RowIndex.CompareTo( t2.RowIndex );
                }
                else
                {
                    return t1.ColumnIndex.CompareTo( t2.ColumnIndex );
                }
            });

            var rowFirst = ( (DataGridViewCell)sorted[ 0 ] ).RowIndex;
            var columnFirst = ( (DataGridViewCell)sorted[ 0 ] ).ColumnIndex;

            var rowLast = ( (DataGridViewCell)sorted[ sorted.Count - 1 ] ).RowIndex;
            var columnLast = ( (DataGridViewCell)sorted[ sorted.Count - 1 ] ).ColumnIndex;

            if ( rowLast > rowFirst )
            {
                // select first row
                for ( int column = columnFirst; column < characterGrid.ColumnCount; column++ )
                {
                    characterGrid[ column, rowFirst ].Selected = true;
                }

                // in between
                for ( int row = rowFirst + 1; row < rowLast; row++ )
                {
                    for ( int column = 0; column < characterGrid.ColumnCount; column++ )
                    {
                        characterGrid[ column, row ].Selected = true;
                    }
                }

                // last row
                for ( int column = 0; column <= columnLast; column++ )
                {
                    characterGrid[ column, rowLast ].Selected = true;
                }
            }
        }

        SelectionChanging = false;
    } 
```

# ember.js - 动态插入视图

> ID：15145636
> 
> 赞同：0
> 
> 时间：2013-02-28T21:06:16.177
> 
> 标签：ember.js

我很可能以错误的方式处理这个问题，所以如果是这种情况，请提出替代方案。

假设我有一个用于显示许多事件的集合视图

```
App.EventsView = Ember.CollectionView.extend({
  contentBinding: "controller.content",
  itemViewClass: Ember.View.extend({
    templateName: "event"
  })
}) 
```

视图模板：

```
<div class="event">{{ view.content.name }}</div> 
```

并将其加载到应用程序中

```
{{#if content.isLoaded}}
  {{ view "ScheduleApp.EventsView" }}
{{else}}
  Loading...
{{/if}} 
```

现在这非常适合显示事件列表，但我想根据它们的属性将这些事件插入到 dom 的部分中。基本上我想在这些视图上调用 appendTo ，但它们是由我想保留的 ember 魔法隐式生成的。这是可能的，还是我必须明确定义这些视图，如果是这样，我将如何做到这一点以使所有内容与 EventsController 内容保持同步？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T06:47:34.973

假设你有一个事件列表，每个事件都有一个类型属性，类型是研讨会、音乐会和体育

App.EventsController 的内容包含所有事件

```
App.EventsController = Ember.ArrayController.extend({
  seminars: function(){
    return this.get("content").filterProperty("type", "seminar");
  }.property("content.@each.type")
  concerts: function(){
    return this.get("content").filterProperty("type", "concerts");
  }.property("content.@each.type"),
  sports: function(){
    return this.get("content").filterProperty("type", "sports");
  }.property("content.@each.type")
})

App.BaseEventView = Ember.CollectionView.extend({
  itemViewClass: Ember.View.extend({
    templateName: 'event'
  })
})

App.SeminarsView = Ember.BaseEventView.extend({
  contentBinding: 'controller.seminars'
})

App.ConcertsView = Ember.BaseEventView.extend({
  contentBinding: 'controller.concerts'
})

App.SportsView = Ember.BaseEventView.extend({
  contentBinding: 'controller.sports'
})

App.EventsView = Ember.View.extend({templateName: 'events'});

<script type="text/x-handlebars" data-template-name="events">
  {{#if content.isLoaded}} 
    {{view App.SeminarsView}}
    {{view App.ConcertsView}}
    {{view App.SportsView}}
  {{else}}
    Loading...
  {{/if}}
</script> 
```

**借助计算属性**，现在一切都与控制器的内容同步

 *** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-01T01:51:34.843

您可以以编程方式设置每个元素应使用哪个视图。这将允许您根据其属性更改 dom。

查看API 部分中的[子视图的程序创建。](http://emberjs.com/api/classes/Ember.CollectionView.html)

希望有帮助。

* * *

如果您试图将它们放入页面的不同部分，而不是仅仅列出它们，那么我可能会建议您查看`control`帮助程序。

如果是这种情况，您能否提供更多关于在 DOM 中可能使用这些的示例的信息？由不同的控制器一起处理它们会更好吗？**

# html - 钛移动多选

> ID：15145637
> 
> 赞同：0
> 
> 时间：2013-02-28T21:06:26.423
> 
> 标签：html, forms, titanium-mobile

我在任何地方都找不到实现简单多选弹出窗口的库或模块。我想要与触摸网页上的选项/选择对话框后出现的完全一样的东西。

有没有办法让网页的选项/选择在没有页面的情况下弹出。也许可以创建一个隐藏页面，并自动选择选项对话框，触发它弹出。

是否有可能做到这一点？它在 iOS 上会是什么样子？我只有安卓可以测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T09:13:20.647

至少有两种方法可以实现这一点。不需要特殊模块：

*   首先，您可以使用[Ti.UI.Picker](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.Picker)，它对一小组选择很有用。这看起来像一个日期选择器，在 iOS 和 Android 上非常相似。[您可以在文档](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.Picker)中找到示例。**更新**：似乎不可能在钛中使用复选标记，尽管这在本机 iOS 上受支持。

*   或者，您可以在模态或弹出框（仅限 ios）窗口或单独的视图（更适合 android）中使用[表格视图（列表）。](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.TableView)这对于大量选择很有用，因为您可以提供搜索栏。选择将通过`hasCheckmark: true`在[table view row](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.UI.TableViewRow)上设置来触发。（为了更好的用户界面，在表格视图上使用 updateRow 方法并使用动画）

    这是第二个解决方案实施的一部分

    ```
    var self = Ti.UI.createWindow(...);

    var options = [/*array with all options*/ {title: 'Option 1', value: 1}, {title: 'Option 2', value: 2}];
    var selectedOptions = [0]; // array to store selected options, also pass preselected options

    var tableView = Ti.UI.createTableView({...});
    // add rows
    var i = 0, rows = [];
    options.forEach(function(option) {
      var row = Ti.UI.createTableViewRow({hasCheck: selectedOptions.indexOf(i)!==-1, title: option.title });
      rows.push(row);
    });
    tableView.setData(rows);

    tableView.addEventListener('click', function(e) {
      var state = e.rowData.hasCheck;
      // reuse existing row (using its configuration, not its instance)
      var row = Ti.UI.createTableViewRow(e.rowData);
      row.hasCheck = !e.rowData.hasCheck;
      // or create a really new one
      var row = Ti.UI.createTableViewRow({
        //config here,
        hasCheck: !e.rowData.hasCheck,
      );
      tableView.updateRow(e.index, row, {animated: true});
      if (state) {
        selectedOptions.push(e.index
      } else {
        selectedOptions.splice(selectedOptions.indexOf(e.index),1);
    });

    self.open({modal: true}); 
    ```

在这两种情况下都可以进行多项选择。您应该在这两种情况下都提供一个 DONE 按钮来完成工作。

# c# - 为什么这个查询没有返回结果？

> ID：15145638
> 
> 赞同：0
> 
> 时间：2013-02-28T21:06:27.983
> 
> 标签：c#, ms-access

我有一个名为 的 Access 表`Table1`，其中有一个名为 的字段`FieldA`。`FieldA`有一个文本数据类型。

`FieldA`确实包含值 010005。

当我运行查询时，它找不到匹配项。如果我在 Access 中运行查询，它会找到值。

```
OleDbConnection conn = null;
OleDbDataReader reader = null;

conn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0; Data Source=\\\\server\\folder\\mydatabase.accdb");
conn.Open();

OleDbCommand cmd = new OleDbCommand("Select * FROM Table1 WHERE FieldA = @p1", conn);
cmd.Parameters.Add("@p1", OleDbType.VarChar);
cmd.Parameters["@p1"].Value = "010005";
reader = cmd.ExecuteReader();

dataGridView1.DataSource = reader; 
```

我在这里想念什么？

谢谢！

编辑：这行得通，这就是我最终使用的：

```
OleDbConnection conn = null;
conn = new OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0; Data Source=\\\\server\\folder\\mydatabase.accdb");
conn.Open();

string theValue = "010005";
string sql = string.Format("SELECT * FROM Table 1 where FieldA = '{0}'", theValue);

OleDbDataAdapter ada = new OleDbDataAdapter(sql, conn);

ada.Fill(dataTable1);

dataGridView1.DataSource = dataTable1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T21:08:36.060

您正在为参数分配一个数字，因此该值将转换为 string `"10005"`，而不是`"010005"`。

将其作为字符串分配给参数：

```
cmd.Parameters["@p1"].Value = "010005"; 
```

此外，您需要删除参数周围的撇号，否则它不会将其识别为参数并`"@p1"`改为查找字符串：

```
OleDbCommand cmd = new OleDbCommand("Select * FROM Table1 WHERE FieldA = @p1", conn); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:49:23.810

我相信您[`Prepare()`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.prepare%28v=vs.71%29.aspx)在第一次将参数添加到命令之后并在执行它之前需要该命令：

```
OleDbCommand command    = new OleDbCommand(null, rConn);

// Create and prepare an SQL statement.
command.CommandText = "insert into Region (RegionID, RegionDescription) values (@id, @desc)" ;
command.Parameters.Add ( "@id", id) ;
command.Parameters.Add ( "@desc", desc) ;
command.Prepare() ;  // Calling Prepare after having set the Commandtext and parameters.
command.ExecuteNonQuery();

// Change parameter values and call ExecuteNonQuery.
command.Parameters[0].Value = 21;
command.Parameters[1].Value = "mySecondRegion";
command.ExecuteNonQuery(); 
```

一旦正确[`Prepared()`](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.prepare%28v=vs.71%29.aspx)，您就不需要再这样做了（除非您正确更改参数（而不仅仅是它们的值）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:27:42.613

可能是因为您尝试将命名参数与 OleDb 一起使用，我不认为它受支持。

有关如何执行此操作的详细信息：http: [//msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.parameters.aspx](http://msdn.microsoft.com/en-us/library/system.data.oledb.oledbcommand.parameters.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T21:08:55.553

您正在寻找，`@p1`因为您引用了它

改用这个：

```
OleDbCommand cmd = new OleDbCommand("Select * FROM Table1 WHERE FieldA = @p1", conn); 
```

# jstl - JSTL：TLD 中函数签名的语法无效

> ID：15145640
> 
> 赞同：0
> 
> 时间：2013-02-28T21:06:30.773
> 
> 标签：jstl

我正在尝试在 myTld.tld 文件中定义一个函数，例如

```
<?xml version="1.0" encoding="UTF-8"?>
<taglib version="2.1" xmlns="http://java.sun.com/xml/ns/javaee"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/javaee
http://java.sun.com/xml/ns/javaee/web-jsptaglibrary_2_1.xsd">

<tlib-version>1.0</tlib-version>
<short-name>customFunctions</short-name>
<uri>/WEB-INF/tags/myTld.tld</uri>

<function>
   <description>
       my Desc
   </description>
   <name>isActive</name>
   <function-class>com.Functions</function-class>
   <function-signature>boolean isActive()</function-signature>
 </function>
</taglib> 
```

从 El 脚本我打电话给喜欢

```
<%@ taglib prefix="customFunctions" uri="/WEB-INF/tags/myTld.tld"%>
${customFunctions:isActive()} 
```

每次我这样做，我都会得到

```
Invalid syntax for function signature in TLD.  Tag Library: customFunctions, Function: isActive 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:15:42.280

改变

```
<function-signature>boolean isActive()</function-signature> 
```

至

```
<function-signature>java.lang.Boolean isActive()</function-signature> 
```

也改为`<description>my Desc</description>`一行。这也可能是（可能不是）问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T22:46:27.950

There seems to be no issue with respect to function-signature. Description can be broken to multiple line as long as they are closed in the proper tag structure. Even the return type can be given as primitive.

But thanks for your support. I just tried after few hour the same thing and it ran successfully. Not sure why Tomcat gave me strange error(Even after multiple compilation and redeployment). Though i feel the Tomcat should be little more smart enough to tell the exact error when it says signature is wrong.The tomcat log also did not gave me any other information.

# java - 有人可以告诉我为什么这个 if 语句总是给我错误的吗？

> ID：15145647
> 
> 赞同：3
> 
> 时间：2013-02-28T21:06:54.990
> 
> 标签：java, android, string, if-statement, equals

如果我说“嗨”这个词，我试图这样做如果声明给我真实，但它总是给我虚假！有人可以告诉我为什么吗？！这是我的代码：

```
 protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    if (requestCode ==check && resultCode == RESULT_OK){
        ArrayList<String> results    =data.getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);
        lv.setAdapter(new ArrayAdapter <String>(this   ,android.R.layout.simple_list_item_1,results));
        TextView display=(TextView)findViewById (R.id.TOF);

        String what_you_say = lv.getContext().toString();
        if (what_you_say.contentEquals("hi") == true)

            display.setText("True");

        else

            display.setText("false");       
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:09:49.857

`what_you_say.equals("hi")`应该管用。此外，最好不要在您检查的东西上假设大小写（除非您想要特定情况）。所以你应该做`what_you_say.equalsIgnoreCase("hi")`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:11:23.310

替换这一行：

```
 if (what_you_say.contentEquals("hi") == true) 
```

使用另一行：

```
 if (what_you_say != null && what_you_say.trim().equalsIgnoreCase("hi")) 
```

在这种情况下，您对简单的字符串相等感兴趣，但采取一些额外的预防措施是个好主意：考虑到字符串为空的情况，删除开头和结尾的多余空格并忽略大小写通常会有所帮助。要查看内容平等的区别，请参阅这篇[文章](https://stackoverflow.com/a/6476612/201359)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:12:32.587

您应该按如下方式更改您的 if 语句：

`if ("hi".equals(what_you_say))`

或者

`if ("hi".equalsIgnoreCase(what_you_say))`

取决于您是否需要检查区分大小写。

您应该始终以这种方式进行字符串比较，因为它将是空值安全的。

采取以下代码片段：

`if ("hi".equals(what_you_say)) // what_you_say is null will evaluate to false`

`if (what_you_say.equals("hi")) // what_you_say is null will cause NullPointerException`

最好 if 语句将评估为 false 而不是导致`NullPointerException`.

# c# - SortedDictionary<> 或 (Dictionary<> 手动排序)

> ID：15145651
> 
> 赞同：0
> 
> 时间：2013-02-28T21:07:08.303
> 
> 标签：c#, optimization, dictionary, sorteddictionary

当我使用`SortedDictionary<>`而不是`Dictionary<>`考虑到我需要一个排序的字典时是否会影响性能，所以如果我使用字典，我将不得不手动对其进行排序。哪个会更快？ `SortedDictionary<>`或 ( `Dictionary<>`+ 手动排序)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T21:14:11.443

插入 a`SortedDictionary`是 O(log(n))，所以插入 n 项是 O(n log(n))。相反，插入 a`Dictionary`是 O(1)，因此插入 n 个项目是 O(n)，但您需要在使用前对项目进行排序，即 O(n log(n))。基于此，没有太大区别，但`Dictionary`有散列的开销，而 SortedDictionary 可能具有更差的内存局部性，因为它可能是作为链接结构实现的。

SortedDictionary 还限制了您可以使用的键类型，因为它需要按键排序，而 Dictionary 则没有，因为它使用散列。

确实，哪个更好取决于您的访问模式，因此最好的办法是针对您的用例衡量两者的性能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:11:12.130

性能受到影响。阅读[http://msdn.microsoft.com/en-us/library/f7fta44c.aspx上的备注](http://msdn.microsoft.com/en-us/library/f7fta44c.aspx)

基本上，`SortedDictionary<T>`是二叉搜索树，`Dictionary<T>`而是哈希表。

对于插入、删除和随机查找，`Dictionary<T>`会更快。`SortedDictionary`如果您按顺序进行不频繁的修改和频繁的列表，将会更快。`Dictionary`如果您进行频繁的修改和随机查找，则速度会更快，并且很少需要排序然后输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T21:13:33.393

这真的取决于你如何使用字典。

*   您使用的是很多物品还是不是很多物品。
*   与需要排序的时间相比，您添加新项目的频率。
*   你做更多的查找或插入

最好的办法是使用这两种方法对真实数据进行一些性能测试，看看哪种方法更适合您的情况。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T21:20:34.063

这取决于您是将数据添加到字典中而不是获取排序结果，还是一次性完成。

如果您在较长时间内添加数据，每次使用 a 的添加都会对性能造成小幅影响`SortedDictionary<>`，但是当您最终想要排序结果时，您会立即得到它。例如，如果您等待用户输入添加项目，这是理想的，因为小的性能影响并不明显。

If you create a dictionary, add data to it, and get the sorted result right away, a `Dictionary<T>` would be faster because it uses a faster sorting algorithm (as it can sort it all at once instead of maintaining a sorted result while items are added).

# wcf - Windows 8 应用程序能否监听事件/外部 Web 服务调用 - Web 挂钩

> ID：15145654
> 
> 赞同：2
> 
> 时间：2013-02-28T21:07:21.197
> 
> 标签：wcf, events, notifications

我正在寻找构建一个 Windows 8 RT 应用程序，该应用程序需要由在 Windows 8 应用程序之外发生的事件激活。

我已经看到了这个 MGIHT 能够实现的许多潜在方法，但似乎没有涵盖所有“事件”:-)

我要处理的场景如下

Windows 8 Surface 应用程序处于“聆听”模式。网络上的 PC 执行操作。该操作可能会导致 Web 服务调用。Windows 8 应用程序侦听呼叫，然后打开一个屏幕。

std 方法似乎是推荐使用 Windows 通知服务，但这似乎过度杀戮，并且可能无法从内部网络访问外部 WNS。

我看过关于本地通知的博客，应用程序在其中监听（在这种情况下，应用程序将以全屏模式监听）并做出反应。

我还看到了有关在应用程序上创建本地 Windows 服务的博客。

这似乎表明 Windows 服务可以公开一个端点，当调用该端点时可能会向应用程序引发一些事件以使其响应，例如打开/关闭表单等。

这是一种常见的模式，还是有更好的方法来做到这一点？

我很想听听其他人用来解决这个问题的方法是什么？

我真的很想避免应用程序必须每隔一两秒轮询一次。

另一个最后的手段是使用 fileMonitor 类型的 actvity 并让服务写入文件或让外部 PC 将文件写入共享目录？

乙...

# java - 计数字符

> ID：15145657
> 
> 赞同：0
> 
> 时间：2013-02-28T21:07:32.583
> 
> 标签：java, while-loop, character, switch-statement, counting

只要用户没有结束“退出”，我在编写代码以进行 while 循环询问用户输入时遇到问题。当我运行代码时，它只会生成第一个提示问题“输入句子或短语：”，然后在输入短语后它不会计算 while 语句。有谁知道我做错了什么？

问题是：“让程序让用户继续输入短语而不是每次都重新启动它会很好。为此，我们需要围绕当前代码的另一个循环。也就是说，当前循环将嵌套在里面新循环。添加一个外部while循环，只要用户不输入短语quit，它将继续执行。修改提示以告诉用户输入短语或退出退出。注意所有初始化counts 应该在 while 循环内（也就是说，我们希望对用户输入的每个新短语重新开始计数）。您需要做的就是添加 while 语句（并考虑读取的位置，以便循环正常工作). 确保在添加代码后通过程序并正确缩进 - 对于嵌套循环，内部循环应该缩进。“

```
 import java.util.Scanner;
    public class Count

    {
         public static void main (String[] args)
         {

              String phrase;    // A string of characters
              int countBlank;   // the number of blanks (spaces) in the phrase 
              int length;       // the length of the phrase
              char ch;      // an individual character in the string      

    int countA, countE, countS, countT; // variables for counting the number of each letter

    scan = new Scanner(System.in);

    // Print a program header
    System.out.println ();
    System.out.println ("Character Counter");
    System.out.println ("(to quit the program, enter 'quit' when prompted for a phrase)");
    System.out.println ();

    // Creates a while loop to continue to run the program until the user
    // terminates it by entering 'quit' into the string prompt.

        System.out.print ("Enter a sentence or phrase: ");
        phrase = scan.nextLine();

        while (phrase != "quit");
        {   
            length = phrase.length();

                // Initialize counts
                countBlank = 0;
                countA = 0;
                countE = 0;
                countS = 0;
                countT = 0;

                // a for loop to go through the string character by character
                // and count the blank spaces

                for (int i = 0; i < length ; i++)
                {
                    ch = phrase.charAt(i);

                    switch (ch)
                    {
                        case 'a':             // Puts 'a' in for variable ch
                        case 'A':  countA++;  // Puts 'A' in for variable ch and increments countA by 1 each time
                                    break;    // one of the variables exists in the phrase

                        case 'e':             // puts 'e' in for variable ch
                        case 'E':  countE++;  // ... etc.
                                    break;
                        case 's':
                        case 'S':  countS++;
                                    break;
                        case 't':
                        case 'T':  countT++;
                                    break;

                        case ' ':  countBlank++;
                                    break;
                    }

                }

            // Print the results
            System.out.println ();
            System.out.println ("Number of blank spaces: " + countBlank);
            System.out.println ();
            System.out.println ("Number of a's: " + countA);
            System.out.println ("Number of e's: " + countE);
            System.out.println ("Number of s's: " + countS);
            System.out.println ("Number of t's: " + countT);
            System.out.println ();

    }   
} 
```

}

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T21:10:01.570

这是两个方面的问题：

```
while (phrase != "quit"); 
```

首先，*不要*使用`==`or`!=`进行字符串相等检查。它只检查*参考身份*。

其次，`;`末尾的 意味着它将永远循环。它相当于：

```
while (phrase != "quit")
{
} 
```

你要：

```
while (!phrase.equals("quit")) 
```

您*还想*在循环结束时要求更多输入。（仍在循环体内，但在输出部分之后。）或者将循环条件更改为永远循环，在开始时要求输入，如果输入为“退出”则中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:09:25.353

您需要在`while`循环内再次收集输入。把这样的东西放在最后：

```
phrase = scan.nextLine(); 
```

`phrase`请注意，您只能在 while 循环开始之前获得一次值。之后，您再也不会将其设置为其他任何内容。执行输出后，您需要为`phrase`（可能等于“退出”）收集另一个值。

编辑：另外，乔恩说了什么。听他的。他……很聪明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:10:40.157

在这里地图会是更好的选择：

```
Map<Character, Integer> counter = new HashMap<Character, Integer>(); 
```

```
for(int i = 0; i < length ; i++)
{
    ch = phrase.charAt(i);
    counter.put(ch, counter.get(ch) + 1); 
```

```
int charACount = counter.get('A'); 
```

# playframework-2.0 - Play Framework：模块中的视图出现问题

> ID：15145658
> 
> 赞同：2
> 
> 时间：2013-02-28T21:07:36.127
> 
> 标签：playframework-2.0

查看我的 Play 应用程序的目录布局：

```
myApp
  └ app
     └ controllers
     └ models
     └ views
         └ myView1.scala.html
         └ main.scala.html
  └ modules
     └ auth
        └ app
           └ controllers
           └ models
           └ views 
               └ myView2.scala.html
               └ main.scala.html 
```

问题是它看起来像`myView2.scala.html`调用`main`in`myApp/views/main.scala.html`而不是`main`in `myApp/modules/auth/views/main.scala.html`... 如果我删除`myApp/modules/auth/views/main.scala.html`，则`myView2.scala.html`不会编译。

`main`也就是说，我如何明确引用两者中的任何一个？任何帮助将不胜感激 - 我快疯了。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T16:52:21.897

我认为最好将模块视图放在一个子包中，例如：

> myApp/modules/auth/views/auth/main.scala.html

# ruby - 正则表达式中的 `?i` 和 `?-i` 是什么意思？

> ID：15145659
> 
> 赞同：73
> 
> 时间：2013-02-28T21:07:36.953
> 
> 标签：ruby, regex

有人可以解释一下`(?i)`用`(?-i)`正则表达式包装一个词是什么意思吗？

```
(?i)test(?-i) 
```

我测试过，它匹配`test`,`TEST`和`teSt`. 但我以前从未见过这种情况。`?`前面是什么`i`意思？我在[这里](https://github.com/dwilkie/carrierwave_direct/blob/master/lib/carrierwave_direct/uploader.rb#L85)看到了这个。

* * *

## 回答 #1

> 赞同：109
> 
> 时间：2013-02-28T21:10:49.317

`(?i)`启动不区分大小写模式

`(?-i)`关闭不区分大小写模式

更多信息请[参见本页的“仅为正则表达式的一部分打开和关闭模式”部分](http://www.regular-expressions.info/modifiers.html)：

> 现代正则表达式风格允许您仅将修饰符应用于正则表达式的一部分。如果在正则表达式的中间插入修饰符 (?ism)，则修饰符仅适用于正则表达式中修饰符右侧的部分。您可以通过在它们前面加上减号来关闭模式。减号后的所有模式都将关闭。例如 (?i-sm) 打开不区分大小写，关闭单行模式和多行模式。
> 
> 并非所有的正则表达式都支持这一点。JavaScript 和 Python 将所有模式修饰符应用于整个正则表达式。它们不支持 (?-ismx) 语法，因为当模式修饰符应用于整个正则表达式时，关闭选项是没有意义的。所有选项默认关闭。
> 
> 您可以快速测试您使用的正则表达式如何处理模式修饰符。正则表达式 (?i)te(?-i)st 应该匹配 test 和 TEst，但不匹配 teST 或 TEST。

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-02-28T21:10:39.580

`(?i)`打开*不区分大小写*模式，`(?-i)`将其关闭。

例如，如果您尝试`(?i)te(?-i)st`了 ，它将匹配**test**、**TEst**、**tEst**，但不**匹配 teST**。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-02-28T21:11:45.027

直接取自 ruby​​ 文档。

> 正则表达式的结束分隔符后面可以跟一个或多个单字母选项，这些选项控制模式如何匹配。
> 
> /pat/i - 忽略大小写
> 
> /pat/m - 将换行符视为匹配的字符。
> 
> /pat/x - 忽略模式中的空格和注释
> 
> /pat/o -> 只执行一次 #{} 插值
> 
> i、m 和 x 也可以使用 (?on-off) 构造应用于子表达式级别，该构造为括号括起来的表达式启用选项打开和禁用选项关闭。

# javascript - kendoUI 模板类型="text/x-kendo-template" 需要吗？

> ID：15145661
> 
> 赞同：13
> 
> 时间：2013-02-28T21:08:00.553
> 
> 标签：javascript, jquery, kendo-ui, templating

更多的是“出于好奇的问题”，在创建 kendoUI 外部（脚本）模板时，他们说要使用以下语法：

```
<script type="text/x-kendo-template" id="templateNameHere">
    <p>html here</p>
    #= whatever #
</script> 
```

我不喜欢这种**类型**的一件事是 html / etc 出现全黑（在 Visual Studio 中）。

我注意到，如果我将其更改为更典型的类型：**type="text/html"**，则 HTML 是丰富多彩的，并且至少能够显示 html 结构错误、缺少逗号/引号等。所有常见的东西.

```
<script type="text/html" id="templateNameHere">
    // now HTML has its usual colors, validation, etc 
```

[使用 type="text/html" 的示例](http://jsfiddle.net/DWC5e/)

剑道模板在以这种格式使用时仍然有效，**有谁知道保持这种方式是否可以？**否则在网上找不到任何文档！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-01T09:37:20.650

这是一个很好的问题。据我所知，将其更改为“text/html”并没有真正的缺点，除了它不再明确标记为 Kendo 模板。这是否是一个问题取决于您是否同时使用任何其他类型的客户端模板引擎。

标签“x-kendo-template”在 Kendo 源代码中的任何地方都没有引用，因此没有明确使用，而且很可能只是在那里，因此浏览器会忽略该部分，因为没有浏览器内置支持解析脚本“x-kendo-type”类型的块。“text/html”也是如此，您只需在 Visual Studio 中获得更多语法高亮显示。如果您觉得一些额外的语法突出显示的好处超过了不再明确标记为 Kendo 模板的块的好处，我会选择它。

# ios - UIViewController 上的 BOOL 属性会自行更改

> ID：15145665
> 
> 赞同：0
> 
> 时间：2013-02-28T21:08:12.367
> 
> 标签：ios, uiviewcontroller, segue

在 viewController AI 上设置了一个 BOOL 属性 WantAsk（非原子，分配），我通过 self.wantsAsk 访问该属性。当我转到另一个视图控制器 (vcB) 时，我将它的 wantAsk 设置为与 vcA 相同。当需要返回 A 时，调用 vcB 的 prepareToSegue 方法，我从 seque (segue.destinationViewController) 中获得指向 vcA 的指针；但它显示 vcA 的值都是错误的。特别是，wantsAsk 应该（并且曾经是）YES 现在是 NO。

我试图在 WantAsk 上设置一个 watchPoint，但它从未被触发。我一直使用这个通用设备，想知道为什么它会在这里失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:48:11.667

如果您要返回视图控制器 A，您很可能会重新实例化它。所以新的 A 视图控制器与原来的 A 视图控制器不同。

相反，只需跳过准备从 B 到 A 的 segue。如果您使用的是导航控制器，让它负责返回到 A。如果 B 是模态的，只需调用`dismissViewController`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:02:11.310

假设您只对您的属性使用 setter 方法（即您不使用 _wantsAsk = 或任何您合成的 var），您可以通过使用符号断点确定它在哪里设置。转到断点窗口并单击符号断点或使用默认的 Xcode 快捷方式按 cmd+opt+\ 从那里添加“setWantsAsk:”（不带引号）。运行程序并检查它停止的地方。

![符号调试](../Images/14bc6f63b490dbdc41132d79442e7ecd.png)

# objective-c - 系统声音通过扬声器非常安静地播放 - C，Objective-C

> ID：15145667
> 
> 赞同：1
> 
> 时间：2013-02-28T21:08:19.607
> 
> 标签：objective-c, c, audio

我在 Objective-C 中使用 AudioServicesPlaySystemSound 来播放我的音效。它们在模拟器和我的 iPad 扬声器上播放的声音非常响亮，但是当我将 iPad 上的音频线插入扬声器时，声音低得离谱，几乎听不见。我尝试了不同的扬声器并获得了相同的效果。通过蓝牙，声音仍然很安静，但至少可以听到。这是我的代码：

```
- (IBAction)playSound:(UIButton *)sender
{
    NSString *path = [NSString stringWithFormat: @"%@/%@", [[NSBundle mainBundle] resourcePath], @"MySoundEffect.caf"];
    NSURL *filePath = [NSURL fileURLWithPath: path isDirectory: NO];
    NSLog(@"filepath = %@", filePath);

    SystemSoundID soundID;
    AudioServicesCreateSystemSoundID((__bridge CFURLRef)filePath, &soundID);

    AudioServicesPlaySystemSound(soundID);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T20:41:09.193

这似乎是仅使用 AudioServicesPlaySystemSound 的问题。我的解决方法是使用 SimpleAudioEngine，它在幕后做了一些工作，我认为即使在通过蓝牙或线路播放时也能保持音频音量和质量不变。

# ios - iOS ViewController SIGABRT

> ID：15145672
> 
> 赞同：0
> 
> 时间：2013-02-28T21:08:29.180
> 
> 标签：ios, uiviewcontroller, ipad, sigabrt

我遇到了一个小时后我无法解决的小问题......我是 iOS 新手，所以可能你会在一秒钟后注意到它；）我正在寻找关于 SO 的类似帖子，但没有找到令人满意的回答...

上面有一个`SplitViewController`（我使用XIB在左侧添加了一个tableView，在右侧添加了一个textView）。当我尝试编译和运行我的项目时，出现以下错误：

> 线程 1：程序接收到信号“SIGABRT”。

我想要一个与 tableView 和 textView 相关的拆分视图。我做错了什么？

拆分视图控制器.h：

```
#import <UIKit/UIKit.h>

@interface SplitViewController : UIViewController
@property (weak, nonatomic) IBOutlet UITableView *tableView;
@property (weak, nonatomic) IBOutlet UITextView *textView;

@end 
```

拆分视图控制器.m：

```
#import "SplitViewController.h"

@implementation SplitViewController
@synthesize tableView;
@synthesize textView;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)didReceiveMemoryWarning
{
    // Releases the view if it doesn't have a superview.
    [super didReceiveMemoryWarning];

    // Release any cached data, images, etc that aren't in use.
}

#pragma mark - View lifecycle

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

- (void)viewDidUnload
{
    [self setTableView:nil];
    [self setTextView:nil];
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    // Return YES for supported orientations
    return YES;
}

@end 
```

TestAppDelegate.h：

```
#import <UIKit/UIKit.h>
@class SplitViewContoller;
@interface TestAppDelegate : UIResponder <UIApplicationDelegate>
@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) UIViewController *viewController;
@end 
```

TestAppDelegate.m：

```
#import "TestAppDelegate.h"
#import "SplitViewController.h"

@implementation TestAppDelegate
@synthesize window = _window;
@synthesize viewController = _viewController;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    // Override point for customization after application launch.
    self.viewController = [[SplitViewController alloc] initWithNibName:@"SplitViewController" bundle:nil];
    self.window.rootViewController = self.viewController;
    [self.window makeKeyAndVisible];
    return YES;
}

- (void)applicationWillResignActive:(UIApplication *)application
{
}
- (void)applicationDidEnterBackground:(UIApplication *)application
{
} 
- (void)applicationWillEnterForeground:(UIApplication *)application
{
}   
- (void)applicationDidBecomeActive:(UIApplication *)application
{
}
- (void)applicationWillTerminate:(UIApplication *)application
{
}

@end 
```

主要是为了准确性：

```
#import <UIKit/UIKit.h>

#import "TestAppDelegate.h"

int main(int argc, char *argv[])
{
    @autoreleasepool {
        return UIApplicationMain(argc, argv, nil, NSStringFromClass([TestAppDelegate class]));
    }
} 
```

# ruby-on-rails - psql --version - 库未加载

> ID：15145673
> 
> 赞同：0
> 
> 时间：2013-02-28T21:08:29.700
> 
> 标签：ruby-on-rails, postgresql

所以我正在运行这个 railscast 来使用我的 rails 应用程序设置 postgres： [http ://railscasts.com/episodes/342-migrating-to-postgresql](http://railscasts.com/episodes/342-migrating-to-postgresql)

brew install 运行良好 - postgres 已成功安装在我的系统上。

现在我在跑步

```
psql --version 
```

检查安装的最新版本。我得到的不是现在应该显示的版本

```
dyld: Library not loaded: @loader_path/../lib/libssl.dylib
  Referenced from: /usr/lib/libpq.5.dylib
  Reason: Incompatible library version: libpq.5.dylib requires version 1.0.0 or later, but libssl.0.9.8.dylib provides version 0.9.8
Trace/BPT trap: 5 
```

用谷歌搜索了那个错误，但找不到帮助，现在我真的被困住了。不知道该怎么做

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:16:10.130

通过运行此修复

```
sudo ln -fs /usr/lib/libssl.1.0.0.dylib /usr/lib/libssl.dylib
sudo ln -fs /usr/lib/libcrypto.1.0.0.dylib /usr/lib/libcrypto.dylib 
```

# asp.net - CryStal Report 对话框出现在第二页

> ID：15145682
> 
> 赞同：0
> 
> 时间：2013-02-28T21:09:26.273
> 
> 标签：asp.net, crystal-reports

当我点击第二页时.. 一个对话框打开并再次询问登录信息

这是我点击第二页 [http://i.imgur.com/8y70goi.png时出现的错误](http://i.imgur.com/8y70goi.png)

这是我的代码

```
public void LoadReport()
{

        crReportDocument = new ReportDocument();

        connectionInfo = new ConnectionInfo();
        ParameterField paramField1 = new ParameterField();

        ParameterFields paramFields = new ParameterFields();
        ParameterDiscreteValue paramDiscreteValue1 = new ParameterDiscreteValue();
        //p1
        paramField1.Name = "id";
        paramDiscreteValue1.Value = Request.QueryString["Id"].ToString();
        paramField1.CurrentValues.Add(paramDiscreteValue1);
        paramFields.Add(paramField1);

        CrystalReportViewer1.ReportSource = crReportDocument;
        crReportDocument.Load(Server.MapPath("~/CrystalReport.rpt"));
        connectionInfo.ServerName = ConfigurationManager.AppSettings["ServerName"];

        connectionInfo.DatabaseName = ConfigurationManager.AppSettings["DataBaseName"];
        connectionInfo.UserID = ConfigurationManager.AppSettings["DataBaseUserID"];
        connectionInfo.Password = ConfigurationManager.AppSettings["DataBasePasswordName"];

        SetDBLogonForReport(connectionInfo);
        CrystalReportViewer1.ParameterFieldInfo = paramFields;
        CrystalReportViewer1.EnableDatabaseLogonPrompt = false;
        CrystalReportViewer1.EnableParameterPrompt = false;
        CrystalReportViewer1.Visible = true;

        DataSet dsTemp = new DataSet();
        DBAccess dbAccess = new DBAccess();
        SqlParameter spId = new SqlParameter("@Id", Request.QueryString["Id"].ToString());
        SqlParameter[] sqlParams = new SqlParameter[] { spId };
        dsTemp = dbAccess.ExecuteDataset("sp_GetInvestigationData", sqlParams);
        crReportDocument.SetDataSource(dsTemp.Tables[0]);

        CrystalReportViewer1.ReportSource = crReportDocument;
        CrystalReportSource1.ReportDocument.SetParameterValue(0, Request.QueryString["Id"].ToString());

}
private void SetDBLogonForReport(ConnectionInfo connectionInfo)
{
    TableLogOnInfos tableLogOnInfos = CrystalReportViewer1.LogOnInfo;
    foreach (TableLogOnInfo tableLogOnInfo in tableLogOnInfos)
    {
        tableLogOnInfo.ConnectionInfo = connectionInfo;

    }

} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T19:54:14.800

确保您在所有地方都有相同版本的水晶报告。查看是否安装了[所需的软件包](http://1800thenerd.wordpress.com/2010/11/24/sap-crystal-reports-for-visual-studio-2010-files-needed-to-download/)试试这个

```
private ConnectionInfo crConnectionInfo = new ConnectionInfo();
        ReportDocument rpt = new ReportDocument();
        protected void Page_Load(object sender, EventArgs e)
        {

            BindReport();
        }

        private void BindReport()
        {

            rpt.Load(Server.MapPath("report1.rpt"));
            DataSet ds = getReportData();
            rpt.SetDataSource(ds.Tables[0]);
            CrystalReportViewer1.ReportSource = rpt;
        }

        private DataSet getReportData()
        {
            DataSet ds = new DataSet();
            string ConnectionString = ConfigurationManager.ConnectionStrings["myconn"].ConnectionString;
            SqlConnection con = new SqlConnection(ConnectionString);
            SqlCommand cmd = new SqlCommand();
            cmd.CommandText = "GetProductList";
            cmd.CommandType = CommandType.StoredProcedure;            
            con.Open();
            cmd.Connection = con;
            SqlDataAdapter sda = new SqlDataAdapter(cmd);
            sda.Fill(ds, "ctable");
            con.Close();
            return ds;
        } 
```

[您可能会在此处](http://www.c-sharpcorner.com/UploadFile/rsubhajit/CrystalReportwithDataSet03012006060655AM/CrystalReportwithDataSet.aspx)看到另一个示例

# c++ - SDL_ttf - 字体目录/字体在哪里？

> ID：15145683
> 
> 赞同：2
> 
> 时间：2013-02-28T21:09:34.910
> 
> 标签：c++, opengl, sdl, truetype, sdl-ttf

我一直在研究 SDL 和 OpenGL（在 C++ 中），并决定在我的游戏中加入一些文本。

我已经学习了一些教程，但我总是得到同样的错误：“找不到 .ttf” 我敢肯定之前有人问过，但是你应该把字体放在哪里，你应该在 TTF_OpenFont 的第一个写什么范围？到目前为止，这是 TTF 部分。

```
if (TTF_Init() != 0)
{
    cerr << "TTF_Init() Failed: " << TTF_GetError() << endl;
    SDL_Quit();
    exit(1);
}

TTF_Font *font;
font = TTF_OpenFont("FreeSans.ttf", 24);
if (font == NULL)
{
    cerr << "TTF_OpenFont() Failed: " << TTF_GetError() << endl; // <-- This the error report
    TTF_Quit();
    SDL_Quit();
    exit(1);
}

SDL_Surface *text;
SDL_Color text_color = {255, 255, 255};
text = TTF_RenderText_Solid(font, "BLAH, BLAH, BLAH!", text_color); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T21:16:22.057

您可以将文件放在您想要的任何位置。但是你必须告诉[TTF_OpenFont()](http://www.libsdl.org/projects/SDL_ttf/docs/SDL_ttf_14.html)它在哪里。

和

```
 TTF_OpenFont("FreeSans.ttf", 24); 
```

您是说 FreeSans.ttf 文件位于程序的[工作目录](http://www.gnu.org/software/libc/manual/html_node/Working-Directory.html)中。

如果你愿意，你可以把文件放在任何地方。例如：

```
 TTF_OpenFont("D:\\My Folder\\FreeSans.ttf", 24); 
```

或者

```
TTF_OpenFont("D:/My Folder/FreeSans.ttf", 24); 
```

# spring - 将 Spring MBean 导出到 Tomcat 的 MBeanServer 实例

> ID：15145684
> 
> 赞同：0
> 
> 时间：2013-02-28T21:09:42.457
> 
> 标签：spring, tomcat, spring-mvc, jmx

我正在使用部署在 tomcat 服务器（我在本地运行）上的 WAR 文件来玩 spring 的 JMX 支持。然而，尽管遵循发布的指南，我无法将我的 MBean 专门部署到 tomcat 的 MBeanServer 实例。

我尝试了一些 MBeanExporter 和 MBeanServerFactoryBean 配置的变体，但似乎没有任何效果。这是我当前的配置：

```
<bean id="mbeanServer" class="org.springframework.jmx.support.MBeanServerFactoryBean">
    <property name="serviceUrl" value="service:jmx:rmi:///jndi/rmi://localhost:6969/jmxrmi"/>
</bean> 

<bean id="exporter" class="org.springframework.jmx.export.MBeanExporter" lazy-init="false">
    <property name="server" ref="mbeanServer"/>
    <property name="beans">
        <map>
            <entry key="domain:name=notifier" value-ref="mBeanNotifier"/>
        </map>
    </property>
</bean>

<bean id="mBeanNotifier" class="com.sei.poc.jmx.mbeans.SimpleMBeanNotifier"/> 
```

我还在 tomcat 的配置中包含了以下参数：

```
-Dcom.sun.management.jmxremote
-Dcom.sun.management.jmxremote.port=6969
-Dcom.sun.management.jmxremote.ssl=false
-Dcom.sun.management.jmxremote.authenticate=false 
```

我可以通过在 JConsole 中输入 localhost:6969 手动连接到 mbeanServer，但我只能找到本机 catalina MBean。当我深入研究这些 MBean 时，我什至找到了对我项目的引用，但不幸的是，我声明的 MBean 无处可寻。

我曾尝试删除 MBeanServerFactoryBean 声明，希望出口商能够自然地获取 tomcat 的 MBeanServer（没有运气）。我也尝试了服务 url 的不同变体，但没有成功。

我应该注意到我能够将 MBean 部署到我的本地 MBeanServer 并使用 JConsole 查看它们就好了。

任何关于问题可能是什么的建议将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T00:16:33.517

当使用ServiceURL 获取MBeanServerConnection 时，返回的对象不是MBeanServer（即不支持registerObject）。

尝试将您的 mbeanServer bean 替换为：

```
<bean id="mbeanServer" class="java.lang.management.ManagementFactory"
    lazy-init="false" factory-method="getPlatformMBeanServer">
</bean> 
```

这将为您提供对平台 MBeanServer 的直接引用，这是您的 JConsole 连接的平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T20:41:53.207

我能够解决我的问题。我将此测试编写为 Spring MVC 应用程序，因此有几个级别的上下文，分为不同的上下文文件。

问题只是保存 MBeanExporter 和 MBean 声明的上下文文件在我实际访问 localhost:/ 之前没有被初始化，这促使 servlet 开始加载其上下文文件。

与我的浏览器连接后，MBean 出现在 JConsole 中。

# asp.net-mvc - 适用于多个项目的 Visual Studio 解决方案“设计”

> ID：15145686
> 
> 赞同：0
> 
> 时间：2013-02-28T21:09:53.397
> 
> 标签：asp.net-mvc, visual-studio-2010

我目前正在 jQuery Mobile 中构建一个 MVC 4 移动站点，以补充常规桌面版本（内置于 MVC 3）。

我在移动网站的解决方案中添加了一个项目（所以我有两个项目）。

因为我可以重复使用大多数模型，所以我只是通过将这些模型包含在我的新移动项目中来从原始项目中获取它们。

我对 .NET MVC 非常陌生，因此我需要您对多个项目的最佳实践以及部署时可能遇到的问题的指导。

我计划在子域（例如mobile.domain.com）下或作为domain.com/mobile 部署这个移动站点。

1.  移动项目部署后是否仍能访问模型？

2.  您是否以某种方式部署了整个解决方案？在这种情况下，您如何决定移动项目应该驻留在特定的子域或文件夹中？

3.  仅引用原始项目中的模型/类是一个聪明的主意，还是会以某种方式使其不那么灵活？我猜另一种方法是将模型复制到移动项目的“模型”文件夹中？

4.  你会怎么做？

最好的问候米凯尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:18:08.067

1.  是的，但您也可以获得整个桌面组装代码。
2.  这是语义，你可以有它任何一种方式。什么对消费者来说更容易？也许有它自己的子域，所以 m.yoursite.com。
3.  您可以将通用模型分解为两个站点都引用的自己的项目。这将允许您进行会影响两者的更改，并且您可以独立发布它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:20:20.447

一个 Web 项目不应该引用另一个。可以将模型移动到两个 Web 项目都引用的另一个库。您不需要复制代码。

我假设您需要一个单独的项目，因为您不想重用您的操作。没有法律规定您不能根据用户使用您网站的方式返回不同的视图。只需将不同的路径传递给该`View()`方法。这样您就不会复制所有控制器逻辑、身份验证逻辑等。

# c++ - 为什么返回时指针地址会改变？

> ID：15145688
> 
> 赞同：0
> 
> 时间：2013-02-28T21:10:08.327
> 
> 标签：c++, pointers

我正在做作业，我遇到了一个奇怪的问题，希望有人能帮我解决。我的代码中间有一个函数：

```
Token scheme::addScheme(vector <Token> toAdd)
{

//Check if scheme is valid
Token answer = isSchemeValid(toAdd);
if (answer.retType() != "ok")
{
    return answer;
}

identifierList * arrow = new identifierList(&(toAdd.at(0)), NULL);
idList = arrow;

for (int i = 2; i < toAdd.size()-1; i++)
{
    (*arrow).id = &(toAdd.at(i));
    (*arrow).next= new identifierList(&(toAdd.at(0)), NULL);
    arrow = (*arrow).next;
}

*id = toAdd.at(0);
openParen = '(';
closeParen = ')';

return Token("ok", "ok", 0);
} 
```

这段代码做了我需要做的所有事情，除了最后。它正确地将所有变量设置为我需要的变量。这是它不起作用的地方：我一步一步运行它，在运行最后一行 return Token("ok", "ok", 0); idList 的值从合法值变为疯狂值（例如，idList 行号中的第一个 id 从 2 变为 -17891602。

如果我发布标识符列表和令牌包含的标题，这可能更有意义：令牌：#pragma once using namespace std; #include #include #include #include #include "datalogProgram.h"

```
enum state {COMMA, PERIOD, Q_MARK, LEFT_PAREN, RIGHT_PAREN, COLON, COLON_DASH, MULTIPLY, ADD, SCHEMES, FACTS, RULES, QUERIES, ID, STRING, COMMENT, WHITESPACE, UNDEFINED, ENDOFFILE, START};

class Token
{
friend class datalogProgram;

public:
int lineNumber;
string type;
string value;

Token(string inType, string inValue, int inLineNum);
void route(state inState, string inValue, int inLineNum);
string retType();
string retValue();

//A list of a bunch of functions that don't matter here.
}; 
```

还有一个标识符列表：

```
class identifierList
{
friend class scheme;
public:
Token * id;
identifierList * next;

identifierList(Token * inId, identifierList * inNext);
}; 
```

我不明白 - 当我所做的只是从函数返回时，为什么任何变量都会发生变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:20:51.240

发生这种情况是因为向量 toAdd 是按值而不是按引用传递的。发生的情况是您传递给 addScheme 函数的向量被复制到堆栈中。

现在，语句 ( `&(toAdd.at(0)`) 和类似语句引用向量中位置 0 处的任何内容。这意味着它返回一个指向堆栈上某个位置的指针。

一旦你的函数返回，堆栈就会被清除，指向堆栈位置的指针包含垃圾。

要解决这个问题，要么通过引用传递向量，要么更好地避免 ( `&(toAdd.at(0)`)，因为这是一个非常奇怪的合同，可能永远不会像你期望的那样工作。

# python - 如何删除列表中元素的最后 2 个字符？

> ID：15145690
> 
> 赞同：1
> 
> 时间：2013-02-28T21:10:12.760
> 
> 标签：python, python-2.7

我正在尝试删除下面列表中每个项目的最后 2 位数字。

```
keys = ['2013', '1101', '1201', '1301', '1401', '1402', '1403', '2100', '2150', '3201', '5201', '5301', '9810', '9820', '9830', '2013', '1101', '1201', '1202', '1301', '1304', '1401', '1402', '1403', '2100', '2150', '3401', '5201', '5301', '9810', '9820', '9830', '2013', '1101', '5201', '2013', '1101', '1201', '1401', '1402', '1403', '2100', '5201', '5301', '5402', '9810', '9820', '9830', '2013']

for n,k in keys:
  keys[n] = keys[n][0]+keys[n][1] 
```

我不断收到 ValueError: too many values to unpack

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T21:11:10.603

这里不需要正则表达式......简单的切片就可以了：

```
keys = [k[:-2] for k in keys] 
```

这实际上并没有到位，但它可以很容易地到位：

```
keys[:] = [k[:-2] for k in keys] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:16:48.913

您收到一个错误，因为`keys`是长度为 4 的字符串列表，所以

```
for n,k in keys: 
```

无法工作，因为长度为**4**的字符串无法解压缩为**2 个**变量`n`和`k`.

无论如何，这是另一种选择：

```
map(operator.itemgetter(slice(-2)), keys) 
```

# ember.js - Ember.js：Model.createRecord 不工作，不出错

> ID：15145691
> 
> 赞同：1
> 
> 时间：2013-02-28T21:10:18.757
> 
> 标签：ember.js, ember-data

开发允许帐户向社交媒体发布消息的应用程序。我正在尝试将我的第一条消息保存到 Ember 数据存储区，但它似乎不起作用。问题是它也没有出错，所以我不确定发生了什么。这是设置：

**楷模**

```
Social.Account = DS.Model.extend({
    username: DS.attr('string'),
    messages: DS.hasMany('Social.Message')
});

Social.Message = DS.Model.extend({
    user_id: DS.attr('number'),
    text: DS.attr('string'),
    accounts: DS.hasMany('Social.Account'),
    posts: DS.hasMany('Social.Post')
});

Social.Post = DS.Model.extend({
    created: DS.attr('date'),
    text: DS.attr('string'),
    message: DS.belongsTo('Social.Message')
}); 
```

**数据**

```
Social.Account.FIXTURES = [{
    id: 1,
    username: "commadelimited",
    messages: [1, 2]
}];

Social.Message.FIXTURES = [{
    id: 1,
    user_id: 1,
    text: 'This is message #1 sent by account #1',
    accounts: [1],
    posts: [1]
}, {
    id: 2,
    user_id: 1,
    text: 'This is message #2 sent by account #1',
    accounts: [1],
    posts: [2]
}];

Social.Post.FIXTURES = [{
    id: 1,
    created: "5 minutes ago",
    text: 'This is post #1 sent by account #1, tied to message #1'
}, {
    id: 1,
    created: "5 minutes ago",
    text: 'This is post #2 sent by account #1, tied to message #2'
}]; 
```

在 Social.NewPostView 的上下文中，我有一个调用提交方法的按钮

```
Social.NewPostView = Ember.View.extend({
    tagName: 'div',
    submit: function(e) {
        msg = Social.Message.createRecord({
            id: 1,
            user_id: 1,
            text: 'This was a created message',
            created: "2013-02-27 13:09:22",
            accounts: [1],
            posts: [1]
        });
        console.log('done');
    }
}); 
```

当用户单击按钮时，我可以触发一个警报框，所以我知道该方法正在触发。你可以看到我在这里硬编码了一个 createRecord 调用（但在应用程序中我使用的是用户输入的数据）。日志语句显示在控制台中，但我没有看到预期的 UI 更改。此外，当我自省用户 1 的帐户对象时，我得到 0 长度：

`Social.Account.find().objectAt(0).get('messages').get('length')`

当我在控制台中运行此语句时，我确实得到了一些显示：

`Social.Message.createRecord({ user_id: 1, text: 'This was a created message', created: "2013-02-27 13:09:22", accounts: [1], posts: [1] })`

但它是一个复杂的对象，我不确定它实际上是什么。我的代码基于@toranb 的[complex-ember-data-example](https://github.com/toranb/complex-ember-data-example)项目，它似乎具有可比性。我确定我做错了什么，但我不知道它是什么。任何输入都会被重视。

**更新 1**

通过`Social.Message.find().get('length')`在提交之前记录我得到 0。如果我点击提交，然后立即运行相同的日志语句，我得到以下内容：

```
4
Uncaught Error: Attempted to handle event `loadedData` on <Social.Message:ember427:1> while in state rootState.loaded.created.uncommitted. Called with undefined 
```

这表明消息确实正在创建，但未显示在 UI 中。我的下一步可能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T23:27:55.737

您`id`在创建记录时设置。我对 FixtureAdapter 不熟悉，但无论如何这看起来都不是一个好主意。

更新：

我刚刚尝试了一个示例项目，并且能够通过设置`id`调用时重现您的错误`createRecord`。

因此，请改用此代码：

```
Social.NewPostView = Ember.View.extend({
  tagName: 'div',
  submit: function(e) {
    msg = Social.Message.createRecord({
//      id: 1,
        user_id: 1,
        text: 'This was a created message',
        created: "2013-02-27 13:09:22",
        accounts: [1],
        posts: [1]
    });
    console.log('done');
    }
}); 
```

您的灯具中已经有一条 id 为 1 的记录。

更新 2：

我有一个公开的 PR 来演示这个问题并给出更好的错误信息

[https://github.com/emberjs/data/pull/770](https://github.com/emberjs/data/pull/770)

# jquery - HTML.ActionLink 到控制器使用 Ajax 防止回发

> ID：15145693
> 
> 赞同：0
> 
> 时间：2013-02-28T21:10:27.243
> 
> 标签：jquery, ajax, asp.net-mvc, html.actionlink

这是我认为的 ASP MVC 代码。它触发到控制器并传递assetId和relationshipContext：

```
 @Html.ActionLink("Archive", "Archive", new { assetId = Model.ID, relationshipContext = assetTypeRelation.RelationshipContextID }, new { @class = "btn btn-mini btn-warning", id = "btnArchive" }) 
```

我想通过这个 HTML.ActionLink 使用 Ajax，但有点困惑。这是我开始使用的 jQuery。基本上我只需要这个actionlink 来将assetId 和relationshipContext 传递给我的assetcontroller 中的Archive 方法。

```
$('#btnArchive').click(function(){
                  $.ajax({
                      url: '@Url.Action("Archive", "Archive")',
                      type: 'POST',
                      dataType: 'json',
                      data: {
                          assetId: $(this).attr("assetId"),
                          relationshipContext: $(this).attr("relationshipContext"),
                      },
                      success: function(){
                          alert("success")
                      },
                      error: function () {
                          alert("error")
                      },

                  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:41:13.297

看看@Ajax.ActionLink

[http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxextensions.actionlink(v=vs.108).aspx](http://msdn.microsoft.com/en-us/library/system.web.mvc.ajax.ajaxextensions.actionlink(v=vs.108).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:13:23.593

您的 AssetController 操作方法是什么样的？我应该看起来像：

```
[HttpPost]
public ActionResult Archive(int assetId, string relationshipContext)
{
     //do some work
     return Content("true");
} 
```

此外，您在 @Url.Action 调用中调用了错误的控制器。您的查看代码可能需要更改为

```
$('#btnArchive').click(function(){
                  $.ajax({
                      url: '@Url.Action("Archive", "Asset")',
                      type: 'POST',
                      dataType: 'json',
                      data: {
                          assetId: $(this).attr("assetId"),
                          relationshipContext: $(this).attr("relationshipContext"),
                      },
                      success: function(data){
                          alert(data)
                      },
                      error: function () {
                          alert("error")
                      },

                  }); 
```

# r - 防止data.table在R中滚动超过一定数量的周期

> ID：15145695
> 
> 赞同：2
> 
> 时间：2013-02-28T21:10:35.550
> 
> 标签：r, data.table

我想输入`roll`一些值，`data.table`但要防止它滚动超过一定数量的周期。我知道这个功能是在最新的 R-Forge 版本 1.8.7 中实现的，但我想推迟升级，直到它对 CRAN 足够稳定。前任：

```
require(data.table)
dtb = data.table(id=1, thedate=c(1,3,100), val=c(1, 2, 3), key=c("id", "thedate"))
dtb2 = data.table(id=1, thedate=1:100,key=c("id", "thedate"))
res = dtb[dtb2, roll=TRUE] 
```

这对值 2 的作用非常大。我想在 N 个周期后阻止它滚动。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T21:44:08.823

v1.8.7 不在 CRAN 上，不是因为它本身不稳定，而是因为 CRAN 维护者的时间有限；包维护者被要求减少提交给 CRAN 的频率。

如果您需要有限的`roll`功能，那么没有比升级到 v1.8.7 更好的方法了，afaik。您可以保存当前的 R-Forge .zip，或使用我放在主页上的副本。如果出现问题，很容易恢复到 1.8.6。

由于有限的`roll`功能是新的，如果你测试它会很棒，因为你需要它。否则，释放到 CRAN 并不会真正添加任何东西，除了在沙子上的人造线。

# asp.net - ASP.net MVC 复选框问题

> ID：15145696
> 
> 赞同：4
> 
> 时间：2013-02-28T21:10:38.773
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, checkbox, checkboxfor

我正在开发一个 ASP.net MVC 项目，并且我正在使用`CheckBoxFor`辅助方法为`boolean`我的模型中的 a 提供值，如下所示：

```
@Html.CheckBoxFor(m => m.ShouldSaveSearch, new { id="ShouldSaveSearch"}) 
```

如果该复选框被用户**选中**，则它可以完全正常工作并且当控制器接收到模型时。ShouldSaveSearch 属性将设置为 true。

```
[HttpGet]
public ActionResult Search(int studentSearchId = -1)
{
    return View(new StudentSearchModel(studentSearchId));
}

[HttpPost]
public ActionResult Search(StudentSearchModel m)
{
    ViewBag.SearchResults = Hub.Web.Models.Student.StudentSearchModel.Search(m);
    Hub.Web.Models.Student.StudentSearchModel.Save(m);
    m.ShouldSaveSearch = false;
    m.ShouldShareSearch = false;
    m.SavedSearchName = "";
    m.SavedSearchDescription = "";

    return View(m);
} 
```

然后我将`ShouldSaveSearch`属性设置为`false`，然后返回与最初提交的相同模型的相同视图。

但是，当视图呈现时，此属性的复选框仍处于选中状态。有什么我遗漏的东西阻止复选框取消选中吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:21:01.970

您似乎希望将复选框默认为未选中。这与**lambda**的真/假值无关，而是与检查属性的值相关联

```
@Html.CheckBoxFor(m => m.ShouldSaveSearch, new { @checked="false"}) 
```

对方的观点同样重要。清除模型状态！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:20:26.917

这听起来像是这个[问题](https://stackoverflow.com/questions/9645479/mvc3-view-not-updating-after-post)和[这里](https://stackoverflow.com/questions/787895/asp-net-mvc-reset-the-value-of-textarea-after-form-submition)`ModelState`讨论的问题

简而言之，HtmlHelper 显示`ModelState`值 not `Model`。有关更多详细信息，请参阅问题。

可能的选项：

*   按照 42 的建议实现 post-redirect-get 模式
*   使用集合重置复选框值`ModelState`，例如`ModelState["ShouldSaveSearch"].Value = false`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T21:25:04.623

The problem here is that if you return the same view to which you posted with the model data, MVC will think that you are returning because of an error. This is a normal behavior. If you want to redisplay the view then you should implement PRG pattern (Post-Redirect-Get). You issue will be always there regardless of whether `ModelState.IsValid` is true or false. You should redirect to the HttpGet version of your view, passing the parameter, and loading the data. If you want to avoid loading, store the data in `TempData` or some other Session implementation.

UPDATE: You are calling the version of an action that receives model object. Once you persist data call

```
return RedirectToAction("Search", new {studentSearchId = your_value}); 
```

# user-interface - VST GUI 中的向后格式化值

> ID：15145702
> 
> 赞同：0
> 
> 时间：2013-02-28T21:10:50.630
> 
> 标签：user-interface, plugins, vst

一个要解决的新问题。

在我的 setParameter() 中，我使用将值设置为“真实值”。我正在格式化它们，`value * (max - min) + min` 例如：`value of 1.0 == 20000Hz`或`value of 0.0 == -30dB`

现在我遇到了问题，VSTGUI 似乎只接受 0-1 的值。有没有比重写 setParameter() 中的所有代码更好的解决方案？

也许像 sprintf() 之类的东西？

编辑：我正在使用 CAnimKnob 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T12:10:03.170

感谢您的建议。如果我知道如何在 VSTGUI 中使用反向运算符，我首先要做的就是这样做。VSTGUI CAnimKnob 只接受从 0.0 到 1.0 的浮点值。不管是线性的还是对数的。为了更好地理解这里的一些代码片段：

我这样调用过程函数：

```
case kFreq1: fFreq1 = value * (fFreqMax - fFreqMin) + fFreqMin;break;
case kGain1: fGain1 = value * (fGainMax - fGainMin) + fGainMin;break;
case kQ1 : fQ1 = value * (fQMax - fQMin) + fQMin;break; 
```

那是因为我的过滤器代码使用 20 - 20000 的频率值和 -30 到 30 的增益值。

VSTGUI 中的 Knob 只给出 0 到 1 的值，并且只获取 0 到 1 的值。

所以主要问题是：在哪里带回代码中的`float values 0-1`from `20 - 20000`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T06:47:39.630

aardvark 的评论是正确的，反向选项是您想要的。过去曾与 vstgui 合作过，我可以验证这是否可行。

我只是想补充一点，如果您使用这样的频率算法，对用户来说将非常困难。您应该改为使用对数刻度，以便更容易选择更高的频率。否则，当您接近 20kHz 时，旋钮的单步将导致数百赫兹的差异。

# internet-explorer - 谷歌地图 api v3 未充满电

> ID：15145709
> 
> 赞同：0
> 
> 时间：2013-02-28T21:11:16.197
> 
> 标签：internet-explorer, google-maps

我正在处理一个页面，其中有一个谷歌驱动的地图（就像你在 maps.google.com 上找到的那样。它在 chrome 和 FireFox 中运行良好（当然），但在 IE 中不行。

只发生在 IE (<9) 中。地图位于选项卡内。

这是我用来生成地图的代码：

```
 <!-- Estilos para el contenedor del mapa -->
<style type="text/css">  
    #datosMap
    {
        width: 20%;
    }
    #datosMap, #map
    {
        display: inline-block;
        vertical-align: top;
    }
    #map{
        height: 500px;
        width: 70%;
    }   
    #subtabMapa
    {
        margin: 16px;
    }
</style>

$(document).ready(function(){   
//Funcion para cargar el mapa
    function cagarMapa(latitud,longitud,zoom){
        //Se carga el mapa
        var latlng = new google.maps.LatLng(latitud, longitud);
        var myOptions = {
              zoom: zoom,
              center: latlng,
              mapTypeId: google.maps.MapTypeId.ROADMAP,
            };
        var map = new google.maps.Map(document.getElementById("map"),myOptions);    

        var marker = new google.maps.Marker({
            position: latlng,
            map: map
        });     

         google.maps.event.trigger(map, 'resize');
    }//Fin funcion cargar
    //------------------------------------

    //latitud y longitud de colombia
    var latitud = 4.214495;
    var longitud = -74.341861;
    var zoom = 5;

    cagarMapa(latitud,longitud,zoom);//Se carga el mapa en las coordenadas y el zoom indicados

});//Fin ready

<div id="map"><!--MAP HERE--></div> <div id="datosMap"><!-- here is a form --></div> 
```

看起来像这样：http: [//i.imgur.com/PHDVxUi.png](http://i.imgur.com/PHDVxUi.png)

任何人都可以帮我一把

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:30:47.690

不确定它是否会有所帮助，但[这篇文章](https://stackoverflow.com/a/13059099/2110460)建议从地图前面删除 var。

```
var map = new google.maps.Map(document.getElementById("map"),myOptions); 
```

变成

```
map = new google.maps.Map(document.getElementById("map"),myOptions); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T17:03:37.210

邓肯，雷夫谢谢。我尝试使用您的解决方案，但问题仍然存在。

我通过这种方式解决了这个问题：单击选项卡时加载地图。

这是我的代码：

```
$(document).on("ready",init);
function init()
{
  $("#tabmapa").on("click",mapainicial)
}
function mapainicial()
{
  //latitud y longitud de colombia
  var latitud = 4.214495;
  var longitud = -74.341861;
  var zoom = 5;
  cagarMapa(latitud,longitud,zoom);//Se carga el mapa en las coordenadas y el zoom        indicados
} 
```

感谢您的帮助（Y）。PD：Mods，你能把这个标记为已解决吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-01T09:52:15.380

问题是您在此处最后一项上的尾随逗号。IE 不喜欢这样，会导致 JS 错误：

```
mapTypeId: google.maps.MapTypeId.ROADMAP, 
```

# clojure - 用于 uberjars/.classes 的 Clojure 热代码交换

> ID：15145721
> 
> 赞同：8
> 
> 时间：2013-02-28T21:11:58.607
> 
> 标签：clojure, osgi

我想在项目更新之间进行热代码交换，但我还没有找到有关如何动态加载 .class 文件的任何信息。更具体地说，我想要这样的东西：

1.  制作`lein uberjar`，获得`some-client-0.0.0-standalone.jar`。
2.  运行它`java -jar some-client-0.0.0-standalone.jar`。
3.  对项目进行更改。获取新的程序版本，`some-client-0.0.1-standalone.jar`复制到`some-client-0.0.0-standalone.jar`目录。
4.  客户端接收更新到新版本所需的命令序列。
5.  （可选）更新资源。不再使用旧 jar 中的资源。
6.  （可选）`some-client-0.0.0-standalone.jar`现在可以删除。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-06T21:39:03.793

**插件框架方法**

您已经说过您想要进行热代码交换，但您真正需要的是松散耦合的模块以及在运行时进行解析的能力。坦率地说，任何插件框架都可能有所帮助，包括成熟的 OSGi（将在下面介绍）。

![在此处输入图像描述](../Images/3bb46fda39f9b6b2393d340c1aad6e70.png)

由于您正在执行某种 PoC，我建议您查看以下示例：

1.  您有一个定义了一些扩展点（[隐喻解释](http://wiki.eclipse.org/FAQ_What_are_extensions_and_extension_points?)）的元应用程序
2.  要升级或替换的功能将作为松散耦合的模块（插件）实现
3.  元应用程序通过请求或自动执行解析以查找更新的“功能”（根据定义的扩展点）

可以提出定义simlle升级方案：

1.  用户使用应用程序
2.  用户安装（复制）具有一个或多个扩展点的新实现的 JAR（其他类型的包）
3.  用户触发全局系统解析或系统扫描新更新或系统执行解析每个用户尝试访问某些功能

以这种方式，元应用程序将能够提供新的或更新的功能而无需重新启动。这样你就可以：

1.  尝试使用一些简单的 java 插件框架（例如，[Java Simple Plugin Framework。5 分钟就可以了。没有 XML。](https://code.google.com/p/jspf/)这种方法似乎有点难看
2.  使用 clojure 的动态特性，正如[这里所建议的那样](https://stackoverflow.com/questions/1810231/defining-a-spi-in-clojure)

您还可以查看并采用 Waterfront（基于 Clojure 的 Clojure 编辑器）调查结果（可能需要它来增强生命周期管理等）

*   检查[模块化组合/插件架构](https://groups.google.com/forum/?fromgroups=#!topic/clojure/irCGydnCNdA)线程
*   查看 SourceForge 上的代码[waterfront](http://sourceforge.net/projects/waterfront/)

> 在实现方面，Waterfront 是基于上下文模式的。它允许事件处理程序以功能（无副作用）的方式进行通信。除此之外，还有一个插件加载器机制，它加载在 Waterfront 的配置文件中指定的插件。这意味着可以轻松添加或删除功能（在调试时非常有用！）。

**OSGI 方法**

正如建议的那样，OSGi 似乎是解决您的问题的好方法。另请注意，OSGi 是好的、成熟的，并且提供了很多开箱即用的东西，但它也有些复杂：

![在此处输入图像描述](../Images/ddb236a80d8e28081ddb6efe6b87fb69.png)

顺便说一句，OSGi 是 clojure 社区的长期目标。您可以检查[Clojure Todo](http://clojure.org/todo)：

```
> better modularization for OSGi etc 
>  * names
>  * no single namespace pool
>  * namespaces found via classes, thus tracks classloader and modules 
>  * deal with import proxying a la Class.forName stack walk? 
```

已经有一些解决方案可用：

1.  [clojure-osgi-utils](https://github.com/pmoriarty/clojure-osgi-utils)
2.  [clojure.osgi](https://github.com/aav/clojure.osgi)

第二个项目提供了使用 clojure 和 OSGi 的 Producer-Consumer 示例：

*   [生产者服务](https://github.com/aav/clojure.osgi/blob/master/clojure.osgi.example.service.producer/src/clojure/osgi/example/service/producer/service_producer.clj)
*   [消费者服务](https://github.com/aav/clojure.osgi/blob/master/clojure.osgi.example.service.consumer/src/clojure/osgi/example/service/consumer/service_consumer.clj)

快乐编码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T22:00:16.693

要在运行时严格从 jar 文件重新加载，您可能需要查看[OSGi 类加载](http://blog.osgi.org/2011/05/what-you-should-know-about-class.html)器。对于 Clojure 代码，您可以在侦听本地端口的客户端中启动 nrepl，然后当您想要重新加载连接到该端口的代码并调用`load-file`

# css - 为什么我的徽标图像在页面扩展时没有水平移动？

> ID：15145722
> 
> 赞同：0
> 
> 时间：2013-02-28T21:12:00.277
> 
> 标签：css, position, alignment, margin, css-position

当您更改浏览器窗口的大小时，我的页面的主要内容（文本和表单）会在页面上水平移动。我的标志保持在固定位置。我找不到会导致这种情况发生的两个类之间的 css 差异。这是CSS：

```
.main {width:100%; padding:0; margin:0 auto; min-width: 1020px; overflow: hidden;}
.header { background:url(images/slider_bgpng200.png); background-repeat: repeat-x; padding:0; margin:0 auto; width: 100%; }
.headertop{width: 44%; background: #d3e5e8; height: 30px; min-width: 1020px;float: left;  padding-left: 50px; margin: 0 auto;}
.block_header {margin:0 auto; width:1200px; padding:0; border:none; }
.space { float:left; padding:0; margin:0; }
.header_text { width:200px; float:right; font:normal 11px Tahoma, Geneva, sans-serif; color:#9a9a9a; padding:6px 10px 10px 10px; margin:0; text-align:center;}
.slider { background: transparent; margin:0 auto; padding:0; height:420px;} 
.slider .gallery { margin:0 auto; width:980px; height:420px; padding:0;} 
.slider .textholder {padding-top: 110px; float: left; width: 44%; font-family: 'Roboto', sans-serif; font-size: 40px; color: #93a0a2;padding-left: 30px;}
.formbox{float: right; width: 48%; padding-top: 90px; padding-right: 40px;} 
```

这是html：

```
<div class="main">
 <div class="header">
   <div class="headertop"> <img src="images/avidestlogo50perresave.png"  border="0" alt="logo" />
     <div class="header_text"><a href="#">Email</a> | <a href="#">Client Login</a> 
     </div>
   </div>
  <div class="block_header">
      <div class="space"><a href="index.html"></a>
      </div>
  </div>
      <div class="slider">
         <div class="gallery">
            <div class="textholder">
            &nbsp;&nbsp;&nbsp;&nbsp;Where Student and <br />
            &nbsp;&nbsp;&nbsp;Alumni Freelancers <br />&nbsp;&nbsp;Get Hired
            </div>
            <div class = "formbox">Form is here
            </div>
         </div>
      </div>
  </div>
 </div>
</div> 
```

该网站位于 avidest.com/schneer，因此您可以看到我在说什么。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:15:16.847

你班上有`width:100%`。`.header`

`width:1200px`这和你`.block_header`班上的不一样。

如果您希望整个页面以相同的方式居中，我建议您将标题和内容包装在一个外部`div`以单个类进行居中

# javascript - 带有计时器的Javascript游戏

> ID：15145726
> 
> 赞同：1
> 
> 时间：2013-02-28T21:12:28.263
> 
> 标签：javascript, multithreading, concurrency

我正在修改一个 Javascript 游戏，需要在游戏板顶部添加一个倒数计时器（从 3:00 分钟到 0 秒）。我已经编写了游戏和计时器，当用户单击游戏的“开始”按钮时，计时器将启动。（即游戏定时在3分钟后结束）

我的问题是，由于 JavaScript 不是多线程的，所以当用户同时玩我的游戏时，我的游戏倒数计时器将不允许运行（滴答）。那是对的吗？

在我看来，除了使用新的多线程 JavaScript 库之外，还有一些方法可以让它工作。

**这是我的计时器：**

```
<script type="text/javascript">
// set minutes
var mins = 3;
// calculate the seconds (don't change this! unless time progresses at a different speed for you...)
var secs = mins * 60;

function countdown() {
    setTimeout('Decrement()',1000);
}

function Decrement() {
    if (document.getElementById) {
        minutes = document.getElementById("minutes");
        seconds = document.getElementById("seconds");
        // if less than a minute remaining
        if (seconds < 59) {
            seconds.value = secs;
        } else {
            minutes.value = getminutes();
            seconds.value = getseconds();
        }
        secs--;
        setTimeout('Decrement()',1000);
    }
}

function getminutes() {
    // minutes is seconds divided by 60, rounded down
    mins = Math.floor(secs / 60);
    return mins;
}

function getseconds() {
    // take mins remaining (as seconds) away from total seconds remaining
    return secs-Math.round(mins *60);
}
</script>

<script>
countdown();
</script>

<div id="timer">
    <input id="minutes" value="3" type="text" style="width: 14px; border: none; background-color:none; font-size: 16px; font-weight: bold;">:<input id="seconds" value="00" type="text" style="width: 26px; border: none; background-color:none; font-size: 16px; font-weight: bold;"> remaining
</div> 
```

这是我的游戏中启动一切的部分：

```
<script>
$(function(){
    $("#button-start").click(game.start);
});
</script> 
```

如何`game.start`运行该`countdown()`方法以及我的计时器中的方法？每次单击“开始”时我尝试运行这两种方法时，JavaScript 都不会运行。没有任何效果并且它冻结了，我假设有两种方法试图同时运行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:20:38.340

你应该只使用`setTimeout`，然后它不会阻塞

```
var initialTime = new Date();
function updateTimer() {
    if (new Date() - initialTime > (1000 * 1000 * 60 * 3) ) {
         document.getElementById('clock').innerHTML = formatTime();
         setTimeout(updateTimer, 1000);    
    }
}
updateTimer(); 
```

只是不要使用繁忙的循环

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:17:35.610

除非您的游戏使用某种繁忙的循环，例如，像这样：

```
while (1) {
    // process next event
} 
```

......那么你不应该担心它。您的 JavaScript 引擎会自动将用户事件与计时器事件交错，因此计时器*不应该*被饿死。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T21:28:04.113

单程：

```
var S_LEFT = 180;
function myTicker(){
  console.log('tick');
  S_LEFT -= 1;
  if(S_LEFT === 0) doSomething();
  $('#seconds').html(S_LEFT);
};

$('#start').on('click', function(){
  window.setInterval(myTicker, 1000);
}); 
```

@Juan Mendes 使用 setTimeout 而没有 Jquery 的方式：

```
var S_LEFT = 180;
function tick(){
  console.log('tick');
  S_LEFT -= 1;
  if(S_LEFT === 0){ 
    alert('Boom');
  } else {
    document.body.innerHTML = S_LEFT;
    window.setTimeout(tick, 1000);
  }
};
//document.addEventListener('DOMContentLoaded',tick,false);
tick(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-05T17:46:29.647

我正在使用`setTimeout('Decrement()',1000);`

当我应该使用`setTimeout(Decrement,1000);`

在“减量”之后删除单引号和括号解决了我的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-17T22:47:38.303

所有这些答案对我来说似乎都太复杂了。

为什么不简单地在第一次使用启动计时器时以秒为单位获得时间戳

```
var beginTimestamp = Math.floor(Date.now() / 1000) 
```

然后做你的结束

```
var endTimestamp = beginTimestamp + (3*60) 
```

然后在更新时，获取剩余的秒数

```
var numSecondsRemaining = endTimestamp - Math.floor(Date.now()/1000) 
```

最后

```
if(numSecondsRemaining <= 0) { /* end game */ } 
```

要格式化，只需执行

```
var date = new Date(numSecondsRemaining*1000);
var minutes = "0" + date.getMinutes();
var seconds = "0" + date.getSeconds();
var formattedTime = minutes.substr(-2) + ':' + seconds.substr(-2); 
```

这种方法不受 setTimeout 可能容易出现的任何问题的影响。它也小得多，基本上不需要数学。

# javascript - 单击事件 - 主文档和对话框 jQuery

> ID：15145732
> 
> 赞同：0
> 
> 时间：2013-02-28T21:12:39.130
> 
> 标签：javascript, jquery, events, click

因此，在我的主页上，我构建了一个自定义工具提示，它只是一个 div，其中包含一些隐藏的信息，当您选择一个按钮时，它会打开菜单。如果您单击文档中的其他任何位置，它会隐藏该 div。该代码看起来像这样。

```
$(document).on("click", function() {
    $("#supTooltip").fadeOut("fast", "linear");
});
$("#supervisorButton").on("click", function(e) {
    e.stopPropagation();
    return false;
}); 
```

单击此按钮后，您可以单击菜单中的多个不同选项。一个人会弹出一个对话框。在那个对话框中，我也有一个类似的过滤器菜单。代码看起来一样，只是提取了不同的 ID。

```
$(document).on("click", function() {
    $("#filtersDiv").fadeOut("fast", "linear");
});
$("#filtersButton").on("click", function(e) {
    e.stopPropagation();
    return false;
}); 
```

我不能这样做吗？我试图关闭点击事件，但它似乎不起作用。我在代码的第二次迭代上面使用了这个。

```
$(document).off("click"); 
```

任何帮助都是极好的。在过去的几个小时里，我一直在为此绞尽脑汁。

**编辑1：**

请求了 jsFiddle。[http://jsfiddle.net/yDmAK/1/](http://jsfiddle.net/yDmAK/1/)

这行得通，但不同的是，menu2 函数与 menu1 函数不在同一个文件中。该对话框使用加载事件将数据填充到单独的文件中，以便从单独的文件中提取数据。

这可能会导致问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T22:02:11.393

我决定使用另一个[用户](https://stackoverflow.com/users/659025/prc322)在不同线程上发布的不同方法。

```
$(document).mouseup(function (e)
{
    var container = $("YOUR CONTAINER SELECTOR");

    if (container.has(e.target).length === 0)
    {
        container.hide();
    }
}); 
```

这似乎起到了作用，并且工作正常。

# javascript - 使立方体变成圆角

> ID：15145737
> 
> 赞同：-1
> 
> 时间：2013-02-28T21:13:02.597
> 
> 标签：javascript, jquery, css, 3d, three.js

如何使用 three.js 制作圆角立方体？我读过它不能使用css来完成。有人可以告诉我该怎么做吗？

[http://jsfiddle.net/rajkumart08/8YK2n/embedded/result/](http://jsfiddle.net/rajkumart08/8YK2n/embedded/result/)

```
/*
|------------------------------------------|
| MelonHTML5 - 3D Cube Gallery             |
|------------------------------------------|
| @author:  Lee Le (lee@melonhtml5.com)    |
| @version: 1.02 (09 Jan 2013)             |
| @website: www.melonhtml5.com             |
|------------------------------------------|
*/
Gallery = {
    _config: {
        speed: 500,
        size: 100,
        lightbox: !0,
        closeOnEsc: !0,
        animation: "default",
        slideshow: !1,
        slideshow_speed: 3E3,
        cube_speed: 1E3
    },
    lightbox_speed: 300,
    window_width: null,
    window_height: null,
    _cube_timeout: null,
    _gallery: null,
    _overlay: null,
    _lightbox: null,
    _current: null,
    _in_slideshow: !1,
    init: function () {
        Gallery._buildContainer(!0, !0);
        Gallery.window_width = $(window).width();
        Gallery.window_height = $(window).height();
        $(document).keydown(Gallery.Events.keyDown);
        $(window).resize(Gallery.Events.windowResize);
        Gallery._startCube()
    }, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T22:12:38.887

这是一个使用细分修改器的 three.js 代码示例的链接，它将生成一个圆形立方体。

[http://stemkoski.github.com/Three.js/Subdivision-Cube.html](http://stemkoski.github.com/Three.js/Subdivision-Cube.html)

# dynamics-crm-2011 - Dynamics CRM：检索实体的相关实体

> ID：15145740
> 
> 赞同：0
> 
> 时间：2013-02-28T21:13:19.357
> 
> 标签：dynamics-crm-2011, dynamics-crm

我正在尝试检索现有实体的 RelatedEntities 集合，但每次它都返回空值。不知道我在这里缺少什么。非常感谢检索相关实体的任何帮助或任何其他解决方法。这是我的代码片段：

```
Entity existingAppointment = _service.Retrieve("appointment", id, new ColumnSet(true));
Console.WriteLine(existingAppointment.RelatedEntities.Count); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:50:09.550

要实现这一点，您必须使用 RollupRequest，请[在此处](http://msdn.microsoft.com/en-us/library/microsoft.crm.sdk.messages.rolluprequest.aspx)查看更多信息。

# function - 带有依赖项的自我类型注释：如何访问内部方法

> ID：15145741
> 
> 赞同：0
> 
> 时间：2013-02-28T21:13:21.240
> 
> 标签：function, scala, inner-classes, self-type

```
object DatabaseConnection { this: LoginDevice =>
    val Connection = ...

    class LoginDevice {
        val prep = Connection.prepareStatement("SELECT * FROM USER WHERE NAME = ?")
        def login(username: String, password: String) = {
            prep.setString(1, username)
            val rs = prep.executeQuery
            if (!rs.next)
                throw User404
            new User(rs.getString("Name"), ...)             
        }
    }
}

object RequestHandler {
    type Request = (String, String)

    def handle(request: Request) = request._1 match {
        case "Login" => {
            val info = request._2.split(",")
            DatabaseConnection.login(info(0), info(1)) // SYNTAX ERROR
        }
        case _ => throw new Exception("Request type is not valid.")
    }
} 
```

现在，我想将我的 DatabaseConnection 拆分为具有自己准备好的语句等的“设备”。`Connection`不过，它们都应该引用这个实例。我希望能够从外部调用内部函数。

无需重命名任何这些功能的最佳方法是什么？

顺便说一句，对于短文本，我的手在自动取款机上是真的被禁用了。

# php - 当 ajax 开始在后台运行时显示加载图像

> ID：15145751
> 
> 赞同：0
> 
> 时间：2013-02-28T21:13:29.697
> 
> 标签：php, javascript, jquery, ajax, radajaxloadingpanel

当我单击记录按钮时，我有以下脚本开始运行。我想在单击记录按钮时显示图像，这与我们上传图像时通常显示的相同...这是脚本：

```
<script>
function st()
{
    if (window.XMLHttpRequest)
    {
        xmlhttp=new XMLHttpRequest();
    }
    else
    {
        xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');
    }
    xmlhttp.onreadystatechange=function()
    {
        if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
        alert('RECORDING Start');
        }

    }
    xmlhttp.open('GET','http://localhost/IPCAM/start.php;)

    xmlhttp.send();

setTimeout('st()',5000);
}
</script> 
```

当我单击此按钮时，该按钮将启动 ajax 后台。

```
<button OnClick="st()">Record</button> 
```

我不知道这样做，请有人帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:20:24.597

添加一个 id 为 loadingDiv 的 div 并将您的代码更改为此

```
<script>
function st()
{
                        if (window.XMLHttpRequest)
                        {
                            xmlhttp=new XMLHttpRequest();
                        }
                        else
                        {
                            xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');
                        }
                        xmlhttp.onreadystatechange=function()
                        {
                            if (xmlhttp.readyState==1)
                            {
                            document.getElementById("loadingDiv").innerHTML = "<img src='loading.gif'/>";
                            }
                            if (xmlhttp.readyState==4 && xmlhttp.status==200)
                            {
                            alert('RECORDING Start');
                            }

                        }
                        xmlhttp.open('GET','http://localhost/IPCAM/start.php;

                        xmlhttp.send();

setTimeout('st()',5000);
}
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:25:01.910

首先，我发现您的问题非常不清楚，但让我试试：

确保您有一个定义图像的 css 类：

```
.recordingBackground
{
    background-image: url("record.png");
} 
```

（或者只使用javascript）

创建按钮：

```
<input type="button" id="recordButton" value="Record" /> 
```

让 jQuery 监听按钮，您可以将类添加到元素中：

```
$('#recordButton').live("click", function()
{
    $('#background').addClass('recordingBackground');
    // Or use a similar method (for example: pure javascript).
    // #background is just an example div.
}); 
```

# jquery - JQuery通过属性值查找元素

> ID：15145752
> 
> 赞同：0
> 
> 时间：2013-02-28T21:13:30.770
> 
> 标签：jquery, xml

我有一个 xml 文件，想检索 key 属性的内容。

xml文件的结构如下：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes" ?>
<MPL Version="2.0" Title="MCWS - Files - 2100">
  <Item>
    <Field Name="Key">1383</Field>
    <Field Name="Name">En la Planta de Tus Pies</Field>
    <Field Name="Artist">Alejandro Sanz</Field>
    <Field Name="Album">El Tren de los Momentos</Field>
    <Field Name="Genre">Latin</Field>
  </item>
<Item>
    <Field Name="Key">938</Field>
    <Field Name="Name">Something Beautiful</Field>
    <Field Name="Artist">Robbie Williams</Field>
    <Field Name="Album">Escapology</Field>
    <Field Name="Genre">Rock</Field>
  </item>
</MPL> 
```

我的 JQuery 函数如下所示：

```
function displaySongs() {
  $.ajax({
    type: "GET",
    url:"Files.xml",
    dataType: "xml",
    success: function(xml){
    var content = "";

    $(xml).find('Item').each(function(){
    var songId = $(this).find('Field[Name="Key"]');
    var songName = $(this).find('Field[Name="Name"]');

    content += "<div class=\"Song\">" + songName.text() + "</div>";
    $("#output").html(content);     
    }); 
  },
  error: function() {
    alert("An error occurred while processing XML file.");
  }
  });
} 
```

我的问题是我没有找到 Name="Name" 节点的内容，但得到了整个项目结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:20:04.230

jQuery 有一个特殊的函数用于返回属性值：

`$('Field').attr('Name');`

这应该返回属性的值。

但是，我从来没有在 XML 上使用过 jQuery，所以我不确定它会如何处理它。不过，您应该试一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:22:27.890

你应该做这个 ：

```
 var xml = $.parseXML(outputFromAJAXXML),
   $xml = $( xml ),
   $test = $xml.find('Field[Name="Name"]');
   console.log($test.text()); // This works 
```

上述输出，连接名称 -`En la Planta de Tus Pies`并`Something Beautiful` 作为一个单一的字符串

下面的作品完美。在此处查看 jsFiddle 链接[http://jsfiddle.net/k5sVt/15/](http://jsfiddle.net/k5sVt/15/)：

```
 $(outputFromAJAXXML).find('Field[Name="Name"]').each(function()
  {
   console.log('****'+$(this).text());
  }); 
```

# ruby-on-rails - Rails 使用哈希更新对象会产生未定义的方法 stringify_keys

> ID：15145755
> 
> 赞同：0
> 
> 时间：2013-02-28T21:13:34.143
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我有一个存储在一个名为的实例变量中的字段哈希：

```
 @series_from_fred 
```

当我将此哈希传递给

```
 Serial.create(@series_from_fred) 
```

新的 Serial（模型名称）“行”被创建，散列中的参数映射到串行模型行中的字段。

但是，当我尝试通过

```
 serial.update_attributes(@series_from_fred) 
```

请注意，“串行”是

```
 @serial.each do |serial| 
```

我收到以下错误：

```
NoMethodError in AdminsController#checkSerials

undefined method `stringify_keys' for #<Array:0x007fd1fe3085e0> 
```

有任何想法吗？

如果我进入 rails 控制台并输入“Serial”，就会发生这种情况

```
Serial(id: integer, series_name: string, realtime_start: string, 
realtime_end: string, title: string, observation_start: string, 
observation_end: string, frequency: string, frequency_short: string, 
units: string, units_short: string, seasonal_adjustment: string, 
seasonal_adjustment_short: string, last_updated: string, popularity: string, 
notes: text, created_at: datetime, updated_at: datetime) 
```

由于我在运行时从 api 获取数据，如果我进入 rails 控制台并输入“@series_from_fred”，我将返回“nil”。但是，使用 logger.info(@series_from_fred.to_s) 我可以在终端输出中“看到”@series_from_fred 的值。该输出是：

```
[{"realtime_start"=>"2013-02-28", "realtime_end"=>"2013-02-28", 
"title"=>"Reserve Bank Credit - Securities Held Outright", 
"observation_start"=>"1989-03-22", "observation_end"=>"2013-02-20", 
"frequency"=>"Weekly, Ending Wednesday", "frequency_short"=>"W", 
"units"=>"Billions of Dollars", "units_short"=>"Bil. of $", 
"seasonal_adjustment"=>"Not Seasonally Adjusted", "seasonal_adjustment_short"=>"NSA", 
"last_updated"=>"2013-02-22 08:32:54-06", "popularity"=>"47", "notes"=>"The amount of 
securities held by Federal Reserve Banks. This quantity is the cumulative result of 
permanent open market operations: outright purchases or sales of securities, conducted 
by the Federal Reserve. Section 14 of the Federal Reserve Act defines the securities 
that the Federal Reserve is authorized to buy and sell.", "series_name"=>"WSECOUT"}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:58:47.340

虽然我不确定为什么

```
Serial.create(@series_from_fred) worked 
```

和

```
serial.update_attributes(@series_from_fred) 
```

行不通。我为“解决”该问题所做的是将我从 api 获得的 xml 转换为通过以下方式的哈希：

```
@series_from_fred = Hash.from_xml(series_responseHolder) 
```

将此传递给：

```
serial.update_attributes(@series_from_fred) 
```

成功更新了串行模型中该记录/对象/行的参数。

# sql - 在表中排序

> ID：15145758
> 
> 赞同：0
> 
> 时间：2013-02-28T21:13:41.383
> 
> 标签：sql, postgresql, sql-order-by

我有一张桌子，我想根据 ' `road_id`' 列对其进行排序，但同时我希望相同 road_id 的所有行都按照它们的顺序排列。以下是我所指的表格：

![在此处输入图像描述](../Images/7c482569a8537c4fba000875b480dc8f.png)

有可能做这样的问题吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T21:15:31.773

SQL 中没有“它们的顺序”。

除非使用 明确选择，否则数据不会排序`ORDER BY`。

如果您想`id`在相同的范围内保留排序`road_id`，请使用以下命令：

```
SELECT  *
FROM    mytable
ORDER BY
        road_id, id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T21:15:51.950

**保证顺序的唯一方法是使用`ORDER BY`.** 如果您希望按特定顺序获得结果，请使用`ORDER BY`.

```
SELECT
  <stuff>
FROM
  <table>
ORDER BY
  road_Id, ID 
```

改变实际表中的顺序是没有意义的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T21:15:47.093

假设“剩余订单”是指按**id**排序，您将需要以下内容：

`ORDER BY road_id, id`

所以你的查询将是这样的：

```
SELECT * FROM YourTable ODER BY road_id, id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-28T21:17:59.627

我假设您想要执行以下操作：（假设这些记录存储在 SQL 数据库中......）

```
SELECT * FROM road_table ORDER BY road_id ASC, id ASC 
```

# drupal - 301重定向drupal到清理url

> ID：15145761
> 
> 赞同：0
> 
> 时间：2013-02-28T21:13:53.927
> 
> 标签：drupal, url-rewriting

我需要在 drupal 中将 301 重定向写入干净的 url。例如：

```
redirect 301 /old/mypage /new/mypage 
```

问题是，它重定向到 www.example.com/new/mypage?q=mypage 我需要它去 www.example.com/new/mypage

我在我的网站上启用了干净的网址。有什么办法可以解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T05:11:20.753

请检查[301 重定向](http://drupal.org/project/domain_301_redirect)以了解您的此要求。

谢谢

# python - 习惯养成人工智能

> ID：15145765
> 
> 赞同：0
> 
> 时间：2013-02-28T21:14:02.537
> 
> 标签：python, artificial-intelligence

我可能对此感到头疼，我可能问错了问题，但我走了。我正在寻找形成 AI 的习惯，基本上它只做一次，然后根据结果对其进行优先级排序，以便以后再做或以后避免。我的主要问题是我不确定如何存储动作。是否有任何好的、基本的、学习型 AI 或构建 AI 的指南？我为此使用python，但我只是在寻找基础知识，以便我能理解他们在做什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T21:46:46.830

您所谓的“习惯形成 AI”的传统术语是“强化学习”，其中状态和动作的估计值通过经验得到改进。[Q-learning](http://en.wikipedia.org/wiki/Q-learning)和[SARSA](http://en.wikipedia.org/wiki/SARSA)就是典型的例子。搜索这些，您应该会找到大量书籍、示例、教程、代码示例等。

# python - 如何在我想要的时间从终端 mac Os 运行 python 代码

> ID：15145768
> 
> 赞同：0
> 
> 时间：2013-02-28T21:14:12.233
> 
> 标签：python, macos, terminal

我是编程新手，我的问题很简单：如何在我想要的时间运行一堆代码？我的意思只是如何在 macOS 上的终端中编写程序或命令（我使用的是 10.7），它将在凌晨 3 点运行 python 代码。如果python程序在于：

```
/Users/name/Documents/prog.py 
```

要简单地从终端运行程序，我使用：

```
cd /Users/name/Documents/
python prog.py 
'hit Enter' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T21:17:20.783

你需要 cron：[http ://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

> Cron 是类 Unix 计算机操作系统中基于时间的作业调度程序。Cron 使用户能够安排作业（命令或 shell 脚本）在特定时间或日期定期运行。

# ruby - 没有rails的ruby应用程序中的授权

> ID：15145769
> 
> 赞同：0
> 
> 时间：2013-02-28T21:14:13.037
> 
> 标签：ruby, authentication, authorization

我正在尝试开发一个 ruby​​ 应用程序，它将作为 Web 服务运行，以提供存储在其数据库中的一些信息。所以客人必须能够获取信息，但是，一旦我没有任何东西可以注册用户，他们就不能做任何其他事情（PUT、DELETE、UPDATE..）。这是一个不需要 Rails 的简单应用程序，但我必须避免机器人的任何尝试或试图改变这个数据库中的东西的没有好心的人。我是唯一可以在此数据库中进行更改（例如更新）的人。

有人对这种情况有任何提示吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:16:53.743

根据您有什么样的可用性要求，理论上您可以使用`rails dbconsole`. 那么你根本不需要任何授权。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:24:34.660

rails 控制器决定了请求可以执行的访问：

假设您有一个产品控制器：

```
class ProductsController < ApplicationController

  def index
    @products = Product.all

     respond_to do |format|
       format.html  # index.html.erb
       format.json  { render :json => @products }
     end
  end

  def show
    ## Retrieve the product...
  end
end 
```

这仅提供所有产品和一种特定产品的信息

在您的路线中只允许索引和显示

```
resources :products, :only => [:index, :show] 
```

唯一的访问是查看所有产品和特定产品，无法创建或编辑。

# django - 带有外键的 Django 表单

> ID：15145774
> 
> 赞同：0
> 
> 时间：2013-02-28T21:14:33.657
> 
> 标签：django, django-models, django-forms, modelform

为了节省一些打字，我用外键制作了一个模型，我认为这样看起来也更干净：

```
class Model_Sub( models.Model ):
    some_fields

class Model_Main( models.Model ):
    field_1 = models.ForeignKey( Model_Sub, related_name="sub_field_1" )
    field_2 = models.ForeignKey( Model_Sub, related_name="sub_field_2" ) 
```

但是当我希望我的用户提交表单时，我想要子模型的新实例，而不是来自查询集。我希望 Model_Sub 作为表单无缝包含在主模型中。无论如何使用ModelForm来实现这一点？

谢谢您的帮助

大卫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:06:56.097

我认为您想使用`Model_Sub`班级中的两种模型形式，然后使用它们来创建`Main_Model`对象

```
class SubForm(models.ModelForm):
    class Meta:
        model = Sub_Model

def your_view(request):
    if request.method == 'POST':
        form1 = SubForm(request.POST, prefix='no1')
        form2 = SubForm(request.POST, prefix='no2')
        if form1.is_valid() and form2.is_valid():
           main_model = Main_Model(field1 = form1.save(),
                                   field2 = form2.save())
           main_model.save()
           #...
     else:
         form1 = SubForm(prefix = 'no1')
         form2 = SubForm(prefix = 'no2')
     return render(request, 'your_template.html', {'form1': form1,
                                                   'form2': form2}) 
```

# zend-framework2 - Zf2。文字路线 - 我将如何确保查询参数存在并且是数字的？

> ID：15145781
> 
> 赞同：1
> 
> 时间：2013-02-28T21:15:04.817
> 
> 标签：zend-framework2

路由时 - 我如何确保某些查询参数存在并且是数字的？
例如 - 这是路线：

```
'route' => array(
    'type' => 'literal',
    'options' => array(
        'route' => '/simple_route',
        'defaults' => array(
            'controller' => 'Application\Controller\IndexController',
            'action' => 'simpleRoute'
        )
    ),
), 
```

我如何确保`var1`和`var2`查询参数存在并且是数字的？如果不存在 - 我将如何将它们设置为 routematch 中的一些默认值？

这应该工作：

```
/simple_route?var1=10&var2=15 
```

这应该有效：

```
/simple_route?var1=20&var2=352 
```

但是当不是数字时 - var2 应该设置为一些数字默认值：

```
/simple_route?var1=10&var2=aabbcc 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:09:50.687

查询参数不是路由机制的一部分并且被路由器忽略，因此您不能在路由器配置中对它们设置任何约束。您可以在操作中检查查询参数的正确性。IE

```
public function myAction()
{
    $var1 = $this->getRequest()->getQuery('var1');
    if ($var1 === null || !is_numeric($var1)) {
        throw new \InvalidArgumentException('var1 is invalid');
    }
} 
```

**编辑：**

似乎确实有一条[查询路线](https://packages.zendframework.com/docs/latest/manual/en/modules/zend.mvc.routing.html#zend-mvc-router-http-query)，但不可能在参数上添加约束。所以我验证参数的解决方案仍然是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-06T18:05:42.340

***[出于安全原因](http://framework.zend.com/security/advisory/ZF2013-01)，不推荐使用查询路由并且不应使用（它实际上也不匹配任何东西，因此它不能解决手头的问题）。***

TLDR；这种模式不是 RESTful 的，所以 ZF2 的人不想鼓励它。相反，推荐的策略是创建一个基于查询参数重定向的操作。我实际上试图替换这种方法，但已经恢复到它。

===

如果你想/需要支持它，我在搜索过程中开发了一个具有这些功能的[自定义路由。](https://github.com/claytondaley/LegacyRS/blob/83c07c7e6d07578a9d600e7457c554ef288cd197/src/LegacyRS/Router/QueryFilter.php)你可以做类似的事情。

不幸的是，有一些陷阱。关键的一个是当它跑出路径时，Route 会停止寻找。例如，如果您将 uri 发送`login.php?logout=true`到 的 Literal 路由`login.php`，它将：

*   匹配 login.php
*   意识到没有路径可以匹配并且
*   停止搜索（即使 $may_terminate 设置为 false）

这意味着它永远不会到达 QueryFilter 有任何机会匹配`logout=true`。我发现克服这个问题的最好方法是留下一个角色。例如，Literal`login.ph`将留下一个 final`p`需要匹配并继续搜索和匹配 QueryFilter。这很丑陋，但它有效。

当我决定不使用 QueryFilter 时，我放弃了它。如果您决定使用它而不是 RESTful 反对意见，我建议您进行一些升级：

*   替换`exists`为`contains`使用模式`param => bool`。这会让您说查询字符串必须包含 ( `true`) 或排除 ( `false`) 特定的`param`.
*   将`array_key_exists`逻辑添加到该`constraints`部分。

OP 的情况可以通过将`contains`规则`var1 => true`与`constraints`规则相结合来解决`var1 => '[0-9]+'`。

# javascript - 如何记录闭包

> ID：15145782
> 
> 赞同：3
> 
> 时间：2013-02-28T21:15:11.350
> 
> 标签：javascript, documentation, closures, jsdoc

我正在尝试在一个名为 User 的类中记录功能，该类位于闭包内 - 如何使用 JsDoc3 做到这一点？

这是我所拥有的：

```
/**
    @class User
    @classdesc This is the class that describes each user.
*/
(function($){

    var _defaults = {
        'first_name': '',
        'last_name': ''
    };

    /**
        @constructor
    */
    function User(options) {
        this.options = $.extend({}, _defaults, options);
    }

    /**
        @method
        @desc Returns the combined first name and last name as a string
        @returns {string}
    */
    User.prototype.getName() = function(){
        return this.options.first_name + this.options.last_name;
    };

    window.User = User;

}(jQuery)); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-04T17:17:18.793

我用这种方法取得了成功。（添加到样板插件中，因此包含 MIT 许可证注释）

参见原型上@global + @class 和@global 的使用。这似乎做到了。

代码复制如下：请享受并让它变得更好。

```
/**
* jQuery lightweight plugin boilerplate
* Original author: @ajpiano
* Further changes, comments: @addyosmani
* Licensed under the MIT license
*/

;(function ( $, window, document, undefined ) {

var pluginName = "Application",
    defaults = {
        propertyName: "value"
    };

/**
 * @global
 * @class Application
 * @description MASTER:  Sets up and controls the application
 * 
 * @returns Object
 */
function Application( element, options ) {
    this.element = element;
    this.options = $.extend( {}, defaults, options) ;
    this._defaults = defaults;
    this._name = pluginName;
    this.init();
     window[pluginName] = this;
}

/** @global */
Application.prototype = {

    /**
    * @description call pre-life initialisations and tests here
    */
    init: function() {

        var that = this;
       that._build();
       that._setNotifications();
    },

    /**
    @description Set up a pub sub for global notifications such a state-changes.
    */
    _setNotifications: function(el, options) {
        console.log('Application=>setNotifications()');
    },

    /**
    @description All environment setup done we now call other plugins.
    */
    _build: function(el, options) {
        console.log('Application=>build()');
    }
};

$.fn[pluginName] =  function ( options ) {
    return this.each(function () {
        if (!$.data(this, "plugin_" + pluginName)) {
            $.data(this, "plugin_" + pluginName,
            new Application( this, options ));
        }
    });
};

})( jQuery, window, document ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T19:44:02.423

我不知道为什么 jsdoc3 决定忽略闭包中的文档，但至少一种解决方法是使用`@memberOf`标签明确地告诉方法属于哪个类：

```
/**
 * @memberOf User
 * Returns the combined first name and last name as a string
 * @returns {string}
 */
User.prototype.getName = function(){ 
```

另一件需要注意的是，您不需要使用`@desc`and`@classdesc`标签——这些标签是由 jsduc3 本身自动添加的，这些标签的存在更像是一个实现细节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-01-04T15:10:26.673

在我的情况下，闭包位于单个文件中，并使用字典导出其对象，因此在概述中使用 @file 和 @exports DicName 标记以及字典的 @namespace 标记可以使它们记录在案。

```
/**
    @file myFileWithClosure
    @exports DicName
*/
(function($){

    /** @namespace */
    DicName = {};

    ... 
```

不需要全局。

# sqlite - cocos2d：SQLite 还是核心数据？- 需要重新设计数据库，因为我当前的应用程序非常慢或有时在没有 WiFi 的情况下崩溃

> ID：15145783
> 
> 赞同：-1
> 
> 时间：2013-02-28T21:15:13.970
> 
> 标签：sqlite, core-data

我决定开发内部数据库，而不是从远程服务器解析 JSON 数据。我做了一些搜索，需要知道哪个更适合我的 QUIZ APP、SQLite 或 Core Data？我在数据库编程方面不是很有经验，所以如果提供一些学习它们的链接，那对我来说将是一个很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:22:31.523

一般不可能回答这个问题。两者都很好，这取决于你在做什么。概括地说：

*   Core Data 的设计理念是直接创建、读取、写入和搜索模型对象。尽管它通常在内部使用 SQLite，但这是一个实现细节——它*不仅仅是*一个 SQLite 包装器。[您可以在 Apple 的Core Data Programming Guide](http://developer.apple.com/library/mac/#documentation/cocoa/Conceptual/CoreData/cdProgrammingGuide.html)中了解它，尤其是“技术概述”和“基础知识”部分。
*   SQLite 就是 SQL。您在一个文件中获得了一个关系数据库，您可以使用通常的 SQL 样式创建、选择和更新记录。SQLite 有自己的原生 API，您可以在[SQLite 主页上](http://www.sqlite.org)阅读。有几个 Objective-C 风格的包装器通常更容易在 iOS 和 Mac 应用程序中使用[——PLDatabase](http://code.google.com/p/pldatabase/)和[FMDB](https://github.com/ccgus/fmdb)。

哪一个最好取决于您需要如何访问您的数据。在任何情况下都不是正确的。

# android - Google Maps 在 Android 上运行良好，但我仍然收到错误“找不到类 'maps.ik'，从方法 maps.z.ag.a 引用”

> ID：15145789
> 
> 赞同：15
> 
> 时间：2013-02-28T21:15:34.500
> 
> 标签：android, android-maps, android-library, google-maps-mobile, android-debug

通过下载库，将其添加到工作区，然后将其作为库引用，我让 Google Maps Android API v2 在我的 Android 应用程序上完美运行。

但是一旦包含地图片段的活动开始，我仍然会收到此错误

```
Could not find class 'maps.i.k', referenced from method maps.z.ag.a 
```

顺便说一句，我正在使用支持地图片段

无论如何，这个错误似乎不会影响我，也不会使应用程序崩溃或任何东西，我应该费心修复它吗？

**添加了清单** PS E_SelectJourney 是我显示和使用地图的地方

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.HelloMap.AndroidApp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <permission
        android:name="com.HelloMap.AndroidApp.permission.MAPS_RECEIVE"
        android:protectionLevel="signature" />

    <uses-permission android:name="com.HelloMap.AndroidApp.permission.MAPS_RECEIVE" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.GET_ACCOUNTS" />

    <application
        android:allowBackup="true"
        android:configChanges="orientation"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:screenOrientation="portrait"
        android:theme="@style/Theme.Sherlock" >
        <uses-library
            android:name="com.google.android.maps"
            android:required="true" />

        <activity
            android:name="com.HelloMap.AndroidApp.A_SplashScreen"
            android:configChanges="orientation"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name="com.HelloMap.AndroidApp.B_TourSlides"
            android:configChanges="orientation"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.HelloMap.AndroidApp.C_RegisterLogin"
            android:configChanges="orientation"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity android:name="com.facebook.LoginActivity" />
        <activity
            android:name="com.HelloMap.AndroidApp.D_RegistrationPage"
            android:configChanges="orientation"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.HelloMap.AndroidApp.E_SelectJourney"
            android:configChanges="orientation"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.HelloMap.AndroidApp.F_EnterFromToAddress"
            android:configChanges="orientation"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.HelloMap.AndroidApp.G_PickDateTime"
            android:configChanges="orientation"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.HelloMap.AndroidApp.H_ConfirmContact"
            android:configChanges="orientation"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.HelloMap.AndroidApp.I_MobileVerification"
            android:configChanges="orientation"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.HelloMap.AndroidApp.J_AvailableTaxis"
            android:configChanges="orientation"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.HelloMap.AndroidApp.K_SpecialRequirements"
            android:configChanges="orientation"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.HelloMap.AndroidApp.L_JourneyOverview"
            android:configChanges="orientation"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.HelloMap.AndroidApp.M_PaymentOptions"
            android:configChanges="orientation"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>
        <activity
            android:name="com.HelloMap.AndroidApp.N_Confirmation"
            android:configChanges="orientation"
            android:label="@string/app_name"
            android:screenOrientation="portrait" >
        </activity>

        <meta-data
            android:name="com.google.android.maps.v2.API_KEY"
            android:value="AIzaSyBoWsWNaUTWyHxGuJuNehzfbNvyTv1zIeA" />
        <meta-data
            android:name="com.facebook.sdk.ApplicationId"
            android:value="141236504136755" />
    </application>

</manifest> 
```

**添加了日志猫**

```
03-26 16:57:14.897: W/dalvikvm(27771): Unable to resolve superclass of Lmaps/p/s; (427)
03-26 16:57:14.897: W/dalvikvm(27771): Link of class 'Lmaps/p/s;' failed
03-26 16:57:14.897: W/dalvikvm(27771): Unable to resolve superclass of Lmaps/y/bo; (3820)
03-26 16:57:14.897: W/dalvikvm(27771): Link of class 'Lmaps/y/bo;' failed
03-26 16:57:14.897: W/dalvikvm(27771): Unable to resolve superclass of Lmaps/i/k; (4208)
03-26 16:57:14.897: W/dalvikvm(27771): Link of class 'Lmaps/i/k;' failed
03-26 16:57:14.897: E/dalvikvm(27771): Could not find class 'maps.i.k', referenced from method maps.z.ag.a
03-26 16:57:14.897: W/dalvikvm(27771): VFY: unable to resolve new-instance 3540 (Lmaps/i/k;) in Lmaps/z/ag;
03-26 16:57:15.567: W/SchedPolicy(27771): add_tid_to_cgroup failed to write '' (Invalid argument); background=0 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-26T15:56:55.117

删除此代码：

```
 <uses-library
        android:name="com.google.android.maps"
        android:required="true" /> 
```

首先，它不是必需的`Google Map API V2`。

接下来，尝试将此代码移动到结束`application`标记之前：

```
 <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyBoWsWNaUTWyHxGuJuNehzfbNvyTv1zIeA" /> 
```

像那样：

```
 <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="AIzaSyBoWsWNaUTWyHxGuJuNehzfbNvyTv1zIeA" />
</application> 
```

最后检查您是否打开了`right API service`in `Google API Console`：

![在此处输入图像描述](../Images/b7be253aa4daa8f9a2070e3184c838b0.png)

您可以从我写的这两个博客文章中获得有关这两个主题的更多信息：

[谷歌地图 API V2](https://blog-emildesign.rhcloud.com/?p=435)

和：

[谷歌地图 API V2 密钥](https://blog-emildesign.rhcloud.com/?p=403)

**更新：**

对于许可检查此链接：

[http://android-er.blogspot.co.il/2012/12/include-open-source-software-license.html](http://android-er.blogspot.co.il/2012/12/include-open-source-software-license.html)

基本上在您的应用程序的某个地方，无论是活动还是对话框，您都必须运行它：

```
String LicenseInfo = GooglePlayServicesUtil.getOpenSourceSoftwareLicenseInfo(getApplicationContext()); 
```

并以某种形式呈现结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-26T06:28:33.430

我不确定，但另一个问题的错误中包含相同的错误，在这种情况下，应用程序未正确签名。如果这是您需要在专业部署应用程序之前修复它的问题，因为它只能在调试模式下工作。

[https://stackoverflow.com/a/15465572/1873970](https://stackoverflow.com/a/15465572/1873970)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-31T16:49:54.070

你不应该担心那些 Dalvik 警告。我相信这些会出现，因为 Google 地图库被编译为高于手机上运行的 API 级别。某些在更高 API 上可用的类在您的手机上不可用，但库必须有一些代码来弥补这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-26T06:32:52.113

试试这个指南。[创建您的 Google 地图应用程序](https://blog-emildesign.rhcloud.com/?p=435)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-20T10:29:36.577

我终于做到了！如果您使用的是 SupportFragmentMap，我认为您应该在 api 控制台上打开 google maps android v2，因为我使用的是 Google Maps v2，它与 FragmentMap 配合良好，但是当我更改 SupportFragmentMap 以包括 froyo 和姜饼兼容性时，它没有不要跑。我花了 4 个紧张的时间搜索、尝试、编码、更改密钥、库、更新......我刚刚打开了 Google Android Maps v2 并关闭了 Google Maps v2，现在它正在工作！非常感谢。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-26T06:18:23.433

```
<uses-library android:name="com.google.android.maps" /> 
```

在清单文件中添加这个库。

# php - 使用 Mac OSX Lion Webserver 将 PHP 页面加载为问号

> ID：15145796
> 
> 赞同：0
> 
> 时间：2013-02-28T21:16:11.630
> 
> 标签：php, html, macos, webserver

我的 Mac OSX Lion Webserver 有一个非常奇怪的问题。我有一个网站，可以在我付费的网络服务器上完全运行，但现在我正试图在我自己的计算机上本地运行它以进行开发。我已经将我的 Mac 网络服务器设置为使用 PHP5 并使用 Mysql，并且我已将所需的所有文件复制到正确的文件夹中。大多数页面都可以工作，.html 和 .php 文件，但是有一个页面，当我尝试加载它时，只会作为问号加载。从字面上看，有一个“？” 在浏览器窗口的左上角，chrome 开发人员工具中没有调试消息，当我查看源代码时，唯一可用的 html 是问号和通用 html 格式化标签。

更奇怪的是，如果我删除文件中的所有内容（具有相同文件名的空白文件）并加载它，它会加载相同的问号，这就是为什么我不费心发布任何代码的原因。此外，如果我将文件重命名为 .html，它会正确加载（当然不使用 php）。

文件名是 login.php，我不认为文件名很重要，因为我在网站的另一部分有一个不同的 login.php 可以正常工作。

如果有人对此有任何见解，我将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T19:21:26.857

我希望没有其他人有这个问题，但这是我解决它的方法。

在做了一堆看似随机的事情之后，我发现“问号”仅在页面未修改时才会出现。即使稍作修改，问号也会消失，变成空白页。最终我所做的只是删除最后一个标签中的“>”并再次输入，页面就可以正常工作了！我想它看起来是对的，但角色是腐败的什么的……听起来很愚蠢，但就是这样。

# asp.net-mvc - 在 IE 8、IE9 中调用 ajax 后，asp.net mvc html 表损坏，但在其他浏览器中工作正常

> ID：15145798
> 
> 赞同：2
> 
> 时间：2013-02-28T21:16:26.223
> 
> 标签：asp.net-mvc, internet-explorer, jquery, html-table

我对使用 ajax 调用从服务器获取的 html 表有问题：有时从服务器获取的表中的某些行呈现如下：

```
---------------------
|   |   |   |   |   |
-------------------------
|   |   |   |   |       |
-------------------------
|   |   |   |   |   |
--------------------- 
```

或者

```
---------------------
|   |   |   |   |   |
-------------------------
|       |   |   |   |   |
-------------------------
|   |   |   |   |   |
--------------------- 
```

从服务器检索的 HTML 中不存在 colspan。

我在我的项目中使用 asp.net mvc 4。

谢谢！

# javascript - 使用 Javascript 设置溢出属性

> ID：15145807
> 
> 赞同：2
> 
> 时间：2013-02-28T21:16:50.017
> 
> 标签：javascript, css, overflow

我需要这个功能来启用垂直滚动但不是水平滚动。

这不起作用：

```
function scrollFunction() {
        // Scroll to top 
    document.getElementsByTagName('body')[0].style.overflow-y='auto';
} 
```

虽然这样做，但它同时支持垂直和水平滚动。

```
function scrollFunction() {
    // Scroll to top
    document.getElementsByTagName('body')[0].style.overflow='auto';
} 
```

如何正确指定溢出-y？谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T21:17:19.717

复合样式属性用驼峰式表示法（第一个字母很小）编写：

```
document.getElementsByTagName("body")[0].style.overflowY = "auto"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T21:20:59.333

作为 VisioN 答案的替代方案，您可以使用方括号和字符串来访问它：

```
document.getElementByTagName("body")[0].style['overflow-y'] = "auto"; 
```

如果您不知道 camelCase 是什么，这很好。

# deployment - Worklight wlapp 不会部署

> ID：15145811
> 
> 赞同：0
> 
> 时间：2013-02-28T21:17:16.880
> 
> 标签：deployment, ibm-mobilefirst

我已经多次尝试使用 Worklight v5.0.5 将 wlapp 应用程序部署到 Worklight 服务器。它用来工作。但是，突然，每当我尝试重新安装应用程序时，worklight 服务器都会向我显示一个错误。它说由于“错误”而无法部署。这就是我在错误消息中得到的全部内容。linux上worklight服务器的日志文件在哪里？我似乎也找不到。

编辑：

在 WAS v8 下运行 Worklight Server v5.0.5 时存在错误。Worklight Server 认为在部署时未在数据库中找到该应用程序。websphere 中也有挂起的线程。解决此问题的唯一方法是完全重新启动 WebSphere。因此，如果您无法部署并且收到基本的“错误”消息。只需重新启动 WebSphere。对不起用户，我必须在重新启动 WAS 时关闭移动应用程序。哎呀。我期待更好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T21:04:39.727

WebSphere 中似乎存在阻止 wlapp 部署的错误。需要重新启动。有关详细信息，请参阅上面的注释。

# python - 在 Python 中，“and”语句还是 all() 更快？

> ID：15145823
> 
> 赞同：2
> 
> 时间：2013-02-28T21:17:48.977
> 
> 标签：python

当测试多个条件是否为真时，是`and`语句还是`all()`更快？例如：

```
if '1234'.isdigit() and '4567'.isdigit() and '7890'.isdigit(): 
    print "All are digits!" 
```

或者

```
if all(['1234'.isdigit(), '4567'.isdigit(), '7890'.isdigit()]): 
    print "All are digits!" 
```

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-28T21:18:50.720

`and`s 更快，没有列表创建和函数调用。

```
In [10]: %timeit '1234'.isdigit() and '4567'.isdigit() and '7890'.isdigit()
1000000 loops, best of 3: 186 ns per loop

In [11]: %timeit all(['1234'.isdigit(), '4567'.isdigit(), '7890'.isdigit()])
1000000 loops, best of 3: 323 ns per loop 
```

`and`s 甚至不会不必要地评估事物：

```
In [1]: def x():
   ...:     print 'call'
   ...:     return False
   ...:

In [2]: x() and x()
call
Out[2]: False

In [3]: all([x(), x()])
call
call
Out[3]: False 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T21:20:54.217

第二个评估所有条件，将这些布尔值放入列表中，*然后*检查它们是否全部为真。

另一方面，第一个只是一个接一个地检查它们并在第一个错误条件（如果有的话）处停止。正如 Pavel 的回答所示，第一个肯定更快。

您还可以使用发电机，它可以让`all`短路：

```
all(str.isdigit(s) for s in your_strings) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T21:25:01.453

如果您真的想要处理 3 个静态值的最快方法，并且几十纳秒的差异在您的代码中实际上很重要：

```
if True:
    print "All are digits!" 
```

或者，甚至更快：

```
print "All are digits!" 
```

在任何情况下，性能最重要，您将拥有大量和/或动态的值集，您根本无法使用 来做到这一点`and`，除非创建一个显式`for`循环：

```
value = True
for s in strings:
    value = value and s.isdigit()
    if not value:
        break
if value:
    print "All are digits!" 
```

你可以立即看到它`and`根本没有帮助：

```
for s in strings:
    if not s.isdigit():
        break
else:
    print "All are digits!" 
```

但是如果你想用 来更快地做事情`all`，你可以使用生成器表达式（或`map`/`imap`调用）而不是列表推导式，它同样快速且易读，具有大的动态序列和小的静态序列：

```
if all((x.isdigit() for x in ('1234', '4567', '7890')):
    print "All are digits!"

if all((x.isdigit() for x in strings):
    print "All are digits!" 
```

如果序列非常大，并且某些值可能是假的，这将比任何涉及构建`list`所有真/假值的方法都要快得多。

# php - Cakephp - 从数据库打印（物理）数据

> ID：15145824
> 
> 赞同：1
> 
> 时间：2013-02-28T21:17:50.367
> 
> 标签：php, file, cakephp, cakephp-1.3

我很难完成这项工作，我需要的是打印数据库中的合同，当我说打印时，是物理打印。

我可以使用它访问我想要打印的内容

```
<?php echo @$contrato['Content']['text']; ?> 
```

但我没有别的办法，比如获取此信息，保存到临时文件然后打开并打印？我迷路了。

我知道我是否使用：

```
<script>window.print()</script> 
```

它会打印我不想要的整个页面，我想打印那个 php 代码给我带来的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:20:53.457

> 我没有别的办法，比如，获取此信息，保存到临时文件，然后打开并打印？

将其打印到页面并使用此 javascript 从浏览器中打印：

```
<?php echo @$contrato['Content']['text']; ?>
<script>window.print()</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T23:03:15.503

如果内容是纯文本，则创建一个仅包含“文本”字段内容的视图并禁用该视图/操作的布局，或者根本不使用视图，而只是回显来自控制器的结果例如

*在你的控制器中*

```
public function printable($id)
{
     // (retrieve your data from the database here)
     // ...

    $this->layout = false;
    $this->autoRender = false;
    echo $contrato['Content']['text'];
} 
```

在您现有/其他视图中，链接到可打印版本；

```
 <?php 
    echo $this->Html->link(
       'printable version', 
       array(
           'action' => 'printable',
           0 => $id  // needs to be present as a viewVar or some other way
       ),
       array('target' => '_blank')
    );
 ?> 
```

使用时需要手动使用 CTRL+P 或 'print'

**一些注释/备注**

如果内容是纯文本，则以浏览器使用的默认字体打印文本。

从浏览器打印 HTML 时，您无法*控制*页面打印的确切方式。尽管 CSS 有各种“打印”选项，但在大多数情况下，浏览器会在打印时附加页眉和/或页脚（例如，打印页面的 URL 和页码）。

*完全控制*输出布局（包括字体、页面大小和抑制页眉/页脚）的唯一选项是生成内容的 PDF 文件。存在各种使用 PHP 将 HTML 转换为 PDF 的库。可以在这里找到一个不错的 CakePHP 插件：

[https://github.com/ceeram/CakePdf](https://github.com/ceeram/CakePdf)

# apache - apache重写规则，查看其他文件夹

> ID：15145826
> 
> 赞同：1
> 
> 时间：2013-02-28T21:17:54.433
> 
> 标签：apache, mod-rewrite

好的，所以我的 httpd.conf 上有这个重写规则

```
<Directory /var/www/html/dev/html5>
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]

RewriteCond %{QUERY_STRING} ^_escaped_fragment_=/?(.*)/(.*)$
RewriteRule ^.*$ snapshots/playlist-%2\.html [NC,L,PT]

RewriteCond %{HTTP_USER_AGENT} ^Mozilla(.*)MSIE\ 9.0(.*)$ [NC]
RewriteRule ^(.*)$ http://%{HTTP_HOST}/dev/html5/#!/$1 [R,NC,NE,L]

RewriteRule ^.*$ index.html [NC,L,PT] 
```

我感兴趣的是，当我在查询字符串中有 _escaped_fragment

```
RewriteCond %{QUERY_STRING} ^_escaped_fragment_=/?(.*)/(.*)$ 
```

我想查找文件夹快照，但该文件夹不在 html5 文件夹内，是上一级的，那么我该如何查找该文件夹？像这样

```
RewriteRule ^.*$ ../snapshots/playlist-%2\.html [NC,L,PT] 
```

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:05:22.240

首先，您需要通过将其添加到您的虚拟主机配置中来允许该文件夹权限

换句话说，您需要配置 apache 以允许该文件夹，因此就像`<directory icons>`默认`<directory error docs>`设置一样。也许将其设为别名：

```
Alias /snapshots/ "/var/www/html/dev/snapshots/"
<Directory "/var/www/html/dev/snapshots/">
    Options Indexes MultiViews FollowSymLinks
    AllowOverride All
    Order allow,deny
    Allow from all
</Directory> 
```

然后，一旦它被别名，它将在 example.com/snapshots/ 上可用，所以

```
RewriteRule ^.*$ /snapshots/playlist-%2\.html [NC,L,PT] 
```

# perl - Perl 删除匹配模式并将其余的存储到变量中

> ID：15145829
> 
> 赞同：1
> 
> 时间：2013-02-28T21:18:03.560
> 
> 标签：perl

我想从行尾开始删除匹配模式并将行的其余部分存储到一个变量中如何在 perl 中执行？

例如：

```
$ROOT = "/home/usr/bin"; 
```

我想从上面的 $ROOT 变量中删除“/bin”并打印/存储其余部分。下面的代码会起作用吗？

```
$ROOT =s/^(.*?)(?=\/bin)/$1/g
print $ROOT; 
```

上面的代码会在输出下面打印吗？

```
/home/usr 
```

请注意，由于我是新手，因此上述建议可能有误。请帮帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-28T21:31:15.153

或者你可以使用[File::Basename](http://perldoc.perl.org/File/Basename.html)：

```
use strict;
use warnings;
use File::Basename;

my $ROOT = "/home/usr/bin";
print dirname($ROOT); 
```

输出：

```
/home/usr 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-28T21:20:56.627

尝试这个 ：

```
my $ROOT = "/home/usr/bin";
$ROOT =~ s!/bin$!!; # the delimiter is "!" to avoid escaping "/"
print $ROOT; 
```

就像泡沫所说的那样，您可以使用`perl`解释器测试您的正则表达式。我向您推荐交互式`perl`外壳[`perlconsole`](https://metacpan.org/module/SUKRIA/perlconsole-0.4/perlconsole)或[`re.pl`](https://metacpan.org/module/Devel::REPL)

`perlconsole`：

![在此处输入图像描述](../Images/aac4f08e44c44cb0c14b8e36d77c2837.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-28T23:08:53.530

你已经通过使用前瞻来打破它。如果你只写

```
$ROOT =~ s/^(.*)\/bin/$1/ 
```

那么它会起作用。要删除任何路径的最后一段，请编写

```
$ROOT =~ s|/[^/]*$|| 
```

# c++ - 在 C++ 中创建独立的 Solidworks 应用程序

> ID：15145832
> 
> 赞同：3
> 
> 时间：2013-02-28T21:18:35.730
> 
> 标签：c++, api, solidworks

我正在尝试创建一个独立的 Solidworks 应用程序（我希望我的 c++ 程序在 Solidworks 中创建新的几何图形，在后台运行）。我正在使用 msvc++ express 2010。

我已尝试实现[此处建议的以下代码](http://help.solidworks.com/2010/English/api/sldworksapiprogguide/GettingStarted/CPP_.NET_Standalone_and_Add-in_Applications.htm?id=937e8b68d86d4e9d8ff1e25311fb0fba#Pg0)

```
//Import the SolidWorks type library
#import "sldworks.tlb" raw_interfaces_only, raw_native_types, no_namespace, named_guids

//Import the SolidWorks constant type library    
#import "swconst.tlb"  raw_interfaces_only, raw_native_types, no_namespace, named_guids  

int _tmain(int argc, _TCHAR* argv[])  
{
//Initialize COM
CoInitialize(NULL);

//Use ATL smart pointers       
CComPtr<ISldWorks> swApp;

//Create an instance of SolidWorks
HRESULT hres = swApp.CoCreateInstance(__uuidof(SldWorks), NULL, CLSCTX_LOCAL_SERVER);

//My Code here

//Shut down SolidWorks    
swApp->ExitApp();

// Release COM reference
swApp = NULL;

//Uninitialize COM
CoUninitialize();

return 0;
} 
```

它不会抱怨库的导入语句，但由于以下错误而无法构建：

```
1>main.cpp(19): error C2065: 'CComPtr' : undeclared identifier
1>main.cpp(19): error C2275: 'ISldWorks' : illegal use of this type as an expression
1>          c:\users\nolan\documents\c++\solidworks_test\solidworks_test\debug\sldworks.tlh(7515) : see declaration of 'ISldWorks'
1>main.cpp(19): error C2065: 'swApp' : undeclared identifier
1>main.cpp(22): error C2065: 'swApp' : undeclared identifier
1>main.cpp(22): error C2228: left of '.CoCreateInstance' must have class/struct/union
1>          type is ''unknown-type''
1>main.cpp(26): error C2065: 'swApp' : undeclared identifier
1>main.cpp(26): error C2227: left of '->ExitApp' must point to class/struct/union/generic type
1>          type is ''unknown-type''
1>main.cpp(29): error C2065: 'swApp' : undeclared identifier 
```

显然我错过了一些东西，但我无法弄清楚那是什么。我觉得它与 ATL 有关，但我不确定......请帮忙。

谢谢

**编辑：**

好的，我已经下载了 windows development kit 8.0，所有的文件都在那里。我已经在属性页中静态链接到 ATL，我还尝试链接目录中的库文件：`C:\Program Files\Windows Kits\8.0\Lib\Atl`

但是那些头文件无处可寻……请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T15:43:22.560

好的，所以我找到了解决方案。它可能不是最优雅的，但它确实有效。

不幸的是，WDK 中的 ATL 目标文件库无济于事，因为找不到头文件。

因此，经过更多挖掘后，我发现完整版的 Visual Studio（不是 Express）允许您使用 ATL 库。事实证明，我很幸运，因为 Microsoft 向学生提供了完整版本的 Visual Studio（请参阅[Dreamspark](https://www.dreamspark.com/Student/Default.aspx)网页），而我恰好是一名学生。:)

因此，在下载、安装和安装任何服务包（我只有一个）之后，我只需要再采取一个步骤来让它工作：

我导航到 Property Pages -> C/C++ -> General 我包含了可以找到 .tlb 文件的目录（在我的例子中是 C:\Program Files\SolidWorks Corp\SolidWorks）

然后我运行以下代码：

```
//main.cpp

#include <afxwin.h>
#include <iostream>

#import "sldworks.tlb"

void main()  
{
//Initialize COM
CoInitialize(NULL);

//Use ATL smart pointers       
CComPtr<SldWorks::ISldWorks> swApp;

//Create an instance of SolidWorks
HRESULT hres = swApp.CoCreateInstance(__uuidof(SldWorks), NULL, CLSCTX_LOCAL_SERVER);

//Make the instance visible to the user
swApp->put_Visible(VARIANT_TRUE);
std::cin.get();

//Shut down SolidWorks    
swApp->ExitApp();

// Release COM reference
swApp = NULL;

//Uninitialize COM
CoUninitialize();
} 
```

就是这样。Solidworks 在程序运行时打开（附加`put_Visible`功能允许用户查看窗口），并在用户在控制台窗口中按 Enter 键时关闭且不抱怨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:33:03.743

看起来编译器在查找某些事物的定义时遇到了麻烦，特别`CComPtr`是作为 ATL 的一部分（正如您所提到的）。我没有使用过 ATL，但是在 Visual Studio 中转到您的项目属性并确保您将“ATL 的使用”设置为适当的静态或动态是否可行？

正如 Jerry 所提到的，您还需要包含相关的标题。

# c++ - 指针和数组上 operator[] 的索引参数类型

> ID：15145834
> 
> 赞同：4
> 
> 时间：2013-02-28T21:18:53.263
> 
> 标签：c++

指针上的运算符 [] 的自然参数类型是什么，如：

```
struct foo
{
  value_t operator[](<TYPE?> i)
    { return data[i]; }

  value_t * data;
}; 
```

我知道我可以输入任何整数类型，但是数组索引的自然类型是什么，即。不会导致隐式转换的那个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-28T21:59:48.697

`operator []`on 指针可以是任何整数表达式

一般来说，`ptrdiff_t`从技术上讲，这是您想要的，如果意图是`data`并且`data + i`是任意两个任意指针中的任意两个指针和任意内存块，因为`ptrdiff_t`它被定义为用于保存两个指针之间差异的有符号类型（但是，它是不保证不会溢出：`ptrdiff_t`在具有 32 位指针的机器上通常是 32 位，而不是下一个更高的有符号整数大小）

In `std::vector<T>`, `size_t`（通常）被使用，因为`std::vector`有一个额外的限制，即指针指向块的开头，并且索引只允许在分配的块内，它不能大于`size_t`定义，并且不允许负索引。`size_t`可以小于`ptrdiff_t`或`uintptr_t`（可以保存指针的无符号整数类型），例如在内存分配仅限于一个段但指针不是的分段架构上。

现在，如果意图是，`data`并且`data + i`是同一内存块的一部分，但不一定是这样`data + i >= data`，那么我认为`size_t`在标准 C++（`ssize_t`是 POSIX 扩展），但您可以使用它，`ptrdiff_t`因为它保证至少与您想要的一样大。

不能保证`sizeof(long)`或与或`sizeof(int)`有任何关系`sizeof(ptrdiff_t)`或`sizeof(size_t)`......假设这样会导致令人讨厌的错误。

**编辑**：从技术上讲，没有可移植的方法来获取`data`and`i`并且都是有效的指针`data`并`data + i`指向不同分配块中的不同对象，因为标准只保证指针算术在分配的块中是明确定义的，所以如果你是依靠这样做，那么您的程序无论如何都是不可移植的。（并不是说它不起作用，在大多数情况下......）

# u2 - U2 Toolkit for .NET - RPC 失败，已建立的连接被中止 [errorcode=81009]

> ID：15145835
> 
> 赞同：2
> 
> 时间：2013-02-28T21:18:58.787
> 
> 标签：u2, universe, u2netdk

我正在使用 U2 Toolkit for .NET 从 MS SSIS 访问我们的 Universe 系统。这在对返回少于 200k 行数据的几个文件进行一些调查测试时效果很好。在我最近一次运行中，使用查询返回大约 800k 行数据的新文件，我收到以下错误：

> 加载 SO：错误：U2.Data.Client.U2Exception (0x80004005)：错误 [0] [U2][UCINET-UO]WIN32 API 错误：10053已建立的连接被主机中的软件中止[Rocket U2][UCINET - UNIRPC][ErrorCode=81009] The RPC failed Error in Socket Send and dataLength:36 Inner Exception:Unable to write data to the transport connection: 已建立的连接被主机中的软件中止。内部异常：WIN32 API 错误：10053已建立的连接被主机中的软件中止[Rocket U2][UCINET - UNIRPC][ErrorCode=81009] 套接字发送中的 RPC 失败错误和数据长度：36 ---> U2。 Data.Client.Ucinet.UciException：[U2][UCINET-UO]WIN32 API 错误：10053已建立的连接被主机中的软件中止[Rocket U2][UCINET - UNIRPC][ErrorCode=81009] The RPC failed Error in Socket Send and dataLength:36 Inner Exception:Unable to write data to the transport connection: An已建立的连接被主机中的软件中止。内部异常：WIN32 API 错误：10053已建立的连接被主机中的软件中止[Rocket U2][UCINET - UNIRPC][ErrorCode=81009] RPC 失败 Socket Send 中的错误和 dataLength:36 在 U2.Data.Client .Ucinet.UciStatement.g() 在 U2.Data.Client.Ucinet.UciStatement.Close() 在 U2.Data.Client.U2DataReader.Dispose(Boolean disposing) 在 U2.Data.Client.U2PoolManager.HandleUnknownErrors(String strFncMsg, U2.Data.Client.U2DataReader 的异常异常，布尔 bThrow)。

在用于此“数据流”任务之前，此连接运行良好。

在 unirpcservices 文件中，超时设置如下：

> uvnet /usr/ibm/uv/bin/uvnetd * TCP/IP 0 3600 uvdrsrv /usr/ibm/uv/bin/uvdrsrvd * TCP/IP 0 3600 uvserver /usr/ibm/uv/bin/uvsrvd * TCP/IP 0 3600 uvcs /usr/ibm/uv/bin/uvapi_server * TCP/IP 0 3600 defcs /usr/ibm/uv/bin/uvapi_server * TCP/IP 0 3600 uvfilefix /usr/ibm/uv/bin/uvfilefix_server * TCP/IP 0 3600

这是我的连接字符串：

> 服务器=10.0.0.237；用户 ID=bicopy；数据库=NSA；ServerType=Universe；FirstNormalForm=False；连接管理器：ADO.NET:U2.Data.Client.U2Connection、U2.Data.Client、Version=1.2.0.0、Culture=neutral、PublicKeyToken=9ab9148678f4f448

查询超时设置为 -1 并且`rpcServiceType`是 defcs。

大约 10 分钟后发生此错误。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T23:15:21.807

你能增加连接字符串的超时时间吗？例如 ：

服务器类型=宇宙；连接超时=720

# javascript - 当我使用 onsubmit 而不是 onclick 时，Javascript 代码不起作用

> ID：15145836
> 
> 赞同：0
> 
> 时间：2013-02-28T21:18:58.663
> 
> 标签：javascript, onsubmit

```
var submit = document.getElementById('submit'),
    div = document.getElementById('div');

div.onmouseover = function sum() {
    value1 = document.getElementById('form').value;
    value1 = document.getElementById('form2').value;

    sum = value1 + value2;
}

submit.onsubmit = function print() {
    div.innerHTML = sum;
} 
```

由于某种原因，代码不起作用；但是，如果我将最后一个替换为

```
submit.onclick = function print() {
    div.innerHTML = sum;
} 
```

`onclick`而不是`onsubmit`，它工作得很好，即使`sum`是在我按下提交之前在外面计算的。就好像每个变量`null`在我输入提交时都变成了即使变量甚至没有存储在表单字段中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:20:09.817

事件`onsubmit`处理程序必须附加到`form`元素，而不是`input`元素。

假设你有一个`form`，你可以做

```
submit.form.onsubmit = ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:21:40.507

该`onsubmit`事件在表单元素上触发，而不是在按钮上触发。尝试将`onsubmit`处理程序移至表单

# visual-studio-2010 - VS2010 自定义活动设计器未使用

> ID：15145837
> 
> 赞同：0
> 
> 时间：2013-02-28T21:19:03.223
> 
> 标签：visual-studio-2010, workflow-foundation-4, workflow-activity

我有一个定义了自定义活动的解决方案，并且我让一个设计师来配合它（见下文）。我有 3 个项目，一个用于自定义活动，一个用于自定义活动的设计器，第三个用于实际运行我的自定义活动（一个简单的控制台应用程序）。

当我创建使用我的自定义活动的复合活动时，VS 中的设计器不使用我的自定义设计器。我已确保设计器程序集以 *.Design.dll 名称命名，并且已复制到控制台应用程序的 bin 目录中，但无法弄清楚为什么它没有选择我的自定义设计器。有任何想法吗？以下是所有必要部分的代码。

**我的自定义活动**

```
namespace WorkflowSampler.Activities
{
    using System.Activities;
    using System.Diagnostics;

    public class SampleVarChanger : NativeActivity
    {
        private InArgument<int> expressionToEvaluate;

        private Variable<int> counter;

        public Variable<int> Counter
        {
            get
            {
                return this.counter ?? (this.counter = new Variable<int>());
            }

            set
            {
                this.counter = value;
            }
        }

        public InArgument<int> ExpressionToEvaluate
        {
            get
            {
                return this.expressionToEvaluate ?? (this.expressionToEvaluate = new InArgument<int>());
            }

            set
            {
                this.expressionToEvaluate = value;
            }
        }

        protected override void CacheMetadata(NativeActivityMetadata metadata)
        {
            metadata.AddImplementationVariable(this.Counter);

            var exprToEvalRuntimeArg = new RuntimeArgument("ExpressionToEvaluate", typeof(int), ArgumentDirection.In);
            metadata.Bind(this.ExpressionToEvaluate, exprToEvalRuntimeArg);
            metadata.AddArgument(exprToEvalRuntimeArg);
        }

        protected override void Execute(NativeActivityContext context)
        {
            Debug.WriteLine(string.Format("Counter Variable Value: {0}", this.Counter.Get(context)));
        }
    }
} 
```

**我的自定义活动的设计器（XAML 部分）**

```
<sap:ActivityDesigner x:Class="WorkflowSampler.Activities.Design.SampleVarChangerDesigner"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:sap="clr-namespace:System.Activities.Presentation;assembly=System.Activities.Presentation"
    xmlns:sapv="clr-namespace:System.Activities.Presentation.View;assembly=System.Activities.Presentation"
                      xmlns:sapc="clr-namespace:System.Activities.Presentation.Converters;assembly=System.Activities.Presentation">
    <sap:ActivityDesigner.Resources>
        <ResourceDictionary>
            <sapc:ArgumentToExpressionConverter x:Key="ArgumentToExpressionConverter" />
        </ResourceDictionary>
    </sap:ActivityDesigner.Resources>
    <Grid Margin="10, 0, 0, 0">
        <Grid.RowDefinitions>
            <RowDefinition Height="25" />
            <RowDefinition Height="25" />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="200" />
            <ColumnDefinition Width="200" />
        </Grid.ColumnDefinitions>

        <TextBlock Text="Variable Name:" VerticalAlignment="Center" Grid.Row="0" Grid.Column="0" />
        <TextBox Name="VariableName" VerticalContentAlignment="Center" Grid.Row="0" Grid.Column="1" TextChanged="OnVariableNameChanged" />

        <TextBlock Text="Expression Using Variable:" VerticalAlignment="Center" Grid.Row="1" Grid.Column="0" />
        <sapv:ExpressionTextBox Name="ExpressionUsingVariable" VerticalContentAlignment="Center" Expression="{Binding Path=ModelItem.ExpressionToEvaluate, Converter={StaticResource ResourceKey=ArgumentToExpressionConverter}, ConverterParameter=In, Mode=TwoWay}" OwnerActivity="ModelItem" Grid.Row="1" Grid.Column="1" />
    </Grid>
</sap:ActivityDesigner> 
```

**我的自定义活动的设计器（部分代码）**

```
namespace WorkflowSampler.Activities.Design
{
    using System.Activities;
    // Interaction logic for SampleVarChangerDesigner.xaml
    public partial class SampleVarChangerDesigner
    {
        public SampleVarChangerDesigner()
        {
            InitializeComponent();
        }
        private void OnVariableNameChanged(object sender, TextChangedEventArgs e)
        {
            this.ModelItem.Properties["Counter"].SetValue(new Variable<int>(this.VariableName.Text));
        }
    }
} 
```

**VS Designer 支持所需的 IRegisterMetadata 接口**

```
namespace WorkflowSampler.Activities.Design
{
    using System.Activities.Presentation.Metadata;
    using System.ComponentModel;
    /// <summary>
    /// Registers the activity designer metadata.
    /// </summary>
    public class RegisterMetadata : IRegisterMetadata
    {
        public void Register()
        {
            AttributeTableBuilder builder = new AttributeTableBuilder();
            builder.AddCustomAttributes(typeof(SampleVarChanger), new DesignerAttribute(typeof(SampleVarChangerDesigner)));
            MetadataStore.AddAttributeTable(builder.CreateTable());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:39:13.433

我想通了...我需要让设计项目将其 DLL 复制到活动项目中，所以我所做的是创建一个 MSBuild 构建后事件以将设计库复制到活动的调试文件夹中。现在VS拿起它。

# javascript - 在特定字符后插入文本？

> ID：15145838
> 
> 赞同：0
> 
> 时间：2013-02-28T21:19:07.433
> 
> 标签：javascript, jquery

是否可以`div`在一段文本中插入一定数量的字符之后？

如果我有一个`div`完整的文本，像这样：

```
<div class="content">
Vivamus luctus urna sed urna ultricies ac tempor dui sagittis.
</div> 
```

我想`div`在第 13 个字符之后插入一个：

```
Vivamus luctu<div>s urna sed urna ultricies ac tempor dui sagittis 
```

我可以用 jQuery/Javascript 做到这一点吗？

我收到了要插入 a 的位置的界限`div`，`getSelection().extentOffset`结果是一个数字，说`13`这是我要插入`div`.

我能够让它部分工作，如下所示：

```
$("div").on("mouseup", function () {
    var start = window.getSelection().anchorOffset;
    var end = window.getSelection().extentOffset;
    console.log(start + ", " + end);
    console.log($(".content").text().substring(start, end));
    $('.output').html($('.content').html().substring(0, start) + '<span class="highlight">' + $('.content').html().substring(start, end) + "</span>" + $('.content').html().substring(end));
}); 
```

但是当边界发生变化时，它会替换整个文本，这意味着不能有多个部分包含在`div`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:13:19.687

如果您尝试实现跨浏览器功能，这是一个相当复杂的问题。我建议使用这个库[Rangy](https://code.google.com/p/rangy/) 另请查看此[问题](https://stackoverflow.com/questions/3454152/cross-browser-selection-range-library)以获取示例用法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T22:38:28.747

您可以使用`$(".content").contents()`获取 text-DOM-Nodes 并将它们替换为您想要的部分，只需查看 nodeType 是否是您想要的。

[http://api.jquery.com/contents/](http://api.jquery.com/contents/)

# javascript - 单击提交按钮时使用关闭按钮使文本可清除

> ID：15145846
> 
> 赞同：0
> 
> 时间：2013-02-28T21:19:44.033
> 
> 标签：javascript, jquery, css, autocomplete

我需要在 jquery 中实现一个代码，我可以在文本字段中输入任何文本，然后单击“提交”按钮后，该文本应该变成一个可清除的字段，如下所示![在此处输入图像描述](../Images/aba0e62d7be7b5b950b3e99428d88d31.png)

我尝试将此框放在我的文本字段中，但这会使我的整个文本字段成为可清除的字段，

```
 $(document).ready(function(){
    $('input[type=text]').clearableTextField();
  }); 
```

我不想这样做，我希望当我在文本字段中输入内容并单击提交按钮时，它应该成为可清除的文本对象。任何帮助表示赞赏！

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T11:26:08.110

实现这一点的一种方法（类似于在 Stack Overflow 上完成标记输入的方式）是在输入字段的左侧有一个单独的 div，其中放置“可清除的文本字段”。单击提交按钮时（或按下空格键，或任何 javascript 可以侦听的触发器），让 javascript`span`在 left 内创建一个新的`div`，并将输入字段的宽度减小与新`span`标签相同的宽度。您可以在`span`.

此处提供了一个通过 jQuery 实现类似效果的演示：http: [//xoxco.com/projects/code/tagsinput/](http://xoxco.com/projects/code/tagsinput/)。（@sachleen 在回答[类似问题](https://stackoverflow.com/questions/10839570/how-does-stackoverflow-make-its-tag-input-field)时建议）

# sql - 如何计算工作日是否比今天日期超过 6 天

> ID：15145847
> 
> 赞同：0
> 
> 时间：2013-02-28T21:19:45.810
> 
> 标签：sql, sql-server, sql-server-2008

我的选择语句中有以下内容：

```
CASE WHEN DATEADD(DAY, - 5, GETDATE()) > [Date] THEN '6+' ELSE NULL END AS Test 
```

这很好用，但它也包括周末。如果今天的日期 - 5 是 > 日期，我将如何在计算部分中不计算周末？我只想使用 5 个工作日，而不是周末。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:23:51.113

这将从您的 : 中排除周六和周日`CASE`：

```
CASE WHEN 
    (
       (DATEADD(DAY, - 5, GETDATE()) > [Date]) 
       AND 
       (DATEPART(WEEKDAY, DATEADD(DAY, - 5, GETDATE())) NOT IN (7,1))
    )
    THEN '6+'  END AS Test 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-30T21:06:08.930

我建议计算从 [Date] 到 GETDATE() 的工作日，并在 CASE 表达式中对该数字应用任何标准。为了计算工作日，为简化表达式，您可以将这两个交叉应用添加到您的 FROM 子句中：

```
CROSS APPLY ( VALUES (
    DATEDIFF(Day, 0, [Date]),
    DATEDIFF(Day, 0, GETDATE())
    )
) tmp (d1, d2)
CROSS APPLY ( VALUES (
    tmp.d2 - tmp.d1 - (tmp.d2/7 - tmp.d1/7) - ((tmp.d2+1)/7 - (tmp.d1+1)/7)
    )
) diff (workdays) 
```

完成后，您的 case 表达式将如下所示：

```
CASE WHEN diff.workdays > 5 THEN '6+' ELSE NULL END AS Test 
```

# ios - UITableView 中来自 NSData 的 UIImage - 性能问题

> ID：15145848
> 
> 赞同：0
> 
> 时间：2013-02-28T21:19:57.517
> 
> 标签：ios, objective-c, xcode, uiimage, nsdata

我将相册中的图像作为 NSData 存储在我的应用程序文档目录中，而不是在 UITableView 中显示它们。我有性能问题。将图像保存到应用程序目录需要几秒钟的时间，并且在将它们加载到 TableView 时我遇到了同样的问题。这是我存储图像的代码：

```
//Convert UIImage to NSData
NSData *imageData = [NSData dataWithData:UIImagePNGRepresentation(image)];

//Save image to app documents directory
NSError *error;
[imageData writeToFile:fullImagePath options:NSDataWritingAtomic error:&error]; 
```

这就是我将它们加载到 UITableView 中的方式：

```
NSData *imageData = [NSData dataWithContentsOfFile:path];
UIImage *myImage = [UIImage imageWithData:imageData];

cell.imageView.image = myImage; 
```

什么可能导致这些性能问题？是否有任何其他方式可以从应用程序文档目录中存储和检索图像？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-28T21:30:20.880

两种方法：

首先，您可能会考虑在保存图像之前缩小图像，或者保存一个额外的较小副本以在表格视图中显示。这取决于您需要多好的图像 - 可能是表格视图不如具有 MB 数据的全尺寸图片那么大。实际上，如果适当缩放图像，它们也会看起来更好。这本身就应该解决延迟问题。

其次，您可以考虑异步加载图像。维护要下载的可变图像数组。创建一个执行下载并在完成时通知表视图的单例。`cell.imageView.image`在通知（或委托）回调中设置。

# ruby - 使用 Nokogiri 替换时的编码问题

> ID：15145849
> 
> 赞同：6
> 
> 时间：2013-02-28T21:19:59.973
> 
> 标签：ruby, encoding, character-encoding, nokogiri

我有这个代码：

```
# encoding: utf-8
require 'nokogiri'

s = "<a href='/path/to/file'>Café Verona</a>".encode('UTF-8')
puts "Original string: #{s}"

@doc = Nokogiri::HTML::DocumentFragment.parse(s)

links = @doc.css('a')
only_text = 'Café Verona'.encode('UTF-8')
puts "Replacement text: #{only_text}"
links.first.replace(only_text)
puts @doc.to_html 
```

但是，输出是这样的：

```
Original string: <a href='/path/to/file'>Café Verona</a>
Replacement text: Café Verona
CafÃ© Verona 
```

为什么文本`@doc`最终以错误的编码结束？

我尝试了使用和不`encode('UTF-8')`使用或使用`Document`而不是`DocumentFragment`，但这是同样的问题。

我正在使用 Nokogiri v1.5.6 和 Ruby 1.9.3p194。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T01:49:24.753

似乎如果你传递一个 nokogiri 文本对象，它就会这样做；）

```
links.first.replace Nokogiri::XML::Text.new(only_text, @doc) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-01T02:26:50.357

我无法复制这个问题，但我有两个不同的尝试：

而不是使用：

```
s = "<a href='/path/to/file'>Café Verona</a>".encode('UTF-8') 
```

尝试：

```
s = "<a href='/path/to/file'>Café Verona</a>" 
```

由于您的语句，您的字符串已经是 UTF-8 编码的`# encoding: utf-8`。这就是为什么你把它放在脚本中，告诉 Ruby 文字字符串是 UTF-8 格式的。您可能正在对其进行双重编码，尽管我认为 Ruby 不会——它应该默默地忽略第二次尝试，因为它已经是 UTF-8。

我想知道的另一件事是，输出如下：

```
CafÃ© Verona 
```

表示您的系统和终端的语言/字符集编码不正确。尝试在设置为其他内容的系统上输出 UTF-8 字符串可能会导致终端和/或浏览器不匹配。Windows 系统通常是 Win-1252、ISO-8859-1 或类似的，而不是 UTF-8。在我的 Mac OS 系统上，我设置了以下环境变量：

```
LANG=en_US.UTF-8
LC_ALL=en_US.UTF-8 
```

“[打开 iso-8859-1 编码的 html 并带有 nokogiri 弄乱口音](https://stackoverflow.com/q/9741023/128421)”可能也很有用。

# objective-c - 比较 Objective-C const char 和 NSString

> ID：15145850
> 
> 赞同：1
> 
> 时间：2013-02-28T21:20:01.277
> 
> 标签：objective-c, nsstring, const-char

我想知道是否有一种简单的方法可以将 const char 与 an 进行比较`NSString`，还是我必须`NSString`在做之前将 const char 转换为 an ？

我一直在浏览 Apple 文档，但很难找到我问题的答案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-28T21:24:32.430

任何一个

```
NSString *str = @"string";
const char *myChar = "some string";
if (strcmp(myChar,  str.UTF8String)) 
```

或者

```
[str isEqualToString:[NSString stringWithUTF8String:myChar]]; 
```

核心基础路线也是一种选择：

```
CFStringRef myStr = CFSTR("some chars");

bool result = CFStringCompareWithOptions(myStr, ((__bridge CFStringRef)str),CFRangeMake(0,CFStringGetLength(myStr)), kCFCompareCaseInsensitive); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-28T21:35:58.370

更好的是：

```
 [str isEqualToString: @(myChar) ]; 
```

这并不比强制转换差，因为类型是不可通约的，所以你肯定需要它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:24:25.183

您正在比较两种不同的事物，因此您必须将一种转换为另一种。转换哪种方式取决于您。

# asp.net-mvc - 避免在 Web Publish 上删除文件夹

> ID：15145860
> 
> 赞同：20
> 
> 时间：2013-02-28T21:20:28.673
> 
> 标签：asp.net-mvc, deployment, azure, visual-studio-2012, umbraco

我正在将我的应用程序部署到 Azure 网站。我已成功配置发布配置文件并将 tfspreview.com 设置为在每次代码提交时使用持续集成自动发布。

我在路径“/ media”上有一个文件夹。此文件夹包含通过 CMS (umbraco) 上传的图片和文档。此文件夹在每次 Web 部署时都会被删除。

从[这个答案](https://stackoverflow.com/questions/12576662/msdeploy-skip-rules-when-using-msbuild-publishprofile-with-visual-studio-2012)中，我学会了如何在 .csproj 或 wpp.targets 文件上添加 SkipDelete 规则，但是每次我发布网站时，整个文件夹都会被删除。

这是我目前在 wpp.targets 中使用的代码：

```
<PropertyGroup>
<AfterAddIisSettingAndFileContentsToSourceManifest>
  AddCustomSkipRules
</AfterAddIisSettingAndFileContentsToSourceManifest>
</PropertyGroup>

<Target Name="AddCustomSkipRules">
<Message Text="Adding Custom Skip Rules" />
<ItemGroup>
  <MsDeploySkipRules Include="SkipMediaFolder">
    <SkipAction>Delete</SkipAction>
    <ObjectName>filePath</ObjectName>
    <AbsolutePath>media</AbsolutePath>
  </MsDeploySkipRules>
</ItemGroup>
</Target>

<PropertyGroup>
<UseMsDeployExe>true</UseMsDeployExe>
</PropertyGroup> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-01T02:56:17.967

这不仅仅是取消选中发布向导（设置步骤）中显示“在发布前删除所有现有文件”的框的问题吗？我知道从 Visual Studio 端设置发布时该选项可用 - 在我看来，Azure 发布凭据只是为您提供连接，而不是您通过向导进行的设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-03T11:15:02.283

查看您链接到的问题以及您在上面提供的代码，您似乎需要更改该行：

```
<AbsolutePath>ErrorLog</AbsolutePath> 
```

至

```
<AbsolutePath>media</AbsolutePath> 
```

因为这是指您不想删除的文件夹。`ErrorLog`是另一个问题的作者不想删除的文件夹。

# api - UPS 测试跟踪号（有这样的东西吗？）

> ID：15145865
> 
> 赞同：9
> 
> 时间：2013-02-28T21:20:37.383
> 
> 标签：api, soap, soap-client, ups

我终于让 UPS 跟踪 API 工作了。或者至少我认为我会。它给了我一个“无效的追踪号码”回复。我现在的问题是我没有要跟踪的包裹。有谁知道任何可以让我测试来自 UPS 的虚假订单的资源，或者任何可以做出回应的资源？谢谢

我正在使用 UPS Tracking Developers Kit 并且需要包裹响应。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2017-07-18T22:54:39.533

这是一个更新，以防有人像我一样遇到这个问题。

以下数据取自*Tracking Web Service Developer Guide **（2017 年 1 月 9 日）***。

您应该能够从[UPS 开发工具包](https://www.ups.com/upsdeveloperkit/downloadresource)下载页面访问它。有一个名为[Tracking.zip](https://www.ups.com/gec/techdocs/pdf/Tracking.zip)`Download the API`下载链接的部分。开发人员指南位于第 7 页的表格中。`Tracking.zip\Tracking\Developers Guide\Tracking Web Service Developer Guide.pdf`

```
"Type","Value","Option","Service","Response"
"Tracking","1Z12345E0205271688\n(Signature Availability)","Activity (All)","2nd Day Air","Delivered"
"Tracking","1Z12345E6605272234","None (Last)","World Wide Express","Delivered"
"Shipping","1Z12345E0305271640\n(Second Package:\n1Z12345E0393657226)","None (Last)","Ground","Delivered"
"Tracking","1Z12345E1305277940","None (Last)","Next Day Air Saver","ORIGIN SCAN"
"Tracking","1Z12345E6205277936","Activity (All)","Next Day Air Saver","2nd Delivery attempt"
"Tracking","1Z12345E020527079","None (Last)",,"Invalid Tracking Number"
"Tracking","1Z12345E1505270452","None (Last)",,"No Tracking Information Available"
"Tracking",990728071,"Activity (All)","UPS Freight LTL","In Transit"
"Tracking",3251026119,"Activity (All)",,"Delivered Origin CFS"
"MI Tracking Number",9102084383041101186729,"None (Last)",,
"MI Reference Number","cgish000116630","None (Last)",,
"Tracking","1Z648616E192760718","Activity","UPS Worldwide Express Freight","Order Process by UPS"
"Tracking",5548789114,"Activity","UPS Express Freight","Response for UPS Air Freight"
"Tracking","ER751105042015062","Activity","UPS Ocean","Response for UPS Ocean Freight"
"Tracking","1ZWX0692YP40636269","Activity","UPS SUREPOST","Response for UPS SUREPOST" 
```

希望能帮助下一个人来:)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-05-09T04:30:07.320

您可以在 UPS 测试环境中使用生产跟踪号。此外，在***Tracking Web Service Developers Guide（2012 年 12 月 31 日）的******附录 H***中，您可以找到一个跟踪号列表，如果您想查看具有不同信息集的跟踪号（例如*交付证明*），该列表会很有用。

 **最好的！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-10-07T11:08:05.807

这些摘自 2016 年 7 月 11 日的 UPS Tracking Tracking Web 服务开发人员指南，第 1 页。13.

```
追踪号码、服务、回应
1Z12345E0205271688（签名可用性），2nd Day Air，已交付
1Z12345E6605272234，全球快递，已发货
1Z12345E0305271640，（二包：1Z12345E0393657226），接地，已发货
1Z12345E1305277940, 次日节气, ORIGIN SCAN
1Z12345E6205277936, Day Air Saver, 第二次交付尝试
1Z12345E020527079，跟踪号无效
1Z12345E1505270452，没有可用的跟踪信息
990728071, UPS Freight LTL, 在途
3251026119，交付的来源 CFS
小米追踪号：9102084383041101186729
MI参考号：cgish000116630
1Z648616E192760718, UPS Worldwide Express Freight, UPS 订单处理
5548789114, UPS Express Freight, UPS Air Freight 响应
ER751105042015062, UPS Ocean, 响应 UPS Ocean Freight
1ZWX0692YP40636269，UPS SUREPOST，UPS SUREPOST 响应

```**

# java - 配置 NetBeans IDE 以使用特定版本的 Java API

> ID：15145867
> 
> 赞同：1
> 
> 时间：2013-02-28T21:20:39.507
> 
> 标签：java, netbeans

我正在使用 NetBeans 7.2.1。

我的 Java 项目与 Java 6 兼容，但 NetBeans 似乎使用 Java 7 作为编译器。

Java 7 修改了一些接口，例如 java.sql.Connection，增加了 getNetworkTimeout() 等方法。

这会导致编译时错误，例如

```
error: MyConnection is not abstract and does not override abstract method getNetworkTimeout() in Connection 
```

如何配置 NetBeans 以使用 Java 6 API？

*   我试过右键单击项目，属性 -> 源 -> 源/二进制格式：JDK 6。
*   我试过右键单击项目，属性 -> 构建 -> 编译 -> 附加编译器选项：-source 1.6 -target 1.6

这些都不能解决我的问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T21:26:22.217

1.  将 Java 6 JDK 添加到 NetBeans：工具 -> Java 平台
2.  为您的项目使用 Java6：项目属性 -> 库 -> Java 平台

# java - Java 6 和 7 之间有什么区别会导致性能问题？

> ID：15145870
> 
> 赞同：25
> 
> 时间：2013-02-28T21:20:52.430
> 
> 标签：java, performance, inputstream

我对 Java 7 的一般经验告诉我它比 Java 6 快。但是，我遇到了足够多的信息，这让我相信并非总是如此。

第一条信息来自[此处](http://stats.minecraft.net/)找到的 Minecraft Snooper 数据。我的目的是查看这些数据以确定用于启动 Minecraft 的不同开关的效果。例如，我想知道使用 -Xmx4096m 是否会对性能产生负面或正面影响。在我到达那里之前，我查看了正在使用的不同版本的 Java。它涵盖了从 1.5 到使用 1.8 的开发人员的所有内容。通常，随着您增加 java 版本，您会看到 fps 性能的提高。在 1.6 的不同版本中，您甚至可以看到这种逐渐上升的趋势。老实说，我没想到会在野外看到许多不同版本的 java，但我猜人们不会像他们应该的那样运行更新。

在 1.6 的更高版本的某个时候，你会得到最高的窥视。1.7 的平均速度比 1.6 的更高版本低约 10fps，但仍高于 1.6 的早期版本。在我自己系统的样本上，几乎不可能看到差异，但在查看更广泛的样本时，它很清楚。

为了控制有人可能已经找到了 Java 的魔术开关，我只通过查看没有传递任何开关的数据来控制。这样，在我开始查看不同的标志之前，我就有了合理的控制。

我忽略了我所看到的大部分内容，因为这可能是一些没有与我分享的 Magic Java 6。

现在我一直在从事另一个项目，该项目需要我在 InputStream 中传递一个数组以由另一个 API 处理。最初我使用 ByteArrayInputStream 因为它可以开箱即用。当我查看它的代码时，我注意到每个函数都是同步的。由于这对这个项目来说是不必要的，所以我重写了一个，去掉了同步。然后我决定我想知道在这种情况下同步的一般成本对我来说是多少。

我模拟了一个简单的测试只是为了看看。我使用 System.nanoTime() 对所有内容进行计时，并使用 Java 1.6_20 x86 和 1.7.0-b147 AMD64 和 1.7_15 AMD64 并使用 -server。我预计 AMD64 版本仅基于架构就能胜过任何 java 7 优势。我还查看了第 25、第 50 和第 75 个百分位数（蓝色、红色、绿色）。然而，没有 -server 的 1.6 击败了其他所有配置。 ![图形](../Images/c23fb416a38d16e350dfa33cfbdfc820.png)

所以我的问题是。影响性能的 1.6 -server 选项中的哪些内容在 1.7 中也默认为开启？

我知道 1.7 中的大部分速度增强来自于将 1.6 中一些更激进的性能选项默认为开启，但其中之一是导致性能差异。我只是不知道该看哪些。

```
public class ByteInputStream extends InputStream {

public static void main(String args[]) throws IOException {
    String song = "This is the song that never ends";
    byte[] data = song.getBytes();
    byte[] read = new byte[data.length];
    ByteArrayInputStream bais = new ByteArrayInputStream(data);
    ByteInputStream bis = new ByteInputStream(data);

    long startTime, endTime;

    for (int i = 0; i < 10; i++) {
        /*code for ByteInputStream*/
        /*
        startTime = System.nanoTime();
        for (int ctr = 0; ctr < 1000; ctr++) {
            bis.mark(0);
            bis.read(read);
            bis.reset();
        }
        endTime = System.nanoTime(); 

        System.out.println(endTime - startTime); 
        */

        /*code for ByteArrayInputStream*/
        startTime = System.nanoTime();
        for (int ctr = 0; ctr < 1000; ctr++) {
            bais.mark(0);
            bais.read(read);
            bais.reset();
        }
        endTime = System.nanoTime();

        System.out.println(endTime - startTime);
    }

}

private final byte[] array;
private int pos;
private int min;
private int max;
private int mark;

public ByteInputStream(byte[] array) {
    this(array, 0, array.length);
}

public ByteInputStream(byte[] array, int offset, int length) {
    min = offset;
    max = offset + length;
    this.array = array;
    pos = offset;
}

@Override
public int available() {
    return max - pos;
}

@Override
public boolean markSupported() {
    return true;
}

@Override
public void mark(int limit) {
    mark = pos;
}

@Override
public void reset() {
    pos = mark;
}

@Override
public long skip(long n) {
    pos += n;
    if (pos > max) {
        pos = max;
    }
    return pos;
}

@Override
public int read() throws IOException {
    if (pos >= max) {
        return -1;
    }
    return array[pos++] & 0xFF;
}

@Override
public int read(byte b[], int off, int len) {
    if (pos >= max) {
        return -1;
    }
    if (pos + len > max) {
        len = max - pos;
    }
    if (len <= 0) {
        return 0;
    }
    System.arraycopy(array, pos, b, off, len);
    pos += len;
    return len;
}

@Override
public void close() throws IOException {
}

}// end class 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T10:59:40.237

我认为，正如其他人所说，您的测试太短而无法看到核心问题 - 图表显示的是 nanoTime，这意味着正在测量的核心部分在 0.0001 到 0.0006 秒内完成。

**讨论**

-server 和 -client 的主要区别在于 -server 期望 JVM 存在很长时间，因此在早期花费精力以获得更好的长期结果。-client 的目标是快速启动时间和足够好的性能。

特别是热点运行时进行了更多优化，这些优化需要更多的 CPU 来执行。换句话说，使用 -server，您可能会看到优化器的成本超过了优化带来的任何收益。

请参阅[“java -server”和“java -client”之间的真正区别？](https://stackoverflow.com/questions/198577/real-differences-between-java-server-and-java-client)

或者，您可能还会看到[分层编译](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html#tieredcompilation)的效果，在 Java 7 中，热点的启动速度并不那么快。只有 1000 次迭代，您的代码的全面优化要等到以后才能完成，因此收益会更小。

`-Xprof`如果您使用JVM 将转储一些有关在各种方法（包括解释和编译）中花费的时间的选项运行 java，您可能会有所了解。它应该给出关于编译的内容以及热点启动之前（cpu）时间的比率的想法。

但是，要获得真实的画面，您确实需要运行*更长的*时间——~~几秒钟~~，而不是几毫秒——以让 Java 和操作系统预热。循环测试会更好`main`（这样您就有一个包含已检测的主测试循环的循环），这样您就可以忽略热身。

**编辑**将秒更改为分钟以确保热点、jvm 和操作系统正确“预热”

# jquery - 如何在切换幻灯片菜单旁边放置一个 div？

> ID：15145873
> 
> 赞同：0
> 
> 时间：2013-02-28T21:20:54.867
> 
> 标签：jquery, css, html

几个月以来，我一直在缓慢地学习一些 HTML、CSS、Java 和 jQuery，我刚刚遇到了这个问题，我过去已经解决了，但现在我真的陷入了困境！我在容器中有一些 div，其中包括一个下拉菜单。我希望主文本框位于菜单的右侧。我试图漂浮：对，但它会飞到那里，但不会并排。这可能是一个非常愚蠢的问题，但我想我会问而不是没有帮助。很抱歉成为'n00b'......如果我的代码写得不好或类似的东西也很抱歉：/

这是我的代码：

```
<html>
<head>
<link type='text/css' rel='stylesheet' href='stylesheet.css'/>
<script src="jquery.min.js">
</script>
<script> 
$(document).ready(function(){
        $("#flip").click(function(){
        $("#panel").slideToggle("slow");
        $("#panel2").slideToggle("slow");
        $("#panel3").slideToggle("slow");
    });
}); 
```

```
<div id="container">
<div id="header"><img src="logo.jpg" style="float:left" width="100">Bourne Computing Solutions<img src="logo.jpg" style="float:right" width="100"></div>
<div id="flip">Menu (click to open)</div>
<div id="panel">Home</div>
<div id="panel2">Contents Page</div>
<div id="panel3">Find us</div>
<div id="textbox">TEXT HERE</div>

</div>

</body>
</html> 
```

我的样式表：

```
 #container
{
    position:absolute;
    left:50%;
    width:1024px;
    height:100%;
    margin-left:-512px;
}

#header
{
    font-family:arial;
    font-size:32px;
    padding:10px;
    width:1002px;
    height:50px;
    text-align:center;
    background-color:#ffffff;
    border:solid 1px #000000;
}

#panel,#flip, #panel2, #panel3
{
    font-family:arial;
    padding:15px;
    width:200px;
    text-align:center;
    background-color:#ffffff;
    border:solid 1px #000000;
}

#panel
{
    padding:10px;
    width:210px;
    display:none;
}

#panel2
{
    padding:10px;
    width:210px;
    display:none;
}

#panel3
{
    padding:10px;
    width:210px;
    display:none;
}

#textbox
{
    font-family:arial;
    font-size:14px;
    padding:10px;
    width:770px;
    height:500px;
    text-align:left;
    background-color:#ffffff;
    border:solid 1px #000000;
    float:right;
} 
```

对不起，我很傻，但我想我们都从某个地方开始......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:36:42.540

You can do it this way :

```
#textbox
{
    font-family:arial;
    font-size:14px;
    padding:10px;
    width:770px;
    height:500px;
    text-align:left;
    background-color:red;
    border:solid 1px #000000;
    position:absolute;
    left:210px;
    top:72px;
} 
```

Using the absolute positioning of CSS you already uses in your code.

Check the [fiddle](http://jsfiddle.net/gfRmS/) here

# html - 输入文本是换行而不是水平扩展

> ID：15145881
> 
> 赞同：4
> 
> 时间：2013-02-28T21:21:08.780
> 
> 标签：html, css

所有，我有一个文本字段，当它太满时，该行会转到下一行，而不是水平延伸。

在以下网页的右侧，您可以输入电子邮件地址并使其变长并且文本换行而不是水平排列。有谁知道为什么会这样做？它在我的 CSS 中吗？我检查了元素，但没有看到任何会导致它的东西。

这是网址： [http ://tinyurl.com/bolsrcx](http://tinyurl.com/bolsrcx)

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:47:27.573

添加`word-break: initial;`在`<input>`

它是一个新的 CSS 3 关键字，幸运的是有 -WebKit 支持 :)

# ember.js - 如果未登录，则禁止某些（大多数）路线

> ID：15145882
> 
> 赞同：2
> 
> 时间：2013-02-28T21:21:09.503
> 
> 标签：ember.js, ember-router

我将 Ember 用于我的整个网站，甚至是静态页面。

我有一个设计 api 设置，使用 user.new、user.login 和 user.edit 来创建、登录或编辑现有帐户。

任何用户都可以去

```
http://hostname/user/edit 
```

查看编辑屏幕。我真的希望只有在用户登录时才可以做到这一点。如果没有，该路由应该例如重定向到登录页面。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T01:43:57.003

你可以`redirect`在你的路线里面放一个。在那里，您可以有条件地检查用户是否已登录。如果没有，那么您可以转换到其他地方。

有关重定向的更多信息，请参阅[指南](http://emberjs.com/guides/routing/redirection/)。

## 更新

`AuthenticatedRoute`这是我使用的一个例子。对于我要通过身份验证的路由，我只是从这个路由继承。

```
var AuthenticatedRoute = Ember.Route.extend({
  session: Ember.inject.service(),
  ...

  beforeModel: function(transition) {
    if (Ember.isEmpty(this.get('session').get('token'))) {
      this.get('flashNotification').notify({
        title: "You need to sign in first."
      });
      return this.transitionTo('sign-in');
    }
  }, 
```

希望这能提供一些好的方向。

如果您需要更多资源，请查看：

*   [余烬广播](http://www.embercasts.com/episodes/client-side-authentication-part-1)
*   [Ember Screencasts](https://www.emberscreencasts.com/posts/85-authenticated-routes) - 我没看过这个（因为它在付费墙后面，但他们的视频似乎非常有用。

# .htaccess - 目录内部服务器错误的 .htaccess 身份验证

> ID：15145886
> 
> 赞同：1
> 
> 时间：2013-02-28T21:21:24.033
> 
> 标签：.htaccess

尝试使用 .htaccess 文件对我网站上的目录进行密码保护，但在输入用户名和密码后出现内部服务器错误。该目录位于 example.com/admin/

这是我站点管理目录中的 .htaccess 文件。

```
AuthType Basic
AuthName "Please enter your username and password"
AuthUserFile /###/admin/.htpasswd
Require user myusername 
```

并且 .htpasswd 文件与 .htaccess 文件位于同一目录中，我尝试将`AuthUserFile`路径更改为仅 .htpasswd，还尝试了 admin/.htpasswd，但不断出现内部服务器错误

我的 .htpasswd 文件如下所示：

```
myusername:#passwordencrypted# 
```

如果这可能是问题，我正在使用 Godaddy 托管。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T21:53:35.097

`AuthUserFile /home/###/###/###/html/###/admin/.htpasswd`事实证明，admin 的实际目录比我可能知道的要复杂得多，我发现了一段有用的 php，它在[http://www.htaccesstools.com/articles/full为我找到了 .htpasswd 文件的路径-path-to-file-using-php/](http://www.htaccesstools.com/articles/full-path-to-file-using-php/)。

```
<?php
    $dir = dirname(__FILE__);
    echo "<p>Full path to a .htpasswd file in this dir: " . $dir . "/.htpasswd" . "</p>";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-07T08:10:10.390

对于那些 SSH 和终端爱好者，您还可以通过 SSH 登录并输入**pwd**以查找文件的完整目录。它代表“打印工作目录”，并将从根目录一直打印文件的目录路径。

# java - 如何使用 JDBC 将表从一个数据库复制到另一个数据库？

> ID：15145891
> 
> 赞同：-2
> 
> 时间：2013-02-28T21:21:37.573
> 
> 标签：java, jdbc

我们有两个具有相同结构的 Oracle 数据库。我们需要将一个表的内容从一个数据库复制到另一个数据库。我正在编写一个 JAVA 程序来完成这项任务。由于表的结构将来可能会发生变化，因此程序必须能够自行调整。我尝试了以下代码：

```
try {
                ResultSet rsConfig = getConfigRows(srcDatabase); // this method returns SELECT * FROM TEST_TABLE
                ResultSetMetaData rsmd = rsConfig.getMetaData();
                int colCount = rsmd.getColumnCount();
                String columns = "";
                String values = "";
                for (int j = 1; j <= colCount; j++) {                       
                    columns += rsmd.getColumnName(j);
                    if (j <= colCount)
                        columns += ",";
                    values += "?";
                    if (j <= colCount)
                        values += ",";
                }

                String sql = "INSERT INTO TEST_TABLE(" + columns + ") VALUES("
                        + values + ")";
                PreparedStatement psDest = destDatabase.prepareStatement(sql);

                while (rsConfig.next()) {
                    for (int j = 1; j <= colCount; j++) {
                        psDest.setObject(j, (Object) rsConfig.getObject(rsmd
                                .getColumnName(j)));
                    }
                    psDest.executeUpdate();
                } 
```

我的代码有问题吗？有什么建议么 ？我应该注意，由于某种原因，我不允许使用任何外部工具！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T22:12:58.047

不要浪费你的时间。创建一个数据库链接并在 PL/SQL 中编写几行代码就完成了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:50:50.897

我认为你在用这种方法自找麻烦。表结构多久真正改变一次？这张表中的数据有多重要？

我建议您将查询和您发现需要的任何其他配置外部化，然后确保您有良好的错误处理并在模式不再是您所期望的情况下优雅地退出。

然后，如果架构更改，您可以更新配置而不是代码。

# ms-word - 以不可更改的格式将表格插入 Word 2010 文件，同时保留字体大小和清晰度

> ID：15145899
> 
> 赞同：0
> 
> 时间：2013-02-28T21:22:04.483
> 
> 标签：ms-word

我正在尝试将不可更改格式的表格插入 Word 2010 文件，同时保留字体大小和清晰度。

到目前为止，我已经尝试将表格准备为 pdf，然后使用`Insert`-> `Object`->`Adobe Acrobat File`将其放入 Word。不幸的是，这会在 Word 页面上自动创建的边距内插入表格，并扭曲表格内的线条和字体大小。

以下是我尝试过的一些事情：
- 在导入 pdf 之前将收件人 Word 文件中的页面边距设置为 0"。
- 在较小的页面 (7" x 9") 上打印 pdf，然后导入到页面上8.5" x 11"。
两者都不起作用；调整了导入页面的大小并且表格打印得很差。

我使用的 pdf 是使用 PrimoPDF 从 Word 准备的。

如果可以更容易地将它们合并到最终的 Word 文档中，请随时建议将 pdf 以外的格式用于传输。

您的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T04:28:06.157

首先，将表格准备为 Word 文档。转到`Review`选项卡，然后选择`Restrict Editing`。设置`Editing Restrictions`为允许`No changes (Read only)`。按`Yes, Start Enforcing Protection`。保存存档。

接下来在 Word 中准备收件人文档。转到`Insert`选项卡，选择`Object`、`Create from File`，然后浏览以查找并插入文件。

该表格将作为文档中的文档插入到收件人 Word 文件中，并保持其“只读”保护。所有字体和线条样式保持原始设置。

# android - Android 布局编辑器设备没有为每个不同的布局占据一席之地

> ID：15145906
> 
> 赞同：1
> 
> 时间：2013-02-28T21:22:37.290
> 
> 标签：android, graphical-layout-editor

我正在尝试为不同的屏幕尺寸设计不同的布局。我已经为 sw240dp 创建了布局文件，现在我正在尝试为 sw480dp 设计布局。我的问题涉及布局编辑器中的设备列表。我正在尝试选择 3.7 英寸设备进行设计，但每次我为 sw480dp 选择 3.7 英寸设备时，软件都会不断跳转到 sw240dp 布局文件。我不明白我在这里做错了什么。我的 Eclipse 软件有问题，还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:28:32.260

您为模拟设备选择什么分辨率和密度？DP由密度和分辨率决定。所以对于 480 DP，这里是从密度到所需像素分辨率的映射：

```
MDPI (160) : 480px
HDPI (240) : 720px
XHDPI(320) : 960px 
```

因此，如果您在 HDPI 上选择 3.7" 480x800 设备，那将不会落入`sw480dp`桶中。您需要将其创建为 MDPI 设备（即密度为 160）。

# sharepoint - 这些任务在 sharepoint 2010 中都可行吗

> ID：15145908
> 
> 赞同：0
> 
> 时间：2013-02-28T21:22:48.293
> 
> 标签：sharepoint, sharepoint-2010

我对sharepoint不是很熟悉。我们的一位客户询问是否可以在 sharepoint 中设置以下内容。我相信以下都是可以实现的，但是他有几个问题，我已经在底部列出了。这是描述：

客户想要在 sharepoint 中对他的所有图像进行编目。这些图像用于营销、年度报告等。以下是他们需要的一些功能：

*   我们将设置一个子站点并使这个人成为管理员。他可以编辑几个组成员来定义谁可以拥有完全访问权限以及谁拥有只读权限。

*   让他上传图片……这是一个图片库。可能在文档库中。他需要元标记或自定义字段。描述，到期日期，其他一些。

*   给他们一些按这些元数据分组的视图。像国家。

*   发送即将到期的图像的每周报告。

*   图片过期后自动删除

*   将搜索所有元标记并返回命中的常规搜索

* * *

以下是他的问题：

几个问题（不确定这些是否可能）： - 他们希望为只读人员提供一个带有水印的低质量图像。他们必须单击以请求获得完整版本的许可。当请求此权限时，经理会收到一封电子邮件。不知道在那之后最简单的方法是什么。也许经理单击了某些内容，会将完整图像通过电子邮件发送给该人。如果这是可行的，请为我写下它是如何工作的。所以拥有完全权限的人看到完整的图像，只读的人看到水印版本。

*   是否可以仅按一个字段进行搜索，例如国家/地区。或者让他们选择对所有人进行一般搜索。

*   在sharepoint中，是否可以在图片列表中显示指纹图像？因此，如果他们搜索并获得 10 个结果，他们会看到缩略图，而不必单击每个结果，甚至可以看到基本图片。

这些都在sharepoint中可行吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:46:45.047

> 让他上传图片……这是一个图片库。可能在文档库中。他需要元标记或自定义字段。描述，到期日期，其他一些。
> 
> 给他们一些按这些元数据分组的视图。像国家。
> 
> 发送即将到期的图像的每周报告。
> 
> 图片过期后自动删除
> 
> 将搜索所有元标记并返回命中的常规搜索

第一部分 SharePoint 开箱即用提供的所有内容。电子邮件可能是最难的部分，但即便如此，它也可能是一项简单的计时器工作。

> 用于只读人员的低质量图像，顶部带有水印

根据用户安全性显示不同的图像可能很棘手。库中的每个项目都有自己的安全性，但它可能难以维护并降低性能，因此我建议将它们存储在两个列表中。一张用于水印图像，一张用于完整图像。将两者联系起来很容易。

> 是否可以仅按一个字段进行搜索，例如国家/地区。或者让他们选择对所有人进行一般搜索。

还提供了开箱即用的一个字段搜索和一般搜索，您可以使用您可能需要的任何类型的搜索创建自定义页面。

> 在sharepoint中，是否可以在图片列表中显示指纹图像？因此，如果他们搜索并获得 10 个结果，他们会看到缩略图，而不必单击每个结果，甚至可以看到基本图片。

我知道 2013 搜索提供了预览，但我不知道 2010。

# sql - 是否可以设置用户定义的会话/连接标志以在触发器中使用？

> ID：15145909
> 
> 赞同：0
> 
> 时间：2013-02-28T21:22:49.107
> 
> 标签：sql, oracle, triggers

考虑一个将 id 列设置为插入时 Oracle 序列（下一个）值的触发器。现在我想用一些额外的调试操作来扩展它。但它们应该只对某些连接/会话（即调试会话）有效。

客户端的伪代码：

*   打开与 oracle 数据库的连接
*   仅为该连接设置 mydebugflag=yes
*   插入一些东西
*   紧密连接

服务器端的伪代码（在触发器内）：

*   设置 id = someseq.next_val
*   如果 mydebugflag=yes 那么 { do_some_extra_sanity_checks(); 诊断（）；}
*   其他：完成

如何为 Oracle 数据库实现这样的逻辑？

我应该为此使用哪些 Oracle 功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T21:48:22.450

有几种方法可以做到这一点。

一种是创建一个包，在包中创建一个包全局变量（将具有会话范围），然后让您的客户端设置包变量并让您的触发器读取它。就像是

```
CREATE OR REPLACE PACKAGE pkg_debug_mode
AS
  PROCEDURE set_debug_mode( p_debug_mode IN NUMBER );
  FUNCTION  get_debug_mode
    RETURN  NUMBER;

  DEBUG_MODE_ON  constant number := 1;
  DEBUG_MODE_OFF constant number := 2;
END;

CREATE OR REPLACE PACKAGE BODY pkg_debug_mode
AS
  g_debug_mode NUMBER := DEBUG_MODE_ON;
  PROCEDURE set_debug_mode( p_debug_mode IN NUMBER )
  AS
  BEGIN
    g_debug_mode := p_debug_mode;
  END;
  FUNCTION get_debug_mode
    RETURN NUMBER
  IS
  BEGIN
    RETURN g_debug_mode;
  END;
END; 
```

客户端调用`pkg_debug_mode.set_debug_mode`设置调试模式，触发器调用`pkg_debug_mode.get_debug_mode`确定会话的当前调试模式。

```
create or replace context my_ctx using pkg_debug_mode;

CREATE OR REPLACE PACKAGE BODY pkg_debug_mode
AS
  PROCEDURE set_debug_mode( p_debug_mode IN NUMBER )
  AS
  BEGIN
    dbms_session.set_context( 'MY_CTX', 'DEBUG_MODE', p_debug_mode );
  END;
  FUNCTION get_debug_mode
    RETURN NUMBER
  IS
  BEGIN
    RETURN SYS_CONTEXT( 'MY_CTX', 'DEBUG_MODE' );
  END;
END; 
```

您的触发器可以调用该`get_debug_mode`函数，也可以通过将`SYS_CONTEXT`调用放入触发器中直接引用上下文。

# r - 更改 R 中向量内的唯一名称之一

> ID：15145910
> 
> 赞同：3
> 
> 时间：2013-02-28T21:22:51.743
> 
> 标签：r

我有 dataset$SITE 有 100 行，其中包含独特的元素“North”、“South”和“East Bar”。如何将所有带有“East Bar”的行更改为“East”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:23:18.397

```
levels(dataset$SITE)[1] = "East" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T21:52:55.760

如果`dataset$SITE`是 a `factor`，那么您想按照@DavidRobinson 的建议进行操作。
否则，您要使用以下内容。

```
 dataset$SITE[dataset$SITE == "East Bar"] <- "East" 
```

* * *

请注意，检查您是否正在处理一个因素的众多方法之一：

```
 is.factor(dataset$SITE) 
```

# android - 用模拟器开发安卓应用

> ID：15145913
> 
> 赞同：-5
> 
> 时间：2013-02-28T21:23:02.837
> 
> 标签：android

为社交网站制作安卓应用程序，应该从什么时候开始使用实际的移动设备进行测试？是否可以从模拟器本身开发整个应用程序测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:28:10.147

在您准备好使用实际测试组测试您的应用程序之前，您可以将模拟器用于所有实际目的。显然，首先将其安装在您自己的设备上并在分发到测试组之前进行测试。

# ruby - Array#slice 的重叠等价物

> ID：15145914
> 
> 赞同：11
> 
> 时间：2013-02-28T21:23:10.663
> 
> 标签：ruby, arrays

给定这个 Ruby 数组：

```
[1, 2, 3, 4, 5] 
```

像这样迭代它的最简单方法是什么？

```
[[1,2], [2,3], [3,4], [4,5]] 
```

或这个？

```
[[1,2,3], [2,3,4], [3,4,5]] 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-02-28T21:31:24.237

`each_cons`（[文档](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-each_cons)）这样做。您只需将所需块的大小传递给它，它就会将它们交给您传递的块。

如果你真的想要数组，那么你当然可以用 链接它`to_a`，例如

```
(1..5).each_cons(3).to_a 
```

# python - FileHandler 没有将输出发送到我想要的任何一个位置

> ID：15145917
> 
> 赞同：0
> 
> 时间：2013-02-28T21:23:23.847
> 
> 标签：python, logging

第一次玩日志模块。我真的有两个问题：

我在创建 FileHandler 时发现的所有示例都只使用了一个虚拟文件名，但我希望我的日志文件具有某种标题格式。

```
log = time.strftime('./logs/'+'%H:%M:%S %d %b %Y', time.localtime())+'.log'
logger = logging.getLogger('myproject')
formatter = logging.Formatter('%(asctime)s %(message)s', '%H:%M:%S %d %b %Y')
handler = logging.FileHandler(log)
handler.setFormatter(formatter)
logger.addHandler(handler)
logger.setLevel(logging.DEBUG) 
```

起初这*似乎*有效，因为创建了日志文件，但是当我杀死脚本并检查它时，里面什么都没有。在你建议使用之前`with open(log) as f:`，使用`f`代替`log`in`handler = logging.FileHandler(log)`会给我关于文件甚至没有被创建的错误。我做错了什么没有写入日志文件？是因为我试图对文件名过于聪明吗？

第二个问题可能以某种方式包含第一个问题。我真正想要的是一种同时写入控制台和日志文件的方法，因为这个脚本需要很长时间，我想衡量进度。我已经看到有关于如何做到这一点的答案，例如[这里](https://stackoverflow.com/questions/11574257/how-do-i-write-log-messages-to-a-log-file-and-the-console-at-the-same-time)，但所有这些似乎都假设我想要两个不同输出的不同级别的日志记录；我不。顺便说一句，我确实意识到如果我的脚本没有动态生成日志文件的名称，我可以做一些事情`python myscript.py | tee log.file`来避免制作不同的处理程序。

由于第一个问题涉及的变量，我觉得我无法回答第二个问题，但由于疾病和随后的睡眠不足，我现在很迷茫。如果有人能像五岁的孩子一样向我解释如何以相同的输出同时写入控制台和日志文件，我将不胜感激。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:55:58.140

您的代码正在配置一个名为“myproject”的记录器：

```
logger = logging.getLogger('myproject')
logger.addHandler(handler)
logger.setLevel(logging.DEBUG) 
```

如果您在该记录器上使用方法，一切都会正常工作：

```
logger.info('foo bar')
logging.getLogger('myproject').info('foo bar') 
```

但是如果你只使用模块级函数，它不会：

```
logging.info('foo bar') 
```

为什么？因为模块级函数使用默认的根记录器，这不是您配置的。有关其工作原理的详细信息，请参阅[文档](http://docs.python.org/2/library/logging.html#module-level-functions)。

通常，您处理此问题的方式是`logger`为每个模块创建一个模块级对象，如下所示：

```
logger = logging.getLogger(__name__) 
```

… 或类或实例属性`logger`，如下所示：

```
self.logger = logging.getLogger('{}.{}'.format(__name__, cls.__name__)) 
```

然后通过那个`logger`或`self.logger`对象做所有事情，而不是通过模块级函数。

那么，为什么还有模块级功能呢？主要是为了方便简单的程序。如果这听起来适合您，并且您想使用它们，您可以；您只需要配置根记录器而不是其他记录器。将第一行更改为：

```
logger = logging.getLogger() 
```

现在，当您配置时`logger`，您也在配置模块级功能。

# performance - 哪个更快：ScriptDb 或 SpreadsheetApp？

> ID：15145918
> 
> 赞同：12
> 
> 时间：2013-02-28T21:23:25.390
> 
> 标签：performance, google-apps-script, google-sheets

假设我有一个迭代 400 个对象列表的脚本。每个对象都有 1 到 10 个属性。每个属性都是合理大小的字符串或稍大的整数。

将这些对象保存到 ScriptDB 与将它们保存到电子表格（无需在一次批量操作中执行）的性能是否存在显着差异。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-03-01T03:25:17.143

## 执行摘要

是的，有很大的不同！**巨大的！**我不得不承认，这个实验并没有达到我的预期。

有了这么多数据，写入电子表格总是比使用 ScriptDB 快得多。

这些实验支持[Google Apps 脚本最佳实践](https://developers.google.com/apps-script/best_practices#batchOperations)中关于批量操作的断言。使用单个`setValues()`调用在电子表格中保存数据比逐行快 75%，比逐个单元快两个数量级。

另一方面`Spreadsheet.flush()`，由于性能影响，应仔细考虑使用建议。在这些实验中，单次写入 4000 个单元格的电子表格花费了不到 50 毫秒，而添加一个调用将`flush()`其增加到 610 毫秒 - 仍然不到一秒，但一个数量级的税收似乎很可笑。调用`flush()`示例电子表格中的 400 行中的每一行，使操作花费了将近 12 秒，而没有它只需要 164 毫秒。如果您一直遇到*Exceeded maximum execution time*错误，您可能会从优化代码和删除对`flush()`.

## 实验结果

所有计时都是按照[如何测量函数执行所用时间中](https://stackoverflow.com/questions/313893/how-to-measure-time-taken-by-a-function-to-execute/313903#313903)描述的技术得出的。时间以毫秒为单位。

以下是五种不同方法的一次传递的结果，两种使用`ScriptDB`，三种写入电子表格，所有方法都具有相同的源数据。（400 个对象，具有 5 个字符串和 5 个数字属性）

### 实验一

*   ScriptDB/Object 测试经过的时间：53529
*   ScriptDB/Batch 测试经过的时间：37700
*   电子表格/对象测试的经过时间：145
*   电子表格/属性测试的经过时间：4045
*   电子表格/批量测试的经过时间：32

## 效果`Spreadsheet.flush()`

### 实验二

在这个实验中，与实验 1 的唯一区别是我们`Spreadsheet.flush()`在每次通话后都进行`setValue/s`通话。这样做的成本是巨大的（大约 700%），但出于速度原因，并没有改变使用电子表格而不是 ScriptDB 的建议，因为写入电子表格仍然更快。

*   ScriptDB/Object 测试经过的时间：55282
*   ScriptDB/Batch 测试经过的时间：37370
*   电子表格/对象测试的经过时间：11888
*   电子表格/属性测试的经过时间：117388
*   电子表格/批量测试经过的时间：610

注意：这个实验经常被*Exceeded maximum execution time*杀死。

## 买者自负

您正在互联网上阅读此内容，所以它一定是真的！但要带着一粒盐。

*   这些是来自非常小的样本量的结果，可能无法完全重现。
*   这些结果测量的是不断变化的东西——虽然它们是在 2013 年 2 月 28 日观察到的，但当您阅读本文时，它们测量的系统可能会完全不同。
*   这些操作的效率受这些实验中不受控制的许多因素的影响；例如，缓存指令和中间结果以及服务器负载。
*   也许，只是也许，谷歌的某个人会读到这篇文章，并提高 ScriptDB 的效率！

## 编码

如果您想执行（或更好地改进）这些实验，请创建一个空白电子表格，并将其复制到其中的新脚本中。*这也可以[作为 gist](https://gist.github.com/mogsdad/5065231)获得。*

```
/**
 * Run experiments to measure speed of various approaches to saving data in
 * Google App Script (GAS).
 */
function testSpeed() {
  var numObj = 400;
  var numAttr = 10;
  var doFlush = false;  // Set true to activate calls to SpreadsheetApp.flush()

  var arr = buildArray(numObj,numAttr);
  var start, stop;  // time catchers
  var db = ScriptDb.getMyDb();
  var sheet;

  // Save into ScriptDB, Object at a time
  deleteAll(); // Clear ScriptDB
  start = new Date().getTime();
    for (var i=1; i<=numObj; i++) {
      db.save({type: "myObj", data:arr[i]});
    }
  stop = new Date().getTime();
  Logger.log("Elapsed time for ScriptDB/Object test: " + (stop - start));

  // Save into ScriptDB, Batch
  var items = [];
  // Restructure data - this is done outside the timed loop, assuming that
  // the data would not be in an array if we were using this approach.
  for (var obj=1; obj<=numObj; obj++) {
    var thisObj = new Object();
    for (var attr=0; attr < numAttr; attr++) {
      thisObj[arr[0][attr]] = arr[obj][attr];
    }
    items.push(thisObj);
  }
  deleteAll(); // Clear ScriptDB
  start = new Date().getTime();
    db.saveBatch(items, false);
  stop = new Date().getTime();
  Logger.log("Elapsed time for ScriptDB/Batch test: " + (stop - start));

  // Save into Spreadsheet, Object at a time
  sheet = SpreadsheetApp.getActive().getActiveSheet().clear();
  start = new Date().getTime();
    for (var row=0; row<=numObj; row++) {
      var values = [];
      values.push(arr[row]);
      sheet.getRange(row+1, 1, 1, numAttr).setValues(values);
      if (doFlush) SpreadsheetApp.flush();
    }
  stop = new Date().getTime();
  Logger.log("Elapsed time for Spreadsheet/Object test: " + (stop - start));

  // Save into Spreadsheet, Attribute at a time
  sheet = SpreadsheetApp.getActive().getActiveSheet().clear();
  start = new Date().getTime();
    for (var row=0; row<=numObj; row++) {
      for (var cell=0; cell<numAttr; cell++) {
        sheet.getRange(row+1, cell+1, 1, 1).setValue(arr[row][cell]);
        if (doFlush) SpreadsheetApp.flush();
      }
    }
  stop = new Date().getTime();
  Logger.log("Elapsed time for Spreadsheet/Attribute test: " + (stop - start));

  // Save into Spreadsheet, Bulk
  sheet = SpreadsheetApp.getActive().getActiveSheet().clear();
  start = new Date().getTime();
    sheet.getRange(1, 1, numObj+1, numAttr).setValues(arr);
    if (doFlush) SpreadsheetApp.flush();
  stop = new Date().getTime();
  Logger.log("Elapsed time for Spreadsheet/Bulk test: " + (stop - start));
}

/**
 * Create a two-dimensional array populated with 'numObj' rows of 'numAttr' cells.
 */
function buildArray(numObj,numAttr) {
  numObj = numObj | 400;
  numAttr = numAttr | 10;
  var array = [];
  for (var obj = 0; obj <= numObj; obj++) {
    array[obj] = [];
    for (var attr = 0; attr < numAttr; attr++) {
      var value;
      if (obj == 0) {
        // Define attribute names / column headers
        value = "Attr"+attr;
      }
      else {
        value = ((attr % 2) == 0) ? "This is a reasonable sized string for testing purposes, not too long, not too short." : Number.MAX_VALUE;
      }
      array[obj].push(value);
    }
  }
  return array
}

function deleteAll() {
  var db = ScriptDb.getMyDb();
  while (true) {
    var result = db.query({}); // get everything, up to limit
    if (result.getSize() == 0) {
      break;
    }
    while (result.hasNext()) {
      var item = result.next()
      db.remove(item);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-05-23T18:57:00.920

ScriptDB 已被弃用。不使用。

# svn - 有没有更好的方法来处理项目的 svn:ignore 列表？

> ID：15145919
> 
> 赞同：0
> 
> 时间：2013-02-28T21:23:27.367
> 
> 标签：svn

对于我们的项目，我们避免`global-ignores`在用户的 svn 配置文件中使用 svn，因为这些 svn 设置仅限于客户端，而不是项目的属性。我们想要一种使用类似`.gitignore`文件的方式来管理项目子目录中被忽略的文件的方法。我开发了一个简单的方案，将`.svnignore`文件与脚本结合使用，该脚本 (1)`.svnignore`在目录树中查找文件并 (2) 更新找到文件的`svn:ignore`每个目录的属性`.svnignore`。当有人更新文件时，他们只需要记住运行脚本即可；我们发现这比手动管理`svn:ignore`目录上的属性更容易。

这是脚本：

```
#!/bin/sh
# Syntax of the .svnignore file: like what "svn propset svn:ignore" accepts,
# and in addition, lines in the .svnignore file that begin with a pound sign
# (#) are ignored so that one can put comments in the file.

find $1 -depth -name .svnignore | while read file ; do
  dir="`dirname $file`"
  egrep -v '^[  ]*#' $file | svn propset svn:ignore -F - $dir
  svn update $dir
  svn commit --depth=immediates -m"Updated list of ignored files." $dir $dir/.svnignore
done
echo "Done." 
```

`.svnignore`以下是此脚本接受的文件示例：

```
# WARNING: This .svnignore file is not understood by SVN directly.
# WARNING: It is meant to be used in conjunction with our script in 
# WARNING: trunk/project/scripts/svn-update-from-svnignore.sh
autom4te.cache
Makefile
config.log
config.status
.deps
include
TAGS
CTAGS
*.o 
```

我的问题是：

1.  有没有更好的方法来完成同样的事情？
2.  您在此处看到的方法或脚本是否存在任何危险？

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T22:20:15.237

*   我无法理解`svn up`循环内部（*之前*在 WC**的根目录**中进行一次更新会更优雅）
**   将提交与 --depth=immediates 相乘也是**一个非常糟糕的**主意 - 为什么在对属性的所有更改都已应用后不使用单个提交*   find （添加`-print0`）的结果可以通过管道传输到 xargs for `svn propset`，完全消除循环*   传递给脚本 WC-root 并在 WC 的根目录中执行（一次）更新和提交似乎（对我来说）不是一个坏主意*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-02T02:52:09.763

现在对您没有多大帮助，但是 Subversion 1.8（当它发布时）将具有 Repository Dictated Configuration 这将对您有所帮助。特别是 1.8 将有一个 svn:global-ignores 属性，其工作方式类似于 global-ignores 配置选项。1.8 也将具有可继承的属性，而 svn:global-ignores 就是这样一个可继承的属性。因此，在目录上设置此属性将影响该目录下的任何内容。

[http://subversion.apache.org/docs/release-notes/1.8.html#repos-dictated-config](http://subversion.apache.org/docs/release-notes/1.8.html#repos-dictated-config)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T22:54:53.007

不要放弃如此快的全球忽略。您可以通过 SVN 外部的某种机制来更新它们，例如登录脚本或（在 Windows 上）全局策略。

当然，这仅适用于您有一个集中管理的环境，例如在公司网络中。对于开源项目，这是行不通的。但是你可能无论如何都不会使用 SVN。*

# php - Windows Azure 中的 REST API

> ID：15145925
> 
> 赞同：0
> 
> 时间：2013-02-28T21:23:53.613
> 
> 标签：php, rest, azure-storage

我正在尝试连接到 Windows Azure REST API，但总是遇到这样的问题：

```
The MAC signature found in the HTTP request '...' is not the same as any computed signature. 
```

我无法获得正确的签名。我还尝试了 Objective-C 和 Windows Azure REST API 的不同方法，但总是得到相同的错误。PHP上有完整的清单：

```
function send_request($url, $headers)
{
    if ($curl = curl_init())
    {
        curl_setopt($curl, CURLOPT_URL, $url);
        curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($curl, CURLOPT_HTTPHEADER, $headers);

        return curl_exec($curl);
        curl_close($curl);
    }
    return false;
}

function encode_string_to_sign($string_to_sign, $key)
{
    $hash = hash_hmac("sha256", $string_to_sign, $key, true);
    $signature = base64_encode($hash);

    return $signature;
}

header("Content-Type: application/xhtml+xml");

// GET Container Metadata
$url = "http://snip.blob.core.windows.net/elements?restype=container&comp=metadata";
$access_key_1 = "...";
$access_key_2 = "...";

$current_date = "Thu, 28 Feb 2013 21:10:00 GMT";

$canonicalized_headers = "x-ms-date:$current_date\nx-ms-version:2009-09-19";
$canonicalized_resource = "/snip/elements\ncomp:metadata\nrestype:container";
$string_to_sign = "GET\n\n\n\n\n\n\n\n\n\n\n\n" . $canonicalized_headers . "\n" . $canonicalized_resource;

$signature = utf8_encode(encode_string_to_sign($string_to_sign, $access_key_1));
$headers = array("Authorization: SharedKey snip:" . $signature, "x-ms-date: " . $current_date, "x-ms-version: 2009-09-19");

echo send_request($url, $headers);

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:30:45.897

如果您使用的是 PHP，为什么不使用 Windows Azure PHP SDK 来做呢？[https://github.com/WindowsAzure/azure-sdk-for-php](https://github.com/WindowsAzure/azure-sdk-for-php)

已经针对真实服务器进行了很好的测试。

# arrays - 处理 Excel 的 VBA 宏中的数组

> ID：15145926
> 
> 赞同：1
> 
> 时间：2013-02-28T21:23:59.693
> 
> 标签：arrays, excel, matlab

我正在尝试在 VB（Excel 宏）中编写一个模拟器，其中模拟的输入取自一张表中的单元格。输入将放置在多个数组中，例如 timePerUser(10) 和 bytesPerUser(10)。然后会有一些简单的 if/for/while 东西来根据数组进行计算，最后我会将结果写回 Excel。因此，Excel 将仅用于提供输入数据和显示结果，其他一切都发生在宏内部，包括更改数组中的值。

我习惯使用 Matlab，但不能将它用于这个模拟器，所以这是我的问题：

1.  我可以在 Excel 宏中使用任何现有的矩阵/数组操作吗？例如，是否有一些命令可以检查数组中的最小值或下一个最小值？Excel 函数“SMALL”将是完美的，但它似乎不适用于宏。还是我只需要用 for 循环解决这个问题？

2.  关于如何创建数组还有其他建议吗？最好有一个大矩阵，其中每一行对应于时间、数据、用户等（NxM 矩阵），还是每个参数都有单独的数组更好？

3.  如何加快矩阵/数组运算？有什么一般性的建议吗？

谢谢！奥斯卡

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-28T21:49:21.970

Excel 确实有一些简单的数组操作 - SUMPRODUCT（Matlab 等效项：A*B'）、MIN、MAX，...其中大多数，包括 SMALL，都需要使用`Application.WorksheetFunction.xxx`; 例如，函数 SMALL 可以在 VBA 中调用如下：

```
nthSmallest = Application.WorksheetFunction.Small(r, n) 
```

其中 r 是一个数组或范围，n 是介于 1 和`r.Cells.Count`

我强烈建议您对每个概念变量使用一个变量，而不是试图巧妙地处理一个二维数组中的多个实体。Speedwise 我怀疑差异很小；但是编写不可读代码的机会很重要。

至于加快速度：将变量（尤其是数组）定义为某种固定类型（而不是变体）确实很有帮助，例如：

```
Dim a(1 To 10) as Double
Dim ii as Integer 
```

让所有数组使用相同的（默认）基数可能会有所帮助。由于我自己是 Matlab 迷，我经常使用从 1 开始的数组索引 - 您可以通过添加在 VBA 中强制执行此操作

```
Option Base 1 
```

在模块的开头。此时，如果您声明

```
Dim a(10) as Double 
```

它相当于

```
Dim a(1 To 10) as Double 
```

对于不精通 VBA 的人来说也是一个很好的做法，添加

```
Option Explicit 
```

在模块的开头，因为它将确保您未声明的任何变量（或更常见的是您拼写错误）将产生解释器错误。

关于数组的另一件事：作为一个 Matlab 人，您习惯于 Matlab 根据需要增加数组大小。在 VBA 中，可以在运行时动态更改数组大小，例如使用

```
ReDim Preserve a(1 To 20) 
```

这将使数组`a`大小为 20 个元素。如果它更短，它将用零填充；如果它更长，它将被修剪。这可能很有用，但非常昂贵，因为通常需要将整个数组复制到新位置。当您事先不知道您的数组有多大时，最好高估（并检查边界）而不是每次需要变大时都重新调整 - 并在最后`ReDim`进行最终处理以使其达到正确的大小。

希望这足以让您开始！

# javascript - Ajax 请求出现 404 错误

> ID：15145929
> 
> 赞同：3
> 
> 时间：2013-02-28T21:24:12.203
> 
> 标签：javascript, jquery, ajax, jsp

我需要从对数据库进行选择的 JSP 页面中获取一些数据，然后将其放入 div 中。我需要用 ajax 来做到这一点。

这是我的代码：

```
$(function() {
    teste();
});

function teste() {
    var v1 = document.getElementById("selCodigo").value;
    alert(v1);

    $.ajax({       
       type : "GET",
       data : "turma="+v1,
       url : "busca-notas.jsp",       
       success : function(resposta){
           alert("DEU CERTO");
       },
       error : function(xhr, ajaxOptions, thrownError){
           alert(xhr.status);
           alert(thrownError);
           document.getElementById("notas").innerHTML = "ERRO";
       }
    });
} 
```

我测试了变量`v1`和它接收到的必要值，在我的 JSP 页面中，我这样做：

```
String turmaSelecionada = request.getParameter("turma"); 
```

问题是不提供给 div 的 ajax 内容超出了`xhr.status`提出的 throwedError 和未找到的 404 错误

谁能帮我？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-28T21:33:38.300

要么`busca-notas.jsp`不存在，要么与调用 Ajax 请求的 HTML 位于不同的服务器或路径上。

示例：如果您的 HTML 和 JavaScript 在这里：

```
http://www.example.com/somepath/page.html 
```

你的 PHP 代码在这里：

```
http://www.example.com/otherpath/busca-notas.jsp 
```

那么你需要使用`url: "../otherpath/busca-notas.jps"`. 有一个简单的检查方法：在浏览器中打开您的 HTML，删除路径的最后一位，并将其替换为“busca-notas.jpg”，然后看看您得到了什么。

404 也意味着，您的 JSP 代码永远不会被执行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:28:27.730

这表示您尝试执行 GET 的资源不存在。您正在执行 GET 的路径可能不正确。你能告诉你文件的结构（javascript/服务文件等......）。我建议使用浏览器开发工具或提琴手来调试正在发生的事情。

在浏览器中使用 F12（Windows）来访问开发者工具。提琴手工具也很棒！[http://www.fiddler2.com/fiddler2/](http://www.fiddler2.com/fiddler2/)

附带说明一下，如果您使用 console.log 进行调试，您将永远不会回到警报 :)

# java - Struts2 Action 正则表达式/URL 通配符

> ID：15145933
> 
> 赞同：2
> 
> 时间：2013-02-28T21:24:32.407
> 
> 标签：java, struts2

我是 Struts2 的新手，但到目前为止，我在使用 API 方面取得了不错的进展。然而，我被困在我需要摆脱的东西上。我正在使用带有 Spring 集成的 Struts2。我正在编写带有注释的 Action 类，就像你们中的许多人一样，我喜欢注释。

我的要求是 URL 将具有以下性质：

```
http://<DOMAIN>/program/program1.jspx
http://<DOMAIN>/program/program2.jspx
http://<DOMAIN>/program/program3.jspx 
```

如您所见，URL 中有某种模式，program1、program2 和 program3 变化，其余都是静态的。我很容易用 Spring MVC 处理类似的情况（我没有选择在当前项目中使用 Spring MVC），就像`"/program/{program_name}.jspx"`在我的其他项目中一样。

但是当我在struts2中使用相同的东西时，我得到了错误。我的动作类如下：

```
@Result(name="program", location="program", type="tiles")
public class ProgramAction extends ActionSupport {

   @Action("program/{programName}")
   public String getProgramPage() {
     // few more lines of code  
     return "program";      
  }
} 
```

错误是

```
2013-02-28 15:46:35.591 WARN  [http-bio-8080-exec-3] CommonsLogger.java:60 
Could not find action or result
com.opensymphony.xwork2.config.ConfigurationException: There is no Action mapped for namespace / and action name program1.
at com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:189) ~[xwork-core-2.2.1.jar:2.2.1]
at org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:61) ~[struts2-core-2.2.1.jar:2.2.1]
at org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39) ~[struts2-core-2.2.1.jar:2.2.1]
at com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:58) ~[xwork-core-2.2.1.jar:2.2.1]
at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:475) ~[struts2-core-2.2.1.jar:2.2.1]
....
.... 
```

我的`struts.xml`文件如下：

```
<struts>
<constant name="struts.convention.default.parent.package" value="default"/>
<constant name="struts.action.extension" value="jspx" />
<constant name="struts.mapper.alwaysSelectFullNamespace" value="false" />
<constant name="struts.enable.DynamicMethodInvocation" value="true" />

<package name="default" extends="struts-default, json-default, rest-default" namespace="/">       
    <result-types>
        <result-type name="tiles" class="org.apache.struts2.views.tiles.TilesResult"/>
        <result-type name="json" class="org.apache.struts2.json.JSONResult"/>
    </result-types>
</package>
</struts> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:46:06.373

你的动作名称中有一个斜线。默认情况下，struts 不喜欢这样来更正那个添加：

```
<constant name="struts.enable.SlashesInActionNames" value="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:47:08.160

这是因为您在方法上定义了动作注释。`<s:a namespace="/" action="program/program1" method="programPage" />`在 JSP 中尝试。

# google-maps - Google Maps API - 来自同一个融合表的多个图层

> ID：15145936
> 
> 赞同：0
> 
> 时间：2013-02-28T21:24:41.133
> 
> 标签：google-maps, google-maps-api-3

是否可以从地图中的同一个融合表中加载许多不同的图层？我正在尝试，但它不起作用。fusiontablelayer 有限制吗？

```
 var Mu = new google.maps.FusionTablesLayer({
        query: {
            select: 'geometry',
            from: '1Md0G-C9PCc4ulq7hDyOPn8ZCaJ0a5WHyATrPC3Q',
            where: "name = '02005'"
        },

            styles: [{
                polygonOptions: {
                    fillColor: "#ff9900",
                    fillOpacity: 0.7,
                    strokeColor: "#808080",
                    strokeWeight: 6
                }
            }]

    });
    Mu.setMap(map);

    var mun = new google.maps.FusionTablesLayer({
        query: {
            select: 'geometry',
            from: '1Md0G-C9PCc4ulq7hDyOPn8ZCaJ0a5WHyATrPC3Q',

        },

            styles: [{
                polygonOptions: {
                    fillColor: "#008000",
                    fillOpacity: 1.0,
                    strokeColor: "#000080",
                    strokeWeight: 1
                }
            }]

    });
    mun.setMap(map); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:31:43.173

如[“限制”下的文档](https://developers.google.com/maps/documentation/javascript/layers#FusionTables)中所述，可以在单个地图上加载多达 5 个 FusionTablesLayers（无论是来自同一张表还是多个表都无关紧要），其中只有一个图层可以动态设置样式最多 5 种样式。

# java - 需要帮助优化涉及数百万条记录的非常慢的 DB2 SQL 查询

> ID：15145938
> 
> 赞同：0
> 
> 时间：2013-02-28T21:24:42.183
> 
> 标签：java, sql, db2, query-optimization

我正在尝试优化以下 SQL，但我对 SQL 优化的了解相当浅，而且我没有取得太大进展。（由于公司政策，我概括了列和其他标识符）在当前状态下，此 SQL 介于根据负载运行 1 到 2 分钟。VKTINFO 表包含大约 100 万条记录，GNTINFO 表包含大约 300 万条记录。如果这是一个批处理过程，通常 1-2 分钟不会有什么大不了的，但我们有代理需要这些信息，并且尽快 - 更糟糕的是，我们的系统最终会超时并返回一个抱歉的错误用户。但是，延长超时窗口不是一种选择。我们还有其他条件可供搜索，例如名字、邮政编码、帐户类型、帐户状态、

如果对如何操纵此 SQL 以加快选择速度有任何建议/技术，我将非常感谢您对此事的任何想法。如果需要更多信息，我很乐意提供尽可能多的仍然符合我们公司政策的信息。

**编辑：** 这里要求的是 VKTINFO 和 GNTINFO 表的索引。

*   帐号
*   截止日期
*   生效日期

gnt_account_info 和 vkt_account_info 的索引：

*   pi_account_num
*   pi_policy_num_gid

gntnad 和 vktnad 表的索引：

*   nad_account_number
*   nad_name_type

gntpolrf 和 vktpolrf 表的索引：

*   xrf_account_number

```
select
processing_system,
total_premium,
quote_by,
email_address,
account_number,
expiration_date,
account_state,
xrf_file,
customer_name
from
(
   select
   'ABCD' as processing_system,
   total_premium,
   quote_by,
   email_address,
   account_number,
   expiration_date,
   account_state,
   xrf_file,
   customer_name
   from vktinfo 
    left outer join vkt_account_info on account_number = pi_account_number 
    left outer join vktpolrf on account_number = xrf_account_number 
    left outer join VKTNAD on account_number = nad_account_number
    and history_expiration_date=nad_history_expiration_date
    and nad_name_type='HA'
   WHERE effective_date >= '2013-02-01'
   AND effective_date <= '2013-02-28'
   AND customer_name like '_SMITH%'
   AND account_state = 'South Carolina'
   union all
   select
   'EFGH' as processing_system,
   total_premium,
   quote_by,
   email_address,
   account_number,
   expiration_date,
   account_state,
   xrf_file,
   customer_name
   from gntinfo 
    left outer join gnt_account_info on account_number = pi_account_number 
    left outer join vktpolrf on account_number = xrf_account_number 
    left outer join GNTNAD on account_number = nad_account_number
    and history_expiration_date=nad_history_expiration_date
    and nad_name_type='HA'
   WHERE effective_date >= '2013-02-01'
   AND effective_date <= '2013-02-28'
   AND customer_name like '_SMITH%'
   AND account_state = 'South Carolina'
)
a
order by customer_name ASC fetch first 1000 rows only WITH UR 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-01T01:28:49.893

我没有一个坚如磐石的答案给你。但我确实有一些你可以尝试的东西。我了解您无权获取执行计划。

*   与在那里待过一段时间的人核实一下，并询问您是否*应该*能够运行 EXPLAIN。
*   您可能需要关于 account_state 的索引。经验法则：索引连接条件或 WHERE 子句中使用的每一列。有时多列索引比几个单列索引执行得更好。
*   *尝试移动可以*移动到外部查询 的子查询的 WHERE 子句的每个部分，并测试两件事。
    *   在外部查询的普通 WHERE 子句中使用这些部分。
    *   重新排列外部查询，而不是*从*UNIONed 子查询中进行选择，而是对其进行内部联接。
*   确定是否有任何左外连接可以替换为内连接。存储“nad_name_type”的表可能是内部连接的候选者。（你明白为什么吗？）
*   测试子查询作为视图实现时的性能。您可能需要 DBA 帮助。（如果他们不让你运行 EXPLAIN，他们可能也不让你创建视图。）
*   测试子查询在实现为具体化查询表时的性能。您可能还需要 DBA 帮助。

# multithreading - 使用递归方法遇到 AsyncTask 问题

> ID：15145943
> 
> 赞同：0
> 
> 时间：2013-02-28T21:24:53.390
> 
> 标签：multithreading, android-asynctask

我一直在阅读有关 AsyncTasks 和 Hanlders 和 Loopers 的信息，但我仍然无法弄清楚我的代码哪里出错了。我正在尝试运行将查看井字游戏网格并确定计算机的最佳移动的代码。我希望这段代码在后台运行，因为它可能需要一些时间，然后我可以用一个文本框更新 UI 级别，上面写着“我在想”。我已经尝试了很多不同的方法，但都没有成功。

```
private class PostTask extends AsyncTask<String, Integer, String> {  
    private Board _b;
    private Welcome.Player _opp;
    private int _depth;

    @Override 
    protected void onPreExecute() {  
        super.onPreExecute();
    }

    protected void SetVars(Board b, Player p, int depth){
        _b = b;
        _opp = p;
        _depth = depth;
    }

    @Override 
    protected String doInBackground(String... params) {
        Looper.prepare();
        try{
            _bestMove = _b.GetBestMove(_opp,_depth);
        }
        catch(Exception err){
            _bestMove = -1;
        }
       return "All done";
    }  

    @Override 
    protected void onProgressUpdate(Integer... values) {  
       super.onProgressUpdate(values);  
    }  

    @Override 
    protected void onPostExecute(String result) {  
       super.onPostExecute(result);
       if(_bestMove == -1){
           TextView tv = (TextView) findViewById(R.id.tv_Score);
           tv.setText("Had and error, couldn't make a move."); 
       }
       FollowUpComputerMove(this);
   } 
```

上面的代码恰好可以运行 5 次，然后它就崩溃了。当我在调试器中观看时，我看到正在创建名为 Thread<#> AsyncTask #1 的新线程。一旦我到达其中的五个 AsyncTask，它就会返回尝试抓取第一个 AsyncTask 并崩溃。当它崩溃时，我会看到 ThreadPoolExecutor.class 文件。

我还读到我不应该同时使用 AsyncTask 和 Looper 对象，所以我尝试取出 Looper.prepare() 语句，但随后我的 AsyncTask 立即失败并显示错误消息：

```
Can't create handler inside thread that has not called Looper.prepare() - AsyncTask inside a dialog 
```

我反复读到您不应该尝试从 AsyncTask 更新 UI，并且上述错误通常是因为这个，但 GetBestMove 没有更新 UI 线程。当我跟踪查看错误出现的位置时，调用构造函数说它找不到类时失败。

谁能指出我正确的方向？我的最终目标是使用一个主线程和一个后台线程，并在计算机需要移动时继续重复使用后台线程。我知道当我以单线程方式运行该程序时，递归方法 GetBestMove 有效。但是在运行该方法时，某些动作的屏幕冻结时间过长。太感谢了。

-NifflerX

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:28:13.200

很抱歉回答我自己的问题，但我面临的问题与递归无关。我正在调用的类正在扩展类 Activity，并且在尝试从 AsyncTask 调用它时，程序出错了。当我从类定义中删除扩展活动时，它又开始工作了。对不起这个帖子。

-NifflerX

# c# - 计算一系列双打的重量平均值

> ID：15145944
> 
> 赞同：-1
> 
> 时间：2013-02-28T21:24:54.237
> 
> 标签：c#, double

我有很长的双数序列（假设不超过 100 000）。我们还假设每个数字不大于 200 000。如果我下面的算法适合这样的计算？它会足够精确吗？

例如，如果我将 100 000 乘以 200 000 相加，然后除以 100 000，我希望得到介于 199 999 和 200 001 之间的值，但不是 200 100 或类似的值（尽管对于这些特定数字，我的班级似乎工作得很好，谢谢给 MarcinJuraszek 进行测试）

```
class Candle
{

    public Candle(double value)
    {
        ValueUpdated(value);
    }

    private double sum = 0;
    private double count = 0;

    public void ValueUpdated(double value)
    {
        sum += value;
        count++;
    }

    public double WeightAverage
    {
        get { return sum / count; }
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:33:45.313

双精度浮点数有 52 个小数位，即它们大约有 log10(2 ^ 52) ~= 16 个小数位的精度。由于您只需要 6 位小数的精度，因此您应该完全没问题。

不过，为什么不测试呢？

```
double sum = 0.0;
int count = 100000;
for (int i = 0; i < count; ++i) {
    sum += 200000.0;
}
double average = sum / (double)count;
Console.WriteLine(average); // prints out exactly 200000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-28T21:29:07.587

你的循环肯定有错误。刚试过：

```
var candle = new Candle(200000);

for (int i = 1; i < 100000; i++)
    candle.ValueUpdated(200000);

Console.WriteLine(candle.WeightAverage); 
```

结果是可预测且正确的：**200000**！

根据[MSDN](http://msdn.microsoft.com/en-us/library/678hzkk9%28v=vs.71%29.aspx)双精度设置为 15-16 位，这远远超过你的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:43:23.510

如前所述，a`double`的精度为小数点后 15-16 位。因此，只要您的值的**范围**（直接值或加权平均值的值乘以权重）为 15 位或更少，您应该没问题。

# c# - 如何增加网格视图中的文本大小

> ID：15145953
> 
> 赞同：0
> 
> 时间：2013-02-28T21:25:46.917
> 
> 标签：c#, wpf, gridview

我正在动态加载一个 xaml 文件。这是 xaml 的样子：

```
<ListView  Grid.Row="2" BorderBrush="White"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Name="ListView1"
    ItemsSource="{Binding Path=line}"
    HorizontalAlignment="Stretch">

    <ListView.View>
        <GridView>
            <GridViewColumn Header="Lines"
                DisplayMemberBinding="{Binding Path=aline}" />
        </GridView>
    </ListView.View>
</ListView > 
```

无法更改 xaml。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:58:33.660

你可以`FontSize`在你的xaml中更改。

```
<ListView  Grid.Row="2" BorderBrush="White" FontSize="20" ................. 
```

但是，如果您从文件加载 Xaml，则必须先加载它，然后更改 FontSize

例子：

```
using (FileStream stream = new FileStream("c:\\test.xaml", FileMode.Open))
{
    var listView = (ListView)XamlReader.Load(stream);

    // change font size
    listView.FontSize = 20;

    // apply listView to whatever you need
} 
```

# php - 包含变量参数

> ID：15145954
> 
> 赞同：0
> 
> 时间：2013-02-28T21:26:05.593
> 
> 标签：php

我确定我使用了错误的方式，但这是我第一次尝试使用 php。下一个代码不起作用。该变量`$file`是在本地定义的，但我不知道如何使用全局变量。

**article.php** 在这个文件中我有一个列表：

```
<ol>
  <li><a <?php $file="a.php"; ?> href="article.php" > title 1 </a>  </li>
  <li><a <?php $file="b.php"; ?> href="article.php" > title 2  </a>  </li>
</ol> 
```

**这个文件中的article.php**我想用这个

```
 <?php   include("articles/$file"); ?> 
```

如何正确定义`$file`？有没有更好的方法来加载`a.php`和`b.php` ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T21:46:00.653

你可以这样做：

**文章.php**

```
<ol>
  <li><a href="article.php?page=a" > title 1 </a></li>
  <li><a href="article.php?page=b" > title 2  </a></li>
</ol> 
```

这会将变量传递`page`给`article.php`.

**文章.php**

```
if( $_SERVER[REQUEST_METHOD] == 'GET' && !empty($_GET[page]) ) {
    $path = $_GET[page] . ".php"; // transform into a filename (a.php)

    if( file_exists($path) ) {
        include_once $path;
    }
} 
```

在这里，您将检查请求的方法是否为空`GET`以及`page`变量是否为空。然后添加`.php`到变量中以使其成为完整的文件名并检查它是否存在。如果是这样，它将被包括在内。请注意，这没有经过消毒。您可以添加一组可接受的文件名并遍历它们以检查它们是否有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T21:30:20.213

你这样做是不对的。

每个 php 文件执行就像服务器上单独的应用程序执行一样。`forgets`执行代码并将页面发送到浏览器后服务器所有变量。您不能像那样将数据从一页传递到另一页。

要将某些值传递到下一页，您必须使用以下方法之一：

*   发布或获取
*   曲奇饼
*   会议

PHP web 应用程序在这方面非常特殊，如果你想用 PHP 编写 web 应用程序，你必须完美地学习这一点。

更多信息在这里：

[PHP 将变量传递到下一页](https://stackoverflow.com/questions/871858/php-pass-variable-to-next-page)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-28T21:33:28.693

使用例如 $_GET 传递它：

```
<ol>
  <li><a href="article.php?f=a" > title 1 </a>  </li>
  <li><a href="article.php?f=b" > title 2  </a>  </li>
</ol> 
```

包含任何没有完整性检查的文件是非常不安全的。我建议使用白名单：

```
$file = $_GET['f'];
switch ($file){
   case 'a':
   case 'b':
      include('articles/'.$file.'.php');
      break;
   default:
      // don't do anything
} 
```

高温高压

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-28T21:46:20.740

您可能试图做这样的事情（这是通过 HTTP GET 传递一些值）。

* * *

第 1 页 (page1.php) - 包含带有参数`file`和值的链接`page3`

```
<a href="page2.php?file=page3"> 
```

* * *

第 2 页 (page2.php) - 应该在 URL 中使用“文件”参数打开的页面

```
<?php
    $file = $_GET["file"]; // takes parameter "file" from URL
    include($file."php");  // Dot is used for "adding" strings
?> 
```

* * *

第 3 页 (page3.php) - 要包含的测试页面

```
<?php
    echo "This is included page3.php!"
?> 
```

* * *

将此视为最简单的学习代码。在实际应用中有很多事情要做。

“在现实世界中”您必须检查（通过使用 IF 语句）：

1.  如果使用 GET 请求 ( `$_SERVER[REQUEST_METHOD] == 'GET'`)调用文件
2.  如果url中有参数`!empty($_GET['file'])`
3.  如果存在 URL 中提供的名称的文件`file_exists($file."php")`

`page2.php`为了避免 PHP 致命错误，当有人手动将 URL 写入您的时，没有参数或文件名错误。

Aarolama Bluenk 用这些必要的事情写了答案（见下文/上文）。

# c++ - STL 映射输出迭代器查找值

> ID：15145955
> 
> 赞同：1
> 
> 时间：2013-02-28T21:26:06.290
> 
> 标签：c++, templates, stl, iterator, output

我正在尝试创建一个通用的函数，并将输出迭代器带到任何容器类型（即，无论分配器如何，都是一种特定类型的映射）。

但是，我想知道itOut引用的地图是否已经包含一个元素，如果是，更新它

```
template<typename OutputIterator>
static void foo(const std::wstring& rstr, OutputIterator itOut)
{
    // Insert two items into the map that itOut references
    itOut++ = TokenPair(t, 1);
    itOut++ = TokenPair(t, 2);

    // This here I don't know how to do
    if(somehow check the map already contains t)
    {
        map[t] = 5;
    }
} 
```

肯定有办法解决这个问题吗？

这似乎是最好的方法，因为程序的其他部分正在尝试传递具有**相同对但分配器不同的映射。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-06T12:15:18.920

我采用了 Andy Prowl 建议的解决方案，该方法被模板化以采用适当的地图类型。这样分配器就变得无关紧要了。

# php - 压缩压缩文件中没有额外文件夹的文件夹

> ID：15145957
> 
> 赞同：0
> 
> 时间：2013-02-28T21:26:17.817
> 
> 标签：php, zip

所以，我知道压缩文件夹及其内容非常容易，因为 php.net 和 stackoverflow 充满了示例代码。我也在尝试压缩一个文件夹。这是我的代码：

```
$zip = new ZipArchive;
$zip->open('myzip.zip', ZipArchive::CREATE);
foreach (glob("/Volumes/Data/Users/username/Desktop/Archive/some/thisFolder/*") as $file) {
    $zip->addFile($file);
}
$zip->close(); 
```

我的脚本在一个文件夹中运行，比如在桌面上，我想压缩`thisFolder`它的内容。上面的代码有效。但是，问题是当我解压缩`myzip.zip`创建的文件时，我得到了一个类似的结构

```
Volumes>Data>Users>username>Desktop>Archive>some>thisFolder 
```

然后我`thisFolder`在这种情况下找到第 8 个文件夹 ( ) 中的内容。如何更改此代码，以便在解压缩时`myzip.zip`，我可以直接看到包含其中内容的文件夹`thisFolder`，而不必在获取我的内容之前浏览文件夹 7 次？

我试图改变路径和愚蠢的事情。但是，它不起作用。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:49:41.683

如果您希望文件中的所有内容都是相对于您的起始文件夹的名称，请使用`chdir()`从那里开始：

```
chdir("/Volumes/Data/Users/username/Desktop/Archive/some/thisFolder");
foreach (glob("*") as $file) {
    $zip->addFile($file);
} 
```

实际上，我认为当`$file`是子目录时这不会起作用——`addFile`不会自动递归。文档中有一条注释显示了如何编写递归 zip 函数：

[http://www.php.net/manual/en/ziparchive.addemptydir.php](http://www.php.net/manual/en/ziparchive.addemptydir.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:34:58.987

```
bool ZipArchive::addFile ( string $filename [, string $localname ] ) 
```

filename 要添加的文件的路径。

localname ZIP 存档中的本地名称。

您可以对`pathinfo`循环中的每个 $file 使用该函数，以便在没有路径的情况下检索文件名，然后将其用作 addFile 方法的第二个参数。

路径信息文档[在这里](http://php.net/pathinfo)

这是一个可以解决您的问题的示例：

```
// Create your zip archive
$zip = new ZipArchive;

// open it in creation mode
$zip->open('myzip.zip', ZipArchive::CREATE);

// Loop on all your file
$mask = "/Volumes/Data/Users/username/Desktop/Archive/some/thisFolder";
$allAvailableFiles = glob($mask . "/*")
foreach ($allAvailableFiles as $file)
{
    // Retrieve pathinfo
    $info = pathinfo($file);

    // Generate the internal directory
    $internalDir = str_replace($mask, "", $info['dirname']);

    // Add the file with internal directory
    $zip->addFile($file, $internalDir . "/" . $info['basename']);
}

$zip->close(); 
```

# java - Java中是否有Pohlig-Hellman算法的实现？

> ID：15145959
> 
> 赞同：1
> 
> 时间：2013-02-28T21:26:23.230
> 
> 标签：java, algorithm

我正在寻找 Java 中[Pohlig-Hellman 算法](http://en.wikipedia.org/wiki/Pohlig%E2%80%93Hellman_algorithm)的实现，但我找不到任何可以下载的源代码。我得到的最接近的是对[某人图书馆](http://www.redbrick.dcu.ie/~rob/MSSF/pk-crypto/part2/PohligHellman.html)的描述，但找不到代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:35:55.480

这似乎是一个实现： [http ://www.cs.miami.edu/~burt/learning/Csc598.0/PohligHellman.java](http://www.cs.miami.edu/~burt/learning/Csc598.0/PohligHellman.java)

编辑：从上面的链接添加代码：

```
package polighelex;

/**
 * Title:        Example of Polig Hellman method of Discret Logs
 * Description:
 * Copyright:    Copyright (c) 2001
 * Company:
 * @author Burton Rosenberg
 * @version 1.0
 */

public class PohligHellman {

    public PohligHellman() {
    }
    public static void main(String[] args) {
        PohligHellman ph = new PohligHellman();
        ph.entryPoint(12) ;
    }

    public void entryPoint(int mystery_index)
    { 
        int gen = 3 ;
        int modu = 17 ;
        int order = 16 ;

        // prove 3 generates Z/17Z
        System.out.println("Demonstrate that 3 generates Z/17Z.") ;
        this.cycle(gen,modu) ;
        System.out.println() ;

        // calculate and check gen_inv
        int gen_inv = pwr ( gen, order-1, modu ) ;
        System.out.println( gen + " * " + gen_inv + " = " + (gen*gen_inv)%17);
        System.out.println();

        setMagicPower( 2, order ) ;
        int mp = getMagicPower();
        int possible_coeff_1 = pwr( gen, mp, modu ) ;
        System.out.println("We should either get 1 or " + possible_coeff_1 +
                " during PH index extractions" ) ;

        // create mystery number
        int mystery = pwr( gen, mystery_index, modu ) ;
        System.out.println("Mystery: " + mystery );

        int coeff_index = 0 ;
        int coeff_power = 1 ;
        while ( isNextMagicPower() )
        {
            // kill all but leading term of current_factor-adic expansion
            // of index of mystery
            System.out.println("magic power: " + getMagicPower());
            int this_reduction = pwr( mystery, nextMagicPower(), modu ) ;

            System.out.println(coeff_index + ", reduction: " + this_reduction );
            if ( this_reduction==possible_coeff_1 )
            {
                // coeff is 1
                System.out.println(coeff_index + ", coeffic: " + 1 ) ;
                mystery = mystery * pwr(gen_inv,coeff_power,modu) % modu ;
                System.out.println("New mystery: "+ mystery );
            }
            else
            {
                // coeff is 0
                System.out.println(coeff_index + ", coeffic: " + 0 ) ;
            }
            coeff_index++ ;
            coeff_power *= 2 ;
        }

    }

    int pMagicPower ;
    int pCurrentFactor ;

    public void setMagicPower( int current_factor, int group_order )
    {
        // ASSERT : current_factor | group_order
        pMagicPower = group_order ;
        pCurrentFactor = current_factor ;
    }

    public boolean isNextMagicPower()
    {
        if ( pMagicPower % pCurrentFactor == 0 ) return true ;
        else return false;
    }

    public int getMagicPower()
    {
        return pMagicPower / pCurrentFactor ;
    }

    public int nextMagicPower( )
    {
        return pMagicPower = pMagicPower/pCurrentFactor ;
    }

    public int pwr(int base, int expon, int modu)
    {
        // recursive base^expon % modu
        base %= modu ;
        if (expon==0) return 1 ;
        if (expon==1) return base ;
        if ((expon%2)==0 )
        {
            int t = pwr( base, expon/2, modu ) ;
            return t*t % modu;
        }
        else
        {
            int t = pwr( base, expon-1, modu ) ;
            return base*t % modu ;
        }
    }

    public int cycle(int gen, int modu)
    {
        // Assume gen^i =1 % modul for some i>0
        int g = gen ;
        int i = 1 ;
        while ( g!=1 )
        {
            System.out.println(i + ": " + g) ;
            g = (g*gen)%modu ;
            i++ ;
        }
        System.out.println(i + ": " + g) ;
        return i ;
    }
} 
```

# spring - Spring配置文件：占位符

> ID：15145960
> 
> 赞同：2
> 
> 时间：2013-02-28T21:26:23.843
> 
> 标签：spring, embed, placeholder

是否可以在值字符串中嵌入占位符？

例如：`${database.${environment}.url}`，`${enivronment}`占位符在哪里。

```
<bean id="dataSource" class="org.apache.tomcat.jdbc.pool.DataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://${database.${environment}.url}"/>
    <property name="username" value="${database.username}"/>
    <property name="password" value="${database.password}"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:46:25.203

是的，这是可能的。

请参阅从 spring 文档中检索到的以下示例。您的问题的答案由以下占位符定义给出：**jdbc:${dbname}**

示例 XML 上下文定义：

```
 <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
   <property name="driverClassName"><value>${driver}</value></property>
   <property name="url"><value>jdbc:${dbname}</value></property>
 </bean> 
```

示例属性文件：

```
 driver=com.mysql.jdbc.Driver
 dbname=mysql:mydb 
```

spring 文档的来源：

*   [http://static.springsource.org/spring/docs/1.1.5/api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html](http://static.springsource.org/spring/docs/1.1.5/api/org/springframework/beans/factory/config/PropertyPlaceholderConfigurer.html)

# c# - C# HttpWebRequest 与浏览器

> ID：15145962
> 
> 赞同：0
> 
> 时间：2013-02-28T21:26:32.297
> 
> 标签：c#, http, rest, networking, httpwebrequest

我正在尝试与 Shopping.com REST 服务集成。所以我编写了一个简单的（最少代码）C# 应用程序来使用类
检索 XML 数据。`HttpWebRequest`我用于`StopWatch`基准测试，响应时间（包括`Stream.ReadToEnd()`）大约是 1300-1700 毫秒。

听起来可能不错，但后来我用 Fiddler 测试了 Chrome 浏览器的响应时间，响应时间约为 600-800。

我读过几篇文章。一些人建议将 HttpWebRequest.Proxy 设置为 null /`WebRequest.DefaultWebProxy`但它并没有做出重大改进。

这里的请求网址：
[http ://sandbox.api.shopping.com/publisher/3.0/rest/GeneralSearch?apiKey=78b0db8a-0ee1-4939-a2f9-d3cd95ec0fcc&trackingId=7000610&keyword=nikon](http://sandbox.api.shopping.com/publisher/3.0/rest/GeneralSearch?apiKey=78b0db8a-0ee1-4939-a2f9-d3cd95ec0fcc&trackingId=7000610&keyword=nikon)

那么，我应该怎么做才能达到这个响应时间呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:46:20.123

您是否启用 gzip 和放气？

此外，当您第一次在代码中执行 Web 请求时，会进行预热以加载必要的程序集、初始化服务点并建立 HTTP 连接，因此请务必查看第二次和后续执行的时间。

编辑：抱歉，您仍然需要使用 GZipStream 或 DeflateStream 解码结果，但这至少给了您这个想法。有关更多信息，请参见此处：[HttpWebRequest 和本机 GZip 压缩](https://stackoverflow.com/questions/839888/httpwebrequest-native-gzip-compression)

```
var timer = Stopwatch.StartNew();

var url = "http://sandbox.api.shopping.com/publisher/3.0/rest/GeneralSearch?apiKey=78b0db8a-0ee1-4939-a2f9-d3cd95ec0fcc&trackingId=7000610&keyword=nikon";
var webRequest = WebRequest.Create(url);
webRequest.Headers.Add(HttpRequestHeader.AcceptEncoding, "gzip, deflate");
using (var webResponse = webRequest.GetResponse())
using (var responseStream = webResponse.GetResponseStream())
using (var streamReader = new StreamReader(responseStream))
{
    var content = streamReader.ReadToEnd();
}

var timeSpan = timer.Elapsed;
Console.WriteLine(timeSpan); 
```

# msdeploy - 使用 MSDeploy 参数在 Web Deploy 包中设置“其他提供程序设置”

> ID：15145963
> 
> 赞同：4
> 
> 时间：2013-02-28T21:26:31.690
> 
> 标签：msdeploy, webdeploy, dac

**更新：请参阅下面的微软官方回复。我想有一个非官方的黑客来完成这个，所以我把这个问题留了下来。**

**更新 2：[就这个问题向 Microsoft 投票支持我的 WebDeploy 功能请求](http://aspnet.uservoice.com/forums/41199-general-asp-net/suggestions/3705504-webdeploy-parameters-support-for-modifying-the-ad)。**

我在我的商店大量使用 MSDeploy，并且花了几个小时试图定义一个 msdeploy 参数，该参数将在部署时修改部署提供程序的“附加提供程序设置”。在网上搜索和使用 Reflector on the Web Deploy 二进制文件时，我对此一无所知。

具体来说，我试图允许命令行选项来操作dbDacFx 提供程序的[DacDeployOptions](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.dac.dacdeployoptions.blockwhendriftdetected.aspx)的“DropObjectsNotInSource”和“BlockWhenDriftDetected”设置。

我已经尝试了所有我能想到的 XPath 表达式，以从 manifest.xml 文件中修改 DACFx 选项，如下所示：

```
<sitemanifest>
  <dbDacFx path="C:\Database.dacpac" 
           DropObjectsNotInSource="False"
           BlockOnPossibleDataLoss="True" /> 
</sitemanifest> 
```

将 msdeploy`setParam`与 kind 一起使用`DeploymentObjectAttribute`始终无法在`//@DropObjectsNotInSource`.

我怀疑它失败了，因为 的值`DropObjectsNotInSource`实际上存储在包的 archive.xml 文件中提供者节点的属性“MSDeploy.MSDeployProviderOptions”中。（此属性值似乎是 Microsoft.Web.Deployment.DeploymentProviderOptions 的 .Net 序列化实例，因此使用普通的旧 XPath 操作它会非常困难。）

是否可以在部署时修改这些额外的提供程序设置？

* * *

**更新：**我通过他们的博客向 Microsoft Web Deploy 团队发送了一封电子邮件，并在此处发帖。Web Deploy 团队对我的回复非常棒（感谢 Harsh 和 Ranjith！）。不幸的是，官方的说法是不支持。

> 来自：Ranjith Mukkai Ramachandra ...@microsoft.com
> 
> 主题：回复：MSDeploy setParam 可以修改“其他提供程序设置”吗？
> 
> 日期：美国东部标准时间 2013 年 2 月 15 日下午 5:20:46
> 
> 收件人：Web 部署支持
> 
> 嗨史蒂夫，
> 
> 抱歉，目前不支持此功能。
> 
> 谢谢， 兰吉斯

# google-visualization - 具有不同 X 值的图形系列

> ID：15145969
> 
> 赞同：3
> 
> 时间：2013-02-28T21:26:45.703
> 
> 标签：google-visualization

我正在尝试使用 Google Charts 绘制一系列具有不同 x 值的数据集。然而，似乎所有折线图和散点图仅支持所有系列的 1 x 值。

我拥有的数据集基本上是这样的 csv 字符串：

```
Set1:
x1, x2, x3, x4
y1, y2, y3, y4

Set2:
x5, x6, x7, x8
y5, y6, y7, y8 
```

每个系列中的 x 可能相同，也可能不同。

我宁愿只能够将 x 和 y 值放入图表中，而不是遍历所有数据以找到 x 值，然后确保每个集合具有相同的 x 值。

是否可以？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-01T01:41:58.517

是的。您可以多次使用相同的“X”值。

```
var data = new google.visualization.DataTable();
data.addColumn('number', 'X');
data.addColumn('number', 'Set 1');
data.addColumn('number', 'Set 2');
data.addRows([
  [x1, y1, null],
  [x2, y2, null],
  [x3, y3, null],
  [x4, y4, null],
  [x5, null, y5],
  [x6, null, y6],
  [x7, null, y7],
  [x8, null, y8],
]); 
```

或者，您可以将它们全部作为同一系列的一部分（如果您想要一种颜色）。只要您不将它们与线连接起来，您就无法区分它们。如果您愿意，您可以多次使用相同的 X 值，每个 Y 值都有不同的点。

我会编写一个函数来将您的 CSV 值转换为上述格式。

# java - 使用 Play 2.0.4 设置 oracle 数据库

> ID：15145970
> 
> 赞同：1
> 
> 时间：2013-02-28T21:27:00.050
> 
> 标签：java, oracle, playframework, intellij-idea, playframework-2.0

我正在尝试通过 Play Framework 2.0.4 连接到 Oracle 数据库。

我不断收到配置错误“找不到驱动程序：[oracle.jdbc.driver.OracleDriver]”。

涉及的软件

Windows 7 64bit / IntelliJ 12.0.4 / Play 2.0.4 / Java JDK 1.7 64bit

我从 oracle 下载了 ojdbc6-11.jar 文件，并通过文件 -> 项目结构 -> 库将其添加到 IntelliJ 中的库中。我还将文件添加到类路径和路径，但它似乎不起作用。

application.conf中的相关信息如下

```
db.default.url="jdbc:oracle:thin:@myserverinformation:port/servicename"

db.default.driver=oracle.jdbc.driver.OracleDriver

db.default.user=user

db.default.password=pass 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-28T21:37:28.867

Did you add it to your project's lib folder as follow: yourProject/lib/ojdbc6-11.jar

That is the directory where Play looks for external library. Alternatively, you may use maven to install libraries (given that they are available there), see the Build.scala file in yourProject/project

See: [http://www.playframework.com/documentation/2.0.1/SBTDependencies](http://www.playframework.com/documentation/2.0.1/SBTDependencies)

# facebook - facebook 登录引发 Oauth 异常（未找到证书）

> ID：15145971
> 
> 赞同：0
> 
> 时间：2013-02-28T21:27:05.250
> 
> 标签：facebook

看起来我在 facebook（和 twitter）上的问题永远不会结束，这当然是我的错。

我有一个运行正常的 Facebook 应用程序。今天突然停止工作了。cURL 响应是空的，POST 如果你尝试什么都不做或抛出 OAuth 异常，当我得到一些东西时我得到的唯一错误是找不到 SSL 证书。它直到几个小时前才起作用，所以我真的很想知道问题出在哪里。甚至登录按钮似乎也给出了同样的错误。关于我做错了什么和/或应该在几个小时前更新以使事情顺利进行的任何线索？[在这个讨论](https://stackoverflow.com/questions/8495884/fb-login-button-throws-access-token-null-or-undefined-today)之后，我尝试禁用 SSL，但它仍然无法正常工作......

非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:28:11.180

我终于也设法解决了这个问题，虽然该解决方案不是最好的选择，所以，如果有人有更详细的解决方案，我会很乐意做笔记。目前，我被迫添加到 facebook php 库（当然是更新的），而不是添加到正在做这项工作的页面，行

`curl_setopt($ch,CURLOPT_SSL_VERIFYPEER,false);`

我不会说这是一个理想的解决方案。

# jquery - 从树枝中获取选择框的值，用作数组的索引

> ID：15145974
> 
> 赞同：0
> 
> 时间：2013-02-28T21:27:10.070
> 
> 标签：jquery, symfony, twig

诚然，这个问题难以言表。所以我有一个树枝文件。我已经向该文件发送了一个数组（我使用的是 Symfony 2）。在树枝文件中，我像这样循环遍历数组：

```
{% for i in 0..numberOfCustomerRecords %}
    <option value="{{ i }}">{{ customerRecords[i].cardType }} ending in {{ customerRecords[i].last4 }} Exp: {{ customerRecords[i].expirationMonth }}/{{ customerRecords[i].expirationYear }}</option>
{% endfor %} 
```

这当然是在选择表单字段中。您可以在那里看到我在 for 循环中使用了 'i' 来循环遍历数组，并填充每个选项的值标记以对应于 customerRecords 数组的索引。

现在我有一些 jquery，基本上我想要做的是获取选择框的值，并将该值用作 customerRecords 数组的索引。类似于：{{ customerRecords[$('#customerRecords').val();] }}

显然那是行不通的。但是有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:36:42.347

你不能这样做，因为 Twig 是一个模板引擎。这意味着它在服务器上被解析，解析后的 H​​TML 被发送回浏览器，浏览器执行 JavaScript（因为 jQuery 是 JavaScript，这是 jQuery 被执行的地方）。

但是，有一个名为[Twig.js](https://github.com/schmittjoh/twig.js)的库完全按照它所说的去做，它使用 JavaScript 解析您的模板，这意味着这将在解析 jQuery 的同时发生。

我从未使用过 Twig.js，所以我无法帮助您找到确切的解决方案，但我知道您可以解决它。你可以阅读[文档](http://jmsyst.com/libs/twig.js)，Twig.js 的创建者也做[了一个 30 分钟的演示](http://www.youtube.com/watch?v=ENtp3m-Lnk8)。

# jquery - 如何为 1 个选择选项设置多个值？

> ID：15145975
> 
> 赞同：1
> 
> 时间：2013-02-28T21:27:16.393
> 
> 标签：jquery, html, html-select

我希望我的选择`option`改变两件事：图像和价格。但是，由于只能有 1 个选项`value`，因此只有一个 jQuery 可以工作。我如何有超过 1 个值`option`？如果做不到，有什么解决办法？

HTML：

```
<select id="panelfabric" onChange="swapImage()">
    <option value="$168">Normal</option>
</select> 
```

jQuery：

```
// select panel image
$('#panelfabric').on('change', function() {
  $('#imageToSwap2').prop('src', 
    ['img/panel/', $('#panelfabric').val(), '.png'].join('')    
    );
});

// select panel price
$('#panelfabric').on('change', function () {
  $('#priceToSwap2').text($(this).val()
    );
}); 
```

PS 我不能命名图像 $168.png 所以这不是一个解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:34:27.993

一种解决方案是将尽可能多的信息附加到`<option>`使用 HTML5 数据属性中：

```
<option value="whatever" data-price="$168" data-image="http://...">
    Normal
</option> 
```

接着：

```
$('#panelfabric').on('change', function() {
  var $selected = $('#panelfabric').children(":selected");

  $('#imageToSwap2').prop('src', $selected.data("image"));
  $('#priceToSwap2').text($selected.data("price"));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-28T21:45:02.933

我会选择乔恩的`data-XXX`解决方案。另一种选择是在您的 Javascript 中放置一个映射表：

```
var item_data = {
    "whatever": { price: 168, image: "http://..." },
    "something": { price: 200, image: "http://..." },
    ... }; 
```

接着：

```
$("#panelfabric").on("change", function() {
    var item = $(this).val();
    $('#imageToSwap2').prop('src', item_data[item].image);
    $('#priceToSwap2').text('$'+item_data[item].price);
}); 
```

# c# - 将 Active Directory 用户映射到内部组

> ID：15145980
> 
> 赞同：0
> 
> 时间：2013-02-28T21:27:28.307
> 
> 标签：c#, .net, database, active-directory, privileges

我们有一个与用户和组一起使用的内部数据库，并为某些组分配权限，并将组分配给用户。

我们希望将其与 Active Directory 集成，我对此主题有几个问题。

如果我们的软件创建了“管理员”和“员工”组，我们如何将 AD 用户分配到这些组？这是否是想要使用我们软件的本地系统管理员必须创建兼容组以匹配我们在软件中定义的组？

基本上，我想要一些参考资料，或澄清将我们的内部权利授予 AD 用户/组的过程。我们使用 SQLite 来提供一个嵌入式的、加密的数据库，它包含我们的内部用户/组/权限。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T21:40:41.430

如果您只想“克隆”目录服务器中存在的用户，您可以使用批处理文件或 powershell（或 C#，如果您愿意）脚本来完成，该脚本仅遍历目录组/用户并在其表示中重新创建它们在您的应用程序中。

如果您尝试通过目录服务器进行身份验证，并从线程身份或 .net 领域中的其他身份验证机制获取用户信息，您将需要变得有点脏，尤其是在目录服务器软件和版本不同的情况下从客户到客户。

你的目标是什么？

# c++ - 如何在自定义外壳中检测脚本文件与可执行文件

> ID：15145982
> 
> 赞同：0
> 
> 时间：2013-02-28T21:27:37.183
> 
> 标签：c++, shell, unix, cygwin

堆栈溢出！对于系统编程课程，我构建了一个自定义 shell，自作业结束以来我一直在对其进行调整，希望能取代 bash 和批处理作为我的主要脚本语言。在 Cygwin 中用 C++ 完成，使用 unistd.h 进行管道、分叉等。无论如何，我遇到的一个问题是，在运行我的 shell 时，虽然可执行文件被识别为这样并使用 exec(3) 函数运行，但文本文件（作为脚本运行）被传回 bash 执行。显而易见的答案是把#! 每个脚本中的标头都重定向到我的 shell，但是当在其中打开脚本时，我想将我的 shell 作为默认值运行。

在一个稍微相关的注释中，告诉我是否应该单独询问这个问题，但我希望能够在不事先启动 bash 的情况下运行我的 shell。`bash --login -i` 但是，我相信 Cygwin 通过在批处理文件中运行来启动 UNIX 环境（对于我的 shell 来说是必需的） 。是否有不涉及运行 Linux（VM 或其他）的可能解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T21:33:08.277

命令“文件”可以帮助您识别要检查的“文件”类型

一些例子：

```
$file lavtc.sh
lavtc.sh: POSIX shell script, ASCII text executable, with very long lines 
```

和：

```
$file java
/usr/lib/jvm/java-7-openjdk-amd64/jre/bin/java: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.24, BuildID[sha1]=0x5cb4cd120c014a335b60544ef209526e8a86f34c, stripped 
```

# javascript - 在浏览器中：（DOM）更新后缓存页面？

> ID：15145983
> 
> 赞同：0
> 
> 时间：2013-02-28T21:27:37.207
> 
> 标签：javascript, browser, web

在浏览器中更新页面后，我想知道是否可以告诉浏览器缓存它？理想情况下，我应该能够设置新的 ETag。

在查看 HTML5 离线内容时，似乎缓存总是来自服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:12:57.883

该功能不存在。

所以我想正确的方法是使用 HTML5 离线功能，将更新保存到浏览器本地数据库中，并使用一些 javascript 来重新应用更新。

# mysql - 在休眠中如何为各种表对象设置状态

> ID：15145984
> 
> 赞同：0
> 
> 时间：2013-02-28T21:27:39.917
> 
> 标签：mysql, hibernate, hibernate-mapping

我有两个对象，客户和商店。我希望用户（来自用户表）能够将客户或商店指定为“首选”。然后，我将能够看到喜欢不同商店或客户的用户列表。这可以通过休眠映射实现吗？

如果可以在每个用户的商店的任一客户上设置首选状态，表结构会是什么样子？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T22:17:26.863

因此，一个用户有许多首选商店，一个商店是许多用户的首选商店。因此，这是用户和商店之间的多对多关联。

只需[按照文档中的](http://docs.jboss.org/hibernate/core/3.6/reference/en-US/html_single/#d0e11402)说明进行映射：

```
public class User {
    @ManyToMany
    private Set<Store> preferredStores  = new HashSet<Store>(0);
}

public class Store {
    // necessary only if you want the association to be bidirectional:
    @ManyToMany(mappedBy = "preferredStores")
    private Set<User> preferringUsers = new HashSet<User>(0);
} 
```

# scala - 如何按顺序运行规范

> ID：15145987
> 
> 赞同：32
> 
> 时间：2013-02-28T21:27:55.353
> 
> 标签：scala, specs2

我想创建一些与数据库互操作的规范。

```
class DocumentSpec extends mutable.Specification with BeforeAfterExample {
  sequential

  def before() = {createDB()}
  def after() = {dropDB()}

  // examples
  // ...
} 
```

数据库在每个示例之前和之后创建和删除（按顺序执行）。一切都按预期工作，直到只有一个规范适用于数据库。因为规范是并行执行的，所以它们会干扰并失败。

我希望我能够通过指示 specs2 按顺序运行具有副作用的测试，同时保持无副作用的测试并行运行来避免这种情况。可能吗？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2013-02-28T21:38:33.493

我想你正在使用SBT？如果是这样，请查看文档：[http ://www.scala-sbt.org/release/docs/Detailed-Topics/Parallel-Execution](http://www.scala-sbt.org/release/docs/Detailed-Topics/Parallel-Execution)

相关的 SBT 设置是`parallelExecution`。将此添加到您的项目定义中：

```
parallelExecution in Test := false 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2014-04-19T13:56:25.900

如果您想在 specs2 中按顺序运行单个规范，只需`sequential`在规范的开头添加方法调用。例如：

```
class MyTest extends Specification {
  // Set sequential execution
  sequential

  // This tests will be executed sequentially
  "my test" should {
    "add numbers" in {
      (1 + 1) should be equalTo 2
    }

    "multiply numbers" in {
      (2 * 2) should be equalTo 4
    }
  }
} 
```

**更新：**正如@jsears 在评论中正确提到的那样，这将使测试在*单个*规范中按顺序运行！其他规范可能仍会并行运行。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-11-04T11:35:11.777

同时有一个更好的解决方案（[http://www.scala-sbt.org/release/docs/Parallel-Execution.html](http://www.scala-sbt.org/release/docs/Parallel-Execution.html)）：

> sbt 0.12.0 引入了一个通用的基础设施，用于限制任务并发超出通常的排序声明。

此配置将按顺序运行所有测试，如果它们位于子项目中：

```
concurrentRestrictions in Global := Seq(
  Tags.limit(Tags.CPU, 2),
  Tags.limit(Tags.Network, 10),
  Tags.limit(Tags.Test, 1),
  Tags.limitAll( 15 )
) 
```

我没有测试这是否可以被每个子项目覆盖，所以子项目可以并行运行它的测试。

# java - JPA @ManyToOne 引用未知类型。

> ID：15145993
> 
> 赞同：0
> 
> 时间：2013-02-28T21:28:28.330
> 
> 标签：java, hibernate, jpa, playframework

我在 play 1.2.4 框架中使用休眠/持久性将两个类映射到两个单独的表。

User 类具有这样的 userRoles 集合

```
@OneToMany(mappedBy="userId")
@Embedded
public Collection<UserRole> roles; 
```

类，UserRole 类有

```
@ManyToOne(fetch=FetchType.LAZY)
@JoinColumn(name="User_ID")
public long userId; 
```

在我的 mySQL 数据库中，user_roles 数据库具有来自用户数据库的外键。但是，我不断收到错误消息

```
@ManyToOne on models.UserRole.userId references an unknown entity: long 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-28T22:07:31.373

UserRole 类应该看起来像

```
 @ManyToOne(fetch=FetchType.LAZY)
 @JoinColumn(name="userId")
 public User user; 
```

您需要映射实体而不是属性本身。

# django - EC2上的solr索引问题

> ID：15145996
> 
> 赞同：0
> 
> 时间：2013-02-28T21:28:38.670
> 
> 标签：django, solr

我有一个 ec2 实例，我在其中部署了 django 1.5 和 solr 项目。当我运行以下命令：`python manage.py rebuild_index`最初构建索引时，我不断收到以下信息：

```
WARNING: This will irreparably remove EVERYTHING from your search index.
Your choices after this are to restore from backups or rebuild via the `rebuild_index` command.
Are you sure you wish to continue? [y/N] y

Removing all documents from your index because you said so.
All documents removed.
Indexing 561 <django.utils.functional.__proxy__ object at 0x2777550>.
TypeError: Element() keywords must be strings 
```

我每次都收到上述错误。我能够毫无问题地在我的 Mac 上本地部署它。我还需要为 Ubuntu EC2 做些什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-07T18:35:57.333

如果您安装了 Ubuntu 提供的 python-lxml 并使用 pip 安装，您应该尝试删除它：

```
sudo dpkg --purge python-lxml
sudo pip install lxml 
```

然后重新运行rebuild_index

# javascript - 对象内对象中的 for 循环

> ID：15145998
> 
> 赞同：4
> 
> 时间：2013-02-28T21:28:56.693
> 
> 标签：javascript

有人可以解释为什么这不起作用吗？

我在一个对象中有两个对象。我使用 for 循环一个接一个地打印出嵌套对象中的每个属性。

```
var people = {
    john: {
        name: "John",
        age: 20
    },
    bob: {
        name: "Bob",
        age: 40
    }
};

for (var person in people) {
    for (var property in person) { 
        console.log(property);
    }
} 
```

我希望它打印出来：

```
name
age
name
age 
```

相反，我得到：

```
0
1
2
3
0
1
2 
```

1）我做错了什么？

2）控制台究竟在做什么来输出上面的数字？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-28T21:31:51.790

这是因为在第二个（*嵌套*）`for`循环中，您迭代了保存对象属性名称***（而不是值！）***的*字符串值* 变量。您应该将其更改为：`person`*`people``people[person]`*

 *```
for (var property in people[person]) { 
    console.log(property);
} 
```

上面的数字对应于字符串值中的字符索引：

```
0: j    0: b
1: o    1: o
2: h    2: b
3: n 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-28T21:34:14.317

当您执行 a`for..in`时，您正在迭代键，而不是值。

在`for (var person in people)`,`person`是一个字符串；每个键：`"john"`和`"bob"`。

在第二个循环中，您正在迭代该字符串的所有属性，这会打印字符串中的“索引”（您可以访问像数组这样的字符串`string[1]`）。

您需要先获取对象值，然后才能对其进行循环：

```
for (var person in people) {
    var thisPerson = people[person];
    for (var property in thisPerson) { 
        console.log(property);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-28T21:32:19.240

像上面所说的那样打印出属性，使用下面的来获取实际的值

您需要指定值，而不仅仅是 for in 所做的索引。你需要做类似的事情

```
for (var person in people) {
    for (var property in people[person]) { 
        console.log(people[person][property]);
    }
} 
```*