# StackOverflow 问答 15928000-15928999

# html - 网页上的水平滚动在 iOS 中不起作用

> ID：15928000
> 
> 赞同：0
> 
> 时间：2013-04-10T14:00:14.277
> 
> 标签：html, ios

请在桌面浏览器上查看以下网站。 [http://www.onebyinfinity.co.nz/m/](http://www.onebyinfinity.co.nz/m/) - 你会看到一个水平滚动条

但是在 iPad 或 iPhone 上打开时，水平滚动不起作用。该网站的水平滚动在 Android 浏览器上运行良好，但在 iOS 设备上，当用户左右滑动时，Safari 拒绝水平滚动。

我需要做什么才能在 iOS Safari 上启用水平滚动吗？请注意，我不希望滑动事件（我已经在网站的主页上这样做了，我对性能不满意）。我只希望滚动条按预期工作。

谢谢，阿伦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:07:20.223

要触发滑动事件，您需要[jQuery 移动](http://jquerymobile.com/)库。或者使用[Tiny Scrollbar](http://baijs.nl/tinyscrollbar/)之类的插件，这可能是更适合您网站的解决方案，因为它已经内置了移动支持。

# ios - iOS合并pdf文件

> ID：15928001
> 
> 赞同：1
> 
> 时间：2013-04-10T14:00:17.870
> 
> 标签：ios, pdf-generation

我正在尝试在我的应用程序中合并两个 pdf 文件。但是我的应用程序在创建组合文件引用时不断中断。（参见代码中的注释）。有人可以在这里指出我正确的方向吗？谢谢。

```
- (void) mergerPDFFiles : (NSString*) firstPDFFile : (NSString* ) secondPDFFile {

    //set path to plist to read in docs directory
    NSString* pdf1Path = [documentsDirectory stringByAppendingPathComponent:firstPDFFile];
    NSString* pdf2Path = [documentsDirectory stringByAppendingPathComponent:secondPDFFile];

    BOOL hasError = NO;
    NSMutableString* strErrMsg = [[NSMutableString alloc] init];

    //check to see if the file exists
    if (![fileManager fileExistsAtPath:pdf1Path]) {
        hasError = YES;
        [strErrMsg appendString:[NSString stringWithFormat:@"Could not find the PDF just created: %@", firstPDFFile]];
    }

    //check to see if the file exists
    if (![fileManager fileExistsAtPath:pdf2Path]) {
        hasError = YES;
        [strErrMsg appendString:[NSString stringWithFormat:@"Could not find the marketing materials PDF: %@", secondPDFFile]];
    }

    if (!hasError) {

        NSArray* arrPDFPaths = [[NSArray alloc] initWithObjects:pdf1Path, pdf2Path, nil];

        //make a new file name
        NSArray* arrPDF1Split = [firstPDFFile componentsSeparatedByString:@"."];
        NSString* strNewPDF = [NSString stringWithFormat:@"%@_Complete", [arrPDF1Split objectAtIndex:0]];

        // File paths
        NSString* pdfPathOutput = [documentsDirectory stringByAppendingPathComponent:strNewPDF];

/******************DIES HERE!***********************************/
        CFURLRef pdfURLOutput = (__bridge CFURLRef)[[NSURL alloc] initFileURLWithPath:pdfPathOutput];
        NSInteger numberOfPages = 0;
        // Create the output context
        CGContextRef writeContext = CGPDFContextCreateWithURL(pdfURLOutput, NULL, NULL);

/********************ERROR MESSAGE******************************
 CGDataConsumerCreateWithFilename: failed to open `ers/msg-surans/Library/Application Support/iPhone Simulator/6.0/Applications/299DBD9D-738F-49E0-B593-159033DDE39B/Documents/OER_Pro_Cost_Test_Complete' for writing: No such file or directory.
    ****************************************************************/

        //loop through the pdfs
        for(int i=0; i<arrPDFPaths.count; i++) {

            //get the file
            NSString* pdfSource = [arrPDFPaths objectAtIndex:i];

            //set a CFURL to the pdf
            CFURLRef pdfURL = (__bridge CFURLRef)[[NSURL alloc] initFileURLWithPath:pdfSource];

            //set a reference to the pdf
            CGPDFDocumentRef pdfRef = CGPDFDocumentCreateWithURL((CFURLRef) pdfURL);
            numberOfPages = CGPDFDocumentGetNumberOfPages(pdfRef);

            //set some ivars
            CGPDFPageRef page;
            CGRect mediaBox;

            // Read the first PDF and generate the output pages
            NSLog(@"GENERATING PAGES FROM PDF (%@)...", pdfSource);
            for (int x=1; x<=numberOfPages; x++) {
                page = CGPDFDocumentGetPage(pdfRef, x);
                mediaBox = CGPDFPageGetBoxRect(page, kCGPDFMediaBox);
                CGContextBeginPage(writeContext, &mediaBox);
                CGContextDrawPDFPage(writeContext, page);
                CGContextEndPage(writeContext);
            }

            CGPDFDocumentRelease(pdfRef);
            CFRelease(pdfURL);

        }

        CFRelease(pdfURLOutput);

        // Finalize the output file
        CGPDFContextClose(writeContext);
        CGContextRelease(writeContext);

    } else {

        UIAlertView *alert = [[UIAlertView alloc]
          initWithTitle: @"Error Merging PDF Files"
          message: strErrMsg
          delegate: nil
          cancelButtonTitle:@"OK"
          otherButtonTitles:
        nil];
        [alert show];
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:05:53.043

我认为这是您的`documentsDirectory`变量设置不正确。检查它是如何获得价值的。但是`ers/msg-surans/`看起来不太对。

应该是这样的：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentsDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0]; 
```

# java - Get an array of int from a String of numbers

> ID：15928005
> 
> 赞同：1
> 
> 时间：2013-04-10T14:00:27.090
> 
> 标签：java, arrays, string, split, int

I have a long string of numbers,

```
String strNumbers = "123456789"; 
```

I need to get an `int[]` from this.

I use this method to get it:

```
public static int[] getIntArray(strNumbers)
{
    String[] strValues = strNumbers.split("");
    int[] iArr = new int[strValues.length];
    for(int i = 0; i < strValues.length; i++)
    {
        iArr[i] = Integer.parseInt(strValues[i]);
    }
    return iArr;
} 
```

I get this error : java.lang.NumberFormatException: For input string: ""

My guess is that I cannot split a String that way. I tried all sorts of escape or Regex but nothing works.

Can anyone help?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T14:02:45.240

Try

```
char[] chars = strNumbers.toCharArray(); 
```

and then iterate through the `char` array.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T14:07:36.260

Your problem is the split regex. Try this instead:

```
String[] strValues = strNumbers.split("(?<=\\d)"); 
```

This splits after every digit (using a *look behind* regex), which will create an array of size zero for blank input.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T14:03:36.420

You can use charAt() function to retrieve each character in the string and then do the parseInt()

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T14:03:42.723

You could simply use a for loop going through your string and calling `String.charAt(int)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T14:05:31.253

Try:

```
char[] chars = strNumbers.toCharArray();
int[] iArr = new int[chars.length];
for(int i = 0 ; i < chars.length ; ++i) {
    iArr[i] = chars[i] - '0';
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T14:05:37.917

You can use a loop statement to iterate the string. And then you use a substring method to chop the string into individual number. Using the substring() method you can define the length of the substring to be converted into number.

# c# - 已经完成的项目中的多语种？

> ID：15928010
> 
> 赞同：1
> 
> 时间：2013-04-10T14:00:32.590
> 
> 标签：c#, asp.net, internationalization, multilingual

我正在开发一个处于非常高级阶段的项目。我们有需要多语种的新客户。该项目很大，我们必须将代码文件中的所有字符串放入 Resources.aspx 文件中。很容易看出，手动检查项目中的每个文件是否有文本字符串并手动将它们放入资源中是很麻烦的。是否存在针对这种情况的一些提示或工具？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:14:12.027

看看这个工具：[http ://www.jollans.com/tiki2/tiki-index.php?page=MultiLangVsNet&bl=y](http://www.jollans.com/tiki2/tiki-index.php?page=MultiLangVsNet&bl=y)

一些亮点：

“加载项扫描您的项目，查找在控件属性和程序源代码中定义的字符串”

“在这两种情况下，您都可以选择要翻译的文本隐藏您不想翻译的文本注意大多数程序包含许多不需要翻译的文本字符串。在许多情况下，翻译字符串实际上会导致程序错误 选择需要翻译的文本是只能由程序员完成的工作。

多语言插件使在项目开发后期开始这项工作变得容易。”

“加载项向您显示 Windows 支持的所有语言的列表。只需从列表中选择一种语言即可将其添加到项目中。

对于每种语言，都会在网格中添加一个额外的列，显示该语言的字符串。”

“使用 Microsoft Excel 或 OpenOffice 输入翻译”

支持VS2002到VS2012（信息页说2010，但下载说2012）！

虽然它不是免费的......但它并不那么昂贵。

# r - 如何从多个 xls 文件构建数据框？

> ID：15928011
> 
> 赞同：1
> 
> 时间：2013-04-10T14:00:33.357
> 
> 标签：r, loops, dataframe, xls

我正在尝试从我下载的几个 xls 表中构建一个数据框：

```
states <- c("A","B","C","D")

for(i in states){
download.file(paste("http://www.web.com/state=",i,".xyz",sep=""),paste("temp",i,".xls",sep=""),mode = "wb")              
    } 
```

哪个工作正常。但是我遇到的问题是我想用所有这些 excel 文件构建一个数据框（使用`gdata`'s单独阅读我没有问题`read.xls`）并且我需要在数据框上插入一个列来告诉我数据来自哪里来自，即来自 A、B、C 或 D。

例如，我在循环中插入这些

```
state <- read.xls(paste("temp",i,".xls",sep=""),sheet=1, header = F, skip = 1, perl="C:/Perl/perl/bin/perl.exe",row.names=NULL)
    state$UF <- data.frame(state,paste(i,sep="")) 
```

它工作正常，但我不知道在这一步之后该怎么做（或者我是否可以让它更简单）。我接下来要做的是在循环中重命名`state`为`stateA, stateB`，等等，但我不知道该怎么做。重命名各个数据框后，我会使用`rbind`将它们设置在一起。

你有什么想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:37:05.387

gdata`read.xls`可以一次`read.xls`调用从 Internet 下载和读取文件：

```
urls <- sprintf("http://www.web.com/state=%s.xyz", states)
L <- lapply(urls, read.xls, ...other.read.xls.arguments...)
names(L) <- states 
```

上面生成了一个`L`数据帧列表。如果所有数据框的形式相同，则可以将列表组合成一个数据框，`DF`如下所示：

```
DF <- do.call(rbind, L) 
```

的行名称`DF`将指示每行来自哪个状态。可以选择像这样添加一个新列（其中`sub`删除行名称的行号部分）：

```
DF$state <- sub("\\.\\d*$", "", rownames(DF))
rownames(DF) <- NULL 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:05:39.587

在 R 中运行良好的一般策略是将你的东西加载到列表中：

```
state_list = lapply(list.files(pattern = "xls"), read.xls, sheet = 1, etc)
big_df = do.call("rbind", state_list) 
```

甚至更短的使用`plyr`：

```
library(plyr)
big_df = ldply(list.files(pattern = "xls"), read.xls, sheet = 1, etc) 
```

请注意，这里没有明确`for`的循环，并且代码非常简短且切中要害。

# php - 我想从名称以 pub_ 开头的服务器中删除所有 png 文件

> ID：15928012
> 
> 赞同：0
> 
> 时间：2013-04-10T14:00:37.720
> 
> 标签：php

这就是从我们的服务器中删除所有 png 但只删除以 pub_ 开头的那些 png。我不知道该怎么做，我一直在谷歌和 stackoverflow 上搜索它，但没有找到任何帮助。

这是我到目前为止所做的

```
$directory = "/home/html/domain.com/public/mydir/testDIR/";
$images = glob($directory . "*.png");
//print each file name
foreach ($images as $image)
{
 echo $image."<br />";
} 
```

它返回我所有的 png，包括名称为 pub_xyz.png 的那些，现在我想删除所有的 pub_xyz.png 请帮助我，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:02:58.237

```
$directory = "/home/html/domain.com/public/mydir/testDIR/";
$images = glob($directory . "pub_*.png");

foreach ($images as $image){
  echo $image."<br />";
} 
```

如果正确打印所有内容，请添加

```
unlink($directory . $image); 
```

到你的 foreach 循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:02:51.803

用于[`strpos()`](http://php.net/manual/de/function.strpos.php)：

```
if(strpos($image, 'pub_') === 0) {
    // delete image
} 
```

上面的代码检查子字符串`pub_`是否位于原始字符串中的位置 0，这意味着它以它开头。如果是这样，应该删除该文件

# vaadin - 重新加载 vaadin 表

> ID：15928019
> 
> 赞同：0
> 
> 时间：2013-04-10T14:00:46.937
> 
> 标签：vaadin, reload

我在视图中有一个 Vaadin 表。有一个按钮可以在表中创建一个新行，一个子窗口打开，允许您指定新项目并创建它。一旦创建通知告诉你它创建成功，此时我想重新加载当前 UI（这是一个视图），以便新元素可见（如果分页使其可见）。我在关闭子窗口之前尝试`UI.getCurrent().markAsDirty();`过，但它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:07:50.390

最后我利用 Table 方法 addItem 解决了这个问题。尽管必须有更优雅的解决方案，但这很有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T07:51:57.030

vaadin 表可以通过将您正在使用的主布局更改为静态来自动重新加载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-14T17:37:12.217

我刚刚在这个问题上苦苦挣扎。我使用了一个由我扩展的 PagedTable...，并添加了一个这样的方法：

```
Object[] visibleColumns = getVisibleColumns();
getDataSource().refresh();
setContainerDataSource(getContainerDataSource()); 
setVisibleColumns(visibleColumns); 
refreshRowCache(); 
```

这样，我可以使用弹出窗口将新项目插入表中，并使用新行刷新表。（在可以看到新记录的页面中有一些额外的代码）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-29T22:12:22.007

我刚刚遇到了类似的问题。我有一个由 sql 支持的表，以及一个用于编辑详细信息 + 删除的子窗口。无论在子窗口或表上是否有 markAsDirty()、setImmediate(true)，都没有更新表。

解决方案是从表中获取 SQLContainer，然后对其调用 refresh：

```
 Table table = new Table("Contact items");
 ... // add dataSource, headers etc, and after several calls:

 @Override
    public void windowClose(CloseEvent e) {
        SQLContainer c =  (SQLContainer)table.getContainerDataSource();
        c.refresh();
    } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-03-22T14:35:22.867

如果您只想刷新表格，可以使用表格容器数据源通过删除所有项目并重新添加来执行此刷新，就像以下代码一样：

```
List<Item> items = new ArrayList<>();
for(Object object : table.getContainerDataSouce().getItemIds()){
    items.add(table.getContainerDataSource().getItem(object));
}

table.getContainerDataSource().removeAllItems();
table.removeAllItems();

items.add(<yourItem>);

for(Item item : items){
    table.getContainerDataSource().addItem(item);
} 
```

# selenium - 有没有办法在 IDE 中计时执行 Selenium 脚本？

> ID：15928030
> 
> 赞同：0
> 
> 时间：2013-04-10T14:01:17.237
> 
> 标签：selenium, selenium-ide

有没有办法在 IDE 中计时执行 Selenium 脚本？我希望能够提供脚本的执行时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T12:15:59.390

为了澄清，您只想看看运行测试需要多长时间？如果是这种情况，只需在脚本开头获取系统日期/时间，如下所示：

商店评估 | 新日期().getTime(); | 测试开始时间

然后在最后，再次获取系统日期/时间：

商店评估 | 新日期().gettime(); | 测试结束时间

然后从 TestEndTime 中减去 TestStartTime 以获得以毫秒为单位的差异。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-15T06:54:21.207

不，没有办法设置 Selenium IDE 脚本的执行时间。必须手动启动脚本的执行。

# ios - 使用 Interface Builder 动态调整 UILabel 的大小并在其下方重新定位 UIView

> ID：15928033
> 
> 赞同：0
> 
> 时间：2013-04-10T14:01:27.697
> 
> 标签：ios, uiview, interface-builder, uilabel, xib

我有一个`UILabel`可以包含任意数量的宽度受限的行。我调整 a 的大小以适应给定的文本没有问题`UILabel`，但是，我正在实现一个“查看更多...”/“查看更少...”按钮，这将增加或减小`UILabel`. 基于此，任何`UIView's`低于此的`UILabel`内容都会受到影响，并且需要相应地在其 y 轴上重新定位。

我正在尝试使用 XIB 文件中的内置功能，但一点运气都没有。

**UILabel 的自动调整大小设置：**

![为 UILabel 自动调整大小](https://i.stack.imgur.com/Qdmmi.png)

**为 UILabel 下的所有 UIView 自动调整大小：**

![在此处输入图像描述](https://i.stack.imgur.com/Jcvdc.png)

有人能在这里指出我正确的方向吗？所以基本上一个场景是：

1.  屏幕加载
2.  标签填充了一定数量的具有受限宽度的可用文本
3.  `UIView's`下面的位置随着XIB 文件中显示的高度增加`UILabel`而重新定位`UILabel`
4.  用户按下“查看更多”并`UILabel`调整大小以适合所有可用文本并增加高度，并且所有 UIView 都相应地重新定位在屏幕下方
5.  用户按下“查看更少”并`UILabel`降低高度，隐藏更多文本并`UIView's`相应地向上移动。

谢谢，希望解释清楚！我试图在 XIB 文件中尽可能多地减少代码，但是`IBOutlets`如果证明是唯一的解决方案*（我希望不是）* ，我的所有 UI 元素仍然可以通过访问。

**注意：**我需要支持 iOS4.3 及以上版本，所以无法使用 iOS6 自动布局功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:32:18.137

自动调整大小通常仅在您更改父视图的大小时强制执行子视图布局。您可以通过 IBOutlets 将其中的大部分链接起来，但是，当您点击查看更多按钮时，您必须告诉您的父视图调整大小。

如果你愿意，你可以在 UIView 上使用这些扩展：http: [//glassofcocoa.com/blog/2012/11/14/uiview-extensions/](http://glassofcocoa.com/blog/2012/11/14/uiview-extensions/)你可以很容易地手动完成它并带有动画 - 看起来有点喜欢：

```
//assume you have a BOOL value wether toggled or not called 'isViewingMore' and a stored startHeight
- (IBAction)didTapViewMore:(id)sender
{
    if (!_isViewingMore)
    {
        _isViewingMore = YES;
        CGSize constraint = CGSizeMake(_myLabel.frame.size.width, CGFLOAT_MAX);
        CGFloat lblheight = [@"" sizeWithFont:[UIFont fontWithName:@"HelveticaNeue-Bold" size:14.0f] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap].height;
        _myLabel.height = lblHeight;
    }
    else
    {
        _isViewingMore = NO;
        myView.height = startHeight
    }
    UIView *lastView = nil;
    for (UIView *view in self.view.subviews)
    {
        if ((id)view != (id)_myLabel)
        {
            if (lastView == nil)
            {
                view.top = _myLabel.bottom;
            }
            else
            {
                view.top = lastView.bottom;
            }
            lastView = view;
        }
    }
} 
```

如果您只想采用 IB 路线，则需要将您的子视图放在一个父视图中并调整父视图的大小 - 这应该告诉孩子们更新他们的定位/大小。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T14:44:41.623

最后我无法使用自动调整大小的功能，所以我通过创建一个 UIView 来解决这个问题，该 UIView 充当所有子视图的容器，这些子视图位于扩展的 UILabel 之下。

然后，我能够创建一个辅助方法，根据全尺寸 UILabel 和半尺寸标签之间的差异对帧进行动画调整。

```
- (void)repositionMoveableViewContainerWithFrame:(CGRect)newFrame animated:(BOOL)animated
{
    CGRect newContainerPosition = self.moveableViewsContainer.frame;
    CGFloat difference = (newFrame.size.height - self.adjustableLabel.frame.size.height);
    newContainerPosition.origin.y = newContainerPosition.origin.y + difference;

    if (animated) {
        // Adjust frame animated
    } else {
        // Adjust frame without animation.
    }    
} 
```

# ios - iOS 如何确定是什么阻塞了 UI

> ID：15928035
> 
> 赞同：32
> 
> 时间：2013-04-10T14:01:37.790
> 
> 标签：ios, multithreading, user-interface, blocking

我对 iOS 开发还很陌生，但我开始掌握一些更复杂的概念。我目前有一个实现 AVCam 来捕获视频的应用程序。AVCam 在单独的线程上创建，但使用我的主 xib 文件中的视图。当相机完成捕捉后，它会在我的 ViewController 类中调用一个完整的函数。在完整的函数中，我调用了许多更新 UI 的其他函数以及一些 NSLog。一切似乎都正常，我立即在控制台中看到了日志，但 UI 还需要 3 秒才能更新。我尝试使用工具来查找有问题的代码，但我似乎找不到它。是否有另一种方法来确定 UI 阻止了什么？

这是录制完成时调用的代码；

```
-(void)movieRecordingCompleted{
       [HUD hide:YES];
        NSLog(@"movieRecordingCompleted");
        [self showModalViewController];
        NSString *pathToMovie = [NSHomeDirectory() stringByAppendingPathComponent:@"Documents/Movie.mov"];
        NSLog(@"pathToMovie: %@", pathToMovie);
        pathToTreatedVid = pathToMovie;
        NSLog(@"File Save Called");
        UISaveVideoAtPathToSavedPhotosAlbum(pathToMovie, nil, NULL, NULL);
} 
```

一切都会立即记录下来，但是进度 HUD 和模态视图控制器在大约 2 - 5 秒内没有触发，这很奇怪。

这是线程的前后状态（冻结时与解冻时）。 ![在此处输入图像描述](https://i.stack.imgur.com/7fkXg.png) ![在此处输入图像描述](https://i.stack.imgur.com/BA6jz.png)

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2013-04-10T14:09:03.107

尝试暂停程序执行（在底部面板中有一个按钮，`Xcode`第三个）

![暂停](https://i.stack.imgur.com/6YpKu.png)

*   然后查看左侧面板 ( `Navigator panel`)，
*   寻找`Debug Navigator`

![调试导航器](https://i.stack.imgur.com/vbjVO.png)

*   找到有`main`函数的线程，mb你可以通过这个线程中的方法弄清楚，更新你的UI需要这么长时间。现在工作的方法通常是顶部黑色的（灰色列出的`obj-c`内部方法）。

![主要的](https://i.stack.imgur.com/q0mAc.png)

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2017-02-02T01:08:17.460

您可以通过在配置文件模式下运行您的应用程序来使用 Instruments 中的系统跟踪工具。然后，您将获得系统中所有线程的详细运行情况以及线程经过的每个调度事件的堆栈跟踪。

2016 WWDC [System Trace in Depth](https://developer.apple.com/videos/play/wwdc2016/411/)中有一个很棒的视频，它将引导您调试阻塞的线程问题。

这比**Time Profiler**工具要好得多，因为该工具的工作原理是每隔一段时间对 CPU 上运行的内容进行采样。但是，如果您的线程被阻塞，它就不会在 CPU 上运行，所以 - 它不会被采样。您的主线程可能被阻塞了一秒钟，但它不会出现在 Time Profiler 中。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-10T14:07:41.617

您可以使用[Time Profiler](https://developer.apple.com/library/content/documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/Instrument-TimeProfiler.html)找出阻止您的应用程序的原因。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-09-14T04:55:00.383

Michael Cueno 的建议很棒 - 描述了系统跟踪分析和“兴趣点”。

然而，在 iOS 12+ 中还有另一种工具可以使用路标来执行此操作：[https ://pspdfkit.com/blog/2018/using-signposts-for-performance-tuning-on-ios/](https://pspdfkit.com/blog/2018/using-signposts-for-performance-tuning-on-ios/)

这个想法是您使用框架中的函数`os_signpost`，`os`并将其插入您怀疑阻塞主线程的所有位置。

比如说，你按下 UIButton 有时它会滞后。您应该插入处理程序和您怀疑的所有功能`os_signpost`。`buttonPressed`

然后，您应该在 Instruments 中配置文件，使用`Blank`模板并添加`os_signpost`子模板。一个例子在这里：[https](https://github.com/gatamar/UnsplashSearch) ://github.com/gatamar/UnsplashSearch 。

[![在此处输入图像描述](https://i.stack.imgur.com/pK0Ps.png)](https://i.stack.imgur.com/pK0Ps.png)

注意 Swift / Objc 中的 API 差异：

迅速：

```
import os

...

static let pointsOfInterest = OSLog(subsystem: "com.apple.SolarSystem", category: .pointsOfInterest)
os_signpost(.begin, log: ViewController.pointsOfInterest, name: "createSubviews")
defer {
    os_signpost(.end, log: ViewController.pointsOfInterest, name: "createSubviews")
} 
```

对象：

```
#include <os/log.h>
#include <os/signpost.h>

os_log_t log = os_log_create("com.apple.SolarSystem", "YourCategory");
os_signpost_id_t spid = os_signpost_id_generate(log);

...

os_signpost_interval_begin(log, spid, "func1");

... 

os_signpost_interval_end(log, spid, "func1); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-09-27T12:03:51.970

如果您**在模拟器上遇到 UI 阻塞问题**：

在深入研究任何其他方法之前，尝试**完全关闭模拟器**并删除应用程序并再次重建/运行应用程序，在我的情况下，我找不到任何线程问题或崩溃，经过近一个小时的仪器挖掘我只是想可能是模拟器问题，就是这样:)

* * *

## 回答 #6

> 赞同：-13
> 
> 时间：2013-04-10T14:07:21.623

我喜欢使用这个功能：

```
sleep(x); 
```

其中“x”是秒数......它只会阻塞它在该秒数上运行的任何线程。如果您的 UI 冻结，您就知道您阻塞了主线程，因此该代码正在主线程上运行（无论您是否有意）。尝试将此调用放在代码中的不同位置，它应该可以帮助您诊断正在发生的事情。希望有帮助。

# facebook - 付款对话框未出现

> ID：15928037
> 
> 赞同：0
> 
> 时间：2013-04-10T14:01:42.973
> 
> 标签：facebook, sdk, dialog, payment

我正在尝试启动支付对话框以在我们的应用程序中购买游戏货币。但是，无论我尝试什么，对话框都不会出现，也没有错误消息或任何东西。

我将列出我试图根除问题的所有事情的列表。

1.  如果我从我们的网页运行该应用程序，则会出现一个带有 API 错误代码：1151 的弹出窗口。如果在 Facebook 中运行，则不会出现此弹出窗口，也不会出现任何内容。

2.  付款回调 URL 已设置，服务器端代码也已设置。这已经过手动测试，但我们的日志显示没有来自 facebook 本身的调用。

3.  我尝试在 Actionscript 中从我们的应用程序中启动它，并调用 JavaScript 函数，两者的行为相同。

4.  我也试过 buy_credits 来排除回调（因为这显然不需要回调函数），这也有同样的问题。

5.  我刚刚通过设置直接 URL 调用并将其粘贴到我的浏览器中成功调用它，以便验证服务器端代码是否正常工作。

在这个阶段，我想知道这是否是对话框显示模式的问题。上周我设置了应用请求，但无法让请求对话框显示在 iframe 中。它目前仅用作弹出窗口。这是完全相同的问题，没有错误消息，只是什么都不会发生。由于支付对话框使用页面显示模式，可能与 iframe 显示模式有问题。但是，我找不到其他有此问题的人。

我不再相信这是代码问题，因为我尝试了大量示例，它们的行为都相同，包括直接取自 Facebook 开发人员页面的代码，以及 Stack Overflow 中的其他用户。我会在这里发布以防万一，但我确定它必须是 facebook 上的应用程序设置或 index.html 中的某种设置。

作为：

```
 order_info =
   {
      title:'Test Product',
      description:'Test product description',
      price:'123'
   };

   Facebook.ui(
      "pay.prompt",
      {order_info: order_info, purchase_type: "item"},
      payCallback); 
```

JS：

```
function make_purchase()
{
    var obj = {
    method: 'pay',
    action: 'buy_item',
    order_info: {'item_id': '1a'},
    dev_purchase_params: {'oscif': true}
    };

    FB.ui(obj, js_callback);
}

var js_callback = function(data) 
{
    if (data['order_id']) {
    }
}; 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T10:31:10.880

我设法解决了这个问题。万一有人想知道，我正在使用 embedSWF 将我们游戏的 flash 对象嵌入到网页中，将其更改为添加一个 Object 标签解决了这个问题。我目前不知道为什么嵌入它会导致对话框不出现，但是当我发现时我会再次在这里发布。

# python - 如何将实例属性链接到 numpy 数组？

> ID：15928038
> 
> 赞同：3
> 
> 时间：2013-04-10T14:01:45.057
> 
> 标签：python, numpy

我有一个 Python 对象列表，代表几个类。这些类显然不同，但仍然有几个共同的属性（每个对象具有不同的值）。例如：

```
class Super1:
    def __init__(self, value1, value2):
        self.value1 = value1
        self.value2 = value2
        #Lot's of other stuff

class Sub1(Super1):
    def __init__(self, value1, value2, value3):
        Super1.__init__(self, value1, value2)
        self.value3 = value3
        #Lot's of stuff

class Sub2(Super1):
    def __init__(self, value1, value2, value4):
        Super1.__init__(self, value1, value2)
        self.value4 = value4
        #Lot's of stuff

objects = [Sub1(1.,2.,3.), Sub1(213.,2.,23.), Sub2(23.,10.,0.2), Sub1(3.,2.,12.)] 
```

现在，为了方便和性能，我需要一个包含所有这些值的 NumPy 数组。我知道我可以这样阅读它们：

```
np.array([objects[ii].value1 for ii in range(4)]) 
```

但我还需要更改数组形式以及实例方法中的值。是否可以通过使用指针或其他方式以某种方式动态*链接*对象属性和数组中的相应值？

不，这里的*对象*不必是一个列表。欢迎提出建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:07:15.913

Numpy 数组是[“计算机内存的连续一维段”](http://docs.scipy.org/doc/numpy/reference/arrays.ndarray.html#internal-memory-layout-of-an-ndarray)，因此您确实无法创建一个由这里和那里的内存块组成的 numpy 数组。

唯一的可能性是反过来，首先创建数组，然后将该数组的单个元素切片分配给您的对象，例如

```
class Super1(object):
    def __init__(self, value1):
        self._value1 = value1

    @property
    def value1(self):
        return self._value1[0]

    @value1.setter
    def value1(self, value):
        self._value1[0] = value 
```

现在：

```
>>> a = np.arange(4)
>>> obj = [Super1(a[j:j+1]) for j in xrange(len(a))]
>>> obj[0].value1
0
>>> obj[0].value1 = 5
>>> a
array([5, 1, 2, 3])
>>> obj[2].value1
2
>>> a[2] = 8
>>> obj[2].value1
8 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:03:26.570

如果要修改对象的设置属性，请使用属性。

此解决方案适用于数组的索引

```
class Super(object):

    @property
    def value1(self):
        return self.array1[self.index]

    @value1.setter
    def value1(self, value):
        self.array1[self.index] = value

    def __init__(self, array1, index):
        self.array1 = array
        self.index = index 
```

您需要先创建数组，然后再创建对象。

这是另一种使用一个对象数组的解决方案：

```
class Super(object):

    @property
    def value1(self):
        return self.array[0]

    @value1.setter
    def value1(self, value):
        self.array[0] = value

    def __init__(self, array):
        self.array = array 
```

# c# - 估计玩家深度的大致位置

> ID：15928043
> 
> 赞同：0
> 
> 时间：2013-04-10T14:01:51.580
> 
> 标签：c#, kinect

我想估计玩家在 Kinect 传感器拍摄的场景中的深度位置，以便在需要评估手与“玩家身体”之间距离的算法中使用此信息。在这种情况下，“玩家身体”的概念可以翻译成一个代表玩家深度位置的值（这就是我正在寻找的）。

显然，因为一个人在空间中占据了一个体积，我们知道不可能定义玩家在场景中的精确位置。

我想知道的是：使用骨架数据计算人的大致深度位置的最佳做法是什么？

我尝试使用以下代码：

```
Skeleton playerSkeleton = (from s in skeletonData where s.TrackingState == SkeletonTrackingState.Tracked select s).FirstOrDefault();

...

if (playerSkeleton != null)
{
    Joint head = playerSkeleton.Joints[JointType.Head];

    float averagePlayerPosition = head.Z;
} 
```

在上述方式中，我使用头部深度来定义玩家的位置。

这是一个不错的选择，还是有更好的选择（例如[骨架几个点的](http://i.msdn.microsoft.com/dynimg/IC584844.png)平均值）？如果我的选择是可改进的，是否有一些参考证明更好的选择是合理的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:47:03.390

,`Head`或`Spine`都`HipCenter`足够体面的点来退出。

我建议使用`Spine`or`HipCenter`在头上，因为除非用户移动整个身体，否则这两个点不能移动很多。也就是说——你可以向前和向后倾斜来改变`Head.Z`位置，但是除非用户移动他们的整个身体，否则其他两点不会有太大的变化。

根据您的应用程序的目的，`Head`从用户的角度来看，这也可能是有意义的。根据您的描述，我认为这不太可能，但也许倾斜/倾斜以更新一个人的整体位置确实符合用户的心理模型。

本身 也有一个`Position`属性：http: [//msdn.microsoft.com/en-us/library/microsoft.kinect.skeleton.position.aspx](http://msdn.microsoft.com/en-us/library/microsoft.kinect.skeleton.position.aspx)`Skeleton`

老实说，我不确定这是如何计算的，因为我从未使用过它，但是您可以要求`Skeleton.Position.Z`根据 Kinect 不断计算出用户的距离。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-21T02:49:03.010

使用 SDK 功能，除了您正在使用的功能，准确获取信息。

使用 2D 联合表示，您可以计算深度流上的位置，然后使用它：

```
int realDepth = depth[index] >> DepthImageFrame.PlayerIndexBitmaskWidth 
```

请参阅以下参考资料：

*   [http://msdn.microsoft.com/en-us/library/microsoft.kinect.depthimageframe.playerindexbitmask.aspx](http://msdn.microsoft.com/en-us/library/microsoft.kinect.depthimageframe.playerindexbitmask.aspx)

*   [http://msdn.microsoft.com/en-us/library/jj131028.aspx#PlayerIndex](http://msdn.microsoft.com/en-us/library/jj131028.aspx#PlayerIndex)

# linux - GNU Bash 3.2.25(1) 多个转义字符调出目录列表

> ID：15928047
> 
> 赞同：0
> 
> 时间：2013-04-10T14:01:58.830
> 
> 标签：linux, bash

例如，使用 Bash 终端窗口，如果我键入 escape escape，我会得到一个目录列表。如何控制或关闭它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T12:57:49.023

`set disable-completion`这被中的语句关闭`~/.inputrc`。（请参阅bash 手册中的*Readline 变量部分。）*

# ruby-on-rails - 未定义的方法错误，但方法是在 Ruby 中定义的……为什么？

> ID：15928050
> 
> 赞同：1
> 
> 时间：2013-04-10T14:02:00.943
> 
> 标签：ruby-on-rails, ruby

我无法在我编写的渲染器类上调用任何方法。它的方法不应该暴露吗？

```
class EntriesController < ApplicationController
  def show
    BaseRenderer.renderer_for(@entry) # @entry is loaded with a before_filter
  end
end

# app/renderers/base_renderer.rb
class BaseRenderer
  def renderer_for(entry)
    klass ||= "#{entry.entry_type}Renderer".constantize
    klass.new(entry)
  end
end 
```

我明白了`NoMethodError at ... undefined method 'renderer_for' for BaseRenderer:Class`

但是方法是明确定义的。是什么赋予了？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T14:03:36.283

如果您的意思是类方法，那么

```
def renderer_for(entry) 
```

应该

```
def self.renderer_for(entry) 
```

或者

```
class BaseRenderer
  class << self
    def renderer_for(entry)
      # could also change to this
      Object.const_get("#{entry.entry_type}Renderer").new(entry)
    end
  end
end 
```

# mysql - 我们应该避免使用 LEFT JOIN

> ID：15928062
> 
> 赞同：0
> 
> 时间：2013-04-10T14:02:24.700
> 
> 标签：mysql, left-join

我对过去 7 天的一个问题感到困惑。我用谷歌搜索了很多，也探索了 SO，但找不到满意的答案。

我想澄清我关于 LEFT JOIN 的概念。正如我们所知，LEFT JOIN 返回左表中的所有值和右表中的连接值（通过外键）。现在，如果右表中有（例如）10 个值指向左表中的主键，则 LEFT JOIN 将重复第一个表值 10 次，同时给出右表中的值。这只是一个例子。它是有效的，还是我不应该担心它？

这是重复值的示例

![在此处输入图像描述](https://i.stack.imgur.com/soHhu.gif)

我已经突出显示了重复的值。实际上，我有一个表，我想使用 LEFT JOIN 从同一个表中获取子评论。行数可能是 100 秒而不是 1000 秒。我在相关字段上有索引。所以，请指导我（记住左表中给出重复行的左连接的本机行为）我应该担心吗？它是否主要使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:20:00.890

这是一个取舍的问题...

首先，您的外连接查询是否执行良好？鉴于您展示的示例，如果您使用索引字段来映射外键关系，它应该。使用 EXPLAIN 确定您是否确实在使用索引字段，并在需要时优化查询。

如果查询本身很快，下一个问题是您在数据库和应用程序服务器之间发送的数据比您需要的略多 - 左侧表中的重复数据。虽然不理想，但我怀疑你是否可以衡量差异，除非你真的在大量工作。如果您要发送数百条记录，每条记录有几个额外的字节，那么如果网络跟不上，您会遇到比外部连接更大的问题。

最后，您必须考虑替代方案。使用外连接，您可以在单个查询中检索所有匹配的数据，即使由于连接而稍微慢一些。另一种方法是获取所有父记录，遍历它们并找到匹配的子记录。这会慢得多——而不是一个查询，您将执行数十或数百个（根据您正在处理“数百条，而不是数千条记录”的语句）。每个查询都有开销，并且将这些开销放在一起可能远远超过额外的“加入”语句成本。

但是，找出答案的最佳方法是使用 DBMonster 之类的工具，加载一个测试数据库，其中包含比您认为需要的数据多 10 倍的数据，然后尝试一下。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:30:34.260

关于带宽的最高效的解决方案是在一个回合中获取标题并在第二个回合中获取所有子节点。将它们留在记忆中并自己加入它们。这通常是一个“坏主意”，因为它不能很好地扩展（想象一下单个服务器上多个会话的内存需求都在不断扩展的数据集上执行此操作），但是如果你可以保持数据集不变并且网络真的有那么糟糕吗？这是一个可行的选择。

最后回答：是的，你理解正确。通常没问题，但有办法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:38:03.333

如果我理解正确，您所描述的只是左内连接的工作原理。

您是否必须使用左连接来获取子评论？您可以使用另一种方法吗？也许（这完全是即兴表演，没有研究）对父评论使用 1 个查询，对子评论使用第二个查询并将结果合并在一起？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T14:07:24.990

> 它是有效的，还是我不应该担心它？

这是一个我只能直接反问自己的问题。这些问题只是高度主观的，不能以一般的方式回答。

这也是为什么你没有在谷歌上找到一个简单的答案的原因。

我能给出的最佳答案是：与您的数据库性能顾问联系并与她讨论问题。在您向她提供足够的信息并访问测试平台后，她应该能够明确回答您的问题。

# php - Google Charts API - 具有两个系列的简单折线图 - 几乎就在那里

> ID：15928064
> 
> 赞同：0
> 
> 时间：2013-04-10T14:02:28.310
> 
> 标签：php, javascript, mysql, google-visualization

我一直试图通过谷歌图表 api 在折线图上显示两个系列。

我正在使用 sql 从数据库中获取数据，这一切正常。

我已经改编了代码： [PHP MySQL Google Chart JSON - Complete Example](https://stackoverflow.com/questions/12994282/php-mysql-google-chart-json-complete-example)

```
<?php
$connection = mysql_connect(blah);
$database = mysql_select_db(blah);

// The Chart table contain two fields: Date and PercentageChange
$queryData = mysql_query("SELECT Date, PercentageChange
                              FROM Data
                              ORDER BY Date DESC
                              LIMIT 0, 14");

$queryData1 = mysql_query("SELECT Date, PercentageChange
                              FROM Data1
                              ORDER BY Date DESC
                              LIMIT 0, 14");                              

$table = array();
$table['cols'] = array(

    array('label' => 'Date', 'type' => 'string'),
    array('label' => 'Percentage Change', 'type' => 'number'),
    array('label' => 'Percentage Change 1', 'type' => 'number')

);

//First Series
    $rows = array();
    while($r = mysql_fetch_assoc($queryData)) {
        $temp = array();
        // the following line will used to slice the Pie chart
        $temp[] = array('v' => (string) $r['Date']); 

        //Values of the each slice
        $temp[] = array('v' => (float) $r['PercentageChange']); 
        $rows[] = array('c' => $temp);
    }

    $table['rows'] = $rows;
    $jsonTable = json_encode($table);
    //echo $jsonTable;

//For Data1
    $rows = array();
    while($r = mysql_fetch_assoc($queryData1)) {
        $temp = array();
        // the following line will used to slice the Pie chart
        $temp[] = array('v' => (string) $r['Date']); 

        //Values of the each slice
        $temp[] = array('v' => (float) $r['PercentageChange']); 
        $rows[] = array('c' => $temp);
    }

    $table['rows'] = $rows;
    $jsonTable1 = json_encode($table);
    echo $jsonTable1;
?>

<html>
  <head>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script type="text/javascript">

    // Load the Visualization API and the chart package.
    google.load('visualization', '1', {'packages':['corechart']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(drawChart);

    function drawChart() {

      // Create our data table out of JSON data loaded from server.
      var data = new google.visualization.DataTable(<?=$jsonTable?>);
      var data1 = new google.visualization.DataTable(<?=$jsonTable1?>);
      var options = {
          title: 'Performance',
          width: 800,
          height: 600
        };
      // Instantiate and draw our chart, passing in some options.
      var chart = new google.visualization.LineChart(document.getElementById('chart_div'));
      chart.draw(data, options);
    }
    </script>
  </head>

  <body>
    <!--Div that will hold the pie chart-->
    <div id="chart_div"></div>
  </body>
</html> 
```

现在，我知道它正在从每个查询中获取正确的数据，但我不知道如何将两者放在同一个图表上。

我认为这与这条线有关：

```
chart.draw(data, options); 
```

并尝试过：

```
chart.draw(data, data1, options); 
```

但没有运气。

谁能指出我正确的方向？

谢谢！

编辑：我还在为此苦苦挣扎 - 有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-07T13:39:49.607

正如 user1821727 已经提到的，您可以在将数据传递给 javascript api 之前简单地合并数组

```
 var obj = data.concat(data1);
 chart.draw(obj, options); 
```

我假设您没有更正您传递给绘图功能的参数。您必须使用新创建的`obj`

```
 chart.draw(obj, options); 
```

或者另一个问题可能是您在两个数据集中都有带有标签的行。在这种情况下，图形将不会呈现，因为输入包含不正确的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:37:56.947

一个简单的

```
var obj = data.concat(data1);
chart.draw(obj, options);
```

可能就足够了。

# javascript - 将价值（美元金额）加在一起并防止四舍五入

> ID：15928065
> 
> 赞同：2
> 
> 时间：2013-04-10T14:02:30.723
> 
> 标签：javascript, jquery, addition

我需要在不四舍五入的情况下添加值（美元金额）。

例子：

添加的值来自`$("input#lunchorder_item_price")`并输出我的 subTotal。 **2.95 + 2.95 + 2.45 = 8.35**但我得到**2.95 + 2.95 + 2.45 = 8.36**

当前代码：

```
 function updateCartDisplayTotal() {
     $("div#ordersummary").remove();

     var subTotal = 0;
     $("input#lunchorder_item_price").each(function() {
        subTotal += parseFloat((this.value) + subTotal);
     });

     var orderSubtotal = subTotal.toFixed(2);
     var taxAmount = parseFloat(orderSubtotal*.0685)/*.toFixed(2)*/;
     var deliveryAmount = parseFloat(orderSubtotal*.10)/*.toFixed(2)*/;
     var orderTotal = (parseFloat(orderSubtotal) + parseFloat(taxAmount) + parseFloat(deliveryAmount))/*.toFixed(2)*/;

     var orderSummary = $("<div id=\"ordersummary\"><div>Subtotal: <strong>$"+ orderSubtotal +"</strong></div><div>Tax: <strong>$"+ taxAmount +"</strong></div><div>Delivery Fee: <strong>$"+ deliveryAmount +"</strong></div><div>Total: <strong>$"+ orderTotal +"</strong></div></div>");
     $(orderSummary).insertAfter("ul#cart-items");
  } 
```

我的问题是我需要做些什么来防止这些四舍五入？任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:14:06.310

问题的第一部分是[浮点运算通常很烂](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)。使用浮点数，您的示例...

```
2.95 + 2.95 + 2.45 
```

... 实际上等于`8.350000000000001`.

您问题的第二部分是浏览器的实现不一致`toFixed()`（一些向上舍入，一些向下舍入，一些舍入到最接近的有效数字）。

以下是避免这些问题的一些技巧：

1.  `toFixed()`如果您需要跨浏览器的一致性（显然您在这里需要），请避免使用。
2.  不要做任何*中间* `round`/ `floor`/ `ceil`/等。操作 - 将其保存到最后。即，除了显示目的之外，不要乱用你的`subTotal`,等值。`taxAmount`
3.  当您需要执行`toFixed()`类似操作时，通常有替代解决方案依赖于更准确和更一致地实施的操作（例如`Math.round()`）。例如，要获取双精度数，可以执行以下操作：

    `var total = 2.95 + 2.95 + 2.45;`

    `total = Math.round(total * 100) / 100;`

* * *

这是使用上述建议的代码重构：

```
function toDoubleFixed(num) {
    var ret = '' + Math.round(num * 100) / 100;
    return ret.replace(/(\d+)?\.?(\d)?(\d)?/, function(match, l, r1, r2) {
        return (l||'0')+'.'+(r1||'0')+(r2||'0');
    });
}

function updateCartDisplayTotal() {
    $("div#ordersummary").remove();

    var subTotal = 0;
    $("input#lunchorder_item_price").each(function() {
        subTotal += +$(this).val();
    });

    var orderSubtotal = subTotal,
        taxAmount = orderSubtotal * .0685,
        deliveryAmount = orderSubtotal * .1,
        orderTotal = orderSubtotal + taxAmount + deliveryAmount;

    var $orderSummary = $("<div id=\"ordersummary\"><div>Subtotal: <strong>$" + toDoubleFixed(orderSubtotal) +"</strong></div><div>Tax: <strong>$"+ toDoubleFixed(taxAmount) +"</strong></div><div>Delivery Fee: <strong>$"+ toDoubleFixed(deliveryAmount) +"</strong></div><div>Total: <strong>$"+ toDoubleFixed(orderTotal) +"</strong></div></div>");

    $orderSummary.insertAfter("ul#cart-items");
} 
```

我无法测试它，所以请告诉我它是如何工作的。另外，请注意我修改了你增加`subTotal`价值的方式，因为它以前看起来很不稳定......但也许我在那里遗漏了一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-08T19:50:02.113

我通常将这样的值存储为便士金额。然后它更容易使用。

所以 4.95 美元变成 495 美元，16.32 美元变成 1632 美元。然后你可以使用完整的整数，只需在后面加上小数点。

如果您可以切换到此方法，我会推荐它。否则将字符串/浮点值转换为整数，根据需要对其进行数学运算，然后返回结果。

# ios - NSString：验证它是美国货币格式

> ID：15928067
> 
> 赞同：1
> 
> 时间：2013-04-10T14:02:32.740
> 
> 标签：ios, nsstring, currency

有没有一种快速的方法来验证 NSString 是否被格式化为美国货币？

所以我要确认的是字符 0 是 $，以下字符是数字，除了 string.length-3 可能是小数（显示更改是可选的）。

因此，这通过了 $1000.00，并且通过了 $1000，但这将失败 $1000B。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-10T14:15:40.350

一种简单的方法是使用此正则表达式验证字符串：

```
^[$][0-9]+([.][0-9]{2})?$
^ ^   ^  ^  ^   ^   ^  ^^
| |   |  |  |   |   |  ||
| |   |  |  |   |   |  |+-- End-of-input marker 
| |   |  |  |   |   |  +--- Optional
| |   |  |  |   |   +------ Repeated exactly two times
| |   |  |  |   +---------- A decimal digit
| |   |  |  +-------------- A dot (literal)
| |   |  +----------------- Repeated once or more
| |   +-------------------- A decimal digit
| +------------------------ The dollar sign (literal)
+-------------------------- Start-of-input marker 
```

这是使用上述表达式的示例代码：

```
NSError *error = NULL;
NSRegularExpression *regex = [NSRegularExpression
    regularExpressionWithPattern:@"^[$][0-9]+([.][0-9]{2})?$"
                         options:NSRegularExpressionCaseInsensitive
                           error:&error];
if ([regex numberOfMatchesInString:@"$321.05" options:0 range:NSMakeRange(0, 7)]) {
    NSLog(@"Success");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T14:11:24.077

`NSNumberFormatter`不仅有`stringFromNumber`，而且也有`numberFromString`。

```
NSString *string = @"$1,000.00";
NSNumberFormatter *numberFormatter = [[NSNumberFormatter alloc] init];
[numberFormatter setNumberStyle: NSNumberFormatterCurrencyStyle];
NSNumber *number = [numberFormatter numberFromString:string];
if (number) {
   // Success
} 
```

# go - 在 Go 中，如何自动将循环索引强制转换为 uint？

> ID：15928071
> 
> 赞同：4
> 
> 时间：2013-04-10T14:02:46.053
> 
> 标签：go

我有一些函数以 an`uint`作为输入：

```
func foo(arg uint) {...}
func bar(arg uint) {...}
func baz(arg uint) {...} 
```

我有一个循环，其限制都是常`uint`数值

```
const (
    Low = 10
    High = 20
) 
```

在下面的循环中，我怎么能说我想`i`成为一个`uint`？编译器抱怨它是一个`int`.

```
for i := Low; i <= High; i++ {
    foo(i)
    bar(i)
    baz(i)
} 
```

我真的不想调用`uint(i)`每个函数调用，执行以下操作是正确的，但让我觉得很脏：

```
var i uint

for i = Low; i <= High; i++ {
    foo(i)
    bar(i)
    baz(i)
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-10T14:10:06.680

```
for i := uint(Low); i < High; i++ {
    ...
} 
```

另请注意，这`uint()`不是函数调用，当应用于常量和（我相信）相同大小的有符号整数时，完全发生在编译时。

或者，虽然我会坚持上述内容，但您可以输入常量。

```
const (
    Low = uint(10)
    High = uint(20)
) 
```

那么`i := Low`也将是一个`uint`。在大多数情况下，我会坚持使用无类型常量。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-10T14:10:43.363

```
for i := uint(Low); i <= High; i++ { //EDIT: cf. larsmans' comment
        foo(i)
        bar(i)
        baz(i)
} 
```

[操场](http://play.golang.org/p/KTpy_cS_2l)

或者定义要输入的常量：

```
const (
        Low  uint = 10
        High uint = 20
)

...

for i := Low; i <= High; i++ {
        foo(i)
        bar(i)
        baz(i)
} 
```

[操场](http://play.golang.org/p/EKYPvIJZGe)

# visual-studio - TFS - 在 Visual Studio 中获取特定代码行的历史记录

> ID：15928072
> 
> 赞同：41
> 
> 时间：2013-04-10T14:02:47.010
> 
> 标签：visual-studio, version-control, tfs

使用 TFS 作为源代码控制时，是否可以获取 Visual Studio 中特定代码行的历史记录？

在我使用另一个源代码控制（Vault）之前，我能够获取代码行的历史记录并检查谁添加/修改了它。看起来 TFS 缺少这样的功能。是否有任何报告工具可以做到这一点。

*我将 Visual Studio 2010 与 TFS 2010 一起使用。*

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-04-10T14:16:24.867

据我所知，没有什么能比得上一行的完整历史记录，这对于版本控制来说可能非常混乱且难以识别。不过，TFS 可以显示最后一次更改特定行的人。有两种方法可以得到这个：

1.  在源代码管理资源管理器中浏览到该文件，右键单击它，然后在上下文菜单的中间找到选项`Annotate`，它将显示给您。

2.  打开您感兴趣的文件。右键单击编辑窗格中的某处并选择`Source Control -> Annotate`

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-07-07T15:50:45.140

这很乏味，但如果你绝望的话，它会起作用：你有一条线路，你想追踪它的历史。

1.  在 TFS Source Control Explorer 中找到该文件，右键单击，查看历史记录。
2.  选择下一个最近的变更集，右键单击，选择变更集详细信息。
3.  在 Changeset Details 中找到该文件，右键单击，选择 Annotate。
4.  这很重要：Annotate 显示在更改集时每行的最新更改集。（这就是为什么您从最近的变更集开始。）找到您感兴趣的行。已注明变更集和作者。
5.  如果这还不够，请返回您的历史记录视图并找到如此记录的变更集。
6.  再次，选择上一个变更集，右键单击，选择变更集详细信息。重复步骤 3-6。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-05-09T15:49:03.947

您也可以在解决方案资源管理器中右键单击该文件并选择注释。

# expandablelistview - expandablelistview getchildview 显示不正确

> ID：15928083
> 
> 赞同：0
> 
> 时间：2013-04-10T14:03:28.227
> 
> 标签：expandablelistview, fill-parent

我是 android 新手，我现在正在尝试使用 ExpandableListView 首先列出组级别的工作类型，然后列出子级别的工作项。但是很奇怪，布局 fill_parent 在 getChildView 方法中不起作用，它就像 wrap_content 一样，当我记录它们与我在布局中设置的内容相关时，相关的 textviews 的高度也变为 0，因此所有 textview 看起来都消失了，除非我手动设置文本大小在代码中。最奇怪的是只有子视图有问题，组级别工作正常，我不需要设置任何文本大小或高度。

下面是一些代码，你能帮我看看是怎么回事吗？非常非常感谢你！！

1.  活动

> ```
> public class WorkListActivity extends Activity implements
>     ExpandableListView.OnGroupClickListener {
> private ExpandableListView elv;
> List<WorkTypeBean> worktypes = null;
> ExpandableAdapter viewAdapter;
> WorkTypeBean worktypeBean = null;
> @Override
> protected void onCreate(Bundle savedInstanceState) {
>     super.onCreate(savedInstanceState);
>     setContentView(R.layout.work_items);
>     elv = (ExpandableListView) findViewById(R.id.workList_ev);
>     elv.setOnGroupClickListener(this);
>     getWorkTypes();  //get all work types user can visit from server
> }
> @Override
> public boolean onGroupClick(ExpandableListView parent, View v,
>         int groupPosition, long id) {
>     if (!parent.isGroupExpanded(groupPosition)){
>         getWorkItems(groupPosition);  
>         //fetch work items from server only when specific group clicked
>     }
>     return false;
> }
> class ExpandableAdapter extends BaseExpandableListAdapter {
>     @Override
>     public View getChildView(int groupPosition, int childPosition,
>             boolean isLastChild, View convertView, ViewGroup parent) {
>         ViewHolder holder;
>         if (convertView==null){
>             LayoutInflater layoutInflater = (LayoutInflater) getBaseContext()
>                     .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
>             convertView = layoutInflater.inflate(
>                     R.layout.work_items_c, null);
>             holder = new ViewHolder();
>             holder.tv1 = (TextView) convertView.findViewById(R.id.tv_work_item_title);
>             holder.tv2 = (TextView) convertView.findViewById(R.id.tv_work_item_applier);
>             holder.iv1 = (ImageView) convertView.findViewById(R.id.iv_work_item_hl);
>             convertView.setTag(holder);
>         }else{
>             holder = (ViewHolder)convertView.getTag();
>         }
>         convertView.setBackgroundColor(Color.WHITE);
>         WorkTypeBean typeBean = worktypes.get(groupPosition);
>         if (typeBean==null){
>             return convertView;
>         }
>         WorkItemBean workitem = typeBean.getItem(childPosition);
>         if (workitem==null){
>             return convertView;
>         }
>         String title = workitem.getTitle();
>         String applier = workitem.getApplier();
>         String postdate = workitem.getArriveTime();
>         int waitdays = Integer.parseInt(workitem.getWaitDays());
>         holder.tv1.setTextColor(Color.BLACK);
>         holder.tv1.setText(title);
>         holder.tv1.setTextSize(15);
>         holder.tv2.setTextColor(Color.BLACK);
>         holder.tv2.setTextSize(10);
>         //if not set, tv2 remains original text "loading..." from work_item_c.xml
>         holder.tv2.setText(applier+" ("+postdate+")");
>         if (waitdays > 2){
>             holder.iv1.setImageResource(R.drawable.wl_urgent);
>         }else{
>             holder.iv1.setImageResource(R.drawable.wl_normal);
>         }
>         return convertView;
>     }
>     @Override
>     public View getGroupView(int groupPosition, boolean isExpanded,
>             View convertView, ViewGroup parent) {
>         ViewHolder holder;
> if (convertView == null) {
> LayoutInflater inflater = (LayoutInflater) getBaseContext()
> .getSystemService(LAYOUT_INFLATER_SERVICE);
> convertView = inflater.inflate(R.layout.work_items_h, null);
>             holder = new ViewHolder();
>             holder.tv1 = (TextView) convertView.findViewById(R.id.tv_worktype);
>             holder.iv1 = (ImageView) convertView.findViewById(R.id.iv_worktype_counter);
>             convertView.setTag(holder);
>         }else{
>             holder = (ViewHolder)convertView.getTag();
> }
>         WorkTypeBean worktype = worktypes.get(groupPosition);
>         if (worktype==null){
>             return convertView;
>         }
>         holder.tv1.setTextColor(Color.BLACK);
>         holder.tv1.setText(worktype.getTitle());
>         return convertView;    
>     }
>     //... some other code 
>     }
>     } 
> ```

1.  组级布局：work_items_h.xml //正常工作

> ```
> <?xml version="1.0" encoding="utf-8"?> 
> ```
> 
> ```
> <LinearLayout
>     android:layout_width="fill_parent"
>     android:layout_height="match_parent" >
> 
>     <RelativeLayout
>         android:layout_width="wrap_content"
>         android:layout_height="match_parent" >
> 
>         <TextView
>             android:id="@+id/tv_worktype"
>             android:layout_width="fill_parent"
>             android:layout_height="wrap_content"
>             android:layout_alignParentLeft="true"
>             android:layout_alignParentTop="true"
>             android:layout_marginLeft="50dp"
>             android:textAppearance="?android:attr/textAppearanceLarge" />
> 
>         <ImageView
>             android:id="@+id/iv_worktype_counter"
>             android:layout_width="wrap_content"
>             android:layout_height="wrap_content"
>             android:layout_alignParentRight="true"
>             android:layout_alignParentTop="true" />
> 
>     </RelativeLayout>
> 
> </LinearLayout>
>      </LinearLayout> 
> ```

1.  子级布局：work_items_c.xml //fill_parent 不起作用，textview 高度也不行

> ```
> <?xml version="1.0" encoding="utf-8"?> 
> ```
> 
> ```
>  <LinearLayout
>         android:layout_width="fill_parent"
>         android:layout_height="wrap_content" >
> 
>         <ImageView
>             android:id="@+id/iv_work_item_hl"
>             android:layout_width="wrap_content"
>             android:layout_height="wrap_content"
>             android:src="@drawable/wl_normal" />
> 
>         <LinearLayout
>             android:layout_width="match_parent"
>             android:layout_height="wrap_content"
>             android:orientation="vertical" >
> 
>             <TextView
>                 android:id="@+id/tv_work_item_title"
>                 android:layout_width="fill_parent"
>                 android:layout_height="wrap_content"
>                 android:text="loading..."
>                 android:textSize="15dp" />
>             <!--tried android:layout_height="fill_parent" but not work-->
> 
>             <TextView
>                 android:id="@+id/tv_work_item_applier"
>                 android:layout_width="fill_parent"
>                 android:layout_height="wrap_content"
>                 android:gravity="right"
>                 android:text="loading..."
>                 android:textAppearance="?android:attr/textAppearanceSmall"
>                 android:textSize="10dp" />
> 
>         </LinearLayout>
> 
>     </LinearLayout> 
> ```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T01:29:35.913

只需覆盖其他一些布局，现在它是正确的。这是我的新布局：

1.  work_item_h.xml

> ```
>  <TextView
>         android:id="@+id/tv_worktype"
>         android:layout_width="259dp"
>         android:layout_height="wrap_content"
>         android:layout_gravity="left|center"
>         android:paddingBottom="10px"
>         android:paddingLeft="40px"
>         android:paddingTop="10px"
>         android:textColor="#ff0000"
>         android:textAppearance="?android:attr/textAppearanceLarge"
>         android:textSize="20.0px" />
> 
>     <ImageView
>         android:id="@+id/iv_worktype_counter"
>         android:layout_width="wrap_content"
>         android:layout_height="wrap_content"
>         android:layout_gravity="right|center"
>         android:src="@drawable/counter" />
> 
> </LinearLayout> 
> ```

1.  work_item_c.xml

> ```
> <ImageView
>     android:id="@+id/iv_work_item_hl"
>     android:layout_width="wrap_content"
>     android:layout_height="wrap_content"
>     android:layout_gravity="center_horizontal"
>     android:layout_marginBottom="2.0px"
>     android:layout_marginLeft="10.0px"
>     android:layout_marginTop="10.0px"
>     android:paddingTop="6.0px" />
> 
> <LinearLayout
>     android:layout_width="fill_parent"
>     android:layout_height="wrap_content"
>     android:layout_marginBottom="2.0px"
>     android:baselineAligned="@+id/iv_work_item_hl"
>     android:orientation="vertical"
>     android:paddingTop="2.0px" >
> 
>     <TextView
>         android:id="@+id/tv_work_item_title"
>         android:layout_width="fill_parent"
>         android:layout_height="wrap_content"
>         android:layout_gravity="left|center"
>         android:layout_marginLeft="10.0px"
>         android:textColor="#ff000000"
>         android:textSize="20.0px" />
> 
>     <TextView
>         android:id="@+id/tv_work_item_applier"
>         android:layout_width="fill_parent"
>         android:layout_height="wrap_content"
>         android:layout_gravity="left|center"
>         android:layout_marginLeft="10.0px"
>         android:textColor="#ff838383"
>         android:textSize="13.0px" />
> </LinearLayout> 
> ```

但我仍然不知道我以前的布局有什么问题，它在我的 Eclipse 布局设计器中正确显示。无论如何，我很高兴看到它终于奏效了。谢谢任何人......，似乎没有人关心我的问题，然后感谢我自己，感谢上帝:)

问候，杰夫

# google-chrome - 在 Chrome 中禁用本地主机上的所有扩展

> ID：15928084
> 
> 赞同：18
> 
> 时间：2013-04-10T14:03:29.673
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools

有没有办法**禁用我在****Google Chrome v26** 中安装的所有扩展程序`http://localhost/`？

原因是，一些扩展注入 HTML 并将图像加载到页面中，例如 Feedly 和 Readability，我在测试页面时不想看到这些。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-10-09T14:40:01.543

@vcsjones 评论说您可以使用[Chrome 配置文件](http://support.google.com/chrome/bin/answer.py?hl=en&answer=2364824)来完成此操作。它不是禁用扩展，而是创建一个单独的配置文件，它将加载不同的扩展清单。

很好的主意。只是希望他将其发布为答案。

你可以使用这个单独的配置文件来下载你专门用于开发的扩展：Postman、React Dev Tools 等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-23T21:49:02.893

具有讽刺意味的是，有一个扩展，它一键禁用所有扩展 [https://chrome.google.com/webstore/detail/niemebbfnfbjfojajlmnbiikmcpjkkja](https://chrome.google.com/webstore/detail/niemebbfnfbjfojajlmnbiikmcpjkkja)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-13T12:28:18.067

您还可以通过单击最小化按钮附近的用户名并以访客身份浏览来切换人员。在那里，提供了没有扩展名的默认 chrome

# codeigniter - codeigniter 会话数据 `all_userdata` 和 `set_userdata`

> ID：15928085
> 
> 赞同：-2
> 
> 时间：2013-04-10T14:03:32.340
> 
> 标签：codeigniter, session

我的应用程序中有以下 codeigniter 代码可以 100% 运行，但我不知道为什么。

**我的控制器语法的一部分**

```
 if($this->input->post()){ 

      $data = array(
       'customer' =>$this->input->post('customer'),
       'period' =>$this->input->post('period'),
       'buom' =>$this->input->post('buom'),
      // 'creditlimit' =>$this->input->post('buom'),
       'creditlimit' => $this->sales_model->get_creditlimit($this->input->post('customer'))
      );

 $this->session->set_userdata($data);
  }

$this->load->view('sales/new_blank_order_lines',$this->session->all_userdata()); 
```

我不明白和之间的`set_userdata($data);`联系`$this->session->all_userdata()`

什么`set_userdata`是`all_userdata`

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:10:27.317

正如文档所说：

对于 all_userdata：

`$this->session->all_userdata()`意味着所有可用的数据都像这样放在一个数组中。

```
Array
(
    [session_id] => 4a5a5dca22728fb0a84364eeb405b601
    [ip_address] => 127.0.0.1
    [user_agent] => Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_7;
    [last_activity] => 1303142623
) 
```

对于 set_userdata：

添加自定义会话数据

> 会话数组的一个有用方面是您可以将自己的数据添加到其中，并将其存储在用户的 cookie 中。你为什么想做这个？这是一个例子：
> 
> 假设某个特定用户登录到您的网站。一旦通过身份验证，您可以将他们的用户名和电子邮件地址添加到会话 cookie 中，从而使您可以在全球范围内使用该数据，而无需在需要时运行数据库查询。
> 
> 要将数据添加到会话数组中，需要将包含新数据的数组传递给此函数：

```
$this->session->set_userdata($array); 
```

其中 $array 是一个包含新数据的关联数组。这是一个例子：

```
$newdata = array(
                   'username'  => 'johndoe',
                   'email'     => 'johndoe@some-site.com',
                   'logged_in' => TRUE
               );

$this->session->set_userdata($newdata); 
```

[在这里](http://ellislab.com/codeigniter/user-guide/libraries/sessions.html)阅读更多

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:10:24.250

*all_userdata* 返回一个包含所有用户数据的数组，它会返回如下内容：

```
Array
(
    [session_id] => 4a5a5dca22728fb0a84364eeb405b601
    [ip_address] => 127.0.0.1
    [user_agent] => Mozilla/5.0 (Macintosh; U; Intel Mac OS X 10_6_7;
    [last_activity] => 1303142623
) 
```

*set_userdata* 设置自定义会话数据。

之所以可行，是因为 CodeIgniter 能够通过 *all_userdata* 识别您的会话

希望这会有所帮助，不要犹豫，问更多问题=）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T14:16:30.540

在顶部添加对我的评论的引用

```
$data = array();
if($this->input->post()){ 
    $data = array(
    'customer' =>$this->input->post('customer'),
    'period' =>$this->input->post('period'),
    'buom' =>$this->input->post('buom'),
    // 'creditlimit' =>$this->input->post('buom'),
    'creditlimit' => $this->sales_model->get_creditlimit($this->input->post('customer'))
    );
}
if(count($data)>0)
{
    $this->load->view('sales/new_blank_order_lines',$data);
}
else
{
    $this->load->view('sales/new_blank_order_lines');
} 
```

# postgresql - 带有 logback 的异步 DBAppender

> ID：15928091
> 
> 赞同：2
> 
> 时间：2013-04-10T14:03:36.480
> 
> 标签：postgresql, slf4j, logback

我正在开发一个使用 logback 进行日志记录的应用程序。我使用 logback DBAppender 将日志插入 DB。

一切对我来说都很好，我能够将日志插入并查看到数据库中。

我使用 200 行日志记录代码进行了一些测试，并测量了这 200 条日志的时间消耗，并在不使用 DBAppender 的情况下获得了 10 毫秒。当我添加 DBAppender 时，我得到了大约 2700 毫秒。

我尝试使用它`ch.qos.logback.classic.AsyncAppender`，但没有让它异步工作。我总是将 0 个结果插入到我的数据库中。

我的配置如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration debug="true"> 

 <appender name="STDOUT" class="ch.qos.logback.core.ConsoleAppender"> 
    <!-- encoders are  by default assigned the type
         ch.qos.logback.classic.encoder.PatternLayoutEncoder -->
    <encoder>
      <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger{36} - %msg%n</pattern>
    </encoder>
  </appender>  

    <appender name="DBAppPostgreSQL" class="ch.qos.logback.classic.db.DBAppender">
        <connectionSource class="ch.qos.logback.core.db.DriverManagerConnectionSource">
            <dataSource class="com.mchange.v2.c3p0.ComboPooledDataSource">
                  <driverClass>org.postgresql.Driver</driverClass>
                  <url>jdbc:postgresql://127.0.0.1:5678/DB</url>
                  <user>YYYYY</user>
                  <password>XXX</password>
            </dataSource>
        </connectionSource>
        <sqlDialect class="ch.qos.logback.core.db.dialect.PostgreSQLDialect" />
        <insertHeaders>true</insertHeaders>
</appender>

    <appender name="ASYNC" class="ch.qos.logback.classic.AsyncAppender">
            <appender-ref ref="DBAppPostgreSQL" />
            <includeCallerData>true</includeCallerData>
    </appender>

  <root level="debug">
      <appender-ref ref="ASYNC" />
      <appender-ref ref="STDOUT" />
  </root>
</configuration> 
```

我的配置有什么遗漏吗？或者有没有其他方法可以让它更快地将日志插入数据库？

请注意，我正在使用 postgreSQL

谢谢，

**编辑：**

我在 slf4j 1.7.5 上使用 logback 1.0.11。我也在使用 postgresql 8.0.325。

logback 的内部状态是：

```
10:52:09,693 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback.groovy]
10:52:09,693 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Could NOT find resource [logback-test.xml]
10:52:09,693 |-INFO in ch.qos.logback.classic.LoggerContext[default] - Found resource [logback.xml] at [file:/D:/BOOM/BoomFinancial/BoomMonitoringTesting/bin/logback.xml]
10:52:09,759 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.core.ConsoleAppender]
10:52:09,761 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [STDOUT]
10:52:09,771 |-INFO in ch.qos.logback.core.joran.action.NestedComplexPropertyIA - Assuming default type [ch.qos.logback.classic.encoder.PatternLayoutEncoder] for [encoder] property
10:52:09,800 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.classic.db.DBAppender]
10:52:09,803 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [DBAppPostgreSQL]
10:52:09,809 |-ERROR in ch.qos.logback.core.joran.spi.Interpreter@14:75 - no applicable action for [dataSource], current pattern is [[configuration][appender][connectionSource][dataSource]]
10:52:09,866 |-INFO in ch.qos.logback.core.db.dialect.DBUtil@30e34726 - Could not call supportsGetGeneratedKeys method. This may be recoverable
10:52:09,866 |-INFO in ch.qos.logback.core.db.DriverManagerConnectionSource@195428dd - Driver name=PostgreSQL Native Driver
10:52:09,866 |-INFO in ch.qos.logback.core.db.DriverManagerConnectionSource@195428dd - Driver version=PostgreSQL 8.0 JDBC2 with NO SSL (build 325)
10:52:09,866 |-INFO in ch.qos.logback.core.db.DriverManagerConnectionSource@195428dd - supportsGetGeneratedKeys=false
10:52:09,867 |-ERROR in ch.qos.logback.core.joran.spi.Interpreter@21:77 - no applicable action for [sqlDialect], current pattern is [[configuration][appender][sqlDialect]]
10:52:09,868 |-ERROR in ch.qos.logback.core.joran.spi.Interpreter@22:21 - no applicable action for [insertHeaders], current pattern is [[configuration][appender][insertHeaders]]
10:52:09,870 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - About to instantiate appender of type [ch.qos.logback.classic.AsyncAppender]
10:52:09,872 |-INFO in ch.qos.logback.core.joran.action.AppenderAction - Naming appender as [ASYNC]
10:52:09,872 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [DBAppPostgreSQL] to ch.qos.logback.classic.AsyncAppender[ASYNC]
10:52:09,872 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Attaching appender named [DBAppPostgreSQL] to AsyncAppender.
10:52:09,874 |-INFO in ch.qos.logback.classic.AsyncAppender[ASYNC] - Setting discardingThreshold to 51
10:52:09,874 |-INFO in ch.qos.logback.classic.joran.action.RootLoggerAction - Setting level of ROOT logger to DEBUG
10:52:09,875 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [ASYNC] to Logger[ROOT]
10:52:09,875 |-INFO in ch.qos.logback.core.joran.action.AppenderRefAction - Attaching appender named [STDOUT] to Logger[ROOT]
10:52:09,875 |-INFO in ch.qos.logback.classic.joran.action.ConfigurationAction - End of configuration.
10:52:09,876 |-INFO in ch.qos.logback.classic.joran.JoranConfigurator@23e0512a - Registering current configuration as safe fallback point 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-11T09:28:32.787

logback 报告了一条错误消息：

```
0:52:09,809 |-ERROR in ch.qos.logback.core.joran.spi.Interpreter@14:75 - no applicable action for [dataSource], current pattern is [[configuration][appender][connectionSource][dataSource]] 
```

这表明嵌套在其中的元素无法被理解。这是配置文件的相关部分：

```
<appender name="DBAppPostgreSQL" class="ch.qos.logback.classic.db.DBAppender">
  <!-- DriverManagerConnectionSource does not have a dataSource property -->
  <connectionSource class="ch.qos.logback.core.db.DriverManagerConnectionSource">
    <dataSource class="com.mchange.v2.c3p0.ComboPooledDataSource">
      <driverClass>org.postgresql.Driver</driverClass>
      <url>jdbc:postgresql://127.0.0.1:5678/DB</url>
      <user>YYYYY</user>
      <password>XXX</password>
    </dataSource>
  </connectionSource>
  <sqlDialect class="ch.qos.logback.core.db.dialect.PostgreSQLDialect" />
  <insertHeaders>true</insertHeaders>
</appender> 
```

`ch.qos.logback.core.db.DriverManagerConnectionSource`没有`dataSource`属性而`ch.qos.logback.core.db.DataSourceConnectionSource`有。您可能希望使用以下命令配置 DBAppPostgreSQL：

```
<appender name="DBAppPostgreSQL" class="ch.qos.logback.classic.db.DBAppender">
  <!-- use DataSourceConnectionSource instead of DriverManagerConnectionSource -->
  <connectionSource class="ch.qos.logback.core.db.DataSourceConnectionSource">
    <dataSource class="com.mchange.v2.c3p0.ComboPooledDataSource">
      <driverClass>org.postgresql.Driver</driverClass>
      <url>jdbc:postgresql://127.0.0.1:5678/DB</url>
      <user>YYYYY</user>
      <password>XXX</password>
    </dataSource>
  </connectionSource>
  <sqlDialect class="ch.qos.logback.core.db.dialect.PostgreSQLDialect" />
  <insertHeaders>true</insertHeaders>
</appender> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-01T19:08:24.270

感谢Ceki的回答。我无法评论它，所以我添加了一个新答案：Ceki 的答案包含另一件事是不正确的：元素“ **url** ”应替换为“ **jdbcUrl** ”。所以配置应该是这样的：

```
<appender name="DBAppPostgreSQL" class="ch.qos.logback.classic.db.DBAppender">
  <!-- use DataSourceConnectionSource instead of DriverManagerConnectionSource -->
  <connectionSource class="ch.qos.logback.core.db.DataSourceConnectionSource">
    <dataSource class="com.mchange.v2.c3p0.ComboPooledDataSource">
      <driverClass>org.postgresql.Driver</driverClass>
      <jdbcUrl>jdbc:postgresql://127.0.0.1:5678/DB</jdbcUrl>
      <user>YYYYY</user>
      <password>XXX</password>
    </dataSource>
  </connectionSource>
  <sqlDialect class="ch.qos.logback.core.db.dialect.PostgreSQLDialect" />
  <insertHeaders>true</insertHeaders>
</appender> 
```

# python - python：如何在运行时检查额外的要求？

> ID：15928101
> 
> 赞同：3
> 
> 时间：2013-04-10T14:03:59.430
> 
> 标签：python, pkg-resources

我们的主应用程序有一些额外的功能，用户可以启用。这些功能在他们自己的目录中。这些功能可能需要额外的依赖。我正在考虑将它们放在一个`requires.txt`文件中。在运行时，我们想让人们知道该功能是否会中断。我目前正在考虑这样的事情：

```
def checkfeature(feature):
  everything_okay = True
  f = pkg_resources.resource_stream(feature, "requires.txt")
  with f:
    for r in pkg_resources.parse_requirements(f):
      if pkg_resources.working_set.find(r) is None:
        print "%r not found, please install, otherwise this feature does not work" % (r,)
        everything_okay = False
  return everything_okay 
```

这是正确的、蟒蛇式的做事方式吗？这有意义吗？

小更新：为什么如此复杂，而不是`try: import ... except ImportError: ...`像一个答案中建议的那样：

1.  我们的插件可能有很多依赖项。创建如下所示的实际代码非常冗长。
2.  某些插件可能需要特定版本的包。需要包装特定测试或`pkg_resources`无论如何都要使用的测试。所以这就是我上面的想法使用 pkg_resources 的原因。
3.  我们想为可以运行的插件运行单元测试。在单元测试中处理 ImportError 并不好。拥有一个`can_we_unit_test_this_plugin(plugin)`函数会让事情变得更容易。

第二次更新：`extra_require`in`setup.py`呢？

1.  人们经常想念安装那些。好吧，不好的借口。
2.  我的愿景是，从上面提到的各个子目录中为各个功能`setup.py`加载直接。但这确实是下一步。`extra_require``requires.txt`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T14:06:46.040

通常，您只需尝试*导入*依赖项，并`ImportError`优雅地处理异常：

```
try:
    import dependency
except ImportError:
    # dependency missing, issue a warning
    import warnings
    warnings.warn('dependency not found, please install to enable xyz feature') 
```

`extras_require`您可以在基于 setuptools 的`setup.py`脚本的条目中列出此类依赖项。`pip`，`easy_install`并且`zc.buildout`所有人都可以处理安装此类附加设备。请参阅[声明“附加”（具有自己依赖项的可选功能）](http://pythonhosted.org/setuptools/setuptools.html#declaring-extras-optional-features-with-their-own-dependencies)。

如果您有这些，您可以使用该`extras_require`条目列出最低版本要求。是的，用户可能已经安装了旧版本的依赖项；我只是清楚地记录要求。真的，测试*功能*，而不是版本。如果您因为添加了某个 API 方法而需要更新版本？测试该方法而不是版本。

但是，听起来好像您可能希望将插件打包为*单独*的包，然后*在*. `extras_require`我会使用[入口点](https://setuptools.readthedocs.io/en/latest/pkg_resources.html#entry-points)来注册和枚举此类插件。这样您就*不需要*测试导入*或*包，您只需枚举已注册的入口点。每个插件都列出了自己的依赖项并拥有自己的单元测试。

# shell - awk 使用变量

> ID：15928106
> 
> 赞同：1
> 
> 时间：2013-04-10T14:04:09.467
> 
> 标签：shell, awk

尽管我可以在日志中看到计数和模式值，但我无法获得计算值。请帮助我，我的要求是获取变量中的设备列表，但我认为它没有获取计数和模式值。

```
pattern=ABCD
count=4
x=3
if [[ $count -gt $x ]] ; then
echo "Count : $count" >> ${LOGFILE}
echo "Pattern : $pattern" >> ${LOGFILE}
list=cat /tmp/info.txt | awk 'a-->0;/"$pattern"/{a=$count}'
echo "List : $list" >> ${LOGFILE}` 
```

我尝试过以下方式但没有工作

```
cat /tmp/info.txt | awk 'a-->0;/"$pattern"/{a=$count}' >> ${LOGFILE} 
```

当我直接在命令行上运行时，它工作正常......

```
cat /tmp/info.txt | awk 'a-->0;/ABCD/{a=4}' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:08:09.230

“模式”是一个外壳变量。awk 不是 shell，它是 awk，因此您不应该期望在 awk 脚本中访问 shell 变量，就像您不希望在 C 程序中访问它们一样。

请参阅 comp.unix.shell FAQ 中的问题 24：

[http://cfajohnson.com/shell/cus-faq-2.html#Q24](http://cfajohnson.com/shell/cus-faq-2.html#Q24)

并使用“-v”选项。

然后也修复你的 shell 问题并得到这个结果：

```
pattern=ABCD
count=4
x=3
if [[ $count -gt $x ]] ; then
echo "Count : $count" >> "$LOGFILE"
echo "Pattern : $pattern" >> "$LOGFILE"
list=$(awk -v pattern="$pattern" -v count="$count" 'a-->0; $0 ~ pattern{a=count}' /tmp/info.txt)
echo "List : $list" >> "$LOGFILE" 
```

`fi`这没有多大意义，但至少在适当的位置添加后应该在语法上是正确的。如果您告诉我们您想要做什么，我们可以帮助您编写一个合理的脚本来完成它。

# asp.net-web-api - 通过 nuget 安装时，如何使用 Microsoft.AspNet.WebApi.OData 解决此依赖问题？

> ID：15928108
> 
> 赞同：0
> 
> 时间：2013-04-10T14:04:14.237
> 
> 标签：asp.net-web-api, nuget, breeze

尝试安装此软件包时，我似乎遇到了依赖问题。我试图弄清楚我搞砸了什么以及如何调试它，这样我就可以使这一切正常工作。奇怪的是，即使它说它未能添加对 System.Web.Http.OData 的引用，该引用也会在失败后出现在项目中。

我在 VS2012 之上安装的唯一东西就是这个更新。

[http://www.asp.net/vnext/overview/latest](http://www.asp.net/vnext/overview/latest)

```
Install-Package Microsoft.AspNet.WebApi.OData
Attempting to resolve dependency 'Microsoft.Net.Http (= 2.0.20710.0 && < 2.1)'.
Attempting to resolve dependency 'Microsoft.AspNet.WebApi.Client (= 4.0.20710.0 && < 4.1)'.
Attempting to resolve dependency 'Newtonsoft.Json (= 4.5.6)'.
Attempting to resolve dependency 'Microsoft.AspNet.WebApi.Core (= 4.0.20710.0 && < 4.1)'.
Attempting to resolve dependency 'Microsoft.Data.OData (= 5.2.0 && < 6.0.0)'.
Attempting to resolve dependency 'System.Spatial (= 5.2.0)'.
Attempting to resolve dependency 'Microsoft.Data.Edm (= 5.2.0)'.
You are downloading Microsoft.AspNet.WebApi.OData from Microsoft, the license agreement to which is available at http://www.microsoft.com/web/webpi/eula/aspnet_and_web_tools_2012_2_RTW_EULA_ENU.htm. Check the package for additional dependencies, which may come with their own license agreement(s). Your use of the package and dependencies constitutes your acceptance of their license agreements. If you do not accept the license agreement(s), then delete the relevant components from your device.
Successfully installed 'Microsoft.AspNet.WebApi.OData 4.0.1'.
Successfully removed 'Microsoft.AspNet.WebApi.OData 4.0.0' from CrashBangZoom.WebApi.
Install failed. Rolling back...
Install-Package : Failed to add reference to 'System.Web.Http.OData'.
At line:1 char:16
+ Install-Package <<<<  Microsoft.AspNet.WebApi.OData
    + CategoryInfo          : NotSpecified: (:) [Install-Package], InvalidOperationException
    + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand 
```

**编辑：**

因此，似乎已经安装了上面的 Microsoft.AspNet.WebApi.OData 包。所以，我删除了那个。现在，当我尝试为 Breeze 安装需要上述库才能工作的软件包时，它会抱怨添加 System.Spatial 。

```
Successfully installed 'Microsoft.AspNet.WebApi.OData 4.0.1'.
Successfully installed 'WebActivator 1.5.3'.
Successfully installed 'Q 0.9.2'.
Successfully installed 'Breeze.WebApi 1.2.8'.
Successfully uninstalled 'System.Spatial 5.2.0'.
Install failed. Rolling back...
Install-Package : Failed to add reference to 'System.Spatial'.
At line:1 char:16
+ Install-Package <<<<  Breeze.WebApi
    + CategoryInfo          : NotSpecified: (:) [Install-Package], InvalidOperationException
    + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:39:47.397

最后不得不卸载并重新安装 VS2012 才能阻止这种情况发生。不确定哪个依赖项搞砸了，但即使删除包并重做它们也无济于事。

# javascript - Javascript，如何在标签之间使用 DOM xpath 进行选择

> ID：15928110
> 
> 赞同：0
> 
> 时间：2013-04-10T14:04:21.990
> 
> 标签：javascript, dom, xpath

如何在`<br>`标签之间选择一些东西，使用 xpath 或者建议其他解决方案。到目前为止，这是我选择的代码，`<p>`但我需要`<br>`标签之间的内容：

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
<p>some text <br>select this </br>and not this</p>
<div id="insert"></div>
<script>
data = document;
var headings = data.evaluate("//p", data, null, XPathResult.ANY_TYPE, null);
var thisHeading = headings.iterateNext();
var selectedText = "Selected: <br>";
while (thisHeading) {
    selectedText += thisHeading.textContent + "<br>";
    thisHeading = headings.iterateNext();
}
document.getElementById('insert').innerHTML = selectedText;
</script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:22:08.797

假设`<br>`是唯一的标签，将在`p`. 您可以拆分每个`<br>`标签以获取元素数组。

*注意：`</br>`无效。*

```
var strings = 'some text <br>select this <br/>and not this'.split(/<br\/?>/i);
alert(strings.length); //3 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:57:35.077

Well`</br>`不是有效的 HTML，因为该`br`元素是一个空元素。

就 XPath 而言，您可以使用路径`//p/br[1]/following-sibling::node()[1][self::text()]`选择具有字符串值的文本节点，`select this`并选择一个空节点集，以防第一`br`个子节点的以下兄弟不是文本节点。

# powershell - powershell 脚本无法从批处理文件中正确运行

> ID：15928115
> 
> 赞同：2
> 
> 时间：2013-04-10T14:04:27.707
> 
> 标签：powershell, batch-file

我有一个正常运行的 PowerShell 脚本，它注册一个计时器对象并每隔几分钟发送一个密钥。

```
$wshell = New-Object -ComObject Wscript.Shell    

...

function fctName {
    param([ScriptBlock] $action)

    ...

    Register-ObjectEvent -InputObject $timer -EventName Elapsed -SourceIdentifier Timer.Elapsed -Action $action
}

fctName {

    ...

    $wshell.sendkeys("{ESC}")
} 
```

在 Windows PowerShell ISE 中，脚本运行良好，没有任何错误。但是，我很想从一个批处理文件中运行它，我在其中只写了这一行：

```
Powershell.exe -noexit C:\...\ScriptName.ps1 
```

没有抛出错误，但它没有做我想要的，这是为了防止 Windows 空闲。

因为我'-noexit' cmd 窗口，我可以很容易地停止事件

```
Unregister-Event -SourceIdentifier Timer.Elapsed 
```

它似乎正在工作，因为只输入两次就会引发错误。

*   难道是我的批处理文件需要不同的代码？也许是“回声”等。我不是很熟悉
*   难道是我必须在 Powershell 中导入一个模块？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:56:00.210

我对 PowerShell 不太满意，但在 JScript 中你可以使用以下代码：

```
var osh = new ActiveXObject("WScript.Shell")
WSH.Echo(
    /cscript/i.test(WSH.FullName)
    ? 'Anti-idle running. Hit Ctrl-C to exit'
    : "Anti-idle running.\nTo stop, use task manager to kill wscript.exe"
);
while (1) {
    WSH.Sleep(120 * 1000);
    osh.SendKeys("{SCROLLLOCK}{SCROLLLOCK}");
} 
```

用`.js`扩展名保存它，你可以双击它来启动它，或者`cmd`通过`cscript /nologo scriptfile.js`.

我认为切换 Scroll Lock 比发送 Esc 更温和，因为 Esc 可能会产生不良后果，具体取决于`SendKeys`线路触发时哪个应用程序恰好具有焦点。

* * *

PowerShell 是否可以访问 Windows 脚本宿主方法，例如`Sleep`？显然[Start-Sleep](http://technet.microsoft.com/en-us/library/ee177002.aspx)也是如此。这可能比生成计时器更可取。希望如果我的 JScript 代码本身不适合您的邪恶目的，它至少适合作为您的 PowerShell 脚本的伪代码。

# sql - 如何使用 PostgreSQL 从表名中获取列属性查询？

> ID：15928118
> 
> 赞同：17
> 
> 时间：2013-04-10T14:04:31.617
> 
> 标签：sql, postgresql, database-design, attributes

我有一个项目，我需要一个查询来使用表名获取列的所有属性（列名、位置、数据类型、Not Null？和评论）。

我实现了获取列名、位置数据类型和 Not Null？使用此查询：

```
SELECT column_name, data_type, ordinal_position, is_nullable 
FROM information_schema."columns"
WHERE "table_name"='TABLE-NAME' 
```

但是，我需要评论！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-04-10T14:37:27.033

这是针对[系统目录](http://www.postgresql.org/docs/9.1/static/catalogs.html)的查询，它应该获取您需要的所有内容（免费提供一个额外的主键字段）。

```
SELECT DISTINCT
    a.attnum as num,
    a.attname as name,
    format_type(a.atttypid, a.atttypmod) as typ,
    a.attnotnull as notnull, 
    com.description as comment,
    coalesce(i.indisprimary,false) as primary_key,
    def.adsrc as default
FROM pg_attribute a 
JOIN pg_class pgc ON pgc.oid = a.attrelid
LEFT JOIN pg_index i ON 
    (pgc.oid = i.indrelid AND i.indkey[0] = a.attnum)
LEFT JOIN pg_description com on 
    (pgc.oid = com.objoid AND a.attnum = com.objsubid)
LEFT JOIN pg_attrdef def ON 
    (a.attrelid = def.adrelid AND a.attnum = def.adnum)
WHERE a.attnum > 0 AND pgc.oid = a.attrelid
AND pg_table_is_visible(pgc.oid)
AND NOT a.attisdropped
AND pgc.relname = 'TABLE_NAME'  -- Your table name here
ORDER BY a.attnum; 
```

这将返回如下结果：

```
 num |    name     |             typ             | notnull |       comment       | primary_key 
-----+-------------+-----------------------------+---------+---------------------+-------------
   1 | id          | integer                     | t       | a primary key thing | t
   2 | ref         | text                        | f       |                     | f
   3 | created     | timestamp without time zone | t       |                     | f
   4 | modified    | timestamp without time zone | t       |                     | f
   5 | name        | text                        | t       |                     | f 
```

*   num：列号
*   name：列名
*   类型：数据类型
*   notnull：列是否定义为`NOT NULL`
*   注释：`COMMENT`为列定义的任何内容
*   primary_key：列是否定义为`PRIMARY KEY`
*   default：用于默认值的命令

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-10T16:36:04.523

建立在[@Chris 的答案之上](https://stackoverflow.com/a/15928893/939860)：

```
SELECT a.attnum
      ,a.attname                            AS name
      ,format_type(a.atttypid, a.atttypmod) AS typ
      ,a.attnotnull                         AS notnull
      ,coalesce(p.indisprimary, FALSE)      AS primary_key
      ,f.adsrc                              AS default_val
      ,d.description                        AS col_comment
FROM   pg_attribute    a 
LEFT   JOIN pg_index   p ON p.indrelid = a.attrelid AND a.attnum = ANY(p.indkey)
LEFT   JOIN pg_description d ON d.objoid  = a.attrelid AND d.objsubid = a.attnum
LEFT   JOIN pg_attrdef f ON f.adrelid = a.attrelid  AND f.adnum = a.attnum
WHERE  a.attnum > 0
AND    NOT a.attisdropped
AND    a.attrelid = 'schema.tbl'::regclass  -- table may be schema-qualified
ORDER  BY a.attnum; 
```

但：

表名在数据库中**不是唯一**的，因此在系统目录中也不是唯一的。您可能必须对名称进行模式限定。作为条件
使用。`a.attrelid = 'tbl'::regclass`这样，您可以`myschema.mytbl`作为名称传递并消除歧义。那么在这种情况下根本不需要加入`pg_class`。
此外，会自动检查可见性，`regclass`不需要`pg_table_is_visible()`.

一个**主键可以跨越多个列**。我通过加入`pg_index`on来解决这个问题`a.attnum = ANY(p.indkey)`。
`indkey`是 的类型`int2vecor`，是 的特例`int2[]`，仅在目录中使用。

我发现[`psql -E`](http://www.postgresql.org/docs/current/interactive/app-psql.html)对这类问题很有帮助。

### 兼容性

像这样的专门查询可能会在主要版本更新后中断。Postgres 不保证目录表保持稳定。基本元素改变的可能性极小，但是查询越复杂和专业，机会就越大。您可以改用[信息模式](http://www.postgresql.org/docs/current/interactive/information-schema.html)，它是标准化的，但也相对较慢。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-02T02:13:13.393

我认为你可以使用这个：

```
select ordinal_position AS num, column_name as name, data_type as typ, character_maximum_length as lenth, 
is_nullable as nullable, column_default as default
from INFORMATION_SCHEMA.COLUMNS
WHERE table_catalog='DatabaseName' AND table_name='TableName' 
```

# php - 匹配 php 中的正则表达式

> ID：15928126
> 
> 赞同：-2
> 
> 时间：2013-04-10T14:04:56.427
> 
> 标签：php, regex

我想要一个 php 中的正则表达式，它匹配以下语句：`{{User:JYBot/count|700,000}}`

commnet：只有数字 700,000 是可变的，其他是固定的。

我写了这个：`'/\{\{User:JYBot/count\|\d{1,10}\}\}/'`但它不能正常工作，因为它的存在。`/`这个正则表达式也不能正常工作：`'/\{\{User:JYBot\/count\|\d{1,10}\}\}/'`

请帮帮我。问候

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T14:13:20.310

一些小方法。拿起你的绳子：

```
{{User:JYBot/count|700,000}} 
```

将应逐字匹配的部分括入`\Q...\E`：

```
\Q{{User:JYBot/count|\E  ...  \Q}}\E 
```

现在`700,000`用它的模式替换动态部分，例如`[\d,]{1,10}`：

```
\Q{{User:JYBot/count|\E[\d,]{1,10}\Q}}\E 
```

添加分隔符（有多个，到目前为止`/`，取一个*不是*`()`字符串的一部分或带有括号的东西，如/`{}`或`[]`），你就完成了：

```
~\Q{{User:JYBot/count|\E[\d,]{1,10}\Q}}\E~ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:07:31.567

尝试以下操作：

```
 /\{{2}User:JYBot\/count\|([0-9\,]+)\}{2}/is 
```

但是，您将获得数字中的逗号，因此您需要将其 str_replace 替换掉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T14:07:54.620

这应该有效，假设数字用逗号分隔：

```
/\{\{User:JYBot\/count\|\d{1,3}(?:,\d{3})*\}\}/ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T14:06:42.467

您要么需要转义斜杠，要么使用不同的分隔符：

**转义斜线：**

```
'/\{\{User:JYBot\/count\|\d{1,10}\}\}/' 
```

**不同的分隔符：**

```
'~\{\{User:JYBot/count\|\d{1,10}\}\}~' 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-10T14:07:14.927

您需要`/`从正则表达式解析器中转义，这意味着解析器需要`\`在它之前看到 a。但是，PHP 字符串表达式`"\/"`的计算结果为`"/"`——您从 PHP 的字符串文字解析器中转义了正斜杠，因此该`\`字符最终不会成为最终字符串的一部分。

为了获得`\`字符串中的实际值，请使用其中两个：

```
'/\{\{User:JYBot\\/count\|\d{1,10}\}\}/' 
```

然后正则表达式解析器将看到`\/`您想要的序列。

# java - Hibernate 在一对多插入时抛出异常

> ID：15928127
> 
> 赞同：1
> 
> 时间：2013-04-10T14:05:03.117
> 
> 标签：java, database, hibernate, insert, one-to-many

我有以下数据库表：

```
CREATE TABLE DS_NVALUES(
  id Number NOT NULL,
  value1 Number(3,0),
  value2 Number(3,0),
  CONSTRAINT ds_nvalues_id PRIMARY KEY (id)
)

CREATE TABLE DS_AREA(
  id Number NOT NULL,
  id_nvalues Varchar2(15),
  n_c Number(4,0),  
  CONSTRAINT ds_area_id PRIMARY KEY (id)
) 
```

一个 DSNValue 可以有一个 DSAreas 列表。这些是映射文件：

```
<hibernate-mapping package="es.entities">
    <class name="DSValues" table="ds_nvalues" lazy="false">
        <id name="id" column="id">
            <generator class="org.hibernate.id.MultipleHiLoPerTableGenerator">
                <param name="table">igea_codigos</param>
                <param name="primary_key_column">nombre</param>
                <param name="value_column">codigo</param>
                <param name="primary_key_value">ds_nvalues</param>
                <param name="max_lo">0</param>
            </generator>
        </id>       
        <property name="value1" column="value1"/>
        <property name="value2" column="value2"/>

        <property name="codedId" formula="encode_id('ds_nvalues', id)"/>

        <bag name="areas" table="ds_area" cascade="save-update, delete" fetch="select" lazy="false" inverse="true" >
            <key property-ref="codedId">
                <column name="id_nvalues"/>
            </key>
            <one-to-many class="es.entities.DSArea" not-found="exception" />
        </bag>

    </class>
</hibernate-mapping>

<hibernate-mapping package="es.entities">
    <class name="DSArea" table="ds_area" lazy="false">
        <id name="id" column="id">
            <generator class="org.hibernate.id.MultipleHiLoPerTableGenerator">
                <param name="table">igea_codigos</param>
                <param name="primary_key_column">nombre</param>
                <param name="value_column">codigo</param>
                <param name="primary_key_value">ds_area</param>
                <param name="max_lo">0</param>
            </generator>
        </id>
        <property name="n_c" column="n_c"/>

        <many-to-one name="dsValues" class="es.entities.DSValues"  unique="true" fetch="select">
            <column name="id_nvalues" write="encode_id('ds_nvalues', ?)"            read="decode_id(id_nvalues)"/>
        </many-to-one> 
    </class>
</hibernate-mapping> 
```

当我创建一个新的 DSNValue 时，我有以下代码：

```
DSArea area1 = new DSArea();
area1.setN_c(300);
List<DSArea> areas = new ArrayList<DSArea>();
areas.add(area1);

DSValues dsValues = new DSValues();
dsValues.setValue1(3);
dsValues.setValue2(4);
dsValues.setAreas(areas);
area1.setDsValues(dsValues);

Session session = getCurrentSession();
Transaction t = session.beginTransaction();     
try{
    session.save(dsValues);
    t.commit();
}catch(Exception e){
    t.rollback();           
} 
```

t.commit 抛出 NullPointerException，但在休眠日志中，我可以看到 INSERT 语句及其值，它们没问题。对于选择数据库元素，此映射配置工作正常。会发生什么？

```
java.lang.NullPointerException
            at 
org.hibernate.type.descriptor.java.AbstractTypeDescriptor.extractHashCode(AbstractTypeDescriptor.java:88)
        at org.hibernate.type.AbstractStandardBasicType.getHashCode(AbstractStandardBasicType.java:210)
        at org.hibernate.type.AbstractStandardBasicType.getHashCode(AbstractStandardBasicType.java:214)
        at org.hibernate.engine.spi.CollectionKey.generateHashCode(CollectionKey.java:86)
        at org.hibernate.engine.spi.CollectionKey.<init>(CollectionKey.java:74)
        at org.hibernate.engine.spi.CollectionKey.<init>(CollectionKey.java:50)
        at org.hibernate.event.internal.AbstractFlushingEventListener.postFlush(AbstractFlushingEventListener.java:369)
        at org.hibernate.event.internal.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:53)
        at org.hibernate.internal.SessionImpl.flush(SessionImpl.java:1233)
        at org.hibernate.internal.SessionImpl.managedFlush(SessionImpl.java:403)
        at org.hibernate.engine.transaction.internal.jdbc.JdbcTransaction.beforeTransactionCommit(JdbcTransaction.java:101)
        at org.hibernate.engine.transaction.spi.AbstractTransactionImpl.commit(AbstractTransactionImpl.java:175)
        at es.indra.rbc.da.impl.oracle.dao.OracleElementDAO.insert(OracleElementDAO.java:51) 
```

# python - 为什么我的 python 字典没有正确更新？

> ID：15928128
> 
> 赞同：0
> 
> 时间：2013-04-10T14:05:02.910
> 
> 标签：python, file-io, google-translate, dictionary

您好，我正在尝试存储我使用 google api 翻译的单词，因此我不必两次进行相同的翻译。所以这是我的代码：

```
def loadtransdict(fro, to):
    try:
        tdictf = open("transdict"+fro+"-"+to+".txt", "r")
        pairs = tdictf.read().split(",")
        tdictf.close()
        tdict = {}
        for pair in pairs:
            tdict[pair.split(":")[0]] = pair.split(":")[1]
        return tdict

    except:
        tdictf = open("transdict"+fro+"-"+to+".txt", "w")
        tdictf.close()
        return {}
    else:
        return None

def writetodict(fro, to, sword, dword):
    try:
        tdictf = open("transdict"+fro+"-"+to+".txt", "r")
        if tdictf.read() == "":
            tdictf = open("transdict"+fro+"-"+to+".txt", "a")
            tdictf.write(sword+":"+dword)
        else:
            tdictf = open("transdict"+fro+"-"+to+".txt", "a")
            tdictf.write(","+sword+":"+dword)
        tdictf.close()
    except:
        return None

def translate(original_word, fro, to):
    tdict = loadtransdict(fro, to)
    if original_word in tdict:
        return tdict[original_word]
    else:
        print original_word
        print tdict
        #mm = requests.get('http://api.mymemory.translated.net/get?q='+word+'&langpair='+fro+'|'+to)
        gt = requests.get('https://www.googleapis.com/language/translate/v2?key=MYKEY='\
                          +original_word+'&source='+fro+'&target='+to+'&prettyprint=false')
        translated_word = re.search("translatedText\":\"(.*)\"", gt.text).group(1)
        writetodict(fro,to,original_word,translated_word)
        return translated_word 
```

其中 transdicten-es.txt 是一个文件，其中包含以下列格式写入的翻译：

> 经常：constantemente，命令：ordenado，潮湿：humedad，错误：模棱两可，尊严：dignidad

我的问题是，通常已经翻译的单词最终会被再次翻译，而不仅仅是从字典中检索到，我无法弄清楚为什么！如果有帮助，则 translate() 在 for 循环中连续被调用 1000 次。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:08:12.477

您裸露的 except 子句将隐藏每个异常，因此您现在不知道代码中真正发生了什么。作为一个经验法则：*永远不要*使用裸的 except 子句，只捕获您期望并且可以处理的异常 - 或者至少以一种或另一种方式记录异常并且永远不要做任何可能有害的事情，假设您知道当您不知道时发生了什么。在你的情况下，`loadtransdict`不应该创建一个空文件，但它应该明确提到出了点问题：

```
def loadtransdict(fro, to):
    tdict = {}
    filename = "transdict"+fro+"-"+to+".txt"
    try:
        tdictf = open(filename, , "r")
        data = tdictf.read()
        tdictf.close()
    except Exception, e:
        print "failed to open '%s'for reading : %s" % (filename, e)

    else:
        pairs = data.split(",")
        for pair in pairs:
            tdict[pair.split(":")[0]] = pair.split(":")[1]

    return tdict

def writetodict(fro, to, sword, dword):
    filename = "transdict"+fro+"-"+to+".txt"
    try:
        tdictf = open(filename, "rw")
    except Exception, e:
        print "failed to open '%s'for read/write : %s" % (filename, e)
        return False

    data = tdictf.read().strip()
    sep = "," if data else ""
    tdictf.write(data + sep + sword + ":" + dword)
    tdictf.close()
    return True 
```

这本身可能无法解决根本原因，但您至少应该知道出了什么问题。

# python - 在使用三次样条插值时确保一阶和二阶微分是连续的

> ID：15928129
> 
> 赞同：2
> 
> 时间：2013-04-10T14:05:10.943
> 
> 标签：python, scipy, interpolation

我正在读这篇[论文](http://link.springer.com/chapter/10.1007/978-3-642-37444-9_22#page-1)。在第 286 页的这篇论文中，他们说他们使用三次样条插值来确保存在连续的一阶微分和二阶微分。

我目前正在尝试在 python 中执行此操作。从这句话我推断他们想要确保彼此相邻的样条的一阶和二阶导数相同。我现在的问题是，我怎么能用 scipy 做到这一点？我发现了这个：[http ://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.splev.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.interpolate.splev.html)

哪里有参数`der`（要计算的样条的导数阶数）。那么这是2的参数吗？

* * *

***关于此的后续问题*n，他们稍后使用一阶微分点。我可以假设这些只是每个样条的一阶导数吗？怎么可能得到这些？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T22:53:26.680

由其计算的样条曲线`scipy.interpolate`具有`k`连续的`1 ... k-1`:th 导数。对于您的案例订单`k=3`将具有连续的一阶和二阶导数。您可以通过样条曲线的数值微分自己检查这是否正确：

```
将 numpy 导入为 np
从 scipy 导入插值
将 matplotlib.pyplot 导入为 plt
x = np.linspace(0, 10, 100)
y = np.sin(x)
spl = interpolate.splrep(x, y, k=3)
xx = np.linspace(0, 10, 100000)
yy = interpolate.splev(xx, spl)
d1 = np.diff(yy) / np.diff(xx)
d2 = np.diff(d1) / np.diff(xx[1:])
d3 = np.diff(d2) / np.diff(xx[1:-1])
plt.subplot(311)
plt.plot(xx[1:], d1)
plt.title('一阶导数')
plt.subplot(312)
plt.plot(xx[1:-1], d2)
plt.title('二阶导数')
plt.subplot(313)
plt.plot(xx[2:-1], d3)
plt.title('三阶导数')
plt.show()

```

三阶导数是第一个显示不连续性的导数。

取二阶导数确实可以直接通过`splev(..., der=2)`.

（不看论文，我无法评论你的第二个问题。）

# selenium - Codeception：如何在前一个测试用例的 url 上继续测试用例？

> ID：15928135
> 
> 赞同：1
> 
> 时间：2013-04-10T14:05:38.077
> 
> 标签：selenium, selenium-webdriver, selenium-rc

我正在使用 selenium2 的代码接收。

并开发一个数据驱动的测试，我需要第一个测试用例（cept 文件）打开的 url 供第二个测试用例（cept 文件）使用，也就是说，第二个 cept 文件的测试应该在同一个浏览器上继续。

请帮助我如何做到这一点。

谢谢，拉克希米

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:35:54.653

在类级别声明一个私有变量，例如，

```
private String url = null; 
```

并在您的第一个测试用例中捕获“url”，例如，

```
url = driver.getCurrentUrl(); 
```

并在您的第二个测试用例中使用此“url”字符串导航到最后一个测试用例“url”，例如，

```
driver.navigate().to(url); 
```

# c# - 使用 Silverlight 中的 BasicHTTPBinding WCF 服务会在打开安全性时中断

> ID：15928137
> 
> 赞同：0
> 
> 时间：2013-04-10T14:05:39.487
> 
> 标签：c#, wcf, silverlight, basichttpbinding

我正在尝试使用 Silverlight (v5) 中的 BasicHTTPBinding WCF 服务（在 .Net 4.0 控制台应用程序中自托管）。当没有传输加密时，一切正常，但我想将流量包装在 SSL 层中。不需要任何类型的身份验证。

打开传输安全性后，我得到了内部异常

> {System.Security.SecurityException ---> System.Security.SecurityException：安全错误。在 System.Net.Browser.BrowserHttpWebRequest.InternalEndGetResponse(IAsyncResult asyncResult) 在 System.Net.Browser.BrowserHttpWebRequest.<>c_ *DisplayClassa.b* _9(Object sendState) 在 System.Net.Browser.AsyncHelper.<>c_ *DisplayClass4.b* _0 (Object sendState) --- 内部异常堆栈跟踪结束 --- 在 System.Net.Browser.BrowserHttp WebRequest.EndGetResponse(IAsyncResult asyncResult) 在 System.Net.Browser.AsyncHelper.BeginOnUI(SendOrPostCallback beginMethod, Object state) 在 System .ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelAsyncRequest.CompleteGetResponse(IAsyncResult 结果)}

这是代码：

**服务器 - 不工作（有安全性）**

```
baseAddress = new Uri("https://mysite.com:8080/myService"); 
BasicHttpBinding externalBinding = new BasicHttpBinding{                                                              MaxReceivedMessageSize = 1000000,
MaxBufferPoolSize = 1000000,
SendTimeout = TimeSpan.FromSeconds(30),
ReceiveTimeout = TimeSpan.FromSeconds(30),
Security = {Mode = BasicHttpSecurityMode.Transport}                                          
                                                   };

           externalBinding.Security.Transport.ClientCredentialType=HttpClientCredentialType.None;
host.AddServiceEndpoint(typeof(IPolicyRetriever), wsbinding, "").Behaviors.Add(new WebHttpBehavior());
host.AddServiceEndpoint(typeof(ImyServiceService), externalBinding, "myService"); 
```

**服务器工作（没有安全性）**

```
baseAddress = new Uri("http://mysite.com:8080/myService"); 

BasicHttpBinding externalBinding = new BasicHttpBinding
{
MaxReceivedMessageSize = 1000000,
MaxBufferPoolSize = 1000000,
SendTimeout = TimeSpan.FromSeconds(30),
ReceiveTimeout = TimeSpan.FromSeconds(30)
                                   }    ;

host.AddServiceEndpoint(typeof(IPolicyRetriever), wsbinding, "").Behaviors.Add(new WebHttpBehavior());
host.AddServiceEndpoint(typeof(ImyServiceService), externalBinding, "myServiceService"); 
```

**SL 客户端不工作（有安全性）**

```
EndpointAddress address = new EndpointAddress("https://mysite.com:8080/myService");
BasicHttpBinding binding = new BasicHttpBinding(BasicHttpSecurityMode.Transport);                                  
client = new myServiceServiceReference.myServiceServiceClient(binding, address); 
```

**SL 客户端工作（无安全性）**

```
EndpointAddress address = new EndpointAddress("http://mysite.com:8080/myService");
BasicHttpBinding binding = new BasicHttpBinding();                           
client = new myServiceServiceReference.myServiceServiceClient(binding, address); 
```

**客户端访问策略.xml**

```
<xml version=""1.0"" encoding=""utf-8""?>
<access-policy>
 <cross-domain-access>
   <policy>
    <allow-from http-request-headers=""*"">
    <domain uri=""*""/></allow-from>
    <grant-to><resource path=""/"" include-subpaths=""true""/>
    </grant-to></policy>
 </cross-domain-access>
</access-policy> 
```

我试过改`http-request-headers`了`https-request-headers`没用。

任何人都可以看到有什么问题吗？我需要做什么才能在此 BasicHTTPBinding 上启用简单的 SSL 安全性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:43:20.870

破解它。奇怪的是，问题出`<domain uri=""*""/>`在`clientaccesspolicy.xml`文件中的那一行——对于 SSL，它必须明确包含 HTTPS。所以工作文件看起来像：

```
<xml version="1.0" encoding="utf-8"?>  <access-policy>  
<cross-domain-access>
 <policy>
    <allow-from http-request-headers="*">
      <domain uri="http://*"/>
      <domain uri="https://*"/>
     </allow-from>
    <grant-to>
       <resource path=""/"" include-subpaths=""true""/>
    </grant-to>
   </policy> 
  </cross-domain-access>
</access-policy> 
```

奇怪，但显然是真的。

# java - 如何返回已在 4 个不同线程中编辑的变量的一个实例？

> ID：15928141
> 
> 赞同：0
> 
> 时间：2013-04-10T14:05:42.270
> 
> 标签：java, multithreading, concurrency

好的，我很抱歉标题。我真的不知道如何表达这个。我会在这里更好地尝试。

所以，我有 2 个 Java 类。我们称它们为**FirstClass**和**SecondClass**（实现 Runnable）。在**FirstClass**中，我正在做一些事情，然后我正在创建 4 个线程。

```
Thread t1 = new Thread (new SecondClass(s1));
Thread t2 = new Thread (new SecondClass(s2));
Thread t3 = new Thread (new SecondClass(s3));
Thread t4 = new Thread (new SecondClass(s4)); 
```

**s1**、**s2**、**s3**和**s4**都是*String*类型并保存单独的值。

然后我立即开始线程。

```
t1.start();
t2.start();
t3.start();
t4.start(); 
```

然后在我的**SecondClass**中，我在默认构造函数中使用这些字符串，如下所示

```
HashMap<String, Integer> map;

public SearchResults(String s) {
    map.put(s, 0);
} 
```

在 run() 方法中，我正在执行以下操作

```
public void run() {
    try {   
        System.out.println(map);
    } catch (Exception e) {
        // TODO: handle exception
    }           
} 
```

所以这个无用程序的结果是**map**被打印了 4 次，有 4 个不同的值。

我想知道如何返回一个**map**实例，该实例包含**t1**放入其中的所有值以及**t2**放入其中的所有值等等。它们都在使用同一个变量**map**，但每个线程都是自己的事情似乎。

我是否可以让线程执行，然后当它们全部完成时，将**映射**返回到另一个类或其他什么？我真的不太了解线程，所以这让我很困惑。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:10:48.667

有很多方法可以做到这一点。更好的解决方案是切换和使用`ExecutorService`，而不是自己分叉线程。然后，您可以在您的中实施`Callable<Map>`（而不是`Runnable`）`SecondClass`并返回每个作业创建的地图。

就像是：

```
// create a thread pool with as many workers as there are jobs
ExecutorService threadPool = Executors.newCachedThreadPool();
List<Future<Map<String, Integer>>> futures =
    new ArrayList<Future<Map<String, Integer>>>();
futures.add(threadPool.submit(new SecondClass(s1)));
futures.add(threadPool.submit(new SecondClass(s2)));
futures.add(threadPool.submit(new SecondClass(s3)));
futures.add(threadPool.submit(new SecondClass(s4)));
// once we have submitted all jobs to the thread pool, it should be shutdown
threadPool.shutdown();
...
Map<String, Integer> all = new HashMap<String, Integer>();
for (Future<Map<String, Integer>> future : futures) {
    // future.get() throws an exception if your call method throws
    all.putAll(future.get());
} 
```

那么你的`SecondClass`工具`Callable`：

```
public Map<String, Integer> call() {
    ...
    return map;
} 
```

您可以使用的其他一些机制包括：

*   使用`ConcurrentHashMap`传入（更好）或`static`（不太好）的共享
*   让您的线程在`BlockingQueue`完成后将结果放在
*   加入线程，然后在获取`Map`创建的类上调用方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:08:00.707

您可以将地图*设为静态*：

```
private static Map<String, Integer> map = new HashMap<String, Integer>(); 
```

这将使您的所有`SecondClass`实例共享同一个地图。

但是，如果您这样做，请不要忘记正确同步，方法是更改​​为另一种`Map`类型或同步您的写入。[您可以在 Java 教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/)中阅读该主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:09:54.547

你想要的是使用[`Future`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html)and [`ExecutorService`](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executors.html#newFixedThreadPool%28int%29)。

看看它的 javadoc，但你可以用它异步计算并等待结果`Future#get()`。最后，您可以将它们全部打印在一起。

就像是：

```
public class SearchResults implements Callable {
     // 
}
...
    ExecutorService executor = Executors.newFixedThreadPool(4);
    List<SearchResults> searchResults = new LinkedList<SearchResults>();
    List<Future> results = executor.invokeAll(searchResults);    
    Map<String, Integer> calculatedResults = new HashMap<String, Integer>();

    for (Future result : results) {
        calculatedResults.putAll(result.get());
    }
    // print calculated results 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T14:11:14.317

如果您想在运行所有线程结束时获得结果，您可能需要查看 using`CyclicBarrier`或 a `CountdownLatch`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T14:18:48.097

正如其他人所说，您可以使用`ConcurrentHashMap`或`ThreadLocal`变量，使用它可以在多个线程中共享一个变量。
现在来到你问题的第二部分，即，

> 我是否可以让线程执行，然后当它们全部完成时，将映射返回到另一个类或其他什么？

正如有人已经建议的那样，您可以使用`Future`，但在这种情况下，如果执行尚未完成，您也必须等待，您将如何处理不同线程的竞争并通知这是另一回事。如果您的要求如此，您可以继续执行此操作。
但我建议您[`Observer`](http://www.vogella.com/articles/DesignPatternObserver/article.html)检查一次模式，并检查是否可以帮助您满足您的要求。一类可以观察线程，一旦完成就可以通知。尝试实施它，如果有任何问题让我们知道。

# ruby - 无法在 Cygwin 上安装 rvm

> ID：15928143
> 
> 赞同：1
> 
> 时间：2013-04-10T14:05:48.143
> 
> 标签：ruby, windows, cygwin, rvm

我在[http://blog.developwithpassion.com/2012/03/30/installing-rvm-with-cygwin-on-windows/](http://blog.developwithpassion.com/2012/03/30/installing-rvm-with-cygwin-on-windows/)关注本教程， 了解如何在 cygwin 上安装 rvm。

当我如图所示运行他们的脚本时

```
$ ./osx_or_cygwin_kick_off 
```

我得到这个错误。

```
./automation/rvm/rvm_install: line 9: /home/Owner/.rvm/scripts/rvm: 
No such file or directory 
```

我尝试手动为 /.rvm/scripts 创建目录，但似乎没有帮助。

我还重新安装了 ca-certifications 包和 curl 包，这显然对很多有同样问题的人有用，但对我没有帮助。

我正在使用 Cygwin 2.774 运行 Windows 7 64 位

请帮忙！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-29T14:47:54.860

我有同样的问题，没有简单的解决方案。

同时，如果需要，您始终可以手动重新安装早期版本的 ruby​​。如果您需要用于 amazon EMR 的旧版 ruby​​，您始终可以使用引导操作安装它。

见这里： [http ://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/emr-plan-bootstrap.html](http://docs.aws.amazon.com/ElasticMapReduce/latest/DeveloperGuide/emr-plan-bootstrap.html)

# wpf - wpf创建具有不可见可点击区域的按钮模板

> ID：15928144
> 
> 赞同：1
> 
> 时间：2013-04-10T14:05:51.457
> 
> 标签：wpf, xaml

我想创建一个按钮模板，使我的按钮周围有不可点击的区域。当我按下该区域时，按钮单击事件应该是

这是我的尝试：

```
<Window x:Class="WpfApplication2.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <Grid>
        <Button Content="Button"  HorizontalAlignment="Left" Margin="214,150,0,0" Name="button1" VerticalAlignment="Top"  Click="button1_Click">
            <Button.Template>
                <ControlTemplate TargetType="Button">
                    <Border Background="Pink" Padding="25">
                        <Button Content="{TemplateBinding Content}"></Button>
                    </Border>     
                </ControlTemplate>              
            </Button.Template>
        </Button>
    </Grid>
</Window> 
```

当我在边界内按下时，该`button1_Click`方法被调用。但内部按钮动画未激活。

当我在边框区域内按下时，我希望内部按钮的行为就像被点击一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:17:55.753

有多种方法，例如将所有命令和事件路由到您的内部按钮，但这可能意味着背后的代码需要大量工作。“唯一的 xaml”解决方案是复制整个[Button Template](http://msdn.microsoft.com/en-us/library/ms753328%28v=vs.85%29.aspx)，并用类似这样的东西覆盖它

```
<ControlTemplate TargetType="Button">
    <Border Background="Transparent">
        <Border
            x:Name="Border"
            Margin="24"
            CornerRadius="2"
            BorderThickness="1"
            Background="{StaticResource NormalBrush}"
            BorderBrush="{StaticResource NormalBorderBrush}">
            <ContentPresenter
                Margin="2"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                RecognizesAccessKey="True"/>
        </Border>
    </Border>
</ControlTemplate> 
```

但是，当用于不同的主题时，这可能会看起来不合适。

# jquery - 缩略图上的jquery灯箱单击更改主图像

> ID：15928153
> 
> 赞同：3
> 
> 时间：2013-04-10T14:06:14.520
> 
> 标签：jquery, html, fancybox, lightbox

我正在将 jquery.fancybox-1.3.4.pack.js 用于灯箱，并且在那个灯箱中我想使用一些 jquery。基本上，它是一个产品灯箱，左边有一个主图像，右边有 3-4 个缩略图。

我希望当用户单击缩略图时，主图像应该根据拇指进行更改。

```
<div class="product-lightBox">
            <img src="images/lb-brand-logo.jpg">
            <div class="product">

                <div class="left">
                    <img src="images/lb-product-img.jpg">
                    <img src="images/lb-product-img.jpg">
                     <img src="images/lb-product-img.jpg">
                </div>

                <div class="right">
                    <div class="row">
                        <h5>Product<span>2088</span></h5>
                    </div>
                    <div class="row">
                        <h5>Color</h5>
                        <ul class="color">
                            <li><a href="#"><img src="images/lb-thumb-img1.jpg"><span>Black<img src="images/color-pointer.png"></span></a></li>
                            <li><a href="#"><img src="images/lb-thumb-img2.jpg"><span>Red<img src="images/color-pointer.png"></span></a></li>
                            <li><a href="#"><img src="images/lb-thumb-img3.jpg"><span>Brown<img src="images/color-pointer.png"></span></a></li>
                        </ul>
                    </div>
                    <div class="row">
                        <h5>Size<span>5 - 11</span></h5>
                    </div>
                    <div class="row">
                        <h5>Prize<span class="price">INR 999</span></h5>
                    </div>
                    <div class="des">
                        <h4>Description</h4>
                        <div class="clear"></div>
                        <div class="detail">
                            <p>This is a long established fact that a reader will be distracted by the readable content of a page when looking at its layout. The point of using Lorem Ipsum</p>
                        </div>
                    </div>
                </div>

                <div class="clear"></div>

                <img src="images/lb-social-icons.jpg">

            </div>
        </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T03:26:52.437

对您的 HTML 稍作修改：

向缩略图添加数据属性

```
<img src="images/lb-thumb-img1.jpg" data-image="images/lb-big-img1.jpg"> 
```

然后做这样的事情：

```
$(".color img").click(function()
{
    var image = $(this).data("image");
    $(".left img").attr("src", image);
}); 
```

# mysql - 如何合并这些 mysql 语句

> ID：15928154
> 
> 赞同：-3
> 
> 时间：2013-04-10T14:06:14.667
> 
> 标签：mysql

我有 2 个工作 MYSQL 语句，我想合并到 1 个查询中：

来自[具有唯一和最大选择的mysql select语句？](https://stackoverflow.com/questions/15912452/mysql-select-statement-with-unique-and-maximum-selects)我有：

```
SELECT field_a, max(dup_number) as dup FROM table1 GROUP BY field_a 
```

我的第二个查询是：

```
where contacts=0 ORDER BY date LIMIT 3 
```

因此一组记录的示意图如下所示：

```
ID     FIELD A     DUP_NUMBER  CONTACTS 
1       text1        0           1        --
2       text2        0           3        --
3       text2        1           3         --
4       text2        2           3        --
5       text3        0           2        -- 
```

我想出了：

```
SELECT *
FROM `table1 `
where max(`DUP_NUMBER `) as dup  and `CONTACTS`=1
GROUP BY `FIELD_A`
ORDER BY date
LIMIT 3 
```

当我在 PHPMyAdmin 中测试时，我得到

```
#1064 - You have an error in your SQL syntax. 
```

谁能告诉我如何正确地重写它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:10:15.110

尝试这个。

```
SELECT *, max(DUP_NUMBER) as dup FROM table1 where  CONTACTS=1 GROUP BY FIELD_A ORDER BY date LIMIT 3 
```

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-04-10T14:11:11.453

问题在这里：

```
where max(`DUP_NUMBER `) as dup  and `CONTACTS`=1
                         ^^^^^^ 
```

您不能在 where 子句中给事物起别名，只能在字段列表中，例如：

```
SELECT max(DUP_NUMBER) as dup
HAVING dup=??? 
```

是你如何使用它。

# jquery - jQuery ui 对话框在标题栏中添加帮助图标

> ID：15928159
> 
> 赞同：2
> 
> 时间：2013-04-10T14:06:25.490
> 
> 标签：jquery, jquery-ui, jquery-ui-dialog

我想在 JQuery UI 对话框的标题栏（右上角）中添加一个帮助图标。

我从默认对话框演示开始

```
$('span.OK').click(function() {
    setTimeout(function(){ $( "#dialog" ).dialog(); }, 100);
}); 
```

这是小提琴 [http://jsfiddle.net/survivant/cyFxp/3/](http://jsfiddle.net/survivant/cyFxp/3/)

我发现主题中有一个默认的帮助图标，但是我不知道如何在标题栏中显示它。

目标是拥有一个 ? （帮助）按钮显示在 X（关闭）按钮旁边。当我点击它时，我想要打开一个弹出窗口（可能是另一个对话框），它会显示帮助。

编辑

多亏了给出的答案，我现在有了一个帮助图标，单击该图标会显示警报。但是，当悬停在此图标上时，光标是“移动”光标，而不是像关闭按钮那样的“指针”光标。

如何防止“移动”光标转而使用“指针”光标？

PS。下面答案中的演示在 jsbin 中工作，但我在 jsfiddle 中的演示不起作用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T14:27:40.770

您可以使用jquery ui 对话框的[dialogClass 属性](http://api.jqueryui.com/dialog/#option-dialogClass)为您的对话框提供一个类。比您可以搜索该类并附`ui-icon-help`加到对话框标题栏。检查这个小提琴：

[演示小提琴](http://jsbin.com/iwiloc/2/edit)

现在您可以根据需要在图标上设置必要的事件。

希望这就是你要找的！

**编辑**

我已经检查了您的小提琴并对其进行了更新，请检查：

[更新的小提琴](http://jsfiddle.net/cyFxp/4/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-26T20:44:05.567

我知道这是一个旧线程，但我认为这可能会对某人有所帮助。

如果您正在动态创建对话框（而不从现有 HTML 元素创建对话框），我发现最简单的方法是使用对话框的“打开”事件（[http://api.jqueryui.com/dialog/ #event-open](http://api.jqueryui.com/dialog/#event-open) ) 将您的图标添加（或附加）到标题。

以下示例使用带有 Twitter Bootstrap 的字体很棒的图标，但您可以为 myIcon 变量使用任何您想要的图标或图像：

```
var myIcon   =  '<i class="icon icon-flag-checkered icon-large pull-left"></i>';       
var myDialog = $('<div title="ALMOST DONE!">'
    + 'Your Text/HTML Here'
    + '</div>');
myDialog.dialog({
    resizable   : false,
    height      : 'auto',
    open        : function(){
        $(this)
        .parent()
        .children(".ui-dialog-titlebar")
        .prepend(myIcon);
    },
    buttons     : {
        "Any Button"    : function(){
            alert('Yep, you clicked it.')
        },
        "OK"    : function(){
            $(this).dialog('close');
        }
    }
}); 
```

jsfiddle 的示例：http: [//jsfiddle.net/drb26/2/](http://jsfiddle.net/drb26/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-11T18:01:17.287

我在 jQuery UI 对话框中添加了一个“图标”选项。完整的修改代码可以在这里找到：[https ://jsfiddle.net/jaysudo/02nwzg8g/1/](https://jsfiddle.net/jaysudo/02nwzg8g/1/)

```
/*!
 * jQuery UI Dialog 1.11.4

 *
 * Copyright jQuery Foundation and other contributors
 * Released under the MIT license.

 *
 * Modified by: Jay Sudo <jay@jaysudo.com>
 * 05/11/2015
 *

 */

var dialog = $.widget( "ui.dialog", {
    version: "1.11.4",
    options: {
        icon: null,
        appendTo: "body",
        autoOpen: true,
        buttons: [],
        closeOnEscape: true,
        closeText: "Close",
        dialogClass: "",
        draggable: true,
        hide: null,
        height: "auto",
        maxHeight: null,
        maxWidth: null,
        minHeight: 150,
        minWidth: 150,
        modal: false,
        position: {
            my: "center",
            at: "center",
            of: window,
            collision: "fit",
            // Ensure the titlebar is always visible
            using: function( pos ) {
                var topOffset = $( this ).css( pos ).offset().top;
                if ( topOffset < 0 ) {
                    $( this ).css( "top", pos.top - topOffset );
                }
            }
        },
        resizable: true,
        show: null,
        title: null,
        width: 300,

        // callbacks
        beforeClose: null,
        close: null,
        drag: null,
        dragStart: null,
        dragStop: null,
        focus: null,
        open: null,
        resize: null,
        resizeStart: null,
        resizeStop: null
    },

    sizeRelatedOptions: {
        buttons: true,
        height: true,
        maxHeight: true,
        maxWidth: true,
        minHeight: true,
        minWidth: true,
        width: true
    },

    resizableRelatedOptions: {
        maxHeight: true,
        maxWidth: true,
        minHeight: true,
        minWidth: true
    },

    _create: function() {
        this.originalCss = {
            display: this.element[ 0 ].style.display,
            width: this.element[ 0 ].style.width,
            minHeight: this.element[ 0 ].style.minHeight,
            maxHeight: this.element[ 0 ].style.maxHeight,
            height: this.element[ 0 ].style.height
        };
        this.originalPosition = {
            parent: this.element.parent(),
            index: this.element.parent().children().index( this.element )
        };
        this.originalTitle = this.element.attr( "title" );
        this.options.title = this.options.title || this.originalTitle;
        this.options.icon = this.options.icon || "ui-icon-info";

        this._createWrapper();

        this.element
            .show()
            .removeAttr( "title" )
            .addClass( "ui-dialog-content ui-widget-content" )
            .appendTo( this.uiDialog );

        this._createTitlebar();
        this._createButtonPane();

        if ( this.options.draggable && $.fn.draggable ) {
            this._makeDraggable();
        }
        if ( this.options.resizable && $.fn.resizable ) {
            this._makeResizable();
        }

        this._isOpen = false;

        this._trackFocus();
    },

    _init: function() {
        if ( this.options.autoOpen ) {
            this.open();
        }
    },

    _appendTo: function() {
        var element = this.options.appendTo;
        if ( element && (element.jquery || element.nodeType) ) {
            return $( element );
        }
        return this.document.find( element || "body" ).eq( 0 );
    },

    _destroy: function() {
        var next,
            originalPosition = this.originalPosition;

        this._untrackInstance();
        this._destroyOverlay();

        this.element
            .removeUniqueId()
            .removeClass( "ui-dialog-content ui-widget-content" )
            .css( this.originalCss )
            // Without detaching first, the following becomes really slow
            .detach();

        this.uiDialog.stop( true, true ).remove();

        if ( this.originalTitle ) {
            this.element.attr( "title", this.originalTitle );
        }

        next = originalPosition.parent.children().eq( originalPosition.index );
        // Don't try to place the dialog next to itself (#8613)
        if ( next.length && next[ 0 ] !== this.element[ 0 ] ) {
            next.before( this.element );
        } else {
            originalPosition.parent.append( this.element );
        }
    },

    widget: function() {
        return this.uiDialog;
    },

    disable: $.noop,
    enable: $.noop,

    close: function( event ) {
        var activeElement,
            that = this;

        if ( !this._isOpen || this._trigger( "beforeClose", event ) === false ) {
            return;
        }

        this._isOpen = false;
        this._focusedElement = null;
        this._destroyOverlay();
        this._untrackInstance();

        if ( !this.opener.filter( ":focusable" ).focus().length ) {

            // support: IE9
            // IE9 throws an "Unspecified error" accessing document.activeElement from an <iframe>
            try {
                activeElement = this.document[ 0 ].activeElement;

                // Support: IE9, IE10
                // If the <body> is blurred, IE will switch windows, see #4520
                if ( activeElement && activeElement.nodeName.toLowerCase() !== "body" ) {

                    // Hiding a focused element doesn't trigger blur in WebKit
                    // so in case we have nothing to focus on, explicitly blur the active element
                    // https://bugs.webkit.org/show_bug.cgi?id=47182
                    $( activeElement ).blur();
                }
            } catch ( error ) {}
        }

        this._hide( this.uiDialog, this.options.hide, function() {
            that._trigger( "close", event );
        });
    },

    isOpen: function() {
        return this._isOpen;
    },

    moveToTop: function() {
        this._moveToTop();
    },

    _moveToTop: function( event, silent ) {
        var moved = false,
            zIndices = this.uiDialog.siblings( ".ui-front:visible" ).map(function() {
                return +$( this ).css( "z-index" );
            }).get(),
            zIndexMax = Math.max.apply( null, zIndices );

        if ( zIndexMax >= +this.uiDialog.css( "z-index" ) ) {
            this.uiDialog.css( "z-index", zIndexMax + 1 );
            moved = true;
        }

        if ( moved && !silent ) {
            this._trigger( "focus", event );
        }
        return moved;
    },

    open: function() {
        var that = this;
        if ( this._isOpen ) {
            if ( this._moveToTop() ) {
                this._focusTabbable();
            }
            return;
        }

        this._isOpen = true;
        this.opener = $( this.document[ 0 ].activeElement );

        this._size();
        this._position();
        this._createOverlay();
        this._moveToTop( null, true );

        // Ensure the overlay is moved to the top with the dialog, but only when
        // opening. The overlay shouldn't move after the dialog is open so that
        // modeless dialogs opened after the modal dialog stack properly.
        if ( this.overlay ) {
            this.overlay.css( "z-index", this.uiDialog.css( "z-index" ) - 1 );
        }

        this._show( this.uiDialog, this.options.show, function() {
            that._focusTabbable();
            that._trigger( "focus" );
        });

        // Track the dialog immediately upon openening in case a focus event
        // somehow occurs outside of the dialog before an element inside the
        // dialog is focused (#10152)
        this._makeFocusTarget();

        this._trigger( "open" );
    },

    _focusTabbable: function() {
        // Set focus to the first match:
        // 1\. An element that was focused previously
        // 2\. First element inside the dialog matching [autofocus]
        // 3\. Tabbable element inside the content element
        // 4\. Tabbable element inside the buttonpane
        // 5\. The close button
        // 6\. The dialog itself
        var hasFocus = this._focusedElement;
        if ( !hasFocus ) {
            hasFocus = this.element.find( "[autofocus]" );
        }
        if ( !hasFocus.length ) {
            hasFocus = this.element.find( ":tabbable" );
        }
        if ( !hasFocus.length ) {
            hasFocus = this.uiDialogButtonPane.find( ":tabbable" );
        }
        if ( !hasFocus.length ) {
            hasFocus = this.uiDialogTitlebarClose.filter( ":tabbable" );
        }
        if ( !hasFocus.length ) {
            hasFocus = this.uiDialog;
        }
        hasFocus.eq( 0 ).focus();
    },

    _keepFocus: function( event ) {
        function checkFocus() {
            var activeElement = this.document[0].activeElement,
                isActive = this.uiDialog[0] === activeElement ||
                    $.contains( this.uiDialog[0], activeElement );
            if ( !isActive ) {
                this._focusTabbable();
            }
        }
        event.preventDefault();
        checkFocus.call( this );
        // support: IE
        // IE <= 8 doesn't prevent moving focus even with event.preventDefault()
        // so we check again later
        this._delay( checkFocus );
    },

    _createWrapper: function() {
        this.uiDialog = $("<div>")
            .addClass( "ui-dialog ui-widget ui-widget-content ui-corner-all ui-front " +
                this.options.dialogClass )
            .hide()
            .attr({
                // Setting tabIndex makes the div focusable
                tabIndex: -1,
                role: "dialog"
            })
            .appendTo( this._appendTo() );

        this._on( this.uiDialog, {
            keydown: function( event ) {
                if ( this.options.closeOnEscape && !event.isDefaultPrevented() && event.keyCode &&
                        event.keyCode === $.ui.keyCode.ESCAPE ) {
                    event.preventDefault();
                    this.close( event );
                    return;
                }

                // prevent tabbing out of dialogs
                if ( event.keyCode !== $.ui.keyCode.TAB || event.isDefaultPrevented() ) {
                    return;
                }
                var tabbables = this.uiDialog.find( ":tabbable" ),
                    first = tabbables.filter( ":first" ),
                    last = tabbables.filter( ":last" );

                if ( ( event.target === last[0] || event.target === this.uiDialog[0] ) && !event.shiftKey ) {
                    this._delay(function() {
                        first.focus();
                    });
                    event.preventDefault();
                } else if ( ( event.target === first[0] || event.target === this.uiDialog[0] ) && event.shiftKey ) {
                    this._delay(function() {
                        last.focus();
                    });
                    event.preventDefault();
                }
            },
            mousedown: function( event ) {
                if ( this._moveToTop( event ) ) {
                    this._focusTabbable();
                }
            }
        });

        // We assume that any existing aria-describedby attribute means
        // that the dialog content is marked up properly
        // otherwise we brute force the content as the description
        if ( !this.element.find( "[aria-describedby]" ).length ) {
            this.uiDialog.attr({
                "aria-describedby": this.element.uniqueId().attr( "id" )
            });
        }
    },

    _createTitlebar: function() {
        var uiDialogTitle;

        this.uiDialogTitlebar = $( "<div>" )
            .addClass( "ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix" )
            .prependTo( this.uiDialog );
        this._on( this.uiDialogTitlebar, {
            mousedown: function( event ) {
                // Don't prevent click on close button (#8838)
                // Focusing a dialog that is partially scrolled out of view
                // causes the browser to scroll it into view, preventing the click event
                if ( !$( event.target ).closest( ".ui-dialog-titlebar-close" ) ) {
                    // Dialog isn't getting focus when dragging (#8063)
                    this.uiDialog.focus();
                }
            }
        });

        // support: IE
        // Use type="button" to prevent enter keypresses in textboxes from closing the
        // dialog in IE (#9312)
        this.uiDialogTitlebarClose = $( "<button type='button'></button>" )
            .button({
                label: this.options.closeText,
                icons: {
                    primary: "ui-icon-closethick"
                },
                text: false
            })
            .addClass( "ui-dialog-titlebar-close" )
            .appendTo( this.uiDialogTitlebar );
        this._on( this.uiDialogTitlebarClose, {
            click: function( event ) {
                event.preventDefault();
                this.close( event );
            }
        });

        uiDialogTitle = $( "<span>" )
            .uniqueId()
            .addClass( "ui-dialog-title" )
            .prependTo( this.uiDialogTitlebar );
        this._title( uiDialogTitle );

        this.uiDialog.attr({
            "aria-labelledby": uiDialogTitle.attr( "id" )
        });
    },

    _title: function( title ) {
        var uiDialogTitleIcon = $( "<span>" )
            .uniqueId()
            .addClass( "ui-icon " + this.options.icon)
            .css( {"display": "inline-block"} );

        if ( !this.options.title ) {
            title.html( "&#160;" );
        }
        title.html(uiDialogTitleIcon[0].outerHTML + " " + this.options.title );
    },

    _createButtonPane: function() {
        this.uiDialogButtonPane = $( "<div>" )
            .addClass( "ui-dialog-buttonpane ui-widget-content ui-helper-clearfix" );

        this.uiButtonSet = $( "<div>" )
            .addClass( "ui-dialog-buttonset" )
            .appendTo( this.uiDialogButtonPane );

        this._createButtons();
    },

    _createButtons: function() {
        var that = this,
            buttons = this.options.buttons;

        // if we already have a button pane, remove it
        this.uiDialogButtonPane.remove();
        this.uiButtonSet.empty();

        if ( $.isEmptyObject( buttons ) || ($.isArray( buttons ) && !buttons.length) ) {
            this.uiDialog.removeClass( "ui-dialog-buttons" );
            return;
        }

        $.each( buttons, function( name, props ) {
            var click, buttonOptions;
            props = $.isFunction( props ) ?
                { click: props, text: name } :
                props;
            // Default to a non-submitting button
            props = $.extend( { type: "button" }, props );
            // Change the context for the click callback to be the main element
            click = props.click;
            props.click = function() {
                click.apply( that.element[ 0 ], arguments );
            };
            buttonOptions = {
                icons: props.icons,
                text: props.showText
            };
            delete props.icons;
            delete props.showText;
            $( "<button></button>", props )
                .button( buttonOptions )
                .appendTo( that.uiButtonSet );
        });
        this.uiDialog.addClass( "ui-dialog-buttons" );
        this.uiDialogButtonPane.appendTo( this.uiDialog );
    },

    _makeDraggable: function() {
        var that = this,
            options = this.options;

        function filteredUi( ui ) {
            return {
                position: ui.position,
                offset: ui.offset
            };
        }

        this.uiDialog.draggable({
            cancel: ".ui-dialog-content, .ui-dialog-titlebar-close",
            handle: ".ui-dialog-titlebar",
            containment: "document",
            start: function( event, ui ) {
                $( this ).addClass( "ui-dialog-dragging" );
                that._blockFrames();
                that._trigger( "dragStart", event, filteredUi( ui ) );
            },
            drag: function( event, ui ) {
                that._trigger( "drag", event, filteredUi( ui ) );
            },
            stop: function( event, ui ) {
                var left = ui.offset.left - that.document.scrollLeft(),
                    top = ui.offset.top - that.document.scrollTop();

                options.position = {
                    my: "left top",
                    at: "left" + (left >= 0 ? "+" : "") + left + " " +
                        "top" + (top >= 0 ? "+" : "") + top,
                    of: that.window
                };
                $( this ).removeClass( "ui-dialog-dragging" );
                that._unblockFrames();
                that._trigger( "dragStop", event, filteredUi( ui ) );
            }
        });
    },

    _makeResizable: function() {
        var that = this,
            options = this.options,
            handles = options.resizable,
            // .ui-resizable has position: relative defined in the stylesheet
            // but dialogs have to use absolute or fixed positioning
            position = this.uiDialog.css("position"),
            resizeHandles = typeof handles === "string" ?
                handles :
                "n,e,s,w,se,sw,ne,nw";

        function filteredUi( ui ) {
            return {
                originalPosition: ui.originalPosition,
                originalSize: ui.originalSize,
                position: ui.position,
                size: ui.size
            };
        }

        this.uiDialog.resizable({
            cancel: ".ui-dialog-content",
            containment: "document",
            alsoResize: this.element,
            maxWidth: options.maxWidth,
            maxHeight: options.maxHeight,
            minWidth: options.minWidth,
            minHeight: this._minHeight(),
            handles: resizeHandles,
            start: function( event, ui ) {
                $( this ).addClass( "ui-dialog-resizing" );
                that._blockFrames();
                that._trigger( "resizeStart", event, filteredUi( ui ) );
            },
            resize: function( event, ui ) {
                that._trigger( "resize", event, filteredUi( ui ) );
            },
            stop: function( event, ui ) {
                var offset = that.uiDialog.offset(),
                    left = offset.left - that.document.scrollLeft(),
                    top = offset.top - that.document.scrollTop();

                options.height = that.uiDialog.height();
                options.width = that.uiDialog.width();
                options.position = {
                    my: "left top",
                    at: "left" + (left >= 0 ? "+" : "") + left + " " +
                        "top" + (top >= 0 ? "+" : "") + top,
                    of: that.window
                };
                $( this ).removeClass( "ui-dialog-resizing" );
                that._unblockFrames();
                that._trigger( "resizeStop", event, filteredUi( ui ) );
            }
        })
        .css( "position", position );
    },

    _trackFocus: function() {
        this._on( this.widget(), {
            focusin: function( event ) {
                this._makeFocusTarget();
                this._focusedElement = $( event.target );
            }
        });
    },

    _makeFocusTarget: function() {
        this._untrackInstance();
        this._trackingInstances().unshift( this );
    },

    _untrackInstance: function() {
        var instances = this._trackingInstances(),
            exists = $.inArray( this, instances );
        if ( exists !== -1 ) {
            instances.splice( exists, 1 );
        }
    },

    _trackingInstances: function() {
        var instances = this.document.data( "ui-dialog-instances" );
        if ( !instances ) {
            instances = [];
            this.document.data( "ui-dialog-instances", instances );
        }
        return instances;
    },

    _minHeight: function() {
        var options = this.options;

        return options.height === "auto" ?
            options.minHeight :
            Math.min( options.minHeight, options.height );
    },

    _position: function() {
        // Need to show the dialog to get the actual offset in the position plugin
        var isVisible = this.uiDialog.is( ":visible" );
        if ( !isVisible ) {
            this.uiDialog.show();
        }
        this.uiDialog.position( this.options.position );
        if ( !isVisible ) {
            this.uiDialog.hide();
        }
    },

    _setOptions: function( options ) {
        var that = this,
            resize = false,
            resizableOptions = {};

        $.each( options, function( key, value ) {
            that._setOption( key, value );

            if ( key in that.sizeRelatedOptions ) {
                resize = true;
            }
            if ( key in that.resizableRelatedOptions ) {
                resizableOptions[ key ] = value;
            }
        });

        if ( resize ) {
            this._size();
            this._position();
        }
        if ( this.uiDialog.is( ":data(ui-resizable)" ) ) {
            this.uiDialog.resizable( "option", resizableOptions );
        }
    },

    _setOption: function( key, value ) {
        var isDraggable, isResizable,
            uiDialog = this.uiDialog;

        if ( key === "dialogClass" ) {
            uiDialog
                .removeClass( this.options.dialogClass )
                .addClass( value );
        }

        if ( key === "disabled" ) {
            return;
        }

        this._super( key, value );

        if ( key === "appendTo" ) {
            this.uiDialog.appendTo( this._appendTo() );
        }

        if ( key === "buttons" ) {
            this._createButtons();
        }

        if ( key === "closeText" ) {
            this.uiDialogTitlebarClose.button({
                // Ensure that we always pass a string
                label: "" + value
            });
        }

        if ( key === "draggable" ) {
            isDraggable = uiDialog.is( ":data(ui-draggable)" );
            if ( isDraggable && !value ) {
                uiDialog.draggable( "destroy" );
            }

            if ( !isDraggable && value ) {
                this._makeDraggable();
            }
        }

        if ( key === "position" ) {
            this._position();
        }

        if ( key === "resizable" ) {
            // currently resizable, becoming non-resizable
            isResizable = uiDialog.is( ":data(ui-resizable)" );
            if ( isResizable && !value ) {
                uiDialog.resizable( "destroy" );
            }

            // currently resizable, changing handles
            if ( isResizable && typeof value === "string" ) {
                uiDialog.resizable( "option", "handles", value );
            }

            // currently non-resizable, becoming resizable
            if ( !isResizable && value !== false ) {
                this._makeResizable();
            }
        }

        if ( key === "title" ) {
            this._title( this.uiDialogTitlebar.find( ".ui-dialog-title" ) );
        }
    },

    _size: function() {
        // If the user has resized the dialog, the .ui-dialog and .ui-dialog-content
        // divs will both have width and height set, so we need to reset them
        var nonContentHeight, minContentHeight, maxContentHeight,
            options = this.options;

        // Reset content sizing
        this.element.show().css({
            width: "auto",
            minHeight: 0,
            maxHeight: "none",
            height: 0
        });

        if ( options.minWidth > options.width ) {
            options.width = options.minWidth;
        }

        // reset wrapper sizing
        // determine the height of all the non-content elements
        nonContentHeight = this.uiDialog.css({
                height: "auto",
                width: options.width
            })
            .outerHeight();
        minContentHeight = Math.max( 0, options.minHeight - nonContentHeight );
        maxContentHeight = typeof options.maxHeight === "number" ?
            Math.max( 0, options.maxHeight - nonContentHeight ) :
            "none";

        if ( options.height === "auto" ) {
            this.element.css({
                minHeight: minContentHeight,
                maxHeight: maxContentHeight,
                height: "auto"
            });
        } else {
            this.element.height( Math.max( 0, options.height - nonContentHeight ) );
        }

        if ( this.uiDialog.is( ":data(ui-resizable)" ) ) {
            this.uiDialog.resizable( "option", "minHeight", this._minHeight() );
        }
    },

    _blockFrames: function() {
        this.iframeBlocks = this.document.find( "iframe" ).map(function() {
            var iframe = $( this );

            return $( "<div>" )
                .css({
                    position: "absolute",
                    width: iframe.outerWidth(),
                    height: iframe.outerHeight()
                })
                .appendTo( iframe.parent() )
                .offset( iframe.offset() )[0];
        });
    },

    _unblockFrames: function() {
        if ( this.iframeBlocks ) {
            this.iframeBlocks.remove();
            delete this.iframeBlocks;
        }
    },

    _allowInteraction: function( event ) {
        if ( $( event.target ).closest( ".ui-dialog" ).length ) {
            return true;
        }

        // TODO: Remove hack when datepicker implements
        // the .ui-front logic (#8989)
        return !!$( event.target ).closest( ".ui-datepicker" ).length;
    },

    _createOverlay: function() {
        if ( !this.options.modal ) {
            return;
        }

        // We use a delay in case the overlay is created from an
        // event that we're going to be cancelling (#2804)
        var isOpening = true;
        this._delay(function() {
            isOpening = false;
        });

        if ( !this.document.data( "ui-dialog-overlays" ) ) {

            // Prevent use of anchors and inputs
            // Using _on() for an event handler shared across many instances is
            // safe because the dialogs stack and must be closed in reverse order
            this._on( this.document, {
                focusin: function( event ) {
                    if ( isOpening ) {
                        return;
                    }

                    if ( !this._allowInteraction( event ) ) {
                        event.preventDefault();
                        this._trackingInstances()[ 0 ]._focusTabbable();
                    }
                }
            });
        }

        this.overlay = $( "<div>" )
            .addClass( "ui-widget-overlay ui-front" )
            .appendTo( this._appendTo() );
        this._on( this.overlay, {
            mousedown: "_keepFocus"
        });
        this.document.data( "ui-dialog-overlays",
            (this.document.data( "ui-dialog-overlays" ) || 0) + 1 );
    },

    _destroyOverlay: function() {
        if ( !this.options.modal ) {
            return;
        }

        if ( this.overlay ) {
            var overlays = this.document.data( "ui-dialog-overlays" ) - 1;

            if ( !overlays ) {
                this.document
                    .unbind( "focusin" )
                    .removeData( "ui-dialog-overlays" );
            } else {
                this.document.data( "ui-dialog-overlays", overlays );
            }

            this.overlay.remove();
            this.overlay = null;
        }
    }
}); 
```

# flash - Flash、actionscript、flex，将 mx.controls.* 组件添加到 flash.display.Sprite

> ID：15928160
> 
> 赞同：0
> 
> 时间：2013-04-10T14:06:26.563
> 
> 标签：flash, apache-flex, sprite, flex-mx

我正在处理我的项目，需要在 flash 中创建温度计组件（组件将显示当前温度值）。所以我决定使用 Sprite (flash.display.Sprite) 组件作为包装器并创建了这些子组件：

*   flash.display.Bitmap, BitmapData - 背景，温度计图像
*   flash.text.TextField - 文本（带有单位的当前温度值）
*   flash.display.Shape - 温度计条

接下来我需要添加一些闪烁的文本（缺失值），最好使用`mx.contols.Label`（或火花标签）组件（支持 AnimateColor）。但是当我将新的标签组件添加到包装器时，添加的标签不会显示。所以我想知道是否可以`mx.controls.*`向Sprite添加组件或推荐什么解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:51:14.483

mx 组件必须在 Flex 框架的上下文中使用。如果您将 Flex 组件添加到非 Flex 容器（例如 Sprite），那么您正在使用 Flex 上下文之外的组件，而 Flex 框架类（例如 LayoutManager）将不知道调用此类方法如 measure()、createChildren()、updateDisplayList() 或 commitProperties()。

如果这是你想要做的；那么没有出现的原因是因为组件没有通过它的[Flex Component LifeCycle](http://livedocs.adobe.com/flex/3/html/help.html?content=ascomponents_advanced_2.html)；因此没有任何东西可以显示。

如果您在 Flash Pro 中构建某些东西，或者在 Flash Builder 中使用仅 ActionScript 的项目，那么您可能没有使用 Flex 框架，我不希望该组件能够工作。但是，如果是这种情况，我希望您会看到由于缺少依赖项而导致的编译错误。

# android - WebView 未填充

> ID：15928163
> 
> 赞同：0
> 
> 时间：2013-04-10T14:06:30.377
> 
> 标签：android, android-layout, android-webview

我有一个 TextView，它打开另一个带有 webview 的布局。我希望 webview 填充[http://m.twitter.com](http://m.twitter.com)

但是，当单击 textview 时，它会打开布局，然后调用浏览器而不是填充 webview。

带有 textview 的原始布局：-

```
 <TextView
      android:id="@+id/GoToTCContacting"
      android:layout_width="360dp"
      android:layout_height="wrap_content"
      android:layout_marginLeft="2dp"
      android:layout_marginRight="2dp"
      android:layout_weight="2"
      android:background="@drawable/border2"
      android:clickable="true"
      android:onClick="GoToTCContacting"
      android:padding="10dp"
      android:text="Contacting"
      android:textColor="#FFF"
      android:textSize="18sp" /> 
```

使用 WebView 的目标布局 (t_c_contacting)

```
 <WebView
      android:id="@+id/TCcontactingView"
      android:layout_width="match_parent"
      android:layout_height="match_parent" /> 
```

用于函数的 Java

```
 public void GoToTCContacting(View view)  
{  
    setContentView(R.layout.t_c_contacting); 
    WebView webView =   (WebView)findViewById(R.id.TCcontactingView);
    webView.loadUrl("http://m.twitter.com");
} 
```

我怎样才能让它填充webview而不调用默认浏览器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:23:26.597

您需要实现您的网络客户端并将其设置为您的 WebView ：

```
webView.setWebViewClient(new MyWebViewClient());

private class MyWebViewClient extends WebViewClient {
        @Override
        public boolean shouldOverrideUrlLoading(WebView view, String url) {
            view.loadUrl(url);
            return true;
        }
    } 
```

示例： http: [//marakana.com/forums/android/examples/58.html](http://marakana.com/forums/android/examples/58.html)

重复：[Android webview 在调用 loadurl 时启动浏览器](https://stackoverflow.com/questions/7746409/android-webview-launches-browser-when-calling-loadurl)

# jquery - 创建一个循环输入的函数以检查它们是否为空白

> ID：15928165
> 
> 赞同：0
> 
> 时间：2013-04-10T14:06:36.783
> 
> 标签：jquery, forms, function

我正在尝试创建一个接受 div id 作为参数的函数，然后搜索该 div，检查是否填充了所有必需的文本输入。

我无法更改 HTML，我只能在页面中添加 JS。

我不确定如何仅针对所需的输入，然后检查所有输入以查看它们是否完整。

```
checkinputs = function(block){

$('block > :input').keyup(function() {
    var $emptyFields = $('block :input').filter(function() {
        return $.trim(this.value) === "";
    });

    if (!$emptyFields.length) {
        alert("form has been filled");
    }
    else {
    alert("form is still missing input");
    }
  });
};

$('body').on("click", "#step_3", function(e){ 
checkinputs('#ctl00_MainContentHolder_StoreAddressEditorBilling_addressDiv');
}); 
```

我有这个小提琴中的所有代码：

[http://jsfiddle.net/AebC6/1/](http://jsfiddle.net/AebC6/1/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:10:47.980

您的选择器没有使用`block`您传入的参数。

```
$('block > :input').keyup(function() { ... }); 
```

上面的选择器正在寻找一个元素`<block>`并获取任何子`input`元素

使用`block`如下作为参数：

```
$(block).find(':input').keyup(function() { ... });

$(block).find(':input').filter(function() { ... }); 
```

[http://jsfiddle.net/EGCWq/](http://jsfiddle.net/EGCWq/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:15:43.950

```
checkinputs = function (block) {
    var notAllFilled = $(block).find('input').filter(function () {
        return $.trim(this.value) === "";
    });
    var alertText = notAllFilled ? "form is still missing input" : "form has been filled";
    alert(alertText);
}

$('body').on("click", "#step_3", function (e) {
    checkinputs('#ctl00_MainContentHolder_StoreAddressEditorBilling_addressDiv');
}); 
```

编辑：更新了一个非常详细的版本。检查隐藏的输入并忽略它们。给出好的石灰背景和坏的浅绿色，并用粉红色的父背景显示它正在验证的那些。

还根据有效性调整“*”文本。

这完全取决于博客中元素的 id 结尾。

您需要清理它以进行生产！

```
checkinputs = function (block) {
    var validators = $(block).find("[id$='RequiredIndicator']").parent().parent('tr').find(':input:not(:hidden)');
    var notAllFilled = validators.filter(function () {
        var myInput = $(this); //.parent().parent('tr').find(':input');
        var filledVal = myInput.val();
        var isFilled = $.trim(filledVal).length;
        if (isFilled) {
            myInput.css('background-color', 'lime');
            $(this).parent('td').prev('td').find('span').text(' ');
        } else {
            myInput.css('background-color', 'aqua');
            $(this).parent('td').prev('td').find('span').text('*');
        }
        return isFilled;
    }).length;
    validators.parent().css('background-color', 'pink');
    var inputCount = validators.length;
    var alertText = notAllFilled == inputCount ? "form has been filled" : "form is still missing input";
    alert(alertText);
};

$('body').on("click", "#step_3", function (e) {
    checkinputs('#ctl00_MainContentHolder_StoreAddressEditorBilling_addressDiv');
}); 
```

# android - 使用 oAuth 在 android 中获取 yahoo 联系人

> ID：15928169
> 
> 赞同：0
> 
> 时间：2013-04-10T14:06:43.830
> 
> 标签：android, oauth, contacts, yahoo

这是我在 android 中获取 yahoo 联系人的代码。我能够获取访问令牌，但是在对联系人发出 GET 请求时，我收到签名无效错误。

我搜索了很多，但我找不到我做错了什么。所以任何人都帮我一把。

```
public class YahooContacts extends BaseActivity {
    private final String TAG = "yahoo_auth";

    private static final String CONSUMER_KEY = "My_consumer_key";
    private static final String CONSUMER_SECRET = "my_consumer_secret";

    private static final String CALLBACK_SCHEME = "http";
    private static final String CALLBACK_HOST = "www.something_unique_here.com";
    private static final String CALLBACK_URL = CALLBACK_SCHEME + "://"
            + CALLBACK_HOST;

    private String AUTH_TOKEN = null;
    private String AUTH_TOKEN_SECRET = null;
    private String AUTH_URL = null;
    private String USER_TOKEN = null;
    private String ACCESS_TOKEN = null;
    private String mUSER_GUID = null;

    private WebView mWebview;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.yahoo_layout);
        mWebview = (WebView) findViewById(R.id.webview);
        new getContactsTask().execute();

    }

    class getContactsTask extends AsyncTask<Void, Void, Void> {

        @Override
        protected void onPreExecute() {
            super.onPreExecute();
        }

        @Override
        protected Void doInBackground(Void... params) {
            getAuthorizationToken();
            getUserAutherization();

            return null;
        }

        @Override
        protected void onPostExecute(Void result) {

            super.onPostExecute(result);
        }

    }

    private void getAuthorizationToken() {

        String requestPath = "https://api.login.yahoo.com/oauth/v2/get_request_token?oauth_consumer_key="
                + CONSUMER_KEY
                + "&oauth_nonce="
                + System.currentTimeMillis()
                + "x"
                + "&oauth_signature_method=PLAINTEXT"
                + "&oauth_signature="
                + CONSUMER_SECRET
                + "%26"
                + "&oauth_timestamp="
                + System.currentTimeMillis()
                + "&oauth_version=1.0"
                + "&xoauth_lang_pref=en-us"
                + "&oauth_callback=" + CALLBACK_URL;
        HttpClient httpclient = new DefaultHttpClient();
        HttpGet httpget = new HttpGet(requestPath);
        try {
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            String responseBody = httpclient.execute(httpget, responseHandler);
            String[] data = responseBody.split("&");
            AUTH_TOKEN = data[0].replace("oauth_token=", "");
            AUTH_TOKEN_SECRET = data[1].replace("oauth_token_secret=", "");
            AUTH_URL = data[3].replace("xoauth_request_auth_url=", "");
            VIPLogger.info(TAG, "authToken" + AUTH_TOKEN);
            VIPLogger.info(TAG, "authToken secret" + AUTH_TOKEN_SECRET);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    private void getUserAutherization() {
        mWebview.getSettings().setJavaScriptEnabled(true);
        mWebview.setWebViewClient(lWebviewClient);
        mWebview.loadUrl("https://api.login.yahoo.com/oauth/v2/request_auth?oauth_token="
                + AUTH_TOKEN);
    }

    private void getAccessToken() {
        String requestPath = "https://api.login.yahoo.com/oauth/v2/get_token?oauth_consumer_key="
                + CONSUMER_KEY
                + "&oauth_nonce="
                + System.currentTimeMillis()
                + "x"
                + "&oauth_signature_method=PLAINTEXT"
                + "&oauth_signature="
                + CONSUMER_SECRET
                + "%26"
                + AUTH_TOKEN_SECRET
                + "&oauth_timestamp="
                + System.currentTimeMillis()
                + "&oauth_version=1.0"
                + "&oauth_token="
                + AUTH_TOKEN
                + "&oauth_verifier="
                + USER_TOKEN;
        HttpClient httpclient = new DefaultHttpClient();
        HttpGet httpget = new HttpGet(requestPath);
        try {
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            String responseBody = httpclient.execute(httpget, responseHandler);
            String[] data = responseBody.split("&");
            ACCESS_TOKEN = data[0].replace("oauth_token=", "");
            mUSER_GUID = data[5].replace("xoauth_yahoo_guid=", "");
            VIPLogger.info(TAG, "user guid: " + mUSER_GUID);
            VIPLogger.info(TAG, "Access token: " + ACCESS_TOKEN);
            getAllContacts();
        } catch (Exception e) {
            e.printStackTrace();
            VIPLogger.error(TAG,
                    "error while fetching user guid and access token");
        }
    }

    WebViewClient lWebviewClient = new WebViewClient() {

        public void onPageStarted(WebView view, String url,
                android.graphics.Bitmap favicon) {
            if (url.contains("vipitservice")) {
                mWebview.stopLoading();
                int lastIndex = url.lastIndexOf("=") + 1;
                VIPLogger.info(TAG, url.substring(lastIndex, url.length()));
                USER_TOKEN = url.substring(lastIndex, url.length());
                mWebview.setVisibility(View.GONE);

                getAccessToken();
            }
        };

    };

    private void getAllContacts() {

        HttpClient httpclient = new DefaultHttpClient();

        String host_url = "http://social.yahooapis.com/v1/user/" + mUSER_GUID+ "/contacts";

        String nonce = ""+System.currentTimeMillis();
        String timeStamp = ""+(System.currentTimeMillis()/1000L);

        try{
            String params = "?realm=yahooapis.com" 
                    + "&oauth_consumer_key=" + CONSUMER_KEY
                    + "&oauth_nonce="+nonce
                    + "&oauth_signature_method="+"HMAC-SHA1"
                    + "&oauth_timestamp="+timeStamp
                    + "&oauth_token="+URLDecoder.decode(ACCESS_TOKEN,"utf-8")
                    + "&oauth_version=1.0"

                    ;
            String baseString = "GET&"+encode(host_url)+encode(params);
            String signingKey = encode(CONSUMER_SECRET)+"&"+encode(AUTH_TOKEN_SECRET);
            VIPLogger.info(TAG, "base string: " + baseString);
            String lSignature = computeHmac(baseString, signingKey);
            VIPLogger.info(TAG, "signature: " + lSignature);
            lSignature = encode(lSignature);
            VIPLogger.info(TAG, "signature enacoded: " + lSignature);

            String lRequestUrl = host_url
                                + "?realm=yahooapis.com"
                                + "&oauth_consumer_key="+CONSUMER_KEY
                                + "&oauth_nonce="+nonce
                                + "&oauth_signature_method=HMAC-SHA1"
                                + "&oauth_timestamp="+timeStamp
                                + "&oauth_token="+ACCESS_TOKEN
                                + "&oauth_version=1.0"
                                + "&oauth_signature="+lSignature
                                ;
            VIPLogger.info(TAG, lRequestUrl.substring(1202));
            HttpGet httpget = new HttpGet(lRequestUrl);
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            String responseBody = httpclient.execute(httpget, responseHandler);

            VIPLogger.info(TAG, "contacts response: " + responseBody);
        }catch(Exception e){
            e.printStackTrace();
            VIPLogger.error(TAG, "error while fetching user contacts");
        }

    }

    public String computeHmac(String baseString, String key) {
        try {
            Mac mac = Mac.getInstance("HmacSHA1");
            SecretKeySpec signingKey = new SecretKeySpec(key.getBytes("UTF-8"),
                    "HMAC-SHA1");
            mac.init(signingKey);
            byte[] digest = mac.doFinal(baseString.getBytes());
            String result = Base64.encodeToString(digest, Base64.URL_SAFE);
            return result;
        } catch (Exception e) {
            e.printStackTrace();
            VIPLogger.error(TAG, "error while generating sha");
        }
        return null;

    }

    public String encodeURIComponent(final String value) {
        if (value == null) {
            return "";
        }

        try {
            return URLEncoder.encode(value, "utf-8")
                    // OAuth encodes some characters differently:
                    .replace("+", "%20").replace("*", "%2A")
                    .replace("%7E", "~");
            // This could be done faster with more hand-crafted code.
        } catch (Exception e) {
            e.printStackTrace();
        }
        return "";
    }

        public  String encode(String input) {
            StringBuilder resultStr = new StringBuilder();
            for (char ch : input.toCharArray()) {
                if (isUnsafe(ch)) {
                    resultStr.append('%');
                    resultStr.append(toHex(ch / 16));
                    resultStr.append(toHex(ch % 16));
                } else {
                    resultStr.append(ch);
                }
            }
            return resultStr.toString().trim();
        }

        private  char toHex(int ch) {
            return (char) (ch < 10 ? '0' + ch : 'A' + ch - 10);
        }

        private  boolean isUnsafe(char ch) {
            if (ch > 128 || ch < 0)
                return true;
            return " %$&+,/:;=?@<>#%".indexOf(ch) >= 0;
        }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T12:21:04.440

我用这段代码解决了这个问题。诀窍是您需要对所有“键”和“值”进行编码，然后再次对参数进行编码。. 请记住，access_token 是预编码的。

```
private void getAllContacts() {

    HttpClient httpclient = new DefaultHttpClient();

    String host_url = "http://social.yahooapis.com/v1/user/" + mUSER_GUID+ "/contacts";

    String nonce = ""+System.currentTimeMillis();
    String timeStamp = ""+(System.currentTimeMillis()/1000L);

    try{
        String params = 
                ""+encode("oauth_consumer_key")+"=" + encode(CONSUMER_KEY)
                + "&"+encode("oauth_nonce")+"="+encode(nonce)
                + "&"+encode("oauth_signature_method")+"="+encode("HMAC-SHA1")
                + "&"+encode("oauth_timestamp")+"="+encode(timeStamp)
                + "&"+encode("oauth_token")+"="+ACCESS_TOKEN
                + "&"+encode("oauth_version")+"="+encode("1.0")

                ;
        String baseString = encode("GET")+"&"+encode(host_url)+"&"+encode(params);
        String signingKey = encode(CONSUMER_SECRET)+"&"+encode(ACCESS_TOKEN_SECRET);
        VIPLogger.info(TAG, "base string: " + baseString);
        String lSignature = computeHmac(baseString, signingKey);
        VIPLogger.info(TAG, "signature: " + lSignature);
        lSignature = encode(lSignature);
        VIPLogger.info(TAG, "signature enacoded: " + lSignature);

        String lRequestUrl = host_url
                            + "?oauth_consumer_key="+CONSUMER_KEY
                            + "&oauth_nonce="+nonce
                            + "&oauth_signature_method=HMAC-SHA1"
                            + "&oauth_timestamp="+timeStamp
                            + "&oauth_token="+ACCESS_TOKEN
                            + "&oauth_version=1.0"
                            + "&oauth_signature="+lSignature
                            ;
        //VIPLogger.info(TAG, lRequestUrl.substring(1202));
        HttpGet httpget = new HttpGet(lRequestUrl);
        ResponseHandler<String> responseHandler = new BasicResponseHandler();
        String responseBody = httpclient.execute(httpget, responseHandler);

        VIPLogger.info(TAG, "contacts response: " + responseBody);
    }catch(Exception e){
        e.printStackTrace();
        VIPLogger.error(TAG, "error while fetching user contacts");
    }

} 
```

# html - 如何在 chrome 开发工具中隐藏 html 注释？

> ID：15928172
> 
> 赞同：27
> 
> 时间：2013-04-10T14:06:53.833
> 
> 标签：html, google-chrome, comments, google-chrome-devtools

在 Firebug 中，有一个切换/查看 HTML 注释的选项：

![在 Firebug 中切换 HTML 注释](https://i.stack.imgur.com/YTnBx.png)

在 Chrome 开发者工具中有什么方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2017-03-22T11:23:07.623

我想对这个问题给出更详细的回答。请注意，此答案对应于 chrome 版本 - 56.0.2924.87（64 位）。

让我们来看一个演示站点[——Django Demo Projects](http://django-comments-xtd.readthedocs.io/en/latest/example.html)。

检查后您可以看到顶部附近有一些评论： [![在此处输入图像描述](https://i.stack.imgur.com/rflpZ.png)](https://i.stack.imgur.com/rflpZ.png)

单击`Customize and control DevTools`选项（右上角附近的三个点）： [![在此处输入图像描述](https://i.stack.imgur.com/SkHOt.png)](https://i.stack.imgur.com/SkHOt.png)

选择设置选项。您应该能够看到`Show HTML comments`： [![在此处输入图像描述](https://i.stack.imgur.com/xJ0wB.png)](https://i.stack.imgur.com/xJ0wB.png)

禁用`Show HTML comments`以删除评论。现在所有评论都被隐藏了！ [![在此处输入图像描述](https://i.stack.imgur.com/HNbzq.png)](https://i.stack.imgur.com/HNbzq.png)

谢谢！

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-10-19T08:45:33.500

此选项在 chrome 开发工具设置面板中可用（首选项 > 元素 > 显示 HTML 注释）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-01T05:59:31.137

从 Chrome 版本 35.0.1916.114 开始，无法在元素面板中隐藏评论。正如@jbyrd 建议的那样，有人需要编写扩展程序，否则 Chrome 开发团队需要注意这个线程。

# javascript - 为什么这不显示消息“Hello world！”？

> ID：15928173
> 
> 赞同：1
> 
> 时间：2013-04-10T14:06:55.270
> 
> 标签：javascript, document, getelementbyid, createelement

```
var div = document.createElement("tempdiv");
div.innerHTML = "<html><body><div id='test'>Hello World!</div></body></html>";
alert(div.getElementById("test").innerHTML); 
```

我收到错误“ *Uncaught TypeError: Object #HTMLUnknownElement has no method 'getElementById'* ”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:12:49.560

该[`getElementById`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)方法仅存在于文档对象上。单个 DOM 元素不支持它。如果要将元素添加到 DOM，则可以调用`document.getElementById("test").innerHTML;`以获取文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:15:58.137

getElementById 不会搜索不在文档中的元素。创建元素并为其分配 ID 时，必须先使用 insertBefore 或类似方法将元素插入到文档树中，然后才能使用 getElementById 访问它。

参考：[https ://developer.mozilla.org/en-US/docs/DOM/document.getElementById](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)

例子：

```
var div = document.createElement("div");
document.body.appendChild(div);
div.innerHTML = "<div id='test'>Hello World!</div>";
console.log(document.getElementById("test")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:40:33.837

不要忘记在创建的 div 中设置一个 Id 以便能够选择：

```
var div = document.createElement("div");
div.setAttribute('id', 'idName');
div.innerHTML = "<html><body><div id='test'>Hello World!</div></body></html>"; 
```

# python - for循环没有在python中运行

> ID：15928174
> 
> 赞同：0
> 
> 时间：2013-04-10T14:06:55.830
> 
> 标签：python, file-io, for-loop

我正在编写一个程序，它从 NumPy 数组（train_data）读取数据并使用 scikit-learn RandomForestClassifier 来预测另一个文件中的列的结果（测试）。我的所有代码都可以正常工作，除了我的代码末尾的 for 循环说从测试文件中获取行并将它们写入外部文件（打开），并带有一个额外的列 [0]，其中 0 或 1 取决于数据不会运行。关于为什么的任何线索？这是相关代码

```
"""------------------Setting up the files-----------------------"""
testing = csv.reader(open('file_name', 'rb'))
header = testing.next()
opening = csv.writer(open('new_file_name', 'wb'))
"""------------------Setting up the files-----------------------"""

"""----------training and predicting--------------------"""
from sklearn.ensemble import RandomForestClassifier
Forest = RandomForestClassifier(n_estimators = 100)
Forest = Forest.fit(train_data[0::,1::],train_data[0::,0])
Output = Forest.predict(test_data) 
"""----------training and predicting--------------------"""

"""------Writing new file-------------"""
final_count = 0
for row in testing:
    row.insert(0,Output[final_count])
    opening.writerow(row)
    final_count += 1
"""------Writing new file-------------""" 
```

我知道这是 for 循环，因为我在其中添加了一个额外的东西，如果 final_count 小于 5 并且它从未打印过，它将打印“Hello World”。这不是缩进错误，因为会出现这种情况，所以有人知道会发生什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:10:35.313

根据上面的评论，可以看出 OP 正在使用迭代`testing`来填充 NumPy 数组。此迭代将`csv`在文件中向前推进迭代器，一旦它到达末尾，语法`for row in testing:`将不再执行任何操作（即，迭代器已到达文件末尾，因此没有更多行可迭代） .

一种解决方法是首先遍历`testing`程序开头的所有行并将所有数据保存到列表或其他内容中。也许甚至包装`csv.reader`with`list()`都可以（我不太熟悉`csv.reader`与常规生成器/迭代器相比）。

另一个解决方法是通过在最终循环之前`testing`再次实例化对象来重新创建。`csv.reader`

# ektron - Ektron 将 FormFieldItem 动态添加到 FormBlock

> ID：15928175
> 
> 赞同：0
> 
> 时间：2013-04-10T14:06:57.020
> 
> 标签：ektron

我正在使用 Ektron FormBlock，在我的代码中我想动态添加一个 FormFieldItem。我已经尝试了以下两种方式，但它总是在提交按钮之后添加项目。

```
FormBlock1.Controls.Add(myCntrl);
FormBlock1.Page.Form.Controls.Add(myCntrl); 
```

将控件动态添加到表单以使其位于表单块中的正确方法是什么？经过检查，控件属性似乎没有表单中的控件。还有一个字段属性，但它是只读的。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:02:35.993

formblock 控件将为 Workarea 中定义的表单字段呈现 HTML。它不会为表单域创建 ASP.NET 控件，它只是创建 HTML。

您可以在页面的其他位置创建动态 ASP.NET 字段。然后重写 Page 的 Render 方法，将字段的 HTML 移动到表单块控件的 HTML 中。

提交页面时，FormBlock控件不会将动态字段中的值保存到Workarea中。如果要保存一些动态数据，可以在 Workarea 的 Form 中添加隐藏字段。当用户在动态控件中输入值时，使用 JavaScript 将值复制到隐藏字段。

# sql - ORACLE SUBSTR 数字类型

> ID：15928180
> 
> 赞同：0
> 
> 时间：2013-04-10T14:07:12.857
> 
> 标签：sql, oracle

我有一个在选择语句中使用以下内容的查询

```
WHERE section_id=SUBSTR(:rId, 5, 6) 
```

其中 rId 是 N00401E

因此，我从 rId 中提取了第 5 个和第 6 个字符“01”。

我得到的错误是 ORA-01722: invalid number

rId 有一个类型号 (2)

我试过 TO_NUMBER 但这不起作用。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:09:21.797

要提取字符 5 和 6，您应该：

```
SUBSTR(:rId, 5, 2) 
```

请参阅[文档](http://docs.oracle.com/cd/B19306_01/server.102/b14200/functions162.htm)。

# macros - 如何在金字塔 / ZPT（变色龙）中使用宏

> ID：15928186
> 
> 赞同：3
> 
> 时间：2013-04-10T14:07:20.780
> 
> 标签：macros, pyramid, chameleon, template-tal, template-metal

我想使用带有金字塔+ZPT 引擎（变色龙）的宏。

文档说“一个页面模板可以容纳多个宏”。 [http://chameleon.readthedocs.org/en/latest/reference.html#macros-metal](http://chameleon.readthedocs.org/en/latest/reference.html#macros-metal)

因此我定义了一个文件 `macros.pt`：

```
<div metal:define-macro="step-0">
  <p>This is step 0</p>
</div>
<div metal:define-macro="step-1">
  <p>This is step 1</p>
</div> 
```

和一个全局模板`main_template.pt`，其中包含定义 slot 的所有 html 内容`content`。

`progress.pt`以及用于`main_template.pt`填充插槽的我的视图模板：

```
<html metal:use-macro="load: main_template.pt">
  <div metal:fill-slot="content">
    ...
    <div metal:use-macro="step-0"></div>
    ...
  </div>
</html> 
```

到目前为止，我痛苦地发现，我不能说`use-macro="main_template.pt"`是因为 Chameleon 不像 Zope 那样自动加载模板。因此，我必须先添加`load:`片段。

来到`use-macro="step-0"`. 这会引发 NameError `step-0`。我试图用类似的`macros.pt`东西预加载，`<tal:block tal:define="compile load: macros.pt" />`但这没有帮助。

如何使用宏摘要文件中收集的宏？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-13T20:23:07.490

要在 Pyramid 中使用 ZPT 宏，您需要通过将宏模板甚至宏本身传递到渲染模板中来使宏模板本身可用于渲染模板（摘自 docs）。

```
from pyramid.renderers import get_renderer
from pyramid.view import view_config

@view_config(renderer='templates/progress.pt')
def my_view(request):
    snippets = get_renderer('templates/macros.pt').implementation()
    main = get_renderer('templates/main_template.pt').implementation()
    return {'main':main,'snippets':snippets} 
```

在渲染器将使用的模板中，您应该像这样引用宏。我假设您在 main_template.pt 中包含插槽“内容”的宏被命名为“global_layout”。把它改成你的名字。

```
<html metal:use-macro="main.macros['global_layout']">
  <div metal:fill-slot="content">
    ...
    <div metal:use-macro="snippets.macros['step-0']"></div>
    ...
  </div>
</html> 
```

对模板中宏的引用如下所示：

```
<div metal:use-macro="template.macros['step-0']">
    <div metal:fill-slot="content">
        added your content
    </div>
</div>
<div metal:define-macro="step-0">
    a placeholder for your content
    <div metal:define-slot="content">
    </div>
</div> 
```

要获取模板中的所有宏，以便将它们在视图中传递到呈现的模板中，请将此行添加到第一个代码示例并扩展返回的字典。

```
macros = get_renderer('templates/main_template.pt').implementation().macros 
```

我可以解释更多，但请查看文档。这里描述了一个像上面这样的简单案例。

*   [在 Pyramid 中使用 ZPT 宏](http://docs.pylonsproject.org/projects/pyramid-chameleon/en/latest/#using-zpt-macros-in-pyramid)

完整的教程也介绍了这个主题。第二个链接将增加您的知识。

*   [制作主模板](https://web.archive.org/web/20131018092639/http://docs.pylonsproject.org/projects/pyramid_tutorials/en/latest/humans/creatingux/step05/index.html)
*   [可重复使用的模板宏](https://web.archive.org/web/20131018092639/http://docs.pylonsproject.org/projects/pyramid_tutorials/en/latest/humans/creatingux/step10/index.html)

之后金字塔文档将提供更多细节。欢迎来到金字塔。

# jquery - 一旦一个jQuery对象被初始化，之后如何访问它？

> ID：15928191
> 
> 赞同：0
> 
> 时间：2013-04-10T14:07:29.287
> 
> 标签：jquery, jquery-plugins, jwizard

为元素创建 jQuery 对象后，如何访问它？例如，下面的对象是使用 jWizard jQuery 创建的，但是我需要在这个对象上调用一些函数，但我不知道从哪里开始。任何帮助，将不胜感激。

```
$("#wizard").jWizard({
        menuEnable: true,
        counter: {enable: true},
        effects: {enable: true},
        buttons: {
            cancelHide: false,
            cancelType: "button", 
            finishType: "submit", 
            cancelText: "Cancel", 
            previousText: "Back",
            nextText: "Next", 
            finishText: "Submit"
        }
    }); 
```

来源： [http](http://www.dbarnes.info/jWizard/) ://www.dbarnes.info/jWizard/（jWizard jQuery 插件）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:09:04.617

将其分配给一个变量：

```
my_wizard = $("#wizard").jWizard({
    menuEnable: true,
    counter: {enable: true},
    effects: {enable: true},
    buttons: {
        cancelHide: false,
        cancelType: "button", 
        finishType: "submit", 
        cancelText: "Cancel", 
        previousText: "Back",
        nextText: "Next", 
        finishText: "Submit"
    }
}); 
```

# vb.net - 在“.txt”文件中搜索名称并显示相应的日期

> ID：15928197
> 
> 赞同：0
> 
> 时间：2013-04-10T14:07:42.210
> 
> 标签：vb.net

我一直在开发一个用户输入姓名和生日的程序。然后它以以下格式保存到 .txt 文件中

*   John Doe 4/10/2000 <---- （名称和日期由“制表符”分隔，而不是“空格”）

程序中一切正常，我可以很好地显示数据，只要按月份或按名称等对日期进行排序。但我不知道如何让搜索功能正常工作。我有一个文本框，用户将在其中输入要搜索的名称。因此，如果他们输入 John Doe，则程序应搜索该文本文件 (birthday.txt) 并显示日期 2000 年 4 月 10 日。如果未找到该名称，则程序应显示一条消息，说明未找到该名称。请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:16:50.697

也许：

```
Dim people = From line In File.ReadLines(path)
       Let userprops = line.Split({vbTab}, StringSplitOptions.None)
       Let Name = userprops.First()
       Let BirthDate = userprops.Last()
       Where Name.IndexOf(txtUsername.Text, StringComparison.OrdinalIgnoreCase) > -1

If Not people.Any() Then
    MessageBox.Show("No user found with that name")
Else
    Dim firstUserBirthDate = people.First().BirthDate 
    MessageBox.Show(firstUserBirthDate.ToString())
End If 
```

我使用`IndexOf`而不是`=`向您展示如何不区分大小写地搜索名称的一部分。

# html - 菜单将页面的其余部分向下推

> ID：15928200
> 
> 赞同：0
> 
> 时间：2013-04-10T14:07:50.377
> 
> 标签：html, css

我怎样才能让我的菜单不影响它下面的代码？我认为`position:fixed;`会解决这个问题，但我不确定。

jsFiddle：http: [//jsfiddle.net/chaddly/u9EEt/#base](http://jsfiddle.net/chaddly/u9EEt/#base)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:09:36.267

您将要添加`.menu { position:absolute; top: 45px; }`.

该`position:absolute`属性将从布局流中取出子菜单，这将允许它出现在以下文本上方。子菜单将不需要页面上的任何“空间”。将`top:45px`正确定位子菜单。

您还需要设置子菜单的父元素以`position:relative`确保子菜单元素相对于其父元素定位。在这种情况下，这将`45px`来自顶部！

小提琴：http: [//jsfiddle.net/u9EEt/8/](http://jsfiddle.net/u9EEt/8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:12:24.557

一种方法是为您的菜单使用绝对位置：

```
position:absolute;
top:55px;
right:8px;
z-index:9999; 
```

这是一个例子：[jsFiddle](http://jsfiddle.net/u9EEt/9/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:13:07.480

我用过`position:absolute`。结果如下：http: [//jsfiddle.net/u9EEt/4/](http://jsfiddle.net/u9EEt/4/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-10T14:10:42.940

尝试添加显示：已修复

```
.menu {
    float: right;
    width: 200px;
    height: auto;
    position: fixed;
} 
```

[http://jsfiddle.net/u9EEt/2/](http://jsfiddle.net/u9EEt/2/)

# c - 所有者绘制选项卡控件 - 选项卡项的文本

> ID：15928201
> 
> 赞同：0
> 
> 时间：2013-04-10T14:07:51.660
> 
> 标签：c, winapi

我正在尝试进行所有者绘制选项卡控件。在 DRAWITEMSTRUCT 结构中，我得到了一些关于正在绘制的选项卡项的信息，比如它的矩形、hDC、hwnd，但是我找不到它在创建时给出的文本（LPTSTR TCITEM 结构的 LPTSTR pszText 成员）。

当想要进行所有者绘制时如何获取选项卡项的文本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:22:25.033

通用方式记录在[SDK 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/bb760550%28v=vs.85%29.aspx#owner_drawn_tabs)中用于选项卡控件：

> 默认情况下，DRAWITEMSTRUCT 的 itemData 成员包含 TCITEM 结构的 lParam 成员的值。但是，如果您更改每个选项卡的应用程序定义的数据量，itemData 会改为包含数据的地址。您可以使用 TCM_SETITEMEXTRA 消息更改每个选项卡的应用程序定义数据量。

因此，您始终可以在您添加的 TCITEM 上挂一个指针，然后通过 itemData 将其取回。这足以获取有关选项卡的*任何*信息，包括您自己维护的数据。

如果您只需要文本，则实际上没有必要。您可以简单地使用 TCM_GETITEM 来获取 TCITEM。传递 DRAWITEMSTRUCT.itemID。

# .net - servicestack 自托管服务使用分块编码 - 是无缓冲的吗？

> ID：15928202
> 
> 赞同：2
> 
> 时间：2013-04-10T14:07:51.877
> 
> 标签：.net, performance, web-services, servicestack, self-hosting

我正在尝试通过 hello world 示例和自托管示例来学习 ServiceStack。我正在请求 JSON 内容。

我在响应标头中注意到以下内容：

**托管在 ASP.Net 项目中的基本服务：**

```
HTTP/1.1 200 OK
Server: ASP.NET Development Server/10.0.0.0
Date: Wed, 10 Apr 2013 12:49:46 GMT
X-AspNet-Version: 4.0.30319
X-Powered-By: ServiceStack/3.943 Win32NT/.NET
Cache-Control: private
Content-Type: application/json; charset=utf-8
Content-Length: 16   <-------------------------------------
Connection: Close 
```

**相同的基本服务，自托管（命令行）：**

```
HTTP/1.1 200 OK
Transfer-Encoding: chunked <-------------------------------
Content-Type: application/json; charset=utf-8
Server: Microsoft-HTTPAPI/2.0
X-Powered-By: ServiceStack/3.943 Win32NT/.NET
Date: Wed, 10 Apr 2013 12:48:50 GMT 
```

似乎自托管品种不缓冲它的响应？这是性能还是兼容性问题？

使用自托管方法时如何打开缓冲？

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-12T15:07:41.150

**使用自托管方法时如何打开缓冲？**

您可以创建一个如下所示的 ResponseFilter。我会说这有点激进，它会阻止其他 ResponseFilters 运行。您可以将其转换为[过滤器属性](https://github.com/ServiceStack/ServiceStack/wiki/Filter-attributes)，并且仅在响应具有明显的性能优势时才使用它。否则，我只会让 AppHost 处理响应。

```
ResponseFilters.Add((httpReq, httpRes, dto) =>
{
    using (var ms = new MemoryStream())
    {
        EndpointHost.ContentTypeFilter.SerializeToStream(
            new SerializationContext(httpReq.ResponseContentType), dto, ms);

        var bytes = ms.ToArray();

        var listenerResponse = (HttpListenerResponse)httpRes.OriginalResponse;
        listenerResponse.SendChunked = false;
        listenerResponse.ContentLength64 = bytes.Length;
        listenerResponse.OutputStream.Write(bytes, 0, bytes.Length);
        httpRes.EndServiceStackRequest();
    }
}); 
```

# sql - SQL，连接两个或多个表并返回结果

> ID：15928205
> 
> 赞同：0
> 
> 时间：2013-04-10T14:07:54.647
> 
> 标签：sql, join

```
CREATE TABLE Flight 
(
    FlightID INTEGER NOT NULL,
    FlightDate TIMESTAMP NOT NULL, 
    Origin VARCHAR(30) NOT NULL,
    Destination VARCHAR(30) NOT NULL,
    MaxCapacity INTEGER NOT NULL,
    PricePerSeat DECIMAL NOT NULL

)
CREATE TABLE FlightBooking 
(
    BookingID INTEGER NOT NULL,
    CustomerID INTEGER NOT NULL,
    FlightID INTEGER NOT NULL, 
    NumSeats INTEGER NOT NULL,
    Status CHAR(1) NOT NULL,
    BookingTime TIMESTAMP NOT NULL,
    TotalCost DECIMAL

)
status = Reserve, Held Cancelled or Expired (only reserved and held are taken into account)
CREATE TABLE SeatBooking
(
    BookingID INTEGER NOT NULL,
    PassengerID INTEGER NOT NULL,
    SeatNumber CHAR(4) 

) 
```

如果给出了flightid以及可用座位总数、保留座位总数和保留座位总数，我是否可以获取座位状态？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:18:16.820

Given the flight ID, you should be able to get the total available seats, total reserved seats and total held seats like so:

```
select MaxCapacity - Reserved - Held as Available, Reserved, Held
from
(select f.MaxCapacity,
        sum(case b.status when 'R' then b.NumSeats end) Reserved,
        sum(case b.status when 'H' then b.NumSeats end) Held
 from Flight f
 left join FlightBooking b on f.FlightID = b.FlightID
 where f.FlightID = ?) sq 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T16:41:00.733

> 如果给出了flightid以及可用座位总数、保留座位总数和保留座位总数，我是否可以获取座位状态？

就在这里！我假设使用 Oracle、SQL Server 或 DB2 并使用 CTE。如果您没有其中之一，则必须使用子查询或临时表。

如果“R”是状态代码，则总保留座位数（如果您想在 where 子句中将其限制为单个航班，但这些查询会为您提供所有航班 ID 的值）：

```
SELECT SUM(NumSeats), FlightID
FROM FlightBooking 
WHERE Status = 'R'
GROUP BY FlightID 
```

如果“H”是状态代码，则持有的总座位数：

```
SELECT SUM(NumSeats), FlightID
FROM FlightBooking 
WHERE Status = 'H'
GROUP BY FlightID 
```

总可用座位数为：

```
 WITH used AS
   (
      SELECT SUM(NumSeats) as used, FlightID
      FROM FlightBooking 
      WHERE Status in ('R','H')
      GROUP BY FlightID
   )
   SELECT F.MaxCapacity-U.Used, F.FlightID
   FROM used U
   JOIN Flight F ON U.FlightID = F.FlightID 
```

# c# - 关联 c#

> ID：15928206
> 
> 赞同：-6
> 
> 时间：2013-04-10T14:07:56.600
> 
> 标签：c#, class, associations, diagram

我试图在 c# 中的两个类之间建立关联。该关联是从一个班级（教室）到另一个班级（教室）的一个末端和 1 .. * 的一个本质。换句话说，来自教室的数据可以在教室 1 中使用多次，但至少需要使用一次。

例如，一个房间只能有一个房子，但一个房子必须至少有一个房间或多个房间。

到目前为止我有这个，但它似乎没有创建一个对象的实例..

```
 class house
 {
    string name;
    int house_num;

    list<room> rooms;

    public house()
    {
      rooms = new list<room>();
      rooms.Add(new room());
    }
 }

 class room
 {
   int num_of_rooms;

 } 
```

这就是我在主cs文件中调用的内容..

```
 house 94 = new house();
 room bedroom = new room();

 house.addRoom(bedroom); 
```

所以我基本上想说一所房子必须至少有一个房间，但它也可以有你能想到的尽可能多的房间。出于某种原因，上面似乎不喜欢代码的“addRoom”部分。

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:17:25.217

我认为这基本上是您需要的以及您可以扩展的内容：

```
// Define a class for a house
public class House
{
    // Constructor for the House class
    // This gets called whenever your code creates a "new House(...);"
    public House(Room room)
    {
        // Initialize the list of rooms.
        _rooms = new List<Room>;
        // Add the passed room to the list of rooms
        _rooms.Add(room);
    }

    // This a "backing field" for the property below it. It is a
    // private variable that stores information about the class.
    private List<Room> _rooms;
    // This is the property that exposes the above backing field.
    // This property only has a "get" method, which means that you can only
    // read the property value. However, you can still add rooms to the list,
    // even though that may seem like writing. The difference is that you cannot
    // assign a completely new list to the property.
    public List<Room> Rooms
    {
        get { return _rooms; }
    }

    // You can add methods to a class to perform a task.
    // The method below adds a room to the list of rooms.
    public void AddRoom(Room room)
    {
        _rooms.Add(room);
    }
}

public class Room
{

} 
```

该类的构造函数`House`占用一个房间，因此在创建 House 时，从一开始就添加一个房间，例如`House94 = new House(new Room());`. 您可以通过调用添加更多房间`House94.Rooms.Add(new Room())`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:40:22.820

您在这里有一些很好的示例，但这里有一个功能齐全的控制台示例，可帮助指导 C# 新手。这不是福音或最佳实践，因为我试图不让初学者感到困惑，但我已经包含了大多数事情的简单示例（只读字段意味着只能由构造函数设置，简单的属性等）但我希望是一个好的初学者！

```
namespace Example.ActualApp
{
    using System;
    using System.Collections.Generic;

    /// <summary>
    /// The Program
    /// </summary>
    internal class Program
    {
        /// <summary>
        /// The main entry point.
        /// </summary>
        static void Main(string[] args)
        {
            // Create a new house with a bedroom
            Room bedroom1 = new Room("Master bedroom");
            House sampleHouse = new House("My house", bedroom1);

            // Add a room
            Room sittingRoom = new Room("Main sitting room");
            sampleHouse.AddRoom(sittingRoom);

            // Wait for user to press a button
            Console.WriteLine("\r\nFinished, press a key to end.");
            Console.ReadKey();
            return;
        }
    }

    /// <summary>
    /// House class
    /// </summary>
    internal class House
    {
        // Private fields
        private readonly string _name = string.Empty;
        private List<Room> _rooms = null;

        /// <summary>
        /// Initializes a new instance of the <see cref="House"/> class.
        /// </summary>
        /// <param name="name">The name of the house.</param>
        /// <param name="room">The default room.</param>
        public House(string name, Room room)
        {
            // Store the house name and initialise the rooms collection
            _name = name;
            _rooms = new List<Room>();
            Console.WriteLine("New house created called '{0}'", name);

            // Now add the default room
            this.AddRoom(room);
        }

        /// <summary>
        /// Adds a room to the house.
        /// </summary>
        /// <param name="room">The room.</param>
        public void AddRoom(Room room)
        {
            _rooms.Add(room);
            Console.WriteLine("Room called '{0}' added to house called '{1}'", room.Name, _name);
        }
    }

    /// <summary>
    /// Room class
    /// </summary>
    internal class Room
    {
        private string _roomName = string.Empty;

        /// <summary>
        /// Initializes a new instance of the <see cref="Room"/> class.
        /// </summary>
        /// <param name="name">The name of the room.</param>
        public Room (string name)
        {
            _roomName = name;
            Console.WriteLine("New room created called '{0}'", name);
        }

        /// <summary>
        /// Example property (never pass fields around)
        /// </summary>
        public string Name
        {
            get
            {
                return _roomName;
            }

            set
            {
                _roomName = value;
            }
        }
    }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:10:52.787

回顾代码的其他问题，您可以在 class 的构造函数中添加一个或更多房间`house`，这将保证房子至少有您在那里指定的房间。

编辑：看来你已经这样做了，我什至不确定你在问什么：p

# angularjs - 在 angularjs 中显示动态选项菜单的最佳（最有效）方法

> ID：15928209
> 
> 赞同：6
> 
> 时间：2013-04-10T14:07:58.710
> 
> 标签：angularjs

假设我们在 UI 中有很多项目。当用户单击一个项目时，UI 应该呈现一个弹出/对话/覆盖元素，其中包含一些选项、操作等。

目前我看到两个选项：

1.  复制每个项目的叠加元素并将其隐藏，直到单击关联的项目。就像在这个小提琴中一样：http: [//jsfiddle.net/urPww/1/](http://jsfiddle.net/urPww/1/)

    `<div ng-show="currentItem"> showing options for: {{currentItem.name}} </div> <li ng-repeat="item in items" ng-click="showOptions(item)"> {{item.name}} </li>`

2.  放置一次覆盖 UI 并跟踪最后单击的项目。演示：http: [//jsfiddle.net/aVnPT/5/](http://jsfiddle.net/aVnPT/5/)

    `<li ng-repeat="item in items" ng-click="showOptions(item)"> {{item.name}} <span ng-show="item.showingOptions"> <br/>showing options for: {{item.name}} </span> </li>`

第一种解决方案效率不高。然而，除了第二个中单击的元素之外，我无法找到一种干净的方式来显示覆盖 UI。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T16:07:18.900

`$event`您可以通过将参数作为参数传递给您的`ng-click`函数来使用单个元素。然后可以获得鼠标点击相对于文档的位置

```
app.directive('container', function () {

    var offset = {
        left: 40,
        top: -20
    }
    return function (scope, element, attributes) {
        var $oLay = angular.element(document.getElementById('overlay'))

        scope.showOptions = function (item,$event) {       
            var overlayDisplay;
            if (scope.currentItem === item) {
                scope.currentItem = null;
                 overlayDisplay='none'
            }else{
                 scope.currentItem = item;
                overlayDisplay='block'
            }

            var overLayCSS = {
                left: $event.clientX + offset.left + 'px',
                top: $event.clientY + offset.top + 'px',
                display: overlayDisplay
            }

             $oLay.css(overLayCSS)
        }
    }
}); 
```

Am not sure if angular normalizes `clientX` and `clientY` the way jQuery does for different browsers. Not all browsers use same convention for event position properties Have removed `ng-show` from overlay element so it's style attributes can be controlled from directive, not by angular compiler due to timing, and given it an id.

DEMO: [http://jsfiddle.net/jJyTf/](http://jsfiddle.net/jJyTf/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:52:30.727

选项 2*可以*使用一个指令，该指令使用 dom 操作将选项覆盖动态放置在单击的元素旁边（请参阅@charlietfl 的答案）。你最终会得到更简单的 HTML，但更复杂的 js/angular 代码。

但是我认为选项 1 是正确的想法，可以稍微清理一下。您可以摆脱指令，并拥有一个简单的控制器方法：

```
$scope.showOptions = function(item) {
    $scope.currentItem = item;
} 
```

看这里：

[http://jsfiddle.net/qxF3A/3/](http://jsfiddle.net/qxF3A/3/)

如果它大大简化了我的控制器并避免了对自定义指令的需要，我很乐意在我的视图/模板中添加一些（最少的）重复。

# javascript - Windows 8 JavaScript 应用程序是否支持 GIF 图像？

> ID：15928213
> 
> 赞同：7
> 
> 时间：2013-04-10T14:08:09.153
> 
> 标签：javascript, html, windows-8

Windows 8 JavaScript 应用程序是否支持 GIF 图像？如果是这样，我怎样才能显示 GIF 图像？

我在下面的代码中尝试了这个，但它不起作用：

```
<img id="backround" src="images/header.gif" /> 
```

**更新**

我不需要 C# 应用程序。我需要一个 JavaScript 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:12:56.650

是的，由于 WWAHost 支持 Internet Explorer 的所有渲染功能，它还可以渲染 GIF，甚至是动画。

如果它不适合您，请检查该文件是否包含在解决方案和生成的包中。您也可以尝试在路径中添加前导“/”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-11T13:54:35.570

[备注部分](http://msdn.microsoft.com/en-us/library/windows/apps/hh466114.aspx)中列出了支持文件类型：

Gif 应该可以工作，但不是动画 gif。

# iphone - Facebook SDK / iOS - 人们使用 [FBRequestConnection startWithGraphPath: - 无结果搜索

> ID：15928215
> 
> 赞同：1
> 
> 时间：2013-04-10T14:08:09.933
> 
> 标签：iphone, ios, facebook, facebook-graph-api, sdk

我正在执行一个 facebook 人物搜索图请求，如下所示：

```
-(void)searchFBFor:(NSString*)query {

     NSString *q = [NSString stringWithFormat:@"search?q=%@&type=user", [query stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
     NSLog(@"%@", q);

[FBRequestConnection startWithGraphPath:q
                      completionHandler:^(FBRequestConnection *connection, id result, NSError *error) {
                          if(error) {
                              NSLog(@"Error: %@", error);
                              return;
                          }
                          else {
                              NSLog(@"%@", result);
                          }
                      }];

} 
```

如果我的查询类似于 @"mark" 但从来没有名字和姓氏的结果（即@"mark+smith" 或 @"mark smith"），则请求有效并返回结果。

有谁知道为什么会这样？我是否可能需要我没有考虑过的特殊权限？

非常感谢。

# regex - 一个字符的正则表达式

> ID：15928216
> 
> 赞同：8
> 
> 时间：2013-04-10T14:08:27.910
> 
> 标签：regex

我需要一个字符串的正则表达式，其中只有一个字母字符。

例如，它应该匹配：

*   `8*x=16`
*   `x+2=2`
*   `u329398239823`
*   `43044343k43304403`

...但不是：

*   `xsfdjfefljefe`
*   `44434f9434343 f`
*   `98(***(*)))(*)(0((-900-87`
*   `32233232`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T14:11:15.770

```
/^[^a-z]*([a-z])[^a-z]*$/i 
```

`i`用于不区分大小写的匹配。

`^`和`$`锚点强制正则表达式匹配整个字符串。

`( )`捕捉这封信。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T14:20:09.653

尝试：

```
/^[^a-z]*([a-z]{1})[^a-z]*$/gim 
```

表示字符串的开头 ( `^`)，然后是任何非字母字符 0 次或更多次 ( `[^a-z]*`)，然后恰好一个 alpha 字符被捕获为第一个匹配项 ( `([a-z]{1})`，它将可用于替换为`$1`)，然后是零个或多个非字母字符，然后结束字符串 ( `$`)。

[在这里](http://regexr.com?34fku)查看它的实际应用。

# hadoop - 在hadoop中使用管道

> ID：15928222
> 
> 赞同：0
> 
> 时间：2013-04-10T14:08:42.963
> 
> 标签：hadoop, mapreduce, processbuilder

我正在使用 ProcessBuilder 运行可执行文件。它工作正常。现在，我必须将第一个可执行文件的输出提供给第二个可执行文件。例如：exe1 arg1 arg2 | exe2 arg3 并获取其 InputStream 并打印到标准输出。

所以我正在为包含 exe1 arg1 arg2 | 的内容编写一个小 script.sh exe2 arg3

以下在java中工作正常：

```
ProcessBuilder pb=new ProcessBuilder();
    pb.command("/bin/sh","/home/biadmin/Desktop/script.sh");
        Process p=pb.start();
        InputStream in=p.getInputStream(); 
```

//输出成功打印到标准输出。

但是当我在hadoop环境中做同样的事情时。我在输入流中没有得到任何东西。我需要在 hadoop 中做同样的事情。任何建议/建议表示赞赏。

谢谢。

# titanium - 选定的 TableViewRow 中的 highlightColor 卡住

> ID：15928223
> 
> 赞同：0
> 
> 时间：2013-04-10T14:08:44.353
> 
> 标签：titanium, tableview, appcelerator, titanium-mobile, appcelerator-mobile

有关我的意思的示例，请参阅[我的截屏视频。](https://vimeo.com/63740196)您会在视频大约 20 秒后看到问题。

它似乎主要发生在滚动表格视图导致所选行离开屏幕时。当您滚动以将该行带回屏幕上，然后选择一个新行时，先前选择的行的 highlightColor 将保持不变，而不是切换回常规颜色。它不会*每次都*发生，但这是我发现的最好的复制方式。这是我的允许代码：

**recipe_list.xml**

```
<Alloy>
    <View class="container">
        <TableView id="categories" class="master">
            <TableViewRow class="category_row">
                <Label class="category" text="Appetizers" />
                <View class="separator" />                  
            </TableViewRow>
            <TableViewRow class="category_row">
                <Label class="category" text="Drinks that are extremely complex" />
                <View class="separator" />                  
            </TableViewRow>
            <TableViewRow class="category_row">
                <Label class="category" text="Entrees" />
                <View class="separator" />                  
            </TableViewRow>
            <TableViewRow class="category_row">
                <Label class="category" text="Desserts" />
                <View class="separator" />                  
            </TableViewRow>
            <TableViewRow class="category_row">
                <Label class="category" text="Appetizers" />
                <View class="separator" />                  
            </TableViewRow>
            <TableViewRow class="category_row">
                <Label class="category" text="Drinks that are extremely complex" />
                <View class="separator" />                  
            </TableViewRow>
            <TableViewRow class="category_row">
                <Label class="category" text="Entrees" />
                <View class="separator" />                  
            </TableViewRow>
            <TableViewRow class="category_row">
                <Label class="category" text="Desserts" />
                <View class="separator" />                  
            </TableViewRow>
            <TableViewRow class="category_row">
                <Label class="category" text="Appetizers" />
                <View class="separator" />                  
            </TableViewRow>
            <TableViewRow class="category_row">
                <Label class="category" text="Drinks that are extremely complex" />
                <View class="separator" />                  
            </TableViewRow>
            <TableViewRow class="category_row">
                <Label class="category" text="Entrees" />
                <View class="separator" />                  
            </TableViewRow>
            <TableViewRow class="category_row">
                <Label class="category" text="Desserts" />
                <View class="separator" />                  
            </TableViewRow>
            <TableViewRow class="category_row">
                <Label class="category" text="Appetizers" />
                <View class="separator" />                  
            </TableViewRow>
            <TableViewRow class="category_row">
                <Label class="category" text="Drinks that are extremely complex" />
                <View class="separator" />                  
            </TableViewRow>
            <TableViewRow class="category_row">
                <Label class="category" text="Entrees" />
                <View class="separator" />                  
            </TableViewRow>
            <TableViewRow class="category_row">
                <Label class="category" text="Desserts" />
                <View class="separator" />                  
            </TableViewRow>
        </TableView>

        <View id="vertical_separator" />
    </View>
</Alloy> 
```

**recipe_list.tss**

```
".container": {
    backgroundColor: "white",
    height: Titanium.UI.FILL,
    top: 0
}

".master": {
    top: 0,
    left: 0,
    width: 320,
    // height: Titanium.UI.FILL,
    backgroundColor: "#ebeced",
    separatorColor: "#d7d7d7",
    allowsSelection: true
}

".category_row": {
    selectionStyle: Titanium.UI.iPhone.TableViewCellSelectionStyle.BLUE,
    selectedBackgroundColor: "#34c2d8"
}

".category": {
    font: {fontFamily: "Open Sans [Regular]", fontSize: "20"},
    textAlign: Titanium.UI.TEXT_ALIGNMENT_CENTER,
    color: "#464646",
    highlightedColor: "#fafdff",
    top: 15,
    bottom: 15,
    height: Titanium.UI.SIZE
}

".separator": {
    top: 0,
    height: 1,
    width: Titanium.UI.FILL,
    backgroundColor: "#f6f6f7"
}

"#vertical_separator": {
    left: 320,
    width: 1,
    height: Titanium.UI.FILL,
    backgroundColor: "#cbcdcf"
} 
```

# unit-testing - 为这个单元测试寻找更好的实现

> ID：15928224
> 
> 赞同：1
> 
> 时间：2013-04-10T14:08:45.073
> 
> 标签：unit-testing, xunit, xunit.net, fluent-assertions

我使用 xUnit 和 FluentAssertions 编写单元测试，但遇到以下问题。由于我还没有实现`catch`(in `GetCountriesAsync`) 的，我在这个地方`WebException`扔了一个新的。`NotImplementedException`

这段代码是我使测试真正按预期工作的唯一方法。我也添加了本机 xUnit 实现，因为 FluentAssertions 只是语法糖。

```
[Fact]
public async Task GetCountriesAsyncThrowsExceptionWithoutInternetConnection()
{
    // Arrange
    Helpers.Disconnect(); // simulates network disconnect
    var provider = new CountryProvider();

    try
    {
        // Act
        var countries = await provider.GetCountriesAsync();
    }
    catch (Exception e)
    {
        // Assert FluentAssertions
        e.Should().BeOfType<NotImplementedException>();

        // Assert XUnit
        Assert.IsType<NotImplementedException>(e);
    }
} 
```

虽然我发现这个实现要好得多，但它就是行不通。

```
[Fact]
public async Task GetCountriesAsyncThrowsExceptionWithoutInternetConnection3()
{
    // Arrange
    Helpers.Disconnect(); // simulates network disconnect
    var provider = new CountryProvider();

    // Act / Assert FluentAssertions
    provider.Invoking(async p => await p.GetCountriesAsync())
            .ShouldThrow<NotImplementedException>();

    // Act / Assert XUnit
    Assert.Throws<NotImplementedException>(async () => await provider.GetCountriesAsync());
} 
```

由于 VS2012/ReSharper 已经建议删除`async`测试方法的冗余关键字，我替换`async Task`为`void`并且测试仍然表现*相同*，所以我怀疑 async`Action`不能等待，它们相当被解雇和遗忘。

有没有办法用 xUnit/FluentAssertions 正确实现这一点？我想我必须使用我的第一个实现，因为我看不到任何类似`InvokingAsync()`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T18:50:32.640

实际上，FA 2.0 对处理异步异常有特定的支持。只需查看[AsyncFunctionExceptionAssertionSpecs](https://fluentassertions.codeplex.com/SourceControl/changeset/view/c1bc29ff258e622fac71730955bd1ea066880874#Main/FluentAssertions.Net45.Specs/AsyncFunctionExceptionAssertionSpecs.cs)中的单元测试。各种例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T12:56:00.190

Regarding FluentAssertions, I've added the following to my code:

```
using System;
using System.Threading.Tasks;

namespace FluentAssertions
{
    public static class FluentInvocationAssertionExtensions
    {
        public static Func<Task> Awaiting<T>(this T subject, Func<T, Task> action)
        {
            return () => action(subject);
        }
    }
} 
```

and now you can do:

```
_testee.Awaiting(async x => await x.Wait<Foo>(TimeSpan.Zero))
        .ShouldThrow<BarException>(); 
```

whereas `_teste.Wait<T>` returns a `Task<T>`. Also the naming of the method `Awaiting` make sense, because pure invocation of the method will not result in the exception being caught by the caller, you do need to use await to do so.

# mysql - ColdFusion10 - 在插入查询上查询 cfloop

> ID：15928226
> 
> 赞同：0
> 
> 时间：2013-04-10T14:08:52.967
> 
> 标签：mysql, coldfusion, coldfusion-10, cfspreadsheet, cfloop

第一次在这里发帖。我正在使用`<CFSPREADSHEET>`从 Excel 创建查询，然后尝试将查询结果插入 MySQL 表。这工作正常。我还需要从一列中获取一个值并将其正确的 ID 号插入到表中的 ID 列中。这是我的代码。我得到的结果是在每个表行中插入了相同的 ID (6)。在这里的帮助肯定会受到赞赏。谢谢！

```
<cfspreadsheet action="read" 
 src="#myFile#" 
 sheet="5" 
 excludeheaderrow="true" 
 headerrow="1" 
 query="newQuery" />

<cfloop query="newQuery">
  <!--- set ID variables --->
  <cfif newQuery.Branch EQ "Army"> 
    <cfset variables.Branch_ID = 6 />
  <cfelseif newQuery.Branch EQ "Marine Corps">
    <cfset variables.Branch_ID EQ 9 />
  <cfelseif newQuery.Branch EQ "Navy">
    <cfset variables.Branch_ID EQ 7 />
  <cfelseif newQuery.Branch EQ "Air Force">
    <cfset variables.Branch_ID EQ 8 />
  <cfelseif newQuery.Branch EQ "Coast Guard">
    <cfset variables.Branch_ID EQ 10 />
  </cfif>

  <cfquery name="importXLS" datasource="memorials_mysql"> 
  INSERT INTO honorees_temp(FirsttName,MName,LastName,Branch,Branch_ID,Unit) 
  VALUES 
  ('#Trim(FirstName)#', 
   '#Trim(MName)#', 
   '#Trim(LastName)#',
   '#Trim(Branch)#', 
   #variables.Branch_ID#,  
   '#Trim(Unit)#') 
  </cfquery> 
</cfloop> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T14:25:43.743

一个问题是您的`cfset`语句中有语法错误。在 cfset 中，您需要使用`=`而不是`EQ`.

```
<!--- set ID variables --->
    <cfif newQuery.Branch EQ "Army"> 
        <cfset variables.Branch_ID = 6 />
    <cfelseif newQuery.Branch EQ "Marine Corps">
        <cfset variables.Branch_ID =9 />
    <cfelseif newQuery.Branch EQ "Navy">
        <cfset variables.Branch_ID =7 />
    <cfelseif newQuery.Branch EQ "Air Force">
        <cfset variables.Branch_ID = 8 />
    <cfelseif newQuery.Branch EQ "Coast Guard">
        <cfset variables.Branch_ID =10 />
    </cfif> 
```

newQuery.Branch 的值是什么？如果您的 if 语句中没有任何内容匹配，它将保留最后一个值，因为它没有被重新初始化

您还应该`<cfqueryparam>`在 INSERT 语句上使用。

此外，这更多是个人喜好，但使用 cfswitch 比使用多个`else if`语句更有效。

```
<cfswitch expression="#trim(newQuery.Branch)#">
  <cfcase value="Army" >
    <cfset Branch_ID = 6 />     
  </cfcase>
  <cfcase value="Marine Corps" >
    <cfset Branch_ID = 9 />     
  </cfcase>
  <cfcase value="Navy" >
    <cfset Branch_ID = 7 />     
  </cfcase>
  <cfcase value="Air Force" >
    <cfset Branch_ID = 8 />     
  </cfcase>
  <cfcase value="Coast Guard" >
    <cfset Branch_ID = 10 />    
  </cfcase>
  <cfdefaultcase>
    <!--- set either a default value or throw an error, depending on your needs --->
    <cfset Branch_ID = 0>
    <cfthrow message="Invalid Branch_ID">
  </cfdefaultcase>
</cfswitch> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:25:32.243

每次循环时将 variables.brand_id 重置为 0。您可能在 IF 语句中没有得到匹配项，因此它保留了每个未来不匹配记录的最后一个匹配项的值。

```
<cfspreadsheet action="read" 
               src="#myFile#" 
         sheet="5" 
         excludeheaderrow="true" 
         headerrow="1" 
         query="newQuery" />
<cfloop query="newQuery">
    **<cfset variables.Branch_id=0>**
        <!--- set ID variables --->
        <cfif newQuery.Branch EQ "Army"> 
            <cfset variables.Branch_ID = 6 />
        <cfelseif newQuery.Branch EQ "Marine Corps">
            <cfset variables.Branch_ID = 9 />
        <cfelseif newQuery.Branch EQ "Navy">
            <cfset variables.Branch_ID = 7 />
        <cfelseif newQuery.Branch = "Air Force">
            <cfset variables.Branch_= EQ 8 />
        <cfelseif newQuery.Branch EQ "Coast Guard">
            <cfset variables.Branch_ID = 10 />
        </cfif>

    <cfquery name="importXLS" datasource="memorials_mysql"> 
            INSERT INTO honorees_temp(FirsttName,MName,LastName,Branch,Branch_ID,Unit) 
            VALUES 
              ('#Trim(FirstName)#', 
               '#Trim(MName)#', 
               '#Trim(LastName)#',
               '#Trim(Branch)#', 
                #variables.Branch_ID#,  
               '#Trim(Unit)#') 
</cfquery> 
</cfloop> 
```

# c# - ResourceStrings 真的被缓存了吗？

> ID：15928233
> 
> 赞同：2
> 
> 时间：2013-04-10T14:09:11.337
> 
> 标签：c#, winforms, caching, resources

不久前（当我被吓倒的时候）我就使用资源字符串的性能开销提出了以下问题[：使用资源文件 (.resx)](https://stackoverflow.com/questions/15521204/performace-overheads-when-using-resource-files-resx)时的性能开销。我得到了一个赞成的答案，并认为答案是正确的。然而，在此之前，我正在本地化在错误条件下调用的消息字符串，而不是性能关键 - 现在我被要求对我们的代码“强大”（许多性能关键代码、嵌入式循环等）实施本地化。

有时间更详细地研究一下，我注意到调用类似的资源

```
Resources.MessageStrings.SomeResourceName 
```

仅仅指调用自动生成的代码`MessageStrings.Designer.cs`，它使用

```
internal static string SomeResourceName {
    get {
        return ResourceManager.GetString("SomeResourceName", resourceCulture);}
} 
```

所以深入挖掘，我想我会反编译`ResourceManager`在

> C:\Program Files (x86)\Reference Assemblies\Microsoft\Framework.NETFramework\v4.5\mscorlib.dll

看看`GetString()`在做什么 [**它真的在缓存我的资源字符串吗？**]。反编译，我发现

```
[__DynamicallyInvokable]
public virtual string GetString(string name, CultureInfo culture)
{
  if (name == null)
    throw new ArgumentNullException("name");
  if (ResourceManager.s_IsAppXModel && object.ReferenceEquals((object) culture, (object) CultureInfo.CurrentUICulture))
    culture = (CultureInfo) null;
  if (this._bUsingModernResourceManagement)
  {
    if (this._PRIonAppXInitialized)
      return this.GetStringFromPRI(name, culture == null ? (string) null : culture.Name, this._neutralResourcesCulture.Name);
    if (this._PRIExceptionInfo == null || this._PRIExceptionInfo._PackageSimpleName == null || this._PRIExceptionInfo._ResWFile == null)
      throw new MissingManifestResourceException(Environment.GetResourceString("MissingManifestResource_NoPRIresources"));
    throw new MissingManifestResourceException(Environment.GetResourceString("MissingManifestResource_ResWFileNotLoaded", (object) this._PRIExceptionInfo._ResWFile, (object) this._PRIExceptionInfo._PackageSimpleName));
  }
  else
  {
    if (culture == null)
      culture = Thread.CurrentThread.GetCurrentUICultureNoAppX();
    if (FrameworkEventSource.IsInitialized)
      FrameworkEventSource.Log.ResourceManagerLookupStarted(this.BaseNameField, this.MainAssembly, culture.Name);
    ResourceSet resourceSet1 = this.GetFirstResourceSet(culture);
    if (resourceSet1 != null)
    {
      string @string = resourceSet1.GetString(name, this._ignoreCase);
      if (@string != null)
        return @string;
    }
    foreach (CultureInfo culture1 in new ResourceFallbackManager(culture, this._neutralResourcesCulture, true))
    {
      ResourceSet resourceSet2 = this.InternalGetResourceSet(culture1, true, true);
      if (resourceSet2 != null)
      {
        if (resourceSet2 != resourceSet1)
        {
          string @string = resourceSet2.GetString(name, this._ignoreCase);
          if (@string != null)
          {
            if (this._lastUsedResourceCache != null)
            {
              lock (this._lastUsedResourceCache)
              {
                this._lastUsedResourceCache.lastCultureName = culture1.Name;
                this._lastUsedResourceCache.lastResourceSet = resourceSet2;
              }
            }
            return @string;
          }
          else
            resourceSet1 = resourceSet2;
        }
      }
      else
        break;
    }
    if (FrameworkEventSource.IsInitialized)
      FrameworkEventSource.Log.ResourceManagerLookupFailed(this.BaseNameField, this.MainAssembly, culture.Name);
    return (string) null;
  }
} 
```

上面的代码中没有任何内容表明它正在“缓存”我的字符串（在这个词的典型/最真实的意义上），它似乎正在执行某种类型的复杂查找。我注意到该方法使用了未记录的`__DynamicallyInvokable`属性，并发现 Hans 对此属性进行了简短的讨论（[What is the __DynamicallyInvokable attribute for?](https://stackoverflow.com/questions/12550749/what-is-the-dynamicallyinvokable-attribute-for)）。

我的问题是：**对于性能关键代码，我可以依靠`ResourceManager`足够快的速度（*它是否缓存了我的字符串？*），还是我需要自己预处理和缓存资源字符串？**

谢谢你的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T14:24:07.383

资源被缓存。如果您通过资源管理器跟踪调用堆栈，则如下所示： 1.

```
[System.Security.SecuritySafeCritical]  // auto-generated 
public virtual String GetString(String name, CultureInfo culture) {
  //...
  String value = rs.GetString(name, _ignoreCase);
  //...
} 
```

2.

```
public virtual string GetString(string name, bool ignoreCase)
{
  object objectInternal = this.GetObjectInternal(name);
  //...
} 
```

3.

```
private object GetObjectInternal(string name)
{
  //...
  Hashtable hashtable = this.Table;
  //...
  return hashtable[(object) name];
} 
```

所以此时从哈希表中读取值。

一旦访问资源文件，哈希表就会被填充：

构造函数：

```
[SecuritySafeCritical]
public ResourceSet(string fileName)
{
  this.Reader = (IResourceReader) new ResourceReader(fileName);
  this.CommonInit();
  this.ReadResources();
} 
```

和 ReadResources：

```
protected virtual void ReadResources()
{
  IDictionaryEnumerator enumerator = this.Reader.GetEnumerator();
  while (enumerator.MoveNext())
  {
    object obj = enumerator.Value;
    this.Table.Add(enumerator.Key, obj);
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:19:01.333

保存在内存中的东西`ResourceSet`是它正在使用的 s 之类的东西，它们似乎直接保存了字符串。您不一定会在此方法中看到它，因为此时，每次调用都可能针对不同的资源名称和不同的文化。

而且，与往常一样，*这*是您的分析告诉您存在性能问题的地方吗？*尝试通过猜测*可能效率低下的地方来优化代码几乎不是一个好主意。

# groovy - 使用 XmlSlurper 和 findAll 嵌套 GPath 表达式

> ID：15928238
> 
> 赞同：3
> 
> 时间：2013-04-10T14:09:22.047
> 
> 标签：groovy, xmlslurper, gpath

我正在尝试使用`XmlSlurper`GPath 分析 XML 树，该`findAll`方法的行为让我感到困惑。

例如，假设您有以下 XML 树：

```
<html>
    <body>
        <ul>
            <li class="odd"><span>Element 1</span></li>
            <li class="even"><span>Element 2</span></li>
            <li class="odd"><span>Element 3</span></li>
            <li class="even"><span>Element 4</span></li>
            <li class="odd"><span>Element 5</span></li>
        </ul>
    </body>
</html> 
```

假设`xml`已通过`XmlSlurper`'s`parse`方法之一初始化，则以下代码按预期执行：

```
// Prints:
// odd
// odd
// odd
xml.body.ul.li.findAll {it.@class == 'odd'}.@class.each {println it.text()} 
```

另一方面：

```
// Doesn't print anything.
xml.body.ul.li.findAll {it.@class == 'odd'}.span.each {println it.text()} 
```

我很难理解为什么我可以使用特殊`@`属性（以及其他属性，例如`**`），但不能使用“正常”属性。

我查看了 API 代码，更让我困惑的是该`getProperty`实现（在 中找到`GPathResult`）似乎支持我正在尝试做的事情。

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:12:22.913

您需要遍历 every `span`，因此您可以使用扩展点运算符：

```
xml.body.ul.li.findAll {it.@class == 'odd'}*.span.each {println it.text()} 
```

# jquery-ui - jQuery UI：Datepicker 在更改后继续显示默认日期格式

> ID：15928239
> 
> 赞同：0
> 
> 时间：2013-04-10T14:09:22.807
> 
> 标签：jquery-ui, datepicker, date-format

`mm/dd/yy`即使将格式更改为，我的日期选择器仍显示默认格式`yy-mm-dd`

这是我的`script.js`

```
$(function(){
 $( "#date" ).datepicker( "option", "dateFormat", "yy-mm-dd");
 $( "#date" ).datepicker();
}) 
```

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:58:44.170

试试这个：

```
$( "#date" ).datepicker({dateFormat: 'yy-mm-dd'}); 
```

您正在调用日期选择器两次。第二次没有任何选项，因此使用其默认选项调用它并且似乎覆盖了第一个

这是一个小提琴工作：http: [//jsfiddle.net/qG4PC/](http://jsfiddle.net/qG4PC/)

# java - 在预编译的 Jasperreport 中更改 JRChart 的渲染器

> ID：15928241
> 
> 赞同：0
> 
> 时间：2013-04-10T14:09:26.757
> 
> 标签：java, jasper-reports, ireport, jfreechart

我正在 IReport 中创建一个 Jasper 报告模板，我正在使用 Java 应用程序对其进行编译和归档。

在散点图上，我想将回归线绘制为样条曲线。目前，我发现这样做的唯一方法是使用 JFreeCharts [XYSplineRenderer](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/chart/renderer/xy/XYSplineRenderer.html)。但是，这需要我在 Java 代码中创建图表，然后在填充时将其作为参数传递给报表。这也需要我在代码中自定义图表的外观。

我希望能够使用 IReport 在 jrxml 中设计我的图表，用 Java 编译报告，获取图表对象并在填充之前为其设置自定义渲染器。

像这样的东西：

```
JasperReport report = JasperCompileManager.compileReport(reportIs);
JRChart jrChart = (JRChart) report.getSummary().getElementByKey("chart");
JFreeChart chart = jrChart.getJFreeChart(); // this method does not exist
((XYPlot)chart.getPlot()).setRenderer(new XYSplineRenderer()); 
```

问题是我找不到从已编译报告中检索实际 JFreeChart 对象的方法，也找不到任何其他方法将自定义绘图渲染器传递给图表。

有没有人有任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T13:33:16.463

您可以使用图表定制器来完成此操作。它允许您以 a `JFreeChart`（以及 a `JRChart`）的形式访问图表，这应该正是您所需要的。`customizerClass`通过设置属性将图表定制器添加到图表。该`customize`方法由 Jasper 调用，允许您在报表填充过程中修改图表。

创建一个如下所示的定制器：

```
public class MyChartCustomizer implements JRChartCustomizer {
    @Override
    public void customize(JFreeChart jFreeChart, JRChart jRChart) {
        ((XYPlot)jFreeChart.getPlot()).setRenderer(new XYSplineRenderer());
    }
} 
```

然后编译它并确保它在您填写报告时位于 Jasper 的类路径中。

# excel - 使用 Count-if 获取消息框

> ID：15928250
> 
> 赞同：0
> 
> 时间：2013-04-10T14:09:44.110
> 
> 标签：excel, vba

我正在“尝试”制作一个消息框，显示一列中有多少存在和缺席，以便用户可以单击“确定”并复制数据或按“取消”并结束代码。

问题是我似乎无法让 CountIf 部分在消息框中显示缺席和出席之前计算缺席和出席的数量。

我对编码很陌生，所以它可能真的一团糟，但任何帮助和我都将不胜感激:)

```
Sub SubmitAttendance()

    Dim Response As String
    Dim Question As String
    Dim PresentNumber As String
    Dim AbsentNumber As String

    Function As Integer
        PresentNumber = Countif(Range("E:E"), Present)
        AbsentNumber = Countif(Range("E:E"), Absent)
    End Function

    Question = "PresentNumber Present and AbsentNumber Absent"
    Response = MsgBox(Question, vbOKCancel, "Register Totals")

    If Response = vbOK Then
        Range("E:E").Select
        Selection.Copy

        Range("F:ZZ").Find("").Select
        Selection.PasteSpecial
    Else
        Exit Function
    End If
End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:14:11.267

Excel 函数在`WorkSheetFunctions`模块中可用，例如：

```
WorksheetFunctions.CountIf(Arg1 As Range, Arg2) 
```

此外，将您的第二个参数作为字符串传递，而不是作为变量传递（VB 的忙碌性质将为您声明一个该名称的未初始化变量，这可能不是您想要的。

所以你的`CountIf`行应该是这样的：

```
WorksheetFunction.CountIf( Range("E:E") , "Present") 
```

# javascript - 为什么我的定义调用没有触发？

> ID：15928251
> 
> 赞同：0
> 
> 时间：2013-04-10T14:09:45.710
> 
> 标签：javascript, jquery, requirejs, amd, requirejs-define

我正在使用`requireJS`并试图定义一个谷歌地图模块。

我将此代码添加到 HTML 片段的末尾：

```
$(document).ready(function() {
  console.log("ready");
  define(['async!http://maps.google.com/maps/api/js?v=3&sensor=false'],
   function (gmap) {
     console.log(gmap);
   });
}); 
```

“就绪”控制台正在记录，但`define`调用未触发。如果我用`require`调用替换它，则正在加载文件，但我的 gmap 未定义。

**问题：**
为什么我的`define`呼叫没有触发？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T22:48:38.060

这是因为一旦定义了模块，就需要它。将您的代码更改为这样的代码会起作用：

```
// gmap.js (for example)
define(['async!http://maps.google.com/maps/api/js?v=3&sensor=false'], function(gmap) {
    // Do some stuff

    return gmap;
});

// main.js
require(['jquery', 'path/to/gmap'], function($, gmap) {
    $(function() {
        console.log(gmap);
    });
}); 
```

需要注意的一些事项：

*   定义的模块应该存在于单独的文件中。阅读[API 文档中的此页面](http://requirejs.org/docs/api.html#define)以了解它们的工作原理。
*   避免在 DOM 就绪回调中要求模块，这意味着您必须等待更长的时间才能请求模块。最好立即开始请求它们并稍后检查 DOM 准备情况。RequireJS 附带了[一个 DOM 就绪插件](http://requirejs.org/docs/download.html#domReady)，就是为了这个。
*   确保你`require`jQuery 作为一个模块（除非你没有这样使用它）。
*   将匿名函数传递`$()`给`$(document).ready()`

# javascript - 如何在 $().css 中传递 event.currentTarget.id？

> ID：15928259
> 
> 赞同：1
> 
> 时间：2013-04-10T14:10:01.500
> 
> 标签：javascript, jquery

此对象的目的是在单击 div 时显示弹出窗口。在弹出窗口中，我想显示单击的 div 的 css 属性。我的问题是如何将 current.target.id 事件放入`$("#container").css(this.css);`替换 #container 的这一行，以便我为单击的每个元素检索不同的值

提前致谢

```
 $(function () {
    function popup(){
        var self = this;
        this.identifier;
        this.popupStatus = 0;
        this.css = ["width", "height", "color", "background-color"];

            $("#container > *").on('click', ':not(#popup)', function (e) 
            {
                if(event.target.id!=='backgroundPopup')
                {
                    e.stopPropagation()
                    self.centerPopup();
                    self.loadPopup();
                    self.cssAttr(); 
                }
            });

            $("#backgroundPopup").click(function()
            {
                console.log('backgroundPopup');
                self.disablePopup();
            });     

            $(document).keypress(function(e)
            {
                if(e.keyCode==27 && popupStatus==1)
                {
                    self.disablePopup();
                }
            });

          this.cssAttr = function (e){

            var html = ["Adjust the settings:"];
            //problem
            var styleProps = $("#container").css(this.css);
            console.log(styleProps);

            $.each( styleProps, function( prop, value ) {
                html.push( prop + ": " + value );
            });

            $( "#result" ).html( html.join( "<br>" ) );
            }

          this.loadPopup = function (){
            if(this.popupStatus==0)
            {
                console.log('loadPopup');
                $("#backgroundPopup").css(
                {
                    "opacity": "0.7"
                });
                $("#backgroundPopup").fadeIn("slow");
                $("#popupContact").fadeIn("slow");

            this.popupStatus = 1;
            }
        }

        this.disablePopup = function (){
            if(this.popupStatus==1)
            {
                console.log('disablePopup');
                $("#backgroundPopup").fadeOut("slow");
                $("#popupContact").fadeOut("slow");
                this.popupStatus = 0;
            }
        }

        this.centerPopup = function (){
            console.log('centerPopup');
            var windowWidth = document.documentElement.clientWidth;
            var windowHeight = document.documentElement.clientHeight;
            var popupHeight = $("#popupContact").height();
            var popupWidth = $("#popupContact").width();

            $("#popupContact").css(
            {
                "position": "absolute",
                "top": windowHeight/2-popupHeight/2,
                "left": windowWidth/2-popupWidth/2
            });

            $("#backgroundPopup").css(
            {
                "height": windowHeight
            });     
        }
    }
    var popup = new popup();
}); 
```

# bash - bsdtar 的 -q 选项

> ID：15928260
> 
> 赞同：0
> 
> 时间：2013-04-10T14:10:01.967
> 
> 标签：bash, bsdtar

我在 bash 脚本中遇到了以下代码。

```
# See if bsdtar can recognize the file
if bsdtar -tf "$file" -q '*' &>/dev/null; then
   cmd="bsdtar"
else
continue 
```

“-q”选项是什么意思？我在 bsdtar 命令的帮助信息中没有找到任何信息。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:11:39.047

从 bsdtar[手册页](http://www.unix.com/man-page/osx/1/BSDTAR/)：

> ```
> -q (--fast-read)
>      (x and t mode only) Extract or list only the first archive entry
>      that matches each pattern or filename operand.  Exit as soon as
>      each specified pattern or filename has been matched.  By default,
>      the archive is always read to the very end, since there can be
>      multiple entries with the same name and, by convention, later
>      entries overwrite earlier entries.  This option is provided as a
>      performance optimization. 
> ```

# jquery - 脚本仅适用于 .jpg 图像类型，也需要适用于 .png 和 .gif

> ID：15928261
> 
> 赞同：0
> 
> 时间：2013-04-10T14:10:03.123
> 
> 标签：jquery, image, types, src

此脚本尝试在可用的情况下用全尺寸图像替换缩略图图像，但目前它仅在全尺寸图像源为 .jpg 时才有效。我希望它适用于所有图像类型，或者至少也适用于 .png 和 .gif 文件。

```
// Now append the merch image, short description, //
// and SKU number to our table cells. //
jQuery.each(merchImage, function (i, val) {
    $(val).appendTo("#mcell" + i);
    var s = $(val).attr('src');
    // get full size image path info //
    var s_chop = s.lastIndexOf("_");
    var s_src = s.substr(0, s_chop);
    // if a full-size image exists, replace thumbnail //
    if (s_src.search(/notavail/i) == -1) {
        s = s_src + '.jpg';
        $(val).attr('src', s);
    }
    $(val).css('width', '').css('height', '').css('max-width', '180px').css('max-height', '240px');
    $("<br />").appendTo("#mcell" + i);
});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:16:28.757

您需要以某种方式知道目标文件名，以便可以在此处使用

```
 s = s_src + '.jpg'; 
```

其他文件扩展名

```
 s = s_src + '.png';

 s = s_src + '.gif'; 
```

但是，如果我们确定您的图像文件夹只有图像并且**总是**`s_src`正确的，您可以尝试只使用而不是代码

 **```
 if (s_src.search(/notavail/i) == -1) {
        s = s_src + '.jpg';
        $(val).attr('src', s);
    } 
```

那个

```
if (s_src.search(/notavail/i) == -1) {

        $(val).attr('src', s_src);
    } 
```

但请在这里解决

```
var s_chop = s.lastIndexOf("_");
var s_src = s.substr(0, s_chop); 
```

所以你要把文件扩展名保留在`s_src`.

我希望你能得到一般的想法......**

# django - 在 Django 中计算对象并显示结果

> ID：15928272
> 
> 赞同：0
> 
> 时间：2013-04-10T14:10:26.170
> 
> 标签：django, django-views, counting, tabular, annotate

我有一个关于计数对象、过滤结果并最终将它们放入我的模板的问题。

在`Models.py`：

```
class Fms(models.Model):
    department = models.CharField(max_length=255, verbose_name='Department')
    date = models.DateField() 
```

在`Views.py`：

```
def raport(request):
    raport = Fms.objects.filter(date__year='2013').extra(select={'month': "EXTRACT(month FROM date)"}).values('month', 'department').annotate(Count('department'))
    return render_to_response ('Fms/raport.html',
                               {'raport': raport},
                               context_instance=RequestContext(request)) 
```

问题是，如何在表格中显示结果，例如：

![结果](https://i.stack.imgur.com/UnToB.jpg)

或者至少让它显示每个月以及该月提到部门的次数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T17:36:15.517

如果您不将关键字传递给`annotate`，它会使用`__count`附加到它的字段的名称。[https://docs.djangoproject.com/en/dev/topics/db/aggregation/#generating-aggregates-for-each-item-in-a-queryset](https://docs.djangoproject.com/en/dev/topics/db/aggregation/#generating-aggregates-for-each-item-in-a-queryset)要在您的模板中访问它，您只需执行以下操作：

```
<table>
    <thead>
        <tr>
            <th>Month</th>
            <th>Count</th>
        </tr>
    </thead>
    <tbody>
        {% for item in raport %}
            <tr>
                <td>{{ item.month }}</td>
                <td>{{ item.department__count }}</td>
            </tr>
        {% endfor %}
    </tbody>
</table> 
```

* * *

要水平显示它...

```
<table>
    <thead>
        <tr>
            {% for item in raport %}
                <th>{{ item.month }}</th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        <tr>
            {% for item in raport %}
                <td>{{ item.department__count }}</td>
            {% endfor %}
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:35:01.980

你需要类似的东西：

```
{% for each_model in raport %}
    {{each_model.department}}
    {{each_model.date}}
{% endfor %} 
```

# python - 为 optparse 正确包装长 python 字符串

> ID：15928283
> 
> 赞同：4
> 
> 时间：2013-04-10T14:10:47.317
> 
> 标签：python, string, optparse

如何自动包装长 python 字符串以便它们正确打印？

具体来说，我正在尝试使用我希望能够轻松修改的 optparse 添加帮助字符串。

我发现了几种处理长字符串的方法，这些方法都不允许我在使用 Emacs 或类似的 Mq 进行更改后重新填充：

```
p.add_option('-a', help = "this is my\
                           long help text") 
```

在结果中强制换行并且不允许重新填充

```
p.add_option('-a', help = "this is my "
                          "long help text") 
```

格式正确但不允许重新填充

```
p.add_option('-a', help = '''
             this is my
             long help text
             ''') 
```

格式不正确，但允许重新填充

```
p.add_option('-a', help = dedent('''
             this is my
             long help text
             ''')) 
```

是我发现的最佳选择，格式*几乎*正确，并允许重新填充，但会在字符串的开头产生额外的空格。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:16:37.593

文档使用[dedent](http://docs.python.org/dev/library/argparse.html#formatter-class)所以它看起来很合理，特别是如果它有效。如果您想删除前导空格，您可以：

```
help = dedent('''
             this is my
             long help text
             ''')[1:] 
```

虽然

```
dedent(…).lstrip() 
```

可能更明显。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:20:07.710

我不是 100% 确定什么是重新填充，但这是我通常使用的：

```
p.add_option('-a', help = ("this is my "
                           "long help text")) 
```

（注意额外的括号）。Emacs 将下一行与前面的左括号对齐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T21:57:30.333

如果您使用 Python >= 2.7，请使用[argparse而不是 optparse。](http://docs.python.org/2/library/argparse.html)它`dedent`适合你。你可以这样做：

```
parser.add_argument('--argument', '-a', help='''
    this is my
    long help text
    ''') 
```

即使您使用的是 Python < 2.7，也可以从 pypi 安装 argparse。

请注意，有一种方法可以抑制这种自动消除行为。@msw 给出的链接实际上是关于它的部分。

# iphone - 阻止刷新网页

> ID：15928288
> 
> 赞同：-1
> 
> 时间：2013-04-10T14:10:54.313
> 
> 标签：iphone, ios, xcode, webview

我有一个问题：我有一个简单的应用程序，其中包含一个菜单和一个指向网页的链接。该网页是：“soundcloud”它是一个生成音乐的站点。例如，如果我播放音乐并返回我的应用程序的菜单，当我返回网页时，音乐仍在播放，音乐还在，但页面归零。我想防止这种情况发生。对不起我的英语我是法国人-</p>

亲切的戴维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:56:40.837

编辑：这是假设页面包含在您的应用程序内的 UIWebView 中。如果它是在 Safari 中打开的链接，我不相信您将能够阻止 Safari 中的导航……但在您自己的网络视图中可以。

将控制类（无论哪个视图控制器包含您的 Web 视图）设置为 UIWebView 委托。然后，当您实现委托协议时：

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{      //If you want to block ANY navigation
    return NO;

       //If you want to block refreshes but allow other navigation
     if (navigationType == UIWebViewNavigationTypeReload) return NO;
{ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-04T08:44:51.077

灵感来自@Reid Belton 的回答

```
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType
{     
    //to prevent reloading html if it is already loaded
   if( isHTMLLoaded)
   {
       return NO;
   }else{
     isHTMLLoaded = YES;
    return YES;
   }

} 
```

# dojo - 道场的现代外观主题？

> ID：15928289
> 
> 赞同：6
> 
> 时间：2013-04-10T14:11:04.547
> 
> 标签：dojo

我是 Dojo 的新手 - 浏览所有文档并找到我的项目所需的所有小部件。我真的很感动。

但我有一个问题：Dojo 是否有任何“现代外观”主题？不是那种外观/窗口的外观，更少的“应用程序”和更多的“网络”感觉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:53:36.490

我不知道你喜欢什么主题，但标准主题记录[在这里](http://dojotoolkit.org/reference-guide/1.8/dijit/themes.html)。另一个可能有用的主题是[Dojo bootstrap 主题](http://thesociable.github.io/dbootstrap/)，它仍在开发中，但看起来已经不错了。它基于流行的 Twitter Bootstrap UI 工具包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-31T09:17:17.813

我有完全相同的要求，..所以我决定自己做，..

检查[Semantic Dojo ，一个建立在](http://websemantics.github.io/semantic-dojo/)[Semantic UI](http://semantic-ui.com/)框架上的 Dojo 主题。这个想法是构建一个与使用的 CSS 框架（这里是语义 UI）很好​​地配合的 Dojo 主题。

所有已实现的 Dijit 小部件都从其语义 UI 对应物（如果有）继承其样式。Semantic Dojo 使用基于 LESS 的强大构建系统，可以轻松构建 Dijit 小部件的主题。

# javascript - 自定义事件文档 onContentChange

> ID：15928290
> 
> 赞同：4
> 
> 时间：2013-04-10T14:11:06.443
> 
> 标签：javascript, jquery, javascript-events

[这里 jsFiddle 来测试样本](http://jsfiddle.net/Gw4Lj/)

我目前正在编写一个 jquery 片段来处理由任何 jquery domManip 函数（扩展一些函数）“触发”的 DOM 中的任何 html 内容更改。不确定这是最好的方法，所以欢迎任何建议。如果绑定到文档，此代码段将按预期工作。但是，如果我尝试将其绑定到特定元素，我将面临某些功能为**.remove()**的问题。也许这是由于自定义事件没有使用正常的传播行为，但我真的不确定。

这是一个工作示例，我将“contentChange”事件绑定到文档，可以跨浏览器工作，因为我可以测试它：{Firefox、IE9、Chrome 和 Safari 在 Win7}

```
;
(function ($) {
    $.fn.contentChange = function (types, data, fn) {
        return this.on('contentChange', types, null, data, fn);
    };
    var oDomManip = $.fn.domManip,
        oHtml = $.fn.html,
        oEmpty = $.fn.empty,
        oRemove = $.fn.remove,
        extendFct = function (oFct, sender, args) {
            return oFct.apply(sender, args), $.event.trigger('contentChange');
            //=>if testing specific element (#test) use instead following line
             //return oFct.apply(sender, args), $(sender).trigger('contentChange');
        };
    $.fn.domManip = function () {
        extendFct(oDomManip, this, arguments)
    };
    $.fn.html = function () {
        extendFct(oHtml, this, arguments)
    };
    $.fn.empty = function () {
        extendFct(oEmpty, this, arguments)
    };
    $.fn.remove = function () {
        extendFct(oRemove, this, arguments)
    };

})(jQuery); 
```

我使用：`$.event.trigger('contentChange')` 触发自定义事件。

像这样称呼：

```
$(document).contentChange(function () {
    console.log("onContentChange")
}); 
```

但是，如果我使用：

```
$('#test').contentChange(function () {
    console.log("onContentChange")
}); 
```

不会触发自定义事件。因此，要在特定元素上触发自定义事件，我可以像这样触发它：

```
$(sender).trigger('contentChange'); 
```

但是现在，`remove()`对 self 或 children 的方法调用不会触发我的自定义事件。我可以理解，如果我删除元素，将不会调用事件回调函数，但是为什么在删除子元素时不调用它（如果绑定到文档则它正在工作！）？

我**期待这条线**将自定义**事件气泡**设为“#test”：

```
$('#test').find('div:first').remove(); 
```

在操作此元素和/或其子元素时，是否有任何方法可以触发绑定到特定元素的自定义事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:20:05.190

您需要在被修改的元素上触发事件。

[http://jsfiddle.net/Gw4Lj/2/](http://jsfiddle.net/Gw4Lj/2/)

```
return oFct.apply(sender, args), sender.trigger('contentChange'); 
```

但是，通过该更改，您将不再捕获在未连接到 DOM 的元素上触发的事件，因为它不是该文档的后代，我认为这没问题，因为它没有关联对于那个 DOM，它在一个 DOM 片段中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T14:09:20.350

我提供了稍微修改过的版本，似乎可以很好地达到我的目的。需要对`.on()`方法扩展进行优化，所以请随时分享您的反馈。

灵感来自这里：[https ://groups.google.com/forum/?fromgroups=#!topic/jquery-dev/ZaMw2XB6wyM](https://groups.google.com/forum/?fromgroups=#!topic/jquery-dev/ZaMw2XB6wyM)

感谢威尔·斯塔基

[这里是 jsFiddle](http://jsfiddle.net/UZcJu/)

```
;(function ($) {
    var fctsToObserve = {
        append: [$.fn.append, 'self'],
        prepend: [$.fn.prepend, 'self'],
        remove: [$.fn.remove, 'parent'],
        before: [$.fn.before, 'parent'],
        after: [$.fn.after, 'parent']
    }, fctsObserveKeys = '';
    $.each(fctsToObserve, function (key, element) {
        fctsObserveKeys += "hasChanged." + key + " ";
    });
    var oOn = $.fn.on;
    $.fn.on = function () {
        if (arguments[0].indexOf('hasChanged') != -1) arguments[0] += " " + fctsObserveKeys;
        return oOn.apply(this, arguments);
    };
    $.fn.hasChanged = function (types, data, fn) {
        return this.on(fctsObserveKeys, types, null, data, fn);
    };
    $.extend($, {
        observeMethods: function (namespace) {
            var namespace = namespace ? "." + namespace : "";
            var _len = $.fn.length;
            delete $.fn.length;
            $.each(fctsToObserve, function (key) {
                var _pre = this;
                $.fn[key] = function () { 
                    var target = _pre[1] === 'self' ? this : this.parent(),
                        ret = _pre[0].apply(this, arguments);
                    target.trigger("hasChanged." + key + namespace, arguments);
                    return ret;
                };
            });
            $.fn.length = _len;
        }
    });
    $.observeMethods()
})(jQuery); 
```

# c++ - VS2012 nmake 使用 v110_xp 工具集？

> ID：15928293
> 
> 赞同：11
> 
> 时间：2013-04-10T14:11:13.273
> 
> 标签：c++, visual-studio-2012, qt5, nmake

使用“nmake”编译时，有没有办法使用**v110_xp**工具集（而不是默认的“v110”）？

我正在尝试为 VisualStudio2012 编译一个 Qt5 库，我也需要它在 Windows XP 机器上工作。我已经设法使用带有nmake的VS2012编译所有Qt5库，但即使是简单的测试应用程序也无法在XP机器上运行，给我“**过程入口点_except_handler4_common不能位于动态链接库msvcrt.dll** ”。（*在 Windows 7 机器上，我的测试应用程序工作正常*）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T14:17:41.693

1.  编辑*Makefile.Debug*或*Makefile.Release*文件
2.  **将-D_USING_V110_SDK71_**添加到 DEFINES

例子：

`DEFINES = -D_USING_V110_SDK71_ -DUNICODE -DWIN32 -DQT_QML_DEBUG -DQT_DECLARATIVE_DEBUG`

祝你好运！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T13:18:48.250

我正在寻找的信息可以在这里找到：http: [//blogs.msdn.com/b/vcblog/archive/2012/10/08/windows-xp-targeting-with-c-in-visual-studio-2012 .aspx](http://blogs.msdn.com/b/vcblog/archive/2012/10/08/windows-xp-targeting-with-c-in-visual-studio-2012.aspx)（在“从命令行定位”中）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-14T16:47:35.850

在运行 configure 之前编辑 mkspecs\win32-msvc2012\qmake.conf 更容易。编辑 DEFINES += 行并添加以下内容：

```
WIN32 _USING_V110_SDK71_ 
```

每当您拉动时，您都必须存储并弹出此更改。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-06T07:22:28.487

`nmake /E CC="cl /D_USING_V110_SDK71_ /D_WIN32_WINNT=0x0501" /f Makefile.vc`

当很难触摸 make 文件时，它会容易得多。

# c++ - 我应该声明我的对象是全局的还是静态的？

> ID：15928297
> 
> 赞同：2
> 
> 时间：2013-04-10T14:11:19.507
> 
> 标签：c++, global-variables

`<random>`我使用C++11绘制随机数。我通过创建`obj`以下类的实例来做到这一点（对于感兴趣的读者：它取自这个[线程](https://stackoverflow.com/questions/15918758/how-to-make-each-thread-use-its-own-rng-in-c11/15919785?noredirect=1#comment22687933_15919785)）：

```
class RNG
{
public:
    typedef std::mt19937 Engine;
    typedef std::uniform_real_distribution<double> Distribution;

    double operator()()
    {
        return distribution(engine);
    }
    Engine engine;
    Distribution distribution;
}; 
```

呼叫`obj()`给了我想要的随机数。现在，我有了三个都必须使用的功能`obj`。声明`obj`global 会起作用，但它也正确吗？还是有其他（更正确的）替代方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:28:16.463

这取决于。如果您的程序中使用的部分`RNG`包括并且可能包括（尽管很难看到未来）只是这三个函数，并且这些函数只需要在一个对象上工作 - 始终相同，一直 - 那么为什么不将该对象设为全局。

避免将*类型*限制为只有一个实例（单例模式），除非这是该类型的固有特征。如果*您的程序*仅使用 的一个实例`RNG`，那么*您的程序将只创建一个实例*（即，使对象成为全局对象，或者将您的程序（而不是类型）约束为仅创建一个实例）。我可以很好地想象其他库或程序可能会创建几个随机生成器。

当然，如果有一天这些函数必须处理*多个*不同的实例`RNG`（尽管一次一个），那么您将需要让它们将该类的一个实例作为函数参数，并让它们处理该参数. 客户必须注意提供适当的实例`RNG`作为这些函数的参数。

然后，如果有一天你会意识到这些函数最终也会在其他对象类型上工作，并且这些数据以某种方式相互关联，你可以考虑将它们包装在数据结构或类中，可能使你的函数该类的*成员函数*- 如果它执行的操作是该类型的*基础*。

在不知道您的想法以及您要编写什么样的应用程序或库的情况下给出一般指导方针并不容易。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:16:11.603

使用单例模式。

只需添加一种方法：

```
 static RNG& inst()
 {
     static RNG instance;
     return instance;
 } 
```

并禁用您的对象的复制：

```
private:
    RNG(const RNG&); // without implementation
    RNG& operator=(const RNG&); // without implementation 
```

然后您可以访问您的实例：

```
d = RNG::inst()(); 
```

# mysql - 检测 OLD 值是否不等于 NEW 值且 OLD 值是否为 NULL

> ID：15928303
> 
> 赞同：2
> 
> 时间：2013-04-10T14:11:40.020
> 
> 标签：mysql, sql, triggers

当 OLD 值不等于 NEW 值时，我想在 audit_field 中插入一行。为此，我`IF NEW.notes <> OLD.notes THEN`在每个插入之前添加。但是，我发现（我认为）如果 OLD 值为 NULL，则不执行插入。我没有测试相反是否正确，如果 OLD 值是什么而 NEW 值是 NULL，它不会插入，但我希望它不会。

如何检测 OLD 值是否不等于 NEW 值并且 OLD 值是否为 NULL（或者类似地，如果 NEW 值为 NULL）？

```
CREATE TRIGGER tg_students_upd AFTER UPDATE ON students
FOR EACH ROW 
BEGIN
    IF NEW.name <> OLD.name OR NEW.ssn <> OLD.ssn OR NEW.notes <> OLD.notes THEN
        INSERT INTO audits(tableName,pk,task,dateChanged,users_id,dbUser,requesting_ip) VALUES ('students', @AID, 'u', NOW(), @users_id, USER(), @requesting_ip );
        SET @AID=LAST_INSERT_ID();
        IF NEW.name <> OLD.name THEN
            INSERT INTO audit_field(audits_id,columnName,oldValue,newValue) VALUES (@AID,'name',OLD.name,NEW.name);
        END IF;
        IF NEW.ssn <> OLD.ssn THEN
            INSERT INTO audit_field(audits_id,columnName,oldValue,newValue) VALUES (@AID,'ssn',OLD.ssn,NEW.ssn);
        END IF;
        IF NEW.notes <> OLD.notes THEN
            INSERT INTO audit_field(audits_id,columnName,oldValue,newValue) VALUES (@AID,'notes',OLD.notes,NEW.notes);
        END IF;
    END IF;
END$$ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T14:19:30.867

利用`<=>`

```
SELECT NOT 1 <=> 1,NOT NULL <=> NULL, NOT 1 <=> NULL, NOT 1 <=> 2, 1 <> 1, NULL <> NULL, 1 <> NULL, 1 <>2;

+-------------+-------------------+----------------+-------------+--------+--------------+-----------+-------+
| NOT 1 <=> 1 | NOT NULL <=> NULL | NOT 1 <=> NULL | NOT 1 <=> 2 | 1 <> 1 | NULL <> NULL | 1 <> NULL | 1 <>2 |
+-------------+-------------------+----------------+-------------+--------+--------------+-----------+-------+
|           0 |                 0 |              1 |           1 |      0 | NULL         | NULL      |     1 |
+-------------+-------------------+----------------+-------------+--------+--------------+-----------+-------+ 
```

PS。抱歉，在发布问题之前应该阅读手册，但希望它会对其他人有所帮助。

# jquery - JQuery 内容滑块 - 最佳实践？

> ID：15928309
> 
> 赞同：8
> 
> 时间：2013-04-10T14:11:54.943
> 
> 标签：jquery, html, slider, jquery-animate

我想创建一个基本上是一个巨大的内容滑块的网站，在页面加载时你会看到 div 1（基本上是整个屏幕），然后你可以单击向下箭头转到第 2 页等，当你到达第 2 页时我还希望能够左右移动（仅在第 2 页上），将其视为图像滑块但带有 div..

我知道有可用的插件，但我很想自己写，我写了一些（基本的）JQuery，它确实有效，但它似乎太臃肿了，我想要一种更好/更有效的方式来做这件事..我在追求什么解决这个问题的最佳方法是什么，我不是在寻找代码，因为我想学习并变得更好，但想不出解决这个问题的最佳方法，是否可以使用某种 switch 语句？你会怎么做呢？

我还需要以某种方式确保您不能滚动超过 div 的数量，我目前正在使用带有 if 语句的 var，但觉得必须有一种方法可以将每个人组合成一个简单的函数？

JS在下面，还有一个JSFiddle

谢谢！

[http://jsfiddle.net/W4SVz/](http://jsfiddle.net/W4SVz/)

```
$(function () {
  var box = $('.box');
  TriggerClick = 0;

  $("#down").click(function(){
     var height = $('.box').outerHeight();

     if(TriggerClick == 0){
         TriggerClick = 1;
         $(box).stop().animate({top:'-='+height}, 500);
     }else if(TriggerClick == 1){
        TriggerClick = 2;
         $(box).stop().animate({top:'-='+height}, 500);
     }
  });

   $("#up").click(function(){
     var height = $('.box').outerHeight();

     if(TriggerClick == 2){
         TriggerClick = 1;
         $(box).stop().animate({top:'+='+height}, 500);
     }else if(TriggerClick == 1){
        TriggerClick = 0;
         $(box).stop().animate({top:'+='+height}, 500);
     }
  });

  $("#left").click(function(){
     var height = $('.box').outerHeight();
     if(TriggerClick == 1){
         $(box).stop().animate({left:'-='+height}, 500);
     }
  });

   $("#right").click(function(){
     var height = $('.box').outerHeight();
     if(TriggerClick == 1){
         $(box).stop().animate({left:'+='+height}, 500);
     }
  });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T21:23:06.517

作为免责声明，自己制作一个以供实际使用并不是一个好主意。您可能会在不同的浏览器上遇到许多兼容性问题。

但是出于学习目的，我很高兴与您分享我的小知识。

我经常使用来自 Kelvin Luck 的 jquery 插件 jscrollpane。这是一个轻量级且可配置的插件。在我看来，这也将是您学习的有趣作品。你可以在这里找到代码：http: [//jscrollpane.kelvinluck.com/script/jquery.jscrollpane.js](http://jscrollpane.kelvinluck.com/script/jquery.jscrollpane.js)

这里是这个插件的一个非常简单的用法。您可能还想看看 [http://www.kelvinluck.com/assets/jquery/jScrollPane/basic.html](http://www.kelvinluck.com/assets/jquery/jScrollPane/basic.html)

据我所知，它强烈使用了 jquery 事件系统。随意理解它......也许会改进它;-)

玩得开心 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:32:36.237

就代码而言，我会说尝试找出所有四种情况的共同点（左上右下）并将其抽象出来。我不认为 TriggerClick 变量非常直观 - 不确定它是否需要。

使用插件模式将您的函数添加到 jQuery（请参阅 Brainfeeders 链接），然后在页面加载中使用该函数。

我玩弄了这个想法，但我不会发布我的代码 - 如果你有兴趣看到它，请大喊。

# sql - DB2 计划表方法

> ID：15928312
> 
> 赞同：-1
> 
> 时间：2013-04-10T14:11:57.743
> 
> 标签：sql, performance, join, db2, sql-execution-plan

当表中涉及联接时，计划表行中给出的方法值哪个更好？

*   method=1，嵌套循环连接
*   method=2，合并扫描连接
*   方法=4，混合连接

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:35:56.287

唯一“正确”的答案是：视情况而定。

阅读[有关解释访问计划的信息中心文章，](http://pic.dhe.ibm.com/infocenter/dzichelp/v2r2/index.jsp?topic=/com.ibm.db2z9.doc.perf/src/tpc/db2z_plantablejoinexamples.htm)了解有关所有方法如何工作的更多详细信息。

# javascript - Sencha Touch Carousel 不可见

> ID：15928313
> 
> 赞同：0
> 
> 时间：2013-04-10T14:12:07.340
> 
> 标签：javascript, extjs, sencha-touch, carousel

我正在尝试在 Sencha Touch 中渲染一个简单的轮播，但是它没有出现。我唯一看到的是项目的指示点。在 Chrome 中检查显示正在添加标签，但我看不到它们。

轮播视图：

```
Ext.define('Project.view.ChartCarousel', {
    extend : 'Ext.Carousel',
    xtype : 'chartCarousel',
    config : {
        title : 'Title',
        fullscreen: 'true',
        width: '100',
        height: '100',
        jumpToIndex: 0,
        defaults : {
            padding: '10 10 10 10'
        },
        items : [{
            html:'<div style="text-align:center">test 1</div>'
        }, {
            html:'<div style="text-align:center">test 2</div>'
        }, {
            html:'<div style="text-align:center">test 3</div>'
        }]
    }
}); 
```

包含视图：

```
Ext.define('Project.view.SummaryChart',{
        extend: 'Ext.form.Panel',
    xtype: 'summaryChart',
    requires: [
            'Ext.Toolbar'
    ],
    config: {
        items: [

            {
                xtype: 'chartCarousel'
            }

        ]
    },
    initialize: function() {
        this.callParent(arguments);
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:19:24.920

我找到了答案。我需要添加`flex: '1'`到轮播的配置中。

# java - 从 JComboBox 弹出窗口中获取当前突出显示的项目（未选中的项目）

> ID：15928314
> 
> 赞同：5
> 
> 时间：2013-04-10T14:12:20.447
> 
> 标签：java, swing, selection, jcombobox, highlight

我希望能够在`JComboBox`下拉列表中当前突出显示的项目发生变化时做出反应。请注意，我不是在寻找一种方法来获取当前选定的项目，而是突出显示的项目。当鼠标悬停在此弹出窗口上时，它会突出显示鼠标位置处的项目，但这不会影响当前选定的项目，因此我不能简单地通过`ItemListener`或听`ActionListener`来实现我想要的。

我正在尝试创建一个组件，该组件由一个`JComboBox`和一个耦合工具提示组成，该工具提示显示当前突出显示的项目的附加信息（文档）。

作为我的第一次尝试，我将一些代码添加到我的构造函数（扩展`JComboBox`）：

```
import java.awt.BorderLayout;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;
import javax.accessibility.AccessibleContext;
import javax.accessibility.AccessibleState;
import javax.swing.DefaultComboBoxModel;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.SwingUtilities;
import javax.swing.plaf.basic.ComboPopup;

public class SomeFrame extends JFrame {

    private MyComboBox combo;

    public SomeFrame() {
        setDefaultCloseOperation(DISPOSE_ON_CLOSE);
        setSize(100,20);
        setLocationRelativeTo(null);
        setLayout(new BorderLayout());
        combo = new MyComboBox();        
        combo.setModel(new DefaultComboBoxModel(new String[]{"one", "two", "three", "four"}));
        add(combo);
        pack();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                SomeFrame frame = new SomeFrame();
                frame.setVisible(true);
            }
        });
    }    

    // this is the important part
    private static class MyComboBox extends JComboBox {

        public MyComboBox() {
            getAccessibleContext().addPropertyChangeListener(new PropertyChangeListener() {
                public void propertyChange(PropertyChangeEvent evt) {
                    if (AccessibleContext.ACCESSIBLE_STATE_PROPERTY.equals(evt.getPropertyName())
                            && AccessibleState.FOCUSED.equals(evt.getNewValue())
                            && getAccessibleContext().getAccessibleChild(0) instanceof ComboPopup) {
                        ComboPopup popup = (ComboPopup) getAccessibleContext().getAccessibleChild(0);
                        JList list = popup.getList();
                        System.out.println("--> " + String.valueOf(list.getSelectedValue()));
                    }
                }
            });
        }
    }

} 
```

它似乎有效，但我通过一些阴暗的渠道和试验/错误得到了这段代码，所以我认为必须有更好的方法来做到这一点。有任何想法吗？上面的代码甚至是生产安全的吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:41:50.083

好问题和好解决方案 - 除了accessibleCombo 中似乎存在错误，它不会在updateUI 上更新其内部接线，也就是说，在切换LAF 时：

*   列表的可访问选择更改由注册到 comboPopup 列表的内部 ListSelectionListener 触发
*   comboPopup 由 ui-delegate 控制并在 installUI 中重新/创建
*   accessCombo 不会将其内部列表更新为新创建和安装的

您对此无能为力。所以我会直接听列表选择，然后你可以完全控制 LAF 更改的重新布线：

```
public static class XComboBox extends JComboBox {

    private ListSelectionListener listener;

    public XComboBox() {
        uninstall();
        install();
    }

    @Override
    public void updateUI() {
        uninstall();
        super.updateUI();
        install();
    }

    private void uninstall() {
        if (listener == null) return;
        getPopupList().removeListSelectionListener(listener);
        listener = null;
    }

    protected void install() {
        listener = new ListSelectionListener() {
            @Override
            public void valueChanged(ListSelectionEvent e) {
                if (e.getValueIsAdjusting()) return;

                JList list = getPopupList();
                System.out.println("--> " + String.valueOf(list.getSelectedValue()));
            }
        };
        getPopupList().addListSelectionListener(listener);
    }

    private JList getPopupList() {
        ComboPopup popup = (ComboPopup) getUI().getAccessibleChild(this, 0);
        return popup.getList();

    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T15:36:55.273

> 我正在尝试创建一个由 JComboBox 和耦合工具提示组成的组件

为组合框创建自定义渲染器。然后在渲染器中使用 setToolTipText(...) 方法。

[JTable 教程中的为单元格指定工具提示](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#celltooltip)部分展示了如何对表格执行此操作。组合框渲染器的概念应该相同。

# c# - 如何在多行文本框中将单词与包含由行分隔的单词的字符串分开？

> ID：15928320
> 
> 赞同：1
> 
> 时间：2013-04-10T14:12:28.023
> 
> 标签：c#, .net, string, word

我是 C# 新手，但我有兴趣使用它，这是我的问题：

实际上，我想通过多行文本框从用户那里获取输入（关键字），每行一个关键字，然后将其存储在数据库中不同行的每个关键字中。我试过这段代码：

```
Keywords objKeywords = new Keywords();
objKeywords.AddNew();
string text = txtKeywords.Text;
string[] keyword = text.Split(' ');
foreach (string word in keyword)
{
  objKeywords.SKeywords = word;
  objKeywords.ILicenseID = CommonMethods.iLicenseID;
  objKeywords.Save();
} 
```

但我得到了单词（变量）中的整个字符串。任何人都可以帮助我纠正我的逻辑或语法，甚至建议我新代码。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:14:16.037

你可以试试这个：

```
string[] keyword = text.Split('\n'); 
```

或者

```
string[] keywords= text.Split(new string[] 
{"\r\n","\r","\n" }, StringSplitOptions.None); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:15:04.283

以下将由空格字符分割，而不是新行：

```
string[] keyword = text.Split(' '); 
```

如果要按新行拆分，则应使用新行：

```
string[] keyword = text.Split(new [] {Environment.NewLine}, 
                              StringSplitOptions.None); 
```

# xtend - 在 Xtend 集合中组合过滤器和映射

> ID：15928321
> 
> 赞同：5
> 
> 时间：2013-04-10T14:12:30.383
> 
> 标签：xtend

给定一些可迭代变量`v`和类型`T`，我经常发现自己在编写代码，例如

`v.filter[it instanceof T].map[it as T]`

是否存在一些在单个步骤中执行相同功能的助手？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-11T06:42:34.690

您可能想要使用`v.filter(T)`（或遗留语法`v.filter(typeof(T))`），它是 Xtend 的 Java 等效语法`v.filter(T.class)`。

# windows - 从批处理文件 (cmd) 控制交互式控制台程序

> ID：15928325
> 
> 赞同：2
> 
> 时间：2013-04-10T14:12:51.920
> 
> 标签：windows, batch-file, scripting

我有一个 WindowsXP 控制台程序，它提供了一个交互式 cli 模式（一些 cisco 工具），提示输入用户名和密码。如何以编程方式从 .bat 文件中输入这些内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T14:54:07.467

这将取决于工具。

希望 cisco 工具支持命令行参数 ( `-username=foo`etc)，可以从管道读取命令 ( `echo username | tool.exe`)，或者可以接受输入文件 ( `tool.exe @input.txt`)。

如果它从标准输入获取所有输入，您可以创建一个包含正确顺序的输入的文本文件，并将其通过管道传输到应用程序。例如，创建一个`input.txt`包含以下内容的文件：

```
myusername
mypassword 
```

并这样做以便 tool.exe 从 input.txt 获取其输入：

```
tool.exe < input.txt 
```

但这再次取决于工具。

如果没有这些简单的答案，下一个选项是使用 jscript、vbscript 或其他语言将击键发送到 cmd 窗口。请参阅[使用批处理文件自动化 Windows 命令行实用程序 - 在实用程序启动后将击键发送到标准输入](https://stackoverflow.com/questions/5722605/automate-a-windows-command-line-utility-with-a-batch-file-send-keystrokes-to-s)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-13T13:13:35.237

我遇到了同样的问题，但列出的解决方案都没有奏效。我尝试了不同的方法，以下对我有用：

```
Command.exe "First Interactive choice" "Second one" "Third" 
```

# java - 如何在不设置任何环境变量的情况下运行`ant`构建脚本？

> ID：15928331
> 
> 赞同：0
> 
> 时间：2013-04-10T14:13:00.540
> 
> 标签：java, ant, build, jar, build-process

我想在不安装和设置任何环境变量（如, & ）`ant`的情况下运行构建脚本。`Java``path``JAVA_HOME``ANT_HOME`

我已将已安装的`Jdk-1.7u17`,`Jre-1.7u17`和`apache-ant-1.9.0`从一台机器复制到另一台机器的`C:\buildscript_required_files_v2`文件夹中。

现在我有一个窗口批处理文件进入 build.xml 所在的路径并运行`ant`

```
cd VersionBuild
C:\buildscript_required_files_v2\apache-ant-1.9.0\bin\ant 
```

build.xml 符合 Java 类并创建一个 Jar 文件。

```
<project name="VersionBuild"  default="clean" basedir=".">
    <description>
        simple example build file
    </description>

  <!-- set global properties for this build -->

  <target name="init">
    <!-- Create the time stamp -->
    <tstamp/>
    <!-- Create the build directory structure used by compile -->

 </target>

 <target name="CompilingBuildversion" depends="init"
        description="compile the source " >
    <!-- Compile the java code from ${src} into ${build} -->
    <C:\buildscript_required_files_v2\java\jdk64\bin\javac.exe srcdir="." destdir="."/>
  </target>

  <target name="Creating jar" depends="CompilingBuildversion">
      <jar jarfile="VersionBuild.jar"  basedir="."/>
 </target>    

 <target name="clean" depends="Creating jar">

 </target>

</project> 
```

当我运行那个 bach 文件时，我得到以下异常 -

```
Unable to locate tools.jar. Expected to find it in C:\Program Files\Java\jre6\li
b\tools.jar 
```

我可以在不安装和设置任何环境变量`ant`的情况下运行构建脚本吗？`Java`我可以`JAVA_HOME`在本地指定蚂蚁到`build.xml`这样`ant`可以从`C:\buildscript_required_files_v2`文件夹中获取参考吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:21:40.157

您的问题与 *_HOME 变量无关，但我首先回答您的问题。是的你可以。

只需将您的 PATH 变量配置为 (1) java.exe 所在的目录 (2) ant.bat 所在的目录。如果 *_HOME 定义了路径，则可以编写：

```
PATH=...;%JAVA_HOME%\bin;%ANT_HOME% 
```

由于您没有此类变量，因此您需要声明：

```
PATH=...;C:\Program Files\Java\bin;c:\ant\bin 
```

但实际上你的问题是你尝试使用 JRE 而 ant 需要 JDK。只需从 oracle 网站下载。`tools.jar`是 JDK 的一部分，但不是 JRE。

**更新**：您可以编写自己的 bat 文件，让 Windows 知道在哪里找到`.exe`文件`.bat`。只需在记事本文本文件中创建名为`my-ant.bat`And 的地方如下：

```
set JAVA_HOME=C:\buildscript_required_files_v2\java\jdk64
set PATH=%PATH%;%JAVA_HOME%\bin;C:\buildscript_required_files_v2\apache-ant-1.9.0\bin
rem ** Now we invoke ant **
ant 
```

显然，您希望使用命令行参数进行操作。这就是为什么而不是最后`ant`一行使用以下内容：

```
set my_ant_start=
:setupArgs
if ""%1""=="""" goto doneStart
set my_ant_start=%my_ant_start% %1
shift
goto setupArgs
:doneStart
rem ** Now we invoke ant **
ant %my_ant_start% 
```

# java - SpreadsheetAddRows 在中等大小的查询上失败

> ID：15928332
> 
> 赞同：1
> 
> 时间：2013-04-10T14:13:02.483
> 
> 标签：java, coldfusion, jvm, spreadsheet

编辑：我更改了名称，因为有一个类似的 SO 问题[How do I fix SpreadSheetAddRows function crashing when adding a large query?](https://stackoverflow.com/questions/13921754/how-do-i-fix-spreadsheetaddrows-function-crashing-when-adding-a-large-query) 那里描述了我的问题，所以我用更简洁的措辞...问题是我的查询结果的电子表格地址以我认为中等大小（1600 行，27 列）轰炸了整个服务器，但这听起来比他的 18,000 行少得多

我正在使用通过 Coldfusion 9.0.1 cfstoredproc 访问的 Oracle 存储过程，该过程在完成时会创建一个电子表格供用户下载

问题是大于 1200 行的结果集返回 500 内部服务器错误，700 行返回正常，所以我猜这是内存问题？

除了标准coldfusion外观中的500 Internal server error之外，我收到的唯一消息是小字体“超出gc开销限制”，并且仅在页面刷新时出现一次，它指的是底层Java JVM

我什至不知道如何诊断这个

这是 cfstoredproc 和电子表格 obj 的结尾

```
 <!--- variables assigned correctly above --->
 <cfprocresult name="RC1"> 
 </cfstoredproc>

 <cfset sObj = spreadsheetNew("reconcile","yes")>
 <cfset SpreadsheetAddRow(sObj, "Column_1, ... , Column27")>

 <cfset SpreadsheetFormatRow(sObj, {bold=TRUE, alignment="center"}, 1)>

 <cfset spreadsheetAddRows(sObj, RC1)>
    <cfheader name="content-disposition" value="attachment; filename=report_#Dateformat(NOW(),"MMDDYYYY")#.xlsx">
 <cfcontent type="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" variable="#spreadsheetReadBinary(sObj)#"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T19:05:05.337

我的答案在于冷融合和一个简单的事实：不要使用 SpreadsheetAddRows 或任何相关函数，如 SpreadsheetFormatRows

我对此的解决方案是执行查询，创建一个 xls 文件，使用标签 cfspreadsheet 写入新创建的 xls 文件，然后服务到浏览器，服务后删除

使用 SpreadsheetAddRows，运行时间从 1000+ 行上的崩溃服务器开始，700 行上的 5+分钟使用上面概述的方法 1-1.5 秒

如果您对更多代码感兴趣，我可以提供评论，我正在使用冷箱框架，所以不认为具体性只会有助于新的工作流程

# linux - 用户时间大于实时

> ID：15928334
> 
> 赞同：33
> 
> 时间：2013-04-10T14:13:08.747
> 
> 标签：linux, time

我以某种方式在我的程序上获得了以下时间戳。我知道如果涉及IO，实时可以大于用户时间和系统时间的总和，但是当单独的用户时间大于实时时，您如何解释这一点

```
real    0m8.512s
user    0m8.737s
sys     0m1.956s 
```

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2013-04-10T14:14:37.513

该程序可能在某些时候使用多个内核。用户时间是已经使用的内核的总和，因此例如使用 100% 的两个内核进行 1 秒可以获得 2 秒的用户时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:18:15.873

您的原始帖子的用户时间不大于实时。您的用户和系统时间加起来大于实时时间，但这是可能的，如[本条目所述](https://stackoverflow.com/questions/556405/what-do-real-user-and-sys-mean-in-the-output-of-time1)

# asp.net - ASP.NET 捆绑缓存 - 在哪里以及多长时间？

> ID：15928336
> 
> 赞同：3
> 
> 时间：2013-04-10T14:13:15.357
> 
> 标签：asp.net, bundling-and-minification

在使用新的捆绑和缩小功能对 ASP.NET 应用程序中的性能问题进行故障排除时，我注意到访问捆绑中使用的 javascript 文件的大量文件活动。

在对一个干净的 MVC 应用程序进行一些测试之后，我注意到在第一个请求之后，我希望它读取文件以构建捆绑包，但它在大约一分钟左右的时间里没有读取后续请求的文件. 然后它会再次读取它们，然后再安静一分钟左右。

显然这里有某种缓存，但是捆绑内容在哪里被缓存以及缓存了多长时间？我可以通过配置来控制那段时间吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-18T18:51:10.340

响应缓存在 HttpContext.Cache 中，通过调用 Insert 并针对用于生成包的文件的 VirtualPathProvider 设置 CacheDepedency。

```
/// <summary>
/// Stores the response for the bundle in the cache, also sets up cache depedencies for the virtual files
/// used for the response
/// </summary>
public void Put(BundleContext context, Bundle bundle, BundleResponse response) {
    List<string> paths = new List<string>();
    paths.AddRange(response.Files.Select(f => f.VirtualFile.VirtualPath));
    paths.AddRange(context.CacheDependencyDirectories);
    string cacheKey = bundle.GetCacheKey(context);
    CacheDependency dep = context.VirtualPathProvider.GetCacheDependency(context.BundleVirtualPath, paths, DateTime.UtcNow);
    context.HttpContext.Cache.Insert(cacheKey, response, dep);
    bundle.CacheKeys.Add(cacheKey);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T20:21:09.857

原来我使用的是整个 MVC4 堆栈的预发布版本，包括 System.Web.Optimization。升级到 RTM 解决了这个问题。

# php - 可以从具有特定信息的两个表中获取数据的 Mysql 查询

> ID：15928339
> 
> 赞同：1
> 
> 时间：2013-04-10T14:13:23.217
> 
> 标签：php, mysql

问题出在我的查询上。我需要从两个表中选择数据，table1 有一个字段类别，即类别 id，表 2 有字段 id，即类别 id。我需要按月选择数据，例如，如果我们选择 2 月，我将在选定期间计算该表中的所有内容并按类别 ID 分组。例如，在表 1 中选定的月份中，没有类别 id=3，十个从表 2 中取出它并使该类别值=0。如果在 table1 的 3 月期间是 id=3 的类别，则计算具有该类别 id 的所有值。

我做了一个选择，但它不正确。

```
$query = sprintf("SELECT count(*) as counter, category, (select category from categories where id=leads.category) as categoryname, clientcode , language                   
                  FROM leads   
                  WHERE synced > %s and synced < %s
                  GROUP BY category, clientcode 
               UNION ALL
                  SELECT 0 as counter, id as category, category as categoryname, 0 as clientcode, language  FROM categories WHERE id NOT IN(SELECT category FROM leads)
                  GROUP BY category, clientcode ",$starttime, $endtime ); 
```

感谢您的帮助，希望您了解我的需要。

很多文字...

**我解决了这个问题：**

```
$query = sprintf("SELECT count(*) as counter, category, (select category from categories where id=leads.category) as categoryname, clientcode , language                   
                      FROM leads   
                      WHERE synced > %s and synced < %s
                      GROUP BY category, clientcode 
                   UNION ALL
                      SELECT 0 as counter, id as category, category as categoryname, 0 as clientcode, language  FROM categories WHERE id NOT IN(SELECT category FROM leads WHERE synced > %s and synced < %s)
                      GROUP BY category, clientcode ",$starttime, $endtime, $starttime, $endtime ); 
```

# php - Jquery，php ajax 发布 500 内部服务器错误返回

> ID：15928340
> 
> 赞同：1
> 
> 时间：2013-04-10T14:13:30.577
> 
> 标签：php, javascript, ajax, jquery

我对 jquery ajax & php 有一些问题。我不擅长php，但我必须用php创建一个登录页面。

问题是，当我尝试从服务器获取一些信息时，我得到了值的服务器错误。

这是我的php代码（如果有人知道在服务器端创建登录的更好方法，请纠正我）：

```
<?php
//$link = mysql_connect('localhost', 'root', '') or die('A kapcsolódás nem sikerült: '+mysql_error());
$link = mysql_connect("127.0.0.1", "qm", "soR624gA") or die("Nem sikerült kapcsolódni az adatbázishoz!"+mysql_error()); 
mysql_query("SET NAMES UTF8");
mysql_select_db("qm", $link);
$uname = mysql_real_escape_string($_POST['name']);
$pass = mysql_real_escape_string($_POST['pass']);
$fetch = mysql_query("SELECT * FROM felhasznalok WHERE nev ='{$uname}' AND jelszo = Sha1('{$pass}')") or die(mysql_error());
if (mysql_num_rows($fetch) == 1) {
    $a = array();
    $['true'] = 'true';
    echo json_encode($a);
}else{
    $a = array();
    $['true'] = 'true';
    echo json_encode($a);
}
?> 
```

这是客户端登录的代码：

```
function handleLogin(){
var _url = preUrl + "login.php";
var name = $("#loginForm #name").val();
var pass = $("#loginForm #pass").val();

$.ajax({
    type: 'POST',
    url: _url,
    data: {name: name, pass: pass},
    dataType: 'jsonp',
    beforeSend: function(){
        if((!name) || (!pass)){
            notify('error','Kérlek tölts ki minden adatot!');
            return false;
        }else{
            $("#loginForm #loginBtn").prop("disabled", true);  
        }
    },
    success: function(data){
    if(data[0].true == 'true'){
            window.localStorage["username"] = name;
            window.localStorage["password"] = pass;  
            $.mobile.changePage("#wall",{transition:"slide", reverse:false});
        }else{
            $('#loginForm #name').val("");
            $('#loginForm #pass').val("");
            notify('error','Hibás adatok!');
        }
    },
    error: function(err){
    //átírni ha a cordovajs be lesz szúrva!!!
    alert('Hiba: '+err.message);
}
});

$("#loginForm #loginBtn").prop("disabled", false);
return false;
} 
```

我在不同的服务器上尝试过，但没有任何改变。我只得到错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:15:23.473

学习基本的 php:`$['true'] = 'true';`是一个明显的语法错误。这是您的服务器 500 错误的最可能原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:16:23.883

你打错了：

```
$['true'] = 'true'; 
```

应该是

```
$a['true'] = true; 
```

（注意 $ **a**）

另请注意，无论您的登录是否成功，它都将始终用**true**填充该“真实值” 。查看您的 Javascript，这不是您想要的。考虑在 else 语句中将其设置为**false**。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T14:20:57.433

添加这样的字符串以查看 php 脚本中的错误：

```
error_reporting(E_ALL);
ini_set('error_log', 'path_to_log_file');
ini_set('log_errors_max_len', 0);
ini_set('log_errors', true); 
```

# c++ - 使用 Microsoft VS2010 编译 Qwt

> ID：15928341
> 
> 赞同：2
> 
> 时间：2013-04-10T14:13:30.513
> 
> 标签：c++, visual-studio-2010, qwt

如何使用 Microsoft Visual Studio 编译 Qwt？

互联网上没有可用的信息，更糟糕的是，Qwt 的文档非常有限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T11:09:59.673

为什么不使用 QTCreator，它是一个下降 IDE ( [http://qt-project.org/wiki/Category:Tools::QtCreator](http://qt-project.org/wiki/Category:Tools::QtCreator) )

```
Open QtCreator.
Open project... -> C:\Program Files\Qwt\qwt.pro
Build and Run 
```

听起来怎么样？

此线程[http://social.microsoft.com/Forums/en-US/Offtopic/thread/22fa086f-1d37-4b95-8c06-f4441a73f8fa](http://social.microsoft.com/Forums/en-US/Offtopic/thread/22fa086f-1d37-4b95-8c06-f4441a73f8fa)在使用 VS 编译 qwt 时显示了一些问题，不确定它们是否仍然存在于最新的 VS版本与否。

# .net - 具有离线功能的 Access 表单和报告的 .NET 替代方案

> ID：15928343
> 
> 赞同：0
> 
> 时间：2013-04-10T14:13:39.907
> 
> 标签：.net, database, ms-access-2007

一家小公司目前有一个大约 15 年历史的用于商店、订单等的 MS Access 解决方案（为了比较，类似 Northwind），开发并升级到 Access 2007。现在原来的开发人员不再可用，并且也是完全不愿意放弃 Access 应用程序中所有自定义报告、表单等的源代码 (VBA)。这意味着我必须从头开始创建一个新的应用程序，并且只能从旧的 Access 中导入表和数据，而根本没有代码。

现在有 C、Java、(ASP).NET C#、JavaScript/HTML 背景 我真的不喜欢 VBA（请不要讨论，这只是我个人的看法），我真的很想使用更多的 .NET在新的 Access 项目中以中心开发代替 VBA。

我的第一个想法是使用 LightSwitch，但是该应用程序还需要在离线模式下工作。90% 的工作在 LAN 中完成，3-5 个客户端只使用文件服务器上的 .accdb 文件。有时，一两台笔记本出差需要复制当前的accdb，然后离线使用本地文件（无法连接到internet或intranet服务）。如果没有一些重大的黑客攻击，LightSwitch 确实不提供合适的离线模式。

到目前为止，我所做的所有研究都导致再次使用 Access，因为它确实适用于基本数据输入、表单和报告，但我很高兴听到合适的替代方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:49:39.103

您是否考虑过使用 WPF 或 Silverlight？

# html - 多行单词之间的相同空格

> ID：15928349
> 
> 赞同：0
> 
> 时间：2013-04-10T14:14:06.260
> 
> 标签：html, css

我想这个问题很容易解决，但我不知道要搜索什么..

我希望多行中的单词之间始终保持相同的空格。就像隐形桌子一样，但我想避免使用桌子。

例子：

```
01.01.1999       Text
02.01.1999       Text gdfgf
03.01.99         Text gfghdh 
```

你会怎么做？

PS：我需要一个适用于每一行的解决方案，因为数据是通过服务器端脚本每行传递的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:20:18.640

您可以使用`<pre>`标签，除非您在每一行中寻找特殊格式。在这种情况下，描述可能会列出`<dl>`另一个选项。

```
<pre>
01.01.1999       Text
02.01.1999       Text gdfgf
03.01.99         Text gfghdh
</pre> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:20:31.137

从技术上讲，您可以在要填充的文本周围放置一个跨度（具有相同的类），并为跨度提供相同的宽度，以便将其他文本推出。例如：

```
span{
width:100px;
display: block;
float:left;
} 
```

# git - git 工作流程，并将更改从 master 合并到分支

> ID：15928359
> 
> 赞同：4
> 
> 时间：2013-04-10T14:14:20.173
> 
> 标签：git, merge, branch, rebase

在与 SVN 作斗争后，我被告知我应该检查 GIT，因为分支对于我想要实现的工作流程来说是理想的。我一直在蒙混过关，认为我现在已经掌握了 GIT 的基础知识。

我们基本上有一个我们的一些客户使用的中心框架，我想要一个主干/主服务器并像往常一样使用分支，用于开发/尝试东西，但我也想为每个客户创建分支，所以我可以处理客户特定的代码更改。这些分支将永远是一个分支，并且永远不会最终合并回主干/主干。

我想要实现的主要目标是，我可以轻松地将所有更改从主干/主分支合并到各个客户端分支，并且我对是否需要合并或变基感到困惑。

**所以我的问题......**我应该总是为此使用rebase，如果是这样，为什么？（因为我想在每个分支中保留单独的提交？）

**编辑**所以我创建了一个 repo，在那个 repo 中我说 file.php`$x = 1`

*   我承诺要*掌握*
*   我创建了一个名为*client1的分支*
*   在*client1*我添加一个新文件并提交
*   在*client1*我改变 file.php 所以`$x = 2`

![git 日志预合并](https://i.stack.imgur.com/09ruS.png)

*   在*master*我对 file.php 进行了更改，但它是一个新行，并且 $x 仍然存在`$x = 1`
*   在*client1*中，我合并*master*并发生冲突`$x`

是因为我在 file.php 附近添加了一个新行，`$x`导致冲突吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:17:35.233

你应该合并。由于分支与 master 分歧，*重新*定位将在 master 上进行所有更改，并在分支顶部重新创建它们。这意味着对于您正在跟踪的每个客户端分支，master 上的每个提交都将被复制。

合并是语义上你正在做的事情。生成的提交图看起来会更好，并且 Git 将更容易执行合并，因为在每次合并之后，master 的历史将成为分支自己历史的一部分——Git 将只需要考虑 master 上的提交，因为最后一次合并，而不是重新考虑*master 上的每个提交*。

# android - 在 ListView 项目上方添加 TextView 以沿 ListView 项目滚动

> ID：15928362
> 
> 赞同：0
> 
> 时间：2013-04-10T14:14:29.287
> 
> 标签：android, android-listview, android-listfragment

我正在尝试在 ListFragment 中的 ListView 上方添加一个视图（我的片段扩展了一个 ListFragment）。

我正在使用适配器将项目放在 ListView 上。

我无法实现的是放置另一个视图（在这种情况下，一个 TextView 就可以了），它出现在列表项上方并在它们之间滚动。

我尝试将 Fragment 超类更改为 Fragment 并添加带有 TextView 和 ListView 的布局，问题是这样一来，TextView 不会滚动 ListView 元素。

我还尝试添加一个 ScrollView 并将 TextView 和 ListView 都放在其中，但这样一来，ListView 就不会滚动。

我也尝试手动将对象添加到ListFragment的ArrayAdapter（这是第一次尝试），然后相应地更改ListView Item Layout，但问题是它不会出现（我不知道为什么）。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T14:16:24.773

你需要使用`ListView.addHeaderView()`.

您不能在 XML 中执行此操作。

```
public View onCreateView(LayoutInflater li, ViewGroup vg, Bundle b)
{
    ViewGroup result = (ViewGroup) super.onCreateView(li, vg, b);
    TextView tv = new TextView(this);
    tv.setText("lalala");
    ListView lv = result.findViewById(android.R.id.list);
    lv.addHeaderView(tv);
    return result;
} 
```

# cmd - 在txtfile中间添加多行

> ID：15928364
> 
> 赞同：0
> 
> 时间：2013-04-10T14:14:34.797
> 
> 标签：cmd

好的，这里有一个文件`txt.txt`

```
line1
line2
add after this line
line4
etc
etc 
```

和另一个`addthis.txt` 包含多行的文件

我想在 addthis 之后添加所有这些行`add after this line`

我想知道的是我必须在[这](https://stackoverflow.com/questions/15918066/add-a-line-in-middle-of-txtfile-in-cmd)方面做出哪些改变才能完成它？？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:52:33.680

```
@ECHO OFF
SETLOCAL
SET /p info="enter info : "
:: read addafter line
(
FOR /f "delims=" %%i IN (poison1.txt) DO (
SET addafter=%%i
FOR /f "delims=" %%n IN (' findstr /n "^" txtfile.txt') DO (
SET line=%%n
SETLOCAL ENABLEDELAYEDEXPANSION
SET line=!line:*:=!
ECHO(!line!
IF "!line!"=="!addafter!" TYPE your_multiline_addition.txt
ENDLOCAL
)
)
)>newfile.txt

FC newfile.txt txtfile.txt

GOTO :eof 
```

只需要`TYPE your_multiline_addition.txt`而不是`ECHO(%input%`

（你也可以扔掉你的输入）

或者

你可以

```
TYPE "%info%" 
```

如果您想输入包含附加内容的文件的名称

* * *

测试数据和结果：

```
======== poison1.txt ===========
"A line !of! ] many < & >var*ied %poison ^ char;ac(ters) | like "," a\nd+so=on"
======== extra_lines.txt ===========
extra line one
extra line two
extra line three
======== txtfile.txt ===========
line one 
line two 
line three
A line !of! ] many < & >var*ied %poison ^ char;ac(ters) | like "," a\nd+so=on

line 5 was blank - this is line FIVE
"A line !of! ] many < & >var*ied %poison ^ char;ac(ters) | like "," a\nd+so=on"

line 8 was blank - this is line NINE
======== newfile.txt ===========
line one 
line two 
line three
A line !of! ] many < & >var*ied %poison ^ char;ac(ters) | like "," a\nd+so=on

line 5 was blank - this is line FIVE
"A line !of! ] many < & >var*ied %poison ^ char;ac(ters) | like "," a\nd+so=on"
extra line one
extra line two
extra line three

line 8 was blank - this is line NINE 
```

# zurb-foundation - 基础 4，清除未正确显示的灯箱拇指

> ID：15928366
> 
> 赞同：0
> 
> 时间：2013-04-10T14:14:46.643
> 
> 标签：zurb-foundation

[我在http://jobajoba.org](http://jobajoba.org)上发布了一个测试站点，其中显示了一些基础 4 元素。

我正在使用 vanilla out-of-boxfoundation 4 框架，但在列表中显示为项目符号项目的灯箱拇指有问题（它们应该在类似于页面上显示的“块网格”示例的行中）。

我不知道我做错了什么......请注意，页面上的所有其他内容似乎都是开箱即用的。

* * *

编辑时：

我忘记了这个问题，但是在我发布这个问题大约一个月后，Zurb 向我表示他们使用块状网格来创建效果。像这样的东西对我有用：

```
<div>
    <ul class="large-block-grid-4 small-block-grid-2" data-clearing>
        <li>
            <a href="http://foundation.zurb.com/docs/img/demos/demo1.jpg" class="th">
           <img src="http://foundation.zurb.com/docs/img/demos/demo1-th.jpg" data-caption="THIS IS CAPTION 1">
            </a>
        </li>
        <li>
          <a href="http://foundation.zurb.com/docs/img/demos/demo2.jpg" class="th">
            <img src="http://foundation.zurb.com/docs/img/demos/demo2-th.jpg" data-caption="THIS IS CAPTION 2">
          </a>
        </li>
        <li>
          <a href="http://foundation.zurb.com/docs/img/demos/demo3.jpg" class="th">
            <img src="http://foundation.zurb.com/docs/img/demos/demo3-th.jpg" data-caption="">
          </a>
        </li>
        <li>
          <a href="http://foundation.zurb.com/docs/img/demos/demo4.jpg" class="th">
            <img src="http://foundation.zurb.com/docs/img/demos/demo4-th.jpg" data-caption="">
          </a>
        </li>
      </ul>
    </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T18:59:46.463

Foundation's documentation examples uses a custom docs.css file: [http://foundation.zurb.com/docs/assets/docs.css](http://foundation.zurb.com/docs/assets/docs.css)

The styles for the Clearing Lightbox found under the heading /* Clearing Styles */ are exactly the same as those included in the vanilla download. However, the file also has an extra section specifically for the documentation example.

```
/* Clearing Docs */
.clearing-thumbs { list-style: none; }
.clearing-thumbs li { float: left; margin-right: 10px; } 
```

Adding these rules to your own css file should provide the layout you're looking for.

# jquery - 画布始终为空

> ID：15928372
> 
> 赞同：1
> 
> 时间：2013-04-10T14:15:05.723
> 
> 标签：jquery, canvas

我有一个反复出现的问题。每当我尝试访问我的画布元素的 2d 上下文（已经在我的 html 中）来绘制图像时，我都会收到一个控制台错误，告诉我无法绘制为 null。（不能调用null的方法'drawImage'）我正在第三次重写，现在在jquery中从JS开始。尝试在 html 中移动脚本。我不明白。确定 canvas 元素已经存在，因为 DOM 已经准备好了？

```
$(document).ready(function(){

function setup(){

var canvas = document.getElementById("canv1");
console.log(canvas.toString());
//this grabs hold of the canvas api
var canvcontext = canvas.getContext('2D');
console.log(canvcontext.toString());

burpy = new Image();
burpy.onload = canvcontext.drawImage(burpy,400,100);
burpy.src = 'burpy.png';
};

setup();
}); 
```

的HTML

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd"
    >
<html lang="en">
<head>
    <title>JAVASCRIPT TEST</title>
<link rel="stylesheet" href="styles.css" type="text/css">

<script src="jquery.js" type="text/javascript"></script>    
<script src="parse.js" type="text/javascript"></script>    
</head>
<meta http-equiv="Content-Script-Type" content="text/javascript">
<body id="body">
    Silly video games
    <br>    

<canvas id="canv1" width="200" height="100"
style="border:1px solid #000000;"></canvas>

<div id="canvwrap">

</div>
</body>
</html> 
```

请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:19:50.687

尝试`canvas.getContext('2d');`代替`canvas.getContext('2D');`

# joomla - 如何避免从 joomla SH404SEF 组件生成自定义 url？

> ID：15928374
> 
> 赞同：1
> 
> 时间：2013-04-10T14:15:06.583
> 
> 标签：joomla, duplicates

我一直在我的网站中使用 joomla Sh404sef 组件，我的问题是它为相同的内容生成两个 url，所以它产生了谷歌搜索引擎的问题，因为两个 url 都指向相同的内容。

这是从组件生成的 url 的示例

**网址：**

1.  [http://www.mysite.com/page.html](http://www.mysite.com/page.html) - 自动 URL
2.  [http://www.mysite.com/page/](http://www.mysite.com/page/) - 自定义 URL

当我从组件选项中清除 url 时，它从数据库中消除了非 html (.html) url，但是当我们发布新页面等时它会再次创建 url。

有没有人遇到过这个问题，可以提出建议吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T08:30:03.563

我想你会发现这是 Joomla 生成的 url 而不是 SH404SEF。它有生成额外内容的习惯，尤其是在您有博客样式视图等的地方。我解决这个问题的方法是 3 倍。

1.  创建一个可靠的菜单结构（现在在 Joomla2.5 上更难，其中别名是使用日期/时间创建的）。这应该解决大多数问题。确保您将不必要的级别设置为 noindex-nofollow
2.  使用 3rd 方工具用规范标签标记辅助 url。查看 ITPMetaPro，但还有许多其他可用。
3.  在执行第 1 步和第 2 步后，使用网站管理员工具从索引中删除 url。

# c# - ASP.NET 安全异常

> ID：15928387
> 
> 赞同：0
> 
> 时间：2013-04-10T14:15:41.917
> 
> 标签：c#, asp.net, iis

将（表单）发布到特定的 aspx 页面时，我得到了 SecurityException。当异常中没有堆栈跟踪或任何有用信息时，如何获得真正的错误？

* * *

**说明：**应用程序试图执行安全策略不允许的操作。要授予此应用程序所需的权限，请联系您的系统管理员或在配置文件中更改应用程序的信任级别。

**异常详细信息：** System.Security.SecurityException：请求失败。

**源错误：**

在执行当前 Web 请求期间生成了未处理的异常。可以使用下面的异常堆栈跟踪来识别有关异常起源和位置的信息。

**堆栈跟踪：**

[安全异常：请求失败。]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:03:49.100

尝试检查[SecurityException.Action](http://msdn.microsoft.com/en-us/library/system.security.securityexception.action.aspx)和[SecurityException.Method](http://msdn.microsoft.com/en-us/library/system.security.securityexception.method.aspx)。

# service-broker - 使用 Service Broker 向外部应用程序发出通知的陷阱

> ID：15928395
> 
> 赞同：0
> 
> 时间：2013-04-10T14:15:51.777
> 
> 标签：service-broker

[我有一个与这个问题](https://stackoverflow.com/questions/5308711/sql-service-broker-to-notify-external-app)大致相似的要求：

我需要集成两个第三方应用程序（即我无权访问任何一个应用程序的代码）。

*   App2 需要了解 App1 上的更新子集（用户对 App1 执行了“x” - 不感兴趣；用户执行了“y” - 在 App2 上调用了一系列操作）。至少一开始，交互很可能只是从 App1 到 App2 的通知。

*   App1 绑定到 SQL Server（不能假设 Enterprise）；App2 可能正在使用任何 d/b 平台，但可以配置为访问 SQL Server 表或日志或其他非 db 文件。

*   当两端都在线时，解决方案需要实时或接近；如果接收端（App2）出现故障，它需要在可用时赶上。

*   我们的客户范围从几百到几万，因此解决方案需要扩展（实际上可能意味着 App1 的多个实例通知 App2 的单个实例）。

*   解决方案需要仅限于配置，而不是代码。

经过一番挖掘，我想出了以下内容：

适当表上的 D/b 触发器 -> 服务代理 -> 激活中间数据库中的存储过程 -> 中间数据库中的表（App2 可以从中提取所需的数据）

但是，在相关问题（以及那里提到的问题）中有关于 Service Broker 对这种事情的缺点的黑暗暗示，但没有解释这些可能是什么。谁能指出这种解决方案的潜在问题（包括任何非常明显的问题，因为这不是我熟悉的技术而且我没有 DBA 背景 - 我花了两周时间才意识到我不能t 两端都有 SQL Express d/b）。

提前致谢...

编辑 2013 年 4 月 18 日添加：

我的 SSBDiagnose 错误为零，并且 SB 调用从测试过程成功执行，但没有任何东西到达另一端。如果我尝试查询 sys.transmission_queue 查询挂起。任何人都知道问题可能是什么？

# vba - VBA On.Time() 背景检查与常规用法相结合

> ID：15928397
> 
> 赞同：2
> 
> 时间：2013-04-10T14:15:59.787
> 
> 标签：vba, excel, excel-2007, excel-formula

我目前遇到 On.Time() 命令的问题。

Ontime 偏移值设置为 00:00:10 检查文件是否打开。（一种实时检查器）。

```
Sub MacroAutoRun1()

Dim RunTime1 As Date
RunTime1 = Now + TimeValue("00:10:00")
Application.OnTime RunTime1, "MacroAutoRun1"

If IsFileOpen("H:\Operations_Front_Office\Organisation Helpdesk & Renseignement\Test\1\Statistik.xlsm") Then
    Interface.Interface_Statistik_Open_Val.Caption = "File in use"
Else
    Interface.Interface_Statistik_Open_Val.Caption = "File currently not used"
End If

If IsFileOpen("H:\Operations_Front_Office\Organisation Helpdesk & Renseignement\Test\1\Timesheet.xlsm") Then
    Interface.Interface_Timesheet_Open_Val.Caption = "File in use"
Else
    Interface.Interface_Timesheet_Open_Val.Caption = "File currently not used"
End If

If IsFileOpen("H:\Operations_Front_Office\Organisation Helpdesk & Renseignement\Test\1\Datasheet_Roulement_Final_Original.xlsm") Then
    Interface.Interface_Roulement_Open_Val.Caption = "File in use"
Else
    Interface.Interface_Roulement_Open_Val.Caption = "File currently not used"
End If 
```

IsFileOpen 是一个创建的函数，如下所示：

```
Function IsFileOpen(FileName As String)
    Dim iFilenum As Long
    Dim iErr As Long

    On Error Resume Next
    iFilenum = FreeFile()
    Open FileName For Input Lock Read As #iFilenum
    Close iFilenum
    iErr = Err
    On Error GoTo 0

    Select Case iErr
    Case 0:    IsFileOpen = False
    Case 70:   IsFileOpen = True
    Case Else: Error iErr
    End Select
End Function 
```

我现在的问题是，在进行检查时，其他程序似乎无法完成，例如：

```
If DateDfrHDSKMALADIE = 0 Then
            Set FoundHDSKMaladie = Sheets("Congé + Maladie").Columns(1).Find(What:=Maladie1HDSKtxt, After:=Sheets("Congé + Maladie").Cells(1, 1))
            X = FoundHDSKMaladie.Row
            Y = FoundHDSKMaladie.Column + HDSKMALADIENumb
        Sheets("Congé + Maladie").Cells(X, Y) = "M" 
```

然后 FoundHDSKMaladie 返回“Nothing”，在我看来，甚至没有应用 Find 方法。

你听说过这样的问题吗？我想在后台保持搜索打开（最好），如果这不起作用，我将在离开页面时恢复停止计时器，并在用户返回页面时重新激活它。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-16T23:14:26.387

我不确定您使用的方法为什么会中断其他过程，但我过去使用工作簿存在函数使用过类似的东西。由于您要检查的文件似乎是工作簿，我建议检查使用此函数而不是 IsFileOpen 函数是否可以解决问题。我相信我在一本 excel/vba 傻瓜书中看到了这种方法。

例如，函数的字符串是“Statistik.xlsm”。

```
Function WorkbookExists(ByVal BookToCheck As String) As Boolean

Dim Path As String

On Error GoTo Find_Err
Path = Workbooks(BookToCheck).Saved
On Error GoTo 0
WorkbookExists = True
Exit Function

Find_Err:

WorkbookExists = False
End Function 
```

# apache - apache mod_rewrite 错误：URI [...] 的 [...] 的不完整重定向目标已修改为 [...]

> ID：15928398
> 
> 赞同：2
> 
> 时间：2013-04-10T14:16:00.570
> 
> 标签：apache, mod-rewrite

我有一个 .htaccess 文件中具有以下重写规则的 php 应用程序：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -s [OR]
RewriteCond %{REQUEST_FILENAME} -l [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^.*$ - [NC,L]
RewriteRule ^.*$ lrs.php [NC,L] 
```

该文件位于我的应用程序的“XAPI”文件夹中。这样，我重写请求`/XAPI/something/ to be handled by the file XAPI/lrs.php`

这在运行各种版本的 Apache2 的多台服务器上运行良好。但是，我已将应用程序上传到另一台服务器（运行 apache 2.2.15 的 Centos6）并且重定向不起作用。在错误日志中，我收到以下消息：

`'/XAPI/lrs.php'`URI的重定向目标不完整，`'/path/to/XAPI/lrs.php'`修改为“ [http://www.mysite.com/XAPI/lrs.php](http://www.mysite.com/XAPI/lrs.php) ”

有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-22T01:38:01.867

它是一个错误，现在已修复...

[https://bz.apache.org/bugzilla/show_bug.cgi?id=44020](https://bz.apache.org/bugzilla/show_bug.cgi?id=44020)

还请看... [https://enc.com.au/2011/03/04/apache-and-incomplete-redirection-messages/](https://enc.com.au/2011/03/04/apache-and-incomplete-redirection-messages/)

# paypal - 创建沙盒贝宝专业帐户

> ID：15928403
> 
> 赞同：0
> 
> 时间：2013-04-10T14:16:16.577
> 
> 标签：paypal, paypal-sandbox

我在沙盒中创建测试帐户时遇到了一些困难。我发现了一些类似的主题，但我仍然不明白该怎么做。例如这个“[如何使用沙盒中选择的 PayPal Payments Pro（使用 Pro 将您自己代表为商家）选项创建测试帐户？](https://stackoverflow.com/questions/14728677/how-to-create-test-account-with-paypal-payments-pro-use-to-represent-yourself-a) ”

它说登录开发者网站，好的，完成了。然后“单击链接预配置”。什么链接？我找不到它。它只是在该页面和我搜索的任何其他页面上不存在。

为什么我无法使用沙盒中的卖家帐户登录[https://www.sandbox.paypal.com](https://www.sandbox.paypal.com)，但可以使用沙盒中的客户帐户（个人）登录。

注册沙盒帐户后是否需要申请 Paypal Payments Pro，如果需要，为什么会收到“由于内部错误导致服务未响应。请致电 +1-888-883-9770 联系客户服务。” . 另外我必须使用什么社会安全号码（我只想检查与贝宝的集成，我没有任何银行账户或社会安全号码。我什至不是来自美国）？

我需要接受许可协议吗？我在哪里可以找到它？根据此文档[https://ppmts.custhelp.com/app/answers/detail/a_id/642/kw/10501](https://ppmts.custhelp.com/app/answers/detail/a_id/642/kw/10501)，它位于“商家服务”选项卡内的某处。经过大约一个小时的搜索，我在旧界面中找到了它。当我点击它时，我被重定向到“我的帐户”。

请帮帮我。我已经厌倦了那个笨拙、迟钝且设计糟糕的贝宝网站。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:52:16.567

登录 developer.paypal.com 后，单击“应用程序”，然后单击“沙盒帐户”。您会在页面顶部看到一个蓝色按钮，上面写着“创建帐户”。创建企业帐户后，您将自动注册 PayPal Payments Pro。

然后，您可以通过单击 developer.paypal.com 中的“个人资料”链接来获取您的 API 凭据。

编辑：

使用有关创建测试帐户的其他信息更新答案。

[https://developer.paypal.com/webapps/developer/docs/classic/lifecycle/ug_sandbox/](https://developer.paypal.com/webapps/developer/docs/classic/lifecycle/ug_sandbox/)

# android - 我们可以存储我们的 Sql lite 数据库-phonegap android 吗？

> ID：15928408
> 
> 赞同：0
> 
> 时间：2013-04-10T14:16:25.853
> 
> 标签：android, database, sqlite, cordova

我们可以将我们的 Sql lite 数据库存储在 Phonegap 项目的 assets 文件夹中吗？

我已经实现了一个 android 项目。我想为 Phonegap 项目使用相同的数据库。

我可以用吗？否则有什么替代方法，它的程序是什么？

我已经搜索了过去 2 天。我没有得到任何正确的答案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:18:13.967

您可以将 sqlite db 包含在 assets 文件夹中，但在首次运行应用程序时，您需要将其移动到正确的目录，以便 webview 可以打开数据库。有一个插件和说明如何做到这一点：

[http://gauravstomar.blogspot.ca/2011/08/prepopulate-sqlite-in-phonegap.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:+GauravSTomarBootstrappingIntelligence+(Gaurav+S+Tomar+:+Bootstrapping+Intelligence)](http://gauravstomar.blogspot.ca/2011/08/prepopulate-sqlite-in-phonegap.html?utm_source=feedburner&utm_medium=feed&utm_campaign=Feed:+GauravSTomarBootstrappingIntelligence+(Gaurav+S+Tomar+:+Bootstrapping+Intelligence))

或者，您可以将数据库包含为 .sql 文件，并在您第一次启动应用程序时执行该文件：

[http://simonmacdonald.blogspot.ca/2011/12/on-fourth-day-of-phonegapping-creating.html](http://simonmacdonald.blogspot.ca/2011/12/on-fourth-day-of-phonegapping-creating.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:43:16.847

我当前的 MyPhoneGapActivity 看起来像这样

```
package com.rkadukar.database;

import org.apache.cordova.DroidGap;
import android.os.Bundle;

public class MyPhoneGapActivity extends DroidGap {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
    }
} 
```

我在哪里添加代码以将 db 文件从 Assets 文件夹复制到我的应用程序的 data/data/... 文件夹。

根据我的理解，一旦数据库被复制，我就可以删除文件并使用本机 PhoneGap 存储 API 来读取我导入的数据库，但在这种情况下，我们为什么需要这个插件[https://github.com/brodyspark/PhoneGap-SQLitePlugin -安卓](https://github.com/brodyspark/PhoneGap-SQLitePlugin-Android)

有人可以详细说明所需的步骤吗

1.  将数据库从 assets 文件夹复制到 data/data/.. 文件夹
2.  读取复制的数据库并对其执行操作。

# jquery - jQuery 手风琴中的可见性

> ID：15928411
> 
> 赞同：0
> 
> 时间：2013-04-10T14:16:33.070
> 
> 标签：jquery, css, html, function, accordion

我正在创建自己的 Jquery 手风琴，它几乎完成了。但是，我想知道是否可以让手风琴开始关闭而不`$(".wrap-faq li p").slideUp();`在函数之前声明 a ，因为当它加载时它会向上滑动。

我想在手风琴已经关闭的情况下收取文件费用。我已经尝试（在 CSS 中）使用`display:none;`and `visibility: hidden;`，但无济于事。这是我的 Jquery 代码：

```
$(".wrap-faq  a").on("click", accordion);
$(".wrap-faq  li  p").slideUp();

function accordion() { 
    if ($(this).attr("class") != "active") {
        $(".wrap-faq  li  p").slideUp();
        $(this).next().slideToggle();
        $(".wrap-faq a").removeClass("active");
        $(this).addClass("active");
    }
} 
```

我也会给你[这个](http://jsfiddle.net/xtatanx/3zvgY/)jsFiddle 链接。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:25:25.433

利用：

```
$(".wrap-faq  li  p").hide(); 
```

而不是 slideUp()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:20:51.257

将 display none 添加到`<p>`标签似乎可以完成这项工作。这是你要找的吗？

```
.wrap-faq li p {display:none;} 
```

[jsFiddle](http://jsfiddle.net/3zvgY/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:21:40.623

这是你要找的吗？

```
if (!$(this).hasClass("active")) { 
```

抱歉，这只是修复，重新打开打开的手风琴错误...

# bash - 如何用sed计算跨越多行的记录中的点？

> ID：15928424
> 
> 赞同：0
> 
> 时间：2013-04-10T14:16:49.933
> 
> 标签：bash, sed, awk

假设我有一个文本文件，其中包含来自不同来源的记录。该文件如下所示：

```
1000 Once upon a time, happy end.
1001 Tornado in NY city, the statue was finally found.
1002 I bought her an iphone 
yes 
for $1000\. And then

happy end.
1003 How many times 
have I seen it?
not many. Actually.
1004 5 Cars. 2 Toys. 3 Birds. 
```

每行都以行号开头，`\n`例如 {1000...2000}。行号用制表符与文本分开`\t`。

那么如何计算`"."`with **sed** in one的出现`record`呢？

**sed**可以替换除模式中给出的字符之外的所有字符而不将它们分组`[^...]`吗？

输出应如下所示：

```
1000 1
1001 1
1002 2
1003 2
1004 3 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:19:15.350

这是一种方法：

```
$ awk -v r=1000 '{print r++,split($0,a,".")-1}' RS="\n[0-9]+\t" file 
1000 1
1001 1
1002 2
1003 2
1004 3 
```

# regex - 正则表达式以匹配特定格式的数字，但给定数字除外

> ID：15928427
> 
> 赞同：0
> 
> 时间：2013-04-10T14:17:10.370
> 
> 标签：regex, regex-negation

我们即将发送一些原始包含出生日期且需要匿名的敏感数据。数据文件是通过一个应该匿名数据的程序运行的，但我想仔细检查它是否真的有效。

匿名器（如果有效）将 XML 文件中的所有 PatientID 文件更改为 19121212-1212。（数据的接收者不需要知道两个样本是否来自同一个人，因此不需要编码 ID，所有样本上的相同伪造 ID 就可以了。）

所以问题是：如何扩展正则表达式`PatientID="\d{8}-\d{4}"`，使其匹配所有 PatientID 字段，除了 when `PatientID="19121212-1212"`？（如果匿名器工作，这将给我不匹配。）

我已经尝试从这些与我的问题相切的问题中提出一些[问题](https://stackoverflow.com/questions/1781554/regular-expression-matching-everything-except-a-given-regular-expression) [，](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)但我无法从中得出解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:17:10.370

就在我要点击发送时，我想到了一个主意，它奏效了。我没有发送问题，而是将其与解决方案一起发布。

```
PatientID="((?!19121212-1212).){13}" 
```

# wordpress - 在 wordpress 侧边栏中添加“添加”区域的最佳做法是什么？

> ID：15928432
> 
> 赞同：1
> 
> 时间：2013-04-10T14:17:18.453
> 
> 标签：wordpress, wordpress-theming

我目前正在开发一个 WP 主题，我想将其作为免费主题发布。它应该在主题侧边栏的最顶部包括一个区域，该区域将由 4 个空间组成，人们可以在其中来在网站上做广告。

[http://imageshack.us/photo/my-images/195/83818763.jpg](http://imageshack.us/photo/my-images/195/83818763.jpg)

你对如何做到这一点有什么建议？您是否有任何在线教程或有关将此类功能添加到 WP 主题的内容？在最好的情况下，它应该完全通过管理后端运行（管理员可以设置添加的图像，该图像将在哪个添加点保留多长时间）等。

我只需要一般准则，而不是完整的代码:) 只需指导我应该如何完成。先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:27:10.350

我建议使用有用的[横幅管理器插件](http://wordpress.org/extend/plugins/useful-banner-manager/installation/)来管理您的广告。安装后，您将获得一个小部件，您可以将其配置为您的参考。还有其他选择。

# maven - Ant 构建作为多模块 Maven 构建的一部分失败

> ID：15928437
> 
> 赞同：1
> 
> 时间：2013-04-10T14:17:28.050
> 
> 标签：maven, ant, maven-antrun-plugin

我有一个多模块 Maven 项目。在父级上构建 POM 应该构建所有子模块，最后构建一个准备可执行 jar 的子模块。最后一个模块包括一个运行可执行文件的 ant 脚本，当从父级运行时将不起作用，但在子级的 POM 单独运行时将起作用。我认为问题是一个 Maven 类路径。

POM 的 antrun 部分是：

```
<plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-antrun-plugin</artifactId>
            <executions>
                <!-- Clean execution is here-->

                <execution>
                    <id>compile</id>
                    <phase>package</phase>
                    <configuration>
                        <target>
                            <!-- I have tried commenting out the following 4 lines but this does not work.-->
                            <property name="compile_classpath" refid="maven.compile.classpath" />
                            <property name="runtime_classpath" refid="maven.runtime.classpath" />
                            <property name="test_classpath" refid="maven.test.classpath" />
                            <property name="plugin_classpath" refid="maven.plugin.classpath" />
                            <property name="buildConfig" value="${buildConfig}" />
                            <property name="buildversion" value="${currentVersion}" />
                            <ant antfile="${basedir}/ANT FILE NAME.xml">
                                <target name="all" />
                            </ant>
                        </target>
                    </configuration>
                    <goals>
                        <goal>run</goal>
                    </goals>
                </execution>
            </executions>
        </plugin> 
```

Ant 脚本包含以下行：

```
<target name="generate.scripts" depends="" description="generate scripts">
    <mkdir dir="${distdir.product}" />
    <mkdir dir="${distdir.product}/bin" />
    <exec executable="bin/start.bat" dir="." failonerror="true">
        <arg line="-server -createscript ${distdir.product}/bin/startserver.bat" />
    </exec> 
```

并失败：

```
Cannot run program "bin\start.bat" (in directory "CORRECT_DIRECTORY"): CreateProcess error=2, The system cannot find the file specified 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:17:57.813

尝试使用以下 exec 版本：

```
<exec executable="cmd" dir="${basedir}/bin" failonerror="true">
    <arg value="/c" />
    <arg value="start.bat" />
    <arg value="-server" />
    <arg value="-createscript" />
    <arg value="${distdir.product}/bin/startserver.bat" />
</exec> 
```

# c# - 使用下拉列表绑定值时出错

> ID：15928438
> 
> 赞同：1
> 
> 时间：2013-04-10T14:17:29.267
> 
> 标签：c#, asp.net, .net, database, ado.net

创建了一个下拉列表。我的数据库表包含 2 个表

```
Studentregtable :  ID int,FullName varchar,UserName varchar,department varchar.
facultyregtable1 : ID int,FacultyName varchar,DeptName varchar. 
```

我的 aspx 代码：

```
<asp:DropDownList ID="DropDownList1" runat="server" Height="20px" Width="147px">
            </asp:DropDownList> 
```

我的 C# 代码：

```
public partial class studentfeedbackarea : System.Web.UI.Page
{
    SqlConnection con = new SqlConnection(ConfigurationManager.ConnectionStrings["Database1ConnectionString1"].ConnectionString);
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            con.Open();

           SqlCommand cmd = new SqlCommand("select FacultyName from facultyregtable1 where DeptName=(select department from Studentregtable where UserName=' " + Session["new"].ToString() + " ')", con);
           SqlDataAdapter da = new SqlDataAdapter(cmd);
           DataTable dt = new DataTable();
           da.Fill(dt);
           con.Close();
           DropDownList1.DataSource = dt;
           DropDownList1.DataTextField = "FacultyName";
           DropDownList1.DataValueField = "FacultyName";
           DropDownList1.DataBind();
        }
    } 
```

下拉列表中未显示任何值。为什么？我的代码中有任何错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:35:09.127

我在 Code 上没有发现任何问题.. 但在 Query 上发现了一些问题..

确认您的子查询仅返回一个值...

如果它返回多个值，则 在您的查询中更改`DeptName =(`为 `DeptName in(`

我也注意到这里有一个空格 ->`' " + Session["new"].ToString() + " '`删除那个空格`'" + Session["new"].ToString() + "'`

**更正的查询：**

```
select FacultyName from facultyregtable1 where DeptName in(select department from
Studentregtable where UserName='" + Session["new"].ToString() + "')" 
```

也许它会帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:56:12.453

在 aspx 页面中试试这个............

```
<asp:DropDownList ID="DropDownList1" runat="server" datatextfield="FacultyName" datavaluefield="FacultyName" Height="20px" Width="147px">
            </asp:DropDownList> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:18:15.307

```
select FacultyName from facultyregtable1 where DeptName=(select department from Studentregtable where UserName=' " + Session["new"].ToString() + " ' 
```

在上面的查询中，我认为您在 DeptName='//它应该是返回一个值的子查询附近缺少引号'

# solr - Solr 排序无法正常工作

> ID：15928443
> 
> 赞同：1
> 
> 时间：2013-04-10T14:17:47.563
> 
> 标签：solr, lucene, solr4

我正在使用此示例查询按类别对结果集进行分组：

```
q=test&group=true&group.field=category 
```

这按预期工作，我得到了这个示例响应：

```
"response": 
{"numFound":1,"start":0,"docs":[ 
 { 
  ... 
} 
{"numFound":6,"start":0,"docs":[ 
 { 
  ... 
} 
{"numFound":3,"start":0,"docs":[ 
 { 
  ... 
} 
```

但是，我找不到按每个组具有的文档数（“numFound 字段”）指定组排序顺序的方法。我认为“排序”参数与它有关，但我不知道如何使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:02:53.277

看起来很傻，但可能没有简单的方法。一个[solr-user 邮件列表线程](http://www.mail-archive.com/solr-user@lucene.apache.org/msg56366.html)说不。我发现另一个线程可以使用[本地参数和嵌套查询](http://grokbase.com/t/lucene/solr-user/13270kxp1x/sorting-grouped-results-by-numfound)。基本上，似乎没有简单的方法可以做到这一点。

如果您有很多组，一种可能的方法是在其中执行一个查询，`group.limit=0`在应用程序中进行排序，然后使用`fq`参数仅过滤这些值。

[这个页面](http://wiki.apache.org/solr/FieldCollapsing)似乎是所有分组功能的一个很好的一般参考。

# python - 尝试在 Object 中模拟方法会给出“AttributeError”

> ID：15928447
> 
> 赞同：4
> 
> 时间：2013-04-10T14:17:57.440
> 
> 标签：python, unit-testing, python-2.7, mocking

我正在尝试在已经存在的类中测试一个方法。在类的方法`inputStreamThread`中调用该方法。`Foo.crawler.crawlerapp.CrawlerApp``addUrl`

`inputStreamThread`从标准输入读取然后调用`addUrl`

`addUrl`也在`CrawlerApp`课堂上

我希望能够`assert_called_with`在模拟上使用`addUrl`来检查`inputStreamThread`是否在做正确的事情并打电话`addUrl`

问题是我无法为 inside 的模拟获得正确的`addUrl`语法`CrawlerApp`

我直接从模拟文档中使用了一个示例，但得到如下所示的错误

如您所见，我也在模拟标准输入以便能够在其上显示测试数据

我的问题是，我使用什么代码来执行这种测试而不显示错误？

```
import Foo.crawler.crawlerapp
from unittest import TestCase
from mock import patch, Mock
from mephistopheles.messageformat import EventDataFrame
from mephistopheles.messageformat.types import adservers as pbufs
import time
import sys

class testDeserial(TestCase):

    def generate_dummy_auction_event(self,url):
        adunitinfo = pbufs.AdUnitInfo(index_on_page=0, url=url)
        geoloc = pbufs.GeoLocation(country="DE", region="low")
        userinfo = pbufs.UserInfo(user_hash=1,
                                  ip_octets=1,
                                  geolocation=geoloc,
                                  language="en")
        auctioninfo = pbufs.AuctionInfo(timestamp=int(time.time()),
                                        user=userinfo,
                                        ad_unit=adunitinfo)
        return auctioninfo

    def setUp(self):
        pass

    @patch.object(Foo.crawler.crawlerapp.CrawlerApp,'addUrl')
    def test_check_url(self, MaddUrl):
        url_a = "http://audaxing.wordpress.com"
        dummy_event = self.generate_dummy_auction_event(url_a)
        with patch("sys.stdin") as mock_stdin:
            mock_stdin.read.return_value = dummy_event
            ca._running = True
            input_thread = threading.Thread(target=self.inputStreamThread)
            input_thread.start()
            time.sleep(0.5)
            ca._running = False
        MaddUrl.assert_called_with(url_a) 
```

测试运行输出....

```
$ bin/tests --tests-pattern=test_deserialize
Test-module import failures:

Module: Foo.crawler.tests.test_deserialize

Traceback (most recent call last):
  File "/home/jamie/svn/Foo/crawler.buildout/trunk/src/Foo.crawler/Foo/crawler/tests/test_deserialize.py", line 11, in <module>
    class testDeserial(TestCase):
  File "/home/jamie/svn/Foo/crawler.buildout/trunk/src/Foo.crawler/Foo/crawler/tests/test_deserialize.py", line 28, in testDeserial
    @patch.object(Foo.crawler.crawlerapp.CrawlerApp,'addUrl')
AttributeError: 'function' object has no attribute 'object'

Test-modules with import problems:
  Foo.crawler.tests.test_deserialize
Total: 0 tests, 0 failures, 0 errors in 0.000 seconds. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:15:41.987

我想出了最后该怎么做。在打字机上有点猴子，不知道为什么我必须使用“patch”而不是“patch.object”，或者为什么我需要先制作 Mock() 对象。我只是从文档中的示例中尝试了所有可能的模式

无论如何，这对我有用

```
def test_check_url(self):
    url_a = "http://audaxing.wordpress.com"
    dummy_event = self.generate_dummy_auction_event(url_a)
    with patch("sys.stdin") as mock_stdin:
        MaddUrl = Mock()
        Minit = Mock(return_value=None)
        with patch('Foo.crawler.crawlerapp.CrawlerApp.__init__', Minit, create=True):
            with patch('Foo.crawler.crawlerapp.CrawlerApp.addUrl', MaddUrl, create=True):

                ca = Foo.crawler.crawlerapp.CrawlerApp(1)
                mock_stdin.read.return_value = EventDataFrame(1, "TOKEN1", dummy_event.SerializeToString()).to_bytes()
                ca._running = True
                input_thread = threading.Thread(target=ca.inputStreamThread)
                input_thread.start()
                time.sleep(0.5)
                ca._running = False
    MaddUrl.assert_called_with(url_a) 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T14:48:35.943

我会说以下内容：

```
@patch.object... #1
def test_check... #2 
```

相当于

```
def test_check... #2

test_check.object = ... #1 
```

并且不能为功能对象分配新属性。

# excel - excel中的自定义图表，x值始终为100%，y为小于或大于，显示百分比

> ID：15928451
> 
> 赞同：0
> 
> 时间：2013-04-10T14:18:11.397
> 
> 标签：excel, graph, vba

我制作了一个大宏，为动态数据生成图表。但是，我的一张图表将显示实际小时数与估计值。我使用的是 100% 堆叠，但只有当 est < 实际时，问题才是 est vs act 才有可能。我想将实际设置为 100%，然后将第二个数据系列估计为低于或高于 100% 以显示 80% 或 120% 等。

非常感谢 ：）！

ActiveSheet.ChartObjects("每月").Delete

```
For Each ws In Worksheets
 If ws.Name <> "Summary" And ws.Name <> "Calenders" And ws.Name <> "Front Page" And ws.Name <> "Arc" Then
        ws.Range("F129").Copy
        ActiveSheet.Range("BH65536").End(xlUp).Offset(1, 0).PasteSpecial xlPasteValues
    End If
Next ws

 For Each ws In Worksheets
 If ws.Name <> "Summary" And ws.Name <> "Calenders" And ws.Name <> "Front Page" And ws.Name <> "Arc" Then
        ws.Range("G128").Copy
        ActiveSheet.Range("BI65536").End(xlUp).Offset(1, 0).PasteSpecial xlPasteValues
    End If
Next ws

  Range("BJ2").Select
ActiveCell.FormulaR1C1 = "=RC[-1]-RC[-2]"
Range("BJ2").Select
Selection.AutoFill Destination:=Range("BJ2:BJ75"), Type:=xlFillDefault
Range("BJ2:BJ75").Select

ActiveSheet.Shapes.AddChart.Select
ActiveChart.ChartType = xlColumnStacked100

ActiveChart.Parent.Name = "Monthly"

ActiveChart.SeriesCollection.NewSeries
ActiveChart.SeriesCollection(1).Values = "=Summary!$BH$2:$BH$53"
ActiveChart.SeriesCollection(1).Name = "=""Estimated""" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:48:29.977

也许堆积条形图不是解决此问题的最佳图表类型。

为什么不使用简单的柱形图绘制偏差 (+/-)，如下所示：

![柱形图显示与预算的偏差](https://i.stack.imgur.com/le5WI.jpg)

我的研究书呆子建议仅对有序数据类型使用堆叠条/列:) 例如，“< 1 周”、“1-2 周”、“3+ 周”等类别。

**或者**使用简单的堆叠条/列（即，不是堆叠的 100%），它应该允许您显示 120% 之类的值。

# asp.net - ASP.NET 4.5 成员资格和 oAuth 表

> ID：15928453
> 
> 赞同：1
> 
> 时间：2013-04-10T14:18:15.097
> 
> 标签：asp.net, asp.net-membership, asp.net-4.5

有谁知道我如何将 ASP.NET 成员资格上的 oAuth 部分移到我的 MS SQL DB 中，而不是使用它似乎默认执行的 localdb？

我的用户都设置在我的 SQL 数据库中，但是 UsersOpenAuthAccounts 和 UsersOpenAuthData 存储在 localdb 中。

我使用的是 ASP.NET 4.5，而不是 MVC 框架……只是以防万一。

更新：当我将连接字符串更改为“DefaultConnection”时，会在我的 DB 中创建 oAuth“表。我想这可以。但是如何将默认连接更改为不同的东西？

艾伦

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-30T11:42:30.557

使用 OpenAuth.ConnectionString 指定要使用的连接字符串的名称。我在 app_start 文件夹中的 RegisterOpenAuth 方法 AuthConfig.cs 文件中执行此操作。

# google-maps - 链接到 Google Drive 上的 kml/kmz 文件

> ID：15928455
> 
> 赞同：5
> 
> 时间：2013-04-10T14:18:18.503
> 
> 标签：google-maps, overlay, kml, google-drive-api, permalinks

我已将 kml 和 kmz 文件保存在旧 Google 协作平台的文件柜中。我将永久链接复制到这些文件并将其粘贴到谷歌地图的搜索框中以覆盖地标。

我已经在新的 Google Drive 的文件夹中保存了一个测试 kml 文件，但我不知道如何获取可以粘贴到 Google Maps 中的永久链接。我找到了这个链接[https://webapps.stackexchange.com/questions/26371/how-do-i-share-a-permalink-from-google-drive](https://webapps.stackexchange.com/questions/26371/how-do-i-share-a-permalink-from-google-drive)并用它来创建这个永久链接[https://docs.google。 com/file/d/0B9sBXp66G86xWmlRbkZiYlRNdmc/edit?usp=sharing](https://docs.google.com/file/d/0B9sBXp66G86xWmlRbkZiYlRNdmc/edit?usp=sharing) 但 Google 地图无法将其识别为有效的 kml 文件。我需要更改网址吗？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-12T13:59:39.900

1.  将您的根文件夹设置为公开共享。右键单击文件夹 > 共享 > 在网络上公开
2.  上传目录中的 .html 文件 > 打开它 > 预览
3.  那是你的 html 的 url，你可以找到你想要的 kmz 文件的路径。

例如，这是我的 html 文件

[https://googledrive.com/host/0B1YPetHU8aMQMmtrcFB4eTMzd1E/kml_overlay.html](https://googledrive.com/host/0B1YPetHU8aMQMmtrcFB4eTMzd1E/kml_overlay.html)

我的 KMZ 文件网址是

[https://googledrive.com/host/0B1YPetHU8aMQMmtrcFB4eTMzd1E/kmz/river.kmz](https://googledrive.com/host/0B1YPetHU8aMQMmtrcFB4eTMzd1E/kmz/river.kmz)

如果您想查看文件列表，请访问根级别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-13T14:16:43.613

1.  首先检查 KML 文件是否对 Google 地图 API 有效（尝试在网页版的谷歌驱动器上打开它——如果有效的网页浏览器显示带有 kml 层的谷歌地图）。

2.  存储的文件地址必须有这种形式： [https](https://docs.google.com/host) ://docs.google.com/host .......（您可以在文件详细信息/托管处找到谷歌驱动器的网页版链接）链接，具有以下形式：[https://drive.google.com/file](https://drive.google.com/file) ......将不起作用。（您可以在文件共享处找到网页版 google drive 的链接

OR 简短地说。链接末尾必须有文件名！！

1.  工作示例可以从以下位置下载：developers.google.com/maps/documentation/javascript/examples/layer-kml

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-21T06:13:35.380

如果它是具有特定名称的**kml**格式，则在将其下载到您的 pc/笔记本电脑后使用合适的名称重命名，其中不应**包含特殊字符或空格**。例如。如果名称是“ **walking 19 02 14.kml** ”，则将其重命名为*walking190214.kml*。如果它是 kmz 文件（就像 zip 一样），例如*“walking 19 02 14.kmz”，*则首先提取其中的**“doc.kml”**文件并用上述名称重命名“doc”。如果您在提取 kmz 文件时遇到困难，请将 kmz 扩展名重命名为 zip 扩展名，即**abcd.kmz**应重命名为**abcd.zip**，然后使用*winzip 或 winrar进行提取*等接下来将 kml 文件上传到您**的“谷歌网站/谷歌页面**”。详细步骤在以下链接中描述

[https://developers.google.com/kml/articles/pagesforkml](https://developers.google.com/kml/articles/pagesforkml)

[https://support.google.com/earth/answer/173934?hl=en](https://support.google.com/earth/answer/173934?hl=en)﻿</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-16T10:01:04.330

Google Drive 的一些功能最近因 Google Drive 的新外观而发生了变化，因此请执行以下操作：

1.  从 Open Street Map 或您当地的军械测量站点下载您想要可视化的 KML 数据文件。
2.  在浏览器中打开“Google Drive”并单击“新建”（左上角）单击“更多 >”，然后单击“Google Fusion Tables”（如果“Google Fusion Tables”尚不可用，则单击“连接更多应用程序”。
3.  导入下载的 KML 文件。
4.  如果由于某种原因地图未显示，请确保正确加载纬度/经度列，并在必要时使用 CSV 表标题中的向下箭头选项标记它们。

# c++ - 在 C++ 中通过递归打印数组

> ID：15928456
> 
> 赞同：1
> 
> 时间：2013-04-10T14:18:20.343
> 
> 标签：c++, arrays, recursion

我正在尝试编写一个函数来通过递归打印数组。

我写了三个函数，但它们在原理上似乎是相同的。

```
void printArray0( int theArray[], int theSize, int theIndex = 0 )
{
    cout << theArray[theIndex] << ' ';
    if ( ++theIndex != theSize ) printArray0( theArray, theSize, theIndex );
    else cout << endl;
}

void printArray1( int theArray[], int theElementLeft )
{
    cout << *theArray << ' ';
    if ( theElementLeft != 1 ) printArray1( theArray+1, theElementLeft-1 );
    else cout << endl;
}

void printArray2( int theArray[], int theSize )
{
    static int myIndex = 0;
    cout << theArray[myIndex] << ' ';
    if ( ++myIndex != theSize ) printArray2( theArray, theSize );
    else cout << endl;
} 
```

那么它们之间有显着差异吗？

如果有，哪个功能最快，哪个最安全？

我希望我能从别人的经验中学习:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T14:21:57.810

第三个不等同于前两个，因为它使用一个静态变量来保持当前状态。这是一件坏事（想象一下从多个线程同时运行这个函数来看看为什么）。这甚至起作用的原因是，每次调用函数时都不会出现超过一次的递归调用。例如，试图在二叉树的递归遍历中保持静态状态会失败得相当惨。这就是为什么当前状态应该通过参数传递给递归函数，而不使用静态或成员上下文。

前两个版本之间应该没有性能差异，因为它们的时间将取决于数据的输出。

我会像这样更改第二个函数的签名

```
void printArray1( int *theArray, int theElementLeft ) 
```

因为您从不`theArray`用作数组，而仅用作指针。从技术上讲，这并不重要，因为数组无论如何都会“衰减”到指针，但我认为这会稍微提高可读性。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T14:21:55.940

函数 0 和 1 是同样安全的¹。

函数 2 在多线程环境中是不安全的，因为它使用了静态变量。此外，对该函数的连续调用将从最后一次调用“停止”的地方开始，因为`myIndex`在任何地方都不会重新初始化为零。

* * *

¹我个人更喜欢函数 1 的风格而不是函数 0。函数 0 在使用预增量 ( `if ( ++theIndex != theSize )`) 方面很聪明，在我看来，这种聪明会妨碍未来的维护。我建议您避免出现有副作用的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T14:33:34.370

它们都没有多大意义，没有理由有人会为此使用递归。第一个版本可能是最不坏的，因为它最容易阅读。

的版本`static`是最危险的，因为它不是线程安全的。并且使用 static 使整个递归（甚至更多）毫无意义。

通常，递归有意义的情况很少，这不是其中之一。所有三个版本都是危险的，因为如果参数不正确，不能保证递归会停止。所有三个版本都将比普通循环消耗更多的 RAM 内存，并且它们的执行速度会更慢，同时也会使您的程序的可读性大大降低。您的程序将容易受到堆栈溢出的影响。

编译器通常不会那么有效地优化递归。他们是否这样做可能取决于您是否使用“尾递归”。

作为旁注，您的编码和缩进样式不可读且不安全。在 if/else 之后的每一行都使用一个新行，并始终`{}`用于每个 if/else 语句。

# java - Oracle 是否仍支持 Java DMK（或 OpenDMK）？

> ID：15928462
> 
> 赞同：5
> 
> 时间：2013-04-10T14:18:47.010
> 
> 标签：java, jdmk, opendmk

Oracle 是否仍支持 Java DMK（动态管理工具包）？我试图在 Oracle 的网站上找到对 JDMK 的任何引用，但我只能找到有关如何使用它的文档/教程，而不是对产品页面本身的引用。

我知道 OpenDMK，但这似乎在 2007 年之后还没有发展。我正在尝试从 Jingle JMXRemote 迁移到更新的 Cascading API，并且不想开始使用更多冗余技术。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T15:01:45.780

这取决于您所说的“支持”是什么意思。如果您需要一般意义上的支持，您应该联系 Oracle 支持人员并询问他们。但是，鉴于 JDMK 似乎不再被列为 Oracle 产品，我认为答案很可能是“否”。

如果您真的问是否有进一步开发 JDMK 或 OpenJDMK 的可能性，我会说它看起来不太可能¹。您最好的选择是直接询问 Daniel Fuchs……使用 openjdmk 项目网站上的联系信息。

然而，就新工作而言，JDMK / OpenJDMK 项目处于“昏迷状态”这一事实并不意味着该技术是“冗余的”。由您来判断它是否足够“新鲜”以满足您的要求……相对于其他满足要求的方式。

* * *

^(1 - 这显然是一个不客观的陈述；即只是我的意见。)

# python - 比较列表和字典

> ID：15928463
> 
> 赞同：2
> 
> 时间：2013-04-10T14:18:47.063
> 
> 标签：python, list, dictionary, compare

所以，我想检查列表 A 和字典 B 是否有一些共同的单词。然后我想检查常用词（键）的值的总和是否高于 10。我希望能够以简单的方式做到这一点。

示例（无法正常工作）：

```
A = ['a','b','c','e']
B = {'a': 12, 'b': 8, 'c':3,'d':15}

TheSum = 0
for key,value in B.items():
    if key in A:
        TheSum += int(value)
        if TheSum > 10:
            print ("The sum of the values are higher than 10 and the words incommon are:")
            print (key,"=", value,"points")
        else:
            print ("Nothing in common") 
```

**我希望它打印：**

数值总和大于 10，不常见的词有：

a = 12 分

b = 8 分

c = 3 分

我希望我的问题是可以理解的。我认为所有的 for 和 if 语句都太混乱了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T14:30:28.227

我会使用一个`set`然后是一个生成器表达式。可能更容易展示。首先我们得到共同的元素：

```
>>> A = ['a','b','c','e']
>>> B = {'a': 12, 'b': 8, 'c':3,'d':15}
>>> set(A).intersection(B)
set(['a', 'c', 'b']) 
```

然后我们可以取与这些键关联的 B 的值的总和：

```
>>> common = set(A).intersection(B)
>>> sum(B[k] for k in common)
23 
```

如果大于 10，则打印一些内容。

现在，您正在遍历 B 中的每个键、值对（好的），然后检查键是否在 A 中（这将起作用但会很慢，因为为了测试列表中的成员资格，您有扫描元素。）如果键在 A 中，则累积 TheSum。那部分确实有效。

但是您在累积总和 > 10 之后打印每个键/值对，我认为这不是您所追求的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:37:36.973

`B`要测试带有键的值的总和`A`是否大于 10：

```
if sum(B[k] for k in A if k in B):
    print("sum higher than 10")
else:
    print("sum lower than 10") 
```

如果你想要一个元素列表，`A`其中的键是 in `B`，你可以从`[k for k in A if k in B]`.

# java - JVM G1 幸存者空间容量为 0

> ID：15928465
> 
> 赞同：2
> 
> 时间：2013-04-10T14:18:49.463
> 
> 标签：java, garbage-collection, jvm

考虑以下 JVM 设置：

```
-d64 -server -Xms40g -Xmx40g -XX:+UseG1GC -XX:NewRatio=1 -XX:G1ReservePercent=10 -XX:MaxGCPauseMillis=100 -XX:InitiatingHeapOccupancyPercent=30 -verbose:gc -Xloggc:/var/log/gc_solr.log -XX:PermSize=728m -XX:MaxPermSize=728m 
```

jmap 给出以下内容：

```
Heap Configuration:
   MinHeapFreeRatio = 40
   MaxHeapFreeRatio = 70
   MaxHeapSize      = 42949672960 (40960.0MB)
   NewSize          = 1363144 (1.2999954223632812MB)
   MaxNewSize       = 17592186044415 MB
   OldSize          = 5452592 (5.1999969482421875MB)
   NewRatio         = 1
   SurvivorRatio    = 8
   PermSize         = 754974720 (720.0MB)
   MaxPermSize      = 763363328 (728.0MB)
   G1HeapRegionSize = 16777216 (16.0MB)

Heap Usage:
G1 Heap:
   regions  = 2560
   capacity = 42949672960 (40960.0MB)
   used     = 100663296 (96.0MB)
   free     = 42849009664 (40864.0MB)
   0.234375% used
G1 Young Generation:
Eden Space:
   regions  = 6
   capacity = 22548578304 (21504.0MB)
   used     = 100663296 (96.0MB)
   free     = 22447915008 (21408.0MB)
   0.44642857142857145% used
Survivor Space:
   regions  = 0
   capacity = 0 (0.0MB)
   used     = 0 (0.0MB)
   free     = 0 (0.0MB)
   0.0% used
G1 Old Generation:
   regions  = 0
   capacity = 20401094656 (19456.0MB)
   used     = 0 (0.0MB)
   free     = 20401094656 (19456.0MB)
   0.0% used
Perm Generation:
   capacity = 754974720 (720.0MB)
   used     = 21380584 (20.390113830566406MB)
   free     = 733594136 (699.6098861694336MB)
   2.831960254245334% used 
```

我不明白为什么幸存者空间容量为0？

我尝试过 NewRatio / SurvivorRatio 的不同组合，但没有取得多大成功。

幸存者空间取决于什么？我认为它应该是伊甸园空间的比例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:48:01.813

所以最后很简单。幸存者空间的容量在应用程序开始使用时显示。

那是相当混乱...

# jquery - 使用 JQuery 和 AJAX 刷新 div 以在 Django 中显示新评级

> ID：15928466
> 
> 赞同：2
> 
> 时间：2013-04-10T14:18:53.010
> 
> 标签：jquery, django, html

我是 django 的新手，找不到只刷新 div 的方法，并且 div 向我显示了当前的星级评分。我的想法是，用户可以通过点击星星来查看平均评分和评分，点击后我希望星星显示新的平均评分而不刷新整个页面。

这是div：

```
<div id="rating">
    <div class="movierating" id="o_{{ object.id }}">
        <span style="display:none;">{{ object.rating_vote.get_rating }}</span>
        {{ object.rating_vote.get_rating }}
    </div>
</div> 
```

而javascript是：

```
 <script type="text/javascript" charset="utf-8">
    $(document).ready(function() {  
         $('.movierating').each(function(index){
          $(this).raty({
            readOnly:  false,
            path: "{{ STATIC_URL }}images/",
            start: $(this).children("span:first").text(),
            click: function(score, evt) {
                var vote_url = "/rate/" + this.attr('id').substring(2) + "/" + score + "/";
                var div = this.attr('id');
                $.ajax({
                  url: vote_url,
                  success: function(){
                    alert('Vote successful!);
                $('#rating').load('#rating');
                  },
                });
            }
          });
        });
    });
  </script> 
```

使用此代码

`$('#rating').load('#rating');`

我将整个页面放入 div 中，当我使用

`$('#rating').load('# rating');`

我只得到没有星星的价值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T14:45:18.943

首先，复制里面的代码`<div id="rating"></div>`并将其保存到另一个文件中。可以说，

**评级.html**

```
 <div class="movierating" id="o_{{ object.id }}">
    <span style="display:none;">{{ object.rating_vote.get_rating }}</span>
    {{ object.rating_vote.get_rating }}
</div> 
```

现在在您的页面中，它将是，

**你的.html**

```
............
<div id="rating">
    {% include 'rating.html' %}
</div>
............ 
```

然后，创建`new view`并`new url`为`rating.html`

**网址.py**

```
url(r'^rating/$', 'rating', name='rating'), 
```

**视图.py**

```
def rating(request):
    //rating object here

    return render(request, 'rating.html', {
        //call rating object variable here
    }) 
```

最后，在你的 ajax

```
.........
$.ajax({
    url: vote_url,
    success: function(){
        alert('Vote successful!);
        $("#rating").load("/app_name/rating/");
    },
});
........... 
```

# .net - 从“打开网站”创建项目

> ID：15928468
> 
> 赞同：1
> 
> 时间：2013-04-10T14:18:56.310
> 
> 标签：.net, visual-studio

我正在使用 Visual Studio 2012 Express。有一堆需要更改的网站的 aspx 和 cs 文件。根本没有项目文件。

在过去的几天里，我花了几个小时试图完成这项工作，但即将放弃并告诉客户，如果没有项目文件，这是不可能的。简直不敢相信是这样，但甚至无法弄清楚如何重新编译这些文件。

在 VS 中有一个选项文件 => 打开网站。在解决方案资源管理器中右键单击解决方案并添加一个类库项目。将 App_code 中的代码移到那里并编译它。

创建了一个新的 asp.net 空 Web 表单应用程序，复制了项目目录中的所有文件。添加了对类库项目创建的 DLL 的引用。

当我选择将代码隐藏文件中的每个引用编译到像 Label1.Text 这样的控件时，会产生错误“当前上下文中不存在名称‘Label1’”。在解决方案资源管理器中，扩展 aspx 文件时显示背后的代码，它们“包含在项目中”

有一个选项可以右键单击 aspx => 转换为 Web 应用程序。

它仍然在抱怨那里（在用户控件中）和之前在 App_Code 中的引用。

有没有一步一步的方法来真正有效地做到这一点？Microsoft 提供的大多数步骤最终都处于无法编译的状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:23:08.583

您可以将其保留为“网站”。网站在服务器上编译，部署前不需要编译。我参与过网站无法作为一个整体编译的项目，该公司正在对每个文件进行更改。我不知道您的网站是否属于这种情况。

通常，在将“网站”转换为 Web 应用程序时，您只需添加 .aspx 文件和相应的 .cs 文件即可。然后选择问题中提到的“转换为 Web 应用程序”。这并不总是有效，并且您发现它不会编译。我知道的唯一解决方案是手动修复错误。很多时候，它只是将控件定义添加到 .designer.cs 文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T05:47:55.930

最后编译它，现在可以使用 sql server express 和“发布”

这是我所做的：

创建了一个空的 Web 应用程序并从没有项目文件的站点复制文件（只能使用打开的网站打开）。

首先添加对bin目录中的dll文件的引用（解决方案资源管理器=>右键单击引用并浏览到空Web应用程序的bin文件夹）。

然后单击解决方案资源管理器中的“显示所有文件”按钮。右键单击 App_Code => 包含在项目中。

编译项目（需要在添加其他内容之前执行此操作）。

开始将其他文件夹添加到项目中，例如 UserControls 文件夹，并在每次添加它们时进行编译。

最后在root下添加了所有的aspx和cs文件并再次编译没有错误。

我今天在尝试添加 C# Web 表单时发现的另一件重要的事情是，我创建的空 Web 应用程序是一个 VB 应用程序，并且我向其中添加了 c# 文件。

当创建一个空的 c# web 应用程序并将 c# 文件添加到它时，错误会返回。一旦我尝试通过包含它们来编译任何用户控件。它从后面的代码中抱怨 ascx 文件中的对象“在此上下文中不可用”。

# vba - Excel - 查找“看起来像”的值

> ID：15928469
> 
> 赞同：1
> 
> 时间：2013-04-10T14:18:58.897
> 
> 标签：vba, excel, excel-formula

我有一个带有大量工作表的 Excel 工作簿。在第一张“用户”表中，我将用户数据、名字、姓氏、电子邮件等全部从 CSV 文件中整齐地拆分出来。在其他表格中，我有一些姓名，需要来自“用户”表格的电子邮件。

问题是，所有其他工作表上的名字都在一个单元格中，名字和姓氏都像，并且在用户工作表中它被拆分了。此外，在其他表中，它可能写成“Mike Anderson”、“Mike, Anderson”甚至“Anderson, Mike”。

有没有人对宏/ VBA脚本/公式有想法，可以帮助我找到并复制相应的电子邮件？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T14:35:59.877

要检查`Mike Anderson`，`Mike, Anderson`甚至`Anderson, Mike`，您可以使用`.Find`and `.FindNext`。

看这个例子

**逻辑**：使用 Excel 的内置`.Find`方法查找`Mike`，一旦找到，只需检查单元格是否也有`Anderson`

```
Sub Sample()
    Dim oRange As Range, aCell As Range, bCell As Range
    Dim ws As Worksheet
    Dim SearchString As String, FoundAt As String

    On Error GoTo Err

    Set ws = Worksheets("Sheet1")
    Set oRange = ws.Columns(1)

    SearchString = "Mike"

    Set aCell = oRange.Find(What:=SearchString, LookIn:=xlValues, _
                LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, _
                MatchCase:=False, SearchFormat:=False)

    If Not aCell Is Nothing Then
        Set bCell = aCell

        If InStr(1, aCell.Value, "Anderson", vbTextCompare) Then _
        FoundAt = aCell.Address

        Do
            Set aCell = oRange.FindNext(After:=aCell)

            If Not aCell Is Nothing Then
                If aCell.Address = bCell.Address Then Exit Do
                If InStr(1, aCell.Value, "Anderson", vbTextCompare) Then _
                FoundAt = FoundAt & ", " & aCell.Address
            Else
                Exit Do
            End If
        Loop
    Else
        MsgBox SearchString & " not Found"
        Exit Sub
    End If

    MsgBox "The Search String has been found these locations: " & FoundAt
    Exit Sub
Err:
    MsgBox Err.Description
End Sub 
```

**截屏**

![在此处输入图像描述](https://i.stack.imgur.com/Q3yKm.png)

更多关于`.Find`这里`.Findnext` [。](http://www.siddharthrout.com/2011/07/14/find-and-findnext-in-excel-vba/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:26:41.250

您可以将 VBA **LIKE**运算符与通配符一起使用吗？

```
If activecell.text LIKE "*Paul*" then ... 
```

而且，正如**Floris**指出的那样，您需要`Option Compare Text`在模块顶部设置以确保您的测试不*区分大小写*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-29T14:56:18.420

搜索值可以很容易地在所有工作簿中找到，文本框和选项按钮被添加到工作簿的第一个工作表中。

[在此处输入图像描述](https://i.stack.imgur.com/dZ3tG.jpg)

通过选项按钮，可以将文本框中的值搜索为整体或部分两种类型：

```
If Sheets(1).OptionButton1 = True Then
Set Firstcell = Cells.Find(What:=Sheets(1).TxtSearch, LookIn:=xlValues, LookAt:=xlPart, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False)
Else
Set Firstcell = Cells.Find(What:=Sheets(1).TxtSearch, LookIn:=xlValues, LookAt:=xlWhole, SearchOrder:=xlByRows, SearchDirection:=xlNext, MatchCase:=False)
End If 
```

我也在模板编码中使用了**Find & FindNext 方法：**

```
If Not Firstcell Is Nothing Then
Firstcell.Activate
Firstcell.Interior.ColorIndex = 19

With Sheets("New_Report").Range("A1")
.Value = "Addresses Of The Found Results"
.Interior.ColorIndex = 19
End With
Sheets("New_Report").Range("A:A").EntireColumn.AutoFit
Sheets("New_Report").Range("A" & Rows.Count).End(xlUp).Offset(1, 0) = oSheet.Name & "!" & Firstcell.Address(False, False)

Call Create_Hyperlinks  'Hyperlinks are generated in New Report Sheet

If MsgBox("Found " & Chr(34) & Sheets(1).TxtSearch & Chr(34) & " in " & oSheet.Name & "!" & Firstcell.Address & vbLf & "Do You Want To Continue?", vbExclamation + vbYesNo) = vbNo Then
Exit Sub: End If

While (Not NextCell Is Nothing) And (Not NextCell.Address = Firstcell.Address)
                    counter = counter + 1
Firstcell.Interior.ColorIndex = xlNone
Set NextCell = Cells.FindNext(After:=ActiveCell)

If NextCell.Row = 2 Then
Set NextCell = Range(Cells(3, 1), Cells(Cells(Rows.Count, 1).End(xlUp).Row, LastColumn)).FindNext(After:=ActiveCell)
End If

If Not NextCell.Address = Firstcell.Address Then
NextCell.Activate
NextCell.Interior.ColorIndex = 19
Sheets("New_Report").Range("A" & Rows.Count).End(xlUp).Offset(1, 0) = oSheet.Name & "!" & NextCell.Address(False, False)

Call Create_Hyperlinks

If MsgBox("Found " & Chr(34) & Sheets(1).TxtSearch & Chr(34) & " in " & oSheet.Name & "!" & NextCell.Address & vbLf & "Do You Want To Continue?", vbExclamation + vbYesNo) = vbNo Then
Exit Sub: End If

End If 'If Not NextCell.Address = Firstcell.Address Then
NextCell.Interior.ColorIndex = xlNone

Wend
End If
Next oSheet
End If 
```

所有结果在生成的报告表中以超链接的形式列出，具有不同的功能。

# grails - grails中的购物车方法

> ID：15928474
> 
> 赞同：0
> 
> 时间：2013-04-10T14:19:14.197
> 
> 标签：grails, shopping-cart

我正在尝试做一个购物车应用程序。我使用过 Spring 安全性。

我试图在我的 PurchaseOrder 域中实现一个方法，如下所示：

```
public void addToItems(Products products){

    def purchaseItem = items?.find{it.products == products} 

    if (purchaseItem == null){
        if (items == null){
            items = []
        }
        items.add(new PurchaseItem(products:products,purchaseOrder:this,quantity:1,price:products.price))
    }
    else{  
        purchaseItem.quantity += 1
        purchaseItem.price = products.price
    }

} 
```

这在 UserController.groovy

```
def addToCart = {

    def products = Products.get(params.productsId)

    if (products == null){
        flash.error = "Could not add product to cart! Could find product with id [${params.productsId}]."
        redirect(controller:'userInfo',action:'productSearch')
    }

    def purchaseOrderInstance = PurchaseOrder.findByUser(currentUser())
    if (purchaseOrderInstance == null){
        purchaseOrderInstance = new PurchaseOrder(user:currentUser())
    }

    purchaseOrderInstance.addToItems(products)

    purchaseOrderInstance.save(flush:true)

    redirect(action:'cart')
} 
```

但我收到了这个错误：

```
Message: No signature of method: com.shop.PurchaseOrder.addToItems() is applicable for argument types: (null) values: [null]
Possible solutions: addToItems(java.lang.Object), addToItems(com.shop.Products), getItems()
    Line | Method
->>  118 | doCall    in com.shop.UserInfoController$_closure1
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    195 | doFilter  in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|     63 | doFilter  in grails.plugin.cache.web.filter.AbstractFilter
|   1145 | runWorker in java.util.concurrent.ThreadPoolExecutor
|    615 | run . . . in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run       in java.lang.Thread 
```

我不确定我可能在哪里出错了，错误是什么意思？

# javascript - 从 JS 中的 html 页面解析自定义文本标签

> ID：15928482
> 
> 赞同：0
> 
> 时间：2013-04-10T14:19:32.080
> 
> 标签：javascript, html, parsing, replace, tags

我有一个带有这样的文本标签的 HTML 页面：

```
<div id="container">
[stag id="789"]some content 1[/stag]
</div>

<span id="somespan">
[stag vn="78988" id="532"]some content 2[/stag]
</span>

[stag id="891" vn="78988"]some content 3[/stag] 
```

我想使用 js 解析整个页面代码并获取所有`stag`属性和内容，并用生成的 div 替换它们。

> 注意：它不是一个有效的标签，它被方括号括起来，并且在未加载js时必须在页面上显示为纯文本，如果解析为div。

getElementsByTagName 在这种情况下不起作用，因为`[stag]`它不是有效的 HTML 标记，而是网页的纯文本。

以能够动态解析该标签的方式来实现这一目标的最佳方法是什么。

我相信我正在寻求帮助来创建：`getElementsBySquereBracketsTagName`

感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:57:01.357

它可能不是有效的标记，因为您最终会在跨度中使用 DIV，但这是一种方法。

给定 HTML

```
<html>
    <body>
        <div id="container">
        [stag id="789"]some content 1[/stag]
        </div>

        <span id="somespan">
        [stag vn="78988" id="532"]some content 2[/stag]
        </span>

        [stag id="891" vn="78988"]some content 3[/stag]
    </body>
</html> 
```

JavaScript

```
document.body.innerHTML = 
document.body.innerHTML.replace(/\[/gi,'<').replace(/\]/gi,'>').replace(/stag/gi,'div') 
```

# python - 在 Python 中导入日期时间的问题

> ID：15928485
> 
> 赞同：0
> 
> 时间：2013-04-10T14:19:36.183
> 
> 标签：python, date, datetime, import

我知道这是一个愚蠢的问题，但在任何地方都找不到答案。我想将日期和月份分别提取到一个变量中，然后对它们进行一些操作，但是当我尝试下面的代码时，我不断收到错误。我尝试以许多不同的方式做同样的事情，它在 shell 中工作，但在我的 .py 文件中不起作用。

```
from datetime import datetime

now = datetime.now()
print(now.month) 
```

错误：

```
Traceback (most recent call last):
  File "/home/john/Documents/Python/import time.py", line 1, in <module>
    from datetime import datetime
  File "/home/john/Documents/Python/datetime.py", line 3, in <module>
    now = datetime.today()
AttributeError: 'module' object has no attribute 'today' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:21:17.840

根据错误的路径，看起来您添加了一个`datetime.py`隐藏（被导入而不是导入）内置`datetime`模块的文件。

要点是*不要将您的模块命名为与内置模块相同的名称*

# git - 从 Chromium 源存储库下载

> ID：15928487
> 
> 赞同：0
> 
> 时间：2013-04-10T14:19:40.777
> 
> 标签：git, google-code

我是一个新手，我不知道如何从存储库和其他东西下载代码。我试过乌龟汞它失败了。[https://chromium.googlesource.com/external/webrtc/deps/third_party/openmax/+/refs/heads/master](https://chromium.googlesource.com/external/webrtc/deps/third_party/openmax/+/refs/heads/master) 任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:26:55.953

您引用的存储库不是 Subversion 存储库，而是[Git](http://git-scm.com/)存储库。

因此，您需要 Git 工具来克隆它。最初的工具是基于 Linux 的命令行工具，但听起来您更喜欢带有 GUI 的东西。幸运的是，这里有一个 GUI Git 工具列表：http: [//git-scm.com/downloads/guis](http://git-scm.com/downloads/guis)

# git - 为什么 git 快速导入文件模式是硬编码的？

> ID：15928488
> 
> 赞同：1
> 
> 时间：2013-04-10T14:19:41.390
> 
> 标签：git, file-permissions, git-fast-import

我正在尝试将我的 CVS 存储库转换为 GIT，但遇到了奇怪的问题： `git fast-import`硬编码文件模式为 100755 和 100644，否则它会死掉。

来源：

```
p = get_mode(p, &mode);
if (!p)
    die("Corrupt mode: %s", command_buf.buf);
switch (mode) {
    case 0644:
    case 0755:
    mode |= S_IFREG;
    case S_IFREG | 0644:
    case S_IFREG | 0755:
    case S_IFLNK:
    case S_IFDIR:
    case S_IFGITLINK:
        /* ok */
        break;
    default:
        die("Corrupt mode: %s", command_buf.buf);
} 
```

// [https://github.com/git/git/blob/master/fast-import.c](https://github.com/git/git/blob/master/fast-import.c) 2272-2288

有人可以解释一下这种解决方案的原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:36:02.887

Git 不存储文件模式，它只存储文件类型（符号链接、目录、可执行文件、不可执行文件），使用的东西看起来很像 unix 文件模式。

例如，存储不是这些硬编码位之一的东西是不`0777`合法的。这将是一个损坏的树对象并且`git fsck`会抱怨它。

（请注意，历史排除了这一点 -`0664`在树中允许，并且被视为*警告*而不是*错误*。）

# gwt - GWT ScrollPanel 没有固定单位，大小问题

> ID：15928496
> 
> 赞同：0
> 
> 时间：2013-04-10T14:20:09.487
> 
> 标签：gwt, scroll, size, height

我的 ScrollPanel 有问题...我尝试使用它，但它没有填满所有空间：

```
scrollPanel.setSize("100%","100%"); 
```

我读到应该给 ScrollPanel 一个固定的高度，但这不符合我的要求！

我有一个 Horizo​​ntalPanel，当我使用 setSize("100%","100%"); 空间已被填满，但是当我将 Horizo​​ntalPanel 放入 ScrollPanel 时，我遇到了这个问题。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:36:29.573

如果滚动面板没有被另一个面板包围并且您提到它`height`，`100%`它会占用`0px`高度。如果您的滚动面板之前的整个层次结构都是[布局面板](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiPanels#LayoutPanels)，那么设置`height`为`100%`将起作用，但否则您应该重新设计您的逻辑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:38:53.040

根据文档[http://goo.gl/V31VB](http://goo.gl/V31VB)，您应该使用 CSS 单位而不是百分比。

您可以使用 Window.getClientHeight()/Window.getClientWidth() 计算高度/宽度。

# iphone - iPhone - 在单独的窗口中编辑情节提要元素

> ID：15928498
> 
> 赞同：0
> 
> 时间：2013-04-10T14:20:11.147
> 
> 标签：iphone, xcode, uiscrollview, storyboard

我正在尝试在 UIScrollView 中编辑 UIView。我已将 UIView 的高度设置为 700，但我无法滚动放置对象。我想在单独的窗口中打开 UIView 以编辑其内容。或者，我还有其他方法可以解决这个问题吗？[这个](https://stackoverflow.com/questions/9118796/steps-for-creating-uiscrollview-with-interface-builder)问题的第一个答案包含一个我正在尝试做的例子，尽管在故事板中。我做错了什么，或者有可能吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:03:00.253

我将为您将要创建的 UIView 创建一个单独的 XIB 文件，然后创建一个新类作为此 XIB 的文件所有者。然后，您需要将 UIScrollView 内的 UIView 连接到此。

所涉及的步骤在过去的问题中进行了说明： [Add subview from a xib or another scene with storyboard](https://stackoverflow.com/questions/8754157/add-subview-from-a-xib-or-another-scene-with-storyboard)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-17T14:16:01.967

我发现使用[这个](https://stackoverflow.com/questions/9288070/visually-arrange-subviews-in-a-large-uiscrollview)链接是最好的解决方案。我能够让 Devin 的解决方案部分工作，但它涉及对我的代码进行大量黑客攻击。虽然上面的链接禁用了自动布局，但对于我的小型应用程序，我可以接受。

# javascript - 如何使用正则表达式在javascript中格式化字符串

> ID：15928500
> 
> 赞同：-1
> 
> 时间：2013-04-10T14:20:14.287
> 
> 标签：javascript, html, regex

这是我从数据库中得到的字符串

```
var str=" The requirements of this chapter apply to the following:(1) New 
buildings or portions thereof used as health care occupancies (see 1.4.1)(2) 
Additions made to, or usedas, a health care occupancy (see 4.6.6 and 18.1.1.4)(2)
and test.Exception: Exception no 1  The requirement of 18.1.1.1.1 shall not apply
to additions classified as occupancies other than health care that are separated
from the health care occupancy in accordance with 18.1.2.1(2) and conform to the
requirements for the specific occupancy in accordance with Chapters 12 through 17
and Chapters 20 through 42, as appropriate.(3) Alterations, modernizations, or  
renovations of existing health care occupancies (see 4.6.7 and 18.1.1.4)(1)(4)
Existing buildings or portions thereof upon change of occupancy to a health care 
occupancy (see 4.6.11)Exception *: Facilities where the authority having 
jurisdiction has determined equivalent safety has been provided in accordance 
with Section 1.5." 
```

我使用了以下条件

```
str = str.replace(/(\s\(\d+\)|exception\s*\:*)/gi, "<br /><br />$1&nbsp"); 
```

我从中得到：

```
The requirements of this chapter apply to the following:

(1) New buildings or portions thereof used as health care occupancies (see 1.4.1)

(2) Additions made to, or usedas, a health care occupancy (see 4.6.6 and 18.1.1.4)

(2) and test.

Exception: 

Exception no 1  The requirement of 18.1.1.1.1 shall not apply to additions classified as occupancies other than health care that are separated from the health care occupancy in accordance with 18.1.2.1(2) and conform to the requirements for the specific occupancy in accordance with Chapters 12 through 17 and Chapters 20 through 42, as appropriate.

(3) Alterations, modernizations, or renovations of existing health care occupancies (see 4.6.7 and 18.1.1.4)

(1)

(4) Existing buildings or portions thereof upon change of occupancy to a health care occupancy (see 4.6.11)

Exception *: Facilities where the authority having jurisdiction has determined equivalent safety has been provided in accordance with Section 1.5. 
```

但我想要的输出是

```
The requirements of this chapter apply to the following:

(1) New buildings or portions thereof used as health care occupancies (see 1.4.1)

(2) Additions made to, or usedas, a health care occupancy (see 4.6.6 and 18.1.1.4)(2) and test.

Exception: Exception no 1  The requirement of 18.1.1.1.1 shall not apply to additions classified as occupancies other than health care that are separated from the health care occupancy in accordance with 18.1.2.1(2) and conform to the requirements for the specific occupancy in accordance with Chapters 12 through 17 and Chapters 20 through 42, as appropriate.

(3) Alterations, modernizations, or renovations of existing health care occupancies (see 4.6.7 and 18.1.1.4)(1)

(4) Existing buildings or portions thereof upon change of occupancy to a health care occupancy (see 4.6.11)

Exception *: Facilities where the authority having jurisdiction has determined equivalent safety has been provided in accordance with Section 1.5. 
```

提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:43:35.540

在正则表达式中“计数”已经很困难，但是你所要求的不能用一个来完成。正则表达式对之前捕获的内容没有任何记忆，因此在第二个的情况下`(2)`，您将没有任何工具可以知道它已经被匹配。

现在，这里出现了一个有趣的替换功能工具。你可以指定一个回调函数，而不是在这里你可以做一些检查。回调参数将是：
1）整个匹配的字符串
2）捕获组（所以 0 到 n 个参数）
3）匹配的位置
4）初始字符串

所以基本上，您可以捕获您看到的数字，如果您已经看到它们，什么也不做（返回相同的字符串，即 arguments[0]），以及其他可以帮助您的事情......

# ios - iOS 5+ - 在执行请求时冻结主线程执行

> ID：15928505
> 
> 赞同：1
> 
> 时间：2013-04-10T14:20:33.917
> 
> 标签：ios, multithreading, rest, request

我正在 iOS 应用程序中实现一些 RESTful API，目前正在开发登录功能。用户输入用户名和密码，当按下登录时会发生以下情况：

网络活动指示器变为可见，文本标签变为隐藏（以及登录按钮），活动指示器变为可见并且带有文本“登录”的标签。然后：

```
 dispatch_async(queue, 
    ^{[self performSelectorOnMainThread:@selector(performAuthCall) 
    withObject:nil waitUntilDone:YES];}); 
```

在 performAuthCall 方法中，视图控制器的属性（布尔值）设置为 YES 或 NO，取决于登录是否成功（我使用 NSURLConnection 的 sendSynchronousRequest）。如果是，则显示另一个视图控制器。如果不是，则会显示警报。我并没有真正得到我想要的结果，控制器在执行请求之前正在测试成功的登录布尔值，我尝试了不同的方法，但我无法让它正常工作并且不冻结 UI。所以，我的问题是：

我怎样才能首先使所有隐藏/显示的东西（比如使活动指示器和“登录”标签可见），然后开始授权过程，等到它完成，然后才转到另一个视图控制器或显示警报或东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:47:39.527

`NSURLConnection sendAsynchronousRequest:::`改为使用

```
[NSURLConnection sendAsynchronousRequest:request
                                queue:[NSOperationQueue currentQueue]
                    completionHandler:^(NSURLResponse *response, NSData *data, NSError *error) {
    NSLog(@"response = %@", response);
    //do the UI update/segue here once completed.
}]; 
```

这样您就不会在 url 加载期间阻塞主线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T17:23:23.193

为了建立 Mike 关于使用背景的答案并获得我认为您正在寻找的功能，请执行以下操作。

绑定您在单击登录按钮上的操作以激活方法。这仍将处于前台。立即将您的应用程序逻辑调度到后台以处理消息。如果您愿意，您的后台方法 (performAuthCall) 仍然可以运行同步。

```
dispatch_async(dispatch_get_global_queue(0, 0),
                       ^ {
                           [self performAuthCall];
                       }); 
```

此外，在您发送的相同方法中，将您的 bool 设置为阻止呼叫，将您的按钮变灰，启动您的活动控制。主线程仍然可以运行和工作，但是您拦截诸如 shouldPerformSegueWithIdentifier 之类的项目将允许您阻止不需要的导航。

当您的 performAuthCall 完成后，让它在主线程上执行一个选择器以设置布尔值，以便方法可以开始移动、取消灰色项目、停止活动控制。它还确定您是启动警报（密码错误）还是强制 segue 进入您的下一个控制器。

请记住 - UI 需要在主线程中的所有内容和所有额外的逻辑（例如执行登录调用之类的操作）都应该在后台线程中。

# c# - PreviewTouchUp 与 previewTouchDown

> ID：15928507
> 
> 赞同：1
> 
> 时间：2013-04-10T14:20:40.323
> 
> 标签：c#, pixelsense, touch-event

我在画布中有一个用户控件。如果我`PreviewTouchDown`这样使用：

```
actualNode.TextContainer.PreviewTouchDown += delegate(object o, TouchEventArgs args)
                { actualNode_PreviewTouchDown(o, args, actualNode, name); }; 
```

它着火了。但如果我使用`PreviewTouchUp`它，它不会。但我需要将两者都用于我的想法。“TouchUp”或“TouchDown”也是如此。

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:57:12.523

这种行为可能有不同的原因。

画布的父母之一是 a`ScatterViewItem`吗？如果合适，`ScatterViewItem`处理事件。

您`ManipulationEvents`在其中一位父母中使用吗？如果你这样做，你需要设置`IsManipulationEnabled`为`true`.

另一个提示，使用工具 snoop ( [http://snoopwpf.codeplex.com/](http://snoopwpf.codeplex.com/) ) 找出引发了哪些事件以及谁处理了哪些事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T08:47:06.103

在调用方法中设置后`e.Handled = true;`，PreviewTouchUp 事件被触发并调用它的方法。

# java - 如果数据库中没有值，db.query() 是否会使应用程序崩溃？

> ID：15928513
> 
> 赞同：0
> 
> 时间：2013-04-10T14:20:53.650
> 
> 标签：java, android, sql, database

运行此查询以从内部 Android 数据库获取数据并分配给游标：

```
Cursor cursor = db.query(TABLE_NAME, 
                       new String[] { KEY_ID, KEY_NAME, KEY_SURNAME },
                       KEY_ID + "=?",  
                       new String[] { String.valueOf(name) }, null, null, null);

if (cursor != null)
    cursor.moveToFirst();

Record rec = new Record(cursor.getString(0), cursor.getString(1), cursor.getString(2)); 
```

应用程序在执行此代码时崩溃。

例外：`CursorIndexOutOfBoundsException: Index -1 requested, with a size of 0`。

这可能是因为 KEY_ID 中没有值，因为我在运行此方法之前没有添加任何行吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:24:21.463

不`query()`，不应该杀死应用程序。但是，如果那里出现问题，它会抛出您很可能不会尝试捕获的异常，这会杀死您的应用程序。无论如何，我会检查 a) logcat 输出以获取崩溃堆栈跟踪或以下行 - 您可能只是**假设**总是返回数据并尝试在那里访问它导致崩溃。

您应该始终检查您的查询是否返回任何内容，例如：

```
Cursor cursor = mDb.query(....);
if( cursor.getCount() > 0 ) {
    cursor.moveToFirst();
    .....
} 
```

或者干脆

```
Cursor cursor = mDb.query(....);
if( cursor.moveToFirst() ) {
    .....
} 
```

因为您可以轻松获得不`null`包含数据的有效非游标（返回零行）。尝试从此类游标访问不存在的数据将导致抛出异常（如果未捕获异常则崩溃）。

**编辑**

尝试捕获异常，然后查看罪魁祸首的日志：

```
try {
    Cursor cursor = mDb.query(....);
    if( cursor.moveToFirst() ) {
        .....
    }
} catch ( Exception e ) {
    e.printStackTrace();
} 
```

# c# - 使用 c# 保持控制台窗口打开

> ID：15928517
> 
> 赞同：0
> 
> 时间：2013-04-10T14:21:02.137
> 
> 标签：c#, windows, console

我有以下代码来使用 MSBuild 构建项目：

```
string process = sourcePath + @"\Application.sln /t:rebuild";
System.Diagnostics.Process csc = System.Diagnostics.Process.Start(@"C:\WINNT\Microsoft.NET\Framework\v2.0.50727\MSBuild.exe",process); 
```

这段代码以前有效，我不知道为什么不再有效。

如果我通过 CMD 执行上述相同操作，它可以正常工作，但不是来自 VS.Net，控制台窗口会快速消失，因此我看不到错误消息。

如果我调试我得到的代码： `BasePriority = 'csc.BasePriority' threw an exception of type 'System.InvalidOperationException'`

有什么办法可以按住那个屏幕，这样我就可以知道这里发生了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:23:16.373

只需使用 MSBuild.exe 作为参数启动 cmd 进程，而不是直接启动 exe 文件。

```
string process = @"C:\WINNT\Microsoft.NET\Framework\v2.0.50727\MSBuild.exe " + sourcePath + @" \Application.sln /t:rebuild";
System.Diagnostics.Process csc = System.Diagnostics.Process.Start(@"%windir%\system32\cmd.exe", process); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:33:35.420

您可以尝试使用[RedirectStandardOutput 重定向您开始的 msbuild 的输出](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.redirectstandardoutput.aspx)

```
Process compiler = new Process();
compiler.StartInfo.FileName = @"C:\WINNT\Microsoft.NET\Framework\v2.0.50727\MSBuild.exe";
compiler.StartInfo.Arguments = sourcePath + @"\Application.sln /t:rebuild";
compiler.StartInfo.UseShellExecute = false;
compiler.StartInfo.RedirectStandardOutput = true;
compiler.Start();    

Console.WriteLine(compiler.StandardOutput.ReadToEnd());

compiler.WaitForExit(); 
```

# css - 定位绝对元素以保留在文档流中，但以某种方式将元素推到下方

> ID：15928521
> 
> 赞同：0
> 
> 时间：2013-04-10T14:21:19.100
> 
> 标签：css, css-position

[请在 jsfiddle 中](http://jsfiddle.net/N7Tz9/5/)找到我的脚本来显示问题

忽略外观，因为我必须删除页面的许多其他部分才能将其放在 jsfiddle 上。

**事实是**

```
1\. Bottom Callout should appear on clicking Latest or Date range
2\. On displaying the callout, the buttons should be pushed down accordingly, 
    wrt to the height of the callout
3\. The callout is positioned after the Latest/DateRange in order to keep it continuos in the document flow
4\. The callout is positioned absolute to avoid the white space that shows next to "Latest",
    this white space is created by the width of the bottom callout if positioned relative. 
```

**问题：**我想找到方法

```
1\. to keep the callout in the document flow
2\. no white space should be shown next to Latest, when clicking on Latest 
3\. the buttons at the bottom should be pushed down rather  than getting hidden. 
```

如果您有任何想法或需要有关该问题的更多信息，请告诉我。

提前致谢。

# c# - ADO.NET Entity Framework 4 中的转换错误

> ID：15928522
> 
> 赞同：1
> 
> 时间：2013-04-10T14:21:20.420
> 
> 标签：c#, .net, entity-framework

我对 EF 非常陌生，并尝试使用 ADO.NET EF 在组合框更改事件的文本框中填充数据。我尝试解析所有内容，但始终存在错误。我的代码在下面给出....请帮助我....在此先感谢。

```
private List<tSubDepartment> GetSubDepartmentInfo(int deptId)
    {
        using (DiagnosoftDataContext context = new DiagnosoftDataContext())
        {
            return (from c in context.tSubDepartments
                    where c.dpCode == deptId
                    select c).ToList();
        }
    }

    private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
    {
        var subDeptInfo =GetDepartmentInfo((int)comboBox1.SelectedValue);   // Error: "Specific cast is not valid"
        textBox2.Text = subDeptInfo[0].sdCode.ToString();
        textBox3.Text = subDeptInfo[0].sdName;
        textBox4.Text = subDeptInfo[0].dpCode.ToString();

    } 
```

这是我填充组合框的代码

```
private void Form1_Load(object sender, EventArgs e)
    {
        comboBox1.DataSource = GetSubDepartments();
        comboBox1.DisplayMember = "sdName";
        comboBox1.ValueMember = "sdCode";
    }

private List<tSubDepartment> GetSubDepartments()
    {
        using (DiagnosoftDataContext context = new DiagnosoftDataContext())
        {
            return (from c in context.tSubDepartments select c).ToList();

        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:47:35.300

尝试这个，

```
if (comboBox1.SelectedItem != null)
            {
                int x = int.Parse(comboBox1.SelectedItem.ToString());

                var subDeptInfo =GetDepartmentInfo(x);   
                textBox2.Text = subDeptInfo[0].sdCode.ToString();
                textBox3.Text = subDeptInfo[0].sdName;
                textBox4.Text = subDeptInfo[0].dpCode.ToString();
            }
            else { //Value is null } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:29:42.340

好像和EF没关系。我的猜测是组合框中的值是字符串，而不是整数。所以你可以试试

```
int.Parse(comboBox1.SelectedValue) 
```

代替

```
(int)comboBox1.SelectedValue 
```

如果这不起作用，那么你可能还有其他东西 - 看看是什么样的对象`comboBox1.SelectedValue`- 它可以是任何东西。这就是您需要将其投射到的位置，然后从那里使用该对象。

# ssrs-2008 - SSRS 2008 Sum IIf 和变量

> ID：15928523
> 
> 赞同：0
> 
> 时间：2013-04-10T14:21:20.900
> 
> 标签：ssrs-2008

由于我的报告中有多个计算（一些添加，一些减法），我正在尝试做的是在变量级别汇总查询中的几个字段。

例如，我试图总结一个需要检查 3 个条件的财务价值。我尝试创建一个变量并为其分配一个表达式：

=Sum(IIf((Fields!Year.Value, "Query_Name") = 参数!Year AND (Fields!Period.Value, "Query_Name") = 参数!Period AND (Fields!Type.Value, "Query_Name") = 参数!Type, (Fields!Amount.Value, "Query_Name"), 0))

我正在检查年份、期间和类型（预算或实际）是否正确，然后我想对这些值求和。它不起作用，所以我想知道我做错了什么。

我在报告中确实有多个数据集，但是我每次都引用正确的一个。这是不可能的还是我做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T21:20:21.593

嘿，这可能是因为您在报告中使用了 2 个数据集并且您需要在每个值 Dataset1(Fields!FSCSP.Value) 之前提及数据集，而不仅仅是 Fields!FSCSP.Value 它会起作用。准确告诉我此错误发生的时间

# session - 在 weblogic 中更改身份验证时的会话 ID

> ID：15928524
> 
> 赞同：1
> 
> 时间：2013-04-10T14:21:21.630
> 
> 标签：session, weblogic

对于 weblogic 9，如何设置 Change Session Id On Authentication？对于 11g，它在控制台下可用。

weblogic 9 中有这样的属性吗？是否可以在 weblogic.xml 中设置或通过代码实现？

-谢谢。

# python - 页眉/页脚终端显示

> ID：15928525
> 
> 赞同：1
> 
> 时间：2013-04-10T14:21:22.060
> 
> 标签：python

如何创建一个 python 脚本，其中有一个像这张图片一样的静态页眉和页脚？

![GNU纳米](https://i.stack.imgur.com/TkAFX.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:33:18.463

您可以将[诅咒](http://docs.python.org/2/howto/curses.html)用于python。例子：

```
import curses

myscreen = curses.initscr()
curses.start_color()
curses.init_pair(1, curses.COLOR_BLACK, curses.COLOR_WHITE)
y,x = myscreen.getmaxyx()
myscreen.addstr("Python curses in action!", curses.color_pair(1))
myscreen.move(y -1,0)
myscreen.addstr("Python curses in action!", curses.color_pair(1))
myscreen.refresh()
myscreen.getch()

curses.endwin() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:23:54.003

在 python 中使用 Curses 或 ncurses：

[http://docs.python.org/2/howto/curses.html](http://docs.python.org/2/howto/curses.html)

# maven - ToolTwist 设计器中显示的 Jackson 错误

> ID：15928530
> 
> 赞同：1
> 
> 时间：2013-04-10T14:21:38.407
> 
> 标签：maven, amazon-web-services, amazon-s3, jackson, tooltwist

每当我的小部件放置在 ToolTwist 设计器中的页面上时，就会显示以下错误。该错误在我正在开发的其他应用程序中没有发生，但在我尝试连接到 Amazon Web 服务时开始。

```
Stack trace:
com.dinaa.DinaaException: Error calling DesignerUIM.op_showEditPane():
java.lang.NoSuchMethodError: org.codehaus.jackson.JsonNode.asText()Ljava/lang/String;
    at tooltwist.wbd.GenericMustacheWidget.toObject(GenericMustacheWidget.java:173)
    at tooltwist.wbd.GenericMustacheWidget$2.<init>(GenericMustacheWidget.java:163)
    ... 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T21:10:05.847

此问题通常是由 Amazon AWS 库 aws-java-sdk 引起的，其中包括 Maven 依赖项 jackson-core-asl (1.8.9) 和 jackson-mapper-asl (1.8.9)。

GenericMustacheWidget 使用 jackson-support (0.6.3)，这需要这些库 (1.9.2) 的较新版本。

解决方案是在您定义对 aws-java-sdk 的依赖项的 POM 中排除这些库：

```
<dependency>
    <groupId>com.amazonaws</groupId>
    <artifactId>aws-java-sdk</artifactId>
    <version>1.4.1</version>
    <exclusions>
        <exclusion>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-core-asl</artifactId>
        </exclusion>
        <exclusion>
            <groupId>org.codehaus.jackson</groupId>
            <artifactId>jackson-mapper-asl</artifactId>
        </exclusion>
    </exclusions>
</dependency> 
```

AWS 似乎可以与较新版本的 Jackson 库一起正常工作。重新启动服务器，您的页面应该正确呈现。

# java - Wicket - 以优雅的方式在会话级别检索 PageParameters

> ID：15928533
> 
> 赞同：0
> 
> 时间：2013-04-10T14:21:46.703
> 
> 标签：java, wicket, wicket-6

我需要从 url 检索参数。当我在网页级别执行此操作时，这是一个简单的案例 - 可以通过以下方式完成：

```
 @MountPath(INDEX_PREFIX + "/${" + OBJECT_ID_KEY + "}")
    public class IndexPage extends WebPage
    {
            public IndexPage(PageParameters parameters)
            {
                    String id = parameters.get(OBJECT_ID_KEY).toString();

                    // etc...
            }
    } 
```

但我需要**在会话级别**完成- 在*getRoles()*方法中。

我是这样做的：

```
 @Override
    public Roles getRoles()
    {
            final Request request = RequestCycle.get().getRequest();
            List<String> segments = request.getUrl().getSegments();
            if (segments != null && segments.size() > 1 && INDEX_PREFIX.equals(segments.get(0)))
            {
                    String id = segments.get(1);
            }

            // etc...
    } 
```

网址结构如下所示：*www.my.page.com/index/5*

*索引*-`INDEX_PREFIX`

*5* -`OBJECT_ID_KEY`

有没有更好的办法？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T12:29:40.210

您已经掌握了`Request`- 现在只需遵循 API :-)

```
Request req = RequestCycle.get().getRequest();
IRequestParameters params = req.getRequestParameters();
StringValue idValue = params.getParameterValue("id"); 
```

你去吧。

# python - Matplotlib - 如何在不使线条透明的情况下使标记面颜色透明

> ID：15928539
> 
> 赞同：60
> 
> 时间：2013-04-10T14:22:05.463
> 
> 标签：python, matplotlib

我知道如何在 matplotlib 中设置线条的透明度。例如，以下代码使线条和标记透明。

```
import numpy as np
import matplotlib.pyplot as plt

vec = np.random.uniform(0, 10, 50)
f = plt.figure(1)
ax = f.add_subplot(111)
ax.plot(vec, color='#999999', marker='s', alpha=0.5) 
```

我希望线条的 alpha=1.0，并且标记的面颜色是半透明的（alpha=0.5）。这可以在matplotlib中完成吗？

谢谢你。

* * *

## 回答 #1

> 赞同：65
> 
> 时间：2013-04-10T16:37:17.563

## 请参阅下面的@Pelson 的回答，了解用一行代码执行此操作的正确方法。

`Line2D`您可以通过将两个独立的对象粘在一起以一种 hacky 的方式做到这一点。

```
th = np.linspace(0, 2 * np.pi, 64)
y = np.sin(th)
ax = plt.gca()

lin, = ax.plot(th, y, lw=5)
mark, = ax.plot(th, y, marker='o', alpha=.5, ms=10)

ax.legend([(lin, mark)], ['merged'])
plt.draw() 
```

![演示图](https://i.stack.imgur.com/nrAlB.png)

[看这里](http://matplotlib.org/users/legend_guide.html#legend-handler)的解释

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-04-10T21:12:27.910

在阅读了 的源代码后`matplotlib.line`，发现有一个代码路径（至少在 Agg 中，但可能是所有后端）允许您执行此操作。我不确定这是否是故意的行为，但目前它确实有效。关键*不是*为线条定义 alpha 值，而是定义所需的颜色以及 alpha 值：

```
import matplotlib.pyplot as plt

plt.plot([0, 1], [1, 0], 'k')
# Do not set an alpha value here
l, = plt.plot(range(10), 'o-', lw=10, markersize=30)

l.set_markerfacecolor((1, 1, 0, 0.5))
l.set_color('blue')

plt.show() 
```

这些可能可以作为参数给出`plt.plot`，所以只是

```
plt.plot(range(10), 'bo-', markerfacecolor=(1, 1, 0, 0.5), ) 
```

会成功的。

高温高压

# git - 两个 GIT 历史（或 SHA 哈希/提交）之间的实际差异

> ID：15928542
> 
> 赞同：1
> 
> 时间：2013-04-10T14:22:11.817
> 
> 标签：git, version-control, versioning

我已经提取并合并了代码。

我想查看将应用于代码的更改。

不幸的是，以下所有内容都显示了其他开发人员执行的更改（这些更改已在一段时间前撤消）

```
git diff origin/ContactList...ContactList
git diff origin/ContactList..ContactList
git diff 来源/联系人列表...HEAD
git diff origin/ContactList..HEAD

```

换句话说，我已经克隆了 repo。我在开发过程中拉过（我确实想保持最新）。现在，我只想查看我的更改。

PS：我没有创建另一个分支

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T15:29:00.927

`git diff`准确地向您显示您要求它显示的内容，这是您给它的两次提交之间的差异。

要了解如何查看“仅您自己的更改”，您必须了解上游更改在合并历史中的哪个位置。这在以某种图形表示查看您的历史时很容易做到，例如使用`gitk`or `git log --graph --oneline --decorate`, 或您喜欢的其他一些历史浏览器。

假设您有一个“简单”的情况，其中两条平行的开发线（您的和上游的）合并，您的历史将如下所示：

```
... <- A <- B <- U1 <- U2 <- ... <- Un <-+- C <-- D <-- ....
            ^                            |
            `--- Y1 <- Y2 <- ... <- Ym <-' 
```

在此表示中，箭头从子提交到其父提交，因此左侧是较旧的提交，右侧是较新的提交。（您的分支提示位于 C 右侧的某处）。`U*`提交代表上游更改和您自己的提交`Y*`，尽管这不是很相关。

这些提交使用的名称是象征性的；在您的存储库中实际调用差异时，您将需要使用实际的引用名称（标签或分支，如果它们存在于正确的位置，否则提交 SHA）。

**要查看在您自己**的合并部分（提交）中发生的所有累积更改`Y*`，您可以使用

```
git diff B Ym 
```

也就是说，合并基础（最后一次常见提交）和您*在合并之前的*最新提交之间的差异。

您尝试它的方式包括实际的合并提交（`C`在此示例中），它*已经包含所有上游更改*，因为此时合并已经发生（这实际上是合并提交的点）。

因此，合并前某处和合并后某处（包括合并提交）的差异将包括合并双方的所有更改。

# html - 菜单栏在 Safari 上正常显示，但在 Chrome 和 Firefox 上显示混乱

> ID：15928543
> 
> 赞同：0
> 
> 时间：2013-04-10T14:22:12.987
> 
> 标签：html, css, menubar

我正在为一个网站制作一个菜单栏，但我遇到了一个非常奇怪的问题，但是我无法修复它。在这个问题下工作了一个小时或更长时间，但没有效果:( 菜单包含 5 个链接，我使用了无序列表和 float:left 链接的组合。在 Safari 中一切看起来都很完美，但在 Firefox 和 Chrome 中最后一个链接显示得较低，好像有换行符。我不能真正使用位置：绝对，因为菜单位于宽度为 1255 像素的容器内。请有人告诉我到底是什么原因导致链接显示得更低？有什么想法吗？
我尝试删除页面的其他组件，但这并没有改变任何东西，所以我很确定它一定是这里的东西：

CSS：

```
div.menu
{
    height: 60px;
    background-image: url('2r/menu.png');
    margin-bottom: 10px;
}

ul.menu
{
    padding: 18px 0px 0px 0px;
    margin: 0;
}
ul.menu li
{
    display: inline;
    list-style-type: none;
}

a.menuitem:link
{
    float: left;
    display: block;
    padding: 0px 52px 0px 52px;
    color: #1e0c00;
    text-decoration: none;
    font-size: 22px;
    transition: background-color 0.4s, opacity 1.5s;
    -moz-transition: background-color 0.4s, opacity 1.5s;
    -webkit-transition: background-color 0.4s, opacity 1.5s;
    -o-transition: background-color 0.4s, opacity 1.5s;
}
a.menuitem:visited
{
    color: #1e0c00;
    text-decoration: none;
    font-size: 22px;
}
a.menuitem:hover 
{
    color: #441b00;
    text-decoration: none;
    font-size: 22px;
    background-color: #ffdfb6;
    opacity: 0.6;
}
a.menuitem:active
{
    color: #441b00;
    text-decoration: none;
    font-size: 22px;
} 
```

html:

```
<div class="menu">
<ul class="menu">
<li><a class="menuitem" href="index.html">Xxxxxx</a></li>
<li><a class="menuitem" href="Xxxxxxx.html">Xxxxxxx Xxxxxxxxx</a></li>
<li><a class="menuitem" href="Xxxxxxxxx.html">Xxxxxxxxx</a></li>
<li><a class="menuitem" href="Xxxxxxxx.html">Xxxxxx Xxxxxxxx</a></li>
<li><a class="menuitem" href="Xxxx.html">Xxxxxxxxxx Xxxxxxxxx</a></li>
</ul>
</div> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T13:44:40.947

找到了！感谢CBroe的建议，只将部分css代码复制到jsfiddle中后，效果还不错。代码中的其他内容导致了错误，这是因为我没有在 ul.menu 中定义某些元素（padding-left，list-style-position）我在代码中进一步定义了 ul 元素并且它“级联" 在 ul.menu 上导致它表现得很奇怪。很抱歉占用您的时间，并感谢您的提示！

# java - 如何在 Java 中交换两位整数？

> ID：15928545
> 
> 赞同：7
> 
> 时间：2013-04-10T14:22:13.440
> 
> 标签：java, bit-manipulation, swap

Java中有一个内置函数可以用来交换两位吗？

例如：

_ _ _ _ 1 _ _ 0 位 3 与位 0 交换并变为 _ _ _ _ 0 _ _ 1

我知道它可以使用一个长的按位操作过程来完成，但我想避免这样做。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-10T15:26:37.007

你也可以试试这个方法

```
//positions are indexed from 0 and in order ...[4][3][2][1][0]
//so changing 3 and 1 will make             ...[4][1][2][3][0]
public static int swap(int i, int pos1, int pos2) {

    int bit1 = (i >> pos1) & 1;// bit at pos1
    int bit2 = (i >> pos2) & 1;// bit at pos2

    if (bit1 == bit2)
        return i; // no need to swap since we change 1 with 1 or 0 with 0

    // Since we are here it means that we need to change 1->0 and 0->1.
    // To do this we can use XOR (^).
    // Lets create mask 000001010 with ones at specified positions
    int mask = (1 << pos1) | (1 << pos2);

    return i ^ mask;// TADAM!!!
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-10T14:44:19.597

这是另一种方式，称为增量交换。

```
int t = (i ^ (i >> 3)) & 1;
return i ^ t ^ (t << 3); 
```

或更一般地说：

```
static int swap(int x, int i, int j)
{
    // precondition: i > j
    int d = i - j;
    int y = (x ^ (x >> d)) & (1 << j);
    return x ^ y ^ (y << d);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-10T14:37:45.900

我正在详细制作，但您可以将其加入单行

```
 int temp1 = (i & 0x1) << 3; //extract lowest bit #1 and place at pos# 4
 int temp2 = (i & 0x8) >> 3; //extract bit #4 and place at pos #1
 i = (i & temp1) | (i & ~temp1); //now pos #4 is ready     
 i = (i & temp2) | (i & ~temp2); //now pos #1 is ready 
```

# perl - 我收到“CGI 错误：文件不是 perl 可存储”错误

> ID：15928546
> 
> 赞同：1
> 
> 时间：2013-04-10T14:22:13.970
> 
> 标签：perl, cgi, storable

我的 perl 突然出现了一个问题，并且无缘无故地开始向我抛出这个异常：

CGI 错误：文件不是可存储在 blib\lib\Storable.pm 的 perl（自动拆分为 blib\lib\auto\Storable_retrieve.al）第 380 行，位于 C:/myapp/src/main/perl/lib/Output.pm第 1831 行

有谁知道“文件不是可存储在 blib\lib\Storable.pm 中的 perl”是什么以及如何解决这个问题？

谢谢，去

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:38:45.657

你做了类似的事情

```
use Storable qw( retrieve );
my $data = retrieve('file.dat'); 
```

并且`file.dat`不是 Storable 识别的格式。

# sql - 如何使用 SQL 和 FOR XML 将列值转换为 xml 元素名称

> ID：15928547
> 
> 赞同：1
> 
> 时间：2013-04-10T14:22:22.343
> 
> 标签：sql, sql-server, xml, sql-server-2005

我在 MyTable 中有以下表格行：

```
MessageID EMailAddress      DisplayName RecipientType
1         joe@email.com     Joe         To
1,        Bob@email.com     Max         From
1,        Max@email.com     NULL        To
1,        Secret@email.com  Secret      Bcc 
```

我正在尝试将其转换为如下所示的 XML：

```
<to>
   <displayName>Joe</displayName>
   <address>joe@email.com</address>
</to>
<from>
   <displayName>Bob</displayName>
   <address>Bob@email.com</address>
</from>
<to>
   <address>Max@email.com</address>
</to>
<bcc>
   <displayName>Secret</displayName>
   <address>Secret@email.com</address>
</bcc> 
```

我很接近，但无法弄清楚如何将 RecipientType 转换为其他两列的父元素

```
SELECT 
a.EmailAddress as address, 
a.DisplayName as displayName
FROM MyTable a
WHERE a.Id = 1
FOR XML PATH('address'), TYPE 
```

有没有办法让“FOR XML PATH('address')”成为 RecipientType 而不是硬编码的“address”？或者还有其他选择吗？

我也尝试过使用 PIVOT，但似乎没有帮助。

我知道我可以使用动态 SQL，但我试图远离它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:28:55.453

```
with data as (
    select * from (
    values (1, 'joe@email.com', 'Joe', 'To', 1),
            (1, 'Bob@email.com', 'Bob', 'From', 2),
            (1, 'Max@email.com', null, 'To', 3),
            (1, 'Secret@email.com', 'Secret', 'Bcc', 4)
    ) t(MessageID, EMailAddress, DisplayName, RecipientType, Ordering)
    where MessageID = 1
), pivoted as (
    select *
    from data pivot (max(EmailAddress) for RecipientType in ([To], [From], [Bcc])) t
)
select (case when [To] is not null then DisplayName else null end) as 'to/displayName', [To] as 'to/address',
        (case when [From] is not null then DisplayName else null end) as 'from/displayName', [From] as 'from/address',
        (case when [Bcc] is not null then DisplayName else null end) as 'bcc/displayName', [Bcc] as 'bcc/address'
from pivoted
order by Ordering
for xml path('') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:03:18.237

也许这可以让你开始：我认为你将需要一个元素，无论如何。

```
DECLARE @data XML;

SET @data = 

N'
<root>
<to>
   <displayName>Joe</displayName>
   <address>joe@email.com</address>
</to>
<from>
   <displayName>Bob</displayName>
   <address>Bob@email.com</address>
</from>
<to>
   <address>Max@email.com</address>
</to>
<bcc>
   <displayName>Secret</displayName>
   <address>Secret@email.com</address>
</bcc>
</root>';

SELECT 
      T.myAlias.value('(.)[1]', 'VARCHAR(32)') AS emailAddress
    , T.myAlias.value('fn:local-name(..)', 'nvarchar(50)') as t
FROM 
    @data.nodes('//address') AS T(myAlias)
where
    T.myAlias.value('fn:local-name(..)', 'nvarchar(50)') = 'to'
; 
```

结果：

```
emailAddress                     t
-------------------------------- --------------------------------------------------
joe@email.com                    to
Max@email.com                    to 
```

* * *

```
SELECT

      T.myAlias.value('(.)[1]', 'VARCHAR(32)') AS emailAddress
    , T.myAlias.value('(../displayName)[1]', 'VARCHAR(32)') AS displayName
    , T.myAlias.value('fn:local-name(..)', 'nvarchar(50)') as RecipientType
FROM 
    @data.nodes('//address') AS T(myAlias)

;

emailAddress                     displayName                      RecipientType
-------------------------------- -------------------------------- 
joe@email.com                    Joe                              to
Bob@email.com                    Bob                              from
Max@email.com                    NULL                             to
Secret@email.com                 Secret                           bcc 
```

除了身份证，什么都有。

Xml Shredding 不完全支持一个问题，position()。:<

[http://connect.microsoft.com/SQLServer/feedback/details/383888/fully-support-position-in-xquery](http://connect.microsoft.com/SQLServer/feedback/details/383888/fully-support-position-in-xquery)

在这篇文章中也可以看到：

[在 SQL Server 的 XML 文档中查找节点顺序](https://stackoverflow.com/questions/1134075/finding-node-order-in-xml-document-in-sql-server)

# android - Worklight SQL 适配器部署

> ID：15928549
> 
> 赞同：0
> 
> 时间：2013-04-10T14:22:26.903
> 
> 标签：android, sql, ibm-mobilefirst

我开始使用适配器，并且能够在 Android 模拟器中运行我的应用程序，但它在我的 Android 平板设备中失败了。

我尝试将 application-descriptor.xml localhost 更改为 172.16.19.135:8080 但仍然失败并显示以下错误消息：

> “[http://172.16.19.135:8080/apps/services/api/PrototypesDojo/android/query] 的请求超时”

在我的 Worklight 项目中，我在 HTML 中有一个带有`onClick`调用的按钮。我称之为 SQL 适配器。

这是我的 SQL 适配器：

**连接.xml**

```
<displayName>connexion</displayName>
<description>connexion</description>
<connectivity>
    <connectionPolicy xsi:type="sql:SQLConnectionPolicy">
        <!-- Example for using a JNDI data source, replace with actual data source 
            name -->
        <!-- <dataSourceJNDIName>java:/data-source-jndi-name</dataSourceJNDIName> -->

        <!-- Example for using MySQL connector, do not forget to put the MySQL 
            connector library in the project's lib folder -->
        <dataSourceDefinition>
            <driverClass>com.mysql.jdbc.Driver</driverClass>
            <url>jdbc:mysql://worklight:3306/test</url>
            <user>root</user>
            <password>myRootPassword</password>
        </dataSourceDefinition>
    </connectionPolicy>
    <loadConstraints maxConcurrentConnectionsPerNode="5" />
</connectivity>

<!-- Replace this with appropriate procedures -->
<procedure name="authentification" />
<procedure name="creerCompte" /> 
```

**连接-impl.js**

```
var requeteStatement = WL.Server
        .createSQLStatement("select login,password from compte where login = ? and password = ?");

function authentification(login, password) {

    return WL.Server.invokeSQLStatement({
        preparedStatement : requeteStatement,
        parameters : [ login, password ]
    });
} 
```

错误：

[http://172.16.19.135:8080/apps/services/api/PrototypesDojo/android/query] 主机没有响应。尝试通过 android 模拟器浏览器手动访问 URL 以验证连接性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T04:23:52.747

这与 SQL 适配器无关。这里的实际问题/问题是您无法将您的设备连接到 Worklight Server。

为了使设备连接到 Worklight Server，服务器和设备都必须共享同一个网络。

在命令窗口中，运行`ipconfig`并复制给定的 IPv4 地址。将此 IP 地址粘贴为`worklightServerRootURL`文件 application-descriptor.xml（位于 yourProject\apps\yourApp 下）中的值。

# android - 从非 UI 线程调用 textView.setText 没有错误。为什么？

> ID：15928551
> 
> 赞同：4
> 
> 时间：2013-04-10T14:22:28.877
> 
> 标签：android

我编写了以下代码，它基本上启动了一个线程，从中更改了 TextView 的文本。

我期待一个错误，因为我从另一个线程而不是主线程访问 TextTiew（UI 元素）。

但它工作正常。据我所知，这不应该是可能的。
我不明白，我错过了什么？

```
public class MainActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        TextView tv = (TextView) findViewById(R.id.view1);
        tv.setText(Thread.currentThread().getName());

        Thread theThread = new Thread(new aRunnable(tv));
        theThread.start();      
    }
    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }
} 
```

* * *

```
public class ARunnable implements Runnable{     
    TextView tv;    
    public ARunnable(TextView tv){
        this.tv = tv;
    }   
    @Override
    public void run() {
        tv.setText(tv.getText()+"----" + Thread.currentThread().getName()); 
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:29:39.023

[文档](http://developer.android.com/guide/components/processes-and-threads.html)说他们并`Do not access the Android UI toolkit from outside the UI thread.` 没有说 Android 本身包含任何代码来阻止你这样做。这只是一个坏主意，可能会产生意想不到的副作用。

您应该调用`Activity.runOnUiThread()`以从其他线程更新 UI。

# emacs - mac osx下emacs中的mx slime [No match]

> ID：15928566
> 
> 赞同：4
> 
> 时间：2013-04-10T14:23:14.487
> 
> 标签：emacs, lisp, slime

我现在正在学习普通的 lisp。我想在 emacs 中使用 slime，但是当我按下 Mx slime 时，它​​显示 [No match]

最初我下载 CVS 快照并将其放入我的 .emacs 文件中

```
(setq inferior-lisp-program "/opt/local/bin/sbcl") ; your Lisp system
(add-to-list ’load-path "~/.slime") ; your SLIME directory
(require ’slime)
(slime-setup) 
```

然后我按照这个步骤再次[设置在emacs中设置SLIME](https://stackoverflow.com/questions/12607716/setting-the-slime-in-emacs)

但问题并没有消失。

此外，Mx run-lisp 不起作用。当我尝试这样做时，缓冲区显示“正在搜索程序：没有这样的文件或目录，lisp”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-12T05:34:23.480

为了安全起见，尝试使用 Emacs 24 的包管理器安装 SLIME。

1.  在你的 init.el 中配置包管理：

    ```
    (require 'package)

    (add-to-list 'package-archives '("melpa"     . "http://melpa.milkbox.net/packages/"))
    (add-to-list 'package-archives '("marmalade" . "http://marmalade-repo.org/packages/"))

    (package-initialize)

    (unless package-archive-contents 
      (package-refresh-contents)) 
    ```

2.  运行`M-x package-install slime`。那应该为您正确设置加载路径。

3.  您拥有的那些配置选项现在应该可以工作了：

    ```
    (setq inferior-lisp-program (executable-find "sbcl")) 
    ```

我刚刚重新安装了 SLIME 和 SBCL，这就是我所需要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-13T17:20:32.887

这似乎与 $PATH 相关。我刚刚

`(setq inferior-lisp-prompt "sbcl")`

在我的 .emacs 中并收到此错误。我把它改成

`(setq inferior-lisp-program (executable-find "sbcl"))`

我的 ELPA 安装的 SLIME 现在可以在 Debian 下的 Emacs 24.3.1 上运行

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-12T02:57:51.650

在 add-to-list 行中，在 slime 之后添加一个正斜杠（即“~/.slime/”）以使其成为目录规范。

编辑 - 对不起，不正确。相反，请尝试删除句点（即“~/slime”）

问候，

米

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2022-02-11T16:31:12.010

使用 .将其配置到您的 init.el 中`c-x c-f ~/.init.el`。

```
(require 'package)

(add-to-list 'package-archives '("melpa"     . "http://melpa.milkbox.net/packages/"))
(add-to-list 'package-archives '("marmalade" . "http://marmalade-repo.org/packages/"))

(package-initialize)

(unless package-archive-contents 
  (package-refresh-contents)) 
```

*   重新安装 sbcl 和 slime。
*   我在整个设置中使用了 roswell。这个[网站](https://towardsdatascience.com/how-to-set-up-common-lisp-ide-in-2021-5be70d88975b)应该有帮助。

要在 emacs 中使用 slime，请将其添加到 using `c-x c-f ~/.emacs`.

```
(load (expand-file-name "~/.roswell/helper.el")) 
```

这应该都有效。

# ms-access - 提供起始位置时 InStrRev 的不稳定行为

> ID：15928573
> 
> 赞同：2
> 
> 时间：2013-04-10T14:23:30.817
> 
> 标签：ms-access, vba, ms-access-2010

我不明白以下任何一项的结果。我知道 InStrRev 给出了最后一个“匹配”的位置（从右到左）并且当我没有给出开始位置时可以理解结果。无论从左还是右开始，1 或 2 都应该给出 0 以外的值。

```
Private Sub Form_Load()
Dim TestString As String
TestString = "ABCDEFGHCIJK"
msgbox = InStrRev(TestString, "C", 1) 'produces 0 if optional start parameter is 1 or 2
msgbox = InStrRev(TestString, "C", 3) 'produces 3 if start parameter is 3-8
msgbox = InStrRev(TestString, "C", 9) 'produces 9 if start parameter is 9-12
'13+ produces 0 as expected since its length of string is only 12
End Sub 
```

微软关于功能的文档：[access](http://office.microsoft.com/en-us/access-help/instrrev-function-HA001228858.aspx) & [visual studio](http://msdn.microsoft.com/en-us/library/t2ekk41a%28v=vs.80%29.aspx)。在视觉工作室页面上，我尝试了页面底部的示例并得到了相同的结果，所以我知道它的工作原理。但是我的大脑没有得到。我也理解带 & 不带起始位置的 InStr 函数

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T21:27:57.623

天哪，我刚刚明白了！我很糟糕，我有想太多事情的倾向。以下是我认为我已经挂断的内容，并且一些文档没有明确说明：

*   **两个函数的** *起始* **位置都从左边开始**
*   **返回值是原始字符串中的字符位置（如果找到），无论您要求函数在字符串中的哪个位置开始搜索**

[如果没有HansUp](https://stackoverflow.com/a/15929177/1940218)，我无法弄清楚这一点。希望下面是另一种看待它的方式，以防其他人有同样的问题理解：

*   下面返回 5。在 A 之前，位置是 1，在 B 之前是 2 等等。我们告诉它在 C 和搜索字符串（CDEFGHIJKLMN）的剩余部分之前开始，其中仍然有 E

    `InStr(3, "ABCDEFGHIJKLMN", "E")`

*   下面返回 0。我们告诉它从 C 之前开始并搜索其中没有 E 的字符串 (AB) 的剩余部分。字符串的其余部分在 AB 上的原因是因为它从 RIGHT-TO-LEFT 搜索

    `InStrRev("ABCDEFGHIJKLMN", "E", 3)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:49:12.997

我将提供一个不同的例子，希望能让情况更清楚。在立即窗口中（使用`Ctrl`+`g`快捷方式转到那里）...

```
TestString = "123456789"
? InStrRev(TestString, "3", 2)
 0 
```

该语句要求`InStrRev`从 in 的第二个字符开始`TestString`并向后搜索字符*"3"*。由于前两个字符`TestString`是*"12"*，因此在该子字符串中找不到*"3"*`InStrRev` ，因此返回 0。

在这个例子中，我要求`InStrRev`从第四个字符开始搜索......

```
? InStrRev(TestString, "3", 4)
 3 
```

由于前四个字符`TestString`是*"1234"*，所以找到了*"3"*作为第三个字符，所以`InStrRev`返回 3。

关于*“1 或 2 应该给出 0 以外的值”*这句话……这是不正确的，正如我的第一个示例所展示的那样。

# javascript - 加载图像后预加载 div，加载 javascript 文件？

> ID：15928575
> 
> 赞同：1
> 
> 时间：2013-04-10T14:23:33.880
> 
> 标签：javascript, jquery, html

我一直在尝试使用 jQuery 库来预加载内容，我遇到的常见问题是，一旦预加载了所有内容，它就会显示一个 div，但是在几秒钟内你仍然可以看到“看起来很糟糕”的内容，因为 javascript 不是应用到它，然后它改变它应该是什么样子。很难解释。基本上，一旦加载了整个页面，我就会尝试`<div class="text"></div>`在页面上显示 div ()，因此图像、javascript 文件等。我在这里找到了非常好的示例

[http://tympanus.net/codrops/collective/collective-58/](http://tympanus.net/codrops/collective/collective-58/)

您可以看到网格/内容仅在所有内容加载完毕后才显示，然后用户会收到加载图像作为等待的指示，这正是我试图实现的目标。我尝试查看源代码，但似乎“预加载”脚本位于其他脚本中的某个位置，并且有很多不必要的代码（对我来说）。那么你能否为这个问题推荐一个轻量级的 jQuery 解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:32:49.620

最初用于`display:none`您的 div 并显示加载 gif。

```
$(window).load(function() { 
   $('#yourGifID').hide();
   $('#yourDivID').show(); // will be called when everything is loaded
}); 
```

> load 事件在文档加载过程结束时触发。至此，文档中的所有对象都在 DOM 中，所有图片和子帧都加载完毕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:26:29.800

对于给您带来麻烦的div，为什么不在html中将其可见性设置为“隐藏”，然后在javascript中，一切准备就绪后，将其更改为“可见”

html:

```
<div class="text" style="visibility:hidden"></div> 
```

js：

```
$(".text").css("visibility", "visible"); 
```

# java - 无法在 Swing 中更新 JLabel

> ID：15928576
> 
> 赞同：0
> 
> 时间：2013-04-10T14:23:48.057
> 
> 标签：java, swing, jpanel, jlabel

大家好，我对编程比较陌生（只是把它扔在那里），我正在使用 Swing 做一个简单的数学测验。它旨在仅询问加法，减法，乘法和除法问题。我想这样当用户单击“检查答案”按钮时，ActionListener 会更新标签（包含问题）和问题本身。我设法更新了问题本身，但 JLabel 根本没有更新。我尝试通过删除它来更新标签，然后使用问题构造器构建一个新的问题和标签，然后添加更新的标签和问题。我发现我无法删除然后将其添加回来。我只能添加一个全新的标签或完全删除它。感谢您的帮助，我希望它不会太乱！

```
import javax.swing.*;
import java.awt.event.*;
import java.awt.*;

public class MathQuiz extends JFrame
{

    private int num1, num2, hardNum1, hardNum2, WIDTH = 400, HEIGHT = 150;
    private double answer, input;
    private int questionNum = 1, operatorSelector;
    private String userInput;
    private JLabel questionLabel;
    private JPanel question;
    private JTextField answerBox;
    private JButton enter;
    private String addition = "+", subtraction = "-", multiplication = "*", division = "/";
    private int hard = 1, easy = 0, easiness = 0;
    private int easinessSelector[] = {hard, easy};
    private int[][] selector = new int[2][2];
    private int easyNum = 0, hardNum = 1, number;

    String[] operator = {addition, subtraction, multiplication, division};

    /**Constructor
     * 
     */
    public MathQuiz()
    {
        setTitle("Math quiz");
        setDefaultCloseOperation(EXIT_ON_CLOSE);
        setLayout(new BorderLayout());
        answerBox = new JTextField(6);
        add(answerBox, BorderLayout.NORTH);
        questionPanelBuild();
        questionConstructor();
        enter = new JButton("Check answer");
        enter.addActionListener(new ButtonListener());
        add(enter, BorderLayout.SOUTH);
        setResizable(false);
        setSize(WIDTH, HEIGHT);
        setVisible(true);

    }

    private class ButtonListener implements ActionListener
    {
        public void actionPerformed(ActionEvent e)
        {
            userInput = answerBox.getText();
            input = Double.parseDouble(userInput);

            if(input == answer)
            {
                questionNum +=1;
                question.remove(questionLabel);
                question.remove(question);
                questionConstructor();
            }
            else if(input != answer)
            {
                JOptionPane.showMessageDialog(null, "Sorry, that's incorrect.");
            }
        }
    }

    private void questionPanelBuild()
            {
                question = new JPanel();
            }

    private void questionConstructor()
    {
        Random rand1 = new Random();
        num1 = rand1.nextInt(101);
        Random rand2 = new Random();
        num2 = rand2.nextInt(101);
        Random rand3 = new Random();
        operatorSelector = rand3.nextInt(4);
        Random rand4 = new Random();
        hardNum1 = rand4.nextInt(21);
        Random rand5 = new Random();
        hardNum2 = rand5.nextInt(21);

        if(operatorSelector == 0)
            answer = num1 + num2;

        if(operatorSelector == 1)
            answer = num1 - num2;

        if(operatorSelector == 2)
            answer = hardNum1 * hardNum2;

        if(operatorSelector == 3)
            answer = hardNum1 / hardNum2;

        selector[0][0] = num1;
        selector[1][0] = num2;
        selector[0][1] = hardNum1;
        selector[1][1] = hardNum2;

        if(operatorSelector == 0 || operatorSelector == 1)
            easiness = easinessSelector[hardNum];
        if(operatorSelector == 2 || operatorSelector == 3)
            easiness = easinessSelector[easyNum];

        questionLabel = new JLabel("What is: " + selector[0][easiness] + " " + operator[operatorSelector] + " " + selector[1][easiness] + "?");
        questionLabel.setBorder(BorderFactory.createTitledBorder("Question " + questionNum));
        questionLabel.setFont(new Font("Arial", Font.BOLD, 18));
        question.add(questionLabel);
        add(question, BorderLayout.CENTER);

    }
    public static void main(String[] args)
    {
        new MathQuiz();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:28:05.470

您需要`revalidate`&`repaint`添加问题后`JPanel`

```
add(question, BorderLayout.CENTER);
revalidate();
repaint(); 
```

您可以简单地更新`questionLabel`：

```
questionLabel.setText(...); 
```

# django - 从 Django 查询集中获取第一个对象

> ID：15928579
> 
> 赞同：3
> 
> 时间：2013-04-10T14:23:56.563
> 
> 标签：django, django-queryset

给定以下代码：

```
randomItemQS = Item.objects.filter().exclude(id__in=[o.id for o in collection]).order_by('?')
randomItem = randomItemQS[:1]
calculation = randomItem.method() / constant 
```

如何确保它`randomItem`是一个`Item`而不是一个 QuerySet？

如果我从 运行代码`manage.py shell`，那么我会得到预期的结果。但是，从视图运行此代码会导致 AttributeError `'QuerySet' object has no attribute 'method'`，并指示错误发生在最后一行。

我错过了什么？

编辑：对不起，我应该更具体一点——我在 shell 中工作得很好，但它在视图中不起作用。会有什么不同？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:25:50.853

只需索引它，切片将 LIMIT 查询添加到 QS 而不执行它：

```
randomItem = randomItemQS[0] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:29:13.610

你可以这样做：

```
randomItem=None
randomItemQS = Item.objects.filter().exclude(id__in=[o.id for o in collection]).order_by('?')[:1]
if randomItemQS:
   randomItem = randomItemQS[0]
   calculation = randomItem.method() / constant 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:32:35.507

由于问题是关于视图和 shell 窗口之间的区别，因此正确的答案是将传递给视图的参数转换为整数，以确保查询按预期返回对象。

其他答案已被相应地投票，因为它们是有效的。谢谢。

# jquery - 选择的组合框 jquery 库更新文本

> ID：15928582
> 
> 赞同：-1
> 
> 时间：2013-04-10T14:23:58.533
> 
> 标签：jquery, jquery-chosen

大家好，我的页面中有两个组合框，我正在使用 selected() jquery 库。现在我想做的是将文本从 combo1 交换到 combo2 。我试过这样的事情。

```
var startint = $("#StartLocations").attr("selectedIndex");
        var endint = $("#EndLocations").attr("selectedIndex");

        $("#EndLocations").attr("selectedIndex", startint);
        $("#StartLocations").attr("selectedIndex", endint);
        $('#StartLocations').trigger("liszt:updated"); 
```

其中结束位置和开始位置是组合框的名称。任何想法我可以如何完成这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:30:37.383

可以使用 .val() 函数检索和设置组合框值。

HTML：

```
<select id="a">
    <option value="1">one</option>
    <option value="2">two</option>
    <option value="3">three</option>
</select>
<select id="b">
    <option value="1">one</option>
    <option value="2">two</option>
    <option value="3">three</option>
</select>
<button id="switch">Switch</button> 
```

Java脚本：

```
$("#switch").click(function(){
    var valA = $("#a").val();
    var valB = $("#b").val();
    $("#a").val(valB);
    $("#b").val(valA);
}); 
```

请参阅此小提琴示例：http: [//jsfiddle.net/lopisan/Exf4Y/](http://jsfiddle.net/lopisan/Exf4Y/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T19:57:16.503

So it appears that when chosen library takes over it essentially hides the select object and puts in an span with a text from the select from the hidden select. 我用来实际更改文本的技巧是简单地跟踪该特定对象下的跨度。所以换句话说就是这样。

```
 var StartNode = $("#StartLocations").val();
        var EndNode = $("#EndLocations").val();        
        $("#StartLocations_chzn a > span").text( EndNode);
        $("#EndLocations_chzn a > span").text(StartNode); 
```

希望这有助于其他一些菜鸟。米格尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-14T12:54:23.247

米格尔对他自己的问题的回答会起作用，但它确实将您与选择输出的特定标记联系起来。

另一种方法仍然与 selected 相关，但至少使用其 JavaScript API 而不是通过标记进行拖网搜索，即按照 lopisan 的建议更新选择框，然后触发专有`liszt:updated`事件。像这样的东西：

```
$("#switch").click(function(){
  var valA = $("#a").val();
  var valB = $("#b").val();
  $("#a").val(valB);
  $("#b").val(valA);
  $("#a").trigger("liszt:updated");
  $("#b").trigger("liszt:updated");
}); 
```

# java - Java SAX 的严重性能问题

> ID：15928583
> 
> 赞同：2
> 
> 时间：2013-04-10T14:24:01.160
> 
> 标签：java, sax, saxparser

我正在构建一个将 SVG 直接转换为 PDF 的应用程序。因为 SVG 可以变得非常大并且可以线性处理，所以我决定使用 SAX 实现 XML 解析器。但是，我没有从解析器中获得适当的性能：处理一个 45KB 的 SVG 文件需要 20 秒。

剖析显示 CPU 消耗量在 XMLParser 的 parse 方法中。更具体地说，所有这些时间都不是处理数据，而是读入数据。它一直到 java.net.SocketInputStream.socketRead0，CPU 花费了 19 秒。

有没有其他人有这个问题？有谁知道如何修理它？

我正在使用的驱动程序：

```
// Initialize SAX components
SAXParserFactory spf = SAXParserFactory.newInstance();
SAXParser saxParser = spf.newSAXParser();
XMLReader xmlReader = saxParser.getXMLReader();

// Set System L&F
UIManager.setLookAndFeel(
        UIManager.getSystemLookAndFeelClassName());

// Create a new file chooser
JFileChooser fileChooser = new JFileChooser();
fileChooser.setFileFilter(
        new FileNameExtensionFilter("SVG file", "svg"));

// Let the user choose an SVG file and convert it
if (fileChooser.showDialog(null, "Convert")
        == JFileChooser.APPROVE_OPTION) {
    File svgInput = fileChooser.getSelectedFile();
    File pdfOutput =
            new File(svgInput.getPath().replace(".svg", ".pdf"));
    xmlReader.setContentHandler(new SVGToPDFConverter(pdfOutput));
    URL inputURL = new URL(svgInput.toURI().toString());
    System.out.println("Working...");

    // Parse the file
    try (InputStream inputStream = inputURL.openStream()) {
        xmlReader.parse(new InputSource(inputStream));
    }

    System.out.println("Done!");
} 
```

我一直在测试的 SVG 文件的开头：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.0//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd">

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="fill-opacity:1; color-rendering:auto; color-interpolation:auto; stroke:black; text-rendering:auto; stroke-linecap:square; stroke-miterlimit:10; stroke-opacity:1; shape-rendering:auto; fill:black; stroke-dasharray:none; font-weight:normal; stroke-width:1; font-family:'Dialog'; font-style:normal; stroke-linejoin:miter; font-size:12; stroke-dashoffset:0; image-rendering:auto;" preserveAspectRatio="xMidYMid meet" zoomAndPan="magnify" version="1.0" contentScriptType="text/ecmascript" contentStyleType="text/css">
  <!--Generated by the Batik Graphics2D SVG Generator-->
  <defs id="genericDefs" />
  <g>
    <g style="font-size:14; fill:white; text-rendering:optimizeLegibility; color-rendering:optimizeQuality; image-rendering:optimizeQuality; font-family:'Calibri'; color-interpolation:linearRGB; stroke:white; font-weight:bold;">
      <rect x="68" width="54" height="17" y="2" style="stroke:none;" />
      <text x="73.4" xml:space="preserve" y="15" style="fill:black; stroke:none;">Dates (Ma)</text>
      <rect x="447" width="40" height="17" y="2" style="stroke:none;" />
      <text x="452.7" xml:space="preserve" y="15" style="fill:black; stroke:none;">Composition</text>
      <rect x="604" width="54" height="17" y="2" style="stroke:none;" />
      <text x="609.5001" xml:space="preserve" y="15" style="fill:black; stroke:none;">Isotopic Ratios</text>
      <text x="5" xml:space="preserve" y="32" style="fill:black; stroke:none;" />
      <text x="5" xml:space="preserve" y="43" style="fill:black; stroke:none;" />
      <text x="5" xml:space="preserve" y="54" style="fill:black; stroke:none;">Fraction  </text>
      <line x1="70" x2="70" y1="18" style="fill:none; stroke:gray; stroke-width:0.5;" y2="76" />
      <text x="73.4" y="32" style="fill:black; stroke-width:0.5; stroke:none;" xml:space="preserve" />
      <text x="73.4" y="43" style="fill:black; stroke-width:0.5; stroke:none;" xml:space="preserve">206Pb/</text>
      <text x="73.4" y="54" style="fill:black; stroke-width:0.5; stroke:none;" xml:space="preserve">238U</text>
    </g> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T07:21:15.073

看起来您的解析器从“ [http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd](http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd) ”获取 dtd

您可以手动获取该 URL，将其存储为本地文件，然后设置自定义处理程序，在哪里可以进行 dtd 解析。

我写了一些代码，例如。

```
@Test
public void testParser() throws Exception {
    // Initialize SAX components
    Long startTime = System.currentTimeMillis();

    SAXParserFactory spf = SAXParserFactory.newInstance();
    SAXParser saxParser = spf.newSAXParser();
    File f = new File("/home/grigory/test.svg");
    saxParser.parse(new FileInputStream(f), new MyHandler());
    System.out.println("execution time: " + (System.currentTimeMillis() - startTime));
}

private static class MyHandler extends DefaultHandler {

    @Override
    public InputSource resolveEntity(String publicId, String systemId) throws IOException, SAXException {
        System.out.println("resolve: "+ systemId);
        InputStream is = new FileInputStream("/home/grigory/svg10.dtd");
        return new InputSource(is);
    }

    @Override
    public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
        System.out.println("start element '" + qName + "'");
        super.startElement(uri, localName, qName, attributes);
    }

    @Override
    public void warning(SAXParseException e) throws SAXException {
        System.out.println(e.getMessage());
        super.warning(e);
    }

    @Override
    public void error(SAXParseException e) throws SAXException {
        System.out.println(e.getMessage());
        super.error(e);
    }
} 
```

# sencha-touch - Sencha Touch 2 sass 编译时间很长

> ID：15928588
> 
> 赞同：0
> 
> 时间：2013-04-10T14:24:19.527
> 
> 标签：sencha-touch, sass, compass-sass

我开始使用 SenchaTouch2，目前正在尝试使用 SASS。

编译我由 Sencha 生成的 .scss 文件（app.scss）时，最多需要 10 秒。

我现在想知道这是否正常，因为在开发应用程序时，每次更改某些内容时等待 10 秒似乎很长。

我想知道您在编译 sencha .scss 文件时是否经历过类似的时间。

我使用以下版本进行编译：Sass 3.3.0.alpha.121 (Bleeding Edge) Compass 0.12.2 (Alnilam) ruby​​ 1.8.7 (2012-02-08 patchlevel 358)

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:38:38.700

只需使用该`compass watch`命令进行编译，它的速度更快。

当 Compass 缓存不`compass clean`同步时，它会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:27:31.800

我对 Sencha 不是很熟悉，但是 10 秒等待编译的时间并不长。某些 IDE 有一个功能，即只重新编译更改的部分，而跳过未更改的部分。例如，Visual Studio 将这些称为 Build 和 Rebuild。这可能对您有帮助，也可能对您没有帮助。

# r - 更改对象列表中元素的快速方法（R）

> ID：15928593
> 
> 赞同：0
> 
> 时间：2013-04-10T14:24:26.723
> 
> 标签：r, list, polygons, lapply

我有一个 SpatialPolygonsDataFrame 对象，我想更改每个单独的多边形 ID 以匹配 data.frame 组件中的列。我可以使用 for 循环或 lapply 完成此操作，但每 30 个列表项大约需要一分钟，总共有 5500 个。

这是我尝试过的

1\. 使用 lapply：

```
changeID <- function(i) {
tor@polygons[[i]]@ID = as.character(tor$id[i])
return(0)
}

lapply(seq_along(tor@polygons), changeID) 
```

2\. 使用 for 循环：

```
for(i in 1:5597) {
tor@polygons[[i]]@ID = as.character(tor$id[i])
} 
```

对于更有效的解决方案有什么想法吗？

# visual-studio-2012 - 在分析软件中，为什么使用百分比而不是以毫秒为单位的时间？

> ID：15928595
> 
> 赞同：5
> 
> 时间：2013-04-10T14:24:33.667
> 
> 标签：visual-studio-2012, profiling, theory

我和一位同事正在查看 VS2012 中的 Visual Studio Profiling 报告，他们问我，“为什么要使用百分比来表示方法中的持续时间或调用方法所花费的时间？”

我的解释是该工具提供了一些表示哪些方法/调用需要很长时间或方法的哪些部分需要很长时间。现在这可以是抽象（百分比）或绝对值（时间（毫秒）），但任何一个都足以将您指向应用程序中的问题区域。

我们对此并不特别相信，所以我想我会问互联网。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-14T06:48:58.273

这是来自 Visual Studio Profiler 团队的 Andre Hamilton。这些值是百分比而不是 ms 的原因是因为您看到的是基于 Sample Profiling 而不是基于 Instrumentation 的分析的报告。

Sample Profiling 基本上操作系统会定期进行堆栈遍历。您在分析报告中看到的结果代表操作系统执行堆栈遍历时特定函数在堆栈上的时间比例

Instrumentation Profiling 我们基本上修改二进制文件（静态或动态）并截取函数的开始和结束。然后，我们在启动和退出函数时获取时间戳。这将为您提供有关函数执行的精确信息，但并非没有成本。因为在每个函数进入和退出时都会获取信息，因此生成的分析报告可能非常庞大（只需几秒钟的程序执行就拥有超过 1GB 的数据并不是未知的）。此外，如果在已签名的二进制文件上使用静态检测，您将需要让它们辞职。这可能会使开发过程复杂化。动态检测在此处有所帮助，但这并不能为您节省数据开销。

仅供参考，Visual Studio 带有用于静态检测的 vsinstr（可在 \Team Tools\Performance Tools 中找到）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T15:27:32.483

目标是什么？

1.  只是获得时间测量，你可以把它放在一个幻灯片上？或者...

2.  找出如何让整个事情花费*更少*的时间？（除了在更快的芯片上运行它。）

如果目标是 (2)，那么要做的事情是在软件中找到 a) 占挂钟时间很大百分比的活动，并且 b) 不是绝对必要的。原因是如果您可以摆脱占用 X（如 50%）时间的活动，那么您获得的加速因子高达 1/(1-X) 或*两倍*。

我在这里小心使用“活动”这个词，因为它是一个非常笼统的概念。如果您只认为自己在寻找“慢程序”，那么您将错过很大的加速机会，如果您真的关心性能，*那是您无法承受的。*

关键是加速机会就像岩石一样。它们有多种形式，并且有多种尺寸。如果你不删除*它们中的每一个，*你将与那些你没有得到的人一起生活。例如，如果有 3 个，当移除它们时，它们可以节省 50%、25% 和 12.5%，那么如果你同时做这三个，你会得到 8 倍的加速。非常好。但是，如果你错过了其中的一个，你就无法接近那个。

剖析师应该是探石者，但如果他们错过了一个，你怎么知道？如果分析器的输出看起来令人印象深刻，但似乎并没有表明您可以实际修复多少，*这是否意味着没有？* 没有。 [*更多关于这一切。*](https://stackoverflow.com/a/1779343/23771)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T14:38:09.263

实际上，除了百分比之外，一些分析器确实给出了绝对时间。

真正的问题是**这些时间有多有用**，考虑到您可以根据当前机器负载和当前机器的规格等因素获得不同的时间。另外，请记住，当您在分析器中运行代码时，它的运行速度会比未分析的运行慢，因此**即使分析的运行也不能准确反映真实的运行时间**。

由于这些原因，有些人可能认为绝对时间无关紧要。然后，如果您假设时间之间的变化是乘以某个数字，那么百分比就是要查看的数量。然后，该百分比将保留绝对时间之间的比率，因此如果某件事花费了两倍的时间，它将有两倍的百分比。

当然，百分比并不完美，因为不能保证更改会是乘法的（例如，开销会是加法的）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T14:27:28.457

以毫秒为单位的时间会因许多因素而异——你的开发机器可能有四个处理器和 32gb 的 RAM——但用户机器可能只有单核和 1gb 的 RAM。

一致的（主要是¹）是“花费时间最长的位” - 因此百分比可以帮助您识别代码中最慢的部分，这些部分是您可以通过优化获得最多时间的部分。

¹尽管编译器如何基于处理器优化代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-17T16:53:40.043

百分比很好。但是需要有以毫秒为单位的时间。如果您必须比较执行相同任务的两个版本的软件，一个比另一个花费更长的时间。百分比比在每个函数中花费的绝对时间更难比较。为什么不让我们选择查看绝对时间的百分比呢？

我很惊讶这还没有被提出。

# android - 以编程方式显示软键盘 - 不工作

> ID：15928597
> 
> 赞同：3
> 
> 时间：2013-04-10T14:24:36.183
> 
> 标签：android, android-softkeyboard, android-input-method

我的屏幕上有一个切换按钮。如果我单击此按钮，我需要一个键盘才能显示在屏幕上。这是我现在拥有的代码，但它没有按预期显示键盘:(

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        keyboard = (ToggleButton) findViewById(R.id.keyboard);
        keyboard.setOnClickListener(displayKeyboard);
}

 OnClickListener displayKeyboard = new OnClickListener(){
        @Override
        public void onClick(View v) {
            if(client == null)
                   return;
            boolean on = ((ToggleButton) v).isChecked();
            if(on){ // show keyboard
                System.out.println("Togglebutton is ON");
                keyboard.requestFocus();
                InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                mgr.showSoftInput(keyboard, InputMethodManager.SHOW_IMPLICIT);
            }
            else{ // hide keyboard
                System.out.println("Togglebutton is OFF");
                InputMethodManager mgr = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
                mgr.hideSoftInputFromWindow(keyboard.getWindowToken(), 0);          }
        }
    }; 
```

当我单击键盘切换按钮时，我在 LogCat 中看到它进入 if/else 块，但否则不会在屏幕上显示任何键盘。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:28:42.617

随着`showSoftInput`你试图聚焦你的`keyboard`按钮并开始向它发送键盘事件，但它是不可聚焦的。让它像这样聚焦（在你的`onCreate`）：

```
keyboard.setFocusable(true);
keyboard.setFocusableInTouchMode(true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-02T05:13:42.793

你可以试试这个（在 UTILITY 类中）：

```
public static void hideSoftKeyboard(Activity activity) {
            InputMethodManager inputMethodManager = (InputMethodManager)  activity.getSystemService(Activity.INPUT_METHOD_SERVICE);
            inputMethodManager.hideSoftInputFromWindow(activity.getCurrentFocus().getWindowToken(), 0);
        }

     public static void showSoftKeyboard(Activity activity, View focusedView)
     {
         InputMethodManager inputMethodManager = (InputMethodManager)  activity.getSystemService(Activity.INPUT_METHOD_SERVICE);
         inputMethodManager.showSoftInput(view, InputMethodManager.SHOW_IMPLICIT);
     } 
```

# c - 测量程序的 C 执行时间、内存使用和 CPU 负载

> ID：15928598
> 
> 赞同：1
> 
> 时间：2013-04-10T14:24:39.860
> 
> 标签：c, execution-time

对于特定的 c 代码程序，我想测量：

```
execution time (most likely complete program execution time)
memory usage
CPU load 
```

我怎样才能在 C 中获得所有上述信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-23T13:43:39.900

您可以编写一个简单的代码来测量特定代码块的执行时间，使用标准 C 库进行时间/日期操作 (time.h)：[http ://en.wikipedia.org/wiki/C_date_and_time_functions](http://en.wikipedia.org/wiki/C_date_and_time_functions)

对于一个重要的程序，内存使用实际上是不可能准确测量的。您的程序是否使用共享库？那么，您是否将共享库使用的内存计算为仅属于您的程序？你的程序 fork() 生成的子进程呢？您是单独计算它们还是与主要过程一起计算它们？所有这些问题都可以回答，但这意味着您测量的内容取决于您的具体选择。

在 C 中，您可以做的是包装 malloc() 和 free() 使用您的包装器来跟踪您的内存分配。

对于 CPU 负载，您需要与操作系统交互。您无法从 C 获得该信息。

# java - Jython 生成类文件

> ID：15928601
> 
> 赞同：2
> 
> 时间：2013-04-10T14:24:43.493
> 
> 标签：java, python, class, jython

我想知道是否可以**生成与我的 Jython 程序对应的类文件**。

我找到了这个 ：

```
$> jython -m compileall myfolder 
```

与我的 jython 文件（.py）相比，这确实会生成名称一致的类文件，但我完全不知道如何使用它们，即使它是我正在寻找的......

如果可能的话，将不胜感激一个非常基本的例子。

非常感谢 ：）

# python - 连续执行批处理脚本

> ID：15928602
> 
> 赞同：1
> 
> 时间：2013-04-10T14:24:47.833
> 
> 标签：python, shell

嗨，当我离开机器时，我需要运行几个测试用例。用户脚本中是否有一种可能的方式来一个接一个地执行多个命令。即使之前的命令失败或抛出错误，以下命令也应该执行。

要运行的命令示例。

1) run.py -n test_app 2)run.py -n test_delete_app 3)run.py -n test_create_app

即使 1 失败， 2 也应该在 1 之后执行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:46:28.393

您可以一个接一个地运行多个命令命令，而不依赖于返回值，方法是用`;`'s 分隔它们：

```
run.py -n test_app; run.py -n test_delete_app; run.py -n test_create_app 
```

# installation - 如何在 WiX 安装程序中处理 ManagedBootstrapperApplicationHost 和重启/重启？

> ID：15928603
> 
> 赞同：3
> 
> 时间：2013-04-10T14:24:49.727
> 
> 标签：installation, wix, burn, wix3.7

我正在使用[WiX](http://en.wikipedia.org/wiki/WiX) [Burn](http://en.wikipedia.org/wiki/WiX#Burn)来安装我们项目的必备组件，并且我已经使用 ManagedBootstrapperApplicationHost 来拥有自定义 UI。我正在检查 Windows Installer 版本并将其作为先决条件进行安装，但它需要重新启动。

如何处理代码中的重启？

我尝试在下面的代码中检查它，但`e.status`重启时的值也是 0。

### 代码

```
private void PlanComplete(object sender, PlanCompleteEventArgs e)
{
    logger.LogInfoMessage("-------------->>  "+ e.Status.ToString());
    if (Hresult.Succeeded(e.Status))
    {
        this.root.PreApplyState = this.root.State;
        this.root.State = InstallationState.Applying;
        WixBA.Model.Engine.Apply(this.root.ViewWindowHandle);
    }
    else
    {
        this.root.State = InstallationState.Failed;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T15:17:40.470

[如果在对引导程序应用程序](http://blogs.msdn.com/b/heaths/archive/2011/10/28/introducing-managed-bootstrapper-applications.aspx)`ApplyComplete()`的回调中需要重新启动，引擎将返回。您可以在那个时候决定接受重新启动并从回调中返回。`Result.Restart``ApplyComplete()`

或者，您可能希望在完成对话框或其他内容上提示用户，让他们选择是否接受重新启动。在这种情况下，您可以`Result.Restart`从`Shutdown()`回调中返回，并且引擎将在您的引导程序应用程序退出后重新启动。

我倾向于在我的引导程序应用程序中最常使用第二个选项。

# php - PHP：将文本链接转换为锚标签

> ID：15928606
> 
> 赞同：3
> 
> 时间：2013-04-10T14:25:03.787
> 
> 标签：php, regex, pcre

我正在提取 RSS 提要并使用 DOMXPath 将所有现有的锚标记转换为自定义标记，出于各种原因，这些标记看起来像这样：

```
[webserviceLink]{$url}[/webserviceLink][webserviceLinkName]{$text}[/webserviceLinkName] 
```

这很好用，但我也想将所有非 html 文本链接转换为相同的格式，但遇到了一些问题。

这是我用于转换文本链接的代码：

```
$pattern = '(?xi)(?<![">])\b((?:https?://|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:\'".,<>?«»“”‘’]))';

$desc = preg_replace_callback("#$pattern#i", function($matches)
{
  $input = $matches[0];
  $url = preg_match('!^https?://!i', $input) ? $input : "http://$input";

  if (strlen($input) > 20 && !strpos($input, " "))
    $input = substr($input, 0, 18)."... ";

  return "[webserviceLink]{$url}[/webserviceLink][webserviceLinkName]{$input}[/webserviceLinkName]";
}, $desc); 
```

我不确定如何在此正则表达式中执行否定回调，以检查我正在转换的链接是否不在现有的 html 标记（如 img）或我上面的自定义链接标记中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:57:34.893

我能够使用 xpath 来完成这项工作。

```
$dom = new DOMDocument();
$dom->loadHTML(mb_convert_encoding($desc, 'HTML-ENTITIES', 'UTF-8'));
$xp = new DOMXPath($dom);

foreach ($xp->query('//text()[not(ancestor::a)]') as $node)
     {
        $pattern = '((?:https?://|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:\'".,<>?«»“”‘’]))';

        $replaced = preg_replace_callback("#$pattern#i", function($matches)
        {
          $input = $matches[0];
          $url = preg_match('!^https?://!i', $input) ? $input : "http://$input";

          if (strlen($input) > 20 && !strpos($input, " "))
            $input = substr($input, 0, 18)."... ";

          return "<a href=\"{$url}\">{$input}</a>";
        }, $node->wholeText);

          $newNode  = $dom->createDocumentFragment();
          $newNode->appendXML($replaced);
          $node->parentNode->replaceChild($newNode, $node);
     } 
```

# windows-installer - 如何在 Windows 安装程序中禁用升级模式，以便在重新安装之前始终强制用户卸载

> ID：15928608
> 
> 赞同：2
> 
> 时间：2013-04-10T14:25:07.760
> 
> 标签：windows-installer, upgrade, installshield

如何在 Windows 安装程序中禁用升级模式，以便用户在重新安装之前始终被迫卸载。这是因为在我们可能不想处理的许多情况下升级可能会失败。有没有`RESINSTALLMODE`可以为此更改的选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T13:33:35.500

InstallShield 的项目模板默认生成使用次要升级策略的 MSI。未定义 MajorUpgrade 规则。

只需导航到媒体 | 升级 | 为升级方案准备设置 | 升级 Windows 安装程序安装程序

在常用选项卡上，将 Small/Minor Upgrade Settings 从 Prompt 更改为 Disable。

假设您没有建立任何自动化来更改产品代码从构建到构建，每个 MSI 都将是一个小/次要升级，并且 Setup.exe（如果生成）将告诉用户执行卸载。如果没有生成 Setup.exe，Windows Installer 将给出一条错误消息，通知用户已经安装了另一个版本的产品，需要先将其删除。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T15:12:39.920

您可以通过两种方式阻止它。首先，您可以在新 MSI 检测到旧 MSI 时阻止它。为此，您使用您在表中`ActionProperty`定义的。`Upgrade`我将使用 WiX 语法，因为我知道最好（根据需要转换为您的工具）：

```
<Upgrade Id='PUT-YOUR-UPGRADECODE-HERE'>
   <UpgradeVersion Maximum='YourProductVersionHere' Property='OLDPRODUCTSFOUND' />
</Upgrade>

<CustomAction Id='ErrorWhenOldProductFound'
              Error='Please, uninstall previous versions of [ProductName] before continuing' />
<InstallExecuteSequence>
    <Custom Action='ErrorWhenOldProductFound'>NOT Installed AND OLDPRODUCTSFOUND</Custom>
</InstallExecuteSequence> 
```

以下是 WiX v3.5+ 工具集中执行相同操作的简单语法：

```
<MajorUpgrade DisallowUpgradeErrorMessage='Please, uninstall previous versions of [ProductName] before continuing' /> 
```

第二种选择是阻止旧 MSI 中的升级，*如果*您在发货前添加它。该`UPGRADINGPRODUCTCODE`属性是在旧的 MSI 中设置的，因此我们可以在其上创建一个启动条件。同样，WiX 语法看起来像（根据需要转换为您的工具）：

```
<Condition Message="[ProductName] cannot be upgraded, please uninstall it manually.">
   Installed OR UPGRADINGPRODUCTCODE
</Condition> 
```

# javascript - 在 addEventListener 的监听器中使用捕获

> ID：15928609
> 
> 赞同：2
> 
> 时间：2013-04-10T14:25:10.467
> 
> 标签：javascript

我想在 target.addEventListener(type, listener[, useCapture]) 的监听器方法中确定 useCapture 的布尔值。有没有办法做到这一点，或者有可能吗？

```
target.addEventListener(type, listener[, useCapture]);
divs[i].addEventListener("click", listener, false);

function listener()
{
    //Determine the false of useCapture here;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-10-30T22:39:10.153

如果没有为监听器传递不同的值`useCaputre`，您可以检查监听器是否处于捕获阶段。

```
var useCapture = event.eventPhase === Event.CAPTURING_PHASE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-30T22:56:16.407

活动分为三个[阶段](http://www.w3.org/TR/2012/WD-DOM-Level-3-Events-20120906/#glossary-phase)：

> *   **捕获阶段**：事件对象必须通过目标的祖先从[defaultView](http://www.w3.org/TR/2012/WD-DOM-Level-3-Events-20120906/#glossary-defaultView)传播到目标的父级。这个阶段也称为*捕获阶段*。为此阶段注册的事件侦听器必须在事件到达其目标之前对其进行处理。
>     
>     
> *   **目标阶段**：事件对象必须到达事件对象的事件[目标](http://www.w3.org/TR/2012/WD-DOM-Level-3-Events-20120906/#glossary-event-target)。此阶段也称为 *目标*阶段。为该阶段注册的事件侦听器必须在事件到达其目标后对其进行处理。如果[事件类型](http://www.w3.org/TR/2012/WD-DOM-Level-3-Events-20120906/#glossary-event-type)指示事件不能冒泡，则事件对象必须在此阶段完成后停止。
>     
>     
> *   **冒泡阶段**：事件对象以相反的顺序通过目标的祖先传播，从目标的父级开始，以[defaultView](http://www.w3.org/TR/2012/WD-DOM-Level-3-Events-20120906/#glossary-defaultView)结束。这个阶段也称为 *冒泡阶段*。为此阶段注册的事件侦听器必须在事件到达其目标后对其进行处理。

`eventPhase`您可以通过 的属性知道当前阶段`event`。

但是，问题在于没有完美的对应关系：

*   如果`event.eventPhase`是`1`（捕获阶段），则表示`useCapture`was `true`。
*   如果`event.eventPhase`是`3`（冒泡阶段），则表示`useCapture`was `false`。
*   如果`event.eventPhase`是`2`（在目标处），`useCapture`则可能是`true`或`false`。

# .net - .Net 4 中的 IsNullOrWhiteSpace 扩展方法？

> ID：15928612
> 
> 赞同：3
> 
> 时间：2013-04-10T14:25:13.083
> 
> 标签：.net

.Net 4 中是否定义了 IsNullOrWhiteSpace 的扩展方法？

我以前用过这个扩展方法，但是找不到，我开始怀疑我当时是否在使用自定义扩展而没有意识到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-16T16:50:08.623

您可能参考了 WebGrease.dll。在 Microsoft.Ajax.Utilities 命名空间中，字符串上有一个 IsNullOrWhiteSpace() 扩展方法。

```
using Microsoft.Ajax.Utilities;

"".IsNullOrWhiteSpace(); //This compiles 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-10T14:26:24.900

这不是扩展方法，而是类的`static`方法[`String`](http://msdn.microsoft.com/en-us/library/system.string%28v=vs.100%29.aspx)。

[看这里。](http://msdn.microsoft.com/fr-fr/library/system.string.isnullorwhitespace%28v=vs.100%29.aspx)

所以你需要写：

```
string s = "123";
if(String.IsNullOrWhiteSpace(s))
{
} 
```

您始终可以编写自己的扩展名：

```
public static class StringExtensions
{
    public static bool IsNullOrWhiteSpace(this string s)
    {
       return String.IsNullOrWhiteSpace(s);
    }
}

string s = "123";
if(s.IsNullOrWhiteSpace())
{
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T14:27:07.863

它不是扩展方法，它[是`String`](http://msdn.microsoft.com/en-us/library/system.string.isnullorwhitespace.aspx).

```
"".IsNullOrWhiteSpace()       // Error!
String.IsNullOrWhiteSpace("") // Correct 
```

# css - 如何快速判断页面上正在使用 CSS 文件的哪些部分？

> ID：15928614
> 
> 赞同：3
> 
> 时间：2013-04-10T14:25:16.893
> 
> 标签：css

我有一个应用于多个页面的大量 CSS 文件。我希望将它分解为一个通用 CSS 文件和几个页面级 CSS 文件，因为它变得难以使用。不幸的是，要说出究竟什么是常见的并不容易。我希望有一种方法可以快速查看给定页面上使用了哪些行/选择器。有谁知道可以做到这一点的工具？我不想使用开发人员工具并一一浏览 DOM 元素。我想查看 CSS 文件并查看未使用的选择器变灰之类的。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:41:32.507

您至少可以在 Chrome中使用开发人员工具中的“**审核”选项卡。**运行它后，它会告诉您当前页面中未使用哪些样式。

在这个网站上测试它： ![在此处输入图像描述](https://i.stack.imgur.com/rtCgo.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:46:20.353

对于 Firefox，有一个名为[CSS Usage](https://addons.mozilla.org/de/firefox/addon/css-usage/)的附加组件——可能也值得一看。

# .net - 阅读 Excel 的编辑框

> ID：15928617
> 
> 赞同：2
> 
> 时间：2013-04-10T14:25:24.603
> 
> 标签：.net, excel, winapi

经过一番挖掘，事实证明Excel的编辑控件不是标准的Windows TextBox，我似乎无法做到`GetWindowText()`这一点。对其进行 Spy 会发现它属于一个名为`EXCEL6`. 有没有办法使用平台调用或其他东西从非标准文本控件中获取文本？

后来我在 MSDN 中发现 GetWindowText() 不适用于属于其他进程的控件，我需要将 WM_GETTEXT 直接发送到目标窗口。我也试过了，但它似乎返回了垃圾数据。

# javascript - 使用 HTML、Javascript 或 jQuery 嵌入本地托管视频的简单方法

> ID：15928619
> 
> 赞同：0
> 
> 时间：2013-04-10T14:25:28.577
> 
> 标签：javascript, jquery, html, video, embed

我需要将视频放在网页中，以便当页面打开时，视频将可见并在用户单击它时开始播放。视频文件采用 .wmv 格式并存储在托管网页的同一服务器上。我在某些地方读到，要让嵌入式视频在所有浏览器上工作并不容易，所以我正在寻找实现这一目标的最简单方法，无论是 HTML、Javascript 还是 jQuery。如果有办法不必这样做，我宁愿不转换视频文件或存储它的多个副本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:28:23.210

由于 WMV 是一种专有格式，您需要至少转换一次视频（据我所知，播放 WMV 的唯一方法是通过 Windows Media Player activeX 加载项），遗憾的是，这意味着如果要处理所有导航器，则需要多个副本。

您选择的工具类似于 jwplayer ( [http://www.longtailvideo.com/jw-player/](http://www.longtailvideo.com/jw-player/) )。MP4 适用于一些，而 WEBM 适用于另一些，幸运的是，flash 可以读取 MP4。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T15:56:07.683

Sébastien Renauld 和 Blazemonger 说过。

您无法通过网络可靠地流式传输您的 wmv（Windows 媒体视频）视频，因为许多浏览器不支持它。

正如 Blazemonger 所说，上传到 YouTube 或其他视频托管网站将为您解决这个问题。他们还将为您提供一个嵌入式网址，可以将其发送给您的所有朋友。

否则，正如 Sébastien Renauld 指出的那样，您需要将视频转换为 h.264 .mp4 视频和另一种格式，如 .ogv 或 .webM。大多数浏览器都支持 mp4，但 FireFox 不支持，这就是您需要第二种格式的原因。FireFox 支持 .ogv 和 .webM。

# jquery - JavaScript 回调的工作原理

> ID：15928624
> 
> 赞同：3
> 
> 时间：2013-04-10T14:25:49.543
> 
> 标签：jquery, browser

示例代码：

```
function GetEmployee(Id, callback) {
        return $.ajax({
             ...
             ...
            success: function(data) {
                if(data.success == 1)
                    callback('1');
                else
                    callback('2');
            },
            ...
        });
    } 
```

假设这个特定的 JQuery 代码正在我的机器（客户端）的选项卡“2”中的 Firefox 中执行，一旦它看到 ajax 调用，就会对 Web 服务器进行调用，并且一旦 Web 服务器处理了请求，它会将此响应发送回我的机器（客户端）。

现在，谁会监听服务器响应并将这个响应带入我的回调方法中？我的意思是，识别 Firefox 及其选项卡号和回调方法（成功：函数（数据））。谢谢阅读。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:32:42.727

您的问题本身似乎并没有多大意义。您不能进行交叉表调用，因此您根本不必担心这一点。回调实际上只是与其他任何函数一样的函数，您的 ajax 调用也是如此。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:15:07.013

我不确定我是否完全理解这个问题，或者更确切地说是你的要求。确保为您处理正确的响应，因此除非您从学术角度提出要求，否则您无需担心。

至于你的另一个问题，“现在我可以把这个响应带入我的回调方法中吗？” 您应该能够将响应数据作为参数传递给您的回调：

```
callback(data); 
```

查看调用`GetEmployee()`.

# facebook - Facebook 应用程序名称是否可以翻译，以便在不同语言的搜索结果中可用？

> ID：15928626
> 
> 赞同：0
> 
> 时间：2013-04-10T14:25:52.670
> 
> 标签：facebook, facebook-apps

我想知道是否有可能拥有一个 Facebook 应用程序但将其翻译成其他语言，以便可以通过 Facebook 搜索栏搜索许多不同语言的应用程序名称。

例如，如果我想制作一个名为“Warm Spring”的应用程序，我可以在我的开发人员仪表板中翻译它，以便如果来自德国的某些人搜索“Warm Fruhling”，它可以在搜索结果中找到吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:40:25.670

根据[文档](https://developers.facebook.com/docs/internationalization/#prepare)，您的应用名称可以翻译。只需按照链接中指示的步骤操作即可。

# objective-c - Xcode 构建参数

> ID：15928630
> 
> 赞同：4
> 
> 时间：2013-04-10T14:26:07.107
> 
> 标签：objective-c, xcode, build

我正在考虑编译构建一个我使用 Objective C 编写的简单应用程序。目前所有应用程序都会在屏幕上打印“hello [dev|production]”。

我想做的是能够在 xcode 中添加一个构建参数，这样如果我使用 dev 标志构建它，那么输出将是“hello dev”，否则输出将是“hello production”。

有人可以给我一个代码示例或链接到允许我这样做的资源。

这个想法不是区分 DEBUG 和 PRODUCTION，而是能够将值添加到构建过程中，这将改变编译的应用程序输出。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:34:00.430

您可以在此处为预处理器宏添加另一个值：

![在此处输入图像描述](https://i.stack.imgur.com/ELCNS.png)

如果要添加另一个构建配置： ![在此处输入图像描述](https://i.stack.imgur.com/RCE98.png)

**编辑1：**

> 这个想法不是区分 DEBUG 和 PRODUCTION，而是能够将值添加到构建过程中，这将改变编译的应用程序输出。

您可以做的是拥有两个 plist 文件，其中包含您要在应用程序中使用的所有值。如果您处于调试模式，请使用 debug.plist 文件，否则使用 release.plist。这使您可以更好地控制每次构建在应用程序中使用的内容。

您可以在此处找到配置：

![在此处输入图像描述](https://i.stack.imgur.com/v7Mwd.png)

（我以 PlotCreator 为例……它是一个开源库）

# python - 用python打开重音xml文件

> ID：15928631
> 
> 赞同：0
> 
> 时间：2013-04-10T14:26:07.857
> 
> 标签：python, xml, file-io, glob

我有这段代码

```
for xmlword in moviexmlfind:
                    fileinfo = jukeboxpath + xmlword + "*.xml"
                    for name in glob.glob(fileinfo): 
```

如果 xmlword 包含重音字母，则会出错，提示字符不在范围内。

我也试过：

```
if lookfor in open(lookfor + '.xml').read(): 
```

但这会引发编码错误。

如何对其进行编码以打开带重音的文件名？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:49:29.900

```
import codecs
codecs.open("some/file/with/unicode","rb",encoding="utf8") 
```

应该可以正常工作:)（假设文件中的 utf8 编码）

我也认为你的问题是你只是给出没有路径的文件名尝试`os.path.join(jukeboxpath,xml_file_name)`作为你的路径而不是 xml_file_name

# jira - 远程 JIRA 问题创建

> ID：15928636
> 
> 赞同：0
> 
> 时间：2013-04-10T14:26:38.923
> 
> 标签：jira

我需要从我的 C# 实用程序将 JIRA 问题相互链接。

我无法使用 REST API，因为我的 JIRA 版本是 4.4，我无法升级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:30:12.953

这很棘手，因为您必须使用的 SOAP 方法中没有 addLink() 方法。我使用 shell 脚本直接调用 URL，但您需要知道 JIRA 问题 ID，而不仅仅是问题键。我认为这适用于 JIRA 4.4 但不适用于 5.x

〜马特

ps 这个编辑器中的代码格式化程序太糟糕了！

```
#
# Add links to JIRA issues
#
# Matt Doar
# CustomWare
# 
# usage: create_links.sh issue_id issue_key
# where the issue_id is the unique id for a JIRA issue, not it's issue key.
# You can see the issue id in the XML view of an issue.
# and issue_key is the other issue to be linked to.

USERNAME=admin
PASSWORD=secret
SERVER_URL="http://localhost:8080"

DASHBOARD_PAGE_URL=$SERVER_URL/secure/Dashboard.jspa
COOKIE_FILE_LOCATION=jiracoookie

# Get the authentication cookie
curl -u $USERNAME:$PASSWORD --cookie-jar $COOKIE_FILE_LOCATION -sS --output /dev/null $DASHBOARD_PAGE_URL

issueid=$1
issuekey=$2
#echo "Linking issue: $issueid and $issuekey"
curl --cookie $COOKIE_FILE_LOCATION --header "X-Atlassian-Token: no-check" -sS --output /dev/null -d "id=$issueid" -d "linkDesc=relates to" -d "linkKey=$issuekey" "$SERVER_URL/secure/LinkExistingIssue.jspa"

rm -f $COOKIE_FILE_LOCATION 
```

# .htaccess - Magento 在 nginx 上读取/需要 htaccess？

> ID：15928637
> 
> 赞同：0
> 
> 时间：2013-04-10T14:26:40.390
> 
> 标签：.htaccess, magento, nginx

我们在 nginx、php5 和 percona 上运行了一个 magento 社区安装

我们从命令行手动运行已安装的 solr 网桥的索引。

我们最近达到了 256MB 的内存不足限制，这意味着索引无法完成。

所以我们增加了 php.ini 中的值，但仍然会出现问题（mysql 重新启动等）。

检查 php 信息，我们会看到 memory_limit 报告的新正确值，高于 256MB，但索引总是会达到这个限制

唯一能找到 256MB 值的地方是 htaccess。只是为了好玩，我们将其设置为 8MB 并重新启动索引，然后在这个新限制下失败。将 htaccess 中的值设置为我们在 php.ini 中使用的值，然后允许索引器完成。

当我们使用 nginx 时，为什么 magento 会读取 htaccess，并且删除它会导致其他看不见的 magento 问题无休止？

我们假设 nginx 根本没有使用 htaccess，那么为什么 magento 会寻找它呢？

# mysql - 即使有索引，MySQL 语句也非常慢

> ID：15928640
> 
> 赞同：4
> 
> 时间：2013-04-10T14:26:42.100
> 
> 标签：mysql, sql

以下查询大约需要 200 秒才能完成。我想要实现的是让已经进行了 6 次或更多付款但尚未下任何订单的用户（有 2 个针对不同市场的订单表）。

`u.id`,`ju.id`都是主键。

我已在两个订单表上将`user_id`和`order_status`合并为一个索引。如果我删除连接并`COUNT()`在`mp_orders`表上，查询需要 8 秒才能完成，但使用它，它需要太长时间。我想我已经索引了我可以拥有的所有东西，但我不明白为什么需要这么长时间才能完成。有任何想法吗？

```
SELECT 
    u.id, 
    ju.name,
    COUNT(p.id) as payment_count, 
    COUNT(o.id) as order_count,
    COUNT(mi.id) as marketplace_order_count
FROM users as u
    INNER JOIN users2 as ju
        ON u.id = ju.id
    INNER JOIN payments as p
        ON u.id = p.user_id
    LEFT OUTER JOIN orders as o
        ON u.id = o.user_id
            AND o.order_status = 1
    LEFT OUTER JOIN mp_orders as mi
        ON u.id = mi.producer
            AND mi.order_status = 1
WHERE u.package != 1
AND u.enabled = 1
AND u.chart_ban = 0
GROUP BY u.id
HAVING COUNT(p.id) >= 6
    AND COUNT(o.id) = 0
    AND COUNT(mi.id) = 0
LIMIT 10 
```

付款表

```
+-----------------+---------------+------+-----+---------+----------------+
| Field           | Type          | Null | Key | Default | Extra          |
+-----------------+---------------+------+-----+---------+----------------+
| id              | bigint(255)   | NO   | PRI | NULL    | auto_increment |
| user_id         | bigint(255)   | NO   |     | NULL    |                |
+-----------------+---------------+------+-----+---------+----------------+ 
```

订单表（mp_orders 表几乎相同）

```
+-----------------+---------------+------+-----+---------+----------------+
| Field           | Type          | Null | Key | Default | Extra          |
+-----------------+---------------+------+-----+---------+----------------+
| id              | int(255)      | NO   | PRI | NULL    | auto_increment |
| order_number    | varchar(1024) | NO   | MUL | NULL    |                |
| user_id         | int(255)      | NO   | MUL | NULL    |                |
+-----------------+---------------+------+-----+---------+----------------+ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T14:39:06.680

您不需要计算订单的行数，您需要检索没有订单的用户，这不是一回事。

过滤没有订单的用户，而不是计数：

```
SELECT 
    u.id, 
    ju.name,
    COUNT(p.id) as payment_count
FROM users as u
    INNER JOIN users2 as ju
        ON u.id = ju.id
    INNER JOIN payments as p
        ON u.id = p.user_id
    LEFT OUTER JOIN orders as o
        ON u.id = o.user_id
            AND o.order_status = 1
    LEFT OUTER JOIN mp_orders as mi
        ON u.id = mi.producer
            AND mi.order_status = 1
WHERE u.package != 1
AND u.enabled = 1
AND u.chart_ban = 0
AND o.id IS NULL    -- filter happens here
AND mi.id IS NULL   -- and here
GROUP BY u.id
HAVING COUNT(p.id) >= 6
LIMIT 10 
```

这将阻止引擎为您的每个用户计算每个订单，您将获得大量时间。

可以认为引擎应该使用索引来进行计数，因此计数必须足够快。
[我将引用另一个站点：InnoDB COUNT(id) - 为什么这么慢？](http://blog.ijun.org/2009/04/innodb-countid-why-so-slow.html)

> 这可能与缓冲有关，InnoDb 不会将它缓存到内存中的索引缓存到实际数据行中，因为这似乎是一个简单的扫描，它不是将主键索引加载，而是将所有数据加载到 RAM 中，并且然后在其上运行您的查询。这可能需要一些时间来工作 - 希望如果您在同一张表上运行查询，那么它们会运行得更快。
> 
> MyIsam 将索引加载到 RAM 中，然后在此空间上运行其计算，然后返回结果，因为索引通常比表中的所有数据小得多，您应该在那里看到立即的差异。
> 
> 另一种选择可能是 innodb 将数据存储在磁盘上的方式 - innodb 文件是一个虚拟表空间，因此不一定按表中的数据排序，如果您有一个碎片数据文件，那么这可能会产生问题您的磁盘 IO，因此运行速度较慢。MyIsam 通常是顺序文件，因此，如果您使用索引来访问数据，系统会确切知道该行位于磁盘上的哪个位置 - 您在 innodb 中没有这种奢侈，但我认为不会出现这个特殊问题只需一个简单的计数（*）==================== [http://dev.mysql.com/doc/refman/5.0/en/innodb-限制](http://dev.mysql.com/doc/refman/5.0/en/innodb-restrictions.html) .html 解释了这一点：
> 
> InnoDB 不保留 table 中的内部行数。（实际上，由于多版本控制，这会有些复杂。）要处理 SELECT COUNT(*) FROM t 语句，InnoDB 必须扫描表的索引，如果索引不完全在缓冲区中，这需要一些时间水池。要获得快速计数，您必须使用您自己创建的计数器表，并让您的应用程序根据它所做的插入和删除来更新它。如果您的表不经常更改，使用 MySQL 查询缓存是一个很好的解决方案。如果近似的行数足够，也可以使用 SHOW TABLE STATUS。请参阅第 14.2.11 节，“InnoDB 性能调优技巧”。=================== todd_farmer：它实际上确实解释了差异 - MyISAM 理解 COUNT(ID) 其中 ID 是 PK 列与 COUNT(*) 相同，

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T14:36:59.023

尝试`COUNT() = 0`通过`IS NULL`检查删除：

```
SELECT 
    u.id, 
    ju.name,
    COUNT(p.id) as payment_count, 
    0 as order_count,
    0 as marketplace_order_count
FROM users as u
    INNER JOIN users2 as ju
        ON u.id = ju.id
    INNER JOIN payments as p
        ON u.id = p.user_id
    LEFT OUTER JOIN orders as o
        ON u.id = o.user_id
       AND o.order_status = 1
    LEFT OUTER JOIN mp_orders as mi
        ON u.id = mi.producer
       AND mi.order_status = 1
WHERE 
    u.package != 1
AND u.enabled = 1
AND u.chart_ban = 0
AND mi.id IS NULL
AND o.id IS NULL
GROUP BY u.id
HAVING COUNT(p.id) >= 6
LIMIT 10 
```

但我认为 8 秒对于普通查询来说仍然太多了。您应该发布没有 OUTER JOINS 的主查询的解释计划以查看问题所在，例如包、启用和图表禁止过滤器可能会完全破坏它。

# c# - BlockingCollection 最大尺寸

> ID：15928642
> 
> 赞同：6
> 
> 时间：2013-04-10T14:26:48.820
> 
> 标签：c#, .net-4.0, concurrency

我知道使用 ConcurrentQueue 的 BlockingCollection 的有界容量为 100。

但是我不确定这意味着什么。

我正在尝试实现一个并发缓存，如果队列大小太大，它可以出队，可以在一个操作中出队/入队（即缓存溢出时松散的消息）。有没有办法为此使用有限容量，或者手动执行此操作或创建新集合更好。

基本上我有一个阅读线程和几个写作线程。如果队列中的数据是所有作者中“最新的”，我会很高兴。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:44:49.413

N 的有限容量意味着如果队列已经包含 N 个项目，则任何尝试添加另一个项目的线程都将阻塞，直到另一个线程删除一个项目。

您似乎想要的是一个不同的概念-您希望最近添加的项目成为消费线程出列的第一个项目。

您可以通过对底层存储使用 a[`ConcurrentStack`](http://msdn.microsoft.com/en-gb/library/dd267331.aspx)而不是 ConcurrentQueue 来实现这一点。

您将使用[`this constructor`](http://msdn.microsoft.com/en-gb/library/dd287133.aspx)并传入一个`ConcurrentStack`.

例如：

```
var blockingCollection = new BlockingCollection<int>(new ConcurrentStack<int>()); 
```

通过使用`ConcurrentStack`，您可以确保消费线程出列的每个项目都是当时队列中最新鲜的项目。

另请注意，如果您为阻塞集合指定上限，则可以使用[`BlockingCollection.TryAdd()`](http://msdn.microsoft.com/en-us/library/dd267245.aspx)which 将`false`在您调用它时集合已满时返回。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T17:53:01.357

在我看来，您正在尝试构建诸如 MRU（最近使用的）缓存之类的东西。`BlockingCollection`不是最好的方法。

我建议您使用[LinkedList](http://msdn.microsoft.com/en-us/library/he2s3bh7.aspx)。它不是线程安全的，因此您必须提供自己的同步，但这并不太难。您的入队方法如下所示：

```
LinkedList<MyType> TheQueue = new LinkedList<MyType>();
object listLock = new object();

void Enqueue(MyType item)
{
    lock (listLock)
    {
        TheQueue.AddFirst(item);
        while (TheQueue.Count > MaxQueueSize)
        {
            // Queue overflow. Reduce to max size.
            TheQueue.RemoveLast();
        }
    }
} 
```

出队更容易：

```
MyType Dequeue()
{
    lock (listLock)
    {
        return (TheQueue.Count > 0) ? TheQueue.RemoveLast() : null;
    }
} 
```

如果您希望消费者在队列上进行非忙碌等待，则涉及更多。你可以用`Monitor.Wait`和来做`Monitor.Pulse`。有关示例，请参见[Monitor.Pulse](http://msdn.microsoft.com/en-us/library/system.threading.monitor.pulse.aspx)页面上的示例。

更新：

我突然想到你可以用循环缓冲区（数组）做同样的事情。只需保持头部和尾部指针。您在 at 插入`head`和删除`tail`。如果你去插入，和`head == tail`，那么你需要增加`tail`，这有效地删除了前`tail`一项。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-12-31T03:46:56.547

如果您想要一个`BlockingCollection`包含 N 个最新元素的自定义，并在其已满时删除最旧的元素，您可以基于[`Channel<T>`](https://docs.microsoft.com/en-us/dotnet/api/system.threading.channels.channel-1). [Channels](https://devblogs.microsoft.com/dotnet/an-introduction-to-system-threading-channels/)旨在用于异步场景，但让它们阻塞消费者是微不足道的，并且不应该导致任何不需要的副作用（如死锁），即使在`SynchronizationContext`已安装的环境中使用也是如此。

```
public class MostRecentBlockingCollection<T>
{
    private readonly Channel<T> _channel;

    public MostRecentBlockingCollection(int capacity)
    {
        _channel = Channel.CreateBounded<T>(new BoundedChannelOptions(capacity)
        {
            FullMode = BoundedChannelFullMode.DropOldest,
        });
    }

    public bool IsCompleted => _channel.Reader.Completion.IsCompleted;

    public void Add(T item)
        => _channel.Writer.WriteAsync(item).AsTask().GetAwaiter().GetResult();

    public T Take()
        => _channel.Reader.ReadAsync().AsTask().GetAwaiter().GetResult();

    public void CompleteAdding() => _channel.Writer.Complete();

    public IEnumerable<T> GetConsumingEnumerable()
    {
        while (_channel.Reader.WaitToReadAsync().AsTask().GetAwaiter().GetResult())
            while (_channel.Reader.TryRead(out var item))
                yield return item;
    }
} 
```

该类`MostRecentBlockingCollection`仅阻止消费者。生产者总是可以在集合中添加项目，导致（可能）一些以前添加的元素被删除。

添加取消支持应该很简单，因为`Channel<T>`API 已经支持它。添加对超时的支持不那么简单，但应该不是很难做到。

# r - R组合数据框中的2列

> ID：15928643
> 
> 赞同：0
> 
> 时间：2013-04-10T14:26:48.887
> 
> 标签：r

我对 R 相当陌生。我有一个从 postgres 数据库中提取的数据框，其结构如下

```
 qc_date qc_camera qc_head qc_sensitivity
269 2012-05-04       RED       1            332
270 2012-05-04       RED       2            333
271 2012-05-10       RED       1            318
272 2012-05-10       RED       2            325
273 2012-05-10      BLUE       1            320
274 2012-05-10      BLUE       2            329
275 2012-05-15       RED       1            330
276 2012-05-15       RED       2            332 
```

如何合并第 2 列和第 3 列以生成

```
 qc_date qc_cam_head qc_sensitivity
269 2012-05-04       RED H1            332
270 2012-05-04       RED H2            333
271 2012-05-10       RED H1            318
272 2012-05-10       RED H2            325
273 2012-05-10      BLUE H1            320
274 2012-05-10      BLUE H2            329
275 2012-05-15       RED H1            330
276 2012-05-15       RED H2            332 
```

我可以使用自己组合两列

`cbind(paste(df_date[,2],df[,3], sep=" H"))`

如何在保留其他 2 列的同时使用此“绑定功能”

```
structure(list(qc_date = structure(c(15464, 15464, 15470, 15470, 
15470, 15470, 15475, 15475, 15481, 15481, 15481, 15481, 15490, 
15490, 15490, 15490, 15504, 15504, 15504, 15504, 15512, 15512, 
15512, 15512, 15519, 15519, 15519, 15519, 15525, 15525, 15525, 
15525, 15531, 15531, 15531, 15531, 15538, 15538, 15539, 15539, 
15548, 15548, 15548, 15548, 15554, 15554, 15554, 15554, 15561, 
15561, 15561, 15561, 15561, 15567, 15567, 15567, 15567, 15567, 
15567, 15576, 15576, 15576, 15576, 15580, 15580, 15580, 15580, 
15587, 15587, 15587, 15587, 15595, 15595, 15595, 15595, 15601, 
15601, 15601, 15601, 15601, 15609, 15609, 15609, 15609, 15614, 
15614, 15614, 15614, 15621, 15621, 15621, 15621, 15628, 15628, 
15628, 15628, 15628, 15638, 15638, 15638, 15638, 15645, 15645, 
15645, 15645, 15649, 15649, 15651, 15651, 15656, 15656, 15656, 
15656, 15663, 15663, 15664, 15664, 15671, 15671, 15671, 15671, 
15678, 15678, 15678, 15678, 15684, 15684, 15685, 15685, 15692, 
15692, 15692, 15692, 15692, 15692, 15701, 15701, 15701, 15701, 
15705, 15705, 15713, 15713, 15716, 15716, 15719, 15719, 15719, 
15719, 15728, 15728, 15728, 15728, 15733, 15733, 15733, 15733, 
15741, 15741, 15741, 15741, 15741, 15747, 15747, 15747, 15749, 
15749, 15754, 15754, 15754, 15754, 15762, 15762, 15762, 15762, 
15762, 15768, 15768, 15768, 15768, 15768, 15777, 15777, 15778, 
15778, 15789, 15789, 15790, 15790, 15799, 15799, 15799, 15799, 
15804, 15804, 15804, 15804), class = "Date"), qc_camera = c("RED", 
"RED", "RED", "RED", "BLUE", "BLUE", "RED", "RED", "RED", "RED", 
"BLUE", "BLUE", "RED", "RED", "BLUE", "BLUE", "BLUE", "BLUE", 
"RED", "RED", "RED", "RED", "BLUE", "BLUE", "RED", "RED", "BLUE", 
"BLUE", "RED", "RED", "BLUE", "BLUE", "BLUE", "BLUE", "RED", 
"RED", "RED", "RED", "BLUE", "BLUE", "BLUE", "BLUE", "RED", "RED", 
"RED", "RED", "BLUE", "BLUE", "BLUE", "BLUE", "RED", "RED", "RED", 
"BLUE", "RED", "BLUE", "RED", "BLUE", "BLUE", "BLUE", "BLUE", 
"RED", "RED", "RED", "RED", "BLUE", "BLUE", "BLUE", "BLUE", "RED", 
"RED", "RED", "RED", "BLUE", "BLUE", "BLUE", "BLUE", "BLUE", 
"RED", "RED", "RED", "RED", "BLUE", "BLUE", "BLUE", "BLUE", "RED", 
"RED", "RED", "RED", "BLUE", "BLUE", "RED", "RED", "BLUE", "BLUE", 
"BLUE", "RED", "RED", "BLUE", "BLUE", "BLUE", "BLUE", "RED", 
"RED", "RED", "RED", "BLUE", "BLUE", "RED", "RED", "BLUE", "BLUE", 
"RED", "RED", "BLUE", "BLUE", "RED", "RED", "BLUE", "BLUE", "BLUE", 
"BLUE", "RED", "RED", "RED", "RED", "BLUE", "BLUE", "BLUE", "BLUE", 
"BLUE", "BLUE", "RED", "RED", "BLUE", "BLUE", "RED", "RED", "RED", 
"RED", "RED", "RED", "BLUE", "BLUE", "BLUE", "BLUE", "RED", "RED", 
"RED", "RED", "BLUE", "BLUE", "BLUE", "BLUE", "RED", "RED", "BLUE", 
"BLUE", "BLUE", "RED", "RED", "RED", "RED", "RED", "BLUE", "BLUE", 
"BLUE", "BLUE", "RED", "RED", "BLUE", "BLUE", "BLUE", "RED", 
"RED", "BLUE", "BLUE", "RED", "RED", "RED", "BLUE", "BLUE", "RED", 
"RED", "RED", "RED", "BLUE", "BLUE", "BLUE", "BLUE", "RED", "RED", 
"RED", "RED", "BLUE", "BLUE"), qc_head = c(1L, 2L, 1L, 2L, 1L, 
2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 
2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 
2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 2L, 
1L, 1L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 2L, 
1L, 2L, 1L, 2L, 2L, 1L, 1L, 2L, 1L, 1L, 2L, 1L, 2L, 1L, 2L, 2L, 
1L, 1L, 2L, 2L, 1L, 2L, 1L, 1L, 2L, 1L, 2L, 2L, 2L, 1L, 2L, 1L, 
2L, 1L, 1L, 2L, 1L, 2L, 1L, 2L, 2L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 
1L, 2L, 1L, 2L, 2L, 1L, 2L, 1L, 1L, 2L, 2L, 1L, 1L, 1L, 2L, 2L, 
2L, 1L, 1L, 2L, 2L, 1L, 2L, 1L, 1L, 2L, 2L, 1L, 1L, 2L, 1L, 2L, 
1L, 2L, 1L, 2L, 2L, 1L, 2L, 1L, 1L, 1L, 2L, 1L, 2L, 1L, 1L, 2L, 
2L, 1L, 2L, 1L, 1L, 2L, 2L, 1L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 1L, 
2L, 1L, 2L, 1L, 2L, 1L, 2L, 1L, 1L, 2L, 1L, 2L, 2L, 1L, 2L, 1L
), qc_sensitivity = c(332, 333, 318, 325, 320, 329, 330, 332, 
334, 306, 319, 316, 324, 331, 330, 330, 318, 324, 323, 325, 323, 
327, 322, 330, 328, 323, 332, 334, 330, 327, 330, 333, 326, 330, 
326, 331, 327, 331, 325, 324, 319, 322, 323, 325, 323, 325, 318, 
317, 328, 330, 325, 321, 324, 295, 330, 0, 327, 330, 329, 333, 
333, 331, 326, 332, 330, 330, 331, 336, 331, 329, 330, 327, 320, 
324, 320, 0, 330, 328, 324, 323, 330, 324, 332, 335, 310, 306, 
304, 308, 300, 297, 336, 331, 324, 325, 339, 313, 314, 314, 317, 
341, 320, 320, 320, 323, 327, 345, 346, 325, 327, 332, 331, 316, 
333, 323, 321, 336, 330, 329, 333, 330, 330, 334, 328, 319, 313, 
331, 328, 324, 329, 325, 324, 326, 328, 323, 326, 329, 331, 333, 
330, 308, 307, 307, 300, 334, 328, 325, 334, 327, 324, 318, 320, 
317, 320, 324, 321, 322, 313, 0, 289, 280, 294, 266, 340, 338, 
337, 239, 238, 340, 325, 327, 330, 328, 323, 323, 325, 330, 255, 
250, 254, 260, 261, 323, 305, 330, 325, 312, 310, 296, 301, 317, 
311, 298, 303, 335, 348, 296, 336)), .Names = c("qc_date", "qc_camera", 
"qc_head", "qc_sensitivity"), row.names = 269:465, class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:31:01.690

利用`transform`

```
DF
##      qc_date qc_camera qc_head qc_sensitivity
## 1 2012-05-04       RED       1            332
## 2 2012-05-04       RED       2            333
## 3 2012-05-10       RED       1            318
## 4 2012-05-10       RED       2            325
## 5 2012-05-10      BLUE       1            320
## 6 2012-05-10      BLUE       2            329
## 7 2012-05-15       RED       1            330
## 8 2012-05-15       RED       2            332

transform(DF, qc_cam_head = paste(qc_camera, qc_head, sep = " H"), qc_camera = NULL, qc_head = NULL)
##      qc_date qc_sensitivity qc_cam_head
## 1 2012-05-04            332      RED H1
## 2 2012-05-04            333      RED H2
## 3 2012-05-10            318      RED H1
## 4 2012-05-10            325      RED H2
## 5 2012-05-10            320     BLUE H1
## 6 2012-05-10            329     BLUE H2
## 7 2012-05-15            330      RED H1
## 8 2012-05-15            332      RED H2 
```

# twitter-bootstrap - 如何使用 $resource 填充 Angular UI Bootstrap typeahead

> ID：15928644
> 
> 赞同：7
> 
> 时间：2013-04-10T14:26:54.267
> 
> 标签：twitter-bootstrap, asynchronous, angularjs

我正在尝试使用我设置的 REST 资源让 Angular UI 引导输入提前。但我不确定如何让它与它的异步特性一起工作。

目前，我已经改编了 Angular UI Bootstrap 给出的示例。

所以我的 html 看起来像这样，调用 getLibs() 来获取 typeahead 下拉列表的列表。

```
<div class='container-fluid' ng-controller="TypeaheadCtrl">
    <pre>Model: {{selected| json}}</pre>
    <input type="text"  typeahead="lib.name for lib in getLibs($viewValue)" active='active' ng-model="selected" typeahead-min-length='3' >
</div> 
```

我的资源看起来像这样：

```
angular.module('LibraryLookupService', ['ngResource']).factory('Library', 
    function($resource){
        return $resource(   "../../api/seq/library/?name__icontains=:searchStr" , {} , 
        {   'get':    {method:'GET'},
            'query':  {method:'GET', params: {} ,  isArray:false },
        }
    )
} 
```

);

我的控制器看起来像这样（我猜它在这里我做错了）：

```
function TypeaheadCtrl($scope , Library){

    $scope.selected = undefined;
    $scope.active = undefined ;

    $scope.libs = [{name:'initial'} , {name:"values"}];

    $scope.getLibs = function(viewValue){
        console.log("value:", viewValue);
        if (viewValue.length > 3 ) { 
            var return_vals =  Library.query({searchStr:viewValue},  function() {
                $scope.libs = return_vals.objects ; 
                console.log("here", $scope.libs) ; 
                }) ;
            }
        return $scope.libs
    }
} 
```

据我了解，预输入菜单是从 getLibs() 函数的返回值填充的。当调用 getLibs() 时，它正在查询 REST 接口，但最初返回一个空值。这是由提供给 Library.query() 方法的函数填充的，这是在从 REST 请求返回数据之后完成的。

这基本上意味着菜单的更新时间比我想要的晚。我输入“3456”，它会填充对 REST 接口的“345”查询结果。

从 Library.query() 函数返回响应时，如何更新菜单？我这样做对吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-20T21:25:03.367

我是这样解决的：

我的工厂：

```
angular.module('frontendApp')
  .factory('PersonService', function($resource) {
    // Service logic
    // ...

    return $resource(APP_CONFIG.prefixURLRest + '/person', {
      //id: '@id'
    }, {
      search: {
        method: 'POST',
        isArray: true
      }
    });

  }); 
```

我的控制器

```
...
$scope.searchTypeAhead = function(name) {
  var person = {
    'name': name
  };

  return PersonService.search(person)
    .$promise.then(function(response) {
      return response;
    });
}; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-10T17:26:43.823

[http://angular-ui.github.io/bootstrap/](http://angular-ui.github.io/bootstrap/)中的 typeahead 指令依赖于 promise API ( `$q`) 以处理异步建议。问题`$resource`在于它用于缺乏对承诺的支持（它是最近才在不稳定的分支中添加的）。所以你在这里有两个解决方案：

1) 与承诺一起工作的中继`$http`（IMO $http 对于大多数自动完成案例来说应该绰绰有余）。2) 切换到最新的不稳定版本的 AngularJS 并使用 Promise。

$resource 的目的是使用完整的 HTTP 动词集来定位 RESTful 端点。如果你只想查询数据，你最好还是使用 $http 来达到这个目的。

有一个关于 typeahead 的类似问题，其答案涵盖了它的用法`$http`：[How to tie angular-ui's typeahead with a server via $http for server side optimization？](https://stackoverflow.com/q/15930339/1418796)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-29T11:33:28.923

如果您不想使用 $http（因为您想重用现有的 $resource），或者不想切换到不稳定的分支，您可以将对 $resource 的调用包装在一个 Promise 中。这有点冗长，但它确实有效。快速示例（使用 AngularJS 1.0.6）：

```
$scope.getLibs = function(input){
    var defer = $q.defer();
    if (input){
        Library.query({searchStr:viewValue},
            function(data,headers){
                if (!$scope.$$phase){ //check if digest is not in progress
                    $rootScope.$apply(function(){
                        defer.resolve(data);
                    });
                } else {
                    defer.resolve(data);
                }
            },
            function(response){
                if (!$scope.$$phase){
                    $rootScope.$apply(function(){
                        defer.reject('Server rejected with status ' + response.status);
                    });
                } else {
                    defer.reject('Server rejected with status ' + response.status);
                }
            });
    } else {
        if (!$scope.$$phase){
            $rootScope.$apply(function(){
                defer.reject('No search query ');
                $log.info('No search query provided');
            });
        } else {
            defer.reject('No search query ');
            $log.info('No search query provided');
        }
    }
    return defer.promise;
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2016-09-14T23:49:49.347

只需从资源中返回 $promise：

```
UsuarioResource.query().$promise 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-02-19T17:41:22.723

如果您使用的是 Angular 1.2.13（或附近的某个地方，还没有全部测试过）

请参阅：[https ://stackoverflow.com/a/21888107/484802](https://stackoverflow.com/a/21888107/484802)

为我工作。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-05-09T10:44:34.580

此代码适用于 angular 1.6 和最新的 ui 的 angular-bootstrap3-typeahead

**GET /cities?name="somename" 的 api 端点响应：**

```
[
    {name: "somename", zipcode: 11111, etc: ""},
    {name: "somename", zipcode: 22222, etc: ""},
    {name: "somename", zipcode: 33333, etc: ""}
] 
```

**$资源工厂：**

```
getCities: {
    url: '/cities',
    method: 'GET
} 
```

**控制器：**

```
$scope.getCities = function(name) {
    return City.getCity({
        name: name
    }).$promise.then(function(response) {
        return response;
    });
}; 
```

**看法：**

```
<input ng-model-control data-ng-model="city" uib-typeahead="city.name for city in getCities($viewValue)" /> 
```

似乎此解决方案不适用于过滤，请参阅[https://github.com/angular-ui/bootstrap/issues/1740](https://github.com/angular-ui/bootstrap/issues/1740)。

# c++ - 为什么我无法进行此转换？

> ID：15928646
> 
> 赞同：0
> 
> 时间：2013-04-10T14:09:34.373
> 
> 标签：c++, io

我有以下代码用于读取输入文件并将该输入转换为整数。它适用于某些输入，但它不再起作用，这让我感到困惑。(C++)

```
ifstream inputfile;

inputfile.open("inputfile.txt"); //openfile and read
string m; //fileforstringinput
getline(inputfile, m); //importing input information
long int s = atol(m.c_str());   //conversion to integer
inputfile.close(); //close file
cout << s; 
```

将其用于小数字时很好。我尝试了 Project Euler 问题 3 中的数字（600851475143）

并且未能转换。

这是否超过了长整数的大小

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T14:18:11.953

是的，它确实。根据[<climits>](http://www.cplusplus.com/reference/climits/)标头，long 的最大值为**2147483647** (2^32/2 - 1)。

您可以尝试 64 位整数类型（最大 9223372036854775807），例如

*   长长的
*   __int64
*   int64_t

最佳选择可能在某种程度上取决于您的编译器和架构。可能需要进行一些在线搜索才能找到适合您设置的类型。

**编辑：** 我最初建议`double`作为 的替代方案`long long`，但*布赖恩*在评论中指出，素数分解可能是一个糟糕的主意，因为素数分解本质上是一个整数运算。所以从记录中删除它并坚持使用整数模型。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:18:29.887

> 这是否超过了长整数的大小

是的。长整数（通常）是 4 个字节。它只能存储 -2,147,483,647 和 2,147,483,647 之间的值。

# birt - Birt - 如何将 Y 轴格式化为百分比

> ID：15928649
> 
> 赞同：1
> 
> 时间：2013-04-10T14:26:59.647
> 
> 标签：birt

在下面的图表中，我试图将图表 Y 轴上的 percent_uptime 列格式化为百分比。例如，“35%”而不是“0.35”。

任何想法如何做到这一点？我尝试将 Series 1 函数更改为使用 formatter.format 函数，但随后出现关于 Y 轴上不允许的字符串的错误:-(

![在此处输入图像描述](https://i.stack.imgur.com/eNe5I.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T16:55:08.823

最简单的方法可能是将选项卡`Value (Y) Series:`上的`Select Data`（如问题所示）从`row["percent_uptime"]`, 更改为`row["percent_uptime"]*100`（通过按下`fx`按钮并相应地修改公式）。

或者，如果您想将 % 符号作为 y 轴上每个值的标签的一部分：

*   选择`Format Chart`对话框中的选项卡；
*   在对话框的左侧窗格中选择`Value (Y) Series`（下）；`Series`
*   单击`Labels`对话框右侧窗格中的按钮；
*   在`Series Labels`出现的对话框中，在右侧列表中选择`Value Data`并`Values`单击`Format`按钮；
*   在出现的对话框中选择`Standard`单选按钮`Edit Format`并指定以下值：
    *   `Suffix:`%
    *   `Multiplier:`100
*   在整个对话框中单击确定以确认应用更改。

# php - Codeigniter - 使用 edit_unique 编辑表单（重新填充）

> ID：15928650
> 
> 赞同：2
> 
> 时间：2013-04-10T14:27:03.733
> 
> 标签：php, codeigniter, validation, codeigniter-form-helper

似乎这里描述的`edit_unique`函数[- *Validating Uniqueness In CodeIgniter When Updating A Record*](https://forrst.com/posts/Validating_Uniqueness_In_CodeIgniter_When_Updati-DDA)杀死了该`set_value`函数。

一切正常，就像这样......

```
echo form_input('username', set_value('username',$user->username)); 
```

但是在使用`edit_unique`验证时，提交表单后该值为空。后变量没问题，验证也没有错误 - 但未设置值。

知道我该如何解决吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-10T15:25:11.527

好的 - 我自己找到了。在bee为真的情况下没有返回值。也许任何人都面临同样的问题......使用此功能，它可以工作：

```
function edit_unique($value, $params)  {
    $CI =& get_instance();
    $CI->load->database();

    $CI->form_validation->set_message('edit_unique', "Sorry, that %s is already being used.");

    list($table, $field, $current_id) = explode(".", $params);

    $query = $CI->db->select()->from($table)->where($field, $value)->limit(1)->get();

    if ($query->row() && $query->row()->id != $current_id)
    {
        return FALSE;
    } else {
        return TRUE;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-05T07:08:03.903

Petra 的回答效果很好，如果由于某种原因它对您不起作用，请检查您的主键是否为“id”，如果不是，您需要进行一些更改。

改变

```
list($table, $field, $current_id) = explode(".", $params);

if ($query->row() && $query->row()->id != $current_id) 
```

至

```
list($table, $field, $current_id, $key) = explode(".", $params);

if ($query->row() && $query->row()->$key != $current_id) 
```

然后添加如下规则：

```
$this->form_validation->set_rules(
    'form_field', 
    'Form Label', 
    'required|trim|edit_unique[table.column.' . $edit . '.unique]'
); 
```

`unique`您的唯一/主键在哪里 ，`$edit`它的价值在哪里。

# javascript - 我应该在多大程度上依赖 JS

> ID：15928665
> 
> 赞同：0
> 
> 时间：2013-04-10T14:27:34.790
> 
> 标签：javascript, jquery, compatibility

我有一个表单，其中的部分由 jQuery 更改。这些部分会影响最终用户支付的价格，因此必须准确。我应该在没有javascript的情况下做这样的事情吗？有多少人禁用或不支持 js？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:32:03.417

我敢说，使用渐进增强这不应该是一个障碍，因为那些使用 JavaScript 的人可以在不忽视其他用户的情况下获得更丰富的体验。

但更好的一点是它取决于所涉及的逻辑和您的客户。如果您有依赖于服务器端用户属性的参数（例如税费、运费等）（并假设您在客户端无权访问这些参数），那么值得往返。

查看您的站点分析以了解您的目标受众 - 即使在相同的电子商务商店中，受众也可能因站点而异，从 iPad 到 IE6。

看看这个 SO question，了解如何检测禁用 JS 的用户[如何检测 JavaScript 是否被禁用？](https://stackoverflow.com/questions/121203/how-to-detect-if-javascript-is-disabled?rq=1)

# c# - 如果找到运算符，如何轻松解析文本框以执行计算？

> ID：15928666
> 
> 赞同：0
> 
> 时间：2013-04-10T14:27:34.947
> 
> 标签：c#, parsing, operators

我作为会计助理的部分工作要求我将费用组分配给发票上的各种项目。例如，如果一家办公用品公司向我们发送了一些商品，我可能必须将复印纸与笔分开，并将它们编码到不同的费用组中。

将类似费用组中的金额划分为总运费和税金金额是一项繁琐的操作，但我决定通过编写一个程序来更聪明地工作，该程序将根据输入为我调整金额：项目 []、运费、税金。这就像一种魅力，确实减少了我完成这些任务所需的时间。

但是，我想实现一个 Excel 风格的功能，这样我可以在文本框中使用 + 和 - 运算符，这样我就可以轻松地将类似的项目添加到一行中。（即钢笔、记事本、记事本，它们都将在发票的不同行上，都需要计算并作为一个总和返回。）

我目前正在使用`txtValue.Text`并将其转换为 double 以执行计算。我希望能够解析该 Text 值并评估输入的语句。例如，如果我可以查看发票并输入`16.49+22.38+47.06`并知道当我点击计算按钮时一切都会好起来的，那么这将节省我在计算器上将它们加在一起的时间。

我在 VBA for Excel 中写过一次，它本机允许这样做，但感觉不如我定制的东西好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:45:05.400

有几种方法可以解决这个问题。这是我想出的一个粗略的解决方案。可能有十几种更优雅的方式来处理它。

```
public double Parse(string input)
{
    char lastoperator = '0';
    double result = 0;
    for (int i = 0; i < input.Length; i++)
    {
        string temp = "";
        if (char.IsDigit(input[i]) || input[i] == '.')
            temp += input[i];
        else if(input[i] == '+' || input[i] == '-')
        {
            double val;
            if(double.TryParse(temp, out val))
            {
                if(lastoperator == '+')
                    result += val;
                else if(lastoperator == '-')
                    result -= val;
                else
                    result = val;

                lastoperator = input[i];
                temp = "";
            }
            //else error
        }
        else
            continue;
    }
    return result;
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:52:18.660

```
 string value = "1.2+5.3-1";
        char[] delimiters = new char[] { '+', '-' };
        string[] parts = value.Split(delimiters);
        string[] signs =  Regex.Split(value, "[0-9]|\\."); 
```

这将为您提供一个数字数组（您需要将它们转换为双精度数）和一个符号数组（也会有一些空元素，您应该忽略它们。

只需遍历它们并使用开关进行实际的数学运算。

# jpa - 当目标实体为空时如何在@OneToOne 关系中插入 0

> ID：15928672
> 
> 赞同：0
> 
> 时间：2013-04-10T14:27:51.243
> 
> 标签：jpa, eclipselink, ibm-midrange

我在我的应用程序中使用 JPA 和 EclipseLink 提供程序来连接到 AS400。我有一个实体 WebRequest，它与我的 RateQuote 实体有 @OneToOne 关系。WebRequest 生命周期从其 RateQuote 属性为空开始，直到用户处理 WebRequest 并生成 RateQuote。我想要实现的不是插入 null，而是插入 0，因为 WebRequest 表中的基础字段是 DECIMAL(7,0)。

在我们的 AS400 (V6R1) 上，我们有 WRKDBF 实用程序用于查看数据。当我将空值持久保存到表中时，WRKDBF 在尝试查看数据时崩溃。

任何帮助表示赞赏。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:30:29.863

在访问“SQL”文件时，我遇到了[`WRKDBF`](http://www.wrkdbf.com/)生成 CPF5035/RNX1299 的实用程序的问题。

查看免费软件程序[PEEK/400](http://www.tools400.de/English/Peek_400/peek_400.html)以进行替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T17:43:30.680

您可以创建一个 ID 为 0 的虚拟 RateQuote 对象，并将其分配为 null，但这是一种 hack。修复该实用程序将是最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-01T10:34:22.283

WRKDBF 有一个替代方案，它在我的网站上。有一些区别，主要是仅在物理文件和逻辑文件上使用 SQL 以及任何 SQL 选择。支持日期字段和空字段。免费试用。见[WRKDBF](http://digilander.libero.it/ambusy/computerWD.html)

# c++ - 在代码块中编译线程程序时出错

> ID：15928673
> 
> 赞同：1
> 
> 时间：2013-04-10T14:27:54.603
> 
> 标签：c++, codeblocks

我的线程程序是：

```
#include<iostream>
#include<thread>
using namespace std;

void t()
{
    cout<<"from thread\n";
}

int main()
{
     thread i(&t);
     cout <<"from main\n";
     i.join();
} 
```

但它在代码块中显示以下错误：

```
1)'thread ' was not declared in this scope
2)expected ';' before 'i'
3)'i' was not declared in this scope 
```

我该如何解决？我使用的是 windows 和 codeblocks 12.11

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T14:29:51.450

首先，你是windows还是linux？

如果您使用的是 linux，则必须使用 C++11 支持进行编译。只需将 -std=c++11 传递给 g++。我不能帮你用窗户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:32:22.513

您的 IDE 可能还不支持 C++11。自`thread`C++11 起包含在标准中。看到这个线程的代码块？[http://forums.codeblocks.org/index.php?topic=15536​​.0](http://forums.codeblocks.org/index.php?topic=15536.0)

# javascript - Chrome 中的 JavaScript 文本淡入淡出锯齿

> ID：15928674
> 
> 赞同：0
> 
> 时间：2013-04-10T14:28:00.520
> 
> 标签：javascript, google-chrome, opacity, fade

此示例中的文本在淡出之前略微向右移动，并在淡入后向左修正。我只在 XP(SP3) 上使用 Chrome（版本 26.0.1410.64 m）看到这种效果。Windows7 上相同版本的 Chrome 不会出现这种行为。

我能找到的唯一解决方案是在开始淡入淡出之前将粗体字体重置为正常字体，但这看起来也不太好。

这是一些较大代码的一部分，我正在寻找 JavaScript 解决方案而不是 css。

谢谢。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">   
<html xmlns="http://www.w3.org/1999/xhtml">
<head>

<title>Fade moves text horizontally in Chrome with Windows XP</title>

<style type="text/css">
body         {font-family: Arial; font-size:12px; font-weight:bold;}
</style>

<script type="text/javascript">

function setOpacity(id,level) {
var a = document.getElementById(id);
if(a) {
a.style.opacity = level;
}
}

var duration = 1000; 
var steps = 22;

function fadeIn(id){
for (i = 0; i <= 1; i += (1 / steps)) {
setTimeout("setOpacity('" + id + "'," + i + ")", i * duration);
}
}

function fadeOut(id) {
for (i = 0; i <= 1; i += (1 / steps)) {
setTimeout("setOpacity('" + id + "'," + (1 - i) + ")", i * duration);
}
}

</script>

</head>

<body>

<div id="fade">
This text moves slightly to the right before fading out and resets itself back to the  left after fading back in.
<br />
This text moves slightly to the right before fading out and resets itself back to the left after fading back in.
</div>

<p onclick="fadeOut('fade')">Click to fade out</p>
<p onclick="fadeIn('fade')">Click to fade in</p>

</body>

</html> 
```

# php - PHP 在 MongoDB 中复制一个文档，替换它的 MongoID

> ID：15928677
> 
> 赞同：2
> 
> 时间：2013-04-10T14:28:02.490
> 
> 标签：php, mongodb

当更改某个文档的位置时（不确定结构的确切程度），我想在另一个集合中创建该文档的备份，然后再将其保存回我当前的集合。要进行备份，我尝试了以下操作：

```
$mongoDbObj = $collection->findOne($filter);
...
$collectionBackup->insert($mongoDbObj,true); 
```

...但这只能工作一次，因为 MongoID 被复制了。当我再次尝试备份同一个文档时，mongoID 已经存在于 backupCollection 中。所以我的问题是：

我可以在 PHP 中复制 MongoDB 文档，用新的 MongoID 覆盖 MongoID，然后再插入另一个集合，而不更改原始文档的 MongoID？

* * *

**这个问题简化为**：我该怎么做：

```
$mongoDbObj = $collection->findOne($filter);
...
$collectionBackup->insert($mongoDbObj,true);
// change MongoId so the next line doesn't throw exception
$collectionBackup->insert($mongoDbObj,true);
// save my object back with the original MongoID
$collection->save($mongoDbObj); 
```

同样有用的是如何克隆/复制 MongoDB 文档，然后只需在复制的文档中粘贴新的 MongoID 即可轻松解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:22:55.157

```
$mongoDbObj = $collection->findOne($filter);
$mongoDbObjBak = array();

foreach($mongoDbObj as $key => $value) {
    if($key != '_id') {
        $mongoDbObjBak[$key] = $value;
    }
}

$collectionBackup->insert($mongoDbObjBak,true);
$collection->save($mongoDbObj); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-07T07:08:37.320

因此，您想**复制一个文档**并将其复制到另一个**没有 _id** mongo 的集合中。

使用字段查询以**删除**您不需要的字段。

例子 ：

```
$mongoDbObj = $collection->findOne($filter);
$mongoDbObj->fields(array("_id" => false)); 
```

文档：[http ://www.php.net/manual/en/mongocursor.fields.php](http://www.php.net/manual/en/mongocursor.fields.php)

玩得开心 ：）

# python - 在 matplotlib 的右侧 y 轴上添加刻度标签

> ID：15928678
> 
> 赞同：2
> 
> 时间：2013-04-10T14:28:03.280
> 
> 标签：python, matplotlib

我有以下图表： ![Matplotlib 图](https://i.stack.imgur.com/xeuhL.png)

我想在图表的右侧添加带有标签的自定义刻度，以识别水平虚线。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T14:50:14.730

```
ax = gca()
ax.axhline(.5, linestyle='--')
trans = matplotlib.transforms.blended_transform_factory(
    ax.transAxes,
    ax.transData)

ax.annotate('label', xy=(1.01, .5), xycoords=trans, clip_on=False, va='center')
ax.set_xlim([0,2])
plt.draw() 
```

有关混合变换的详细信息，请参见[此处](http://matplotlib.org/users/transforms_tutorial.html#blended-transformations)。x 坐标是轴单位（所以它总是稍微向右一点，y 坐标是数据单位，所以你可以把它放在你想要的地方。放入刻度没有多大意义在右边，因为你的虚线会覆盖它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:38:48.523

如果您想要一个新的比例，请使用[`twinx()`](http://matplotlib.org/api/axes_api.html#matplotlib.axes.Axes.twinx).

```
fig = plt.figure()
ax = []
ax.append(fig.add_subplot(111))
ax.append(ax[0].twinx())
ax[0].plot(...)
ax[1].set_yticks([...])
ax[1].set_yticklabels([...])
plt.show() 
```

`text`如@tcaswell 所写，如果您只想要一个标签，请使用一个东西。

# deployment - Glassfish 上的 Liferay。Spring portlet 已成功部署，但未显示在 Liferay“添加应用程序”列表中

> ID：15928682
> 
> 赞同：3
> 
> 时间：2013-04-10T14:28:08.807
> 
> 标签：deployment, glassfish, liferay, portlet, liferay-6

我在 Glassfish 3.2.2 上使用 Liferay 6.1.2。我能够成功部署 Spring portlet（在以前的 glassfish/liferay 构建上工作且经过验证的 portlet），但它没有显示在 Liferay“添加应用程序”列表中。我检查了 xml 命名空间声明、liferay xml 文件（portlet、显示），并且似乎都符合 liferay 规范。日志没有显示任何错误，但我确实注意到日志没有显示“x portlets are available for use”消息，因为它在以前的构建中使用过。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-08T20:04:13.733

问题在于 Liferay 构建本身。当 web.xml 中存在注释/过滤器时，web.xml 解析器出现故障并中断。我从 Liferay 获得了最新的补丁并修复了它。修复它的另一种方法是从 web.xml 中删除注释并正确清理过滤器声明。

# android - Android 缩小图像

> ID：15928686
> 
> 赞同：0
> 
> 时间：2013-04-10T14:28:18.990
> 
> 标签：android

我有一些大分辨率图像，我需要缩放以适合每个屏幕作为背景，图像大小为 1800x2880，我需要将它们缩小到每个屏幕而不进行任何拉伸（它们是插图）。最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:41:04.000

最好的方法是阅读有关[支持多种屏幕尺寸](http://developer.android.com/guide/practices/screens_support.html)的 android 开发人员指南，并完全按照他们所说的去做。

其他人可能在这里回答您的任何其他内容都将是简化或复制或用他自己的话重写那里所说的内容。

**编辑：**

关于拉伸图像，您有两种可能的方法：

*   [使用您的背景创建一个 9-patch](http://developer.android.com/tools/help/draw9patch.html)，以便它可以填充最后一个像素（或填充可以/应该填充的图像的关键区域而不改变它的一般方面（这将取决于图像的内容） )
*   标记要使用的 imageView`CENTER_INSIDE`

> 均匀缩放图像（保持图像的纵横比），使图像的两个尺寸（宽度和高度）都等于或小于视图的相应尺寸（减去填充）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:33:36.187

在 xhdpi 文件夹上设置的图像。在 XML 中，您将使用 fillparent。它不会被拉伸。

# c# - Ajax 调用成功失败

> ID：15928693
> 
> 赞同：1
> 
> 时间：2013-04-10T14:28:54.890
> 
> 标签：c#, jquery, ajax, asp.net-mvc

这个 ajax 调用永远不会在成功时创建警报，即使它已经达到并在服务器端方法上返回了 success = true。

```
@model IEnumerable<Test.Models.Task>
@Styles.Render("~/Content/Site.css")
@{
    ViewBag.Title = "Index";
}

<h2>Index</h2>

<p>
    @Html.ActionLink("Create New", "Create")
</p>

    <div id ="alerts">

           @Html.Action("_Tasks")
           <script type="text/javascript">
               $(document).ready(function poll() {

                    $.ajax({                       
                        type: 'GET',
                        cache: false,
                        url: '@Url.Action("TasksRefresh")',
                        dataType: "json", 
                        complete: function () { setTimeout(poll, 10000); },                      
                        success: function (data) {
                            alert("Testing")

                        } 
                    });
                })();
        </script>

       @* <script type="text/javascript">
            var alerts = '@ViewBag.Alerts';
           @foreach (var i in alerts)
           {

           }
        </script>*@

    </div>
<table>
    <tr>
        <th>Category</th> 
        <th>Severity</th>
       <th>Assigned to Role</th>
        <th>Assigned To</th>
        <th>Chart #</th>
        <th>Note</th>
        <th>Alert</th>
        <th>Status</th>
        <th>Creator By</th>
       <th>Create Date</th>
        <th>Due Date</th>

        <th></th>

    </tr>

@foreach (var item in Model) {
    <tr>
        <td>
            @Html.DisplayFor(modelItem => item.LookupTaskCategory.CategoryName)
        </td>
        <td>
            @Html.DisplayFor(modelItem => item.LookupTaskSeverity.SeverityName)
        </td>    

        <td>
            @Html.DisplayFor(modelItem => item.AssignedToRoleName)
        </td>

        <td>
            @Html.DisplayFor(modelItem => item.AssignedToName)
        </td>

        <td>
            @Html.DisplayFor(modelItem => item.Patient.ChartNo)
        </td>

        <td>
            @Html.DisplayFor(modelItem => item.Note)
        </td>

        <td>
            @Html.DisplayFor(modelItem => item.AlertFlag)
        </td>

        <td>
            @Html.DisplayFor(modelItem => item.LookupTaskStatu.StatusName )
        </td>

        <td>
            @Html.DisplayFor(modelItem => item.CreatedByName)
        </td>

        <td>
            @Html.DisplayFor(modelItem => item.CreatedOnDate)
        </td>

        <td>
            @Html.DisplayFor(modelItem => item.DueDate)
        </td>

        <td>
            @Html.ActionLink("Edit", "Edit", new { id=item.Id }) |
            @Html.ActionLink("Details", "Details", new { id=item.Id }) |
            @Html.ActionLink("Delete", "Delete", new { id=item.Id })
        </td>
    </tr>
}

</table> 
```

这是我的控制器中的服务器端方法。我试图用 ActionResult 替换 JsonResult，但它并没有改变结果。

```
 public JsonResult TasksRefresh()
        {
           //Testing to see if this return ever gets received by ajax.
            return Json(new { success = true });
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:35:20.290

您在服务器上遇到异常 - 尝试调试 .NET 代码，或使用浏览器工具查看您的响应，以查看它。

如果要在`GET`方法上返回 JSON 对象，则需要在调用中包含一个`JsonRequestBehavior`参数`Json`，例如：

```
return Json(new { success = true }, JsonRequestBehavior.AllowGet); 
```

**编辑**

实际上，如果您在服务器上进行调试，您似乎看不到它——您必须在响应中看到它。显然，在该`Json`方法之后异常被进一步抛出。

# c# - C# 帮助改进代码 - int 到 hex

> ID：15928694
> 
> 赞同：0
> 
> 时间：2013-04-10T14:29:01.970
> 
> 标签：c#

如何减少或改进代码？

```
private readonly StringBuilder _buffer = new StringBuilder();

public void WriteD(int i) {
    _buffer.Append(Encoding.UTF8.GetString(BitConverter.GetBytes(i)));
} 
```

我需要写入一些数据类型（int、ushort、string 等）的字符串二进制数据。转换“stringToHex”后字符串应如下所示（输入int 13和10）：0D 00 00 00 0A 00 00 00

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:31:51.843

```
public void WriteD(int i) {
    _buffer.Append(i.ToString("X4"));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:33:50.613

您可以使用`BitConverter.ToString(BitConverter.GetBytes(i));`

# javascript - 动态加载 HTML 的 Onclick 侦听器

> ID：15928695
> 
> 赞同：0
> 
> 时间：2013-04-10T14:29:04.603
> 
> 标签：javascript, ajax, onclick, onclicklistener

我正在尝试使用 JavaScript 动态加载菜单，然后在加载后将 onclick 事件侦听器设置为菜单的元素。我似乎无法弄清楚如何做到这一点。我正在通过 AJAX 调用加载菜单，菜单内容加载正常，但是当我像预期的那样单击菜单元素时没有任何反应。

这是我的代码部分，我希望它是原因......

```
//Load Menu and main images
window.onload = function()
{
    load_menu();   
}

document.getElementById('menu').onload = function()
{
    document.getElementById('projects-button').onclick = load_projects_view();
}

//Load menu function
function load_menu()
{   
    request = getHTTPObject();
    request.onreadystatechange = append_menu;
    request.open("GET", "./php/menu.php", true);
    request.send(null);
}

//Load Project View
function load_projects_view()
{
    request = getHTTPObject();
    request.onreadystatechange = append_project_view;
    request.open("GET", "./php/project_view.php", true);
    request.send(null);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:35:26.827

那么当 javascript 行时，具有 id 菜单的元素已经可用：

```
document.getElementById('menu').onload = ... 
```

被执行。此行在

```
window.onload 
```

发生。

好吧，我可能会调用代码：

```
document.getElementById('projects-button').onclick = load_projects_view(); 
```

目前添加了菜单项（您的 append_menu 功能？）

但很难说，因为它只是一段代码。

jQuery 和 dojo 也绝对是要走的路，而且我认为 jQuery 是了解语言基础的一个很好的起点，因为它隐藏了所有奇怪的浏览器行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:18:04.197

删除这个。

```
document.getElementById('menu').onload = function()
{
    document.getElementById('projects-button').onclick = load_projects_view();
} 
```

并将其放在`append_menu()`.

```
 document.getElementById('projects-button').onclick = load_projects_view; 
```

# python - 如何在龙卷风的不同文件中拥有处理程序

> ID：15928696
> 
> 赞同：1
> 
> 时间：2013-04-10T14:29:05.480
> 
> 标签：python, tornado

我想用一小段代码来构建我的龙卷风项目。目前只是一个小型应用程序，因此它由 2 个文件 core.py 和 handlers.py 构成。

在 handlers.py 我有：所有处理程序类和一个包含处理程序声明的列表：

处理程序 = [(r"/", indexHandler), (r"/listall/", listAllHandler), (r"/check/", checkPersonH​​andler), (r"/delete/", deleteHandler), ]

在我的核心中：

handlers = handlers.HANDLERS

好吧，当我运行我的应用程序时，我有一个错误提示“未定义的名称'indexHandler'”？！我究竟做错了什么 ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:33:37.620

你什么时候定义你的`indexHandler`和其他的处理程序？我想它们是在 中定义的`index.py`，然后试试这个：

```
from index import indexHandler, listAllHandler, checkPersonHandler, deleteHandler
HANDLERS = [(r"/", indexHandler), (r"/listall/", listAllHandler), (r"/check/", checkPersonHandler), (r"/delete/", deleteHandler), ]
handlers = handlers.HANDLERS 
```

# ios - Objective-Zip 文件夹结构 ios

> ID：15928697
> 
> 赞同：1
> 
> 时间：2013-04-10T14:29:06.750
> 
> 标签：ios, compression, directory-structure

我让我的应用程序创建一个文件，将其压缩为 .zip 文件，然后将其附加到电子邮件中。但是 .zip 文件在实际文件之前包含许多目录。从“/”开始，它是一个无名文件夹，对接收它的人来说是不可见的。顶级目录是'/'，下一级是'com'...
/var/mobile/Applications/CDA16BB231BDABABBA/Documents/data.txt

如何删除所有目录并让 .zip 文件仅包含该文件？

这是我使用的代码...

```
 NSError *error;
    NSString *documentsDirectory = [NSHomeDirectory()
                                    stringByAppendingPathComponent:@"Documents"];
    NSString *filePath = [documentsDirectory
                          stringByAppendingPathComponent:@"data.txt"];
    NSLog(@"string to write:%@",printString);
    [printString writeToFile:filePath atomically:YES
                    encoding:NSUTF8StringEncoding error:&error];

    ////ZIP FILE/////

    NSString *zipfilePath = [documentsDirectory stringByAppendingPathComponent:@"data.zip"];
    [[NSFileManager defaultManager] removeItemAtPath: zipfilePath error: &error];

    ZipFile *zipFile = [[ZipFile alloc]initWithFileName:zipfilePath mode:ZipFileModeCreate];

    NSDictionary *attributes = [[NSFileManager defaultManager]attributesOfItemAtPath:zipfilePath error:&error];
    NSDate *Date = [attributes objectForKey:NSFileCreationDate];

    ZipWriteStream *stream = [zipFile writeFileInZipWithName:filePath fileDate:Date compressionLevel:ZipCompressionLevelBest];
    NSData *data = [NSData dataWithContentsOfFile:filePath];
    [stream writeData:data];
    [stream finishedWriting];

    [zipFile close]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:31:30.383

问题是你在说：

```
writeFileInZipWithName:filePath 
```

该变量`filePath`包含您抱怨的那个巨大的长名称。它是从顶部一直到您的实际文件的整个路径。

你的文件名是`@"data.txt"`，所以你想说的是：

```
writeFileInZipWithName:@"data.txt" 
```

# python - 循环两个列表列表

> ID：15928701
> 
> 赞同：-1
> 
> 时间：2013-04-10T14:29:16.250
> 
> 标签：python

我需要遍历此列表，但我对此感到有些困惑。

这是我的代码：

```
folders=[["Anim_2p.scn_c_DI_rig"],["Anim_2p.scn_c_TOTO_GALLO_rig"]]
members = members=[["DI_CACHE.lengua","DI_CACHE.vidrios","DI_CACHE.dientes_abajo"],["TOTO_GALLO_cache.lengua","TOTO_GALLO_cache.dientes_01","TOTO_GALLO_cache.plumas_guantes"]] 
```

..这是期望的结果：

```
DI_CACHE.lengua Anim_2p.scn_c_DI_rig
DI_CACHE.vidrios Anim_2p.scn_c_DI_rig
DI_CACHE.dientes_abajo Anim_2p.scn_c_DI_rig
TOTO_GALLO_cache.lengua Anim_2p.scn_c_TOTO_GALLO_rig
TOTO_GALLO_cache.dientes_01 Anim_2p.scn_c_TOTO_GALLO_rig
TOTO_GALLO_cache.plumas_guantes Anim_2p.scn_c_TOTO_GALLO_rig 
```

我怎样才能做到这一点？我尝试了几种循环和循环的方法，但没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:33:59.883

您可以使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

```
folders = [["Anim_2p.scn_c_DI_rig"],["Anim_2p.scn_c_TOTO_GALLO_rig"]]
members = [["DI_CACHE.lengua","DI_CACHE.vidrios","DI_CACHE.dientes_abajo"],["TOTO_GALLO_cache.lengua","TOTO_GALLO_cache.dientes_01","TOTO_GALLO_cache.plumas_guantes"]]
print('\n'.join([
    '{m} {f}'.format(m=member, f=folder)
    for memberlist, folderlist in zip(members, folders)
    for member in memberlist
    for folder in folderlist])) 
```

产量

```
DI_CACHE.lengua Anim_2p.scn_c_DI_rig
DI_CACHE.vidrios Anim_2p.scn_c_DI_rig
DI_CACHE.dientes_abajo Anim_2p.scn_c_DI_rig
TOTO_GALLO_cache.lengua Anim_2p.scn_c_TOTO_GALLO_rig
TOTO_GALLO_cache.dientes_01 Anim_2p.scn_c_TOTO_GALLO_rig
TOTO_GALLO_cache.plumas_guantes Anim_2p.scn_c_TOTO_GALLO_rig 
```

* * *

列表推导等价于

```
result = []
for memberlist, folderlist in zip(members, folders):
    for member in memberlist:
        for folder in folderlist:
            result.append('{m} {f}'.format(m=member, f=folder)) 
```

然后可以打印列表中的项目（每行一个）

```
 print('\n'.join(result)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:32:21.247

你需要做两件事：

1.  合并您的列表
2.  产生两个列表的乘积

用于`itertools.product`后者，`zip`用于前者。

```
from itertools import product

for fs, ms in zip(folders, members):
    for folder, member in product(fs, ms):
        print ' '.join((member, folder)) 
```

产生：

```
>>> for fs, ms in zip(folders, members):
...     for folder, member in product(fs, ms):
...         print ' '.join((member, folder))
... 
DI_CACHE.lengua Anim_2p.scn_c_DI_rig
DI_CACHE.vidrios Anim_2p.scn_c_DI_rig
DI_CACHE.dientes_abajo Anim_2p.scn_c_DI_rig
TOTO_GALLO_cache.lengua Anim_2p.scn_c_TOTO_GALLO_rig
TOTO_GALLO_cache.dientes_01 Anim_2p.scn_c_TOTO_GALLO_rig
TOTO_GALLO_cache.plumas_guantes Anim_2p.scn_c_TOTO_GALLO_rig 
```

循环可以折叠成列表理解：

```
from itertools import product

combinations = [(member, folder) for fs, ms in zip(folders, members) for folder, member in product(fs, ms)] 
```

生成一个列表：

```
>>> [(member, folder) for fs, ms in zip(folders, members) for folder, member in product(fs, ms)]
[('DI_CACHE.lengua', 'Anim_2p.scn_c_DI_rig'), ('DI_CACHE.vidrios', 'Anim_2p.scn_c_DI_rig'), ('DI_CACHE.dientes_abajo', 'Anim_2p.scn_c_DI_rig'), ('TOTO_GALLO_cache.lengua', 'Anim_2p.scn_c_TOTO_GALLO_rig'), ('TOTO_GALLO_cache.dientes_01', 'Anim_2p.scn_c_TOTO_GALLO_rig'), ('TOTO_GALLO_cache.plumas_guantes', 'Anim_2p.scn_c_TOTO_GALLO_rig')] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:36:18.897

如果您在列表索引而不是列表项上循环，这种问题很容易解决。例如，您可以执行以下操作：

```
for i in range(len(folders)):
    for m in members[i]:
        print(m, folders[i][0]) 
```

# c# - 在网络浏览器中禁止显示下载对话框

> ID：15928705
> 
> 赞同：0
> 
> 时间：2013-04-10T14:29:25.137
> 
> 标签：c#, dialog, webbrowser-control

我使用 webbrowser 来显示网页。我有我必须单击以显示其他控件的链接。但问题是这个点击执行下载对话框，我不需要。

这是暂时阻止显示对话框的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:18:16.063

为了避免它，您需要关闭 Internet Explorer 上的自动下载框 - 安全设置。

![在此处输入图像描述](https://i.stack.imgur.com/f96DY.png)

# java - JLabel[][] 数组索引超出范围错误

> ID：15928715
> 
> 赞同：0
> 
> 时间：2013-04-10T14:30:02.420
> 
> 标签：java, arrays, exception, indexing

我在以下代码中得到一个数组索引超出范围异常。我使用了调试器，这就是发生的事情。

* * *

```
JLabel[][] labelHolder = new JLabel[8][8]; 

    for(int i=0; i<8; i++){
        for(int j=0; i<8; j++){
            labelHolder[i][j] = new JLabel ();   <- error occur right on this line when i=j=0 
```

* * *

我不知道为什么会这样，因为如果我只是将 i 和 j 换成 0 和 0，它就可以完美地工作：S

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T14:32:38.980

第二个`for`循环中的条件检查值`i`而不是`j`

```
for(int j = 0; i < 8 ; j++) 
```

应该

```
for(int j = 0; j < 8 ; j++) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-10T14:31:42.333

利用：

```
for(int j=0; j<8; j++){
             ^ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T14:32:08.733

`for(int j=0; i<8; j++){`这一行有问题，应该是`j<8`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T14:32:53.187

在您的第二个循环中，您的停止条件是错误的：替换`i < 8`为`j < 8`.

# python - 使用 Python 导入 CSV - 为什么要使用括号？

> ID：15928716
> 
> 赞同：3
> 
> 时间：2013-04-10T14:30:03.187
> 
> 标签：python, csv

我正在编写一个脚本，该脚本将从 CSV 导入 URL 列表，然后遍历 URL 以获取响应。当我导入 CSV 时，每个站点都用括号和单引号括起来。

我的 csv 看起来像这样：

```
http://cnn.com
http://yahoo.com
http://google.com 
```

csv 的名称是`sites.csv`.

这是我正在运行的代码：

```
import csv

datafile = open('path/to/file/sites.csv', 'rU')
datareader = csv.reader(datafile)
for row in datareader:
    print row 
```

这是输出：

```
['http://cnn.com']
['http://yahoo.com']
['http://google.com'] 
```

有没有办法在读取 CSV 时不包括 URL 周围的 , `['`？`']`如果没有，那么我的解决方案是在我的循环中去掉 , 然后访问 URL `['`？`']`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T14:33:39.020

每行包含一个 python*列列表*，在这种情况下只有一列。

由于*没有*逗号分隔的列，每行只有一项，因此您无需在`csv`此处使用该模块。直接从文件中读取：

```
with open('path/to/file/sites.csv', 'rU') as datafile:
    for line in datafile:
        print line.strip() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:35:14.940

这是一个行对象，所以试试这样......

```
print row[0] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:46:39.697

怎么样

```
print map(str.strip,open('path/to/file/sites.csv', 'rU')) 
```

afaik 打开的文件句柄将在下次收集垃圾时收集垃圾，因为它没有引用

# tfs - tfsdeleteproject.exe TF400813：资源不可用于匿名访问

> ID：15928722
> 
> 赞同：3
> 
> 时间：2013-04-10T14:30:13.957
> 
> 标签：tfs, azure-devops

我正在使用 TFS 云，我希望删除一个项目。Web UI 不允许通过图标或按钮删除，所以我求助于 tfsdeleteproject.exe /collection: [https://mycollection.visualstudio.com/DefaultCollection](https://mycollection.visualstudio.com/DefaultCollection) myproject

我得到如下响应：tfsdeleteproject.exe TF400813：资源不可用于匿名访问

我找不到提供用户名/密码的选项 - 如何继续？

# asp.net - ASPX 页面看不到我的 Web 服务类的命名空间

> ID：15928728
> 
> 赞同：0
> 
> 时间：2013-04-10T14:30:29.740
> 
> 标签：asp.net, web-services

我正在编写我的第一个 Web 服务类。我相信我已经遵循了[http://msdn.microsoft.com/en-us/library/bb398998.aspx的所有指示](http://msdn.microsoft.com/en-us/library/bb398998.aspx)的所有指示，但是由于 web 服务的命名空间未知，javascript 失败了。

我的网络服务：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Services;
using BusinessLogicLayer;

namespace AVWebService
{    
    [WebService(Namespace = "http://MyTestSite.Com/webservices/")]
    [WebServiceBinding(ConformsTo = WsiProfiles.BasicProfile1_1)]
    [System.Web.Script.Services.ScriptService]

    public class FillDropLists : System.Web.Services.WebService
    {

        [WebMethod]
        public Lookup[] GetRooms(string DataCenterId)
        {
            return BLL.getRooms(DataCenterId).ToArray();
        }
    }
} 
```

我的网络配置

```
 <system.web>
     <httpHandlers>
        <remove verb="*" path="*.asmx"/>
        <add verb="*" path="*.asmx" type="System.Web.Script.Services.ScriptHandlerFactory" validate="false"/>      
        <add path="Telerik.Web.UI.WebResource.axd" type="Telerik.Web.UI.WebResource" verb="*" validate="false" />
     </httpHandlers>
  </system.web> 
```

我的 ScriptManager 在我的母版页中。

```
<asp:ScriptManager ID="ScriptManager1" runat="server">
    <Services>
        <asp:ServiceReference Path="AVWebService.asmx" />
    </Services>
</asp:ScriptManager> 
```

最后，我的 javascript

```
function FillRoomsList(e) {
            var idx = e.selectedIndex;
            var dcId = e.options[idx].value;
            AVWebService.FillDropLists.GetRooms(dcId, OnRoomsReceived);
        } 
```

我收到的错误“AVWebService is undefined”似乎表明命名空间根本无法识别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:40:17.820

您需要使用 ajax 将 javascript 与您的 Web 服务集成。有关 jQuery 实现的说明，请参阅以下链接。

[http://api.jquery.com/jQuery.ajax/](http://api.jquery.com/jQuery.ajax/)

例子。

```
$.ajax({
     url : 'yourWebService.asmx',
     data: 'data you are sending to the web service'
     success: 'function to execute on success'
}); 
```

# string - Groovy：从字符串评估的时间减法

> ID：15928731
> 
> 赞同：4
> 
> 时间：2013-04-10T14:30:35.420
> 
> 标签：string, date, groovy, subtraction, evaluate

我的脚本从文件中读取一个字符串并将其评估为在 TimeCategory 中作为 TimeDuration 工作。如果字符串以“-”开头，则会引发异常。

我的简化脚本：

```
import groovy.time.TimeCategory;

String string = "-1.day"
Date now = new Date()
use(TimeCategory)
{
    def x = new Date() + evaluate(string)
    println x
} 
```

抛出：

```
groovy.lang.MissingMethodException: No signature of method: groovy.time.Duration.negative() is applicable for argument types: () values: []
    Possible solutions: notify() 
```

目前我的解决方案是：

```
import groovy.time.TimeCategory;

String string = "-1.day"
Date now = new Date()
use(TimeCategory)
{
    def x
    if(string.startsWith("-"))
    {
        string = string.substring(1)
        x = now - evaluate(string)
    }
    else
    {
        x = now + evaluate(string)
    }
    println x
} 
```

它虽然可以做到以下几点。但是……我不喜欢。我不确定后果（它是否适用于不同的时间单位？“-1.day+2.hours-3.minutes”）：

```
String prestring = "-1.day"
String string = "0.day$prestring" 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:44:09.777

问题是评估操作的顺序：

`-1.day`等价于`-(1.day)`, 或`(1.day).negative()`

为了解决这个问题，您可以先应用括号来评估减号运算符：

`(-1).day`

另一种解决方案是在类中添加一个`negative()`方法`Duration`。

```
Duration.metaClass.negative = { -> 
    new Duration(-delegate.days, 
                 -delegate.hours, 
                 -delegate.minutes, 
                 -delegate.seconds, 
                 -delegate.millis) 
} 
```

# r - 如何编写成员向量以在 R 的模块化（）函数中使用

> ID：15928740
> 
> 赞同：0
> 
> 时间：2013-04-10T14:30:53.880
> 
> 标签：r, vector, detection, modularity

我有一个用另一个软件创建的成员向量，我坚持把它写到 R 中，这样我就可以使用 iGraph 的模块化函数来计算这个社区划分的模块化。　

有人可以帮助我如何将向量写入 R 以便 Modularity(g,membership) 可以运行吗？

我尝试使用成员资格 <- read.table(file)，但结果不能与模块化（g，成员资格）一起使用

谢谢，

歌曲

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:27:24.463

`read.table`创建一个数据框，您需要将其转换为一个简单的数字向量。或者，您可以使用`scan()`. 您可能需要根据您的数据格式调整以下内容。

```
library(igraph)
G <- graph.full(3) + graph.ring(3) + graph.full(3)

contents <- '1 1 1 2 2 2 3 3 3'
memb <- scan(textConnection(contents))
# Read 9 items

modularity(G, memb)
# [1] 0.6666667 
```

而不是`textConnection()`，只需将您的文件名放在那里。

# asp.net - 是否可以从 xml 中获取填充类对象？

> ID：15928744
> 
> 赞同：0
> 
> 时间：2013-04-10T14:31:12.870
> 
> 标签：asp.net, linq, linq-to-xml

我有一个这样的xml文件：

```
 <CommissionTypes>
    <Type>CPA</Type>
    <Lender>
      <Seq>001</Seq>
      <PostUrl>http://www.mysite.com</PostUrl>
    </Lender>
  </CommissionTypes>
</Lenders> 
```

得到这样的数据：

```
var config = XDocument.Load(xml); 
```

我需要将它映射到一个类集合，该类的结构如下：

```
public class Lender
{
    public string Type { get; set; }
    public int Seq { get; set; }
    public string PostUrl { get; set; }

    public void Lender(string type, int seq, string postUrl)
    {
        Type = type;
        Seq = seq;
        PostUrl = postUrl;
    }
} 
```

一段时间以来，我一直在尝试使用 linq 执行此操作，但尚未成功。我想要做的是检索类型为“CPA”或任何其他类型的所有贷方。

有什么建议吗？

// *** 更新 *** //

下面的更新是我目前所在的位置。它不起作用，得到一个“对象引用未设置为实例”错误 wgere 箭头是。

```
<CommissionTypes>
  <Type type="CPA">
    <Lender>
      <Seq>001</Seq>
      <PostUrl>http://www.mysite.com</PostUrl>
    </Lender>
  </Type>
</CommissionTypes>

    public static List<Lender> GetLenders(string xml)
    {
        var myXml = XDocument.Load(xml);

        var lenders = new List<Lender>();

        lenders = (from type in myXml.Descendants("Type")
               where type.Attribute("type").Value == "CPA"
        ===>   select new Lender(
                "CPA",
                type.Element("Seq").Value.ConvertTo<int>(),
                type.Element("PostUrl").Value)).ToList();

        return lenders;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T19:43:14.353

您的查询不正确，因为`Seq`它不是元素的直接子`Lender`元素。

```
public static List<Lender> GetLenders(string xml)
{
    var myXml = XDocument.Load(xml);

    var lenders = new List<Lender>();

    lenders = (from type in myXml.Descendants("Type")
               where type.Attribute("type").Value == "CPA"
               from lender in type.Elements("Lender")
               select new Lender(
                    "CPA",
                    (int)lender.Element("Seq"),
                    (string)lender.Element("PostUrl"))).ToList();

    return lenders;
} 
```

# php - 勾选复选框时Javascript添加MySQL数据

> ID：15928745
> 
> 赞同：0
> 
> 时间：2013-04-10T14:31:13.810
> 
> 标签：php, javascript, mysql

我目前正在使用这个 javscript 和 PHP 代码

```
<script>
function add(total)
{
    form2.thetotal.value = document.forms["form1" + total].total.value;
}
</script>

<form name="form2">
<table width="800" border="0" cellspacing="0" cellpadding="10" style="position:fixed; z-index:-999; background-color:#FFF;">
  <tr bgcolor="#eeeeee">
    <td>&nbsp;</td>
    <td colspan="2" width="50%"><strong>Total: </strong><input type="text" name="thetotal" id="thetotal" size="20" value="0" /></td>
    <td colspan="2" width="50%"><strong>VAT:</strong> </td>
  </tr>
  <tr bgcolor="#eeeeee">
    <td width="5%">&nbsp;</td>
    <td width="20%"><strong>Invoice Number</strong></td>
    <td width="35%"><strong>Company</strong></td>
    <td width="20%"><strong>Date</strong></td>
    <td width="20%"><strong>Total</strong></td>
  </tr>
  </table>
</form>

<form name="form1">
<table width="800" border="0" cellspacing="0" cellpadding="10">
<?php
$sql="SELECT * from billing_pdf_archive order by invoice_number ASC ";
$rs=mysql_query($sql,$conn) or die(mysql_error());
while($result=mysql_fetch_array($rs))
{
    $counter++;
    $sql2="SELECT * from customer where sequence = '".$result["customer_sequence"]."' ";
    $rs2=mysql_query($sql2,$conn) or die(mysql_error());
    $result2=mysql_fetch_array($rs2);

    $sql3="SELECT * from reseller where sequence = '".$result["reseller_sequence"]."' ";
    $rs3=mysql_query($sql3,$conn) or die(mysql_error());
    $result3=mysql_fetch_array($rs3);

    if($result["customer_sequence"] != '0')
    {
        $company = $result2["company"];
    }
    elseif($result["reseller_sequence"] != '0')
    {
        $company = '<strong>Reseller: </strong>'.$result3["company"];
    }

    $total = $result["total"];

    echo '<tr>
    <td width="5%"><input type="checkbox" name="check" id="check" onclick=\'add('.$total.');\' /></td>
    <td width="20%">'.$result["invoice_number"].'</td>
    <td width="35%">'.$company.'</td>
    <td width="20%">'.$result["datetime"].'</td>
    <td width="20%">&pound;'.$result["total"].'</td>
  </tr>';
}
?>
</table>
</form> 
```

所以你可以看到它是从 MySQL 数据库中选择的，我正在尝试这样做，所以当其中一个复选框被勾选时，它会将总数添加到“thetotal”文本字段（在表格 2 中）但它只是离开那个框为零 - 关于我能做什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:47:33.040

这是你可以做到的（假设总数是int而不是float）：

```
<script>
function add(total, this_chk_bx)
{
    //(if its float, use `parseFloat` instead of `parseInt`)

    if(this_chk_bx.checked==true){
    //add if its checked
    var tot_1 = parseInt(form2.thetotal.value);
    form2.thetotal.value = tot_1+parseInt(total);
    }
    else{
    //subtract if its unchecked
    }
}
</script> 
```

.

在您的 php 中，您必须像这样发送复选框： `onclick=\'add('.$total.', this);\'`

.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:53:10.410

您没有为表单 1 指定总字段，然后它引发了 javascript 错误，它不会工作。一探究竟

```
 <script>
            function add(total)
            {
                form2.thetotal.value =  total + parseFloat(document.form1.formtotal.value);
            }
            </script>

            <form name="form1">

            <!-- replace field name formtotal with anything that you want-->
            <!-- replace field value with anything that you get from your mysql result-->
            <input type="text" name="formtotal" id="formtotal" value="10" />
            </form> 
```

# .net - 寻找更好的技术来将实体类中的数据检索到视图中

> ID：15928747
> 
> 赞同：2
> 
> 时间：2013-04-10T14:31:31.613
> 
> 标签：.net, asp.net-mvc

我有一个包含很多属性的实体类，每个属性都有一个显示名称。我有一个页面，我在其中显示属性。为此，我创建了一个模型，在其中复制了实体类的属性。

在控制器中，我从数据库中检索数据，并拥有一个包含我需要的所有数据的实体类项目。通过反射，我将所有数据复制到模型中。在页面中，通过使用 Html 助手，我显示了从模型中获取的属性名称和属性值。

我的问题是 - 如何更好地实施它？我想知道将属性从实体类复制到模型是否是一种矫枉过正。此外，我为属性复制了显示名称属性。

我正在考虑在模型中创建一个表示整个实体类的属性，然后通过模型从页面检索数据，但使用此类的属性。但是，这看起来不像是一个透明的解决方案。

对更好技术的想法表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:56:45.900

我认为您正在遵循最佳实践，但这里有一些方法可以减少重复：

1.  如果实体模型和视图模型上的字段名称相同，您可能会在两个模型上重用相同的 MetaData 注释类。无论是这样，还是通过对这些注释类的继承，都可以减少重复的语法。

2.  如果您不想执行上述操作，请使用资源文件作为显示属性。[http://thatextramile.be/blog/2011/03/convention-based-localization-with-asp-net-mvc/](http://thatextramile.be/blog/2011/03/convention-based-localization-with-asp-net-mvc/)这将消除一些重复的需要。还可以很好地为本地化做好准备。

3.  虽然我不建议你这样做，但是你*可以*使用你的实体模型作为你的视图模型，只要你在它上面设置 Bind Exclude 注释来保护你自己免受客户端的属性注入。它是您的裤子座位类型的东西，但它确实减少了重复，尽管存在安全风险。

4.  你说你在使用反射？我认为您正在使用类似于奇妙的 Automapper 的东西？[http://automapper.codeplex.com/](http://automapper.codeplex.com/)如果没有，这也可以为您节省一些时间。

我希望这在一些小方面有所帮助。

PS 总是很高兴看到开发人员希望做的事情比他们已经拥有的更好。它显示了角色的成熟度和对我们工艺的热情；可悲的是经常缺席。

# php - php，mysql - 如何回滚创建或删除表

> ID：15928748
> 
> 赞同：-4
> 
> 时间：2013-04-10T14:31:35.960
> 
> 标签：php, mysql

嗯..标题有点说明了一切。

假设我有一个创建一些表的脚本，然后在其中插入一些数据。有时会发生错误。

反正有回滚创建表吗？还是我必须手动删除它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:34:14.017

[没有](http://dev.mysql.com/doc/refman/5.1/en/implicit-commit.html)。

> InnoDB 中的 CREATE TABLE 语句作为单个事务处理。这意味着来自用户的 ROLLBACK 不会撤消用户在该事务期间所做的 CREATE TABLE 语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:35:25.730

如果是通过 php 脚本插入数据，可以`DROP TABLE`在检测到插入行失败时发出相关查询

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:36:06.467

当然你不能回滚，因为创建语句是 DDl

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2013-04-10T14:38:09.707

MYSQL：此扩展自 PHP 5.5.0 起已弃用

试试mysqli，你有回滚功能。

[http://php.net/manual/en/mysqli.rollback.php](http://php.net/manual/en/mysqli.rollback.php)

# jquery - jQuery - 单击与双击 - jEditable

> ID：15928749
> 
> 赞同：0
> 
> 时间：2013-04-10T14:31:38.723
> 
> 标签：jquery, jeditable, double-click

我正在努力寻找构建以下内容的“正确”方法。

我有一个 td 单元格，其中有一个标题，（在一个更大的表格中）。这个 td 有一个点击事件来打开一个子菜单。我已经在这个标题上使用 jEditable 实现了内联编辑，包装在一个 div 类中。

简化：

```
<tr>  
....
  <td class="menuopener"><div class="editable">TITLE</div></td> 
...
</tr> 
```

我将 div 设置为触发 DblClick 上的 jEditable。

由于这个 div 占据了整个单元格，所以 menuopener click 事件永远不会触发。

如果我将 div 更改为 display:inline，我可以获得单元格的“剩余部分”以获取菜单开启器触发器。

但是当我双击时，我不想打开菜单，因为这不是用户现在想要做的......他们想要更新标题。

那么，做到这一点的“最佳”方法是什么……不一定是代码方面的，而是人为因素方面的。延迟跟踪器是一个想法吗？将菜单更改为在双击时触发并在单次上进行编辑，但同样的问题只是向后......

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:43:23.883

无论标题的大小如何，事件都会冒泡。当您的标题双击侦听器触发时，菜单打开器的单击侦听器将始终首先触发两次。[演示](http://jsfiddle.net/PRtNV/)。

如果点击目标是您的标题，则您需要将菜单打开器限制为您的双击阈值。

```
$('.menuopener').click(function(e) {
    var delay = $(e.target).is('.editable') ? 200 : 0;
    window.clearTimeout(window.openMenuTimeout);
    window.openMenuTimeout = window.setTimeout(function() {
       // your menu opener code
    }, delay);
});

$('.editable').dblclick(function(e) {
    window.clearTimeout(window.openMenuTimeout);
    // your editable code
}); 
```

[演示](http://jsfiddle.net/MSMjs/)

在后一个示例中，您可能确实希望使您`inline-block`的`.editable`.

# python - Python 中的数值 ODE 求解

> ID：15928750
> 
> 赞同：14
> 
> 时间：2013-04-10T14:31:39.420
> 
> 标签：python, plot, numerical-methods, differential-equations

如何在 Python 中数值求解 ODE？

考虑

![求解方程](https://i.stack.imgur.com/ACR45.gif)

```
\ddot{u}(\phi) = -u + \sqrt{u} 
```

符合以下条件

```
u(0) = 1.49907 
```

和

```
\dot{u}(0) = 0 
```

有约束

```
0 <= \phi <= 7\pi. 
```

最后，我想生成一个参数图，其中 x 和 y 坐标是作为 u 的函数生成的。

问题是，我需要运行 odeint 两次，因为这是一个二阶微分方程。我尝试在第一次之后再次运行它，但它返回雅可比错误。必须有一种方法可以一次运行两次。

这是错误：

> odepack.error：函数及其雅可比行列式必须是可调用函数

下面的代码生成。有问题的行是 sol = odeint。

```
import numpy as np
from scipy.integrate import odeint
import matplotlib.pyplot as plt
from numpy import linspace

def f(u, t):
    return -u + np.sqrt(u)

times = linspace(0.0001, 7 * np.pi, 1000)
y0 = 1.49907
yprime0 = 0
yvals = odeint(f, yprime0, times)

sol = odeint(yvals, y0, times)

x = 1 / sol * np.cos(times)
y = 1 / sol * np.sin(times)

plot(x,y)

plt.show() 
```

**编辑**

我正在尝试构建第 9 页的情节

[古典力学泰勒](http://www.colorado.edu/physics/phys3210/phys3210_fa05/Homework/phys3210_fa05_homework10_solutions.pdf)

这是 Mathematica 的情节

![数学图](https://i.stack.imgur.com/9X6Va.png)

```
In[27]:= sol = 
 NDSolve[{y''[t] == -y[t] + Sqrt[y[t]], y[0] == 1/.66707928, 
   y'[0] == 0}, y, {t, 0, 10*\[Pi]}];

In[28]:= ysol = y[t] /. sol[[1]];

In[30]:= ParametricPlot[{1/ysol*Cos[t], 1/ysol*Sin[t]}, {t, 0, 
  7 \[Pi]}, PlotRange -> {{-2, 2}, {-2.5, 2.5}}] 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-10T14:56:33.017

```
import scipy.integrate as integrate
import matplotlib.pyplot as plt
import numpy as np

pi = np.pi
sqrt = np.sqrt
cos = np.cos
sin = np.sin

def deriv_z(z, phi):
    u, udot = z
    return [udot, -u + sqrt(u)]

phi = np.linspace(0, 7.0*pi, 2000)
zinit = [1.49907, 0]
z = integrate.odeint(deriv_z, zinit, phi)
u, udot = z.T
# plt.plot(phi, u)
fig, ax = plt.subplots()
ax.plot(1/u*cos(phi), 1/u*sin(phi))
ax.set_aspect('equal')
plt.grid(True)
plt.show() 
```

![在此处输入图像描述](https://i.stack.imgur.com/lLkco.png)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-11T21:43:32.067

您其他[问题](https://stackoverflow.com/questions/15953337/splitting-an-array-in-python)的代码非常接近您想要的。需要进行两项更改：

*   您正在解决不同的 ODE（因为您更改了函数内部的两个符号`deriv`）
*   您所需绘图的`y`分量来自解值，而不是解的一阶导数的值，因此您需要将`u[:,0]`（函数值）替换为`u[:, 1]`（导数）。

这是最终结果：

```
import numpy as np
import matplotlib.pyplot as plt
from scipy.integrate import odeint

def deriv(u, t):
    return np.array([u[1], -u[0] + np.sqrt(u[0])])

time = np.arange(0.01, 7 * np.pi, 0.0001)
uinit = np.array([1.49907, 0])
u = odeint(deriv, uinit, time)

x = 1 / u[:, 0] * np.cos(time)
y = 1 / u[:, 0] * np.sin(time)

plt.plot(x, y)
plt.show() 
```

但是，我建议您使用 unutbu 答案中的代码，因为它是自我记录 ( `u, udot = z`) 并使用`np.linspace`而不是`np.arange`. 然后，运行它以获得您想要的数字：

```
x = 1 / u * np.cos(phi)
y = 1 / u * np.sin(phi)
plt.plot(x, y)
plt.show() 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T14:49:45.917

您可以使用 scipy.integrate.ode。要解决 dy/dt = f(t,y)，初始条件 y(t0)=y0，在 time=t1 时使用四阶 Runge-Kutta，您可以执行以下操作：

```
from scipy.integrate import ode
solver = ode(f).set_integrator('dopri5')
solver.set_initial_value(y0, t0)
dt = 0.1
while t < t1:
    y = solver.integrate(t+dt)
    t += dt 
```

编辑：您必须得到一阶导数才能使用数值积分。这可以通过设置例如 z1=u 和 z2=du/dt 来实现，之后你有 dz1/dt = z2 和 dz2/dt = d^2u/dt^2。将这些代入您的原始方程，并简单地迭代向量 dZ/dt，这是一阶的。

编辑2：这是整个事情的示例代码：

```
import numpy as np
import matplotlib.pyplot as plt

from numpy import sqrt, pi, sin, cos
from scipy.integrate import ode

# use z = [z1, z2] = [u, u']
# and then f = z' = [u', u''] = [z2, -z1+sqrt(z1)]
def f(phi, z):
    return [z[1], -z[0]+sqrt(z[0])]

# initialize the 4th order Runge-Kutta solver
solver = ode(f).set_integrator('dopri5')

# initial value
z0 = [1.49907, 0.]
solver.set_initial_value(z0)

values = 1000
phi = np.linspace(0.0001, 7.*pi, values)
u = np.zeros(values)

for ii in range(values):
    u[ii] = solver.integrate(phi[ii])[0] #z[0]=u

x = 1\. / u * cos(phi)
y = 1\. / u * sin(phi)

plt.figure()
plt.plot(x,y)
plt.grid()
plt.show() 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-10T14:41:54.763

[scipy.integrate() 进行](http://docs.scipy.org/doc/scipy/reference/integrate.html)ODE 集成。那是你要找的吗？

# c++ - 删除作为公共类成员的指针

> ID：15928751
> 
> 赞同：1
> 
> 时间：2013-04-10T14:31:39.950
> 
> 标签：c++, pointers

我有一个结构/类，其成员是指针，比方说

```
struct myStruc
{
    int* m_p;
} 
```

**1\. 问题：**我应该在哪里删除指针？在析构函数中？

```
myStruct::~myStruct()
{
    delete m_p;
} 
```

**2\. 问题：**如果将指针分配给指针数组，例如

```
myStruct mS;
mS.m_p = new int[3]; 
```

如果我必须这样做，现在有一个不错的方法（没有 dynamic_cast 或 try-catch）`delete`吗`delete[]`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:41:25.473

你不应该允许“用户”在你的数据结构中弄乱指针。将指针设为私有并使用 get/set 函数来访问它。

所以：

```
struct myStruc
{
  private:
    int* m_p;
  public:
    int* ptr() { return m_p; }
    void allocate(int n) { m_p = new int[n]; 
    myStruc() : m_p(0) {};
    ~myStruc() { delete [] m_p; }
}; 
```

编辑：上面的课程不完整，它显示了这个概念。对于一个完整的类，您需要一个复制构造函数和一个赋值运算符，并且可能`n`从`allocate`函数中“记住”。

现在您不必担心是否使用 [] 进行分配，因为它是一致的。

当然，您可以通过 using 来实现这一点，`std::vector`而无需任何额外的努力。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:33:06.433

理想情况下，您根本不应该使用原始指针成员。你有两个更好的选择：

1.  使用`std::vector`或
2.  使用**智能指针**作为成员，并[根据您的使用语义选择正确](https://stackoverflow.com/questions/8706192/which-kind-of-pointer-do-i-use-when)的指针。

如果您不能使用智能指针并且必须使用原始指针，则：

*   `new`如果你使用然后使用分配指针`delete`，如果你使用`new []`那么你需要使用`delete []`。不应该有不匹配。
*   您需要在此动态分配成员的生命周期结束时调用`delete`or 。`delete []`假设这个成员的生命周期与你的类的生命周期相同，它将在析构函数中。
*   重要的部分是你应该遵循**[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)**。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:32:36.863

1.  理想情况下在析构函数中。但遵循[三法则](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)。
2.  你应该使用`delete[]`. `new/new[]`应`delete/delte[]`分别使用。

# kendo-ui - 当用户单击组合框进行过滤时，Kendo 组合框选择显示文本

> ID：15928752
> 
> 赞同：2
> 
> 时间：2013-04-10T14:31:41.137
> 
> 标签：kendo-ui, kendo-combobox

我似乎在任何地方都找不到这个。当用户单击组合框到文件管理器时，有没有办法选择组合框的完整显示文本？默认情况下，当用户点击组合框时，用户必须手动选择全文并删除。我想为他们选择文本，所以他们所要做的就是点击删除按钮将其删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T07:31:49.093

您可以通过在自动完成控件的基础文本框中添加焦点事件来完成此操作。

请参阅此 jsFiddle 进行演示：[单击我](http://jsfiddle.net/wMjhB/)

**代码：**

```
$('input').focus(function(e) {
    $(this).select();
}); 
```

# asp.net-mvc - 如何从部分表单中获取数据

> ID：15928756
> 
> 赞同：1
> 
> 时间：2013-04-10T14:31:44.320
> 
> 标签：asp.net-mvc

我在弹出窗口中有 ASP.NET MVC 表单，其中包含一些控件和部分（数据网格）以及他自己的模型。这是弹出窗口：

```
<div id="AddEditDialog" class="none">
    @using (Ajax.BeginForm("Save", "Templates", new AjaxOptions
        {
            InsertionMode = InsertionMode.Replace,
            UpdateTargetId = "AddEditPlaceHolder",
            OnSuccess = "OnSaveSuccess",
            HttpMethod = "Post"
        }))
    {
    <div>
        <div id="AddEditPlaceHolder"></div>
        <div id="PopupButtons" class="btn-holder-centered">
            <input type="submit" value="Save" name="SaveButton" />
            <input type="button" value="Cancel" name="SaveCancelButton" id="CancelEditHandler" />
        </div>
    </div>
    }
</div> 
```

这是我通过 js 在 AddEditPlaceHolder 中呈现的表单：

```
@model TemplatesViewModel   
<div class="form-field-plain overflow">
    <div class="forRow narRow float-left">
        @Html.LabelFor(x => x.Revocable)
        @Html.CheckBoxFor(x => x.Revocable)
    </div>
</div>
<div class="form-field-plain overflow">
    <div class="forRow narRow float-left">
        @Html.LabelFor(x => x.HtmlTemplate)
        @Html.TextAreaFor(x => x.HtmlTemplate)
    </div>
</div>

@Html.Partial("_VariablesGridView", Model.Variables) 
```

_VariablesGridView.cshtml：

```
@model List<TemplateVariableViewModel>

<table id="TemplateVariablesGrid">
    <thead>
        <tr>
            <td>Tag/Code</td>
            <td>Prompt</td>
            <td>Action</td>
        </tr>
    </thead>
    <tbody>
        @foreach (var i in Model)
        {
            <tr>
                <td>
                    @Html.TextBox("txtTag", @i.Tag, new {})
                </td>
                <td>
                    @Html.TextBox("txtPrompt", @i.Prompt, new { })
                </td>
                <td>
                    @Html.HiddenFor(x => x.First(s => s.Id == @i.Id).Id)
                    <label class="delete-variable">delete</label>
                </td>
            </tr>
        }
    </tbody>
</table>
<br />
<input type="button" name="btnAddTemplateVariable" value="add new variable"/>
<br /> 
```

我的问题是：在 Controller 'save form' 方法 public ActionResult Save(TemplateViewModel model)
我的模型包含来自表单的所有数据，但 TemplateViewModel.Variables 是空的

有什么办法可以在那里填写吗？

楷模：

```
public class TemplateViewModel
{
    public int Id { get; set; }
    public string HtmlTemplate { get; set; }      
    public List<TemplateVariableViewModel> Variables { get; set; }
}

public class TemplateVariableViewModel
{
    public int Id { get; set; }
    public string Tag { get; set; }
    public string Prompt { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:02:32.033

我相信这是因为 ASP.Net MVC 绑定没有将这些字段放在上下文中，请查看传递给浏览器的字段名称，当它到达浏览器时 txtTag 的前缀是什么，以及在你执行之后是什么下列的：

```
@Html.Partial("_VariablesGridView", Model) 
```

_VariablesGridView.cshtml：

```
@model TemplatesViewModel
...
@for (int i = 0; i < Model.Variables.Count; i++)
    @Html.TextBox("txtTag", @Model.Variables[i].Tag, new {}) 
```

如果这（再次）惨遭失败，请原谅我，我是从臀部射击。

# css - Joomla 中特定于类别的 CSS 样式？

> ID：15928757
> 
> 赞同：3
> 
> 时间：2013-04-10T14:31:45.827
> 
> 标签：css, joomla

关于将样式应用于文章类别（类别或其他任何东西）的好方法的任何想法？

目前，我在文章中手动创建了第一遍，将其包装在一个跨度中：

```
<span class="foo">
<p>bar</p>
<p>etc</p>
</span> 
```

然后我将文章粘贴到 JCK 编辑器中，并在模板目录中有一个新的 css 文件来处理`class foo`.

这不是很好，因为 JCK Editor 将 span 类移动到内部元素，产生类似

```
<p><span class="foo">bar</span></p>
<p><span class="foo">etc</span></p> 
```

在您开始使用 JCK 编辑器编辑文章之前，这是可以的，因为新内容不会进入跨度：

```
<p><span class="foo">bar</span></p>
<p><span class="foo">etc</span></p>
<p>New unstyled content inserted by JCK Editor</p> 
```

我在 Joomla3 上。如果类别的名称出现在 html 中，那么理想的情况是，我可以在其上挂一个样式，但事实并非如此。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T23:43:11.607

有很多方法可以解决这个问题。如果您想为此目的向 body 标签添加一个类，请查看我在[https://github.com/construct-framework/construct5/blob/master/index.php#L65](https://github.com/construct-framework/construct5/blob/master/index.php#L65)上的操作方式并从[https://github.com/construct-framework/construct5/blob/master/elements/logic.php#L235](https://github.com/construct-framework/construct5/blob/master/elements/logic.php#L235)。这假设您要编辑模板。

您还可以创建一个简单的插件来动态地将这些类添加到您的 body 标签中。

否则，可以使用[http://extensions.joomla.org/extensions/style-a-design/templating/14053之类的东西来做到这一点](http://extensions.joomla.org/extensions/style-a-design/templating/14053)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-11T07:38:30.993

1.  如果每个类别都位于自己的菜单项上，您可以为容器 div 添加“页面类”后缀（高级选项>页面显示选项）

2.  其他方式是添加模板覆盖：

复制`components/com_content/views/category/tmpl/blog.php`到`templates/[your_template]/html/com_content/category/blog.php`)

并在文件更改内部

```
<div class="blog<?php echo $this->pageclass_sfx;?>"> 
```

至

```
<div class="blog<?php echo $this->pageclass_sfx . ' ' . $this->category->alias;?>"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-04T21:38:45.210

您可能不应该在 span-elements 中添加 p-elements，因为 span 是一个内联元素，不应该包含像 p 这样的块元素。这就是 JCK 切换元素的原因。如果您改用 div 元素，则文本编辑器可能不会出现此问题。

除此之外，我想其他两个受访者都有很好的观点。

# javascript - 如何从 JSON 对象中的键中获取值？

> ID：15928760
> 
> 赞同：2
> 
> 时间：2013-04-10T14:31:57.520
> 
> 标签：javascript, json, parsing, object

我想打印 JSON 对象的所有键值对。我不知道对象的键，所以我试图在一个循环中获取所有键和相应的值。但似乎我遗漏了一些明显的东西。

我的 perl 代码

```
%some_data = ("key1"  => "value1","key2" => "value2","key3"  => "value3","key4" => "value4");
  my $json = encode_json \%some_data;
print $json; # it prints {"key2":"value2","key4":"value4","key1":"value1","key3":"value3"} 
```

我简单的 javascript 代码

```
var jsonObj=$json;
var keys= Object.keys(jsonObj);
for (var i = 0; i < keys.length; i++){ 
   document.write("<br /> ");
   document.write(keys[i]); 
   // document.write(jsonObj.[keys[i]]);  # doesnt work
}

document.write(jsonObj.key1); #works 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:37:35.683

只需用于`for..in`循环对象：

```
for (var key in jsonObj) {
  document.write(key);  
  document.write(jsonObj[key]);  
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:35:33.493

您无法通过执行来检索与 JavaScript 对象键关联的值`jsonObj.[keys[i]]`。您应该将该行更改为`jsonObj[keys[i]]`. 点表示法仅适用于对象中存在的键。由于`[keys[i]]`实际上不是该对象的属性，因此您不能使用点表示法，而必须使用方括号表示法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-10T14:35:29.637

您的“不起作用”行应该是：

```
document.write(jsonObj[keys[i]]);
                      ^--- no "." 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-10T14:35:55.120

`jsonObj[keys[i]]`尝试调用时，您正在组合方括号表示法 ( ) 和点表示法 (jsonObj.key1) `document.write()`；它们彼此等效，因此您应该只使用其中之一。在这种情况下，由于密钥是动态的，因此您应该只使用方括号表示法：

```
document.write(jsonObj[keys[i]]); 
```

# vb.net - vb.net 气泡图，每个气泡中都有渐变样式，使其看起来像一个球

> ID：15928765
> 
> 赞同：0
> 
> 时间：2013-04-10T14:32:06.593
> 
> 标签：vb.net, 3d, bubble-chart

我在 vb.net 中有一个带有下面代码的气泡图，我想让气泡以渐变样式出现，看起来像一个球（而不是一个圆圈）

```
Dim xValues As Double() = {10.62, 75.54, 60.45}
Dim yValues As Double() = {650.62, 50.54, 600.45}
Dim size As Integer() = {10, 20, 30}
Dim names As String() = {"a", "b", "c"}

Chart5.Series("Series1").ChartType = SeriesChartType.Bubble
Chart5.Series("Series1").Points.DataBindXY(xValues, yValues, size, names)
Chart5.Series("Series1").MarkerStyle = MarkerStyle.Circle
For i = 0 To 2
        Chart5.Series("Series1").Points(i).Label = names(i)
Next 
```

我试过了：

```
 Chart_Analysis.Series("Series1").BackSecondaryColor = Drawing.Color.Green
    Chart_Analysis.Series("Series1").MarkerColor = Drawing.Color.Blue
    Chart_Analysis.Series("Series1").BackGradientStyle = GradientStyle.Center 
```

... 和

```
 For i = Region_From To Region_To
        Chart_Analysis.Series("Series1").Points(i).Label = names(i)
        Chart_Analysis.Series("Series1").Points(i).BackGradientStyle = GradientStyle.Center
        Chart_Analysis.Series("Series1").Points(i).Color = Drawing.Color.Aqua
        Chart_Analysis.Series("Series1").Points(i).BackSecondaryColor = Drawing.Color.Green
    Next 
```

...但没有成功

关于如何实现这种 3d/ball 效果的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:52:44.640

尝试将您的第一个选项更改为

```
Chart_Analysis.Series("Series1").BackSecondaryColor = Drawing.Color.Green
Chart_Analysis.Series("Series1").MarkerColor = Drawing.Color.Blue
Chart_Analysis.ChartAreas("Series1").BackGradientStyle = GradientStyle.Center 
```

注意第三行对 ChartAreas 的更改。我发现有时您认为您应该针对该系列进行编码，但您应该使用 ChartAreas。

# java - BufferedImage 的更改侦听器

> ID：15928769
> 
> 赞同：3
> 
> 时间：2013-04-10T14:32:21.017
> 
> 标签：java, graphics, bufferedimage, changelistener

有没有办法跟踪 BufferdImage 的像素数据的变化？我在想这样的事情：

```
PixelChangeListener listener = new PixelChangeListener() {
public void pixelchange(Event e) {
    // Get the coordinates in the Image that have been changed:
    int x=e.getX();
    int y=e.getY();
}
};
buffimage.addPixelChangeListener(listener); 
```

如果我现在使用`g.drawLine`或`buffimage.setRGB(x,y,rgb);` `pixelchange(e)`应该开火。
有没有办法做到这一点？:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:35:10.140

没有这样的听众。但是您可以扩展`BufferedImage`和添加您需要的 API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-29T17:24:12.153

*这是 OP 的解决方案（最初发布在问题中）。*

* * *

不是 BufferedImage 本身，而是它背后的 WritableRaster 必须修改。您可以使用`sun.awt.image.SunWritableRaster`它，只需使用该`notifychanged()` 方法来跟踪像素变化。为了使用 Raster 获得正确的 BufferedImage，我使用了以下代码：

```
ColorModel colormodel=ColorModel.getRGBdefault();
WritableRaster temp=colormodel.createCompatibleWritableRaster(400,400);
SunWritableRaster raster=new SunWritableRaster(temp.getSampleModel(),temp.getDataBuffer(),new Point(0,0));
BufferedImage img=new BufferedImage(colormodel,raster,true,null); 
```

# php - 如何获得 3 行中的第 2 项？

> ID：15928772
> 
> 赞同：0
> 
> 时间：2013-04-10T14:32:28.120
> 
> 标签：php, math, ternary-operator

我有一个网页布局，其中有 3 行。我需要给中间项目一个特殊的 css 类。怎么做？

```
div [div] div
div [div] div
div [div] div
div [div] div 
```

我知道对于表格行，您可以使用三元运算符来检测它们的交替行颜色：

```
class="<?= $key % 2 == 0 ? 'odd' : 'even'" 
```

但是如何连续 3 次中的第 2 次呢？

PS我数学很烂，也许答案很明显。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:35:29.703

您可以使用 CSS 将样式应用于`nth-child`...

```
div:nth-child(3n+2) {
    color: red;
} 
```

你可以在这个[JS Fiddle](http://jsfiddle.net/kTnsK/)上看到一个例子。

如果您真的需要在 PHP 中执行此操作，您可以使用`% 3`而不是 2 并取消 1 来获得偏移量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:50:19.590

将模数测试的除数修改为 3（每块 3 行）；并测试结果为 1（偏移量 0 的第二个条目）

```
class="<?= $key % 3 == 1 ? 'odd' : 'even'" 
```

# vb.net - Streamreader - 从 IP 读取数据

> ID：15928779
> 
> 赞同：0
> 
> 时间：2013-04-10T14:32:41.133
> 
> 标签：vb.net, streamreader, readline

我正在连接一个通过 IP 发送数据的仪器。我想将我的阅读代码放在一个计时器中，以便在用户与程序交互时在后台读取数据。我的问题是它出现了streamreader readline 块。真的吗？如果是这样，我应该如何在没有阻塞的情况下从输入设备读取一行？

我还应该注意我的流式阅读器是一个网络流。目标框架也是Net 2.0。不确定这是否重要。

TIA，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T19:03:50.980

`StreamReader.ReadLine`是一种阻塞（同步）方法。当您调用它时，它将阻止执行继续，直到收到完整的行。这使它更容易使用，但显然，如果您需要它异步工作，它不能满足您的需求。

`StreamReader`包含许多它的方法的阻塞和异步版本。例如，除了`ReadLine`方法之外，还有一个`ReadLineAsync`方法与 执行相同的操作`ReadLine`，但它是异步执行的。

因此，您的选择是，要么您需要使用其中一种异步方法，要么您可以继续使用该`ReadLine`方法，即使它是一个阻塞方法，只要您从另一个线程调用它。如果它阻塞了一个后台线程，其唯一目的是读取流，那对你来说并不重要，只要 UI 线程没有被阻塞。因此，例如，您可以使用这样的方法：

```
Private Sub MonitorStream
    While True
        ProcessLine(_Reader.ReadLine)
    End While
End Sub 
```

然后，您可以在新线程中调用该方法，如下所示：

```
Dim t As New Thread(AddressOf MonitorStream)
t.Start() 
```

这只是一个简单的例子。您可能想检查流是否打开而不是无限循环等等。但这应该给您一个起点。我会说使用该`ReadLineAsync`方法可能会更好，但是对于了解异步编程的人来说，单独线程中的无限循环更容易使用和理解。

# salesforce - 使用 BigDecimal 时的 Salesforce update() 方法错误

> ID：15928781
> 
> 赞同：2
> 
> 时间：2013-04-10T14:32:46.847
> 
> 标签：salesforce, bigdecimal

在数据类型方面，Salesforce 中的 upsert 和 update 操作有什么不同吗？

我使用 upsert 同步我的联系人并更新以同步我的帐户。

为联系人设置自定义字段时，我将 BigDecimal 值传递给它，它会很高兴地与 Salesforce 同步，当我调用更新时对我的帐户执行相同的操作，我得到：

找不到 xml 类型：java.math.BigDecimal

似乎更新方法不喜欢 BigDecimals？

谢谢，

克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T18:59:55.607

我不能说你到底为什么会遇到 Account 而不是 Contact 的问题，但我的第一个倾向是根本不尝试传入 BigDecimal，而是首先使用 BigDecimal.doubleValue() 将其转换为双精度. 缺点是您可能会在那里失去一些精度，但好处是它应该可以正常工作:)。

# html - 未保存到文档目录的 url 的编码 NSData

> ID：15928784
> 
> 赞同：-1
> 
> 时间：2013-04-10T14:32:54.390
> 
> 标签：html, ios, uiwebview, nsdocumentdirectory

我正在尝试在 iPhone 的文档目录中本地保存一个 html 页面，以便在手机处于离线状态时加载该页面

我的问题是当我直接调用我的 NSData 对象以写入文件时，所有原始数据都保存在文档目录中的文件中。

但是，一旦我使用编码将我的 NSData 转换为 NSString，它就会停止在文档目录中写入文件。但是当我打印我的**内容**对象时，它会注销正确的数据。我只是希望将其保存到文件中。

```
NSURL *url = [NSURL URLWithString:@"http://anyurl"];
NSData *urlHtmlData = [NSData dataWithContentsOfURL:url];    

NSString *myString = [[NSString alloc]initWithData:urlHtmlData encoding:NSUTF8StringEncoding];

NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *fileName = [documentsDirectory stringByAppendingPathComponent:@"index.html"];
[myString writeToFile:fileName atomically:NO encoding:NSStringEncodingConversionAllowLossy error:nil]; 
```

什么可能导致内容停止写入我的文件？

或者如果有人有更好的解决方案来查看离线网页而不是将其保存到文档目录中？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:47:46.130

这可能有一些问题。一：您不使用`stringWithFormat:`附加路径组件。NSString 有一个方法：

```
NSString *fileName = [documentsDirectory stringByAppendingPathComponent:@"index.html"]; 
```

二： NSStringEncodingConversionAllowLossy 是未定义的枚举的一部分`writeToFile:`，所以通过使用它，您实际上是在指定`NSASCIIStringEncoding`而没有意识到它。在我看来，只是使用`NSUTF8StringEncoding`。

此外，`NSString *content = [[NSString alloc]initWithFormat:@"%@", myString];`除了重复 myString 之外，什么都不做。擦除那条线，然后使用`[myString writeToFile:....`

# cmake - 如何更改 cmake 中 get_filename_component 的引用路径？

> ID：15928787
> 
> 赞同：0
> 
> 时间：2013-04-10T14:33:05.323
> 
> 标签：cmake

我`get_filename_component`在 cmake 中使用来获取变量中给定的可能相对路径的绝对路径。

我想做一个out-of-tree/out-of-source-build。

在我看来，它`get_filename_component`被`CMAKE_SOURCE_DIR`用作参考路径。

有没有办法改变它或解决它？

我尝试的一种方法是为我的潜在相对路径添加前缀，`${CMAKE_BINARY_DIR}`但停止工作的路径不是相对的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T00:22:48.133

假设你的相对路径*总是*相对于`CMAKE_BINARY_DIR`，那么你可以很容易地使用[`if(IS_ABSOLUTE ...)`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3aif "CMake v2.8.10 文档")：

```
if(NOT IS_ABSOLUTE ${MyPath})
  set(MyAbsPath ${CMAKE_BINARY_DIR}/${MyPath})
endif() 
```

如果主题文件或目录在 CMake 运行时存在，那么您始终可以进行[`find_file`](http://www.cmake.org/cmake/help/v2.8.10/cmake.html#command%3afind_file "CMake v2.8.10 文档")调用，传递可能的`NAMES`和`PATHS`. 如果文件存在并被找到，则生成的变量将保存文件的完整路径。

或者您可以使用 的`if(EXISTS ...)`签名`if`来检查给定文件是否存在。

# javascript - Math.pow() 浮点数作为指数

> ID：15928791
> 
> 赞同：0
> 
> 时间：2013-04-10T14:33:13.087
> 
> 标签：javascript, floating-point, pow

我想将浮点数作为第二个参数（指数）传递给`Math.pow()`. `NaN`当传递的数字不是*整数*时，我总是会得到，比如 0、2、7，你可以命名它。javascript中是否有一种工作方式可以使这项工作？

```
(function () {
    var notice = document.getElementById('notice');
    var value = 0.0;
    var interval = 0.02;
    var timeInterval = 10;
    function interpolation(x) {
        var y = Math.pow(Math.e, x);      // <<< HERE >>>
        console.log(x, y);
        return y;
    }
    function animation() {
        var callAgain = true;
        if (value >= 1) {
            value = 1.0;
            callAgain = false;
        }
        notice.style['opacity'] = interpolation(value);
        notice.style['marginTop'] = (value * 20 + 20) + 'px';
        value += interval;
        if (callAgain) {
            setTimeout(animation, timeInterval);
        }
    }
    animation();
})(); 
```

*PS：请不要评论，大于 1 的不透明度没有任何意义。我知道这`e^x; x > 0`将产生大于`1`. 当我得到这个工作时，我会插入一个适当的功能。*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T14:35:39.620

常数是`Math.E`，不是`Math.e`

# asp.net-mvc-4 - 文档中的mvc4多个ifs.ready给出语法错误

> ID：15928796
> 
> 赞同：0
> 
> 时间：2013-04-10T14:33:21.327
> 
> 标签：asp.net-mvc-4

我正在为 document.ready 中的视图编写代码。我编写了以下条件，但代码没有执行，即使在设计时它也以绿色显示我在下面给出的错误。这是mvc4请帮忙。谢谢。

```
$(document).ready(function () {   
    @{ 
        if(ViewBag.itemName!="" || ViewBag.itemName!=null)
        {
            if(ViewBag.itemName=="PORTFOLIO")
            {
                //showing expected expression
                <text> $('#_ktPortfolio').val("@ViewBag.itemId");</text>; 
            }

            if(ViewBag.itemName=="PHASE")
            {
                //showing expected expression  
                <text> $('#_ktPhases').val("@ViewBag.itemId");</text>;
            }
        } // end of if //this is showing syntax error
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:22:25.717

这是我要更改/检查的几件事。

1.  不需要检查空字符串或空字符串。
2.  看起来你的`</text>`标签后面还有一些额外的分号。
3.  您还可以在 JavaScript 中的字符串之间`'`切换`"`。我会选择`'`并坚持（除非你不能）。我发现它有助于明确在客户端运行什么以及在服务器上运行什么。
4.  我还会确保您将其包含在客户端脚本标记中。

    ```
     $(document).ready(function () {
        @{
            if(ViewBag.itemName=="PORTFOLIO"){
                <text> $('#_ktPortfolio').val('@ViewBag.itemId');</text> //showing expected expression
            }
            if(ViewBag.itemName=="PHASE"){
               <text> $('#_ktPhases').val('@ViewBag.itemId');</text> //showing expected expression  
            }
        }
    }); 
    ```

# php - 从 MySQL 中提取 HTML，回显数据时出现奇怪的编码问题？

> ID：15928801
> 
> 赞同：1
> 
> 时间：2013-04-10T14:33:34.857
> 
> 标签：php, mysql, encoding

## 更多新信息

发现了另一个有趣的事情。在我的 find email 方法（为最终的 mysql 调用收集电子邮件地址）中，该方法如下所示：

```
protected function setAllByEmail($email) {
    $data = array( 'names' => array(), 'phones' => array(), 'emails' => array(), 'orders' => array(), 'requestIDs' => array() );
    $this->load->model('cookies/vwrequesthistory');
    $araCookies = $this->vwrequesthistory->getByEmail($email);
    if (count($araCookies) !=0) {
    // filter and run 2 more models against 2 more db's for email addys
} 
```

如果我把我的任何新代码 **或** `return $data`方法的第一行之后，我开始遇到奇怪的编码问题，但只要我不理会那个旧方法（它使用我试图摆脱的模型！）它工作得很好，没有奇怪的 ISO 编码！

## 最新更新[最终发现一个小区别！]

经过数小时的头部撞击，我开始倒退。关于如何收集这些数据的一点背景。最终结果（**包含我需要在浏览器中显示的电子邮件 HTML**）在 3 个初始查询后查询，这些查询为最终查询收集数据。我有 3 个使用 CI 调用这些初始查询的 php 方法`load->database->`方法。然后我调用最终查询。在我使用这些函数的旧方式中，每个人都接触到了该数据库的独立模型并获取了所需的内容，然后过滤了返回。在我的新方法中，每个函数都使用 CI 的 AR 直接调用 DB，然后过滤结果。两种方法都做同样的工作，只是方式不同。在我的新问题中，我发现如果我用我的旧获取电子邮件方法调用我的新 init get phone & get order# 方法，一切都很好。但是，一旦我尝试使用我的新 get EMAIL 方法，我就会得到奇怪的编码。然而，数据返回似乎与两者完全相同！

我已经运行了一些差异测试，包括分配新方法并立即返回错误数据，但仍然遇到同样的问题。我什至尝试分配新方法并使该方法完全空白，同样的问题！我尝试将新方法转移到旧方法中，同样的问题！它似乎只适用于作为草稿写得很糟糕的旧方法！

> 数据返回

```
 OLD
array(5) {
  ["names"]=>
  array(2) {
    [0]=>
    string(7) "Anon"
    [1]=>
    string(12) "Anon Anon"
  }
  ["phones"]=>
  array(1) {
    [0]=>
    string(10) "5555555555"
  }
  ["emails"]=>
  array(1) {
    [0]=>
    string(23) "Anon@gmail.com"
  }
  ["orders"]=>
  array(1) {
    [0]=>
    string(5) "987654"
  }
  ["requestIDs"]=>
  &array(0) {
  }
}

NEW
array(5) {
  ["names"]=>
  array(2) {
    [0]=>
    string(7) "Anon"
    [1]=>
    string(12) "Anon Anon"
  }
  ["phones"]=>
  array(1) {
    [0]=>
    string(10) "5555555555"
  }
  ["emails"]=>
  array(1) {
    [0]=>
    string(23) "Anon@gmail.com"
  }
  ["orders"]=>
  array(1) {
    [0]=>
    string(5) "987654"
  }
  ["requestIDs"]=>
  array(0) {
  }
} 
```

## ~~最近更新~~

*   MySQL 数据库设置为 UTF-8
*   Codeigniter 全部设置为 UTF-8
*   CI 甚至设置为将 UTF-8 编码推送到标头
*   sql 调用现在是手写的，我已经使用“SETCHAR”和“mysql_set_charset”来尝试更改结果（仍然在 php 4 上。？这里）
*   主视图在 <head> 中有 UTF-8
*   ajax 调用设置为仅使用 UTF-8
*   load的布局如下（暂时）：

    masterView->usePHPinBodyToLoadEmailListView->UseAjaxToGetDataToPopulateView

## 仍然有同样的老问题

所以我浏览了几十个答案，用谷歌搜索，并尝试了我所知道的一切，包括标题更改、访问更改、文件编码更改；一切。在一天结束时，这是我的工具列表：

Komodo 编辑 / Codeigniter / MySQL / jQuery.Ajax 方法 / Google Chrome & FireFox

**我的问题**：空间被 Â  和其他 ISO-8859-1 类型的怪异所取代

**我所观察到**的：（这里可能是问题的关键）

```
The Data is sent to jQuery.getJSON as `echo(json_encode($data));`
The HTML seemed to parse just fine to the web page in original config, 
    however the data layout was undesirable as it interfered with other pulls

The Data itself was originally arranged as follows:
    array(i) [
        0 => array(i) [
            'emailID' => 'string',
            'emailType' => 'string',
            'emailHTML' => 'string', <---- the html pulled!!!
        ],
        1 => [
            'emailID' => 'string',
            'emailType' => 'string',
            'emailHTML' => 'string', <---- the html pulled!!!
        ],
        'initData' => array(i) [ ... ]
    ]

The New Data Layout: (When the error mentioned began to occur)
    array(i) [
        'initID' => 'string',
        'initEmailAddy' => 'string',
        'initPhone' => 'string',
        'emailPull' => array(i) [
            0 => array(i) [
                'emailID' => 'string',
                'emailType' => 'string',
                'emailHTML' => 'string' <---- the html pulled!!!
            ]
            1 => array(i) [
                'emailID' => 'string',
                'emailType' => 'string',
                'emailHTML' => 'string' <---- the html pulled!!!
            ]
            2 => array(i) [ ... ]
        ]
    ] 
```

在不更改我的数据布局的情况下，是否可以解决我的问题，如果可以，为什么？

## 更新！

改回原始数据结构，仍然有新问题！现在我真的迷路了。从字面上看，我将所有内容重置为0。新文件夹、新文件、在文本编辑器中复制和粘贴的代码一直在关注我的编码。一切都设置为 UTF-8，包括数据库，但我仍然得到相同的 ISO 结果！？HTML 包含了`<meta>`标签，CI 有字符集，修改了标题库以强制 UTF-8 到标题。好像我已经完成了所有可以想象的事情，两天前一切正常！老实说，我现在真的找不到问题。

在 HTML 页面上使用 PHP 提取数据时，它显示得很好。当通过控制器加载时，页面上有 PHP，工作得很好，当通过 AJAX 加载到母版页时，它突然中断。我已经在我的通话中设置了编码，仍然没有。还尝试通过 PHP 而不是 ajax 加载它，但仍然损坏。但是 2 天前，在相同的布局中（控制器-> 母版页-> 加载内容）它工作得很好。从那时起，我唯一改变**的是我安排发送到`getJSON`呼叫的数据的方式。**

# ruby - 在 Ruby 中扫描字符串数组以进行匹配

> ID：15928811
> 
> 赞同：7
> 
> 时间：2013-04-10T14:33:51.423
> 
> 标签：ruby, ruby-on-rails-3.2

我有一个数组：

```
a = ["http://design.example.com", "http://www.domcx.com", "http://subr.com"] 
```

然后如果该数组中的一个元素与字符串匹配，我想返回 true：

```
s = "example.com" 
```

我尝试使用`include?`and `any?`。

```
a.include? s
a.any?{|w| s=~ /#{w}/} 
```

我不知道如何在这里使用它。有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T14:48:56.547

你可以`any?`像这样使用：

```
[
  "http://design.example.com",
  "http://www.domcx.com",
  "http://subr.com"
].any?{ |s| s['example.com'] } 
```

替换你的变量名：

```
a = [
  "http://design.example.com",
  "http://www.domcx.com",
  "http://subr.com"
]
s = "example.com"
a.any?{ |i| i[s] } 
```

您也可以通过其他几种方式来执行此操作，但使用的优点`any?`是一旦您受到打击就会停止，因此如果该打击出现在列表的早期，它会快得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:48:36.687

下面的情况如何：

```
a=["http://design.example.com", "http://www.domcx.com", "http://subr.com"]
s= "sus"
p a.any? { |w| w.include? s } #=> false

a=["http://design.example.com", "http://www.domcx.com", "http://subr.com"]
s= "design.example"
p a.any? { |w| w.include? s } #=>true

a=["http://design.example.com", "http://www.domcx.com", "http://subr.com"]
s= "desingn.example"
p a.any? { |w| w.include? s } #=>false

a=["http://design.example.com", "http://www.domcx.com", "http://subr.com"]
s= "example"
p a.any? { |w| w.include? s } #=>true

a=["http://design.example.com", "http://www.domcx.com", "http://subr.com"]
s= "example.com"
p a.any? { |w| w.include? s } #=>true 
```

# c# - 尽管控制器存在，但 Web API 未找到控制器

> ID：15928814
> 
> 赞同：5
> 
> 时间：2013-04-10T14:33:53.720
> 
> 标签：c#, routing, controller, asp.net-web-api, self-hosting

我用两个项目创建了一个解决方案：一个是带有 Self Host Web API 的类库（在[http://www.asp.net/web-api/overview/hosting-aspnet-web-api/self的帮助下创建-host-a-web-api](http://www.asp.net/web-api/overview/hosting-aspnet-web-api/self-host-a-web-api) )，第二个是使用 TopShelf 创建的 windows 服务。此解决方案的目的是使用 Web API 获得有关服务的状态报告。

一切正常，但是当我在目标解决方案中重新创建我的解决方案时，整个应用程序无法正常工作。Windows 服务似乎正在运行，但是当我键入 localhost:8080/Test 时，它应该可以查看（并且它在开头提到的单独测试解决方案中确实如此）它会引发错误（以 xml 形式查看）：

```
Message: No HTTP resource was found that matches the request URI 'http://localhost:8080/Test'.
MessageDetail: No type was found that matches the controller named 'Report'. 
```

项目中有一个 ReportController（继承自 ApiController），其中包含 SelfHost 但不知何故它是“可见的”。我猜测了一下（我相信这是一个愚蠢的猜测）并将其移至 Windows 服务项目，但它也无法正常工作。

有人可以告诉我我面临的问题是什么吗？如果它有一个简单的解决方案，为什么它看不到控制器？

**编辑：** 我的路由如下所示：

```
var config = new HttpSelfHostConfiguration(String.Format("http://localhost:{0}", port));
config.Routes.MapHttpRoute("API Default", "{action}", new { controller = defaultControllerName }); 
```

在哪里

```
defaultControllerName = "Report"; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-11T09:36:49.003

我很惭愧地承认这一点，但它不起作用的原因在于控制器类没有访问修饰符。将其公开修复了该错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-02-26T20:17:51.843

类和方法必须是公共的

```
public class PrintController: ApiController
{
    //[HttpGet, Route("api/Print/Getp")]
    public string Get()
    {

        var ob = new List<string>();
        foreach (var item in File.ReadLines(@"c:\PrintService\pr.txt"))
        {
            string i = item;
            ob.Add(i);
        }
        var json1 = JsonConvert.SerializeObject(ob);

        return "ok";
    }
} 
```

我的路线配置是这样的：

```
 _config.Routes.MapHttpRoute("DefaultHttpRoute", "api/{controller}"); 
```

# c# - 在 MVC 模型中，如何在不同的表中查找字段？

> ID：15928817
> 
> 赞同：2
> 
> 时间：2013-04-10T14:34:01.573
> 
> 标签：c#, entity-framework

所以我有一个模型：

```
[Table("Site")]
public class Store : MPropertyAsStringSettable {
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int ID { get; set; }
    public string Name { get; set; }
    public int CompanyID { get; set; }
    public bool IsActive { get; set; }
    public string Address { get; set; }
    public string City { get; set; }
    [Display(Name = "Province")]
    public int ProvinceID { get; set; }
    public string Postal { get; set; }
    public string Phone { get; set; }
    public int StoreNumber { get; set; }
    public bool visible { get; set; }
    public DateTime lastShift { get; set; }
} 
```

lastShift 字段来自另一个名为“Shifts”的表，我如何从该表中获取它？

编辑：查找必须是这样的：

```
 select top 1 shiftDate as lastShift from [Shifts] where SiteID = Store.ID 
```

这就是我加载数据的方式：

```
public class MyDbContext: DbContext {
    public MyDbContext()
        : base("name=DefaultConnection") {
    }
    public DbSet<UserAccount> UserAccounts { get; set; }
    public DbSet<Company> Companies { get; set; }
    public DbSet<Store> Stores { get; set; }
    public DbSet<ProvinceModel> Provinces { get; set; }
} 
```

这就是我使用它的方式：

```
MyDbContext database = new MyDbContext();
var myStores = from database.Stores select ID; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T16:09:50.917

这是我解决问题的方法。

TL，DR：我在我的控制器中共享了我的 dbcontext，所以我可以在我的模型中访问它！

* * *

我使用以下代码在我的商店模型中手动加载 lastShiftTime：

```
public class Store : MPropertyAsStringSettable {
    .......
    public DateTime lastShiftTime { 
        get{
            MyDbContext curContext = MyWebProject.Controllers.MyBaseController.database;
            if (curContext != null) {
                return (from shift in curContext.Shifts where shift.SiteID == ID select shift.ShiftDate).First();
            } else {
                return new DateTime(0);
            }
        }
    }
} 
```

这是我为此创建的 Shift 模型，非常标准：

```
[Table("Shifts")]
public class Shift : MPropertyAsStringSettable {
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int ID { get; set; }
    public int SiteID { get; set; }
    public string ShiftID_In_POS { get; set; }
    public DateTime ShiftDate { get; set; }
} 
```

这是我在控制器中共享上下文的方式：

```
public class MyBaseController : Controller {
    .........
    private static MyDbContext _database;
    public static MyDbContext database {
        get {
            if (_database == null) {
                _database = new MyDbContext();
            }
            return _database;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:38:17.083

根据您上次的编辑进行编辑，情况并非如此

~~它需要是“导航属性”，这意味着您需要在站点和船舶之间建立明确的（外键）关系~~

然后你会有这样的东西

```
Store.Shift.LastShift 
```

 ~~但如果它是一对多关系（并且 LastShift 字段不是 Shift 表的一部分），那么

您需要手动执行此操作，并使用未直接映射到表的视图模型或自定义属性，并在代码中的某处进行分配

如果您使用的是存储库，那么您需要在其中添加一个方法来获取最后一个班次

然后（或者如果您直接使用 ORM）您使用@Cristi 发布的代码，只需记住添加排序

```
public ActionResult MyAction(){
var store = db.Stores.Where(x => x.ID == objId).Select(x => new StoreModel(){
    Name = x.Name,
    ID = x.ID,
    lastShift = db.Shifts.FirstOrDefault(y => y.SiteID == x.ID).OrderByDescending(shift => shift.Date);
}).FirstOrDefault();

return View(store);
} 
```~~

# javascript - 强制在 Javascript 中为 UpdatePanel 回发？

> ID：15928822
> 
> 赞同：1
> 
> 时间：2013-04-10T14:34:31.750
> 
> 标签：javascript, asp.net, ajax, updatepanel

我有一个关闭模式的功能：

```
function closeModal(name) {
    $(name).modal('hide');
} 
```

但是，我的页面也有一个更新面板，我需要触发它。

我试过`__doPostBack('UpdatePanel1', '')`没有运气。

谢谢

问题是这样的：

```
$(document).ready(function () {
    createAutoClosingAlert('.success_alert', 6000);
    if(<%# IsAPostBack() %>){
        if(window.parent != null){
            window.parent.closeEditModal();
            window.parent.closeCalendarModal();
            window.parent.closeModal('#projectModal');
            window.parent.closeModal('#scheduleModal');
        }
    }
}); 
```

我从父母那里调用它，所以我无法获得隐藏的 ID。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T14:38:11.903

一种选择是在更新面板中放置一个隐藏按钮

```
<div style="display:none">
  <asp:Button ID="Button2" runat="server" Text="Button" />
</div> 
```

然后在您的脚本中调用以下内容

```
document.getElementById('<%=Button2.ClientID%>').click(); 
```

按钮单击将导致回发。

您还可以查看[Page.GetPostBackEventReference](http://msdn.microsoft.com/en-us/library/system.web.ui.page.getpostbackeventreference%28v=vs.71%29.aspx)

# amazon-web-services - 在代理后面使用 AWS::ElasticLoadBalancing::LoadBalancer

> ID：15928823
> 
> 赞同：0
> 
> 时间：2013-04-10T14:34:36.770
> 
> 标签：amazon-web-services, load-balancing, openstack, heat

我们目前正在通过结合使用 Heat 和 Openstack 来建立私有云。但是我们在使用 Heat 设置负载均衡器时遇到了**“AWS::ElasticLoadBalancing::LoadBalancer”-Resource**，因为此 Resource-Type 没有 User-Data 并且似乎使用**F17-x86_64-cfntools -Image**默认情况下（可以我改变它？）。由于我们在代理后面，并且 cfn-init 在引导映像时开始尝试通过 yum（如 haproxy）安装一些包，我们需要在 cfn-init 启动之前设置代理。这个问题有什么解决方案（除了修补上面的图像，同时保持其名称不变）？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-21T04:27:14.433

这个问题在这里得到了回答：[https](https://answers.launchpad.net/heat/+question/237480) : //answers.launchpad.net/heat/+question/237480（不，你不能改变它，但你可以尝试使用量子 LBaaS）对于跟随的人来说，当前我刚刚查看的 Heat 源代码版本要求存在 F20-x86_64-cfntools 工具图像。

# wcf - 已移除卡的证书可以使用多长时间？

> ID：15928824
> 
> 赞同：0
> 
> 时间：2013-04-10T14:34:39.727
> 
> 标签：wcf, security, certificate, smartcard

将卡安装在读卡器中时，将在个人存储中安装证书，然后我的 WCF 客户端服务器应用程序使用此证书进行通信。

如果我删除卡，证书也将从商店中删除。如果我正在开始的会话中，我不会得到任何异常，它会继续工作，就像卡仍在读卡器中一样？这是设计使然吗？这是否意味着只要我不再尝试从商店读取证书，通信就可以正常工作？

此致

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T16:55:52.020

看看这些页面：

[http://technet.microsoft.com/en-us/library/ff404287(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/ff404287(v=ws.10).aspx)

[http://technet.microsoft.com/en-us/library/ff404288(v=ws.10).aspx](http://technet.microsoft.com/en-us/library/ff404288(v=ws.10).aspx)

最重要的是，请记住，通常只需要智能卡来启动/打开会话

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T07:30:56.957

证书是公钥和身份之间确认的对应关系。当卡片被移除时，没有迫切需要删除证书，因为这个公钥对于验证该发件人的签名消息可能仍然有用。X.509 证书也有解决删除主题的到期日期，类似的撤销列表。因此，尽管只要卡就位，就可以使用私钥（取决于配置），但公钥可能远远超过此值。

# c# - C# listview count >0 但没有项目这怎么可能？

> ID：15928825
> 
> 赞同：1
> 
> 时间：2013-04-10T14:34:45.590
> 
> 标签：c#, listview, runtime-error, listviewitem

再次被这个 listview 对象迷惑了。当我尝试从 Windows 表单中的列表视图中检索选定的列表视图项时，我的代码会出现“下标越界”错误。使用 VS add watch 命令，我看到以下内容当我查看 listview 对象的手表时，我看到以下内容

```
this.SearchResults  {System.Windows.Forms.ListView, Items.Count: 52, Items[0]: ListViewItem: {0}}   System.Windows.Forms.ListView 
```

所以我看到 52 的计数是正确的，当程序运行时，我可以从集合中选择一行。例如，假设我从集合中挑选了第 5 个项目。手表将返回以下内容

```
this.SearchResults.SelectedIndices[0]   5   int 
```

因此，对于索引，我只想将 listviewitem 传递给另一个对象以进行进一步处理。当我尝试这个时，我得到一个运行时错误

```
An unhandled exception of type 'System.ArgumentOutOfRangeException' occurred in System.Windows.Forms.dll

Additional information: InvalidArgument=Value of '5' is not valid for 'index'. 
```

这怎么可能？我有 52 个项目，代码的行为好像列表视图是空的。我曾尝试对索引进行硬编码，但这也不起作用。

我的此表单的构造函数代码列表视图如下

```
public ResultsDisplay(List<MATS_Doc> foundDocs)
    {
        InitializeComponent();

        this.CenterToScreen();
        this.SearchResults.Columns.Add("Title");
        this.SearchResults.Columns.Add("Stuff");
        foreach (MATS_Doc doc in foundDocs)
        {
            // retrieve coresponding document
            // create new ListViewItem
            ListViewItem searchResults = new ListViewItem(doc.Id.ToString());
            searchResults.SubItems.Add(doc.Title);
            searchResults.SubItems.Add(doc.Stuff);
            // add the listviewitem to a new row of the ListView control
            this.SearchResults.Items.Add(searchResults); //show Text1 in column1, Text2 in col2
        }
        foreach (ColumnHeader column in this.SearchResults.Columns)
        {
            column.Width = -2;
        }
        this.Show();
    } 
```

***更新***

下面是引发异常的代码。列表视图的形式相同

```
 if (scoredListing == null)
        {
            DocumentView showdoc = new DocumentView(this.SearchResults.SelectedItems[this.SearchResults.SelectedIndices[0]]);
            showdoc.ShowDialog();
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:38:51.070

```
this.SearchResults.SelectedIndices[0] 
```

每次没有选择时都会抛出，因为`SelectedIndices`它是空的，所以没有第一个元素。的价值是`this.SearchResults.SelectedIndices.Count`多少？您的索引必须介于 0 和该值 - 1 之间。

编辑：好的，在[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.listviewitem.selected%28VS.85%29.aspx)中找到了这个：

> 当心从未显示的列表
> 
> 如果您的 ListView 从未被绘制过（例如，它在 TabControl 中，在尚未被选中的选项卡中），则 Selected 属性不能被信任。在这种情况下，父 ListView 的 SelectedItems 和 SelectedIndices 未正确更新，仍将为空。

EDIT2：这很有趣但不相关。正如@nolonar 所指出的，`SelectedIndices`包含引用所有项目的索引，而不是选定的项目，因此值 5 不是指第五个选择项目（因为可能只有一个），而是总体上的第五个项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T14:57:48.907

问题在于：

```
this.SearchResults.SelectedItems[this.SearchResults.SelectedIndices[0]] 
```

应该是这样的：

```
this.SearchResults.Items[this.SearchResults.SelectedIndices[0]] 
```

如果您只选择了 1 个项目，`SelectedItems`将只保留 1 个元素，并且如果您尝试访问除`0`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T14:40:34.600

你可能需要使用

```
this.SearchResults.Items[4] 
```

选择第 5 项。

当您使用`SelectedItems`列表时，它只返回选定的项目。在选定的项目集合中，当您调用它时，第 5 项可能不存在。因为可能没有任何选择，或者只能选择一项。

# linux - 如何按包含括号的名称查找文件？

> ID：15928827
> 
> 赞同：0
> 
> 时间：2013-04-10T14:34:55.793
> 
> 标签：linux, shell, find

我有这样的文件：

`level(basic)-[done]1.txt`
`level(basic)-[done]1.pdf`
`level(basic)-[done]1.doc`

我需要按名称找到所有这些。

`find * -type f -name 'level(basic)-[done]1.*'`

该命令不起作用。我怎样才能转义元字符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:38:23.493

那这个呢？

```
find * -type f -name 'level(basic)-\[done\]1.*' 
```

也就是说，`[`用`\[`. `(`不需要转义，至少在我的 Ubuntu 12 上是这样。

# java - 在 AppEngine DevServer 中删除使用的 Blob

> ID：15928828
> 
> 赞同：0
> 
> 时间：2013-04-10T14:34:57.900
> 
> 标签：java, google-app-engine, blobstore

我正在使用 GAE BlobStore 来存储用户配置文件的头像。用户可以选择上传头像，如果他们在已经有头像的情况下上传头像，则旧的头像 blob 将被删除并替换为新的 blob。这在生产中的 GAE 上按预期工作。

在 DevServer（在 Windows 7 上）上的 GAE 本地测试中，旧的 blob 没有被删除，并且引发了安全异常。这似乎是因为旧 blob 当前正在被 DevServer 使用，因为它被用作当前用户配置文件的化身。当我尝试从 Windows 文件资源管理器中的 appengine 生成的文件中手动删除 blob 时，我收到一条消息，指出我不能这样做，因为该文件当前正在使用中。如果我尝试删除当前未用作可正常工作的头像的 blob。

有没有办法让 DevServer 放弃它对 blob 的保留以便可以删除它？它在生产中运行良好，所以这不是什么大不了的事，但它会使测试更容易一些。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:13:40.870

[App Engine bugtracker](https://code.google.com/p/googleappengine/issues/detail?id=4744)上有一个关于此问题的待处理问题。

修复的进展似乎很*慢*..

# java - 为什么 java 客户端不信任根证书，即使它已经在 cacerts 密钥库中

> ID：15928829
> 
> 赞同：-1
> 
> 时间：2013-04-10T14:35:01.570
> 
> 标签：java, ssl, certificate, keystore

在我的 java 项目中调用 Web 服务时遇到问题。Web 服务客户端在 WebSphere 7 中部署的 java ee 应用程序中运行。SSL 证书链具有 Go Daddy 2 类证书颁发机构的根证书。我确实在 WebsPhere JVM 文件夹下的 cacerts 文件中看到它，但我不断收到不受信任的证书错误：

```
java.security.cert.CertPathValidatorException: The certificate issued by OU=Go Daddy Class 2 Certification Authority, O="The Go Daddy Group, Inc.", C=US is not trusted; internal cause is: 
java.security.cert.CertPathValidatorException: Certificate chaining error 
```

无法弄清楚为什么会出现此错误，以及如何解决此问题。请帮我。

1.  Web 服务在服务器 A 中运行，客户端在我的机器上运行时运行良好，我机器上的 cacerts 包含该根证书。
2.  当客户端与 Web 应用程序一起部署到服务器 A 上时，它不起作用。我们检查了 cacerts 文件，它确实包含 go daddy 根证书。
3.  当客户端和 Web 服务部署到使用 VeriSign 证书链运行的其他一些环境中时，它也可以正常工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T23:31:40.953

在我看来，CA 根公钥应该添加到您的信任存储中，因为您将服务器用作 Web 服务客户端而不是 Web 服务服务器。

在您的管理控制台上，您应该拥有：

```
Security->SSL certificate and key management->Key stores and certificates-> NodeDefaultTrustStore-> Signer certificates 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T22:50:21.287

> 链接错误

您没有正确导入链，或者它有问题。我使用 GoDaddy 证书并且没有出现链接错误，因此更可能是前者。

# c# - 从位于同一项目中的 XML 文件获取配置值

> ID：15928831
> 
> 赞同：0
> 
> 时间：2013-04-10T14:35:05.430
> 
> 标签：c#, xml

我正在制作一个小程序来将图片从一个位置复制到另一个位置。图片的信息存储在数据库中，因此我需要连接字符串，并且我创建了一个包含操作最终输出的 txt 文件，我想将这两个值存储在一个`App.Config.xml`文件中。

我的项目结构非常简单：

![项目树](https://i.stack.imgur.com/QZhoE.png)

XML文件本身是：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <connectionStrings>
    <add name="MyDB" connectionString="Data Source=.\\DVSQLEXPRESS08;Initial Catalog=**;Persist Security Info=True;User ID=**;Password=**;MultipleActiveResultSets=True" />
  </connectionStrings>
  <createResultFile>
    <add key="ResultFile" value="C:\Users\dv\Desktop\Leron\PictureStatus.txt"/>
  </createResultFile>
</configuration> 
```

我想在我`connectionString`的. 这是我第一次使用 XML 文件和 C#（一般是 .NET），所以我想要检索这些配置值的方法是什么？`<createResultFile>``PictureTransferTool.cs`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:46:58.080

您的配置文件必须如下所示...

**配置文件：**

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
  <appSettings>
    <add key="ResultFile" value="C:\Users\dv\Desktop\Leron\PictureStatus.txt"/>
  </appSettings>
  <connectionStrings>
    <add name="MyDB" connectionString="Data Source=.\\DVSQLEXPRESS08;Initial Catalog=**;Persist Security Info=True;User ID=**;Password=**;MultipleActiveResultSets=True" />
  </connectionStrings>
</configuration> 
```

**C＃ ：**

您可以阅读如下所示的连接字符串

```
var connectionString = System.Configuration.ConfigurationManager.ConnectionStrings["MyDB"].ConnectionString;
Console.WriteLine(connectionString); 
```

您可以阅读用户定义的设置，如下所示

```
var Resultfile = System.Configuration.ConfigurationManager.AppSettings["ResultFile"];
Console.WriteLine(Resultfile); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:39:52.690

我通常在 app.config 中执行用户定义参数的方式是将它们放在`appSettings`选项卡中。

```
<appSettings>
 <add key="myStr" value="String Value" /> 
```

然后你可以访问它

```
string myStr = System.Configuration.ConfigurationSettings.AppSettings["myStr"]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:43:09.950

这个对我有用。

```
Linq;
using System.Xml.XPath;
...
var doc = XDocument.Load("test.xml");// You should put the way to your XML
var name = doc.XPathSelectElements("/configuration/connectionStrings/add").Value;
var name = doc.XPathSelectElements("/configuration/createResultFile/add").Value; 
```

# mysql - 多个左连接影响了我的 SUM(TIMESTAMPDIFF 计算

> ID：15928836
> 
> 赞同：0
> 
> 时间：2013-04-10T14:35:17.023
> 
> 标签：mysql, sql, left-join

我目前正在尝试为上周我的 PHPBB3 论坛上的一些人预订的总时间创建一个报告。最初，我有以下查询按预期工作：

```
SELECT forum_users.username, SUM(TIMESTAMPDIFF(SECOND, schedule_slots.time_starting, schedule_slots.time_finishing)) AS seconds 
FROM forum_users 
LEFT JOIN schedule_slots 
    ON forum_users.user_id = schedule_slots.user_id 
    AND schedule_slots.time_starting >= (CURDATE() - INTERVAL 1 WEEK) 
    AND schedule_slots.is_del = 0 
    AND schedule_slots.channel = 0
WHERE (forum_users.group_id = 8 OR forum_users.group_id = 5 OR forum_users.group_id = 14) 
GROUP BY forum_users.username 
ORDER BY upper(forum_users.username) 
```

但是，当我去加入另一个表时，时间戳差异最终被错误地计算（它更高），这是我较新的非工作语句：

```
SELECT forum_users.username, SUM(TIMESTAMPDIFF(SECOND, schedule_slots.time_starting, schedule_slots.time_finishing)) AS seconds, group_concat(DISTINCT forum_user_group.group_id) AS user_groups 
FROM forum_users 
LEFT JOIN schedule_slots 
    ON forum_users.user_id = schedule_slots.user_id 
    AND schedule_slots.time_starting >= (CURDATE() - INTERVAL 1 WEEK) 
    AND schedule_slots.is_del = 0 
    AND schedule_slots.channel = 0 
LEFT JOIN forum_user_group 
    ON forum_user_group.user_id = forum_users.user_id 
WHERE (forum_users.group_id = 8 OR forum_users.group_id = 5 OR forum_users.group_id = 14 OR forum_users.group_id = 12) 
GROUP BY forum_users.username 
ORDER BY upper(forum_users.username) 
```

我在这个上画了一个空白，非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:20:26.773

时间戳差异是正确计算的，但是您将其乘以用户所在的组数。

我会尝试：

```
SELECT forum_users.username, SUM(TIMESTAMPDIFF(SECOND, schedule_slots.time_starting, schedule_slots.time_finishing)) AS seconds, 
(select group_concat(DISTINCT group_id) from forum_user_group WHERE forum_user_group.user_id = forum_users.user_id) AS user_groups 
FROM forum_users 
LEFT JOIN schedule_slots 
ON forum_users.user_id = schedule_slots.user_id 
AND schedule_slots.time_starting >= (CURDATE() - INTERVAL 1 WEEK) 
AND schedule_slots.is_del = 0 
AND schedule_slots.channel = 0 
WHERE (forum_users.group_id = 8 OR forum_users.group_id = 5 OR forum_users.group_id = 14 OR forum_users.group_id = 12) 
GROUP BY forum_users.username, user_groups 
ORDER BY upper(forum_users.username) 
```

# r - 将 for 循环的结果存储在对象或矩阵中

> ID：15928840
> 
> 赞同：3
> 
> 时间：2013-04-10T14:35:21.750
> 
> 标签：r, for-loop

我有以下问题：

我使用 R 中的 for 循环从矩阵中获取特定数据。我的代码如下。

```
for(i in 1:100){
   T <- as.Date(as.mondate (STARTLISTING)+i)
   DELIST <- (subset(datensatz_Start_End.frame, TIME <= T))[,1]

   write.table(DELIST, file = paste("tab", i, ".csv"), sep="," )
   print(DELIST)
} 
```

使用`print`，R 提供数据。使用`write.table`，R 将数据传送到不同的文件中。

我的目标是在**一个矩阵**中聚合来自 for 循环的结果。（'i'的每一行）

但不幸的是我做不到。

* * *

抱歉，我是 R 中的真正菜鸟。

```
for(i in 1:100)
{
T <- as.Date(as.mondate (STARTLISTING)+i)
DELIST <- (subset(datensatz_Start_End.frame, TIME <= T))[,1]
assign(paste('b',i,sep=''),DELIST) 
```

## }

这提供了 100 个对象，其中包含我的结果。但我需要的是**一个** 包含 100 列或**一个**列表的*矩阵/数据框。*

 **有任何想法吗？

* * *

嘿！

因此，我不允许编辑自己的答案，这里我的（简单）解决方案如下：

```
DELIST <- vector("list",100)
for(i in 1:100)

{
T <- as.Date(as.mondate (STARTLISTING)+i)
DELIST[[i]] <- as.character((subset(datensatz_Start_End.frame, TIME <= T))[,1])
}

DELIST[[99]]  ## it is possible to requist the relevant companies for every 'i' 
```

谢谢大家！

乔治

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-11T03:28:36.787

如果你想要一个列表，你可以使用`lapply`而不是循环

```
LL <- lapply(1:100, 
       function(i) {
         T <- as.Date(as.mondate (STARTLISTING)+i)
         DELIST <- (subset(datensatz_Start_End.frame, TIME <= T))[,1]
         assign(paste('b',i,sep=''),DELIST) 
         }
       ) 
```

之后，您可以`rbind`一起使用结果`do.call`

```
result <- do.call(rbind, LL) 
```

或者，如果您确信 LL 的所有元素的列都将是相同的，那么您可以使用更高效`rbindlist`的包`data.table`

```
result <- rbindlist(LL) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:40:08.123

签出`rbind`功能。您可以从空开始`DELIST.DF`并在循环内将每一行附加到它 -

```
DELIST.DF <- NULL
for(i in 1:100){
   T <- as.Date(as.mondate (STARTLISTING)+i)
   DELIST <- (subset(datensatz_Start_End.frame, TIME <= T))[,1]

   DELIST.DF <- rbind(DELIST.DF, DELIST)

   write.table(DELIST, file = paste("tab", i, ".csv"), sep="," )
   print(DELIST)
} 
```**

# objective-c - 如何在目标 c 中混淆静态密码？

> ID：15928843
> 
> 赞同：2
> 
> 时间：2013-04-10T14:35:27.687
> 
> 标签：objective-c, security, passwords

我需要隐藏密码才能连接服务器。问题是密码是由服务提供商提供的，所以它是静态的。

我已经考虑过使用钥匙串，但问题是即使我使用它，我也需要对密码进行硬编码以将其插入到代码中某处的钥匙串中。

那么，有没有办法隐藏我的应用程序可用的静态密码，避免在我的代码中编写它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:56:35.387

我会考虑在您的应用程序用户和服务提供商之间设置一个中间层服务器 - 一种代理。它将允许您：

*   为每个用户设置不同的密码
*   可选择让用户有机会更改密码
*   更好地控制谁使用服务以及传输什么数据
*   更加独立于您的服务提供商（例如随时更改）

这将需要更多的努力，但从长远来看可能更有利。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T15:07:07.700

这不是一个可解决的问题，并且已经围绕 SO 进行了详细讨论。对于一个包含指向其他几个链接的“中心”问题，请参阅[Secure https encryption for iPhone app to pages](https://stackoverflow.com/questions/9181186/secure-https-encryption-for-iphone-app-to-webpage)。

使用默默无闻并不是一件可怕的事情。但保持简单。用一些随机键对值进行异或。完毕。放置越来越多的层不会给您带来任何好处，并且会花费您的复杂性（这意味着时间和错误，它们是利润和安全性的敌人）。如果有人在您的代码上放置了调试器，他们只会记录您发送到服务器的所有数据，因此您跳过所有隐藏您如何计算密码的箍都无关紧要，因为最终您必须发送它到服务器。因此，请保持简单，以阻止人们仅使用“字符串”将其拉出，并认识到您无法停止调试器。

保护服务提供商密钥的唯一方法是将该密钥放在*您的*服务器上，然后在验证用户身份后代理服务。如果你把它放在代码中，那么它是可发现的，句号。如果这是一个可以解决的问题，那么就不会有未经许可的软件副本、未经许可的音乐副本、iPhone 越狱等。如果 Apple 在控制从硬件到系统的每一部分时无法停止逆向工程操作系统，你不会在应用程序中修复它。

您应该考虑的是在密钥丢失时如何恢复。你怎么发现它发生了？您如何使该密钥过期并创建一个新密钥？如果您在代码中传送密钥，您必须假设它最终会被发现，并且您应该有一个处理它的计划。

作为旁注，我过去使用的一种技术是按需从我们的服务器下载密钥，而不是在应用程序的任何地方对其进行编码。我们使用经过身份验证的 HTTPS 并检查我们的证书。当然，仍然有可能欺骗这个系统（总是有可能欺骗一个系统，它向客户提供他们只应该使用某种方式的信息），但我们的想法是至少我们可以通过这种方式更轻松地更改密钥如果钥匙泄漏，可以暂时阻止潮流。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:51:11.500

这是钥匙和盒子的问题，你可以每次都把你的钥匙放在一个新的盒子里，然后把这个钥匙藏在一个新的盒子里，你可以继续这样做....但最后你总是有最后一把钥匙...而且无处可藏。

就我个人而言，我会混淆钥匙串的钥匙，并将真正的钥匙隐藏在钥匙串中。如果它是一个非常重要的秘密，您可以使用 AES 来加密您的密钥，但是您再次使用您的加密密钥，在这里您可以使用特定于设备的东西而不是硬编码值，并从该属性中生成您的密钥。

肯定不是完美的，但在大多数情况下都能胜任。

# java - 多边形内的测试点

> ID：15928851
> 
> 赞同：1
> 
> 时间：2013-04-10T14:35:44.340
> 
> 标签：java, android, polygon

我正在尝试测试一个点是否在多边形内，并查看 SO。我找到了一些可以做到的代码，但我试过了，但我不知道我做错了什么......

我到 Vectors 来保存 x 和 y 点：

```
Vector<Double> vxpoints;
Vector<Double> vxpoints; 
```

这就是我的方法“包含”

```
public boolean contains(double x, double y) {       
    int i,j = this.npoints - 1;  
    boolean oddNodes = false;  

    for(i=0;i<this.npoints;j=i++) {
        if ((((this.vypoints.get(i) <= y) && (y < this.vypoints.get(j))) ||
                ((this.vypoints.get(j) <= y) && (y < this.vypoints.get(i)))) &&
                (x < (this.vxpoints.get(j) - this.vxpoints.get(i)) * (y - this.vypoints.get(i)) / (this.vypoints.get(j) - this.vypoints.get(i)) + this.vxpoints.get(i)))
            oddNodes = !oddNodes;
    }   
    return oddNodes; 
```

当我测试它时，我使用“简单的多边形”：（有数组 os 点，我在我的类中转换为向量）

```
 double xpoints[] = {100,100,200,200}; //Square      
    double ypoints[] = {100,200,100,200};
    PolygonDouble test = new PolygonDouble(xpoints, ypoints);

    //System.out.println(test.getNumberOfCoordinates());
    if(test.contains(110,110))
        System.out.println("Inside");
    else
        System.out.println("Outside"); 
```

输出：--> 外部，但如果我尝试使用点 (110,111) 输出--> 内部。

我不知道发生了什么事.....：S

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:39:48.840

问题在于测试中使用的正方形的定义。顶点的顺序错误。更改第三个和第四个顶点的顺序，测试应该可以工作。

```
double xpoints[] = {100,100,200,200}; //Square      
double ypoints[] = {100,200,200,100}; 
```

# delphi - Delphi 7：通过 VFI 的抽象类

> ID：15928852
> 
> 赞同：2
> 
> 时间：2013-04-10T14:35:51.060
> 
> 标签：delphi, inheritance, delphi-7

是否可以在 Delphi 7 中创建一个可以通过 Visual Form Inheritance 技术继承的抽象类？如果是这样，请提供一个例子。

任务是这样的。我想创建一个表单，作为其他两个表单的基本表单，这些表单将继承该表单的所有属性。这两个继承表单将用于向数据库添加新内容（例如，创建产品项）和编辑该内容。所以，我猜应该将基本表单视为一个抽象类，它应该有好的和取消按钮以及所有继承类将共享的东西。好吧，它显然是一个抽象类，因为除了作为其他表单的基础之外，没有其他用途。

这是一个简单的图表，可以更清楚地说明这一点：

![在此处输入图像描述](https://i.stack.imgur.com/f5OIb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T17:24:30.500

您使用了*abstract*一词，但阅读您的问题，我严重怀疑您是否真的按照 Delphi 中定义的方式来表示*它*。我认为您的意思是一般简单的*抽象*术语：您想要设计一个包含必须由后代更改或添加的部分的表单。Delphi 中的*抽象方法意味着没有实现的类例程。*但这并不重要，因为完全有可能设计一个基本形式，有或没有抽象方法。

您可以创建如下图/图表中所示的设置：

*   设计一个`TBaseForm`包含 2 个编辑、2 个标签、2 个按钮和 1 个动作列表的表单，
*   向 ActionList 添加 3 个操作：创建、保存和取消，
*   提前将 Cancel 动作分配给 CancelButton.Action，
*   保存表格，
*   使用菜单命令设计一个继承自 TBaseForm 的新表单：File > New > Other > [Project Name] > BaseForm
*   您将拥有一个包含编辑、标签、按钮和操作的新表单，
*   将 Save 操作分配给另一个按钮的 action 属性，
*   给它一个“编辑项目”标题，
*   保存表单，并为“创建新项目”表单重复此操作。

如果您愿意，基本形式可能具有抽象方法。当你在运行时创建一个 TBaseForm 实例时，编译器会给出一个警告*，它正在构建包含抽象方法 'TBaseForm.MethodName' 的 'TBaseForm' 实例*。它仍然是一个警告，直到您在运行时调用将产生*抽象错误*的方法。创建一个实现该方法的后代表单，则不会有警告。在设计器中使用抽象方法创建表单不会产生警告。但是，运行时错误仍然可能发生。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-10T17:47:04.133

不，您不能在 Delphi Visual Form Inheritance 中创建严格的 Delphi 单词“abstract”意义的“abstract”基本表单。

但是，根据您的描述，听起来您实际上并不需要严格抽象的基本形式。您根本没有提到定义抽象方法的要求。

听起来您只需要一个基本表单，您可以从中创建多个不同专业的后代，这些后代可以与基本表单共享 UI 和实现。

这就是 VFI 的用途，所以是的，您可以这样做。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-10T16:52:17.000

首先我们需要定义抽象类的含义。在我看来，有两个相互竞争的定义：

1.  抽象类是不能被实例化的。这是最常用的定义。
2.  抽象类是包含多个抽象方法的类。

由于 Delphi 没有执行定义 1 的语言机制，因此定义 2 似乎是适用于该问题的定义。

这个问题的答案是包含抽象方法的类可以与可视表单继承一起使用。

现代版本的 Delphi 允许您使用`abstract`关键字装饰类。但是，这没有效果。您仍然可以实例化这样的类。据我了解，该`abstract`关键字是为了 Delphi .net 编译器的利益而添加的。

同样，在现代版本的 Delphi 中，您可以将编译器配置为将使用抽象方法的类的实例化视为编译错误。这可能是您在 Delphi 中最接近定义 1 的地方。

然而，即使这样也不完全符合定义 1，因为这些类可以通过 RTTI 或虚拟构造函数进行实例化。实例化设计组件的机制就是一个很好的例子。

以这个类为例：

```
type
  TForm1 = class(TForm)
  public
    procedure Boo; virtual; abstract;
  end; 
```

即使您将*W2000 Constructing instance contains abstract method*的选项设置为*Error*，您仍然可以让框架实例化该类。仅当您编写`TForm1.Create`编译器对象时。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-16T23:58:02.107

我已经成功创建了一个带有 BaseForm 的演示，它具有抽象方法，并且很有魅力......
我的 IDE 是 Rad Studio RIO
我的 BaseForm 代码：

```
unit UBaseForm;

interface

uses
  Winapi.Windows,
  Winapi.Messages,
  System.SysUtils,
  System.Variants,
  System.Classes,
  Vcl.Graphics,
  Vcl.Controls,
  Vcl.Forms,
  Vcl.Dialogs,
  Vcl.ExtCtrls, Vcl.StdCtrls;

type
  TBaseForm = class(TForm)
    Lbl_IndexPage: TLabel;
    procedure Abstracted_Event(Sender: TObject); virtual; abstract;
    procedure Abstracted_Proc; virtual; abstract;
    function Abstracted_Func: string; virtual; abstract;
  private
    { Private declarations }
  public
    { Public declarations }
  end;

  procedure Get_SubForm(var Ref; AFormClass: TFormClass;
  aOwner: TComponent; aParent: TWinControl);

var
  BaseForm: TBaseForm;

implementation

{$R *.dfm}

procedure Get_SubForm(var Ref; AFormClass: TFormClass;
  aOwner: TComponent; aParent: TWinControl);
var
  Instance: TBaseForm;
begin
  if not Assigned(TBaseForm(Ref)) then
  begin
    Instance       := TBaseForm(AFormClass.NewInstance);
    TBaseForm(Ref) := Instance;
    Instance.Create(aOwner);
  end
  else Instance := TBaseForm(Ref);

  Instance.Parent      := aParent;
  Instance.Align       := alClient;
  Instance.BorderStyle := bsNone;
  Instance.OnShow      := Instance.Abstracted_Event;
  Instance.Show;
end;

end. 
```

在我的应用程序中，我有三个表单可以继承该 BaseForm 甚至方法之上的所有属性......

```
unit UFirstPage;

interface

uses
  Winapi.Windows,
  Winapi.Messages,
  System.SysUtils,
  System.Variants,
  System.Classes,
  Vcl.Graphics,
  Vcl.Controls,
  Vcl.Forms,
  Vcl.Dialogs,
  UBaseForm,
  Vcl.StdCtrls, Vcl.ExtCtrls;

type
  TFrmFirstPage = class(TBaseForm)
    Pnl_1: TPanel;
    Edt_Abst_Msg_Event: TEdit;
    Pnl_2: TPanel;
    Pnl_3: TPanel;
    Btn_Get_Abstract_Func: TButton;
    Btn_Get_Abstract_Proc: TButton;
    procedure Btn_Get_Abstract_FuncClick(Sender: TObject);
    procedure Btn_Get_Abstract_ProcClick(Sender: TObject);
  published
    procedure Abstracted_Event(Sender: TObject); override;
    procedure Abstracted_Proc; override;
    function Abstracted_Func: string; override;
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  FrmFirstPage: TFrmFirstPage;

implementation

{$R *.dfm}

{ TFrmFirstPage }

{$REGION ' Overridden Abstract Methodes ..'}
procedure TFrmFirstPage.Abstracted_Event(Sender: TObject);
begin
  inherited;
  Pnl_1.Color := clBlue; Pnl_2.Color := clGray; Pnl_3.Color := clRed;
  Edt_Abst_Msg_Event.Text  := 'All this Properties can changed using [Abstracted_Event] | (Owner Form is: ['+ Self.ClassName +'])';
end;

function TFrmFirstPage.Abstracted_Func: string;
begin
  Result := 'I''m Just an Override of Abstracted_Func ['+ Self.ClassName +']';
end;

procedure TFrmFirstPage.Abstracted_Proc;
begin
  inherited;
  ShowMessage('I''m Just an Override of Abstracted_Proc ['+ Self.ClassName +']');
end;
{$ENDREGION}

procedure TFrmFirstPage.Btn_Get_Abstract_FuncClick(Sender: TObject);
begin
  ShowMessage(Abstracted_Func);
end;

procedure TFrmFirstPage.Btn_Get_Abstract_ProcClick(Sender: TObject);
begin
  Abstracted_Proc;
end;

end. 
```

[![在此处输入图像描述](https://i.stack.imgur.com/J7P0b.png)](https://i.stack.imgur.com/J7P0b.png)

我的第二种形式：

```
unit USecondPage;

interface

uses
  Winapi.Windows,
  Winapi.Messages,
  System.SysUtils,
  System.Variants,
  System.Classes,
  Vcl.Graphics,
  Vcl.Controls,
  Vcl.Forms,
  Vcl.Dialogs,
  UBaseForm,
  Vcl.StdCtrls;

type
  TFrmSecondPage = class(TBaseForm)
    Lbl_Abst_Msg_Event: TLabel;
    Lbl_1: TLabel;
    Lbl_2: TLabel;
    Lbl_3: TLabel;
    Btn_Do_Abst_Proc: TButton;
    Btn_Get_Abst_Func: TButton;
    procedure Btn_Do_Abst_ProcClick(Sender: TObject);
    procedure Btn_Get_Abst_FuncClick(Sender: TObject);
  published
    procedure Abstracted_Event(Sender: TObject); override;
    procedure Abstracted_Proc; override;
    function Abstracted_Func: string; override;
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  FrmSecondPage: TFrmSecondPage;

implementation

{$R *.dfm}

{ TFrmSecondPage }

{$REGION ' Overridden Abstract Methodes ..'}
procedure TFrmSecondPage.Abstracted_Event(Sender: TObject);
begin
  inherited;
  Lbl_1.Font.Color := clBlue; Lbl_2.Font.Color := clGray; Lbl_3.Font.Color := clRed;
  Lbl_Abst_Msg_Event.Caption := 'All this Properties can changed using [Abstracted_Event] | (Owner Form is: ['+ Self.ClassName +'])';
end;

function TFrmSecondPage.Abstracted_Func: string;
begin
  Result := 'I''m Just an Override of Abstracted_Func ['+ Self.ClassName +']';
end;

procedure TFrmSecondPage.Abstracted_Proc;
begin
  inherited;
  ShowMessage('I''m Just an Override of Abstracted_Proc ['+ Self.ClassName +']');
end;
{$ENDREGION}

procedure TFrmSecondPage.Btn_Do_Abst_ProcClick(Sender: TObject);
begin
  Abstracted_Proc;
end;

procedure TFrmSecondPage.Btn_Get_Abst_FuncClick(Sender: TObject);
begin
  ShowMessage(Abstracted_Func);
end;

end. 
```

[![在此处输入图像描述](https://i.stack.imgur.com/dl8XI.png)](https://i.stack.imgur.com/dl8XI.png)

我的第三个表格：

```
unit UThirdPage;

interface

uses
  Winapi.Windows,
  Winapi.Messages,
  System.SysUtils,
  System.Variants,
  System.Classes,
  Vcl.Graphics,
  Vcl.Controls,
  Vcl.Forms,
  Vcl.Dialogs,
  UBaseForm,
  Vcl.StdCtrls;

type
  TFrmThirdPage = class(TBaseForm)
  published
    procedure Abstracted_Event(Sender: TObject); override;
    procedure Abstracted_Proc; override;
    function Abstracted_Func: string; override;
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  FrmThirdPage: TFrmThirdPage;

implementation

{$R *.dfm}

{ TFrmThirdPage }

{$REGION ' Overridden Abstract Methodes ..'}
procedure TFrmThirdPage.Abstracted_Event(Sender: TObject);
begin
  inherited;
// your Code Goes Here ..
// call this methode or fill it with code Not a Mandatory :)
// The Mandatory thing is to implement this Methodes Exactly where BASEFORM HAS & without Missing any one of them from the Base Class...
// Enjoy ...
end;

function TFrmThirdPage.Abstracted_Func: string;
begin
// your Code Goes Here ..
// call this methode or fill it with code Not a Mandatory :)
// Enjoy ...
end;

procedure TFrmThirdPage.Abstracted_Proc;
begin
  inherited;
// your Code Goes Here ..
// call this methode or fill it with code Not a Mandatory :)
// Enjoy ...
end;
{$ENDREGION}

end. 
```

[![在此处输入图像描述](https://i.stack.imgur.com/ZnFSk.png)](https://i.stack.imgur.com/ZnFSk.png)

我的主要形式：

```
unit UMain;

interface

uses
  Winapi.Windows,
  Winapi.Messages,
  System.SysUtils,
  System.Variants,
  System.Classes,
  Vcl.Graphics,
  Vcl.Controls,
  Vcl.Forms,
  Vcl.Dialogs,
  Vcl.StdCtrls,
  Vcl.ExtCtrls,
// My Abstracted Views ..
  UFirstPage,
  USecondPage,
  UThirdPage;

type
  TFrmMain = class(TForm)
    Pnl_ToolBar: TPanel;
    Pnl_StatusBar: TPanel;
    Btn_Previous: TButton;
    Btn_Next: TButton;
    Notebook_SubForms: TNotebook;
    Pnl_First_PAGE: TPanel;
    Pnl_Second_PAGE: TPanel;
    Pnl_Third_PAGE: TPanel;
    procedure FormCreate(Sender: TObject);
    procedure Notebook_SubFormsPageChanged(Sender: TObject);
    procedure Btn_NextClick(Sender: TObject);
    procedure Btn_PreviousClick(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  FrmMain: TFrmMain;

implementation

uses
// My Abstracted Base Template ..
  UBaseForm;

{$R *.dfm}

procedure TFrmMain.Btn_NextClick(Sender: TObject);
begin
  case Notebook_SubForms.PageIndex of
    0:begin
        Notebook_SubForms.PageIndex := 1;
      end;
    1:begin
        Notebook_SubForms.PageIndex := 2;
      end;
    2:begin
        Notebook_SubForms.PageIndex := 0;
      end;
  end;
end;

procedure TFrmMain.Btn_PreviousClick(Sender: TObject);
begin
  case Notebook_SubForms.PageIndex of
    0:begin
        Notebook_SubForms.PageIndex := 2;
      end;
    1:begin
        Notebook_SubForms.PageIndex := 0;
      end;
    2:begin
        Notebook_SubForms.PageIndex := 1;
      end;
  end;
end;

procedure TFrmMain.FormCreate(Sender: TObject);
begin
  Get_SubForm(FrmFirstPage, TFrmFirstPage, Self, Pnl_First_PAGE);
end;

procedure TFrmMain.Notebook_SubFormsPageChanged(Sender: TObject);
begin
  case Notebook_SubForms.PageIndex of
    0:begin
        Get_SubForm(FrmFirstPage, TFrmFirstPage, Self, Pnl_First_PAGE);
        if Assigned(FrmSecondPage) then FreeAndNil(FrmSecondPage);
        if Assigned(FrmThirdPage) then FreeAndNil(FrmThirdPage);
      end;
    1:begin
        Get_SubForm(FrmSecondPage, TFrmSecondPage, Self, Pnl_Second_PAGE);
        if Assigned(FrmFirstPage) then FreeAndNil(FrmFirstPage);
        if Assigned(FrmThirdPage) then FreeAndNil(FrmThirdPage);
      end;
    2:begin
        Get_SubForm(FrmThirdPage, TFrmThirdPage, Self, Pnl_Third_PAGE);
        if Assigned(FrmSecondPage) then FreeAndNil(FrmSecondPage);
        if Assigned(FrmSecondPage) then FreeAndNil(FrmSecondPage);
      end;
  end;
end;

end. 
```

[![在此处输入图像描述](https://i.stack.imgur.com/odHMZ.png)](https://i.stack.imgur.com/odHMZ.png)

当编译 0 错误和 0 警告时..
结果： [![在此处输入图像描述](https://i.stack.imgur.com/nxxrI.png)](https://i.stack.imgur.com/nxxrI.png)

[![在此处输入图像描述](https://i.stack.imgur.com/uF5jR.png)](https://i.stack.imgur.com/uF5jR.png)

[![在此处输入图像描述](https://i.stack.imgur.com/6PtDr.png)](https://i.stack.imgur.com/6PtDr.png)

[从我的 Github Repo下载](https://github.com/RobertoGitRepo/BaseForm-With-Abstract-Methodes)整个演示的链接。
Demo 也可以在 Delphi 7 中工作（我对其进行了测试）:)

# image - 是否可以对电影文件（mp4、mov、...）进行对象识别

> ID：15928861
> 
> 赞同：0
> 
> 时间：2013-04-10T14:36:10.420
> 
> 标签：image, image-recognition, movie

是否可以对电影文件（mp4、mov、...）进行对象识别？

例如，流式传输电影并查找对象或人，并确定该人是谁或电影中有哪些产品？

这个过程会归结为拍摄图像缓冲区的许多快照并将它们作为普通图像处理吗？

我对此完全陌生，对不起，如果这个问题可能根本没有意义。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T14:49:36.817

我发现这个项目正是我想要的。

[https://sites.google.com/site/igormarinescu/home/projects/objectsrec](https://sites.google.com/site/igormarinescu/home/projects/objectsrec)

它是实时完成的，所以我将查看代码。

# java - 使用 GWT 请求工厂上传文件

> ID：15928862
> 
> 赞同：2
> 
> 时间：2013-04-10T14:36:11.637
> 
> 标签：java, gwt, file-upload, requestfactory

是否可以通过请求工厂上传文件？简单的例子将非常有帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-10T16:42:09.070

其实你可以！，我已经有一个应用程序在做。

1.  您需要支持[FileApi](http://www.w3.org/TR/FileAPI/)的浏览器（现代浏览器需要）
2.  您必须编写一些 jsni 代码才能将文件内容读入 base64 字符串。
3.  您将（异步）接收到一个字符串，您可以将其分配给`Bean`应用程序中的任何属性并通过 RF、RPC 等发送。

在这里，您可以复制/粘贴我使用的最重要的代码：

```
 public final native void readAsDataURL(MyClass that, FileUpload input) /*-{
     var files = input.@com.google.gwt.user.client.ui.FileUpload::getElement()().files;
     var reader = new FileReader();  
     reader.onload = function (evt) {
         that.@...MyClass::done(Ljava/lang/String;)(evt.target.result);
     }
     reader.readAsDataURL(files[0]);
    }-*/; 
```

这将是我的[gwtupload](http://code.google.com/p/gwtupload/)库中即将推出的功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:54:29.640

不。

您需要创建一个单独的文件上传 servlet。请参阅[GWT 中的基本文件上传](https://stackoverflow.com/questions/1111130/basic-file-upload-in-gwt)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-10T15:10:48.430

*IMO* `RPC`或`Request Factory`感觉是`XMLHttpRequest`，它不允许您`encode`将`local`文件发送到`server`.

您需要编写自己的`servlet`和 GWT `FormPanel`。

此处的完整[示例](http://www.jroller.com/hasant/entry/fileupload_with_gwt)`servlet`及其`mapping`

# sql - sql 选择进入子查询

> ID：15928864
> 
> 赞同：2
> 
> 时间：2013-04-10T14:36:18.933
> 
> 标签：sql, sql-server-2005

我正在系统之间进行数据转换，并准备了一个 select 语句，该语句标识了要从中提取`table1`和连接的必要行`table2`以显示一对支持列。此 select 语句还将空白列放入结果中，以便格式化结果以上传到目标系统。

除了这个查询之外，我还需要更新一些我想在新表中的单独语句操作中执行的列值。因此，我有兴趣将上述 select 语句作为 a 中的子查询运行，`SELECT INTO`这实际上会将结果放入临时表中。

```
SELECT 
    dbo_tblPatCountryApplication.AppId, '', 
    dbo_tblPatCountryApplication.InvId,
    'Add', dbo_tblpatinvention.disclosurestatus, ...
FROM 
    dbo_tblPatInvention 
INNER JOIN 
    dbo_tblPatCountryApplication ON dbo_tblPatInvention.InvId = dbo_tblPatCountryApplication.InvId
ORDER BY 
    dbo_tblpatcountryapplication.invid; 
```

我想执行上面的语句，以便将结果转储到一个新表中。任何人都可以请建议如何将语句嵌入到一个可以很好地与 a 配合使用的子查询中`SELECT INTO`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:56:47.730

您可以简单地[`INTO`](http://msdn.microsoft.com/en-us/library/ms188029.aspx)向现有查询添加一个子句，以创建一个填充查询结果的新表：

```
SELECT ...
INTO MyNewStagingTable -- Creates a new table with the results of this query
FROM MyOtherTable
    JOIN ... 
```

但是，您必须确保每列都有一个名称，如下所示：

```
SELECT dbo_tblPatCountryApplication.AppId, -- Cool, already has a name
    '' AS Column2, -- Given a name to create that new table with select...into
    ...
INTO MyNewStagingTable
FROM dbo_tblPatInvention INNER JOIN ... 
```

此外，您可能还想[为您的表格使用别名](http://msdn.microsoft.com/en-us/library/ms187455.aspx)，以使代码更具可读性；

```
SELECT a.AppId,
    '' AS Column2,
    ...
INTO MyNewStagingTable
FROM dbo_tblPatInvention AS i
    INNER JOIN dbo_tblPatCountryApplication AS a ON i.InvId = a.InvId
ORDER BY a.InvId 
```

`dbo_tblXXX`最后一点是，将您的表命名为 dbo 通常是模式名称并使用点符号与表名分隔开来看起来很奇怪，例如`dbo.tblXXX`. 我假设您在添加 into 子句之前已经有一个完全工作的选择查询。有些人还考虑在您的数据库 (tblName) 中使用匈牙利符号作为一种要避免的反模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:47:41.907

如果暂存表不存在并且您想在插入时创建它，请尝试以下操作：

```
SELECT dbo_tblPatCountryApplication.AppId,'', dbo_tblPatCountryApplication.InvId,
       'Add', dbo_tblpatinvention.disclosurestatus .......
INTO StagingTable
FROM dbo_tblPatInvention 
INNER JOIN dbo_tblPatCountryApplication 
              ON dbo_tblPatInvention.InvId = dbo_tblPatCountryApplication.InvId; 
```

如果要按特定顺序插入它们，请尝试在 from 子句中使用子查询：

```
SELECT *
INTO StagingTable
FROM 
(
   SELECT dbo_tblPatCountryApplication.AppId, '', dbo_tblPatCountryApplication.InvId, 
          'Add', dbo_tblpatinvention.disclosurestatus .......
   FROM dbo_tblPatInvention 
   INNER JOIN dbo_tblPatCountryApplication ON 
              dbo_tblPatInvention.InvId = dbo_tblPatCountryApplication.InvId
    order by dbo_tblpatcountryapplication.invid
) a; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:39:05.497

尝试

```
INSERT INTO stagingtable (AppId, ...)
SELECT ... --your select goes here 
```

# powershell - 备份 .thumbnails powershell

> ID：15928866
> 
> 赞同：0
> 
> 时间：2013-04-10T14:36:22.320
> 
> 标签：powershell, copy, backup, thumbnails

我写了一个备份脚本，它备份并记录错误。工作正常，除了一些 .thumbnails，许多其他 .thumbnails 确实被复制了！

54000 个文件复制，相同的 480 个 .thumbnails 永远不会被复制或记录。我将检查属性，但我觉得复制项功能应该完成这项工作。也欢迎任何其他建议，但请保持主题，谢谢！！！！这是我的备份脚本

```
 Function backUP{ Param ([string]$destination1 ,$list1)
    $destination2 = $destination1
                              #extract new made string for backuplog
                            $index = $destination2.LastIndexOf("\") 
                            $count = $destination2.length - $index
                            $source1 = $destination2.Substring($index, $count)
                            $finalstr2 = $logdrive + $source1

    Foreach($item in $list1){

     Copy-Item -Container: $true -Recurse -Force -Path $item -Destination $destination1 -erroraction Continue 
     if(-not $?)
     {
      write-output "ERROR de copiado : " $error| format-list | out-file  -Append "$finalstr2\GCI-ERRORS-backup.txt"
      Foreach($erritem in $error){
      write-output "Error Data:" $erritem.TargetObject  | out-file -Append "$finalstr2\GCI-ERRORS-backup.txt"
              }
      $error.Clear()
         }
       }
     } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-14T14:58:21.693

您确定您的`backUP`功能正在接收`.thumbnails`文件`$list1`吗？如果文件被隐藏，那么只有在使用开关[`Get-ChildItem`](http://go.microsoft.com/fwlink/?LinkID=113308)时才会返回它们。`-Force`

至于其他建议，`Robocopy.exe`是一个很好的执行文件同步的专用工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T17:00:11.237

显然，我没有缩略图文件夹的权限。

那一套，脚本运行良好！

# jquery - 在继续之前在 jWizard 上添加验证

> ID：15928874
> 
> 赞同：1
> 
> 时间：2013-04-10T14:36:33.747
> 
> 标签：jquery, jquery-plugins, jwizard

插件是：[http](http://www.dbarnes.info/jWizard/)
://www.dbarnes.info/jWizard/ 初始化如下：

```
mywizard = $("#wizard").jWizard({
        menuEnable: true,
        counter: {enable: true},
        effects: {enable: true},
        buttons: {
            cancelHide: false,
            cancelType: "button",<button>
            finishType: "submit",
            cancelText: "Cancel", 
            previousText: "Back",
            nextText: "Next",
            finishText: "Submit"
        }
    }); 
```

在对每个步骤进行一些验证之前，我不希望显示下一个按钮。我尝试添加`$(".jw-next-button").bind("click", function(){ ... console.log('got here');... if(validation == 'bad') return false});`控制台确实被记录，但向导并没有继续前进。有关改进策略的任何线索或提示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:58:30.077

在 javascript 文件**jquery.jWizard.js**中，找到以下内容

```
updateMenu: function (firstStep) {
            var wizard = this,
                currentStep = this._stepIndex,
                $menu = this.element.find(".jw-menu");

            if (!firstStep) {
                this._effect($menu.find("li:eq(" + currentStep + ")"), "menu", "change");
            }

            $menu.find("a").each(function (x) {
                var $a = $(this),
                    $li = $a.parent(),
                    iStep = parseInt($a.attr("step"), 10),
                    sClass = "";

                if (iStep < currentStep) {
                    sClass += "jw-active ui-state-default";
                } else if (iStep === currentStep) {
                    sClass += "jw-current ui-state-highlight";
                } else if (iStep > currentStep) {
                    sClass += "jw-inactive ui-state-disabled";
                    $a.removeAttr("href");
                }
                $li.removeClass("jw-active jw-current jw-inactive ui-state-default ui-state-highlight ui-state-disabled").addClass(sClass);
            }); 
```

在它下面，添加以下代码：

```
var title = $("ol .jw-current a").html();
$(".jw-button-next").attr("disabled", "disabled").removeClass("ui-state-hover"); 
validator(title); 
```

首先我们获取当前页面的名称，然后禁用下一个按钮，然后调用当前标题的验证器函数。然后我们对验证器进行编码，以便如果满足给定页面的给定条件，它将再次激活下一个按钮。

```
function validator(page)
    {
        switch(page){
            case "Page 1":
                if(... == true)
                   $(".jw-button-next").removeAttr("disabled");
            break;
            ....
        }
} 
```

# php - ajax 将 html 注入 div 但保留 html 元素，包括它们的 id

> ID：15928880
> 
> 赞同：0
> 
> 时间：2013-04-10T14:37:01.373
> 
> 标签：php, ajax, jquery

我正在使用一些 ajax 来调用一个 php 文件，该文件返回一些 html（一个图像和几个按钮），然后将其内容放入一个 div 中。问题是我希望能够使用从 php 返回的按钮之一的 id 来连接事件处理程序。如果我在浏览器中查看源代码，则源代码的输出仅显示 html 注入的 div 而不是 html：

```
<div class="displaysomething"></div> 
```

我的 AJAX 如下：

```
$(document).ready(function () { 
   getServiceDisplay();
   $('#stop-service').click(function(e)
   {
       e.preventDefault();
       runHDIMService();
   }); 
```

}

```
function getServiceDisplay(){
$.ajax(
{ 
    url: 'includes/dosomething.php',
    type: 'POST',
    success: function(strOutput) 
    {
        $(".displaysomething").html(strOutput);
        }               
    }); 
}; 
```

PHP - 最终返回一个按钮。这就是我需要根据它的 id 连接到事件处理程序的内容。

```
echo '<input id="stop-service" type="button" value="Run" class="'.$strRunActionButtonClass.'"/>'; 
```

如果我只是在页面上放置一个按钮而不使用 AJAX 将其注入到 div 中，那么我的按钮连接代码效果很好。

有人有什么想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:43:08.570

在 jQuery 中，`.click(...`添加事件处理程序的方法只会将事件添加到现有元素。不包括后来添加的新元素。

您可以使用[jQuery on](http://api.jquery.com/on/)事件绑定方法来包含稍后添加的元素。

```
$("body").on("click", "#stop-service", function(e){
    e.preventDefault();
    runHDIMService();
}); 
```

我[在 JSFiddle 创建了一个简单的示例](http://jsfiddle.net/jr79n/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:45:14.623

问题是

```
$(document).ready(function () { 
   getServiceDisplay();
   $('#stop-service').click(function(e) // this doesn't exists yet
   {
       e.preventDefault();
       runHDIMService();
   }); 
```

这应该有效：

函数 getServiceDisplay(){

```
$.ajax(
{ 
    url: 'includes/dosomething.php',
    type: 'POST',
    success: function(strOutput) 
    {
        $(".displaysomething").html(strOutput);
        // so after you attached the div from ajax call just register your event
        $('#stop-service').click(function(e)
        {
            e.preventDefault();
            runHDIMService();
        });               
    }); 
}; 
```

# oracle - 使用 SQLDeveloper 复制架构（对象和数据）时，有没有办法禁用视图数据复制？

> ID：15928884
> 
> 赞同：1
> 
> 时间：2013-04-10T14:37:07.257
> 
> 标签：oracle, oracle-sqldeveloper

我一直在尝试使用 SQL Developer 的数据库复制工具来复制模式。我有一个从同一架构中的表中选择的视图。当我进行复制时，SQL Developer 会为表和视图生成插入。我想不出一种方法来告诉它只复制表的数据。

在向导中有一个用于选择要复制的特定表和视图的屏幕。当我不选择任何视图时，它假定所有视图。

我想出的唯一想法是创建一个虚拟视图并选择它作为复制数据的唯一视图。或者作为表和数据的两阶段方法复制一次，然后在没有数据的情况下第二次复制视图和其他对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-23T20:54:12.237

这是一个错误，应该在最新版本中修复。

# c# - X509Certificate2.验证行为

> ID：15928889
> 
> 赞同：4
> 
> 时间：2013-04-10T14:37:20.177
> 
> 标签：c#, x509certificate, digital-signature, x509certificate2

我有一个数字签名的二进制 app.exe。证书由商业 CA 颁发。在文件属性（在 Windows 上）中，数字签名信息显示*This digital signature is OK*。如果我以某种方式修改二进制文件（例如通过更改 Resource Hacker 中的资源），数字签名信息表明*This digital signature is not valid*。

我尝试以编程方式验证证书，但[X509Certificate2.Verify()](http://msdn.microsoft.com/en-GB/library/system.security.cryptography.x509certificates.x509certificate2.verify%28v=vs.90%29.aspx)`true`无论我使用哪个文件 - 原始文件 (app.exe) 或篡改文件 (app-modified.exe) 都会返回。

```
string filename = "app.exe"; // "app-modified.exe"
X509Certificate cert1 = X509Certificate.CreateFromSignedFile(filename);
X509Certificate2 cert2 = new X509Certificate2(cert1);
bool isValid = cert2.Verify(); 
```

**为什么这个函数在这两种情况下都返回 true？这是验证文件数字签名的正确方法吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-28T10:50:05.273

我认为您误解了数字签名验证过程。粗略验证数字签名过程包括两个步骤，第一步是验证签名完整性（检查签名后没有人修改文档），第二步是验证证书状态（检查证书是否有效、未过期或撤销）。

因此，如果您修改已签名的 app.exe，您的签名将被破坏，但如果证书有效，它仍然有效，这就是在这两种情况下您的证书验证都可以的原因。

如果您验证签名而不是仅验证证书，则 app-modified.exe 中的结果将是错误的，因为当您修改 app.exe 时，您破坏了签名。

希望这可以帮助，

# php - php 代码中的 JavaScript 脚本标记

> ID：15928892
> 
> 赞同：1
> 
> 时间：2013-04-10T14:37:25.063
> 
> 标签：php, javascript

我有一页（父）通过弹出窗口（子）打开第二页

在第二页上，我有以下 PHP 代码，它从父页面获取 HTML 元素的值：

```
 $var=print_r("<script type='text/javascript'>var x=window.opener.document.getElementsByName('name1');document.write(x[0].value)</script>",true); 
```

当我回显变量时，`$var`我得到的正是我所期望的。因此：

```
echo "test=" . $test; 
```

...在页面上打印例如“费用”。

到现在为止还挺好。

问题是当我尝试将此变量写入如下文件时：

```
$f=fopen("/mylog.txt","w+");
fwrite($f, $test);
fclose($f); 
```

`$test`...然后，而不是（例如费用）的实际值，

我在我的日志文件中获得了整个脚本标记，因此：

```
<script type='text/javascript'>var x=window.opener.document.getElementsByName('name1');document.write(x[0].value)</script> 
```

假设`print_r`使用 'true' 参数将值返回给我的`$test`变量，为什么将确切的脚本标签写入日志文件？

我该如何克服呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T14:40:45.640

当您`echo`将值传递给浏览器时，它将运行 JavaScript 并显示结果。

将其保存到文件时，不会执行 JavaScript。

在这两种情况下，都会输出完整的脚本，但浏览器实际上正在运行脚本，而您的文本编辑器不会。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:48:15.393

将客户端上的数据发送到服务器。您可以使用 Ajax（如下所示）或表单。

```
$.post('myPHPfile.php',{name:window.opener.document.getElementsByName('name1')}); 
```

我的PHP文件.php

```
$test=$_POST['name'];
$f=fopen("/mylog.txt","w+");
fwrite($f, $test);
fclose($f); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T15:19:50.197

好的，我通过更改使用额外变量（所需变量）调用第二页的 url-string 来实现所需的结果，然后通过 $_GET 检索该值并可以将其打印到我的日志文件中而不会出现问题。

非常感谢你们所有人的快速回复:)

# javascript - 使用 Javascript 调用 JQuery Mobile 转换

> ID：15928894
> 
> 赞同：0
> 
> 时间：2013-04-10T14:37:27.803
> 
> 标签：javascript, jquery, mobile, transition, swipe

我正在使用 Hammer.js 添加滑动手势以滑动浏览我的网站页面。

现在我想使用 JQuery Mobile 添加一个转换，但转换是在 HTML 中调用的。是否有可能调用动画：

```
data-transition="slide" 
```

通过 Javascript。

```
<script type="text/javascript">
var hammertime = Hammer('html', {swipe_max_touches: 2, prevent_mouseevents: true
}).on("swiperight", function(event) {
document.location = "http://example.com";
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-13T04:23:29.380

`$.mobile.changePage()`现在已弃用。[http://api.jquerymobile.com/jQuery.mobile.changePage/](http://api.jquerymobile.com/jQuery.mobile.changePage/)。正确的方法是使用：

1.  `$.mobile.navigate("#bar", {transition: "slide", info: "info about the #bar hash"});`
2.  `$.mobile.pageContainer.pagecontainer("change", "target", {transition: "flow", changeHash: false, reload: true})`

只是想我会根据我从其他线程中学到的东西来回答这个问题。我没有足够的声誉来放置其余的链接。只需在 Google 上搜索代码即可找到它们各自的 StackOverflow 线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:42:02.687

您可以使用

```
$.mobile.changePage( url, { transition: "slideup" }); 
```

请参阅[jQueryMobile 文档](http://api.jquerymobile.com/jQuery.mobile.changePage/)

为了提高加载时间，您可以使用[预取](http://view.jquerymobile.com/1.3.0/docs/widgets/pages/)，例如

```
<a href="url" data-prefetch="true" data-rel="dialog" class="ui-link">
  This link will prefetch the page
</a> 
```

# perl - Perl 使用 pp -o test.pl 时出错

> ID：15928898
> 
> 赞同：0
> 
> 时间：2013-04-10T14:37:46.353
> 
> 标签：perl, exe, par, pp-perl-par-packager

我试图将 perl 程序转换为 exe 文件。在我的 Windows 7 64 位上，我的 perl 版本是 5.16.2，我使用 ppm install PAR:Packer，版本 1.013，但是当我使用 pp -o test.pl 时，我得到了错误：

> Perl lib 版本 (5.16.2) 与可执行版本 (v5.16.0) 不匹配。

google了很多，但是一直没有找到解决办法，不胜感激，万分感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-08T20:34:50.643

您生成 perl 可执行文件的构建机器的 perl 版本为 5.16.0。这个 perl 可执行文件可以反过来生成另一个 perl 脚本。这个新生成的 perl 脚本将使用安装在主机中的 perl 5.16.2 库，从而导致冲突。

PP 在执行它们之前在主机中解压 perl 可执行文件。如果您可以将 PATH 环境变量添加到该路径，那么 PP 会找到 5.16.0 perl 库，而不是安装在主机系统中的 perl 库。

# c++ - 传递对基类指针的引用

> ID：15928901
> 
> 赞同：2
> 
> 时间：2013-04-10T14:37:56.840
> 
> 标签：c++, pointers, inheritance, pass-by-reference

我有一个`Child`扩展类`Base`。在我的课堂`Foo`上，我有带有签名的方法，例如：

```
void Foo::doStuff(Base *& base);    // case A
void Foo::doOther(Child *& child);  // case B
void Foo::doSomething(Base * base); // case C 
```

*我对案例 B*没有任何问题。如果我写：

```
Child * myChild = new Child();
Foo foo;
foo.doOther(myChild); 
```

没有编译/运行时错误。

问题出在*案例 A*上，如果我写：

```
Child * test = new Child();
Foo foo;
foo.doStuff(test); 
```

我收到一条编译时错误消息：

> 错误：没有匹配的函数调用 foo::doStuff...

如果我不使用对指针的引用（*案例 C*） ，则没有问题

`Base *&`在调用 to 之前，我还尝试将测试对象强制转换为对象`doStuff`，但我想让它像*case C*一样工作。

有什么想法吗？

编辑：

它是： Child * myChild = new Child(); //不是基础 * myChild = new Child();

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T14:51:01.033

如果这

```
Child * test = new Child();
Foo foo;
foo.doStuff(test); 
```

将被允许​​，并`doStuff`像这样实现：

```
Foo::doStuff(Base *& base)
{
    delete base;
    base = new Base();
} 
```

然后你会得到一个静态类型的指针，`Child *`但实际上指向一个`Base`.

这个

```
Child * test = new Child();
Foo foo;
foo.doSomething(test); 
```

不是问题，因为`doSomething`不能修改`test`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:51:34.527

`Child`“is-a”这一事实`Base`并不意味着`pointer-to-Child`“is-a” `pointer-to-Base`。继承不会传播到指针，这是有充分理由的。

想象一下`doStuff`实现如下：

```
void doStuff(Base *& base)
{
    base = new Base;
} 
```

如果你能够传递一个指向`Child`这个函数的指针，你最终会得到一个指向错误类型对象的指针：

```
Child *pChild;
doStuff(pChild);
// pChild now points to a Base and not a Child! 
```

# c# - 将日期控件添加到 devexpress silverlight 网格

> ID：15928904
> 
> 赞同：0
> 
> 时间：2013-04-10T14:37:57.737
> 
> 标签：c#, devexpress

需要将日期选择器添加到 devexpress Silverlight 网格中，以便网格的第一列是日期选择器。

在 xaml 中，我可以拖动一个日期选择器并将其放下，或者我可以设置 gridcolum.editsettings 属性

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T10:39:02.330

请按如下方式分配[GridColumn.EditSettings属性：](http://documentation.devexpress.com/#Silverlight/DevExpressXpfGridColumnBase_EditSettingstopic)

```
<dxg:GridColumn x:Name="colDate" FieldName="Date"> 
    <dxg:GridColumn.EditSettings> 
        <dxe:DateEditSettings MaskType="DateTime" Mask="dd-MMM-yyyy" MaskUseAsDisplayFormat="True"/> 
    </dxg:GridColumn.EditSettings> 
</dxg:GridColumn> 
```

您还可以使用 GridControl 的设计时功能：指定列编辑器的类型并自定义其设置，选择列并通过[快速自定义面板](http://documentation.devexpress.com/#Silverlight/CustomDocument5580)选择所需编辑器的类型。

# ios - 使用 OCMockito 测试发送到模拟协议的参数

> ID：15928906
> 
> 赞同：0
> 
> 时间：2013-04-10T14:38:09.037
> 
> 标签：ios, unit-testing, tdd, ocmockito, ochamcrest

美好的一天，我正在使用 OCHamcrest 和 OCMockito 开始我的使用 TDD 方法的路径，它们真的很酷的工具，但有一点我似乎不了解模拟协议并尝试评估参数。

考虑代码附带的示例：

```
- (void)testVerifyWithMatcherForPrimitive
{
    NSMutableArray *mockArray = mock([NSMutableArray class]);

    [mockArray removeObjectAtIndex:2];

    [[verify(mockArray) withMatcher:greaterThan([NSNumber numberWithInt:1]) forArgument:0]
     removeObjectAtIndex:0];    // The 0 is a placeholder, replaced by the matcher
} 
```

它按预期工作，但是当我尝试使用模拟协议复制它时，它总是通过测试，例如：

```
- (void)testFirstParameter
{
    // given
    id<TestProtocol> mockElement = mockProtocol(@protocol(TestProtocol));

    // when
    id toProcess = nil;
    [mockElement process: toProcess];

    // then
    id firstArgumentMatcher = instanceOf([NSArray class]);
    [[verify(mockElement) withMatcher: firstArgumentMatcher forArgument: 0] process: toProcess];
} 
```

在这个测试中，我试图测试参数是 NSArray 类的实例，它不应该通过。你能帮我发现我做错了什么吗？

非常感谢，

路易斯·亚历杭德罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-18T05:00:36.543

我想你想要

```
[[verify(mockElement) process:instanceOf([NSArray class])]; 
```

仅用于`withMatcher:forArgument:`原始参数。

# .net - 子报表时出现PageHeader

> ID：15928908
> 
> 赞同：0
> 
> 时间：2013-04-10T14:38:09.520
> 
> 标签：.net, activereports, componentone

我正在使用 ActiveReports 7

我开发了一个在组页脚中有一个子报表的报表。当子报表可见时，PageHeader 从报表中消失，当子报表不可见时，页眉就在那里。

在 AR7 中使用子报表时，我是否遗漏了删除页眉的内容？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T16:41:15.373

我应用了 SP，这解决了问题....去图...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T18:10:38.300

这不应该发生，但是您需要向我们提供更多信息才能正确回答。最好通过 ActiveReports 支持论坛（单击产品页面中的论坛）将报告发送给 ComponentOne 支持来回答这个问题，以便[支持](http://www.componentone.com/SuperProducts/ActiveReports/)*团队*可以查看它并进行故障排除。

一些帮助您排除故障的想法：

*   当子报表位于 Detail 部分而不是 GroupFooter 时，是否显示 PageHeader？
*   是否有任何报告被用作子报告或仅一个？
*   子报表或父报表中有代码吗？尝试注释掉所有代码 -*至少*是所有访问报告、部分或报告上的控件的代码，以查看是否有一些代码影响此处的行为。

# java - 在 java 函数中有错误

> ID：15928912
> 
> 赞同：-8
> 
> 时间：2013-04-10T14:38:14.920
> 
> 标签：java

```
import java.awt.*;

import javax.swing.*;
import java.awt.event.*;
import java.text.DecimalFormat;

/**
   Grocery shop class

*/

public class Grocery_shop extends JFrame
{
   private Grocery_items items;       // A panel for routine charge checkboxes
   private quantitypanel qty; // A panel for quantity
   private JPanel buttonPanel; // A panel for the buttons
   private JButton calcButton;         // Calculates everything
   private JButton exitButton;         // Exits the application

   /**
      Constructor
   */

   public Grocery_shop()
   {
      // Display a title.
      setTitle("Victor's Grocery Shop");

      // Specify what happens when the close button is clicked.
      setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

 // Create a NonRoutinePanel object.
      qty = new quantitypanel();
    //  qty.setBackground(Color.white);

      // Create a RoutinePanel object.
      items = new Grocery_items(qty);

      // Build the panel that contains the buttons.
      buildButtonPanel();

      // Add the panels to the content pane.
      add(items, BorderLayout.WEST);
      add(qty, BorderLayout.EAST);
      add(buttonPanel, BorderLayout.SOUTH);

      // Pack and display the window.
      pack();
      setVisible(true);
   }

   /**
      The buildButtonPanel method creates a panel containing
      buttons.
   */

   private void buildButtonPanel()
   {
      // Create a button to calculate the charges.
      calcButton = new JButton("Add Charges");

      // Add an action listener to the button.
      calcButton.addActionListener(new CalcButtonListener());

      // Create a button to exit the application.
      exitButton = new JButton("Exit");

      // Add an action listener to the button.
      exitButton.addActionListener(new ExitButtonListener());

      // Put the buttons in their own panel.
      buttonPanel = new JPanel();
      buttonPanel.add(calcButton);
      buttonPanel.add(exitButton);
   }

   /**
      CalcButtonListener is an action listener class for the
      calcButton component.
   */

   private class CalcButtonListener implements ActionListener
   {
      /**
         actionPerformed method
         @param e An ActionEvent object.
      */

      public void actionPerformed(ActionEvent e)
      {
         double totalCharges; // Total charges

         // Create a DecimalFormat object to format output.
         DecimalFormat dollar = new DecimalFormat("#,##0.00");

         // Calculate the total charges
         totalCharges = items.getCharges(); 
                 //+ nonRoutine.getCharges();

         // Display the message.
         JOptionPane.showMessageDialog(null, "Total Charges: $" + 
                                             dollar.format(totalCharges));
      }
   } // End of inner class

   /**
      ExitButtonListener is an action listener class for the
      exitButton component.
   */

   private class ExitButtonListener implements ActionListener
   {
      /**
         actionPerformed method
         @param e An ActionEvent object.
      */

      public void actionPerformed(ActionEvent e)
      {
         System.exit(0);
      }
   } // End of inner class

   /**
      The main method creates an instance of the JoesAutomotive
      class, causing it to display its window.
   */

   public static void main(String[] args)
   {
      Grocery_shop grocery = new Grocery_shop();
   }
} 
```

* * *

```
import java.awt.*;
import javax.swing.*;

import java.text.DecimalFormat;

/**
   RoutinePanel class

*/

public class Grocery_items extends JPanel
{
   // Named constants for charges
   private final double Baked_Beans  = 0.35;
   private final double Cornflakes = 1.75;
   private final double Sugar = 0.75;
   private final double Tea_Bags = 1.15;
   private final double Instant_Coffee = 2.50;
   private final double Bread = 1.25;
   private final double Sausage = 1.30;
   private final double Eggs = 0.75;
   private final double Milk = 0.65;
   private final double Potatoes = 2.00;

 //  private quantitypanel qty; // A panel for quantity

   private JCheckBox baked_beans_box;     // Check box for baked_beans
   private JCheckBox CornflakesBox;       // Check box for cornflakes
   private JCheckBox SugarBox; // Check box for sugar box
   private JCheckBox Tea_Bags_Box;    // Check box for tea bag
   private JCheckBox Instant_Coffee_Box;    // Check box for Instant_Coffee_Box
   private JCheckBox Bread_Box;       // Check box for bread box
   private JCheckBox SausageBox;  // Check box for sausage box
   private JCheckBox eggbox;  // Check box for egg box
   private JCheckBox milkbox;  // Check box for milk
   private JCheckBox potatoesbox;  // Check box for potatoes

 //  private JTextField baked_beans_JT; 
   /**
      Constructor
   */

   public Grocery_items(quantitypanel qty)
   {
    this.qty = qty;
      DecimalFormat dollar = new DecimalFormat("#,##0.00");

      // Create the check boxes.
      baked_beans_box = new JCheckBox("Baked_Beans ($" +
                                dollar.format(Baked_Beans) + ")");

      CornflakesBox = new JCheckBox("Cornflakes ($" +
                              dollar.format(Cornflakes) + ")");
      SugarBox = new JCheckBox("Sugar ($" + 
                                    dollar.format(Sugar) + ")");
      Tea_Bags_Box = new JCheckBox("Tea Bags ($" + 
                                 dollar.format(Tea_Bags) + ")");
      Instant_Coffee_Box = new JCheckBox("Instant Coffee_Box ($" + 
                                 dollar.format(Instant_Coffee) + ")");
      Bread_Box = new JCheckBox("Bread Box ($" + 
                              dollar.format(Bread) + ")");
      SausageBox = new JCheckBox("Suasages ($" + 
                                   dollar.format(Sausage) + ")");
      eggbox = new JCheckBox("Eggs ($" + 
              dollar.format(Eggs) + ")");

      milkbox = new JCheckBox("Milk ($" + 
              dollar.format(Milk) + ")");
      potatoesbox = new JCheckBox("Potatoes ($" + 
              dollar.format(Potatoes) + ")");

      // Create a GridLayout manager.
      setLayout(new GridLayout(10, 1));

      // Create a border.
      setBorder(BorderFactory.createTitledBorder("Grocery Items"));

      // Add the check boxes to this panel.
      add(baked_beans_box);
      add(CornflakesBox);
      add(SugarBox);
      add(Tea_Bags_Box);
      add(Instant_Coffee_Box);
      add(Bread_Box);
      add(SausageBox);
      add(eggbox);
      add(milkbox);
      add(potatoesbox);

   }

   /**
      The getCharges method calculates the routine charges.
      @return The amount of routine charges.
   */

   public double getCharges()
   {
      double charges = 0;

      if (baked_beans_box.isSelected())
         charges += Baked_Beans * qty.getBeanqty();
      if (CornflakesBox.isSelected())
         charges += Cornflakes;
      if (SugarBox.isSelected())
         charges += Sugar;
      if (Tea_Bags_Box.isSelected())
         charges += Tea_Bags;
      if (Instant_Coffee_Box.isSelected())
         charges += Instant_Coffee;
      if (Bread_Box.isSelected())
         charges += Bread;
      if (SausageBox.isSelected())
         charges += Sausage;
      if (eggbox.isSelected())
          charges += Eggs;
      if (milkbox.isSelected())
          charges += Milk;
      if (potatoesbox.isSelected())
          charges += Potatoes;

      return charges;
   }
} 
```

* * *

```
//import java.awt.LayoutManager;
import java.awt.GridLayout;
//import javax.swing.JCheckBox;
//import javax.swing.JLabel;
import javax.swing.BorderFactory;
import javax.swing.JPanel;
import javax.swing.JTextField;

public class quantitypanel extends JPanel {
     private JTextField baked_beans_JT;     // JTextField box for baked_beans
       private JTextField Cornflakes_JT;       // JTextField box for cornflakes
       private JTextField Sugar_JT; // JTextField box for sugar box
       private JTextField Tea_Bags_JT;    // JTextField box for tea bag
       private JTextField Instant_Coffee_JT;    // JTextField box for Instant_Coffee_Box
       private JTextField Bread_JT;       // JTextField box for bread box
       private JTextField Sausage_JT;  // JTextField box for sausage box
       private JTextField egg_JT;  // JTextField box for egg box
       private JTextField milk_JT;  // JTextField box for milk
       private JTextField potatoes_JT;  // JTextField box for potatoes

       public quantitypanel()
       {

           //create JTextField.
           baked_beans_JT = new JTextField(5);
           Cornflakes_JT = new JTextField(5);
           Sugar_JT = new JTextField(5);
           Tea_Bags_JT = new JTextField(5);
           Instant_Coffee_JT = new JTextField(5);
           Bread_JT = new JTextField(5);
           Sausage_JT = new JTextField(5);
           egg_JT = new JTextField(5);
           milk_JT = new JTextField(5);
           potatoes_JT = new JTextField(5);

           //initialize text field to 0
           baked_beans_JT.setText("0");
           Cornflakes_JT.setText("0");
           Sugar_JT.setText("0");
           Tea_Bags_JT.setText("0");
           Instant_Coffee_JT.setText("0");
           Bread_JT.setText("0");
           Sausage_JT.setText("0");
           egg_JT.setText("0");
           milk_JT.setText("0");
           potatoes_JT.setText("0");

         public double getBeanqty(){

             return Double.parseDouble(baked_beans_JT.getText());
         }

           //set Layout manager
           setLayout(new GridLayout(10, 1));

           //create border and panel title

          setBorder(BorderFactory.createTitledBorder("Amount"));

          //add text fields to the panel.
          add(baked_beans_JT);
          add(Cornflakes_JT);
          add(Sugar_JT);
          add(Tea_Bags_JT);
          add(Instant_Coffee_JT);
          add(Bread_JT);
          add(Sausage_JT);
          add(egg_JT);
          add(milk_JT);
          add(potatoes_JT);

       }

} 
```

我遇到了问题`items = new Grocery_items(qty);`

因此，在代码中，每个获得 qty 的地方都有一条错误消息。请帮忙

当烘焙豆复选框被选中时，我希望输入到 jtextfield (Beanqty) 中的数字乘以烘焙豆复选框。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:55:03.157

类中存在编译错误`Grocery_Items`。您已评论该`qty`字段：

```
// private quantitypanel qty; // A panel for quantity 
```

删除评论

```
private quantitypanel qty; // A panel for quantity 
```

并且您不会再*附加任何错误消息 [qty]*。

# actionscript-3 - 在 as3 中随机化调用变量的顺序

> ID：15928913
> 
> 赞同：0
> 
> 时间：2013-04-10T14:38:16.973
> 
> 标签：actionscript-3, flash, text-files, cs4

我正在创建一个测验风格的 FlashCS4 应用程序。这些问题存储在一个单独的文本文件中，并通过 as3 调用到程序中。这一切都很好，但是我想知道如何随机化这些数据，但要确保同一个问题不会被拉两次。

例如，当我导航到问题页面时，我可以显示问题的每个部分（答案 a、b、c、d + 问题本身），然后可以进行 10 次。

我要做的是让这 10 个问题从我在文本文件中的（27 个？）问题中随机生成。

```
 import flash.geom.Transform;
    import flash.geom.ColorTransform;
    import fl.motion.Color;

var glowFilter:GlowFilter = new GlowFilter(0x000000, 1, 2, 2, 10, 3)
var questionNumber:int = 0;
var totalCorrect:int = 0;
var selectedAnswer:String;
var checkAnswer:String;
var correctAnswer:String;
var questionCount:int = 0;
var numberOfQuestions:int = 10;
txt_loggedin_Question.text = (userName);

//Displays the Question Number which is called in from XML
txt_QuestionNumber.text = ("Question #"+questions[questionNumber].ref +" of"+numberOfQuestions);

function CheckAnswer() {
if (selectedAnswer == correctAnswer){
    totalCorrect = totalCorrect + 1;
    trace("Correct");
}else{
        totalCorrect = totalCorrect;
        trace("incorrect");
    }

            questionNumber = questionNumber + 1;    
            questionCount = questionCount + 1;  

    //Random questions set up new variable questioncount
    if (questionCount == numberOfQuestions){
        trace("we are at 10");
        gotoAndStop (1, "Result");
        //STOP RUN NEXT SCENE
    }else{
        setUpQuestions()
    } 
```

缺少相当多的代码，但我希望这涵盖了要点，该文件在单独的页面上调用，

```
var questions:Array = [ ];

var request:URLRequest = new URLRequest("1.txt");
var loader:URLLoader = new URLLoader(request);

loader.addEventListener(Event.COMPLETE, completeHandler);

function completeHandler(event:Event):void
{
// loader data - the questions.txt file
var data:String = event.target.data;
// split data by newline for each question
var lines:Array = data.split("\n");

// for every line
for each (var line:String in lines)
{
    // split line by "||" delimiter
    var question:Array = line.split("||");

    // add the question to the questions array:
    questions.push({ref: question[0],
                    question: question[1],
                    answerA: question[2],
                    answerB: question[3],
                    answerC: question[4],
                    answerD: question[5],
                    answerE: question[6],
                    correct: question[7],
                    answer: question[8],
                    type: question[9],
                    file: question[10]});
}

} 
```

所有这些都有效，但我唯一苦苦挣扎的是每次加载场景时从文本文件中随机生成问题。很抱歉这个冗长的问题。

谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T16:43:27.363

以下是您需要执行的步骤：

将您的问题列表作为一个名为“orderedQuestions”的数组获取。

创建第二个名为“shuffledQuestions”的空数组。

创建while循环：

```
while(orderedQuestions.length > 0){
     shuffledQuestions.push(orderedQuestions.splice(Math.floor(Math.random()*orderedQuestions.length),1));
} 
```

该循环从排序列表中随机删除一个问题并将其添加到打乱列表中。完成后，您的排序列表将为空，并且 shuffledQuestions 将以随机顺序添加所有问题。

# android - 由于 Android NDK 的 UnsatisfiedLinkError 导致 ExceptionInInitializerError

> ID：15928918
> 
> 赞同：1
> 
> 时间：2013-04-10T14:38:29.553
> 
> 标签：android, opencv, android-ndk

当我使用 NDK + Android + JNI + OPENCV4ANDROID(2.4.2) 时，出现以下错误：

```
Caused by: java.lang.UnsatisfiedLinkError: Cannot load library: reloc_library[1312]:  2586 cannot locate '_ZN2cv3Mat8copySizeERKS0_'... 
```

我搜索时找不到任何有用的东西。

这是日志猫：

```
04-10 12:05:19.960: E/AndroidRuntime(11567): FATAL EXCEPTION: main
04-10 12:05:19.960: E/AndroidRuntime(11567): java.lang.ExceptionInInitializerError
04-10 12:05:19.960: E/AndroidRuntime(11567):    at java.lang.Class.newInstanceImpl>(Native Method)
04-10 12:05:19.960: E/AndroidRuntime(11567):    at java.lang.Class.newInstance(Class.java:1409)
04-10 12:05:19.960: E/AndroidRuntime(11567):    at android.app.Instrumentation.newActivity(Instrumentation.java:1021)
04-10 12:05:19.960: E/AndroidRuntime(11567):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1565)
04-10 12:05:19.960: E/AndroidRuntime(11567):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1667)
04-10 12:05:19.960: E/AndroidRuntime(11567):    at android.app.ActivityThread.access$1500(ActivityThread.java:117)
04-10 12:05:19.960: E/AndroidRuntime(11567):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:935)
04-10 12:05:19.960: E/AndroidRuntime(11567):    at android.os.Handler.dispatchMessage(Handler.java:99)
04-10 12:05:19.960: E/AndroidRuntime(11567):    at android.os.Looper.loop(Looper.java:130)
04-10 12:05:19.960: E/AndroidRuntime(11567):    at android.app.ActivityThread.main(ActivityThread.java:3691)
04-10 12:05:19.960: E/AndroidRuntime(11567):    at java.lang.reflect.Method.invokeNative(Native Method)
04-10 12:05:19.960: E/AndroidRuntime(11567):    at java.lang.reflect.Method.invoke(Method.java:507)
04-10 12:05:19.960: E/AndroidRuntime(11567):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:907)
04-10 12:05:19.960: E/AndroidRuntime(11567):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:665)
04-10 12:05:19.960: E/AndroidRuntime(11567):    at dalvik.system.NativeStart.main(Native Method)
04-10 12:05:19.960: E/AndroidRuntime(11567): Caused by: java.lang.UnsatisfiedLinkError: Cannot load library: reloc_library[1312]:  2586 cannot locate '_ZN2cv3Mat8copySizeERKS0_'...
04-10 12:05:19.960: E/AndroidRuntime(11567):    at java.lang.Runtime.loadLibrary(Runtime.java:434)
04-10 12:05:19.960: E/AndroidRuntime(11567):    at java.lang.System.loadLibrary(System.java:554)
04-10 12:05:19.960: E/AndroidRuntime(11567):    at com.amani.main.chooser.<clinit>(chooser.java:139)
04-10 12:05:19.960: E/AndroidRuntime(11567):    ... 15 more 
```

为什么我得到一个`UnsatisfiedLinkError`？

# jquery - Joomla - 内容中包含电子邮件地址的 Ajax 内容会自动转换为链接并中断页面

> ID：15928920
> 
> 赞同：0
> 
> 时间：2013-04-10T14:38:41.583
> 
> 标签：jquery, ajax, joomla

我已经在 joomla 中建立了一个完整的 ajax 网站，但是每当我在内容中插入电子邮件地址时都会遇到问题。

电子邮件地址会自动转换为超链接，因此在没有 css 的情况下加载时会完全破坏页面，只有带有超链接电子邮件地址的白色背景。

即使有一个超链接的电子邮件地址，他们为什么会破坏一个 ajax 加载的页面？

```
function getTheAjax(loadUrl){

                $("#ajax_p .container ").html(ajax_load).load(loadUrl); 

            } 
```

ajax_load 是图像的 html

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:07:44.790

我禁用了 joomla 电子邮件隐藏插件，瞧，所有这些都已修复

# java - CGLib - 控件实例创建

> ID：15928921
> 
> 赞同：0
> 
> 时间：2013-04-10T14:38:44.903
> 
> 标签：java, cglib

我正在使用 CGLib 来增强 A 类。

```
public class A { 
   public void printName(){
       System.out.println("guy");
   }
} 
```

我有 B 类，它扩展了 A 类。

```
public class B extends A{ 
  public void printName(){
      System.out.println("someone else!");
  }
} 
```

当我增强它时，如何告诉 CGLib 实例化 B 而不是 A？

```
public A getEnhancedClass( boolean trueIfIWantBInsteadOfA ){
    e.setSuperclass( A.class ); // cannot change this
    e.setCallback( createDummyInterceptor() );// an interceptor that just invokesSuper
    /// ... missing code here
    return (A) e.create()
} 
```

以下代码应打印“其他人！”

```
getEnhancedClass( true ).printName(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-01T12:30:44.547

Cglib 创建`Enhancer#setSuperclass`. 如果子类`A`化，代理甚至不知道`B`. 也许您想创建一个惰性代理？然后你可能想看看`LazyLoader`or`Dispatcher`回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-22T07:20:55.933

也许您需要拦截构造函数并返回 B 的实例，而不是调用 A 构造函数。

# c++ - 为什么 enable_shared_from_this 无法直接访问嵌入的weak_ptr？

> ID：15928924
> 
> 赞同：2
> 
> 时间：2013-04-10T14:38:47.490
> 
> 标签：c++, shared-ptr, boost-signals2

我想在多线程应用程序中使用带有自动连接管理的 boost signals2。我的类继承自`enable_shared_from_this<>`，我想从另一个成员方法中连接一个成员方法。连接可能会经常重建，因此我的代码应该尽可能快（尽管提升了信号2性能本身）：

```
typedef boost::signals2::signal<void ()> signal_type;

struct Cat : public enable_shared_from_this<Cat>
{
  void meow ();

  void connect (signal_type& s)
  {
    // can't write this
    s.connect (signal_type::slot_type (&Cat::meow, this, _1).track (weak_from_this ()));

    // ok, but slow?! two temporary smart pointers
    weak_ptr<Cat> const myself (shared_from_this ());
    s.connect (signal_type::slot_type (&Cat::meow, this, _1).track (myself));
  }

  // i am missing something like this in the base class
  // protected:
  //   weak_ptr<Cat> const& weak_from_this ();
}; 
```

我知道我的设计目标可能是冲突的（自动连接管理和线程安全以及快速代码），但无论如何：

1.  为什么`enable_shared_from_this<>`缺乏对嵌入式的直接访问`weak_ptr<>`？我看不到相反的理由。没有和我类似的用例吗？

2.  有比上述更快的解决方法吗？

编辑：

我知道我可以这样做，但我想避免额外的存储/初始化检查惩罚：

```
template <typename T>
struct enable_weak_from_this : public enable_shared_from_this<T>
{
protected:
  weak_ptr<T> /* const& */ weak_from_this ()
  {
    if (mWeakFromThis.expired ())
    {
      mWeakFromThis = this->shared_from_this ();
    }

    return mWeakFromThis;
  }

private:
  weak_ptr<T> mWeakFromThis;
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:13:04.367

您无权访问的原因`weak_ptr`是`enable_shared_from_this`不必*使用 one*。拥有 a`weak_ptr`只是 的一种*可能*实现`enable_shared_from_this`。它不是唯一的。

由于`enable_shared_from_this`是与 相同的标准库的一部分，`shared_ptr`因此可以使用比直接存储`weak_ptr`. 委员会不想阻止这种优化。

> // 好的，但是慢？！两个临时智能指针

这只是一个临时智能指针。复制省略/移动应该处理除第一个对象之外的任何内容。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-10T15:00:58.170

这可能是因为没有`shared_ptr`引用该`Cat`实例。`weak_ptr`要求至少有一个 active `shared_ptr`。

尝试放置一个`shared_ptr`作为成员变量并在`connect`方法中首先分配给它：

```
typedef boost::signals2::signal<void ()> signal_type;

struct Cat : public enable_shared_from_this<Cat>
{
  void meow ();
  boost::shared_ptr<Cat> test;

  void connect (signal_type& s)
  {
    test = shared_from_this();
    s.connect (signal_type::slot_type (&Cat::meow, this, _1).track (weak_from_this ()));
  }
}; 
```

但基本上，`weak_ptr`如果没有，就不可能有`shared_ptr`。如果在仍在使用时全部`shared_ptr`消失，则可能指向不存在的对象。`weak_ptr``weak_ptr`

注意：我的测试不应该在生产代码中使用，因为它会导致对象永远不会被释放。

# makefile - LFS 7.2 glibc-2.16.0 出错

> ID：15928925
> 
> 赞同：1
> 
> 时间：2013-04-10T14:38:47.917
> 
> 标签：makefile, ld, glibc, linux-from-scratch, libgcc

我正在构建一个 LFS 系统（参考 LFS 7.2）

在构建 glibc-2.16.0 时出现此错误：

```
/mnt/lfs/tools/bin/../lib/gcc/i686-lfs-linux-gnu/4.7.1/../../../../i686-lfs-linux-gnu/bin/ld: cannot find -lgcc_s
collect2: error: ld returned 1 exit status
make[2]: *** [/mnt/lfs/sources/glibc-build/iconv/iconvconfig] Error 1
make[2]: Leaving directory `/mnt/lfs/sources/glibc-2.16.0/iconv'
make[1]: *** [iconv/others] Error 2
make[1]: Leaving directory `/mnt/lfs/sources/glibc-2.16.0'
make: *** [all] Error 2
lfs:/mnt/lfs/sources/glibc-build$ 
```

我将 libgcc_s 文件放在三个不同的位置：

```
/usr/lib/libgcc_s-4.7.0-20120507.so.1
/usr/lib/libgcc_s.so.1
/usr/lib/gcc/i686-redhat-linux/4.7.0/libgcc_s.so 
```

我尝试覆盖 LDFLAGS 变量但没有成功。任何人都可以帮我解决这个问题。还是我错过了什么？我不知道。请各位大侠帮忙

我的主机系统是 Fedora 17。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T10:38:29.577

您需要设置`LD_LIBRARY_PATH`变量。LD_LIBRARY_PATH 是一组以冒号分隔的目录，应首先在其中搜索库，然后是标准目录集。 `LDFLAGS`将包含传递给链接器的选项。

可能的问题是您`/usr/lib/gcc/i686-redhat-linux/4.7.0`在`LD_LIBRARY_PATH`. 除非您的 LD_LIBRARY_PATH 中有指向其中一个`/usr/lib/`的符号链接，否则不应选择其中提到的其他两个库。`libgcc_s.so`

# c - 将字符存储在数组段错误中

> ID：15928928
> 
> 赞同：1
> 
> 时间：2013-04-10T14:38:51.063
> 
> 标签：c, char, segmentation-fault

我的代码出现段错误，我不知道为什么。我通读一个文件并计算行数，以便动态分配我的数组。然后我倒带文件，读取文件中的数据，将数据存储到变量中，然后将读取的变量存储到数组中，但是我遇到了字符问题。

```
 ...
   char *aname = malloc(sizeof(char) * 3); 
   ... 
   // get # lines in file (count)
   ... 
   char *aname_seen = malloc(count * (sizeof(char) * 3));
   ...
   rewind(file);
   while (fgets(buff, sizeof buff, file) != NULL) 
   {
      if (sscanf(buff, "%s %d %s %s %d %lf %lf %lf %lf %lf\n", 
         atm, &serial, aname, resName, &resSeq, &x, &y, &z, 
         &occupancy, &tempFactor) == 10)
      {
         aname_seen[i] = *aname;
         printf("%d: %s vs %s\n", i, aname, aname_seen[i]);

         i++;

      } // end sscanf if-loop

   } // end while loop 
```

我可以打印 aname`printf("%d: %s\n", i, aname)`并获得预期的输出，但是`Segmentation fault (core dumped)`当我尝试`printf("%d: %s vs %s\n", i, aname, aname_seen[i])`.

这个 while 循环 + 嵌套 if 循环与我用来计算行数的约定相同，因此`i`将递增到 count。我是否错误地分配了 aname_seen 而实际上并没有给它提供元素`count`数量？`char*3`我不太擅长弄乱char。更多的数字fortran buff，所以我需要一些指导。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:44:17.077

格式说明`%s`符应该对应于一个`char *`参数。在您的情况下，`aname_seen[i]`是 a `char`，它被提升为 an`int`以传递给可变参数函数 ( `printf`)。一个`int`不是一个`char *`。

也许您的意思是其中之一：

```
printf("%d: %s vs %c\n", i, aname, aname_seen[i]);
printf("%d: %s vs %s\n", i, aname, &aname_seen[i]); 
```

如果这些都不能解决你的问题，请准确解释你期望从这个表达式中得到的行为，并给我们一个最小的、可编译的测试用例。您当前的测试用例不可编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:45:37.273

你定义的方式`aname_seen`是指向 char 数组的指针

```
char *aname_seen = malloc(count * (sizeof(char) * 3)); 
```

`aname_seen[i]`一个也是`char`

所以

```
printf("%d: %s vs %s\n", i, aname, aname_seen[i]); 
```

应该

```
printf("%d: %s vs %c\n", i, aname, aname_seen[i]); 
```

# windows - 在记事本中打开ini文件和配置文件的VBScript

> ID：15928932
> 
> 赞同：0
> 
> 时间：2013-04-10T14:39:02.157
> 
> 标签：windows, networking, vbscript, config, ini

我在医院环境中工作，现在我正在做 PC 部署。部分部署要求我们查看网络驱动器上的 2 个文件，以查找有关旧系统的信息。他们使用特定的端口和/或 TTY 来查看每个部门的信息。

我正在尝试创建一个可以在 2 个不同的记事本窗口中打开 2 个文件的 VBS 文件。第一个打开但 pcview.cfg 不断给我一个错误。我试图链接到 HBOWEM32 指向的同一位置。谁能解决？出于安全原因，我已取出网络驱动器的确切位置。下面的代码提示输入一个特定的文件夹名称，它是旧的电脑名称。输入该数据后，它会很好地打开 HBOWEM32 文件，但说找不到另一部分。我已经手动查看了文件夹内部并且 pcview.cfg 文件确实存在。我只是想要一种更快的方法来打开这些，而不是通过运行提示进行暴力破解。

这是代码。

```
CONST strDir = "<Netowrk Location)"
Dim WshShell

set objShell = CreateObject("WScript.Shell")
set objFSO = CreateObject("Scripting.FileSystemObject")

function findFolder(strDir, strFlag)
    set objFolder = objFSO.GetFolder(strDir)
    for each objSubFolder in objFolder.SubFolders
        if (inStr(objSubFolder.Name, strFlag)) then
            findFolder = objSubFolder.Path
            exit function
        else        
            findFolder = findFolder (objSubFolder.Path, strFlag)
        end if
   next
end function

strFlag = inputBox("Enter Computer Name:")
strWeb = findFolder(strDir, strFlag) & "\HBOWEM32.ini"
objShell.Run strWeb

Set WshShell = CreateObject ("WScript.Shell")
WshShell.Run ("notepad.exe """ + "\\<same location as above>\Pcview.cfg""") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:10:46.287

1.  使用选项显式
2.  不要创建你不使用的变量（WshShell、objShell）
3.  改进您的变量名称（strFlag 似乎是计算机名称，strWeb 似乎是文件的完整规范）
4.  不要将不同的信息集中到一个变量中（strWeb 包含要重用的文件夹路径和特定的文件名）
5.  使用诊断输出（至少在开发时）

在代码中：

```
Option Explicit
...    
Dim strComputer : strComputer = InputBox("Enter Computer Name:")
Dim strFolder   : strFolder   = findFolder(strDir, strComputer) 
Dim strIniFSpec : strIniFSpec = objFSO.BuildPath(strFolder, "HBOWEM32.ini")
WScript.Echo "will run '" & strIniFSpec & "'"
objShell.Run strIniFSpec

Dim WshShell    : Set WshShell = CreateObject("WScript.Shell")
Dim strCfgFSpec : strCfgFSpec  = objFSO.BuildPath(strFolder, "Pcview.cfg")
Dim strCmd      : strCmd       = "notepad.exe """ & strCfgFSpec & """"
WScript.Echo "will run '" & strCmd & "'"
WshShell.Run strCmd 
```

（未测试，请慎重）

# jquery - 将鼠标悬停在父 div 上时切换跨度文本

> ID：15928933
> 
> 赞同：0
> 
> 时间：2013-04-10T14:39:03.230
> 
> 标签：jquery

我试图在将鼠标悬停在 div 上时切换它的跨度文本。我希望这个函数可以处理多个 div，每个 div 都有自己的文本，所以我为每个 div 创建了一个 ID，但它们共享类 .square 。我尝试了多种变体，包括`$('span",this).toggle`但`$(this).children().toggle();`似乎没有任何效果。我确信在将示例翻译成我自己的代码时我错过了一些小东西，但我一生都无法弄清楚是什么。谢谢你的帮助。

目前我的代码如下所示：

HTML

```
<div id="B1" class="square">
    <span class="details">This is square 1</span>
</div>
<div id="B2" class="square">
    <span class="details">This is square 2</span>
</div> 
```

CSS

```
 .square{
height:100px;
width:100px;
background-color:#0AA0AB;
color:#FFFFFF;
cursor:pointer;
text-align:center;
margin-left:10px;
display:inline-block;
} 
```

jQuery

```
 $('.square').hover(function() {
    $(this).children().toggle();
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:47:35.610

尝试这个：

```
$('.square').hover(function () {
    $(this).children('.details').toggle();
}, function () {
    $(this).children('.details').toggle();
}); 
```

[**在这里演示**](http://jsfiddle.net/2VQF6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:44:55.687

你可以试试

```
$('span',$(this)).toggle(); // Note the $() around the this 
```

但也许 CSS 就足够了（如果我正确理解了这个问题:)）：

```
.square > span {display:none;}
.square:hover > span {display:inline;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:42:01.903

您可以使用[toggleClass](http://api.jquery.com/toggleClass/)：

```
$('.square').hover(function() {
    $(this).children().toggleClass('square');
}); 
```

# ios - sqlite3 数据库在线存储

> ID：15928937
> 
> 赞同：0
> 
> 时间：2013-04-10T14:39:07.710
> 
> 标签：ios, database, sqlite

正如您可能从我之前的问题中看到的那样，我目前正在为学校制作一个 iOS 应用程序，我需要在线存储数据库，以便我可以从网站访问它。我不能使用 Icloud，因为在此之后我必须创建一个 android 应用程序。（我知道我可以制作一个混合应用程序，但我想去 obj-c）。所以我的问题是： `What is the easiest way to do it and which storage service is it best to use (free one)?`

我正在使用 sqlite3 数据库。

我浏览了网络试图找到简单的例子，但我找不到任何例子，所以我和你们一起试试运气，他们已经多次帮助过我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T14:47:05.183

如果您有服务器而不是根据您的需要为该返回数据创建 Web 服务。因此，您不必在 sqlite 中维护数据，而不是所有数据都将在服务器端进行管理。要做到这一点，同样的网络服务也将在 android 中有用。

您可以使用 .net 或 PHP 或任何 Web 开发语言来创建 Web 服务。

# delphi - 在 Delphi XE2 中通过 Indy 使用 curl

> ID：15928938
> 
> 赞同：0
> 
> 时间：2013-04-10T14:39:11.970
> 
> 标签：delphi, curl, delphi-xe2, indy

我正在尝试使用 IdHTTP 在 Delphi XE2 中等效此 curl 操作（已知有效）：

```
 curl http://hub.Healthdata.gov/api/action/datastore_search --data-urlencode '
 {
  "resource_id": "391792b5-9c0a-48a1-918f-2ee63caa1c54",
  "filters": {
    "provider_id": 393303
   }
   }' 
```

我已经尝试了以下代码，但它不起作用......有人可以建议正确的程序吗？它回复了错误的请求。谢谢你。

```
procedure TfrmMain.get1Click(Sender: TObject);
var
  lHTTP: TIdHTTP;
  lParamList: TStringList;
  result:string;

begin
  lParamList := TStringList.Create;
  lParamList.Add('"resource_id": "391792b5-9c0a-48a1-918f-2ee63caa1c54"');
  lParamList.Add('"filters": {"provider_id": 393303}');

  lHTTP := TIdHTTP.Create(nil);
  try
    Result := lHTTP.Post('http://hub.Healthdata.gov/api/action/datastore_search --data-urlencode ',
     lParamList);
  finally
    FreeAndNil(lHTTP);
    FreeAndNil(lParamList);
  end;
end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T19:19:06.360

该`--data-urlencode`参数不是 URL 的一部分，它只是告诉 curl 如何编码要发布的数据，因此您根本不传递该部分`TIdHTTP`。

单引号之间的 curl 命令部分是要发布的实际数据。 告诉 curl 使用 HTTP方法`--data-urlencode`发送数据，使用内容类型，并对数据进行 url 编码。`POST``application/x-www-form-urlencoded`

的`TStrings`版本`TIdHTTP.Post()`完成了所有这些。通常，`application/x-www-form-urlencoded`与“name=value”字符串对一起使用，但是 curl 命令中没有指定名称，只有一个值。如果 curl 提供默认名称，那么 Delphi 代码将如下所示：

```
procedure TfrmMain.get1Click(Sender: TObject);
var
  json: string;
  lHTTP: TIdHTTP;
  lParamList: TStringList;
  result:string;
begin
  json := CRLF +
          '{' + CRLF +
          ' "resource_id": "391792b5-9c0a-48a1-918f-2ee63caa1c54",' + CRLF +
          ' "filters": {' + CRLF +
          '   "provider_id": 393303' + CRLF +
          ' }' + CRLF +
          '}';
  lParamList := TStringList.Create;
  try
    lParamList.Add('somename='+json);
    lHTTP := TIdHTTP.Create(nil);
    try
      Result := lHTTP.Post('http://hub.Healthdata.gov/api/action/datastore_search', lParamList);
    finally
      lHTTP.Free;
    end;
  finally
    lParamList.Free;
  end;
end; 
```

否则，如果 curl 本身按原样发送指定的数据，则 Delphi 代码将如下所示：

```
procedure TfrmMain.get1Click(Sender: TObject);
var
  json: string;
  lHTTP: TIdHTTP;
  lParamList: TStringList;
  result:string;
begin
  json := CRLF +
          '{' + CRLF +
          ' "resource_id": "391792b5-9c0a-48a1-918f-2ee63caa1c54",' + CRLF +
          ' "filters": {' + CRLF +
          '   "provider_id": 393303' + CRLF +
          ' }' + CRLF +
          '}';
  lParamList := TStringList.Create;
  try
    lParamList.Add(json);
    lHTTP := TIdHTTP.Create(nil);
    try
      Result := lHTTP.Post('http://hub.Healthdata.gov/api/action/datastore_search', lParamList);
    finally
      lHTTP.Free;
    end;
  finally
    lParamList.Free;
  end;
end; 
```

唯一的区别是传递给什么参数值`TStringList.Add()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T18:55:23.177

它们不是 URL 参数，它`POST`只是 URL 编码的正文的一部分。

您可能需要对 JSON 字符串进行编码并将其写入流，`TMemoryStream`然后调用：

```
TIdHTTP.Post(url,stream); 
```

# c++ - 用cmake将第三方静态库组合成独立的静态库？

> ID：15928941
> 
> 赞同：4
> 
> 时间：2013-04-10T14:39:21.707
> 
> 标签：c++, linker, cmake, static-linking

所以我有，比如说，`libA.a libB.a libC.a libD.so`还有一些链接到`libPack.a`. 稍后，我将创建`libFinal.so`链接到 libPack.a 的链接，并且 libFinal.so 最终用于可执行文件。

当链接器创建静态库时，我相信每个动态库都会在编译时解析并包含在静态库中。`-fPIC`对于 ( ) 第三方静态库，它是否也能做到这一点？

如何`libFinal.so`使用 CMake 将一堆静态库和共享库组合成一个巨大的独立库？如果这不可能，是否意味着我必须向客户端提供所有 lib 依赖项？

我已经设法让可执行文件与一个没有依赖项（没有`libA...D`）的虚拟库一起工作，但是当我使用链接到`libA..D`. 我的猜测是静态库不包含在内`libPack.a`，但我不确定发生了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T18:22:47.047

以下答案可能有用： [如何将多个 C/C++ 库合并为一个？](https://stackoverflow.com/questions/13128/how-to-combine-several-c-c-libraries-into-one) 并 [合并多个 .so 共享库](https://stackoverflow.com/questions/915128/merge-multiple-so-shared-libraries)

如果这满足您的需求，您可以配置 CMake 脚本以将预链接事件添加到项目中，该事件将库组合到 libFinal.so 中，并将 libFinal.so 进一步链接到可执行文件。

# paypal-ipn - 贝宝 IPN 噩梦

> ID：15928942
> 
> 赞同：0
> 
> 时间：2013-04-10T14:39:28.710
> 
> 标签：paypal-ipn

我已经设置了一个 IPN 监听器。我从 PayPal 开发人员那里抛出了一个测试 IPN - 它说它已成功发送，但没有出现在任何 IPN 历史页面中......所以我看不出它是否正常工作。

有人知道我做错了什么吗？

西蒙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T17:10:48.343

尝试在测试沙盒卖家账户上设置 IPN，然后使用您的沙盒买家账户进行测试付款。然后您应该能够登录到测试沙盒卖家帐户并查看 IPN 历史记录，看看它是否正在发送以及返回什么状态码。此外，这里还发布了一些[故障排除提示](https://stackoverflow.com/questions/15778567/notify-url-never-call-when-buyer-paid-for-subscription/15788965#15788965)，可能有助于解决问题，具体取决于进一步调查后发生的具体情况。

# r - 在依赖于不同子字符串的单独列中创建值

> ID：15928943
> 
> 赞同：1
> 
> 时间：2013-04-10T14:39:30.580
> 
> 标签：r, calculated-columns

`melt`在使用一些宽格式数据后，我在 R 中有以下数据框：

```
Condition value
C1SSC     4.5
C2SSC     7.7
TC1SSC    6.0
TC2SSC    7.3
PC1SSC    4.5
PC2SSC    5.7 
```

每个字符或子字符串都有特定的含义（例如，TC2SSC 表示用双眼查看带纹理的 [T] 圆 [C] [2]，响应“起始形状”是圆 [SSC]）。

我想要做的是生成新的变量列，这些列依赖于这些字符和子字符串——一个用于纹理，一个用于形状等等。我考虑过使用`grepl`or `substr`，但我不确定它们是否可以评估字符串的特定部分（即在确定形状时，检查前两个字符以查看它们是否包含“C”）。

理想情况下，这就是我最终的结果（TC2SSC 的示例）：

```
Texture    Shape    View    startShape    value
T          Circle   2       Circle        4.5 
```

有很多有用的功能，但我不确定这里最好使用哪个。任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T15:28:52.267

这是解决问题的直接方法。基本上，使用模式 with`gsub`在要“拆分”的每个字符（此处为“_”）之后插入一个字符，然后`strsplit`在其上使用。就是这样：

```
split.df <- data.frame(do.call(rbind, strsplit(gsub("(C|SSC|[0-9]+)", "_\\1_", 
                      dt$Condition), "[_]+")), stringsAsFactors=FALSE)

#   X1 X2 X3  X4
# 1     C  1 SSC
# 2     C  2 SSC
# 3  T  C  1 SSC
# 4  T  C  2 SSC
# 5  P  C  1 SSC
# 6  P  C  2 SSC 
```

现在，剩下的就很简单了（更改名称、转换类并将 C 替换为圆形等。）

```
names(split.df) <- c("Texture", "Shape", "View", "startShape")
split.df <- within(split.df, { Shape[Shape == "C"] <- "Circle" 
            View <- as.numeric(View)
            startShape[startShape == "SSC"] <- "Circle"} )
cbind(split.df, value = df$value)

#   Texture  Shape View startShape df$value
# 1         Circle    1     Circle      4.5
# 2         Circle    2     Circle      7.7
# 3       T Circle    1     Circle      6.0
# 4       T Circle    2     Circle      7.3
# 5       P Circle    1     Circle      4.5
# 6       P Circle    2     Circle      5.7 
```

# mysql - SQL SELECT查询在mysql中不起作用

> ID：15928944
> 
> 赞同：0
> 
> 时间：2013-04-10T14:39:35.943
> 
> 标签：mysql, sql, mysql-workbench

我有一个 sql 查询：

`SELECT * FROM presentations_db.presenters_tbl WHERE e-mail LIKE '%@%';`

它似乎不起作用，我不知道为什么。如果我删除 WHERE 部分它可以工作，但包括所有记录。我只想要有电子邮件地址的记录。我正在使用 mysql 工作台。电子邮件字段是 VARCHAR(45)。看起来很简单，但不是……没有反馈或错误消息。结果列表甚至没有打开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T14:40:17.517

您必须用反引号将列名括起来以避免语法错误。

```
SELECT * FROM presentations_db.presenters_tbl WHERE `e-mail` LIKE '%@% 
```

如果您不使用反引号将其包装起来，它将执行算术运算：

> ****从e**中减去**邮件****

 ****导致您收到此错误消息：`Unknown column 'e' in 'where clause'`

* * *

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/00589/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:42:29.547

你的查询是对的，只需替换这个

```
 e-mail 
```

这样

```
 `e-mail` 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T06:53:31.557

除了带有反引号或双引号的必需引用（如果启用了 ANSI 引用），我将更改 where 子句：

```
SELECT * FROM presentations_db.presenters_tbl WHERE `e-mail` IS NOT NULL; 
```

因为您想要的只是具有电子邮件集的记录。但是，它不检查地址的有效性。****

# php - php从mysql打印在线用户名

> ID：15928945
> 
> 赞同：0
> 
> 时间：2013-04-10T14:39:39.970
> 
> 标签：php, mysql, list

我正在尝试将在线和离线用户列表添加到我的网页。我正在运行一种游戏服务器。我在数据库身份验证中有一个列，在表帐户中。

我想要一个在线标题：然后是在线用户列表，然后是离线标题：然后是离线用户

我还想显示在线和离线帐户的数量。

我在这方面很差，但我已经设法为一个用户帐户做到了，但不是只检查一个用户是否在线，我希望它检查每个人。我这样做的方式是我必须手动为数据库中的每个帐户重复此代码。这是我得到的：

```
$DBTYPE = 'mysql';
$DBHOST = '127.0.0.1';
$DBUSER = 'root';
$DBPASSWORD = 'password';
$DBNAME = 'auth';

$link = mysql_connect($DBHOST, $DBUSER, $DBPASSWORD);
mysql_select_db($DBNAME);
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
$member_id= '1'; // get value of the member, assumed that you have post the data into id. change if it is different into your code

$result = mysql_query("SELECT * FROM account where id=$member_id");

while($row = mysql_fetch_assoc($result))
{
     if($row['online'] == '1')
     {
        $usernameon = ($row['username']);
     }
     else
     {
        $usernameoff = ($row['username']);
     }
}

$onlineppl="<FONT COLOR=green>[*]Online players:</b></FONT><br />";
echo $onlineppl;
echo $usernameon;
?>
<br />
<br />
<?php
$offlineppl="<FONT COLOR=red>[*]Offline players:</b></FONT><br />";
echo $offlineppl;
if($usernameoff == '');
$usernameoff="We're all online";
echo $usernameoff; 
```

我知道肯定有更好、更清洁的方法来做这件事，但我还不知道吗？有什么建议么？？:) 我很确定 if 命令也是错误的，但我希望有人也能解决这个问题:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:47:11.233

尝试：

```
$sql = "SELECT username, online FROM ..."
$result = mysql_query($sql) or die(mysql_error());
$users = array();
while($row = mysql_fetch_assoc($result)) {
   $users[$row['online']][] = $row['username'];
}

$online = count($users[1]);
$offline = count($users[0]); // or whatever value you assign to offline users

$online_list = implode(',' $users[1]);
$offline_list = implode(',', $users[0]); 
```

注意事项：

`select *`1）当您只需要表中的几个字段时不要这样做。select * 强制数据库获取整行，然后你丢弃几乎所有的数据。

2）注意获取循环内部。它自动构建了一系列离线和在线人员，无需手动检查在线字段。只需构建数组，然后计算其内容。如果您这样做纯粹是为了获得在线/离线计数，那么您甚至不会这样做 - 您将让数据库进行计数并简单地返回结果。永远不要在没有数据时将数据吸入 PHP。这是对 CPU 时间和内存的浪费。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:50:03.650

```
<?php
$DBTYPE = 'mysql';
$DBHOST = '127.0.0.1';
$DBUSER = 'root';
$DBPASSWORD = 'password';
$DBNAME = 'auth';

$link = mysql_connect($DBHOST, $DBUSER, $DBPASSWORD);
mysql_select_db($DBNAME); 
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
//$member_id= '1'; // get value of the member, assumed that you have post the data into id. change if it is different into your code

$result = mysql_query("SELECT * FROM account);

$totonline=0;
$totoffline=0;
while($row = mysql_fetch_assoc($result))
{
     if($row['online'] == '1')
     {
        $usernameon .= "<div>".$row['username']."</div>";

        $totonline++;
     }
     else
     {
        $usernameoff .= "<div>".$row['username']."</div>";
        $totoffline++;
     }
}

$onlineppl="<FONT COLOR=green>[*]Online players: Total:".$totonline."</b></FONT><br />";
echo $onlineppl;
echo $usernameon;
?>
<br />
<br />
<?php
$offlineppl="<FONT COLOR=red>[*]Offline players:  Total:".$totoffline."</b></FONT><br />";
echo $offlineppl;
if($usernameoff == '');
$usernameoff="We're all online";
echo $usernameoff;
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:44:54.037

首先：这不是一个“请做我的工作”的网站。网上有很多这样的例子。

无论如何：

```
$result = mysql_query("SELECT * FROM account");
$users = array("offline" => array(), "online" => array());
while($row = mysql_fetch_assoc($users))
{
  if ($row['online'] == 1)
    $users['online'][] = $row['username']
  else
    $users['offline'][] = $row['username']
} 
```

现在 $users 包含离线用户和在线用户的列表。我你无法让它工作，运行一些 PHP 教程。

# javascript - 模型中的主干集合 + 使用 Node.js 的 restful 服务器设计

> ID：15928948
> 
> 赞同：4
> 
> 时间：2013-04-10T14:39:53.697
> 
> 标签：javascript, node.js, backbone.js, backbone.js-collections

我正在尝试使用 Backbone 为客户端和 Node.js 为服务器开发一个简单的文件浏览器。目前，当涉及到子文件夹时，我非常纠结于如何设计模型

客户端代码看起来像

```
app.MyFile = Backbone.Model.extend({
    defaults: {
        path: '', // id of the model will be the path + filename
        content: '', // content of the file
        isDir: false // if file is a directory
    }
});

var MyFileList = Backbone.Collection.extend({
  model: app.MyFile,
  url: '/api/files'
});

// create global collection of files
app.MyFiles = new MyFileList();

// displays file name
var MyFileItemView = Backbone.View.extend({
    events: {
      'click .clickable': 'view'
    },

    ...

    view: function (source) {
        if (this.model.toJSON().isDir) {
            this.model.fetch();
            // XXX what to do here

            _.each(this.model.get('content'), function (obj) {
               console.log(obj.toJSON()); // error - no toJSON method
            });

        } else {
            // calls another view that calls the model.fetch 
            // to display the content (no issue here)

        }
    },
});

var MyFilesListView = Backbone.View.extend({
    initialize: function () {
      // XXX Not sure if I should listen on MyFiles collection...
      app.MyFiles.on('reset', this.render, this);
    },

    render: function () {
      app.MyFiles.each(function (file) {
        new MyFileItemView({model:file});
      }, this);

});

app.AppView = Backbone.View.extend({
  initialize: function () {
    // fetch all files
    app.MyFileList.fetch();
  }
});

// app.js (point of entry)
$(function() {
  // Kick things off by creating the **App**.
  new app.AppView();
}); 
```

我的服务器代码：

```
var express = require("express"), 

...

app.get('/api/files', function(req, res) {
    ...
    // return file list (including folder - no issue here)
}

app.get('/api/files/:id', function(req, res) {
    var fileModel = createFileModel(req.params.id); // create file model

    if (!fileModel.isDir) {
        // if file is not directory, then simply read the content and return
        // it back to the client -- no issue
        ...
    } else {
        var files = [];
        // read the directory to find all the files and push it to 
        // files array
        ...

        fileModel.content = files;
        res.send(fileModel);
    }
} 
```

目前我不确定这样做的正确方法是什么。我的问题：

1.  如何表示模型对象本身。如果我应该将内容设置为 MyFile 的集合`isDir===true`吗？如果是这种情况，我该怎么做？调用`toJSON()`模型的内容会引发异常，因为`toJSON`未定义
2.  还有关于它是否也`MyFilesListView`应该听全局集合？现在我需要处理子文件夹，这似乎不对。
3.  或者我应该在尝试查看子文件夹时覆盖全局集合？
4.  我的服务器代码实现是否正确？我现在遇到的问题是，当我将内容放入数组并将 fileModel 发送回客户端时，文件列表不会反映在模型本身中 - 也许我必须覆盖`parse`？

我在这里读了一些帖子

*   [Backbone.js 框架中相同“类”的嵌套模型？](https://stackoverflow.com/questions/9896141/nested-models-of-the-same-class-in-the-backbone-js-framework)
*   [Backbone：从服务器获取集合](https://stackoverflow.com/questions/5501562/backbone-fetch-collection-from-server)
*   [如何使用 Backbone.js 从嵌套的 JSON 构建集合/模型](https://stackoverflow.com/questions/8782619/how-to-build-a-collection-model-from-nested-json-with-backbone-js)

但我仍然不确定如何应用它...... Javascript令人困惑:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:06:23.310

您可以在单个模型中使用像这样的简单函数在模型中编写一个简单模型（您可以调用它的 xfile 模型！）：

```
 loadFolders : function() {
    if (this.get('isDir')) {
      var self = this;
      self.subFolders = [];
      _.each(self.get('files'), function(data) {
        file = new File(data);
        self.subFolders.push(file);
      });
    }
  } 
```

并在您的视图模型中执行相同操作以呈现正确的树视图。

在您的 express.js 后端（我不熟悉该框架）中，您只需将正确的 json 发送到您的骨干模型。

如果您的数据太长并且您想分别获取每个模型目录（当用户在您的视图中展开文件夹时），您可以使用相同的想法创建具有大量集合（或具有大量集合的集合）的模型，然后从模型中的服务器，后端必须支持目录，如下所示：/api/file/folder1/folder2/file1.txt

另一种更神奇的方法是使用关系模型（通过任何提供此类功能的主干扩展）

如果您想了解更多关于：

[做同样事情的 marionette.js 示例](http://lostechies.com/derickbailey/2012/04/05/composite-views-tree-structures-tables-and-more/)

[Backbone.Relational - bakcbone 的关系扩展](https://github.com/PaulUithol/Backbone-relational)

PS：我无法提供更多链接，所以你可以搜索 Backbone.associate，这是骨干网的另一个关系扩展

PS 2：您可以使用 coffeescript，它使 javascript 语法更简单、更易读。

# javascript - 如何在 Chrome 的 Elements 选项卡中设置事件监听器断点？

> ID：15928950
> 
> 赞同：19
> 
> 时间：2013-04-10T14:39:58.247
> 
> 标签：javascript, debugging, google-chrome, google-chrome-devtools

我正在努力在动态生成的 DOM 元素中设置断点，其中不同的事件处理程序也从 Javascript 绑定。这基本上意味着我有一个漂亮的 DOM 结构，它不是最初收到的 HTTP 响应的一部分，它纯粹是在客户端构建的。

现在的问题是 Chrome 的 Elements 选项卡只允许我设置断点

*   子树修改或
*   属性修改或
*   节点移除

是否可以以某种方式在动态创建的 DOM 元素的动态创建的事件侦听器中设置断点？（见附图。我想在 listenerbody 中设置断点）

![在此处输入图像描述](https://i.stack.imgur.com/Wf7rF.png)

请注意，我也不能使用“源/脚本”选项卡，因为它只显示最初收到的静态 HTTP 内容响应。而且我也不能在“事件监听器”手风琴中引用的代码中设置断点，因为它只会在事件监听器被连接时向我显示，而不是在它被触发时显示！

有任何想法吗？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-10T14:44:51.313

Sources -> Event Listener Breakpoints 包含一堆复选框，当触发事件的事件侦听器时，可以选中这些复选框以激活断点。

![](https://i.stack.imgur.com/6DrsQ.png) ![](https://i.stack.imgur.com/y1fvi.png)

# java - 如何格式化当前日期并保存到日期对象

> ID：15928952
> 
> 赞同：0
> 
> 时间：2013-04-10T14:40:00.460
> 
> 标签：java, parsing, date

我想获取当前日期并将其格式化并将其保存到日期对象中。我尝试以下代码，但收到一条错误消息，指出日期不可解析。这是我尝试过的：

```
SimpleDateFormat f = new SimpleDateFormat("d/M/yyyy");
Date date = f.parse(new Date().toString()); 
```

我需要将实际日期保留为日期对象，因为稍后其他一些代码将需要它

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:42:41.893

使用您定义的格式时，您需要将`String`值传递给`parse`遵循该模式且`new Date().toString()`绝对不遵循该`dd/MM/yyyy`模式的方法。

此外，`new Date()`已经是一个`Date`对象，您不需要将其转换为 a`String`并返回 a `Date`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T14:44:19.880

根据[`Date`类的Javadoc](http://docs.oracle.com/javase/7/docs/api/java/util/Date.html)，默认`toString()`方法总是返回格式

> dow mon dd hh:mm:ss zzz yyyy

这不是您在解析器中定义的那个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:52:47.553

> 我需要将实际日期保留为日期对象

似乎您只想要`new Date()`对象的日期部分而不是时间部分。知道了这一点，你有两条路可以走：

1.  使用纯 Java。您将需要一个日历对象：

    ```
    public Date getCurrentDate() {
        Calendar c = Calendar.getInstance();
        c.set(Calendar.HOUR, 0);
        c.set(Calendar.MINUTES, 0);
        c.set(Calendar.SECONDS, 0);
        c.set(Calendar.MILLISECONDS, 0);
        return c.getTime();
    } 
    ```

2.  [使用像Joda Time](http://joda-time.sourceforge.net/)这样可以轻松处理日期和时间的外部库：

    ```
    public Date getCurrentDate() {
        return new LocalDate().toDate();
    } 
    ```

# python - 如何使用python运行带有参数的exe文件

> ID：15928956
> 
> 赞同：22
> 
> 时间：2013-04-10T14:40:12.880
> 
> 标签：python, windows, python-2.7, subprocess

假设我有一个文件`RegressionSystem.exe`。我想用一个`-config`参数执行这个可执行文件。命令行应该是这样的：

```
RegressionSystem.exe -config filename 
```

我试过像：

```
regression_exe_path = os.path.join(get_path_for_regression,'Debug','RegressionSystem.exe')
config = os.path.join(get_path_for_regression,'config.ini')
subprocess.Popen(args=[regression_exe_path,'-config', config]) 
```

但它没有用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-10T15:10:11.950

[`subprocess.call()`](http://docs.python.org/2/library/subprocess.html#using-the-subprocess-module)如果你愿意，你也可以使用。例如，

```
import subprocess
FNULL = open(os.devnull, 'w')    #use this if you want to suppress output to stdout from the subprocess
filename = "my_file.dat"
args = "RegressionSystem.exe -config " + filename
subprocess.call(args, stdout=FNULL, stderr=FNULL, shell=False) 
```

`call`和之间的区别`Popen`基本上`call`是阻塞而`Popen`不是，`Popen`提供更通用的功能。通常`call`适用于大多数用途，它本质上是`Popen`. [您可以在这个问题](https://stackoverflow.com/questions/7681715/whats-the-difference-between-subprocess-popen-and-call-how-do-you-use-them-to)上阅读更多内容。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2019-04-10T20:28:08.187

对于其他发现此问题的人，您现在可以使用`subprocess.run()`. 这是一个例子：

```
import subprocess
subprocess.run(["RegressionSystem.exe", "-config filename"]) 
```

参数也可以作为字符串发送，但您需要设置`shell=True`. 官方文档可以在[这里](https://docs.python.org/3/library/subprocess.html)找到。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-10T15:00:44.483

```
os.system("/path/to/exe/RegressionSystem.exe -config "+str(config)+" filename") 
```

应该管用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-01T13:34:01.503

我不明白论点是如何起作用的。例如：“-fps 30”不是一个，而是两个必须像这样传递的参数（Py3）

```
args=[exe,"-fps","30"]. 
```

也许这对某人有帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-04-28T11:25:14.380

在这里，我想提供一个很好的例子。在下文中，我得到了`count`当前程序的参数，然后将它们附加到一个数组中作为`argProgram = []`. 最后我打电话`subprocess.call(argProgram)`完全直接地通过它们：

```
import subprocess
import sys

argProgram = []

if __name__ == "__main__":

    # Get arguments from input
    argCount = len(sys.argv)

    # Parse arguments
    for i in range(1, argCount):
        argProgram.append(sys.argv[i])

    # Finally run the prepared command
    subprocess.call(argProgram) 
```

在这个`code`我应该运行一个名为“Bit7z.exe”的可执行应用程序：

> ```
> python Bit7zt.py Bit7zt.exe -e 1.zip -o extract_folder 
> ```

***注意：*** *我使用了 of`for i in range(1, argCount):`语句，因为我不需要第一个参数。*

# android - 如何在活动中建立意图并从片段中接收

> ID：15928961
> 
> 赞同：0
> 
> 时间：2013-04-10T14:40:17.890
> 
> 标签：android, android-intent

我是安卓新手。我想做的是愚蠢的吗？我在一个活动（EditPhoto）中建立了一个意图，如下所示：

```
 //Defining intent for loading image to the edit page
            Intent recentPhoto = new Intent(this, ImportPhoto.class);

            //Defining byte stream of image chosen
            ByteArrayOutputStream bs = new ByteArrayOutputStream();
            bm.compress(Bitmap.CompressFormat.PNG, 50, bs);

            //Transforming image to EditPhoto class in byte stream
            recentPhoto.putExtra("byteArray", bs.toByteArray());

            //Starting the intent
            startActivity(recentPhoto); 
```

我正在尝试从另一个活动（ImportPhoto）的片段（FirstFragment）接收它，如下所示：

```
 // Getting the image back imported from EditPhoto page
                final Bitmap photo = BitmapFactory.decodeByteArray(getIntent().  
                                     getByteArrayExtra("byteArray"),
                         0,getIntent().getByteArrayExtra("byteArray").length);

        //Displaying the image in the image viewer
        viewGalleryImages.setImageBitmap(photo); 
```

由于片段类是静态的，它说“无法从类型 Activity 对非静态方法 getIntent() 进行静态引用”。

我尝试使用捆绑包并将参数设置为片段，但再次遇到同样的问题。

另外，我尝试过 getActivity().getIntent.... 并且还像这样 ((ImportPhoto)getActivity()).getIntent...

任何形式的帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:04:56.790

您正在解决这个错误，您没有将意图发送到片段。

当你创建片段时，你会做这样的事情

```
Fragment fragment = new FirstFragment();
fragTransaction.add(fragment,null).commit; 
```

当您创建片段时，通过将类转换为片段来创建扩展片段的类的实例，如下所示

```
FirstFragment first = (FirstFragment)fragment; 
```

然后在您的 FirstFragment 类中创建一个方法来获取照片或使用`first`您刚刚创建的值访问它的任何广告

```
first.setPhoto(image); 
```

任何时候你需要一个片段与一个活动进行通信，你需要创建一个从片段中读取的活动的回调[这里片段](http://developer.android.com/guide/components/fragments.html#CommunicatingWithActivity)

# ios - 在 ios 中向新联系人屏幕添加控件

> ID：15928963
> 
> 赞同：0
> 
> 时间：2013-04-10T14:40:24.243
> 
> 标签：ios, xcode, contact, addressbook

我希望能够在新联系人屏幕上添加一个控件，或者覆盖人们在 iPhone 的电话应答默认屏幕中单击添加联系人时看到的新联系人屏幕。

只要安装了我的应用程序，我是否可以在单击 + 添加新联系人时添加或覆盖默认屏幕？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T14:49:24.383

如果我理解正确，您想更改默认 Apple 应用程序中的行为吗？

答案是否定的……你将无法做到这一点。苹果不会让第三方应用程序干扰手机的核心功能。

# postgresql - PostgreSQL 数据库中表中的空列有多宽？

> ID：15928964
> 
> 赞同：0
> 
> 时间：2013-04-10T14:40:24.787
> 
> 标签：postgresql, null, diskspace

列消耗的磁盘空间是否`null`与通过网络传输到客户端时相同？

`null`PostgreSQL 数据库中表中的列的宽度（以字节为单位）是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T15:10:24.763

起初错过了你的第二个问题：

大多数客户端通过文本与数据库服务器通信。取决于字符串`NULL`或*无*格式（例如在`COPY`输出中或 pg_dump 的文本格式）而不是值的格式。
这与值在数据库中的存储方式完全不同*。*`NULL`（请参阅添加的链接。）

# shopify - Shopify 客户帐户问题 - 如果未启用帐户，注册用户会收到“电子邮件已在使用”消息

> ID：15928966
> 
> 赞同：0
> 
> 时间：2013-04-10T14:40:29.817
> 
> 标签：shopify

我们最近对网站进行了一些更改，强制客户在购买产品之前创建一个帐户（我们销售数字下载，现在依靠帐户区域让客户访问他们的下载。）

问题是，我们有大约 3500 名客户之前从我们这里购买过产品，但没有被迫创建帐户，并且当时没有选择加入。现在，当他们去设置一个帐户时，他们会收到一条消息，说他们的电子邮件已被使用，因为 Shopify 可以在他们的系统上看到上次购买的电子邮件，即使该帐户已被禁用。然后，他们通常会尝试输入登录详细信息或重置密码，但会收到一条错误消息，提示找不到帐户。

在那儿

a) 一种允许客户在我们的网站上注册或“启用”帐户的方法 b) 向所有已禁用帐户的客户批量发送帐户邀请，可能是通过创建客户组？我真的不想手动执行此操作！！！

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:42:05.890

这是一个非常小、简单的脚本，可以遍历所有客户并找到所有设置为“禁用”的客户，然后向他们发送激活电子邮件，这样他们就可以设置密码并去城里买东西。

使用 API 和 Ruby，我非常有信心我可以用大约 6 行易于阅读的代码来完成它。去吧！

# android - 无法从 ListActivity 启动 Activity

> ID：15928967
> 
> 赞同：0
> 
> 时间：2013-04-10T14:40:31.517
> 
> 标签：android, android-activity, listactivity

我不知道这段代码有什么问题。我的应用程序在运行时崩溃。

这是代码：

```
package com.example.smsTest;

import java.util.List;
import android.app.ListActivity;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.IntentFilter;
import android.os.Bundle;
import android.view.View;
import android.widget.ArrayAdapter;
import android.widget.Button;
import android.widget.ListView;

public class Messages extends ListActivity {
    Button btnNew;  
    private SQLiteAdapter mySQLiteAdapter;

    private BroadcastReceiver mIntentReceiver;
    ListView listview;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        btnNew = (Button) findViewById(R.id.btnNew);

        super.onCreate(savedInstanceState);
        setContentView(R.layout.messages);

        mySQLiteAdapter = new SQLiteAdapter(this);
        mySQLiteAdapter.openToRead();

        List<Message> values = mySQLiteAdapter.getAllMessages();

        ArrayAdapter<Message> adapter = new ArrayAdapter<Message>(this,
                android.R.layout.simple_list_item_1, values);
        setListAdapter(adapter);

        btnNew.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent myIntent = new Intent(Messages.this,
                        SMSTest.class);
                startActivity(myIntent);
            }

        }); 
    }

    @Override
    protected void onResume() {
        super.onResume();

        IntentFilter intentFilter = new IntentFilter("SmsMessage.intent.MAIN");
        mIntentReceiver = new BroadcastReceiver() {
            @Override
            public void onReceive(Context context, Intent intent) {
                @SuppressWarnings("unchecked")
                ArrayAdapter<Message> adapter = (ArrayAdapter<Message>) getListAdapter();
                Message message = null;

                String msg = intent.getStringExtra("get_msg");

                // Process the sms format and extract body & phoneNumber
                msg = msg.replace("\n", "");
                String body = msg.substring(msg.lastIndexOf(":") + 1,
                        msg.length());
                String sender = msg.substring(0, msg.lastIndexOf(":"));

                message = mySQLiteAdapter.createMessage(sender, body);
                //adapter.add(message);
                adapter.notifyDataSetChanged();
            }
        };

        this.registerReceiver(mIntentReceiver, intentFilter);
    }

    @Override
    protected void onPause() {
        super.onPause();
        this.unregisterReceiver(this.mIntentReceiver);
    }
} 
```

这是我刚刚添加的代码加上声明上面按钮的变量：

```
 btnNew.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                Intent myIntent = new Intent(Messages.this,
                        SMSTest.class);
                startActivity(myIntent);
            }

        }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:43:14.460

`LayoutInflater` 在使用或调用扩展布局后，您必须找到您的视图`setContentView(R.layout.messages);`

调整

```
btnNew = (Button) findViewById(R.id.btnNew);

super.onCreate(savedInstanceState);
setContentView(R.layout.messages); 
```

至

```
super.onCreate(savedInstanceState);
setContentView(R.layout.messages);

btnNew = (Button) findViewById(R.id.btnNew); 
```

# c++ - 试图附加一个 wstring

> ID：15928968
> 
> 赞同：3
> 
> 时间：2013-04-10T14:40:31.587
> 
> 标签：c++

我正在尝试将一个整数附加到 wstring：

```
TCHAR buffer[MAX_PATH]={0};
GetModuleFileName(NULL, buffer, sizeof(buffer)/sizeof(*buffer));
TCHAR* fileName = PathFindFileName(buffer);
std::wstring name(fileName);

std::wstring temp;   
temp = _wgetenv(L"TEMP");
temp.append(L"\\-deploy-temp-");
temp.append(rand()); <-- gives an error; can't convert it to wstring
temp.append(L"\\");
temp.append(name); 
```

先感谢您。

这是我尝试过的：

```
std::wstring to_wstring(rand()); 
```

显然，这应该在 C++11 中工作，但我有 MSVC2010，所以我认为它不能在我的设置中编译。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T14:54:02.227

尝试

```
#include <iostream>
#include <sstream>
#include <string>

// ...
std::wstring wstr;

std::wstringstream wss;
wss << rand();

wstr.append( wss.str() );

std::wcout << wstr;
//... 
```

# c# - 无法使用 IEnumerable 在谓词中

> ID：15928974
> 
> 赞同：2
> 
> 时间：2013-04-10T14:40:35.587
> 
> 标签：c#, linq, contains, any

我有以下代码...

```
examinerSpec.Predicate = examinerSpec.AndExpression(examinerSpec.Predicate,
     centreTemp =>centreTemp.ExaminerCentreAssociations.Any(
     examinerTemp =>examinerTemp.CentreRegionMaps.CentreNumber.
     Contains(**currentCentreNumber**) &&
     examinerTemp.CentreRegionMaps.Active == true &&
     examinerTemp.DateStart <= DateTime.Now &&
     (!examinerTemp.DateEnd.HasValue ||
     examinerTemp.DateEnd.Value >= DateTime.Now))); 
```

Contains(currentCentreNumber) 中的 CurrentCentreNumber 是一个字符串。我想使用 centerNumbers 的 IEnumerable。我尝试了以下...

```
examinerSpec.Predicate = examinerSpec.AndExpression(examinerSpec.Predicate,
   centreTemp =>
   centreTemp.ExaminerCentreAssociations.Any(
   examinerTemp =>
   examinerTemp.CentreRegionMaps.CentreNumber.
   Any(currentCentreNumber) &&
   examinerTemp.CentreRegionMaps.Active == true &&
   examinerTemp.DateStart <= DateTime.Now &&
   (!examinerTemp.DateEnd.HasValue ||
   examinerTemp.DateEnd.Value >= DateTime.Now))); 
```

那是行不通的。编译器告诉我“无法推断该方法的类型参数”。

我真的需要在 IEnumerable 参数上过滤 ExamerTemp.CentreRegionMaps.CentreNumber。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T15:23:00.027

这行得通吗？很难推断你的类型......

```
examinerSpec.Predicate = examinerSpec.AndExpression
    (examinerSpec.Predicate,
        centreTemp =>
            centreTemp.ExaminerCentreAssociations.Any(examinerTemp =>
                examinerTemp.CentreRegionMaps.CentreNumber.Any(cn => cn == currentCentreNumber) &&
                examinerTemp.CentreRegionMaps.Active == true &&
                examinerTemp.DateStart <= DateTime.Now &&
                (!examinerTemp.DateEnd.HasValue || examinerTemp.DateEnd.Value >= DateTime.Now)
            )
    ); 
```

# php - 在哪里实现工厂方法？

> ID：15928975
> 
> 赞同：6
> 
> 时间：2013-04-10T14:40:38.580
> 
> 标签：php, oop, factory

我一直在尝试掌握 OOP 概念，虽然我确实掌握了大多数概念背后的一般概念，但我经常发现自己需要一些关于它们实际实施的建议。其中一种情况是工厂方法。

我正在编写一个 PHP 应用程序来处理来自 web 和命令行界面的请求，所以我想出了以下简单的类继承结构来涵盖这两种类型的请求：

```
abstract class Request {
}

class HttpRequest extends Request {
}

class CliRequest extends Request {
} 
```

现在我需要一个工厂方法来返回一个具体的 Request 实例，具体取决于返回的值`php_sapi_name()`：

```
public function create() {
    if(php_sapi_name() === 'cli')
        return new CliRequest();
    else
        return new HttpRequest();
} 
```

我的问题是：我把它放在哪里？我至少能想到三种可能：

**1）**单独类中的静态方法：

```
class RequestFactory {
    public static function create() {
        // ...
    }
} 
```

**2）**单独类中的常规方法（需要先实例化该类）：

```
class RequestFactory {
    public function create() {
        // ...
    }
} 
```

**3）**抽象父类中的静态方法：

```
abstract class Request {
    public static function create() {
        // ...
    }
} 
```

每种解决方案的优缺点是什么，哪些会被认为是“合适的”，为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-24T15:27:40.517

[所以，我有一个想法，使用方法重载](http://us.php.net/manual/en/language.oop5.overloading.php#object.set)来做我认为你想做的事。

```
class Request {

    private $request;
    private $valid = true;
    private $type;
    private $vars;
    private $methods;

    public function __construct() {
        $this->type = php_sapi_name() === 'cli' ? 'cli' : 'http';
        if($this->is_cli()) $this->request = new CliRequest();
        else if($this->is_http())  $this->request = new HttpRequest();
        else {
            $this->valid = false;
            return;
        }
        $this->vars = get_class_vars($this->request);
        $this->methods = get_class_methods($this->request);
    }

    public function __get( $var ){
        if(!$this->valid) return false;
        if(!in_array($var, $this->vars)) return false;
        return $this->request->$var;
    }

    public function __set( $var , $val ){
        if(!$this->valid) return false;
        if(!in_array($var, $this->vars)) return false;
        return $this->request->$var = $val;
    }

    public function __call( $meth, $args ){
        if(!$this->valid) return false;
        if(!in_array($meth, $this->methods)) return false;
        return call_user_func_array($this->request->$var, $args);
    }

    public function is_cli( ){
        return $this->type == 'cli';
    }

    public function is_http( ){
        return $this->type == 'http';
    }

}

// Then, when calling the function...
$request = new Request;
$request->variable; // will get the variable from the Cli or Http request class
$request->method("a","b","c"); // Will run the method from the Cli or Http request class 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T11:47:48.637

所有这些可能性都将按预期工作。我真的没有得到任何“缺点”，因为它实现了，恕我直言，你的封装目标是什么。现在，我们来看看工厂方法模式的本质：

> 定义一个用于创建对象的接口，但让实现该接口的类决定实例化哪个类。Factory 方法允许类将实例化推迟到子类。

我不确定你愿意做的事情是否完全符合这个定义。

相反，您似乎想要实现一种称为“[简单工厂](http://corey.quickshiftconsulting.com/1/post/2009/5/first-post.html)”的东西，其中将实例化过程封装到一个类中。

但是将这种方法直接放入定义“请求”对象接口的抽象类中看起来并不是一个坏主意。

正如 Nicolas 所说，这是 Java、C# 和 Cocoa 领域中相当常见的模式。

出于这些原因，我的选择是第三个选项

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-17T20:36:37.700

要创建真正松散耦合的代码，您可以使用 Ray.Di 或 Injektor 并执行类似于以下的操作：

```
<?php

use Ray\Di\Di\Inject;
use Ray\Di\Di\Scope;

/**
 * @Scope("Singleton")
 */
abstract class Request {
}

class HttpRequest extends Request {
}

class CliRequest extends Request {
}

class ARequestConsumer {
    /* @var Request */
    private $request;

    public function __construct( Request $request ) 
    {
        $this->request = $request;
    } 

    public function foo()
    {
       //...
    }
}

class Global extends Ray\Di\AbstractModule {

    public function configure()
    {
        $this->bind( 'Request' )
            ->toProvider( 'RequestProvider' );
    }
} 

class RequestProvider implements \Ray\Di\ProviderInterface {
    /**
     * @return Request
     */
    public function get()
    {
       //.. factory method logic goes here that produces a concrete instance of Request

    }
}

$injector = Injector::create([new Global]);
$consumer = $injector->getInstance('ARequestConsumer');
$consumer->foo(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-27T09:24:22.090

设计模式不限于 OOP，许多 OOP 设计模式的实现都是在考虑内存管理的情况下编写的。

我来自 Java 世界，在 Java 中你必须使用严格的 OOP 设计模式。很简单，因为 Java 中的一切都是对象。有时您必须创建一个对象和一个方法，即使模式本身实际上并不需要它。**工厂方法**设计模式就是这样一个例子。工厂的实现按接口设计是很好的，但是不需要类和方法来实现工厂。设计模式的实现有时令人困惑的原因是编程语言有时需要设计模式本身并不严格需要的实现。在工厂方法中创建具有方法的类就是这样的例子。

我的解决方案不是纯粹的 OOP，但 PHP 也不是，从长远来看，我认为这不是关于 OOP，而是关于设计模式工厂方法的最佳实现。

我认为 PHP 的优雅之处在于它结合了两全其美。它提供了可靠的 OOP 设计可能性，但它并没有抛弃过程编程的良好元素。

您可以像这样简单地创建代码：

```
function createRequest($pRequesttype){
  switch($pRequesttype){
    case "cli":
      $tmp = new CliRequest();
      break;
    case "http":
      $tmp = new HttpRequest();
      break;
    default:
      $tmp = new DefaultRequest();
  }
  return $tmp;
 } 
```

始终返回默认实现来处理请求。switch 语句是以对软件工程师友好的方式扩展选项数量的最佳选择。

现在让您在创建函数中调用 php_sapi_name。我建议你把它从函数的实现中拿出来。最佳实践是让一个函数只做一项工作，获取请求和处理请求是两个函数。创建一个 createRequest 函数，该函数具有我向您展示的参数。

回答您的问题：1、2 还是 3？嗯，实际上是 4 个。:-) 如果是 1、2 还是 3？

肯定是1，因为我不想为一个简单的方法加载太多的类，但是为了简化这种情况我提出了解决方案4。

我不会使用方法 2，因为在某个时刻创建一个类效率不高。我认为这是最佳实践，但不是最佳实际实施。如果使用这个解决方案，那么也请支持带有工厂接口的类。最佳 OOP 设计，但不是最佳实际实现。

我当然不会使用方法 3，因为抽象类用于抽象数据对象和接口以抽象行为。工厂方法是接口的抽象，而不是抽象类的抽象。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-10T15:04:36.720

在父类中使用静态方法对我来说似乎不是一个糟糕的解决方案。看一下 Java 中的 Calendar 类：有一个 getInstance 方法（实际上有很多），它根据您的语言环境和其他一些条件返回一个 Calendar 实例。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-10T15:19:53.180

在这种情况下，我宁愿使用 Base Abstract 类作为使用静态方法的实例的创建者（第三个选项）

我将使用一个外部类，就像在第一个选项中一样，当我需要创建一些可以破坏封装的依赖项时，比如对不同的实现有不同的依赖项。并且会降低类的可维护性。

# javascript - 从 JavaScript 中的另一个函数停止一个函数中的循环

> ID：15928979
> 
> 赞同：5
> 
> 时间：2013-04-10T14:40:43.300
> 
> 标签：javascript, html

我想从 JavaScript 中的另一个函数停止一个函数中的循环。这是我尝试过的代码：

```
<a onmousedown="startLoop();" onmouseup="stopLoop();" >
   Start loop
</a>

<script>
var static loop = 1;

function startLoop() {
    while(loop ==1) {
    }
    alert("stop"); //This line is not executed
}

function stopLoop() {
    loop = 2;
}
</script> 
```

这是小提琴：http: [//jsfiddle.net/A5h8k/4/](http://jsfiddle.net/A5h8k/4/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-10T14:46:40.503

这`var static loop = 1;`是无效的`var loop = 1;`，但是您启动了一个无限循环，因此您将无法以这种方式停止它。

改用[setInterval](http://www.w3schools.com/jsref/met_win_setinterval.asp) _

```
var int = self.setInterval(function(){myLoop()},100);
function myLoop() {
    //do stuff
}

function stopLoop() {
    window.clearInterval(int);
} 
```

# java - Quartz 调度程序在作业执行前关闭

> ID：15928980
> 
> 赞同：4
> 
> 时间：2013-04-10T14:40:43.533
> 
> 标签：java, quartz-scheduler

石英调度程序的新手。我想要实现的是在未来触发一个触发器，然后关闭调度程序。我正在使用`scheduler.shutdown(true)`它，但它在执行作业之前关闭。我必须调用 shutdown()，因为我要在 Web 应用程序中实现调度程序。

**那么如何在作业执行后关闭调度程序？**

**工作：**

```
public class HelloJob implements Job {

    public HelloJob(){
    }

    public void execute(JobExecutionContext context)
            throws JobExecutionException {
                System.out.println("Hello Quartz on " + new Date());    
            }
} 
```

**调度器：**

```
public class QuartzTest {

    public void scheduleLoad(String time) {
        try {
            // Transform user input into a date
            SimpleDateFormat dateFormat = new SimpleDateFormat("MM/dd/yyyy:HH:mm:ss");
            Date scheduleDate = dateFormat.parse(time);

            // Print Current vs. Scheduled time/date
            System.out.println("Current time - " + new Date());
            System.out.println("Scheduled time - " + scheduleDate); 

            // Grab the Scheduler instance from the Factory 
            Scheduler scheduler = StdSchedulerFactory.getDefaultScheduler();

            // and start it off
            scheduler.start();

            // Define a job and tie it to a class
            JobDetail job = newJob(HelloJob.class)
                    .withIdentity("job1", "group1")
                    .build();

            // Trigger job to run now and repeat every 10 secs
            SimpleTrigger trigger = (SimpleTrigger) newTrigger()
                    .withIdentity("trigger1", "group1")
                    .startAt(scheduleDate)
                    .forJob("job1","group1")
                    .build();

            // Schedule job using trigger
            scheduler.scheduleJob(job, trigger);

            // Shutdown the scheduler after job is executed
            scheduler.shutdown(true);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static void main(String[] args) {
        String runTime = "04/10/2013:20:07:00";
        QuartzTest quartz = new QuartzTest();
        quartz.scheduleLoad(runTime);
    }
} 
```

**输出：**

```
Current time - Wed Apr 10 20:06:31 IST 2013
Scheduled time - Wed Apr 10 20:07:00 IST 2013
[main] INFO org.quartz.impl.StdSchedulerFactory - Using default implementation for ThreadExecutor
[main] INFO org.quartz.simpl.SimpleThreadPool - Job execution threads will use class loader of thread: main
[main] INFO org.quartz.core.SchedulerSignalerImpl - Initialized Scheduler Signaller of type: class org.quartz.core.SchedulerSignalerImpl
[main] INFO org.quartz.core.QuartzScheduler - Quartz Scheduler v.2.1.7 created.
[main] INFO org.quartz.simpl.RAMJobStore - RAMJobStore initialized.
[main] INFO org.quartz.core.QuartzScheduler - Scheduler meta-data: Quartz Scheduler (v2.1.7) 'DefaultQuartzScheduler' with instanceId 'NON_CLUSTERED'
  Scheduler class: 'org.quartz.core.QuartzScheduler' - running locally.
  NOT STARTED.
  Currently in standby mode.
  Number of jobs executed: 0
  Using thread pool 'org.quartz.simpl.SimpleThreadPool' - with 10 threads.
  Using job-store 'org.quartz.simpl.RAMJobStore' - which does not support persistence. and is not clustered.

[main] INFO org.quartz.impl.StdSchedulerFactory - Quartz scheduler 'DefaultQuartzScheduler' initialized from default resource file in Quartz package: 'quartz.properties'
[main] INFO org.quartz.impl.StdSchedulerFactory - Quartz scheduler version: 2.1.7
[main] INFO org.quartz.core.QuartzScheduler - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED started.
[main] INFO org.quartz.core.QuartzScheduler - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED shutting down.
[main] INFO org.quartz.core.QuartzScheduler - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED paused.
[main] INFO org.quartz.core.QuartzScheduler - Scheduler DefaultQuartzScheduler_$_NON_CLUSTERED shutdown complete. 
```

**石英属性：**

```
org.quartz.scheduler.instanceName = MyScheduler
org.quartz.threadPool.threadCount = 3
org.quartz.jobStore.class = org.quartz.simpl.RAMJobStore
org.quartz.scheduler.skipUpdateCheck: true 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T15:43:10.950

我认为您误解了`scheduler.shutdown(true);` 它将等待执行作业完成的目的，但它不会等待计划的作业开始和完成。在您关闭调度程序之前，您的工作没有开始。`Thread.sleep(wait);` 你可以在关闭它之前放一个 。要让您的代码按照我理解的方式运行，请删除此行（您基本上不需要关闭调度程序）：

```
 // Shutdown the scheduler after job is executed
 scheduler.shutdown(true); 
```

此外，移动此行使其仅执行一次。你把它放在哪里，取决于你的应用程序，它可以在独立应用程序的 main 方法中，或者如果在 Web 应用程序中运行，它可以在 Servlet 或 Listener 的 init 方法中：

```
 // and start it off
 scheduler.start(); 
```

**跟进：**

我不明白你为什么需要关闭 Quartz。如果另一个用户需要安排任务会发生什么？您是否计划为每个计划的作业启动一个不同的 Quartz 实例？让它运行并根据需要安排任务会更有意义。这是运行 Quartz 的正常方式。您也许可以让它以您想要的方式运行，但它可能是人为的。如果您真的只是想要在任务运行后启动和关闭的东西，您可能需要查看 JDK 提供的 Timer 和 TimerTask。[请参见此处](http://enos.itcollege.ee/~jpoial/docs/tutorial/essential/threads/timer.html)的示例。

# html - 是否有任何现代标准可以使用构建程序构建 HTML5 应用程序？

> ID：15928982
> 
> 赞同：4
> 
> 时间：2013-04-10T14:40:46.057
> 
> 标签：html, makefile

例如，jQuery Mobile 使用 Make 将它们的各种 js 和 css 文件组装成一个 js 和 css 文件。

这个想法是将文件的各个部分分开，这些部分最终将被构建成更小的文件，这些文件负责自己的事情。

你可以对网页做同样的事情。将图像添加为 Base64 字符串，您可以将整个网站作为单个 .htm 文件，但构成该构建文件的所有文件都彼此独立存在，就像正常情况一样。下面的图片可能会更好地推动这个概念。

![在此处输入图像描述](https://i.stack.imgur.com/gJ1Lk.png)

我制作了自己的程序来执行此操作，如果您愿意，可以在[此处](http://www.dateequalsnull.com/apps/Builder/builderpropaganda.htm)阅读。我的问题是是否有其他人抓住了这个想法，或者是否有更标准的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-16T15:32:44.227

有很多可以做到这一点，例如：

*   [咕噜声](http://gruntjs.com/)
*   [集合](https://github.com/assemble/assemble)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-17T21:42:03.370

我们使用[rake](http://rake.rubyforge.org/)，但已经尝试使用 Grunt 作为构建工具。您的风格偏好应该决定您使用什么工具运行：Grunt 是基于 node.js，rake ('ruby make') 是基于 Ruby，常见的 python 构建工具之一是[scons](http://www.scons.org/)。构建工具对于编译 SASS、执行 css 和 js 缩小以及生成 sprite 图像特别方便。祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-19T06:20:10.067

我不会称之为“标准”（甚至不是事实上的标准），但有一些特定于语言的选项。我使用带有 Railo 的 Coldfusion 语言和一个名为[cfstylesheet/cfjavascript](http://blog.getrailo.com/post.cfm/beta-railo-extensions-cfjavascript-cfstylesheet)的贡献扩展。它即时执行缩小、合并和/或混淆（使用缓存），因此您只需使用一些额外的标签设置您的页面，如下所示：

```
<cfset src = ['/cfjs/test/js/A.js','/cfjs/test/js/B.js'] />
<cfjavascript src="#src#" path="/cfjs/test/jscompressed" filename="myJs"/> 
```

PHP 有一个类似的工具，称为[Minify](http://code.google.com/p/minify/)，它以类似的方式工作。

一个更通用的工具是[YUI Compressor](http://yui.github.io/yuicompressor/)，它可以作为批处理脚本集成到几乎任何构建系统中。

# sql - 多次使用计算列

> ID：15928988
> 
> 赞同：0
> 
> 时间：2013-04-10T14:40:59.570
> 
> 标签：sql, sql-server-2008

有没有办法多次使用计算列，例如：

```
SELECT col1 / 1.1 as col2, col2 - col3 as col4 FROM table1 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:43:07.130

不是这样的。您可以在派生表上使用它：

```
SELECT col2, col2-col3 col4
FROM (SELECT col1/1.1 col2, col3 FROM table1) A 
```

您还可以使用`CROSS APPLY`：

```
SELECT col2,
       col2-col3 col4
FROM table1
CROSS APPLY (SELECT col1/1.1) A(col2) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:44:55.177

你也可以使用`Common Table Expression`

```
WITH CTE
AS
(
     SELECT col1 / 1.1 as col2, 
            col3
     FROM table1
)

SELECT col2, 
       col2 - col3 as col4 
FROM CTE 
```

# html - text-align 不将 2 位数字居中，但适用于单个数字

> ID：15928989
> 
> 赞同：0
> 
> 时间：2013-04-10T14:41:00.200
> 
> 标签：html, css, text-alignment

我有一个`div`包含数字的通知（总共有 12 个，并且它们递增）。我的造型很完美，一切都很好，但我注意到如果一个数字超过一位，数字`text-align`不会居中对齐？

**这是个位数 div 的样子：**

![在此处输入图像描述](https://puu.sh/2xsz3)

**这是两位数 div 的样子：**

![在此处输入图像描述](https://i.stack.imgur.com/u1j3Y.png)

如您所见，第二张图片是右侧的几个像素。

现在我意识到这几乎肯定可以通过使用`padding`来解决，`text-align`但我想知道*为什么*会发生这种情况以及*是否*有解决方法？

* * *

**CSS**

```
.number-circle {
    -webkit-border-radius: 999px;
    -moz-border-radius: 999px;
    border-radius: 999px;
    behavior: url(PIE.htc);
    background-color: #76d17f;
    height: 19px;
    width: 24px;
    border: #fff 3px solid;
    cursor:pointer;
    color:#fff;
    text-align:center;
    padding-top:4px;
    font-weight:600;
    font-size:14px;
} 
```

*（忽略 PIE.htc）*

[**jsFiddle 示例**](http://jsfiddle.net/sKpkQ/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T14:48:55.537

这是因为您使用的字体不是等宽字体。尝试使用等宽字体，例如`font-family:courier;`. 看看这个更新的 jsFiddle：http: [//jsfiddle.net/sKpkQ/2/](http://jsfiddle.net/sKpkQ/2/)

# wcf - 无法从另一台计算机访问托管在托管 Windows 服务中的 WCF 服务

> ID：15928992
> 
> 赞同：1
> 
> 时间：2013-04-10T14:41:08.447
> 
> 标签：wcf, service

[我有一个托管在我根据本](http://msdn.microsoft.com/en-us/library/ms733069.aspx)手册开发的托管 Windows 服务中的 WCF 服务。在 App.config 我指定了以下内容：

```
 <service name="Inpas.Unipos.LicenseManager.SamService.Service"
           behaviorConfiguration="SamServiceBehavior">
    <host>
      <baseAddresses>
        <add baseAddress="http://localhost:8000/SamService/service"/>
      </baseAddresses>
    </host>
    <endpoint address=""
              binding="wsHttpBinding"
              contract="Inpas.Unipos.LicenseManager.SamService.IService" />
    <endpoint address="mex"
              binding="mexHttpBinding"
              contract="IMetadataExchange" />
  </service> 
```

在客户端中，我以这种方式连接到服务：

```
public void ConnectToService(string host, string port)
{
    var binding = new WSHttpBinding();
    var endpoint = new EndpointAddress(string.Format("http://{0}:{1}/SamService/service", host, port));
    var channelFactory = new ChannelFactory<IService>(binding, endpoint);
    _client = channelFactory.CreateChannel();
    _client.Get2X2();
} 
```

在本地机器上它工作正常，但如果我尝试从另一台机器连接到服务 - 我得到一个异常：

*EndpointNotFoundException 消息：在[http://10.xx.xx.xx:8000/SamService/service](http://10.xx.xx.xx:8000/SamService/service)上没有可以接受消息的端点侦听。这通常是由不正确的地址或 SOAP 操作引起的。*

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T09:30:09.207

我通过打开服务的入站端口来修复它：

*   通过单击开始按钮 打开 Windows 防火墙，然后单击控制面板。在搜索框中，键入防火墙，然后单击 Windows 防火墙。
*   在左窗格中，单击高级设置。如果系统提示您输入管理员密码或确认，请键入密码或提供确认。
*   在具有高级安全性的 Windows 防火墙对话框中，在左窗格中单击入站规则，然后在右窗格中单击新建规则。
*   按照新建入站规则向导中的说明进行操作（在此向导的“协议和端口”步骤中选择 Tcp）。

# jquery - jquery mobile 可折叠面板选择器

> ID：15928995
> 
> 赞同：0
> 
> 时间：2013-04-10T14:41:14.853
> 
> 标签：jquery, css, jquery-mobile, jquery-mobile-listview, jquery-mobile-collapsible

我有一个问题，我无法以看起来正确的方式解决。

我有一个小提琴来说明我的问题：

[http://jsfiddle.net/adamsurfari/qsP52/](http://jsfiddle.net/adamsurfari/qsP52/)

```
<body>
<div data-role="page" id="index">
    <div data-theme="a" data-role="header">
        <a href="#" class="ui-btn-left" data-icon="back">BACK</a>
        <h3>
            You Selected
        </h3>
    </div>

    <div data-role="content" id="test-main-container">
        <div data-role="collapsible-set" data-inset="false">

            <div data-role="collapsible" data-theme="b" data-content-theme="d" data-inset="false">
                <h3>FROG</h3>
                <ul data-role="listview">
                    <li><a href="#">BULL FROG</a></li>
                </ul>
            </div><!-- /collapsible -->
            <div data-role="collapsible" data-theme="b" data-content-theme="d" data-inset="false">
                <h3>TOAD</h3>
                <ul data-role="listview">
                    <li><a href="#">FAT</a></li>
                </ul>
            </div><!-- /collapsible -->
            <div data-role="collapsible" data-theme="b" data-content-theme="d" data-inset="false">
                <h3>REPTILE</h3>
                <ul data-role="listview">
                    <li><a href="#">Aardvark</a></li>
                    <li><a href="#">Alligator</a></li>
                    <li><a href="#">Ant</a></li>
                    <li><a href="#">Bear</a></li>
                    <li><a href="#">Beaver</a></li>
                    <li><a href="#">Cougar</a></li>
                    <li><a href="#">Dingo</a></li>
                </ul>
            </div><!-- /collapsible -->

        </div>
    </div>
</div>
</body> 
```

我想做的是保存手风琴家庭和手风琴菜单的选项。例如，如果我选择选项 BULL FROG

我会有 var selectedAnimal = BULL FROG, selectedFamily = FROG

但是，我无法创建选择器来执行此任务。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T15:03:31.327

这是一个工作示例：http: [//jsfiddle.net/Gajotres/4uzKp/](http://jsfiddle.net/Gajotres/4uzKp/)

```
$(document).on('pagebeforeshow', '#index', function(){       
    $(document).on('click', '[data-role="listview"] li', function(){       
        var selectedAnimal = $(this).find('.ui-btn-text a').text();
        var family = $(this).parent().parent().parent().find('.ui-btn-text').first();
        family.find('span').remove();
        family = family.text();
        alert("Selected animal = " + selectedAnimal + ", selected family = " + family);
    });
}); 
```