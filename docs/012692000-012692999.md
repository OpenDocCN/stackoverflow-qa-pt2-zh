# StackOverflow 问答 12692000-12692999

# mysql - 避免增加 Auto_increment 值？

> ID：12692003
> 
> 赞同：1
> 
> 时间：2012-10-02T14:14:20.533
> 
> 标签：mysql, insert, duplicates, last-insert-id

在 MySQL 中，您可以同时插入一行并更新“最后插入 ID”。我使用这个技巧能够有条件地插入项目（唯一性）并且在*所有*情况下仍然获得唯一的 ID。

下面的代码有效。问题是该`ON DUPLICATE KEY`语句还更新了`Auto_increment`值。有可能避免这种情况吗？

```
CREATE TABLE T(
    id INT NOT NULL AUTO_INCREMENT PRIMARY KEY,
    X VARCHAR(64) NOT NULL UNIQUE
) ENGINE = InnoDB DEFAULT CHARSET=utf8;

INSERT INTO T(X) VALUES ('x') ON DUPLICATE KEY UPDATE id = LAST_INSERT_ID(id);
SELECT LAST_INSERT_ID();
INSERT INTO T(X) VALUES ('x') ON DUPLICATE KEY UPDATE id = LAST_INSERT_ID(id);
SELECT LAST_INSERT_ID(); 
```

现在我们有了一个条目`id=1`。但是，**下一个**条目将具有`id=3`自第二个失败`Auto_increment`时更新值以来的值。`INSERT`这可以检查如下：

```
SELECT Auto_increment FROM information_schema.tables WHERE table_name = 't'
     AND table_schema = DATABASE(); 
```

**问：**是否可以使用此技巧（或等效方法）并保持`Auto_increment`价值？显然，在这种情况下，它不需要更新。

# java - 在单个作业中从 Web 服务打印字节数组列表

> ID：12692004
> 
> 赞同：1
> 
> 时间：2012-10-02T14:14:23.847
> 
> 标签：java, web-services, printing, bytearray, thermal-printer

我正在尝试打印到连接到运行 Windows 的机器的热敏 USB 打印机，从一个 Web 服务中一一接收到的命令列表。问题是我需要创建一个接收所有数据的 PrintJob，而不是接收每个 byte[] 的作业。这是我的代码：

```
...//communicated with webserver and received data using "message" variable

PrintService defaultPrintService = PrintServiceLookup.lookupDefaultPrintService();

System.out.println("Default printer: " + defaultPrintService.getName());

if (defaultPrintService != null) {
    sendMessage("connected"); //send message to the server to start receiving data to print
    DocFlavor flavor = DocFlavor.BYTE_ARRAY.AUTOSENSE;

        while (!message.contentEquals("done")) {
                try {
                    message = (String) in.readObject();

                    if (!message.contentEquals("done")) {
                        Doc doc = new SimpleDoc(message.getBytes(), flavor, null);
                        DocPrintJob job = defaultPrintService.createPrintJob();
                        job.print(doc, null);
                    }
                } catch (Exception e) {        
                    // Handle exception
                    e.printStackTrace();
        }
} 
```

那里发生的情况是，windows 为收到的每条消息创建一个打印作业（好吧，我从一开始就知道），这需要几分钟来打印一些行。

另一个问题是，如果我通过网络直接打印到打印机，它打印得很好。通过 USB，它只打印一些命令，如换行和剪纸，而不是文本（就像通过网络一样）。

我错过了什么？

谢谢大家！

**更新**

我已将所有收到的字符串连接成一个字符串，他们试图从该字符串中打印 getBytes()。现在打印机打印正常，但同样，一些未执行的命令和布局变得凌乱，看起来字符集错误，因为重音字符也不起作用

# date - 为什么 ColdFusion 的 DateDiff 返回奇怪/负值？

> ID：12692008
> 
> 赞同：5
> 
> 时间：2012-10-02T14:14:32.670
> 
> 标签：date, coldfusion, datediff

又拔头发了……

我需要以天为单位计算两个日期之间的差异。我正在这样做：

```
 <cfset d = DateDiff("d", Dateformat( active_apps.app_base_coupon_start, "dd.mm.yyyy"), Dateformat( variables.useDate, "dd.mm.yyyy") )> 
```

与`active_apps.app_base_coupon_start`=`27.07.2012`和`variables.useDate`= 今天 = `02.10.2012`。

我抛弃了这两个值，它们都可以。然而，我正在寻找的`dateDiff`回报（7 月 4 天，8 月 31 天，9 月 30 天，10 月 2 天）67 天。`-168`

**问题：**
有人可以阻止我失去剩余的头发并告诉我我在这里做错了什么，或者是否有更简单的方法可以在几天内获得差异？

**编辑：**
好的，它也可以这样工作：

```
<cfif DateAdd("d", active_apps.app_grace_time, Dateformat( active_apps.app_base_coupon_start, "dd.mm.yyyy") ) GT now()>
     <cfdump output="e:\s\page\t\dump.txt" label="catch" var="YUP"> 
<cfelse>
    <cfdump output="e:\s\page\t\dump.txt" label="catch" var="NOPE"> 
</cfif> 
```

但我仍然想知道，为什么`dateDiff`返回奇怪的值。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T14:43:49.473

[`DateDiff("datepart", date1, date2)`](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_c-d_28.html)接受一个 datepart 和两个 date 对象作为参数。

[`DateFormat()`](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_c-d_29.html)正如[亚当卡梅隆已经说过](https://stackoverflow.com/a/12692312/21960)的那样返回一个字符串而不是日期对象。
ColdFusion 试图通过尝试应用一些已知的日期格式来将“27.07.2012”和“02.10.2012”读取为日期对象。这就是为什么“02.10.2012”被解释为“2012 年 2 月 10 日”。

我不会让 ColdFusion 猜测你的字符串的日期格式。相反，您应该使用[`CreateDate(year, month, day)`](http://livedocs.adobe.com/coldfusion/8/htmldocs/help.html?content=functions_c-d_29.html).

`now()`也是一个 ColdFusion 日期对象。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T14:30:51.710

首先，`dateAdd()`将 DATES 作为参数，而不是`dateFormat()`-ed 字符串。 `dateFormat()`用于输出，而不用于计算。

您需要了解，仅仅因为“02.10.2012”在您（和我）看来就像一个日期，就计算机而言，它不是一个日期：它是一个字符串。

切勿使用字符串进行日期计算。

在您的情况下，CF 正在勇敢地尝试找出“02.10.2012”作为日期可能意味着什么，并确定它是“mm.dd.yyyy”格式，即 2 月 10 日，而您的意思是 10 月 2 日。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T14:45:06.140

您使用的是模棱两可的日期格式。每当您进行日期计算时，将其更改`DateFormat`为国际日期格式 ( [ISO 8601](http://www.w3.org/QA/Tips/iso-date) )，事情会更加可预测。请注意，CF 并不支持 ISO 格式的所有变体，但在大多数情况下，您只需要`yyyy-mm-dd`支持的。

```
<cfset d = DateDiff("d", Dateformat( active_apps.app_base_coupon_start, "yyyy-mm-dd"), Dateformat( variables.useDate, "yyyy-mm-dd") )> 
```

# c# - C# GridViews - 单击时使一列中的单元格链接到另一页

> ID：12692010
> 
> 赞同：2
> 
> 时间：2012-10-02T14:14:49.440
> 
> 标签：c#, asp.net, gridview, hyperlink, cell

我有一个从数据库填充的网格视图。

我需要使特定列中的每个单元格在单击时链接到第二页并将单元格的文本值作为查询字符串传递（即链接到[http://mysite.com/page.aspx ?CellText=](http://mysite.com/page.aspx?CellText=) '废话废话'）。我知道听起来很简单，但我就是想不通！

这是我的页面目前的样子：

```
<asp:GridView id="gdvTargets" 
          runat="server" 
          AutoGenerateEditButton="true" 
          OnRowEditing="gdvTargets_RowEdit"
          OnRowUpdating="gdvTargets_RowUpdating" 
          OnRowUpdated="gdvTargets_RowUpdated" 
          OnRowCancelingEdit="gdvTargets_RowCancelingEdit"

          cssClass="grid"
          >
<HeaderStyle CssClass="GridHeader"></HeaderStyle> 
```

还有我背后的c#代码：

```
 protected void Page_Load(object sender, EventArgs e)
    {
year = Request.QueryString["YearSelector"];
targetType = Request.QueryString["TargetType"];

      gdvTargets.DataSource = this.Ets.Api.Util.Db.GetDataTable("EXEC sp_getTargets " + year + ", " + targetType).Return;
      gdvTargets.DataBind();

    } 
```

这会产生一个看起来像这样的表：

```
ID        System        Target 1       Target 2       Target3       Target 4
0         ALL           10             20             15             10
2         Machine1      4              7              7              7
5         Xfgb 45       6              13             8              3 
```

我希望系统列可以单击并链接到新页面，但要使用系统名称。希望这是有道理的！感谢您的帮助：D

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:25:05.223

您可以执行以下操作：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
            e.Row.Cells[0].Text = "<a href=''>" + e.Row.Cells[0].Text + "</a>";
} 
```

用您的列索引替换 0

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:17:33.250

使用`OnRowCommand`事件。在您的标记中，使用 a 设置`TemplateField`a `LinkButton`，并将链接按钮的 and 设置`CommandName`为`CommandArguments`必要的信息。即，您可以命名`CommandName`“链接”（或任何您想要的名称）和`CommandArgument`表格行的 id，或页面的 url 等。

当行命令事件被触发时，检查它是什么命令并在其中做你想做的事情。

```
public void gridView1_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if(e.CommandName == "Link")
    {
        int key = int.Parse(e.CommandArgument.ToString());
        Response.Redirect(string.Format(
            "http://mySite/index.aspx?id={0}", key));
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:30:17.667

添加`HyperLinkField`到您的`Gridview`并设置以下属性：

```
<asp:HyperLinkField DataNavigateUrlFields="System" 
                    DataNavigateUrlFormatString="page.aspx?CellText={0}" 
                    DataTextField="System" /> 
```

`DataTextField`：要在列中显示的文本
`DataNavigateUrlFormatString`：使用 0 索引沿查询字符串导航的 URL
`DataNavigateUrlFields`：要传入查询字符串的字段。如果您想传递超过 1 个字段，请用逗号分隔。

# asp.net-mvc-3 - System.Web.Mvc.HtmlHelper' 不包含 'ActionLink' 的定义

> ID：12692011
> 
> 赞同：28
> 
> 时间：2012-10-02T14:14:50.813
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4, html.actionlink

我想使用自定义@Html.ActionLink

我正在尝试使用以下代码：-

```
public static class LinkExtensions
{
    public static MvcHtmlString MyActionLink(
        this HtmlHelper htmlHelper, 
        string linkText, 
        string action, 
        string controller)
    {
        var currentAction = htmlHelper.ViewContext.RouteData.GetRequiredString("action");
        var currentController = mlHelper.ViewContext.RouteData.GetRequiredString("controller");

        if (action == currentAction && controller == currentController)
        {
          var anchor = new TagBuilder("a");
          anchor.Attributes["href"] = "#";
          anchor.AddCssClass("currentPageCSS");
          anchor.SetInnerText(linkText);
          return MvcHtmlString.Create(anchor.ToString());
         }

         return htmlHelper.ActionLink(linkText, action, controller);
    }
} 
```

来自[知道您在哪个页面上的自定义 ActionLink 帮助程序](https://stackoverflow.com/questions/5084635/custom-actionlink-helper-that-knows-what-page-youre-on)

但我越来越

> System.Web.Mvc.HtmlHelper'不包含'ActionLink'的定义，并且找不到接受'System.Web.Mvc.HtmlHelper'类型的第一个参数的扩展方法'ActionLink'（您是否缺少使用指令或装配参考？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-10-02T14:24:18.343

将此添加`using System.Web.Mvc.Html;`到您的文件顶部

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-10-02T14:24:13.570

确保您的 web.config 中包含扩展类的命名空间。例如：

```
namespace MyProject.Extensions
{
    public static class LinkExtensions
    {
        //code
    }
} 
```

在位于“视图”文件夹中的站点 Web.config 和/或 Web.config 中：

```
 <system.web>
    <pages>
      <namespaces>
        <add namespace="MyProject.Extensions" />
      </namespaces>
    </pages>
  </system.web> 
```

否则，在您的视图页面顶部包含一个命名空间的“使用”块可以工作，但对于常见的命名空间，我会执行上述操作。

ASPX：

```
<%@ Import namespace="MyProject.Extensions" %> 
```

剃刀：

```
@using MyProject.Extensions 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2019-11-08T18:56:43.883

不要忘记第**一个参数**只接受**string**。如果不是，它将向您显示此错误。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-10-02T14:24:37.780

确保您在类文件中有以下使用：

```
using System.Web.Mvc.Html; 
```

这是必需的，因为`HtmlHelper`该类位于`System.Web.Mvc`命名空间中，但`ActionLink`扩展方法位于`System.Web.Mvc.Html`命名空间中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-04-17T04:57:50.847

如果您使用 nopcommerce 在视图文件的顶部添加此 using 语句。

```
@using Nop.Web.Framework.UI 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-05-29T13:11:38.303

我的问题是，我的语法不完整，“@Html.actionLink”，在一个视图中。看起来我已经开始添加一个动作链接并转向不同的方向，但忘记删除部分动作链接，这导致了与上面相同的错误......所以检查你的语法，因为这会引发相同的运行时错误。祝你好运！

# flash - attachMovie() 不工作

> ID：12692013
> 
> 赞同：0
> 
> 时间：2012-10-02T14:14:53.573
> 
> 标签：flash, actionscript-2

这是我的代码：

```
var people:Array = [
    {
        image: "1.jpg",
        labels: 
            [
                "Valium dependant",
                "Anger issues",
                "Single parent"
            ]
    },{
        image: "2.jpg",
        labels: 
            [
                "Alcoholic",
                "Bipolar disorder",
                "Smokes cannabis"
            ]
    },{
        image: "3.jpg",
        labels: 
            [
                "Glue sniffer",
                "Suffers from anxiety",
                "Has terminal cancer"
            ]       
    },{
        image: "4.jpg",
        labels: 
            [
                "Ecstasy user",
                "Binge drinker",
                "Depressed"
            ]       
    },{
        image: "5.jpg",
        labels: 
            [
                "Homeless",
                "Heroin user",
                "Smokes"
            ]       
    },{
        image: "6.jpg",
        labels: 
            [
                "Uses poppers",
                "LSD user",
                "Cocaine user"
            ]       
    }
];

var thumb_container:MovieClip = this.thumb_container;
for (index in people) {
    var thumb:MovieClip = thumb_container.attachMovie("Thumbnail", "thumb_" + index, thumb_container.getNextHighestDepth());
    var image_container:MovieClip = thumb.image_container;
    var image:MovieClip = image_container.attachMovie(people[index].image, "image_" + index, image_container.getNextHighestDepth());
    trace(image);
} 
```

问题是`trace(image)`返回`_level0.thumb_container.thumb_0.image_container`，它是`image`. 我不知道为什么它没有返回我附加的图像（图像也没有出现在 SWF 中）。

注意：数组中的`image`属性`people`是为 ActionScript 导出的链接 ID。

**编辑：**如果我将它们放入 MovieClip 并加载它们，它们工作正常，但似乎有很多人使用`attachMovie()`图像

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:10:08.523

您无法使用加载位图，`MovieClip.attachMovie`因为它无法识别位图文件。它的目的是只加载影片剪辑而不是其他类型。因此，您必须先制作位图数据，然后将此位图数据附加到影片剪辑。

```
var thumb_container:MovieClip = this.thumb_container;
for (index in people) {
    var thumb:MovieClip = thumb_container.attachMovie("Thumbnail", "thumb_" + index, thumb_container.getNextHighestDepth());
    var image_container:MovieClip = thumb.image_container;
    var bmp:BitmapData = BitmapData.loadBitmap(people[index].image);
    var image:MovieClip = image_container.attachBitmap(bmp, image_container.getNextHighestDepth());
    trace(image);
} 
```

它返回`image`并显示它。

# ios - 是否可以将 UIViews 以外的对象放入自定义 TableViewCell 中？

> ID：12692014
> 
> 赞同：1
> 
> 时间：2012-10-02T14:14:54.970
> 
> 标签：ios, xcode, uitableview, uipagecontrol

我正在尝试创建一个`UITableView`其中包含 PageControls 的单元格，这将允许每个单元格横向滚动到不同的视图......我在[这里](http://developer.apple.com/library/ios/#samplecode/PageControl/Introduction/Intro.html)`UIPageControl`使用 Apple项目，基本上试图将这些 PageControl 对象之一插入到.`UITableViewCell`

我对 iOS 还是很陌生，我很难思考如何以我想要的方式自定义单元格……这些单元格仍然显示为带有标题标签的默认单元格。

有人可以帮助我，或者至少告诉我我想做的事情是否可行？:)

# php - 将mysql结果作为唯一数组获取

> ID：12692017
> 
> 赞同：0
> 
> 时间：2012-10-02T14:15:00.813
> 
> 标签：php, arrays

如果我有以下数据库行（id、url、type）

```
id |  url  | type

1  |google | go
2  |yahoo  | go
3  |google | go
4  |bing   | go 
```

现在我想调用 go 类型的所有 url 并将结果放入数组

```
$query = "select * from my_table Where type='go'";
$result = mysql_query($query) or die(mysql_error());
while($aax = mysql_fetch_array($result)){

$result_array[] = $aax[url];
$result_array = array_unique($result_array);
print_r($result_array);

} 
```

结果数组将重复 4 次！因为我们有来自数据库的 4 个结果

```
Array
(
    [0] => google
)
Array
(
    [0] => google
    [1] => yahoo
)
Array
(
    [0] => google
    [1] => yahoo
)
Array
(
    [0] => google
    [1] => yahoo
    [3] => bing
) 
```

**我的问题**

我如何在不重复的情况下获得结果数组并且只获得所有 url 所以我想要的结果如下

```
 Array
(
    [0] => google
    [1] => yahoo
    [3] => bing
) 
```

〜任何帮助..谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:17:44.000

在您的查询中使用[不同的](http://dev.mysql.com/doc/refman/5.0/en/distinct-optimization.html)函数，而不仅仅是构建一个普通数组：

```
$query = "select distinct url from my_table Where type='go'";
$result = mysql_query($query) or die(mysql_error());

$result_array = array();

while($aax = mysql_fetch_array($result)){
  $result_array[] = $aax['url'];
}
print_r($result_array); 
```

*注意：*在您的源代码中编辑了一些小错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:19:24.163

```
$result_array = array_merge($result_array, $aax[url]); 
```

# php - PHP - 将十六进制字符转换为 HTML 实体

> ID：12692025
> 
> 赞同：1
> 
> 时间：2012-10-02T14:15:24.533
> 
> 标签：php, imagettftext

我正在使用 imagettftext 创建某些文本字符的图像。为此，我需要将一组十六进制字符代码转换为它们的 HTML 等价物，我似乎无法找到 PHP 内置的任何功能来执行此操作。我错过了什么？（通过搜索，我遇到了这个：[PHP function imagettftext() 和 unicode](https://stackoverflow.com/questions/198007/php-function-imagettftext-and-unicode)，但似乎没有一个答案能满足我的需要——一些字符转换但大多数没有）。

这是生成的 HTML 表示（在浏览器中）

```
 [characters] => Array
    (
        [33] => A
        [34] => B
        [35] => C
        [36] => D
        [37] => E
        [38] => F
        [39] => G
        [40] => H
        [41] => I
        [42] => J
        [43] => K
        [44] => L
    ) 
```

来自这个数组（不能在 imagettftext 中渲染）：

```
 [characters] => Array
    (
        [33] => &#x41
        [34] => &#x42
        [35] => &#x43
        [36] => &#x44
        [37] => &#x45
        [38] => &#x46
        [39] => &#x47
        [40] => &#x48
        [41] => &#x49
        [42] => &#x4a
        [43] => &#x4b
        [44] => &#x4c
    ) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:20:19.907

根据PHP 手册中[的示例，您可以使用正则表达式执行此操作：](http://www.php.net/manual/en/function.html-entity-decode.php#47371)

```
$newText = preg_replace('/&#x([a-f0-9]+)/mei', 'chr(0x\\1)', $oldText); 
```

我不确定 raw`html_entity_decode()`是否适用于您的情况，因为您的数组元素缺少尾随`;`- 这些实体的必要部分。

**编辑，2015 年 7 月：**

为了回应 Ben 的评论，指出不推荐使用修饰符，以下是使用匿名函数`/e`编写此代码的方法：`preg_replace_callback()`

```
$newText = preg_replace_callback(
    '/&#x([a-f0-9]+)/mi', 
    function ($m) {
        return chr(hexdec($m[1]));
    },
    $oldText
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:19:31.127

好吧，你显然没有足够努力地搜索。**[`html_entity_decode()`](http://il.php.net/manual/en/function.html-entity-decode.php)**.

# git - 合并时意外缺乏冲突

> ID：12692027
> 
> 赞同：0
> 
> 时间：2012-10-02T14:15:26.490
> 
> 标签：git, merge, git-merge

我尝试合并两个分支 - master（当前）和 UrlHandlePoint（非活动）：

```
$ git merge UrlHandlerPoint 
```

我建议这将是冲突的原因，因为这里的代码有一个明显的区别（它从同一行 #27 开始）：

掌握：

```
.27    public function actionIndex()
    {
        // renders the view file 'protected/views/site/index.php'
        // using the default layout 'protected/views/layouts/main.php'
        $about="Page content \"About\"";
        $this->render('index', array('res'=>$about));
    } 
```

网址处理程序点：

```
.27    public function actionIndex($alias=false)
    {
        $data=Data::getDataByAlias('o_kompanii',$alias);
        $this->render('index', array('res' => $data));
    } 
```

但是，git 不会出现冲突问题，而是采用 master 分支的版本。有人知道为什么吗？和/或我在这里理解错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:24:08.523

好吧，既然你不回答评论，我会试着继续猜测。;-)

差异不是冲突。我的猜测是该文件仅在`master`分支中进行了更改，因此，正在合并的分支上没有冲突的更改。

# css - 当屏幕不够大时，将向左对齐的绝对 div 水平居中

> ID：12692028
> 
> 赞同：0
> 
> 时间：2012-10-02T14:15:28.600
> 
> 标签：css, css-position, centering

我有一个绝对定位的 div（因为它包含本身绝对定位的子 div），我想要水平居中。

我可以使用以下 CSS 来实现

```
width : 512px;
position : absolute;
left : 50%;
margin-left :-256px; // half width of div 
```

[（在http://jsbin.com/eruwep/2/edit](http://jsbin.com/eruwep/2/edit)中完成测试）

但是，当窗口不够大时，div 会向左溢出。

当页面足够大时，有没有办法让它居中，否则左对齐（仅使用 CSS）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:20:18.707

您可以尝试媒体查询：http: [//jsfiddle.net/RfUZj/](http://jsfiddle.net/RfUZj/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:26:03.600

为什么要使用`position: absolute`容器？如果只是因为您希望其绝对定位的子项相对于其容器定位，则不需要这样做`absolute`。除此以外的任何值`static`都可以。

将您在问题中提到的 CSS 更改为以下内容将使其工作：

```
width : 512px;
position : relative;
margin : auto; 
```

示例：http: [//jsbin.com/eruwep/3/edit](http://jsbin.com/eruwep/3/edit)

# sas - 为什么MAX函数在proc sql中去掉SAS变量格式？

> ID：12692030
> 
> 赞同：1
> 
> 时间：2012-10-02T14:15:43.520
> 
> 标签：sas, proc-sql

考虑以下：

```
data; 
format x datetime19.;
x=datetime();
flag='FIRST';
do x=datetime() to x+10 by 1;
    output;
    flag='';
end;
proc sql noprint;
select x into : test1 from &syslast where flag='FIRST';
select max(x) into: test2 from &syslast;
%put now we see that &test1 is in a different format to &test2;

data _null_;  set;
put x=; /* formatted */
call symput('test3',x);
call symput('test4',max(x,sum(x+1000)));
stop;
run;
%put The data step is more consistent - &test3 = &test4; 
```

对我来说似乎不一致。为什么 proc sql 在这种情况下保留格式？这种行为是否记录在案？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:35:57.063

SAS 无法知道函数的结果应该如何格式化。在这种情况下，您的`max()`函数只是返回一个日期时间，但是如果其中有嵌套函数或算术怎么办。因为这个 SAS 只是将其视为一个全新的变量，默认情况下没有设置格式。如果您想对其应用相同的格式，您可以将代码更改为：

```
select max(x) format=datetime19\. into: test2 from &syslast; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:39:12.817

在您的示例中，该`MAX`函数创建一个新列，并且在创建新列时，您需要指定所有列属性。因此，只需`FORMAT`在您的 select 语句中添加一个子句：

```
proc sql noprint;
    select x into : test1 from &syslast where flag='FIRST';
    select max(x) format=datetime19\. into: test2 from &syslast;
quit;
%put now we see that &test1 is in a different format to &test2; 
```

# c# - 为什么我的线程化 C# 应用程序中会出现 TargetInvocationException？

> ID：12692032
> 
> 赞同：0
> 
> 时间：2012-10-02T14:15:47.547
> 
> 标签：c#, multithreading, delegates

这是代码（以简单的形式）：

```
delegate DataTable Functie();
Functie deleg;

DataTable find1()
{
    return new DataTable();
}
DataTable find2()
{
    return new DataTable();
}

private void btnFind1_Click(object sender, EventArgs e)
{
    deleg = this.find2;
    backgroundWorker1.RunWorkerAsync();
}

private void btnFind2_Click(object sender, EventArgs e)
{
    deleg = this.find1;
    backgroundWorker1.RunWorkerAsync();
}

private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
{
    BackgroundWorker bk = sender as BackgroundWorker;
    e.Result = deleg;

    if (bk.CancellationPending)
    {
        e.Cancel = true;
    }
}

private void backgroundWorker1_RunWorkerCompleted(object sender, RunWorkerCompletedEventArgs e)
{
    if (e.Cancelled)
    {
        MessageBox.Show("Operation was canceled");
    }
    else if (e.Error != null)
    {
        MessageBox.Show("An error occurred: " + e.Error.Message);
    }
    else
    {
        dataGridView1.DataSource = (DataTable)e.Result;
    }
} 
```

所以，基本上我有两个功能`find1`，`find2`这些都是长时间处理的功能。我想在一个上运行这两个函数，`BackgroundThread`所以我创建了一个委托。当我调用一个函数时，委托会获取一个函数或另一个函数的地址。当我启动线程时，我传递委托而不是直接键入函数，因此我不会创建 2 个后台线程，每个线程都有自己的事件和内容。但是我遇到了问题，当我运行程序时，会抛出以下错误：

```
"System.Reflection.TargetInvocationException was unhandled
Exception has been thrown by the target of an invocation." 
```

它与传递给线程的委托有关。当然，我可以用条件编写所有更简单的东西，以查看必须运行哪些函数，但是我进入了这个，我不知道如何解决它。我想知道我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:20:11.730

我认为，在您的 DoWork 函数中，您需要像这样调用委托：

```
e.Result = deleg(); 
```

原因是这实际上会调用函数，而不是仅仅将结果设置为对函数的引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:22:03.803

您正在将代表投射到`DataTable`：

```
dataGridView1.DataSource = (DataTable)e.Result; 
```

来自这里：

```
e.Result = deleg; 
```

你的意思是：

```
e.Result = deleg(); 
```

# powershell - Powershell 中的智能邮件条码编码

> ID：12692034
> 
> 赞同：0
> 
> 时间：2012-10-02T14:15:48.760
> 
> 标签：powershell, scripting

这是一个长镜头，因为通过搜索 StackOverflow 和更广泛的互联网，我相当肯定在 Powershell 中还没有办法做到这一点。但也许你们中的一个人对此有一些经验。不幸的是，对于尚未亲自尝试过的人来说，这个问题可能看起来像胡言乱语。

我正在尝试在 Powershell 中编写一个脚本，该脚本可以采用智能邮件条形码 (0026110207649328762255101133230) 并将其编码为正确的条形码字符串 (TADATFDAADFFFTATDAAFAATDTTDTDDADFAAFTADDTTTAFFAATTATFTADAFFADDFAD)。

有人对这个有经验么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T04:18:38.587

它实际上是相当多的代码，包括一些翻译表。我们有一个便宜的应用程序，它将获取邮政信息并创建字母字符串，并且可以从 shell 命令驱动。如果这对你有帮助，请告诉我。

# c++ - 类中的 C++ constexpr 成员指针

> ID：12692036
> 
> 赞同：3
> 
> 时间：2012-10-02T14:15:57.013
> 
> 标签：c++, member, undefined-reference, constexpr, member-pointers

我正在尝试使用一个类来对模板数据结构的所有参数进行分组，特别是一个侵入式 AVL 树。用户会做这样的事情：

```
struct MyEntry {
    MyEntry *parent;
    MyEntry *child[2];
    int balance;
    int value;
};

struct MyAvlTreeParams {
    typedef MyEntry entry_type;
    static constexpr auto parent_member = &MyEntry::parent;
    static constexpr auto child_member = &MyEntry::child;
    static constexpr auto balance_member = &MyEntry::balance;
    ... // comparators also come here which compare MyEntry::value
};

AvlTree<MyAvlTreeParams> tree;
MyEntry entry1, entry2;
entry1.value = 6;
entry2.value = 8;
tree.insert(&entry1);
tree.insert(&entry2); 
```

但是MyAvlTreeParams 中的成员指针有问题。此示例演示了它：

```
struct A {
    int x;
};

struct B {
    static constexpr auto member = &A::x;
};

int main ()
{
    A a;
    (a.*(B::member)) = 6;
    return 0;
} 
```

这适用于 clang++ 3.1，但 g++ 4.7.2 无法链接错误：

```
/tmp/ccGXGIOl.o:a.cpp:function main: error: undefined reference to 'B::member' 
```

通过在结构 B 的定义之后的某个位置添加以下声明来修复错误（请参阅[此问题](https://stackoverflow.com/questions/8016780/undefined-reference-to-static-constexpr-char)）：

```
constexpr int (A::*(B::member)); 
```

要了解这在我的情况下如何成为问题，每当使用 AVL 树时都需要添加以下所有内容：

```
constexpr MyEntry * MyEntry::*(MyAvlTreeParams::parent_member);
constexpr MyEntry * (MyEntry::*(MyAvlTreeParams::child_member))[2];
constexpr int MyEntry::*(MyAvlTreeParams::balance_member); 
```

如果没有这种信息较少的样板代码，或者有什么不同的方法可以实现分组参数的相同目标（即不仅仅是将所有成员作为模板参数传递），是否有任何方法可以做到这一点？

# sonarqube - 是否可以将 SONAR 上的项目从内存数据库迁移到 Oracle 数据库？

> ID：12692038
> 
> 赞同：1
> 
> 时间：2012-10-02T14:16:08.413
> 
> 标签：sonarqube

我目前正在使用内存数据库设置 SONAR 以进行评估。如果我们希望使用该工具，我想将分析结果迁移到 Oracle 数据库中以供以后使用。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T06:49:59.733

没有提供进行此类迁移的工具，我建议您不要尝试这样做。

但是，请注意，您将有可能重播分析的历史记录：您可以检查旧版本的代码并使用“sonar.projectDate”参数对每个代码进行分析以更改日期。

# ios - 如何在用户关闭它之前继续播放 UILocalNotification 声音？

> ID：12692042
> 
> 赞同：0
> 
> 时间：2012-10-02T14:16:17.643
> 
> 标签：ios, objective-c, xcode, notifications, uilocalnotification

如标题所示，我将 UILocalNotification 用于警报目的。但声音只播放一次。

**我想一直播放声音，直到用户关闭通知，通知中心只会显示一个通知项。**

有两种方法可以做到这一点，但没有一种是足够好的。

**1.第一：**我最多可以一次发出64个通知，当闹钟时间到时，闹钟声音会播放多次（最多64次），就好像一直在播放一样。但这会在通知中心留下太多的项目，这让我很烦。有没有办法将通知中心中显示的这些项目合并为一个？

**2\. 其次：**我认为有一种方法可以触发单个通知，并继续播放它的声音。但现在我只能在 30 秒内播放一次声音。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T05:19:14.743

1）对于第一点，这是不可能的。
2）当单个通知到达时，您不能一直播放声音，直到用户手动关闭通知。
所以，这两种情况都是不可能的。请[在这里](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/IPhoneOSClientImp/IPhoneOSClientImp.html "这里")简要阅读。

# python - 错误：光标'对象没有属性'_last_executed

> ID：12692043
> 
> 赞同：11
> 
> 时间：2012-10-02T14:16:20.047
> 
> 标签：python, django, string, database-cursor, rawsql

我有这个光标

```
cursor.execute("SELECT price FROM Items WHERE itemID = ( 
                  SELECT item_id FROM Purchases 
                  WHERE purchaseID = %d AND customer_id = %d)", 
                  [self.purchaseID, self.customer]) 
```

我收到这个错误

```
'Cursor' object has no attribute '_last_executed' 
```

但是当我尝试这个时：

```
cursor.execute("SELECT price FROM Items WHERE itemID = ( 
                  SELECT item_id FROM Purchases 
                  WHERE purchaseID = 1 AND customer_id = 1)", 
                  ) 
```

没有错误。我该如何解决？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T07:01:46.677

我也遇到了这个问题。我把%d改成%s，就解决了。希望这对你有用。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T14:20:34.150

问题是您没有在选择字符串中正确进行替换。来自文档：

```
def execute(self, query, args=None):

    """Execute a query.

    query -- string, query to execute on server
    args -- optional sequence or mapping, parameters to use with query.

    Note: If args is a sequence, then %s must be used as the
    parameter placeholder in the query. If a mapping is used,
    %(key)s must be used as the placeholder.

    Returns long integer rows affected, if any

    """ 
```

所以，它应该是：

```
cursor.execute("SELECT price FROM Items WHERE itemID = ( 
              SELECT item_id FROM Purchases 
              WHERE purchaseID = ? AND customer_id = ?)", 
              (self.purchaseID, self.customer)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-26T13:51:08.493

原因是您使用的是“%d”。当您在 SQL 中使用 '%' 时，执行会将 '%' 解释为格式。你应该这样写你的陈述：

```
cursor.execute("SELECT price FROM Items WHERE itemID = ( 
                SELECT item_id FROM Purchases 
                WHERE purchaseID = %%d AND customer_id = %%d)", 
                [self.purchaseID, self.customer]) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-05-25T04:08:32.573

根据您的 SQL 包，您可能需要`cursor.statement`改用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-10-24T17:35:36.883

使用 double %% 为我工作

```
 "SELECT  title, address from table t1, table t2 on t1.id=t2.id where t1.title like '%%Brink%%' " 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-02-23T18:03:37.380

```
from django.db import connection
print(connection.queries) 
```

上面的代码应该显示对请求执行的所有请求。

# javascript - log4javascript - 不出现任何跟踪消息

> ID：12692044
> 
> 赞同：4
> 
> 时间：2012-10-02T14:16:20.997
> 
> 标签：javascript, log4javascript

我正在使用 log4javascript 版本 1.4.3。***在我的应用程序中，它适用于除 trace 之外***
的所有日志级别。为了简化事情并确保问题不在我的应用程序中，我使用作者的示例代码作为示例并添加了一个 setThreshold(log4javascript.TRACE)，然后添加了一行来生成跟踪条目（我还删除了他的示例中的行仅与 ajaxAppender 相关，仅留下 popUpAppender）。

 *当我运行代码时，*错误*和*调试*消息出现在 log4javascript 弹出窗口中，但没有*跟踪*消息。

显然我没有正确理解跟踪级别的使用或跟踪消息的配置。如果有人可以指出我的方式错误，那么我可以修复我的应用程序日志记录。

**下面失败的示例代码。**

```
<?xml version="1.0"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
        <title>log4javascript example from  manual</title>
        <meta http-equiv="content-type" content="text/html; charset=iso-8859-1" />
        <meta name="author" content="Tim Down - tim@log4javascript.org" />
        <meta name="description" content="log4javascript, a logging framework for JavaScript based on log4j" />
        <meta name="robots" content="all" />
        <script type="text/javascript" src="/tracker/libraries/log4javascript.js"></script>
        <script type="text/javascript">
            //<![CDATA[
            var log = log4javascript.getLogger();
            var popUpAppender = new log4javascript.PopUpAppender();
            var popUpLayout = new log4javascript.PatternLayout("%d{HH:mm:ss} %-5p - %m%n");
            popUpAppender.setLayout(popUpLayout);

            // new line below
            popUpAppender.setThreshold(log4javascript.Level.TRACE);

            log.addAppender(popUpAppender);

            log.debug("Debugging message (appears in pop-up)");
            log.error("Error message (appears in pop-up and in server log)");

            // new line below
            log.trace("Trace message");

            //]]>
        </script>
    </head>
    <body>
        <h1>log4javascript example from  manual</h1>

        <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
        </script>
        <script type="text/javascript">
            var pageTracker = _gat._getTracker("UA-448786-3");
            pageTracker._initData();
            pageTracker._trackPageview();
        </script>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T14:36:06.357

问题是记录器也有一个阈值级别，`DEBUG`默认设置为。在调用之前添加以下行`log.trace()`：

```
log.setLevel(log4javascript.Level.TRACE); 
```*

# java - java - 如何注入自定义 PreparedStatement 的参数

> ID：12692046
> 
> 赞同：1
> 
> 时间：2012-10-02T14:16:25.877
> 
> 标签：java, sql, prepared-statement

我正在尝试实现 PreparedStatement，它不适用于 sql DB。

假设我有以下 sql 查询：

```
String selectSqlQuery = "SELECT * FROM customer WHERE f1 = ? AND f2 =? AND f3 > ?"; 
```

和以下代码：

```
 //----

        prest = con.prepareStatement(selectSqlQuery );
        prest.setString(1, "val1");
        prest.setString(2, "val2");
        prest.setInt(3, 108);
        ResultSet rs = prest.executeQuery();
        //--- 
```

我的问题是如何实现用于注入参数的 setString 和 setInt 方法？

现在我将参数的索引和值保存到 HashMap 中，但之后我无法注入 sql 查询字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:35:04.907

sql 的 java 接口的实现是特定于供应商的 jdbc 驱动程序的一部分。您可能只需要为您的数据库获取正确的 jdbc jar 文件。如果您打算编写自己的数据库驱动程序，通常只需要编写这些东西的实现......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:35:31.747

由于您正在编写自己的驱动程序，因此您可以与您的班级一起玩一点。让我们改变方法。如果您有这样的查询：

```
"SELECT * FROM table WHERE id = ? AND name = ?" 
```

更换`?`将其变成

```
"SELECT * FROM table WHERE id = {0} AND name = {1}" 
```

关于您的设置方法，这些方法必须将您的新参数保存在一个`Object`数组中，再次与索引匹配。

```
Object parameterArray = new Object[1];

public boolean setString(int paramIndex, String param) {
    if(paramIndex < 0 || paramIndex > parameterArray.length)
        throw new IllegalArgumentException("Can't set parameter " + paramIndex + ", The query only has " + parameterArray.length + " parameters."); 
    parameterArray[paramIndex - 1] = param;
} 
```

在执行查询之前，利用您的格式化字符串并设置参数：

```
MessageFormat messageFormat = new MessageFormat(query);
String newQuery = messageFormat.format(parameterArray); 
```

该`format`方法将替换括号之间`{number}`表示的索引中相应元素的子字符串。`number`

# android - android数据库的大小会影响设备的电池效率吗？

> ID：12692047
> 
> 赞同：1
> 
> 时间：2012-10-02T14:16:28.893
> 
> 标签：android, performance, sqlite, battery, android-sqlite

无论功能如何，数据库的大小是否会直接影响设备的效率？我读过打开和关闭数据库是一项昂贵的任务，那么这笔费用是否取决于数据库的大小？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:36:37.073

数据库的大小对打开它所需的时间*没有*影响。只有当您实际访问更多数据时，大型数据库才会变得昂贵。

如果您认为您的应用过于频繁地打开/关闭数据库，您应该尝试保持连接。这将权衡额外的努力与更多的内存使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:33:24.510

当然。唯一的问题是您不想进行过早的优化。

大小本身对电源使用有非常非常非常小的影响，但访问它会。更多的是“您多久读/写一次数据库”。如果每个应用程序一次，那么在中等大小的数据库上应该不错（在移动设备的意义上中等/可能有几百个条目）。如果经常发生，那么您应该考虑其他选项，例如是否可以在 RAM 中进行读取缓存

# r - 如何优化 R 性能

> ID：12692049
> 
> 赞同：1
> 
> 时间：2012-10-02T14:16:28.647
> 
> 标签：r, linux-kernel, compiler-optimization, kvm

我们有一个最近的性能基准，我想了解它。我们有一个大型脚本，它在 Redhat Linux 机器上的性能似乎比在规格相当的 Windows 7 笔记本电脑上慢 50%。linux 机器使用 kvm 进行虚拟化，分配有 4 个内核以及 16GB 内存。该脚本不是 io 密集型的，但有很多 for 循环。主要是我想知道是否有任何 R 编译选项可用于优化或任何内核编译器选项可能有助于使其更具可比性。任何指针将不胜感激。我将尝试购买另一台机器并使用原始金属进行测试，以便更好地进行比较。

![性能比较](../Images/ef36f69a15a5b5eba09252fa0422e8dd.png)

这些是我用来在 linux 机器上编译 R 的配置标志。我已经进行了很多实验，对于较大的数据集，这似乎将绿色的执行时间缩短了 12 秒。基本上我用这些选项从 2.087 秒到 1.48 秒。

```
./configure CFLAGS="-O3 -g -std=gnu99" CXXFLAGS="-O3 -g" FFLAGS="-O2 -g" LDFLAGS="-Bdirect,--hash-stype=both,-Wl,-O1" --enable-R-shlib --without-x --with-cairo --with-libpng --with-jpeglib 
```

**更新 1**

该脚本尚未优化。另一组实际上正在编写脚本，我们已经提出使用应用功能的请求，但不确定这如何解释时代差异。

配置文件的顶部看起来像这样。这些功能中的大部分将在以后使用 apply 功能进行优化，但现在它在两台机器上都是苹果对苹果的基准测试。

```
"eval.with.vis"                    8.66    100.00      0.12     1.39
"source"                           8.66    100.00      0.00     0.00
"["                                5.38     62.12      0.16     1.85
"GenerateQCC"                      5.30     61.20      0.00     0.00
"[.data.frame"                     5.20     60.05      2.40    27.71
"ZoneCalculation"                  5.12     59.12      0.02     0.23
"cbind"                            3.22     37.18      0.34     3.93
"[["                               2.26     26.10      0.38     4.39
"[[.data.frame"                    1.88     21.71      0.82     9.47 
```

我的第一个怀疑，我将很快测试并更新我的发现是 KVM linux 虚拟化是罪魁祸首。该脚本非常占用内存，并且由于大量的数组操作和 R 通过副本传递（当然必须 malloc ），这可能会导致问题。由于虚拟机不能直接访问内存控制器，并且必须与它的其他虚拟机共享它，这很可能会导致问题。我将在今天晚些时候得到一台原始机器，并将更新我的发现。

谢谢大家的快速更新。

**更新 2**

我们最初认为性能问题的原因是由于虚拟机的超线程导致的，但事实证明这是不正确的，相对而言，在裸机上的性能是相同的。

后来我们意识到 Windows 笔记本电脑正在使用 32 位版本的 R 进行计算。这导致我们尝试了 64 位版本的 R，结果在完全相同的脚本上比 32 位版本慢了约 140%。这让我想到了一个问题，64 位版本的 R 怎么可能比 32 位版本慢约 140%？

我们看到的是 32

Windows 32 位执行时间 48 秒 Windows 64 位执行时间 2.33 秒。

Linux 64 位执行时间 2.15 秒。Linux 32 位执行时间<进行中>（在 RHEL 6.3 x86_64 上构建了 32 位版本，但没有看到性能改进，我将使用 RHEL 6.3 的 32 位版本重新加载）

我找到了这个链接，但它只解释了一些 64 位机器上 15-20% 的命中率。

[http://www.hep.by/gnu/r-patched/r-admin/R-admin_51.html](http://www.hep.by/gnu/r-patched/r-admin/R-admin_51.html)

抱歉，我不能合法地发布脚本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:18:31.183

查看[编写 R 扩展](http://cran.r-project.org/doc/manuals/R-exts.html)手册中有关“分析”的部分。

从 30,000 英尺高空，您不能再多说什么了——您将需要分析信息。“普遍共识”（我把它放在引号中，因为你不能真正概括这些事情）是 Linux 在内存管理和文件访问方面往往做得更好，所以我对你的结果有点惊讶。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:20:56.283

构建 R`--enable-R-shlib`可能会导致性能下降。这在[R Installation and Administration](http://cran.r-project.org/doc/manuals/R-admin.html)的[附录 B 第 1 节](http://cran.r-project.org/doc/manuals/R-admin.html#Configuration-on-a-Unix_002dalike)中进行了讨论。仅此一项就可以解释 10-20% 的变化。其他来源可能来自“可比规格”的差异。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-05T19:47:32.470

该问题已解决，它是由未优化的 BLAS 库引起的。

这篇文章很有帮助。使用 ATLAS 帮助很大。

[http://www.cybaea.net/Blogs/Data/Faster-R-through-better-BLAS.html](http://www.cybaea.net/Blogs/Data/Faster-R-through-better-BLAS.html)

# c# - MVC 路由问题，在模式匹配时不会失败

> ID：12692050
> 
> 赞同：0
> 
> 时间：2012-10-02T14:16:34.180
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-routing

> **可能重复：**
> [ASP.NET MVC - 捕获所有路由和默认路由](https://stackoverflow.com/questions/4001081/asp-net-mvc-catch-all-route-and-default-route)

```
routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );

        routes.MapRoute(
            name: "CatchAll",
            url: "{id}",
            defaults: new { controller = "Home", action = "CatchAll", id = UrlParameter.Optional }
        ); 
```

是否有一种简单的方法来实现以下路由模式。基本上，如果控制器不存在，我希望全部启动。如果这些页面存在于数据库中，则为这些页面动态填充这些页面。否则我会抛出一个错误。我不想要一条以其他任何东西开头的路线。例如

```
routes.MapRoute(
        name: "CatchAll",
        url: "Caught/{id}",
        defaults: new { controller = "Home", action = "CatchAll", id = UrlParameter.Optional }
    ); 
```

我可以让每个人单独工作，但让他们同时工作证明有点困难。我猜我需要在某个地方超载一些东西。那里一定有一位大师知道答案！:D

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:22:38.210

就匹配而言，这两条路线实际上是同一件事。默认路由实际上是一个将用户定向到 Home.Index 的全部内容。如果控制器或操作不存在，则会引发 404 错误。您可以将 404 重定向到 Web 配置中的特定控制器。

这可能会有所帮助： [返回 404 错误 ASP.NET MVC 3](https://stackoverflow.com/questions/5635114/returning-404-error-asp-net-mvc-3)

# ssl - 带 SSL 的 Haproxy 不起作用

> ID：12692053
> 
> 赞同：4
> 
> 时间：2012-10-02T14:16:47.990
> 
> 标签：ssl, haproxy

我尝试将新的 haproxy 与 ssl(1.5-dev12) 一起使用。但是我对这个新功能有一个错误。

我已经安装了：

```
make TARGET=linux2632 USE_OPENSSL=yes
make PREFIX=/opt/haproxy-ssl install 
```

但是当我检查我的配置文件时，我有这个错误：

> [警报] 275/135959 (10998)：解析 [/opt/haproxy-ssl/haproxy.conf:31]：“绑定”：“ssl”选项未实现。[警报] 275/135959 (10998)：解析 [/opt/haproxy-ssl/haproxy.conf:69]：“服务器”期望和 [:] 作为参数。[警报] 275/135959 (10998)：在配置文件中发现错误：/opt/haproxy-ssl/haproxy.conf [警告] 275/135959 (10998)：代理“ha_stats”：在多进程模式下， stats 将仅限于分配给当前请求的进程。[警告] 275/135959 (10998)：stats socket 在多进程模式（nbproc > 1）下无法正常工作。[警报] 275/135959 (10998)：在配置中发现致命错误。

haproxy -vv 命令返回：

> HA-Proxy 版本 1.5-dev12 2012/09/10 构建时不支持 OpenSSL（未设置 USE_OPENSSL）

我不明白为什么没有设置 openssl 虽然我在安装过程中没有任何错误。

操作系统：Debian 2.6.32-5-xen-amd64 OPENSSL：OpenSSL 0.9.8o 2010 年 6 月 1 日

你有想法吗？

谢谢

更新：

通过安装解决：

```
libssl-dev 
```

然后，新的 make 目标、新的前缀和它的工作原理。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-05T14:04:42.913

在执行 make 命令之前安装 libssl-dev，使用 ssl 的 haproxy 应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-14T12:01:59.817

您可以在 Centos 和 Ubuntu 中安装最新的 OpenSSL。

RHEL：

```
yum install -y make GCC Perl pcre-devel zlib-devel 
```

Ubuntu：

```
apt-get install build-essential make g++ libssl-dev 
```

现在，

```
# wget -O /tmp/openssl.tgz https://www.openssl.org/source/openssl-1.0.2-latest.tar.gz

# tar -zxf /tmp/openssl.tgz -C /tmp

# cd /tmp/openssl-*

# ./config --prefix=/usr --openssldir=/etc/ssl --libdir=lib no-shared zlib-dynamic

# make

# make install_sw 
```

您可以通过以下命令检查 OpenSSL 版本，

```
# openssl version 
```

OpenSSL 1.0.2j 2016 年 9 月 26 日

# azure - Lucene.net 错误的 Azure 库。创建 write.lock 后未找到文件

> ID：12692058
> 
> 赞同：1
> 
> 时间：2012-10-02T14:16:55.023
> 
> 标签：azure, lucene.net

在空的天蓝色容器中执行以下代码时，我得到文件未找到错误（segments.gen；指定的 ​​blob 不存在。）。

```
AzureDirectory azureDirectory = new AzureDirectory(account, "audiobookindex"); // <-- audiobookindex is the name of the blog storage container on my Azure account

// Create the index writerIndexWriter indexWriter = new IndexWriter(azureDirectory, new StandardAnalyzer(), true); 
```

Azure Library for Lucene.net 程序集内的 OpenInput 似乎失败了。但是，我什至不明白它甚至调用该方法。会认为它只会尝试创建它。

此外，程序集和代码正在访问容器，因为它创建了一个我可以在容器中看到的 write.lock 文件。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-22T07:38:38.013

[这](https://web.archive.org/web/20150216033313/http://leoncullens.nl/post/2012/11/18/Full-Text-Search-on-Azure-with-LuceneNET.aspx)应该可以解决这个问题。市场上的示例是使用较旧的 api 和较旧的框架版本等开发的。我发现上述解决方案效果很好！无需干扰调试器；）

# c# - 从控制台应用程序发送电子邮件时导致 Socket 异常的原因是什么？

> ID：12692064
> 
> 赞同：10
> 
> 时间：2012-10-02T14:17:14.410
> 
> 标签：c#, email, smtpclient

我正在尝试编写一个将发送电子邮件的基本控制台应用程序。问题是我不断收到 Socket 异常：

> 试图以访问权限 xxx.xxx.x.xxx:25 禁止的方式访问套接字

我关闭了我的 Windows 防火墙，但它没有改变任何东西。我尝试在指定和不指定凭据的情况下运行它。我还尝试使用不同的 smtp 服务器，包括 smtp.mail.yahoo.com 和端口 25 和我的凭据，但没有运气。导致此异常的问题是什么？

我在 Windows 7 上运行 VS2008。下面是我的代码示例和我得到的异常。

```
static void Main(string[] args)
{
        String recipient = "recipient@email.com";
        String sender = "sender@email.com";

        MailMessage message = new MailMessage();
        message.From = new MailAddress(sender);
        message.To.Add(new MailAddress(recipient));
        message.Subject = "Subject";
        message.Body = "Body";

        SmtpClient smtp = new SmtpClient
        {
            Host = "smtp.server",
            Port = 25,
            EnableSsl = true,
            DeliveryMethod = SmtpDeliveryMethod.Network,
            //UseDefaultCredentials = false,
            //Credentials = new NetworkCredential("validemail", "validpassword"),                
            Timeout = 3000
        };

        try
        {
            smtp.Send(message);
        }
        catch (Exception e)
        {
            Console.WriteLine(e.ToString());
        }
    } 
```

我得到的例外是：

```
System.Net.Mail.SmtpException: Failure sending mail. ---> 
System.Net.WebException: Unable to connect to the remote server --->
System.Net.Sockets.SocketException: An attempt was made to access a socket in a way forbidden by its access permissions xxx.xxx.x.xxx:25
   at System.Net.Sockets.Socket.DoConnect(EndPoint endPointSnapshot, SocketAddress socketAddress)
   at System.Net.ServicePoint.ConnectSocketInternal(Boolean connectFailure, Socket s4, Socket s6, Socket& socket, IPAddress& address, ConnectSocketState state,
IAsyncResult asyncResult, Int32 timeout, Exception& exception)
   --- End of inner exception stack trace ---
   at System.Net.ServicePoint.GetConnection(PooledStream PooledStream, Object owner, Boolean async, IPAddress& address, Socket& abortSocket, Socket& abortSocket
6, Int32 timeout)
   at System.Net.PooledStream.Activate(Object owningObject, Boolean async, Int32 timeout, GeneralAsyncDelegate asyncCallback)
   at System.Net.PooledStream.Activate(Object owningObject, GeneralAsyncDelegate asyncCallback)
   at System.Net.ConnectionPool.GetConnection(Object owningObject, GeneralAsyncDelegate asyncCallback, Int32 creationTimeout)
   at System.Net.Mail.SmtpConnection.GetConnection(String host, Int32 port)
   at System.Net.Mail.SmtpClient.Send(MailMessage message)
   --- End of inner exception stack trace ---
   at System.Net.Mail.SmtpClient.Send(MailMessage message)
   at ...Program.Main(String[] args) in ...\Program.cs:line xxx 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-03T11:57:15.160

我曾经遇到过非常相似的情况，结果证明防病毒软件只是阻止了该端口。此处列出了您可能的选项：http: [//social.msdn.microsoft.com/Forums/br/transactsql/thread/c083c2c6-f74e-42cd-a811-4329ff7aa5f1](http://social.msdn.microsoft.com/Forums/br/transactsql/thread/c083c2c6-f74e-42cd-a811-4329ff7aa5f1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:29:17.383

端口 25 是否已启用且可用？例如，[这个线程](http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/621726f2-3064-44fb-ae22-c8a70ea0412b)解释了另一个服务可以独占访问它。

您是否在另一台机器上尝试过此代码（安全性较低）？我并不是说这是修复的一部分，只是为了确保代码本身是可以的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:49:33.703

尝试使用 EnableSsl。在 msdn 中的异常原因：

> EnableSsl 设置为 true，但 SMTP 邮件服务器未在对 EHLO 命令的响应中通告 STARTTLS。

还要检查异常的状态代码。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T14:59:35.357

要么不分配端口，要么不使用 EnableSSL = true。执行其中一项将解决您的问题。

您正在尝试发起不允许以这种方式进行的通信。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-09-03T19:10:46.280

我更改为 MailKit.Net.Smtp.SmtpClient。它给出了更好的错误，我能够让电子邮件正常工作。

```
using MimeKit;
using MailKit.Net.Smtp;
using System.Net;

using (var client = new SmtpClient())
    {
        client.Connect
            (
                Context.Settings.SMTPServer,
                Convert.ToInt32(Context.Settings.SMTPPort),
                MailKit.Security.SecureSocketOptions.None
            );

        //ignore ssl errors
        client.ServerCertificateValidationCallback = (sender, certificate, chain, sslPolicyErrors) => true;

        // Note: only needed if the SMTP server requires authentication
        if (Context.Settings.SMTPAuthenticate)
        {

            client.Authenticate
                (
                        new NetworkCredential
                        (
                            Context.Settings.SMTPUserName,
                            Context.Settings.SMTPPassword,
                            Context.Settings.SMTPDomain
                        )
                );
        }

        await client.SendAsync(message);
        client.Disconnect(true);

        } 
```

# c# - 在这种情况下，“主机应用程序代码”指的是什么？

> ID：12692066
> 
> 赞同：1
> 
> 时间：2012-10-02T14:17:16.187
> 
> 标签：c#, vb.net, visual-studio, powershell, embedded

我正在查看一份将其列为职责的职位描述：

> 设计、开发和测试用于分析科学仪器的软件，重点是主机应用程序代码

这是电子制造领域的软件工程师工作，所以我想将会非常重视嵌入式软件和驱动程序以及电子测试夹具代码。

那么主机应用程序代码具体指的是什么？我做了一些谷歌搜索，发现这个[链接](http://msdn.microsoft.com/en-us/library/windows/desktop/ee706563%28v=vs.85%29.aspx)表明它与 windows powershell 有关。这是有道理的，因为他们还要求有 C# 或 VB.net 和 Visual Studio 的经验。看起来它们非常面向窗口。但我仍然不完全确定他们在寻找什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T19:27:27.360

它本身没有任何意义，几乎可以肯定与 Powershell 无关。

写它的人都知道它对他们意味着什么，但它在没有上下文的情况下就失去了所有意义。你只需要让招聘人员详细说明——这并不丢人，事实上，表现出这种主动性可能是你的功劳。

尝试：

> “听起来很有趣；你能告诉我更多的信息吗？

如果我不得不从您提供的其他信息中猜测，我想它是指在连接到许多仪器的 PC 上运行的软件（可能通过直接插入的 GPIB、以太网、USB、串行或其他接口或 PCI 卡电脑）。

许多公司将 National Instruments 的 LabView 用于此类应用。我可以想出很多不使用 LabView 的理由，但这可能是你在面试时提出的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:29:39.340

我猜它只是意味着科学仪器的代码——这些仪器将“托管”嵌入式代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T00:58:05.063

我假设主机应用程序软件是指基于 PC 的 Windows 应用程序，它与仪器接口（通过串行、USB、以太网或其他接口）并用于配置仪器、分析和存储来自仪器的数据，和/或测试仪器。

# c++ - （和其他 Unicode 字符）在 g++ 不允许的标识符中

> ID：12692067
> 
> 赞同：68
> 
> 时间：2012-10-02T14:17:24.280
> 
> 标签：c++, gcc, unicode, c++11, g++

我是发现我不能用作为 g++ 4.7 的有效标识符，即使`-fextended-identifiers`启用了该选项：

```
int main(int argc, const char* argv[])
{
  const char*  = "I'm very happy";
  return 0;
} 
```

> main.cpp:3:3: 错误：程序 main.cpp:3:3 中的杂散'\360'：错误：程序
> main.cpp:3:3 中的杂散'\237'
> ：错误：杂散'\230' in程序
> main.cpp:3:3: 错误: 程序中出现杂散“\203”

经过一番谷歌搜索，我发现[标识符中尚不支持 UTF-8 字符](http://gcc.gnu.org/wiki/FAQ#What_is_the_status_of_adding_the_UTF-8_support_for_identifier_names_in_GCC.3F)，但*通用字符名称*应该可以工作。所以我将我的来源转换为：

```
int main(int argc, const char* argv[])
{
  const char* \U0001F603 = "I'm very happy";
  return 0;
} 
```

> main.cpp:3:15：错误：通用字符 \U0001F603 在标识符中无效

所以显然不是一个有效的标识符字符。但是，该标准明确允许来自附件 E.1 范围内的字符，`10000-1FFFD`并且不允许将其作为 E.2 中的初始字符。

我的下一个努力是查看是否有任何其他允许的 Unicode 字符有效——但我尝试过的都没有。甚至连最重要的[PILE OF POO ()](http://www.fileformat.info/info/unicode/char/1f4a9/index.htm)字符都没有。

那么，为了有意义和描述性的变量名称，什么给出了？`-fextended-identifiers`做广告还是不做？它仅在最新版本中支持吗？其他编译器有什么样的支持？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-10-02T15:24:54.200

从 4.8 开始，[gcc 不支持将 BMP 之外的字符用作标识符](http://repo.or.cz/w/official-gcc.git/blob/5b9a8c31af0e7d0f743e8ba07a3bbe03042f5869:/libcpp/charset.c#l869)。这似乎是一个不必要的限制。[此外，gcc 仅支持ucnid.tab](http://repo.or.cz/w/official-gcc.git/blob/5b9a8c31af0e7d0f743e8ba07a3bbe03042f5869:/libcpp/ucnid.tab)中描述的一组非常有限的字符，基于 C **99**和 C++ **98**（它似乎尚未更新到 C11 和 C++11）。

如手册中所述，[`-fextended-identifiers`是实验性](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html)的，因此它更有可能无法按预期工作。

* * *

**编辑：**

[GCC从 4.9.0 开始](https://gcc.gnu.org/gcc-4.9/changes.html#c-family)支持 C11 字符集（准确地说是[svn r204886](https://gcc.gnu.org/viewcvs/gcc?view=revision&revision=204886)）。所以OP的第二段代码使用`\U0001F603`确实有效。`即使在[https://gcc.godbolt.org](https://gcc.godbolt.org)`-finput-charset=UTF-8`上使用 GCC 8.2，我仍然无法获得用于工作的实际代码（您可能需要关注[@DanielWolf](https://stackoverflow.com/a/42158646/224671)提供的[这个错误报告](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=67224)）。`

 `同时，这两条代码都可以在 clang 3.3 上运行，除了`-std=c++11`.

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2017-02-10T11:47:29.810

这是 GCC 9 及之前版本中的一个[已知错误](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=67224)。这[已](https://gcc.gnu.org/bugzilla/show_bug.cgi?id=67224#c32)在 GCC 10 中修复。

GCC 10的[官方变更日志](https://gcc.gnu.org/gcc-10/changes.html#c-family)包含以下部分：

> 除了已经支持的 UCN 语法（`\uNNNN`或）之外，现在可以在输入编码（默认为 UTF-8）中直接指定标识符中的扩展字符：`\UNNNNNNNN`

```
static const int π = 3;
int get_naïve_pi() {
  return π;
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-10-02T15:31:33.113

> 但是，该标准在附件 E.1 中明确允许 10000-1FFFD 范围内的字符，并且在 E.2 中不允许将其作为初始字符。

要记住的一件事是，仅仅因为 C++ 标准允许（或不允许）某些功能，并不一定意味着您的编译器支持（或不支持）该功能。`

# .net - Jenkins Amazon EC2 代理云 - Windows 从站

> ID：12692071
> 
> 赞同：7
> 
> 时间：2012-10-02T14:17:35.190
> 
> 标签：.net, continuous-integration, jenkins, build-automation

我需要创建在 Amazon EC2 上的 Windows 虚拟机下运行的 Jenkins 代理云。

我对此的看法很简单：

我的预配置 AMI 很少，每个 VM 都有与我的一个项目匹配的特定环境。我很少有项目要经常构建以保持 VM 运行。但是有些构建将每周运行，而另一些构建将运行... Jenkins 应该能够在构建项目时自动启动 VM，并在构建完成时终止 VM。我有几个 BCB 项目和许多 .NET 项目，Windows 作为从属 VM 操作系统是绝对必要的。

在安装和配置 Jenkins slave 的地方准备预配置的 AMI 不是问题。但我不知道如何从主机管理这些从属虚拟机（运行/终止它们）

我找到了可用于运行和终止虚拟机的 Amazon EC2 插件。但它也尝试在那里安装和运行 slave。不幸的是，尚不支持 Windows 从站。有没有办法使用预配置的 AMI 或让 Amazon EC2 插件在 Windows VM 上安装代理？

我也尝试使用 TeamCity - 它可以运行预配置的 windows AMI 并在那里构建项目（正是我的场景）。但我需要太多虚拟机，而我的老板还没准备好支付许可证费用（3 个免费许可证还不够）

是否可以在我的场景中使用 Jenkins？有没有其他选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-09T19:39:20.090

boto.ec2 可以完美地用于随时随地启动/停止/终止实例。

我为此使用了一个脚本。这是我可以分享的一部分。我无法分享某些部分。谢谢你的理解。

```
#!/usr/bin/python
import boto.ec2
import sys
import time

# specify AWS keys
auth = {"aws_access_key_id": "YOUR_KEY", "aws_secret_access_key": "YOUR_SECRET_KEY"}

def main():
    # read arguments from the command line and
    # check whether at least two elements were entered
    if len(sys.argv) < 2:
        print "Usage: python aws.py {start|stop}\n"
        sys.exit(0)
    else:
        action = sys.argv[1]

    if action == "start":
        startInstance()
    elif action == "stop":
        stopInstance()
    else:
        print "Usage: python aws.py {start|stop}\n"

def startInstance():
    print "Starting the instance..."

    # change "eu-west-1" region if different
    try:
        ec2 = boto.ec2.connect_to_region("eu-west-1", **auth)

    except Exception, e1:
        error1 = "Error1: %s" % str(e1)
        print(error1)
        sys.exit(0)

    # change instance ID appropriately
    try:
        instances = ec2.start_instances(instance_ids="ID_INSTANCE TO START")

        instances[0].update()
        while instances[0].state != "running":
            print instances[0].state
            time.sleep(5)
            instances[0].update()

#this part manage the association of Elastic IP
        ec2.associate_address("ID_INSTANCE","ELASTIC IP")

    except Exception, e2:
        error2 = "Error2: %s" % str(e2)
        print(error2)
        sys.exit(0)

def stopInstance():
    print "Stopping the instance..."

    try:
        ec2 = boto.ec2.connect_to_region("eu-west-1", **auth)

    except Exception, e1:
        error1 = "Error1: %s" % str(e1)
        print(error1)
        sys.exit(0)

    try:
        ec2.stop_instances(instance_ids="INSTANCE_ID")

        instances[0].update()
        while instances[0].state != "stopped":
            print instances[0], instances[0].state
            time.sleep(5)
            instance.update()

        print "Instance stopped : "

    except Exception, e2:
        error2 = "Error2: %s" % str(e2)
        print(error2)
        sys.exit(0)

if __name__ == '__main__':
    main() 
```

# javascript - 使用firebreath插件打开一个文件夹对话框并异步返回文件夹选择，这样java脚本就不会被阻塞

> ID：12692072
> 
> 赞同：3
> 
> 时间：2012-10-02T14:17:36.270
> 
> 标签：javascript, c++, firebreath

我只想在任何时候打开一个文件夹选择对话框。一旦用户选择了文件夹，就会触发一个事件，通知所选文件夹的 JavaScript。

为了打开对话框，我在我的项目 [DialogManager 抽象中包含了以下要点的代码 FireBreath](https://gist.github.com/1368648)

# 插件API cpp

我维护了一个指向插件的全局指针，因此可以从任何上下文调用它的函数

问：这是最好的方法吗？

```
#include "DialogManagerWin.h"
pluginAPI * g_thePlugin; 
```

## 我在pluginAPI CTOR中设置它

```
g_thePlugin = this; 
```

# 插件API.h

## 这转到 pluginAPI

这是我想为 javascript 提供所选文件夹的事件

```
FB_JSAPI_EVENT(folderselected, 1, (const std::string&)); 
```

## 从 javaScript 调用的 API：

从要点调用代码以在另一个线程中打开文件夹选择，以避免阻塞并导致浏览器冻结。

```
void pluginAPI::SelectFolder(std::string initialFolderPath)
{
  FB::PluginWindow* pluginWindow = pluginAPI::getPlugin()->GetWindow();
  DialogManager* dlg_mgr = DialogManager::get();
  dlg_mgr->OpenFolderDialog(m_host, pluginWindow, folderSelectorCallback);

  return;
} 
```

## 回调

一旦用户选择了一个文件夹，这个回调就会被调用

```
void folderSelectorCallback(const std::string& folderSelected)
{
    g_thePlugin->fire_folderselected(folderSelected);
    return ;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T22:37:42.913

首先，插件和根JSAPI对象是有区别的；您正在维护一个指向根 JSAPI 对象的全局指针。

不，这不是一个好主意，你永远不应该这样做。

其次，您可能想要在这里做的不是触发 JSAPI 事件，而是实际上只是调用异步回调。在 FBTestPlugin 和[有关该主题的博客文章](http://colonelpanic.net/2010/12/firebreath-tips-asynchronous-javascript-calls/)中有这方面的示例。

您需要做的就是接受 js 函数的 const JSObjectPtr& 回调参数，然后将其从对话框抽象传递给回调。

如果你使用抽象的本质，它看起来像这样：

```
void MyPluginAPI::someJavascriptMethod(const FB::JSObjectPtr& callback) {
    PathCallback dlgCallback = boost::bind(MyPluginAPI::doCallback, this, callback, _1);
    DialogManager::get()->OpenFolderDialog(m_host, getPlugin()->GetWindow(), dlgCallback);
}

void MyPluginAPI::doCallback(const FB::JSObjectPtr& callback, const std::string& path) {
    callback->InvokeAsync("", FB::variant_list_of(path));
} 
```

尚未准确测试该代码，但这应该很接近。

# asp.net - 将aspx重定向到新页面但带有消息并等待？

> ID：12692074
> 
> 赞同：0
> 
> 时间：2012-10-02T14:17:41.760
> 
> 标签：asp.net, redirect, message

我想重定向到一个新页面，但我想显示一条消息并等待一小段时间，以便用户阅读：

我知道我可以这样做：

```
<script runat="server">
 protected override void OnLoad(EventArgs e)
  {
  Response.Redirect("new.aspx");
  base.OnLoad(e);
  }
 </script> 
```

但是我怎样才能显示消息并等待？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:22:40.590

您可以在 html 中使用[meta refresh](http://en.wikipedia.org/wiki/Meta_refresh)来代替使用服务器端代码：

```
<html>
 <head>
  <title> Redirect </title>
  <meta http-equiv="refresh" content="60;URL='http://foo/new.aspx'"/>
 </head>

 <body>
    <p>You will be redirected in 60 seconds</p>
 </body>
</html> 
```

`content`您可以将标签属性中的60 更改`meta`为您希望用户等待的秒数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:24:10.290

您可以使用客户端技术，例如元标记

```
<HTML>
<HEAD>
<!-- Send users to the new location. -->
<TITLE>redirect</TITLE>
<META HTTP-EQUIV="refresh" 
CONTENT="10;URL=http://<URL>">
</HEAD>
<BODY>
[Your message here]
</BODY>
</HTML> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:25:10.510

您是否尝试过使用元刷新标签？

文档可以在这里找到：[http ://en.wikipedia.org/wiki/Meta_refresh](http://en.wikipedia.org/wiki/Meta_refresh)

基本上，您在 HTML 部分中放置一个元刷新标签，`<head/>`并指定一个等待时间和一个 URL。

例如

```
<meta http-equiv="refresh" content="15;URL='http://www.something.com/page2.html'"> 
```

在上面的示例中，页面将等待 15 秒，然后重定向到`http://www.something.com/page2.html`.

因此，您可以创建一个包含您的消息的页面，并在其标题中放置一个元刷新。在设定的时间段后，它将“刷新”到 new.aspx。

例如

```
<html>
  <head>
    <title>Redirecting</title>
    <meta http-equiv="refresh" content="15;URL='new.aspx'">
  </head>
  <body>
    <p>Thanks for visiting our site, you're about to be redirect to our next page.  In the meantime, here's an interesting fact....</p>
  </body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T14:25:10.527

您可以在查询字符串中传递消息和等待时间

```
Response.Redirect("new.aspx?Message=Your_Message&Time=3000") 
```

在 new.aspx 的 Page_Load 中可以捕获参数

```
string msg = Request["Message"]
string time = Request["Time"] 
```

您需要用户等待 x 秒才能看到消息吗？如果是，您将需要通过 javascript 来完成。

首先，创建一个 javascript 函数来显示消息

```
function ShowMessage(msg) {
        alert(msg);
    } 
```

然后，在 new.aspx 后面的代码中，获取参数并调用 javascript 函数

```
protected void Page_Load(object sender, EventArgs e)
    {
        string msg = Request["Message"].ToString();
        string tempo = Request["Time"].ToString();
        string script = String.Format(@"setTimeout(""ShowMessage('{0}')"", {1})", msg, tempo);
        ScriptManager.RegisterStartupScript(this.Page, this.GetType(), "key", script, true);
    } 
```

它将在 3 秒后显示该消息。

# c# - 进度条不起作用

> ID：12692077
> 
> 赞同：0
> 
> 时间：2012-10-02T14:17:56.130
> 
> 标签：c#, progress-bar, backgroundworker

我有一个后台工作人员来处理一些工作，do_work 事件中有一个循环，并且我在内部使用计数器调用 reportprogress，计数器正在递增但进度条没有移动。如果我使用从 1 到 100 的简单 for 循环调用 reportprogress，则进度条可以工作。对不起代码量..

```
namespace ConvertOSGB_WGS84
{
public partial class InterfaceConvertLonLat : Form
{
    public static Int32 OGB_M = 150;
    [DllImport("TTDatum3.Dll", EntryPoint = "WGS84ToLocal", CallingConvention =  CallingConvention.StdCall, SetLastError = true)]
    public static extern Int32 WGS84ToLocal([In, Out]ref double lat, [In, Out] ref double lon, Int32 datum);

    [DllImport("TTDatum3.Dll", EntryPoint = "LocalToWGS84", CallingConvention = CallingConvention.StdCall, SetLastError = true)]
    public static extern Int32 LocalToWGS84([In, Out]ref double lat, [In, Out] ref double lon, Int32 datum);

    [DllImport("TTDatum3.Dll", EntryPoint = "OSGB36ToOSGBGrid", CallingConvention = CallingConvention.StdCall, SetLastError = true)]
    public static extern Int32 OSGB36ToOSGBGrid(double lat, double lon, [In, Out] ref double east, [In, Out] ref double north);

    [DllImport("TTDatum3.Dll", EntryPoint = "OSGBGridToOSGB36", CallingConvention = CallingConvention.StdCall, SetLastError = true)]
    public static extern Int32 OSGBGridToOSGB36(double east, double north, [In, Out] ref double lat, [In, Out]  ref double lon);
    CovertLonLat convert = new CovertLonLat();

    public InterfaceConvertLonLat()
    {
        InitializeComponent();
        Shown += new EventHandler(Form1_Shown);
        backgroundWorker1.WorkerReportsProgress = true;
        backgroundWorker1.ProgressChanged += new ProgressChangedEventHandler(backgroundWorker1_ProgressChanged);
        backgroundWorker1.DoWork += new DoWorkEventHandler(backgroundWorker1_DoWork);

    }
    public void ConvertLonLat_Load(object sender, EventArgs e)
    {

    }

    public void Form1_Shown(object sender, EventArgs e)
    {     
        backgroundWorker1.RunWorkerAsync();
    }

    public void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e)
    {
        MessageBox.Show("backgroundworker");
        SqlConnection conn = new SqlConnection(Connections.dbConnection1());
        InterfaceConvertLonLat con = new InterfaceConvertLonLat();
        SqlCommand cmd = new SqlCommand();
        SqlCommand cmd1 = new SqlCommand();
        SqlDataAdapter adapter = new SqlDataAdapter();
        DataSet address = new DataSet();
        int counter = 0;

        cmd.Parameters.Clear();

        if (conn.State.Equals(System.Data.ConnectionState.Closed))
        {
            conn.Open();
        }
        try
        {
            adapter.MissingSchemaAction = MissingSchemaAction.AddWithKey;
            cmd1.Parameters.Add(new SqlParameter("@LTW", SqlDbType.Float));
            cmd1.Parameters.Add(new SqlParameter("@LGW", SqlDbType.Float));

            string dbQuery = "select * from paf ";

            cmd.CommandText = (dbQuery);
            cmd.CommandType = CommandType.Text;
            cmd.Connection = conn;
            adapter.SelectCommand = cmd;
            adapter.Fill(address, "OBG36ToWGS84");

            foreach (DataRow LonLat in address.Tables[0].Rows)
            {
                counter++;
                MessageBox.Show("value " + counter);
                con.backgroundWorker1.ReportProgress(counter);
                Double lon = 0;
                Double lat = 0;

                lat = Convert.ToDouble(LonLat["LTO"]);
                lon = Convert.ToDouble(LonLat["LGO"]);
                LocalToWGS84(ref lat, ref lon, OGB_M);

                cmd1.Parameters["@LTW"].Value = lat;
                cmd1.Parameters["@LGW"].Value = lon;

                string dbQuery1 = "update paf set LTW = @LTW, LGW = @LGW";

                cmd1.CommandText = (dbQuery1);
                cmd1.CommandType = CommandType.Text;
                cmd1.Connection = conn;
                cmd1.ExecuteNonQuery();

            }
        }
        catch (Exception ex)
        {

            MessageBox.Show("error converting: " + ex.Message);
        }
        finally
        {

            conn.Close();

        }
    }

    public void backgroundWorker1_ProgressChanged(object sender, ProgressChangedEventArgs e)
    {

         progressBar1.Value = e.ProgressPercentage;
    }

} 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:22:19.507

这就是问题：

```
InterfaceConvertLonLat con = new InterfaceConvertLonLat();
...
con.backgroundWorker1.ReportProgress(counter); 
```

因此，您正在报告*另一个*后台工作人员的进度 - 一个与未显示的表单相关联的工作人员。只需使用：

```
backgroundWorker1.ReportProgress(counter); 
```

# google-apps-script - UiApp 文本框自动完成

> ID：12692080
> 
> 赞同：0
> 
> 时间：2012-10-02T14:18:04.743
> 
> 标签：google-apps-script

有一个关于 UiApp 的问题。

我创建了一个函数，可以在我输入 cityBox 时更改 cityList 值（这有效）

但有时当我已经使用该值时，我的浏览器会出现一个自动完成框。是否有一个 Handler 函数可以检测我是否单击了自动完成框？

这是我的一些代码：

```
 var cityPanel = app.createVerticalPanel().setWidth(400);
  cityPanel.add(app.createLabel("Plaats:"))
  var cityHandler = app.createServerHandler("getCity").addCallbackElement(cityPanel);
  var cityBox = app.createTextBox().setWidth(300).setName("cityBox").addKeyUpHandler(cityHandler);
  var cityList = app.createListBox().setVisibleItemCount(5).setWidth(300).setId("cityList").setName("cityList");
  cityPanel.add(cityBox)
    .add(cityList); 
```

亲切的问候，

托马斯·范拉图姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-05T18:14:32.733

不幸的是，UiApp 文本框中没有可以检测或阻止浏览器级别自动完成框的功能。

# java - 将 JSON 反序列化为 Java 枚举

> ID：12692081
> 
> 赞同：7
> 
> 时间：2012-10-02T14:18:14.327
> 
> 标签：java, android, json

我在 Android 上的 Java 中有以下枚举，我希望能够将传入的 JSON 字符串/对象中的整数反序列化为此 Enum 类型。我在 Jackson 和 GSON 上一直很受欢迎，但在我正在使用的 JSON.org 包上却一无所获。

有没有一种简单的方法可以做到这一点，还是我需要更改 JSON 解码器？谢谢。

```
public enum ValueEnum {

    ONE(1),
    TWO(2),
    THREE(3);

    private int value;

    private ValueEnum(int value) {
        this.value = value;
    }

    public int getValue() {
        return value;
    }   
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T14:21:14.223

`ValueEnum.values()`将返回您的 ValueEnum[] 数组，然后您可以遍历数组并检查`Value`

```
public static ValueEnum valueOf(int value) {
        ValueEnum[] valueEnums = ValueEnum.values();
        for (ValueEnum valueEnum : valueEnums) {
            if (valueEnum.getValue() == value)
            {
                return valueEnum;
            }
        }
        return DEFAULT;
    } 
```

# java - 如何停止使用 spring 任务安排的作业

> ID：12692083
> 
> 赞同：6
> 
> 时间：2012-10-02T14:18:27.910
> 
> 标签：java, spring

我已经实现了一个示例 spring 计划任务，其 applicationContext 如下，

```
<task:scheduled-tasks scheduler="myScheduler">
    <task:scheduled ref="cron" method="show" cron="0/10 * * * * ?"/>
    <task:scheduled ref="cron" method="show2" cron="0/15 * * * * ?"/>
</task:scheduled-tasks>

<task:scheduler id="myScheduler" pool-size="10"/> 
```

如何停止此计划方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:30:48.980

将 注入`ThreadPoolTaskScheduler`到另一个 bean 中，然后调用`shutdown()`. 如果这不可接受，您可以将`cron`bean 配置为接受标志。例如：

```
public class Job() {
    private final AtomicBoolean stop = new AtomicBoolean(false);

    public void show() {
        if (stop.get()) {
            return;
        }
        ...
    }

    public void stop() {
        stop.set(true);
    }
} 
```

请注意，这不会从调度程序中删除作业。防止这种情况的唯一方法是获取对`ScheduledFuture`and 调用的引用`cancel()`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:38:31.843

取决于您所说的“停止”。

1.  **业务条件停止：** 由于业务条件而停止，您应该在您的方法中评估这些条件，而只是不执行代码。这样，您可以在运行时停止不需要的执行，运行您的逻辑来处理条件失败（日志记录、通知等）结果。

2.  **非业务条件：** 将 chron 表达式外部化为属性文件，或者我更喜欢 JVM 中的系统变量。然后，您只需将属性值更改为 9999 场景即可停止任何执行。

**系统变量示例。**

```
<task:scheduled-tasks scheduler="myScheduler">
<task:scheduled ref="cron" method="show" cron="#{systemProperties['chron1']}"/>
<task:scheduled ref="cron" method="show2" cron="#{systemProperties['chron2']}"/> 
```

# css - 防止 CSS 中的“双”边框

> ID：12692089
> 
> 赞同：108
> 
> 时间：2012-10-02T14:19:01.387
> 
> 标签：css

假设我有两个相邻的 div（以[https://chrome.google.com/webstore/category/home](https://chrome.google.com/webstore/category/home)作为参考）并带有边框。

有没有办法（最好是 CSS 技巧）来防止我的 div 看起来像有双边框？看看这张图片以更好地理解我的意思：

![](../Images/5f1c93722211b8ee2c906fb55959add2.png)

您可以看到两个 div 相交的地方，它们看起来像是有一个双边框。

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-10-02T15:14:13.530

如果我们谈论的元素不能保证以任何特定顺序出现（可能是一行中的 3 个元素，然后是一行有 2 个元素的行，等等），那么您需要可以放置在集合中的每个元素上的东西. 该解决方案应涵盖：

```
.collection {
    /* these styles are optional here, you might not need/want them */
    margin-top: -1px;
    margin-left: -1px;
}

.collection .child {
    outline: 1px solid; /* use instead of border */
    margin-top: 1px;
    margin-left: 1px;
} 
```

[请注意，outline在旧浏览器](http://caniuse.com/#feat=outline)（IE7 和更早版本）中不起作用。

或者，您可以坚持使用边框并使用负边距：

```
.collection .child {
    margin-top: -1px;
    margin-left: -1px;
} 
```

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2012-10-02T14:21:01.123

`#divNumberOne { border-right: 0; }`

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-10-02T14:27:14.907

HTML：

```
<div>1</div>
<div>2</div>
<div>3</div>
<div>4</div> 
```

​CSS：

```
div {
    border: 1px solid #000;
    float: left;
}

div:nth-child(n+2) {
    margin-left: -1px;
} 
```

**[演示](http://jsfiddle.net/gionaf/D6tHK/)**

包括[ie9.js](http://code.google.com/p/ie7-js/)以支持 IE8（它对所有 CSS 选择器/伪元素都非常有用）。

* * *

## 回答 #4

> 赞同：21
> 
> 时间：2014-09-17T00:40:28.423

另一种可能考虑的解决方案是使用 CSS [Adjacent 兄弟选择器](http://www.w3.org/TR/CSS21/selector.html#adjacent-selectors)。

### CSS

```
div {
    border: 1px solid black;
}

div + div {
    border-left: 0;
} 
```

### [jsFiddle](http://jsfiddle.net/c047253f/1/)

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2019-09-26T15:16:50.623

我迟到了，但尝试使用大纲属性，如下所示：

```
.item {
  outline: 1px solid black;
} 
```

CSS 中的轮廓不占用物理空间，因此会重叠以防止出现双边框。

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-09-30T11:38:03.070

您可以使用**奇数**选择器来实现这一点

```
.child{
   width:50%;
   float:left;
   box-sizing:border-box;
   text-align:center;
   padding:10px;
   border:1px solid black;
   border-bottom:none;
}
.child:nth-child(odd){
   border-right:none;
}
.child:nth-last-child(2),
.child:nth-last-child(2) ~ .child{
   border-bottom:1px solid black
}
```

```
<div>
    <div class="child" >1</div>
    <div class="child" >2</div>
    <div class="child" >3</div>
    <div class="child" >4</div>
    <div class="child" >5</div>
    <div class="child" >6</div>
    <div class="child" >7</div>
    <div class="child" >8</div>
</div>
```

[![在此处输入图像描述](../Images/a4d8f9d298efaae6f2b6e9a53bcb5e16.png)](https://i.stack.imgur.com/Cdzpk.png)

* * *

## 回答 #7

> 赞同：5
> 
> 时间：2012-10-02T14:28:27.013

如果 div 都具有相同的类名：

```
div.things {
    border: 1px solid black;
    border-left: none;
}

div.things:first-child {
    border-right: 1px solid black;
} 
```

这里有一个[JSFiddle 演示](http://jsfiddle.net/roddy/h8hrC/)。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-10-02T14:21:11.857

将以下 CSS 添加到右侧的 div 中：

```
position: relative;
left: -1px; /* your border-width times -1 */ 
```

或者只是删除其中一个边框。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-04-23T10:44:50.190

使用 Flexbox 有必要添加第二个子容器以正确地使轮廓相互重叠......

```
<div class="grid__container">
    <div class="grid__item">
        <div class="grid__item-outline">
              <!-- content -->
        </div>
    </div>
</div> 
```

SCSS

```
.grid__container {
    display: flex;
    flex-direction: row;
    flex-wrap: wrap;
    margin: 0 1px 0 0; // margin-right 1px to give the correct width to the container
}

.grid__item {
    flex: 0 1 25%; // grid of 4
    margin: 0 0 1px; // margin-bottom to prevent double lines
}

.grid__item-outline {
    margin: 0 0 0 1px; // margin-left to prevent double lines
    outline: 1px solid #dedede;
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2021-02-24T17:54:40.730

如果您还需要在交互时更改边框颜色（例如，表单中的样本选择器），我发现了一个很好的技巧，使用负边距、填充调整和变换转换的组合。看看这个：

```
.parent{
  display: flex;
  width: 100%;
  max-width: 375px;
  margin-left:1px;
}

.child {
  margin-left: -1px;/* hide double borders behind their siblings */ 
  flex: 1 0 auto;
}

.child input {
  display:none
}

.child label {
  display:block;
  border: 1px solid #eaeaea;
  min-height: 45px;
  line-height: 45px;
  cursor: pointer;
  padding: 0 10px; /* will be changed when input is checked */
  font-size: 15px;
  text-align: center;
}

.child input:checked+label {
  border: 1px solid red;
  transform: translateX(-1px);
  padding-left: 11px;
  padding-right: 9px;
  background-color: #fafafa;
}
```

```
<div class="parent">
  <div class="child">
    <input id="swatch-1" type="radio" value="1" name="option" checked="true">
    <label for="swatch-1">Element 1</label>
   </div>
   <div class="child">
    <input id="swatch-2" type="radio" value="2" name="option">
    <label for="swatch-2">Element 2</label>
   </div>
   <div class="child">
    <input id="swatch-3" type="radio" value="3" name="option">
    <label for="swatch-3">Element 3</label>
   </div>
 </div>
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-10-02T14:28:53.907

```
 <div class="one"></div>
  <div class="two"></div>
  <div class="two"></div>
  <div class="two"></div>
  <div class="two"></div> 
```

CSS：

```
 .one{
    width:100px;
    height:100px;
    border:thin red solid;
    float:left;
  }
.two{
    width:100px;
    height:100px;
    border-style: solid solid solid none;

    border-color:red;
    border-width:1px;
    float:left;
} 
```

[jsFiddle](http://jsfiddle.net/afshinprofe/H7qrp/15/) ​</p>

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2016-09-14T10:37:58.650

我只是用

```
border-collapse: collapse; 
```

在父元素中

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-03-08T06:31:45.770

我的用例是单行中的盒子，我知道最后一个元素是什么。

```
.boxes {
  border: solid 1px black  // this could be whatever border you need
  border-right: none;
}

.furthest-right-box {
  border-right: solid 1px black !important;
} 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-05-25T11:36:12.680

我知道这是迟到的反应，但我只是想放弃我的 2 美分，因为我的做法不在这里。

你看，我真的不喜欢玩利润，*尤其是负利润*。每个浏览器似乎处理这些只是有点不同，并且边距很容易受到**很多**情况的影响。

我确保我有一个带有 div 的漂亮表格的方法是*先创建一个好的 html 结构*，然后应用 css。

我如何做的例子：

```
 <div class="tableWrap">
   <div class="tableRow tableHeaders">
     <div class="tableCell first">header1</div>
     <div class="tableCell">header2</div>
     <div class="tableCell">header3</div>
     <div class="tableCell last">header4</div>
   </div>
   <div class="tableRow">
     <div class="tableCell first">stuff</div>
     <div class="tableCell">stuff</div>
     <div class="tableCell">stuff</div>
     <div class="tableCell last">stuff</div>
   </div>
</div> 
```

现在，对于 css，我只是使用 rows 结构来确保边框只在它们需要的位置，不会导致边距；

```
.tableWrap {
  display: table;
  }

.tableRow {
  display: table-row;
  }

.tableWrap .tableRow:first-child .tableCell {
  border-top: 1px solid #777777;
  }

.tableCell {
  display: table-cell;
  border: 1px solid #777777;
  border-left: 0;
  border-top: 0;
  padding: 5px;
  }

.tableRow .tableCell:first-child {
  border-left: 1px solid #777777;
  } 
```

瞧，一张完美的桌子。现在，显然这会导致您的 DIV 在宽度上有 1px 的差异（特别是第一个），但对我来说，这从未造成任何类型的问题。如果在你的情况下确实如此，我想你会更依赖利润率。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2019-10-16T19:53:22.137

我能够使用以下代码实现它：

```
td.highlight {
    outline: 1px solid yellow !important;
    box-shadow: inset 0px 0px 0px 3px yellow;
    border-bottom: 1px solid transparent !important;
} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2020-08-28T09:39:54.363

一个非常古老的问题，但这是第一个谷歌结果，所以对于遇到这个并且不想让媒体查询在移动设备等元素的右侧/左侧重新添加边框的任何人。

我使用的解决方案是：

```
.element {
    border: 1px solid black;
    box-shadow: 0 0 0 1px black;
} 
```

这是有效的，因为您会在由边框和阴影组成的元素周围看到一个 2px 的边框。然而，在元素相遇的地方，阴影重叠，使其保持 2px 宽；

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-09-27T09:26:42.543

为了增加一个 9 岁的问题，另一种干净且响应迅速的方法是：

*   向父级添加`border-left`and`border-top`
*   `border-right`将和添加`border-bottom`到每个孩子

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2012-10-02T14:30:32.410

`margin:1px;`在你的 div 周围给出一个怎么样？

```
<html>
<style>
.brd{width:100px;height:100px;background:#c0c0c0;border:1px solid red;float:left;margin:1px;}
</style>
<body>
    <div class="brd"></div>
    <div class="brd"></div>
    <div class="brd"></div>
</body>
</html> 
```

**[演示](http://jsfiddle.net/LJdyf/2/)**

* * *

## 回答 #19

> 赞同：-3
> 
> 时间：2012-10-02T14:40:58.857

我更喜欢在它们后面使用另一个 div 作为背景并删除所有边框。您只需要计算背景 div 的大小和前景 div 的位置。

# nhibernate - NHibernate 防止级联删除

> ID：12692095
> 
> 赞同：3
> 
> 时间：2012-10-02T14:19:23.670
> 
> 标签：nhibernate, cascade, nhibernate-cascade

假设我有一个班级 Foo。我对 Foo 也有一个名为 Foo_Foo 的***视图***，它列出了 Foo 之间的多对多关联。我将此关联映射为每个 Foo 上的简单不可变集，其中 cascade="none"：

```
<set name="association" table="Foo_Foo" cascade="none" mutable="false">
  <key column="ParentFoo" />
  <many-to-many class="Foo, MyAssembly" column="BaseFoo" />
</set> 
```

但是，当我尝试删除 Foo 时，NHibernate 尝试并正确地未能删除 Foo.association。

如何防止 NHibernate 尝试删除与视图的关联？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T05:50:21.660

该集合属于`Foo`。您无法共享该集合，因此无需将其保存在数据库中。Cascade 用于告诉 NH 引用`Foo`的 s 是否也应该被删除。

为什么要将`Foo_Foo`记录保存在数据库中？如果这应该是双向的多对多自引用，它就不会像这样工作。

* * *

在理解问题后进行编辑。

Cascade 在您的情况下不起作用，因为它只影响引用的 Foos。

为避免集合表的插入/更新和删除，您可以尝试以下方法之一：

*   第一个明显的尝试是`mutable="false"`，您已经尝试过。我真的不明白为什么它不起作用。您可以在 Nhibernate 用户组中询问。
*   不太明显，但很有希望的是`inverse="true"`。Inverse 告诉 NH 集合映射到其他地方，不需要从这里存储。所以它只是省略了插入，但我不知道删除。
*   如果这不起作用，您需要探索更复杂的解决方案。您可以将其映射为引用 Foos 的一对多中间实体。中间实体是到视图的映射。它是不可变的（仍然可能导致删除语句）。在这种情况下，`cascade="false"`将起作用（因为它是被引用的实体）。它也可以配置插入、更新和删除 sql 语句（它们是空的），但这很可能甚至没有必要。

# javascript - 为 Ajax POST 序列化多个选择框

> ID：12692100
> 
> 赞同：0
> 
> 时间：2012-10-02T14:19:42.413
> 
> 标签：javascript, jquery, html

我将使用一个玩具示例来说明我的问题：

我有一个表格，可以获取有关用户的一些详细信息：

```
<form action="#" method="post" id="myform">
    <input type="text" name="fname" />
    <input type="text" name="sname" />
    <input type="text" name="birthdate" />
    <select name="hobbies">
        <option>Programming</option>
        <option>Eating cats</option>
        <option>Explaining string theory to my grandmother</option>
    </select>
</form> 
```

我将通过 ajax 调用将它发送到我的服务器，这样我就可以在不刷新页面的情况下给出某种响应：

```
$.post("myserverscript.php", $('#myform').serialize(), function(){...callback...}); 
```

这工作正常。

现在，我需要在同一页面上获取有关多个用户的相同信息。没问题，我只是添加`[]`到我的输入名称：

```
<form action="#" method="post" id="myform">
    <input type="text" name="fname[]" />
    <input type="text" name="sname[]" />
    <input type="text" name="birthdate[]" />
    <select name="hobbies[]">
        <option>Programming</option>
        <option>Eating cats</option>
        <option>Explaining string theory to my grandmother</option>
    </select>
</form> 
```

再一次，世界一切都很好。

现在，我想让用户每个人选择一个以上的爱好：

```
<form action="#" method="post" id="myform">
    <input type="text" name="fname[]" />
    <input type="text" name="sname[]" />
    <input type="text" name="birthdate[]" />
    <select name="hobbies[]" multiple>
        <option>Programming</option>
        <option>Eating cats</option>
        <option>Explaining string theory to my grandmother</option>
    </select>
</form> 
```

这就是事情开始有点梨形的地方。当我`serialize()`现在打电话时，所有的爱好都放在一个数组中——所以我无法说出哪个用户有哪些爱好。

我尝试过使用`[][]`而不是，`[]`但这只是将每个单独的项目放入爱好数组中它自己的数组中，所以我仍然丢失了用户->爱好链接。

我能看到的唯一方法是编写自己的`serialize()`方法，根据需要对事物进行分组。

有没有更好、更简单或更优雅的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:37:54.017

我有一个类似的问题，但我这样做的方式是为每个用户分配一个特定的数组

例如[这个小提琴](http://jsfiddle.net/R7mda/)

```
<form action="#" method="post" id="myform">
    <input type="text" name="user1[fname]" />
    <input type="text" name="user1[sname]" />
    <input type="text" name="user1[birthdate]" />
    <select name="user1[hobbies]" multiple>
        <option>Programming</option>
        <option>Eating cats</option>
        <option>Explaining string theory to my grandmother</option>
    </select>
    <a href="#" id="submit">Submit</a>
</form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:21:48.343

我的标准方法是将 附加`UserID`到输入名称，并在它们之间加上下划线。

所以，而不是这个：

```
<input type="text" name="fname[]" /> 
```

这将是：

```
<input type="text" name="fname_23423" /> 
```

然后，在服务器端，您将输入名称拆分为`_`. 第一个元素是输入名称，第二个元素是 ，`UserID`一切就绪。

# sql - AppHarbor 上托管的 CSV 到 SQL SERVER

> ID：12692102
> 
> 赞同：1
> 
> 时间：2012-10-02T14:19:49.987
> 
> 标签：sql, sql-server, csv, appharbor

我有一个 CSV 文件，我希望将其填充到 AppHarbor 上托管的 SQL Server 表中。

我目前通过 SQL Server Management Studio 2008 R2 连接到 SQL Server 数据库

* * *

我传统上来自 mySQL 背景。在 PHPmyadmin 中，我可以单击按钮将 CSV 文件导入新表，然后只需在 php myadmin 中重命名该表。

* * *

SQL Server 中是否有类似的功能？

如何将本地计算机上托管的 CSV 文件中的表数据插入到 AppHarbor 中托管的 SQL 服务器表中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:54:23.480

我不确定，但该实用程序能否帮助 DTSWizard.exe

"C:\Program Files\Microsoft SQL Server\100\DTS\Binn\DTSWizard.exe"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:50:27.980

您可以使用导入向导。

在 SQL Server Management Studio 中：

1.  右键单击数据库
2.  选择任务
3.  选择导入数据...
4.  使用向导导入文件

这将支持数据移动到/从许多不同的数据格式（excel、csv、flat、sql server...）

# android - 在应用程序中以编程方式读取 logcat

> ID：12692103
> 
> 赞同：133
> 
> 时间：2012-10-02T14:19:58.383
> 
> 标签：android, logcat, android-logcat

我想在我的应用程序中阅读并响应 logcat 日志。

我找到了以下代码：

```
try {
  Process process = Runtime.getRuntime().exec("logcat -d");
  BufferedReader bufferedReader = new BufferedReader(
  new InputStreamReader(process.getInputStream()));

  StringBuilder log=new StringBuilder();
  String line = "";
  while ((line = bufferedReader.readLine()) != null) {
    log.append(line);
  }
  TextView tv = (TextView)findViewById(R.id.textView1);
  tv.setText(log.toString());
  } 
catch (IOException e) {} 
```

此代码确实返回在应用程序启动之前生成的 logcat 日志 -

但是是否可以连续收听新的 logcat 日志？

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-02T15:00:40.387

您可以继续阅读日志，只需删除上面代码中的“-d”标志。

“-d”标志指示 logcat 显示日志内容并退出。如果您删除该标志，logcat 将不会终止并继续发送添加到其中的任何新行。

请记住，如果设计不正确，这可能会阻止您的应用程序。

祝你好运。

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2019-12-28T13:45:45.127

使用协程和官方的[生命周期-livedata-ktx](https://developer.android.com/kotlin/ktx#livedata)和[生命周期-viewmodel-ktx](https://developer.android.com/kotlin/ktx#viewmodel)库，它很简单：

```
class LogCatViewModel : ViewModel() {
    fun logCatOutput() = liveData(viewModelScope.coroutineContext + Dispatchers.IO) {
        Runtime.getRuntime().exec("logcat -c")
        Runtime.getRuntime().exec("logcat")
                .inputStream
                .bufferedReader()
                .useLines { lines -> lines.forEach { line -> emit(line) }
        }
    }
} 
```

**用法**

```
val logCatViewModel by viewModels<LogCatViewModel>()

logCatViewModel.logCatOutput().observe(this, Observer{ logMessage ->
    logMessageTextView.append("$logMessage\n")
}) 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2014-11-16T09:26:05.000

您可以在将 logcat 写入文件后使用此方法清除 logcat，以避免重复行：

```
public void clearLog(){
     try {
         Process process = new ProcessBuilder()
         .command("logcat", "-c")
         .redirectErrorStream(true)
         .start();
    } catch (IOException e) {
    }
} 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-06-30T23:41:14.407

这是一个快速的组合/插入，可用于捕获所有当前或所有新的（自上次请求以来）日志项。

您应该修改/扩展它，因为您可能想要返回连续流而不是 LogCapture。

Android LogCat“手册”：[https ://developer.android.com/studio/command-line/logcat.html](https://developer.android.com/studio/command-line/logcat.html)

```
import android.util.Log;

import java.io.BufferedReader;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.Calendar;
import java.util.Collection;
import java.util.Date;
import java.util.List;
import java.util.Stack;

/**
* Created by triston on 6/30/17.
*/

public class Logger {

  // http://www.java2s.com/Tutorial/Java/0040__Data-Type/SimpleDateFormat.htm
  private static final String ANDROID_LOG_TIME_FORMAT = "MM-dd kk:mm:ss.SSS";
  private static SimpleDateFormat logCatDate = new SimpleDateFormat(ANDROID_LOG_TIME_FORMAT);

  public static String lineEnding = "\n";
  private final String logKey;

  private static List<String> logKeys = new ArrayList<String>();

  Logger(String tag) {
    logKey = tag;
    if (! logKeys.contains(tag)) logKeys.add(logKey);
  }

  public static class LogCapture {
    private String lastLogTime = null;
    public final String buffer;
    public final List<String> log, keys;
    LogCapture(String oLogBuffer, List<String>oLogKeys) {
      this.buffer = oLogBuffer;
      this.keys = oLogKeys;
      this.log = new ArrayList<>();
    }
    private void close() {
      if (isEmpty()) return;
      String[] out = log.get(log.size() - 1).split(" ");
      lastLogTime = (out[0]+" "+out[1]);
    }
    private boolean isEmpty() {
      return log.size() == 0;
    }
    public LogCapture getNextCapture() {
      LogCapture capture = getLogCat(buffer, lastLogTime, keys);
      if (capture == null || capture.isEmpty()) return null;
      return capture;
    }
    public String toString() {
      StringBuilder output = new StringBuilder();
      for (String data : log) {
        output.append(data+lineEnding);
      }
      return output.toString();
    }
  }

  /**
   * Get a list of the known log keys
   * @return copy only
   */
  public static List<String> getLogKeys() {
    return logKeys.subList(0, logKeys.size() - 1);
  }

  /**
   * Platform: Android
   * Get the logcat output in time format from a buffer for this set of static logKeys.
   * @param oLogBuffer logcat buffer ring
   * @return A log capture which can be used to make further captures.
   */
  public static LogCapture getLogCat(String oLogBuffer) { return getLogCat(oLogBuffer, null, getLogKeys()); }

  /**
   * Platform: Android
   * Get the logcat output in time format from a buffer for a set of log-keys; since a specified time.
   * @param oLogBuffer logcat buffer ring
   * @param oLogTime time at which to start capturing log data, or null for all data
   * @param oLogKeys logcat tags to capture
   * @return A log capture; which can be used to make further captures.
   */
  public static LogCapture getLogCat(String oLogBuffer, String oLogTime, List<String> oLogKeys) {
    try {

      List<String>sCommand = new ArrayList<String>();
      sCommand.add("logcat");
      sCommand.add("-bmain");
      sCommand.add("-vtime");
      sCommand.add("-s");
      sCommand.add("-d");

      sCommand.add("-T"+oLogTime);

      for (String item : oLogKeys) sCommand.add(item+":V"); // log level: ALL
      sCommand.add("*:S"); // ignore logs which are not selected

      Process process = new ProcessBuilder().command(sCommand).start();

      BufferedReader bufferedReader = new BufferedReader(
        new InputStreamReader(process.getInputStream()));

      LogCapture mLogCapture = new LogCapture(oLogBuffer, oLogKeys);
      String line = "";

      long lLogTime = logCatDate.parse(oLogTime).getTime();
      if (lLogTime > 0) {
        // Synchronize with "NO YEAR CLOCK" @ unix epoch-year: 1970
        Calendar calendar = Calendar.getInstance();
        calendar.setTime(new Date(oLogTime));
        calendar.set(Calendar.YEAR, 1970);
        Date calDate = calendar.getTime();
        lLogTime = calDate.getTime();
      }

      while ((line = bufferedReader.readLine()) != null) {
        long when = logCatDate.parse(line).getTime();
        if (when > lLogTime) {
          mLogCapture.log.add(line);
          break; // stop checking for date matching
        }
      }

      // continue collecting
      while ((line = bufferedReader.readLine()) != null) mLogCapture.log.add(line);

      mLogCapture.close();
      return mLogCapture;
    } catch (Exception e) {
      // since this is a log reader, there is nowhere to go and nothing useful to do
      return null;
    }
  }

  /**
   * "Error"
   * @param e
   */
  public void failure(Exception e) {
    Log.e(logKey, Log.getStackTraceString(e));
  }

  /**
   * "Error"
   * @param message
   * @param e
   */
  public void failure(String message, Exception e) {
    Log.e(logKey, message, e);
  }

  public void warning(String message) {
    Log.w(logKey, message);
  }

  public void warning(String message, Exception e) {
    Log.w(logKey, message, e);
  }

  /**
   * "Information"
   * @param message
   */
  public void message(String message) {
    Log.i(logKey, message);
  }

  /**
   * "Debug"
   * @param message a Message
   */
  public void examination(String message) {
    Log.d(logKey, message);
  }

  /**
   * "Debug"
   * @param message a Message
   * @param e An failure
   */
  public void examination(String message, Exception e) {
    Log.d(logKey, message, e);
  }

} 
```

在执行活动记录的项目中：

```
Logger log = new Logger("SuperLog");
// perform logging methods 
```

当您想捕获通过“记录器”记录的所有内容时

```
LogCapture capture = Logger.getLogCat("main"); 
```

当你饿了，你想吃更多的原木时

```
LogCapture nextCapture = capture.getNextCapture(); 
```

您可以将捕获作为字符串获取

```
String captureString = capture.toString(); 
```

或者您可以使用以下命令获取捕获的日志项

```
String logItem = capture.log.get(itemNumber); 
```

没有精确的静态方法来捕获外日志键，但有一种方法

```
LogCapture foreignCapture = Logger.getLogCat("main", null, foreignCaptureKeyList); 
```

使用上述也将允许您调用`Logger.this.nextCapture`外国捕获。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2013-01-27T17:50:37.450

“-c”标志清除缓冲区。

-c 清除（刷新）整个日志并退出。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-02-21T11:21:27.233

```
 //CLEAR LOGS
            Runtime.getRuntime().exec("logcat -c");
            //LISTEN TO NEW LOGS
            Process pq=Runtime.getRuntime().exec("logcat v main");
            BufferedReader brq = new BufferedReader(new InputStreamReader(pq.getInputStream()));
            String sq="";
            while ((sq = brq.readLine()) != null)
            {
              //CHECK YOUR MSG HERE 
              if(sq.contains("send MMS with param"))
              {
              }
            } 
```

我在我的应用程序中使用它并且它有效。你可以在 Timer Task 中使用上面的代码，这样它就不会停止你的主线程

```
 Timer t;
        this.t.schedule(new TimerTask()
        {
          public void run()
          {
            try
            {
                ReadMessageResponse.this.startRecord();//ABOVE METHOD HERE

            }
            catch (IOException ex)
            {
              //NEED TO CHECK SOME VARIABLE TO STOP MONITORING LOGS 
              System.err.println("Record Stopped");
            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            finally
            {
                ReadMessageResponse.this.t.cancel();
            }
          }
        }, 0L);
      } 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2021-07-13T10:17:11.050

根据@user1185087 的回答，没有 ViewModel 的简单解决方案可能是：

在 IO 线程上启动作业：

```
// Custom scope for collecting logs on IO threads.
val scope = CoroutineScope(Job() + Dispatchers.IO)

val job = scope.launch {
    Runtime.getRuntime().exec("logcat -c") // Clear logs
    Runtime.getRuntime().exec("logcat") // Start to capture new logs
        .inputStream 
        .bufferedReader()
        .useLines { lines ->
            // Note that this forEach loop is an infinite loop until this job is cancelled.
            lines.forEach { newLine ->
                // Check whether this job is cancelled, since a coroutine must
                // cooperate to be cancellable.
                ensureActive()  
                // TODO: Write newLine into a file or buffer or anywhere appropriate              
            }
        }
} 
```

从主线程取消作业：

```
MainScope().launch {
    // Cancel the job and wait for its completion on main thread.
    job.cancelAndJoin()
    job = null // May be necessary
    // TODO: Anything else you may want to clean up
} 
```

如果您想在后台线程上连续收集应用程序的新日志，此解决方案就足够了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-09-12T06:57:53.357

尝试将此权限添加到 mainfest：

```
<uses-permission android:name="android.permission.READ_LOGS"/> 
```

# java - 在没有支持bean的情况下切换jsf组件？

> ID：12692104
> 
> 赞同：0
> 
> 时间：2012-10-02T14:20:02.580
> 
> 标签：java, ajax, jsf

如果单击 ajax 标记所属的按钮，我如何使用（例如 ajax）显示特定的 jsf 元素？但是无需使用任何 backing bean，只需通过没有 JavaScript 的 JSF 组件？那可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:46:27.830

Luiggi 是对的，你最好使用 js 进行客户端切换

但是，我认为你可以像这样绑定

```
<h:inputText id="first" binding="#{someViewButNonManagedBeanObject}"`... 
```

然后

```
<h:inputText id="second" render="#{no empty someViewButNonManagedBeanObject}"`... 
```

或者

```
<h:inputText id="second" render="#{someViewButNonManagedBeanObject.value eq 'wow'}"`... 
```

**（未测试）**

# java - Android中的静态字段寿命

> ID：12692106
> 
> 赞同：1
> 
> 时间：2012-10-02T14:20:15.547
> 
> 标签：java, android, static, garbage-collection

快速的问题，但我在文档中找不到答案。

**Android 应用程序中静态字段的生命周期是多少？** 什么时候初始化，什么时候销毁？最终属性是否会修改其生命周期？私人/公共呢？只要应用程序实例还活着，它们就存在吗？

举两个例子：

```
public class DemoClass {
   static int one = 1;
   static int three = DemoActivity.two + one;
}

public class DemoActivity extends Activity {
     public static int two = DemoClass.one + DemoClass.one;
     private static final int four;
     public static int five;

     public void onCreate(Bundle b) {
          four = two + two;
          five = DemoClass.three  + DemoClass.one + DemoClass.one;

     }

} 
```

编辑：还有静态字典呢？

例如，

```
public class AnotherDemoActivity extends Activity {
public static ArrayList<String> strings = new ArrayList<String>();

@Override public void onCreate(Bundle b) {
   strings.add("test");
   strings.add(new String("another test");
   strings.add(new DemoClass());
} 
```

“字符串”元素会存在多久？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T14:28:16.640

> 什么时候初始化，什么时候销毁？

它在声明它的类被加载时被初始化，它将一直存在到您的应用程序进程结束。

> 最终属性是否会修改其生命周期？

不

> 私人/公共呢？

不

> 只要应用程序实例还活着，它们就存在吗？

是的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:21:14.383

*   `static`范围是直到类被取消部署。它将在
    启动时启动（在 load 之后）。
    不，最终属性不会修改上述行为。

# c++ - 为什么会发出如此复杂的代码来将有符号整数除以 2 的幂？

> ID：12692111
> 
> 赞同：44
> 
> 时间：2012-10-02T14:20:25.603
> 
> 标签：c++, visual-c++, assembly, x86, division

当我用 VC++10 编译这段代码时：

```
DWORD ran = rand();
return ran / 4096; 
```

我得到这个反汇编：

```
299: {
300:    DWORD ran = rand();
  00403940  call        dword ptr [__imp__rand (4050C0h)]  
301:    return ran / 4096;
  00403946  shr         eax,0Ch  
302: }
  00403949  ret 
```

它简洁明了，并用逻辑右移代替了除以 2 的幂。

然而，当我编译这段代码时：

```
int ran = rand();
return ran / 4096; 
```

我得到这个反汇编：

```
299: {
300:    int ran = rand();
  00403940  call        dword ptr [__imp__rand (4050C0h)]  
301:    return ran / 4096;
  00403946  cdq  
  00403947  and         edx,0FFFh  
  0040394D  add         eax,edx  
  0040394F  sar         eax,0Ch  
302: }
  00403952  ret 
```

在进行右算术移位之前执行一些操作。

这些额外的操作需要什么？为什么算术移位还不够？

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-10-02T14:21:34.180

原因是无符号除以 2^n 可以非常简单地实现，而有符号除法稍微复杂一些。

```
unsigned int u;
int v; 
```

`u / 4096`等价于`u >> 12`的所有可能值`u`。

`v / 4096`不**等价**于`v >> 12`- 它在 时分解`v < 0`，因为当涉及负数时，移位与除法的舍入方向不同。

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-10-02T14:23:12.193

“额外的操作”弥补了算术右移将结果向负无穷大舍入，而除法将结果向零舍入这一事实。

例如，`-1 >> 1`是`-1`，`-1/2`而是`0`。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-10-02T14:30:22.950

来自 C 标准：

> 整数相除时，/ 运算符的结果是去掉任何小数部分的代数商。105) 如果商 a/b 是可表示的，则表达式 (a/b)*b + a%b 应等于 a；否则，a/b 和 a%b 的行为都是未定义的。

不难想到 a 的负值不遵循纯算术移位的规则的例子。例如

```
(-8191) / 4096 -> -1
(-8191) % 4096 -> -4095 
```

满足方程，而

```
(-8191) >> 12 -> -2 (assuming arithmetic shifting) 
```

不是截断除法，因此`-2 * 4096 - 4095`肯定不等于 -8191。

请注意，负数的移位实际上是实现定义的，因此根据`(-8191) >> 12`标准，C 表达式没有通常正确的结果。

# c++ - CreateDeviceEx 有时会返回 D3DERR_DRIVERINVALIDCALL

> ID：12692113
> 
> 赞同：0
> 
> 时间：2012-10-02T14:20:32.057
> 
> 标签：c++, directx-9

有时，不是一直……在创建 D3D 设备时，我收到错误代码 D3DERR_DRIVERINVALIDCAL，然后其他时候我收到 S_OK。

在过去的 3 天里，我一直被困在这个问题上，持续到第 4 位。

查看有关此错误代码的文档，将其描述为未使用，这非常令人困惑。

任何人都可以解释一下吗？

```
HRESULT     hr = S_OK;
HWND        hwnd = NULL;
HMONITOR    hMonitor = NULL;
UINT        uAdapterID = D3DADAPTER_DEFAULT;
DWORD       vp = 0;

D3DCAPS9    ddCaps;
ZeroMemory(&ddCaps, sizeof(ddCaps));

IDirect3DDevice9* pDevice = NULL;

// Hold the lock because we might be discarding an exisiting device.
AutoLock lock(m_ObjectLock);    

if (!m_pD3D9 || !m_pDeviceManager)
{
    return MF_E_NOT_INITIALIZED;
}

hwnd = GetDesktopWindow();

// Note: The presenter creates additional swap chains to present the
// video frames. Therefore, it does not use the device's implicit 
// swap chain, so the size of the back buffer here is 1 x 1.

D3DPRESENT_PARAMETERS pp;
ZeroMemory(&pp, sizeof(pp));

pp.BackBufferWidth = 1;
pp.BackBufferHeight = 1;
pp.Windowed = TRUE;
pp.SwapEffect = D3DSWAPEFFECT_COPY;
pp.BackBufferFormat = D3DFMT_UNKNOWN;
pp.hDeviceWindow = hwnd;
pp.Flags = D3DPRESENTFLAG_VIDEO;
pp.PresentationInterval = D3DPRESENT_INTERVAL_DEFAULT;

// Find the monitor for this window.
if (m_hwnd)
{
    hMonitor = MonitorFromWindow(m_hwnd, MONITOR_DEFAULTTONEAREST);

    // Find the corresponding adapter.
    CHECK_HR(hr = FindAdapter(m_pD3D9, hMonitor, &uAdapterID));
}

// Get the device caps for this adapter.
CHECK_HR(hr = m_pD3D9->GetDeviceCaps(uAdapterID, D3DDEVTYPE_HAL, &ddCaps));

if(ddCaps.DevCaps & D3DDEVCAPS_HWTRANSFORMANDLIGHT)
{
    vp = D3DCREATE_HARDWARE_VERTEXPROCESSING;
}
else
{
    vp = D3DCREATE_SOFTWARE_VERTEXPROCESSING;
}

IDirect3DDevice9Ex * pDeviceEx;

// Create the device.
CHECK_HR(hr = m_pD3D9->CreateDeviceEx(uAdapterID,
                                        D3DDEVTYPE_HAL,
                                        pp.hDeviceWindow,
                                        vp | D3DCREATE_NOWINDOWCHANGES | D3DCREATE_MULTITHREADED | D3DCREATE_FPU_PRESERVE,
                                        &pp, 
                                        NULL,
                                        &pDeviceEx)); 
```

**UPDATE** 将 CreateDeviceEx 包装在一个 while 循环中，直到它等于 S_OK 最终会起作用......但是首先是什么导致这种情况发生？

# asp.net - 在gridview错误中获取数据行值

> ID：12692116
> 
> 赞同：0
> 
> 时间：2012-10-02T14:20:44.133
> 
> 标签：asp.net, gridview

我有以下aspx代码；

```
 <asp:GridView ID="GridView1" runat="server" AllowPaging="True"
AllowSorting="True" AutoGenerateColumns="False" DataKeyNames="ProductId"
DataSourceID="edsinventory" OnRowCommand="GridView1_RowCommand"
ShowFooter="true" CssClass="mGrid">

    <Columns>
      <asp:TemplateField ShowHeader="False">
        <EditItemTemplate>
            <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="True" 
                CommandName="Update" Text="Update"></asp:LinkButton>
            &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                CommandName="Cancel" Text="Cancel"></asp:LinkButton>
        </EditItemTemplate>
        <FooterTemplate><asp:LinkButton ID="LinkButton3" runat="server" CommandName="Insert">Insert</asp:LinkButton></FooterTemplate>
        <ItemTemplate>
            <asp:LinkButton ID="LinkButton1" runat="server" CausesValidation="False" 
                CommandName="Edit" Text="Edit"></asp:LinkButton>
            &nbsp;<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" 
                CommandName="Delete" Text="Delete"></asp:LinkButton>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="Id" InsertVisible="False" 
        SortExpression="Id">
        <EditItemTemplate>
            <asp:Label ID="lblEditId" runat="server" Text='<%# Eval("Id") %>'></asp:Label>
        </EditItemTemplate>
        <ItemTemplate>
            <asp:Label ID="lblId" runat="server" Text='<%# Bind("Id")%>'></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>
    <asp:TemplateField HeaderText="ProductId" SortExpression="ProductId">
        <EditItemTemplate>
            <asp:TextBox ID="tbProdId" Width="50" runat="server" Text='<%# Bind("ProductId")%>'></asp:TextBox>
        </EditItemTemplate>
        <FooterTemplate>
            <asp:TextBox ID="tbInsertProdId" Width="50" runat="server"></asp:TextBox>
        </FooterTemplate>
        <ItemTemplate>
            <asp:Label ID="lblProdId"  runat="server" Text='<%# Bind("ProductId")%>'></asp:Label>
        </ItemTemplate>
    </asp:TemplateField>
    'shortened for brevity

    </Columns>
</asp:GridView> 
```

这是后面的代码

```
 Protected Sub GridView1_RowCommand(sender As Object, e As GridViewCommandEventArgs)
    ' This just provides easier access to the Cells in the GridView
    Dim cells = GridView1.FooterRow.Cells
    Dim ctx As New teckEntities()
    Dim addInventory As New inventory()

    If e.CommandName = ("Insert") Then
        'Create new Inventory object
        addInventory.ProductId = Convert.ToInt32(DirectCast(cells(3).FindControl("tbInsertProdId"), TextBox).Text)
        addInventory.Quantity = Convert.ToInt32(DirectCast(cells(4).FindControl("tbInsertQuantity"), TextBox).Text)
        addInventory.Location = Convert.ToString(DirectCast(cells(1).FindControl("tbInsertLocation"), TextBox).Text)
        'attach the fields to the inventory context
        ' note: Id autoincrements and doesn't need to be set manually

        InsertInventoryItem(addInventory)
        'need to call a gridview refresh here
        GridView1.DataBind()
    ElseIf e.CommandName = "Delete" Then

        **addInventory.Id = Convert.ToInt32(DirectCast(cells(3).FindControl("lblEditId"), Label).Text)**

        DeleteInventoryItem(Convert.ToInt32(addInventory.Id))
        GridView1.DataBind()
    End If

End Sub 
```

我在删除例程中出现以下错误**，为什么？插入功能以相同的方式工作并且正常工作。你调用的对象是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T18:02:45.547

我认为问题在于您正在查看页脚控件中的 Label lblEditId：

```
Dim cells = GridView1.FooterRow.Cells
...
addInventory.Id = Convert.ToInt32(DirectCast(cells(3).FindControl("lblEditId"), Label).Text) 
```

试试这个：

将删除链接按钮更新为（将 ID 添加到 CommandArgument）：

```
<asp:LinkButton ID="LinkButton2" runat="server" CausesValidation="False" CommandName="Delete"  CommandArgument='<%#Eval("Id")%>' Text="Delete"></asp:LinkButton> 
```

然后，将您的 ** 代码替换为： 注意：根据您提供的代码，lblEditId 似乎在第 2 列中，因此 Cell(1) - 基于零的索引，而不是 Cell(3)。

```
addInventory.Id = Convert.ToInt32(DirectCast(GridView1.Rows(e.CommandArgument).Cells(1).FindControl("lblEditId"), Label).Text) 
```

# java - 在android中创建自定义事件的问题

> ID：12692117
> 
> 赞同：0
> 
> 时间：2012-10-02T14:20:45.240
> 
> 标签：java, android, events, callback, listener

我正在编写一个自定义事件，希望得到一些帮助。我要谈论的大部分内容都是基于[Android 应用上的自定义事件侦听器提供的帮助](https://stackoverflow.com/questions/2983250/custom-event-listener-on-android-app)

所以这是我的问题。我正在编写一个应用程序，它需要从网上下载更新的图像，将图像存储在手机上，然后再显示这些图像。基本上，我会在启动画面期间下载任何需要的图像。然后，当图像被下载和存储时，启动屏幕会清除，并且任何必要的（新下载的）图像都会显示在屏幕上。这是问题所在：下载过程是通过异步任务完成的，因此无法在异步任务中完成将图像加载到屏幕上的部分。它必须在主 UI 线程上完成。我想为主线程创建一个事件和一个自定义事件侦听器来侦听，这基本上告诉主 UI 线程可以安全地开始从内存中加载下载的图像。

根据上面链接的讨论，到目前为止我想出了这个......下载监听器接口

```
public interface DataDownloadListener {
 void onDownloadStarted();
 void onDownloadFinished();
} 
```

一个事件类...

```
 public class DataDownloadEvent {
      ArrayList<DataDownloadListener> listeners = new ArrayList<DataDownloadListener>();
      public void setOnDownload(DataDownloadListener listener){
           this.listeners.add(listener);
      }
 } 
```

我的问题是我不明白在这些说明中将最后两个步骤放在哪里。我认为我必须将侦听器和事件放在实际启动下载的类中。但是哪里？这是我启动下载并将其保存到设备的函数：

```
 public String download(String sourceLocation) {
    String filename = "";
    String path = "";
    try {
        File externalStorageDirectory = Environment
                .getExternalStorageDirectory();
        URL urlTmp = new URL(sourceLocation);
        filename = urlTmp.getFile()
                .substring(filename.lastIndexOf("/") + 1);
        path = externalStorageDirectory + PATH;

        // check if the path exists
        File f = new File(path);
        if (!f.exists()) {
            f.mkdirs();
        }

        filename = path + filename;
        f = new File(filename);

        //only perform the download if the file doesn't already exist
        if (!f.exists()) {

            Bitmap bitmap = BitmapFactory.decodeStream(urlTmp.openStream());
            FileOutputStream fileOutputStream = new FileOutputStream(
                    filename);
            if (bitmap != null) {
                bitmap.compress(getFormat(filename), 50, fileOutputStream);
                Log.d(TAG, "Saved image " + filename);
                return filename;
            }
        }
        else{
            Log.d(TAG, "Image already exists: " + filename + " Not re-downloading file.");
        }
    } catch (MalformedURLException e) {
        //bad url
    } catch (IOException e) {
        //save error
    }

    return null;
} 
```

关于注册监听器的最后一步，我把它放在哪里？说明说在初始化期间把它放在某个地方。这是否意味着在我的主要活动的 onCreate 方法中？在主要活动的导入部分的课程之外？以前从未做过自定义活动，因此将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:35:22.800

> 根据上面链接的讨论，到目前为止我想出了这个......下载监听器接口
> 
> 公共接口 DataDownloadListener { void onDownloadStarted(); 无效 onDownloadFinished(); }
> 
> 一个事件类...
> 
> ```
> public class DataDownloadEvent {
>       ArrayList<DataDownloadListener> listeners = new ArrayList<DataDownloadListener>();
>       public void setOnDownload(DataDownloadListener listener){
>            this.listeners.add(listener);
>       }
>  } 
> ```

行...

现在在您的下载过程中，在下载开始时，循环**侦听**器ArrayList 上的所有元素并调用**onDownloadStarted**事件以通知所有侦听器下载刚刚开始（在这种情况下，我假设您需要打开闪屏）。

始终在您的下载过程中，在下载时，循环**侦听**器ArrayList 上的所有元素并调用**onDownloadFinished**事件以通知所有侦听器下载已完成（现在关闭启动画面）。

**如何**在下载完成时循环监听器

```
 foreach(DataDownloadListener downloadListener: listeners){
        downloadListener.onDownloadFinished();
  } 
```

**如何**在下载开始时循环监听器

```
 foreach(DataDownloadListener downloadListener: listeners){
        downloadListener.onDownloadStarted();
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T17:15:45.697

如果可能，不要让它成为静态...在您将用于下载文件的类中，只需添加您放入**DataDownloadEvent**类的内容（侦听器 arrayList 和用于添加和删除的工具方法）。您没有立即需要以这种方式使用类（我的意思是静态成员）。

例子

```
 public class DownloadFileClassExample{
      private ArrayList<DataDownloadListener> listeners = new ArrayList<DataDownloadListener>();

  public DownloadFileClassExample(){

  }

  public void addDownloadListener(DataDownloadListener listener){
       listeners.add(listener);
  }

  public void removeDownloadListener(DataDownloadListener listener){
       listeners.remove(listener);
  }
   //this is your download procedure
   public void downloadFile(){...}
  } 
```

然后以这种方式访问​​您的课程

```
 DownloadFileClassExample example = new DownloadFileClassExample();
  example.addDownloadListener(this); // if your class is implementing the **DataDownloadListener** 
```

或使用

```
 example.addDownloadListener( new DataDownloadListener{...}) 
```

# java - 处理这个问题的正确设计是什么？

> ID：12692119
> 
> 赞同：5
> 
> 时间：2012-10-02T14:20:50.550
> 
> 标签：java, oop, design-patterns, refactoring

我正在开发一个遗留 Java 应用程序，它处理“水果”和“蔬菜”，比如说，为了这个问题。它们在内部被视为不同的事物，因为它们没有共同的所有方法/属性，但是很多事情都与它们非常相似。

所以，我们有很多方法*doSomethingWithAFruit(Fruit f)*和*doSomethingWithAVegetable(Veg v)*，它们使用正确的*doOtherStuffWithAFruit(Fruit f)* / *doOtherStuffWithAVeg(Veg v)*。和那些非常相似，除了用水果做事情的方法只调用水果做事情的方法，蔬菜也一样。

我想重构它以减少重复，但我不确定实现这一目标的最佳方法是什么。我读过一些关于一些设计模式的文章，但我不知道它是否让我更清楚。（我可以在我使用的代码中识别出一些模式，但我真的不知道什么时候应该应用模式来改进周围的事情。也许我应该阅读更多关于重构本身的内容......）

我在考虑这两个选项：

**1.**创建一个类，该类可以有一个水果或蔬菜的实例，并将其传递给方法，尽量减少重复。它会是这样的：

```
public void doSomething(Plant p) {
   // do the stuff that is  common, and then...
   if (p.hasFruit()) {
       doThingWithFruit(p.getFruit());
   } else {
       doThingWithVegetable(p.getVegetable());
   }
} 
```

这会让事情变得更好，但我不知道......它仍然感觉不对。

**2.**我认为的另一种选择是在水果和蔬菜中放置一个界面，其中包含它们共有的东西，并使用它来传递它。`instanceof`我觉得这是更清洁的方法，尽管当需要特定于它们的东西时，我将不得不使用并转换为 Fruit/Vegetable。

那么，我还能在这里做什么呢？这些方法的缺点是什么？

**更新：**请注意，这个问题有点简化，我正在寻找用“植物”做事的方法，也就是说，主要是“使用”它们而不是对它们做事的代码。话虽如此，我所指的那些类似方法不能在“植物”类中，而且它们通常还有另一个参数，例如：

```
public void createSomethingUsingFruit(Something s, Fruit f);
public void createSomethingUsingVegetable(Something s, Vegetable v); 
```

也就是说，这些方法除了 Fruits/Vegetables 之外还有其他问题，并且不适合放在任何 Fruit/Vegetable 类中。

**更新 2：**这些方法中的大多数代码仅从 Fruit/Vegetable 对象读取状态，并根据适当的类型创建其他类的实例，存储在数据库中等等——*从我对评论中问题的回答，我认为这很重要*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:26:29.060

我认为第二种方法会更好..设计接口始终是一种更好的设计方式..这样您就可以轻松地在实现之间切换..

如果您使用接口，则不需要进行类型转换，因为您可以轻松利用`polymorphism`.. 的概念。也就是说，您将拥有指向子类对象的 `Base class reference..

但是，如果您只想保留接口通用的方法`fruits`和`vegetables`接口中的方法，以及实现类中的特定实现..那么在这种情况下`typecasting`将需要..

因此，您可以在接口级别拥有一个通用方法..以及在实现级别拥有更具体的方法..

```
public interface Food {
    public void eat(Food food);
}

public class Fruit implements Food {

    // Can have interface reference as parameter.. But will take Fruit object    
    public void eat(Food food) {
        / ** Fruit specific task **/
    }
}

public class Vegetable implements Food {

    // Can have interface reference as parameter.. But will take Vegetable object
    public void eat(Food food) {
        /** Vegetable specific task **/
    }
}

public class Test {
    public static void main(String args[]) {
         Food fruit = new Fruit();
         fruit.eat(new Fruit());    // Invoke Fruit Version

         Food vegetable = new Vegetable();
         vegetable.eat(new Vegetable());   // Invoke vegetable version

    }
} 
```

好的，我已经修改了一个代码来制作`eat()`方法来获取类型的参数`Food`..这不会有太大的区别..您可以将`Vegetable`对象传递给`Food`引用..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T18:53:02.553

如果您具有分别特定于水果和蔬菜的功能，并且使用这两种类型的客户端必须区分（使用`instanceof`） - 这是一个连贯与耦合问题。

也许考虑是否将所述功能放置在水果和蔬菜本身附近而不是与客户一起更好。然后客户端可能会以某种方式被引用（通过通用接口）而不关心他正在处理的实例。至少从客户的角度来看，多态性将被保留。

但这是理论上的，对于您的用例可能不实用或过度设计。或者你最终可能只是隐藏`instanceof`在你设计的其他地方。`instanceof`当你开始在水果和蔬菜旁边有更多的继承兄弟姐妹时，这将是一件坏事。然后你就会开始违反[开放封闭原则](http://en.wikipedia.org/wiki/Open_Closed_Principle)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T20:52:14.810

您可以使用或将其作为解决方案的一部分包含的另一个选项是询问使用者是否可以管理您传递给它的对象。此时，消费者有责任确保它知道如何处理您发送给它的对象。

例如，如果您的消费者名为 Eat，您将执行以下操作：

```
Consumer e = new Eat();
Consumer w = new Water();
if( e.canProcess( myFruit ) )
   e.doSomethingWith( myFruit );
else if ( w.canProcess( myFruit ) )
   w.doSomethingWith( myFruit );

.... etc 
```

但是最终你会得到很多 it/else 类，所以你自己创建了一个工厂来决定你想要哪个消费者。您的工厂基本上执行 if/else 分支以确定哪个消费者可以处理您传递的对象，并将消费者返回给您。

所以它看起来像

```
public class Factory {
   public static Consumer getConsumer( Object o ){
    Consumer e = new Eat();
    Consumer w = new Water();
    if( e.canProcess( o ) )
       return e;
    else if ( w.canProcess( o ) )
       return w;
   }
} 
```

然后你的代码变成：

```
Consumer c = Factory.getConsumer( myFruit );
c.doSomethingWith( myFruit ); 
```

当然，`canProcess`在消费者的方法中，它基本上是一个 instanceof 或您派生的其他函数，以确定它是否可以处理您的类。

```
public class Eat implements Consumer{
   public boolean canProcess(Object o ){
     return o instanceof Fruit;
   }
} 
```

因此，您最终将责任从您的类转移到工厂类，以确定可以处理哪些对象。当然，诀窍是所有消费者都必须实现一个通用接口。

我意识到我的伪代码是非常基础的，但这只是为了指出总体思路。根据您的类的结构，这可能会或可能不会起作用和/或变得过大，但如果设计得当，可以显着提高代码的可读性，并真正将每种类型的所有逻辑都保留在自己的类中没有 instanceof 和 if/then 分散在各处。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T14:27:58.477

我会创建和抽象基类（比如说 - 食物，但我不知道你的领域，其他东西可能更适合）并开始一个接一个地将方法迁移到它。

如果您看到 'doSomethingWithVeg' 和 'doSomthingWithFruit' 略有不同 - 在基类中创建 'doSomething' 方法并使用抽象方法仅执行不同的部分（我猜主要业务逻辑可以统一，并且只有像写入数据库/文件这样的小问题不同）。

当您准备好一种方法时 - 测试它。在你确定没问题之后 - 去另一个。完成后，Fruit 和 Veg 类不应该有任何方法，而是抽象方法的实现（它们之间的微小差异）。

希望能帮助到你..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T14:29:00.240

这是一个基本的OOD问题。因为水果和蔬菜属于植物类型。我会建议：

```
interface Plant {
    doSomething();
}

class Vegetable {
    doSomething(){
    ....
    }
} 
```

水果也是如此。

在我看来，doOtherStuff 方法对于相关类应该是私有的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T14:45:16.143

您还可以考虑让它们都实现多个接口，而不仅仅是一个。这样你就可以根据情况对最有意义的接口进行编码，这将有助于避免强制转换。有什么`Comparable<T>`作用。它有助于方法（例如对对象进行排序的方法），它们不关心对象是什么，唯一的要求是它们必须具有可比性。例如，在您的情况下，两者都可以实现一些名为 的接口`Edible`，然后将它们都作为`Edible`预期的位置`Edible`。

# css - div 内容无法正确对齐，谁能帮我解决这个问题？

> ID：12692120
> 
> 赞同：0
> 
> 时间：2012-10-02T14:20:52.677
> 
> 标签：css, css-float

嗨，所以我已将我的 div 设置为浮动，右侧是 worpress 新闻内容，左侧是日期和评论气泡，唯一的问题是第二个帖子的日期在第一个帖子的日期旁边，我没有不知道为什么会这样。

![在此处输入图像描述](../Images/007aa96b60d950d21bf1810f433cbc8a.png)

看看日期如何与第一个日期对齐，它不应该在那里，它应该与下面的帖子对齐，下面帖子上的日期应该与第三个帖子对齐，下面是我的 css

```
#content {
width: 1070px;
}
.right{
position:relative;
float:right;
right:215px;
}

.left{
position:relative;
float:left;
left:200px; 
display:block;
}

.date{
width:80px;
margin: 0px 0px 0px 0px;
padding: 0px 0px 0px 0px;
}

.month {
color:#fff;
font-size:15px;
font-family:eurofurence;
text-transform:uppercase;  
}

.year {
color:#fff;
padding:0 0 7px 0;
font-size:30px;
font-family:eurofurence;
text-transform:uppercase;  
}

.commentbubble{
  background: url('http://bleedartmedia.com/mock/wp-content/themes/KellyRowland/images/commentb.png') no-repeat;
  width:40px;
  height:49px;
  padding:4px 0 0 14px;
 }
    .entry {
margin: 0px 0px 0px 0px;
padding: 0px 10px 0px 10px;
border-bottom: 0px solid #cccccc;
    font-family:eurofurence;
    font-size:17px;
    width:610px;
    background:#000;
}

    .entry-top {
margin: 0 0 0px 0;
padding: 0 0 0px 0;
text-align: left;

}

    .entry-top .entry-title {
color: #fff;
    font-family:eurofurence light;
    font-size:28px;
}

    .entry-top .entry-author {
font-style: italic;
}

    .entry-title {
margin: 0;
padding: 0;
font-size: 1.3em;
font-weight: bold;
line-height: normal;
font-stretch: narrower;
}

    .entry-title a:link,
    .entry-title a:visited {
color: #fff;
    font-family:eurofurence light;
    font-size:28px;
}

    .entry-title a:hover {
color: #3E7AB9;
text-decoration: none;
}

    .entry-content {
margin: 10px 0 10px 0;
padding: 0px 10px 10px 10px; 
    font-family:eurofurence;
    font-size:17px;
} 
```

这是编码

```
 <div id="content">
    <?php while ( have_posts() ) : the_post() ?>

  <div class="date left">
     <div class='month'><?php the_date('M');?></div>
     <div class='year'><?php the_time('d');?></div>

     <div class="commentbubble">
   <?php comments_popup_link( __( '0', 'wpbx' ), __( '1', 'wpbx' ), __( '%', 'wpbx' ) ) ?>
      </div>
      Comments
    </div>

            <div class="entry right">
    <div class="entry-top">
            <h2 class="entry-title"><?php the_title() ?></h2>
    </div>
            <div class="entry-content clearfix">

        <div class="entry-content">
                <div id="text"><?php the_content() ?></div>
                </div>

            </div>
            <div class="entry-meta">

            </div>

    </div><!-- .post -->
      <br>
      <?php endwhile; ?>

    </div><!-- #content --> 
```

谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:31:49.987

添加

```
.entry:after {
    clear: both;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:18:47.293

尝试在 CSS 中的 .date 或 .left 类中添加“clear:left”。

# git - 如何使不可见的其余行转移到 git log --graph 输出中的新行？

> ID：12692125
> 
> 赞同：0
> 
> 时间：2012-10-02T14:21:00.893
> 
> 标签：git, graph, terminal

在*.gitconfig*我有这个别名：

```
[alias]
    ...
    ...
    ...
    lg1 = log --graph --all --format=format:'%C(bold blue)%h%C(reset) - %C(bold green)(%ar)%C(reset) %C(white)%s%C(reset) %C(bold white)- %an%C(reset)%C(bold yellow)%d%C(reset)' --abbrev-commit --date=relative 
```

所以我得到的结果是：

```
$ g gl1 -12

* 1b9f1d0 - (20 hours ago) recreated (again) for pyton 2.7 and some new features in DB. - xiaose (xiaose-site)
* 409f299 - (5 months ago) changed internal structure. Start frontend design. - xiaose
* ff0ede9 - (5 months ago) Trying to implement new design. Everything starts from beginning. - xiaose
| * 97c9f4e - (7 months ago) Changed PNG beam to SVG and added 2 states in "Symbol" as normal & small symbols. - xiaose (xiaose-predator)
| * c97b838 - (7 months ago) Top level QML which send signal about increment value every second. - xiaose
| * d5859ee - (7 months ago) Symbol definition. There is JS file with actions for increasing & set up some number in symbol. That symbol can show numbers from 0 to 511\. - xiaose
| * 1e850e7 - (7 months ago) Beam definition. In one symbol used 9 beams. 5 at the top + 4 at the bottom. - xiaose
| * 92cc1d2 - (7 months ago) There will be QML counter in Predator's style. - xiaose
|/  
* fcd26c9 - (7 months ago) Initial commit. There are my own project for future impl. in productin. - xiaose (xiaose)
| * c2561c3 - (5 days ago) GT1\. Fixed issue when hash checking got error & totals in order was 0\. - xiaose (gt1)
| * 7dab789 - (5 days ago) GT1\. Fixing issue in PP responce. - Justin Felisco
| | * d56e7fa - (5 days ago) GT1\. Changes in PayPal. - Justin Felisco (grx1) 
```

一切看起来都不错，但是对于小终端窗口，我得到了这样的结果：

```
$ g gl1 -12

* 1b9f1d0 - (20 hours ago) recreated (again) for pyton 2.7 and some new feat    
* 409f299 - (5 months ago) changed internal structure. Start frontend design    
* ff0ede9 - (5 months ago) Trying to implement new design. Everything starts    
| * 97c9f4e - (7 months ago) Changed PNG beam to SVG and added 2 states in "   
| * c97b838 - (7 months ago) Top level QML which send signal about increment   
| * d5859ee - (7 months ago) Symbol definition. There is JS file with action   
| * 1e850e7 - (7 months ago) Beam definition. In one symbol used 9 beams. 5    
| * 92cc1d2 - (7 months ago) There will be QML counter in Predator's style.    
|/  
* fcd26c9 - (7 months ago) Initial commit. There are my own project for futu   
| * c2561c3 - (5 days ago) GT1\. Fixed issue when hash checking got error & t   
| * 7dab789 - (5 days ago) GT1\. Fixing issue in PP responce. - Justin Felisc   
| | * d56e7fa - (5 days ago) GT1\. Changes in PayPal. - Justin Felisco (grx1) 
```

所以我的问题是：有没有可能做某事。让字符串分开，其余的被转移到新的线？

存在一种将字符串包装为的方式（如评论中所述）：

```
$ git lg1 -9 | fold -s -w 70

* 1b9f1d0 - (22 hours ago) recreated (again) 
for pyton 2.7 and some new features. - xiaose 
(xiaose-site)
* 409f299 - (5 months ago) changed internal 
structure. Start frontend design. - xiaose
* ff0ede9 - (5 months ago) Trying to implement new design. 
Everything starts from beginning - xiaose
| * 97c9f4e - (7 months ago) Changed PNG 
beam to SVG and added 2 states in "Symbol" as normal & small 
symbols. - xiaose (xiaose-predator)
| * c97b838 - (7 months ago) Top level QML 
which send signal about increment value every second. - 
xiaose
| * d5859ee - (7 months ago) Symbol 
definition. There is JS file with actions for increasing & set up 
some number in symbol. That symbol can show numbers from 0 to 511\. 
- xiaose
| * 1e850e7 - (7 months ago) Beam 
definition. In one symbol used 9 beams. 5 at the top + 4 at the 
bottom. - xiaose
| * 92cc1d2 - (7 months ago) There will be 
QML counter in Predator's style. - xiaose
|/  
* fcd26c9 - (7 months ago) Initial commit. 
there will be all my projects. - xiaose 
(xiaose) 
```

但它看起来不是很好......它看起来很乱。

也许你知道有没有可能做某事。像这样：

```
* 1b9f1d0 - (22 hours ago) recreated (again) for pyton 2.7 and some 
|           new features. - xiaose (xiaose-site)
* 409f299 - (5 months ago) changed internal structure. Start frontend 
|           design. - xiaose
* ff0ede9 - (5 months ago) Trying to implement new design. 
| |         Everything starts from beginning - xiaose
| * 97c9f4e - (7 months ago) Changed PNG 
| |           beam to SVG and added 2 states in "Symbol" as normal &  
| |           small symbols. - xiaose (xiaose-predator)
| * c97b838 - (7 months ago) Top level QML 
| |           which send signal about increment value every second. - 
| |           xiaose
| * d5859ee - (7 months ago) Symbol 
| |           definition. There is JS file with actions for increasing 
| |           & set up some number in symbol. That symbol can show 
| |           numbers from 0 to 511\. - xiaose
| * 1e850e7 - (7 months ago) Beam definition. In one symbol used 9 
| |           beams. 5 at the top + 4 at the bottom. - xiaose
| * 92cc1d2 - (7 months ago) There will be QML counter in Predator's 
| |           style. - xiaose
|/  
* fcd26c9 - (7 months ago) Initial commit. there will be all my 
            projects. - xiaose (xiaose) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:57:52.073

你可以试试`fold`，如果你的发行版有的话。例如：

```
git lg1 | fold -s -w 40 
```

将在空格处中断（不在单词中间）并调整为 40 个字符的宽度。不过，不确定它与所有变色代码的效果如何。

# java - 如何跟踪junit测试中的值？

> ID：12692126
> 
> 赞同：0
> 
> 时间：2012-10-02T14:21:03.413
> 
> 标签：java, eclipse, unit-testing, testing, junit

我正在运行一个简单的测试用例，我测试数据库中是否没有 id 并且我得到了预期的异常。

但它不起作用。所以我的问题是如何在junit中跟踪测试的值？有什么好的解决办法吗？

我很欣赏你的回答！！！

更新：测试用例：

```
@Test(expected = SQLException.class)
public void testDeleteID(){
    ArrayList<Produkt> queryResult=new ArrayList<Produkt>();
    shandler.deleteProdukt(666);
    queryResult=shandler.findAll();

} 
```

IDE：日食

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:28:37.453

你在使用 IDE 之类的 Eclipse 吗？添加一个断点，并作为调试运行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:50:21.513

我认为您尝试捕获嵌套异常。将您的代码更改为该代码，并在堆栈跟踪中查看具体异常：

```
@Test(expected = Exception.class) 
public void testDeleteID(){
 ArrayList<Produkt> queryResult=new ArrayList<Produkt>();
 shandler.deleteProdukt(666);
 queryResult=shandler.findAll();  
} 
```

另一种方法：删除“预期”并用 try-catch 块包围数据库操作。

```
@Test
public void testDeleteID(){
 ArrayList<Produkt> queryResult=new ArrayList<Produkt>();
 try{
   shandler.deleteProdukt(666);
   queryResult=shandler.findAll();  
   assertTrue(false);
 }catch(Exception ex){
   assertTrue(true);
 }
} 
```

但第一个是更好的解决方案。我认为您捕获了错误的异常。

# django - Django-debug-toolbar 不显示（找不到 .js 和 .css）并且显示为“无”

> ID：12692134
> 
> 赞同：0
> 
> 时间：2012-10-02T14:21:28.607
> 
> 标签：django, django-debug-toolbar

> **可能重复：**
> [django-debug-toolbar 通过相对路径查找资产？](https://stackoverflow.com/questions/12289349/django-debug-toolbar-looking-for-assets-by-relative-path)

所以我只是按照说明安装了 django-debug-toolbar v0.9.4，我不能让工具栏出现在管理员和常规应用程序中。但是，我可以在 HTML 源代码中看到它（例如通过 Chrome），并且显示设置为“无”。如果我删除该样式，它会出现（但是没有样式和 JS）此外，它找不到 .js 和 .css。

> 加载资源失败：服务器响应状态为 404 (NOT FOUND) 127.../machines/view/2/debug_toolbar/css/toolbar.min.css
> 
> 加载资源失败：服务器响应状态为 404 (NOT FOUND) 127.../machines/view/2/debug_toolbar/css/toolbar.min.js

这是我迄今为止与此问题相关的设置：http: [//dpaste.org/ar9ji/](http://dpaste.org/ar9ji/)

# python - 从键列表和多个值创建字典

> ID：12692135
> 
> 赞同：5
> 
> 时间：2012-10-02T14:21:32.613
> 
> 标签：python

我有两个清单：

```
header = ["Name", "Age"]
detail = ["Joe", 22, "Dave", 43, "Herb", 32] 
```

并想创建一个这样的字典列表：

```
[{"Name": "Joe", "Age": 22}, {"Name": "Dave", "Age": 32}, {"Name": "Herb", "Age": 32}] 
```

这个方法[zip](http://docs.python.org/library/functions.html#zip)让我部分到达那里，但只将第一组值添加到字典中：

```
>>> dict(zip(header, detail))
{'Age': 22, 'Name': 'Joe'} 
```

如何将`detail`列表中的所有值作为一个字典输出？我找到了这个[答案](https://stackoverflow.com/questions/8414090/map-multiple-lists-of-values-to-a-list-of-keys-in-a-python-dictionary)，但这取决于`detail`包含嵌套列表。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T14:24:29.700

```
>>> detail = ["Joe", 22, "Dave", 43, "Herb", 32]
>>> d = dict(zip(detail[::2], detail[1::2]))
>>> d
{'Herb': 32, 'Dave': 43, 'Joe': 22} 
```

对于您的新/编辑问题：

```
>>> d = [dict(zip(header, items)) for items in zip(detail[::2],detail[1::2])]
>>> d
[{'Age': 22, 'Name': 'Joe'}, {'Age': 43, 'Name': 'Dave'}, {'Age': 32, 'Name': 'H
erb'}] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:38:23.267

这是获得它的一种方法：

```
header = ["Name", "Age"]
detail = ["Joe", 22, "Dave", 43, "Herb", 32]
data_iter = iter(detail)
collated = []
while True:
    next_data = zip(header, data_iter)
    if not next_data:
        break
    collated.append(dict(next_data)) 
```

输出是

```
[{'Age': 22, 'Name': 'Joe'},
 {'Age': 43, 'Name': 'Dave'},
 {'Age': 32, 'Name': 'Herb'}] 
```

这个版本的好处是，如果你改变了headers的数量，你不需要改变代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T14:51:24.947

对于此类任务，我更喜欢功能方法。

这是石斑鱼[的食谱](http://docs.python.org/library/itertools.html#recipes)：

```
def grouper(n, iterable, fillvalue=None):
    "Collect data into fixed-length chunks or blocks"
    # grouper(3, 'ABCDEFG', 'x') --> ABC DEF Gxx
    args = [iter(iterable)] * n
    return izip_longest(fillvalue=fillvalue, *args) 
```

`detail`通过使用它，我们可以按以下组推进低谷`2`：

```
>>> groups = grouper(len(header),detail)
>>> list(groups)
[('Joe', 22), ('Dave', 43), ('Herb', 32)] 
```

然后我们可以根据需要使用这个迭代器来创建字典：

```
>>> [dict(zip(header,group)) for group in groups]
[{'Age': 22, 'Name': 'Joe'}, {'Age': 43, 'Name': 'Dave'}, {'Age': 32, 'Name': 'Herb'}] 
```

为了澄清，`zip(header,group)`给出这个：

```
>>> zip(["Name", "Age"],('Joe', 22))
[('Name', 'Joe'), ('Age', 22)] 
```

召唤`dict`构造函数给出了这个：

```
>>> dict([('Name', 'Joe'), ('Age', 22)])
{'Age': 22, 'Name': 'Joe'} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T14:24:49.343

```
>>> header = ["Name", "Age"]
>>> detail = ["Joe", 22, "Dave", 43, "Herb", 32]
>>> [dict(zip(header,detail[i:i+2])) for i in range(0,len(detail),2)]
[{'Age': 22, 'Name': 'Joe'}, {'Age': 43, 'Name': 'Dave'}, {'Age': 32, 'Name': 'Herb'}]` 
```

# javascript - js创建抽象类

> ID：12692141
> 
> 赞同：0
> 
> 时间：2012-10-02T14:21:46.630
> 
> 标签：javascript

我正在尝试使用以下声明在 js 中创建一个抽象类（模仿 oops）。如果我对下面的每个方法都使用原型关键字，它会失败（见下面的案例 1）但是当我使用没有原型关键字时它工作不确定我是否声明它是正确的.. 但是当 js 文件被声明到主页时，相同的声明有效但是从对话框调用时失败..我认为声明是问题

```
if(nsp === undefined) var nsp  = {}; // nsp is the namespace

nsp.abstractCls=  function(){} ; //abstractCls is the abstract function & subclass function will extend perfAction methods (overriden methods)
nsp.abstractCls.prototype ={};

//case-1 fails , throws error is not a function (prototype keyword is present)
nsp.abstractCls.prototype.perfActiOn = function(){
    return "success";
} ;

//case-2 this works (no prototype keyword)
nsp.abstractCls.perfActiOn = function(){
    return "success";
} ; 
```

Statment nsp.abstractTbl.prototype.perfTable 工作但不确定使用原型关键字调用每个函数是否正确。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:27:02.553

尝试将您声明该类的原型的行​​删除为新对象。

# vb.net - 外部数据拉取：拉取更具体的数据或根据数据更改宏

> ID：12692144
> 
> 赞同：0
> 
> 时间：2012-10-02T14:21:48.077
> 
> 标签：vb.net, excel

这个问题有点难以解释，所以请耐心等待。

我正在为我的公司从一张大表中提取数据，并尝试创建一个宏以使这些数据更易于阅读/理解。站点上的数据每天都会根据导致我们工厂某些故障的原因而变化，这会导致我的宏分析不存在的数据或错误的单元格（由于行移动/移动/添加/删除）。因为我认为这不是很清楚，所以这里有一个例子：

宏表示选择单元格 J5、J13 和 J25。这些是，当我创建宏时，我想把值放在一个列表中。但是，当我今天提取数据并运行宏时，这些值位于工作表上的不同位置（单元格 J13 的值现在位于 J12 中）。这完全打乱了所有分析并使我的宏/数据提取无用。

有没有办法让宏更智能地选择数据？也许让它检查组名，然后从它旁边的单元格中选择值？我希望我能说得更好......谢谢你已经走到这一步了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:44:59.013

简单地说……是的。这是用于查找组名并获取相邻单元格的代码：

```
Dim Group1Range As Range
'Look in ThisWorkbook
With ThisWorkbook
    'Look in Sheet1
    With .Sheets(1)
        'Look in Column I
        With .Columns("I:I")
            'Find the text Group1
            Set Group1Range = .Find(What:="Group1").Offset(0, 1)
        End With
    End With
End With
'Indicate the address of the found range
Debug.Print Group1Range.Address
End Sub 
```

现在，您可以通过以下方式改进您的问题：

1.  解释你是如何知道那个单元格`J13`不再有效的，那`J12`就是现在。
2.  给我们一些样本数据。
3.  给我们你的代码。
4.  告诉我们你的最终结果是什么，可能有一个例子。

# vb.net - VB.net 控制台 - 显示最大数（变量）

> ID：12692148
> 
> 赞同：1
> 
> 时间：2012-10-02T14:21:53.120
> 
> 标签：vb.net, console-application

我正在尝试提出这个问题的代码：

***要求用户输入十个数字，然后显示最大的一个***

到目前为止我已经想出了这个，但是看看它是如何实现的，我只能看到错误：

```
Sub Main()
    Dim One, Two, Three, Four, Five, Six, Seven, Eight, Nine, Ten As String
    Console.WriteLine("Please enter your first number")
    One = Console.ReadLine
    Console.WriteLine("Please enter your second number")
    Two = Console.ReadLine
    Console.WriteLine("Please enter your third number")
    Three = Console.ReadLine
    Console.WriteLine("Please enter your fourth number")
    Four = Console.ReadLine
    Console.WriteLine("Please enter your fifth number")
    Five = Console.ReadLine
    Console.WriteLine("Please enter your sixth number")
    Six = Console.ReadLine
    Console.WriteLine("Please enter your seventh number")
    Seven = Console.ReadLine
    Console.WriteLine("Please enter your eighth number")
    Eight = Console.ReadLine
    Console.WriteLine("Please enter your nineth number")
    Nine = Console.ReadLine
    Console.WriteLine("Please enter your tenth number")
    Ten = Console.ReadLine

    If Ten > Nine Then
        Console.WriteLine("Your biggest number is" & Ten)
    Else
        If Nine > Eight Then
            Console.WriteLine("Your biggest number is" & Nine)
        Else 
```

我需要看看最大的数字是多少。另一个学生正在使用数组来实现这一点，但我似乎还无法解决它们。

那么在用户输入数字后，我该如何实现呢？

我尝试（上面）使用 If 语句，但我看到代码很广泛，如果一个人在开头输入一个较大的数字，然后在最后输入一个，则会出现错误，因为它只会显示第一个较大的数字......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:24:41.210

如果您不想使用数组或集合，我建议您只在每次输入后保留最大值。例如，这里有一些伪代码：

```
WriteLine("Please enter your first number")
Current = ReadLine
If Current > Highest Then
    Highest = Current
End If
... Do it again 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:25:23.940

主要有两种做法：

*   将所有数字放在一个数组中，并在输入完所有数字后循环它们。

*   在输入过程中跟踪最大的数字，以便将每个新数字与之前的最高数字进行比较，如果更高则替换它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T14:27:52.987

你不需要数组，

```
Console.Writeline("Number 1?")
Dim Number as integer = Console.Readline()
For Key as Integer = 2 to 10
    Console.Writeline("Number " & Key & "?")
    'Get current number and compare with larger number?
Next
Console.Writeline("Largest number: " & Number) 
```

阅读这篇文章，然后尝试自己编写，这样你会学到更多:)

# dart - 相当于 Dart 的 DataOutputStream

> ID：12692150
> 
> 赞同：3
> 
> 时间：2012-10-02T14:21:57.173
> 
> 标签：dart

我正在寻找 Dart 的 Java DataOutputStream 等效项，我可以在其中编写任意类型（int、string、float、byte 数组等​​）。有 RandomAccessFile 但它不提供字节数组或浮点双精度值。ByteArray 似乎有一些必要的功能，但我不知道如何将它写入文件或 OutputStream。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:51:51.940

下面是一些简单的代码，展示了如何将 ByteArray 写入 OutputStream：

```
#import('dart:io');
#import('dart:scalarlist');

main() {
        File file = new File("c:\\temp\\foo.txt");
        OutputStream os = file.openOutputStream();
        os.onNoPendingWrites = () {
                print('Finished writing. Closing.');
                os.flush();
                os.close();
        };
        Uint8List byteList = new Uint8List(64);
        ByteArray byteArray = byteList.asByteArray();
        int offset = 0;
        offset = byteArray.setUint8(offset, 72);
        offset = byteArray.setUint8(offset, 101);
        offset = byteArray.setUint8(offset, 108);
        offset = byteArray.setUint8(offset, 108);
        offset = byteArray.setUint8(offset, 111);
        offset = byteArray.setUint8(offset, 0);
        byteArray.setFloat32(offset, 1.0);
        os.write(byteList);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-10T06:37:52.363

这已经存在了一段时间，但我搜索并没有找到好的`DataInput/OutputStream`互操作性类。我想要一个与流一起使用的版本，这样我就可以处理不能轻松放入 RAM 的文件。所以我写了一个。

它发布在[https://pub.dev/packages/jovial_misc](https://pub.dev/packages/jovial_misc)中`io_streams`，或者如果您愿意，也可以发布在[https://github.com/zathras/misc/tree/master/dart/jovial_misc](https://github.com/zathras/misc/tree/master/dart/jovial_misc)中。我做了它，所以它与`java.io.DataInputStream`和互操作`java.io.DataOutputStream`。使用它的代码看起来有点像这样：

```
import 'package:convert/convert.dart';
import 'package:jovial_misc/io_utils.dart';

void main() async {
  final acc = ByteAccumulatorSink();
  final out = DataOutputSink(acc);
  out.writeUTF8('Hello, world.');
  out.close();

  final stream = Stream<List<int>>.fromIterable([acc.bytes]);
  final dis = DataInputStream(stream);
  print(await dis.readUTF8());
  await dis.close();
} 
```

`Stream<List<int>>`当然，通常会来自套接字，或者，`File.openRead()`等等。如果您确实有所有可用的字节数据，还有一个`DataInputStream`同步的变体需要一个。`Iterable`

`DataInputStream`并且`DataOutputSink`几乎是`java.io`类的明显映射。棘手的部分是缓冲区管理，因为在`List<int>`可能与您想要的数据没有对齐的情况下，流会向您推送数据。而且，当然，有必要异步执行所有操作。

HTH。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-03T03:44:57.337

您本质上是在要求任意对象序列化。虽然 Dart VM 有一个，但它并没有暴露给程序员（它只用于快照和消息传递）。我会说暴露它是一个错误——在不同的情况下，我们对序列化有不同的要求，“一个真正的解决方案”是行不通的（Java 已经向我们展示了这一点）。

例如，我正在为 Dart 开发一个 MsgPack 实现，我知道 Protobuf 端口也在工作中，也许有人会启动一个 Thrift 端口......可能性是无穷无尽的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-20T00:16:07.117

我能找到的最接近的是这个包：[https](https://github.com/TomCaserta/dart_io/) ://github.com/TomCaserta/dart_io/ 。不幸的是，在读取到字节数组的末尾时出现了一个错误 - 请参阅我在 GitHub 中的拉取请求。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-20T00:19:58.380

你可以使用这个类： [https ://github.com/TomCaserta/dart_io/blob/master/lib/data_output.dart](https://github.com/TomCaserta/dart_io/blob/master/lib/data_output.dart)

不幸的是（a）它不处理流；(b) writeLong 不采用单个整数。我为 Dart SDK 提出了一个问题：[https ://github.com/dart-lang/sdk/issues/31166](https://github.com/dart-lang/sdk/issues/31166)

编辑：我已经分叉了 dart_io 包并修复了上述两个问题。我的新包发布为 dart_data_io： [https ://github.com/markmclaren2/dart_data_io](https://github.com/markmclaren2/dart_data_io)

# iphone - iOS ACAccountStore 代码=7，无法更新凭据。未知客户：

> ID：12692159
> 
> 赞同：4
> 
> 时间：2012-10-02T14:22:22.620
> 
> 标签：iphone, objective-c, facebook, ios6

我正在使用新的 iOS 6 Facebook API，并且通常在使用 ACAccountStore 方法时经历了“具有挑战性的”时间。我检索了一个 ACAccount：

```
[accountStore requestAccessToAccountsWithType:self.facebookAccountType
                                          options:options completion:^(BOOL granted,     NSError *error) { 
```

然后我需要定期更新 ACAccount 令牌：

```
[accountStore requestAccessToAccountsWithType:self.facebookAccountType
                                      options:options completion:^(BOOL granted, NSError     *error) { 
```

每当我使用“重置内容和设置..”从干净的 iOS 模拟器环境开始时，这都有效

但过了一会儿，我得到以下信息。

```
Error Domain=com.apple.accounts Code=7 "Cannot renew credentials. Unknown client: FBTest     (org.my.app.FBTest)" 
```

我正在执行来自 FBTest 应用程序的调用。

有很多关于如何启动和运行 iOS 6 FB 的帖子，我已经过了这一点。框架的棘手部分是让它随着时间的推移而运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T00:55:24.140

I would recommend the following :

*   Ensure that you are using the very latest accounts framework.
*   Give the application its real bundle ID, not "org.my.app.FBTest".
*   Make sure the keystore settings is on in the entitlements file.
*   Test this on a adhoc distribution build.

# php - 正则表达式在新行上失败

> ID：12692162
> 
> 赞同：0
> 
> 时间：2012-10-02T14:22:36.113
> 
> 标签：php, regex

我有一个像这样的正则表达式

```
preg_match("/^\\s*(insert|delete|update|replace|create|drop|alter|use) /i",$query) 
```

这是一个非常古老的功能的一部分，它负责我们网站上我们维护的几乎所有交易（它至少有 8 年历史......）

想象一下，当这个查询在这个正则表达式的测试中失败时，我的惊喜......

```
"DELETE
                    FROM KursSmer 
                    WHERE   IDKurs = '523' AND
                            IDSmer = '50' AND
                            IDSkolskaGodina = '1' AND
                            JeObavezan = '0'" 
```

我花了大约 1 小时才找到那个讨厌的家伙……但我做到了……第一行末尾有一个 \n 行元素，紧挨着 DELETE 字……就像`DELETE\n`

现在，我想知道这是否可以纠正？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T14:23:24.533

您需要`m`多行的修饰符。

```
preg_match("/^\\s*(insert|delete|update|replace|create|drop|alter|use) /im",$query) 
```

[模式修饰符](http://php.net/manual/en/reference.pcre.pattern.modifiers.php)

# c# - 无法从 ASP.NET MVC4 导入 ServiceReference1

> ID：12692169
> 
> 赞同：4
> 
> 时间：2012-10-02T14:22:54.647
> 
> 标签：c#, asp.net-mvc, wcf, asp.net-mvc-4

`using`我需要`ServiceReference1`在 ASP.NET MVC4 应用程序中获取对象的哪些语句？

这`ServiceReference1`是我添加的服务参考的名称。奇怪的是，如果我双击它，它不会在对象浏览器中显示任何内容......

更新：出于某种原因“[取消选中”在引用的程序集中重用类型“](https://stackoverflow.com/a/11128845/74865) ”解决了我的问题！

![在此处输入图像描述](../Images/726f73836ff578620c27965fb2d49cf9.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T15:16:00.543

要添加到您的更新中，当您取消选中而不是引用程序集中的所有重用类型时，只需取消选中您需要的内容。

不确定是否还有更多您正在寻找的内容

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T01:32:57.930

我发现，如果您有一个类似的命名空间`MyProject`和一个名为 的服务引用，有时会感到困惑`MyService`，但您输入的代码文件位于类似`MyProject.AnotherNS`. 从该代码文件中，您必须键入`MyProject.MyService`才能访问服务，而不仅仅是`MyService`. 让它始终工作的超级安全方法是使用`global`关键字，然后键入类似`global::MyProject.MyService`. `global`只是在代码块中从命名空间中删除任何隐含的前缀。

# java - 重绘没有被调用

> ID：12692171
> 
> 赞同：3
> 
> 时间：2012-10-02T14:22:58.983
> 
> 标签：java, swing, repaint, paintcomponent, event-dispatch-thread

嗨，我已经用谷歌搜索了，但无法弄清楚为什么我的 paintComp 方法没有被调用

我有以下代码包 com.vf.zepto.view；

```
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;
import java.awt.Insets;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.Properties;

import javax.imageio.ImageIO;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

import com.vf.zepto.view.interfaces.ProcessorPanel;

public class CountryDetailsPanel extends JPanel implements ProcessorPanel, Runnable {
    private GridBagConstraints c = new GridBagConstraints();
    private String countryName;
    private Properties prop = new Properties();
    private BufferedImage image;

    public CountryDetailsPanel() {
        try {
            prop.load(new FileInputStream("country.props"));
        } catch (FileNotFoundException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        //this.setLayout(new GridBagLayout());

        c.gridx = 0;
        c.gridy = 0;
        c.fill = GridBagConstraints.BOTH;
        c.insets = new Insets(5, 5, 5, 5);

        this.setPreferredSize(new Dimension(200, 200));
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);

        try {
            if(countryName != null) {
                String asset = prop.getProperty(countryName+".flag");

                if(!asset.equals(null)) {
                    image = ImageIO.read(new File(asset));
                    g.drawImage(image, 0, 0, null);
                }
            }
        } 
        catch (IOException e) {
            e.printStackTrace();
        }
    }

    @Override
    public void updateDetails(Object o) {
        countryName = (String)o;
        SwingUtilities.invokeLater(this);
    }

    @Override
    public void run() {
        this.repaint();
    }
} 
```

并且在调用时`this.repaint()`期望调用该`paintComponent`方法，但不是为了爱或金钱。

试图强迫它使用 EDT 以防出现问题，但事实并非如此。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T14:33:10.937

1.  不要*在其中*加载图像或其他硬或长时间运行的代码`paintComponent`

2.  将此`Object`作为局部变量加载，并且只加载一次

3.  `paintComponent()`叫做

    *   隐含地，当`JComponent`需要重绘时，或

    *   明确地，例如在每个鼠标事件上，如果`paintComponent()`要从`MouseMotionListener`.

4.  如果有动画，则使用 Swing Timer 并调用`repaint()`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T14:35:34.190

*   您永远不应该调用`paintComponent()`该`repaint()`方法来合并所有更改组件的请求（在屏幕刷新之间可能有多个重绘请求）。它将更新请求添加到 GUI 事件队列，以便更新与其他 GUI 操作正确协调（Swing 和 AWT 不是线程安全的）。这个更新请求，在处理时，调用`update()`，调用`paint()`，调用你的`paintComponent()`

*   为什么会有这个：

    ```
    @Override
    public void run() {
        this.repaint();
       } 
    ```

它似乎没有任何用处（创建一个新线程来重绘一次？更不用说线程不在 EDT 上而是调用实例（如果`repaint()`在`JPanel`外部进行修改，你甚至不应该担心）。但是启动一个修改的线程UI 组件使用 s `SwingTimer`/`SwingWorker`或`SwingUtilities#invokeXXX()`

*   这可能不相关，但在您的代码中我看到了这一点：

    ```
     if(!asset.equals(null)) {
                image = ImageIO.read(new File(asset));
                g.drawImage(image, 0, 0, null);
            } 
    ```

不要用于与值`equals()`进行比较，`null`因为这可能会抛出 a `NullPointerException`，因为您试图尊重空指针，例如此代码会抛出 a `NPE`：

```
 String s=null;
    if(!s.equals(null)) {//throws NPE
        System.out.println("Here");//is never printed
    } 
```

*   同样正如 mKorbel 所说（对他 +1）不要在全局`paintComponent()`声明中执行长时间运行的任务`Image`，在构造函数中分配它，然后在`paintComponent()`. Fi

宁可这样做：

```
public class TestPanel extends JPanel {

private Image image;

public TestPanel() {
image = ImageIO.read(new File(asset));
}

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
                if(asset!=null) {
                    g.drawImage(image, 0, 0, null);
                }
    }
} 
```

# selenium - 使用 Selenium Web Driver 测试动态加载的内容

> ID：12692172
> 
> 赞同：8
> 
> 时间：2012-10-02T14:23:03.987
> 
> 标签：selenium, webdriver, selenium-webdriver, gui-testing

我正在开发一个系统，该系统具有我正在使用 Selenium 测试的基于 Web 的前端。在一个页面上，向下滚动时会动态加载内容（也许您从 Facebook 的好友列表中知道），因为这是要求之一。

通过 Javascript 使用 Selenium Webdriver（我使用 Chrome）向下滚动应该没问题。但是动态添加的内容存在问题。如何让 Webdriver 找到这些元素？

我尝试了以下内容向下滚动，直到不再加载内容：

```
int oldSize = 0;
int newSize = 0;
do {
  driver.executeScript("window.scrollTo(0,document.body.scrollHeight)");
  newSize = driver.findElementsBy(By.cssSelector("selector").size();
} while(newSize > oldSize); 
```

但是，尽管页面第一次向下滚动并且现在正确加载了一些内容，但驱动程序的 findElementsBy(By) 函数将无法找到它们。

有人遇到过这个问题吗？？如果有人可以帮助我找到解决方案，我将非常高兴！

问候， 本杰明

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T19:10:58.457

我建议将 WebDriverWait 与 ExpectedConditons 一起使用。

```
//scroll down with Javascript first
WebDriverWait wait = new WebDriverWait(driver, 30);
WebElement element = wait.until(ExpectedConditions.elementToBeClickable(By.cssSelector("selector")));
//interact with your element
element.click() 
```

看看 Selenium 官方页面提供的指导：http: [//seleniumhq.org/docs/04_webdriver_advanced.html](http://seleniumhq.org/docs/04_webdriver_advanced.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T14:06:52.873

特别尝试使用流利的等待。主要特点是：

*一个 Wait 接口的实现，可以动态配置它的超时和轮询间隔。每个 FluentWait 实例定义等待条件的最长时间，以及检查条件的频率。此外，用户可以将等待配置为在等待时忽略特定类型的异常，例如在页面上搜索元素时的 NoSuchElementExceptions。*

```
public WebElement fluentWait(final By locator){
        Wait<WebDriver> wait = new FluentWait<WebDriver>(driver)
                .withTimeout(30, TimeUnit.SECONDS)
                .pollingEvery(5, TimeUnit.SECONDS)
                .ignoring(NoSuchElementException.class);

        WebElement foo = wait.until(
new Function<WebDriver, WebElement>() {
            public WebElement apply(WebDriver driver) {
                        return driver.findElement(locator);
                }
                }
);
                           return  foo;              }     ; 
```

所描述的方法返回您可以操作的 Web 元素。所以方法如下：1）你需要找到你希望在滚动后呈现的元素的选择器，例如

```
String cssSelector = "blablabla" 
```

2) 使用 js 向下滚动 3)

```
WebElement neededElement  = fluentWait(cssSelector);
neededElement.click();
//neededElement.getText().trim(); 
```

您可以[在此处获取有关流利等待的更多信息](http://selenium.googlecode.com/svn/trunk/docs/api/java/org/openqa/selenium/support/ui/FluentWait.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:14:14.953

我认为问题在于等待动态内容完成加载。尝试在 findElementsBy 之前等待 3 秒？在 C# 中，代码为 Thread.Sleep(3000);

# angularjs - AngularJS 指令属性中的非字符串类型

> ID：12692176
> 
> 赞同：13
> 
> 时间：2012-10-02T14:23:06.987
> 
> 标签：angularjs

我想创建一个属性窗格，其中属性的数量可能会因选择的对象而异。

我创建了自己的指令，调用`property`显示属性的名称和值，使用如下代码：

```
<div ng-app="MyApp">
  <div class="properties-pane" ng-controller="PropertiesPane">
    <div ng-repeat="property in properties">
      <property name="{{property.name}}" value="{{property.value}}">
    </div>
  </div>
</div> 
```

很简单，不是吗？这工作得很好，除了`property.value`将被转换为字符串（因为它是 DOM 元素上的属性）。如果属性值是其他数据类型，我该怎么办？例如一个对象。查看实现的其余部分（在 Coffeescript 中）：

```
MyApp = angular.module('MyApp', [])

MyApp.controller 'PropertiesPane', ($scope) ->
  $scope.properties = [
    # Note that value is an object, not a string:
    {name: 'First', value: {x:0, y:0, z:42}},
    {name: 'Second', value: {x:0, y:20, z:0}},
    {name: 'Third', value: {x:1, y:1, z:1}},
  ]

MyApp.directive 'property', ($compile) ->
  restrict: 'E'
  transclude: false
  replace: true
  scope: {name: '@name', value: '@value'}
  template: '<div>{{name}} {{value.x}}, {{value.y}}, {{value.z}}</div>'
  #                          ^^^^^^^      ^^^^^^^      ^^^^^^^
  #   this doesn't work as value is a string, not an object 
```

由于 value.x、y 和 z 在字符串上未定义，结果当然是：

一、
二、
三、

我想要的输出是：

第一个 0, 0, 42
第二个 0, 20, 0
第三个 1, 1, 1

我怀疑我对如何以编程方式添加元素的想法存在根本性的错误。实现这样的东西的 Angularish 方式是什么？

**编辑：解决方案**

要`value`通过引用而不是字符串值来引用对象，请在指令中使用`=`代替：`@`

```
scope: {name: '@', value: '='} 
```

在模板中：

```
<property name="{{property.name}}" value="property.value"> 
```

请注意，我删除了`{{}}`.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-02T14:52:38.280

`name='property.name'`和怎么样`scope: { name: '=', value: '=' }`？

这应该会变魔术。

要了解更多信息，请参阅[此](http://docs.angularjs.org/guide/directive)内容并搜索（ctrl+f）“@”，第一个结果就是您想要的；）

# android - 任何应用程序来监控哪些传感器或 CPU 会耗尽电池寿命？

> ID：12692178
> 
> 赞同：2
> 
> 时间：2012-10-02T14:23:12.040
> 
> 标签：android, google-play

我有一个 Android 应用程序，我使用了几乎所有的传感器和一些繁重的计算算法。它会在 4.5 小时内耗尽电池电量。但我需要找出哪些传感器或 CPU 使用电池？和应用程序或任何机制知道这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:28:23.530

我不知道有任何应用程序可以测量特定于传感器的电池消耗，但要测量**每个应用**的消耗，以下选项可以工作：

*   [系统面板](https://play.google.com/store/apps/details?id=nextapp.systempanel.r1)
*   更简单的内置电池监视器：`Settings`→ `System`→ `About Phone`→ `Battery usage`。

如果您想编写自己**的每个传感器漏电**监视器，您可以参考[这个问题](https://stackoverflow.com/q/10293713/920200)，关于 API-function `getPower()`，它显示每个传感器的功耗。

# android - 在gridview中设置某些项目不可点击

> ID：12692179
> 
> 赞同：5
> 
> 时间：2012-10-02T14:23:17.843
> 
> 标签：android, gridview, onclick

我正在尝试将我的 gridview 中的某些项目从可点击设置为不可点击。所以我有一个带有自定义适配器的gridview和一个onitemclicklistener。在我的自定义适配器中，我尝试在我的 getView 方法中执行以下操作：（因为我读到了关于调用 isEnabled..）

```
if(int value < 5) { //item can not be clickable
isEnabled(position);
} else {
//other things happen, but isEnabled is not called here in any case
}
//......
@Override
    public boolean isEnabled(int position) {

            return false;

    } 
```

奇怪的是，现在每个项目都不可点击，虽然有些项目的值> 5..我不知道是什么原因造成的......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T14:28:37.687

所以你实际上在这里做的是覆盖一个内置方法`isEnabled(int)`并告诉它总是返回false。这导致您的适配器总是告诉您的网格不应启用其单元格。

你真正在寻找的是更像

```
public boolean isEnabled(int position) 
{
    if(position < 5)
        return false;
    else
        return true;
} 
```

这里的关键是你不是那个打电话的人`isEnabled`。您正在覆盖`isEnabled`，并且`GridView`正在自动调用它以确定哪些单元格应该是可点击的，哪些不应该。因此，您永远不应该`isEnabled`为此目的在代码中的任何地方实际调用。

# c# - 如何将日期从asp页面文本框插入到sql server

> ID：12692183
> 
> 赞同：0
> 
> 时间：2012-10-02T14:23:35.313
> 
> 标签：c#, asp.net, sql, sql-server

我的网页中有一个按钮，可以将一些值插入到 sql server 列中。这些值之一恰好是数据类型 Date。以下是我的 asp.net 页面的代码：

```
 protected void Button1_Click(object sender, EventArgs e)
{
     con.Open();
     SqlCommand cmd1 = new SqlCommand("insert into dbo.FillTable values ('TextBox2.Text', 'TextBox1.Text', 'FA0005')",con);
     SqlDataAdapter dr = new SqlDataAdapter(cmd1);
     con.Close();
     DataSet dl = new DataSet();
     dr.Fill(dl);
     //Label5.Text = dl.Tables[0].Rows[1][9].ToString();

} 
```

我希望能够让用户以 (yyyy-MM-dd) 格式输入日期，这是我的 sql 服务器的日期格式。“TextBox2”是保存日期输入的文本框。每当我像 ex 一样简单地硬编码日期时。'2010-01-01', '50', 'FA0005'，它运行良好并插入记录。但是，当我编码为“TextBox2.Text”、“TextBox1”等时。它给了我一个错误，说“从字符串转换日期和/或时间时转换失败”。有人可以帮我弄这个吗？这让我很困惑，因为日期格式为 'yyyy-mm-dd' 效果很好，这与文本框相同。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T14:28:20.323

```
protected void Button1_Click(object sender, EventArgs e) 
{ 
     con.Open(); 
     SqlCommand cmd1 = new SqlCommand(string.Format("insert into dbo.FillTable values ('{0}', '{1}', 'FA0005')", TextBox2.Text, TextBox1.Text), con); 
     SqlDataAdapter dr = new SqlDataAdapter(cmd1); 
     con.Close(); 
     DataSet dl = new DataSet(); 
     dr.Fill(dl); 
} 
```

现在，让我们分解`string.Format`函数。它说如果我有一个像这样格式化的字符串`"Hello {0}!"`，我在函数的零索引处传入的任何内容都**将**替换`{0}`. 所以，假设我有这个字符串`"Hello {0}, and I say again hello {0}!"`并且我像这样使用它`string.Format("Hello {0}, and I say again hello {0}!", "world")`，我会得到一个这样的字符串`"Hello **world**, and I say again hello **world**!"`。

## 笔记

但是，上面的解决方案让您对 SQL 注入开放，所以如果您想防止这种情况发生，那么让我们走这条路。

```
protected void Button1_Click(object sender, EventArgs e) 
{ 
     con.Open(); 
     SqlCommand cmd1 = new SqlCommand("insert into dbo.FillTable values (@TextBox2Val, @TextBox1Val, 'FA0005')", con); 
     cmd1.AddParameterWithValue( "TextBox1Val", TextBox1.Text );
     cmd1.AddParameterWithValue( "TextBox2Val", TextBox2.Text );
     SqlDataAdapter dr = new SqlDataAdapter(cmd1); 
     con.Close(); 
     DataSet dl = new DataSet(); 
     dr.Fill(dl); 
} 
```

现在让我们分解一下。发送到 SQL 服务器的语句就是您所看到的，`@paramname`在字符串中带有 。但是，它会将其作为 a 发送并使用您在方法`prepare`中提供的值准备该语句。`AddParameterWithValue`请注意，只要 中的值`TextBox2.Text`是日期，您就不必关心格式，因为 SQL Server 会处理这个问题。请记住，SQL Server 以一种格式存储它，您将以另一种格式显示它，但只要它们有效，它就可以从无数格式转换。

现在，正如@Willem 所说，您应该确保`TextBox2.Text`in 实际上是一个日期，所以让我们这样做，在函数顶部添加这个片段......

```
DateTime theDate;
if (!DateTime.TryParse(TextBox2.Text, out theDate))
{
    // throw some kind of error here or handle it with a default value
    ... 
} 
```

...然后用`AddParameterWithValue`这样的方式修改行...

```
cmd1.AddParameterWithValue( "TextBox2Val", theDate ); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T14:31:47.450

您没有将文本框值正确插入插入的机制。此外，这种数据库插入方式使您容易受到 SQL 注入攻击。一种更好的选择是参数化您的 SqlCommand，如下所示：

```
 SqlCommand cmd1 = new SqlCommand("insert into dbo.FillTable values (@Date1, @Date2, @SomeString)",con); 
```

然后，您可以指定如下参数：

```
 cmd1.Parameters.AddWithValue("@Date1",TextBox1.Text);
 cmd1.Parameters.AddWithValue("@Date2",TextBox2.Text);
 cmd1.Parameters.AddWithValue("@SomeString,"FA0005"); 
```

指定参数消除了 SQL 注入风险，并且还提供了一种干净的机制，用于将值从文本框中获取到 INSERT。希望这可以帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T14:27:22.160

您正在将文本“TextBox2.Text”输入数据库，而不是文本框的值。从 TextBox2.Text 中删除引号：

```
SqlCommand cmd1 = new SqlCommand("insert into dbo.FillTable values 
    ('" + TextBox2.Text + "', '" + TextBox1.Text + "', 'FA0005')",con); 
```

如上所述，当您附加这样的字符串时，您会让自己对[SQL 注入开放。](http://en.wikipedia.org/wiki/SQL_injection)

# iphone - 想在 xcode 4.5 中创建自定义模板

> ID：12692188
> 
> 赞同：8
> 
> 时间：2012-10-02T14:23:40.910
> 
> 标签：iphone, xcode, templates

Xcode 4.4 和 4.5 似乎改变了它们的包装。现在它是一个数千兆字节的应用程序。

我想在 Xcode 中添加一些自定义模板，但是我见过的安装方法都没有解决 4.5 的单模块打包问题。

谁能阐明如何将自定义模板添加到 Xcode 4.5？

提前感谢您的帮助和指导

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T08:58:31.747

将您的自定义项目模板放入文件夹 ~/Library/Developer/Xcode/Templates/

下次你打开 xcode 创建一个新项目时，你会找到你的项目模板

# asp.net - 如何将带有“自动编号”字段（ID 列）的行插入 Access 数据库/C# ASP.NET

> ID：12692190
> 
> 赞同：-2
> 
> 时间：2012-10-02T14:23:56.317
> 
> 标签：asp.net, database

这是我第一次与 DB 合作。我决定创建一个包含两个表的数据库 - “团队”、“玩家” 我想在“玩家”表中添加一个新玩家。“玩家”表由以下列组成：ID(autonumber)、FirstName、LastName、TeamID

为此，我为 FirstName、LastName、TeamID 创建了三个文本框。请注意，我没有处理“ID”，因为它是一个自动编号，应该自动添加 Button1_click 最终应该添加新行。

这是我的代码：

```
 protected void Button1_Click(object sender, EventArgs e)
    {
        try
        {
            connection = new OleDbConnection(connectionString);
        }
        catch
        { }
        try
        {
            connection.Open();

            OleDbCommand command = new OleDbCommand("INSERT INTO Player VALUES ('" + TextBox1.Text + "','" + TextBox2.Text + "','" + TextBox3.Text + "')");

            command.ExecuteNonQuery();

            connection.Close();

        }
        catch
        { } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:28:47.063

当您编写一个不包含列名的 INSERT 字符串时，您应该在值中指定每一列。在您的情况下，您需要添加

```
 string sqlText = "INSERT INTO Player (FirstName, LastName, TeamID) VALUES ('" 
                  + TextBox1.Text + "','" + TextBox2.Text + "','" + TextBox3.Text + "')"); 
```

但是，由于另一个原因，此代码是错误的。永远不要编写连接用户输入的输入文本的 sql 字符串。这将导致错误，或者更糟糕的是，导致[Sql Injection](http://xkcd.com/327/)

```
 using(connection = new OleDbConnection(connectionString))
   { 
        connection.Open(); 
        string sqlText = "INSERT INTO Player (FirstName, LastName, TeamID) " + 
                         "VALUES (?, ?, ?)"; 
        OleDbCommand command = new OleDbCommand(sqlText, connection); 
        command.Parameters.AddWithValue("@First", textBox1.Text);
        command.Parameters.AddWithValue("@Last", textBox2.Text);
        command.Parameters.AddWithValue("@team", textBox3.Text);
        command.ExecuteNonQuery(); 
    } 
```

还有一个问题。如果 TeamID 字段是数字字段，则需要将 textbox3.text 输入转换为数值才能正确使用 AddWithValue 方法

```
 int teamID;
        if(!Int32.TryParse(textBox3.Text, out teamID))
             throw new ArgumentException("Type a valid TeamID number, please!");
        command.Parameters.AddWithValue("@team", teamID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:28:29.540

如果 TeamID 是一个数字，则不需要在其周围加上引号。

```
OleDbCommand command = new OleDbCommand("INSERT INTO Player VALUES ('" + TbFirstName.Text + "','" + TbLastName.Text + "'," + TbTeamID.Text + ")"); 
```

注意：我重命名了文本框以减少歧义。

虽然这可能是您的第一次通过，但您应该真正清理您的输入。至少创建一个函数来用双单引号替换单引号。

```
protected string SanitizeSQL(string txt) {
   return txt.replace("'", "''");
}

OleDbCommand command = new OleDbCommand("INSERT INTO Player VALUES ('" + SanitizeSQL(TbFirstName.Text) + "','" + SanitizeSQL(TbLastName.Text) + "'," + SanitizeSQL(TbTeamID.Text) + ")"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:29:04.657

您的插入命令应该指定它正在更新的列，所以它应该是：

```
INSERT INTO Player(FirstName,LastName,TeamID) VALUES ('" + TextBox1.Text + "','" + TextBox2.Text + "','" + TextBox3.Text + "')" 
```

另请注意，将用户输入中的文本直接连接到查询中会使您面临 sql 注入攻击。

# android - 由片段活动处理的片段的 Android 方向更改

> ID：12692193
> 
> 赞同：0
> 
> 时间：2012-10-02T14:24:04.803
> 
> 标签：android, eclipse, android-fragments

我有一个片段活动，它为选定的单个记录加载一整行，第一次工作正常，但如果我改变方向，它会崩溃并抛出“找不到源”。当我逐行调试时，一些TextView不可用（返回null），这是我的片段活动代码：

```
@Override

public void onCreate(Bundle savedInstanceState)` 
    {
        super.onCreate(savedInstanceState); 
        setContentView(R.layout.client_layout);

        if (savedInstanceState==null)
        {
            clientActivityViewModel= (ClientActivityViewModel)getLastCustomNonConfigurationInstance();

            if(clientActivityViewModel==null)
            {
                clientActivityViewModel= new ClientActivityViewModel(getBaseContext());
                if (bundle== null)
                {
                    bundle= getIntent().getExtras();
                }
                clientActivityViewModel.setAccountId(bundle.getString("accountId"));
                clientActivityViewModel.GetAccountInformation(bundle.getString("accountId"));
                clientInformationActivity= new ClientInformationActivity();
                clientInformationActivity.setAccountInformation(clientActivityViewModel.getAccountInformation());

                clientActivityViewModel.GetAccountComplementaryInformation(bundle.getString("accountId"));
                clientComplementaryInformationActivity= new ClientComplementaryInformationActivity();
                clientComplementaryInformationActivity.setAccountComplementaryInformation(clientActivityViewModel.getAccountComplementaryInformation());
            }

            if(clientActivityViewModel!=null)
            {
                clientActivityViewModel.GetAccountInformation(clientActivityViewModel.getAccountId());
                clientInformationActivity= new ClientInformationActivity();
                clientInformationActivity.setAccountInformation(clientActivityViewModel.getAccountInformation());

                clientActivityViewModel.GetAccountComplementaryInformation(clientActivityViewModel.getAccountId());
                clientComplementaryInformationActivity= new ClientComplementaryInformationActivity();
                clientComplementaryInformationActivity.setAccountComplementaryInformation(clientActivityViewModel.getAccountComplementaryInformation());

                if (clientActivityViewModel != null) 
                { 
                    pager = (ViewPager) findViewById (R.id.pager);
                    MyFragmentPagerAdapter adapter = new MyFragmentPagerAdapter(getSupportFragmentManager());
                    adapter.addFragment(clientInformationActivity);
                    adapter.addFragment(clientComplementaryInformationActivity);
                    adapter.addFragment(new ClientAddressActivity());
                    adapter.addFragment(new ClientPaymentInfoActivity());
                    adapter.addFragment(new ClientDescriptionInfoActivity());
                    pager.setAdapter(adapter);
                } 
            }
        }
    }

    @Override
    public Object onRetainCustomNonConfigurationInstance()
    { 
        if (clientActivityViewModel== null)
        {
            clientActivityViewModel= new ClientActivityViewModel(getBaseContext());
            bundle= getIntent().getExtras();
            clientActivityViewModel.setAccountId(bundle.getString("accountId"));
        }
        return clientActivityViewModel;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:31:09.677

我相信你是说当方向改变时你的代码不会运行。

如果是这种情况，那么当方向再次改变时，就会调用**Oncreate**。这就是为什么您的活动在第一次之后没有正常运行的原因。

要解决此问题，您已在清单文件中声明：

```
android:configChanges="keyboardHidden|orientation" 
android:configChanges="keyboardHidden|screensize" 
```

最后一行仅在 android 3.0 及以上版本中可用

# css - html页面中的自定义标签（如xml）？

> ID：12692194
> 
> 赞同：0
> 
> 时间：2012-10-02T14:24:05.927
> 
> 标签：css, xml, html, html-parsing

> **可能重复：**
> [自定义标签……为什么不呢？](https://stackoverflow.com/questions/8906448/custom-tags-why-not)

为什么在 HTML 中使用自定义标签是一种不好的做法？

此处的代码：http: [//jsfiddle.net/ZXr2L/1/](http://jsfiddle.net/ZXr2L/1/)适用于浏览器。

如果我必须在网页上设置 100 个随机单词的样式，使用`<hg></hg>`会节省大量空间和数据，而不是使用`<span class="hg"></span>`. CSS 也适用于这些自定义标签。唯一的问题是 W3 HTML 有效性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:31:03.973

> 为什么在 HTML 中使用自定义标签是一种不好的做法

你是在自问自答。

> 唯一的问题是 W3 HTML 有效性。

您是否在一家公司工作，将来可能需要其他人使用您的代码？你能确定未来的浏览器可以使用你的自定义标签吗？你能确定旧的浏览器会处理它们吗？

标准显然可以被打破，如果你想以自己的方式做事，那么你可以。然而，标准就是这样——标准。遵守它们可以在事情不起作用时为您解决问题，并确保您的代码具有最高质量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:35:47.107

在 IE 中测试你的小提琴，你应该有答案。

html中定义的标签被浏览器理解，您的自定义标签对浏览器毫无意义，并且显然它们不起作用。如果您需要创建自定义标签，您应该通过 javascript 来执行此操作，例如`document.createElement('custom-tag');`

# entity-framework - EF如何知道类viewforbaseentityset的名称...与视图生成

> ID：12692200
> 
> 赞同：0
> 
> 时间：2012-10-02T14:24:24.473
> 
> 标签：entity-framework

使用 EF5.0 并查看编译，我可以看到一切正常。我从调用堆栈中看到视图被调用。edmx 属性元数据工件处理设置为 embed in assembly

下面的这个方法（构造函数）被调用。但它是怎么知道这个名字的？我可以在 1 个组件中拥有多个模型吗？我很高兴它有效，但我想知道下面发生了什么。

有任何想法吗？

```
public ViewsForBaseEntitySetsFE35229A04DD6E5585E40F6CE4FBC33EE6C9199EBD58235921B21B951250FF67()
    {
        this.EdmEntityContainerName = "BosMasterEntities";
        this.StoreEntityContainerName = "BosMasterModelStoreContainer";
        this.HashOverMappingClosure = "0edb68dd82ba8436bcabb10d30d018482670a8944e1013c90d795d35afea1b8d";
        this.HashOverAllExtentViews = "d0d326d5289ea43aa6ea7854e053ba0bd410789e3196101e38bace646c0fa404";
        this.ViewCount = 34;
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T21:56:40.467

实际上，您在截断的代码中遗漏了两条重要信息 - 代码看起来更像这样：

```
[assembly: System.Data.Mapping.EntityViewGenerationAttribute(typeof(Edm_EntityMappingGeneratedViews.ViewsForBaseEntitySets6EB2ED815B2C1EA5C534EACE1F3EA695AAF84C0704F820B6C583CE86EFE39C0A))]

namespace Edm_EntityMappingGeneratedViews
{    
    public sealed class ViewsForBaseEntitySets6EB2ED815B2C1EA5C534EACE1F3EA695AAF84C0704F820B6C583CE86EFE39C0A : System.Data.Mapping.EntityViewContainer
    {

        /// <Summary>
        /// The constructor stores the views for the extents and also the hash values generated based on the metadata and mapping closure and views.
        /// </Summary>
        public ViewsForBaseEntitySets6EB2ED815B2C1EA5C534EACE1F3EA695AAF84C0704F820B6C583CE86EFE39C0A()
        {
            this.EdmEntityContainerName = "Context";
            this.StoreEntityContainerName = "CodeFirstDatabase";
            this.HashOverMappingClosure = "565d1a0ab9083c0e3d54e4d636e9ea8ace70a69f415e728c42b1e687acf65932";
            this.HashOverAllExtentViews = "84db96d2d3c40ffdbcbf3ab1e49f50e068df40cd9e62f87416402f6eb3569da0";
            this.ViewCount = 2;
        }
        ... 
```

首先，有一个 EntityViewGenerationAttribute 类型的程序集级属性。只有具有此属性的程序集才会被视为可以包含视图的程序集。如果您仔细查看该属性，您会发现该属性具有包含视图的类的类型。您可以在一个程序集中拥有多个 EntityViewGenerationAttribute。其次，包含视图的类是从 EntityViewContainer 派生的。如果 EntityViewGenerationAttribute 中指定的类型不是从 EntityViewContainer 派生的，则 EF 将抛出。

# c - 符号扩展的必要性是什么？

> ID：12692209
> 
> 赞同：2
> 
> 时间：2012-10-02T14:25:09.230
> 
> 标签：c, performance, optimization, sign-extension

考虑以下一段 C 代码 -

```
char sum_char(char a,char b)
{
   char c = a+b;
   return c;
} 
```

它涉及 -

1.  将第二个参数转换为符号扩展。
2.  将签名的扩展参数作为 b 推送到堆栈上。
3.  将第一个参数转换为符号扩展。
4.  将签名的扩展参数作为 a 推送到堆栈上。
5.  添加 a & b，将结果转换为 char 并将其存储在 c 中。
6.  C 再次符号扩展。
7.  符号扩展 c 被复制到返回值寄存器和函数返回给调用者。
8.  要存储结果调用函数再次将 int 转换为 char。

我的问题是——

1.  这是谁做的？
2.  做这么多转换的必要性是什么？
3.  它会降低/提高机器/编译器的性能吗？
4.  如果它正在降低性能，我们应该怎么做才能提高它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:28:44.237

您描述的转换仅在抽象机器中执行。如果它导致相同的可观察行为，编译器可以简化所有这些。

打开优化时，我的编译器将其转换为以下汇编器

```
sum_char:
.LFB0:
    .cfi_startproc
    leal    (%rsi,%rdi), %eax
    ret
    .cfi_endproc
.LFE0:
    .size   sum_char, .-sum_char 
```

这只是一个加法（隐藏在`leal`指令中）和一个`ret`跳转。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:32:45.663

1.  **这是谁做的？**- 最终，是 CPU 执行此操作；编译器为 CPU 生成所有相关指令以执行转换
2.  **做这么多转换的必要性是什么？**- 必须进行转换以确保跨多个 C 编译器支持的多个平台的结果的一致性。
3.  **它会降低/提高机器/编译器的性能吗？**- 与“什么都不做”相比，这会降低性能，但没有人会注意到差异。
4.  **如果它正在降低性能，我们应该怎么做才能提高它？**- 无：如果必须对 s 执行算术运算`char`，则对 s 执行算术运算`char`。让优化器负责为您的平台删除所有不必要的指令。在大多数情况下，CPU 都有与 C 语言所需语义兼容的指令，因此生成的代码会很短。

当然如果不需要对有符号字符进行操作，也可以对无符号字符进行操作。这消除了很多符号扩展。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T14:28:27.590

1.  代码，运行时。编译器生成所需的代码以实现编程语言的指定语义。
2.  我不确定你所说的推动“堆栈”，据我所知，C 中没有这样的要求。
3.  那没有意义；相比什么？
4.  您可以尝试删除无意义的`c`变量，然后将`return (char) (a + b);`. 也就是说，我认为这个函数没有太多需要“优化”的地方。它应该编译成很少的代码。如果您可以将其内联，则它可能是 1 条指令的顺序。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T14:33:22.723

我不确定你的问题的细节。您反复引用符号扩展而不引用任何来源；我猜你假设`char`数据类型将被扩展以匹配 CPU 的位数，但我认为不能保证情况并非如此。

但是，作为回答您模糊问题的尝试：

1.  编译器这样做是为了响应您编写代码。谁编写代码？一个开发者，我想。 当你写这个问题时，你这样做了 *。*
2.  如果有必要（因为你没有引用你的来源），我想这是为了让 CPU 可以本地处理算术。
3.  从技术上讲，它会减少它，但仅与具有任意位数的理论机器相比。实际上，它没有明显的区别。
4.  如果您使用与体系结构的本机位数相匹配的数据类型，则会有非常轻微的性能提升。然而，这是*非常*轻微的，通常不值得带来不便。

# android - 如何在特定时间启动应用程序

> ID：12692214
> 
> 赞同：5
> 
> 时间：2012-10-02T14:25:15.910
> 
> 标签：android, android-intent

我想将此功能添加到我的应用程序中，用户可以在其中设置应用程序启动时间，然后应用程序启动。我如何使用广播接收器在用户特定时间打开我的应用程序。我不确定这在android中是否可行？如果您有任何想法，请分享。这是主要活动代码

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    lv1=(ListView)findViewById(R.id.listView);
    final ImageView splashImage = (ImageView) findViewById(R.id.imageView1);
    splashImage.setBackgroundResource(R.layout.splash);
    AnimationDrawable  splashAnimation = (AnimationDrawable) splashImage.getBackground();
    splashImage.onWindowFocusChanged(true);
    splashAnimation.start();    
    AlarmManager am = (AlarmManager) getBaseContext().getSystemService(Context.ALARM_SERVICE);
    Date futureDate = new Date(new Date().getTime() + 86400000);
    Calendar cal = Calendar.getInstance();
    cal.add(Calendar.MINUTE, 1);// start app in 1 min again
    futureDate.setHours(0);
    futureDate.setMinutes(0);
    futureDate.setSeconds(20);
    Intent intent = new Intent(getBaseContext(), MyAppReciever.class);
    PendingIntent sender = PendingIntent.getBroadcast(getBaseContext(), 0, intent,
            PendingIntent.FLAG_UPDATE_CURRENT);
    am.set(AlarmManager.RTC_WAKEUP,cal.getTimeInMillis() , sender);}} 
```

这是接收器类代码

```
class MyAppReciever extends BroadcastReceiver{ public void onReceive(Context context,Intent intent) {
startActivity(new Intent(context, Main_Activity.class));
}private void startActivity(Intent intent) {
// TODO Auto-generated method stub}} 
```

我已将此行添加到清单

```
<receiver  android:process=":remote" android:name="MyAppReciever"></receiver> 
```

现在我的广播触发器，但我得到了这个错误

```
10-02 17:56:27.735: E/AndroidRuntime(9020): java.lang.RuntimeException: Unable to instantiate receiver com.example.testgui.MyAppReciever: java.lang.IllegalAccessException: access to class not allowed 
```

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T14:27:59.367

我正要走出办公室，所以毫无疑问有人可以添加更详细的答案，但您需要使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)

> 警报管理器适用于您希望应用程序代码在特定时间运行的情况，即使您的应用程序当前没有运行。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T14:31:09.870

正如@Paul D'Ambra 所说，您可以使用AlarmManager 来完成。

例子：

首先你需要设置闹钟：

```
AlarmManager am = (AlarmManager) con.getSystemService(Context.ALARM_SERVICE);

Date futureDate = new Date(new Date().getTime() + 86400000);

futureDate.setHours(8);
futureDate.setMinutes(0);
futureDate.setSeconds(0);

Intent intent = new Intent(con, MyAppReciever.class);

PendingIntent sender = PendingIntent.getBroadcast(con, 0, intent,
        PendingIntent.FLAG_UPDATE_CURRENT); 
```

接下来你需要创建一个带有一些代码来执行的接收器（即启动你的应用程序）：

```
public class MyAppReciever extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {

    startActivity(new Intent(context, MyApp.class));
    }
} 
```

# mysql - 内存不足错误 - 错误代码：2008 MySQL 客户端内存不足

> ID：12692215
> 
> 赞同：0
> 
> 时间：2012-10-02T14:25:16.503
> 
> 标签：mysql, union

我试图在 mySQL 工作台或 dbForge 甚至 asp.net 网站中运行以下查询，但是我总是遇到“内存不足异常”。

数据库很大，需要返回的记录很多。我已经阅读了一些其他问题，我需要减少查询以使用更少的内存，但这是一个带有 2 个简单选择语句的 UNION JOIN，来自 3 个不同的表。我怎样才能减少这种情况？

```
SELECT
    t.TICKET as 'Ticket',       
        t.LOGIN as 'Login Id',
        u.Name,
        t.OPEN_Time as 'Open Time',
        (CASE WHEN t.CLOSE_Time>@CONST_EMPTY_DATE THEN t.CLOSE_time ELSE NULL END) as 'Close Time/Liquidation Time',
        (CASE WHEN t.CMD=@CMD_OP_BUY then 'Buy' ELSE 'Sell' END) as 'Type/Liquidation Action',
        t.SYMBOL as 'Symbol',
        t.VOLUME/100.0 as 'Volume',
        t.OPEN_PRICE as 'Open Price',
        t.SL as 'S/L',
        t.TP as 'T/P',
        t.CLOSE_PRICE as 'Closed Price',
        t.SWAPS as 'Swap',
    (t.VOLUME/100.0)*lots.`Lot Size`*t.OPEN_PRICE as 'Open amount of money',        
    (t.VOLUME/100.0)*lots.`Lot Size`* t.CLOSE_PRICE as 'Closed amount of money', 
    t.PROFIT as 'Profit',
    t.COMMISSION as 'Commission',
      (CASE
          WHEN u.GROUP like '%USD%' THEN 'USD'
          WHEN u.GROUP like '%EUR%' THEN 'EUR'
          WHEN u.GROUP like '%JPY%' THEN 'JPY'
          WHEN u.GROUP like '%GBP%' THEN 'GBP'
          ELSE '???' END) as 'Currency',
    t.SERVER_ID as 'server ID'
    FROM 
        trades t 
        INNER JOIN users u ON t.LOGIN=u.LOGIN 
    AND t.SERVER_ID = u.SERVER_ID
        and t.CMD IN (@CMD_OP_BUY,@CMD_OP_SELL) 
        #and t.CLOSE_TIME between fromdate and todate 
        #and u.LOGIN = inlogin 
    and t.HISTORY = 'N'
    inner join lotsize lots on t.SYMBOL = lots.Name
  where t.close_time > '2012-09--17 00:00:00' and t.close_time < '2012-09-24 00:00:00'
UNION ALL
  Select 
    Null as 'Ticket',
        l.LOGIN as 'Login Id',
        u.Name,
        Null as 'Open Time',
        l.liquidation_timestamp as 'Close Time/Liquidation Time',
        l.liquidation_action as 'Type/Liquidation Action',
        Null as 'Symbol',
        Null as 'Volume',
        Null as 'Open Price',
        Null as 'S/L',
        Null as 'T/P',
        Null as 'Closed Price',
        Null as 'Swap',
    Null as 'Open amount of money',     
    Null as 'Closed amount of money', 
    Null as 'Profit',
    Null as 'Commission',
      (CASE
          WHEN u.GROUP like '%USD%' THEN 'USD'
          WHEN u.GROUP like '%EUR%' THEN 'EUR'
          WHEN u.GROUP like '%JPY%' THEN 'JPY'
          WHEN u.GROUP like '%GBP%' THEN 'GBP'
          ELSE '???' END) as 'Currency',
    l.SERVER_ID as 'MT4 server ID'
  From liquidations as l 
    INNER JOIN users as u ON l.LOGIN=u.LOGIN
    AND l.SERVER_ID = u.SERVER_ID; 
```

我想我需要提一下，如果我单独运行任何一个选择查询，那么它会给我正确的结果。只是在使用 UNION 将它们连接在一起时，我遇到了内存不足的错误。

交易表

```
'mt4_trades', 'CREATE TABLE `mt4_trades` (
  `ID` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `TICKET` int(11) DEFAULT NULL,
  `LOGIN` int(11) DEFAULT NULL,
  `SYMBOL` char(16) DEFAULT NULL,
  `DIGITS` int(11) DEFAULT NULL,
  `CMD` int(11) DEFAULT NULL,
  `VOLUME` int(11) DEFAULT NULL,
  `OPEN_TIME` datetime DEFAULT NULL,
  `OPEN_PRICE` double DEFAULT NULL,
  `SL` double DEFAULT NULL,
  `TP` double DEFAULT NULL,
  `CLOSE_TIME` datetime DEFAULT NULL,
  `EXPIRATION` datetime DEFAULT NULL,
  `CONV_RATE1` double DEFAULT NULL,
  `CONV_RATE2` double DEFAULT NULL,
  `CONV_RATE3` double DEFAULT NULL,
  `COMMISSION` decimal(18,2) DEFAULT NULL,
  `COMMISSION_AGENT` decimal(18,2) DEFAULT NULL,
  `SWAPS` decimal(18,2) DEFAULT NULL,
  `CLOSE_PRICE` double DEFAULT NULL,
  `PROFIT` decimal(18,2) DEFAULT NULL,
  `TAXES` decimal(18,2) DEFAULT NULL,
  `COMMENT` char(128) DEFAULT NULL,
  `INTERNAL_ID` int(11) DEFAULT NULL,
  `MARGIN_RATE` double DEFAULT NULL,
  `TIMESTAMP` int(11) DEFAULT NULL,
  `MODIFY_TIME` datetime DEFAULT NULL,
  `MODIFY_REASON` varchar(256) DEFAULT NULL,
  `HISTORY` char(1) DEFAULT NULL,
  `BALANCE` decimal(18,2) DEFAULT NULL,
  `MT4_SERVER_ID` varchar(30) DEFAULT '''',
  PRIMARY KEY (`ID`),
  KEY `mt4_trades_ticket_history_server_id_i` (`TICKET`,`HISTORY`,`MT4_SERVER_ID`),
  KEY `mt4_trades_login_server_id_history_i` (`LOGIN`,`MT4_SERVER_ID`,`HISTORY`),
  KEY `mt4_cmd_i` (`CMD`),
  KEY `mt4_open_time_i` (`OPEN_TIME`),
  KEY `mt4_close_time_i` (`CLOSE_TIME`)
) ENGINE=InnoDB AUTO_INCREMENT=16427471 DEFAULT CHARSET=utf8' 
```

用户表

```
'mt4_users', 'CREATE TABLE `mt4_users` (
  `MODIFY_TIME` datetime DEFAULT NULL,
  `LOGIN` int(11) NOT NULL DEFAULT ''0'',
  `USER_GROUP` varchar(30) DEFAULT NULL,
  `BALANCE` decimal(18,2) DEFAULT NULL,
  `PREVMONTHBALANCE` decimal(18,2) DEFAULT NULL,
  `PREVBALANCE` decimal(18,2) DEFAULT NULL,
  `PREVMONTHEQUITY` decimal(18,2) DEFAULT NULL,
  `PREVEQUITY` decimal(18,2) DEFAULT NULL,
  `BALANCE_STATUS` int(11) DEFAULT NULL,
  `EQUITY` decimal(18,2) DEFAULT NULL,
  `MARGIN` decimal(18,2) DEFAULT NULL,
  `MARGIN_LEVEL` decimal(18,2) DEFAULT NULL,
  `MARGIN_FREE` decimal(18,2) DEFAULT NULL,
  `CREDIT` decimal(18,2) DEFAULT NULL,
  `MODIFY_REASON` varchar(128) DEFAULT NULL,
  `NAME` varchar(128) DEFAULT NULL,
  `EMAIL` varchar(48) DEFAULT NULL,
  `COMMENT` varchar(64) DEFAULT NULL,
  `MT4_SERVER_ID` varchar(30) NOT NULL DEFAULT '''',
  `GROUP` varchar(30) DEFAULT NULL,
  `ADDRESS` varchar(128) DEFAULT NULL,
  PRIMARY KEY (`LOGIN`,`MT4_SERVER_ID`),
  UNIQUE KEY `mt4_users_uk` (`GROUP`,`LOGIN`,`MT4_SERVER_ID`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8' 
```

清算表

```
'mt4_liquidations', 'CREATE TABLE `mt4_liquidations` (
  `ID` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
  `LOGIN` int(11) DEFAULT NULL,
  `LIQUIDATION_ACTION` char(1) DEFAULT NULL,
  `LIQUIDATION_TIMESTAMP` datetime DEFAULT NULL,
  `EQUITY_BEFORE_LIQUIDATION` decimal(18,2) DEFAULT NULL,
  `MARGIN_BEFORE_LIQUIDATION` decimal(18,2) DEFAULT NULL,
  `BALANCE_BEFORE_LIQUIDATION` decimal(18,2) DEFAULT NULL,
  `MT4_SERVER_ID` varchar(30) NOT NULL DEFAULT '''',
  PRIMARY KEY (`ID`,`MT4_SERVER_ID`),
  KEY `Login` (`LOGIN`),
  KEY `liquidation_timestamp` (`LOGIN`,`LIQUIDATION_TIMESTAMP`)
) ENGINE=InnoDB AUTO_INCREMENT=10526248 DEFAULT CHARSET=utf8' 
```

解释查询的输出

```
'1', 'PRIMARY', NULL, NULL, NULL, NULL, NULL, NULL, NULL, 'Impossible WHERE noticed after reading const tables'
'2', 'UNION', 'l', 'ALL', 'Login,liquidation_timestamp', NULL, NULL, NULL, '10502418', ''
'2', 'UNION', 'u', 'eq_ref', 'PRIMARY', 'PRIMARY', '96', 'l.LOGIN,l.MT4_SERVER_ID', '1', ''
NULL, 'UNION RESULT', '<union1,2>', 'ALL', NULL, NULL, NULL, NULL, NULL, '' 
```

# c# - 从 bin 以外的文件夹加载程序集

> ID：12692216
> 
> 赞同：2
> 
> 时间：2012-10-02T14:25:19.163
> 
> 标签：c#, .net, asp.net-mvc, asp.net-mvc-3

我创建了一个 mvc 3 项目，命名空间是 [POC.MVC.PluginHost]。控制器命名空间是 [POC.MVC.PluginHost.Controllers]。我创建了一个类库项目并将其命名空间更改为 [POC.MVC.PluginHost.Controllers]。

类库项目代码：

```
namespace POC.MVC.PluginHost.Controllers
{
    public class BasicExampleController : Controller
    {
        public ActionResult Index()
        {
            // Add action logic here
            throw new NotImplementedException();
        }
        public ActionResult Display()
        {

            return Content("");

        }
    }
} 
```

我编译它并复制到mvc项目的bin目录，当我浏览`http://localhost:xxxx/BasicExample/display`它时它工作正常，但我想将这个编译好的类库的dll复制到另一个文件夹中，如[plugin]但它不起作用，它只有在我工作时才起作用将其复制到我的 mvc 项目的 bin 文件夹中。有没有办法解决这个问题？

编辑 .....................................

我在我的 web.config 中进行测试，例如：

```
<assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
  <probing privatePath="Plugin" />
  <dependentAssembly>
    <assemblyIdentity name="System.Web.Mvc" publicKeyToken="31bf3856ad364e35"/>
    <bindingRedirect oldVersion="1.0.0.0" newVersion="2.0.0.0"/>
  </dependentAssembly>
</assemblyBinding> 
```

但这不起作用！！！！

我对此进行了测试但这仍然不起作用.....

```
 static System.Reflection.Assembly CurrentDomain_AssemblyResolve(object sender, ResolveEventArgs args)
    {
        string assembliesDir = "Plugin";

        string aa = System.IO.Path.Combine(assembliesDir, args.Name + ".dll");
        aa = System.IO.Path.Combine(AppDomain.CurrentDomain.BaseDirectory, aa);
        Assembly asm = Assembly.LoadFrom(aa);
        return asm;
    }

    protected void Application_Start()
    {

        RegisterRoutes(RouteTable.Routes);
        AppDomain.CurrentDomain.AssemblyResolve += new ResolveEventHandler(CurrentDomain_AssemblyResolve);
        AppDomain.CurrentDomain.Load("SamplePlg");

        System.Web.Hosting.HostingEnvironment.RegisterVirtualPathProvider(new AssemblyResourceProvider());

    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T14:39:54.737

### 也可以看看

> [C#：自定义程序集目录](https://stackoverflow.com/questions/1594214/c-custom-assembly-directory)

您可以将其他搜索路径添加到您的 app.config，它会在其中查找以加载程序集。例如

```
<runtime>
  <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
    <probing privatePath="lib" />
  </assemblyBinding>
</runtime> 
```

# visual-studio - 从 VS 迁移到 GCC：改变类型名的使用？

> ID：12692220
> 
> 赞同：1
> 
> 时间：2012-10-02T14:25:39.480
> 
> 标签：visual-studio, stl, g++, typename

我正在 Debian 6.0.6（使用 gcc 4.4.5）上构建一个大型项目，该项目最初是在 Microsoft VS（我认为是 2008 年）中构建的。

问题似乎是，当我将成员声明为 `typedef typename std::set<T>::iterator iterator`，然后使用此迭代器时，gcc 似乎将其解释为 (const T*)。

类中包含`typename`名称的部分：

```
template <class entityType>
class entityArray
{
    private:                 std::set<entityType>             m_array;
    public: typedef typename std::set<entityType>::iterator   iterator;
 ...
    public:
        entityType*     At( const char* name);
 ...
}; 
```

加上讨论所需的其他一些课程：

```
class entity
{
    private:
        entity*     m_parent;
        int         m_ncid;
        std::string     m_name;
    public:
             entity () { m_ncid = 0; m_parent = NULL;}
    virtual ~entity () {};
 ...
};

class attribute : public entity
{
    public:
                   attribute(){};
        virtual   ~attribute(){};
};

class var : public entity
{
    private:
        entityArray<attribute>      m_atts;
    public:
                 var(){}
        virtual ~var(){}
       ...
};

class dim : public entity
{
    public:
                 dim() {};
        virtual ~dim() {};
};

class group : public entity
{
    private:
        entityArray<var>    m_vars;
        entityArray<dim>    m_dims;
...
    public:
        dim*     DimAt( const char* dimname )  { return m_dims.At(dimname);}
}; 
```

现在 an`iterator`通过调用函数来初始化，该函数`DimAt`又调用`At`. 第一类中的`At`函数定义为：

```
template <class entityType>
entityType* entityArray<entityType>::At( const char* name )
{
    entityType  dummy;
    iterator    iter;
    entityType* ptr;

    ... define dummy ...

    iter = m_array.find( dummy );
    ptr  = (iter != m_array.end()) ? &(*iter) : NULL;
    return ptr;
} 
```

编译上述产生 `error: invalid conversion from const dim* to dim*.`，参考`&(*iter)`. 我意识到声明`typename`是必需的`iterator`，因为类型是一个依赖的限定名称，但我不明白为什么`const *`编译器会执行此替换 ()。如果您能提供任何帮助，我将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T23:02:28.333

这与`typename`.

该标准允许`std::set<T>::iterator`和`std::set<T>::const_iterator`是相同的类型，并且对于 GCC，类型是相同的。

原因是修改 a 的元素，`std::set`例如 by`*iter = val`可能会使集合元素的顺序无效，破坏集合的元素总是有序的不变量。通过使`iterator`类型成为常量迭代器而不是可变迭代器，就不可能更改元素，从而防止您破坏集合的顺序。

因此，对于 GCC 的实现，当您使用取消引用迭代器时，`*iter`您会得到 a`const entitType&`并且当您使用它的地址时，`&*iter`您会得到 a`const entityType*`

# c++ - 从字符串中删除 N 个第一个字符

> ID：12692221
> 
> 赞同：30
> 
> 时间：2012-10-02T14:25:49.887
> 
> 标签：c++, string, character

我想从 C++ 中的字符串中删除前 10 个字符。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-10-02T14:28:35.170

像这样：

```
str.erase(0,10); 
```

...

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-02T14:32:43.560

使用`std::string::substr`：

```
try {
   str = str.substr(10);
} catch (std::out_of_range&) {
     //oops str is too short!!!
} 
```

1.  [http://www.cplusplus.com/reference/string/string/substr/](http://www.cplusplus.com/reference/string/string/substr/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T14:40:52.423

我怀疑这里有更多您没有显示的代码，问题可能就在那里。

这段代码工作得很好：

```
#include <string>
#include <iostream>

using namespace std;

int main(int argc, char **argv)
{
    string imgURL = "<img src=\"http://imgs.xkcd.com/comics/sky.png";

    string str = imgURL;
    int urlLength = imgURL.length();
    urlLength = urlLength-10;
    str.erase (str.begin(), str.end()-urlLength);
    imgURL = str;

    cout << imgURL << endl;

    return 0;
} 
```

话虽如此，正如其他人所提到的，有更短的方法可以做到这一点。

# c++ - 将 cv::Mat 存储在字节数组中，以便将数据传输到服务器

> ID：12692224
> 
> 赞同：7
> 
> 时间：2012-10-02T14:25:58.710
> 
> 标签：c++, opencv, bytearray

我需要使用 OpenCV 读取图像，获取其大小并将其发送到服务器，以便它处理图像并将提取的特征返回给我。

我一直在考虑使用`vector<byte>`，但我不明白如何将数据复制到 cv::Mat。我不希望它很快，所以我试图用指针访问数据，但我有一个运行时异常。我有这样的东西。

```
Mat image = imread((path + "name.jpg"), 0);
vector<byte> v_char;
for(int i = 0; i < image.rows; i++)
    {   
        for(int j = 0; j < image.cols; j++)
        {
            v_char.push_back(*(uchar*)(image.data+ i + j));             

        }           
    } 
```

*   哪个是完成这项任务的最佳方法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T14:32:24.890

直接访问是一个好主意，因为它对于 OpenCV 来说是最快的，但是您错过了这**一步**，这可能是您的程序中断的原因。下一行是错误的：

```
v_char.push_back(*(uchar*)(image.data+ i + j)); 
```

您不必增加**i**，您必须增加**i + image.step**。它将是这样的：

```
Mat image = imread((path + "name.jpg"), 0);
vector<byte> v_char;
for(int i = 0; i < image.rows; i++)
    {   
        for(int j = 0; j < image.cols; j++)
        {
            v_char.push_back(*(uchar*)(image.data+ i*image.step + j));             

        }           
    } 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-03T06:14:51.563

到目前为止，您已经收到了很好的答案，但这不是您的主要问题。在将图像发送到服务器**之前，**您可能想要做的是**压缩**它。

因此，看看`cv::imencode()`如何压缩它，并将`cv::imdecode()`其转换回服务器中的 OpenCV 矩阵。只需将 imencode 输出推送到套接字即可。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-10-02T15:39:35.500

改进 Jav_Rock 的答案是我将如何做到的。

```
Mat image = ...;
vector<byte> v_char(image.rows * image.cols);

for (int i = 0; i < image.rows; i++)
  memcpy(&v_char[i * image.cols], image.data + i * image.step, image.cols); 
```

编辑：构造函数初始化将分配足够的空间以避免额外的重新分配，但它也会将向量中的所有项目设置为默认值（0）。以下代码避免了这种额外的初始化。

```
Mat image = ...;
vector<byte> v_char;
v_char.reserve(image.rows * image.cols);

for (int i = 0; i < image.rows; i++)
{
  int segment_start = image.data + i * image.step;
  v_char.insert(v_char.end(), segment_start, segment_start + image.cols);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:16:37.960

我不完全理解你为什么需要使用向量，但如果真的有必要，我建议你做一个简单的 memcpy：

```
vector<byte> v_char(image.width * image.height); //Allocating the vector with the same size of the matrix
memcpy(v_char.data(), image.data, v_char.size() * sizeof(byte)); 
```

# c - printf(%s), 字符串问题...本质上 %s 导致行覆盖。

> ID：12692225
> 
> 赞同：0
> 
> 时间：2012-10-02T14:26:02.663
> 
> 标签：c

好吧，为了合理地了解正在发生的事情......

我正在将 csv 表中的数据读入一个二维数组，如下所示：

```
tableFile = fopen(argv[4], "r");
char tableArray[30][50][256];
char c;
int i=0, j=0, k=0;
while(c != EOF){

    c = fgetc(tableFile);

    switch(c)
    {
        case ',':
            tableArray[i][j++][k]='\0';
            k=0;
            break;
        case '\n':
            tableArray[i++][j][k]='\0';
            j=0;
            k=0;
            break;
        default:
            tableArray[i][j][k++] = c;
            break;
    }
} //end file transfer

fclose(tableFile); 
```

读完文件后，我做了一堆无关紧要的垃圾，但问题是，当我从从所述表 printf 获取的数据中打印一些东西时，我会发疯。

例如，如果我要尝试说类似的话。

```
 char *string = malloc(256*sizeof(char));
 string = tableArray[9][46];
 printf("What the heck is going on with this string %s ", string); 
```

看到 %s 之后的那个空格了吗？它实际上会覆盖“W”，并且 printf 会显示类似“帽子这个强大的 HELLO 正在发生的事情”

有任何想法吗？！？！

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:29:25.237

您的读入行以`'\r'`. 您应该`'\r'`在您的`switch`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:30:56.967

该字符串可能类似于`"HELLO\r "`. 回车将光标移动到行首。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:32:04.267

输入文件中的行如何终止？

如果您使用的是 Windows 行尾转换，也就是说，您也必须在 switch`\r\n`中跳过。`\r`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T14:30:43.270

该文件具有 CR ( `'\r'`) 字符，您将它们放在子字符串的末尾。

# php - JQuery AJAX 淡入内容

> ID：12692227
> 
> 赞同：1
> 
> 时间：2012-10-02T14:26:07.187
> 
> 标签：php, jquery, ajax

> **可能重复：**
> [使我的 ajax 更新的 div 淡入](https://stackoverflow.com/questions/183638/making-my-ajax-updated-div-fade-in)

我希望 AJAX 调用的内容出现`fadeIn`在我的页面上，但是当我使用此代码`$('#sub_container').html(content).fadeIn();`时它不起作用，即使我将动画速度设置为超慢（`slow(5000)`）

```
$('.create').click(function(){
    loadingimg();
    document.title = 'Create Message';
    $.ajax({
        url: 'create.php',
        dataType: 'html',
        success: function(content){
            $('#sub_container').html(content);
            // $('#sub_container').html(content).fadeIn(); <- Fails
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T14:29:03.923

该函数本质上使元素可见，因此如果元素*已经*`.fadeIn()`可见，则似乎什么也不做。您可以通过隐藏元素来确保不是这种情况：

 *```
$('#sub_container').hide().html(content).fadeIn(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:29:23.020

您需要确保它一开始是隐藏的，例如：

```
$('.create').click(function(){
$('#sub_container').fadeOut();    // fade out the current content
loadingimg();
document.title = 'Create Message';
$.ajax({
    url: 'create.php',
    dataType: 'html',
    success: function(content){
        $('#sub_container').html(content).stop().fadeIn();    // fade in the new content
    }
});
}); 
```

但这会让你在元素消失时跳转内容，所以如果有必要，你必须考虑到这一点。*

# ruby-on-rails - Rails 3 -- 登录失败后，不会出现错误

> ID：12692228
> 
> 赞同：0
> 
> 时间：2012-10-02T14:26:09.480
> 
> 标签：ruby-on-rails

编辑：嗯，这很感兴趣。我刚刚注意到，我的注册路线是 /signup。但是，一旦我提交信息并且表单返回无效，我就在路线 /users 中。

* * *

我正在构建一个简单的应用程序来学习 Rails，并且我已经学会了设置身份验证系统。

今天，我添加了一个新的计划表，为用户进行不同的订阅。Plan 模型有_many 用户，并且用户属于计划。实施此操作后，我看到如果输入无效信息，错误消息将不再显示在视图中。

我在 application.html.erb 文件中有以下代码显示它->

```
 <% flash.each do |key, value| %>
    <div class="alert alert-<%= key %>"><%= value %></div>
  <% end %> 
```

它在其他通知上工作正常，但没有显示错误消息。

还需要注意的一件事是，例如，如果我错误地输入了一封电子邮件，Rails 会通过以红色突出显示它来告诉我这是问题所在（之前编辑过的 CSS 来做到这一点）。但是，错误消息本身无处可寻：P

这是我的用户控制器：

```
class UsersController < ApplicationController

  before_filter :signed_in_user, only: [:show]
  before_filter :correct_user,   only: [:show]

    def show
    @user = User.find(params[:id])
    end

    def new
  plan = Plan.find(params[:plan_id])
    @user = plan.users.build
    end

  def create
    @user = User.new(params[:user])
    if @user.save
      sign_in @user
      flash[:success] = "Welcome to the Sample App!"
      redirect_to @user
    else
      render 'new'
    end
  end

  def index

    if current_user
      redirect_to(user_path(current_user))
    else
    redirect_to(root_path)
    end
  end

  private

    def signed_in_user
      unless signed_in?
        store_location
        redirect_to login_url, notice: "Please sign in."
      end
    end

    def correct_user
      @user = User.find(params[:id])
      redirect_to(root_path) unless current_user?(@user)
    end
end 
```

我做了一些研究，人们一直在说这可能是因为重定向，但我不确定我是否正在这样做。

不过，当第一次访问注册时，它采用 /signup?plan_id=1 的形式，在注册表单中使用 plan_id 填充隐藏字段。当它显示错误屏幕时，plan_id 不再存在，我认为这没问题，因为它已经发布了它。这有什么关系吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:43:33.153

我认为问题在于您期望看到的错误消息是`User`对象上的错误，而不是存储在闪存中。在你看来试试这个：

```
<% @user.errors.full_messages.each do |error_message| %>
  <div class="alert"><%= error_message %></div>
<% end %> 
```

有关更多信息，请参阅[ActiveModel::Errors](http://api.rubyonrails.org/classes/ActiveModel/Errors.html)的文档。

# c# - 添加多个 XmlElement.LastChild.InnerText

> ID：12692232
> 
> 赞同：1
> 
> 时间：2012-10-02T14:26:21.630
> 
> 标签：c#, xml, c#-4.0

我有一个函数，我想向一个节点添加多个**“值” 。**这是功能：

```
 private void GetCategory(DataRow reader, XmlElement myNode)
    {
        foreach (DataRow categoryRow in reader.GetChildRows("Article_Category"))
        {
            myNode.LastChild.InnerText = categoryRow["CATEGORY_NAME"].ToString();
        }
    } 
```

myNode.OuterXml 看起来像这样：

```
<field itemid="{2C16342E-7662-432B-9895-5EDB15914D7F}" language="en" version="1" 
fieldid="{1F5956D6-EABE-4F74-A248-B25B7EE90350}" name="Categories" title=""
type="Multilist" source="/sitecore/content/data/Categories" section="Content" 
tooltip=""><value>US</value></field> 
```

我想看起来像这样：

```
<field itemid="{2C16342E-7662-432B-9895-5EDB15914D7F}" language="en" version="1" 
fieldid="{1F5956D6-EABE-4F74-A248-B25B7EE90350}" name="Categories" title=""
type="Multilist" source="/sitecore/content/data/Categories" section="Content" 
tooltip=""><value>US</value><value>China</value><value>India</value></field> 
```

我添加了这个功能：

```
 foreach (DataRow categoryRow in reader.GetChildRows("Article_Category"))
        {
            var newNode = myNode.OwnerDocument.CreateElement("Value");
            newNode.InnerText = categoryRow["CATEGORY_NAME"].ToString();
            myNode.AppendChild(newNode);

        } 
```

它不起作用，因为这就是我的 XML 的样子：

```
 <field itemid="{9259D344-3500-4887-9CDF-F00876F20F2B}" language="en" version="1"
 fieldid="{1F5956D6-EABE-4F74-A248-B25B7EE90350}" name="Country" title="" 
 type="Multilist" source="/sitecore/content/data/Countries" section="Content"
 tooltip=""><value /><Value>Currency Markets</Value></field> 
```

这是一个不允许加起来的**“价值”**标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:34:13.627

您当前的代码会覆盖 LastChild 的文本。您需要添加节点，

```
 //untested
    foreach (DataRow categoryRow in reader.GetChildRows("Category"))
    {
      //myNode.LastChild.InnerText = categoryRow["CATEGORY_NAME"].ToString();

        var newNode = myNode.OwnerDocument.CreateElement("value");
        newNode.InnerText = categoryRow["CATEGORY_NAME"].ToString();
        myNode.AppendChild(newNode);
    } 
```

# qt4 - 如何替换 Q3ListView/Q3ListViewItem 实用程序？

> ID：12692233
> 
> 赞同：1
> 
> 时间：2012-10-02T14:26:21.113
> 
> 标签：qt4, qlistview, qt3

我正在更新一些旧代码，不幸的是这些代码严重依赖于 Q3ListView 和 Q3ListViewItem，它现在已经过时的小助手类。

我假设我现在可以在没有项目层的情况下填充 QListView，但是在查看文档时，我仍然没有很好地掌握这一点。我发现的一个教程用 QStandardItems 填充 QStandardItemModel，然后将其设置为 QListView 的模型，但我也遇到了一个看起来可能很有趣的 QAbstractListModel 类。提出了几个问题：

- QListView 基本上是通过设置一些“模型”来填充的，它本身就填充了项目？

- 在我拥有的旧版本中，Q3ListViewItem 的子类如下：

```
class OurListItem : public Q3ListViewItem {
   public: 
      OurListItem(Q3ListView* parent) :Q3ListViewItem(parent) {ourData = NULL;}
      OurListItem(Q3ListViewItem* parent) :Q3ListViewItem(parent) {ourData = NULL;}
      Data* ourData; 
}; 
```

考虑到现在可用的选项，重新实现这个想法的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:08:08.507

根据您希望转换的干净程度以及转换的速度，您可能还需要查看[QListWidget](http://qt-project.org/doc/qt-4.8/qlistwidget.html)和[QListWidgetItem](http://qt-project.org/doc/qt-4.8/qlistwidgetitem.html)。它们是 Qt4 中的近似类似物，我认为转换为它们通常很简单。我记得（已经有一段时间了），这些类的 Qt3 版本可能也有表格或树的能力（而不仅仅是一个简单的列表），所以你可能也对[QTableWidget](http://qt-project.org/doc/qt-4.8/qtablewidget.html)和[QTreeWidget](http://qt-project.org/doc/qt-4.8/qtreewidget.html)（以及它们相关的项目类）感兴趣）。

# asp.net-mvc - Telerik 日期选择器的自定义验证？

> ID：12692236
> 
> 赞同：0
> 
> 时间：2012-10-02T14:26:44.363
> 
> 标签：asp.net-mvc, validation, telerik, datepicker, onblur

我正在使用 Telerik 日期选择器。日期格式为 dd/mm/yyyy。如果用户输入为 ddmmyyyy，那么它也将转换为 dd/mm/yyyy 格式。现在，如果用户输入类似 ddmmyy 的内容，即如果年份只有 2 位数字，那么我想抛出错误消息以输入有效格式的日期。此日期字段也不是必需的。因此，如果在日期字段的模糊事件中输入了错误的日期格式，则希望显示此消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:12:51.550

根据我的经验和[Telerik 网站上的这个演示，](http://demos.telerik.com/aspnet-ajax/calendar/examples/datepicker/custompopup/defaultvb.aspx)如果你默认使用 ddmmyy 或 ddmmyyyy，如果你将其设置为通常使用该风格的文化，它就可以工作。前任。加拿大英语或 en-CA。

如果您已将格式指定为“dd/mm/yyyy”，则用户必须按原样输入，否则将显示不正确。您可以使用一些 java 脚本将其转换为正确的格式，但是正确设置日期选择器会容易得多。

# css - DIV 和 SPAN - 块和内联 qus。请帮忙

> ID：12692243
> 
> 赞同：-3
> 
> 时间：2012-10-02T14:27:10.727
> 
> 标签：css

我想使用 DIV 和 SPAN 将文本对齐如下，但不能：

ABC1 ABC2
XYZ1 XYZ2

我的带有内部 CSS 的 HTML 如下：

```
<html>
<head>
<title> This is Page Title </title>
<style>
 span {display:block;}
 div {display:inline;}
</style>

</head>
<body>

<div class="x">
<span class="a">ABC1</span>
<span class="a">XYZ1</span>
</div>

<div class="y">
<span class="b">ABC2</span>
<span class="b">XYZ2</span>
</div>

</body>
</html> 
```

其输出如下：
ABC1
XYZ1
ABC2
XYZ2

将不胜感激任何帮助，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:31:19.447

试试这个**[jsFiddle 例子](http://jsfiddle.net/j08691/5HNYP/)**

```
.x {
    float:left;
}
span {
    display:block;
}
​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:29:53.170

[尝试像这样](http://jsfiddle.net/bBr4K/)制作 div 内联块。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:32:20.400

将 CSS 更改为

```
<style>
   span {display:block;}
   div {display:inline; float:left}
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T14:36:05.723

[jsFiddle](http://jsfiddle.net/afshinprofe/GCJrd/21/)

```
.x{
 width:50px;
float:left;
display:inline:block;
}
.y{
 width:50px;
float:left;
display:inline:block;
} 
```

# system.reactive - 使用 .NET 响应式扩展定期调度 IEnumerable

> ID：12692244
> 
> 赞同：1
> 
> 时间：2012-10-02T14:27:13.503
> 
> 标签：system.reactive, enumerable

比如说我有一个可枚举的

```
dim e = Enumerable.Range(0, 1024) 
```

我希望能够做到

```
dim o = e.ToObservable(Timespan.FromSeconds(1)) 
```

这样可观察对象每秒都会生成值，直到可枚举对象用完为止。我想不出一个简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T17:07:13.580

您可以将 Interval 与 Zip 一起使用来获得所需的功能：

```
var sequence = Observable.Interval(TimeSpan.FromSeconds(1))
                         .Zip(e.ToObservable(), (tick, index) => index) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-04T12:48:36.620

我也在寻找解决方案，在阅读了[rx 的介绍](http://www.introtorx.com/Content/v1.0.10621.0/04_CreatingObservableSequences.html#ObservableTimer)之后，我自己做了一个：有一个`Observable.Generate()`重载，我用它来制作我自己的`ToObservable()`扩展方法，以`TimeSpan`句号为周期：

```
public static class MyEx {
    public static IObservable<T> ToObservable<T>(this IEnumerable<T> enumerable, TimeSpan period) 
    {
        return Observable.Generate(
            enumerable.GetEnumerator(), 
            x => x.MoveNext(),
            x => x, 
            x => x.Current, 
            x => period);
    }
    public static IObservable<T> ToObservable<T>(this IEnumerable<T> enumerable, Func<T,TimeSpan> getPeriod) 
    {
        return Observable.Generate(
            enumerable.GetEnumerator(), 
            x => x.MoveNext(),
            x => x, 
            x => x.Current, 
            x => getPeriod(x.Current));
    }
} 
```

已经在[LINQPad](http://www.linqpad.net/Beta.aspx)中测试过。只关心在结果 observable 被处理之后枚举器实例会发生什么。任何更正表示赞赏。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T17:07:54.693

你需要一些东西来安排通知观察者从 Enumerable 中获取的每个值。您可以[在 Rx 调度程序上使用递归调度重载](http://msdn.microsoft.com/en-us/library/hh211640%28v=vs.103%29.aspx#Y0)。

```
Public Shared Function Schedule ( _
    scheduler As IScheduler, _
    dueTime As TimeSpan, _
    action As Action(Of Action(Of TimeSpan)) _
) As IDisposable 
```

在每个预定的调用中，只需 call`enumerator.MoveNext()`和 call `OnNext(enumerator.Current)`，最后`OnCompleted`when`MoveNext()`返回 false。这几乎是最简单的方法。

另一种表达您的要求是将其重述为“对于一个序列，每个值之间有一个最小间隔”。

看到[这个答案](https://stackoverflow.com/a/12653764/802116)。测试用例类似于您的原始问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-03T00:33:58.717

你总是可以做这个非常简单的方法：

```
dim e = Enumerable.Range(0, 1024)
dim o = e.ToObservable().Do(Sub (x) Thread.Sleep(1000)) 
```

当您订阅`o`这些值时，需要一秒钟才能生成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-03T08:55:33.680

我只能假设您正在使用 Range 来简化您的问题。

您是否希望 Enumerable 推送的每个值都延迟一秒？

```
var e = Enumerable.Range(0, 10);
var o = Observable.Interval(TimeSpan.FromSeconds(1))
                  .Zip(e, (_,i)=>i); 
```

还是您只希望每秒推送 Enumerable 的最后一个值。即从 Enumerable 读取，它在您枚举它时正在评估（可能是一些 IO）。在这种情况下，**CombineLatest**比**Zip**更有用。

或者您可能只想每秒获取一个值，在这种情况下，只需使用 Observable.Interval 方法

```
var o = Observable.Interval(TimeSpan.FromSeconds(1)); 
```

如果您解释您的问题空间，那么社区将能够更好地帮助您。

李

*请原谅 C# 的答案，但我不知道等效的 VB.NET 代码是什么。

# javascript - 为什么将 JavaScript 类嵌入到匿名 function() 调用中？

> ID：12692250
> 
> 赞同：17
> 
> 时间：2012-10-02T14:27:26.857
> 
> 标签：javascript, typescript

我正在阅读来自 Microsoft 的名为[TypeScript](http://www.typescriptlang.org/)的新的类似 JavaScript 的语言。在[Playground（示例部分）](http://www.typescriptlang.org/Playground/)中，有一个 TypeScript 语法转换为 JavaScript 代码的简单类。来自 Java 编程背景，学习如何在 JavaScript 中完成从 TypeScript 编译的 OOP 对我来说很有趣。

打字稿代码：

```
class Greeter {
    greeting: string;
    constructor (message: string) {
        this.greeting = message;
    }
    greet() {
        return "Hello, " + this.greeting;
    }
}   

var greeter = new Greeter("world");

var button = document.createElement('button')
button.innerText = "Say Hello"
button.onclick = function() {
    alert(greeter.greet())
}

document.body.appendChild(button) 
```

和等效的 JavaScript 代码：

```
var Greeter = (function () {
    function Greeter(message) {
        this.greeting = message;
    }
    Greeter.prototype.greet = function () {
        return "Hello, " + this.greeting;
    };
    return Greeter;
})();
var greeter = new Greeter("world");
var button = document.createElement('button');
button.innerText = "Say Hello";
button.onclick = function () {
    alert(greeter.greet());
};
document.body.appendChild(button); 
```

Typescript 部分与 Java 非常相似，所以我理解这一点。现在我的问题是为什么在 JavaScript 中`Greeter`类的主体嵌入在匿名`function()`调用中？

为什么不这样写呢？

```
function Greeter(message) {
    this.greeting = message;
}
Greeter.prototype.greet = function () {
    return "Hello, " + this.greeting;
}; 
```

每种方法的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-02T14:30:10.447

以下称为*立即调用函数表达式*：

```
(function(){ ... })(); 
```

它用于保持全局范围清洁。但是，在这种情况下，它不是必需的，因为返回值已分配给 variable `Greeter`。这种模式唯一有用的时候是当您需要“私有”*静态*成员时。

**例如：**

```
var Greeter = (function () {
    var foo = 'foo', bar = 'bar'; /* only accessible from function's defined
                                     in the local scope ... */

    function Greeter(message) {
        this.greeting = message;
    }
    Greeter.prototype.greet = function () {
        return "Hello, " + this.greeting;
    };
    return Greeter;
})(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T14:36:14.053

这是为了允许私人成员。在此示例中，所有成员都是公共的，因此您的两个结构是等效的。但是，如果您想提供私有成员，则需要通过闭包将它们隐藏在调用范围之外。因此，如果您有这样的私人成员：

```
class Greeter {
    private greeting: string;
    constructor (message: string) {
        this.greeting = message;
    }
    greet() {
        return "Hello, " + this.greeting;
    }
} 
```

你可能会得到这样的东西：

```
var Greeter = (function () {
    var greeting="";
    function Greeter(message) {
        greeting = message;
    }
    Greeter.prototype.greet = function () {
        return "Hello, " + greeting;
    };
    return Greeter;
})(); 
```

问候变量将可用于匿名函数内定义的任何函数，但在其他任何地方都不可见。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T14:44:19.133

除了明显的范围/关闭推理。使用立即调用自身的匿名函数预加载（解释）类定义。这允许在执行中预先加载任何 JIT 优化。简而言之，对于更大更复杂的应用程序，它将提高性能。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T14:31:01.710

匿名函数/自执行闭包通常用于封装作用域，以便在其外部只能访问返回值。（或您附加到其他对象的任何东西，如窗口）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T14:31:08.120

匿名函数可能是为了防止与代码的其他部分发生名称冲突。这样想，在您的匿名函数中，您甚至可以将名为“$”的变量声明为您想要的任何变量，同时在代码的其他部分使用 jQuery 而不会发生冲突。

* * *

## 回答 #6

> 赞同：-4
> 
> 时间：2014-07-18T08:13:57.677

闭包是使用参数调用构造函数的唯一方法：

```
var w = new Greeter("hello") 
```

还有其他方法，但都很复杂，有局限性和缺点。

# .net - 使用服务激活的工作流自定义服务主机

> ID：12692251
> 
> 赞同：0
> 
> 时间：2012-10-02T14:27:35.940
> 
> 标签：.net, c#-4.0, workflow-foundation-4

我正在尝试使用 web.config 中的服务激活标记将自定义服务主机添加到 IIS 中托管的工作流。但是我不断收到此错误：

BuildManager 为虚拟路径 /DefaultTest/TestWorkflow.xamlx 返回了无效的编译字符串。

我的 web.config 看起来像这样：

> serviceActivations
> 添加 service="~/TestWorkflow.xamlx" relativeAddress="TestWorkflow.xamlx" factory="ServiceFactory.TestWorkflowServiceHost"
> serviceActivations

如果我在自定义服务主机的构造函数中设置断点，它会命中它，并且在 base.CreateServiceHost 行上抛出异常。

有什么想法可能是错的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T20:44:16.820

尝试这个：

```
<add factory="ServiceFactory.TestWorkflowServiceHost"
             relativeAddress="./TestWorkflow.xamlx"
             service="TestWorkflow.xamlx"/> 
```

# windows - 在批处理文件中使用参数作为中间输入

> ID：12692269
> 
> 赞同：0
> 
> 时间：2012-10-02T14:28:35.173
> 
> 标签：windows, batch-file, scripting, dos

在批处理文件中，我正在运行从用户那里获取输入的 exe。我想硬编码价值并继续处理。检查以下示例：

在蝙蝠文件（GetData.bat）中：

```
set /p UserInput = Enter a number?
%1 
```

调用bat文件：

```
GetData 5 
```

但它正在等待输入而不是设置 5。

注意：这只是例如实际上我正在调用 exe，它在过程中接受输入。我不能修改exe。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:35:15.870

命令行参数与标准输入 (stdin) 不同。有些程序可以接受输入作为命令参数或通过标准输入，但这不是常态。

要使批处理脚本正常工作，您必须将数据 ECHO 到标准输出，然后将结果通过管道传输到 GetData.bat

```
echo 5|GetData 
```

如果您必须提供多行输入，那么您可以执行类似的操作

```
( 
  echo line1
  echo line2
  echo line3 etc.
) | yourProgram.exe 
```

或者您可以将输入放入文本文件中，然后将文件的内容通过管道传输到您的命令。

```
type commands.txt | yourProgram.exe 
```

或者您可以将输入重定向到您的文件

```
<commands.txt yourProgram 
```

请注意，某些程序直接读取键盘，或者在提示输入之前刷新输入缓冲区。您将无法将输入通过管道传输到此类程序中。

**更新 - exe 不使用管道输入**

我见过的大多数数据库命令行程序都可以选择将用户名和密码指定为命令行参数。您应该阅读文档，或在您的 exe 中搜索命令行参数。

如果您的 exe 没有在命令行上指定值的选项，那么您唯一的选择是使用像[AutoHotKey](http://www.autohotkey.com/)这样的第 3 方工具，可以编写脚本以将击键传递给正在运行的程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:02:23.287

看这个例子：

```
echo Enter a number?
set UserInput=%1
echo %UserInput% 
```

然后，如果您键入“GetData 5”，输出将如下所示：

```
Enter a number?
--empty line to execute "set"
5 
```

# process - 在 processmaker 中禁用消息历史记录

> ID：12692274
> 
> 赞同：0
> 
> 时间：2012-10-02T14:28:48.153
> 
> 标签：process, workflow, message, history

有没有办法在 processmaker 中禁用“消息历史记录”，或者可能禁用为某些用户重新发送消息的可能性？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-03T15:35:43.017

ProcessMaker 的最新版本包括根据权限禁用它的可能性。查看更多信息：

消息历史权限可用版本：2.5.1 通过 ProcessMaker 版本，参与案例的用户不仅可以选择查看已发送消息的预览，甚至是私人消息，还可以将消息重新发送给任何允许他们知道的用户公司可能的机密信息。现在，每个用户都限制了重新发送电子邮件的功能。默认情况下，用户没有重新发送消息的权限，如果您想为用户添加重新发送权限，请打开 Process Permission 并在 Type 上选择 Message History

[http://wiki.processmaker.com/index.php/2.0/Process_Permissions#Message_History_Permission](http://wiki.processmaker.com/index.php/2.0/Process_Permissions#Message_History_Permission)

# c# - WebService 应用程序 - 从静态/共享方法返回新对象

> ID：12692278
> 
> 赞同：1
> 
> 时间：2012-10-02T14:28:56.080
> 
> 标签：c#, asp.net, vb.net, web-services

在 web 服务应用程序线程中使用静态/共享方法是否安全？将大量调用此方法以检索新实例。

例如：

```
 Public Shared GetPerson(ByVal name as String,ByVal surname) as Person
    Dim p As New Person
    p.Name = name
    p.Surname = surname
    p.Addresses = GetAllAddresses(name)
    return p
End Function 
```

**更新 1**

发布的代码只是出于问题目的快速键入的示例。GetAllAdrresses 将返回另一种类型的新实例，因此它是线程安全的。

我担心的是，如果同时提出许多请求，我不会返回一个包含一个请求的名称和另一个请求的姓氏的人员实例。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:32:42.537

如果是线程安全的，它只会是`GetAllAddresses`线程安全的。否则，没关系。

关于您的**UPDATE 1**，是的，这将正常工作。它永远不会像您描述的那样感到困惑。它总是在创建对象的新实例，因此各个线程不会干扰彼此的数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:38:57.523

鉴于 GetAllAddresses 只执行读取操作，那么静态方法是完全线程安全的，因为每个重新进入的线程都将创建自己的 Person 实例，对其的引用将存储在堆栈中。

因此，关于 UPDATE 1，因为每个线程都在使用一个新的 Person 实例，所以两个不同的线程不可能写入同一个 person 实例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:36:27.793

据我了解，您尝试制作一个`new Person`并将其返回到您的页面。

通过该代码，线程安全没有实际意义。您应该看到的是，当您将该人保存回数据库时，您必须使其线程安全以避免多次写入。

当您将其写回数据库时，有两种方法可以使其安全（创建新的或进行更新）

一种是使用互斥锁，第二种是使用标准的 asp.net 会话来锁定页面，这将使整个进程的线程安全。

# sql - 在 SQL 中，如何从包含图书馆表和图书表的数据库中创建包含图书数量的图书馆列表？

> ID：12692283
> 
> 赞同：3
> 
> 时间：2012-10-02T14:29:08.790
> 
> 标签：sql, select, inner-join

在最近的一次编程面试中，我被问到一个 SQL 问题，我给出了我认为合理的答案，但我的回答引起了 dba 的强烈反对，我无法弄清楚原因。

从那以后，我对这个问题进行了更多的思考，但我无法弄清楚我的答案有什么可怕的，所以我在这里寻求启发以找出正确的方法，或者失败，更好的方法来生成报告图书馆的数量和其中的书籍数量来自包含图书馆表和书籍表的数据库。

我应该注意到我已经稍微改变了场景，因此措辞与面试问题不同，但任务是相同的。

这是该问题的最小架构：

```
create table library (
  id integer primary key,
  name char(8)
);

create table book (
  id integer primary key,
  name char(8),
  library_id integer,
  foreign key (library_id) references library(id)
); 
```

任务是为拥有两本书或更多本书的图书馆列出图书馆的名称和其中的书籍数量。

而且，这是我提出的解决方案：

```
select
  a.name as name,
  b.nbooks as nbooks
from
    library as a,
    (
        select
            min(library_id) as library,
            count(id) as nbooks
        from
            book
        group by 
            library_id
    ) as b
where
    ( nbooks > 1 ) and (a.id = b.library)
; 
```

再想一想，使用显式`inner join`可能会更好。除此之外，您能否向我指出潜在的陷阱（一般的或与特定数据库相关的）以及生成此报告的正确方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:31:31.320

这是一个简单的方法：

```
select l.name, count(*) as numbooks
from library l join
     books b
     on l.id = b.library_id
group by l.name
having count(*) > 1 
```

你的回答在技术上是可以的。DBA 可能不关心其他人可能会关心的某些文体事物（例如使用“a”作为库的别名而不是“l”）。子查询是不必要的，并且`min(library_id)`突出是不必要的。您可以将聚合函数应用于按列分组，但通常不会这样做。

最大的问题——DBA 可能会回应——是在`WHERE`子句中而不是在`ON`子句中使用连接条件。这很危险，因为如果您将其忽略或进行看似无害的修改，则查询可能会变成 CROSS JOIN 而不是 INNER JOIN。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:35:44.127

我至少看到了一些严重的问题：1）不使用 ANSI`JOIN`语法，2）分组`library_id`并在其上使用聚合函数。

我会这样写来证明我知道如何在必要时返回额外的库列时进行查询：

```
select l.lid, l.name, b.Count
from library l 
inner join (
    select library_id, count(*) as Count
    from books
    group by library_id
    having Count > 1 
) b on l.lid = b.library_id 
```

我还要指出，我特别没有按库名称分组，以防两个库具有相同的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:38:00.117

DBA 不喜欢的可能是子 SELECT。应该尽可能避免这些，因为它们通常性能很差（它们的代码形式也很丑陋）。

在这种情况下，最好使用 JOIN。

```
SELECT library.name AS library
       count( book.id ) AS books
  FROM library
  JOIN book ON book.library_id = library.id
  GROUP BY book.id
  HAVING count( book.id ) > 1 
```

# c++ - c++: cin.clear() 不会重置流

> ID：12692286
> 
> 赞同：0
> 
> 时间：2012-10-02T14:29:18.917
> 
> 标签：c++

`cin`我的问题是，如果发生错误，我无法重置's 流。例如，如果我在需要 int 时输入了一个字符串，然后如果我清除流，那么当循环到下一次时，我仍然会到达一个`cin.fail()-if`.

有什么帮助吗？

**我的代码如下：**

```
int main()
{
    int i;
    while(cin>>i,!cin.eof())
    {
        if(cin.fail())
        {
            cin.clear();
            continue;
        }
        cout<<i<<endl;
    }
    system("pause");
} 
```

**顺便说一句：**有关信息，我使用 Visual Studio 作为 IDE。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T14:31:41.517

好吧，字符串仍然存在，因为您还没有提取它。所以下一次读取也会失败。您需要使用`cin.ignore`来跳过非法字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:34:43.847

使用类似的东西：

```
int i;
while(cin>>i,!cin.eof())
{
    if(cin.fail())
    {
        cin.clear();
        string dummy;
        cin >> dummy;
        continue;
    }
    cout<<i<<endl;
} 
```

这将跳过下一个单词。如果你输入类似的东西，`derp10 20`你会得到 20。

# android - Android2.2 url连接异常

> ID：12692293
> 
> 赞同：2
> 
> 时间：2012-10-02T14:29:57.963
> 
> 标签：android, httpurlconnection

我有以下用于 url 连接的代码，它引发异常但异常对象为空。如何在android 2.2中毫无例外地连接到一个url

```
HttpURLConnection urlConnection= null;
URL url = null;
    try
    {
     url = new URL(urlString.toString());
     urlConnection=(HttpURLConnection)url.openConnection();
     urlConnection.setRequestMethod("GET");
     urlConnection.setDoOutput(true);
     urlConnection.setDoInput(true);
     urlConnection.connect();
    }
    catch(Exception ex)
    {//ex is empty here} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:34:12.083

我认为启用输出时不喜欢获取请求。在这种情况下，您不应设置：

```
urlConnection.setDoOutput(true); 
```

# api - 使用 Lync SDK 的联系人状态

> ID：12692295
> 
> 赞同：1
> 
> 时间：2012-10-02T14:30:05.453
> 
> 标签：api, lync

是否可以使用 Lync SDK 获取联系人状态历史记录，或者监控和存储状态历史记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:57:47.200

您可以编写一个订阅用户状态的应用程序，然后从他们的 StatusChanged 事件中写入某种状态历史日志。

* * *

**小起点：**

在 Endpoint 上创建状态视图：

```
var presenceView = new RemotePresenceView(endpoint, new RemotePresenceViewSettings()); 
```

订阅`PresenceNotificationReceived`活动：

```
presenceView.PresenceNotificationReceived += OnPresenceNotificationReceived; 
```

并处理此事件：

```
private void PresenceNotificationReceived(object sender, RemotePresentitiesNotificationEventArgs e)
{
    foreach (var notification in e.Notifications)
    {
        // Store the notification somewhere
    }
} 
```

# python - 将不同长度的行附加到同一个变量

> ID：12692300
> 
> 赞同：1
> 
> 时间：2012-10-02T14:30:29.540
> 
> 标签：python, append

我正在尝试将冗长的行列表附加到同一个变量。它适用于循环中的前一千次左右的迭代（所有迭代都具有相同的长度），但是在文件末尾附近，行变得有点短，虽然我仍然想附加它们，但我我不知道如何处理它。

正如预期的那样，该脚本给了我一个超出范围的错误。

这是有问题的代码部分的样子：

```
 ii = 0
    NNCat = []
    NNCatelogue = []
    while ii <= len(lines):

        NNCat = (ev_id[ii], nn1[ii], nn2[ii], nn3[ii], nn4[ii], nn5[ii], nn6[ii], nn7[ii], nn8[ii], nn9[ii], nn10[ii], nn11[ii])
        NNCatelogue.append(NNCat)
        ii = ii + 1

    print NNCatelogue, ii 
```

对此的任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:04:32.160

我会回答你没有先问的问题；）：这段代码怎么能更像pythonic？

代替

```
ii = 0
NNCat = []
NNCatelogue = []
while ii <= len(lines):

    NNCat = (ev_id[ii], nn1[ii], nn2[ii], nn3[ii], nn4[ii], nn5[ii], nn6[ii], nn7[ii], nn8[ii], nn9[ii], nn10[ii], nn11[ii])
    NNCatelogue.append(NNCat)
    ii = ii + 1 
```

你应该做

```
NNCat = []
NNCatelogue = []
for ii, line in enumerate(lines):

    NNCat = (ev_id[ii], nn1[ii], nn2[ii], nn3[ii], nn4[ii], nn5[ii], nn6[ii],
             nn7[ii], nn8[ii], nn9[ii], nn10[ii], nn11[ii])
    NNCatelogue.append(NNCat) 
```

在每次通过期间`ii`将为您增加一并且`line`将是当前行。

至于你的短线，你有两个选择

*   `None`没有实际值时，使用特殊值（如）填写
*   `nn1`检查, `nn2`, ...的长度，`nn11`看它们是否足够大

第二种解决方案将更加冗长、难以维护且令人困惑。我强烈建议`None`在没有数据时使用（或您自己创建的其他特殊值）作为占位符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:16:23.340

```
from itertools import izip_longest
NNCatelogue = list(izip_longest(ev_id, nn1, nn2, ... nn11, fillvalue=None)) 
```

[有关izip](http://docs.python.org/library/itertools.html#itertools.izip_longest)的文档，请参见此处。`list`如果您不需要它，请帮自己一个忙并跳过迭代器周围。在许多情况下，您可以使用迭代器和列表，这样可以节省大量内存。特别是如果您有很长的列表，那么您将在这里分组。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T15:39:39.297

```
def gvop(vals,indx): #get values or padding
    return vals[indx] if indx<len(vals) else None

NNCatelogue = [(gvop(ev_id,ii), gvop(nn1,ii), gvop(nn2,ii), gvop(nn3,ii), gvop(nn4,ii),
                gvop(nn5,ii), gvop(nn6,ii), gvop(nn7,ii), gvop(nn8,ii), gvop(nn9,ii),
                gvop(nn10,ii), gvop(nn11,ii)) for ii in xrange(0, len(lines))] 
```

通过定义此其他函数以返回正确的值或填充，您可以确保行的长度相同。如果 None 不是您想要的，您可以将填充更改为任何内容。

然后列表 comp 像以前一样创建一个元组列表，除了在输入中的某些行较短的情况下包含填充。

# jms - 使用 ActiveMQ 获得比 RabbitMQ 更好的性能

> ID：12692301
> 
> 赞同：1
> 
> 时间：2012-10-02T14:30:31.210
> 
> 标签：jms, activemq, rabbitmq, messaging, amqp

我想知道使用 ActiveMQ 而不是 RabbitMQ 实现更快的原始消息传递吞吐量（对于发布和消费）是否不寻常？我之所以这么问，是因为我遇到的所有其他在线参考都以 RabbitMQ 的速度更快而自豪。

我没有使用合法的基准测试工具进行测试；相反，我修改了两者的基本发布者/消费者示例，以测试具有 3 KB 消息正文的 100,000 条消息。请注意，我正在两个不同的 Amazon EC2 x-large 实例上测试发布和使用。也许我没有正确设置我的代码？请在下面查看我的结果和代码。

```
ActiveMQ Send 3kb   
Average Time per Message (ns):  497276.1179
Average # Messages per second:  2010.935101
Total Time (s):                 49.72810906

ActiveMQ Recv 3kb   
Average Time per Message (ns):  43813.35476
Average # Messages per second:  22823.86285
Total Time (s):                 4.381379289

RabbitMQ Send 3kb   
Average Time per Message (ns):  1041524.626
Average # Messages per second:  960.1309229
Total Time (s):                 104.1524626

RabbitMQ Recv 3kb   
Average Time per Message (ns):  612559.3732
Average # Messages per second:  1632.494814
Total Time (s):                 61.25593732 
```

**在 RabbitMQ Send.java 和 Recv.java 中删除 queueDeclare() 后更新了数字：**

这极大地改善了 RabbitMQ 的时间，但是 ActiveMQ 的消耗时间只有 4 秒，这一定是有问题的......

```
ActiveMQ Send 3kb   
Average Time per Message (ns):  491404.5666
Average # Messages per second:  2034.983124
Total Time (s):                 49.14045666

ActiveMQ Recv 3kb   
Average Time per Message (ns):  41976.17158
Average # Messages per second:  23823.03965
Total Time (s):                 4.197617158

RabbitMQ Send 3kb   
Average Time per Message (ns):  354795.8818
Average # Messages per second:  2818.522005
Total Time (s):                 35.47958818

RabbitMQ Recv 3kb   
Average Time per Message (ns):  440349.3892
Average # Messages per second:  2270.924009
Total Time (s):                 44.03493892 
```

**ActiveMQ 发送.java**

```
public class Send implements Runnable {

private final static int NUMBER_OF_MESSAGES = 100000;
private static long startTime = 0;
private static long stopTime = 0;
private static long totalTime = 0;

public static void main(String[] argv) throws java.io.IOException {
    (new Thread(new Send())).start();
}

public void run() {
    try {
        // Create a ConnectionFactory
        ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://localhost:61616");

        // Create a Connection
        Connection connection = connectionFactory.createConnection();
        connection.start();

        // Create a Session
        Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);

        // Create the destination (Topic or Queue)
        Destination destination = session.createQueue("TEST.FOO");

        // Create a MessageProducer from the Session to the Topic or Queue
        MessageProducer producer = session.createProducer(destination);
        producer.setDeliveryMode(DeliveryMode.NON_PERSISTENT);

        for (int i=0; i <= NUMBER_OF_MESSAGES; i++){
            startTime = System.nanoTime();

            // 3kb
            String text = "AMFu8UlKW2zJBxUQbxNfU3HneB11uEOeC..."

            TextMessage message = session.createTextMessage(text);

// Tell the producer to send the message
            //System.out.println("Sent message: "+ message.hashCode() + " : " + Thread.currentThread().getName());
            producer.send(message);
            stopTime = System.nanoTime();
            totalTime = totalTime + stopTime-startTime;
            System.out.println(i + "," + Long.toString(stopTime-startTime));

        }

        // Clean up
        session.close();
        connection.close();

        //System.out.println("");
        //System.out.println("Total Time: " + totalTime + "ns");
        //System.out.println("Avg. Time: " + totalTime/NUMBER_OF_MESSAGES + "ns");
        //System.out.println("");

    }
    catch (Exception e) {
        System.out.println("Caught: " + e);
        e.printStackTrace();
    }
}
} 
```

**ActiveMQ Recv.java**

```
public class Recv implements Runnable {

private static long startTime = 0;
private static long stopTime = 0;
private static long totalTime = 0;
private static int numMessages = 0;

public static void main(String[] argv)
    throws java.io.IOException {

    (new Thread(new Recv())).start();

}

public void run() {
    try {

        // Create a ConnectionFactory
        ActiveMQConnectionFactory connectionFactory = new ActiveMQConnectionFactory("tcp://x.x.x.x:61616");

        // Create a Connection
        Connection connection = connectionFactory.createConnection();
        connection.start();

        // Create a Session
        Session session = connection.createSession(false, Session.AUTO_ACKNOWLEDGE);

        // Create the destination (Topic or Queue)
        Destination destination = session.createQueue("TEST.FOO");

        // Create a MessageConsumer from the Session to the Topic or Queue
        MessageConsumer consumer = session.createConsumer(destination);

        // Message Listener
        MyListener listener = new MyListener();
        consumer.setMessageListener(listener);

        // Wait for a message
        //Message message = consumer.receive(1000);

       // consumer.close();
       // session.close();

// connection.close();
    } catch (Exception e) {
        System.out.println("Caught: " + e);
        e.printStackTrace();
    }
}

public class MyListener implements MessageListener {
    public void onMessage(Message message) {
        try {
            startTime = System.nanoTime();
            if (message instanceof TextMessage) {
                TextMessage textMessage = (TextMessage) message;
                String text = textMessage.getText();
                stopTime = System.nanoTime();
                totalTime = totalTime + stopTime-startTime;

                System.out.println(numMessages + "," + Long.toString(stopTime-startTime));

                numMessages++;

            } else {
                System.out.println("Received: " + message);
            }
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
} 
```

**RabbitMQ 发送.java**

```
public class Send implements Runnable {

private final static String QUEUE_NAME = "hello";
private final static int NUMBER_OF_MESSAGES = 100000;
private static long startTime = 0;
private static long stopTime = 0;
private static long totalTime = 0;

// 3kb
private static final String message = "AMFu8UlKW2zJB..."

public static void main(String[] argv)
 throws java.io.IOException {

 (new Thread(new Send())).start();

}

public void run() {

try {
     ConnectionFactory factory = new ConnectionFactory();
     factory.setHost("localhost");
     Connection connection = factory.newConnection();
     Channel channel = connection.createChannel();

     for (int i=1; i <= NUMBER_OF_MESSAGES; i++){
         startTime = System.nanoTime();

         // No Persistence
         // channel.queueDeclare(QUEUE_NAME, false, false, false, null);
         channel.basicPublish("", QUEUE_NAME, null, message.getBytes());

         stopTime = System.nanoTime();
         totalTime = totalTime + stopTime-startTime;
         System.out.println(i + "," + Long.toString(stopTime-startTime));
     }

     channel.close();
     connection.close();

 } catch (Exception e) {
     e.printStackTrace();
 }
}
} 
```

**RabbitMQ Recv.java**

```
private final static String QUEUE_NAME = "hello";
private static long startTime = 0;
private static long stopTime = 0;
private static long totalTime = 0;
private static int numMessages = 0;

public static void main(String[] argv) {
    (new Thread(new Recv())).start();
}

public void run(){
    try {
        ConnectionFactory factory = new ConnectionFactory();
        factory.setHost("x.x.x.x");
        Connection connection = factory.newConnection();
        Channel channel = connection.createChannel();

        // No Persistence
        // channel.queueDeclare(QUEUE_NAME, false, false, false, null);

        QueueingConsumer consumer = new QueueingConsumer(channel);
        channel.basicConsume(QUEUE_NAME, true, consumer);

        while (true) {
            startTime = System.nanoTime();
            QueueingConsumer.Delivery delivery = consumer.nextDelivery();
            String message = new String(delivery.getBody());
            stopTime = System.nanoTime();
            totalTime = totalTime + stopTime-startTime;

            System.out.println(numMessages + "," + Long.toString(stopTime-startTime));

            numMessages++;

        }
    } catch (Exception e) {
        e.printStackTrace();
    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T12:54:34.260

好吧，我看了你的代码和你的基准标记，但只是在 Recv 方式。我看到 RabbitMq 的数字是 ActiveMq 的两倍。然后我看到了两者的源代码，并警告我..

在 Rabbitqm Recv 源代码中，您总是为每条消息做一个 queuDeclare，如果通信时间是当前的主要延迟，请确保 ActiveMq 的两倍时间比 Rabbitmq 来自这里。

# eclipse - 用于 TypeScript 的 Eclipse 插件？

> ID：12692306
> 
> 赞同：67
> 
> 时间：2012-10-02T14:30:43.030
> 
> 标签：eclipse, typescript

新的 Microsoft [TypeScript](http://www.typescriptlang.org/)语言（JavaScript 的类型化超集）似乎很有趣，是否有任何 alpha / 孵化器项目试图在 Eclipse 中支持它？或者现在希望它还为时过早

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-08-01T09:58:49.447

检查[这个由](https://github.com/palantir/eclipse-typescript)[palantir](http://www.palantir.com)构建的开源插件。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-10-02T20:02:14.383

这个问题是在 TypeScript 发布的那天被问到的，所以截至今天（2012 年 10 月 2 日），还没有支持。话虽如此，[XText](http://www.eclipse.org/Xtext/)团队——一个负责快速创建 DSL 的团队——知道 TypeScript，如果他们做某事我不会感到惊讶。

另一个值得关注的地方是微软。根据他们对 TypeScript 的动机，他们可能会推动一个 Eclipse 项目（尽管我对此表示怀疑）。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-28T08:10:30.300

Orion（基于 Web 的 Eclipse IDE）将是一个不错的选择。它已经在使用 nodejs，因此合并 tsc 和语言服务会更容易。现在他们已经支持 Javascript，包括一些类型推断。我知道打字稿在他们的雷达上。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-08-11T17:09:37.763

看起来 Eclipse Typescript 插件的测试版是在 2013 年 8 月 7 日上传的。我还没有机会尝试它，但它看起来很有希望。

[http://marketplace.eclipse.org/content/typescript#.UgfEuD9IG-V](http://marketplace.eclipse.org/content/typescript#.UgfEuD9IG-V)

[https://github.com/palantir/eclipse-typescript](https://github.com/palantir/eclipse-typescript)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-19T22:23:02.267

在实现特定插件之前，如果您有足够的冒险精神，您可能会尝试使用 JSDT 并将 *.ts 文件与 JavaScript 编辑器相关联。如果您收到 JavaScript 验证错误，请在 Project > Properties > Builders 下禁用 JavaScript Validator。[对于自动 TypeScript 编译，您可以按照此处](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.user/gettingStarted/qs-96_non_ant_pjs.htm)或[此处](https://stackoverflow.com/questions/8248567/how-can-i-configure-eclipse-to-run-an-external-builder-or-shell-command)的描述设置外部构建器。我的设置：

*   主要的
    *   位置：/usr/local/bin/tsc
    *   工作目录：${build_project}
    *   参数：${build_files:f}
*   刷新
    *   完成后刷新资源：选中
    *   包含所选资源的文件夹
*   环境
    *   路径 = /user/local/bin
*   构建选项
    *   分配控制台：选中
    *   运行构建器：在自动构建期间
    *   指定资源：包含 *.ts 文件的文件夹

# javascript - 如何停止非活动 Iframe 中的 javascript ajax 请求？

> ID：12692307
> 
> 赞同：2
> 
> 时间：2012-10-02T14:30:43.673
> 
> 标签：javascript, jquery, ajax, iframe, polling

我制作了网站，其中各种其他页面内置为带有 i 框架的“应用程序”：

```
<iframe id="frame1" src="./app1.php">
<iframe id="frame2" src="./app2.php"> 
```

在这些应用程序中，执行了 javascript 代码，其中包括非常高频的 HTTP 请求。

```
$('#app1button').click(function () {
     //Here i have to stop the HTTP-Requests which where fired from the JS of App2
     hideAllApps();
     showApp(app1);
}); 
```

app1 非常频繁地从服务器轮询信息：

app1.php 中有 Javascript::

```
 Handler = window.setInterval(getStatus, 100); //start status messages 
```

当我现在单击 app2 时，会弹出另一个应用程序，由于性能原因，我想停止在 app1.php 中加载的 javascript。

```
$('#app2button').click(function () {
    //Here i have to stop the HTTP-Requests which where fired from the JS of App1
    hideAllApps();
    showApp(app2);
}); 
```

我怎样才能做到这一点？你有什么想法？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T14:33:56.053

在第 2 帧中，您可以尝试`window.parent.frame["frame1"].stop()`在第 1 帧中将 stop() 定义为清除间隔的函数。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T14:47:25.757

由于所有 iframe 都有自己的窗口。您可以使用`window.onfocus`. `window.onblur`. 将代码放在每个 iframe 中。[jsfiddle](http://jsfiddle.net/KzuLY/)

```
var Handler ;
window.onfocus = function(){
         Handler = window.setInterval(getStatus, 100); //start status messages

}
window.onblur = function(){

  clearInterval(Handler );
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T14:35:32.410

确保两个 iframe 在页面加载时都被隐藏

一旦你打开它们

```
$('#app2button').click(function () { 
```

添加javascript代码以加载内容

```
$('#app2button').html().load() 
```

# c - 通过指针将数组转换为二维数组

> ID：12692310
> 
> 赞同：6
> 
> 时间：2012-10-02T14:30:49.353
> 
> 标签：c, arrays, pointers

是否可以将一维数组转换为二维数组？

我首先认为这很容易，只需将 2D 数组的指针设置为 1D 数组的开头，如下所示：

```
int foo[] = {1,2,3,4,5,6};
int bla[2][3] = foo; 
```

因为我可以像这样轻松地创建一个二维数组：

```
int bla[2][3] = {1,2,3,4,5,6}; 
```

所以现在的问题是，有没有办法通过指针转换它？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T14:35:11.317

您不能`int bla[2][3]`用 an初始化 an `int*`（`foo`在那种情况下会变成什么）。

您可以通过声明指向数组的指针来实现该效果`int`，

```
int (*bla)[3] = (int (*)[3])&foo[0]; 
```

但请确保尺寸确实匹配，否则会发生严重破坏。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T14:57:10.293

我知道您指定了指针...但看起来您只是想将数组中的数据存储在二维数组中。那么只有`memcpy()`从一维数组到二维数组的内容呢？

```
int i, j;
int foo[] = {1, 2, 3, 4, 5, 6};
int bla[2][3];
memcpy(bla, foo, 6 * sizeof(int));
for(i=0; i<2; i++)
   for(j=0; j<3; j++)
      printf("bla[%d][%d] = %d\n",i,j,bla[i][j]); 
```

产量：

```
bla[0][0] = 1
bla[0][1] = 2
bla[0][2] = 3
bla[1][0] = 4
bla[1][1] = 5
bla[1][2] = 6 
```

这就是你的全部目标，对吧？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T16:35:05.537

```
int (*blah)[3] = (int (*)[3]) foo; // cast is required

for (i = 0; i < 2; i++)
  for (j = 0; j < 3; j++)
    printf("blah[%d][%d] = %d\n", i, j, blah[i][j]); 
```

请注意，这不会从一维数组*转换为二维数组；* `foo`这只允许您访问 2D 数组的`foo` *内容*。

那么为什么会这样呢？

首先，记住下标表达式`a[i]`被解释为`*(a + i)`; 我们在之后找到第`i`' 个*元素*`a`的地址并取消引用结果。所以`blah[i]`相当于`*(blah + i)`; 我们找到后面的第 ' 个 3 元素数组的地址并`i`取消*引用`int`*`blah`结果，所以的*类型*是。 `blah[i]``int [3]`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T14:37:30.730

是的，如果您可以使用指针数组：

```
 int foo[] = {1,2,3,4,5,6};
 int *bla[2]={foo, foo+3}; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T15:09:29.180

您可以使用`union`将一个数组别名为另一个数组：

```
#include <stdio.h>

union
{
  int foo[6];
  int bla[2][3];
} u = { { 1, 2, 3, 4, 5, 6 } };

int main(void)
{
  int i, j;

  for (i = 0; i < 6; i++)
    printf("u.foo[%d]=%d ", i, u.foo[i]);
  printf("\n");

  for (j = 0; j < 2; j++)
  {
    for (i = 0; i < 3; i++)
      printf("u.bla[%d][%d]=%d ", j, i, u.bla[j][i]);
    printf("\n");
  }

  return 0;
} 
```

输出（[ideone](http://ideone.com/WjN5m)）：

```
u.foo[0]=1 u.foo[1]=2 u.foo[2]=3 u.foo[3]=4 u.foo[4]=5 u.foo[5]=6 
u.bla[0][0]=1 u.bla[0][1]=2 u.bla[0][2]=3 
u.bla[1][0]=4 u.bla[1][1]=5 u.bla[1][2]=6 
```

# c# - 将十进制 sql 类型转换为 .net 浮点类型

> ID：12692326
> 
> 赞同：1
> 
> 时间：2012-10-02T14:31:30.290
> 
> 标签：c#, sql-server, type-conversion, sqldatatypes

我在sql中有十进制（18,2）数据，我在.net端设置了类的属性。当我选择对象时，.net 返回如下错误：

```
The 'DiscountRate' property on 'Product' could not be set to a 'Decimal' value. You must set this property to a non-null value of type 'Single'. 
```

你有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:33:20.367

在您的 .NET 代码中为 decimal(18, 2) 输入双精度或十进制类型。

有关从 SQL 到 .NET 类型的交叉引用，请参见[此处](http://technet.microsoft.com/en-us/library/ms131092%28v=sql.90%29.aspx)。

现在，如果您的小数列可以为空，请确保您使用可为空的小数或

```
public decimal? DiscountRate { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:35:36.733

我建议您需要将 .NET 类中的属性更改为十进制类型，或者在设置时将其显式转换为浮点数。您使用哪个实际上取决于您的代码，尽管在没有任何进一步上下文的情况下使用十进制类型似乎更正确。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:35:47.153

您可以使用`Decimal Type`

链接：http: [//msdn.microsoft.com/en-us/library/system.decimal.aspx](http://msdn.microsoft.com/en-us/library/system.decimal.aspx)

你可以阅读`Specifying Parameter Data Types section`

链接：http: [//msdn.microsoft.com/en-us/library/yy6y35y8.aspx](http://msdn.microsoft.com/en-us/library/yy6y35y8.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T14:38:13.467

您应该将属性更改为`decimal`. 它使转换更容易，并保护您免受`float`或`double`.

这是对该问题的广泛讨论：[十进制与双精度](https://stackoverflow.com/questions/4/when-setting-a-forms-opacity-should-i-use-a-decimal-or-double)

# sql-server - ASP.NET MVC 将 Active Directory 用户详细信息复制到数据库表中

> ID：12692331
> 
> 赞同：0
> 
> 时间：2012-10-02T14:31:43.567
> 
> 标签：sql-server, asp.net-mvc, active-directory

我有一个使用 Active Directory 处理访问和角色的 Intranet 应用程序。这一切都很好。

在我的应用程序中有一个`Customer`数据库。每个都`Customer`可以有多个类别，每个类别都有一名工作人员。考虑到这一点有助于减少对 Active Directory 的查询数量，我认为在我的数据库中拥有我的 Active Directory 用户及其一些详细信息的副本会更容易，这样我就可以在我的模型之间创建导航属性。

谁能建议一种将 Active Directory 中的某些字段复制到我的 SQL Server 数据库中的方法？我只需要`Firstname`, `Surname`, `EmployeeID`,`Email`等。

如果它每小时/每天运行一次，那将很有用。

# r - R: 1 Ss 的 ABC 错误

> ID：12692333
> 
> 赞同：0
> 
> 时间：2012-10-02T14:31:44.713
> 
> 标签：r

**编辑：已解决，当我更新包时错误消失了。**

仅使用一个汇总统计信息时出现错误。发生这种情况有什么原因吗？有没有办法解决这个问题？谢谢

```
library(abc)
data(human)

target<-(stat.voight["hausa",])[,1]
sumstat<-(stat.3pops.sim)[,1]
modsel.ha <- postpr(target, models, sumstat, tol=.05, method="mnlogistic")

#Error in eval(predvars, data, env) : numeric 'envir' arg not of length one 
```

其他细节：由于 R 会话刚刚开始，没有加载其他对象（据我所知）。当我使用两个汇总统计信息而不是仅 1 个 postpr 时工作正常。根据 nograpes 请求的会话详细信息

```
 sessionInfo()
    R version 2.15.1 (2012-06-22)
    Platform: i686-pc-linux-gnu (32-bit)

    locale:
     [1] LC_CTYPE=en_US.UTF-8       LC_NUMERIC=C               LC_TIME=en_US.UTF-8       
     [4] LC_COLLATE=en_US.UTF-8     LC_MONETARY=en_US.UTF-8    LC_MESSAGES=de_DE.UTF-8   
     [7] LC_PAPER=C                 LC_NAME=C                  LC_ADDRESS=C              
    [10] LC_TELEPHONE=C             LC_MEASUREMENT=en_US.UTF-8 LC_IDENTIFICATION=C       

    attached base packages:
    [1] stats     graphics  grDevices utils     datasets  methods   base     

    other attached packages:
    [1] abc_1.5       locfit_1.5-7  quantreg_4.79 SparseM_0.96  nnet_7.3-4    MASS_7.3-          21  

    loaded via a namespace (and not attached):
    [1] grid_2.15.1     lattice_0.20-10 tools_2.15.1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T14:14:59.563

当我升级 abc 后，问题就解决了。当然，这是旧版本软件包的错误。

# android - Android - 尝试创建 SurfaceView 并用于相机应用时出现异常

> ID：12692334
> 
> 赞同：2
> 
> 时间：2012-10-02T14:31:46.030
> 
> 标签：android, camera

我一直在尝试使用 API 在 Eclipse for Android 上编写相机应用程序 - 我从下面的链接中获得了这个示例，但是在创建 SurfaceView（下面称为预览）时，该应用程序似乎因 Nullpointerexception 而崩溃。

真的非常感谢任何帮助..我正在尝试学习android相机API并整天坚持这个！

**这些是 MainWindow.java 中的几行，它是主要的 Activity...它输出 1 和 2，然后终止。**

```
 Log.i(TAG, "1");
    preview = new Preview(this);
    Log.i(TAG, "2 " + R.id.preview);
    ((FrameLayout) findViewById(R.id.preview)).addView(preview);
    Log.i(TAG, "3");

    buttonClick = (Button) findViewById(R.id.buttonClick);
    Log.i(TAG, "4");
    buttonClick.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            Log.i(TAG, "5");
            preview.camera.takePicture(shutterCallback, rawCallback,jpegCallback);
        }
    }); 
```

**这些是 Preview.java 的前几行**

```
public class Preview extends SurfaceView implements SurfaceHolder.Callback {

private static final String TAG = "PreviewClass";

SurfaceHolder mHolder;
public Camera camera;

Preview(Context context) {
    super(context);
    // Install a SurfaceHolder.Callback so we get notified when the
    // underlying surface is created and destroyed.
    Log.i(TAG, "11");   
    mHolder = getHolder();
    Log.i(TAG, "12");
    mHolder.addCallback(this);
    Log.i(TAG, "13");
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

@Override
public void surfaceCreated(SurfaceHolder holder) {
    Log.i(TAG, "trying pre 15");
    camera = Camera.open();
    try
    {
        Log.i(TAG, "15"); 
```

# jquery - ASP.NET MVC 4 中使用“不显眼”验证的 JavaScript 和 C# 本地化不同步

> ID：12692337
> 
> 赞同：1
> 
> 时间：2012-10-02T14:31:49.633
> 
> 标签：jquery, asp.net-mvc, unobtrusive-validation

我最近将我的 MVC3 项目升级到 MVC4，自从升级以来，我似乎在 JavaScript 验证（由不显眼的验证生成）和 .NET 验证之间存在一些差异。

例如，不显眼的验证将“2012 年 15 月 10 日”标记为无效日期……但是，如果我禁用 JavaScript，则该值使其通过服务器端验证就可以了。

有什么我想念的吗？任何人都可以对此有所了解，将不胜感激。

# node.js - 如何在 node.js 和 mongoDB 本机驱动程序上启用调试？

> ID：12692339
> 
> 赞同：5
> 
> 时间：2012-10-02T14:31:54.923
> 
> 标签：node.js, mongodb, logging, node-mongodb-native

我使用带有连接池的 node.js 和 node-mongodb-native 驱动程序。有什么方法可以启用调试以查看发生了什么、有多少连接处于活动状态以及连接何时打开或关闭？

我想看到类似的东西：

```
* 连接 xxx 在主机上打开：端口
* 连接 yyy 在 host:port 上打开
* 连接 xxx 关闭

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2020-04-26T17:13:38.593

1.  要查看发送到 MongoDB 的命令，请将[驱动程序记录器的](https://mongodb.github.io/node-mongodb-native/3.6/reference/management/logging/)级别设置为`debug`.
2.  要对[连接池事件](https://mongodb.github.io/node-mongodb-native/3.6/reference/management/cmap-monitoring/#overview-of-cmap-events)做出反应，只需订阅它们并自己记录。
3.  您可能需要[拓扑监控](https://mongodb.github.io/node-mongodb-native/3.6/reference/management/sdam-monitoring/)来对拓扑变化做出反应，例如加入辅助节点或与副本集断开连接。

```
const client = new MongoClient('mongodb://127.0.0.1:27017/', {
  useUnifiedTopology: true,
  loggerLevel: 'debug',
  // logger: (message, context) => console.dir(context),
})

// connection pool monitoring
client.on('connectionPoolCreated', event => console.dir(event))
client.on('connectionPoolClosed', event => console.dir(event))
client.on('connectionCreated', event => console.dir(event))
client.on('connectionReady', event => console.dir(event))
client.on('connectionClosed', event => console.dir(event))
client.on('connectionCheckOutStarted', event => console.dir(event))
client.on('connectionCheckOutFailed', event => console.dir(event))
client.on('connectionCheckedOut', event => console.dir(event))
client.on('connectionCheckedIn', event => console.dir(event))
client.on('connectionPoolCleared', event => console.dir(event))

// topology monitoring
client.on('serverDescriptionChanged', event => console.dir(event))
client.on('serverHeartbeatStarted', event => console.dir(event))
client.on('serverHeartbeatSucceeded', event => console.dir(event))
client.on('serverHeartbeatFailed', event => console.dir(event))
client.on('serverOpening', event => console.dir(event))
client.on('serverClosed', event => console.dir(event))
client.on('topologyOpening', event => console.dir(event))
client.on('topologyClosed', event => console.dir(event))
client.on('topologyDescriptionChanged', event => console.dir(event)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:14:19.740

和对象都支持 logger 选项，这是一个具有[`Db()`](http://mongodb.github.com/node-mongodb-native/api-generated/db.html),和功能的对象。该选项目前似乎没有记录，但在[0.9.6-20 2011-10-04 更改日志条目](http://mongodb.github.com/node-mongodb-native/changelog/changelog.html)中提到。[`Server()`](http://mongodb.github.com/node-mongodb-native/api-generated/server.html)`log``error``debug``Db()`

我不确定此界面是否支持您需要的所有信息，但这绝对是一个很好的起点。驱动程序团队也可能会欢迎添加此类功能的拉取请求。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-04-01T12:03:03.127

您可以使用节点的驱动程序`Logger`类：

```
import { Logger } from "mongodriver"; 
```

稍后在您的代码中：

```
Logger.setLevel("debug"); 
```

您可以[在官方驱动程序 API 文档中查看文档](https://mongodb.github.io/node-mongodb-native/3.5/api/Logger.html)

# facebook - 如何通过应用程序不断获取提及页面的帖子

> ID：12692341
> 
> 赞同：2
> 
> 时间：2012-10-02T14:32:03.823
> 
> 标签：facebook, authentication, facebook-page

我需要不断地对某个群组中人们发布的提及特定 Facebook 页面的所有帖子进行投票。我有一个用户对该页面具有管理员权限，但目前不是我需要投票的那群人的朋友。我需要通过我的 Facebook 应用程序进行身份验证，而不需要人们不断输入密码。我的理解是，如果不与整个群体成为朋友，就没有办法做到这一点。真的吗？

甚至可以通过与整个群体成为朋友来做到这一点（假设该群体让我的用户看到他们的帖子）？该组是否需要在任何时候对我的应用程序进行身份验证？我的应用需要什么权限？

# bit-manipulation - 位从 0 变为 1 的概率

> ID：12692342
> 
> 赞同：0
> 
> 时间：2012-10-02T14:32:05.423
> 
> 标签：bit-manipulation, probability

好的，所以我对此有点迷茫。因此，查看 this 0 0 0 0 并分别查看每个 0 和每个 0 从 0 变为 1 的概率为 0.01 好的，所以有 4 个数字，每个数字可以是 0 或 1

概率是通过确定事件发生的可能性除以可能结果的数量来衡量的

可能的结果是：

> 0000 0001 0010 0100 1000 1100 1001 1010 0101 0011 0110 1110 0111 1011 1101 1111

因此，总共有 16 个可能的结果或 4^2 即 4 个可能的结果，它们可以是 0 或 1

所以数字串从 0000 变成 1111 的概率是 0.01/16

数字从 0000 到 0100 的概率也是 0.01/16？

所有数字保持不变的概率，即 0000 到 0000 仍然是 0.01/16

这有点道理，但我不知道所有这些都是相同的概率吗？

还是我做错了，所以每个数字都有 0.01 的机会改变，所以从 0000 到 1111 的字符串将是 0.01 *4 / 16 或 0.0025

从 0000 变为 0100 的机会是 0.01 * 1 /16

并且从 0000 更改为 0000 将是 0.01*0 /16

感谢您对此的任何帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:49:20.243

这里有两件事。一，可能结果的数量（16）和每个结果的概率。

由于单个位被翻转为 1 的概率偏向于 0，因此结果概率的分布不均匀。如果每个点出现 1 或 0 的概率为 50%，则 16 个结果中的每一个的概率为`1/16`。这里情况不同。

我采取的方法是将数字分组到桶中。在 16 个结果中，1 个有 0 个 1，4 个有 1 个 1，6 个有 2 个 1，4 个有 3 个 1，1 个有 4 个 1。

四个 0 的概率是`99%^4`。一个 1 的概率是`1% x 99%^3`。2 的概率是`1%^2 x 99%^2`。等等。计算每个概率~~，然后除以桶的大小~~。将它们加起来，它们应该等于 100%（健全性检查）。

我在电子表格中检查了它，结果看起来不错：

```
Outcome Probability
0000    0.96059601
0001    0.00970299
0010    0.00970299
0100    0.00970299
1000    0.00970299
0011    0.00009801
0101    0.00009801
1001    0.00009801
0110    0.00009801
1010    0.00009801
1100    0.00009801
0111    0.00000099
1011    0.00000099
1101    0.00000099
1110    0.00000099
1111    0.00000001 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:44:21.873

您声明零变为 1 的概率是 0.01（我推断然后 0.99 没有变化）

总概率是单个概率的乘积：

让我们做一个简单的案例：

**0000 至 1111**

(.01) * (.01) * (.01) * (.01) = (.01)^4 = .00000001

**0000 至 0100**

(.99) * (.01) * (.99) * (.99) = (.99)^3 * (.01) = .00970299

所以他们没有相同的概率

# android - Android 上下文菜单项出现两次 (BUG)

> ID：12692347
> 
> 赞同：1
> 
> 时间：2012-10-02T14:32:32.303
> 
> 标签：android, contextmenu

我正在以与我一直这样做相同的方式编写代码并且看不到我错在哪里：

```
@Override
public void onCreate(){
   ...
   this.registerForContextMenu(lv);

@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
   super.onCreateContextMenu(menu, v, menuInfo);
   MenuInflater inflater = getMenuInflater();
   inflater.inflate(R.menu.context_menu_device_item_remove, menu);
}

<?xml version="1.0" encoding="utf-8"?>
<menu xmlns:android="http://schemas.android.com/apk/res/android" >
     <item android:id="@+id/context_menu_item_remove_id"
           android:title="Remove" />
     <item android:id="@+id/context_menu_item_clear_all_id"
           android:title="Clear all" />
</menu> 
```

如您所见..效果是：

![在此处输入图像描述](../Images/2d3aa10229749aac519b19fad92b309a.png)

由于使用了 AdapterContextMenuInfo.position，应用程序在单击第三个或第四个元素时崩溃：

```
@Override
public boolean onContextItemSelected(MenuItem item) {
     AdapterContextMenuInfo info = (AdapterContextMenuInfo) item.getMenuInfo();
     System.out.println("## info.position: "+info.position);
... 
```

**你有没有遇到过这种情况？& 你是如何逃脱的？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T10:00:55.127

显然 BUG 是由于有 2 个电话`this.registerForContextMenu(lv);`（晚餐班的第一个）.. 所以是的，我的错。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T14:57:39.100

试试下面的代码：

```
 public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {

    menu.add(0, MENU_ITEM_SEND_MSG, 0, "Send a Message");
    menu.add(0, MENU_ITEM_MAKE_A_CALL, 0, "Make a Call");

}

     public boolean onContextItemSelected(MenuItem item) {

    SharedPreferences server_sp = getApplicationContext()
            .getSharedPreferences("server", MODE_PRIVATE);
    String server = server_sp.getString("Server", "server");

    switch (item.getItemId()) {
    case MENU_ITEM_SEND_MSG:
           //do ur stuff

    case MENU_ITEM_MAKE_A_CALL:

        //do ur stufff
        break;
    }
    return false;
} 
```

# android - Android 应用程序在模拟器上崩溃 - logCat 显示没有错误

> ID：12692348
> 
> 赞同：0
> 
> 时间：2012-10-02T14:32:33.433
> 
> 标签：android, eclipse, logcat

我刚刚将 SherlockActionBar 库添加到我的 android 项目中。经过一些小改动（FragmentActivity -> SherlockFragmentActivity, getActionBar() -> getSupportActionBar(), 导入）它都编译得很好。然而，在我运行应用程序后，调试器停止了，就好像遇到了异常一样。但是，LogCat 输出中没有显示错误。我只是无法理解正在发生的事情。

这是我终止应用程序后的 logCat 输出。

```
10-02 14:11:19.227: I/SystemUpdateService(174): UpdateTask at time 1349187079227
10-02 14:11:19.237: I/ActivityThread(328): Pub com.android.email.attachmentprovider: com.android.email.provider.AttachmentProvider
10-02 14:11:19.687: I/dalvikvm(81): Jit: resizing JitTable from 512 to 1024
10-02 14:11:19.809: D/MediaScannerService(150): start scanning volume internal: [/system/media]
10-02 14:11:20.047: V/AlarmClock(239): AlarmInitReceiver finished
10-02 14:11:20.087: I/ActivityManager(81): Start proc com.android.quicksearchbox for broadcast com.android.quicksearchbox/.SearchWidgetProvider: pid=346 uid=10012 gids={3003}
10-02 14:11:20.127: D/ExchangeService(320): !!! EAS ExchangeService, onStartCommand, startingUp = false, running = false
10-02 14:11:20.427: I/ActivityThread(346): Pub com.android.quicksearchbox.google: com.android.quicksearchbox.google.GoogleSuggestionProvider
10-02 14:11:20.497: I/ActivityThread(346): Pub com.android.quicksearchbox.shortcuts: com.android.quicksearchbox.ShortcutsProvider
10-02 14:11:20.657: I/ActivityManager(81): Start proc com.android.music for broadcast com.android.music/.MediaAppWidgetProvider: pid=358 uid=10028 gids={3003, 1015}
10-02 14:11:20.927: D/ExchangeService(320): !!! EAS ExchangeService, onCreate
10-02 14:11:20.967: D/dalvikvm(260): GC_CONCURRENT freed 213K, 6% free 6409K/6791K, paused 5ms+101ms
10-02 14:11:21.077: D/ExchangeService(320): !!! EAS ExchangeService, onStartCommand, startingUp = true, running = false
10-02 14:11:21.567: D/GTalkService(174): [ReonnectMgr] ### report Inet condition: status=false, networkType=0
10-02 14:11:21.587: D/ConnectivityService(81): reportNetworkCondition(0, 0)
10-02 14:11:21.597: D/ConnectivityService(81): Inet connectivity change, net=0, condition=0,mActiveDefaultNetwork=0
10-02 14:11:21.597: D/ConnectivityService(81): starting a change hold
10-02 14:11:21.697: D/GTalkService(174): [RawStanzaProvidersMgr] ##### searchProvidersFromIntent
10-02 14:11:21.697: D/GTalkService(174): [RawStanzaProvidersMgr] no intent receivers found
10-02 14:11:21.847: I/SystemUpdateService(174): cancelUpdate (empty URL)
10-02 14:11:21.847: E/TelephonyManager(174): Hidden constructor called more than once per process!
10-02 14:11:21.867: D/dalvikvm(174): GC_CONCURRENT freed 337K, 7% free 6561K/7047K, paused 5ms+4ms
10-02 14:11:21.917: D/GTalkService(174): [ReonnectMgr] ### report Inet condition: status=false, networkType=0
10-02 14:11:21.917: D/ConnectivityService(81): reportNetworkCondition(0, 0)
10-02 14:11:21.917: D/ConnectivityService(81): Inet connectivity change, net=0, condition=0,mActiveDefaultNetwork=0
10-02 14:11:21.917: D/ConnectivityService(81): currently in hold - not setting new end evt
10-02 14:11:21.990: E/TelephonyManager(174): Original: com.google.android.location, new: com.google.android.gsf
10-02 14:11:22.027: I/SystemUpdateService(174): removeAllDownloads (cancelUpdate)
10-02 14:11:22.127: D/dalvikvm(328): GC_CONCURRENT freed 205K, 6% free 6506K/6855K, paused 660ms+3ms
10-02 14:11:22.197: D/Eas Debug(320): Logging: 
10-02 14:11:22.319: D/dalvikvm(81): GREF has increased to 401
10-02 14:11:22.947: D/ExchangeService(320): !!! EAS ExchangeService, onStartCommand, startingUp = true, running = false
10-02 14:11:23.130: D/Eas Debug(320): Logging: 
10-02 14:11:23.307: I//system/bin/fsck_msdos(29): Attempting to allocate 2044 KB for FAT
10-02 14:11:23.560: I/ActivityManager(81): Starting: Intent { flg=0x10000000 cmp=com.google.android.gsf/.update.SystemUpdateInstallDialog } from pid 174
10-02 14:11:23.587: I/ActivityManager(81): Starting: Intent { flg=0x10000000 cmp=com.google.android.gsf/.update.SystemUpdateDownloadDialog } from pid 174
10-02 14:11:24.087: W/ActivityManager(81): Activity pause timeout for ActivityRecord{407c7320 com.android.launcher/com.android.launcher2.Launcher}
10-02 14:11:24.237: E/TelephonyManager(174): Hidden constructor called more than once per process!
10-02 14:11:24.237: E/TelephonyManager(174): Original: com.google.android.location, new: com.google.android.gsf
10-02 14:11:24.507: D/dalvikvm(174): GC_EXPLICIT freed 231K, 7% free 6596K/7047K, paused 4ms+6ms
10-02 14:11:24.607: D/ConnectivityService(81): Inet hold end, net=0, condition =0, published condition =0
10-02 14:11:24.607: D/ConnectivityService(81): no change in condition - aborting
10-02 14:11:24.707: D/dalvikvm(174): GC_EXPLICIT freed 17K, 7% free 6579K/7047K, paused 4ms+4ms
10-02 14:11:24.947: I//system/bin/fsck_msdos(29): ** Phase 2 - Check Cluster Chains
10-02 14:11:25.117: I//system/bin/fsck_msdos(29): ** Phase 3 - Checking Directories
10-02 14:11:25.128: I//system/bin/fsck_msdos(29): ** Phase 4 - Checking for Lost Files
10-02 14:11:25.167: I//system/bin/fsck_msdos(29): 12 files, 1044448 free (522224 clusters)
10-02 14:11:25.227: I/Vold(29): Filesystem check completed OK
10-02 14:11:25.227: I/Vold(29): Device /dev/block/vold/179:0, target /mnt/sdcard mounted @ /mnt/secure/staging
10-02 14:11:25.237: D/Vold(29): Volume sdcard state changing 3 (Checking) -> 4 (Mounted)
10-02 14:11:25.257: I/PackageManager(81): Updating external media status from unmounted to mounted
10-02 14:11:25.457: D/dalvikvm(303): GC_EXPLICIT freed 35K, 6% free 6242K/6595K, paused 3ms+312ms
10-02 14:11:25.987: D/ExchangeService(320): !!! EAS ExchangeService, onStartCommand, startingUp = true, running = false
10-02 14:11:26.157: D/MediaScanner(150):  prescan time: 2905ms
10-02 14:11:26.167: D/MediaScanner(150):     scan time: 148ms
10-02 14:11:26.167: D/MediaScanner(150): postscan time: 2ms
10-02 14:11:26.167: D/MediaScanner(150):    total time: 3055ms
10-02 14:11:26.197: D/MediaScannerService(150): done scanning volume internal
10-02 14:11:26.237: D/MediaScannerService(150): start scanning volume external: [/mnt/sdcard]
10-02 14:11:26.497: D/dalvikvm(143): GC_EXPLICIT freed 234K, 8% free 7735K/8327K, paused 3ms+5ms
10-02 14:11:27.180: D/dalvikvm(143): GC_CONCURRENT freed 150K, 4% free 8004K/8327K, paused 7ms+3ms
10-02 14:11:27.397: D/dalvikvm(143): GC_FOR_ALLOC freed 96K, 6% free 8310K/8775K, paused 76ms
10-02 14:11:27.580: D/dalvikvm(143): GC_FOR_ALLOC freed 515K, 11% free 8135K/9095K, paused 79ms
10-02 14:11:27.829: D/dalvikvm(143): GC_CONCURRENT freed 3K, 5% free 8694K/9095K, paused 7ms+6ms
10-02 14:11:28.137: V/TLINE(143): new: android.text.TextLine@4065b280
10-02 14:11:28.527: D/dalvikvm(143): GC_CONCURRENT freed 729K, 10% free 8764K/9671K, paused 5ms+13ms
10-02 14:11:28.677: D/dalvikvm(143): GC_FOR_ALLOC freed 152K, 11% free 8683K/9671K, paused 99ms
10-02 14:11:28.717: I/dalvikvm-heap(143): Grow heap (frag case) to 11.434MB for 2975968-byte allocation
10-02 14:11:28.807: D/dalvikvm(143): GC_FOR_ALLOC freed 0K, 9% free 11589K/12615K, paused 84ms
10-02 14:11:29.159: D/dalvikvm(143): GC_CONCURRENT freed 197K, 7% free 12195K/12999K, paused 8ms+6ms
10-02 14:11:29.647: D/dalvikvm(143): GC_EXPLICIT freed 351K, 6% free 12790K/13511K, paused 8ms+17ms
10-02 14:11:29.717: I/SurfaceFlinger(32): Boot is finished (70768 ms)
10-02 14:11:29.877: I/ARMAssembler(32): generated scanline__00000177:03010104_00000002_00000000 [ 44 ipp] (66 ins) at [0x407c7290:0x407c7398] in 990662 ns
10-02 14:11:29.907: I/ARMAssembler(32): generated scanline__00000177:03515104_00000001_00000000 [ 73 ipp] (95 ins) at [0x407c73a0:0x407c751c] in 989381 ns
10-02 14:11:30.287: D/dalvikvm(174): GC_EXPLICIT freed 25K, 8% free 6554K/7047K, paused 4ms+32ms
10-02 14:11:30.380: D/dalvikvm(143): GC_EXPLICIT freed 349K, 6% free 13124K/13895K, paused 5ms+25ms
10-02 14:11:30.957: D/dalvikvm(143): GC_FOR_ALLOC freed 1069K, 10% free 13860K/15239K, paused 81ms
10-02 14:11:32.177: D/dalvikvm(150): GC_CONCURRENT freed 183K, 6% free 6438K/6791K, paused 5ms+4ms
10-02 14:11:32.187: W/ActivityManager(81): No content provider found for: 
10-02 14:11:32.607: V/MediaScanner(150): pruneDeadThumbnailFiles... android.database.sqlite.SQLiteCursor@406724a8
10-02 14:11:32.617: V/MediaScanner(150): /pruneDeadThumbnailFiles... android.database.sqlite.SQLiteCursor@406724a8
10-02 14:11:32.640: W/ActivityManager(81): No content provider found for: 
10-02 14:11:32.640: D/VoldCmdListener(29): asec list
10-02 14:11:32.647: I/PackageManager(81): No secure containers on sdcard
10-02 14:11:32.667: D/MediaScanner(150):  prescan time: 107ms
10-02 14:11:32.667: D/MediaScanner(150):     scan time: 89ms
10-02 14:11:32.667: D/MediaScanner(150): postscan time: 61ms
10-02 14:11:32.667: D/MediaScanner(150):    total time: 257ms
10-02 14:11:32.697: W/PackageManager(81): Unknown permission android.permission.ADD_SYSTEM_SERVICE in package com.android.phone
10-02 14:11:32.707: W/PackageManager(81): Unknown permission com.android.smspush.WAPPUSH_MANAGER_BIND in package com.android.phone
10-02 14:11:32.737: W/PackageManager(81): Not granting permission android.permission.SEND_DOWNLOAD_COMPLETED_INTENTS to package com.android.browser (protectionLevel=2 flags=0x9be45)
10-02 14:11:32.737: W/PackageManager(81): Not granting permission android.permission.BIND_APPWIDGET to package com.android.widgetpreview (protectionLevel=3 flags=0x28be44)
10-02 14:11:32.767: W/PackageManager(81): Unknown permission android.permission.READ_OWNER_DATA in package com.android.exchange
10-02 14:11:32.778: W/PackageManager(81): Unknown permission android.permission.READ_OWNER_DATA in package com.android.email
10-02 14:11:32.788: W/PackageManager(81): Unknown permission com.android.providers.im.permission.READ_ONLY in package com.google.android.apps.maps
10-02 14:11:32.797: W/PackageManager(81): Not granting permission android.permission.DEVICE_POWER to package com.android.deskclock (protectionLevel=2 flags=0x8be45)
10-02 14:11:33.137: D/MediaScannerService(150): done scanning volume external
10-02 14:11:33.197: D/PackageParser(81): Scanning package: /data/app/vmdl257911298.tmp
10-02 14:11:33.837: I/InputReader(81): Device reconfigured: id=0, name='qwerty2', surface size is now 1024x800
10-02 14:11:34.097: D/dalvikvm(81): GC_CONCURRENT freed 12185K, 47% free 13966K/26311K, paused 8ms+23ms
10-02 14:11:36.798: I/TabletStatusBar(124): DISABLE_CLOCK: no
10-02 14:11:36.798: I/TabletStatusBar(124): DISABLE_NAVIGATION: no
10-02 14:11:37.348: I/ARMAssembler(32): generated scanline__00000177:03515104_00001001_00000000 [ 91 ipp] (114 ins) at [0x407c7520:0x407c76e8] in 919320 ns
10-02 14:11:37.598: I/TabletStatusBar(124): DISABLE_BACK: no
10-02 14:11:37.710: I/ActivityManager(81): Displayed com.android.launcher/com.android.launcher2.Launcher: +46s212ms
10-02 14:11:38.817: D/dalvikvm(143): GC_CONCURRENT freed 969K, 8% free 14867K/16007K, paused 4ms+10ms
10-02 14:11:39.437: I/dalvikvm(81): Jit: resizing JitTable from 1024 to 2048
10-02 14:11:40.267: D/dalvikvm(143): GC_FOR_ALLOC freed 2357K, 16% free 14395K/17031K, paused 80ms
10-02 14:11:40.717: D/dalvikvm(143): GC_EXPLICIT freed 742K, 16% free 14358K/17031K, paused 8ms+4ms
10-02 14:11:41.617: D/dalvikvm(81): GC_CONCURRENT freed 1955K, 48% free 13869K/26311K, paused 9ms+10ms
10-02 14:11:42.559: D/dalvikvm(81): GC_CONCURRENT freed 1830K, 48% free 13881K/26311K, paused 9ms+9ms
10-02 14:11:42.758: I/PackageManager(81): Removing non-system package:cz.trilimi.sfaui
10-02 14:11:42.758: I/ActivityManager(81): Force stopping package cz.trilimi.sfaui uid=10036
10-02 14:11:42.967: D/PackageManager(81): Scanning package cz.trilimi.sfaui
10-02 14:11:42.967: I/PackageManager(81): Package cz.trilimi.sfaui codePath changed from /data/app/cz.trilimi.sfaui-1.apk to /data/app/cz.trilimi.sfaui-2.apk; Retaining data and using new
10-02 14:11:42.967: I/PackageManager(81): Unpacking native libraries for /data/app/cz.trilimi.sfaui-2.apk
10-02 14:11:43.097: D/installd(35): DexInv: --- BEGIN '/data/app/cz.trilimi.sfaui-2.apk' ---
10-02 14:11:45.317: D/dalvikvm(391): DexOpt: load 434ms, verify+opt 1260ms
10-02 14:11:45.407: D/installd(35): DexInv: --- END '/data/app/cz.trilimi.sfaui-2.apk' (success) ---
10-02 14:11:45.407: W/PackageManager(81): Code path for pkg : cz.trilimi.sfaui changing from /data/app/cz.trilimi.sfaui-1.apk to /data/app/cz.trilimi.sfaui-2.apk
10-02 14:11:45.407: W/PackageManager(81): Resource path for pkg : cz.trilimi.sfaui changing from /data/app/cz.trilimi.sfaui-1.apk to /data/app/cz.trilimi.sfaui-2.apk
10-02 14:11:45.407: D/PackageManager(81):   Activities: cz.trilimi.sfaui.ItemListActivity cz.trilimi.sfaui.ItemDetailActivity
10-02 14:11:45.427: I/ActivityManager(81): Force stopping package cz.trilimi.sfaui uid=10036
10-02 14:11:45.657: I/installd(35): move /data/dalvik-cache/data@app@cz.trilimi.sfaui-2.apk@classes.dex -> /data/dalvik-cache/data@app@cz.trilimi.sfaui-2.apk@classes.dex
10-02 14:11:45.657: D/PackageManager(81): New package installed in /data/app/cz.trilimi.sfaui-2.apk
10-02 14:11:45.997: I/ActivityManager(81): Force stopping package cz.trilimi.sfaui uid=10036
10-02 14:11:46.147: D/dalvikvm(143): GC_EXPLICIT freed 3K, 16% free 14356K/17031K, paused 10ms+9ms
10-02 14:11:46.237: D/PackageManager(81): generateServicesMap(android.accounts.AccountAuthenticator): 3 services unchanged
10-02 14:11:46.277: D/PackageManager(81): generateServicesMap(android.content.SyncAdapter): 5 services unchanged
10-02 14:11:46.337: D/PackageManager(81): generateServicesMap(android.accounts.AccountAuthenticator): 3 services unchanged
10-02 14:11:46.347: D/PackageManager(81): generateServicesMap(android.content.SyncAdapter): 5 services unchanged
10-02 14:11:46.437: D/dalvikvm(208): GC_EXPLICIT freed 258K, 7% free 6488K/6919K, paused 3ms+5ms
10-02 14:11:46.477: W/RecognitionManagerService(81): no available voice recognition services found
10-02 14:11:46.897: I/ActivityManager(81): Start proc com.svox.pico for broadcast com.svox.pico/.VoiceDataInstallerReceiver: pid=398 uid=10006 gids={}
10-02 14:11:47.087: I/ActivityThread(398): Pub com.svox.pico.providers.SettingsProvider: com.svox.pico.providers.SettingsProvider
10-02 14:11:47.138: D/GTalkService(174): [GTalkService.1] handlePackageInstalled: re-initialize providers
10-02 14:11:47.147: D/GTalkService(174): [RawStanzaProvidersMgr] ##### searchProvidersFromIntent
10-02 14:11:47.147: D/GTalkService(174): [RawStanzaProvidersMgr] no intent receivers found
10-02 14:11:47.718: I/AccountTypeManager(208): Loaded meta-data for 1 account types, 0 accounts in 186ms
10-02 14:11:48.377: D/dalvikvm(143): GC_CONCURRENT freed 1865K, 15% free 14513K/17031K, paused 7ms+4ms
10-02 14:11:48.917: D/dalvikvm(208): GC_CONCURRENT freed 219K, 6% free 6788K/7175K, paused 7ms+73ms
10-02 14:11:49.207: D/dalvikvm(143): GC_FOR_ALLOC freed 4558K, 31% free 11866K/17031K, paused 89ms
10-02 14:11:49.587: D/dalvikvm(143): GC_CONCURRENT freed 713K, 24% free 13010K/17031K, paused 5ms+4ms
10-02 14:11:49.967: D/dalvikvm(143): GC_CONCURRENT freed 1046K, 19% free 13922K/17031K, paused 5ms+4ms
10-02 14:11:50.437: D/dalvikvm(81): GC_EXPLICIT freed 898K, 47% free 13955K/26311K, paused 6ms+39ms
10-02 14:11:50.467: I/installd(35): unlink /data/dalvik-cache/data@app@cz.trilimi.sfaui-1.apk@classes.dex
10-02 14:11:50.477: D/AndroidRuntime(227): Shutting down VM
10-02 14:11:50.507: D/dalvikvm(227): GC_CONCURRENT freed 97K, 84% free 331K/2048K, paused 1ms+2ms
10-02 14:11:50.507: I/AndroidRuntime(227): NOTE: attach of thread 'Binder Thread #3' failed
10-02 14:11:50.517: D/jdwp(227): adbd disconnected
10-02 14:11:51.177: D/AndroidRuntime(410): >>>>>> AndroidRuntime START com.android.internal.os.RuntimeInit <<<<<<
10-02 14:11:51.177: D/AndroidRuntime(410): CheckJNI is ON
10-02 14:11:51.897: D/AndroidRuntime(410): Calling main entry com.android.commands.am.Am
10-02 14:11:51.937: I/ActivityManager(81): Force stopping package cz.trilimi.sfaui uid=10036
10-02 14:11:51.937: I/ActivityManager(81): Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10000000 cmp=cz.trilimi.sfaui/.ItemListActivity } from pid 410
10-02 14:11:51.968: W/WindowManager(81): Failure taking screenshot for (230x179) to layer 21005
10-02 14:11:51.997: I/ActivityManager(81): Start proc cz.trilimi.sfaui for activity cz.trilimi.sfaui/.ItemListActivity: pid=418 uid=10036 gids={}
10-02 14:11:52.007: D/AndroidRuntime(410): Shutting down VM
10-02 14:11:52.057: I/AndroidRuntime(410): NOTE: attach of thread 'Binder Thread #3' failed
10-02 14:11:52.097: D/dalvikvm(410): GC_CONCURRENT freed 98K, 83% free 360K/2048K, paused 1ms+0ms
10-02 14:11:52.097: D/jdwp(410): adbd disconnected
10-02 14:11:53.147: W/ActivityThread(418): Application cz.trilimi.sfaui is waiting for the debugger on port 8100...
10-02 14:11:53.207: I/System.out(418): Sending WAIT chunk
10-02 14:11:53.217: I/dalvikvm(418): Debugger is active
10-02 14:11:53.447: I/System.out(418): Debugger has connected
10-02 14:11:53.457: I/System.out(418): waiting for debugger to settle...
10-02 14:11:53.637: I/ARMAssembler(32): generated scanline__00000177:03515104_00001002_00000000 [ 87 ipp] (110 ins) at [0x407c76f0:0x407c78a8] in 598498 ns
10-02 14:11:53.660: I/System.out(418): waiting for debugger to settle...
10-02 14:11:53.857: I/System.out(418): waiting for debugger to settle...
10-02 14:11:54.057: I/System.out(418): waiting for debugger to settle...
10-02 14:11:54.257: I/System.out(418): waiting for debugger to settle...
10-02 14:11:54.317: V/TLINE(81): new: android.text.TextLine@4155dde8
10-02 14:11:54.467: I/System.out(418): waiting for debugger to settle...
10-02 14:11:54.667: I/System.out(418): waiting for debugger to settle...
10-02 14:11:54.870: I/System.out(418): waiting for debugger to settle...
10-02 14:11:55.027: D/dalvikvm(143): GC_EXPLICIT freed 900K, 16% free 14420K/17031K, paused 7ms+4ms
10-02 14:11:55.067: I/System.out(418): waiting for debugger to settle...
10-02 14:11:55.292: I/System.out(418): debugger has settled (1315)
10-02 14:12:02.008: W/ActivityManager(81): Launch timeout has expired, giving up wake lock!
10-02 14:12:02.971: W/ActivityManager(81): Activity idle timeout for ActivityRecord{4078c6b0 cz.trilimi.sfaui/.ItemListActivity}
10-02 14:12:08.359: D/ExchangeService(320): Received deviceId from Email app: androidc259148960
10-02 14:12:08.507: D/ExchangeService(320): Reconciling accounts...
10-02 14:16:11.437: D/SntpClient(81): request time failed: java.net.SocketException: Address family not supported by protocol
10-02 14:17:21.573: W/jdwp(418): Debugger is telling the VM to exit with code=1
10-02 14:17:21.573: I/dalvikvm(418): GC lifetime allocation: 8642 bytes
10-02 14:17:21.637: D/Zygote(33): Process 418 exited cleanly (1)
10-02 14:17:21.651: I/ActivityManager(81): Process cz.trilimi.sfaui (pid 418) has died.
10-02 14:17:21.847: D/dalvikvm(143): GC_EXPLICIT freed <1K, 16% free 14420K/17031K, paused 7ms+7ms
10-02 14:17:21.917: W/InputManagerService(81): Window already focused, ignoring focus gain of: com.android.internal.view.IInputMethodClient$Stub$Proxy@40bfbf28 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:36:04.450

我以某种方式设法修复它，我不确切知道是什么修复了它。要么重新启动 Eclipse 和模拟器以及 LogCat，要么重置调试配置，甚至可能是其他东西。

LogCat 然后显示错误：缺少 Sherlock.theme

所以这可能是崩溃的实际原因（但也可能不是）。

# xtk - 我不能更改我的不透明度的名称。它的变化。它的变化？

> ID：12692350
> 
> 赞同：0
> 
> 时间：2012-10-02T14:32:38.940
> 
> 标签：xtk

有人知道如何将菜单不透明度的名称更改为我在 Slice 中选择的名称吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T23:19:11.273

这可以通过 dat.gui 的 .name 函数来完成。

```
gui.add(volume, 'opacity').name('Transparency'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:48:36.430

这是一个 dat.gui 问题，与 XTK 没有真正的关系。基本上你必须创建一个包装对象：

```
var settings = {

  transparency: 1.0

} 
```

`transparency`将是你的新名字。

然后，您使用设置对象定义控制器

```
var opacityController = lhgui.add(settings, 'transparency', 0, 1); 
```

并在回调中，调整 XTK 不透明度值：

```
opacityController.onChange(function() {

  mesh.opacity = settings.transparency;

}); 
```

# php - php 会话有时在传递到另一个域后不可用

> ID：12692353
> 
> 赞同：0
> 
> 时间：2012-10-02T14:32:42.880
> 
> 标签：php, session, ssl

我运行一个可以通过不同域访问的网站：domainname.de、domainname.ch、domainname.at、domainname.es 等。

当我的客户想要付款时，我们会进入一个付款页面，该页面当然是 https 安全的。由于服务器限制，我只允许拥有一个 SSL 证书，我只将它放在一个域上：domainname-secure.com。

因为我收取不同的价格，所以我需要知道用户属于哪个域，所以当重定向到 domainname-secure.com 时，我将域（例如 domainname.de）保存在会话变量中`$_SESSION['domain_default']`，并通过添加`session_id=[session_id]`为 get 参数来传递 sessionID。

然后，我检查`$_GET['session_id']`并运行以下命令以使会话在 domainname-secure.com 上可用：

```
session_id($_GET['session_id']);

session_start(); 
```

当我自己测试它时，它工作得很好，但是当有人访问 domainname-secure.com 并且没有设置时，我会创建一个日志条目`$_SESSION['domain_default']`。

这一天发生几次，但我真的不知道为什么这不起作用！我从许多不同的链接一次又一次地测试它，但对我来说它工作得很好。

你们中的一些人能想象为什么它有时不起作用吗？

将会话 ID 传递给另一个域是不是“好”或不安全，并且在重定向后它并不总是可读的？

我知道你很难确定一个错误，但我正在寻找一些与会话有关的已知问题，或者可能是如何以更好的方式做到这一点的提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:36:52.800

会话由 PHP 基于*每个域进行*管理，这意味着它们不会故意混合域。

如果您将使用另一种会话存储机制，例如写入数据库或使用 memcached 会话，您将能够克服此限制。

如果您希望在更改域时能够访问会话信息，有两种方法：

*   不要使用 PHP 的 $_SESSION，使用 memcached/redis/sql 设置自己的会话管理；

或者：

*   使用 PHP 的 $_SESSION，但是当从一个域传输到另一个域时，将 $_SESSION 中的数据序列化，并将其放在两个域都可以访问的地方，例如 sql；

# windows-8 - 如何在适用于 Windows 8 的 Visual Studio Express 2012 RC 中使用 DOM Explorer

> ID：12692357
> 
> 赞同：5
> 
> 时间：2012-10-02T14:32:58.597
> 
> 标签：windows-8, visual-studio-2012

有没有人能够使用 DOM Explorer 来调试他们的 Win 8 应用程序？

如下所述调试时我没有看到 DOM Explorer 选项卡：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh696632.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh696632.aspx)

![在此处输入图像描述](../Images/f132852507bcb78e0218c2fcde35d3ea.png)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T15:05:57.433

使用 Debug > Windows > DOM Explorer 菜单命令显示 DOM Explorer 选项卡。

![显示 DOM 资源管理器](../Images/3d4ee6e3899775cdb9da24a994e10ae8.png)

# maven - 如何为在 maven 下运行的分叉 grails 设置 http 端口？

> ID：12692363
> 
> 赞同：3
> 
> 时间：2012-10-02T14:33:22.847
> 
> 标签：maven, grails-2.0

如何从命令行为在 maven 下运行的 grails (2.1.0) 项目设置 http 端口？Grails 正在分叉。

我试过了：

```
mvn grails:run-app -Dserver.port=8081 -Dgrails.server.port.http=8081 
```

但没有运气。它仍然在端口 8080 上运行。

我没有在其他任何地方指定端口属性。

pom片段：

```
<plugin>
    <groupId>org.grails</groupId>
    <artifactId>grails-maven-plugin</artifactId>
    <version>2.1.0</version>
    <configuration>
        <fork>true</fork>
    </configuration>
    <extensions>true</extensions>
</plugin> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-13T07:32:32.377

就像 Niels 所说，如果您要分叉 Grails 进程（默认情况下为 true），您可以将 forkedVmArgs 添加到 pom 中：

```
<plugin>
  <groupId>org.grails</groupId>
  <artifactId>grails-maven-plugin</artifactId>
  <version>${grails.version}</version>
  <configuration>
    <!-- Whether for Fork a JVM to run Grails commands -->
    <fork>true</fork>
    <forkedVmArgs>
      <forkedVmArg>-Dserver.port=9003</forkedVmArg>
    </forkedVmArgs>
  </configuration>
  <extensions>true</extensions>
</plugin> 
```

见[http://jira.grails.org/browse/MAVEN-177](http://jira.grails.org/browse/MAVEN-177)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-21T00:13:40.793

```
mvn grails:exec -Dcommand=run-app -Dserver.port=8081 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T13:49:50.457

由于您使用 fork 选项，因此它会在执行时生成一个新的 shell，它可能不会继承您的参数。

尽量不要分叉，看看是否有帮助。

或者，您显然可以使用以下方法向插件添加一些 fork 参数：

```
<forkedVmArgs>
  ...
</forkedVmArgs> 
```

# single-sign-on - 在没有登录屏幕的情况下使用 CAS version3.5

> ID：12692373
> 
> 赞同：0
> 
> 时间：2012-10-02T14:34:16.420
> 
> 标签：single-sign-on, jasig

这是一个旧版本：[https ://wiki.jasig.org/display/CAS/Using+CAS+without+the+Login+Screen](https://wiki.jasig.org/display/CAS/Using+CAS+without+the+Login+Screen)

我需要对最新版本的 CAS 即 3.5 做同样的事情。谁能给我同样的步骤

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-14T10:09:28.113

我们现在基本上正在做你在我公司的要求。我们有一个 Sharepoint 网站，它在后台使用 RESTful 服务进行真正的登录。[我在我的博客](http://hons82.blogspot.it/2012/07/cas-restlet-access.html)中写了一些关于它们的文章，最近我们用它来从一个包含示例程序链接[的 iOS 应用程序中获取访问权限。](http://hons82.blogspot.it/2013/01/cas-login-from-ios.html)

重要的！！！我们对 CAS 进行了修改，可以将其用于多个域。因此，无论您在我的示例中找到对“域”的引用，只需将其删除，因为它不适用于标准 CAS

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-12T23:39:31.937

[这](https://wiki.jasig.org/display/CASUM/RESTful+API)是一个很好的解决您的问题的方法。

只需启用宁静访问。

# java - 使用 StringTokenizer 计数频率

> ID：12692375
> 
> 赞同：-1
> 
> 时间：2012-10-02T14:34:33.613
> 
> 标签：java, string, stringtokenizer

如果数字用 分隔，我如何`StringTokenizer`计算数字在 a 中出现的次数？必须通过命令行输入。`String``"_"``String`

例如，如果用户输入：

```
1_3_34_12_1_2_34 
```

输出将是

```
1_2, 3_1, 34_2, 2_1, 12_1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:41:49.693

这是您可以执行的操作的示例

```
String input = "1_3_34_12_1_2_34";
String[] numbers = input.split("_");
Arrays.sort(numbers);
int count = -1;
String last = numbers[0];
for (String n : numbers) {
    count++;
    if (n.equals(last)) continue;
    System.out.print(last + '_' + count + ',');
    last = n;
    count = 0;
}
count++;
System.out.println(last + '_' + count); 
```

印刷

```
1_2,12_1,2_1,3_1,34_2 
```

提示：该命令建议您应该使用`LinkedHashMap<String, Integer>`

# .htaccess - Mod-Rewrite 到查询字符串

> ID：12692376
> 
> 赞同：1
> 
> 时间：2012-10-02T14:34:35.163
> 
> 标签：.htaccess, mod-rewrite, redirect

我需要为个性化网址创建一系列重定向。他们需要从我服务器上的一个目录转到另一个更复杂的 url，其中包括基于原始 url 的查询字符串。这是一个例子：

我想从这个重写： [http ://www.mywebsite.com/TestDirectory/John.Doe](http://www.mywebsite.com/TestDirectory/John.Doe)

对此：

[http://their.server.com/adifferentdirectoryname/page.aspx?u=John.Doe&s=lorem&dm=purl](http://their.server.com/adifferentdirectoryname/page.aspx?u=John.Doe&s=lorem&dm=purl)

我将发送数百个这样的个性化 URL，所以我需要解决方案来解决这个问题，这样我就不必为数百个名字写这个。

任何帮助是极大的赞赏。非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:16:06.087

我想你想要这样[*的*东西](http://www.yourhtmlsource.com/sitemanagement/urlrewriting.html#usingregularexpressions)：

```
RewriteRule ^TestDirectory/(\w+\.\w+)$ foo.aspx?u=$1 [R] 
```

正则表达式`\w+\.\w+`匹配一个单词、一个点和另一个单词。被`$1`从正则表达式中捕获的字符串替换。`[R]`实际重定向用户的方法。

这些规则很难做到恰到好处，所以我建议阅读[一些示例](http://www.yourhtmlsource.com/sitemanagement/urlrewriting.html#usingregularexpressions)。

# ruby-on-rails - Rails 服务器不会响应本地网络之外的任何请求

> ID：12692377
> 
> 赞同：0
> 
> 时间：2012-10-02T14:34:35.703
> 
> 标签：ruby-on-rails, ruby, web-services, thin, webrick

我正在使用带有桥接接口的 VM 运行 Rails，它在本地网络中有自己的 IP。

当我在 0.0.0.0:3000 中启动 rails 时，我可以使用端口 3000 中的本地网络 IP 毫无问题地访问它。

路由器 NAT 配置是将端口 3000 路由到 VM。

[当我在 Rails 服务器停止的情况下检查http://canyouseeme.org](http://canyouseeme.org)上的端口 3000 时，它说端口已关闭。随着rails服务器启动它说端口是开放的。这意味着，路由器确实在路由到虚拟机，对吧？

但是当我尝试通过我的3000端口的公共IP进入服务器时，它不会响应。

我尝试将服务器从 Thin 更改为 Webrick，结果相同。

此外，我尝试在端口 3000 中运行另一个 Web 服务器，结果相同。对本地网络之外的公共请求没有回应。然而，端口被检查为打开。

此外，UFW 已停止，无论如何我允许端口 3000。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:38:08.640

某些路由器不支持环回，这意味着您无法从 LAN 内访问公共 IP。FWIW，我试过这个”

```
telnet canyouseeme.org 3000
Trying 8.23.224.110... 
```

没有运气。

# php - 带有 NFS wp-content 文件夹的 Wordpress 导致路径问题

> ID：12692378
> 
> 赞同：1
> 
> 时间：2012-10-02T14:34:37.450
> 
> 标签：php, wordpress, nfs

NFS 挂载很好并且具有正确的权限，但是我将 Wordpress 中的整个 wp-content 文件夹安装在 NFS 的 /nfs/blog/ 上。

在分类 URL 中，有以下代码：

```
wp_enqueue_style(
            'taxonomy-image-plugin-public',
            taxonomy_image_plugin_url( 'style.css' ),
            array(),
            taxonomy_image_plugin_version(),
            'screen'
            );

function taxonomy_image_plugin_url( $file = '' ) {
    static $path = '';
    if ( empty( $path ) ) {
            $path = plugin_dir_url( __FILE__ );
    }
    return $path . $file;
} 
```

您会注意到 wp_enqueue_style 正在调用函数 taxonomy_image_plugin_url()。是否需要在 wp-config.php 文件中包含一些定义，以防止 Wordpress 打印出我的符号链接？这个问题只在两个插件上是这样的。几乎，CSS 出现在源代码中是这样的：

有任何想法吗？我已经添加了 define('FS_METHOD', 'direct') tp wp-config.php 但是我需要添加其他任何东西，比如这里的任何常量以使 Wordpress 忽略符号链接吗？ [http://codex.wordpress.org/Determining_Plugin_and_Content_Directories](http://codex.wordpress.org/Determining_Plugin_and_Content_Directories)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:12:09.023

WordPress 在其代码库中使用 PHP`__FILE__`常量。`__FILE__`自动解析路径。因此，WordPress 最终会意识到`/nfs/blog/`

`WP_CONTENT_DIR`在您的 wp-config.php 中设置应该可以解决问题。

```
define('WP_CONTENT_DIR', '/nfs/blog'); 
```

# r - ggplot2构面边距

> ID：12692382
> 
> 赞同：8
> 
> 时间：2012-10-02T14:34:47.997
> 
> 标签：r, ggplot2

我`facet_wrap`用来绘制一些数据。这是一个例子：

```
library (ggplot2)
library (reshape)

# generate some dummy data
x = seq(0,1,0.05)
precision = sqrt(x)
recall    = 1 - precision
fmeasure  = 2 * (precision * recall) / (precision + recall)

# prepare it for plotting
df = data.frame(x=x, precision=precision, recall=recall, fmeasure=fmeasure)
df = melt(df, id.vars=c(x))

# plot it
p = ggplot(df, aes(x=x, y=value, group=variable))
p = p + geom_line() + facet_wrap(~variable, ncol=3)
p = p + coord_cartesian(xlim=c(0,1), ylim=c(0,1)) # second plot is without this line
print (p) 
```

图 1：绘制上述代码。 ![用 xlim 和 ylim 绘图](../Images/f58b6a8e4195780e6047d8558fa2d8ad.png)

但是，您在图 1 中看到的是后续分面的第一个和最后一个标签重叠。这可以通过增加刻面之间的空间来解决。其他选项是删除`xlim`和`ylim`范围，如图 2 所示，但这会在构面本身中保留不必要的空间。

图 2：`p = p + coord_cartesian(xlim=c(0,1), ylim=c(0,1))`删除线的绘图。 ![没有 xlim 和 ylim 的绘图](../Images/ffef39fe474328ccf9d410da1c767a66.png)

我试图增加刻面之间的空间，但到目前为止我一直无法做到。你有什么建议吗？

我使用 ggplot2 版本 0.9.1 。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T14:50:00.293

对于 0.9.1 使用：`p + opts(panel.margin = unit(2, "lines"))`但是你有很多额外的空白并且 IMO 失去了一些刻面的效果（注意 0.9.2 现在使用`theme`而不是`opts`）

多年来，ggplot2 API 发生了变化，截至 2018 年 2 月 1 日，这是更新的解决方案：

```
p + theme(panel.spacing = unit(2, "lines")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-08T17:29:50.233

基于 Tyler 的回答，您可以使用`strip.text`theme 参数进一步将构面面板压缩在一起，如下所示：

```
library(tidyverse)

mpgTidy <- pivot_longer(mpg, c(cty, hwy), names_to="mpg_categ", values_to="mpg")

g <- ggplot(mpgTidy, aes(x=displ, y=mpg, color=factor(cyl))) +
  facet_wrap(~ mpg_categ) +
  geom_point()

g 
```

[![在此处输入图像描述](../Images/a30e0d4164b3c667dae0d0a24bd7def8.png)](https://i.stack.imgur.com/KjVGF.png)

```
g + theme(strip.text=element_text(margin=margin()),
          panel.spacing=unit(0, "lines")) 
```

[![在此处输入图像描述](../Images/a55aa6a157cbd1f30fd06424bd80ddb9.png)](https://i.stack.imgur.com/MTJbf.png)

当分面标签很长或包含换行符并且分面图既有行又有列时，这可能很有用。

# c# - 使用非托管代码中的托管 COM 对象

> ID：12692384
> 
> 赞同：5
> 
> 时间：2012-10-02T14:35:02.317
> 
> 标签：c#, .net, com, interop, clr

假设我有一个众所周知的接口`IWellKnownInterface`，它是已知的`COM-visible`并已注册。

我也有`C#,`这个对象的托管（确切地说）实现：

```
public class MyWellKnownClass : IWellKnownInterface { ... } 
```

最后，我有一个`extern`方法，它接受这个接口的对象：

```
[Whatever]
private static extern void ExternMethod(IWellKnownInterface veryWellKnown); 
```

* * *

## **问题一：**

我想从以下`CLR`角度了解以下代码下会发生什么：

```
IWellKnownInterface a = new MyWellKnownClass();
ExternMethod(a); 
```

我知道，如果我们谈论的是从托管代码调用**非托管 COM 对象**，那么一切都是关于构造一个适当`Runtime Callable Wrapper`的并通过适当的参数转换通过它委托调用。**但是，当我们有一个托管 COM 对象**并在非托管代码中使用它时，我找不到任何有关这种情况的信息。

## **问题2：**

类型如何`dynamic`影响`CLR`相同情况下的行为？它会以某种方式改变内部托管到非托管的互操作逻辑吗？`MyWellKnownClass`也许为实例添加一些额外的包装器？

```
dynamic a = new MyWellKnownClass();
ExternMethod(a); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:04:50.087

**问题一：**

第一行只创建一个对象。与任何其他 CLR 对象没有什么特别或不同之处。这是因为实际上没有任何东西被封送到非托管代码。

但是，在第二行，创建了一个[COM 可调用包装器](http://msdn.microsoft.com/en-us/library/f07c8z1c.aspx)并将其封送至非托管代码。将此视为[运行时可调用包装器](http://msdn.microsoft.com/en-us/library/8bwh56xe.aspx)的反面，将来自非托管代码的调用处理回您的 COM 接口的托管实现。

**问题2：**

该[`dynamic`类型](http://msdn.microsoft.com/en-us/library/dd264736.aspx)根本不会影响调用。在这种特殊情况下，您将托管引用传递给非托管代码。的类型`a` *是* `MyWellKnownClass`，唯一要做的就是更改*在托管代码*`dynamic`中解析对它的调用的方式。创建 COM 可调用包装器时，它具有对 的实例的硬引用，而不是变量；唯一改变的是，当被调用时，被调用方法的解析发生在运行时而不是编译时。*`MyWellKnownClass``dynamic``ExternMethod`*

# html - 允许 HTML 输入字段中的空格和换行符？

> ID：12692389
> 
> 赞同：1
> 
> 时间：2012-10-02T14:35:12.210
> 
> 标签：html, email, formatting

在我们的内部 CRM 中，我们有一个简单的 html 输入文本区域，您可以在其中留下注释和消息。我们稍后使用此信息通过电子邮件发送此邮件，只是因为该电子邮件是 HTML 格式，所以格式都是错误的。

因此，例如，如果我的 MYSQL 表中有以下内容：

```
This is a test message!

Some line
Some more lines 
```

如果我们稍后通过电子邮件发送它，它会显示为：

```
This is a test message! Some line Some more lines 
```

这显然是不想要的，但我不想在我们的 CRM 中添加一些复杂的所见即所得编辑器。我可以允许换行吗？如果是这样，怎么做？

我不想使用`<pre></pre>`标签，因为我相信并非所有电子邮件客户端都支持它（我可能是错的）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:37:56.087

`text/plain`如果您不打算在消息中使用任何 HTML 标记，则可以使用标头。（这意味着没有颜色，没有链接，也没有文本格式）。

您还可以制定一个快速而肮脏的解决方案，`\n`将文本中的所有 s 替换为`<br>\n`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:38:39.027

问题是 html 将所有空格呈现为单个空格。如果您在收到电子邮件后查看其来源，我敢打赌会有换行符（如果没有，那么问题出在电子邮件生成方面）。

`<pre></pre>`我认为这是你能做的最简单的事情。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T14:37:47.137

一个基本的解决方案是用`<br>`s 替换新行。

更聪明的人会特别考虑多个换行符（例如，将`/\n\s*\n/`其视为结束段落并开始新段落的点（`</p><p>`））。

具体细节取决于您用于从 MySQL 数据生成电子邮件的语言。您可能需要考虑 Markdown 解析器之类的东西。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T14:39:54.060

您可以发送两种风格的电子邮件：html 和纯文本。在 Html 中，不处理换行符（就像在您的浏览器中一样）。看起来这就是你在这里所做的。

两种解决方案：要么以纯文本形式发送电子邮件，要么将换行符更改为 <br>。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T15:13:51.283

假设 PHP 在混合中，则有 nl2br() 函数。否则，自己滚动并不难。

这个问题的根源是浏览器（邮件客户端可以使用嵌入式浏览器进行渲染 - 例如 Outlook - 或表现得像浏览器）将在 HTML 中的标签之外获取任意数量的空格/换行符/回车符/等并渲染它们作为单个空格。这样你就可以做一些事情，比如缩进你的标记，并且仍然让它在浏览器中看起来很正常。

您必须插入标记以控制渲染，正如建议的那样：将换行符转换为`<br>`或`<p>`标记等，就像 cms WYSIWYG 编辑器所做的那样。要么为您的电子邮件选择不同的格式。

# sql-server - 打开从 sql server 下载的 Office 文件时出错

> ID：12692392
> 
> 赞同：2
> 
> 时间：2012-10-02T14:35:17.043
> 
> 标签：sql-server, vb.net, excel, stream, ms-word

原始的office文件没有问题（我尝试了word和excel），但是当我将文件作为二进制文件上传到数据库然后从那里下载到我的PC并打开下载的文件时，我收到警告消息“找到excel内容无法读取”等，并且与原始文件相比，文件变得更加清晰。

**确切的错误信息是；**“Excel 在 filename.xls 中发现了不可读的内容。是否要恢复此工作簿的内容？如果您信任此工作簿的来源，请单击“是”。

我如何上传文件：

```
'UPLOAD FILE
Dim fi As New FileInfo(FilePath)
Dim s As Stream = fi.OpenRead()
Dim buffer(fi.Length) As Byte 'I put the buffer in database in varbinary(max) format
s.Read(buffer, 0, fi.Length)
s.Close() 
```

我如何下载和打开文件：

```
'DOWNLOAD FILE
Dim fi As New FileInfo(FilePath)
Dim s As Stream = fi.OpenWrite()
Dim buffer As Byte() = reader("Binary")
s.Write(buffer, 0, buffer.Length)
s.Close()

'OPEN FILE
Dim p As New Process
p.StartInfo = New ProcessStartInfo(FilePath)
p.Start() 
```

**更新：**

正如建议的那样，我尝试简单地复制文件，将 SQL 完全排除在外。这是我尝试过的代码，但也失败了：

```
Private Sub CopyFile(ByVal filePath As String)
    Dim fi As New FileInfo(filePath)
    Dim s As Stream = fi.OpenRead()
    Dim buffer(CType(fi.Length, Integer) - 1) As Byte
    s.Read(buffer, 0, CType(fi.Length, Integer))
    s.Close()

    Dim fi2 As New FileInfo(filePath & " Copy")
    Dim s2 As Stream = fi2.OpenWrite()
    s2.Write(buffer, 0, buffer.Length)
    s2.Close()
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T12:31:00.820

正如[这篇 MSDN 文章所述](http://msdn.microsoft.com/en-us/library/wak0wfyt.aspx)，VB.NET 数组的声明方式与其他语言（例如 C#）不同。在其他语言中，当声明一个固定长度的数组时，给定的大小被用作数组的**总长度**。例如，在 c# 中，该语句`fixed byte buffer[3];`将声明一个包含 3 个元素（索引从 0 到 2）的字节数组。但是，在 VB 中，声明固定数组时给出的大小用作数组的上限，而不是大小。因此，在 VB 中，该语句`Dim buffer(3) As Byte`声明了一个包含 4 个元素（索引从 0 到 3）的字节数组。

考虑到这一点，如果您仔细查看您的代码，您实际上是在声明一个字节数组，它比文件的大小大一个元素（索引从 0 到 fi.Length）。然后，您将从索引 0 开始将整个文件读入字节数组。因此，数组中的最后一个字节保留为值 0（空字符）。然后，您将字节数组的全部内容写入一个新文件，包括最后一个空字节。因此，您的代码正确地复制了文件中的所有字节，但在文件末尾添加了一个额外的空字节，这使 Excel 不高兴。如果查看原始文件大小和新创建文件的文件大小，您会发现新文件比原始文件大一个字节。

要解决此问题，您只需在声明数组时调整数组的大小，使其与文件的长度完全相同：

```
Dim buffer(fi.Length - 1) As Byte 
```

但是，当我这样做时，我觉得有义务指出您发布的代码中的其他一些改进领域。首先，在使用实现`IDisposable`接口的对象时，如`Stream`，最好尽可能使用`Using`语句。这样做可确保对象始终正确关闭/处置，即使在遇到异常的情况下也是如此。例如，如果你这样做会更好：

```
Dim fi As New FileInfo(FilePath)
Using s As Stream = fi.OpenRead()
    Dim buffer(fi.Length - 1) As Byte
    s.Read(buffer, 0, fi.Length)
End Using 
```

此外，很明显您没有使用`Option Strict`，因为如果您使用了，则不允许您使用 fi.Length (a `Long`) 作为数组大小或缓冲区长度的参数。如果打开`Option Strict`，您将被迫明确声明要将`Long`值强制转换为`Integer`. 例如：

```
Dim fi As New FileInfo(FilePath)
Using s As Stream = fi.OpenRead()
    Dim buffer(CInt(fi.Length) - 1) As Byte
    s.Read(buffer, 0, CInt(fi.Length))
End Using 
```

在大多数情况下，打开`Option Strict`是一个非常好的主意。它迫使您了解变量类型以及何时可能丢失数据。例如，在这种情况下，通过`Option Strict`打开，您会意识到文件大小 ( `Long.MaxValue`) 可能大于数组的最大长度 ( `Integer.MaxValue`)，因此，如果您想处理非常大的文件，您会需要编写一个循环读取和写入块中的文件。即使您不想处理大文件，最好先检查大小，这样您就可以优雅地处理错误，而不是允许抛出溢出异常：

```
If fi.Length >= Integer.Max Then
    'Display or log error that the file is too large, and skip loading the file
Else
    'Load file
End If 
```

最后，如果您不关心处理大文件，还有一种更简单的方法来读取和写入文件中的所有字节：

```
'UPLOAD FILE
Dim buffer() As Byte = File.ReadAllBytes(filePath)

'DOWNLOAD FILE
Dim buffer As Byte() = reader("Binary")
File.WriteAllBytes(filePath, buffer) 
```

# iphone - 无法使用阿拉伯字符从 xcode 向 MySQL 数据库发送请求

> ID：12692393
> 
> 赞同：1
> 
> 时间：2012-10-02T14:35:17.713
> 
> 标签：iphone, objective-c, ios, xcode

我有一个数据库，其中包含一个名称列表和每个名称的注释，我在 tableview 中列出这些名称没有问题，但是当我单击一个名称以获取它的注释时，我没有得到任何结果，只有阿拉伯语名称，但是当我选择一个英文名称时，我得到了结果。所以我认为问题出在 xcode 上，如果它有阿拉伯字符，则无法发送链接。

当我将链接放入 safari 时，我得到英文和阿拉伯名称的结果，所以我确定我的 php 代码没问题。

我在 xcode 中使用的代码是

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath{
NSString *tempTitle = [NSString stringWithFormat:@"%@", [array objectAtIndex:indexPath.row]];

NSString *strURL = [NSString stringWithFormat:@"http://localhost/getComment.php?name=%@",tempTitle];
NSData *dataURL = [NSData dataWithContentsOfURL:[NSURL URLWithString:strURL]];

NSString *strResult = [[NSString alloc] initWithData:dataURL encoding:NSUTF8StringEncoding];

NSLog(@"url : %@", strURL);
NSLog(@"result : %@", strResult);
NSLog(@"title : %@", tempTitle);
} 
```

知道如何解决吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:31:18.357

通过替换此代码解决了问题

```
NSData *dataURL =[[NSData alloc] initWithContentsOfURL:[NSURL URLWithString:[strURL stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]]]; 
```

# c# - 从各种文档类型中删除文本

> ID：12692398
> 
> 赞同：1
> 
> 时间：2012-10-02T14:35:30.200
> 
> 标签：c#, asp.net-mvc

我正在编写一个 C# asp.net Web 应用程序，它接收各种格式的简历，即 doc、docx、pdf、文本等。

我想知道是否有一种简单的方法可以从文档中删除某些信息，无论它是什么文件类型，然后将编辑后的文件传递给最终用户？

要删除的信息将保存在一个字符串中

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:37:54.557

您将需要使用单独的 API 解析每种文件类型。

*   .docx 可以使用以下方式解析：http: [//docx.codeplex.com/](http://docx.codeplex.com/)
*   .pdf 可以使用以下方式解析：[http ://www.pdfsharp.net/](http://www.pdfsharp.net/)
*   等等

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:40:55.840

如果您使用流式阅读器 (http://msdn.microsoft.com/en-us/library/system.io.streamreader.aspx) 阅读文档，则可以使用 ReadToEnd 函数将所有内容存储在字符串中，然后使用功能：

```
 MyString.Replace("Something to replace", ""); 
```

删除匹配项。如果文件格式无法作为字符串读取，则必须考虑不同的选项。但是，考虑到文件格式，可能有更快的解决方案，并且可能不会简单地存储。

# java - 创建 IndexSearcher 抛出 IOException 读取过去 EOF

> ID：12692400
> 
> 赞同：1
> 
> 时间：2012-10-02T14:35:32.527
> 
> 标签：java, lucene

当我尝试创建一个`new IndexSearcher(fsDir)`类对象时，它正在抛出`IOException read past EOF`. 搜索索引不是基于 RAM，而是基于 NFS（使用`FSDirectory`lucene 类）。

我用谷歌搜索得到了[这个](https://stackoverflow.com/questions/620422/lucene-search-error-stack)

没有权限问题，也没有锁定，我用[lockhunter检查过](http://lockhunter.com/)

所以必须有写权限，并且没有人使用该目录。

它在过去的2-3个月内工作。昨天突然停止工作，文件夹中的所有索引文件。

还有什么可能导致此异常？如果索引是 2-3 个月大（某个时期），那么它是否会过期并给出此异常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-03T01:58:25.750

我得到了答案，花了很多时间在上面，它会给出那个异常（IOException 读取过去的 EOF）：

```
If Directory does not give write permission
If someone else is using(locked)
If some segment is corrupted 
```

对于我的情况，它已损坏:(。但是 Exception 对此没有说任何话（可以告诉一些`FIleCurroptedException`人）。这可能对其他人有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-13T08:10:56.073

每次我得到这个时，它都有两个同名的索引文件（记录）（键 - 我正在使用 mongo-lucene）。我删除了带有空缓冲区的记录之一，它让我无需重新构建整个索引即可继续前进。这似乎是一个多线程问题。另一个触发器似乎是索引非文本文件

# jaxb - JAXB 自定义绑定

> ID：12692412
> 
> 赞同：1
> 
> 时间：2012-10-02T14:36:07.853
> 
> 标签：jaxb, customization, xjc

我有以下复杂类型

```
<xsd:complexType name="cidType"> 
  <xsd:choice> 
    <xsd:sequence> 
      <xsd:element name="a" type="Type_A"></xsd:element> 
      <xsd:element name="b" type="Type_B"></xsd:element> 
    </xsd:sequence> 
      <xsd:element name="b" type="Type_B"></xsd:element> 
  </xsd:choice> 
</xsd:complexType> 
```

当尝试为此模式生成 JAXB 类时，这是错误的，因为如您所见，重复引用元素 b，JAXB 错误给我的是：

/* * 你得到这个“catch-all”属性的原因如下： * 字段名“b”被模式的两个不同部分使用。*/

由于它是行业标准架构，我无权更改任何内容。可能的解决方案是什么？

如果我走定制路线，我不知道该怎么做，如果可能的话，请指出一个好的资源/示例。我已经用谷歌试了运气

我确实有一个外部绑定声明来合并某些元素的数据类型，但我不确定如何使用绑定自定义来解决我当前的问题

# c# - Css更改asp tablecell，而不调整它的大小

> ID：12692415
> 
> 赞同：0
> 
> 时间：2012-10-02T14:36:25.687
> 
> 标签：c#, css, asp.net

我在后面的代码中使用 C# 制作了一个表格单元格，并在单元格内的标签中添加了一个 CSS 类来旋转它：

```
.vertical {color:#333;
                filter: progid:DXImageTransform.Microsoft.BasicImage(rotation=3);
                -webkit-transform:rotate(270deg);
                -moz-transform:rotate(270deg);
                -o-transform: rotate(270deg);
                white-space:nowrap;
                display:block;
                } 
```

问题是在我旋转标签后，我的表格单元格（和表格）没有调整大小以适应新文本。有没有一种方法可以使用 CSS 或属性让我的表格自动调整大小以适应新内容？

我会很感激任何帮助。

--- 编辑--- 所以在玩了一些 CSS 类之后，我意识到了我的问题的根源。基本上，在我应用 CSS 更改后 - 我的表格不会调整大小。它们的大小仍然就像内容没有被修改一样。

CSS样式更改表格单元格的大小后，是否可以重新调整表格的大小？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T20:26:55.093

您需要计算`height`标签的新值，然后将其包含的元素设置为该高度。 [这个小提琴](http://jsfiddle.net/UfeWQ/2/)就是我要说的。

```
<table>
    <tr>
        <td id="someLabel" class="vertical">some stuff</td>
        <td>some other stuff sljk fkas jd</td>
    </tr>    
    ...
</table>​ 
```

然后使用 jQuery

```
$.fn.textWidth = function () {
    var html_org = $(this).html();
    var html_calc = '<span>' + html_org + '</span>';
    $(this).html(html_calc);
    var width = $(this).find('span:first').width();
    $(this).html(html_org);
    return width;
};

$(function(){
    var someLabelSize = $("#someLabel").textWidth();
    $("#someLabel").css("height", (someLabelSize + 5));    
}); 
```

只需更改选择器以反映您的需求。

# java - 对 java.lang.Readable.read 的调用是否阻塞？

> ID：12692420
> 
> 赞同：1
> 
> 时间：2012-10-02T14:36:38.217
> 
> 标签：java, nio, blocking

我正在实现一个使用通用阅读界面的设施。我正在使用 java.lang.Readable 接口，它使用 CharBuffer 将数据写出。

它没有说的是`read`呼叫是否会阻塞。然而，它确实返回写入缓冲区的字符数量，但对我来说，它也可以表明缓冲区没有足够的空间来写入整个等待的输入，因此只写入了一部分。但是，如果缓冲区有足够的空间，但没有可用的输入（或少于缓冲区可以容纳的字符），会发生什么？将`read`返回零（或一个小整数）还是会阻塞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:39:03.333

是的，它会阻塞。操作完成后，此方法返回添加到缓冲区的 char 值的数量，如果此字符源位于其末尾，则返回 -1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:57:35.847

如果它是非阻塞的，则必须有一种机制来通知它何时变得可读。所以它不能是非阻塞的。

# c++ - 无法正确通过引用传递数组

> ID：12692421
> 
> 赞同：1
> 
> 时间：2012-10-02T14:36:39.010
> 
> 标签：c++

我试图在一个函数中将我的数组的两行添加在一起，但它没有这样做，我不知道为什么它不这样做，因为代码看起来正确并且不会出错。我曾尝试使用 * 和 & 通过引用传递它，但我总是遇到代码错误。谢谢

```
#include <iomanip>
#include <iostream>
#include <fstream>

using namespace std;

void addRow(int arr[100][100], int firstrow,int secondrow,int rows, int cols);

void addRow(int arr[100][100], int firstrow,int secondrow,int rows, int cols){
    int i =0;
    int j = cols;
    while(i<rows){
        arr[secondrow][j]+=arr[firstrow][j];
        i++;
        j++;
    }
    print(arr,rows,cols);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:40:13.647

数组传递正确，是您的代码没有正确添加。

您在开始时设置`j`为`cols`，然后使用 以递增的顺序移动它`j++`。结果，您对数组元素的所有访问都超出了行尾。循环退出条件也不正确，除非您的矩阵始终是正方形的（在这种情况下，没有必要为行和列传递单独的计数）。

这应该有效：

```
void addRow(int arr[100][100], int firstrow,int secondrow,int rows, int cols){
    for(int j = 0 ; j != cols ; j++){
        arr[secondrow][j] += arr[firstrow][j];
    }
    print(arr, rows, cols);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T14:41:17.087

```
void addRow(int (&arr)[100][100], int firstrow,int secondrow,int rows, int cols); 
```

如果您想通过引用传递，这将是正确的签名。

```
template <typename std::size_t rows, std::size_t cols>
void addRow(int (&arr)[rows][cols], int firstrow,int secondrow); 
```

那么您甚至不需要在程序上下文中将行和列作为参数。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T14:48:50.163

更改`arr[100][100]`为`arr[][100]`。（实际上，其他一些更改，例如使 100 成为符号常量，将有助于改进代码的样式，但这是需要更改的主要内容。）

原因并不容易理解，但对 C++ 编程很重要。实际传递给函数`addRow()`的是——请仔细阅读以下内容*——100 个整数的第一行的地址。* 这个地址又是第一个int的地址，但是传递的语义如我所说。因此，在 内`addRow()`，符号`arr`充当指向 100 个整数数组的常量指针，而不是指向 10,000 个整数数组的常量指针。

# iphone - 如何在应用程序崩溃（或只是冻结）的情况下显示错误消息？

> ID：12692422
> 
> 赞同：0
> 
> 时间：2012-10-02T14:36:41.863
> 
> 标签：iphone, ios, xcode

我正在构建一个内部应用程序。我的经理告诉我，我的应用程序不时冻结，她必须重新启动整个 iPad 才能重新启动应用程序。我该如何处理这些突然的应用程序崩溃？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:43:23.097

> 我该如何处理这些突然的应用程序崩溃？

使用 Instruments 调试您的应用程序，这将帮助您找到应用程序冻结的原因。

此外，如果它崩溃了，您可以将手机插入您的 Mac 并检索崩溃日志，然后分析它是哪种方式崩溃的。请参阅[文档](https://developer.apple.com/library/ios/#qa/qa1747/_index.html)。

# apache - 使用 .htaccess 进行条件重定向

> ID：12692423
> 
> 赞同：0
> 
> 时间：2012-10-02T14:36:48.383
> 
> 标签：apache, .htaccess, redirect

我对 Pinterest 引用我的照片的方式不满意，因为在他们的页面中提到的源直接链接到 JPEG 图像文件而不是包含它的页面，其中还包括作者参考和许可信息。

但是，我不想让他们取消引用所有图片，而是保留它们，因为这可能是带来流量的好方法，但我想创建从 JPEG 图像 URL 到包含的页面的重定向这些元素。

如果链接来自外部服务器，有没有办法使用 .htaccess 进行条件重定向？

谢谢大家！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:00:58.403

您可以使用此处描述的技术：[http ://httpd.apache.org/docs/current/rewrite/access.html#blocked-inline-images](http://httpd.apache.org/docs/current/rewrite/access.html#blocked-inline-images)

假设您的网站是 www.example.com，并且您希望将所有不是来自您的网站的 jpeg 图片（例如 image123.jpeg）请求重定向到相应的 php 页面（例如 /galleries/image123.php）

你可以这样做：

```
RewriteCond %{HTTP_REFERER} !^$
RewriteCond %{HTTP_REFERER} !www.example.com [NC]
RewriteRule (.*)\.(jpg|jpeg)$ /gallery/$1.php [R,NC] 
```

# android - 可以在 MapView 中绘制路线

> ID：12692424
> 
> 赞同：1
> 
> 时间：2012-10-02T14:36:49.307
> 
> 标签：android, location, android-mapview, direction

我正在尝试在 MapView 中做一条路线，我研究并找到了我需要像这样画线的方法：[http ://androidpallikoodam.wordpress.com/2012/04/04/draw-google-driving-directions-in -mapview-overlay/](http://androidpallikoodam.wordpress.com/2012/04/04/draw-google-driving-directions-in-mapview-overlay/)，我尝试使用它，但效果不佳，谷歌只给我发了几个点，所以当我绘制路线时仍然错误（或者无论如何我可以向谷歌请求更多点吗？）。

我在想，无论如何我可以用不同的 URL 加载 MapView，比如[http://maps.google.com/maps?saddr=brighton&daddr=timbuktu](http://maps.google.com/maps?saddr=brighton&daddr=timbuktu)因为如果我用这个 url 调用一个新的意图并将它放在 Android 的 Map 中，路线显示，所以如果我可以用这个 URL 加载我的 MapView，也许工作。

其他选项是在我的 Activity 上显示整个应用程序地图，这样我就可以放置按钮和标签等其他内容，明白吗？我想说的是，将一个应用程序安装在 android 上，以便在我屏幕上的特定区域运行。这个有可能？

任何人都可以帮助我吗？

谢谢。

# php - 多行 PHP BB 代码

> ID：12692428
> 
> 赞同：1
> 
> 时间：2012-10-02T14:37:04.987
> 
> 标签：php, regex, multiline, bbcode

当我使用时，我无法弄清楚如何让我的正则表达式选择多行

```
[b]Test[/b] 
```

我的 BB 代码工作正常，但是当我尝试时

```
[b]
Test
[/b] 
```

我已经读过我应该`/s /m`在我的正则表达式中使用修饰符，但我不知道如何，我尝试过： preg_match_all(' `\[(' . $tags . ')=?(.*?)\](.+?)\[/\1\]/m/s`' 但它不起作用。

有什么建议么？

工作示例：

```
$tags = 'b|i|size|color|center|quote|url|img';
while (preg_match_all('`\[(' . $tags . ')=?(.*?)\](.+?)\[/\1\]`', $string, $matches))
    foreach ($matches[0] as $key => $match) {
        list($tag, $param, $innertext) = array($matches[1][$key], $matches[2][$key], $matches[3][$key]); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:50:05.820

您添加修饰符的语法不正确。首先，您不需要任何斜线来应用它们。它们只属于分隔符之后（在您的情况下不是`/`but ```）。而且您也不需要再次分隔每个修饰符，只需将它们粘在一起即可：

```
'`\[(' . $tags . ')=?(.*?)\](.+?)\[/\1\]`ms' 
```

您使用哪个分隔符根本不重要。查看[有关分隔符的 PHP 文档](http://php.net/manual/en/regexp.reference.delimiters.php)。您可以使用

> 任何非字母数字、非反斜杠、非空白字符。

请注意分隔符必须被转义。```所以和根本没有区别`/`。如果你`/`改用，那么你需要`/`在正则表达式中转义（否则 PHP 将假定这是正则表达式的结尾）。像这样：

```
'/\[(' . $tags . ')=?(.*?)\](.+?)\[\/\1\]/ms' 
```

因此，分隔符的选择主要是为了方便 - 如果可能，请使用在正则表达式中没有出现的分隔符，因此您不必转义它。`/`只是最常见的选择，这就是为什么您可能已经找到了`/m`添加修饰符的符号。由于 PHP 文档状态是常见的选择是`#`和`~`（我也`!`经常看到）。

# google-chrome-extension - chrome.browserAction.setIcon() 不适用于 content_security_policy

> ID：12692429
> 
> 赞同：1
> 
> 时间：2012-10-02T14:37:06.277
> 
> 标签：google-chrome-extension, manifest, content-security-policy

我已向我的 Chrome 扩展程序添加了功能，以便在单击图标按钮时更改颜色。代码很简单：

```
chrome.browserAction.setIcon({path:"icon_pink_lines.png", tabId:tab.id}); 
```

但是，这花了我一段时间才弄清楚，因为事实证明，当在 manifest.json 中设置 content_security_policy 时它不起作用。我原本有

```
 "content_security_policy": "default-src 'none'; script-src 'self'" 
```

问题是，如果有的话，删除它会失去什么？还是应该只是与图标更改一起使用的其他东西？老实说，我只是从一些示例清单文件中复制了原始策略，从那以后就没有考虑过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T08:41:53.847

如果您不自己设置，则有一个[默认值：](http://developer.chrome.com/extensions/contentSecurityPolicy.html#restrictions)`content_security_policy`

`script-src 'self'; object-src 'self'`

不过你的更紧。它不允许加载任何外部资源（而默认策略不允许仅外部脚本）。似乎您`icon_pink_linkes.png`被视为外部资源并被 CSP 阻止。这对我来说似乎是一个错误，您可以[在此处](http://crbug.com)报告（我已经搜索过类似的错误，但没有找到）。

# sql - SQL Navigator 中的“with...as”

> ID：12692430
> 
> 赞同：6
> 
> 时间：2012-10-02T14:37:18.963
> 
> 标签：sql, oracle

以下查询有效：

```
select count(*) from everything where num not in (select num from sometable) 
```

以下查询应该与上面的查询等效，但会导致“无效标识符”错误：

```
with unwanted as (select num from sometable)
select count(*) from everything where num not in unwanted 
```

第二个查询有什么问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T14:40:18.257

语法是这样的：

```
with unwanted as (select num from sometable)
select count(*) from everything where num not in (select * from unwanted) 
```

`select num from sometable`显然，这只有在零件更复杂或以后多次使用时才有意义……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:44:40.350

您还可以加入表以获得更快的性能

```
WITH unwanted
AS
(
    SELECT  num 
    FROM    sometable
)
SELECT  COUNT(*)
FROM    everything a
        LEFT JOIN unwanted b
            ON a.num = b.num
WHERE   b.num IS NULL 
```

# android - 为什么Android版本代码和版本名称总是回到1和1.0？

> ID：12692431
> 
> 赞同：3
> 
> 时间：2012-10-02T14:37:18.510
> 
> 标签：android, android-manifest, android-version

我正在尝试将我的应用程序发布到 Play 商店，但每当我将应用程序导出为 Android 应用程序时，我的版本代码和版本名称都会分别恢复为“1”和“1.0”。我只是按照此处的说明进行操作：[如何为我的 Android Market APK 创建证书？](https://stackoverflow.com/questions/3985419/how-do-i-create-a-certificate-for-my-android-market-apk)

我不明白发生了什么事。我正在尝试使其成为 2 和 1.1。

**更新**：这是一个关于错误操作的 YouTube 视频：[http ://www.youtube.com/watch?v=cLMf0iqpbIg&feature=youtu.be](http://www.youtube.com/watch?v=cLMf0iqpbIg&feature=youtu.be)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T07:25:39.153

这是做什么：

1.  设置`android:versionCode`为 2，`android:versionName`在清单中设置为 1.1。清理项目，构建项目。
2.  从 Eclipse 工作区中删除项目。
3.  通过操作系统的文件资源管理器转到项目文件夹。
4.  删除`project.properties`，可能的罪魁祸首。
5.  在 Eclipse 中再次导入项目。
6.  右键单击项目 -> 属性 -> Android -> 将目标 SDK 设置为 API 级别 16。
7.  像往常一样导出为 Android 应用程序。

# java - Unix 的 Java 包装器不能在当前目录之外工作

> ID：12692433
> 
> 赞同：0
> 
> 时间：2012-10-02T14:37:29.933
> 
> 标签：java, unix

我使用 Java 创建了一个垃圾桶实用程序，它可以删除文件并将其放入可以恢复的垃圾桶中。

我希望它能够正常工作，这样您就可以键入`Del filename`，它会删除文件，`Undel filename`并且它会取消删除文件。到目前为止一切顺利......只要您位于包含类文件和 Del shell 脚本的目录中。

我尝试添加`PATH=/Users/username/Dropbox/CS211S/HW03_delete/:$PATH`到我的 .profile。纳达。

这是我的脚本：

```
#!/bin/ksh
#                 
# Author:  me
# Date  :  10/02/12        
# Program Name: Del 
#                         

export CLASSPATH=/Users/username/Dropbox/CS211S/HW03_delete:$CLASSPATH 

(( $# == 0 )) && echo "usage: Del file-name(s)" && exit 1
Java Del $* 
```

要运行它，我必须在带有 Del 和类文件的目录中并输入`./Del filename`Terminal。我应该能够打字，`Del filename`但我一生都不知道如何让它工作......

如果我只是输入，`Del filename`我会收到一个找不到命令的错误！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:43:55.633

这根本与 Java 无关。它仅与 unix shell 有关。将您的脚本放在 下`/bin`，为所有相关用户添加执行权限并在不提及路径的情况下运行它，即按您的意愿直接运行：`Del`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:47:10.637

您需要的是将路径导出到`.profile`.

在终端输入这个

```
gedit $HOME/.profile 
```

现在换行

```
PATH=/usr/local/bin:$PATH ; export PATH 
```

进入这个。

```
PATH=/usr/local/bin:/Users/username/Dropbox/CS211S/HW03_delete/:$PATH;
export PATH 
```

希望这可以帮助。这仅对 UNIX 是肯定的。

# web-services - 即使凭据不完整，Magento 的网络服务也会返回会话

> ID：12692436
> 
> 赞同：1
> 
> 时间：2012-10-02T14:37:46.873
> 
> 标签：web-services, magento, login

我正在运行 1.10.1.1 Magento Enterprise 版本并试用了 Web 服务。如果我正确登录，我会得到一个会话 ID，我可以用它来进一步调用 Web 服务。

如果我将用户或密码字段留空或两者都留空并想登录，我还会获得一个会话 ID。但是，如果我想用这个会话 ID 调用另一个方法，我会收到我必须重新登录的消息。

如果我使用了错误的凭据（用户和密码都填写了一些内容），我会收到一条消息“访问被拒绝”。

那么，如果我将一个字段（用户/密码）留空，为什么我会得到一个我无法使用的会话 ID，为什么我没有收到“访问被拒绝”的消息呢？这是一个错误吗？

# c# - 上传新文件首先检查该文件是否已存在于数据库中，如果不存在则将其保存在数据库中

> ID：12692442
> 
> 赞同：0
> 
> 时间：2012-10-02T14:38:00.833
> 
> 标签：c#, sql-server

我正在尝试创建包含

```
Image Id (int)
Imagename (varchar(50))
Image (image) 
```

并在 aspx 中写入上传按钮此代码：

```
protected void btnUpload_Click(object sender, EventArgs e)
{
    //Condition to check if the file uploaded or not
    if (fileuploadImage.HasFile)
    {
        //getting length of uploaded file
        int length = fileuploadImage.PostedFile.ContentLength;

        //create a byte array to store the binary image data
        byte[] imgbyte = new byte[length];

        //store the currently selected file in memeory
        HttpPostedFile img = fileuploadImage.PostedFile;

        //set the binary data
        img.InputStream.Read(imgbyte, 0, length);

        string imagename = txtImageName.Text;

        //use the web.config to store the connection string
        SqlConnection connection = new SqlConnection(strcon);
        connection.Open();

        SqlCommand cmd = new SqlCommand("INSERT INTO Image (ImageName,Image) VALUES (@imagename,@imagedata)", connection);
       cmd.Parameters.Add("@imagename", SqlDbType.VarChar, 50).Value = imagename;
       cmd.Parameters.Add("@imagedata", SqlDbType.Image).Value = imgbyte;

       int count = cmd.ExecuteNonQuery();
       connection.Close();

       if (count == 1)
       {
           BindGridData();
           txtImageName.Text = string.Empty;
           ScriptManager.RegisterStartupScript(this, this.GetType(), "alertmessage", "javascript:alert('" + imagename + " image inserted successfully')", true);
       }
    }
} 
```

当我上传新图像时，我需要首先检查该图像是否已存在于数据库中，如果不存在则将其保存在数据库中。

请问我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:35:39.743

添加负责检查文件名是否已存在于表中的方法。

```
 private bool FileExists(string imageName)
    {
        using (SqlConnection conn = new SqlConnection()) // establish connection
        {
            using (SqlCommand cmd =
                new SqlCommand("select 1 where exists(select Id from Image where ImageName = @)", conn))
            {
                cmd.Parameters.Add("@imagename", SqlDbType.VarChar, 50).Value = imageName;
                return cmd.ExecuteNonQuery() > 0;
            }
        }
    } 
```

然后我会这样称呼

```
 if (fileuploadImage.HasFile && !FileExists(txtImageName.Text))
        {
            ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:47:44.700

```
 string cmd ="if not exists (select * from Image where ImageName= @imagename); ";
 \\if you want to check image data
 \\ (select * from Image where SUBSTRING(ImageName, 1, 8000)= SUBSTRING(@imagename, 1, 8000) ); 
 string cmd += "INSERT INTO Image (ImageName,Image) VALUES (@imagename,@imagedata)"; 
 SqlCommand cmd = new SqlCommand(cmd, connection); 
```

如果要验证图像数据，可以尝试将其`DATALENGTH`用作两个图像的第一行检查。如果`DATALENGTH`不同，那么你假设有一个“不同的”图片“。
您也可以使用`SUBSTRING(Image, 1, 8000)`检查前 8000 个字节。
也`SUBSTRING(Image, DATALENGTH(Image) - 7999, 8000)`可以检查最后 8000 个字节。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:49:01.237

最快的方法之一是执行 UPDATE，如果 update 没有返回更新，则执行 INSERT。

```
string cmd = @"UPDATE Image SET Image = @imagedata WHERE ImageName = @ImageName
               IF @@ROWCOUNT=0
                  INSERT INTO Image (ImageName,Image) VALUES (@imagename,@imagedata)"; 
```

或者如果查询图像本身：

```
string cmd = @"UPDATE Image SET ImageName = @ImageName WHERE Image = @imagedata
               IF @@ROWCOUNT=0
                  INSERT INTO Image (ImageName,Image) VALUES (@imagename,@imagedata)"; 
```

# php - 使用 jquery php 显示来自数据库 onchange 选择值的不同数据

> ID：12692443
> 
> 赞同：-1
> 
> 时间：2012-10-02T14:38:02.113
> 
> 标签：php, jquery, ajax

当用户从下拉列表中选择组时，我想显示不同组的用户数据。我想用 jquery 或 ajax 来做而不刷新页面。我已经从 C# 代码后面的 Sql 数据库中获取数据。请告诉如何将使用 C# 代码从数据库中获取的数据绑定到使用 Jquery 或 ajax 的 HTML 下拉列表？

我已从数据库中检索组并将其显示到选择框

```
<select name="group" id="group"> 
  <option value="1">Group A</option>
  <option value="2">Group B</option>
  <option value="3">Group C</option>
</select> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:46:50.297

好的，所以假设您有一个下拉菜单并希望使用 jquery 根据其值将新内容获取到显示区域，只需执行以下操作：

**HTML（或 PHP）前端**

```
<select id='category'>
    <option value="1">Category 1</option>
    <option value="2">Category 2</option>
    <option value="3">Category 3</option>
    <option value="4">Category 4</option>
</select>
<div id='display_area'></div> 
```

*   请注意，每个`option`作为`value`参数设置适当

* * *

**JavaScript/jQuery**

```
<script type="text/javascript">
        $(document).ready(function(){
            $('#category').change(function(){
                //Retrieve Content from the back-end PHP page, and pass the ID selected
                var url = 'fetch_category.php?id=' + $(this).val();
                $('#display_area').load(url);
            });
        });
</script> 
```

*   该函数将调用后端 PHP 页面并传递选定的 ID

* * *

**后端 fetch_category.php**

```
<?php
    //Resolve the ID passed by the Javascript Function
    $id = $_REQUEST['id'];

    //Generate Content Specific to the ID contained in $id

?> 
```

*   此 PHP 文件中生成的任何内容都将填充到指定的显示区域

* * *

**替代方法**

而不是使用 ajax（取决于您的需要），您可以在初始页面生成中使用 PHP 为每个类别内容创建一个 div。你可以为每个like使用一个id，`id='category_1'`这样你的JS看起来像这样：

```
<script type="text/javascript">
        $(document).ready(function(){
            $('#category').change(function(){
                var id = $(this).attr('id');
                $('#display_area').html($('#category_' + id).clone());
            });
        });
</script> 
```

# c# - 将 DateTime 字符串与阿拉伯语字符串连接起来

> ID：12692446
> 
> 赞同：9
> 
> 时间：2012-10-02T14:38:12.237
> 
> 标签：c#, asp.net

我正在尝试将阿拉伯字符串与前导 DateTime 连接，我尝试过各种方式，但 DateTime 总是在字符串的末尾结束

```
var arabicText = "Jim قام بإعادة تعيين هذه المهمة إلى John";
var dateTime = DateTime.Now;

System.Globalization.CultureInfo ci = new System.Globalization.CultureInfo("ar-AE");

string test1 = arabicText + " :" + dateTime.ToString();
string test2 = arabicText + " :" + dateTime.ToString(ci); 
```

所以当它显示时它应该显示

> Jim قام بإعادة تعيين هذه المهمة إلى John :02/10/2012

但我似乎总是以

> 02/10/2012: Jim قام بإعادة تعيين هذه المهمة إلى John

任何想法都会受到赞赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T14:45:37.240

您可以使用此代码

```
var strArabic = "Jim قام بإعادة تعيين هذه المهمة إلى John";
var strEnglish = dateTime.ToString() ; 
var LRM = ((char)0x200E).ToString();  // This is a LRM
var result = strArabic  + LRM +  strEnglish ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:52:27.380

尝试使用`string.Format`：

```
string test1 = string.Format("{0}:  {1}", arabicText, dateTime.ToString()); 
```

这应该会产生您正在寻找的结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:50:57.840

您是否尝试过 string.format() 方法？也许它可以解决你的问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T14:41:37.713

阿拉伯文字从右到左，所以你最终得到的版本是正确的。如果您真的想要另一种方式，为什么不交换参数顺序呢？

# ios - 处于审核状态的 IAP 产品无法删除

> ID：12692450
> 
> 赞同：2
> 
> 时间：2012-10-02T14:38:24.813
> 
> 标签：ios, app-store-connect, in-app-purchase

我的应用再次被苹果拒绝，我真的不知道如何解决这个问题。

我在开发应用程序时创建了一些 IAP 产品来测试应用内购买功能，最后我们决定在当前版本中没有收费产品。

提交应用到应用商店时忘记删除产品，产品处于审核状态，我发现无法删除产品。我也试图拒绝我的申请，但在应用详细信息视图中没有管理您的应用内购买部分（在开发过程中退出）。

产品状态： ![地位](../Images/29a388904a6086e6c4ee9e6b3d7ef244.png)

拒绝说明： ![拒绝](../Images/2282755a304276b65de23dd897bb6a28.png)

任何解决方案？

最良好的问候

# tfs - 这是真的吗，在 tfs build 2012 中构建项目是不可能通过覆盖 OutputPath 的

> ID：12692453
> 
> 赞同：2
> 
> 时间：2012-10-02T14:38:34.613
> 
> 标签：tfs, tfsbuild

我尝试将 TFS 从 2010 年更新到 2012 年，并且在 TFS 构建中遇到问题。

2010 年我使用这个解决方案：http: [//blogs.msdn.com/b/jimlamba/archive/2010/04/13/customizableoutdir-in-tfs-2010.aspx](http://blogs.msdn.com/b/jimlamb/archive/2010/04/13/customizableoutdir-in-tfs-2010.aspx)

但更新后，所有项目都在同一个（解决方案）文件夹中。我已经看到，有一种分离项目的新方法：

[http://blog.codeassassin.com/2012/05/10/override-the-tfs-team-build-outdir-property-net-4-5/](http://blog.codeassassin.com/2012/05/10/override-the-tfs-team-build-outdir-property-net-4-5/)

任何人都可以告诉一些事情，或者有同样的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-07T06:57:00.290

我几乎一整天都在玩构建过程模板和 *.csproj 文件中的 OutDir 属性，但没有运气。

我试图解决的问题：我有一个包含多个控制台/Windows 应用程序项目的解决方案。我需要为每个应用程序创建一个单独的文件夹，而不是在一个文件夹中堆放所有 DLL 和 EXE，以便轻松打包已编译应用程序的 *.zip 档案。

最后我找到了你提到的博客文章 - [http://blog.codeassassin.com/2012/05/10/override-the-tfs-team-build-outdir-property-net-4-5/](http://blog.codeassassin.com/2012/05/10/override-the-tfs-team-build-outdir-property-net-4-5/)

对我来说，它就像一个魅力 - 现在我为每个项目都有一个单独的文件夹，我不需要担心我需要在生成的 *.zip 存档中包含哪些文件。

# php - 如何在提交前更改文本框的默认值

> ID：12692457
> 
> 赞同：0
> 
> 时间：2012-10-02T14:38:55.060
> 
> 标签：php, forms, wordpress

我正在为该站点使用 Wordpress，并在前端添加了一个用户注册表单，但是我使用该`value`属性在用户单击该框之前使用预定义的文本填充它。

但是，除非用户单击了用户名框并填写了那里选择的用户名，否则我需要不提交表单，因此它会更改其中的默认措辞。

到目前为止，我正在使用

```
if ( !$userdata['user_login'] )
    $error = __('A username is required for registration.', 'frontendprofile');
elseif ( username_exists($userdata['user_login']) )
    $error = __('Sorry, that username already exists!', 'frontendprofile'); 
```

它检查是否已填充用户名，但因为我在这里已经有一个默认值，所以这个验证不起作用所以有没有办法改变它所以表单不会提交，除非用户名从默认值改变`value`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:51:30.897

有很多方法可以解决这个问题。一种可能是检查提交的值。例如（假设“defaultValue”是非法的 user_login）

```
if ( !$userdata['user_login'] || 
     $userdata['user_login'] == "defaultValue" || 
     !isNotEmpty($userdata['user_login']))
    $error = __('A username is required for registration.', 'frontendprofile');
else if ( username_exists($userdata['user_login']) )
    $error = __('Sorry, that username already exists!', 'frontendprofile');

function isNotEmpty($input) 
{
    $stringTemp = $input;
    $stringTemp = trim($stringTemp);

    if($stringTemp !== '')
    {
         return true;
    }

    return false;
} 
```

注意：PHP 也已经有一个空函数。这只是一个示例方法。

您应该添加 Javascript Validation 来检查这些字段，我假设您已经在保护自己免受 SQL 注入等攻击。

希望这可以帮助

# pdf - （如何）使用 Ghostscript 将 PDF 转换为 PCL 时可以设置偏移量吗？

> ID：12692467
> 
> 赞同：0
> 
> 时间：2012-10-02T14:39:33.393
> 
> 标签：pdf, ghostscript, printer-control-language

**将 PDF 转换为PCL**时，我需要将**PDF**的整个页面内容向下和向左移动一定距离。

 **我已经找到了如何使用**PDF** to **PDF**做到这一点：

*   [如何将 PDF 文件中的页面图像向左或向右移动？](https://stackoverflow.com/a/3483621/359307)

**PCL**转换有类似的东西吗？

现在我使用以下命令进行转换：

```
 gswin32c.exe \
      -q \
      -dNOPAUSE \
      -dBATCH \
      -sDEVICE=pxlmono \
      -dDuplex=false \
      -dTumble=false \
      -sPAPERSIZE=a4 \
      -dMediaPosition=4 \
      -sOutputFile="d:\out.pcl" \
      -f"d:\in.pdf" \
      -c \
      -quit 
```

是否有可能直接执行此操作，或者我是否需要先将 PDF 中的内容**转换**为**PDF**转换（如在链接的问题中），然后在第二个转换步骤中将其转换为 pcl？

 *** * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T17:24:20.617

我认为它不适用于直接转换 PDF => PCL。

你应该分两步完成它，然后它就可以工作了：

1.  首先移动PDF页面上的内容，
2.  将带有移位页面的 PDF 转换为 PCL。

**第一个命令：**

```
gs                  \
  -sDEVICE=pdfwrite \
  -o pdf-shifted-by-1-inch-to-left-2-inches-to-top.pdf \
  -g8420x5950       \
  -c "<</PageOffset [-72 144]>> setpagedevice" \
  -f input.pdf 
```

**第二条命令：**

```
gs                  \
  -sDEVICE=pxlmono  \
  -o pcl-output.pcl \
  -sPAPERSIZE=a4    \
   pdf-shifted-by-1-inch-to-left-2-inches-to-top.pdf 
```****

# php - 如何告诉 php 在该目录中创建一个目录和另一个目录

> ID：12692471
> 
> 赞同：6
> 
> 时间：2012-10-02T14:39:44.190
> 
> 标签：php

如何告诉 php 创建一个目录，然后在该目录中创建另一个目录？

我在这里使用 mkdir。我有一个名为图像的文件夹。我需要在图像中创建一个名为“用户”的文件夹，然后在用户下创建一个名为“15”的文件夹。我可以一次性创建名为 user 的文件夹。我怎样才能同时做到这两点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-02T14:41:56.057

是的，您可以将[`recursive`参数传递为`true`](http://php.net/mkdir);

```
mkdir('images/user/15', 0777, true); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T14:41:53.223

使用 mkdir 函数的递归标志

函数签名是：

```
bool mkdir ( string $pathname [, int $mode = 0777 [, bool $recursive = false [, resource $context ]]] ) 
```

所以像这样使用它

```
mkdir('images/user/15',0777,true); 
```

虽然也建议不要使用777模式，但那是另一回事。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T14:44:04.330

尝试`mkdir('path/to/file', 0777, true);`

mkdir ( 字符串 $pathname [, int $mode = 0777 [, bool $recursive = false [, resource $context ]]] )

阅读更多 @ [PHP mkdir( $recursive = true ) 跳过最后一个目录](https://stackoverflow.com/questions/1399174/php-mkdir-recursive-true-skips-last-directory)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T15:01:10.447

```
$the_path = '/user/15';
$the_mode = '0700';
mkdir($the_path,$the_mode, true); 
```

您可以为新目录生成所需的路径和权限，将它们传递给 mkdir 函数，同时将“递归”标志设置为 true。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-15T12:17:00.047

此代码将以递归方式创建目录，具有您定义的相同权限，如 0777

```
umask(0777);
mkdir('images/user/15', 0777, true); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-04-17T08:25:35.490

```
$newdir="user";
$subdir="15";
//fetch the current working directory
$curdir= getcwd();
// append the "images" directory to your current working directory 
$dir=$curdir."\images";
// append the "$newdir" directory to your image directory path 
$path=$dir."/$newdir"; 
// for the two line u can write $dir= $curdir."\images"."/$newdir";
// check if file exits
if(is_dir($path)) //or using the single  line code if(is_dir($dir))
{
    echo "directory exists";
}
else
{
    mkdir($path."/$subdir",0777,true);
    echo " directory Created";
} 
```

# formal-methods - Alloy 4.2的语义变化对Alloy书的练习A.1.6的影响？

> ID：12692474
> 
> 赞同：3
> 
> 时间：2012-10-02T14:39:52.787
> 
> 标签：formal-methods, alloy

根据 Alloy 4.2 的[发行说明](http://alloy.mit.edu/alloy/release-notes.html)，存在与整数相关的语义更改。这些变化似乎对 Alloy 书的练习 A.1.6 产生了影响。

在本练习中，以以下代码为基础（我在最后添加了“Int”以显示我的问题）。当运行“show”谓词时，可视化器显示一个实例，但这个实例除了整数之外还包含两个原子“Univ0”和“Univ1”。

```
module exercises/spanning

pred isTree(r: univ->univ) {}
pred spans(r1, r2: univ->univ) {}

pred show(r, t1, t2: univ->univ) {
    spans[t1,r] and isTree[t1]
    spans[t2,r] and isTree[t2]
    t1 != t2
}
run show for 3 Int 
```

这两个原子“Univ0”和“Univ1”是什么意思？他们为什么在那里？它们与在 Alloy 4.1.10 上执行的代码不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:47:04.610

当没有用户定义的 sig 时，Alloy 会自动合成一个名为“Univ”的新 sig。这是一个方便的功能，因为它可以让您在整个宇宙中编写公式，而无需引入任何符号。

当您明确地为 Int 指定范围时，宇宙肯定会包含给定范围内的所有 Int 原子。如果另外没有用户定义的 sig，您最终也会拥有合成的 Univ sig。当显式使用 Int 的范围时，合成 Univ sig 是否有意义是有争议的。

要解决您的问题，您有多种选择：

1.  如果您不关心图形节点的类型（即，您不明确希望节点是 Ints），那么您可以简单地将运行命令更改为

    `run show for 3`而不是`run show for 3 Int`.

    如果你这样做，你将没有 Int 原子，只有 Univ 原子。如果您不喜欢 Univ sig，只需引入一个新的 sig，例如，`sig Node {}`在这种情况下，所有原子的类型都是`Node`.

2.  如果您真的希望您的图表仅超过 Ints，您可以在所有谓词中更改`univ->univ`为。`Int->Int`

3.  如果您真的希望您的 Universe 仅包含 Int 原子（在这种情况下您可以保留`univ->univ`在您的谓词中），您可以引入一个虚拟签名并添加一个确保其基数为零的事实。

    ```
    sig Dummy {}
    fact { no Dummy } 
    ```

    这个小改动将确保 Univ sig 不会自动合成，并且不会影响模型的其余部分。

希望这可以帮助。

# java - PriorityQueue 是 FIFO 队列吗？

> ID：12692479
> 
> 赞同：4
> 
> 时间：2012-10-02T14:40:06.640
> 
> 标签：java, priority-queue

`PriorityQueue`实现了`Queue`，但是`PriorityQueue`FIFO 数据结构像`Queue`吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T14:42:28.477

不它不是。根据[Javadoc](http://docs.oracle.com/javase/6/docs/api/java/util/PriorityQueue.html)

> 优先级队列的元素按照它们的自然顺序排序，或者由队列构建时提供的 Comparator 排序，具体取决于使用哪个构造函数

和

> 此队列的头部是相对于指定排序的最小元素

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-02T14:43:04.683

从[队列](http://docs.oracle.com/javase/6/docs/api/java/util/Queue.html)界面：

> 队列通常但不一定以 FIFO（先进先出）方式对元素进行排序。例外情况是优先级队列，它根据提供的比较器或元素的自然顺序对元素进行排序

所以 PriorityQueue 是一个例外，只有当比较器按该顺序排序时，它才会变成 FIFO 队列。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-02T14:44:01.867

PriorityQueue 不关心 FIFO / LIFO。它处理优先级。如果多个对象具有相同的优先级 - 您不能指望任何 FIFO LIFO 行为。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T14:49:16.350

优先级队列是一种数据结构，它使元素保持一致的内部顺序——在 Java 实现中，这种顺序是在构造时指定的。队列的头部和其他元素的顺序由您指定的排序标准决定。

例如，假设您有一个包含学生的 PriorityQueue，并且您设置的顺序是年龄递增 - 队​​列的头部将包含最年轻的学生，而尾部将包含最年长的学生。当您添加到 PriorityQueue 时，学生将根据他们的年龄被插入到正确的位置，因为这是您指定的顺序，他们的插入顺序无关紧要。

# php - 如何在代码中添加 MySQL 代码？

> ID：12692480
> 
> 赞同：0
> 
> 时间：2012-10-02T14:40:07.623
> 
> 标签：php, mysql

```
$sql=mysql_query("select * from dosyabegeni where veri_id=''.get_custom_field('dwcode').''"); 
```

我想放置以下PHP代码：

```
 <?php get_custom_field('dwcode'); ?> 
```

.. 怎么了？

```
 =''.get_custom_field('dwcode').''"); 
```

主要代码：

```
 <?php
 include('/home/test/public_html/EntegreOz/DosyaBegeni/config.php');
 $sql=mysql_query("select * from dosyabegeni where veri_id=".get_custom_field('dwcode')."");

 while($row=mysql_fetch_array($sql))
 {

 $sira_id=$row['sira_id'];
 $veri_id=$row['veri_id'];
  $begeni=$row['begeni'];

 ?> 
```

谢谢！

*我知道..我不能说更多，我为英语感到抱歉*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:42:42.650

您的单引号 ( ) 过多`'`：

```
$sql=mysql_query("select * from dosyabegeni where veri_id='".get_custom_field('dwcode')."'"); 
```

但是，请不要使用`mysql_*`函数来编写新代码。它们不再被维护并且社区已经开始了[弃用过程](http://goo.gl/KJveJ)。看到*[红框](http://goo.gl/GPmFd)*了吗？相反，您应该了解[准备好的语句](http://goo.gl/vn8zQ)并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli)。如果你不能决定哪个，[这篇文章](http://goo.gl/3gqF9)会帮助你。如果您选择 PDO，[这里有很好的教程](http://goo.gl/vFWnC)。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-02T14:42:36.827

不正确的引用：

```
$sql=  ... snip ... where veri_id=" .get_custom_field('dwcode'). ");
                                   ^-- remove ''                 ^--remove '' 
```

`'`不会“退出”带`"`引号的字符串。

# javascript - Jquery->香草javascript？

> ID：12692481
> 
> 赞同：3
> 
> 时间：2012-10-02T14:40:08.773
> 
> 标签：javascript, jquery

我是一名学习 jQuery javascript 但从未真正掌握 vanilla javascript 的程序员（我知道我是一个顽皮的程序员）。我的问题是我将如何在 vanilla JS 中复制此功能？

```
$('select').change(function() {
    if($(this).val() == "Other (please specify)") {
        $(this).parent().parent().find("input.hidden").show();
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-02T14:43:50.910

[这个网站可能会有所帮助！](http://vanilla-js.com/)

但这里是一步一步的转换：

```
var selects = document.getElementsByTagName('select');
for (var i=0; i<selects.length; i++) {
   selects[i].onchange = function() {
    if( this.value == "Other (please specify)") {
        var elements = this.parentNode.parentNode.getElementsByTagName("input");
        for (var j=0; j<elements.length; j++) {
           if( !elements[j].className.match(/\bhidden\b/)) continue;
           elements[j].style.display = ''; // the exact thing to do here would depend on your previous actions 
        }
    }
   }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-02T14:50:01.247

`$('select')`- 使用[`document.getElementsByTagName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)，然后循环返回的列表

`.change(function() {…}`- 查看浏览器差异的[高级事件注册模型](http://www.quirksmode.org/js/events_advanced.html)

`$(this).val()`- 简单`this.value`; 即使在 jQuery 中你也应该使用它

`$(this).parent().parent()`- 获取[`parentNode`](https://developer.mozilla.org/en-US/docs/DOM/Node.parentNode)元素的（两次）

`.find("input.hidden")`- 这有点难。您可以使用[[](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelectorAll) []](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelectorAll)，但这在旧版浏览器中不起作用。jQuery 用它的跨浏览器选择器引擎添加了很多糖。您可能会使用另一种方式来获取跨浏览器工作的输入元素；您可以尝试[javascript document.getElementsByClassName 与 IE 的兼容性](https://stackoverflow.com/q/7410949/1048572)。[`.querySelector`](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelector)[`All`](https://developer.mozilla.org/en-US/docs/DOM/Element.querySelectorAll)

`.show()`- 只需删除[`display:none;`](https://developer.mozilla.org/en-US/docs/CSS/display)via [`el.style.display = "";`](https://developer.mozilla.org/en-US/docs/DOM/element.style)。顺便说一句，您可能只想[删除](https://developer.mozilla.org/en-US/docs/DOM/element.classList)该类`hidden`而不是用内联样式覆盖它:-)

适用于 W3 兼容浏览器的真正香草：

```
[].each.call(document.getElementsByTagName('select'), function(select) {
    select.addEventListener("change", function(e) {
        if (this.value == "Other (please specify)") {
            var inputs = this.parentNode.parentNode.querySelectorAll("input.hidden");
            for (var i=0; i<inputs.length; i++)
                inputs[i].classList.remove("hidden");
        }
    }, false);
}); 
```

这也应该适用于旧版浏览器：

```
(function(selects, handler) {
    if (document.addEventListener)
        for (var i=0; i<selects.length; i++)
            selects[i].addEventListener("change", handler, false);
    else
        for (var i=0; i<selects.length; i++)
            selects[i].attachEvent("onchange", handler);
})(document.getElementsByTagName('select'), function() {
    if (this.value == "Other (please specify)") {
        var inputs = this.parentNode.parentNode.getElementsByTagName("input");
        for (var i=0; i<inputs.length; i++)
            if (/\bhidden\b/.test(inputs[i].className))
                inputs[i].style.display = "";
    }
}); 
```

# sql-server - 多参数调用存储过程

> ID：12692484
> 
> 赞同：-4
> 
> 时间：2012-10-02T14:40:16.963
> 
> 标签：sql-server, stored-procedures

> **可能重复：**
> [带参数的 C# 存储过程](https://stackoverflow.com/questions/6201734/c-sharp-stored-procedure-with-parameters)

我试图从传递多个参数的 c# 调用存储过程，但无法使其正常工作。这是我到目前为止所拥有的。

```
cmd = new SqlCommand();
cmd = dbConn.CreateCommand();
cmd.CommandText = "inserttoTable @size = " + size + ", @brand = " + brand + ", @manu = " + manu + ", @t= " + id.ToString();
cmd.ExecuteNonQuery(); 
```

尺寸、品牌和manu 都是字符串。inserttoTable 是存储过程。

我收到以下错误：`System.Data.SqlClient.SqlException: Incorrect syntax near the keyword 'TO'.`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:27:30.997

如果您使用参数并将命令类型更改为存储过程，您会遇到更少的问题：

```
cmd = new SqlCommand();
cmd = dbConn.CreateCommand();
cmd.CommandText = "inserttoTable";
cmd.CommandType = System.Data.CommandType.StoredProcedure;

cmd.Parameters.Add(new SqlParameter("@size", size));
cmd.Parameters.Add(new SqlParameter("@brand", brand));
cmd.Parameters.Add(new SqlParameter("@manu", manu));
cmd.Parameters.Add(new SqlParameter("@t", id.ToString()));

cmd.ExecuteNonQuery(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:42:56.657

看看这个：

[SqlCommand.Parameters 属性](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.parameters.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:38:20.887

虽然这不是调用存储过程的最佳方法，但如果在字符串参数周围添加单引号，应该没问题。

```
cmd = new SqlCommand(); 
cmd = dbConn.CreateCommand(); 
cmd.CommandText = "inserttoTable @size = '" + size + "', @brand = '" + brand + "', @manu = '" + manu + "', @t= '" + id.ToString() + "'"; 
cmd.ExecuteNonQuery(); 
```

这段代码非常过时，10 年前就已经被弃用了。

# rubygems - Compass 和 Sass 入门

> ID：12692486
> 
> 赞同：2
> 
> 时间：2012-10-02T14:40:20.707
> 
> 标签：rubygems, sass, compass-sass

我正在设置我的 MBP 以开始深入 Compass 和 Sass 开发，但我遇到了一些小问题。我遇到的问题之一是某些 gem 无法正确安装。我已经安装了 susy、sass 和 compass，然后我去安装 oily_gem 并得到以下错误：

> 构建原生扩展。这可能需要一段时间... 错误：安装 oily_png 时出错：错误：无法构建 gem 原生扩展。
> 
> ```
>  /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/bin/ruby extconf.rb 
> ```
> 
> mkmf.rb 在 /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/ruby/ruby.h 找不到 ruby​​ 的头文件
> 
> Gem 文件将继续安装在 /Library/Ruby/Gems/1.8/gems/oily_png-1.0.2 以供检查。结果记录到 /Library/Ruby/Gems/1.8/gems/oily_png-1.0.2/ext/oily_png/gem_make.out

Compass 和 Sass 工作得很好，但有一些宝石我得到了同样的错误。关于为什么会发生这种情况的任何想法？我在某个地方错过了一步吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:56:45.627

你有没有尝试过：

```
sudo gem install oily_png 
```

在终端？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T00:26:09.680

看起来您缺少 ruby​​ 的标头包。我不知道您系统中软件包的名称，但在我的系统中，例如，我需要拥有`ruby1.8-dev`或`ruby-dev`安装才能安装一些 gem（注意*-dev*后缀。）

# c++ - 如何检查firebreath插件中的内存泄漏

> ID：12692491
> 
> 赞同：1
> 
> 时间：2012-10-02T14:40:28.263
> 
> 标签：c++, firebreath

当我关闭浏览器（iexplore.exe *32）时，我在任务管理器中看到它的僵尸。我怀疑内存泄漏或其他错误的 deinit 会阻止浏览器关闭。我如何调试和跟踪这些泄漏？我在 Windows 上使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T22:39:15.237

它不会是这样的内存泄漏，尽管如果有什么东西让它活着，它*也可能导致内存泄漏。*

首先尝试将调试器附加到进程，看看它们中的任何一个是否确实加载了您的插件。如果是这样，看看他们是否被锁定在任何东西上。（查看不同的线程，查看模块选项卡并查看加载的内容等）。

# ajax - Drupal AJAX 替换

> ID：12692492
> 
> 赞同：0
> 
> 时间：2012-10-02T14:40:31.633
> 
> 标签：ajax, drupal, replace

我正在创建一个自定义用户设置页面。我有一个字段： zip_code 从自定义用户字段中获取初始值。我有一个自定义函数，它使用 zip_code 的值提取外部数据。

我目前将该字段的默认值设置为自定义用户字段（如果可用）。这是按设计工作的；但是，我想让用户能够通过 Ajax 回调更改他们的邮政编码。这将用新的单选按钮替换已经填充的单选按钮。我似乎无法解决这个问题。这是我的代码：

```
 function settings_shopping_form($form, &$form_state) {
  include_once "external.inc";
  // Get user fields
  global $user;
  $user_fields = user_load($user->uid);
  $zipcode = $user_fields->zip_code['und']['0']['value'];
  if(isset($zipcode)) {
   $form['zip_code'] = array(
   '#title' => t('Zip Code'),
   '#type' => 'textfield',
   '#required' => TRUE,
   '#default_value' => $zipcode,
   '#ajax' => array(
    'callback' => 'settings_form_callback',
    'wrapper' => 'textfields',
   ),
);
 $storename = getmystorename($zipcode);
 if(count($storename) > 0) {
  $form['textfields'] = array( 
   '#prefix' => '<div id="textfields">',
   '#suffix' => '</div>',
   '#type' => 'fieldset' );
  $form['textfields']['stores'] = array(
   '#type' => 'radios',
   '#title' => t('Choose your store:'),
   '#options' => $storename,
   '#default_value' => $storename[1], );
  } else {
    $form['textfields']['incorrect'] = array(
   '#title' => t('Sorry, there are no stores available near you. Check back later'),
   '#type' => 'fieldset', );
}
} 
```

我的回调函数很简单：

```
 function settings_form_callback($form, $form_state) {
   return $form['textfields'];
 } 
```

重申一下：我想添加在更改 zip_code 字段时用 getmystorename 函数生成的新按钮替换填充单选按钮的功能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:45:36.393

我最终从示例模块中举了一个例子（喜欢它！）：

```
$defaults = !empty($form_state['values']['zip_code']) ? $form_state['values']['zip_code'] : $zipcode;
$storename = getmystorename($defaults); 
```

我将它放在表单开始之前，以便在表单构建器之前加载值。

# html - Safari 6 中 HTML5 窗口嵌入语句的问题

> ID：12692496
> 
> 赞同：3
> 
> 时间：2012-10-02T14:40:50.770
> 
> 标签：html, safari, html5-video, safari6

问题是在 HTML 嵌入语句中显示的视频具有百分比高度和宽度，用于缩放到它所属的窗口/框架。随着最近对 Safari (V6?) 的更改，这些视频现在被限制在一个 1" x 1" 的小盒子中，无论屏幕大小如何。我正在寻找更多最新的 HTML(5?) 代码来恢复以前的行为。

谢谢

# jquery - 为什么绑定和取消绑定不能按预期工作

> ID：12692497
> 
> 赞同：0
> 
> 时间：2012-10-02T14:40:51.257
> 
> 标签：jquery

我最初是这样做的：

```
$('div.ocontainer').each(function() {
    var o = $(this);
    var newCode = $(this).attr('id');
    if (o.parents('.ocontainer').length != 0) {
        var oldCode = o.parents('.ocontainer').attr('id');
        console.log('unbinding '+oldCode);
        $('#'+oldCode+' a').each(function() {
            $(this).unbind('click')
            })
    }
    console.log('binding '+newCode);
    $('#'+newCode+' a').each(function() {
        $(this).click(function() {
            decideStMethod(newCode);
        })
    })
}) 
```

...但`unbind`没有工作。我最终在 click 函数中传递了原始代码。所以我改为使用名称间隔事件：

```
$('div.ocontainer').each(function() {
    var o = $(this);
    var newCode = $(this).attr('id');
    if (o.parents('.ocontainer').length != 0) {
        var oldCode = o.parents('.ocontainer').attr('id');
        console.log('unbinding '+oldCode);
        $('#'+oldCode+' a').each(function() {
            $(this).unbind('click.'+oldCode)
            })
    }
    console.log('binding click.'+newCode);
    $('#'+newCode+' a').each(function() {
        $(this).bind('click.'+newCode,function() {
            decideStMethod(newCode);
        })
    })
}) 
```

...现在是`unbind`作品，但后来`bind`没有。但是请注意，执行`bind`DOES 的行如果不是后续行，即如果它前面没有`unbind`.

这样做的用途是首先处理页面的一个区域，然后在其中的链接上完成绑定。然后，处理子区域，如果其中一个有自己的代码，则该区域的处理程序必须解除绑定并替换为子区域的处理程序。所有这一切的原因是子区域是动态放置在区域中的，因此永远不会事先知道它们将是什么。哦，以防万一，这是 jQuery 1.72

所以：

```
<div id="region" class="ocontainer">
   <div id="subregion" class="ocontainer">
      <a> 
```

在区域的处理上，链接绑定到click.region和一个传递'region'的函数。然后，click.region 应该是未绑定的，它是，并且 click.subregion 绑定在它的位置，并使用传递“subregion”的函数，这不会发生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:56:34.780

第一件事是第一，`bind()`并且`unbind()`是不推荐使用的功能。使用`.on()`and`.off()`代替。

这是一个也有一些改进的例子。

```
$('div.ocontainer').each(function() {
    var o = $(this);
    var newCode = o.attr('id'); //Use cached version instead
    if (o.parents('.ocontainer').length != 0) {
        var oldCode = o.parents('.ocontainer').attr('id');
        console.log('unbinding '+oldCode);
        $('#'+oldCode+' a').each(function() {
            o.off('click', "#"+oldCode); //Turn off the event handler
        })
    }
    console.log('binding click.'+newCode);
    $('#'+newCode+' a').each(function() {
        $(this).on('click', "#" + newCode, function() {
            decideStMethod(newCode);
        })
    })
}) 
```

# javascript - 可以设置重点谷歌地图标记的样式吗？

> ID：12692498
> 
> 赞同：1
> 
> 时间：2012-10-02T14:40:51.297
> 
> 标签：javascript, css, google-maps, accessibility, google-maps-markers

我有这个[表格，您可以在其中输入位置](http://fiddle.jshell.net/NXhP4/)，（如果谷歌可以找到它）在地图上显示为标记。基本上我有一个谷歌地图，在表格中嵌入了一个标记；地图被输入字段包围。

当您浏览表单字段时，地图中的某个点上的元素将被聚焦。可聚焦元素之一是`area`在`map`标记图像上使用的。在 Chrome 22 和 Firefox 15 上，我看不到区域的任何默认焦点样式。这让我很恼火，所以我尝试添加一些样式。即使没有`:focus`这个也**行不通**：

```
area { outline: 2px solid red; } 
```

有没有办法设置专注于谷歌地图标记的样式？

* * *

**编辑**：由于样式区域不起作用，我尝试查看是否可以将焦点事件侦听器绑定到这些区域。Google Api 中没有可用于[标记的焦点事件。](https://developers.google.com/maps/documentation/javascript/reference#Marker)所以，这是一个死胡同。

当您尝试在区域上添加侦听器时（不使用 Google Api），您将遇到标记未同步放置且 Google Api 中没有可用回调的问题。

您可以设置 a[`setInterval`](https://developer.mozilla.org/en-US/docs/DOM/window.setInterval)以将焦点侦听器添加到新区域，但我不太喜欢该解决方案。

有没有人有任何其他想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T15:38:33.870

现在我会说：**不**。

Google API 不支持 CSS，也不支持例如更改焦点上的标记图标（因为标记没有焦点事件）。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-02T14:43:13.893

地图存在于 iframe 中，因此我认为不会受到外部 css 的影响。

# excel - Excel，WorkSheet_Change 给出未定义的子或函数

> ID：12692509
> 
> 赞同：1
> 
> 时间：2012-10-02T14:41:19.497
> 
> 标签：excel, vba, ms-office

我正在尝试创建一些代码来在另一个单元格更改时重置一个单元格。有三个下拉单元格，每个单元格都依赖于它之前的单元格（B3 依赖于 B2，B4 依赖于 B3 和 B2）。

因此，如果有人设置 B4，然后更改 B2，则会出现无效组合。所以，如果上面的单元格值被改变，它会强制下面的单元格为默认值（如果B1为值2时B4只能为值3，那么如果将B1更改为值1，则B4被强制为值1）

我现在使用的代码是这样的：

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Not Intersect(Target, Target.Worksheet.Range("B2")) Is Nothing Then
    If Sheet("Talent Sheet").Range("B2") = Human Then
        Sheet("Talent Sheet").Range("B3") = Warrior
        Sheet("Talent Sheet").Range("B4") = "Human Noble"
    Else
        If Sheet("Talent Sheet").Range("B2") = Elf Then
            Sheet("Talent Sheet").Range("B3") = Warrior
            Sheet("Talent Sheet").Range("B4") = "City Elf"
        Else
            If Sheet("Talent Sheet").Range("B2") = Dwarf Then
                Sheet("Talent Sheet").Range("B3") = Warrior
                Sheet("Talent Sheet").Range("B4") = "Dwarf Commoner"
            End If
        End If
    End If 
```

这将在 B2 更改时强制 B3 和 B4 为其默认值，但我收到编译错误“未定义子或函数”

老实说，我不知道是什么原因造成的。M$ help 说这是因为 sub 过程拼写错误，但我复制了其中的一些代码，并根据很多来源进行了检查。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T15:13:37.797

您正在使用`Sheet`而不是`Sheets`.

通过使用`Sheet`编辑器认为您正在寻找一个名为的新函数`Sheet`并且在任何地方都找不到它定义（因为它不是 VBA 定义的函数），因此它给出了该错误。

此外，您可能会想要使用`"`around `human`，`Dwarf`此外，除非在某处定义了这些，否则

最后，我**强烈**建议`Option Explicit`您在每个模块的顶部使用，因为这将有助于防止许多此类错误（例如`Human` `Dwarf`文本不在 中`"`）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T20:47:08.967

除了 enderland 涵盖的内容之外的三件事。

1.  您不需要工作表名称。据了解，代码要在当前工作表上运行

2.  每当您与`Worksheet_Change`事件时。如果要将数据写入单元格，请始终关闭事件。这是必需的，以便代码不会进入可能的无限循环

3.  每当您关闭事件时，请使用错误处理，否则如果您遇到错误，代码将不会在下次运行。

这是一个例子

```
Option Explicit

Private Sub Worksheet_Change(ByVal Target As Range)
    On Error GoTo Whoa

    Application.EnableEvents = False

    '
    '~~> Rest of the code
    '

LetsContinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume LetsContinue
End Sub 
```

# tree - 使用 scheme 建树并打印 in_order 遍历的节点

> ID：12692510
> 
> 赞同：2
> 
> 时间：2012-10-02T14:41:19.590
> 
> 标签：tree, scheme, binary-tree, racket, mit-scheme

我了解算法，但无法使用方案使代码工作。我正在构建一个二叉搜索树。一个节点是一对（键值）。在java中，代码工作正常：

```
public void inOrder(BinaryNode n) {
    if (n != null) {
        inOrder(n.left);
        System.out.println(n.value);
        inOrder(n.right);
    }
} 
```

在方案中，我的起始代码如下：

```
(define empty ())

(define empty? null?)

(define (node_key tn) (list-ref tn 0))

(define (node_val tn) (list-ref tn 1))

(define (node_left tn) (list-ref tn 2))

(define (node_right tn) (list-ref tn 3))

(define (tree-node key value left right) (list key value left right))

(define (get-key tn) (node_key tn))

(define (get-val tn) (node_val tn))

(define (get-left tn) (node_left tn))

(define (get-right tn) (node_right tn))

(define (get-pair tn) (list (get-key tn) (get-val tn)))

(define (atom? tn) (and (empty? (get-left tn)) (empty? (get-right tn))))

(define (printInOrder  t)
  (if (not (empty? t))       
      (begin
        (printInOrder (get-left t))
        (get-pair t)
        (printInOrder (get-right t))
        )
      )
  ) 
```

但是，如果我们测试 printInOrder：

```
(define a (tree-node 3 30 empty empty))

(define b (tree-node 1 10 empty empty))

(define c (tree-node 2 20 b a))

(printInOrder  c) 
```

它应该打印：

```
1 10
2 20
3 30 
```

但它不起作用，什么也不打印。

有人可以帮忙解决这个问题吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:31:47.920

您编写的代码大致相当于：

```
public void inOrder(BinaryNode n) {
    if (n != null) {
        preOrder(n.left);
        n.value;
        preOrder(n.left);
    }
} 
```

（...除了 Java 可能会将裸*n.value*视为语法错误，因为它没有被用于任何有趣的事情。）

除非它们的值达到顶层，否则表达式不会自动打印出它们的值。否则，您必须明确打印这些值。您可以使用*display*和*newline*来获得*System.out.println*的效果。如果您使用的是 Racket，您还可以使用[printf](http://docs.racket-lang.org/reference/Writing.html#%28def._%28%28quote._~23~25kernel%29._printf%29%29)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T22:08:55.807

Alan，对于一个 java 编码器，你在你的顶级环境中乱扔了许多功能。考虑这样的节点对象：

```
 (define make-node
      (lambda (key value)
        (let ((left '()) (right '()))
          (lambda (m)
            (cond
              ((eq? m 'key) key)
              ((eq? m 'value) value)
              ((eq? m 'left) left)
              ((eq? m 'right) right)
              ((eq? m 'set-left) (lambda (x) (set! left x)))
              ((eq? m 'set-right) (lambda (x) (set! right x)))
              (else (error "Error (make-node): unknown op " m)) ))))) 
```

当然，你需要比这更多的东西来制作一棵成熟的树。你想要一个至少有一个插入方法的列表对象（手动执行它，就像你正在做的那样，意味着你可能会不小心将错误的节点放入树中任何点的“左”或“右”）。我还将向树对象添加一个按顺序列出的方法，返回一个键-> 值对列表，然后您可以对列表执行任何操作（包括显示它）。

我并不是说这是构建树的最佳方法，但它更清洁。

# regex - 匹配除值列表之外的任何值 - oracle regex

> ID：12692515
> 
> 赞同：4
> 
> 时间：2012-10-02T14:41:37.517
> 
> 标签：regex, oracle

我需要一个 Oracle 正则表达式，它将匹配格式中的文件名`ABCD_EFG_YYYYMMDD_HH(24)MISS.csv`，*除非*时间部分是三个特定值之一：`110000`、`140000`或`180000`.

因此，例如，它将匹配 file-name `ABC_DEF_20120925_110001.csv`，但不是 file-name `ABCD_EFG_20120925_110000.csv`。

以下非 Oracle 正则表达式有效：

```
^ABCD_EFG_[0-9]*_(?!110000|140000|180000)[0-9]*\.csv$ 
```

但我不知道如何将其编写为 Oracle 正则表达式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:51:43.113

Oracle 不支持前瞻断言，因此您必须拼出所有有效匹配项：

```
^ABCD_EFG_[0-9]*_([02-9]|1[0235679]|1[148]0{0,3}[1-9])[0-9]*\.csv$ 
```

应该可以工作（假设时间部分总是 6 位数长）。

**解释：**

```
ABCD_EFG_    # Match ABCD_EFG_
[0-9]*_      # Match first number (date part) and _
(            # Match a number that starts with
 [02-9]      # 0 or 2-9
|            # or
 1[0235679]  # 1, followed by 2,3,5,6,7, or 9
|            # or
 1[148]      # 11, 14, or 18
 0{0,3}      # followed by up to three zeroes
 [1-9]       # but then one digit 1-9
)            # End of alternation
[0-9]*       # Fill the rest with any digits
\.csv        # Match .csv (mind the backslash!) 
```

# css - CSS：如何使段落中的连续行越过具有高度的左浮动图像

> ID：12692518
> 
> 赞同：0
> 
> 时间：2012-10-02T14:41:43.857
> 
> 标签：css, image, css-float

我有一个浮动的图像在图像的左侧，图像周围有文字。

我想将第一行文本放在图像旁边，然后将连续的文本行放在图像上。那可能吗？

查看这些图像以了解我想要实现的目标：

![问题](../Images/1eff262e4e15ca3dab96e0ee58df8e94.png)

红色方块是图像。

```
<img class="someImage" ... />
<span class="someText" ... />

.someImage { float:left; }
.someText { line-height:1.5em; margin-top:10px; padding:0 22px; } 
```

图像具有高度。我想将文本行（在段落的第一行之后）包裹在图像的顶部。我只希望第一行环绕图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:49:09.807

在调查之后，我认为 text-indent 正是你正在寻找的。 [http://www.w3schools.com/cssref/pr_text_text-indent.asp](http://www.w3schools.com/cssref/pr_text_text-indent.asp)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:50:33.153

您可以使用带有`text-indent`背景图像的解决方法。**[演示](http://jsfiddle.net/gionaf/mFQEC/)**。

HTML

```
<div id="text">
Lorem ipsum dolor sit amet...
</div>​ 
```

CSS

```
#text {
    background:url(your-image.jpg) top left no-repeat;
    text-indent:100px;
    padding-left:20px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T14:51:25.023

如果您使用浮动进行定位，则很难实现这一点，因为浮动不会破坏定位的常规流程。改用绝对定位和 z-index 属性进行叠加。然后使用左边距或 text-indent 属性缩进第一行。

如果您将图像放在背景中，您可以更轻松地完成此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T15:01:20.383

[您可以使用 ...wait for it ...选择器](http://www.w3schools.com/cssref/sel_firstline.asp)获得对第一行的更多控制`first-line`

`p:first-line {padding-left:50px;}`

# mysql - rs 报告 MySQL 的设计参数化查询

> ID：12692525
> 
> 赞同：0
> 
> 时间：2012-10-02T14:42:15.963
> 
> 标签：mysql, reporting-services, parameters, report

我有一个带有 Visual Studio 报表服务器的 Mysql DB 报表，并且在报表服务器中正确显示。

但我想做一个参数化查询，在阅读和搜索之后，我知道 obdc 驱动程序不能通过@，我必须使用“？” 但是在尝试了很多之后，我无法弄清楚如何实施。

我有一个@parameter，它使用一个 secodn 数据集来查询数据库中的用户名

我的主数据集带有 where （`user`='？'），在数据集参数选项卡中，我尝试使用用户的选择查询放置一个表达式，并尝试使用实际参数。

我有点迷失在这里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T19:41:10.247

在我的情况下得到它......，使用

> 哪里（`usernames`=？）

在查询和数据集的参数选项卡中，使用 Parameter1 作为名称，并在值中将其与参数中创建的参数匹配

![在此处输入图像描述](../Images/a9199c3fc12fc033682873736154fd1d.png)

# postgresql - 在 PostgreSQL 中创建用户的触发器

> ID：12692530
> 
> 赞同：1
> 
> 时间：2012-10-02T14:42:34.580
> 
> 标签：postgresql, triggers

好吧，在 systemuser 中插入一个用户后，我喜欢使用新用户的密码为 PostgreSQL 创建一个角色。但是当我尝试创建用户时，会出现此错误：

> Blockquote ERROR：在“NEW”第 24 行或附近出现语法错误：ALTER USER NEW.login ENCRYPTED PASSWORD NEW.password...

```
CREATE OR REPLACE FUNCTION trg_insertuser() 
RETURNS TRIGGER AS $trg_insertuser$
DECLARE
BEGIN
    IF (TG_OP = 'DELETE') THEN
        DROP USER OLD.login;
    ELSIF (TG_OP = 'UPDATE') THEN
        ALTER USER OLD.login ENCRYPTED PASSWORD NEW.password;
    ELSIF (TG_OP = 'INSERT') THEN       
        CREATE USER NEW.login ENCRYPTED PASSWORD NEW.password CREATEDB IN GROUP group_user;
    END IF;
    RETURN NULL;
END;
$trg_insertuser$ LANGUAGE plpgsql; 
```

发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:47:38.140

使用`execute`.

```
execute 'drop user ' || quote_ident(OLD.login); 
```

ETC...

# excel - 用空格（或任何字符）将文本单元格拆分为任意数量的单词，重复单词

> ID：12692536
> 
> 赞同：0
> 
> 时间：2012-10-02T14:42:47.653
> 
> 标签：excel, split

我有一个 Excel 文件，其中有一列中有一些文本，我需要用新短语替换一些单词，但保留原始文本的某些部分。为了让我的用户保持简单，我想允许按原始单词进行过滤，这意味着我需要每个单词一列。Excel“文本到列”功能可能会有所帮助，但我没有打扰它，因为我听说您需要指定数字列。

长话短说，这就是我想出的：

* * *

源单元格 = A2

第一个单词的列：B2

第二个单词的列：C2

* * *

A2：这是一些示例文本

B2: =IFERROR(LEFT(A2, FIND(" ", A2)), "")

C2: =IFERROR(LEFT(SUBSTITUTE(MID($A2, FIND(B2, $A2), LEN($A2) - FIND(B2, $A2)), B2, ""), FIND(" ", SUBSTITUTE( MID($A2, FIND(B2, $A2), LEN($A2) - FIND(B2, $A2)), B2, ""))), "")

D2：*从 C2 开始填充*

...

* * *

C2 中的这些乱七八糟的东西基本上是根据前一个单元格中的单词来分割源单元格（A2）。因此，B2 正在寻找它看到的第一个空格，并将字符串的其余部分扔掉，只留下单词“This”。C2 正在查看 B2，并从 A2 的值中删除它看到的单词并寻找下一个空格。D2 会查看 C2，依此类推。不幸的是，当有一个重复的单词时，这就会崩溃。

如果我们将 A2 中的示例文本更改为“This is some example text, is it a question”（重复“is”），它会卡住重复单词“is”、“some”、“example”、“text, " 一遍又一遍地填充正确。

对于我目前的任务，我真的不需要答案，但我希望有一个完整的解决方案来解决这种情况，因为在任何地方都没有找到好的解决方案。

希望这对某人有帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:07:55.883

这是使用一些看起来不那么难看的 VBA 的可能性：

```
Sub splitCell(source As Range, delimiter As String, target As Range)
    'Takes value of source range and splits it by the delimiter horizontally
    'starting at the target range.
    Dim text() As String
    text = Split(source.Value, delimiter)
    For x = LBound(text) To UBound(text)
        target.Offset(0, x).Value = text(x)
    Next
End Sub

'Sample Call
Sub Test()
    With ThisWorkbook.Sheets(1)
        splitCell .Range("A2"), " ", .Range("B2")
    End With
End Sub 
```

# java - 如何使用 maven 将兄弟模块中的类包含在 jar 中？

> ID：12692537
> 
> 赞同：3
> 
> 时间：2012-10-02T14:42:46.933
> 
> 标签：java, maven, jar, dependencies, war

我有一个带有父模块和两个子模块的 Maven 项目：`Service`和`API`. 该`Service`模块是一个 WAR 并包含项目的所有源文件，而该`API`模块的存在纯粹是为了构建一个包含来自 Service 模块的类子集的 jar，并将该 jar 部署到本地 maven 存储库。

我已经尝试了`maven-dependency-plugin`和 的组合`maven-assembly-plugin`来复制`Service`战争并将其包含在已部署的`API`JAR 中，但我正在努力寻找一种方法来从服务模块中提取一组特定的类，而不是在整个胖战争。

来自`API`pom.xml：

```
<plugins>
  <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-dependency-plugin</artifactId>
    <executions>
      <execution>
        <id>copy-dependencies</id>
        <phase>package</phase>
        <goals>
          <goal>copy-dependencies</goal>
        </goals>
        <configuration>
          <excludeGroupIds>...</excludeGroupIds>
          <outputDirectory>${project.build.directory}/lib</outputDirectory>
        </configuration>
      </execution>
    </executions>
  </plugin>
  <plugin>
    <artifactId>maven-assembly-plugin</artifactId>
    <executions>
      <execution>
        <goals>
          <goal>single</goal>
        </goals>
        <phase>package</phase>
      </execution>
    </executions>
    <configuration>
      <descriptors>
        <descriptor>assembly.xml</descriptor>
      </descriptors>
    </configuration>
  </plugin>
</plugins> 
```

我曾考虑过使用`maven-jar-plugin`来自`Service`模块的 pom 来构建苗条的 JAR，但这似乎是一种不好的做法。建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:47:01.827

我建议您的`API`项目实际上包含您要部署的类，并且`Service`模块依赖于它。如果你想模块化你的项目（你应该这样做），按照 Maven 想要的方式去做，而不是试图破解单个代码库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:13:00.333

您应该从 中取出实现细节`war`并将其放入单独的模块中。

```
.
├── pom.xml
├── 服务-api
| ├── pom.xml
| └── 源
| └── 主要
| └── java
| └── com
| └── 堆栈溢出
| └── SomeDao.java
├── 服务实现
| ├── pom.xml
| └── 源
| └── 主要
| └── java
| └── com
| └── 堆栈溢出
| └── SomeDaoImpl.java
└── 服务网
    ├── pom.xml
    └── 源
        └── 主要
            └── 网页应用
                └── WEB-INF
                    └── web.xml

```

让`service-impl`依赖`service-api`。并且`service-web`将取决于`service-impl`.

# objective-c - iOS - 未调用滚动视图/分页委托/数据源

> ID：12692541
> 
> 赞同：0
> 
> 时间：2012-10-02T14:42:56.713
> 
> 标签：objective-c, ios, delegates, datasource, paging

我正在使用 UIScrollView 进行分页，我注意到我分页的后续视图都没有调用它们的数据源/委托。我将它作为数据源/委托连接到他们的 XIB 中，并在代码中以这种方式设置它，但它仍然没有被调用。

我猜问题出在这里......我在哪里进行分页并插入第二和第三个视图。委托/数据源都不能处理被分页的第二个或第三个视图。

```
requestDetailTwoViewController *controller = [viewControllers objectAtIndex:1];

requestDetailThreeViewController *controller2 = [viewControllers objectAtIndex:2];
if ((NSNull *)controller == [NSNull null])
{
    if(page == 1)
    {

        controller = [[requestDetailTwoViewController alloc] initWithRequestNumber:[request objectForKey:@"RequestID"] forID:self.employeeIDfromHome];
        [viewControllers replaceObjectAtIndex:page withObject:controller];
        CGRect frame = scrollView.frame;
        frame.origin.x = frame.size.width * 1;
        frame.origin.y = 0;
        controller.view.frame = frame;
        [scrollView addSubview:controller.view];
    }
}

if ((NSNull *)controller2 == [NSNull null])
{
    if(page == 2)
    {
        controller2 = [[requestDetailThreeViewController alloc] initWithRequestNumber:[request objectForKey:@"RequestID"]];
        [viewControllers replaceObjectAtIndex:page withObject:controller2];
        [self addChildViewController:controller2];
        CGRect frame = scrollView.frame;
        frame.origin.x = frame.size.width * 2;
        frame.origin.y = 0;
        controller2.view.frame = frame;
        [scrollView addSubview:controller2.view];
        [controller2 didMoveToParentViewController:self];
    }

} 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:59:54.993

在您的班级中，您是否为协议设置了提示，例如

```
@interface myClass : UIViewController <UIScrollViewDelegate> {
... 
```

后来，在你的`viewDidLoad`：

```
self.myScrollView.delegate = self; 
```

# json - WCF：如何（json）映射有时是数组，有时是单个对象的 DataMember？

> ID：12692544
> 
> 赞同：1
> 
> 时间：2012-10-02T14:43:04.717
> 
> 标签：json, wcf, deserialization, enumerable, single-instance

在写这个问题的标题时，我碰巧看到了[这个答案](https://stackoverflow.com/questions/5224697/deserializing-json-when-sometimes-array-and-sometimes-object)。但是我正在寻找一种在 WCF 客户端中执行此操作的方法。有没有办法将 JSON.Net 插入 WCF 客户端？

雅虎！几天前刚刚更改了[PlaceFinder](http://developer.yahoo.com/geo/placefinder/)服务。一个变化是响应不再包含`Results`节点，而是现在包含`Result`节点。另一个变化是有时此节点包含结果对象数组（当有 2 个或更多结果时），有时它包含单个结果对象（当只有 1 个结果时）。

有没有办法使用 WCF`DataMemberAttribute`来反序列化这种结构，同时适应这两种情况？

```
[DataContract]
public class PlaceFinderResultSet : IEnumerable<PlaceFinderResult>
{
    // this works for 1 result, but fails when it is an array
    [DataMember(Name = "Result")]
    public PlaceFinderResult Result { get; set; }

    // this works for an array of results, but fails when it is a single
    [DataMember(Name = "Result")]
    public List<PlaceFinderResult> { get; set; }

    // note I do not use these together at the same time, but comment one out
    // at a time. Other members in this class work as expected and are omitted
} 
```

以下是在 Fiddler2 中看到的 2 个示例响应（同样，结果的某些部分被省略了）：

```
JSON (here is a response with 1 result)
|--ResultSet
|--|--Found=1
|--|--Quality=37
|--|--Result
|--|--|city=city name
|--|--|country=country name
|--|--|otherprops=other values

JSON (here is a response with many results)
|--ResultSet
|--|--Found=2
|--|--Quality=40
|--|--Result
|--|--|{}
|--|--|--|city=city name1
|--|--|--|country=country name1
|--|--|--|otherprops=other values1
|--|--|{}
|--|--|--|city=city name2
|--|--|--|country=country name2
|--|--|--|otherprops=other values2 
```

# apache - php to png的htaccess重写规则停止工作

> ID：12692546
> 
> 赞同：1
> 
> 时间：2012-10-02T14:43:15.707
> 
> 标签：apache, mod-rewrite

我已经创建了几个 php 文件，它们可以为用户排名动态构建图像。我在图像目录中包含了一个 htaccess 文件，以将 php 文件转换为 png 文件，以便 phpBB 板允许它们用作等级。直到昨天一切正常。我在 htaccess 文件中使用了以下代码：

```
RewriteEngine On
RewriteRule ^rodeojones.png$ rodeojones.php
RewriteRule ^marine.png$ marine.php
RewriteRule ^treble.png$ treble.php
RewriteRule ^major.png$ major.php
RewriteRule ^hyghway.png$ hyghway.php
RewriteRule ^zypher.png$ zypher.php 
```

等等......现在，突然之间，它不起作用了。我猜这不是最有效的代码，因此它不再工作，但我不确定。这是我在 php 中的第一次冒险，所以我迷失了解决方案。任何帮助将不胜感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-12T14:12:16.843

尝试这样的事情：

```
Options +FollowSymlinks -MultiViews
RewriteEngine on

RewriteRule ^(script)/([^.]*)\.php$ $1/image.png [L] 
```

希望对您有所帮助，但需要找到更具体的场景！

# java - 在春季设置和获取会话绑定属性

> ID：12692551
> 
> 赞同：0
> 
> 时间：2012-10-02T14:43:36.050
> 
> 标签：java, spring, thread-safety, multi-tenant

我在 Spring中遵循了关于[动态数据源路由教程的教程。](http://blog.springsource.com/2007/01/23/dynamic-datasource-routing/)为此，我必须扩展 AbstractRoutingDataSource 以告诉 spring 要获取哪个数据源，所以我这样做：

```
public class CustomRouter extends AbstractRoutingDataSource {

    @Override
    protected Object determineCurrentLookupKey() {
        return CustomerContextHolder.getCustomerType();
    }
} 
```

一切都很好，直到我找到负责保持 customerType 值的类（在整个会话期间它应该是相同的）：

```
 public class CustomerContextHolder {

        private static final ThreadLocal<Integer> contextHolder = new ThreadLocal<Integer>(); 

        public static void setCustomerType(Integer customerType) {
            contextHolder.set(customerType);
        } 
        public static Integer getCustomerType() {
            return (Integer) contextHolder.get();
        }
        public static void clearCustomerType() {
            contextHolder.remove();
        }
    } 
```

这会创建一个线程绑定变量customerType，但是我有一个带有spring 和JSF 的Web 应用程序，我认为不是线程而是会话。所以我用线程**A**（View）在登录页面中设置它，但随后线程**B**（Hibernate）请求该值以知道要使用哪个数据源，`null`确实如此，因为它对该线程有一个新的值。

有没有办法做到会话有界而不是线程有界？

到目前为止我尝试过的事情：

*   在视图中注入 CustomRouter 以在会话中设置它：不工作，它会导致依赖项中的循环
*   用整数替换`ThreadLocal`：不起作用，该值始终由最后登录的用户设置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:47:10.847

`FacesContext.getCurrentInstance()`在工作吗？如果是这样，那么您可以尝试这样做：

```
public class CustomerContextHolder { 

    private static HttpSession getCurrentSession(){
             HttpServletRequest request = (HttpServletRequest)FacesContext.getCurrentInstance()
                 .getExternalContext().getRequest();

             return request.getSession();
    }

    public static void setCustomerType(Integer customerType) {

       CustomerContextHolder.getCurrentSession().setAttribute("userType", customerType);

    }

    public static Integer getCustomerType() {

        return (Integer) CustomerContextHolder.getCurrentSession().getAttribute("userType");
    }

    public static void clearCustomerType() {
        contextHolder.remove(); // You may want to remove the attribute in session, dunno
    }
} 
```

# c# - 如何在gridview中获取复选框值

> ID：12692554
> 
> 赞同：2
> 
> 时间：2012-10-02T14:43:48.420
> 
> 标签：c#, asp.net, gridview, checkbox

你能帮我解决这个问题吗，即使我在gridview中检查控件，我也总是将复选框控件值设为false。

```
for (int i = 0; i < GridView1.Rows.Count; i++)
{
    CheckBox CheckBox1 = (CheckBox)GridView1.Rows[i].FindControl("CheckBox1");

    if (CheckBox1 != null)
    {
        if (CheckBox1.Checked)
        {
            query = GridView1.Rows[i].FindControl("Label1") + ",";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:46:49.307

您是否对 Page_Load 方法进行数据绑定？如果是，您必须这样做：

```
if(!IsPostBack)
{
    GridView1.DataSource = YourData;
} 
```

如果你不这样做，`DataGridView`即使它是一个`PostBack`. 这样，无论您检查什么，`DataGridView`都将从数据源重新填充您的回发。

使用上面的代码，当你这样做时`if(!IsPostBack)`，它会保留复选框的视图状态值，你会得到正确的`Checked`状态。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-04T05:56:35.153

在复选框设计中添加以下属性

> ToolTip="<%#Container.DataItemIndex+1 %> " 然后下面是后面的代码

```
for (int i = 0; i < gdview.Rows.Count; i++)
    {
        string labeldetail = "";

        CheckBox cbox = (CheckBox)gdview.Rows[i].Cells[0].FindControl("CheckBox1");

        if (cbox != null)
        {
            if (cbox.Checked == true)
            {

                int rowsNo = (Convert.ToInt16(city.ToolTip) - 1); //Convert.ToInt16(SrNo);
               labeldetail = ((Label)gdview.Rows[rowsNo].FindControl("labelid")).Value; 
```

}

# command-line - 是否有命令将计算机重新启动到安全模式？

> ID：12692560
> 
> 赞同：28
> 
> 时间：2012-10-02T14:43:56.703
> 
> 标签：command-line, reboot, safe-mode

我想知道是否有可以在命令行中写入的命令来重新启动计算机并使其以安全模式启动？

如果没有这样的命令，还有其他方法吗？

我希望在启动命令后该过程完全自动化。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-10-02T14:49:44.260

我的第一个答案！

这将设置安全模式开关：

```
bcdedit /set {current} safeboot minimal 
```

与网络：

```
bcdedit /set {current} safeboot network 
```

然后重启机器

```
shutdown /r 
```

通过dos恢复正常模式：

```
bcdedit /deletevalue {current} safeboot 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-02T14:50:54.290

在命令提示符下，键入以下命令，然后按 Enter。

```
bcdedit /enum 
```

在 Windows 引导加载程序部分下，记下标识符值。

要从命令提示符以安全模式启动：

```
bcdedit /set {identifier} safeboot minimal 
```

然后输入命令行重新启动计算机。

# visual-studio - 您可以在 Visual Studio 中记录访问的方法吗？

> ID：12692561
> 
> 赞同：0
> 
> 时间：2012-10-02T14:43:57.757
> 
> 标签：visual-studio

我正在为一些 C# 代码追溯记录和编写单元测试。我想确定实际使用了什么代码以及何时使用。

在 Visual Studio 2012 中，有没有办法在遍历特定场景时记录所有访问的方法以及按什么顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:47:00.360

[您可以使用附加的分析器](https://stackoverflow.com/questions/3927/what-are-some-good-net-profilers)运行您的应用程序，它将为您提供所有访问的方法、调用链、计数等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:46:39.180

[Visual Studio Profiler](http://msdn.microsoft.com/en-us/library/z9z62c29.aspx)将为您提供每个方法所花费的时间，并让您检查调用层次结构。我不知道它是否会给你他们被调用的确切顺序。

**编辑：显然**[在 VS2012 中将](https://stackoverflow.com/questions/12027885/how-to-profile-unit-tests-in-visual-studio-2012)探查器附加到正在运行的单元测试更难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:53:24.647

您是否要执行一个测试方法以确保调用了类上的特定方法？如果是这样，我不知道单独在 VS 中执行此操作的方法，但是您可以使用模拟框架来创建依赖模拟并检查它们的值。这是一个单元测试的片段：

```
 [TestMethod]
        public void HttpPostPrivacyPolicyFacadeSvcErrorTest()
        {
            var controller = ControllerHelper.GetRouteController();
            controller.Session[SessionVariable.User] = new UserInfo() { UserName = Config.Data.Username };

            var idmSvcMock = new Mock<IUserServiceDAO>();
            var facadeSvcMock = new Mock<IFacadeSvcDAO>();

            //setup the facade mock to throw exception to simulate FacadeServiceException
            facadeSvcMock.Setup(x => x.SetPrivacyAcceptanceStatus(It.IsAny<UserInfo>())).Throws<Exception>();
            var userCollectorMock = new Mock<IUserInfoCollector>();
            userCollectorMock.Setup(x => x.GetUserInfo()).Returns(new UserInfo() { UserName = Config.Data.Username });

            controller.FacadeSvc = facadeSvcMock.Object;
            controller.UserServiceDAO = idmSvcMock.Object;
            controller.UserCollector = userCollectorMock.Object;
            controller.DefaultErrorId = "Route_errors_Unabletoprocess";

            //action
            var res = controller.Privacy(new FormCollection());

            //assert
            //make sure we go to the right controller, action, with the correct params.
            res.AssertActionRedirect().ToController("Errors").ToAction("Index").WithParameter("id", "Route_errors_Unabletoprocess");
            //did we call setprivacy once on the mock?
            facadeSvcMock.Verify(x => x.SetPrivacyAcceptanceStatus(It.IsAny<UserInfo>()), Times.Exactly(1)); 
```

在上面的测试中，我检查了 SetPrivacyAcceptance 是否在我的 facadeSvcMock 实例上被调用了一次且仅一次。更多关于起订量在这里：起[订量](http://code.google.com/p/moq/)

这段代码实际上是检查 SetPrivacyAcceptanceStatus 被调用了多少次：//我们是否在模拟中调用了一次 setprivacy？facadeSvcMock.Verify(x => x.SetPrivacyAcceptanceStatus(It.IsAny()), Times.Exactly(1));

It.IsAny() 是该方法的一个参数，因此上面的行基本上说“对于 UserInfo 类型的任何输入参数，请验证我们是否只调用了一次 SetPrivacyAcceptanceStatus。”

# jquery - CSS3动画重置

> ID：12692565
> 
> 赞同：10
> 
> 时间：2012-10-02T14:44:10.307
> 
> 标签：jquery, animation, css

我有一个关于 CSS3 的问题。动画完成后是否有重置动画的选项（例如使用 jQuery）？

示例：单击按钮后，动画重置。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T16:57:14.957

我找到了更好的解决方案：

```
$('something').removeClass('anim').animate({'nothing':null}, 1, function () {
$(this).addClass('anim');
}); 
```

它正在工作。Ofc 它需要一个带有动画的 css 类“.anim”。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-13T09:48:34.037

这个问题很老了，但我想出了一个很好的方法来用 jQuery 重新启动一个 css3 动画，而我正在处理一个项目，现在我想分享一下。这是诀窍：

```
$('#anim-div').replaceWith($('#anim-div')); 
```

这将重新启动“#anim-div”上的动画，它可以工作。

# ruby-on-rails - 将 ActiveRecord 对象与数据库表 ID 传递给方法之间哪个更好

> ID：12692566
> 
> 赞同：1
> 
> 时间：2012-10-02T14:44:09.737
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, oop

我有一个 rake 任务，它从数据库（事件模型）中提取状态为“打开”的事件的数据，并通过调用两个不同类中的方法来处理这些事件。第一个根据某些条件对事件进行批处理，另一个是为这些事件批次生成 CSV 并将该 CSV 上传到外部网站的爬虫，然后在爬虫完成执行后更新引用这些批次的每个事件的状态。

有两种方法可以将 Active Record 对象传递给这两个类的方法。

1.  将 ActiveRecord 对象传递给两个类（我当前的实现）
2.  传递对象的数据库表 id 并从每个类中获取。

这些选项中的哪一个对它的*“气味”较少。*我的大脑告诉我，一旦 id 到达另一个类，通过执行另一个数据库查询来传递 id 会降低性能。另一方面，传递带有所有数据的 ActiveRecord 对象似乎是多余的，因为将更新的只是状态。那么哪个选项更好呢？我已经包含了 rake 任务，只是为了清楚地了解我的意思。

```
 desc "Process open Events ..."
  task :process_open_events => :environment do
    open_events = Event.find_all_by_status("Open")
    event_batches = EventUtils::EventProcessor.create_event_batches(open_events)
    crawler = EventsCrawler.create!
    crawler.enqueue_crawler(event_batches)
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T16:04:20.220

在这种情况下，您将读取（并保存在内存中）一个记录列表，然后将它们的 id 映射到一个数组（也保存在内存中），将该数组发送到另一个方法，而不仅仅是重新运行您知道将有的查询相同的结果，但将该初始列表的副本也放入内存中。

在我看来，使用 id 列表在处理时间、内存使用、数据库使用等各个方面的效率都较低。

# jquery - 不拉伸图像的jQuery图像幻灯片

> ID：12692572
> 
> 赞同：0
> 
> 时间：2012-10-02T14:44:42.473
> 
> 标签：jquery, html, image, web, aspect-ratio

我正在寻找一个 jQuery 图像滑块。流行的 Nivo Slider 的问题在于它会拉伸图像以适应滑块的宽度。我正在寻找一个不这样做的滑块。我还希望显示这些图像的最大宽度和最大高度。我不是硬编码高度\宽度，因为我想保留纵横比。

例如：

假设我的滑块位于 1000x500 的 div 和 1500 X 1000 像素的图像中。假设最大高度为 1000，最大宽度为 500，则图像将显示为 750x500 像素的图像。我希望滑块像这样工作，将 div 中的较小图像居中，而不是拉伸我的图像。

有人知道这样的插件吗？向所有这样做的人点赞。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T20:26:38.813

使用 nivo-slider 3，我在 iphone 上解决了这个问题，方法是在封闭的 div 上放置一个固定的高度和宽度并将其标记为溢出：隐藏；

# html - Git with Wordpress - 切换分支时gitignore删除插件？

> ID：12692574
> 
> 赞同：1
> 
> 时间：2012-10-02T14:44:51.673
> 
> 标签：html, wordpress, git

我正在使用 git 来管理一个 Wordpress 项目。在我的`.gitignore`中，我“忽略”`wp/wp-content/plugins`目录以避免将它们作为存储库的一部分。但是，问题是，每次我创建一个新分支，将它合并回master并切换回master，`plugins`目录就消失了！

有谁知道为什么会发生这种情况？

的相关部分`.gitignore`：

```
wp/wp-content/*
!wp/wp-content/plugins/
wp/wp-content/plugins/* 
```

它不应该只在插件目录中留下任何东西吗？

注意：我基于`.gitignore`这个[要点](https://gist.github.com/444295)

# ios - 后台问题中的核心数据保存对象

> ID：12692577
> 
> 赞同：6
> 
> 时间：2012-10-02T14:44:58.413
> 
> 标签：ios, core-data, grand-central-dispatch

简而言之，我正在尝试使用后台队列将从 Web 服务中提取的 JSON 对象保存到 Core Data Sqlite3 数据库。保存发生在我通过 GCD 创建的序列化后台队列上，并保存到为该后台队列创建的 NSManagedObjectContext 的辅助实例中。保存完成后，我需要使用新创建/更新的对象更新主线程上的 NSManagedObjectContext 实例。我遇到的问题是主线程上的 NSManagedObjectContext 实例无法找到保存在后台上下文中的对象。下面是我对代码示例采取的操作列表。对我做错了什么有任何想法吗？

*   通过 GCD 创建一个后台队列，运行所有预处理逻辑，然后在该线程上保存后台上下文：

.

```
// process in the background queue
dispatch_async(backgroundQueue, ^(void){

    if (savedObjectIDs.count > 0) {
        [savedObjectIDs removeAllObjects];
    }
    if (savedObjectClass) {
        savedObjectClass = nil;
    }

    // set the thead name
    NSThread *currentThread = [NSThread currentThread];
    [currentThread setName:VS_CORE_DATA_MANAGER_BACKGROUND_THREAD_NAME];

    // if there is not already a background context, then create one
    if (!_backgroundQueueManagedObjectContext) {
        NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
        if (coordinator != nil) {
            _backgroundQueueManagedObjectContext = [[NSManagedObjectContext alloc] init];
            [_backgroundQueueManagedObjectContext setPersistentStoreCoordinator:coordinator];
        }
    }

    // save the JSON dictionary starting at the upper most level of the key path, and return all created/updated objects in an array
    NSArray *objectIds = [self saveJSON:jsonDict objectMapping:objectMapping class:managedObjectClass managedObjectContext:_backgroundQueueManagedObjectContext level:0];

    // save the object IDs and the completion block to global variables so we can access them after the save
    if (objectIds) {
        [savedObjectIDs addObjectsFromArray:objectIds];
    }
    if (completion) {
        saveCompletionBlock = completion;
    }
    if (managedObjectClass) {
        savedObjectClass = managedObjectClass;
    }

    // save all changes object context
    [self saveManagedObjectContext];
}); 
```

*   “saveManagedObjectContext”方法基本上是查看哪个线程正在运行并保存适当的上下文。我已验证此方法工作正常，因此我不会将代码放在这里。

*   所有这些代码都驻留在单例中，在单例的 init 方法中，我为“NSManagedObjectContextDidSaveNotification”添加了一个侦听器，它调用了 mergeChangesFromContextDidSaveNotification: 方法

.

```
// merge changes from the context did save notification to the main context
- (void)mergeChangesFromContextDidSaveNotification:(NSNotification *)notification
{
    NSThread *currentThread = [NSThread currentThread];

    if ([currentThread.name isEqual:VS_CORE_DATA_MANAGER_BACKGROUND_THREAD_NAME]) {

        // merge changes to the primary context, and wait for the action to complete on the main thread
        [_managedObjectContext performSelectorOnMainThread:@selector(mergeChangesFromContextDidSaveNotification:) withObject:notification waitUntilDone:YES];

        // on the main thread fetch all new data and call the completion block
        dispatch_async(dispatch_get_main_queue(), ^{

            // get objects from the database
            NSMutableArray *objects = [[NSMutableArray alloc] init];
            for (id objectID in savedObjectIDs) {
                NSError *error;
                id object = [_managedObjectContext existingObjectWithID:objectID error:&error];
                if (error) {
                    [self logError:error];
                } else if (object) {
                    [objects addObject:object];
                }
            }

            // remove all saved object IDs from the array
            [savedObjectIDs removeAllObjects];
            savedObjectClass = nil;

            // call the completion block
            //completion(objects);
            saveCompletionBlock(objects);

            // clear the saved completion block
            saveCompletionBlock = nil;
        });
    }
} 
```

正如您在上面的方法中看到的那样，我在主线程上调用“mergeChangesFromContextDidSaveNotification：”，并且我已将操作设置为等到完成。根据苹果文档，后台线程应该等到该操作完成，然后才能继续执行该调用下面的其余代码。正如我上面提到的，一旦我运行此代码，一切似乎都可以正常工作，但是当我尝试将获取的对象打印到控制台时，我什么也得不到。似乎合并实际上并没有发生，或者可能在我的其余代码运行之前没有完成。是否还有其他通知我应该收听以确保合并已完成？或者我是否需要在合并之后但在 fecth 之前保存主对象上下文？

另外，我为错误的代码格式道歉，但似乎 SO 的代码标签不喜欢方法定义。

多谢你们！

更新：

我已经进行了下面推荐的更改，但仍然遇到同样的问题。以下是我拥有的更新代码。

这是调用后台线程保存进程的代码

```
// process in the background queue
dispatch_async(backgroundQueue, ^(void){

    if (savedObjectIDs.count > 0) {
        [savedObjectIDs removeAllObjects];
    }
    if (savedObjectClass) {
        savedObjectClass = nil;
    }

    // set the thead name
    NSThread *currentThread = [NSThread currentThread];
    [currentThread setName:VS_CORE_DATA_MANAGER_BACKGROUND_THREAD_NAME];

    // if there is not already a background context, then create one
    if (!_backgroundQueueManagedObjectContext) {
        NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
        if (coordinator != nil) {
            _backgroundQueueManagedObjectContext = [[NSManagedObjectContext alloc] init];
            [_backgroundQueueManagedObjectContext setPersistentStoreCoordinator:coordinator];
        }
    }

    // save the JSON dictionary starting at the upper most level of the key path
    NSArray *objectIds = [self saveJSON:jsonDict objectMapping:objectMapping class:managedObjectClass managedObjectContext:_backgroundQueueManagedObjectContext level:0];

    // save the object IDs and the completion block to global variables so we can access them after the save
    if (objectIds) {
        [savedObjectIDs addObjectsFromArray:objectIds];
    }
    if (completion) {
        saveCompletionBlock = completion;
    }
    if (managedObjectClass) {
        savedObjectClass = managedObjectClass;
    }

    // listen for the merge changes from context did save notification
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(mergeChangesFromBackground:) name:NSManagedObjectContextDidSaveNotification object:_backgroundQueueManagedObjectContext];

    // save all changes object context
    [self saveManagedObjectContext];
}); 
```

这是 NSManagedObjectContextDidSaveNotification 通知调用的代码

```
 // merge changes from the context did save notification to the main context
- (void)mergeChangesFromBackground:(NSNotification *)notification
{
    // kill the listener
    [[NSNotificationCenter defaultCenter] removeObserver:self name:NSManagedObjectContextDidSaveNotification object:_backgroundQueueManagedObjectContext];

    NSThread *currentThread = [NSThread currentThread];

    // merge changes to the primary context, and wait for the action to complete on the main thread
    [[self managedObjectContext] performSelectorOnMainThread:@selector(mergeChangesFromContextDidSaveNotification:) withObject:notification waitUntilDone:YES];

    // dispatch the completion block
    dispatch_async(dispatch_get_main_queue(), ^{

        // get objects from the database
        NSMutableArray *objects = [[NSMutableArray alloc] init];
        for (id objectID in savedObjectIDs) {
            NSError *error;
            id object = [[self managedObjectContext] existingObjectWithID:objectID error:&error];
            if (error) {
                [self logError:error];
            } else if (object) {
                [objects addObject:object];
            }
        }

        // remove all saved object IDs from the array
        [savedObjectIDs removeAllObjects];
        savedObjectClass = nil;

        // call the completion block
        //completion(objects);
        saveCompletionBlock(objects);

        // clear the saved completion block
        saveCompletionBlock = nil;
    });
} 
```

更新：

所以我找到了解决方案。事实证明，我在后台线程上保存对象 ID，然后尝试在主线程上使用它们重新获取它们的方式并没有奏效。所以我最终从与 NSManagedObjectContextDidSaveNotification 通知一起发送的 userInfo 字典中提取插入/更新的对象。以下是我现在正在运行的更新代码。

和之前一样，这段代码开始预处理和保存逻辑

```
// process in the background queue
dispatch_async(backgroundQueue, ^(void){

    // set the thead name
    NSThread *currentThread = [NSThread currentThread];
    [currentThread setName:VS_CORE_DATA_MANAGER_BACKGROUND_THREAD_NAME];

    [self logMessage:[NSString stringWithFormat:@"(%@) saveJSONObjects:objectMapping:class:completion:", [managedObjectClass description]]];

    // if there is not already a background context, then create one
    if (!_backgroundQueueManagedObjectContext) {
        NSPersistentStoreCoordinator *coordinator = [self persistentStoreCoordinator];
        if (coordinator != nil) {
            _backgroundQueueManagedObjectContext = [[NSManagedObjectContext alloc] init];
            [_backgroundQueueManagedObjectContext setPersistentStoreCoordinator:coordinator];
        }
    }

    // save the JSON dictionary starting at the upper most level of the key path
    [self saveJSON:jsonDict objectMapping:objectMapping class:managedObjectClass managedObjectContext:_backgroundQueueManagedObjectContext level:0];

    // save the object IDs and the completion block to global variables so we can access them after the save
    if (completion) {
        saveCompletionBlock = completion;
    }

    // listen for the merge changes from context did save notification
    [[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(mergeChangesFromBackground:) name:NSManagedObjectContextDidSaveNotification object:_backgroundQueueManagedObjectContext];

    // save all changes object context
    [self saveManagedObjectContext];
}); 
```

这是处理 NSManagedObjectContextDidSaveNotification 的修改方法

```
- (void)mergeChangesFromBackground:(NSNotification *)notification
{
    // kill the listener
    [[NSNotificationCenter defaultCenter] removeObserver:self name:NSManagedObjectContextDidSaveNotification object:_backgroundQueueManagedObjectContext];

    // merge changes to the primary context, and wait for the action to complete on the main thread
    [[self managedObjectContext] performSelectorOnMainThread:@selector(mergeChangesFromContextDidSaveNotification:) withObject:notification waitUntilDone:YES];

    // dispatch the completion block
    dispatch_async(dispatch_get_main_queue(), ^{

        // pull the objects that were saved from the notification so we can get them on the main thread MOC
        NSDictionary *userInfo = [notification userInfo];
        NSMutableArray *modifiedObjects = [[NSMutableArray alloc] init];
        NSSet *insertedObject = (NSSet *)[userInfo objectForKey:@"inserted"];
        NSSet *updatedObject = (NSSet *)[userInfo objectForKey:@"updated"];

        if (insertedObject && insertedObject.count > 0) {
            [modifiedObjects addObjectsFromArray:[insertedObject allObjects]];
        }
        if (updatedObject && updatedObject.count > 0) {
            [modifiedObjects addObjectsFromArray:[updatedObject allObjects]];
        }

        NSMutableArray *objects = [[NSMutableArray alloc] init];

        // iterate through the updated objects and find them in the main thread MOC
        for (NSManagedObject *object in modifiedObjects) {
            NSError *error;
            NSManagedObject *obj = [[self managedObjectContext] existingObjectWithID:object.objectID error:&error];
            if (error) {
                [self logError:error];
            }
            if (obj) {
                [objects addObject:obj];
            }
        }

        modifiedObjects = nil;

        // call the completion block
        saveCompletionBlock(objects);

        // clear the saved completion block
        saveCompletionBlock = nil;
    });
} 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-01-25T17:15:55.040

我要把这个扔出去。**停止遵循 Core Data Programming Guide 中列出的并发最佳实践**。自从添加了更易于使用的嵌套上下文以来，Apple 尚未对其进行更新。该视频详细介绍： [https ://developer.apple.com/videos/wwdc/2012/?id=214](https://developer.apple.com/videos/wwdc/2012/?id=214)

设置您的主要上下文以使用您的主线程（适用于处理 UI）：

```
NSManagedObjectContext * context = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
[context setPersistentStoreCoordinator:yourPSC]; 
```

对于您创建的任何可能正在执行并发操作的对象，请创建一个私有队列上下文以使用

```
NSManagedObjectContext * backgroundContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType];
[backgroundContext setParentContext:context];
//Use backgroundContext to insert/update...
//Then just save the context, it will automatically sync to your primary context
[backgroundContext save:nil]; 
```

QueueConcurrencyType 指的是上下文将对其进行获取（保存和获取请求）操作的队列。NSMainQueueConcurrencyType 上下文在主队列上完成所有工作，这使其适合 UI 交互。NSPrivateQueueConcurrencyType 在它自己的私有队列上执行此操作。因此，当您在 backgroundContext 上调用 save 时，它​​会`performBlock`自动合并调用 parentContext 的私有数据。您不想调用`performBlock`私有队列上下文，以防它恰好在主线程上，这会导致死锁。

如果您想真正花哨，您可以创建一个主上下文作为私有队列并发类型（适用于后台保存），其中一个主队列上下文仅用于您的 UI，然后您的主队列上下文的子上下文用于后台操作（像进口一样）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-25T16:43:40.350

我看到您已经找到了适合您的答案。但我一直有一些类似的问题，并想分享我的经验，看看它是否对你或其他看到这种情况的人有帮助。

多线程核心数据的东西读起来总是有点混乱，所以如果我误读了你的代码，请原谅。但似乎对你来说可能有一个更简单的答案。

您在第一次尝试中遇到的核心问题是您将托管对象 ID（假设是可以在线程之间传递的对象标识符）保存到一个全局变量中以便在主线程上使用。您在后台线程上执行了此操作。问题是您在保存到后台线程的托管对象上下文之前执行了此操作。在保存之前将对象 ID 传递给另一个线程/上下文对是不安全的。它们可以在您保存时更改。请参阅 objectID 文档中的警告：[NSManagedObject 参考](http://developer.apple.com/library/ios/#documentation/cocoa/Reference/CoreDataFramework/Classes/NSManagedObject_Class/Reference/NSManagedObject.html#//apple_ref/occ/instm/NSManagedObject/objectID)

您通过通知后台线程保存并在该线程内从通知对象中获取 now-safe-to-use-because-the-context-has-been-saved 对象 ID 来解决此问题。这些被传递到主线程，并且实际的更改也通过调用mergeChangesFromContextDidSaveNotification 被合并到主线程中。在这里您可以节省一两步。

**您正在注册以在后台**线程上听到 NSManagedObjectContextDidSaveNotification 。**您可以注册以在主**线程上听到相同的通知。在该通知中，您将拥有可以在主线程上安全使用的相同对象 ID。可以使用 mergeChangesFromContextDidSaveNotification 和传递的通知对象安全地更新主线程 MOC，因为该方法旨在以这种方式工作：[mergeChanges docs](http://developer.apple.com/library/ios/#documentation/cocoa/Reference/CoreDataFramework/Classes/NSManagedObjectContext_Class/NSManagedObjectContext.html#//apple_ref/occ/instm/NSManagedObjectContext/mergeChangesFromContextDidSaveNotification%3a)。只要将 moc 与调用完成块的线程匹配，从任一线程调用完成块现在都是安全的。

因此，您可以在主线程上执行所有主线程更新内容，干净地分离线程并避免打包和重新打包更新的内容或将相同的更改双重保存到持久存储中。

需要明确的是 - 发生的合并发生在托管对象上下文及其内存状态 - 主线程上的 moc 已更新以匹配后台线程上的 moc，但不需要新的保存，因为您已经保存了这些在后台线程上更改存储。您可以线程安全地访问通知对象中的任何这些更新对象，就像您在后台线程上使用它时所做的那样。

我希望您的解决方案对您有用，并且您不必重新考虑-但想为可能看到此问题的其他人添加我的想法。如果我误解了您的代码，请告诉我，我会修改。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-02T14:54:07.143

在您的情况下，因为您写入后台 moc，mergeChangesFromContextDidSaveNotification 的通知将进入后台 moc，而不是前台 moc。

所以你需要在后台线程上注册通知到后台 moc 对象。

当您收到该呼叫时，您可以向主线程 moc 发送消息以 mergeChangesFromContextDidSaveNotification。

安德鲁

更新：这是一个应该工作的示例

```
 //register for this on the background thread
    NSNotificationCenter *nc = [NSNotificationCenter defaultCenter];
    [nc addObserver:self selector:@selector(mergeChanges:) name:NSManagedObjectContextDidSaveNotification object:backgroundMOC];

- (void)mergeChanges:(NSNotification *)notification {
    NSManagedObjectContext *mainThreadMOC = [singleton managedObjectContext];

    //this tells the main thread moc to run on the main thread, and merge in the changes there
    [mainThreadMOC performSelectorOnMainThread:@selector(mergeChangesFromContextDidSaveNotification:) withObject:notification waitUntilDone:YES];
} 
```

# git - 在对象存储中查找文件

> ID：12692578
> 
> 赞同：0
> 
> 时间：2012-10-02T14:44:58.900
> 
> 标签：git

为什么以下不能按预期工作？

```
$ find .git/objects -type f
.git/objects/5a/91f388f3648b98ae34a19ec42ba9acc7852ef4
$ git cat-file -t 91f388f3648b98ae34a19ec42ba9acc7852ef4
fatal: Not a valid object name 91f388f3648b98ae34a19ec42ba9acc7852ef4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:49:08.527

因为对象 ID 实际上是`5a91f388f3648b98ae34a19ec42ba9acc7852ef4`，所以子目录`5a`是对象 ID 的一部分。

# c# - 用 ToolkitScriptManager 替换 ScriptManager

> ID：12692579
> 
> 赞同：2
> 
> 时间：2012-10-02T14:45:01.117
> 
> 标签：c#, asp.net, ajaxcontroltoolkit

我知道如果我正在使用 AjaxControlToolkit 我需要更换：

```
<asp:ScriptManager 
```

经过

```
<ajaxToolkit:ToolkitScriptManager 
```

但是我是否也需要在后面的代码中替换 ScriptManager：

```
ScriptManager.RegisterStartupScript 
```

经过

```
ToolkitScriptManager.RegisterStartupScript 
```

我在那里收到警告：通过派生类型访问类型的静态成员

**更新：**

好吧，RegisterStartupScript 可能属于 ScriptManager 和 ToolkitScriptManager 派生自 ScriptManager？在这种情况下，用 RegisterStartupScript 替换它没有意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:04:25.627

我之前用过ScriptManager和AJAX控制工具包，没问题。我使用的是旧版本，所以也许这个要求后来出现了，但它可能根本不是要求；它可能会为您增加额外的便利。由于那里的继承，您会收到警告，因为 ToolkitScriptManager 继承自 ScriptManager，这就是原因。为此使用 ToolScriptManager 可能没问题...

只要它有效，这就是最重要的:-)

# c# - 我可以在 microsoft visual c# 2008 express 中使用 datarepeater 吗？

> ID：12692585
> 
> 赞同：-1
> 
> 时间：2012-10-02T14:45:16.353
> 
> 标签：c#, datarepeater

我已经下载了包含 Datarepeater 的 VIsual Basic Power pack，我在我的 microsoft visual c# 2008 express 中看不到它。我可以在快速添加中使用它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-04T09:09:29.650

Visual Studio Service Pack 1 包括数据转发器。该服务包仅适用于 Visual Studio c# 2008 的完整版。

# matlab - 在排序向量中查找上限索引

> ID：12692586
> 
> 赞同：3
> 
> 时间：2012-10-02T14:45:20.143
> 
> 标签：matlab, vector

我在 Matlab 中有一个如下所示的向量。

```
第 1 至 4 列

   0.160000000000000 0.208000000000000 0.244000000000000 0.268000000000000

  第 5 栏

   0.280000000000000

```

我想找到以下值的上限索引：

```
0.16230400000000 
```

我知道这个值在 1° 和 2° 索引之间，但我想找到在这种情况下为索引 2 的上限，即使最接近的值在索引 1 处。我如何在没有循环的情况下在 Matlab 中得到它?

我找到了以下方法来找到最接近的值，但我总是需要上限。

```
[c ind] = min(abs(probCum-codComp)); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T15:03:51.117

您可以通过计算有多少条目小于感兴趣的值增加一来获得上限的索引：

```
id = sum(value < data)+1; 
```

请注意，如果所有元素都小于感兴趣的值，`data(id)`则会返回错误，因为`id`大于 的大小`data`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T16:09:06.530

如果您的数组以升序方式排序，则 find 命令特别强大：

```
find (a>0.162,1) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T14:50:24.930

您可以使用第二个输出`min`来获取“正确”索引的索引：

```
[~,index] = min(abs(data-value)); 
```

然后检查是否采取了下限或上限，并进行`index`相应调整：

```
if value > data(index)  
    index = min(length(data), index+1); end 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T15:01:45.627

您可以从向量中减去您搜索的值并观察符号

```
V =  [0.1600    0.2080    0.2440    0.2680    0.2800];
v =  0.162304;
V-v
ans =

-0.0023    0.0457    0.0817    0.1057    0.1177 
```

现在你可以`find`在这个向量中的第一个非负条目 - 这是你的上限

```
find(V-v>=0, 1, 'first')
ans =

 2 
```

您还可以更改上面表达式中的不等式以满足您的需要。

# c++ - 重载模板化函数歧义问题

> ID：12692592
> 
> 赞同：0
> 
> 时间：2012-10-02T14:45:37.640
> 
> 标签：c++, templates, compiler-errors, overloading

谁能找到第一次重载和所需功能之间的区别？如果我注释掉 Python 规范，编译很好，但我在其他地方需要它。完全让人抓狂……

```
template<typename TN>
void fromVectorTo(const std::vector<TN> & input, xlw::impl::XlfOper<xlw::LPXLFOPER> * output){....}
template<typename TN>
void fromVectorTo(const std::vector<TN> & input, PyObject ** output){...}

error C2665: 'pal::fromVectorTo' : none of the 2 overloads could convert all the argument types
8>        myPython.h(73): could be 'void pal::fromVectorTo<double>(const std::vector<_Ty> &,PyObject **)'
8>        with
8>        [
8>            _Ty=double
8>        ]
8>        myXLW.h(102): or       'void pal::fromVectorTo<double>(const std::vector<_Ty> &,xlw::impl::XlfOper<LPOPER_TYPE> *)'
8>        with
8>        [
8>            _Ty=double,
8>            LPOPER_TYPE=xlw::LPXLFOPER
8>        ]
8>        while trying to match the argument list '(const std::vector<_Ty>, xlw::impl::XlfOper<LPOPER_TYPE> *)'
8>        with
8>        [
8>            _Ty=double
8>        ]
8>        and
8>        [
8>            LPOPER_TYPE=xlw::LPXLFOPER
8>        ] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T13:11:49.577

看起来这是一个编译器错误 - 错误消息一定是错误的。当我使用模板类的部分专业化 + 做其他修改时，问题似乎消失了。

# c++ - T(x) 是否被视为强制转换？

> ID：12692597
> 
> 赞同：7
> 
> 时间：2012-10-02T14:46:08.140
> 
> 标签：c++, casting

以下是演员表：

```
int foo = (int) somefloat; 
```

但是，这是否被视为演员表？

```
int foo = int( somefloat ); 
```

更重要的是，如果两者之间存在差异，那么生成的编译代码是否不同？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T14:48:10.107

第二个示例通常称为函数样式转换，并已添加到 C++ 中，但两者在语义/目标代码方面没有区别。

这是对添加函数样式转换的原因的一个很好的解释：

[C++ 函数样式转换的目的到底是什么？](https://stackoverflow.com/questions/4474933/what-exactly-is-or-was-the-purpose-of-c-function-style-casts)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T14:48:20.757

结果没有区别，但是只能在 C 中使用第一个示例。在 C++ 中，您可以同时使用两者。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T14:49:45.113

是的，这也是一个演员表。C++ 支持这种类型的转换，C 只有`(type)expression`格式转换。它们是等价的。

# c++ - c++运算符重载如何实现mat_的ctor之类的模式 在opencv中

> ID：12692600
> 
> 赞同：1
> 
> 时间：2012-10-02T14:46:12.997
> 
> 标签：c++, opencv, operator-overloading

在 opencv 中，我可以像这样构造一个 Mat 对象：

```
Mat mat = (Mat_<int>(2, 3) << 1, 2, 3, 4, 5, 6); 
```

所以初始化一个实例很方便`Mat_<type>`，如果我有一个自定义的简化矩阵类`Mat2D`，我将在其中使用这种模式，但怎么办？
**更新：**我尝试使用可变长度参数列表，但是`error C2829: 'operator <<' cannot have a variable parameter list`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:43:48.197

警告：不要这样做。你被警告了。

您可以使用运算符重载来实现这一点，但这是一个非常糟糕的主意，我稍后会解释。

我假设类`Mat`有一个构造函数，它接受一个`Mat_<int>`.

我假设类模板`Mat_<T>`有一个方法，`Insert()`它知道如何将单个元素插入到矩阵中。我会让你解决这个问题，但它需要一种方法来知道在哪里插入它。

使用这种方法很容易重载`operator<<`：

```
template<typename T>
Mat_<T>& operator<<(Mat_<T>& mat, const T& el)
{
  mat.Insert(el);
  return mat;
} 
```

我们可以重载`operator,`来调用这个重载`operator<<`：

```
template<typename T>
Mat_<T>& operator,(Mat_<T>& mat, const T& el)
{
  return mat << el;
} 
```

一切正常，您可以使用您的语法。现在我将解释为什么这是一个坏主意。

以这种方式重载`operator<<`是完全明智的。这是插入运算符，我们的重载将一个元素插入到矩阵中。这是任何人所期望的；到目前为止，一切都很好。

但重载`operator,`不是。该运算符的含义是“计算两个表达式，然后返回最后一个”；这显然不是我们重载的运算符所做的。粗心的用户会尝试以`,`标准方式（例如，在`for`循环中）使用运算符，并且不会理解为什么他们的代码不起作用。除非您想被使用您的代码的人讨厌，否则您永远不应该重载运算符来执行非标准操作；可能以后的某个时候你自己。

事实上，虽然标准允许重载`operator,`，但您可能永远不应该这样做，因为不可能编写执行标准操作的代码。您可以认为这是为向后兼容而保留的标准中的一个错误。

而且，如果您正在考虑重载`operator,`以获取两个`int`并以某种方式将它们捆绑在一起，那么不仅缺点更加严重：当所有操作数都是内置类型时，重载运算符是非法的。

所以，总而言之：你可以做到，但这是一个坏主意，并且会在你的代码的意想不到的地方导致错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:57:08.887

这是构建器模式与流畅界面的结合，使用插入器和逗号运算符作为简单的 DSL。我没有看到任何类型的危险（如果做得好），因为您的 DSL 定义了这些运算符适用的非常特殊的上下文。如果您正在寻找灵感，请查看 boost::assign。无论如何，我会使用口头 DSL 元素而不是运算符，但这只是我个人喜好的问题......

# java - Java字符串：常量池

> ID：12692605
> 
> 赞同：2
> 
> 时间：2012-10-02T14:46:25.567
> 
> 标签：java

> **可能重复：**
> [关于 Java 字符串池的问题](https://stackoverflow.com/questions/1881922/questions-about-javas-string-pool)

```
String s1 = "length";
String s2 = "length";
System.out.println("EQUAL: " + (s1 == s2));
String s3 = "length: 10";
String s4 = "length: " + s3.length();
System.out.println(s3.length());
System.out.println(s4.length());
System.out.println("EQUAL: " + (s3 == s4)); 
```

输出 ：

EQUAL: true //理解字符串池中相同的字符串引用

10

10

EQUAL: false // 为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:47:15.227

```
 String s4 = "length: " + s3.length(); 
```

创建新的字符串对象。

因此， s3 引用不同的对象， s4 引用不同的对象，这使得`==`条件返回`false`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:57:12.133

> 没有“新”运算符。所以所有东西都必须在常量池中创建，不能有重复值？

```
String s4 = "length: " + s3.length(); 
```

和

```
String s4 = new StringBuilder().append("length: ")
                               .append(Integer.toString(s3.length()))
                               .toString(); 
```

所以它创建了很多新对象和一个新字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T15:14:56.050

对象（和数组）上的“==”是物理上的平等。也就是说，对于对象 a 和 b，如果 a 和 b 指向同一个对象，则 a == b 为真。

编译器为您做了一些优化。例如，字符串“length”仅作为常量存储一次。因此 s1 和 s2 指向相同的（常量）字符串。

也许查看输出的字节码会有所帮助。请注意，这是从非标准 java 编译器生成的 jasmin 汇编代码。您可以通过运行“javap -c”来确认 java 编译器是否执行了类似的操作（但输出的可读性较差）。

* * *

加载对常量字符串“length”的引用并存储在 s1 中。

```
ldc "length"
astore_1 
```

加载对（相同的）常量字符串“length”的引用并存储在 s2 中。

```
ldc "length"
astore_2 
```

比较并打印结果。它不太可读。

```
getstatic java/lang/System/out Ljava/io/PrintStream;
new java/lang/StringBuffer
dup
invokespecial java/lang/StringBuffer/<init>()V
ldc "EQUAL: "
invokevirtual java/lang/StringBuffer/append(Ljava/lang/String;)Ljava/lang/StringBuffer;
aload_1
aload_2
if_acmpeq true0
iconst_0
goto end1
true0:
iconst_1
end1:
invokevirtual java/lang/StringBuffer/append(Z)Ljava/lang/StringBuffer;
invokevirtual java/lang/StringBuffer/toString()Ljava/lang/String;
invokevirtual java/io/PrintStream/println(Ljava/lang/String;)V 
```

加载“长度：10”并存储在 s3

```
ldc "length: 10"
astore_3 
```

将“长度：”与长度连接并存储在 s4 中。请注意，连接将创建一个新字符串（并因此创建一个新引用）。

```
new java/lang/StringBuffer
dup
invokespecial java/lang/StringBuffer/<init>()V
ldc "length: "
invokevirtual java/lang/StringBuffer/append(Ljava/lang/String;)Ljava/lang/StringBuffer;
aload_3
invokevirtual java/lang/String/length()I
invokevirtual java/lang/StringBuffer/append(I)Ljava/lang/StringBuffer;
invokevirtual java/lang/StringBuffer/toString()Ljava/lang/String;
astore 4 
```

像以前一样打印并返回。

* * *

如您所见，前两个变量指的是“常量池”中的同一个字符串。变量 s3 也指向常量池中的字符串，但 s4 指的是由常量字符串和数字构建的新字符串。

顺便说一句，你不应该依赖这种行为。

# objective-c - 如何捕获特定大小的 self.view

> ID：12692611
> 
> 赞同：0
> 
> 时间：2012-10-02T14:46:41.843
> 
> 标签：objective-c, ios, uiimage, capture

我有self.view，但我只想捕捉它的300x320。

得到这个代码：

```
UIGraphicsBeginImageContext(self.view.bounds.size);
[self.view.window.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

UIImageWriteToSavedPhotosAlbum(viewImage, nil, nil, nil);

UIImage * imgPrintScreen = [[UIImage alloc]init];
imgPrintScreen = viewImage; 
```

为了这样做，我需要在这里更改什么？

感谢分配！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:06:20.023

只需更改您要捕获的大小，而不是使用整个边界，使用您想要的大小。渲染将从视图的原点开始，并在超出边界时被剪裁。如果您需要更改视图实际剪辑的位置，只需在启动图像上下文后翻译上下文：

```
UIGraphicsBeginImageContextWithOptions(CGSizeMake(300, 320), YES, 0.);
[self.view.window.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

例如，如果您的视图是 600x320 并且您想捕获中间 300 点的宽度，您可以将上下文向左平移 150 点：

```
UIGraphicsBeginImageContextWithOptions(CGSizeMake(300, 320), YES, 0.);
CGContextRef context = UIGraphicsGetCurrentContext();
CGContextTranslateCTM(context, -150.f, 0.f);
[self.view.window.layer renderInContext:UIGraphicsGetCurrentContext()];
UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext(); 
```

# php - 文件上传脚本作为代理

> ID：12692614
> 
> 赞同：1
> 
> 时间：2012-10-02T14:46:56.460
> 
> 标签：php, file-upload, proxy

我真正想做的是：

*   用户将从 html 页面上传到脚本
*   该脚本将登录并返回链接

好吧，一切都可以在 curl 的帮助下轻松完成，并通过多部分帖子接受文件。

但是这里的问题是，在所有上传完成后，它将开始通过 curl 将文件从服务器上传到另一个服务器:(所以这将需要一个很长的过程。我想知道它是否可以像用户上传文件一样，它也继续以块的形式发送数据，例如下载文件

我不确定这是否可以用 php 来实现。如果没有，任何其他方式可以使这成为可能

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:52:37.770

您可以使用 cURL 执行此操作：

```
// Open a stream so that we stream the image download
$localFile = $_FILES[$fileKey]['tmp_name'];

$stream = fopen($localFile, 'r');

// Create a curl handle to upload to the file server     
$ch = curl_init($fileServer);
// Send a PUT request
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'PUT');
// Let curl know that we are sending an entity body
curl_setopt($ch, CURLOPT_UPLOAD, true);
// Let curl know that we are using a chunked transfer encoding
curl_setopt($ch, CURLOPT_HTTPHEADER, array('Transfer-Encoding: chunked'));
// Use a callback to provide curl with data to transmit from the stream
curl_setopt($ch, CURLOPT_READFUNCTION, function($ch, $fd, $length) use ($stream) {
    return fread($stream, $length) ? '';
});

curl_exec($ch); 
```

# jquery - JQuery`.load()`函数不执行加载页面中的javascript

> ID：12692619
> 
> 赞同：3
> 
> 时间：2012-10-02T14:47:10.893
> 
> 标签：jquery, html, ajax

我要做的是加载一个外部 html 文件，并让嵌入的 Javascript 与我在`Loading_Page.html`.

我尝试使用的代码是这样的：

```
$("#myBtn").click(function() {
  $("#myDiv").load("Loading_Page.html");
}); 
```

Loading_Page.html 看起来像这样（现在很简单，但会扩展一次/如果我得到这个工作）。它同时具有 html 和 javascript，所以我需要与 javascript 一起获取 Html 页面。

```
<html> 
<head>
  <title>Tracking HTML File</title>
  <script language="javascript" type="text/javascript">
    alert("outside the jQuery ready");
  </script>
</head>

<body>

  <div id="first_division"><img src="someimage.jpg" alt="image" /></div>
  <div id="second_division"><p>some text</p></div>
</body>

</html> 
```

但是 Loading_Page.html 页面中的 javascript 没有与 Loading_Page 中的 html 代码一起执行 关于浏览器为什么忽略 Loading_Page.html 文件中的 Javascript 的任何想法？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:54:22.400

jQuery 加载只会在响应中排除该脚本标签，然后再将其插入到 div 中。

看到[这个](https://stackoverflow.com/questions/12359763/ajax-loaded-content-script-is-not-executing/12360084)问题。同样的问题也发生在那里。

# android - 尝试 SLF4j 的 Android Adv 中的运行时错误 - Logback

> ID：12692622
> 
> 赞同：0
> 
> 时间：2012-10-02T14:47:22.560
> 
> 标签：android, eclipse, slf4j, logback

我想在我的 Android 应用程序（IDE Eclipse）中使用**slf4j 和 logback 。**我已经添加了 jars 文件（slf4j-api-1.7.1 logback-android-1.0.7-1.jar）来在 Eclipse 中构建路径。我尝试使用以下简单的主要活动在 Adv 中启动我的应用程序

```
import org.slf4j.Logger
import org.slf4j.LoggerFactory
public class MainActivity extends Activity{
    private static final Logger logger = 
              LoggerFactory.getLogger(MainActivity.class);
    private void onnCreate(Bundle svedInstanceState){
         super.onCreate(savedInstanceState) 
         logger.debug("MainActivity created");
    }
} 
```

我得到了 logcat 捕获的以下错误

```
10-02 16:03:46.911: I/dalvikvm(619): Could not find method org.slf4j.LoggerFactory.getLogger, referenced from method com.mbm.activity.MainActivity.<clinit>
10-02 16:03:46.911: W/dalvikvm(619): VFY: unable to resolve static method 3250: Lorg/slf4j/LoggerFactory;.getLogger (Ljava/lang/Class;)Lorg/slf4j/Logger;
10-02 16:03:46.941: I/dalvikvm(619): Could not find method org.slf4j.Logger.debug, referenced from method com.mbm.activity.MainActivity.onToggleClicked
10-02 16:03:46.941: W/dalvikvm(619): VFY: unable to resolve interface method 3248: Lorg/slf4j/Logger;.debug (Ljava/lang/String;)V
10-02 16:03:46.941: I/dalvikvm(619): Could not find method org.slf4j.Logger.info, referenced from method com.mbm.activity.MainActivity.onToggleClicked
10-02 16:03:46.941: W/dalvikvm(619): VFY: unable to resolve interface method 3249: Lorg/slf4j/Logger;.info (Ljava/lang/String;)V
10-02 16:03:46.951: W/dalvikvm(619): Exception Ljava/lang/NoClassDefFoundError; thrown while initializing Lcom/mbm/activity/MainActivity;
10-02 16:03:46.951: W/dalvikvm(619): Class init failed in newInstance call (Lcom/mbm/activity/MainActivity;)
10-02 16:03:46.951: W/dalvikvm(619): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
10-02 16:03:46.961: E/AndroidRuntime(619): FATAL EXCEPTION: main
10-02 16:03:46.961: E/AndroidRuntime(619): java.lang.ExceptionInInitializerError
10-02 16:03:46.961: E/AndroidRuntime(619):  at java.lang.Class.newInstanceImpl(Native Method)
10-02 16:03:46.961: E/AndroidRuntime(619):  at java.lang.Class.newInstance(Class.java:1319)
10-02 16:03:46.961: E/AndroidRuntime(619):  at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
10-02 16:03:46.961: E/AndroidRuntime(619):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
10-02 16:03:46.961: E/AndroidRuntime(619):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
10-02 16:03:46.961: E/AndroidRuntime(619):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
10-02 16:03:46.961: E/AndroidRuntime(619):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
10-02 16:03:46.961: E/AndroidRuntime(619):  at android.os.Handler.dispatchMessage(Handler.java:99)
10-02 16:03:46.961: E/AndroidRuntime(619):  at android.os.Looper.loop(Looper.java:137)
10-02 16:03:46.961: E/AndroidRuntime(619):  at android.app.ActivityThread.main(ActivityThread.java:4745)
10-02 16:03:46.961: E/AndroidRuntime(619):  at java.lang.reflect.Method.invokeNative(Native Method)
10-02 16:03:46.961: E/AndroidRuntime(619):  at java.lang.reflect.Method.invoke(Method.java:511)
10-02 16:03:46.961: E/AndroidRuntime(619):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
10-02 16:03:46.961: E/AndroidRuntime(619):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
10-02 16:03:46.961: E/AndroidRuntime(619):  at dalvik.system.NativeStart.main(Native Method)
10-02 16:03:46.961: E/AndroidRuntime(619): Caused by: java.lang.NoClassDefFoundError: org.slf4j.LoggerFactory
10-02 16:03:46.961: E/AndroidRuntime(619):  at com.mbm.activity.MainActivity.<clinit>(MainActivity.java:41)
10-02 16:03:46.961: E/AndroidRuntime(619):  ... 15 more 
```

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T08:43:56.887

我通过以下步骤单独解决了这个问题：1）将2个jar文件放在项目的新文件夹中。2) 将 jars 添加到构建路径 3) 在 Java Build Path 首选项中输入“Order and Export”选项卡并选择两个 jars，然后按确定。4) 项目 --> 清洁！！完成这些步骤后，应用程序运行良好，没有错误！！

# java - 如何展平 Hibernate 查询的结果

> ID：12692624
> 
> 赞同：0
> 
> 时间：2012-10-02T14:47:27.237
> 
> 标签：java, hibernate

假设我执行了一个理论上的 HQL 查询，例如`FROM Customer`. in`Customer`是一个`getOrders()`getter，它返回一个 ManyToOne`Order`对象集合。这将执行一条 SQL 语句，从带有左连接到 Order 的 Customer 中进行选择。

通过对象模型，我可以以编程方式迭代客户，然后迭代订单。

但是，我想将分层对象模型转换为左连接的平面表格结果，以便结果看起来很像这个 SQL 查询的结果：

```
SELECT *
FROM Customer
LEFT JOIN Order on Customer.customerId = Order.customerId 
```

样本结果：

```
Customer.customerId  ... Order.orderId  Order.customerId ...
1                        200            1
2                        201            2
2                        202            2
3                        NULL           NULL 
```

有没有一种简单的方法可以用 Hibernate 做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:31:49.603

取决于您在通过使用显式选择子句控制的“标量”级别上想要什么。

```
select c, o
from Customer c left join c.orders o 
```

返回（客户，订单）元组列表。或者：

```
select c.id, c.name, o.id, ...
from Customer c left join c.orders o 
```

它会返回原子片段的标量投影。

在这两种情况下，您都会返回一个列表。您可以在这两种情况下使用“动态实例化”（尽管在第二种情况下它确实更有用恕我直言）：

```
select new CustomerOrderSummary( c.id, c.name, o.id, ... )
from Customer c left join c.orders o 
```

其中 CustomerOrderSummary 只是一个具有匹配构造函数的普通类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:58:19.290

可能你可以通过结果集的表达来做到这一点。[http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/query_native.html](http://docs.jboss.org/hibernate/orm/4.0/hem/en-US/html/query_native.html)

从例子：

```
@SqlResultSetMapping(name="GetNightAndArea", entities={
    @EntityResult(name="org.hibernate.test.annotations.query.Night", fields = {
        @FieldResult(name="id", column="nid"),
        @FieldResult(name="duration", column="night_duration"),
        @FieldResult(name="date", column="night_date"),
        @FieldResult(name="area", column="area_id")
    }),
    @EntityResult(name="org.hibernate.test.annotations.query.Area", fields = {
        @FieldResult(name="id", column="aid"),
        @FieldResult(name="name", column="name")
    })
}) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:28:13.290

我认为您可以尝试在 Object[] 中检索结果，例如：

```
 EntityManager entityManager = EntityManager.getEntityManager();
    Query query= entityManager.createQuery("select cust, ord from Customer cust left outer join cust.orders ord where cust.customerId = :customerId");
    tradeQuery.setParameter("customerId", aCustomerId);
    List<Object[]> resultList = (List<Object[]>)query.getResultList(); 
```

检索到的 resultsList 将是包含平面中 Customer 和 Order 对象的 Object 数组列表。

```
 if(!resultList.isEmpty()){
        Iterator<Object[]> iter = resultList.iterator();
        while(iter.hasNext()){
            Object[] resultObj = (Object[])iter.next();
            Customer customer= (Customer )resultObj[0];
            Order order = (Order)resultObj[1];
        }
    } 
```

希望这可以帮助！

# informatica-powercenter - 在 informatica powercenter 中分组

> ID：12692625
> 
> 赞同：0
> 
> 时间：2012-10-02T14:47:36.943
> 
> 标签：informatica-powercenter, informatica

我有一个有 4 列（成员、级别、组、组级别）的表。Group_level 目前是空的，我正在尝试从组的不同级别的测量中填充 Group_level。

要计算每个成员的 Group_level，我需要首先按每个成员的组列对每个成员进行分组。从这个组中，我需要分析组中的不同级别，然后填充 Group_level。例如：

```
member | level | group | group_level
-------|-------|-------|------------
1      | low   | 2     | med
2      | low   | 1     | low
3      | med   | 2     | med 
```

我已经制定了 IIF 声明，但我一直在努力理解如何将这些人组合在一起。我对 informatica 非常陌生，因此欢迎提供过于详细的说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T20:08:35.673

1.  将源的第二个实例添加到映射中。
2.  拖动`level`和`group`到一个聚合器。
3.  分组`group`并写一个表达式来计算`group_level`。
4.  将这个新数据流与主要数据流连接起来`group`。

# asp.net - 是否可以显示将 URL 传递给 Google Chart 等服务的仪表图表？

> ID：12692628
> 
> 赞同：-1
> 
> 时间：2012-10-02T14:47:49.400
> 
> 标签：asp.net, charts

我想向我的 asp.net 应用程序展示一个简单的仪表。有什么选择 ？是否可以简单地将 url 传递给“返回”仪表“图像”的谷歌图表服务？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:40:56.177

ASP.Net 具有从 .net 4 开始的内置图表控件，并且可以免费下载 .net 3.5。有关更多详细信息和大量示例链接，请参阅[内置图表控件（VS 2010 和 .NET 4 系列） 。](http://weblogs.asp.net/scottgu/archive/2010/02/07/built-in-charting-controls-vs-2010-and-net-4-series.aspx)

# ruby-on-rails - 在 Rails 3 中清理导致 Money gem 错误的助手

> ID：12692630
> 
> 赞同：0
> 
> 时间：2012-10-02T14:47:52.000
> 
> 标签：ruby-on-rails, currency, sanitize

[使用 Collective Idea 的Money](https://github.com/collectiveidea/money) Gem对任何东西调用“清理”方法会导致 Rails 3 中出现缺失方法错误

```
sanitize "trololo" 
```

=>

```
undefined method `id2name' for {:instance_writer=>false}:Hash

collectiveidea-money (1.7.4) lib/support/cattr_accessor.rb:7:in `block in cattr_reader'
collectiveidea-money (1.7.4) lib/support/cattr_accessor.rb:5:in `each'
collectiveidea-money (1.7.4) lib/support/cattr_accessor.rb:5:in `cattr_reader'
collectiveidea-money (1.7.4) lib/support/cattr_accessor.rb:54:in `cattr_accessor'
actionpack (3.2.8) lib/action_controller/vendor/html-scanner/html/sanitizer.rb:48:in `<class:LinkSanitizer>'
actionpack (3.2.8) lib/action_controller/vendor/html-scanner/html/sanitizer.rb:47:in `<module:HTML>'
actionpack (3.2.8) lib/action_controller/vendor/html-scanner/html/sanitizer.rb:5:in `<top (required)>'
actionpack (3.2.8) lib/action_view/helpers/sanitize_helper.rb:174:in `white_list_sanitizer'
actionpack (3.2.8) lib/action_view/helpers/sanitize_helper.rb:60:in `sanitize' 
```

以前有没有人遇到过这个错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-31T18:09:29.327

在源代码中挖掘之后，我发现了这个：*money* gem 定义了`cattr_accessor`辅助方法（参见文件 YOUR_GEM_DIR/collectiveidea-money-1.7.4/lib/support/cattr_accessor.rb）和 active_support 一样（参见文件 YOUR_GEM_DIR/activesupport -3.2.8/lib/active_support/core_ext/class/attribute_accessors.rb）。

不幸的是，*money* gem 中的实现与 active_support 中的不同。在您的情况下，*货币*gem 已在 active_support 之后加载并覆盖了 *good* active_support 实现。

您可以通过确保在 active_support 之前加载*money gem 来“修复”它。*如果您发布有关您的应用程序的更多详细信息，我可以告诉您如何执行此操作...

但是，*金钱*宝石似乎已经过时了，所以我建议您将其替换为更新且积极维护的东西......

# java - CouchDB Java 库由 Maven 下载，但 IntelliJ 无法识别

> ID：12692631
> 
> 赞同：0
> 
> 时间：2012-10-02T14:47:53.917
> 
> 标签：java, maven, intellij-idea, couchdb, pom.xml

我使用*Maven*和*CouchDB*。我将*CouchDB* java 库依赖项放入`pom.xml`并使用 maven 重新编译。我看到文件被下载并且编译成功并且没有错误，但是我使用的 IntelliJ 找不到这个库或其类。

我使用了*ektorp*、*couchdb4j*和*jcouchdb*，但遇到了同样的问题。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:22:16.107

如果您已通过使用打开项目`[File]->[Open Project...]`，然后指向，`pom.xml`则 IntelliJ 将跟踪 pom.xml 中的更改/更新。

不要使用，[`maven-idea-plugin`](http://maven.apache.org/plugins/maven-idea-plugin/)因为它已经过时了，最后的更改是从 2008 年开始的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T04:27:23.770

查看一个工作示例并将其与您的[https://github.com/softberries/woodstoxex（couchdb](https://github.com/softberries/woodstoxex)分支）进行比较，对于纯 MFN 项目，您可以使用“来自现有模型”选项创建一个 IntelliJ 项目并从列表

# c# - 制作 ToolStripMenuItem.Selected = true 的最简单方法

> ID：12692633
> 
> 赞同：2
> 
> 时间：2012-10-02T14:48:09.317
> 
> 标签：c#, winforms

我有一个`ToolStripMenuItem`名为`mailResultsToolStripMenuItem`. 现在我希望它是`.Selected = true`当用户单击它以及`.Selected = false`用户再次单击它时。我试过：

```
mailResultsToolStripMenuItem.Selected = true; 
```

但它显示该属性是*只读*的错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:51:46.763

你在找[`ToolStripMenuItem.Checked`](http://msdn.microsoft.com/en-us/library/system.windows.forms.toolstripmenuitem.checked.aspx)吗？

```
// true if the ToolStripMenuItem is checked or is in an indeterminate state;
// otherwise, false. The default is false.
mailResultsToolStripMenuItem.Checked = true;
// Also interesting: mailResultsToolStripMenuItem.CheckState
//                   mailResultsToolStripMenuItem.CheckOnClick 
```

# ruby - omn iauth 中的 facebook 回调问题

> ID：12692635
> 
> 赞同：0
> 
> 时间：2012-10-02T14:48:14.540
> 
> 标签：ruby, facebook, callback, omniauth

我在我的应用程序中使用omniauth-facebook，我不太确定，但我想我的路由有问题，因为它没有到达我重定向的方法。

```
MyApp::Application.routes.draw do
match '/auth/facebook/callback' => 'user#create'
resources :users

        require 'omniauth'
    class UserController < ApplicationController

      def create
        if User.exists?(:condition => ["email=?",auth_hash["info"]["email"]])
          self.current_user = User.find(:all,:condition => ["email=?",auth_hash["info"]["email"]])
        else
          self.current_user = User.new(:email => auth_hash["info"]["email"])
        redirect_to 'deals#generate_ticket'
      end
        end

def auth_hash
    request.env['omniauth.auth']
  end 

Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, 'XXXXXXXXXXXXXXXXX', 'XXXXXXXXXXXXXXXXX',
      :scope => 'email'
    end 
```

也许我在路线上遗漏了一些东西，或者我没有正确安装 gem。对于每一个帮助，我将真诚地感激不尽。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:14:37.340

您的代码看起来不错，但是：您是否在 gemfile 中添加了以下内容？：

```
gem 'omniauth'
gem 'omniauth-facebook' 
```

你也在使用：需要'omniauth'，也许它应该是'omniauth-facebook'。但我建议您将 gem 添加到 gemfile 中，而不是使用 require。

问候..祝你好运。

# android - Android 上长期运行服务的最佳架构

> ID：12692636
> 
> 赞同：17
> 
> 时间：2012-10-02T14:48:19.800
> 
> 标签：android, service, android-service, android-lifecycle

我将不胜感激有关如何处理操作系统杀死长期服务的一些指导。

**业务场景：**

应用程序记录可能持续数小时的 BTT 轨迹。它还可以在地图上显示轨迹以及相关统计数据。

应用程序用户界面使用户能够开始/停止轨迹记录并在地图上查看实时轨迹。

开始跟踪记录后，用户可以退出应用程序并关闭屏幕（以节省电量），只有一个服务将保持运行以保持记录更新到数据库（显示通知），直到用户再次启动活动并要求停止记录，从而导致服务终止。

**问题：**

在从 40 分钟到 1 个半小时不等的可变时间之后，录制服务在没有任何警告的情况下被终止。由于 BTT 外出可能需要几个小时，这会导致轨迹记录不完整。

**一些附加信息：**

服务启动`START_STICKY`并获得一个`PARTIAL_WAKE_LOCK`, 并在与主要活动相同的进程中运行。

以用户定义的 1 秒到几分钟的速率获取（并记录）新位置。我从 Android 文档中知道，这是长期运行服务的预期操作系统行为。

**问题：**

拥有一个可以满足业务场景要求的表现良好的应用程序的最佳架构设计方法是什么？

我可以想到几个选项（我不喜欢其中任何一个），但我希望得到已经面临和解决类似问题的人的指导：

*   使用广播接收器（如果可能的话，最好连接到位置管理器）让服务仅在获取新位置时运行？
*   不让用户离开主活动（导致用户体验倾倒）？
*   如果需要，是否有一个警报广播接收器重新启动服务？

感谢所有可以在这个问题上分享一些智慧的人。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-02T15:13:18.633

我有一个应用程序可以做非常相似的事情。我通过使其成为前台任务来确保服务继续运行。当我准备好开始运行时，我调用了这个函数，它也设置了一个通知：

```
void fg() {
    Notification notification = new Notification(R.drawable.logstatus, 
                    "Logging On", System.currentTimeMillis());
    Intent notificationIntent = new Intent(this, LoggerActivity.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(this, 0, 
                    notificationIntent, 0);
    notification.setLatestEventInfo(this, "Logger","Logger Running",
                pendingIntent);
    startForeground(1, notification);   
} 
```

然后在记录完成后离开前台模式：

```
stopForeground(true); 
```

# php - PHP：将表格导出到没有隐藏列的 Excel

> ID：12692639
> 
> 赞同：1
> 
> 时间：2012-10-02T14:48:25.420
> 
> 标签：php, jquery, excel

我正在尝试从 Excel 中的 PHP 导出表格。一切都很好，但我需要在 PHP 中使用 JQuery 隐藏一些列。当我将带有隐藏列的表导出到 Excel 时，隐藏列显示为零值。

这是我正在使用的代码：

```
import_request_variables('P');
$title="Table Results";
$var= "Content-Disposition: attachment; filename=".$title.".xls";
header('Content-type: application/vnd.ms-excel');
header($var);
echo $_POST['tableExcel']; 
```

`tableExcel`是带有表格的表格。

导出到 Excel 时有没有办法不包括隐藏列？
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T17:10:11.243

```
header('Content-type: application/vnd.ms-excel'); 
```

这不是 HTML 文件类型。为了操作 HTML，HTML 中需要一个脚本命令或内联脚本才能调用 jQuery。除非您的 Excel 程序具有某种 jQuery 仿真器，否则您要求执行此文件类型无法执行的操作。

但是，如果这是 HTML，您可以这样做：

```
$('#myColumnId').css('display','none'); 
```

# sql - 从 LINQ 获取 SQL 字符串到 EF 查询

> ID：12692640
> 
> 赞同：3
> 
> 时间：2012-10-02T14:48:25.357
> 
> 标签：sql, linq, entity-framework, entity-framework-4

从 EF 获取 sql 查询的最有效方法是什么？我需要这个，所以我可以运行查询分析并找到它的执行计划。

我知道我可以将分析器连接到 SQL 服务器，但是这一步很痛苦，并且对生产力造成了巨大的打击，几乎足以完全放弃 ORM。

是否有更好、更有效的方法来优化 EF 查询？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T14:52:50.743

ToTraceString方法可以为您执行此操作[。](http://msdn.microsoft.com/en-us/library/system.data.objects.objectquery.totracestring.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T14:53:57.143

如果将 IQueryable 转换为 ObjectQuery，则可以使用 ToTraceString() 方法查看 SQL 查询。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T14:56:19.617

> 是否有更好、更有效的方法来优化 EF 查询？

是的，购买[EF Profiler](http://efprof.com/)或[Huagati Profiler](http://www.huagati.com/l2sprofiler/)。或者，使用[EF Provider 包装器](http://code.msdn.microsoft.com/EFProviderWrappers-c0b88f32)进行跟踪。

> 我知道我可以将分析器连接到 SQL 服务器，但是这一步很痛苦，并且对生产力造成了巨大的打击，几乎足以完全放弃 ORM。

Profiler 只是故事的一半。还有数据库引擎优化顾问，如果您真的想优化 SQL 查询，这些工具是主要工具集 - 但是优化您无法控制的 SQL 查询非常困难，有时甚至是不可能的。

# python - Python OR'ing 数组在一起

> ID：12692641
> 
> 赞同：1
> 
> 时间：2012-10-02T14:48:27.707
> 
> 标签：python

有没有更简单的方法：

```
cd = [False,False,True]
ca = [False,False,False]
cp = [False,True,True]

ab[0] = cd[0] or ca[0] or cp[0]
ab[1] = cd[1] or ca[1] or cp[1]
ab[2] = cd[2] or ca[2] or cp[2] 
```

要得到`[False,True,True]`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T14:49:50.547

```
ab = [any(x) for x in zip(cd, ca, cp)] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:51:06.643

您可以使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

```
ab = [cd[x] or ca[x] or cp[x] for x in range(len(cd))] 
```

# wordpress - 在刷新页面之前，我的 wordpress 帖子查询中的永久链接将不起作用

> ID：12692652
> 
> 赞同：1
> 
> 时间：2012-10-02T14:49:09.430
> 
> 标签：wordpress, permalinks

我在我们网站的首页上放了一个查询帖子，将我自己的帖子从公司博客中拉出来。它工作正常，但除非页面在加载后刷新，否则永久链接不起作用。任何帮助理解为什么将不胜感激。谢谢！

这是代码：

```
<div style="float:left; display:inline; margin-left:385px; margin-top:-225px;">
<?php query_posts('showposts=5&author=4'); ?>
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>

<div>

<!-- Display the Title as a link to the Post's permalink. -->

<div id="post-<?php the_ID(); ?>" <?php post_class(); ?>><a href="<?php the_permalink() ?>" rel="bookmark" title="<?php the_title_attribute(); ?>"><?php the_title(); ?></a></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:55:08.687

试着结束你的时间。

```
<?php the_title(); ?></a></div>

<?php endwhile; ?> 
```

# javascript - 如何在客户端使用 PhoneGap1.4 Xcode4.2 HTML5 将 HTML 导出为 PDF

> ID：12692666
> 
> 赞同：0
> 
> 时间：2012-10-02T14:49:46.083
> 
> 标签：javascript, xcode, html, cordova, export-to-pdf

我正在使用 Xcode v4.2、PhoneGap v1.4 和 Mac v10.7.1。我的应用程序运行良好。

如何将当前 HTML 页面导出为 PDF？我想`exportToPdf`在顶部栏上放置一个按钮。

我已经尝试过 jspdf，但它在没有 PhoneGap 的浏览器 Firefox 中成功导出页面。
但我需要这个功能与phonegap。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:55:45.460

也许使用 XSL-FOP？

[http://www.codeproject.com/Articles/37663/PDF-Generation-using-XSLFO-and-FOP](http://www.codeproject.com/Articles/37663/PDF-Generation-using-XSLFO-and-FOP)

# python - 蟒蛇正则表达式。提取模式之间的文本

> ID：12692667
> 
> 赞同：4
> 
> 时间：2012-10-02T14:49:48.017
> 
> 标签：python, regex

如何在下面的“str”中获取“uniprotkb：”和“（基因名称）”之间的所有值：

```
str = 'uniprotkb:HIST1H3D(gene name)|uniprotkb:HIST1H3A(gene name)|uniprotkb:HIST1H3B(gene name)|uniprotkb:HIST1H3C(gene name)|uniprotkb:HIST1H3E(gene name)|uniprotkb:HIST1H3F(gene name)|uniprotkb:HIST1H3G(gene name)|uniprotkb:HIST1H3H(gene name)|uniprotkb:HIST1H3I(gene name)|uniprotkb:HIST1H3J(gene name)' 
```

结果是：

```
HIST1H3D
HIST1H3A
HIST1H3B
HIST1H3C
HIST1H3E
HIST1H3F
HIST1H3G
HIST1H3H
HIST1H3I
HIST1H3J 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T14:54:55.550

使用 re.findall()，您可以获得匹配正则表达式的字符串的所有部分：

```
>>> import re
>>> sstr = 'uniprotkb:HIST1H3D(gene name)|uniprotkb:HIST1H3A(gene name)|uniprotkb:HIST1H3B(gene name)|uniprotkb:HIST1H3C(gene name)|uniprotkb:HIST1H3E(gene name)|uniprotkb:HIST1H3F(gene name)|uniprotkb:HIST1H3G(gene name)|uniprotkb:HIST1H3H(gene name)|uniprotkb:HIST1H3I(gene name)|uniprotkb:HIST1H3J(gene name)' 
>>> re.findall(r'uniprotkb:([^(]*)\(gene name\)', sstr)

['HIST1H3D', 'HIST1H3A', 'HIST1H3B', 'HIST1H3C', 'HIST1H3E', 'HIST1H3F', 'HIST1H3G', 'HIST1H3H', 'HIST1H3I', 'HIST1H3J'] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:58:45.393

这是一个单行：

```
astr = 'uniprotkb:HIST1H3D(gene name)|uniprotkb:HIST1H3A(gene name)|uniprotkb:HIST1H3B(gene name)|uniprotkb:HIST1H3C(gene name)|uniprotkb:HIST1H3E(gene name)|uniprotkb:HIST1H3F(gene name)|uniprotkb:HIST1H3G(gene name)|uniprotkb:HIST1H3H(gene name)|uniprotkb:HIST1H3I(gene name)|uniprotkb:HIST1H3J(gene name)'
[pt.split('(')[0] for pt in astr.strip().split('uniprotkb:')][1:] 
```

给出：

```
['HIST1H3D',
 'HIST1H3A',
 'HIST1H3B',
 'HIST1H3C',
 'HIST1H3E',
 'HIST1H3F',
 'HIST1H3G',
 'HIST1H3H',
 'HIST1H3I',
 'HIST1H3J'] 
```

如果运行时很重要，我不推荐正则表达式解决方案。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T14:55:40.763

我不会打扰正则表达式：

```
s = 'uniprotkb:HIST1H3D(gene name)|uniprotkb:HIST1H3A(gene name)'  # etc

gene_names = []
for substring in s.split('|'):
    removed_first = substring.partition('uniprotkb:')[2]  # remove the first part of the substring
    removed_second = removed_first.partition('(gene name)')[0]  # remove the second part
    gene_names.append(removed_second)  # put it on the list 
```

应该做的伎俩。你甚至可以单行它 - 以上相当于：

```
gene_names = [substring.partition('uniprotkb:')[2].partition('(gene name)')[0] for substring in s.split('|')] 
```

# c# - 为什么通过键盘遍历调用堆栈时出现“不允许更改 64 位应用程序”错误？

> ID：12692675
> 
> 赞同：0
> 
> 时间：2012-10-02T14:50:05.357
> 
> 标签：c#, visual-studio-2010, ide

我了解错误消息的用途，即您不能在 64 位模式下使用“编辑并继续”功能。

但是我只是在遍历调用堆栈时得到错误。

仅当我使用键盘并按下`Return`以跳转到调用堆栈中的某个位置后才会发生这种情况。

但它只是间歇性地发生，即我可以很好地跳转到几个地方，然后下一个地方我会得到错误；这就像 IDE 正在处理`Return`密钥两次，即跳转然后尝试插入换行符。

是否有一些不同的方法可以使用键盘跳过调用堆栈（没有错误），或者为什么我会收到这个错误？

编辑：它似乎只发生在我当前的调用堆栈位置和我的目标调用堆栈位置都在同一个文件中时。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:56:07.510

我收到了这个错误，但只有当我忘记在更改之前停止调试时。所以我会检查以确保您不再调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:01:41.413

听起来你的键盘上有一个狡猾的返回键——就像你说的，你偶尔会得到不止一个返回键——我会尝试换掉键盘，看看是否能解决它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:44:03.063

尝试升级到 Visual Studio 2012 - 在 VS 2012 上进行测试后，我没有看到这种行为。

# .net - 在一个项目中进行单元和集成测试

> ID：12692677
> 
> 赞同：1
> 
> 时间：2012-10-02T14:50:13.010
> 
> 标签：.net, tfs, mstest

如果我想在一个测试项目中结合单元测试和集成测试。如何确保在 CI 自动构建期间我只能运行 unt 测试子集？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T15:05:52.953

您可以注释每个测试 [TestCategory("Unit")] 或 [TestCategory("Integration")]。
将项目编译为两个 dll 会很好，但我不知道方法。

# java - 批处理文件调用Java程序，Java返回值给批处理文件

> ID：12692680
> 
> 赞同：0
> 
> 时间：2012-10-02T14:50:14.523
> 
> 标签：java

Java 程序如何返回批处理文件可以看到的值？在不使用批处理文件的情况下，还有哪些其他选项可以完成此任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:53:16.113

当您调用`System.exit(n)`该值时，该值是批处理脚本可以使用的退出代码或 ERRORLEVEL。

您还可以读取程序的输出或写入的文件的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:51:57.387

您可以重定向`System.out`到文件

```
PrintStream out = new PrintStream(new FileOutputStream("output.txt"));
System.setOut(out); 
```

或使用一些日志库，如[log4j](http://logging.apache.org/log4j/1.2/)

# android - 如何使用机顶盒的遥控器按钮？

> ID：12692682
> 
> 赞同：0
> 
> 时间：2012-10-02T14:50:19.860
> 
> 标签：android, cordova, remote-control

我正在为 Android 机顶盒在 PhoneGap 上开发一个简单的应用程序。

我有一个可用作链接的图像。当我将鼠标连接到机顶盒并单击图像时，链接有效。但是当我使用遥控器并选择图像时（我看到图像周围的边框，所以我知道它已被选中）并单击“确定”按钮，链接不起作用。

如何在代码中使用遥控按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T23:51:14.657

这非常棘手，因为 Google 不想将遥控器上的键映射到实际的键输出。

要使用 setTopBox，您必须弄清楚您的 Android 机顶盒正在使用哪些键码并修改 Activity 的 onKeyUp 事件来处理它。[我们目前有一个解决这个 bug 的例子，](https://issues.apache.org/jira/browse/CB-417)但是我们还没有一个公认的 API 来将这些按钮暴露给 Javascript，这就是[这个 bug](https://issues.apache.org/jira/browse/CB-913)仍然存在的原因。

但简而言之，你会做这样的事情：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
  if (keyCode == KeyEvent.KEYCODE_DPAD_UP) 
  {
    sendJavascript("javascript:myJsMethod('UP');"); 
    return true; 
  }

  return super.onKeyDown(keyCode, event);
} 
```

# iphone - Button 中的图像不更新 (iPhone)

> ID：12692689
> 
> 赞同：0
> 
> 时间：2012-10-02T14:50:41.457
> 
> 标签：iphone, ios, xcode, uibutton, uiimage

我正在为 iOS 开发一个应用程序（仍在学习），并且我有一个类似于组合框的按钮：单击它会打开一个带有表格视图的新场景，显示单击时返回到前一个场景的元素和调用*updatePartner:*方法。到目前为止，它工作得很好。但是当我尝试更新按钮的图像时，它并没有更新它......

```
- (void) updatePartner:(NSInteger)index
{
NSLog(@"updatePartner: %i", index);

NSString *partnerImage = @"";
UIImage *image = @"";
NSString *text = @"";

switch (index)
{
    case 0:
        partnerImage = @"ic_pcmedic_h45.png";
        image = [UIImage imageNamed:partnerImage];
        break;

    case 1:
        partnerImage = @"ic_sapo_h45.png";
        image = [UIImage imageNamed:partnerImage];
        break;

    case 2:
        partnerImage = @"ic_telepac_h45.png";
        image = [UIImage imageNamed:partnerImage];
        break;

    case 3:
        partnerImage = @"ic_meo_h45.png";
        image = [UIImage imageNamed:partnerImage];
        break;

    case 4:
        partnerImage = @"ic_zon_h45.png";
        image = [UIImage imageNamed:partnerImage];
        break;

    case 5:
        partnerImage = @"ic_caboviaso_h45.png";
        image = [UIImage imageNamed:partnerImage];
        break;

    case 6:
        partnerImage = @"ic_artelecom_h45.png";
        image = [UIImage imageNamed:partnerImage];
        break;

    case 7:
        text = @"Ainda não sou cliente";
        break;

    default:
        break;
}

if (index <= 6)
    [[self partnerButton] setImage:image forState:UIControlStateNormal];
else
    [[self partnerButton] setTitle:text forState:UIControlStateNormal];

[[self partnerButton] setNeedsDisplay];
[[self view] setNeedsDisplay];
} 
```

任何帮助将不胜感激！

*更新：*我一直在用这个，但仍然没有弄清楚*....*它不起作用......请帮助！谢谢！

问候，里卡多·阿门多埃拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T01:16:36.720

你可以试试这个...

```
if (index <= 6) {
    [[self partnerButton] setBackgroundImage:image forState:UIControlStateNormal];
} else {
    [[self partnerButton] setTitle:text forState:UIControlStateNormal];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T00:12:55.640

你为 .h 文件中的图像制作了 IBOutlets 吗？

然后你可以这样做：

```
yourimagesetoutlet.image = [UIImage imageNamed: @"imagename.png"]; 
```

试试用这个！！这可能会解决你的问题

做类似的东西

```
switch (index)
{
    case 0:
        yourimagesetoutlet.image = [UIImage imageNamed: @"imagename.png"];

        break;
} 
```

# php - mssql大数据字段未在php中显示

> ID：12692693
> 
> 赞同：-1
> 
> 时间：2012-10-02T14:50:56.833
> 
> 标签：php, html, sql-server

我正在使用具有大量数据的 mssql 服务器后端和新闻字段，但是当我在 php 中检索此信息时，它只显示有限的部分而不是该字段的所有信息

这是我的php代码-

```
$result_subset = mssql_query ("Select news as notes from atimo_m12 where name like 'masses%' and category = 'M-Offices & Ministries'");

while($rsSelection = mssql_fetch_assoc($result_subset)){  
    echo $rsSelection["notes"];     
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:25:53.710

也许这个链接有帮助：[http](http://us3.php.net/manual/en/function.mssql-query.php#64470) ://us3.php.net/manual/en/function.mssql-query.php#64470 看看 php.ini 中的限制：

mssql.textlimit = 16384 mssql.textsize = 16384

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:19:39.767

您可能需要在文件中设置`mssql.textlimit`和设置值。如果缺少这些值，默认值将是字节并导致您的数据在 PHP 中被截断。您可以设置的最大值是字节 - 此值为 2GB 字节，这可能会导致服务器出现内存问题。您应该将其设置为高于您需要支持的最大数据大小`mssql.textsize``php.ini``4096``2147483647`

```
; Valid range 0 - 2147483647\.  Default = 4096.
mssql.textlimit = 2147483647

; Valid range 0 - 2147483647\.  Default = 4096.
mssql.textsize = 2147483647 
```

# ios - iOS 应用程序的网络访问 Ad-Hoc 和 In-House 之间的区别

> ID：12692694
> 
> 赞同：1
> 
> 时间：2012-10-02T14:50:59.757
> 
> 标签：ios

我为我的一位客户开发了一个 iPad 应用程序。为临时分发而签名的版本运行良好。当他们签署它以进行内部分发时，它不再可以连接到他们网络中的资源。以前有人有过类似的经历吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T06:50:54.343

该问题是由读取加密本地存储引起的。这似乎是一个错误。

# clojure - *文件*变量不工作

> ID：12692698
> 
> 赞同：10
> 
> 时间：2012-10-02T14:51:10.893
> 
> 标签：clojure

我[在 API 文档](http://clojuredocs.org/clojure_core/clojure.core/%2afile%2a)中读到该`*file*`变量应该具有“正在评估的文件的路径，作为字符串”的值。但是，在某些情况下，此功能似乎已损坏。

当我使用 执行文件时`lein exec`，事情按预期工作：

```
$ cat test.clj
(println *file*)
$ lein exec test.clj 
/path/to/test.clj 
```

然而，当我运行一个包含对 , 的调用的测试时`(println *file*)`，`NO_SOURCE_PATH`会打印而不是包含该行的文件。

为什么我会看到这种行为，以及如何可靠地访问正在评估的文件的路径和文件名？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-02T15:09:20.267

`*file*`设置为正在**编译**的文件的路径，因此在编译整个程序后，查看 的值不再有用`*file*`（假设不使用 eval）。

在您的`test.clj`示例中，`println`在文件仍在编译时执行。如果将引用`*file*`移动到测试或函数中，则只有在 的值`*file*`不再有用后才会在运行时取消引用。

一种选择是编写一个宏来存储`*file*`扩展时的值，以便以后可以使用结果。例如，一个文件`example.clj`可能有：

```
(defmacro source-file []
  *file*)

(defn foo [x]
  (println "Foo was defined in" (source-file) "and called with" x)) 
```

然后从 REPL 或任何地方`(foo 42)`打印：

```
Foo was defined in /home/chouser/example.clj and called with 42 
```

请注意，在哪个文件中定义无关紧要`source-file`，仅在扩展的位置，即`foo`定义的文件中。这是有效的，因为它是在`foo`编译时`source-file`运行的，其返回值`source-file`只是一个字符串，然后包含在`foo`. 然后，每次`foo`执行时该字符串当然都可用。

如果这种行为令人惊讶，那么考虑必须发生什么以`*file*`在运行时在每个函数中具有有用的值可能会有所帮助。对于每个函数调用和返回，它的值都必须改变，对于一个很少使用的特性来说，这是一个巨大的运行时开销。

# c - 使用预处理器将 char 数组替换为索引

> ID：12692699
> 
> 赞同：1
> 
> 时间：2012-10-02T14:51:10.710
> 
> 标签：c, c-preprocessor

我有一组已知的、预定的函数调用

```
FUNC_A("ABCD");
FUNC_A("EFGH"); 
```

我希望做的是

```
#define FUNC_A("ABCD")     0
#define FUNC_A("EFGH")     1
#define FUNC_A(X)          0xFF 
```

这样整个事情在编译之前就被整数替换了，我可以关闭该值，而不必存储字符串或在运行时进行比较。我意识到我们不能在预处理器中做到这一点，但只是想知道是否有人遇到过一些巧妙的方法来解决这个看似可以解决的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:45:53.333

如果需要，您可以手工进行比较，但这会很乏味。为简单起见，让我们假设我们想要对字符串执行此操作`"AB"`：

```
#define testAB(X) ((X) && (X)[0] == 'A' && (X)[1] == 'B' && !(X)[2]) 
```

这将`1`在字符串等于`"AB"`或`0`其他情况下返回，并且还要注意字符串的长度是否正确，不能超出数组范围等访问。

您唯一需要担心的是参数`X`会被多次评估。如果您传入字符串文字，这不是问题，但对于具有副作用的表达式而言。

对于字符串文字，任何体面的编译器都应该能够在编译时替换这样的表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T14:14:43.163

为了按照您的描述进行操作，避免字符串和运行时比较，我只能想到一个预处理器。是否只是为了快速破解，在 Unix 环境中，我会尝试使用 bash 脚本对预处理器进行简单的包装，该脚本又使用 sed 或 awk 替换提到的函数和参数，然后调用真正的 cpp 预处理器。我认为这只是一个快速破解。

更新：在 linux 和 gcc 中，做一个后预处理器似乎更容易，因为我们可以替换生成的 .i 文件（但我们通常不能用原始的 .c 文件这样做）。为此，我们可以制作一个 cc1 包装器。

警告：这是另一个*危险和丑陋的黑客*。另请参阅[自定义 gcc 预处理器](https://stackoverflow.com/questions/3545875/custom-gcc-preprocessor)

这是用于执行此操作的 cc1 包装器。这是 linux 和 gcc 4.6 的 bash 脚本：

```
#!/bin/bash
# cc1 that does post preprocessing on generated .i files, replacing function calls
#
# note: doing post preprocessing is easier than pre preprocessing, because in post preprocessing we can replace the temporary .i file generated by the preprocessor (in case of doing pre preprocessing, we should change the original .c file -this is unacceptable-; or generate a new temp .c file with our preprocessing before calling the real preprocessor, but then eventual error messages are now referring to the temp .c file..)

convert ()
{  
    local i=$1
    local o=$2

    ascript=$(cat <<- 'EOAWK'
    {
            FUNCT=$1; 
            ARGS=$2; 
            RESULT=$3; 
            printf "s/%s[ \\t]*([ \\t]*%s[ \\t]*)/%s/g\n", FUNCT, ARGS, RESULT;
    } 
EOAWK
    )

    seds=$(awk -F '|' -- "$ascript" << EOFUNCS
FUNC_A|"ABCD"|0
FUNC_A|"EFGH"|1
FUNC_A|X|0xFF
EOFUNCS
    )

    sedfile=$(mktemp --tmpdir prepro.sed.XXX)
    echo -n "$seds" > "$sedfile"

    sed -f "$sedfile" "$i" > "$o"
    rc=$?

    rm "$sedfile"

    return $rc
}

for a
do 
    if [[ $a = -E ]]
    then
            isprepro=1
    elif [[ $isprepro && $a = -o ]]
    then   
            getfile=1
    elif [[ $isprepro && $getfile && $a =~ ^[^-].*[.]i ]]
    then
            ifile=$a
            break
    fi
done

#echo "args:$@"
#echo "getfile=$getfile"
#echo "ifile=$ifile"

realcc1=/usr/lib/gcc/i686-linux-gnu/4.6/cc1
$realcc1 "$@"
rc=$?
if [[ $rc -eq 0 && $isprepro && $ifile ]]
then
    newifile=$(mktemp --tmpdir prepro.XXX.i)
    convert "$ifile" "$newifile" && mv "$newifile" "$ifile"
fi

exit $rc 
```

如何使用它：使用标志*-B*（cc1 包装器所在的目录）和*--no-integrated-cpp调用 gcc*

# javascript - 如何隐藏功能

> ID：12692700
> 
> 赞同：1
> 
> 时间：2012-10-02T14:51:16.317
> 
> 标签：javascript, jquery, javascript-framework

你好，

我有我的主文件，其中包含我的 javascript 文件。

在我的 javascript 文件中，我有这个

```
$(document).ready(function(){

  //some functions here

}); 
```

我想要此页面可用的所有功能，我知道您可以通过执行类似的操作将它们隐藏到 javascript 的外部世界

```
(function(){
$document.ready(function(){
//my functions
)};
}).init(); 
```

但我不是 100% 确定如何调用它，或者它是否正确。

任何对此有所了解的人都会有很大的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:03:28.343

在 javascript 中，函数内声明的所有内容仅在该函数内可用（除非您声明没有关键字 var 的变量）。

因此，您传递给 $().ready() 的函数内的所有内容仅在该函数内可用。

```
$(document).ready(function () {
    //all code here is scoped inside this function, so it can't be accessed
    // outside of this function

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T14:55:33.633

就像第一条评论说你不能对用户隐藏它们，如果他们真的想看到它，他们会看到它。如果你真的想的话，你可以用某种方式清理它们，比如

```
var mySpace = {};
mySpace.init = function() {
    // your init functions here
}; 
```

在文档准备好你只需打电话

```
mySpace.init(); 
```

我不确定这是否是您想要的，但这是我理解问题的方式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T14:59:26.433

```
(function(){
    var secret1 = function(msg) {console.log("Secret Message:" + msg);}
    $document.ready(function(){
        secret1("this can only be called from within");
    )};
})();
secret1("this will cause a script error"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:03:12.943

听起来您正在寻找的东西是“javascript 混淆器”。 [这](http://www.javascriptobfuscator.com/default.aspx)是一个例子。它使代码更难阅读和复制。但正如其他人所说，您实际上无法完全隐藏 javascript。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T15:09:44.080

这里的问题是 JavaScript 本质上是一种*客户端*脚本语言，除非使用诸如[node.js](http://nodejs.org/)之类的服务器端 JavaScript 应用程序。

只要以这种方式使用 JavaScript，就会下载整个代码，就像从网站下载 .txt 文件一样。唯一真正的区别是“.js”扩展名及其包含在 html`<script>`标记或 AJAX 调用中将强制用户的浏览器将其呈现为 JavaScript。

但是，如果您想让用户更难找到脚本，这是可行的。我建议让您的网站通过 AJAX 检索脚本并将其附加到 DOM。您可以使用[require.js](http://requirejs.org/)或使用[Kickstrap](http://getkickstrap.com/apps)并将您的脚本制作成“应用程序”来执行此操作。该脚本不会在 DOM 中显示为链接，用户真的必须搜索它。[您可以通过缩小](http://jscompress.com/)脚本使其变得更加困难（而不损害您网站的完整性） 。这将使它运行得更快，同时无意中使其在前端的可读性降低。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-02T15:10:24.857

在 JavaScript 中只有函数作用域（try-catch 中的异常参数是异常）。ES5 将允许您使用`let`（不是双关语）来实现块范围，但在大多数 UA 实现它之前它不会有用。

所以你的功能对外界是隐藏的，如果在外面你意味着在 dom 准备好的事件之外。

```
$( document ).ready( function () {
    var myFunc = function () {};
} );

myFunc();// <- ReferenceError: myFunc is not defined 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-02T15:14:01.940

您无法真正隐藏这些功能，因为它位于客户端下载的文件的源代码中，但您可以制作它，这样他们就无法从 javascript 访问您的功能。

```
(function() {

    var doStuff = function() {
        // Not Accessible
        console.log('You can\'t reach me!');
    }

    return {
        'init': function() {
            // Accessible
            doStuff();
        }
    }

})().init(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-02T20:15:32.943

如果您正在谈论访问修饰符`public`，例如`private`等。然后查看[这篇文章](http://zaman91.wordpress.com/tag/javascript-access-modifier/)，了解 Javascript 如何处理这个问题。以下是关键组件：

```
//constructor function (class)
function Maths(x, y) {
//public properties
    this.x =x;
    this.y = y;

    //public methods
    this.add = function () { _sum = x + y; return _sum; }
    this.mod = function () { _mod = x % y; return _mod; }

    //public method calls private method
    this.show = function () {
    this.add();
    this.mod();
    showResult();
}

//private variables
var _sum=0;
var _mod=0;

//private methods
function showResult() {
    alert( "sum: " + _sum + ", mod: " + _mod );
}

}
//end function

//create instance
var plus = new Maths(3, 4);
plus.show();

//static method multiply, you can use it without instance of Maths
Maths.multiply = function (x,y) {  return x * y; }

//call static method by constructor function (class) without instance of Maths
var result = Maths.multiply(5,7);
alert(result);
//output: 35 
```

# regex - 多平台脚本 perl 或 awk

> ID：12692701
> 
> 赞同：1
> 
> 时间：2012-10-02T14:51:23.533
> 
> 标签：regex, perl, awk, backslash, eol

我正在尝试匹配以下格式的记录：

```
(-,username,domain1.co.uk)\
(-,username,domain2.co.uk) 
```

必须使用 awk 或 perl。我正在使用 cygwin 并编写了以下代码，该代码有效并匹配上述两个条目：

```
awk 'BEGIN {musr="(-,username,[^)]+.co.uk)"} {if ($0~musr) print $0}' netgroup 
```

但是，如果我尝试将这个正则表达式修改为更具体，则输出什么都不是：

第一个：匹配记录，然后是最后一个反斜杠，然后匹配换行符：

```
"(-,username,[^)]+.co.uk)\\$" 
```

第二：在没有反斜杠的情况下记录后立即匹配新行：

```
"(-,username,[^)]+.co.uk)$" 
```

所以我决定把script改写成perl，希望perl可以处理反斜杠和行尾符号。为此，我以这种方式使用 a2p：

```
echo  'BEGIN {musr="(-,username,[^)]+.co.uk)"} {if ($0~musr) print $0}' | a2p.exe 
#!/usr/bin/perl
eval 'exec /usr/bin/perl -S $0 ${1+"$@"}'
    if $running_under_some_shell;
                        # this emulates #! processing on NIH machines.
                        # (remove #! line above if indigestible)

eval '$'.$1.'$2;' while $ARGV[0] =~ /^([A-Za-z_0-9]+=)(.*)/ && shift;
                        # process any FOO=bar switches

$, = ' ';               # set output field separator
$\ = "\n";              # set output record separator

$musr = '(-,username,[^)]+.co.uk)';

while (<>) {
    chomp;      # strip record separator
    if ($_ =~ $musr) {
        print $_;
    }
} 
```

这个生成的 perl 脚本也匹配这两个条目，但是如果我尝试将此脚本修改为更具体，我会收到以下错误：

第一个：

```
$musr = "(-,username,[^)]+.co.uk)\\";
Trailing \ in regex m/(-,username,[^)]+.co.uk)\/ at perlmatch.pl line 18, <> line 1. 
```

第二：

```
$musr = "(-,username,[^)]+.co.uk)$";
Final $ should be \$ or $name at perlmatch.pl line 14, within string
syntax error at perlmatch.pl line 14, near "= "(-,username,[^)]+.co.uk)$""
Execution of perlmatch.pl aborted due to compilation errors. 
```

第三：

```
$musr = "(-,username,[^)]+.co.uk)\$";
[the output is nothing] 
```

我做错了什么？我的问题还指出，如果有人需要在多个平台（aix、solaris、linux）上使用脚本而不是使用 perl 应该是处理（非）GNU utils 和各种（g|n）awk 版本等更好的方法。问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T14:59:07.327

```
(-,username,[^)]+.co.uk)\\$ 
```

这里的问题不在于行尾的反斜杠，而在于括号。括号用于分组。您需要对它们进行转义以匹配文字`(` `)`字符。您还应该转义这些点，以便它们匹配文字点而不是“任何字符”。

```
$ awk '/\(-,username,[^)]+\.co\.uk\)$/   {print}' netgroup 
(-,username,domain2.co.uk)
$ awk '/\(-,username,[^)]+\.co\.uk\)\\$/ {print}' netgroup 
(-,username,domain1.co.uk)\ 
```

如果你坚持使用普通的 awk 并且不使用 [gn]awk 特有的功能，那么 awk 是非常便携的。我认为比 perl 更便携。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:03:08.347

您的问题来自 Perl 中的字符串引用。

`$musr = "(-,username,[^)]+.co.uk)\\";`创建字符串时替换`\\`为单个反斜杠。但是您需要将两个反斜杠传递给正则表达式。因此，您必须在创建字符串时输入四个。

`$musr = "(-,username,[^)]+.co.uk)$";`尝试在字符串中执行变量插值。

此外，正如 John Kugelman 所指出的，括号应该被转义。

解决方案是对正则表达式使用 Perl 的内置分隔符，而不是普通的带引号的字符串。简单的方法是将它直接放入您的循环中：

```
while (<>) {
    chomp;      # strip record separator
    if ($_ =~ /\(-,username,[^)]+.co.uk\)$/) {
        print $_;
    }
} 
```

如果确实需要先将模式放入变量中，请使用特殊[`qr//`](http://perldoc.perl.org/perlop.html#Regexp-Quote-Like-Operators) 运算符。

```
my $musr = qr/\(-,username,[^)]+.co.uk\)$/;
while (<>) {
    chomp;      # strip record separator
    if ($_ =~ $musr) {
        print $_;
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:03:02.187

括号必须被转义。否则，它们将表达式分组。更具体地说，在行尾匹配一个可选的反斜杠（反斜杠加倍，因为作为字符串，它们也必须被转义）。

```
awk 'BEGIN {musr="\\(-,username,[^)]+.co.uk\\)\\\\?$"} {if ($0~musr) print $0}' netgroup 
```

# iphone - 比较两个字符串，如日期

> ID：12692709
> 
> 赞同：0
> 
> 时间：2012-10-02T14:51:45.303
> 
> 标签：iphone, ios, nsdate, nsdateformatter, nsdatepicker

需要比较两个 NSDate 类型的变量。一个是当前日期，另一个是用户选择的日期。

用户选择日期：

```
UIDatePicker *datePicker;   // declared in h file

-(void)dateChange:(id)sender{
NSDateFormatter *df = [[NSDateFormatter alloc] init];
[df setDateFormat:@"dd-MM-yyy"];
dateLabel.text = [NSString stringWithFormat:@"%@", [df stringFromDate:datePicker.date]];

userDebtInfo.duration = dateLabel.text;} 
```

验证方法：

```
-(IBAction) validation:(id)sender{
NSDate *today = [NSDate date];

NSDateFormatter *dateFormat = [[NSDateFormatter alloc] init];
NSString *dateString = [dateFormat stringFromDate:today];

[dateFormat release];

 if ((userDebtInfo.debt_code == userTmp.debt_code) && ([userDebtInfo.duration compare:dateString]== NSOrderedDescending)))
            [bl updateUserMoneyValidation:userDebtInfo];  
 else
      [bl saveUserMoneyValidation:userDebtInfo];} 
```

我已经测试并正在比较两个字符串。有人可以帮我就这种情况提供一些建议吗？我想比较所选日期是否在当前日期之后插入或更新数据库。

   谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T03:50:32.673

您可以使用 NSDate**比较**功能

```
if([firstDate compare:secondUpdate] == NSOrderedAscending){
       //This will return YES if secondUpdate is the recent date between the two dates
} 
```

NSOrderedAscending 是 NSComparisonResult 的一个常量 以下是您可以比较的其他常量：

```
enum {
 NSOrderedAscending = -1,
 NSOrderedSame,
 NSOrderedDescending
};
typedef NSInteger NSComparisonResult; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:07:24.000

如果您已经有两个 NSDate 类型的对象，则可以使用其中一种 NSDate 比较方法。例如`[NSDate compare:]`返回 a `NSComparisonResult`（这与返回的枚举相同`[NSString compare:]`）。

# java - Java中的金字塔和计数器

> ID：12692714
> 
> 赞同：-4
> 
> 时间：2012-10-02T14:52:02.043
> 
> 标签：java, for-loop

我有这个倒金字塔：

```
 String spaces = "";

         int x =0;
             int counter = fulllName.length();

         for( x = 0; x < fullName.length()/2; x++ ) 
         {
             System.out.println(counter-x + "[" + spaces + fullName.substring(x, fullName.length()-x) + "]");
             spaces = spaces + " ";
         } 
```

我想让它在每行的开头打印每行的长度，但作为金字塔本身的一部分。我还想将每一行括在括号 [ ] 中，但行的长度在括号之外。当我尝试时，它会打印如下：

```
 7[ 1111111]
     7[  11111]
     7[   111]
     7[    1] 
```

我想要这样的东西：

```
 7[1111111]
     5[11111]
      3[111]
       1[1]
        0[] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T14:54:48.440

只需在打印语句中替换`counter-x + "[" + spaces`为。`spaces + counter-x + "["`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:54:00.187

不应该是：

```
spaces + fullName.length()-x + "[" + fullName.substring(x, fullName.length()-x + "]" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T14:55:45.490

改变

```
for( x = 0; x < fullName.length()/2; x++ ) 
{
     System.out.println(counter-x + "[" + spaces + fullName.substring(x, fullName.length()-x) + "]");
     spaces = spaces + " ";
} 
```

至

```
for( x = 0; x < fullName.length()/2; x++ ) 
{
   System.out.println(spaces + counter-x + "[" + fullName.substring(x, full Name.length()-x) + "]");
   spaces = spaces + " ";
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-02T14:59:53.687

你在括号中有空格，你的 println() 应该是：

```
System.out.println(spaces + (counter - x) + "[" + fullName.substring(x, fullName.length() - x) + "]"); 
```

# java - 在远程/虚拟磁盘上进行“真正的”Java 刷新

> ID：12692717
> 
> 赞同：5
> 
> 时间：2012-10-02T14:52:07.130
> 
> 标签：java, vmware, flush, nas

我正在寻找“技巧”或“黑客”来确定文件已保存在**远程**磁盘上，通过 vmware 缓存、NAS 缓存等。

刷新和关闭 FileOutputStream 是不够的。我认为 Channel.force(true) 两者都不是。

我正在考虑这样的事情：

*   写入文件并读回文件
*   写入文件，检查时间戳，重命名文件，检查不同的时间戳
*   用“错误的内容”写入文件，用原始内容覆盖，读回并检查内容

也许有人遇到了同样的问题并找到了解决方案。

我的要求是不要丢失数据。Java 应用程序以这种方式工作：

1.  接受来自远程源的文件
2.  添加数字签名和经过认证的时间戳以创建新文件。如果此文件丢失，则无法以任何方式重新创建。
3.  将此文件写入存储
4.  在数据库上将文件标记为已签名
5.  告诉对端一切正常

今晚我们在第 5 步之后但在数据实际刷新到远程存储之前发生了崩溃，三个事务失败了。所以数据库说一切都很好，远程端被告知相同，但 15 秒的签名数据丢失了。这不好。

正确的解决方案可能是对远程文件系统进行“同步挂载”。但这不会在短时间内发生。即使在这种情况下，我也不完全相信这种情况，因为该应用程序正在 VMWare 服务器上运行。

所以我想有一个“尽力而为”来防止（减轻）像这样的事件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T16:28:55.880

让我们从一个假设开始：您不能保证对任何单个磁盘的任何一次写入。在您的写入和磁盘盘片之间有太多的软件*和硬件层。*即使你能保证写入，你也不能保证数据是可读的。磁盘可能会在写入和读取之间崩溃。

*唯一*的解决方案是冗余，由框架（例如，RDMS）或您的应用程序提供。

当您收到并签署文件时，您需要将其发送到不同物理主机上的多个目的地，并等待他们回复他们保存了文件。其中一个可能会崩溃。其中两个可能会崩溃。数据的重要性将决定您需要多少远程主机。

顺便说一句，冗余也适用于您的数据库。事务已提交这一事实并不意味着您能够在数据库崩溃后恢复它（尽管 DBMS 工程师在确保写入方面比您或我有*更多*的经验，但所有这一切都取决于了解事物的系统管理员比如“日志和数据文件必须驻留在不同的物理驱动器上）。我强烈建议您（冗余地）将足够的元数据与文件一起存储，以便能够重建数据库条目。

# spring - 具有多个 EntityManagerFactory 的 EhCache CacheManager

> ID：12692718
> 
> 赞同：2
> 
> 时间：2012-10-02T14:52:09.870
> 
> 标签：spring, ehcache, entitymanager

spring-server.xml 中有一个 entityManagerFactory。

但我必须再生成一个 entityManager，我用

```
Persistence.createEntityManagerFactory("myotherpersistenceunitname"); 
```

但我得到了例外

```
Caused by: net.sf.ehcache.CacheException: Another unnamed CacheManager already exists in the same VM. Please provide unique names for each CacheManager in the config or do one of following:
1\. Use one of the CacheManager.create() static factory methods to reuse same CacheManager with same name or create one if necessary
2\. Shutdown the earlier cacheManager before creating new one with same name.
The source of the existing CacheManager is: DefaultConfigurationSource [ ehcache.xml or ehcache-failsafe.xml ]
    at net.sf.ehcache.CacheManager.assertNoCacheManagerExistsWithSameName(CacheManager.java:457)
    at net.sf.ehcache.CacheManager.init(CacheManager.java:354)
    at net.sf.ehcache.CacheManager.<init>(CacheManager.java:242)
    at net.sf.ehcache.hibernate.EhCacheRegionFactory.start(EhCacheRegionFactory.java:70) 
```

春天.xml：

```
<context:property-placeholder location="classpath:application.properties"/>
    <context:component-scan base-package="merve.web.app" >
     <context:exclude-filter expression="org.springframework.stereotype.Controller" type="annotation" />
    </context:component-scan>
    <context:annotation-config/>
    <tx:annotation-driven transaction-manager="txManager" proxy-target-class="true"  />

    <cache:annotation-driven />

    <bean id="properties" class="merve.web.app.configuration.PropertyResourceConfiguration" />

    <bean id="entityManagerFactory"  
          class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">  
         <property name="persistenceUnitName" value="myPU"/>  
         <property name="dataSource" ref="dataSource" />  
         <property name="jpaVendorAdapter">  
             <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">  
                 <property name="databasePlatform" value="${database.target}"/>  
                 <property name="showSql" value="${database.showSql}" />  
             </bean>
         </property>  
    </bean>  

    <bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource">
        <property name="driverClass" value="${database.driver}"/>
        <property name="jdbcUrl" value="${database.url}"/>
        <property name="user" value="${database.username}"/>
        <property name="password" value="${database.password}"/>
        <property name="minPoolSize" value="2"/>
        <property name="maxPoolSize" value="10"/>
        <property name="breakAfterAcquireFailure" value="false"/>
        <property name="acquireRetryAttempts" value="3"/>
        <property name="idleConnectionTestPeriod" value="300" />
        <property name="testConnectionOnCheckout" value="true" />
    </bean>

    <bean id="txManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <bean id="jamesEntityManagerFactory"  
          class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">  
         <property name="persistenceUnitName" value="jamesPU"/>  
         <property name="dataSource" ref="dataSourceJames" />
         <property name="persistenceXmlLocation" value="classpath:META-INF/james-persistence.xml"/> 
         <property name="jpaVendorAdapter">  
             <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">  
                 <property name="databasePlatform" value="org.hibernate.dialect.MySQL5InnoDBDialect"/>  
                 <property name="showSql" value="true" />  
             </bean>
         </property>   
    </bean>  

    <bean id="dataSourceJames" class="com.mchange.v2.c3p0.ComboPooledDataSource">
        <property name="driverClass" value="org.apache.derby.jdbc.EmbeddedDriver"/>
        <property name="jdbcUrl" value="jdbc:derby:../var/store/derby;create=true"/>
        <property name="user" value="app"/>
        <property name="password" value="app"/>
        <property name="minPoolSize" value="2"/>
        <property name="maxPoolSize" value="10"/>
        <property name="breakAfterAcquireFailure" value="false"/>
        <property name="acquireRetryAttempts" value="3"/>
        <property name="idleConnectionTestPeriod" value="300" />
        <property name="testConnectionOnCheckout" value="true" />
    </bean>

    <bean class="org.springframework.orm.jpa.support.PersistenceAnnotationBeanPostProcessor" />

     <bean id="messageSource" class="org.springframework.context.support.ResourceBundleMessageSource">  
        <property name="basenames">  
            <list>
                <value>messages</value>
            </list>
        </property>
    </bean>

    <!-- Ehcache library setup -->
    <bean id="ehcache" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean" p:shared="true" p:config-location="classpath:ehcache.xml"/>

    <bean id="cacheManager"   class="org.springframework.cache.ehcache.EhCacheCacheManager" >
     <property name="cacheManager"><ref local="ehcache"></ref></property>  
    </bean>

<dwr:configuration/>
    <dwr:annotation-scan base-package="tuxi.web.app.service.dwr" scanRemoteProxy="true" scanDataTransferObject="true"/>
    <dwr:url-mapping />

    <dwr:controller id="dwrController"/>

</beans> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-08-04T17:58:51.737

[此处](http://java.dzone.com/articles/spring-31-caching-and-ehcache)描述并在[源代码](https://github.com/spring-projects/spring-framework/blob/a9605a11e98d2b1f225aca1b5989c41a6b231cf8/spring-context-support/src/main/java/org/springframework/cache/ehcache/EhCacheManagerFactoryBean.java#L150)中修复的问题是未正确使用 EhCache 单例。答案取决于`spring-context-support`您使用的 EhCache 版本和版本。对于这两者，您需要使用**EhCache 2.6 或更高版本**：

```
<dependency>
    <groupId>net.sf.ehcache</groupId>
    <artifactId>ehcache</artifactId>
    <version>2.6.0</version>
</dependency> 
```

接下来，根据您的`spring-context-support`版本确定要执行的操作：

## 如果使用 Spring 3.1/3.2

```
<bean id="ehcache" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean"
    p:shared="true" 
    p:config-location="classpath:ehcache.xml"/> 
```

## 如果使用 Spring 4.x

```
<bean id="ehcache" class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean"
    p:shared="false"
    P:acceptExisting="true" 
    p:config-location="classpath:ehcache.xml"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-18T20:37:16.873

尝试在 ehcache.xml 中以不同的方式命名两个缓存管理器

```
<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    name="ehCacheManager1">

<ehcache xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    name="ehCacheManager2"> 
```

# css - bootstrap-maven 类的 css 类覆盖

> ID：12692719
> 
> 赞同：1
> 
> 时间：2012-10-02T14:52:10.873
> 
> 标签：css, maven, twitter-bootstrap

我熟悉如何覆盖引导 css 类，并且我已经成功地更改了固定导航栏的背景颜色。但是，我最近在我的项目中创建了 bootstrap.css 和 bootstrap-responsive.css 文件 maven 依赖项，因此从我的源代码中删除了这些文件。现在 navbar-inner 的覆盖不存在，并且导航栏已恢复为默认颜色。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T14:56:41.887

您可以只覆盖自定义样式表中的样式。一定要在 bootstrap.css 和 bootstrap-responsive.css 之后调用你的样式表

# php - 如何用 PHP 制作计算器？

> ID：12692727
> 
> 赞同：6
> 
> 时间：2012-10-02T14:52:39.593
> 
> 标签：php

我想使用 PHP 来计算简单的代数表达式，例如 ,由普通用户`8*(5+1)`通过`<input>`标签输入（这意味着，**正常表示法**：没有语法变化，例如`Multiply(8, Add(5, 1)))`。此外，它必须显示所有步骤，但这并不难。问题，现在，正在计算表达式的值。

注意：这是我到目前为止的想法，效率很低，但它是一种临时解决方案。尽可能替换字符串：在我们的示例中，识别字符串`5+1`并将其替换为`6`. 然后，再次循环，替换`(6)`为`6`，再次循环，替换`8*6`为`48`。例如，乘法代码应如下所示：

```
for ($a=1; $a < 1000; $a++) {
    for ($b=1; $b < 1000; $b++) {
        string_replace($a . '*' . $b, $a*$b, $string);
    }
} 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-02T15:35:42.740

根据您的需要，我建议您研究[Shutting Yard Algorithm](http://en.wikipedia.org/wiki/Shunting-yard_algorithm)。它很容易实现，而且效果很好。

这是我不久前提出的一个例子：[GIST](https://gist.github.com/1232629)。

这是代码复制/粘贴到一个块中：

表达式定义：

```
class Parenthesis extends TerminalExpression {

    protected $precidence = 7;

    public function operate(Stack $stack) {
    }

    public function getPrecidence() {
        return $this->precidence;
    }

    public function isNoOp() {
        return true;
    }

    public function isParenthesis() {
        return true;
    }

    public function isOpen() {
        return $this->value == '(';
    }

}

class Number extends TerminalExpression {

    public function operate(Stack $stack) {
        return $this->value;
    }

}

abstract class Operator extends TerminalExpression {

    protected $precidence = 0;
    protected $leftAssoc = true;

    public function getPrecidence() {
        return $this->precidence;
    }

    public function isLeftAssoc() {
        return $this->leftAssoc;
    }

    public function isOperator() {
        return true;
    }

}

class Addition extends Operator {

    protected $precidence = 4;

    public function operate(Stack $stack) {
        return $stack->pop()->operate($stack) + $stack->pop()->operate($stack);
    }

}

class Subtraction extends Operator {

    protected $precidence = 4;

    public function operate(Stack $stack) {
        $left = $stack->pop()->operate($stack);
        $right = $stack->pop()->operate($stack);
        return $right - $left;
    }

}

class Multiplication extends Operator {

    protected $precidence = 5;

    public function operate(Stack $stack) {
        return $stack->pop()->operate($stack) * $stack->pop()->operate($stack);
    }

}

class Division extends Operator {

    protected $precidence = 5;

    public function operate(Stack $stack) {
        $left = $stack->pop()->operate($stack);
        $right = $stack->pop()->operate($stack);
        return $right / $left;
    }

}

class Power extends Operator {

    protected $precidence=6;

    public function operate(Stack $stack) {
        $left = $stack->pop()->operate($stack);
        $right = $stack->pop()->operate($stack);
        return pow($right, $left);
    }
}

abstract class TerminalExpression {

    protected $value = '';

    public function __construct($value) {
        $this->value = $value;
    }

    public static function factory($value) {
        if (is_object($value) && $value instanceof TerminalExpression) {
            return $value;
        } elseif (is_numeric($value)) {
            return new Number($value);
        } elseif ($value == '+') {
            return new Addition($value);
        } elseif ($value == '-') {
            return new Subtraction($value);
        } elseif ($value == '*') {
            return new Multiplication($value);
        } elseif ($value == '/') {
            return new Division($value);
        } elseif ($value == '^') {
            return new Power($value);
        } elseif (in_array($value, array('(', ')'))) {
            return new Parenthesis($value);
        }
        throw new Exception('Undefined Value ' . $value);
    }

    abstract public function operate(Stack $stack);

    public function isOperator() {
        return false;
    }

    public function isParenthesis() {
        return false;
    }

    public function isNoOp() {
        return false;
    }

    public function render() {
        return $this->value;
    }
} 
```

堆栈（非常简单的实现）：

```
class Stack {

    protected $data = array();

    public function push($element) {
        $this->data[] = $element;
    }

    public function poke() {
        return end($this->data);
    }

    public function pop() {
        return array_pop($this->data);
    }

} 
```

最后，执行者类：

```
class Math {

    protected $variables = array();

    public function evaluate($string) {
        $stack = $this->parse($string);
        return $this->run($stack);
    }

    public function parse($string) {
        $tokens = $this->tokenize($string);
        $output = new Stack();
        $operators = new Stack();
        foreach ($tokens as $token) {
            $token = $this->extractVariables($token);
            $expression = TerminalExpression::factory($token);
            if ($expression->isOperator()) {
                $this->parseOperator($expression, $output, $operators);
            } elseif ($expression->isParenthesis()) {
                $this->parseParenthesis($expression, $output, $operators);
            } else {
                $output->push($expression);
            }
        }
        while (($op = $operators->pop())) {
            if ($op->isParenthesis()) {
                throw new RuntimeException('Mismatched Parenthesis');
            }
            $output->push($op);
        }
        return $output;
    }

    public function registerVariable($name, $value) {
        $this->variables[$name] = $value;
    }

    public function run(Stack $stack) {
        while (($operator = $stack->pop()) && $operator->isOperator()) {
            $value = $operator->operate($stack);
            if (!is_null($value)) {
                $stack->push(TerminalExpression::factory($value));
            }
        }
        return $operator ? $operator->render() : $this->render($stack);
    }

    protected function extractVariables($token) {
        if ($token[0] == '$') {
            $key = substr($token, 1);
            return isset($this->variables[$key]) ? $this->variables[$key] : 0;
        }
        return $token;
    }

    protected function render(Stack $stack) {
        $output = '';
        while (($el = $stack->pop())) {
            $output .= $el->render();
        }
        if ($output) {
            return $output;
        }
        throw new RuntimeException('Could not render output');
    }

    protected function parseParenthesis(TerminalExpression $expression, Stack $output, Stack $operators) {
        if ($expression->isOpen()) {
            $operators->push($expression);
        } else {
            $clean = false;
            while (($end = $operators->pop())) {
                if ($end->isParenthesis()) {
                    $clean = true;
                    break;
                } else {
                    $output->push($end);
                }
            }
            if (!$clean) {
                throw new RuntimeException('Mismatched Parenthesis');
            }
        }
    }

    protected function parseOperator(TerminalExpression $expression, Stack $output, Stack $operators) {
        $end = $operators->poke();
        if (!$end) {
            $operators->push($expression);
        } elseif ($end->isOperator()) {
            do {
                if ($expression->isLeftAssoc() && $expression->getPrecidence() <= $end->getPrecidence()) {
                    $output->push($operators->pop());
                } elseif (!$expression->isLeftAssoc() && $expression->getPrecidence() < $end->getPrecidence()) {
                    $output->push($operators->pop());
                } else {
                    break;
                }
            } while (($end = $operators->poke()) && $end->isOperator());
            $operators->push($expression);
        } else {
            $operators->push($expression);
        }
    }

    protected function tokenize($string) {
        $parts = preg_split('((\d+|\+|-|\(|\)|\*|/)|\s+)', $string, null, PREG_SPLIT_NO_EMPTY | PREG_SPLIT_DELIM_CAPTURE);
        $parts = array_map('trim', $parts);
        return $parts;
    }

} 
```

它首先对输入进行标记（基于单词边界和标记）。然后，它在其上运行 Shutting Yard 算法以将输入转换为 RPN（反向波兰表示法）堆栈。然后，这只是执行堆栈的问题。这是一个简单的例子：

```
$math = new Math();

$answer = $math->evaluate('(2 + 3) * 4');
var_dump($answer);
// int(20)

$answer = $math->evaluate('1 + 2 * ((3 + 4) * 5 + 6)');
var_dump($answer);
// int(83)

$answer = $math->evaluate('(1 + 2) * (3 + 4) * (5 + 6)');
var_dump($answer);
// int(231)

$math->registerVariable('a', 4);
$answer = $math->evaluate('($a + 3) * 4');
var_dump($answer);
// int(28)

$math->registerVariable('a', 5);
$answer = $math->evaluate('($a + $a) * 4');
var_dump($answer);
// int(40) 
```

现在，这个示例比您可能需要的要复杂得多。原因是它还处理分组和运算符优先级。但这是不使用 EVAL 并支持变量的运行算法的一个不错的例子......

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T15:02:54.577

有一个名为[bcParserPHP](http://www.bestcode.com/html/math_parser_for_php.html)的数学解析器类可能很有趣。

看起来相当简单易用且功能强大。

他们网站上的示例代码：

```
$parser = new MathParser();
$parser->setVariable('X', 5);
$parser->setVariable('Y', 2);
$parser->setExpression('COS(X)+SIN(Y)/2');
echo $parser->getValue(); 
```

不幸的是，它是一种商业产品。我不知道这是否会阻止您使用它（我猜这取决于价格和您的需求）。

一个非商业的替代品可能是这个：[http ://www.phpclasses.org/package/2695-PHP-Safely-evaluate-mathematical-expressions.html](http://www.phpclasses.org/package/2695-PHP-Safely-evaluate-mathematical-expressions.html)

请注意，此类在`eval()`内部使用，如果可能，我会避免这样做。

如果做不到这一点，编写自己的语言解析器将是理想的解决方案，但在 PHP 中这样做并不明智。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T14:57:48.533

我将首先剥离不应该出现在表达式中的任何输入（假设您只想允许加、减、乘、除，并且没有变量）：

```
 $expr = preg_replace('/[^0-9+*\/-]/', '', $expr); 
```

然后，一旦我确信用户输入中没有任何危险，只需通过 eval() 传递它来评估表达式：

```
 $result = eval("return $expr;"); 
```

无需重新发明轮子。

**编辑**以合并 Kolink 的更正。谢谢！

# django - 我应该把我的 Postgres 目录放在我的项目文件夹旁边吗？如果是这样，怎么做？

> ID：12692732
> 
> 赞同：0
> 
> 时间：2012-10-02T14:52:56.910
> 
> 标签：django, postgresql

我正在尝试使用 Heroku 开发一个 Django 网站。以前没有数据库经验（教程中的 sqlite3 除外），在我看来，具有以下文件结构是个好主意：

```
Projects
'-MySite
  |-MySite
  '-MyDB 
```

我发现很难弄清楚如何做到这一点，而`psql`命令更喜欢将数据库放在某个不起眼的目录中。也许这不是一个好主意？

最终我希望能够在本地测试和开发我的网站（暂时只是一个博客，我还在学习）（即添加帖子，使用 CSS）并与 Heroku 存储库同步，但我也希望能够偶尔通过网站本身添加帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:01:38.977

底层数据文件 (MyDb) 与您的项目文件无关，不应*在*您的项目下。

**EDIT** 添加了两种方法将本地数据库与 Heroku 服务器上的数据库同步

1) 进出口

这是最简单的方法，不时执行以下步骤：

*   [使用pg_dump](http://www.postgresql.org/docs/9.1/static/app-pgdump.html)实用程序在 Heroku 服务器上进行*导出*
*   下载转储文件
*   *使用[psql](http://www.postgresql.org/docs/9.1/static/app-psql.html)实用程序将转储*导入本地数据库**

 *2) 复制

保持本地数据库始终同步的一种更复杂的方法是*Replication*。它用于专业环境，目前对您来说可能是一种矫枉过正。你可以在这里阅读更多关于它的信息：[http ://www.postgresql.org/docs/9.1/static/high-availability.html](http://www.postgresql.org/docs/9.1/static/high-availability.html)*

# python - 使用 python（或 perl 等）从 500 MB tsv 文件中删除多列

> ID：12692735
> 
> 赞同：1
> 
> 时间：2012-10-02T14:53:03.743
> 
> 标签：python, r

我有一个非常大的 tsv 文件，需要删除几列。我找到了 CSV 模块，并找到了一个类似问题的答案（参见下面的脚本）。然而，我需要删除大量列，并且不想键入要删除的每列的每个索引。即从具有 689513 列的文件中，我想删除第 628715 到 650181 列，也想删除第 653321 到 689513 列。（如果删除这两组太难，我可以只删除最后一组，即653321 到 689613，或等效的 653321 到文件末尾）。对不起，基本问题；我是脚本新手并且迷路了......并且CSV模块页面没有详细介绍删除列范围。我尝试在 R 中执行此操作，但第一个单元格条目为空白（请参见代码下方的示例列表）。我的文件是一个 tsv 制表符分隔文件，但我认为可以使用命令将分隔符设置为 \t 来纠正它。任何帮助是极大的赞赏！！！（注意：不幸的是，我的列名中需要有冒号，即 2L:1274 完全是一列的名称）。

```
import csv
with open("source","rb") as source:
rdr= csv.reader( source )
with open("result","wb") as result:
    wtr= csv.writer( result )
    for r in rdr:
        wtr.writerow( (r[0], r[1], r[3], r[4]) )

2L:1274 2L:2425 2L:2853 3L:4    3L:5    3L:7
indivBCsusceptiblePL7A10_TATAGT NA  NA  NA  NA  NA  NA
indivBCsusceptiblePL7A11_CCTGAA NA  5   NA  NA  NA  NA
indivBCsusceptiblePL7A12_CAATAT NA  NA  6   7   8   9
indivBCsusceptiblePL7A1_CCGAAT  NA  NA  NA  NA  NA  NA 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:33:53.070

您可以使用`del`删除列表的切片。

```
with open('in.tsv', 'r') as fin, open('out.tsv', 'w') as fout:
    reader = csv.reader(fin, dialect='excel-tab')
    writer = csv.writer(fout, dialect='excel-tab')
    for row in reader:
        # delete indices in reverse order to avoid shifting earlier indices
        del row[653321:689513+1]
        del row[628715:650181+1]
        writer.writerow(row) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T16:29:03.243

您可以使用 Python 以非常少的内存来执行此操作。

首先定义一种描述您的 tsv 格式的方言。有关更多信息，请参阅[有关方言的文档](http://docs.python.org/library/csv.html#csv-fmt-params)。

```
class TsvDialect(csv.Dialect):
    delimiter = '\t'
    quoting = csv.QUOTE_NONE
    escapechar = None

# you can just pass this class around, or you can register it under a name
csv.register_dialect('tsv', TsvDialect) 
```

然后你可以遍历每一行并复制到一个新的 tsv：

```
with open('source.tsv', 'rb') as src, open('result.tsv', 'wb') as res:
    csrc = csv.reader(src, dialect='tsv')
    cres = csv.writer(res, dialect='tsv')
    for row in csrc:
        cres.writerow(row) 
```

这是一个简单的副本。由于您只想要一些行，因此我们只复制这些行。

Python 的列表是零索引的（第一列是第 0 列，而不是第 1 列）；并且索引切片不包括最后一项（`wholelist[:2]`与 相同`[wholelist[0], wholelist[1]]`）。记住这些，以避免一个错误！

```
with open('source.tsv', 'rb') as src, open('result.tsv', 'wb') as res:
    csrc = csv.reader(src, dialect='tsv')
    cres = csv.writer(res, dialect='tsv')
    for row in csrc:
        # remove [628714:650181] and [653320:689512]
        newrow = row[:628714] # columns before 628714
        newrow.extend(row[650181:653320]) # columns between 650180 and 653320
        cres.writerow(newrow) 
```

或者，您可以通过删除不需要的列来节省一些内存，而不是将您想要的列复制到新行：

```
 for row in csrc:
        # remove [628714:650181] and [653320:689512]
        # be sure to remove in reverse order!
        del row[653320:689512]
        del row[628714:650181]
        cres.writerow(row) 
```

如果您需要经常执行此操作，您可以将列切割（任何一种方法，使用您喜欢的任何索引）抽象为一个函数。

您可能还想看看[csvkit python library 和 command-line tools](http://csvkit.readthedocs.org/en/latest/index.html)，特别是它的命令行工具[csvcut](http://csvkit.readthedocs.org/en/latest/tutorial/examining_the_data.html#cutting-up-the-data-with-csvcut)，它似乎完全可以从命令行执行您想要的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:40:54.207

你在 Linux 上吗？然后保存 hazzle 并`csvtool`从 shell 使用：

```
 csvtool col 1-500,502-1000 input.csv > output.csv 
```

还可以设置分隔符等，只需输入`csvtool --help`. 很容易使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:15:01.500

使用 2 GB 或更大的 RAM，应该可以将数据集加载到内存中，删除所需的列，并将内容写入文件。这可以很容易地在 R 或 python 中完成。对于 R：

```
dat = read.table("spam.tsv", ...)
dat = dat[-c(1,5)] # delete row 1 and 5
write.csv(dat, ....) 
```

使用`apply`循环或`for`循环可以轻松地以块的形式执行此操作。我使用的`apply`风格：

```
read_chunk = function(chunk_index, chunk_size, fname) {
    dat = read.table(fname, nrow = chunk_size, skip = (chunk_id - 1) * chunk_size, ...)
    dat = dat[-c(1,5)] # delete row 1 and 5
    write.csv(dat, append = TRUE, ....)    
}

tot_no_lines = 10000 # for example
chunk_size = 1000
sapply(1:(tot_no_lines / chunk_size), read_chunk) 
```

请注意，这是作为灵感的 R 风格代码，没有工作 R 代码。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T15:22:42.653

您可以动态构建输出行：

```
for r in rdr:
    outrow = []
    for i in range(0, 628714):
       outrow.append(r[i])
    for i in range(650181, 653320):
       outrow.append(r[i])
    wtr.writerow( outrow ) 
```

我想您可以使用输入行 r 的切片更简洁地执行此操作，如下所示：

```
 outrow = r[0:628714)
 outrow.extend(r[650181:653320)
 wrt.writerow( outrow ) 
```

也许不是最快的执行，但肯定更容易编写。

# sql - SQL 是否替换和 CAST on select 会影响数据库？

> ID：12692736
> 
> 赞同：2
> 
> 时间：2012-10-02T14:53:04.570
> 
> 标签：sql, sql-server-2008

我正在创建一个视图，并要求我进行“替换”和“强制转换”，例如：

```
SELECT CAST(qtyshipped AS INT) AS 'QTYShipped', REPLACE(itemval,'.','')
FROM Database 
```

在视图内，不应该实际更改数据库中的信息而只是在查询中正确吗？（它在我的沙盒服务器中完美运行，但我只想确认）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:55:26.217

根本不是一个愚蠢的问题。答案是肯定的，它只会改变查询的结果，底层数据会保持不变。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T14:56:26.673

这已经是一个很好的查询。但我需要和你谈谈一些观点。

*   REPLACE 函数区分大小写。尽管我在您的代码中看到您只是替换句点。
*   为什么您的列`qtyshipped`不是数字类型？您应该将其更改为数字。所以你不需要铸造，这可能会*降低*性能。

它不会影响您的数据库，因为您只执行`SELECT`not `UPDATE`。

# javascript - 如何使用 Chrome 开发者工具持久化 CSS 更改

> ID：12692737
> 
> 赞同：12
> 
> 时间：2012-10-02T14:53:06.640
> 
> 标签：javascript, css, google-chrome-devtools

我正在尝试调试下拉菜单。我还没有访问该网站的权限，因此我正在尝试通过 Google Chrome 开发人员工具找到一个解决方案，我可以对其进行测试，然后在我获得访问权限时应用到该站点。它只是 CSS 和一些 Javascript 更改。

问题是我想通过开发工具应用一些新的 CSS 样式规则，但是在刷新网页时这些规则仍然存在。有没有办法可以应用样式并让它们持久存在？我查看了资源部分，这表明我可以做这样的事情（也许通过添加本地样式表作为资源？），但我就是不知道该怎么做。

谁能在这里指出我正确的方向？

非常感谢各位...

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T22:41:46.057

您可以安装[Tampermonkey](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo) chrome 扩展程序，它是用于 chrome 的greasemonkey，您可以加载可以**更改 css**的用户脚本并**使用 jquery 来修改页面**，并且此更改是**永久性**的，因为脚本将被加载并在您访问时自动执行您在`@match`规则中设置的站点，请参阅以下*用户脚本*，它只是更改页面的背景颜色：

```
// ==UserScript==
// @name       yourscript
// @namespace  http://yeeeee/
// @version    0.1
// @description  Change bacground color of page
// @require    http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js
// @match      http://yourtargetsite.com/*
// @copyright  2012+, Me and Brothers
// ==/UserScript==

(function () {
    $(document).ready(function(){
        style = '<style type="text/css"> body {background-color: #CC7777 ! important;} </style>';
        $('head').append(style);
    });
})(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-26T13:53:28.107

我最喜欢的 CSS 覆盖工具是 Stylish [https://chrome.google.com/webstore/detail/stylish/fjnbnpbmkenffdnngjfgmeleoegfcffe](https://chrome.google.com/webstore/detail/stylish/fjnbnpbmkenffdnngjfgmeleoegfcffe)

它对于调试和增强任何网页很有用。还有一个现有样式的大型库，可以从扩展菜单中方便地链接到它们。像这些一样，对于[StackOverflow.com](http://userstyles.org/styles/browse/stackoverflow)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-04-11T20:31:06.267

由于 Chrome 版本 65，这可以在没有插件的情况下完成。在开发人员工具中，转到**Sources -> Overrides**选项卡并选择任何本地文件夹，chrome 应该将您的持久更改保存到其中。对于 DOM 树中的更改，请使用**Sources**而不是**Elements**选项卡。

有关本地覆盖的列表，请转到**⠇ -> More tools -> Changes**。

更多信息[在这里](https://developers.google.com/web/updates/2018/01/devtools#overrides)。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-04T08:48:52.433

感谢您的建议。我尝试了这两种方法，但遇到了一些小问题（对我个人来说不是特别容易或直观）。相反，我偶然发现了[Tincr](https://chrome.google.com/webstore/detail/tincr/lfjbhpnjiajjgnjganiaggebdhhpnbih)，我发现它更合适。谢谢各位。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-02T14:58:13.367

尝试扩展[stylebot](http://stylebot.me/about)，它允许您快速创建和保存站点的持久自定义 CSS。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-05T00:04:46.697

还有一个名为[hotfix](https://chrome.google.com/webstore/detail/hotfix/bfmckmhcljhakgkngnfjhmmffaabdafi?hl=en)的扩展。它允许您将更改从 Chrome 开发工具直接保存到 GitHub。

# c# - 带符号的 int 数组类型转换 C#

> ID：12692739
> 
> 赞同：-2
> 
> 时间：2012-10-02T14:53:12.597
> 
> 标签：c#, arrays, casting, int, signed

当我运行以下代码时：

```
public int[] finalResult = new int[dimension];
public float[] calculatedValue = new float[dimension];
.....
.....
finalResult[i] = (int) Math.Floor(calculatedValue[i]);
Console.WriteLine( "calculated:" + calculatedValue[i] 
    +  " final:" + finalResult[i] 
    + "  test: " +(int) Math.Floor(calculatedValue[i])); 
```

输出是：

> 计算：-0.02043936 最终：0 测试：-1

当它们是从完全相同的代码生成时，为什么“最终”与“测试”不同？哪一个是错的，为什么？

更简单，更小的片段

```
finalResult[i]=(int)Math.Floor(-3.0002);
Console.WriteLine( "final: "+ finalResult[i]+ " test:" +(int)Math.Floor(-3.0002)); 
```

**最终输出** ：0 测试：-4

**其余代码无关紧要，如下证明** 我最后尝试了以下内容，

```
public int[] junkArray = new int[dimension];
junkArray[i]=(int)Math.Floor(-3.0002);  //Junk Array is only assigned here in whole code
Console.WriteLine( "final: "+ (int) junkArray[i]+ " test:" +(int)Math.Floor(-3.0002)); 
```

我得到最终输出：0 测试：-4

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T16:04:05.087

这就是我认为实际发生的事情。请记住，我在这里做出假设，因为您提供的代码无法编译，当我尝试调整它时，我总是得到我期望的正确结果。因此，我试图通过犯一个故意的错误来想办法产生你得到的结果：

```
using System;

namespace ConsoleApplication1
{
    class Program
    {
        private static int dimension = 1;
        public static int[] junkArray = new int[dimension];

        static void Main(string[] args)
        {
            Method1();
            Method2();
        }

        static void Method1()
        {
            int i = 0;
            junkArray[i] = (int)Math.Floor(-3.0002);
        }

        static void Method2()
        {
            int i = 0;
            int[] junkArray = new int[dimension];
            Console.WriteLine("final: " + (int)junkArray[i] + " test:" + (int)Math.Floor(-3.0002));
        }
    }
} 
```

这会产生您所看到的结果：

最终：0 测试：-4

我将代码分成两种方法，一种方法是“计算”，另一种是“演示”。然而，由于某种原因（缺乏咖啡因，无论如何），我的第二种方法还声明了一个数组变量，该变量隐藏/隐藏了包含我们计算结果的字段。这不是非法的，但这意味着当我在 Console.WriteLine 方法调用中从 junkArray 中读取数据时，我正在从*另一个*junkArray 中读取与我之前将结果写入的那个不同的 junkArray。

这可能不是正在发生的事情，但这是一种可能性，并且在没有看到您的实际代码的情况下，这是我能提供的最佳猜测。看看并确保您正在读取的数组*绝对*是您将结果写入的数组，而不是第二个数组“遮蔽”第一个数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T15:15:53.257

如果我测试代码

```
var final = new int[1];
var calc = new[] { -0.02043936f };
final[0] = (int)Math.Floor(calc[0]);

Console.WriteLine(
    "calc:{0} final:{1} test:{2}",
    calc[0],
    final[0],
    (int)Math.Floor(calc[0])); 
```

不出所料，我得到了输出

> 计算：-0.02043936 最终：-1 测试：-1

因此，您的代码还有其他问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:11:32.033

这里发生了两件事

首先 - -0.02043936 是计算值

现在你正在应用 math.floor 。它将做的是，它将降低价值并返回一个双倍，这将再次是一个非常小的数字。

现在您将其转换为整数。这样做时，因为它更接近于零，所以它会变成零。

为了证明这一点，将计算值设为 -0.62043936 或类似的值，您将得到 -1 符合您的期望

# javascript - jstree 性能问题

> ID：12692741
> 
> 赞同：9
> 
> 时间：2012-10-02T14:53:14.693
> 
> 标签：javascript, jquery, performance, jstree

我正在使用`jsTree`大约 1500 个节点，最多嵌套 4 级（大多数只有 1 级深），并且我收到 Internet Explorer 的*“此脚本运行缓慢”*错误。我从一个`html_data` `<li>`由 ASP.NET 生成的简单结构开始。树根本无法完成加载。然后我尝试了`xml_data`and `json_data`，这有点好，但最终出错了。我最后的努力是异步加载。这解决了初始加载问题，但现在当我展开其中一个较大的分支时出现 IE 错误。

更多细节：我正在使用`checkbox`插件，我还需要搜索能力。不幸的是，在搜索时，用户可能只输入一个字符，所以我正在查看大量搜索结果。

有没有人用这么大的数据集做过类似的事情？关于加速 jsTree 的任何建议？或者，我是否最好为我的 GUI 探索其他选项？

我意识到我没有发布任何代码，但欢迎任何一般技术/陷阱。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-17T14:41:02.540

我还没有完全解决我的问题，但我做了一些改进，以便我认为它可能可用（我仍在测试）。我认为它可能对其他人有用：

*   首先，我在 jQuery 对话框中使用 jsTree，但这似乎会损害性能。如果可能，不要混合使用大型 jsTrees 和 Dialogs。
*   延迟加载绝对是大树的方法。我试过`json_data`and `xml_data`，它们都很容易实现。它们的表现似乎大致相同，但这只是基于基本观察。
*   最后，我实现了一个穷人的寻呼。在我的服务器端 JSON 请求处理程序中，如果一个节点有超过 X 个子节点，我会简单地分成许多节点，每个节点都有一部分这些子节点。例如，如果节点 X 有 1000 个孩子，我给 X 个孩子节点 X1、X2、X3、...、X10，其中 X1 有前 100 个孩子，X2 有接下来的 100 个孩子，依此类推。这对某些人来说可能没有意义，因为您正在修改树结构，但我认为它对我有用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T23:00:30.557

jsTree 支持您的所有需求

*   在分支太大的情况下使用带有 ajax 支持的[json_data 插件。](http://www.jstree.com/documentation/json_data)
*   [搜索插件](http://www.jstree.com/documentation/search)也支持ajax调用

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-03T10:08:31.783

我自己对它的表现有点失望。

听起来你需要尝试**延迟加载**：而不是一次加载整个树，只根据需要加载。

也就是说，最初只加载树的主干（因此所有节点都“关闭”），然后仅在用户单击打开节点时加载节点的子节点。

JsTree 可以做到这一点，请参阅文档。

（你的意思是“异步加载”吗？）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-12-05T18:43:59.620

jstree 很糟糕 - 它是“刷新”，添加 1000 个子节点需要 10 秒，或者在 40 个节点中加载包含 10000 个项目的树需要一分钟多的时间。经过几天的开发，我告诉我的同事改用 slickgrid，因为每个人都会拒绝使用一个需要很长时间才能做任何事情的页面。如果您的结构不正确，它会更快，例如 1000 个节点需要 3 秒，但箭头不会有任何关闭它的效果。

这是为了替换 ms treeview 和 ms imagelist 的组合，后者在 3 秒内跨 40 个父节点加载相同的 10000 个项目。

# delphi - 如何释放由其他人拥有的表单？

> ID：12692745
> 
> 赞同：0
> 
> 时间：2012-10-02T14:53:32.200
> 
> 标签：delphi

我有一个需要销毁的动态创建的表单：

*   稍后（在应用程序关闭时）如果`AssignData`成功，或者
*   立即以防`AssignData`崩溃。

由于表单归应用程序所有，因此仅调用它是不安全的`FreeAndNil`。但`Close`也行不通；它不会关闭窗口。

```
FrmLoader:= TFrmLoader.Create(Application);  <----- Application is the Owner                            
TRY
  FrmLoader.AssignData(FileData);                                      
EXCEPT                                                              
  FreeAndNil(FrmLoader);  // <------ unsafe                                            
  FrmLoader.Close;        // <------ this is the safe method to close it but won't work
  RAISE;       
END;
FrmLoader.DoStuff; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T14:57:54.953

调用`Free`拥有的表单是完全安全的。或将表格传递给`FreeAndNil`. 这是处理表单的正确方法。

因此，此代码可以满足您的需要。

```
FrmLoader:= TFrmLoader.Create(Application);
TRY
  FrmLoader.AssignData(FileData);                                      
EXCEPT                                                              
  FreeAndNil(FrmLoader);
  RAISE;       
END; 
```

# c# - 使用 WinDbg 从 minidump 确定 InnerException 的行号

> ID：12692747
> 
> 赞同：6
> 
> 时间：2012-10-02T14:53:46.333
> 
> 标签：c#, exception, windbg, sos

我正在尝试从转储中追踪 NullReferenceException。NullReferenceException 不是崩溃异常，而是崩溃异常是带有 InnerException 的 TargetInvocationException，即 NullReferenceException。

我正在使用带有 SOS 的 Windbg，我使用命令`analyze -v`，这给了我 NullReferenceException 的调用堆栈：

```
EXCEPTION_OBJECT: !pe f6cb150
Exception object: 000000000f6cb150
Exception type:   System.NullReferenceException
Message:          Object reference not set to an instance of an object.
InnerException:   <none>
StackTrace (generated):
SP               IP               Function
000000002CD9D8C0 000007FF01E7C639 MyDll!DoSomething2()+0xe99
000000002CD9DBE0 000007FF01E7B11D MyDll!DoSomething1()+0x43d
000000002CD9DD20 000007FF01E7AB11 MyDll!WorkerDoWork(System.Object, System.ComponentModel.DoWorkEventArgs)+0x51
000000002CD9DD80 000007FEEA68A0F2 System_ni!System.ComponentModel.BackgroundWorker.WorkerThreadStart(System.Object)+0x62 
```

请注意，我得到了带有字节偏移的方法名称，但没有行号。 `DoSomething2`是一个很大的函数，所以 NullReferenceException 发生在哪里并不明显。

我尝试按照 Tess Ferrandez 博客中的说明进行操作：

[.Net 异常 - 跟踪代码中异常发生的位置](http://blogs.msdn.com/b/tess/archive/2006/05/18/601002.aspx)

但是我在尝试`DoSomething2`使用 !ip2md 和 DoSomething2: 7FF01E7C639 的 IP 确定方法的方法描述符时遇到了困难：

```
> !ip2md 7FF01E7C639
Failed to request MethodData, not in JIT code range 
```

请注意，!ip2md 命令在发生 TargetInvocationException 的方法的 IP 上成功。

***问题***：

我可以从哪里开始缩小 DoSomething2 中崩溃的行？请注意，我无法重现崩溃，所以我只有这个（和几个重复的）转储。

**附加说明**：

*   .NET 4.0
*   Windbg 版本：6.12.0002.633 AMD64
*   我是 Windbg 的新手：所以信息越多越好

**编辑 1**

当我没有正确设置符号时，我得到以下信息：

```
STACK_TEXT:  
00000000`2cd9d8c0 00000000`ffffffff MyDll!Unknown_0xe99+0xe99
00000000`2cd9dbe0 00000000`ffffffff MyDll!Unknown_0x43d+0x43d
00000000`2cd9dd20 00000000`ffffffff MyDll!Unknown_0x51+0x51
00000000`2cd9dd80 00000000`ffffffff system_ni!    System.ComponentModel.BackgroundWorker.WorkerThreadStart+0x62 
```

当我将其设置为指向我的符号服务器并打开 !sym 噪声时，它似乎可以正确加载符号：

```
0:000> ld MyDll
DBGHELP: C:\Program Files\Debugging Tools for Windows (x64)\MyDll.dll - file not found
SYMSRV:  c:\symbols\MyDll.dll\4F3D6F4B154000\MyDll.dll not found
SYMSRV:  http://msdl.microsoft.com/download/symbols/MyDll.dll/4F3D6F4B154000/MyDll.dll not found
SYMSRV:  \\mysymbolserver\store\Mydll.dll\4F3D6F4B154000\file.ptr
SYMSRV:  MyDll.dl_ from \\mysymbolserver\store: uncompressed
DBGHELP: c:\symbols\MyDll.dll\4F3D6F4B154000\MyDll.dll - OK
DBGENG:  c:\symbols\MyDll.dll\4F3D6F4B154000\MyDll.dll - Mapped image memory
SYMSRV:  c:\symbols\MyDll.pdb\8AFC2BE7529A41289FA9FBCEDB6836161\Mydll.pdb not found
SYMSRV:  http://msdl.microsoft.com/download/symbols/Mydll.pdb/8AFC2BE7529A41289FA9FBCEDB6836161/MyDll.pdb not found
SYMSRV:  \\mysymbolserver\store\MyDll.pdb\8AFC2BE7529A41289FA9FBCEDB6836161\file.ptr
SYMSRV:  MyDll.pd_ from \\mysymbolserver\store: uncompressed
DBGHELP: MyDll - private symbols & lines 
     c:\symbols\MyDll.pdb\8AFC2BE7529A41289FA9FBCEDB6836161\MyDll.pdb
Symbols loaded for MyDll 
```

**编辑 2**

我尝试使用 !name2ee 如下：

```
0:000> !name2ee MyDll!MyType.DoSomething2
Module:      000007ff004995b8
Assembly:    Autodesk.DataManagement.Client.Framework.Vault.dll
<invalid module token> 
```

所以，那里没有运气。但后来我几乎似乎得到了这个：

```
0:000> !name2ee MyDll.dll!MyNamespace.MyType
Module:      000007ff004995b8
Assembly:    MyDll.dll
Token:       000000000200008c
MethodTable: 000007ff01b2e258
EEClass:     000007ff01b415e0
Name:        MyNamespace.MyType

0:000> !dumpmt -md 7ff01b2e258
EEClass:      000007ff01b415e0
Module:       000007ff004995b8
Name:         MyNamspace.MyType
mdToken:      000000000200008c
File:         C:\Program Files\MyCompany\MyProduct\Bin\MyDll.dll
BaseSize:        0x30
ComponentSize:   0x0
Slots in VTable: 31
Number of IFaces in IFaceMap: 2
--------------------------------------
MethodDesc Table
           Entry       MethodDesc      JIT Name
000007feeb31a2c0 0000000000000000     NONE 0000000000000000 is not a MethodDesc
000007feeb3689f0 0000000000000000     NONE 0000000000000000 is not a MethodDesc
000007feeb3688c0 0000000000000000     NONE 0000000000000000 is not a MethodDesc
000007feeb353440 0000000000000000     NONE 0000000000000000 is not a MethodDesc
000007ff01b01300 0000000000000000     NONE 0000000000000000 is not a MethodDesc
000007ff01e89140 0000000000000000     NONE 0000000000000000 is not a MethodDesc
000007ff01b9c080 0000000000000000     NONE 0000000000000000 is not a MethodDesc
000007ff01f45f40 0000000000000000     NONE 0000000000000000 is not a MethodDesc
000007ff01a9b358 000007ff01b2e128     NONE MyType.DoSomething3()
000007ff01a9b360 000007ff01b2e130     NONE MyType.DoSomething4()
000007ff01a9b368 000007ff01b2e138     NONE MyType.DoSomething5()
000007ff01e79800 0000000000000000     NONE 0000000000000000 is not a MethodDesc
000007ff020fea80 0000000000000000     NONE 0000000000000000 is not a MethodDesc
000007ff01a9b3b0 000007ff01b2e1b0     NONE MyType.DoSomething6()
000007ff01a9b3b8 000007ff01b2e1b8     NONE MyType.DoSomething7()
000007ff01a9b328 000007ff01b2e0f0     NONE MyType..ctor()
000007ff01b01280 0000000000000000     NONE 0000000000000000 is not a MethodDesc
000007ff01e7a810 0000000000000000     NONE 0000000000000000 is not a MethodDesc
000007ff01e7aac0 0000000000000000     NONE 0000000000000000 is not a MethodDesc
000007ff01e83240 0000000000000000     NONE 0000000000000000 is not a MethodDesc
000007ff01f19520 000007ff01b2e178      JIT MyType.RunWorkerCompleted(System.Object, System.ComponentModel.RunWorkerCompletedEventArgs)
000007ff01e7ace0 0000000000000000      JIT 0000000000000000 is not a MethodDesc
000007ff01e7b7a0 0000000000000000      JIT 0000000000000000 is not a MethodDesc
000007ff01e7b710 0000000000000000      JIT 0000000000000000 is not a MethodDesc
000007ff01e7d2b0 0000000000000000      JIT 0000000000000000 is not a MethodDesc
000007ff01b015f0 0000000000000000      JIT 0000000000000000 is not a MethodDesc
000007ff01b88ce0 0000000000000000      JIT 0000000000000000 is not a MethodDesc
000007ff01a9b3e0 000007ff01b2e200     NONE MyType.DoSomething8()
000007ff01b921e0 0000000000000000     NONE 0000000000000000 is not a MethodDesc
000007ff01b933b0 0000000000000000     NONE 0000000000000000 is not a MethodDesc
000007ff01b93870 0000000000000000     NONE 0000000000000000 is not a MethodDesc 
```

我猜所有丢失的条目（那些用“不是 MethodDesc”列出的）都是因为这不是一个完整的小型转储。那正确吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T15:53:29.977

看起来 WinDbg 没有为您的 DLL 提取符号。您可以通过设置符号路径并`!sym noisy`根据需要进行故障排除来查看它。

我不能说为什么`!ip2md`在这种情况下不起作用，但是还有其他方法可以获取`DoSomething2`. 尝试`!name2ee`方法名称，例如，`!name2ee *!TypeName.DoSomething2`或者您可以像这样通过类型本身获取它`!name2ee *!Namespace.TypeName`，然后`!dumpmt -md <method table>`在您从中获取的方法表上获取它`!name2ee`。

获得代码后，该`!u`命令可以向您显示带有 .NET 注释的汇编代码转储。通过使用异常的偏移量，您可以确定 NullReferenceException 的性质。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-02T17:46:50.697

您可能正在使用剥离的 PDB 文件，这是为发布版本中的项目生成的默认文件。从此类文件中删除所有文件和行号信息。

切换到发布配置，项目+属性，构建选项卡，高级，调试信息=“完整”。

这是故意的，行号信息对于发布版本不是很准确。抖动优化器会移动代码，因此您需要记住显示的行号是一个近似值。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T18:28:11.227

在上面的评论中，您提到 || 命令产生“用户迷你转储”。为了正确调试 .NET 代码，您需要一个完整转储，这将指示 || 中的“完整内存用户小型转储”。命令。我认为这是你的问题。如果无法访问完整的加载程序堆，就无法将代码地址映射回 .NET 方法，因此您无法获得堆栈跟踪。如果您可以重现此问题，请捕获完整转储。您可以使用 ADPlus、ProcDump 或 DebugDiag 来捕获崩溃时的转储。

# templates - 如何将可选的 facelet 模板内容包装在 div 标签中？

> ID：12692748
> 
> 赞同：2
> 
> 时间：2012-10-02T14:53:54.470
> 
> 标签：templates, jsf-2, facelets

我是一个长期的 JSP 用户，但是 facelets 新手并且坚持我认为将是一个非常简单的任务。

如何将可选模板内容包装在 div 标签中？

例如，给定以下简化模板：

```
<?xml version='1.0' encoding='UTF-8' ?>
<html xml:lang="en" lang="en"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html">

    <h:head>
        <!-- head stuff here -->
    </h:head>

    <h:body>
        <!-- main body stuff here -->
        <div class="border-box">
            <ui:insert name="optional" />
        </div>
    </h:body>

</html> 
```

如果我使用这个模板而不定义可选内容，我会得到一个不需要的空框。

我已经搜索了一个解决方案，发现同样的问题提出了几次，但没有真正的答案。

谁能帮我吗？在我看来，想要使用模板系统做这件事是一件很合理的事情，但这让我很难过。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-03T09:43:46.247

谢谢 mael，当内容适合 ui:param 值属性时，ui:fragment 似乎是要走的路，但我会接受你的第一个建议。我将使用 ui:decorate 模板化包装器。

页面模板：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" lang="en"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html">

    <h:head>
        <!-- head stuff here -->
    </h:head>

    <h:body>
        <!-- main body stuff here -->
        <ui:insert name="optional" />
    </h:body>

</html> 
```

包装模板：

```
<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets">

    <div class="border-box">
        <ui:insert />
    </div>

</ui:composition> 
```

调用：

```
<?xml version='1.0' encoding='UTF-8' ?>
<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    template="page.xhtml">

    <!-- other ui:defines -->

    <ui:define name="optional">
        <ui:decorate template="wrapper.xhtml">
            <!-- optional content -->
        </ui:decorate>
    </ui:define>

</ui:composition> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:01:30.807

只需删除`div`并在使用您的模板的页面中进行类似的操作：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head />
<body>
<ui:composition template="template.xhtml">
  <ui:define name="optional">
    <div class="border-box">
        <!-- Content here -->
    </div>
</ui:define>
</ui:composition>
</body>
</html> 
```

# c++ - 无法从 windows xp x64 prof 中的用户帐户访问已安装过滤器驱动程序的重新分析点目录

> ID：12692755
> 
> 赞同：1
> 
> 时间：2012-10-02T14:54:14.773
> 
> 标签：c++, windows, security, ntfs, filter-driver

我为一个非常特殊的安全应用程序创建了一个“特殊文件系统”。

我使用空目录创建了一个重解析点。在这个重解析点后面是一个过滤器驱动程序，它处理 NTFS 和一个用户模式程序之间的通信，该程序正在执行一些加密/解密和控制工作（FUSE、TrueCrypt、RamDisc 之间的混合......）。整个东西是 C/C++ 原生的，在 Win7 x64 下工作正常。

现在我有一个很好的任务让它适用于windwos xp x64专业版。当整个应用程序以管理员权限运行时，它工作正常，但是当我切换到用户帐户时，我无法访问挂载的目录。

挂载程序和“特殊文件系统”（我们将其命名为 sfs）是系统服务，其他应用程序必须在用户帐户（COM 相关）下运行，挂载操作成功（当我在挂载操作后切换到管理员帐户时，我可以访问目录），应用程序的其他部分也可以正常工作，但我唯一无法管理的是访问这个目录。

我给了“每个人”和用户组以及特定用户对驱动程序、库（驱动程序和 sfs 之间的链接）、安装程序和特殊文件系统的所有权限，并且在注册表中也做了很多。我还将此权限授予已安装的目录（所有权限，所有者，...），但没有任何效果。

调试输出显示，对目录或内部文件的请求永远不会到达“sfs”。看起来，IO-Manager 从来没有向这个地址发送过一些东西。另一个问题是，我无法从操作系统获取所有调试输出（以本地调试模式启动并使用 SysInternals 的 DebugView.exe），但那是另一回事。

我错过了什么？XP和Win7的安全系统有什么区别？XP中是否有我不知道的基本限制？

请询问您是否需要代码片段。

欢迎任何建议或想法！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T09:24:00.050

找到了！

我忘了为设备本身设置安全性！不早点发现这是多么糟糕的事情！:-(

这是挂载服务中的部分：

```
static VOID GetSecAttr(PSECURITY_ATTRIBUTES SecAttr)
{

   LPTSTR sd = L"D:P(A;;GA;;;SY)(A;;GRGWGX;;;BA)(A;;GRGW;;;WD)(A;;GR;;;RC)";

   ZeroMemory(SecAttr, sizeof(SECURITY_ATTRIBUTES));

   ConvertStringSecurityDescriptorToSecurityDescriptor(sd, SDDL_REVISION_1, &SecAttr->lpSecurityDescriptor, NULL);

   SecAttr->nLength = sizeof(SECURITY_ATTRIBUTES);
   SecAttr->bInheritHandle = TRUE;
}

static VOID WINAPI ServiceMain(DWORD dwArgc, LPTSTR *lpszArgv)
{

//... some declarations ...
   SECURITY_ATTRIBUTES sa;

//... some stuff like syncronisation, named pipe and so on...
   GetSecAttr(&sa);

   device = CreateFile(
       MY_DEVICE_NAME,
       GENERIC_READ | GENERIC_WRITE,
       FILE_SHARE_READ | FILE_SHARE_WRITE,
       &sa,                //!!! and this was NULL!!!
       OPEN_EXISTING, 
       FILE_FLAG_OVERLAPPED, 
       NULL);

   if (device == INVALID_HANDLE_VALUE) {/*...*/}
} 
```

感谢所有花时间帮助我的人！

...为什么这对 Win7 有效？！？

# java - elasticsearch java API：matchAll搜索查询不返回结果？

> ID：12692758
> 
> 赞同：9
> 
> 时间：2012-10-02T14:54:27.143
> 
> 标签：java, elasticsearch

我已经运行了一个弹性搜索的内存实例，并进行了一些探索性编码来学习搜索 java API。我可以将文档提交到索引并使用 GET 检索它们，但是当我尝试简单的搜索查询时，我没有得到任何结果。

```
// first, try a get request, to make sure there is something in the index
GetResponse results = client.prepareGet(INDEX_NAME, INDEX_TYPE, testID)
        .execute()
        .actionGet();
// this assertion succeeds, as we expect it to.
assertThat(results.getId()).isEqualTo(testID);

// next, try the simplest possible search
SearchResponse s1 = client.prepareSearch(INDEX_NAME).setQuery(matchAllQuery())
        .execute()
        .actionGet();
// this assertion fails. why? answer: when we have an in-memory node, we have to 
// manually call refresh on the indexing, after submitting a document.
assertThat(s1.getHits().totalHits()).isGreaterThanOrEqualTo(1); 
```

经过一些测试，我认为问题在于我如何设置节点和关联的客户端（在内存中）：

```
@BeforeMethod
    public void setup() {
        // set up elastic search to run locally. since the transaction
        // log needs a filesystem, we can't run it as purely in memory,
        // but we can set the data directories into "target", so that maven will
        // clean up after the fact: http://bit.ly/OTN7Qf
        Settings settings = ImmutableSettings.settingsBuilder()
                .put("node.http.enabled", true)
                .put("path.logs","target/elasticsearch/logs")
                .put("path.data","target/elasticsearch/data")
                .put("gateway.type", "none")
                .put("index.store.type", "memory")
                .put("index.number_of_shards", 1)
                .put("index.number_of_replicas", 1).build();

        node = NodeBuilder.nodeBuilder().local(true).settings(settings).node();
        client = node.client();
    } 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-10-02T18:02:42.013

弹性搜索 google 组中的某个人非常友好地帮助了我。将文档提交到内存节点后，我需要刷新索引：

```
 node.client().admin().indices().prepareRefresh().execute().actionGet(); 
```

调用刷新解决了这个问题。

# cakephp - cakephp如何从文件中引用字符串

> ID：12692760
> 
> 赞同：-1
> 
> 时间：2012-10-02T14:54:35.717
> 
> 标签：cakephp

我需要创建一个文件来包含我网站中的所有字符串，并且我想使用 Cakephp 来引用该文件中的字符串，例如 android 中的 string.h。请帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:04:57.763

如果您需要将其用于翻译目的，您应该查看 cake 本地化支持。您在 'locale' 文件夹中创建语言的字符串文件，并使用`__("string")`而不是`"string"`这样 cake 将在与当前语言对应的文件夹中查找“字符串”的翻译。

[cakephp 1.3 中的文档](http://book.cakephp.org/1.3/view/1230/Localization-in-CakePHP)

[cakephp 2.0 中的文档](http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html)

这是你在蛋糕上问的最接近的，如果这不是你的想法，你可能不得不从头开始写，

# c# - 来自 Active Directory 的 UserPrincipal

> ID：12692761
> 
> 赞同：2
> 
> 时间：2012-10-02T14:54:38.970
> 
> 标签：c#, asp.net, active-directory, userprincipal

我从 Active Directory 获取 UserPrincipal 时遇到问题。首先，我在本地环境中使用过（不是使用 IIS，而是使用 ASP.NET 开发服务器）：

```
User usr = new User();
usr.SoeId = Request.ServerVariables["LOGON_USER"];
usr.IP = Request.ServerVariables["REMOTE_ADDR"];
usr.FirstName = UserPrincipal.Current.GivenName;
usr.LastName = UserPrincipal.Current.Surname; 
```

它工作正常。我得到了我想要的。但是，当我在测试环境中安装应用程序时，出现错误“对象引用未设置为对象的实例”。我从[这里](https://stackoverflow.com/questions/3471635/get-first-name-last-name-of-logedin-windows-user)尝试过解决方案。

```
using (PrincipalContext pc = new PrincipalContext(ContextType.Domain))
{
    UserPrincipal up = UserPrincipal.FindByIdentity(pc, usr.SoeId);
    return up.DisplayName;
    // or return up.GivenName + " " + up.Surname;
} 
```

但它不起作用。

我使用 Windows 身份验证。模拟设置为真。请帮我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T15:37:29.697

更改您的身份`ApplicationPool`以使用域用户运行。

在 iis 6 中，右键单击您的应用程序池，转到`Identity`选项卡并设置一个域用户，池将在该用户下运行。

在iis 7中右键单击您的应用程序池，选择高级设置，在您会发现的进程模型下`Identity`，将其更改为使用域用户。

您还可以传递域用户并传递给`PrincipalContest Constructor`

```
using (PrincipalContext context = new PrincipalContext(
                                    ContextType.Domain,
                                    "name of your domain",
                                    "container of your domain",
                                    "user@domain", //create a user in domain for context creation purpose.. this username will be constant.. you can keep it in app config
                                    "password")){
    UserPrincipal up = UserPrincipal.FindByIdentity(pc, usr.SoeId);
    return up.DisplayName;
} 
```

如果您的域名是，`dom.com`那么您的容器将类似于`DC=dom,DC=com`，用户名应为`user@dom.com`或`dom\user`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-22T16:47:00.320

用这个：

```
 // find currently logged in user
        UserPrincipal adUser = null;
        using (HostingEnvironment.Impersonate())
        {
            var userContext = System.Web.HttpContext.Current.User.Identity;
            PrincipalContext ctx = new PrincipalContext(ContextType.Domain, ConfigurationManager.AppSettings["AllowedDomain"], null,
                ContextOptions.Negotiate | ContextOptions.SecureSocketLayer);
            adUser = UserPrincipal.FindByIdentity(ctx, userContext.Name);
        } 
```

您必须将任何“上下文”调用包含在 `HostingEnvironment.Impersonate`

# javascript - 使用javascript点击一个伪元素？

> ID：12692762
> 
> 赞同：17
> 
> 时间：2012-10-02T14:54:43.883
> 
> 标签：javascript, jquery, css, pseudo-element

我想知道如何启用对`:before`伪元素的单击（我链接到下面的 JSfiddle 上 div 的橙色部分）。我已经读过，因为伪元素不在 DOM 中，所以你需要一个 hack。不幸的是，我找不到实际显示工作代码的现有 Stackoverflow Q&A。

链接：http: [//jsfiddle.net/Vv6Eb/4/](http://jsfiddle.net/Vv6Eb/4/)

HTML：

```
<div></div> 
```

CSS：

```
div { position:relative; background-color:#333;
      padding:20px; margin:20px; float:left; 
}

div:before { content:""; display:block; 
    padding:5px; background-color:#f60; border:2px solid white; 
    position: absolute; top:-2px; right:-2px; border-bottom-left-radius: 10px; 
} 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-02T15:07:59.597

如果您知道圆圈“应该”在哪里，您可以使用三角函数来查看点击是否在圆圈内：http: [//jsfiddle.net/Vv6Eb/19/](http://jsfiddle.net/Vv6Eb/19/)

```
$("div").click(function(e){
    var $me = $(this),
        width = $me.outerWidth(),
        height = $me.outerHeight(),
        top = $me.position().top,
        left = $me.position().left;

    var len = Math.sqrt(Math.pow(width - e.offsetX, 2) + Math.pow(e.offsetY, 2));

    if (len < 10)
        alert('ding');
});​ 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-02T15:00:52.397

解决此问题的方法是动态地将 a 附加`<span>`到项目并为其分配单击方法。[就像这个小提琴。](http://jsfiddle.net/Hx22x/)

```
var item = $('<span />');
item.click(function() { alert('click'); });
$('div').append(item); 
```

CSS

```
div { position:relative; background-color:#333;
      padding:20px; margin:20px; float:left;
}

div span { content:""; display:block;
    padding:5px; background-color:#f60; border:2px solid white;
    position: absolute; top:-2px; right:-2px; border-bottom-left-radius: 10px;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-02T14:58:48.567

我知道您正在尝试使用 :before，但是对于这种情况，您不能只创建一个带有类的新 div 用作挂钩并将其附加到原始 div 吗？

像这样的东西可能会起作用：

```
var newDiv = $("<div class='orangeCircle'>");
$(".parentDivToOrangeCircle").append(newDiv); 
```

和CSS：

```
.parentDivToOrangeCircle { position:relative; background-color:#333;
    padding:20px; margin:20px; float:left; 
}

.orangeCircle {
    padding:5px; background-color:#f60; border:2px solid white; 
    position: absolute; top:-2px; right:-2px; border-bottom-left-radius: 10px; 
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-09T09:48:38.930

就像使用 jquery 一样

```
 $(document).on("click", "span", function(e){
         if (e.offsetX > $(this)[0].offsetWidth) {
               alert('clicked on after');
    } 
    else
    {
    alert('clicked on main span');
    }

    })
```

```
div { margin: 20px; }
span:after { content: 'AFTER'; position: absolute; }
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div><span>ELEMENT</span></div>
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-07-04T14:55:36.500

我的目的是通过另一种解决方法解决的，它只是添加一个子 DIV。将父级中的所有子元素包装到这个新的子 DIV 中：

我的工作示例与问题陈述相同：[参见 F​​iddle](https://jsfiddle.net/mamun_reza/jLf9m7xz/)

**HTML：**

```
<div class="parentDiv">
    :before
    <div class="childDiv">
        <!-- child elements -->
    </div>
</div> 
```

**注意：忽略`:before`HTML中的，只是显示理解。

**CSS：**

```
div.parentDiv{position:relative; background-color:#333; padding:0; margin:20px; float:left; }
div.parentDiv:before { content:""; display:block; padding:5px; background-color:#f60; border:2px solid white; position: absolute; top:-2px; right:-2px; border-bottom-left-radius: 10px; cursor:pointer}

div.childDiv{padding:20px; margin:0} 
```

**jQuery：**

```
jQuery(document).ready(function($){
    $('div.parentDiv').click(function(e){
        if( $(e.target).closest('.childDiv').length==0 ){
            //so clicked on psudo :before element!
            //do your work here ;)
            alert('Psudo :before element is clicked!');
        }
    });
}); 
```

# c++ - gdb附加到Windows中的进程不起作用

> ID：12692771
> 
> 赞同：3
> 
> 时间：2012-10-02T14:55:22.713
> 
> 标签：c++, windows, debugging, gdb

我正在尝试为第三方软件调试库。我有库的源代码，我使用 -g 编译了它。我需要启动软件才能使用库和调试。AFAIK 我必须启动程序，然后从 gdb 使用 attach 和进程的 id。我正在这样做，但 gdb 说“无法附加到进程”。有谁知道为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T07:23:59.860

尝试从 开始`gdb`，就在里面，将它附加到 gdb 调用中。

```
gdb your_program_name
run your_parameter1 your_paremeter2... 
```

# sql-server - SQL查询列出每周的最新行

> ID：12692772
> 
> 赞同：4
> 
> 时间：2012-10-02T14:55:23.493
> 
> 标签：sql-server, tsql, group-by

在 SQL Server 中，我有以下数据，我想获取每周的最新行。

我有下表。（日期的`WW`周数）列不存在，只是日期，我把它放在那里是为了更好地解释查询的目的。

```
Number  Date          WW
392     2012-07-23    30
439     2012-07-24    30
735     2012-07-25    30
882     2012-07-26    30 *
193     2012-07-30    31
412     2012-07-31    31   
425     2012-08-01    31
748     2012-08-02    31
711     2012-08-03    31 *
757     2012-08-07    32
113     2012-08-08    32 *
444     2012-08-15    33 * 
```

查询的期望结果应该是

```
882     30 
711     31 
113     32 
444     33 
```

基本上我想要得到的是每周的最新行。我找到了这样的例子[Get the records of last month in SQL server](https://stackoverflow.com/questions/1424999/get-the-records-of-last-month-in-sql-server) to find just the latest one，但我不知道如何扩展它们以获取每周的结果列表。这些行可以存储在任何日期，例如可能一周内没有结果，或者一周内有 5 行，下一周有 10 行。我真的很感激一些提示。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T14:57:44.473

你应该能够使用这样的东西：

```
select t1.number, t2.ww
from yourtable t1
inner join
(
    select max(date) mxdate, datepart(week, [Date]) ww
    from yourtable 
    group by datepart(week, [Date])
) t2
    on t1.date = t2.mxdate
    and datepart(week, t1.[Date]) = t2.ww; 
```

或者您可以使用`CTE`：

```
;with cte as
(
  select number, datepart(week, [Date]) ww,
    row_number() over(partition by datepart(week, [Date]) 
                      order by date desc) rn
  from yourtable
)
select number, ww
from cte
where rn = 1 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/9b013/1)

如果您使用这个`MAX()`版本并且您有两个相同日期的数字，那么您将返回两条记录。由于应用了 row_number 过滤器，使用该`row_number()`版本将仅返回一条符合条件的记录（参见[演示](http://sqlfiddle.com/#!3/344de/1)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T15:03:22.140

如果您使用的是 sql server，您可以这样做：

```
declare @test table(Number int, Date datetime, WW int);

INSERT INTO @test
    (Number, Date, WW)
VALUES
    (392, '2012-07-22 17:00:00', 30),
    (439, '2012-07-23 17:00:00', 30),
    (735, '2012-07-24 17:00:00', 30),
    (882, '2012-07-25 17:00:00', 30),
    (193, '2012-07-29 17:00:00', 31),
    (412, '2012-07-30 17:00:00', 31),
    (425, '2012-07-31 17:00:00', 31),
    (748, '2012-08-01 17:00:00', 31),
    (711, '2012-08-05 17:00:00', 31),
    (757, '2012-08-06 17:00:00', 32),
    (113, '2012-08-07 17:00:00', 32),
    (444, '2012-08-14 17:00:00', 33)

SELECT * FROM (
select number, date, ww,
row_number() over (partition by ww order by date desc) rn
from @test) v
WHERE rn = 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T15:16:28.833

这可以通过相关的子查询来完成，如下所示：

```
SELECT number, [date]
FROM tablename T
WHERE NOT EXISTS (
    SELECT 1
    FROM tablename
    WHERE DATEPART(wk, [date]) = DATEPART(wk, T.[date])
        AND date > T.[date]
) 
```

请注意，这不会返回 2012-08-06，因为我相信这实际上是在一年中的第 32 周[http://www.wolframalpha.com/input/?i=6th+August+2012](http://www.wolframalpha.com/input/?i=6th+August+2012)

# jquery - 如何将json数据传递到codeigniter视图

> ID：12692783
> 
> 赞同：2
> 
> 时间：2012-10-02T14:55:44.937
> 
> 标签：jquery, ajax, json, codeigniter, view

我有以下带有 json 数据类型的 ajax 调用和响应。目前我直接在js中编写数据和html标签，但我认为这不好且难以阅读。如何在 Codeigniter 视图中传递它们？

```
$.ajax({
        type: "POST",
        url: baseUrl + "profile/setting",
        dataType: 'json',
        success: function(data){
          var html = "";
          html += "<div>";
          html += "<img src=\"" + baseUrl + data.picture + "\" />";
          html += "<div>" + data.email + "</div>";
          html += "<div>" + data.first_name + " " + data.last_name  + "</div>";
          html += "<div>" + data.address + "</div>";
          html += "<div><input type=\"text\" class=\"input_text_top\"/></div>";
          html += "<div><input type=\"text\" class=\"input_text_middle\"/></div>";
          html += "<div><input type=\"text\" class=\"input_text_bottom\"/></div>";
          html += "<div><input type=\"submit\" class=\"btn btn_grey\"/></div>";
          html += "</div>";
          $('#result_column').removeAttr('style').html(data);
        }
      }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T17:18:16.320

有几个选项供您选择：

## 1\. 从 CodeIgniter 视图生成 HTML：

如果您将`dataType`属性更改为`dataType: 'html'`您可以让服务器返回一个 html 字符串，您可以立即将其注入到您的`#result_column`.

CodeIgniter`$this->load->view()`带有第三个布尔参数。它的默认值为`FALSE`. 如果您通过`TRUE`，该`$this->load->view()`函数*将返回*数据而不是将其回显到浏览器。

你可以做的是：

```
$response = $this->load->view("your_ajax_view", $data, TRUE);
//do anything you would need to with the response.
echo $response; 
```

## 2.使用模板系统

像[Mustache](http://mustache.github.com/)、[Handlebars](http://tryhandlebarsjs.com/)、[EJS](http://javascriptmvc.com/docs.html#!jQuery.EJS)或[Underscore](http://underscorejs.org/)将您返回的 json 数据注入自定义模板。这具有节省带宽的优势，因为您只传输一次*标记*（在初始页面加载时）并且从那时起仅向前传输*数据*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T16:11:22.893

基本上，如果你想这样做，你只需在配置文件/设置控制器中处理它。然后在控制器的末尾加载您的视图。然后将您的 ajax 函数更改为仅将 html 作为返回的数据。像这样的东西：

AJAX部分：

```
 $.ajax({
            type: "POST",
            url: baseUrl + "profile/setting",                
            success: function(data){
               $('#result_column').html(data);
            }
            }); 
```

控制器：

```
function setting()
{
  //whatever your code is, but then just pass the json 
//data you were echoing before to the view file
$data['json_stuff'] = '';//however you generat this
$this->load->view('some view file', $data);
return;
} 
```

# java - 如何为您的程序添加声音？

> ID：12692789
> 
> 赞同：1
> 
> 时间：2012-10-02T14:56:20.340
> 
> 标签：java

我正在尝试在程序中添加声音。我没有经验如何在程序中添加声音。我正在尝试这个，但这段代码给了我异常“null”。我不知道我必须在 playSound 函数中传递什么参数。所以请帮帮我。

```
import java.io.InputStream;
import sun.audio.*; //import the sun.audio package
import java.io.*;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.Clip;

public class Main {

    public Main() {

    }

    public static void main(String[] args) {
        System.out.println("hello there");
        playSound("Hi there");

    }

    public static synchronized void playSound(final String url) {
        new Thread(new Runnable() { // the wrapper thread is unnecessary, unless
                                    // it blocks on the Clip finishing, see
                                    // comments
                    public void run() {
                        try {
                            Clip clip = AudioSystem.getClip();
                            AudioInputStream inputStream = AudioSystem
                                    .getAudioInputStream(Main.class
                                            .getResourceAsStream("pacman_chomp.wav"
                                                    + url));
                            clip.open(inputStream);
                            clip.start();
                        } catch (Exception e) {
                            System.err.println(e.getMessage());
                        }
                    }
                }).start();
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:08:32.777

它可能会给您一个空异常，因为它找不到该文件。目前它正在寻找一个名为：

> “pacman_chomp.wav你好”

因为 url 的值被设置为“Hi there”，并且您正在像这样构造它：

```
AudioInputStream inputStream = AudioSystem
                                    .getAudioInputStream(Main.class
                                            .getResourceAsStream("pacman_chomp.wav"
                                                    + url)); 
```

我想你想要文件“pacman_chomp.wav”？在这种情况下删除“+ url”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:12:37.183

既然你说你的 playSound 方法不起作用，这是我编写的一个声音类。

```
import java.io.IOException;
import java.io.InputStream;

import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.DataLine;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.SourceDataLine;
import javax.sound.sampled.UnsupportedAudioFileException;

public class AePlayWave extends Thread {

    protected static final boolean DEBUG = false;

    protected InputStream inputStream;

    public AePlayWave(InputStream inputStream) {
        this.inputStream = inputStream;
        if (DEBUG) System.out.println("AePlayWave constructor");
    }

    @Override
    public void run() {
        if (DEBUG) System.out.println("AePlayWave running");

        AudioInputStream audioInputStream = verifyInputStream();
        if (audioInputStream == null) {
            return;
        }

        AudioFormat format = audioInputStream.getFormat();
        SourceDataLine audioLine = openInputStream(format);

        if (DEBUG) System.out.println(audioLine.getLineInfo());

        if (audioLine != null) {
            audioLine.start();
            playInputStream(audioInputStream, audioLine);
        }
    }

    protected AudioInputStream verifyInputStream() {
        if (DEBUG) System.out.println("AePlayWave verifyInputStream");
        AudioInputStream audioInputStream = null;
        try {
            audioInputStream = AudioSystem.getAudioInputStream(inputStream);
        } catch (UnsupportedAudioFileException e) {
            e.printStackTrace();
            return null;
        } catch (IOException e) {
            e.printStackTrace();
            return null;
        }
        return audioInputStream;
    }

    protected SourceDataLine openInputStream(AudioFormat format) {
        if (DEBUG) System.out.println("AePlayWave openInputStream");
        DataLine.Info info = new DataLine.Info(SourceDataLine.class, format);
        SourceDataLine audioLine = null;
        if (DEBUG) System.out.println("AePlayWave openInputStream try");
        try {
            audioLine = (SourceDataLine) AudioSystem.getLine(info);
            if (DEBUG) System.out.println("AePlayWave openInputStream getLine");
            audioLine.open(format);
            if (DEBUG) System.out.println("AePlayWave openInputStream open");
        } catch (LineUnavailableException e) {
            e.printStackTrace();
            return null;
        } catch (Exception e) {
            e.printStackTrace();
            return null;
        }
        return audioLine;
    }

    protected void playInputStream(AudioInputStream audioInputStream,
            SourceDataLine audioLine) {
        if (DEBUG) System.out.println("AePlayWave playInputStream");
        int externalBufferSize = (int) audioInputStream.getFrameLength() * 4;
        if (DEBUG) System.out.println("AePlayWave playInputStream externalBufferSize: " 
                + externalBufferSize);
        int nBytesRead = 0;
        byte[] abData = new byte[externalBufferSize];

        try {
            while (nBytesRead != -1) {
                nBytesRead = audioInputStream.read(abData, 0, abData.length);
                if (nBytesRead >= 0) {
                    if (DEBUG) System.out.println("Bytes read: " + nBytesRead);
                    audioLine.write(abData, 0, nBytesRead);
                }
            }
        } catch (IOException e) {
            e.printStackTrace();
            return;
        } finally {
            audioLine.drain();
            audioLine.close();
        }
    }
} 
```

这就是它的名称：

```
InputStream inputStream = getClass().getResourceAsStream("alarm-clock-1.wav");
AePlayWave playWave = new AePlayWave(inputStream);
playWave.run(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:03:39.840

剪辑不允许长音频文件。查看这些来自我的游戏引擎的类。

[`SoundState`](https://code.google.com/p/game-engine-for-java/source/browse/src/com/gej/sound/SoundState.java) [`WavPlayer`](https://code.google.com/p/game-engine-for-java/source/browse/src/com/gej/sound/WavPlayer.java) [`WavSound`](https://code.google.com/p/game-engine-for-java/source/browse/src/com/gej/sound/WavSound.java)

然后使用此代码。

```
// First load the sound
WavSound snd = WavPlayer.loadSound("pacman_chomp.wav");
// play it then
snd.play(); 
```

您可以免费使用这些课程。希望他们有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T16:17:37.923

```
playSound("pacman_chomp.wav");

public static synchronized void playSound(final String url) {
    new Thread(new Runnable() { // the wrapper thread is unnecessary, unless
                                // it blocks on the Clip finishing, see
                                // comments
                public void run() {
                    try {
                        Clip clip = AudioSystem.getClip();
                        AudioInputStream inputStream = AudioSystem
                                .getAudioInputStream(Main.class
                                        .getResourceAsStream(url));
                        clip.open(inputStream);
                        clip.start();
                    } catch (Exception e) {
                        System.err.println(e.getMessage());
                    }
                }
            }).start();
} 
```

a: 如上所述，它寻找“pacman_chomp.wavHi there”

b：这里不推荐硬编码。你失去了重用代码的能力。例如，如果您在 playSound 方法中硬编码，则无法执行此操作：

```
 playSound("pacman_chomp.wav");
    playSound("pacman_dies.wav"); 
```

此外，方法名称“playSound”的命名很糟糕（在硬编码文件中），因为它总是会播放 pacman_chomp 文件（如果指向正确）。

c: 无论如何，“你好”的目的是什么？

# java - 可嵌入的 SLF4j 和应用程序中的 Logback

> ID：12692792
> 
> 赞同：0
> 
> 时间：2012-10-02T14:56:29.717
> 
> 标签：java, logging, slf4j, logback

我在我的应用程序中使用`SLF4j`和`Logback`。现在我要求我的应用程序应该嵌入到其他应用程序中。这意味着，该应用程序可以用作其他应用程序中的库。除了 Logger 部分外，一切都按预期工作。我只是不知道如何完全禁用`Logback`（这是因为用户应该带上自己的记录器实现）。我还尝试查找是否可以以`Logback`“委托模式”之类的方式运行以允许其他`SLF4j`实现挂钩的信息，但我没有找到任何东西。

另一种方法是编写一个自定义的类加载器，它在应用程序启动时摆脱 logback，但这非常复杂（afaik 在应用程序运行时，如果没有黑客从类加载器中删除加载的类是不可能的）。

有没有人认为可以在不将我的应用程序拆分为不同模块的情况下做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:06:53.140

在编译时，您的类路径中应该只有 slf4j-api。

在运行时，您可以选择在运行时类路径中添加 logback，slf4j 将使用它。

如果其他应用程序使用例如 log4j，他们需要添加 slf4j-log4j 而不是 logback，以及 slf4j-api 和您的模块。

如果他们使用 java.util.logging，他们需要添加 slf4j-jdk14 而不是 logback。

在这两种情况下，您可能想告诉他们您使用哪些日志记录类别，以便他们可以将其添加到他们的 log4j 或 java.util.logging 配置中。

# jsp - Jsp、Servelet、web.xml、TomCat

> ID：12692795
> 
> 赞同：-2
> 
> 时间：2012-10-02T14:56:35.420
> 
> 标签：jsp, tomcat, web.xml

我在 java 中编写了一个将从 JSP 文件调用的类，我已经在 web.xml 文件中定义了 Servlet 映射（已经有一个现有的 jsp 项目），我的问题是我是否必须定义一个新的 servlet 映射指向我的班级。这里的内容是 web,xml 文件：

```
 <servlet-name>Test</servlet-name>

     <servlet-class>Test</servlet-class>

  </servlet>

    <servlet-mapping>

       <servlet-name>Test</servlet-name>

       <url-pattern>/Test</url-pattern>

    </servlet-mapping>

   <mime-mapping>

    <extension>ico</extension>

    <mime-type>image/x-icon</mime-type>

   </mime-mapping> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:00:47.027

不，只要您只想在 JSP 文件中使用新类，您就不必向 web.xml 添加任何内容。你确定这

```
<servlet-class>Test</servlet-class> 
```

是正确的？默认包中有你的测试类吗？这不是一个好习惯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:29:02.117

从 JSP 中，您可以直接访问 Java 类（可能通过创建实例）。只有 servlet 需要在 web.xml 中进行映射。（所有 servlet 必须映射到一个 url）如果您希望从 JSP 调用一个servelt，那么使用 requestDispatcher。

# php - 如何从 php SOAPServer 中的 SOAP 请求的 XML 内容中捕获数据？

> ID：12692797
> 
> 赞同：1
> 
> 时间：2012-10-02T14:56:37.317
> 
> 标签：php, xml, soap, stdclass

我正在尝试在 php 中设置 SOAP 服务。我声明了一个服务器 php 函数，我可以使用 SOAP 类型的 http 请求调用该函数，其中内容是我的 SOAP 信封。

SOAP 主体的 XML 内容是我假设的函数的参数，但我不知道如何在我的 php 代码中访问其中的信息。

我注意到函数参数是`stdClass`默认情况下的一个实例，我实际上想知道为什么它没有被 php 强制转换为`XML`or`DOM`对象 - 它是一个 SOAP 调用，不是吗？但是好的，现在由我来从对象中获取信息，这并不容易，因为没有分配给 的方法`stdClass`，所以它必须是标准的 php 函数。所以我尝试`serialize`了，但这给了我一些垃圾，而不是我期望的 XML 字符串。

该怎么办？

**编辑**

*请注意，下面没有我想做的示例代码 - 从 SOAP 请求的 XML 内容中获取一些详细数据 - 因为我不知道如何编写代码从 stdClass 对象中获取它*

应大卫的要求，这里有一些细节。

php代码：

```
<?php
    function mi102($arg) {
        $txt = serialize ($arg);
        $result = new SoapVar ($txt, XSD_ANYXML);
        return($result);
    }
    ini_set( "soap.wsdl_cache_enabled", "0");
    $server = new SoapServer ("test.wsdl");
    $server -> addFunction ("mi102");
    try {
        $server -> handle();
    }
    catch (Exception $e) {
        $server -> fault ('Client', $e -> getMessage());
    }
?php> 
```

http请求是由我使用的应用程序构造的；http标头和soap信封+正文是围绕我提供的XML生成的：

SOAP 请求正文内容：

```
<mi102 xmlns="http://pse">
  <cdhead cisprik="21"/>
  <instr>
    <insid>
      <bcdt>20120930</bcdt>
    </insid>
  </instr>
</mi102> 
```

使用的 WSDL 如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://schemas.xmlsoap.org/wsdl/" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:tns="http://pse/" xmlns:xs="http://www.w3.org/2001/XMLSchema" name="PSE" targetNamespace="http://pse/">
    <types>
        <xs:schema>
            <xs:import namespace="http://pse/" schemaLocation="PSE.xsd"/>
        </xs:schema>
    </types>
    <message name="MI102Req">
        <part name="cdhead" type="tns:cdhead_T"/>
        <part name="instr" type="tns:instr_T"/>
    </message>
    <message name="Res">
        <part name="cdhead" type="tns:cdhead_T"/>
    </message>
    <portType name="MIPortType">
        <operation name="mi102">
            <input message="tns:MI102Req"/>
            <output message="tns:Res"/>
        </operation>
    </portType>
    <binding name="MIBinding" type="tns:MIPortType">
        <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
        <operation name="mi102">
            <soap:operation soapAction="http://testServerURL/test_soap.php#mi102"/>
            <input>
                <soap:body use="literal" namespace="http://pse/"/>
            </input>
            <output>
                <soap:body use="literal" namespace="http://pse/"/>
            </output>
        </operation>
    </binding>
    <service name="PSE">
        <port name="MIPortType" binding="tns:MIBinding">
            <soap:address location="http://testServerURL/test_soap.php"/>
        </port>
    </service>
</definitions> 
```

生成的 XML（同样，由我使用的应用程序从 SOAP 主体中提取）是

SOAP 响应：

```
<?xml version="1.0" encoding="UTF-8"?>
<ns1:mi102Response xmlns:ns1="http://pse/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">O:8:"stdClass":2:{s:7:"cisprik";i:21;s:7:"version";s:2:"13";}</ns1:mi102Response> 
```

不太好。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T07:37:16.840

我最终在 SO 上的其他线程中找到了答案，例如[get-recieved-xml-from-php-soap-server](https://stackoverflow.com/questions/6895187/get-recieved-xml-from-php-soap-server)

解决方案是使用以下内容：

```
$inp = file_get_contents ('php://input'); 
```

注意：我找不到任何可以作用于`stdClass`输入参数并可以从中检索 XML SOAP 正文内容的函数。
所以最好的选择是使用标准的 php 输入变量。请注意，它具有以下结构：`Envelope/Body/..inputXML..`，这是发布到服务器的确切 http 请求内容。

注意：`http_get_request_body`可能也可以，但我的 php 服务器不支持此功能。我认为`file_get_contents`从某个版本开始，每个 php 服务器都支持这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:14:02.293

这不会作为一个完整的答案开始，但我想要格式化。请详细说明您设置了什么。通常，您将拥有一个带有常规参数（不是 XML）的 PHP 方法，您希望将其公开为 Web 服务。有关如何执行此操作的基本示例如下：

[http://www.phpeveryday.com/articles/Web-Services-WSDL-Creating-SOAP-Server-P484.html](http://www.phpeveryday.com/articles/Web-Services-WSDL-Creating-SOAP-Server-P484.html)

> SOAP 主体的 XML 内容是我假设的函数的参数

不，SOAP 主体的 XML 内容是带有您的参数的方法的*表示*，但您的参数是您想要的任何东西。如果使用 PHP 的 SoapServer 和 SoapClient 设置 XML，则不必手动处理 XML。

编辑：您正在接受您的论点，这是您的 SOAP 请求主体的简单 PHP 数组表示，将其序列化并将其作为响应发送回（这是您观察到的）。这是你想做的吗？你不想对请求数据做点什么吗？另外，您能否发布从 WSDL 导入的模式？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T16:05:12.907

您拥有对象的“不好”表示，因为您正在返回序列化的对象（序列化正在将对象及其状态转换为字符串表示）。如果您想要返回对象的 xml 表示，您应该将函数的返回参数类型更改为对象。因为现在正在返回一个字符串。

我建议您使用 zend 框架的 Zend_Soap_Server 和 Zend_Soap_Autodiscover 组件。

使用 Zend_Soap_Autodiscover，您可以动态生成 W​​eb 服务定义 (wsdl)，只需编写函数的文档块。Zend_Soap_Server 也很酷。

如果您使用这些组件并记录您的类型和函数以返回特定类型而不对其进行序列化，那么您将根据 wsdl 定义接收 xml 表示。此外，您创建的每个类型都由 Zend_Soap_Autodiscover 自动转换为生成的 wsdl 中的 ComplexType。

样本：

```
 public class Person{
         public $id;
         public $name;
    }

    public class MyService {
     /**
     *
     * @param integer $UserID
     * @return Person
     */
    function mi102($UserID) {

         $output = new Person();
         $output->id = 2;
         $output->name = 'Peter';        

        return $output;
    }
}

// Generate WSDL relevant to code
if (isset($_GET['wsdl'])){

    $autodiscover = new Zend_Soap_AutoDiscover();
    $autodiscover->setClass('MyService');
    $autodiscover->handle();

} else {

    $server = new Zend_Soap_Server($serviceURL . "?wsdl");
    $server->setClass('MyService');
    $server->setObject(new MyService());
    $server->handle();

} 
```

# windows - 如何启动 Windows 日历以显示特定日期？

> ID：12692800
> 
> 赞同：2
> 
> 时间：2012-10-02T14:56:43.770
> 
> 标签：windows, delphi, calendar, windows-vista

我想在某一天启动 Windows 日历查看。有没有办法做到这一点？

[我已经对 Window Mobile 上的 Calendar 做了同样的事情](http://msdn.microsoft.com/en-us/library/aa911847.aspx)，但同样的方法在 Windows Vista 上不起作用。

# php - 在php中处理数组

> ID：12692801
> 
> 赞同：0
> 
> 时间：2012-10-02T14:56:44.490
> 
> 标签：php, arrays, multidimensional-array, forms, html-input

我得到了这个 2 数组的形式来处理。但是，我只能设法从其中一个数组中获取输出。示例如下：

`<inputs id="location" type="text" name="data[]" value=""/>`
`<input id="shipval" type="text" name="data[][id]" value=""/>`

在 PHP 部分如下：

```
foreach ($_POST ["data"] as $id => $subs) {       

            foreach ($subs as $key=>$sub) {

                $subcategory = $sub;

                if($subs['id']=="$subcategory"){
                    echo $sql = " insert into x(kodLebuhraya,kodSeksyen) values ('".$subs['id']."','".$sub."')";echo "<br>";    
                }else{
                    //echo "hi2";
                    echo $sql = " insert into x(kodLebuhraya,kodSeksyen) values ('".$subs['id']."','".$sub."')";echo "<br>";
                }

            }   

        } 
```

这意味着一艘船的一个位置。我有多个位置和船舶输入字段。各位大佬能指点一下哪一个是错的。先谢谢了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T15:06:36.450

所以基本上你需要成对传递位置和船舶。

在 HTML 中试试这个结构：

```
<label>Set One</label>
<input class="location" type="text" name="data[location][]" value=""/>
<input class="shipval" type="text" name="data[shipval][]" value=""/>
<label>Set Two</label>
<input class="location" type="text" name="data[location][]" value=""/>
<input class="shipval" type="text" name="data[shipval][]" value=""/>
<label>Set Three</label>
<input class="location" type="text" name="data[location][]" value=""/>
<input class="shipval" type="text" name="data[shipval][]" value=""/> 
```

而这个PHP代码：

```
 foreach ($_POST['data']['location'] as $key => $location) {       
        $shipVal = $_POST['data']['shipval'][$key];

        //now you have a pair of $location and $shipVal
        echo $location.' : '.$shipVal.'<hr>';

    } 
```

避免在未命名的索引之后使用命名索引。`<input name="array[][named]" />`如果一对字段之一为空，您可能会丢失字段顺序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:00:01.440

你有`<inputs id="location"`而不是`<input id="location"`

另外...`foreach ($subs as $key => $sub) {`会抛出一个错误，`<inputs id="location" type="text" name="data[]" value=""/>`因为它不是多维的。所以尝试将其更改为`<inputs id="location" type="text" name="data[][]" value=""/>`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:01:04.883

对于多选，名称必须以方括号结尾，因此您需要更改`shipval`输入的名称

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:04:31.270

首先你已经写了`inputs`而不是`input`.

其次，这一行：

`foreach ($subs as $key=>$sub) {`

会将每个变量视为一个数组，但该位置不是一个数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-02T15:07:36.823

我没有看到需要循环，因为您只想访问`$_POST['data'][0]`和`$_POST['data'][1]['id']`

我还注意到你的 SQL 是重复的，所以你可以试试 你可以试试

```
$sql = "INSERT INTO  x(`kodLebuhraya`,`kodSeksyen`) VALUES ('%s','%s')" ;
printf($sql,mysqli_real_escape_string($_POST['data'][0]),mysqli_real_escape_string($_POST['data'][1]['id'])); 
```

输出

```
INSERT INTO x(`kodLebuhraya`,`kodSeksyen`) VALUES ('A','B') 
```

使用的表格

```
<form method="POST">
    A : <input id="location" type="text" name="data[]" value="" /> 
    B : <input id="shipval" type="text" name="data[][id]" value="" /> 
    <input  id="shipval" type="submit" name="submit" value="Submit" />
</form> 
```

# c++ - 资源文件是编译为 UNICODE 还是 ANSI 代码页？

> ID：12692803
> 
> 赞同：11
> 
> 时间：2012-10-02T14:56:46.080
> 
> 标签：c++, winapi, dll, resources, rc

首先 - 如果这个问题已经被回答了一百次，我很抱歉！哦！

但是我的 search-fu 显然很糟糕，因为我没有运气回答这个基本问题：

> 资源如何存储在 EXE/DLL 中？作为 UNICODE（UCS-2，Windows 原生内部字符格式），还是使用资源块的代码页作为多字节字符？

*   如何将 UNICODE 字符串嵌入到资源 (.rc) 中？
*   可以将 UNICODE (UCS-2) 文本从 VS 2012 中插入到语言字符串中吗？
*   Windows 是否仍在使用 UCS-2，还是在内部使用 UTF16？

我只是在寻找一般答案或详细信息的链接，而不是寻找将 UNICODE 字符串放入 .rc 字符串表的详细方法。谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T15:02:03.363

WIN32 中的所有资源字符串都编译为 Unicode。请参阅[此处](http://msdn.microsoft.com/en-us/library/cc194805.aspx)了解更多信息。.rc 脚本本身可以是 ANSI（使用本地代码页）或带有适当 BOM（[参考](http://msdn.microsoft.com/en-us/library/windows/desktop/aa380599(v=vs.85).aspx)）的 UCS-2。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T15:00:22.200

如果有疑问，请查看十六进制。这里是 notepad.exe 的 rc 文件的开头，采用 UTF16 格式：

```
0002ed60  01 00 53 00 74 00 72 00  69 00 6e 00 67 00 46 00  |..S.t.r.i.n.g.F.|
0002ed70  69 00 6c 00 65 00 49 00  6e 00 66 00 6f 00 00 00  |i.l.e.I.n.f.o...|
0002ed80  a6 02 00 00 01 00 30 00  34 00 30 00 39 00 30 00  |......0.4.0.9.0.|
0002ed90  34 00 42 00 30 00 00 00  4c 00 16 00 01 00 43 00  |4.B.0...L.....C.|
0002eda0  6f 00 6d 00 70 00 61 00  6e 00 79 00 4e 00 61 00  |o.m.p.a.n.y.N.a.|
0002edb0  6d 00 65 00 00 00 00 00  4d 00 69 00 63 00 72 00  |m.e.....M.i.c.r.|
0002edc0  6f 00 73 00 6f 00 66 00  74 00 20 00 43 00 6f 00  |o.s.o.f.t. .C.o.|
0002edd0  72 00 70 00 6f 00 72 00  61 00 74 00 69 00 6f 00  |r.p.o.r.a.t.i.o.| 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2022-02-16T07:38:51.570

这里有一个很好的关于这个问题的文章。

资源编译器默认为 CP_ACP，即使面对文件是 UTF-8 的微妙提示 [https://devblogs.microsoft.com/oldnewthing/20190607-00/?p=102569](https://devblogs.microsoft.com/oldnewthing/20190607-00/?p=102569)

# ruby-on-rails - 每种语言的轮胎指数？

> ID：12692816
> 
> 赞同：0
> 
> 时间：2012-10-02T14:57:22.720
> 
> 标签：ruby-on-rails, ruby, elasticsearch, tire

我在 Rails 模型上有以下轮胎映射：

```
 mapping do

     indexes :name, analyzer: 'arabic', boost: 10

     indexes :city_name, analyzer: 'arabic', boost: 5

     indexes :description, analyzer: 'arabic' 

   end 
```

能够涵盖多种语言的最佳方式是什么（如果我想添加英语或其他内容）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T20:43:22.317

重要的是您需要使用每种语言的特定字段来索引数据。
您希望根据语言进行文本分析的每个字段（词干、停用词、同义词等）都需要特定的映射，具体取决于语言本身。假设您有一个标题和一个内容字段，每种语言都需要几个这样的字段。
然后，您可以决定在同一索引、同一类型上为所有文档编制索引，并添加一个包含该语言的字段。否则，您可以将每种语言索引为不同的类型，这与第一个选项相同，但您无需在查询时手动指定语言过滤器。只要您将语言指定为 URL 中的类型，过滤器就会“自动”应用，如下所示：

```
curl -X GET http://localhost:9200/index/en/_search -d '{
  "query" : {"match_all" : ""}
} 
```

否则，您还可以为每种语言使用不同的索引。这实际上取决于您的数据、索引的大小（每种语言有多少文档？）以及您将如何进行查询（总是按语言，或者您可以混合不同的语言吗？）。

此外，Shay 最近在 Berlin Buzzwords 上发表的[数据设计模式](http://vimeo.com/44716955)演讲可能会让您感兴趣。

# r - 在 igraph 中生成社区图

> ID：12692817
> 
> 赞同：9
> 
> 时间：2012-10-02T14:57:24.363
> 
> 标签：r, social-networking, igraph

我一直在寻找这个问题的答案，但找不到任何提及，所以我决定在这里发帖。我正在尝试查看 igraph 或任何软件包是否提供了一种简单的方法来创建“社区图”，其中每个节点代表网络中的一个社区，而关系代表社区之间的关系。我可以让社区检测算法在 igraph 中正常工作，但我找不到一种方法来折叠结果以仅显示每个社区之间的联系。任何援助将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-02T23:36:02.613

您可以简单地使用[contract.vertices()](http://igraph.sourceforge.net/doc/R/contract.vertices.html)函数。这会将一组顶点压缩为一个顶点，基本上与您想要的方式相同。例如

```
library(igraph)

## create example graph
g1 <- graph.full(5)
V(g1)$name <- 1:5    
g2 <- graph.full(5)
V(g2)$name <- 6:10
g3 <- graph.ring(5)
V(g3)$name <- 11:15
g <- g1 %du% g2 %du% g3 + edge('1', '6') + edge('1', '11')

## Community structure
fc <- fastgreedy.community(g)

## Create community graph, edge weights are the number of edges
cg <- contract.vertices(g, membership(fc))
E(cg)$weight <- 1
cg2 <- simplify(cg, remove.loops=FALSE)

## Plot the community graph
plot(cg2, edge.label=E(cg2)$weight, margin=.5, layout=layout.circle) 
```

# java - 获取哈希表中最小值的键

> ID：12692819
> 
> 赞同：6
> 
> 时间：2012-10-02T14:57:35.020
> 
> 标签：java, hash

我在 java 中有一个 Hashtable，如下所示，我正在尝试获取具有最小值的键。显然我可以遍历所有元素来找到它，但是有没有更简单的方法呢？

```
Hashtable<Object, Integer> hash= new Hashtable<Object, Integer>(); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-02T14:59:35.543

~~使用哈希表，不。但是您可以改为使用[`TreeMap`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html).~~

 ~~> 基于红黑树的[`NavigableMap`](http://docs.oracle.com/javase/6/docs/api/java/util/NavigableMap.html)实现。地图根据其键的自然顺序排序，或者由地图创建时提供的 Comparator 排序，具体取决于使用的构造函数。~~ 

~~它有一种方法[`firstKey()`](http://docs.oracle.com/javase/6/docs/api/java/util/TreeMap.html#firstKey%28%29)可以提供您想要的确切功能。~~

* * *

Grr，值，而不是键。不，那么您将需要迭代。

我会说在这种情况下您应该使用单独的地图（Multimap？）来存储反向关联。

```
Map<Object, Integer> hash= new Hashtable<Object, Integer>();
SortedSetMultimap<Integer, Object> reverse = TreeMultimap.create(); 
```

每当你把`key`，`value`东西放进去`hash`，也放进去`value`，`key`放进去`reverse`。然后使用检索最小值`reverse.keySet().first()`

（此解决方案需要[Guava](https://code.google.com/p/guava-libraries/)）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T15:12:59.083

您可以使用库函数[Collections.min(Collection,Comparator)](http://docs.oracle.com/javase/7/docs/api/java/util/Collections.html#min%28java.util.Collection,%20java.util.Comparator%29)而不是自己迭代`entrySet()`。

**样本**

```
public static void main(String[] args) {

    HashMap<String,Integer> map = new HashMap<String,Integer>();

    map.put("A", 1);
    map.put("B", 2);
    map.put("C", 3);

    System.out.println( 

    Collections.min(map.entrySet(), new Comparator<Map.Entry<String,Integer>>() {

        @Override
        public int compare(Entry<String, Integer> o1, Entry<String, Integer> o2) {

            return o1.getValue().intValue() - o2.getValue().intValue();

        }})

        .getKey()

    );
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:38:57.983

也可以通过这种方式找到最小值，

```
 Hashtable h = new Hashtable();
    h.put(10, "aaa");
    h.put(1, "aab");
    h.put(12, "aabwqkjdg");

    Set set = h.keySet();

    TreeSet treeSet= new TreeSet();
    treeSet.addAll(set);

    System.out.println("Last :"+treeSet.first()); 
```

我只是将键作为整数的例子。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:24:26.120

看起来最简单的方法实际上是迭代元素。如果 Hashtable 名称是 hash：

```
Object minObj= null;
int min= Integer.MAX_VALUE;
for(Map.Entry<Object, Integer> x: hash.entrySet()){
    if(x.getValue() < min){
            min= x.getValue();
            minObj= x.getKey();
    }
} 
```

# google-maps - 是否可以在 DirectionsService 路线中距离起点的“公里”之后放置一个标记？

> ID：12692824
> 
> 赞同：-1
> 
> 时间：2012-10-02T14:57:45.887
> 
> 标签：google-maps, google-maps-api-3

这是我的代码：

```
var request = {
    origin: start,
    destination: end,
    travelMode: google.maps.DirectionsTravelMode.DRIVING
};

directionsService.route(request, function (response, status) {
    if (status == google.maps.DirectionsStatus.OK) {
        directionsDisplay.setDirections(response);
    }
}); 
```

现在，我想在距离该点 200 公里后放置一个标记`origin: start`：这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:18:54.627

这是一个在路线上放置两个标记的示例（一个在 9.5 公里处，一个在 64.8 公里处）：

[http://www.geocodezip.com/v3_GoogleEx_directions-waypoints_kmmarkersC.html](http://www.geocodezip.com/v3_GoogleEx_directions-waypoints_kmmarkersC.html)

（所以，是的，这是可能的）

此示例是在[几何库](https://developers.google.com/maps/documentation/javascript/geometry)发布之前创建的，并且可能可以重写以使用它。

# iphone - 使用计时器以编程方式拍照

> ID：12692829
> 
> 赞同：2
> 
> 时间：2012-10-02T14:57:59.730
> 
> 标签：iphone, objective-c, timer, photo

我正在寻找一种在Objective-C中从代码和使用计时器的图像显示器中制作照片的方法。

我的意思是：我想要一个类似于标准照片应用程序的界面，但不能在按下按钮后拍照，但按钮必须启动一个计时器（从计时器我会检查其他值）。

让我们举个例子：

*   我按下按钮

*   计时器开始

*   检查值 1-2 秒后，照片被拍摄

*   照片会自动保存在照片库中。

*   该应用程序已准备好制作其他照片

但我不知道如何开始。我看到了调用照片应用程序的代码示例，但没有任何东西可以从代码中实现，尽管我看到很多应用程序都是这样做的。当照片被拍摄时，它应该被简单地保存。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:35:04.187

UIImagePickerController 类中有一个方法可以以编程方式拍照

```
-(void)takePicure 
```

要将图像保存到照片库，您有两种选择

1.  使用 ALAssetLibrary

    `ALAssetsLibrary *al = [[ALAssetsLibrary alloc] init]; [al writeImageDataToSavedPhotosAlbum:user.photo.image metadata:nil completionBlock:^(NSURL *assetURL, NSError *error) { }];`

2.  `void UIImageWriteToSavedPhotosAlbum(UIImage *image, id completionTarget, SEL completionSelector, void *contextInfo);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:34:59.257

用于[`UIImagePickerController`](http://developer.apple.com/library/ios/documentation/UIKit/Reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)显示默认摄像机 GUI。

```
UIImagePickerController *picker = [[UIImagePickerController alloc] init];
picker.sourceType = UIImagePickerControllerSourceTypeCamera;
picker.showsCameraControls = NO; 
```

`showsCameraControls`您可以通过设置隐藏默认相机控件`NO`。然后，您可以通过创建一个`UIView`，将您的控件和设置添加`cameraOverlayView`到该视图来定义您自己的控件。

```
UIView *cameraControlsView = [[UIView alloc] initWithFrame:controlsFrame];
UIButton *captureButton = [[UIButton alloc] initWithFrame:buttonFrame];
[captureButton setTitle:@"Capture" forState:UIControlStateNormal];
[captureButton addTarget:self action:@selector(buttonPressed:)        
        forControlEvents:UIControlEventTouchUpInside];
[cameraControlsView addSubview:captureButton];
picker.cameraOverlayView = cameraControlsView; 
```

当用户点击您的自定义捕获`UIButton`时，您可以启动计时器。当计时器触发时，您进行验证并使用该`takePicture`方法捕获图像。

```
- (void)buttonPressed:(id)sender {
    [NSTimer scheduledTimerWithTimeInterval:3.0f target:self 
     selector:@selector(timerFired:) userInfo:nil repeats:NO];
}

- (void)timerFired:(NSTimer *)timer {
    if (whateverIsOk) {
        [self.picker takePicture];
    )
} 
```

# c# - OracleCommand 的 CommandTimeout

> ID：12692832
> 
> 赞同：0
> 
> 时间：2012-10-02T14:58:11.883
> 
> 标签：c#, asp.net-mvc-3, ado.net

我发现`CommandTimeout`in 的属性`System.Data.OracleClient.OracleCommand`似乎被忽略了。我无法将 ODP.NET 用于我的 Oracle 连接，但需要对我的查询实施超时。

我不关心杀死数据库上的实际查询，如果没有返回结果，只需在 X 秒后结束执行查询的过程。

我一直在使用 Threads 和其他方法来实现这一点，但我肯定不是第一个有这个要求的人。

有没有其他人遇到过这个？如果是这样，您的解决方案是什么？

# jquery - BlockUi 在 IE 中不起作用

> ID：12692842
> 
> 赞同：0
> 
> 时间：2012-10-02T14:58:45.933
> 
> 标签：jquery, internet-explorer, asp.net-4.0, jquery-blockui

我们使用`BlockUi`Jquery 在页面中显示进度事件。

以下是`js`页面中包含的代码

```
<script type="text/javascript" language="javascript">
    var UpdPanelsIds = null;
    Sys.WebForms.PageRequestManager.getInstance().add_beginRequest(BeginRequestHandler);
    Sys.WebForms.PageRequestManager.getInstance().add_endRequest(EndRequestHandler);

    function BeginRequestHandler(sender, args) {
        //  alert('hi');
        //        var updpnl = sender._postBackSettings.panelID;
        //        alert(updpnl);

        UpdPanelsIds = args.get_updatePanelsToUpdate();
        UpdPanelsIds = UpdPanelsIds.toString().split('$').join('_');

        $('#' + UpdPanelsIds + '').block({ message: $('#divBlock') });

    }

    function EndRequestHandler(sender, args) {
        $('#' + UpdPanelsIds + '').unblock();
    }

</script> 
```

下面是`div`使用`BlockUI`jquery阻塞和解除阻塞的

```
 <div style="display: none;height:70px;width:70px;" id="divBlock">
                    <img id="ctl00_Image1" src="../Images/Loading_Trans.gif" alt="Loading.." style="border-width:0px;" />
               </div> 
```

这适用于其他浏览器，但在 IE 中，它仅适用于第一个请求，然后在所有后续请求中，`div`显示在背景中，但`image`不`div`显示

任何机构对这个问题有任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T02:53:34.417

尝试添加

```
<!DOCTYPE html> 
```

像那样

```
<!DOCTYPE html>
   <html>
    <head>
           .
           . 
```

# python - 为什么右键单击会在圆圈中心创建一个橙色点？

> ID：12692851
> 
> 赞同：35
> 
> 时间：2012-10-02T14:59:19.683
> 
> 标签：python, kivy

为什么kivy 中[的第一个小部件示例](http://kivy.org/docs/guide/firstwidget.html)在您右键单击画布时会导致黄色圆圈中间出现橙色圆圈，而当您左键单击时会导致纯黄色圆圈？

```
from kivy.app import App
from kivy.uix.widget import Widget
from kivy.graphics import Color, Ellipse

class MyPaintWidget(Widget):
    def on_touch_down(self, touch):
        with self.canvas:
            Color(1, 1, 0)
            d = 30.
            Ellipse(pos=(touch.x - d/2, touch.y - d/2), size=(d, d))

class MyPaintApp(App):
    def build(self):
        return MyPaintWidget()

if __name__ == '__main__':
    MyPaintApp().run() 
```

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2016-06-01T15:29:08.073

To disable multi-touch emulation, add this to your source file containing your main function, before any other kivy modules are imported:

```
from kivy.config import Config
Config.set('input', 'mouse', 'mouse,multitouch_on_demand') 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-02T23:02:27.847

它是多点触控仿真，您可以在此处查看如何禁用它

[http://kivy.org/docs/api-kivy.input.providers.mouse.html](http://kivy.org/docs/api-kivy.input.providers.mouse.html)

# javascript - JavaScript：用函数参数定义变量名

> ID：12692853
> 
> 赞同：0
> 
> 时间：2012-10-02T14:59:24.080
> 
> 标签：javascript, function, variables, naming-conventions, function-parameter

**是否可以在 JavaScript 中使用函数参数定义变量名？**

这是**[我的 jsFiddle](http://jsfiddle.net/markrummel/zVM9M/)**。在下面的示例中，我希望`varB`将其定义为何`null`时通过`makeNull(varName)`：

```
var varA = undefined;
if (varA == undefined) {
  varA = null;
}
var varB = undefined;

makeNull(varB);

function makeNull(varName) {
  if (varName == undefined) {
    varName = null;   
  }
}  

alert (varA + ' | ' + varB); 
```

​</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:00:37.800

如果您尝试使用函数参数定义变量，那么您可能想要使用数组或对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:14:32.563

JavaScript 不提供“引用调用”参数。当您调用函数时，它会接收参数表达式的值，而不是对表达式中变量的引用。所以它不能修改这些变量的绑定。

如果你想做这样的事情，你可以使用容器和标签，例如

```
function makeNull(obj, label) {
  if (obj[label] === undefined) {
      obj[label] = null;
  }
}
var varB = { abc: undefined }
makeNull(varB, 'abc'); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T15:02:44.237

您可以将变量（定义为“未定义”）传递给函数并设置其值。

[http://jsfiddle.net/AwnVN/](http://jsfiddle.net/AwnVN/)

# objective-c - 'isMemberOfClass' 在自定义初始化时返回 'NO'

> ID：12692854
> 
> 赞同：0
> 
> 时间：2012-10-02T14:59:25.250
> 
> 标签：objective-c, nsobject

> **可能重复：**
> [当从 UIStoryboard 实例化 ViewController 时，isMemberOfClass 返回 no](https://stackoverflow.com/questions/11675256/ismemberofclass-returns-no-when-viewcontroller-is-instantiated-from-uistoryboard)

我最近偶然发现了一个奇怪的问题：

我正在实现简单的测试用例并使用 NSObject isMemberOfClass 方法来检查类是否相等。

另外我实现了一个自定义初始化：

```
-(id)initWithMessage:(NSString *)message 
```

如果我用正确的类名替换 id，isMemberOfClass 将返回“YES”。否则会失败。

有趣的部分是：类方法每次都会返回正确的类。

这是一个错误吗？或者它应该以这种方式工作？

谢谢..

编辑：

好的，这并没有解决问题..这就是我要做的.. isMemberOfClass 将始终返回 NO

测试用例：

```
- (void)test010_broadcastWait
{
    ...
    GDataXMLDocument *doc = [[GDataXMLDocument alloc] initWithData:xmlData
                                                           options:0 error:&error];
    Brick *newBrick = [self.parser loadBroadcastWaitBrick:doc.rootElement];
    if (![newBrick isMemberOfClass:[BroadcastWaitBrick class]])
        STFail(@"Wrong class-member");
    ....
} 
```

广播等待类：

导入“BroadcastWaitBrick.h”

```
@implementation BroadcastWaitBrick

-(id)initWithMessage:(NSString *)message
{
    self = [super init];
    if (self)
    {
        self.message = message;
    }
    return self;
}

... 
```

加载方法：

```
-(BroadcastWaitBrick*)loadBroadcastWaitBrick:(GDataXMLElement*)gDataXMLElement
{

    NSArray *messages = [gDataXMLElement elementsForName:@"broadcastMessage"];
    GDataXMLElement *message = (GDataXMLElement*)[messages objectAtIndex:0];

    BroadcastWaitBrick* brick = [[BroadcastWaitBrick alloc]initWithMessage:message.stringValue];

    return brick;
} 
```

* * *

## 回答 #1

> 赞同：-3
> 
> 时间：2012-10-02T15:37:28.683

`isMemberOfClass`在您的测试用例中返回`NO`，因为您将 newBrick var 声明为 Brick 类的成员。

在这种情况下，更好的选择是使用`isKindOfClass`方法或将 newBrick 声明为`id`.

# c++ - 将格式化的mac地址写入stringstream

> ID：12692857
> 
> 赞同：1
> 
> 时间：2012-10-02T14:59:32.877
> 
> 标签：c++

我有以下课程（仅部分课程，课程中有更多字段）

```
class Network{
public:
      string src_ip_;
      string alternative_src_ip_;
      array<unsigned char,6> mac_;
      string toString(){
           stringstream ss;
           ss << src_ip_ << SEPERATOR << alternative_src_ip_ << SEPERATOR ;
           return ss.str();
      }
} 
```

我想在 toString 方法中添加一个格式化的 mac（带 :)？有没有一种简单的方法来采用我的 printMac 方法（通过generelize 或通过编写新方法），它将在 << 运算符中结合使用

```
void printMac(array<unsigned char, 6> mac) {
    printf("%02x:%02x:%02x:%02x:%02x:%02x\n", 
            (unsigned char) mac[0], (unsigned char) mac[1],
            (unsigned char) mac[2], (unsigned char) mac[3],
            (unsigned char) mac[4], (unsigned char) mac[5]);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:07:30.957

使用[IO 操纵器](http://en.cppreference.com/w/cpp/io/manip)：

```
std::ostringstream s;
unsigned char arr[6] = { 0, 14, 10, 11, 89, 10 };

s << std::hex << std::setfill('0');

for (int i = 0; i < sizeof(arr); i++)
{
    if (i > 0) s << ':';

    // Need to:
    //  - set width each time as it only
    //    applies to the next output field.
    //  - cast to an int as std::hex is for
    //    integer I/O
    s << std::setw(2) << static_cast<int>(arr[i]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T15:32:09.043

您可以用 sprintf 替换您对 printf 的使用，然后使用它来实现 operator<< 用于 ostreams

```
void printMac(array<unsigned char, 6> mac, char (&out)[18]) {
    sprintf(out, "%02x:%02x:%02x:%02x:%02x:%02x", 
            (unsigned char) mac[0], (unsigned char) mac[1],
            (unsigned char) mac[2], (unsigned char) mac[3],
            (unsigned char) mac[4], (unsigned char) mac[5]);
}

std::ostream &operator<<(std::ostream &os, std::array<unsigned char, 6> mac) {
    char buf[18];
    printMac(mac, buf);
    return os << buf << '\n';
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:08:44.340

如果你想维护类似 printf 的代码，你可以试试[Boost.Format](http://www.boost.org/doc/libs/1_51_0/libs/format/)。

```
ss << boost::format("%02x:%02x:%02x:%02x:%02x:%02x\n") % mac[0] % mac[1] % mac[2] % mac[3] % mac[4] % mac[5]; 
```

# c# - 挂钩到反序列化过程

> ID：12692860
> 
> 赞同：1
> 
> 时间：2012-10-02T14:59:36.970
> 
> 标签：c#, serialization, binaryformatter

我有一个`DateRange`通过静态引用表示无限概念的对象，如下所示。如您所见，定义 Infinity 的端点也是不同类中的静态引用，`DatePoint.Past`并且`DatePoint.Future`.

现在我需要对其进行序列化（作为使用序列化的深度克隆方法的一部分）并知道**何时反序列化具有`DateTime.Min`和`DateTime.Max`作为端点的实例，那么该实例应该是`DateRange.Infinity`**. 所以我想我需要成功`ISerializable`。

我的第一次实施尝试`ISerializable`很差；但我正在展示它，希望它可以为某人提供更快的解决方案。我已经为 NHibernate 使用了一些类似的代码来存储`DateRange`在数据库中并重新构建 Infinity，但我还不知道如何将其应用于序列化。

`DatePoint`已标记`[Serializable]`但未实现`ISerializable`。

# 编辑过的问题

我不想序列化/反序列化 Infinity。我*正在*寻找的是一个挂钩，我可以将反序列化`DataRange`并决定它是否等同于`Infinity`.

# **

干杯，贝里尔

# 日期范围

```
[Serializable]
[TypeConverter(typeof(DateRangeTypeConverter))]
public class DateRange : ValueObject, IRange<DatePoint, DateRange, TimeSpan>, ISerializable
{
    /// <summary>
    /// Returns a range spanning <see cref="DatePoint.Past"/> and <see cref="DatePoint.Future"/>.
    /// </summary>
    public static readonly DateRange Infinity = new DateRange(DatePoint.Past, DatePoint.Future);

    /// <summary> The start of the <see cref="DateRange"/> range. </summary>
    public DatePoint Start { get; protected set; }

    /// <summary> The end of the <see cref="DateRange"/> range. </summary>
    public DatePoint End { get; protected set; }

} 
```

# 日期点

```
public class DatePoint : ValueObject, IComparable<DatePoint>, IComparable<DateTime>, IComparable, IEquatable<DatePoint>, IEquatable<DateTime>, IFormattable
{

    /// <summary>The undefined infinite past, smaller than any other date except itself.</summary>
    public readonly static DatePoint Past = DateTime.MinValue;

    /// <summary>The undefined infinite future, larger than any other date except itself.</summary>
    public readonly static DatePoint Future = DateTime.MaxValue;

} 
```

# 第一次 ISerializable 尝试

```
 protected DateRange(SerializationInfo info, StreamingContext ctx) {
        if (info == null)
            throw new System.ArgumentNullException("info");
        var start = (DatePoint)info.GetValue("Start", typeof(DatePoint));
        var end = (DatePoint)info.GetValue("End", typeof(DatePoint));
        // its Infinity if so
        if((start.Equals(DatePoint.Past) && end.Equals(DatePoint.Future)))
            return;
    }

    public void GetObjectData(SerializationInfo info, StreamingContext context)
    {
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:06:31.907

您不能创建静态成员的实例，因此它们不能被序列化或反序列化。

您可以改为创建一个适当的公共属性，其中 a`protected set`什么都不做， a`get`返回您想要的结果。然后可以序列化该属性，但不能反序列化，因为那将是徒劳的……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-03T06:31:22.310

您可以`IObjectReference`在反序列化后实现和替换对象：

```
object IObjectReference.GetRealObject(StreamingContext context)
{
    if (Start.Equals(DatePoint.Past) && End.Equals(DatePoint.Future))
    {
        return Infinity;
    }
} 
```

请参阅[文档](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.iobjectreference.getrealobject.aspx)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T17:12:31.353

我*不*喜欢回答我自己的问题，但这里有一个似乎可行的解决方案。可能我一开始就没有问正确的问题，当我问这个问题时，我不知道该怎么做。

有人看到了更好的方法，请说出来！

干杯，
贝里尔

# 使 DateRange 实现 ISerializable

```
 protected DateRange(SerializationInfo info, StreamingContext context) {
        if (info == null)
            throw new ArgumentNullException("info");

        var foundPast = (bool) info.GetValue("thePast", typeof (bool));
        if (foundPast)
            Start = DatePoint.Past;
        var foundFuture = (bool) info.GetValue("theFuture", typeof (bool));
        if (foundFuture)
            End = DatePoint.Future;
    }

    public void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        info.AddValue("thePast", Start.Equals(DatePoint.Past), typeof(bool));
        info.AddValue("theFuture", End.Equals(DatePoint.Future), typeof(bool));
    } 
```

# svn - CVS vs SVN 分支策略

> ID：12692862
> 
> 赞同：0
> 
> 时间：2012-10-02T14:59:40.743
> 
> 标签：svn, cvs

我正在调查试图让我的团队从 CVS 迁移到 SVN，在我看来 SVN 比 CVS 有很多优势，但是将遗留系统和团队从已经使用了 10 年以上的东西迁移将被证明是困难的。

我试图猜测当我介绍为什么我们应该迁移到 SVN 时会被问到的问题，并且想知道您是否可以填写适当的答案（或者甚至为什么 SVN 在这方面更糟）。

我还将尝试解释我们目前的工作方式，如果您能说出必须更改的内容，我将不胜感激！

* * *

目前我们必须对我们的 CVS、HEAD（生产）和测试（`TEST`）的主要部分

来自 TEST 的代码每晚构建，如果构建成功，则使用新的 CVS 标记进行标记。一旦我们对它感到满意，我们就会将该标签从 TEST 拉到 HEAD 中，然后进行最终构建并部署给用户。

我们广泛使用 CVS 的 $Header$ 功能，它在与代码合并时经常会导致冲突（尤其是反向合并）。

由于 CVS 处理文件单独回滚损坏的提交（甚至看到文件更改）证明是非常困难的（逐个文件）。

在签入时，CVS 倾向于认为你已经接触了很多你没有接触过的文件

* * *

综上所述，改用 SVN 对我们有何影响？

谢谢你的时间，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:57:27.990

> 我们广泛使用 CVS 的 $Header$ 功能，它在与代码合并时经常会导致冲突（尤其是反向合并）。

Subversion 足够聪明，可以在执行合并和差异时忽略扩展关键字。

> 由于 CVS 处理文件单独回滚损坏的提交（甚至看到文件更改）证明是非常困难的（逐个文件）。

由于 Subversion 修订的存储/提交方式，回滚整个提交（修订）实际上比从单个提交（甚至一组提交）中挑选单个项目来回滚*更容易。*见[http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html#svn.branchmerge.basicmerging.undo](http://svnbook.red-bean.com/en/1.7/svn.branchmerge.basicmerging.html#svn.branchmerge.basicmerging.undo)

> 在签入时，CVS 倾向于认为你已经接触了很多你没有接触过的文件

I can't say I've ever seen this with Subversion. Perhaps CVS is picking up the changes because the last modified time has been changed, but the file contents haven't? Subversion uses the file's mtime to determine if a change *may* have happened, then performs an MD5 comparison between the current copy & a pristine copy of what last came from the repository. If the mtimes don't match, but the MD5s do, it's not flagged as a change.

# c++ - C ++中的mongoDB游标超时

> ID：12692863
> 
> 赞同：1
> 
> 时间：2012-10-02T14:59:50.573
> 
> 标签：c++, mongodb

我在 64 位安装上通过其 C++ API 使用 mongoDB 得到以下错误：

> getMore：服务器上不存在游标，可能重新启动或超时？

错误所在的代码片段如下：

```
std::auto_ptr<mongo::DBClientCursor> cursor =
    connection.query("database.collection", mongo::BSONObj());

while (cursor->more()) {
     // Do stuff
     // Update contents of fields
     connection.update(...);
} 
```

代码所做的只是根据特定的数据结构更新每个文档字段的内容。

该代码已经用一个小数据集进行了测试，它工作得非常好，所以我认为这不是编码错误，而是与最终数据集大小相关的数据库端错误。

我的错误看起来类似于[这个错误报告](https://jira.mongodb.org/browse/SERVER-4680)。那里提出的解决方案是将光标设置为没有超时，但是[C++ API](http://api.mongodb.org/cplusplus/current/classmongo_1_1_d_b_client_cursor.html)没有这样的功能，尽管它似乎存在于其他语言中。

任何建议将不胜感激。

# android - Motodev 核心插件

> ID：12692865
> 
> 赞同：5
> 
> 时间：2012-10-02T14:59:55.163
> 
> 标签：android, eclipse, motodev-studio

随着 AOSP 工具 ( [http://developer.motorola.com/tools/motodevcoreplugins/](http://developer.motorola.com/tools/motodevcoreplugins/) ) 中包含 Motodev 核心插件的公告，我一直试图让它们在 Eclipse 中正常工作，但没有成功。

我已按照说明下载和安装所有内容。但是，一旦插件项目完全导入我的新工作区，其中一些会显示构建错误。我已经尝试清理项目等，但它们仍然显示构建错误。

我决定继续尝试按照说明安装插件。安装插件并完成说明后，我会在菜单栏中看到 MOTODEV 选项。但是，一旦我点击任何选项（即 MOTODEV > New > New Android Project），什么也没有发生。这对于 MOTODEV 菜单中的每个选项都是相同的。

有没有人在他们现有的 Eclipse 设置中正确构建和安装插件？如果是这样，我错过了什么吗？

谢谢。

更新：我还发现按照说明安装这些插件会破坏 Eclipse 工具栏中的“运行”按钮。它现在对我没有任何作用。我必须右键单击该项目并从上下文菜单中执行运行方式。显然不是一个大问题......但仍然是一个烦恼。另外，我在我的 OSX 设置中注意到了这一点：

如果我单击“新建 -> 新建 Android 项目”，我会注意到错误日志中出现此错误：

错误 Tue Oct 02 11:50:32 CDT 2012 Unhandled event loop exception org.eclipse.e4.core.di.InjectionException: org.eclipse.core.commands.NotHandledException: There is no handler to execute for command com.motorola.studio .android.new.project 在 org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:63) 在 org.eclipse.e4.core.internal.di.InjectorImpl.invokeUsingClass(InjectorImpl.java: 229) 在 org.eclipse.e4.core.contexts.ContextInjectionFactory.invoke(ContextInjectionFactory.java:131) 在 org.eclipse.e4.core.contexts.InjectorImpl.invoke(InjectorImpl.java:210) 在 org.eclipse .e4.core.commands.internal.HandlerServiceImpl.executeHandler(HandlerServiceImpl.java:171) 在 org.eclipse.e4.ui.workbench.renderers.swt.HandledContributionItem.executeItem(HandledContributionItem.java:814) 在 org.eclipse.e4 .ui.workbench.renderers.swt。HandledContributionItem.handleWidgetSelection(HandledContributionItem.java:707) at org.eclipse.e4.ui.workbench.renderers.swt.HandledContributionItem.access$7(HandledContributionItem.java:691) at org.eclipse.e4.ui.workbench.renderers.swt .HandledContributionItem$4.handleEvent(HandledContributionItem.java:630) at org.eclipse.swt.widgets.EventTable.sendEvent(EventTable.java:84) at org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor. java:56) ... 37 更多84) 在 org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56) ... 37 更多84) 在 org.eclipse.e4.core.internal.di.MethodRequestor.execute(MethodRequestor.java:56) ... 37 更多

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T19:42:48.050

两天后，我得到了 MOTODEV Core Plugin 以在 Eclipse 中工作。一般遵循这些方向[http://developer.motorola.com/tools/motodevcoreplugins/](http://developer.motorola.com/tools/motodevcoreplugins/)

1.  您需要 100% 全新安装 Java EE。如果您在 Windows 上坚持使用 32 位版本。我安装了 Juno Java EE。此安装包括 MOTODEV 工作所需的软件包。

我在这里得到它：http: [//download.eclipse.org/eclipse/downloads/eclipse3x.html](http://download.eclipse.org/eclipse/downloads/eclipse3x.html)

2.  接下来安装ADT

ADT [https://dl-ssl.google.com/android/eclipse/](https://dl-ssl.google.com/android/eclipse/)

3.  从 Eclipse 下载页面安装 Sequoyah，（不是 MOTODEV 网站上的内容）

[http://download.eclipse.org/sequoyah/updates/2.0/](http://download.eclipse.org/sequoyah/updates/2.0/)

4.安装MOTODEV时，删除不需要的MOTODEV包，如linus、macos和com.motorola.studio.android.wind32.x86_64

5.  再次安装 Sequoyah，这次来自 MOTODEV 的规范 Sequoyah [http://download.eclipse.org/sequoyah/updates/2.1/2.1.1.N20120718-0509](http://download.eclipse.org/sequoyah/updates/2.1/2.1.1.N20120718-0509)

此时，您的项目中应该没有错误。

现在运行 MOTODEV，选择包 com.motorola.studio.android 并作为“Eclipse 应用程序”运行

接下来将打开一个窗口，主窗口中有 MOTODEV 菜单。

![在此处输入图像描述](../Images/b1a1639d398abf21c3b10c2bd71bc8bd.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-11T09:20:42.490

查看错误，它们提供有关您缺少的工具的信息。完成 motodev 教程后，我必须安装 Web 服务工具、数据库工具 (DTP) 和内存分析器工具 (MAT)。另外，Leoa 是对的，对于使用 windows 的人来说，坚持使用 win32，即使你的 windows 是 x64。

# android - apk的不同签名

> ID：12692868
> 
> 赞同：5
> 
> 时间：2012-10-02T15:00:04.050
> 
> 标签：android, google-play, apk

我在android上做了一个应用程序并在play store上发布了它。我用新的私钥签署了我的 apk。

上周，我想用我的新功能更新我的应用程序。所以我用之前创建的相同私钥导出了我的新 apk。然后我发布并Playstore接受了它。

但是在我手机的play store上，应用程序无法更新。我必须先卸载它，如果我这样做，我会丢失我的数据。

所以我的问题是，如何在 google play store 上制作可更新的 apk

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-02T15:07:54.670

您无法更改上传到 Play 商店的 apk 的签名，您需要使用与以前相同的签名。如果您确实更改了应用程序的签名并尝试上传它，您将收到一条错误消息，提示您找到了相同的应用程序但签名不同。

如果您手动向用户发送具有更改签名的应用程序（例如邮件），他们必须先卸载当前应用程序，然后才能安装具有新签名的相同应用程序。用户这样做会丢失那里的应用程序数据！这是一种安全机制，因此黑客/坏人无法更改您的 apk 并以这种方式获取用户数据。

Android 系统使用签名来检查应用程序是否真的是手机上现有应用程序的更新。因为现在只有你自己的签名密码和其他东西，所以黑客无法在虚假应用更新中使用它。

摘要：**始终使用相同的签名！**

检查：http: [//developer.android.com/tools/publishing/app-signing.html](http://developer.android.com/tools/publishing/app-signing.html)

编辑：正如@HandlerExploit 所说，您的手机上可能仍然安装了应用程序的“非市场版本/调试版本”，应用程序的调试版本始终使用默认调试签名进行签名。此签名与市场上的签名不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T15:12:43.820

您很可能在开发过程中使用计算机默认调试签名安装了应用程序，您需要在安装新的市场版本之前将其卸载。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-12T23:08:36.507

不增加清单中的版本号也会产生这种效果。确保 android:versionCode="1" 在每个版本中都不同。还包括确切的错误消息（如果存在）可能会有所帮助。

# android - 获取所有已安装的应用程序时过滤掉不可启动的应用程序

> ID：12692870
> 
> 赞同：10
> 
> 时间：2012-10-02T15:00:07.610
> 
> 标签：android, get, launch

我正在开发一个应用程序，我想向用户展示所有已安装的应用程序，让他/她选择一个然后用它做一些事情。尽管我遇到了一些问题，但我遵循了一个教程（此：http: [//impressive-artworx.de/2011/list-all-installed-apps-in-style/ ）。](http://impressive-artworx.de/2011/list-all-installed-apps-in-style/)遵循教程后，我只获得了未预装的应用程序（如所有无法启动的后台应用程序），如果您想要用户从 Play 商店下载的应用程序，这非常有用。问题是在我的应用程序中，我想显示可启动的系统应用程序，如 Youtube 和浏览器，而不是不可启动的系统应用程序，如 Search Application Provider。

这是我在获取应用程序时使用的代码：

```
private List<App> loadInstalledApps(boolean includeSysApps) {
  List<App> apps = new ArrayList<App>();

  // the package manager contains the information about all installed apps
  PackageManager packageManager = getPackageManager();

  List<PackageInfo> packs = packageManager.getInstalledPackages(0); //PackageManager.GET_META_DATA 

  for(int i=0; i < packs.size(); i++) {
     PackageInfo p = packs.get(i);
     ApplicationInfo a = p.applicationInfo;

     App app = new App();
     app.setTitle(p.applicationInfo.loadLabel(packageManager).toString());
     app.setPackageName(p.packageName);
     app.setVersionName(p.versionName);
     app.setVersionCode(p.versionCode);
     CharSequence description = p.applicationInfo.loadDescription(packageManager);
     app.setDescription(description != null ? description.toString() : "");
     apps.add(app);
  }
  return apps;
  } 
```

现在我的问题是；过滤掉不可启动的应用程序的最佳方法是什么？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-01T14:02:37.620

最好的方法是：

```
public static List<ApplicationInfo> getAllInstalledApplications(Context context) {
    List<ApplicationInfo> installedApps = context.getPackageManager().getInstalledApplications(PackageManager.PERMISSION_GRANTED);
    List<ApplicationInfo> launchableInstalledApps = new ArrayList<ApplicationInfo>();
    for(int i =0; i<installedApps.size(); i++){
        if(context.getPackageManager().getLaunchIntentForPackage(installedApps.get(i).packageName) != null){
            //If you're here, then this is a launch-able app
            launchableInstalledApps.add(installedApps.get(i));
        }
    }
    return launchableInstalledApps;
} 
```

# android - 无法在 Android 2.2 中使 ListView 背景透明

> ID：12692871
> 
> 赞同：1
> 
> 时间：2012-10-02T15:00:11.790
> 
> 标签：android, listview, transparency

我在 Android 2.2 (HTC Desire) 上将背景设置为透明时遇到了麻烦，即使它在 4.0 (Samsung Galaxy SII) 中运行良好。我已经尝试了
**android:background="#00000000"** 以及**android:background="@android:color/transparent"**并尝试将其设置为我为列表中的每个项目所拥有的 LinearLayout、ListView 和 RelativeLayout .

是否有一些额外的参数需要设置来获得 2.2 的背景透明度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:24:47.773

尝试这个：

> android:background="@android:color/transparent" android:cacheColorHint="@android:color/transparent"

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-19T19:01:36.113

问题死灵（我有同样的问题和谷歌搜索）：
答案可能在[这个问题](https://stackoverflow.com/questions/10198950/why-does-my-android-listview-turn-from-transparent-to-opaque-when-i-click-it)中，即还设置 listSelector 以使焦点颜色透明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:32:07.787

也许您填写列表的单个项目视图不是透明的。我的意思是，如果您有一个白色 textView 列表，那么您的列表是否透明并不重要。

* * *

创建一个透明的样式主题：

在您的 res/values 文件夹中创建一个 styles.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

  <style name="Theme.Transparent" parent="android:Theme">
    <item name="android:windowIsTranslucent">true</item>
    <item name="android:windowBackground">@color/transparent</item>
    <item name="android:windowContentOverlay">@null</item>
    <item name="android:windowNoTitle">true</item>
    <item name="android:windowIsFloating">true</item>
    <item name="android:backgroundDimEnabled">false</item>
  </style>

</resources> 
```

然后在你的清单中添加

```
android:theme="@style/Theme.Transparent" 
```

在您列表的活动属性中

# gcc - 如何构建需要clock_gettime函数的Linux/OSX makefile

> ID：12692876
> 
> 赞同：5
> 
> 时间：2012-10-02T15:00:31.560
> 
> 标签：gcc, makefile

当我尝试在 Linux 中构建一个项目时，我得到了`Error: undefined symbol clock_gettime`. 所以我发现我需要添加`-lrt`到构建命令（gcc）。但是，现在它不会在 OS X 中编译：`ld: library not found for -lrt`. 我不确切知道这个函数在哪里被调用，因为它是在静态链接代码中，但它似乎在没有 librt 的 OS X 中工作得很好。链接的代码可能使用了后面的替代方法`#if __APPLE__`或其他东西。

有什么方法可以指示仅在需要或存在`gcc`时才链接？`librt`如果没有，如何使用特定于操作系统的命令创建 Makefile？我没有使用 autoconf 或类似的东西。

Makefile 相当复杂，但这里是操作部分：

```
CC := g++
# In this line, remove -lrt to compile on OS X
LFLAGS := -lpthread -lrt
CFLAGS := -c -Wall -Iboost_build -Ilibtorrent_build/include -Iinc
OBJDIR := obj
SRCDIR := src
SRC := $(wildcard $(SRCDIR)/*.cpp)
OBJS := $(patsubst $(SRCDIR)/%.cpp,$(OBJDIR)/%.o,$(SRC))

# Note that libtorrent is built with a modified jamfile to place the
# libtorrent.a file in a consistent location; otherwise it ends up somewhere
# dependent on build environment.
all : $(OBJS) libtorrent_build boost_build
    $(CC) -o exec $(LFLAGS) \
    $(OBJS) \
    libtorrent_build/bin/libtorrent.a \
    boost_build/stage/lib/libboost_system.a 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-02T15:24:09.397

你可以试试这个：

```
LFLAGS := -lpthread

OS := $(shell uname -s)
ifeq ($(OS),Linux)
LFLAGS += -lrt
endif 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-02T15:25:46.040

如果你用谷歌搜索这个问题，你会找到一套很好的解决方案，一个作为问题的评论发布，另一个在这里：

[这里](http://tnt64.blogspot.it/2012/07/getting-monotonic-time-on-os-x-since.html)

`gettimeofday()`可能是一个更好的解决方案，如果您正在编译不是您编写的代码，请记住 `clock_gettime`OS X 下不提供该功能，您需要修改代码。

希望能帮到你，pedr0

# android - 使用 Maven 最快的方式运行和调试

> ID：12692883
> 
> 赞同：1
> 
> 时间：2012-10-02T15:00:49.107
> 
> 标签：android, debugging, maven, adt

我对Maven很陌生。

在使用 Maven 之前，我只有两个主要的单击按钮（和键）：运行和调试。当然我还有其他的，但这些都是我经常使用的东西。

现在我需要使用 Maven，我使用了一些特殊的命令。为了更新依赖项，在设备/模拟器上编译和运行，我使用：

```
clean install android:deploy android:run 
```

但是，这也会卸载以前的应用程序。

对于调试，遗憾的是我做了[这里](http://code.google.com/p/maven-android-plugin/wiki/Debug)写的（它不允许从一开始就进行调试，加上它有更多的步骤），或者使用[Debug.waitForDebugger()](http://developer.android.com/reference/android/os/Debug.html#waitForDebugger%28%29)（这需要我每次更改代码以切换运行和调试模式）。

我怎样才能拥有与普通 ADT 插件相同的运行和调试功能？

编辑：关于卸载问题，答案是将 undeployBeforeDeploy 设置为 false 而不是 true。

# data-binding - WinRT-XAML 中文本框的“UpdateSourceTrigger=PropertyChanged”等效项

> ID：12692885
> 
> 赞同：11
> 
> 时间：2012-10-02T15:00:55.860
> 
> 标签：data-binding, windows-8, winrt-xaml

在 WPF 中，只要用户通过像这样利用 UpdateSourceTrigger 对数据进行任何更改，我们就可以更新底层数据模型：

```
<TextBox Text="{Binding Path=TextProperty, UpdateSourceTrigger=PropertyChanged}"/> 
```

在 Window Phone 中，UpdateSourceTrigger 未包含在 XAML 规范中，为了实现同样的目的，TextChanged 处理程序是必需的，如下所示：

```
(sender as TextBox).GetBindingExpression(TextBox.TextProperty).UpdateSource(); 
```

在 Windows 8 中，我假设 UpdateSourceTrigger 也会被省略——我是对的。然而，我很惊讶地发现 GetBindingExpression() 也不见了。

在 Windows 8 中，我们在 WPF 中使用 UpdateSourceTrigger 和在 Windows Phone 中使用 GetBindingExpression().UpdateSource() 完成的最佳技术是什么？

> 请注意：此问题适用于 Windows 8 (Metro) 开发；这另一个问题（[“UpdateSourceTrigger=PropertyChanged”等效于 Windows Phone 7 TextBox](https://stackoverflow.com/questions/4833100/updatesourcetrigger-propertychanged-equivalent-for-a-windows-phone-7-textbox)）适用于 Windows Phone 开发 - 不要混淆。

作为一项研究，[这个示例](http://xaml.codeplex.com/SourceControl/changeset/view/99885#1997429)（我创建的）使用 TextBox 覆盖来交换导致更新的两个属性之间的文本值。正是基于[此](http://www.familie-smits.com/post/2012/07/29/UpdateSourceTrigger-in-WinRT.aspx)。但是，有没有更好的方法？优雅的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-05T16:22:20.477

似乎没有`GetBindingExpression`或等效的解决方法。但是，您可以像这样扩展文本框：[https ://mytoolkit.svn.codeplex.com/svn/WinRT/Controls/ExtendedTextBox.cs](https://mytoolkit.svn.codeplex.com/svn/WinRT/Controls/ExtendedTextBox.cs)

仍然这并不能解决问题本身......（真的很伤心）

也可以看看：

*   [http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/a04dc907-9ca8-4302-bbad-c00b01b8193f/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/a04dc907-9ca8-4302-bbad-c00b01b8193f/)
*   [http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/69214cce-787b-40c6-9d40-a556c5636119/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/69214cce-787b-40c6-9d40-a556c5636119/)
*   [http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/775f1692-2837-471c-95fc-710bf0e9cc53](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/775f1692-2837-471c-95fc-710bf0e9cc53)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-29T14:16:51.880

它似乎`UpdateSourceTrigger`并且`GetBindingExpression`在 Windows 8.1 中可用。感谢上面的 Rico Suter 和来自这个问题的 HDW Production：

[Windows Store TextBox - 如何更新 Enter 键上的绑定？](https://stackoverflow.com/questions/23364138/windows-store-textbox-how-to-update-binding-on-enter-key-up)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-10-04T18:11:45.433

杰瑞，

您应该使用的模式是实现 INotifyPropertyChanged。继承人和来自 MSDN 的示例：http: [//msdn.microsoft.com/en-us/library/ms229614.aspx](http://msdn.microsoft.com/en-us/library/ms229614.aspx)

这样，由于调用了 NotifyPropertyChanged() 方法，任何绑定到支持属性或字段的 XAML 对象都会在支持字段的值发生更改时收到通知。

如果您要实现此模式，则不需要显式定义何时更新 UI，所有绑定到 Notifyable 属性的 UI 元素都会像您期望的那样在源更改时更新。

对于实现 INotifyPropertyChanged 的​​类

我使用一个片段来创建我的大部分属性（如果有可能它们将被绑定或需要通知另一个对象）：

```
private PropertyChangedEventArgs myVarChangedEventArgs = new PropertyChangedEventArgs("MyProperty");
private int myVar;
public int MyProperty
{
get { return myVar; }
set
  {
     if (myVar != value)
     {
        myVar = value;
        NotifyPropertyChanged(myVarChangedEventArgs);
      }
   }
} 
```

# javascript - 术语“全局属性”和“全局变量”是同义词吗？

> ID：12692887
> 
> 赞同：10
> 
> 时间：2012-10-02T15:00:57.963
> 
> 标签：javascript, variables, properties, scope, global-variables

全局对象充当顶级词法环境（范围链的顶部，如果您愿意的话）。这意味着可以通过直接引用（如变量）访问全局属性：

```
// global code
this.foo = 1;        // creating a global property
foo                  // accessing the global property via a direct reference 
```

这也意味着可以通过属性引用访问全局变量：

```
// global code
var foo = 1;         // creating a global variable
this.foo             // accessing the global variable via a property reference 
```

* * *

## 解释 1

现在，基于上述信息，似乎可以互换使用术语“全局变量”和“全局属性”，这意味着这两个术语**代表完全相同的一组全局绑定**。

* * *

`var`但是，使用,eg创建的全局变量`var foo = 1;`和通过赋值创建的全局属性之间有两个区别，例如`this.foo = 1;`：

1.  全局变量是**静态作用域**的，而全局属性是**动态添加**到全局环境中的：

    ```
    foo // => undefined
    bar // throws ReferenceError

    var foo = 1;
    this.bar = 1; 
    ```

    因此，全局变量在程序评估*之前*绑定，而全局属性*在程序评估期间*绑定，当赋值被评估时。

2.  全局变量是不可配置的，即它们不能被删除（更具体地说，它们对应的绑定随后不能从环境中删除），而通过赋值创建的全局属性*是可*配置的。

    ```
    // the names "foo" and "bar" are bound to the global environment
    var foo = 1;
    this.bar = 1;

    // the binding "bar" can be removed from the global environment subsequently 
    delete this.bar; 

    // the binding "foo" cannot be removed subsequently 
    ```

话虽如此，应该注意的是可以创建不可配置的全局属性：

```
Object.defineProperty( this, 'bar', { value: 1 }); // non-configurable by default 
```

* * *

## 解释 2

现在，基于这一新信息，可以说只有静态作用域的全局绑定可以称为全局属性和全局变量，而动态添加的全局绑定仅仅是全局属性，而不是全局变量，这意味着术语“全局变量”表示由术语“全局属性”表示的集合的**一个子集，如：**

> 所有全局变量都是全局属性
> 只有静态作用域的全局属性是全局变量

* * *

那么，哪种解释是正确的呢？这两个术语是否代表同一组绑定，还是其中一个是另一个的子集？

* * *

## 问题

我确实理解术语“全局属性” - 全局属性是全局对象的属性。然而，术语“全局变量”似乎是**模棱两可**的。有些人将其用作“全局属性”的同义词，而其他人将其定义为表示已通过`var`语句定义的全局属性。我的问题的目的是确定这两种含义中的哪一种是正确的

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T15:30:02.803

好吧，你已经知道我会说的所有东西来区分变量的边缘情况和附加到`window`.

如果您想变得非常非常迂腐，我想您可以将全局范围视为功能范围*和*`window`使用与程序中提供的相同隐藏配置设置的属性扩展对象的范围（例如： vars 可以重新分配但不能删除）。所以从这个意义上说，就功能而言，它们是不同的，并且反映了全局范围内的属性和变量的属性。

并且这样称呼它们是完全可以的。
但是那里的大多数人甚至没有认识到差异，更不用说区分这两个术语了。
即使是重要的 JS 作者也提到了`global variable`通过省略 来意外设置 a ，`var`实际上，JS 会缩放函数范围，如果它在没有达到该名称的情况下进入全局范围，它会将 a 附加到`global property`该数据，而不是 a `global variable`.

但这确实给我们带来了关键——一个强大、稳定和可靠的 JS 应用程序，与其他应用程序一起生活在现代网页上，真的不应该太在意这些差异。
在这种情况下，目标是尽可能少地使用全局属性和变量。

此外，变量/财产碰撞的危险是相同的，无论它是什么。
变量对 是免疫的`delete`，但是任何有用的程序都将访问`delete`它从未设置过的属性的可能性有多大？

所以就个人而言，我认为理解边缘情况很好，但我也认为，虽然我内心的书呆子想同意存在差异，而且它们并不相连，但我内心的实用主义者会不寒而栗地想到一个人们正在积极使用全局范围，以至于这对他们产生了很大的影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T15:40:07.357

一个很好的解释可以在[这里](http://perfectionkills.com/understanding-delete/)找到，但我会缩短它来回答你的问题。当你说：

> 这两个术语代表完全相同的一组全局绑定。

...您几乎是正确的，但并不完全正确。像这样的属性分配`this.foo = 1`被保存到**全局**对象中。然而，变量声明`var bar = 2`被保存到**变量**对象中。

在全局范围内执行时，*全局对象和变量对象都由同一个对象表示——全局对象*（当您在浏览器中执行时，这就是`window`对象）。

我提到这一点是因为您的解释不足以解释该程序的行为：

```
// "this" refers to the global object. But global object is also acting as the
// variable object! Because of that, the following code works:

var foo = 1;
alert(this.foo);   // 1

(function() {

    // "this" still refers to the global object! But the *variable* object has
    // changed because we're now in the execution context of a function, thus
    // the behavior changes:

    var bar = 2;
    alert(this.foo);  // 1
    alert(this.bar);  // undefined

})(); 
```

然而，这并不意味着全局属性和全局变量是相同的。所有属性都有三个隐藏标志：`ReadOnly`、`DontEnum`和`DontDelete`。

当使用隐式属性声明`this.foo = 1`时，`DontDelete`属性设置为`false`. 当您使用变量声明时`var bar = 2`，该`DontDelete`属性设置为`true`，因此在您使用运算符时表示它们之间的差异`delete`。

* * *

针对您改写的问题：

> [T]他的术语“全局变量”似乎是模棱两可的。有些人将其用作“全局属性”的同义词，而其他人将其定义为表示已通过 var 语句定义的全局属性。我的问题的目的是确定这两种含义中的哪一种是正确的。

该术语没有明确定义，因此您只是在征求意见。

通常，使用语法创建变量时使用术语“全局属性”，使用语法创建变量时使用`this.foo = 1`术语“全局变量” `var bar = 2`。没有什么可讨论的了。

这两个术语都与幕后发生的事情没有真正的关系，因此您能做的最好的事情就是了解幕后实际发生的事情，您已经完成了。

进一步要求两个任意术语的绝对定义只会使您成为一个不受欢迎的人。

# c++ - 强制分配返回的对象

> ID：12692892
> 
> 赞同：10
> 
> 时间：2012-10-02T15:01:09.590
> 
> 标签：c++

有没有办法在 C++ 中强制分配函数的返回值？即如果我有一个成员函数 foo

```
class myClass{
    ...
    public:
    T1 foo(T2 x){T1 y; /*something*/ return y;};
} 
```

我可以在 main() 中调用

```
myClass obj;
T1 a = obj.foo(x);  //<-- 
```

我可以打个更简单的电话吗

```
myClass obj;
obj.foo(x);   //<-- 
```

（不存储返回值）以某种方式“非法”？

或者，我可以区分

```
T1 a = obj.foo(x);
obj.foo(x); 
```

谢谢你的时间，对不起我的无知

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-02T15:17:31.827

如果你使用 g++，你可以使用

```
T1 foo(T2 x) __attribute__ ((warn_unused_result)); 
```

但是，这将导致警告，而不是错误。但是您可能会使用一些 -Werror=* 标志将其变成错误。有关所有受支持的功能属性，请参见[此处。](http://gcc.gnu.org/onlinedocs/gcc/Function-Attributes.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T15:02:28.723

不，没有办法强制对返回的对象进行操作。

不，你无法区分

```
T1 a = obj.foo(x);
obj.foo(x); 
```

在调用内部（至少不是以可移植的标准方式。您可以使用调用堆栈等来破解，但为什么要这样做）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-02T15:08:09.913

简单的答案是否定的；但是你可以“强迫它”：

返回没有任何引用时自动销毁的智能指针。在析构函数中抛出一些异常或进行 assert() 调用。为了在正确使用时防止崩溃，您可以在该类中使用一些变量，并在您确定不再需要对象时将其设置为 false，这将告诉析构函数不要抛出任何东西。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-02T15:03:13.263

没有办法说，但是如果返回值被忽略，好的静态分析工具通常会显示警告。我使用的 MSVC2010 自带的当然可以。

# c# - 如何过滤 linq 表达式以用于 CodeSmith 批量更新

> ID：12692897
> 
> 赞同：1
> 
> 时间：2012-10-02T15:01:21.023
> 
> 标签：c#, linq, codesmith, plinqo

我将 CodeSmith Plinqo 的批量更新功能与以下包装代码一起使用：

```
public int Update<TEntity>(Expression<Func<TEntity, bool>> filter, 
    Expression<Func<TEntity, TEntity>> evaluator) where TEntity : class
{
    var tbl = _dataContext.GetTable<TEntity>();
    return tbl.Update(filter, evaluator);
} 
```

示例用法：

```
DCCore.Update<Code>(filter => _results.UpdatedCodes.Select(
    x => x.CodeID).Contains(filter.CodeID),
    u => new Code {
        CodeStatusID = EpcEvent.CodeStatusID.Value
    }); 
```

这很好用，除非“过滤器”包含超过 2100 个元素，然后我们得到 sql server 错误：“传入的表格数据流 (TDS) 远程过程调用 (RPC) 协议流不正确。在此提供了太多参数RPC 请求。最大值为 2100。

我想做的是增强我的更新包装器，以便它将“过滤器”表达式分解为 2000 个项目块。像这样的伪代码：

```
public int Update<TEntity>(Expression<Func<TEntity, bool>> filter, 
    Expression<Func<TEntity, TEntity>> evaluator) where TEntity : class
{
    var tbl = _dataContext.GetTable<TEntity>();
    var index = 0;
    const int chunk = 2000;
    var filterCount = filter.Count();
    while (index * chunk < filterCount)
    {
        var smallFilter = filter.Skip(index*chunk).Take(chunk);
        tbl.Update(smallFilter, evaluator);
        index++;
    }
    return filterCount;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T19:23:49.230

我为 CodeSmith 工具工作。今年早些时候在我们的论坛上有一位用户发布了这个问题： http: [//community.codesmithtools.com/Template_Frameworks/f/66/t/12717.aspx](http://community.codesmithtools.com/Template_Frameworks/f/66/t/12717.aspx)我仍然认为最好的方法是使用存储过程。但是，他的解决方法与您的相似。

# syntax-highlighting - 纯文本的语法高亮（Sublime Text）

> ID：12692898
> 
> 赞同：9
> 
> 时间：2012-10-02T15:01:22.053
> 
> 标签：syntax-highlighting, sublimetext2, plaintext

我非常喜欢以任何形式突出显示语法。但是对于纯文本文件，我缺少类似的东西。想象一下缩进线或带有特殊字符的线的不同颜色。类似的东西已经存在了吗？我特别感谢 Sublime Text 的插件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-04T12:36:17.843

我所知道的最接近的是 PlainTasks 插件：

![PlainTasks 截图](../Images/547f8242661f40ec1ed08a33080746a3.png)

这是一个制作样式化 TODO 列表的插件，但你在屏幕截图中看到的基本上就是它。

您可以修改 Markdown 或 reStructuredText 文件以实际为文本着色。

# javascript - wordpress 插件适用于本地主机，但不适用于远程服务器

> ID：12692900
> 
> 赞同：2
> 
> 时间：2012-10-02T15:01:23.460
> 
> 标签：javascript, wordpress, localhost, remote-server

我写了一个在本地主机上运行良好的 wp 插件。它创建子主题目录并在那里复制 home.php。但“主页”选项卡显示来自父主题的旧内容。只有当我将 home.php 重命名为 index.php 时它才有效。这是我的家.php

```
<?php
get_header(); ?>

    <div id="container">
        <div id="content" role="main">

        </div><!-- #content -->
    </div><!-- #container --> 
```

另外我在 /js 文件夹中有 script1.js 文件，它应该向块添加一个文本框，但它没有。我像这样嵌入脚本：

```
define('jsdir',plugin_dir_url(__FILE__).'js');
wp_enqueue_script('dk_js_myplugin',jsdir.'/script1.js',array('jquery')); 
```

但萤火虫没有在页面上显示它。使用 xampp 在本地安装 wordpress 时不存在这两个问题 感谢您的宝贵时间，非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:14:34.293

```
define( 'jsdir', WP_PLUGIN_URL . '/' . dirname( plugin_basename( __FILE__ )) . '/js' ); 
```

表达式`dirname( plugin_basename( __FILE__ ))`返回目录中的插件位置`wp-content/plugins`。阅读[plugin_basename()](http://codex.wordpress.org/Function_Reference/plugin_basename)。常量`WP_PLUGIN_URL`返回插件目录的绝对路径。

在您的插件代码中尝试：

```
<?php

var_dump( WP_PLUGIN_URL );
var_dump( dirname( plugin_basename( __FILE__ )));

// output should be like this:
string(36) "http://domain.tld/wp-content/plugins" 
string(9) "my-plugin" 
```

用于添加脚本的初始化函数：

```
add_action( 'init', 'plugin_register_css_js' );
function plugin_register_css_js()
{
    global $wp;
    $current_url = add_query_arg( $wp->query_string, '', home_url( $wp->request ) );

    if( $current_url == 'mypage' )
    {
        wp_enqueue_script( 'js', $jsdir . '/script1.js', array( 'jquery' ));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T07:29:19.370

您的浏览器不会“调用”script1.js 文件（见附图）![在此处输入图像描述](../Images/772434d169f2a39a2df4b875c6bfe431.png)

我建议您重新检查您的模块，以便确保脚本已加载到标签中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:16:27.710

有时，如果您可以通过 FTP 访问（我假设您这样做），那么它是权限问题，然后尝试使用权限。它也可能有助于打开 php 错误。

```
ini_set('error_reporting', E_ALL );
ini_set('display_errors', 1 ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:16:29.210

您能否通过 Firebug 检查它是否在您的远程服务器上加载了 script1.js 文件（不会产生 404 错误）？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-04T05:50:27.913

您是否进行了以下操作：

```
function load_dk_scripts() {
    wp_enqueue_script(
        'dk_js_myplugin',
        'http://david.onenonly.info/wp-content/plugi‌​ns/childtheme/js/script1.js',
        array('jquery')
    );
}
add_action('wp_enqueue_scripts', 'load_dk_scripts'); 
```

# domain-driven-design - 夏普架构价值对象

> ID：12692909
> 
> 赞同：0
> 
> 时间：2012-10-02T15:01:45.433
> 
> 标签：domain-driven-design, sharp-architecture

我正在查看 Sharp Architecture 的代码。到目前为止它很酷，但我在如何在框架中实现 DDD 值对象时遇到问题（代码中似乎没有提到这一点）。我假设基础实体类和存储库基础仅用于实体。关于如何在框架中实现值对象的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T18:09:25.980

值对象是不需要基类的简单对象。（实体具有基类的唯一原因是提供基于身份的相等性）。实现一个值对象仅仅意味着创建一个类来代表你的域中的一个值。很多时候值对象应该是不可变的，并提供相等比较方法来确定与相同类型的其他值对象的相等性。看看[这里](http://lostechies.com/joeocampo/2007/04/23/a-discussion-on-domain-driven-design-value-objects/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-18T07:30:34.177

在 Sharp Arch 中，命名空间 SharpArch.Domain.DomainModel 中有一个 ValueObject 类。此对象继承自 BaseObject 并覆盖 == 和 != 运算符以及 Equals() 和 GetHashCode() 方法。该方法覆盖只是调用这两个方法的 BaseObject 版本，而后者又使用 GetTypeSpecificSignatureProperties() 方法来获取要在相等比较中使用的属性。

底线是实体的平等由

1.  引用相等
2.  同类型？
3.  id是一样的
4.  用 [DomainSignature] 属性修饰的所有属性的比较

对于 ValueObjects，使用 BaseObject 的 Equals 方法

1.  引用相等
2.  同类型？
3.  比较所有公共属性

这有点简化，我建议你从 github 获取最新的代码，并自己阅读提到的 3 个类中的代码。

编辑：关于持久性，[这个 SO question](https://stackoverflow.com/questions/5254464/ddd-mapping-value-objects-with-fluent-nhibernate-in-separate-tables)可能会有所帮助。除此之外，请参阅官方 NH 和 Fluent NH 文档

# magento - 在模板文件中显示 cms 页面

> ID：12692920
> 
> 赞同：2
> 
> 时间：2012-10-02T15:02:12.583
> 
> 标签：magento, magento-1.7

我正在尝试为登录用户显示主页，为未登录用户显示不同的主页。到目前为止，我一直在使用带有 url 键“home”的标准主页作为我的主页。我创建了一个带有 url 键“home1”的新 cms 页面，该页面将用于未登录的用户。

我可以从未登录的用户页面输出一些内容，但是如果我添加一个表格并使用 wysisyg 插入图像，那么当我去查看页面时，图像 src 会被剥离。它目前只显示文本，如果我对图像进行硬编码，它很好，但我需要能够使用所见即所得。

两个页面都使用 empty.phtml 模板文件。

在这个模板文件中，我有以下代码

```
 # Check if user is logged in and output the standard home page
    if($this->helper('customer')->isLoggedIn()) {
       echo $this->getChildHtml('content');
    }
    else
    {
       # Load cms page for non logged in users then output the content
       $model = Mage::getModel('cms/page')->load('home1','identifier');
        echo $model->getContent();
    } 
```

可能有更好的方法来做到这一点，所以如果有人知道，我会很感激你的意见。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T15:27:12.937

尝试显示 Magento 静态块中的两个内容，而不是使用两个 cms 页面。

```
 if($this->helper('customer')->isLoggedIn()) 
    {
        // Static Block Content for Logged in Customers
        echo $this->getLayout()->createBlock('cms/block')->setBlockId('logged_in_customers')->toHtml(); 
    }
    else
    {
        // Static Block Content for Non-Logged in Customers
        echo $this->getLayout()->createBlock('cms/block')->setBlockId('non_logged_in_customers')->toHtml(); 
    } 
```

# asp.net-mvc - 如何使用 NoSQL 进行数据模型

> ID：12692921
> 
> 赞同：0
> 
> 时间：2012-10-02T15:02:15.190
> 
> 标签：asp.net-mvc, mongodb, database, nosql

我和我的团队都是 NoSQL 的初学者，还在一个项目中使用带有 SQL Server 2008 的实体框架，但随着时间的推移，项目变得更大更复杂，EF 并没有为我们解决更多问题，我们决定采用MongoDB，但是由于范式转换很大，我们仍然有很多疑问，我将它们发布在这里，看看你们的想法和意见。

我有实体“Person Fisica”、“Patient”和“professional”，并且患者和专业人员都是 Person，但在片刻之后，患者和专业人员将是同一个人前（一个专业的卫生单位，也是病人) 在 SQL Server 中，我们有一个病人，他有一个物理人的引用和一个专业的人，他也有一个人的引用当病人和专业人员是同一个人时，这两个人引用了同一个人，现在在 mongo 出现了疑问，一些这里的团队成员几乎都想做同样的事情，病人和专业组织都有这个人的 ID。现在我想让患者和专业人士拥有完整的对象Person，但是哦，这怎么会完整性呢？因为从技术上讲，患者的自然人与专业人员的自然人不同......这个问题和其他问题在这里让我们头疼，在几个共享的实体中，不知道我们是否将实体放在拥有它的对象中或者对象仅采用实体的 ID，与关系数据库中的方式相同。另一个例子：Health Unit 和 UnidadeDeSaude 的类型，一个类型的 Health Unit 有几个 Health Unit，一个 Health Unit 有一个类型，正确的做法是把 Unit Type 对象放在 Health Unit 中或者只是通过 Id 引用它? 在共享的多个实体中，不知道我们是否将实体放在拥有它的对象中，或者对象仅采用实体的 Id，与关系数据库中的方式相同。另一个例子：Health Unit 和 UnidadeDeSaude 的类型，一个类型的 Health Unit 有几个 Health Unit，一个 Health Unit 有一个类型，正确的做法是把 Unit Type 对象放在 Health Unit 中或者只是通过 Id 引用它? 在共享的多个实体中，不知道我们是否将实体放在拥有它的对象中，或者对象仅采用实体的 Id，与关系数据库中的方式相同。另一个例子：Health Unit 和 UnidadeDeSaude 的类型，一个类型的 Health Unit 有几个 Health Unit，一个 Health Unit 有一个类型，正确的做法是把 Unit Type 对象放在 Health Unit 中或者只是通过 Id 引用它?

谷歌搜索了几篇文章，但在这些情况下我们仍然存在疑问 [http://highlyscalable.wordpress.com/2012/03/01/nosql-data-modeling-techniques/](http://highlyscalable.wordpress.com/2012/03/01/nosql-data-modeling-techniques/) [http://blog.fiesta.cc/post /11319522700/演练-mongodb-data-modeling](http://highlyscalable.wordpress.com/2012/03/01/nosql-data-modeling-techniques/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T16:45:51.243

由于无法准确查看您拥有的内容，因此一般而言，在 MongoDB 中，您不会像使用 RDBMS 那样加入表。通常，如果您有一个 Person 实体，您会将整个 Person 存储为一个 Person。这是您的代码类的一个很好的映射。

如果您有对其他实体的引用，例如在 Patient 和 Professional 之间共享单个 Person 的位置，您可以使用 RDBMS 中的外键引用来执行此操作。您可以使用 Mongo 执行此操作，但 Mongo 不会为您执行 JOIN。这将由调用者完成。推荐的方法是将 Person 实体的副本放在 Patient 和 Professional 中。这样做的影响意味着，如果您更新 Person 实体，您现在必须在两个地方更新数据，但这并不一定像听起来那么糟糕。更新通常是“快速”的，并且您可以“原子地”更新两者，因此实际上这与更新单个实体之间几乎没有区别，只是您不必执行 JOIN，因此您的读取更简单且通常更快。

获取数据的最强大工具是文档（实体）上的集合（表）索引，以及您可以利用的任何方式将是返回数据的最快方式。因此，与直觉相反，如果您需要更频繁地过滤和处理文档的部分而不是整个文档，则最好将其分解为共享索引键的实体。这意味着将 Person、Patient 和 Professional 存储在同一个集合中并使用两个键。一个键由 Person 和它的派生类（Patient）共享，另一个是选择一个或另一个部分的类型鉴别器。换句话说，使用索引来查找整个实体或整个实体的集合。

除此之外，如果您使用索引来定位实体、Person、Patient 或 Professional，请阅读整个实体并让它包含您在没有 JOIN 的情况下完成请求所需的所有内容。因此，无论您请求 Patient 还是 Person（均指同一 Person），无论您读取哪个对象，您都会获得相同的 Person 数据。

简而言之，您将在 Mongo 中复制数据，几乎可以在您使用 SQL 中的 Join 的任何地方进行。

你能画出你的类层次结构吗？

# objective-c - 具有特定位置的 MKMapItem

> ID：12692924
> 
> 赞同：10
> 
> 时间：2012-10-02T15:02:27.000
> 
> 标签：objective-c, iphone, xcode, mkmapitem

如何启动 iOS6 的默认地图应用程序并将自定义位置传递给它？

例如：

```
[[MKMapItem setLocation:MyLocation] openInMapsWithLaunchOptions:nil]; 
```

我按照这里的示例进行操作，但无法弄清楚。[如何从我自己的本机应用程序中启动 Google Maps iPhone 应用程序？](https://stackoverflow.com/questions/30058/how-can-i-launch-the-google-maps-iphone-application-from-within-my-own-native-ap/12692609#12692609)

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-10-09T05:40:49.390

以下是使用自定义位置打开地图本机应用程序的代码：

```
double latitude = 35.0;
double longitude = 1.0;
MKPlacemark *placemark = [[[MKPlacemark alloc] initWithCoordinate:CLLocationCoordinate2DMake(latitude, longitude) addressDictionary:nil] autorelease];
MKMapItem *mapItem = [[[MKMapItem alloc] initWithPlacemark:placemark] autorelease];
[mapItem setName:@"Name of your location"];
[mapItem openInMapsWithLaunchOptions:nil]; 
```

# objective-c - 知道为什么 asi-http-request 开始在它曾经使用的代码上失败吗？

> ID：12692925
> 
> 赞同：1
> 
> 时间：2012-10-02T15:02:27.623
> 
> 标签：objective-c, ios, asihttprequest

此处的简短片段（同步仅用于示例，通常我们使用异步并且现在两者都以相同的方式失败......请注意，如果我手动使用 url2 已经设置并且可以在我们的服务器上正常工作。另外，请原谅任何简单的拼写错误因为我的Mac今天很愚蠢并且拒绝复制/粘贴，迫使我重新输入......幸运的是，在这种情况下，我更需要一般的“做事方式”帮助而不是“修复我的语法”，因为它使用可以工作，但是（没有任何更改）在上个月的某个时候失败了（可能是 iOS 6 更新）。:-)

```
ASIHTTPRequest *request2=[ASIHTTPRequest requestWithURL:url2];
request2.requestMethod=@"GET";
[request2 addRequestHeader:@"Content-Type" value:@"application/json"];
[request2 setDelegate:self];
[request2 startSynchronous];
NSError *error=[request2 error]; 
```

返回的错误代码是“1”，但我在 asi-http-request 文档中找不到错误代码列表来了解它的含义。另外，请注意，我已经更新到可用的最新 asi-http-request 版本（虽然仍然很旧）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:07:57.073

该错误代码是`ASIConnectionFailureErrorType`（它是 ASIHTTPrequest.h 顶部的枚举）。

ASIHTTPRequest.h 的第 188 行说

```
// If error code is = ASIConnectionFailureErrorType (1, Connection failure occurred) - inspect [[error userInfo] objectForKey:NSUnderlyingErrorKey] for more information 
```

并且它在代码中引用的唯一位置是在 ASIHTTPRequest.m 的`handleStreamError`方法中（第 3644 行）。

所以这就是我要开始的地方:)

# linq - 如何在 System.Linq.Dynamic 中的 SelectMany 或不同的解决方案之后将对象重新合并在一起？

> ID：12692927
> 
> 赞同：0
> 
> 时间：2012-10-02T15:02:30.900
> 
> 标签：linq, linq-to-entities, dynamic-linq

我正在尝试在集合内的集合中选择几个字段。Roles->Users (name and ID) 我能够使用 select many 获得扁平化数据，但现在我需要将它合并回一个集合对象，以便我的 json 格式正确。如果可能的话，我想在动态 linq 中执行此操作，否则我可能不得不手动将对象重新合并在一起。任何帮助都会很棒。

User->User_Roles->Roles（以User_Role为连接表的多对多关系）

```
q = query.SelectMany("USER_ROLES","new (inner as myUSER,outer as myROLE) ").SelectD("new (myROLE.ID as ROLE_ID, new( myROLE.NAME, myUSER.USER.FIRSTNAME,myUSER.USER.ID)as user)") 
```

结果如下所示：

```
 Role A-> User A
 Role A-> User B    ..notice the repeat of "Role A" 
 Role A-> User C 
```

它应该是

```
 Role A -> User A
             + User B
             + User C 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:24:11.207

我是 JSON 新手，但可以说你已经拥有了这些项目的集合

```
Role A-> User A
Role A-> User B
Role A-> User C
Role B-> User D
Role B-> User E
Role B-> User F
Role C-> User G
Role C-> User H
Role C-> User I 
```

让我们为它命名

```
UserRoleCollection 
```

只需使用

```
var res = UserRoleCollection.GroupBy(item => item.Role); 
```

你会得到一个`IGrouping<TRole, TUser>`像这样的

```
Role A ->     User A
              User B
              User C
Role A ->     User D
              User E
              User F
... and so on 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T18:52:41.927

在 SelectMany 之前使用 GroupBy 以获得您正在寻找的结果。

就像是：

```
User_Roles.GroupBy(r => r.Roles.Role)
            .Select(g => new { Role = g.Key, Users = g.SelectMany(u => u.Users.Name) }); 
```

# android - android中的调度

> ID：12692929
> 
> 赞同：0
> 
> 时间：2012-10-02T15:02:36.470
> 
> 标签：android, android-service, android-alarms

**我只想在上午 8:00 到下午 5:00**之间**在 android**中运行我的服务。在此时间间隔内，我想在***15 分钟***间隔后执行任何任务。（例如上午 8:15，上午 8:30，9：上午 00 点......，下午 4:45，下午 5:00）。那么我怎样才能实现这个功能呢？

 **** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:06:48.247

您需要使用[AlarmManager](http://developer.android.com/reference/android/app/AlarmManager.html)类。你会发现很多关于使用谷歌的教程。***

# python - 如何仅从 Google 协作平台 API 内容提要下载元数据？

> ID：12692930
> 
> 赞同：0
> 
> 时间：2012-10-02T15:02:42.147
> 
> 标签：python, gdata

我想下载我的 Google 协作平台网站中网页的 URL 列表。我正在使用 Python API 来执行此操作。它似乎比我预期的要慢，所以我认为它实际上是下载每个条目的全部内容，而不仅仅是元数据。有没有办法只下载元数据？我的代码如下：

```
import gdata.sites.client

client = gdata.sites.client.SitesClient(site='mysite', domain='mydomain.com')
client.ClientLogin('foo@bar.com', 'password', 'test')
feed = client.GetContentFeed()
for entry in feed.entry:
    print entry.GetAlternateLink().href 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:45:43.457

最接近的近似值是

```
https://sites.google.com/site/(your site name)/system/feeds/sitemap 
```

不幸的是，这个 API 不允许`fields`像一些较新的 Google API 那样使用。

# perl - Perl Bing::搜索模块和APPID

> ID：12692934
> 
> 赞同：1
> 
> 时间：2012-10-02T15:02:49.230
> 
> 标签：perl, search-engine, bing

我想使用我的 Perl 脚本连接到 Bing 搜索引擎并使用关键字来获取搜索结果并在我的脚本中使用它们。

我尝试获取 Bing 开发人员的 APPID，但是所有旧链接都不起作用。

我打算使用 CPAN 中的[Bing::Search](http://search.cpan.org/%7Edhouston/Bing-Search-1.120270/lib/Bing/Search.pm) Perl 模块：

### 问题一：

这个模块仍然可以与 Bing Search API 一起使用吗？

在 CPAN 文档中，它说我们需要从以下位置获取 APPID：

> [http://www.bing.com/developers/createapp.aspx](http://www.bing.com/developers/createapp.aspx)

文档似乎有点过时了。

所以，我看到了[这篇文章](http://www.bing.com/community/site_blogs/b/developer/archive/2012/05/17/bing-developer-update-2.aspx)，最近似乎做了一些改变，现在我们需要在 azure marketplace 注册。

### 问题2：

上面的 Perl 模块对 Bing 搜索引擎仍然有用吗？

**更新：**我刚刚在 Azure 数据市场上注册，现在他们为我提供了一个 AccountKey。我不确定它是否与APPID相同。

另外，我订阅了“Bing Search API – Web Results Only”。

现在，它为我提供了探索数据集的选项。

我不能将它与 Perl 脚本一起使用？

谢谢。

# api - Desire2Learn API 不返回数据

> ID：12692938
> 
> 赞同：1
> 
> 时间：2012-10-02T15:02:56.463
> 
> 标签：api, desire2learn

在开始任何开发之前，我正在使用 D2L 的 API 示例站点来测试他们的 API，并且我注意到了一些问题。当我请求进行身份验证时，我被重定向到我们的 D2L 实例进行登录。但是，在进行身份验证后，我没有被重定向回示例站点。如果我返回示例站点并再次进行身份验证，则由于我的 D2L 会话而填充了用户 ID 和密钥。但是当我请求“获取版本”时，没有数据返回，或者如果我请求“我是谁”，我得到一个“无效的 JSON 原语”，因为示例站点期望从响应中格式化一个字符串，但没有任何内容回复。有没有人有这个解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T01:17:08.013

您的报告似乎表明您的后端服务不尊重[在身份验证过程的第一阶段](http://docs.valence.desire2learn.com/basic/auth.html)`&x_target=appURL`结束时传入的参数。也许您的后端服务需要支持重定向回传入的目标参数 URL 所需的深层链接？

# svn - Umbraco 开发：从服务器推送到 SVN

> ID：12692939
> 
> 赞同：1
> 
> 时间：2012-10-02T15:02:56.357
> 
> 标签：svn, umbraco

我目前正在使用 Umbraco 进行开发，这非常适合我的需求。但是，我也非常注意始终将所有内容都放入我的 SVN 存储库中，因此我可以在必要时恢复。

所以，现在，我在我的计算机上本地运行我的 Umbraco 安装，并在这台计算机上编写我的 Razor 脚本和我的用户控件。当一切正常时，我将其检入我的存储库并将其上传到服务器。

像这样工作有它的优点，但也有它的缺点。例如，我可能会忘记上传文件，然后看到一切都崩溃了。

所以我想知道是否可以在服务器上的站点上工作并追溯检查我对母版页、脚本文件所做的所有更改......

有没有朝这个方向工作的工具？你能想到什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T15:32:22.147

您应该查看 cms.dll (umbraco.cms.businesslogic 命名空间) 中 Umbraco API 上的事件 - 有媒体保存 (Media.AfterSave)、文档 (Document.AfterSave)、母版页、宏等事件. 我建议您查看这些事件，然后查看将挂钩写入 SharpSvn 等库，以便在保存后自动将内容检入您的 SVN 存储库。

# algorithm - 梳排序是否被证明是正确的？是真的吗？

> ID：12692940
> 
> 赞同：1
> 
> 时间：2012-10-02T15:03:00.130
> 
> 标签：algorithm, sorting, proof, correctness

我一直在对 Comb Sort 进行一些研究，并试图弄清楚该算法是否已被证明是正确的。但是，我似乎无法找到有关该算法的大量文档。不过，这是一个非常简单的算法——基本上是冒泡排序的一种变体——我猜这个证明并不复杂。有没有人知道我在哪里可以找到更多关于这方面的信息，或者关于如何从头开始证明它的想法？

对于不熟悉 Comb Sort 的人，您可以在[Wikipedia 文章](http://en.wikipedia.org/wiki/Combsort)中找到伪代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-01-23T01:39:34.590

[让我们使用来自Wikipedia](https://en.wikipedia.org/wiki/Comb_sort#Pseudocode)的伪代码：

```
function combsort(array input) is
    gap := input.size
    shrink := 1.3
    sorted := false

    loop while sorted = false
        gap := floor(gap / shrink)
        if gap ≤ 1 then
            gap := 1
            sorted := true
        end if

        i := 0
        loop while i + gap < input.size
            if input[i] > input[i+gap] then
                swap(input[i], input[i+gap])
                sorted := false
            end if

            i := i + 1
         end loop
     end loop
end function 
```

主循环是`while sorted = false`，并且没有`break`提前停止循环的语句，这对证明非常有帮助：如果这个循环曾经终止，那么一定是`sorted = true`. 所以实际上，我们只需要展示两件事：首先，循环确实终止了，其次，如果`sorted = true`在循环结束时，那么数组实际上是排序的。

*   循环终止是因为每次`sorted`仍然`false`在迭代结束时，要么`gap`变小，要么`gap`保持不变，并且数组中的[反转次数变小。](https://en.wikipedia.org/wiki/Inversion_(discrete_mathematics))倒数和倒数都是`gap`分别以 1 和 0 为界的整数，因此它们不能无限变小。
    *   如果`gap`是 2 或更多，那么在该迭代中它会变小（注意`floor`函数）。
    *   如果`gap`为 1，则它保持为 1，并`sorted`设置为`true`内部循环之前。`sorted`只能`false`通过交换`input[i]`和`input[i+1]`某些`i`where来设置`input[i] > input[i+1]`。这样的交换将数组中的反转次数减少了 1。内部循环在任何其他情况下都不执行交换，因此在 时没有交换可以增加反转次数`gap = 1`。
*   如果`sorted = true`在循环结束时，我们知道`gap = 1`因为 else`sorted`不能设置为`true`. 然后我们也知道 every`input[i] <= input[i+1]`因为如果这对某些人来说不是真的`i`，那么`sorted`就会被设置为`false`。因此，`sorted`只有在循环结束时数组中的每一对相邻元素都是有序的，即数组已排序时，才为真。

# php - 在不打扰“添加评论”的情况下更新评论线程的内容

> ID：12692945
> 
> 赞同：0
> 
> 时间：2012-10-02T15:03:14.713
> 
> 标签：php, javascript, jquery

如何在不干扰用户在文本字段上输入的情况下刷新 div“评论线程”的内容。就像在`Facebook`评论部分中一样？我正在使用`Php`, `Jquery`, `Javascript`.

```
var auto_refresh = setInterval(
    function autorefresh()
    {
        var ipo = document.getElementById('commentarea');
        $('#commentarea').load('processing.php');
    }, 
    100); 
```

processing.php 包含一个 while 循环，其中所有 div 即主要内容，如评论都存在。我想要做的是当用户点击评论时，一个 div 出现在它下方，显示其他评论并为用户显示文本字段评论，类似于 Facebook 的评论视图。如何在不干扰用户评论字段的情况下刷新评论内容。

# c++ - Visual C++ 中的链接错误

> ID：12692947
> 
> 赞同：1
> 
> 时间：2012-10-02T15:03:17.760
> 
> 标签：c++, visual-studio, linker-errors

我在 Windows 7 64 位上使用 Oracle 11g 库在 Visual Studio 2005 中创建了一个项目。我在链接阶段面临以下问题：

> > 错误 LNK2001：未解析的外部符号 _sqlcxt

哪个库定义了_sqlcxt？我已将我的项目链接到 orasql11.lib 并检查它是否正在搜索此库（设置显示进度 VERBOSE）。是否缺少其他库？

我需要紧急解决这个问题。

# c++ - 调试链接到发布可执行文件的调试 dll

> ID：12692952
> 
> 赞同：2
> 
> 时间：2012-10-02T15:03:43.793
> 
> 标签：c++, debugging, visual-studio-2005

在 Visual Studio 中，如何调试/单步执行 exe 对库的调用？exe仅在发布模式下可用并调用在调试模式下构建的库我只用exe做了一个简单的vs解决方案并启动它..然后我从二进制文件中打开了一个源文件并添加了断点..但是vs没有激活断点说“没有为此文件加载符号”......显然我在这里遗漏了一些东西......（如果我没记错的话，我以前能够调试调用）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:06:35.493

您可以使用以下注意事项调试在发布模式下构建的二进制文件：

1.  您将需要针对发布库构建的 pdb。
2.  在任何已内联/优化的代码中都无法设置断点。
3.  根据体系结构，某些变量值将被隐藏/垃圾，在调试发布二进制文件时，您必须小心翼翼。

要为发布二进制文件添加 PDB 文件，请转到：

```
Debug -> Options and Settings -> Symbols 
```

# php - flash/php 游戏 - 会话管理/用户识别

> ID：12692953
> 
> 赞同：1
> 
> 时间：2012-10-02T15:03:43.940
> 
> 标签：php, flash, session

我有一个需要用户登录的 Flash 游戏。登录系统在 Flash 中实现，并向 php 后端发送请求，以检查登录信息是否正确。

我有一个想法，即在用户登录时返回一个唯一的、随机生成的 sessionID 值。每当客户端向服务器发送请求时，它都会将此 sessionID 作为标识符发送。例如，如果我为用户分配 sessionID '123456'，那么如果服务器收到请求 'user:123456, action: 购买商品 X'，我将知道哪个用户提出了请求，并可以相应地更新数据库。

当用户再次登录时，每次都会生成不同的会话 ID。

我想知道这是否是一个好方法？这意味着每次收到请求时，我都必须搜索用户表，直到在 sessionID 上找到匹配项。我应该使用 php 的内置会话管理吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:13:51.120

任何人都可以向服务器发送请求“用户：123456，操作：购买商品 X”。那是不安全的。使用 PHP 本机会话。

请参阅[使用 Flash Actionscript 设置 PHP 会话变量](https://stackoverflow.com/questions/1006758/setting-php-session-variables-using-flash-actionscript)

# algorithm - 一个字符串中的字符包含在另一个字符串中

> ID：12692968
> 
> 赞同：0
> 
> 时间：2012-10-02T15:04:50.877
> 
> 标签：algorithm

如何验证一个字符串中的每个字符都包含在另一个字符串中。比如，abc 是 string1，cbade 是 string2，string1(abc) 中的所有字符都包含在 string2 中。实际上它看起来很简单，但我们需要最快的方法来做到这一点，所以仍然非常困难，我花了整整一周的时间都找不到一个解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:07:45.763

如果您使用的语言可以轻松地为字符分配数值（大多数语言），则可以使用查找表进一步加快速度：

1.  查找表，每个字符一个槽
2.  访问查找表中 string2 中的字母
3.  确保 string1 中的字母被访问
4.  ？？？
5.  利润

运行时：A + B 运行
空间：A + B + N，其中 N 是可能的字符数。（C：256，Java：65536）

如果不是，您应该能够在字符之间建立任意顺序，在这种情况下：

1.  按字母顺序对两个字符串进行排序
2.  二分搜索（您可以使用最后找到的匹配的位置作为一个非常好的初始猜测）
3.  ？？？
4.  利润

运行时：A*log(A) + B*log(B) + A*log(B)
运行空间：A + B

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-04T10:34:49.670

1.  制作哈希映射（映射到布尔值的字符）
2.  遍历 string1，在哈希表中为每个字符创建一个条目
3.  遍历 string2，将哈希表中的条目设置为您看到的每个字符的 true
4.  遍历哈希映射中的元素（可能在我知道的大多数实现中，应该是 O(n)，即 O(A)），如果看到错误条目，则停止并返回 false，否则返回 true
    =>
    Time: O(A +B), A 是 string1 的长度，B 是 string2 的
    空间：O(A)

    *假设：*迭代字符串/hashmap：O(n) 时间，在 hashmap 中查找/插入：O(1) [注意这些可能都是摊销]

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-02T15:11:36.120

将两个字符串中的所有字符分成两组，然后检查一个是另一个的子集。在 Python 中：

```
>>> set("abc").issubset(set("cbade"))
True 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-02T15:11:45.037

您可以在 O(n) 中执行此操作。首先构造第二个字符串中存在的字符的哈希表。然后遍历第一个字符串中的字符并断言该字符在哈希表中有一个条目。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-10-02T15:12:40.223

因为可能的字符数很小（假设为 256），所以您可以有一个大小为 256 的固定数组，首先将其每个位设置为零，然后当您访问第一个字符串中的任何字符时，请在数组中设置相关位，之后遍历第二个数组，如果你看到没有要设置的位，意味着它们都在前一个字符串中，你可以说第二个字符串的所有字符都在第一个字符串中可用，否则，如果你在第二个字符串中看到一个字符，使得相关位尚未设置，您可以说第一个字符串不包含第二个字符串。该算法在时间上为 O(n)，在内存中为 O(1)（即 O(1) 外部存储器）。

# java - developer.android.com - 我的第一个应用程序/你好世界

> ID：12692971
> 
> 赞同：2
> 
> 时间：2012-10-02T15:04:57.103
> 
> 标签：java, android, android-layout, android-manifest, android-activity

我已经在 developer.android.com 上编写了代码，但我遇到了一些问题。

首先，在 MainActivity.java 文件中，它下面用黄线标记了“消息”。

其次，我的代码没有错误，但是当我运行应用程序时，文本框显示“false”并且按钮具有“false”标题。当我按下按钮时，什么也没有发生。可以请人帮助我吗？

MainActivity.java：

```
package com.example.myfirstapp;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends Activity {

    public static final String EXTRA_MESSAGE = null;
    private static final String message = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    }
        public void sendMessage(View view) {
            Intent intent = new Intent(this, DisplayMessageActivity.class);;
            intent.putExtra(EXTRA_MESSAGE, message);
            startActivity(intent);
            EditText editText = (EditText) findViewById(R.id.edit_message);
            String message = editText.getText().toString();

    }
} 
```

活动主.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">

    <EditText android:id="@+id/edit_message"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@+string/edit_message" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@+string/button_send"
        android:onClick="sendMessage" />
</LinearLayout> 
```

DisplayMessageActivity.java:

```
package com.example.myfirstapp;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.widget.TextView;

public class DisplayMessageActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_display_message);

        //Get the message from the intent
        Intent intent = getIntent();
        String message = intent.getStringExtra(MainActivity.EXTRA_MESSAGE);

        //Create the text view
        TextView textView = new TextView(this);
        textView.setTextSize(40);
        textView.setText(message);

        //Set the text view as the activity layout
        setContentView(textView);
    }

} 
```

MyFirstApp 清单：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myfirstapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity
            android:name=".DisplayMessageActivity"
            android:label="@string/title_activity_display_message" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.myfirstapp.MainActivity" />
        </activity>
    </application>

</manifest> 
```

感谢您的帮助，我会非常感谢它。

* * *

现在这是代码：

MainActivity.java：

```
package com.example.myfirstapp;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;
import android.widget.EditText;

public class MainActivity extends Activity {

    public static final String EXTRA_MESSAGE = null;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

    }
        public void sendMessage(View view) {
            EditText editText = (EditText) findViewById(R.id.edit_message);
            Intent intent = new Intent(this, DisplayMessageActivity.class);
            intent.putExtra(EXTRA_MESSAGE, message);
            startActivity(intent);

    }
} 
```

activity_main.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="horizontal">

    <EditText android:id="@+id/edit_message"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="wrap_content"
        android:hint="@string/edit_message" />

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/button_send"
        android:onClick="sendMessage" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T10:08:34.083

*   在消息变量分配之前的编码开始活动中，因此只有它不显示消息，因此使用以下方式

    ```
     Intent intent = new Intent(this, DisplayMessageActivity.class);
        intent.putExtra(EXTRA_MESSAGE, message);
        EditText editText = (EditText) findViewById(R.id.edit_message);
        String message = editText.getText().toString();
        startActivity(intent); 
    ```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-02T15:09:32.923

您正在将消息设置为该变量的本地副本。您应该将其分配给您的静态变量。警告是由于声明后未使用局部变量。要修复，您可以删除`String`关键字：

```
message = editText.getText().toString(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-02T15:10:42.033

无法重新影响最终对象（在您的情况下为 String ）。在您的情况下，这意味着它将始终为空。Eclipse 不理解，因此发出警告。

然后在您的应用程序中有几个排序问题。您在发送意图*后*从 EditText 获取值，这不起作用。

然后，有阴影。您正在声明一个隐藏私有变量的消息字符串。

至于文本，@+string/edit_message 中不需要 +。+ 表示该元素未明确声明。文本必须显式声明，否则它的值没有意义。

此外，您使用的 EXTRA 键是任意的（即您可以给它任何您喜欢的值），但 null 不是一个好值。

# c# - Visual Studio 2010 调试器如何处理 XmlReader.Read 中的 XmlException？

> ID：12692973
> 
> 赞同：4
> 
> 时间：2012-10-02T15:05:02.850
> 
> 标签：c#, .net, visual-studio-2010, debugging, xmlreader

我运行这个示例应用程序：

```
class Program
{
    static void Main()
    {
        var reader = System.Xml.XmlReader.Create(@"C:\nonXml.txt");
        while (reader.Read()) { }
        System.Console.WriteLine("Ok");
        System.Console.ReadKey();
    }
} 
```

`nonXml.txt`是一个包含非 xml 内容的单行文本文件。

当我在没有调试器的情况下运行应用程序时，`reader.Read`抛出一个预期`XmlException`的并且应用程序退出并出现错误。当我使用调试器（`F5`在 Visual Studio 中）运行它时，调试器会发出异常信号，但在按下`F5`（继续）后，应用程序意外地正常继续并写入“Ok”。

在这种情况下，调试模式会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-03T20:49:07.433

我想我理解你的困惑。当您调试和 Visual Studio 处理异常时，它会在错误行处停止。在正常情况下，按 F5 再次运行同一行并且您处于错误循环中。但是在您的情况下，您只有一个异常，然后 VS 运行时什么也没发生。

我想你现在意识到发生了什么。第一次尝试 reader.Read() 读取 xml 数据文件并将流中的索引移动到文件末尾。按 F5 后，再次运行此行，reader.Read() 因为 EOF 而返回 false。就是这样。

在正常运行（没有调试）中，您的应用程序在第一个未捕获的错误时死亡，并且没有其他任何事情发生。

奖金样本作为证明（粘贴而不是您的 while 循环）：

```
try
{
    while (reader.Read()) { }
}
catch (Exception)
{
    Console.Out.WriteLine("We have excpetion, this is wrong file");
}

while (reader.Read()) { } // we have eof so we don't get exception only false 
```

# prolog - Prolog 逻辑测试示例

> ID：12692974
> 
> 赞同：1
> 
> 时间：2012-10-02T15:05:08.207
> 
> 标签：prolog, logic, zebra-puzzle

我有一个关于 Prolog 的测试，但我无法真正掌握它的基本思想。我有点理解我经历过的一些例子，但我不能坐下来立即知道如何解决一个特定的问题。

我们的教授给了我们一些例子，我想知道是否有人可以指导我如何做到这一点，所以我有一些想法如何处理这样的事情。

这个例子来自我们的书：

```
Donna, Danny, David, and Doreen were seated at a table. 
The men sat across from each other, as did the women. 
They each ordered a different drink and main course.

Facts:

Doreen sat beside the person that ordered steak
The chicken came with a coke
The person with lasagna sat across from the person with milk
David never drinks coffee
Donna only drinks water
Danny could not afford to order steak 
```

我尝试了一些方法，每个人都有一个与他们相关的列表，你会填写事实，但我认为这不是正确的方法。有人可以帮我完成这个吗？谢谢！

编辑：

这是我最终得到的代码，它完成了大部分难题，它留下了一份主菜和一份饮料，但这应该是可以修复的：

```
 sat_across([X,_,Y,_], X, Y).
  sat_across([_,X,_,Y], X, Y).

  sat_beside(T, X, Y) :-  % this is tricky
      nth1(N,T,X), nth1(M,T,Y),
      (N =:= M+1 ; N =:= M-1 ; N == 1, M == 4 ; N == 4, M == 1).
      not_connected(T, Place) :- \+ member(Place, T).
  connected(T, Place) :- member(Place, T).

  solve(T) :- T = [_,_,_,_],
      sat_across(T, (danny,_,_), (david,_,_)),
      sat_across(T, (donna,_,_), (doreen,_,_)),
      sat_beside(T, (doreen,_,_), (_,_,steak)),
      connected(T, (_,coke,chicken)),
      sat_across(T, (_,_,lasagna), (_,milk,_)),
      not_connected(T, (david,coffee,_)),
      connected(T, (donna,water,_)),
      not_connected(T, (danny,_,steak)). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:14:12.993

你应该认识到这个问题有八个变量：每个人的饮料和主菜，所以`DonnaDrink`，`DannyFood`等等。

`=`您的程序应该使用并根据给定的事实来约束这八个变量`\=`，也许使用额外的谓词，例如`gender`.

（这实际上是[斑马拼图](http://en.literateprograms.org/Zebra_Puzzle_%28Prolog%29)的一个简单变体，但没有全部排序。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T16:06:03.833

使用模式匹配，每个位置都有一个属性三元组：姓名、饮料、食物。

然后我们有一个 [N,S,W,E] 表（滥用合同桥接约定），我们必须应用所有可用的约束：我认为可以这样做......

```
sat_across([X,_,Y,_], X, Y).
sat_across([_,X,_,Y], X, Y).
sat_across([X,_,Y,_], Y, X).
sat_across([_,X,_,Y], Y, X).

sat_beside(T, X, Y) :-  % this is tricky
    nth1(N,T,X), nth1(M,T,Y),
    (N =:= M+1 ; N =:= M-1 ; N == 1, M == 4 ; N == 4, M == 1).

cant_afford(T, Place) :- \+ member(Place, T).

solve(T) :- T = [N,S,W,E],
      sat_across(T, (danny,_,_), (david,_,_)),
      sat_across(T, (donna,_,_), (doreen,_,_)),
      sat_beside(T, (doreen,_,_), (_,_,steak)),
      ....
      cant_afford(T, (danny,_,steak)),
      .... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-03T08:34:05.280

抱歉，如果我要删除此线程，但我对答案并不满意（它们似乎不优雅/不完整）。

这是斑马问题的变体。唯一真正的问题是“X 在什么位置”，其中 X 可以是人、主菜或饮料。因此，您的域是 { 1, 2, 3, 4 }，其中每个数字代表一个席位。

然后添加您的约束，确保每个项目相对于其类型的其他项目处于唯一的位置（即，一个人只能坐在 1 个座位上，等等），并将 prolog 设置为松散。

哦，别忘了把你的负面约束放在最后。这就是我最终得到的结果：

```
%  Organize the seating, so:
%  1  2
%  3  4
%  This means that "across" is always (n+2)%4
%  and "beside" is (n+1)%2

pos(1). pos(2). pos(3). pos(4).

beside(A,B) :- pos(A), B is (A+1) mod 2.
across(A,B) :- pos(A), B is (A+2) mod 4.

zebra(Donna,Danny,David,Doreen,
     Steak,Lasagna,Pizza,Chicken,
     Coke,Milk,Coffee,Water) :-
  % Our 4 given positive constraints
  beside(Doreen,Steak),
  Chicken=Coke,
  across(Lasagna,Milk),
  Donna=Water,
  % The men and women sat across from each other
  across(David,Danny),
  across(Doreen,Donna),
  % Ensure that each item is only in 1 position
  uniq_pos(Steak,Lasagna,Pizza,Chicken),
  uniq_pos(Coke,Milk,Coffee,Water),
  uniq_pos(Donna,Danny,David,Doreen),
  % The remaining two negative constraints.
  \+ David=Coffee,
  \+ Danny=Steak.

% Ensures that all 4 items are in unique positions.
uniq_pos(A,B,C,D) :-
  pos(A), pos(B), pos(C), pos(D),
  \+ A=B, \+ A=C, \+ A=D,
          \+ B=C, \+ B=D,
                  \+ C=D. 
```

似乎工作。Prolog 告诉我：
坐在 1 号座位上的大卫有牛排和牛奶，
坐在 2 号座位上的多琳有鸡肉和可乐，
坐在 3 号座位上的丹尼有烤宽面条和咖啡，
坐在 4 号座位上的唐娜有披萨和水。

希望这可以帮助其他试图理解这个问题的人。

# css - 将鼠标悬停在一个带有 css 的链接上时更改整个列表颜色

> ID：12692975
> 
> 赞同：1
> 
> 时间：2012-10-02T15:05:08.513
> 
> 标签：css, styles, hover, hyperlink

***好的，我以为我有它，但现在我没有。我正在尝试使用有机标签制作颜色链接，颜色不再适用于链接，我的标签已停止工作，当我在示例中添加一个 div 标签时，我的页面布局变得混乱。有什么想法吗？ [http://jsfiddle.net/kb0440/74vuX/](http://jsfiddle.net/kb0440/74vuX/) 。作品集内容应该放在同一平原的侧边栏旁边。谢谢！

我想知道是否有人可以帮助我解决这个问题，我似乎无法弄清楚。我试图通过我的列表获得这种效果： [http](http://digitalmash.com/) ://digitalmash.com/ 当我将鼠标悬停在一个链接上时，我希望所有其他链接都变灰，并且我希望它们都像那样丰富多彩。我正在尝试将它与有机标签 js 一起使用，而我对此很陌生，所以试图弄清楚它只是让我的大脑变得糊涂！任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-02T15:14:42.267

搭配颜色：

```
.test:hover > div {    
    color: #777;
}

.blue, .test:hover > .blue:hover {
    color: blue;
}

.red, .test:hover > .red:hover {
    color: red;
}

.orange, .test:hover > .orange:hover {
    color: orange;
} 
```

**示例：http: [//jsfiddle.net/hunter/NqAWA/](http://jsfiddle.net/hunter/NqAWA/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:09:21.177

干得好 ：-）

HTML：

```
<div>
<ul>
    <li class="first">Item 1</li>
    <li class="second">Item 2</li>
    <li class="third">Item 3</li>
    <li class="fourth">Item 4</li>
</ul>
</div>​ 
```

CSS：

```
div ul:hover li {
    color:#CCC;
}
ul li.first, div ul li.first:hover {
    color:#F00;
}
ul li.second, div ul li.second:hover {
    color:#0F0;
}
ul li.third, div ul li.third:hover {
    color:#00F;
}
ul li.fourth, div ul li.fourth:hover {
    color:#0FA;
} 
```

**[演示](http://jsfiddle.net/gionaf/RAWgv/)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:13:16.980

很多方法可以做到这一点。

**这是一个使用 CSS3 的：**

```
<span>
<a id=a href=# title=AAA>AAAAA</a>
<a id=b href=# title=CCC>BBBBB</a>
<a id=c href=# title=CDDEZ>epupzotfrez eze</a>
</span>

span:hover a {color:grey;}
a {text-decoration:none; font-weight:bold;}
span:not(:hover) #a, #a:hover { color:red;}
span:not(:hover) #b, #b:hover { color:blue;}
span:not(:hover) #c, #c:hover { color:green;} 
```

[示范](http://jsfiddle.net/dystroy/B3cyS/2/)

​这 **是另一个使用 javascript 的（这里使用 jquery，但您可以将其转换为 vanilla）：**

```
<span>
<a href=# title=AAA color=red>AAAAA</a>
<a href=# title=CCC color=blue>BBBBB</a>
<a href=# title=CDDEZ color=green>epupzotfrez eze</a>
</span>
​
a {text-decoration:none; font-weight:bold;}

function color() {
    $('a').each(function(){
        $(this).css('color', $(this).attr('color'));
    });
}
$('a').mouseenter(function(){
    $('a').css('color','grey');
    $(this).css('color', $(this).attr('color'));
});
$('span').mouseleave(color);
color(); 
```

第二种解决方案的一个优点是您不必在您的 css 中为每个链接创建一个条目。

[示范](http://jsfiddle.net/dystroy/H5XEs/)

# javascript - 如何在 JavaScript 中创建 cookie？

> ID：12692979
> 
> 赞同：0
> 
> 时间：2012-10-02T15:05:30.133
> 
> 标签：javascript, html, cookies

我正在尝试创建一个 cookie 来保存；

姓名、电子邮件、电话号码、工作（列表中的选择/字段中的文本）和两个 iphone 类型的切换按钮的状态，然后在用户下次查看时全部加载到页面中，

我绝望地卡住了。我找不到一个网站可以帮助我清楚地解释它。任何帮助都会很棒，谢谢x

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-02T15:08:04.750

你可能需要一个这样的插件：[https ://github.com/ScottHamper/Cookies](https://github.com/ScottHamper/Cookies)

或包含此脚本

```
/**
 * jQuery Cookie plugin
 *
 * Copyright (c) 2010 Klaus Hartl (stilbuero.de)
 * Dual licensed under the MIT and GPL licenses:
 * http://www.opensource.org/licenses/mit-license.php
 * http://www.gnu.org/licenses/gpl.html
 *
 */
jQuery.cookie = function (key, value, options) {

    // key and at least value given, set cookie...
    if (arguments.length > 1 && String(value) !== "[object Object]") {
        options = jQuery.extend({}, options);

        if (value === null || value === undefined) {
            options.expires = -1;
        }

        if (typeof options.expires === 'number') {
            var days = options.expires, t = options.expires = new Date();
            t.setDate(t.getDate() + days);
        }

        value = String(value);

        return (document.cookie = [
            encodeURIComponent(key), '=',
            options.raw ? value : encodeURIComponent(value),
            options.expires ? '; expires=' + options.expires.toUTCString() : '', // use expires attribute, max-age is not supported by IE
            options.path ? '; path=' + options.path : '',
            options.domain ? '; domain=' + options.domain : '',
            options.secure ? '; secure' : ''
        ].join(''));
    }

    // key and possibly options given, get cookie...
    options = value || {};
    var result, decode = options.raw ? function (s) { return s; } : decodeURIComponent;
    return (result = new RegExp('(?:^|; )' + encodeURIComponent(key) + '=([^;]*)').exec(document.cookie)) ? decode(result[1]) : null;
}; 
```

用途：

```
var selector = $('#name');
$.cookie("thename", selector, { path: '/' });
console.log(selector); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T15:08:59.737

我一直在使用 jquery cookie [https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)这使得写入和读取 cookie 变得非常容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:11:48.693

如果你知道[jQuery](http://jquery.com/)，你应该使用这个插件：[jquery.cookie](https://github.com/carhartl/jquery-cookie)

用法 ：

设置 cookie 1：`$.cookie('the_cookie', 'the_value');`

设置 cookie 2：`$.cookie('the_cookie', 'the_value', { expires: 7 });`

获取饼干：`$.cookie('the_cookie');`

删除 cookie：`$.removeCookie('the_cookie');`

**编辑**

让我们采用这个 HTML 表单：

```
<form method="post" action="somefile.php" id="mygreatform">

    <input type="text" name="name" id="name"/>
    <input type="text" name="email" name="email"/>
    <input type="text" name="phone" name="phone"/>

    <select name="job" id="job">
        <option value="job1">Job 1</option>
        <option value="job2">Job 2</option>
    </select>

</form> 
```

我们在 javascript 中捕获表单提交事件，以便将所有输入值序列化为一个 JSON 字符串，并将此字符串存储在 cookie 中：

```
$('#mygreatform').submit(function()
{
    var formValues = {
        'name' : document.getElementById('name'),
        'email' : document.getElementById('email'),
        'phone' : document.getElementById('phone'),
        'job' : document.getElementById('job')
    };

    // Create JSON string : {"name":"...","email":"...","phone":"...","job":"..."}
    // "..." are all user inputs
    var formValuesStr = JSON.stringify(formValues);

    // expires 14 days from then
    $.cookie('cookie_name', formValuesStr, { expires: 14 });
}); 
```

在另一个页面上，我们将尝试读取 cookie：

```
$(document).ready(function()
{
    var formValuesStr = $.cookie('cookie_name');

    if(formValuesStr != null)
    {
        var formValues = JSON.parse(formValuesStr);

        alert('User email : ' + formValues['email']);
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T15:25:32.170

这是使用纯 javascript 设置 cookie 的方法

```
document.cookie = "cookieName=cookieValue"; 
```

将为当前域设置 cookie。您必须在某些服务器上运行此代码。如果您只是在浏览器中打开一个 html 文件，cookie 将不起作用

# iphone - 权利“应用程序标识符”具有配置文件不允许的值-TestFlight

> ID：12692980
> 
> 赞同：6
> 
> 时间：2012-10-02T15:05:34.143
> 
> 标签：iphone, ios-provisioning, provisioning-profile, testflight

我知道有人提出了有关以下错误的问题：**权利“应用程序标识符”具有配置文件不允许的值**，但是，没有一个解决方案可以解决我的问题。情况如下：我有一个下载文件的应用程序，并且在开发模式下运行良好。当我 TestFlight 应用程序时，我收到以下错误：

```
entitlement 'application-identifier' has value not permitted by a provisioning profile 
```

在我的控制台中。即使出现此错误，应用程序也可以正常运行，**除非**它不会下载任何内容。所有其他功能都有效。通过TestFlight下载应用程序后，如果我运行它并收到上述错误，如果我杀死应用程序并重新启动它，我不会收到错误并且下载工作正常？？

好的，这是我试图解决的问题：

1.  我删除了 developer.apple 和我的机器上的所有配置文件并重新创建了它们。重新下载新的配置文件后，我再次尝试 - 没有运气。

2.  接下来，我添加了一个`get-task-allow`设置为`false`的 Entitlements.plist 文件，并为 Ad Hoc 构建设置了 Entitlements 文件。这也无济于事。

有人有想法吗？

**编辑：** 此外，我制作了一个新版本的应用程序并将所有文件复制到一个新的应用程序 ID 下，制作了所有新的配置文件，但它仍然无法正常工作。

我尝试的最后一件事是制作通配符临时配置文件，以便它可以签署任何应用程序，但我仍然遇到同样的错误。

我真的需要弄清楚这个...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-02T15:23:31.800

听起来应用程序名称 com.whatever.whatever 与配置文件中的应用程序名称不完全匹配。

如果这是问题所在，则需要使它们匹配。供应配置文件是指具有捆绑名称的应用程序 ID。您的构建设置可能有一个名为 PRODUCT_NAME 的变量。您可以创建一个新的应用程序 ID 以匹配您的项目，或者 - 可能更容易 - 更改项目的产品名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T09:44:14.740

Danh 的回答为我解决了这个问题。

我使用了一个带有通配符应用程序 ID com.companyName.* 的配置文件，我的项目的包标识符是 com.companyName.appName。这通常不会导致任何问题，但在实施权利时这似乎是一个问题。

从我的包标识符中删除“appName”意味着我与我的通配符 App ID 完全匹配。

不知道为什么需要完全匹配权利。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-23T05:27:45.150

我面临同样的问题，我发现有两种配置文件：

*   特别指定
*   分配

我选择了错误的类型，所以我无法安装它。您可以生成配置文件并重试。

![在此处输入图像描述](../Images/183f4d627179d60aadb2e4ca6fdd9fb6.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-01T10:15:10.920

我有同样的问题——但在更新了我的会员订阅之后。

因此，您应该重新创建证书（在此处查看更多信息[https://discussions.apple.com/thread/3917482](https://discussions.apple.com/thread/3917482)）。

谢谢，

# css - 自动 CSS 简化工具？

> ID：12692983
> 
> 赞同：6
> 
> 时间：2012-10-02T15:05:42.737
> 
> 标签：css, less

我有一些复杂而混乱的 CSS，是否有一些工具可以处理这些非常混乱的 CSS 并简化它？

我知道人们经常采取另一种方式，他们使用更简洁的样式表语言（例如[http://lesscss.org/](http://lesscss.org/) ）制作 CSS，并由此生成 CSS。但是我的情况是我有很多丑陋的混乱 CSS，我想走另一条路。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T15:07:31.863

[CSS Tidy](http://csstidy.sourceforge.net/)是一个很好的开源优化器。

也检查这个[在线工具](http://csstidyonline.com/)。它非常适合快速优化。

如果你想要整个包，谷歌提供了[闭包工具](https://developers.google.com/closure/)，可以为你优化，甚至缩小静态文件——来自内联样式、javascript等

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T15:07:41.473

尝试像[http://cssbeautify.com/](http://cssbeautify.com/)这样的在线服务。那里有很多...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T15:14:14.957

您可以使用在线工具：

*   [http://csslint.net/](http://csslint.net/)用于 linting
*   [http://csscomb.com/](http://csscomb.com/)用于排序属性
*   [http://prefixr.com/](http://prefixr.com/)用于添加浏览器前缀

浏览器扩展：Firefox 的 Dust-Me 选择器：[http ://www.sitepoint.com/dustmeselectors/](http://www.sitepoint.com/dustmeselectors/)

大多数工具可以通过插件直接安装到您的 IDE/文本编辑器中

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-02T16:28:50.517

[http://procssor.com/](http://procssor.com/)很好，有很多选项可以满足你喜欢你的 css 的外观。

# c - 不带括号的 if 语句中的函数调用

> ID：12692985
> 
> 赞同：7
> 
> 时间：2012-10-02T15:05:51.443
> 
> 标签：c, syntax

Fedora Linux 上最新版本的 gcc 和 clang 编译以下程序没有错误：

```
#include <ctype.h>
#include <stdio.h>

int main(int argc, char *argv[]) {
    char c = 'a';
    if islower(c)
        printf("%d", c);
    else
        printf("%c", c);
    return 0;
} 
```

这是 gcc 4.7.2 和 clang 3.0。相比之下，在我的 Mac 上，gcc 4.2.1 和 Apple clang 4.1 都抱怨“if islower(c)”行中缺少括号，正如预期的那样。在所有情况下，我都使用“-std=c99”运行编译器。

这是最新版本的 gcc 和 clang 中的错误，C 语言中的怪癖，还是其他什么？C99 标准（[http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf](http://www.open-std.org/jtc1/sc22/WG14/www/docs/n1256.pdf)第 133 页）似乎在所有情况下都要求在 if 表达式周围加上括号。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-02T15:08:12.280

这很可能`islower()`是一个宏，并且扩展添加了括号。

发布来自 GCC 的预处理输出，您可以通过使用`-E`选项进行编译来获得。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-02T15:28:02.290

我只是查看了`ctype.h`位于的文件`/usr/include/ctype.h`并找到了以下定义`islower`：

```
#define islower(c)  __isctype((c), _ISlower) 
```

转到`__isctype()`我发现的定义：

```
#define __isctype(c, type) \
  ((*__ctype_b_loc())[(int) (c)] & (unsigned short int) type) 
```

因此，您的代码`if islower(c)`扩展为：

```
if ((*__ctype_b_loc())[(int) (c)] & (unsigned short int) _ISlower) 
```

正如 unwind 所说，在扩展过程中添加了括号。

# google-apps-script - 如何从上传的 PDF 中删除作者？

> ID：12692987
> 
> 赞同：5
> 
> 时间：2012-10-02T15:05:53.877
> 
> 标签：google-apps-script

我有客户通过表格上传 PDF。我希望上传时清除 PDF 的属性，以便将来的用户看不到作者的踪迹。

更具体地说，属性是下载 PDF 时看到的属性，右键单击并选择“属性”。然后您可以查看 PDF 属性，例如标题、作者、主题和关键字。我还没有找到在 Google Docs 中访问这些文件的方法，但电子阅读器经常使用它们来识别 PDF。我想替换或清除这些字段。

更新：差不多 4 年后，我仍然需要一个解决方案。提供赏金。我欢迎任何解决方法或其他技巧来删除作者姓名。也许它不是直接编辑属性，而是弄乱了一个blob或其他东西。（注意：必须保留 PDF 中的文本格式。）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-04T05:57:02.757

Google Apps Script 或 Google Docs/Drive API 没有此类选项。[您可以在此处](http://code.google.com/p/google-apps-script-issues/issues/entry?template=Feature%20request%20from%20user)提交功能请求。

# scala - 默认情况下成员函数是虚拟的

> ID：12692989
> 
> 赞同：4
> 
> 时间：2012-10-02T15:05:58.870
> 
> 标签：scala, methods, jvm, overriding, virtual

scala中的成员函数默认是虚拟的吗？在这件事上它与 Java 有什么不同吗？

当一个方法被覆盖时，您必须明确声明，但没有“虚拟”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-02T15:08:15.450

> scala中的成员函数默认是虚拟的吗？

是的。

> 在这件事上它与 Java 有什么不同吗？

不，在 Java 中方法也是虚拟的，除非它们被明确定义为`final`.

然而，Java 与 Scala 的不同之处在于 Java 不需要（或没有）`override`关键字来覆盖方法 - 它确实有一个`@override`注释（从 Java 1.5 开始），并且当您覆盖没有该注释的方法时会发出警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-02T15:08:17.980

> scala中的成员函数默认是虚拟的吗？

是的。

> 在这件事上它与 Java 有什么不同吗？

不，但是它与 C++ 或 C# 不同。

这是一个好主意还是坏主意是非常有争议的。

# c# - Visual Studio 中的分组自定义设计时属性

> ID：12692990
> 
> 赞同：3
> 
> 时间：2012-10-02T15:05:58.603
> 
> 标签：c#, visual-studio-2010, properties, design-time

我之前看到过类似的问题，但不完全是我所追求的。

我有一个用户控件，并希望构建一组可扩展的属性，以便在设计时编辑控件。请注意，不是一组属性，而是类似于大小或位置属性的属性列表，您可以打开这些属性以显示其他属性。这是可能的，我将如何去做？

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-02T15:21:52.997

您需要将您的属性“分组”到一个类中，然后应用 TypeConverter：

```
[TypeConverter(typeof(ExpandableObjectConverter))]
public class MyProperties {
  public string Item1 { get; set; }
  public string Item2 { get; set; }
} 
```

然后您的 UserControl 将使用该类而不是它包含的各个属性：

```
public partial class UserControl1 {

  public UserControl1() {
    InitializeComponent();
    MyProperties = new MyProperties();
  }

  public MyProperties MyProperties { get; set; }
} 
```

创建您自己的[TypeConverter](http://msdn.microsoft.com/en-us/library/ayybcxe5.aspx)来处理自定义情况。

# c++ - 升压的替代品：信号

> ID：12692996
> 
> 赞同：2
> 
> 时间：2012-10-02T15:06:18.023
> 
> 标签：c++, signals, boost-signals

> **可能重复：**
> [我应该选择哪个 C++ 信号/插槽库？](https://stackoverflow.com/questions/359928/which-c-signals-slots-library-should-i-choose)

我一直在使用升压信号/信号 2 来允许事件连接/函数调度。

它工作正常，但我有两个问题。

- 这是较小的一个，但处理断开连接可能会很痛苦。我使用可跟踪类来帮助解决这个问题，但它并不能解决所有问题。如果我想在任意时间断开信号，必须跟踪连接也有点麻烦

- 这是更大的一个。没有办法复制信号，这意味着我每次向类添加信号时都需要实现一个复制构造函数，如果我确实复制了该类，它将不再有任何事件挂钩。显而易见的解决方案是让持有的 Signal 成为一个指针，然后它是可复制和可共享的，但这感觉很脏而且形式不好。

鉴于上述情况，我开始寻找替代方案，但上述问题对于信号库来说似乎很常见。我想知道是否有人有解决上述问题的建议；也许是一种直接处理它们的方法。

在开始使用升压信号之前，我也在考虑回到我原来的解决方案。像这样的东西：

```
boost::unordered_map<std::string, boost::function> 
```

boost::function 将代替 slot/callbacks，然后我向持有这个 map 的类添加一个 Dispatch 函数，该函数将循环遍历并调用每个 boost::function。使用这种方法，我可以随时轻松删除回调，并且可以复制地图。有人告诉我这不是一个好方法，但现在看，我真的看不出这里有问题。

此外，现在有了可变参数模板，围绕该地图创建一个小类来处理对地图的 Dispatch/Add/Remove 回调调用应该是一件容易的事。

这是一个不好的方法吗？