# StackOverflow 问答 15789000-15789999

# php - 从数组中正确提取数据

> ID：15789001
> 
> 赞同：0
> 
> 时间：2013-04-03T13:41:39.937
> 
> 标签：php

我正在尝试从以下形式的数组中获取数据：

```
 Array ( [actual-1] => 2 [action-1] => blabla [actual-2] => 1 [action-2] => sss [actual-49] => 3 [action-58] => sasa )

 ID 1 Level 2 action blabla
 ID 2 level 1 action sss
 ID 49 level 3 action sasa 
```

我尝试了以下代码：

```
foreach(array_chunk($array,3,true) as $val){

   foreach($val as $k=>$v){
      if(strpos($k, "actual") !== false){
          $temp = explode("-",$k);
          $id = $temp[1];
          $actual = $v;
      }
      if(strpos($k, "action") !== false){
          $action = $v;
      }
   }
    echo "ID ".$id." Level ".$actual." action ".$action;
    echo "<br>";
} 
```

但我得到的是：

```
ID 2 Level 1 action blabla
ID 49 level 3 action sasa 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:48:38.757

您将数组分块为 3 个元素组，而不是 2 个。将 array_chunk 中的第二个参数更改为 2。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:48:52.060

```
foreach(array_chunk($array,3,true) as $val){ 
```

需要是

```
foreach(array_chunk($array,2,true) as $val){ 
```

# grep - 如何获取 7 位十六进制字符串并仅返回该十六进制字符串？

> ID：15789005
> 
> 赞同：6
> 
> 时间：2013-04-03T13:41:45.580
> 
> 标签：grep

我正在尝试提取文件中所有前导的 7 位十六进制字符串，其中包含以下行：

```
3fce110:: ..\Utilities\c\misc.c(431): YESFREED (120 bytes) Misc 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-03T13:44:29.057

```
egrep -o '^[0-9a-f]{7}\b' file.txt 
```

*   `egrep``grep -E`与;相同 它使用扩展的正则表达式。
*   `-o`仅打印每行的匹配部分。
*   `^`将匹配锚定到行首。
*   `[0-9a-f]{7}`匹配七个十六进制字符。如果要匹配大写字母，请在`A-F`此处添加或添加`-i`标志。
*   `\b`检查单词边界；它确保我们不匹配长度超过 7 位的十六进制数字。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T13:48:03.150

如果文件中的所有行都遵循给定的格式，那么有几个方法：

```
$ grep -o '^[^:]*' file
3fce110

$ awk -F: '{print $1}' file
3fce110

$ cut -d: -f1 file
3fce110

$ sed  's/:.*//' file
3fce110 
```

# jquery - 另一个 Jquery 表单验证问题

> ID：15789013
> 
> 赞同：2
> 
> 时间：2013-04-03T13:42:20.683
> 
> 标签：jquery, jquery-validate

我正在尝试使用 jquery 实现表单验证，但到目前为止无法使其正常工作。我一直在阅读其他几个问题，但似乎没有一个对我有帮助。我正在使用 Jquery 验证插件[http://bassistance.de/jquery-plugins/jquery-plugin-validation/](http://bassistance.de/jquery-plugins/jquery-plugin-validation/) 据我了解，基本思想是为您的表单提供一个 ID，并将 class="required" 添加到特定输入领域，但到目前为止什么都没有发生，它很高兴地发布了我的表格。

我的脚本是：

```
<script>
           $(document).ready(function(){
               $("#validate").validate();
               });
</script> 
```

表格如下所示：

```
<form action="" id="validate"  method="post">
   <?do
    {
    ++$i; ?>
    <button type="button" class="togbut" href="#<?echo $i;?>">Lijst voor <?echo $_SESSION['leerlingen'][$i];?> invullen</button> <br>
    <div id="<?echo $i;?>" style="display:none"> <?
    echo $_SESSION['leerlingen'][$i];  ?>

          <fieldset>
                    <input type='hidden' name='ingevuld' id='ingevuld' value='1'/>
                    <legend>A. Leerprestaties:</legend>
                               <label>de prestaties blijven achter bij de capaciteiten</label>
                               <div><input type="radio" class="required" name="pr_ach_lp13<?echo ++$counter;?>" value="1"></div>
                               <div><input type="radio" class="required" name="pr_ach_lp13<?echo $counter;?>" value="2"></div>
                               <div><input type="radio" class="required" name="pr_ach_lp13<?echo $counter;?>" value="3"></div>
                               <div><input type="radio" class="required" name="pr_ach_lp13<?echo $counter;?>" value="4"></div>
                               <div><input type="radio" class="required" name="pr_ach_lp13<?echo $counter;?>" value="5"></div>
         </fieldset>
    </div>

 <?
    }  while($i<$_SESSION['num_rows']);?>
       <input id="submit" type="submit" value="opslaan">
</form> 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:10:15.900

部分问题似乎是您以无效的方式编写了 JavaScript。

```
 $(document).ready(function(){
         $("#validate").validate();//The instantion of form validator ends here
          onsubmit: true,
          onkeyup: false,
          onfocusout: false,
          onclick: false
          //The options above appear as though they should be part of an object
          //However they are free-floating and not contained in curly braces
          //Nor are they submitted to validate() as a parameter; since they are
          //technically outside the call to validate()
          }); 
```

Dmonix 建议您尝试在没有额外内容的情况下调用验证。像这样：

```
 $(document).ready(function(){
         $("#validate").validate();
        }); 
```

看看这是否有效

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:28:51.507

感谢您的建议，我找到了问题所在。由于我没有收到任何错误消息，我认为它应该在调用 javascript 源。我发现我错过了脚本源的结束标记，所以它没有找到插件。很抱歉浪费您的时间，感谢您的建议！

# asp.net-mvc - 是否可以有多个 RouteCollections 并在运行时根据语言进行切换？

> ID：15789014
> 
> 赞同：2
> 
> 时间：2013-04-03T13:42:22.223
> 
> 标签：asp.net-mvc, globalization

我们在 RegisterRoutes() 中有一个相当大的 RouteCollection 设置，我们需要支持俄语 url。这意味着我们的大多数 MapRoute() url 需要是俄语的。

与其复制受影响的 MapRoute() 调用并将 url 转换为俄语，我想知道是否可以有多个路由集合并根据子域选择在运行时使用哪一个 MVC，例如；“茹。”？

如果没有多个 RouteCollections，随着我们添加越来越多的语言，我们将复制越来越多的路由，这将导致维护问题和路由效率低下。

顺便说一句，所有子域都指向同一个 asp.net mvc 应用程序，我们使用子域元素来全球化资源。

这是一个示例路线及其俄语翻译：

```
routes.MapRoute(
   "Content", // Route name
   "Page/{id}", // URL with parameters
   new
   {
      controller = "Content",
      action = "Show",
      id = String.Empty
   } // Parameter defaults
); 
```

在俄语中：

```
routes.MapRoute(
   "Content", // Route name
   "страница/{id}", // URL with parameters
   new
   {
      controller = "Content",
      action = "Show",
      id = String.Empty
   } // Parameter defaults
); 
```

有几十条受影响的路线，每种支持的语言都会复制它们。目前我认为对子域进行路由约束是最好的方法，但最好为每种语言设置单独的路由集合，并为不受影响的路由设置共享路由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T08:05:11.717

我们使用类似的东西：

```
RouteTable.Routes.MapPageRoute("Language_InfoRoute",
  "{language_code}/{company}/{topic}", 
  "~/content.aspx", true, null, 
  new RouteValueDictionary { { "language_code", "de|fr|en" }, 
  {"company",   "unternehmung|company|entreprise|azienda" } }); 
```

除了将 Page 或 страница 作为单独的路由，您还可以将其作为占位符（在我的示例中为公司）。您可以添加语言代码或仅使用不同版本的页面来检测语言。

# perl - Perl，Net::SSH2，如何从 ssh 读取整个数据？

> ID：15789019
> 
> 赞同：1
> 
> 时间：2013-04-03T13:42:33.050
> 
> 标签：perl, ssh, libssh2

我需要使用 Net::SSH2 读取程序输出。我的问题是隐藏在程序输出底部的一些数据。在 ssh 模式下，我需要在键盘上输入“Return”才能查找下一个。这对于在 perl 脚本中使用很尴尬 =)。我知道 Net::OpenSSH 做得很好，但我确实需要使用 Net::SSH2。有谁知道，我怎样才能得到它？谢谢！

UPD：下面的一些代码

```
my $ch = $ssh2->channel();

$ch->blocking(0);
$ch->shell();

print $ch "dir\n";
print $_ while <$ch>; 
```

在这段代码中，我在底部打印带有终端“--More--”提示的命令输出。Simple Net::OpenSSH "capture" 方法同时返回一个完整的数据：

```
my @dirlist = $ssh->capture('dir'); 
```

是否可以使用 Net::SSH2 做同样的事情？

# requirejs - 在 Durandal 的视图模型中设置断点

> ID：15789025
> 
> 赞同：-1
> 
> 时间：2013-04-03T13:42:48.833
> 
> 标签：requirejs, durandal

如何使用 Google Chrome 的 (F12) 功能在 Durandal 的视图模型中设置断点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:21:58.777

1.  加载要调试的页面
2.  在 Chrome 中按 F12
3.  点击“来源”标签
4.  在左侧的窗格中，您应该能够看到所有不同的视图模型 js 文件
5.  通过单击选择其中一个 js 文件
6.  通过单击源代码视图中的代码行号来设置断点
7.  您可以刷新浏览器页面，您的断点将保持不变

# jquery - 平滑背景图像的视差滚动

> ID：15789026
> 
> 赞同：12
> 
> 时间：2013-04-03T13:42:49.733
> 
> 标签：jquery, css, html, parallax

我做了一些研究并编写了一个简单的 jQuery，它以稍微不同的速度滚动背景到前景，当您向下滚动网站时创建视差效果。

不幸的是，它有点生涩。

这是 HMTL 的基本布局：

```
<body>
    <section>
        Site content goes here.
    </section>
</body> 
```

这是CSS：

```
body {
    background-image: url('../images/bg.png');
    background-repeat: repeat-y;
    background-position: 50% 0;    
} 
```

这是JS：

```
$(window).scroll(function () {
    $("body").css("background-position","50% " + ($(this).scrollTop() / 2) + "px");
}); 
```

[https://jsfiddle.net/JohnnyWalkerDesign/ksw5a0Lp/](https://jsfiddle.net/JohnnyWalkerDesign/ksw5a0Lp/)

很简单，但我的问题是滚动时有点生涩，即使在功能强大的计算机上也是如此。

有没有办法让背景视差动画流畅？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-06-04T14:12:58.110

将转换属性添加到您的 CSS，以便 GPU 可以像这样加速它：

```
body {
    background-image: url('../images/bg.png');
    background-repeat: repeat-y;
    background-position: 50% 0;    
    transition: 0s linear;
    transition-property: background-position;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-03T13:55:07.307

尝试在支持它的浏览器中为可以硬件加速的属性设置动画。与其更改属性，不如`background-position`使用绝对定位`img`，然后使用 CSS 变换更改其位置。

看看[stellar.js](http://markdalgleish.com/projects/stellar.js/)。该插件为您提供了在功能强大的浏览器中使用 CSS 转换制作动画的选项（stellar.js 可以让您为背景图像制作动画，但需要注意的是它在移动设备上无法顺利运行）。它还利用了[requestAnimationFrame](http://paulirish.com/2011/requestanimationframe-for-smart-animating/)，这意味着更少的 CPU、GPU 和内存使用。

如果您认为插件矫枉过正，您至少可以检查所采用的方法并根据您的需要进行调整。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-02-16T05:18:48.803

设置body的css如下：

```
body {
  background-image: url(images/bg.jpg); 
  background-repeat: no-repeat;
  background-attachment: fixed;
  background-position: 0 0;
 } 
```

然后使用Javascript只需获取页面滚动时的pageYOffset，并将其设置为body背景图像的背景位置，如下所示：

```
window.addEventListener('scroll', doParallax);
function doParallax(){
   var positionY = window.pageYOffset/2;
   document.body.style.backgroundPosition = "0 -" + positionY + "px";
} 
```

只需在这里查看我的帖子：http: [//learnjavascripteasily.blogspot.in/](http://learnjavascripteasily.blogspot.in/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-21T21:01:12.643

有时我们不能`<img>`在 div 中使用元素，例如`border-radius`可能会停止工作或`width`大于父级。我面临所有这些问题，我发现的最佳解决方案是使用：

```
transition: 0.5s ease;
transform: translate3d(0, 0, 0); 
```

我使用 GPU 获得了非常漂亮和平滑的视差效果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-03-29T06:25:11.963

为了使其平滑，将图像放在单独的 div 上并使用 transform: translate 移动整个元素 - 然后您将获得非常平滑的结果。

这是一个小例子，做一些不同的事情，但使用 translate 来给你这个想法：

HTML：

```
<div id="wrapper">
     <div id="content">Foreground content</div>
</div> 
```

CSS：

```
@-webkit-keyframes MOVE-BG {
    0% {
        transform: translate(0%, 0%);
        -webkit-transform: translate(0%, 0%);
    }
    50% { 
        transform: translate(-250px, 0%);
        -webkit-transform: translate(-250px, 0%);
    }
    100% {
        transform: translate(0%, 0%);
        -webkit-transform: translate(0%, 0%);
    }
}

#wrapper {
    width: 300px;
    height: 368px;
    overflow: hidden;  
}
#content {
    width: 550px;
    height: 368px;
    background: url(http://www.gstatic.com/webp/gallery/1.jpg) 0% 0% repeat;
    text-align: center;
    font-size: 26px;
    color: #000;

    -webkit-animation-name: MOVE-BG;
    -webkit-animation-duration: 10s;
    -webkit-animation-timing-function: linear;
    -webkit-animation-iteration-count: infinite;
} 
```

和小提琴：http: [//jsfiddle.net/piotku/kbqsLjfL/](http://jsfiddle.net/piotku/kbqsLjfL/)

从javascript（使用jQuery）中，您必须使用类似的东西：

```
$(".element").css("transform", 'translateY(' + ($(this).scrollTop() / 2) + 'px)'); 
```

或在 vanillaJS 中：

```
backgroundElement.style.transform = 'translateY(' + ($(this).scrollTop() / 2) + 'px)'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-03T13:55:22.043

尝试将 更改`.css`为`.animate`。因此，您可以为其设置动画，而不是将 CSS 设置为硬值。

```
$(window).scroll(function () {
    $("body").animate({"background-position":"50% " + ($(this).scrollTop() / 2) + "px"},{queue:false, duration:500});
}); 
```

注意：添加脚本[http://snook.ca/technical/jquery-bg/jquery.bgpos.js](http://snook.ca/technical/jquery-bg/jquery.bgpos.js)

请记住，我还没有测试过它，让我知道它是否有效。

动画背景图片：[http ://snook.ca/archives/javascript/jquery-bg-image-animations](http://snook.ca/archives/javascript/jquery-bg-image-animations)

演示：[http ://snook.ca/technical/jquery-bg/](http://snook.ca/technical/jquery-bg/)

# php - JPGraph（php）线图 - 比例问题

> ID：15789030
> 
> 赞同：0
> 
> 时间：2013-04-03T13:43:01.707
> 
> 标签：php, javascript, mysql, jpgraph

我正在尝试使用 jpgraph 创建折线图。

我在显示图表时遇到问题 - 我收到的错误消息是：“JPGraph 错误：25044 = 无法使用自动缩放，因为无法确定 y 轴的有效最小/最大值（只有空值）。”

我的代码如下：

```
<?php // content="text/plain; charset=utf-8"
session_start();
require_once ('../includes/jpgraph/src/jpgraph.php');
require_once ('../includes/jpgraph/src/jpgraph_line.php');
// Some data
$datay1 = $_SESSION['userValues'];
$d = array();
for($i = 0; $i < 30; $i++) 
    $d[] = date("d", strtotime('-'. $i .' days'));

// Create the Line Graph. 
$graph = new Graph(300,250);
$graph->SetScale("textlin");

$theme_class=new UniversalTheme;

$graph->SetTheme($theme_class);
$graph->img->SetAntiAliasing(false);
$graph->title->Set('Your Performance:');
$graph->SetBox(false);

$graph->img->SetAntiAliasing();

$graph->yaxis->HideZeroLabel();
$graph->yaxis->HideLine(false);
$graph->yaxis->HideTicks(false,false);

$graph->xgrid->Show();
$graph->xgrid->SetLineStyle("solid");
$graph->xaxis->SetTickLabels($d);
$graph->xgrid->SetColor('#E3E3E3');

// Create the first line
$p1 = new LinePlot($datay1);
$graph->Add($p1);
$p1->SetColor("#6495ED");
$p1->SetLegend('Line 1');

$graph->legend->SetFrameWeight(1);

// Output line
$graph->Stroke();

?> 
```

我想我在为 x 轴分配日期时可能出错了（我想显示过去 30 天）。数据使用会话传递并经过测试以确保其中包含实际数据。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-19T15:36:46.877

尝试执行以下操作并查看该网页[http://jpgraph.net/doc/howto2.php](http://jpgraph.net/doc/howto2.php)

> 像往常一样，我们要确保 X 轴的刻度完全覆盖我们的函数，因此我们需要找出沿 X 轴的最小值和最大值，并使用它们手动设置刻度。

```
$n = count($datax);
$xmin = $datax[0];
$xmax = $datax[$n-1]; 
```

> 现在是设置基本图表的时候了。这与我们之前所做的非常相似，唯一的区别是我们使用 SetMajtickPosition() 方法来避免我们不感兴趣的次要刻度的 NULL 参数。

```
$graph->SetScale('linlin',0,0,$xmin,$xmax);
$graph->title->Set('Example with manual tick labels');
$graph->title->SetFont(FF_ARIAL,FS_NORMAL,12);
$graph->xaxis->SetPos('min');
$graph->xaxis->SetMajTickPositions($tickPositions,$tickLabels);
$graph->xaxis->SetFont(FF_TIMES,FS_NORMAL,10);
$graph->yaxis->SetFont(FF_TIMES,FS_NORMAL,10);
$graph->xgrid->Show(); 
```

# jquery - 如何在jQuery中计算父#id的子.class？

> ID：15789033
> 
> 赞同：0
> 
> 时间：2013-04-03T13:43:12.697
> 
> 标签：jquery

你好 Stack Overflowians，

我似乎错误地将 .length 与子选择器 (>) 结合使用。完整的脚本如下，但这是有问题的行：

```
$(id > '.fade-cycle-element').length; 
```

如果我只是通过 .class 选择，jQuery 返回页面上*所有*`$('.fade-cycle-element').length`匹配元素的计数，而不是特定父 #id 的匹配子元素的数量。如果我使用上面的选择器方法，jQuery 返回 0。

 *我究竟做错了什么？非常感谢您的帮助。

最亲切的问候，

./ndm

```
/* This script takes a set of elements (e.g., images) and rotates them according to a 

specified rate.
 * 
 * Example HTML:
 * <div class="fade-cycle-element-wrapper" data-rate="4000">
 *   <img class="fade-cycle-element" src="01.jpg" />
 *   <img class="fade-cycle-element" src="02.jpg" />
 *   <img class="fade-cycle-element" src="03.jpg" />
 * </div>
 *
 * The idea for this script is based on Brian McNitt's rotating image script:
 * 
 *   http://trendmedia.com/news/infinite-rotating-images-using-jquery-javascript
 *   
 *   Copyright (c) 2010 TrendMedia Technologies, Inc., Brian McNitt. 
 *   All rights reserved.
 *    
 *   Released under the GPL license
 *   http://www.opensource.org/licenses/gpl-license.php
 *   
 *   **********************************************************************
 *   This program is distributed in the hope that it will be useful, but
 *   WITHOUT ANY WARRANTY; without even the implied warranty of
 *   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. 
 *   **********************************************************************
 * 
 */

function elementRotate(elemID) {

  //get cycle rate and set derivatives
  var id = '#' + elemID;
  var cycle = $(id).data('rate');
  var start = (cycle*.25);
  var fade = (cycle*.25);

  //queue up the elements and start the cycle
  var elements = $(id > '.fade-cycle-element').length;
  var current = 0;
  $(id > '.fade-cycle-element').eq(current).fadeIn(start);

  //cycle through elements    
  var engine = setInterval(function(){
    $(id > '.fade-cycle-element').eq(current).fadeOut(fade);
    if (current == (elements - 1)) {
      current = 0;
    } else {
      current++;
    }
    $(id > '.fade-cycle-element').eq(current).fadeIn(fade);
  }, cycle);

};

$(window).load(function() {

  var elemSetCount = 1;
  $('.fade-cycle-element-wrapper').each(function() {
    $(this).attr("id", "elemSet" + elemSetCount++);
    var elemSetID = $(this).attr('id');
    elementRotate(elemSetID)
  });

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T13:45:43.750

您在这里进行比较，而不是编写选择器！您正在比较`id`字符串`'.fade-cycle-element'`并将布尔结果传递给 jQuery 函数。

你应该这样做：

```
$(id + ' > .fade-cycle-element').length; 
```*

# r - 没有包的命名空间

> ID：15789036
> 
> 赞同：22
> 
> 时间：2013-04-03T13:43:23.240
> 
> 标签：r, module, namespaces

在重组我的代码库时，我想清理我的代码共享机制。到目前为止，我正在使用`source`许多小型、大部分独立的功能模块。

然而，这种方法存在许多问题，其中包括

*   缺乏循环测试（意外的循环`source`链），
*   `chdir=TRUE`正确指定包含路径（参数、硬编码路径）所需的复杂语法，
*   名称冲突的可能性（重新定义对象时）。

理想情况下，我想获得与 Python 模块机制类似的东西。R 包机制在这里会有点矫枉过正： **我*不想*生成嵌套路径层次结构、包含大量元数据的多个文件并手动构建包**只是为了获得一个小的、独立的、可重用的代码模块。

现在我正在使用一个代码片段，它可以让我解决上面提到的前两个问题。包含的语法如下：

```
import(functional)
import(io)
import(strings) 
```

…并且模块被定义为驻留在本地路径中的简单源文件。[的定义`import`很简单](https://gist.github.com/klmr/5301304)，但我无法解决第三点：我想将模块导入到单独的命名空间中，但据我所知，命名空间查找机制与包非常紧密。没错，我可以覆盖``::``or`getExportedValue`并且可能`asNamespace`，`isNamespace`但这感觉很脏，并且有可能破坏其他包。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-03T17:36:38.853

这是一个完全自动化包创建、编译和重新加载的函数。正如其他人所指出的那样，实用程序功能`package.skeleton()`已经`devtools::load_all()`让您*几乎*一路走到了那里。这只是结合了它们的功能，`package.skeleton()`用于在临时目录中创建源目录，该目录在处理完成后会被清理`load_all()`。

您需要做的就是指向要从中读取函数的源文件，并为包命名：`import()`其余的为您完成。

```
import <- function(srcFiles, pkgName) {
    require(devtools)
    dd <- tempdir()
    on.exit(unlink(file.path(dd, pkgName), recursive=TRUE))
    package.skeleton(name=pkgName, path = dd, code_files=srcFiles)
    load_all(file.path(dd, pkgName))
}

## Create a couple of example source files
cat("bar <- function() {print('Hello World')}", file="bar.R")
cat("baz <- function() {print('Goodbye, cruel world.')}", file="baz.R")

## Try it out
import(srcFiles=c("bar.R", "baz.R"), pkgName="foo")

## Check that it worked
head(search())
# [1] ".GlobalEnv"        "package:foo"       "package:devtools"
# [4] "package:stats"     "package:graphics"  "package:grDevices"
bar()
# [1] "Hello World"
foo::baz()
# [1] "Goodbye, cruel world." 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-04-03T14:02:00.793

康拉德，严肃地说，是对需求的回答

> 获得一个小型、独立、可重用的代码模块

*是*创建一个包。这个福音已经在 SO 和其他地方重复*了无数次。*实际上，您可以用最少的 fuzz 创建最少的包。

另外，运行后

```
 setwd("/tmp")
 package.skeleton("konrad") 
```

并删除一个临时文件，我只剩下

```
 edd@max:/tmp$ tree konrad/
 konrad/
 ├── DESCRIPTION
 ├── man
 │   └── konrad-package.Rd
 └── NAMESPACE

 1 directory, 3 files
 edd@max:/tmp$ 
```

真的有**那么**繁重吗？

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2013-04-04T12:23:32.137

包只是文件存储位置的约定（R 文件 in `R/`，文档 in `man/`，编译代码 in `src`，数据 in `data/`）：如果您有多个文件，则最好遵守既定约定。换句话说，使用包比不使用包更容易，因为你不需要思考：你可以利用现有的约定，每个 R 用户都会明白发生了什么。

一个最小的包真正需要的是一个`DESCRIPTION`文件，它说明了包的作用，谁可以使用它（许可证），以及如果有问题可以联系谁（维护者）。这有点开销，但不是主要的。一旦你写好了，你只需根据需要填写额外的目录 - 不需要笨拙的`package.skeleton()`.

也就是说，用于处理包的内置工具很麻烦——你必须重新构建/重新安装包，重新启动 R 并重新加载包。这就是`devtools::load_all()`Rstudio 的 build & reload 发挥作用的地方——它们对包使用相同的规范，但提供了从源代码更新包的更简单方法。您当然可以使用其他答案提供的代码片段，但为什么不使用数百（至少数十个）R 开发人员使用的经过良好测试的代码呢？

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-04-03T15:34:29.103

`import`我对 OP 问题的评论不太正确，但我认为对函数的 这种重写可以解决问题。`foo.R`并且`bar.R`是当前工作目录中的文件，其中包含一个函数 ( `baz`)，该函数打印如下所示的输出。

```
import <- function (module) {
  module <- as.character(substitute(module))
  # Search path handling omitted for simplicity.
  filename <- paste(module, 'R', sep = '.')
  # create imports environment if it doesn't exist
  if ("imports" %in% search())
    imports <- as.environment(match("imports",search()))
  # otherwise get the imports environment
  else
    imports <- attach(NULL, name="imports")
  if (module %in% ls("imports"))
    return()
  # create a new environment (imports as parent)
  env <- new.env(parent=imports)
  # source file into env
  sys.source(filename, env)
  # ...and assign env to imports as "module name"
  assign(module, env, imports)
}
setwd(".")
import(foo)
import(bar)
foo$baz()
# [1] "Hello World"
bar$baz()
# [1] "Buh Bye" 
```

请注意，`baz()`它本身不会被发现，但 OP 似乎`::`无论如何都想要明确性。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2013-04-03T14:36:21.817

我完全同情@Dirk 的回答。制作最小包所涉及的少量开销似乎值得遵循“标准方式”。

但是，想到的一件事是`source`' 的`local`论点，让您可以将源放入一个`environment`，您可以像命名空间一样使用它，例如

```
assign(module, new.env(parent=baseenv()), envir=topenv())
source(filename, local=get(module, topenv()), chdir = TRUE) 
```

要使用简单的语法访问这些导入的环境，请给这些导入环境一个新类（例如，'import'），并使其成为`::`泛型，默认为何`getExportedValue`时`pkg`不存在。

```
import <- function (module) {
    module <- as.character(substitute(module))
    # Search path handling omitted for simplicity.
    filename <- paste(module, 'R', sep = '.')

    e <- new.env(parent=baseenv())
    class(e) <- 'import'
    assign(module, e, envir=topenv())
    source(filename, local=get(module, topenv()), chdir = TRUE)
}

'::.import' <- function(env, obj) get(as.character(substitute(obj)), env)
'::' <- function(pkg, name) {
    pkg <- as.character(substitute(pkg))
    name <- as.character(substitute(name))
    if (exists(pkg)) UseMethod('::')
    else getExportedValue(pkg, name)
} 
```

## 更新

下面是一个更安全的选项，它可以防止在加载的包包含与正在访问的包同名的对象时出错`::`。

```
'::' <- function(pkg, name) {
    pkg.chr <- as.character(substitute(pkg))
    name.chr <- as.character(substitute(name))
    if (exists(pkg.chr)) {
        if (class(pkg) == 'import')
            return(get(name.chr, pkg))
    }
    getExportedValue(pkg.chr, name.chr)
} 
```

这将给出正确的结果，例如，如果您加载`data.table`了 ，并随后尝试使用 访问其对象之一`::`。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2016-03-16T13:24:33.413

我已经实现了一个全面的解决方案并将其作为一个包发布，'<a href="https://github.com/klmr/box" rel="nofollow noreferrer">box'。

在内部，“盒子”模块使用类似于包的方法；也就是说，它将代码加载到专用的命名空间环境中，然后将选定的符号导出到返回给用户的模块环境中，并且可以选择附加。与包的主要区别在于模块更轻量级且更易于编写（*每个 R 文件*都是其自己的模块），并且可以嵌套。

该软件包的使用[在其网站上](https://klmr.me/box/articles/box.html)有详细描述。

# tags - 是否有 Wordnet 相似性度量的替代方法

> ID：15789037
> 
> 赞同：1
> 
> 时间：2013-04-03T13:43:30.630
> 
> 标签：tags, semantics, wordnet

我想测量标签之间的语义相似度。是否有替代 Wordnet 相似性度量的方法？有效性至关重要。

我读到对于从 Flickr 抓取的图像，最好使用 Flickr 距离，但我没有找到足够的文档或实现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T13:05:31.750

为什么你不能用 WordNet 来做这个？如果您的输入是文字，WordNet 对这些文字的覆盖范围相当好，并且可能会帮助您入门。WordNet::Similarity ( [http://wn-similarity.sourceforge.net](http://wn-similarity.sourceforge.net) ) 可以为您做很多这样的事情。

祝你好运，特德

# c# - 序列化对象消失（BinaryFormatter）

> ID：15789041
> 
> 赞同：3
> 
> 时间：2013-04-03T13:43:39.097
> 
> 标签：c#, .net, serialization, binaryformatter

**背景**

我有一个需要序列化的对象，以便传输到高性能计算集群以供以后使用

以前，我为我的对象使用了开箱即用的二进制格式化程序，它代表了一个统计形状模型，并且一切都很好

我的对象变得更加复杂，我决定通过实现 ISerializable 来自定义序列化过程。我继续支持以前格式存储的数据

**问题**

我的问题是一个特定的值似乎可以成功序列化，但是当我尝试反序列化时，它的值总是 null 。（没有错误，只是一个非常不愉快，无用的空值）

当我在序列化点中断时，我可以通过检查 SerializationInfo 看到该对象已添加到 SerializationInfo 中，并且它具有值（这没什么花哨的，但将在下面发布它的代码）

正在调用序列化构造函数（我也在那里放了一个断点），但是当我检查构造函数的 SerializationInfo 对象时，它没有数据（它确实有一个条目，只是没有数据）

**更新-**[在此处](https://docs.google.com/file/d/0B_ITQGuqH0C4bDJoZXJGRzd0aUU/edit?usp=sharing)下载控制台应用程序。感谢您的关注

或者，在这里查看代码：

**编码**

导致问题的类：（PointProfiles 属性是有问题的对象）

```
 [Serializable]
    public class TrainingSet : ITrainingSet, ISerializable
    {
        public Dictionary<Tuple<int, int>, IPointTrainingSet> PointProfiles { get; set; }

        public PrincipalComponentAnalysis PointPCA { get; set; }

        public double[] AlignedMean { get; set; }

        public List<Tuple<string, ITransform>> Transforms { get; set; }

        public string[] FileNames { get; set; }

        private static Lazy<BinaryFormatter> formatter = new Lazy<BinaryFormatter>();

        public static ITrainingSet Load(Guid modelId)
        {
            ModelSample s = DataProxy<ModelSample>.AsQueryable().Where(m => m.ModelId == modelId).SingleOrDefault();
            if (s == null)
                return null;

            byte[] raw = s.Samples.ToArray();
            using (MemoryStream ms = new MemoryStream(raw))
                return (ITrainingSet)formatter.Value.Deserialize(ms);

        }

        void ISerializable.GetObjectData(SerializationInfo info, StreamingContext context)
        {
            info.AddValue("pca", PointPCA);

            info.AddValue("tp1", PointProfiles.Select(pp => pp.Key.Item1).ToArray());
            info.AddValue("tp2", PointProfiles.Select(pp => pp.Key.Item2).ToArray());

            var x = PointProfiles.Select(pp => (ProfileModel)pp.Value).ToArray();
            info.AddValue("ipts", x, typeof(ProfileModel[]));

            info.AddValue("am", AlignedMean);

            info.AddValue("tname", Transforms.Select(t => t.Item1).ToArray());
            info.AddValue("tval", Transforms.Select(t => t.Item2).ToArray());
            info.AddValue("fnames", FileNames);
            info.AddValue("version", 1);  // nb
        }

        public TrainingSet(SerializationInfo info, StreamingContext context)
        {
            int version = 0;
            foreach(SerializationEntry s in info)
            {
                if(s.Name == "version")
                    version = (int)s.Value;
            }

            switch(version)
            {
                case 0:
                    // old (default binary formatter)
                    PointPCA = info.GetValue("<PointPCA>k__BackingField", typeof(PrincipalComponentAnalysis)) as PrincipalComponentAnalysis;
                    PointProfiles = info.GetValue("<PointProfiles>k__BackingField", typeof(Dictionary<Tuple<int, int>, IPointTrainingSet>)) as Dictionary<Tuple<int, int>, IPointTrainingSet>;
                    AlignedMean = info.GetValue("<AlignedMean>k__BackingField", typeof(double[])) as double[];
                    Transforms = info.GetValue("<Transforms>k__BackingField", typeof(List<Tuple<string, ITransform>>)) as List<Tuple<string, ITransform>>;
                    FileNames = info.GetValue("<FileNames>k__BackingField", typeof(string[])) as string[];

            //stats.PointPCA = pointPCA;
            //stats.PointProfiles = pointProfiles;
            //stats.AlignedMean = alignedMean;
            //stats.Transforms = transforms;
            //stats.FileNames = fileNames;

                    break;

                case 1:
                    FileNames = info.GetValue("fnames", typeof(string[])) as string[];

                    var t = info.GetValue("tval", typeof(ITransform[])) as ITransform[];
                    var tn = info.GetValue("tname", typeof(string[])) as string[];

                    Transforms = new List<Tuple<string, ITransform>>();
                    for(int i = 0;i < tn.Length;i++)
                        Transforms.Add(new Tuple<string,ITransform>(tn[i], t[i]));

                    AlignedMean = info.GetValue("am", typeof(double[])) as double[];

                    PointPCA = info.GetValue("pca", typeof(PrincipalComponentAnalysis)) as PrincipalComponentAnalysis;

                    var ipts = info.GetValue("ipts", typeof(ProfileModel[]));

                    foreach (var x in info) 
                    {
                        int a = 0;
                        a++;   // break point here, info has an entry for key "ipts", but it's null  (or rather an array of the correct length, and each element of the array is null)
                    }

                    var xxx = ipts as IPointTrainingSet[];

                    var i2 = info.GetValue("tp2", typeof(int[])) as int[];

                    var i1 = info.GetValue("tp1", typeof(int[])) as int[];

                    PointProfiles = new Dictionary<Tuple<int, int>, IPointTrainingSet>();
                    for (int i = 0; i < i1.Length; i++)
                        PointProfiles.Add(new Tuple<int, int>(i1[i], i2[i]), xxx[i]);

                    break;

                default:
                    throw new NotImplementedException("TrainingSet version " + version + " is not supported");
            }

        }

        public TrainingSet()
        {

        }
    } 
```

Profile 类（也是可序列化的，这是 ProfileModel 的基类，下面列出）

```
 [Serializable]
    public class Profile : ISerializable, IProfile
    {
        public double Angle { get; private set; }
        public int PointIndex { get; private set; }
        public int Level { get; set; }

        public double[,] G { get; private set; }
        public virtual double[,] GBar { get { throw new InvalidOperationException(); } }

        public virtual int Width { get { return G.Length; } }

        public Profile(int level, int pointIndex, double angle, double[,] G)
        {
            this.G = G;
            PointIndex = pointIndex;
            Level = level;
            Angle = angle;
        }

        // deserialization
        public Profile(SerializationInfo info, StreamingContext context)
        {
            PointIndex = info.GetInt32("p");
            Angle = info.GetDouble("a");
            G = (double[,])info.GetValue("g", typeof(double[,]));

            Level = info.GetInt32("l");

            //_pca = new Lazy<PrincipalComponentAnalysis>(Pca);
        }

        // serialization
        public void GetObjectData(SerializationInfo info, StreamingContext context)
        {
            info.AddValue("p", PointIndex);
            info.AddValue("a", Angle);
            info.AddValue("g", G);
            info.AddValue("l", Level);
        }

    } 
```

和（最后） ProfileModel 类：

```
[Serializable]
public class ProfileModel : Profile, ISerializable, IPointTrainingSet
{

    public IProfile MeanProfile { get; private set; }

    private ProfileModel(int level, int PointIndex, IProfile[] profiles)
        : base(level, PointIndex, 0, null)
    {
        double[,] m = Matrix.Create<double>(profiles.Length, profiles[0].G.Columns(), 0);

        int idx = 0;
        foreach (var pg in profiles.Select(p => p.G.GetRow(0)))
            m.SetRow(idx++, pg);

        Profile meanProfile = new Profile(level, PointIndex, 0, m.Mean().ToMatrix());
        MeanProfile = meanProfile;
    }

    // deserialization
    public ProfileModel(SerializationInfo info, StreamingContext context) : base(info, context) {
        var ps = info.GetValue("mp", typeof(Profile));

        MeanProfile = (IProfile)ps;
    }

    // serialization
    public new void GetObjectData(SerializationInfo info, StreamingContext context)
    {
        info.AddValue("mp", MeanProfile, typeof(Profile));
        base.GetObjectData(info, context);
    }

    public override double[,] GBar
    {
        get
        {
            return MeanProfile.G;
        }
    }

    public override int Width { get {
        return GBar.Columns();
    } }
} 
```

如果您能发现我做错任何可能导致这种情况发生的事情，我将非常感激:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-05T19:33:45.443

数组首先反序列化，然后执行内部反序列化。在遍历 ProfileModel 数组时，它的内容还没有被反序列化。

您可以通过实现 IDeserializationCallback （或通过将 OnDeserilized 属性分配给应在反序列化完成时调用的方法）来解决此问题。OnDeserialzation 方法在整个对象图反序列化后调用。

您需要将数组存放在私有字段中：

```
private int []i1;
private int []i2;
private ProfileModel []  ipts; 
```

在反序列化下执行以下操作：

```
ipts = info.GetValue("ipts", typeof(ProfileModel[]));
i2 = info.GetValue("tp2", typeof(int[])) as int[];
i1 = info.GetValue("tp1", typeof(int[])) as int[]; 
```

并实现 IDeserializationCallback：

```
public void OnDerserilization(object sender)
{
  PointProfiles = new Dictionary<Tuple<int, int>, IPointTrainingSet>();

  for (int i = 0; i < i1.Length; i++)
     PointProfiles.Add(new Tuple<int, int>(i1[i], i2[i]), ipts[i]);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T19:39:12.770

我可以通过让 .NET 处理 List 和 Dictionary 序列化而不是尝试手动操作来实现这一点：

```
void ISerializable.GetObjectData(SerializationInfo info, StreamingContext context)
{
    info.AddValue("pca", PointPCA);
    info.AddValue("pps", PointProfiles);
    info.AddValue("am", AlignedMean);
    info.AddValue("transforms", Transforms);
    info.AddValue("fnames", FileNames);
}

public TrainingSet(SerializationInfo info, StreamingContext context)
{
    PointPCA = info.GetValue("pca", typeof(PrincipalComponentAnalysis)) as PrincipalComponentAnalysis;
    Transforms = (List<Tuple<string, ITransform>>)info.GetValue("transforms", typeof(List<Tuple<string, ITransform>>));
    AlignedMean = info.GetValue("am", typeof(double[])) as double[];
    PointProfiles = (Dictionary<Tuple<int, int>, IPointTrainingSet>)info.GetValue("pps", typeof(Dictionary<Tuple<int, int>, IPointTrainingSet>));
    FileNames = info.GetValue("fnames", typeof(string[])) as string[];
} 
```

你有一个非常复杂的对象图。我尝试打破 and 的构造函数`Profile`并`ProfileModel`得到了一些奇怪的结果，但是这个简单的版本似乎可以工作。

# asp.net-mvc-4 - MVC4 - WebApi - 作为现有 MVC4 应用程序的一部分实现？

> ID：15789043
> 
> 赞同：1
> 
> 时间：2013-04-03T13:43:39.243
> 
> 标签：asp.net-mvc-4, asp.net-web-api

我是 MVC4 的新手-WebApi。我只是想在我现有的 MVC 应用程序中实现 WebApi。

在现有的 MVC4Application 中，我想添加派生自 ApiController 类的控制器类。这个新的控制器动作将在所有页面上调用以返回数据。
那可能吗？

# java - 使用带有 JSON 正文的 Restlet 进行多部分 POST 处理

> ID：15789047
> 
> 赞同：0
> 
> 时间：2013-04-03T13:43:49.340
> 
> 标签：java, rest, restlet

我正在使用 Restlet 编写一个 REST API。我主要使用 JSON 作为所有 POST 请求的主体，因此在我的代码中，普通的 POST 如下所示：

```
@Post("json")
public Representation storeValue(String value){
JSONObject json = (JSONObject) JSONValue.parse(value);
String uname = (String)json.get("name");
...} 
```

我从请求的正文中获取 JSON 字符串并对其进行解析，完成我的工作并返回响应表示。

在这里我想做一件事，我有一个文件（它是一个 xml，我猜它可以复制粘贴到一个 json 键：值但我宁愿避免这种情况），它必须与 JSON 同时发送. 我的想法是请求我的 api 用户发送一个多部分请求，正文为普通 JSON 加上一个附件。

我不太确定如何做到这一点，我找到了 FileUpload Restlet 扩展，但它的完整示例很少，所以我不太确定如何使用它。

本质上，问题是如何在 Restlet 2+ 中从 Rest 多部分请求中检索 Body 和 File。

抱歉有点含糊，我在那里很迷茫。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T10:51:13.737

您将需要添加异常处理，但我已经成功提交了“multipart/form-data”表单：

```
@Put
public Representation uploadFile(final Representation representation){

List<FileItem> items = new RestletFileUpload(
        new DiskFileItemFactory()).parseRepresentation(representation);

... 
```

这为您提供了 isFormField() 为 false 的条目（或那些）的列表项，然后我可以访问媒体类型（从 getContentType() 作为 FileItem 中的字符串）和底层 InputStream 作为文件内容。您可能能够比直接访问 Stream 更有趣，但这就是我所需要的。

@Put vs @Post 是我留给你的选择

# android - 裁剪位图图像

> ID：15789049
> 
> 赞同：63
> 
> 时间：2013-04-03T13:43:51.177
> 
> 标签：android, crop, image-editing

**如何裁剪位图图像？**这是我的问题，我尝试了一些使用意图的概念，但仍然失败..

我有一个要裁剪的位图图像！！

这是代码：

```
 Intent intent = new Intent("com.android.camera.action.CROP");  
                      intent.setClassName("com.android.camera", "com.android.camera.CropImage");  
                      File file = new File(filePath);  
                      Uri uri = Uri.fromFile(file);  
                      intent.setData(uri);  
                      intent.putExtra("crop", "true");  
                      intent.putExtra("aspectX", 1);  
                      intent.putExtra("aspectY", 1);  
                      intent.putExtra("outputX", 96);  
                      intent.putExtra("outputY", 96);  
                      intent.putExtra("noFaceDetection", true);  
                      intent.putExtra("return-data", true);                                  
                      startActivityForResult(intent, REQUEST_CROP_ICON); 
```

有人可以帮我解决这个问题吗@Thanks

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2013-04-03T14:12:58.753

我用这种方法裁剪图像，效果很好：

```
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.xyz);

Bitmap resizedBmp = Bitmap.createBitmap(bmp, 0, 0, yourwidth, yourheight); 
```

`createBitmap()`将`bitmap`, `start X`, `start Y`, `width`&`height`作为参数。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2015-07-29T10:37:39.260

如果您想切片/裁剪特别超出范围的区域，则使用上面的答案**不起作用**！使用此代码，您将始终获得所需的大小 - 即使源代码较小。

```
//  Here I want to slice a piece "out of bounds" starting at -50, -25
//  Given an endposition of 150, 75 you will get a result of 200x100px
Rect rect = new Rect(-50, -25, 150, 75);  
//  Be sure that there is at least 1px to slice.
assert(rect.left < rect.right && rect.top < rect.bottom);
//  Create our resulting image (150--50),(75--25) = 200x100px
Bitmap resultBmp = Bitmap.createBitmap(rect.right-rect.left, rect.bottom-rect.top, Bitmap.Config.ARGB_8888);
//  draw source bitmap into resulting image at given position:
new Canvas(resultBmp).drawBitmap(bmp, -rect.left, -rect.top, null); 
```

......你就完成了！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2017-06-14T08:46:12.577

我在裁剪时遇到了类似的问题，在尝试了多种方法后，我发现了这个对我来说很有意义的方法。此方法仅将图像裁剪为方形，我仍在处理圆形（请随意修改代码以获得所需的形状）。

所以，首先你有你想要裁剪的位图：

```
Bitmap image; //you need to initialize it in your code first of course 
```

图像信息存储在一个 int [ ] 数组中，只不过是一个包含每个像素颜色值的整数数组，从图像的左上角开始，索引为 0，到右下角结束，索引为 N . 您可以使用带有各种参数的 Bitmap.getPixels() 方法获取此数组。

我们需要方形，因此我们需要缩短边中较长的边。此外，为了保持图像居中，需要在图像的两侧进行裁剪。希望这张图片能帮助你理解我的意思。 [裁剪的视觉表示。](https://i.stack.imgur.com/SogIs.png) 图像中的红点代表我们需要的初始像素和最终像素，带有破折号的变量在数值上等于没有破折号的相同变量。

现在终于代码：

```
int imageHeight = image.getHeight(); //get original image height
int imageWidth = image.getWidth();  //get original image width
int offset = 0;

int shorterSide = imageWidth < imageHeight ? imageWidth : imageHeight;
int longerSide = imageWidth < imageHeight ? imageHeight : imageWidth;
boolean portrait = imageWidth < imageHeight ? true : false;  //find out the image orientation
//number array positions to allocate for one row of the pixels (+ some blanks - explained in the Bitmap.getPixels() documentation)
int stride = shorterSide + 1; 
int lengthToCrop = (longerSide - shorterSide) / 2; //number of pixel to remove from each side 
//size of the array to hold the pixels (amount of pixels) + (amount of strides after every line)
int pixelArraySize = (shorterSide * shorterSide) + (shorterImageDimension * 1);
int pixels = new int[pixelArraySize];

//now fill the pixels with the selected range 
image.getPixels(pixels, 0, stride, portrait ? 0 : lengthToCrop, portrait ? lengthToCrop : 0, shorterSide, shorterSide);

//save memory
image.recycle();

//create new bitmap to contain the cropped pixels
Bitmap croppedBitmap = Bitmap.createBitmap(shorterSide, shorterSide, Bitmap.Config.ARGB_4444);
croppedBitmap.setPixels(pixels, offset, 0, 0, shorterSide, shorterSide);

//I'd recommend to perform these kind of operations on worker thread
listener.imageCropped(croppedBitmap);

//Or if you like to live dangerously
return croppedBitmap; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-02-22T07:53:30.477

要从左侧和右侧裁剪具有给定宽度的位图，只需使用此代码

`int totalCropWidth = "your total crop width"; int cropingSize = totalCropWidth / 2; Bitmap croppedBitmap = Bitmap.createBitmap(yourSourceBitmap, cropingSize ,0,yourSourceBitmapwidth-totalCropWidth , yourheight);`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-15T05:35:41.510

我扩展了@sankettt 的方法，当你想缩小一个大的位图并裁剪它以适合你的 ImageView 大小时

**使用这个方法：**

```
/**
 * crop a img with new expected size
 * @param src
 * @param newSize
 * @return
 */
public static Bitmap scaleAndGenerateBmpWithNewSize(Bitmap src, SizeManager newSize) {
    Bitmap bitmapRes;
    int imageWidth = src.getWidth();
    int imageHeight = src.getHeight();

    float newWidth = newSize.width;
    float scaleFactor = newWidth / imageWidth;
    int newHeight = (int) (imageHeight * scaleFactor);
    bitmapRes = Bitmap.createScaledBitmap(src, (int) newWidth, newHeight, true);
    bitmapRes = Bitmap.createBitmap(bitmapRes, 0, 0, (int) newWidth, (int) newSize.height);
    return bitmapRes;
} 
```

**尺寸管理器类：**

```
public class SizeManager {
    public float width;
    public float height;

    public SizeManager() {
    }

    public SizeManager(float width, float height) {
        this.width = width;
        this.height = height;
    }

    public void set(float width, float height) {
        this.width = width;
        this.height = height;
    }

    public float getWidth() {
        return width;
    }

    public void setWidth(float width) {
        this.width = width;
    }

    public float getHeight() {
        return height;
    }

    public void setHeight(float height) {
        this.height = height;
    }
} 
```

**用法：**

```
Bitmap bitmap = BitmapFactory.decodeResource(getResources(), R.drawable.src);
imgView.setImageBitmap(scaleAndGenerateBmpWithNewSize(bitmap, new SizeManager(100, 100))); 
```

# tsql - 使用 LEN() 将值传递给 RIGHT()

> ID：15789050
> 
> 赞同：0
> 
> 时间：2013-04-03T13:43:53.347
> 
> 标签：tsql

我有一个包含 [Work Phone] (nvarchar) 列的表。使用该数据库的软件允许用户输入任何字符，因此很多列都包含诸如“ **555-555-5555 Ext. 1234 Bob Jones** ”之类的内容。我唯一需要的是数字，我打算将电话和分机分成单独的列。在运行一个函数和其他一些事情之后，我只剩下电话和分机号码了。所有空格和字母均已删除（例如 55555555551234）。

我尝试拆分的方式是，我首先要通过计算字段中的字符总数（在我的示例中为**14**）来获取扩展名，然后将该数字减少 10 （在电话号码（不包括国家代码））。因为扩展名可能介于 1-5 个字符之间，所以我尝试使用 LEN() 来获取此计数，然后将其减少 10。

```
SELECT RIGHT([Table].[Column], LEN([Table].[Column]) -10)
FROM [Table] 
```

我得到的是“传递给 RIGHT 函数的长度参数无效。”

我不完全理解这个问题，因为如果我只是做类似的事情：

```
SELECT LEN([Table].[Column]) -10
SELECT LEN('55555555551234') -10 
```

我得到了预期的值 4 。

将此参数传递给 RIGHT 的正确方法是什么，以便我可以得到我想要的（或者是否有更好的方法来做到这一点）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:52:21.853

表中的所有项目都大于或等于 10？

```
SELECT RIGHT(55555555551234, LEN(55555555551234) -10)
SELECT RIGHT(5555555555, LEN(5555555555) -10)
SELECT RIGHT(55555555, LEN(55555555) -10) 
```

尝试

```
SELECT  CASE WHEN LEN([Table].[Column)]) > 10
   THEN RIGHT([Table].[Column], LEN([Table].[Column]) - 10)
   END
   FROM    [Table] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:59:32.597

发生错误是因为减去 10 有时会返回负数。您将需要在其周围放置一个案例声明。

IE。

```
SELECT 
  RIGHT([TABLE].[Column], 
    CASE when LEN([TABLE].[Column])-10 >= 0 then 
        LEN([TABLE].     [Column])-10 
    ELSE LEN([TABLE].[Column]) 
    END) 
FROM [TABLE] 
```

当然，还有其他方法可以使用 CASE，这只是一个示例，向您展示错误的位置；）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:02:32.283

根据字符串模式，您可以使用 PARSENAME 将其分解

```
DECLARE @foo varchar(100) = '555-555-5555 Ext. 1234 Bob Jones';
SELECT @foo = REPLACE(REPLACE(REPLACE(@foo, 'Ext.', ' '), '  ', ''), ' ', '.');
SELECT
    @foo,
    PARSENAME(@foo, 1),
    PARSENAME(@foo, 2),
    PARSENAME(@foo, 3),
    PARSENAME(@foo, 4) 
```

这取决于名称部分的构造方式

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:35:25.160

您可以尝试使用 STUFF 函数来获取扩展名：

```
SELECT STUFF('55555555551234',1,10,'') 
```

它也适用于较短的字符串。

# r - 按区域性别和年龄在 R 中重新创建 Stata 命令：keep if (Infected==1) | ((_n<=1*ncases) & (感染==0))

> ID：15789053
> 
> 赞同：1
> 
> 时间：2013-04-03T13:43:59.890
> 
> 标签：r, stata

我想在 R 中重新创建这个 Stata 命令

```
 by Area Sex Age: keep if (Infected==1) | ((_n<=1*ncases) & (Infected==0)) 
```

* * *

这是一个匹配的病例对照研究

我的数据框包含 193 个案例和每组可变数量的控件（区域性别和年龄）。我正在尝试根据区域性别和年龄分组为每个案例匹配 1 个随机对照。

**ncases**是我的数据框中的一个整数，表示每组中的病例数（区域性别年龄）

上面的命令行在 Stata 中运行良好。

但是，我编写的 R 代码仅适用于第一组：

```
dat5 <- subset(dat4,by=list(Area,Sex,Age),(Infected=1 | 
                                        ((seq(dim(dat4)[1]))<=1*ncases & Infected==0))) 
```

这是我的数据框 dat4: Infected=1 是一个案例，infected=0 是一个控件。

```
 Area  Sex Age  CensusNo   Animals Infected ncases 
18825   1     1   23   1023224    0       0        1 
18826   1     1   23   1024109    1       0        1 
18827   1     1   23   1024163    0       1        1 
41428   7     2   50   1047107    1       0        1 
41429   7     2   50   1047029    1       0        1 
41430   7     2   50   1046901    1       1        1 
41439   5     1   36   1047037    1       0        2 
41440   5     1   36   1047127    1       0        2 
41441   5     1   36   1047125    1       0        2 
41442   5     1   36   1047005    1       0        2 
41443   5     1   36   1046994    0       1        2 
41444   5     1   36   1046972    0       1        2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T02:39:09.623

一个`data.table`解决方案。

```
library(data.table)
ddd <- data.table(dat4)
ddd[, {
  # coerce integer Infected to logical
  # not really necessary,  but for robustness
  ii <- as.logical(Infected)
  # if Infected == 1, then ii == TRUE
  if(ii){ # if TRUE, keep all cases
    .SD
    } else {
        # alternatively keep a sample of
        # the 
    .SD[sample.int(.N, size = ncases)]
    }
  } ,  by=list(Area,Sex,Age,ncases, Infected)] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:22:40.713

函数中没有`by`参数`subset`。我将构造一个索引向量，对于案例和每个类别中的控件样本，该索引向量为 TRUE：

```
chosen <- by(dat4, INDICES= list(Area,Sex,Age), 
          FUN=function(d) {
                 idx <- d[['Infected']]==1 |
                 (d[['Infected']]==0 & sample( (1:NROW(d)) <= d[["ncases"]][1] ))
                 return( d[idx,]}
chosen <- do.call(rbind, chosen) 
```

最后一部分对我来说有点笨拙。我正在构建一个逻辑值向量，然后用`sample`函数对其进行置换。该`by`函数返回一个列表，其中包含每个类别的条目。在这种情况下，您需要`rbind`“将它们堆叠起来”。我怀疑有一种更具表现力的方式来进行采样，并且那些神经通路只是需要更多的咖啡因。（在您为此目的提供样本数据集之前，也未经测试。）

# apache-flex - Flash Builder 4.7 和 Inspectable 元数据标记

> ID：15789054
> 
> 赞同：0
> 
> 时间：2013-04-03T13:44:02.930
> 
> 标签：apache-flex, flash-builder

自从我迁移到 FB 4.7 高级版后，我再也看不到我的组件属性的代码提示了。

例如，这个属性的检查曾经起作用：

```
[Inspectable(category="Common",enumeration="normal,small",defaultValue="normal")]
public function set size(size:String):void {
    // code
} 
```

我错过了 FB 4.7 配置的内容吗？

----- 版本@Lee Burrows：

我不确定您的观点：如果 FB 4.7 忽略 Inspectable 标签，它如何能够建议 SDK 属性的值？

VGroup.verticalAlign 属性的示例：

```
[Inspectable(category="General", enumeration="top,bottom,middle", defaultValue="top")]
public function get verticalAlign():String
{
    return verticalLayout.verticalAlign;
} 
```

在 mxml 编辑器中，FB 为verticalAlign 建议值“top”、“bottom”和“middle”，那么为什么它也不能建议我的组件属性值呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T15:03:31.647

好的，我做了一些测试，发现 FB 4.7 改变了两件事：

*   为了查看授权值的提示，属性必须有一个 setter 和一个 getter（我的一些组件只有一个 setter，我同意这很糟糕）
*   [Inspectable] 元数据标签应该放在 getter 之前，并且只能放在 getter 之前

所以我的例子的正确语法是：

```
[Inspectable(category="Common",enumeration="normal,small",defaultValue="normal")]
public function get size():String {
    // code
}

public function set size(size:String):void {
    // code
} 
```

现在我再次将这些值视为 FB 4.7 中的代码提示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T00:57:25.107

FB 4.7 没有设计视图 - 使 [Inspectable] 元标记冗余（我相信它仅被设计视图用于确定属性输入字段的可接受值）。

# jquery - 需要ajax url+当前输入值

> ID：15789055
> 
> 赞同：0
> 
> 时间：2013-04-03T13:44:05.367
> 
> 标签：jquery, ajax

我有一个指向 ajax 的链接.. 它可以工作.. 现在我想将当前表单值添加到 ajax 请求..

```
$datepicker=$("#datepicker").val(); 
```

我知道我可以使用 val() 来获取当前值，但是我在这里发送 url，我应该在哪里将其包含为数据字符串。希望很清楚。这是我的代码

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="http://code.jquery.com/jquery-migrate-1.1.1.min.js"></script>
<script>
$(document).ready(function(){
   $('a.member').click(function(e){ 
   e.preventDefault();
     $.ajax({
            type: "GET",
            url: this.href,
            cache:false,
            success: function(data){
                      $("#result2").append(data);
            }
     });
     return false;
}); 
});
</script>
<body>

<a href="http://ex.net/free/action.php?me=1"  class="member" id="member" rel="example">click to launch</a>

<br><br<
<form id="form1">

<input type="text" id="name" value="name"><br>
<input type="text" id="name1" value="name1">
</form>
<div id="result2"></div>

</body>
</html> 
```

提前感谢，，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:47:01.173

您应该在 ajax 调用中添加“**数据”属性：**

```
$.ajax({
            type: "GET",
            data: "{'ParameterName': '" + $("#datepicker").val() + "'}",
            url: this.href,
            cache:false,
            success: function(data){
                      $("#result2").append(data);
            }
     }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:47:01.940

```
<script>
$(document).ready(function(){
   $('a.member').click(function(e){ 
   e.preventDefault();
     $.ajax({
            type: "GET",
            data: {'postedData':$("#form_name").serialize()},  
            url: this.href,
            cache:false,
            success: function(data){
                      $("#result2").append(data);
            }
     });
     return false;
}); 
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T13:49:15.853

```
 $.ajax({
  type:"GET",
  url:this.href,
  data:"{'val': '" + $("#datepicker").val() + "'}",
  cache:false,
        success: function(data){
                  $("#result2").append(data);
        }
}); 
```

或者

试试这个。

```
 $.post(this.href,"val="+$("#datepicker").val()); 
```

在 ajax 中使用数据。希望这会起作用。

获取像 $_REQUEST['val'] 这样的值。

有关进一步的过程，请参阅此[链接](https://stackoverflow.com/questions/5004233/jquery-ajax-post-example)。

# apache - htaccess 重写 url 以删除 htm 扩展名

> ID：15789058
> 
> 赞同：1
> 
> 时间：2013-04-03T13:44:15.787
> 
> 标签：apache, .htaccess

我有以下网站结构

```
- root 
    - de/
    - en/ 
```

每个文件夹都包含一些 .htm 文件。例如

```
en/products.htm 
```

代替

```
mysite.com/en/products.htm 
```

我想在网址栏中显示

```
mysite.com/someEnglishTitle/products 
```

其实我想用一些字符串来替换语言键。我的 htaccess 看起来像这样

```
RewriteEngine On
RewriteBase / 
RewriteRule ^/?$ /en/index.htm [L,R] 
```

我补充说

```
RewriteRule ^/english-books/products$ /en/products.htm [L,R] 
```

但这不起作用。任何想法如何解决这一问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:51:30.590

在这种情况下不要使用 [L,R] L 表示 Last，因此在此 R 表示 Redirect 之后不再应用更多规则，但如果 URL 要留在浏览器中，您不希望这种情况发生

所以

```
RewriteRule ^english-books/products$ /en/products.htm 
```

这意味着[http://mysite.com/english-books/products](http://mysite.com/english-books/products)将显示文件 en/products.htm 的内容，而无需更改浏览器中的 URL。注意开头没有斜杠

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:00:47.507

你的意思是你想重写`/$var1/$var2`然后`/$var1/$var2.htm`试试这个：

```
RewriteCond %{REQUEST_URI} ^/([a-z0-9-_]+)/([a-z0-9-_]+)/?$
RewriteRule ^(.*) /%1/%2.htm 
```

# python - python JSON只获取第一级的键

> ID：15789059
> 
> 赞同：93
> 
> 时间：2013-04-03T13:44:17.260
> 
> 标签：python, json, python-2.7, iterator, key

我有一个非常长且复杂的 json 对象，但我只想获取第一级的项目/键！

例子：

```
{
    "1": "a", 
    "3": "b", 
    "8": {
        "12": "c", 
        "25": "d"
    }
} 
```

我想得到**1,3,8**作为结果！

我找到了这段代码：

```
for key, value in data.iteritems():
    print key, value 
```

但它会打印所有键（也是**12 和 25**）

* * *

## 回答 #1

> 赞同：154
> 
> 时间：2013-04-03T13:50:35.243

做一个简单的`.keys()`

```
>>> dct = {
...     "1": "a", 
...     "3": "b", 
...     "8": {
...         "12": "c", 
...         "25": "d"
...     }
... }
>>> 
>>> dct.keys()
['1', '8', '3']
>>> for key in dct.keys(): print key
...
1
8
3
>>> 
```

如果您需要排序列表：

```
keylist = dct.keys()
keylist.sort() 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-04-03T13:50:55.910

```
for key in data.keys():
    print key 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2020-02-25T11:30:02.917

正如 Karthik 提到的，`dct.keys()`它将起作用，但它将返回`dict_keys`类型中的所有键而不是`list`类型。因此，如果您想要列表中的所有键，那么`list(dct.keys())`将起作用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-03-02T00:36:42.967

检查 python 对象是否是类型实例的一个好方法是使用`isinstance()`Python 的“内置”函数。对于 Python 3.6：

```
dct = {
       "1": "a", 
       "3": "b", 
       "8": {
            "12": "c", 
            "25": "d"
           }
      }

for key in dct.keys():
    if isinstance(dct[key], dict)== False:
       print(key, dct[key])
#shows:
# 1 a
# 3 b 
```

# database - Haskell 中的电影数据库

> ID：15789061
> 
> 赞同：1
> 
> 时间：2013-04-03T13:44:24.837
> 
> 标签：database, list, haskell

目前正在尝试解决我的 haskell 程序中的两个主要问题。

1.  显示给定用户喜欢的所有电影
2.  显示在特定时期（即在给定的开始年份和结束年份之间）发行的给定演员的所有电影

这是我目前使用的示例数据库：

```
type Title = String
type Cast = String
type Year = Int
type Fans = String

type Film = (Title, [Cast], Year, [Fans])
type Database = [Film]

testDatabase :: Database
testDatabase = [("Casino Royale", ["Daniel Craig", "Eva Green", "Judi Dench"], 2006,    ["Garry", "Dave", "Zoe", "Kevin", "Emma"]),
("Cowboys & Aliens", ["Harrison Ford", "Daniel Craig", "Olivia Wilde"], 2011, ["Bill", "Jo", "Garry", "Kevin", "Olga", "Liz"]),     
    ("Catch Me If You Can", ["Leonardo DiCaprio", "Tom Hanks"], 2002, ["Zoe", "Heidi", "Jo", "Emma", "Liz", "Sam", "Olga", "Kevin", "Tim"])] 
```

数据库要大得多，但由于空间原因，我省略了其中的一些。

*   我现在如何使用该数据库创建回答上述 2 个问题所需的函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:55:57.780

这是对您的第一个问题的非常简短的回答。这看起来像家庭作业，所以你应该尝试自己解决第二个问题！

```
fan y = map (\(a,_,_,_) -> a) $ filter (\(_,_,_,a) -> elem y a) testDatabase 
```

重要的部分是：

`elem`测试是否`y`是列表的成员`a`- 即电影是否在其粉丝列表中包含用户。

`filter`接受一个谓词和一个列表，并仅返回该列表中满足谓词的项目。

`map`接受一个函数和一个列表，并将该函数应用于列表。这仅用于提取电影的标题。

您应该能够使用类似的方法来回答第二个问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:43:43.590

这应该有效：

```
type Title = String
type Actor = String
type Cast = [Actor]
type Year = Int
type Fan = String
type Fans = [Fan]
type Period = (Year, Year)
type Film = (Title, Cast, Year, Fans)
type Database = [Film]

testDatabase :: Database
testDatabase = [("Casino Royale", ["Daniel Craig", "Eva Green", "Judi Dench"], 2006, ["Garry", "Dave", "Zoe", "Kevin", "Emma"]),
                ("Cowboys & Aliens", ["Harrison Ford", "Daniel Craig", "Olivia Wilde"], 2011, ["Bill", "Jo", "Garry", "Kevin", "Olga", "Liz"]),     
                ("Catch Me If You Can", ["Leonardo DiCaprio", "Tom Hanks"], 2002, ["Zoe", "Heidi", "Jo", "Emma", "Liz", "Sam", "Olga", "Kevin", "Tim"])]

inCast :: Actor -> Film -> Bool
inCast givenActor (_, cast, _, _) = any (\actor -> actor == givenActor) cast

inPeriod :: Period -> Film -> Bool
inPeriod (periodStart, periodEnd) (_, _, year, _) = periodStart <= year && year <= periodEnd

inCastAndPeriod :: Actor -> Period -> Film -> Bool
inCastAndPeriod actor period film = inCast actor film && inPeriod period film

isFan :: Fan -> Film -> Bool
isFan givenFan (_, _, _, fans) = any (\fan -> fan == givenFan) fans

allFilmsThatAGivenUserIsAFanOf :: Fan -> [Film]
allFilmsThatAGivenUserIsAFanOf givenFan = filter (isFan givenFan) testDatabase

allTheFilmsOfAGivenActorThatWereReleasedDuringAParticularPeriod :: Actor -> Period -> [Film]
allTheFilmsOfAGivenActorThatWereReleasedDuringAParticularPeriod givenActor givenPeriod = filter (inCastAndPeriod givenActor givenPeriod) testDatabase 
```

祝你好运！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-02T22:27:40.580

如果您使用以下类型声明，则此解决方案有效。代数类型更好地实现这些功能。

```
-- Types
type Title   = String
type Actor   = String
type Year    = Int
type Fan     = String

-- Film type
data Film    = Film Title [Actor] Year [Fan]
                deriving (Eq,Ord,Show,Read)

-- converts a list of strings to string through recursion and pattern matching.
displayListAsString :: [String] -> String
displayListAsString [] = ""
displayListAsString (x:[]) = x ++ displayListAsString []
displayListAsString (x:xs) = x ++ ", " ++ displayListAsString xs

-- Give all films that a particular user is a fan of.
isFanOfMovies :: Fan -> [Film] -> String
isFanOfMovies fanName [] = "No Database provided."
isFanOfMovies fanName movieDB = moviesAsString $ isFanOf fanName movieDB

-- filters through the database to find the films which a particular user is a fan of.
isFanOf :: Fan -> [Film] -> [Film]
isFanOf fanName = filter (\(Film _ _ _ fans) -> elem fanName fans)

-- displays a movie as well formatted string
movieAsString :: Film -> String
movieAsString (Film title cast year fans) = "\nTitle: " ++ title ++ "\n Cast: " ++ 
(displayListAsString cast) ++ "\n Year: " ++ show year ++ 
"\n Fans: " ++ show (length fans)

-- Gives all films in the database (if database passed through directly)
moviesAsString :: [Film] -> String
moviesAsString movieDB = (unlines.map movieAsString) movieDB 
```

作为一个额外的功能，您使用以下命令首先检查风扇是否存在，然后如果返回值“”，则系统将继续检索电影。但这适用于您想要实现用户界面的时候。

```
fanFilms (fanName, database) = do
let fan = fanExists fanName database
    if fan == ""
        then do
            putStrLn "\nDisplaying all the films you're a fan of below:"
            putStrLn $ isFanOfMovies fanName database
            return (fanName, database)
        else do
            putStrLn "No Results Found.\n"
            putStrLn $ fanExists fanName database
            return (fanName, database)

-- This can be used to check if the fan exists.
fanExists :: Fan -> [Film] -> String
fanExists fanName movieDB
    | isFanOf fanName movieDB == []     = "No movies you are fan of."
    | otherwise                         = "" 
```

已经晚了一年，但希望对你所有的数学有趣的人仍然有帮助；）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T16:50:32.193

如果您将您的`Film`类型声明为记录，您将免费获得字段访问器，这将使过滤器更易于阅读（另外，不是`Fans`单个`Fan`吗？）：

```
type Title = String
type Cast = String
type Year = Int
type Fan = String

data Film = Film { filmTitle :: Title
                 , filmCast  :: [Cast]
                 , filmYear  :: Year
                 , filmFans  :: [Fan]
                 }

type Database = [Film] 
```

您的第一个问题表明您想要`Film`给定用户的 s `Fan`（而不是`Film`s 的标题）：

```
fanOfFilms :: Fan -> Database -> [Film]
fanOfFilms fan = filter (elem fan . filmFans) 
```

您的第二个问题可以以相同的方式解决，但谓词变得更加复杂：

```
periodActorOfFilms :: Cast -> Year -> Year -> Database -> [Film]
periodActorOfFilms actor startYear endYear =
    filter $ \film -> and [ actor `elem` filmCast film
                          , startYear <= filmYear film
                          , endYear >= filmYear film
                          ] 
```

# c - C 标准是否要求编译时常量表达式求值？

> ID：15789065
> 
> 赞同：3
> 
> 时间：2013-04-03T13:44:30.610
> 
> 标签：c, standards, constantfolding

例如，是

```
static int a[1+1]; 
```

有效标准 C? 对于标准的部分或所有版本？

我对编译器是否可以处理它不感兴趣，但它是否是标准 C 的一部分。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T13:53:52.463

C11，§6.6：

> 常量表达式可以在翻译期间而不是运行时进行评估，因此可以在常量可能存在的任何地方使用。

所以是的，简单的常量折叠是强制性的，这个片段是有效的标准 C。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:58:08.190

该标准明确定义了这一点。

数组声明器，6.7.5.2 (C99)：

> 除了可选的类型限定符和关键字 static，[ 和 ] 可以分隔表达式或 *。如果它们分隔了一个表达式（它指定了一个数组的大小），那么该表达式应该是一个整数类型。如果表达式是常量表达式，它的值应大于零。

# iphone - 通过 JASidePanelController 打开 ViewController 登录

> ID：15789073
> 
> 赞同：0
> 
> 时间：2013-04-03T13:44:49.620
> 
> 标签：iphone, ios, objective-c, appdelegate

我刚开始在 Objective-C / iOS 中进行开发，我正试图打开一个 Login ViewController 作为我的第一个 ViewController。这工作正常：

[AppDelegate.m]

```
UPLoginViewController *login = [[UPLoginViewController alloc] init];
self.window.rootViewController = login; 
```

问题是当我尝试通过 JASidePanelController 打开它时。我不知道如何制作它。如果我首先打开 JASidePanelController，我必须打开登录到 viewDidLoad，从 Login 获取委托属性

```
-(void) viewDidLoad {
UPLoginViewController *login = [[UPLoginViewController alloc] init];

login.delegate = self;

[self.view addSubview:login.view];
[self addChildViewController:login];
} 
```

但是这样做我的 LoginViewController 在 JASidePanelController (centerViewController) 内打开。

有什么更好的方法来打开一个 LoginViewController，然后打开我的 JASidePanelController 并获取我的 LoginViewController 的参数/委托？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:23:02.717

尝试这样做`[self presentViewController:login animated:YES completion:nil];`会在整个视图层次结构中以模态方式弹出视图。

另外，看看：http: [//developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html)

和[http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html](http://developer.apple.com/library/ios/#featuredarticles/ViewControllerPGforiPhoneOS/ModalViewControllers/ModalViewControllers.html)

# oracle - 使用“当其他人”

> ID：15789076
> 
> 赞同：0
> 
> 时间：2013-04-03T13:44:58.623
> 
> 标签：oracle

我有一个问题，什么时候可以在 EXCEPTION 块中使用 WHEN OTHERS 子句，而不是让我的代码出错。据我了解，强烈建议尽可能避免这种做法。这是我的情况：

我有一个脚本，它遍历游标并将一些数据从游标插入到表中。
现在，在这个循环中，如果我试图插入不正确的数据，我正在使用一个引发异常的函数。因此，当循环命中不正确的记录时，循环中断并且脚本执行停止。我需要做的是注意不能插入数据并从光标转到下一条记录。为此，我在循环中设置了异常块，该块在 WHEN OTHERS 中捕获异常，通过 DBMS_output.put_line 提供消息并转到下一条记录。

这是一个好方法吗？如果没有，应该怎么做？谢谢你的任何建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:21:46.403

使用 DBMS_OUTPUT 进行错误处理几乎不是一个好主意。以下是一些建议（它们都使用某种表结构来存储“无效”行）：

1.  不写输出，而是将记录存储在 PL/SQL 表中
2.  用 FORALL .. SAVE EXCEPTIONS 替换你的循环
3.  使用普通 SQL INSERT，结合错误行的错误表（使用[dbms_errlog](http://docs.oracle.com/cd/B19306_01/appdev.102/b14258/d_errlog.htm)创建错误表）

就个人而言，如果您的函数可以从 SQL 调用，我会选择 3)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:20:24.063

仅仅因为某些东西不被推荐，并不意味着你不能在合适的时候使用它。如果这符合您的要求并且不是太慢，那么请不要担心。你可能会花三倍的时间来创建一个稍微优雅一点的解决方案，这些时间你可能会用在其他东西（或某人）上。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-05-15T17:05:49.687

任何 WHEN OTHERS 处理程序的最后一行应该是 RAISE；

WHEN OTHERS 应该保留用于意外行为并且它应该使您的程序崩溃。它不应该被用作常规处理逻辑的一部分。正确的方法是确定函数返回什么错误。然后你的调用程序需要明确处理那个/那些错误。您的问题实际上可能是该函数正在与 WHEN OTHERS 一起做一些愚蠢的事情。

[http://stevenfeuersteinonplsql.blogspot.com/2017/02/now-not-to-handle-exceptions.html](http://stevenfeuersteinonplsql.blogspot.com/2017/02/now-not-to-handle-exceptions.html)

# javascript - 旧版 IE hack：标签不聚焦输入

> ID：15789078
> 
> 赞同：0
> 
> 时间：2013-04-03T13:45:02.683
> 
> 标签：javascript, jquery, html, internet-explorer, label

我正在使用遗留代码，我偶然发现了这件艺术品：

```
//IE Hacks
if (navigator.appName == 'Microsoft Internet Explorer') {
    $("label").live('click', function() {
        $('#'+$(this).attr('for')).click().click().click();
    });
}
// End IE Hacks 
```

有人告诉我这是写的，因为标签并不总是在 IE 中工作，这个技巧修复了它。它也不适用于两个`.click()`电话，但需要所有三个电话。

使用的 jQuery 版本是`1.4.2`.

我想重构它以使用特征检测和更优雅的解决方案。

我在 Google 上查找 IE 中的标签问题，但偶然发现了隐藏输入的问题。

有谁知道这段代码解决了什么问题？

有没有更优雅的解决方案？

**更新**：

你认为这段代码没有可能解决的问题，我应该删除它吗？

**更新 2**：

我发现网站上的标签有问题。这是一段HTML：

```
<div class="remember-me">
    <input type="hidden" name="remember" value="0">
    <input type="checkbox" id="remember" name="remember" value="1" class="checkbox-input" rel="remember">
    <label class="label-remember" for="remember">Keep me logged in</label>
</div> 
```

此 HTML 代码是使用 Ajax 插入到页面中的，因此它可能与 kevmc 中描述的问题有关。

在 Internet Explorer 7 中单击标签不会选中复选框。相反，它聚焦标签（带有细虚线边框）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:57:48.027

在页面加载旧版本的 IE（自 IE8 以来我还没有测试过）后将标签/输入对添加到 DOM 时，似乎无法识别 for 和 id 属性之间的绑定。至于优雅的测试，我不知道

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T15:28:50.703

[IE < 8 将 "name" 属性等同于 "id"](http://webbugtrack.blogspot.com/2007/08/bug-152-getelementbyid-returns.html)，因此单击标签可能会将焦点发送到隐藏输入，因为它出现在 DOM 中较早，这可以解释为什么复选框不响应 IE7 中的标签单击。

虽然我不确定如何触发三次点击事件来解决这个问题，但最优雅的解决方案是删除`hidden`输入。但是，`hidden`输入可能*总是*在提交表单时发送一个值，这与复选框不同，复选框仅在成功（选中）时才传递。

为了解决标签焦点问题，我们应该更改标记以利用浏览器的默认行为，即将标签的点击发送到其相应的表单元素（通过“id”）。因此，我们将保留`hidden`输入以将相同的参数发送到后端，但更改`id`复选框并更新`for`属性`label`以匹配：

```
<div class="remember-me">
  <input type="hidden" id="remember" name="remember" value="0">  <!-- added @id -->
  <input type="checkbox" id="rememberCB" class="checkbox-input"> <!-- changed @id, removed @name -->
  <label class="label-remember" for="rememberCB">Keep me logged in</label> <!-- changed @for -->
</div> 
```

*注意：*我们`name`从复选框输入中删除了该属性，因为我们不想在表单提交中包含它的值。相反，我们将更改`script`以在复选框更改时更新隐藏输入的值：

```
$('#rememberCB').live('change', function() {
  $('#remember').val( $(this).is(':checked') ? '1' : '0' );
}); 
```

这样，提交表单时，后端应该会收到相同的输入参数，并且标签会将焦点发送到正确的目标。

在此处查看此操作：http: [//jsbin.com/obujoc/6/edit](http://jsbin.com/obujoc/6/edit)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:02:25.817

嗨，你为什么使用点击事件？只需要设置焦点！像这样 ：

```
 //IE Hacks
if (navigator.appName == 'Microsoft Internet Explorer') {
    $("label").live('click', function() {
        $('#'+$(this).attr('for')).focus();
    });
}
// End IE Hacks 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T15:01:09.640

你不认为黑客可以在`<!--[if IE]> <![endif]-->`标签中使用吗？

让我给你看一个例子：

```
<!--[if IE]>
    $("label").live('click', function() {
    $('#'+$(this).attr('for')).focus();
});
<![endif]--> 
```

不确定您的代码是做什么的，但是如果您按照我向您展示的更简单的代码使用它，它将起作用。

# java - Jersey 使用 POST 接受文件参数和字符串

> ID：15789081
> 
> 赞同：3
> 
> 时间：2013-04-03T13:45:06.967
> 
> 标签：java, http, file-upload, glassfish, jersey

我正在使用 Jersey 开发一个休息服务器。我需要制作一个 API，将图像上传到服务器上的文件夹中。我的 API 必须包含 2 个参数。一个字符串参数和一个文件参数。

```
@POST
@Path("path")
@public Response uploadImage(@FormParam("name") String name, @FormDataParam("imagestream") InputStream imageStream) 
```

如果我从客户端应用程序发送 2 个参数，我将无法接收这两个属性。

我的客户端代码如下：

```
private static void instantiateConnection(String urlString, byte[] params)
{
    HttpURLConnection conn = null;

    try
    {
        URL url = new URL(urlString);

        conn = (HttpURLConnection) url.openConnection();

        outStream(conn, params);

        int responseCode = conn.getResponseCode();

        if (responseCode == HttpURLConnection.HTTP_OK)
        {
            InputStream instream = conn.getInputStream();

            instream.close();
        }

    }
    catch (MalformedURLException e)
    {
        e.printStackTrace();
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }
    finally
    {
        conn.disconnect();
    }
}

private static void outStream(HttpURLConnection conn, byte[] param)
{
    String name = new String("name");

    conn.addRequestProperty("Content-Length", "" + (param.length + name.length()));
    conn.addRequestProperty("Content-Type", "multipart/mixed");

    try
    {
        conn.setRequestMethod("POST");
        conn.setUseCaches(false);
        conn.setDoOutput(true);
        conn.setDoInput(true);
        conn.setReadTimeout(15000);

        // Send request
        DataOutputStream wr = new DataOutputStream(conn.getOutputStream());
        wr.write(name.getBytes());
        wr.write(param);
        wr.flush();
        wr.close();
    }
    catch (ProtocolException e)
    {
        e.printStackTrace();
    }
    catch (IOException e)
    {
        e.printStackTrace();
    }

    return;
} 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:50:47.147

这是我使用的一段代码。

```
@POST
@Produces({ MediaType.APPLICATION_XML, MediaType.APPLICATION_JSON })
@Consumes(MediaType.MULTIPART_FORM_DATA)
public Response newFile(@FormDataParam("file") InputStream uploadInputStream, @FormDataParam("file") FormDataContentDisposition fileDetail, @FormDataParam("description") String description) {

    String uploadFileLocation = "C:/upload/documents/";

    OutputStream out = null;

    int read = 0;
    byte[] bytes = new byte[1024];

    File directory = new File(uploadFileLocation);
    if(!directory.exists()){
        directory.mkdirs();
    }
    out = new FileOutputStream(new File(directory, fileDetail.getFileName()));
    while ((read = uploadInputStream.read(bytes)) != -1) {
        out.write(bytes, 0, read);
    }

    out.flush();
    out.close();

//Return Response
...
} 
```

# c# - 为什么foreach调用GetHashCode？

> ID：15789085
> 
> 赞同：1
> 
> 时间：2013-04-03T13:45:19.090
> 
> 标签：c#, .net, linq, gethashcode

当我发现我 在旅行 时调用`GetHashCode()`了类的覆盖方法时，我感到很惊讶。但在其他情况下不会发生。为什么？`Foo``foreach``IEnumerable<Foo>`

真实代码的一些部分：

```
var allVolumeImagesInvolvedInMerge = volumeChainsToMerge
    .SelectMany(x => x);

var allVolumeImagesNotInvolvedInMerge = allVolumeImagesWithinCell
    .Except(allVolumeImagesInvolvedInMerge)
    .Where(vi => volumeImagesNotAllowedToDelete.ContainsFast(vi) == false);

var volumeImagesCandidatesForDeletion = allVolumeImagesNotInvolvedInMerge
    .Where(x => driverVolumeIds.Contains(x.DriverVolumeId));

var groupedVolumeImagesCandidatesForDeletion = volumeImagesCandidatesForDeletion
    .GroupBy(vi => vi.DriverVolumeId);

// here GetHashCode is called
foreach (var group in groupedVolumeImagesCandidatesForDeletion)
{
   ...
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T13:57:33.057

我假设你`IEnumerable<Foo>`的不是一个集合类型`Foo[]`，`List<Foo>`而是一个使用延迟执行的 linq 查询。因此，当您使用`foreach`（或`ToList`等`Any`）时，您将执行导致所有相关方法执行的查询。

也许您正在使用`GroupBy`, `Distinct`, `Intersect`,`Except`或`Join`其他使用覆盖的方法`GetHashCode`和`Equals`（如果`GetHashCode`返回相等的值）。

这是一个重现它的简单示例：

```
public class Foo
{
    public int ID { get; set; }

    public override int GetHashCode()
    {
        return ID.GetHashCode();
    }
    public override bool Equals(object obj)
    {
        Foo f2 = obj as Foo;
        if (f2 == null) return false;
        return ID == f2.ID;
    }
} 
```

现在这个简单的 linq 查询演示`GetHashCode`了`foreach`由于`Enumerable`扩展方法的延迟执行而执行的：

```
IEnumerable<Foo> list1 = new List<Foo>() { new Foo { ID = 1 }, new Foo { ID = 2 }, new Foo { ID = 3 } };
IEnumerable<Foo> list2 = new List<Foo>() { new Foo { ID = 2 }, new Foo { ID = 3}, new Foo { ID = 4 } };
IEnumerable<Foo> inBoth = list1.Intersect(list2);

// now GetHashCode will be executed (not at list1.Intersect(list2))
foreach (Foo fDup in inBoth)
    Console.WriteLine(fDup.ID); 
```

这是一个**演示**：http: [//ideone.com/ekttH3](http://ideone.com/ekttH3)

输出：

```
before Intersect
after Intersect
in GetHashCode, ID=2
in GetHashCode, ID=3
in GetHashCode, ID=4
in GetHashCode, ID=1
in GetHashCode, ID=2
in Equals, ID=2
in foreach, ID=2
in GetHashCode, ID=3
in Equals, ID=3
in foreach, ID=3 
```

# wpf - 绑定到父控件中的属性

> ID：15789090
> 
> 赞同：16
> 
> 时间：2013-04-03T13:45:33.357
> 
> 标签：wpf, xaml

我有以下情况：

```
Window
  |_Grid
      |_ListView (MainProductGrid)
           |_View
               |_GridView
                    |_GridViewColumn
                             |_CellTemplate
                                     |_DataTemplate
                                             |_Label (LabelID) 
```

现在，我想在 LabelID 中显示 ListView 中行的索引。所以我做了以下事情：

```
<ListView ItemsSource="{Binding Path=ProductItems}" AlternationCount="{Binding Path=ProductItems.Count}">
... 
```

对于标签，我有以下内容：

```
<Label x:Name="LabelID" 
       Content="{Binding RelativeSource={RelativeSource Mode=TemplatedParent}, 
       Path=(ListView.AlternationIndex)}"/> 
```

但它 LabelID 只显示 0 .. 所以我认为 TemplatedParent 没有指向 ListView 控件.. 那么我怎样才能更正绑定以指向“上父级”，在我的情况下是 ListView ？

提前致谢

################

更新：这是完整的 xaml ...

```
<Grid x:Name="mainGrid">
        <ListView  ItemsSource="{Binding Path=ProductItems}" AlternationCount="{Binding Path=ProductItems.Count}" x:Name="MainProductGrid">
                <ListView.View>
                    <GridView AllowsColumnReorder="False">
                    <GridViewColumn x:Name="gvc" Header="id" Width="auto">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <Label Content="{Binding (ListView.AlternationIndex),RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListView}}}"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>

                    <GridViewColumn Header="Product name" DisplayMemberBinding="{Binding Path=ProductName}"  Width="auto" />
                    </GridView>
                </ListView.View>
            </ListView>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-03T14:12:49.297

请试试这个：

```
 <Label Content="{Binding (ListView.AlternationIndex),
    RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListViewItem}}}"  /> 
```

更新：这是正确的 xaml，绑定应该是相对源 = ListViewItem，但网格列宽存在问题：

```
 <ListView.View>
            <GridView AllowsColumnReorder="False">
                <GridViewColumn x:Name="gvc" Header="id"  Width="30">
                    <GridViewColumn.CellTemplate>
                        <DataTemplate>
                            <TextBlock Text="{Binding (ListView.AlternationIndex),
                                RelativeSource={RelativeSource FindAncestor,
                                    AncestorType={x:Type ListViewItem}}}"/>
                        </DataTemplate>
                    </GridViewColumn.CellTemplate>
                </GridViewColumn>

                <GridViewColumn Header="Product name" 
                                DisplayMemberBinding="{Binding Path=ProductName}"  
                                Width="auto" />
            </GridView>
        </ListView.View> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T13:56:11.177

您可以使用

```
RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListView}} 
```

找到您上方的特定控件

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T14:00:26.977

好吧，因为您处于 a 的上下文中，所以`DataTemplate`您无法通过`TemplatedParent`模式访问该属性，至少在您的情况下是这样。它*指的是应用模板（数据绑定元素所在的元素）的元素。[...]* [链接](http://msdn.microsoft.com/de-de/library/system.windows.data.relativesourcemode.aspx)我不确定，它可以在 a 中使用，`DataTemplate`因为我只在 中看到过它`ControlTemplates`，但是由于文档没有说明其他...

您可以做的是尝试找到`Ancestor`. 例如

```
<Label Content="{Binding AlternationIndex, 
       RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type ListView}}" ... /> 
```

我还没用过`DataTemplates`，所以不保修。

# php - 无法打开流：HTTP 请求失败！HTTP/1.1 500 内部服务器错误

> ID：15789091
> 
> 赞同：0
> 
> 时间：2013-04-03T13:45:41.517
> 
> 标签：php

我在 PHP 文件中有这段代码

```
$file = file_get_contents($url); 
```

在 PHP 版本 5.2.17 上运行

错误信息是：

```
 failed to open stream: HTTP request failed! HTTP/1.1 500 Internal Server Error 
```

知道有什么问题吗？

完整代码：

```
<?php 
Header('Content-Type: application/javascript');
/*
 * in JavaScript call with `encodeURIComponent`
 * $.get('proxy.php?proxy_url='+encodeURIComponent('http://google.com?param=1&param2=2'))
 */ 

error_reporting(~0);
ini_set('display_errors', 1);

$url = rawurldecode($_GET['proxy_url']);
$cb = ! empty($_GET['callback']) ? $_GET['callback'] : null;

if(preg_match('#xxx\.xxx\.com/xxx/#', $url)){
    $url = preg_replace('#http\://xxx\.xxx\.com/xxx/#', '', $url);
}

if(! preg_match('#^https?:#', $url)){
    $url = preg_replace('#^[\.\/]+#', '', $url);

    if(!file_exists($url)){
        echo 'File not found';
        die(0);
    }
}

if(preg_match('#\.xml$#', $url)){
    header('Content-type: text/xml');
}

$file = file_get_contents($url);

if($cb){
    header('Content-type: application/javascript');
    echo $cb.'('.$file.');';

}else{
    echo $file;
} 
```

# apache - 亚马逊弹性豆茎上的 Symfony 动态子域

> ID：15789093
> 
> 赞同：0
> 
> 时间：2013-04-03T13:45:47.560
> 
> 标签：apache, symfony, amazon, amazon-elastic-beanstalk

我已经将 symfony 应用程序部署到 amazon elastic beanstalk 并且我正在使用 Symfony 2.2 主机路由来获取子域，例如：

```
user1.myapp.com 
```

主域正在运行，子域在亚马逊路由 53 ( `*.myapp.com`) 上使用通配符，但 Symfony 路由不起作用。

它适用于其他 ubuntu 实例，但我想使用亚马逊弹性 beanstalk，所以它更容易配置和自动扩展。

有什么问题？

编辑（添加路线示例）：

```
MainBundle_userhome_createnote:
    path: /createnote
    host: "{domainname}.mydomain.net"
    defaults: { _controller: MainBundle:UserHome:createNote } 
```

# c - C 库双下划线混淆

> ID：15789096
> 
> 赞同：3
> 
> 时间：2013-04-03T13:45:49.730
> 
> 标签：c, namespaces, header-files, conventions

我已经阅读了我能找到的所有关于此的问题，但还没有人解决我的困惑。

如果我理解正确，在库代码中的方法或变量名称开头使用双下划线只是命名空间约定。它允许操作系统代码避免与任何应用程序代码发生冲突。

那么，为什么我`/usr/include/string.h`包含例如以下函数声明；

```
extern char *strcpy (char *__restrict __dest, __const char *__restrict __src)
    __THROW __nonnull ((1, 2)); 
```

忽略`__THROW`和`__nonnull ((1, 2));`部分，我有以下问题；

*   为什么他们使用双下划线来表示*局部*变量名称`__dest`和`__src`，当这些肯定只能通过实现（大概在`string.c`或类似）中访问时，并且永远不会与我的代码冲突。（顺便说一句，我从来没有真正理解为什么前向声明*需要*参数名称，仅类型就足够了吗？）

*   为什么函数名不是`__strcpy`？`string.h`算不算操作系统的一部分？

*   为什么将单词`const`和`restrict`更改为使用双下划线？它们不是已经在 C99（或更早版本？）标准中保留字了吗？

显然，我的电线在某处交叉，如果有人能为我解决这个问题，那就太好了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:51:50.170

*   参数名称与`__`程序可能定义的宏不冲突。另一种选择是从声明中完全省略参数名称。
*   这是`strcpy`因为这是这里声明的（C 库的）符号
*   `const`and`restrict`关键字受到保护，以防有人使用尚未实现它们的编译器。

# iphone - 如何仅对齐 UIAlertView 中的标题

> ID：15789098
> 
> 赞同：0
> 
> 时间：2013-04-03T13:45:53.047
> 
> 标签：iphone, objective-c, cocoa-touch, uiimageview

我想仅在 UIAlertView 中将标题居中对齐，而消息应该左对齐。

目前我正在做

```
((UILabel*)[[alert subviews] objectAtIndex:1]).textAlignment = NSTextAlignmentCenter; 
```

但它也使信息中心对齐。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:47:20.027

我不会尝试修改 UIAlertView 的默认标签，而是应该创建一个新的 UILabel 并将其添加为子视图。

```
UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Centered Title" message:@"\n\n\n" delegate:self cancelButtonTitle:@"Close" otherButtonTitles:nil];

UILabel *label = [[UILabel alloc] initWithFrame:CGRectMake(12.0, 24.0, 250.0, 80.0)];
label.numberOfLines = 0;
label.textAlignment = NSTextAlignmentLeft;
label.backgroundColor = [UIColor clearColor];
label.textColor = [UIColor whiteColor];
label.text = @"Here is an example of a left aligned label in a UIAlertView!";
[alert addSubview:label];
[alert show]; 
```

![在此处输入图像描述](https://i.stack.imgur.com/YuYh2.png)

# android - 布局交叉滚动

> ID：15789101
> 
> 赞同：1
> 
> 时间：2013-04-03T13:45:58.530
> 
> 标签：android, layout

我正在尝试构建以下布局逻辑：

![在此处输入图像描述](https://i.stack.imgur.com/43pBC.png)

1.  Block C 和 Block B 可以上下滚动，此时 Block A 不滚动；
2.  Block A 和 Block B 可以左右滚动，此时 Block C 不滚动；

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:40:04.823

我目前的解决方案是：

1.  在 Horizo​​ntalScrollView1 中包装块 A 的内容
2.  在 Horizo​​ntalScrollView2 中包装 B 块的内容
3.  在 LinearLayout 中包装 Block C 和 Block B 的内容
4.  在 ScrollView 中包装 LinearLayout
5.  同步 Horizo​​ntalScrollView1 和 Horizo​​ntalScrollView2 的滚动，如 [同步 ScrollView 滚动位置 - android](https://stackoverflow.com/questions/3948934/synchronise-scrollview-scroll-positions-android)

我的xml：

```
 <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:orientation="vertical" >

        <com.widget.ObservableHorizontalScrollView
            android:id="@+id/horizontalScrollView1"
            android:layout_marginLeft="200dp"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="horizontal" >
            </LinearLayout>
        </com.widget.ObservableHorizontalScrollView>

    </LinearLayout>

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <ScrollView
            android:id="@+id/scrollView1"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="wrap_content" >

                <LinearLayout
                    android:id="@+id/channel_layout"
                    android:layout_width="200dp"
                    android:layout_height="wrap_content"
                    android:orientation="vertical" >
                </LinearLayout>

                <com.widget.ObservableHorizontalScrollView
                    android:id="@+id/horizontalScrollView2"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" >

                    <LinearLayout
                        android:layout_width="match_parent"
                        android:layout_height="wrap_content"
                        android:orientation="vertical" >
                    </LinearLayout>
                </com.widget.ObservableHorizontalScrollView>

            </LinearLayout>

        </ScrollView>

    </LinearLayout>

</LinearLayout> 
```

# java - 用于创建显示我的 GPS 点的地图图像的免费地图

> ID：15789102
> 
> 赞同：1
> 
> 时间：2013-04-03T13:45:58.923
> 
> 标签：java, map, gps

我需要创建 java 应用程序来生成在地图上显示用户定义点的图像。是否有任何免费的 Java 库包含我可以用于此目的的免费地图？

谢谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:54:12.077

我建议使用谷歌地图。希望有帮助

# c# - THEN 和 END IF 是否完全等同于大括号

> ID：15789104
> 
> 赞同：0
> 
> 时间：2013-04-03T13:46:01.813
> 
> 标签：c#, vb.net, if-statement, language-comparisons

当编译器看到`THEN...END IF`（在 Vb 中）和`{ ... }`（在 C# 中）这似乎是分隔`If`语句时，它是否看到相同的东西。

如果以同样的方式对待它们，为什么我可以在 C# 中这样做：

```
if(true)
 int x = 1;

//Instead of

if(true)
{ 
 int x = 1;
} 
```

但不是在 VB 中：

```
//Won't Compile

if(true)
x As Integer = 1

//Instead Of

if(true) then
x As Integer = 1
End If 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T13:47:41.340

C# 和 VB.NET 是两种不同的语言，具有不同的语法规则。没有一种语言的规则与另一种语言的类似规则的一对一映射。

THEN 和 END IF 在*语义*上与 if 语句的花括号相同（即它们的含义相同），但 VB.NET 语法不允许省略它们。

顺便说一句：您的示例相当糟糕，因为在这种特殊情况下，即使在 C# 中，您也不能省略花括号。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T13:57:19.383

C# 和 vb.net 在解析语句时有不同的规则。VB.net 派生自 QuickBasic，后者派生自 Microsoft BASIC 解释器，其中带有错误条件的 IF/THEN 语句将导致解释器向前跳到行尾或 ELSE 语句，以先发生者为准。因为必须将所有以 IF 语句为条件的语句与该语句放在同一行上有点烦人，所以 QuickBasic 被设计为如果一行包含 IF/THEN、ELSEIF/THEN 或 ELSE 但没有其他语句，执行将跳过，直到下一个相应的 ELSEIF、ELSE 或 ENDIF。

虽然 VB 语法有点特别，但实际上效果很好。在这两种语言中可能都不错的一件事是一个声明，其明确定义的目的是开始一个变量范围块。在 vb.net 中，可以说：

```
If True Then ' Scoping block
  Dim SB As New System.Text.StringBuilder()
  ...
End If 
```

但这似乎有点恶心。在 C# 中为此目的单独使用大括号的能力可能被视为该语言的“胜利”，但如果没有注释，则在阅读代码时不清楚大括号的目的是用作变量范围块，而不是将一些本应有条件或重复执行的语句分组，但由于某种原因“丢失”了它们的控制语句。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T13:50:02.720

它们不等效，因为 VB 中的“语句结束”分隔符是行尾。VB中的等价物是：

```
Dim x As Integer
If True Then x = 1 
```

顺便说一句，为了使您的 C# 示例更正确，它实际上应该是：

```
int x = 0;
if (true)
    x = 1; 
```

请注意，我只是在这里回答您关于等效语法 eps 的问题，而不是判断编码风格，因为其他答案中提到的原因，您绝对不应该这样做。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-03T14:06:23.847

C# 中的语法是

```
if (conditional)
    statement
else
    statement 
```

语句可以是以分号结尾的单行代码，也可以是包含多个语句的一组括号。

请注意，这也是完全有效的：

```
if (conditional)
{
    {
        {
            CallMyFunction();
            CallMyOtherFunction();
        }
    }
} 
```

就 if 而言，它下面有一个语句，最外面的花括号。额外的大括号与 if 语句的性质无关，一个语句内只有两个语句，一个语句内，一个语句内......

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T13:48:33.713

这就是语言的设计方式。有很多人讨厌在单行`if`语句中排除大括号的自由，因为它为新手打开了难以发现的错误的可能性：

```
if(p.Birthday == DateTime.Today)
    SendBirthdayCard(); 
```

如果您（看似无害）将其修改为：

```
if(p.Birthday == DateTime.Today)
    Console.WriteLine("Happy Birthday!!");
    SendBirthdayCard(); 
```

突然*每个人都*收到一张生日贺卡！！

# java - java公共类名

> ID：15789112
> 
> 赞同：-5
> 
> 时间：2013-04-03T13:46:14.720
> 
> 标签：java

我是 Java 和这种表达方式的新手。

```
public class name<Item> 
```

这里有什么意义`Item`？如果我删除它会发生什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T13:48:09.677

那是泛型类的声明。`Item`是在声明类的实例时（或可能在类被子类化时）填充的类型的参数名称。有关更多信息，请参阅[有关泛型的 Java 教程](http://docs.oracle.com/javase/tutorial/java/generics/)。

至于如果你删除它会发生什么，这取决于`name`类的主体是什么。但是，通常发生的事情是您需要替换`Item`定义中所有出现的`name`with `Object`。在客户端代码中，您有时需要使用强制类型转换来编译内容，您将失去类型安全性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T13:48:54.517

它是定义一个类可以接受的通用类型。

最容易理解的例子是`List`

如果您创建一个，您可以指定您希望该列表包含什么类型的元素。

例如，如果你想要一个只包含 String 对象的列表，你可以这样定义它：

```
List<String> myStringList; 
```

当你这样做时，你可以确定只有*字符串*会被添加到你的列表中。那就是`Type safety`。

您甚至不能为您的列表分配具有这种类型安全性的子类型的另一个列表，这是一个示例：

```
List<Number> myNumberList;
List<Integer> myIntegerList = new ArrayList<Integer>();
myNumberList = myIntegerList; 
```

如果您尝试收到此错误：

> 类型不匹配：无法转换`List<Integer>`为`List<Number>`

但是在这些情况下需要做一些事情，您可以通过更改 List 类型定义来使前面的场景工作，如下所示：

```
List<? extends Number> myNumberList;
List<Integer> myIntegerList = new ArrayList<Integer>();
myNumberList = myIntegerList; 
```

这工作得很好。

*   **另请参阅**：[http ://docs.oracle.com/javase/tutorial/java/generics/](http://docs.oracle.com/javase/tutorial/java/generics/)

# elasticsearch - Elasticsearch：查询避免定义分析器/使用另一个分析器

> ID：15789114
> 
> 赞同：1
> 
> 时间：2013-04-03T13:46:27.063
> 
> 标签：elasticsearch

我有一个关于 ElasticSearch 查询的问题。我有一个名为“名称”的字段，它是使用语音插件中的分析器定义的。

```
 "name" : {
      "type" : "string",
      "store" : "yes",
      "index" : "analyzed",
      "analyzer" : "soundsAnalyzer",
      "boost" : 10.0
  }, 
```

到目前为止一切正常！但是我在这个字段上有一个特定的查询，我想获得完全匹配而不是类似的听起来匹配。我试图通过使用术语查询和文本查询来实现这一点。术语查询根本不返回任何结果，我不知道为什么。通过使用文本查询并定义另一个分析器，我也一无所获。我尝试了以下查询：

```
{
  "query": {
    "text": {
      "documents.name": {
        "query": "England",
        "analyzer": "plainAnalyzer"
      }
    }
  }
} 
```

所以我的问题是，我怎样才能避免映射中定义的分析器只是为了这个特定的查询来获得精确匹配？TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:12:34.657

您将不得不对该字段进行两次索引 - 一次使用`soundsAnalyzer`，另一次使用`plainAnalyzer`. [您可以使用multi_field](http://www.elasticsearch.org/guide/reference/mapping/multi-field-type/)类型实现此目的：

```
"name" : {
    "type" : "multi_field",
    "fields" : {
        "name" : {"type" : "string", "store" : "yes", "index" : "analyzed", "analyzer" : "soundsAnalyzer", "boost" : 10.0},
        "plain" : {"type" : "string", "index" : "analyzed", "analyzer" : "plainAnalyzer"}
    }
} 
```

所有当前正在使用的查询`soundsAnalyzer`将保持不变。在需要`plainAnalyzer`您可以使用的查询中，`name.plain`而不是`name`：

```
{
  "query": {
    "text": {
      "documents.name.plain": {
        "query": "England"
      }
    }
  }
} 
```

# ruby-on-rails - 你如何通过belongs_to 关联加载模型的多个实例？

> ID：15789122
> 
> 赞同：0
> 
> 时间：2013-04-03T13:46:52.503
> 
> 标签：ruby-on-rails, serialization, ember.js, ember-data

我正在使用 rails / ember / ember-data，并尝试侧载多个关联。

```
App.Plan = DS.Model.extend({
  schedule: DS.belongsTo('App.Schedule'),
  questions: DS.hasMany('App.Question')
});

App.Schedule = DS.Model.extend({
  plan: DS.belongsTo('App.Plan'),
  start: DS.attr('date'),
});

App.Question = DS.Model.extend({
  name: DS.attr('string')
}) 
```

和以下 rails 序列化器：

```
class PlanSerializer < ActiveModel::Serializer
  embed :ids, :include => true

  attributes :id, :owner_id

  has_one :schedule
  has_many :questions
end

class QuestionSerializer < ActiveModel::Serializer
  attributes :id, :name, :plan_id
end

class ScheduleSerializer < ActiveModel::Serializer
  attributes :id, :start, :time_established, :plan_id
end 
```

我收到以下错误：

```
Uncaught Error: assertion failed: Your server returned a hash with the 
key schedules but you have no mapping for it 
```

这是指什么“映射”？我正在尝试通过 /plans.json 提取所有信息

如果我注释掉所有日程安排的东西，计划/问题加载正常。但我就是无法让时间表正常运行。

我认为这与我嵌入多个 scheduleS（复数）但计划关联是单数的事实有关。我想这可能与客户端的多元化有关，并尝试了：

```
DS.RESTAdapter.configure("plurals", {
  schedule: 'schedules'
}); 
```

...但没有帮助。很确定这不是问题，因为它不是不规则的复数形式。

它与返回的json的顺序有关吗？

这个 json 返回时间表、问题，然后是计划。虽然计划是“根”节点。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T18:46:22.503

```
DS.RESTAdapter.configure('App.Schedule',
  {sideloadAs: 'schedules'}
); 
```

# java - 我需要为聊天客户端分配多少线程？

> ID：15789134
> 
> 赞同：2
> 
> 时间：2013-04-03T13:47:10.957
> 
> 标签：java, multithreading, file, chat, webcam

我正在创建一个聊天客户端，它允许用户使用他们的网络摄像头并发送他们的视频。这是一个基于局域网的软件。不会有语音聊天，只有视频和文字。

此外，除了群聊之外，还可以进行一对一的聊天，允许用户使用网络摄像头。会议聊天中没有网络摄像头。还将进行文件共享。

*   假设一次允许的最大用户数为 100，我总共需要分配多少个线程？*   如何管理端口？我的意思是，分配，取消分配等

*我最初的猜测是客户端和服务器之间需要一个线程用于会议文本聊天，1 个线程用于一对一文本聊天，每个启动网络摄像头的用户需要 1 个线程。每个一对一聊天有 1 个线程用于文件共享，n 线程用于会议中的文件共享，其中 n 是一次连接的用户数*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T10:31:01.327

假设您使用 java 进行客户端实现，您可以为每个用户使用一个线程进行群聊，如果您想要 p2p 连接，则可以为每个一对一连接使用一个线程（出于安全原因，您可以通过服务器进行初始握手，然后在 p2p 模式下继续）。

如果您打算使用 websocket 和 web 客户端，则不能使用 p2p，因为浏览器只能启动 websocket 连接，但不能接受。要为每个客户端使用一个通道，您可以为传出数据包标记内容类型并对其进行适当解码。该方案在 netty 中很容易实现，您可以将协议实现放在 TCP\IP 套接字之上。此外，由于 netty 是异步的，您可以通过 NIO 获得一些速度提升

# ruby-on-rails - 使 url_for 保留范围

> ID：15789144
> 
> 赞同：2
> 
> 时间：2013-04-03T13:47:29.350
> 
> 标签：ruby-on-rails, routing, scope, helpers

在我的 Rails 应用程序中，我需要为某些资源定义两条不同的路线。我正在尝试使用`scope`有范围和无范围的路线。因此我定义：

```
 scope path: '(:prefix)', :prefix => /my/ do
     resources :users
   end 
```

现在我的用户可以通过`/my/users/:id`或 联系到`/users/:id paths`。

问题是我需要 URL 帮助程序来根据我用来到达页面的路径提供正确的路径。我需要链接到`/my/users/:id/edit`当我打开页面时使用`/my/users/:id`和链接到`/users/:id/edit`当我打开时`/users/:id`。更重要的是，我需要正确工作的表格，使用`url_for`助手来确定正确的操作。对于上述配置`url_for @user`生成`/25/users/25`（何时`@user.id == 25`）。

问题是如何`url_for`保留用于到达页面的范围？

或者，也许您可​​以建议不同的解决方案以允许不同的 URL 访问某些资源并保留路径以进行直观导航？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-16T10:12:07.363

以下解决了我这边的问题：

```
get '/some_path' => 'controller#action',  somevar: 'blah'
scope path: '/my/' do
  get '/some_path' => 'controller#action', somevar:'blahblah'
end 
```

似乎如果路由共享相同的变量，则 url_for 使用它来区分歧义。

# sql - 如何使用 ARel 加入子查询？

> ID：15789145
> 
> 赞同：10
> 
> 时间：2013-04-03T13:47:30.643
> 
> 标签：sql, ruby-on-rails-3, activerecord, ruby-on-rails-3.2, arel

我有一些大规模的 SQL 请求，涉及跨我的 rails 应用程序中的各种模型进行连接。单个请求可能涉及 6 到 10 个表。

为了更快地运行请求，我想在连接中使用子查询（这样我可以在连接之前过滤这些表并将列减少到我需要的列）。我正在尝试使用 ARel 来实现这一目标。

我以为我在那里找到了解决问题的方法：[How to do joins on subqueries in AREL inside Rails](https://stackoverflow.com/questions/7528750/how-to-do-joins-on-subqueries-in-arel-within-rails)，但事情一定已经改变了，因为我得到了`undefined method '[]' for Arel::SelectManager`.

有谁知道如何实现这一点（不使用字符串）？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-11-06T14:26:15.433

皮埃尔，我认为更好的解决方案可能如下（灵感来自[这个要点](https://gist.github.com/stevenharman/4589186)）：

```
a = A.arel_table  
b = B.arel_table

subquery = b.project(b[:a_id].as('A_id')).where{c > 4}  
subquery = subquery.as('intm_table')  
query = A.join(subquery).on(subquery[:A_id].eq(a[:id])) 
```

没有特别的理由将别名命名为“intm_table”，我只是认为它不会那么混乱。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-04T07:42:04.640

好的，所以我的主要问题是你不能加入 Arel::SelectManager ...但是你可以加入表别名。所以要在我上面的评论中生成请求：

```
a = A.arel_table
b = B.arel_table

subquery = B.select(:a_id).where{c > 4}
query = A.join(subquery.as('B')).on(b[:a_id].eq(a[:id])
query.to_sql # SELECT A.* INNER JOIN (SELECT B.a_id FROM B WHERE B.c > 4) B ON A.id = B.a_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-22T08:15:45.113

正在寻找这个，并得到了其他答案的帮助，但两者都有一些错误，例如`A.join(...`应该是`a.join(...`。
我也错过了如何构建一个`ActiveRecord::Relation`.

这是`ActiveRecord::Relation`在 Rails 4 中构建 , 的方法

```
a = A.arel_table
b = B.arel_table

subsel = B.select(b[:a_id]).where(b[:c].gt('4')).as('sub_select')
joins  = a.join(subsel).on(subsel[:a_id].eq(a[:id])).join_sources
rel    = A.joins(joins)
rel.to_sql
#=> "SELECT `a`.* FROM `a` INNER JOIN (SELECT `b`.`a_id` FROM `b` WHERE (`b`.`c` > 4)) sub_select ON sub_select.`a_id` = `a`.`id`" 
```

# php - 在codeigniter中为文件使用不同的url

> ID：15789147
> 
> 赞同：0
> 
> 时间：2013-04-03T13:47:33.553
> 
> 标签：php, codeigniter, url-rewriting, routes

您好，我想更改页面的 URL

目前看起来

```
www.domain.com/privacy 
```

我希望它看起来像

> www.domain.com/privacy-policy

因为它看起来好多了。有没有办法在codeigniter中实现这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:03:23.113

CodeIgniter 使用中定义的路由`config/routes.php`来重写 URL。

像这样添加一行：`$routes['privacy-policy'] = 'controller/action';`

如需完整文档，请阅读用户指南：
[http ://ellislab.com/codeigniter/user-guide/general/routing.html](http://ellislab.com/codeigniter/user-guide/general/routing.html)

# javascript - 使用 Ajax POST 和 PHP 取消链接

> ID：15789149
> 
> 赞同：1
> 
> 时间：2013-04-03T13:47:37.613
> 
> 标签：javascript, jquery, ajax, unlink

我有这个烦人的问题，似乎无法解决。基础是一个动态表，它通过 JQuery 加载到**client.php ，通过****getdata.php**显示来自 MySQL 数据库的数据。在出现在**client.php**中的这个数据中，我有一个按钮链接，我从中删除了数据库中的选定行，同时 unliks 两个具有相同名称但来自两个不同目录的图像。

如果我在按钮上手动输入图像名称，这一切都有效，但在我使用时却不行`$row['photo']`。奇怪的是，如果我在 javascript 函数中使用`$row['photo']`并回显 的值，它会显示正确的名称。`photo`

**获取数据.php**

```
$output_string .= '<td><input type=button id="testbtn" value="'.$movedatabutton1.'" onClick=movedata("'.$selectedList.'","'.$movedatadestination1.'","'.$row['id'].'","'.$row['photo'].'");></td>'; 
```

**客户端.php**

```
 function movedata(from,to,id,photo) {
    $.post('movedata.php', { from: from, to: to, id: id, photo: photo },
        function(output) {
            $('#topDivLeft').html(output).show();
            alert(photo);
        });
    } 
```

**移动数据.php**

```
$from = mysql_real_escape_string($_POST["from"]);
$to = mysql_real_escape_string($_POST["to"]);
$id = mysql_real_escape_string($_POST["id"]);
$photo = mysql_real_escape_string($_POST["photo"]);
$photoPath = "upload/".$photo;
$thumbPath = "uploadthumb/".$photo;

if ($to == "removePermanently") {
// ta bort ansökan permanent
$sql = mysql_query("DELETE FROM $from WHERE id = $id")
    or die(mysql_error()); 

// stäng bilderna om de är öppna    
$fp = fopen($photoPath, 'w') or die("can't open file");
fclose($fp);
$ft = fopen($thumbPath, 'w') or die("can't open file");
fclose($ft);

// ta bort bilderna från servern
if (is_writable("$photoPath")) unlink("$photoPath");
if (is_writable("$thumbPath")) unlink("$thumbPath");
} else {
// flytta ansökan
$sql = mysql_query("INSERT INTO $to (id, Tid, Fornamn, Efternamn, Gata, Postnr, Postort, Telefon, Epost, Projektplats, Projekttyp, Nuvarande, Onskemal, Budget, Programledare, photo, Kommentar) SELECT id, Tid, Fornamn, Efternamn, Gata, Postnr, Postort, Telefon, Epost, Projektplats, Projekttyp, Nuvarande, Onskemal, Budget, Programledare, photo, Kommentar from $from WHERE id = $id") 
    or die(mysql_error()); 
$sql = mysql_query("DELETE FROM $from WHERE id = $id")
    or die(mysql_error()); 
} 
```

将不胜感激任何帮助！

# xamarin.ios - ServiceStack.Text.MonoTouch“无法 AOT 程序集”

> ID：15789159
> 
> 赞同：2
> 
> 时间：2013-04-03T13:47:52.913
> 
> 标签：xamarin.ios, servicestack, aot

仅在调试模式下为设备编译应用程序时遇到问题。它将在发布模式下工作。我正在链接每个程序集。

```
error MT3001: Could not AOT the assembly '/Users/Paul/Git/MedXChange.iOS/Src/MedXChange.iOS/bin/iPhone/Debug/MedXVue.app/ServiceStack.Text.MonoTouch.dll'
  at MTouch.GetObjectFileForAssembly (System.String assemblyName, Abi abi) [0x00000] in <filename unknown>:0 
  at MTouch+<CompileAssemblies>c__AnonStorey11.<>m__1C (System.String s) [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.Parallel+<ForEach>c__AnonStorey36`1[System.String].<>m__34 (System.String e, System.Threading.Tasks.ParallelLoopState s, System.Object l) [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.Parallel+<ForEach>c__AnonStorey35`2[System.String,System.Object].<>m__32 () [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.TaskActionInvoker+ActionInvoke.Invoke (System.Threading.Tasks.Task owner, System.Object state, System.Threading.Tasks.Task context) [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.Task.InnerInvoke () [0x00000] in <filename unknown>:0 
  at System.Threading.Tasks.Task.ThreadStart () [0x00000] in <filename unknown>:0 
```

我怀疑在尝试 AOT 编译程序集时可以在这里找到问题。

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc  -miphoneos-version-min=5.0 -arch armv7s  -std=c99 -I/Developer/MonoTouch/SDKs/MonoTouch.iphoneos.sdk/usr/include -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk -x assembler-with-cpp -c /var/folders/yn/cx1bv3414z938rqkk72fyngw0000gn/T/tmpe7f19b4.tmp/Noodle.iOS.dll.armv7s.s -o /var/folders/yn/cx1bv3414z938rqkk72fyngw0000gn/T/tmpe7f19b4.tmp/Noodle.iOS.dll.armv7s.o
MONO_PATH=/Users/Paul/Git/MedXChange.iOS/Src/MedXChange.iOS/bin/iPhone/Debug/MedXVue.app /Developer/MonoTouch/usr/bin/arm-darwin-mono --debug --aot=mtriple=armv7-darwin,full,static,asmonly,direct-icalls,soft-debug,no-direct-calls,iphone-abi,outfile=/var/folders/yn/cx1bv3414z938rqkk72fyngw0000gn/T/tmpe7f19b4.tmp/ServiceStack.Text.MonoTouch.dll.armv7.s "/Users/Paul/Git/MedXChange.iOS/Src/MedXChange.iOS/bin/iPhone/Debug/MedXVue.app/ServiceStack.Text.MonoTouch.dll"
Mono Ahead of Time compiler - compiling assembly /Users/Paul/Git/MedXChange.iOS/Src/MedXChange.iOS/bin/iPhone/Debug/MedXVue.app/ServiceStack.Text.MonoTouch.dll
Code: 15446124 Info: 420334 Ex Info: 3554193 Unwind Info: 5197 Class Info: 2808 PLT: 13884 GOT Info: 805930 GOT: 224904 Offsets: 177903
Output file: '/var/folders/yn/cx1bv3414z938rqkk72fyngw0000gn/T/tmpe7f19b4.tmp/ServiceStack.Text.MonoTouch.dll.armv7.s'.
Linking symbol: '_mono_aot_module_ServiceStack_Text_MonoTouch_info'.
Compiled 24658 out of 24658 methods (100%)
Methods without GOT slots: 0 (0%)
Direct calls: 0 (0%)
JIT time: 4185 ms, Generation time: 7613 ms, Assembly+Link time: 3 ms. 
```

这是在发布模式下构建成功时 ServiceStack.Text.MonoTouch 程序集的 AOT 编译。

```
/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/usr/bin/gcc  -miphoneos-version-min=5.0 -arch armv7  -std=c99 -I/Developer/MonoTouch/SDKs/MonoTouch.iphoneos.sdk/usr/include -isysroot /Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS6.1.sdk -x assembler-with-cpp -c /var/folders/yn/cx1bv3414z938rqkk72fyngw0000gn/T/tmp47cefef2.tmp/System.Core.dll.armv7.s -o /var/folders/yn/cx1bv3414z938rqkk72fyngw0000gn/T/tmp47cefef2.tmp/System.Core.dll.armv7.o
MONO_PATH=/Users/Paul/Git/MedXChange.iOS/Src/MedXChange.iOS/bin/iPhone/Release/MedXVue.app /Developer/MonoTouch/usr/bin/arm-darwin-mono --aot=mtriple=armv7-darwin,full,static,asmonly,direct-icalls,nodebug,outfile=/var/folders/yn/cx1bv3414z938rqkk72fyngw0000gn/T/tmp47cefef2.tmp/ServiceStack.Text.MonoTouch.dll.armv7.s "/Users/Paul/Git/MedXChange.iOS/Src/MedXChange.iOS/bin/iPhone/Release/MedXVue.app/ServiceStack.Text.MonoTouch.dll"
Mono Ahead of Time compiler - compiling assembly /Users/Paul/Git/MedXChange.iOS/Src/MedXChange.iOS/bin/iPhone/Release/MedXVue.app/ServiceStack.Text.MonoTouch.dll
Code: 5584144 Info: 301083 Ex Info: 111005 Unwind Info: 7670 Class Info: 2808 PLT: 11634 GOT Info: 709474 GOT: 117328 Offsets: 128308
Output file: '/var/folders/yn/cx1bv3414z938rqkk72fyngw0000gn/T/tmp47cefef2.tmp/ServiceStack.Text.MonoTouch.dll.armv7.s'.
Linking symbol: '_mono_aot_module_ServiceStack_Text_MonoTouch_info'.
Compiled 24367 out of 24367 methods (100%)
Methods without GOT slots: 11790 (48%)
Direct calls: 2466 (16%)
JIT time: 3470 ms, Generation time: 2578 ms, Assembly+Link time: 5 ms. 
```

唯一看起来不同的是“直接调用”和“没有 GOT 插槽的方法”。请注意，我没有更改任何代码，只是来回更改配置、构建和清理。

# sql - 在ssis中动态生成上个月最后一天的文件

> ID：15789162
> 
> 赞同：0
> 
> 时间：2013-04-03T13:48:04.027
> 
> 标签：sql, sql-server-2008, tsql, ssis

我需要使用 SSIS 生成每月最后一天的文件。我正在使用 SQL 获取它。

```
DECLARE @mydate DATETIME
SELECT @mydate = '03/21/2013'
SELECT CONVERT(VARCHAR(25),DATEADD(dd,-(DAY(@mydate)),@mydate),112) 
--20130228 
```

我不知道如何将它放在连接管理器中的 SSIS 表达式中。
文件名会像`'ABC_20130228.txt'`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:08:14.307

为什么使用脚本任务？为什么不使用这里描述的表达式：

[将日期戳添加到 SSIS 包中的 .txt 文件？](https://stackoverflow.com/questions/4372009/add-datestamp-to-a-txt-file-in-an-ssis-package)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:56:09.607

我会将日期分配给 SSIS 中的变量，然后将该变量传递给构建文件名并将其放入输出变量的脚本任务。然后，您可以为该输出文件在 Connection Manager 的属性中的 Expressions 属性组下的 ConnectionString 属性中分配输出变量，以使用该变量的值作为您的文件名。

总结：

1.  使用脚本任务并将文件名中使用的日期作为只读变量作为类型字符串传递给它，以使其更易于操作。
2.  将读/写变量分配给脚本任务以存储您的文件名。
3.  在脚本任务中创建文件名。
    变量命名：User::DataFile, User::MaxDate 即 String DataFileName；字符串日期使用；

    DateToUse= (String) Dts.Variables["MaxDate"].value; DataFileName="ABC_"+Convert.ToString((Convert.ToDateTime(DateToUse)).Year)+Convert.ToString((Convert.ToDateTime(DateToUse)).Month)+Convert.ToString((Convert.ToDateTime(DateToUse)) .Day)+".txt"; Dts.Variables["DataFile"].value=DataFileName;

4.  将 Connection Manager 属性的 Expression 部分中的变量分配给 CONNECTIONSTRING 属性。

那应该这样做。如果您需要特定路径，则将在步骤 4 中将其连接到属性和变量上。

# ios - 从另一个视图控制器将对象添加到数组

> ID：15789163
> 
> 赞同：3
> 
> 时间：2013-04-03T13:48:04.320
> 
> 标签：ios, objective-c, uitableview, uiviewcontroller, nsarray

我有`HomeViewController`一个 tableView 填充了数组`tableViewArray`（最初是空的）。当我点击 barButton 时，我模态地转到另一个视图控制器`OutsideViewController`，该控制器具有另一个由不同数组填充的 tableView。

我想做的是以下几点：

当我点击 中的一行时`OutsideViewController`，我想将选定的字符串值添加到 中，`tableViewArray`这样当我返回时`HomeViewController`，tableView 会在 tableView 中列出该新项目。

到目前为止，这是我尝试过的：

在我的`-didSelectRowAtIndexPath`方法中，我`OutsideViewController.m`有这段代码：

```
NSString *selectedRow = [outsideArray objectAtIndex:indexPath.row];
NSMutableArray *temporaryArray = [NSMutableArray arrayWithObject:selectedRow];

HomeViewController *homeVC = [[HomeViewController alloc] init];
homeVC.tableViewArray = temporaryArray; 
```

该代码有效，`HomeViewController`但当我返回时，tableView 仍然是空的。我是否必须重新加载 tableView 数据？我这样做对吗？

这就是我在 Storyboard 中设置视图控制器的方式：

```
HomeViewController -(modal segue)-> Navigation Controller --> OutsideViewController 
```

另外，OutsideViewController 到 HomeViewController 的返回是通过这行代码完成的：

```
[self dismissViewControllerAnimated:YES completion:^{ }]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T13:58:47.917

你做错了什么是你分配了一个新的`HomeViewController`. 我会做的是`HomeViewController`在你的`OutsideViewController`. 这里是如何。

首先，在 中`OutsideViewController.h`，创建一个属性，如下所示：

```
@property (nonatomic, weak) HomeViewController *homeVC; 
```

不要忘记添加`@class HomeViewController;`您的 .h 和`#import "HomeViewController.h"`.m

在`HomeViewController`中，实现这样的`prepareForSegue:`方法（将*ModalSegueIdentifier*替换为您的 segue 标识符）：

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"ModalSegueIdentifier"]) {
        OutsideViewController *modalVC = (OutsideViewController*)segue.destinationViewController;
        modalVC.homeVC = self;
    }
} 
```

然后，在`OutsideViewController.m`，而不是做：

```
HomeViewController *homeVC = [[HomeViewController alloc] init];
homeVC.tableViewArray = temporaryArray; 
```

做这个 ：

```
_homeVC.tableViewArray = temporaryArray; 
```

当您离开模态 VC 时，您的 HomeVC 将拥有正确的数组。别忘了刷新你的`UITableView`！

*NB：当然，还有很多其他方法，它可能不是最好的方法。但是，它应该可以工作。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:14:06.990

您也可以使用委托来实现这一点。您必须`OutsideViewController`使用负责将新对象发送到您的`HomeViewController`. 在 OutsideViewController.h 中执行此操作：

```
@protocol OutsideViewDelegate <NSObject>
- (void)OutsideViewController:(OutsideViewController *)controller didAddObject:(NSString *)object;
@end 
```

在实现文件中，您必须稍微更改`didSelectRowAtIndexPath:`方法：

```
NSString *selectedRow = [outsideArray objectAtIndex:indexPath.row];
[self.delegate OutsideViewController:self didAddObject:selectedRow]; 
```

在您的 HomeViewController.h 中，您必须使您的类符合协议：

```
@interface HomeViewController : UIViewController <OutsideViewDelegate> 
```

之后，为委托创建一个属性：

```
@property (nonatomic, weak) id <OutsideViewDelegate> delegate; 
```

要完成该过程，请在 HomeViewController.m 中实现协议以从 OutsideViewController 接收新对象：

```
- (void)OutsideViewController:(OutsideViewController *)controller didAddObject:(NSString *)object
{
     if (object != nil)
     {
          [self.tableViewArray addObject:object];
     }

     [self dismissViewControllerAnimated:YES completion:nil];
} 
```

上面的代码取决于您的`tableViewArray`对象是否可变。如果不是，您可以将协议方法中的对象参数类型更改为不可变数组对象，然后分配`tableViewArray`给新数组。

**编辑：**

在`prepareForSegue:`方法中不要忘记设置委托：

```
-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"SEGUE_IDENTIFIER"]) {
        OutsideViewController *outsideVC = (OutsideViewController *)[segue destinationViewController];
        [outsideVC setDelegate:self];
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:17:31.313

首先确定你`alloc`，`init`你`tableViewArray`的`HomeViewController`

二、在这一行

```
HomeViewController *homeVC = [[HomeViewController alloc] init] 
```

您正在创建一个`HomeViewController`不正确的新引用，您需要传递正确的引用，可能会在您的 HomeViewController 中创建变量 `OutsideViewController`

即使您正确地执行了第一个和第二个建议，您仍然会看到一个空的 tableview，因为您没有重新加载 tableview，不知何故您需要触发`[self.tableview reloadData];`方法。

这意味着；您需要学习**Delegate**或**NSNotifications**模式以在 child->parent 场景之间进行通信

[如何设置一个简单的委托来在两个视图控制器之间进行通信？](https://stackoverflow.com/questions/6168919/how-do-i-set-up-a-simple-delegate-to-communicate-between-two-view-controllers)

[http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_nsnotificationcenter/](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_nsnotificationcenter/)

对于您的问题，只需在您的`Outside`; 在你的 OutsideViewController.h

```
#import <UIKit/UIKit.h>

@protocol OutsideDelegate;

@interface{}//bunch of interface stuff

// Declare a property for the delegate
@property (weak) id <OutsideDelegate> delegate;
@end

// Protocol Header
@protocol OutsideDelegate <NSObject>
@optional
- (void)dismissPop:(NSMutableArray *)list;
@end 
```

在你的 OutsideViewController.m

```
@synthesize delegate;

//run delegate method
[delegate dismissPop:temporaryArray];
[self dismissViewControllerAnimated:YES completion:^{ }]; 
```

在你的 HomeViewController.h

```
#import "OutsideViewController.h"
@interface OutsideViewController : UITableViewController<OutsideDelegate>
{}
@property (strong, nonatomic) OutsideViewController *pvc; 
```

在你的 HomeViewController.m

```
@synthesize pvc;

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {

    if ([[segue identifier] isEqualToString:@"your segue"]) {
        pvc = [segue destinationViewController];
        [pvc setDelegate:self];
    }
}
// delegate callback function

- (void)dismissPop:(NSMutableArray *)list {

    self.tableViewArray=list;
    [self.tableView reloadData];
} 
```

**另一个解决方案是**

将您的视图堆栈更改为：

```
Navigation Controller --> HomeViewController -(push segue)--> OutsideViewController 
```

并应用***rdurand***的答案

并将其添加到您的 HomeViewController ：

```
-(void)viewDidAppear:(BOOL)animated
{
   [self.tableview reloadData];
} 
```

在这个解决方案中，因为你只是一个 nabigation 堆栈中的推送视图控制器`viewDidAppear`，所以每次你弹出 OutsideViewController 时都会在 HomeViewController 中调用。

# amazon-ec2 - Amazon ELB 将如何将请求分发到不同实例类型的 Amazon EC2 实例？

> ID：15789166
> 
> 赞同：6
> 
> 时间：2013-04-03T13:48:07.510
> 
> 标签：amazon-ec2, amazon-elb

如果我注册多个不同大小的实例，任何人都知道如何`ELB`分发请求。`EC2`说一`m1.medium`，一`m1.large`，一`m1.xlarge`。

`EC2`如果我注册相同大小的实例会有所不同吗？如果是，那怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T15:54:45.887

这是一个相当复杂的话题，主要是由于[Amazon ELB](http://aws.amazon.com/elasticloadbalancing/)路由文档不存在，因此需要组装一些部分来得出结论 - 请参阅我对相关问题的回答[Can Elastic Load Balancers Correctly Distribution Traffic to different size详细分析的实例](https://serverfault.com/a/386527/10305)，包括我知道的所有参考资料。

对于手头的问题，我认为这归结为 AWS 团队从 2009 年对[ELB 策略](https://forums.aws.amazon.com/message.jspa?messageID=129199#129199)的反应有些模糊：

> **ELB 松散地跟踪每个实例有多少未完成的请求（或 TCP 的连接）。** 它不会监控每个实例的资源使用情况（例如 CPU 或内存）。ELB 目前将在它认为具有最少未完成请求的实例中进行循环。*[强调我的]*

根据您的应用程序架构和请求种类，较大的[Amazon EC2 实例类型](http://aws.amazon.com/ec2/instance-types/)可能能够更快地处理请求，因此未处理的请求更少并相应地接收更多流量，但无论哪种方式，ELB 都*应该*平均分配适当的流量，即应该隐含地考虑在某种程度上不均匀的实例特征 - 虽然我自己没有尝试过，但我会推荐两者，[使用 CloudWatch 监控您的负载均衡器](http://docs.amazonwebservices.com/ElasticLoadBalancing/latest/DeveloperGuide/US_MonitoringLoadBalancerWithCW.html)以及监控您的各个 EC2 实例并将结果关联起来，以获得各自的洞察力和信心。最终设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T11:50:45.363

嗨，我同意 Steffen Opel 的观点，我最近也遇到了 AWS 的解决方案架构师之一，他对弹性负载平衡提出了一些建议，以通过 ELB 实现更好的性能。

1) 确保在所有可用区上运行的实例数量相等。例如，在 ap-southeast 的情况下，我们必须使用可用区 1a 和 1b，因此请确保您从两个区域连接到 ELB 的实例数量相等。

2）确保您的应用程序是无状态的，这是云强制执行并建议开发人员的。

3）不要使用粘性会话。

5）将 TTL（生存时间）减少到最大可能水平，例如 10 秒或其他时间。

6) 不健康检查 TTL 应该是最小的，这样 ELB 就不会保留不健康的实例。

7）如果您排除了 ELB 的大量流量，请确保您对 ELB 本身进行负载测试，它的扩展速度不如您的 ec2 实例。

8）如果你正在缓存，那么想一千次你从哪一点开始选择要缓存的数据。

最重要的提示只是为了帮助您更好地做到这一点。最好有相同大小的实例。

# actionscript-3 - AS3 围绕其中心点旋转对象

> ID：15789168
> 
> 赞同：10
> 
> 时间：2013-04-03T13:48:14.777
> 
> 标签：actionscript-3, rotation

我希望这个对象围绕它的中心而不是左上角旋转。代码如下所示：

```
 switch (event.keyCode)
        {
            case 37:
            car.rotation = -90;
               car.x -= 5;
               break; 
```

因此，当我按下左键时，汽车向左转，但现在它跳了一点，因为它绕着顶角旋转。

谢谢

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-03T14:19:05.663

以下将围绕 center 旋转：

```
public function rotateAroundCenter(object:DisplayObject, angleDegrees:Number):void {
    if (object.rotation == angleDegrees) {
        return;
    }

    var matrix:Matrix = object.transform.matrix;
    var rect:Rectangle = object.getBounds(object.parent);
    var centerX = rect.left + (rect.width / 2);
    var centerY = rect.top + (rect.height / 2);
    matrix.translate(-centerX, -centerY);
    matrix.rotate((angleDegrees / 180) * Math.PI);
    matrix.translate(centerX, centerY);
    object.transform.matrix = matrix;

    object.rotation = Math.round(object.rotation);
} 
```

它将对象的中心平移到 0,0，然后旋转它，然后再平移回来。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-03T13:55:43.350

完成此操作的最简单方法是将您的汽车精灵/电影剪辑添加到另一个精灵上，其中 x 和 y 坐标是宽度和高度属性的一半。如果汽车是在 adobe flash 中绘制的，您也可以将其拖到左上角，使中心点位于中间。

# webrtc - WEBRTC 对象# 没有方法“processSignalingMessage”

> ID：15789169
> 
> 赞同：1
> 
> 时间：2013-04-03T13:48:15.327
> 
> 标签：webrtc

我在使用 WebRTC 时遇到了问题：我使用了一个关于视频通话的示例中的代码。

```
 if (new_connection) {
       console.log('New Peer Connection');
       var peer_connection = {};
       peer_connection.connection_id = msg.from_connection_id;
       peer_connection.pc = createPeerConnection(peer_connection.connection_id,
       false);
       peer_connections.push(peer_connection);
       $('#remote').prepend(remoteVideoHtml.replace('remoteVideoId', 'peer' +
       peer_connection.connection_id));
 }

 //Now process the SDP JSON Blob received
 for (var i in peer_connections) {
       if (peer_connections[i].connection_id == msg.from_connection_id) {
             try {
                  peer_connections[i].pc.processSignalingMessage(msg.data);
             }catch (e) {
       console.log("Failed to create processSignalingMessage, exception: " +    e.message);                            
 } 
```

我需要帮助，因为我这里有一个问题。

```
 peer_connections[i].pc.processSignalingMessage(msg.data); 
```

问题是：

```
 Object #<RTCPeerConnection> has no method 'processSignalingMessage' 
```

我不知道这些函数是如何工作的以及它们是如何被调用的：

```
pc.onconnecting = function (msg) {
    console.log('onSessionConnecting');
}
pc.onopen = function (msg) {
    console.log('onSessionOpened');
}
pc.onaddstream = function (event) {
    console.log('onRemoteStreamAdded add the remote peers video stream.');
    var url = webkitURL.createObjectURL(event.stream);
    $('#peer' + connection_id).attr({
        src: url
    });
} 
```

我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T21:30:07.717

Chrome 中 WebRTC 的初始版本是基于 ROAP 的，它曾经有一个`processSignallingMessage()`方法。当前版本基于 JSEP，它具有注入本地 SDP 和从其他用户接收的 SDP 之类[`setRometeDescription()`](http://dev.w3.org/2011/webrtc/editor/webrtc.html#dom-peerconnection-setremotedescription)的方法。[`setLocalDescription()`](http://dev.w3.org/2011/webrtc/editor/webrtc.html#dom-peerconnection-setlocaldescription)

您仍然可以在旧版本的 Chrome 或 Bowser 中找到此实现。

# c++ - 模板功能，想不通

> ID：15789171
> 
> 赞同：-1
> 
> 时间：2013-04-03T13:48:19.573
> 
> 标签：c++, templates

即使参考了[http://www.cplusplus.com/doc/tutorial/templates/](http://www.cplusplus.com/doc/tutorial/templates/)和[Template Template C++ Function](https://stackoverflow.com/questions/7555391/template-template-c-function)，我仍然没有理解清楚。

如果我有一个给定的功能，说

在`week.cpp`

```
void week::writeDate (const Vector<long>& L) 
```

在`week.h`

```
void writeDate (const Vector<long>& L) 
```

我是否只是`Template <week L>`在 cpp 和 h 的函数名称之前写了？或者它会带来更多？

还是整个“周”课程本身必须是一个模板？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:06:51.613

在周.h

```
template <class T>
void writeDate (const Vector<T>& L)
{
   // code for function
} 
```

在周.cpp

```
// nothing at all 
```

这称为成员函数模板（或模板成员函数）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:07:14.120

如果您想`writeDate`用于任何类型的向量。然后你必须使它成为一个模板函数。我看不到整个代码，所以我不知道你是否在其他地方的周课程中使用了向量的类型，但如果你需要它只是为了`writeDate`那时

```
class week {
    // Other stuff

    template< typename T>
    void writeDate (const Vector<T>& L){
         // code goes here.
        }
// Other stuff

} 
```

如果您的周课程以某种方式取决于向量的类型，那么

```
template < typename T>
class week {
// Other stuff

    void writeDate (const Vector<T>& L) {
     // code goes here.
    }

// Other stuff

} 
```

# ios - 关于报告线程的 iOS 崩溃报告

> ID：15789179
> 
> 赞同：0
> 
> 时间：2013-04-03T13:48:37.090
> 
> 标签：ios, crash, segmentation-fault

这是我之前询问的关于故障排除崩溃日志的问题的后续内容：
“ [NSAutoReleasePool 正在释放视图控制器？](https://stackoverflow.com/questions/15753087/nsautoreleasepool-releasing-view-controller) ”

这个问题得到了充分的回答，但我现在有一个稍微不同的问题。如果您查看完整的崩溃日志：
[https ://gist.github.com/joelmartinez/dc2e94f0b3c554a0a384](https://gist.github.com/joelmartinez/dc2e94f0b3c554a0a384)

它实际上表明崩溃发生在线程 0：

```
Exception Type:  EXC_CRASH (SIGSEGV)
Exception Codes: 0x00000000, 0x00000000
Crashed Thread:  0 
```

所以我的问题是，考虑到唯一的用户代码在线程 7 中，假设这是崩溃的真正原因是否公平？还是那只是让我大吃一惊？我仍然无法重现此崩溃，因此任何人都可以通过查看该崩溃日志提供的任何其他提示将不胜感激:)

# csv - 如何使用dos批处理文件从csv文件中删除只有一条记录的行

> ID：15789181
> 
> 赞同：0
> 
> 时间：2013-04-03T13:48:40.353
> 
> 标签：csv, batch-file, line, dos, comma

我需要一个 dos 批处理文件来删除多行 csv 文件的单个记录行。该文件采用正确的逗号 (,) 分隔变量格式。我一直在尝试使用“for /f”批处理命令，但没有成功。在下面的示例文件中，需要删除第二行和第四行。

我的文件.csv

string_1, string_2, string_3, string_4
string_1,
string_1, string_2, string_3, string_4, string_5, string_6, string_7, string_8
string_1,
string_1, string_2, string_3, string_4, string_5, string_6, string_7, string_8, string_9

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:48:32.577

在一行中：

```
findstr /v /r ",$" myfile.csv >newfile.csv 
```

它查找所有`/v`不包含`/r`正则表达式`",$"`的行 - 行尾的逗号。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:50:54.520

你可以试试这个，它将新的 csv 保存在 new_file.csv 中：

```
@echo off &setlocal
for /f "delims=" %%i in (my_file.csv) do call:process "%%~i"
goto:eof

:process
set "line=%~1"
if "%line:*,=%"=="" goto:eof
setlocal enabledelayedexpansion
echo !line!>>new_file.csv
endlocal
goto:eof 
```

# javascript - IFrame 回发时的事件？

> ID：15789182
> 
> 赞同：0
> 
> 时间：2013-04-03T13:48:42.357
> 
> 标签：javascript, jquery

我有一些代码可以在按下 IFrame 的按钮时关闭父级中的模式。

这很好用，但我的问题是我需要在执行 close 方法之前完全回发 IFrame。

```
var $MyFrame = $("#editScheduleFrame");

// You need to wait for the iFrame content to load first
// So, that the click events work properly
$MyFrame.load(function () {
    var frameBody = $MyFrame.contents().find('body');
    var btn = frameBody.find('.schedule-submit');

    btn.on('click', function () {
        closeEditModal();
    });
}); 
```

有什么方法可以在按下计划提交按钮并且 IFrame 子页面回发后才调用 closeEditModal 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:09:01.980

服务器上的脚本应该以某种方式表示该页面是回发。它可以像编写内容属性一样简单：`<body data-postback="true">`. 然后，您可以使用 JavaScript 检测并采取相应措施。

# symfony - SonataMediaBundle - 使用 twig helper 渲染图像

> ID：15789183
> 
> 赞同：1
> 
> 时间：2013-04-03T13:48:43.777
> 
> 标签：symfony, twig, symfony-sonata

我正在关注[此文档](http://sonata-project.org/bundles/media/master/doc/reference/helpers.html)，并试图弄清楚媒体助手可以采用哪些其他参数值来渲染图像。

```
{% media media, 'small' %} 
```

在上面的例子中，媒体标签有两个参数，第一个是媒体实体，第二个是格式。但是，我没有在文档中看到该格式的值列表。

因为 {% media %} 是一个自定义的 twig 标签。我试图在 MediaTokenParser 和 MediaNode 上设置断点，但它似乎并没有在这两个地方停止。谁能给我一些关于如何找出值的指示。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T20:48:19.000

您自己定义格式。

转到[此链接](http://sonata-project.org/bundles/media/master/doc/reference/installation.html#id1)并向下滚动到该`app/config/config.yml`部分。默认情况下，只定义了两种格式，但您可以添加自己的格式，并根据您的喜好命名它们，如下所示。

```
 formats:
            small: { width: 100 , quality: 70}
            big:   { width: 500 , quality: 70} 
```

基本上，您可以在当前代码中设置`width`,`height`和。`quality`

[这里](http://sonata-project.org/bundles/media/master/doc/reference/advanced_configuration.html#advanced-configuration)有更多示例（它们似乎混淆了 TV 部分中的`quality`和`width`属性）。

附带说明一下，对源代码进行全文搜索总是一个好主意。如果您碰巧使用 Linux，快速指南`rgrep "small" * --color`会为您提供一些指向下一步的指南。`rgrep "quality" * --color`几乎可以确定它，引导您进入`Resizer`处理这些选项的类。

# php - 如何从同一文件夹上的外部文件中回显 html 片段？

> ID：15789185
> 
> 赞同：2
> 
> 时间：2013-04-03T13:48:48.593
> 
> 标签：php, echo

我想创建更干净的 html 文档/模板，它使用 echo 命令来调用 html/scripts 的片段。

虽然..我不知道如何让它工作。

我想要达到的文件就像

```
<html>
<head>
</head>
<body>
<?php
echo 'header.html';
echo 'container.html';
echo 'footer.html';
?> 
```

因此，通过这种方式，我可以在单个文档中编辑网站的每个部分，而不是在一个整体中编辑网站的所有部分。

```
<?php
$myString = 'include(portfolio.php); '; 
echo $myString;
echo file_get_html('portfolio.php');
echo file_get_html('portfolio.html');
?> 
```

（为了尝试，我在 html 和 php 文档（？>）中都放了一段仅 HTML 编码，只是为了尝试是否有任何区别..）

但是..你们可能都知道：这行不通。

因此，您的答案可能很简单：

如上所述，我如何“回显”外部文件中的片段/所有内容：回显“portfolio.html”内容。

谢谢！

ps 我认为 echo 是我“粘贴”外部编码的最佳选择，但如果你有更好、更简单、更 SEO 解决方案：做我的客人！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T13:51:22.473

使用包括

```
<html>
    <head>
    </head>
    <body>
        <?php
            include 'header.html';
            include 'container.html';
            include 'footer.html';
        ?>
    </body>
</html> 
```

[http://php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:56:12.330

无法回显文件。采用

```
require_once(dirname(__FILE__).'/header.html');
require_once(dirname(__FILE__).'/container.html');
require_once(dirname(__FILE__).'/footer.html'); 
```

# winforms - 如何在 Azure 中 ping 我的网站？

> ID：15789190
> 
> 赞同：1
> 
> 时间：2013-04-03T13:48:52.763
> 
> 标签：winforms, azure, ping

我编写了一个 Windows 应用程序，每 5 分钟对我的网站进行一次 ping 操作，以控制此时它是 UP 还是 DOWN。它在我们的网络和测试服务器中工作，但我们的实时环境在 Azure 中，它不允许我 ping 那个网站。

我可以使用什么来代替 Ping 在 Azure 中控制我的网站？如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:20:34.143

我建议你把它放在你自己的基础设施之外。主要是因为`ping`无论如何，某些东西可以给你非常有限的信息。如果该角色已启动并正在运行，但您的网站实际上因异常而崩溃怎么办？如果您有多个角色实例，其中一个已关闭，并且您的 ping 请求没有说明任何问题，该怎么办？

使用类似 Pingdom 的东西：

[http://www.pingdom.com](http://www.pingdom.com)

它可以让你做一些你自己的“内部”解决方案可能无法（或不容易）做的事情。例如事务监控（类似于非常基本的 UI 测试，例如让用户登录并点击）、多种警报方式（甚至是 Twitter 警报）和多个不同的请求位置（它可能在英国有效，但它是否有效从法国访问时？）。

像这样的服务是为了这个唯一目的而创建的。您需要定义您认为您的网站何时“启动”或“停止”。是它响应`ping`'s 的时候吗？当您的登录页面显示正常时？是在您的管理页面显示正常的时候吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T16:41:25.863

使用 HttpWebRequest 和 HttpWebResponse 并记住 Dispose 您创建的对象。特别是 HttpWebResponse 的响应流。

```
HttpWebResponse res = req.GetResponse() as HttpWebResponse;
using (Stream respStream = res.GetResponseStream())
{
  respStream.ReadByte();
  respStream.Close();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T14:35:31.503

我使用了 HttpWebRequest 和 HttpWebResponse 而不是 Ping，但是在 3 次之后程序由于某种原因冻结了。我将所有内容都放在了 try...catch 块中，但它也不会抛出任何异常，只会冻结。

```
 try
 {
      var myRequest = (HttpWebRequest)WebRequest.Create(url);
      var response = (HttpWebResponse)myRequest.GetResponse(); //After third time it freezes here

      if (response.StatusCode == HttpStatusCode.OK)
      {
          labelResult.Text += TxtIPAddress.Text + " is Available " + " " + System.DateTime.Now.ToString() + " " + Environment.NewLine;
      }
      else
      {                    
          labelResult.Text += TxtIPAddress.Text + " is Unavailable " +  System.DateTime.Now.ToString() + " " + Environment.NewLine;
      }
  }
  catch (Exception ex)
  {             
      labelResult.Text += TxtIPAddress.Text + " is Unavailable " + System.DateTime.Now.ToString() + " " + Environment.NewLine;
  } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T15:18:12.483

另一个更复杂的监控工具是[PRTG](http://www.paessler.com/prtg)

它提供了许多监视器，并且对于您希望监视的许多传感器是免费的。

这样，您不仅可以监控站点的存在，还可以监控特定调用的 Web 服务是否返回，即 SQL 查询。可能性几乎是无穷无尽的。

# c# - PageUnit 问题

> ID：15789195
> 
> 赞同：0
> 
> 时间：2013-04-03T13:49:07.767
> 
> 标签：c#, gdi+

我正在尝试使用 GDI+ 原语在 C# 中进行一些 2D 绘图，但遇到了一些问题：

```
protected override void OnPaint( PaintEventArgs e )
{
    Graphics dc = e.Graphics;
    dc.PageUnit = GraphicsUnit.Millimiter;
    dc.DrawLine( 0f, 50f, 100f, 50f );
    base.OnPaint( e );
} 
```

这段代码应该画一条 10 厘米的线，但我总是得到一条 10.6/7 厘米的线。如果我以像素为单位，并尝试绘制一条 96 像素（应该是 1 英寸线），我会得到一条 1.1 英寸的线。我做错了什么，还是只是我无法解决的问题？各种信息：我正在使用 VS2010 SP1，在 VS2005 和 MFC C++ 上，如果我画一条 5cm 的线，我得到一条 5cm 的线。

先感谢您。

# android - Android ActionBar 被 DroidGap (PhoneGap/ Cordova) 隐藏

> ID：15789199
> 
> 赞同：1
> 
> 时间：2013-04-03T13:49:17.643
> 
> 标签：android, cordova, android-actionbar, hidden

我只是花了几个小时使 Actionbar 可见但没有成功：

通过我的 RegisterActivity，我收集了一些登录数据，然后启动 MainActivity。在 RegisterActivity 我有一个操作栏，但在 MainActivity 中没有：

安卓清单：

```
 <uses-sdk android:minSdkVersion="11" android:targetSdkVersion="17"/>
    <application android:allowBackup="true"
                 android:icon="@drawable/ic_launcher" 
                 android:label="@string/app_name"
                  >

        <activity android:name="RegisterActivity"
                  android:label="@string/app_name"
                  android:theme="@android:style/Theme.Holo" >
                  <intent-filter>
                      <action android:name="android.intent.action.MAIN" />
                      <category android:name="android.intent.category.LAUNCHER"/>
                  </intent-filter>
        </activity>

        <activity android:name="MainActivity" 
                  android:label="@string/app_name"
                  android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale"
                  android:theme="@android:style/Theme.Holo" >
        </activity>
    </application> 
```

注册活动：

```
...
Intent i = new Intent(getApplicationContext(), MainActivity.class);
i.putExtra("username", username);
i.putExtra("password", password);
startActivity(i);
... 
```

主要活动：

```
...
    webview = new WebView(this);
    setContentView(webview);
    webview.loadUrl(address);
... 
```

通常应该有一个操作栏，但没有！

只是希望有人能解决我的问题？！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-05T14:35:21.927

我解决了我的问题：

我的 RegisterActivity 扩展了 Class Activity！我的 MainActivity 扩展了 Phonegap2.5.0（又名 Apache Cordova）的 DroidGap 类。

我更改了 MainActivity 以便它扩展 Activity 并且结果是 ActionBar 是可见的：D

当您需要 DroidGap 时，您必须插入

```
super.setBooleanProperty("showTitle", true); 
```

在您致电之前：

```
super.onCreate(savedInstanceState); 
```

最后它看起来像这样：

```
public class MainActivity extends DroidGap {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.setBooleanProperty("showTitle", true);
    super.onCreate(savedInstanceState);
//More Code .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-23T08:53:46.407

设置布尔属性 ShowTitle 的正确方法是使用 config.xml 中的首选项。

添加

```
<preference name="ShowTitle" value="true"/> 
```

到 config.xml 以在 Android 上启用 ActionBar。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:16:48.270

你确定没有行：

```
this.requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

在 onCreate() 方法中？

尝试：

```
public void onCreate(Bundle savedInstanceState) {
        this.requestWindowFeature(Window.FEATURE_ACTION_BAR);
        super.onCreate(savedInstanceState);
        ...
        setContentView(...);
        ... 
```

或者

```
...
this.requestWindowFeature(Window.FEATURE_ACTION_BAR_OVERLAY);
... 
```

# java - Java SWT shell 窗口关闭事件

> ID：15789202
> 
> 赞同：6
> 
> 时间：2013-04-03T13:49:24.123
> 
> 标签：java, swt

我只是有一个简单的问题。

如何覆盖 swt 应用程序中 shell 的窗口关闭事件？我希望 X-Button 简单地隐藏外壳，而不是关闭程序。

我尝试了一些简单的事情：

```
shell.addListener(SWT.Close, new Listener() {
      public void handleEvent(Event event) {
        shell.setVisible(false);
      }
    }); 
```

仍然终止程序。

提前致谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-03T13:54:36.870

你可以试试

```
shell.addListener(SWT.Close, new Listener() {
      public void handleEvent(Event event) {
        event.doit = false;
      }
    }); 
```

# lisp - 教会数字在没有语言原语的情况下转换为 int

> ID：15789204
> 
> 赞同：5
> 
> 时间：2013-04-03T13:49:27.490
> 
> 标签：lisp, scheme, lambda-calculus

是否可以在不使用诸如 add1 之类的语言原语的情况下将教堂数字转换为整数表示？

我遇到的所有示例都使用原语 dechuch to int

例子：

```
 plus1 = lambda x: x + 1
 church2int = lambda n: n(plus1)(0) 
```

示例 2：

```
 (define (church-numeral->int cn)
    ((cn add1) 0)) 
```

我正在尝试使用微型 lisp 解释器（仅使用 John McCarthy 的 10 条规则），并且想了解是否可以在不添加原语的情况下做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:11:17.370

整数类型不属于 McCarthy 的 Lisp 基本原始过程列表的一部分 - 您只有该级别的*函数*，不存在其他数据类型。如果我们要严格遵守 Lisp 的这种简约定义，这就是为什么整数需要表示为函数（例如，使用 Church 数字）的原因。所以答案是*否定*的。您无法转换为尚不存在的数据类型。

现在假设我们在语言中添加整数作为原子（请注意，向语言中添加新数据类型超出了提到的 7-10 个原始过程）。为了进一步简化，假设我们只添加一个数字，即数字零 - 那么我们仍然需要根据[Peano 公理](https://en.wikipedia.org/wiki/Peano_axioms)`add1`来构建其余整数的操作，这需要存在自然的后继操作存在的数字。*同样，*如果没有数字零作为原子和函数，我们就不能从 Church 数字转换为整数。*`add1`*

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T16:58:12.463

不`int`，正如您所描述的，它是原始类型的值，而不是函数。如果没有原语，您根本无法操作这样`int`的 s（没有`add1`，您将如何到达`1`from `0`？）。

但是，您当然可以在不使用原语的情况下在两种不同的自然数 Church 编码之间进行转换，只要您的语言在没有这些原语的情况下是图灵完备的。*

# java - 构建 ArrayList 树 - Java

> ID：15789207
> 
> 赞同：2
> 
> 时间：2013-04-03T13:49:33.967
> 
> 标签：java, oop, recursion, arraylist, tree

如何从 ArrayList 构建一个基本的对象树（在这种情况下，我的 Person 类中的 Person 对象）？从概念上讲，我了解树是如何工作的，如何将对象添加到我的数组列表中，但是我在树的构建方面遇到了很多麻烦，并且将节点链接在一起我似乎觉得不知所措。此外，从我所做的研究来看，递归算法似乎是解决这个问题的最佳方法。这是真的吗？我是Java初学者，所以请提供详细的答案，而不仅仅是代码。

这是我拥有的 Person 类以及我想要基于它的树中的对象。

```
public class Person{

    public int     id;     // some identification number unique to the person
    public boolean zombie; // true if the person is a zombie
    public char    state;  // p means human, z means zombie

    public ArrayList<Person> friends;  // list of friends

    public Person(int id, char state){
        this.id = id;
        this.state = state;
        //this.zombie = zombie;
    } 
```

提前感谢您的任何输入和解释。非常感谢！

下面是示例输出并演示了所需的树层次结构

```
P          (this is Person q)
---P       (this is a friend of q, say q1)
------P    (this is a friend of q1)
------Z    (this is another friend of q1, who is a zombie)
---Z       (this is a friend of q, say q2, who is a zombie)
------Z    (this is a friend of q1, who is also a zombie)
------P    (this is a friend of q1, who is not a zombie) 
```

id 喜欢创建树结构，这样就没有交叉链接。树结构中的每个人只能存在于一个朋友的列表中，并且会有一个人在没有人的朋友列表中（树的根）。每个朋友只能有两个朋友。（我假设这是一棵二叉树）

编辑：我可以使用 java 提供的树形图吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T16:04:34.633

也许我遗漏了一些东西，但是 ArrayList（或一般的列表）与任务有什么关系？如果任何人都可以链接到许多人，那么它就是一个图表。例如，它可能有像 A->B->C->A 这样的循环，你不能用树来表示。

一个人有一个朋友列表的事实意味着图中的一个节点可以链接到任意数量的其他节点。

所以我认为你应该建立一个图表。

如果您想摆脱重复的链接（例如 A->B、B->A），那么将其作为后处理步骤。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:18:59.010

如果我正确正确地理解了问题，您可以使用带有 Comparator 的 TreeMap 来构建这样的树结构。遍历 ArrayList，将每个元素添加到树形图中。Comparator.compare(k1, k2) 应该实现您试图放在此处的关系。可以在[此处](http://www.javaexamples4u.com/2009/03/treemap-comparator.html)找到示例 1和[此处的示例 2](http://www.roseindia.net/answers/viewqa/Java-Beginners/26583-Java-Comparator-Example.html)

# ruby-on-rails - 在 rspec（回形针）中通过 post 请求传递图像

> ID：15789208
> 
> 赞同：4
> 
> 时间：2013-04-03T13:49:39.720
> 
> 标签：ruby-on-rails, rspec, paperclip, rspec-rails

```
Failure/Error: post :create, Devise.token_authentication_key => @foo.authentication_token, receipt_image: "foo.png"
 Paperclip::AdapterRegistry::NoHandlerError: No handler found for "foo.png" 
```

如何在 rspec 代码中传递图像，我还尝试了使用 curl 命令的@foo.png。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T13:54:43.763

在模型级别，您需要将打开的图像传递给它：

```
@foo.image = File.open(Rails.root.join("spec", "fixtures", "sticker.jpg"))
@foo.save! 
```

在控制器级别，您将其传递给图像的字符串路径。这是最好的绝对路径。

```
params[:foo][:image] = Rails.root.join("spec", "fixtures", "sticker.jpg")
post :new, params 
```

# java - 无法使用 databasemetadata 检索数据库中存在的所有表属性

> ID：15789211
> 
> 赞同：3
> 
> 时间：2013-04-03T13:49:48.000
> 
> 标签：java, jdbc

我正在尝试访问`databasemetadata`以检索其中存在的所有表。 `getTables`应该返回`ResultSet`10 列。

当我尝试迭代`ResultSet`以获取所有列数据时，我得到

```
Exception in thread "main" java.sql.SQLException: Invalid column index 
```

我从第一行检索前 5 列数据，然后在打印第 6 列时发生异常，`TYPE_CAT`.

相关代码：

```
DatabaseMetaData dbmd = connection1.getMetaData();
    ResultSet rs = dbmd.getTables(null, null, null, new String[]{"TABLE"});
        while(rs.next()){
            for(int i=1;i<11;i++){
                System.out.print(rs.getString(i)+"  ");
            }
            System.out.println("");
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T17:18:12.923

看起来您要么使用的是非常旧的 JDBC 2 驱动程序，要么驱动程序不符合 JDBC 3.0、4.0 和/或 4.1，因为它没有规范所需的所有列。

尽管 JDBC 指定了结果集（至少）应返回的列，但要由驱动程序实现者实际正确定义`ResultSet`及其值。JDBC“只是”一个规范和一组接口，因此它实际上不能确保 - 在运行时 - 所有驱动程序都返回所有指定的列。有认证测试，但这些需要官僚障碍（开源）或巨额资金+官僚障碍（商业），因此并非所有 JDBC 驱动程序实现者都费心测试合规性。

在 JDBC 2 (Java 1.3) [`DatabaseMetaData.getTables`](http://docs.oracle.com/javase/1.3/docs/api/java/sql/DatabaseMetaData.html#getTables%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D%29)(链接到 Java 1.3 apidoc) 中只返回五列：

> 1.  **TABLE_CAT** String => 表目录（可能为空）
> 2.  **TABLE_SCHEM** String => 表模式（可能为空）
> 3.  **TABLE_NAME** String => 表名
> 4.  **TABLE_TYPE** String => 表类型。典型的类型是“TABLE”、“VIEW”、“SYSTEM TABLE”、“GLOBAL TEMPORARY”、“LOCAL TEMPORARY”、“ALIAS”、“SYNONYM”。
> 5.  **REMARKS** String => 对表格的解释性注释

而 JDBC 3.0 ( [Java 1.4](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/DatabaseMetaData.html#getTables%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D%29) / [Java 5](http://docs.oracle.com/javase/1.5.0/docs/api/java/sql/DatabaseMetaData.html#getTables%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D%29) )、JDBC 4.0 ( [Java 6](http://docs.oracle.com/javase/6/docs/api/java/sql/DatabaseMetaData.html#getTables%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D%29) ) 和 JDBC 4.1 ( [Java 7](http://docs.oracle.com/javase/7/docs/api/java/sql/DatabaseMetaData.html#getTables%28java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String%5B%5D%29) ) 又定义了 5 个列：

> 1.  **TABLE_CAT** String => 表目录（可能是`null`）
> 2.  **TABLE_SCHEM** String => 表模式（可能是`null`）
> 3.  **TABLE_NAME** String => 表名
> 4.  **TABLE_TYPE** String => 表类型。典型的类型是“TABLE”、“VIEW”、“SYSTEM TABLE”、“GLOBAL TEMPORARY”、“LOCAL TEMPORARY”、“ALIAS”、“SYNONYM”。
> 5.  **REMARKS** String => 对表格的解释性注释
> 6.  **TYPE_CAT** String => 类型目录（可能是`null`）
> 7.  **TYPE_SCHEM** String => 类型模式（可能是`null`）
> 8.  **TYPE_NAME** String => 类型名称（可能是`null`）
> 9.  **SELF_REFERENCING_COL_NAME** String => 类型表的指定“标识符”列的名称（可能是`null`）
> 10.  **REF_GENERATION** String => 指定如何创建 SELF_REFERENCING_COL_NAME 中的值。值为“系统”、“用户”、“派生”。（可能是`null`）

您可能想检查是否有更新的驱动程序可用于您的数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:11:11.307

不要使用您的值 11，而是尝试获取[ResultSetMetaData](http://docs.oracle.com/javase/6/docs/api/java/sql/ResultSetMetaData.html)并确定列数以确认您检索到的列：

```
ResultSetMetaData rsMetaData = rs.getMetaData();
int numberOfColumns = rsMetaData.getColumnCount(); 
```

从中，您可以获取列名和值，并确认您使用该`getColumnName(int)`方法检索的内容。

# jquery - 将所有子 div 的高度调整为 100% 父高度

> ID：15789212
> 
> 赞同：1
> 
> 时间：2013-04-03T13:49:49.733
> 
> 标签：jquery, html, css

我一直在努力解决这个小小的 CSS 问题。我希望“col3”的所有子 div 都具有相同的高度。因此，每个边界都会从上到下延伸。

我发现了这个类似的问题，但这似乎没有解决多个列，并且链接已损坏:(--[如何在不指定父母高度的情况下将子 Div 强制为父母 Div 的 100%？](https://stackoverflow.com/questions/1122381/how-to-force-child-div-to-100-of-parents-div-without-specifying-parents-heigh)

```
<div class="container">
<div class="col3">
                <div>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent imperdiet imperdiet mi, nec rhoncus enim convallis id. Nunc laoreet velit a tortor euismod porta.
                    </p>
                </div>
                <div>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent imperdiet imperdiet mi, nec rhoncus enim convallis id. Nunc laoreet velit a tortor euismod porta. Duis interdum suscipit dui et pulvinar. Curabitur turpis nisi, congue vel aliquet et, iaculis in leo. Maecenas pellentesque felis eget lectus viverra feugiat. In hac habitasse platea dictumst. Integer eget accumsan risus. Fusce ac lectus odio, non placerat tortor. 
                    </p>
                </div>  
                <div>
                    <p>
                        Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent imperdiet imperdiet mi, nec rhoncus enim convallis id. Nunc laoreet velit a tortor euismod porta. Duis interdum suscipit dui et pulvinar. Curabitur turpis nisi, congue vel aliquet et, iaculis in leo. Maecenas pellentesque felis eget lectus viverra feugiat. In hac habitasse platea dictumst. Integer eget accumsan risus. Fusce ac lectus odio, non placerat tortor.
                    </p>
                </div>
            </div> 
```

这是一个 jsFiddle： http: [//jsfiddle.net/wUtk9/1/——](http://jsfiddle.net/wUtk9/1/) 我提供了两个示例，一个具有典型的三列布局，另一个具有跨两列的列。很像表格的“colspan”。

这会是使用jQuery解决的理想选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:05:48.017

如果你不介意 IE7，你可以使用以下样式：

```
div.col3 {
    display:table;
}

.col3 > div {
    display:table-cell;
} 
```

[http://jsfiddle.net/wUtk9/8/](http://jsfiddle.net/wUtk9/8/)

**更新**

[http://jsfiddle.net/wUtk9/10/](http://jsfiddle.net/wUtk9/10/)（多行布局）

[http://jsfiddle.net/wUtk9/11/（jQuery](http://jsfiddle.net/wUtk9/11/)版）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:55:01.880

试试这个：

```
var maxHeight=0;
$('div.col3 div').each(function(){
    if( $(this).height() > maxHeight ) maxHeight = $(this).height();
});
$('div.col3 div').height(maxHeight); 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/wUtk9/2/)**

# php - 可靠的类别

> ID：15789213
> 
> 赞同：-1
> 
> 时间：2013-04-03T13:49:52.377
> 
> 标签：php

我的问题是我需要用 php 制作可靠的类别，但我希望他们从 txt 文件中获取他们的选项，有什么想法可以同时做到吗？这个想法是他们在第一个下拉菜单中选择一个类别，然后在第二个选择一个类别，但我希望类别能够随 txt 文件更改.. 任何建议都非常感谢！谢谢你的时间！这是我所做的一个想法

```
<tr>
        <td height="67" align="right">ΚΑΤΗΓΟΡΙΑ</td>
        <td><label>
          <select name="ΚΑΤΗΓΟΡΙΑ" id="ΚΑΤΗΓΟΡΙΑ" class="update" >
            <option value="ΚΟΙΝΟΧΡΗΣΤΑ" selected="selected">ΚΟΙΝΟΧΡΗΣΤΑ</option>
            <option value="ΘΕΡΜΑΝΣΗ">ΘΕΡΜΑΝΣΗ</option>
            <option value="ΑΝΕΛΚΥΣΤΗΡΑΣ">ΑΝΕΛΚΥΣΤΗΡΑΣ</option>
            <option value="ΕΙΔΙΚΕΣΔΑΠΑΝΕΣ">ΕΙΔΙΚΕΣ ΔΑΠΑΝΕΣ</option>
            <option value="ΙΔΙΟΚΤΗΤΩΝ">ΙΔΙΟΚΤΗΤΩΝ</option>
            </select>
          <select name="ΚΑΤΗΓΟΡΙΑ2" id="ΚΑΤΗΓΟΡΙΑ2" class="update" disabled="disabled">
            <option value="ΘΥΡΩΡΟΣ" selected="selected">ΘΥΡΩΡΟΣ</option>
            <option value="ΕΙΔΗΚΑΘΑΡΙΟΤΗΤΑΣ" selected="selected">ΕΙΔΗ ΚΑΘΑΡΙΟΤΗΤΑΣ</option>
          </select>
        </label></td>
      </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:44:37.310

试试这个：代码的注释足以自我解释

```
<?php 
$list1 = file("/path/to/options1.txt");/// read the first options list file

$selectedOption = $list1[0]; // default selected value is the first option as written in the code snipet above

if( isset($_GET["option1"]) && !empty( $_GET["option1"] ) ) {
    $selectedOption = urldecode( $_GET["option1"] ) ; // if the user changed the selection we update the second list
}

$list2 = file("/path/to/{$selectedOption}.txt");/// read the second options file based on the first element in the first list (since it will be the default selected value)

$currentUrl = "http://".$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'];
?>

<script type="text/javascript">
    function load(){
        location.href = "<?php echo "$currentUrl";?>" + "?option1=" + document.getElementById("option1").value ;
    }
</script>

<tr>
        <td height="67" align="right">ΚΑΤΗΓΟΡΙΑ</td>
        <td><label>
          <select name="option1" id="option1" class="update" onchange="javascript:load()" >
            <?php
            foreach( $list1 as $_ ){
                $selected = "";
                if( trim( $selectedOption == trim( $_ ) ) )
                    $selected = "selected=\"selected\"";
                echo "<option value=\"". urlencode( $_ ) ."\" $selected >$_</option>\n";
            }
        ?>
        </select>

      <select name="option2" id="option2" class="update">
        <?php
            $selected = "selected=\"selected\"";
            foreach( $list2 as $_ ){
                echo "<option value=\"". urlencode( $_ ) ."\" $selected >$_</option>\n";
                $selected = ""; // only the first element will be marked as selected
            }
        ?>
      </select>
    </label></td>
  </tr> 
```

# c++ - 如何读入一个文件并垂直显示内容然后读入另一个文件并在c ++中垂直显示内容

> ID：15789214
> 
> 赞同：0
> 
> 时间：2013-04-03T13:49:58.247
> 
> 标签：c++

嗨，我正在开发一个读取两个文件的程序，我想在它们自己的列中显示文件内容。

```
File1                File2
Time     data        Time    data 
```

我不确定如何创建这样的列，我已经有代码可以读取文件并执行所需的功能，这是我很难过的输出。如果有人有任何建议或帮助，那就太好了。谢谢！PS。这与家庭作业无关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:53:36.487

这真的取决于你打算使用什么工具......

您可以使用某些版本的“curses”（具有控制台操作功能的库，例如“转到此位置”、“以绿色打印文本”等），然后随意在屏幕上走动。

或者您可以将文件读入单独的变量，然后在循环中从每个文件中打印。这不需要特殊的编码。只需对文件本身和从中读取的数据使用数组或向量即可。

像这样的东西：

```
const int nfiles = 2;

const char *filenames[nfiles] = { "file1.txt", "file2.txt" };

ifstream files[nfiles];
for(int i = 0; i < nfiles; i++)
{
   if (!files[i].open(filenames[i]))
   {
      cerr << "Couldn't open file " << filenames[i] << endl;
      exit(1);
   }
}
bool done = false;
while(!done)
{
   int errs = 0; 
   std::string data[nfiles];
   for(int i = i < nfiles; i++)
   {
       if (!(files[i] >> data[i]))
       {
          errs++;
          data[i] = "No data";
       }
   }
   if (errs == nfiles)
   {
      done = true;
   }
   else
   {
      for(int i = 0; i < nfiles; i++)
      {
           ... display data here ...
      }
   }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:45:07.513

我会做这样的事情：

```
#include <iostream>
#include <fstream>
#include <iomanip>
#include <algorithm>
#include <string>
using namespace std;

int readLines(const std::string& fileName1, const std::string& fileName2)
{
    string line1;
    string line2;
    ifstream file1 (fileName1.c_str());
    ifstream file2 (fileName2.c_str());
    if (file1.is_open() && file2.is_open())
    {
        cout << setw(20) << left << "File1" << "File2" << endl;
        bool done;
        done = file1.eof() && file2.eof();
        while (!done)
        {
            getline (file1, line1);
            getline (file2, line2);
            line1.erase(std::remove(line1.begin(), line1.end(), '\n'), line1.end());
            line2.erase(std::remove(line2.begin(), line2.end(), '\n'), line2.end());
            cout << setw(20) << left << (file1.eof() ? "" : line1) << (file2.eof() ? "" : line2) << endl;
            done = file1.eof() && file2.eof();
        }

        file1.close();
        file2.close();
    }
    else
    {
        cout << "Unable to open some file";
    }

    return 0;
}

int main ()
{
    std::string fileName1("example1.txt");
    std::string fileName2("example2.txt");
    readLines(fileName1, fileName2);

    return 0;
} 
```

# perl - Perl 搜索目录中第一次出现的模式

> ID：15789225
> 
> 赞同：1
> 
> 时间：2013-04-03T13:50:13.843
> 
> 标签：perl, grep

我有一个目录，其中包含格式的图像头文件列表

```
image1.hd
image2.hd
image3.hd
image4.hd 
```

我想在目录中搜索正则表达式`Image type:=4`并找到第一次出现此模式的文件号。我可以在 bash 中使用几个管道轻松地做到这一点：

```
 grep -l 'Image type:=4' image*.hd | sed ' s/.*image\(.*\).hd/\1/' | head -n1 
```

在这种情况下返回 1。

此模式匹配将在 perl 脚本中使用。我知道我可以使用

```
my $number = `grep -l 'Image type:=4' image*.hd | sed ' s/.*image\(.*\).hd/\1/' | head -n1` 
```

但在这种情况下最好使用纯 perl 吗？这是我能想到的最好的使用 perl 的方法。非常麻烦：

```
my $tmp;
#want to find the planar study in current study
  foreach (glob "$DIR/image*.hd"){
    $tmp = $_;
    open FILE, "<", "$_" or die $!;
    while (<FILE>)
      {
    if (/Image type:=4/){
      $tmp =~ s/.*image(\d+).hd/$1/;
    }
      }
    close FILE;
    last;
  }
 print "$tmp\n"; 
```

这也返回所需的输出 1。有没有更有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T14:06:34.800

借助几个实用模块，这很简单

```
use strict;
use warnings;

use File::Slurp 'read_file';
use List::MoreUtils 'firstval';

print firstval { read_file($_) =~ /Image type:=4/ } glob "$DIR/image*.hd"; 
```

但是，如果您仅限于核心 Perl，那么这将满足您的要求

```
use strict;
use warnings;

my $firstfile;
while (my $file = glob 'E:\Perl\source\*.pl') {
    open my $fh, '<', $file or die $!;
    local $/;
    if ( <$fh> =~ /Image type:=4/) {
        $firstfile = $file;
        last;
    }
}

print $firstfile // 'undef'; 
```

# facebook - iOS Facebook SDK 3.2 通过图形路径请求检查权限

> ID：15789226
> 
> 赞同：2
> 
> 时间：2013-04-03T13:50:14.830
> 
> 标签：facebook, facebook-graph-api, ios6, facebook-ios-sdk

我正在尝试检查用户是否已授予发布权限。如果他之前没有授予权限，我会通过以下方式将他导航到权限屏幕：**requestNewPublishPermissions**

```
 -(void)checkPermissions
    {
        // Get the most recent status
        [FBRequestConnection
         startWithGraphPath:@"me/permissions"
         completionHandler:^(FBRequestConnection *connection,
                             id result,
                             NSError *error) {
             if (!error) { 
                    //This Condition Never Executed

                 if([[result objectForKey:@"data"] objectForKey:@"publish_actions"])
                 {
                     //permissions exist
                 }
                 else
                 {
                     [self openSessionForPublishPermissions];
                 }
                 NSString *permission = [[result objectForKey:@"data"] objectForKey:@"publish_actions"];

                 NSLog(@"permissions data = %@",data);
             }
             else
             {
                 NSLog(@"error"); //Control goes to this block
             }
         }];

    } 
```

*在上面的代码中 if(!error) 块永远不会执行，它总是返回错误*

我哪里错了？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-03T15:57:02.143

您可以在活动会话中查看权限。这是在 HelloFacebookSample 中的完成方式：

```
if ([FBSession.activeSession.permissions indexOfObject:@"publish_actions"] == NSNotFound) {
    // permission does not exist
} else {
    // permission exists
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-29T07:50:51.863

您可以检查会话是否处于活动状态并请求发布权限，而不是手动检查权限：如果用户已经授予权限，则不会发布额外的确认对话框。请参阅下面的代码示例：

```
- (void)requestWritePermission:(UIViewController *)viewController channel:(NSString *)channel callback:(void(^)(BOOL success))callback
{   
    if ([FBSession.activeSession isOpen])
    {
        [FBSession.activeSession requestNewPublishPermissions:@[@"publish_actions"]
                                              defaultAudience:FBSessionDefaultAudienceFriends
                                            completionHandler:^(FBSession *session, NSError *error) {
                                                callback(error == nil);
                                            }];
    }
    else
    {
       // Attempt to request publish permission without read permission. 
    }
} 
```

代码不完整，但应该可以帮助您入门。

# unix - 如何从grep保存匹配和不匹配

> ID：15789228
> 
> 赞同：7
> 
> 时间：2013-04-03T13:50:23.727
> 
> 标签：unix, grep, pattern-matching, matching

我经常使用 grep 并且熟悉它返回匹配行（默认情况下）和不匹配行（使用 -v 参数）的能力。但是，我希望能够一次 grep 文件以分隔匹配和不匹配的行。

如果这不可能，请告诉我。我意识到我可以在 perl 或 awk 中轻松做到这一点，但我很好奇 grep 是否可能。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T15:28:39.560

如果它不必是 grep - 这是基于模式的单遍拆分 - 模式找到 > 文件 1 模式未找到 > 文件 2

```
awk '/pattern/ {print $0 > "file1"; next}{print $0 > "file2"}' inputfile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-04-23T21:25:27.450

我遇到了完全相同的问题，为此我编写了一个小的 Perl 脚本 [1]。它只接受一个参数：`regex`to *grep* input on。

> [1] [https://gist.github.com/tonejito/c9c0bffd75d8c81483f9107c609439e1](https://gist.github.com/tonejito/c9c0bffd75d8c81483f9107c609439e1)

它逐行读取**STDIN**`regex`并检查给定的匹配行到**STDOUT**，不匹配到**STDERR**。

我这样做是因为这个工具位于管道的中间，并且我使用 shell 重定向将文件保存在它们的最终位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-22T11:23:46.610

第 1 步：读取文件

第 2 步：用新行替换空格并将结果保存在临时文件中

第 3 步：仅从临时文件中获取包含“_”的行并将其保存到 multiwords.txt

第 4 步：从临时文件中排除包含“-”的行，然后将结果保存到 singlewords.txt

第五步：删除临时文件

```
 cat file | tr ' ' '\n' > tmp.txt | grep '_' tmp.txt > multiwords.txt | grep -v '_' tmp.txt > singlewords.txt | find . -type f -name 'tmp.txt' -delete 
```

# asp.net-mvc - ASP.NET MVC 长路由问题

> ID：15789234
> 
> 赞同：1
> 
> 时间：2013-04-03T13:50:31.943
> 
> 标签：asp.net-mvc, asp.net-mvc-routing

我怎样才能避免这样的路由配置？我有一个管理面板，具有管理员角色的用户可以对不同的实体（用户/配置文件/地址/...）执行一些操作（编辑/删除/查看）。我想把所有这些动作放到 1 个控制器中。

```
routes.MapRoute(
            name: "EditProfile",
            url: "Account/Profiles/{id}/Edit",
            defaults: new { controller = "Account", action = "EditProfile" }
        );
routes.MapRoute(
            name: "RemoveProfile",
            url: "Account/Profiles/{id}/Remove",
            defaults: new { controller = "Account", action = "RemoveProfile" }
        );
routes.MapRoute(
            name: "EditAddress",
            url: "Account/Addresses/{id}/Edit",
            defaults: new { controller = "Account", action = "EditAddress" }
        );
routes.MapRoute(
            name: "RemoveAddress",
            url: "Account/Addresses/{id}/Remove",
            defaults: new { controller = "Account", action = "RemoveAddress" }
        );
//... 
```

基本上我想像这样将所有 MapRoute 替换为：

```
routes.MapRoute(
            name: "AccountProfileActions",
            url: "Account/{entities}/{id}/{subAction}",
            defaults: new { controller = "Account", action = {subAction} + {entities}}
        ); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:12:23.620

只是不要指定动作（或控制器）并依赖 MVC 路由约定，即控制器名称和动作名称将是 URL 的一部分。

如果您想要一个与您的控制器/动作名称不匹配的特定路由，请考虑使用类似[AttributeRouting](http://attributerouting.net/)的东西，它可以让您在控制器/动作上指定路由，而不必每次都进入 RouteConfig .

# windows-phone-8 - WP8 应用程序的默认设置

> ID：15789235
> 
> 赞同：1
> 
> 时间：2013-04-03T13:50:31.963
> 
> 标签：windows-phone-8, isolatedstorage, application-settings

`IsolatedStorageSettings.ApplicationSettings`当用户安装和打开应用程序时，有没有办法让一些数据默认可用？

# c# - 每次 C# 获取唯一的硬件 ID 更改

> ID：15789237
> 
> 赞同：-5
> 
> 时间：2013-04-03T13:50:37.757
> 
> 标签：c#, .net, uuid

我想制作一个程序并出售它，所以我想制作某种许可系统。我在谷歌上找到的是这样的：

[http://www.codeproject.com/Articles/28678/Generating-Uni​​que-Key-Finger-Print-for-a-Computer](http://www.codeproject.com/Articles/28678/Generating-Unique-Key-Finger-Print-for-a-Computer)

我在 Ubuntu 的 VirtualBox 中运行 Windows 7（32 位）。我得到了相同的 UID，但是当我重新启动 Windows 时，我得到了一个新的 UID。我只是在想有些人会购买我的程序，他们可能会从 VirtualBox 运行它，所以这将是一个问题。

你们有什么建议吗？

即使这是一种更简单的方法，但即使我重新启动我的 VBox 也不会改变。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T13:55:01.467

您不必在整个 DRM 过程中陷入困境，总会有更聪明的人在那里，有人会想办法规避它。

如果你真的很担心：

1.  设置在线许可证服务器以保存您的用户许可证
2.  在用户输入有效许可证之前阻止应用程序执行任何操作
    *   您的服务将通过 Internet 验证此许可证
    *   您可以通过这种方式限制使用您的服务的“活动”应用程序的数量

想想 iTunes 如何允许您授权最多 5 台计算机访问您的媒体库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-19T17:52:56.983

即使已经过去了很多时间，我也想为这个问题添加一个可能的解决方案，指出我试图用该代码生成指纹并面临同样问题时发生的一些事情。

该`identifier`函数仅检索each的**第一个非空值**。您应该注意的第一件重要的事情是：每个返回的内容*可能不*属于同一个 ManagementObject。因此，如果某些内容更改为“不是第一个对象”，这也可能会影响您的指纹。`wmiProperty``wmiClass``wmiClass`

 *请注意，使用`Win32_DiskDrive`as`wmiClass`是危险的，因为插入 USB 设备通常会导致该设备被识别为第一个设备（而不是您的硬盘驱动器），并在您插入或拔出设备时更改指纹。即使这没有发生，如果您的主驱动器是空的（*例如*磁盘签名，这发生在我身上） ，仍然`wmiProperty`可以从您的 USB 设备中获取其中一个。

 *一个可能的解决方案是通过检查`InterfaceType`并排除所有匹配“USB”的设备来排除所有 USB 设备，或者至少我就是这样做的。**

# c# - 使用带有附加标头的 LINQ to CSV

> ID：15789243
> 
> 赞同：-2
> 
> 时间：2013-04-03T13:50:52.197
> 
> 标签：c#, csv

我目前正在使用 LINQtoCSV 来读取一些 csv。我目前遇到的问题是我希望能够向标题添加其他信息，这些信息将应用于列表中的所有条目。例如我当前的 csv：

```
StartStateId,Event,EndStateId
State A,MX-000A,State B
State B,MX-000A,State B
State C,MX-000A,State B
State D,MX-000A,State B
State A,MX-000C,State B
State B,MX-000C,State C
State C,MX-000C,State D
State A,MX-000B,State A
State B,MX-000B,State A
State C,MX-000B,State A
State D,MX-000B,State A 
```

我想要的是能够读取如下标题：

```
MX-000C, MX-000A
StartStateId,Event,EndStateId
State A,MX-000A,State B
State B,MX-000A,State B
State C,MX-000A,State B
State D,MX-000A,State B
State A,MX-000C,State B
State B,MX-000C,State C
State C,MX-000C,State D
State A,MX-000B,State A
State B,MX-000B,State A
State C,MX-000B,State A
State D,MX-000B,State 
```

并且能够单独阅读第一行。有没有办法使用这个库来做到这一点（因为网站的支持不是很强，这里可能有用户也在使用这个库）还是我应该自己实现一个阅读器？

（这个标题行的格式对我来说并不重要，只是为了阅读它）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T08:35:14.967

这在这个库中显然是不可能的，所以我实现了自己的解析器来为我完成这项工作

# plot - 在图中指定轴的步长

> ID：15789249
> 
> 赞同：4
> 
> 时间：2013-04-03T13:51:03.830
> 
> 标签：plot, graph, gnuplot, octave, axis

我正在尝试在 Octave 中绘制图表。如何指定轴的步长？例如，默认x轴的步长为0.5（0---0.5---1---1.5---），我想设为0.1，y轴的步长为0.01。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T20:09:50.113

这会将现有绘图的 x 轴上的步长更改为 0.1：

```
xbounds = xlim()
set(gca, 'xtick', xbounds(1):0.1:xbounds(2)) 
```

`ylim`您可以使用和对 y 轴执行相同的操作`'ytick'`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-11T13:22:56.693

您可以使用以下代码调整**x轴的步长：**

```
set(gca,'XTick,[0:0.1:10]); 
```

为了调整**y**轴的步长，您可以这样做：

```
set(gca,'YTick,[0:0.01:10]); 
```

# c# - 如何显示 tiff 图像？

> ID：15789253
> 
> 赞同：3
> 
> 时间：2013-04-03T13:51:22.617
> 
> 标签：c#, image-processing, asp.net-mvc-4

我完全迷路了，我需要一些指导。我似乎有很多帖子，但没有人解释如何显示 tif 图像。我在哪里可以找到一些教程？如果可能的话，我从一开始就需要。或者，如果您能帮助我，那就太好了。我只是一个新手halding图像。我正在使用 mvc 4

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:11:14.083

大多数浏览器无法处理您可能发现的 TIFF 图像，因此您需要将其转换为 PNG 或 JPEG。在您的控制器操作中，这些是基础。

```
var memoryStream = new System.IO.MemoryStream();
using (var image = System.Drawing.Image.FromFile("myfile.tif"))
    image.Save(memoryStream, ImageFormat.Png);

return File(memoryStream, "image/png"); 
```

# batch-file - 基于剩余空间和最旧文件的清理实用程序

> ID：15789260
> 
> 赞同：0
> 
> 时间：2013-04-03T13:51:41.230
> 
> 标签：batch-file

我想为我的 RDX 创建一个清洁实用程序。它将测试磁带上的可用空间是否小于某个阈值并擦除最旧的文件，直到达到此阈值。

我从一些代码中修改了一些东西，但我不知道出了什么问题：

```
@echo off
@setlocal enableextensions
@setlocal enabledelayedexpansion

for /f "tokens=7" %%a in ('fsutil volume diskfree e:') do set free=%%a
for /f "delims=" %%b in ('"dir e:\*.zip /A-D /OD /B"') do set file=%%b
if %free:~0,-9% lss 61 del e:\%file% else exit 
```

每条线似乎都单独工作，但不是循环。你能帮我么？

提前感谢=）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:32:03.853

尝试这个：

```
@echo off &setlocal enableextensions

for /f "tokens=7" %%a in ('fsutil volume diskfree e:') do set "free=%%a"
for /f "delims=" %%b in ('dir e:\*.zip /A-D /O-D /B') do set "file=%%b"
if %free:~0,-9% lss 61 (del "e:\%file%") else exit 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:06:24.130

除了彼得的所有评论之外，您的问题不是在第二个 FOR 循环

阅读`HELP FOR`然后你会尝试这样的事情......

```
for /f "delims=" %%b in ('"dir e:\*.zip /A-D /OD /B"') do (
  set file=%%b
  if %free:~0,-9% lss 61 del e:\%file%
) 
```

但是，等等，这里还有更多问题：删除后 %free% 没有刷新；比较可能不正确；变量 %file% 不会在每次循环迭代时更新......这些可能是其他 SO 问题的主题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T15:09:40.927

不知道你所说的“不是循环”是什么意思——有两个循环，但你说每行单独工作？

在我的机器上工作得非常愉快——那你到底是什么意思？

一些可能有帮助的事情：

1.  前导`@`仅表示“在执行之前不要将此命令回显到控制台”。一旦`@echo off`执行了一条指令，命令的回显就会停止，因此`@`是多余的。它`is`需要`@echo off`命令，因为否则关闭回显的指令本身就会被`ECHO`编辑。
2.  每个都`setlocal`启动一个新的本地环境，继承所有当前的环境变量。使用两个并没有错，它只是多余的。`setlocal enableextensions enabledelayedexpansion`就足够了。你没有`delayedexpansion`在这个例程中使用，所以`that`它本身就是多余的。的默认状态`CMD.EXE`是`enableextensions`。您必须对扩展采取明确的措施`DISABLE`- 大多数批处理程序将假定默认条件。
3.  在我的机器上，可用空间是线上的第 8 个标记，而不是第 7 个。如果您的相同，`:`这将加载。`free`
4.  命令周围的双引号`dir`是多余的。执行单引号之间的命令。添加双引号没有任何作用，除非在要执行的命令中有单引号。
5.  可悲的是，`IF`比较可能会出错。Any`%var%`在指令执行之前被解析，因此应该`free`包含少于 9 个字符，`%free:~0:-9%`将被解析为 [nothing] 并且指令将被执行，因为`if lss 61...`这将是一个语法错误。请注意，在您的情况下，`free`甚至`:`在更正之后，您的可用字节数可能少于 1000000000，`%free:~0:-9%`将被解析为空并生成错误。
6.  `dir`如果该命令没有找到与您的选择标准匹配的文件，`file`则将包含启动批处理时的任何值。很可能，该变量`file`永远不会被设置，但假设它被设置为`myveryimportantfile`? 因此，最好确保批处理中使用的任何变量都已初始化。

所以 - 修改：

```
@echo off
setlocal

FOR %%I IN (free file) DO SET "%%I="
for /f "tokens=8" %%a in ('fsutil volume diskfree e:') do set free=%%a
for /f "delims=" %%b in ('dir e:\*.zip /A-D /OD /B') do set file=%%b
IF NOT DEFINED FILE EXIT
SET "FREE=%FREE:~0,-9%"
IF NOT DEFINED FREE SET /A FREE=0
if %FREE% lss 61 del "e:\%file%" 
```

（案例是多余的 - CAPS 的变化。元变量 FOR 的案例`%%x`很重要）

请注意，严格来说，即使 SETLOCAL 也是多余的，但它确实确保了该批处理在终止后不会影响环境的状态。

语法`SET "var=somethingorevennothing"`很重要。一个简单的`SET`语句是针对 STRINGS 的，所以 SPACES 很重要。如果在 the 之前出现空格，`=`则它**包含**在正在设置的变量名中。如果行尾有空格，也包括在内。引用 SET 解决了第二个问题。警惕战胜了第一个。

`SET /A`忽略这些空格，但只能用于设置 NUMERIC 值。数值实际上存储为字符串。

高温高压

# eclipse - 无法安装 Apantan Eclipse 插件

> ID：15789268
> 
> 赞同：1
> 
> 时间：2013-04-03T13:51:55.820
> 
> 标签：eclipse, eclipse-plugin

我正在尝试安装 Apantana Eclipse 插件，但是我收到此错误消息：

```
Cannot complete the install because one or more required items could not be found.
Software currently installed: GWT Designer Editor 2.6.0.r36x201206111227 (com.google.gdt.eclipse.designer.editor.feature.feature.group 2.6.0.r36x201206111227)
Missing requirement: Apache Xerces-J 2.9.0.v201101211617 (org.apache.xerces 2.9.0.v201101211617) requires 'bundle javax.xml [1.3.4,2.0.0)' but it could not be found
Cannot satisfy dependency:
From: GWT Designer UiBinder Support 2.6.0.r36x201206111227 (com.google.gdt.eclipse.designer.UiBinder 2.6.0.r36x201206111227)
To: bundle org.eclipse.wb.core.xml 0.0.0
Cannot satisfy dependency:
From: GWT Designer Editor 2.6.0.r36x201206111227 (com.google.gdt.eclipse.designer.editor.feature.feature.group 2.6.0.r36x201206111227)
To: com.google.gdt.eclipse.designer.UiBinder [2.6.0.r36x201206111227]
Cannot satisfy dependency:
From: WindowBuilder Core for XML GUI's 1.5.0.r36x201206111216 (org.eclipse.wb.core.xml 1.5.0.r36x201206111216)
To: bundle org.eclipse.wst.xml.ui 0.0.0
Cannot satisfy dependency:
From: Structured Source XML Model 1.1.503.v201102102045 (org.eclipse.wst.xml.core 1.1.503.v201102102045)
To: bundle org.apache.xerces [2.9.0,3.0.0)
Cannot satisfy dependency:
From: Eclipse XML Editors and Tools 1.1.103.v201101122108 (org.eclipse.wst.xml.ui 1.1.103.v201101122108)
To: bundle org.eclipse.wst.xml.core [1.1.500,1.2.0) 
```

我尝试将 xerces（我希望我做对了）添加到类路径，但我仍然收到此错误消息。

```
System Config:
Win7 64bit
Eclipse HELIOS ver 3.6.2
Java 1.6.0_21. 
```

我将不胜感激任何帮助/线索。

谢谢。

# php - 通过 ajax 向 CI 控制器发送数据

> ID：15789275
> 
> 赞同：0
> 
> 时间：2013-04-03T13:52:11.530
> 
> 标签：php, codeigniter

我是 ajax 和 CI 的新手。我想通过 ajax 发送数据和图像。在我看来，我有 3 个输入字段和一个图像上传按钮。

```
var val1 = $("#val1"+id).val();
var val2 = $("#val2").val();
$.ajax({
            type: "POST",
            url: "page/save_data",
            data: "{ val1 :'"+val1+"',val2:'"+val2+"}",
            success: function(msg) {

                    alert(msg);
            }
    }); 
```

当我尝试这个时，在控制器中它什么也没显示

```
function save_data()
{
    $val = $this->input->post('val1');
    echo $val1;

} 
```

在控制台中它什么也没给我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:58:07.027

试试这个 ：

```
$.ajax({
            type: "POST",

            url: "page/save_data",
            data: { "val1 ":val1,"val2": val2},
            success: function(msg) {
                    alert(msg);
            }
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:59:50.113

您的 ajax URL 必须引用您的方法名称；

```
...
 $.ajax({
        type: "POST",
        url: "page/save_data", //change this to your method;
 ... 
```

应该是这样的：

```
 ...
  $.ajax({
        type: "POST",
        url: "page/save_iudata",//or whatever your method's name;
  ... 
```

**编辑：**

试试这种方式：

```
function save_data(){
  $val1 = $_REQUEST['val1'];
  echo $val1;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-03T14:11:55.200

您好，通过 ajax 发送数据很简单：

```
 var data = {
            val1: $('#val1').val(),
            val2: $('#val2').val(),
        };

        $.ajax({
            url: "<?php echo base_url().'page/save_data'; ?>",
            dataType: 'json',
            type: 'POST',
            async : false,
            data: data,

            success: function(msg){
                ...
            }
        });
        return false; 
```

但是要发送图像，您必须进行一些研究……这是一个很好的[教程](http://net.tutsplus.com/tutorials/javascript-ajax/how-to-upload-files-with-codeigniter-and-ajax/)

# javascript - 添加一个带有另一个坐标的 div

> ID：15789277
> 
> 赞同：0
> 
> 时间：2013-04-03T13:52:17.043
> 
> 标签：javascript, html, html5-canvas, position

我想用输入文本字段给出的坐标将一个 div 放在另一个中。添加的跨度应该与父坐标的相对位置。问题是它没有添加任何东西，但它改变了画布的位置。

```
<html>
 <head> 
<style> 
    #rectangle { position: relative; }
</style>
<body>  
    300 x 300 px MAX<br/>
    <canvas id="rectangle" width="300" height="300"></canvas>
    <br/> 
    <table>
    <tr>
        <td>Horizontal starting cordinate:</td>
        <td><input type="text" id = "x" value = ""/></td>
    </tr>       
    <tr>
        <td>Vertical starting cordinate:</td>
        <td><input type="text" id = "y"/></td>
    </tr>
    <tr>
        <td>Width of the rectangle:</td>
        <td><input type="text" id = "width"/></td>
    </tr>
    <tr>
        <td>Height of the rectangle:</td>
        <td><input type="text" id = "height"/></td>
    </tr>
    <tr>
        <td></td>
        <td><input type="button" id = "draw" value = "Click"/></td>
    </tr> 
</table> 

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript"> 
jQuery(document).ready(function(){
     $("#draw").click(function(e){ 

        var x = e.pageX - this.offsetLeft;
        var y = e.pageY - this.offsetTop; 

        var x1 = parseInt($("#x").val());
        var y1 = parseInt($("#y").val());
        var width = parseInt($("#width").val());
        var height = parseInt($("#height").val()); 

        $("#rectangle")
            .add("div")
            .css("id", "right-zone") 
            .css("z-index", "5")
            .css("position", "absolute")
            .css("left", x1)  
            .css("top", y2)  
            .css("width", width)
            .css("height", height)
            .css("background-color", "#FF0000")
            .css("border", "solid red 1px");
   }); 
})  
</script> 
```

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T13:57:34.057

您可能应该使用[`.append()`](http://api.jquery.com/append/)而不是[`.add()`](http://api.jquery.com/add/). `.add()`不会将 div 添加到 DOM，而是将元素添加到一组匹配的元素中。

**编辑：**再想一想，我看到您正在尝试将 div 附加到画布元素。您可能有兴趣检查[this](http://www.w3.org/TR/2011/WD-html5-author-20110809/the-canvas-element.html)，其中说明：

> canvas 元素的内容（如果有）是该元素的后备内容。

所以你应该用 div 替换你的 canvas 元素。那，或编辑您的问题以更好地反映此细节。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:16:00.173

您的代码中有一些“错误”，包括 html 和 JS。

这是一个工作示例：http: [//jsfiddle.net/kGd2G/1/](http://jsfiddle.net/kGd2G/1/)

即使用`div`而不是`canvas`

```
<div id="rectangle" style="width: 300px; height: 300px;"></div> 
```

为了简化 JS，我使用了一个“模板 div”来为要添加的矩形设置一些默认值。

# javascript - 数据表删除链接

> ID：15789282
> 
> 赞同：0
> 
> 时间：2013-04-03T13:52:24.717
> 
> 标签：javascript, jquery

我可以使用 jQuery 在数据表中创建和编辑记录。我在删除记录时遇到问题。这是我的代码。谢谢您的帮助。

```
 // New record
   $('a.editor_create').on('click', function (e) {
      e.preventDefault();

      editor.create(
          'Create new record', {
          "label": "Add",
          "fn": function () {
              editor.submit()
          }
      });
  });

  // Edit record
  $('#example').on('click', 'a.editor_edit', function (e) {
      e.preventDefault();

      editor.edit(
      $(this).parents('tr')[0],
          'Edit record', {
          "label": "Update",
          "fn": function () {
              editor.submit()
          }
      });
  });
  $('#example').dataTable({
      "sDom": "Tfrtip",
          "sAjaxSource": "browsers1.json",
          "aoColumns": [{
          "mData": "sn"
      }, {
          "mData": "reg_name"
      }, {
          "mData": "audit_name"
      }, {
          "mData": "audit_data"
      }, {
          "mData": "minor",
          "sClass": "center"
      }, {
          "mData": "major",
          "sClass": "center"
      }, {
          "mData": null,
              "sClass": "center",
              "sDefaultContent": '<a href="" class="editor_edit">Edit</a>'
      }]
  }); 
```

# unit-testing - 如何对我的 GPS/Google Maps Android 应用程序进行单元测试？

> ID：15789283
> 
> 赞同：0
> 
> 时间：2013-04-03T13:52:25.220
> 
> 标签：unit-testing, testing, junit, google-maps-android-api-2, android-testing

首先，我是 JUnit 测试的新手。

我已经构建了一个 Android 应用程序，它可以根据用户的当前位置找到最近的地方。它使用 NETWORK 或 GPS 提供程序来获取定位。修复后，它会从远程数据库中检索最近的位置，并在地图上放置一个标记。

我正在使用 Google Maps Android API v2，我注意到无法在模拟器上测试或运行地图。因此，如果是这种情况，我该如何对我的应用程序进行单元测试？

无论如何要在我的设备上运行测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T19:48:38.383

单元测试是针对单元的。

在您的代码中，一个单元将是一个函数，它返回给定地理位置和 DAO 的一些模型对象的列表。然后，您可以模拟 DAO。

这样的测试不必在设备上运行，但可以 - 它只是慢 1e6 倍。

对于基础知识，开始阅读（大量）有关 JUnit、模拟（例如使用 Mockito）、也许是[Testing Fundamentals](http://developer.android.com/tools/testing/testing_android.html)的内容，但我宁愿考虑将逻辑与活动分开，因为活动运作良好，您不必真正测试它们.

# r - 如何以相同的比例在R中着色点

> ID：15789285
> 
> 赞同：0
> 
> 时间：2013-04-03T13:52:32.977
> 
> 标签：r, colors

我有以下形式的数据框：

```
Data <- data.frame(X = sample(1:10), Y = sample(1:10)) 
```

我想为获得的点着色

```
plot(Data$X,Data$Y) 
```

使用来自另一个数据框的值：

```
 X1    X2    X3   X4    X5
1   0.57  0.40  0.64 0.07  0.57
2   0.40  0.45  0.49 0.21  0.39  
3   0.72  0.65  0.74 0.61  0.71
4   0.73  0.54  0.76 0.39  0.64
5   0.88  0.81  0.89 0.75  0.64
6   0.70  0.65  0.78 0.51  0.66
7   0.84  0.91  0.89 0.86  0.83
8  -0.07  0.39 -0.02 0.12 -0.01
9   0.82  0.83  0.84 0.81  0.79
10  0.82  0.55  0.84 0.51  0.59 
```

因此，要使用来自第二个数据帧的五列来为点着色，从而获得五个不同的图表。我设法通过查看here来做到这一点（[图中的颜色点因值的向量而不同](https://stackoverflow.com/questions/9946630/colour-points-in-a-plot-differently-depending-on-a-vector-of-values)），但我无法弄清楚如何为所有五个不同的图设置相同的色标。

第二个数据框中的列可能具有不同的最小值和最大值，因此如果我使用`cut`第一列上的函数生成颜色，这将生成与该列相关的因子和后来的颜色。

希望这很清楚，

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:55:29.890

您需要您的色带包含所有值，因此您可能希望将它们放在同一个向量中。我可能会融化数据，然后制作颜色渐变，然后使用 ggplot 中的 facet 函数来获取多个图。或者，如果您不想使用 ggplot，您可以将数据转换回多列，并为您的颜色添加 5 个额外的列。

```
require(reshape2)
require(ggplot2)
Data.m <- melt(Data,id=Y)
rbPal <- colorRampPalette(c('red','blue'))
Data.m$Col <- rbPal(10)[as.numeric(cut(Data.m$value,breaks = 10))]
ggplot(Data.m, aes(value, Y,col=Col)) + 
  geom_point() +
  facet_grid(variable~.) 
```

你的 Data 对象有两个变量，X 和 Y，但是你说要制作 5 个图，所以这部分有点不清楚，但我认为 melt 函数将有助于获得全面的色带，而 facet_grid 函数可能更容易如果这是你想要的，一次做 5 个图表。

# sql - 从表和数据库中删除条目。网络矩阵/剃须刀

> ID：15789287
> 
> 赞同：0
> 
> 时间：2013-04-03T13:52:41.627
> 
> 标签：sql, razor, webmatrix

我已经用我的数据库中的信息填充了一个表，但我需要另一列，我可以在其中删除表和数据库中的条目。

我已经开始创建一个删除语句，但我不知道我需要删除一个条目吗？

到目前为止，这是我的代码...

```
@{
var db = Database.Open("StayInFlorida");

var sPropertyId = Request.QueryString["PropertyID"];
var roominfo = "SELECT * FROM RoomInfo WHERE PropertyID=@0";
var qroominfo = db.Query(roominfo, sPropertyId);
var droominfo = "DELETE ??? FROM RoomInfo"

if (IsPost){
    var deletesingleroom = db.Query(droominfo, sPropertyId);
}
}

<!DOCTYPE html>

<html lang="en">
<head>
    <meta charset="utf-8" />
    <title></title>
    <link href="~/css/bootstrap.css" rel="stylesheet">
</head>
<body>

    <div id="tab2" class="tab-pane">
<h4>Room Information</h4>
<table class="table table-bordered">
<thead>
<tr>
  <th>Room Title</th>
  <th>Room Type</th>
  <th>Room Description</th>
  <th>Delete Room</th>           
</tr>
</thead>
<tbody>
@foreach (var row in qroominfo)
{
<tr>
<td>@row.RoomTitle</td>
<td>@row.RoomType</td>
<td>@row.RoomDescription</td>
<td>
<form method="post">
<button type="submit" class="btn btn-success">Delete</button
</form>
</td>
</tr>
}
</tbody>
</table>
</div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:49:53.917

我认为您通常对 SQL 中的 delete 语句有问题，而不是在 Razor 上下文中。

删除语句的语法是

```
DELETE FROM RoomInfo WHERE <some condition> 
```

如果您只是发送此查询：

```
DELETE FROM RoomInfo 
```

这将删除您的所有行。
因此，对于从 POST 结果中仅删除一行，它与 select 相同：

```
DELETE FROM RoomInfo WHERE PropertyID=@0 
```

编辑 ：

现在您有了一个唯一标识符来标识您要删除的房间，您可以更新您的代码：

首先，将您房间的 ID 链接到您的删除按钮：

```
<form method="post">
    <input type="text" name="id-room" value="@row.RoomID">
    <button type="submit" class="btn btn-success">Delete</button
</form> 
```

当您提交删除表单时，检索要删除的房间 ID：

```
var sRoomId = Request.QueryString["id-room"];
var droominfo = "DELETE FROM RoomInfo WHERE RoomId = " + sRoomId 
```

请注意，这段代码很糟糕，并且会有很多安全漏洞。
例如，您不应该访问剃刀文件中的数据库。您的工作就像使用老式 PHP 一样。
尝试让自己了解[ASP.NET MVC](http://www.asp.net/mvc)。

# typo3 - TYPO3 htmlArea RTE 填充内容

> ID：15789288
> 
> 赞同：0
> 
> 时间：2013-04-03T13:52:41.813
> 
> 标签：typo3, rte, jhtmlarea

我在我的 TYPO3 扩展中创建了一个 RTE 编辑器（[http://typo3.org/extension-manuals/rtehtmlarea_api_manual/2.2.0/view/6/1/](http://typo3.org/extension-manuals/rtehtmlarea_api_manual/2.2.0/view/6/1/)），它工作正常。

但是我怎样才能把内容放在 RTE 中呢？就像一个“Hello World”。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T17:22:38.393

将一些默认内容放入您使用 RTE 的 DB 字段，您可以在您的扩展程序中执行此操作或使用`TCAdefaults`

# javascript - bxSlider v3.0 - 水平页面滚动

> ID：15789289
> 
> 赞同：1
> 
> 时间：2013-04-03T13:52:41.967
> 
> 标签：javascript, jquery, bxslider

我的 bxSlider v3.0 似乎有 Javascript 问题。

[http://skyllanweb.co.uk/](http://skyllanweb.co.uk/)

页面水平滚动很多，我对 JS 问题知之甚少。

任何人都可以解释一下吗？

# java - OpenCV 和 Android：来自 ROI 的 drawContrours 在图像中的正确位置

> ID：15789290
> 
> 赞同：2
> 
> 时间：2013-04-03T13:52:49.213
> 
> 标签：java, android, opencv, roi

在 Android 上，通过使用 OpenCV，我尝试绘制从 ROI 获得的轮廓，但我无法在图像的正确位置绘制它们。

```
Mat resultImage= ...; // source

Rect roi = new Rect(x, y, widht, height);
Mat mat = new Mat(resultImage, roi);

Imgproc.adaptiveThreshold(mat, mat, 255, Imgproc.ADAPTIVE_THRESH_MEAN_C, Imgproc.THRESH_BINARY_INV, 15, 4);

mat.convertTo(mat, CvType.CV_32SC1);

List<MatOfPoint> contours = new ArrayList<MatOfPoint>();
Mat hierarchy = new Mat();
Imgproc.findContours(mat, contours, hierarchy, Imgproc.RETR_FLOODFILL, Imgproc.CHAIN_APPROX_SIMPLE);

mat.release();

Imgproc.drawContours(resultImage, contours, -1, new Scalar(255,0,0), 1); 
```

它在左上角绘制轮廓。但我需要它在 ROI 来自的“x”、“y”。

有没有办法为任何轮廓添加偏移量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:15:14.917

我得到了它：

```
Imgproc.drawContours(resultImage, contours, -1, new Scalar(255,0,0), 1, 8, hierarchy, 1, new Point(x,y)); 
```

它可以通过使用“Point-Class”来添加偏移量

# php - 无法执行简单的 MySql 查询

> ID：15789293
> 
> 赞同：1
> 
> 时间：2013-04-03T13:53:02.080
> 
> 标签：php, mysql

我对 PHP 非常陌生，仍在学习基础知识，但我遇到了一个问题，希望有人能帮助我。

我有以下代码；

```
$MfgQuery = "SELECT `Mfg` FROM `categories` WHERE `ID` = 10";

if($MfgQueryRun = mysql_query($MfgQuery)) {

    if (mysql_num_rows($MfgQueryRun)==NULL){
        echo 'No Mfg Results Returned';
    } else {
    $Mfg = $MfgQueryRun['Mfg'];
    echo $Mfg;
}
} else {
echo 'Query Unsuccessful';

} 
```

但由于我不知道的原因，我不断收到“未返回制造结果”，但如果我将查询本身复制并粘贴到 PHPMyAdmin 中的 MySQL 框中，它会正确返回结果。

是什么赋予了？？

顺便说一句，这正是我可以插入 PHP MyAdmin 的 SQL 框中的内容；

```
SELECT `Mfg` FROM `categories` WHERE `ID` = 10 
```

这会返回一个结果，但使用上面的代码，它不会。

如果有人不介意告诉我哪里出错了，我将不胜感激，我提前感谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:07:10.023

试试这个

```
 $MfgQuery = "SELECT `Mfg` FROM `categories` WHERE `ID` = 10";

  $MfgQueryRun = mysql_query($MfgQuery) ;
  $row = mysql_fetch_array($MfgQueryRun) ;

   if (mysql_num_rows($MfgQueryRun)== 0 ){
    echo 'No Mfg Results Returned';
  } else {
   $Mfg = $row['Mfg'];
   echo $Mfg;

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:59:22.553

尝试

```
$MfgQuery = "SELECT `Mfg` FROM `categories` WHERE `ID` = 10";
$MfgQueryRun = mysql_query($MfgQuery);

if($MfgQueryRun) {

    if (mysql_num_rows($MfgQueryRun) == 0){
        echo 'No Mfg Results Returned';
    } else {
    $Mfg = $MfgQueryRun['Mfg'];
    echo $Mfg;
}
} else {
echo 'Query Unsuccessful';

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:01:55.343

```
if (mysql_num_rows($MfgQueryRun)){
        echo 'No Mfg Results Returned';
} else {
       $Mfg = $MfgQueryRun['Mfg'];
       echo $Mfg;
} 
```

试试这个删除 NULL 比较。因为 mysql_num_rows 返回数值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:18:44.817

首先，您不应该使用 mysql_* 函数，它们在 PHP 5.5.0 中已被弃用（过时），并且将在未来被删除。请改用 mysqli。

其次，您没有正确测试。PHP 没有强类型，因此测试 '== null' 并不总是如您所愿。[有关比较运算符](http://php.net/manual/en/language.operators.comparison.php)，请参阅 PHP 手册。要针对**null**进行测试，请始终使用**is_null()**。

第三，您没有获取数据。

使用 MySQLi，代码看起来类似于：

```
$mysqli = new mysqli("example.com", "user", "password", "database");
if ($mysqli->connect_errno != 0) {
    echo "Failed to connect to MySQL: (" . $mysqli->connect_errno . ") " . $mysqli->connect_error;
    die(); // or return, if in method or function context
}

$result = $mysqli->query("SELECT `Mfg` FROM `categories` WHERE `ID` = 10");
if ($result === false) {
    echo "Query failed: (" . $mysqli->errno . ") " . $mysqli->error;
    die(); // or return, if in method or function context
}

printf("Select returned %d rows.\n", $result->num_rows);

$row = $result->fetch_assoc();
echo $row['Msg'];

/* free result set */
$result->close(); 
```

# jquery-mobile - 如何动态更改 JQM 中的数据主题以进行可折叠？

> ID：15789295
> 
> 赞同：1
> 
> 时间：2013-04-03T13:53:06.923
> 
> 标签：jquery-mobile

我需要在按钮单击时执行此操作，该操作位于[可折叠](http://api.jquerymobile.com/collapsible/)中，所以我这样做：

```
my_button.closest('div[data-theme="b"]').find('a.ui-btn-up-b').toggleClass('ui-btn-up-b ui-btn-up-d'); 
```

但不幸的是，仍然有一些样式需要更改，但我不知道是哪个...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T13:56:22.447

## 更新的答案

由于动态解决方案不适用于*collapsible*，因此这里是手动解决方案。

**[工作演示](http://jsfiddle.net/Palestinian/RLUbx/)**

代码

```
$('#button').on('click', function () {
 var oldclass = 'ui-btn-up-b ui-body-b';
 var newclass = 'ui-btn-up-d ui-body-d';
 $('[data-role=collapsible]').find('a').removeClass(oldclass  + ' ui-btn-hover-b').addClass(newclass + ' ui-btn-hover-d');
 $('[data-role=collapsible]').find('.ui-collapsible-content').removeClass(oldclass).addClass(newclass);
}); 
```

* * *

## [为什么无法动态更改可折叠数据主题？](https://github.com/jquery/jquery-mobile/issues/3771)

* * *

**旧答案**

不幸的是，以下动态解决方案*令人惊讶地*不起作用。

`.selector`Collapsible的ID在哪里。

```
$('button').on('click', function () {

 // change the theme
 $( ".selector" ).collapsible( "option", "theme", "a" );

 // apply new styles
 $( ".selector" ).collapsible().trigger('create');

}); 
```

# php - 如何重定向联系表格

> ID：15789298
> 
> 赞同：0
> 
> 时间：2013-04-03T13:53:15.107
> 
> 标签：php, drupal, redirect, drupal-7, drupal-modules

如何将 drupal 7 中的联系表重定向到感谢页面？有模块可以执行此 ini drupal 6，但不适用于 drupal 7，我无法找到如何使用规则执行此操作，提交联系表单时没有规则选项。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:26:42.233

[使用hook_form_alter](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_form_alter/7)实现创建您的自定义模块。然后输入类似

```
$form_state['#redirect'] = 'path/to/redirect'; 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-04T08:47:42.593

尝试这样的事情，

```
<?php
function mymodule_form_alter(&$form, $form_state, $form_id){
  if($form_id == 'user_register') {
    $form['#submit'] []= 'mymodule_node_form_submit_handler';
  }
}

function mymodule_node_form_submit_handler($form, &$form_state) {
unset($_REQUEST['destination']);
unset($form['#redirect']);

    $form_state['redirect']  = 'http://google.com';

}

?> 
```

# html - 在内容可编辑 Div 中处理撤消

> ID：15789299
> 
> 赞同：3
> 
> 时间：2013-04-03T13:53:22.037
> 
> 标签：html, undo

我试图使用内容可编辑DIV设计一个编辑器。我想处理撤消选项（ctrl + z）。我能够监听事件。但我发现IE处理这个键并且只撤消我们输入的内容和不是任何动态插入的 html 内容（如表格）。所以我写了这段代码来检查我是否可以阻止浏览器处理 ctrl+z 事件。

```
function keydownevent(e)
{
  if(e.ctrlKey && e.keyCode==90)
 {
   alert('aa').
   e.preventDefault();
   e.stopPropagation();
 } 
```

}

输出是浏览器正在清除内容，然后发出警告消息。如何防止这种情况发生？

# .net - .NET 应用程序未关闭

> ID：15789301
> 
> 赞同：2
> 
> 时间：2013-04-03T13:53:25.850
> 
> 标签：.net, multithreading, backgroundworker

我有一个相当 WPF 应用程序有一个奇怪的行为：在调试时关闭它后，窗口被关闭但调试（因此应用程序本身）仍在运行。我说的是单击窗口上的关闭按钮-通过单击停止调试来强制关闭有效。

我猜即使 UI 线程完成，一些后台线程仍在运行。**我没有**使用`Thread`该类的任何多线程代码，但是**我正在使用一个**名为的库`Ookii.Dialogs`，其中包含一个`ProgressWindow`与旧的`BackgroundWorker`. 这个类是我的主要嫌疑人，但是我相信我使用它正确 - 只是在处理程序中处理长时间运行的操作，`DoWork`通过调用显示进度，并使用类似于`ReportProgress`的方法启动它们，但它也显示了一个进度窗户。操作完成后，窗口自动关闭。`Show()``RunWorkerAsync`

假设这不是图书馆的错，用 a 替换它`BackgroundWorker`（这将是相同的，只是没有进度窗口）仍然会显示相同的症状。知道如何开始诊断吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:55:57.657

将 Visual Studio 附加到正在运行的进程并暂停它。

看看线程以及它们在做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:58:41.003

不确定您是否有同样的问题，但同样的问题发生在我们身上。在您的`Application`课堂上，尝试设置`ShutdownMode = ShutdownMode.OnMainWindowClose`. 默认是最后一个窗口（即使没有打开窗口，这仍然是一个问题）。

[关机模式的 MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.application.shutdownmode.aspx)

```
public partial class App : Application
{
   protected override void OnStartup(StartupEventArgs args)
   {    
      ///Set this to OnMainWindowClose (defaults to OnLastWindowClose)
      ///This seems to prevent the app from running after the main window closes
      ///--alternate solution would be to call Application.Current.Shutdown() from  MainWindow.OnClosing
      ShutdownMode = ShutdownMode.OnMainWindowClose;
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T14:15:25.093

找到了！问题是**我创建了一个从未显示的窗口实例**。这就是我所拥有的：

```
private CustomWindow myWindow;

public MainWindow() {
    this.myWindow = new CustomWindow();    
}

public void Button_Click(object sender, RoutedEventArgs e) {
    this.myWindow.Show();
} 
```

即使我从未点击过按钮（因此从未显示窗口），仍然会创建一个 Window 实例并在内存中等待。这阻止了应用程序关闭。

像这样更改代码解决了问题：

```
private CustomWindow myWindow;

public MainWindow() {

}

public void Button_Click(object sender, RoutedEventArgs e) {
    this.myWindow = new CustomWindow();   
    this.myWindow.Show();
} 
```

窗口现在仅在需要显示时创建（无论如何这是一种更好的方法），并且当它显示时，它实际上可以正确关闭 - 与第一种情况不同，当不单击按钮时使窗口处于奇怪的**“已创建但从未实际显示或关闭”状态**，这阻止了应用程序关闭，因为正如 crashmstr 指出的那样，我的应用程序的默认 ShutdownMode 为 OnLastWindowClose。

# java - 如何在 ant build.xml 的帮助下运行我的自动化脚本？

> ID：15789303
> 
> 赞同：0
> 
> 时间：2013-04-03T13:53:32.817
> 
> 标签：java, ant, webdriver, testng

我已经安装了 ant，我已经在系统变量中设置了 ANT_HOME。在系统环境变量中设置 JAVA_HOME。将 tools.jar 文件复制到“JRE/lib”文件夹中。现在我应该在哪里创建 build.xml，在哪个文件夹中。我有基本的 build.xml。在这个 build.xml 中，我在哪里提到要运行的脚本。例如，我的测试脚本在 google 上搜索了一些东西然后退出。我正在使用 java，testng 在 windows7 上编写我的脚本

```
<?xml version="1.0"?>
<project name="sampleProject" basedir="." default="jar">
    <property name="src" value="ant-source"/>
    <property name="output" value="bin"/>

    <target name="compile" depends="create">
        <javac destdir="bin">
            <src path="${src}"/>
            <classpath refid="java"/>
        </javac>
    </target>

    <target name="jar" depends="compile">
        <jar destfile="test.jar">
            <fileset dir="bin"/>
        </jar>
    </target>

    <target name="clean">
        <delete dir="${output}"/>
    </target>

    <target name="create" depends="clean">
        <mkdir dir="${output}"/>
    </target>

    <path id="java">
        <fileset dir="D:JarsHibernate">
            <include name="*.jar"/>
        </fileset>
    </path>
</project> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:08:33.317

这是我为从命令行执行自动化测试而创建的 build.xml 文件。希望它可以帮助你。

```
<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE project [
]>

<project name="WebTestProject" default="start" basedir=".">  

<!-- ========== Initialize Properties =================================== -->
    <property environment="env"/>
    <property file="./environmentConfig.properties"/>

    <property name="ws.home" value="${basedir}"/>
    <property name="test.dest" value="${ws.home}/build"/>
    <property name="test.src" value="${ws.home}/src"/>
    <property name="browser" value="/usr/bin/google-chrome"/>
    <property name="mail_body_file" value="${basedir}/email_body.txt"/>
    <property name="buildID" value="build123"/>
    <property name="sendmailscript_path" value="${basedir}/sendmail.sh"/>
    <property name="mail_subject" value="Automated_test_execution_of_${buildID}"/>
    <property name="mail_recipient" value="username@domain.com"/>

    <!-- ====== For setting the classpath ====  -->
    <target name="setClassPath" unless="test.classpath">
        <path id="classpath_jars">
            <fileset dir="${ws.home}/lib" includes="*.jar"/>
        </path>
         <pathconvert pathsep=":" property="test.classpath" refid="classpath_jars"/>
    </target>

    <!-- ============ Initializing other stuff ===========  -->
    <target name="init" depends="setClassPath">

    <taskdef name="testng" classpath="${test.classpath}" classname="org.testng.TestNGAntTask" />

    </target>

    <!-- cleaning the destination folders -->
    <target name="clean">
        <delete dir="${test.dest}"/>
    </target>

    <!-- target for compiling the java files -->
    <target name="compile" depends="init, clean" > 
        <delete includeemptydirs="true" quiet="true">
            <fileset dir="${test.dest}" includes="**/*"/>
        </delete>
        <echo message="making directory..."/>
        <mkdir dir="${test.dest}"/>

        <echo message="compiling..."/>
        <javac 
            debug="true" 
            destdir="${test.dest}" 
            srcdir="${test.src}" 
            target="1.6" 
            classpath="${test.classpath}"
            includeantruntime="true"
        >
        </javac>
      </target>

    <!-- run -->
    <target name="run" depends="compile">
        <testng classpath="${test.classpath}:${test.dest}" suitename="InitialTestSuite">
           <xmlfileset dir="${ws.home}" includes="testng.xml"/> 
        </testng>

    </target>

    <!--  ========== Generating reports using XSLT utility ==============    -->
    <target name="testng-xslt-report">
                <delete dir="${basedir}/testng-xslt">
                </delete>
                <mkdir dir="${basedir}/testng-xslt">
                </mkdir>
                <echo message="Generating XSLT report..."/>
                <xslt in="${basedir}/test-output/testng-results.xml" style="${basedir}/testng-results.xsl" out="${basedir}/testng-xslt/index.html">
                    <param expression="${basedir}/testng-xslt/" name="testNgXslt.outputDir" />
                    <param expression="true" name="testNgXslt.sortTestCaseLinks" />
                    <param expression="FAIL,SKIP,PASS,CONF,BY_CLASS" name="testNgXslt.testDetailsFilter" />
                    <param expression="true" name="testNgXslt.showRuntimeTotals" />
                    <classpath refid="classpath_jars">
                    </classpath>
                </xslt>
                <echo message="XSLT report generated"/>
    </target>

    <!-- ====== Fetch the generated report's index.html, open a chrome browser and show the report.========= -->
     <target name="runAndViewReport" depends="run, testng-xslt-report"> 
            <exec executable="${browser}" spawn="yes"> 
           <arg line="'${basedir}/testng-xslt/index.html'" /> 
          </exec>
        <echo message="Opening up the report in a browser..."/>
     </target>

    <!-- Starting point of the execution, should be dependent on target "run".

    Target sequence will be:
    start (not_execute) ==> run (not_execute) ==> compile (not_execute) ==> init (execute) ==> clean (execute)
    start (execute) <== testng-xslt-report (execute) <== run (execute) <== compile (execute) <==

    Suitable for ANT 1.7\. Currently using this ====================== -->

    <target name="start" depends="run, testng-xslt-report">
        <tstamp prefix="getTime">
                <format property="TODAY" pattern="MM-dd-yyyyhhmmaa"/>
        </tstamp>
        <echo message="sending report as mail...."/>
        <property name="execution_time" value="${buildID}_${getTime.TODAY}"/>
        <property name="dest_file" value="/home/Reports/${execution_time}.zip"/>
        <zip destfile="/home/${execution_time}.zip" 
            basedir="${basedir}/testng-xslt"/>
        <property name="report_attachment_file" value="${dest_file}"/>
        <exec executable="${sendmailscript_path}" newenvironment="false"> 
                    <arg value="${mail_subject}"/>
                    <arg value="${mail_recipient}"/>
                    <arg value="${report_attachment_file}"/>
                    <arg value="${mail_body_file}"/> 
        </exec>

    </target>

</project> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:36:22.390

您应该考虑任何来自 ant的“[执行任务”任务。](https://ant.apache.org/manual/tasksoverview.html#exec)

# android - GCM 从谷歌服务器手动注销不起作用

> ID：15789304
> 
> 赞同：1
> 
> 时间：2013-04-03T13:53:33.920
> 
> 标签：android, push-notification, google-cloud-messaging

我有一个从 Google 服务器和 myServer 注册的设备，如果我从 Google 服务器手动取消注册设备但不是从 myServer 我不断收到来自 myServer 的通知。我调用`GCMRegistrar.unregister(context);` 并在调用后转到 GCMIntentService 进入方法

```
@Override
    protected void onUnregistered(Context context, String registrationId) {
        Log.i(TAG, "Device unregistered");
        if (GCMRegistrar.isRegisteredOnServer(context)) {
            //ServerUtilities.customUnregister(context, registrationId);
        } else {
            // This callback results from the call to unregister made on
            // ServerUtilities when the registration to the server failed.
            Log.i(TAG, "Ignoring server unregister callback");
        }
    } 
```

我已经阅读了这个[developer.android unRegistration 是如何工作](http://developer.android.com/google/gcm/adv.html#unreg)的，但我不清楚为什么我一直收到通知？tnks 响应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:56:13.453

注销 gcm 事件后，您应该在您的第三个服务器端应用程序中注销。

```
 protected void onUnregistered(Context context, String registrationId) {
        Log.i(TAG, "Device unregistered");
        if (GCMRegistrar.isRegisteredOnServer(context)) {
            ServerUtilities.customUnregister(context, registrationId); // here 3rd server side unregister
        } else {
            // This callback results from the call to unregister made on
            // ServerUtilities when the registration to the server failed.
            Log.i(TAG, "Ignoring server unregister callback");
        }
    } 
```

# forms - 嵌套弹簧形式标签 标签

> ID：15789307
> 
> 赞同：0
> 
> 时间：2013-04-03T13:53:36.567
> 
> 标签：forms, tags

我当前的jsp包含一些像这样的单选按钮：

```
<input type="radio_1" value="1" id="radio_1"
<c:if test="${account!=1}">disabled</c:if> 
<c:if test="${account==1 && radio_1=='1'}">checked</c:if>/> 
```

我需要将它转换为 spring 框架的表单标签，以便我可以将它绑定到模型 bean。这样做的全部目的是将错误消息绑定到字段。所以我将它转换为弹簧形式标签是这样的：

```
<form:radiobutton path="radio_1" value="1" 
<c:if test="${account!=1}">disabled</c:if>
<c:if test="${account==1 && radio_1=='1'}">checked</c:if>/> 
```

但似乎我们不能像 HTML 标签那样嵌套表单标签所以我收到错误消息“未终止的标签”。但我需要附加这些标签，并且不希望更改原始功能。我们有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-05T19:27:06.877

除了在 disable 属性中使用 c:if 之外，还可以在 radiobutton 标记中使用它

```
<c:if test="${account!=1}">
  <form:radiobutton path="radio_1" value="1" disabled/>
</c:if>

<c:if test="${account==1 && radio_1=='1'}">
  <form:radiobutton path="radio_1" value="1" checked/>
</c:if>

<c:if test="${account==1 && radio_1!='1'}">
 <form:radiobutton path="radio_1" value="1" />
</c:if> 
```

或者

```
<c:choose>
  <c:when test="${account!=1}">
      <form:radiobutton path="radio_1" value="1" disabled/>            
  </c:when>
  <c:when test="${account==1 && radio_1=='1'}">
      <form:radiobutton path="radio_1" value="1" checked/>    
  </c:when>
  <c:otherwise>
      <form:radiobutton path="radio_1" value="1" />                          
  </c:otherwise>
</c:choose> 
```

# installation - 条件在 Setproperty 中未按预期工作

> ID：15789308
> 
> 赞同：1
> 
> 时间：2013-04-03T13:53:37.060
> 
> 标签：installation, wix, wix3.5

我想在 UI 对话框中显示先决条件是否已安装。安装启用 ASP.NET 功能的 IIS 是安装我的设置的先决条件之一。

我已经根据条件在属性中设置了图像（右键单击或错误单击）。

```
<Property Id="ASPNETENABLED">
        <RegistrySearch Id="IIS_ASPNET_RegKey" Root="HKLM" Type="raw" Key="SOFTWARE\Microsoft\InetStp\Components" Name="ASPNET" />
</Property>

<Property Id="IISico" Value="RightClick" />
<SetProperty Id="IISico" Value="WrongClick"  After="CostFinalize"><![CDATA[Installed OR ASPNETENABLED OR (IISMAJORVERSION AND (IISMAJORVERSION = "#6" OR IISMAJORVERSION = "#7"))]]></SetProperty>

<Control Type="Bitmap" Id="IISico" Width="35" Height="17" X="154" Y="105" Text="[IISico]" /> 
```

在没有 ASPNETENABLED 属性的情况下，Setproperty 条件可以正常工作。但它总是失败并显示 ASP.NET 未启用。我检查了日志，它显示在 AppSearch 操作运行时设置了 ASPNETENABLED 属性。

```
Action start 18:47:31: AppSearch.
AppSearch: Property: ASPNETENABLED, Signature: IIS_ASPNET_RegKey
MSI (c) (90:E4) [18:47:31:927]: PROPERTY CHANGE: Adding ASPNETENABLED property. Its value is '#1'. 
```

但是 IISico 属性仅在 CostFinalize 之后运行，它在日志中显示如下。

```
Action 18:47:31: SetIISico. 
Action start 18:47:31: SetIISico.
MSI (c) (90:E4) [18:47:31:930]: PROPERTY CHANGE: Modifying IISico property. Its current value is 'RightClick'. Its new value: 'WrongClick'.
Action ended 18:47:31: SetIISico. Return value 1. 
```

我无法找到问题的根本原因。你能帮我解决这个问题吗？有没有其他方法可以显示先决条件是否已安装？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:28:26.650

听起来您希望在未启用 ASP.NET 时将该`IISico`属性设置为。`"WrongClick"`如果是这样，您的情况应该看起来更像：

```
<SetProperty Id="IISico" Value="WrongClick" After="CostFinalize">
    ASPNETENABLED AND (IISMAJORVERSION = "#6" OR IISMAJORVERSION = "#7")
</SetProperty> 
```

该条件表示，“`SetProperty`如果`ASPNETENABLED`已定义（又名：非空字符串）并且`IISMAJORVERSION`是`#6`or ，则运行自定义操作`#7`。”

我不知道您为什么`Installed`最初包含在条件中。它会`WrongClick`在软件包已经安装的任何时候进行设置。这听起来不像你描述的那样。

# c# - 使用 Microsoft 帐户登录网站

> ID：15789312
> 
> 赞同：1
> 
> 时间：2013-04-03T13:53:47.333
> 
> 标签：c#, html, asp.net

我一直在阅读[此页面“Microsoft 帐户登录体验指南（使用 C#/VB/C++ 和 XAML 的 Windows 应用商店应用程序）”](http://msdn.microsoft.com/en-au/library/windows/apps/xaml/hh968445.aspx)，我还希望我的用户能够使用他们的 Microsoft 帐户登录我的*网站。*

但我还没有找到一个网站，其中包含有关使用 Microsoft 帐户登录网站的文档。有人可以指出我正确的方向吗？任何教程/其他资源也将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:05:11.870

在此处查看 dotnetopenauth 问题或访问 www.dotnetopenauth.net。Microsoft 帐户可用作 OpenId 帐户。还有一个 nuget 包，它使用众所周知的提供程序进行包装，例如 Live ID、Google、Yahoo 等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T14:34:33.767

也许你在找这个？

[http://msdn.microsoft.com/en-US/library/dn659751.aspx](http://msdn.microsoft.com/en-US/library/dn659751.aspx)

# javascript - bootstrap typeahead 结果显示在多行上

> ID：15789315
> 
> 赞同：0
> 
> 时间：2013-04-03T13:53:55.883
> 
> 标签：javascript, jquery, twitter-bootstrap, bootstrap-typeahead

我使用的是 bootstrap 2.3.1，并且我使用了 typeahead，但是显示结果时它们显示在多行上作为附加图片，我使用以下文本生成 typeahead 建议：

```
var colors = ["red", "blue", "green", "yellow", "brown", "black"];
$( "#search1" ).attr("autocomplete", "off");
$( "#search1" ).typeahead({source: colors}); 
```

请指教， ![引导输入错误](https://i.stack.imgur.com/0pg2h.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:18:31.550

谢谢@dfsq

我确实解决了这个问题：

```
ul.typeahead strong {
  display:inline; 
} 
```

# json - xs:string 的 JSON 解组

> ID：15789317
> 
> 赞同：3
> 
> 时间：2013-04-03T13:54:01.577
> 
> 标签：json, jaxb, glassfish

### 问题：

在编组包含以下内容 {"@type":"xs:string"} 的 JSON 对象时，我们遇到了奇怪的问题。此对象的编组会导致 NullPointerException。请参阅下面的堆栈跟踪：

```
java.lang.NullPointerException
at com.sun.org.apache.xalan.internal.xsltc.trax.SAX2DOM.startElement(SAX2DOM.java:204)
at com.sun.org.apache.xml.internal.serializer.ToXMLSAXHandler.closeStartTag(ToXMLSAXHandler.java:208)
at com.sun.org.apache.xml.internal.serializer.ToXMLSAXHandler.characters(ToXMLSAXHandler.java:528)
at com.sun.org.apache.xalan.internal.xsltc.trax.TransformerHandlerImpl.characters(TransformerHandlerImpl.java:172)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.DomLoader.text(DomLoader.java:128)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallingContext.text(UnmarshallingContext.java:499)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.InterningXmlVisitor.text(InterningXmlVisitor.java:78)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.StAXStreamConnector.processText(StAXStreamConnector.java:324)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.StAXStreamConnector.handleEndElement(StAXStreamConnector.java:202)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.StAXStreamConnector.bridge(StAXStreamConnector.java:171)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal0(UnmarshallerImpl.java:355)
at com.sun.xml.internal.bind.v2.runtime.unmarshaller.UnmarshallerImpl.unmarshal(UnmarshallerImpl.java:334)
at com.sun.jersey.json.impl.BaseJSONUnmarshaller.unmarshalJAXBElementFromJSON(BaseJSONUnmarshaller.java:108)
at com.sun.jersey.json.impl.BaseJSONUnmarshaller.unmarshalFromJSON(BaseJSONUnmarshaller.java:97)
at JerseyNPETest.testNPEUnmarshal(JerseyNPETest.java:20) 
```

从外部服务获取响应并通过 glassfish 隐式转换（简单 REST 调用）时会出现问题。

我们调查了这个问题，发现它实际上与 JSON unmarshaller 有关。

### 测试用例：

**Marshalling** - 为了验证我们的发现，我们创建了一个包含名为 propertyA 的 Object 类型成员的类。然后我们将 propertyA 的值设置为“某个值”，并使用默认编组器对其进行编组，从而生成 JSON 字符串“{“@type”:“xs:string”、“$”:“某个值”}”。

**Unmarshalling** - 之后我们使用了默认的 unmarshaller。解组此 JSON 字符串的尝试导致了上述异常。

请看下面的测试用例：

```
import com.sun.jersey.api.json.JSONConfiguration;
import com.sun.jersey.json.impl.BaseJSONUnmarshaller;
import org.junit.Test;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.annotation.XmlRootElement;
import java.io.StringReader;

public class JerseyNPETest {

private static final String ERROR = "{\"additionalObject\":{\"@type\":\"xs:string\",\"$\":\"some value\"}}";

@Test
public void testNPEUnmarshal() throws JAXBException {
    final JAXBContext context = JAXBContext.newInstance(AnObject.class);
    final JSONConfiguration jsonConfig = JSONConfiguration.DEFAULT;
    final BaseJSONUnmarshaller unmarshaller = new BaseJSONUnmarshaller(context, jsonConfig);
    final StringReader reader = new StringReader(ERROR);
    final AnObject result = unmarshaller.unmarshalFromJSON(reader, AnObject.class);
}

@XmlRootElement
public static class AnObject {

    private Object additionalObject;

    public Object getAdditionalObject() {
        return additionalObject;
    }

    public void setAdditionalObject(final Object additionalObject) {
        this.additionalObject = additionalObject;
    }
}
} 
```

### 问题：

通常如何解决这个问题，例如通过一些 glassfish 的配置来首先避免这个问题？目前我们正在使用 glassfish 3.1.2.2。任何帮助深表感谢！

# asp.net-mvc-3 - 如何在表单上显示四舍五入的数字（到小数点后 2 位），但仍然让人们编辑和提交完整的数字？

> ID：15789326
> 
> 赞同：2
> 
> 时间：2013-04-03T13:54:18.163
> 
> 标签：asp.net-mvc-3, forms, rounding

我的 MVC3 站点上有一个表单（我也使用 EF，但它不相关）。现在，此表单由多个输入框组成，用户在其中提供一些数字（十进制）。用户的要求是在计算和存储时使用完整的数字，但是当我们将它们显示给用户时，它们应该四舍五入到小数点后两位。

正如我想象的那样：用户在输入框中看到一个四舍五入的数字，但是一旦框获得焦点，就会显示完整的数字。此外，当提交表单时 - 完整的数字被发送到服务器。有什么可以实现的吗？如果没有，您对如何制作并使其通用化有什么建议吗？我只能认为 os 一些 JS lib，但让我们听听你的想法......

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T14:36:43.867

you can use two fileds somthing like this

```
@Html.HiddenFor(model => model.RealValue, new {id = "realValue"})
@Html.TextBoxFor(model => model.DisplayValue, new {id = "dispValue"}) 
```

and in a script part to make the logic

```
$('#dispValue').focus(function() { $(this).val($('#realValue').val())});
$('#dispValue').focusout(function() { $('realValue').val($(this).val()); $(this).val($(this).val().toFixed(2))}) 
```

And the last thing you shoud do is to send from the controller the display value with two decimal.

# ios - 如何更改 iCarousel 库的 wrap 属性？

> ID：15789327
> 
> 赞同：0
> 
> 时间：2013-04-03T13:54:19.590
> 
> 标签：ios, objective-c, icarousel

我真的很困惑。我是否必须进入 iCarousel.h 文件并在那里进行更改，或者我可以在代码中访问该属性，然后重新加载数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:59:29.157

您可以调用一个委托方法：

```
- (BOOL)carouselShouldWrap:(iCarousel *)carousel {
//wrap all carousels
return YES;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-21T06:01:34.193

@iOSGuru248 是对的。如果它不起作用，试试这个

```
- (CGFloat)carousel:(iCarousel *)carousel valueForOption:(iCarouselOption)option withDefault:(CGFloat)value{
    if(option == iCarouselOptionWrap){
     return YES;
    }
    return value;
} 
```

# matlab - 从零开始的条形图

> ID：15789328
> 
> 赞同：0
> 
> 时间：2013-04-03T13:54:21.463
> 
> 标签：matlab, bar-chart

我有一个包含 11 个元素的向量。我想显示如下图所示的图表： ![图片](https://s21.postimg.org/jm8d0426v/asdas.png)

但我的图表从第一个月开始。我怎样才能让它从第零个月开始？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:58:08.563

您可以同时使用 x 和 y 输入参数`bar`。

```
ax = axes();    
x = 0:11;
bar(x,y); 
```

如果这不能为您提供所需的绘图，您还可以使用`Xlim`、`XTick`和`XTickLabel`的属性来控制 x 轴的外观。

```
set(ax, 'Xlim', [0,11])
set(ax, 'XTick', [0:11]) 
```

# sql - 将生成的 XML 列（来自子查询）加入父查询

> ID：15789331
> 
> 赞同：0
> 
> 时间：2013-04-03T13:54:27.353
> 
> 标签：sql, sql-server

我正在处理一个现有查询，该查询当前连接了许多表，但也连接到子查询。类似于我在下面显示的内容：

```
SELECT p.*
FROM Product as p
LEFT JOIN (
SELECT pl.*
FROM ProductList
WHERE .....) as pl
ON p.id = pl.productId
WHERE.... 
```

现在在实际查询和更多条件中有比这更多的表，但我只想专注于这个问题。

我们想要的是内部查询（在 ProductList 上）以 XML 形式返回，当然也将其连接到顶级表上的正确行。

我猜是这样的

```
SELECT top 10 p.*
FROM Catalogue.Product as p
LEFT JOIN (
SELECT TOP 10 *
FROM Catalogue.ProductListItem
FOR XML RAW('Product'), ROOT('Products'), ELEMENTS
) as pl
ON p.productid = salespart.nodes('Products/Product/ProductId') 
```

你能帮我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:16:37.207

不太清楚您希望输出是什么，但我想对您来说最好的方法是在`Catalogue.ProductListItem`为每个产品构建 XML 的字段列表中使用相关的子查询。

```
select p.*,
       (
         select pl.*
         from Catalogue.ProductListItem as pl
         where pl.ProductID = p.ProductID
         for xml raw('Product'), root('Products'), elements, type
       ) as ProductXML
from Catalogue.Product as p 
```

# javascript - 将一个矩形分成四个可点击（或悬停）三角形

> ID：15789335
> 
> 赞同：-1
> 
> 时间：2013-04-03T13:54:36.093
> 
> 标签：javascript, html, geometry

在继续阅读之前，我的问题是知道找到对象高度/宽度/位置的最佳方法是什么，因为这似乎存在一些冲突。之后，我将需要有关如何使用先前获得的数据来执行以下列表中的第 4 项的帮助。在那之后，我需要5号的帮助。我希望逐步做到这一点，所以请多多包涵。

我找到了如何将一个正方形分成两个相等的三角形可点击区域的代码（[一个正方形内的两个三角形可点击区域](https://stackoverflow.com/questions/9028097/two-triangular-clickable-area-within-a-square#)）。老实说，我并不太了解代码在做什么。我的问题是将代表可见屏幕区域的矩形细分为四个可点击区域，想象它的对角线被绘制。我确实发现这非常有用（伪）-伪代码：

1.  创建一个 div 并将其设置为正方形。使用背景图像来说明三角形

2.  在 javascript 中创建一个变量 square 来保存 square 元素

3.  在你的js中获取正方形的位置、高度和宽度

4.  做一些数学运算来确定每个三角形顶点的坐标

5.  编写一个函数 ，`getQuadrant()`确定正方形内任何给定点在哪个三角形中

6.  添加事件侦听器以单击广场上的事件。事件监听器应该调用`getQuadrant`函数

7.  使用开关/案例来执行您需要调用的任何代码，条件是点击落在哪个象限

我不会马上要求完整的代码，我想在这个过程中学习。有人可以帮我指出数字 3 和 4 使用哪些方法吗？我很可能也需要 5 号的帮助。

感谢您的帮助！=)

ķ

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:02:44.960

如果您平移所有内容以使正方形的中心为原点，则三角形的边界由线 x == y 和 x == -y 定义。您可以基于该关系进行象限分类：

1.  如果 x > Math.abs(y)，那么你在直角三角形中
2.  如果 y > Math.abs(x)，那么你在顶部三角形中
3.  如果 -x > Math.abs(y)，那么你在左三角形
4.  如果 -y > Math.abs(x)，那么你在底部三角形

可以任意解决两个（或四个，如果 x == y == 0）最接近的三角形之间的关系。

# tridion - 如何在 Tridion 的 Compound 模板（使用 C#fragment）中调用 Vbscript 函数？

> ID：15789341
> 
> 赞同：1
> 
> 时间：2013-04-03T13:54:49.830
> 
> 标签：tridion, tridion-2011

请告诉我如何在 Tridion 2011 的复合模板（使用 C#fragment）中调用 Vbscript 函数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:01:10.273

我很确定这是不可能的。您不能将旧模板与模块化模板混合使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T14:06:59.053

听起来您正在将传统样式的 VBScript 页面模板与当前样式的复合组件模板（或类似的东西）混合在一起。[混合这两种类型（有时）是可能的](https://stackoverflow.com/questions/13052188/is-it-possible-to-intermix-modular-templating-and-legacy-vbscript-ct)，但是您不能像使用纯 VBScript 设置那样从组件模板调用页面模板中的函数。

根据您的用例，您需要将 VBScript 函数的功能重新实现为 Dreamweaver 模板可调用[自定义函数](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/task_EFD94BC0585D4186A13F7F3C3B6F47EA)或基于 .Net 的模板构建块（[C# 片段](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/concept_EAD6A4932E6B4BAA87646A5F8D9C6A9C)或[.Net 程序集](http://sdllivecontent.sdl.com/LiveContent/content/en-US/SDL_Tridion_2011_SPONE/idheading-158937808)）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-18T22:00:39.037

好的 - 只是为了好玩，一个严格的字面答案。请注意，我不提倡这种方法。

1.  用 VBScript 编写函数
2.  将您的 VbScript 文件转换为[Windows 脚本组件](http://technet.microsoft.com/en-us/library/ee692823.aspx)
3.  为您的 Windows 脚本组件创建一个 .NET 互操作包装器
4.  把东西放在 GAC 我应该认为......
5.  从您的 C# 片段中调用它

正如我所说 - 这是对您的问题的严格字面回答。可以说技术上可以按照您的要求进行操作就足够了，但这不会有用，因为除了处理所有这些层的所有技术难题之外，您想要在模板中做的通常是调用Tridion API，当然，VBScript 模板环境中可用的 API 与复合模板中可用的 API 不同。

在实践中，您可能会发现您的旧 VBScript 模板无论如何都需要重新编写。偶尔这样做是一件好事。

# python - 查找字符串中每个子字符串的所有出现

> ID：15789343
> 
> 赞同：3
> 
> 时间：2013-04-03T13:54:55.690
> 
> 标签：python, regex, string

我试图在主字符串（所有长度）中找到所有出现的子字符串。我的函数接受一个字符串，然后返回每个子字符串的字典（当然，它不止一次出现）以及它出现的次数（字典的格式：）`{substring: # of occurrences, ...}`。我正在使用`collections.Counter(s)`它来帮助我。

这是我的功能：

```
from collections import Counter

def patternFind(s):
    patterns = {}
    for index in range(1, len(s)+1)[::-1]:
        d = nChunks(s, step=index)
        parts = dict(Counter(d))
        patterns.update({elem: parts[elem] for elem in parts.keys() if parts[elem] > 1})
    return patterns

def nChunks(iterable, start=0, step=1):
    return [iterable[i:i+step] for i in range(start, len(iterable), step)] 
```

我有一个字符串，`data`大约有 2500 个随机字母（以随机顺序）。但是，其中插入了 2 个字符串（随机点）。假设这个字符串是“TEST”。`data.count('TEST')`返回 2。但是，`patternFind(data)['TEST']`给了我一个`KeyError`. 因此，我的程序没有检测到其中的两个字符串。

我做错了什么？谢谢！

编辑：我创建测试实例的方法：

```
def createNewTest():
    n = randint(500, 2500)
    x, y = randint(500, n), randint(500, n)
    s = ''
    for i in range(n):
        s += choice(uppercase)
        if i == x or i == y: s += "TEST"
    return s 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:20:05.490

## 使用正则表达式

除了`count()`您描述的方法之外，正则表达式是一个明显的选择

```
import re

needle = r'TEST'

haystack = 'khjkzahklahjTESTkahklaghTESTjklajhkhzkhjkzahklahjTESTkahklagh'
pattern = re.compile(needle)

print len(re.findall(pattern, haystack)) 
```

## 捷径

如果您需要构建子字符串字典，则可能只使用这些字符串的子集即可。假设您知道`needle`要在 中查找 ，那么您只需要与 .长度相同`data`的子字符串字典。这是非常快的。`data``needle`

```
from collections import Counter

needle = "TEST"

def gen_sub(s, len_chunk):
    for start in range(0, len(s)-len_chunk+1):
        yield s[start:start+len_chunk]

data = 'khjkzahklahjTESTkahklaghTESTjklajhkhzkhjkzahklahjTESTkahklaghTESz'
parts = Counter([sub for sub in gen_sub(data, len(needle))])

print parts[needle] 
```

## 蛮力：构建所有子字符串的字典

如果您需要计算所有可能的子字符串，这可行，但速度很慢：

```
from collections import Counter

def gen_sub(s):
    for start in range(0, len(s)):
        for end in range(start+1, len(s)+1):
            yield s[start:end]

data = 'khjkzahklahjTESTkahklaghTESTjklajhkhz'
parts = Counter([sub for sub in gen_sub(data)])

print parts['TEST'] 
```

改编自此的子字符串生成器：[https ://stackoverflow.com/a/8305463/1290420](https://stackoverflow.com/a/8305463/1290420)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-11T11:53:01.843

虽然 jurgenreza 已经解释了为什么您的程序不起作用，但解决方案仍然很慢。如果你只检查`s`你知道`s[:-1]`重复的子串，你会得到一个更快的解决方案（通常快一百倍甚至更多）：

```
from collections import defaultdict

def pfind(prefix, sequences):
    collector = defaultdict(list)
    for sequence in sequences:
        collector[sequence[0]].append(sequence)
    for item, matching_sequences in collector.items():
        if len(matching_sequences) >= 2:
            new_prefix = prefix + item
            yield (new_prefix, len(matching_sequences))
            for r in pfind(new_prefix, [sequence[1:] for sequence in matching_sequences]):
                yield r

def find_repeated_substrings(s):
    s0 = s + " "
    return pfind("", [s0[i:] for i in range(len(s))]) 
```

如果你想要一个字典，你可以这样称呼它：

```
result = dict(find_repeated_substrings(s)) 
```

在我的机器上，运行 2247 个元素需要 0.02 秒，而原始（更正）解决方案需要 12.72 秒。

（请注意，这是一个相当幼稚的实现；使用索引而不是子字符串应该更快。）

**编辑：**以下变体适用于其他序列类型（不仅是字符串）。此外，它不需要哨兵元素。

```
from collections import defaultdict

def pfind(s, length, ends):
    collector = defaultdict(list)
    if ends[-1] >= len(s):
        del ends[-1]
    for end in ends:
        if end < len(s):
            collector[s[end]].append(end)
    for key, matching_ends in collector.items():
        if len(matching_ends) >= 2:
            end = matching_ends[0]
            yield (s[end - length: end + 1], len(matching_ends))
            for r in pfind(s, length + 1, [end + 1 for end in matching_ends if end < len(s)]):
                yield r

def find_repeated_substrings(s):
    return pfind(s, 0, list(range(len(s)))) 
```

这仍然存在非常长的子字符串会超过递归深度的问题。您可能想要捕获异常。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-06T00:11:10.610

在这里，您可以找到一个使用递归包装器的解决方案，该包装器`string.find()`搜索主字符串中子字符串的所有出现。该`collectallchuncks()`函数将`defaultdict`所有子字符串作为键返回，并为每个子字符串返回在主字符串中找到子字符串的所有索引的列表。

```
import collections

# Minimum substring size, may be 1
MINSIZE = 3

# Recursive wrapper
def recfind(p, data, pos, acc):
    res = data.find(p, pos)
    if res == -1:
        return acc
    else:
        acc.append(res)
        return recfind(p, data, res+1, acc)

def collectallchuncks(data):
    res = collections.defaultdict(str)
    size = len(data)
    for base in xrange(size):
        for seg in xrange(MINSIZE, size-base+1):
            chunk = data[base:base+seg]
            if data.count(chunk) > 1:
                res[chunk] = recfind(chunk, data, 0, [])
    return res

if __name__ == "__main__":
    data = 'khjkzahklahjTESTkahklaghTESTjklajhkhzkhjkzahklahjTESTkahklaghTESz'
    allchuncks = collectallchuncks(data)
    print 'TEST', allchuncks['TEST']
    print 'hklag', allchuncks['hklag'] 
```

编辑：如果您只需要主字符串中每个子字符串的出现次数，您可以轻松获得它摆脱递归函数：

```
import collections

MINSIZE = 3

def collectallchuncks2(data):
    res = collections.defaultdict(str)
    size = len(data)
    for base in xrange(size):
        for seg in xrange(MINSIZE, size-base+1):
            chunk = data[base:base+seg]
            cnt = data.count(chunk)
            if cnt > 1:
                res[chunk] = cnt
    return res

if __name__ == "__main__":
    data = 'khjkzahklahjTESTkahklaghTESTjklajhkhzkhjkzahklahjTESTkahklaghTESz'
    allchuncks = collectallchuncks2(data)
    print 'TEST', allchuncks['TEST']
    print 'hklag', allchuncks['hklag'] 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-06T03:54:40.443

问题出在你的`nChunks`功能上。它不会为您提供所有必要的块。

让我们考虑一个测试字符串：

```
s='1test2345test' 
```

对于大小为 4 的块，您的`nChunks`函数会给出以下输出：

```
>>>nChunks(s, step=4)
['1tes', 't234', '5tes', 't'] 
```

但你真正想要的是：

```
>>>def nChunks(iterable, start=0, step=1):
    return [iterable[i:i+step] for i in range(len(iterable)-step+1)]
>>>nChunks(s, step=4)
['1tes', 'test', 'est2', 'st23', 't234', '2345', '345t', '45te', '5tes', 'test'] 
```

你可以看到这样有两个`'test'`块，你`patternFind(s)`会像一个魅力一样工作：

```
>>> patternFind(s)
{'tes': 2, 'st': 2, 'te': 2, 'e': 2, 't': 4, 'es': 2, 'est': 2, 'test': 2, 's': 2} 
```

# android - 当我有经度和纬度时如何显示位置名称？

> ID：15789353
> 
> 赞同：0
> 
> 时间：2013-04-03T13:55:18.757
> 
> 标签：android, google-maps, google-geocoder

当我有位置的经度和纬度时，我试图从 android 中的 google maps api 中找出位置名称。我想要实现的是，在获得位置名称后，我想向我的朋友发送一条短信，告诉他们我当前的位置。我不确定是否需要打开地理编码器服务。

这就是我到目前为止所做的，现在我卡住了。

```
class mylocationlistener implements LocationListener
{

    @SuppressLint("NewApi")
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
        if(location != null)
        {
            Double longi = location.getLongitude();
            Double lat = location.getLatitude();
            String str = "";

            str= "Longitude=" + longi + ", Latitude=" + lat;
            Toast.makeText(getApplicationContext(),str,Toast.LENGTH_LONG).show();

            Geocoder geocoder = new Geocoder(getBaseContext(), Locale.getDefault());

            boolean abc = Geocoder.isPresent();
            try {
                List<Address> addresses = geocoder.getFromLocation(lat, longi, 1);
                if(!addresses.isEmpty())
                {
                str = addresses.get(0).getLocality() + addresses.get(0).getAddressLine(1)+ addresses.get(0).getAddressLine(2);
                }
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            Toast.makeText(getApplicationContext(),str, Toast.LENGTH_LONG).show();
        }
    }
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:01:22.450

我想你几乎已经完成了，我之前处理这个问题的方法是使用以下代码：

```
public static String getAddressStringFromLocation(Context context, Location location) {
    GeoPoint gp = new GeoPoint((int) (location.getLatitude() * 1e6), 
            (int) (location.getLongitude() * 1e6)); 
    return getAddressStringFromGeoPoint(context, gp);
}

public static String getAddressStringFromGeoPoint(Context context, GeoPoint point) {
    StringBuilder sb = new StringBuilder();
    Address ad = getAddressFromGeoPoint(context, point);
    if(ad != null && ad.getMaxAddressLineIndex() > 0) {
        for(int i = 0, max = ad.getMaxAddressLineIndex(); i < max; i++) {
            sb.append(ad.getAddressLine(i));
        }
        sb.append(ad.getThoroughfare());
        return sb.toString();
    } else {
        return null;
    }
}

public static Address getAddressFromGeoPoint(Context context, GeoPoint point){
    Geocoder geoCoder = new Geocoder(context, Locale.CHINA);
    Address address = null;
    try {
        List<Address> addresses = geoCoder.getFromLocation(point.getLatitudeE6() / 1E6, point.getLongitudeE6() / 1E6, 1);
        address = addresses.get(0);
    } catch (IOException e) {
        e.printStackTrace();
    }
    return address;
} 
```

# hibernate - JPA 将字段映射到对象而不在 DB 中创建表

> ID：15789357
> 
> 赞同：1
> 
> 时间：2013-04-03T13:55:24.173
> 
> 标签：hibernate, jpa, mapping, native-sql

我正在使用 JPA、JSF、Spring。

我有时必须使用本机 SQL。它们通常与其他表连接。我不想为此在数据库中创建表，也不想将字段映射到我自己的对象。所以对于这个 JPA 有和 ResultSetMapping 但你有使用实体和实体在数据库中创建表。

如何使用 JPA 将字段映射到对象，而无需创建表（无实体）或数据库中的任何内容？

这是一个简单的临时代码。

谢谢

```
import java.math.BigDecimal;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.EntityResult;
import javax.persistence.FieldResult;
import javax.persistence.Id;
import javax.persistence.SqlResultSetMapping;

@SqlResultSetMapping(
        name="CustomerResultSetMapping",
        entities = @EntityResult(
                entityClass = Customer.class,
                fields = {
                    @FieldResult( name ="LONG_ID"           ,   column ="LONG_ID"               ),
                    @FieldResult( name ="STRING_NAME"       ,   column ="STRING_NAME"           ),
                    @FieldResult( name ="STRING_ADDRESS"    ,   column ="STRING_ADDRESS"        ),
                    @FieldResult( name ="BIGDECIMAL_PRICE"  ,   column ="BIGDECIMAL_PRICE"      ),
                    @FieldResult( name ="INT_AGE"           ,   column ="INT_AGE"               )
                }
        )
)

@Entity
public class Customer  {

    @Id         Long LONG_ID                ;
    @Column     String STRING_NAME          = "";
    @Column     BigDecimal BIGDECIMAL_PRICE = BigDecimal.ZERO;
    @Column     Integer INT_AGE             = 0;

    /////// getters and setters

} 
```

Dao 使用 Native Oracle SQL 获取数据

```
public List getCustomerAddress(Long customerId)  {
    try {

        String sql = "" +
                " SELECT LONG_ID," +
                "        STRING_NAME," +
                "        A.ADDRESS AS STRING_ADDRESS," +
                "        INT_AGE," +
                "         (  PRICE * NUM_TIME * (CASE WHEN NUM_TIME = 0 THEN 1 WHEN NUM_TIME IS NULL THEN 1 ELSE NUM_TIME END))  AS BIGDECIMAL_PRICE" +
                "   FROM T_CUSTOMER C, T_ADDRESS A" +
                "   WHERE C.ADDRESS_ID = A.ID AND C.ID = :CUSTOMER_ID" +
                " ";
        Query query = entityManager.createNativeQuery(sql,"CustomerResultSetMapping");
        query.setParameter("CUSTOMER_ID", customerId);
        List resultList = query.getResultList();
        return resultList;

    } catch (Exception e) {
        logger.error(e);
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-28T16:23:56.063

这是我的工作解决方案。

Integer, Float, Long,... 必须是 BigDecimal

```
import java.math.BigDecimal;
import java.util.List;

import org.hibernate.SQLQuery;
import org.hibernate.transform.ResultTransformer;
import org.hibernate.transform.Transformers;

public class PojoCustomer  {

    BigDecimal  LONG_ID          ; // Long          LONG_ID             = 0L  ;
    String      STRING_NAME      ; // String        STRING_NAME         = "";
    BigDecimal  BIGDECIMAL_PRICE ; // BigDecimal    BIGDECIMAL_PRICE    = BigDecimal.ZERO;
    BigDecimal  INT_AGE          ; // Integer       INT_AGE             = 0;

    /////// getters and setters

} 
```

DAO 使用本机 Oracle SQL 获取数据

```
public List getCustomerAddress(Long customerId)  {
    try {
        StringBuilder sqlBuilder = new StringBuilder();
        sqlBuilder.append(" SELECT LONG_ID, ");
        sqlBuilder.append("        STRING_NAME, ");
        sqlBuilder.append("        A.ADDRESS AS STRING_ADDRESS, ");
        sqlBuilder.append("        INT_AGE, ");
        sqlBuilder.append("         (  PRICE * NUM_TIME * (CASE WHEN NUM_TIME = 0 THEN 1 WHEN NUM_TIME IS NULL THEN 1 ELSE NUM_TIME END))  AS BIGDECIMAL_PRICE ");
        sqlBuilder.append("   FROM T_CUSTOMER C, T_ADDRESS A ");
        sqlBuilder.append("   WHERE C.ADDRESS_ID = A.ID AND C.ID = :CUSTOMER_ID ");

        SQLQuery createSQLQuery = getNewSession().createSQLQuery(sqlBuilder.toString());
        createSQLQuery.setParameter("CUSTOMER_ID", customerId);

        createSQLQuery.addScalar("LONG_ID");
        createSQLQuery.addScalar("STRING_NAME");
        createSQLQuery.addScalar("BIGDECIMAL_PRICE");
        createSQLQuery.addScalar("INT_AGE");

        ResultTransformer aliasToBean = Transformers.aliasToBean(PojoCustomer.class);
        List resultWithAliasedBean = createSQLQuery.setResultTransformer(aliasToBean).list();

        return resultWithAliasedBean;

    } catch (Exception e) {
        logger.error(e);
        return null;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-30T12:00:50.283

你可以试试

```
Query query = entityManager.createQuery("SELECT NEW PojoCustomer(c.LONG_ID, c.STRING_NAME, C.INT_AGE) from T_CUSTOMER c"); 
```

进而

```
query.getResultList(); 
```

应该返回列表

当然，您需要为类 PojoCustomer 创建适当的构造函数。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-07-22T20:20:13.687

```
package ferro.model;

import java.math.BigDecimal;

import javax.persistence.Entity;
import javax.persistence.Id;

@Entity
public class Venclipro implements java.io.Serializable {

    /**
     * 
     */
    private static final long serialVersionUID = 1L;
    private String registro;
    private String ord_Ped;
    private int prod_Dscto_Remate;
    private String cod_Vta;
    private int item;
    private String prodCon;
    private String anio;
    private String mes;
    private String cat;
    private String descripcion;
    private String subc;
    private String subDescripcion;
    private String producto;
    private String marca;
    private String prod_Descripcion;
    private String vendedor;
    private String cd_Vdr;
    private String cliente;
    private String nombre_Cli;
    private String tdoc;
    private String serie;
    private String nroDoc;
    private BigDecimal tc_Venta;
    private BigDecimal tc_Inv;
    private String cond_Pago;
    private String cod_Mon;
    private String moneda;
    private BigDecimal vta_Unid;
    private BigDecimal vta_Neta;
    private BigDecimal dscto;
    private BigDecimal total_Cprom;
    private BigDecimal vta_Sin_Dscto;
    private String factura;

    public Venclipro() {

    }

    public Venclipro(String registro, String ord_Ped, int prod_Dscto_Remate,
            String cod_Vta, int item, String prodCon, String anio, String mes,
            String cat, String descripcion, String subc, String subDescripcion,
            String producto, String marca, String prod_Descripcion,
            String vendedor, String cd_Vdr, String cliente, String nombre_Cli,
            String tdoc, String serie, String nroDoc, BigDecimal tc_Venta,
            BigDecimal tc_Inv, String cond_Pago, String cod_Mon, String moneda,
            BigDecimal vta_Unid, BigDecimal vta_Neta, BigDecimal dscto,
            BigDecimal total_Cprom, BigDecimal vta_Sin_Dscto, String factura) {
        this.registro = registro;
        this.ord_Ped = ord_Ped;
        this.prod_Dscto_Remate = prod_Dscto_Remate;
        this.cod_Vta = cod_Vta;
        this.item = item;
        this.prodCon = prodCon;
        this.anio = anio;
        this.mes = mes;
        this.cat = cat;
        this.descripcion = descripcion;
        this.subc = subc;
        this.subDescripcion = subDescripcion;
        this.producto = producto;
        this.marca = marca;
        this.prod_Descripcion = prod_Descripcion;
        this.vendedor = vendedor;
        this.cd_Vdr = cd_Vdr;
        this.cliente = cliente;
        this.nombre_Cli = nombre_Cli;
        this.tdoc = tdoc;
        this.serie = serie;
        this.nroDoc = nroDoc;
        this.tc_Venta = tc_Venta;
        this.tc_Inv = tc_Inv;
        this.cond_Pago = cond_Pago;
        this.cod_Mon = cod_Mon;
        this.moneda = moneda;
        this.vta_Unid = vta_Unid;
        this.vta_Neta = vta_Neta;
        this.dscto = dscto;
        this.total_Cprom = total_Cprom;
        this.vta_Sin_Dscto = vta_Sin_Dscto;
        this.factura = factura;
    }

    @Id
    public String getRegistro() {
        return registro;
    }

    public void setRegistro(String registro) {
        this.registro = registro;
    }

    public String getOrd_Ped() {
        return ord_Ped;
    }

    public void setOrd_Ped(String ord_Ped) {
        this.ord_Ped = ord_Ped;
    }

    public int getProd_Dscto_Remate() {
        return prod_Dscto_Remate;
    }

    public void setProd_Dscto_Remate(int prod_Dscto_Remate) {
        this.prod_Dscto_Remate = prod_Dscto_Remate;
    }

    @Id
    public String getCod_Vta() {
        return cod_Vta;
    }

    public void setCod_Vta(String cod_Vta) {
        this.cod_Vta = cod_Vta;
    }

    public int getItem() {
        return item;
    }

    public void setItem(int item) {
        this.item = item;
    }

    public String getProdCon() {
        return prodCon;
    }

    public void setProdCon(String prodCon) {
        this.prodCon = prodCon;
    }

    public String getAnio() {
        return anio;
    }

    public void setAnio(String anio) {
        this.anio = anio;
    }

    public String getMes() {
        return mes;
    }

    public void setMes(String mes) {
        this.mes = mes;
    }

    public String getCat() {
        return cat;
    }

    public void setCat(String cat) {
        this.cat = cat;
    }

    public String getDescripcion() {
        return descripcion;
    }

    public void setDescripcion(String descripcion) {
        this.descripcion = descripcion;
    }

    public String getSubc() {
        return subc;
    }

    public void setSubc(String subc) {
        this.subc = subc;
    }

    public String getSubDescripcion() {
        return subDescripcion;
    }

    public void setSubDescripcion(String subDescripcion) {
        this.subDescripcion = subDescripcion;
    }

    public String getProducto() {
        return producto;
    }

    public void setProducto(String producto) {
        this.producto = producto;
    }

    public String getMarca() {
        return marca;
    }

    public void setMarca(String marca) {
        this.marca = marca;
    }

    public String getProd_Descripcion() {
        return prod_Descripcion;
    }

    public void setProd_Descripcion(String prod_Descripcion) {
        this.prod_Descripcion = prod_Descripcion;
    }

    public String getVendedor() {
        return vendedor;
    }

    public void setVendedor(String vendedor) {
        this.vendedor = vendedor;
    }

    public String getCd_Vdr() {
        return cd_Vdr;
    }

    public void setCd_Vdr(String cd_Vdr) {
        this.cd_Vdr = cd_Vdr;
    }

    public String getCliente() {
        return cliente;
    }

    public void setCliente(String cliente) {
        this.cliente = cliente;
    }

    public String getNombre_Cli() {
        return nombre_Cli;
    }

    public void setNombre_Cli(String nombre_Cli) {
        this.nombre_Cli = nombre_Cli;
    }

    public String getTdoc() {
        return tdoc;
    }

    public void setTdoc(String tdoc) {
        this.tdoc = tdoc;
    }

    public String getSerie() {
        return serie;
    }

    public void setSerie(String serie) {
        this.serie = serie;
    }

    public String getNroDoc() {
        return nroDoc;
    }

    public void setNroDoc(String nroDoc) {
        this.nroDoc = nroDoc;
    }

    public BigDecimal getTc_Venta() {
        return tc_Venta;
    }

    public void setTc_Venta(BigDecimal tc_Venta) {
        this.tc_Venta = tc_Venta;
    }

    public BigDecimal getTc_Inv() {
        return tc_Inv;
    }

    public void setTc_Inv(BigDecimal tc_Inv) {
        this.tc_Inv = tc_Inv;
    }

    public String getCond_Pago() {
        return cond_Pago;
    }

    public void setCond_Pago(String cond_Pago) {
        this.cond_Pago = cond_Pago;
    }

    public String getCod_Mon() {
        return cod_Mon;
    }

    public void setCod_Mon(String cod_Mon) {
        this.cod_Mon = cod_Mon;
    }

    public String getMoneda() {
        return moneda;
    }

    public void setMoneda(String moneda) {
        this.moneda = moneda;
    }

    public BigDecimal getVta_Unid() {
        return vta_Unid;
    }

    public void setVta_Unid(BigDecimal vta_Unid) {
        this.vta_Unid = vta_Unid;
    }

    public BigDecimal getVta_Neta() {
        return vta_Neta;
    }

    public void setVta_Neta(BigDecimal vta_Neta) {
        this.vta_Neta = vta_Neta;
    }

    public BigDecimal getDscto() {
        return dscto;
    }

    public void setDscto(BigDecimal dscto) {
        this.dscto = dscto;
    }

    public BigDecimal getTotal_Cprom() {
        return total_Cprom;
    }

    public void setTotal_Cprom(BigDecimal total_Cprom) {
        this.total_Cprom = total_Cprom;
    }

    public BigDecimal getVta_Sin_Dscto() {
        return vta_Sin_Dscto;
    }

    public void setVta_Sin_Dscto(BigDecimal vta_Sin_Dscto) {
        this.vta_Sin_Dscto = vta_Sin_Dscto;
    }

    public String getFactura() {
        return factura;
    }

    public void setFactura(String factura) {
        this.factura = factura;
    }

}

@PersistenceUnit
EntityManagerFactory entityManagerFactory;

    @Test
    public void test() {

        EntityManager em = entityManagerFactory.createEntityManager();

Query query = em.createNativeQuery("SELECT * from UFN_REPORTE_VENTAS_DESDE_HASTA('20543886913','01/07/2015','21/07/2015','1')",
                        Venclipro.class);
        List<Venclipro> list = query.getResultList();

        System.err.println("tamaño : " + list.size());

        for (Venclipro obj : list) {
            System.err.println("Registro : " + obj.getRegistro() + " CD_VTA : "+ obj.getCod_Vta());
        }
} 
```

休眠：

```
/* dynamic native SQL query */
SELECT
    * 
from
    UFN_REPORTE_VENTAS_DESDE_HASTA('20543886913',
    '01/07/2015',
    '21/07/2015',
    '1')

tamaño : 1648
Registro : VTGN_RV07-00003 CD_VTA : VT00012238
Registro : VTGN_RV07-00004 CD_VTA : VT00012239
Registro : VTGN_RV07-00004 CD_VTA : VT00012239
Registro : VTGN_RV07-00004 CD_VTA : VT00012239
Registro : VTGN_RV07-00004 CD_VTA : VT00012239
Registro : VTGN_RV07-00005 CD_VTA : VT00012240
Registro : VTGN_RV07-00006 CD_VTA : VT00012241
Registro : VTGN_RV07-00007 CD_VTA : VT00012242
Registro : VTGN_RV07-00008 CD_VTA : VT00012243
Registro : VTGN_RV07-00008 CD_VTA : VT00012243
Registro : VTGN_RV07-00008 CD_VTA : VT00012243
Registro : VTGN_RV07-00008 CD_VTA : VT00012243
Registro : VTGN_RV07-00017 CD_VTA : VT00012255
Registro : VTGN_RV07-00017 CD_VTA : VT00012255
Registro : VTGN_RV07-00017 CD_VTA : VT00012255
Registro : VTGN_RV07-00017 CD_VTA : VT00012255
Registro : VTGN_RV07-00017 CD_VTA : VT00012255
Registro : VTGN_RV07-00017 CD_VTA : VT00012255
Registro : VTGN_RV07-00017 CD_VTA : VT00012255
Registro : VTGN_RV07-00017 CD_VTA : VT00012255
Registro : VTGN_RV07-00018 CD_VTA : VT00012256
Registro : VTGN_RV07-00018 CD_VTA : VT00012256
Registro : VTGN_RV07-00019 CD_VTA : VT00012257
Registro : VTGN_RV07-00019 CD_VTA : VT00012257
Registro : VTGN_RV07-00019 CD_VTA : VT00012257
Registro : VTGN_RV07-00020 CD_VTA : VT00012258
Registro : VTGN_RV07-00020 CD_VTA : VT00012258
Registro : VTGN_RV07-00020 CD_VTA : VT00012258 
```

# file-io - 使用 Arduino 写入文本文件并处理 IDE

> ID：15789360
> 
> 赞同：0
> 
> 时间：2013-04-03T13:55:35.003
> 
> 标签：file-io, arduino, processing, processing-ide

我的工作是编写一个值，该值将由 arduino 发送到处理 IDE，处理 IDE 必须将其写入指定的文本文件。我[将此](https://stackoverflow.com/questions/15181839/arduino-how-to-get-serial-data-without-ide)用作参考并尝试了代码。但是，没有任何内容写入指定的文件。谁能建议我一些解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:23:17.580

首先：不，你没有。Processing IDE 不做任何事情，您编写的处理程序会听和写。PDE 只是一个美化的文本编辑器 =)

也就是说，如果您可以将信号输入普通处理应用程序，那么您可以使用标准文件写入函数将该数据写入文件，请参阅[http://processing.org/reference/createWriter_.html](http://processing.org/reference/createWriter_.html)了解这些。

如果您无法将数据放入处理应用程序，那将是一个非常不同的问题，并且有许多 SO 问题已经涵盖了该主题（您可以通过正常搜索找到它们）。

# java - 错误：找不到符号 ArrayList

> ID：15789361
> 
> 赞同：14
> 
> 时间：2013-04-03T13:55:38.550
> 
> 标签：java, arraylist

我正在尝试创建某种列表来存储数组“表”中的值。（我在这里使用了一个数组列表，但我应该使用一个列表来代替吗？）但是，每次我尝试编译时，它都会抛出以下错误：

找不到符号符号：类 ArrayList 位置：类 player.TablePlayer

代码如下。

```
public class TablePlayer extends Player {

    int[][] table;
    ArrayList goodMoves;

    public TablePlayer(String name) {
        super(name);
    }

    @Override
    public int move() {
        int oppLast = opponentLastMove();
        int myLast = myLastMove();
        if (!isLegalMove(oppLast)) {
            return 0; // temporary
        }
        if (wonLast()) {
            table[oppLast][myLast] = 1;
            table[myLast][oppLast] = -1;
        }
        if ((wonLast() == false) && (oppLast != myLast)) {
            table[oppLast][myLast] = -1;
            table[myLast][oppLast] = 1;
        }
        for (int i = 0; i < table.length; i++) {
            for (int j = 0; j < table.length; j++) {
                if (table[i][j] == 1) {
                    goodMoves.add(table[i][j]);
                }
            }
        }

        return oppLast; // temporary
    }

    @Override
    public void start() {
        int[][] table = new int[7][7];
        ArrayList<int> goodMoves = new ArrayList<int>();
    }
} 
```

任何帮助都会很棒，谢谢！

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-04-03T13:56:37.137

文件顶部有导入语句吗？

```
import java.util.ArrayList; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-09-17T05:43:28.160

在做任何java程序时

`import java.util.*;`

因为 * 会从 util 中导入所有的包。

并且所有基本包都存在于该 java.util 中，如 Scanner、ArrayList 等......

因此，为避免错误首先检查您是否已导入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:59:57.473

在使用一个类之前，您需要将它导入到您的类文件定义中。

将其添加到文件顶部：

```
import java.util.ArrayList; 
```

有关导入的更多信息，请在[此处查找](http://docs.oracle.com/javase/tutorial/java/package/usepkgs.html)

建议学习如何使用 IDE，如[Eclipse](http://www.eclipse.org)、Netbeans。当我们在集成环境之外使用 Java（在这种情况下）编程时，它将帮助您解决这些常见错误。

# windows - 使用 Windows 子类回调后的僵尸进程

> ID：15789371
> 
> 赞同：1
> 
> 时间：2013-04-03T13:55:58.130
> 
> 标签：windows, api, process, quit, zombie-process

我正在使用 Windows API 的 SetWindowSubclass(...) 方法来对传输到超出我的应用程序范围的 WinProc 的“挂钩”消息。

我的应用程序由 DLL 中的核心和插件组成。

我已经在我的一个插件 DLL 中实现了这样的子类。

我这样设置子类：

```
class MyPlugin 
{
    private:
        static HWND s_OgrehWnd;
        UINT_PTR m_uIdSubclass; //The ID of the Subclass WinProc
        DWORD_PTR m_pdwRefData; 
        //....

    public:
        void MyPlugin::init();
        LRESULT CALLBACK MyPlugin::windowProcSubclass(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam,    UINT_PTR uIdSubclass, DWORD_PTR dwRefData);
        void MyPlugin::shutdown();
        //....
};

//Set the subclass
void MyPlugin::init()
{
//...
bool resultsc = SetWindowSubclass(
    s_hWnd,
    MultitouchPlugin::windowProcSubclass,
    m_uIdSubclass,
    m_pdwRefData
    );        
//...
}

//The subclass
LRESULT CALLBACK MyPlugin::windowProcSubclass(HWND hWnd, UINT message, WPARAM wParam, LPARAM lParam,    UINT_PTR uIdSubclass, DWORD_PTR dwRefData)
{ 
    switch(message)
    {
    case WM_GESTURE:
        return MultitouchPlugin::g_cGestureEngine.WndProc(hWnd,wParam,lParam);
        break;
    }
    return DefWindowProc(hWnd, message, wParam, lParam);
}

//Remove the subclass
void MyPlugin::shutdown()
{
    //shutdown called - unregister stuff here
    bool isSublcassed = GetWindowSubclass(s_hWnd, MultitouchPlugin::windowProcSubclass, m_uIdSubclass, &m_pdwRefData);

    if(isSublcassed)
    {
        RemoveWindowSubclass(s_OgrehWnd, MultitouchPlugin::windowProcSubclass, m_uIdSubclass);
    }
} 
```

我的问题是，当我退出应用程序时，我可以在“Windows 任务管理器”工具中看到继续运行的进程。在调试模式下，我检查了它是否调用了 RemoveWindowSubclass()，它确实做到了。如果我用这段代码删除我的插件，就没有僵尸进程......

有人对这个问题的解决方案有想法吗？

提前感谢您的帮助

# html - Marquee 在 Google Chrome 中不起作用？

> ID：15789373
> 
> 赞同：2
> 
> 时间：2013-04-03T13:56:06.177
> 
> 标签：html, google-chrome, marquee

在选框中弹跳的代码在 Google Chrome 浏览器中不起作用...为什么会这样？
代码是：

```
 <marquee height=200 width=1200 behavior=alternate>...</marquee> 
```

什么行为将在 Google Chrome 中起作用？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T13:58:38.167

来自[w3.org](http://www.w3.org/wiki/HTML/Elements/marquee)：

> 不完全是。不要使用它。

另请注意，大多数用户总是发现选取框令人反感。这就是为什么您可能不应该尝试使用 JavaScript 或其他方式来模拟这种行为。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:03:27.110

在这里，您想使用 JavaScript 来实现：

[http://jscroller2.markusbordihn.de/example/alternate/](http://jscroller2.markusbordihn.de/example/alternate/)

最好的方法是使用上面的库。该站点提供了有关如何从头开始实现它的示例和文档。链接的示例实现类似于您想要的`<marquee>`标签 with 现在已弃用。

祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T14:15:28.857

代码当然是正确的。问题可能是宽度太大了。如果文本不比宽度宽，为什么要移动文本？

[在jsfiddle](http://jsfiddle.net/XMAaP/)上查看这个最小的工作示例。

出于演示目的，我添加了一个绿色边框以查看其`marquee`工作原理。更改高度时，您可以看到空白增加，但文本仅保留在**一行**中。

只是玩弄`width`and `height`。

```
<marquee style="border: 1px solid green; width: 200px; height: 50px;">
    Lorem ipsum dolor sit amet, consectetur adipiscing elit. Praesent
    pellentesque malesuada nunc a placerat. Nulla facilisi. Maecenas facilisis
    consequat semper. Nullam eget dui libero. Maecenas eget est pretium arcu
    malesuada elementum. Proin quis quam auctor dolor pharetra blandit eget id
    tellus. Nunc at mattis nunc. In hac habitasse platea dictumst. Phasellus eu
    quam ac tellus tempor ornare id id nisi. Suspendisse vitae est elit, eu
    placerat risus. Nulla fringilla cursus libero sed imperdiet. Morbi et turpis
    diam, in commodo diam. Vivamus volutpat laoreet nibh, a facilisis augue
    tincidunt ac. Nulla at mi tortor.
</marquee> 
```

* * *

请记住`marquee`，正如其他人所述，该标签不再是标准的一部分。也许您可以查看一些 JavaScript，其功能比这个过时的标签还要多。

# php - PHP QR 生成器在网络服务器上不起作用

> ID：15789375
> 
> 赞同：0
> 
> 时间：2013-04-03T13:56:10.970
> 
> 标签：php, qr-code

我在 PHP 中有一个小代码，可以从 url 创建一个 QR 码并将其存储在网络服务器上以供以后使用：

```
function generate($content, $format = "png")

   {    
   $encoded = urlencode($content);
   $url = "http://www.esponce.com/api/v3/generate?content=$encoded&#038;format=$format";
   return $url;
   }

$qr = generate("http://www.mywebsite.com");
$data = file_get_contents($qr);
$saved = file_put_contents('qr/my_qr.png', $data); 
```

当我在本地计算机上执行脚本时，二维码正确存储在 /qr 文件夹中。当我将脚本上传到网络服务器并执行它时，会创建文件 my_qr.png 并将其存储在 /qr 文件夹中，但该文件为空（0kb）。

我认为这是由 /qr 文件夹的权限引起的，但是将权限设置为 777 并没有什么区别。有谁可以向我解释我该如何解决这个问题？

欢迎使用其他创建和存储二维码的解决方案。

非常感谢。史蒂文

# c# - 在“使用”语句中选择@@Identity

> ID：15789377
> 
> 赞同：0
> 
> 时间：2013-04-03T13:56:11.800
> 
> 标签：c#, sql-server-ce, using

我正在编写一个`Sql-Server-ce`应用程序`C#`。

最近我一直在将我的代码转换为使用`using`语句，因为它们更干净。在我的代码中，我有一个`GetLastInsertedID`非常简单的函数——它返回最后插入的 ID。工作版本如下：

```
 public static int GetLastInsertedID()
    {
        int key = 0;
        try
        {
            SqlCeCommand cmd = new SqlCeCommand("SELECT CONVERT(int, @@IDENTITY)", DbConnection.ceConnection);
            key = (int)cmd.ExecuteScalar();
        }
        catch (Exception ex)
        {
            MessageBox.Show("Could not get last inserted ID. " + ex.Message);
            key = 0;
        }
        return key;
    } 
```

`using`以下是我将其包装在语句中后不起作用的代码：

```
 public static int GetLastInsertedID()
    {
        int key = 0;
        try
        {
            using (SqlCeConnection conn = new SqlCeConnection(DbConnection.compact))
            {
                conn.Open();
                using (SqlCeCommand cmd = new SqlCeCommand("SELECT CONVERT(int, @@IDENTITY)", conn))
                    key = (int)cmd.ExecuteScalar();
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show("Could not get last inserted ID. " + ex.Message);
            key = 0;
        }
        return key;
    } 
```

我得到的错误是`specified cast is not valid`. 虽然这个错误通常是不言自明的，但我不明白为什么我会在第二个代码块中得到它，而不是第一个。出现这个错误就行了`key = (int)cmd.ExecuteScalar();`。

我对第二个代码块做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T14:04:09.667

来自[@@IDENTITY 文档](http://msdn.microsoft.com/en-us/library/aa933167%28v=sql.80%29.aspx)：

> @@IDENTITY 和 SCOPE_IDENTITY 将返回当前会话中任何表中生成的最后一个标识值。

我认为您的更改现在为每个 using 语句启动一个新会话。因此@@IDENTITY 为空。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:37:04.957

首先，`@@Identity`将从 SQL Server 中的任何位置返回**任何最后生成的 ID**。很可能您需要使用它`SCOPE_IDENTITY()`。

这显示了您的实际问题和设计问题 - 您需要将**Connection**和**Command**分开。**连接**嵌入事务并且`SCOPE_IDENTITY()`在连接关闭之前将一直工作；可以创建、使用和处置**命令。**

所以你需要接受`connection`并使用它来获得身份的方法 - 像这样（没有检查它但认为想法应该很清楚）：

```
public static int GetLastInsertedID(DbConnection connection)
{
    try
    {
        string query = "SELECT CONVERT(int, SCOPE_IDENTITY())";
        using (SqlCeCommand cmd = new SqlCeCommand(query, conn)) {
            return (int)cmd.ExecuteScalar();
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show("Could not get last inserted ID. " + ex.Message);
        return 0;
    }
} 
```

为了使用连接，您可以创建这样的辅助方法：

```
public static SqlCeConnection OpenDefaultConnection()
{
    SqlCeConnection conn = new SqlCeConnection(DbConnection.compact);
    conn.Open();
    return conn;
} 
```

并像这样使用它：

```
...
using (SqlCeConnection conn = OpenDefaultConnection()) {
    //... do smth
    int id = GetLastInsertedID(conn);
    //... do smth
}
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-20T00:52:22.843

在我看来，它不起作用的原因与`using statement`.

如果使用静态类来做连接数据库的操作，比如DBHelper。问题是你在执行之前关闭了数据库的连接，`select @@identity`当你执行时`select @@identity`，你再次打开它。这个执行顺序会导致返回结果`select @@identity`为NULL。也就是说，你不能使用`DBHelper.xxx()`两次来获取自动ID，因为每次调用`DBHelper.xxx()`都会完成打开数据库和关闭数据库的过程。

我有一个解决方案，但它可能不是最好的。代替 using `select @@identity`，您可以使用`select count(*) from xxx`来获得相同的结果。

希望它可以帮助你

# python - Python 使用来自用户输入的字符串调用函数

> ID：15789383
> 
> 赞同：0
> 
> 时间：2013-04-03T13:56:16.610
> 
> 标签：python, string, function

在这个程序中，我使用用户输入来选择用户想要对齐某些文本的对齐方式，目前我正在使用这样的 if 语句......

```
if alignment == "Left":
    line = left(new_string)
elif alignment == "Right":
     line = right(new_string)
elif alignment == "Centre":
    line = centre(new_string)
elif alignment == "Fully":
    line = fully(new_string)
else:
    print "Error." 
```

但是，有没有一种方法可以让我摆脱这些语句，只使用用户输入来调用左、右、中心、完全功能。

谢谢 JT

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T13:57:59.580

将字符串映射`alignment`到带有字典的函数：

```
alignments = {'Left': left, 'Right': right, 'Centre', centre, 'Fully': fully}

try:
    line = alignments[alignment](new_string)
except KeyError:
    print "Error." 
```

Python 函数是一流的对象，因此您可以将它们作为值存储在字典中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T13:57:56.513

```
func = globals().get(alignment.lower())
if not func:
    func = locals().get(alignment.lower())
func(new_string) 
```

您应该确保*func*在调用时不是*None*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:00:38.837

评估它

```
try:
    eval(alignment.lower())(new_string)
except NameError:
    print 'Error' 
```

# android - Android - 从外部获取 onActivityResult

> ID：15789384
> 
> 赞同：2
> 
> 时间：2013-04-03T13:56:18.410
> 
> 标签：android, android-activity, in-app-billing

我正在尝试实现 Android 的 IAB V3，它要求我在我的 Activity 中覆盖“onActivityResult”并使用它来处理 IAB 响应。

我的问题是在某些情况下我无权访问 Activity，我需要拦截“onActivityResult”以满足我的需要。是否可以在 Intent 完成并从中获取所有结果数据时获得回调？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-08T07:46:40.897

目前，这是通过透明的 Activity 进行计费来解决的。此 Activity 实现了“onActivityResult”以使 IAB v3 正常工作。

希望这对任何人都有帮助。如果您有更好的答案，请分享...

# javascript - javascript: durandaljs，viewmodel 中的 applyBindings

> ID：15789386
> 
> 赞同：2
> 
> 时间：2013-04-03T13:56:21.267
> 
> 标签：javascript, knockout.js, durandal

我正在尝试使用 durandaljs 制作具有动态内容的单页应用程序。例如，如果您更改设置中的语言，则 UI 会更新。我正在使用 SignalR 从服务器加载对象，除了导航时一切正常。第一次加载视图时，出现以下错误：

```
Uncaught Error: Unable to parse bindings.
Message: ReferenceError: router is not defined;
Bindings value: compose: { 
        model: router.activeItem, //wiring the router
        afterCompose: router.afterCompose, //wiring the router
        transition:'entrance', //use the 'entrance' transition when switching views
        cacheViews:true //telling composition to keep views in the dom, and reuse them (only a good idea with singleton view models)
        } 
```

但是如果我重新加载页面，则视图会正确显示。这是视图模型的示例：

```
define(function (require) {
    var p = require('hubs/myhub'),
        rep = require('repositories/myrepository');
    var myViewModel = function(data, proxy, cookie) {
        var self = this;
        self.proxy = proxy;
        self.cookie = cookie;
        self.Labels = ko.observableArray([]);
        try {
            self.proxy
                .invoke('Setup', self.cookie.Username, self.cookie.Language)
                .done(function (res) {
                    if (res.Result) {
                        console.log(JSON.stringify(res.Object, null, 4));
                        self.Labels(res.Object.Labels);
                    } else {
                        console.log(res.Error);
                    }
                });
        } catch (e) {
            console.log(e.message);
        }
    };
    return {
        activate: function () {
            var cookie = JSON.parse($.cookie(rep.cookieName));
            ko.applyBindings(myViewModel({}, p.proxy, cookie), document.getElementById('my_container'));
        }
    };
}); 
```

如果我取消激活函数的 applyBinding，那么导航中就没有更多问题了。会有适当的方法来做到这一点吗？

我已将 return 语句修改为：

```
return {
        myModel: new myViewModel ({ }, p.proxy, JSON.parse($.cookie(rep.cookieName))),
        activate: function () {
            this.myModel.init();
        }
    }; 
```

并将信号器调用包装在 init() 函数中。现在一切都很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:03:55.680

这正是正确的方法！DUrandal 为您调用 Ko.applybindings ;) 意思是 Durandal 进行绑定！

[热毛巾 SPA Durandal Knockout 和 Dynatree](https://stackoverflow.com/questions/15412386/hot-towel-spa-durandal-knockout-and-dynatree)

# ruby-on-rails - 使用 rspec 对登录用户 (current_user) 进行存根 - 如何使其工作？

> ID：15789390
> 
> 赞同：0
> 
> 时间：2013-04-03T13:56:27.333
> 
> 标签：ruby-on-rails, rspec

在我的 users_controller_spec.rb 我把

```
@u = FactoryGirl.create(:user)
ApplicationController.should_receive(:current_user).at_least(:once).and_return(@u)
controller.stub :current_user => @u 
```

然后我想编写控制器规范，告诉我一个对象是否确实对于不应该看到它的用户无法访问 - `require_ownership`application_controller.rb 中有一个函数，它使用 var`@current_user`来查看谁登录了，但是使用上面的方法我找不到让用户“登录”的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T13:56:16.037

如果我执行 UserSession.create(@u) 就可以了——这对我来说很好。

# spring-mvc - spring-mvc 应用的根从哪里来？

> ID：15789394
> 
> 赞同：0
> 
> 时间：2013-04-03T13:56:36.367
> 
> 标签：spring-mvc

我根据[本教程](http://duckranger.com/2011/07/spring-mvc-3-0-with-sts-tutorial-part-i/)在 STS 中创建了一个简单的 Spring MVC 项目。在服务器上运行它时，“Hello World”页面显示在此 url 下：

```
http://localhost:8080/goodproject/ 
```

我的问题是，根网址“ `/goodproject/`”来自哪里？顶层包是`com.duckranger.goodproject`，是这个原因吗？我可以使用不同的名称作为 url 根吗？

在duckrabger 的教程中，项目名称被用作url 根（来自屏幕截图）。但就我而言，使用项目名称会导致 404 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T17:13:15.940

如果您将应用程序打包在 EAR 中，您将拥有一个定义任何 Web 应用程序的上下文根的 application.xml。（如果您使用 Maven，则从 EAR 项目 POM 生成）

如果您直接部署 WAR，则取决于应用程序服务器：您可能有特定的 xml 配置来定义每个应用程序的上下文路径。例如，Jetty 使用 context.xml 文件。

# content-management-system - TYPO3 如何在多个页面中重复内容

> ID：15789399
> 
> 赞同：0
> 
> 时间：2013-04-03T13:56:47.377
> 
> 标签：content-management-system, admin, typo3

*   我有一个 TYPO3 网站。
*   我的主页中有 4 个使用 TemplaVoila（灵活内容）创建的内容。

我想知道是否有一种简单的方法可以在所有其他页面中复制这些内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T17:18:25.637

是的，TemplaVoila 允许您使用特殊图标引用 ContentElements，这意味着您将其插入某个页面，然后创建引用。如果“第一个”CE 发生变化，所有参考文献都会自动反映它。

或者，如果所有 CE 都放在一个电视的列中，您可以使用Bernhard Kraft 的[电视内容幻灯片](http://typo3.org/extensions/repository/view/kb_tv_cont_slide)扩展。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T17:38:17.887

只需使用以下代码使用打字稿映射该内容并使用它：

```
lib.leftcolumncontents = COA
lib.leftcolumncontents{
    5 = RECORDS
    5 {
        tables = tt_content
        source = 26  # content element id
    }
    15 = RECORDS
    15 {
        tables = tt_content
        source = 36  # content element id
    }
} 
```

# mysql - SSIS 相等运算符未按预期工作

> ID：15789400
> 
> 赞同：0
> 
> 时间：2013-04-03T13:56:48.090
> 
> 标签：mysql, ssis

我有一个连接到 MySQL 数据库的 SSIS 包，该数据库有一个`tinyint(1)`设置为该值的字段，`4`我正在检查该值是否`4`在数据库中，因为它不应该根据传入的平面文件而更改，如果它是已经设置为`4`，但它似乎没有工作。

它不应该更新状态，因为该字段设置为`4`但我想我只是不明白为什么表达式不起作用。我已经`int`为 SSIS 尝试了所有不同的类型，但这并不重要，因为它总是将状态设置为`1`. 基于快速的谷歌搜索，`tinyint`应该是一个`unsigned 1 byte int`，这就是我将它投射到的原因`DT_UI1`

来自平面文件的传入值第一个是产品，最后一个是状态

```
"039414","*****","*****","*****","*****","*****","*****","*****"," " 
```

数据库中的现有值第一个是产品，第二个是状态

```
039414  4 
```

我通过以下派生列表达式处理状态，基本上如果没有值应该是，`1`否则应该是`4`

```
LEN(TRIM(Status)) > 0 ? (DT_UI1)4 : (DT_UI1)1 
```

这是我用来设置 product_status 的派生列表达式（products_status 是数据库中的实际字段，prod_status 是传入平面文件中的状态）：

```
((DT_UI1)products_status == (DT_UI1)4) || ISNULL(prod_status) ? (DT_UI1)4 : (DT_UI1)prod_status 
```

我期望发生的是一些产品应该保持其状态`4`但正在更新为`1`，有人知道为什么吗？

**编辑：**

我尝试将表达式更改为以下内容，但没有成功。

```
(DT_UI1)products_status == (DT_UI1)4 || ISNULL(prod_status) ? (DT_UI1)4 : (DT_UI1)prod_status 
```

和

```
((DT_UI1)products_status == (DT_UI1)4 || ISNULL(prod_status)) ? (DT_UI1)4 : (DT_UI1)prod_status 
```

只是基础测试

```
(DT_UI1)products_status == (DT_UI1)4 ? (DT_UI1)4 : (DT_UI1)prod_status 
```

**解决方案：**

我最终将查询中的字段转换为整数，因为它被作为 a`boolean`而不是`int`

```
CAST(products_status AS SIGNED) 
```

然后将我的表达式更改为以下内容，它按预期工作

```
(products_status == 4 || ISNULL(prod_status)) ? (DT_I4)4 : prod_status 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:08:07.307

不确定这里的优先级，但你不认为你想要在立即条件周围加上额外的括号，如果：

```
( ((DT_UI1)products_status == (DT_UI1)4) || ISNULL(prod_status) ) ? (DT_UI1)4 : (DT_UI1)prod_status 
```

看起来它可能会返回“true”，有时会呈现为 1。

更新

这是指向[数据查看器](http://msdn.microsoft.com/en-us/library/ms140318.aspx)的链接，可让您查看 SSIS 分配给列的值并帮助您分析此类情况。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:53:46.477

你原来的表情

```
((DT_UI1)products_status == (DT_UI1)4) || ISNULL(prod_status) ? (DT_UI1)4 : (DT_UI1)prod_status 
```

返回一个布尔值。假设 products_status 为 4，prod_status 也设置为 4。

```
((DT_UI1)products_status == (DT_UI1)4) 
```

评估为 TRUE。

```
ISNULL(prod_status) ? (DT_UI1)4 : (DT_UI1)prod_status 
```

评价为 4。

您的原始表达式现在计算为

```
TRUE || 4 
```

评估为

```
TRUE 
```

当您尝试将其粘贴在 products_status 之类的整数列中时，它将变为 1。

您的第一次修订没有对评估链进行实质性更改，并且还返回 TRUE（即 1）。

您的第二次修订是三元运算符的正确表述，最终的基本测试也是如此。但是，在您的情况下，似乎 ISNULL(prod_status) 总是返回 FALSE，因为您在其他派生列中明确将其设置为 4 或 1，所以让我们忽略您的第二个修订版，只进行最终的基本测试。

关于您的最终基础测试，我肯定会：

*   在派生列组件之前附加一个数据查看器，以确保传入的 products_status 列确实设置为 4
*   在派生列组件之后设置数据查看器，以查看 products_status 是否已正确设置（或未设置）；
*   确保将 products_status 字段正确映射到数据库目标，而不是错误地将 prod_status 字段映射。

# c# - 不能隐式转换为 IEnumerable ...但我可以反过来...为什么？

> ID：15789401
> 
> 赞同：0
> 
> 时间：2013-04-03T13:56:50.190
> 
> 标签：c#, ienumerable, repository-pattern

我正在学习存储库模式，以便可以将其应用于 WPF MVVM。我从 SO 上的另一篇文章中得到了这段代码......

```
public interface IRepository : IDisposable
{
    IEnumerable<T> GetAll<T>();
} 
```

所以我试图通过以下方式让它为我工作......

```
class CustomersRepository : IRepository
{
    public IEnumerable<Models.Customer> GetAll<T>()
    {
        DataView results;

        // some DAL retrieval code

        foreach (DataRowView row in results)
        {
            yield return new Models.Customer(row["Label"].ToString());
        }
    }
} 
```

通过从我的模型中调用方法...

```
public static IEnumerable<Customer> ReadCustomers()
{
    IRepository repository = new CustomersRepository();
    return repository.GetAll<Models.Customer>();
} 
```

但我收到一个错误，**“CustomersRepository 没有实现接口成员“IRepository.GetAll< T >()”。“CustomersRepository.GetAll< T >()”无法实现“IRepository.GetAll< T >()”，因为它没有具有匹配的返回类型 "System.Collections.Generic.IEnumerable< T >"**。

* * *

但是，如果我在接口的标识符中定义类型参数，然后从方法调用中删除类型参数......

```
public interface IRepository<T> : IDisposable
{
    IEnumerable<T> GetAll();
} 
```

...并且我相应地调整了实现以及来自我的模型的调用...

```
class CustomersRepository : IRepository<Models.Customer>
{
    public IEnumerable<Models.Customer> GetAll()
    {
        // same body content
    }
} 
```

...

```
public static IEnumerable<Customer> ReadCustomers()
{
    IRepository<Models.Customer> repository = new CustomersRepository();
    return repository.GetAll();
} 
```

...然后它完美地工作！

我的问题是：

1.  为什么它不能在我最初的尝试中隐式地转换收益回报？这是设计使然，还是我误解了类型参数的工作原理？
2.  考虑到我想将 CustomersRepository 松散耦合到我的 Customer 模型，并考虑到 Model 表示单个数据实体，有没有比在我的 Customer 模型类中使用静态工厂方法更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:18:38.017

您对 IRepository 的实现并未涵盖接口可能要求的所有可能性。该接口指定您有一个`GetAll`带有泛型类型参数的方法，该方法又返回相同类型的 IEnumerable。

通过使用 实现此接口`public IEnumerable<Models.Customer> GetAll<T>()`，无论类型参数是什么，您都将始终返回一个`IEnumerable<Models.Customer>`，它与接口签名不对应。

我认为你应该继续你的第二个实现，除非 a`CustomersRepository`能够返回除`IEnumerable<Models.Customer>`

如果是这种情况，您可以这样做：

```
public IEnumerable<T> GetAll<T>()
{
    if (typeof(T).Equals(typeof(Models.Customer)))
    {
        DataView results;
        // some DAL retrieval code

        foreach (DataRowView row in results)
        {
            yield return (T) new Models.Customer(row["Label"].ToString());
        }
    }
} 
```

# c# - 在 C# 中查找列表列表的最大第 N 个元素

> ID：15789403
> 
> 赞同：2
> 
> 时间：2013-04-03T13:56:56.587
> 
> 标签：c#, linq, max, nested-lists

我在 C# 中有一个列表列表，其中每个子列表都有三个双精度值，代表一个 3D 点：

```
{{x1, y1, z1},
 {x2, y2, z2},
 {x3, y3, z3}} 
```

我想找到这个数据集的 3D 边界框，这意味着找到最小 X、最大 X、最小 Y、最大 Y 等。

使用 Python/Numpy，我会得到它，比如`zmax = list_of_lists[:,2].max()`，等等。

在 C# 中是否有一种优雅的方法可以做到这一点？我怀疑 Linq 是要走的路，但我还不明白它是如何工作的（如果某些答案包括 Linq，请解释它是如何工作的，请：o）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:04:50.873

像这样创建您的列表，如果您需要更多功能，可能会为 3D 点使用特定类而不是元组。

```
var points = new[] {
    Tuple.Create(x1, y1, z1),
    Tuple.Create(x2, y3, z2),
    Tuple.Create(x3, y3, z3)
}; 
```

然后，就像@dasblinkenlight 所写，您可以使用 linq 来选择`Max()`或`Min()`：

```
var maxX = points.Select(pt => pt.Item1).Max(); 
```

甚至更短：

```
var maxX = points.Max(pt => pt.Item1); 
```

* * *

**编辑**：一个易于使用的简单类：

```
class Point3D {
    public double X { get; set; }
    public double Y { get; set; }
    public double Z { get; set; }

    public Point3D(double x, double y, double z) {
        this.X = x;
        this.Y = y;
        this.Z = z;
    }
}

var points = new[] {
    new Point3D(x1, y1, z1),
    new Point3D(x2, y3, z2),
    new Point3D(x3, y3, z3)
};

var maxX = points.Max(pt => pt.X); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T13:59:35.413

是的，您可以使用 LINQ 在 C# 中执行此操作，如下所示：

```
var orig = new List<List<double>>();
var maxX = orig.Select(pt => pt[0]).Max();
var maxY = orig.Select(pt => pt[1]).Max();
var maxZ = orig.Select(pt => pt[2]).Max(); 
```

这在 LINQ 中的工作方式是遍历点列表，对于每个点，选择请求的坐标，然后`Max`计算 。还有一个`Min`功能可以让您到达边界框的另一个角落。

这有点不太理想，因为列表被遍历了多次。一对嵌套循环可能会更有效地做同样的事情，同时保持可读性：

```
var min = new List<double>{double.MaxValue, double.MaxValue, double.MaxValue};
var max = new List<double>{double.MinValue, double.MinValue, double.MinValue};
foreach (var point in orig) {
    for (var i = 0 ; i != 3 ; i++) {
        min[i] = Math.Min(min[i], point[i]);
        max[i] = Math.Max(max[i], point[i]);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T13:59:47.180

如果所有元素都属于同一类型并且您感兴趣的属性被命名为 ，`Z`那么您可以这样做：

```
var max = list_of_points.Max(p => p.Z); 
```

在您的情况下，由于您似乎正在使用 a `double[][]`，您可以这样做：

```
var max = list_of_lists.Max(p => p[0]); 
```

所以完整的边界框将由两个点定义，如下所示：

```
var topLeft = new double[] 
{
    list_of_lists.Min(p => p[0]),
    list_of_lists.Min(p => p[1]),
    list_of_lists.Min(p => p[2])
};
var bottomRight = new double[] 
{
    list_of_lists.Max(p => p[0]),
    list_of_lists.Max(p => p[1]),
    list_of_lists.Max(p => p[2])
}; 
```

但是，这需要您通过列表进行 6 次传递（每个点的每个坐标一次）。您可以这样做以提高性能：

```
var topLeft = list_of_lists.Aggregate((s, p) => return double[] { Math.Min(s[0], p[0]), Math.Min(s[1], p[1]), Math.Min(s[2], p[2]) });
var bottomRight = list_of_lists.Aggregate((s, p) => return double[] { Math.Max(s[0], p[0]), Math.Max(s[1], p[1]), Math.Max(s[2], p[2]) }); 
```

这将只通过列表 2 次。

*注意：*可以使用相同的代码来完成，`List<List<double>>`而不是在每个数组声明之后`double[][]`简单地添加。`.ToList()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:09:38.487

如果这真的是X、Y、Z 的顺序相同`IEnumerable`的`IEnumerables`双打中的一个，那么你可以这样做：

```
var list = new []
            {
                new [] { 1, 2, 3 },
                new [] { 4, 5, 6 },
                new [] { 7, 8, 9 }
            };
var maxX = list.Select(s => s.Skip(0).Take(1)).Max();
var minY = list.Select(s => s.Skip(1).Take(1)).Min(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-03T13:59:08.250

您看过 SelectMany linq 运算符吗？我认为这可能对您的问题有所帮助。

# jquery - Json 文件未加载或显示警报

> ID：15789410
> 
> 赞同：0
> 
> 时间：2013-04-03T13:57:09.650
> 
> 标签：jquery, html, json

这似乎是一个常见的问题，但我一生都无法找出我到底哪里出错了，我已经验证了我的 json 文件并且没有错误，我也可以发誓一切都在某个时候完美运行。我在一个文件夹中本地加载所有内容以下是我的 jquery 文件来加载我的 json 文件

```
$(document).ready(function() {

    // loading json file
    var catelogue;
    var url = "shoppingItems.json";

    $.getJSON(url, function(json) {
        alert(json.shoppingItem[0].name);
    });
}); 
```

这就是我的 json 文件的样子，是的，我去了[http://jsonlint.com/](http://jsonlint.com/)进行验证

```
{
    "shoppingItem": [
        {
            "name": "LG Tone",
            "model_no": "HBS-730",
            "type": "Bluetooth Stereo",
            "price": "�45.00",
            "stock": 10,
            "images": "images/Headphones/lgtoneshbs.jpg"
        },
        {
            "name": "NoiseHush",
            "model_no": "NX22",
            "type": "Wired Headphones",
            "price": "�69.95",
            "stock": 10,
            "images": "images/Headphones/noisehushhead.jpg"
        },
        {
            "name": "NoiseHush",
            "model_no": "NX80",
            "type": "Earphones",
            "price": "�25.00",
            "stock": 10,
            "images": "images/Headphones/earpnoisehush.jpg"
        },
        {
            "name": "Motorola MOTOROKR",
            "model_no": "S305",
            "type": "Bluetooth Stereo",
            "price": "£35.00",
            "stock": 10,
            "images": "images/Headphones/earpnoisehush.jpg"
        }
    ]
} 
```

即使我尝试提醒 json 文件，也没有任何反应

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:04:17.693

我已经在我的机器上复制了你的解决方案，它工作得很好。您只需通过 http:// 而不是 file:/// 运行脚本。

# javascript - Html5 Canvas 从一种颜色平滑过渡到另一种颜色

> ID：15789413
> 
> 赞同：0
> 
> 时间：2013-04-03T13:57:17.890
> 
> 标签：javascript, html, html5-canvas

有没有办法从一种颜色平滑过渡到另一种颜色？例如蓝色到红色。

我有一个将循环大约 125 次的数组。

在这个数组中，我想将颜色从蓝色转换为红色。

我是否必须在自己的数组中有 125 个不同的颜色值，然后在索引循环时选择每一个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:04:23.917

使用 hsl 而不是 rgb 或十六进制代码。您只需要更改函数的第一个参数，即 Hue 并且具有整数值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-04T22:59:19.147

您还可以使用单独的覆盖画布，一个带有蓝色，另一个带有红色。

然后，您可以在动画函数中随时间更改每个画布的透明度（全局 alpha），以便一个画布变为 0，另一个画布变为 100% 透明度。

这个画布示例随着时间的推移使天空变暗：

[http://marketimpacts.squarespace.com/storage/9781118385357%20ls1201%20Fireworks%20Display.htm](http://marketimpacts.squarespace.com/storage/9781118385357%20ls1201%20Fireworks%20Display.htm)

这是示例中的代码片段：

```
// F1\. SUNSET increment & check for change.
skyInterval = sunset*sunsetFactor;
skyCount    = skyCount + interval;
if(skyCount > skyInterval) 
{
  // F2\. SKY ALPHA increase if reached skyInterval.
  skyAlpha = skyAlpha + .01;
  if(skyAlpha > 1) {skyApha = 1}
  skyCount = 0;

  // F3\. SKY alpha setting.
  contextSK.globalAlpha = skyAlpha;
  if(skyNight == 1) {contextSK.globalAlpha = 1}

  // F4\. SKY gradient.
  var skyGrad = contextSK.createLinearGradient(0, 0, 0, canvasSK.height-sunsetHorizon);
  skyGrad.addColorStop( 0, "black");
  skyGrad.addColorStop(.8, "black");
  skyGrad.addColorStop( 1, "transparent");

  // F5\. SKY fill.
  contextSK.fillStyle = skyGrad;
  contextSK.clearRect(0, 0, canvasSK.width, canvasSK.height);
  contextSK.fillRect( 0, 0, canvasSK.width, canvasSK.height);
} 
```

# gnu - ld：未定义的符号 vs ld：未定义的引用

> ID：15789428
> 
> 赞同：1
> 
> 时间：2013-04-03T13:57:52.320
> 
> 标签：gnu, ld, undefined-reference, binutils, undefined-symbol

GNU Binutils ld 中的这些错误有什么区别？

*   未定义参考
*   未定义的符号

我对未定义的引用有很好的理解：例如，当加载器找不到函数的实现时，就会发生这种情况。我很想知道未定义符号的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-07T08:55:28.123

例如，当您使用尚未定义的符号在链接脚本中进行一些算术运算时。在我的情况下，这主要是由于错字。

```
_syma = 1 ;
_syna += 1 ;
/* error: undefined symbol `_syna' referenced in expression */ 
```

或者

```
_syma = 1 ;
_symb = _syna + 1 ;
/* error: undefined symbol `_syna' referenced in expression */ 
```

当您将输出部分分配给未定义的符号时，您会收到另一个错误：

```
_syma = 1 ;
.text _syna :
/* error: non constant or forward reference address expression for section .text */
{
  *(.text) ;
} 
```

# c# - 如何将 System.Drawing.Color 转换为 Microsoft Interop WdColorIndex

> ID：15789429
> 
> 赞同：2
> 
> 时间：2013-04-03T13:57:54.043
> 
> 标签：c#, colors, ms-word

我怎样才能转换`System.Drawing.Color`为`Microsoft.Office.Interop.Word.WdColorIndex`？

到目前为止我已经完成了代码，但它显示错误“溢出”。

这是我所做的代码

```
Color bgcolor = Color.FromArgb(Convert.ToInt32(innerText));
Microsoft.Office.Interop.Word.WdColorIndex wbgc = (Microsoft.Office.Interop.Word.WdColorIndex)(bgcolor.R + 0x100 * bgcolor.G + 0x10000 * bgcolor.B);
doc.Range(iRangeStart, iRangeEnd).HighlightColorIndex = wbgc; 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:52:07.293

`WdColorIndex`是一个枚举，而不是一个定义颜色系统的对象。这意味着您可以分配的值受枚举元素的限制，例如`wdBlack`or`wdBlue`及其基础整数值。

您正在使用的技术将应用于`WdColor`对象而不是`WdColorIndex`枚举：

```
var wordColor = (Microsoft.Office.Interop.Word.WdColor)(bgcolor.R + 0x100 * bgcolor.G + 0x10000 * bgcolor.B); 
```

Word 文档中的突出显示仅限于`WdColorIndex`枚举中定义的多种颜色。因此，您不能简单地将任何颜色转换为 Word 颜色以进行突出显示。您必须选择可用值之一。有关可能的值，请参阅[MSDN 的 WdColorIndex](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.word.wdcolorindex.aspx)。

# python - 计算四边形的面积

> ID：15789433
> 
> 赞同：9
> 
> 时间：2013-04-03T13:58:04.063
> 
> 标签：python, math, shapes, area

我正在尝试创建一个计算简单四边形面积的计算器。我知道每个四边形都可以分成两个三角形，无论如何我应该能够计算出两部分的面积。我可以在数学上做到这一点，但我不知道如何在 Python 中实现它。

这是我的四边形类：

```
class Quadrilateral(Shape):
   def __init__(self, name):
       # in clockwise order: angles[0], sides[0], angles[1], sides[1], ...
       self.sides = [5] * 4
       self.angles = [90] * 4
       super().__init__(self, name) 
```

现在我需要实现一种`get_area()`计算四边形面积的方法，但我不知道如何。

这是我用纸和笔做的方法：

![四边形的面积](https://i.stack.imgur.com/FPCcB.png)

基本上我只需要知道两个角度和三个边就可以使用这种技术来计算面积，但我们不用担心。现在，我知道所有的角度和所有的边，我如何计算面积？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T14:01:30.030

只需在您拥有的两个列表中直接访问边和角度：

```
import math

area1 = 0.5 * self.sides[0] * self.sides[1] * math.sin(math.radians(self.angles[1]))
area2 = 0.5 * self.sides[2] * self.sides[3] * math.sin(math.radians(self.angles[3]))
area = area1 + area2 
```

给定您的示例`sides = [3, 5, 5, 4]`和`angles = [90, 95, 75, 100]`，则该区域为：

```
>>> import math
>>> sides = [3, 5, 5, 4]
>>> angles = [90, 95, 75, 100]
>>> area1 = 0.5 * sides[0] * sides[1] * math.sin(math.radians(angles[1]))
>>> area2 = 0.5 * sides[2] * sides[3] * math.sin(math.radians(angles[3]))
>>> area1 + area2
17.31953776581017 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-11-15T16:08:41.637

基于[https://en.wikipedia.org/wiki/Brahmagupta%27s_formula](https://en.wikipedia.org/wiki/Brahmagupta%27s_formula)

见[https://www.geeksforgeeks.org/maximum-area-quadrilateral/](https://www.geeksforgeeks.org/maximum-area-quadrilateral/)

```
def maxArea (a , b , c , d ): 

    # Calculating the semi-perimeter 
    # of the given quadilateral 
    semiperimeter = (a + b + c + d) / 2

    # Applying Brahmagupta's formula to 
    # get maximum area of quadrilateral 
    return math.sqrt((semiperimeter - a) *
                    (semiperimeter - b) *
                    (semiperimeter - c) * 
                    (semiperimeter - d)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T22:51:44.347

更好的解决方案是高斯正交。请参见第 17-10 页：

[http://www.colorado.edu/engineering/cas/courses.d/IFEM.d/IFEM.Ch17.d/IFEM.Ch17.pdf](http://www.colorado.edu/engineering/cas/courses.d/IFEM.d/IFEM.Ch17.d/IFEM.Ch17.pdf)

# android - 单击 ImageView 时检测用户选择的键

> ID：15789434
> 
> 赞同：1
> 
> 时间：2013-04-03T13:58:05.220
> 
> 标签：android, keyboard, key

我有一个 ImageView。当用户点击它时，我想要，android 键盘出现，用户选择一个键，我抓住选择的键，键盘消失。我知道如何显示/隐藏键盘，但我想知道如何检测用户选择的键。请不要告诉我创建自己的键盘。提前谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:03:14.583

覆盖 onKeyDown()：

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    super.onKeyDown(keyCode, event);
    //keyCode is the key that was pressed
} 
```

# iphone - 在 monotouch iphone 中添加 monotouch.Dialog 作为 uiviewcontroller 的一部分

> ID：15789439
> 
> 赞同：1
> 
> 时间：2013-04-03T13:58:17.043
> 
> 标签：iphone, uitableview, xamarin.ios, monotouch.dialog

我想创建一个这样的页面：

![在此处输入图像描述](https://i.stack.imgur.com/GgMOl.png)

我对底部的想法是使用 monotouhc.Dialog by `viewElement`。但问题是这样的：

使用单点触控是最好的方法吗？还是使用`tableview`with`datasource`更好？如果我们应该使用`monotouch.dialog`我们如何将其添加为 a 的一部分`viewcontroller`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:21:22.953

无论哪种方式，你都可以做到。

我会亲自创建一组自定义元素：一个用于渲染图像，一个用于渲染第一位信息，一个用于第二位信息。

然后我会像这样创建用户界面：

```
new RootElement ("House"){
    new Section (){
        new HouseImageViewElement (house_id),
    },
    new Section () {
        new OverviewElement (house_id);
    },
    new Section () {
        new DetailedElement (house_id);
    } 
```

反过来，这些元素应该构建在可重用的 UIView 之上（请参阅我关于 UITableViewCells 模式的博客文章：http: [//tirania.org/monomac/archive/2011/Jan-18.html](http://tirania.org/monomac/archive/2011/Jan-18.html)）

这样做的好处是您以后可以在其他地方使用这些元素（例如在列表中显示房屋）。它还允许您将布局管理拆分到代码的不同部分。

但是您也可以创建一个完整的视图来执行此操作，然后在 MonoTouch.Dialog 中使用 UIViewElement 托管该视图，或者在 UITableView 中手动使用它，或者只是手动显示它。

# gnuplot - 在 Gnuplot 中绘制流跟踪

> ID：15789441
> 
> 赞同：1
> 
> 时间：2013-04-03T13:58:18.860
> 
> 标签：gnuplot

使用`with vector`in `gnuplot`，我可以绘制由四列组成的数据集的漂亮矢量场。如果我想绘制流迹线而不是速度矢量场，我有什么选择？是否`gnuplot`有内置功能来完成此操作？

当然我知道我可以在外部计算基于矢量场的流迹，但我希望在 Gnuplot 中让它自动化。如何解决这个问题（如果可能的话）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T17:22:52.853

不，gnuplot 没有这种能力。绘制矢量场和绘制流线之间的处理确实存在巨大差异。矢量场仅取决于局部点，而流线需要从以前的数据中计算出来——这是 gnuplot 不做的。

# ruby-on-rails - rails server -d 没有作为后台进程运行

> ID：15789445
> 
> 赞同：0
> 
> 时间：2013-04-03T13:58:27.297
> 
> 标签：ruby-on-rails, ruby, shell, blocking

我目前将以下命令作为批处理脚本运行

/usr/local/rvm/wrappers/ruby-1.8.7-p358/ruby /var/rails/sandbox/script/server -p 8080 -e sandbox -d 但是，如果我尝试初始化 0.0.0.0 8080，则日志结束删除 -d 所以脚本是 /usr/local/rvm/wrappers/ruby-1.8.7-p358/ruby /var/rails/sandbox/script/server -p 8080 -e sandbox 然后一切运行完美。唯一的问题是我试图分离输出，以便我可以重用终端会话。请让我知道我是否需要运行一些东西？

如果我要单独运行脚本/服务器也只是一个参考，我将不得不使用 rvmsudo script/server -p 8080 -e sandbox -d，我遇到了同样的问题，它试图在 0.0.0.0 8080 结束，但我的网站不会运行，我不会收到消息 WEBrick::HTTPServer#start

# android-webview - Android Webview 中的文件上传 - 未选择文件

> ID：15789446
> 
> 赞同：1
> 
> 时间：2013-04-03T13:58:27.653
> 
> 标签：android-webview

我正在使用[Android WebView File Upload](https://stackoverflow.com/questions/11724129/android-webview-file-upload)的解决方案在 Android Webview 中进行文件上传：

```
private WebView webView;
private ValueCallback<Uri> mUploadMessage;
private final static int FILECHOOSER_RESULTCODE = 1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    webView = (WebView) findViewById(R.id.webView);
    webView.getSettings().setJavaScriptEnabled(true);

    webView.setWebViewClient(new WebViewClient());

    webView.setWebChromeClient(new WebChromeClient(){  

        public void openFileChooser(ValueCallback<Uri> uploadMsg) { 
            mUploadMessage = uploadMsg;  
            Intent i = new Intent(Intent.ACTION_GET_CONTENT);  
            i.addCategory(Intent.CATEGORY_OPENABLE);  
            i.setType("image/*");  
            Main.this.startActivityForResult(Intent.createChooser(i,"File Chooser"), FILECHOOSER_RESULTCODE);  
        }

        public void openFileChooser( ValueCallback uploadMsg, String acceptType ) {
           mUploadMessage = uploadMsg;
           Intent i = new Intent(Intent.ACTION_GET_CONTENT);
           i.addCategory(Intent.CATEGORY_OPENABLE);
           i.setType("*/*");
           Main.this.startActivityForResult(
           Intent.createChooser(i, "File Browser"),
           FILECHOOSER_RESULTCODE);
        }

        public void openFileChooser(ValueCallback<Uri> uploadMsg, String acceptType, String capture){
               mUploadMessage = uploadMsg;  
               Intent i = new Intent(Intent.ACTION_GET_CONTENT);  
               i.addCategory(Intent.CATEGORY_OPENABLE);  
               i.setType("image/*");  
               Main.this.startActivityForResult( Intent.createChooser( i, "File Chooser" ), Main.FILECHOOSER_RESULTCODE );

        }
    });  

    webView.loadUrl( WEBSITE_URL );
}

@Override  
protected void onActivityResult(int requestCode, int resultCode,  
        Intent intent) {
    if(requestCode==FILECHOOSER_RESULTCODE){  
        if (null == mUploadMessage) return;  
        Uri result = intent == null || resultCode != RESULT_OK ? null  
                : intent.getData();  
        mUploadMessage.onReceiveValue(result);  
        mUploadMessage = null;  
    }
} 
```

文件选择器显示，但选择照片后，输入文件仍显示未选择文件。我的代码缺少什么？

谢谢。

# c# - C# 多线程 ASP .NET MVC 4 - System.Windows.Threading.Dispatcher 的等价物？

> ID：15789448
> 
> 赞同：0
> 
> 时间：2013-04-03T13:58:33.863
> 
> 标签：c#, asp.net, asp.net-mvc, multithreading, asp.net-mvc-4

我学习 .NET，现在我正在学习使用 ASP .NET MVC 4 进行 Web 开发。

我做了一个任务：

```
Task t = new Task(new Action(() =>
        {
            while (convert("suitandtie.mp4") != 1)
            {
                if (i == 4)
                {
                     // Here I want to access in mainthread property
                     // I need to change text for viewBag like :
                     // ViewBag.Message = "Convert failed";
                     // But I need a Dispatcher and invoke for accessing 
                     // the ViewBag of the mainthread

                    break;
                }
                i++;
            }
        }));
        t.Start(); 
```

在 .Net 应用程序中，使用 System.Windows.Threading.Dispatcher，可以将其用于调用调用。我在我的应用程序中这样做了：

```
 this.Dispatcher.Invoke(new Action(() =>
  {
      ContactBook.Add(Person("Mark", "232 521 424"));
  })); 
```

当我在通讯录中添加 Mark 时，它添加在主线程的 ContactBook 中，而不是 Task 创建的线程中。

请帮助访问主线程的 ViewBag.Message ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:03:36.893

为什么需要将其创建为单独的线程？

我之所以问是因为除非客户端正在进行aysn调用，否则这样做没有任何好处，因为您不会同时做很多事情并将控制器的执行推迟到其他一些服务。

如果您想将当前线程传递给 ViewBag，那么最简单的方法是。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:40:42.413

Viewbag（和任何页面状态）仅在响应发送到客户端之前可用。这是经典网络服务器模型的工作方式：客户端请求 URL，服务器响应某些内容（HTML、javascript、八位字节流...） 如果您的操作长达几分钟，您应该考虑使用稍微不同的东西。

个人而言，我会使用经典的 ASP.NET MVC 操作加载初始页面，然后通过后续的 javascript 请求启动长时间任务。

要运行该任务，请使用[SignalR](http://www.signalR.net)之类的东西，这将使您能够在客户端和服务器之间执行双工通信。使用 SignalR，服务器将能够在任务结束时相当轻松地通知客户端。它在 ASP.NET MVC 应用程序中非常容易使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:33:12.813

没有映射。无法与响应交互，因为响应已经 [可能] 已经发送并且连接在那个时间点关闭。

如果您启动一个异步操作并且在请求的上下文中没有阻止该操作的内容，那么该异步操作根本无法与响应交互。

您能做的最好的事情是将您生成的任何结果存储在某个外部存储机制（例如数据库）中，以便将来来自服务器的请求可以获取信息并将其发送到客户端。

# c++ - C++/Boost 在多个字符上拆分字符串

> ID：15789449
> 
> 赞同：6
> 
> 时间：2013-04-03T13:58:35.233
> 
> 标签：c++, string, parsing, boost, tokenize

一旦我看到一个例子，这可能真的很简单，但是我如何概括 boost::tokenizer 或 boost::split 来处理由多个字符组成的分隔符？

例如，对于“ *_* _”，这些标准拆分解决方案似乎都不起作用：

```
boost::tokenizer<boost::escaped_list_separator<string> > 
        tk(myString, boost::escaped_list_separator<string>("", "____", "\""));
std::vector<string> result;
for (string tmpString : tk) {
    result.push_back(tmpString);
} 
```

或者

```
boost::split(result, myString, "___"); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T14:02:52.787

```
boost::algorithm::split_regex( result, myString, regex( "___" ) ) ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:03:08.910

您必须改用 splitregex：[http ://www.daniweb.com/software-development/cpp/threads/118708/boostalgorithmsplit-with-string-delimeters](http://www.daniweb.com/software-development/cpp/threads/118708/boostalgorithmsplit-with-string-delimeters)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-17T23:12:00.383

非升压解决方案

```
vector<string> split(const string &s, const string &delim){
    vector<string> result;
    int start = 0;
    int end = 0;
    while(end!=string::npos){
        end = s.find(delim, start);
        result.push_back(s.substr(start, end-start));
        start = end + delim.length();
    }
    return result;
} 
```

# gdb - 使用 gdb 的定义来调度类型

> ID：15789455
> 
> 赞同：0
> 
> 时间：2013-04-03T13:58:47.530
> 
> 标签：gdb

在 GDB 中，我想定义一个按类型分派的函数。这是我想到的一个简单示例：

```
define test
   if (ptype(1) == int)
     p 2
   end
end 
```

上面给了我一条消息说：在当前上下文中没有符号“ptype”。可以在不使用 python 的情况下完成这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:55:12.760

> 可以在不使用 python 的情况下完成这样的事情吗？

不。

Python 脚本*正是*您所需要的。

# javascript - 为 SEO 目的使用 AngularJS 渲染静态可索引页面？

> ID：15789457
> 
> 赞同：5
> 
> 时间：2013-04-03T13:58:51.097
> 
> 标签：javascript, node.js, angularjs

我目前正在使用 Angular 开发一个社交应用程序。我希望有公共的、搜索引擎可索引的页面来伴随应用程序，例如可索引的主页、关于页面和联系页面。

解决此问题的最佳方法是什么？我不确定我的后端基础架构将是什么，但它要么是以下之一：

1.  nginx/apache 服务器通过外部 pub/sub 服务实时出售所有内容。
2.  前端和后端的单独服务 - nginx 服务器出售前端内容。用于后端套接字内容的单独节点服务器。

对此的任何建议都会很棒。我很想知道角度是否处理所有路由，或者我是否单独处理静态路由。这是我第一次玩 Angular。

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T13:50:13.733

I might be wrong but I think your problem is not an AngularJS one, it's more fundamental than that.

Your issue is one where you are loading HTML content via AJAX. And how does Google etc. crawl AJAX loaded content if it can't execute JavaScript?

This might help: [https://developers.google.com/webmasters/ajax-crawling/](https://developers.google.com/webmasters/ajax-crawling/)

This might help too but its geared towards .NET: [http://gregorypratt.github.com/Ajax-Crawling/](http://gregorypratt.github.com/Ajax-Crawling/)

If you provide a solution where you let AngularJS do the routing but you still are able to serve static content from the server when `?_escaped_fragment_=` is present in the URL then you're good to go. You get single page app benefits whilst still being crawlable.

The following is an **example site** using AngularJS routing *and* static content being served for Google et al.

[http://artelier.co.uk/#!/about](http://artelier.co.uk/#!/about)

[http://artelier.co.uk/?_escaped_fragment_=/about](http://artelier.co.uk/?_escaped_fragment_=/about) *(turn off JS to see it work)*

# ruby-on-rails - 具有六边形架构和 DCI 模式的框架和数据库适配器

> ID：15789460
> 
> 赞同：7
> 
> 时间：2013-04-03T13:58:54.453
> 
> 标签：ruby-on-rails, ruby, adapter, hexagonal-architecture

我尝试在 Ruby 中设计一个基于 Web 的应用程序。我已经开发了一个简单的核心应用程序，在没有框架和数据库的情况下在六边形架构中实现 DCI 范例。核心六边形中有小六边形和网络、数据库、日志等适配器。每个六边形在没有数据库和框架的情况下自行运行。在这种方法中，如何提供与数据库模型和实体类的关系与数据库无关。我想将来将框架从 Rails 更改为 Sinatra 或数据库。实际上，如何在这个核心的Hexagon中实现完全隔离rails和mongodb的数据库适配器或框架适配器。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-09-06T15:11:13.743

What about [ROM](http://rom-rb.org/) (Ruby Object Mapper).

There is also [MiniMapper](https://github.com/joakimk/minimapper) and [DataMappify](https://github.com/fredwu/datamappify).

# android - 带有滑动抽屉的覆盖 ActionBar

> ID：15789461
> 
> 赞同：3
> 
> 时间：2013-04-03T13:58:56.467
> 
> 标签：android, android-actionbar, actionbarsherlock, slidingdrawer

是否可以用一个特定的视图（即滑动抽屉）覆盖操作栏？我知道我可以将整个活动全屏显示并将操作栏放在其顶部，但我需要在操作栏顶部滑动一个滑动抽屉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-01T21:26:19.400

您现在可以将操作栏布局为“工具栏”，它在布局中的行为与任何其他视图一样，然后您可以覆盖其他视图（使用框架布局、抽屉布局等）。

请参阅此处有关工具栏的部分：
[http ://android-developers.blogspot.com/2014/10/appcompat-v21-material-design-for-pre.html](http://android-developers.blogspot.com/2014/10/appcompat-v21-material-design-for-pre.html)

> 由于 Toolbar 只是一个 ViewGroup，您可以根据需要设置样式和位置。
> 然后在您的 Activity 或 Fragment 中，将 Toolbar 设置为您的 Action Bar：

# ruby - Sinatra cookie：如何设置有效期？

> ID：15789463
> 
> 赞同：0
> 
> 时间：2013-04-03T13:59:06.653
> 
> 标签：ruby, web-applications, cookies, sinatra

我使用[Sinatra:Contrib](http://www.sinatrarb.com/contrib/cookies.html) gem 来设置 cookie。

```
cookies[:something] = 'foobar' 
```

但在萤火虫中，我看到它只在会话结束之前有效。

如何手动设置 cookie 的到期日期？

# cassandra - 阿帕奇卡桑德拉。尝试插入记录时出现 UnavailableException

> ID：15789464
> 
> 赞同：2
> 
> 时间：2013-04-03T13:59:06.843
> 
> 标签：cassandra

我对 Cassandra 很陌生，并且有些如何配置它。我在关注[这个链接](http://wiki.apache.org/cassandra/GettingStarted) 。一切都很好。但最后当我尝试插入记录时，它给了我以下异常。今天从下午开始，我正在尝试解决这个问题。谷歌了很多，但无法到达任何地方。

对此的任何帮助将不胜感激。

```
[default@DEMO] set Users[1234][name] = scott;
null
UnavailableException()
        at org.apache.cassandra.thrift.Cassandra$insert_result.read(Cassandra.java:16077)
        at org.apache.thrift.TServiceClient.receiveBase(TServiceClient.java:78)
        at org.apache.cassandra.thrift.Cassandra$Client.recv_insert(Cassandra.java:801)
        at org.apache.cassandra.thrift.Cassandra$Client.insert(Cassandra.java:785)
        at org.apache.cassandra.cli.CliClient.executeSet(CliClient.java:909)
        at org.apache.cassandra.cli.CliClient.executeCLIStatement(CliClient.java:222)
        at org.apache.cassandra.cli.CliMain.processStatementInteractive(CliMain.java:201)
        at org.apache.cassandra.cli.CliMain.main(CliMain.java:328)
[default@DEMO] 
```

谢谢阿秋

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-04-16T21:21:04.243

这是旧的，我想分享我的经验。

我在设置 qa 环境时遇到了同样的问题。每件事都配置得很好：包括：cassandra-topology.properties。但是 nodetool 环显示所有节点的未知 DC 值，因为默认设置为 UNKNOWN。这告诉我 cassandra-topology.properties 在某种程度上是不正确的。在尝试了几件事后仍然没有运气，我决定创建自己的 cassandra-topology.properties 文件并用 vi 重新键入所有内容，然后它开始正常。

因此，如果您有问题，请先运行 nodetool ring 以查看 DC 集是否应该是它应该是的。

# java - 使用 Jackson 与 Java Mongo DBObject 进行高效 POJO 映射

> ID：15789471
> 
> 赞同：20
> 
> 时间：2013-04-03T13:59:28.077
> 
> 标签：java, mongodb, jackson, mongo-jackson-mapper

虽然类似于[Convert DBObject to a POJO using MongoDB Java Driver](https://stackoverflow.com/questions/7684223/convert-dbobject-to-a-pojo-using-mongodb-java-driver)我的问题是不同的，因为我对使用 Jackson 进行映射**特别**感兴趣。

我有一个要转换为 Mongo DBObject 实例的对象。我想使用 Jackson JSON 框架来完成这项工作。

一种方法是：

```
DBObject dbo = (DBObject)JSON.parse(m_objectMapper.writeValueAsString(entity)); 
```

但是，根据[https://github.com/FasterXML/jackson-docs/wiki/Presentation:-Jackson-Performance](https://github.com/FasterXML/jackson-docs/wiki/Presentation:-Jackson-Performance) ，这是最糟糕的方法。所以，我正在寻找替代方案。理想情况下，我希望能够连接到 JSON 生成管道并动态填充`DBObject`实例。这是可能的，因为在我的例子中，目标是一个`BasicDBObject`实例，它实现了 Map 接口。因此，它应该很容易融入管道。

现在，我知道我可以使用该`ObjectMapper.convertValue`函数将对象转换为 Map，然后`BasicDBObject`使用该类型的映射构造函数递归地将映射转换为实例`BasicDBObject`。但是，我想知道是否可以消除中间映射并`BasicDBObject`直接创建。

请注意，因为 a`BasicDBObject`本质上是一个映射，所以相反的转换，即从标量`DBObject`到 POJO 是微不足道的并且应该非常有效：

```
DBObject dbo = getDBO();
Class clazz = getObjectClass();
Object pojo = m_objectMapper.convertValue(dbo, clazz); 
```

最后，我的 POJO 没有任何 JSON 注释，我希望它保持这种方式。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-03T15:45:51.273

您可能可以使用 Mixin 注释来注释您的 POJO 和`BasicDBObject`(or `DBObject`)，因此注释不是问题。既然`BasicDBOject`是地图，就可以使用`@JsonAnySetter`放在put方法上。

```
m_objectMapper.addMixInAnnotations(YourMixIn.class, BasicDBObject.class);

public interface YourMixIn.class {
    @JsonAnySetter
    void put(String key, Object value);
} 
```

这就是我所能想到的，因为我对 MongoDB 对象的经验为零。

**更新：** [MixIn](http://wiki.fasterxml.com/JacksonMixInAnnotations)基本上是一种杰克逊机制，可以在不修改所述类的情况下向类添加注释。当您无法控制要编组的类时（例如当它来自外部 jar 时）或者当您不想用注释使类混乱时，这是一个完美的选择。

在您的情况下，您说`BasicDBObject`实现了`Map`接口，因此该类具有`put`由 map 接口定义的方法。通过将[@JsonAnySetter](http://fasterxml.github.com/jackson-annotations/javadoc/2.1.0/com/fasterxml/jackson/annotation/JsonAnySetter.html)添加到该方法，您可以告诉Jackson，每当他在自省后发现一个他不知道的属性时，就可以使用该方法将该属性插入到对象中。键是属性的名称，值是属性的值。

所有这些结合起来使中间映射消失了，因为 Jackson 将直接转换为，`BasicDBOject`因为它现在知道如何从 Json 反序列化该类。使用该配置，您可以执行以下操作：

```
DBObject dbo = m_objectMapper.convertValue(pojo, BasicDBObject.class); 
```

请注意，我没有对此进行测试，因为我不使用 MongoDB，所以可能会有一些松散的结局。但是，我对类似的用例使用了相同的机制，没有任何问题。YMMV 取决于类。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-10-10T12:47:22.723

这是一个从 POJO 到 BsonDocument 的简单序列化程序（用 Scala 编写）的示例**，可以与 Mongo driver 版本 3 一起使用**。反序列化器会更难编写。

创建一个`BsonObjectGenerator`可以直接对 Mongo Bson 进行流式序列化的对象：

```
val generator = new BsonObjectGenerator
mapper.writeValue(generator, POJO)
generator.result() 
```

这是序列化程序的代码：

```
class BsonObjectGenerator extends JsonGenerator {

  sealed trait MongoJsonStreamContext extends JsonStreamContext

  case class MongoRoot(root: BsonDocument = BsonDocument()) extends MongoJsonStreamContext {
    _type = JsonStreamContext.TYPE_ROOT

    override def getCurrentName: String = null

    override def getParent: MongoJsonStreamContext = null
  }

  case class MongoArray(parent: MongoJsonStreamContext, arr: BsonArray = BsonArray()) extends MongoJsonStreamContext {
    _type = JsonStreamContext.TYPE_ARRAY

    override def getCurrentName: String = null

    override def getParent: MongoJsonStreamContext = parent
  }

  case class MongoObject(name: String, parent: MongoJsonStreamContext, obj: BsonDocument = BsonDocument()) extends MongoJsonStreamContext {
    _type = JsonStreamContext.TYPE_OBJECT

    override def getCurrentName: String = name

    override def getParent: MongoJsonStreamContext = parent
  }

  private val root = MongoRoot()
  private var node: MongoJsonStreamContext = root

  private var fieldName: String = _

  def result(): BsonDocument = root.root

  private def unsupported(): Nothing = throw new UnsupportedOperationException

  override def disable(f: Feature): JsonGenerator = this

  override def writeStartArray(): Unit = {
    val array = new BsonArray
    node match {
      case MongoRoot(o) =>
        o.append(fieldName, array)
        fieldName = null
      case MongoArray(_, a) =>
        a.add(array)
      case MongoObject(_, _, o) =>
        o.append(fieldName, array)
        fieldName = null
    }
    node = MongoArray(node, array)
  }

  private def writeBsonValue(value: BsonValue): Unit = node match {
    case MongoRoot(o) =>
      o.append(fieldName, value)
      fieldName = null
    case MongoArray(_, a) =>
      a.add(value)
    case MongoObject(_, _, o) =>
      o.append(fieldName, value)
      fieldName = null
  }

  private def writeBsonString(text: String): Unit = {
    writeBsonValue(BsonString(text))
  }

  override def writeString(text: String): Unit = writeBsonString(text)

  override def writeString(text: Array[Char], offset: Int, len: Int): Unit = writeBsonString(new String(text, offset, len))

  override def writeString(text: SerializableString): Unit = writeBsonString(text.getValue)

  private def writeBsonFieldName(name: String): Unit = {
    fieldName = name
  }

  override def writeFieldName(name: String): Unit = writeBsonFieldName(name)

  override def writeFieldName(name: SerializableString): Unit = writeBsonFieldName(name.getValue)

  override def setCodec(oc: ObjectCodec): JsonGenerator = this

  override def useDefaultPrettyPrinter(): JsonGenerator = this

  override def getFeatureMask: Int = 0

  private def writeBsonBinary(data: Array[Byte]): Unit = {
    writeBsonValue(BsonBinary(data))
  }

  override def writeBinary(bv: Base64Variant, data: Array[Byte], offset: Int, len: Int): Unit = {
    val res = if (offset != 0 || len != data.length) {
      val subset = new Array[Byte](len)
      System.arraycopy(data, offset, subset, 0, len)
      subset
    } else {
      data
    }
    writeBsonBinary(res)
  }

  override def writeBinary(bv: Base64Variant, data: InputStream, dataLength: Int): Int = unsupported()

  override def isEnabled(f: Feature): Boolean = false

  override def writeRawUTF8String(text: Array[Byte], offset: Int, length: Int): Unit = writeBsonString(new String(text, offset, length, "UTF-8"))

  override def writeRaw(text: String): Unit = unsupported()

  override def writeRaw(text: String, offset: Int, len: Int): Unit = unsupported()

  override def writeRaw(text: Array[Char], offset: Int, len: Int): Unit = unsupported()

  override def writeRaw(c: Char): Unit = unsupported()

  override def flush(): Unit = ()

  override def writeRawValue(text: String): Unit = writeBsonString(text)

  override def writeRawValue(text: String, offset: Int, len: Int): Unit = writeBsonString(text.substring(offset, offset + len))

  override def writeRawValue(text: Array[Char], offset: Int, len: Int): Unit = writeBsonString(new String(text, offset, len))

  override def writeBoolean(state: Boolean): Unit = {
    writeBsonValue(BsonBoolean(state))
  }

  override def writeStartObject(): Unit = {
    node = node match {
      case p@MongoRoot(o) =>
        MongoObject(null, p, o)
      case p@MongoArray(_, a) =>
        val doc = new BsonDocument
        a.add(doc)
        MongoObject(null, p, doc)
      case p@MongoObject(_, _, o) =>
        val doc = new BsonDocument
        val f = fieldName
        o.append(f, doc)
        fieldName = null
        MongoObject(f, p, doc)
    }
  }

  override def writeObject(pojo: scala.Any): Unit = unsupported()

  override def enable(f: Feature): JsonGenerator = this

  override def writeEndArray(): Unit = {
    node = node match {
      case MongoRoot(_) => unsupported()
      case MongoArray(p, a) => p
      case MongoObject(_, _, _) => unsupported()
    }
  }

  override def writeUTF8String(text: Array[Byte], offset: Int, length: Int): Unit = writeBsonString(new String(text, offset, length, "UTF-8"))

  override def close(): Unit = ()

  override def writeTree(rootNode: TreeNode): Unit = unsupported()

  override def setFeatureMask(values: Int): JsonGenerator = this

  override def isClosed: Boolean = unsupported()

  override def writeNull(): Unit = {
    writeBsonValue(BsonNull())
  }

  override def writeNumber(v: Int): Unit = {
    writeBsonValue(BsonInt32(v))
  }

  override def writeNumber(v: Long): Unit = {
    writeBsonValue(BsonInt64(v))
  }

  override def writeNumber(v: BigInteger): Unit = unsupported()

  override def writeNumber(v: Double): Unit = {
    writeBsonValue(BsonDouble(v))
  }

  override def writeNumber(v: Float): Unit = {
    writeBsonValue(BsonDouble(v))
  }

  override def writeNumber(v: BigDecimal): Unit = unsupported()

  override def writeNumber(encodedValue: String): Unit = unsupported()

  override def version(): Version = unsupported()

  override def getCodec: ObjectCodec = unsupported()

  override def getOutputContext: JsonStreamContext = node

  override def writeEndObject(): Unit = {
    node = node match {
      case p@MongoRoot(_) => p
      case MongoArray(p, a) => unsupported()
      case MongoObject(_, p, _) => p
    }
  }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T20:03:00.420

你可能有兴趣检查[jongo](http://jongo.org)是如何做到的。它是开源的，代码可以在[github](https://github.com/bguerout/jongo)上找到。或者您也可以简单地使用他们的库。`DBObject`当我需要更大的灵活性时，我会混合使用 jongo 和 plain 。

他们声称他们（几乎）与直接使用 Java 驱动程序一样快，所以我认为他们的方法是有效的。

我使用下面的小助手实用程序类，它的灵感来自他们的代码库，并混合使用 Jongo (the `MongoBsonFactory`) 和 Jackson 在 DBObjects 和 POJOs 之间进行转换。请注意，该`getDbObject`方法对 DBObject 进行了深层复制以使其可编辑 - 如果您不需要自定义任何内容，则可以删除该部分并提高性能。

```
import com.fasterxml.jackson.annotation.JsonAutoDetect;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.ObjectReader;
import com.fasterxml.jackson.databind.ObjectWriter;
import com.fasterxml.jackson.databind.introspect.VisibilityChecker;
import com.mongodb.BasicDBObject;
import com.mongodb.DBEncoder;
import com.mongodb.DBObject;
import com.mongodb.DefaultDBEncoder;
import com.mongodb.LazyWriteableDBObject;
import java.io.ByteArrayOutputStream;
import java.io.IOException;
import org.bson.LazyBSONCallback;
import org.bson.io.BasicOutputBuffer;
import org.bson.io.OutputBuffer;
import org.jongo.marshall.jackson.bson4jackson.MongoBsonFactory;

public class JongoUtils {

    private final static ObjectMapper mapper = new ObjectMapper(MongoBsonFactory.createFactory());

    static {
        mapper.setVisibilityChecker(VisibilityChecker.Std.defaultInstance().withFieldVisibility(
                JsonAutoDetect.Visibility.ANY));
    }

    public static DBObject getDbObject(Object o) throws IOException {
        ObjectWriter writer = mapper.writer();
        ByteArrayOutputStream baos = new ByteArrayOutputStream();

        writer.writeValue(baos, o);
        DBObject dbo = new LazyWriteableDBObject(baos.toByteArray(), new LazyBSONCallback());
        //turn it into a proper DBObject otherwise it can't be edited.
        DBObject result = new BasicDBObject();
        result.putAll(dbo);
        return result;
    }

    public static <T> T getPojo(DBObject o, Class<T> clazz) throws IOException {
        ObjectReader reader = mapper.reader(clazz);
        DBEncoder dbEncoder = DefaultDBEncoder.FACTORY.create();
        OutputBuffer buffer = new BasicOutputBuffer();
        dbEncoder.writeObject(buffer, o);

        T pojo = reader.readValue(buffer.toByteArray());

        return pojo;
    }
} 
```

示例用法：

```
Pojo pojo = new Pojo(...);
DBObject o = JongoUtils.getDbObject(pojo);
//you can customise it if you want:
o.put("_id", pojo.getId()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-12-13T10:51:17.733

我知道这是一个非常古老的问题，但是如果今天被问到，我会推荐官方 Mongo Java 驱动程序上的[内置 POJO 支持。](https://mongodb.github.io/mongo-java-driver/3.6/driver/getting-started/quick-start-pojo/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-20T09:33:17.657

这是对 assylias 答案的更新，不需要 Jongo 并且与 Mongo 3.x 驱动程序兼容。它还处理嵌套对象图，无论如何我都无法使用`LazyWritableDBObject`它在 mongo 3.x 驱动程序中已删除。

这个想法是告诉杰克逊如何将对象序列化为 BSON 字节数组，然后将 BSON 字节数组反序列化为`BasicDBObject`. 如果您想将 BSON 字节直接发送到数据库，我相信您可以在 mongo-java-drivers 中找到一些低级 API。您需要对[bson4jackson](https://github.com/michel-kraemer/bson4jackson)的依赖，以便在`ObjectMapper`调用时序列化 BSON `writeValues(ByteArrayOutputStream, Object)`：

```
import com.fasterxml.jackson.databind.ObjectMapper;
import com.mongodb.BasicDBObject;
import com.mongodb.DBObject;
import de.undercouch.bson4jackson.BsonFactory;
import de.undercouch.bson4jackson.BsonParser;
import org.bson.BSON;
import org.bson.BSONObject;

import java.io.ByteArrayOutputStream;
import java.io.IOException;

public class MongoUtils {

    private static ObjectMapper mapper;

    static {
        BsonFactory bsonFactory = new BsonFactory();
        bsonFactory.enable(BsonParser.Feature.HONOR_DOCUMENT_LENGTH);
        mapper = new ObjectMapper(bsonFactory);
    }

    public static DBObject getDbObject(Object o) {
        try {
            ByteArrayOutputStream baos = new ByteArrayOutputStream();
            mapper.writeValue(baos, o);

            BSONObject decode = BSON.decode(baos.toByteArray());
            return new BasicDBObject(decode.toMap());
        } catch (IOException e) {
            throw new RuntimeException(e);
        }
    }
} 
```

# c# - 正则表达式替换字符串

> ID：15789476
> 
> 赞同：3
> 
> 时间：2013-04-03T13:59:35.673
> 
> 标签：c#, regex

我正在尝试在继续解析字符串之前对其进行规范化。基本上删除逗号之前或之后的所有空格，如果两个或多个逗号仅由空格分隔，则替换为单个逗号。

```
var r = new Regex(@"(\s*,+\s*)");
var query = r.Replace("my reg, is a   disaster    everytime , i,try ,it,       yep, ,disaster.", ","); 
```

输出应该是：

```
my reg,is a   disaster    everytime,i,try,it,yep,disaster. 
```

但它的：

```
my reg,is a   disaster    everytime,i,try,it,yep,,disaster. 
```

任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T14:05:51.437

尝试

```
var r = new Regex(@"(\s|,)*,(\s|,)*"); 
```

基本上，用一个逗号替换任意数量的逗号和空格，其中至少存在一个逗号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T14:11:38.153

一个`non-Regex`解决方案：

```
var dirty = "my reg, is a   disaster    everytime , i,try ,it,       yep, ,disaster.";
var clean = string.Join(",",
                           dirty.Split(new[] {","}, StringSplitOptions.RemoveEmptyEntries)
                                .Select(x => x.Trim())
                                .Where(x => x.Length > 0)); 
```

输出：

```
my reg,is a   disaster    everytime,i,try,it,yep,disaster. 
```

这个怎么运作？按符号拆分原始字符串`","`，丢弃空字符串，从每个字符串的开头/结尾修剪所有空格，使用 same 连接非空字符串`","`。

IMO，比支持更容易`RegEx`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:05:16.110

在原始字符串中，两个逗号（“，”）之间有一个空格，但正则表达式表示`,+`这意味着一个或多个连续的逗号。这行得通吗：`(\s*(,\s+)+\s*)`？

# iphone - iPhone GLSL 动态分支问题

> ID：15789478
> 
> 赞同：4
> 
> 时间：2013-04-03T13:59:37.673
> 
> 标签：iphone, opengl-es, opengl-es-2.0, glsl, shader

我试图将 vec3 数组作为统一传递，然后在每个像素上迭代它们。数组的大小因情况而异，因此我无法以恒定的迭代次数进行循环。

这是代码：

```
precision highp float;
precision highp int;

varying vec4 v_fragmentColor;

varying vec4 v_pos;

uniform int u_numberOfParticles;

const int numberOfAccumsToCapture = 3;
const float threshold = 0.15;              
const float gooCoeff = 1.19;

uniform mat4 u_MVPMatrix;
uniform vec3 u_waterVertices[100];

void main()
{
    vec4 finalColor = vec4(0.0, 0.0, 0.0, 0.0);

    vec2 currPos = v_pos.xy;

    float accum = 0.0;
    vec3 normal = vec3(0, 0, 0);

    for ( int i = 0; i < u_numberOfParticles; ++i )
    {
        vec2 dir2 = u_waterVertices[i].xy - currPos.xy;
        vec3 dir3 = vec3(dir2, 0.1);
        float q = dot(dir2, dir2);

        accum += u_waterVertices[i].z / q;
    }

    float normalizeToEdge = 1.0 - (accum - threshold) / 2.0;

    if (normalizeToEdge < 0.4)
        finalColor = vec4( 0.1, normalizeToEdge + 0.5, 0.9-normalizeToEdge*0.4, 1.0);

    if ( normalizeToEdge < 0.2 )
    {
        finalColor = vec4( 120.0/255.0, 245.0/255.0, 245.0/255.0, 1.0);
        float shade = mix( 0.7, 1.0, normal.x);
        finalColor *= shade;
    }

    gl_FragColor = vec4(finalColor);
} 
```

问题在这里：

```
for ( int i = 0; i < u_numberOfParticles; ++i )
{
    vec2 dir2 = u_waterVertices[i].xy - currPos.xy;
    vec3 dir3 = vec3(dir2, 0.1);
    float q = dot(dir2, dir2);

    accum += u_waterVertices[i].z / q;
} 
```

当我像这样制作for循环时

```
for ( int i = 0; i < 2; ++i )
{
    //...
} 
```

即使 u_numberOfParticles 也是 2，我的帧速率也加倍

让它像这样

```
for ( int i = 0; i < 100; ++i )
{
    if (i == u_numberOfParticles)
        break;
    //...
} 
```

没有改善。

我知道应对这种情况的唯一方法是创建多个着色器。但是数组的大小可能从 1 到 40 不等，仅仅因为 for 循环而制作 40 个不同的着色器是愚蠢的。任何帮助或想法如何处理这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-05T02:04:13.730

我同意@badweasel 的观点，即您的方法并不适合着色器。

据我了解，您正在计算从当前像素到每个粒子的距离，总结并使用结果确定颜色。

也许您可以改为为每个粒子渲染一个点精灵并通过智能混合确定颜色。

您可以在顶点着色器中使用 设置点精灵的大小`gl_PointSize`。`gl_PointCoord.xy`在片段着色器中，您可以通过使用（在纹理坐标中，即 [0..1] 中）确定当前像素在点精灵中的位置。通过了解点精灵的大小，您可以计算当前像素到粒子中心的距离并将颜色设置为某种东西。通过另外启用混合，您可以实现在循环中进行的求和，但帧速率要高得多。

以下是我用于通过点精灵渲染“假”球体的顶点和片段着色器，作为如何使用点精灵的示例。

对比：

```
#version 150
in vec3 InPosition;

uniform mat4 ModelViewProjectionMatrix;
uniform int Radius = 10;

void main()
{
    vec4 Vertex = vec4(InPosition, 1.0);
    gl_Position = ModelViewProjectionMatrix * Vertex;
    gl_PointSize = Radius;
} 
```

外星人：

```
#version 150
out vec4 FragColor;

void main()
{
    // calculate normal, i.e. vector pointing from point sprite center to current fragment
    vec3 normal;
    normal.xy = gl_PointCoord * 2 - vec2(1);
    float r2 = dot(normal.xy, normal.xy);
    // skip pixels outside the sphere
    if (r2 > 1) discard;
    // set "fake" z normal to simulate spheres
    normal.z = sqrt(1 - r2);
    // visualize per pixel eye-space normal
    FragColor = vec4(gl_PointCoord, normal.z, 1.0);
} 
```

请注意，您需要启用：`GL_POINT_SPRITE`，`GL_PROGRAM_POINT_SIZE`才能使用点精灵。

# casting - reinterpret_cast 从原始指针到帽子指针的引用计数规则是什么？

> ID：15789479
> 
> 赞同：2
> 
> 时间：2013-04-03T13:59:41.003
> 
> 标签：casting, c++-cx, reference-counting

如果我使用 a`reinterpret_cast`转换 from `IInspectable*`to `Object^`，我是否仍负责发布原件`IInspectable*`？

显然，produced`Object^`会在超出范围时自行释放，所以真正的问题是 reinterpret_cast 是否暗示了一个 AddRef 给`Object^`它自己的引用计数，或者它拥有我已经拥有的引用的所有权。

无论哪种方式，似乎都有争论：一方面，COM 操作不应该接管其输入指针的引用计数——另一方面，`reinterpret_cast`顾名思义，它只是从“原始 ABI 指针”*重新解释*我的位到“*已经*拥有对对象的引用的戴帽子的指针”，我的工作是确保这是有意义的）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-11T22:45:28.907

调用本身不会有`reinterpret_cast<Object^>(iinsp)`与引用计数相关的副作用，但是，将该转换的结果分配给`Object^`变量将导致在原始 IInspectable 指向的对象上发生 addref。当该`Object^`变量超出范围或分配给 null 时，`Release()`同样会在底层对象上调用 a。这是否会导致对象超出范围将取决于它在整个业务之前的内部引用计数。例如：

```
void foo(IInspectable* p) {  //assume: this comes in with a single refcount
  p->AddRef(); // refcount now 2
  reinterpret_cast<Object^>(p); //refcount still 2
  {
    Object^ o = reinterpret_cast<Object^>(p); //refcount now 3
  } //o goes out of scope, refcount now 2

  p->Release(); // refcount now 1
} //refcount is still 1, the caller of function foo is responsible for cleaning him up 
```

# string - 在 Inno Setup 中使用 Pascal 脚本从配置文件中查找和读取特定字符串

> ID：15789494
> 
> 赞同：4
> 
> 时间：2013-04-03T14:00:21.183
> 
> 标签：string, search, find, extract, inno-setup

我有很长的配置文件，我需要从文件中提取特定的字符串。我要提取/读取的是特定数字位置的 InstallDir，例如 20540。

我知道如何在 INI 或 XML 中查找字符串，但无法处理这种形式的文件。

显示结构的文件片段：

```
"212280"
{
    "InstallDir"        "D:\\XYZ\\stu\\opr"
    "UpdateKBtoDL"      "0"
    "HasAllLocalContent"        "1"
    "UpToDate"      "1"
    "DisableAutoUpdate"     "0"
}
"20540"
{
    "UpdateKBtoDL"      "0"
    "InstallDir"        "C:\\ABC\\def\\ghi"
    "HasAllLocalContent"        "1"
    "UpToDate"      "1"
    "maintenance_time"      "1339663134"
    "DisableAutoUpdate"     "0"
}
"4560"
{
    "UpdateKBtoDL"      "0"
    "HasAllLocalContent"        "0"
    "UpToDate"      "0"
    "InstallDir"        ""
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T15:01:12.833

您需要编写自己的解析器。这可能是一种可能的实现：

```
[Code]
function GetInstallDir(const FileName, Section: string): string;
var
  S: string;
  DirLine: Integer;
  LineCount: Integer;
  SectionLine: Integer;    
  Lines: TArrayOfString;
begin
  Result := '';
  S := '"' + Section + '"'; // AddQuotes is broken somehow...
  if LoadStringsFromFile(FileName, Lines) then
  begin
    LineCount := GetArrayLength(Lines);
    for SectionLine := 0 to LineCount - 1 do
      if Trim(Lines[SectionLine]) = S then
      begin
        if (SectionLine < LineCount) and (Trim(Lines[SectionLine + 1]) = '{') then
          for DirLine := SectionLine to LineCount - 1 do
          begin
            if (Pos('"InstallDir"', Lines[DirLine]) > 0) and
              (StringChangeEx(Lines[DirLine], '"InstallDir"', '', True) > 0) then
            begin
              S := RemoveQuotes(Trim(Lines[DirLine]));
              StringChangeEx(S, '\\', '\', True);
              Result := S;
              Exit;
            end;
            if Trim(Lines[DirLine]) = '}' then
              Exit;
          end;
        Exit;
      end;
  end;
end;

procedure InitializeWizard;
begin                         
  MsgBox(GetInstallDir('d:\File.almostjson', '20540'), mbInformation, MB_OK);
end; 
```

# excel - VBA - 将数据从 MS Word 表中提取到 MS Excel 工作表中（非特殊粘贴）

> ID：15789505
> 
> 赞同：0
> 
> 时间：2013-04-03T14:00:46.400
> 
> 标签：excel, vba, ms-word

我有一个标准的 Word 文档，其中包含一些数据表（姓名、出生日期、地址等）。

我想要进行设置，以便在 word 文档中新输入或更改数据时，它会自动过滤到我的 excel 文档中。我知道这可以使用“特殊粘贴”来完成，但我想知道是否可以做任何其他方式。我知道基本的 VBA，因为我可以从我的 Word 文档中的按钮打开和保存电子表格......但就是这样。

非常欢迎任何建议......现在已经为此苦苦挣扎了一段时间。这可能只是我为之工作的公司过时了。

因此，回顾一下 doc 是信息的中心枢纽，excel doc 需要从 doc 中获取更新的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:53:01.400

这是我上述评论的进一步内容。这段代码的作用是遍历表格行中的每个单元格并提取可以直接放入 Excel 单元格的文本，从而无需使用`Copy-Paste`

我已经对代码进行了注释，因此您理解它应该没有任何问题。不过，如果您这样做，则只需回帖即可。

您需要将此代码粘贴到模块中并在每次要将表数据导出到 Excel 时运行它。

没有说我还没有完全测试过这段代码。

```
Sub Sample()
    Dim wrdTbl As Table
    Dim RowCount As Long, ColCount As Long, i As Long, j As Long

    '~~> Excel Objects
    Dim oXLApp As Object, oXLwb As Object, oXLws As Object

    '~~> Set your table
    Set wrdTbl = Selection.Tables(1)

    '~~> Get the word table Row and Column Counts
    ColCount = wrdTbl.Columns.Count
    RowCount = wrdTbl.Rows.Count

    '~~> Create a new Excel Applicaiton
    Set oXLApp = CreateObject("Excel.Application")

    '~~> Hide Excel
    oXLApp.Visible = False

    '~~> Open the relevant Excel file
    Set oXLwb = oXLApp.Workbooks.Open("C:\Sample.xls")
    '~~> Work with Sheet1\. Change as applicable
    Set oXLws = oXLwb.Sheets(1)

    '~~> Loop through each row of the table
    For i = 1 To RowCount
        '~~> Loop through each cell of the row
        For j = 1 To ColCount
            '~~> This gives you the cell contents
            Debug.Print wrdTbl.Cell(i, j).Range.Text

            '~~> Put your code here to export the values of the Word Table
            '~~> cell to Excel Cell. Use the .Range.Text to get the value
            '~~> of that table cell as shown above and then simply put that
            '~~> in the Excel Cell
            With oXLws
                '~~> EXAMPLE
                ' .Cells(1, 1).Value = wrdTbl.Cell(i, j).Range.Text
            End With
        Next
    Next

    '~~> Close and save Excel File
    oXLwb.Close savechanges:=True

    '~~> Cleanup (VERY IMPROTANT)
    Set oXLws = Nothing
    Set oXLwb = Nothing
    oXLApp.Quit
    Set oXLApp = Nothing

    MsgBox "DONE"
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:54:17.870

我做过一次，这里是基础知识，抱歉代码是葡萄牙语，但我会用英语评论它。这里的主要功能是通过标题和名称轻松获取表值。（无需代码翻译）

```
'opens word and loads tables
Sub AbreWordDatabase()

    Set WordApp = CreateObject("Word.Application")  'creates word application in a variable declared as global outside this method
    WordApp.Visible = True                          'shows word

    'opens dialog box
    If WordApp.Dialogs(80).Show = -1 Then        'shows fileopendialog
        Set Doc = WordApp.Documents(1)           'sets the open document to a previously declared variable
        WordApp.WindowState = 2                  'minimizes o word (2 = wdWindowStateMinimize)
        LoadDataBase                             'takes desired values in file
    Else
        MsgBox "Word file wasnt open, operation was canceled."
    End If

    WordApp.Quit
    Set WordApp = Nothing

End Sub 
```

* * *

```
Sub LoadDataBase()  'Takes values in word file        

    SelectTabela "Title"                            'selects a table below the passed title
    Plan3.Range("NamedRange").Value = PegaValor("Some variable name - Line", "Some column name")    'Puts in excel table the value of first column after the passed variable name
    Plan3.Range("NamedRange2").Value = PegaValor("Another variable", "Another column name")    

End Sub 
```

* * *

```
'Selects in Word the table below "Titulo"
Sub SelectTabela(Titulo As String, Optional NumTabela As Integer = 1)

    'Titulo = Title that comes before the desired table in word file
    'NumTabela = defines if the desired table is the first below title, or second, third.... 

    Dim i As Integer

    PegaTexto(Titulo, Doc.Content, 12, True).Select 'Finds the title using the title formatting of table titles (customize this for your needs)
    For i = 1 To NumTabela                          'This loop finds below title the tables one by one until the desired number
        WordApp.Selection.GoToNext (2)              'goes to next table (2 = wdGoToTable)
    Next

End Sub 
```

* * *

```
'Finds a value in table using variable name and passed column    
Function PegaValor(NomeVar As String, Coluna As Variant) As String

    'Parameters
        'NomeVar = name of the variable in the selected table corresponding to the desired value
        'Coluna = index of the column after the name of the variable, or the name of the column

    Dim LinVar As Integer, ColVar As Integer    'Row and column indices to find the line based on variable name
    Dim LinCol As Integer, ColCol As Integer    'Row and column indices to find the column based on column name
    Dim Tabela As Object                        'Word.Table object - table where the values will be searched

    Set Tabela = WordApp.Selection.Range.Tables(1)  'Takes selected table

    AchaLinhaColuna NomeVar, Tabela, LinVar, ColVar   'Gives LinVar and ColVar the indices of the cell where the variable name was found (NomeVar)
    If LinVar = 0 Or ColVar = 0 Then                    ' 'If row or column are zero, variable was not found in table
        MsgBox "The name """ & NomeVar & """ passed to function ""PegaValor"" wasn't found"
        Exit Function
    End If

    If VarType(Coluna) = vbString Then                          'Verifies if type of var in column is string

        AchaLinhaColuna Coluna, Tabela, LinCol, ColCol, ColVar  'Gives LinCol and Colcol the indices of the cell where "Coluna" is found. Remember the searched region is after "ColVar". Colvar is for the case there are repeated names in different columns, we want the values only after the desired name
        If LinVar = 0 Or ColVar = 0 Then                        'If line or column are zero, column wasn't found by name.
            MsgBox "The name of the column """ & Coluna & """ passed to the function ""PegaValor"" wasn't found"
            Exit Function
        End If

    Else
        ColCol = ColVar + Coluna                                'The value of the searched column is the column containing the variable name plus the quantity of columns after that, passed to this function
    End If

    PegaValor = Tabela.Cell(LinVar, ColCol).Range.Text  'Takes the text of the cell of row corresponding to var name and column corresponding to the passed column name or index
    PegaValor = Left(PegaValor, Len(PegaValor) - 2)     'Eliminates the two last characters, they are special characters coming from word table.

End Function 
```

* * *

```
'Returns line and column in a table where given text is found
Sub AchaLinhaColuna(ByVal Texto As String, ByVal Tabela As Object, ByRef L As Integer, ByRef C As Integer, Optional ByVal StartC As Integer = 1)

    'Parameters consumed
        'Texto = desired text to be found in table
        'Tabela = table where text will be searched (Word.Table)
        'StartC = Start column from where value will be searched (for tables with repeated columns, starts the search in the desired column)

    'Parameters passed as results (marked byref)
        'L = line of the cell where text has been found
        'C = column of the cell where text has been found

    Dim j As Integer                'Loop indices
    Dim Linha As Object             'Table row (Word.Row)

    For Each Linha In Tabela.Rows   'For each table line
        For j = StartC To Linha.Cells.Count   'For each cell in that line starting from desired column (StartC)

            With Linha.Cells(j)         'With cell in row "Linha" and column j
                If UCase(PegaTexto(Texto, .Range).Text) = UCase(Texto) Then   'If text in cell is the desired text returns line and column
                    L = .Row.Index      'Row index
                    C = .Column.Index   'Column Index
                    Exit Sub
                End If
            End With

        Next
    Next
End Sub 
```

* * *

```
'Finds and returns any text in Word file. May use formatting.
Function PegaTexto(Texto As String, FindWhere As Object, Optional FontSize As Integer = 0, Optional Negrito As Boolean = False) As Object '(Word.Range)

    'Parameters consumed
        'Texto = Desired text to find
        'FindWhere = Range of the word file where text will be searched. (Range: Word's API object containing parts of the document, beware, there are ranges in excel, they are different) (Word.Range)
        'FontSize = desired font size (if no value is passed, assume any size)
        'Negrito = defines if desired text is bold (if no value is passed, assumes any formatting)

    With FindWhere.Find     'Find: Word's API object that finds text

        .ClearFormatting    'At start clears all formatting
        .Text = Texto       'Sets the desired text to be found
        With .Font          'WIth the font of the Find object - sets the font and bold formatting

            If FontSize <> 0 Then   
                .Size = FontSize   
            End If
            If Negrito Then         
                .Bold = True        
            End If

        End With
        .Execute        'Executes the Find object

    End With

    Set PegaTexto = FindWhere  'The Find object transforms the FindWhere range, making it contain only the found text

End Function 
```

# c# - 为什么 Thread.Start 会抛出 OutOfMemoryException

> ID：15789507
> 
> 赞同：15
> 
> 时间：2013-04-03T14:00:46.520
> 
> 标签：c#, .net

这个问题与我之前的问题 [线程开销有关](https://stackoverflow.com/questions/15774891/thread-overhead)

既然`Thread.Start`不要求线程运行的内存，为什么它会抛出`OutOfMemoryException`？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-03T15:21:48.060

下面是在 CLR 中启动托管线程的部分源代码：

```
CExecutionEngine::SetupTLSForThread(pThread);
if (!pThread->InitThread(fInternal) ||
    !pThread->PrepareApartmentAndContext())
    ThrowOutOfMemory();
if (UnsafeTlsSetValue(gThreadTLSIndex, (VOID*)this) == 0)
{
    ThrowOutOfMemory();
}
if (UnsafeTlsSetValue(GetAppDomainTLSIndex(), (VOID*)m_pDomain) == 0)
{
    ThrowOutOfMemory();
} 
```

当然看起来它在很多情况下都会导致内存不足；如果无法初始化线程，如果无法准备单元或上下文，或者无法分配线程本地存储，则抛出“内存不足”。

在我看来，这是一个坏主意；我更愿意为“我试图分配一个新的虚拟内存块但找不到所需大小的块”的情况保留“内存不足”。诸如没有可用的 TLS 插槽或线程初始化失败之类的事情会导致内存不足，这只会令人困惑。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-03T14:05:42.470

尽管仅在线程实际启动时才声明线程的堆栈，但注册线程以执行仍会占用一些内存，因此可能导致 OutOfMemoryException。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:07:15.493

我觉得你搞错了。线程确实需要内存才能启动。每个线程都有它的`own stack`,`own stackpointer`等，必须为其保留内存。如果你碰巧没有足够的内存，`exception`就会抛出一个。

# azure - IIS 媒体服务中的存档路径

> ID：15789511
> 
> 赞同：2
> 
> 时间：2013-04-03T14:00:52.663
> 
> 标签：azure, azure-blob-storage, azure-virtual-machine, azure-media-services

我正在运行带有 IIS 媒体服务的 azure windows 虚拟机。我将此虚拟机用作媒体服务器。它用于为直播和点播视频创建我的发布点。

在这里，我对“存档路径”有一个非常严重的问题。我们可以从 IIS 管理器中设置存档路径设置。默认路径是：%systemdrive%\inetpub\media\archives，我们可以将其更改为任何其他可用的系统或网络驱动器。

正如我已经提到的，我正在使用这个虚拟机作为媒体服务器，它肯定会有成千上万的大尺寸视频。并且将这些视频存储在有限大小的存储驱动器上会很麻烦。

所以最后我决定将存档路径设置为我的天蓝色存储路径（[http://MY_STORAGEblob.core.windows.net/](http://MY_STORAGEblob.core.windows.net/)）。

看看它：[http ://social.msdn.microsoft.com/Forums/getfile/266549](http://social.msdn.microsoft.com/Forums/getfile/266549)

请让我知道我该怎么做。我希望得到一个快速的答复。

感谢开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T23:25:29.873

**IIS 媒体服务**中没有可以使用 Windows Azure Blob 存储作为存档路径的内置解决方案。**要在IIS 媒体服务**中存档文件，您必须将驱动器（本地或网络）安装到 IIS 媒体服务组件可以写入这些文件的本地文件系统。在这一点上，这可以被认为是 IIS 媒体服务中的限制。

因此，如果您想使用 Windows Azure Blob 存储作为 IIS 媒体服务的存档目的地，您需要找到一种可以将 Azure Blob 存储挂载为本地驱动器的解决方案。这可能是您的众多解决方案之一。

[我知道Gladinet](http://www.gladinet.com/)提供的一个 3rd 方解决方案，您可以在其中将 Windows Azure Blob Storage 挂载为本地驱动器，如下所示。这可以用作您的情况的解决方案。我没有使用它，所以我不确定性能和其他东西，所以你可能需要在做出最终决定之前先彻底评估它。

![在此处输入图像描述](https://i.stack.imgur.com/K89rD.png)

# ios - IOS；以编程方式阻止对某些应用程序的访问

> ID：15789512
> 
> 赞同：2
> 
> 时间：2013-04-03T14:00:54.417
> 
> 标签：ios, blocked

有没有办法在 iOS 上以编程方式阻止对某些应用程序的访问？就我而言，使用私有 API 或变通方法不是问题。

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:45:42.427

[This tutorial](http://www.andyibanez.com/2012/07/02/create-a-mobilesubstrate-tweaks/) does basically what you want to do, assuming your second sentence means you're working with jailbroken iOS.

Basically you write a hook for the `SBApplicationIcon` class that looks something like this (code not mine):

```
%hook SBApplicationIcon
-(void)launch
{
    NSString *appName = [self displayName];
    if ([appName isEqualToString:@"blah"]) {
        // react accordingly
    }
    %orig; // Call this if you want to proceed with launching the app in question.
}
%end 
```

You'll need to link against `UIKit`, I believe.

EDIT: to clarify, the above code is using Logos. I'm sure it's also possible using the Objective-C runtime directly, but I'm not familiar with that.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:25:28.680

有些应用程序会阻止访问，迫使您输入密码。例如，您可以在这里查看[https://apple.stackexchange.com/questions/31154/how-do-i-password-protect-access-to-specific-apps-in-ios](https://apple.stackexchange.com/questions/31154/how-do-i-password-protect-access-to-specific-apps-in-ios)以找到一些想法。希望这有帮助！

# c++ - 在 map 或 unordered_map 中是否需要 insert()？

> ID：15789513
> 
> 赞同：7
> 
> 时间：2013-04-03T14:00:56.653
> 
> 标签：c++

我看到很多将项目添加到 a`map`或`unordered_map`via 的示例`operator[]`，如下所示：

```
int main() {
    unordered_map <string, int> m;
    m["foo"] = 42;
    cout << m["foo"] << endl;
} 
```

有什么理由改用`insert`成员函数吗？看起来他们都做同样的事情。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-03T14:02:20.613

他们不是。

`operator[]`将覆盖此键的值（如果存在），而不会覆盖`insert`。

如果`operator[]`用于插入元素，预计会慢一些（有关详细信息，请参阅下面的@MatthieuM 评论），但这在这里并不重要。

虽然`std::map::insert`返回`std::pair< iterator, bool >`，其中`.second`将告诉您该值是已插入还是已存在。

* * *

关于您的评论：您不能有 2 个元素具有相同的键和不同的值。这不是一个`multimap`.

如果地图中有一个元素，与您尝试插入的键相同，则：

*   `operator[]`将覆盖现有值
*   `std::map::insert`不会~~做任何事情。~~^*返回 a `std::pair< iterator, bool >`，`.second`将在哪里`false`（说“新元素没有插入，因为这样的键已经存在”）并且`.first`将指向找到的元素。

[^*由于@luk32 给出的注释/备注，我改变了这一点；但是写“不会做任何事情”，我并不是字面意思，我的意思是它不会改变现有元素的值]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T14:28:31.213

在某些情况下，使用`insert()`可以帮助提高性能（更具体地说，`std::map`因为搜索时间`O(log(n))`不是恒定摊销的）。举个常见的例子：

```
std::map<int, int> stuff;

// stuff is populated, possibly large:

auto iterator = stuff.find(27);

if(stuff.end() != iterator)
{
   // subsequent "find", set to 15
   iterator->second = 15;
}
else
{
   // insert with value of 10
   stuff[27] = 10;
} 
```

上面的代码导致两次有效地找到元素。我们可以这样写（稍微）更有效率：

```
// try to insert 27 -> 10
auto result = stuff.insert(std::make_pair(27, 10));

// already existed
if(false == result.second)
{
   // update to 15, already exists
   result.first->second = 15;
} 
```

上面的代码只尝试一次找到一个元素，降低了算法的复杂性。对于频繁的操作，这可以大大提高性能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T15:40:41.493

两者不等价。 `insert`不会覆盖现有值，并且它返回 a `pair<iterator, bool>`，其中`iterator`是键的位置，无论它是否已经存在。`bool`指示插入是否发生。

`operator[]`有效地做一个`lower_bound`关键。如果该操作的结果是`iterator`具有相同键的 an，则它返回对该值的引用。如果不是，它会插入一个具有默认构造值的新节点，然后返回对该值的引用。这就是为什么`operator[]`是一个非常量成员 - 如果它不存在，它会自动激活键值。 **如果值类型的构建成本很高，这可能会对性能产生影响。**

另请注意，在 C++11 中，我们有一个`emplace`与 几乎相同的方法`insert`，除了它在发生插入时从转发的参数就地构造键值对。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T14:16:21.290

好吧，我在一定程度上不同意 Kiril 的回答，我认为它不完整，所以我给出了我的答案。

根据就相当于某个调用。通过这一点，我也认为他说值将被覆盖是错误的。它说：“如果不存在具有键键的元素，则返回对新元素的映射值的引用。否则返回对现有元素的映射值的引用。”[`cppreference`](http://en.cppreference.com/w/cpp/container/map/operator_at) `std::map::operator[]``insert()`

所以它似乎是一个方便的包装器。但是`insert()`， 具有重载的优点，因此它在一个名称下提供了更多功能。

我向 Kiril 指出一点，乍一看它们似乎确实有一些不同的功能，但是 IHMO 他提供的示例并不相同。

因此，作为使用示例/原因，`insert`我会指出，一次插入许多元素，或使用`hint`（[此处](http://en.cppreference.com/w/cpp/container/map/insert)调用 3-6 ）。

**那么在 map 或 unordered_map 中是否需要 insert()？** 我会说是的。此外，`operator[]`不是必需的，因为它可以使用 来模拟/实现`insert`，而其他方式是不可能的！它只是提供了更多的功能。但是，写`(insert(std::make_pair(key, T())).first)->second)`（在[cppreference](http://en.cppreference.com/w/cpp/container/map/operator_at)之后）之类的东西似乎比`[]`.

**因此，是否有任何理由使用插入成员函数？** 我会说重叠功能，地狱不。

# visual-studio-2010 - Android 中的设计模式（与 xamarin 的跨平台）

> ID：15789516
> 
> 赞同：0
> 
> 时间：2013-04-03T14:01:12.273
> 
> 标签：visual-studio-2010, visual-studio, xamarin.ios, xamarin

我想使用 xamarin（iOS 和 Android）在多个设备中制作一个非常简单的应用程序。

所以我读/认为最好的方法是放置一个文件夹（在所有项目之间共享），其中包含所有：

*   DataLayer（用于物理存储）
*   DataAccessLayer（支持数据操作）
*   ServiceAccesslayout（与外部 API 通信）
*   BusinessLayer（应用程序外观）

对于视图，应用程序将使用他们的自定义语言

所以第一个问题，听起来很棒吗？第二：如何添加应该在 Visual Studio 2012 的每个项目中更新的那种文件夹？实际上，我有一个包含两个项目的解决方案，两个项目（iOS 和 Android）应该具有相同的 folter（tat 包含所有“核心”层）

顺便说一句，如果您已经阅读过讨论该问题的教程，请给我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T11:44:30.433

我会看看 MVVMCross，它是跨平台共享最大数量代码的好方法。

[https://github.com/slodge/MvvmCross](https://github.com/slodge/MvvmCross)

# c# - Apphost.Start() 上的 ServiceStack TypeInitializationException

> ID：15789518
> 
> 赞同：3
> 
> 时间：2013-04-03T14:01:14.947
> 
> 标签：c#, servicestack

我在独立模式下使用 ServiceStack。它现在正在`TypeInitialzationException`执行时给出`Apphost.Start()`。

当时，我正在实现一些自定义过滤器，但是从唯一过滤的 DTO 类中删除注释并没有解决问题。

堆栈跟踪没有显示我所涉及的任何类，而失败的类是`JsvReader`我没有明确使用的。

怎样才能防止这个问题？

注意：我刚刚使用 nuget 更新了所有包，所以这是目前的最新版本，所有 ServiceStack 组件都是 3.9.43。

# 异常详情

```
System.TypeInitializationException occurred
  HResult=-2146233036
  Message=The type initializer for 'ServiceStack.Text.Jsv.JsvReader`1' threw an exception.
  Source=ServiceStack.Text
  TypeName=ServiceStack.Text.Jsv.JsvReader`1
  StackTrace:
       at ServiceStack.Text.Jsv.JsvReader`1.GetParseFn()
       at ServiceStack.Text.Jsv.JsvReader.GetParseFn(Type type)
       at ServiceStack.ServiceModel.Serialization.StringMapTypeDeserializer..ctor(Type type)
       at ServiceStack.ServiceHost.RestPath..ctor(Type requestType, String path, String verbs, String summary, String notes)
       at ServiceStack.ServiceHost.ServiceController.RegisterRestPaths(Type requestType)
       at ServiceStack.ServiceHost.ServiceController.RegisterCommon(Type serviceType, Type requestType, Type responseType)
       at ServiceStack.ServiceHost.ServiceController.RegisterNService(ITypeFactory serviceFactoryFn, Type serviceType)
       at ServiceStack.ServiceHost.ServiceController.Register(ITypeFactory serviceFactoryFn)
       at ServiceStack.ServiceHost.ServiceManager.Init()
       at ServiceStack.WebHost.Endpoints.Support.HttpListenerBase.Init()
       at ArdWebServer.Program.Main(String[] args)
  InnerException: System.TypeInitializationException
       HResult=-2146233036
       Message=The type initializer for 'ServiceStack.Text.Common.DeserializeSpecializedCollections`2' threw an exception.
       Source=ServiceStack.Text
       TypeName=ServiceStack.Text.Common.DeserializeSpecializedCollections`2
       StackTrace:
            at ServiceStack.Text.Common.DeserializeSpecializedCollections`2.get_Parse()
            at ServiceStack.Text.Common.JsReader`1.GetCoreParseFn[T]()
            at ServiceStack.Text.Common.JsReader`1.GetParseFn[T]()
            at ServiceStack.Text.Jsv.JsvReader`1..cctor()
       InnerException: System.NullReferenceException
            HResult=-2147467261
            Message=Object reference not set to an instance of an object.
            Source=ServiceStack.Text
            StackTrace:
                 at ServiceStack.Text.PlatformExtensions.GenericTypeArguments(Type type)
                 at ServiceStack.Text.Common.DeserializeSpecializedCollections`2.GetGenericEnumerableParseFn()
                 at ServiceStack.Text.Common.DeserializeSpecializedCollections`2.GetParseFn()
                 at ServiceStack.Text.Common.DeserializeSpecializedCollections`2..cctor()
            InnerException: 
```

# 我的应用主机

```
 public class AppHost : AppHostHttpListenerBase
    {
        public AppHost() : base("IAM Tools Service Stack Host", typeof (Tims.Global).Assembly)
        {                
            CatchAllHandlers.Add(
                (httpMethod, pathInfo, filePath) => 
                    Tims.Support.StaticFileHandler.Factory(
                        Params.Instance.HttpDataDir, 
                        "/", 
                        pathInfo
                )
            );
        }

        public override void Configure(Funq.Container container)
        {                
            SetConfig(new EndpointHostConfig()
                      {

                          DebugMode = true,

                          WriteErrorsToResponse = true
                      });        
        }
    } 
```

# c# - 如何将 RST 格式的 .Net 评论转换为 HTML？

> ID：15789520
> 
> 赞同：1
> 
> 时间：2013-04-03T14:01:22.900
> 
> 标签：c#, .net, documentation, restructuredtext

在 Linux 中，有许多工具可以读取代码中的注释并将其转换为 HTML/PDF 文档。我现在正在处理一个 .Net 项目，我想知道我们是否有类似的工具可以将 .Net 代码中的注释转换为 HTML/PDF 文档？

我尝试了谷歌，但没有给我任何有用的结果:(也许我没有使用正确的关键字进行搜索。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:03:01.113

您可能想看看 Sandcastle：[http ://broadcast.oreilly.com/2010/09/build-html-documentation-for-y.html](http://broadcast.oreilly.com/2010/09/build-html-documentation-for-y.html)

Sandcastle 是一种基于您的代码注释和实际代码本身生成 HTML / Visual Studio 帮助包的工具。

一旦设置好，它就相对容易使用。

但要小心！大型项目可能会导致 OutOfMemoryExceptions。

# c++ - boost::variant 访问者类是必需的吗？

> ID：15789522
> 
> 赞同：1
> 
> 时间：2013-04-03T14:01:25.337
> 
> 标签：c++, boost-variant, apply-visitor

`class Visitor : public boost::static_visitor<>`我是否需要使用带有 boost::variant的访问者类？

如果不是，是否有理由不使用访问者？有理由更喜欢访客班吗？

我问这个问题是因为访问者类对于 boost::variant 的使用来说是一个多余的方面。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T14:08:32.040

您不必强制使用访问者，您可以使用`get<T>()`.

这导致这样的代码：

```
int foo(boost::variant<int, std::string, Bar> const& v) {
    if (int const* i = get<int>(&v)) {
        return *i;
    }
    if (std::string const* s = get<std::string>(&v)) {
        return boost::lexical_cast<int>(*s);
    }
    if (Bar const* b = get<Bar>(&v)) {
        return b->toInt();
    }

    std::abort(); // ?
} 
```

这可以说是丑陋的......而且还有一个问题，如果您突然将一种类型添加到变体中，您需要检查代码中的每一次使用，以检查您没有遗漏`if`某个地方。

另一方面，如果您使用变体，如果您未能处理案例（类型），您将收到编译时错误通知。

在我看来，使用`boost::static_visitor`是无限优越的……尽管我已经使用了`get<T>()`几次替代方案；通常，当我只需要检查一种（或两种）类型并且（根本）不关心所有其他类型时。另一种方法是使用`template <typename T> void operator()(T const&) const;`过载的访问者，这不一定更干净。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:09:38.240

如果想对变体进行一些操作，例如一些检查，那么您可能希望将其作为访问者。

```
struct to_str : boost::static_visitor<std::string>
{
   template<class T>
   std::string operator()(T const & x) const
   {
      return boost::lexical_cast<std::string>(x);
   }
}; 
```

另一方面，如果你想要，例如检查它是否`int`并用它做某事，你可能会使用`boost::get`例如

```
if(const int * my_int = boost::get<int>(&my_var)) //no-throw form
{
  //do smth with int
} 
```

# jquery - jQuery跨多个表交替行颜色

> ID：15789526
> 
> 赞同：0
> 
> 时间：2013-04-03T14:01:36.623
> 
> 标签：jquery, css

我注意到严格使用 jquery 交替行颜色的问题。您可以查看this [fiddle](http://jsfiddle.net/dkindler/WgRY5/1/)以获取我将要描述的示例。

我正在使用 CSS3 来控制在多个表中按预期工作的表上的条带化。

```
.table-zebra tbody > tr:nth-child(even) > td {background-color: lightgrey;} 
```

每个偶数行都带有浅灰色条纹。计数从第一行开始。

对于不支持 CSS3 的浏览器，我使用 jquery 来模仿：（.table-striped 用于此示例以显示小提琴的差异）

```
 $(".table-striped tr:odd").css("background-color", 'lightgrey'); 
```

当我有多个具有奇数行的表时，jquery 将继续从前一个表中计数，这会错误地交替行。

除了使用 $.each 之外，还有一种更简单的方法可以在 jquery 中处理这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:15:00.997

CSS：

```
tr.even td {
    background-color: green;
}
tr.odd td {
    background-color: yellow;
} 
```

JS：

```
 $('.table-striped > tbody').each(function () {
     $('tr:odd', this).addClass('odd').removeClass('even');
     $('tr:even', this).addClass('even').removeClass('odd');
 }); 
```

[**在这里演示**](http://jsfiddle.net/WCBBc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:06:15.600

据我所知，`:odd`它适用于所有`<TR>`s ，因此您会得到您描述的行为。我认为`:odd`除了`.table-striped`使用`.each()`.

对于这种特定情况，尽管有一种解决方法`:nth-child`：

```
$(".table-striped tr:nth-child(:odd)").css("background-color", 'lightgrey'); 
```

虽然这适用于如果特定是其直接父母的奇数孩子，因此如果您的 s 包含多个s`<TR>`可能会做错事。`<TABLE>``<TBODY>`

# android - Android 推送通知作为邀请

> ID：15789536
> 
> 赞同：0
> 
> 时间：2013-04-03T14:01:55.157
> 
> 标签：android, push-notification

我希望我的 Java 服务器能够以邀请的形式发送 Android 通知。我目前可以发送基本的 Android 通知，但我想以邀请的形式出现在屏幕上，并带有“是，我接受”或“不，我拒绝”等选项，然后将答案发回给发件人. 你会怎么做这样的事情？我不知道该怎么做，我在互联网上找不到任何东西。谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:05:34.737

收到服务器推送的消息后，您可以启动一个新的具有对话框样式的 Activity，然后您可以在该 Activity 中开展业务。

这种情况与接收短信非常相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:29:16.560

您可以使用`RemoteViews`和管理 OnClick 事件为通知创建自定义布局。请参阅[Android Notifications](http://developer.android.com/guide/topics/ui/notifiers/notifications.html)，这个问题也可能对您有所帮助[Create Notification using some controls](https://stackoverflow.com/questions/10344649/how-to-create-custom-notification-contain-some-controls)

# c# - 使用 Json.NET 反序列化键值对数组

> ID：15789539
> 
> 赞同：27
> 
> 时间：2013-04-03T14:02:01.607
> 
> 标签：c#, json.net, deserialization

给定以下json：

```
[ {"id":"123", ... "data":[{"key1":"val1"}, {"key2":"val2"}], ...}, ... ] 
```

那是更大树的一部分，我如何将“数据”属性反序列化为：

```
List<MyCustomClass> Data { get; set; } 
```

或者

```
List<KeyValuePair> Data { get; set; } 
```

或者

```
Dictionary<string, string> Data { get; set; } 
```

使用 Json.NET？任何一个版本都可以（尽管我更喜欢 List of MyCustomClass）。我已经有一个包含其他属性的类，如下所示：

```
public class SomeData
{
   [JsonProperty("_id")]
   public string Id { get; set; }
   ...
   public List<MyCustomClass> Data { get; set; }
} 
```

其中“MyCustomClass”将仅包含两个属性（键和值）。我注意到有一个 KeyValuePairConverter 类听起来可以满足我的需要，但我找不到如何使用它的示例。谢谢。

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-04-03T15:11:27.563

最简单的方法是将键值对数组反序列化为`IDictionary<string, string>`：

```
 public class SomeData
{
    public string Id { get; set; }

    public IEnumerable<IDictionary<string, string>> Data { get; set; }
}

private static void Main(string[] args)
{
    var json = "{ \"id\": \"123\", \"data\": [ { \"key1\": \"val1\" }, { \"key2\" : \"val2\" } ] }";

    var obj = JsonConvert.DeserializeObject<SomeData>(json);
} 

```

但是，如果您需要将其反序列化为您自己的类，它可能看起来像这样：

```
 public class SomeData2
{
    public string Id { get; set; }

    public List<SomeDataPair> Data { get; set; }
}

public class SomeDataPair
{
    public string Key { get; set; }

    public string Value { get; set; }
}

private static void Main(string[] args)
{
    var json = "{ \"id\": \"123\", \"data\": [ { \"key1\": \"val1\" }, { \"key2\" : \"val2\" } ] }";

    var rawObj = JObject.Parse(json);

    var obj2 = new SomeData2
    {
        Id = (string)rawObj["id"],
        Data = new List<SomeDataPair>()
    };

    foreach (var item in rawObj["data"])
    {
        foreach (var prop in item)
        {
            var property = prop as JProperty;

            if (property != null)
            {
                obj2.Data.Add(new SomeDataPair() { Key = property.Name, Value = property.Value.ToString() });
            }

        }
    }
} 

```

看到我知道那`Value`是`string`并且我调用`ToString()`方法，可以有另一个复杂的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-08-15T23:31:06.837

感谢@Boo 的回答，但就我而言，我需要进行一些小的调整。这就是我的 JSON 的样子：

```
{
    "rates": {
        "CAD": 1.5649,
        "CZK": 26,118,
        ...
    },
    "base": "EUR",
    "date": "2020-08-16"
} 
```

我的 DTO 如下所示：

```
public IDictionary<string, decimal> Rates { get; set; }
public string Base { get; set; }
public DateTime Date { get; set; } 
```

所以唯一的调整是删除`IEnumerable`周围的`IDictionary`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T17:36:54.473

我最终这样做了：

```
[JsonConverter(typeof(MyCustomClassConverter))]
public class MyCustomClass
{
  internal class MyCustomClassConverter : JsonConverter
  {
    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
      throw new NotImplementedException();
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
      JObject jObject = JObject.Load(reader);

      foreach (var prop in jObject)
      {
        return new MyCustomClass { Key = prop.Key, Value = prop.Value.ToString() };
      }

      return null;
    }

    public override bool CanConvert(Type objectType)
    {
      return typeof(MyCustomClass).IsAssignableFrom(objectType);
    }
  }

  public string Key { get; set; }
  public string Value { get; set; }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-31T23:42:35.453

```
public class Datum
{
    public string key1 { get; set; }
    public string key2 { get; set; }
}

public class RootObject
{
    public string id { get; set; }
    public List<Datum> data { get; set; }
} 
```

我也使用了这个向导[json2csharp.com](http://json2csharp.com)来生成反序列化的类

使用它

```
using RestSharp;
using Newtonsoft.Json;

IRestResponse restSharp= callRestGetMethodby_restSharp(api_server_url);
string jsonString= restSharp.Content;

RootObject rootObj= JsonConvert.DeserializeObject<RootObject>(jsonString);
return Json(rootObj); 
```

如果你用 restsharp 打电话休息

```
 public IRestResponse callRestGetMethodby_restSharp(string API_URL)
    {
        var client = new RestSharp.RestClient(API_URL);
        var request = new RestRequest(Method.GET);
        request.AddHeader("Content-Type", "application/json");
        request.AddHeader("cache-control", "no-cache");
        IRestResponse response = client.Execute(request);
        return response;
    } 
```

您也可以从[getpostman.com](https://www.getpostman.com/)工具中获得这 6 行 restsharp

# ruby - 方法的局部变量与另一个方法同名

> ID：15789540
> 
> 赞同：8
> 
> 时间：2013-04-03T14:02:05.387
> 
> 标签：ruby

我试图弄清楚 Ruby 如何处理与`self`类中的方法同名的局部变量，并发现了一个我不理解的行为：

```
class A
  def val
    10
  end

  def test
    val = val
  end
end

p A.new.test 
```

此代码打印`nil`。为什么？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:26:36.050

我认为局部变量一经说明就被声明了。在 ruby​​ 中，查找首先查找局部变量，如果存在则使用它，如果不存在则查找方法。这意味着 val = val 将第一个 val 声明为本地，然后左侧的 val 与之匹配（不确定我应该[在显微镜下检查红宝石](http://patshaughnessy.net/ruby-under-a-microscope)以确定）

如果你试试

```
class A
  def val
    10
  end

  def test
    back = []
    x = val
    back << x
    val = x + 1
    back << val
    x = val
    back << x
  end
end

p A.new.test 
```

那么一切都很好，它打印 [10, 11, 11] 这意味着第一个 x = val 调用方法，第二个调用局部变量，大概。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-05-04T22:04:04.923

其他答案很好地解释了一切，我只是想向有同样问题的读者指出有关此问题的[官方文档](https://ruby-doc.org/core-3.0.2/doc/syntax/assignment_rdoc.html#label-Local+Variables+and+Methods)。

> ## [局部变量和方法](https://ruby-doc.org/core-3.0.2/doc/syntax/assignment_rdoc.html#label-Local+Variables+and+Methods)
> 
> 在 Ruby 中，局部变量名和方法名几乎相同。如果您没有指定这些模棱两可的名称之一，ruby 将假定您希望调用一个方法。一旦您指定了名称，ruby 将假定您希望引用一个局部变量。
> 
> 局部变量是在解析器遇到赋值时创建的，而不是在赋值发生时创建的：
> 
> ```
> a = 0 if false # does not assign to a
> 
> p local_variables # prints [:a]
> 
> p a # prints nil 
> ```
> 
> 方法名和局部变量名之间的相似性可能会导致代码混乱，例如：
> 
> ```
> def big_calculation
>   42 # pretend this takes a long time
> end
> 
> big_calculation = big_calculation() 
> ```
> 
> 现在任何对的引用都`big_calculation`被视为局部变量并将被缓存。要调用该方法，请使用`self.big_calculation`.
> 
> 您可以通过使用如上所示的空参数括号或使用显式接收器（如`self`. [`NameError`](https://ruby-doc.org/core-3.0.2/NameError.html)如果方法的可见性不是公共的或接收者是文字，则使用显式接收者可能会引发 a `self`。
> 
> 另一个常见的令人困惑的情况是使用修饰符时`if`：
> 
> ```
> p a if a = 0.zero? 
> ```
> 
> 而不是打印“true”，而是收到一个[NameError](https://ruby-doc.org/core-3.0.2/NameError.html)，“未定义的局部变量或方法 'a'”。由于 ruby​​ 解析了第一个的`a`左侧`if`并且还没有看到分配给`a`它，因此假设您希望调用一个方法。Ruby 然后看到分配给`a`并假设您正在引用本地方法。
> 
> 混乱来自表达式的无序执行。首先局部变量被赋值，然后你尝试调用一个不存在的方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:11:15.790

这是`nil`因为这`val`是您尝试传递的方法，并且您没有`val`在任何地方调用并且它会覆盖自身。你基本上陷入了一个循环。

在每个函数的末尾是一个隐式返回，它返回最后一个值，如果它没有返回值，Ruby 返回`nil`但你可能期待一个函数？

这在 Python 中类似，没有返回的函数总是返回`None`。

这可以通过将左手`val`变成具有`@`内涵的实例属性来解决。

我猜您希望它`10`使用该`val()`方法打印？

```
def test
    @val = val()
end

puts A.new.test 
```

以下也是有效的：

```
def test
    val = self.val() #but this will produce the same as above to no real benefit.
end 
```

关键是您必须调用该`val`方法才能使`val`变量获取值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-12T18:45:42.680

这应该分为两个问题：

1.  当你有`a = a`时，首先评估什么？如果你这样做`echo 'p a = a' | ruby`，你会得到`nil`, 而不是未定义的异常，所以定义是第一位的。

2.  当局部变量与方法同名时会发生什么？答：方法变得不可见，除非你使用`self.`

# perl - Perl 在序列中的递增点处插入

> ID：15789543
> 
> 赞同：1
> 
> 时间：2013-04-03T14:02:08.417
> 
> 标签：perl, loops, increment

我有一个问题，希望有人能帮忙。

使用以下...

```
 my @sequence = (1..9);
 my $newSequence = join " - ", @sequence; 
```

...我可以打印一个连字符分隔的数字序列`1 - 2 - 3 - 4 - 5 - 6 - 7 - 8 - 9`

我遇到的问题并且不太清楚解决的最佳逻辑方法是一个循环，用于在每次迭代时递增数字序列中变量字符串的位置（以产生如下所示的输出类型）。

```
my $varString = "DOG" 
```

**我希望实现的输出：**

```
DOG - 2 - 3 - 4 - 5 - 6 - 7 - 8 - 9
1 - DOG - 3 - 4 - 5 - 6 - 7 - 8 - 9
1 - 2 - DOG - 4 - 5 - 6 - 7 - 8 - 9
1 - 2 - 3 - DOG - 5 - 6 - 7 - 8 - 9
1 - 2 - 3 - 4 - DOG - 6 - 7 - 8 - 9
1 - 2 - 3 - 4 - 5 - DOG - 7 - 8 - 9
1 - 2 - 3 - 4 - 5 - 6 - DOG - 8 - 9
1 - 2 - 3 - 4 - 5 - 6 - 7 - DOG - 9
1 - 2 - 3 - 4 - 5 - 6 - 7 - 8 - DOG 
```

这样做的最佳方法是什么？非常感谢您的帮助，非常感谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T14:14:36.177

我错过了什么吗？当然，这就是所有需要的。

```
use strict;
use warnings;

my @sequence = 1 .. 9;

for my $i (0 .. $#sequence) {
  my @newseq = @sequence;
  $newseq[$i] = 'DOG';
  print join(' - ', @newseq), "\n";
} 
```

**输出**

```
DOG - 2 - 3 - 4 - 5 - 6 - 7 - 8 - 9
1 - DOG - 3 - 4 - 5 - 6 - 7 - 8 - 9
1 - 2 - DOG - 4 - 5 - 6 - 7 - 8 - 9
1 - 2 - 3 - DOG - 5 - 6 - 7 - 8 - 9
1 - 2 - 3 - 4 - DOG - 6 - 7 - 8 - 9
1 - 2 - 3 - 4 - 5 - DOG - 7 - 8 - 9
1 - 2 - 3 - 4 - 5 - 6 - DOG - 8 - 9
1 - 2 - 3 - 4 - 5 - 6 - 7 - DOG - 9
1 - 2 - 3 - 4 - 5 - 6 - 7 - 8 - DOG 
```

* * *

**更新**

对于那些全神贯注于增加 CPU 空闲时间的人来说，这是一个替代方案。我提供它是因为它比目前提供的任何一种解决方案都更清晰、更快捷。输出是相同的。

```
use strict;
use warnings;

my @sequence = 1 .. 9;

for my $i (0 .. $#sequence) {
  local $sequence[$i] = 'DOG';
  my $s = join(' - ', @sequence);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T14:09:25.620

使用数组切片的解决方案：

```
#!/usr/bin/perl
use warnings;
use strict;
use feature qw(say);

my $size = 9;
my @sequence = 1 .. $size;
for my $pos (0 .. $size - 1) {
    say join ' - ', @sequence[ 0 .. $pos - 1 ],
                    'DOG',
                    @sequence[ $pos + 1 .. $size - 1 ];
} 
```

# mysql - 根据 ID 列分隔列

> ID：15789553
> 
> 赞同：0
> 
> 时间：2013-04-03T14:02:26.683
> 
> 标签：mysql

基于 ID 列，我需要隔离数据。我有一张桌子，

```
ID  Course  Seats
1   CS      50
1   EC      60
1   ME      30
2   CS      60
2   EC      40
2   ME      25
2   EE      20 
```

基本上，需要下表中的结果集，其中 Seats 列基于上表的 ID。

```
Course Seats_ID = 1 Seats_ID = 2
CS      50              60
EC      60              40
ME      30              25
EE      NULL            20 
```

请告知如何完成它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:04:14.367

MySQL 没有*枢轴*功能，这基本上是您需要做的。为了旋转数据，您将使用带有`CASE`表达式的聚合函数将数据从行转换为列：

```
select Course,
  max(case when id=1 then seats end) Seats1,
  max(case when id=2 then seats end) Seats2
from yourtable
group by course 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!2/d1364/1)

这给出了结果：

```
| COURSE | SEATS1 | SEATS2 |
----------------------------
|     CS |     50 |     60 |
|     EC |     60 |     40 |
|     EE | (null) |     20 |
|     ME |     30 |     25 | 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:04:39.550

您需要一个条件聚合：

```
select course,
       sum(case when id = 1 then seats end) as Seats_1,
       sum(case when id = 2 then seats end) as Seats_2
from t
group by course; 
```

# backbone.js - 动态创建骨干路由

> ID：15789563
> 
> 赞同：2
> 
> 时间：2013-04-03T14:02:56.693
> 
> 标签：backbone.js, backbone-routing

这是我的骨干路由器：

```
var Router = Backbone.Router.extend({
    routes: {
       "": "home",
       "home": "home",
       "about": "about",
       "works": "works",
       "work/:id" : "work",
       "news": "news",
       "contact": "contact"
    },

    initRoutes: function(e) {       
        this.on('route:home', function() {
            page.activepage = "home";
            page.render();
        }); 
        this.on('route:about', function() {
            page.activepage = "about";
            page.render();
        }); 
        this.on('route:works', function() {
            page.activepage = "works";
            page.render();
        }); 
        this.on('route:work', function(id) {
            page.activepage = "works";
            page.param = id;
            page.render();
        }); 
        this.on('route:news', function() {
            page.activepage = "news";
            page.render();
        });
        this.on('route:contact', function() {
            page.activepage = "contact";
            page.render();
        });
    },
    initialize: function(){
        var self = this;
        Backbone.history = Backbone.history || new Backbone.History({});
        root = "kitchenV3/"+lang;
        var enablePushState = true;
        var pushState = !! (enablePushState && window.history && window.history.pushState);
        Backbone.history.start({
            pushState: pushState,
            root: root
        });
        self.initRoutes();
    }
}); 
```

所以你可以看到我所有的路线基本上都在做同样的事情（根据路线名称和参数渲染内容）。那么如何重写 ,,this.on(route:about)..." 以避免递归呢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T14:17:30.610

使用这些路线：

```
routes: {
  '': 'myFunc',
  ':mod(/)': 'myFunc',
  ':mod/:id(/)': 'myFunc'
},
myFunc: function(mod, id) {
  page.activepage = mod || 'home';
  if(id) page.param = id;
  page.render();
} 
```

并删除initRoutes。这应该可以正常工作。

# javascript - 将 XMLHttpRequest responseText 转换为 XML 数据

> ID：15789565
> 
> 赞同：0
> 
> 时间：2013-04-03T14:03:08.343
> 
> 标签：javascript, httpresponse, responsetext

好吧，我正在尝试从网站获取 RSS 提要。但是 XMLHttpRequest 的响应没有任何 responseXML（即它为空）。但是所有的 rss 数据都在 responseText 中。我只想获取这些数据的一部分。现在我想解析这个 responseTEXT 来获取我需要的数据。但是 querySelector 不适用于字符串。是否有任何 Javascript 库可以让我这样做？或者一些会设置responseXML数据的库？

请帮忙。并提前感谢。:(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:11:30.477

如果没有 responseXML，则意味着您的 XML 无效。可能格式不正确或您缺少内容类型。

直接在浏览器中打开您要获取的 url，它通常会将您指向错误。

# c - 矩阵生成器 - C 中的分段错误

> ID：15789571
> 
> 赞同：1
> 
> 时间：2013-04-03T14:03:16.697
> 
> 标签：c, matrix, segmentation-fault

我有以下用于生成对称矩阵的函数：

```
void genMatrix(int n, double A[n][n])
 {

int i,j;
int count=0;
for (i=0; i<n; i++)
for (j=i+1; j<n; j++)
    {
    count++;
    A[i][j]=count;
    A[j][i]=count;
    }

 } 
```

当我使用这些参数调用函数时：

```
int n = 10000;
double A[n][n];
genMatrix(n,A); 
```

它给了我一个分段错误，我不明白为什么。我也尝试只用 1 个值填充矩阵，但它不会改变任何东西。可能是什么问题呢？对于较小的 n 值，例如 1000，它可以正常工作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T14:05:22.693

您可能只是在这里遇到堆栈溢出。数组太大，无法放入程序的堆栈地址空间。

如果你在堆上分配数组，你应该没问题，假设你的机器有足够的内存。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:07:13.820

您尝试在堆栈上创建一个 400 兆字节的数组？那几乎行不通。大多数现代操作系统都有 1 到 4 兆字节的堆栈。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:05:24.927

这会在函数的“堆栈”上分配一个非常大的矩阵。这不是一个好主意，你有一个“stackoverflow”。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:07:05.240

好吧，您的数组似乎太大而无法放入程序的堆栈地址空间。因为它的大小是

> 381.47 MB

它太大了，例如 windows 只给你

> 1MB

默认堆栈

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T14:08:18.360

您正在尝试创建一个大小为 800MB（假设`double`为 64 位）的自动变量。在大多数平台上，自动变量是在堆栈上创建的，该堆栈的总大小通常只有几兆字节。分配太大的东西会导致堆栈溢出和（如果幸运的话）分段错误。最好动态分配大对象。

# html - 在“ul”中垂直对齐“li”中间

> ID：15789572
> 
> 赞同：4
> 
> 时间：2013-04-03T14:03:21.860
> 
> 标签：html, css, html-lists

我有一个简单的无序列表，如下所示：

```
<ul class="flavours">   
     <li>Chocolate</li>
     <li>Caramel</li>
     <li>Watermelon</li>
</ul> 
```

`<ul class="flavours">`有一个`min-height`，`200px`并且随着更多`<li>`元素通过 jQuery ui 拖放库添加到列表中而增长。

当列表中只有一两个`<li>`元素时，如何将它们垂直对齐在整个`<ul>`. 因此，当高度为时`200px`，项目将在水平和垂直方向上处于死点。目前他们只是定位在中心顶部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:14:22.763

如果您想要跨浏览器支持，尤其是对于 IE 和旧版浏览器 - 除非您愿意使用 JavaScript 或表格，否则垂直居中往往是一件棘手的事情。所有常见的浏览器都支持表格单元格内的垂直居中，因此一种选择是忘记将`<li>`元素在 中居中`<ul>`，而是在其中创建一个`table`with`height: 100%`和一个单元格， with `vertical-align: middle`。这不是一个流行的答案，但有时使用表格是最实用的，正如在[这个 SO response](https://stackoverflow.com/questions/526035/html-css-positioning-float-bottom/9090522#9090522)中充分论证的那样。

如果您不想使用表格并且无法使用`display:table-cell`浏览器支持，那么您可能需要使用 JavaScript。同样，我会尝试将 ul 放在容器中，而不是`li`. `ul`方法一般是找到容器的高度，找到 的高度`ul`，取差值，将其切成两半，然后将 的`top`或 的`margin-top`值设置`ul`为该值，这取决于您是否要使用`absolute`定位。

如果不查看页面中列表的上下文，很难给出确切的最佳解决方案。

这是一个使用`absolute`定位和 JavaScript[的小提琴。](http://jsfiddle.net/UKX9B/)在这种情况下使用`margin-top`和默认值`position`是棘手的，因为外部 div 的边距折叠，但如果你可以使用它，那么你可以使用它`margin: 0 auto`来做水平居中，这很好，因为你可以忽略宽度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-03T14:18:47.223

Flexbox 可以这样做：

[http://jsfiddle.net/vUSmV/2/](http://jsfiddle.net/vUSmV/2/)

```
.flavours {
  min-height: 10em;
  display: -webkit-box;
  display: -moz-box;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  display: flex;
  -webkit-box-orient: vertical;
  -moz-box-orient: vertical;
  -webkit-box-direction: normal;
  -moz-box-direction: normal;
  -webkit-flex-direction: column;
  -ms-flex-direction: column;
  flex-direction: column;
  -webkit-box-pack: center;
  -moz-box-pack: center;
  -webkit-flex-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
  -webkit-flex-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;

} 
```

将 Flexbox 与可换行的内联列表项一起使用（请注意，换行会降低浏览器对 Chrome、Opera 和 IE10 的支持）：

[http://jsfiddle.net/vUSmV/4/](http://jsfiddle.net/vUSmV/4/)

```
.flavours {
  min-height: 10em;
  border: 1px solid;
  display: -webkit-flexbox;
  display: -ms-flexbox;
  display: -webkit-flex;
  -webkit-flex-wrap: wrap;
  -ms-flex-wrap: wrap;
  flex-wrap: wrap;
  -webkit-flex-pack: center;
  -ms-flex-pack: center;
  -webkit-justify-content: center;
  justify-content: center;
  -webkit-flex-line-pack: center;
  -ms-flex-line-pack: center;
  -webkit-align-content: center;
  align-content: center;
  -webkit-flex-align: center;
  -ms-flex-align: center;
  -webkit-align-items: center;
  align-items: center;
}
@supports (flex-wrap: wrap) {
  .flavours {
    display: flex;
  }
}

.flavours li {
    margin: .5em 1em;
} 
```

或者您可以将列表转换为表格单元格元素：

[http://jsfiddle.net/vUSmV/1/](http://jsfiddle.net/vUSmV/1/)

```
.flavours {
  min-height: 10em;
  display: table-cell;
  vertical-align: middle;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T14:17:55.907

我个人会将所有内容都集中在父级中...[可以在此处找到](http://jsfiddle.net/4qh73/)`div`工作的JSFiddle 。

**HTML：**

```
<div>
<ul class="flavours">   
 <li>Chocolate</li>
 <li>Caramel</li>
 <li>Watermelon</li>
</ul>
</div> 
```

**CSS：**

```
div{
height: 200px;
display: table-cell;
vertical-align: middle;
border: 1px solid black;
} 
```

`ul`或者，如果您愿意，也可以添加相同的样式。

# oracle - 如何检查列值是否在 PL/SQL BEFORE UPDATE 触发器中显式指定？

> ID：15789580
> 
> 赞同：4
> 
> 时间：2013-04-03T14:03:37.367
> 
> 标签：oracle, plsql, triggers

有没有办法知道在 PL/SQL`BEFORE UPDATE`触发器中显式更新了哪些列？

例如：我只想`:new.last_modified_by := USER`在`UPDATE`语句没有明确指定此列的值时设置。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T14:11:08.507

使用`UPDATING`功能：

```
if updating('LAST_MODIFIED_BY') then 
...
end if; 
```

更多详细信息在手册中： http: [//docs.oracle.com/cd/E11882_01/appdev.112/e25519/triggers.htm#BCFIDDBB](http://docs.oracle.com/cd/E11882_01/appdev.112/e25519/triggers.htm#BCFIDDBB)

# c# - 在 LIKE 语句中插入参数化值

> ID：15789584
> 
> 赞同：-2
> 
> 时间：2013-04-03T14:03:42.540
> 
> 标签：c#, mysql, .net, mono

我有一个方法可以更新mysql数据库中的一条记录，当简单地使用如下字符串时，查询效果很好：

```
string query = @"UPDATE Batches SET `State`=@State, `PostDocCount`=@PostDocCount WHERE `FilePath` LIKE '%MYDIRECTORYSTRING%'"; 
```

尽管如果我将 MYDIRECTORYSTRING 替换为参数化查询，例如：

```
string query = @"UPDATE Batches SET `State`=@State, `PostDocCount`=@PostDocCount WHERE `FilePath` LIKE '%@dirName%'"; 
```

它不再起作用（记录未更新）-我也确认了@dirName == MYDIRECTORYSTRING。所以我被引导相信这是一个语法问题？（虽然这两个查询似乎都执行正常..）

以下是我的完整方法：

```
 public void UpdateBatch(string postDocCount, string dirName, string state)
        {
        string query = @"UPDATE Batches SET `State`=@State, `PostDocCount`=@PostDocCount WHERE `FilePath` LIKE '%@dirName%'";

        //Open connection
        if (this.OpenConnection() == true)
        {
            //create mysql command
            MySqlCommand cmd = new MySqlCommand();
            //Assign the query using CommandText
            cmd.CommandText = query;
            //Assign the connection using Connection
            cmd.Connection = connection;

            // Parametized queries 
            cmd.Parameters.AddWithValue("@PostDocCount", postDocCount);
            cmd.Parameters.AddWithValue("@State", state);
            cmd.Parameters.AddWithValue("@dirName", dirName);

            //Execute query
            cmd.ExecuteNonQuery();

            //close connection
            this.CloseConnection();
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:06:49.037

在将`dirName`变量分配给`"@dirName"`参数之前，您应该合并 % 通配符

```
dirName = "%" + dirName + "%"; 
```

然后将您的 sql 文本更改为

```
string query = @"UPDATE Batches SET `State`=@State, `PostDocCount`=@PostDocCount " + 
                "WHERE `FilePath` LIKE @dirName"; 
```

# cordova - 缩小 Sencha Touch 2 应用程序代码？

> ID：15789585
> 
> 赞同：0
> 
> 时间：2013-04-03T14:03:43.727
> 
> 标签：cordova, extjs, phonegap-build

我已经构建了一个 Phonegap android Sencha Touch 2 应用程序。如何缩小 Sencha 代码？我需要使用 Sencha sdk 工具吗？如何获得所有 js 文件都缩小的应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T12:53:33.693

sencha sdk 工具很旧，不要使用它们。对于 sencha touch 2.x，您可以使用 sencha cmd。该工具允许使用自定义 js（如 phonegap 东西）缩小您的 sencha touch 应用程序（也支持自定义 css）。要缩小您必须运行生产构建命令。在这一步之后，您可以构建您的本机应用程序。

# mysql - 排序时优先考虑mysql中的某些行

> ID：15789588
> 
> 赞同：-1
> 
> 时间：2013-04-03T14:03:53.190
> 
> 标签：mysql

我有一个“交易”表，其中包含“id”、“name”、“created_at”......列。我有一个“speciallisting_deal”数据透视表，它保持特殊列表和交易之间的关系。它的列是“id”、“deal_id”、“speciallisting_id”...。

就我而言，speciallisting_id 是肯定的，比如说 10。根据某些标准（如按 created_at 排序等）从“交易”表中获取结果时，我想优先考虑（我的意思是我想在顶部看到它们结果）到“交易”中的行，其 id 在此“（SELECT deal_id FROM speciallisting_deal WHERE speciallisting_id = 10）”或等效项中。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:06:02.320

您可以使用以下`case`语句`order by`：

```
order by (case when specialist_id = 10 then 0 else 1 end),
         created_at desc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:09:59.750

一个简单的左连接可能就足够了。不过，最好提供您自己尝试做的事情。

```
SELECT

    d.id,
    d.name,
    d.created_at,
    -- Find out if this is considered "special"
    IF(sd.id IS NULL,0,1) AS isSpecial

FROM deals d

-- Left join the speciallistings onto this
LEFT JOIN speciallisting_deal sd
    ON sd.deal_id = d.id
    -- You don't have to specify a specific ID if you just want to get all that are special
    AND sd.speciallisting_id = 10
    -- You could do multiple speciallisting_id's using IN
    -- AND sd.speciallisting_id IN (8,2,10,314)

ORDER BY 
    isSpecial DESC, 
    d.created_at DESC 
```

# xml - 在 cellForRowAtIndexPath 中加载太多数据导致滚动缓慢？

> ID：15789589
> 
> 赞同：0
> 
> 时间：2013-04-03T14:03:54.690
> 
> 标签：xml, xcode, parsing, scroll, tableview

我有以下问题：我的 tableview 滚动比平时慢一点。这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    televisionCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // creating plist with channel logos
    NSDictionary *picturesDictionary = [NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Photos" ofType:@"plist"]];
    NSArray *imageArray = [picturesDictionary objectForKey:@"PhotosArray"];

    // creating plist with channel names
    NSDictionary *namesDictionary = [NSDictionary dictionaryWithContentsOfFile:[[NSBundle mainBundle] pathForResource:@"Names" ofType:@"plist"]];
    NSArray *namesArray = [namesDictionary objectForKey:@"NamesArray"];

    if (cell == nil)
    {
        NSArray *objects = [[NSBundle mainBundle] loadNibNamed:@"televisionCell" owner:self options:nil];
        for (id currentObject in objects)
        {
            if ([currentObject isKindOfClass:[UITableViewCell class]])
            {
                if (indexPath.row % 2)
                {
                    cell = (televisionCell *)currentObject;
                    cell.imageView.image = [UIImage imageNamed:[imageArray objectAtIndex:indexPath.row]];
                    cell.tvLabel.text = [namesArray objectAtIndex:indexPath.row];
                    cell.backgroundView.image = [UIImage imageNamed:@"lightbackgr.png"];
                    break;
                }
                else
                {
                    cell = (televisionCell *)currentObject;
                    cell.imageView.image = [UIImage imageNamed:[imageArray objectAtIndex:indexPath.row]];
                    cell.tvLabel.text = [namesArray objectAtIndex:indexPath.row];
                    cell.backgroundView.image = [UIImage imageNamed:@"background-cell.png"];
                    break;
                }
            }
        }
    }
    // getting the channel list array
    BNRAppDelegate *appDelegate = (BNRAppDelegate *)[[UIApplication sharedApplication] delegate];
    NSArray *channelArray = [appDelegate channelsArray];
    NSString *date = [appDelegate str];

    // getting the current time
    NSDateFormatter *hourFormatter = [[NSDateFormatter alloc] init];
    [hourFormatter setDateFormat:@"HH.mm"];
    NSDate *hour = [NSDate date];
    NSString *currHour = [hourFormatter stringFromDate:hour];
    float value = [currHour floatValue];

    // parse different file for every channel
    NSString *dayToString = [NSString stringWithFormat:@"http://pik.bg/TV/%@/%@.xml", [channelArray objectAtIndex:indexPath.row], date];
    NSURL *url = [NSURL URLWithString:dayToString];
    NSData *webData = [NSData dataWithContentsOfURL:url];

    // getting every <chas> element from the xml file
    NSString *xPathQueryBegin = @"//elem/chas";
    TFHpple *parserBegin = [TFHpple hppleWithXMLData:webData];
    NSArray *arrayBegin = [parserBegin searchWithXPathQuery:xPathQueryBegin];
    NSMutableArray *newArrayBegin = [[NSMutableArray alloc] initWithCapacity:0];
    for (TFHppleElement *element in arrayBegin)
    {
        Listing *begin = [[Listing alloc] init];
        begin.beginHour = [[element firstChild] content];
        if (begin.beginHour != NULL)
        {
            [newArrayBegin addObject:begin.beginHour];
        }
    }

  /*          // converting every object in the array to float number
            NSMutableArray *floatArrayBegin=[NSMutableArray new];
            for(NSString *string in newArrayBegin)
            {
                NSNumber *ourNumber = [[NSNumber alloc] initWithFloat: [string floatValue]];
                [floatArrayBegin addObject:ourNumber];
            }
   */

    // getting every <endd> element from the xml file
    NSString *xPathQueryEnd = @"//elem/endd";
    TFHpple *parserEnd = [TFHpple hppleWithXMLData:webData];
    NSArray *arrayEnd = [parserEnd searchWithXPathQuery:xPathQueryEnd];
    NSMutableArray *newArrayEnd = [[NSMutableArray alloc] initWithCapacity:0];
    for (TFHppleElement *element in arrayEnd)
    {
        Listing *end = [[Listing alloc] init];
        end.endHour = [[element firstChild] content];
        if (end.endHour != NULL)
        {
            [newArrayEnd addObject:end.endHour];
        }
    }

   /*         // converting every object in the array to float number
            NSMutableArray *floatArrayEnd = [NSMutableArray new];
            for(NSString *string in newArrayEnd)
            {
                NSNumber * ourNumber = [[NSNumber alloc] initWithFloat: [string floatValue]];
                [floatArrayEnd addObject:ourNumber];
            }
    */

    // gettin every <title> element from the xml file
    NSString *xPathQueryTitle = @"//elem/title";
    TFHpple *parserTitle = [TFHpple hppleWithXMLData:webData];
    NSArray *arrayTitle = [parserTitle searchWithXPathQuery:xPathQueryTitle];
    NSMutableArray *newArrayTitle = [[NSMutableArray alloc] initWithCapacity:0];
    for (TFHppleElement *element in arrayTitle)
    {
        Listing *title = [[Listing alloc] init];
        title.showTitle = [[element firstChild] content];
        if (title.showTitle != NULL)
        {
            [newArrayTitle addObject:title.showTitle];
        }
    }

    // getting the currently playing show on the channel
    for (int i = 0; i < [newArrayTitle count] - 1; i++)
    {
        if (([[newArrayBegin objectAtIndex:i+1] floatValue] < value) && (value < [[newArrayEnd objectAtIndex:i+2] floatValue]))
        {
            cell.currentlyPlaying.text = [newArrayTitle objectAtIndex:i+1];
        }
    }
    return cell;
} 
```

用两个词 - 它是电视指南应用程序，每个单元格都有频道标志、频道名称和当前播放节目的两个标签。我将图像存储到我的项目中并从 plist 加载它们。当前播放节目的数据是从 11 个 xml 文件中解析出来的。我很确定有更好的方法来执行此操作，但我是新手，我不知道如何提高滚动速度。我猜想cellForRowAtIndexPath方法中的操作太多了，但我不知道其他方法。有任何想法吗？提前致谢！

这是我的应用程序中的一个单元格： ![在此处输入图像描述](https://i.stack.imgur.com/Jix5B.png)

# python - Pandas - 查找多索引级别之一的最小值的行

> ID：15789600
> 
> 赞同：0
> 
> 时间：2013-04-03T14:04:31.820
> 
> 标签：python, pandas, dataframe

所以，我有一个带有多索引的 DataFrame，如下所示：

```
 info1 info2       info3
abc-8182 2012-05-08 10:00:00       1   6.0     "yeah!"
         2012-05-08 10:01:00       2  25.0        ":("
pli-9230 2012-05-08 11:00:00       1  30.0  "see yah!"    
         2012-05-08 11:15:00       1  30.0  "see yah!"    

... 
```

索引是一个 id 和一个日期时间，表示何时记录有关该 id 的信息。我们需要做的是为每个 id 找到最早的记录。我们从 dataframe 方法中尝试了很多选项，但最终我们通过循环遍历 DataFrame 来做到这一点：

```
df = pandas.read_csv(...)
empty = pandas.DataFrame()
ids = df.index.get_level_values(0)
for id in ids:
    minDate  = df.xs(id).index.min()
    row = df.xs(id).xs(minDate)
    mindf = pandas.DataFrame(row).transpose()
    mindf.index = pandas.MultiIndex.from_tuples([(id, mindate)])
    empty = empty.append(mindf)

print empty.groupby(lambda x : x).first() 
```

这给了我：

```
 x0  x1        x2
('abc-8182', <Timestamp: 2012-05-08 10:00:00>)  1   6     yeah!
('pli-9230', <Timestamp: 2012-05-08 11:00:00>)  1  30  see yah! 
```

我觉得必须有一个简单的、“熊猫惯用的”、非常直接的方法来做到这一点，而无需像这样循环数据框。有没有？:)

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:25:15.967

要获取每个组中的第一项，您可以执行以下操作：

```
df.reset_index(level=1).groupby(level=0).first() 
```

这将在按 groupby 对组进行分组之前将 datetime 字段删除到列中，因此它将保留在结果中的数据框中。

如果您需要确保保留最早的时间，您可以在调用之前进行排序`first`：

```
df.reset_index(level=1).sort_index(by="datetime").groupby(level=0).first() 
```

# iphone - iOS - 绘图效率（滑块更改更新）

> ID：15789603
> 
> 赞同：1
> 
> 时间：2013-04-03T14:04:39.873
> 
> 标签：iphone, ios, ipad, cgcontext

我正在为 iOS 上的图像着色。我正在使用滑块来选择颜色。

当我将滑块上的“更新事件”设置为连续时，被调用的函数会被调用很多（滑块从 0 到 1535），因此用户界面的响应速度不是很快。

有没有办法让下面的代码更有效率？我意识到每次调用该函数时我都会开始一个新的绘图上下文 - 我可以“保存”这个上下文并重新使用它吗？

提前致谢。

```
- (IBAction)bodyColourChanged:(UISlider *)sender {
// get the UIColor from self.colourArray
UIColor *color = [self.colourArray objectAtIndex:sender.value];

UIImage *myImage = [UIImage imageNamed:@"body.png"];

// Begin a new image context to draw the coloured image onto
UIGraphicsBeginImageContext(self.bodyView.image.size);

// Get a reference to the context we created
CGContextRef context = UIGraphicsGetCurrentContext();

// Set the fill colour
//[[UIColor colorWithRed:color.CGColor green:green blue:blue alpha:1.0] setFill];
[color setFill];

// translate/flip the graphics context (for transforming from CG* coords to UI* coords
CGContextTranslateCTM(context, 0, self.bodyView.image.size.height);
CGContextScaleCTM(context, 1.0, -1.0);

// set the blend mode and the original image
CGContextSetBlendMode(context, kCGBlendModeOverlay);
CGRect rect = CGRectMake(0, 0, self.bodyView.image.size.width, self.bodyView.image.size.height);
CGContextDrawImage(context, rect, myImage.CGImage);

// Set a mask that matches the shape of the image, then draw (colour burn) a coloured rectangle
CGContextClipToMask(context, rect, self.bodyView.image.CGImage);
CGContextAddRect(context, rect);
CGContextDrawPath(context, kCGPathFill);

// Generate a new UIImage from the graphics context we drew onto
UIImage *colouredImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();

self.bodyView.image = colouredImage;
} 
```

编辑：我正在着色的图像非常大。它是 1541 x 2000 像素，因为我希望能够在不损失质量的情况下放大。也许这就是问题所在。我会继续修补，看看我能找到什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:25:33.090

我不确定您的着色方法，但我通过在一小段延迟（即用户已暂停滑动）后仅调用性能密集型方法来解决与滑块类似的性能问题。

创建一些类变量/属性来保存与时间相关的对象：

```
@property (nonatomic, strong) NSDate *sliderValueChangedDate;
@property (nonatomic, strong) NSTimer *sliderValueChangedTimer; 
```

在您连接到`UISlider`事件的方法中：

```
- (IBAction)sliderValueChanged:(id)sender {
    // Save the time the slider was changed.
    self.sliderValueChangedDate = [NSDate date];
    // Start a timer if it's not already running.
    if (!self.sliderValueChangedTimer) {
        self.sliderValueChangedTimer = [NSTimer scheduledTimerWithTimeInterval:0.3 target:self selector:@selector(checkIfImageShouldBeColoured:) userInfo:nil repeats:YES];
    }
} 
```

然后在您的`checkIfImageShouldBeColoured:`方法中，您可以查看该值是否在此期间发生了变化：

```
- (void)checkIfImageShouldBeColoured:(NSTimer *)timer {
    // Get how long has been elapsed since the slider was last changed.
    NSTimeInterval elapsed = -[self.sliderValueChangedDate timeIntervalSinceNow];
    // If this is over our threshold, then perform the intensive method.
    if (elapsed > 0.3) {
        [self.sliderValueChangedTimer invalidate];
        self.sliderValueChangedTimer = nil;
        [self changeBodyColour];
    }
} 
```

# android - Android-如何获取图像大小

> ID：15789609
> 
> 赞同：-1
> 
> 时间：2013-04-03T14:04:56.957
> 
> 标签：android, android-layout, android-imageview, android-image

我有一个通过其 url 异步加载的图像。然后我根据加载的图像的大小设置布局宽度和高度。除了使用 BitmapFactoryOptions 从我的 ImageLoader 类中获取大小（如果是 BitmapOptions 或 BitmapFactoryOptions 的话，我忘记了）之外，我有没有办法得到这个。问题是在活动开始时，图像没有被渲染。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:19:04.373

我不太确定你的情况，但`BitmapFactory.Options.inJustDecodeBounds = true`即使没有渲染图像，它仍然可以通过设置来获取图像的大小。

# python - Python：这两个函数有什么问题？

> ID：15789611
> 
> 赞同：1
> 
> 时间：2013-04-03T14:04:59.153
> 
> 标签：python, function, python-3.x, call

我在编写的程序中遇到了一个问题。我已将问题缩小到这两个功能。当您调用函数 enterPasswords，输入无效数据（例如“a”），然后通过输入有效数据（例如“hello”）退出 passwordLength 函数时，就会出现问题。我在那里留下了一些打印语句来帮助您查看问题。我试过添加退货，但同样的问题仍然存在。

任何建议将不胜感激。如果你能告诉我为什么会出现问题，我相信我可以自己解决。谢谢。

```
 def passwordLength(password):
        if (len(password) < 4) or (len(password) > 15):
            print("Error from server: Your password must be at least four and at most fifteen characters long.")
            enterPasswords()

    def enterPasswords():
        password = input("Input password: ")
        passwordLength(password)
        print(password)
        password2 = input("Re-enter password: ")
        print(password, password2)

    enterPasswords() 
```

这是我的问题的图像（我想知道的是，为什么程序没有在我突出显示的地方结束，为什么会继续进行，为什么最后会打印“a”？）：

[http://i.imgur.com/LEXQFTO.png](http://i.imgur.com/LEXQFTO.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:09:03.343

看起来，如果用户首先输入了无效密码，它会重复`enterPasswords`- 但是，如果用户成功完成此操作，它会回到最初的`enterPasswords`. 相反，尝试

```
def passwordLength(password):
    if (len(password) < 4) or (len(password) > 15):
        print("Error from server: Your password must be at least four and at most fifteen characters long.")
        return False
    return True

def enterPasswords():
    password = input("Input password: ")
    while not passwordLength(password):
        password = input("Input password: ")

    print(password)
    password2 = input("Re-enter password: ")
    print(password, password2) 
```

这将继续要求用户重新输入第一个密码，直到它有效，然后才会要求用户确认。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:13:54.333

密码变量 in 与变量 in`passwordLength()`完全无关`enterPasswords()`。行为也可能与您预期的不同。尝试这样的事情：

```
def passwordLength(pw):
    return 4 <= len(pw) <=15

def getPw():
    return input("Enter password: ")

def enterPasswords():
    pw = getPw()
    while not passwordLength(pw):
        print("Incorrect password length.")
        pw = getPw()

    # ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:31:32.397

您的函数以一种糟糕的方式相互调用。如果您尝试逐行遵循您的算法（使用您提到的“a”和“hello”的情况），您可能会看到问题。

这是一个解决方案：

```
def passwordLength(password):
    if (len(password) < 4) or (len(password) > 15):
        print("Error from server: Your password must be at least four and at most fifteen characters long.")
        return False
    else : return True    

def enterPasswords(): 
    passwordOK = False
    while not passwordOK :
        password = input("Input password: ")
        passwordOK = passwordLength(password)
    print(password)
    password2 = input("Re-enter password: ")
    print(password, password2)

enterPasswords() 
```

# python - python 2.7.3 未在 apache 2.2 上执行

> ID：15789615
> 
> 赞同：0
> 
> 时间：2013-04-03T14:05:13.890
> 
> 标签：python, apache, localhost

使用 Apache2.2 Python 2.7.3

在 httpd.conf 中使用 LoadModule wsgi_module modules/mod_wsgi-win32-ap22py27-3.3.so

python完美执行，但不是在本地主机上

在 localhost 中，未处理以下脚本，error.log 中也未出现任何错误

还有什么要检查的？

使用测试脚本

```
#!/usr/bin/python2.7.3

# enable debugging
import cgitb
cgitb.enable()

print "Content-Type: text/plain\r\n\r\n"
print

print "Hello World!" 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:16:28.690

mod_wsgi 是一个用于运行[WSGI](http://en.wikipedia.org/wiki/Web_Server_Gateway_Interface)应用程序的 Apache 模块。您提供的示例脚本不是 WSGI 应用程序，它只是普通的 CGI 脚本。

WSGI 中的 Hello World 如下所示：

```
def application(environ, start_response):
    start_response('200 OK', [('Content-Type', 'text/plain')])
    yield 'Hello World\n' 
```

另一方面，如果你想使用老式的 CGI，你应该使用[Apache 的 mod_cgi](http://httpd.apache.org/docs/current/howto/cgi.html)。请注意，这是一种非常过时且低效的服务器端编程方式，因此我不推荐它用于任何严重的事情。

# java - 关于SortedSet接口，java教程

> ID：15789616
> 
> 赞同：4
> 
> 时间：2013-04-03T14:05:14.353
> 
> 标签：java, list, sortedset

阅读[本](http://docs.oracle.com/javase/tutorial/collections/interfaces/sorted-set.html)Oracle 教程时，我发现了 List 的范围视图操作与 SortedSet 接口提供的操作之间的区别的解释。

这里有点感兴趣：

> range-view 操作有点类似于 List 接口提供的操作，但有一个很大的不同。即使直接修改支持排序集，排序集的范围视图仍然有效。**这是可行的，因为有序集合的范围视图的端点是元素空间中的绝对点，而不是支持集合中的特定元素**，就像列表一样。

有没有人能够用换句话说来解释粗体部分？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T14:14:34.353

假设您有一个列表和一个集合，它们都包含整数`11`、和。`13``15``17`

你可以写`set.subSet(12, 15)`来构造一个视图，然后插入`12`到原始集合中。如果这样做，`12`将出现在视图中。

列表不可能做到这一点。即使您可以构造一个视图，当您在结构上修改原始列表（例如插入一个元素）时，该视图也会变得无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:21:23.990

简短的回答是，有序集合直接由集合支持，这与您使用的列表不同，本质上是指针。对基础列表的更改会更改指针（索引），从而使长时间保持列表视图成为问题。由于集合已排序并且它是一个集合，因此您指向范围边界处的特定对象。这意味着如果在您持有视图时在范围内发生插入或删除，引用不会变为无效。

从技术上讲，在这种情况下范围的定义：

范围，有时称为区间，是特定域的凸（连续）部分。凸性意味着对于任何 a <= b <= c，range.contains(a) && range.contains(c) 意味着 range.contains(b)。范围可以扩展到无穷大；例如，范围“x > 3”包含任意大的值——或者可能是有限约束的，例如“2 <= x < 5”。

# javascript - Javascript：从字节数组加载图像

> ID：15789618
> 
> 赞同：0
> 
> 时间：2013-04-03T14:05:17.787
> 
> 标签：javascript, jquery, image, png, jpeg

在 Javascript 中，您有 ByteArray 类型和一些关于它的视图，如下所述： [https ://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays](https://developer.mozilla.org/en-US/docs/JavaScript/Typed_arrays)

是否可以将图像数据存储在这样的字节中，如果可以，我该如何显示这样的图像？png还是jpg？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-11T21:41:58.143

是的，您可以使用类型化数组存储图像。

我不确定你到底想要什么。如果您想从 ByteArray 创建 HTMLImageElement，您可以执行与[此处](https://stackoverflow.com/questions/14162945/winrt-javascript-image-from-byte-array)和[此处](https://stackoverflow.com/questions/3312939/convert-picturestream-to-html5-canvas)引用的类似的操作。

如果您想从图像中获取字节，那将更加棘手。您可以将 ImageElement 绘制到 HTML 画布，然后他们使用[toDataURL](https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement)获取 URI 。

我只是尝试使用画布获取数据并且它有效。

```
var myCanvas = document.getElementById('my_canvas_id');
var ctx = myCanvas.getContext('2d');
var img = new Image;
img.onload = function(){
    myCanvas.width = img.width;
    myCanvas.height = img.height;
    ctx.drawImage(img,0,0); // Or at whatever offset you like
    alert(myCanvas.toDataURL());
};
img.src = "logo4w.png"; 
```

虽然，如果您在画布上绘制的图像来自网站域之外，则 toDataURL() 方法不允许您执行此操作。

# javascript - phonegap android重定向到url不适用于三星galaxy

> ID：15789619
> 
> 赞同：0
> 
> 时间：2013-04-03T14:05:18.810
> 
> 标签：javascript, android, cordova, jquery-mobile, samsung-mobile

我在使用带有三星 Galaxy S3 手机的 phonegap 构建时遇到问题。基本上我试图设置一个cookie并使用javascript/jquery重定向到不同的页面。

不幸的是，在三星手机上它只是恢复到主页。

```
$.cookie('uname', identifier, {expires:7});
window.location="secure.html"; 
```

此代码适用于其他品牌的 android 手机 - 三星有什么“特别”之处吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:14:24.107

尝试使用 window.location.replace("secure.html") 更改页面。

# javascript - 如何消除两个 jQuery 插件之间的冲突？

> ID：15789623
> 
> 赞同：2
> 
> 时间：2013-04-03T14:05:25.860
> 
> 标签：javascript, jquery, html, css

我正在使用 SpryTabbedAssets 插件和垂直滑块选项卡插件。当我单独运行插件时，它们工作正常，但是当我同时使用这两个插件时，我遇到了问题。垂直滑块选项卡未显示当我将光标悬停在我使用垂直滑块选项卡的选项卡之一上时应该显示的内容。供您参考，我正在发送错误的屏幕截图.. ![在此处输入图像描述](https://i.stack.imgur.com/H8ScX.png)

```
<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
<meta name="viewport" content="width=device-width" />
<title>Home</title>

<link rel="icon" type="image/x-icon" href="res/favicon.png" />
<link rel="stylesheet" type="text/css" href="styles.css" />
<!--<link rel="stylesheet" type="text/css" media="only screen and (-webkit-device-pixel-ratio: 0.75)" href="ldpi.css" />-->
<link rel="stylesheet" type="text/css" media="only screen and (max-device-width:480px)" href="mdpi.css" />
<!--<link rel="stylesheet" type="text/css" media="only screen and (-webkit-device-pixel-ratio: 1.5)" href="hdpi.css" />
<link rel="stylesheet" type="text/css" media="only screen and (-webkit-device-pixel-ratio: 2.0)" href="retina.css" />
<link rel="stylesheet" type="text/css" media="screen and (max-width:980px)" href="../Example/Slideshow/screen-style.css" />-->
<script type="text/javascript" src="js/jQuery-1.4.2.js"></script>
<script type="text/javascript" src="js/jquery.easing.min.js"></script>
<script type="text/javascript" src="js/jquery.lavalamp.min.js"></script>
<script type="text/javascript" src="js/jquery.featureList-1.0.0.js"></script>
<script src="SpryAssets/SpryTabbedPanels.js" type="text/javascript"></script>
<script type="text/javascript" src="js/verticaltabs.pack.js"></script> <!--http://dean.edwards.name/packer/-->
<link rel="stylesheet" href="verticaltabs.css" />
<link href="SpryAssets/SpryTabbedPanels.css" rel="stylesheet" type="text/css"></link>

<script type="text/javascript">
    $(document).ready(function(){
        $("#textExample").verticaltabs({speed: 500,slideShow: false,activeIndex: 2});
    });
</script>

<script type="text/javascript">
    $(document).ready(function(){
            $('#a1').css("color", "red");
            $('#a2').css("color", "black");
            $('#a3').css("color", "black");
            $('#a4').css("color", "black");
            $('#a1').css("background-color", "pink");
            $('#a2').css("background-color", "pink");
            $('#a3').css("background-color", "pink");
            $('#a4').css("background-color", "pink");
            $('.verticalslider_contents li').css("background-color", "pink");

    });

    $(document).ready(function(){
        $("#a1").click(function(){
            $('#a1').css("color", "red");
            $('#a2').css("color", "black");
            $('#a3').css("color", "black");
            $('#a4').css("color", "black");
            $('#a1').css("background-color", "pink");
            $('#a2').css("background-color", "pink");
            $('#a3').css("background-color", "pink");
            $('#a4').css("background-color", "pink");
            $('.verticalslider_contents li').css("background-color", "pink");
        });
    });

    $(document).ready(function(){
        $("#a2").click(function(){
            $('#a1').css("color", "black");
            $('#a2').css("color", "red");
            $('#a3').css("color", "black");
            $('#a4').css("color", "black");
            $('#a1').css("background-color", "skyblue");
            $('#a2').css("background-color", "skyblue");
            $('#a3').css("background-color", "skyblue");
            $('#a4').css("background-color", "skyblue");
            $('.verticalslider_contents li').css("background-color", "skyblue");
        });
    });

    $(document).ready(function(){
            $("#a3").click(function(){
            $('#a1').css("color", "black");
            $('#a2').css("color", "black");
            $('#a3').css("color", "red");
            $('#a4').css("color", "black");
            $('#a1').css("background-color", "yellow");
            $('#a2').css("background-color", "yellow");
            $('#a3').css("background-color", "yellow");
            $('#a4').css("background-color", "yellow");
            $('.verticalslider_contents li').css("background-color", "yellow");
        });
    });
    $(document).ready(function(){
        $("#a4").click(function(){
            $('#a1').css("color", "black");
            $('#a2').css("color", "black");
            $('#a3').css("color", "black");
            $('#a4').css("color", "red");
            $('#a1').css("background-color", "Aquamarine ");
            $('#a2').css("background-color", "Aquamarine ");
            $('#a3').css("background-color", "Aquamarine ");
            $('#a4').css("background-color", "Aquamarine ");
            $('.verticalslider_contents li').css("background-color", "Aquamarine ");
        });
    });
</script>

<script type="text/javascript">
$(function() {
    $("#1").lavaLamp({
        fx: "backout", 
        speed: 900,
        click: function(event, menuItem) {
            return false;
        }
    });
});
</script>

<script type="text/javascript">
$(document).ready(function(){
    $("#tab1").hover(function(){
        var height = 1000;
        $('#main-content').height(height);
    });
    $("#tab2").hover(function(){
        var height = 1400;
        $('#main-content').height(height);
    });
    $("#tab3").hover(function(){
        var height = 1450;
        $('#main-content').height(height);
    });
});
</script>

<script type="text/javascript">
   /* $('.feature').live('mouseover',function() {

        alert('hi');

        });
    */
    $(document).ready(function(){
        $(".feature").bind('mouseover',function(){ 
        $('.feature strong').attr('class', '');
        $("#"+$(this).attr('id')+" strong" ).attr('class', 'active');
        $('#feature_in').fadeOut(160);
        setTimeout("$('#feature_in').html('"+$(this).html()+"').fadeIn(160);",160);
        if($(this).attr('id')=='1')
            var pt = -20;
        else
            var pt = ($(this).attr('id')-1) * 43 + 3;
        $("#feature_out").stop().animate({marginTop:pt+'px'},{duration:320});
        });
    });
</script>

<script type="text/javascript">
function showUser(str) {

    var filter = /^([a-zA-Z0-9_\.\-])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/;

    if (!filter.test(str)) {
    $("#result").text('Please provide a valid Email Address');
    str.focus;
    return false;
    }
}
function ValidateEmail()    
{
    var emailID = document.frmmailinglist.txtEmail
    if ((emailID.value==null)||(emailID.value=="")) 
    {
            $("#result").text('Please enter EmailID');
            emailID.focus()
            return false
    }
    else if (showUser(emailID.value)==false){
        emailID.value=""
        emailID.focus()
        return false
    }
    return true
}
</script>
<script type="text/javascript">
function scriptCall() {
    if((screen.width<480) && (screen.width>320)) {

    }
}

</script>
</head>

<body style="font-family:Centaur;"; onLoad="scriptCall()">

<div id="head-section">
    <div id="header">
       <!--  <div id="title">
           MyTransAlert
       </div>-->
       <!-- <div id="logo">
        <a href="index.html"><img src="res/logo.png" width="150" height="150" alt="MTA" /></a> 
       </div> -->
       <div id="navbar">
          <ul class="lavaLampWithImage" id="1">
           <li><a href="index.html"><img class="mm" src="res/1.png" width="300" height="60" alt="home" onClick="location.href='index.html'"/></a></li> 
           <li class="current"><a href="index.html"><img class="mm" src="res/Home-n.png" width="120" height="60" alt="home" onClick="location.href='index.html'"/></a></li>
            <li><a href="http://eywaz.com/sit2/MTA-2Website21-02/mta"><img class="mm" src="res/blog.png" width="120" height="60" alt="contact us" onClick="location.href='http://eywaz.com/sit2/MTA-2Website21-02/mta'"/></a></li>
          <li><a href="help.html"><img class="mm" src="res/Help-n.png" width="120" height="60" alt="about us" onClick="location.href='help.html'"/></a></li>
           <li><a href="contactus.html"><img class="mm" src="res/Contact_us-n.png" width="120" height="60" alt="contact us" onClick="location.href='contactus.html'"/></a></li>

          </ul>
        </div>

        <div class="clear"></div>
    </div>
</div>
<div class="clear"></div>
<div id="main-content"> 
    <br />
    <!--  <img src="res/train.png" width="100%" height="670"></img> -->
    <!--  <div id="train" style="background-image:url('res/train.png');background-repeat:no-repeat;background-position:center top;"> -->
    <div id="slideshow">
        <ul class="slides">
            <li class="sl"><img class="ss" src="image/a.png" width="191" height="278" alt="Splash Screen" /></li>
            <li class="sl"><img class="ss" src="image/b.png" width="191" height="278" alt="Select Route" /></li>
            <li class="sl"><img class="ss" src="image/c.png" width="191" height="278" alt="New Schedule" /></li>
            <li class="sl"><img class="ss" src="image/d.png" width="191" height="278" alt="Created Routes" /></li>
            <li class="sl"><img class="ss" src="image/e.png" width="191" height="278" alt="CR" /></li>
        </ul>
        <span class="arrow next"></span>
        <span class="arrow previous"></span>
    </div>

    <p id="text"><a href="http://itunes.apple.com/ae/app/mytransalert/id542757147?mt=8&ls=1"><img id="appstore" src="res/download.png" width="300" height="100" /></a><br /><br />
    <p id="cont">What is myTransAlert?</p>
    <p id="cont2">A free mobile application designed to ease your daily commute. This app eliminates your time wasted waiting for a train or bus. With myTransAlert, know exactly when the next train or bus is arriving to your stop with real-time status updates and delays.</p>
    <p id="cont">Its convenient!</p>
    <p id="cont2">No need to open the app, visit a website or carry paper schedules. myTransAlert does all the work for you.</p>
    <p id="cont">It's efficient!</p>
    <p id="cont2">myTansAlert saves commuting time, and helps you get to your destination as quickly as possible.</b></p>
    <p id="cont""><b>Your Transit Schedule. Real-Time Status. Personalized.</b></p>
    <!--  </div> -->
    <div class="clear"></div>
    <!--  <div class="split"></div> -->
    <wbr>
    <div id="list">

    <!--<div id="feature" style="font-size:30px">
    <a href="#" style="padding-left:50px; padding-top:400px;"><b>Features</b></a>
    <a href="#" ><b>Transit Authorities</b></a>
    </div> -->
    <div id="TabbedPanels1" class="TabbedPanels">
           <ul class="TabbedPanelsTabGroup">
             <li id="tab1" class="TabbedPanelsTab" tabindex="0" style="font-size:20px; padding-top:12px">Features </li>
             <li id="tab2" class="TabbedPanelsTab" tabindex="0" style="z-index:999; font-size:20px;  padding-top:12px">How to Use myTransAlert</li>
             <li id="tab3" class="TabbedPanelsTab" tabindex="0" style="font-size:20px; padding-top:12px">Transit Authorities</li>
           </ul>
           <div class="TabbedPanelsContentGroup">
             <div class="TabbedPanelsContent">
             <div id="feature_out" style="margin-top:-20px;"><div id="feature_exp"><div id="feature_in" style= "font-family='Centaur'"><strong>Automated Alerts</strong><div class="feature_info"><p style="text-align:center"; "font-family='Centaur'";>Create automated alerts for your favorite routes.</p></div></div></div></div>
                <table border="0" width="350px" style="margin-left:10px;">
                <tr>
                <td width="15%" style="padding-left:55px;padding-top:15px;"><img src="res/automated_alert.gif" height="20" width="20"></img>
                </td>
                <td width="60%">
                <div class="feature synotes_pencil" id="1" style="padding-left:10px; tex" ; ><strong>Automated alerts</strong><div class="feature_info"><p style="text-align:center; padding-bottom:20px" ; >Create automated alerts for your favorite routes.</p></div></div>
                </td>
                   </tr>
                <tr>
                <td width="15%" style="padding-left:55px;padding-top:15px;"><img src="res/set_alert_distance.gif" height="20" width="20"></img>
                </td>
                <td width="60%">
                <div class="feature synotes_sync" id="2" style="padding-left:10px;"><strong>Set alert distance</strong><div class="feature_info"><p style="text-align:center">Set the distance from the train station or bus stop where you would like to start receiving alerts.</p></div></div>
                </td>
                </tr>
                <tr>
                <td width="15%" style="padding-left:55px;padding-top:15px;"><img src="res/pick_your_transit.png" height="20" width="20"></img>
                </td>
                <td width="60%">
                <div class="feature synotes_star" id="3" style="padding-left:10px;padding-bottom:5px;"><strong>Pick your transit authority</strong><div class="feature_info"><p style="text-align:center">Select your transit from the many supported to get alerted</p></div></div>
                </td>
                </tr>
                <tr>
                <td width="15%" style="padding-left:55px;padding-top:15px;"><img src="res/you_can_snooze.png" height="20" width="20"></img>
                </td>
                <td width="60%">
                <div class="feature synotes_lock" id="4" style="padding-left:10px;"><strong>You can snooze</strong><div class="feature_info"><p style="text-align:center">Snooze the alert to the latest schedule if you decide to take a later train or bus.</p></div></div>
                </td>
                </tr>
                <tr>
                <td width="15%" style="padding-left:55px;padding-top:15px;"><img src="res/Get_up_to_date.png" height="20" width="20"></img>
                </td>
                <td width="60%">
                <div class="feature synotes_cloud" id="5" style="padding-left:10px;padding-bottom:40px;"><strong>Real Time status on your ride</strong><div class="feature_info"><p style="text-align:center">myTransAlert provides up-to-date status of your train and bus.</p></div></div>
                </td>
                </tr>
                </table>
            </div>
            <div class="TabbedPanelsContent">
                 <div id="wrapper">
                    <!-- Text Example -->
                        <div name class="verticalslider" id="textExample">
                            <ul class="verticalslider_tabs">
                                <li><a href="#" id="a1">New Alerts</a></li>
                                <li><a href="#" id="a2">My Alerts</a></li>
                                <li><a href="#" id="a3">My Schedule</a></li>
                                <li><a href="#" id="a4">Near Me</a></li>                        
                            </ul>
                            <ul class="verticalslider_contents">
                                <li>
                                <p>Praesent pulvinar, lorem nec ullamcorper semper, ipsum erat vestibulum lacus, in sodales lorem mi in leo. Vestibulum et rhoncus tellus. Curabitur mauris enim, vehicula sit amet euismod a, eleifend at dui. Vivamus sollicitudin, nunc pharetra porttitor lobortis, felis odio hendrerit mi, id ultricies urna enim quis lectus. Suspendisse convallis ipsum egestas velit fermentum ac volutpat dui dictum. Pellentesque sed ultrices justo. Ut lacus odio, porttitor quis tincidunt at, imperdiet vel eros. Duis ac velit neque. Integer semper egestas odio id suscipit. Maecenas eu diam in urna fringilla viverra eget sit amet ipsum. Lorem ipsum dolor sit amet, consectetur adipiscing elit.</p>
                                <h2>Overflow Content</h2>
                                <p>Praesent pulvinar, lorem nec ullamcorper semper, ipsum erat vestibulum lacus, in sodales lorem mi in leo.Praesent pulvinar, lorem nec ullamcorper semper, ipsum erat vestibulum lacus, in sodales lorem mi in leo.Praesent pulvinar, lorem nec ullamcorper semper, ipsum erat vestibulum lacus, in sodales lorem mi in leo.Praesent pulvinar, lorem nec ullamcorper semper, ipsum erat vestibulum lacus, in sodales lorem mi in leo.Praesent pulvinar, lorem nec ullamcorper semper, ipsum erat vestibulum lacus, in sodales lorem mi in leo.</p></td>
                                </li>
                                <li>
                                <h2>Praesent Pulvinar</h2>
                                <p>From the Spry tab on the Insert panel, choose the first item in the third group (the ... You can choose to create a horizontal or vertical menu. ... The first column is the main menu, the second column a submenu of the main menu, and so forth.From the Spry tab on the Insert panel, choose the first item in the third group (the ... You can choose to create a horizontal or vertical menu. ... The first column is the main menu, the second column a submenu of the main menu, and so forth.</p>
                                <h2>ABCDEFGH</h2>
                                <p>From the Spry tab on the Insert panel, choose the first item in the third group (the ... You can choose to create a horizontal or vertical menu. ... The first column is the main menu, the second column a submenu of the main menu, and so forth.From the Spry tab on the Insert panel, choose the first item in the third group (the ... You can choose to create a horizontal or vertical menu. ... The first column is the main menu, the second column a submenu of the main menu, and so forth.From the Spry tab on the Insert panel, choose the first item in the third group (the ... You can choose to create a horizontal or vertical menu. ... The first column is the main menu, the second column a submenu of the main menu, and so forth.</p>
                                </li>
                                <li>
                                <h2>Nunc Adipiscing</h2>
                                <p>The Tabs dialog box snaps to the top of the column that includes the selection or the insertion point. To the top ... Add tabs in the paragraphs where you want to add horizontal space. (You can ... In the Tabs panel, select a tab stop on the ruler.More results for how to add third column in vertical tabbed panel In the Tabs panel, select a tab stop on the ruler.More results for how to add third column in vertical tabbed panel    In the Tabs panel, select a tab stop on the ruler.More results for how to add third column in vertical tabbed panel</p>
                                <h2>Overflow Content</h2>
                                <p>Prant puinar, um erat vestulum lacus, in sodales lorem mi in leo.Prat puinar, lorem nec ullrper semper, ipsum vestibum lacus, in sodales lorem mi in leo.Praent pu000000000nar, lorem nec ullamcorper semper, ipsum erat vestibulum lacus, in sodales lorem mi in leo.Praesent pulvinar, lorem nec ullamcorper semper, ipsum erat vestibulum lacus, in sodales lorem mi in leo.Praesent pulvinar, lorem nec ullamcorper semper, ipsum erat vestibulum lacus, in sodales lorem mi in leo.</p>
                                </li>
                                <li>
                                <h2>Praesent Dapibus</h2>
                                <p>Adding a Tabbed Panel widget to display multiple containers on a single page ... Tabbed Panel, the second click selects the Tab Container, and the third click selects ... the Tabbed Panel widget on the page, near the top and centered vertically. .... Duplicate the existing text frame, to create a second column on the right side.Adding a Tabbed Panel widget to display multiple containers on a single page ... Tabbed Panel, the second click selects the Tab Container, and the third click selects ... the Tabbed Panel widget on the page, near the top and centered vertically. .... Duplicate the existing text frame, to create a second column on the right side.</p>
                                <h2>Overflow Content</h2>
                                <p>lorem nec ullamcorper semper, ipsum erat vestibulum lacus, in sodales lorem mi in leo. lorem nec ullamcorper semper, ipsum erat vestibulum lacus, in sodales lorem mi in leo. lorem nec ullamcorper semper, ipsum erat vestibulum lacus, in sodales lorem mi in leo.Praesent pulvinar, lorem nec ullamcorper semper, ipsum erat vestibulum lacus, in sodales lorem mi in leo.Praesent pulvinar, lorem nec ullamcorper semper, ipsum erat vestibulum lacus, in sodales lorem mi in leo.</p>
                                </li>                        
                            </ul>
                        </div> 
                </div>

            </div>
            <div class="TabbedPanelsContentA">
             <table border="1">
                <tr height="40px" align="center"><td ><b>Supported Transit Authorities</b></td><td width="35%"><b>Name</b></td><td><b>Supported Mode</b></td><td width="10  %"><b>Schedule Information</b></td><td width="5%"><b>Real-time Status & Alerts</b></td></tr>
                <tr align="center"><td valign="center" style="padding-top:6px;"><img src="TA/New york city subway.png"></td><td>New York Metro Transit Authority</td><td><img src="TA/subway.png" width="40" height="35"><img src="TA/bus.png"  width="30" height="35"></td><td><img src="TA/right.png"></td><td><img src="TA/right.png"></td></tr>
                <tr align="center"><td valign="center" style="padding-top:6px;"><img src="TA/metro1.png"></td><td>Washington Metropolitan Area Transit Authority</td><td><img src="TA/subway.png" width="40" height="35"><img src="TA/bus.png"  width="30" height="35"></td><td><img src="TA/right.png"></td><td><img src="TA/right.png"></td></tr>
                <tr align="center"><td valign="center" style="padding-top:6px;"><img src="TA/T.png"></td><td>Massachusetts Bay Transportation Authority</td><td><img src="TA/subway.png" width="40" height="35"><img src="TA/bus.png"  width="30" height="35"></td><td><img src="TA/right.png"></td><td><img src="TA/right.png"></td></tr>
                <tr align="center"><td valign="center" style="padding-top:6px;"><img src="TA/cta.png"></td><td>Chicago Transit Authority</td><td><img src="TA/subway.png" width="40" height="35"><img src="TA/bus.png"  width="30" height="35"></td><td><img src="TA/right.png"></td><td><img src="TA/right.png"></td></tr>
                <tr align="center"><td valign="center" style="padding-top:6px;"><img src="TA/bart.png"></td><td>Bay Area Rapid Transit</td><td><img src="TA/bus.png"  width="30" height="35"></td><td><img src="TA/right.png"></td><td><img src="TA/right.png"></td></tr>
                <tr align="center"><td valign="center" style="padding-top:6px;"><img src="TA/Metro.png"></td><td>Los Angeles County Metropolitan Transportation Authority</td><td><img src="TA/subway.png" width="40" height="35"><img src="TA/bus.png"  width="30" height="35"></td><td><img src="TA/right.png"></td><td>-</td></tr>
                <tr align="center"><td valign="center" style="padding-top:6px;"><img src="TA/Transit.png"></td><td>New Jersey Transit Corporation</td><td><img src="TA/subway.png" width="40" height="35"><img src="TA/bus.png"  width="30" height="35"></td><td><img src="TA/right.png"></td><td>-</td></tr>
                <tr align="center"><td valign="center" style="padding-top:6px;"><img src="TA/path.png"></td><td>Port Authority Trans-Hudson Corporation</td><td><img src="TA/bus.png" width="30" height="35"></td><td><img src="TA/right.png"></td><td>-</td></tr>
                <tr align="center"><td valign="center" style="padding-top:6px;"><img src="TA/SEPTA.png"></td><td>Southeastern Pennsylvania Transporation Authority</td><td><img src="TA/subway.png" width="40" height="35"><img src="TA/bus.png" width="30" height="35"></td><td><img src="TA/right.png"></td><td>-</td></tr>
             </table>
            </div>
          </div>
        </div>
     </div>
</div>
<div id="footer">
    <ul id="site-footer">
        <li class="foot"><a href="help.html"><img src="res/help_ico.png" alt="About us" width="150" height="150" style="margin-left:15px;back"/><br/><b id="us1"><font family="Centaur";style="margin-left:-5px;" color="#525252" size="+1">Help</font></b></a></li>
        <li class="foot"><a href="contactus.html"><img src="res/contactus_ico.png" alt="Second Image" width="150" height="150" style="margin-left:15px;"/><br /><b id="us2"><font color="#525252" style="margin-left:-10px;" size="+1">Contact</font></b></a></li>
        <li class="foot"><a href="https://www.facebook.com/myTransAlert"><img src="res/facebook_ico.png" alt="Follow us on Facebook" width="150" height="150" style="margin-left:15px;"/><br /><b id="fb"><font color="#525252" style="margin-left:35px;" size="+1">Facebook</font></b></a></li>
        <li class="foot"><a href="https://www.twitter.com/myTransAlert"><img src="res/twitter_ico.png" alt="Follow us on Twitter" width="150" height="150" style="margin-left:15px;"/><br /><b id="tweet"><font color="#525252" style="margin-left:35px;" size="+1">Twitter</font></b></a></li>
    </ul>
    <div class="clear"></div>
    <div id="mailing-list">
        <p id="ip">Join our mailing list for the latest <strong>myTransAlert</strong> news
            <div id="sect">
                <form name="frmmailinglist" action="sendmailinglist.php" method="POST">
                <input id="txtHint" name="txtEmail" type="text" placeholder="&nbsp;&nbsp;eMail ID"/>
                <input class="send" id="btn3" type="submit" value="Submit" Onclick="return ValidateEmail()" /><p id="result"></p>
                </form>
            </div>  
     </p>
    </div>
    <div class="clear"></div>
    <br/>
    <p id="copyright">Copyright anOrigin &copy;2013 All rights reserved!!<br />
    <img src="res/eywa.png" height="16" width="100" alt="Powered by Eywa" style="position:relative;"/></p>
</div>
<script type="text/javascript">
<!--
var TabbedPanels1 = new Spry.Widget.TabbedPanels("TabbedPanels1");
//-->
</script>
<script src="js/script.js"></script>
</body>
</html> 
```

如果您想要 CSS 和 js 以供进一步参考，我也可以提供它们...

我尝试了很多谷歌和技巧，但找不到原因..请帮我解决这个问题...在此先感谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-30T17:50:39.010

只需删除所有 jQuery 库并仅使用最新的 jQuery 库（直接从 Google Server 链接或下载并包含到您的标题中），这应该可以解决您的问题。祝你好运！

# git - git-fetch 是否复制整个存储库？

> ID：15789625
> 
> 赞同：3
> 
> 时间：2013-04-03T14:05:37.513
> 
> 标签：git, version-control

该`git fetch`命令是将整个远程存储库复制到我的机器上，还是仅复制到我当前分支的上游？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:13:29.830

是的，默认情况下，它会获取`<repository>`指定的所有“命名头或标签”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:08:49.093

取决于您使用的选项。它可以两者兼得。它使用数据更新存储库，但不会将更改与您的本地合并。那将是`git pull`or `git merge`。（`git pull`根据文档是 a`git fetch`后跟 a `git merge`）

[https://www.kernel.org/pub/software/scm/git/docs/git-fetch.html](https://www.kernel.org/pub/software/scm/git/docs/git-fetch.html)

# ruby - 如何生成授权签名

> ID：15789633
> 
> 赞同：0
> 
> 时间：2013-04-03T14:05:55.343
> 
> 标签：ruby, paypal, paypal-adaptive-payments

我的应用程序要求用户授予代表他们获取交易详细信息的权限。我正在使用 'PayPal::SDK::Core::Util::OauthSignature' 来生成`X-PAYPAL-AUTHORIZATION`标头，但我对`url`参数感到困惑。

我想将 API 端点用于该特定操作，即`https://svcs.paypal.com/AdaptivePayments/PaymentDetails`，但它似乎不起作用，因为我遇到了同样的`You do not have permission to get these payment details`错误。

# php - 我的 SQL 语句有什么问题？如何正确使用 JOIN？

> ID：15789639
> 
> 赞同：2
> 
> 时间：2013-04-03T14:06:09.937
> 
> 标签：php, sql

所以我正在开发一个梦幻棒球工具。我构建了这个 SQL 语句，我最初认为它可以工作，但在我添加更多行后结果却没有这样做。

这是声明：

```
SELECT
        p.player_id, position, last_name, first_name, player_type, team, s.season_gp, s.season_runs, s.season_hits, s.season_doubles, s.season_triples, s.season_home_runs, s.season_runs_batted_in, s.season_base_on_balls, s.season_strikeouts, s.season_stolen_bases, w.week_gp, w.week_runs, w.week_hits, w.week_doubles, w.week_triples, w.week_home_runs, w.week_runs_batted_in, w.week_base_on_balls, w.week_strikeouts, w.week_stolen_bases
FROM
        player AS p
LEFT JOIN   
        (SELECT
                player_id, COUNT(date) AS week_gp, SUM(runs) AS week_runs, SUM(hits) AS week_hits, SUM(doubles) AS week_doubles, SUM(triples) AS week_triples, SUM(home_runs) AS week_home_runs, SUM(runs_batted_in) AS week_runs_batted_in, SUM(base_on_balls) AS week_base_on_balls, SUM(strikeouts) AS week_strikeouts, SUM(stolen_bases) AS week_stolen_bases
        FROM
                game_mlb
        WHERE
                date >= CURDATE() - INTERVAL 1 WEEK) w
        ON p.player_id = w.player_id
LEFT JOIN   
        (SELECT
                player_id, COUNT(date) AS season_gp, SUM(runs) AS season_runs, SUM(hits) AS season_hits, SUM(doubles) AS season_doubles, SUM(triples) AS season_triples, SUM(home_runs) AS season_home_runs, SUM(runs_batted_in) AS season_runs_batted_in, SUM(base_on_balls) AS season_base_on_balls, SUM(strikeouts) AS season_strikeouts, SUM(stolen_bases) AS season_stolen_bases
        FROM
                game_mlb
        WHERE
                date >= YEAR(CURDATE())) s
        ON p.player_id = s.player_id
WHERE
        team_id = 1 
```

以下是正在使用的表的 PHP 数组。

游戏_mlb：

```
$game_mlb = array(
  array('game_id' => '9','player_id' => '1','date' => '2013-03-31','at_bats' => '4','runs' => '0','hits' => '0','doubles' => '0','triples' => '0','home_runs' => '0','runs_batted_in' => '0','stolen_bases' => '0','base_on_balls' => '0','strikeouts' => '0','innings_pitched' => NULL,'wins' => NULL,'complete_games' => NULL,'shutouts' => NULL,'saves' => NULL,'earned_runs' => NULL,'strikeouts_pitched' => NULL,'holds' => NULL),
  array('game_id' => '10','player_id' => '2','date' => '2013-04-01','at_bats' => '4','runs' => '0','hits' => '0','doubles' => '0','triples' => '0','home_runs' => '0','runs_batted_in' => '0','stolen_bases' => '0','base_on_balls' => '1','strikeouts' => '1','innings_pitched' => NULL,'wins' => NULL,'complete_games' => NULL,'shutouts' => NULL,'saves' => NULL,'earned_runs' => NULL,'strikeouts_pitched' => NULL,'holds' => NULL)
); 
```

玩家：

```
$player = array(
  array('player_id' => '1','player_league' => 'MLB','first_name' => 'Adrian','last_name' => 'Beltre','player_type' => 'MLB_BATTER','position' => '3B','team' => 'TEX','yahoo_id' => '6039','minors_type' => 'MLB_BR','minors_id' => 'beltre001adr','injury' => NULL,'team_id' => '1'),
  array('player_id' => '2','player_league' => 'MLB','first_name' => 'Albert','last_name' => 'Pujols','player_type' => 'MLB_BATTER','position' => '1B','team' => 'LAA','yahoo_id' => '6619','minors_type' => 'MLB_BR','minors_id' => 'pujols001jos','injury' => NULL,'team_id' => '1')
); 
```

这是我得到的结果：

```
$player = array(
  array('player_id' => '1','position' => '3B','last_name' => 'Beltre','first_name' => 'Adrian','player_type' => 'MLB_BATTER','team' => 'TEX','season_gp' => '2','season_runs' => '0','season_hits' => '0','season_doubles' => '0','season_triples' => '0','season_home_runs' => '0','season_runs_batted_in' => '0','season_base_on_balls' => '1','season_strikeouts' => '1','season_stolen_bases' => '0','week_gp' => '2','week_runs' => '0','week_hits' => '0','week_doubles' => '0','week_triples' => '0','week_home_runs' => '0','week_runs_batted_in' => '0','week_base_on_balls' => '1','week_strikeouts' => '1','week_stolen_bases' => '0'),
  array('player_id' => '2','position' => '1B','last_name' => 'Pujols','first_name' => 'Albert','player_type' => 'MLB_BATTER','team' => 'LAA','season_gp' => NULL,'season_runs' => NULL,'season_hits' => NULL,'season_doubles' => NULL,'season_triples' => NULL,'season_home_runs' => NULL,'season_runs_batted_in' => NULL,'season_base_on_balls' => NULL,'season_strikeouts' => NULL,'season_stolen_bases' => NULL,'week_gp' => NULL,'week_runs' => NULL,'week_hits' => NULL,'week_doubles' => NULL,'week_triples' => NULL,'week_home_runs' => NULL,'week_runs_batted_in' => NULL,'week_base_on_balls' => NULL,'week_strikeouts' => NULL,'week_stolen_bases' => NULL)
); 
```

这是不正确的。Beltre 和 Pujols 应该各自有 1 场比赛使用各自的统计数据，但 Beltre 得到了所有的赞誉。

任何帮助将不胜感激，我已经坚持了一段时间了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:09:13.393

您需要`group by`在子查询中声明：

```
SELECT p.player_id, position, last_name, first_name, player_type, team,
       s.season_gp, s.season_runs, s.season_hits, s.season_doubles, s.season_triples, s.season_home_runs, s.season_runs_batted_in, s.season_base_on_balls, s.season_strikeouts, s.season_stolen_bases, w.week_gp, w.week_runs, w.week_hits, w.week_doubles, w.week_triples, w.week_home_runs, w.week_runs_batted_in, w.week_base_on_balls, w.week_strikeouts, w.week_stolen_bases
FROM player p LEFT JOIN   
     (SELECT player_id, COUNT(date) AS week_gp, SUM(runs) AS week_runs, SUM(hits) AS week_hits, SUM(doubles) AS week_doubles, SUM(triples) AS week_triples, SUM(home_runs) AS week_home_runs, SUM(runs_batted_in) AS week_runs_batted_in, SUM(base_on_balls) AS week_base_on_balls, SUM(strikeouts) AS week_strikeouts, SUM(stolen_bases) AS week_stolen_bases
      FROM game_mlb
      WHERE date >= CURDATE() - INTERVAL 1 WEEK
      group by player_id
     ) w
     ON p.player_id = w.player_id LEFT JOIN   
     (SELECT player_id, COUNT(date) AS season_gp, SUM(runs) AS season_runs, SUM(hits) AS season_hits, SUM(doubles) AS season_doubles, SUM(triples) AS season_triples, SUM(home_runs) AS season_home_runs, SUM(runs_batted_in) AS season_runs_batted_in, SUM(base_on_balls) AS season_base_on_balls, SUM(strikeouts) AS season_strikeouts, SUM(stolen_bases) AS season_stolen_bases
      FROM game_mlb
      WHERE date >= YEAR(CURDATE())
      group by player_id
     ) s
     ON p.player_id = s.player_id
WHERE team_id = 1; 
```

在大多数 SQL 版本中，您的代码会返回错误。但是，MySQL 允许`select`列表中的列不在`group by`-- 中，这导致了您的问题。

# javascript - 将变量传递给动态填充的下拉列表

> ID：15789641
> 
> 赞同：0
> 
> 时间：2013-04-03T14:06:18.177
> 
> 标签：javascript, html, forms

我们有一个在线应用程序 html 表单，可以将打开的位置从 xml 文件中拉到菜单/列表选择字段中。您可以在此处查看表格：在此处[输入链接描述](http://www.citizensmemorial.com/careers/online-app.html)

对于每个空缺职位，都有一个职位发布页面，其中有一个“立即申请”按钮，该按钮链接到申请页面。当用户点击立即应用按钮时，我们希望将位置传递给表单中的菜单/列表选择字段。

因此，如果我在职位发布页面上制作表格，并使用隐藏字段来保存该页面的职位，那么我如何将该变量传递给在线应用程序以选择职位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:12:28.397

您需要将默认值设置为您的选择框。

加载页面后，

```
document.getElementById("selectbox").value = hiddensValue; 
```

# unix - 查找两个文件的公共列并在第三个文件上打印第一个文件值

> ID：15789650
> 
> 赞同：0
> 
> 时间：2013-04-03T14:06:43.627
> 
> 标签：unix

我有两个大文件，例如；

文件 1

```
0.678 JA0678
0.567 JA0907
0.345 JA0408 
```

文件2

```
0.574 JA0907
0.467 JA2345
0.347 JA0678 
```

我想要这样的输出；

```
0.678 JA0678
0.567 JA0907 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:13:26.347

尝试这样做：

```
$ awk 'NR==FNR{a[$2]=$1}NR!=FNR && $2 in a{print a[$2], $2}' file1 file2
0.567 JA0907
0.678 JA0678 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:16:12.423

```
awk '{if($2 in seen) print seen[$2] " " $2; else seen[$2]=$1}' File1 File2 
```

输出：

```
0.567 JA0907
0.678 JA0678 
```

# python - 如何使用 Python 和 Gstreamer 创建视频缩略图

> ID：15789652
> 
> 赞同：9
> 
> 时间：2013-04-03T14:06:45.067
> 
> 标签：python, video, gstreamer

我想使用 Gstreamer 和 Python 为 MPEG-4 AVC 视频创建缩略图。本质上：

1.  打开视频文件
2.  搜索到某个时间点（例如 5 秒）
3.  当时抢框
4.  将帧作为 .jpg 文件保存到光盘

我一直在看[这个其他类似的问题](https://stackoverflow.com/questions/12003663/gstreamer-how-to-extract-video-frame-from-the-flow)，但我不太清楚如何在没有用户输入的情况下自动进行搜索和帧捕获。

总而言之，如何按照上述步骤使用 Gstreamer 和 Python 捕获视频缩略图？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-10T08:47:01.813

为了详细说明[ensonic](https://stackoverflow.com/users/598905/ensonic)的答案，这里有一个例子：

```
import os
import sys

import gst

def get_frame(path, offset=5, caps=gst.Caps('image/png')):
    pipeline = gst.parse_launch('playbin2')
    pipeline.props.uri = 'file://' + os.path.abspath(path)
    pipeline.props.audio_sink = gst.element_factory_make('fakesink')
    pipeline.props.video_sink = gst.element_factory_make('fakesink')
    pipeline.set_state(gst.STATE_PAUSED)
    # Wait for state change to finish.
    pipeline.get_state()
    assert pipeline.seek_simple(
        gst.FORMAT_TIME, gst.SEEK_FLAG_FLUSH, offset * gst.SECOND)
    # Wait for seek to finish.
    pipeline.get_state()
    buffer = pipeline.emit('convert-frame', caps)
    pipeline.set_state(gst.STATE_NULL)
    return buffer

def main():
    buf = get_frame(sys.argv[1])

    with file('frame.png', 'w') as fh:
        fh.write(str(buf))

if __name__ == '__main__':
    main() 
```

这会生成一个 PNG 图像。`gst.Caps("video/x-raw-rgb,bpp=24,depth=24")`您可以使用或类似的方法获取原始图像数据。

请注意，在 GStreamer 1.0（相对于 0.10）中，`playbin2`已重命名为`playbin`，`convert-frame`信号名为`convert-sample`.

[GStreamer 应用程序开发手册的这一章](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/manual/html/section-eventsseek.html)解释了搜索的机制。0.10 的`playbin2`文档似乎不再在线，但 1.0 的文档在[这里](http://gstreamer.freedesktop.org/data/doc/gstreamer/head/gst-plugins-base-plugins/html/gst-plugins-base-plugins-playbin.html)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-02-04T10:52:57.553

Vala 中的一个示例，带有 GStreamer 1.0 ：

```
var playbin = Gst.ElementFactory.make ("playbin", null);
playbin.set ("uri", "file:///path/to/file");
// some code here.
var caps = Gst.Caps.from_string("image/png");
Gst.Sample sample;
Signal.emit_by_name(playbin, "convert-sample", caps, out sample);
if(sample == null)
    return;
var sample_caps = sample.get_caps ();
if(sample_caps == null)
    return;
unowned Gst.Structure structure = sample_caps.get_structure(0);
int width = (int)structure.get_value ("width");
int height = (int)structure.get_value ("height");
var memory = sample.get_buffer().get_memory (0);
Gst.MapInfo info;
memory.map (out info, Gst.MapFlags.READ);
uint8[] data = info.data; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2017-10-17T15:03:18.750

这是一个老问题，但我仍然没有在任何地方找到它的记录。
我发现以下内容适用于使用 Gstreamer 1.0 播放的视频

```
import gi
import time
gi.require_version('Gst', '1.0')
from gi.repository import Gst

def get_frame():
    caps = Gst.Caps('image/png')
    pipeline = Gst.ElementFactory.make("playbin", "playbin")
    pipeline.set_property('uri','file:///home/rolf/GWPE.mp4')
    pipeline.set_state(Gst.State.PLAYING)
    #Allow time for it to start
    time.sleep(0.5)
    # jump 30 seconds
    seek_time = 30 * Gst.SECOND
    pipeline.seek(1.0, Gst.Format.TIME,(Gst.SeekFlags.FLUSH | Gst.SeekFlags.ACCURATE),Gst.SeekType.SET, seek_time , Gst.SeekType.NONE, -1)

    #Allow video to run to prove it's working, then take snapshot
    time.sleep(1)
    buffer = pipeline.emit('convert-sample', caps)
    buff = buffer.get_buffer()
    result, map = buff.map(Gst.MapFlags.READ)
    if result:
        data = map.data
        pipeline.set_state(Gst.State.NULL)
        return data
    else:
        return

if __name__ == '__main__':
    Gst.init(None)
    image = get_frame()
    with open('frame.png', 'wb') as snapshot:
        snapshot.write(image) 
```

代码应该在 Python2 和 Python3 上运行，我希望它对某人有所帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-04T13:06:17.183

使用 playbin2。将 uri 设置为媒体文件，使用 gst_element_seek_simple 寻找所需的时间位置，然后使用 g_signal_emit 调用“convert-frame”动作信号。

# php - 在 magento 的电子邮件模板中更改运输方式名称

> ID：15789653
> 
> 赞同：0
> 
> 时间：2013-04-03T14:06:45.230
> 
> 标签：php, magento

我正在使用 matrixrates 为我的商店提供运输方式。对于某些方法，我有相同的名称但价格不同，例如“标准”超过 350 美元，“标准”低于 350 美元。所以以编程方式，我通过将“：2”与以下速率区别开来。所以它变成“标准：2”我已成功修改前端和后端以显示两种费率的“标准”，但在发送给客户的电子邮件中“标准：2”正在发送。所以我深入研究了代码。新订单电子邮件模板位于 locale/template/emai/sales/new_order.html 中，并使用此功能获取运输详情。

```
{{var order.getShippingDescription()}} 
```

我在 Core/Mage/Checkout/Block/Onepage/progress.php 中找到了这个函数。但是通过更改返回值，不会影响电子邮件中的运输说明。我想知道这个函数“getShippingDescription()”在哪里，所以我可以修改它。

# html - CSS - 在浏览器窗口调整大小时出现图像问题

> ID：15789662
> 
> 赞同：0
> 
> 时间：2013-04-03T14:07:10.143
> 
> 标签：html, css

在我的示例中，当浏览器窗口展开时（现在可以使用），我需要保持标题和主体伸展到全屏。但是，当浏览器窗口缩小时，橙色图像会从标题跳下并部分位于黑色图像下方。知道如何保持橙色图像到位吗？

这是我的例子：http: [//jsfiddle.net/RFMBM/](http://jsfiddle.net/RFMBM/)

我的 CSS：

```
 body {
                background-color: #e8e8e8; 
                font-family: Arial, Helvetica, sans-serif; 
                font-size:12px; 
                padding: 0; 
                margin: 0;}
            h1 {
                padding: 0px; 
                margin: 0px;
            }
            #container {
                    margin:0px auto;
                    border:0px solid #bbb;
                    padding:10px;
                    min-width: 990px;
            }
            .white-box {
                width: 180px; 
                margin: 0px;
            }
            #main-header {
                border:1px solid #bbb;
                height:98px;
                padding:3px;
                background-color: #fff;
                min-width: 930px;
            }
            #main-content {
                margin-top:10px;
                padding-bottom:10px;
            }
            #main-body {
                margin-left:10px;
                width:666px;
                height:150px;
            }
            #main-footer {
                margin-top:10px;
                margin-bottom:10px;
                padding:10px;
                border:1px solid #bbb;
            }   
            .box {
                padding: 8px;
                border: 1px solid silver;
                -moz-border-radius: 8px;
                -o-border-radius: 8px;
                -webkit-border-radius: 5px;
                border-radius: 8px;
                background-color: #fff;
            }
            .box1 {
                width: 200px;
                float: left;
            }
            .box2 {
                margin-left: 224px;
            }
            div.left {
                float: left;
            }
            div.right {
                float: right;
                margin-right:3px;
            } 
```

HTML：

```
 <div id="main-header">
                <div class="left"><img src="http://img89.imageshack.us/img89/2675/logoxnx.gif" border="0" alt=""></div>
                <div class="right"><img src="http://img199.imageshack.us/img199/9759/banner2b.gif" border="0" alt=""></div>
            </div>
            <div id="container">
                <div id="main-content">
                    <div class="box box1">
                    left
                    </div>

                    <div class="box box2">
                    <p>Main Body...</p>
                    </div>
                    <div style="clear:both;"></div>
                </div>

                <div id="main-footer">Main Footer</div>
            </div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:11:23.117

你需要增加`min-width`to`#main-header`左右`950px`

[http://jsfiddle.net/RFMBM/2/](http://jsfiddle.net/RFMBM/2/)

# android - 如何指定要在意图中查找的一组联系人？

> ID：15789666
> 
> 赞同：2
> 
> 时间：2013-04-03T14:07:17.677
> 
> 标签：android, android-intent, android-contacts

我目前正在通过以下方式请求联系人列表

```
 Intent intent = new Intent(Intent.ACTION_PICK);
    intent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_TYPE);
    startActivityForResult(intent, CHOOSE_CONTACT); 
```

当前显示所有联系人。但是，我想将此联系人列表过滤为属于特定组或属于特定公司的一组联系人。我该怎么做/换句话说：如何向意图添加过滤器或查询以仅显示特定组的联系人或显示特定公司的联系人？

# android - 解析时出现Android JSON异常

> ID：15789667
> 
> 赞同：0
> 
> 时间：2013-04-03T14:07:24.113
> 
> 标签：android, json, parsing, type-mismatch

我正在尝试在我的 Android 应用程序中解析一个 json （进一步我将用内容填充一个列表视图），所以我制作了这个类：

```
public class MainActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        new ReadJSONFeedTask().execute("http://10.14.182.253/viztonjob/update.php?updatedAt=01011970");
    }

    public String readJSONFeed(String URL) {
        StringBuilder stringBuilder = new StringBuilder();
        HttpClient client = new DefaultHttpClient();
        HttpGet httpGet = new HttpGet(URL);
        try {
            HttpResponse response = client.execute(httpGet);
            StatusLine statusLine = response.getStatusLine();
            int statusCode = statusLine.getStatusCode();
            if (statusCode == 200) {
                HttpEntity entity = response.getEntity();
                InputStream content = entity.getContent();
                BufferedReader reader = new BufferedReader(
                        new InputStreamReader(content));
                String line;
                while ((line = reader.readLine()) != null) {
                    stringBuilder.append(line);
                }
            } else {
                Log.e("JSON", "Failed to download file");
            }
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        return stringBuilder.toString();
    }

    private class ReadJSONFeedTask extends AsyncTask<String, Void, String> {

        private final ProgressDialog pd = new ProgressDialog(MainActivity.this);

        protected String doInBackground(String... urls) {
            return readJSONFeed(urls[0]);
        }

        protected void onPreExecute() {
            this.pd.setMessage("Chargement de la liste des métiers ...");
            this.pd.show();
        }

        protected void onPostExecute(String result) {
            pd.dismiss();
            try {
                JSONArray jsonArray = new JSONArray(result);
                Log.i("JSON",
                        "Number of surveys in feed: " + jsonArray.length());
                for (int i = 0; i < jsonArray.length(); i++) {
                    JSONObject jsonObject = jsonArray.getJSONObject(i);
                    Toast.makeText(
                            getBaseContext(),
                            jsonObject.getString("metiers") + " - "
                                    + jsonObject.getString("categorie"),
                            Toast.LENGTH_SHORT).show();
                }
            } catch (Exception e) {
                e.printStackTrace();
            }
        }
    }
} 
```

所以我使用*AsyncTask*来恢复我的数据，然后我尝试在*Toast*中显示它。

我的*json*[在 PasteBin 上](http://pastebin.com/zJxKF9TC)看起来像这样。

当我启动我的应用程序时，我在 ProgressDialog 关闭后收到以下警告：

```
W/System.err(13382):    org.json.JSONException: Value {"chambres":[{"adresse1":"23 allÃ©e des Fontainiers","adresse2":"BP 125","fax":"04 92 32 17 75","codePostal":"04004","email":"chmetiers@cm-04.fr","ndepartement":"04","tel":"04 92 30 90 90","ville":"DIGNE-LES-BAINS","urlSite":"http:\/\/www.cm-04.fr","nom":"CMA des Alpes-de-Haute-Provence"},{"adresse1":"Square Voltaire","adresse2":"","fax":"04 92 53 48 85","codePostal":"05000","email":"chambremetiers@cma05.fr","ndepartement":"05","tel":"04 92 51 06 89","ville":"GAP","urlSite":"http:\/\/www.cm-gap.fr","nom":"CMA des Hautes-Alpes"},{"adresse1":"110, avenue de Verdun","adresse2":"","fax":"04 93 31 07 56","codePostal":"06700","email":"direction@cma06.fr","ndepartement":"06","tel":"04 93 14 16 14","ville":"ST-LAURENT-DU-VAR","urlSite":"http:\/\/www.cm-alpesmaritimes.fr","nom":"CMA des Alpes-Maritimes"},{"adresse1":"8 rue de ClÃ¨ves","adresse2":"BP 290","fax":"03 24 56 81 88","codePostal":"08014","email":"cma@cma-ardennes.fr","ndepartement":"08","tel":"03 24 56 81 81","ville":"CHARLEVILLE-MEZIERES","urlSite":"http:\/\/www.cma-ardennes.fr","nom":"CMA des Ardennes"},{"adresse1":"5 boulevard PÃ¨bre","adresse2":"","fax":"04 91 32 24 25","codePostal":"13295","email":"cm13@cm13.org","ndepartement":"13","tel":"04 91 32 24 24","ville":"MARSEILLE","urlSite":"http:\/\/www.cma13.fr","nom":"CMA des Bouches du RhÃ´ne"},{"adresse1":"2 rue Claude-Bloch","adresse2":"BP 5059","fax":"02 31 53 25 01","codePostal":"14077","email":"contact14@cmar-bn.fr","ndepartement":"14","tel":"02 31 53 25 00","ville":"CAEN","urlSite":"http:\/\/www.cmar-bn.fr","nom":"CMAR de Basse-Normandie : section du Calvados"},{"adresse1":"45 avenue de la RÃ©publique","adresse2":"BP 511","fax":"04 71 45 65 10","codePostal":"15005","email":"sylvie.meinier@cma-cantal.fr","ndepartement":"15","tel":"04 71 45 65 00","ville":"AURILLAC","urlSite":"http:\/\/www.cma-cantal.fr","nom":"CMA du Cantal"},{"adresse1":"68 avenue Gambetta","adresse2":"","fax":"05 45 90 47 29","codePostal":"16021","email":"accueil@cma-charente.fr","ndepartement":"16","tel":"05 45 90 47 00","ville":"ANGOULEME","urlSite":"http:\/\/www.cma-charente.fr","nom":"CMA de la Charente"},{"adresse1":"107, avenue Michel-CrÃ©peau","adresse2":"","fax":"05 46 50 00 09","codePostal":"17024","email":"cm17@cm-larochelle.fr","ndepartement":"17","tel":"05 46 50 00 00","ville":"LA ROCHELLE","urlSite":"http:\/\/www.cm-larochelle.fr","nom":"CMA de la Charente-Maritime"},{"adresse1":"40 rue Moyenne","adresse2":"BP 249","fax":"02 48 69 70 69","codePostal":"18005","email":"cm18@cm-bourges.fr","ndepartement":"18","tel":"02 48 69 70 71","ville":"BOURGES","urlSite":"http:\/\/www.cm-18.fr","nom":"CMA du Cher"},{"adresse1":"Immeuble Jean-Marie-Saute","adresse2":"8 avenue Alsace-Lorraine","fax":"05 55 20 19 14","codePostal":"19002","email":"artisanat@cma-correze.fr","ndepartement":"19","tel":"05 55 29 95 95","ville":"TULLE","urlSite":"http:\/\/www.cma-correze.fr","nom":"CMA de la CorrÃ¨ze"},{"adresse1":"5-7 rue de Londres","adresse2":"BP 49","fax":"05 55 51 95 39","codePostal":"23011","email":"contact@cma-gueret.fr","ndepartement":"23","tel":"05 55 51 95 30","ville":"GUERET","urlSite":"http:\/\/www.crma-limousin.fr","nom":"CMA de la Creuse"},{"adresse1":"CrÃ©avallÃ©e Nord","adresse2":"Boulevard des saveurs","fax":"05 53 45 15 08","codePostal":"24660","email":"conseil@cm24.fr","ndepartement":"24","tel":"05 53 35 87 00","ville":"COULOUNIEIX CHAMIERS","urlSite":"http:\/\/www.artisanat24.com\/","nom":"CMA de la Dordogne"},{"adresse1":"21 rue de la PrÃ©fecture","adresse2":"BP 75","fax":"03 81 21 35 00","codePostal":"25013","email":"contact25@artisanat-comtois.fr","ndepartement":"25","tel":"03 81 21 35 35","ville":"BESANCON","urlSite":"http:\/\/www.cma-doubs.fr","nom":"CMA du Doubs"},{"adresse1":"Avenue Adolphe-Figuet","adresse2":"BP 153-Le clos des Tanneurs","fax":"04 75 02 73 94","codePostal":"26104","email":"c.francois@cma-drome.fr","ndepartement":"26","tel":"04 75 48 72 00","ville":"ROMANS","urlSite":"http:\/\/www.cma-drome.fr","nom":"CMA de la DrÃ´me"},{"adres
W/System.err(13382):    at org.json.JSON.typeMismatch(JSON.java:111)
W/System.err(13382):    at org.json.JSONArray.<init>(JSONArray.java:91)
W/System.err(13382):    at org.json.JSONArray.<init>(JSONArray.java:103)
... 
```

它不烤任何东西。我试图验证 json 并且明显没有错误。所以我想知道你是否知道它来自哪里。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:12:16.397

我认为您的问题是您立即尝试解析`JSON`数组：

尝试做这样的事情：

```
JSONObject json = new JSONObject(result); 
```

然后开始解析`chambres`数组：

```
JSONArray array = json.getJSONArray("chambres"); 
```

等等...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:11:15.340

您正在为`JSONArray`构造函数提供此值：`{"chambres":[{"adresse1":"23....`但这不是 JSON 数组而是对象。

# wpf - WPF ResourceDictionary StringFormat XamlParseException

> ID：15789673
> 
> 赞同：2
> 
> 时间：2013-04-03T14:07:46.790
> 
> 标签：wpf, wpf-4.0

我有一个定义了 Style 的 ResourceDictionary，它有一个带有绑定 StringFormat 的 ControlTemplate，如下所示：

```
<TextBlock Text="{Binding TotalCash, Mode=OneWay, StringFormat={}{0:N2}, FallbackValue=0.00}" /> 
```

我在本地运行，一切都很好，但是我在服务器上进行构建和安装，当我启动任何使用 ResourceDictionary 的 WFP 屏幕时，我得到以下异常：

```
System.Windows.Markup.XamlParseException: 'Unexpected token after end of markup extension.' Line number '224' and line position '148'. ---> System.Xaml.XamlParseException: 'Unexpected token after end of markup extension.' Line number '224' and line position '148'.
   at MS.Internal.Xaml.Parser.MePullParser.<Parse>d__0.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<LogicStream_Attribute>d__6f.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_EmptyElement>d__14.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_Element>d__7.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_ElementContent>d__4a.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_ElementBody>d__23.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_Element>d__7.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_ElementContent>d__4a.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_ElementBody>d__23.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_Element>d__7.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_ElementContent>d__4a.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_ElementBody>d__23.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_Element>d__7.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_ElementContent>d__4a.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_ElementBody>d__23.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_Element>d__7.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_ElementContent>d__4a.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_ElementBody>d__23.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_Element>d__7.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_PropertyContent>d__5f.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_NonemptyPropertyElement>d__42.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_PropertyElement>d__35.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_ElementBody>d__23.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_Element>d__7.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_ElementContent>d__4a.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_ElementBody>d__23.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_Element>d__7.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_ElementContent>d__4a.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_ElementBody>d__23.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<P_Element>d__7.MoveNext()
   at MS.Internal.Xaml.Parser.XamlPullParser.<Parse>d__0.MoveNext()
   at MS.Internal.Xaml.NodeStreamSorter.ReadAheadToEndOfAttributes()
   at MS.Internal.Xaml.NodeStreamSorter.ReadAheadAndSortCtorProperties()
   at MS.Internal.Xaml.NodeStreamSorter.MoveNext()
   at System.Xaml.XamlXmlReader.Read()
   at System.Windows.Markup.WpfXamlLoader.TransformNodes(XamlReader xamlReader, XamlObjectWriter xamlWriter, Boolean onlyLoadOneNode, Boolean skipJournaledProperties, Boolean shouldPassLineNumberInfo, IXamlLineInfo xamlLineInfo, IXamlLineInfoConsumer xamlLineInfoConsumer, XamlContextStack`1 stack, IStyleConnector styleConnector)
   at System.Windows.Markup.WpfXamlLoader.Load(XamlReader xamlReader, IXamlObjectWriterFactory writerFactory, Boolean skipJournaledProperties, Object rootObject, XamlObjectWriterSettings settings, Uri baseUri)
   --- End of inner exception stack trace ---
   at System.Windows.Markup.XamlReader.RewrapException(Exception e, IXamlLineInfo lineInfo, Uri baseUri)
   at System.Windows.Markup.WpfXamlLoader.Load(XamlReader xamlReader, IXamlObjectWriterFactory writerFactory, Boolean skipJournaledProperties, Object rootObject, XamlObjectWriterSettings settings, Uri baseUri)
   at System.Windows.Markup.WpfXamlLoader.LoadBaml(XamlReader xamlReader, Boolean skipJournaledProperties, Object rootObject, XamlAccessLevel accessLevel, Uri baseUri)
   at System.Windows.Markup.XamlReader.LoadBaml(Stream stream, ParserContext parserContext, Object parent, Boolean closeStream)
   at System.Windows.Application.LoadComponent(Object component, Uri resourceLocator) 
```

我做了一些挖掘并通过将 ResourceDictionary StringFormat 从 {}{0:N2} 更改为 N2 来使其工作：

```
<TextBlock Text="{Binding TotalCash, Mode=OneWay, StringFormat=N2, FallbackValue=0.00}" /> 
```

以下作品放入用户控件中：

```
<TextBlock Text="{Binding TotalCash, Mode=OneWay, StringFormat={}{0:N2}, FallbackValue=0.00}" /> 
```

我的问题是为什么相同的 StringFormat 在 UserControl 中起作用，但在 ResourceDictionary 中不起作用？我很高兴它正在工作，但想了解原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:58:22.560

这是一个[WPF 错误](http://social.msdn.microsoft.com/Forums/en-US/wpf/thread/2b877e2d-bfee-48be-8884-5d3811e58d52/)。

我猜你的开发机器上本地安装了 .NET 4.5（可能是因为安装了 Visual Studio 2012），但你的服务器上没有（只有 .NET 4）。因此，您的服务器没有 Microsoft 在 .NET 4.5 中添加到 WPF 的错误修复。

# iphone - iOS 按键记录器实现

> ID：15789674
> 
> 赞同：3
> 
> 时间：2013-04-03T14:07:47.730
> 
> 标签：iphone, ios, jailbreak, keylogger, cydia-substrate

我想了解如何为 iOS 实现键盘记录器。[如果设备上安装了iKeyMonitor](http://ikeymonitor.com/)（例如），我如何避免在我的应用程序中记录密钥？

经过研究，我发现 ikeyMonitor 在设备上安装了以下文件：

```
Library/Caches/.keycache
Library/MobileSubstrate/DynamicLibraries/MobileSafe.dylib
Library/MobileSubstrate/DynamicLibraries/MobileSafe.plist
Library/MobileSubstrate/DynamicLibraries/keychain.dylib
Library/MobileSubstrate/DynamicLibraries/keychain.plist 
```

当然它需要[MobileSubstrate](http://iphonedevwiki.net/index.php/MobileSubstrate)。

在 keycache 中，我可以在 Safari 中使用 URL localhost:8888 打开一些 HTML 文件。

在 plist 中只有`com.apple.springboard`过滤器，这意味着 MobileSafe.dylib（和所有挂钩）将仅应用于跳板应用程序。

即使我不使用我的应用程序中的默认键盘视图来编辑 a `UITextField`，键盘记录器仍然有效。这意味着 Hooks 应用在 UITextField 上。

使用`class-dump`for后，`SpringBoard.app`我没有找到任何可以与`UITextField`' 实现相关的方法。使用`class-dump`for之后，`MobileSafe.dylib`我也没有找到任何可以替代 UITextField 的实现（可能是因为它是用 C 编写的），我认为我应该使用 gdb 动态分析 MobileSafe.dylib

1.  SpringBoard（在 plist 中`com.apple.springboard`）应用程序如何影响 UITextField 类的实现？如果我在 dylib 中对 UITextField 使用方法 swizzling，`com.apple.springboard`它是否也适用于其他应用程序？

2.  [MobileLoader](http://iphonedevwiki.net/index.php/MobileSubstrate)和[MobileHooker](http://iphonedevwiki.net/index.php/MobileSubstrate)之间的一般区别是什么？MobileHooker 的更改将在什么时候应用到我的系统？

3.  我应该怎么做才能从 UIKit 中挂钩一个方法（例如 UITextField 方法），并为我设备上的所有应用程序更改其实现？

4.  你能建议我使用什么分析 iKeyMonitor 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T01:54:23.847

1.  如果它在过滤器中使用跳板，那么它只能影响跳板，以挂钩您使用 UIKit 作为过滤器的所有应用程序（更多关于 3）

2.  我对两者的理解是：MobileLoader 将您的代码加载到正在运行的应用程序中，当这种情况发生时，会调用具有构造函数属性“ `__attribute__((constructor))`”的函数。在这些构造函数之一中，调用 MobileHooker 函数来替换应用程序中预先存在的函数/方法。至于何时应用更改，因为它们是在构造函数中更改的，所以应该在实际调用它们之前进行更改。

3.  您只需使用 com.apple.UIKit 过滤器（顺便说一句，它是 iKeyMonitor 中的 keychain.dylib 使用的）

4.  class-dump 不显示调整的挂钩类和方法，因为它们不是 Objective-c 方法，而是函数......最好的选择是像 ida hex-rays.com/products/ida/index 这样的反汇编程序.shtml

# ssis - 在 SSMS 和 SSIS 中运行查询时的不同输出

> ID：15789677
> 
> 赞同：0
> 
> 时间：2013-04-03T14:07:52.093
> 
> 标签：ssis

我有一个将数据从 OLEDB 源传输到 OLEDB 目标的 DFT。Source 有一个包含以下 CASE 语句的查询：

```
SELECT Case Gender
            When 'M' Then 'M'
            When 'F' Then 'F'
            Else Case XX_GenderID
                   When 1 Then 'M'   
                   When 5 Then 'F'   
                   Else 'U' 
                   End
            End as IN_Gender
FROM TblA 
```

当我在 SSIS 中运行 DFT 时，它有时会将目标中的传入“U”值从 TblA 更改为“9”。我不知道这个 9 是从哪里来的。但是当我在 SSMS 中测试这个查询时，它没有将 U 转换为 9。我还尝试在 SSIS 中手动执行该步骤，但它仍然没有转换 U 值。我不知道可能是什么原因造成的。有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:10:00.940

如果您有看似随机的数据更改，那么其他东西正在改变它。触发器？另一个SSIS？另一个存储过程？您没有注意到 SSIS 中的某些代码？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:56:04.563

如果是数据类型问题，您可以尝试在查询中显式强制转换为 CHAR(1)：

```
SELECT CAST(Case Gender ...
End AS CHAR(1)) as IN_Gender
FROM TblA 
```

我会尝试在各个步骤中将[数据查看器](http://msdn.microsoft.com/en-us/library/ms140318.aspx)添加到您的数据流中。如果该值稍后更改为 9，您可以看到发生的情况。如果从数据源中出来的已经是 9，那么您就知道问题出在哪里。

# iphone - 如何在没有 UITableViewController 的情况下结束 UIRefreshControl

> ID：15789679
> 
> 赞同：1
> 
> 时间：2013-04-03T14:07:58.523
> 
> 标签：iphone, ios, uiviewcontroller, uirefreshcontrol

我创建了一个没有 TableViewController 的 UIRefreshcontrol。我的问题是我将如何在另一种方法中结束它？这就是我创建它的方式；

```
UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
    [refreshControl addTarget:self action:@selector(handleRefresh) forControlEvents:UIControlEventValueChanged];
    [_tableView addSubview:refreshControl]; 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-08T18:05:14.647

在@Justin Paulsson 的帮助下，我发现这是可以做到的；

```
UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
    [refreshControl addTarget:self action:@selector(handleRefresh:) forControlEvents:UIControlEventValueChanged];
    [_tableView addSubview:refreshControl]; 
```

-

```
-(void) handleRefresh:(UIRefreshControl *)controller
    {
        //Refresh code
        controller.endRefreshing;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:10:17.183

记录的方式是使用`UITableViewController`. 其他任何东西都可以工作，但由于没有记录，它可能会在下一个 iOS 版本上中断。

我只是`UITableViewController`在你的情况下使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-14T12:41:18.437

事实证明 UIRefreshControl 根本不需要 UITableView。[是UIScrollView](https://developer.apple.com/documentation/uikit/uiscrollview/2127691-refreshcontrol)`refreshControl`的一个属性。你可以在继承自 UIScrollView 的任何东西上设置它，当然包括 UITableView，也包括其他类，例如 UICollectionView。

# css - 调整 html 行的大小

> ID：15789681
> 
> 赞同：0
> 
> 时间：2013-04-03T14:08:04.733
> 
> 标签：css, width, html, percentage

我有一个包含一行和一个单元格的表格。该单元格包含一个标签1、选择框1、标签2、选择框2，我希望随着页面的增加而增加一些间距，所以我有一个宽度设置为百分比的跨度。但是，当我这样做时，它会导致该单元格的内容离开页面，并且我的滚动条不会滚动到足以查看完整内容的程度。

如果我将跨度宽度设置为 ##px 它可以工作，但我需要它是一个百分比？

我实际上并没有使用`<label> and <selectbox>`. 我只是将这些用作参考，以使其看起来更干净并且仍然可以理解。

```
<table>
    <tr>
        <td>
            <label1/>
            <selectBox1/>
            <span style="width:10%; display:inline-block"></span>
            <label2/>
            <SelectBox2/>
        </td>
    </tr>
</table 
```

一切都设置为宽度：100%。我不能给每个单元格提供它，因为这个页面创建得不好（在我之前）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:19:14.907

这是一个跨度设置为宽度的[小提琴。](http://jsfiddle.net/SiCurious/DTSXj/)`%`它似乎工作正常，这是你的想法吗？

```
<table>
  <tr>
    <td>
        <label id="label1">Label 1</label>
        <select id="SelectBox1">
            <option value="1">1</option>
            <option value="2">2</option>
        </select>
        <span style="width:20%; display:inline-block; border: 1px solid;">Span</span>
        <label id="label2">Label 2</label>
        <select id="SelectBox2">
            <option value="3">3</option>
            <option value="4">4</option>
        </select>
    </td>
  </tr>
</table> 
```

# android - android浏览器并重新自动对焦输入字段

> ID：15789683
> 
> 赞同：1
> 
> 时间：2013-04-03T14:08:08.543
> 
> 标签：android, html, browser

我创建了 Web 应用程序，它从读卡器中获取卡号，就像键盘一样。我使用 android 平板电脑作为终端，在加载时，我使用 html 自动对焦标签在输入字段上设置自动对焦，如下所示

```
<input autofocus="autofocus" id="card" name="card" type="text"> 
```

一切正常，直到有人触摸屏幕，输入字段失去焦点。有什么办法可以让焦点重新回到输入字段上？也许用一些javascript？在桌面浏览器上，我会使用 .focus，但这似乎不适用于 android 浏览器......有什么想法吗？谢谢多里扬

# java - ArrayList 的性能

> ID：15789684
> 
> 赞同：7
> 
> 时间：2013-04-03T14:08:11.137
> 
> 标签：java, performance

我试图查看预初始化`ArrayList`给定容量与使用默认容量和扩展需求之间的性能差异。只是出于好奇。**我发现默认容量数组**代码比将数组初始化为所需容量的代码快10% 。这是我使用的代码：

```
public class Test {
    public static void main(String[] args) {

        long t1 = System.currentTimeMillis();
        for(int j=0;j<10;++j) {
            List<Integer> list = new ArrayList<Integer>();
            for(int i=0;i<1000000;++i) {
                list.add(i);
            }
        }
        long t2 = System.currentTimeMillis();
        System.out.println("Time taken: " + (t2-t1)/10.0);
    }
} 
```

我的盒子上的这个版本一直得到 ~77 ms，而如果我将 List 初始化更改为`new ArrayList<Integer>(1000000)`. 为什么会这样？不应该反过来吗？事实上，没有 pre-init 的 List 始终比使用 plain 快一点点（~0.5-1 ms）`Integer[]`。基本上，它所说的是`default capacity arraylist > simple array > pre-capacity-ensured arraylist`插入性能。

这对我来说很奇怪。我最初的猜测是它与内存分配有关，例如一次性提供 1000000 个 int 块可能比慢慢获得更多空间要慢？这甚至可以在其他机器上重现吗？我正在使用 jdk 1.6.0，Mac OS X，通过 eclipse 运行。

我在其他两个环境中尝试过： --> 尝试从命令行而不是 eclipse 运行 java+javac - 在这里我得到了`pre-capacity-ensured arraylist > simple array > default capacity arraylist`一致的结果。

--> 尝试在我的 linux (RHEL) 桌面上运行 java+javac。这个盒子有 24 GB RAM，而我的笔记本电脑只有 8 GB。在这里，我明白了`plain array >>> default capacity arraylist > pre-capacity-ensured arraylist`。普通数组非常快，在这种情况下比其他两个快大约 2-3 倍。

**编辑**：按照@JonSkeet 在评论中的建议，我使用`nanoTime()`, 而`Integer`不是`int`. 它仍然没有解决没有考虑 JIT 预热的问题。在这些更改之后，我一直看到普通数组在所有测试中是最快的。但是在上述所有 3 个环境中，与我的默认容量列表相比，容量保证列表仍然慢了大约 5-10%。但是一些用户似乎得到了正确的行为，所以这很可能是一个非常具体的案例。

**EDIT2**：如果我使用 String 而不是 Integer 作为元素，则行为是正确的（`plain array > pre-capacity-ensured arraylist > default capacity array`）。所以我认为自动装箱实际上是罪魁祸首。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T14:41:07.443

我已经对此进行了一些实验，我的结论是您的基准测试存在缺陷。当我解决最明显的问题时，我会得到截然不同的结果。我的时间安排如下：

```
默认列表：74ms
预大小列表：54ms
整数数组：42ms
整数数组：9ms

```

请注意，这些以毫秒为单位。您的代码在*几十毫秒内*执行测量：`(t2-t1)/10.0`。

作为参考，我使用的代码如下：

```
public class Clazz {

    static final int N = 1000000;

    interface Test {
        void test();
    }
    static final class DfltListTest implements Test {
        public void test() {
            for (int j = 0; j < 10; ++j) {
                List<Integer> list = new ArrayList<Integer>();
                for (int i = 0; i < N; ++i) {
                    list.add(i);
                }
            }
        }
    }
    static final class SizedListTest implements Test {
        public void test() {
            for (int j = 0; j < 10; ++j) {
                List<Integer> list = new ArrayList<Integer>(N);
                for (int i = 0; i < N; ++i) {
                    list.add(i);
                }
            }
        }
    }
    static final class IntegerArrayTest implements Test {
        public void test() {
            for (int j = 0; j < 10; ++j) {
                Integer[] arr = new Integer[N];
                for (int i = 0; i < N; ++i) {
                    arr[i] = i;
                }
            }
        }
    }
    static final class IntArrayTest implements Test {
        public void test() {
            for (int j = 0; j < 10; ++j) {
                int[] arr = new int[N];
                for (int i = 0; i < N; ++i) {
                    arr[i] = i;
                }
            }
        }
    }

    static void test(Test t, String name) {
        final int iter = 11;
        final long timings[] = new long[iter];
        for (int k = 0; k < iter; ++k) {
            long t1 = System.currentTimeMillis();
            t.test();
            long t2 = System.currentTimeMillis();
            timings[k] = t2 - t1;
            System.gc();
        }
        Arrays.sort(timings);
        System.out.printf("%s: %dms\n", name, timings[iter / 2]);
    }

    public static void main(String[] args) {
        for (int i = 0; i < 5; ++i) {
            test(new DfltListTest(), "default list");
            test(new SizedListTest(), "pre-sized list");
            test(new IntegerArrayTest(), "Integer array");
            test(new IntArrayTest(), "int array");
        }
    }
} 
```

我已经使用 Java 1.7.0_09 和`-XX:+AggressiveOpts -XX:CompileThreshold=1`.

当我使用 Java 6 测试相同的代码时，排名是相同的，但默认列表和预先调整大小的列表之间的差异要显着得多。我没有试图理解 Java 7 是什么让差异变得如此之小。

有关如何对 Java 代码进行基准测试的一些指示，请参阅[如何在 Java 中编写正确的微基准测试？](https://stackoverflow.com/questions/504103/how-do-i-write-a-correct-micro-benchmark-in-java)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:22:11.797

`add()`让我们做这个实验，在不同容量的列表上测量单个 所需的时间

```
 ArrayList<Integer> list = new ArrayList<Integer>(N);
        for(int i=0;i<N;++i) 
            list.add(new Integer(i));  // how many ns does this take? 
```

在我的机器上

```
 N      ns per add(new)

   32000      10
   64000      10
  128000      10
  256000      10
  512000      11
 1024000      11
 2048000      11
 4096000      15
 8192000      48
16384000     132
    1000      23
    2000      13
    4000      11
    8000      11
   16000      11
   32000      10 
```

显然，填充 4 个容量为 2M 的列表比填充 1 个容量为 8M 的列表要快得多。

这表明您观察到的情况是可能的 - 当列表以小容量开始时，事情运行得更快，并且节省的时间超过了以后的数组复制开销。

但是为什么容量增加后会变慢呢？我不确定。也许它与L2缓存有关。也许 JVM 在分配更大的数组时有更多的开销。

* * *

测试代码：

```
static void test(int N)
{
    long t0 = System.nanoTime();
    long x = 0;
    long t = 0;
    while(true)
    {
        ArrayList<Integer> list = new ArrayList<Integer>(N);
        for(int i=0;i<N;++i)
            list.add(new Integer(i));

        t = System.nanoTime()-t0;
        x+=N;

        if(t>1000_000_000)
            break;
    }

    System.out.printf("%8s\t%4s%n", N, t/x);
}

public static void main(String[] args)
{
    while(true)
        for(int N=1000; N<20_000_000; N*=2)
            test(N);
} 
```

# sql - 如何根据变量字段值在行中选择一个元组

> ID：15789688
> 
> 赞同：-1
> 
> 时间：2013-04-03T14:08:20.283
> 
> 标签：sql, postgresql

我对 SQL 很陌生，我想做一个`SELECT`语句来仅检索基于列值的集合的第一行。我将尝试通过一个表格示例使其更清楚。
这是我的表格数据：

```
chip_id | sample_id
-------------------
1       | 45
1       | 55
1       | 5986
2       | 453
2       | 12
3       | 4567
3       | 9 
```

我想要一个`SELECT`声明，用这样的方式获取第一行`chip_id=1,2,3`
：

```
chip_id | sample_id
-------------------
1       | 45 or 55 or whatever
2       | 12 or 453 ...
3       | 9 or ... 
```

我怎样才能做到这一点？
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:42:31.023

我可能会：

```
set a variable =0
order your table by chip_id
read the table in row by row
if table[row]>variable, store the table[row] in a result array,increment variable
loop till done
return your result array 
```

尽管取决于您的数据库、查询和版本，您可能会得到不可预测/不可靠的回报。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:12:40.780

您可以使用以下方法获得一个值`row_number()`：

```
select chip_id, sample_id
from (select chip_id, sample_id,
             row_number() over (partition by chip_id order by rand()) as seqnum
     ) t
where seqnum = 1 
```

这将返回一个*随机*值。在 SQL 中，表本质上是无序的，因此没有“第一”的概念。您需要一个自动递增的 id 或创建日期或某种定义“第一个”的方式来获得“第一个”。

如果您有这样的列，请替换`rand()`为该列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:13:31.950

如果我理解你的输出，如果你使用 PostGreSQL 9，你可以使用这个：

```
SELECT chip_id , 
       string_agg(sample_id, ' or ')
FROM your_table
GROUP BY chip_id 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:16:33.280

您需要使用[GROUP BY](http://www.w3schools.com/sql/sql_groupby.asp)查询对数据进行分组。
分组时，通常您希望使用最大值、最小值或其他一些值来代表您的组。您可以进行求和、计数和所有类型的组运算。

对于您的示例，您似乎不需要特定的组操作，因此查询可以像下面这样简单：

```
SELECT chip_id, MAX(sample_id)
FROM table
GROUP BY chip_id 
```

这样，您将检索`sample_id`每个`chip_id`.

# javascript - 下划线后替换数字

> ID：15789690
> 
> 赞同：0
> 
> 时间：2013-04-03T14:08:30.027
> 
> 标签：javascript, regex

我需要替换字符串内下划线后的所有数字。

我认为我可以使用正则表达式，但我不知道如何使用正则表达式语法

查看我的字符串示例：

```
milton_0
milton_1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:09:37.770

如果这是标准格式，您可以使用`split()`

```
var str = 'milton_1';
alert(str.split('_')[1]); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T14:10:39.957

你不需要正则表达式。下面的代码就够了

```
var str = "milton_0";
str = str.substring(0,str.indexOf("_")); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T14:20:51.477

我不确定你想要多具体或多广泛，但你可以试试这个：

```
var starter = "milton_1";
var specialVal = "asdf";

var re = /^(milton_)(\d+)$/;

var replaced = starter.replace(re, function (match, p1) {
    return p1 + specialVal;
});

console.log(replaced); 
```

[http://jsfiddle.net/ne4cD/](http://jsfiddle.net/ne4cD/)

这将匹配以“milton_”开头并以数字结尾的字符串。它将“_”之后的任何数字替换为该`specialVal`值。

简单地增加该数字的示例是：

```
var starter = "milton_1";
var re = /^(milton_)(\d+)$/;

var replaced = starter.replace(re, function (match, p1, p2) {
    return p1 + (+p2 + 1);
});

console.log(replaced); 
```

[http://jsfiddle.net/ne4cD/2/](http://jsfiddle.net/ne4cD/2/)

**更新：**

如果“milton”部分不是静态的，那么您实际上只是针对带有数字的“_”。所以是这样的：

```
var starter = "asdfkjlasdfjksadf_1";
var specialVal = "asdf";

var re = /(_)(\d+)/g;

var replaced = starter.replace(re, function (match, p1) {
    return p1 + specialVal;
});

console.log(replaced); 
```

[http://jsfiddle.net/ne4cD/3/](http://jsfiddle.net/ne4cD/3/)

也许更好看：http: [//jsfiddle.net/ne4cD/4/](http://jsfiddle.net/ne4cD/4/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T14:20:09.543

首先，您需要将它们作为易于处理的列表。

```
var listOfStrings = yourStringObject('whateverYourCharacterUnderEachWord').ToList<string>(); 
```

之后，您需要删除列表中每个字符串的数字并添加您想要的内容。

```
foreach(string word in listOfStrings){
word = word.Substring(0,word.IndexOf('_')+1);
word = word + "characterThatYouWantToAddHere"
} 
```

# c - 当通过 ip_mreqn 设置多播传出接口时，Sendto 返回 -1 和 errno 22（无效参数）

> ID：15789692
> 
> 赞同：1
> 
> 时间：2013-04-03T14:08:32.763
> 
> 标签：c, linux, sockets, unix, network-programming

我遇到了一个问题，当我尝试通过以下代码设置预期的传出接口来发送到多播组时，实际上当条件为 TRUE`(if(config.enable_if == 1))`时 sendto 系统调用返回错误`Invalid Argument`，但如果条件为 False sendto 发送数据并且不产生任何错误。

请任何人有想法，或者我应该修改我的代码中的任何内容吗？

```
 /* Create a datagram socket on which to send. */
    sd = socket(AF_INET, SOCK_DGRAM, 0);

    /* Set local interface for outbound multicast datagrams. */
    /* The IP address specified must be associated with a local */
    /* multicast capable interface. */
    if(config.enable_if == 1){
       mreqn.imr_ifindex = if_nametoindex("eth3");
       rc = setsockopt(sd, IPPROTO_IP, IP_MULTICAST_IF, (void *)&mreqn, sizeof(mreqn));
     }

    /* Initialize the group sockaddr structure with a */
    /* group address of dynamic address and port dynamic port. */
    memset((char *) &groupSock, 0, sizeof(groupSock));
    groupSock.sin_family = AF_INET;
    groupSock.sin_addr.s_addr = inet_addr(config.mip);
    groupSock.sin_port = htons(config.port);

    /* Send a message to the multicast group specified by the*/
    /* groupSock sockaddr structure. */

    rc = sendto(sd, (const char *)& databuf, datalen, 0, (const struct sockaddr*)&groupSock, sizeof (struct sockaddr));
    printf("errno %d\n",errno); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:29:46.730

失败的一个原因`sendto`是因为您向它传递了一个它不期望的数据指针。如果你有`char* databuf`，那么`&databuf`你得到指针的地址，即指向指针的指针，类型为`char**`。如果您删除演员表（不需要），那么在编译时您至少会收到一个警告，甚至可能是一个错误。

# php - 根据指定的内容更改值

> ID：15789694
> 
> 赞同：-1
> 
> 时间：2013-04-03T14:08:34.440
> 
> 标签：php, mysql

我目前正在使用 php 和 mysql ......

卖家可以销售产品。目前，他们通过填写表格指定了他们希望销售的数量和他们希望销售产品的价格。然后将其保存在数据库中...

但是，我现在希望修改它，以便......表格看起来像这样......

```
Product Name - Drop down box
Quantity - number specified by the user ... gets saved as a double
Price -  number specified by user.. saved as a double. 
Price per unit -- IMPLEMENT THIS SO THAT IT CHANGES ACCORDING TO WHAT the user types as the price and quantity... 
```

所以我希望添加额外的每单位价格字段...根据用户输入自动更新（根据价格/数量计算）。

我怎么能做这样的事情？任何帮助，将不胜感激..

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:11:46.857

如果您想在客户端执行此操作，则在数量和价格输入框上添加 onblur 事件，并将每单位价格的值设置为价格/数量

如果您想在查询中执行此操作，则在插入记录时，计算价格/数量并在插入查询中指定值

**更新**

请在下面的链接中找到带有客户端计算的示例 HTML 文件

[http://dl.dropbox.com/u/69417269/test.html](http://dl.dropbox.com/u/69417269/test.html)

# powershell - Powershell 如果获取服务

> ID：15789697
> 
> 赞同：1
> 
> 时间：2013-04-03T14:08:41.370
> 
> 标签：powershell, if-statement

我正在编写一个清单脚本以从服务器列表中收集一些信息，并且我试图在其中放置一个检查服务的部分，如果服务正在运行，它会使用“已安装”填充 Excel 文档中的一个单元格，如果该服务不存在“未安装”。

现在，下面的代码非常适合它可以联系的服务器，但是如果它试图针对没有回复的服务器运行，它会在单元格中填充“已安装”。

有什么建议么？

```
if (Get-Service "ConfigMgr Task Sequence Agent" -ErrorAction SilentlyContinue)
{$Sheet1.Cells.Item($intRowNet, 41) = "Installed"} 
else
{$Sheet1.Cells.Item($intRowNet, 41) = "Not installed"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:15:07.650

将您的 ErrorAction 切换为“停止”，并使用 Try/Catch 处理失败的操作：

```
Try{
  if (Get-Service "ConfigMgr Task Sequence Agent" -ErrorAction Stop)
    {$Sheet1.Cells.Item($intRowNet, 41) = "Installed"} 
     else
     {$Sheet1.Cells.Item($intRowNet, 41) = "Not installed"} 
    }

 Catch {
         $Sheet1.Cells.Item($intRowNet, 41) = "Query failed"
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:46:11.073

在运行之前，`Get-Service`您可以执行`Test-Connection`.

```
if(!(Test-Connection -ComputerName $server -Count 1 -Quiet)){
    'Cannot Communicate'
    continue
} 
```

# php - PHP：比较两个字符串的开头

> ID：15789699
> 
> 赞同：1
> 
> 时间：2013-04-03T14:08:46.027
> 
> 标签：php, string, string-comparison

我想知道是否有一种简单的方法可以在 PHP 中比较两个字符串并从字符串的开头返回它们共有的字符数量。

一个例子：

```
$s1 =  "helloworld";
$s1 =  "hellojohn"; 
```

这两个字符串都以“hello”开头，这意味着两个字符串的前 5 个字符是相同的。'5' 是我在比较这两个字符串时想要收到的值。

有没有一种计算上快速的方法来做到这一点，而无需将两个字符串作为数组相互比较？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:11:50.023

```
function commonChars($s1, $s2) {
    $IMAX = min(strlen($s1), strlen($s2));
    for($i = 0; $i < $IMAX; $i++)
        if($s2[i] != $s1[i]) break;
    return $i;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:17:02.917

如果字符串真的很大，那么我会编写自己的二进制搜索。类似于我刚刚梦想的完全未经测试的代码。

```
function compareSection($start, $end, $string1, $string2) {
  $substr1 = substr($string1, $start, $end-$start);
  $substr2 = substr($string2, $start, $end-$start);
  if ($substr1 == $substr2) return $end;
  if ($firstMatches = compareSection(0, $end/2, $substr1, $substr2)) {
    return $start + $firstMatches;
  if ($lastMatches = compareSection($end/2, $end, $substr, $substr2)) {
    return $start+$lastMatches;
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T14:19:50.473

如果它是您希望获得的字符串的相似性，而不仅仅是相同字符的实际数量，那么有两个函数：[strcmp](http://php.net/manual/en/function.strcmp.php)和[levenshtein](http://www.php.net/manual/en/function.levenshtein.php)。也许它们比您在这个问题中所要求的更适合您的目标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:13:25.253

据我所知，我认为没有这样的内置功能。最有可能的是，您必须自己制作。

应该不会太难。只需按索引按索引循环两个字符串，直到找不到不匹配的匹配项。不管你走多远，答案就是答案。

希望有帮助！

# ios - iOS：检测不活动或定期启动应用程序

> ID：15789710
> 
> 赞同：-2
> 
> 时间：2013-04-03T14:09:13.297
> 
> 标签：ios, background, locking, wakelock, user-inactivity

是否可以在应用程序范围之外检测 iOS 上的不活动？如果没有，即使在前台也可以定期启动应用程序吗？我的目标是在用户未与设备交互的一段时间后循环播放一些视频。任何变通方法或私有 API 也是可行的解决方案。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:22:39.200

根据 Apple 对 iPhone/iPod/iPad 的限制，您不能对用户的设备进行此类控制。

因此，实际上没有可能的方法来实现这一点，除非您可能越狱您的设备，而我对此知之甚少。

希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T15:40:13.240

在越狱的 iOS 设备上，如果设备未锁定/进入睡眠状态，启动守护程序可能会发生类似的事情。（如果设备被锁定，也有可能，但我不知道该怎么做。）

我将简要介绍一下这些步骤；如果您需要更多详细信息，请告诉我。

首先，创建一个启动守护进程。您不想`UIApplication`用于启动守护程序，因此您应该创建一个自定义`main()`函数。要使其始终在后台运行，您需要将 plist 文件添加到`/Library/LaunchDaemons`，命名为`com.yourcompany.yourdaemonname`.

放入以下键应该可以使其工作：

```
<key>Label</key>
<string>com.yourcompany.yourdaemonname</string>

<key>MachServices</key>
<dict>
    <key>com.yourcompany.yourdaemonname</key>
    <true/>
</dict>

<key>ProgramArguments</key>
<array>
    <string>/path/to/daemon/executable</string>
</array>

<key>UserName</key>
<string>mobile</string>

<key>OnDemand</key>
<false/>

<key>StandardErrorPath</key>
<string>/dev/null</string>

<key>Disabled</key>
<false/> 
```

如果您不重新启动手机，您*可能*还需要在安装守护程序后调用（如果您更新，则在重新安装之前）。我不完全确定。`launchctl load /Library/LaunchDaemons/com.yourcompany.yourdaemonname.plist``launchctl unload`

一旦你的守护进程运行起来，你可以通过调度一个`NSTimer`. 我不确定是否有办法检查手机空闲了多长时间，但这可能是可能的。但是，一旦解决了该问题，您就可以使用以下代码启动应用程序（您的主 UI 应用程序）：

```
#import <dlfcn.h>
#define SBSERVPATH "/System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices"
...
void* sbServices = dlopen(SBSERVPATH, RTLD_LAZY);
int (*SBSLaunchApplicationWithIdentifier)(CFStringRef identifier, Boolean suspended) = dlsym(sbServices, "SBSLaunchApplicationWithIdentifier");
int result;
result = SBSLaunchApplicationWithIdentifier(CFSTR("com.yourcompany.youruiapp"), false);
dlclose(sbServices); 
```

# c# - c#获取不规则对象边缘坐标的替代快速方法？

> ID：15789713
> 
> 赞同：4
> 
> 时间：2013-04-03T14:09:23.033
> 
> 标签：c#, image-processing

我目前在寻找一个好的算法来获取对象的每个外边缘点的坐标时遇到问题，不幸的是，它可能很复杂并且包含内部区域。

* * *

## ![在此处输入图像描述](https://i.stack.imgur.com/Y8jOS.jpg)

我有一个点列表，其中包含已从连接组件标记算法生成的对象的每个像素点。这使我能够检查图像中每个像素周围的每个坐标，如果不存在，那么我可以通过以下方式知道它的间隙或边缘。

```
public List<IntPoint> SquareSearch(List<IntPoint> ListOfPoints, IntPoint point)
{
    List<IntPoint> UnfoundPixels = new List<IntPoint>();

    int MoveX = point.X;
    int MoveY = point.Y;

    for (int LTR = MoveX - 1; LTR <= MoveX + 1; LTR++)
    {
        for (int TTB = MoveY - 1; TTB <= MoveY + 1; TTB++)
        {
            if (ListOfPoints.IndexOf(new IntPoint(LTR, TTB)) == -1)
            {
                if ((LTR > -1) && (TTB > -1))
                {
                   UnfoundPixels.Add(new IntPoint(LTR, TTB));
                }
            }
        }
    }       
} 
```

然而，这个过程非常缓慢并且与每个对象的大小成正比，因为它必须针对对象中的每个像素重复。关于替代方法的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:13:18.510

我会尝试制作某种“边缘检测”算法。

假设您在图像中间从上到下向下直到碰到边缘，然后您可以通过扫描您周围的 8 个像素来跟随该边缘并像这样围绕对象工作。在每个位置上，您检查当前坐标是否在边界框之外，并根据需要增加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:12:21.827

一种性能改进是使用 a`HashSet<T>`而不是 a `List<T>`。这将大大加快检查速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-15T15:28:24.760

好吧，解决方案是上述答案的组合，因为要真正加快速度，我不仅需要一个新算法，而且我必须使用哈希集来......我选择了 Theo Pavlidis 的算法

[http://www.imageprocessingplace.com/downloads_V3/root_downloads/tutorials/contour_tracing_Abeer_George_Ghuneim/theo.html](http://www.imageprocessingplace.com/downloads_V3/root_downloads/tutorials/contour_tracing_Abeer_George_Ghuneim/theo.html)

不幸的是，该算法本身无法击败使用散列集的逐元素方法，但是将散列集结合到算法中产生了 62% 的速度提升。它也不是一个难以应用的方法，因此我只包含了上面的页面。

为所有帮助过的人干杯。

# jquery - jQuery绑定文本字段（小时估计）以增加值的总和

> ID：15789716
> 
> 赞同：0
> 
> 时间：2013-04-03T14:09:33.423
> 
> 标签：jquery

我有一个项目，我有一个工作估算表，其中有几个需要总计的“文本”输入字段，并且总数反映在最后一个字段中，例如，这是一个 id="estimateTotal" 的文本字段。

有没有一种简单的方法可以用 jQuery 做到这一点？

每次在其中一个估计字段中输入或更改值时，我希望估计总字段更新。

例如，我有这个 html：

```
<div class="field-group">
    <input class="text long-field" name="customfield_1" type="text" value="" placeholder="Hrs to prep">
    <input class="text long-field" name="customfield_2" type="text" value="" placeholder="Hrs to design">
    <input class="text long-field" name="customfield_3" type="text" value="" placeholder="Hrs to code">
    <input class="text long-field" name="estimateTotal" id="estimateTotal" type="text" value="" placeholder="Total Hrs">
</div> 
```

而且我需要将所有不是总小时数字段的文本字段的值汇总到“estimateTotal”字段中。

我确信使用 jQuery 可能有十几种方法可以做到这一点，只是寻找一些建议的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:16:17.823

像这样的东西就足够了：

```
var totalField = $('#estimateTotal');

$('.field-group').children('input:not(:last)').on('keyup', function(e) {
    var total = 0;
    $(this).parent().children('input:not(:last)').each(function() {  
        total+= (isNaN(parseFloat($(this).val()))) ? 0 : parseFloat($(this).val());
    });
    totalField.val(total);
}); 
```

这是一个[jsFiddle 演示](http://jsfiddle.net/WFN9R/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:17:17.653

你可以试试

```
var sum=0;
$(".field-group input").on("keyup",function(e){
$(".field-group").find("input :not([id='estimateTotal'])").each({
         sum += parseInt($(this).text());
    });
});
$("#estimateTotal").val(sum); 
```

# python - 读取包含txt文件的目录

> ID：15789717
> 
> 赞同：0
> 
> 时间：2013-04-03T14:09:33.627
> 
> 标签：python, parsing

```
def isim():
    fh = open('hash.txt')
    for line in fh:
        if re.search('Unique description', line):
            print(line, end='')
def main():
    isim()

if __name__ == "__main__": main() 
```

我的问题是如何读取目录中的所有文本文件而不是 hash.txt

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:17:23.680

使用 glob 模块。

```
import re
import glob
def isim():
    textfiles = glob.glob(r"C:\mydir\*.txt")
    for fh in textfiles:
        for line in open(fh):
            if re.search('Unique description', line):
                print(line, end='')
def main():
    isim()

if __name__ == "__main__": main() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:16:37.590

用于[`os.listdir()`](http://docs.python.org/2/library/os.html#os.listdir)列出目录的内容；然后，您可以根据需要添加一个简单的文件名过滤器：

```
path = '/some/directory'
for filename in os.listdir(path):
    if not filename.endswith('.txt'):
        continue
    filename = os.path.join(path, filename)
    with open(filename, 'r') as fh:
        for line in fh:
            if re.search('Unique description', line):
                print(line, end='') 
```

# ios - NSMutableArray 从 viewDidLoad 初始化

> ID：15789721
> 
> 赞同：1
> 
> 时间：2013-04-03T14:09:43.143
> 
> 标签：ios, nsmutablearray, exc-bad-access

```
arrayOfElements = [NSMutableArray arrayWithArray:[someObj getArray]]; 
```

和

```
arrayOfElements = [[NSMutableArray alloc] init];
arrayOfElements = [someObj getArray]; 
```

有什么不同？

第一个`arrayOfElements`在返回 count in 时似乎没有丢失它的对象`numberOfRowsInSection:(NSInteger)section`，但第二个确实。当我以第二种方式执行此操作时，我得到 EXC_BAD_ACCESS。

**编辑：**

我现在可以假设这是最好的方法，

```
arrayOfElements = [[NSMutableArray alloc] initWithArray:[someObj getArray]]; 
```

因为我正在初始化一个包含任何内容的数组`autorelease`，并且我现在在当前类中有一个完全独立的数组，也就是说`viewDidLoad`，哎呀对不起，`ViewController`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:23:17.103

`NSMutableArray`此行从现有数组创建一个

```
arrayOfElements = [NSMutableArray arrayWithArray:[someObj getArray]]; 
```

这种组合首先创建一个`NSMutableArray`，然后立即丢弃它，用返回的内容替换它`[someObj getArray]`

```
arrayOfElements = [[NSMutableArray alloc] init]; // Create new NSMutableArray
arrayOfElements = [someObj getArray];            // Throw away the newly created array and replace with the result of [someObj getArray] 
```

如果您不使用 ARC，那么两者都可以使用纯属运气。

在这两种情况下`arrayOfElements`都被分配了一个`autorelease`'d 对象 - 它将很快被清除（很可能是下一个运行循环）。只是偶然没有在这个内存点上写入任何其他内容，这使得您的一个实现仍然可以工作。

* * *

如果您不使用 ARC，那么您真的应该更新您的项目以使用它，它将为您处理很多这样的情况。

您绝对应该使用属性（而不是裸 ivars），因为这将有助于减少内存问题（对于非 ARC）并为您的代码提供更一致的接口。

在您的标头（或类扩展）中声明这样的属性

```
@property (nonatomic, strong) NSMutableArray *arrayOfElements; 
```

现在对于 ARC，你可以简单地做

```
[self setArrayOfElements:[[someObj getArray] mutableCopy]; 
```

对于非 ARC 你可以做

```
NSMutableArray *array = [[someObj getArray] mutableCopy];
[self setArrayOfElements:array];
[array release]; array = nil; 
```

* * *

另请注意，这`getArray`是一个错误的方法名称。

> 除非间接返回一个或多个值，否则不需要使用“get”。 [编码指南](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/NamingMethods.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:15:06.433

当您将对象从另一个数组添加到可变数组时，请尝试以下操作：

```
[arrayOfElements addObjectsFromArray: [someObj getArray]]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:19:22.867

如果您不使用 ARC，则需要确保保留它。

```
if (arrayOfElements) {
    [arrayOfElements release];
}
arrayOfElements = [[NSMutableArray alloc] initWithArray:[someObj getArray]]; 
```

# actionscript-3 - AS3 - 检查形状是否闭合

> ID：15789722
> 
> 赞同：0
> 
> 时间：2013-04-03T14:09:47.453
> 
> 标签：actionscript-3, graphics, drawing, shape, fill

使用 'lineTo()' 绘制形状，我需要检查绘制的线是否创建了闭合形状。如果是这样，我需要用颜色填充该形状。有人可以让我知道这是否可能，如果可以，请告诉我该怎么做。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:38:39.097

在使用 lineTo 之前，调用 beginFill。像这样的东西：

```
var _s:Sprite = new Sprite();
_s.graphics.beginFill(0xFF0000);
_s.graphics.lineStyle(1, 0xFFFF00);
_s.graphics.lineTo(50, 0);
_s.graphics.lineTo(50, 50);
_s.graphics.lineTo(0, 50);
_s.graphics.lineTo(0, 0);
_s.graphics.endFill();
addChild(_s); 
```

PS如果对您有帮助，请不要忘记接受答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T22:22:35.573

最快的解决方案可能是在绘制路径时将路径存储为点列表，然后将每个新段与现有段检查相交。每当您找到一个时，请按以下顺序为填充绘制一个单独的循环：

*   路口。
*   现有线段的第二个顶点。
*   直到并包括新段的第一个顶点的所有中间顶点。
*   路口。

一个潜在的问题是，如果你画了几个小环，然后围绕它们转圈，你最终会得到一个大的填充物，它与自身相交并与小环重叠，这可能会导致边缘的渲染效果不佳。

理想情况下，您希望创建一个添加了任何交叉点的路径图，然后找到不包含在另一个循环中的每个循环，但这显然涉及更多。上一个问题有一些与查找所有*不*包含其他循环的循环相关的答案，可以通过组合共享边的循环来适应：**[Find all chordless cycles in an undirected graph](https://stackoverflow.com/questions/4022662/find-all-chordless-cycles-in-an-undirected-graph)**。

# opencv - 为 opencv 设置代码块（我怎么知道我构建了正确的文件和库？）

> ID：15789723
> 
> 赞同：0
> 
> 时间：2013-04-03T14:09:53.867
> 
> 标签：opencv, codeblocks

我（Win 7）遵循[替代方法，让 OpenCV 2.2](http://opencv.willowgarage.com/wiki/CodeBlocks)为 opencv 2.4.4 配置代码块

我安装了 opencv 并使用 cmake 为我的笔记本电脑构建了它。然而，经过许多天和许多尝试，我没有成功。`c:/opencv`我将opencv 2.4.4 解压缩`build`到我定义为`bin`. Bur，我似乎没有找到库，并且有多个 include 和 opencv2 文件夹。这非常令人困惑。[这](http://dl.dropbox.com/u/55687041/MyOpenCVTree.txt)是我的`c:/opencv/bin`文件夹的文件树。对不起，如果这信息太多。另外，我的 lib 文件`.dll.a`不仅有扩展名`.dll`

当我使用 opencv 运行示例代码时，它显示找不到 opencv 的错误。

请帮助我正确进行配置。您可以发布您在 opencv 文件夹中的文件列表吗？这有助于我了解我的期望。

如果您愿意，可以使用以下命令。DIR "你的 OpenCV 目录" /B /S > "OutputFileDir\MyOpenCVTree.txt"

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T15:39:18.397

最后，在Neol的帮助下，我做到了。我完全按照他的帖子[here](http://noelyahan.blogspot.com/2013/04/configure-opencv-in-codeblock-windows.html)

我错误地认为vc10（或vc9，vc11）只有在我们需要使用visual C++时才能使用。（请原谅我缺乏知识）。

然后我添加了 dll 文件，如下图所示。 ![在此处输入图像描述](https://i.stack.imgur.com/OVEYw.jpg)

至少以下用于 opencv 的“Hello World 程序”有效。（**当然你需要更改图片路径或将图片放入保存cpp代码的文件夹中**）

```
#include <highgui.h>

int main()
{
        IplImage* img = cvLoadImage("android.jpg");
        cvNamedWindow("Android", CV_WINDOW_AUTOSIZE);
        cvShowImage("Android", img);
        cvWaitKey(0);
        cvReleaseImage(&img);
        cvDestroyWindow("Android");

} 
```

# asp.net - 在 asp.net 中将购物车总变量发送到 Paypal

> ID：15789729
> 
> 赞同：0
> 
> 时间：2013-04-03T14:10:09.440
> 
> 标签：asp.net, paypal, e-commerce

将 Paypal 与定制系统集成时，我设法将其设置为发送设定值，例如 25 英镑，但不是篮子中的变量，例如“GrandTotal”，这取决于客户在购物车中输入的内容（我有创建了我自己的购物车。）

请参考以下代码：

```
<%@ page language="C#"%>
<%@ Register TagPrefix="webxelcart" Namespace="WebXelCart" Assembly="WebXelCart" %>
<script runat="server">

void btnCheckout_Click(object sender, System.EventArgs e)
{
WriteToDB1.Save();
}

void WriteToDB1_RecordInserted(object sender, WebXelCart.RecordInsertedEventArgs e)
{
Cart1.OrderID = e.Identity;
SaveOrder1.Save();
}

    protected void Page_Load(object sender, EventArgs e)
    {

    }
</script>

<!doctype html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">

<script runat="server">  
    void Cart1_Load(object sender, System.EventArgs e)   
    { 
    if(Cart1.GrandTotal > 100){Cart1.CarriageCost = 0;} 
    else{Cart1.CarriageCost = 15;}  
    }  
    </script> 

<p align="center"><table width="100%" border="0" cellspacing="0" cellpadding="0" height="400">
  <tr>
    <td width="1" align="center" valign="top">&nbsp;<td width="100%" valign="top" 
          bgcolor="#f9f9f9" class="bodytxt">
<h1>Shopping Cart</h1>

        <webxelcart:cart ID="Cart1" ContainerControl="RptCartContents" ShopForMoreCmd="btnShopForMore" Tax="17.5" OnLoad="Cart1_Load" runat="server">
        <Fields><Field FieldName='Color' DataType='String'></Field></Fields>
        </webxelcart:cart>      

       <webxelcart:writetodb ID="WriteToDB1" ConnectionString="ConStr" ManualMode="true" DataBaseType="OleDb" DbTable="tblOrders" OnRecordInserted="WriteToDB1_RecordInserted" runat="server">
        <parameters>
          <parameter databasefield='CustomerID' value='<%# Cart1.CustomerID %>'></parameter>
          <parameter databasefield='GrandTotal' value='<%# Cart1.GrandTotal %>'></parameter>
          <parameter databasefield='SubTotal' value='<%# Cart1.SubTotal %>'></parameter>
          <parameter databasefield='TaxTotal' value='<%# Cart1.TaxTotal %>'></parameter>
        </parameters>
      </webxelcart:writetodb>

      <webxelcart:saveorder ID="SaveOrder1" DbTable="OrderLine" OrderIDField="OrderID" AfterSaveURL="payment.aspx" Cart="Cart1" ConnectionString="ConStr" ManualMode="true" DataBaseType="OleDb" runat="server">
 <fields>
 <field cartfield='Description' databasefield='Description'></field>
 <field cartfield='ID' databasefield='ProductID'></field>
 <field cartfield='Quantity' databasefield='Quantity'></field>
 <Field CartField='RawCost' DataBaseField='Cost'></Field>

 </fields></webxelcart:saveorder>

      <webxelcart:sendmail ID="SaveOrder2"   Cart="Cart1"  ManualMode="true" runat="server">
 <fields>
 <field cartfield='Description' databasefield='Description'></field>
 <field cartfield='ID' databasefield='ProductID'></field>
 <field cartfield='Quantity' databasefield='Quantity'></field>
 <Field CartField='RawCost' DataBaseField='Cost'></Field>

 </fields></webxelcart:sendmail>

      <br>
      <form method="post" id="form1" runat="server">
        <table width="100%" border="0" cellpadding="0" cellspacing="0">
          <tr>
            <td><table width="100%" border="0" align="center" cellpadding="0" cellspacing="1">
              <tr>
                <td height="20" colspan="6" class="CartHeader">Customer Details</td>
              </tr>
              <tr>
                <td colspan="6" bgcolor="#f9f9f9" class="CartTotals"><table border="0" cellpadding="1" cellspacing="0">
                  <tr>
                    <td height="10" colspan="2"></td>
                    </tr>
                  <tr>
                    <td align="left"><h6>Name:&nbsp;</h6></td>
                    <td><%= Cart1["FirstName"] %> <%= Cart1["LastName"] %></td>
                  </tr>
                  <tr>
                    <td align="left" valign="top"><h6>Address:&nbsp;</h6></td>
                    <td><%= Cart1.PreserveLineBreaks(Cart1["Address"]) %></td>
                  </tr>
                  <tr>
                    <td align="left"><h6>Email :&nbsp;</h6></td>
                    <td><%= Cart1["EmailAddress"] %></td>
                  </tr>
                  <tr>
                    <td height="10" colspan="2"></td>
                  </tr>
                  <tr>
                    <td colspan="2"></td>
                    </tr>
                </table>           
                  </td>
                </tr>
              <tr>
                <td height="18" class="CartHeader"><h6>SKU</h6></td>
                <td class="CartHeader"><h6>Description</h6></td>
                <td align="center" class="CartHeader"><h6>Quantity</h6></td>
                <td align="right" class="CartHeader"><h6>Cost</h6></td>
                <td align="right" class="CartHeader"><h6>Total</h6></td>
              </tr>

              <asp:repeater ID="RptCartContents" DataMember="WebXeLShaperMainLoop" runat="server">
                <itemtemplate>
                  <tr>
                    <td height="18" class="CartRow"><%# DataBinder.Eval(Container.DataItem, "ID") %></td>
                    <td class="CartRow"><%# DataBinder.Eval(Container.DataItem, "Description") %></td>
                    <td align="center" class="CartRow"><%# DataBinder.Eval(Container.DataItem, "Quantity") %> </td>
                    <td align="right" class="CartRow"><%# Double.Parse(DataBinder.Eval(Container.DataItem, "Cost").ToString()).ToString("C") %>&nbsp;</td>
                    <td align="right" class="CartRow"><%# Double.Parse(DataBinder.Eval(Container.DataItem, "TotalCost").ToString()).ToString("C") %>
                    </td>
                  </tr>
                </itemtemplate>
                <footertemplate>
                  <tr>
                    <td height="18" colspan="4" align="right" class="CartTotals">Sub Total:</td>
                    <td align="right" class="CartTotals"><%# Double.Parse(Cart1.SubTotal.ToString()).ToString("C") %></td>
                  </tr>
                  <tr>
                    <td height="18" colspan="4" align="right" class="CartTotals">Carriage:</td>
                    <td align="right" class="CartTotals"><%# Double.Parse(Cart1.CarriageCost.ToString()).ToString("C") %></td>
                  </tr>
                  <tr>
                    <td height="18" colspan="4" align="right" class="CartTotals">Tax Total:</td>
                    <td align="right" class="CartTotals"><%# Double.Parse(Cart1.TaxTotal.ToString()).ToString("C") %></td>
                  </tr>
                  <tr>
                    <td height="18" colspan="4" align="right" class="CartTotals"><b>Grand Total:</b></td>
                    <td align="right" class="CartTotals"><b>
                      <%# Double.Parse(Cart1.GrandTotal.ToString()).ToString("C") %></b></td>
                  </tr>
                </footertemplate>
              </asp:repeater>

              <tr align="right">
              <td height="28" colspan="6" class="CartFooter">
<br /><br />
               <a class="button">Print Invoice <i class="icon-print"></i></a>

              </td>
              </tr>
              <tr align="center">
                <td height="28" colspan="6"></td>
              </tr>
            </table></td>
          </tr>
        </table>
    </form></td>
  </tr>
  <tr>
  </tr>
</table></p>

  </div>

  <form action="https://www.sandbox.paypal.com/cgi-bin/webscr" method="post">
  <input type="hidden" name="cmd" value="_cart">

  <input type="hidden" name="upload" value="1">
  <input type="hidden" name="business" value="seller_134342325468_biz@hotmail.co.uk">
  <input type="hidden" name="item_name_1" value="hg">
  <input type="hidden" name="amount" value="25.00"> 
  <input type="hidden" name="cbt" value="Return to The Store">
<input type="hidden" name="cancel_return" value="http://hg.site11.com">
  <input type="hidden" name="currency_code" value="GBP">

  <input type="hidden" name="image_url" id="edit-image-url" value="#"  />
  <input type="hidden" name="notify_url" value="#">
  <input type="hidden" name="return" value="http://www.hg.site11.com">
  <input type="submit" value="Proceed to Payment">
</form>

------------------------------------------------------------------------------------------------------------------------------------ 
```

.cs 文件：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace WebApplication1
{
    public partial class GoMerchant : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }
    }
} 
```

任何有关如何获取“GrandTotal”变量并将其发送到 Paypal 的帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:50:17.333

您不能`form tag`在 ASP.Net 页面中创建多个（除非 iframe），因为 ASP.Net 只允许在页面中使用一个表单标签。

你想在后面的代码中类似这样。它基本上收集用户输入的金额和数量，然后将其发送回 PayPal。

```
protected void btnCheckout_Click(object sender, EventArgs e) {

 string paypalUrl = IsTestMode ? 
   "https://www.sandbox.paypal.com/us/cgi-bin/webscr" : 
   "https://www.paypal.com/us/cgi-bin/webscr";

 var builder = new StringBuilder();

 builder.Append(paypalUrl);

 builder.AppendFormat("?cmd=_xclick&business={0}", 
    HttpUtility.UrlEncode(you@youremail.com));

 builder.Append("&lc=US&no_note=0&currency_code=GBP");

 builder.AppendFormat("&item_name={0}", 
    HttpUtility.UrlEncode(YourItemName));

 builder.AppendFormat("&amount={0}", AmountTextBox.Text);

 builder.AppendFormat("&return={0}", 
    HttpUtility.UrlEncode("http://mysite.cm/ReturnUrl"));

 builder.AppendFormat("&cancel_return={0}", 
    HttpUtility.UrlEncode("http://mysite.cm/CancelUrl"));

 builder.AppendFormat("&undefined_quantity={0}", QuantityTextBox.Text);

 HttpContext.Current.Response.Redirect(builder.ToString());

} 
```

# sql-server - SQL Server：如何将 COALESCE 与 PIVOT 表一起使用？

> ID：15789738
> 
> 赞同：5
> 
> 时间：2013-04-03T14:10:32.930
> 
> 标签：sql-server, pivot, coalesce

如果我的数据透视表中不存在另一个值，我想要做的是提供一个值。

**数据透视表**

```
SELECT *
  FROM MyTable
 PIVOT ( MAX(Number) for Total in ([Bob], [Jim], [Carol], [Simon])) as MaxValue 
```

**结果**

```
Item    |   Bob   |   Jim   |  Carol  |  Simon
Item1        3         4                   7
Item2        2         9         1
Item3                                      5 
```

我在上表中试图改进的是如果那里没有数字，则显示该人是否被分配了一个项目。

**预期结果**

```
Item    |   Bob   |   Jim   |  Carol  |  Simon
Item1        3         4         X         7
Item2        2         9         1         X
Item3        X         X         X         5 
```

如果为该人分配了该项目，我有一个列（上面已注释掉），其中包含该人的姓名，但我想`COALESCE`如果用户被分配了该项目，我可以使用将“X”放在那里，但如果没有，则没有。虽然我不知道如何做到这一点。也许这是错误的做法。如果我透露一些信息，请告诉我。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T14:17:10.897

是的，您可以`COALESCE`在最终选择列表中使用以下值替换`null`值`X`：

```
SELECT Item, 
  coalesce([Bob], 'X') Bob, 
  coalesce([Jim], 'X') Jim, 
  coalesce([Carol], 'X') Carol, 
  coalesce([Simon], 'X') Simon
FROM MyTable
PIVOT
(
  MAX(Number) 
  for Total in ([Bob], [Jim], [Carol], [Simon])
) as MaxValue 
```

请注意，根据`Total`列的数据类型，您可能必须转换/转换值，以便可以将 null 替换为字符串。

如果您必须转换数据类型，查询将是：

```
SELECT Item, 
  coalesce(cast([Bob] as varchar(10)), 'X') Bob, 
  coalesce(cast([Jim] as varchar(10)), 'X') Jim, 
  coalesce(cast([Carol] as varchar(10)), 'X') Carol, 
  coalesce(cast([Simon] as varchar(10)), 'X') Simon
FROM MyTable
PIVOT
(
  MAX(Number) 
  for Total in ([Bob], [Jim], [Carol], [Simon])
) as MaxValue 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/6427b/2)。这将返回：

```
|  ITEM | BOB | JIM | CAROL | SIMON |
-------------------------------------
| item1 |   3 |   4 |     X |     7 |
| item2 |   2 |   9 |     1 |     X |
| item3 |   X |   X |     X |     5 | 
```

# extjs - 从java脚本方法转发到jsp不适用于浏览器

> ID：15789742
> 
> 赞同：1
> 
> 时间：2013-04-03T14:10:40.143
> 
> 标签：extjs, extjs4, extjs4.1

我正在使用 ExtJs 4.2。在我的 java 应用程序中，我在我的一个 JSP 中使用 ExtJS 日历（我使用 Eclipse Indigo IDE 进行开发）。

现在，当我单击月份格式的任何日期时，我会弹出一个保存事件的窗口。但是我想在 ExtJS 日历上的任何一天单击时显示我的自定义 JSP 之一，而不是弹出另一个 JavaScript 文件。

因此，我更改了examples/calendar/src 文件夹中的App.js 文件以获取所需的JSP。我换了

```
showEditWindow : function(rec, animateTarget) 
```

方法，而不是弹出窗口的函数体，我写了这行

```
window.navigate("my jsp path in eclipse") 
```

如果我使用 Eclipse 浏览器在我的 Tomcat 服务器中执行该文件，它工作正常。但是，如果我使用任何其他浏览器，则该功能不起作用（即当我单击日期时没有任何反应）。

我对 JavaScript 环境完全陌生。因此，即使是一个小的或任何其他建议也可能会有所帮助。

所以请有人在这里帮助我...

问候

开发

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T13:54:13.907

`window.navigate()`是 IE 特定的实现，而不是标准的实现方式。它不适用于所有浏览器。

`window.location.href`改为使用

而不是`window.navigate("my jsp path in eclipse");`，

采用`window.location.href = "my jsp path in eclipse";`

# javascript - 使用 Node.js 存储哈希

> ID：15789744
> 
> 赞同：1
> 
> 时间：2013-04-03T14:10:48.633
> 
> 标签：javascript, node.js, hash

我正在使用 Node.js 为文件生成哈希，然后当它被更改时，我想在保存之前将它与以前的版本匹配。例如，如果没有发生任何更改，则不会进行保存。

我尝试使用以下代码来完成任务（受[Node.js 文档的](http://nodejs.org/api/crypto.html#crypto_crypto_createhash_algorithm)启发）：

```
var filename = __dirname + '/public/team.html';
var shasum = crypto.createHash('sha1');

var s = fs.ReadStream(filename);
s.on('data', function(d) {
  shasum.update(d);
});

s.on('end', function() {
  var d = shasum.digest('hex');
  console.log(d + '  ' + filename);
}); 
```

我想知道如何保存文件的哈希以便以后匹配它。任何想法都会受到欢迎。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:25:49.890

简单的解决方案：只需将其写入文件（每个要保存的文件一个附加信息文件）。

一个更复杂的解决方案：保留一个包含所有哈希值的文件，如对（路径，哈希）。您必须每次加载文件，解析数据并保存。

正确的解决方案：使用数据库。使用 SQLite 应该很容易，并且您不需要单独的数据库服务器。这是 NodeJS 驱动程序的示例：

[https://github.com/developmentseed/node-sqlite3](https://github.com/developmentseed/node-sqlite3)

# excel - Excel VBA正确的数字日期类型？

> ID：15789745
> 
> 赞同：1
> 
> 时间：2013-04-03T14:10:56.327
> 
> 标签：excel, vba

我有一个记录员工工作时间的模板。第 5 栏显示了他们每周的合同工时，第 14 栏显示了他们的额外工作时间。加班的兼职员工（每周少于 37.5 小时）按标准收费。但是，一旦他们超过一周的 37.50 小时，他们就会按时支付一半（这记录在单独的栏中）。

下面的代码获取一周的总小时数（第 18 列），如果超过 37.5，它将提示用户在一个半小时记录一些小时数。这是确保人们得到正确报酬的一种万无一失的方法。

下面的代码几乎可以完美运行，但是如果约定的小时数少于 10，则无论如何都会弹出消息框。我认为这是因为我有一个字符串数据类型，代码中的小时数是字符串，但我似乎无法让它与其他数据类型一起使用。任何帮助将不胜感激。

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)

If Target.Column = 14 Then

Dim I As Integer, CheckHours As Boolean
Dim MonthX As Worksheet
I = 6
CheckHours = False
Set MonthX = ThisWorkbook.ActiveSheet

Dim FT As String
FT = 37.5

Application.ScreenUpdating = False

'Use the Employee Number column to perform the check
Do While MonthX.Cells(I, 3) <> ""

    'Declare variables
        Dim ContractHours As String
        Dim HoursPaid As String
        Dim TotalHours As String

        ContractHours = MonthX.Cells(I, 5)     
        HoursPaid = MonthX.Cells(I, 14)
        TotalHours= MonthX.Cells(I, 18)

            'If the contract hours plus the additional hours are greater than 37.50 then display warning
            If TotalHours > FT Then
                MsgBox "WARNING: Check the additional hours entered for " & _
                MonthX.Cells(I, 2).Value & " " & MonthX.Cells(I, 1).Value & _
                " as they will need to be split between Additional Basic and Overtime." & _
                vbNewLine & vbNewLine & _
                "Please refer to the Additional Hours Guidelines tab for more information.", vbOKOnly, "Please Check"

                CheckHours = True

            End If

    I = I + 1
Loop

'Cancel boolean
If CheckHours = True Then
    Cancel = True
    End If

Application.ScreenUpdating = True

End If

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-04T12:54:48.293

我不知道你的逻辑是否正确，但这是一个与你的代码做同样事情的重写。你的代码中有很多额外的东西似乎没有目的，所以我删除了它。

```
Private Sub Worksheet_SelectionChange(ByVal Target As Range)

   Dim i As Long
   Dim dTotalHours As Double
   Dim aMsg(1 To 5) As String

   Const dFULLTIME As Double = 37.5

   i = 6

   If Target.Column = 14 Then
      Do While Len(Me.Cells(i, 3).Value) > 0
         dTotalHours = Me.Cells(i, 18).Value
         If dTotalHours > dFULLTIME Then
            aMsg(1) = "WARNING: Check the additional hours entered for"
            aMsg(2) = Me.Cells(i, 2).Value
            aMsg(3) = Me.Cells(i, 3).Value
            aMsg(4) = "as they will need to be split between Additional Basic and Overtime." & vbNewLine & vbNewLine
            aMsg(5) = "Please refer to the Additional Hours Guidelines tab for more information."

            MsgBox Join(aMsg, Space(1)), vbOKOnly, "Please Check"
         End If
         i = i + 1
      Loop
   End If

End Sub 
```

一些笔记

*   Excel 将数字单元格值存储为双精度值。如果您正在从单元格中读取数字，那么除了 Double 之外，真的没有理由使用任何东西。
*   当您在工作表的类模块（事件所在的位置）中时，您可以使用 Me 关键字来引用工作表。您指的是 Activesheet，但您真正想要的是发生选择更改的工作表。在这种情况下，它们恰好是相同的，但对于其他事件，它们可能不同。
*   检查字符串的长度比检查 if <>"" 更快。
*   您的 FT 变量永远不会改变，使其根本不可变。常数可能是更好的选择。
*   我使用一个数组来存储长消息的所有元素，然后使用 Join 来制作最终的字符串。更易于阅读和维护。
*   我是一名键盘手，所以这对我来说最接近我的家，但是每次选择更改时都会出现一个消息框？这意味着如果我尝试使用箭头键进入我将修复错误的单元格，我将得到持续的消息框。野蛮。也许 _Change 事件或 _BeforeSave 事件值得考虑。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:28:26.587

尝试声明为“单个”而不是“字符串”

我们被告知在大学时将十进制数字声明为单数。它可能会解决您的问题。

或者我注意到但不知道是否会影响它的另一件事，您的 IF 语句中没有 ELSE

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T04:35:12.463

以下代码可能需要进行一些调整，但它应该接近您的需要。它实现了对您问题的评论中的一些建议。您的困难的根源是使用字符串变量来处理数值。

我已将 FT、ContractHours、HoursPaid 和 SumHours 声明为单个变量，并将 Cancel 声明为布尔值（尽管您不在子例程中使用它）。

您可以通过从 VBA 编辑器的菜单栏中选择工具/选项，然后选中编辑器选项卡上的“需要变量声明”选项，将“选项显式”（需要声明变量）设置为代码的默认值.

```
Option Explicit

Private Sub Worksheet_SelectionChange(ByVal Target As Range)
   Dim i As Integer, CheckHours As Boolean, Cancel As Boolean
   Dim MonthX As Worksheet
   Dim FT As Single
   Dim ContractHours As Single
   Dim HoursPaid As Single
   Dim SumHours As Single
   Set MonthX = ThisWorkbook.ActiveSheet
   i = 6
   FT = 37.5
   If Target.Column = 14 Then
      Application.ScreenUpdating = False
      'Use the Employee Number column to perform the check
      Do While MonthX.Cells(i, 3).Value <> ""
         'Assign variables
         ContractHours = MonthX.Cells(i, 5).Value
         HoursPaid = MonthX.Cells(i, 14).Value
         SumHours = MonthX.Cells(i, 18).Value
         'When the contract hours plus the additional hours are greater than 37.50 
         '   display warning
         If SumHours > FT Then
            MsgBox "WARNING: Check the additional hours entered for " & _
               MonthX.Cells(i, 2).Value & " " & MonthX.Cells(i, 1).Value & _
               " as they will need to be split between Additional Basic and Overtime." & _
               vbNewLine & vbNewLine & _
               "Please refer to the Additional Hours Guidelines tab for more information.", vbOKOnly, "Please Check"
            CheckHours = True
         End If
         i = i + 1
      Loop
      'Cancel boolean
      If CheckHours = True Then
        Cancel = True
      End If
      Application.ScreenUpdating = True
   End If
End Sub 
```

# shell - curl from shell：如果传输超时，则丢弃输出文件

> ID：15789746
> 
> 赞同：1
> 
> 时间：2013-04-03T14:10:57.550
> 
> 标签：shell, curl

使用 shell 中的 curl，丢弃（或检测）由于发生超时而未完全下载的文件的最佳方法是什么？我想做的是：

```
curl -m 2 --compress -o "dest/#1" "http://url/{$list}" 
```

发生超时时，日志会显示它，并且下载的文件部分会保存到磁盘：

```
[4/13]: http://URL/123.jpg --> dest/123.jpg
 99 97984   99 97189    0     0  45469      0  0:00:02  0:00:02 --:--:-- 62500
curl: (28) Operation timed out after 2000 milliseconds with 97189 bytes received 
```

我正在尝试删除未 100% 下载的文件，或者将它们列出以尝试恢复（-C 标志），稍后。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:54:23.213

到目前为止，我发现的最佳解决方案是捕获 curl 调用的 stderr，并使用 perl 和 grep 的组合对其进行解析以获取输出文件名：

```
curl -m 2 -o "dest/#1" "http://url/{$list}" 2>curl.out
perl -pe 's/[\t\n ]+/ /g ; s/--> /\n/g' curl.out | grep -i "Curl: (28)" | perl -pe 's/ .*//g' 
```

# c# - 以编程方式篡改 http 请求

> ID：15789752
> 
> 赞同：2
> 
> 时间：2013-04-03T14:11:12.617
> 
> 标签：c#, httpwebrequest, http-post

我需要登录一个站点，我可以通过 url.com/ssorequest?parameters=123 之类的 url 来执行此操作。如果这是在我登录的地址中输入的并被重定向到门户。

现在我应该通过 http post 请求以编程方式执行此操作，但我无法让它工作，我被重定向到登录表单而不是门户，即我没有登录。

我使用 Fiddler 来找出这两种方法之间的区别。我发现一些幕后的 get-request 是不同的。浏览器的 get-requests 将 cookie 数据发送到服务器，而 fiddler 的 post-request 则不会。

当我使用 fiddler 重复浏览器首先调用它时，它也不会发送 cookie 数据。所以它只有在我通过浏览器窗口执行时才有效。除非我在提琴手中使用断点并篡改包含 cookie 数据的请求。

问：为什么它与浏览器在使用 http post 和从 Fiddler 完成请求时表现不同？

问：有没有办法在我的 C# 应用程序中以编程方式篡改发出的请求，而无需编写我自己的 Fiddler 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:17:27.173

您很可能遇到过[防伪](http://msdn.microsoft.com/en-us/library/system.web.mvc.htmlhelper.antiforgerytoken%28v=vs.108%29.aspx)cookie。它的工作原理是确保您使用第一次请求并在浏览器中加载的页面登录，并且 cookie 仅对一个请求有效，因此如果您运行相同的请求，提琴手将无法登录再次。

使用 C#，您首先必须请求登录页面并在 cookie 容器中获取该页面提供的 cookie。下次，当您将页面连同数据一起发布时，您必须确保 cookie 与请求一起附加。

编辑：

Step1：浏览网站上的任何页面。这将启动会话。它还将为您提供会话 cookie。

Step2：请求登录页面。将第一步中获得的 cookie 与登录页面一起发送，以便它可以识别会话。这一步很关键。在这个阶段，根据站点正在使用的安全系统，可能有两种情况之一。它要么将安全 cookie 与会话 cookie 一起发送，要么将在表单中添加一个隐藏变量以及一个用作安全令牌的值。确保您获得此令牌/cookie。

第 2 步：在登录页面（或表单操作指向的任何页面）上发布登录信息以及在第 1 步中获得的 cookie/令牌。如果是令牌，请将其与登录信息一起包含在您的发布数据中，或者如果cookie，将其添加到请求中。

# validation - 验证功能是否应该直接访问存储库？

> ID：15789757
> 
> 赞同：0
> 
> 时间：2013-04-03T14:11:23.003
> 
> 标签：validation, orm, domain-driven-design, ddd-repositories

我的应用程序中有以下内容：Action Orm 实体（来自 Telerik 开放访问）Repository（Of Action）AppService（保存存储库的实例）

当我需要保存实例时，我将实例发送到 AppService。AppService 然后调用验证器来验证要保存的实例。验证器基于[http://codeinsanity.com/archive/2008/12/02/a-framework-for-validation-and-business-rules.aspx](http://codeinsanity.com/archive/2008/12/02/a-framework-for-validation-and-business-rules.aspx) （完整代码在[https://github.com/riteshrao/不常见](https://github.com/riteshrao/ncommon)）

所以基本上我在 AppService 中的保存功能看起来像这样

```
Public Sub AddAction(ByVal Item As Data.Model.Action)
        Contract.Requires(Of ArgumentNullException)(Item IsNot Nothing, "Item is nothing.")

        Dim validateResult As Rules.ValidationResult = _ActionValidator.Validate(Item)
        If Not validateResult.IsValid Then
            Throw New Validation.ValidationException(validateResult)
        End If

        Try
            _ActionRepository.Add(Item)
            _unitOfWork.SaveChanges()
        Catch ex As Exception
            _unitOfWork.ClearChanges()
            Throw New DataServiceException(ex.Message, ex)
        End Try

    End Sub 
```

为了检查操作项的属性，示例代码效果很好。我的问题开始于我需要确保同一客户的同一操作不会两次添加到数据库中（即 id 不同，名称相同且客户相同）

正如我所看到的，我有几个选项： **选项1**：使用类似的东西检查重复操作

```
function(validatedItem) item.Customer.Actions.Any(function(item)  item.id<>validatedItem.id andalso item.name=validatedItem.name)) 
```

基本上，我从保存的操作返回给客户，然后返回到他的所有操作，并检查是否存在具有不同 ID 和相同名称的任何操作

缺点是：

一个。为此，当访问项目的客户属性时，从数据库中读取整个客户对象，这在这种情况下是多余的 b。正在客户端上评估 Any 函数，因为 item.Customer.Actions 返回 IList(Of Action)

**选项 2**：让验证类有权访问操作存储库。然后我可以简单地做类似的事情

```
'assume I already have validatedItem
repository.Any(function(item) item.id<>validatedItem.id and item.customerid=validatedItem.customerid and item.name=validatedItem.name) 
```

这将导致 Exists 查询被发送到数据库，但缺点（？）是验证框架不应该直接访问存储库（据我在极少数示例中看到的，我可以找到使用验证和 ORM )

**选项 3**：让验证类可以访问 AppService 并使用 AppService 检查是否存在重复项。问题：一。我创建了一个循环引用 (AppService->Validation Class->AppService) b。我需要在 AppService 中创建许多无用的函数，以根据仅与验证相关的条件加载项目

任何想法这里最好的课程是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T05:14:00.817

最简单的方法是不要从您的域中检查数据库中的重复项。

当实体集合是您聚合的一部分时，这不是问题，因为您不允许将重复项添加到集合中。由于聚合是作为一个整体存储的，因此您永远不会遇到问题。

对于您不希望重复的情况，例如电子邮件地址并且没有实体集合由聚合表示（例如`Users`在系统中），您可以让数据库强制执行唯一性。只需拿起异常并报告回来。在许多情况下，您的验证将无法强制执行唯一性，因为它没有/实现数据库系统所需的锁。

所以我只是把*它*留给数据库。

# android - 如何使用自定义视图 android 保存绘图？

> ID：15789760
> 
> 赞同：3
> 
> 时间：2013-04-03T14:11:29.100
> 
> 标签：android, bitmap, drawing, save, paint

我正在使用以下代码。我在保存图像时遇到问题。我可以保存位图但是当保存双图时它也保存了我也用黑色擦除了油漆

```
public class FingerPaint extends GraphicsActivity
    implements ColorPickerDialog.OnColorChangedListener {    

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(new MyView(this));

    mPaint = new Paint();
    mPaint.setAntiAlias(true);
    mPaint.setDither(true);
    mPaint.setColor(0xFFFF0000);
    mPaint.setStyle(Paint.Style.STROKE);
    mPaint.setStrokeJoin(Paint.Join.ROUND);
    mPaint.setStrokeCap(Paint.Cap.ROUND);
    mPaint.setStrokeWidth(12);

    mEmboss = new EmbossMaskFilter(new float[] { 1, 1, 1 },
                                   0.4f, 6, 3.5f);

    mBlur = new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL);
}

private Paint       mPaint;
private MaskFilter  mEmboss;
private MaskFilter  mBlur;

public void colorChanged(int color) {
    mPaint.setColor(color);
}

public class MyView extends View {

    private static final float MINP = 0.25f;
    private static final float MAXP = 0.75f;

    private Bitmap  mBitmap;
    private Canvas  mCanvas;
    private Path    mPath;
    private Paint   mBitmapPaint;

    public MyView(Context c) {
        super(c);

        mBitmap = Bitmap.createBitmap(320, 480, Bitmap.Config.ARGB_8888);
        mCanvas = new Canvas(mBitmap);
        mPath = new Path();
        mBitmapPaint = new Paint(Paint.DITHER_FLAG);
    }

    @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
        super.onSizeChanged(w, h, oldw, oldh);
    }

    @Override
    protected void onDraw(Canvas canvas) {
        canvas.drawColor(0xFFAAAAAA);

        canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

        canvas.drawPath(mPath, mPaint);
    }

    private float mX, mY;
    private static final float TOUCH_TOLERANCE = 4;

    private void touch_start(float x, float y) {
        mPath.reset();
        mPath.moveTo(x, y);
        mX = x;
        mY = y;
    }
    private void touch_move(float x, float y) {
        float dx = Math.abs(x - mX);
        float dy = Math.abs(y - mY);
        if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
            mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
            mX = x;
            mY = y;
        }
    }
    private void touch_up() {
        mPath.lineTo(mX, mY);
        // commit the path to our offscreen
        mCanvas.drawPath(mPath, mPaint);
        // kill this so we don't double draw
        mPath.reset();
    }

    @Override
    public boolean onTouchEvent(MotionEvent event) {
        float x = event.getX();
        float y = event.getY();

        switch (event.getAction()) {
            case MotionEvent.ACTION_DOWN:
                touch_start(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_MOVE:
                touch_move(x, y);
                invalidate();
                break;
            case MotionEvent.ACTION_UP:
                touch_up();
                invalidate();
                break;
        }
        return true;
    }
}

private static final int COLOR_MENU_ID = Menu.FIRST;
private static final int EMBOSS_MENU_ID = Menu.FIRST + 1;
private static final int BLUR_MENU_ID = Menu.FIRST + 2;
private static final int ERASE_MENU_ID = Menu.FIRST + 3;
private static final int SRCATOP_MENU_ID = Menu.FIRST + 4;

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    super.onCreateOptionsMenu(menu);

    menu.add(0, COLOR_MENU_ID, 0, "Color").setShortcut('3', 'c');
    menu.add(0, EMBOSS_MENU_ID, 0, "Emboss").setShortcut('4', 's');
    menu.add(0, BLUR_MENU_ID, 0, "Blur").setShortcut('5', 'z');
    menu.add(0, ERASE_MENU_ID, 0, "Erase").setShortcut('5', 'z');
    menu.add(0, SRCATOP_MENU_ID, 0, "SrcATop").setShortcut('5', 'z');

    /****   Is this the mechanism to extend with filter effects?
    Intent intent = new Intent(null, getIntent().getData());
    intent.addCategory(Intent.CATEGORY_ALTERNATIVE);
    menu.addIntentOptions(
                          Menu.ALTERNATIVE, 0,
                          new ComponentName(this, NotesList.class),
                          null, intent, 0, null);
    *****/
    return true;
}

@Override
public boolean onPrepareOptionsMenu(Menu menu) {
    super.onPrepareOptionsMenu(menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    mPaint.setXfermode(null);
    mPaint.setAlpha(0xFF);

    switch (item.getItemId()) {
        case COLOR_MENU_ID:
            new ColorPickerDialog(this, this, mPaint.getColor()).show();
            return true;
        case EMBOSS_MENU_ID:
            if (mPaint.getMaskFilter() != mEmboss) {
                mPaint.setMaskFilter(mEmboss);
            } else {
                mPaint.setMaskFilter(null);
            }
            return true;
        case BLUR_MENU_ID:
            if (mPaint.getMaskFilter() != mBlur) {
                mPaint.setMaskFilter(mBlur);
            } else {
                mPaint.setMaskFilter(null);
            }
            return true;
        case ERASE_MENU_ID:
            mPaint.setXfermode(new PorterDuffXfermode(
                                                    PorterDuff.Mode.CLEAR));
            return true;
        case SRCATOP_MENU_ID:
            mPaint.setXfermode(new PorterDuffXfermode(
                                                PorterDuff.Mode.SRC_ATOP));
            mPaint.setAlpha(0x80);
            return true;
    }
    return super.onOptionsItemSelected(item);
   }
  } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:52:29.447

我对您的代码进行了一些更改，并且可以正常工作。我还添加了一个保存选项。

```
public class FingerPaintActivity extends GraphicsActivity implements ColorPickerDialog.OnColorChangedListener {    

MyView mv;
   @Override
   protected void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   mv= new MyView(this);
   mv.setDrawingCacheEnabled(true);
   setContentView(mv);
   mPaint = new Paint();
   mPaint.setAntiAlias(true);
   mPaint.setDither(true);
   mPaint.setColor(0xFFFF0000); 
   mPaint.setStyle(Paint.Style.STROKE);
   mPaint.setStrokeJoin(Paint.Join.ROUND);
   mPaint.setStrokeCap(Paint.Cap.ROUND);
   mPaint.setStrokeWidth(12);

   mEmboss = new EmbossMaskFilter(new float[] { 1, 1, 1 },
                           0.4f, 6, 3.5f);

   mBlur = new BlurMaskFilter(8, BlurMaskFilter.Blur.NORMAL);
   }

   private Paint       mPaint;
   private MaskFilter  mEmboss;
   private MaskFilter  mBlur;

   public void colorChanged(int color) {
   mPaint.setColor(color);
   }

   public class MyView extends View {

   private static final float MINP = 0.25f;
   private static final float MAXP = 0.75f;

   private Bitmap  mBitmap;
   private Canvas  mCanvas;
   private Path    mPath;
   private Paint   mBitmapPaint;
   Context context;

   public MyView(Context c) {
    super(c);
    context=c;

  //mBitmap = Bitmap.createBitmap(320, 480, Bitmap.Config.ARGB_8888);

   mPath = new Path();
   mBitmapPaint = new Paint(Paint.DITHER_FLAG);
  }

  @Override
  protected void onSizeChanged(int w, int h, int oldw, int oldh) {
  super.onSizeChanged(w, h, oldw, oldh);
  mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
  mCanvas = new Canvas(mBitmap);
  }

 @Override
 protected void onDraw(Canvas canvas) {
 canvas.drawColor(0xFFAAAAAA);

 canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);

 canvas.drawPath(mPath, mPaint);
 }

private float mX, mY;
private static final float TOUCH_TOLERANCE = 4;

private void touch_start(float x, float y) {
mPath.reset();
mPath.moveTo(x, y);
mX = x;
mY = y;
} 
private void touch_move(float x, float y) {
float dx = Math.abs(x - mX);
float dy = Math.abs(y - mY);
if (dx >= TOUCH_TOLERANCE || dy >= TOUCH_TOLERANCE) {
    mPath.quadTo(mX, mY, (x + mX)/2, (y + mY)/2);
    mX = x;
    mY = y;
}
}
private void touch_up() {
mPath.lineTo(mX, mY);
// commit the path to our offscreen
mCanvas.drawPath(mPath, mPaint);
// kill this so we don't double draw
mPath.reset();
mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.SCREEN));
mPaint.setMaskFilter(null);
}

@Override
public boolean onTouchEvent(MotionEvent event) {
float x = event.getX();
float y = event.getY();

switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        touch_start(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_MOVE:
        touch_move(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        touch_up();
        invalidate();
        break;
}
return true;
}
}

 private static final int COLOR_MENU_ID = Menu.FIRST;
 private static final int EMBOSS_MENU_ID = Menu.FIRST + 1; 
 private static final int BLUR_MENU_ID = Menu.FIRST + 2;
 private static final int ERASE_MENU_ID = Menu.FIRST + 3;
 private static final int SRCATOP_MENU_ID = Menu.FIRST + 4;
 private static final int Save = Menu.FIRST + 5;

 @Override 
  public boolean onCreateOptionsMenu(Menu menu) {
  super.onCreateOptionsMenu(menu);

    menu.add(0, COLOR_MENU_ID, 0, "Color").setShortcut('3', 'c');
    menu.add(0, EMBOSS_MENU_ID, 0, "Emboss").setShortcut('4', 's');
    menu.add(0, BLUR_MENU_ID, 0, "Blur").setShortcut('5', 'z');
    menu.add(0, ERASE_MENU_ID, 0, "Erase").setShortcut('5', 'z');
    menu.add(0, SRCATOP_MENU_ID, 0, "SrcATop").setShortcut('5', 'z');
    menu.add(0, Save, 0, "Save").setShortcut('5', 'z');

     /****   Is this the mechanism to extend with filter effects?
     Intent intent = new Intent(null, getIntent().getData());
     intent.addCategory(Intent.CATEGORY_ALTERNATIVE);
     menu.addIntentOptions(
                  Menu.ALTERNATIVE, 0,
                  new ComponentName(this, NotesList.class),
                  null, intent, 0, null);
      *****/
      return true;
      }

      @Override
       public boolean onPrepareOptionsMenu(Menu menu) {
       super.onPrepareOptionsMenu(menu);
        return true;
        }

@Override
public boolean onOptionsItemSelected(MenuItem item) {
mPaint.setXfermode(null);
mPaint.setAlpha(0xFF);

switch (item.getItemId()) {
case COLOR_MENU_ID:
    new ColorPickerDialog(this, this, mPaint.getColor()).show();
    return true;
case EMBOSS_MENU_ID:
    if (mPaint.getMaskFilter() != mEmboss) {
        mPaint.setMaskFilter(mEmboss);
    } else {
        mPaint.setMaskFilter(null);
    }
    return true;
case BLUR_MENU_ID:
    if (mPaint.getMaskFilter() != mBlur) {
        mPaint.setMaskFilter(mBlur);
    } else {
        mPaint.setMaskFilter(null);
    }
    return true;
case ERASE_MENU_ID:
    mPaint.setXfermode(new PorterDuffXfermode(
                                            PorterDuff.Mode.CLEAR));
    return true;
case SRCATOP_MENU_ID:

    mPaint.setXfermode(new PorterDuffXfermode(
                                        PorterDuff.Mode.SRC_ATOP));
    mPaint.setAlpha(0x80);
    return true;
case Save:
    AlertDialog.Builder editalert = new AlertDialog.Builder(FingerPaintActivity.this);
        editalert.setTitle("Please Enter the name with which you want to Save");
        final EditText input = new EditText(FingerPaintActivity.this);
        LinearLayout.LayoutParams lp = new LinearLayout.LayoutParams(
                LinearLayout.LayoutParams.FILL_PARENT,
                LinearLayout.LayoutParams.FILL_PARENT);
        input.setLayoutParams(lp);
        editalert.setView(input);
        editalert.setPositiveButton("OK", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialog, int whichButton) {

            String name= input.getText().toString();
            Bitmap bitmap = mv.getDrawingCache();

         String path = Environment.getExternalStorageDirectory().getAbsolutePath(); 
            File file = new File("/sdcard/"+name+".png");           
            try 
            {
                if(!file.exists())
            {
                file.createNewFile();
            }
                FileOutputStream ostream = new FileOutputStream(file);
                bitmap.compress(CompressFormat.PNG, 10, ostream);
                    System.out.println("saving......................................................"+path);
                ostream.close();
                mv.invalidate();                            
            } 
            catch (Exception e) 
            {
                e.printStackTrace();
            }finally
            {

                mv.setDrawingCacheEnabled(false);                           
            }
            }
        });

        editalert.show();       
    return true;    
}
 return super.onOptionsItemSelected(item);
}
} 
```

编辑 ：

```
@Override
protected void onSizeChanged(int w, int h, int oldw, int oldh) {
super.onSizeChanged(w, h, oldw, oldh);
mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
mCanvas = new Canvas(mBitmap);
Bitmap bmp = BitmapFactory.decodeResource(getResources(), R.drawable.afor);
mCanvas.drawBitmap(bmp, 0, 0, mPaint);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T17:22:25.330

```
 mBitmap = Bitmap.createBitmap(320, 480, Bitmap.Config.ARGB_8888);
    mCanvas = new Canvas(mBitmap); 
```

去掉上面的。使用下面的。您可以使用全屏进行绘制。

```
 @Override
    protected void onSizeChanged(int w, int h, int oldw, int oldh) {
    super.onSizeChanged(w, h, oldw, oldh);
    mBitmap = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
    mCanvas = new Canvas(mBitmap);  
   } 
```

# windows-phone-8 - Windows Phone 8 模拟器仅返回雷德蒙德位置

> ID：15789766
> 
> 赞同：1
> 
> 时间：2013-04-03T14:11:49.180
> 
> 标签：windows-phone-8, windows-phone

我正在使用以下代码

```
Geolocator myGeolocator = new Geolocator
{
    DesiredAccuracy = PositionAccuracy.High
};
Geoposition myGeoposition = await myGeolocator.GetGeopositionAsync();

Geocoordinate myGeocoordinate = myGeoposition.Coordinate; 
```

每次我获得雷德蒙德的位置时运行模拟器时，这是一个错误，如果是，那么我们怎样才能摆脱它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:21:25.897

有适用于 Windows Phone 模拟器（7.5 和 8）的位置传感器模拟器：[如何测试使用 Windows Phone 位置数据的应用程序](http://msdn.microsoft.com/en-us/library/windowsphone/develop/hh202933%28v=vs.105%29.aspx)。

它看起来像这样：

![Windows Phone Emulator 位置模拟器](https://i.stack.imgur.com/Arryw.png)

您可以使用该工具将当前手机位置设置为您想要的任何位置。IT 还允许您记录路径和播放记录的路径。

要打开它，请单击*附加工具*按钮 - 模拟器工具栏中的最后一个按钮。它在下面的照片上悬停在黄色。

![在此处输入图像描述](https://i.stack.imgur.com/G3Djp.jpg)

# visual-studio - 每当智能感知启动时，VS2012 就会崩溃

> ID：15789767
> 
> 赞同：2
> 
> 时间：2013-04-03T14:11:49.583
> 
> 标签：visual-studio, visual-studio-2012

我对此有点迷茫，但是每当我在智能感知通常启动之前开始在 Visual Studio 中输入时，应用程序就会崩溃。我正在从事什么项目并不重要。我试过重新安装和更新。我安装了其他版本的 VS，但删除了所有这些。我已经使用VS2012一段时间了，这个问题昨天才出现。

![在此处输入图像描述](https://i.stack.imgur.com/BKj85.png)

这是堆栈跟踪：

> System.AccessViolationException 未处理 HResult=-2147467261
> 消息=尝试读取或写入受保护的内存。这通常表明其他内存已损坏。
> Source=Microsoft.VisualStudio.OLE.Interop StackTrace：在 Microsoft.VisualStudio.Editor.Implementation.CommandChainNode 上的 Microsoft.VisualStudio.OLE.Interop.IOleCommandTarget.Exec（Guid& pguidCmdGroup，UInt32 nCmdID，UInt32 nCmdexecopt，IntPtr pvaIn，IntPtr pvaOut）。 Microsoft.VisualStudio.Editor.Implementation.CommandChainNode.Exec(Guid& pguidCmdGroup, UInt32 nCmdID, UInt32 nCmdexecopt, IntPtr pvaIn, IntPtr pvaOut) at Microsoft.VisualStudio. Microsoft.VisualStudio.Editor.Implementation.CommandChainNode.InnerExec(Guid& pguidCmdGroup,UInt32 nCmdID, UInt32 nCmdexecopt, IntPtr pvaIn, IntPtr pvaOut) at Microsoft.VisualStudio.Editor.Implementation.VsTextViewAdapter.Exec(Guid& pguidCmdGroup, UInt32 nCmdID, UInt32 nCmdexecopt, IntPtr pvaIn, IntPtr pvaOut) at Microsoft.VisualStudio.Editor.Implementation.VsKeyboard .SendCommand(Guid cmdGroup, UInt32 cmdID, Object inParam) 在 Microsoft.VisualStudio.Editor.Implementation.VsKeyboardFilter.TextInput(TextCompositionEventArgs args) 在 Microsoft.VisualStudio.Text.Editor.Implementation.KeyProcessorDispatcher.b__0(KeyProcessor p, TextCompositionEventArgs args) 在Microsoft.VisualStudio.Text.Editor.Implementation.KeyProcessorDispatcher.<>c__DisplayClass1eVsTextViewAdapter.Exec(Guid& pguidCmdGroup, UInt32 nCmdID, UInt32 nCmdexecopt, IntPtr pvaIn, IntPtr pvaOut) 在 Microsoft.VisualStudio.Editor.Implementation.VsKeyboardFilter.SendCommand(Guid cmdGroup, UInt32 cmdID, Object inParam) 在 Microsoft.VisualStudio.Editor.Implementation。 VsKeyboardFilter.TextInput(TextCompositionEventArgs args) 在 Microsoft.VisualStudio.Text.Editor.Implementation.KeyProcessorDispatcher.b__0(KeyProcessor p, TextCompositionEventArgs args) 在 Microsoft.VisualStudio.Text.Editor.Implementation.KeyProcessorDispatcher.<>c__DisplayClass1eVsTextViewAdapter.Exec(Guid& pguidCmdGroup, UInt32 nCmdID, UInt32 nCmdexecopt, IntPtr pvaIn, IntPtr pvaOut) 在 Microsoft.VisualStudio.Editor.Implementation.VsKeyboardFilter.SendCommand(Guid cmdGroup, UInt32 cmdID, Object inParam) 在 Microsoft.VisualStudio.Editor.Implementation。 VsKeyboardFilter.TextInput(TextCompositionEventArgs args) 在 Microsoft.VisualStudio.Text.Editor.Implementation.KeyProcessorDispatcher.b__0(KeyProcessor p, TextCompositionEventArgs args) 在 Microsoft.VisualStudio.Text.Editor.Implementation.KeyProcessorDispatcher.<>c__DisplayClass1eObject inParam) 在 Microsoft.VisualStudio.Editor.Implementation.VsKeyboardFilter.TextInput(TextCompositionEventArgs args) 在 Microsoft.VisualStudio.Text.Editor.Implementation.KeyProcessorDispatcher.b__0(KeyProcessor p, TextCompositionEventArgs args) 在 Microsoft.VisualStudio.Text.Editor.Implementation .KeyProcessorDispatcher.<>c__DisplayClass1eObject inParam) 在 Microsoft.VisualStudio.Editor.Implementation.VsKeyboardFilter.TextInput(TextCompositionEventArgs args) 在 Microsoft.VisualStudio.Text.Editor.Implementation.KeyProcessorDispatcher.b__0(KeyProcessor p, TextCompositionEventArgs args) 在 Microsoft.VisualStudio.Text.Editor.Implementation .KeyProcessorDispatcher.<>c__DisplayClass1e`1.<Dispatch>b__1a() at Microsoft.VisualStudio.Text.Utilities.GuardedOperations.CallExtensionPoint(Object errorSource, Action call) at Microsoft.VisualStudio.Text.Editor.Implementation.KeyProcessorDispatcher.Dispatch[T](Action`2 动作，T args) 在 Microsoft.VisualStudio.Text.Editor.Implementation.KeyProcessorDispatcher.<>c__DisplayClass18.b__17(Object sender, TextCompositionEventArgs args) 在 System.Windows.Input.TextCompositionEventArgs.InvokeEventHandler(Delegate genericHandler, Object genericTarget) 在 System .Windows.RoutedEventArgs.InvokeHandler(Delegate handler, Object target) at System.Windows.RoutedEventHandlerInfo.InvokeHandler(Object target, RoutedEventArgs routedEventArgs) at System.Windows.EventRoute.InvokeHandlersImpl(Object source, RoutedEventArgs args, Boolean reRaised) at System.Windows .UIElement.RaiseEventImpl(DependencyObject sender, RoutedEventArgs args) 在 System.Windows.UIElement.RaiseTrustedEvent(RoutedEventArgs args) 在 System.Windows.UIElement。在 System.Windows.Input.InputManager.ProcessInput(InputEventArgs 输入) 在 System.Windows.Input.TextCompositionManager.UnsafeComposition(TextComposition composition) 在 System.Windows.Input.InputManager.ProcessStagingArea() 的 RaiseEvent(RoutedEventArgs args, Boolean trust) .Windows.Input.TextCompositionManager.PostProcessInput(Object sender, ProcessInputEventArgs e) 在 System.Windows.Input.InputManager.RaiseProcessInputEventHandlers(ProcessInputEventHandler postProcessInput, ProcessInputEventArgs processInputEventArgs) 在 System.Windows.Input.InputManager.ProcessStagingArea() 在 System.Windows.Input System.Windows.Input.TextCompositionManager 中的 .InputManager.ProcessInput(InputEventArgs 输入)。UnsafeStartComposition(TextComposition composition) at System.Windows.Input.TextCompositionManager.PostProcessInput(Object sender, ProcessInputEventArgs e) at System.Windows.Input.InputManager.RaiseProcessInputEventHandlers(ProcessInputEventHandler postProcessInput, ProcessInputEventArgs processInputEventArgs) at System.Windows.Input.InputManager.ProcessStagingArea( ) 在 System.Windows.Input.InputManager.ProcessInput(InputEventArgs 输入) 在 System.Windows.Input.InputProviderSite.ReportInput(InputReport inputReport) 在 System.Windows.Interop.HwndKeyboardInputProvider.ProcessTextInputAction(IntPtr hwnd, WindowMessage msg, IntPtr wParam, IntPtr lParam，布尔值&处理）在 System.Windows.Interop.HwndSource.OnPreprocessMessage(Object param) 在 System.Windows。Threading.ExceptionWrapper.InternalRealCall(Delegate callback, Object args, Int32 numArgs) 在 MS.Internal.Threading.ExceptionFilterHelper.TryCatchWhen(Object source, Delegate method, Object args, Int32 numArgs, Delegate catchHandler) 在 System.Windows.Threading.Dispatcher。 LegacyInvokeImpl（DispatcherPriority 优先级，TimeSpan 超时，Delegate 方法，Object args，Int32 numArgs）在 System.Windows.Threading.Dispatcher.Invoke（DispatcherPriority 优先级，Delegate 方法，Object arg）在 System.Windows.Interop.HwndSource.OnPreprocessMessageThunk（MSG 和 msg , Boolean&handled) at System.Windows.Interop.HwndSource.WeakEventPreprocessMessage.OnPreprocessMessage(MSG& msg, Boolean&handled) at System.Windows.Interop.ThreadMessageEventHandler.Invoke(MSG& msg, Boolean&处理）在 System.Windows.Interop.ComponentDispatcher.RaiseThreadMessage(MSG& msg) 在 Microsoft.VisualStudio.Platform.WindowManagement.WindowManagerService.PreTranslateInput(MSG[] lpmsg 的 System.Windows.Interop.ComponentDispatcherThread.RaiseThreadMessage(MSG& msg)，布尔处理) 内部异常：

# java - 如何在一次触摸后停止 OnTouch 方法

> ID：15789777
> 
> 赞同：0
> 
> 时间：2013-04-03T14:12:06.853
> 
> 标签：java, android, ontouchlistener, osmdroid

我有一个小问题。基本上我想要做的是绘制航点到地图，触摸。但我想在添加一个航点后停止 onTouch 方法，因为现在它只需单击即可添加更多航点，然后继续添加它们下一步触及。

方法如下

```
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode==RESULT_OK)
    {
        final MapPoint point=(MapPoint) data.getSerializableExtra("result");
         GeoPoint point2 = new GeoPoint(51496994, -134254);
         point.setGeo(point2);

                    view.setOnTouchListener(new View.OnTouchListener()
                    {

                        @Override
                        public boolean onTouch(View v, MotionEvent e) {
                            GeoPoint geo = null;
                            IProjection project = view.getProjection();
                            geo=(GeoPoint)project.fromPixels((int)e.getX(),(int)e.getY());
                            mainDrawer.addGeopointToMap(point.getName(), point.getDesc(), geo);
                            return false;
                        }});
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:30:30.983

您可以简单地将 actionListener 设置为**null** 这将使操作在第一次被调用，然后它将为 null 所以它不会再次调用。

```
 view.setOnTouchListener(new View.OnTouchListener()
        {

                    @Override
                    public boolean onTouch(View v, MotionEvent e) {
                        GeoPoint geo = null;
                        IProjection project = view.getProjection();
                        geo=(GeoPoint)project.fromPixels((int)e.getX(),(int)e.getY());
                        mainDrawer.addGeopointToMap(point.getName(), point.getDesc(), geo);
                        view.setOnTouchListener(null)
                        return false;
                    }});
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:13:52.850

只需使用布尔标志：

```
boolean added = false;
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    if(resultCode==RESULT_OK) {
        final MapPoint point=(MapPoint) data.getSerializableExtra("result");
        GeoPoint point2 = new GeoPoint(51496994, -134254);
        point.setGeo(point2);
        view.setOnTouchListener(new View.OnTouchListener() {
            @Override
            public boolean onTouch(View v, MotionEvent e) {
                if(!added) {
                    GeoPoint geo = null;
                    IProjection project = view.getProjection();
                    geo=(GeoPoint)project.fromPixels((int)e.getX(),(int)e.getY());
                    mainDrawer.addGeopointToMap(point.getName(), point.getDesc(), geo);
                    added = true;
                 }
                 return false;
            }});
} 
```

# c# - 当用户点击底部打开它时如何更改图像扩展？

> ID：15789779
> 
> 赞同：0
> 
> 时间：2013-04-03T14:12:17.817
> 
> 标签：c#, image, asp.net-mvc-4

我有一个包含 .tif 图像的图像文件夹，当用户搜索图像时，图像必须是**.png**或***.jpeg***文件扩展名，以避免在显示**.tif**图像时浏览器不兼容。我怎样才能做到这一点？请注意，图像保存在目录中，而不是数据库中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:25:03.107

[TIFF](http://en.wikipedia.org/wiki/Tagged_Image_File_Format)或“标记图像文件格式”是一种压缩很少或没有压缩的原始文件格式。[PNG](http://en.wikipedia.org/wiki/Portable_Network_Graphics)和[JPEG](http://en.wikipedia.org/wiki/JPEG)都是压缩格式。

您将不得不找到一种方法来编写 PNG 和 JPEG 文件或安装一些 SDK 插件来执行此操作。

您不能只更改扩展名并将 TIF 显示为这些压缩格式之一。

为 WIKI 参考提供的链接。

希望有帮助。

# c++ - C语言时区中的isDst

> ID：15789783
> 
> 赞同：0
> 
> 时间：2013-04-03T14:12:25.527
> 
> 标签：c++, c

我试图从我选择的值（动态）中找出时间

我尝试给出 3 月 31 日下午 3:10 的日期，并尝试以下午 03:10（即 2 月 28 日下午 3:10）返回一个月。但我得到的值是下午 4:10。

我设置 isdst = -1 来做这个；但它仍然失败。

有任何想法吗。

```
Tm->tm_mon = ReportMonth;
  Tm->tm_mday = ReportEndDay;
Tm->tm_hour = TimeOfDay/60;
  Tm->tm_min  = TimeOfDay%60;
  Tm->tm_sec  = 59;
  Tm->tm_isdst = -1; 
```

# symfony - 表单类型扩展的用例/从封装的 JavaScript 访问生成的表单 ID

> ID：15789787
> 
> 赞同：1
> 
> 时间：2013-04-03T14:12:30.797
> 
> 标签：symfony, symfony-2.2

[我在http://symfony.com/doc/current/cookbook/form/create_form_type_extension.html](http://symfony.com/doc/current/cookbook/form/create_form_type_extension.html)上阅读了表单类型扩展的文档

> 表单类型扩展有 2 个主要用例：
> 您想为多种类型添加通用功能（例如为每种字段类型添加“帮助”文本）；
> 您希望将特定功能添加到单个类型（例如将“下载”功能添加到“文件”字段类型）。

我读了这一章，但最后我问我，如何控制哪个字段类型得到哪个扩展？

在示例中，扩展名必须与应扩展的字段类型匹配。因此，扩展名将应用于具有给定名称的每个字段。

但是如何编写一个扩展并将其用于不同的字段类型（具有不同的名称）？或者我怎样才能只将扩展名用于一个特定的领域？

我看不出有任何理由使用扩展，而是扩展字段类型

**//edit**
我想做的是为某些表单字段添加ajax自动完成功能（不要使用捆绑包，为了更好地理解，我自己编码时）。我阅读并成功地尝试了模型转换器部分，但我在其他方面遇到了问题。例如，我想为表单字段做自定义 JavaScript 和样式。

而且我知道如何自定义表单字段（覆盖块、主题）。但是如何将特定表单字段的 JavaScript 代码放入 HTML 头部并访问生成的输入元素的 HTML id？并且还可以从 JavaScript 访问在构建表单时作为参数传递的选项

```
$builder->add('field', 'custom_type', array('opt1' => true, 'opt2' => 'foo')); 
```

# android - Android StrictMode Throwable：未调用显式终止方法“end”

> ID：15789789
> 
> 赞同：14
> 
> 时间：2013-04-03T14:12:34.043
> 
> 标签：android

我看到 StrictMode 失败，我看不出我正在做的事情有什么问题。失败是：

```
java.lang.Throwable: Explicit termination method 'end' not called
    E/StrictMode(26875):    at dalvik.system.CloseGuard.open(CloseGuard.java:184)
    E/StrictMode(26875):    at java.util.zip.Inflater.<init>(Inflater.java:82)
    E/StrictMode(26875):    at java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:96)
    E/StrictMode(26875):    at java.util.zip.GZIPInputStream.<init>(GZIPInputStream.java:81)
    E/StrictMode(26875):    at libcore.net.http.HttpEngine.initContentStream(HttpEngine.java:528)
    E/StrictMode(26875):    at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:836)
    E/StrictMode(26875):    at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:274)
    E/StrictMode(26875):    at libcore.net.http.HttpURLConnectionImpl.getResponseCode(HttpURLConnectionImpl.java:486)
    E/StrictMode(26875):    at com.mycompany.MyClass.sendJson(MyClass.java:267) 
```

我配置严格模式：

```
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.HONEYCOMB) {
    StrictMode.setVmPolicy(new StrictMode.VmPolicy.Builder()
              .detectLeakedSqlLiteObjects().detectLeakedClosableObjects().penaltyLog()
                    .penaltyDeath().build());
} 
```

代码如下所示：

```
HttpURLConnection connection = null;
OutputStream outputStream = null;
InputStream in = null;

try {
        connection = (HttpURLConnection)new URL("http://our.server/some/path").openConnection();

        connection.setRequestProperty("Accept", "application/json");
        connection
                .setRequestProperty("Content-Type", "application/json; charset=UTF-8");
        connection.setDoOutput(true);

        outputStream = connection.getOutputStream();

        String content = "{\"some\":\"json data\"}";
        byte bytes[] = content.getBytes("UTF-8");
        outputStream.write(bytes);
        outputStream.flush();

        responseCode = connection.getResponseCode(); // This is line 267 in the stack trace

        if (HttpURLConnection.HTTP_OK == responseCode
                || HttpURLConnection.HTTP_CREATED == responseCode) {

            // do something with a successful response
        }
    }

} catch (IOException e) {
    // report the exception
} finally {
    if (null != connection) {
        connection.disconnect();
    }
    if (null != outputStream) {
        try {
            outputStream.close();
        } catch (IOException e) {
        }
    }
    if (null != in) {
        try {
            in.close();
        } catch (IOException e) {
        }
    }
} 
```

我发现有人抱怨在使用 Google AdMob SDK（[https://groups.google.com/forum/?fromgroups=#!topic/google-admob-ads-sdk/yVss4ufdPp4](https://groups.google.com/forum/?fromgroups=#!topic/google-admob-ads-sdk/yVss4ufdPp4)）时看到同样的 StrictMode 失败，但我没有到目前为止能够找到任何解决方案。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-12T15:08:19.070

如果您获得响应流，完全阅读并关闭它（即使响应代码不正确），会发生什么。
我认为这将调用`HttpEngine.release()`，因此在`GzipInputStream`稍后完成时避免异常（因为异常是在构造函数中准备的但被抛出`finalize()`）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-07T14:48:12.617

我认为`connection.getResponseCode()`打开一个输入流。因此，您将需要检索输入流并将其关闭。

# c++ - char** 和 char*[] 之间有什么区别

> ID：15789791
> 
> 赞同：5
> 
> 时间：2013-04-03T14:12:36.510
> 
> 标签：c++

最近需要声明一个字符串数组，所以写下如下语句：

```
const char** directories = {"cricket_batting", "cricket_bowling", "croquet", "tennis_forehand", "tennis_serve", "volleyball_smash"}; 
```

但是，g++ 向我显示了错误：

```
error: scalar object ‘directories’ requires one element in initializer 
```

所以我把声明改成这样：

```
const char* directories[] = {"cricket_batting", "cricket_bowling", "croquet", "tennis_forehand", "tennis_serve", "volleyball_smash"}; 
```

这一次，是对的。但我不能完全知道 和 之间的`char**`区别`char[]`。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-03T14:15:10.473

```
= {...}; 
```

这种形式的初始化称为列表初始化。

```
const char** 
```

这种类型是“指向指针的指针`const char`”。

```
const char*[] 
```

这种类型是一个“指针数组`const char`”。

简而言之，您不能使用列表初始化来初始化指针。您*可以*使用列表初始化来初始化数组；它使用花括号列表中的项目初始化数组中的每个元素。

原因归结为你从声明中得到了什么。当你声明 a`const char**`时，你得到的只是一个单指针对象。它是一个`const char**`，它是一个承诺指向指向 的指针`const char`。尽管如此，您实际上拥有的只是外部指针。然后您不能将其初始化为一个数组，因为您只有一个指针。你到底要在哪里存储初始化列表的元素？没有可以存储它们的指针数组。

但是，当您声明 a 时`const char*[]`，您得到的是一个指针*数组*。数组的大小由列表的大小决定，因为您省略了它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:16:17.163

前者是一段`pointer to a pointer to const char`时间，后者是一个`array to pointer to const char`。后者是初始化字符串数组的正确方法。
您需要使用 to setup 分配内存`new`，`char**`因为您不能简单地使用`{ }`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:22:20.983

当您编写时，`int a[]`我们正在制作一个整数数组。同样，当您编写时，`const char* directories[]`您正在创建一个指针数组`char*`。现在每个都`char*`可以指向 a`char`或 a `string`，就像你的情况一样。这将创建个人`string constants`并将`base address`每个分配给相应的`pointer in the array`

`char **directories`是指向指针的指针，您不能使用`{ .. }`

# drupal-7 - Drupal7 wiki_commons 编辑错误

> ID：15789798
> 
> 赞同：1
> 
> 时间：2013-04-03T14:12:54.337
> 
> 标签：drupal-7, drupal-commons

我已经在我的 drupal7 上安装了 wiki_commons，当我尝试编辑 wiki 节点时出现错误：

> EntityMetadataWrapperException：未知数据属性 field_target_nodes。在 EntityStructureWrapper->getPropertyInfo() 中（第 340 行）

# python - Matplotlib 线框显示奇怪的接线

> ID：15789802
> 
> 赞同：1
> 
> 时间：2013-04-03T14:12:58.860
> 
> 标签：python, matplotlib, wireframe

我有 3 个包含 X、Y 和 Z 值的列表，完整列表如下：

```
X = [132.54, 132.54, 132.54, 132.54, 132.54, 132.54, 132.54, 132.54, 132.54, 132.54, 132.54, 134.546, 134.546, 134.546, 134.546, 134.546, 134.546, 134.546, 134.546, 134.546, 134.546, 134.546, 136.551, 136.551, 136.551, 136.551, 136.551, 136.551, 136.551, 136.551, 136.551, 136.551, 136.551, 138.557, 138.557, 138.557, 138.557, 138.557, 138.557, 138.557, 138.557, 138.557, 138.557, 138.557, 140.562, 140.562, 140.562, 140.562, 140.562, 140.562, 140.562, 140.562, 140.562, 140.562, 140.562, 142.568, 142.568, 142.568, 142.568, 142.568, 142.568, 142.568, 142.568, 142.568, 142.568, 142.568, 144.573, 144.573, 144.573, 144.573, 144.573, 144.573, 144.573, 144.573, 144.573, 144.573, 144.573, 146.579, 146.579, 146.579, 146.579, 146.579, 146.579, 146.579, 146.579, 146.579, 146.579, 146.579, 148.584, 148.584, 148.584, 148.584, 148.584, 148.584, 148.584, 148.584, 148.584, 148.584, 148.584, 150.59, 150.59, 150.59, 150.59, 150.59, 150.59, 150.59, 150.59, 150.59, 150.59, 150.59, 152.595, 152.595, 152.595, 152.595, 152.595, 152.595, 152.595, 152.595, 152.595, 152.595, 152.595, 154.601, 154.601, 154.601, 154.601, 154.601, 154.601, 154.601, 154.601, 154.601, 154.601, 154.601, 156.606, 156.606, 156.606, 156.606, 156.606, 156.606, 156.606, 156.606, 156.606, 156.606, 156.606, 158.612, 158.612, 158.612, 158.612, 158.612, 158.612, 158.612, 158.612, 158.612, 158.612, 158.612, 160.617, 160.617, 160.617, 160.617, 160.617, 160.617, 160.617, 160.617, 160.617, 160.617, 160.617]
Y = [1317.489501953125, 1317.4967041015625, 1317.50390625, 1317.5111083984375, 1317.518310546875, 1317.5255126953125, 1317.53271484375, 1317.5399169921875, 1317.547119140625, 1317.5543212890625, 1317.5615234375, 1317.489501953125, 1317.4967041015625, 1317.50390625, 1317.5111083984375, 1317.518310546875, 1317.5255126953125, 1317.53271484375, 1317.5399169921875, 1317.547119140625, 1317.5543212890625, 1317.5615234375, 1317.489501953125, 1317.4967041015625, 1317.50390625, 1317.5111083984375, 1317.518310546875, 1317.5255126953125, 1317.53271484375, 1317.5399169921875, 1317.547119140625, 1317.5543212890625, 1317.5615234375, 1317.489501953125, 1317.4967041015625, 1317.50390625, 1317.5111083984375, 1317.518310546875, 1317.5255126953125, 1317.53271484375, 1317.5399169921875, 1317.547119140625, 1317.5543212890625, 1317.5615234375, 1317.489501953125, 1317.4967041015625, 1317.50390625, 1317.5111083984375, 1317.518310546875, 1317.5255126953125, 1317.53271484375, 1317.5399169921875, 1317.547119140625, 1317.5543212890625, 1317.5615234375, 1317.489501953125, 1317.4967041015625, 1317.50390625, 1317.5111083984375, 1317.518310546875, 1317.5255126953125, 1317.53271484375, 1317.5399169921875, 1317.547119140625, 1317.5543212890625, 1317.5615234375, 1317.489501953125, 1317.4967041015625, 1317.50390625, 1317.5111083984375, 1317.518310546875, 1317.5255126953125, 1317.53271484375, 1317.5399169921875, 1317.547119140625, 1317.5543212890625, 1317.5615234375, 1317.489501953125, 1317.4967041015625, 1317.50390625, 1317.5111083984375, 1317.518310546875, 1317.5255126953125, 1317.53271484375, 1317.5399169921875, 1317.547119140625, 1317.5543212890625, 1317.5615234375, 1317.489501953125, 1317.4967041015625, 1317.50390625, 1317.5111083984375, 1317.518310546875, 1317.5255126953125, 1317.53271484375, 1317.5399169921875, 1317.547119140625, 1317.5543212890625, 1317.5615234375, 1317.489501953125, 1317.4967041015625, 1317.50390625, 1317.5111083984375, 1317.518310546875, 1317.5255126953125, 1317.53271484375, 1317.5399169921875, 1317.547119140625, 1317.5543212890625, 1317.5615234375, 1317.489501953125, 1317.4967041015625, 1317.50390625, 1317.5111083984375, 1317.518310546875, 1317.5255126953125, 1317.53271484375, 1317.5399169921875, 1317.547119140625, 1317.5543212890625, 1317.5615234375, 1317.489501953125, 1317.4967041015625, 1317.50390625, 1317.5111083984375, 1317.518310546875, 1317.5255126953125, 1317.53271484375, 1317.5399169921875, 1317.547119140625, 1317.5543212890625, 1317.5615234375, 1317.489501953125, 1317.4967041015625, 1317.50390625, 1317.5111083984375, 1317.518310546875, 1317.5255126953125, 1317.53271484375, 1317.5399169921875, 1317.547119140625, 1317.5543212890625, 1317.5615234375, 1317.489501953125, 1317.4967041015625, 1317.50390625, 1317.5111083984375, 1317.518310546875, 1317.5255126953125, 1317.53271484375, 1317.5399169921875, 1317.547119140625, 1317.5543212890625, 1317.5615234375, 1317.489501953125, 1317.4967041015625, 1317.50390625, 1317.5111083984375, 1317.518310546875, 1317.5255126953125, 1317.53271484375, 1317.5399169921875, 1317.547119140625, 1317.5543212890625, 1317.5615234375]
Z = [4251.0, 4709.0, 4964.0, 4841.0, 5150.0, 5566.0, 5849.0, 5126.0, 4776.0, 4159.0, 4587.0, 15026.0, 16042.0, 17385.0, 18204.0, 18756.0, 18429.0, 20108.0, 18208.0, 18137.0, 15512.0, 14252.0, 38640.0, 40912.0, 44742.0, 48256.0, 51276.0, 48700.0, 48630.0, 47534.0, 47528.0, 37621.0, 36378.0, 63476.0, 68681.0, 72606.0, 77005.0, 83461.0, 84781.0, 80830.0, 78657.0, 74265.0, 64688.0, 58954.0, 72568.0, 76691.0, 85765.0, 88176.0, 95847.0, 94039.0, 92193.0, 90114.0, 86131.0, 73637.0, 69138.0, 65324.0, 69272.0, 77007.0, 80101.0, 87474.0, 83800.0, 81599.0, 80097.0, 76092.0, 67502.0, 61812.0, 51300.0, 55933.0, 61503.0, 63763.0, 69422.0, 67678.0, 64683.0, 63100.0, 59392.0, 53528.0, 48526.0, 39004.0, 42287.0, 46422.0, 48064.0, 53608.0, 51926.0, 49335.0, 47674.0, 45192.0, 40570.0, 36978.0, 29110.0, 31968.0, 35257.0, 36317.0, 40040.0, 39242.0, 37815.0, 36077.0, 34165.0, 30798.0, 28342.0, 22130.0, 24130.0, 27180.0, 27668.0, 30156.0, 29506.0, 29791.0, 27266.0, 26196.0, 24205.0, 21713.0, 16681.0, 18604.0, 20717.0, 21186.0, 23593.0, 22869.0, 23007.0, 21917.0, 20445.0, 18478.0, 16866.0, 13039.0, 14626.0, 16060.0, 16290.0, 18006.0, 17579.0, 17736.0, 17396.0, 15980.0, 14696.0, 12509.0, 10144.0, 11442.0, 12436.0, 12937.0, 14124.0, 13466.0, 14254.0, 13358.0, 12897.0, 11405.0, 9914.0, 8173.0, 9561.0, 10162.0, 11155.0, 11221.0, 11320.0, 11545.0, 10513.0, 10939.0, 9546.0, 8476.0, 6618.0, 8130.0, 8309.0, 9303.0, 9082.0, 9210.0, 9172.0, 8472.0, 8792.0, 7922.0, 6550.0] 
```

我使用 matplotlib 创建一个线框，如下所示：

```
X=sorted(set(X))
Y=sorted(set(Y))
X,Y=np.meshgrid(X,Y)
fig=plt.figure()
ax=fig.add_subplot(111,projection='3d')
ax.plot_wireframe(X,Y,Z)
plt.show() 
```

代码运行，没有抱怨，但我得到的图片真的很奇怪（对我来说），所以我的问题是：

1.  谁能向我解释为什么接线（可以这么说）是这样安排的？
2.  我如何决定“如何”连接我的数据（我为什么需要？我期待这个函数将连接每个网格坐标的 Z 值）。
3.  原来的 X、Y 和 Z 的长度怎么可能是 165，但在执行我的网格网格 X 和 Y 之后的长度是 11（11*11 = 121，缺少 44 个值？）

![在此处输入图像描述](https://i.stack.imgur.com/CI9Tq.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:29:25.183

您需要重塑`Z`数组：

```
XX, YY = meshgrid(X, Y)
ZZ = reshape(Z, XX.shape)
ax.plot_wireframe(XX, YY, ZZ) 
```

# android - 如何将 GridView 中的图像放置在 Android 的不同位置？

> ID：15789804
> 
> 赞同：0
> 
> 时间：2013-04-03T14:13:01.690
> 
> 标签：android, gridview

我在我的应用程序中使用具有三列的 GridView。你可以在下面看到它。

```
<GridView
                android:id="@+id/mainMenu"
                android:layout_width="match_parent"
                android:layout_height="fill_parent"
                android:columnWidth="60dp"
                android:gravity="center"
                android:numColumns="3"
                android:stretchMode="columnWidth"
                android:horizontalSpacing="1dp"
                android:verticalSpacing="1dp" > 
```

动态地，我想在 GridView 中的六个不同位置放置 6 个图像。我在这方面开发了一些代码，每次运行代码时，它都会将图像放置在错误的位置。实际上我想把 image_1 放在 position_0 上，把 image_2 放在 position_1 上，把 image_3 放在 position_2 上等等。我怎样才能完成预期的任务。请在这方面帮助我，我会非常感谢你的善举。提前致谢。

```
protected void onCreate(Bundle savedInstanceState) 
    {

        super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_NO_TITLE);
    setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT); 
    getWindow().addFlags(WindowManager.LayoutParams.FLAG_KEEP_SCREEN_ON); 

    setContentView(R.layout.main);

    grdMainMenu = (GridView) findViewById(R.id.mainMenu);
    grdMainMenu.setAdapter(new ImageAdapter(this));
}

public class ImageAdapter extends BaseAdapter
    {
        Context mContext;
        public ImageAdapter(Context c)
        {
            mContext = c;
        }

        @Override
        public int getCount() 
        {
            // TODO Auto-generated method stub
            return 6;
        }

        @Override
        public Object getItem(int position) 
        {
            // TODO Auto-generated method stub
            return null;
        }

        @Override
        public long getItemId(int position) 
        {
            // TODO Auto-generated method stub
            return 0;
        }

        @Override
        public View getView(int position, View convertView, ViewGroup parent) 
        {
            View v;
            ImageView iv;

            if(convertView ==null)
            {
                LayoutInflater li = getLayoutInflater();
                v = li.inflate(R.layout.icon, null);

                iv = (ImageView)v.findViewById(R.id.icon_image);

                if(position == 0)
                {
                    iv.setImageResource(R.drawable.image1);
                }

                if(position == 1)
                {
                    iv.setImageResource(R.drawable.image2);
                }

                if(position == 2)
                {
                    iv.setImageResource(R.drawable.image3);             

                }

                if(position == 3)
                {
                    iv.setImageResource(R.drawable.image4);             

                }

                if(position == 4)
                {
                    iv.setImageResource(R.drawable.image5);             

                }

                if(position == 5)
                {
                    iv.setImageResource(R.drawable.image6);             

                }

            }

            else
            {
                v = convertView;
            }

            return v;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-13T20:15:03.837

您可以使用 ImageAdapter 类和图像的 Integer 数组。Imageadapter 会将每个图像放置在网格视图中的所需位置。[请参阅Shuffle Gridview items without repeats](https://stackoverflow.com/questions/15890493/shuffling-gridview-items-without-repeats-tried-many-approaches)的答案尝试了许多方法。检查 SimonSays 的答案

# django - django south 在多个数据库上

> ID：15789805
> 
> 赞同：1
> 
> 时间：2013-04-03T14:13:05.670
> 
> 标签：django, django-south

我为我的 django 项目使用了两个环境，开发和生产。我主要从事开发工作，当我更改模型中的字段时，我使用南迁移到新模型。

我不明白的是我现在如何将它传输到我的生产数据库？我正在做的是将我的代码提交到 SVN 并在生产中更新，然后尝试迁移。

我应该提交我的迁移目录和文件吗？还是我不应该？尝试在我的生产机器上迁移时似乎总是失败。

编辑：我做了额外的测试。我已经清除了我的南历史表并删除了所有迁移目录。

现在在我的本地环境中运行： python manage.py convert_to_south app_name

一切似乎都很完美。我现在向我的模型添加了一个附加字段并运行：python manage.py schemamigration app_name --auto

新字段已按预期迁移到我的数据库中。现在，我使用 .py 文件提交了我的迁移文件夹（我的新字段包含 0001-initial 和 0002）

在我的开发环境中，我更新了包含迁移文件的树。我运行 python manage.py syncdb。south_migrationhistory 表已创建但*enpty*。

现在我运行 python manage.py schemamigration app_name --auto 并得到：“似乎没有任何改变。”

south_migrationhistroy 仍然是空的.....我不知道我在这里做错了什么

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:21:57.810

您应该提交您的迁移目录和文件。当您执行 svn 更新时，South 现在知道如何处理您的新迁移。

South 查找一个名为`south_migrationhistory`以查看已应用哪些迁移的数据库表，并在此基础上应用迁移文件夹中指定的新迁移。如果您不签入新的迁移文件，它将始终以“无新更新”结束。

# r - 从 R 中的数据输出自动创建表

> ID：15789807
> 
> 赞同：1
> 
> 时间：2013-04-03T14:13:11.833
> 
> 标签：r

我在 R 中遇到了一些麻烦，希望在这里能找到一些帮助。

我从以下形式的循环中输出数据，而国家/地区的数量可能会有所不同：

```
> data
$Australia
   HITTypeId    HITId    Valid
1   123          555     TRUE

$India
   HITTypeId    HITId    Valid
 1  456          888     TRUE 
```

现在我正在寻找的是创建一个数据表，它会自动为我提供以下形式的内容：

```
 country       HITTypeId      HITId    Valid
1  Austria         123          555     TRUE
2  Belgium         456          888     TRUE 
```

我将不胜感激任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:18:21.707

使用这个功能：

```
do.call(rbind, data) 
```

# ember.js - 处理每个助手的第二个参数（控制器）。这是什么意思？

> ID：15789808
> 
> 赞同：0
> 
> 时间：2013-04-03T14:13:14.627
> 
> 标签：ember.js, handlebars.js

我正在尝试分析 TodoMVC 的 Ember 示例。#each 助手的第二个参数是什么意思？

```
<ul id="todo-list">
    {{#each filteredTodos itemController="todo"}}
        <li {{bindAttr class="isCompleted:completed isEditing:editing"}}>
            {{#if isEditing}}
                {{view Todos.EditTodoView todoBinding="this"}}
            {{else}}
                {{view Ember.Checkbox checkedBinding="isCompleted" class="toggle"}}
                <label {{action "editTodo" on="doubleClick"}}>{{title}}</label>
                <button {{action "removeTodo"}} class="destroy"></button>
            {{/if}}
            </li>
    {{/each}}
</ul> 
```

它应该是一个选项哈希，但我不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T15:08:45.040

它将`itemController`当前控制器的属性（`TodosController`我假设）设置`todo`为`TodoController`.

这意味着每个项目（`<li>`元素）都不会绑定到实例，`TodosController`而是绑定到`TodoController`实例。

`isEditing`查找 的 实例上的属性`TodoController`并将`{{ action "removeTodo" }}`调用`removeTodo`上的函数`TodoController`。

# asp.net-mvc - 在主页/索引页面上放置 MVC 4 登录控件

> ID：15789810
> 
> 赞同：0
> 
> 时间：2013-04-03T14:13:20.733
> 
> 标签：asp.net-mvc, asp.net-mvc-4

首先，我是 MVC 的新手，我是一个 webforms 人......

我想在我的`home/index`页面上显示我的登录控件，但无论我做什么，我都会遇到错误。我尝试了各种技术，每种技术都有很多错误，所以我不会在这里一一列举。

现在我已经设置了，如果`Request.IsAuthenticated`然后显示用户名，则显示登录表单。但是表单显然正在查看家庭控制器，当我提交登录时没有任何反应。

任何建议将不胜感激。这几天我一直在涉猎。

谢谢 ：）

这是代码：

```
'@{
ViewBag.Title = "MyApp";
}

<p>Code for main Index Page here</p>

@model Application.Models.LoginModel
@{
ViewBag.Title = "Log in";
}

@if (Request.IsAuthenticated) {
<text>
    Hello, @Html.ActionLink(User.Identity.Name, "Manage", "Account", routeValues:     null, htmlAttributes: new { @class = "username", title = "Manage" })!
    @using (Html.BeginForm("LogOff", "Account", FormMethod.Post, new { id = "logoutForm" })) {
        @Html.AntiForgeryToken()
        <a href="javascript:document.getElementById('logoutForm').submit()">Log off</a>
    }
</text>
} else {

<section id="loginForm">
<h2>Use a local account to log in.</h2>
@using (Html.BeginForm(new { ReturnUrl = "RedirectToAction" }))
{
@Html.AntiForgeryToken()
@Html.ValidationSummary(true)

<fieldset>
    <legend>Log in Form</legend>
    <ol>
        <li>
            @Html.LabelFor(m => m.UserName)
            @Html.TextBoxFor(m => m.UserName)
            @Html.ValidationMessageFor(m => m.UserName)
        </li>
        <li>
            @Html.LabelFor(m => m.Password)
            @Html.PasswordFor(m => m.Password)
            @Html.ValidationMessageFor(m => m.Password)
        </li>
        <li>
            @Html.CheckBoxFor(m => m.RememberMe)
            @Html.LabelFor(m => m.RememberMe, new { @class = "checkbox" })
        </li>
    </ol>
    <input type="submit" value="Log in" />
</fieldset>
<p>
    @Html.ActionLink("Register", "Register", "Account") if you don't have an account.
</p> 
}
@section Scripts {
@Scripts.Render("~/bundles/jqueryval")
}
</section>
} 
```

'

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-16T07:04:28.130

你必须像这样修改你的表格：

```
@using (Html.BeginForm("Login","Account",FormMethod.Post, new { ReturnUrl = ViewBag.ReturnUrl })) 
```

关键是 "Login","Account" 部分，它告诉表单将​​数据发布到帐户控制器而不是主控制器的登录操作。我用同样的东西打了几个小时然后弄明白了。

如果数据没有发布到帐户控制器（实际验证用户名和密码并将用户登录的控制器），它将永远不会尝试登录。

原因是：默认情况下，在 routeconfig.cs 类中发送任何未指定操作的链接或表单，控制器将所有内容发送到 Home 控制器的 Index 操作。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:24:18.610

您应该使用子操作：

在您的控制器中：

```
[ChildActionOnly]
public ActionResult LoginForm()
{
    return View("_LoginFormPartialViewHere");
} 
```

然后在您的主页视图中：

```
@{ Html.RenderAction("LoginForm"); } 
```

在登录表单的部分视图中，您可以为登录视图模型强输入视图，但请确保为表单指定与默认“回发”模型不同的发布操作。此操作将处理登录并且仅处理登录（因此不是您的主页操作）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-16T07:34:31.163

您的问题是您试图编写代码而没有真正理解它的作用。在不了解它的作用的情况下，您只是随机改变事物，希望找到有用的东西。这是一种非常糟糕的软件编写方式。

您的问题根源在于您不了解 MVC 只是生成 HTML，并且不了解该 HTML 应该做什么，您几乎没有希望随机弄清楚这一点。

首先，MVC 没有“登录控件”的概念。它们只是 HTML 表单字段，它们位于 HTML 表单元素中。这些表单字段使用标准 HTML 发布到您的控制器，这意味着您必须确保表单操作方法正确，并且操作 url 正确。

其次，当这些表单字段被发布时，您必须有一个接收帖子的操作方法。如果该操作方法与 GET 中使用的操作方法不同，那么您将必须告诉 BeginForm() 助手要发布到哪里。

在 MVC 中，您不能像 Webforms 那样思考并假设一切都为您完成。您必须自己做所有事情，并确保每个链接、每个操作、每个选择器、每个 javascript 位等都是正确的。这比 WebForms 需要更多的工作，但它也更强大、更高效。

# jquery - 在屏幕上保留一个 div

> ID：15789815
> 
> 赞同：0
> 
> 时间：2013-04-03T14:13:27.630
> 
> 标签：jquery, css

这是我的设置，我有两个并排的 div，`float: left`左侧的一个包含右侧 div 中文本的锚链接列表。因此，您单击左侧 div 中的标题，屏幕跳转到右侧 div 中的相应内容。

右侧的 div 包含大量文本，菜单非常小，所以我希望菜单始终保持在屏幕上。

我使用 jquery 让它工作，但有两个问题；

*   这是非常跳跃的，我希望它是平滑的。
*   它给菜单一个固定的位置，然后导致右 div 移动到菜单后面。

我试图通过将正确的 div 设为绝对值并为其`left`赋值来解决第二个问题，但这会导致内容从包含 div 的底部爆裂，而不是包含 div 扩展以适应内容。

我希望所有这些都有意义，谢谢

**jQuery**

```
$(window).scroll( function() {
    if ($(window).scrollTop() > $('.servicesLeft').offset().top)
        $('.servicesLeft').addClass('floating');
    else
        $('.servicesLeft').removeClass('floating');
}); 
```

**CSS**

```
.floating {
    position: fixed;
    top: 0;
} 
```

**编辑**

JSFiddle 链接 - [http://jsfiddle.net/Rx93t/](http://jsfiddle.net/Rx93t/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:58:03.850

看[小提琴](http://jsfiddle.net/anpsmn/B2Je7/7/)

*   当您单击链接时，我使用了 jQuery [scrollTo插件来平滑滚动。](http://flesler.blogspot.in/)
*   然后我有一个代码，我在其中检查窗口滚动事件并在向下滚动时应用类 nav-fixed。

希望这是你想要的。

### 点击滚动

```
 $('#list li a').on('click', function () {
      $.scrollTo($(this).attr('href'), 750);
   }) 
```

### 窗口滚动事件

```
 $(window).scroll(function () {

      if (!$('.nav').attr('data-top')) {
        // If already fixed, then do nothing
        if ($('.nav').hasClass('nav-fixed')) {
            return;
        }
        var offset = $('.nav').position();
        $('.nav').attr('data-top', offset.top);
      }

      if ($('.nav').outerHeight() -$('.nav').attr('data-top')  <= $(this).scrollTop())   
      {
        $('.nav').addClass('nav-fixed');
      } 
      else 
      {
        $('.nav').removeClass('nav-fixed');
      }

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T16:04:18.367

您只需将元素的初始顶部位置存储到一个变量中，然后测试窗口是否已通过它，否则您每次都在测试它的新位置，这会导致闪烁。

所以，

```
var y = $('.servicesLeft').offset().top;

$(window).scroll( function() {
if ($(window).scrollTop() > y)
    $('.servicesLeft').addClass('floating');
else
    $('.servicesLeft').removeClass('floating');
}); 
```

并解决您需要使用的 div 排在另一个前面的`position: relative`问题`z-index`

小提琴：http: [//jsfiddle.net/Rx93t/3/](http://jsfiddle.net/Rx93t/3/)

# regex - grep 通过二进制文件

> ID：15789823
> 
> 赞同：0
> 
> 时间：2013-04-03T14:13:52.000
> 
> 标签：regex, grep

我有一个二进制文件，其中包含以下形式的行：

```
blabla^A2013.04.03-09:35:04^Ablabla 
```

`^A`二进制字符在哪里`001`。

我希望能够执行一个 grep，它只会给我介于`^A`（而不是整行）之间的内容。

我知道该标志`-o`仅用于匹配，但我不知道如何搜索该二进制字符

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:17:25.613

尝试这样做：

```
grep --binary-files=text pattern file.txt 
```

所以 ：

```
$ grep --binary-files=text -oP '\^\K[^\^]+(?=\^)' file.txt
A2013.04.03-09:35:04 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:31:38.117

您应该能够通过简单地键入`control-A`您希望它出现的位置在命令行中包含 control-A。在最坏的情况下，您可能需要`control-V`在它之前输入。您还可以使用`bash`的[ANSI-C 引用](http://www.gnu.org/software/bash/manual/bash.html#ANSI_002dC-Quoting)来探索符号，例如`$'\001'`.

# python - 获取 Microsoft Web N-Gram 服务的用户令牌（公测版）

> ID：15789827
> 
> 赞同：0
> 
> 时间：2013-04-03T14:13:55.067
> 
> 标签：python, web-services, n-gram

我想使用[Microsoft Web N-Gram 服务（公共测试版）](http://web-ngram.research.microsoft.com/info/)的 Python 库，但我必须从 Microsoft Research 检索用户令牌才能这样做。但是，我找不到如何检索它。在 Microsoft Web N-Gram 服务信息页面上声明我必须接受[使用条款](http://web-ngram.research.microsoft.com/info/termsofuse.htm)，但该链接会打开一个简单的 html 页面，其中仅说明了使用条款。

其他人是否使用过 Python 库并检索了用户令牌？

# jpa - 从 Spring mvc 控制器方法更新 JPA 实体并使用隐藏输入字段存储 ID 的问题

> ID：15789837
> 
> 赞同：3
> 
> 时间：2013-04-03T14:14:20.163
> 
> 标签：jpa, spring-mvc, spring-data-jpa

假设我有一个具有**大量属性的****实体/javabean**。

 **此外，我有一个用于更新该实体的 html 表单（在 jsp 或 thymeleaf 中）。

因为我的应用程序在这里是我如何继续更新实体：

1.  我在表单的隐藏 html 字段中设置实体的 JPA ID
2.  在 Spring 控制器中，我使用该隐藏 ID 从数据库中检索实体
3.  仍然在控制器方法中，然后我使用作为参数传递给控制器​​方法的 spring mvc ModelAttribute 的字段设置先前检索到的实体的每个字段。
4.  然后我使用 entityManager 持久化/更新实体。

这是我的控制器方法中的一个示例：

```
@RequestMapping(value = "/family/advertisement/edit", method = RequestMethod.POST, produces = "text/html")
    public String editFamilyAdvertisement(@ModelAttribute @Validated(value = Validation.AdvertisementCreation.class) FamilyAdvertisement familyAdvertisement,
            BindingResult bindingResult, Model model) {
        FamilyAdvertisement advertisementForUpdate = advertisementService.findFamilyAdvertisement(familyAdvertisement.getId());
        if (bindingResult.hasErrors()) {
            populateModel(model, familyAdvertisement);
            return "family/advertisement/edit";
        }
        advertisementForUpdate.setNeeds(familyAdvertisement.getNeeds());
        advertisementForUpdate.setChildcareTypes(familyAdvertisement.getChildcareTypes());
        advertisementForUpdate.setDayToTimeSlots(familyAdvertisement.getDayToTimeSlots());
        ...
        advertisementService.editFamilyAdvertisement(advertisementForUpdate);
        return "redirect:/some/url";
    } 
```

我的应用程序目前存在两个问题：

*   首先，聪明的黑客可以很容易地篡改 ID 并更新其他人的广告。
*   其次，我必须使用 spring mvc 模型属性中的那些手动更新附加实体的每个字段：这既乏味又丑陋。

谁能建议一个更好的模式或解决方案？

**编辑1**：我遵循了提供的建议。

这是我修改后的控制器方法：

```
@RequestMapping(value = "/family/advertisement/edit", method = RequestMethod.POST, produces = "text/html")
    public String editFamilyAdvertisement(@ModelAttribute @Validated(value = Validation.AdvertisementCreation.class) FamilyAdvertisementInfo familyAdvertisementInfo,
            BindingResult bindingResult, Model model) {
        Member member = memberService.retrieveCurrentMember();
        FamilyAdvertisement advertisementForCheck = advertisementService.findFamilyAdvertisement(familyAdvertisementInfo.getFamilyAdvertisement().getId());
        if (!member.getAdvertisements().contains(advertisementForCheck)) {
            throw new IllegalStateException("advertisement does not belong to member");
        }
        if (bindingResult.hasErrors()) {
            populateModel(model, familyAdvertisementInfo);
            return "family/advertisement/edit";
        }
        advertisementService.editFamilyAdvertisement(familyAdvertisementInfo.getFamilyAdvertisement());
        return "redirect:/family/advertisement/edit/" + familyAdvertisementInfo.getFamilyAdvertisement().getId();
    } 
```

您看到我必须从 db 中获取 Family 广告实体，以检查它是否属于会话中的当前成员。然后，当我尝试按照建议保存实体时，我得到一个**StaleObjectStateException**如下：

```
SEVERE: Servlet.service() for servlet [bignibou] in context with path [/bignibou] threw exception [Request processing failed; nested exception is org.springframework.orm.jpa.JpaOptimisticLockingFailureException: org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.bignibou.domain.FamilyAdvertisement#1]; nested exception is javax.persistence.OptimisticLockException: org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.bignibou.domain.FamilyAdvertisement#1]] with root cause
org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.bignibou.domain.FamilyAdvertisement#1]
    at org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:303)
    at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:151)
    at org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:76)
    at org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:903)
    at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:887)
    at org.hibernate.internal.SessionImpl.merge(SessionImpl.java:891)
    at org.hibernate.ejb.AbstractEntityManagerImpl.merge(AbstractEntityManagerImpl.java:879)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:366)
    at com.sun.proxy.$Proxy120.merge(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:241)
    at com.sun.proxy.$Proxy119.merge(Unknown Source)
    at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:345)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.executeMethodOn(RepositoryFactorySupport.java:334)
    at org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:319)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocatio 
```

**编辑2**：如果我不从数据库中获取实体，我遇到的问题是上面的调用`contains`总是会评估，`false`因为它在`equals`内部使用该方法并且实体可能已经改变（毕竟这是目的方法）。

```
if (!member.getAdvertisements().contains(familyAdvertisementInfo.getFamilyAdvertisement())) {
            throw new IllegalStateException("advertisement does not belong to member");
        } 
```

**编辑 3**：

我仍然对 StaleObjectStateException 有同样的问题，因为我的控制器方法似乎执行了两次保存/事务。

```
@RequestMapping(value = "/family/advertisement/edit", method = RequestMethod.POST, produces = "text/html")
    public String editFamilyAdvertisement(@ModelAttribute @Validated(value = Validation.AdvertisementCreation.class) FamilyAdvertisementInfo familyAdvertisementInfo,
            BindingResult bindingResult, Model model) {
        Member member = memberService.retrieveCurrentMember();//ONE
        if (!advertisementService.advertisementBelongsToMember(familyAdvertisementInfo.getFamilyAdvertisement(), member)) {
            throw new IllegalStateException("advertisement does not belong to member");
        }
        if (bindingResult.hasErrors()) {
            populateModel(model, familyAdvertisementInfo);
            return "family/advertisement/edit";
        }
        familyAdvertisementInfo.getFamilyAdvertisement().setMember(member);
        advertisementService.editFamilyAdvertisement(familyAdvertisementInfo.getFamilyAdvertisement());//TWO
        return "redirect:/family/advertisement/edit/" + familyAdvertisementInfo.getFamilyAdvertisement().getId();
    } 
```

见例外：

```
org.hibernate.StaleObjectStateException: Row was updated or deleted by another transaction (or unsaved-value mapping was incorrect): [com.bignibou.domain.FamilyAdvertisement#1]
    org.hibernate.event.internal.DefaultMergeEventListener.entityIsDetached(DefaultMergeEventListener.java:303)
    org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:151)
    org.hibernate.event.internal.DefaultMergeEventListener.onMerge(DefaultMergeEventListener.java:76)
    org.hibernate.internal.SessionImpl.fireMerge(SessionImpl.java:903)
    org.hibernate.internal.SessionImpl.merge(SessionImpl.java:887)
    org.hibernate.internal.SessionImpl.merge(SessionImpl.java:891)
    org.hibernate.ejb.AbstractEntityManagerImpl.merge(AbstractEntityManagerImpl.java:879)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:366)
    com.sun.proxy.$Proxy123.merge(Unknown Source)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:241)
    com.sun.proxy.$Proxy122.merge(Unknown Source)
    org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:345)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    java.lang.reflect.Method.invoke(Method.java:601)
    org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.executeMethodOn(RepositoryFactorySupport.java:334)
    org.springframework.data.repository.core.support.RepositoryFactorySupport$QueryExecutorMethodInterceptor.invoke(RepositoryFactorySupport.java:319)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:110)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:155)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.data.jpa.repository.support.LockModeRepositoryPostProcessor$LockModePopulatingMethodIntercceptor.invoke(LockModeRepositoryPostProcessor.java:91)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:91)
    org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
    com.sun.proxy.$Proxy129.save(Unknown Source)
    com.bignibou.service.AdvertisementServiceImpl_Roo_Service.ajc$interMethod$com_bignibou_service_AdvertisementServiceImpl_Roo_Service$com_bignibou_service_AdvertisementServiceImpl$updateFamilyAdvertisement(AdvertisementServiceImpl_Roo_Service.aj:58)
    com.bignibou.service.AdvertisementServiceImpl.updateFamilyAdvertisement(AdvertisementServiceImpl.java:1)
    com.bignibou.service.AdvertisementServiceImpl_Roo_Service.ajc$interMethodDispatch1$com_bignibou_service_AdvertisementServiceImpl_Roo_Service$com_bignibou_service_AdvertisementServiceImpl$updateFamilyAdvertisement(AdvertisementServiceImpl_Roo_Service.aj)
    com.bignibou.service.AdvertisementServiceImpl.editFamilyAdvertisement(AdvertisementServiceImpl.java:27)
    com.bignibou.controller.AdvertisementController.editFamilyAdvertisement(AdvertisementController.java:85) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-03T14:59:56.883

第一个问题：当您从数据库中检索实体时，指定 id*和*用户。如果没有找到具有 id 和用户的实体，则意味着用户不拥有该实体。

第二个问题：几种解决方案，取决于您的要求

*   直接公开您的实体而不是专用的表单对象
*   将您的实体封装在表单中并使用委托方法（您的 IDE 可以生成它们）
*   使用[推土机](http://dozer.sourceforge.net/)**

# dotnetnuke - 从 DNN 解决方案外部引用 DNN 编辑器

> ID：15789844
> 
> 赞同：0
> 
> 时间：2013-04-03T14:14:42.673
> 
> 标签：dotnetnuke, dotnetnuke-module, radeditor

我正在构建一个 DotNetNuke 模块，我需要包含 html 编辑器。但是，我的模块在一个独立的解决方案中，xcopy 到我的 DNN 安装（我正在按照 Visual Studio 项目模板制作模块）。我见过的所有示例代码都像这样引用文本编辑器：

```
<%@ Register TagPrefix="dnn" TagName="TextEditor" Src="~/controls/TextEditor.ascx" %>

<dnn:TextEditor ID="txtDescription" runat="server" Width="100%" Height="300px" /> 
```

问题在于，由于模块是在 DNN 之外开发的，因此对 TextEditor 的引用显然会破坏构建。

计划 B 是通过如下所示的占位符控件动态实例化编辑器：

```
EditorProvider editorProvider = new EditorProvider();
var control = editorProvider.HtmlEditorControl;

control.ID = "txtDescription";
phEditor.Controls.Add(control); 
```

这种工作，但大多数工具栏按钮都搞砸了！

[DNN 编辑器错误](http://i.stack.imgur.com/6Kx3y.png)

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T18:37:11.470

经过一番咒骂和头撞后，我找到了只实例化用户控件而不是编辑器服务器控件的简单答案。

```
var control = this.LoadControl("~/controls/TextEditor.ascx");
control.ID = "txtDescription";
phEditor.Controls.Add(control); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T18:25:31.150

我假设您正在为 dotnetnuke 开发一个自定义模块，您可以在 codeplex.com 上的[博客模块源代码中查看示例实现。](http://dnnblog.codeplex.com/SourceControl/changeset/view/ee7a4576071b8dd3e35842ca1ee53009ab3b3102)[EditEntry.ascx](http://dnnblog.codeplex.com/SourceControl/changeset/view/ee7a4576071b8dd3e35842ca1ee53009ab3b3102#EditEntry.ascx)是包含相同示例的控件。

基本上，您只需要引用`DotNetNuke.dll and DotNetNuke.WebControls.dll`以使其在 ascx 声明中工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-22T13:45:01.570

在Hristo Evtimov的[http://www.dnnsoftware.com/forums/forumid/203/postid/466819/scope/posts](http://www.dnnsoftware.com/forums/forumid/203/postid/466819/scope/posts)找到了更好的答案。

他的方法允许您向文本编辑器添加属性。

他的代码：

一种方法是这样的：

```
 DotNetNuke.UI.UserControls.TextEditor editor = (DotNetNuke.UI.UserControls.TextEditor)LoadControl("~/controls/texteditor.ascx");       
editor.ID = "Editor1";
this.Controls.Add(editor); 
```

我在 VB.NET 中的代码是这样的：

```
 Dim txtDescription As DotNetNuke.UI.UserControls.TextEditor = DirectCast(LoadControl("~/controls/texteditor.ascx"), DotNetNuke.UI.UserControls.TextEditor)
        txtDescription.ID = "txtAOneDescription" & intControlCounter.ToString
        txtDescription.HtmlEncode = False 
```

# cryptography - RSA算法计算

> ID：15789845
> 
> 赞同：2
> 
> 时间：2013-04-03T14:14:43.977
> 
> 标签：cryptography, rsa, public-key

我一直在通过网络书籍工作并点击 RSA 部分。考虑 p=5 和 q=11 的 RSA 算法。

```
so I get N = p*q = 55 right?

and z = (p-1) * (q -1) = 40 
```

我想我做对了，但是这本书对如何计算并不是很清楚。

书中的例子说 e = 3 但没有给出原因。是因为作者喜欢还是另有原因？

以及如何找到 d 以使 de= 1(mod z) 和 d < 160

感谢您在这方面的任何帮助，它现在有点在我之上。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T15:09:01.063

您对*n*和*z*的计算是正确的。

RSA 密码系统由三个变量*n*、*d*和*e*组成。变量*e*是三者中最不重要的，通常是任意选择以使计算简单；3 和 65537 是*e*最常见的选择。唯一的要求是*e*是奇数并且与 totient 互质（*z*在你的实现中）；因此，*e*经常被选为素数，因此无论选择什么 totient，它都将是 totient 的互素数。3和65537经常用于*e的原因*是因为它使计算变得容易；这两个数字在其二进制表示中只有两个 1 位，因此只需要复杂循环的两次迭代。

[您可以在我的博客](http://programmingpraxis.com/2010/11/16/rsa-cryptography/)上看到 RSA 密码系统的实现。如果您在那里四处逛逛，您还会发现其他一些您可能感兴趣的与加密相关的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T17:27:23.620

您正在寻找的是[扩展欧几里得算法](http://en.wikipedia.org/wiki/Extended_Euclidean_algorithm)

例如，请参阅维基百科或[这里](https://stackoverflow.com/questions/6422223/encryption-rsa-algorithm/6449214#6449214)

# cocoa-touch - 拒绝 mach-loop 服务器

> ID：15789849
> 
> 赞同：1
> 
> 时间：2013-04-03T14:15:01.567
> 
> 标签：cocoa-touch, cocoa

我的应用程序有两个目标。我需要在两个目标之间进行通信。因此，我将一个应用程序注册为服务器，该服务器已获得标识符和服务器名称。我尝试使用以下代码检索代理。标识符名称已设置为第二个目标。当我从第二个目标调用服务器对象时，我在控制台中得到了拒绝 mach-loop。

```
 id proxy = nil;
    proxy = [[NSConnection rootProxyForConnectionWithRegisteredName:@"MYSERVER"
                                                               host:nil] retain]; 
```

当我禁用沙盒时，我可以获得上述代理对象。但是，当我启用沙盒时，我无法获取代理对象。这背后的原因可能是什么。

问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:26:27.473

沙盒阻止了分布式对象连接。

听起来您需要了解沙盒的工作原理。

XPC 可能是分布式对象的一个​​很好的替代方案，具体取决于您要完成的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T05:36:37.227

我们可以通过使用权利属性来做到这一点。我们必须设置另一个应用程序的捆绑标识符，这里是链接：http: [//developer.apple.com/library/mac/#documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/EnablingAppSandbox.html#//apple_ref/doc /uid/TP40011195-CH4-SW5](http://developer.apple.com/library/mac/#documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/EnablingAppSandbox.html#//apple_ref/doc/uid/TP40011195-CH4-SW5)

# jquery - div背景色css类淡入淡出效果？

> ID：15789855
> 
> 赞同：0
> 
> 时间：2013-04-03T14:15:10.690
> 
> 标签：jquery, css

我正在尝试在鼠标悬停时向 div 添加淡入淡出效果。淡入淡出效果是颜色之间的过渡`background-color`。虽然我可以立即更改 css 类，但在创建淡入淡出动画时使用`fadeIn()`或`animate()`没有用处。我该如何制作这个动画？

jQuery：

```
$('div.my-bkgr').mouseover(function() {
  $('div.my-bkgr').attr("class", "my-bkgr-mouseover");
}).mouseout(function() {
  $('div.my-bkgr').attr("class", "my-bkgr");
}); 
```

CSS：

```
.my-bkgr {
  background-color: #ECF0F1;
}

.my-bkgr-mouseover {
  background-color: #E74C3C;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:22:21.307

仅使用该属性并根据您的需要[`transition`](http://www.w3.org/TR/css3-transitions/)指定 a怎么样？`transition-duration`例如

```
.my-bkgr  {
background-color: #ECF0F1;
transition: all 3s ease-out; /* Include vendor prefixes before this */
}

.my-bkgr:hover {
background-color: #E74C3C;
} 
```

[**jsFiddle**](http://jsfiddle.net/Humility/wNQDX/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:21:59.637

您可以使用纯 CSS 完成所有这些操作：

```
.my-bkgr {
  background: #ECF0F1;
  /* A transition of 0.3 seconds */
  -webkit-transition: background 0.3s;
  -moz-transition: background 0.3s;
  -o-transition: background 0.3s;
  -ms-transition: background 0.3s;
  transition: background 0.3s;
 }
.my-bkgr:hover {
  background: #E74C3C;
} 
```

如果你想要 IE 支持，或者使用 jQuery UI：http: [//jqueryui.com/animate/](http://jqueryui.com/animate/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:22:11.070

尝试使用 CSS 过渡。

```
.my-bkgr{
    -webkit-transition: color 2s ease;
       -moz-transition: color 2s ease;
        -ms-transition: color 2s ease;
         -o-transition: color 2s ease;
            transition: color 2s ease;
} 
```

* * *

**来源**

[http://www.w3.org/TR/css3-transitions/](http://www.w3.org/TR/css3-transitions/)

[http://css3generator.com/](http://css3generator.com/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-03T14:22:35.293

jQuery 文档在这里有一个如何做你想做的事的例子：http: [//docs.jquery.com/UI/Effects/Highlight](http://docs.jquery.com/UI/Effects/Highlight)

```
$("div").click(function () {
  $(this).effect("highlight", {}, 3000);
}); 
```

只需将 click 替换为所需的事件即可。所以也许试试这个（我的头顶）

```
$('div.my-bkgr').bind('mouseover', function(){
    $(this).effect("highlight", {
      colour: #E74C3C
    }, 3000);
}); 
```

# mysql - MySQL 只获取查询 ID 最高的行

> ID：15789856
> 
> 赞同：1
> 
> 时间：2013-04-03T14:15:14.187
> 
> 标签：mysql

你好 Stackoverflow 社区，

这是我在这里的第一篇文章，所以我为我糟糕的英语道歉！:)

如果您不想阅读所有内容，则问题标记**如下**。

标题有点误导，但我不知道如何更好地解释它，但详细的解释应该让你明白：

我有一个很大的日志表（此时大约有 500000 行），其中一个游戏服务器记录了游戏中发生的许多动作。我想以最有效的方式提取一些特定的日志行。

我无法更改游戏服务器的日志系统，如果可以的话，我会将其更改为更多的日志表，以创建更紧凑的日志。（因为在该表上执行查询需要时间..）

现在我的问题是，我想获取特定类型的最后一个日志行，并从特定的玩家 ID 获取玩家的最后操作，但我不知道如何以有效的方式做到这一点。例子：

```
SELECT * FROM log WHERE logType = "PLAYER" AND playerID = [playerID] ORDER BY time DESC LIMIT 1 
```

然后网站上的输出将是：您最后的操作是[人类可读的操作和附加信息]。

MySQL 分析现在告诉我，对结果进行排序需要最多的时间。

现在我的问题是：**是否可以只获取特定玩家 ID 和类型的最后一行？** 我想这可以用 ID 完成，因为它有 auto_increment。那么**是否有可能获得具有最高 ID、特定类型和特定玩家 id 的行？**

表结构：ID(int) | 日志类型（varchar） | 时间（日期时间） | 玩家ID(int) | 位置X(int) | 位置Y(int) | 动作ID(int) | 动作(varchar) | 提示(varchar) | ip(varchar) | 项目编号（整数）

解释：

ID：记录操作的唯一 ID

logType：记录动作的类型（例如：“PLAYER”或“ITEM”）

time：动作发生的时间

playerID：玩家的 id（或与该类型相关的其他 id）

positionX：游戏中的X位置

positionY：游戏中的Y位置

actionID：与动作相关的 id（例如：如果日志动作是“KILLED_BY_PLAYER”，则为杀死该玩家的其他玩家的玩家 id）

action：记录的动作（例如：KILLED_BY_PLAYER）

提示：一些有用的提示，比如玩家的名字

ip：播放器的IP

itemNumber：Item的编号，如果涉及到Item，否则为NULL

谢谢你的帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:17:40.757

获得最高的 id：

```
select max(id) from table; 
```

其他您可以在 select 语句中放置 where 子句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:21:34.583

`time`您应该能够在排序的地方使用您的查询`LIMIT 1`。如果您对列的排序`time`很慢，则必须确保索引已优化（`explain`在您的查询上运行）。您将需要和上`logtype`的索引。即使有 500 000 行，这不应该是一个问题......`player_id``time`

# c# - 当我使用 iTextSharp 阅读 PDF 文档时，只得到 *?* 字符

> ID：15789864
> 
> 赞同：0
> 
> 时间：2013-04-03T14:15:37.927
> 
> 标签：c#, character-encoding, itextsharp

我正在尝试使用 itextsharp 库阅读 PDF 文档中的文本。我对仅返回的特定文档有疑问*？*特点。但是，对于其他文档，我没有任何问题。

¿ 这是什么原因？

这是我的代码

```
 private void readPDF()
    {
        string pdfTemplate = @"c:\\test2.pdf";

        // Título de formulario
        this.Text += " - " + pdfTemplate;

        String strText="";
        try
        {
            PdfReader reader = new PdfReader(pdfTemplate);

            for (int page = 1; page <= reader.NumberOfPages; page++)
            {
                ITextExtractionStrategy its = new iTextSharp.text.pdf.parser.SimpleTextExtractionStrategy();
                String s = PdfTextExtractor.GetTextFromPage(reader, page, its);

                s = Encoding.UTF8.GetString(ASCIIEncoding.Convert(Encoding.Default, Encoding.UTF8, Encoding.Default.GetBytes(s)));
                strText = strText + s;

            }
            reader.Close();

            textBox1.Text = strText;
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

有任何想法吗？？谢谢

# android - 使用NDK在Android中转换视频的C文件？

> ID：15789865
> 
> 赞同：1
> 
> 时间：2013-04-03T14:15:39.867
> 
> 标签：android, c, android-ndk

我已经编译了最新的 Bambuser FFmpeg 项目，其中包含 sh 文件。我已将该目录复制到我的 Android 项目中的“jni”目录中。现在，我尝试使用 r8e ndk 编译 ffmpeg 库。

但是，我不知道 c 文件应该是怎样的。一方面，c 文件可能类似于 ffmepg.c 库的主要功能。Java 类使用字符串数组调用此函数，如[ffmpeg4android](http://ffmpeg4android.netcompss.com/)所做的那样。

另一方面，它可能是一个包含大量 ffmpeg 函数的函数，如 av_register_all()、av_register_all()、...

这样做的最佳形式是什么？对构建c文件有什么帮助吗？

安卓.mk

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)
MY_LIB_PATH := armeabi-v7a/lib
LOCAL_MODULE := libavcore
LOCAL_SRC_FILES := $(MY_LIB_PATH)/libavcore.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := libavformat
LOCAL_SRC_FILES := $(MY_LIB_PATH)/libavformat.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := libavcodec
LOCAL_SRC_FILES := $(MY_LIB_PATH)/libavcodec.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := libavdevice
LOCAL_SRC_FILES := $(MY_LIB_PATH)/libavdevice.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := libavfilter
LOCAL_SRC_FILES := $(MY_LIB_PATH)/libavfilter.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := libavutil
LOCAL_SRC_FILES := $(MY_LIB_PATH)/libavutil.so
include $(PREBUILT_SHARED_LIBRARY)

include $(CLEAR_VARS)
LOCAL_MODULE := libswscale
LOCAL_SRC_FILES := $(MY_LIB_PATH)/libswscale.so
include $(PREBUILT_SHARED_LIBRARY)

#local_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := libtest_jni
LOCAL_SRC_FILES := libtest/ffmpeg.c

LOCAL_C_INCLUDES := \
$(LOCAL_PATH)/armeabi-v7a/include \
    $(LOCAL_PATH)/ffmpeg-android/ffmpeg 
    LOCAL_LDLIBS := -L$(NDK_PLATFORMS_ROOT)/$(TARGET_PLATFORM)/arch-arm/usr/lib -   L$(LOCAL_PATH) -L$(LOCAL_PATH)/armeabi-v7a/lib/ -lavformat -lavcodec -lavdevice -lavfilter -   lavutil -lswscale -llog -lz -lm
    #dl -lgcc

    include $(BUILD_SHARED_LIBRARY) 
```

Java 文件：

```
public class MainActivity extends Activity {

public native String loadInfo (String name);

static {
    System.loadLibrary("avutil");
    System.loadLibrary("swscale");
    System.loadLibrary("avcore");
    System.loadLibrary("avfilter");
    System.loadLibrary("avdevice");
    System.loadLibrary("avcodec");
    System.loadLibrary("avformat");

    System.loadLibrary("test_jni");
    }

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    File rootsd = Environment.getExternalStorageDirectory();
    File dcim = new File(rootsd, "DCIM");
    File file = new File(dcim, "mm.mp4");

    Log.i("INFO: ", file.toString());

    loadInfo(file.toString());

}

} 
```

ffmepg.c的主要功能c文件复制

```
 #include <jni.h>  
 #include <android/log.h>  

 #include "cmdutils.h"
 #include "config.h"
 #include <ctype.h>
 #include <string.h>
 #include <math.h>
 #include <stdlib.h>
 #include <errno.h>
 #include <signal.h>
 #include <limits.h>
 #include <unistd.h>
 #include "libavformat/avformat.h"
 #include "libavdevice/avdevice.h"
 #include "libswscale/swscale.h"
 #include "libavcodec/opt.h"
 //#include "libavcodec/audioconvert.h"
 #include "libavcore/audioconvert.h"
 #include "libavcore/parseutils.h"
 #include "libavcore/samplefmt.h"
 //#include "libavutil/colorspace.h"
 #include "libavutil/fifo.h"
 #include "libavutil/intreadwrite.h"
 #include "libavutil/pixdesc.h"
 #include "libavutil/avstring.h"
 //#include "libavutil/libm.h"
 //#include "libavformat/os_support.h"

 #if CONFIG_AVFILTER
 # include "libavfilter/avfilter.h"
 # include "libavfilter/avfiltergraph.h"
 //# include "libavfilter/vsrc_buffer.h"
 #endif

 #if HAVE_SYS_RESOURCE_H
 #include <sys/types.h>
 #include <sys/time.h>
 #include <sys/resource.h>
 #elif HAVE_GETPROCESSTIMES
 #include <windows.h>
 #endif
 #if HAVE_GETPROCESSMEMORYINFO
 #include <windows.h>
 #include <psapi.h>
 #endif

 #if HAVE_SYS_SELECT_H
 #include <sys/select.h>
 #endif

 #if HAVE_TERMIOS_H
 #include <fcntl.h>
 #include <sys/ioctl.h>
 #include <sys/time.h>
 #include <termios.h>
 #elif HAVE_CONIO_H
 #include <conio.h>
 #endif
 #include <time.h>

 #include "libavutil/avassert.h"

 void Java_es_prueba_ffmpeg_MainActivity_loadInfo (JNIEnv * env, jobject this, jstring filename)  {

int64_t ti;

av_log_set_flags(AV_LOG_SKIP_REPEATED);

avcodec_register_all();

#if CONFIG_AVDEVICE
     avdevice_register_all();
 #endif

 #if CONFIG_AVFILTER
     avfilter_register_all();
 #endif

av_register_all();

init_opts();
} 
```

它在 init_opts(); 中崩溃；错误：未定义对“init_opts”的引用，但我包含了具有此功能的 cmdutils.h 文件。

另一个使用 ffmpeg 函数的 c 文件

```
 #include <jni.h>
 #include <android/log.h>

 #include "libavcodec/avcodec.h"
 #include "libavformat/avformat.h"

 #define LOG_TAG "mylib"
 #define LOGI(...)  __android_log_print(ANDROID_LOG_INFO, LOG_TAG, __VA_ARGS__)
 #define LOGE(...)  __android_log_print(ANDROID_LOG_ERROR, LOG_TAG, __VA_ARGS__)

 jint Java_es_prueba_ffmpeg_MainActivity_loadInfo(JNIEnv * env, jobject this, jstring filename) {
av_register_all();

AVFormatContext *pFormatCtx;
const jbyte *str;
str = (*env)->GetStringUTFChars(env, filename, NULL);

if(av_open_input_file(&pFormatCtx, str, NULL, 0, NULL)!=0)
{
    LOGE("Can't open file '%s'\n", str);
}
else
{
    LOGI("File was opened\n");
    LOGI("File '%s', Codec %s",
        pFormatCtx->filename,
        pFormatCtx->iformat->name
    );
}
} 
```

# ssl - 如何在 webworks 中禁用 ssl_verifypeer？

> ID：15789867
> 
> 赞同：0
> 
> 时间：2013-04-03T14:15:43.617
> 
> 标签：ssl, blackberry, ssl-certificate, blackberry-webworks

我正在为 BlackBerry 开发 webworks 应用程序，并且在连接到特定站点时遇到 SSL 证书异常。有没有办法在代码中禁用 ssl 检查，而不向用户显示异常对话框？

# gwt - 使用 RPC 记录的异常抛出 IncompatibleRemoteServiceException

> ID：15789878
> 
> 赞同：0
> 
> 时间：2013-04-03T14:16:12.590
> 
> 标签：gwt, gwt-rpc, gwt2

没错，基础知识，这是在 GWT2.5.0 / JDK1.6 上运行的，并且或多或少地按照文档的设置进行设置

gwt.xml

```
<inherits name="com.google.gwt.logging.Logging" />

<set-property name="gwt.logging.simpleRemoteHandler"
    value="ENABLED" />
<set-property name="gwt.logging.logLevel" value="INFO" />
<set-property name="gwt.logging.enabled" value="TRUE" />
<set-property name="gwt.logging.developmentModeHandler"
    value="ENABLED" />
<set-property name="gwt.logging.systemHandler" value="DISABLED" />
<set-property name="gwt.logging.popupHandler" value="DISABLED" />
<set-property name="gwt.logging.consoleHandler" value="ENABLED" />
<set-property name="gwt.logging.firebugHandler" value="ENABLED" /> 
```

我用下面的代码强制异常，只是一个简单的 NullPointException

```
 try {
        Level n = null;
        n.getName();
      } catch (NullPointerException ex) {             
        logger.log(Level.SEVERE, "Null Exception Hit", ex);
      } 
```

但是由于某种原因，当向服务器抛出异常时会抛出这个

```
[WARN] remoteLogging: An IncompatibleRemoteServiceException was thrown while processing this call.
com.google.gwt.user.client.rpc.IncompatibleRemoteServiceException: Type 'com.google.gwt.core.client.impl.SerializableThrowable' was not assignable to 'com.google.gwt.user.client.rpc.IsSerializable' and did not have a custom field serializer. For security purposes, this type will not be deserialized.
at com.google.gwt.user.server.rpc.RPC.decodeRequest(RPC.java:323)
at com.google.gwt.user.server.rpc.RemoteServiceServlet.processCall(RemoteServiceServlet.java:206) 
```

RPC servlet 配置正确，如果我只抛出消息而不是异常，它就会很好地记录回服务器。

根据远程服务器日志记录的文档，这应该“正常工作”，我不明白为什么会被抛出。在我看来，SerializableThrowable 根据定义应该是可序列化的。我知道您必须跳过一些障碍才能使您自己的类可序列化，但是我读过的所有内容都表明我应该能够毫无问题地将异常抛回服务器。有任何想法吗？看起来自 2.5.0 以来 serializableThrowable 已移至 com.google.gwt.core.shared.SerializableThrowable，但我不认为这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:33:05.867

因为 Exception 的超类是 `Throwable`而且它正在实现`java.io.Serializable`

*需要注意的重要一点是，在完整的 Java JRE 中实现 java.io.Serializable 的类都没有在 GWT 的模拟 JRE 中实现 java.io.Serializable。这意味着**在 JRE 中实现 java.io.Serializable 的类型（如 Throwable 或 StackTraceElement）将无法通过 GWT RPC 进行传输，因为客户端将无法对它们进行序列化/反序列化**。但是，对于其他类型（如 String、Number 等）来说，这不是问题……它们没有在模拟的 JRE 中实现 java.io.Serializable 但具有自定义字段序列化器，以便可以正确序列化它们。*

[GWT 序列化策略](https://developers.google.com/web-toolkit/doc/latest/FAQ_Server?hl=fr#Does_the_GWT_RPC_system_support_the_use_of_java.io.Serializable)

# javascript - JavaScript 闭包函数外部额外括号的用途

> ID：15789880
> 
> 赞同：9
> 
> 时间：2013-04-03T14:16:15.297
> 
> 标签：javascript, closures

下面 JavaScript 闭包函数的外部额外括号的目的是什么？我在其他帖子中被告知它们不是绝对必要的，但它们是一个约定，以明确传递函数的结果，而不是函数本身。以下来自[http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html](http://www.adequatelygood.com/JavaScript-Module-Pattern-In-Depth.html)的引用 ，然而，冲突。哪个是对的？

> 注意匿名函数周围的 ()。这是语言所要求的，因为以标记函数开头的语句总是被认为是函数声明。包含 () 会创建一个函数表达式。

```
(function () {
    // ... all vars and functions are in this scope only
    // still maintains access to all globals
}()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T14:24:26.213

我认为不同的引擎有不同的解释方式

`function(){...}();`

因此，对于所有引擎来说，最流行和接受的方式是将代码分组在括号中。

`(function(){...}());`

同时，您引用的内容提出了一个非常有趣的观点。函数表达式可能会：

`var f = function() {...}`

而函数声明看起来像：

`function f() {...}`

您看到解析器通过查看第一个标记来区分差异是多么容易/方便？

```
IF TOKEN1 EQ "function": FXN DECLARATION
ELSE: FXN EXPRESSION 
```

但是你的（立即调用的）函数是一个函数声明是没有意义的（它不会被重用，你不想让它被提升，或者在命名空间中等等）所以添加一些无害的括号是表明它是一个函数表达式的好方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-03T15:26:43.170

首先，我必须澄清：

```
(function () {

}()); 
```

相当于

```
(function () {

})(); 
```

也适用于（Backbone.js 使用它）

```
(function(){

}).call(this); 
```

其次，如果你打算这样使用它，那么它就不是匿名/闭包函数。它的**立即调用函数表达式**

如果您将其返回的上下文分配给一个变量，它将充当一个闭包（因为它不会被*立即调用）。*如果您需要一个静态类（当无需实例化即可访问属性和方法时），这有点有用。例如：

```
var stuff = (function(){

    // AGAIN: its not an IIFE in this case

    function foo() // <- public method
    {
        alert('Jeeez');
    }

    return {
       foo : foo,
    }
})();

stuff.foo(); //Alerts Jeeez 
```

> 下面 JavaScript 闭包函数的外部额外括号的目的是什么？

目的并不常见而且很奇怪 - 都是关于函数参数的。例如，

```
(function(window, document){ // <- you see this? 2 "arguments"

  alert(arguments.length); // 0!

})(); 
```

但是如果我们将它们传递给那个外括号

```
(function(/* So its not for arguments */ ){

  alert(arguments.length); // 2

})(window, document); // <- Instead we pass arguments here 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-04-03T14:29:16.343

额外的括号消除了函数表达式与常规函数声明的歧义。

尽管额外的括号是标准做法，但可以通过这样做来实现相同的目的：

```
void function() {
    // do stuff
}(); 
```

甚至：

```
+function() {
    // do stuff
}(); 
```

不过，在这两种选择中，我更喜欢这种`void`表示法，因为在大多数情况下，我们并不真正关心立即调用的返回值。

其他不需要括号的地方是需要表达式的时候：

```
setTimeout(function() {
    return function() {
        alert('hello');
    }
}(), 1000); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-03T14:28:52.210

它们是必要的，因为解析器在看到时会进入函数声明模式

```
function 
```

在*语句上下文中*。

在`function`token 之后，它需要函数的名称，因为函数声明必须包含函数的名称。但是它看到的`(`不是名称，所以这是一个语法错误。

我认为，它可以回溯并明确地将其视为函数表达式，但事实并非如此。

* * *

`var module = XXX`

在上面，`XXX`在*表达式上下文中*，如果 a`function`出现在那里，它被视为函数表达式的开始。函数表达式不必为函数命名，因此`(`出现在 . 之后并不是语法错误`function`。

所以你可以写：

```
var module = function(){}(); 
```

但不是

```
function(){}() 
```

您可以使用许多技巧来使上述表达式成为：

```
(XXX)
!XXX
~XXX
+XXX

//This doesn't work however:
{YYY} //the braces are delimiting a block, and inside block you start in
      //a statement context 
```

`XXX`在表达式上下文中，因为它被括号括起来或跟随一元运算符，因此任何替换`XXX`的函数都是函数表达式。

# c# - 找不到类型或命名空间名称“类型/命名空间”.. - Asp.Net - C#

> ID：15789885
> 
> 赞同：1
> 
> 时间：2013-04-03T14:16:26.853
> 
> 标签：c#, asp.net, iis

当我在本地启动网站时，它工作正常，但是当我将它上传到服务器时，我的 App_Code 文件夹出现“找不到类型或命名空间名称'type/namespace'..”

我的“.aspx.cs”类

```
using XXXXXX.App_Code; 
```

关于为什么的任何线索？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T14:40:48.823

您想将`App_Code`文件夹内的任何内容更改为`Compile`.

![在此处输入图像描述](https://i.stack.imgur.com/NAjq7.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:19:48.363

您可能正在上传到没有正确版本的 .NET 或正确框架的服务器。我在将我的 MVC3 网站更新到没有安装 MVC3 的服务器时遇到了这个问题。

确保 IIS 中的应用程序池引用了正确的版本，并且服务器安装了相关的框架。

此外，在 Visual Studio 中，在要部署的项目下，确保选中此项目文件夹中的所有文件，并且未选中从 App_Data 文件夹中排除文件。

* * *

如果您将网站构建为项目（即，不是网站）

右键单击解决方案-> 配置管理器并检查它是否存在发布并选中构建

* * *

如果您将网站构建为新网站（即，不是通过新项目）

右键单击解决方案并选择属性页。确保将文件添加到参考下。确保在 Build 下，选择 Build website before running

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-10T20:23:45.250

在您的网站下创建一个 \bin 文件夹并复制您在那里引用的 dll。

# javascript - Math.floor 之类的东西

> ID：15789887
> 
> 赞同：0
> 
> 时间：2013-04-03T14:16:32.367
> 
> 标签：javascript, function, math, floor

我发现很难搜索我的问题（不知道要使用什么关键字对不起模组！）。

我想要实现的是类似于 Math.floor 函数，但有点不同。

我不想以小数为底，而是以 6 为底，例如：

```
var = 1 => return 0
var = 1.1 => return 0
var = 2 => return 0
var = 3 => return 0
var = 4 => return 6
var = 5 => return 6
var = 6 => return 6
var = 7 => return 6
....
var = 13 => return 12
var = 26 => return 24 
```

等等

提前感谢各位大侠的解答！

**更新**：Grijesh Chauhan 的答案有效！谢谢m8！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:19:26.230

你还没有提到语言，你需要这个吗，试试这个C代码：

```
int fun(int n){
   return (n/6)*6;
} 
```

**编辑：**对于 JavaScript：

```
Math.floor(n/6)*6; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:19:37.837

模运算符怎么样？

我 = 13;

答案 = i - (i % 6)

编辑：你想达到什么目的？地板还是天花板？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:23:00.147

我认为它是这样的：

```
Math.floor((x+2)/6)*6; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:29:21.580

```
function round2six(number) {
    return Math.round(number/6)*6;
} 
```

这是一个测试代码：

```
for(i=0; i<20; i++) {
    document.write(i + ' => ');
    document.write(round2six(i));
    document.write('<br/>');
} 
```

执行结果：

```
0 => 0
1 => 0
2 => 0
3 => 6
4 => 6
5 => 6
6 => 6
7 => 6
8 => 6
9 => 12
10 => 12
11 => 12
12 => 12
13 => 12
14 => 12
15 => 18
16 => 18
17 => 18
18 => 18
19 => 18 
```

# python - Python/Django 表单：表单字段的动态变量创建和访问

> ID：15789896
> 
> 赞同：0
> 
> 时间：2013-04-03T14:17:00.167
> 
> 标签：python, variables, dynamic, django-forms, django-widget

我有一个只有一个小部件的 django 表单类。我想给这个小部件起一个名字，`<select name="custom_name"></select>`但 Django 采用变量的名称并将其作为小部件的名称。例如：

```
class MultiSelectForm(forms.Form):
    here_is_the_name_of_the_widget = forms.MultipleChoiceField() 
```

所以上面的代码将创建一个带有名称的小部件：

`<select name="here_is_the_name_of_the_widget">...</select>`

因为我需要对表单进行原型设计，所以我需要在初始化时创建这个名称。直到现在，这个表格工作正常，但有一个标准的预先给定的名称：

```
class MultiSelectForm(forms.Form):
    multiple_select = forms.MultipleChoiceField()

    def __init__(self, attrs=None, choices=(), *args, **kwargs):            
        self.base_fields['multiple_select'].choices = choices
        self.base_fields['multiple_select'].empty_permitted = False
        self.base_fields['multiple_select'].required = kwargs.get('required', False)
        self.base_fields['multiple_select'].widget = MultiSelect(attrs=attrs, choices=choices)

        forms.Form.__init__(self, *args, **kwargs) 
```

所以，我想了一种方法（黑客）来实现我想要的，但没有像我预期的那样工作。如果我想给小部件的名称是“国家”，则会产生以下错误：

```
KeyError at <project_name>
'countries' 
```

产生该错误的代码是：

```
class MultiSelectForm(forms.Form):
    multiple_select = forms.MultipleChoiceField()

    def __init__(self, attrs=None, choices=(), *args, **kwargs):
        default_name = 'multiple_select'

        name = attrs.get('name', default_name)
        if name != default_name:
            setattr(self, name, forms.MultipleChoiceField())
            del attrs['name']

        '''
        The error is produced in the following line...
        '''
        self.base_fields[str(name)].choices = choices
        self.base_fields[str(name)].empty_permitted = False
        self.base_fields[str(name)].required = kwargs.get('required', False)
        self.base_fields[str(name)].widget = MultiSelect(attrs=attrs, choices=choices)

        forms.Form.__init__(self, *args, **kwargs) 
```

有没有办法实现这一目标，或者更好的方法？

谢谢！

## 这是解决方案...

感谢@Daniel Roseman

```
class MultiSelectForm(forms.Form):
    def __init__(self, attrs=None, choices=(), *args, **kwargs):
        #empty_permitted is a Form's attribute
        kwargs['empty_permitted'] = False
        forms.Form.__init__(self, *args, **kwargs)

        name = attrs.get('name', 'multiple_select')
        self.fields[name] = forms.MultipleChoiceField(
            choices=choices,
            required=kwargs.get('required', False),
            widget=MultiSelect(attrs=attrs, choices=choices)
            ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T14:35:47.303

我不确定你为什么需要这样做，但你肯定让事情变得过于复杂。您可以在实例化时将字段动态添加到表单中：

```
class MultiSelectForm(forms.Form):
    def __init__(self, *args, **kwargs):
        dynamic_field = kwargs.pop('dynamic_field')
        super(MultiSelectForm, self).__init__(*args, **kwargs)
        self.fields[dynamic_field['name']] = forms.MultipleChoiceField(
            choices=dynamic_field['choices'], 
            empty_permitted=False
            required=dynamic_field['required'],
            widget=MultiSelect(attrs=dynamic_field['attrs'])) 
```

然后在实例化时传递一个字典：

```
my_form = MultiSelectForm(
    dynamic_field={'name': 'countries', 'choices': (mychoices), 'required': True}) 
```

# selection - jquery-自动完成默认选择

> ID：15789901
> 
> 赞同：1
> 
> 时间：2013-04-03T14:17:22.443
> 
> 标签：selection, default, jquery-autocomplete

我正在尝试将包含超过 20 000 个项目（客户信息）的选择转移到自动完成输入字段，以使表单在加载时更快。

目前我正在使用 Dyve 自动完成插件（[https://github.com/dyve/jquery-autocomplete.git](https://github.com/dyve/jquery-autocomplete.git)）

我面临的问题是我无法像使用 select 那样在字段中设置默认值。

我的原始代码是：

```
...
<td>
    <a href="#" onClick="document.form1.blank_sel_numeroclient.value = '<?php echo("$row_rs_detail[numeroclient]");?>';">
        <img src="images/blocnote.png" width="20" height="15" alt="Modifier" />
    </a>
</td>
...
<td align="left" colspan="2">
    <select name="blank_sel_numeroclient" id="blank_sel_numeroclient" style="width:475px; text-align:left" >
        <option value="" selected="selected"></option>
        <?php
            do
            {
                echo("<option value=\"".$row_rs_clients['numeroclient']."\">".$row_rs_clients['numeroclient']."&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;".$row_rs_clients['nom']."</option>\n");
            } while ($row_rs_clients = mysql_fetch_assoc($rs_clients));
            $rows = mysql_num_rows($rs_clients);
            if($rows > 0)
            {
                mysql_data_seek($rs_clients, 0);
                $row_rs_clients = mysql_fetch_assoc($rs_clients);
            }
        ?>
    </select>
</td>
... 
```

现在我尝试使用的代码：Main HTML

```
...
<link rel="stylesheet" type="text/css" href="css/jquery.autocomplete.css">
<script src="JavascriptFiles/jquery.autocomplete.min.js" type="text/javascript"></script>
...
<td>
    <!-- This is not working -->        
    <a href="#" onClick="document.form1.blank_sel_numeroclient.value            = '<?php echo($row_rs_clients['numeroclient']);?>';">
        <img src="images/blocnote.png" width="20" height="15" alt="Modifier" />
    </a>
</td>
...
<td align="left" colspan="2">
    <script>
        $(document).ready(function() {
            $('#blank_sel_numeroclient').autocomplete('cedule/liste-client-autocomplete.php',
                {
                    minChars: 1,
                    useCache: false,
                    selectFirst: true,
                    selectOnly: true,
                    sortResults: true
                });
        });
    </script>
    <input type="text" id="blank_sel_numeroclient" name="blank_sel_numeroclient" style="width:475px; text-align:left" />
    <input type="hidden" value="" id="blank_sel_numeroclienthidden" name="blank_sel_numeroclienthidden" />
</td>
... 
```

liste-client-autocomplete.php 的内容：

```
<?php
    // si on reçoit une donnée
    if(isset($_GET['q'])) {
        $q = htmlentities($_GET['q']); // protection

        // connexion à la base de données
        try {
            $bdd = new PDO('mysql:host=somehost;dbname=somedatabase', 'someusername', 'somepassword');
            $bdd->exec("SET CHARACTER SET utf8");
        } catch(Exception $e) {
            exit('Impossible de se connecter à la base de données.');
        }
        // écriture de la requête
        $requete = "SELECT CONCAT_WS('\t',numeroclient,nom) as nom FROM clients WHERE numeroclient LIKE '". $q ."%' ORDER BY LENGTH(numeroclient), numeroclient";
        // exécution de la requête
        $resultat = $bdd->query($requete) or die(print_r($bdd->errorInfo()));
        // affichage des résultats
        while($donnees = $resultat->fetch(PDO::FETCH_ASSOC)) {
            echo $donnees['nom'] ."\n";
        }
    }
?> 
```

因此，我希望获得与原始代码“完全相同”的效果，但具有轻量级的自动完成功能，因为数据库中有超过 20 000 个项目，页面需要永远加载。（2.2MB 仅用于选择值...）

因此，如果有人可以告诉我一种方法或更好的方法，因为我现在陷入困境。

最好的问候，RiOt

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T01:22:06.843

好的，终于解决了一些问题！

通过更换

```
...
<td>
    <!-- This is not working -->        
    <a href="#" onClick="document.form1.blank_sel_numeroclient.value            = '<?php echo($row_rs_clients['numeroclient']);?>';">
        <img src="images/blocnote.png" width="20" height="15" alt="Modifier" />
    </a>
</td>
... 
```

和

```
...
<td>
    <!-- Seems to work -->        
    <a href="#" onClick="document.form1.blank_sel_numeroclient.value = '<?php echo($row_rs_detail['numeroclient']."\t".$row_rs_detail['cl_nom']);?>';">
        <img src="images/blocnote.png" width="20" height="15" alt="Modifier" />
    </a>
</td>
... 
```

似乎解决了默认选择问题。您似乎需要在自动完成列表中提供完整的项目，包括格式以便能够通过脚本调用“选择它”。

因此，我对列表的 SQL 请求结果是：`CONCAT_WS('\t',numeroclient,nom)`

例如，这将导致：“19078 [TAB CHAR] Mrs Smith”

我必须提供相同的输入字段值节点：

```
echo($row_rs_detail['numeroclient']."\t".$row_rs_detail['cl_nom']); 
```

这将转化为相同的：“19078 [TAB CHAR] Mrs Smith”

然后正确填充输入字段！

不知道这是否有意义，但它对我有用！

最好的问候，并希望它可以帮助别人！

暴动

# xpages - 你能在 xpages iNotes 日历控件中显示一个图标吗

> ID：15789905
> 
> 赞同：0
> 
> 时间：2013-04-03T14:17:28.680
> 
> 标签：xpages, xpages-extlib

我一直在尝试在 iNotes 日历控件中显示一个图标。我将 colEntryIcon 设置为视图中列的程序名称。仍然没有运气。我还注意到，在剖析 Teamroom 模板时，即使设置了 colEntryIcon，该应用程序中的日历页面也没有显示图标，并且它确实在 teamroom 的经典笔记视图中显示了一个图标。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T08:41:25.890

我刚刚尝试使用团队空间模板：

如果我选择“更大”的网格之一，例如 2 周或一个月，则图标仅显示 onMouseOver：
![iNotes 日历、月视图](https://i.stack.imgur.com/7wGNZ.png)

如果我选择具有较小网格（周、日或以下，或汇总视图）的不同 calendarType，图标将同时显示 onMouseOver 和网格：
![iNotes 日历，周视图](https://i.stack.imgur.com/wYh5E.png)

请仔细检查 REST 服务的 colEntryIcon 属性是否为您的图标列保存了正确的编程名称（对于标准邮件日历，它是“$149”）！

# java - 如何在包装为 .exe 的 Java 应用程序上运行分析？

> ID：15789908
> 
> 赞同：0
> 
> 时间：2013-04-03T14:17:34.000
> 
> 标签：java, profiling, visualvm, jstatd

我想使用`jstatd`和`visualvm`针对已包装为`.exe`. 有人对如何实现这一点有建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T18:26:45.797

你不需要任何特别的东西。只需在与您的 Java 应用程序相同的用户下本地运行 VisualVM。将其包装为 .exe 文件并不重要。您的应用程序使用什么版本的 JDK？

# sass - 指南针是否可以遍历文件夹并在其中生成文件的css类？

> ID：15789911
> 
> 赞同：1
> 
> 时间：2013-04-03T14:17:39.377
> 
> 标签：sass, compass-sass

假设我有一个文件夹`images/icons`，其中包含：

```
apple.png
banana.png
kiwi.png 
```

compass/sass 是否可以遍历文件夹并创建 css 定义，例如

```
.fruit-apple {
    background-image: url(images/icons/apple.png);
} 
```

我知道[指南针的精灵功能](http://compass-style.org/help/tutorials/spriting/)可以像这样使用

```
@import "icons/*.png";
@include all-icons-sprites; 
```

但是这可以在没有指南针以某种方式创建精灵图像的情况下使用吗？我只想遍历一个文件夹并根据可用文件创建一些样式定义。

# c++ - 在结构或集合中使用 char *

> ID：15789918
> 
> 赞同：0
> 
> 时间：2013-04-03T14:18:02.163
> 
> 标签：c++

我有点困惑如何`char *`在内存中处理集合或结构的 a ，即管理内存的责任是什么。我听说一般来说，当你有`string`可用的类时，依赖资源管理和指针是不明智的。

`std::tr1::unordered_map<char*, Vars> elements;`

或者

```
struct example{
 char*name;
} 
```

如果您在技术上传递一个指向字符数组的指针，那么这意味着“拥有”集合或结构不管理该文本的内存，而只是一个指向它的指针。那么该文本是否有可能从内存中消失并且指针悬空？

例如：

```
char * text="yo";
example myStruct;
myStruct.name=text; // how safe is this? 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:19:58.050

裸指针**不**编码有关解除分配的所有权/责任的任何信息。这完全取决于指针 /`struct`的来源。这正是`std::string`存在智能指针和类的原因。

至于例子，

```
char * text="yo"; 
```

这已被弃用，它与内存分配无关。使用 a`char const*`指向文字。这个字符串不可能在一个表现良好的程序中消失；最有可能的是，它存在于只读存储器中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T14:27:32.267

> 管理内存的责任是什么

这很简单——原始指针从不管理内存。它只是告诉您对象在内存中的位置。

> 那么该文本是否有可能从内存中消失并且指针悬空？

当然，这就是为什么你应该尽可能避免使用原始指针，并且在使用时要小心。

如果您需要对对象的“拥有”引用，则使用智能指针或容器来管理对象的生命周期。如果您需要“非拥有”引用，则要么使用类似的东西`std::weak_ptr`，要么仔细安排事物，以便在该引用仍在使用时不会破坏对象。

您的最后一个示例很好，因为指针指向`"yo"`字符串文字。这一直持续到程序结束，因此指针永远不会悬空。（尽管值得指出的是字符串文字是常量，所以你不应该使用非`const`指针来引用它，即使出于奇怪的历史原因该语言确实允许你这样做）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T14:22:07.583

在您的特定情况下，您不是分配内存，而是指向程序只读部分中包含`string`“yo”的位置。您不需要释放此内存。
而如果你有

```
char * text= new char[10];
memset(text,0,10);
strncpy(text,3, "yo");
example myStruct;
myStruct.name=text; // how safe is this? 
```

您将负责释放`text`. 没有“所有权”，如果您想使用 释放内存，`struct`那么这很好。只要确保之后触摸指针，因为它可能会触发未定义的行为。

# javascript - 在网页上打印从融合表中查询到的数据

> ID：15789919
> 
> 赞同：0
> 
> 时间：2013-04-03T14:18:16.390
> 
> 标签：javascript, google-maps, google-maps-api-3, google-fusion-tables

我对 fusion table 和 google-maps API 很陌生。我正在研究 Microsoft 提供的出租车数据集。
数据格式的类型

```
taxi_id, timestamp, longitude, latitude 
```

这些数据是由北京大约 10000 辆出租车在 6 天内收集的。有代表每辆出租车数据的单独文件。作为试运行，我刚刚将出租车文件导入到谷歌融合表中。我的想法是，以北京的纬度经度为中心，并提供一个适当的半径，我画一个圆圈并将该圆圈中的所有点都吞没。

由于我需要绘制只有纬度和经度但没有地址的圆和吞没点（ST_INTERSECT 将地址作为我相信的参数之一），我在谷歌群组中浏览了一下，我可以确定我需要开发 KML对于文件，而不是直接上传文本文件。所以我开发了一个 KML，在其中，我在“Point”标签中包含了经度和纬度。

所以我的融合表包括，

```
timestamp  id  col2 #col2 is a point type consisting of long, lat pair 
```

我可以玩弄一下，然后编写一个 javascript 来绘制一个圆圈并在其中吞没点。脚本如下。

```
<!DOCTYPE html>
<html>
<head>
<title>csv2kml - Google Fusion Tables</title>
 <style type="text/css">
 html, body, #googft-mapCanvas {
  height: 500px;
  margin: 0;
padding: 0;
 width: 600px;
 }
 #googft-legend{background-color:#fff;border:1px solid #000;font-family:Arial, sans-      serif;font-size:12px;margin:5px;padding:10px 10px 8px;}#googft-legend p{font-weight:bold;margin-top:0;}#googft-legend div{margin-bottom:5px;}.googft-legend-swatch{border:1px solid;float:left;height:12px;margin-right:8px;width:20px;}.googft-legend-range{margin-left:0;}.googft-dot-icon{margin-right:8px;}.googft-paddle-icon{height:24px;left:-8px;margin-right:-8px;position:relative;vertical-align:middle;width:24px;}.googft-legend-source{margin-bottom:0;margin-top:8px;}.googft-legend-source a{color:#666;font-size:11px;}
</style>

<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">    </script>

 <script type="text/javascript">
function initialize() {
map = new google.maps.Map(document.getElementById('googft-mapCanvas'), {
center: new google.maps.LatLng(39.9100, 116.4000),
zoom: 14,
mapTypeId: google.maps.MapTypeId.ROADMAP
});

layer = new google.maps.FusionTablesLayer({
map: map,
heatmap: { enabled: false },
query: {
select: "col2",
from: "1D_ZXsYLX20yvYZHBB20_VmSi5haJA5Q65kNML1M",
where: "ST_INTERSECTS(col2, CIRCLE(LATLNG(39.9100, 116.4000), 500))"
},
options: {
styleId: 2,
templateId: 2
}
});
//var lay=layer;
layer.setMap(map);

  //  Create a map circle object to visually show the radius.
    var circle = new google.maps.Circle({
      center: new google.maps.LatLng(39.9100, 116.4000),
      radius: 500,
      map: map,
      fillOpacity: 0.2,
      strokeOpacity: 0.5,
      strokeWeight: 1
    });
    // Update the radius when the user makes a selection.
    google.maps.event.addDomListener(document.getElementById('radius'),
        'change', function() {
          var meters = parseInt(this.value, 10);
          layer.setOptions({
            query: {
              select: 'col2',
              from: "1D_ZXsYLX20yvYZHBB20_VmSi5haJA5Q65kNML1M",
              where: 'ST_INTERSECTS(col2, ' +
                  'CIRCLE(LATLNG(39.9100, 116.4000), ' + meters + '))'
            }
          });
          circle.setRadius(meters);
        });

}

google.maps.event.addDomListener(window, 'load', initialize);
</script>
</head>

<body>
<div id="googft-mapCanvas"></div>
<select id="radius">
      <option value="500">500 meters</option>
      <option value="1000">1000 meters</option>
      <option value="1500">1500 meters</option>
      <option value="2000">2000 meters</option>
      <option value="2500">2500 meters</option>
   </select>
</body>
</html> 
```

现在，我想在网页上的那个圆圈中打印点的 ID。请注意，圆的半径会不断变化，因为我已经给出了一个下拉菜单，这意味着我要显示的文本也会发生变化。我该怎么做呢？现在，我已经在融合表中导入了一个出租车文件，因此 id 在整个融合表中保持不变。但我将对几个出租车文件进行一些处理，这可能会导致表格合并，因此 id 会有所不同。现在我如何检索该圆圈中的出租车的 ID 并将其显示在网页上？

欢迎任何建议/帮助

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T15:35:19.437

您有 2 个选项：

1.  使用 GViz（查询限制：500 行）[示例](http://www.geocodezip.com/v3_FusionTables_queryforIdA.html)（使用表的副本，有点无聊，所有点都有相同的 id）
2.  使用 Fusion Tables API v1.0[示例](http://www.geocodezip.com/v3_FusionTables_queryforIdB.html)（使用与上面相同的表副本，所有点都具有相同的 id）

[代码示例](https://developers.google.com/fusiontables/docs/sample_code)

# c# - 如何根据数据库的列值检查gridview中的单选按钮

> ID：15789925
> 
> 赞同：1
> 
> 时间：2013-04-03T14:18:37.910
> 
> 标签：c#, asp.net, data-binding, gridview, radio-button

我在我的 aspx 页面中使用了 gridview。我在一个水平对齐的单个单元格中有五个单选按钮。

```
<asp:GridView ID="CrowdRatingGrid" runat="server" AutoGenerateColumns="false" AllowPaging="true" PageSize="4" OnPageIndexChanging="CrowdRatingGrid_PageIndexChanging" ViewStateMode="Enabled">

<PagerSettings Mode="Numeric" PageButtonCount="4" />
<Columns>

  <asp:BoundField DataField="idea_id" HeaderText="Idea ID"></asp:BoundField>

  <asp:TemplateField>
   <HeaderTemplate>
    Rating<br />1 2 3 4 5
    </HeaderTemplate>
    <ItemTemplate>

                    <asp:RadioButton runat="server" GroupName="rating" ID="1" />

                    <asp:RadioButton runat="server" GroupName="rating" ID="2" />

                    <asp:RadioButton runat="server" GroupName="rating" ID="3" />

                    <asp:RadioButton runat="server" GroupName="rating" ID="4" />

                    <asp:RadioButton runat="server" GroupName="rating" ID="5" />
     </ItemTemplate>
     </asp:TemplateField>
    </Columns>
    </asp:GridView> 
```

这是我的数据库表结构：

```
idea_id   rating_id
23882     3
23883     5
63720     1 
```

这是我用于绑定 gridview 数据的代码隐藏代码：

```
protected void Page_Load(object sender, EventArgs e)
    {

        if (!IsPostBack)
        {
            BindCrowdRatingGrid();
        }
    }
    private void BindCrowdRatingGrid()
    {

        Campaigns campaign = new Campaigns();
         ObjectResult<GetCrowdRating_Result> resultList = campaign.GetCrowdRatingIdeas();

        CrowdRatingGrid.DataSource = resultList;
        CrowdRatingGrid.DataBind();

    } 
```

我在标题“Idea ID”下的网格中正确显示“idea_id”值我还需要根据 rating_id 的值检查单选按钮。如果 rating_id 为 3，我需要检查 3 下的单选按钮是否为 1要检查的 1 下的单选按钮..

如何做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:36:08.523

尝试将 RadioButtonList 放入 ItemTemplate 中：

```
<asp:RadioButtonList runat="server' ID="Rating" 
    SelectedValue='<%# Bind("rating_id") %>' RepeatDirection="Horizontal" >
    <asp:ListItem Value="1" />
    <asp:ListItem Value="2" />
    <asp:ListItem Value="3" />
    <asp:ListItem Value="4" />
    <asp:ListItem Value="5" />
</asp:RadioButtonList> 
```

要从每个单选按钮中删除文本，`Text`请为每个 ListItem 设置空属性。`ListItem`要使用 0 值隐藏，您可以`RepeatLayout="Flow"`在 RadioButtonList 上设置并设置一些 CssClass 属性值，如下所示`CssClass="rating"`：然后将此样式规则添加到页面上：

```
.rating > input:first-child
{
    display: none;
} 
```

此外，作为另一个可用选项，您可以使用`SelectedIndex` RadioButtonList 的属性而不是 SelectedValue 并`rating_id`在绑定到 1 之前在 resultList 中递减每个。这样您就不需要具有 0 值的代理 ListItem。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T14:31:12.660

尝试使用 RadioButtonList。

```
<asp:RadioButtonList id="myList" runat="Server">
   <asp:ListItem id="1" value="1">1</asp:ListItem>
   <asp:ListItem id="2" value="2">2</asp:ListItem>
   <asp:ListItem id="3" value="3">3</asp:ListItem>
   <asp:ListItem id="4" value="4">4</asp:ListItem>
   <asp:ListItem id="5" value="5">5</asp:ListItem>
</asp:RadioButtonList> 
```

然后在你的代码后面使用类似这样的东西：

```
myList.Items.FindByValue(yourDBValue).Selected = true; 
```

编辑：

或者，将 selectedValue 绑定在控件本身；正如尤里建议的那样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:26:16.143

GridView 控件有`RowCreated`事件。在那里，您可以根据数据库中的值检查单选按钮。您可能必须使用`FindControl()`才能获得正确的单选按钮。

这个页面有一个很好的例子来说明如何创建`OnRowCreated`事件处理程序：

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcreated.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.rowcreated.aspx)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:32:43.373

也许您可以尝试通过字符串名称执行 .FindControl，也就是说，如果您要在 gridView 中查找单选按钮。只需将网格视图绑定到您的数据源，然后在 rowDataBound 上搜索每一行的单选按钮。假设您有 5 个带有名称的单选按钮：rb1、rb2、rb3 等等。所以当您获得评级 id 时，只需将其添加到字符串名称中，如下所示

```
protected void gridView_RowDataBound(Object sender, GridViewRowEventArgs e)
{
   GridViewRow row = (GridViewRow)e.item;
   ..YourObject.. data = (..YourObject..)e.item.DataItem;
   //and now you search for your radio button
   RadioButton button = (RadioButton)row.FindControl("rb" + data.rating_id); 
   //or just use the id as a name like you have allready named them
   button.cheched = true;
} 
```

# xcode - 像智能感知一样的xcode完成

> ID：15789926
> 
> 赞同：0
> 
> 时间：2013-04-03T14:18:38.727
> 
> 标签：xcode, sense

我有一个关于 xcode 的问题。当我使用 XCode 编写代码时，系统需要自动完成。例如，当我写：`[NSBundle main ]`它显示我`[NSBundle mainBundle]`。没关系，但是当我写**`[NSBundle bundle]`**它时，它没有显示 mainBundle 消息选项。它只考虑函数的开始。我想在 Visual Studio 等推荐中看到 mainBundle。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:26:15.033

不，Xcode 不使用模糊自动完成。虽然有[一个商业 IDE](http://www.jetbrains.com/objc/index.html)可以做到这一点（在其他几件好事中），但当然不是免费的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:28:18.513

试试 AppCode。此 IDE 支持此类自动完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-21T06:07:49.713

我编写了一个 Xcode 插件，为内置的自动完成功能添加了模糊匹配。它甚至使用了 Xcode 自己在 Open Quickly 中使用的模糊匹配器。

[https://github.com/chendo/FuzzyAutocompletePlugin](https://github.com/chendo/FuzzyAutocompletePlugin)

# c++ - CppCMS 表单失败（代码文件错误？）

> ID：15789929
> 
> 赞同：0
> 
> 时间：2013-04-03T14:18:45.107
> 
> 标签：c++, cppcms

我在这里学习教程[http://cppcms.com/wikipp/en/page/cppcms_1x_forms](http://cppcms.com/wikipp/en/page/cppcms_1x_forms)

`content.h`：

```
#include <cppcms/view.h>
#include <cppcms/form.h>

namespace content  {
    struct info_form : public cppcms::form {
    cppcms::widgets::text name;
    cppcms::widgets::radio sex;
    cppcms::widgets::select marital;
    cppcms::widgets::numeric<double> age;
    cppcms::widgets::submit submit;
    };

    info_form()
    {
        name.message("Your Name");
        sex.message("Sex");
        marital.message("Marital Status");
        age.message("Your Age");
        submit.value("Send");

        add(name);
        add(sex);
        add(marital);
        add(age);
        add(submit);

        sex.add("Male","male");
        sex.add("Female","female");
        marital.add("Single","single");
        marital.add("Married","married");
        marital.add("Divorced","divorced");

        name.non_empty();
        age.range(0,120);
    };

    struct message : public cppcms::base_content {
        std::string name,state,sex;
        double age;
        info_form info;
    };

} 
```

下面是`my_skin.tmpl`：

```
<% c++ #include "content.h" %>
<% skin myskin %>

<% if not empty name %>
        <h1>Hello <%= name %></h1>
        <p>You are <%= sex %>, <%= state %></p>
        <p>Your age is <%= age %></p>
<% else %>
    <h1>Input your details</h1>
<% end %>

<form method="post" action="" ><% csrf %>
<% form as_p info %>
</form>

<% end skin %> 
```

是`myapp.cpp`：

```
#include <cppcms/application.h>
#include <cppcms/service.h>
#include <cppcms/http_response.h>
#include <cppcms/url_dispatcher.h>
#include <cppcms/url_mapper.h>
#include <cppcms/applications_pool.h>
#include <iostream>
#include <stdlib.h>
#include "content.h"

class myapp : public cppcms::application {
public:
    myapp(cppcms::service &srv) : cppcms::application(srv)
    {
    }
};

void myapp::main(std::string /*url*/)
{
    content::message c;
    if(request().request_method()=="POST") {
    c.info.load(context());
    if(c.info.validate()) {
        c.name=c.info.name.value();
        c.sex=c.info.sex.selected_id();
        c.state=c.info.marital.selected_id();
        c.age=c.info.age.value();
        c.info.clear();
    }
    render("message",c);
}

virtual bool validate()
{
    if(!form::validate()) 
        return false;
    if(marital.selected_id()!="single" 
       && age.value()<18)
    {
        marital.valid(false);
        return false;
    }
    return true;
}

int main(int argc,char ** argv)
{
    try {
        cppcms::service app(argc,argv);
        app.applications_pool().mount(cppcms::applications_factory<myapp>());
        app.run();
    }
    catch(std::exception const &e) {
        std::cerr<<e.what()<<std::endl;
    }
} 
```

运行时`cppcms_tmpl_cc my_skin.tmpl -o my_skin.cpp`，一切看起来都很好。

但是当运行时`g++ myapp.cpp my_skin.cpp -o myapp -lcppcms -lbooster`，我得到以下错误：

```
In file included from myapp.cpp:9:0:
content.h:13:15: error: expected unqualified-id before ‘)’ token
myapp.cpp:18:37: error: no ‘void myapp::main(std::string)’ member function declared in class ‘myapp’
In file included from my_skin.tmpl:1:0:
content.h:13:15: error: expected unqualified-id before ‘)’ token
my_skin.tmpl:4:2: error: expected unqualified-id before ‘if’
my_skin.tmpl:8:3: error: expected unqualified-id before ‘else’
my_skin.tmpl:12:8: error: expected constructor, destructor, or type conversion before ‘&lt;<’ token
my_skin.tmpl:13:2: error: expected unqualified-id before ‘{’ token 
```

我不确定构造函数`info_form()`应该放在哪个文件中。看起来很奇怪`content.h`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:21:57.390

in对应的右括号`struct info_form : public cppcms::form {`在`content.h`哪里？也许有错误？

# jenkins - Jenkins：强制作业在与所需工作区相同的节点上运行

> ID：15789930
> 
> 赞同：2
> 
> 时间：2013-04-03T14:18:46.910
> 
> 标签：jenkins, label, nodes

因此，在我的组织中，我们在构建作业剩余的工作空间之上运行单元测试作业。当单元测试作业在晚上按计划运行时，这可以正常工作，作为构建作业的下游项目。当有人尝试手动运行单元测试作业时会出现问题，因为我们将许多节点放在标签下，并且构建作业会根据 Jenkins 算法选择一个节点，因此不能保证单元测试作业会选择正确的从属.

基本上我的问题是，有没有办法强制我们的单元测试工作不断尝试不同的从属设备，直到找到所需的工作空间，或者用其他方法来解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T14:28:45.890

有许多插件允许您重新安排失败的构建（[here](https://wiki.jenkins-ci.org/display/JENKINS/Retry+Failed+Builds+Plugin)、[here](https://wiki.jenkins-ci.org/display/JENKINS/Naginator+Plugin)和[here](https://wiki.jenkins-ci.org/display/JENKINS/Periodic+Reincarnation+Plugin)），但它们都不支持将重新安排的构建分配给不同的从站并遍历所有从站的列表。

在您的情况下，更好的解决方案可能是使用[Copy to slave 插件](https://wiki.jenkins-ci.org/display/JENKINS/Copy+To+Slave+Plugin)，这将允许您在成功时将相关文件从从属的工作区复制回主控，并在运行构建之前将它们复制到从属。这样您就可以完全避免构建失败。

# xml - 通过 XSLT 从 XML 中选择特定元素

> ID：15789932
> 
> 赞同：2
> 
> 时间：2013-04-03T14:18:48.630
> 
> 标签：xml, xslt, xslt-1.0

我在变量 **prdxml中有这样的 XML**

```
 <root>
  <product>
    <estocklevel>0</estocklevel>
    <id>8142229</id>
    <isp_brand extra="isp_brand"></isp_brand>
    <isp_produktserie extra="isp_produktserie"></isp_produktserie>
    <isp_model extra="isp_model"></isp_model>
  </product>
  <product>
    <estocklevel>0</estocklevel>
    <id>8143793</id>
    <isp_brand extra="isp_brand">Leitz</isp_brand>
    <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
    <isp_model extra="isp_model">Bred</isp_model>
  </product> 
  <product>
    <estocklevel>0</estocklevel>
    <id>8143794</id>
    <isp_brand extra="isp_brand">Leitz</isp_brand>
    <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
    <isp_model extra="isp_model">Smal</isp_model>
  </product>
  <product>
    <id>8143796</id>
    <isp_brand extra="isp_brand">Leitz</isp_brand>
    <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
    <isp_model extra="isp_model">Smal</isp_model>
  </product>
</root> 
```

我想从中选择一个 id = 8143794 的产品节点，而不使用 for 循环。任何人都可以提供任何线索

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:20:05.817

```
/root/product[id='8143794'] 
```

这就是说“找到 /root/product ，其中“产品”的“id”元素子元素是 8143794”

关于如何在未来的查询中使用该变量有一个答案：[XSL: How best to store a node in a variable and then us in future xpath expressions?](https://stackoverflow.com/questions/1954252/xsl-how-best-to-store-a-node-in-a-variable-and-then-us-it-in-future-xpath-expre)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T14:28:43.367

好吧，对于 XSLT 1.0，我们真的需要知道命名变量的类型`prdxml`是`node-set`还是`result tree fragment`.

如果它是一个节点集，您可以简单地选择`$prdxml/root/product[id = 8143794]`. 但是如果你有一个结果树片段，你首先需要应用一个扩展函数，`exsl:node-set`例如`exsl:node-set($prdxml)/root/product[id = 8143794]`。

因此，如果您有，请检查变量的设置位置/方式

```
<xsl:variable name="prdxml" select="document('products.xml')"/> 
```

你有一个节点集，但是有例如

```
<xsl:variable name="prdxml">
<root>
  <product>
    <estocklevel>0</estocklevel>
    <id>8142229</id>
    <isp_brand extra="isp_brand"></isp_brand>
    <isp_produktserie extra="isp_produktserie"></isp_produktserie>
    <isp_model extra="isp_model"></isp_model>
  </product>
  <product>
    <estocklevel>0</estocklevel>
    <id>8143793</id>
    <isp_brand extra="isp_brand">Leitz</isp_brand>
    <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
    <isp_model extra="isp_model">Bred</isp_model>
  </product> 
  <product>
    <estocklevel>0</estocklevel>
    <id>8143794</id>
    <isp_brand extra="isp_brand">Leitz</isp_brand>
    <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
    <isp_model extra="isp_model">Smal</isp_model>
  </product>
  <product>
    <id>8143796</id>
    <isp_brand extra="isp_brand">Leitz</isp_brand>
    <isp_produktserie extra="isp_produktserie">180</isp_produktserie>
    <isp_model extra="isp_model">Smal</isp_model>
  </product>
</root>
</xsl:variable> 
```

您有一个结果树片段，需要第二种方法（并支持`exsl:node-set`或类似方法）：

```
<xsl:variable name="prod" select="exsl:node-set($prdxml)/root/product[id = 8143794]" xmlns:exsl="http://exslt.org/common"/> 
```

# amazon-web-services - 亚马逊产品 API - 结账

> ID：15789936
> 
> 赞同：1
> 
> 时间：2013-04-03T14:19:04.710
> 
> 标签：amazon-web-services, checkout, payment-processing, amazon-product-api

是否可以直接在我的网站上使用亚马逊结帐（或其他结帐，如贝宝）结帐，而无需重定向到亚马逊网站？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:26:31.440

在 Amazon Checkout 中，您必须在 Amazon.com 上完成购物，但如果您想使用 Paypal，他们有 API 可用于在您的网站 [http://blog.effectlabs.com/post/2011/11上完成结帐/07/Paypal-Express-Checkout-with-C-using-Paypal-web-services.aspx](http://blog.effectlabs.com/post/2011/11/07/Paypal-Express-Checkout-with-C-using-Paypal-web-services.aspx)

[可以在https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)下载示例代码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:19:18.910

在这种情况下，您无法在您的网站上完成结帐，因为所购买的产品是由 Amazon.com 市场上的商家出售的，并且不允许在 Amazon.com 以外的地方结帐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-04T11:14:20.527

亚马逊产品广告 API[允许您远程创建购物车](http://docs.aws.amazon.com/AWSECommerceService/2011-08-01/DG/CHAP_PurchasingtheItemsinaRemoteShoppingCart.html)，但您必须在亚马逊完成购物。

# eclipse - Eclipse 断点变量窗口

> ID：15789938
> 
> 赞同：1
> 
> 时间：2013-04-03T14:19:06.007
> 
> 标签：eclipse, spring-tool-suite

Eclipse 中有没有办法让它默认为变量选项卡而不是调试（堆栈跟踪）选项卡？例如，目前如果我在 for 循环中设置断点，当它中断时会显示调试选项卡。如果我转到变量选项卡，然后按恢复，下次它会中断它会返回到调试选项卡。有没有办法让它留在当前选项卡上或至少默认为变量选项卡？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-14T02:22:55.847

我能找到的唯一答案是隐藏屏幕（基本上把它拉到最右边）。我不认为 Eclipse 对此有解决方案。

# sql - 使用 oracle 查询获取每个员工的最后更新时间

> ID：15789950
> 
> 赞同：0
> 
> 时间：2013-04-03T14:19:26.227
> 
> 标签：sql, oracle

我已经尝试了下面的查询来获取最后的更新值。但我无法为每个员工获取单行

```
select distinct Employee_name,Employee_status,update_time
  from Employee 
 where Employee_name= 'Muthukumar'
   and Employee_status='ACTIVE' 
 order by Employee_name, Update_time desc

Employee_name       Employee_status  Update_time
Muthukumar          ACTIVE           06-DEC-12 10.18.59.048000000 AM
Muthukumar          ACTIVE           05-DEC-12 05.05.41.165000000 AM
Muthukumar          ACTIVE           04-SEP-12 03.00.54.706000000 AM 
```

像这样，我将为不同的员工提供条目。我需要为每个员工获取一个只有最后更新时间的单行。（最高）

输出应该是：

```
Employee_name  Employee_status   Update_time
Muthukumar     ACTIVE            06-DEC-12 10.18.59.048000000 AM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:21:38.507

Oracle 支持`common table expression`和`window function`. 在使用`ROW_NUMBER()`它的帮助下，根据特定顺序对组中的每条记录进行排名。

```
WITH empList
AS
(
    SELECT  Employee_Name,
            Employee_Status,
            Update_Time,
            ROW_NUMBER() OVER(PARTITION BY Employee_Name
                                ORDER BY Update_Time DESC) rn
    FROM    EmployeeList
)
SELECT  Employee_Name,
        Employee_Status,
        Update_Time
FROM    empList
WHERE   rn = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:21:57.507

这是一个经典的分析排名请求。您需要通过按员工对所有行进行分区并按日期排序来对所有行进行排名。然后只取第一名。

一些阅读[here](http://psoug.org/reference/rank.html)和[here](http://www.oracle-base.com/articles/misc/rank-dense-rank-first-last-analytic-functions.php)。

```
SELECT Employee_name, Employee_status, update_time  
FROM
(
    SELECT Employee_name, Employee_status, update_time,
           RANK() OVER (PARTITION BY Employee_name ORDER BY update_time DESC) as Rank
    FROM Employee
)
WHERE Rank = 1 
```

# java - PDFBox：调整大小时 PDJpeg 以错误的颜色绘制 -> Adob e Reader -> Windows XP & 7

> ID：15789954
> 
> 赞同：3
> 
> 时间：2013-04-03T14:19:39.040
> 
> 标签：java, swing, pdf, bufferedimage, pdfbox

使用 PDFBox 创建 PDF 并向其绘制 PDJpeg 时，在将 PDJpeg 绘制到 PDF 之前调整其大小时，图像的颜色会发生更改/反转。此问题仅在使用 Adob​​e Reader 等的 Windows XP 和 Windows 7 上可见。Mac 上的预览或 Windows 8 中的新 PDF 预览版本在某种程度上不受此影响。

**样品：**

[Adobe Reader 中的 PDF 屏幕截图](http://issues.apache.org/jira/secure/attachment/12575058/Screen%20Shot%20Windows%20XP%20Adobe%20Reader.png)
[Mac 预览中的相同 PDF](https://issues.apache.org/jira/secure/attachment/12575057/Screen%20Shot%20Mac%20OSX%20Preview.png)

**这就是我在代码中所做的：**

*   创建 PDDocument
*   创建 PDJpeg 的 HashMap（用于缓存目的）：
    *   通过 ImageIO.read() 初始化的 BufferedImage 创建 PDJpegs
    *   通过在 PDJpegs 上调用 setHeight() 和 setWidth() 来调整 PDJpegs 的大小
    *   将 PDJpeg 添加到 HashMap
*   创建 PDPage 并将其添加到 PDDocument
*   创建 PDPageContentStream
*   在 PDPage 上绘制一些 PDJpeg
*   关闭 PDPageContentStream
*   保存 PDDocument
*   关闭 PDDocument

调整 PDJpeg 大小的方法：

 `````
private void preparePDFIconCache(List<AbstractDataItem> list) throws IOException {

    iconCache = new HashMap<String, PDJpeg>();

    for (AbstractDataItem item : list) {
        String iconResourcePath = "/com/graphics/icons/" + item.getIconName();
        URL iconURL = this.getClass().getResource(iconResourcePath);

        BufferedImage icon = null;
        if (iconURL != null) {

            icon = ImageIO.read(iconURL);

        } else {

            String myIconResourcePath = SettingsDataModel.getInstance().getMyIconsPath() + File.separator + item.getIconName();

            File iconFile = new File(myIconResourcePath);
            if (iconFile.exists()) {

                URL myIconURL = iconFile.toURI().toURL();

                if (myIconURL != null) {

                    icon = ImageIO.read(myIconURL);
                }
            }

        }
        if (icon != null) {

            PDJpeg pdfIcon = new PDJpeg(currentDocument, icon);

            pdfIcon.setHeight(iconWidthXHeight);
            pdfIcon.setWidth(iconWidthXHeight);

            iconCache.put(item.getIconName(), pdfIcon);
        }
    }
} 
````  `如果在初始化 PDJpeg 之前调整 BufferedImages 的大小，则一切正常，但它们看起来并不那么清晰。

有没有人有好的解决方案或遇到过同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T13:15:56.797

使用 PDPageContentStream#drawXObject 绘制图像并在此方法中设置高度宽度解决了该问题。``

# bash - 从名称取自另一个变量的变量中获取内容

> ID：15789955
> 
> 赞同：3
> 
> 时间：2013-04-03T14:19:47.757
> 
> 标签：bash, variables, eval, fastq

我正在做一些shell脚本。

我使用这种结构来创建新变量：

```
eval ${ARG}_ext=fastq 
```

这很好用，因为我可以像这样直接使用那些新创建的变量：

```
$file_ext 
```

现在我想为名为 extension 的变量赋值：

```
extension= 
```

分配的值应该是在变量 ${ARG}_ext 中找到的值。请问，我该怎么做？

我试过了

```
extension=eval ${ARG}_ext; 
```

但这给了我变量的名称，我想要它的值。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-03T14:28:46.323

尝试：

```
$ extension=$(eval "echo \$${ARG}_ext") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T15:03:14.227

不是直接的答案，但您是否考虑过使用关联数组：

```
declare -A myhash
ARG=file
myhash[${ARG}_ext]='fastq'
extension="${myhash[${ARG}_ext]}"
echo "$extension" 
```

请注意，如果在函数内使用 declare 会创建一个局部变量，因此如果您需要全局范围内的关联数组，请在全局范围内声明它。（最新版本的 bash 添加了 -g （全局）选项来声明解决了这个问题。）

# java - 多个 UDP 客户端向一台主机发送数据包不起作用

> ID：15789960
> 
> 赞同：0
> 
> 时间：2013-04-03T14:19:53.210
> 
> 标签：java, android, networking, udp

我在一台设备上运行了一个简单的 UDP 服务器，当客户端想要连接时，它向服务器发送一条消息“连接”，然后服务器获取地址，并开始向该地址发送数据，现在当另一个客户端想要加入，该客户端发送消息“连接”但有时没有任何反应，就像想要加入消息的客户端永远不会被服务器接收，我将如何解决这个问题？这里也是服务器的代码

```
 protected String doInBackground(String... params) {
    boolean run = true;
    String data = "";
    DatagramPacket packet = null;
    boolean position = false;
    while( run )
    {
        if( data.equalsIgnoreCase( "" ) )
        {

        }

        //Send some data
        if( data.equalsIgnoreCase( "connect" ) && wait == true )
        {
            Log.d(TAG, "Someone wants to connect");
            //Increase the total players by 1
            players = players + 1;
            //Notify to the host (client) something has change
            //notify client
            //Send a message to the client with the ID
            byte[] bufer = new byte[256];
            //Send a message "connect" to the host
            String msg = Integer.toString( players );
            int msgLength = msg.length();
            bufer = msg.getBytes();
            InetAddress address;
            //Default ip address of the host
            //Take the address from the packet
            addresses.add( packet.getAddress() );
            Log.d(TAG, "Address is " + addresses.get( addresses.size() - 1 ) );
            address = addresses.get( addresses.size() - 1 );
            DatagramPacket p = new DatagramPacket( bufer, bufer.length , address, port );
            //Send packet
            try 
            {
                socket.send( p );
            } 
            catch (IOException e) 
            {
                e.printStackTrace();
            }

            wait = false;
        }

        if( wait == true && position == true )
        {
            position = false;
            wait = false;
        }

        for(int i = 0;i < positions.length; i++)
        {
            if(positions[i] != null)
            {
            //Log.d(TAG, "X and Y position of asset:"+i+", is:"+ positions[i]);
            }
        }

        //Needs to try and reteive data...
        if( wait == false )
        {
            //Log.d(TAG, "Waiting to retreive data");
            byte[] buf = new byte[256];
            packet = new DatagramPacket( buf, buf.length );
            try 
            {
                socket.receive( packet );
                wait = true;
            } 
            catch (IOException e) 
            {
                Log.d(TAG, "Error with receiving data");
                e.printStackTrace();
            }

            data = new String( buf, 0, packet.getLength() );
            //Log.d(TAG, "Data received from :" + packet.getAddress() + ", holds this value: " + data);
            String[] dataStrings = data.split(":");
            if( dataStrings[0].equalsIgnoreCase( "position" ) )
            {
                position = true;
            }
        }

        //Log.d(TAG, "Data received was :" + data);

        /*try 
        {
            Thread.sleep( 25 );
        } 
        catch (InterruptedException e) 
        {
            // TODO Auto-generated catch block
            Log.d(TAG, "Error with trying to sleep");
            e.printStackTrace();
        }*/
    }
    Log.d(TAG, "Error with while run value");
    return "finished";
} 
```

连接服务器的客户端代码

```
public void connectToServer()
{
    //Send a connect message to the server
    try {
        //Create a socket
        socket = new DatagramSocket( port );
        byte[] bufer = new byte[256];
        //Send a message "connect" to the host
        String msg = "connect";
        int msgLength = msg.length();
        bufer = msg.getBytes();
        InetAddress address;
        //Default ip address of the host
        address = InetAddress.getByName("192.168.1.59");
        DatagramPacket p = new DatagramPacket( bufer, bufer.length , address, port );
        //Send packet
        socket.send( p );

    } catch (UnknownHostException e2) {
        Log.d(TAG, "Unknown host");
        e2.printStackTrace();
    } catch (SocketException e) {
        Log.d(TAG, "Socket problem");
        e.printStackTrace();
    } catch (IOException e) {
        Log.d(TAG, "I/O problem");
        e.printStackTrace();
    }

    //Receive the message back
    byte[] buf = new byte[256];
    DatagramPacket packet = new DatagramPacket( buf, buf.length );
    //Try to receive a packet from the server
    try 
    {
        Log.d(TAG, "Waiting for data");
        socket.receive( packet );
    } 
    //Error
    catch (IOException e) 
    {
        Log.d(TAG, "Error with receiving data");
        e.printStackTrace();
    }

    //Convert the packet to a string
    String data = new String( buf, 0, packet.getLength() );

    //Use the string to find out what ID this client is
    ID = Integer.parseInt( data );
    //Setup the client game
    setUpClient();
} 
```

如果出现问题，我是否应该尝试让 connectToServer 方法继续尝试？

帆布

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:29:35.220

在第一个“连接”字符串之后，客户端不会向服务器发送任何内容。因此，服务器在该行永远等待：

```
 socket.receive( packet ); // <- will never return
 wait = true; 
```

无论如何，您应该避免将 AsyncTask 用于长时间运行的任务，例如服务器 recv() 循环，并针对不同情况重构服务器代码（接收“连接”消息或来自已知客户端的消息）。

# android - 在 Listpreference 中显示所选项目的结果时出现问题

> ID：15789964
> 
> 赞同：0
> 
> 时间：2013-04-03T14:20:04.777
> 
> 标签：android, sharedpreferences, listpreference

我正在使用 sharedPreference 编写应用程序，并且我想`display the selected item of list`显示。

我正在使用以下代码：

```
 refresh.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {

            @Override
            public boolean onPreferenceChange(Preference preference,
                    Object newValue) {
                Toast.makeText(getBaseContext(),
                        "list preference:"+newValue.toString(),
                        Toast.LENGTH_SHORT).show();
                refresh.setSummary(refresh.getEntry());
                return true;
            }
        }); 
```

但问题是，我无法显示当前选定的列表项。取而代之的是，我收到了上一个选定的列表项。

我不知道我使用的那个是否正确。

有没有其他的显示方式？

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:23:14.737

尝试使用`preference.getSummary()`而不是`newValue.toString()`

```
refresh.setOnPreferenceChangeListener(new OnPreferenceChangeListener() {

        @Override
        public boolean onPreferenceChange(Preference preference,
                Object newValue) {
            Toast.makeText(getBaseContext(),
                    "list preference:"+preferences.getString("preference_key"),
                    Toast.LENGTH_SHORT).show();
            refresh.setSummary(preferences.getString("preference_key"));
            return true;
        }
    }); 
```

# ole - 如何在 Access 中显示 XPS 文档？

> ID：15789966
> 
> 赞同：0
> 
> 时间：2013-04-03T14:20:05.630
> 
> 标签：ole, xps

我有一些 XPS 报告并希望在 Access 表单中显示它。我怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:20:05.630

将 XPS 集成到 Access 文档中的最简单方法是[使用 Web 浏览器控件](https://stackoverflow.com/questions/425605/xps-or-xaml-viewer-to-embed-in-net-app#)。从表单布局工具中选择“设计”并添加一个新的 Web 浏览器控件。然后将 设置`Control Source`为所需的 .xps 文档。

控件的侧面可能有一些滚动条。这些来自 xps 查看器对象，我不知道如何删除它们。

# php - php if else - 多个变量不起作用

> ID：15789975
> 
> 赞同：0
> 
> 时间：2013-04-03T14:20:30.287
> 
> 标签：php, if-statement

我对 php 很陌生，想知道是否有人愿意参与其中。我快到了，但是 3 天后我几乎放弃了:(。我有一张桌子，上面有电子邮件地址、姓名和电话号码。如果这个人没有电子邮件地址，我会喜欢用电子邮件链接打印出姓名和地址的代码。听起来很简单，直到我尝试这样做:)

这是我几乎可以工作的代码：（我已经有一个连接 - 只要我不试图消除删除电子邮件链接部分，我就可以正常工作。）提前感谢您的时间。

```
 <?php
    $data = mysql_query("SELECT first,last,email,phone FROM church_staff WHERE   
    display='yes' AND pull_justice='yes' ORDER BY last ASC")
    or die(mysql_error());  
    while($info = mysql_fetch_array( $data ))
    Print " <tr><td class=\"low\"> ";
    // Evaluates to true because $email is empty
    if (empty($email)) {
    Print " ".$info['first']." ".$info['last']."  ";
    }
    // Evaluates as true because $email is set
    if (isset($email)) {
    }
    Print " <img src=\"images/email.gif\" alt=\"email\">
    <a  href=\"mailto:".$info['email']." >".$info['first']." ".$info['last']."</a> ";
    Print " </td><td class=\"low\">".$info['phone']."</td></tr> ";
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T14:28:52.540

您应该使用`$info['email']`而不是`$email`，因为这个变量`$email`永远不会被设置。

您忘记在 while 条件后添加括号：

```
 while ($info = mysql_fetch_array ($data))
{
 // process on $info
} 
```

所以在你的代码中你打印`" <tr><td class=\"low\"> ";`n 次（你的查询返回的行数）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:29:16.673

首先，$email 没有设置。它是 $info['email']。您将始终拥有 $info['email']，但该值可能为 null 或 ""。因此，您需要做的就是检查 if($info['email'] == "") 以查看它是否未设置。从技术上讲，我会检查 if(trim($info['email']) == "") 因为我不信任数据输入人员。他们可能会在其中粘贴空格或制表符。

现在，你想要一个 if else：

```
if(trim($info['email')=="")
{
    //do what you want when there is no email
}
else
{
    //do what you want there this an email
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:34:48.473

**看代码纠正错误**

```
<?php
$data = mysql_query("SELECT first,last,email,phone FROM church_staff WHERE   
display='yes' AND pull_justice='yes' ORDER BY last ASC")
or die(mysql_error());  
while($info = mysql_fetch_array( $data ))
{
    // Confirm if $data is having 1d array of required index and value
    Print " <tr><td class=\"low\"> ";
    // Evaluates to true because $email is empty
    if (empty($data['email'])) {
        Print " ".$info['first']." ".$info['last']."  ";
    }
    else
    {
        Print " <img src=\"images/email.gif\" alt=\"email\">
        <a  href=\"mailto:".$info['email']." >".$info['first']." ".$info['last']."</a> ";
        Print " </td><td class=\"low\">".$info['phone']."</td></tr> ";
    }
}
?> 
```

更好地在 delve 中学习 php 的语法...即 isset() 是空的子集。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:35:08.193

我不太确定您要做什么，看起来我错过了一些东西。但首先你的代码会像这样更好：

```
<?php
$data = mysql_query("SELECT first,last,email,phone FROM church_staff WHERE   
display='yes' AND pull_justice='yes' ORDER BY last ASC")
or die(mysql_error());  
while($info = mysql_fetch_array( $data ))
{
    Print " <tr><td class=\"low\"> ";
    // Evaluates to true because $email is empty
    // Evaluates as true because $email is set
    if (isset($email)) {        
        if (empty($email)) {
            Print " ".$info['first']." ".$info['last']."  ";
        }
    }
    Print " <img src=\"images/email.gif\" alt=\"email\">
    <a  href=\"mailto:".$info['email']." >".$info['first']." ".$info['last']."</a> ";
    Print " </td><td class=\"low\">".$info['phone']."</td></tr> ";
}
?> 
```

事实上，如果没有定义范围，While 循环将使用声明后的第一行。另外，您最好先检查是否设置了某些内容，然后再检查它是否为空。

希望我回答了你的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-03T14:51:05.910

您的*while*循环仅包含一个*打印*语句；其他一切都在它之外，因为你忘记了花括号。*接下来，第二个if*的主体的右花括号来得太早了。更正后，您的循环如下所示：

```
while ($info = mysql_fetch_array($data)) {
    print " <tr><td class=\"low\"> ";
    if (empty($email)) {
        print " ".$info['first']." ".$info['last']."  ";
    }
    if (isset($email)) {
        print " <img src=\"images/email.gif\" alt=\"email\"><a  href=\"mailto:".$info['email']." >".$info['first']." ".$info['last']."</a> ";
    }
    print " </td><td class=\"low\">".$info['phone']."</td></tr> ";
} 
```

如果您已将 *error_reporting* 转换为**E_ALL**，就像您一直应该做的那样，在开发时，您会看到*$email*没有定义。显然，它应该是*$info['email']*：

```
while ($info = mysql_fetch_array($data)) {
    print " <tr><td class=\"low\"> ";
    if (empty($info['email'])) {
        print " ".$info['first']." ".$info['last']."  ";
    }
    if (isset($info['email'])) {
        print " <img src=\"images/email.gif\" alt=\"email\"><a  href=\"mailto:".$info['email']." >".$info['first']." ".$info['last']."</a> ";
    }
    print " </td><td class=\"low\">".$info['phone']."</td></tr> ";
} 
```

现在，PHP 中的变量既可以设置也可以为空，因此名称可能会被打印两次。为避免这种情况，请将第二个*if*变成*else*分支。

```
while ($info = mysql_fetch_array($data)) {
    print " <tr><td class=\"low\"> ";
    if (empty($info['email'])) {
        print " ".$info['first']." ".$info['last']."  ";
    } else {
        print " <img src=\"images/email.gif\" alt=\"email\"><a  href=\"mailto:".$info['email']." >".$info['first']." ".$info['last']."</a> ";
    }
    print " </td><td class=\"low\">".$info['phone']."</td></tr> ";
} 
```

为了清楚起见，您应该始终尽可能避免混合代码和布局。因此，下一步是提取 HTML 模板并使用 CSS 将图像添加到*a.mail*。

```
$template_container = '<tr><td class="low">%s</td><td class="low">%s</td></tr>';
$template_mail      = '<a href="mailto:%s">%s</a>';

while ($info = mysql_fetch_array($data)) {
    $name = $info['first']." ".$info['last'];
    if (!empty($info['email'])) {
        $name = sprintf($template_mail, $info['email'], $name);
    }
    printf($template_container, $name, $info['phone']);
} 
```

如您所见，代码现在更易于阅读。

# java - ArrayList 已排序元素的初始索引

> ID：15789979
> 
> 赞同：5
> 
> 时间：2013-04-03T14:20:44.827
> 
> 标签：java, sorting, collections, arraylist

下面的代码实现`nfit`了升序排序。

```
public static void main(String[] args) {
    ArrayList<Double> nfit = new ArrayList<Double>();

    nfit.add(2.0);
    nfit.add(5.0);
    nfit.add(1.0);
    nfit.add(8.0);
    nfit.add(3.0);

    // Sort individuals in ascending order
    Collections.sort(nfit);

    System.out.print(nfit);

} 
```

输出是：

```
[1.0, 2.0, 3.0, 5.0, 8.0] 
```

我的问题是如何获取已排序元素的初始索引？在这个例子中，我的问题的答案如下：

```
[2, 0, 4, 1, 3] 
```

我怎样才能得到这些索引？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T14:29:55.480

复制 ArrayList 并排序，然后使用 indexOf。

```
ArrayList<Double> nfit = new ArrayList<Double>();
nfit.add(2.0);
nfit.add(5.0);
nfit.add(1.0);
nfit.add(8.0);
nfit.add(3.0);
ArrayList<Double> nstore = new ArrayList<Double>(nfit); // may need to be new ArrayList(nfit)
Collections.sort(nfit);
int[] indexes = new int[nfit.size()];
for (int n = 0; n < nfit.size(); n++){
    indexes[n] = nstore.indexOf(nfit.get(n));
}
System.out.println(Arrays.toString(indexes)); 
```

如果您想要 ArrayList 中的索引，

```
Collections.sort(nstore);
for (int n = 0; n < nfit.size(); n++){
    nstore.add(n, nfit.indexOf(nstore.remove(n)));
}
Collections.sort(nfit); 
```

这将产生一个排序的 ArrayList nfit 和一个 ArrayList 的索引 nstore。

编辑：在for循环中

```
for (int n = 0; n < nfit.size(); nfit++){
    nstore.add(n, nfit.indexOf(nstore.remove(n)));
} 
```

循环计数必须在 n 上迭代，而不是在 nfit 上找到更正的代码：

```
for (int n = 0; n < nfit.size(); n++){
    nstore.add(n, nfit.indexOf(nstore.remove(n)));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-03T14:26:40.810

制作副本，`ArrayList`然后对副本进行排序。之后使用`indexOf`方法传递排序数组的元素并调用 original `ArrayList`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-03T14:27:28.237

如果值是唯一的，您可以使用 a`Map<Double, Integer>`来保存值和初始顺序。您只需要对映射键进行排序并获取每个键的对应值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-03T14:27:50.280

两种解决方案： 1）如果您与 ArrayList 结合，则需要使用 Iterator 来构建解决方案集的索引列表。2）切换到带有值和顺序的Map（可以通过排序来改变）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-10-09T18:28:22.340

下面的 mergesort 实现实现了一个方法 'indexSort'，它可以做到这一点而不会弄乱输入数组。 [http://algs4.cs.princeton.edu/22mergesort/Merge.java.html](http://algs4.cs.princeton.edu/22mergesort/Merge.java.html) [http://algs4.cs.princeton.edu/code/javadoc/Merge.html#indexSort(java.lang.Comparable[])](http://algs4.cs.princeton.edu/code/javadoc/Merge.html#indexSort(java.lang.Comparable[]))

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-15T02:22:26.147

冒泡排序永远是你的朋友。您可以使用它对数组进行排序，同时跟踪原始数组索引。当您的数组中有多个相似元素时，它也将起作用。

```
import java.util.*;
import java.util.Arrays;
import java.util.Random;
public class BubbleSort {
    public static void main(String[] args) {
        Random rnd = new Random();
        int count = 5;
        ArrayList<Double> array = new ArrayList<Double>();
        int[] indices = new int[count];
        for(int i = 0; i < indices.length; i++) {
            array.add(rnd.nextDouble() * count);
            indices[i] = i;
        }
        ArrayList<Double> values = new ArrayList<Double>(array);
        bubbleSort(values, indices);
        System.out.println("Unsorted input array   :" + array);
        System.out.print("Sorted   input array   : ");
        for(int i = 0; i < array.size(); i++) {
            System.out.print(array.get(indices[i]) + " " );
        }
        System.out.println();
    }
    private static void bubbleSort(ArrayList<Double> values, int[] indices) {
        for(int k = 0; k < values.size(); k++) {
            for(int l = k + 1; l < values.size(); l++) {
                if(values.get(k) > values.get(l)) {
                    double temp_value = values.get(k);
                    values.set(k, values.get(l));
                    values.set(l, temp_value);
                    int temp_index = indices[k];
                    indices[k] = indices[l];
                    indices[l] = temp_index;
                }
            }
        }
    }
} 
```

这么多年后我回答这个问题的原因是，如果您有多个具有相似值的元素，则 [接受的答案](https://stackoverflow.com/a/15790218/5412470)将失败，因为在`indexes[n] = nstore.indexOf(nfit.get(n));`，`indexOf`方法总是返回指定元素的第一次出现，这会导致索引数组不正确，同时具有相似的元素在输入数组中。

最后，将代码复制并粘贴进去`BubbleSort.java`，然后运行`javac BubbleSort.java && java BubbleSort`编译并查看结果。

# bash - 页面已经是 JSON 格式，wget 输出无效的 JSON

> ID：15789982
> 
> 赞同：0
> 
> 时间：2013-04-03T14:20:56.450
> 
> 标签：bash, wget

我能够获得一个已经包含 JSON 格式数据的 URL。但是，在查看输出文件时，会有额外的空格和换行符，这会在尝试解码 JSON 时导致问题。

如果我只是将页面内容直接从浏览器复制并粘贴到 .json 文件，则格式非常好。

如何确保 wget 以它显示的确切格式输出页面，即 json 格式？

提前致谢。

编辑，对不起，由于隐私问题，我不得不使用一些混淆，但仍应说明该问题。

使用的命令：

```
wget --load-cookies=/home/cookies.txt --header "Accept:application/json" "https://url.com/url/json?" -O output.json 
```

输出格式的片段，注意多行，我包括来自 vi 的那些只是为了说明。实际输出不包括这些行号：

```
 1 
  2     {
  3       "callback": ["callback"],
  4       "attributes": ["xxx", "yyy", "zzz", "aaa", "bbb", "ccc", "ddd", "eee", "fff", "ggg"],
  5       "types": ["string", "date", "string", "string", "string", "number", "number", "number", "string", "string"],
  6       "records": [["1", "2013-04-03", "blabla", "um", "yes", 1, 0, 0, " 5h 0m", "-1m"], ["2", "2013-04-03", "blabla", "er", "no", 0, 1, 1, " 5h 0m", "-1m"], 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T02:16:51.447

最终`tr -d "[:space:]"`在整个输出上使用并将文件转换为有效的格式。

# ios - 将背景图像添加到 ui 集合视图

> ID：15789983
> 
> 赞同：9
> 
> 时间：2013-04-03T14:21:00.777
> 
> 标签：ios, user-interface, ipad

我是 iOS 开发的新手，我想知道如何将垂直重复的背景图像添加到我为显示图像数组而创建的 UI 集合视图中？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-04-04T13:02:33.113

这也可以，我认为比使用背景颜色更正确。直接去**backgroundView**。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.collectionView.backgroundView = [[UIImageView alloc] initWithImage:[UIImage imageNamed:@"yourImage.png"]];

} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-04-03T14:25:22.890

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    self.collectionView.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"imageName.pnd"]];
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-03-25T20:12:05.787

对于 swift，添加到 viewDidLoad()：

```
 self.collectionView?.backgroundColor = UIColor(patternImage: UIImage(named: "background")!) 
```

# maven - mvn --encrypt-master-password 如何 工作？

> ID：15789984
> 
> 赞同：9
> 
> 时间：2013-04-03T14:21:01.653
> 
> 标签：maven, password-protection, password-encryption, password-generator

我想知道这个命令（mvn --encrypt-master-password）使用的算法或技术。每次我运行它都会产生不同的输出。我假设它需要系统时间作为种子参数。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-03T15:54:39.480

加密机制本身不在 Maven 代码库中。它位于一个名为`plexus-cipher`. 它总是在 Maven 发行版上。我的是`lib/plexus-cipher-1.7.jar`maven`3.0.5`版本。

实际密码是`AES/CBC/PKCS5Padding`. 用于块链接的密码和 IV 的密钥是通过迭代`SHA-256`提供的密码（编码为 UTF-8）与 JVM 配置特定（通常`SHA1PRNG`）64 位随机盐连接一次或两次而得出的。

这里没有什么大惊喜。它似乎与现在每个其他灵魂都使用的格式相同。

血淋淋的细节可以在[GitHub 项目页面上阅读源代码找到](https://github.com/sonatype/plexus-cipher)

# ios - 暂停和恢复加载屏幕的 CABasicAnimation？

> ID：15789986
> 
> 赞同：7
> 
> 时间：2013-04-03T14:21:11.037
> 
> 标签：ios, objective-c, cabasicanimation

我已经实现了一个 LoadingLayer 类，它有一些动画元素（准确地说是 2 个），这些元素使用`CABasicAnimation`. 现在，这个加载屏幕视图在整个应用程序中持续存在。隐藏视图会停止所有动画吗？或者让我换个说法：我需要担心很多内存还是可能导致滞后？我尝试使用`-pauseLayer:`and`-resumeLayer:`方法，但由于我的应用程序中的多线程，它们导致了一些问题。因此，是否可以隐藏和显示加载屏幕并且其动画一直在运行？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-03T14:40:06.813

[https://developer.apple.com/library/content/qa/qa1673/_index.html](https://developer.apple.com/library/content/qa/qa1673/_index.html)

```
-(void)pauseLayer:(CALayer*)layer
{
    CFTimeInterval pausedTime = [layer convertTime:CACurrentMediaTime() fromLayer:nil];
    layer.speed = 0.0;
    layer.timeOffset = pausedTime;
}

-(void)resumeLayer:(CALayer*)layer
{
    CFTimeInterval pausedTime = [layer timeOffset];
    layer.speed = 1.0;
    layer.timeOffset = 0.0;
    layer.beginTime = 0.0;
    CFTimeInterval timeSincePause = [layer convertTime:CACurrentMediaTime() fromLayer:nil] - pausedTime;
    layer.beginTime = timeSincePause;
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-08-16T02:17:38.103

这是[Nico](https://stackoverflow.com/users/879432/nico)答案的 swift 3 版本。

希望有所帮助！

```
fileprivate func pauseLayer(layer: CALayer) {
    let pausedTime = layer.convertTime(CACurrentMediaTime(), from: nil)
    layer.speed = 0.0
    layer.timeOffset = pausedTime
}

fileprivate func resumeLayer(layer: CALayer) {
    let pausedTime = layer.timeOffset
    layer.speed = 1.0
    layer.timeOffset = 0.0
    layer.beginTime = 0.0
    let timeSincePause = layer.convertTime(CACurrentMediaTime(), from: nil) - pausedTime
    layer.beginTime = timeSincePause
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-03T14:47:42.223

如果视图是隐藏的（不可见或根本不在界面中），则它不是渲染树的一部分。

但是，当嵌入该层的视图控制器离开界面（`viewDidDisappear`）时，为什么不简单地停止动画呢？只需告诉图层`removeAllAnimations`。然后重新创建动画，如果需要，在`viewWillAppear`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-11-26T11:46:45.617

[将Nico](https://stackoverflow.com/users/879432/nico)的修改速度的答案扩展到任何变量：

```
extension CALayer {
    func udpate(speed newSpeed: Float) {
        let newSpeed = newSpeed == 0 ? 1e-6 : newSpeed
        let triggerTime = self.convertTime(CACurrentMediaTime(), from: nil)
        let offset = self.timeOffset
        let begin = self.beginTime
        let speed = self.speed
        self.beginTime = (triggerTime - offset) / Double(speed) + begin
        self.timeOffset = triggerTime
        self.speed = newSpeed
    }
} 
```

如果您愿意以交互方式更改图层动画速度，请使用此方法。如果你想完全停止图层，你应该使用 Nico 的答案，虽然使用这种方法`speed=0.0`实际上需要大约**11 天**才能完成动画，并且在 1 小时内动画将进行大约`0.0036`

# c# - 向客户端 PC 运行 C# 应用程序给出错误

> ID：15789987
> 
> 赞同：-1
> 
> 时间：2013-04-03T14:21:11.150
> 
> 标签：c#, .net, entity-framework, connection-string

我正在尝试在具有新版本的客户端 PC 上运行我的 C# 应用程序，但上面安装了 Instant Client。在我的应用程序中，我正在访问数据库以检索一些要显示的记录。当我尝试在我的开发 PC 上运行该应用程序时，它工作正常，但在客户端 PC 上它显示以下错误： **在配置中找不到商店提供商或无效**

我的 app.congif 包含以下内容：

```
<configuration>
  <connectionStrings>
    <add name="StorageEntities" connectionString="metadata=res://*/StorageModel.csdl|res://*/StorageModel.ssdl|res://*/StorageModel.msl;provider=Oracle.DataAccess.Client;provider connection string=&quot;DATA SOURCE=myData;PASSWORD=myPass;PERSIST SECURITY INFO=True;USER ID=myUser&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0" />
  </startup>
</configuration> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T14:24:29.760

EntityFramework 是否安装在客户端机器上？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T14:39:34.327

安装 Microsoft Process Monitor 工具（它是免费的），将其配置为在出现问题时捕获计算机上应用程序的所有文件访问事件，然后查看工具中的文件访问错误。

这是进程监视器的链接[http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx](http://technet.microsoft.com/en-us/sysinternals/bb896645.aspx)

# backbone.js - 使用 Jasmine 单独测试 Marionette 模块

> ID：15789988
> 
> 赞同：5
> 
> 时间：2013-04-03T14:21:13.877
> 
> 标签：backbone.js, coffeescript, jasmine, marionette, sinon

我有一个 Marionette 项目，类似于[http://www.backbonerails.com/](http://www.backbonerails.com/)中描述的设置。 我正在使用 Rails、Coffeescript 和 Jasmine/Sinon 作为规范。

我在单独测试模块时遇到问题。一个例子是路由器：

```
@MyApp.module "DashboardApp", (DashboardApp, App, Backbone, Marionette, $, _) ->

  class DashboardApp.Router extends Marionette.AppRouter
    appRoutes:
      "dashboard" : "showDashboard"

  API =
    showDashboard: ->
      DashboardApp.Show.Controller.showDashboard()

  App.addInitializer ->
    new DashboardApp.Router
      controller: API 
```

我不确定如何独立于应用程序（window.MyApp）进行测试。我想基本上触发“#dashboard”路由并断言 showDashboard 被调用，而不必让整个应用程序参与其中。我们使用的是 Rails 资产管道（所以没有 RequireJS），所以所有的 JS 文件都是在启动时加载的。我认为可以以某种方式模拟此模块中使用的 App 对象，但我对任何解决方案都持开放态度。

我同样遇到的另一个问题是测试 Marionette 命令和要求，例如在我拥有的视图中

```
App.execute("navigate:root") 
```

问题再次是我不想让真正的应用程序参与规范，我想例如为规范制作一个新的 Marionette.Application。该视图位于一个模块中，该模块的定义方式与我在第一个代码示例中显示的方式相同。

基本上我想避免在规范中使用真正的应用程序，并使用模拟或（可能更好/更容易）只是一个新的 Marionette.Application。所以这对我来说在所有事情通过应用程序对象的情况下都是有用的，例如 Wreqr 的东西，路由器的初始化程序等。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-05T10:02:45.713

您应该使用 sinonJs 存根。

第一个测试应该实例化路由器，然后存根控制器的 showDashboard 方法。

```
@router = new App.DashboardApp.Router
@showDashboardStub = sinon.stub @router.controller, 'showDashboard'
@router.navigate "dashboard", {trigger: true} 
```

以及它被称为的测试

```
expect(@showDashboardStub).toHaveBeenCalled() 
```

第二个测试取决于您是要测试被调用执行的命令还是正在处理的命令。第一种情况是实例化执行程序和存根 App.execute，第二种情况是实例化处理命令的类并调用 App.execute。

# join - 我可以在 Pig 中保留不匹配的项目吗？

> ID：15789993
> 
> 赞同：1
> 
> 时间：2013-04-03T14:21:21.600
> 
> 标签：join, compare, apache-pig, whitelist

我有两套

```
personCounts 
(personName:chararray, count:int)

whitelist
(empID:int, empName:chararray) 
```

我想要的是在 personCounts 中但不在白名单中的人。我知道 JOIN 返回出现在两者中的元素。有没有办法返回那些会被丢弃的东西？我在想我可以用 CROSS 做到这一点，但我想我会有额外的东西..？

```
crossed = CROSS personCounts BY personName, whitelist BY empName;
filcrs = FILTER crossed BY NOT personCounts::personName MATCHES whitelist::empName; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T16:53:38.607

我认为您想要实现的是 personCounts 和白名单之间的设置差异是否正确？

如果是这样，请尝试以下方法（未经测试！！！）：

```
CGRP = COGROUP personCounts BY personName, whitelist BY empName;
PC_MINUS_WL = FILTER CGRP BY IsEmpty(whitelist);
PC_MINUS_WL = FOREACH PC_MINUS_WL GENERATE group AS name; 
```

我发现以下两个资源很有帮助：

[http://agiletesting.blogspot.de/2012/02/set-operations-in-apache-pig.html](http://agiletesting.blogspot.de/2012/02/set-operations-in-apache-pig.html)

[http://www.cs.tufts.edu/comp/150CPA/notes/Advanced_Pig.pdf](http://www.cs.tufts.edu/comp/150CPA/notes/Advanced_Pig.pdf)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T18:05:41.353

您可以使用 JOIN FULL 来做到这一点。

```
joined = JOIN personCounts BY personName FULL, whitetlist BY empName;
joined = FILTER joined BY NOT $0 MATCHES '';
joined = FILTER joined BY $3 IS null; 
```

然后加入的是 (personName, count, , '')

# android - 如何更改 android 软键盘按键的背景颜色？

> ID：15789997
> 
> 赞同：8
> 
> 时间：2013-04-03T14:21:25.240
> 
> 标签：android, keyboard, android-softkeyboard

我正在 Android 上实现自定义键盘。我刚刚阅读了有关“developer.android.com”的文档并看到了带有软键盘的示例。我所能做的就是改变键盘背景，改变按钮的位置，将 keyIcon 而不是 keyLabel 设置为 key。

但我仍然无法更改键的背景和颜色。

请写一些 XML 或源代码的示例代码。谢谢！

我更改背景的示例：

```
 public class GBInput extends InputMethodService implements KeyboardView.OnKeyboardActionListener{
    ...
    private GBKeyboardView mInputView;
    @Override
        public View onCreateInputView() {
            mInputView = (GBKeyboardView) getLayoutInflater().inflate(R.layout.input, null);
            mInputView.setOnKeyboardActionListener(this);
            mInputView.setKeyboard(mQwertyKeyboard);
            mInputView.setBackgroundResource(R.color.keyboard_background);
            return mInputView;
        }
    ...
    } 
```

我需要这样的东西： ![在此处输入图像描述](https://i.stack.imgur.com/h8FaY.png)

所有按钮的图像 - 这是个坏主意，所以我想找到更好的问题。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-06-04T21:43:02.967

将这行代码添加到您的 input.xml

```
android:keyBackground="@drawable/samplekeybackground" 
```

因此，您的 input.xml 最终应该看起来与此类似。

```
<com.example.keyboard.LatinKeyboardView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/keyboard"
    android:layout_alignParentBottom="true"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:keyPreviewLayout="@layout/input_key_preview"
    android:keyBackground="@drawable/samplekeybackground"
    /> 
```

如果您已经有一个可以使用的drawable，那么这里是一个示例关键背景drawable，它将产生类似于您的示例图像的结果。

```
 <?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <!-- Non focused states -->
    <item
        android:state_focused="false"
        android:state_selected="false"
        android:state_pressed="false"
        android:drawable="@drawable/normal" />
    <!-- Pressed state -->
    <item
        android:state_pressed="true"
        android:drawable="@drawable/pressed" /></selector> 
```

如果您想要 xml 中的所有内容，您可以使用 shape xml，如下所示。可绘制/正常.xml

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"> 
  <stroke android:width="4dp" android:color="#000000" /> 
  <solid android:color="#FFFFFF"/> 
</shape> 
```

和drawable/pressed.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <shape xmlns:android="http://schemas.android.com/apk/res/android"> 
      <stroke android:width="4dp" android:color="#A3D9F3" /> 
      <solid android:color="#4ABCE8"/> 
    </shape> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-08-15T04:34:12.810

```
<com.example.keyboard.LatinKeyboardView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/keyboard"
    android:layout_alignParentBottom="true"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:keyPreviewLayout="@layout/input_key_preview"
    android:keyBackground="@drawable/samplekeybackground"
    android:keyTextColor="#000000"
    /> 
```

> 只需将此行添加到您的键盘视图即可将文本颜色更改为黑色
> 
> > 安卓：keyTextColor="#000000"