# StackOverflow 问答 13871000-13871999

# android - getBearing 不工作 使用 KML 驱动 DDMS

> ID：13871007
> 
> 赞同：1
> 
> 时间：2012-12-14T00:37:43.387
> 
> 标签：android, ddms, locationlistener

我已经成功地使用 KML 文件和 DDMS 来驱动使用 LocationListener 的应用程序测试。到目前为止，我一直在使用效果很好的纬度和经度。但现在我正在尝试使用 .getBearing 并且它总是返回 0.0 ！

这是 LocationListener 中的错误吗？它是 DDMS 中的错误吗？谢谢，加里

# php - $post 在字符串中？

> ID：13871010
> 
> 赞同：0
> 
> 时间：2012-12-14T00:38:04.267
> 
> 标签：php

```
<?php
$_POST['aantal'] = 4;
$_POST['begin'] = 10;

$iets = $_POST['aantal'] + $_POST['begin'];
$ietsanders = $iets - 1;
$values = "'$_POST[a" . $_POST['begin'] . "]', " ;

for ($i = $_POST['begin'] + 1 ; $i < $ietsanders ; $i++){
    $values = $values . "'$_POST[a" .$i. "]', ";
}
$values = $values."'$_POST[a" . $ietsanders . "]', ";
echo "using  ".$values;
?> 
```

这是我的代码；怎么了？它给了我一个错误：

```
$values = $values . "'$_POST[a" .$i. "]', "; 
```

和：

```
$values = $values."'$_POST[a" . $ietsanders . "]', "; 
```

当我离开`'`at时，它没有给我任何错误`'$_POST`。我希望我的 for 循环给我`'$_POST[a$i]'`每次运行：

```
'$_POST[a10]', '$_POST[a11]', '$_POST[a12]', '$_POST[a13]', 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:42:15.393

`'a'`将带有`$_POST['begin']`as in 索引的字符串连接到外部`$_POST`，如下所示：

```
$_POST['a' . $_POST['begin']] 
```

你的循环看起来像：

```
// Concatenate a single quote with the $_POST dynamic key, then another single quote and comma.
$values = "'" . $_POST['a' . $_POST['begin']] ."', " ;

// In the loop, same thing concatenating single quotes around the $_POST key
// dynamically built with $i
for ($i = $_POST['begin'] + 1 ; $i < $ietsanders ; $i++){
    $values = $values . "'" . $_POST['a' .$i] . "', ";
} 
```

您尝试通过构建`$_POST['stuff']`as 字符串来执行此操作的方式需要调用`eval()`，*在*接受用户输入（如`$_POST`.

如果您打算将这些值传递`$_POST`给 SQL 查询，则需要对它们执行一些防止 SQL 注入的保护。如果可能，建议改用支持预处理语句的 API。

最后，不知道你为什么要*写信*给`$_POST`超全球。希望您有充分的理由这样做：

```
$_POST['aantal'] = 4;
$_POST['begin'] = 10; 
```

### 评论后更新：

好吧，事实证明这个想法是构建*文字*字符串`'$_POST[a10]', '$_POST[a11]', '$_POST[a12]', '$_POST[a13]',`而不是从中插入值。为此，字符串应该用单引号引起来，以防止`$`分隔变量。

```
// Single quote the string, and escape single quotes inside it
$values = '\'$_POST[a' . $_POST['begin'] . ']\', ';

// In the loop, same thing concatenating single quotes around the $_POST key
// dynamically built with $i
for ($i = $_POST['begin'] + 1 ; $i < $ietsanders ; $i++){
    $values = $values . '\'$_POST[a' . $i .']\', ';
}

// After the loop, you have an extra comma and space at the end. trim() it off
$values = trim($values, ', '); 
```

[这是一个工作示例](http://codepad.viper-7.com/s5wTai)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:55:35.723

我认为您正在尝试这样做：

```
 $values = $values . "\'$_POST[a" .$i. "]\', "; 
```

# php - 仅使用前几位数字拉取 URL

> ID：13871012
> 
> 赞同：0
> 
> 时间：2012-12-14T00:38:07.630
> 
> 标签：php, mysql, url, hyperlink

我需要做的是让我的页面创建一个指向 .pdf 文件的链接。文件名中唯一的一致性和唯一值是在开头。每个文件名都有一个唯一的编号。例如文件：“501599-Fresno_Catalog_version2” 在我的页面上，目录号“501599”存储在数据库中，但不是整个文件名。这是因为其他人直接访问文件并可能将部分名称更改为“version3”，但他们不会更改目录号。如何通过仅向 url 提供目录号来创建将打开此文件的动态链接？这可能吗？

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:55:42.217

如果我理解正确，您想仅使用唯一的文件编号来定位整个 PDF 文件。

您可以使用 PHP`glob()`函数：

```
$pdf_files = glob('./path/to/pdfs/501599*.pdf'); 
```

或（使用变量）：

```
$path_to_pdfs = './path/to/pdfs/'; // change to your path
$file_number = 501599; // change to set this from the database

// get the array of pdf files matching
$pdf_files = glob($path_to_images . $file_number . '*.pdf');

// for debug, you can output the array like this:
print_r($pdf_files);

// if there's only one file every time, you can get it with $pdf_files[0] 
```

`glob`返回与搜索字符串匹配的所有路径名的数组，在本例中是您的路径/到/图像 + 任何内容（因此是通配符 *）+ PDF 扩展名。

因此，当您从数据库中检索唯一文件号时，您可以`glob()`使用文件路径和根据我上面的代码改编的唯一文件号运行，然后对文件执行您需要的操作。

这是 glob() 文档： http: [//php.net/manual/en/function.glob.php](http://php.net/manual/en/function.glob.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T00:48:26.640

这是你需要的吗？只要文件名中有连字符，两者都可以工作。

```
$filename = '501599-Fresno_Catalog_version2';
$catalog_number = substr($filename, 0, strrpos($filename, '-'));
echo $catalog_number; 
```

或者

```
$filename = '501599-Fresno_Catalog_version2';
$pieces = explode('-', $filename);
echo $pieces[0]; 
```

**结果**

```
501599
```

然后，您将使用该部分来形成您的 URL。

# c++ - DX11精灵问题

> ID：13871013
> 
> 赞同：2
> 
> 时间：2012-12-14T00:38:21.900
> 
> 标签：c++, directx, 2d, sprite, directx-11

我在 dx11 中渲染精灵时遇到问题，我刚刚开始学习基础知识。这是我的简单着色器代码：

```
//Shader Model 4.0
//Default shaders for rendering a point sprite

Texture2D DiffuseTexture : register( t0 );

SamplerState DiffuseTextureSampler : register( s0 );

cbuffer cbViewProj : register( b0 )
{
    float3x3 ViewProjection;
}

struct VS_INPUT
{
    float2 Pos : POSITION;
    float2 Tex : TEXCOORD0;
};

struct PS_INPUT
{
    float4 Pos : SV_POSITION;
    float2 Tex : TEXCOORD0;
};

PS_INPUT VS( VS_INPUT input )
{
    PS_INPUT output;
    float3 oVec = float3(input.Pos.x, input.Pos.y, 1.0f);   
    oVec = mul(oVec, ViewProjection);

    output.Pos = float4(oVec.x, oVec.y, 0.0f, 1.0f);
    output.Tex = input.Text;

    return output;
}

float4 PS( PS_INPUT input) : SV_Target
{
    return DiffuseTexture.Sample( DiffuseTextureSampler, input.Tex );
} 
```

如您所见，它具有最低限度，甚至还没有用于移动精灵的世界矩阵。我的“ViewProjection”矩阵是一个二维正交矩阵。我将此设置与directx9一起使用，一切正常。

进入 dx11 我遇到了麻烦。我相信我设置 ViewProjection 矩阵的方式或在着色器中读取它的方式有问题。

首先，我使用 PIX 检查我的顶点缓冲区/顶点进入顶点着色器的顺序： ![坏精灵1](../Images/3ef86d3053b2c5a490a2657e062d21ac.png)

所以这看起来很好。接下来，我添加了 viewprojection 矩阵以将顶点投影到屏幕空间中，如我发布的着色器代码所示。结果... ![坏精灵1](../Images/8da17effeeb467ba803b1e5c06dbdcd8.png)

如您所见，顶点的投影不正确。对于初学者：

*   prim0vert0 = prim0vert1
*   prim1vert4 = prim1vert5

这对我来说没有意义，因为正在处理不同的顶点值。您可以通过查看 UV 坐标来判断顶点的输入顺序与我最初测试的顺序相同。这是我的 3x3 viewprojection 矩阵缓冲区的外观：

![在此处输入图像描述](../Images/3c2b725562d68d723e960a621ab7e5a8.png)

我在顶部手动写了缓冲区值对应的矩阵行/列。底部的三个值只是填充以确保我的缓冲区大小是 16 的倍数。所以......就像在 directx 中一样：

*   m00 = 矩阵第 1 行、第 1 列
*   m01 = 矩阵第 1 行、第 2 列
*   ETC

右侧的红色值表示我的 ViewProjection 矩阵如何访问 hlsl 代码中的缓冲区。

出于某种原因，它将其视为 float4x4？这可能是我的问题......还是我在解决我的问题方面的轨道

-更新-

我做了一些研究，现在假设 float3x3 在存储在寄存器中时会变得碎片化（因为它被打包成 4 个浮点组）。

现在看来，即使我的应用程序完全是 2D 的，由于这种烦人的行为，我仍然应该使用 4x4 矩阵。这是正确的，还是有一些我不知道的解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-05T08:11:27.153

现代图形硬件设计/优化为使用 4x4 字节向量，即 4 个浮点值。即使您使用 float3 向量，在内部它仍然占用一个保存 float4 的寄存器。

为了使向量数学正常工作，每个点都必须从 16 字节对齐的地址开始，当你有 float3xN 时这是一个问题，因为第二个点将从 12 字节开始

因此，您必须将数据填充为 16 字节对齐。尝试使用 float4x3。在内部，您的 float3x3 操作仍将占用 float4x3 的空间

# jquery - jQuery 动画（{textIndent}）

> ID：13871015
> 
> 赞同：0
> 
> 时间：2012-12-14T00:38:29.257
> 
> 标签：jquery, jquery-animate

我有这个片段：

```
$(document).ready(function(){
$(".sidebar .nav li a.animate").hover(function(){
    $(this).animate({textIndent:"133"}, "fast")
}, function(){
    $(this).animate({textIndent:"27"}, "fast")
});
}); 
```

基本上它是菜单项的动画。它可以正常工作，但是如果您将鼠标从上到下传递并多次反转，您会注意到动画仍在进行的令人讨厌的延迟。

我怎样才能防止这种情况发生？我应该在事件触发后阻止它吗？解决这个问题的最佳方法是什么？:)

代码示例表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:42:44.687

添加一些[**stop()**](http://api.jquery.com/stop/)的：

```
$(document).ready(function(){
    $(".sidebar .nav li a.animate").on('mouseenter mouseleave', function(e){
        $(this).stop(true,true)
               .animate({textIndent: e.type=='mouseenter' ? 133 : 27}, "fast")
    });
}); 
```

# android - 可以将 CursorAdapter 与静态字符串数组结合使用吗？

> ID：13871017
> 
> 赞同：0
> 
> 时间：2012-12-14T00:38:33.920
> 
> 标签：android, mysql, simplecursoradapter, android-cursoradapter

免责声明：我不是要求有人为我做这项工作，只是要求最好的方法来完成这项工作。

我需要为页面上的 12 项列表显示两个数值。页面看起来像这样（仍在处理布局）
![布局](../Images/a93b3ec9f7b2c1221feb0938710b0c86.png)

我最初是从滚动视图以及每一行的相对布局构建的。我收到来自 Eclipse 的警告，该视图现在有 80 多个视图，并且会导致性能问题，因此我想通过光标适配器和单个列表行布局来执行此操作。

问题是，如果我在包含我想要提取的记录项目的数据库表上使用光标适配器，我只会得到用户已经为列表记录的项目列表。我想知道是否可以显示所有项目（从字符串数组或包含所有移动的另一个数据库表提供），然后从数据库中提取数字。（底部的按钮控制提取数据的距离）

我在想我也许可以使用自定义光标适配器，或者覆盖光标适配器上的绑定，但如果有人知道实现这一点的方法，我全都听好了！

我有一个包含所有动作的表，例如：

```
ID    moveName
----------------
1     Takedown
2     Sweep
3     Reversal 
```

ETC

我希望整个表填充列表视图（所以我得到 12 行）

然后让它从另一个表中提取#：

```
SELECT COUNT(moves) FROM movesHistory WHERE moveName = <name> AND date = NOW - <button pressed> 
```

这不是正确的 SQL 语法，只是演示了我会使用什么。我将把它包装在一个函数中，这样我就可以通过月份来查找用户何时按下底部的按钮。

我会使用类似的东西：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    // Get a cursor with all people
   Cursor c = myDB.rawQuery("SELECT ... FROM " + TableName , null);
    startManagingCursor(c);

    ListAdapter adapter = new SimpleCursorAdapter(this,
            // Use a template that displays a text view
            android.R.layout.simple_list_item_1,
            // Give the cursor to the list adatper
            c,
            // Map the NAME column in the people database to...
            new String[] {Contacts.DISPLAY_NAME},
            // The "text1" view defined in the XML template
            new int[] {android.R.id.text1});
    setListAdapter(adapter);
} 
```

**2012 年 12 月 14 日编辑：**

在阅读了另一个 SO 链接之后，这可以通过某种形式的 Join 轻松完成。我现在想弄清楚是否可以从 BJJ 名称表中选择所有记录，然后从另一个表中选择每种移动类型的总和。

是否可以从此表中选择所有行：
![bjj 动作](../Images/a1a4993b7d856b3b9d060d94f8497a16.png)

然后是该表的移动总数：
![巴西柔术历史](../Images/52ee9bd3d5678d5da51c2f8debd56f2e.png)

做这样的事情：

```
Name          Taps   Tapped
Takedown       0       0 
sweep          0       0
reversal       1       0
choke          2       1
arm lock       0       0
leg lock       0       1
guard pass     0       0
guard pull     0       1
back           0       0
sweep          1       0
throw          1       0
guard          1       0 
```

如果用户名在“反对”列中，则计为已点击，如果用户名在“按”列中，则移动将计为“点击”我正在阅读有关联接的信息，但嵌套选择，计数等现在让我有点困惑，因为我仅限于基本的选择/插入/更新/命令。

我找到了以下页面：[http ://www.w3resource.com/sql/aggregate-functions/sum-and-count-using-variable.php](http://www.w3resource.com/sql/aggregate-functions/sum-and-count-using-variable.php)

该列表在连接中使用计数和总和，但是当我尝试以下操作时出现错误： ![错误](../Images/54a5eff8af1747cb0a01f629fafe4a64.png)

**编辑#3**

**成功！**

这是 SQL 查询：

```
SELECT taps1.moveName, IFNULL( taps1.taps, 0 ) AS Taps  , IFNULL( tapped1.tapped, 0 ) AS Tapped 
FROM (

  SELECT bj.moveName, bh.taps
  FROM BJJ_moves bj
  LEFT JOIN (

    SELECT Move, SUM( MoveCount ) AS taps
    FROM BJJ
    WHERE MoveBy = '<NAME>'
    GROUP BY Move
  )bh ON bh.Move = bj.moveName
)taps1
LEFT JOIN (

  SELECT Move, SUM( MoveCount ) AS tapped
  FROM BJJ
  WHERE AGAINST = '<NAME>'
  GROUP BY Move
)tapped1 ON tapped1.Move = taps1.MoveName 
```

这是它生成的结果表（除了我已将其修改为将 NULL 变为 0，并更改列名）：
![结果表](../Images/da1e40f160edb8092ff3286cd43dd6f2.png)

我现在需要将此查询放入游标中，它将提供给列表视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:43:44.487

我完全赞成以“花哨的方式”做一些事情，但我发现如果您只是处理文本和静态数据（而不是大量数据），您可以放心地忽略“来自 Eclipse 的警告视图现在有 80 多个视图”。

您肯定会遇到将 1000 个项目加载到视图中的问题，这就是您想要使用列表视图的原因。但如果你有 100 台左右，甚至几百台，我认为大多数现代设备都可以跟上我所经历的一切。

话虽如此，如果您的应用程序将扩展或变得更加动态或图形密集，那么一定要注意这个警告。是的，您当然可以从数据库中提取这些数据，我建议使用带有 CursorLoader 的 ListView，当然还有嵌入式 android sql lite 数据库引擎。为此有很多很棒的教程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-15T20:17:41.520

所以我认为最终的结果将是一个带有以下 SQL 查询的 cursoradapter（后来是一个带有兼容性库的游标加载器，但我需要先阅读它们）：

```
SELECT taps1.moveName AS move, IFNULL(taps1.taps, 0) AS taps, IFNULL(tapped1.tapped,0) AS tapped
FROM (
  SELECT bj.moveName, bh.taps
  FROM BJJ_moves bj
  LEFT JOIN (
    SELECT Move, SUM( MoveCount) AS taps
    FROM BJJ
    WHERE MoveBy = 'Evan Richardson'
    AND Date > DATE_SUB(curdate(), INTERVAL <X> MONTH)
    GROUP BY Move
  )bh ON bh.Move=bj.moveName
)taps1
LEFT JOIN (
   SELECT Move, SUM(MoveCount) AS tapped
   FROM BJJ
   WHERE Against = 'Evan Richardson'
   AND Date > DATE_SUB(curdate(), INTERVAL <X> MONTH)
   GROUP BY Move
)tapped1 ON tapped1.Move = taps1.MoveName 
```

这给了我一个包含列表视图所需的 3 列的表格，然后可以使用适配器将其填充到列表中。将“X”替换为基于按下按钮的变量值。

谢谢大家！

# android - 刷新活动/ImageView？

> ID：13871026
> 
> 赞同：0
> 
> 时间：2012-12-14T00:40:06.577
> 
> 标签：android

在我的第一个活动中，我有一个按钮和一个 web 视图，当我单击该按钮时，它会打开一个新活动，其中包含图像视图中 web 视图的内容。（我在位图中转换 webview 并用这个位图设置 imageview）。

问题是当我第一次单击按钮时，什么也没有发生，我的屏幕保持白色。但是，如果我回到第一个活动并重新单击按钮，则图像视图会很好地显示。

为什么第一次没有显示imageview？我是否需要刷新我的第二个活动或 Imageview 之类的东西？

WebViewActivity.java

```
public class WebViewActivity extends Activity {

    private WebView webView;
    ImageView imageView;
    Button button;

    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
       setContentView(R.layout.webview);

       webView = (WebView) findViewById(R.id.webView1);
       webView.getSettings().setJavaScriptEnabled(true);
       String customHtml = "<BODY BACKGROUND=\"pic_10.jpg\"><BODY><div style=\"position: absolute; bottom: 0; width: 100%\"><div style=\"padding:24px 0 0;margin:0;height:40px;background:transparent;position:relative;\"><a href=\"http://www.amazon.com\" style=\"padding:0 140px 0 0;margin:0;height:40px;display:block;text-decoration:none;overflow:hidden;background:#fff;\" target=\"_blank\"><span style=\"padding:0 0 0 40px;margin:0;display:block;overflow:hidden;background:transparent url(http://ads.gumgum.com/com/gumgum/tests/amazon.png) no-repeat scroll left center;\"><p style=\"padding:0;margin:0;font:bold 12px/16px Arial;color:#000;text-decoration:underline;display:block;height:16px;overflow:hidden;text-align:left;padding:2px 0;word-wrap:break-word;\">HBase Administration Cookbook</p><p style=\"padding:0;margin:0;font:italic 12px/16px Arial;color:#c60;text-decoration:none;display:block;height:16px;overflow:hidden;text-align:left;word-wrap:break-word;\">www.amazon.com</p></span><span style=\"position:absolute;bottom:0;right:70px;overflow:hidden;\"><img src=\"http://ecx.images-amazon.com/images/I/41OEZDHmUoL._SL75_.jpg\" style=\"border:none;max-width:64px;*width:64px;height:64px;\"></span></a></div></div>";

       webView.loadDataWithBaseURL("file:///android_asset/", customHtml , "text/html", "utf-8", null);

       button = (Button) findViewById(R.id.btnChangeImage);

    }

    public void sendMessage(View view) {

           webView.setWillNotCacheDrawing(false);
           webView.destroyDrawingCache();
           webView.setDrawingCacheEnabled(true);
           webView.measure(MeasureSpec.makeMeasureSpec(480, MeasureSpec.EXACTLY), 
                    MeasureSpec.makeMeasureSpec(800, MeasureSpec.EXACTLY));
           webView.layout(0, 0,  webView.getMeasuredWidth(),  webView.getMeasuredHeight());

            webView.buildDrawingCache(true);
        Bitmap bmap = Bitmap.createBitmap(webView.getDrawingCache());
        webView.destroyDrawingCache();
        //imageView.setMaxHeight(55);
        //imageView.setMaxWidth(20);
        Bitmap bmap_New = scaleDownBitmap(bmap,400,this);
        Intent intent = new Intent(this, ImageViewActivity.class);
        intent.putExtra("BitmapImage", bmap_New);
        startActivity(intent);
    }

     public static Bitmap scaleDownBitmap(Bitmap photo, int newHeight, Context context) {

         final float densityMultiplier = context.getResources().getDisplayMetrics().density;        

         int h= (int) (newHeight*densityMultiplier);
         int w= (int) (h * photo.getWidth()/((double) photo.getHeight()));

         photo=Bitmap.createScaledBitmap(photo, w, h, true);

         return photo;
         } 
```

ImageViewActivity.java

```
 public class ImageViewActivity extends Activity {

    ImageView imageView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_image_view);

        imageView = (ImageView) findViewById(R.id.imageView1);
        Intent intent = getIntent();
        Bitmap bmp = (Bitmap)intent.getParcelableExtra("BitmapImage");
        imageView.setImageBitmap(bmp);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_image_view, menu);
        return true;
    }

} 
```

我不知道它是否已链接，但是当我启动我的应用程序时，我的 catlog 中有这个：

```
E/chromium(32671): external/chromium/net/disk_cache/stat_hub.cc:190: [1214/103321:ERROR:stat_hub.cc(190)] StatHub::Init - App com.example.androidtestadserver isn't supported. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:59:31.463

我强烈推荐一种不同的方法。
通过意图传递整个位图需要大量内存，并且不能在旧手机上运行，​​比如说 SDK 2.3。
尝试将位图作为 byteArray 传递并构建它以在下一个活动中显示。如果你想在活动之间传递它，我会将它存储在一个文件中。这样效率更高，工作量也更少。您可以使用 MODE_PRIVATE 在数据文件夹中创建任何其他应用程序都无法访问的私有文件。
顺便说一句，以下对我有用：

```
public void sendMessage(View view) {

       webView.setWillNotCacheDrawing(false);
       webView.destroyDrawingCache();
       webView.setDrawingCacheEnabled(true);
       webView.measure(MeasureSpec.makeMeasureSpec(480, MeasureSpec.EXACTLY), 
                MeasureSpec.makeMeasureSpec(800, MeasureSpec.EXACTLY));
       webView.layout(0, 0,  webView.getMeasuredWidth(),  webView.getMeasuredHeight());

        webView.buildDrawingCache(true);
    Bitmap bmap = Bitmap.createBitmap(webView.getDrawingCache());
    webView.destroyDrawingCache();
    //imageView.setMaxHeight(55);
    //imageView.setMaxWidth(20);
    Bitmap bmap_New = scaleDownBitmap(bmap,400,this);
    Intent intent = new Intent(this, ImageViewActivity.class);
    //Bitmap b; // your bitmap
    ByteArrayOutputStream bs = new ByteArrayOutputStream();
    bmap_New.compress(Bitmap.CompressFormat.PNG, 50, bs);
    intent.putExtra("BitmapImage", bs.toByteArray());
    //intent.putExtra("BitmapImage", bmap_New);
    startActivity(intent);
} 
```

接收：

```
public class ImageViewActivity extends Activity {

    ImageView imageView;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_image_view);

        Log.d("ImageViewActivity", "Oncreate");

        imageView = (ImageView) findViewById(R.id.imageView1);
        //Intent intent = getIntent();
        //Bitmap bmp = (Bitmap)intent.getParcelableExtra("BitmapImage");
        if( getIntent().getExtras() != null ){
            Bitmap b = BitmapFactory.decodeByteArray(
                    getIntent().getByteArrayExtra("BitmapImage"),0,getIntent().getByteArrayExtra("BitmapImage").length);  
            imageView.setImageBitmap(b);

        }
        else{
            Log.d("ImageViewActivity", "null");
        }

    }

} 
```

# php - php中通过$_GET请求传递名称后如何逐行读取文件

> ID：13871030
> 
> 赞同：-2
> 
> 时间：2012-12-14T00:40:32.583
> 
> 标签：php

我想通过 GET 请求将文件名传递给 php 脚本。我会想到以下代码：

```
<?php

$myFile = $_GET['filename'];

$file = fopen($myFile, "r");

while (!feof($myFile))
{
   $currentLine = fgets($myFile);
   print $currentLine;
}

?> 
```

会工作，但事实并非如此。我收到以下消息重复无数次：

```
Warning: feof() expects parameter 1 to be resource, string given in /Library/WebServer/Documents/maps/getFile.php on line 7

Warning: fgets() expects parameter 1 to be resource, string given in /Library/WebServer/Documents/maps/getFile.php on line 9 
```

我知道我应该将我的 open 和 while 循环包装在一个 IF 语句周围，以防止可能打开不存在的文件，但我发送的文件 EXISTS。好像我不能用 GET 请求做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:42:32.407

您需要用作和`$file`的参数。 代表您的文件句柄资源。只是一个带有您的文件名的字符串。`feof()``fgets()``$file``$myFile`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:45:03.890

尝试

```
while (!feof($file ))
{
   $currentLine = fgets($file );
   print $currentLine;
} 
```

# postgresql - 将 Postgres hstore 与 celery 一起使用？

> ID：13871031
> 
> 赞同：1
> 
> 时间：2012-12-14T00:40:41.897
> 
> 标签：postgresql, celery, django-celery, hstore

是否可以（和/或有效）使用 Postgres 的 hstore 作为 celery 的代理？

我被限制（没有一些非常令人信服的理由）使用 Postgres 数据库。我有一个带有芹菜任务的 django 应用程序。目前我正在使用标准数据库支持，但 celery 文档强烈建议不要使用这种方法来处理非常小的任务队列之外的任何事情。当我遇到一些关于 Postgres 的 hstore 功能的信息以及它提供与 redis 等效功能的建议时，我正在考虑安装 redis。

不过，我还没有看到任何关于将 hstore 专门用于 celery 的信息，如果它真的可以替代 redis，这似乎很奇怪。查看
[https://github.com/celery/celery/blob/master/celery/backends/base.py](https://github.com/celery/celery/blob/master/celery/backends/base.py)
上的 celery 后端代码， 看起来基本的 celery KeyValueStoreBackend 是一个非常简单的 api：

```
def get(self, key):
    raise NotImplementedError('Must implement the get method.')

def mget(self, keys):
    raise NotImplementedError('Does not support get_many')

def set(self, key, value):
    raise NotImplementedError('Must implement the set method.')

def delete(self, key):
    raise NotImplementedError('Must implement the delete method')

def incr(self, key):
    raise NotImplementedError('Does not implement incr') 
```

但在我可能花大量时间在这之前，似乎值得问一下我是否遗漏了一些反对使用 hstore 实现这个 API 并将其用作 celery 后端的东西。

例如。celery 是否具有此 API 未捕获的要求（例如原子性、可伸缩性、负载下的可靠性）？使用 hstore 实现这一点会不会对现有的数据库后端提供实质性的改进？我对芹菜相当陌生，从未使用过 hstore，所以我不确定我忽略了什么（如果有的话）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:54:53.873

`hstore`绝对不提供“与 redis 等效的功能”。

字段不是字段中的`hstore`键值数据库。试图以这种方式使用它会导致痛苦和糟糕的表现。*每次*更新都必须重写包含该字段的*整个*记录​​。此外，与关系数据库中的任务队列相同的挑战也适用于，这意味着您最多可以获得单个工作人员的性能，即使表面上看起来像您一样，您也不会获得并发性。`hstore`*`hstore`*

 *All `hstore`is 是数据库字段中的哈希映射。它非常有用，但并不神奇，它不会让您摆脱使用 RDBMS 进行消息队列的潜在挑战。

如果需要消息队列，请使用消息队列。[PGQ](http://wiki.postgresql.org/wiki/PGQ_Tutorial)是一个不错的选择。或者查看 ZeroMQ 等专用消息队列工具。*

# jquery - jquery modal 弹出锁定字段

> ID：13871032
> 
> 赞同：2
> 
> 时间：2012-12-14T00:40:43.350
> 
> 标签：jquery, asp.net-mvc, razor

我有在 ie 和 chrome 上运行良好的 jquery 模态弹出窗口，但所有输入字段都被锁定在 Firefox 中，任何输入都将不胜感激。谢谢

project:mvc/razor 这里是调用对话框的代码

```
@Ajax.ActionLink("AddBulk", "BulkDialog", "controller", 
    new {disId = disId }, 
    new AjaxOptions { HttpMethod = "get", UpdateTargetId = "gcd", OnSuccess = " function() { $('#gcd').dialog({modal:true, dialogClass: 'gDialog', closeOnEscape: false, resizable: false, width:428,height:400});}" }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T07:27:22.257

我从不喜欢@Ajax 助手，而是更喜欢简单地编写 jQuery 代码，例如：

```
<div id="gcd"></div>
    <a id="AddBulkLink">AddBulk</a>

    <script language="javascript" type="text/javascript">
    $('#AddBulkLink').click(function(){        
         $('#gcd').load("controller/BulkDialog?disId =@disId") //mix of js and razor    
         $( "#gcd").dialog( "open" );
    })

    $('#gcd').dialog({
                 autoOpen: false, // So opens when link clicked
                 modal: true,
                 dialogClass: 'gDialog',
                 closeOnEscape: false,
                 resizable: false,
                 width: 428,
                     height: 400
                 });
    </script> 
```

在我看来，这种方式更容易和可追溯

# cocos2d-x - Cocos2d x 如何使用纹理打包器创建 CCMenuItemImage

> ID：13871033
> 
> 赞同：1
> 
> 时间：2012-12-14T00:40:43.177
> 
> 标签：cocos2d-x, texturepacker

我正在使用[TexturePacker](http://www.codeandweb.com/texturepacker)来打包我的精灵。然后我尝试使用它，但我不知道如何使用该精灵表创建 CCMenuImageItem。原因 CCMenuImageItem::create 已定义为：

```
CCMenuItemImage * CCMenuItemImage::itemWithNormalImage(const char *normalImage, const char *selectedImage)

CCMenuItemImage * CCMenuItemImage::create(const char *normalImage, const char *selectedImage)

CCMenuItemImage * CCMenuItemImage::itemWithNormalImage(const char *normalImage, const char *selectedImage, CCObject* target, SEL_MenuHandler selector)

CCMenuItemImage * CCMenuItemImage::create(const char *normalImage, const char *selectedImage, CCObject* target, SEL_MenuHandler selector)

CCMenuItemImage * CCMenuItemImage::itemWithNormalImage(const char *normalImage, const char *selectedImage, const char *disabledImage, CCObject* target, SEL_MenuHandler selector)

CCMenuItemImage * CCMenuItemImage::create(const char *normalImage, const char *selectedImage, const char *disabledImage, CCObject* target, SEL_MenuHandler selector) 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:04:17.863

当你使用 TexturePacker 时，你会得到一个 plist 文件。然后在您的代码中，您应该首先加载资源。

```
CCSpriteFrameCache::sharedSpriteFrameCache()->addSpriteFramesWithFile("yourTexture.plist"); 
```

然后，从文件中读取资源

```
CCMenuItemImage * item = CCMenuItemImage::itemWithNormalImage(const char *normalImage, const char *selectedImage); 
```

希望它会有所帮助:)。

# visual-studio-2010 - 时间：2019-05-10 标签：c#addressingtextboxforWRITEonform从功能元素

> ID：13871034
> 
> 赞同：0
> 
> 时间：2012-12-14T00:40:50.197
> 
> 标签：visual-studio-2010, c#-4.0

我试图了解 OO 和 C#，虽然我已经搜索过，但我找不到答案，希望这里有人可以提供帮助。

我有一个表单（public Form_DaRT_BOM_Main()），上面有一个文本框（textBox1）。这些驻留在 MSVS2010 生成的文件中。

```
namespace DaRT_BOM
{
  public partial class Form_DaRT_BOM_Main : Form
  {
    public Form_DaRT_BOM_Main()
  }
} 
```

我在 Program.cs 中有自己的函数，位于

```
public static class GeneralFunctions
{
} 
```

我正在尝试将文本写入文本框中，但看不到应该如何解决。

目前我有：

```
public static String SplitFile(String FileToSplit)
  {
    String line;
    using (StreamReader reader = new StreamReader(FileToSplit))
    {
      line = reader.ReadLine();
      Form_DaRT_BOM_Main.textBox1 = line;
    }

    return null;
  } 
```

在尝试使用文本框进行输出之前，我正在使用 MessageBox 进行测试，并且效果很好。

我现在得到的是编译错误：

非静态字段、方法或属性需要对象引用

这表明我没有正确处理文本框。

请原谅米老鼠的元素，但我仍在努力理解……老狗和新把戏综合症。

感谢期待。

史蒂夫。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:51:47.223

例如，在某些情况下或在构造函数中，您需要对表单的引用或访问表单中的 textbox1。例如：

```
//在表单内部（在事件或构造函数中）。
this.textbox1.Text = GeneralFunctions.SplitFile(some_parameter_here);

```

如果您想从静态类访问表单 - 将其设为单例或创建一些静态属性，该属性将包含对实际表单的引用。

# c - OpenCL：私有内存的目的和有效用途是什么？

> ID：13871035
> 
> 赞同：3
> 
> 时间：2012-12-14T00:40:55.577
> 
> 标签：c, memory, opencl

我了解本地内存（我认为）：通过将部分从全局复制到本地，您可以允许工作组更快地访问片上 SRAM 中的数据。

那么私有内存有什么用呢？我读过它是片外的，例如全局内存的保留部分。所以它不会比本地更快。它是为我相信的每个工作项目保留的（或者在硬件中，一个 SIMD 通道）。

随意举一个可能有助于我理解的例子。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:41:52.020

私有内存有两种用途：

*   **快速存储**（一种**寄存器**/ **L1 缓存**），如果它足够小，比本地内存快

*   **如果所有私有数据既不能放入寄存器也不能放入本地内存，则在每个工作项的**全局内存中进行****私有存储****

# jquery - 自定义方法来检查子 div 是否有类 - jquery 验证

> ID：13871038
> 
> 赞同：1
> 
> 时间：2012-12-14T00:41:15.703
> 
> 标签：jquery, html, css, validation, plugins

我整天都在与自定义验证作斗争，我认为是时候寻求帮助了。

当您将用户添加到事件时，我构建的是类似于 facebook 的选择用户界面。我正在尝试构建一个函数，如果没有选择任何用户，它将返回错误。我遇到的问题是父 div 需要像表单元素一样对待，但我可以找到有关如何执行此操作的任何信息。

我在制作 JSfiddle 时想到了另一个想法。我将用户 ID 存储在一个数组中。也许验证可以检查一个空数组？我也不知道该怎么做，或者哪​​种方式是理想的..

这是一个可以玩的小提琴：http: [//jsfiddle.net/7neCU/1/](http://jsfiddle.net/7neCU/1/)

这是我到目前为止所尝试的。

```
 $.validator.addMethod('require-one-div', function (element) {
        if ($('#trainees').children('.each_user').hasClass('selected'))
            return true;
        }, "Please select at least 1 trainee"); 
```

和规则

```
 rules: {
            trainees:{
                'require-one-div':true
            },
        } 
```

我还为父 div 提供`#trainees`了名称和 ID“受训者”以及所需的类别。

感谢您的任何建议或想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:06:23.867

jQuery Validate 不支持`section`. 它是一个表单插件。所以你必须使用`input`, `textarea`, `select`.

正如评论中所建议的，您可能需要一些东西：

1.  创建一个隐藏的复选框组或单选组
2.  将您的个人资料的点击挂钩到每个复选框或收音机
3.  调用 validate ，但确保指定`ignore: ''`，否则 validate 将忽略任何隐藏的表单字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T17:26:01.690

嗯....不是 100% 确定这个验证插件是如何工作的。但是一种方法可以简单地将其作为“验证”步骤来完成。

```
$.validator.addMethod('require-one-div', function (element) {
    return $('#trainees .each_user.selected').length;
}, "Please select at least 1 trainee"); 
```

基本上它说，如果有 0`.selected`个 .each_user div，验证将返回 0（假）。如果至少有一个， .length >= 1 是真实的，这意味着验证通过。如果验证结果相反，只需加上 ! 在长度检查前`!$('#trainees .each_user.selected').length`

# jquery - 一起使用 XSLT 和 jQuery

> ID：13871042
> 
> 赞同：0
> 
> 时间：2012-12-14T00:41:44.517
> 
> 标签：jquery, html, xml, xslt

我正在使用 XSLT 将 xml 文件转换为 html，以便可以在浏览器中查看。

我的 XSL 文件基本上定义了许多表（从我的 XML 文件中填充）。

我的 HTML 文件如下所示：

```
<html>
<head>
<title>My Title</title>   
<script type="text/javascript">
<!--
    function applyXSLT()
    {       
             // do transfrom
             resultdiv.innerHTML = transformResults;
    }
//-->   

</script>
</head>
<body class="main" onLoad="applyXSLT()">
<div id="resultdiv"></div>
</body>
</html> 
```

此时一切正常。现在我想使用 jQuery 来帮助对表格进行排序。

我的问题是我该怎么做？我在哪里放 jQuery 的东西？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:07:02.590

一种排序方法是使用 xslt 模板对 xml 数据进行排序，这就是在 xslt 中排序的方式：

```
 <xsl:sort select="Name" order="ascending" data-type="text"/> 
```

然后您需要根据列动态更改排序字段。

其他方法是使用一些插件对 UI、jquery 数据表、tablesorter 等进行排序。

# java - PropertyPlaceholderConfigurers 的初始化顺序（Spring 3）

> ID：13871044
> 
> 赞同：1
> 
> 时间：2012-12-14T00:41:54.177
> 
> 标签：java, spring, properties

在我基于 Spring 的 Web 应用程序中，我需要将加密值存储在属性文件中。为此，我对 Spring“PropertyPlaceholderConfigurer”类进行了子类化，并重写了它的“convertProperties”方法，以便在从文件加载属性后，它会解密那些被加密的属性。这很好用。

现在，这个 PPC 依赖于 Spring 上下文中处理加密/解密任务的另一个 bean。目前，这个 bean 必须在 Spring 上下文 XML 文件中使用“硬编码”的值进行配置。我想通过 PPC 从属性文件中提取这些值，但是这样做会产生循环依赖（解密器无法从 PPC 接收需要解密器完成其工作的信息......）。

所以......我想我会做的是创建2个属性文件：一个用于加密的东西，另一个用于明文的东西。然后，我会创建两个 PPC——一个是普通的，一个是我的子类设计来处理加密的内容。这样，我可以将解密器的配置选项放入明文属性文件中！

不幸的是，我似乎对 Spring 初始化项目的顺序有疑问。这是我在 XML 中设置的示例：

```
<bean id="clearTextPlaceholder" class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="ignoreUnresolvablePlaceholders" value="true" />
    <property name="location" value="clear.properties" />
</bean>

<bean id="encryptedPlaceholder" class="com.mycompany.EncryptedPlaceholderConfigurer">
    <property name="ignoreUnresolvablePlaceholders" value="true" />
    <property name="location" value="encrypted.properties" />
    <property name="encryption" ref="encrypter" />
</bean>

<bean id="encrypter" class="com.mycompany.Encrypter">
    <property name="someOption" value="${plain-text-property}" />
</bean> 
```

所以在这种情况下，我希望 Spring 首先初始化“clearTextPlaceholder”bean。然后，使用它读取的属性，初始化“加密器”bean。最后，使用它初始化“encryptedPlaceholder” bean，以供上下文中的所有其他项目使用。

然而，真正发生的是，在启动时，“加密器”bean 被传递了一个文字“${plain-text-property}”字符串，然后，两个 PPC 都初始化（或尝试，在它由于错误配置的加密器 bean）。

我尝试将“依赖”属性添加到相关 bean 以强制执行初始化顺序，但无济于事。似乎 Spring 想要立即创建所有已定义的 PPC，并且由于其中一个依赖于另一个 bean，这意味着它们都必须等到另一个 bean 被初始化。

那有意义吗？有什么我可以在这里做的（除了使用上下文感知的东西来解决问题）来完成这项工作，还是这只是 Spring 的限制？当我在做的时候，有没有更好的方法来解决这个我没有看到的？

谢谢，

道格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T03:38:59.063

我复制了您的情况-是的，它完全按照您的描述工作。您的两个 PropertyPlaceHolderConfigurer 都是 BeanPostProcessor。在启动期间，Spring 创建所有 BeanPostProcessor bean。然后它调用它们。`order`您可以通过设置属性来更改调用顺序。然而，它总是在调用任何处理器之前完成所有处理器的创建——即使是最低优先级。

通过添加对`encrypter`bean的引用，`encryptedPlaceHolder`您`encrypter`进入了这个较早的阶段。`encrypter`在 BeanPostProcessor 创建阶段创建，该阶段发生在可以调用任何处理器之前 - 也就是说，在可以解析任何属性之前。

据我所知，您不能让 PropertyPlaceHolderConfigurer 处理作为另一个 PropertyPlaceHolderConfigurer 依赖项的 bean 的属性。

> 当我在做的时候，有没有更好的方法来解决这个我没有看到的？

[更新]

一种解决方案是让它`encrypter`足够聪明，可以直接读取属性文件。一种更“依赖注入友好”的方式是创建一个自定义工厂 bean。参考见[http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-factory-class-instance-factory-method](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-factory-class-instance-factory-method)

```
<bean id="encrypter" factory-bean="encrypterFactory" factory-method="createInstance">
</bean>

<bean id="encrypterFactory" class="com.mycompany.EncrypterFactory" init-method="init">
   <property name="location" value="clear.properties"/>
</bean> 
```

工厂 bean 可能如下所示：

```
public class EncrypterFactory
{
   Properties properties;
   File file;

   public void setLocation(String fileName)
   {
      this.file = new File(fileName);
   }
   public void init() throws IOException
   {
      properties = new Properties();
      properties.load(new FileReader(file));
   }

   public Encrypter createInstance()
   {
      Encrypter encrypter = new Encrypter();
      encrypter.setSomeOption(properties.getProperty("plain-text-property"));
      return encrypter;
   }
} 
```

即使您必须创建一个新的、特殊用途的工厂 bean，也不需要对现有的加密器类进行任何更改。

# java - Spring 项目突然无法加载上下文 - 没有代码更改

> ID：13871045
> 
> 赞同：3
> 
> 时间：2012-12-14T00:41:56.050
> 
> 标签：java, spring, jpa, namespaces

我正在开发一个使用 Spring Data JPA 的 Spring 3 应用程序。

昨天，该项目在 TeamCity 中构建良好，但今天构建在本地和构建服务器上失败*，没有代码更改*。

堆栈跟踪提到了命名空间处理程序。这是配置文件的命名空间部分：

```
<beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:jpa="http://www.springframework.org/schema/data/jpa"
   xmlns:context="http://www.springframework.org/schema/context"
   xmlns:task="http://www.springframework.org/schema/task"
   xsi:schemaLocation="http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.1.xsd
       http://www.springframework.org/schema/data/jpa http://www.springframework.org/schema/data/jpa/spring-jpa-1.1.xsd
    http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
    http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
    http://www.springframework.org/schema/task http://www.springframework.org/schema/task/spring-task-3.1.xsd"> 
```

Spring 是否更改了一些 XSD 文件？

欢迎任何建议。

堆栈跟踪是：

```
INFO : org.springframework.beans.factory.xml.XmlBeanDefinitionReader - Loading XML bean definitions from class path resource [core-jpa-context.xml]
INFO : org.springframework.context.annotation.ClassPathBeanDefinitionScanner - JSR-330 'javax.inject.Named' annotation found and supported for component scanning
ERROR: org.springframework.test.context.TestContextManager - Caught exception while allowing TestExecutionListener [org.springframework.test.context.support.DependencyInjectionTestExecutionListener@1bfd9cd5] to prepare test instance [au.com.intellibill.services.event.EventServiceTest@3341b736]
java.lang.IllegalStateException: Failed to load ApplicationContext
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:157)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:109)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:75)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:321)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:211)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner$1.runReflectiveCall(SpringJUnit4ClassRunner.java:288)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.methodBlock(SpringJUnit4ClassRunner.java:290)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.runChild(SpringJUnit4ClassRunner.java:231)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.springframework.test.context.junit4.statements.RunBeforeTestClassCallbacks.evaluate(RunBeforeTestClassCallbacks.java:61)
    at org.springframework.test.context.junit4.statements.RunAfterTestClassCallbacks.evaluate(RunAfterTestClassCallbacks.java:71)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.run(SpringJUnit4ClassRunner.java:174)
    at org.junit.runner.JUnitCore.run(JUnitCore.java:157)
    at com.intellij.junit4.JUnit4IdeaTestRunner.startRunnerWithArgs(JUnit4IdeaTestRunner.java:76)
    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:195)
    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:63)
Caused by: org.springframework.beans.factory.BeanDefinitionStoreException: Unexpected exception parsing XML document from class path resource [core-jpa-context.xml]; nested exception is org.springframework.beans.FatalBeanException: Invalid NamespaceHandler class [org.springframework.data.jpa.repository.config.JpaRepositoryNameSpaceHandler] for namespace [http://www.springframework.org/schema/data/jpa]: problem with handler class file or dependent class; nested exception is java.lang.NoClassDefFoundError: Could not initialize class org.springframework.data.jpa.repository.config.JpaRepositoryConfigDefinitionParser
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:412)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:334)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.loadBeanDefinitions(XmlBeanDefinitionReader.java:302)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:174)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:209)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:180)
    at org.springframework.beans.factory.support.AbstractBeanDefinitionReader.loadBeanDefinitions(AbstractBeanDefinitionReader.java:243)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadBeanDefinitions(AbstractGenericContextLoader.java:205)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:100)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:1)
    at org.springframework.test.context.support.DelegatingSmartContextLoader.loadContext(DelegatingSmartContextLoader.java:228)
    at org.springframework.test.context.TestContext.loadApplicationContext(TestContext.java:124)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:148)
    ... 22 more
Caused by: org.springframework.beans.FatalBeanException: Invalid NamespaceHandler class [org.springframework.data.jpa.repository.config.JpaRepositoryNameSpaceHandler] for namespace [http://www.springframework.org/schema/data/jpa]: problem with handler class file or dependent class; nested exception is java.lang.NoClassDefFoundError: Could not initialize class org.springframework.data.jpa.repository.config.JpaRepositoryConfigDefinitionParser
    at org.springframework.beans.factory.xml.DefaultNamespaceHandlerResolver.resolve(DefaultNamespaceHandlerResolver.java:139)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1418)
    at org.springframework.beans.factory.xml.BeanDefinitionParserDelegate.parseCustomElement(BeanDefinitionParserDelegate.java:1413)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.parseBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:184)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.doRegisterBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:140)
    at org.springframework.beans.factory.xml.DefaultBeanDefinitionDocumentReader.registerBeanDefinitions(DefaultBeanDefinitionDocumentReader.java:111)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.registerBeanDefinitions(XmlBeanDefinitionReader.java:493)
    at org.springframework.beans.factory.xml.XmlBeanDefinitionReader.doLoadBeanDefinitions(XmlBeanDefinitionReader.java:390)
    ... 34 more
Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.springframework.data.jpa.repository.config.JpaRepositoryConfigDefinitionParser
    at org.springframework.data.jpa.repository.config.JpaRepositoryNameSpaceHandler.init(JpaRepositoryNameSpaceHandler.java:34)
    at org.springframework.beans.factory.xml.DefaultNamespaceHandlerResolver.resolve(DefaultNamespaceHandlerResolver.java:130)
    ... 41 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:47:02.717

Springsource 昨晚发布了 3.2.0，他们显然改变了一些破坏我构建的 XSD。

解决方案是升级到 3.2.0（我在 3.1.3 上），神奇地一切都恢复了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-11T10:17:01.243

这似乎是 JPA 与 Spring 和 Spring Data Commons Core 之间的版本不匹配问题。我遇到了类似的错误

```
 Invalid NamespaceHandler class [org.springframework.data.jpa.repository.config.JpaRepositoryNameSpaceHandler] 
 for namespace [http://www.springframework.org/schema/data/jpa]: problem with handler class file or dependent class; 
 nested exception is java.lang.NoClassDefFoundError: org/springframework/data/repository/config/RepositoryConfigurationExtension 
```

我更改并介绍的条目如下。请注意每个模式的版本。

```
 <?xml version="1.0" encoding="UTF-8"?>
   <beans xmlns="http://www.springframework.org/schema/beans"
   xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
   xmlns:jpa="http://www.springframework.org/schema/data/jpa"
   xmlns:tx="http://www.springframework.org/schema/tx"
   xmlns:context="http://www.springframework.org/schema/context"
   xsi:schemaLocation="http://www.springframework.org/schema/beans
   http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
   http://www.springframework.org/schema/data/jpa
   http://www.springframework.org/schema/data/jpa/spring-jpa-1.2.xsd
   http://www.springframework.org/schema/tx
   http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
   http://www.springframework.org/schema/context
   http://www.springframework.org/schema/context/spring-context-3.1.xsd"> 
```

Spring 和 JPA 版本是 3.1.3.RELEASE。我将 Spring 版本降级为 3.1.2.RELEASE 并解决了问题。但是根据其他依赖关系，相同的解决方案可能会或可能不会起作用。其他依赖版本如下

```
 <spring.version>3.1.2.RELEASE</spring.version>
  <spring-data-jpa.version>1.2.0.RELEASE</spring-data-jpa.version>
  <spring-data-commons-core.version>1.4.0.RELEASE</spring-data-commons-core.version> 
```

# jboss - 在 JBoss 7.1.1 中指定访问日志目录

> ID：13871046
> 
> 赞同：0
> 
> 时间：2012-12-14T00:42:01.867
> 
> 标签：jboss, jboss7.x

如何在 JBoss 7.1.1 中指定访问日志目录？目前正在 JBOSS-HOME/standalone/log/default-host 目录中创建访问日志，我希望它位于 JBOSS-HOME/standalone/log 目录中吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T18:57:33.107

对于访问日志，您只需要在元素中指定一个`.`（点） 。`path`

```
<subsystem xmlns="urn:jboss:domain:web:1.1" default-virtual-server="default-host" native="false">
    <connector name="http" protocol="HTTP/1.1" scheme="http" socket-binding="http"/>
    <virtual-server name="default-host" enable-welcome-root="true">
        <alias name="localhost"/>
        <access-log rotate="true">
            <directory path="." relative-to="jboss.server.log.dir"/>
        </access-log>
    </virtual-server>
</subsystem> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T07:27:21.490

gaara 给出的解决方案的一部分，它是有效的，您也可以保留默认的standalone.xml：

```
<file relative-to="jboss.server.log.dir" path="server.log"/> 
```

并在启动脚本中设置JBoss环境属性jboss.server.log.dir，例如：

./standalone.sh -Djboss.server.log.dir=$JBOSS_HOME/standalone/log

~~（甚至更好：将其添加到您自己的启动脚本的 JAVA_OPTS 中）。~~

（甚至更好：将其添加到standalone.conf 的JAVA_OPTS 中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T07:08:20.510

您可以像下面这样更新“standalone.xml”文件，重点是“文件相对”

```
<subsystem xmlns="urn:jboss:domain:logging:1.1">
        <console-handler name="CONSOLE">
            <level name="INFO"/>
            <formatter>
                <pattern-formatter pattern="%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n"/>
            </formatter>
        </console-handler>
        <periodic-rotating-file-handler name="FILE">
            <formatter>
                <pattern-formatter pattern="%d{HH:mm:ss,SSS} %-5p [%c] (%t) %s%E%n"/>
            </formatter>
            <file relative-to="jboss.server.base.dir" path="/log/server.log"/>
            <suffix value=".yyyy-MM-dd"/>
            <append value="true"/>
        </periodic-rotating-file-handler>
        <logger category="com.arjuna">
            <level name="WARN"/>
        </logger>
        <logger category="org.apache.tomcat.util.modeler">
            <level name="WARN"/>
        </logger>
        <logger category="sun.rmi">
            <level name="WARN"/>
        </logger>
        <logger category="jacorb">
            <level name="WARN"/>
        </logger>
        <logger category="jacorb.config">
            <level name="ERROR"/>
        </logger>
        <root-logger>
            <level name="INFO"/>
            <handlers>
                <handler name="CONSOLE"/>
                <handler name="FILE"/>
            </handlers>
        </root-logger>
    </subsystem> 
```

# javascript - 基于另一个文本框值的 Javascript 输出到文本框

> ID：13871057
> 
> 赞同：0
> 
> 时间：2012-12-14T00:43:09.573
> 
> 标签：javascript, forms, search, textbox, output

我正在尝试创建一个 javascript 表单，其中有一个将单词输出到文本框中的输入，然后根据该框中某些单词（不是确切的短语）的存在，在另一个文本框中有第二个输出。我有一种感觉，它可能需要一个 .search 命令和一些与正则表达式有关的东西，但我正在努力弄清楚如何实现它。

以下不是最终实现，而是相同想法的示例形式：

```
<html>
<head>
<script type="text/javascript">

function calculate(){

var input = document.input.value;
var output1 = document.output1.value;

if (input = 1){
output1 = "x type 1";
}

else if (input = 2){
output1 = "y type 1";
}

else if (input = 3){
output1 = "y type 2";
}

if (output1.search("type 1"){
document.output2.value = "z";
}

}
</script>
</head>
<body>
<form>
Input<input type="textbox" name="input"><br>
<input type="button" onclick="calculate()" value="Calculate" /><br>
<textarea rows="2" name="output1" ></textarea>
<textarea rows="2" name="output2" ></textarea>
</form>
</body>
</html> 
```

所以我试图让函数搜索文本框“output1”，如果它在这个例子中包含“type 1”这个词，那么它会在文本框“output2”中输出一些东西。我不认为作为输入的结果的 output1 在这个例子中起作用（不知道为什么），但我主要是想根据 box output1 中包含的单词来计算 output2。

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T00:48:29.593

我猜你要找的是[`String.indexOf()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/indexOf). 例子：

```
var input = 'here i have some words';
var out;

if (input.indexOf('some') !== -1) {
    out = 'I have some in input!';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-01T05:52:23.210

您的代码有几个错误标记以下错误：

1.  `document.input.value`代替`document.getElementById("input").value`
2.  `var output1 = document.output1.value;`代替`var output1;`
3.  总之如果方法改变`input = 1`而不是`input == 1`
4.  改变`document.output2.value`而不是`document.getElementsByName("output2").value`
5.  添加`document.getElementsByName("output1").value=output1;`设定值
6.  添加元素`id`_`html`

**我曾经从 id 获取元素，所以如果您使用其他方式学习 javaScript，则添加到 html 元素中**

我认为你应该[好好学习 JavaScript](http://www.w3schools.com/js/default.asp)。

重新格式化您的代码，您编写了 systex 很多错误，我已修复并遵循完整代码：

```
function calculate(){
var input = document.getElementById("input").value;
var output1;
if (input == 1){
output1 = "x type 1";
}

else if (input == 2){
output1 = "y type 1";
}

else if (input == 3){
output1 = "y type 2";
}

if (output1.search("type 1")){
document.getElementById("output2").value="z";
}
document.getElementById("output1").value=output1;

}
```

```
<form>
Input<input type="textbox" name="input" id="input"><br>
<input type="button" onclick="calculate()" value="Calculate" /><br>
<textarea rows="2" name="output1" id="output1"></textarea>
<textarea rows="2" name="output2" id="output2"></textarea>
</form>
```

让我知道它是否有帮助或有任何问题。

# javascript - 如何在不禁用整个文档的 contextMenu 的情况下禁用元素的上下文菜单？

> ID：13871058
> 
> 赞同：0
> 
> 时间：2012-12-14T00:43:11.507
> 
> 标签：javascript

我有这个代码来禁用上下文菜单`div`

```
 disableContextMenu = function (e){ 
        if(e.stopPropagation)
            e.stopPropagation();
        if(e.preventDefault)
            e.preventDefault();
        e.cancelBubble = true;
        return false;
    };
    clickedElement.oncontextmenu = disableContextMenu;
    if(clickedElement.addEventListener){
        clickedElement.addEventListener('contextmenu', disableContextMenu, false);
    }else if(clickedElement.attachEvent){
        clickedElement.attachEvent('oncontextmenu', disableContextMenu);
    } 
```

这按预期工作。但是当我添加一个 mouseup 处理程序时，上下文菜单再次出现。

```
 clickedElement.onmousedown = function (e){
        if(e.which == 3){
            if(e.stopPropagation)
                e.stopPropagation();
            if(e.preventDefault)
                e.preventDefault();
            elementToShow.style.position = 'absolute';
            elementToShow.style.left = e.pageX + 'px';
            elementToShow.style.top = e.pageY + 'px';
            elementToShow.style.display = 'block';
            return false;
        }
    } 
```

这在我的 IE9 中不起作用。我改用了文档，它可以工作，但我不想禁用文本框和其他元素的上下文菜单。我怎样才能做到这一点？

不要建议我不要使用它。这是一个客户项目，这是一个要求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:09:52.730

您还可以检查事件的目标并仅当该目标是您不想要的对象时才禁用上下文菜单。

# jakarta-ee - Eclipselink 线程间共享缓存

> ID：13871059
> 
> 赞同：0
> 
> 时间：2012-12-14T00:43:14.390
> 
> 标签：jakarta-ee, jpa, jpa-2.0, eclipselink

这是我的配置，首先是persistence.xml：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
    version="2.0">     
<persistence-unit name="db" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
        <!-- This is needed to allow it to find entities by annotations -->
    <exclude-unlisted-classes>false</exclude-unlisted-classes>
    <shared-cache-mode>ALL</shared-cache-mode> 

    <properties>
    <property name="javax.persistence.jdbc.driver" value="com.mysql.jdbc.Driver"/>
        <property name="javax.persistence.jdbc.user" value="user"/>
        <property name="javax.persistence.jdbc.password" value="password"/>
        <property name="javax.persistence.jdbc.url" value="jdbc:mysql://ip/dbname"/>

        <property name="eclipselink.logging.level" value="FINEST"/>     
        <property name="eclipselink.weaving" value="static"/>
        <property name="eclipselink.cache.type.default" value="SoftWeak"/>

    </properties>
</persistence-unit>
</persistence> 
```

这是我创建 EntityManagerFactory 的方法。

```
private static EntityManagerFactory factory = null;

public synchronized static DBStore getInstance() {
    if (factory == null) {
        factory = Persistence.createEntityManagerFactory("db");
    }
    return new DBStore(factory.createEntityManager());
} 
```

其中 DBStore 是我用作访问 EntityManager 的中间人的对象。

使用 EclipseLink 2.4

这就是问题所在。如果我创建线程 1，为它获取一个 DBStore 对象，对现有实体进行一些更改，将它们提交到数据库，然后我有另一个并发线程 (2) 在进行更改并提交之前和之后加载相同的实体，第二个线程看不到第一个线程提交的更改。我知道更改在数据库中，因为我可以看到它们。此外，如果在第二个线程上我在检查实体的值之前调用 EntityManager.refresh(entity)，那么它工作正常。所以我在这里的猜测是我的两个线程没有相互共享它们的缓存，即使如果你使用相同的 EntityManagerFactory EclipseLink 应该这样做，我认为它是静态的。

那么我的设置有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:06:31.460

每个 EntityManager 都有自己的缓存，因为它们旨在表示单独的事务上下文。因此，读入 EntityManager 的预先存在的实体不会显示来自其他实体的更改，除非刷新或清除 EM 并重新读取实体。此处描述了关于 JPA 的 Eclipselink 缓存：[http ://wiki.eclipse.org/EclipseLink/Examples/JPA/Caching](http://wiki.eclipse.org/EclipseLink/Examples/JPA/Caching)

# mysql - SQL 无法创建表 (errno: 150)

> ID：13871075
> 
> 赞同：-1
> 
> 时间：2012-12-14T00:45:32.990
> 
> 标签：mysql, sql, database-design

我必须用所有这些复合键创建这个表。

前景（客户名称、汽车制造商、汽车模型、汽车年、carextcolour、cartrim、选项代码）

上面的所有字段都带有下划线以表明它们是主要的。所以 7 个主复合键。

由于某种原因，这不会创建表。

```
CREATE TABLE prospect
(Custname      VARCHAR(25) NOT NULL,
 Carmake       VARCHAR(25) NOT NULL,
 Carmodel      VARCHAR(20) NOT NULL,
 Caryear       VARCHAR(4) NOT NULL,
 Carextcolour  VARCHAR(10) NOT NULL,
 Cartrim       VARCHAR(10) NOT NULL,
 Optioncode    CHAR(4),
 CONSTRAINT pkprospect PRIMARY KEY (Custname, Carmake, Carmodel, Caryear, Carextcolour,           Cartrim, Optioncode),
 CONSTRAINT fkprospect FOREIGN KEY (Custname) REFERENCES customer(Custname),
 CONSTRAINT fk2prospect FOREIGN KEY (Carmake) REFERENCES car(Carmake),
 CONSTRAINT fk3prospect FOREIGN KEY (Carmodel) REFERENCES car(Carmodel),
 CONSTRAINT fk4prospect FOREIGN KEY (Caryear) REFERENCES car(Caryear),
 CONSTRAINT fk5prospect FOREIGN KEY (Carextcolour) REFERENCES car(Carextcolour),
 CONSTRAINT fk6prospect FOREIGN KEY (Cartrim) REFERENCES car(Cartrim),
 CONSTRAINT fk7prospect FOREIGN KEY (Optioncode) REFERENCES optiontable(Optioncode)
); 
```

我用来创建这个充满复合键的表的代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:11:13.710

您应该使一个外键约束引用每个被引用表的*完整*主键或唯一键。您不能为引用表主键中间的各个列创建单独的外键。

```
CREATE TABLE prospect
(Custname      VARCHAR(25) NOT NULL,
 Carmake       VARCHAR(25) NOT NULL,
 Carmodel      VARCHAR(20) NOT NULL,
 Caryear       VARCHAR(4) NOT NULL,
 Carextcolour  VARCHAR(10) NOT NULL,
 Cartrim       VARCHAR(10) NOT NULL,
 Optioncode    CHAR(4),
 CONSTRAINT pkprospect PRIMARY KEY (Custname, Carmake, Carmodel, Caryear, Carextcolour,           Cartrim, Optioncode),
 CONSTRAINT fkprospect FOREIGN KEY (Custname) REFERENCES customer(Custname),
 CONSTRAINT fk2prospect FOREIGN KEY (Carmake, Carmodel, Caryear, Carextcolour, Cartrim)
   REFERENCES car(Carmake, Carmodel, Caryear, Carextcolour, Cartrim),
 CONSTRAINT fk7prospect FOREIGN KEY (Optioncode) REFERENCES optiontable(Optioncode)
); 
```

*我在上面使用了应该*这个词，因为在涉及外键时，InnoDB 实际上比 ANSI/ISO SQL 标准更宽松一些。标准 SQL 表示外键的列*必须*是引用的主键或唯一键的完整列列表。

InnoDB 允许您使用列的子集，只要它们是这些列的左前缀。但是您不应该这样做，因为当子行可能引用其父表中的*多行时，您会得到非常混乱的结果。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-01-24T10:01:28.383

如果您尚未创建参考表，则无法创建此表。您可以先创建所有参考表，然后使用 alter table 输入 FK 提交。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-06T10:37:46.333

试试这个：第一步用主键创建表，然后对外键使用alter table命令并添加它们。

# javascript - 修改 jquery 循环插件以使用图像标题而不是数字

> ID：13871081
> 
> 赞同：0
> 
> 时间：2012-12-14T00:46:13.147
> 
> 标签：javascript, jquery, jquery-cycle

按照[这个优秀的教程](http://takerootdesign.co.uk/blog/web-design/adding-named-navigation-jquery-cycle-gallery)我非常接近，但他使用`h2`标签的内容而不是动态创建的东西。我想改用图像标题。我认为这样的事情会起作用，但事实并非如此。

```
$(document).ready(function () {
//Create an array of titles
var titles = $('#slideshow img.item').map(function() { 
    return $(this).prop('title'); 
});

    $('#pause').click(function() { $('#slideshow').cycle('pause'); return false });
    $('#play').click(function() { $('#slideshow').cycle('resume'); return false; });

    $('#slideshow').before('<ul id="nav-slide"></ul>').cycle({
        fx: 'fade', 
        speed: 'slow', 
        timeout: 6000, 
        pager: '#nav-slide',
        pagerAnchorBuilder: function (index) {  //Build the pager
            return '<li><a href="#">' + titles[index] + '</a></li>';
        },
        updateActivePagerLink: function(pager, currSlideIndex) {
            $(pager).find('li').removeClass('active').filter('li:eq('+currSlideIndex+')').addClass('active');
        }
    });

}); 
```

任何人都知道如何获取内容`title`而不是块/内联元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:52:22.747

`title`不是孩子，而是您的图像的财产

```
var titles = $('#slideshow img.item').map(function() { 
    return $(this).prop('title'); 
}); 
```

[**演示**](http://jsfiddle.net/GTZbu/)

# javascript - 带有客户端haml的angularjs

> ID：13871089
> 
> 赞同：6
> 
> 时间：2012-12-14T00:47:19.077
> 
> 标签：javascript, ruby-on-rails, coffeescript, angularjs, haml

我刚刚开始在我的 Rails 应用程序中使用 AngularJS，并且因为我习惯在 Rails 中使用 haml 模板，所以我想在客户端对 AngularJS 做同样的事情。问题是我不知道在 haml 文件中读取的位置。

我有一个投资者模型，我正在尝试将“显示”模板转换为 haml，因为它是最容易开始的。

这是我与 show 相关的 AngularJS 代码

投资者.js.coffee

```
 # Setup the module & route
  angular.module("investor", ['investorService'])
    .config(['$routeProvider', ($provider) ->
      $provider
        .when('/investors/:investor_id', {templateUrl: '/investors/show.html', controller: 'InvestorCtrl'})
    ])
    .config(["$httpProvider", (provider) ->
      provider.defaults.headers.common['X-CSRF-Token'] = $('meta[name=csrf-token]').attr('content')
    ])

  angular.module('investorService', ['ngResource'])
    .factory('Investor', ($resource) ->
      return $resource('/investors/:investor_id.json', {}, {
        show: {method: 'GET'},
      })
    )

  angular.bootstrap document, ['investor'] 
```

这是我的控制器 AngularJS 代码

Investors_controller.js.coffee

```
# Show Investor
window.InvestorCtrl = ($scope, $routeParams, Investor) ->
  html = haml.compileHaml({sourceId: 'simple'})
  $('#haml').html(html())

  investor_id = $routeParams.investor_id
  $scope.investor = Investor.show({investor_id: investor_id}) 
```

在后端，我有一个 Rails JSON API。

这是它读取的 show.html 文件

```
<script type="text/haml-template" id="simple">
  %h1 {{investor.name}}
</script>

<div id="haml"></div>

<h1>{{investor.name}}</h1>

<p>
  <b>Total Cost</b>
  {{investor.total_cost}}
</p>

<p>
  <b>Total Value</b>
  {{investor.total_value}}
</p>

<a href='/investors/angular#/investors/{{investor.id}}/edit'>Edit</a>
<a href='/investors'>Back</a> 
```

最终，我想要一个 .haml 并将其传递给 templateURL 并获取 haml_coffee_assets 插件以在 AngularJS 开始查看动态字段并更改内容之前对其进行编译。

参考：[https ://github.com/netzpirat/haml_coffee_assets](https://github.com/netzpirat/haml_coffee_assets)

目前这将转换haml并将其放入具有haml id的div中。但是 AngularJS 不会将 haml 代码中的 {{investor.name}} 更改为投资者的名字，因为它在操作中为时已晚。

如何在这样的 AngularJS 项目中正确实现客户端 haml 模板？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-05T19:12:33.223

您可以将所有 Haml 模板放在 assets/templates 文件夹中。然后你连接你的资产管道来服务 Haml 使用这个：

```
Rails.application.assets.register_engine '.haml', Tilt::HamlTemplate 
```

然后您的所有模板都可以从 /assets/(template name).html 获得

如果您希望能够在您的 Haml 模板中包含 rails 助手，您可以定义一个自定义模块并使用它来代替：

```
module CustomHamlEngine
  class HamlTemplate < Tilt::HamlTemplate
    def evaluate(scope, locals, &block)
      scope.class_eval do
        include Rails.application.routes.url_helpers
        include Rails.application.routes.mounted_helpers
        include ActionView::Helpers
      end

     super
    end
  end
end

Rails.application.assets.register_engine '.haml', CustomHamlEngine::HamlTemplate 
```

这会将所有 rails 助手添加到模板的范围中。然后你可以将模板 url 传递给 angular，它会自动为你完成所有的工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-28T12:06:28.920

我的方法是在资产编译时将服务器端的所有 haml 渲染到“application.js”文件中，使用 $templateCache。签出[http://minhajuddin.com/2013/04/28/angularjs-templates-and-rails-with-eager-loading](http://minhajuddin.com/2013/04/28/angularjs-templates-and-rails-with-eager-loading)以获取代码。

# fortran - 如何在 Fortran 中使用 HDF5 表

> ID：13871090
> 
> 赞同：3
> 
> 时间：2012-12-14T00:47:20.183
> 
> 标签：fortran, hdf5

我想在 Fortran 中使用[HDF5 表](http://www.hdfgroup.org/HDF5/doc/HL/RM_H5TB.html)，但我遇到了一些麻烦。一个示例会很有用，但只[提供](http://www.hdfgroup.org/HDF5/Tutor/h5table.html)了 C 示例。

我的部分问题是如何处理它需要的偏移量和大小。使用 gfortran，我也许可以使用[sizeof](http://gcc.gnu.org/onlinedocs/gfortran/SIZEOF.html)和[loc](http://gcc.gnu.org/onlinedocs/gfortran/LOC.html)，但这些是 gfortran 特定的扩展。我看到较新版本的 Fortran 有 c_loc 和 c_sizeof 这可能会有所帮助，但也许它们只适用于 c 变量？

我也不知道 chunk_size 应该是什么。

FWIW，下面丑陋的代码使用 loc 和 sizeof。它编译并运行但给出错误（并且没有在 hdf5 文件中放入任何内容）：

```
 size:                    8
 offsets:                    0                    4
 types:           0           0
 initialized
 file open
HDF5-DIAG: Error detected in HDF5 (1.8.8) thread 140636908803840:
  #000: ../../../src/H5Tcompound.c line 370 in H5Tinsert(): not a datatype
    major: Invalid arguments to routine
    minor: Inappropriate type
 table created 
```

所以偏移量可能是有意义的，但类型并不是真的。

任何帮助，将不胜感激。谢谢。

```
module tdef
  type blarg
    integer :: arg
    real    :: blah
  end type
end

PROGRAM H5_TABLE

  use tdef
  USE HDF5
  use h5lt
  use h5tb

  IMPLICIT NONE

  INTEGER(HID_T) :: file_id
  INTEGER     ::   error
  integer(HSIZE_T) :: nfields, nrecords
  integer(SIZE_T)  :: type_size
  type(blarg) :: test
  character(len=4), dimension(2) :: field_names = (/' arg', 'blah'/)
  integer(SIZE_T), dimension(2) :: field_offset
  integer(HID_T), dimension(2) :: field_types
  integer(HSIZE_T) ::  chunk_size = 1
  integer :: compress = 0

  nfields  = 2
  nrecords = 2

  type_size = sizeof(test)
  print *, "size:", type_size

  field_offset(1) = loc(test%arg) - loc(test)
  field_offset(2) = loc(test%blah) - loc(test)
  print *, "offsets:", field_offset

  field_types(1) = H5T_NATIVE_INTEGER
  field_types(2) = H5T_NATIVE_REAL
  print *, "types:", field_types

  CALL h5open_f(error)
  print *, "initialized"

  CALL h5fcreate_f("cpt.h5", H5F_ACC_TRUNC_F, file_id, error)
  print *, "file open"

  call h5tbmake_table_f('Table Title', file_id, "Steps", nfields, &
            nrecords, type_size, field_names, field_offset, &
            field_types, chunk_size, compress, error) 
  print *, "table created"

  CALL h5fclose_f(file_id, error)

  CALL h5close_f(error)

END PROGRAM H5_TABLE 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T19:22:01.977

事实证明，这是一个非常简单的问题。

在使用 H5T_NATIVE_INTEGER 和 H5T_NATIVE_REAL 之后，我调用了 h5open_f。但是，直到调用 h5open_f 之后，这两个才被分配适当的值。首先调用 h5open_f 解决了我的问题。

# javascript - IE10 javascript访问xml元素问题

> ID：13871092
> 
> 赞同：0
> 
> 时间：2012-12-14T00:47:36.640
> 
> 标签：javascript, html, xml, internet-explorer-10

我有 3 个文件（htm、xml、js）可以在 IE8 中正常工作，但在 IE10 中，javascript 无法获取 xml 元素：

获取xml.htm

```
<html>
    <head><title>getxml.htm</title></head>

    <xml id="myxml" src="myxml.xml"></xml>
    <script src="getxml.js" language="javascript" type="text/javascript"></script>
</html> 
```

myxml.xml

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<publish>
</publish> 
```

获取xml.js

```
get_xml_content();
function get_xml_content() {
    alert("get_xml_content");
    alert(myxml);       // ie8: [object], ie10: [object HTMLUnknownElement]
    var xmle=myxml.getElementsByTagName("publish").item(0);  
    alert(xmle);        // ie8: [object], ie10: null
} 
```

来自 IE8 和 IE10 的警报消息在 getxml.js 中作为上述注释编写。

感谢任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:38:41.863

根据[IEBlog 上的一篇博文](http://blogs.msdn.com/b/ie/archive/2011/07/06/html5-parsing-in-ie10.aspx)，IE10 在标准模式下运行时不支持 XML 数据岛。这使 IE10 与其他浏览器解析 HTML 的方式保持一致。

要让它在 IE10 中工作，您需要以旧模式加载页面。您可以通过包含`X-UA-Compatible`元标记来做到这一点：

```
<meta http-equiv="X-UA-Compatible" content="IE=9" /> 
```

一种更跨浏览器的方法是将 XML 链接到`<iframe>`：

```
<iframe id="myxml" src="myxml.xml" /> 
```

当然，你需要用一些 CSS 来隐藏它：

```
iframe { display: none; } 
```

Reference `contentDocument` to parse the document:

```
var myxml = document.getElementById("myxml").contentDocument;
var xmle=myxml.getElementsByTagName("publish").item(0);  
alert(xmle); 
```

# php - 在使用 slim 的 PHP 中，我无法路由到 URL /loveshared

> ID：13871096
> 
> 赞同：0
> 
> 时间：2012-12-14T00:48:00.430
> 
> 标签：php, routes, slim

一个很奇怪的问题。

我无法在 slim 中设置路由以使用 URL /loveshared

```
$app->get('/loveshared', function() use ($app) {
  echo "hello";
}); 
```

如果我在浏览器中导航到 localhost/loveshared，我会收到 404。当我推送到我的服务器时，我也会收到此 404 消息。

我在我的项目的顶部方向为字符串 loveshared 做了一个 Find in Files...。它找到该字符串的唯一位置是在我的路由器文件中。

我也经历过并做了：/l、/lo、/lov、/love、/loves.../loveshared 所有路线都有效，直到loveshared。我也做过 /sharedlove 和 /stuffshared ，它们都有效。

其他人可以确认 /loveshared 不适用于 slim 作为路线吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:47:34.890

[好的，我下载了Slim 2.2.0](https://github.com/codeguy/Slim/zipball/master)的新副本，将其按原样放置在我的个人站点 ( `PHP 5.3.13`) 上，并`Linux duhr 2.6.32.8`在共享主机环境 (Dreamhost) 中运行。然后我创建了一个文件，`t.php`并将以下内容粘贴到其中：

```
<?php

require 'Slim/Slim.php';

\Slim\Slim::registerAutoloader();

$app = new \Slim\Slim();

$app->get('/loveshared', function () use ($app) {
    echo "<p>This is a test of the loveshared controller label in the URL of a Slim project.</p>";
});

$app->run(); 
```

[http://jfcoder.com/slim/t.php/loveshared](http://jfcoder.com/slim/t.php/loveshared)

它按预期运行。要么是某种环境原因（流氓文件或配置错误的`.htaccess`文件？），要么是其他原因。您需要以某种方式重新创建它，以便能够进行三角测量并找到问题。

您是否尝试过我所做的，看看它是否仍然导致您描述的问题？

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T01:22:17.580

对我来说很好

```
<?php
require 'Slim/Slim.php';

\Slim\Slim::registerAutoloader();

$app = new \Slim\Slim();

$app->get('/loveshared', function() use ($app) {
  echo "hello";
});

$app->run(); 
```

# android - 带有 SQLite 数据库的可扩展 ListView

> ID：13871103
> 
> 赞同：-1
> 
> 时间：2012-12-14T00:49:07.310
> 
> 标签：android, database, sqlite, listview, expandable

我有一个包含多列的 SQLite 数据库，其中一列是日期。我想将数据库中的数据填充到可扩展的列表视图中，以日期为标题。因此，对于共享相同日期值的所有行，我想将它们显示为该特定日期的子项。

我使用arraylist来存储数据库中的数据。我显示了组标题，但是当我尝试展开时出现空指针异常。该错误来自 getChildView 方法。

```
public class MyExpandableListAdapter extends BaseExpandableListAdapter {

    public Object getChild(int groupPosition, int childPosition) {
        return infoList.get(groupPosition).get(childPosition);
    }

    public long getChildId(int groupPosition, int childPosition) {
        return childPosition;
    }

    public View getChildView(int groupPosition, int childPosition,
            boolean isLastChild, View convertView, ViewGroup parent) {
        RelativeLayout infoLayout = (RelativeLayout) findViewById(R.id.infoLayout);
        String exercise = ((ArrayList<Object>) getChild(groupPosition, childPosition)).get(0).toString();
        String weight = ((ArrayList<Object>) getChild(groupPosition, childPosition)).get(1).toString();
        String reps = ((ArrayList<Object>) getChild(groupPosition, childPosition)).get(2).toString();
        ((TextView) infoLayout.findViewById(R.id.exercise)).setText(exercise);
        ((TextView) infoLayout.findViewById(R.id.weight)).setText(weight);
        ((TextView) infoLayout.findViewById(R.id.reps)).setText(reps);

        return infoLayout;
    }

    public int getChildrenCount(int groupPosition) {
        return infoList.get(groupPosition).size();
    }

    public Object getGroup(int groupPosition) {
        return dateList.get(groupPosition);
    }

    public int getGroupCount() {
        return dateList.size();
    }

    public long getGroupId(int groupPosition) {
        return groupPosition;
    }

    public View getGroupView(int groupPosition, boolean isExpanded,
            View convertView, ViewGroup parent) {
        TextView dateView = new TextView(getApplicationContext());
        dateView.setText(getGroup(groupPosition).toString());
        return dateView;
    }

    public boolean hasStableIds() {
        return false;
    }

    public boolean isChildSelectable(int groupPosition, int childPosition) {
        return true;
    }
} 
```

这就是我填充数组列表的方式。包含子项的数组列表嵌套了两次：最里面的包含 3 个要在同一行上显示的对象，“中间”一个将最里面的数组列表组合在一起，以便它们出现在可扩展列表视图的正确分组下。

```
private DatabaseMethods dbm;
private ArrayList<String> dateList = new ArrayList<String>();
private ArrayList<ArrayList<ArrayList<Object>>> infoList = new ArrayList<ArrayList<ArrayList<Object>>>();

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.stats);
    dbm = new DatabaseMethods(this);
    dbm.read();
    Cursor dates = dbm.fetchGroup();
    int DATES_INDEX = dates.getColumnIndexOrThrow("date");
    while (dates.moveToNext()) {
        String date = dates.getString(DATES_INDEX);
        if (!dateList.contains(date)) {
            dateList.add(date);
        }
    }
    for (String date : dateList) {
        Cursor info = dbm.fetchChildren(date);
        int EXERCISE_INDEX = info.getColumnIndexOrThrow("exercise");
        int WEIGHT_INDEX = info.getColumnIndexOrThrow("weight");
        int REPS_INDEX = info.getColumnIndexOrThrow("reps");
        ArrayList<ArrayList<Object>> secondInnerInfoList = new ArrayList<ArrayList<Object>>();
        while (info.moveToNext()) {
            String exercise = info.getString(EXERCISE_INDEX);
            int weight = info.getInt(WEIGHT_INDEX);
            int reps = info.getInt(REPS_INDEX);
            ArrayList<Object> thirdInnerInfoList = new ArrayList<Object>();
            thirdInnerInfoList.add(exercise);
            thirdInnerInfoList.add(weight);
            thirdInnerInfoList.add(reps);
            secondInnerInfoList.add(thirdInnerInfoList);
        infoList.add(secondInnerInfoList);
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-12T09:32:06.803

```
public View getChildView(int parentPosition, int childPosition, boolean isLastChild, View convertView,
        ViewGroup parent) {
    // TODO Auto-generated method stub

    if (convertView == null) {
        LayoutInflater infalInflater = (LayoutInflater) this._context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = infalInflater.inflate(R.layout.child_view_list, null);
    }
    final String abc = (String) getChild(parentPosition, childPosition);

    TextView status_tv = (TextView) convertView
            .findViewById(R.id.child_tv);
    status_tv.setText(abc);

    //ImageView imgListChild=(ImageView) convertView.findViewById(R.id.child_iv);

    //imgListChild.set
    return convertView;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T03:10:19.130

1.  编写一个方法来获取数据并将其转换为 ArrayList 或数组字符串。
2.  在您的 Activity 中为 ArrayAdapter 声明和初始化数据，例如： ArrayAdapter mAdapter = new ArrayAdapter(getApplicationContext(), android.R.layout.simple_list_item_1, yourArrayListOrArray);
3.  ListView.setAdapter(mAdapter);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-11T11:20:32.417

对于带有 sqlite 数据库的可扩展列表视图：您可以使用 CursorTreeAdapter，而不是使用 BaseExpandablelistAdapter。这将使您轻松完成任务。请参考以下链接：

[http://developer.android.com/reference/android/widget/CursorTreeAdapter.html](http://developer.android.com/reference/android/widget/CursorTreeAdapter.html)

# prolog - 意外的未定义过程

> ID：13871106
> 
> 赞同：0
> 
> 时间：2012-12-14T00:49:32.290
> 
> 标签：prolog

我只想断言一些事实——如果它们还没有被断言，所以我做一个检查：

```
:- dynamic item/6.

init(Id, LastId, Depth) :-   
                        ruut(X,Y,Color),
                        (item(X,Y,Color,Depth,Id,LastId) -> true;       
                        assert(item(X,Y,Color,Depth,Id,LastId))),
                        fail.

init(_, _, _). 
```

关键是只有在它还没有被断言时才断言它。但我收到一个错误：

```
ERROR: my_pgm:initsialiseeri_seisund/3: Undefined procedure: my_pgm:item/6 
```

我做错了什么？对不起菜鸟问题，但我对序言真的很陌生！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:41:23.140

我试图在[在线 SWI-Prolog](http://ideone.com/MvpVb9)中重现这个错误，它就像一个魅力。这是我的代码示例：

```
:- dynamic foo/1.

lower(X,X).
lower(X,U):- X is U-1\. % duplicate
lower(X,U):- U > 0, U1 is U-1, !, lower(X, U1).

init(U):-
  lower(X,U),
  \+(foo(X)), assert(foo(X)),
  fail; !, true.

show_all:-
  foo(X), print(X), nl, fail; !, true.

:- init(5), show_all. 
```

也许您对模块有一些误用？即您已经`init/6`在一个模块和`assert/1`另一个模块中定义，这会导致一些问题吗？

# windows-8 - 在单个文件列中对齐 Metro Tiles？

> ID：13871107
> 
> 赞同：2
> 
> 时间：2012-12-14T00:49:43.153
> 
> 标签：windows-8, microsoft-metro

是否可以将开始菜单磁贴组对齐到只有一个块宽的列中？我似乎无法在逻辑上一次将 8 个图块分组，所以我最终得到了非常长的非常小的组。如果有一个程序可以覆盖微软的默认布局，那就太好了。我熟悉.NET，但实际上从未做过任何面向系统的事情。如果有人对从哪里开始编写应用程序来执行此操作有任何建议，那也将非常有帮助。

这基本上是我的开始屏幕现在的样子： ![前](../Images/bf7dd87bfd54bf5318d4d82024d7ff5d.png)

这是我希望它看起来的样子： ![后](../Images/c06298262352c8dffbd06ec537cf8921.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:05:37.347

不，按照设计，这种行为（单个方形瓷砖宽的列）是不可能的。您可以拥有的最短宽度是 2 个瓷砖宽，以容纳宽瓷砖。

# c# - Autofac - 使用当前类的构造函数参数初始化对象，与构建器所在的类不同

> ID：13871108
> 
> 赞同：0
> 
> 时间：2012-12-14T00:49:49.280
> 
> 标签：c#, autofac

在下面的代码中，为了清晰起见，在第二类中使用 config 和 monitor 很简单。应该如何创建/注册/解决计时器？似乎它不能在第一类中完成，因为它需要第二类的构造函数参数值，但如果我理解正确，那么所有寄存器/解析都应该在第一类中进行。

```
using System;
using System.ServiceProcess;
using System.Threading;

using Autofac;

namespace MyServiceApp
{
    static class MyServiceAppMain
    {
        static void Main()
        {
            using (var container = InitContainer())
            {
                    container.Resolve<MyService>().Start();
            }
        }

        private static IContainer InitContainer()
        {
            var builder = new ContainerBuilder();
            builder.RegisterType<Configuration>().As<IConfiguration>();
            builder.RegisterType<ServicesMonitor>();
            builder.RegisterType<MyService>();

            IContainer container = 
                builder.Build(Autofac.Builder.ContainerBuildOptions.None);

            return container;
        }
    }

    public partial class MyService : ServiceBase, IMyService
    {
        private Timer _processTimer;
        private int _intervalSize;
        private IConfiguration _config;
        private ServicesMonitor _monitor;

        public MyService(IConfiguration config, ServicesMonitor monitor)
        {
            InitializeComponent();

            _config = config;
            _monitor = monitor;

            _config.ReadAppConfig();
        }

        public void Start()
        {
            OnStart(null);
        }

        protected override void OnStart(string[] args)
        {
            _intervalSize = _config.IntervalMinutes * (60 * 1000);

            _processTimer = 
                new Timer(ProcessTimer_Elapsed, null, Timeout.Infinite, _intervalSize);
        }

        private void ProcessTimer_Elapsed(object sender)
        {
                _processTimer.Change(Timeout.Infinite, _intervalSize);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T16:44:09.723

我假设您的目标是可测试性或以其他方式抽象出`Timer`对象的创建。由于`Timer`实际上并未实现接口，因此您有几个选择。

但是，**由于您正在修改`Timer`内部回调**，您的情况变得复杂。从示例中，您实际上并没有进行任何更改 - 您设置了具有特定到期时间和回调周期的原始计时器......然后稍后将其设置为相同的东西。

**选项一：做你已经在做的事**

控制反转在有意义的地方非常有用，但是您不能真正“伪造”计时器或“换入”计时器以进行其他一些实现。如前所述，它没有实现任何`ITimer`接口或类似的东西。

如果你不必把它换掉……就让它发生吧。在测试期间交换配置值和东西，使其更适合您的测试并称之为好。

**选项二：包装计时器**

如果你需要在你的班级之外创建它，你需要把它包装在……东西中。然后你可以换掉那个包装器。

而且由于您正在修改`Timer`自身，因此您需要将一些功能包装进去。

```
public class SelfAdjustingTimer
{
  public Timer Timer { get; protected set; }
  public int Interval { get; private set; }
  public SelfAdjustingTimer(int interval)
  {
    this.Interval = interval;
    this.Timer = new Timer(Callback, null, Timeout.Infinite, interval);
  }
  private void Callback(object sender)
  {
    this.Timer.Change(Timeout.Infinite, this.Interval);
  }
} 
```

如果您需要知道它何时发生或基于此做一些工作，您甚至可以添加一个事件或在回调期间引发的某些东西。

**选项三：疯狂的 Lambda 处理程序**

它可能会变得非常复杂，但您知道如何使用 lambda 表达式创建事件处理程序，例如...

```
someObj.TheEvent += (sender, args) => { /* Do Work */ }; 
```

假设您可以找到一种使用 lambda 表达式构建动态自引用回调并以这种方式创建计时器回调的方法。我以前做过类似的事情......它有点令人困惑。这就像生成 lambdas 的 lambdas 需要一段时间才能弄清楚（这就是为什么我不在这里把它交给你的原因）。

**如果您不必修改回调中的计时器**

...那么你有更多的选择。你可以...

*   创建一个`ITimerFactory`并根据配置为您生成计时器。将其注入您的课程并使用它。（`ITimerFactory`它的实现是你必须创建的东西。它们不存在。`）
*   像他们在 ASP.NET 中使用and所做的那样创建 a`TimerBase`和 a 。注入你的课堂，而不是更新一个. 对于 DI 注册，您可以在此处查找配置值并设置真实的.`TimerWrapper``HttpContextBase``HttpContextWrapper``TimerBase``Timer``TimerBase``Timer`

...等等。所有选项都涉及抽象出具体`Timer`对象的概念，因为同样，它没有实现任何接口，也不是您甚至可以从中派生的东西。

**如果是我**......我可能会做你正在做的事情，尽可能地将代码隔离到一个较小的服务类中，该服务类可以进行所有交互`Timer`并具有更好的可模拟方法（例如，`Timer`用一些东西包装) 然后尽可能使用包装器进行测试。

# java - 将文本放在动画 GIF 上并将其另存为新的 GIF

> ID：13871112
> 
> 赞同：0
> 
> 时间：2012-12-14T00:50:30.197
> 
> 标签：java, image, image-processing, gif, javax.imageio

我正在寻找一个可以处理动画 gif 图像以在其上写入文本的功能。

工作解决方案可能由 Gif4j lib 提供，但我正在寻找开源解决方案或建议如何自行实现它。

如何将文本放在 gif 上并将其保存为 Java 中的新 gif？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T02:15:14.267

你需要：

1.  将动画分割成单独的帧。
2.  在每一帧上写下文字。例如，请参阅这些答案（第一个更密切相关，但第二个来源也是如此，并且更简单）。
    *   [图像上的 Java 文本](https://stackoverflow.com/a/5998015/418556)
    *   [如何调整文本大小](https://stackoverflow.com/a/13440543/418556) ¹
3.  将帧构建成一个新的动画 GIF。请参阅OTN 上的[使用 imageio 创建动画 GIF](https://forums.oracle.com/forums/thread.jspa?threadID=1262385)，其中我讨论了 GIF 动画工具中使用的代码。

![](../Images/b8151a08d14cbe18fbb3cc8062d8361d.png)

# ios - 在 NEON float32x4_t 中对 3 条车道求和

> ID：13871113
> 
> 赞同：7
> 
> 时间：2012-12-14T00:50:39.713
> 
> 标签：ios, arm, simd, neon, intrinsics

我正在使用 ARM NEON 内在函数（llvm，iOS）对内部循环进行矢量化。我一般用`float32x4_t`s。我的计算需要对这个向量中四个浮点数中的三个求和。

此时我可以退回到 C 浮点数，然后`vst1q_f32`取出四个值并将我需要的三个值相加。但我认为，如果有一种方法可以直接用一两条指令中的向量来完成它，然后只获取一个通道结果，那么它可能会更有效，但我想不出任何明确的路径来做到这一点。

我是 NEON 编程的新手，现有的“文档”非常可怕。有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T09:17:15.517

您应该能够使用 VFP 单元来完成此类任务。NEON 和 VFP 共享相同的寄存器库，这意味着您无需在寄存器周围进行洗牌即可利用一个单元，并且它们还可以对相同的寄存器位具有不同的视图。

![http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0204j/ch05s03s02.html](../Images/ab176c87605c88ee51beb2795792ecc3.png)

您`float32x4_t`是 128 位的，因此它必须位于 Quad (Q) 寄存器上。如果您仅使用 arm 内在函数，您将不知道您使用的是哪一个。问题是如果它高于 4，VFP 不能将其视为单精度（*对于好奇的读者：我保持简单，因为 VFP 版本之间存在差异，这是最低要求。*）。因此，最好将您移动`float32x4_t`到固定寄存器，例如`Q0`. 在此之后，您可以将 S0、S1、S2 等寄存器与`vadd.f32`并将结果移回 ARM 寄存器。

一些警告... VFP 和 NEON 从理论上讲是不同的执行单元，它们共享相同的寄存器组和流水线。我不确定这种方法是否比其他方法更好，我不需要再说一遍，你应该做基准测试。此外，这种方法没有使用 neon 内在函数进行简化，因此您可能需要使用内联汇编来编写代码。

我做了一个简单的片段来看看它的样子，我想出了这个：

```
#include "arm_neon.h"

float32_t sum3() {           
        register float32x4_t v asm ("q0");
        float32_t ret;

        asm volatile(
        "vadd.f32       s0, s1\n"
        "vadd.f32       s0, s2\n"
        "vmov           %[ret], s0\n"
        : [ret] "=r" (ret)
        :
        :);

        return ret;
} 
```

`objdump`它看起来像（用 gcc -O3 -mfpu=neon -mfloat-abi=softfp 编译）

```
00000000 <sum3>:
   0:   ee30 0a20   vadd.f32    s0, s0, s1
   4:   ee30 0a01   vadd.f32    s0, s0, s2
   8:   ee10 3a10   vmov    r0, s0
   c:   4770        bx  lr
   e:   bf00        nop 
```

如果你试一试，我真的很想听听你的印象！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T01:23:38.823

你能把第四个元素归零吗？也许只是通过复制和使用`vset_lane_f32`？

如果是这样，您可以使用[Sum all elements in a quadword vector in ARM assembly with NEON](https://stackoverflow.com/questions/6931217/sum-all-elements-in-a-quadword-vector-in-arm-assembly-with-neon)的答案，例如：

```
float32x2_t r = vadd_f32(vget_high_f32(input), vget_low_f32(input));
return vget_lane_f32(vpadd_f32(r, r), 0); // vpadd adds adjacent elements 
```

虽然这实际上做的工作比你需要的要多，所以只提取三个浮点数`vget_lane_f32`并添加它们可能会更快。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T01:22:56.970

听起来您想使用（某些版本的）VLD1 将零加载到您的额外通道中（除非您可以安排它已经为零），然后是两个 VPADDL 指令将四个通道成对相加成两个，然后是两个通道合而为一。

# c# - 将键值对写入 app.config 文件

> ID：13871114
> 
> 赞同：1
> 
> 时间：2012-12-14T00:50:50.653
> 
> 标签：c#, winforms

它适用于`Read`，但我似乎无法做到这`Write`一点。当我尝试写入文件时，它不会抛出任何 IO 异常。好像什么都没发生一样。

这是我的代码，请看`GetValue()`和`SetValue()`功能：

```
using System.Configuration;

public class AppConfig {
    private string _username;
    private string _password; 

    public AppConfig() {
        _filePath = GetValue("Username");
        _password = GetValue("Password");
        //... more
    }
    public string Password {
        get { return _password; }
        set { SetValue("Password", value); _password = value; }
    }
    public string Username {
        get { return _username; }
        set { SetValue("Username", value); _username = value; }
    }
    private void SetValue(string key, string val) {
        var cfg= ConfigurationManager
                .OpenExeConfiguration(ConfigurationUserLevel.None);
        cfg.AppSettings.Settings[key].Value = val;
        cfg.Save(ConfigurationSaveMode.Modified);
        ConfigurationManager.RefreshSection("appSettings");
    }
    private string GetValue(string key) {
        return ConfigurationManager.AppSettings[key];
    }
} 
```

这是 app.config 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <appSettings>

    <add key ="Password" value ="123456"/>
    <add key ="Username" value ="hohoho"/>

  </appSettings>
</configuration> 
```

知道如何使`Write`事情发生吗？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T08:46:29.203

.Net 中的配置系统并非旨在让您以编程方式将更改保存到程序集文件夹中的 app.config。我知道那里有一个“保存”方法，但这些更改实际上保存到配置文件的副本中。副本的位置取决于设置的范围。

应用程序设置，例如：

```
<appSettings>
     <add key="" value=""/>
</appSettings> 
```

如果我没记错的话，有“应用范围”。如果您使用项目设置页面中的设置页面或`Settings.settings`在属性文件夹中打开，您可以选择范围（用户或应用程序）。

这样，对当前用户或特定版本的应用程序的设置更改将保持不变。这些副本存储在相应帐户的 %APPDATA% 中某处的生成文件夹中。配置系统会根据登录者自动重新加载设置。

这就是为什么您也有“升级”方法的原因。它允许您将设置添加到应用程序的新版本并升级用户的设置，从而仅将新属性添加到用户的副本中。这样，程序集文件夹中的app.config中的设置只是设置的默认值。

上面的评论触及了为什么它是这样工作的：Program Files 中的文件在安装后保持不变，UAC 确保了这一点。

我建议阅读配置系统，它非常强大。如果还是真的要修改app.config，**就得写自定义代码直接修改app.config文件**，

*   安装到用户的个人资料文件夹中，或
*   始终以管理员身份运行您的程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-04T21:31:43.697

试试下面的代码

```
 Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
        config.AppSettings.Settings[key].Value = value;
        config.Save();
        ConfigurationManager.RefreshSection("appSettings"); 
```

# c# - 无法将类型隐式转换为“字符串”错误

> ID：13871118
> 
> 赞同：1
> 
> 时间：2012-12-14T00:51:15.093
> 
> 标签：c#

我目前正在处理显示项目列表。我创建了一个`GetNextItem`返回的方法`obj1`。当我从调用该方法时，`buttonClick`我收到以下错误：

```
Cannot implicitly convert type 'TreeFarm.Form1.fruit_trees' to 'string'. 
```

不知道为什么要做这样的事情。

```
public items_list GetNextItem()
{
    items_list obj1 = this.current_item;
    if (obj1 != null)
    {
        current_item = current_item.next_item;
    }
    return obj1;
}

ListForItems mainlist = new ListForItems();
private void ShowNextItem_Click(object sender, EventArgs e)
{

    labelSpecificItem.Text = mainlist.GetNextItem();         
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T00:56:12.790

您正在尝试将类型的值转换为字符串`items_list`（类型）。因此，如果这是您的对象之一，您可以创建一个隐式转换运算符，或者尝试使用或使用.`.Text``String``.ToString()``(String)mainlist.GetNextItem()`

如果您想要这种任务并且`items_list`是您的对象之一，我建议您在该课程中添加以下内容：

```
public static implicit operator String(items_list itemslist)
{
    return /* however you want to portray itemslist as a string */;
} 
```

否则，您将不得不依靠`ToString()`正确处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T00:58:57.663

正如其他答案所提到的，您不能将`items_list`对象强制转换为`string`. 如果`items_list`您想在标签中显示其中的一个组件，则分配它而不是整个对象：

```
labelSpecificItem.Text = mainlist.GetNextItem().textYouWantToSee; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T01:06:17.077

您的项目需要覆盖该`ToString()`方法，然后使用该方法将它们转换为字符串。

遵循这个模式：

```
public class FruitTree 
{
    public string Name { get; set; }
   // your code
   public override string ToString()
   {
       return string.Format("A {0} tree.", Name);
   }
}
// later in the click handler
{
    labelSpecificItem.Text = tree_item.ToString();
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-02-27T11:57:40.690

我自己也遇到过这个问题，但那是因为我忘记了它是如何完成的。这是我之前的代码：

```
public static string MakeRequest(string GetCountry, string GetTime, string Server, string Database)
    {
        var filter = Builders<RequestAccess>.Filter;
        var getCountryfilter = filter.Eq(x => x.GetCountry, GetCountry);
        var getTimefilter = filter.Eq(x => x.GetTime, GetTime);
        var databasefilter = filter.Eq(x => x.Database, Database);
        var serverfilter = filter.Eq(x => x.Servers, Server);

        var makeRequest = RequestCollection.Find(filter.Or(getCountryfilter, getTimefilter, databasefilter, serverfilter)).ToList();

        return makeRequest;
    } 
```

但下面的代码是正确的:)

```
public static List<RequestAccess> MakeRequest(string GetCountry, string GetTime, string Server, string Database)
    {
        var filter = Builders<RequestAccess>.Filter;
        var getCountryfilter = filter.Eq(x => x.GetCountry, GetCountry);
        var getTimefilter = filter.Eq(x => x.GetTime, GetTime);
        var databasefilter = filter.Eq(x => x.Database, Database);
        var serverfilter = filter.Eq(x => x.Servers, Server);

        var makeRequest = RequestCollection.Find(filter.Or(getCountryfilter, getTimefilter, databasefilter, serverfilter)).ToList();

        return makeRequest;
    } 
```

所以这意味着如果你想列出一些东西，那么不要在`public static ...`:)中使用“字符串”

# objective-c - 核心情节比例以适应情节问题

> ID：13871120
> 
> 赞同：2
> 
> 时间：2012-12-14T00:51:36.427
> 
> 标签：objective-c, ios, graph, core-plot

调用 scaleToFitPlots 后，我的 X 轴缩放正确，但我的 Y 轴太高了。附上两张截图，第一张图片：原始，第二张图片：我向下滚动后。

![在此处输入图像描述](../Images/31ac24201356272861191af56f1dbcc5.png) ![在此处输入图像描述](../Images/722a9ea02fc114d4db45c0343008c668.png)

我希望图表在绿色框中完全可见（从 Y=0 到 Y=MAX）。在 iPhone、iPad 上，我得到了这个错误的 Y 轴缩放。

出于某种原因，它认为 plotArea 比实际高？

我的图形配置代码片段：

```
-(void)configureGraph {
    CPTGraph *graph = [[CPTXYGraph alloc] initWithFrame:self.hostView.bounds];
    graph.plotAreaFrame.borderLineStyle = nil;
    self.hostView.hostedGraph = graph;

    //Controls padding between frame & draw
    [graph.plotAreaFrame setPaddingTop:20.0f];
    [graph.plotAreaFrame setPaddingRight:20.0f];
    [graph.plotAreaFrame setPaddingBottom:20.0f];
    [graph.plotAreaFrame setPaddingLeft:30.0f];
    //Controls padding between frame and graph (graph is wrapper)
    graph.paddingLeft = 0.0;
    graph.paddingTop = 0.0;
    graph.paddingRight = 0.0;
    graph.paddingBottom = 0.0;

    // 5 - Enable user interactions for plot space
    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *) graph.defaultPlotSpace;
    plotSpace.allowsUserInteraction = YES;

}

-(void)scaleToFitPlot
{
    CPTGraph *graph = [self getGraph];
    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *) graph.defaultPlotSpace;
    [plotSpace scaleToFitPlots:[NSArray arrayWithObjects:self.meterPlot, nil]];
}

-(void)configurePlots {
    // 1 - Get graph and plot space
    CPTGraph *graph = self.hostView.hostedGraph;
    CPTXYPlotSpace *plotSpace = (CPTXYPlotSpace *) graph.defaultPlotSpace;

    // 2 - Create the three plots
    meterPlot = [[CPTScatterPlot alloc] init];

    meterPlot.dataSource = self;
    meterPlot.identifier = MYMSymbolHourly;
    // Set plot delegate, to know when symbols have been touched
    // We will display an annotation when a symbol is touched, but this can be another graph!
    meterPlot.delegate                         = self;
    meterPlot.plotSymbolMarginForHitDetection  = 5.0f;

    //CPTColor *meterColor = [CPTColor greenColor];
    CPTColor *meterColor = [self orangeClr];

    [graph addPlot:meterPlot toPlotSpace:plotSpace];
    // 3 - Set up plot space
    printf("\nset initialscale");
    //[plotSpace scaleToFitPlots:[NSArray arrayWithObjects:meterPlot, nil]];
    [self scaleToFitPlot];
    CPTMutablePlotRange *xRange = [plotSpace.xRange mutableCopy];
    //[xRange expandRangeByFactor:CPTDecimalFromCGFloat(1.1f)];
    plotSpace.xRange = xRange;
    CPTMutablePlotRange *yRange = [plotSpace.yRange mutableCopy];
    //[yRange expandRangeByFactor:CPTDecimalFromCGFloat(1.2f)];
    plotSpace.yRange = yRange;
    // 4 - Create styles and symbols
    CPTMutableLineStyle *meterLineStyle = [meterPlot.dataLineStyle mutableCopy];
    meterLineStyle.lineWidth = 2.5;
    meterLineStyle.lineColor = meterColor;
    meterPlot.dataLineStyle = meterLineStyle;
    CPTMutableLineStyle *meterSymbolLineStyle = [CPTMutableLineStyle lineStyle];
    meterSymbolLineStyle.lineColor = meterColor;
    CPTPlotSymbol *meterSymbol = [CPTPlotSymbol ellipsePlotSymbol];
    meterSymbol.fill = [CPTFill fillWithColor:meterColor];
    meterSymbol.lineStyle = meterSymbolLineStyle;
    meterSymbol.size = CGSizeMake(6.0f, 6.0f);
    meterPlot.plotSymbol = meterSymbol;
}

-(void)configureAxes {
    // 1 - Create styles
    CPTMutableTextStyle *axisTitleStyle = [CPTMutableTextStyle textStyle];
    axisTitleStyle.color = [self grey222Clr];
    axisTitleStyle.fontName = @"Helvetica-Bold";
    axisTitleStyle.fontSize = 12.0f;
    CPTMutableLineStyle *axisLineStyle = [CPTMutableLineStyle lineStyle];
    axisLineStyle.lineWidth = 2.0f;
    axisLineStyle.lineColor = [self axisGreyClr];
    CPTMutableTextStyle *xAxisTextStyle = [[CPTMutableTextStyle alloc] init];
    xAxisTextStyle.color = [self grey222Clr]; // This is causing that line bug on y axis
    xAxisTextStyle.fontName = @"Helvetica-Bold";
    xAxisTextStyle.fontSize = 10.0f;

    CPTMutableLineStyle *tickLineStyle = [CPTMutableLineStyle lineStyle];
    tickLineStyle.lineColor = [self axisGreyClr];
    tickLineStyle.lineWidth = 2.0f;
    CPTMutableLineStyle *gridLineStyle = [CPTMutableLineStyle lineStyle];

    gridLineStyle.lineColor = [self axisGreyClr];
    gridLineStyle.lineWidth = 2.0f;

    gridLineStyle.dashPattern = [NSArray arrayWithObjects:[NSNumber numberWithFloat:0.8f], nil];
    gridLineStyle.patternPhase=0.0f;

    // 2 - Get axis set
    CPTXYAxisSet *axisSet = (CPTXYAxisSet *) self.hostView.hostedGraph.axisSet;
    // 3 - Configure x-axis
    CPTAxis *x = axisSet.xAxis;
    x.title = [self getXAxisTitleForChart];
    x.titleTextStyle = axisTitleStyle;
    x.titleOffset = 15.0f;
    x.axisLineStyle = axisLineStyle;
    x.labelingPolicy = CPTAxisLabelingPolicyNone;
    x.labelTextStyle = xAxisTextStyle;
    x.majorTickLineStyle = axisLineStyle;
    x.majorTickLength = 4.0f;
    x.tickDirection = CPTSignNegative;
    x.majorGridLineStyle = gridLineStyle;

    [self setXAxisLabels];

    CPTMutableTextStyle *yAxisTextStyle = [[CPTMutableTextStyle alloc] init];
    yAxisTextStyle.color = [self orangeClr]; 
    yAxisTextStyle.fontName = @"Helvetica-Bold";
    yAxisTextStyle.fontSize = 11.0f;

    // 4 - Configure y-axis
    CPTAxis *y = axisSet.yAxis;
    y.title = @"Usage kWh";
    y.titleTextStyle = axisTitleStyle;
    y.titleOffset = -46.0f;
    y.axisLineStyle = axisLineStyle;
    y.majorGridLineStyle = gridLineStyle;
    y.labelingPolicy = CPTAxisLabelingPolicyNone;
    y.labelTextStyle = yAxisTextStyle;

    y.labelOffset = 30.0f;
    y.majorTickLineStyle = axisLineStyle;
    y.majorTickLength = 4.0f;
    y.minorTickLength = 2.0f;
    y.tickDirection = CPTSignPositive;

    [self setYAxisLabels];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T00:20:27.377

第一张图片显示了正确的结果`-scaleToFitPlots:`。它计算的绘图范围恰好包含 x 和 y 的绘图数据。如果您已经知道所需的 y 范围（例如，Y=0 到 Y=MAX），那么直接设置即可。如果您只想缩放 x 轴，请调用`-scaleToFitPlots:`然后设置`yRange`。

# java - 使用 Java 和 XPath 提取网页内容

> ID：13871122
> 
> 赞同：0
> 
> 时间：2012-12-14T00:51:41.750
> 
> 标签：java, xpath, web-scraping

我正在尝试`org.w3c.dom.NodeList`从Java 中的[http://www.amazon.com/gp/bestsellers/electronics中提取一个。](http://www.amazon.com/gp/bestsellers/electronics)这是我用来在 Google Chrome JavaScript 控制台中显示结果的 XPath 语句：

`$x("//div[@class='zg_itemRightDiv_normal']")`

上面的语句完美无缺，但是当我使用 Java`javax.xml.xpath`和`org.w3c.dom`库时，我没有得到任何结果：

```
XPathExpression expr = xPath.compile("//div[@class='zg_itemRightDiv_normal']");
NodeList productNodes = (NodeList) expr.evaluate(doc, XPathConstants.NODESET);

// In the above productNodes definition, doc is a org.w3c.dom.DocumentFragment

System.out.println(productNodes.getLength()); // prints out '0' 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:51:50.733

这可能是因为当输入实际上是 HTML（而不是 XHTML）时，您正试图将输入视为 XML。

您需要先将 HTML 转换为 XHTML——我之前已经成功地使用了[TagSoup](http://ccil.org/~cowan/XML/tagsoup/)，但也有其他库可以做到这一点（JTidy、NekoHTML）。

TagSoup 将为您提供一个 SAX 解析器，然后您可以将其转换为 DOM，然后使用 XPath 进行处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:24:50.150

这个问题的解决方案最终是双重的：

1.  我正在阅读的`DocumentFragment`内容不包括我试图提取的信息；使用完整`Document`解决了问题
2.  出于某种原因，在我的 XPath 语句中将 HTML 标记大写允许我获取我想要的信息（即，`xPath.compile("//DIV[@class='zg_itemRightDiv_normal']")`）。

# google-chrome - 谷歌浏览器扩展弹出窗口：即使弹出窗口关闭也保持运行

> ID：13871128
> 
> 赞同：1
> 
> 时间：2012-12-14T00:51:50.413
> 
> 标签：google-chrome, google-chrome-extension, popup

所以我做了我的第一个扩展（一个广播电台），它工作得很好，但我有一个问题：

*   当弹出窗口关闭时，流停止播放。

基本上我的问题与这篇文章中的相同->[在 chrome 扩展中运行广播电台](https://stackoverflow.com/questions/13858238/running-a-shoutcast-radio-in-a-chrome-extension/)

* * *

### 所以我需要帮助的是：

*   即使弹出窗口关闭，也能保持音乐播放。

* * *

### 编码：

1 - 清单.json：

```
{
"name": "Kombat Syndicate Radio Extension",
"version": "1.0",
"manifest_version": 2,
"description": "Kombat Syndicate Radio",
"browser_action":   {
    "default_icon": "icon.png",
     "19": "icons/icon.png",  
     "128": "icons/icon_128.png",
    "default_popup": "ksradio.html"
},

    "permissions": ["tabs", "http://*/*"]

    } 
```

2 - ksradio.html：

```
<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css" />
<script src="script.js"></script>
</head>

<body>

<h1><img style="margin-top:-15px;-webkit-box-reflect: below 0px -webkit- gradient(linear, left top, left bottom, from(transparent), color-stop(87%, transparent),  to(white));
" src="icons/ks_radio_icon.png" /><br />Kombat Syndicate Radio</h1>

<div align="center" text-align="center" id="content">

<div id="smallffmp3">

<audio controls src="http://85.25.118.16:7502/;"></audio>

</div>

<a href="http://85.25.118.16:7502/listen.pls" target="_blank"><img  src="icons/VLC_48.png" title="VLC Media Player"/></a>

<a href="#" id="wmppop"><img src="icons/WMP_48.png" /></a>

<a href="http://85.25.118.16:7502/listen.pls" target="_blank"><img   src="icons/WinAmp_48.png" title="WinAmp Media Player" /></a>

<a href="http://85.25.118.16:7502/listen.pls" target="_blank"><img  src="icons/iTunes_48.png" title="iTunes" /></a>

<iframe align="middle" style="display:block;" name="infos"   src="http://phpks.comoj.com/radioinfos.php" width="65%" height="70%" frameborder="0"   scrolling="no" seamless></iframe>

</div>

</body>
</html> 
```

PS：我不得不提一下，我不太擅长 javascript :(

提前致谢！

# c++ - 带有省略号的可变参数模板计数参数作为参数传递

> ID：13871129
> 
> 赞同：0
> 
> 时间：2012-12-14T00:52:15.047
> 
> 标签：c++, macros, c-preprocessor, variadic-macros

[这个问题是https://stackoverflow.com/a/5365786/383306](https://stackoverflow.com/a/5365786/383306)的后续问题。

```
#define _DEFINE_REF_INTERNAL2(id, ...)

#define _DEFINE_REF_INTERNAL1(id)

#define _VA_NARGS_2_IMPL(_1, _2, N, ...) N
#define _VA_NARGS_2(...) _VA_NARGS_2_IMPL(__VA_ARGS__, 2, 1)
#define _DEFINE_REF_IMPL2(count, ...) _DEFINE_REF_INTERNAL ## count (__VA_ARGS__)
#define _DEFINE_REF_IMPL(count, ...) _DEFINE_REF_IMPL2(count, __VA_ARGS__)
#define DEFINE_REF(...) _DEFINE_REF_IMPL(_VA_NARGS_2(__VA_ARGS__), __VA_ARGS__)

DEFINE_REF(MyClass, typename... Args, Args...); 
// error: ‘_DEFINE_REF_INTERNALArgs’ does not name a type
DEFINE_REF(MyClass, typename T, T); // this is OK 
```

将省略号作为参数的一部分传递时，如何使宏技巧起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:11:03.103

问题不在于省略号。问题是您将三个参数传递`__VA_ARGS__`给 to `DEFINE_REF`，但`_VA_NARGS_2`最多只能处理两个参数。

一旦你解决了这个问题，程序（我相信）就会表现出所需的行为。gcc 4.7.2 和 Clang 3.2 都改变了这个：

```
#define DEFINE_REF_INTERNAL3(arg0, arg1, arg2) [arg0] [arg1] [arg2]

#define VA_NARGS_(_1, _2, _3, N, ...) N
#define VA_NARGS(...) VA_NARGS_(__VA_ARGS__, 3, 2, 1)

#define DEFINE_REF_IMPL_(count, ...) DEFINE_REF_INTERNAL ## count(__VA_ARGS__)
#define DEFINE_REF_IMPL(count, ...) DEFINE_REF_IMPL_(count, __VA_ARGS__)

#define DEFINE_REF(...) DEFINE_REF_IMPL(VA_NARGS(__VA_ARGS__), __VA_ARGS__)

DEFINE_REF(MyClass, typename... Args, Args...); 
DEFINE_REF(MyClass, typename T,       T      ); 
```

进入这个：

```
[MyClass] [typename... Args] [Args...];
[MyClass] [typename T] [T]; 
```

（另请注意，以下划线后跟大写字母开头的名称保留用于实现。您不得将此类名称用于您自己的宏。）

* * *

如果您的目标是 Visual C++，您将需要一个间接桶来完成这项工作，因为它在所有情况下都不会在重新扫描之前正确替换宏。以下将适用于 Visual C++（此解决方案也符合并适用于 gcc 和 Clang）：

```
#define DEFINE_REF_INTERNAL3(id, arg0, arg1) id [arg0] [arg1]

#define CONCATENATE_(x, y) x ## y
#define CONCATENATE(x, y) CONCATENATE_(x, y)

#define VA_NARGS1(_1, _2, _3, N, ...) N
#define VA_NARGS0(x) VA_NARGS1 x
#define VA_NARGS(...) VA_NARGS0((__VA_ARGS__, 3, 2, 1))

#define DEFINE_REF_IMPL1(macro, pargs) macro pargs
#define DEFINE_REF_IMPL0(count, ...) \
    DEFINE_REF_IMPL1(CONCATENATE(DEFINE_REF_INTERNAL, count), (__VA_ARGS__))
#define DEFINE_REF_IMPL(count, ...) DEFINE_REF_IMPL0(count, __VA_ARGS__)

#define DEFINE_REF(...) DEFINE_REF_IMPL(VA_NARGS(__VA_ARGS__), __VA_ARGS__) 
```

# xslt - 仅选择它们之间带有连字符的数字并忽略任何其他字符

> ID：13871132
> 
> 赞同：3
> 
> 时间：2012-12-14T00:52:28.213
> 
> 标签：xslt, xpath

我有一个无法控制输入数据的场景，例如我的输入可以是

```
<phoneNumber>6504323957</phoneNumber> 
```

或者

```
<phoneNumber>650-432-3957</phoneNumber> 
```

或者

```
<phoneNumber>(650)432-3957</phoneNumber> 
```

或者

```
<phoneNumber>650.432.3957</phoneNumber> 
```

但是我的输出应该总是这样

```
<areaCode>650</areaCode>
<phoneNumber>432-3957</phoneNumber> 
```

我正在尝试使用以下 xsl 来实现这一点，它仅适用于一种情况，不适用于其他情况。

```
<xsl:output method="xml" indent="yes"/>
<xsl:template match="/">
<xsl:element name="areaCode">
<xsl:value-of select="substring(phoneNumber,1,3)"/>
</xsl:element>
<xsl:element name="phoneNumber">
<xsl:value-of select="substring(phoneNumber,5,12)"/>
</xsl:element>
</xsl:template>
</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:12:26.410

尝试

```
<xsl:output method="xml" indent="yes"/>
<xsl:template match="/">
    <xsl:variable name="numbersonly" select="translate(phoneNumber, translate(phoneNumber,'0123456789',''), '')"/>
    <xsl:element name="areaCode">
        <xsl:value-of select="substring($numbersonly,1,3)"/>
    </xsl:element>
    <xsl:element name="phoneNumber">
        <xsl:value-of select="substring($numbersonly,4,3)"/>-<xsl:value-of select="substring($numbersonly,7,4)"/>
    </xsl:element>
</xsl:template> 
```

* * *

要处理没有区号的输入，您可以使用一些简单的数学运算，然后从右侧而不是从左侧选择（*假设完整的电话是 10 位数*）..

```
<xsl:output method="xml" indent="yes"/>
<xsl:template match="/">
    <xsl:variable name="numbersonly" select="translate(phoneNumber, translate(phoneNumber,'0123456789',''), '')"/>
    <xsl:variable name="length" select="string-length($numbersonly)"/>
    <xsl:element name="areaCode">
        <xsl:value-of select="substring($numbersonly,$length -9,3)"/>
    </xsl:element>
    <xsl:element name="phoneNumber">
        <xsl:value-of select="substring($numbersonly,$length -6,3)"/>-<xsl:value-of select="substring($numbersonly,$length -3,4)"/>
    </xsl:element>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T01:19:36.383

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="phoneNumber">
  <xsl:variable name="vbareNum" select="translate(.,'-().','')"/>
  <areaCode><xsl:value-of select="substring($vbareNum,1,3)"/></areaCode>
  <phoneNumber>
   <xsl:value-of select=
   "concat(substring($vbareNum,4,3),'-',substring($vbareNum,7))"/>
  </phoneNumber>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于此 XML 文档时**：

```
<nums>
    <phoneNumber>6504323957</phoneNumber>
    <phoneNumber>650-432-3957</phoneNumber>
    <phoneNumber>(650)432-3957</phoneNumber>
    <phoneNumber>650.432.3957</phoneNumber>
</nums> 
```

**产生想要的正确结果**：

```
<areaCode>650</areaCode>
<phoneNumber>432-3957</phoneNumber>
<areaCode>650</areaCode>
<phoneNumber>432-3957</phoneNumber>
<areaCode>650</areaCode>
<phoneNumber>432-3957</phoneNumber>
<areaCode>650</areaCode>
<phoneNumber>432-3957</phoneNumber> 
```

# hadoop - PIG UDF 处理多行元组拆分成不同的映射器

> ID：13871134
> 
> 赞同：2
> 
> 时间：2012-12-14T00:52:57.227
> 
> 标签：hadoop, amazon-web-services, mapreduce, user-defined-functions, apache-pig

我有每个元组跨越多行的文件，例如：

```
START
name: Jim
phone: 2128789283
address: 56 2nd street, New York, USA
END
START
name: Tom
phone: 6308789283
address: 56 5th street, Chicago, 13611, USA
END
.
.
. 
```

所以上面是我文件中的 2 个元组。我编写了我的 UDF，它定义了一个`getNext()`检查它是否为 START 的函数，然后我将初始化我的元组；如果是 END 那么我将返回元组（来自字符串缓冲区）；否则我只会将字符串添加到字符串缓冲区。

它适用于文件大小小于 64 MB 的 HDFS 块大小（在 Amazon EMR 上），而对于大于此的大小它将失败。我试着用谷歌搜索，找到这篇[博文](http://blog.rguha.net/?p=310)。Raja 的解释很容易理解，他提供了一个示例代码。但是代码正在实现该`RecordReader`部分，而不是`getNext()`用于 pig `LoadFunc`。只是想知道是否有人有处理多行猪元组拆分问题的经验？我应该继续`RecordReader`在 Pig 中实施吗？如果是这样，怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:54:50.997

*您可以像Guy*提到的那样预处理您的输入，或者可以应用[此处](https://stackoverflow.com/questions/8140416/hadoop-read-multiple-lines-at-a-time)描述的其他技巧。

我认为最干净的解决方案是实现一个自定义[InputFormat](http://hadoop.apache.org/docs/current/api/org/apache/hadoop/mapreduce/InputFormat.html)（连同它的 RecordReader），它创建一个记录/START-END。Pig 的[LoadFunc](http://pig.apache.org/docs/r0.10.0/api/index.html?org/apache/pig/LoadFunc.html)位于 Hadoop 的 InputFormat 之上，因此您可以定义您的 LoadFunc 将使用的 InputFormat。
自定义 LoadFunc 的原始骨架实现如下所示：

```
import java.io.IOException;
import org.apache.hadoop.mapreduce.InputFormat;
import org.apache.hadoop.mapreduce.Job;
import org.apache.hadoop.mapreduce.RecordReader;
import org.apache.hadoop.mapreduce.lib.input.FileInputFormat;
import org.apache.hadoop.mapreduce.lib.input.TextInputFormat;
import org.apache.pig.LoadFunc;
import org.apache.pig.backend.hadoop.executionengine.mapReduceLayer.PigSplit;
import org.apache.pig.data.Tuple;
import org.apache.pig.data.TupleFactory;

public class CustomLoader extends LoadFunc {

    private RecordReader reader;
    private TupleFactory tupleFactory;

    public CustomLoader() {
        tupleFactory = TupleFactory.getInstance();
    }

    @Override
    public InputFormat getInputFormat() throws IOException {
        return new MyInputFormat(); //custom InputFormat
    }

    @Override
    public Tuple getNext() {
        Tuple result = null;
        try {
            if (!reader.nextKeyValue()) {
                return null;
            }
            //value can be a custom Writable containing your name/value 
            //field pairs for a given record
            Object value = reader.getCurrentValue();
            result = tupleFactory.newTuple();
            // ...
            //append fields to tuple
        }
        catch (Exception e) {
            // ...
        }
        return result;
    }

    @Override
    public void prepareToRead(RecordReader reader, PigSplit pigSplit) 
      throws IOException {
        this.reader = reader;
    }

    @Override
    public void setLocation(String location, Job job) throws IOException {
        FileInputFormat.setInputPaths(job, location);
    }
} 
```

在`LoadFunc`初始化`InputFormat`和 its之后`RecordReader`，它会定位数据的输入位置并开始从 recordReader 获取记录，创建结果元组（*getNext()*）直到输入被完全读取。

关于自定义 InputFormat 的一些说明：

我将创建一个自定义 InputFormat，其中 RecordReader 是以下的修改版本 `org.apache.hadoop.mapreduce.lib.input.LineRecordReader`： 大多数方法将保持不变，除了`initialize()`：它将调用自定义 LineReader（基于`org.apache.hadoop.util.LineReader`）。InputFormat 的键是行偏移量（Long），值是*自定义的 Writable*。这会将记录的字段（即 START-END 之间的数据）保存为键值对列表。每次`nextKeyValue()`调用 RecordReader 时，LineReader 都会将记录写入自定义 Writable。整个事情的要点是**你如何实现** `LineReader.readLine()`。

另一种可能更简单的方法是将 TextInputFormat 的分隔符（在 Hadoop 0.23 中可配置，请参阅 参考资料`textinputformat.record.delimiter`）更改为适合您的数据结构的分隔符（如果可能的话）。在这种情况下，您最终将获得`Text`需要从中拆分和提取 KV 对并放入元组的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-15T14:21:29.113

如果可以将 start 作为分隔符，则下面的代码可能在没有 UDF 的情况下工作

```
SET textinputformat.record.delimiter 'START';
a  =  load  '<input path>' as  (data:chararray);
dump a; 
```

输出看起来像：

```
 (
    name: Jim
    enter code here`phone: 2128789283
    address: 56 2nd street, New York, USA
    END
    )

    (
    name: Tom
    phone: 6308789283
    address: 56 5th street, Chicago, 13611, USA
    END
    ) 
```

现在两者都被分成两个元组。

# php - fgets 是否忽略某些字符组合？

> ID：13871135
> 
> 赞同：0
> 
> 时间：2012-12-14T00:53:10.433
> 
> 标签：php

我正在使用 fgets 逐行读取文件。某些字符串组合被忽略。我猜这是作为转义字符被捡起来的，但我不明白。

我的代码是：

```
$myFile = $_GET['filename'];

$file = fopen($myFile, "r");

while (!feof($file))
{
   $currentLine = fgets($file);
   print $currentLine;
} 
```

我的文件是：

```
15:37:33 Me <Washington  USA>  outdoor
15:39:34 Me <Washington USA>  outdoor
15:41:36 Me <208 Terrace Ct SE USA>  outdoor
15:43:37 Me <305 Glyndon St SE USA>  indoor 
```

然而输出只是这样：

```
15:37:33 me outdoor 15:39:34 me outdoor 15:41:36 me <208 Terrace Ct SE USA> outdoor 15:43:37 me <305 Glyndon St SE USA> indoor 
```

为什么忽略<后跟字符而不是<后跟数字？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:56:26.803

您是直接在页面上查看还是在源中查看？感觉浏览器隐藏了它们:))

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T01:12:03.353

暂时忽略直接从`$_GET`数组打开文件的问题，您需要将括号转换为 HTML 实体。要正确显示换行符，您可以添加`<br>`到每行的末尾，或者使用`<pre>`和`\n`像这样：

```
$myFile = $_GET['filename'];
$file = fopen($myFile, "rb");
echo '<pre>';
while ($line = fgets($file)) {
    echo rtrim(htmlentities($line)), "\n";
} 
```

现在，像这样打开文件。这是一个非常非常糟糕的主意。如果您只是将代码用于自己的用途，那没关系，但即便如此，它也可能会导致您没有考虑过的问题。最好的办法是永远不要使用客户端提供的数据来打开文件，但如果你必须确保路径是干净的并且不包含恶意内容（例如前面的斜杠或点等）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T00:56:59.627

浏览器将 < 和 > 之间的文本解释为 HTML 标记（至少是那些不以数字开头的标记）。如果您查看页面的来源，我相信您会找到完整的文本。

要解决您的问题，请使用 PHP 的 htmlentities() 函数，如下所示：

```
print htmlentities($currentLine); 
```

[http://ch2.php.net/manual/en/function.htmlentities.php](http://ch2.php.net/manual/en/function.htmlentities.php)

# iphone - 在IOS中找出下载的图像文件大小

> ID：13871141
> 
> 赞同：4
> 
> 时间：2012-12-14T00:53:38.050
> 
> 标签：iphone, ios, xcode, download, file-handling

您好我想运行一个线程并检查文件的当前下载大小。

这就是我使用的

```
UIImage *image = [[UIImage alloc] initWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@"http://lasp.colorado.edu/home/wp-content/uploads/2011/03/suncombo1.jpg"]]];

NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

NSString *jpegFilePath = [NSString stringWithFormat:@"%@/test.jpeg",docDir];
NSData *data2 = [NSData dataWithData:UIImageJPEGRepresentation(image, 1.0f)];//1.0f = 100% quality
[data2 writeToFile:jpegFilePath atomically:YES];
downloadStatus.text =[NSString stringWithFormat:@"size: %zd", malloc_size(data2)];

[image release]; 
```

我也尝试将 malloc_size(data2) 更改为图像，但这又不是真正的结果。我知道这没有线程并且在下载过程中不检查但是我应该在这里使用什么来查看文件大小？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T01:04:43.603

几点观察：

1.  您的问题假定您尝试检索大小的尝试`NSData`失败了。他们不是。获取 a 大小的正确方法`NSData`是 via `length`。

2.  但是，您的困惑源于一个错误的假设，即在往返过程中采用外部生成的 JPEG`UIImage`并`UIImageJPEGRepresentation`会产生相同的`NSData`. 这本来是极不可能的。有太多不同的 JPG 设置可能会更改（请参阅[JPEG 维基百科页面](http://en.wikipedia.org/wiki/JPEG)）。我们当然不知道原始文件使用了哪些设置。我知道`UIImage`和/或`UIImageJPEGRepresentation`更改了文件的颜色空间。我敢打赌它还会做很多其他事情。

3.  所以你的结果是正确的。原始文件为 2.6mb，生成的文件为 4.5mb。如果将`compressionQuality`1.0 更改为 0.99，生成的文件只有 1.4mb！但是如果你想要原始文件，只需先保存它（就像我在下面做的那样）。

考虑以下代码，它下载图像文件，保存它，将其加载到 a`UIImage`中，通过 重新提取它`UIImageJPEGRepresentation`，并保存图像的另一个副本：

```
// let's make filenames where we'll store the files

NSString *documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
NSString *suncomboOrig = [documentsPath stringByAppendingPathExtension:@"suncombo1-orig.jpg"];
NSString *suncomboReprocessed = [documentsPath stringByAppendingPathExtension:@"suncombo1-reprocessed.jpg"];

// let's download the original suncombo1.jpg and save it in Documents and display the size

NSURL *url = [NSURL URLWithString:@"http://lasp.colorado.edu/home/wp-content/uploads/2011/03/suncombo1.jpg"];
NSData *data = [NSData dataWithContentsOfURL:url];
NSLog(@"original = %d", [data length]);
[data writeToFile:suncomboOrig atomically:NO];

// let's load that into a UIImage

UIImage *image = [UIImage imageWithData:data];

// let's extract data out of the image and write that to Documents, too, also logging the size of that

NSData *data2 = UIImageJPEGRepresentation(image, 1.0);
NSLog(@"reprocessed = %d", [data2 length]);
[data2 writeToFile:suncomboReprocessed atomically:NO]; 
```

它的作用是报告：

```
2012-12-13 22:30:39.576 imageapp [90647:c07] 原始 = 2569128
2012-12-13 22:30:40.141 imageapp [90647:c07] 重新处理 = 4382876

```

因此，我保存的第一个文件（我怀疑它与您服务器上的文件相同）是 2.5mb，并且在往返于 a`UIImage`并通过 4.3mb 重新提取后的文件。如果我查看上面代码保存的两个文件，我可以确认这些`NSData`大小是正确的。

* * *

我最初的答案是基于这样的假设，即 OP 要么无法检索 a 的大小，要么`NSData`简单问题背后存在一些微妙的问题（例如想要在下载开始之前获得大小）。无论如何，我已经在上面扩展了我的答案，但出于历史目的，我会保留我的原始答案：

**原答案：**

该`NSData`属性[`length`](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/Foundation/Classes/NSData_Class/Reference/Reference.html#//apple_ref/occ/instm/NSData/length)告诉您下载了多少字节。例如`[data2 length]`。

如果它真的很大，您可以使用[`NSURLConnection`](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)异步下载它，这取决于您的 Web 服务器，可能会在方法中开始下载之前提供总文件大小[`didReceiveResponse`](http://developer.apple.com/library/ios/documentation/Foundation/Reference/NSURLConnectionDataDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSURLConnectionDataDelegate/connection%3adidReceiveResponse%3a)（使用参数[`expectedContentLength`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLResponse_Class/Reference/Reference.html#//apple_ref/occ/instm/NSURLResponse/expectedContentLength)中的属性`NSHTTPURLResponse *response`）。

下载的另一个好处`NSURLConnection`是您不必在下载时将整个文件加载到内存中，而是可以将其直接流式传输到持久存储，这在您下载多个大文件时特别有用同时。如果您正在下载大小合理的文件，使用`NSURLConnection`下载 是多余的，但是在下载大文件并且您想要一个进度指示器（或想要在下载开始之前获取文件大小）时它可能会很好。

但是，如果您只想知道下载了多少字节，请`NSData`使用`length`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T01:04:30.147

您可以只使用 C`FILE`类来获取文件大小。

```
 FILE * handle = fopen([jpegFilePath UTF8String], "r");
 fseek(handle, EOF); // seek to end of file
 int size = ftell(handle); // returns position in bytes
 fclose(); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T01:26:12.940

因为您说“当前”大小并提到了一个线程，所以我猜您正在尝试确定收到的文件大小。在这种情况下，您可以从 中免费获取线程`NSURLConnection`，并且可以从委托方法中获取接收到的数据大小......

为下载的数据创建一个实例变量：

```
@property (nonatomic, strong) NSMutableData *data; 
```

创建并启动连接：

```
NSURL *url = [NSURL URLWithString:@"http://lasp.colorado.edu/home/wp-content/uploads/2011/03/suncombo1.jpg"];
NSURLRequest *request = [NSURLRequest requestWithURL:url];

self.data = [NSMutableData data];
NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self]; 
```

[在NSURLConnectionDataDelegate](http://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSURLConnectionDataDelegate_protocol/Reference/Reference.html)中实现所需的方法。对于您的问题，特殊部分是：

```
- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [self.data appendData:data];

    NSUInteger bytesSoFar = [self.data length];
    // you're on the app main thread here, so you can do something
    // to the UI to indicate progress
    downloadStatus.text = [NSString stringWithFormat@"size: %d", bytesSoFar];
} 
```

关于协议其余部分的好文档在[这里](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Tasks/UsingNSURLConnection.html)。连接完成后，您可以像使用`dataWithContentsOfURL`...

```
- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

    UIImage *image = [[UIImage alloc] initWithData:self.data];
    downloadStatus.text = [NSString stringWithFormat@"size: %d", [self.data length]];
} 
```

# facebook - 通过 Graph API 从 order_id 获取 Facebook ID——偶尔会出现错误的结果

> ID：13871145
> 
> 赞同：1
> 
> 时间：2012-12-14T00:53:51.223
> 
> 标签：facebook, facebook-graph-api

我一直在编写一个报告脚本，其中一部分涉及从通过 Payments Reports API 生成的报告中获取与购买相关的 Facebook ID。

报告生成精美，然后我可以在 Graph API 中抛出任何 order_id 以获取 Facebook ID：

[https://graph.facebook.com/](https://graph.facebook.com/) {order_id}?access_token={app_access_token}

返回：

```
{
  "id": "{order_id}"
  "from":
  "to":
  "amount":
  "status": ""
  "application":
  "country":
  "created_time":
  "updated_time":
} 
```

根据文档，“发件人”部分是与该帐户关联的 Facebook ID。

有时，我有时会得到一长串字母而不是 ID。

我在解释这些时一直找不到更多信息——我怀疑这些购买不再与活跃的 Facebook ID 相关联，但在这里真的不确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:19:50.033

刚刚检查过 - 它似乎不在 API 文档中（将尝试查看为什么会这样），但是......

如果下订单的用户随后删除或阻止了您的应用程序 - （即，如果下订单的用户不再是您的应用程序的用户），这是预期的。在这种情况下，您会收到 uid 的加密形式（其中应该在特定用户在您的应用中下的所有订单中保持一致）

# c# - 提取大型 XML 的一部分

> ID：13871148
> 
> 赞同：0
> 
> 时间：2012-12-14T00:54:07.020
> 
> 标签：c#, xml, linq

我必须提取 XML 的一部分。我的 XML 文件可以包含数千个节点，我想只获取其中的一部分并将这部分作为 xml 字符串。

我的 XML 结构：

```
<ResponseMessage xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
    <ErrorResponse>
        <Code>SUCCESS</Code>
        <Message>Success</Message>
    </ErrorResponse>
    <OutputXml>
        <Response>
            <Product>
                <child1>xxx</child1>
                <child2>xxx</child2>
                ...
            </Product>
            <Product>
                <child1>xxx</child1>
                <child2>xxx</child2>
                ...
            </Product>
            ...
        </Response>
    </OutputXML>
</ResponseMessage> 
```

我从这样的网络服务中获取 XML：

```
...
System.Net.WebResponse wResponse = req.GetResponse();
reqstream = wResponse.GetResponseStream();
System.IO.StreamReader reader = new System.IO.StreamReader(reqstream);

System.Xml.Linq.XDocument xmlResponse = System.Xml.Linq.XDocument.Parse(reader.ReadToEnd()); 
```

然后我尝试将 XML 放入通用集合中以使用 linq 处理它：

```
int startIndex = 0;
int nbItem = 25;
System.Text.StringBuilder outputXml = new System.Text.StringBuilder();
System.Collections.Generic.IEnumerable<System.Xml.Linq.XElement> partialList =
   xmlResponse.Elements("Response").Skip(startIndex).Take(nbItem);

foreach (System.Xml.Linq.XElement x in partialList)
{
    outputXml.Append(x.ToString());
} 
```

我的问题是我的列表总是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:41:18.300

您可以使用以下代码来使用 LINQ To Xml：

```
IEnumerable<XElement> elements = xmlResponse.Root.Element("OutputXml").Element("Response").Elements("Product");

foreach(XElement element in elements)
{
    // Do Work Here
} 
```

这会将列表过滤为仅产品，并且会在不使用索引的情况下正确选择它们。将索引与 xml 一起使用并不是最好的主意，因为 xml 可以更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:07:58.727

您可以使用[XPathEvaluate](http://msdn.microsoft.com/en-us/library/bb341675.aspx)来读取子树。

如果您的列表为空，则可能是名称空间问题，因此您没有在代码中考虑此名称空间`xmlns:i="http://www.w3.org/2001/XMLSchema-instance"`。`XDocument`/`XElement`无法自动解析命名空间。

请参阅[本主题](https://stackoverflow.com/questions/2340411/use-linq-to-xml-with-xml-namespaces)，了解如何将命名空间与 LINQ-to-XML 一起使用。

# python - 如何从熊猫的日期时间索引中删除日期？

> ID：13871150
> 
> 赞同：4
> 
> 时间：2012-12-14T00:54:24.890
> 
> 标签：python, pandas

这个问题背后的想法是，当我处理不同日期的完整日期时间标签和数据时，我有时想比较每小时行为的比较情况。但是因为日子不同，我不能直接在彼此之上绘制两个 1 小时的数据集。

我天真的想法是我需要从两个集合的日期时间索引中删除日期，然后将它们绘制在彼此之上。最好的方法是什么？

或者，解决我的问题的更好方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T05:19:58.840

这可能不完全是它，但应该可以帮助你，假设`ts`是你的时间序列：

```
hourly = ts.resample('H')
hourly.index = pd.MultiIndex.from_arrays([hourly.index.hour, hourly.index.normalize()])
hourly.unstack().plot() 
```

如果您根本不在乎这一天，就`hourly.index = hourly.index.hour`应该工作

# python - 为什么泡菜吃内存？

> ID：13871152
> 
> 赞同：19
> 
> 时间：2012-12-14T00:54:39.273
> 
> 标签：python, performance, file-io, pickle, persistent

我试图处理将大量腌制数据分小块写入磁盘的问题。这是示例代码：

```
from cPickle import *
from gc import collect

PATH = r'd:\test.dat'
@profile
def func(item):
    for e in item:
        f = open(PATH, 'a', 0)
        f.write(dumps(e))
        f.flush()
        f.close()
        del f
        collect()

if __name__ == '__main__':
    k = [x for x in xrange(9999)]
    func(k) 
```

open() 和 close() 放置在循环内，以排除内存中数据积累的可能原因。

为了说明问题，我附上了使用 Python 3d 方模块[memory_profiler](http://pypi.python.org/pypi/memory_profiler)获得的内存分析结果：

```
 Line #    Mem usage  Increment   Line Contents
==============================================
    14                           @profile
    15      9.02 MB    0.00 MB   def func(item):
    16      9.02 MB    0.00 MB       path= r'd:\test.dat'
    17
    18     10.88 MB    1.86 MB       for e in item:
    19     10.88 MB    0.00 MB           f = open(path, 'a', 0)
    20     10.88 MB    0.00 MB           f.write(dumps(e))
    21     10.88 MB    0.00 MB           f.flush()
    22     10.88 MB    0.00 MB           f.close()
    23     10.88 MB    0.00 MB           del f
    24                                   collect() 
```

在循环执行期间，会出现奇怪的内存使用量增长。怎样才能消除？有什么想法吗？

当输入数据量增加时，这些附加数据的量可以增长到比输入大得多的大小（更新：在实际任务中，我得到 300+Mb）

还有更广泛的问题——有哪些方法可以在 Python 中正确处理大量 IO 数据？

**upd：** 我重写了只留下循环体的代码，以查看具体何时发生增长，结果如下：

```
Line #    Mem usage  Increment   Line Contents
==============================================
    14                           @profile
    15      9.00 MB    0.00 MB   def func(item):
    16      9.00 MB    0.00 MB       path= r'd:\test.dat'
    17
    18                               #for e in item:
    19      9.02 MB    0.02 MB       f = open(path, 'a', 0)
    20      9.23 MB    0.21 MB       d = dumps(item)
    21      9.23 MB    0.00 MB       f.write(d)
    22      9.23 MB    0.00 MB       f.flush()
    23      9.23 MB    0.00 MB       f.close()
    24      9.23 MB    0.00 MB       del f
    25      9.23 MB    0.00 MB       collect() 
```

似乎 dumps() 吃掉了内存。（虽然我实际上认为它会是 write()）

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-08-16T09:38:39.967

泡菜消耗大量内存，请参阅此处的解释：http: [//www.shocksolution.com/2010/01/storing-large-numpy-arrays-on-disk-python-pickle-vs-hdf5adsf/](http://www.shocksolution.com/2010/01/storing-large-numpy-arrays-on-disk-python-pickle-vs-hdf5adsf/)

> **为什么 Pickle 会消耗这么多内存？**原因是 HDF 是二进制数据管道，而 Pickle 是对象序列化协议。Pickle 实际上由一个简单的虚拟机 (VM) 组成，它将一个对象转换为一系列操作码并将它们写入磁盘。为了解开某些东西，VM 读取并解释操作码并重建一个对象。这种方法的缺点是 VM 必须在将对象写入磁盘之前在内存中构建对象的完整副本。

Pickle 非常适合小型用例或测试，因为在大多数情况下，内存消耗并不重要。

对于必须转储和加载大量文件和/或大文件的密集工作，您应该考虑使用另一种方式来存储数据（例如：hdf，为您的对象编写自己的序列化/反序列化方法，...）

# ruby-on-rails - GitLab + apache + Phusion Passenger -> 没有这样的文件或目录 - config/environment.rb

> ID：13871154
> 
> 赞同：2
> 
> 时间：2012-12-14T00:54:54.670
> 
> 标签：ruby-on-rails, git, apache, passenger, gitlab

我正在使用官方手册[https://github.com/gitlabhq/gitlabhq/blob/stable/doc/install/installation.md](https://github.com/gitlabhq/gitlabhq/blob/stable/doc/install/installation.md)安装 Gitlab，但我不想使用 ngix，而是将 apache 与乘客一起使用. 我必须承认我仍然是一个 linux 新手。

无论如何，这是错误：

> 错误消息：没有这样的文件或目录 - config/environment.rb

这是我的 apache 配置：

> ServerAdmin webmaster@localhost

```
 DocumentRoot /var/www
    RailsBaseURI /gitlab
    RackBaseURI /gitlab
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory /var/www/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>

    ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
    <Directory "/usr/lib/cgi-bin">
            AllowOverride None
            Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
            Order allow,deny
            Allow from all
    </Directory>
    <Directory /var/www/gitlab>
            Options -MultiViews
    </Directory>

    ErrorLog ${APACHE_LOG_DIR}/error.log

    # Possible values include: debug, info, notice, warn, error, crit,
    # alert, emerg.
    LogLevel warn

    CustomLog ${APACHE_LOG_DIR}/access.log combined 
```

任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T06:37:43.777

你不应该在你的配置中有这个：

```
RailsBaseURI /gitlab
RackBaseURI /gitlab 
```

正如 Phusion Passenger 文档中所解释的，“RailsBaseURI”表示“我在该 URI 下有一个 Rails **2应用程序”。**Gitlab 是 Rails 3 应用程序，因此您需要“RackBaseURI”。但是您同时指定了两者，并且“RailsBaseURI”具有优先权，因此 Phusion Passenger 认为 /gitlab 是 Rails 2 应用程序。

摆脱“RailsBaseURI”，你应该没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-28T08:39:08.907

嗯很可能是其中之一

```
DocumentRoot /var/www
RailsBaseURI /gitlab
RackBaseURI /gitlab 
```

只是指向错误的目录。你在哪个目录下查看了 gitlab 代码？它与价值观相符吗？

顺便说一句，我使用与您运行 gitlab (apache+passenger) 几乎相同的设置，并且只设置了 DocumentRoot。

供您参考，这是我的虚拟主机配置，也许它可以帮助您：

```
<VirtualHost *:80>
        ServerAdmin webmaster@localhost
        ServerName git.your_server_address

        PassengerMinInstances 1
        DocumentRoot /home/gitlab/gitlab/public
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /var/www/>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Order allow,deny
                allow from all
        </Directory>

        ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
        <Directory "/usr/lib/cgi-bin">
                AllowOverride None
                Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
                Order allow,deny
                Allow from all
        </Directory>

        ErrorLog ${APACHE_LOG_DIR}/error.log

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel warn

        CustomLog ${APACHE_LOG_DIR}/access.log combined

    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>
</VirtualHost> 
```

# wordpress - mod deflate 不压缩根目录的子目录

> ID：13871156
> 
> 赞同：6
> 
> 时间：2012-12-14T00:55:27.513
> 
> 标签：wordpress, .htaccess, gzip, deflate

我尝试解决 gzip 放气问题大约需要 48 小时，并意识到我可能需要寻求帮助，呵呵。

在意识到我需要在我的 php.ini 文件中打开压缩后，我终于通过 .htaccess 在我的共享 Unix 服务器上启用了 deflate 模块。

PageSpeed 告诉我，我的根 HTML 是用 gzip 编码的网站，我为 Wordpress 网站 theoleandersofsanleon.com 获得了 77.3% 的压缩，但任何子目录中的文件都没有被压缩（主要是我的 wordpress 中的 css 和 js 文件目录及其子目录）。

我认为没有必要，但我继续尝试使用指令目录，然后使用指令位置无济于事。

如果您需要查看任何服务器规范，我会在根目录中放置一个 phpinfo.php 文件。

这是我的 .htaccess 文件中针对我的 htdocs 目录和 wordpress 目录的内容：

```
<IfModule mod_deflate.c>
# Insert filters
AddOutputFilterByType DEFLATE text/plain
AddOutputFilterByType DEFLATE text/html
AddOutputFilterByType DEFLATE text/xml
AddOutputFilterByType DEFLATE text/css
AddOutputFilterByType DEFLATE application/xml
AddOutputFilterByType DEFLATE application/xhtml+xml
AddOutputFilterByType DEFLATE application/rss+xml
AddOutputFilterByType DEFLATE application/javascript
AddOutputFilterByType DEFLATE application/x-javascript
AddOutputFilterByType DEFLATE application/x-httpd-php
AddOutputFilterByType DEFLATE application/x-httpd-fastphp
AddOutputFilterByType DEFLATE image/svg+xml

# Drop problematic browsers
BrowserMatch ^Mozilla/4 gzip-only-text/html
BrowserMatch ^Mozilla/4\.0[678] no-gzip
BrowserMatch \bMSI[E] !no-gzip !gzip-only-text/html

# Make sure proxies don't deliver the wrong content
Header append Vary User-Agent env=!dont-vary
</IfModule>

# BEGIN WordPress
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /index.php [L]
</IfModule>

# END WordPress 
```

如果您需要更多信息，请告诉我，非常感谢您的帮助，我们将不胜感激，我将能够开始让我的头发重新长出来 8-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T12:17:37.690

在您的顶级 .htaccess 文件中尝试此操作。这是在 cPanel 中使用优化器时生成的内容。

```
<IfModule mod_deflate.c>
    SetOutputFilter DEFLATE
  <IfModule mod_setenvif.c>
    # Netscape 4.x has some problems...
    BrowserMatch ^Mozilla/4 gzip-only-text/html

    # Netscape 4.06-4.08 have some more problems
    BrowserMatch ^Mozilla/4\.0[678] no-gzip

    # MSIE masquerades as Netscape, but it is fine
    # BrowserMatch \bMSIE !no-gzip !gzip-only-text/html

    # NOTE: Due to a bug in mod_setenvif up to Apache 2.0.48
    # the above regex won't work. You can use the following
    # workaround to get the desired effect:
    BrowserMatch \bMSI[E] !no-gzip !gzip-only-text/html

    # Don't compress images
    SetEnvIfNoCase Request_URI .(?:gif|jpe?g|png)$ no-gzip dont-vary
  </IfModule>

  <IfModule mod_headers.c>
    # Make sure proxies don't deliver the wrong content
    Header append Vary User-Agent env=!dont-vary
  </IfModule>
</IfModule> 
```

# css - 修复 HTML 时如何将标签放在输入的左侧——我只能更改 CSS

> ID：13871161
> 
> 赞同：0
> 
> 时间：2012-12-14T00:55:41.600
> 
> 标签：css, jquery-ui, datatables

使用 DataTables，我无法控制生成的 HTML。它会自动生成：

```
<div class="dataTables filter" id="categories_filter">
  <label>
    Search:
    <input type="text" aria-controls="categories">
  </label>
</div> 
```

似乎没有任何方法可以关闭`<input>`标签或将其移出`<label>`标签。

当我不添加任何 CSS 时，它会读取 DataTables 自动包含的 CSS，它将“搜索：”放在搜索框上方，而不是左侧。每当我尝试将自动生成的 CSS 粘贴到此框中时，此网页都会出现，但这里它[位于 Gist](https://gist.github.com/4281647)中。

使用 CSS 和现有的 HTML，我现在试图让“搜索：”这个词出现在搜索框的左侧，但没有成功。

使用 SCSS，我最近的尝试是：

```
.dataTables_filter label {
  display: inline;
  float: none;
  text-align: right;
  input {
    display: inline-block;
    float: none;
  }
} 
```

编译为：

```
.dataTables_filter label {
  display: inline;
  float: none;
  text-align: right;
}

.dataTables_filter label input {
  display: inline-block;
  float: none;
} 
```

自动包含的 CSS 文件是：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:53:11.223

问题是搜索框扩展到了 div 的整个宽度，没有为标签留下空间。一旦我减小了它的宽度，标签就会卡入到位。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T01:18:18.770

你可以使用 ajax 重新排序它们

[http://api.jquery.com/insertAfter/](http://api.jquery.com/insertAfter/)

# python - 为什么 Django 1.0.x 无法从 PyPI 安装？

> ID：13871162
> 
> 赞同：7
> 
> 时间：2012-12-14T00:55:49.443
> 
> 标签：python, django, virtualenv, pip, easy-install

我在virtualenv上试过：

```
(venv) $ pip install Django==1.0.4
Downloading/unpacking Django==1.0.4
  Could not find a version that satisfies the requirement Django==1.0.4 (from versions: )
No distributions matching the version for Django==1.0.4
Storing complete log in /home/tokibito/.pip/pip.log 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-14T01:09:28.110

不幸的是，PyPI 只有 Django 1.1.4 及更高版本。如果你想要旧版本，你可以直接从 github 安装：

> pip install git+https://github.com/django/django.git@1.0.4

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T01:09:35.333

您总是可以将[您的 requirements.txt](http://www.pip-installer.org/en/latest/requirements.html#git)直接指向您想要的来自[官方 Github 存储库](https://docs.djangoproject.com/en/1.4/topics/install/#installing-development-version)的版本。我从来没有这样做过，所以我无法引导您完成它，但如果您*需要*运行不在 PyPI 上的特定版本，这似乎是一个可行的选择。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-27T13:53:44.287

您可以在 requirements.txt 文件中指定替代代码源。

```
#Django==1.0.4
git+https://github.com/django/django.git@1.0.4 
```

# internet-explorer - 左浮动 在 IE 8/9 中看不到填充

> ID：13871170
> 
> 赞同：0
> 
> 时间：2012-12-14T00:56:55.713
> 
> 标签：internet-explorer, html-lists, padding

我在使用浮动 LI 的网站上有一个导航栏。除了 IE 8/9 之外，它们在所有浏览器中看起来都很棒。似乎这些 IE 浏览器由于某种原因无法识别 padding 属性（无论我将值设置为什么，它都不会反映对其所做的任何更改）。但是其他所有浏览器都会这样做。在我看过的任何现有问题中似乎都找不到答案。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:15:55.227

虽然我实际上并不拥有 Internet Explorer 8 或 9。但我了解使用它时出现的问题。我自己搜索了一下，找到了这篇文章。虽然它与 li 无关，而是与表有关。我相信同样的方法会奏效。

[带有 CSS 的填充表在 IE 上不起作用](https://stackoverflow.com/questions/4795803/padding-table-with-css-doesnt-work-on-ie)

所描述的方法是将代码包装在 div 标签周围并在 div 上放置填充，如下所示：

```
<div style="padding: 0px 13px 0px 13px;">
<li>Your normal list goes here</li>
</div> 
```

我希望这对你有用。

# android - 如何在android中下载网络缓冲区？

> ID：13871173
> 
> 赞同：1
> 
> 时间：2012-12-14T00:58:31.607
> 
> 标签：android, spring, download

我正在开发 Galaxy Note 10.1

下载动作启动java spring 动作。

此下载操作可在 PC、移动设备浏览器中进行

问题是 Galaxy Note 10.1 内置浏览器

这个浏览器的 userAgent 是

“Mozilla/5.0 (Linux; U; Android 4.0.4; ko-kr; SHW-M480W Build/IMM76D) AppleWebKit/534.30 (KHTML, like Gecko) 版本/4.0 Safari/534.30”

而android的下载方式是

mWebView.setDownloadListener(new DownloadListener(){ public void onDownloadStart(String url, String sUserAgent, String contentDisposition, String mimetype, long contentLength) { URL urls = null; String fileUrl = ""; String mPath = ""; Log.v( "sUserAgent", sUserAgent);

```
 String condition[] = contentDisposition.split("=");
            String x = condition[1];
            Log.d("test",x);
            try {
                fileUrl = URLDecoder.decode(x, "UTF-8");
            } catch(Exception e) {
                e.printStackTrace();
            }
            try {
                urls = new URL(url);
            } catch (MalformedURLException e) {
                e.printStackTrace();
            }
            String fileName[] = url.split("/");
            Log.d("test", url);
            try {
                HttpURLConnection conn= (HttpURLConnection)urls.openConnection();
                conn.setDoOutput(true);
                conn.connect();
                mPath = Environment.getExternalStorageDirectory()+"/Download/";

                String chkPath = Environment.getExternalStorageDirectory()+"/Download/"+fileUrl;
                File chkFile = new File(chkPath);
                if(chkFile.exists() == true){}
                else {
                    File f = new File(mPath);
                    f.mkdirs();
                    File OutputFile = new File(f, fileUrl);
                    FileOutputStream fos = new FileOutputStream(OutputFile);
                    InputStream is = conn.getInputStream();
                    byte[]buffer = new byte[24576];
                    int len1 = 0;

                    while((len1 = is.read(buffer)) != -1) {
                        fos.write(buffer, 0, len1);
                    }
                    fos.close();
                    is.close();
                }
            } catch (IOException e) {
                e.printStackTrace();
            }
            Toast.makeText(getApplicationContext(), "DOWNLOAD COMPLETED", 0).show();
            File files = new File(mPath+fileUrl);
            Log.e("msg",mPath+fileUrl+"");
            Intent intent = new Intent(Intent.ACTION_VIEW);
            String mimes = fileUrl.substring(fileUrl.length()-3, fileUrl.length());
            if(mimes.equals("hwp")) {
                intent.setDataAndType(Uri.fromFile(files), "application/x-hwp");
            } else {
                intent.setDataAndType(Uri.fromFile(files), "application/"+mimes);
            }
            startActivity(intent);
        }   
    }); 
```

春季下载动作是

字符串 mimetype = "application/x-msdownload";

```
 response.setContentType(mimetype);
                response.setHeader("fileName", fvo.getFileStreCours()+fvo.getStreFileNm());
                setDisposition(fvo.getOrignlFileNm(), request, response);
                response.setContentLength(fSize);

                BufferedInputStream in = null;
                BufferedOutputStream out = null;

                try {
                    in = new BufferedInputStream(new FileInputStream(uFile));
                    out = new BufferedOutputStream(response.getOutputStream());

                    FileCopyUtils.copy(in, out);
                    out.flush();
                    response.flushBuffer();
                } catch (Exception ex) {
                    // Connection reset by peer: socket write error
                    log.debug("IGNORED: " + ex.getMessage());
                } finally {
                    if (in != null) {
                        try {
                            in.close();
                        } catch (Exception ignore) {
                            log.debug("IGNORED: " + ignore.getMessage());
                        }
                    }
                    if (out != null) {
                        try {
                            out.close();
                        } catch (Exception ignore) {
                            log.debug("IGNORED: " + ignore.getMessage());
                        }
                    }
                } 
```

此文件正在从 NAS 下载

但 android 没有访问 web 的响应缓冲区

在android中，制作了0字节文件。

如何访问 web 响应缓冲区中的缓冲区和下载文件？

附言。网络服务不允许打开网址，所以我不能使用重定向

# eclipse - Eclipse/JBoss Developer Studio 中的 dropins 文件夹是什么？

> ID：13871177
> 
> 赞同：4
> 
> 时间：2012-12-14T00:58:57.507
> 
> 标签：eclipse, plugins, eclipse-plugin, themes, eclipse-juno

我是 Eclipse 新手，想知道 dropins 文件夹是什么？它到底在哪里（我在 Windows 8 上）？

基本上我想使用 Roger Dudler为 Eclipse Juno制作的这个深色 UI 主题（ [https://github.com/eclipse-color-theme/eclipse-ui-themes ）。](https://github.com/eclipse-color-theme/eclipse-ui-themes)如果您在此链接底部附近看到，他说将 zip 文件夹放入“dropins 文件夹”。我不知道 ：（

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T12:36:01.970

eclipse 中的 dropins 目录（路径是 Eclipse_home/dropins，与 eclipse 中的 plugins 文件夹处于同一级别）是默认的监视目录。
您无需安装插件，只需将它们放在此文件夹下（在您的情况下为 com.github.eclipsecolortheme.themes_1.0.0.201207121019.jar）并重新启动 eclipse，它们将在下次启动时自动拾取。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-10T21:57:40.587

请注意，JBoss Developer Studio 不支持或不鼓励使用 dropins 文件夹。

插件提供商应该真正创建一个包含其插件包的更新站点（或更新站点 zip），然后用户只需执行 Help > Install new ... 即可使用完全支持的 p2/Install Manager 安装方法正确安装。

还要注意的是，Tycho 现在支持从 pom.xml 和 category.xml 文件创建更新站点，并且您不再需要创建功能来添加您的 category.xml。

所以真的没有理由提供一个没有用正确的 p2 元数据包装它的插件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-05-24T05:45:59.770

dropins 文件夹如果不存在，则必须创建它。该位置与 IDE 的可执行文件相同。

# javascript - 简单的幻灯片 jQuery/UI 图像内联

> ID：13871182
> 
> 赞同：2
> 
> 时间：2012-12-14T00:59:41.107
> 
> 标签：javascript, jquery, html, css, jquery-ui

非常快地为一个小项目构建了一个简单的幻灯片放映，但我无法让图像保持内联。这是我的代码和小提琴：HTML

```
<div id="slides">
    <div class="slides_container">
        <img src="http://slidesjs.com/examples/standard/img/slide-1.jpg" width="960" height="392" alt="Slide 1" class="slide"  id="firstSlide">
        <img src="http://slidesjs.com/examples/standard/img/slide-2.jpg" width="960" height="392" alt="Slide 2" class="slide" style="display:none;">
        <img src="http://slidesjs.com/examples/standard/img/slide-3.jpg" width="960" height="392" alt="Slide 3" class="slide" style="display:none;">
        <img src="http://slidesjs.com/examples/standard/img/slide-4.jpg" width="960" height="392" alt="Slide 4" class="slide" style="display:none;">
        <img src="http://slidesjs.com/examples/standard/img/slide-5.jpg" width="960" height="392" alt="Slide 5" class="slide" style="display:none;">
        <img src="http://slidesjs.com/examples/standard/img/slide-6.jpg" width="960" height="392" alt="Slide 6" class="slide" style="display:none;">
    </div>
</div>​ 
```

CSS：

```
.slide{
    width:960px;
    height:392px;
    display:inline;
    float:left;
}​ 
```

JS：

```
function slideShow() {
    var displayToggled = false;
    var current1 = $('.slide:visible');
    var nextSlide = current1.next('.slide');
    var hideoptions = {
        "direction": "left",
        "mode": "hide"
    };
    var showoptions = {
        "direction": "right",
        "mode": "show"
    };
    if (current1.is(':last-child')) {
        current1.effect("slide", hideoptions, 1000);
        $("#firstSlide").effect("slide", showoptions, 1000);
    }
    else {
        current1.effect("slide", hideoptions, 1000);
        nextSlide.effect("slide", showoptions, 1000);
    }
};
setInterval(slideShow, 3000);
slideShow();​ 
```

小提琴：http: [//jsfiddle.net/xYWzU/6/](http://jsfiddle.net/xYWzU/6/)

您会注意到它有效，但是当下一张图片滑过时，它会滑过当前图片的下方，然后弹出到正确的位置。不知道我做错了什么。任何帮助都是极好的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T01:03:48.270

不确定这是否是您想要的，但添加：

```
position: absolute; 
```

会解决你的问题。

这是[JSFiddle。](http://jsfiddle.net/xYWzU/9/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-27T01:43:35.617

供将来参考（或者如果您现在想更改幻灯片），这里有一个很棒的 jQuery 插件，名为“ [Cycle](http://www.malsup.com/jquery/cycle/) ”，非常适合制作幻灯片！

它很容易设置，您不必做太多 CSS ;)

# jquery - 为什么高度返 回0

> ID：13871185
> 
> 赞同：1
> 
> 时间：2012-12-14T01:00:40.497
> 
> 标签：jquery, wordpress

我在主页上有一个旋转幻灯片，并且想根据图像的高度减去标题的高度减去箭头的高度来设置内容的高度。由于某种原因，标题或图像的高度都不会返回为 0。

见这里：[http ://www.keganquimby.com/lumina/](http://www.keganquimby.com/lumina/)

当图像不够高时，摘录（图像旁边标题下的内容）会切入箭头，所以我想根据图像高度使用 CSS 设置它。

我的js：

```
jQuery(document).ready(function($){
$('.slides .slide').each(function(){

    var slideHeight = $(this).height();
    var headerHeight = $('.slide-content header').height();
    var arrowHeight = $('.flex-direction-nav').height();

    var contentHeight = slideHeight - headerHeight - arrowHeight;

    });
}); 
```

新 JS（编辑以设置高度，并将其他高度调用拉到每个循环之外）：

```
jQuery(window).load(function($){

var slideHeight = $(this).height();
var headerHeight = $('.slide-content header').height();
var arrowHeight = $('.flex-direction-nav').height();

$('.slides .slide').each(function(){

    var contentHeight = slideHeight - headerHeight - arrowHeight;
    $('footer.post-more').css('height', contentHeight + 'px');

    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:04:45.697

在测量它们的高度之前，您必须等待图像加载。请注意，DOM 就绪并不意味着图像已经加载。试试这个：

```
jQuery(window).load(function($){
    var headerHeight = $('.slide-content header').height(),
        arrowHeight = $('.flex-direction-nav').height();

    var imgHeights = $('.slides .slide').map(function() {
        return $(this).height() - headerHeight - arrowHeight;
    });
}); 
```

从[jQuery.load](http://api.jquery.com/load-event/)：

> 当元素和所有子元素都已完全加载时，加载事件将发送到该元素。此事件可以发送到与 URL 关联的任何元素：图像、脚本、框架、iframe 和窗口对象。

# python - Python从第二项开始计算长度为x的数组，并在第一项结束

> ID：13871186
> 
> 赞同：1
> 
> 时间：2012-12-14T01:01:09.433
> 
> 标签：python, arrays, counting, skip, term

在 Python 中，我有一个长度为 x 的数组。

让数组 = [0, 1, 2, 3, 4, 5]

我想从上面的数组中得到这样的结果： [1, 2, 3, 4, 5, 0]

所以基本上我不想跳过第一个术语并在数组结束后循环它并在最后一个跳过的术语上停止。我对python很陌生，所以我自己无法弄清楚+谷歌搜索没有帮助。

请帮助，非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T01:03:37.497

使用[切片和`append()`](http://docs.python.org/2/tutorial/introduction.html#lists).

```
lst = [0, 1, 2, 3, 4, 5]
new_lst = lst[1:]
new_lst.append(lst[0]) 
```

您也可以使用`new_lst.extend(lst[:1])`，尽管当头部切片是单个元素时，`append(lst[0])`可能会稍微更有效，因为您不必构造另一个临时列表来包装单个值。 可能是最糟糕的，因为与版本`lst[1:] + list[:1]`相比，它必须创建另一个丢弃列表对象。`extend()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T01:09:05.887

[我会选择切片，但另一种选择（对于使用collections.deque](http://docs.python.org/2/library/collections.html#collections.deque)的这种简单的事情来说，这通常是矫枉过正的）

小例子：

```
>>> e =  [0, 1, 2, 3, 4, 5]
>>> from collections import deque
>>> d = deque(e)
>>> d
deque([0, 1, 2, 3, 4, 5])
>>> d.rotate(1)
>>> d
deque([5, 0, 1, 2, 3, 4])
>>> d.rotate(-2)
>>> d
deque([1, 2, 3, 4, 5, 0]) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-14T01:24:06.323

```
e =  [0, 1, 2, 3, 4, 5]

e.append(e.pop(0)) 
```

为什么人们不立即考虑就地转换？？？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T01:25:10.927

当您遍历列表时，甚至不需要新变量

```
for i in my_list[1:] + my_list[:1]:
    print i,

print
for i in my_list:
    print i, 
```

将返回：

```
1 2 3 4 5 0
0 1 2 3 4 5 
```

这样您就不会对原始 my_list 进行任何更改。

另外，请看这里：[Explain Python's slice notation](https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T01:18:43.577

还有一种方式，可能更通用。想不出好名字...

```
def iterate_from(l, start):
    for i in range(start, len(l)):
        yield l[i]
    for i in range(start):
        yield l[i] 
```

我得到以下输出：

```
In [39]: iterate_from(range(7), 3)
Out[39]: <generator object iterate_from at 0x120259b40>

In [40]: list(iterate_from(range(7), 3))
Out[40]: [3, 4, 5, 6, 0, 1, 2] 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T01:09:57.960

使用切片获取列表中您感兴趣的部分，然后将它们相加：

```
>>> lst = [0, 1, 2, 3, 4, 5]
>>> lst[1:] + lst[:1]
[1, 2, 3, 4, 5, 0] 
```

`lst[1:]`将为您提供从第一个索引（包括）到列表末尾的所有内容。

`lst[:1]`将为您提供从列表开头到第一个索引（不包括）的所有内容。（这相当于`[lst[0]]`）

# google-apps-script - .makeCopy() 或创建新文档并在 GAS 中附加元素是否更快？

> ID：13871188
> 
> 赞同：0
> 
> 时间：2012-12-14T01:01:16.790
> 
> 标签：google-apps-script

我想使用 Google Apps 脚本制作文档副本。我们有大量用户，为了并发性，我们希望限制对模板的同一个文件调用的访问。最后， var newDoc = file.makeCopy() 并复制文件并使用锁或从头开始创建新文档并在 GAS 中附加元素是否更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T08:01:17.733

没关系...我用 .makeCopy(); 进行了一些测试；与创建新文档并将文档元素复制到其中...

复制元素赢得了胜利。作为奖励，由于它的速度，它不会导致与同时和并发调用的许多文件冲突。

# java - 玩！框架增强过程

> ID：13871189
> 
> 赞同：0
> 
> 时间：2012-12-14T01:01:23.293
> 
> 标签：java, playframework, playframework-1.x

我一直在学习戏剧！框架模块并希望对其进行扩展，添加一些功能。我找到了一个从 Enhancer (play.classloading.enhancers.Enhancer) 扩展的类，但不知道为什么玩！采用了这种模式。

为什么要像这样加载类并使其社区代码扩展？我已经阅读了他们非常简单的解释哦，他们为什么这样做，我觉得被视为祖母呵呵：[http ://www.playframework.org/documentation/1.2.5/main#Classenhancement](http://www.playframework.org/documentation/1.2.5/main#Classenhancement)

但这并没有如我所愿。为什么我不能只编写我的用户将使用预期功能扩展的类？如果他们必须重新加载给定一些动态或特殊功能的类，好的，但我的插件代码本质上是静态的。

有谁知道他们为什么这样做以及我是否需要这样做？（在等待答案的同时进行测试！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:55:19.377

字节码增强是工具玩！用于扩展 Java 语言，并在应用程序代码中注入一些“魔法”逻辑。一个例子是控制器的渲染方法增强，它使您能够编写以下代码：

```
public static void myAction() {
   String foo = "...";
   int bar = "...";
   render(foo, bar);
} 
```

代替

```
public static void myAction() {
   String foo = "...";
   int bar = "...";
   renderArgs.put("foo", foo);
   renderArgs.put("bar", bar);
   render();
} 
```

发生的事情是`LocalVariableEnhancer`增强`myAction`方法并生成从变量名到变量的映射。在`render`方法内部，它会检查该地图并自动为您将变量放入renderArgs。

还有其他情况，例如`get/set`方法生成和 JPA 模型的静态工厂方法等。类似的模块`play-morphia`也大量使用字节码增强器。目标是提供您无法在纯 Java 语言框架（例如继承、接口等）中提供的终极应用程序开发人员体验。

# java - 尝试使用 SmbFileInputStream

> ID：13871198
> 
> 赞同：0
> 
> 时间：2012-12-14T01:02:14.877
> 
> 标签：java, android, eclipse, smb

这是我上周提出的问题的更新版本。
我正在尝试使用 SmbFileInputStream 将我的 Android 连接到我的 PC，
但应用程序中止（在我的平板电脑上）并显示以下错误消息：

```
"The application has stopped unexpectedly. Please try again." 
```

我正在使用 Try/Catch，但它不会触发任何这些异常。
适用的代码如下所示：

```
 SmbFile inFile = null;  
   jcifs.Config.setProperty( "jcifs.netbios.wins", "192.168.2.2" ) }  
   try { inFile = new SmbFileInputStream( "smb://MIKE-PC/Users/Public/List1.txt" ); }
   catch (SmbException e)          {  ListItems.add("SMB Error");  }  
   catch (MalformedURLException e) {  ListItems.add("URL Error");  }  
   catch (UnknownHostException e)  {  ListItems.add("Host Error");  } 
```

我尝试了使用和不使用名称和密码的代码，但均未成功：

```
 try { inFile = new SmbFile( "smb://MIKE-PC_Network:123ABC@Mike-PC/" ); } 
```

当我尝试分两步执行此操作时，SmbFile 不会中止，但 SmbFileInputStream 会。

```
 try {  sFile = new SmbFile( "smb://MIKE-PC/Users/Public/List1.txt" );  }  
   try {  inFile = new SmbFileInputStream( sFile );  } 
```

当我尝试获取文件列表时， SmbFile 不会中止，但 sFile.list 会。

```
 try {  sFile = new SmbFile( "smb://MIKE-PC/" ); }
   try {  lBuf = sFile.list(); . . . 
```

我在本地网络上，而不是域上。
平板电脑能够使用另一个应用程序登录，所以我知道网络正常。
我已经尝试了所有可能的组合中的用户、网络、PC 名称。

SMB 在运行之前是否需要一些额外的信息？

例如，在网上搜索了几天后，我看到了以下提示：
* Java SMB 无法在 Android 中运行 - 这是真的吗？我有哪些？
* 将 jcifs.jar 放入 libs 文件夹将不适用于 jcifs。
* 我需要将 jCIFS jar 文件添加到 CLASSPATH，还是由 Eclipse 处理？
* 如果我给 SmbFileInputStream 一个文字字符串，我需要调用 registerSmbURLHandler 吗？
* 清单中是否需要读取外部权限？

这是真的吗，我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T06:46:20.433

did you try "smb://username:password@local ip/" do it with the actual IP address. for me I had to do it with IP, with computer name my app never connected to windows share and crashed.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-09T19:51:30.657

我也有同样的问题，但我只是想通过添加一些你应该包含在代码中的捕获来部分回答你的问题，这样它就不会发生硬崩溃。

这是我在代码中添加的捕获

```
catch (SmbException 
      | MalformedURLException 
      | UnknownHostException 
      | NetworkOnMainThreadException 
      | ExceptionInInitializerError e) 
```

如果我找到更多信息，我会编辑这篇文章。

# mysql - Wordpress 自定义表格查询冲突？

> ID：13871200
> 
> 赞同：0
> 
> 时间：2012-12-14T01:02:23.140
> 
> 标签：mysql, wordpress

我要疯了......我有自定义表：wp_wwiz_customers 和其他列中我有 user_status 并且当我尝试使用 wp db 查询更新状态时，如下所示：

```
$wpdb->update('wp_wwiz_customers', array( 'user_status' => 'CRAZY' ),array('id' => $entryid) 
```

我正在使用 exit( var_dump( $wpdb->last_query ) ); 看到响应是：

```
string 'UPDATE `wp_wwiz_customers` SET `user_status` = 0 WHERE `id` = '4'' (length=65) 
```

好的，我的查询看起来很正常，所以为什么在世界上 WP 将 0 代替 value.... 我试图将表 user_status 的名称更改为 user_statusss ，就像在这个查询中一样，我有预期的结果：

```
$wpdb->update('wp_wwiz_customers', array( 'user_statusss' => 'CRAZY' ),array('id' => $entryid)
// Results as:
string 'UPDATE `wp_wwiz_customers` SET `user_statusss` = 'CRAZY' WHERE `id` = '4'' (length=73) 
```

好的，那么我在这里最好的选择是什么？我现在无法更改列名...如果发生冲突，是否有任何选项可以使这项工作....？...或者也许我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:09:34.990

我再次询问比阅读文档要快......显然（有时）必须放置您输入的数据格式......

```
$wpdb->update('wp_wwiz_customers', array( 'user_status' => 'CRAZY' ),array('id' => $entryid),array('%s') 
```

",array('%s')" 部分告诉 WP 这是字符串......现在它可以工作了。

# c - How to use getopt when option is a string on C?

> ID：13871201
> 
> 赞同：0
> 
> 时间：2012-12-14T01:02:39.057
> 
> 标签：c, string, getopt

我正在为我的大学工作/开发一个 C 程序，在调用时可以有 3 个选项（`-h`寻求帮助，`-o <argument>`（有或没有它），最后一个选项可以是一个字符串，如（test-in-1）：

```
./myprogram test-in-1 
```

我必须在我的主程序上处理这些选项，并在调用它们时执行所需的操作。它们都不是强制性的。

我正在考虑使用`getopt`来解析选项，但是其中一个选项实际上是 a`string(char *)`并且我有点迷失了这个选项，因为`getopt`无法读取字符串，只能读取 char 或带有参数的 char（例如，`-h`, `-o <argument>`,据我了解）。知道我该怎么做吗？

除了主线之外，我真的不能发布任何代码，因为我在它的开头卡住了`(int main(int argc, char *argv[]))`。

提前感谢您提供正确方向的任何建议/点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:06:19.997

您可以传递一个冒号`:`，这意味着它需要一个参数，并且该参数将设置在`optarg`.

另请参阅[我的答案here](https://stackoverflow.com/questions/13691715/what-is-the-best-practice-for-creating-a-unix-linux-command-line-tool-in-c-c/13691903#13691903)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T01:08:16.533

如果您要链接到 GNU C 库，请查看[getopt_long](http://www.gnu.org/software/libc/manual/html_node/Getopt-Long-Options.html)。

# php - linux 上的 fopen('/dev/urandom') 与 mcrypt_create_iv

> ID：13871212
> 
> 赞同：0
> 
> 时间：2012-12-14T01:04:09.303
> 
> 标签：php, mcrypt

fopen('/dev/urandom', 'rb') 可能由于多种原因而失败。也许“open_basedir 限制 [正在] 生效”或者 /dev/* 权限不允许 fopen() 读取它们。

事情是...... mcrypt_create_iv 使用 /dev/urandom：

[https://github.com/php/php-src/blob/master/ext/mcrypt/mcrypt.c#L1391](https://github.com/php/php-src/blob/master/ext/mcrypt/mcrypt.c#L1391)

我的问题是......如果 fopen() 失败 mcrypt_create_iv() 仍然可以工作吗？

对于 open_basedir 限制，我的假设是肯定的，但如果是权限呢？是否存在 fopen() 可能没有打开 /dev/urandom 所需权限但 mcrypt_create_iv 可以的情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:08:49.250

权限不会分配给函数，它们会根据用户、组或世界成员资格分配给进程（或者如果您使用 ACL，则可以进行更精细的控制）。

因此，如果您的*进程*`fopen()`以特定身份运行，则尝试使用或`mcrypt_create_iv()`（`open()`在较低级别使用）打开文件没有区别。

当然，如果调用的程序`mcrypt_create_iv()`具有提升的权限（例如一个`setuid`程序），它可能能够做其他程序可能做不到的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:25:55.057

我认为`open_basedir`限制不会影响 PHP 模块中的 C 代码，只会影响 PHP 脚本本身。如果使用 PHP 脚本`chroot()`，或者 PHP 在 chroot 监狱中作为 Apache 模块运行，则会影响脚本和模块。监狱必须有`/dev/urandom`。

虽然权限可能`/dev/urandom`会受到限制，但似乎极不可能（为什么有人会这样做？）。

# objective-c - 将列添加到 NSTableView

> ID：13871218
> 
> 赞同：2
> 
> 时间：2012-12-14T01:04:31.443
> 
> 标签：objective-c, nstableview, nstablecolumn

我正在尝试将列动态添加到，`NSTableView`但它们不显示任何内容：

```
NSTableColumn *col = [[NSTableColumn alloc] initWithIdentifier:@"test"];
[[col headerCell] setStringValue:@"Header"];
[myTableView addTableColumn:col]; 
```

后来我在循环中使用“test”键设置每个对象

```
[myObject setObject:@"Cell value" forKey:@"test"];
[myObjectArray addObject:processData]; 
```

然后我将`arrangedObjectsForMyTableView`IB 中的表视图绑定到我刚刚构建的数组中：

```
[self setArrangedObjectsForMyTableView:myObjectArray]; 
```

我期望的是，由于标识符和键，有一列标题为“标题”，列中的每个单元格都显示“单元格值”。列和标题是可见的，但单元格都是空的。我错过了什么？

# c# - 是否可以同时验证自签名证书和真实证书？

> ID：13871223
> 
> 赞同：1
> 
> 时间：2012-12-14T01:04:51.147
> 
> 标签：c#, ssl, httpwebrequest, ssl-certificate

假设有一个应用程序需要与多个服务器通信，其中一些服务器处于开发模式并使用自签名证书。其他服务器正在使用真实证书。

是否可以将这种验证自签名证书的指纹的技术与正常的验证机制结合起来？

[将自签名证书与 .NET 的 HttpWebRequest/Response 一起使用](https://stackoverflow.com/a/526803/538763)

换一种说法，当自定义验证失败时，我想将自定义验证与普通验证链接起来。当以下变量为非 null 并且自定义验证器返回 false 时，是否会发生默认实现？

```
ServicePointManager.ServerCertificateValidationCallback 
```

编辑：实际上，查看验证回调的签名看起来好像回调是在常规验证*之后发生的？*任何人都可以验证是这种情况吗？

```
 bool ValidateServerCertficate(
        object sender,
        X509Certificate cert,
        X509Chain chain,
        SslPolicyErrors sslPolicyErrors); // are errors from the regular validation? 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:35:47.380

我认为您不能调用默认验证器，但您不必这样做。实现自定义回调并查看`SslPolicyErrors`枚举。如果它等于`SslPolicyErrors.None`，那么它是一个很好的证书，无论如何都会得到验证。否则，您是否自定义验证。

```
internal static bool ValidateCerts(object sender, X509Certificate cert, X509Chain chain, SslPolicyErrors sslPolicyErrors)
{
    if (sslPolicyErrors == SslPolicyErrors.None)
    {
        // Good certificate.
        return true;
    }
    //Do custom validation here
} 
```

# java - 在java中附加到文件

> ID：13871224
> 
> 赞同：2
> 
> 时间：2012-12-14T01:05:02.770
> 
> 标签：java, file, user-interface, line

我正在做一个项目。对于我正在使用 GUI 的项目，我想将一个数字写入文件。我已经成功了，我可以将数字写入我想要的文件。我希望有人可以在现场解决的问题是，每次我将数字写入文件时，新数字都会替换旧数字。我将如何将当前信息保存在文件中。我的代码是：

```
 public static void writeCodeFile (String filename, int x, String userName) throws IOException{
        BufferedWriter outputWriter = null;
        outputWriter = new BufferedWriter(new FileWriter(filename));
        outputWriter.newLine();
        outputWriter.write(userName +":"+ Integer.toString(x));
        outputWriter.newLine();
        outputWriter.flush();  
        outputWriter.close();   

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T01:07:31.273

使用附加模式：

```
outputWriter = new BufferedWriter(new FileWriter(filename, true)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T01:07:18.530

创建 FileWriter 时，添加第二个参数“true”以进入附加模式。

# php - 一个奇怪的标签组织脚本

> ID：13871227
> 
> 赞同：2
> 
> 时间：2012-12-14T01:06:06.443
> 
> 标签：php, search, tags, organization, ontology

所以！

我在 PHP 中工作，并且有大量的分类/标签列表，比如大约 100,000 个。

可以在 Zazzle.com 的产品下列出的大量标签中找到类似的标签列表。

我正在尝试根据单词、相似字符串和特异性之间的关系，以编程方式将此列表组织成一个分层菜单。

我玩弄了 levenshtein 函数、similar_text、搜索 sub_str(ings)、使用普林斯顿 WordNet 数据库等，但就是无法破解这个问题。本质上，我正在尝试从这个数据库中构建一个本体，该数据库的层次从非常一般到非常具体。它不一定是完美的，但我已经用完了简单的关键词来搜索以及如何以编程方式进行此操作的想法，但仍然有一些相似的顺序。

例如：如果我使用 sub_str，我可能会以 Dog->Dogma、Dogra 等结尾。

如果我使用 levenshtein 或类似的文本，我最终可能会发现 Bog、Log、Cog 和 Dog 都非常密切相关。

该数据库或分类法（如果您愿意的话）也在不断变化，因此至少部分分析必须即时完成。好消息是只需要提供一个级别的结果。例如，Dog 等查询的邻近结果可能是 small dog、large dog、red dog、blue dog、canine 等。

我知道这是一个可怕的问题，但是有没有人至少知道我应该采取哪些步骤、我可以使用的任何有用的功能、研究查询、方法等？

感谢您的时间。

* * *

到目前为止，对于以编程方式将标签组织到本体中，我有两个建议。

1.  查找标签的共同出现以将它们组织成组。我相信这个想法是，如果标签一起出现，它们可能是相关的。

2.  使用算法词干将词的多种形式/派生/词根减少为词干。这应该会减少脚本需要筛选的标签数量......除了可能根据根词干识别相似的标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T07:58:25.163

如果您有**整个句子**或至少不仅仅是单个单词，您可能需要查看[潜在语义分析](http://en.wikipedia.org/wiki/Latent_semantic_analysis)

不要被数学吓到，一旦你掌握了它背后的基本概念，它就相当简单了：

*   创建数据的（高维）术语文档矩阵
*   必不可少的步骤：将您巨大的稀疏矩阵转换为低维（[奇异值分解](http://en.wikipedia.org/wiki/Singular_value_decomposition)）
*   然后可以通过低维模型中的向量指定每个 [标签/术语的集合]
*   这两个向量之间的（余弦）相似度可以很好地衡量标签的相似性，即使它们可能不是同一个词干（您可能会发现 dog 和 barking 相关）
*   术语文档矩阵的良好输入至关重要

关于这个[和其他 IR 主题]（免费电子书）的优秀读物：[Introduction to Information Retrieval](http://nlp.stanford.edu/IR-book/)
看看这本书，它写得很好，对我的 IR 论文有很大帮助。

# java - 将映射传递给另一个方法以在 java 中进行修改

> ID：13871233
> 
> 赞同：6
> 
> 时间：2012-12-14T01:06:46.973
> 
> 标签：java, arguments

所以我遇到了一些我认为看起来有点奇怪的代码。想看看你对此有何看法

```
public class Test {

   public static void main(String[] args) {

      HashMap m = new HashMap();
      Test2 t2 = new Test2();
      t2.fill(m);
   }
}

public class Test2 {

    public void fill(HashMap m) {
        m.put(new Integer(0), new Integer(0));
    }

} 
```

那么这段代码可以吗，还是应该以其他方式完成？

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T01:30:17.717

这很好，因为 java 中的对象是通过引用传递的。如果您尝试在方法中直接分配给 m ，这是错误的：

```
m = new HashMap(); 
```

但是您可以使用传递的引用来修改作为参数传递的对象，就像您的示例代码一样。

将其视为将对象的位置传递给函数。您可以使用此位置信息来摆弄它。但由于位置只是一个值，分配给位置 ( `m`) 不会影响`m`您调用函数的位置。这就是为什么文章说参数是按值传递的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T01:28:51.440

是否可以将地图传递给该方法以操作地图的方法？当然。

地图没有打字；应该是`Map<Integer,Integer>`。使用编译器来帮助你把事情做好。使用泛型类型也将允许使用自动装箱，因此您可以做得更简洁`put(0,0)`。

除非明确需要 HashMap（对于 HashMap 的情况，情况并非如此），否则该映射应作为 a 传递`Map`，而不是 a传递。`HashMap`尽可能使用接口，而不是实现。

这个名字`fill`看起来对我来说是个坏名字——它似乎没有“填充”任何东西。

* * *

顺便说一句，我建议不要使用神奇的匿名类初始化，这样做：

```
Map<Integer, Integer> m = new HashMap<Integer, Integer>() {{
    put(0, 0);
    }}; 
```

支持一个简单的初始化块：

```
Map<Integer, Integer> m = new HashMap<Integer, Integer>(); {
    m.put(0, 0);
    } 
```

这避免了创建表单的冗余匿名内部类***文件***`SomeClass$n.class`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T01:38:19.860

我会这样做：

```
Map<Integer, Integer> m = new HashMap<Integer, Integer>() {{
    put(0, 0);
}}; 
```

以下是这里使用的 java kung fu 的细分：

*   地图是打字的`<Integer, Integer>`
*   这是一个带有实例块的匿名类来初始化地图
*   注意使用`put(0, 0)`而不是`m.put(new Integer(0), new Integer(0))`，使用自动装箱

# php - POST 数据后停留在当前页面

> ID：13871238
> 
> 赞同：1
> 
> 时间：2012-12-14T01:07:32.153
> 
> 标签：php, forms

我有从特定搜索按钮生成的表单。新生成的表单有几个表单可以更新它自己的数据如何在不影响当前页面的情况下进行这样的更新。因为搜索结果和搜索参数不应该改变。
最终问题排序，给我一个想法“在显示时根据查询搜索更新每条记录”。

前任：

```
<pre>
**name:[** k%  **]  branch:[** acc  **]  SEARCH**  >>>>search form

EMPID  |  NAME   |  BRANCH | EDIT |   
 1     |  kamal  |  acc    | edit |  >>>>>>dynamicaly generated form based query serch 
 2     |  kapila |  acc    | edit |  >>>>>>dynamicaly generated form based query serch 

</pre> 
```

谢谢你..我试试

```
<?php
session_start();
include("../../config/config.inc.php");

?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<link rel="stylesheet" type="text/css"  href="../../css/tbl.css"/>
<script type="text/javascript" src="../../jquery/formControll.js"></script>
 <script type="text/javascript">
 function autoSubmit(){

  document.forms['searchForm'].action=SCRIPT_NAME;
  document.forms['searchForm'].submit();
  alert("done");
  return true;
 }
 </script>
<title>OT Detail</title>

</head>

<body>
 <?php  
   $errors = array();
   $htmlcode="";
   $me = $_SERVER['PHP_SELF']; 
if(isset($_GET["invalid"])) //that means this is a redirected session
{   
//form data default value initialization goes here
$Year=$_GET["Year"];
$Month=$_GET["Month"];

      echo "<br><br><strong>ERROR: ";
      foreach($_GET["errors"] as $k=>$v)
        echo "<font color=red >".$v."</font>";
     echo "</strong>";                      
}
else//if $_GET["invalid"] is not define then this is not redirecting session
{ 
//form data default value initialization goes here
$Year=date("Y");
$Month=date("m");

}                         

//for sequrity reasons we check weather 'REQUEST_METHOD'== 'POST'                     

   if ($_SERVER['REQUEST_METHOD'] == 'POST'){

   //server side manual form validation goes here
   if (!$_POST['Year'])
      $errors[0] = "Year ?";

   if (!$_POST['Month'])
      $errors[1] = "Month?";

      if (count($errors)>0){
      header("Location:setOtPermit.php?invalid=1&Year=".$_POST["Year"]."&Month=".$_POST["Month"]."&errors=".$errors);
      exit;
      } 
      else //no error
      {

        //get post array 
     foreach($_POST as $key=>$value){
    if ($key!="Search"){
      $value=htmlentities(stripslashes(strip_tags($value)));
      ${$key}=$value;

      }//if $key
      }//4e 

     //******* building sql for search 
$sql="SELECT branch FROM ".$tbl_name2." WHERE empNo=".$_SESSION['resideFigure'];
$result=mysql_query($sql,$con)or die("cannot query");
$row=mysql_fetch_array($result,MYSQL_NUM);
$myBranch="Finance";//$row[0];
//echo $myBranch;

$sql="select * from ".$tbl_name4." e  
where e.empNo in( 
select d.empNo
from ".$tbl_name2." d
where d.branch='".$myBranch."') and e.empNo=000123 and e.permitMonth=1";
//echo $sql;
$result=mysql_query($sql,$con)or die("cannot query");

//*** search result feching into table goes here
    if(mysql_num_rows($result)>0)
    {
    $htmlcode.="<center><table id='myDisplay'>";

    $htmlcode.="<tr>";
    for($i = 0; $i < mysql_num_fields($result); $i++) {
    $htmlcode.="<th>".mysql_field_name($result,$i)."</th>";
    }//for mysql_num_fields
    $htmlcode.="</tr>";

    $rowAlter=true;
    while($row = mysql_fetch_assoc($result))
    {
    $htmlcode.="<form name='myform[]' method='POST' action='".$me."' onSubmit='return validateForm()'>";
     if($rowAlter)
     {$htmlcode.="<tr>";
     $rowAlter=false;
     }
     else
     {
     $htmlcode.="<tr class='alt'>";
     $rowAlter=true;
     }
     foreach($row as $k=>$v)
     {
     $htmlcode.="<td><input type='text' name='mydata[]' value='".$v."'></td>";
     }//4e
     $htmlcode.="<td><input type='submit' name='Update'  onclick='autoSubmit()' value='Update'></td></tr>";
    }//while
    $htmlcode.="</form></table></center>";
    }
    else//when data not fetched
    {
     echo "<br><br><font color=blue >It seems to be you have not done any OT Permission!</font>";
    }

     }//else error count 
    }//if $_SERVER

?>   

<center><form name="searchForm" method="POST" action="<?php echo strip_tags($me);?>" onSubmit="return validateForm()">
      <table border="0" cellspacing="0" cellpadding="2">
         <tr>
            <td>Year</td><td><input type="text" name="Year" value="<?php echo $Year;?>"></td>
            <td>Month</td><td><input type="text" name="Month" value="<?php echo $Month;?>"></td>
            <td><input type="submit" name="Search" value="Search"></td>
            <td><input type="reset" name="Reset" value="Reset"></td>
         </tr>
      </table>
 </form></center>
 <script type="text/javascript">SetHandlers()</script>

<?php
//display result as table
if (count($errors)==0)
echo $htmlcode;

//for sequrity reasons & confirm to dynamic form are submited we check weather 'REQUEST_METHOD'== 'POST'                        
if ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['Update'])){} 
echo "if success i can do this its not difficult,but things is result desapper";

?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:09:24.313

我喜欢将信息发布回同一页面。您可以在脚本开始时使用 php 处理帖子，然后您已经拥有提交的所有数据，因此您可以使用该数据填充搜索字段和所有内容。

或者不要提交表单，而是执行 ajax 查询。这样你的当前页面保持不变。

# xml - XPath "in" 运算符

> ID：13871250
> 
> 赞同：8
> 
> 时间：2012-12-14T01:09:19.670
> 
> 标签：xml, xpath, xpath-1.0

XPath 1.0 中是否有一个在 SQL 中充当“in”运算符的运算符？

```
select * from tbl_students where id in (1,2,3) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-14T01:21:32.033

XPath 1.0 的 = 运算符就是这样工作的，尽管 XPath 1.0 不提供用于编写​​序列的语法。因此，如果您有一个 XML 文档的形式

```
<doc>
  <value>1</value>
  <value>2</value>
  <value>3</value>
</doc> 
```

然后像这样的表达式`//doc[value = 2]`将返回该`doc`元素。

在 XPath 2.0 中，语法`(1, 2, 3)`将创建一个由三个整数组成的序列，您可以编写类似`$i = (1, 2, 3)`. 但是文字序列不是 XPath 1.0 的一个特性——在 XPath 表达式的一侧获取多个值的唯一方法是使用匹配多个节点的路径表达式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-23T14:03:40.403

我也遇到了同样的问题，楼上的回答是对的。为了更清楚，在 Xpath 中这看起来像：

```
//*:document[*:documentType=("magazine","newspaper")] 
```

这相当于：

```
select * from documents where documenttype in ('newsletter','magazine') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-05T23:53:17.213

找出您搜索的“id”是否在 (1, 2, 3, 4) 的序列中 [index-of()](https://www.w3.org/TR/xpath-functions/#func-index-of)可能是一种选择。注意它返回索引列表。

对于像这样的文档部分

```
<student id='1'/>
<student id='101'/>
<student id='1001'/> 
```

选择将类似于

```
//*[not(empty(index-of((1, 2, 3, 4), @id)))] 
```

# .net-4.0 - 无法解析使用可移植类库的程序集

> ID：13871267
> 
> 赞同：15
> 
> 时间：2012-12-14T01:11:42.510
> 
> 标签：.net-4.0, portable-class-library

我在最终用户机器上遇到了汇编解析问题，我相信这与使用可移植类库有关....

我有一个最初用 Visual Studio 2010 编写的 .NET 4.0 应用程序。最近我们升级到 Visual Studio 2012，我们创建了一些可移植类库项目。我认为我们现在不需要这些功能，但我们也在构建一个可能从这些库中受益的 Windows 8 应用商店应用程序。

当我编译我的项目时，可移植库功能究竟是做什么的？我希望它允许我在不同的框架上运行它而无需修改或重新编译。

当我查看~~反射器~~dotPeek 中的库时，它显示 Platform 属性为：

> .NET可移植，版本=v4.0，配置文件=配置文件5

并且参考似乎是2.0-ish：

> mscorlib，版本=2.0.5.0
> 
> 系统，版本=2.0.5.0
> 
> System.Runtime.Serialization，版本=2.0.5.0

当我在这个最终用户的机器上运行应用程序时，我在日志文件中看到一个错误：

> 无法加载文件或程序集，'System.Core，版本 = 2.0.5.0 ...'

谷歌搜索 System.Core 2.0.5.0 似乎是指 SilverLight——它似乎是目标框架之一。

本机没有安装 Visual Studio，但有 .NET 4.0（4.0.3 更新）

有什么我应该做不同的编译，我应该在我的依赖项中调查的东西，或者我应该寻找在最终用户机器上安装的东西吗？2.0.5.0 指的是什么？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-14T04:04:52.720

对于 .NET 4，您需要更新 ( [KB2468871](http://www.microsoft.com/en-us/download/details.aspx?id=3556) ) 才能使可移植类库正常工作。来自[知识库文章](http://support.microsoft.com/kb/2468871)：

> **特色 5**
> 
> 对支持可移植库的更改。这些更改包括 API 更新和活页夹修改。此更新使 CLR 能够成功绑定到可移植库，以便单个 DLL 可以在 .NET Framework 4、Silverlight、Xbox 或 Windows Phone 上运行。此更新将公共 Silverlight API 添加到同一位置的 .NET Framework 4。API 签名将在整个平台上保持一致。所有修改都是 100% 兼容的，不会破坏任何现有代码。

[另请参阅MSDN 可移植类库文档](http://msdn.microsoft.com/en-us/library/vstudio/gg597391.aspx)的“部署 .NET Framework 应用程序”部分。

**编辑：**实际上，如果机器安装了您提到的 .NET 4.0.3，那就足够了。您可以仔细检查以确保它确实已安装吗？

# javascript - JavaScript 无法在数组中显示图像

> ID：13871268
> 
> 赞同：0
> 
> 时间：2012-12-14T01:11:53.770
> 
> 标签：javascript, html, getelementbyid

我有以下数组：

```
function theMiddle(){
var arrayTheMiddle = new Array (showName.theMiddle  +"<br />" + beginingTime.theMiddle  +"  <br    />" + network.abc  +"<br />" + duration.thirty  +"<br />" + rating.general  +"<br />" +    description.theMiddle  +"<br />" + showImagetheMiddle);
 document.getElementById("gridbar").innerHTML=(arrayTheMiddle);
 } 
```

该数组中的最后一个对象 showImagetheMiddle 是具有以下代码的图像：

```
 var showImagetheMiddle = new Image();
 showImagetheMiddle.src = 'abc.jpg'; 
```

我的所有对象都出现在我的网页上，但 showImagetheMiddle 给了我以下错误：

[对象 HTMLImageElement]

我环顾四周，但发现了更复杂的显示图像的方法，我想保持简单并将图像添加到现有数组中（如上所示）。这可能吗？如果不是，我在这里做错了什么？

非常感激任何的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T01:14:40.093

由于`arrayTheMiddle`是数组，因此需要使用下标运算符`[]`从中获取元素。在您的示例中，图像是数组中的第一个（第 0 个）元素。你的行应该是这样的：

```
document.getElementById("gridbar").innerHTML = arrayTheMiddle[0]; 
```

作为旁注，使用方括号表示法`[]`（而不是下标运算符）创建数组要好得多。

```
var arrayTheMiddle = [ ... ]; 
```

编辑：看到您的评论后，我现在建议您使用`.appendChild`将元素插入到文档中。因为简单地追加 by`+`不会按您期望的方式工作。这是您的代码：

```
var arrayTheMiddle = [showName.theMiddle  +"<br />" + beginingTime.theMiddle  +"  <br    />" + network.abc  +"<br />" + duration.thirty  +"<br />" + rating.general  +"<br />" +    description.theMiddle  +"<br />"];

document.getElementById("gridbar").innerHTML = arrayTheMiddle[0];
document.getElementById("gridbar").appendChild( showImagetheMiddle ); 
```

我在您的代码中发现了一些误解。例如，我认为您不了解数组的工作原理。所以这里有一些信息：

### 句法：

数组元素是使用方括号表示法创建的`[]`。数组的元素由逗号运算符分隔`,`。例如：

```
var l = [ 5, 3, 5, 6 ]; 
```

数组元素*仅用*逗号分隔。`+`操作员不会将它们分开。所以这是有效的代码，但数组中只有一个元素：

```
var l = [ 5 + 3 + 5 + 6 ]; 
```

在您的代码示例中，数组是多余的。没有它，你可以很好地做你需要的事情。所以这是你的新代码：

```
function theMiddle() {
    var arrayTheMiddle = ; // the same without '[' and ']'
    document.getElementById("gridbar").innerHTML= arrayTheMiddle;
    document.getElementById("gridbar").appendChild( showImagetheMiddle );
} 
```

# activemq - ActiveMQ、代理网络、空闲消费者

> ID：13871270
> 
> 赞同：3
> 
> 时间：2012-12-14T01:12:10.263
> 
> 标签：activemq

我们正在运行 ActiveMQ 5.6.0。在我们的测试环境中，我们有 3 个代理在静态网络中运行。这是当前的情况。我们有 6 个消费者随机连接到 3 个代理。一个代理有 3 个消费者，第二个有 2 个，第三个有 1 个。当我们将消息堆积到队列中时，我们看到消息积压在具有 1 个消费者的第三个代理上，其他两个代理没有任何的积压和剩余 5 个消费者处于空闲状态。

您将在下面找到我们所有一个代理 (dev.queue01) 的配置，其他 2 个与静态主机名的适当更改类似。

我希望消息会自动分发给其他代理以供空闲消费者使用。如果我在问题描述中遗漏了什么，请告诉我。提前感谢您的任何指导。

http://www.springframework.org/schema/beans/spring-beans-2.0.xsd [http://activemq.apache.org/schema/core](http://activemq.apache.org/schema/core) http://activemq.apache.org/schema/core/activemq-核心.xsd">

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="locations">
        <value>file:${activemq.conf}/credentials.properties</value>
    </property>
</bean>

<broker xmlns="http://activemq.apache.org/schema/core" brokerName="prd.queue01" dataDirectory="${activemq.data}">

    <destinationPolicy>
        <policyMap>
          <policyEntries>
            <policyEntry topic=">" producerFlowControl="false" memoryLimit="1mb"> 
              <pendingSubscriberPolicy>
                <vmCursor />
              </pendingSubscriberPolicy>
            </policyEntry>
            <policyEntry queue=">" producerFlowControl="false" memoryLimit="64mb" optimizedDispatch="true" enableAudit="false" prioritizedMessages="true"> 
              <networkBridgeFilterFactory>
                <conditionalNetworkBridgeFilterFactory replayWhenNoConsumers="true" />
              </networkBridgeFilterFactory>
            </policyEntry>
          </policyEntries>
        </policyMap>
    </destinationPolicy>

    <managementContext>
        <managementContext createConnector="true"/>
    </managementContext>

    <persistenceAdapter>
        <amqPersistenceAdapter directory="${activemq.data}/data/amqdb"/>
    </persistenceAdapter>

      <systemUsage>
        <systemUsage>
            <memoryUsage>
                <memoryUsage limit="256 mb"/>
            </memoryUsage>
            <storeUsage>
                <storeUsage limit="750 gb"/>
            </storeUsage>
            <tempUsage>
                <tempUsage limit="750 gb"/>
            </tempUsage>
        </systemUsage>
    </systemUsage>
    <transportConnectors>
        <transportConnector name="openwire" uri="tcp://0.0.0.0:61616" updateClusterClients="true" updateClusterClientsOnRemove="true" rebalanceClusterClients="true"/>
    </transportConnectors>

    <networkConnectors>
      <networkConnector uri="static:(tcp://dev.queue02:61616,tcp://dev.queue03:61616)" name="queues_only" conduitSubscriptions="false" decreaseNetworkConsumerPriority="false" networkTTL="4">
      <dynamicallyIncludedDestinations>
        <queue physicalName=">"/> 
      </dynamicallyIncludedDestinations>
      <excludedDestinations>
        <topic physicalName=">"/> 
      </excludedDestinations>
    </networkConnector>
</networkConnectors>

</broker>
<import resource="jetty.xml"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-08-01T21:54:30.990

迟到的答案，但希望它可以帮助未来的读者。

您已经描述了一个代理网络环，其中 B1、B2 和 B3 都相互通信，B1 上有 3 个消费者（C1-C3），B2 上有 2 个消费者（C4 和 C5），还有 1 个消费者（C6）在 B3 上。你没有描述你的消息是在哪里产生的（他们首先去哪个代理），但是假设它是 B3。（B3 将产生与您的描述最准确匹配的最坏情况，但无论在何处生成消息，您仍然会看到负载不均。）

B3 有三个附加的消费者：C6、B1 和 B2。该代理将在这些消费者之间循环消息，因此 1/3 的消息将发送到 C6，1/3 发送到 B1，1/3 发送到 B2。

B1 有五个附加消费者：C1、C2、C3、B2 和 B3。但是消息不会被传递到它们刚刚来自的同一代理，因此有 4 个消费者计算来自 B3 的消息：C1、C2、C3 和 B2。因此，在全部消息的 1/3 中，C1、C2 和 C3 将分别获得 1/4（总数的 1/12），而 B2 将获得相同的总数的 1/12。稍后会详细介绍。

B2 有四个附加消费者：C4、C5、B1 和 B3。但是消息不会被传递到它们刚刚来自的同一代理，因此有 3 个消费者计算来自 B3 的消息：C4、C5 和 B1。因此，在全部消息的 1/3 中，C4 和 C5 将分别获得 1/3（总数的 1/9），而 B1 将获得相同的总数的 1/9。稍后还会详细介绍。

到目前为止，我们已经看到 C6 获得总消息的 1/3，C1-C3 获得总消息的 1/12，C4-C5 获得总消息的 1/9，1/12 + 1/9 = 7 /36 总消息路由到第二个代理。现在让我们回到那些消息。

在遵循 B3 -> B1 -> B2 路径的消息中（占总数的 1/12），它们将在 C4 和 C5 之间循环（因为消息无法返回到其原始代理 B3），因为每条消息总数的 1/24。所以 C4 和 C5 将收到总数的 1/9 + 1/24 = 11/72。

类似地，在经过 B3 -> B2 -> B1 路径的消息中（占总数的 1/9），它们将在 C1、C2 和 C3 之间循环，因此 C1、C2 和 C3 将收到1/12 + 1/27 = 总数的 13/108。

在经过 B3 -> B1 -> B2 -> B3 路径的消息中（占总数的 1/36），一半进入 C6（占总数的 1/72），一半进入 B1（占总数的 1/72）总数）。同样，在经过 B3 -> B2 -> B1 -> B3 路径的消息中（总数的 1/36），一半进入 C6（总数的 1/72），一半进入 B2（1/总数中的 72 个）。所以 C6 获得了 1/36 的消息（总共 13/36），B1 获得了总数的 1/72，B2 获得了总数的 1/72。

我们现在正进入收益递减状态，但您现在可以看到，C6 在总消息中获得了超大份额（36%），而连接到 B1（拥有最多消费者）的消费者每个都获得了较小的份额（低于 10%），导致 C6 有很多工作要做，而 C1-5 的工作要少得多，并且如您所观察到的那样花费时间闲置。您还可以看到某些消息如何通过网络经过很长的路径导致高延迟，但这不是您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-04T18:39:14.387

如果我理解正确，经纪人的意思是在这里排队。

*   您所有的经纪人都有相同类型的对象。
*   你所有的消费者都做同样的过程。
*   您希望在您的消费者之间平均分担工作量。
*   操作顺序并不那么重要。

我尝试在 Active MQ 5.5.1 上做同样的事情。我所做的只是创建了一个队列，并创建了多个消费者。我将所有消费者指向同一个队列。

Active-MQ 自动处理分发。

我观察到以下示例：

如果我有一个队列 - 有 2000 条记录。如果我同时将 2 个消费者指向该队列，第一个消费者将从 0 开始处理对象。第二个消费者将在随机偏移后开始处理对象（比如从 700 开始。）

一旦，第一个消费者已经完成了从 0 - 700 的处理对象，并且第二个消费者已经处理了 200 条记录（700 - 900），第一个消费者可以开始从任何随机偏移量（可能是 1200 ）获取对象。

偏移量的调整由 ActiveMQ 自动控制。

我观察到了这一点。我非常确定会发生这种情况。

希望我已经回答了您的问题（或至少正确理解了您的问题。）。

**我在这里不明白的是，如果 Active-MQ 创建 QUEUES，它是如何从介于两者之间的某个地方提供对象的？**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-29T13:15:05.687

很遥远，因为我不太确定，但是在您的配置中，您排除了所有主题

```
<excludedDestinations>
    <topic physicalName=">"/> 
</excludedDestinations> 
```

您能否取消该限制以进行测试。当客户端连接到特定队列/主题时，Activemq 使用咨询主题进行通信。因此，您的第三个经纪人可能不知道其他客户，因为您阻止了咨询主题。

# java - Android - 以编程方式向活动添加关键侦听器

> ID：13871271
> 
> 赞同：1
> 
> 时间：2012-12-14T01:12:10.030
> 
> 标签：java, android, android-activity, keyevent, onkeydown

我要做的就是以编程方式将 onKeyDown 侦听器添加到现有活动。我想要做的一点上下文：我想制作一个独立的函数来处理媒体播放器中发生的点击事件。

即：假设我有这门课。

```
public class Main extends Activity
{    
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
            setContentView(R.layout.maingui);
    }

@Override
     public boolean onKeyDown(int keyCode, KeyEvent event) {
         switch (keyCode) {
             case KeyEvent.KEYCODE_MEDIA_FAST_FORWARD:
        }
        return false;
      }
} 
```

我想做的是添加一个通过编程添加 onKeyDown 监听器的函数。

IE：

```
 public class Main extends Activity
    {    
    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
                setContentView(R.layout.maingui);

                createListener();
        }

}
public void createListener()
{
    @Override
         public boolean onKeyDown(int keyCode, KeyEvent event) {

             switch (keyCode) {
                 case KeyEvent.KEYCODE_MEDIA_FAST_FORWARD:
          }
            return false;
    }
} 
```

这显然行不通，但可以让您很好地了解我正在尝试做什么。

这是我尝试过的，但不起作用。

```
 public class Main extends Activity
    {    
    @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
                setContentView(R.layout.maingui);

            MyKeyClickClass.createListener(this);
    }

} 
```

*   然后在 MyKeyClickClass 类中想象这个函数

    ```
    public static void createListener(Activity act)
        {      
            View testing = act.getWindow().getDecorView().findViewById(android.R.id.content);

            testing.setOnKeyListener(new OnKeyListener(){

                @Override
                public boolean onKey(View v, int keyCode, KeyEvent event) {
                    // TODO Auto-generated method stub

                    String test = "Hi";

                    return false;
                }
            });
        } 
    ```

这可能吗？我没有对这样做的关键事件做出任何回应。

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:29:27.810

如果出于某种原因你不能只使用 onKeyDown，你不能让 onKeyDown 将它的参数传递给另一个函数吗？

如果你创建一个 myKeyListener 类，那么你可以做这样的事情。

```
 @Override
 public boolean onKeyDown(int keyCode, KeyEvent event) {
     myKeyListener.onKeyDown(keyCode, event);
 } 
```

# multithreading - 在 MonoTouch 中实现可取消后台任务的最佳方法是什么？

> ID：13871277
> 
> 赞同：2
> 
> 时间：2012-12-14T01:13:21.883
> 
> 标签：multithreading, xamarin.ios

MonoTouch 6.0 中尚不提供 C# 异步等待功能。在那之前，在 MonoTouch 中实现异步任务的最佳方式是什么。

MonoTouch 文档建议使用 System.Threading 命名空间中的线程来创建响应式 UI。但是一旦后台工作线程开始运行，如果需要很长时间，我该如何取消它？我是否需要实现一个定时器说 60 秒并在定时器事件触发时终止线程？

有更好的选择吗？

任何帮助高度赞赏

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T01:31:25.737

使用线程是一个不错的选择。但是，最好不要直接从外部终止（中止）线程。相反，在线程中运行的代码应该定期检查标志，如果标志设置为真，那么它应该提前返回。

MSDN上有一个很好的演练和示例：

[如何：创建和终止线程](http://msdn.microsoft.com/en-us/library/7a2f3ay4%28v=vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T02:11:06.997

目前我不确定 Mono 对 CLR 有多少，但对于后台任务，这是我的列表，[首先是最推荐的（有关排名的详细信息可以在我的博客上找到）](http://nitoprograms.blogspot.com/2010/08/various-implementations-of-asynchronous.html)：

1.  `Task`
2.  `BackgroundWorker`
3.  `Delegate.BeginInvoke`
4.  `ThreadPool.QueueUserWorkItem`
5.  `Thread`

对于“取消标志”，我推荐其中之一：

1.  `CancellationToken`- 黄金标准。如果可用，请使用它。
2.  `ManualResetEvent`
3.  `volatile bool`

取消是合作性质的，所以取消方发送取消通知，接收方必须定期检查。

# c# - Java中的正则表达式匹配

> ID：13871278
> 
> 赞同：1
> 
> 时间：2012-12-14T01:13:32.590
> 
> 标签：c#, java, regex, match

我对 Java 还很陌生，我正在尝试学习更高级的主题，例如 Regex。

Java 等同于以下 C# 代码：

```
foreach (Match m in Regex.Matches(input, output)))
    {
...
    } 
```

我有点卡住了。：/

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:19:50.640

```
Pattern pattern = Pattern.compile(regex);
Matcher matcher = pattern.matcher(input);
while (matcher.find()) {
    String match = matcher.group();
    ...
} 
```

# user-interface - 在 YaST 中更改 root 密码

> ID：13871279
> 
> 赞同：0
> 
> 时间：2012-12-14T01:13:46.833
> 
> 标签：user-interface, root, opensuse, change-password

不能更改`root`帐户详细信息`YaST`吗？必须使用（例如）`su`from`bash`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-24T19:25:56.750

可以从 yast2 更改 root 密码。

1.  打开`yast2`

2.  去`Manage groups and users`

3.  在标签用户处检查`filter`以显示您`System users`而不是`Local users`

4.  搜索`root`并点击`edit`

通过 Suse 11.1 -> 12.2 多次检查

# c# - 在 Windows 8 Metro 应用程序中发布 Soap XML - 错误

> ID：13871286
> 
> 赞同：1
> 
> 时间：2012-12-14T01:15:10.620
> 
> 标签：c#, xml, soap, windows-8, windows-store-apps

我正在为 Windows 8 的 Visual Studio Express 2012 中的 WinRT Surface Tablet 编写 C# 代码。虽然我的 xml 已格式化（我从其他运行良好的平台上的应用程序移植），但我显然遇到了请求语法问题。

我一直在尝试几种不同的方法，但由于 Windows 商店应用程序在方法上的限制而陷入了死胡同。我尝试的最后一个是使用 HttpClient、HttpContent 和 HttpRequestMessage：（显然省略了实际的 xml 和 url）

```
string xmlSOAP = "..............[my soap xml]................."
string url = "http://example.domain.com/myMagicalwebservice.asmx"
string SOAPAction = "www.blahblah.com/doXMLStuff";

HttpClient hc = new 

HttpContent content = new String Content(xmlSOAP);

HttpRequestMessage req = new HttpRequestMessage(HttpMethod.Post, url);
req.Headers.Add("SOAPAction", SOAPAction);
req.Method = HttpMethod.Post;
req.Content = content;
req.Content.Headers.ContentType = new System.Net.Http.Headers.MediaTypeHeaderValue("application/soap+xml;charset=UTF-8");

hc.SendAsync(req).ContinueWith(responseTask =>
{
    System.Diagnostics.Debug.WriteLine(responseTask.Result);
}); 
```

这会导致 System.FormatException “值'application/soap+xml;charset=UTF-8' 的格式无效”。

如果我将内容类型直接添加到 HttpContent 而不是 HttpRequestMessage，我会得到相同的结果。

如果我只是注释掉添加内容类型的行（在这里只是进行愚蠢的试验和错误），我会收到状态码 415 的结果：“不支持的媒体类型”。

我曾尝试使用 HttpClient 的 PostAsync 方法进行发布，但我不确定如何使用该方法获得响应。

任何帮助将不胜感激，我提前感谢您的时间！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:02:28.240

尝试这个：

```
req.Content.Headers.ContentType = MediaTypeHeaderValue.Parse("application/soap+xml;charset=UTF-8"); 
```

# javascript - 如何将一组对象从 actionscript 传递到 javascript

> ID：13871289
> 
> 赞同：2
> 
> 时间：2012-12-14T01:15:48.047
> 
> 标签：javascript, actionscript-3, actionscript

AS3：

```
ExternalInterface.addCallback('getParams', getParams);
function getParams()
        {
            var params:Array = new Array();
            for(i = 0; i < images.length; i++)
            {
                params.push(picWin.getChildAt(i));
            }

            return params;
        } 
```

JS：

```
$('#button').click(function(){

        var res = document.getElementById("swfobject").getParams();
        alert(res);

    }) 
```

因此，在我收到一些 NPO 对象错误的错误后，无法弄清楚它的含义，但是如果我传递一个数组本身就可以了，如果我传递一个对象本身也可以，但是当我传递一个数组时对象它给我一个错误NPO，如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:35:46.993

要从 AS 传递到 JS 你想使用

```
ExternalInterface.call("myJsFunction", myArray); 
```

对于此示例，您需要 2 个 JS 函数：第一个处理点击并向您的 swf 发送请求。第二个由 swf 使用您的返回值调用：

AS3：

```
ExternalInterface.addCallback('getParams', getParams); // listens for JS to getParams 
function getParams()
    {
        var params:Array = new Array();
        for(i = 0; i < images.length; i++)
        {
            params.push(picWin.getChildAt(i));
        }

        ExternalInterface.call("handleParams", params); // calls a js function and passes params 
    } 
```

JS：

```
$('#button').click(handleClick)

function handleClick(event){
    document.getElementById("swfobject").getParams(); //sends request to swf
}

function handleParams(params){ // handles response from swf
     alert("You got an array with " + params.length + " elements back from flash.");
} 
```

# python - 通过python使用条件运算符拆分文本文件

> ID：13871292
> 
> 赞同：1
> 
> 时间：2012-12-14T01:16:06.170
> 
> 标签：python, text

我有一个巨大的文件，其中包括连续两天的转录演讲长度过长。我猜超过 100,000 字。

在转录过程中，我通过“<-- Name -->”标记将演讲者和会话分隔为不同的块。我的问题是，是否可以按照 name_speach.txt 的命名约定将它们自动处理成文件？

谢谢！！！！

测试用例：

测试用例

```
<--测试0-->
这个是一段测试内容，a quick fox jumps over a lazy dog.

<——测试1——&gt;
，a quick fox just over 啊 辣子 dog!！？是吗？

<——测试2——&gt;
这是一段测试用的text，嗯！

<--Test case 3-->
/* sound track lost @153:12.236 -- 153.18.222 */
…
A quick fox jumps over a {lazy|lame} dog. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:37:38.743

因此，您想在文本文件中搜索每个模式“<-- Name -->”（我认为 100000 个单词对于计算机内存来说并不是很大）。

您可以对搜索标签使用正则表达式。

在 Python 中，它类似于：

```
import re

NAMETAG = r'\<\-\- (?P<name>.*?) \-\-\>'

# find all nametags in your string
matches = re.findall(NAMETAG, yourtext)

offset_start_list = []
offset_end_list = []
name_list = []

for m in matches:
    name = m.groups()['name']
    name_list.append(name)

    # find content offset after name tag
    offset_start_list.append(m.end() + 1)

    # the last content's end
    offset_end_list.append(m.start())

offset_end_list.pop(0)
offset_end_list.append(len(yourtext))

for name, start, end in zip(name_list, offset_start_list, offset_end_list):
    # save your files here 
```

# android - 无法在我的 Android 程序中显示错误消息页面

> ID：13871294
> 
> 赞同：0
> 
> 时间：2012-12-14T01:16:15.453
> 
> 标签：android

这是我的第一个 Android 程序。基本上我检查一个条件并切换到一个错误消息页面。我确信错误屏幕代码（ErrorScreen.java）是正确的。

```
public class ABC extends Activity {
...
private void init(){
   if (i > 0)
   {
       startActivity(new Intent(this, ErrorScreen.class));
       finish();
   }
 }
} 
```

每次运行到'startActivity'时，程序都会崩溃。我错过了什么？日志显示：

```
12-13 17:05:07.205: D/AndroidRuntime(30890): Shutting down VM
12-13 17:05:07.205: W/dalvikvm(30890): threadid=1: thread exiting with uncaught exception (group=0x40c6d1f8)
12-13 17:05:07.215: E/AndroidRuntime(30890): FATAL EXCEPTION: main
12-13 17:05:07.215: E/AndroidRuntime(30890): java.lang.NullPointerException
12-13 17:05:07.215: E/AndroidRuntime(30890):    at android.app.Activity.startActivityForResult(Activity.java:3252)
12-13 17:05:07.215: E/AndroidRuntime(30890):    at  android.app.Activity.startActivity(Activity.java:3359)
12-13 17:05:07.215: E/AndroidRuntime(30890):    at   com.stoyan.abc.ABC.init(ABC.java:373)
12-13 17:05:07.215: E/AndroidRuntime(30890):    at com.stoyan.abc.ABC.analyze(ABC.java:83) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:31:12.710

您是否在清单中注册了 ErrorScreen 类？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:50:38.863

**-**首先确保您已`ErrorScreen Activity`在`AndroidManifest.xml`文件中添加。

**-**我不确定你什么时候调用这个`init()`方法，但我确信一旦你检查了条件，这段代码就应该被触发，例如`onClick()`在`OnClickListener`.

# php - 如何从简单的字符串创建一个数组？

> ID：13871299
> 
> 赞同：0
> 
> 时间：2012-12-14T01:17:01.460
> 
> 标签：php

> **可能重复：**
> [php中的json解码](https://stackoverflow.com/questions/1270016/json-decode-in-php)

**我想在 php 中获取我的 id，实际上没有那个 php sdk 文件。所以我正在使用这个。**

```
$a = file_get_contents('https://graph.facebook.com/100004304380055...');
echo $a['id']; 
```

响应的内容是

```
{
    "id": "100004304380055",
    "name": "Ayush Mishra"
} 
```

但它不返回我的`id 100004304380055`. 我的东西`$a`不是一个数组。我想知道如何制作`$a`一个数组，然后通过`$a['id']`. 请提供代码。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:21:33.477

端点返回一个 JSON 字符串；这是一种用于将对象信息作为字符串传达的格式。将字符串转换回对象，并获取`id`属性：

```
$data = json_decode($response);
echo $data->id; 
```

`$response`您调用的结果在哪里`file_get_contents()`？

# yii - 我的 Yii 应用程序保存和规则错误

> ID：13871300
> 
> 赞同：0
> 
> 时间：2012-12-14T01:17:02.910
> 
> 标签：yii, save, rule

我已经更改了很多代码。

这是我的控制器中的代码：

`public function actionRequestTV() {`

 ````
$this->layout = '//layouts/column1';
$this->bodyclass = 'bodygrey_without_leftbg';
$model = new Reqtv();

if (isset($_POST['Reqtv'])) {
    if ($model->validate()) {
        $model->attributes = $_POST['Reqtv'];
        if ($model->save()) 
            $this->redirect(array('step2', 'id' => $model->REQTVID));
    }
}elseif (isset($_POST['BP'])) {
    if ($model->validate()) {
        $model->attributes = $_POST['BP'];
        if (!$model->save()) {
            print_r($model->getErrors());
        }else
            $this->redirect(array('step2B', 'id' => $model->REQTVID));
    }
}else
    $this->render('reqtvform_step1', array(
        'model' => $model,
    )); 
```` 

`}`

这是规则：

```
 public function rules() {
        // NOTE: you should only define rules for those attributes that
        // will receive user inputs.
        return array(
            array('BPID, SK', 'numerical', 'integerOnly' => true),
            array('BPMOBILE', 'numerical'),
            array('TVID, TVPASS', 'length', 'max' => 50),
            array('PROBLEM', 'length', 'max' => 250),
            array('BPCP, BPMOBILE, BPEMAIL', 'length', 'max' => 255),
            array('SK', 'ceksk'),
            array('BPEMAIL', 'email'),
            array('PSNO', 'cekPSNO'),
//            array('SK, PROBLEM, TVID, TVPASS', 'required', 'on' => 'step2'),
            // The following rule is used by search().
            // Please remove those attributes that should not be searched.
            array('REQTVID, BPID, TVID, TVPASS, PROBLEM, SK, BPCP, BPMOBILE, BPEMAIL, PSNO', 'safe', 'on' => 'search'),
        );
    } 
```

在将我的代码从此[代码](https://stackoverflow.com/questions/13852791/why-my-controller-wont-save-the-value)更改为更简单的代码后，它已经能够保存这些值。但是，有些规则不起作用，例如 ceksk 规则。这是ceksk的代码：

```
 public function ceksk() {
    if($this->SK){
    if (!$this->SK == 1) {
        $this->addError('SK', 'Maaf, anda harus mencentang persetujuan syarat & ketentuan sebelum melanjutkan');

        return false;
    }
    }
} 
```

**更新**

我的 ceksk 规则已经生效。但我决定改用 JQuery：

```
<?php
Yii::app()->clientScript->registerScript('JQuery', "

  $('#kirim').click(function() {
if ($('#SK').attr('checked')) {
      return true;
      }else{
      alert('Anda belum mencentang Syarat & Ketentuan'); 
      return false;
    }
  });
");
?> 
```

但我的其他规则仍然不起作用。我的 cekPSNO 规则实际上是有效的。但是当它发现错误时，它会将我带到一个空白的白色页面，而不是停留在表单页面并显示错误。这是代码：

```
public function cekPSNO() {
        if ($this->PSNO) {
            $psno = Ps::model()->findByAttributes(array('PSNO' => $this->PSNO));

            //check cdsn ada atau tidak
            if ($psno === null) {
                $this->addError('PSNO', 'Nomor PS tidak ditemukan, silahkan periksa Nomor PS anda !');

                return false;
            } else {
                if (date('Y-m-d') > $psno->TGLBERAKHIR) {
                    $this->addError('PSNO', 'Premium Support sudah expired !');
                    return false;
                }
            }
        }
    } 
```

拜托，我们非常感谢您的帮助。谢谢你 ：））

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T07:23:56.873

`if(!$this->SK == 1)`不会产生你想要的结果。

尝试使用`if($this->SK != 1)`.

见[http://php.net/manual/en/language.operators.precedence.php](http://php.net/manual/en/language.operators.precedence.php)

的否定`!`发生在比较运算符之前，这意味着您正在有效地执行`((!$this->SK) == 1)`.

这将导致代码块永远不会执行，因为如果`$this->SK`存在并且可以 type-juggled 为真，那么它的否定将导致一个`false`值，当与`1`（真值）比较时，它永远不会为真。而 if`$this->SK`为空或类型杂乱为 false，以后不正确的比较将永远不会执行，因此您的验证将永远不会报告失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:46:30.557

尝试这个：

```
public function ceksk($attribute) {
    if (!$this->$attribute == 1)
        $this->addError($attribute, 'Maaf, anda harus mencentang persetujuan syarat & ketentuan sebelum melanjutkan');
} 
```

来源： [http ://www.yiiframework.com/wiki/168/create-your-own-validation-rule/](http://www.yiiframework.com/wiki/168/create-your-own-validation-rule/)

# php - FROM_UNIXTIME() 和 PHP strtotime()

> ID：13871301
> 
> 赞同：1
> 
> 时间：2012-12-14T01:17:14.547
> 
> 标签：php, mysql, datetime, epoch

我有一个字符串：

2012 年 12 月 27 日上午 04:00

使用 strtotime() 将字符串转换为纪元：

```
1356609600 
```

然后当它被调用时：

```
select FROM_UNIXTIME(1356609600); 
```

我看到输出的时间被截断了。有谁知道为什么时间被截断或如何从这种类型的转换中保留时间：

```
2012-12-27 12:00:00 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T01:22:17.710

这里没有时间被截断。`12/27/2012 04:00 am`假定为当地时间`strtotime`。当其转换为 mysql 时，mysql 将时间设置为本地时区。现在**，如果您在 Mysql 和 php 上的时区设置不同，那么它不会显示相同的时间。**

对于 PHP set [`date.timezone`](http://bd1.php.net/manual/en/datetime.configuration.php#ini.date.timezone)in`php.ini`和 set [`default-time-zone`](http://dev.mysql.com/doc/refman/5.1/en/time-zone-support.html)in `my.cnf`or`my.ini`

例如，我的时区是`Asia/Dhaka`. 我在 php.ini 和 my.cnf 中都设置了它

### php.ini

```
date.timezone = Asia/Dhaka 
```

### 我的.cnf

```
default-time-zone = 'Asia/Dhaka' 
```

# algorithm - 骑士 MOVe 最短

> ID：13871302
> 
> 赞同：0
> 
> 时间：2012-12-14T01:17:24.447
> 
> 标签：algorithm, recursion, shortest-path, backtracking

我的代码在这里：问题是在 8*8 棋盘中找到从一平方到另一平方的最小移动数。

```
 #include<iostream>
    using namespace std;
    int n;
    int a[12][12];
    int min1=1000,xd=5,yd=2,ys,xs,xsi,ysi;

    int find_path(int xs,int ys)
    {
        cout<<xs<<"  "<<ys<<endl;
    if((xs==xd) && (ys==yd)) {  cout<<"destiny schieved  "<<endl; return 0;}      
    if(a[xs][ys]==1 || xs<0 || ys<0 || xs>7 || ys>7) return 10000;
    a[xs][ys]=1;
    int a1=1+(find_path(xs-2,ys+1)) ;
    int b=1+(find_path(xs-2,ys-1)) ;
    int c=1+(find_path(xs-1,ys+2)) ;
    int d=1+(find_path(xs-1,ys-2)) ;
    int d=1+(find_path(xs+2,ys+1)) ;
    int e=1+(find_path(xs+2,ys-1)) ;
    int f=1+(find_path(xs+1,ys+2)) ;
    int g=1+(find_path(xs+1,ys-2)) ;
    a[xs][ys]=0;
    return min(a1,b,c,d,e,f,g);
    }

    int main()
    {
        int i,j,k;

        for(i=0;i<8;i++)
        for(j=0;j<8;j++)
        a[i][j]=0;

  cout<<"start"<<endl;

  cout<<find_path(0,7);

      system("pause");
        return 0;
        } 
```

这是我在 8*8 棋盘中从一个方格到另一个方格的代码。我的代码在某些情况下给出了错误的答案：

a[xs][ys]=1；是为了防止循环。例如 (0,7) ->>>> (5,2) 的答案是 4 但我的算法给出 38 。MY坐标轴是X：从左到右，Y轴：从上到下。请帮我解决我的问题。

几个解决方案是：

(7,0) ->>> (0,7) : 6 (0,7) ->>> (5,2) :4

我还尝试了另一个代码，后来我对其进行了编辑以获得上述代码：

```
 int find_path(int xs,int ys,int path)
    {
        cout<<xs<<"  "<<ys<<endl;
    if((xs==xd) && (ys==yd)) { if(min1>path) min1=path; cout<<"destiny schieved  "<<path<<endl; return 1;}      
    if(a[xs][ys]==1 || xs<0 || ys<0 || xs>7 || ys>7) return 0;
    a[xs][ys]=1;
    if(find_path(xs-2,ys+1,path+1)) {if(path==0) {cout<<"i am on start1"<<endl;} else return 1;}
    if(find_path(xs-2,ys-1,path+1)) {if(path==0) {cout<<"i am on start2"<<endl;} else return 1; }
    if(find_path(xs-1,ys+2,path+1)) {if(path==0) {cout<<"i am on start3"<<endl;} else return 1; }
    if(find_path(xs-1,ys-2,path+1)) {if(path==0) {cout<<"i am on start4"<<endl;} else return 1;}
    if(find_path(xs+2,ys+1,path+1)) {if(path==0) {cout<<"i am on start5"<<endl;} else return 1;}
    if(find_path(xs+2,ys-1,path+1)) {if(path==0) {cout<<"i am on start6"<<endl;} else return 1;}
    if(find_path(xs+1,ys+2,path+1)) {if(path==0) {cout<<"i am on start7"<<endl;} else return 1; }
    if(find_path(xs+1,ys-2,path+1)) {if(path==0) {cout<<"i am on start8"<<endl;} else return 1; }
    a[xs][ys]=0;
    return 0;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T11:47:48.733

从数据结构的角度思考而不是从算法的角度思考通常是有益的。

在这种情况下，棋盘上马的有效走法构成无向图 G，其中顶点表示棋盘位置，边表示有效走法。因此，您可能有节点 a1 和 b3 通过一条边连接，因为骑士可能从 a1 移动到 b3，反之亦然。

鉴于该问题的表示，计算骑士从 A 到 B 的最小移动数相当容易，因为它是 G 中从节点 A 到节点 B 的最短路径的长度。

*   要计算给定起始节点和所有结束节点的最短路径，请使用时间复杂度 O(|V||E|) 的 Bellman-Ford 算法。
*   要计算所有节点对的最短路径，请使用时间复杂度 O(|V|^3) 的 Floyd-Warshall 算法。

# android - Android：播放许多短媒体文件

> ID：13871306
> 
> 赞同：0
> 
> 时间：2012-12-14T01:18:19.830
> 
> 标签：android, media-player, soundpool

我正在编写一个程序来播放大约 1000 个存储在“原始”中的短媒体文件。我的程序很简单。每次单击按钮时，它都会播放一个新的媒体文件。媒体文件的名称是从数组列表中读取的，我正在使用 MediaPlayer

这是单击按钮时的代码（只有一个按钮）：

```
@Override
public void onClick(View arg0) {
    i++;
    String fileName=soundArray.get(i);
    int soundID=getResources().getIdentifier(fileName, "raw", getPackageName());
    if(soundID>0){
         MediaPlayer mySound=MediaPlayer.create(getApplicationContext(),soundID);
         mySound.start();
    }
} 
```

此代码在前两个或三个按钮单击时运行良好。之后，它就崩溃了。你认为我的代码有问题吗？我应该使用 SoundPool 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:09:40.283

在启动媒体播放器之前使用 prepare()

```
mySound.prepare(); 
```

# java - JFrame不显示图片

> ID：13871307
> 
> 赞同：2
> 
> 时间：2012-12-14T01:18:25.447
> 
> 标签：java, swing, jframe

以下是我到目前为止的代码：所有导入都是正确的。我确定。:D

当我运行程序时，我得到的只是一个空白帧，没有图片。它应该出现。

```
public class WindowPractice extends JFrame {

   final static int width= 800;
   final static int height= 400;
   int x;
   int y;
   Image steve;
   Dimension gamesize= new Dimension (width, height);
    public WindowPractice(){
        setTitle ("Hangman");
        setSize (gamesize);
        setVisible (true);
        setResizable (false);
        setLocationRelativeTo (null);
        setDefaultCloseOperation (JFrame.EXIT_ON_CLOSE);

    }
    public static void main (String[] args) {
        new WindowPractice();
        ImageIcon steve= new ImageIcon ("Libraries/Pictures/ba190cd951302bcebdf216239e156a4.jpg");
        JLabel imageLabel = new JLabel(steve);

    }
    public void paint(Graphics g){

        g.setColor(Color.red);
        //g.fillRect(  x, y, 100, 20);
        g.drawImage(steve, x, y,this);

        x= 150;
        y= 250;
    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T01:55:43.907

这有很多问题我不知道从哪里开始......

让我们从头开始...

**问题 #1**

您声明了一个`steve`在您的`WindowPractice`类中调用的实例字段，这很好，但是在您的 main 方法中，您声明了另一个变量`steve`，您正在使用对加载图像的引用...

```
public static void main(String[] args) {
    new WindowPractice();
    ImageIcon steve = new ImageIcon("C:/Users/shane/Dropbox/issue459.jpg");
    JLabel imageLabel = new JLabel(steve);
} 
```

这意味着类实例变量永远不会被初始化并保持不变`null`。

**问题 #2**

虽然没有直接关系，但您永远不会`super.paint`从您的`paint`方法中调用。这是一个很大的不，不。您有义务维护油漆链。绘画方法很复杂，非常非常重要。

**问题 #3**

您永远不应该覆盖顶级容器（例如`JFrame`），也不应该覆盖它的任何`paint`方法。这有很多原因，但在前两个中，大多数顶级容器实际上包含许多组件（`JRootPane`，其中包含玻璃窗格、内容窗格、图层窗格和菜单栏），这些组件可以覆盖您的绘画工作和，一般来说，它们不是双缓冲的，这意味着你绘制的更新会闪烁并且看起来很糟糕；）

您还应该避免使用`paint`，相反，您应该考虑`paintComponent`在可用的地方使用。

**问题 #4**

`ImageIcon`不是您加载图像的最佳选择。我不使用它们的主要原因是您不知道正在加载的图像何时真正可用（实际上有一些方法，但坦率地说，`ImageIO`只是更简单）。这是 1999 年的一个很棒的功能，当时拨号速度在 14.4k 左右，但现在……

`ImageIO`支持更广泛的图片格式，支持图像的读取和写入，并保证当方法返回（成功）时，图像像素数据可供您的应用程序使用。

**例子**

这是一个更好的（恕我直言）方法......

![在此处输入图像描述](../Images/ce8e8f7102121c28dfde9bf8dbc7934f.png)

```
public class BetterDrawing {

    public static void main(String[] args) {
        new BetterDrawing();
    }

    public BetterDrawing() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                JFrame frame = new JFrame();
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(new PaintPane());
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public class PaintPane extends JPanel {

        private BufferedImage background;

        public PaintPane() {
            try {
                background = ImageIO.read(new File("/path/to/image"));
                // Use this instead to load embedded resources instead
                //background = ImageIO.read(getClass().getResource("/path/to/image"));
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }

        @Override
        public Dimension getPreferredSize() {
            return background == null ? super.getPreferredSize() : new Dimension(background.getWidth(), background.getHeight());
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);

            if (background != null) {

                int x = (getWidth() - background.getWidth()) / 2;
                int y = (getHeight() - background.getHeight()) / 2;

                g.drawImage(background, x, y, this);

            }

        }
    }
} 
```

读一读

*   [执行自定义绘画](http://docs.oracle.com/javase/tutorial/uiswing/painting/)
*   [使用图像](http://docs.oracle.com/javase/tutorial/2d/images/index.html)

了解更多信息。

# haskell - 在 Haskell 中使用动态编程？[警告：ProjectEuler 31 里面的解决方案]

> ID：13871308
> 
> 赞同：6
> 
> 时间：2012-12-14T01:18:37.047
> 
> 标签：haskell, ocaml, dynamic-programming

在解决 projecteuler.net 的问题 #31 [ **SPOILERS AHEAD** ]（计算用英国硬币赚 2 英镑的方法的数量）时，我想使用动态编程。我从 OCaml 开始，编写了简短且非常高效的以下编程：

```
open Num

let make_dyn_table amount coins =
  let t = Array.make_matrix (Array.length coins) (amount+1) (Int 1) in
  for i = 1 to (Array.length t) - 1 do
    for j = 0 to amount do
      if j < coins.(i) then
        t.(i).(j) <- t.(i-1).(j)
      else
        t.(i).(j) <- t.(i-1).(j) +/ t.(i).(j - coins.(i))
    done
  done;
  t

let _ =
  let t = make_dyn_table 200 [|1;2;5;10;20;50;100;200|] in
  let last_row = Array.length t - 1 in
  let last_col = Array.length t.(last_row) - 1 in
  Printf.printf "%s\n" (string_of_num (t.(last_row).(last_col))) 
```

这在我的笔记本电脑上执行约 8 毫秒。如果我将金额从 200 便士增加到 100 万，程序仍然会在不到两秒的时间内找到答案。

我将程序翻译成 Haskell（这本身绝对不好玩），虽然它以 200 便士的正确答案终止，但如果我将这个数字增加到 10000，我的笔记本电脑会突然停止（大量颠簸）。这是代码：

```
import Data.Array

createDynTable :: Int -> Array Int Int -> Array (Int, Int) Int
createDynTable amount coins =
    let numCoins = (snd . bounds) coins
        t = array ((0, 0), (numCoins, amount))
            [((i, j), 1) | i <- [0 .. numCoins], j <- [0 .. amount]]
    in t

populateDynTable :: Array (Int, Int) Int -> Array Int Int -> Array (Int, Int) Int
populateDynTable t coins =
    go t 1 0
        where go t i j
                 | i > maxX = t
                 | j > maxY = go t (i+1) 0
                 | j < coins ! i = go (t // [((i, j), t ! (i-1, j))]) i (j+1)
                 | otherwise = go (t // [((i, j), t!(i-1,j) + t!(i, j - coins!i))]) i (j+1)
              ((_, _), (maxX, maxY)) = bounds t

changeCombinations amount coins =
    let coinsArray = listArray (0, length coins - 1) coins
        dynTable = createDynTable amount coinsArray
        dynTable' = populateDynTable dynTable coinsArray
        ((_, _), (i, j)) = bounds dynTable
    in
      dynTable' ! (i, j)

main =
    print $ changeCombinations 200 [1,2,5,10,20,50,100,200] 
```

我很想听听熟悉 Haskell 的人的意见，为什么这个解决方案的性能如此糟糕。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T01:33:37.387

Haskell 是纯粹的。纯度意味着值是不可变的，因此在步骤

```
j < coins ! i = go (t // [((i, j), t ! (i-1, j))]) i (j+1) 
```

您为更新的每个条目创建一个全新的数组。对于像 2 英镑这样的小金额来说，这已经非常昂贵了，但对于 100 英镑的金额来说，它就变得完全淫秽了。

此外，数组是装箱的，这意味着它们包含指向条目的指针，这会恶化局部性，使用更多的存储空间，并允许建立 thunk，当它们最终被强制时评估也更慢。

所用算法的效率依赖于可变数据结构，但可变性仅限于计算，因此我们可以使用旨在允许安全屏蔽计算的方法，包括临时可变数据、`ST`状态转换器 monad 系列以及相关的 [unboxed , 为了提高效率] 数组。

给我半个小时左右的时间用`STUArray`s 将算法翻译成代码，你会得到一个不会太难看的 Haskell 版本，并且性能应该与 O'Caml 版本相当（预计会有一些或多或少的常数因子对于差异，是否大于或小于1，我不知道）。

这里是：

```
module Main (main) where

import System.Environment (getArgs)

import Data.Array.ST
import Control.Monad.ST
import Data.Array.Unboxed

standardCoins :: [Int]
standardCoins = [1,2,5,10,20,50,100,200]

changeCombinations :: Int -> [Int] -> Int
changeCombinations amount coins = runST $ do
    let coinBound = length coins - 1
        coinsArray :: UArray Int Int
        coinsArray = listArray (0, coinBound) coins
    table <- newArray((0,0),(coinBound, amount)) 1 :: ST s (STUArray s (Int,Int) Int)
    let go i j
            | i > coinBound = readArray table (coinBound,amount)
            | j > amount   = go (i+1) 0
            | j < coinsArray ! i = do
                v <- readArray table (i-1,j)
                writeArray table (i,j) v
                go i (j+1)
            | otherwise = do
                v <- readArray table (i-1,j)
                w <- readArray table (i, j - coinsArray!i)
                writeArray table (i,j) (v+w)
                go i (j+1)
    go 1 0

main :: IO ()
main = do
    args <- getArgs
    let amount = case args of
                   a:_ -> read a
                   _   -> 200
    print $ changeCombinations amount standardCoins 
```

在不太寒酸的时候运行，

```
$ time ./mutArr
73682

real    0m0.002s
user    0m0.000s
sys     0m0.001s
$ time ./mutArr 1000000
986687212143813985

real    0m0.439s
user    0m0.128s
sys     0m0.310s 
```

并使用已检查的数组访问，使用未检查的访问，时间可能会有所减少。

* * *

啊，我刚刚了解到您的 O'Caml 代码使用任意精度整数，因此`Int`在 Haskell 中使用会使 O'Caml 处于不公平的劣势。`Integer`以任意精度s计算结果所需的更改是最小的，

```
$ diff mutArr.hs mutArrIgr.hs
12c12
< changeCombinations :: Int -> [Int] -> Int
---
> changeCombinations :: Int -> [Int] -> Integer
17c17
<     table <- newArray((0,0),(coinBound, amount)) 1 :: ST s (STUArray s (Int,Int) Int)
---
>     table <- newArray((0,0),(coinBound, amount)) 1 :: ST s (STArray s (Int,Int) Integer)
28c28
<                 writeArray table (i,j) (v+w)
---
>                 writeArray table (i,j) $! (v+w) 
```

只需要调整两个类型签名 - 数组必然会被装箱，所以我们需要确保我们没有在第 28 行将 thunk 写入数组，并且

```
$ time ./mutArrIgr 
73682

real    0m0.002s
user    0m0.000s
sys     0m0.002s
$ time ./mutArrIgr 1000000
99341140660285639188927260001

real    0m1.314s
user    0m1.157s
sys     0m0.156s 
```

对于`Int`s 溢出的大结果的计算明显需要更长的时间，但正如预期的那样，与 O'Caml 相当。

* * *

花一些时间了解 O'Caml，我可以提供更接近、更短且可以说更好的翻译：

```
module Main (main) where

import System.Environment (getArgs)

import Data.Array.ST
import Control.Monad.ST
import Data.Array.Unboxed
import Control.Monad (forM_)

standardCoins :: [Int]
standardCoins = [1,2,5,10,20,50,100,200]

changeCombinations :: Int -> [Int] -> Integer
changeCombinations amount coins = runST $ do
    let coinBound = length coins - 1
        coinsArray :: UArray Int Int
        coinsArray = listArray (0, coinBound) coins
    table <- newArray((0,0),(coinBound, amount)) 1 :: ST s (STArray s (Int,Int) Integer)
    forM_ [1 .. coinBound] $ \i ->
        forM_ [0 .. amount] $ \j ->
            if j < coinsArray!i
              then do
                  v <- readArray table (i-1,j)
                  writeArray table (i,j) v
              else do
                v <- readArray table (i-1,j)
                w <- readArray table (i, j - coinsArray!i)
                writeArray table (i,j) $! (v+w)
    readArray table (coinBound,amount)

main :: IO ()
main = do
    args <- getArgs
    let amount = case args of
                   a:_ -> read a
                   _   -> 200
    print $ changeCombinations amount standardCoins 
```

运行速度同样快：

```
$ time ./mutArrIgrM 1000000
99341140660285639188927260001

real    0m1.440s
user    0m1.273s
sys     0m0.164s 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T09:55:45.470

您可以利用 Haskell 的惰性而不是自己安排填充数组，而是依靠惰性求值以正确的顺序执行。（对于大型输入，您需要增加堆栈大小。）

```
import Data.Array

createDynTable :: Integer -> Array Int Integer -> Array (Int, Integer) Integer
createDynTable amount coins =
    let numCoins = (snd . bounds) coins
        t = array ((0, 0), (numCoins, amount))
            [((i, j), go i j) | i <- [0 .. numCoins], j <- [0 .. amount]]
        go i j | i == 0        = 1
               | j < coins ! i = t ! (i-1, j)
               | otherwise     = t ! (i-1, j) + t ! (i, j - coins!i)
    in t

changeCombinations amount coins =
    let coinsArray = listArray (0, length coins - 1) coins
        dynTable = createDynTable amount coinsArray
        ((_, _), (i, j)) = bounds dynTable
    in
       dynTable ! (i, j)

main =
    print $ changeCombinations 200 [1,2,5,10,20,50,100,200] 
```

# responsive-design - 响应式设计框架

> ID：13871318
> 
> 赞同：2
> 
> 时间：2012-12-14T01:20:02.997
> 
> 标签：responsive-design

您好，我即将为一家每月有大约 1400 万独立访问者的大型公司主要网站实施响应式设计。我正在建立基本的前端架构，并且想知道任何可以让生活更轻松的想法和技术。正在研究 mvvc 的主干、Zurb 基金会、为 ie8 响应 js、替换 js 以减少 http 调用、GUI 缩小器......有什么建议让每个人在走同样的道路后生活更轻松？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:27:41.867

我目前有一个在 chrome、ie8+、ff、opera、safari、ios 和 android 上运行相同 UX 的平台。

我想说做很多测试，并确保只使用跨浏览器实现。

尽量不要太前沿，否则你会在试图修复不支持这些功能的环境时淹死自己。[http://www.caniuse.com](http://www.caniuse.com)是一个很好的资源。

避免使用显式大小。

# scala - 甚至无法尝试在 Scala 中加载类

> ID：13871322
> 
> 赞同：2
> 
> 时间：2012-12-14T01:20:53.353
> 
> 标签：scala, types

这是你去的那些时候之一，你是什么意思，它不编译？

这不是一个修辞问题：最短或最惯用的解决方法是什么？对于奖励积分，为什么有必要？

```
scala> import scala.util.Try
import scala.util.Try

scala> Try { getClass.getClassLoader loadClass "scala.util.Try" } 
```

我希望这不会泄露游戏，但这里的信息是：

```
<console>:9: error: type mismatch;
 found   : Class[_]
 required: Class[?0(in value res0)] where type ?0(in value res0)
Note: Any >: ?0, but Java-defined class Class is invariant in type T.
You may wish to investigate a wildcard type such as `_ >: ?0`. (SLS 3.2.10)
              Try { getClass.getClassLoader loadClass "scala.util.Try" } 
```

“调查”是指基础研究，还是仅仅应用文献中已有的技术？

我仍在等待错误消息的结尾，“留给读者作为练习”。

更新：

这是 Scala 2.10 的练习。

像往常一样，所有的好事都会降临在那些等待的人身上：

```
apm@mara:~/tmp$ skala
Welcome to Scala version 2.11.0-20130622-103744-990c2b024a (OpenJDK 64-Bit Server VM, Java 1.7.0_21).
Type in expressions to have them evaluated.
Type :help for more information.

scala> import scala.language.existentials
import scala.language.existentials

scala> import scala.util.Try
import scala.util.Try

scala> Try { getClass.getClassLoader loadClass "scala.util.Try" }
res0: scala.util.Try[Class[?0]] forSome { type ?0 } = Success(class scala.util.Try) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:20:53.353

这肯定是一个重复的问题。也许有人可以指出这一点，或者确切地说类型推断没有做这里自然而然的事情。

有人留下了一个答案（似乎已经消失了？），并带有指向[MacIver on existential types](http://www.drmaciver.com/2008/03/existential-types-in-scala/)的有用链接。可能，我还需要[MacGyver](http://en.wikipedia.org/wiki/MacGyver)的帮助。

以下是我在去论坛的路上尝试的一些变体。

```
package classy
import scala.util._

class Foo

object Test {

  /* DNC
  def loadTry(n: String, loader: ClassLoader) = Try { loader loadClass n }
  def loadTry(n: String, loader: ClassLoader): Try[Class[_]] = Try { loader loadClass n }
  */

  def main(args: Array[String]) {
    val cl = getClass.getClassLoader
    println(loadTry("classy.Foo", cl))
    println(loadTry("classy.Bar", cl))

    println(cl loadClass "classy.Foo")
    println(loadOpt("classy.Foo", cl))
    println(loadTryAgain("classy.Foo", cl))
    println(loadTryYetAgain("classy.Foo", cl))
  }

  def loadOpt(n: String, loader: ClassLoader): Option[Class[_]] =
    try Some(loader loadClass n) catch {
      case _: Exception => None
    }
  def loadTryAgain(n: String, loader: ClassLoader): Try[Class[_]] = {
    val res: Option[Class[_]] = try Some(loader loadClass n) catch {
      case _: Exception => None
    }
    res match {
      case None    =>
        Failure(new RuntimeException(s"Warning: class not found: ${n})"))
      case Some(x) =>
        Success(x)
    }
  }
  def loadTryYetAgain(n: String, loader: ClassLoader): Try[Class[_]] = {
    val res = try loader loadClass n catch {
      case _: Exception => null
    }
    res match {
      case null =>
        Failure(new RuntimeException(s"Warning: class not found: ${n})"))
      case x    =>
        Success(x)
    }
  }
  def loadTry(n: String, loader: ClassLoader) =
    Try[Class[_]] {
      loader loadClass n
    } recoverWith {
      case e: Exception =>
        Failure(new RuntimeException(s"Warning: class not found: ${n} (${e.getMessage})"))
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T23:47:55.980

尝试导致它。在 scala 2.10.0 中对我来说：

```
scala> import scala.util.Try
scala> val typeName = "scala.util.Try" 
```

错误：

```
scala> Try(Class.forName(typeName))
<console>:10: error: type mismatch;
 found   : Class[_]
 required: Class[?0(in value res1)] where type ?0(in value res1)
Note: Any >: ?0, but Java-defined class Class is invariant in type T.
You may wish to investigate a wildcard type such as `_ >: ?0`. (SLS 3.2.10)
              Try(Class.forName(typeName))
                               ^ 
```

没有错误：

```
scala> Try[Class[_]](Class.forName(typeName))
res2: scala.util.Try[Class[_]] = Success(class scala.util.Try) 
```

`catching`也有同样的问题：

```
scala> import scala.util.control.Exception._

scala> catching(classOf[Throwable]) opt Class.forName(typeName)
<console>:13: error: type mismatch;
 found   : Class[_]
 required: Class[?0(in value res4)] where type ?0(in value res4)
Note: Any >: ?0, but Java-defined class Class is invariant in type T.
You may wish to investigate a wildcard type such as `_ >: ?0`. (SLS 3.2.10)
              catching(classOf[Throwable]) opt Class.forName(typeName) 
```

# android - Jsoup 无法读取 xml 返回文件

> ID：13871325
> 
> 赞同：4
> 
> 时间：2012-12-14T01:21:01.107
> 
> 标签：android, xml, api, parsing, jsoup

我在使用 Jsoup 时遇到了一些问题。我正在尝试在我的 beta Android 应用程序中使用他们的 API 从开放电影数据库中检索 xml 文件。他们的 API 文档说，如果返回类型是 xml，只需输入“r=”和返回文件类型。我已经测试了一些请求。在其中之一之下：

```
Jsoup.connect(http://www.omdbapi.com/?i=tt1285016&r=xml).get(); 
```

在浏览器上测试工作正常。但在安卓上没有。抛出任何异常。如果我不插入返回文件类型，它会返回一个 JSON。在这种情况下，我收到数据。确定问题是否与 xml 文件有关。我已经使用 MusicBrainz API 进行了测试。默认情况下它返回 XML。令我惊讶的是，效果很好。

问题是什么？Jsoup打开电影数据库的返回类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T23:26:13.007

Jsoup 的主要重点是处理 HTML，并确保返回的文档是格式良好的 HTML。因此，默认情况下，它将始终将输入视为 HTML 并规范化文档。这就是为什么你得到一个像`<html><head></head>...<xml>...</html>`.

如果你知道你给它的输入实际上是 XML，你可以配置 Jsoup 以 XML 模式解析。在这种情况下，它不会规范化为 HTML DOM，也不会强制执行任何 HTML 规范规则。

**举个例子：**

```
String url = "http://www.omdbapi.com/?i=tt1285016&r=xml";
Document doc = Jsoup.connect(url)
    .parser(Parser.xmlParser())
    .get();

System.out.println(doc); 
```

比较有和没有`Parser.xmlParser()`配置的输出：

**在 XML 模式下：**

```
<?xml version="1.0" encoding="UTF-8"?>
<root response="True">
 <movie title="The Social Network" year="2010" {snip} />
</root> 
```

**在 HTML 模式下：**

```
<!--?xml version="1.0" encoding="UTF-8"?-->
<html>
 <head></head>
 <body>
  <root response="True">
   <movie title="The Social Network" {snip} />
  </root>
 </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T11:37:40.483

发现了问题。价值观一直存在。我不知道为什么，但返回类型是一个包含 xml 标签的 html 文件。在 Logcat 上打印值，它返回 html 标签 html、head、body，并且仅在此之后返回 XML。

# java - Spring+Hibernate+DB2+JTA+XA 应用程序中的死锁

> ID：13871326
> 
> 赞同：0
> 
> 时间：2012-12-14T01:21:04.717
> 
> 标签：java, hibernate, spring-mvc, jta, xa

### 应用程序日志中的异常：

```
12:04:18,503  INFO ExceptionResolver:30 -  [ org.springframework.dao.DeadlockLoserDataAccessException ] Hibernate flushing: could not update: [sero.chase.integration.Beans.Bean#1000]; SQL [update SCHM.v***240u_bean set prop1=?, prop2=?, prop3=?, prop4=?, prop5=?, prop6=?, prop7=?, prop8=?, prop9=?, prop10=?, prop11=?, prop12=?, prop13=?, prop14=?, prop15=?, prop16=?, prop17=?, prop18=?, prop19=?, prop20=?, prop21=?, where bean_id=?]; UNSUCCESSFUL EXECUTION CAUSED BY DEADLOCK OR TIMEOUT. REASON CODE 00C90088, TYPE OF RESOURCE 00000302, AND RESOURCE NAME SCHM.SAKT240 .X'000017'. SQLCODE=-913, SQLSTATE=57033, DRIVER=3.53.70; nested exception is com.ibm.db2.jcc.b.SqlException: UNSUCCESSFUL EXECUTION CAUSED BY DEADLOCK OR TIMEOUT. REASON CODE 00C90088, TYPE OF RESOURCE 00000302, AND RESOURCE NAME SCHM.SAKT240 .X'000017'. SQLCODE=-913, SQLSTATE=57033, DRIVER=3.53.70org.springframework.dao.DeadlockLoserDataAccessException: Hibernate flushing: could not update: [sero.chase.integration.Beans.Bean#1000]; SQL [update SCHM.v***240u_bean set prop1=?, prop2=?, prop3=?, prop4=?, prop5=?, prop6=?, prop7=?, prop8=?, prop9=?, prop10=?, prop11=?, prop12=?, prop13=?, prop14=?, prop15=?, prop16=?, prop17=?, prop18=?, prop19=?, prop20=?, prop21=?, where bean_id=?]; UNSUCCESSFUL EXECUTION CAUSED BY DEADLOCK OR TIMEOUT. REASON CODE 00C90088, TYPE OF RESOURCE 00000302, AND RESOURCE NAME SCHM.SAKT240 .X'000017'. SQLCODE=-913, SQLSTATE=57033, DRIVER=3.53.70; nested exception is com.ibm.db2.jcc.b.SqlException: UNSUCCESSFUL EXECUTION CAUSED BY DEADLOCK OR TIMEOUT. REASON CODE 00C90088, TYPE OF RESOURCE 00000302, AND RESOURCE NAME MWIAKT1 .SAKT240 .X'000017'. SQLCODE=-913, SQLSTATE=57033, DRIVER=3.53.70
    at org.springframework.jdbc.support.SQLErrorCodeSQLExceptionTranslator.doTranslate(SQLErrorCodeSQLExceptionTranslator.java:265)
    at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:72)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.convertJdbcAccessException(HibernateTransactionManager.java:805)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.convertHibernateAccessException(HibernateTransactionManager.java:791)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:664)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.processCommit(AbstractPlatformTransactionManager.java:754)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.commit(AbstractPlatformTransactionManager.java:723)
    at org.springframework.transaction.interceptor.TransactionAspectSupport.commitTransactionAfterReturning(TransactionAspectSupport.java:393)
    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:120)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy54.save(Unknown Source)
    at sero.chase.integration.DaoImpl.ExampleDaoImpl.save(ExampleDaoImpl.java:151)
    at sero.chase.business.BOImpl.ExampleBOImpl.save(ExampleBOImpl.java:191)
    at sero.chase.ServicesImpl.ExampleServiceImpl.submitAnswer(ExampleServiceImpl.java:183)
    at sero.chase.business.BusDelegatesImpl.ExampleBusDelegateImpl.gradeAnswer(ExampleBusDelegateImpl.java:578)
    at sero.chase.presentation.Controller.ExampleController.gradeAnswer(ExampleController.java:326)
    at sero.chase.presentation.Controller.ExampleController.SubmitAnswer(ExampleController.java:422)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:79)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:618)
    at org.springframework.web.servlet.mvc.multiaction.MultiActionController.invokeNamedMethod(MultiActionController.java:471)
    at org.springframework.web.servlet.mvc.multiaction.MultiActionController.handleRequestInternal(MultiActionController.java:408)
    at org.springframework.web.servlet.mvc.AbstractController.handleRequest(AbstractController.java:153)
    at org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter.handle(SimpleControllerHandlerAdapter.java:48)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:900)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:827)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:763)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:856)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1152)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1087)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:118)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:87)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:840)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:683)
    at com.ibm.ws.webcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:589)
    at com.ibm.ws.wswebcontainer.servlet.ServletWrapper.handleRequest(ServletWrapper.java:534)
    at com.ibm.ws.webcontainer.servlet.CacheServletWrapper.handleRequest(CacheServletWrapper.java:90)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:751)
    at com.ibm.ws.wswebcontainer.WebContainer.handleRequest(WebContainer.java:1478)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:126)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:458)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewInformation(HttpInboundLink.java:387)
    at com.ibm.ws.http.channel.inbound.impl.HttpICLReadCallback.complete(HttpICLReadCallback.java:102)
    at com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    at com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    at com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    at com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:136)
    at com.ibm.io.async.ResultHandler.complete(ResultHandler.java:196)
    at com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:751)
    at com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:881)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1497)
Caused by: com.ibm.db2.jcc.b.SqlException: UNSUCCESSFUL EXECUTION CAUSED BY DEADLOCK OR TIMEOUT. REASON CODE 00C90088, TYPE OF RESOURCE 00000302, AND RESOURCE NAME MWIAKT1 .SAKT240 .X'000017'. SQLCODE=-913, SQLSTATE=57033, DRIVER=3.53.70
    at com.ibm.db2.jcc.b.bd.a(bd.java:679)
    at com.ibm.db2.jcc.b.bd.a(bd.java:60)
    at com.ibm.db2.jcc.b.bd.a(bd.java:127)
    at com.ibm.db2.jcc.b.fm.b(fm.java:2132)
    at com.ibm.db2.jcc.b.fm.c(fm.java:2115)
    at com.ibm.db2.jcc.t4.db.k(db.java:353)
    at com.ibm.db2.jcc.t4.db.a(db.java:59)
    at com.ibm.db2.jcc.t4.t.a(t.java:50)
    at com.ibm.db2.jcc.t4.tb.b(tb.java:200)
    at com.ibm.db2.jcc.b.gm.Zb(gm.java:2445)
    at com.ibm.db2.jcc.b.gm.e(gm.java:3287)
    at com.ibm.db2.jcc.b.gm.Rb(gm.java:612)
    at com.ibm.db2.jcc.b.gm.executeUpdate(gm.java:595)
    at com.ibm.ws.rsadapter.jdbc.WSJdbcPreparedStatement.executeUpdate(WSJdbcPreparedStatement.java:768)
    at org.hibernate.jdbc.NonBatchingBatcher.addToBatch(NonBatchingBatcher.java:23)
    at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2399)
    at org.hibernate.persister.entity.AbstractEntityPersister.updateOrInsert(AbstractEntityPersister.java:2303)
    at org.hibernate.persister.entity.AbstractEntityPersister.update(AbstractEntityPersister.java:2603)
    at org.hibernate.action.EntityUpdateAction.execute(EntityUpdateAction.java:92)
    at org.hibernate.engine.ActionQueue.execute(ActionQueue.java:248)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:232)
    at org.hibernate.engine.ActionQueue.executeActions(ActionQueue.java:140)
    at org.hibernate.event.def.AbstractFlushingEventListener.performExecutions(AbstractFlushingEventListener.java:298)
    at org.hibernate.event.def.DefaultFlushEventListener.onFlush(DefaultFlushEventListener.java:27)
    at org.hibernate.impl.SessionImpl.flush(SessionImpl.java:1000)
    at org.hibernate.impl.SessionImpl.managedFlush(SessionImpl.java:338)
    at org.hibernate.transaction.JTATransaction.commit(JTATransaction.java:135)
    at org.springframework.orm.hibernate3.HibernateTransactionManager.doCommit(HibernateTransactionManager.java:656)
    ... 50 more 
```

### 弹簧配置：

```
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:p="http://www.springframework.org/schema/p"
    xmlns:jee="http://www.springframework.org/schema/jee" 
    xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="http://www.springframework.org/schema/beans         
                           http://www.springframework.org/schema/beans/spring-beans-3.0.xsd         
                           http://www.springframework.org/schema/context         
                           http://www.springframework.org/schema/context/spring-context-3.0.xsd
                           http://www.springframework.org/schema/jee
                           http://www.springframework.org/schema/jee/spring-jee-3.0.xsd">

    <jee:jndi-lookup id="queueConFac" resource-ref="true" jndi-name="jms/queueConFac" />
    <jee:jndi-lookup id="receiveQ" resource-ref="true" jndi-name="jms/receiveQ" />
    <jee:jndi-lookup id="sendQ" resource-ref="true" jndi-name="jms/sendQ" />
    <jee:jndi-lookup id="XA" resource-ref="true" jndi-name="jdbc/XA" />
    <jee:jndi-lookup id="nonXA" resource-ref="true" jndi-name="jdbc/nonXA" />

    <bean id="jmsTxManager"
    class="org.springframework.transaction.jta.WebSphereUowTransactionManager"/> 

    <bean id="jmsDestResolver" class=" org.springframework.jms.support.destination.JndiDestinationResolver"/>   

    <bean id="exampleListener" class="sero.chase.integration.JMS.Services.JMSReceiver">
        <property name="exampleAppBusDelegate" ref="exampleAppBusDelegate" />
    </bean>

    <bean class="org.springframework.jms.listener.DefaultMessageListenerContainer" >
        <property name="connectionFactory" ref="queueConFac" />
        <property name="destination" ref="receiveQ" />
        <property name="messageListener" ref="exampleListener" />
        <property name="transactionManager" ref="jmsTxManager" />
        <property name="taskExecutor" ref="jmsTaskExecutor" />
    </bean>

    <bean id="jmsTaskExecutor"
      class="org.springframework.scheduling.commonj.WorkManagerTaskExecutor">
      <property name="workManagerName" value="wm/default" />
   </bean>

   <bean id="jmsSender" class="sero.chase.integration.JMS.Services.JMSSender">
        <property name="connectionFactory" ref="queueConFac" />
        <property name="queue" ref="sendQ" />
    </bean>

    <bean id="localeResolver"
        class="org.springframework.web.servlet.i18n.SessionLocaleResolver">
        <property name="defaultLocale" value="en" />
    </bean>

    <bean id="localeChangeInterceptor"
        class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
        <property name="paramName" value="language" />
    </bean>

    <bean class="org.springframework.web.servlet.mvc.support.ControllerClassNameHandlerMapping" >
        <property name="interceptors">
            <list>
                <ref bean="localeChangeInterceptor" />
            </list>
        </property>
    </bean>

    <bean id="messageSource" class="org.springframework.context.support.ReloadableResourceBundleMessageSource">
        <property name="basename" value="WEB-INF/resources/langSpecificText"/>
    </bean> 

    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.UrlBasedViewResolver">
        <property name="viewClass"
            value="org.springframework.web.servlet.view.tiles2.TilesView" />
    </bean>

    <bean id="tilesConfigurer"
        class="org.springframework.web.servlet.view.tiles2.TilesConfigurer">
        <property name="definitions">
            <list>
                <value>/WEB-INF/tiles-def.xml</value>
            </list>
        </property>
    </bean>

    <bean id="dataSource" class="org.springframework.jndi.JndiObjectFactoryBean">
        <property name="jndiName" value="jdbc/nonXA" />
    </bean>

    <bean id="sessionFactory"
        class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource"     ref="nonXA" />
        <property name="configLocation" value="classpath:/hibernate.cfg.nonXA.xml" />
        <property name="entityInterceptor">
            <bean class="sero.chase.integration.Hibernate.DB2Interceptor"/>
        </property>
    </bean>

    <bean id="session.XA.Factory"
        class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <property name="dataSource"     ref="XA" />
        <property name="configLocation" value="classpath:/hibernate.cfg.XA.xml" />
        <property name="entityInterceptor">
            <bean class="sero.chase.integration.Hibernate.DB2Interceptor"/>
        </property>
    </bean>

    <bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <bean id="transaction.XA.Manager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <property name="sessionFactory" ref="session.XA.Factory" />
    </bean>

    <bean id="transactionAttributeSource"
        class="org.springframework.transaction.interceptor.NameMatchTransactionAttributeSource">
        <property name="properties">
            <props>
                <prop key="*">PROPAGATION_REQUIRED</prop>
            </props>
        </property>
    </bean>

    <!-- App Bean Definitions (Two dao configurations excluding several other bean configurations are displayed below) -->

    <bean id="exampleDao"
        class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean"
        lazy-init="true">
        <property name="transactionManager"         ref="transactionManager" />
        <property name="transactionAttributeSource" ref="transactionAttributeSource" />
        <property name="target">
            <bean class="sero.chase.integration.PersistenceImpl.ExamplePersistenceImpl">
                <property name="sessionFactory"     ref="sessionFactory" />
            </bean>
        </property>
    </bean>

     <bean id="exampleXADao"
        class="org.springframework.transaction.interceptor.TransactionProxyFactoryBean"
        lazy-init="true">
        <property name="transactionManager"         ref="transaction.XA.Manager" />
        <property name="transactionAttributeSource" ref="transactionAttributeSource" />
        <property name="target">
            <bean class="sero.chase.integration.PersistenceImpl.ExamplePersistenceImpl">
                <property name="sessionFactory"     ref="session.XA.Factory" />
            </bean>
        </property>
    </bean>

</beans> 
```

### 休眠非 XA 配置：

```
<hibernate-configuration>

        <session-factory>

             <property name="hibernate.dialect">
                sero.chase.integration.Hibernate.DB2390Dialect
            </property>

            <property name="hibernate.default_schema">SCHM</property>
            <property name="query.substitutions">yes 'Y', no 'N'</property>
            <property name="jdbc.use_streams_for_binary">true</property>
            <property name="show_sql">true</property>
            <property name="format_sql">true</property>
            <property name="transaction.factory_class">org.hibernate.transaction.JTATransactionFactory</property>
            <property name="jta.UserTransaction">java:comp/UserTransaction</property>

            <property name="hibernate.cache.provider_class">
                org.hibernate.cache.EhCacheProvider
            </property>

            <!--===============-->
            <!-- mapping files -->
            <!--===============-->

            <mapping resource="sero/chase/integration/hbm/Example.hbm.xml" />

        </session-factory>

    </hibernate-configuration> 
```

### 休眠 XA 配置：

```
<hibernate-configuration>

        <session-factory>

            <property name="hibernate.dialect">
                sero.chase.integration.Hibernate.DB2390Dialect
            </property>

            <property name="hibernate.default_schema">SCHMA</property>
            <property name="query.substitutions">yes 'Y', no 'N'</property>
            <property name="jdbc.use_streams_for_binary">true</property>
            <property name="show_sql">true</property>
            <property name="format_sql">true</property>
            <property name="hibernate.transaction.factory_class">org.hibernate.transaction.CMTTransactionFactory </property>
            <property name="hibernate.transaction.manager_lookup_class">org.hibernate.transaction.WebSphereExtendedJTATransactionLookup</property> 

            <property name="hibernate.cache.provider_class">
                org.hibernate.cache.EhCacheProvider
            </property>

            <!--===============-->
            <!-- mapping files -->
            <!--===============-->

            <mapping resource="sero/chase/integration/hbm/Example.hbm.xml" />

        </session-factory>

    </hibernate-configuration> 
```

### 我的服务实现类中大部分业务逻辑发生的代码片段：

```
public void someDeadlockCausingServiceMethod() {
    //The read1() method below is going to executing a select hql statement on Table A once the call goes all the way down to the Dao layer.
    List<SomeBeanInBusinessLayer> beanList = exampleBO.read1();

    //Do some processing with the values obtained from the read1() method
    ...
    //

    //saveOrUpdate() method below is going to execute an update hql statement on Table A once the call goes all the way down to the Dao layer 
    //where the values from someBeanInBusinessLayer is going to be copied into someBeanInDaoLayer before saving.
    exampleBO.saveOrUpdate(someBeanInBusinessLayer)

    //The read2() method below is going to execute a select hql statement that contains two inner selects (on Table B, C and D) once the call goes all
    //the way down to the Dao layer.
    List<SomeBeanInBusinessLayer2> beanList2 = exampleBO.read2();

    //Do some processing with the values obtained from the read2() method inside a for loop
    for(SomeBeanInBusinessLayer2 s: beanList2) {

        //Read values from table E
        List<SomeBeanInBusinessLayer3> beanList3 = exampleBO.read3(s.getProp2());

        SomeBeanInBusinessLayer2 someBeanInBusinessLayer2 = new SomeBeanInBusinessLayer2();
        someBeanInBusinessLayer2.setProp1(s.getProp2());
        someBeanInBusinessLayer2.setProp1(someBeanInBusinessLayer3.getProp2());
        //... more processing...
        //Below method will execute an insert hql on Table F
        exampleBO.saveOrUpdate(someBeanInBusinessLayer2);

        SomeBeanInBusinessLayer3 someBeanInBusinessLayer3 = new SomeBeanInBusinessLayer3();
        someBeanInBusinessLayer3.setProp1(s.getProp5());
        //... more processing...
        //Below method will execute an insert hql on Table G
        exampleBO.saveOrUpdate(someBeanInBusinessLayer3);
    }
}

public void anotherDeadlockCausingServiceMethod() {
    //The read1() method below is going to executing a select hql statement on Table A once the call goes all the way down to the Dao layer.
    List<SomeBeanInBusinessLayer> beanList = exampleBO.read1();

    //The read2() method below is going to executing a select hql statement on Table F once the call goes all the way down to the Dao layer.
    List<SomeBeanInBusinessLayer2> beanList2 = exampleBO.read2();

    //The read1() method below is going to executing a select hql statement on Table G once the call goes all the way down to the Dao layer.
    List<SomeBeanInBusinessLayer3> beanList3 = exampleBO.read3();

    //Do some processing with the values obtained...

    //Do an update on Table A
    exampleBO.saveOrUpdate(someBeanInBusinessLayer1)

    //Do an update on Table F
    exampleBO.saveOrUpdate(someBeanInBusinessLayer2)
} 
```

### 我的 Dao layer1 的代码片段：

```
public void load(BeanDTO beanDTO) {
    Object param1 = beanDTO.getBeanList().getProp1();
    Object param2 = beanDTO.getBeanList().getProp2();
    List<SomeBeanInDaoLayer> beanList = null;
    Object[] params = {param1, param2};
          UserTransaction ut = null;
    try {
      Context context = new InitialContext();
      ut = (UserTransaction) context.lookup(Constant.USR_TRANSACTION);
      ut.begin();   
            beanList = beanDao2.load(params);
            ut.commit();
    }
    catch(Exception e) {
                    try {
                         ut.rollback();
                    }
                    catch(Exception e1) {
                    if(logger.isDebugEnabled()) {
           logger.debug("DB Exception", e1);
        }
                    }
        int error = ExceptionResolver.resolve(e);
        if(logger.isDebugEnabled()) {
            logger.debug("DB Exception", e);
        }
        beanDTO.setErrorCode(error);
    }
    beanDTO.setBeanList(beanList);
}

public void save(BeanDTO beanDTO) {
    List<SomeBeanInDaoLayer> beanList = beanDTO.getBeanList();
    for(SomeBeanInDaoLayer bean: beanList) {
        try {
                      Context context = new InitialContext();
                ut = (UserTransaction) context.lookup(Constant.USR_TRANSACTION);
                ut.begin(); 
                      beanDao2.save(bean);
                      ut.commit();
        }
        catch(Exception e) {
                       try {
                         ut.rollback();
                       }
                       catch(Exception e1) {
                         if(logger.isDebugEnabled()) {
               logger.debug("DB Exception", e1);
             }
                       }
            int err = ExceptionResolver.resolve(e);
            if(logger.isInfoEnabled()) {
                logger.info("DB Exception", e);
            }
            beanDTO.setErrorCode(err);
        }
    }
} 
```

### 来自我的 Dao Layer2 的代码截图：

```
public List<Bean> load(Object[] params) {
    String hql = "from Bean where beanProp1 = ? and beanProp2 = ?";
    return (List<Bean>) getHibernateTemplate().find(hql, params);
}

public void save(Bean bean) {
    getHibernateTemplate().saveOrUpdate(bean);
} 
```

1.  该应用程序是一个测试系统，用户可以同时进行测试。
2.  最初，事务分界不在我的 Dao 层，而是在我的服务实现类（实际上一直在我的控制器类），其中多个读取和更新被绑定到开始提交块中的一个事务中。由于我看到了几个死锁，所以我将分界线移到了 Dao 层，以便在我的 begin-commit 块之间只有一个 hql 语句，以查看它是否可以防止死锁但没有运气。
3.  尝试将 hibernate.connection.autocommit 等属性设置为 true，将 hibernate.transaction.flush_before_completion 设置为 true，将 hibehibernate.transaction.auto_close_session 设置为 true，但没有成功。
4.  一个用户读取的行永远不会被另一个用户更新。每个用户都读取和更新不同的行，即使他们访问相同的 DB2 表。只有在运行为测试构建一组问题的过程时，如果两个用户进行相同类型的测试，他们将读取相同的行。它与上面描述的 someDeadlockCausingMethod 非常相似，其中测试问题是从一组包含问题和答案的表中准备的。通过在 for 循环中遍历此结果集，将新行插入到另一个表中以保存将出现在用户测试中的每个问题的详细信息。此步骤在应用程序中是必要的，因为即使两个用户参加相同的测试，也会从每个用户的所有问题池中抽取一组随机问题。
5.  现在测试已为参加考试的用户准备好，应用程序中的下一个逻辑步骤是从仅包含与参加考试的用户有关的问题的详细信息的表中读取行。因此，并发用户将在此过程中读取同一张表，但不会读取同一行。一次向用户呈现一个问题。用户回答问题后，为获取与该用户有关的问题而读取的行将使用答案选项进行更新。再一次，永远不会为两个并发用户更新相同的行。此方法类似于上面描述的 anotherDeadlockCausingMethod()。
6.  我希望您对应用程序的功能有所了解。并发用户从不读取或更新相同的行这一事实让我对资源如何被锁定感到惊讶。然后我发现页面锁定是为了更新表格。所以我去问 DBA 是否可以将其更改为对正在更新的表进行行锁定。他担心 DB2 实现行锁定的性能开销，并担心它是否会影响使用 DB2 的其他应用程序。所以他不想这样做，除非我找不到任何其他解决方案。
7.  请忘记 XA/JMS 部分。假设该部分暂时被注释掉。对于我看到死锁的大部分应用程序非 XA 数据源。

    ### 有人可以告诉我如何解决僵局吗？我想了解设计中出了什么问题。提前非常感谢任何帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:28:58.323

最后，我在没有死锁的情况下进行了一次干净运行，执行以下操作：

1.  hibernate.connection.isolation = 2
2.  在我的选择语句末尾添加了“for update of with cs”。
3.  我使用 saveOrUpdate() 休眠方法进行更新和插入。现在我使用 save() 进行插入，使用 update() 进行更新。

我不明白的一件事是，与我现在使用的 'with cs' 相比，为什么在我的 select 语句末尾使用 'with ur' 并不能解决死锁。想知道数据库的隔离级别，即“rs”与它有什么关系吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T06:02:25.857

当您执行多次插入、更新、删除时，我建议您添加

```
<property name="hibernate.connection.autocommit" value="false"/> 
```

一旦您成功执行所有查询，然后手动执行提交`connection.commit();` 也许这可以帮助您。

# ruby-on-rails - 多个 Rails 应用程序可以在它们之间共享模型/公共业务领域数据吗？

> ID：13871329
> 
> 赞同：2
> 
> 时间：2012-12-14T01:21:38.790
> 
> 标签：ruby-on-rails

我有几个用例在流程的不同点操作和添加相同的数据。

这些用例中的每一个都共享许多相同的模型和流程中的操作，但需要完全不同的视图和结构。

我正在考虑尝试 8thLight 的这篇文章中的技巧，但这是在 2007 年写的。

[http://blog.8thlight.com/jim-suchy/2007/02/20/sharing-a-database-among-multiple-rails-applications.html](http://blog.8thlight.com/jim-suchy/2007/02/20/sharing-a-database-among-multiple-rails-applications.html)

据他们说，诀窍是

(1) 在应用程序正上方创建一个包含共享模型的新文件夹。

```
applications_in_same_business_domain
    |-shared_models
    |-application1
    |-application2
    |-... 
```

(2) 通过 enviorments.rb 文件在您的应用程序中需要这个新文件夹或模块（我相信等效的文件是 config/application.rb 因为我在 Rails 3 中看不到 enviornments.rb。）

他们说这样的一些代码会起作用（在environments.rb中）

```
 $: << File.dirname(__FILE__) + '/your_lib_path' 
```

我试过了，但它不起作用（在 application.rb 中）......

```
 config.autoload_paths += %W(../../../mardom_shared_models) 
```

这是执行此操作的标准方法吗？

API 听起来像是另一种方法……但是……我对这里的 API 一无所知。自学6个月新手在这里）

如果可能的话，帮助我完成上述工作，我猜这将是具体问题。我可以这样做吗？

但任何关于其他问题的评论或文章将不胜感激。

我需要从这个链接开始修改 Rails 生成器：http: [//guides.rubyonrails.org/generators.html](http://guides.rubyonrails.org/generators.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-04T08:45:08.903

我宁愿将所有与模型相关的东西都放在一个 gem 中，并将 gem 本地安装到 vengor/gems 目录以简化在其中的导航。

# css - 嵌套 div 的布局/格式问题。div太多？

> ID：13871331
> 
> 赞同：0
> 
> 时间：2012-12-14T01:21:51.830
> 
> 标签：css, layout, html

好吧，我现在有点大了。

我正在处理基本线框（已附加），但在实现此布局时遇到了麻烦。基本上，我们有一个容器 div，里面还有几个 div。每个内部 div 都是产品的组件，并且都具有完全相同的结构化内容流 - 图像、产品标题和文档链接。在线框中显示了 7 个组件 div（一个有点隐藏在我的 MSPAINT 下）。

### 期望的成就

*   标题和链接必须浮动在图像图标旁边，无论其文本的字体大小/行高如何。
*   标题必须保持在一行。不允许包装。
*   内部 div 必须彼此相邻排列，直到它们不再适合，然后换行到下一行。
*   我可以将内容动态加载到容器 div 中，但该 div 需要能够处理不同数量的组件。当用户选择产品类型和版本时，组件的数量可以并且将会改变。

### 已知的

*   一些组件标题会很短（7-ish 字符），有些会很长（27-ish 字符）。
*   所有图标大约为 50x50 像素。
*   对于某些选定的产品，最多会有 8-9 个组件 div。
*   对于某些选定的产品，至少会有 3 个组件 div。

### 我已经放弃的东西

*   好吧，我们可以固定组件 div 的宽度和高度，看看我是否关心。
*   多个div。任何。组件 div 不需要有更多的嵌套 div。我是个白痴，那是愚蠢的（我确定答案是只有一个图像和 2 个段落元素的组件 div，图像向左浮动）。

我开发的代码又大又丑，因为我已经尝试并注释掉了很多东西。这是一个带有一些通用代码的**[jsFiddle](http://jsfiddle.net/fJhCy/3/)**，我认为这些代码对它造成的损害最小。

### HTML

```
<div id="container">
    <div class="component" id="1">
        <div class="icon">
            <img src="img.png"></a>
        </div>
        <div class="title">
            <p>Product Item #1</p>
        </div>
        <div class="links">
            <p><a href="#">HTML</a> <a href="#">PDF</a></p>
        </div>
    </div>
    <div class="component" id="2">
        <div class="icon">
            <img src="img.png"></a>
        </div>
        <div class="title">
            <p>Product Item 2</p>
        </div>
        <div class="links">
            <p><a href="#">HTML</a> <a href="#">PDF</a></p>
        </div>
    </div>
    ...
    // More component divs here.
</div>​ 
```

### CSS

```
#container {
    border: 1px solid red;
    overflow: auto;
    margin-left: auto;
    margin-right: auto;
    width: 900px;
}

.component {
    border: 1px solid black;
    margin: 3px;
    overflow: auto;
    float: left;
    padding: 3px;
}

.icon {
    float: left;
} 
```

非常感谢您的帮助！ ![线框](../Images/4b9b656b6830a8412c7d7bf62240d438.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:53:01.700

也许我会做这样的**[FIDDLE](http://jsfiddle.net/Dim13i/fJhCy/6/)**

组件结构：

```
<div class="component" id="1">
    <img class="icon" src="http://upload.wikimedia.org/wikipedia/commons/thumb/4/43/SemiPD-icon.svg/50px-SemiPD-icon.svg.png">
    <h1 class="title">Generic Product Name #1</h1>
    <p class="links">
        <a href="#">HTML</a><a href="#">PDF</a>
    </p>
</div> 
```

我还对 css 部分进行了一些更改：

```
#container {
    border: 1px solid red;
    overflow: auto;
    margin-left: auto;
    margin-right: auto;
    width: 600px;
    padding-bottom: 3px;
}

.component {
    border: 1px solid black;
    margin-top: 3px;
    margin-left: 3px;
    overflow: auto;
    float: left;
    padding: 5px;
}

.title {
    margin-left: 55px;
    font-size: 1.0em;
    font-weight: bold;
}

.links {
    margin-left: 55px;
}

.icon {
    float: left;
} 
```

​</p>

# jquery - jQuery .animate() 没有执行

> ID：13871336
> 
> 赞同：1
> 
> 时间：2012-12-14T01:22:29.950
> 
> 标签：jquery

我正在使用 .animate 尝试创建基于图块的游戏。我正在将 jQuery 与另一个 ajax 脚本混合以尝试使其工作。我一直单击箭头移动但没有得到任何结果。也许其他人会明白为什么？

纽扣：

```
$data .= "<center><table><tr><td></td><td><button onclick=\"transition(\'up\')\">&uarr;</button></td> <td></td></tr><tr><td><button onclick=\"transition(\'left\')\">&larr;</button></td> <td></td> <td><button onclick=\"transition(\'right\')\">&rarr;</button></td></tr><tr><td></td> <td><button  onclick=\"transition(\'down\')\">&darr;</button></td> <td></td></tr></table></center>"; 
```

地图：

```
$data .= "<div style=\'width:480px;height:480px;background-color:#000000;background-image:url(".$map['background'].");padding:".$map['locationpadding'].";\' id=\'locationMap\'>";

$data .= "<div id=\'specialLocations\'></div>";

$data .= "<div style=\'position:absolute;left:".$charrel[0]."px;bottom:".$charrel[1]."px;width:32px;height:32px;background-image:url(".$char['charimage'].");\' id=\'charLocation\'></div>";

$data .= "</div>"; 
```

最后，得到动画。我已经确保 if 语句都正常工作。所以到目前为止一切正常。

```
if($_POST['direction'] == "up"){

        print("$('#charLocation').animate({'bottom': '+=50px'}, 'slow');");

    }elseif($_POST['direction'] == "left"){

        print("$('#charLocation').animate({'left': '-=50px'}, 'slow');");

    }elseif($_POST['direction'] == "right"){

    print("$('#charLocation').animate({'left': '+=50px'}, 'slow');");

    }elseif($_POST['direction'] == "down"){

    print("$('#charLocation').animate({'bottom': '-=50px'}, 'slow');");

    }else{
        die('alert("Invalid movement.");');
    } 
```

通过 PHP 打印 jQuery/JavaScript 代码的原因是所有内容都是通过 Ajax 代码加载的，所以我从不打印。

很抱歉提前给您带来任何困惑，并感谢您为我查看此内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:33:00.573

我认为问题在于您使用这些语言制作游戏的方法。如果您想在基于 Web 的瓷砖游戏中移动角色，您应该控制前端客户端中的所有游戏逻辑 - 在本例中为 javascript - 并且仅使用 ajax 将关键游戏信息推送到服务器。例如，如果你移动一个棋子，你只在动画完成时发布新的棋子坐标，而不是调用 ajax 并执行从服务器返回的任何内容。

我认为在这种情况下无法提供示例，因为这是您方法基础的问题。

如果你有具体问题，我可以回答。要回答您当前的问题 - 将一行 javascript 作为 ajax 请求打印不会自动将响应作为 javascript 执行，也不应该如此。不要试图让它以这种方式工作。相反，重组您的方法以不需要这种行为来操作。

# java - 日志和记录器的区别？

> ID：13871337
> 
> 赞同：11
> 
> 时间：2012-12-14T01:22:51.300
> 
> 标签：java, logging, log4j

我见过人们使用这种方式：

```
Logger logger = Logger.getLogger("com.foo"); 
```

我看到了另一种方式：

```
Log log = LogFactory.getLog(CLASS.class); 
```

它们背后有什么区别？谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-14T01:29:45.673

对 Logger.getLogger 的调用来自 log4j api。

```
Logger logger = Logger.getLogger("com.foo"); 
```

[文档](https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/Logger.html)

* * *

对 LogFactory.getLog() 的调用来自 commons-logging api。

```
Log log = LogFactory.getLog(CLASS.class); 
```

[文档](http://commons.apache.org/logging/commons-logging-1.1.1/apidocs/org/apache/commons/logging/Log.html)

log4j 是一个日志框架，即它提供了记录消息的代码。Commons-logging 是日志框架的抽象层，它本身不记录任何内容。

# jquery - iphone5中的jQuery回调计时

> ID：13871339
> 
> 赞同：1
> 
> 时间：2012-12-14T01:23:00.847
> 
> 标签：jquery, iphone, safari, callback, timing

我正在开发一个小型移动框架，并且在 iPhone 上使用 jQuery 动画方法（如 fadeIn() 或 fadeOut()）时遇到了计时问题。在台式机上，它完美无缺！问题是，iphone 浏览器在大多数情况下都会忽略回调时间，并在动画结束之前启动函数。

这是我的代码

```
 function show_edit_product_page(curr_key){
    $('#pageid_10001').remove();
    console.log('removed...')
    $.ajax({
        url     :   '../scripts/webservice.php',
        dataType:   'html',
        type    :   'GET',
        data    :   'type=my_type_data&key='+curr_key,
        success: function(data) {
            $('#all_pages').append(data);
            $('#page_content .page').not('#pageid_10001').fadeOut(350,function() {
                $('#pageid_10001').fadeIn(350, function(){
                    myScrol2.refresh();
                }); 
            });
        }
    });
} 
```

'data' 包含一个 mainwrapper(#pageid_10001)，这是隐藏的。当其他页面完成淡出时，它应该只淡入。

任何想法，我如何优化行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:39:50.763

不幸的是，基于 JavaScript 的动画并不是 iPhone 上的 Safari 处理得那么好。在这种情况下，动画功能本身很可能成功完成，而实际“显示”的动画在视觉上被挂起。

我建议使用Safari 中内置的**CSS3 过渡效果来获得您正在寻找的平滑淡入/淡出：** [https ://developer.apple.com/library/safari/#documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Introduction .html](https://developer.apple.com/library/safari/#documentation/InternetWeb/Conceptual/SafariVisualEffectsProgGuide/Introduction.html)

一旦您可以使用一致的动画，同步时间（在您的情况下，在动画完成时调用一个函数）应该是相当微不足道的。

# python - 支持中型发行版的 Python 脚本/依赖项？

> ID：13871340
> 
> 赞同：3
> 
> 时间：2012-12-14T01:23:08.717
> 
> 标签：python, numpy, matplotlib, distribution, gdal

目前，我正在用纯 python 编写自定义地理空间脚本/模块。这些分发给我所写的公司内部的中等规模的用户群。用户使用多种 linux、OS X 和 windows，因此我需要能够支持安装到一系列系统。我广泛的依赖项列表是：

GDAL Matplotlib 与底图 NumPy SciPy PIL Python 2.7+

当其他用户作为安装联系人时，他们是如何为如此多样化的用户维护一个工具库的？目前正在考虑：

1.  使用我们需要的一切创建一个 LUbuntu VM，然后通过网络运行它或在用户机器上本地运行它。

2.  修改 FWTools 并添加我们需要的组件。FWTools 通过在用户调用脚本时设置本地、自包含的环境来发挥作用。

3.  创建一个像[PythonEveryWhere](http://pythoneverywhere.com)这样的实现，我们让用户通过浏览器访问 bash shell / python 解释器。数据通过网络从用户的共享驱动器中提取，并将输出填充到该驱动器。

4.  Pip / easy_install / Py2EXE / Py2App 已经过测试，但在多个平台上都不是很好（GDAL 是一个主要问题），或者考虑到依赖项的数量，创建了相当大的可分发文件。

还有哪些其他实现对您有用？我是否缺少明显的分发技术？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T17:41:41.593

[http://www.pyinstaller.org/](http://www.pyinstaller.org/)

它会破坏整个 Python 运行时、脚本和依赖项等。

缺点是应用程序启动需要一些时间，因为二进制文件必须将所有内容解压缩到内存中并从那里开始。

收益显然很大：无需维护脆弱的 Python 安装 + 依赖项，因为二进制文件是自包含的。没有安装，什么都没有。

# java - 尝试在 remove() 方法中从数组中删除字符串单词时出现 NullPointerException 错误

> ID：13871347
> 
> 赞同：1
> 
> 时间：2012-12-14T01:24:12.830
> 
> 标签：java, arrays, for-loop, nullpointerexception

我正在制作这个方法 remove() ，它以字符串单词作为参数，从全局数组“单词”中删除，但由于某种我找不到的原因，我一直收到 NullPointerException，被卡了几个小时。

基本上我检查单词是否在第一个位置，否则如果在最后一个位置，或者如果它不在所以我检查所有数组，并在单词位置之前添加前半部分，然后添加数组中单词位置之后的后半部分，如跳过它并“删除它”。但是我在 for 循环中得到一个 NullPointerException 来寻找单词在数组中的位置。该方法的代码在这里：

```
public void remove(String a){

String[] temp_arr = new String[words.length-1]; // make array with 1 less length for deleted 

    if(words[0].equals(a)){ // if the word is the first in the array

        for(int x=0, z=1; x<temp_arr.length; x++,z++)
            temp_arr[x]=words[z];

        words = temp_arr;

    } else if(words[words.length-1].equals(a)){ // if the word is in the last position of the array

        for(int x=0, z=0; x<temp_arr.length; x++,z++)
            temp_arr[x] = words[z];

        words = temp_arr;

    } else{ // if the word is in neither first or last position of array

        // THIS IS WHERE the exception is thrown, in this for loop, in the if(words[k].equals(a))

        int k=0;
        for (; k<words.length; k++){ // find the position of the word to delete
            if (words[k].equals(a)) {
                break;
            }
        }

        for (int i = 0; i < k-1; i++){ // add first part of array before the word

            temp_arr[i] = words[i];
        }

        for(int c = k, b = k+1; c< temp_arr.length; c++,b++){
            temp_arr[c] = words[b];
        }

        words = temp_arr; // assign the new values to global array

    }
} 
```

另外，如果有任何关于良好编码实践的建议将不胜感激，谢谢！

** 对于这种方法，我只能使用数组作为我的数据结构。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:36:37.317

像这样修改条件

a.equals(单词[0])

因为你知道字符串值 a。但不知道数组会产生什么值。因此，即使是空值也来自数组，它确实允许空指针异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T02:09:16.100

我运行你的代码并发现了一些错误，我在不改变核心思想的情况下纠正了一些东西：} else { // 如果单词既不在数组的第一个也不在最后一个位置

```
 // THIS IS WHERE the exception is thrown, in this for loop.

        int k = -1;
        for (int i = 0; i < words.length; i++) { // find the position of the word to delete
            if (words[i].equals(a)) {
                k=i;
                break;
            }
        }
        if(k<0)//if not exists
            return;

        for (int i = 0; i < k /*- 1*/; i++) { // add first part of array before the word

            temp_arr[i] = words[i];
        }

        for (int i = k; i < temp_arr.length; i++) {
            temp_arr[i] = words[i+1];
        }

        words = temp_arr; // assign the new values to global array

    } 
```

* * *

如果原始数组不能有空元素，我会这样做：

```
public static String[] remove(String words[] , String a) {
    int counter = 0;
    for (int i = 0; i < words.length; i++) {
        if( a.equals(words[i]) ){
            words[i] = null;
            counter++;
        }
    }
    if(counter==0){
        return words;
    }
    String[] words2 = new String[words.length - counter];
    int i=0;
    for (String string : words) {
        if(string!=null){
            words2[i++]=string;
        }
    }   
    return words2;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T01:31:41.103

我会这样做：

```
public void remove(String a) {
    List<String> tmp = new ArrayList<String>();

    for (String word : words) {
        if ((word != null) && (word.equals(a))) {
            continue;
        }

        tmp.add(word);
    }

    words = tmp.toArray(new String[]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T01:36:50.593

我有一个问题问你：

为什么哦，为什么要使用数组？您应该始终使用集合（例如 a `List`），除非您绝对必须使用数组（这确实很少见）。

如果它是 a `List`，你甚至不需要这个方法，因为`List`有一个`remove()`方法可以为你做这一切！

# javascript - 使用 JavaScript 在 Chrome 中加载时如何确定选项卡是否隐藏？

> ID：13871351
> 
> 赞同：0
> 
> 时间：2012-12-14T01:24:40.570
> 
> 标签：javascript, google-chrome, webkit

使用 JavaScript 在 Chrome 中加载时如何确定选项卡是否隐藏？我试过使用`onfocus`/`onblur`和`document.webkitHidden`.

`document.webkitHidden`在所有情况下都很好用，除了当我第一次恢复会话并且一个窗口同时打开多个选项卡时。在这种情况下，`document.webkitHidden`在所有选项卡中为 false。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:29:08.373

它很脏，但您可以检查 requestAnimationFrame 与 document.webkitHidden 结合运行的频率。Chrome throttles requestAnimationFrame when a tab isn't active.

# visual-studio-2012 - Visual Studio 2012 InstallShield 噩梦

> ID：13871354
> 
> 赞同：0
> 
> 时间：2012-12-14T01:25:24.363
> 
> 标签：visual-studio-2012, installshield

被迫在 VS 2012 中使用垃圾版本的 LE，我无法构建东西，因为它告诉我我的安装文件夹路径太长。从字面上看，它看起来像是在另一个文件夹中逐字创建相同的路径。首先这在 DVD 上失败了，所以我可以禁用它吗？其次，这似乎由变量 ISProductFolder 控制，但我找不到如何修改该位置。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-14T01:32:43.333

好吧，每个设置工具都有其问题也就不足为奇了。请注意，没有工具可以准确检测您的应用程序依赖项。工具能做的最好的事情就是提出建议。这就是为什么大多数安装开发人员自己确定依赖关系并手动将它们包含在安装程序中的原因。

如果您对 InstallShield 不满意，可以尝试不同的设置工具：[http ://en.wikipedia.org/wiki/List_of_installation_software](http://en.wikipedia.org/wiki/List_of_installation_software)

Advanced Installer 的免费版本包括一个[Visual Studio 安装项目](http://www.advancedinstaller.com/user-guide/tutorial-ai-ext-vs.html)，它可能会有所帮助。

# drupal - 使用自定义模块在 Drupal 上的页面内容之前插入标签

> ID：13871363
> 
> 赞同：1
> 
> 时间：2012-12-14T01:27:28.997
> 
> 标签：drupal, drupal-7, drupal-modules

我正在尝试创建一个 Drupal 自定义模块，该模块将包含带有特定微数据标签（除其他外）的任何页面或文章内容。我已经成功地在页眉和结束 '' 标记之前插入了代码，但是当我尝试将页面内容包含在内时，它只会在内容末尾将所有内容卡在一起。

例如，这是模块代码：

```
function my_module_page_build(&$page) {

        // add manifest value to header
        $manifest_code = "..."
        $page['header']['manifest'] = array(
            "#weight" => 0,
            "#markup" => t($manifest_code)
            );
        // add opening microdata tags
        $opening_microdata = "...";
        $page['content']['my_module_open_microdata'] = array(
            "#weight" => 0,
            "#markup" => t($opening_microdata)
            );
        $closing_microdata = "...";
        $page['content']['my_module_close_microdata'] = array(
            "#weight" => 25,
            "#markup" => t($closing_microdata)
            );
        // add javascript to footer
        $javascript = "...";
        $page['page_bottom']['my_module_javascript'] = array(
            "#weight" => 0,
            "#markup" => t($javascript)
            );

} 
```

我不想将关闭的微数据插入到`$page['page-bottom']`插槽中，因为我不希望微数据标签中包含这些链接和其他代码。我也尝试过使用负重将其向上移动，但没有运气。

我尝试搜索有关节点或博客或文章结构的更多信息，以查看代码是否还有其他插槽，但我找不到任何东西。

我敢肯定这很容易——我是否缺少了解页面结构的资源？我缺少一些简单的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T18:43:56.233

两种可能的解决方案：

1.  试试[hook_page_build 上第一条评论中的提示](http://api.drupal.org/api/drupal/modules!system!system.api.php/function/hook_page_build/7#comment-29108)，这应该会让你的权重声明真正生效。（但不确定重置`#sorted`标志是否会产生不利影响。）

2.  从 using 切换`hook_page_build()`到`your_module_preprocess_page(&$variables)`，将您的微数据标签和其他内容作为自定义条目添加到那里的“$variables”数组中。然后调整您的页面模板以随意放置这些附加变量。这使您可以很好地控制添加的位置，但代价是与主题自定义相关（即，它适用于自定义站点构建，但如果您的模块旨在用于任意主题的一般用途，则效果不佳）。

# javascript - 如何将自定义参数传递给 facebook 登录？

> ID：13871367
> 
> 赞同：1
> 
> 时间：2012-12-14T01:27:53.777
> 
> 标签：javascript, facebook, login

我有一个没有任何服务器端语言的静态网站。

是否可以在用户尝试登录时传递一些自定义值，然后在用户成功登录并从 facebook 返回我的网站时取回数据？

我读过有关signed_request，但这需要PHP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:29:31.177

您实际上是在询问 Facebook 是否会为您存储数据。

不幸的是，答案是否定的。您的服务器上需要某种机制，可以将 Facebook 用户与您需要存储的数据相匹配。

您可以使用本地存储，但这显然是浏览器的本地存储并且容易被篡改。

# sql - 限制对其他模式的访问

> ID：13871369
> 
> 赞同：0
> 
> 时间：2012-12-14T01:29:06.340
> 
> 标签：sql, oracle

我在 Oracle Enterprise Manager 中创建了一个用户，该用户是一个模式的管理员。如何批量限制对其他模式的访问，数据库有大约 50 个模式，用户不应该能够查看这些其他模式或与之交互。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:43:21.217

默认情况下，他无法访问，除非已明确授予 对其他模式对象的访问权限`PUBLIC`。在这种情况下，您没有简单的选项来限制对它们的访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T04:27:20.833

您可以使用以下视图来查询您的用户允许的权限

例如：SELECT * FROM USER_TAB_PRIVS；--用户允许的表

USER_ROLE_PRIVS
USER_SYS_PRIVS
USER_TAB_PRIVS
USER_TAB_PRIVS_MADE
USER_TAB_PRIVS_RECD
ALL_COL_PRIVS
ALL_COL_PRIVS_MADE
ALL_COL_PRIVS_RECD
ALL_REPGROUP_PRIVILEGES
ALL_TAB_PRIVS
ALL_TAB_PRIVS_MADE
ALL_TAB_PRIVS_RECD
USER_AQ_AGENT_PRIVS
USER_COL_PRIVS
USER_COL_PRIVS_MADE
USER_COL_PRIVS_RECD
USER_REPGROUP_PRIVILEGES

# reporting-services - 使过滤器参数可选

> ID：13871372
> 
> 赞同：1
> 
> 时间：2012-12-14T01:29:15.420
> 
> 标签：reporting-services, reportingservices-2005

我正在使用 SSRS 2005。我创建了一个名为 icVar 的报告参数。我应该怎么做才能让这个过滤器成为可选的。这意味着如果用户在文本框中输入了一些内容，将根据输入的内容显示结果，但如果没有输入任何内容，它只会将其视为全部显示。这是我的数据集中的查询。

```
SELECT PASS_M, ENTRY_DT, EXIT_DT, WORKED_HRS, ACCESS_LOCATION_X, IC_N, COMPANY_M,  
CONSECUTIVE_D
FROM TEMP_TARGET
WHERE (CONSECUTIVE_D >= @consecDays) AND (ENTRY_DT BETWEEN @startDate AND @endDate) AND
(ACCESS_LOCATION_X LIKE @accessVar) AND
(IC_N LIKE @icVAr) 
```

我正在为我的 icVar 使用通配符 %。因此，如果用户为该过滤器输入 S123，则报告将显示 IC_N 值以 S123 开头的结果...但是，当没有为该过滤器输入任何内容时，不要强制用户输入任何内容。如果没有输入，它将显示 IC_N Like %（表示全部）。

任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:15:21.647

只需使用表达式评估短路 - 首先测试 Null 并且仅当它不是 Null 时，表达式的下一部分才会评估，测试`LIKE`（参见最后一行的条件）：

```
SELECT PASS_M, ENTRY_DT, EXIT_DT, WORKED_HRS, ACCESS_LOCATION_X, IC_N, COMPANY_M, CONSECUTIVE_D
FROM TEMP_TARGET
WHERE (CONSECUTIVE_D >= @consecDays) 
AND (ENTRY_DT BETWEEN @startDate AND @endDate) 
AND (ACCESS_LOCATION_X LIKE @accessVar) 
AND ((@icVar IS NULL) OR (IC_N LIKE @icVAr)) 
```

# r - 如何使用邻接矩阵来确定将哪些行“传递”给 r 中的函数？

> ID：13871377
> 
> 赞同：0
> 
> 时间：2012-12-14T01:29:57.703
> 
> 标签：r, loops, spatial

R 新手，我有一个很长的问题：

我有一个 shapefile/地图，我的目标是根据该多边形和与其相邻的每个多边形的属性为该地图中的每个多边形计算某个索引。

我有一个邻接矩阵——我认为它与“一阶皇后邻接权重矩阵”相同，尽管我不确定——它描述了哪些多边形与其他多边形接壤，例如，

```
POLYID A B C D E  
    A  0 0 1 0 1  
    B  0 0 1 0 0    
    C  1 1 0 1 0     
    D  0 0 1 0 1     
    E  1 0 0 1 0 
```

例如，上面表示多边形“C”和“E”与多边形“A”相邻；多边形“B”仅邻接多边形“C”等。

我拥有的属性表每行有一个多边形：

```
POLYID TOT L10K 10_15K 15_20K ...  
     A 500   24     30     77 ... 
```

* * *

其中 TOT、L10K 等是我用来计算指数的变量。

我的数据中有 525 个多边形/行，所以我想使用邻接矩阵来确定将哪些行的属性合并到感兴趣索引的计算中。现在，当我对与相邻多边形的一个“束”相对应的行进行子集化时，我可以计算索引，然后使用循环（如果感兴趣，我正在计算百分位差距指数，一种衡量当地收入隔离的方法）。例如，子集底特律市学校的“社区”：

```
Detroit <- UNSD00[c(142,150,164,221,226,236,295,327,157,177,178,364,233,373,418,424,449,451,487),] 
```

然后记录边缘列的比例和运行总计：

```
catprops <- vector()
for(i in 4:19)
{
  catprops[(i-3)]<-sum(Detroit[,i])/sum(Detroit[,3])
}
catprops <- as.data.frame(catprops)
catprops[,2]<-cumsum(catprops[,1]) 
```

列 4:19 是属性表中的必要列。

然后我使用下面的代码来计算索引——注意循环有“i in 1:19”，因为底特律子集有 19 个多边形。

```
cgidistsum <- 0
for(i in 1:19)
{  
   pranks <- vector()
   for(j in 4:19)
    {
      if (Detroit[i,j]==0)
        pranks <- append(pranks,0)
      else if (j == 4)
      pranks <- append(pranks,seq(0,catprops[1,2],by=catprops[1,2]/Detroit[i,j]))
      else 
        pranks <- append(pranks,seq(catprops[j-4,2],catprops[j-3,2],by=catprops[j-3,1]/Detroit[i,j]))
    }
  distpranks <- vector()
  distpranks<-abs(pranks-median(pranks))
  cgidistsum <- cgidistsum + sum(distpranks)
  }
cgi <- (.25-(cgidistsum/sum(Detroit[,3])))/.25 
```

如果我提供了不必要的信息，我深表歉意。我真的很想利用邻接矩阵来计算这些行的每个“捆绑”的 CGI。

如果你碰巧知道我是怎么开始的，那就太好了。

对于任何新手错误，我深表歉意，我是 R 新手！

编辑：

我已经想出了如何解决这个问题，但是为了清楚问题并回答评论中提出的一个问题，让我说一个多边形的邻域是它自己和它相邻的每个多边形的联合。在我上面给出的示例中，对于多边形“A”，这将是多边形“A”、“C”和“E”的并集

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T05:01:03.277

目前尚不清楚您想如何利用邻接矩阵。

一个想法是将您的问题表述为图表。igraph 适用于操作相邻的边和顶点。

这是我的想法：

```
# I read the adjency matrix
POLYID.adjency <- read.table(text ='A B C D E  
A  0 0 1 0 1  
B  0 0 1 0 0    
C  1 1 0 1 0     
D  0 0 1 0 1     
E  1 0 0 1 0',header = TRUE)
# I create the graph
require(igraph)
g <- graph.adjacency(adjmatrix=POLYID.adjency)
V(g)$label <- V(g)$name 
```

作为选项，您可以绘制它：

```
 plot(g) 
```

![在此处输入图像描述](../Images/06590e886cc4a9f1211b0219fc1475e7.png)

现在我使用属性矩阵，为每条边创建一个属性（因为每一行都是一条边）

# 创建一个虚拟属性矩阵

```
POLYID.attributes <- read.table(text =' TOT L10K 10_15K 15_20K 
A 500   24     30     77
B 400   25     30     87
C 300   26     30     97
D 200   27     30     57
E 100   28     30     47',header = TRUE)

# I set the attributes
for(x in colnames(POLYID.attributes)){
   g <- set.vertex.attribute(g, name = x,
                         value=  POLYID.attributes[,x])

  } 
```

现在所有问题信息都在图表中。

```
str(g)
IGRAPH DN-- 5 10 -- 
+ attr: name (v/c), label (v/c), TOT (v/n), L10K (v/n),
        X10_15K (v/n), X15_20K (v/n)
+ edges (vertex names):
 [1] A->C A->E B->C C->A C->B C->D D->C D->E E->A E->D 
```

现在我可以使用 igraph 选项获取每个节点的信息，例如：

e. 获取与B相邻的多边形的L10K属性

```
V(g)[get.adjlist(g,'out')$B]$L10K
[1] 26 
```

在这里，我计算与 plyogon A 相邻的所有多边形的总和：

```
 sum(V(g)[get.adjlist(g,'out')$A]$TOT)
  400 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T18:59:24.563

这就是我最终要做的，虽然它看起来不像@agstudy 的那么优雅：

```
for(k in 1:nrow(adjacency00))
 {
  positions <- grep(1,adjacency00[k,])-1
  nghbrd <- UNSD00[c(positions,k),] 
```

等，从而创建一个相邻多边形的框架，在其上进行后续计算

# python - Sphinx——结合自动模块和自动类

> ID：13871382
> 
> 赞同：14
> 
> 时间：2012-12-14T01:30:20.637
> 
> 标签：python, python-sphinx

除非我遗漏了什么，否则 Sphinx`automodule`只会记录模块的成员，而不是该模块中定义的类的属性。

有没有一种方法可以*自动*获取模块的行为`automodule`并`autoclass`以这样的方式组合，以便我可以自动获取模块成员的文档*以及*在该模块中找到的任何类的属性？

我意识到我可以编写所有这些脚本，但它很快就会变得非常混乱和冗长。如果有人有一种简洁、优雅的方式来做到这一点，我也很乐意听到。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T16:55:54.600

```
.. automodule:: whatever
    :members: 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-16T19:55:40.297

还要检查[automodapi](https://github.com/astropy/sphinx-automodapi "automodapi")，它可以帮助您自动为所有模块生成 API 文档。

# algorithm - 算法分析（Big O 和 Big Omega）

> ID：13871384
> 
> 赞同：2
> 
> 时间：2012-12-14T01:30:27.890
> 
> 标签：algorithm, big-theta, big-o

我在考试中答错了这个问题：命名一个既不是 O(n) 也不是 Omega(n) 的函数。

在尝试通过 youtube 自己学习这些东西之后，我认为这可能是一个正确的答案：

> (n ³ (1 + sin n)) 既不是 O(n) 也不是 Omega(n)。

那会准确吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T04:14:56.497

> 命名一个既不是 O(n) 也不是 Omega(n) 的函数

说`f ∈ O(g)`意味着商

```
f(x)/g(x) 
```

对于所有足够大的`x`.

`f ∈ Ω(g)`另一方面意味着商

```
f(x)/g(x) 
```

对于所有足够大的`x`.

所以找到一个既不是`O(n)`也不`Ω(n)`是的函数意味着找到一个函数`f`使得商

```
f(x)/x 
```

变得任意大，并且在每个区间任意接近零`[y, ∞)`。

> 我认为这可能是一个正确的答案：`(n^3 (1 + sin n))`既不是 O(n) 也不是 Omega(n)。

让我们把它代入我们的商：

```
(n^3*(1 + sin n))/n = n^2*(1 + sin n) 
```

`n^2`增长到无穷大，并且在每六分之三的情况下，该因子大于`1 + sin n`1 `n`。因此，每间隔`[y, ∞)`一个商就变得任意大。给定一个任意的`K > 0`，让`N_0 = y + K + 1`和`N_1`最小的`N_0 + i, i = 0, 1, ..., 4`这样的`sin (N_0+i) > 0`。然后`f(N_1)/N_1 > (y + K + 1)² > K² + K > K`。

就`Ω(n)`部分而言，证明并不容易，尽管我相信它是满意的。

但是，我们可以稍微修改一下函数，保留将增长函数与振荡函数相乘的想法，从而使证明变得简单。

代替`sin n`，让我们选择`cos (π*n)`，并且为了抵消零点，向它添加一个快速递减函数。

```
f'(n) = n^3*(1 + cos (π*n) + 1/n^4) 
```

现在，

```
 / n^3*(2 + 1/n^4), if n is even
f'(n) = <
         \  1/n           , if n is odd 
```

很明显，`f'`它既不受上界，也不受下界 的任何正常数倍数的限制`n`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T03:31:40.947

我会考虑类似于二进制搜索的东西。这是 O(log N) 和 Ω(log N)。由于 Omega 被定义为下限，因此不允许超过函数本身——所以 O(log N) 绝对不是 Ω(N)。

我认为对已删除答案的一些评论应该得到一些……澄清——甚至可能是彻底的更正。引用 CLRS 的话，“Ω 表示法给出了函数在常数因子内的下限。”

由于 N ²与 N 的差异超过一个常数因子，因此 N ²不是Ω(N)。

# c# - 根据日期范围在 c# 中搜索具有日期模式名称的文件

> ID：13871385
> 
> 赞同：1
> 
> 时间：2012-12-14T01:30:34.283
> 
> 标签：c#, file, search

我有一些具有这种模式的文件：

前缀yyyyMMddHHmmss.txt

该前缀始终相同。

例如：前缀20120830115800.txt

前缀20120829114200.txt

前缀20120829134621.txt

我想编写一个函数来获取一天和范围并返回其名称从那天起在输入范围内的所有文件：

```
ReadFiles(string filesLocation, DateTime fromDate, int range) 
```

现在我使用这种方法：

```
for (int i = 0; i <= range; i++)
{
    SearchFolderForFiles(location, fromDate.AddDays(i));
}

SearchFolderForFiles(//params)
{
//…
  string searchTemplate = string.Format("Prefix{0:yyyyMMdd}*.txt", date);
  DirectoryInfo di = new DirectoryInfo(location);
  FileInfo[] myFiles = di.GetFiles(searchTemplate);
//…
} 
```

但我认为这应该是更好的方法（特别是我们有范围不分开的日子）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:00:55.987

你可以用linq做到这一点。

可怕的例子，但你可以看到我得到了什么:)

```
 DateTime startDate = DateTime.Now;
        DateTime endDate = DateTime.Now;

        var myFiles = new DirectoryInfo(location).EnumerateFiles()
            .Where(f => DateTime.Parse(System.IO.Path.GetFileNameWithoutExtension(f.Name).Replace("Prefix", "")) >= startDate
            && DateTime.Parse(System.IO.Path.GetFileNameWithoutExtension(f.Name).Replace("Prefix", "")) <= endDate); 
```

# php - 如何使用 PHPUnit 测试此方法调用？

> ID：13871386
> 
> 赞同：1
> 
> 时间：2012-12-14T01:30:42.927
> 
> 标签：php, unit-testing, testing, phpunit

要测试的代码：

```
// Add the activation provider argument to the factory definition
$factoryDefinition = $container->getDefinition('gremo_subscription_factory');
$factoryDefinition->addArgument(new Reference($providerId)); 
```

测试方法应该检查`addArgument`方法，包括`$providerId`参数。我只是在学习 PHPUnit，现在我只能打电话`$this->anything()`：

```
$container->expects($this->at(3))
    ->method('getDefinition')
    ->with('gremo_subscription_factory')
    ->will($this->returnValue($factory));

$factory->expects($this->once())
    ->method('addArgument')
    ->with($this->anything());

$this->pass->process($container); 
```

如何检查参数类型是`Reference`类，并且（反过来）它的参数正是字符串`$providerId`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:58:15.477

这非常复杂，特别是因为`Reference`该类不是依赖注入并且方法调用不返回任何内容。但是，我认为您可以使用[参数约束](http://www.phpunit.de/manual/3.6/en/writing-tests-for-phpunit.html#writing-tests-for-phpunit.assertions.assertThat.tables.constraints)来解决它。这是我将如何执行第二个子句：

```
$factory->expects($this->once())
    ->method('addArgument')
    ->with($this->logicalAnd(
        $this->isInstanceOf('Reference'),
        $this->attributeEqualTo('attribute', $providerId)
    )); 
```

中的第二项`logicalAnd()`基本上只是检查`Reference`创建的对象以查看是否`$providerId`正确分配（我不确定构造函数中发生了什么`$providerId`，`Reference`但我假设它被保存到实例变量或其他东西）。

然而，这种事情正在进入测试`Reference`类的实现细节的领域，所以这样的测试对于维护 SRP 并不是很好。通过重构代码可以更好地解决所有这些问题。一般来说，如果很难测试，可能不是测试套件的错。如果可以，请考虑首先在这方面进行更改，而不是编写过于聪明的测试。

# ruby-on-rails - Dalli 是否会过期所有盒子中的缓存？

> ID：13871389
> 
> 赞同：1
> 
> 时间：2012-12-14T01:30:59.497
> 
> 标签：ruby-on-rails, memcached, dalli

根据[https://github.com/mperham/dalli](https://github.com/mperham/dalli)，我们可以配置多个 Memcache 服务器。但我不确定它是如何工作的。

假设我们正在使用具有两台服务器的 memcache 集群：memcache1(box1) 和 memcache2 (box2)。

*   用户 A 和用户 B 共享同一个资源。
*   用户A登录并读取box1中缓存的共享资源。
*   用户 B 登录并读取 box2 中缓存的共享资源。
*   用户 A 更新共享资源并使 box1 上的缓存过期
*   用户 B 看不到更新的资源，但仍然在 box2 中获得缓存。

到目前为止，这是我的理解，我不确定缓存过期在集群环境中是如何工作的。特别是，当我们想急切地使缓存过期时，它会在所有盒子上过期吗？

鉴于我们在两个 rails 服务器中有类似的配置：

```
config.cache_store = :dalli_store, 'memcache1', 'memcache2' 
```

您如何看待这个用例？

感谢您的所有兴趣。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T01:35:24.743

Memcached 分片是分片，而不是复制。也就是说，每台服务器上都没有数据的副本；数据在服务器之间拆分。

密钥只会存在于一台服务器上。Dalli 通过分发算法传递密钥以确定哪个服务器将拥有给定密钥，然后将消息传递到该服务器。多个服务器上不会存在相同的密钥，因此您不必担心同时使两个服务器上的密钥过期。如果您使密钥过期，它将在它所在的单个盒子上过期。

如果两个用户都通过相同的缓存键请求数据，那么使该缓存键过期将使他们两个都失效；您不必担心用户 1 会被路由到 Box 1，而用户 2 会被路由到 Box 2，因为给定的密钥将始终映射到给定的服务器。

# html - Firefox 强制文本在同一行

> ID：13871390
> 
> 赞同：1
> 
> 时间：2012-12-14T01:31:11.443
> 
> 标签：html, css, firefox, xhtml

我有一段 HTML 和 CSS

```
<style type="text/css">
    #main *{
        position:absolute;
    }
</style>

<div id="main">
    <div class="cards_description">
        Business
        <br />
        Cards!
    </div>
</div> 
```

在火狐中。即使有换行符。文本在同一行

> 商业名片！

代替

> 商业
> 
> 牌！

我在chrome中没有这个问题。是否有一些 CSS 可以纠正这个问题？

我使用的是 Firefox 版本 17.0.1。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:32:29.010

尝试将其包装在`<p>`标签中，例如：`<p>Business <br />Cards!</p>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T01:41:57.097

```
<style type="text/css">
    ...
    .cards_description span {
        display : block;
    }
    ...
</style>

<div id="main">
    <div class="cards_description">
        <span>Business</span> <span>Cards!</span>
    </div>
</div> 
```

# c++ - 为什么 intrusive_ptr 和 shared_ptr 不能与 boost::intrusive 容器一起使用？

> ID：13871391
> 
> 赞同：6
> 
> 时间：2012-12-14T01:31:20.823
> 
> 标签：c++, boost, shared-ptr, smart-pointers, intrusive-containers

boost::intrusive 文档描述了如何[将智能指针与侵入式容器一起使用，](http://www.boost.org/doc/libs/1_52_0/doc/html/intrusive/using_smart_pointers.html)但随后说您不能使用最有可能使用的智能指针，“它必须具有与原始指针相同的所有权语义。这意味着不能使用资源管理智能指针（如 boost::shared_ptr）。”

为什么是这样？我想不出任何明显的理由应该禁止它们。究竟会破坏什么？侵入式容器无论如何都不管理它们内部项目的分配。就我而言，我想使用 intrusive_ptr，但我看不出为什么 shared_ptr 也不应该工作。

编辑：要清楚，我的意思是钩子指针（例如，侵入式单链表中的下一个指针）是一个智能指针。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-23T19:26:43.513

[也许文档中`boost::intrusive::slist`](http://www.boost.org/doc/libs/1_53_0/doc/html/intrusive/slist.html#intrusive.slist.slist_container "提升::侵入性")有一条线索，说明它在哪里声明使用默认配置，`slist`存储为一个循环列表，这排除了使用`shared_ptr`/`intrusive_ptr`和朋友，因为你有一个参考循环。

boost 的一部分不能与另一部分正常工作仍然很烦人；我想唯一的解决方法是在`intrusive_ptr`将对象添加到容器时使用类似的方法并手动增加引用计数，并在删除它时减少它。（这排除了`shared_ptr`，因为你不能直接调整它的引用计数。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T06:51:42.617

一个明显的原因是效率。`shared_ptr`使用原子递增/递减操作来计算引用。这意味着在后台处理使用`shared_ptr`指针的足够大的容器将需要几秒钟，因为每个引用计数器都需要自动递减。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T14:35:42.650

大概这是因为侵入式容器已经在内部管理了内存（如升压`ptr_`容器），而不是创建两个不同的侵入式容器实现（一个用于非拥有指针，一个用于拥有），他们决定限制什么类型点可以使用。

# c++ - 清晰高效的 3D 范围树实施

> ID：13871394
> 
> 赞同：5
> 
> 时间：2012-12-14T01:31:32.257
> 
> 标签：c++, algorithm, search, data-structures, range-tree

我正在做这个项目，我必须在 3d 空间中搜索对象，效率是一个巨大的问题，我认为**Range Tree**非常适合我正在尝试做的事情，Interval Tree 也可以，但我不是要从树中删除任何东西，一旦我在 3D 空间中添加了每个对象，我将只使用该结构进行搜索。

以下是我将如何使用该结构：

假设我有一个对象数组（我们称之为**queryArr**）（〜 10,000 个对象）每个对象都有 3 个参数（x，y，z）我有另一个非常大的对象数组（我们称之为**totalArr**）（> 5,000,000 个对象） ）。

我在这里尝试做的是给定**queryArr**的元素，找到最相似的（或 totalArr 中的相同元素）在某些情况下，在**totalArr**中会有一个具有相同参数的对象**，**但在大多数情况下，不会是具有相同参数的对象。

因此，我将搜索 和 之间的所有`(x+10,y+10,z+10)`值`(x-10,y-10,z-10)`。如果它没有产生任何结果，我将 x,y,z 乘以 2 并重试，直到它产生一些结果。

最简单的方法是简单的搜索方法，它具有复杂性， `O(N*M) (N = size of queryArr, M = sie of totalArr)`但这种方法非常缓慢和愚蠢。

我认为范围树是要走的路，但我自己从未实现过，而且我不太了解范围树如何在大于 2 的维度上工作。那么有人知道范围树的良好实现吗？我相信如果我有源代码，我将能够理解它们是如何工作的。

顺便说一句，如果您认为对于这项任务有比 Range Tree 更好的结构，请告诉我我愿意接受建议。（我已经考虑过 kd-Trees 和区间树）

谢谢，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T03:25:48.307

我刚刚阅读了维基百科的文章。让我们看看我是否可以写一个 n 维范围树。因为在 3 维中值得做的任何事情都值得在 n 中做。

因此，n 维范围树的基本部分是它可以根据低维范围树递归定义。

一些属性类可以使用相对通用的值类型。专门`element_properties<T>`设置 n 维值的标量类型，并专门`get<i>(T const&)`获取`i`n 维值的第 th 维。

```
#include <memory>
#include <cstddef>
#include <vector>
#include <iostream>
#include <algorithm>
#include <string>
#include <sstream>

void Assert(bool test) {
  if (!test)
  {
    std::cout << "Assert failed" << std::endl;
    exit(-1);
  }
}
template<typename... Args>
struct Print {
  static void Do(Args... args) {}
};
template<typename Arg, typename... Tail>
struct Print<Arg, Tail...> {
  static void Do(Arg arg, Tail... args) {
      std::cout << arg;
      Print<Tail...>::Do(args...);
  }
};
template<typename... Args>
void Debug(Args... args) {
    std::cout << "DEBUG:[";
    Print<Args...>::Do(args...);
    std::cout << "]\n";
}

template<typename T>
struct element_properties {
  typedef typename T::value_type value_type;
};
template<>
struct element_properties<int> {
  typedef int value_type;
};
template<size_t d, typename T>
typename element_properties<T>::value_type get( T const & t );

template<size_t d>
typename element_properties<int>::value_type get( int i ) { return i; }

template<size_t d, typename U, typename A>
typename element_properties<std::vector<U,A>>::value_type get( std::vector<U,A> const& v) {
  return v[d];
}

template<typename T, size_t dim, typename Order = std::less< typename element_properties<T>::value_type> >
struct range_tree {
  typedef typename element_properties<T>::value_type value_type;
  struct sorter {
    bool operator()( T const& left, T const& right ) const {
      return Order()( get<dim-1>(left), get<dim-1>(right) );
    }
  };
  struct printer {
    std::string operator()( T const& t ) const {
      std::string retval = "[ ";
      retval += print_elements( t );
      retval += "]";
      return retval;
    }
    std::string print_elements( T const& t ) const {
      std::stringstream ss;
      typedef typename range_tree<T, dim-1, Order>::printer next_printer;
      ss << next_printer().print_elements(t);
      ss << get<dim-1>(t) << " ";
      return ss.str();
    }
  };
  template<typename Iterator>
  range_tree( Iterator begin, Iterator end ) {
    std::sort( begin, end, sorter() );
    root.reset( new tree_node( begin, end ) );
  }

  template<size_t n, typename Func>
  void walk(Func f) const {
      if (root) root->walk<n>(f);
  }
  template<size_t n, typename Func>
  void walk(Func f) {
      if (root) root->walk<n>(f);
  }
  struct tree_node {
    std::unique_ptr< range_tree<T, dim-1, Order> > subtree;
    T value;
    template<size_t n, typename Func>
    void walk(Func f) const {
      if (n==dim && !left && !right)
        f(value);
      if (left)
        left->walk<n>(f);
      if (right)
        right->walk<n>(f);
      if (subtree)
        subtree->walk<n>(f);
    }
    template<size_t n, typename Func>
    void walk(Func f) {
      if (n==dim && !left && !right)
        f(value);
      if (left)
        left->walk<n>(f);
      if (right)
        right->walk<n>(f);
      if (subtree)
        subtree->walk<n>(f);
    }
    void find_path( T const& t, std::vector< tree_node const* >& vec ) {
      vec.push_back(this);
      if ( sorter()(t, value) ) {
        if (left)
          left->find_path(t, vec);
      } else if (sorter()(value, t)) {
        if (right)
          right->find_path(t, vec);
      } else {
        // found it!
        return;
      }
    }
    std::vector< tree_node const* > range_search( T const& left, T const& right )
    {
      std::vector<tree_node const*> left_path;
      std::vector<tree_node const*> right_path;
      find_path( left, left_path );
      find_path( right, right_path );
      // erase common path:
      {
        auto it1 = left_path.begin();
        auto it2 = right_path.begin();
        for( ; it1 != left_path.end() && it2 != right_path.end(); ++it1, ++it2) {
          if (*it1 != *it2)
          {
            Debug( "Different: ", printer()( (*it1)->value ), ", ", printer()( (*it2)->value ) );
            break;
          }

          Debug( "Identical: ", printer()( (*it1)->value ), ", ", printer()( (*it2)->value ) );
        }
        // remove identical prefixes:
        if (it2 == right_path.end() && it2 != right_path.begin())
            --it2;
        if (it1 == left_path.end() && it1 != left_path.begin())
            --it1;
        right_path.erase( right_path.begin(), it2 );
        left_path.erase( left_path.begin(), it1 );
      }
      for (auto it = left_path.begin(); it != left_path.end(); ++it) {
        if (*it && (*it)->right) {
          Debug( "Has right child: ", printer()( (*it)->value ) );
          *it = (*it)->right.get();
          Debug( "It is: ", printer()( (*it)->value ) );
        } else {
          Debug( "Has no right child: ", printer()( (*it)->value ) );
          if ( sorter()( (*it)->value, left) || sorter()( right, (*it)->value) ) {
            Debug( printer()( (*it)->value ), "<", printer()( left ), " so erased" );
            *it = 0;
          }
        }
      }
      for (auto it = right_path.begin(); it != right_path.end(); ++it) {
        if (*it && (*it)->left) {
          Debug( "Has left child: ", printer()( (*it)->value ) );
          *it = (*it)->left.get();
          Debug( "It is: ", printer()( (*it)->value ) );
        } else {
          Debug( "Has no left child: ", printer()( (*it)->value ) );
          if ( sorter()( (*it)->value, left) || sorter()( right, (*it)->value) ) {
            Debug( printer()( right ), "<", printer()( (*it)->value ), " so erased" );
            *it = 0;
          }
        }
      }
      left_path.insert( left_path.end(), right_path.begin(), right_path.end() );
      // remove duds and duplicates:
      auto highwater = std::remove_if( left_path.begin(), left_path.end(), []( tree_node const* n) { return n==0; } );
      std::sort( left_path.begin(), highwater );
      left_path.erase( std::unique( left_path.begin(), highwater ), left_path.end() );
      return left_path;
    }

    std::unique_ptr<tree_node> left;
    std::unique_ptr<tree_node> right;
    // rounds down:
    template<typename Iterator>
    static Iterator middle( Iterator begin, Iterator end ) {
      return (end-begin-1)/2 + begin ;
    }
    template<typename Iterator>
    tree_node( Iterator begin, Iterator end ):value(*middle(begin,end)) {
      Debug( "Inserted ", get<dim-1>(value), " at level ", dim );
      Iterator mid = middle(begin,end);
      Assert( begin != end );
      if (begin +1 != end) { // not a leaf
        Debug( "Not a leaf at level ", dim );
        ++mid; // so *mid was the last element in the left sub tree 
        Assert(mid!=begin);
        Assert(mid!=end);
        left.reset( new tree_node( begin, mid ) );
        right.reset( new tree_node( mid, end ) );
      } else {
        Debug( "Leaf at level ", dim );
      }
      if (dim > 0) {
        subtree.reset( new range_tree<T, dim-1, Order>( begin, end ) );
      }
    }
  };
  std::unique_ptr<tree_node> root;
};
// makes the code above a tad easier:
template<typename T, typename Order >
struct range_tree< T, 0, Order > {
  typedef typename element_properties<T>::value_type value_type;
  struct printer { template<typename Unused>std::string print_elements(Unused const&) {return std::string();} };
  range_tree(...) {};
  struct tree_node {}; // maybe some stub functions in here
  template<size_t n, typename Func>
  void walk(Func f) {}
};

int main() {
  typedef std::vector<int> vector_type;
  std::vector<vector_type> test;
  test.push_back( vector_type{5,2} );
  test.push_back( vector_type{2,3} );
  range_tree< vector_type, 2 > tree( test.begin(), test.end() );
  std::cout << "Walking dim 2:";
  auto print_node = [](vector_type const& v){ std::cout << "(" << v[0] << "," << v[1] << ")"; };
  tree.walk<2>( print_node );
  std::cout << "\nWalking dim 1:";
  tree.walk<1>( print_node );
  std::cout << "\n";

  std::cout << "Range search from {3,3} to {10,10}\n";
  auto nodes = tree.root->range_search( vector_type{3,3}, vector_type{10,10} );
  for (auto it = nodes.begin(); it != nodes.end(); ++it)
  {
    (*it)->walk<2>( print_node );
  }
} 
```

这非常接近n维范围树。0 维树自然不包含任何内容。

现在已经添加了基本的搜索功能（一次一个维度）。您可以手动将递归执行到较低维度，或者向上执行，以便`range_search`始终返回级别 1 `tree_node*`s。

# c++ - 调用托管函数的 C++ 模板函数

> ID：13871397
> 
> 赞同：0
> 
> 时间：2012-12-14T01:31:41.533
> 
> 标签：c++, templates, c++-cli

我正在尝试围绕托管类构建一个包装器，以便可以从本机代码中调用它。

这是托管功能：

```
void MyManagedFunction(MyStruct iStruct)
{
  // Code according to what are the types of the 2 MyStruct members
}

struct MyStruct
{
  public MyStruct(Object iValue1, Object iValue2) : this()
  {
    Value1 = iValue1; // Often contains DateTime::Now
    Value2 = iValue2;
  }

  public Object Value1;
  public Object Value2;
} 
```

在我的例子中，Value1 几乎总是 System::DateTime::Now，而 Value2 几乎总是一种常见的数据类型（int、double、float、string、bool）。我想在包装器中制作两个模板化函数。

在包装器的 .h 中，我有以下内容：

```
#ifdef MYWRAPPER_EXPORTS
#  define MYWRAPPER  __declspec(dllexport)
#else
#  define MYWRAPPER  __declspec(dllimport)
#endif  

class MYWRAPPER MyWrapper
{

public:
  MyWrapper();
  ~MyWrapper();

  template <class T> void MyNativeFunction(T iParam1)
  {
    MyStruct^ wStruct = gcnew MyStruct(System::DateTime::Now, iParam1);
    //The class containing the managed function is a singleton
    MyManagedClass::Instance->MyManagedFunction(wStruct); 
  }

  template <class T, class W> void MyNativeFunction(T iParam1, W iParam2)
  {
    MyStruct^ wStruct = gcnew MyStruct(iParam1, iParam2);
    //The class containing the managed function is a singleton
    MyManagedClass::Instance->MyManagedFunction(wStruct);
  }
}; 
```

这个包装器编译没有问题。当我在纯本机代码中包含 .h 时，问题显然发生了。由于我无法隐藏模板化函数的内容，因此我管理了在本机端可见的内容，从而阻止本机代码编译。

我想知道是否有解决方法来实现这一点。我不介意我是否仅限于使用原始类型作为函数的参数。最好的事情是，如果我能够简单地将模板化函数的内容隐藏在本机代码中，那么它只知道签名

这是我迄今为止尝试/考虑过的：

*   将参数转换为 void* 并调用将调用托管函数的函数。通过这样做，我无法将 void* 转换回对象，因为我失去了它的类型，并且使用 typeid 来获取“T”或“W”类型并没有帮助，因为它因编译器而异。
*   为我想使用的每种类型重载函数。如果我找不到更好的解决方案，这是我最有可能使用的。问题是它意味着很多重载（尤其是考虑到组合数量的 2 参数函数）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:03:17.887

如果您知道模板将采用的所有类型，则可以使用这些变量强制实例化它，从而将模板函数的代码放在源文件中而不是头文件中。

您可以查看[将 C++ 模板函数定义存储在 .CPP 文件中提供的示例](https://stackoverflow.com/questions/115703/storing-c-template-function-definitions-in-a-cpp-file)

正如他所说，您可以执行以下操作（复制粘贴警报）：

.h 文件

```
class foo
{
public:
    template <typename T>
    void do(const T& t);
}; 
```

.cpp 文件

```
template <typename T>
void foo::do(const T& t)
{
    // Do something with t
}

template void foo::do<int>(const int&);
template void foo::do<std::string>(const std::string&); 
```

# applescript - applescript 本机工作，但不能在 Filemaker 中工作

> ID：13871400
> 
> 赞同：0
> 
> 时间：2012-12-14T01:31:50.550
> 
> 标签：applescript, filemaker

我有一个 .jar 文件，它从终端运行，并使用最小的低层协议将 HL7 文件发送到 IP 地址和端口。这在终端中运行良好，并且在使用以下脚本在 applescript 编辑器中编写脚本时也运行良好：

```
do shell script "/System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/bin/java -jar /Applications/dcm4che-1.4.32/bin/hl7snd.jar mllp://10.0.0.2:2575 /Applications/dcm4che-1.4.32/bin/worklist/file.txt" 
```

但是，当我尝试通过在 Filemaker pro 12 中执行相同的 applescript 来自动执行此操作时，我收到此错误：

```
JavaVM: Failed to load JVM: /System/Library/Frameworks/JavaVM.framework/Versions/1.6//libserver.dylib 
```

对此问题的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-09T05:14:12.107

我在山狮的 filemaker 11 中遇到了同样的问题，我刚刚找到了解决方案。您必须取消设置 filemaker 为 java 设置的环境变量。为此，请在 java 命令之前添加：

```
unset JAVA_JVM_VERSION 
```

因此，您的完整脚本将是：

```
do shell script "unset JAVA_JVM_VERSION;java -jar /Applications/dcm4che-1.4.32/bin/hl7snd.jar mllp://10.0.0.2:2575 /Applications/dcm4che-1.4.32/bin/worklist/file.txt" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T21:16:00.503

您是否在 FileMaker 中正确转义了双引号？如果将整个 applescript 命令粘贴到 FileMaker 的数据查看器中，它看起来是否正确？

看起来整个路径都没有正确加载......

# android - Android：如何使用动态 TextViews 为不同的屏幕尺寸设置不同的文本尺寸？

> ID：13871401
> 
> 赞同：3
> 
> 时间：2012-12-14T01:31:55.130
> 
> 标签：android

我的应用程序上有一个 TableLayout，我通过从本地 SQLite DB 获取数据以编程方式添加行。由于我还以编程方式在每一行上创建 TextView，我需要为它们指定一个文本大小，并且该大小不适用于所有屏幕大小。例如，如果我选择一款在智能手机上看起来不错的手机，它在大型平板电脑上会显得太小。

如果我在 XML 上有 TextViews，我可以简单地为每个屏幕尺寸创建不同的布局，但是如何以编程方式创建 TextViews 来实现文本尺寸的灵活性？

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T10:37:51.607

我最终用下面的方法解决了它。不是最优雅的，但效果很好：

```
DisplayMetrics dm = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(dm);
double x = Math.pow(dm.widthPixels/dm.xdpi,2);
double y = Math.pow(dm.heightPixels/dm.ydpi,2);
double screenInches = Math.sqrt(x+y);

int textsize = 0;

if(screenInches<5)
        textsize = 16;
else if(screenInches<7.5)
        textsize = 22;
else
        textsize = 24; 
```

# c# - 字典中的不同输入都相同

> ID：13871404
> 
> 赞同：1
> 
> 时间：2012-12-14T01:32:13.990
> 
> 标签：c#, dictionary, kinect

所以我将一些数据放入字典中。一个字符串（名称）和一个骨骼（用于保存位置和东西）。我正在从 kinect 读取骨骼的位置，然后将其放入字典中，然后将它们保存到 .txt 文件中。现在我很困惑，因为它们都是一样的。有一段时间，我有一些标签显示了一些骨骼的不同位置，它们都在变化。所以这意味着它与我输入字典有关吗？

这是我的输入法：

```
 JointCollection joints = skele.Joints;
        List<Bone> temp = current_bones;
        Frame temp_f = new Frame(temp);
        Joint h_j = joints[JointType.Head];
        foreach (Joint j in joints)
        {
            try
            {
                switch (j.JointType)
                {
                    #region cases
                    case (JointType.Head):
                        temp_f.frame_bones["Head"].setPosition(j.Position.X, j.Position.Y, j.Position.Z);
                        break;
...Other stuff that basically repeats but with different jointtypes
                }
            }
            catch (Exception ex) { /*MessageBox.Show("Error getting joints: " + ex.Message);*/ }
        }
        if (recording)
        {
            if (newR)
            {
                bvhBuilder.resetAnimation();    //Resets a list of frames
                newR = false;
            }
            bvhBuilder.add_frame(temp_f);//adds a frame to the list
        } 
```

骨骼类的主要内容：

```
public Bone(String b_name)
    {
        name = b_name;
    }

    public void setPosition(float _x, float _y, float _z)
    {
        x = _x; y = _y; z = _z; 
    } 
```

我的 BVHBuilder 类中的相关内容：

```
List<Bone> current_bones = new List<Bone>();
    Frame current_frame;
    List<Frame> animation_frames = new List<Frame>();
    public BVHBuilder(List<Bone> bones)
    {
        current_bones = bones;
    }
public String build()
    {
        StringBuilder builder = new StringBuilder();
        builder.AppendLine(build_bones());
        builder.AppendLine(build_anim());
        return builder.ToString();
    }

 public String build_anim()
    {
        StringBuilder sb = new StringBuilder();
        sb.AppendLine("MOTION");
        sb.AppendLine("Frames: " + getFrameCount());
        sb.AppendLine("Frame Time: " + (float)((float)1/(float)30));
        foreach (Frame frame in animation_frames)
        {
            String line = "";
            int b_i = 0;
            float root_x = frame.root.x;
            float root_y = frame.root.y;
            float root_z = frame.root.z;
            Console.WriteLine("Root: (" + root_x + "," + root_y + "," + root_z + ")"); 
            for (int i = 0; i < frame.frame_bones.Count; i++)
            {
                Bone bone = frame.frame_bones.Values.ElementAt(i);
                line += (bone.x - root_x) + " ";
                line += (bone.y - root_y) + " ";
                if (b_i >= frame.frame_bones.Count) { line += (root_z - bone.z); }   //Don't want a space at the end
                else { line += (root_z - bone.z) + " "; }

                b_i++;
            }
            sb.AppendLine(line);
        }
        return sb.ToString();
    } 
```

框架类：

```
class Frame
{
    public Dictionary<String, Bone> frame_bones = new Dictionary<String, Bone>();
    public Bone root = null;
    int root_pos = 0;

    public Frame(List<Bone> bones)
    {
        int i = 0;
        foreach (Bone b in bones)
        {
            frame_bones.Add(b.name,b);
            if (b.root) { root_pos = i; root = b; }
            i++;
        }
    }
} 
```

这就是它保存的地方：

```
private void saveAnim()
    {
        int times = 0;
        String path = "";
        Boolean exists = true;
        while (exists)
        {
            path = Path.GetDirectoryName(System.Reflection.Assembly.GetExecutingAssembly().Location) + "\\" + "nectrecord" + times + ".txt";
            exists = File.Exists(path);
            times++;
        }
        currP = path;
        Console.WriteLine(currP);
        StreamWriter sw = new StreamWriter(currP);
        String write = bvhBuilder.build();
        int max_i = write.Length;
        progressBar1.Maximum = max_i;
        int c_i = 0;
        foreach (char c in write)
        {
            sw.Write(c);
            c_i++;
            progressBar1.Value = c_i;
        }
        sw.Flush();//make sure everything wrote
        sw.Close();
        MessageBox.Show("Saved to :" + currP);
    } 
```

我知道那是很多代码，但我已经尝试调试了大概 4 个小时。希望一双新的眼睛能帮助我找到问题所在。

顺便说一句，这是输出文件的样子：

```
HIERARCHY
ROOT Hip_C
{
OFFSET 0 0 0
CHANNELS 3 Xposition Yposition Zposition
JOINT Spine
{
    OFFSET 0 0 0
    CHANNELS 3 Xposition Yposition Zposition
    JOINT Shoulder_C
    {
        OFFSET 0 0 0
        CHANNELS 3 Xposition Yposition Zposition
        JOINT Head
        {
            OFFSET 0 0 0
            CHANNELS 3 Xposition Yposition Zposition
        }
        JOINT Shoulder_R
        {
            OFFSET 0 0 0
            CHANNELS 3 Xposition Yposition Zposition
            JOINT Elbow_R
            {
                OFFSET 0 0 0
                CHANNELS 3 Xposition Yposition Zposition
                JOINT Wrist_R
                {
                    OFFSET 0 0 0
                    CHANNELS 3 Xposition Yposition Zposition
                    JOINT Hand_R
                    {
                        OFFSET 0 0 0
                        CHANNELS 3 Xposition Yposition Zposition
                    }
                }
            }
        }
        JOINT Shoulder_L
        {
            OFFSET 0 0 0
            CHANNELS 3 Xposition Yposition Zposition
            JOINT Elbow_L
            {
                OFFSET 0 0 0
                CHANNELS 3 Xposition Yposition Zposition
                JOINT Wrist_L
                {
                    OFFSET 0 0 0
                    CHANNELS 3 Xposition Yposition Zposition
                    JOINT Hand_L
                    {
                        OFFSET 0 0 0
                        CHANNELS 3 Xposition Yposition Zposition
                    }
                }
            }
        }
    }
}
JOINT Hip_R
{
    OFFSET 0 0 0
    CHANNELS 3 Xposition Yposition Zposition
    JOINT Knee_R
    {
        OFFSET 0 0 0
        CHANNELS 3 Xposition Yposition Zposition
        JOINT Ankle_R
        {
            OFFSET 0 0 0
            CHANNELS 3 Xposition Yposition Zposition
            JOINT Foot_R
            {
                OFFSET 0 0 0
                CHANNELS 3 Xposition Yposition Zposition
            }
        }
    }
}
JOINT Hip_L
{
    OFFSET 0 0 0
    CHANNELS 3 Xposition Yposition Zposition
    JOINT Knee_L
    {
        OFFSET 0 0 0
        CHANNELS 3 Xposition Yposition Zposition
        JOINT Ankle_L
        {
            OFFSET 0 0 0
            CHANNELS 3 Xposition Yposition Zposition
            JOINT Foot_L
            {
                OFFSET 0 0 0
                CHANNELS 3 Xposition Yposition Zposition
            }
        }
    }
}
}

MOTION
Frames: 210
 Frame Time: 0.03333334
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05713073 -0.009174455 -0.2937571 0.2087359 -0.2028138 -0.902887 0.2087359 -0.2028138 -0.9028869 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05713073 -0.009174455 -0.2937571 0.2087359 -0.2028138 -0.902887 0.2087359 -0.2028138 -0.9028869 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05713073 -0.009174455 -0.2937571 0.2087359 -0.2028138 -0.902887 0.2087359 -0.2028138 -0.9028869 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05713073 -0.009174455 -0.2937571 0.2087359 -0.2028138 -0.902887 0.2087359 -0.2028138 -0.9028869 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05713073 -0.009174455 -0.2937571 0.2087359 -0.2028138 -0.902887 0.2087359 -0.2028138 -0.9028869 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05713073 -0.009174455 -0.2937571 0.2087359 -0.2028138 -0.902887 0.2087359 -0.2028138 -0.9028869 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05713073 -0.009174455 -0.2937571 0.2087359 -0.2028138 -0.902887 0.2087359 -0.2028138 -0.9028869 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05713073 -0.009174455 -0.2937571 0.2087359 -0.2028138 -0.902887 0.2087359 -0.2028138 -0.9028869 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05713073 -0.009174455 -0.2937571 0.2087359 -0.2028138 -0.902887 0.2087359 -0.2028138 -0.9028869 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 
```

...并且持续了一段时间

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:41:26.240

您只`temp_f`在 the 之前做了一次`foreach`，但您总是将相同的列表添加到字典中？

此外，您`BVHBuilder.add_frame`在没有`add_frame`声明时使用...我想您的意思是`Frame`或省略了代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:38:50.743

好吧，这可能与框架类的一些问题有关？因为我创建了一个 List 并将数据直接放入其中，现在它工作正常。

# php - PHP不会将表单发布到数据库

> ID：13871409
> 
> 赞同：-2
> 
> 时间：2012-12-14T01:32:43.693
> 
> 标签：php, forms, mysqli

试图将一个简单的表单发布到我的数据库中，但无法正常工作。我通过 XAMPP 激活了 PHP 和 MySQL。数据库“E-mail list”是用“Players”表建立的。

PHP代码：

```
 <?php 
$mysqli = new mysqli('localhost', 'root', '', 'E-mail list');
    if(isset($_POST['save']))
    {
    $name = $mysqli->real_escape_string($_POST['name']);
    $email = $mysqli->real_escape_string($_POST['email']);
    $phone = $mysqli->real_escape_string($_POST['phone']);
    $other = $mysqli->real_escape_string($_POST['other']);
    $query = 'INSERT INTO Players (
    name,
    email,
    phone,
    other
    )
    VALUES ('.$name.', "'.$email.'", "'.$phone.'","'.$other.'")';
    if ($mysqli->query($query))
    {
    echo 'Data Saved Successfully.';
    }
    else
    {
    echo 'Cannot save data.';
    }}
    ?> 
```

和形式：

```
<form id="myForm" method="post">>
<div data-role="fieldcontain">
    <label for="name">Please enter your name:</label>
    <input type="text" name="name" id="name" class="required" value="" autocomplete="off" />
    <label for="email">Please enter your e-mail:</label>
    <input type="text" name="email" id="email" value="" class="required" autocomplete="off"  />
    <label for="phone">Please enter your phone number:</label>
    <input type="number" name="phone" id="phone" value="" class="required" autocomplete="off"  />

<br><br>    
<label for="other">Other comments</label>
<textarea name="other" id="other" autocomplete="off" placeholder="Anything else you'd like to add?">
</textarea>
</form>
<p><strong id="error"></strong></p>
<br><br>
<input type="button" id="save" name="save" value="Submit Form" />
<p id="response"></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:45:37.380

SQL 中的名称值缺少双引号。

```
VALUES ("'.$name.'", "'.$email.'", "'.$phone.'","'.$other.'")'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T01:53:21.643

使用 Firefox/firebug 查看参数和结果，并添加一个 echo($query); 所以你可以在萤火虫中看到它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T05:41:43.713

“电子邮件列表”似乎不是方便的数据库名称，但应该没问题。
无论如何，您的目标应该是显示所有可能发生的错误。

因此，您必须始终检查错误并以更有用的形式报告它们，而不仅仅是“无法保存数据”。

始终检查您的连接

```
$mysqli = new mysqli('localhost', 'root', '', 'E-mail list');
if ($mysqli->connect_error) {
    trigger_error($mysqli->connect_error);
} 
```

查询相同

```
if (!$mysqli->query($query)) {
    trigger_error($mysqli->error." ".$query);
} 
```

如果您没有看到错误消息 - 检查代码的逻辑：如果您曾经运行过代码，是否运行过您编写的代码，PHP 是否有效，是否有错别字等。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T09:39:36.943

我对您的 PHP 和 HTML 部分的代码进行了一些更改。，

**对于 PHP：**

```
<?php 
$mysqli = new mysqli('localhost', 'root', '', 'E-mail list');
/* check connection */
if ($mysqli->connect_errno) {
printf("Connect failed: %s\n", $mysqli->connect_error);
exit();
}
if(isset($_POST['save']))
{
$name = $mysqli->real_escape_string($_POST['name']);
$email = $mysqli->real_escape_string($_POST['email']);
$phone = $mysqli->real_escape_string($_POST['phone']);
$other = $mysqli->real_escape_string($_POST['other']);
$query = "INSERT INTO Players (`name`,`email`,`phone`,`other`) VALUES ('".$name."','".$email."','".$phone."','".$other."')";
if($mysqli->query($query))
{
echo 'Data Saved Successfully.';
}
else
{
echo 'Cannot save data.';
}
}
?> 
```

**对于 HTML：**

```
<form id="myForm" method="post" action="">
<div data-role="fieldcontain">
    <label for="name">Please enter your name:</label>
    <input type="text" name="name" id="name" class="required" value="" autocomplete="off" /><br />
    <label for="email">Please enter your e-mail:</label>
    <input type="text" name="email" id="email" value="" class="required" autocomplete="off"  /><br />
    <label for="phone">Please enter your phone number:</label>
    <input type="number" name="phone" id="phone" value="" class="required" autocomplete="off"  />

<br><br>    
<label for="other">Other comments</label>
<textarea name="other" id="other" autocomplete="off" placeholder="Anything else you'd like to add?">
</textarea>
<p><strong id="error"></strong></p>
<br><br>
<input type="submit" id="save" name="save" value="Submit Form" />
<p id="response"></p>
</form> 
```

我认为这可以帮助您解决问题。

# php - MySql删除操作比较日期时间和当前日期时间

> ID：13871414
> 
> 赞同：0
> 
> 时间：2012-12-14T01:33:50.017
> 
> 标签：php, mysql, datetime, sql-delete

我是 PHP 和 MySql 的新手。我想从 order_before 传递当前日期和时间的表中删除行。order_before 是日期/时间类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:43:00.283

```
<?php
$db = new PDO('mysql:host=localhost;dbname=db','root','root');

if(filter_has_var(INPUT_POST, 'submit')) {
  $now = date("Y-m-d H:i:s");
  $r = $db->query("SELECT * FROM db WHERE datetime < '".$now."'");
  $n = $r->rowCount();
  if ($n){
    while($o = $r->fetchObject()) {
      $db->query('DELETE FROM db WHERE id = '.$o->id);
    }
  }
} 
```

也许像上面的东西？（未经测试，并且在顶部）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T02:18:25.027

只需在语句中添加条件，应该很容易：

```
$sql = sprintf("DELETE FROM mytable WHERE order_before > '%s'", date('Y-m-d H:i:s'));
$db->exec($sql); 
```

# database - ModX Revo 数据库：成员组和文档组之间的关系

> ID：13871415
> 
> 赞同：1
> 
> 时间：2012-12-14T01:33:55.083
> 
> 标签：database, content-management-system, modx, modx-revolution

我正在创建一些自定义查询，需要弄清楚成员组和文档组之间的关系。

我的最终目标是在用户登录时显示属于特定用户组的资源。我能够从 Sessions 中获取他们的用户 ID，所以到目前为止我发现的关系是：

用户 ID -> 成员组表 -> `??Unknown table that pairs Member Groups with Document Groups??`-> 文档组表-> 资源表

我就是找不到那张丢失的桌子！

如果有人可以帮助我，那就太棒了！

谢谢

（ps：使用 Revo）

编辑：添加图片以获取帮助

![在此处输入图像描述](../Images/2eaec9dd931e2dc7a071a45a027e1765.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T13:41:22.207

您可以使用一些内置的 MODX 方法来实现这一点。

这未经测试，可能不起作用，但这可能是一种方法：

```
// userGroups = membergroups
$userGroups = $user->getUserGroups();

foreach ($userGroups as $userGroup) {
    $resGroups = $userGroup->getResourceGroups(); 

    foreach ($resGroups as $resGroup) {
        $resources = $resGroup->getResources();
        // merge resources into an array or something

    }
} 
```

查看**moduser.class.php**、**modusergroup.class.php**和**modresourcegroup.class.php**以查看这些方法背后的查询。您也许可以使它们适应一种更有效的查询。

另外，如果我没有误解您想要实现的目标，那么您的结果应该类似于用户在登录时在管理器的资源树中看到的结果？

这使用了 resource/getnodes.class.php 处理器，它使用 getCollection 为每个上下文检索所有可能的资源，然后遍历每个资源并决定是否使用`$resource->checkPolicy('list')`. 这可能是另一种需要考虑的方法。

我通常使用自定义数据而不是 MODX 资源，所以很想听听你是如何处理这个问题的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-25T16:29:44.980

我知道这真的很老了，但我遇到了这个问题，自己寻找答案。经过更多的挖掘，我发现它`access_resource_groups`是链接`document_groups`和的表`member_groups`

*   `document_groups.id`=`access_resource_groups.target`
*   `member_groups.id`=`access_resource_groups.principal`

# android - Eclipse 构建的 apk 中不包含 libs 目录

> ID：13871417
> 
> 赞同：2
> 
> 时间：2012-12-14T01:34:19.747
> 
> 标签：android

我在构建一个长期存在的apk（来自Eclipse）时突然开始遇到问题，突然apk中不再包含lib目录（和jar）。这刚刚开始突然发生，我已经尝试了我在各种帖子上找到的所有内容来解决但没有成功......删除 bin 和 gen dirs，多次清理/刷新/IDE重新启动，修复项目属性等

我还尝试从构建路径中删除所有 jar 引用，直到项目无法构建，然后按照[这篇文章](https://stackoverflow.com/questions/1334802/how-can-i-use-external-jars-in-an-android-project)中的各种说明进行操作——仍然没有结果。

我现在已经应用了最新的 ADT (21) 和 SDK 更新，但仍然有同样的问题。

帮助！现在对这种不一致感到有点生气......我错过了什么？

编辑：重新安装 ADT 后我仍然遇到问题，但后来我发现了我的问题......即使在较旧的 apks 中，我也有一个 libs 目录但没有 jar 文件......但是子目录（armeabi，......v7a等）以某种方式被清空/清除了他们的 .so 文件。我想如果它们是空的，它们只是不包含在 apk 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:53:59.503

我认为最快的解决方案是为 Windows 下载并运行 ADT：http: [//developer.android.com/sdk/index.html#download](http://developer.android.com/sdk/index.html#download)

# c - RHEL 5 libudev.h 中的编译错误没有这样的文件或目录

> ID：13871418
> 
> 赞同：1
> 
> 时间：2012-12-14T01:34:27.227
> 
> 标签：c, compiler-errors, udev

总而言之，在从“apt-get”获取 udev 库后，我正在尝试编译一些在 Ubuntu 中编译的代码。我试图让它在 RedHat 5 中编译，但出现以下编译错误：

错误：libudev.h：没有这样的文件或目录

问题类似于：[QSerialDevice: Compilation error "libudev.h: No such file or directory"](https://stackoverflow.com/questions/7658349/qserialdevice-compilation-error-libudev-h-no-such-file-or-directory)

但是，不是在 Ubuntu 上发生故障，而是在 RedHat 5 上发生。我尝试查找 udev 库的 RPM 文件，并从以下链接获得了一个 RPM 文件。当我双击它时，RPM 文件安装不成功，说明：

“无法安装源包”“没有提供安装包”

[http://www.linuxquestions.org/questions/linux-software-2/i-need-libudev-or-udev-devel-for-red-hat-5-a-4175422051/](http://www.linuxquestions.org/questions/linux-software-2/i-need-libudev-or-udev-devel-for-red-hat-5-a-4175422051/)

udev-147-2.42.el6.src.rpm 是 RPM 的名称

任何帮助，将不胜感激。在 Google 上进行搜索开始让我相信这个 libudev.h 仅适用于 Ubuntu？这是真的！？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T15:22:54.583

它仅适用于`RedHat 6`不在`RedHat 5`.

```
http://pkgs.org/centos-6-rhel-6/centos-rhel-i386/libudev-devel-147-2.41.el6.i686.rpm.html 
```

# c - 为什么要这样投？“（uint16_t）-1；”

> ID：13871420
> 
> 赞同：3
> 
> 时间：2012-12-14T01:34:58.913
> 
> 标签：c

我看到了这样一行代码：

xxxxx = (uint16_t) -1;

为什么将 -1 转换为无符号整数？这个代码是什么？

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T01:36:29.923

它将返回可能的最高无符号 16 位整数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T01:37:49.737

显然，答案触手可及。只需插入该代码并逐步执行，您将看到将 -1 转换为 16 位*无符号*整数时获得的值。

结果是 -1[的二进制补码](http://en.wikipedia.org/wiki/Two%27s_complement)，即： 0xFFFF *hex*或 65535 *decimal*。

至于使用这样的代码的实际原因，它只是一个捷径。或者也许只是为了满足类型兼容性要求。

如果您想知道 -1 为何会被强制转换为 0xFFFF (65535) 而不是 0 或 1，正如人们所期望的那样，您必须了解其原因是 C 语言虽然是静态类型的，但非常自由在执行类型限制时。这意味着它会很高兴地将任何内存位置转换为 - 或*解释*为您告诉它的任何任意类型的数据。如果使用不当，这当然会产生非常严重的后果，但由于缺乏严格的健全性检查，权衡是灵活性和速度提高。几十年前设计 C 语言时，这一点非常重要，如果您正在为非常小的处理器编写代码，这一点仍然很重要。

话虽如此，如果您将演员表视为简单地说：*“忽略您认为您对该内存位置的数据了解的情况，请告诉我，如果您将其读取为`<insert_your_type_here>`“*并且知道计算机通常将负数表示为二进制补码（见上文），那么答案现在应该很明显：C 正在将内存中的值作为无符号整数读回。

作为结束语。我应该指出，C 并不是唯一一种将 -1 转换为 0xFFFF 的语言，但更现代的能够进行更强类型检查的语言也会这样做，这可能是出于兼容性和连续性的原因，以及它的原因可以反转强制转换：0xFFFF 回到有符号的 16 位整数为 -1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T01:39:23.050

它返回 65535，这是一个两字节（16 位）无符号整数的最大值。

# sql - 在sql中的case语句中使用sum和count

> ID：13871421
> 
> 赞同：3
> 
> 时间：2012-12-14T01:35:00.637
> 
> 标签：sql, sum, case

```
select req.code ,res.code,
case
( 
when (req.code==res.code) then 'pass'
when (req.code<>res.code) then 'fail'
/*....2 more case 'when' 'then' statements here*/
end ) result,

req.country ,res.country,

case (when then staments as above)result,
/*.......case stmts upto 70 statemnts*/
from requesttable req full outer join responsetable res on
req.id=res.id 
and ....some conditions. 
```

谁能告诉我如何对每一列求和并同时显示总和以及两个表的每一列中的记录数并在我的查询中显示计数？

我的结果应该是这种

```
code  code1  result  sum     sum1    equivalence country country1 result1  sum    sum1
100   100    pass    200000  25000   fail        ind     aus      fail     800000 800000

equivalence
pass 
```

我正在尝试准备一份加入两个表格的报告。我正在使用多个案例语句来完成此操作。我想在一个报告中同时显示两个表的每列的总和和每列的计数。我的查询属于以下类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T03:08:27.497

我认为这就是你正在寻找的东西。对于显示在该行上的代码和国家/地区值，它将为您提供所显示组合的通过和失败帐户，并且您将在定义聚合的列上具有唯一性。

```
Select  req.code, 
        res.code,
        Sum(Case When req.code = res.code) Then 1 Else 0 End) As [Pass],
        Sum(Case When req.code <> res.code) Then 1 Else 0 End) As [Fail],
        req.country, 
        res.country,
        Sum(Case When req.country = res.country) Then 1 Else 0 End) As [Pass],
        Sum(Case When req.country <> res.country) Then 1 Else 0 End) As [Fail]
From    requesttable req
Full    Outer Join responsetable res
        On  req.id = res.id
Where   ...
Group   By  req.code,
            res.code,
            req.country,
            res.country 
```

# ruby - Ruby OptionParser：隐藏命令选项的帮助文本

> ID：13871424
> 
> 赞同：6
> 
> 时间：2012-12-14T01:35:17.490
> 
> 标签：ruby

Ruby“OptionParser 将根据该描述自动为您生成帮助屏幕”[http://ruby.about.com/od/advancedruby/a/optionparser.htm]

有没有办法删除命令选项的帮助文本。我可以使用隐藏命令，而是使用命令选项（开关）并隐藏其帮助上下文。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T13:36:31.583

我能够为此拼凑出一个不太优雅的解决方案。它将隐藏主帮助屏幕中的选项，听起来它可能符合您的需求：

```
require 'optparse'

options = {}

OptionParser.new do |opts|
  opts.banner = "Usage: #{$0} [options]"

  opts.on("-a", "--argument 1,2,3", Array, "Array of arguments") { |a| options[:array] = a  }
  opts.on("-v", "--verbose", "Verbose output") { |v| options[:verbose] = true }
  opts.on("-h", "--help", "Display this help") do
    hidden_switch = "--argument"
    #Typecast opts to a string, split into an array of lines, delete the line 
    #if it contains the argument, and then rejoins them into a string
    puts opts.to_s.split("\n").delete_if { |line| line =~ /#{hidden_switch}/ }.join("\n") 
    exit
  end
end 
```

如果您要运行 --help，您会看到以下输出：

```
Usage: test.rb [options]
    -v, --verbose                    Verbose output
    -h, --help                       Display this help 
```

# oop - 正确使用类和函数

> ID：13871426
> 
> 赞同：0
> 
> 时间：2012-12-14T01:35:32.193
> 
> 标签：oop, class, theory

我从另一个开发人员那里接管了站点，他将所有内容都放在类文件中的函数中。

例如页面列出系统用户**our_users.php**

```
$users = $object_user -> get_users_list(); 
```

并且功能`get_users_list()`不在网站上的其他任何地方使用。

这样做有意义吗？

我个人什至不会创建函数，而只是将函数内部的代码放在`get_users_list()`our_users.php 中，**因为**它只使用过一次。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:46:19.980

OOP 不仅使代码更易于重用，还有助于对功能进行分组，并确保其他开发人员在尝试理解您的工作时不会迷失方向。如果您开始撕毁以前的开发人员的结构，IMO 您会在自己的脚下开枪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:31:43.970

当前 OOP 的指导原则之一是“关注点分离”的概念。这意味着您将小型工作单元提取到它们自己的方法和类中。用一种方法直接做一百件事的想法与此相反。

拆分功能使您的代码更易于阅读、维护和测试。

网络上有许多关于 OOP 最佳实践的博客文章——目前[SOLID](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)是最重要的。如果您查找它们，我相信它们中的任何数量都可以比我更好地描述它们。

# jquery - 可排序和可放置：CSS 防止 jquery-ui 可排序拖动放置的项目

> ID：13871428
> 
> 赞同：2
> 
> 时间：2012-12-14T01:35:47.050
> 
> 标签：jquery, jquery-ui, jquery-ui-droppable, jquery-ui-sortable

从这个[问题](https://stackoverflow.com/questions/13870942/jquery-sortable-and-droppable-cannot-append-the-drop-item)得到答案后，我遇到了另一个问题——我怎样才能再次拖动放置的项目？

我已将丢弃项目的 css 设置为，

```
.dropped-items li {
        position: relative !important;
        top: 0 !important;
        left: 0 !important;
        width: 120px !important;
        height: auto !important;
        border: 1px solid black !important;
    } 
```

但这将防止`jquery-ui sortable`拖动放置的项目。

我能做些什么？

[jsfiffle](http://jsfiddle.net/sAEar/10/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:56:49.743

您可以通过不使用您指定的 css 而是在添加元素后“覆盖”jQuery 设置的内联样式来获得所需的结果：

```
container.children().last().css({ position: 'relative', top: '', left: '' }); 
```

这是[更新的小提琴](http://jsfiddle.net/sAEar/11/)

# ms-access - Microsoft Access 是否允许此功能？

> ID：13871431
> 
> 赞同：1
> 
> 时间：2012-12-14T01:36:00.953
> 
> 标签：ms-access, select, crud, subform

当我从子表单中选择行时，microsft office access 是否具有此功能，从 EmpName、ComputerName 和 ProductName 中选择的数据将自动填充到我右上角的 2 文本框中，产品名称将是另一个选择产品的组合框。

另一件事是，是否可以在子表单中进行选择时进行 CRUD？

我应该用什么样的标签来回答我的问题？我尝试了很多不同的标签，但没有一个回答我的问题。 ![访问表格](../Images/bcea39dd7aafc5c534b9c5b16d72f1f7.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:59:28.010

简短的回答是肯定的。;) 你可以做所有这些事情。我清楚地记得那天我意识到我可以在 MS Access 中做***任何事情。***（请客气，这是我在编程方面的第一次体验）

*您可以使用此约定Me.Parent.control*从子窗体引用父控件

 *例如，如果父表单有一个名为**txtEmployeeId**的文本框，那么在子表单中文本框的 Click 事件中，您可以使用此代码。

```
Me.Parent.txtEmployeeID = Me.txtEmployeeID 
```

您可以快速扩展此代码以执行您需要的任何操作，即。

```
Me.Parent.txtComputerName = Me.ComputerName
Me.Parent.cboProductName = Me.ProductName 
```

CRUD 是用于 Web 开发的语句，这似乎是您的来源。访问在许多方面都是 CRUD（除非您开始变得复杂） 在上面的示例中，一旦您使用记录选择器导航离开父记录或关闭表单，记录就会保存而无需编写任何代码。一旦您开始使用未绑定的控件，则有必要编写代码来保存您的工作。*

# ios - 在 iOS 中，是什么导致了这个崩溃？

> ID：13871433
> 
> 赞同：2
> 
> 时间：2012-12-14T01:36:27.053
> 
> 标签：ios, crash, crash-reports

我的 iOS 应用程序崩溃了，但他们只有几条消息，有些像这样。

```
Application received signal SIGABRT
(null)
(
0   CoreFoundation                      0x359c68a7 __exceptionPreprocess + 186
1   libobjc.A.dylib                     0x37d6d259 objc_exception_throw + 32
2   CoreFoundation                      0x359c6789 +[NSException raise:format:] + 0
3   CoreFoundation                      0x359c67ab +[NSException raise:format:] + 34
4   myapp                               0x00241bf9 _ZNSt11_Deque_baseIsSaIsEE15_M_create_nodesEPPsS3_ + 1432772
5   libsystem_c.dylib                   0x32dd27e3 _sigtramp + 38
6   libsystem_c.dylib                   0x32dc820f pthread_kill + 54
7   libsystem_c.dylib                   0x32dc129f abort + 94
8   libc++abi.dylib                     0x35d7ef6b abort_message + 46
9   libc++abi.dylib                     0x35d7c3f1 _ZL19safe_handler_callerPFvvE + 120
10  libc++abi.dylib                     0x35d7c451 _ZdlPv + 0
11  libc++abi.dylib                     0x35d7d825 __cxa_current_exception_type + 0
12  libobjc.A.dylib                     0x37d6d2a9 objc_exception_rethrow + 12
13  CoreFoundation                      0x3591c50d CFRunLoopRunSpecific + 404
14  CoreFoundation                      0x3591c36d CFRunLoopRunInMode + 104
15  GraphicsServices                    0x375b8439 GSEventRunModal + 136
16  UIKit                               0x33428cd5 UIApplicationMain + 1080
17  myapp                               0x000d4293 _mh_execute_header + 41619
18  myapp                               0x000ccd20 _mh_execute_header + 11552
) 
```

我找不到导致此崩溃的原因，但它是我的应用程序中最常出现的。我很着急，有人知道吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:01:43.863

如果您能够通过执行特定任务或仅使用应用程序足够长的时间来重现此崩溃，您可以附加调试器并为`[NSException raise]`. 这样你就可以弄清楚你的应用程序的哪一部分被搞砸了，我过去用它来找出 NSArray 超出范围的地方..（我在所有源文件中都有十几个或更多）

其次，您可能应该“符号化”崩溃报告，以便您可以跟踪堆栈跟踪.. 这样您就可以找出代码中的哪个方法/类正在搞砸。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T04:08:51.890

要查看崩溃回调，请尝试在您的项目中添加这个很棒的功能：

[崩溃套件](https://github.com/kaler/CrashKit)

这是一个异常捕获器

# java - 必须实现继承的方法 ApplicationListener.render()

> ID：13871434
> 
> 赞同：1
> 
> 时间：2012-12-14T01:36:27.817
> 
> 标签：java, eclipse, opengl, libgdx

我不断收到此错误：

“MainMenu 类型必须实现继承的抽象方法 ApplicationListener.render()”

我的代码：包com.gdx.game.Screens；

```
import java.util.ArrayList;
import aurelienribon.tweenengine.BaseTween;
import aurelienribon.tweenengine.Tween;
import aurelienribon.tweenengine.TweenCallback;
import aurelienribon.tweenengine.TweenEquations;
import aurelienribon.tweenengine.TweenManager;

import com.badlogic.gdx.ApplicationListener;
import com.badlogic.gdx.Gdx;
import com.badlogic.gdx.Screen;
import com.badlogic.gdx.Input.Keys;
import com.badlogic.gdx.graphics.GL10;
import com.badlogic.gdx.graphics.Texture;
import com.badlogic.gdx.graphics.Texture.TextureFilter;
import com.badlogic.gdx.graphics.g2d.Sprite;
import com.badlogic.gdx.graphics.g2d.SpriteBatch;
import com.gdx.game.Asteroid;
import com.gdx.game.TweenAccessors.SpriteTween;

public class MainMenu implements  ApplicationListener, Screen
{
//private Boolean isMain = false;                   //Boolean to check if the menu screen can exit
private Texture menuTexture;                    //Splash screen image
private Sprite  menuSprite;                 //Image manipulation
private SpriteBatch batch;                      //Container to bundle Sprites to speed up performance
private Asteroid game;              
private TweenManager manager;                   //Updates all tweens at once
private TweenCallback callBack;     

//SplashScreen constructor
public MainMenu(Asteroid game)
{
    this.game = game;
}

@Override
public void render(float delta) 
{

    Gdx.gl.glClearColor(0,0,0,1);                   //Set color to black
    Gdx.gl.glClear(GL10.GL_COLOR_BUFFER_BIT);       //Clear the color
    manager.update(delta);
    //Begin drawing
    batch.begin();

    if((Gdx.input.isKeyPressed(Keys.ENTER)))
    {
        batch.dispose();
        //game.setScreen(gameClass(game));
    }

    menuSprite.draw(batch);

    //End drawing
    batch.end();
} 
```

我仍然可以运行我的代码，但是当我尝试按 enter 时它终止并且我收到错误：

```
Exception in thread "LWJGL Application" java.lang.IllegalArgumentException: buffer not allocated with newUnsafeByteBuffer or already disposed
at com.badlogic.gdx.utils.BufferUtils.disposeUnsafeByteBuffer(BufferUtils.java:277)
at com.badlogic.gdx.graphics.glutils.VertexArray.dispose(VertexArray.java:71)
at com.badlogic.gdx.graphics.Mesh.dispose(Mesh.java:415)
at com.badlogic.gdx.graphics.g2d.SpriteBatch.dispose(SpriteBatch.java:1094)
at com.gdx.game.Screens.MainMenu.render(MainMenu.java:50)
at com.badlogic.gdx.Game.render(Game.java:46)
at com.gdx.game.Asteroid.render(Asteroid.java:24)
at com.badlogic.gdx.backends.lwjgl.LwjglApplication.mainLoop(LwjglApplication.java:202)
at com.badlogic.gdx.backends.lwjgl.LwjglApplication$1.run(LwjglApplication.java:131)
AL lib: ReleaseALC: 1 device not closed 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:26:19.047

这不是`render`ApplicationListener 中定义的方法：

```
@Override
public void render(float delta) 
```

真正的[渲染方法](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/ApplicationListener.html#render%28%29)没有参数。

在您的编辑器/编译器中应该有一个警告 @Override 注释触发。

# javascript - 迭代对象时获取方法代码

> ID：13871437
> 
> 赞同：4
> 
> 时间：2012-12-14T01:36:29.673
> 
> 标签：javascript

我知道在 javascript 中我可以遍历一个对象来获取它的所有属性。如果一个或多个属性是方法，是否可以查看方法中的代码而不仅仅是方法名称？例如

```
var a = someobject;

for (property in a) {
  console.log(property);
} 
```

是否有可能以类似于此的方式获取方法代码？先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:39:25.700

是的。它确实有效。尝试：

```
var a = {};
a.id = 'aaa';
a.fun = function(){alert('aaa');}
for (x in a) {
    var current = a[x].toString();
    if(current.indexOf('function') == 0){
        current = current.substring(current.indexOf('{')+ 1, current.lastIndexOf('}'));
    }
console.log(current);
} 
```

但它不适用于浏览器本机代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T01:40:09.753

您需要`toString`按照[标准](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function)使用。IE：

```
//EX:
var a = {method:function(x) { return x; }};

//gets the properties
for (x in a) {
  console.log(a[x].toString());
} 
```

您也可以使用[`toSource`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function)，但它**不是**标准的一部分。

PS：尝试使用 a 可靠地迭代对象`for : loop`是不平凡且危险的（`for..in`仅迭代`[[Enumerable]]`属性，例如），请尽量避免此类构造。我会问为什么，确切地说，你这样做？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T01:46:10.760

您可以`toString`在函数上使用该方法

IE

```
function hello() {
    var hi = "hello world";
    alert(hi);
}  

alert(hello.toString());​ 
```

更新：它在 JSFiddle 中不起作用的原因是因为我忘记在其中添加输出`console.log`或`alert`- [http://jsfiddle.net/pbojinov/mYqrY/](http://jsfiddle.net/pbojinov/mYqrY/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T01:43:27.783

只要`a`是一个对象，您就应该能够使用方括号表示法并通过与对象属性同名的参数从参数中查询一个值。例如：

```
a[ property ]; 
```

如果您登录`typeof( property )`，它将返回`"string"`我们想要的。

# node.js - 如何测量当前 node.js 进程的峰值内存使用量

> ID：13871439
> 
> 赞同：3
> 
> 时间：2012-12-14T01:36:37.587
> 
> 标签：node.js

有没有办法找到当前 node.js 进程的峰值内存使用量？最好是独立于平台的，但其他东西只在 Linux 中？不允许使用额外的工具，例如 valgrind 或其他工具。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-17T22:11:14.547

您可以使用该`process.memoryUsage()`方法拍摄快照，并缓存它们。

[`process`模块的 Node.js 文档](http://nodejs.org/api/process.html#process_process_memoryusage)

# javascript - 如何将网页上每个图像的大小加倍？

> ID：13871441
> 
> 赞同：3
> 
> 时间：2012-12-14T01:37:13.887
> 
> 标签：javascript, css

有一个网页，我想将所有图像的大小加倍。我不知道任何 JavaScript 或 CSS。有人可以给我写一些代码吗？我试过这个：

```
Array.prototype.forEach.call(document.getElementsByTagName('img'),function(i){
    i.width = i.width * 2;i.height = i.height * 2
}); 
```

但我不知道我在做什么，而且它不起作用。请帮忙。

这就是我试图加倍的元素的样子，如果它有任何帮助的话：

[![](../Images/ec13fbe1c56c5390a398a09349592b28.png)](https://i.stack.imgur.com/1sWJt.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T06:35:12.633

**参考：** [**http ://boards.4chan.org/g/**](http://boards.4chan.org/g/)

我发现了该网站为其用户提供的一项出色功能，包括内置自定义查看他们的缩略图！

**4Chan 主页设置菜单**

该菜单提供了很多选项来配置您认为合适的网页。我很惊讶地看到一个`Custom CSS`功能，`CSS Box`它会接受你自己的自定义标记来定制网站到标记级别！稍后再谈。

首先，我想提一下，它们确实提供了**两个**可立即使用的选项，可以满足您的缩略图查看要求。

***赏金编辑：****[**4chan-x Greasemonkey 脚本**](http://mayhemydg.github.com/4chan-x/)**的用户已经在**4chan Qt ≪质量缩略图≫ 设置**菜单中拥有这两个选项。如果您使用此脚本，请跳到下面的下一个编辑。[](http://mayhemydg.github.com/4chan-x/)*

 ****看一下这个屏幕截图，它显示了要执行的 3 个步骤，其中第 2 步是其中之一。

如果有帮助，请右键单击下面的图像并**以全尺寸查看：**

**`Open Image in New Tab / View Image`**

![在此处输入图像描述](../Images/da7dd9a9fde18d42b85e81c4a1096fb3.png)

在上面的**第 1 步**中，请注意`Settings`反映`4chan Homepage`而不是脚本。

在上面的**步骤 2a**中，这将近似地再现平均图像的两倍图像大小，但如果这些图像超大，它们将使用可用的浏览器宽度。

在上面的**步骤 2b**中，如果它存在到浏览器宽度大小，则此选项将显示一个超大图像。

如果这两个即用型缩略图选项都不适合您的口味，请继续阅读。

由于您最初的目标是查看两倍大小的缩略图，或者`200%`，我分析了网页以确定以该大小显示这些缩略图图像所需的最小设置，但请注意，由于质量是两倍大小，许多会变得模糊没有增加。有关任何尺寸不模糊的图像的解决方案，请参阅下面的 Bounty EDIT。

话虽如此，您可以选择`150%`在放大模糊的同时最小化模糊，或者如果您不想使用 Greasemonkey，请选择您可以接受的值。

* * *

**赏金编辑：**

[***将这些 CSS 设置与4chan-x Greasemonkey 脚本***](http://mayhemydg.github.com/4chan-x/)一起使用时，模糊图像不再是问题，以使**缩略图大小增加一倍**。

请注意，您需要删除`Disable 4chan's extension`在 Greasemonkey 脚本中自动应用的默认复选标记，可通过单击网页右上角的**4chan Qt ≪质量缩略图≫ 设置**链接访问。

退出该设置菜单后，进入**4chan*主页*设置菜单**。删除**所有**复选标记，自定义 CSS**除外**。可以肯定的是，上面的图片并没有删除**4chan-x**推荐的所有复选标记。

* * *

**警告：**使用*自定义 CSS 设置*选项会使设置菜单无法访问！您需要使用内置的浏览器`inspect element`即时进行实时更改以重新获得控制权。

下面的框不是图像。选择，复制，然后将此 CSS 粘贴到设置菜单 CSS 框中：

```
div.file, a.fileThumb img {
  width: 200% !important;
  height: 200% !important;
  float: left; 
}

.fileInfo {
  margin: 10px;
} 
```

为了清楚起见，这是该框的屏幕截图：
![在此处输入图像描述](../Images/700eae9fc7a6ff9f3d1c18d3db561f3b.png)

将上述代码粘贴到 中后`CSS Box`，按`Save CSS Button`并确保您有`Checkmark`for`Custom CSS`然后按`SAVE Button`退出。

然后页面将使用这些新设置自行刷新。享受您的 2x 缩略图。

**赏金编辑：**提醒上图显示了基本部分中应删除的复选标记。可以肯定的是，首页右上角会有 4Chan 的原始设置菜单在中间：

> [4chan Qt ≪质量缩略图≫ 设置] **[设置]** [主页]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:06:31.817

正如我之前在评论中提到的，由于 CSS 属性，您的代码不会将作为背景图像的图像与非`<img>`html 元素接触`background-image`。

所以你需要运行你的代码来加倍`<img>`标签。

您还需要将 CSS 属性设置`background-size`为`200% Auto`.

现在的问题当然是您要添加的 css 属性。很可能 4chan 上的所有这些图像也是链接。所以它们必须是`<a>`带有`background-image`.

对不起，我在办公室，所以我不会打开 4chan 来确认这一点。

但是您可以在同一个网站上尝试此代码：

```
$('a').css('background-size', '200% Auto'); 
```

我的快速解决方案使用 jQuery，但你明白了。

**更新：**

```
Array.prototype.forEach.call(document.getElementsByTagName('img'),function(i){i.width = i.width * 2;i.height = i.height * 2});

Array.prototype.forEach.call(document.getElementsByTagName('a'),function(i){i.style['background-size'] = '200% Auto'; }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-23T16:42:18.957

我认为即使是 CSS 解决方案也适合您（根据您的问题）。如果对真正的 DOM 宽度和高度没有限制，您也可以使用 CSS 转换。

```
img {
    -webkit-transform: scale(2,2);
    -moz-transform: scale(2,2);
    -ms-transform: scale(2,2);
    /* etc. */
    transform: scale(2,2);
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-14T01:48:23.577

在 JavaScript 中尝试：

```
for (i=0; i < document.images.length; i++) {
    document.images[i].height *= 2;
    document.images[i].width *= 2; 
} 
```****

# android - 使用 listview 和自定义 TextView 适配器滚动会导致排序失败？

> ID：13871443
> 
> 赞同：0
> 
> 时间：2012-12-14T01:37:35.540
> 
> 标签：android

我有一个绑定到列表视图的自定义适配器。那部分很好。当我滚动列表视图时，排序被抛出，因为如果我滚动回到开头（即向下滚动后向上滚动），显示的 TextView 不是第一个。在滚动过程中我必须在适配器中处理什么吗？

```
public class TextViewAdapter extends BaseAdapter 
{
    private Context context;

    public TextViewAdapter(Context c) 
    {
        context = c;
    }

    //---returns the number of images---
    public int getCount() {
        return textViews.size();
    }

    //---returns the ID of an item--- 
    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    //---returns an TextView---
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        TextView tv;
        Log.d("Position",  Integer.toString(position));
        if (convertView == null) {

            tv = (TextView)textViews.get(position);
        } else {
            tv = (TextView) convertView;
        }            
        return tv;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:42:11.963

您`getView`以错误的方式实现方法。如果你使用`convertView`你应该重置它的文本内容，比如

```
public View getView(int position, View convertView, ViewGroup parent) 
{
    TextView tv;
    Log.d("Position",  Integer.toString(position));
    if (convertView == null) {

        tv = (TextView)textViews.get(position);
    } else {
        tv = (TextView) convertView;
        // HERE, set its content
        tv.setText(textViews.get(position).getText().toString());
    }            
    return tv;
} 
```

A`ListView`将在滚动时为您回收子视图，因此一些子视图变得不可见，从而变得可重用。这就是为什么every 一`convertView`开始为空但`ListView`向下滚动时变为非空的原因。但是那些 not null`convertView`仍然保留它们的原始文本内容，您应该手动重置它们的内容。

顺便说一句，你不需要`TextView`在应用程序启动时进行很多新的，只需一个列表就可以了`String`，比如

```
/* somewhere else */
List<String> strings = ...

public class TextViewAdapter extends BaseAdapter 
{
    /* ... */

    //---returns the number of images---
    public int getCount() {
        return strings.size();
    }

    /* ... */

    //---returns an TextView---
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        TextView tv;
        Log.d("Position",  Integer.toString(position));
        if (convertView == null) {
            tv = new TextView(context);
            tv.setText(strings.get(position));
        } else {
            tv = (TextView) convertView;
            // HERE, set its content
            tv.setText(strings.get(position));
        }            
        return tv;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T01:48:26.427

您将遇到的一个主要问题是您试图保存对适配器使用的视图的引用：

```
tv = (TextView)textViews.get(position); 
```

问题是您正在与 Adapter 中的回收商竞争，这将产生*不可预测*的结果……总之，您不能这样做。请观看Android 开发人员[的 ListView 世界了解更多信息。](http://www.youtube.com/watch?v=wDBM6wVEO70)

简而言之，您应该更改您的方法，以便您的适配器保留 TextView 将显示的字符串列表，而不是 TextView 本身。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T02:07:59.650

如果 convertView 为空，您应该重新充气视图，否则您需要重置 convertView 上的数据。

# git - Git - 推送到远程仓库

> ID：13871446
> 
> 赞同：1
> 
> 时间：2012-12-14T01:37:39.423
> 
> 标签：git, version-control

我有一个由 Git 控制的本地项目源。我设置了一个指向 Dropbox 目录的远程存储库（我知道使用 Dropbox 并不是最佳选择，但它在我的特定情况下更容易）。当我将更改推送到远程仓库时，我没有看到文件传输。

只有一个分支，大师。我已经添加了我的更改`git add .`，然后我进行了提交`git -commit`。然后我尝试使用`git push -u origin master`. 我收到消息说事情正在压缩并被推送，但我没有看到目录中的更改。这不是 Dropbox 不同步的问题。我相信我的遥控器设置正确，当我使用时，`git remote show origin`我得到以下信息：

```
* remote origin
  Fetch URL: /home/myuser/Dropbox/git/myproject.git/
  Push  URL: /home/myuser/Dropbox/git/myproject.git/
  HEAD branch: master
  Remote branch:
    master tracked
  Local branch configured for 'git pull':
    master merges with remote master
  Local ref configured for 'git push':
    master pushes to master (up to date) 
```

在我看来，状态表明远程仓库是最新的，但我没有看到更改。谁能建议我做错了什么？任何帮助将不胜感激，非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:37:43.917

将更改推送到远程存储库仅意味着远程存储库已接收到数据；它不会自动检出到远程仓库的工作目录中。VonC 对您的问题的评论几乎可以肯定是正确的。

# javascript - 如何将参数传递给 pjscrape？

> ID：13871448
> 
> 赞同：2
> 
> 时间：2012-12-14T01:37:49.253
> 
> 标签：javascript, phantomjs

[pjscrape](http://nrabinowitz.github.com/pjscrape/)非常适合抓取，但是我很难弄清楚如何将参数传递给我的抓取器。

它需要配置文件的命令行参数，但我不确定我的配置函数/变量的范围是什么。

我希望每个域都有配置，包括基本 URL、选择器等，并构建一个能够从该配置中读取的通用爬虫。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-17T02:08:53.853

Pjscrape 会将所有参数评估为全局范围内的配置文件，您可以传入任意数量的配置文件。因此，在一个或多个文件中配置每个域的抓取工具应该很简单。例如：

**base_config.js**

```
var myConfigs = []; 
```

**my_site.js**

```
myConfigs.push({
    title: 'My Site',
    url: 'http://www.example.com',
    scraper: 'div#my-site-info'
}); 
```

**刮刀.js**

```
myConfigs.forEach(function(config) {
    pjs.addSuite({
        title: config.title,
        url: config.url,
        scraper: config.scraper
    })
}); 
```

然后像这样调用：

```
~> phantomjs /path/to/pjscrape.js base_config.js my_site.js <...> scraper.js 
```

这里棘手的部分是当您想要使用刮板功能时，而不仅仅是选择器。PhantomJS 在“沙盒”环境中运行爬虫，该环境*无权*访问您的全局范围变量。所以这*不起作用*：

```
myConfigs.forEach(function(config) {
    pjs.addSuite({
        scraper: function() {
            // will fail - config is undefined!
            return $(config.selector).text();
        }
    })
}); 
```

这是一个简单的例子，但你明白了。PhantomJS 现在原生支持将参数传递给`page.evaluate`，但这些还没有内置到 Pjscrape 中。基本上有两种方法可以解决这个问题：

*   始终处理不需要访问外部范围的函数。所以每个站点配置文件都会指定完整的爬虫函数，而不仅仅是可插入的变量。

*   使用 创建刮板`new Function("...")`，在创建字符串时传入变量。这就是 Pjscrape 在幕后的工作方式，但公平警告 - 除了最简单的情况外，它在所有情况下都会很快变得丑陋。我在这里使用的一种方法是使用`Function#toString`并传入参数。这可能看起来像这样：

    ```
    function makeFunc(f, args) {
        return new Function('return (' + f.toString() + ')' +
            '.apply(null, ' + JSON.stringify(args) + ');');
    }

    myConfigs.forEach(function(config) {
        pjs.addSuite({
            scraper: makeFunc(function(selector) {
                // works - config.selector is passed in as the "selector" arg
                return $(selector).text();
            }, [config.selector])
        })
    }); 
    ```

# c++ - Cuda 零拷贝性能

> ID：13871449
> 
> 赞同：1
> 
> 时间：2012-12-14T01:38:05.670
> 
> 标签：c++, cuda, zero-copy, nvvp

有没有人有使用零拷贝（参考这里：[默认固定内存与零拷贝内存](https://stackoverflow.com/questions/5209214/default-pinned-memory-vs-zero-copy-memory)）内存模型分析 CUDA 应用程序性能的经验？

我有一个使用零拷贝功能的内核，使用 NVVP 我看到以下内容：

以平均问题大小运行内核，我得到 0.7% 的指令重放开销，所以没什么大不了的。所有这 0.7% 都是全局内存重放开销。

当我真正增加问题大小时，我得到了 95.7% 的指令重播开销，所有这些都是由于全局内存重播开销造成的。

但是，正常问题大小内核运行和非常非常大问题大小内核运行的全局加载效率和全局存储效率是相同的。我不太确定如何利用这些指标组合。

我不确定的主要事情是 NVVP 中的哪些统计数据将帮助我了解零拷贝功能的情况。关于我应该查看哪种类型的统计数据的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T03:08:16.227

Fermi 和 Kepler GPU 需要重放内存指令有多种原因：

1.  内存操作针对需要多个事务的大小说明符（向量类型），以便执行地址发散计算并与 L1 高速缓存进行数据通信。
2.  内存操作存在线程地址分歧，需要访问多个高速缓存行。
3.  内存事务错过了 L1 缓存。当未命中值返回到 L1 时，L1 通知 warp 调度程序重播该指令。
4.  LSU 单元资源已满，需要在资源可用时重播指令。

延迟到

*   L2 为 200-400 次循环
*   设备内存 (DRAM) 为 400-800 个周期
*   PCIe 上的零拷贝内存是 1000 个周期

由于延迟增加导致未命中和 LSU 资源争用增加，重播开销也在增加。

全局负载效率没有增加，因为它是执行的内存指令需要传输的理想数据量与实际传输数据量的比率。理想意味着执行的线程从缓存行边界开始访问内存中的顺序元素（32 位操作是 1 个缓存行，64 位操作是 2 个缓存行，128 位操作是 4 个缓存行）。访问零拷贝速度较慢且效率较低，但不会增加或更改传输的数据量。

探查器公开以下计数器：

*   gld_吞吐量
*   l1_cache_global_hit_rate
*   DRAM_{读，写}_吞吐量
*   l2_l1_read_hit_rate

在零拷贝的情况下，所有这些指标都应该低得多。

Nsight VSE CUDA Profiler 内存实验将显示通过 PCIe（零拷贝内存）访问的数据量。

# php - 如果 $_SESSION['SESS_USER_ID'] 未设置，则触发或阻止 javascript 函数

> ID：13871458
> 
> 赞同：0
> 
> 时间：2012-12-14T01:39:22.183
> 
> 标签：php, javascript, function, isset

如果用户未登录，此 php 函数当前会将用户重定向到另一个页面

```
if(!isset($_SESSION['SESS_USER_ID']) || (trim($_SESSION['SESS_USER_ID']) == '')){
header("location: login_failed.html");
exit();
} 
```

如何更改函数，以便它执行以下操作而不是重定向用户：

*   触发javascript函数：`loginFailed();`
*   阻止预加载的特定 iframe 启动*（这些要求用户登录，并且如果未登录，则当前作为空 iframe 打开）*。我在下面包含了这个脚本。或者，阻止启动具有特定类或 data-fancybox-type 或需要`!isset($_SESSION['SESS_USER_ID'])`.

我想触发/阻止的功能

```
function loginFailed() {
    $().toastmessage('showToast', {
        text: 'Log In Failed<br/><br/>Please check your username and password',
        sticky: false,
        position: 'top-center',
        type: 'message',
        closeText: '',
        close: function () { console.log("toast is closed ...") }
    });
} 
$(function () {
    $(".fancybox").fancybox({
      preload: true,
    });
    $(".fancybox").eq(0).trigger('click');
}); 
```

我试过了：

```
echo "<script>loginFailed();</script>";
echo "<script type="text/javascript">loginFailed();</script>";
echo "<script type="text/javascript">loginFailed;</script>"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:02:29.277

添加到techfoobar的答案......

将 PHP 中的变量放入 Javascript（如果需要）并让 Javascript 处理它通常是一个好习惯，而不是根据 PHP 变量回显不同的 javascript。

请记住，所有 javascript 变量都可以由客户端操作。

尝试这样的事情：

```
if(!isset($_SESSION['SESS_USER_ID']) || (trim($_SESSION['SESS_USER_ID']) == '')){
$t="no_session";
}
else{
$t="yes_session";
} 

.... 

<script>
var session="<?php echo $t; ?>";

if(session == "no_session")
loginFailed();
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T01:56:58.030

PHP 在服务器端运行。JavaScript 在浏览器内的客户端运行。PHP 不能直接调用 JavaScript 函数。

然而，PHP 可以将 JavaScript 与 HTML 一起呈现给浏览器，以便浏览器可以依次运行它。

在您的特定情况下，您可以做的一件事是通过 AJAX 调用检查登录状态，并在其成功回调中调用所需的 JS 方法。

* * *

**例子：**

检查登录状态：

```
/* JS */
function checkLoginState() {
    $.post('/yourserver.com/isloggedin.php', function(data) {
        if(data != "OK") { //  not logged in

            // call your JS method thats disables stuff etc.
            loginFailed();
        }
    });
}

// Periodically check login state
setInterval(checkLoginState, 10000); // check every 10 seconds, change as needed.

/* PHP - isloggedin.php */
if(!isset($_SESSION['SESS_USER_ID']) || (trim($_SESSION['SESS_USER_ID']) == '')){
    echo "NOT OK";
} 
else {
    echo "OK";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T20:23:51.530

我将@hellohellosharp 的建议与@willoller 提供给我的另一个问题的解决方案结合起来并解决了:-)

将此添加到 php：

```
$logged_in = (isset($_SESSION['SESS_USER_ID'])); 
```

将此添加到javascript：

```
<?php if ($logged_in) : ?>
    <a class="fancybox" data-fancybox-type="iframe" href="iframe1.html"></a>
<?php else : ?>  
     loginFailed();
<?php endif; ?> 
```

我还使用它来根据用户是否登录来更改菜单选项。

只是提醒一下 - 这使用 ISSET 来确定 javascript 应该显示什么，但它只会改变用户的体验并且不提供任何安全性。

# magento - 当magento发回前端cookie时如何提供缓存页面

> ID：13871464
> 
> 赞同：1
> 
> 时间：2012-12-14T01:39:55.750
> 
> 标签：magento, cookies, frontend, varnish

我已经设法设置了清漆和magento，它们一起工作得很好，但是当magento发回一个前端cookie时，它是除主页之外的每一页，它没有命中缓存

设置 Cookie：前端 = lm45mabgrqphfuvbbdbjume127；过期=格林威治标准时间 2012 年 12 月 14 日星期五 02:32:37；路径=/;

有没有办法为不使用购物车的用户关闭 magento 前端 cookie，或者是否有一个规则可以放入 default.vcl 文件中，允许清漆提供缓存页面而不管这个 cookie 是什么？

感谢任何帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:29:44.037

确保为 Magento 安装了[由 Varnish 模块提供支持的 PageCache](http://www.magentocommerce.com/magento-connect/pagecache-powered-by-varnish.html)。这个 magento 模块包含一个 default.vcl（Varnish 配置文件）来处理这个问题。在用户将产品添加到他的购物车或登录到他的帐户之前，所有 cookie 和其他信息都会被删除。这将允许从 Varnish 提供页面，并且请求永远不会到达 apache。

如果您需要更多帮助，请告诉我。

# python - numpy 和 scipy 的不规则结果

> ID：13871466
> 
> 赞同：1
> 
> 时间：2012-12-14T01:40:14.510
> 
> 标签：python, numpy, scipy

我正在 Python 中创建有限元代码，它依赖于 numpy 和 scipy 进行数组、矩阵和线性代数计算。最初生成的代码似乎正在工作，我得到了我需要的结果。

但是，对于其他一些功能，我需要调用一个多次执行分析的函数，当我查看结果时，它们与第一次调用完全不同，尽管两者都是使用相同的输入调用的。我唯一能想到的是垃圾收集不起作用，内存被破坏了。

这是使用的程序：

1.  调用设置文件生成模型数据库：mDB = F0(inputs)
2.  使用一些变量输入调用第一个分析：r1 = F1(mDB, v1)
3.  使用 step2 中的相同变量重复第一次分析：r2 = F1(mDB, v1)

由于没有任何改变，我希望步骤#2 和步骤#3 的结果是相同的，但是，我的代码会产生不同的结果（使用 matplotlib 验证）。

我在用：

带有 numpy-1.6.2 和 scipy-0.11.0 的 Windows 7 上的 Python 2.7（32 位）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T10:28:50.487

如果您的结果对舍入错误很敏感（例如，您的代码中有一些编程错误），那么通常浮点结果是不可重现的。这已经由于现代编译器优化代码的方式而发生，因此它不需要例如访问未初始化的内存。

请参阅： [http ://www.nccs.nasa.gov/images/FloatingPoint_consistency.pdf](http://www.nccs.nasa.gov/images/FloatingPoint_consistency.pdf)

另一种可能的可能性是您的计算函数修改了输入数据。您在上面的评论中提到的这一点并不排除这种可能性，因为 Python 是通过引用传递的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T16:07:25.277

好的，根据上面的建议，我发现了问题。

我的代码依赖于字典（哈希表）。我将原始输入字典的内容称为 mDB 并对其进行修改，我认为原始内容不会在单独的函数中发生更改，但确实如此。我来自 Fortran 和 Matlab，这些都不会改变。

答案是深度复制我原来字典的内容，而不是简单的分配。请注意，我尝试了简单的复制，如下所示：

```
A = mDB['A'].copy() 
```

但这也不起作用。我不得不使用：

```
import copy
A = copy.deepcopy(mDB['A']) 
```

我知道有些人会说我应该阅读手册“Python 中的赋值语句不会复制对象，它们会在目标和对象之间创建绑定”（[文档](http://docs.python.org/2/library/copy.html)），但这对我来说仍然是新的和奇怪的行为。

对于使用字典以外的方式存储我的原始数据有什么建议吗？

# java - JSON Formatting with Jersey, Jackson, & json.org/java Parser using Curl Command

> ID：13871471
> 
> 赞同：2
> 
> 时间：2012-12-14T01:40:57.810
> 
> 标签：java, json, curl, jersey, jackson

使用 Java 6、Tomcat 7、Jersey 1.15、Jackson 2.0.6（来自 FasterXml maven repo）和 www.json.org 解析器，我试图漂亮地打印 JSON 字符串，因此它看起来会被 curl -X GET 命令缩进线。

我创建了一个简单的 Web 服务，它具有以下架构：

我的 POJO（模型类）：

家庭.java

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Family {
    private String father;
    private String mother;

    private List<Children> children;

    // Getter & Setters
} 
```

儿童.java

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Children {
    private String name;
    private String age;
    private String gender;

    // Getters & Setters
} 
```

使用实用程序类，我决定对 POJO 进行硬编码，如下所示：

```
public class FamilyUtil {

    public static Family getFamily() {
        Family family = new Family();
        family.setFather("Joe");
        family.setMother("Jennifer");

        Children child = new Children();
        child.setName("Jimmy");
        child.setAge("12");
        child.setGender("male");
        List<Children> children = new ArrayList<Children>();

        children.add(child);

        family.setChildren(children);
        return family;
    }
} 
```

我的网络服务：

```
import java.io.IOException;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

import org.codehaus.jackson.JsonGenerationException;
import org.codehaus.jackson.map.JsonMappingException;
import org.codehaus.jackson.map.ObjectMapper;
import org.codehaus.jettison.json.JSONException;
import org.json.JSONObject;
import org.json.JSONTokener;

import com.myapp.controller.myappController;
import com.myapp.resource.output.HostingSegmentOutput;
import com.myapp.util.FamilyUtil;

@Path("")
public class MyWebService {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public static String getFamily() throws IOException, 
                                            JsonGenerationException, 
                                            JsonMappingException, 
                                            JSONException, 
                                            org.json.JSONException {
        ObjectMapper mapper = new ObjectMapper(); 
        String uglyJsonString = mapper.writeValueAsString(FamilyUtil.getFamily());
        System.out.println(uglyJsonString);
        JSONTokener tokener = new JSONTokener(uglyJsonString);
        JSONObject finalResult = new JSONObject(tokener);
        return finalResult.toString(4);         
    }
} 
```

当我使用以下命令运行它时：

```
curl -X GET http://localhost:8080/mywebservice 
```

我在 Eclipse 的控制台中得到了这个：

```
{"father":"Joe","mother":"Jennifer","children":[{"name":"Jimmy","age":"12","gender":"male"}]} 
```

但是从命令行上的 curl 命令（这个响应更重要）：

```
"{\n    \"mother\": \"Jennifer\",\n    \"children\": [{\n        \"age\": \"12\",\n        \"name\": \"Jimmy\",\n        \"gender\": \"male\"\n    }],\n    \"father\": \"Joe\"\n}" 
```

这是添加换行符转义序列并放置双引号（但不会像在新行之后确实有 4 个空格但都在一行中那样缩进）。

如果有人能指出我正确的方向，将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T05:00:05.980

我相信正在发生的是您当前配置的消息正文阅读器正在获取从您的方法返回的字符串，并将其正确转义，使其成为有效的 JSON 字符串（因为 json 不允许字符串常量内的换行符）。

这就是你要做的……我假设你正在使用 Jackson 包含的 Message Body Writers。（例如 JacksonJsonProvider）

您创建一个 @Provider 来设置一个启用漂亮打印的 ObjectMapper 实例，如下所示：

```
@Provider
public class JacksonObjectMapperProvider implements ContextResolver<ObjectMapper> {

    /**
     * {@inheritDoc}
     */
    @Override
    public ObjectMapper getContext(final Class<?> type) {
        final ObjectMapper toReturn = new ObjectMapper();
        toReturn.enable(SerializationFeature.INDENT_OUTPUT); // This is the important setting
        toReturn.disable(MapperFeature.USE_ANNOTATIONS); // I have this one on but it's probably for other resources in the container testing it in, I don't know if you'd need it.
        return toReturn;
    }
} 
```

然后，您让您的资源返回已解析的 Family 对象，而不是尝试将其转换为 Json...让 Message Body Writer 执行此操作...即

```
public class MyWebService {

    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Family getFamily() 
        return FamilyUtil.getFamily()
    }
} 
```

瞧：

```
$ curl http://<server>/<ctx-root>/<path>
{
  "father" : "Joe",
  "mother" : "Jennifer",
  "children" : [ {
    "name" : "Jimmy",
    "age" : "12",
    "gender" : "male"
  } ]
} 
```

现在我忽略了让 Provider 和 MessageBodyReader 注册到您的 JAX-RS 应用程序配置，但这可能会因您使用 Jersey 的 servlet、使用自定义应用程序、使用 Guice 或任何其他设置方式而有很大差异你的 JAX-RS 堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-16T10:02:21.160

Just use [GSON library](https://stackoverflow.com/questions/2759168/how-do-i-add-a-library-in-eclipse)

This is an example for Jersey normal Gson:

```
Gson gson = new Gson();
    String json = gson.toJson(obj);
    System.out.println(json); 
```

the JSON output is display as compact mode like following :

```
{"data1":100,"data2":"hello","list":["String 1","String 2","String 3"]} 
```

To enable pretty print, you should use GsonBuilder return a Gson object :

```
Gson gson = new GsonBuilder().setPrettyPrinting().create();
    String json = gson.toJson(obj);
    System.out.println(json); 
```

Output will like this:

```
{
  "data1": 100,
  "data2": "hello",
  "list": [
    "String 1",
    "String 2",
    "String 3"
  ]
} 
```

Full example from [mkyong](http://www.mkyong.com/java/how-to-enable-pretty-print-json-output-gson/)

```
package com.mkyong.core;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;

public class GsonExample {
    public static void main(String[] args) {

    DataObject obj = new DataObject();
    // Gson gson = new Gson();

    Gson gson = new GsonBuilder().setPrettyPrinting().create();

    String json = gson.toJson(obj);

    System.out.println(json);

    }
} 
```

# selenium - @FindBy 不在乎当我调用 initElements 时元素是否不存在

> ID：13871476
> 
> 赞同：2
> 
> 时间：2012-12-14T01:41:23.993
> 
> 标签：selenium, webdriver, findby

例如，假设我有类 FanPage，带有这个注释

```
@FindBy(how = How.ID, using = "ctl00__lvph_Add")
private WebElement _AddFanButton; 
```

然后在我的测试代码中我说

```
fanPage = homePage.GoToFanPage() 
```

哪个

```
return PageFactory.initElements(driver, CC_VendorStatisticsMetadata.class); 
```

现在，如果我的注释不正确（假设它应该是 ctl00_lvph_AddFan），我希望我对 initElements 的调用会失败。但是，它没有，它只是返回一个 FanPage 对象给我。只有当我尝试使用 _AddFanButton 时它才会失败。

如何让 PageFactory 从一开始就查找我的注释？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-14T02:05:06.333

你没有。`PageFactory`做延迟初始化，这就是它的设计方式。

考虑一个页面对象，其中某些元素在执行某些操作之前不存在于页面上。由于页面对象旨在封装*业务逻辑*而不仅仅是页面上的元素，因此这是一个完美的逻辑场景。在这种情况下，您的`initElements()`调用每次都会在页面对象初始化时失败，并且不会让您有机会调用会导致元素出现的业务逻辑方法。

如果这是您的测试框架的要求，则它可能`PageFactory`对您不起作用。在这种情况下，您最好构建自己的实现。

# z-index - 动力学 js zindex

> ID：13871478
> 
> 赞同：3
> 
> 时间：2012-12-14T01:41:36.343
> 
> 标签：z-index, geometry, kineticjs

不太清楚如何用 kenetic js 对这些对象进行分层，我希望 circle 位于 circle2 之上。我在写 'circle.setZIndex();' 不当？这是破坏剧本。

带有 .setZIndex 行的 jsfiddle 被注释掉：http: [//jsfiddle.net/ZfuDs/](http://jsfiddle.net/ZfuDs/)

```
 function writeMessage(messageLayer, message) {
    var context = messageLayer.getContext();
    messageLayer.clear();
    context.font = '18pt Calibri';
    context.fillStyle = 'black';
    context.fillText(message, 10, 25);
  }
  var stage = new Kinetic.Stage({
    container: 'container',
    width: 578,
    height: 200
  });
  var shapesLayer = new Kinetic.Layer();
  var messageLayer = new Kinetic.Layer();

var circle2 = new Kinetic.Circle({
    x: 360,
    y: stage.getHeight() / 2,
    radius: 90,
    fill: 'orange',
    stroke: 'black',
    strokeWidth: 4
  });
circle2.setZIndex(3);

  var circle = new Kinetic.Circle({
    x: 380,
    y: stage.getHeight() / 2,
    radius: 70,
    fill: 'red',
    stroke: 'black',
    strokeWidth: 4
  });
   circle.setZIndex(2); 

  shapesLayer.add(circle);
  shapesLayer.add(circle2);

  stage.add(shapesLayer);
  stage.add(messageLayer); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T06:45:25.260

您可以尝试先添加**circle2**形状，然后再添加**圆形**形状

```
shapesLayer.add(circle2);
shapesLayer.add(circle); 
```

代替

```
shapesLayer.add(circle);
shapesLayer.add(circle2); 
```

试试这个[http://jsfiddle.net/ZfuDs/1/](http://jsfiddle.net/ZfuDs/1/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T16:50:55.523

在将对象添加到我得到的图层之前，您似乎无法调用 z-index 函数：

```
TypeError: this.parent is undefined
    this.parent.children.splice(index, 1); 
```

我不再收到错误消息，但即使这样 setZIndex() 方法似乎也不起作用，但 circle.moveToTop() 确实有效，请检查[http://jsfiddle.net/ZfuDs/3](http://jsfiddle.net/ZfuDs/3)

# c# - C#：Excel：确定字符串是否是有效的范围引用？

> ID：13871480
> 
> 赞同：1
> 
> 时间：2012-12-14T01:42:00.433
> 
> 标签：c#, .net, vb.net, excel-interop, vb.net-to-c#

这个 VB 函数将如何看起来像 C#？目标是确定一个字符串是否`ref`代表一个有效的数据表`Excel.Range`。这不是一个简单的 VB 到 C# 的转换，因为 Range 不能被构造。

```
Private Function IsRange(ref) As Boolean
'   Returns True if ref is a Range
    Dim x As Range
    On Error Resume Next
    Set x = Range(ref)
    If Err = 0 Then IsRange = True Else IsRange = False
End Function 
```

最好的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-12T23:24:11.057

我本来希望找到一种方法，不必依赖异常来检查单元格引用的有效性。但我找不到直接测试它的方法。

因此，我使用的是 OP 的方法。问题是这`Microsoft.Office.Interop.Excel.Range`是一个接口，不能直接创建。根据这个[答案](https://stackoverflow.com/a/2609981/262789)，解决方案是使用`get_Range`来自`_Application`or的方法`Sheet`。

```
Microsoft.Office.Interop.Excel._Application ExcelApp;

private bool IsRange(string refr) {
   try {
      var unused = ExcelApp.Range[cellReference, Type.Missing];

      return true;
   }
   catch {
      return false;
   }
} 
```

# wysiwyg - Magento：如何将小部件按钮添加到所见即所得产品编辑器

> ID：13871484
> 
> 赞同：3
> 
> 时间：2012-12-14T01:42:34.427
> 
> 标签：wysiwyg, magento

我想允许在产品的描述字段中添加目录产品链接小部件（这样我就可以轻松地链接到描述中的其他产品）。我已经通过创建如下文件扩展了 Mage_Catalog_Model_Product：

```
class mymodule_Catalog_Model_Product extends Mage_Catalog_Model_Product
{

    /**
      * Add getDescription function that interprets widget or static blocks
      * within product descriptions
      */
    public function getDescription() {
        $processor = Mage::getModel('widget/template_filter');
        $html = $processor->filter($this->getData('description'));
        return $html;
    }

} 
```

现在，如果我输入类似的内容，它可以正常工作

`{{widget type="catalog/product_widget_link" anchor_text="my text" template="catalog/product/widget/link/link_inline.phtml" id_path="product/1234"}}`

进入描述字段——它创建一个指向产品 ID 1234 的链接。

但我想在所见即所得编辑器中添加实际的目录产品链接小部件按钮以编辑产品。该按钮已在 CMS 编辑器中，但我缺少需要修改的内容，以便将此小部件添加到管理界面以编辑产品。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2014-08-26T15:06:32.047

对于以后像我这样偶然发现此问题的任何人，您可以使用 cms_wysiwyg_config_prepare 事件将其设置为 true。

例如：在 config.xml

```
<events>
            <cms_wysiwyg_config_prepare>
                <observers>
                    <webtise_widgets>
                        <class>webtise_widgets/observer</class>
                        <method>cmsWysiwygConfigPrepare</method>
                    </webtise_widgets>
                </observers>
            </cms_wysiwyg_config_prepare>
        </events> 
```

在你的观察者中

```
<?php class Webtise_Widgets_Model_Observer{

    public function cmsWysiwygConfigPrepare(Varien_Event_Observer $observer){
        $observer->getEvent()->getConfig()->setAddWidgets(true);
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-18T22:51:51.303

我可以通过覆盖核心文件来做到这一点

```
app/code/local/Mage/Adminhtml/Block/Catalog/Helper/Form/Wysiwyg/Content.php 
```

和设置

```
$config['add_widgets']           = true; 
```

现在小部件按钮显示在管理界面的所有 WYSIWIG 编辑器中。

# php - PDO 绑定参数和绑定值。有什么区别？

> ID：13871485
> 
> 赞同：0
> 
> 时间：2012-12-14T01:42:41.473
> 
> 标签：php, pdo, bindvalue, bindparam

我已经阅读了关于 PHP PDO 的手册并看到了这篇文章：[PDO PARAM_STR and length](https://stackoverflow.com/questions/12222671/pdo-param-str-and-length)

阅读那篇文章后，我了解到我们不需要在插入 DB 时指定长度，而是指定用于输出。

我的问题是，如果我不想为输出指定任何长度，我可以使用 bindvalue() 吗？也许有人可以就何时最好使用用户 bindparam 和 bindvalue 给出一个很好的建议？

提前谢谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:52:31.153

您不必设置输出的长度，您可以根据需要设置。

这就是手册所说的 bindValue() 和 bindParam() 之间的区别

> 将 PHP 变量绑定到用于准备语句的 SQL >语句中的相应命名或问号占位符。与 PDOStatement::bindValue() 不同，> 变量被绑定为引用，并且只会在调用 >PDOStatement::execute() 时进行评估。
> 
> 大多数参数是输入参数，即以只读方式用于构建查询的参数。一些驱动程序支持调用存储过程 > 将数据作为输出参数返回，而一些驱动程序还支持作为输入/输出参数 > 发送数据并更新以接收数据。

当我想添加一个变量时，我总是使用 bindParam。但我想你必须为此做出自己的决定。

# java - Spring/Hibernate 的响应中的属性为空

> ID：13871490
> 
> 赞同：0
> 
> 时间：2012-12-14T01:43:21.750
> 
> 标签：java, javascript, mysql, spring, hibernate

我有一个 Javascript 应用程序，它使用 Java 作为 Hibernate、Spring 和 MySQL DB 的后端。读取数据时，一切正常且符合预期，但尝试在客户端对其进行编辑时，我会看到奇怪的行为。即使我的服务器请求如下所示：

`{"data":{"Draggable":true,"Resizable":true,"StartDate":"2012-09-13T18:00:00+02:00","EndDate":"2012-09-14T04:00:00+02:00","Cls":"","Name":"Secret task","Id":10,"ResourceId":15}}`

服务器响应：

`{"data":[{"Name":"Secret task","Id":10,"StartDate":"2012-09-13T18:00:00+02:00","EndDate":"2012-09-14T04:00:00+02:00","ResourceId":15,"Resizable":null,"Draggable":null,"Cls":""}]}`

其中布尔属性为空。我试过忽略这个领域的二传手，但没有任何运气。我还必须删除`nullable=false`，因为我收到了一个错误：

`org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value: model.Event.draggable; nested exception is org.hibernate.PropertyValueException: not-null property references a null or transient value: model.Event.draggable`

这是我的 MySQL 表定义：

```
CREATE TABLE IF NOT EXISTS `events` (
  `Id` int(11) NOT NULL AUTO_INCREMENT,
  `Name` varchar(255) DEFAULT NULL,
  `StartDate` varchar(50) DEFAULT NULL,
  `EndDate` varchar(50) DEFAULT NULL,
  `ResourceId` int(11) DEFAULT NULL,
  `Resizable` tinyint(1) DEFAULT NULL,
  `Draggable` tinyint(1) DEFAULT NULL,
  `Cls` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`Id`)
) ENGINE=InnoDB  DEFAULT CHARSET=latin1 AUTO_INCREMENT=12 ; 
```

这是模型代码：

```
import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.GeneratedValue;
import javax.persistence.Id;
import javax.persistence.Table;

import org.codehaus.jackson.annotate.JsonAutoDetect;
import org.codehaus.jackson.annotate.JsonProperty;
import org.codehaus.jackson.annotate.JsonIgnoreProperties;
import org.codehaus.jackson.annotate.JsonIgnore;

@JsonAutoDetect
@JsonIgnoreProperties(ignoreUnknown = true)
@Entity
@Table(name="events")
public class Event {

    @Id
    @GeneratedValue
    @Column(name="Id")
    private int id;

    @Column(name="Name", nullable=false)
    private String name;

    @Column(name="StartDate", nullable=false)
    private String startDate;

    @Column(name="EndDate", nullable=false)
    private String endDate;

    @Column(name="ResourceId", nullable=false)
    private int resourceId;

    @Column(name="Resizable")
    private Boolean resizable;

    @Column(name="Draggable")
    private Boolean draggable;

    @Column(name="Cls", nullable=false)
    private String cls;

    @JsonProperty("Id")
    public int getId() {
        return id;
    }

    @JsonProperty("Id")
    public void setId(int id) {
        this.id = id;
    }

    @JsonProperty("Name")
    public String getName() {
        return name;
    }

    @JsonProperty("Name")
    public void setName(String name) {
        this.name = name;
    }

    @JsonProperty("StartDate")
    public String getStartDate() {
        return startDate;
    }

    @JsonProperty("StartDate")
    public void setStartDate(String start) {
        this.startDate = start;
    }

    @JsonProperty("EndDate")
    public String getEndDate() {
        return endDate;
    }

    @JsonProperty("EndDate")
    public void setEndDate(String end) {
        this.endDate = end;
    }

    @JsonProperty("ResourceId")
    public int getResourceId() {
        return resourceId;
    }

    @JsonProperty("ResourceId")
    public void setResourceId(int id) {
        this.resourceId = id;
    }

    @JsonProperty("Resizable")
    public Boolean getResizable() {
        return resizable;
    }

    @JsonIgnore
    public void setResizable(Boolean resizable) {
        this.resizable = resizable;
    }

    @JsonProperty("Draggable")
    public Boolean getDraggable() {
        return draggable;
    }

    @JsonIgnore
    public void setDraggable(Boolean draggable) {
        this.draggable = draggable;
    }

    @JsonProperty("Cls")
    public String getCls() {
        return cls;
    }

    @JsonProperty("Cls")
    public void setCls(String cls) {
        this.cls = cls;
    }
} 
```

我能做些什么来防止这种行为吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T01:46:39.107

你可以简单地这样做：

```
public boolean getResizable() {
    return resizable != null && resizable;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T01:50:08.567

在从 JSON 表示反序列化对象时，您明确告诉杰克逊忽略您提到的两个属性。这个：

```
@JsonIgnore
public void setDraggable(Boolean draggable) {
    this.draggable = draggable;
}

@JsonIgnore
public void setResizable(Boolean resizable) {
    this.resizable = resizable;
} 
```

基本上意味着，在从我的 JSON 数据反序列化时忽略这些属性。因此，因此，当您保存对象时，这些属性在数据库中为空。

# python - 如何取消字典初始化？python3.3

> ID：13871491
> 
> 赞同：1
> 
> 时间：2012-12-14T01:43:23.003
> 
> 标签：python, dictionary, python-3.x

首先解释代码会更容易解释我的问题。

```
def initialize_function(num,instruction,emplacement1,emplacement2,current_pipeline):
    function_mapping={
    "LOAD" : LOAD(num,emplacement1,emplacement2,current_pipeline),
    "STORE" : STORE(num,emplacement1,emplacement2,current_pipeline),
    "MOVE" : MOVE_IADD(num,emplacement1,emplacement2,current_pipeline),
    "IADD" : MOVE_IADD(num,emplacement1,emplacement2,current_pipeline),
    "FADD" : FADD(num,emplacement1,emplacement2,current_pipeline)
    }
    current_pipeline=function_mapping[instruction] 
    return(current_pipeline) 
```

该`initialize_function`函数有一个参数`instruction`。`instruction`是一个字符串，相当于字典的键之一`function_mapping`。所以当我这样做时，`current_pipeline=function_mapping[instruction]`它应该只执行`instruction`. 但事实并非如此。实际上，`function_mapping`字典在查找密钥之前就已初始化，`instruction`因此它会依次执行所有函数 LOAD、STORE、MOVE、IADD、FADD。

我能做些什么 ？

先感谢您 ：）

MFF

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T01:50:48.550

由于所有函数的参数都相同，因此应该可以：

```
def initialize_function(num,instruction,emplacement1,emplacement2,current_pipeline):
    function_mapping={
    "LOAD" : LOAD,
    "STORE" : STORE,
    "MOVE" : MOVE_IADD,
    "IADD" : MOVE_IADD,
    "FADD" : FADD
    }
    current_pipeline=function_mapping[instruction](num,emplacement1,emplacement2,current_pipeline)
    return(current_pipeline) 
```

说明：您的字典值将在运行时评估，因为您实际上是在调用函数。你想传递对它们的引用，因为函数是 python 中的第一类对象，你可以这样做。

# facebook - 将广告定位到访问过我的页面的用户（Facebook 之外）

> ID：13871496
> 
> 赞同：-2
> 
> 时间：2012-12-14T01:44:03.973
> 
> 标签：facebook, ads, facebook-ads-api

我正在研究重新定位的广告公司，并`xxxx`在他们自己的网站（Facebook 之外）上访问了该公司，大约 30 分钟后，当我查看我的 Facebook 帐户时，我开始看到该公司的广告（我确信我以前从未见过）。此外，我不是该公司的“粉丝”，也不是喜欢 Facebook 上的页面，所以我很确定这与我访问他们的 URL 有关。

是否可以针对访问过我/任何在 facebook 之外的 URL 的人？到目前为止，我认为在 Facebook 上定位用户的唯一方法是使用他们的图表数据。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:28:01.907

这听起来像[Facebook Exchange](http://www.insidefacebook.com/2012/10/25/facebook-exchange-what-it-is-and-who-to-work-with-to-get-started/)。

# javascript - 谷歌地图 v3 街景街景定位

> ID：13871498
> 
> 赞同：0
> 
> 时间：2012-12-14T01:44:19.327
> 
> 标签：javascript, google-maps-api-3, google-street-view

我如何在 div 中获得街景 pegmen 偏移位置。我需要它来将信息框/工具提示放在 pegmen 旁边。是否有任何 API 调用来创建相对于 pegmen 的信息框或获取他的偏移量？街景小人的位置根据地图控件而变化（如果谷歌地图画布更小，则在其中实现 350px 迷你控件）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T06:48:04.123

您可以使用

```
var svpLatLon = map.getStreetView().getPosition();
var dummy = new google.maps.OverlayView();
var proj = dummy.getProjection();
var pixel = proj.fromLatLngToContainerPixel(svpLatLon); 
```

然后你可以阅读

```
var x = pixel.x;
var y = pixel.y; 
```

# ruby-on-rails - 为什么我的 Rails 应用程序显示嵌套表的 id 但嵌套列？

> ID：13871499
> 
> 赞同：0
> 
> 时间：2012-12-14T01:44:29.613
> 
> 标签：ruby-on-rails, ruby-on-rails-3, associations

视图显示此代码没问题

```
<%= community.country_id %> 
```

* * *

```
<%= community.country.name %> 
```

但这会返回错误

> 'Mysql2::Error：'where 子句'中的未知列'countries.community_id'：SELECT `countries`.* FROM `countries` WHERE `countries`。`community_id`= 5 限制 1'

我的模型是

社区.rb

```
has_one :country 
```

国家.rb

```
belongs_to :community 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:21:14.250

在您的`Country`模型中，如果您有类似的关系

```
has_one :country 
```

默认情况下，Rails 会`countries`在数据库的表中查找名为`community_id`.

你得到的错误是说你从来没有将这样的列迁移到你的数据库中。从您的 shell 运行以下命令以添加该列。

```
rails generate migration AddCommunityIdToCountries community_id:integer
rake db:migrate 
```

**推荐阅读** [http://guides.rubyonrails.org/migrations.html](http://guides.rubyonrails.org/migrations.html)

# sql - 获取付款计划表上所有付款总和的 SQL 表达式

> ID：13871501
> 
> 赞同：2
> 
> 时间：2012-12-14T01:44:38.420
> 
> 标签：sql, oracle

我正在尝试创建一个`SELECT`语句，以从包含付款计划的表中获取所有到期付款的总和。字段包括`PaymentID`、`PaymentAmount`、`NumberofMonths`。例如，有三行：

```
PaymentId | PaymentAmount | NumberofMonths
==========================================
1         |  500          |  12
2         |  2000         |  8
3         |  1000         |  6 
```

所有到期付款的总金额为 28,000.00 美元。我是一个 SQL/Oracle 新手，所以我不知道如何开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:50:00.153

您可以使用聚合函数并`SUM()`乘以`PaymentAmount`：`NumberOfMonths`

```
select sum(PaymentAmount * NumberofMonths) Total
from yourtable 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/be580/2)

# json - 使用 Curl 命令对 Jersey、Jackson 和 Google GSON 进行 JSON 格式化

> ID：13871504
> 
> 赞同：0
> 
> 时间：2012-12-14T01:44:51.110
> 
> 标签：json, curl, jersey, jackson, gson

使用 Java 6、Tomcat 7、Jersey 1.15、Jackson 2.0.6（来自 FasterXml maven repo）和 Google GSON 2.2.2，我试图漂亮地打印 JSON 字符串，因此它看起来会被 curl -X GET 命令行缩进.

我创建了一个简单的 Web 服务，它具有以下架构：

我的 POJO（模型类）：

家庭.java

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Family {
    private String father;
    private String mother;

    private List<Children> children;

    // Getter & Setters
} 
```

儿童.java：

```
import javax.xml.bind.annotation.XmlRootElement;

@XmlRootElement
public class Children {
    private String name;
    private String age;
    private String gender;

    // Getters & Setters
} 
```

使用实用程序类，我决定对 POJO 进行硬编码，如下所示：

```
public class FamilyUtil {

    public static Family getFamily() {
        Family family = new Family();
        family.setFather("Joe");
        family.setMother("Jennifer");

        Children child = new Children();
        child.setName("Jimmy");
        child.setAge("12");
        child.setGender("male");
        List<Children> children = new ArrayList<Children>();

        children.add(child);

        family.setChildren(children);
        return family;
    }
} 
```

我的网络服务：

```
import java.io.IOException;

import javax.ws.rs.GET;
import javax.ws.rs.Path;
import javax.ws.rs.PathParam;
import javax.ws.rs.Produces;
import javax.ws.rs.core.MediaType;

import org.codehaus.jackson.JsonGenerationException;
import org.codehaus.jackson.map.JsonMappingException;
import org.codehaus.jackson.map.ObjectMapper;
import org.codehaus.jettison.json.JSONException;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.google.gson.JsonElement;
import com.google.gson.JsonParser;
import com.myapp.util.FamilyUtil;

@Path("")
public class MyWebService {
    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public static String getFamily() throws IOException, 
                                            JsonGenerationException, 
                                            JsonMappingException, 
                                            JSONException, 
                                            org.json.JSONException {
            ObjectMapper mapper = new ObjectMapper(); 
            String uglyJsonString = mapper.writeValueAsString(FamilyUtil.getFamily());
            Gson gson = new GsonBuilder().setPrettyPrinting().create();
            JsonParser parser = new JsonParser();
            JsonElement jsonElement = parser.parse(uglyJsonString);
            System.out.println(gson.toJson(jsonElement));
            return gson.toJson(jsonElement);
    }
} 
```

当我使用以下命令运行它时：

```
curl -X GET http://localhost:8080/mywebservice 
```

我在我的 Eclipse 控制台中得到了这个（这正是我想要的 curl 命令）：

```
{
  "father": "Joe",
  "mother": "Jennifer",
  "children": [
    {
      "name": "Jimmy",
      "age": "12",
      "gender": "male"
    }
  ]
} 
```

但是从上面列出的命令行 curl 命令中，我得到了这个（\n 之后有 4 个空格，但 JavaRanch 的论坛没有显示它）：

```
"{\n  \"father\": \"Joe\",\n  \"mother\": \"Jennifer\",\n  \"children\": [\n    {\n      \"name\": \"Jimmy\",\n      \"age\": \"12\",\n      \"gender\": \"male\"\n    }\n  ]\n}" 
```

如何使用 curl 命令使 JSON 格式与我在 Eclipse 控制台中得到的格式相同？

感谢您抽时间阅读...

# lua - Lua deciding to use overloaded _add or _sub

> ID：13871508
> 
> 赞同：2
> 
> 时间：2012-12-14T01:45:46.413
> 
> 标签：lua

I created a metatable where __add and __sub take a table and an number. How does Lua determine which to use? Consider the two situations below with table T (with metatable described)

```
local n=-10
local V=T+n 
```

and

```
local n=-10
local V=T-n 
```

Which gets called?

I have experimented with various combinations but fail to see a pattern.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T07:42:46.977

> Created a metatable where __add and __sub take a table and an number.

__add and __sub take *two operands*. One of them will necessarily be a table or userdata which has your metatable, the other can be anything at all. Lua doesn't care about the type of the other operand.

If either operand has a metatable with a handler for the particular operator (`+` -> `__add`, `-` => `__sub`), that handler will be called.

In your example, Lua not only doesn't care if `n` is positive or negative, it doesn't care if it's a number. The `-` in `-n` has nothing to do with the `__sub` metamethod -- that's the *unary* minus operator, whereas `__sub` handles the *binary* minus operator.

> How does Lua determine which to use?

The `+` operator is an "__add" event. When you sayd `op1 + op2`, Lua checks `op1` for a metatable with an `__add` handler. If it finds one, it calls it. Otherwise it checks `op2`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T06:29:21.063

It is the sign of the two operands operator in the *source code* which is determinant.

It does not care whether the operand value are negative or positive numbers. It does not even care whether your `n` is actually a number or a value of another type.

```
local n=-10  
local V=T+n  -- __add called

local n=-10
local V=T-n  -- __sub called 
```

# php - PHP SQL 函数

> ID：13871509
> 
> 赞同：0
> 
> 时间：2012-12-14T01:45:49.033
> 
> 标签：php, mysql, sql

有人可以告诉我为什么我的功能不起作用吗？

```
function myappsbdo($sqlquery, $tabname)
{
try
    {
        $pdo = new       PDO("mysql:host=127.0.0.1;port=3306;dbname=myapps","root","");
    }
catch (PDOException $e)
    {
        echo "Problème de connexion";
        exit();
    }
$sql = $sqlquery;
        $result = $pdo->query($sql);
        $tabname  = $result->fetchALL(PDO::FETCH_NUM);
} 
```

我对我为 $tabname 选择的变量做了一个 var_dump，它是一个空数组。假设里面有我的数据库数据......谢谢！

编辑：这就是我所说的。myappsbdo("SELECT * FROM 类别", $tab1);

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:12:34.210

函数参数`$tabname`是按值传递的，因此您对该变量的后续分配仅更改函数范围变量的值`$tabname`，而不更改调用范围变量的值`$tab1`。

您想[通过引用传递](http://php.net/manual/en/language.references.pass.php)：

```
function myappsbdo($sqlquery, &$tabname) {
  //                          ^---- notice the ampersand character
  // etc.
  $tabname = $result->fetchALL(PDO::FETCH_NUM);
} 
```

或者，或者，返回结果集：

```
function myappsbdo($sqlquery) {
  // etc.
  return $result->fetchALL(PDO::FETCH_NUM);
}

$tab1 = myappsbdp('SELECT * FROM categorie'); 
```

请注意，您可能应该使您的 PDO 对象静态，以便可以在连续的函数调用中重用数据库连接。

# jquery - jQuery 鼠标移动

> ID：13871510
> 
> 赞同：2
> 
> 时间：2012-12-14T01:45:56.080
> 
> 标签：jquery, mousemove

我想要一个图像，当鼠标移动到它的左侧和右侧时，它会变成三个图像。

*   Left 当光标在左侧时显示左箭头
*   当光标在中心时，居中显示向上箭头
*   Right 当光标在右侧时显示右箭头

我发现了一个运行良好的 jQuery 脚本。我对其进行了一些编辑，并让它在鼠标移动时显示左右箭头。我只剩下中间部分要做，不知道如何添加。

这就是我所拥有的。（另见 jsFiddle 页面：http: [//jsfiddle.net/WhkJB/](http://jsfiddle.net/WhkJB/)）

```
var image_src = {
    left: "http://i.imgur.com/ubKrq.jpg",
    right: "http://i.imgur.com/SxHCS.jpg",
};

$(document).mousemove(function(event){
    var mloc = {
        x: event.pageX,
        y: event.pageY
    };

    if( 
        (mloc.x >= 0 && mloc.x <= $(document).width()/2 )
    ){
        $(".arrow").attr("src", image_src.left);
    }else if( 
        (mloc.x >= $(document).width()/2 && mloc.x <= $(document).width()) &&
        (mloc.y >= 0 && mloc.y <= $(document).height()/2)
    ){
        $(".arrow").attr("src", image_src.right);
    }

});​ 
```

另一个问题 - 当您将鼠标移动到图像下方时，它不起作用。有没有办法让它在整个页面上移动？

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:52:16.583

您可以先计算 X 位置百分比，然后`if`对其应用简单。

IE：

```
var image_src = {
    left: "http://i.imgur.com/ubKrq.jpg",
    right: "http://i.imgur.com/SxHCS.jpg",
    up: "http://i.imgur.com/SxHCS.jpg" // replace with UP image
};

$(document).mousemove(function(event){
    var xPercent = (event.pageX / $(document).width()) * 100;
    if(xPercent <= 40) { // show left
        $(".arrow").attr("src", image_src.left);
    }
    else if(xPercent >= 60) { // show right
        $(".arrow").attr("src", image_src.right);
    }
    else { // show up
        $(".arrow").attr("src", image_src.up);
    }
});​​​ 
```

# php - 来自 php 的 POST 请求

> ID：13871512
> 
> 赞同：1
> 
> 时间：2012-12-14T01:46:03.280
> 
> 标签：php, post, curl

我需要一个 php 页面，在加载时自动发送 POST 请求，而不使用提交按钮或任何用户输入。我不需要对响应做任何事情。

我只需要将“8”发布到 www.mydomain.com

```
$url = 'http://www.mydomain.com/';
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, 8);
curl_setopt($curl, CURLOPT_RETURNTRANSFER, true);

$response = curl_exec($ch);
curl_close($ch); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:50:08.737

尝试这个：

```
curl_setopt($ch, CURLOPT_POSTFIELDS, array('data' => 8)); 
```

在您的域编辑脚本上：

```
echo $_POST['data']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T01:55:04.247

有点奇怪的请求..您应该考虑使用值 8 的键。

但是，您可以`http://www.mydomain.com/`通过阅读来获取 POST 正文`'php://input'`。

```
//on www.mydomain.com/index.php
echo file_get_contents('php://input'); //8 
```

顺便说一句，你也有`$curl`而不是`$ch`在第三个 setopt。

# google-plus - 如何根据 google plus id 找到电子邮件？

> ID：13871517
> 
> 赞同：8
> 
> 时间：2012-12-14T01:46:38.130
> 
> 标签：google-plus

基于类似的网址

[https://plus.google.com/123456789012345678901](https://plus.google.com/123456789012345678901) # 虚拟号码

我怎样才能找到gmail用户名？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T18:10:10.713

如果您正在开发应用程序或脚本，则可以使用 Oauth 2.0 并请求 userinfo.email 范围。

有关详细信息，请参阅[https://stackoverflow.com/a/7836385/1354939](https://stackoverflow.com/a/7836385/1354939)

这确实需要您配置[Google API 控制台](https://code.google.com/apis/console/)项目并创建 OAuth 2.0 客户端 ID。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T03:37:49.833

你不能。出于隐私原因，圈子里的某个人或知道他们的 Google Plus ID 不足以获取电子邮件地址。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-08T04:14:35.990

[仅从此类Google+](https://plus.google.com/112496876295536846823) URL中包含的 id 应该不可能找到任意用户的电子邮件地址。

# php - 如何使一个数组的值作为PHP中另一个数组的值的键？

> ID：13871520
> 
> 赞同：-1
> 
> 时间：2012-12-14T01:47:26.263
> 
> 标签：php

> **可能重复：**
> [合并PHP数组，一个作为键，另一个作为值？](https://stackoverflow.com/questions/5422955/merging-php-array-one-as-keys-the-other-as-values)

我有一个键数组，我有一个值数组..如何将数组 A 的值作为数组 B 值的“键”？

```
array A

   [0] => 224
    [1] => 77
    [2] => 78
    [3] => 79
    [4] => 80
    [5] => 81
    [6] => 82
    [7] => 76
)
1

array B

Array
(
    [0] => Men Shoes
    [1] => Fashion Accessories
    [2] => Men Apparels
    [3] => Shoes & Belts
    [4] => Watches & Clocks
    [5] => Women Apparels
    [6] => Others
    [7] => Bags 
```

我想要发生的是让它像这样

```
array(
 [224] => Men Shoes
 [77] => Fashion Accessories
 [78] => Men Apparells
 [79] => Shoes & Belts
 [80] => Watches & clocks
 [81] => Women Apparels
 [82] => Others
 [76] => Bags 
) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:49:59.720

您可以使用[array_combine()](http://php.net/manual/en/function.array-combine.php)

> 通过将 keys 数组中的值用作键并将 values 数组中的值用作相应值来创建一个数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T02:00:03.470

您可以使用[array_combine()](http://php.net/manual/en/function.array-combine.php)

为您提供示例代码。

```
<?PHP
$array_a = array
(
    0 => 224,
    1 => 77,
    2 => 78,
    3 => 79,
    4 => 80,
    5 => 81,
    6 => 82,
    7 => 76
);

$array_b = array
(
    0 => "Men Shoes",
    1 => "Fashion Accessories",
    2 => "Men Apparels",
    3 => "Shoes & Belts",
    4 => "Watches & Clocks",
    5 => "Women Apparels",
    6 => "Others",
    7 => "Bags"
);

$new_array = array_combine($array_a,$array_b);

print_r($new_array);

?> 
```

# java - 在 Netbeans 中更改 defaultCloseOperation()？

> ID：13871523
> 
> 赞同：0
> 
> 时间：2012-12-14T01:47:50.190
> 
> 标签：java, operation

我需要设置打开一个不同的 JFrame 作为我当前正在工作的 JFrame 的 defaultCloseOperation。

我可以在 Netbeans 中做到这一点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:52:09.447

[http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html](http://docs.oracle.com/javase/7/docs/api/java/awt/event/WindowListener.html)

将 a 添加`WindowListener`到第一帧，当它关闭时，制作第二帧并关闭第一帧。然后设置`defaultCloseOperation`为`DO_NOTHING_ON_CLOSE`。

非工作代码只是为了让你明白：

```
public class FirstFrame extends JFrame implements WindowListener {
    (other stuff)
    @Override
    public void windowClosed(WindowEvent e) {
        //make second frame
        dispose();
    }
} 
```

# f# - 模式匹配有多聪明？

> ID：13871524
> 
> 赞同：3
> 
> 时间：2012-12-14T01:47:50.453
> 
> 标签：f#, pattern-matching

我的程序大部分时间都花在数组模式匹配上，我想知道是否应该重写函数并丢弃自动模式匹配。

例如一个非常简单的案例

```
let categorize array =
    match array with
    | [|(1|2);(1|2);(1|2)|] -> 3
    | [|(1|2);(1|2);_|] -> 2
    | [|(1|2);_;_|] -> 1
    | _ -> 0

categorize [|2;1;3|] 
```

编译器是否会在这种情况下应用最少的比较，例如通过识别第一种情况与第二种情况相同，除了第三个元素。

实际上模式更复杂，预优化的模式匹配可能比完全优化的模式匹配花费更多的时间。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T02:39:31.387

直接来自反射器：

```
public static int categorize(int[] array)
{
    if ((array > null) && (array.Length == 3))
    {
        switch (array[0])
        {
            case 1:
                switch (array[1])
                {
                    case 1:
                        switch (array[2])
                        {
                            case 1:
                            case 2:
                                goto Label_005C;
                        }
                        goto Label_005A;

                    case 2:
                        switch (array[2])
                        {
                            case 1:
                            case 2:
                                goto Label_005C;
                        }
                        goto Label_005A;
                }
                goto Label_0042;

            case 2:
                switch (array[1])
                {
                    case 1:
                        switch (array[2])
                        {
                            case 1:
                            case 2:
                                goto Label_005C;
                        }
                        goto Label_005A;

                    case 2:
                        switch (array[2])
                        {
                            case 1:
                            case 2:
                                goto Label_005C;
                        }
                        goto Label_005A;
                }
                goto Label_0042;
        }
    }
    return 0;
Label_0042:
    return 1;
Label_005A:
    return 2;
Label_005C:
    return 3;
} 
```

我看不出有什么低效的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-15T19:11:36.657

您的问题中真正缺少的是实际的主题领域。换句话说，您的问题非常笼统（通常，这对 SO 有好处），而针对您的实际问题进行编码可能会以一种优雅的方式解决整个问题。

*如果我按照目前*的情况推断您的问题，您只需要第一个既不是`1`也不是的元素的索引`2`，并且实现很简单：

```
let categorize arr =
    try
        Array.findIndex (fun x -> not(x = 1 || x = 2)) arr
    with
        | :? System.Collections.Generic.KeyNotFoundException -> Array.length arr

// Usage
let x1 = categorize [|2;1;3|]    // returns 2
let x2 = categorize [|4;2;1;3|]  // returns 0
let x3 = categorize [|1;2;1|]    // returns 3 
```

作为几个免费的好处，您可以获得与数组长度无关且绝对可读的代码。
这是你需要的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-03T12:59:58.383

### 测试 1

```
 F#
        let test1 x =
            match x with
            | [| 1; 2; 3 |] -> A
            | [| 1; 2; _ |] -> A
            | [| 1; _; _ |] -> A
    Decompiled C#
        if (x != null && x.Length == 3)
        {
            switch (x[0])
            {
            case 1:
                switch (x[1])
                {
                case 2:
                    switch (x[2])
                    {
                    case 3:
                        return Program.MyType.A;
                    default:
                        return Program.MyType.A;
                    }
                    break;
                default:
                    return Program.MyType.A;
                }
                break;
            }
        }
        throw new MatchFailureException(...);
    Decompiled IL
        Code size 107 
```

结论

1.  模式匹配不会根据 -> 之后的值进行优化。
2.  Pattern Match 能够在结论 1 下找到数组分解的优化方法。
3.  不完整的模式匹配总是抛出异常，因此添加通配符来捕获丢失的模式并显式抛出异常并没有什么坏处。

### 测试 2

```
 F#
        let test2 x =
            match x with
            | [| 1; 2; 3 |] -> A
            | [| _; 2; 3 |] -> B
            | [| _; _; 3 |] -> C
    Decompiled C#
        if (x != null && x.Length == 3)
        {
            switch (x[0])
            {
            case 1:
                switch (x[1])
                {
                case 2:
                    switch (x[2])
                    {
                    case 3:
                        return Program.MyType.A;
                    default:
                        goto IL_49;
                    }
                    break;
                default:
                    switch (x[2])
                    {
                    case 3:
                        break;
                    default:
                        goto IL_49;
                    }
                    break;
                }
                break;
            default:
                switch (x[1])
                {
                case 2:
                    switch (x[2])
                    {
                    case 3:
                        return Program.MyType.B;
                    default:
                        goto IL_49;
                    }
                    break;
                default:
                    switch (x[2])
                    {
                    case 3:
                        goto IL_58;
                    }
                    goto IL_49;
                }
                break;
            }
            IL_58:
            return Program.MyType.C;
        }
        IL_49:
        throw new MatchFailureException(...);
    Decompiled IL
        Code size 185 
```

结论

1.  模式匹配检查从数组开头到结尾的值。所以它无法找到优化的方法。
2.  代码大小是最佳代码大小的 2 倍。

### 测试 3

```
 F#
        let test3 x =
            match x with
            | [| 1; 2; 3 |] -> A
            | [| 1; 2; a |] when a <> 3 -> B
            | [| 1; 2; _ |] -> C
    Decompiled C#
        if (x != null && x.Length == 3)
        {
            switch (x[0])
            {
            case 1:
                switch (x[1])
                {
                case 2:
                    switch (x[2])
                    {
                    case 3:
                        return Program.MyType.A;
                    default:
                        if (x[2] != 3)
                        {
                            int a = x[2];
                            return Program.MyType.B;
                        }
                        break;
                    }
                    break;
                }
                break;
            }
        }
        if (x != null && x.Length == 3)
        {
            switch (x[0])
            {
            case 1:
                switch (x[1])
                {
                case 2:
                    return Program.MyType.C;
                }
                break;
            }
        }
        throw new MatchFailureException(...); 
```

结论

1.  编译器不够聪明，无法通过 Guard 检查完整性/重复性。
2.  Guard 使 Pattern Match 产生奇怪的未优化代码。

### 测试 4

```
 F#
        let (| Is3 | IsNot3 |) x =
           if x = 3 then Is3 else IsNot3
        let test4 x =
            match x with
            | [| 1; 2; 3      |] -> A
            | [| 1; 2; Is3    |] -> B
            | [| 1; 2; IsNot3 |] -> C
            | [| 1; 2; _      |] -> D // This rule will never be matched.
    Decompiled C#
        if (x != null && x.Length == 3)
        {
            switch (x[0])
            {
            case 1:
                switch (x[1])
                {
                case 2:
                    switch (x[2])
                    {
                    case 3:
                        return Program.MyType.A;
                    default:
                    {
                        FSharpChoice<Unit, Unit> fSharpChoice = Program.|Is3|IsNot3|(x[2]);
                        if (fSharpChoice is FSharpChoice<Unit, Unit>.Choice2Of2)
                        {
                            return Program.MyType.C;
                        }
                        return Program.MyType.B;
                    }
                    }
                    break;
                }
                break;
            }
        }
        throw new MatchFailureException(...); 
```

结论

1.  多个案例活动模式编译为 FSharpChoice。
2.  编译器能够检查活动模式的完整性/重复性，但是它不能将它们与正常模式进行比较。
3.  未达到的模式不会被编译。

### 测试 5

```
 F#
        let (| Equal3 |) x =
           if x = 3 then Equal3 1 else Equal3 0 // Equivalent to "then 1 else 0"
        let test5 x =
            match x with
            | [| 1; 2; 3        |] -> A
            | [| 1; 2; Equal3 0 |] -> B
            | [| 1; 2; Equal3 1 |] -> C
            | [| 1; 2; _        |] -> D
    Decompiled C#
        if (x != null && x.Length == 3)
        {
            switch (x[0])
            {
            case 1:
                switch (x[1])
                {
                case 2:
                    switch (x[2])
                    {
                    case 3:
                        return Program.MyType.A;
                    default:
                    {
                        int num = x[2];
                        switch ((num != 3) ? 0 : 1)
                        {
                        case 0:
                            return Program.MyType.B;
                        case 1:
                            return Program.MyType.C;
                        default:
                            return Program.MyType.D;
                        }
                        break;
                    }
                    }
                    break;
                }
                break;
            }
        }
        throw new MatchFailureException(...); 
```

结论

1.  单例活动模式编译为返回类型。
2.  编译器有时会自动内联函数。

### 测试 6

```
 F#
        let (| Partial3 | _ |) x =
           if x = 3 then Some (Partial3 true) else None // Equivalent to "then Some true"
        let test6 x =
            match x with
            | [| 1; 2; 3 |] -> A
            | [| 1; 2; Partial3 true |] -> B
            | [| 1; 2; Partial3 true |] -> C
    Decompiled C#
        if (x != null && x.Length == 3)
        {
            switch (x[0])
            {
            case 1:
                switch (x[1])
                {
                case 2:
                    switch (x[2])
                    {
                    case 3:
                        return Program.MyType.A;
                    default:
                    {
                        FSharpOption<bool> fSharpOption = Program.|Partial3|_|(x[2]);
                        if (fSharpOption != null && fSharpOption.Value)
                        {
                            return Program.MyType.B;
                        }
                        break;
                    }
                    }
                    break;
                }
                break;
            }
        }
        if (x != null && x.Length == 3)
        {
            switch (x[0])
            {
            case 1:
                switch (x[1])
                {
                case 2:
                {
                    FSharpOption<bool> fSharpOption = Program.|Partial3|_|(x[2]);
                    if (fSharpOption != null && fSharpOption.Value)
                    {
                        return Program.MyType.C;
                    }
                    break;
                }
                }
                break;
            }
        }
        throw new MatchFailureException(...); 
```

结论

1.  部分活动模式编译为 FSharpOption。
2.  编译器无法检查部分活动模式的完整性/重复性。

### 测试 7

```
 F#
        type MyOne =
            | AA
            | BB of int
            | CC
        type MyAnother =
            | AAA
            | BBB of int
            | CCC
            | DDD
        let test7a x =
            match x with
            | AA -> 2
        let test7b x =
            match x with
            | AAA -> 2
    Decompiled C#
        public static int test7a(Program.MyOne x)
        {
            if (x is Program.MyOne._AA)
            {
                return 2;
            }
            throw new MatchFailureException(...);
        }
        public static int test7b(Program.MyAnother x)
        {
            if (x.Tag == 0)
            {
                return 2;
            }
            throw new MatchFailureException(...);
        } 
```

结论

1.  如果 union 中的 case 超过 3 个，Pattern Match 将使用 Tag 属性而不是 is。（它也适用于多案例活动模式。）
2.  通常，模式匹配会导致多个 is，这会极大地降低性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-15T13:22:02.897

你可以写：

```
let f (xs: _ []) =
  if xs.Length=3 then
    let p n = n=1 || n=2
    if p xs.[0] then
      if p xs.[1] then
        if p xs.[2] then 3
      else 2
    else 1
  else 0 
```

# c# - 下载图像，序列化为 base-64 字符串，转换为 ImageSource

> ID：13871525
> 
> 赞同：0
> 
> 时间：2012-12-14T01:47:56.787
> 
> 标签：c#, wpf, mvvm

我正在尝试从网站下载图像，将它们转换为 base-64 字符串，以便它们可以序列化为文件，反序列化，从 base-64 字符串转换为 System.Drawing.Image，然后最终转换为 System.Windows.Media .ImageSource 以便它们可以将数据绑定到我的 UI。

```
 public static string ImageToString(Image image)
    {
        using (var ms = new MemoryStream())
        {
            if (image == null)
                image = Properties.Resources.blank_image;

            image.Save(ms, image.RawFormat);
            return Convert.ToBase64String(ms.ToArray());
        }
    }

    public static Image StringToImage(string imageString)
    {
        if (String.IsNullOrEmpty(imageString))
            return Properties.Resources.blank_image;

        var array = Convert.FromBase64String(imageString);
        using (var ms = new MemoryStream(array))
        {
            return Image.FromStream(ms);
        }
    }

    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null)
            return null;

        var image = (System.Drawing.Image)value;
        var bitmap = new System.Windows.Media.Imaging.BitmapImage();

        bitmap.BeginInit();

        MemoryStream memoryStream = new MemoryStream();
        image.Save(memoryStream, image.RawFormat);
        memoryStream.Seek(0, System.IO.SeekOrigin.Begin);
        bitmap.StreamSource = memoryStream;

        bitmap.EndInit();

        return bitmap;
    } 
```

`image.Save(memoryStream, image.RawFormat)`当in`Convert()`被击中时，我得到了这个相当无益的异常：

> System.Drawing.dll 中出现“System.Runtime.InteropServices.ExternalException”类型的异常，但未在用户代码中处理
> 
> 附加信息：GDI+ 中出现一般错误。

将我的`Properties.Resources.blank_image`Image 转换为 ImageSource 可以正常工作，但不能将 base-64 字符串转换为 Image。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:40:20.333

我不确定您的特定异常（除非它与[使用 SaveFileDialog 后在 Bitmap.Save() 的 GDI+ 处发生 A Generic error](https://stackoverflow.com/questions/5813633/a-generic-error-occurs-at-gdi-at-bitmap-save-after-using-savefiledialog)相关），但还有另一种选择。

您可能有更好的运气直接从 base 64 字符串转换并使用[BitmapDecoder.Create(...)](http://msdn.microsoft.com/en-us/library/ms615982.aspx)

例如：

```
public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
{
    if (value == null)
        return null;

    string imageBase64String = (string)value;
    byte[] imageAsBytes = Convert.FromBase64String(imageBase64String);

    using (var ms = new MemoryStream(imageAsBytes))
    {
        var decoder = System.Windows.Media.Imaging.BitmapDecoder.Create(ms, BitmapCreateOptions.None, BitmapCacheOptions.OnLoad);

        return decoder.Frames[0];
    }
} 
```

# java - 任何人都可以帮助我完成最后的 Java 作业，我什至不知道从哪里开始

> ID：13871526
> 
> 赞同：0
> 
> 时间：2012-12-14T01:48:21.153
> 
> 标签：java

如果有人可以在这里帮助我朝着正确的方向前进，我并没有要求所有的答案，因为我什至不知道从哪里开始做这件事。

我正在介绍 Java 课程并完成最后的硬件作业。

这是一些问题：

您必须创建一个程序来计算各种容器的表面积和体积，这些容器都是“右棱镜”。这意味着容器的末端是相同的，并且侧面垂直于末端。每个容器都有不同的形状：圆形、矩形、三角形和正多边形。所有这些容器都派生自一个通用的抽象 Container 类。

然后，您将创建一个名为 ContainerCollection 的类，该类将包含所有可能的 Container 类的数组。此类将提供计算 ContainerCollection 中所有 Container 的 totalVolume 和 totalSurfaceArea 的方法。

要点链接： [https ://gist.github.com/3b9fb22e72b2a3d86e1b](https://gist.github.com/3b9fb22e72b2a3d86e1b)

给那些无法获得要点的人的文本：

```
abstract class Container {
    double height;

    Container(double height)
    {
        this.height = height;
    }

    abstract double getTopArea();
    abstract double getTopPerimeter();

    double getVolume()
    {
        return height * getTopArea();
    }

    double getSurfaceArea()
    {
        return 2*getTopArea() + height * getTopPerimeter();
    }
}

class CircularContainer extends Container
{
    // add appropriate data definitions
    CircularContainer(double height, double radius)
    {
        // Fill in details
    }

    // implement required abstract methods
}

class RectangularContainer extends Container
{
    // add appropriate data definitions
    RectangularContainer(double height, double width, double length)
    {
        // Fill in details

    }

    // implement required abstract methods

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T02:03:05.383

使用[Eclipse](http://www.eclipse.org/downloads/)之类的 IDE在 Java 中进行编码，这让生活变得更加轻松。

我看到您的作业的框架代码已经存在。您只需要在扩展`Container`该类的每个子类中覆盖这 4 个方法

```
double getTopArea()

double getTopPerimeter()

double getVolume()

double getSurfaceArea() 
```

然后返回可以使用每个形状的特定公式计算的正确值。

### 例子

```
class RectangularContainer extends Container {
    double height, width, length;

    RectangularContainer(double height, double width, double length) {
         this.height = height;
         this.width = width;
         this.length = length;
    }

    double getTopArea() {
         return height*width;
    }

    double getTopPerimeter() {
         return 2*(height+width);
    }

    double getVolume() {
         return height*width*height;
    }

    double getSurfaceArea() {
         // ooh I can't remember this one... try to figure out this :)
    }

} 
```

您还应该尝试通过向方法和变量添加适当的[访问修饰符来增强此代码。](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)

# rpm - 如何以编程方式在 rpm 规范文件的提供字段中设置多个值？

> ID：13871531
> 
> 赞同：0
> 
> 时间：2012-12-14T01:48:32.007
> 
> 标签：rpm, rpmbuild

我希望生成一个 rpm 在规范文件中提供的 Perl 模块列表。从手册中不清楚如何做到这一点。如何从 shell 命令设置字段？以及如何从一个命令中指定多个值？就像是...

```
Provides: $(some_program_which_figures_out_what_the_package_provides) 
```

运行程序以填充标签的正确语法是什么，程序应该返回什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T19:57:49.503

你可以这样做：

*   不指定`Provides`，但
*   覆盖`%__find_provides`。

# java - 从枚举类型和序数中获取枚举值

> ID：13871532
> 
> 赞同：8
> 
> 时间：2012-12-14T01:48:40.820
> 
> 标签：java, reflection, enums

```
public <E extends Enum> E decode(java.lang.reflect.Field field, int ordinal) {
    // TODO
} 
```

假设`field.getType().isEnum()`是`true`，我将如何产生给定序数的枚举值？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-14T06:04:12.173

```
field.getType().getEnumConstants()[ordinal] 
```

就够了。一条线; 足够直截了当。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T01:54:49.147

```
ExampleTypeEnum value = ExampleTypeEnum.values()[ordinal] 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T02:08:49.570

要得到你想要的，你需要调用`YourEnum.values()[ordinal]`. 你可以用这样的反射来做到这一点：

```
public static <E extends Enum<E>> E decode(Field field, int ordinal) {
    try {
        Class<?> myEnum = field.getType();
        Method valuesMethod = myEnum.getMethod("values");
        Object arrayWithEnumValies = valuesMethod.invoke(myEnum);
        return (E) Array.get(arrayWithEnumValies, ordinal);
    } catch (NoSuchMethodException | SecurityException
            | IllegalAccessException | IllegalArgumentException
            | InvocationTargetException e) {
        e.printStackTrace();
    }
    return null;
} 
```

## 更新

正如@LouisWasserman 在他的评论中指出的那样，有更简单的方法

```
public static <E extends Enum<E>> E decode(Field field, int ordinal) {
    return (E) field.getType().getEnumConstants()[ordinal];
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-05-09T13:23:38.490

根据标题，建议

```
public <E extends Enum> E decode(Class<?> enumType, int ordinal) 
{
   return enumType.getEnumConstants()[ordinal];
} 
```

被调用

```
YourEnum enumVal = decode(YourEnum.class, ordinal) 
```

# c++ - 如何将可变数量的参数传递给没有命名参数的c ++中的函数

> ID：13871535
> 
> 赞同：4
> 
> 时间：2012-12-14T01:49:06.240
> 
> 标签：c++, function, arguments, variadic-functions

我需要编写一个接受可变数量争论的函数，它本质上是一个`snprintf`类似函数的包装器。我一般理解如何执行此操作，如[传递可变数量的参数](https://stackoverflow.com/questions/205529/c-c-passing-variable-number-of-arguments-around)中所示。

无论如何，至少在 C 中，我们需要在变量参数开始之前将一个命名参数传递给函数（[为什么 void f(...) 在 C 中不允许？](https://stackoverflow.com/questions/6570447/why-is-void-f-not-allowed-in-c)）。

然而，相同问题的答案表明这在 C++ 中很容易实现。我想知道如何实现这一点，特别是因为处理可变参数函数的方法似乎与`C`(`va_start`等) 相同。还是他们指的是可变参数模板？

所以基本上可以编写一个没有命名参数的可变参数函数，如下所示，如果可以，怎么做？

```
void f(...){
   ... 
} 
```

ps 如果可能的话，我想用 c++03 来做这件事。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T01:59:31.427

虽然 C++ 语言允许编写参数列表仅包含 的函数`...`，但该语言不提供访问用`(...)`参数列表声明的函数中的参数的方法。

基本上，C++ 中的此类函数因其在重载解析中的行为而存在（`...`参数匹配任何参数类型）。此类函数的主体将无法访问参数。如果您看不到此类功能的用途，请不要使用它们。

在一些著名的模板元编程技术中，此类函数通常在非执行上下文中使用，在这种情况下，它们甚至不必定义——仅仅声明就足够了。

# c - 指向变量 C 的指针值

> ID：13871554
> 
> 赞同：-1
> 
> 时间：2012-12-14T01:51:35.303
> 
> 标签：c, variables, pointers

大家好，我在想是否可以将指针值分配给变量？基本上我有指向整数值的指针，我想将它分配给另一个变量。IE：

```
coursep->node = 1 //coursep is pointer to structure and node is structure variable
int var;
var = coursep->node; //I want variable to be 1 
```

我可以这样做吗？如何？当我尝试这样分配它时，它似乎不起作用。

编辑：基本上我试图从指针值到数组或结构。

```
lines = lineCount(courses); //counts how many lines does file have
struct courses course[lines]; // creates array of structures with amount of lines

    for (i = 0; i < lines; i++) {
        struct courses *coursep;
        coursep = course;
        fscanf(co, " %c %d ", &coursep->courseName, &coursep->numberOfNodes);
        course[i].courseName = coursep->courseName;
        course[i].numberOfNodes = coursep->numberOfNodes;
        for (j = 0; j < coursep->numberOfNodes; j++) {
            fscanf(co, " %d", &(coursep->nodes[j]));
            var = *coursep->nodes[j];
            printf("%d\t", var);
        }
        fscanf(co, "\n");
    } 
```

结构：

```
struct courses{
char courseName;
int numberOfNodes;
int nodes[];
}; 
```

我似乎无法将它直接放入数组中，因为它会打印出随机垃圾，如果我使用指针，它似乎显示正确的值（所有内容都是从文件中读取的），但是当我尝试将其全部放入数组时，它似乎会随机抛出再次垃圾=/有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T03:08:00.130

当您在结构的末尾声明一个空数组成员时，它是一个**灵活数组成员**。

根据 ISO/IEC 9899:TC3**第 6.7.2.1 节结构和联合说明符，约束 16**

> 作为一种特殊情况，具有多个命名成员的结构的最后一个元素可能具有不完整的数组类型；这称为**灵活数组成员**. 在大多数情况下，灵活数组成员被忽略。特别是，结构的大小就像省略了柔性数组成员一样，只是它可能具有比省略所暗示的更多的尾随填充。然而，当一个 . （或->）运算符的左操作数是（指向）具有灵活数组成员的结构，右操作数命名该成员，它的行为就像该成员被替换为最长的数组（具有相同的元素类型) 不会使结构大于被访问的对象；数组的偏移量应保持灵活数组成员的偏移量，即使这与替换数组的偏移量不同。**如果这个数组没有元素，它的行为就好像它有一个元素，但如果尝试访问该元素或生成一个越过它的指针，则行为是不确定的。**

* * *

在您的情况下，我认为没有必要使用灵活的数组成员。您可以更改`int nodes[]`to的定义，并在循环`int* nodes`中为 for 分配内存。`nodes``for`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T01:54:24.983

试试这个

```
int *var;
var = &coursep->node; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T02:44:34.850

您需要将`nodes`成员变量更改为指针而不是数组，并在分配给该数组之前为该数组分配内存：

```
struct courses{
  char courseName;
  int numberOfNodes;
  int *nodes;
};

...

course[i].nodes = malloc(sizeof(int) * course[i].numberOfNodes); 
```

（或类似的东西）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T02:52:21.007

这段代码的一个问题是它`coursep`总是指向`course`数组的第一个元素：

```
struct courses course[lines]; 

for (i = 0; i < lines; i++) {
    struct courses *coursep;
    coursep = course;
    /* ... */
} 
```

...这意味着该数组中的几乎所有内容都可能是垃圾。

# mysql - 删除记录中最后 7 个字符以外的所有内容

> ID：13871558
> 
> 赞同：2
> 
> 时间：2012-12-14T01:52:06.477
> 
> 标签：mysql, sql

我有一个包含客户完整邮寄地址的表格。我想去掉整个地址，只保留邮政编码（最后 7 个字符，包括空格）。我已经搜索了大约一个小时，但无法弄清楚。

`Table Name: Customers Column: MailingAddress`

所以我会在哪里

```
 MailingAddress: 1234 Example Street, Cityplace T1U 2V4 
```

我只想留下

```
 MailingAddress: T1U 2V4 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T01:54:58.557

采用[`SUBSTR()`](http://dev.mysql.com/doc/refman/5.5/en/string-functions.html#function_substr)

```
UPDATE Customers SET MailingAddress = SUBSTR(MailingAddress, -7, 7) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T01:55:34.943

或者代替`SUBSTR()`，使用稍微简单[`RIGHT()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_right)的来检索表达式的最右边的*n*个字符。

```
UPDATE Customers SET MailingAddress = RIGHT(MailingAddress, 7) 
```

*...因为我个人永远记不起负值的参数顺序`SUBSTR()`或负值何时合法。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T01:55:32.213

只需查看文档：

```
http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substr 
```

# asp.net-mvc-3 - ASP.NET MVC 3 - 部分视图显示为新页面

> ID：13871560
> 
> 赞同：2
> 
> 时间：2012-12-14T01:52:11.980
> 
> 标签：asp.net-mvc-3, asp.net-ajax

我已经在这里看过一些帖子，但我并不聪明。我尝试了我的第一个 Ajax 示例，但无济于事。Partial View 被加载到一个单独的页面中，而不是更改当前页面中的 dom 元素。

> 目的是通过单击“刷新”链接仅更新当前行的“上次活动日期”值。

请问如果有一个简单的方法可以做到这一点，你也可以告诉我吗？

看法：

```
@model IEnumerable<RegistrationManager.User>

@{
    ViewBag.Title = "Users";
}

@section scripts {
    @Content.Script(Url, "jquery-unobtrusive-ajax.min.js")
}
<h2>Users</h2>

<table>
    <tr>
        <th>Email Address</th>
        <th>Given Names</th>
        <th>Surname</th>
        <th>Last Activity Date</th>
        <th>Refresh</th>
    </tr>

@foreach (var item in Model)
{
    string selectedRow = "";
    if (ViewBag.UserId != null && item.UserId == ViewBag.UserId)  
    {  
        selectedRow = "selectedrow";  
    }  
    <tr class="@selectedRow" valign="top">
       <td>
            @item.UserName
        </td>
        <td>
            @item.Profile.GivenNames
        </td>
        <td>
            @item.Profile.Surname
        </td>
        <td>
            <div id="@String.Format("LastActivityDate{0}", item.UserId)">@Html.Partial("_DateOnlyPartialView", item.LastActivityDate)</div>
        </td>
        <td>
            @Ajax.ActionLink("Refresh", "Refresh",
                         new { UserId = item.UserId },
                         new AjaxOptions {
                             UpdateTargetId = "LastActivityDate" + item.UserId,
                             InsertionMode = InsertionMode.Replace,
                             HttpMethod = "GET"                                 
                        })
        </td>
    </tr>
}

</table> 
```

控制器：

```
public PartialViewResult Refresh(Guid? UserId)
{
    User user = _db.Users.Find(UserId);
    user.RefreshLastActivityDate();
    return PartialView("_DateOnlyPartialView", user.LastActivityDate);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:56:57.183

您是否包含/引用了所有必要的 javascript 文件？

如果你有 UnobtrusiveJavaScriptEnabled 那么你需要：

1.  jQuery
2.  jquery.unobtrusive-ajax.js

如果您还使用客户端验证，则需要；

1.  jquery.validate.js
2.  jquery.validate.unobtrusive.js

这些文件都可以在您创建新的 MVC3 项目时找到。

# iphone - UIView 位置检测

> ID：13871568
> 
> 赞同：1
> 
> 时间：2012-12-14T01:53:12.937
> 
> 标签：iphone, ios, xcode

如何检测我的 UIView 框架是否等于 myFrame？

我需要类似的东西：

```
CGRect myFrame;
myFrame = CGRectMake(0, -51, 320, 50);
if(view.frame == myFrame) 
{
    NSLog(@"Congrats");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T01:56:34.353

你可以使用

```
CGRect myFrame = CGRectMake(0, -51, 320, 50);
if (CGRectEqualToRect(myFrame,view.frame))
{
    NSLog(@"Congrats");
} 
```

有关更多信息，请参阅 CGGeometry 参考上的苹果文档：http: [//developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGGeometry/Reference/reference.html](http://developer.apple.com/library/ios/#documentation/GraphicsImaging/Reference/CGGeometry/Reference/reference.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:49:12.803

CGRectEquatToRect 是一个检查两个框架是否相等的函数，只需要传递你要检查其相等性的两个视图的框架。它返回布尔结果。如果两个帧相等，则返回 true，否则返回 false。

# .htaccess - Drupal 6 管理员链接断开

> ID：13871571
> 
> 赞同：1
> 
> 时间：2012-12-14T01:53:36.713
> 
> 标签：.htaccess, drupal, drupal-6

我正在尝试从 Drupal 7 升级站点，该站点将被移至新服务器。我已将该站点移至新服务器，并通过 IP 地址访问它。查看站点时，所有页面和页面链接都可以正常工作，但是当我尝试访问任何管理链接（即 /admin 或 /admin/config）时，我被重定向到旧服务器上的实时 Drupal 6 站点。我更新了 htaccess 文件，并更改了设置文件中的 base_url 变量。还有其他建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:31:29.663

当我之前看到它时，这是由于[Secure Pages 模块](http://drupal.org/project/securepages)。确保为新站点正确设置了安全基本 URL 和非安全基本 URL。

# perl - 如何让 perl 解释一个表示地址的字符串变量

> ID：13871573
> 
> 赞同：5
> 
> 时间：2012-12-14T01:53:53.693
> 
> 标签：perl

我想用这样的 perl 脚本将输入提供给 C 程序 `./cprogram $(perl -e 'print "\xab\xcd\xef";')`。

但是，必须从文件中读取字符串。所以我得到这样的东西： `./cprogram $(perl -e 'open FILE, "<myfile.txt"; $file_contents = do { local $/; <FILE> }; print $file_contents'`。但是，现在 perl 将 string 解释为 string `"\xab\xcd\xef"`，我希望它像第一个示例一样将其解释为字节序列。

如何做到这一点？它必须在没有 File::Slurp 的服务器上运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T02:17:40.130

在第一种情况下，您将三个字节`AB CD EF`（由字符串文字产生`"\xAB\xCD\xEF"`）传递给`print`.

在第二种情况下，您必须将除这三个字节之外的其他内容传递给`print`. 我怀疑您将十二个字符串传递`\xAB\xCD\xEF`给`print`.

所以你的问题变成了：如何将十二个字符的字符串`\xAB\xCD\xEF`转换为三个字节`AB CD EF`。好吧，您需要某种解析器，例如

```
s/\\x([0-9a-fA-F][0-9a-fA-F])|\\([^x])|([^\\]+)/
   $1 ? chr(hex($1)) : $2 ? $2 : $3
/eg 
```

它在这里起作用：

```
$ perl -e'print "\\xAB\\xCD\\xEF";' >file

$ echo -n "$( perl -0777pe'
     s{\\x([0-9a-fA-F][0-9a-fA-F])|\\([^x])|([^\\]+)}{
        $1 ? chr(hex($1)) : $2 // $3
     }eg;
  ' file )" | od -t x1
0000000 ab cd ef
0000003 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:32:58.820

使用 bash 技巧：

```
perl -e "$(echo "print \"$(cat input)"\")" 
```

对于您的示例，它变为：

```
./cprogram "$(perl -e "$(echo "print \"$(cat myfile.txt)"\")")" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T03:29:16.417

Perl 的 eval 是不是太邪恶了？如果没有，结束于`print eval("\"$file_contents\"");`

或者您可以使用 Perl 提前准备文件吗？EG`print FILE "\xAB\xCD\xED";`然后使用您现有的代码读取生成的文件。

# python - 将python列表拆分为多个列表

> ID：13871575
> 
> 赞同：1
> 
> 时间：2012-12-14T01:54:16.737
> 
> 标签：python

例如，如果我有一个类似的列表：

`one = [1,2,3]`

我可以使用什么函数或方法将每个元素拆分为自己的单独列表，例如：

`one = [1]`

`RANDOM_DYNAMIC_NAME = [2]`

`RANDOM_DYNAMIC_NAME_AGAIN = [3]`

并且在任何给定时间，调用的**未拆分**列表`one`可能有超过 1 个元素，它是动态的，并且这个算法对于我作为自给作业编码的刽子手游戏是必需的。

需要该算法来完成此示例目的：

`pick a word: mississippi`

`guess a letter: s`

`['_','_','s','s','_','s','s','_','_','_','_']`

这是我的代码：

[http://pastebin.com/gcCZv67D](http://pastebin.com/gcCZv67D)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T02:10:47.410

查看您的代码，如果您要解决的部分是第 24-26 行中的注释，那么您绝对不需要为此动态创建变量，实际上我什至无法想象它们如何帮你。

你有这个：

```
enum = [i for i,x in enumerate(letterlist) if x == word] 
```

你的变量的名称非常令人困惑——所谓的东西`word`是猜测的字母，而你有一个不同的变量`letterguess`是别的东西，然后一个变量叫做`letter`这就是整个词……但我想我明白了你的目标。

`enum`是`word`within的所有索引的列表`letterlist`。例如，如果`letterlist`is`'letter'`和`word`is `t`，它将是`[2, 3]`。

然后你这样做：

```
bracketstrip = (str(w) for w in enum) 
```

所以现在`bracketstrip`是`['2', '3']`。我不确定你为什么想要那个。

```
z = int(''.join(bracketstrip)) 
```

并且`''.join(bracketstrip)`是`'23'`，所以`z`是`23`。

```
letterguess[z] = word 
```

现在你得到一个`IndexError`, 因为你试图设置`letterguess[23]`而不是设置`letterguess[2]`and `letterguess[3]`。

这是我认为您想要替换的内容：

```
enum = [i for i,x in enumerate(letterlist) if x == word]
for i in enum:
    letterguess[i] = word 
```

关于代码其他部分的一些提示：

你有几个地方可以做这样的事情：

```
letterlist = []
for eachcharacter in letter:
  letterlist.append(eachcharacter) 
```

这与`letterlist = list(letter)`. 但实际上，您根本不需要该列表。你唯一能做的就是`for i, x in enumerate(letterlist)`，而且你一开始就可以做同样的事情`letter`。你通常会让事情变得比你必须做的要困难得多。确保您真正理解为什么要编写每一行代码。

“因为我无法让它以任何其他方式工作”不是一个原因——<em>你想开始工作是什么？为什么你认为你需要一个`list`字母？没有人可以同时将所有这些决定都记在脑海中。您拥有的技能越多，您的代码就越明显以至于不需要注释，但您永远不会到达不需要任何注释的地步。当您刚开始时，每次您弄清楚如何做某事时，添加一条评论，提醒自己您正在尝试做什么，以及为什么它有效。您以后可以随时删除评论；你永远无法收回不是你写的评论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T01:58:20.850

对于问题一，只需列出理解即可。它将每个元素作为单独的列表返回

```
[ [x,] for x in one ] 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-14T01:59:31.970

至于您的问题的字面答案，这就是您的做法，尽管我无法想象您为什么要这样做。通常，动态变量名称设计不佳。您可能只需要一个列表或列表列表。

```
import random

for x in one:
    name = 'x' + str(random.getrandbits(10))
    globals()[name] = [x] 
```

# c# - 将 ASCII 转换为二进制

> ID：13871577
> 
> 赞同：0
> 
> 时间：2012-12-14T01:54:38.413
> 
> 标签：c#, string, ascii

我需要 c# 上的转换代码将 ASCII 转换为二进制..

我正在串口上做一个项目，我需要以十六进制显示接收到的数据。我已将接收到的数据声明为字符串。我使用了这段代码：

```
public static byte[] ConvertToBinary(string Rxstring)
        {
            System.Text.ASCIIEncoding encoding = new System.Text.ASCIIEncoding();
            return encoding.GetBytes(Rxstring);
        } 
```

p/s：Rxstring 是我为接收到的数据声明的字符串变量。

当在串口测试时，当我发送（例如：#41）并且我的显示器也必须显示#41。但在我的显示器上，它显示'A'。它的结果不是我想要的。我认为它正在以 ASCII 格式读取接收到的数据。上面的代码似乎不适用于转换吗？

谢谢！=)

# c# - c# linq where 条件 if

> ID：13871583
> 
> 赞同：2
> 
> 时间：2012-12-14T01:55:31.130
> 
> 标签：c#, .net, sql, sql-server, linq

我有一些我正在尝试重构的 linq 代码，因为它不是很好：

基本上，我想知道是否有更好的方法来执行以下操作：

```
if (!string.IsNullOrWhiteSpace(_filter.AssignedTo)
{
var query = from ticket in dataClassesDataContext.TicketsIssues
            where ticket.ClosedDate == null 
            && cUser.GetUserNameUsingGUID(ticket.AssignTicketToUser) == _filter.AssignedTo                                                   
            select new
            {
                Priority = ticket.TicketPriority.TicketPriorityName,
                Description = ticket.Description.Replace("\n", ", "),
            };
}
else
{
var query = from ticket in dataClassesDataContext.TicketsIssues
            where ticket.ClosedDate == null 
            select new
            {
                Priority = ticket.TicketPriority.TicketPriorityName,
                Description = ticket.Description.Replace("\n", ", "),
            };
} 
```

除了 where 子句检查 AssignTicketToUser 之外，它们都是相同的。

我希望有更好的方法来避免使用 if else 语句？我有一些这样的代码块，不想大量重复代码！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T02:02:19.443

```
var query = from ticket in dataClassesDataContext.TicketsIssues
            where ticket.ClosedDate == null 
            && (string.IsNullOrWhiteSpace(_filter.AssignedTo) ? true : cUser.GetUserNameUsingGUID(ticket.AssignTicketToUser) == _filter.AssignedTo)                                                   
            select new
            {
                Priority = ticket.TicketPriority.TicketPriorityName,
                Description = ticket.Description.Replace("\n", ", "),
            }; 
```

您可以完全摆脱 if-else 语句。将 if 条件转移到第二个 where 子句，并删除 !。第二个 where 子句成为三元运算符。

如果条件为真，即 _filter.AssignedTo 为 null，则不要通过返回 true 来测试 _filter.AssignedTo。如果它不为 null 或为空，则继续执行原始 else 块中的子句。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T02:02:01.623

一种方法可能是：

```
var query = from ticket in dataClassesDataContext.TicketsIssues
            where ticket.ClosedDate == null 
            select new
            {
                Priority = ticket.TicketPriority.TicketPriorityName,
                Description = ticket.Description.Replace("\n", ", "),
            };

if (!string.IsNullOrWhiteSpace(_filter.AssignedTo)
    query = query.Where(w => cUser.GetUserNameUsingGUID(w.AssignTicketToUser) == _filter.AssignedTo)); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T02:42:06.573

看看`PredicateBuilder` [C# In a Nutshell 中的实现](http://www.albahari.com/nutshell/predicatebuilder.aspx)，该`And` 方法应该在这里以更通用的方式解决您的问题，并帮助建立对 LINQ 和表达式树的理解。你最终会得到类似的东西：

```
var query = from ticket in dataClassesDataContext.TicketsIssues
            where ticket.ClosedDate == null
            select new
            {
                Priority = ticket.TicketPriority.TicketPriorityName,
                Description = ticket.Description.Replace("\n", ", "),
            };

if (!string.IsNullOrWhiteSpace(_filter.AssignedTo))
{
     query = query.And(ticket => cUser.GetUserNameUsingGUID(ticket.AssignTicketToUser) == _filter.AssignedTo);
} 
```

# javascript - 有没有办法阻止额外的 Javascript 在 window.history.forward 之后运行？

> ID：13871587
> 
> 赞同：0
> 
> 时间：2012-12-14T01:55:38.033
> 
> 标签：javascript, jquery

我有一个 JQuery 文件，该文件在加载页面时被加载。第一行是：

```
window.history.forward(1); 
```

在文件的后面，如果 forward 命令要阻止页面加载（阻止后退按钮加载），我想禁用 Ajax 调用。

在这种情况下，Ajax 调用实际上会失败（Chrome 会报告错误，IE 和 Firefox 不会，但它们会进行回调）。有没有办法让我获得“转发”呼叫的状态并用它来控制其他呼叫？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:02:25.363

您可以检测转发呼叫是否执行任何操作的一种方法是在之前/之后检查 URL。

换句话说，您可以执行以下操作：

```
var currentUrl = window.location;
window.setTimeout(function(){
    if (window.location != currentUrl) return;
    // The rest of your code that you want to go off if the forward didn't work
}, 1000 *2); // wait 2 seconds 
```

# c++ - if 语句和分段错误 - C++

> ID：13871589
> 
> 赞同：2
> 
> 时间：2012-12-14T01:55:52.840
> 
> 标签：c++, if-statement, segmentation-fault, treenode

我有一个 if/else if 语句，如下所示：

```
if(myNode->left->is_red){
    //CODE TO EXECUTE
}               
else if(myNode->right->is_red){
    //CODE TO EXECUTE
} 
```

我正在检查的条件是是否设置了每个节点中的某些数据字段。但是，问题是，如果我访问 NULL 指针并尝试访问其成员（不存在），那么我会遇到分段错误问题。但是，如果我在 if 之前执行 if 语句，并在 else if 之前再次执行以检查节点是否为 NULL，那么我将失去使用 if/else if 语句的能力。

有什么办法可以解决这两个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T01:58:13.440

检查 if 语句中的指针是否不为空：

```
if(myNode != NULL && myNode->left != NULL && myNode->left->is_red){
{ 
   // code goes here
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T01:58:42.813

我假设问题是`left`和/或`right`为NULL，因此您的段错误？

如果是这样，则使用 AND。

例如：

```
if((myNode->left != NULL) && myNode->left->is_red){
    //CODE TO EXECUTE
}               
else if((myNode->right != NULL) && myNode->right->is_red){
    //CODE TO EXECUTE
} 
```

这使用[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)：虽然`myNode->left->is_red`and`myNode->right->is_red`仍然在`if`条件中，但如果`myNode->left`是`NULL`（或`myNode->right`分别），它们将不会被评估并且你不会有你的段错误。

# c++ - 速度增加

> ID：13871591
> 
> 赞同：2
> 
> 时间：2012-12-14T01:56:13.993
> 
> 标签：c++, sfml

当我移动我的对象时，它的开始非常缓慢，然后开始加速。我想要一个恒定的速度，但我不知道出了什么问题

```
 const float m_Walkspeed = 0.1;

    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Left) && m_position.x > 0)
    {
        m_velocity.x -= m_Walkspeed;
        CurrentAnimation = &AnimationLeft;
    }

    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Right) && m_position.x < 800) 
    {
        m_velocity.x += m_Walkspeed;
        CurrentAnimation = &AnimationRight;
    }

    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Up) && m_position.y > 0) 
    {
        m_velocity.y -= m_Walkspeed;
        CurrentAnimation = &AnimationUp;
    }

    if (sf::Keyboard::isKeyPressed(sf::Keyboard::Down) && m_position.y < 560) 
    {
        m_velocity.y += m_Walkspeed;
        CurrentAnimation = &AnimationDown;
    }

    m_position += m_velocity;
    m_velocity = sf::Vector2f(0, 0);
    CurrentAnimation->setPosition(m_position);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T08:49:52.330

假设您在每一帧调用此代码，则必须考虑*自上一帧以来的时间*：

```
m_velocity += timeSinceLastFrame;
m_position += m_velocity; 
```

# javascript - 如何扩展 angularjs 中的默认指令？

> ID：13871592
> 
> 赞同：1
> 
> 时间：2012-12-14T01:56:28.287
> 
> 标签：javascript, angularjs

我希望制作自己的网页元素 - 例如，这是一个简单的图形元素：

```
var app = angular.module('myApp', []);

app.directive('gx', function(){
  return {
    restrict: 'E',
    transclude: true,
    replace: true,
    scope: {w: '@',
            h: '@'},
    template: '<svg class="gx" ng-transclude></svg>',

    controller: function ($scope, $element) {
      var children = $scope.children = [];
      this.addChild = function (c) {
        children.push(c);
      };
    },
    link: function (scope, element, attrs, gxCtrl){
      if (gxCtrl) gxCtrl.addChild(scope);
      scope.$watch('w+h', function(val){
        var w = scope.w||"100%",
            h = scope.h||"100%";
        $(element).attr("height", h).attr("width", w);
      });
    }
  };
}); 
```

当我在我的页面中声明它时，我必须使用

```
<html ng-app="myApp"> 
```

是否可以将其安装为默认指令，以便我可以仅包含 .js 文件并开始使用 html 元素而无需指定“myApp”名称 - 与所有`ng`指令相同？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T02:14:01.287

AngularJS 的核心特性之一是模块化。您可以在单独的文件中创建**指令**模块并向其添加指令。

```
angular.module('directives',[])
.directive('gx', function(){
  return {/** directive definition object **/ };
}); 
```

将模块定义为`directives.js`并将您的应用程序定义为`app.js`

```
<script src="directives.js"></script>
<script src="app.js"></script> 
```

然后将**指令**模块注入您的应用程序

```
var app = angular.module('myApp', ['directives']); 
```

示例：[http ://plnkr.co/edit/OgNr4Qx3SBbWwcH9NSfu?p=preview](http://plnkr.co/edit/OgNr4Qx3SBbWwcH9NSfu?p=preview)

# .net - .net 相当于 MSHTML 对象库？

> ID：13871594
> 
> 赞同：0
> 
> 时间：2012-12-14T01:56:35.430
> 
> 标签：.net, vb.net

现在，我正在使用 MSHTML 通过 AX Web 浏览器控件从 NAME/ID 标签中提取数据，它可以很好地达到预期目的。我知道 .NET 浏览器应该是要走的路，但我找不到它允许我按名称搜索元素的位置，如下所示：

```
.getelementsbyname("ELEMENTNAME").item(#) 
```

并非我拉出的所有字段都有 ID 标签，也不是所有字段都有除 html 表格标签之外的任何标签。我只是想知道是否有与.net 浏览器兼容的类似于 MSHTML 的.net 引用？同样，使用 .net 浏览器有哪些优势？还是这种事情最终会成为个人喜好？感谢您的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T14:01:49.040

你看过[Html Agility Pack](http://htmlagilitypack.codeplex.com/)吗？您不需要浏览器控件即可从网页中提取元素。即使您确实需要一个浏览器控件用于其他目的，您也可以拉取它的 HTML 属性（或其他）并将其提供给这个敏捷包。我自己没用过，但是这里已经推荐过很多次了，所以一定好用可以试试。

# php - PHP图像根据高度调整大小

> ID：13871595
> 
> 赞同：0
> 
> 时间：2012-12-14T01:56:35.977
> 
> 标签：php, image, math, image-resizing, image-size

嘿，我想弄清楚如何调整高度大于宽度的图像的大小。需要显示图像的区域的正常宽度和高度为：

```
width  = 1000px
height = 700px 
```

我需要什么类型的数学才能将其调整到适当的宽度/高度而不用拧紧它？

测试图像大小为：

```
 width  = 1451
 height = 2200 
```

我正在考虑这样做：

```
(700/org.height) 
```

但这并没有得出正确的数字**462**。

在 Photoshop 中，将高度更改为**700**会产生宽度值**462**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:15:26.337

所以你想缩放你的图像，使它尽可能大地适应 1000x700 的正方形而不拉伸它？你可以这样做：

```
$availH = 700;
$availW = 1000;
$imageH = 2200;
$imageW = 1451;

// you know you want to limit the height to 700
$newH = $availH;

// figure out what the ratio was that you adjusted (will equal aprox 0.3181)
$ratio = $availH / $imageH;

// now that you have the $ratio you can apply that to the width (will equal 462)
$newW = round(imageW * $ratio); 
```

现在你有了 $newW 和 $newH ，它们是正确缩放图像的新尺寸。你当然可以把它浓缩下来，但我已经把它写出来了，所以每一步都更清楚。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:03:08.893

调整大小时保持纵横比的公式是

```
original height / original width x new width = new height 
```

资料来源：[http ://andrew.hedges.name/experiments/aspect_ratio/](http://andrew.hedges.name/experiments/aspect_ratio/)

但是您想将其切换为我认为的以下内容：

```
original width / original height x new height = new width 
```

# c# - c# - 单击另一个按钮时隐藏按钮文本

> ID：13871601
> 
> 赞同：1
> 
> 时间：2012-12-14T01:57:33.180
> 
> 标签：c#, button, tags

我正在尝试创建一个包含 12 个按钮的匹配游戏。该程序从一个包含 12 个字符串的数组中分配一个随机字符串。当按钮被按下时，标签被传递给 button.text。例如，我现在想要完成的是。如果我按下“按钮 1”，它的文本将变为“Chevy Camaro”。如果我接下来按下“按钮 4”，我希望 button1.text 恢复为“按钮 1”，而不是“Chevy Camaro”的标签值。并且以同样的方式，由于按下“按钮 4”，我希望它显示标签.....

每个按钮都有与其相似的代码，除了按钮#，它当然会根据正在使用的按钮而变化。

我不确定如何声明，如果按钮是当前活动项，则显示它的标记属性，否则，恢复。

```
private void button4_Click(object sender, EventArgs e)     
{
    button4.Text = button4.Tag.ToString();

    buttoncount++;
    label2.Text = buttoncount.ToString();
} 
```

提前感谢您的所有帮助。慢慢学这些东西.... =p

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:30:02.253

您可以跟踪单击的最后一个按钮：

```
public partial class Form1 : Form
{
    Button lastButton = null;
    int buttoncount;

    public Form1()
    {
        InitializeComponent();
        button1.Tag = "Ford Mustang";
        button2.Tag = "Ford Focus";
        button3.Tag = "Chevy Malibu";
        button4.Tag = "Chevy Camaro";
        button1.Click += button_Click;
        button2.Click += button_Click;
        button3.Click += button_Click;
        button4.Click += button_Click;
        //etc...
    }

    void button_Click(object sender, EventArgs e)
    {
        if (lastButton != null)
        {
            SwitchTagWithText();
        }

        lastButton = sender as Button;
        SwitchTagWithText();

        buttoncount++;
        label2.Text = buttoncount.ToString();
    }

    void SwitchTagWithText()
    {
        string text = lastButton.Text;
        lastButton.Text = lastButton.Tag.ToString();
        lastButton.Tag = text;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:33:49.773

您可以使用外观设置为按钮的 RadioButton 控件吗？用这些替换所有按钮，将它们放在 GroupBox 中，并且可以自动处理单击时外观的“还原”。要更新文本，可以使用如下所示的简单事件处理程序；

```
 private void MakeButton()
    {
        RadioButton rb = new RadioButton
        {
            Appearance = Appearance.Button,
            Tag = "Chevy Camero"
        };
        rb.CheckedChanged += rb_CheckedChanged;
    }

    private void rb_CheckedChanged(object sender, EventArgs e)
    {
        RadioButton clickedButton = sender as RadioButton;
        string currentText = clickedButton.Text;
        clickedButton.Text = clickedButton.Tag.ToString();
        clickedButton.Tag = currentText;
    } 
```

# php - 将变量传递给 jQuery 模态表单

> ID：13871606
> 
> 赞同：0
> 
> 时间：2012-12-14T01:57:58.217
> 
> 标签：php, jquery, modal-dialog

这可能很简单，也可能是不可能的，但无论哪种方式，我都想通过 jquery 将表行名称传递给模式对话框表单。

```
$('.activate_modal').click(function(){

            var rowid = $(this).attr('name');

            $( "#dialog-form" ).dialog( "open" );

        }); 
```

我正在通过 PHP 动态创建行，单击时会打开一个 jquery 模式窗口，我需要将一个 id（var rowid）传递给表单，以便它知道哪些行正在调用该函数。这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:00:32.960

您可以为此使用 jQuery 的`data()`方法。

IE

```
var rowid = $(this).attr('name');
$( "#dialog-form" ).data('rowID', rowid); // set the data to be passed
$( "#dialog-form" ).dialog( "open" ); 
```

当您需要访问该值时，您可以像这样访问它：

```
var passedInRowId = $( "#dialog-form" ).data('rowID'); // get the data that was passed 
```

* * *

用于填写弹出窗口内显示的表单字段。

var rowid = $(this).attr('name'); $( "#dialog-form" ).data('rowID', rowid); // 设置要传递的数据

// 在显示对话框之前在此处填写 // 注意：如果这是唯一需要 rowid 的地方，则根本不需要使用 data() $('#yourformfield').val(rowid);

$("#dialog-form").dialog("open");

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:28:11.330

这应该更有帮助。

```
<?php $rowID = /* Do DB Query */; $rowMessage = /* Do DB Query */; ?>

<span class="activate_modal" data-rowID="<?php echo $rowID; ?>">Activate</span>

<div id="<?php echo $rowID; ?>" class="modal"><?php $rowMessage; ?></div>

<script>
    $(function(){
        $('.activate_modal').click(function(){
            var rowid = $(this).data('rowID');
            $('#'+rowid+'.modal').dialog('open');
        });
    });    
</script> 
```

# php - 来自后台刷新的动态数据

> ID：13871607
> 
> 赞同：0
> 
> 时间：2012-12-14T01:57:57.950
> 
> 标签：php, javascript, jquery, ajax, refresh

有没有办法对我已经提供的一些 php 脚本进行后台刷新.. 我只希望这些脚本每 5 秒刷新一次，以便我能够记录/查看动态数据..

我在我网站的标题上使用它：

```
 sample url http://www.example.com/scripts

   setTimeout('window.location="/scripts";',5000); 
```

但是刷新后它会转到 url..我只是希望它被刷新（更新）而不重定向到它.. 有可能吗？一些示例？..

此致..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:13:58.607

**用jQuery**试试这个：

```
$('body').load( url,[data],[callback] ); 
```

[在docs.jquery.com/Ajax/load](http://docs.jquery.com/Ajax/load#urldatacallback)上阅读更多内容

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T02:07:32.127

使用它的最佳方法是使用 AJAX 并拥有一个可以更改这些变量的 php 文件。这样您就不必刷新页面，只需向服务器请求更新即可。在`completed`回调中，根据服务器的响应更改您必须在客户端上更改的内容。网上有很多 AJAX 教程。

# mingw - 使用 MinGW32 (Win32) 交叉编译 libosip2 时出错

> ID：13871609
> 
> 赞同：0
> 
> 时间：2012-12-14T01:58:12.430
> 
> 标签：mingw, cross-compiling

对不起，我英语说得不好。

我做到了；

1.  Windows7(64位) + Qt(C++) + MinGW32
2.  在 MSYS 中编译 libosip2-3.6.0
3.  # LIBS=-lpthread ./configure --enable-mt
4.  修改 internal.h ：在顶部附加“#define HAVE_PTHREAD_WIN32”
5.  # 制作 && 制作安装
6.  编译 libeXosip2-3.6.0

我让示例代码参考 libeXosip2-3.6.0 的“sip_reg.c”

但是，多线程不起作用..（错误：“osip_thread_create() 未声明。”）有人可以帮忙吗？

*   [http://ftp.gnu.org/gnu/osip/libosip2-3.6.0.tar.gz](http://ftp.gnu.org/gnu/osip/libosip2-3.6.0.tar.gz)
*   [http://download.savannah.gnu.org/releases/exosip/libeXosip2-3.6.0.tar.gz](http://download.savannah.gnu.org/releases/exosip/libeXosip2-3.6.0.tar.gz)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T19:49:24.830

我决定使用 libosip2-4.0.0 和 libeXosip2-4.0.0

我做到了；

```
1.安装pthreads-w32-2-9-1-release.tar.gz
$ 清理 GC
- 并复制到 c:\develop\pthreads-w32

2.在MSYS中用MinGW32编译libosip2-4.0.0
$ ./configure LDFLAGS="-L/c/develop/pthreads-w32" CPPFLAGS="-I/c/develop/pthreads-w32" LIBS="-lpthreadGC2"
- 修改 include/osip2/internal.h：在顶部附加“#define HAVE_PTHREAD_WIN32”
- 修改 src/osip2/osip_time.c : 像这样..

    #elif !defined(__PALMOS__) && 定义(WIN32)
    ……
    静态 int _osip_gettimeofday_realtime (struct timeval *tp, void *tz)
    {
        返回 gettimeofday(tp, tz);
    }

$ 制作 && 制作安装

3.在MSYS中用MinGW32编译libeXosip2-4.0.0
$ ./configure LDFLAGS="-L/c/develop/pthreads-w32" CPPFLAGS="-I/c/develop/pthreads-w32" LIBS="-lpthreadGC2"
- 修改 src/eXtl_tcp.c : 参考 http://www.utterspeech.com/article/random-fixes/1

     #ifdef WIN32
    -#include <Mstcpip.h>
    +/* MinGW 修复：替换 Mstcpip.h */
    +
    +struct tcp_keepalive {
    + 超长开关；
    + 超长保活时间；
    + 超长保活间隔；
    +};
    +
    +#define SIO_KEEPALIVE_VALS _WSAIOW(IOC_VENDOR,4)
    +
     ＃万一

- 修改 src/eXtl_tcp.c : 参考 http://www.utterspeech.com/article/random-fixes/1

     #ifdef WIN32
    -#include <Mstcpip.h>
    +/* MinGW 修复：#include <Mstcpip.h>*/
     #include <wincrypt.h>
     ＃万一

$ 制作 && 制作安装

```

*   [http://ftp.gnu.org/gnu/osip/libosip2-4.0.0.tar.gz](http://ftp.gnu.org/gnu/osip/libosip2-4.0.0.tar.gz)
*   [http://download.savannah.gnu.org/releases/exosip/libeXosip2-4.0.0.tar.gz](http://download.savannah.gnu.org/releases/exosip/libeXosip2-4.0.0.tar.gz)

# google-app-engine - Google App Engine SSL 和唯一 IP

> ID：13871611
> 
> 赞同：0
> 
> 时间：2012-12-14T01:58:31.143
> 
> 标签：google-app-engine, ssl

我的域由 Dreamhost 托管。我的应用引擎应用由自定义域提供服务，但它是一个子域：app.example.com。我的应用程序没有被浏览器访问，但请求是从 iOS 应用程序发出的。

现在，我已经从 Dreamhost 购买了一个基本的 SSL 证书，专门用于子域 app.example.com。

接下来，我已将必要的 crt 和 pem 文件上传到 Google 域设置，一切顺利。域设置确实显示上传成功，并且我已将 CNAME 分配给 ghs.googlehosted.com。

在这一点上，我不确定该怎么做。我是否期望 SSL 在这一点上神奇地启用？因为它看起来仍然不像以前那样。

让我困惑的是这个关于 SNI 和独特 IP 的讨论。Dreamhost 说，除了 GAE，我需要一个唯一的 IP 来托管我的证书。我不确定这是否只是 Dreamhost 的事情，或者我真的需要它。如果是这样，我是否需要一个与主域分开的子域的唯一 IP？

或者这就是 SNI 所关心的？此时我到底应该做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:24:47.127

您应该了解什么是 SNI：[http ://en.wikipedia.org/wiki/Server_Name_Indication](http://en.wikipedia.org/wiki/Server_Name_Indication)

然后，您应该遵循[自定义域上 SSL](https://developers.google.com/appengine/docs/ssl)的配置文档。

顺便说一句，iOS 因为 v4 支持 SNI，所以你应该没问题。

更新：如果你想要唯一的 IP，那么你应该使用 VIP。但这需要额外费用，并且在您的情况下不是必需的，因为 iOS 支持 SNI。只有一些旧版浏览器才需要 VIP。

# r - 使用 R 中的条件替换列中的值

> ID：13871614
> 
> 赞同：60
> 
> 时间：2012-12-14T01:58:37.000
> 
> 标签：r, dataframe, conditional-statements

我有一个非常基本的`R`问题，但我很难找到正确的答案。我有一个看起来像这样的数据框：

```
 ind<-rep(1:4,each=24)
 hour<-rep(seq(0,23,by=1),4)
 depth<-runif(length(ind),1,50)

 df<-data.frame(cbind(species,ind,hour,depth))
 df$depth<-as.numeric(df$depth) 
```

我希望它选择并`depth < 10`用零替换所有行（例如），但我想保留与这些行相关联的所有信息以及数据框的原始维度。

我尝试了以下方法，但这不起作用。

`df[df$depth<10]<-0`

有什么建议么？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-12-14T02:08:00.210

```
# reassign depth values under 10 to zero
df$depth[df$depth<10] <- 0 
```

（对于作为因子的列，您只能分配作为因子级别的值。如果您想分配当前不是因子级别的值，则需要先创建附加级别：

```
levels(df$species) <- c(levels(df$species), "unknown") 
df$species[df$depth<10]  <- "unknown" 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2020-03-15T03:02:32.507

我从谷歌搜索来到这里，因为我的其他代码是“整洁”的，所以将“整洁”的方式留给其他可能觉得有用的人

```
library(dplyr)
iris %>% 
  mutate(Species = ifelse(as.character(Species) == "virginica", "newValue", as.character(Species))) 
```

# c++ - C++ 中的 WINMAIN 和 main()（扩展）

> ID：13871617
> 
> 赞同：72
> 
> 时间：2012-12-14T01:58:51.457
> 
> 标签：c++, windows, main, winmain

对，我看过这篇文章：[C++ 中 WinMain、main 和 DllMain 的区别](https://stackoverflow.com/questions/416739/difference-between-winmain-main-and-dllmain-in-c)

我现在知道它`WINMAIN`用于窗口应用程序和`main()`控制台。但是阅读这篇文章并不能真正告诉我为什么有什么不同。

我的意思是分离不同的电源功能以启动程序有什么意义？是因为性能问题吗？或者它是什么？

* * *

## 回答 #1

> 赞同：200
> 
> 时间：2012-12-14T03:25:39.677

# 关于功能。

C 和 C++ 标准要求任何程序（对于“托管”C 或 C++ 实现）具有称为 的函数`main`，该函数用作程序的**启动函数**。**在对非局部静态变量进行零初始化**之后调用该`main`函数，并且可能但不一定（！，C++11 §3.6.2/4）此调用发生在此类变量的**动态初始化之后。**它可以具有以下签名之一：

 ****```
int main()
int main( int argc, char* argv[] ) 
```

加上可能的实现定义的签名（C++11 §3.6.1/2），除了结果类型必须是`int`.

由于 C++ 中唯一的此类函数`main`具有**默认结果**值，即 0。如果`main`返回则在普通函数返回之后`exit`以`main`结果值作为参数调用。该标准定义了三个保证可以使用的值：0（表示成功）、**`EXIT_SUCCESS`**（也表示成功，通常定义为 0）和**`EXIT_FAILURE`**（表示失败），其中两个命名常量由标头定义，该`<stdlib.h>`标头还声明`exit`功能。

这些`main`参数旨在表示用于启动进程的命令的**命令行参数。**`argc`（参数计数）是`argv`（参数值）数组中的项目数。除了这些项目`argv[argc]`，保证为 0。如果`argc`> 0 - 不能保证！– then`argv[0]`保证要么是指向空字符串的指针，要么是指向“用于调用程序的名称”的指针。此名称可能包含路径，也可能是可执行文件的名称。

在 *nix 中使用`main`参数获取命令行参数可以正常工作，因为 C 和 C++ 起源于 *nix。但是，*事实上*`main`的 Windows参数编码标准是**Windows ANSI**，它不支持一般的 Windows 文件名（例如，对于挪威语 Windows 安装，文件名带有希腊或西里尔字符）。因此，Microsoft 选择使用 Windows 特定的启动函数来扩展 C 和 C++ 语言，该函数具有编码为**UTF-16****`wmain`**的宽字符参数，可以表示任何文件名。

 **该`wmain`函数可以具有[以下签名之一](http://msdn.microsoft.com/en-us/library/6wd819wh%28v=VS.80%29.aspx)，对应于以下的标准签名`main`：

```
int wmain()
int wmain( int argc, wchar_t* argv[] ) 
```

再加上一些不是特别有用的。

即，`wmain`是基于宽字符的直接替换`main`.

在1980 年代初期，在 Windows 中引入了 based 函数：**`WinMain`** `char`

```
int CALLBACK WinMain(
    HINSTANCE   hInstance,
    HINSTANCE   hPrevInstance,
    LPSTR       lpCmdLine,
    int         nCmdShow
    ); 
```

其中`CALLBACK`,`HINSTANCE`和`LPSTR`由`<windows.h>`标头定义 ( [`LPSTR`is just`char*`](https://stackoverflow.com/questions/11945990/difference-between-char-and-lpstr-in-windows) )。

论据：

*   参数值是可执行文件的内存映像的`hInstance`基地址，主要用于从可执行文件中加载资源，也可以从`GetModuleHandle`API函数中获取，

*   `hPrevInstance`参数始终为 0 ，

*   `lpCmdLine`参数也可以从API 函数中获取`GetCommandLine`，加上一些奇怪的逻辑来跳过命令行的程序名称部分，以及

*   `nCmdShow`参数值也可以从API 函数中获取`GetStartupInfo`，但在现代 Windows 中，第一次创建顶级窗口会自动执行此操作，因此它没有任何实际用途。

因此，该`WinMain`函数具有与 standard 相同的缺点`main`，加上一些（特别是冗长和非标准），并且没有它自己的优点，所以它真的莫名其妙，除非可能是供应商锁定的东西。但是，使用 Microsoft 工具链，它使链接器默认使用 GUI 子系统，有些人认为这是一个优势。但是对于例如 GNU 工具链，它没有这样的效果，因此不能依赖这种效果。

based 函数是 的宽字符变体，与 standard 的宽字符变体相同：**`wWinMain`** `wchar_t``WinMain``wmain``main`

```
int WINAPI wWinMain(
    HINSTANCE   hInstance,
    HINSTANCE   hPrevInstance,
    PWSTR       lpCmdLine,
    int         nCmdShow
    ); 
```

where`WINAPI`与 相同`CALLBACK`，并且`PWSTR`很简单`wchar_t*`。

没有充分的理由使用任何非标准函数，除了最不为人知和最不支持的函数，即`wmain`，然后只是为了方便：这避免了使用`GetCommandLine`和`CommandLineToArgvW`API 函数来获取 UTF-16 编码的参数。

为避免 Microsoft 链接器起作用（GNU 工具链的链接器不会），只需将`LINK`环境变量设置为`/entry:mainCRTStartup`，或直接指定该选项。这是 Microsoft 运行时库入口点函数，经过一些初始化后，它会调用标准`main`函数。其他启动函数有相应的入口点函数，以相同的系统方式命名。

* * *

# `main`使用标准函数的示例。

常用源代码：

    *foo.cpp*

```
#undef UNICODE
#define UNICODE
#include <windows.h>

int main()
{
    MessageBox( 0, L"Press OK", L"Hi", MB_SETFOREGROUND );
} 
```

在下面的示例中（首先使用 GNU 工具链，然后使用 Microsoft 工具链），该程序首先构建为**控制台子系统程序**，然后构建为**GUI 子系统程序**。控制台子系统程序，或简称**控制台程序**，是需要控制台窗口的程序。这是我使用过的所有 Windows 链接器的默认子系统（当然不是很多），可能适用于所有 Windows 链接器时期。

对于控制台程序，如果需要，Windows 会自动创建一个**控制台窗口。**任何 Windows 进程，无论子系统如何，都可以有一个关联的控制台窗口，并且最多一个。此外，Windows 命令解释器等待控制台程序程序完成，以便程序的文本显示完成。

相反，GUI 子系统程序是不需要控制台窗口的程序。命令解释器不等待 GUI 子系统程序，批处理文件除外。对于这两种程序，避免完成等待的一种方法是使用`start`命令。从 GUI 子系统程序显示控制台窗口文本的一种方法是重定向其标准输出流。另一种方法是从程序代码显式创建控制台窗口。

程序的子系统编码在可执行文件的标头中。Windows 资源管理器不显示它（除了在 Windows 9x 中可以“快速查看”一个可执行文件，它提供的信息与 Microsoft 的`dumpbin`工具现在提供的信息几乎相同）。没有相应的 C++ 概念。

## `main`使用 GNU 工具链。

```
[D:\开发\测试]
> *g++ foo.cpp*

[D:\开发\测试]
> *objdump -x a.exe | 查找 /i “子系统”*
主要子系统版本 4
次要子系统版本 0
子系统 00000003 (Windows CUI)
[544](sec -1)(fl 0x00)(ty 0)(scl 2) (nx 0) 0x00000004 __major_subsystem_version__
[612](sec -1)(fl 0x00)(ty 0)(scl 2) (nx 0) 0x00000003 __subsystem__
[636](sec -1)(fl 0x00)(ty 0)(scl 2) (nx 0) 0x00000000 __minor_subsystem_version__

[D:\开发\测试]
> *g++ foo.cpp -mwindows*

[D:\开发\测试]
> *objdump -x a.exe | 查找 /i “子系统”*
主要子系统版本 4
次要子系统版本 0
子系统 00000002 (Windows GUI)
[544](sec -1)(fl 0x00)(ty 0)(scl 2) (nx 0) 0x00000004 __major_subsystem_version__
[612](sec -1)(fl 0x00)(ty 0)(scl 2) (nx 0) 0x00000002 __subsystem__
[636](sec -1)(fl 0x00)(ty 0)(scl 2) (nx 0) 0x00000000 __minor_subsystem_version__

[D:\开发\测试]
> _

```

## `main`使用微软的工具链：

```
[D:\开发\测试]
>*设置 LINK=/entry:mainCRTStartup*

[D:\开发\测试]
> *cl foo.cpp user32.lib*
foo.cpp

[D:\开发\测试]
>*垃圾箱/headers foo.exe | 查找 /i “子系统”*
            6.00 子系统版本
               3 子系统 (Windows CUI)

[D:\开发\测试]
> *cl foo.cpp /link user32.lib /subsystem:windows*
foo.cpp

[D:\开发\测试]
>*垃圾箱/headers foo.exe | 查找 /i “子系统”*
            6.00 子系统版本
               2 子系统（Windows GUI）

[D:\开发\测试]
> _

```

* * *

# 使用微软`wmain`函数的例子。

以下主要代码对 GNU 工具链和 Microsoft 工具链演示都是通用的：

    *酒吧.cpp*

```
#undef UNICODE
#define UNICODE
#include <windows.h>

#include <string>       // std::wstring
#include <sstream>      // std::wostringstream
using namespace std;

int wmain( int argc, wchar_t* argv[] )
{
    wostringstream  text;

    text << argc - 1 << L" command line arguments:\n";
    for( int i = 1;  i < argc;  ++i )
    {
        text << "\n[" << argv[i] << "]";
    }

    MessageBox( 0, text.str().c_str(), argv[0], MB_SETFOREGROUND );
} 
```

## `wmain`使用 GNU 工具链。

GNU 工具链不支持微软的`wmain`功能：

```
[D:\开发\测试]
> *g++ bar.cpp*
d:/bin/mingw/bin/../lib/gcc/i686-pc-mingw32/4.7.1/../../../libmingw32.a(main.o):main.c:(. text.startup+0xa3)：未定义的对 `WinMain 的引用
@16'
collect2.exe：错误：ld 返回 1 退出状态

[D:\开发\测试]
> _

```

此处的链接错误消息 about`WinMain`是因为 GNU 工具链确实支持*该*功能（可能是因为很多古老的代码都使用它），并在找不到标准后将其作为最后的手段进行搜索`main`。

但是，添加一个具有`main`调用标准的模块是微不足道的`wmain`：

    *wmain_support.cpp*

```
extern int wmain( int, wchar_t** );

#undef UNICODE
#define UNICODE
#include <windows.h>    // GetCommandLine, CommandLineToArgvW, LocalFree

#include <stdlib.h>     // EXIT_FAILURE

int main()
{
    struct Args
    {
        int n;
        wchar_t** p;

        ~Args() {  if( p != 0 ) { ::LocalFree( p ); } }
        Args(): p(  ::CommandLineToArgvW( ::GetCommandLine(), &n ) ) {}
    };

    Args    args;

    if( args.p == 0 )
    {
        return EXIT_FAILURE;
    }
    return wmain( args.n, args.p );
} 
```

现在，

```
[D:\开发\测试]
> *g++ bar.cpp wmain_support.cpp*

[D:\开发\测试]
> *objdump -x a.exe | 查找 /i “子系统”*
主要子系统版本 4
次要子系统版本 0
子系统 00000003 (Windows CUI)
[13134](sec -1)(fl 0x00)(ty 0)(scl 2) (nx 0) 0x00000004 __major_subsystem_version__
[13576](sec -1)(fl 0x00)(ty 0)(scl 2) (nx 0) 0x00000003 __subsystem__
[13689](sec -1)(fl 0x00)(ty 0)(scl 2) (nx 0) 0x00000000 __minor_subsystem_version__

[D:\开发\测试]
> *g++ bar.cpp wmain_support.cpp -mwindows*

[D:\开发\测试]
> *objdump -x a.exe | 查找 /i “子系统”*
主要子系统版本 4
次要子系统版本 0
子系统 00000002 (Windows GUI)
[13134](sec -1)(fl 0x00)(ty 0)(scl 2) (nx 0) 0x00000004 __major_subsystem_version__
[13576](sec -1)(fl 0x00)(ty 0)(scl 2) (nx 0) 0x00000002 __subsystem__
[13689](sec -1)(fl 0x00)(ty 0)(scl 2) (nx 0) 0x00000000 __minor_subsystem_version__

[D:\开发\测试]
> _

```

## `wmain`与微软的工具链。

使用微软的工具链，`wmainCRTStartup`如果没有指定入口点并且存在`wmain`函数，链接器会自动推断入口点（不清楚如果标准`main`也存在会发生什么，我近年来没有检查过）：

```
[D:\开发\测试]
>*设置链接=/入口：mainCRTStartup*

[D:\开发\测试]
> *cl bar.cpp user32.lib*
酒吧.cpp
LIBCMT.lib(crt0.obj)：错误 LNK2019：未解析的外部符号 _main 在函数 ___tmainCRTStartup 中引用
bar.exe : 致命错误 LNK1120: 1 unresolved externals

[D:\开发\测试]
>*设置链接=*

[D:\开发\测试]
> *cl bar.cpp user32.lib*
酒吧.cpp

[D:\开发\测试]
> _

```

然而，对于非标准的启动函数`wmain`，最好明确指定入口点，以便非常清楚意图：

```
[D:\开发\测试]
> *cl bar.cpp /link user32.lib /entry:wmainCRTStartup*
酒吧.cpp

[D:\开发\测试]
>*垃圾箱/标题栏.exe | 查找 /i “子系统”*
            6.00 子系统版本
               3 子系统 (Windows CUI)

[D:\开发\测试]
> *cl bar.cpp /link user32.lib /entry:wmainCRTStartup /subsystem:windows*
酒吧.cpp

[D:\开发\测试]
>*垃圾箱/标题栏.exe | 查找 /i “子系统”*
            6.00 子系统版本
               2 子系统（Windows GUI）

[D:\开发\测试]
> _

```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-14T03:37:21.153

根据@RaymondChen

[WinMain 这个名字只是一个约定](https://devblogs.microsoft.com/oldnewthing/20061204-01/?p=28853)

> 尽管函数 WinMain 记录在 Platform SDK 中，但它并不是平台的真正组成部分。相反，WinMain 是用户提供的 Windows 程序入口点的常规名称。
> 
> 真正的入口点在 C 运行时库中，它初始化运行时、运行全局构造函数，然后调用您的 WinMain 函数（如果您更喜欢 Unicode 入口点，则调用 wWinMain）。

DllMain 和 WinMain 的原型本身不同。WinMain 接受命令行参数，而另一个则谈论它是如何附加到进程的。

根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/f9t8842e.aspx)

默认情况下，起始地址是 C 运行时库中的函数名。链接器根据程序的属性进行选择，如下表所示。

*   `mainCRTStartup`(or `wmainCRTStartup`) 使用 `/SUBSYSTEM:CONSOLE;`调用 main (or `wmain`)的应用程序

*   `WinMainCRTStartup`(or `wWinMainCRTStartup`) 使用 `/SUBSYSTEM:WINDOWS;`调用`WinMain`(or ) 的应用程序`wWinMain`，必须使用`__stdcall`

*   `_DllMainCRTStartup`一个DLL；调用，如果存在，则`DllMain`必须用 定义`__stdcall`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-14T02:03:31.357

标准 C 程序在启动时通过命令行传递 2 个参数：

```
int main( int argc, char** argv ) ; 
```

*   `char** argv`是一个字符串数组 ( `char*`)
*   `int argc`是`char*`argv中的数量

`WinMain`程序员必须为 windows 程序编写 的引导函数略有不同。`WinMain`采用 Win O/S 在启动时传递给程序的 4 个参数：

```
int WINAPI WinMain( HINSTANCE hInstance,    // HANDLE TO AN INSTANCE.  This is the "handle" to YOUR PROGRAM ITSELF.
                    HINSTANCE hPrevInstance,// USELESS on modern windows (totally ignore hPrevInstance)
                    LPSTR szCmdLine,        // Command line arguments.  similar to argv in standard C programs
                    int iCmdShow )          // Start window maximized, minimized, etc. 
```

有关更多信息，请参阅我的文章如何在 C中[创建基本窗口](http://bobobobo.wordpress.com/2008/01/31/how-to-create-a-basic-window-in-c/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-04-07T00:50:39.727

Windows CRT 公开了 5 个符号`mainCRTStartup`、`wmainCRTStartup`、`wWinMainCRTStartup`和。`_DllMainCRTStartup``WinMainCRTStartup`

[![在此处输入图像描述](../Images/c0ea8351e8fcb6a52903d726dc9f16fa.png)](https://i.stack.imgur.com/VG9RO.jpg)

`w`before 表示 unicode 版本，即传递给进程（并存储在 PPB 中）的命令行（命令和参数字符串）是`PEB->ProcessParameters->CommandLine`UTF-16（即`WCHAR`（**Wide** char））而不是 ASCII（UTF-8 或 ANSI，例如Windows-1252、Windows-850 等）

如果未指定`/DLL`or选项，则 MSVC 链接器选择子系统和入口点，`/SUBSYSTEM`即根据或是否存在于目标文件之一的符号表中，使入口地址成为这 5 个函数之一。入口点[由 MSVC 链接器通过 静态链接](https://stackoverflow.com/a/66469163/7194773)，这将进一步仅包含该入口函数实际使用的符号。`main``WinMain``DllMain`[`libcmt.lib`](https://stackoverflow.com/a/66469163/7194773)

`mainCRTStartup`将调用`GetStartupInfo()`/访问 PPB 以获取标准输入/输出句柄和命令行参数。`_init term()`也称为，以及`_init_atexit()`。它调用set例程调用后`main`的返回值。`main``ExitProcess()``atexit`

`/Zi`需要在 IDA Pro 中加载使用编译器选项创建的 .pdb 中的调试符号，以显示`mainCRTstartup`和等符号`main`，在没有调试符号的情况下，它们将分别表示为`start`和`sub_??????`。

参考：

*   [/ENTRY（入口点符号）| Microsoft Docs § 备注](https://docs.microsoft.com/en-us/cpp/build/reference/entry-entry-point-symbol#remarks)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T02:09:45.863

我隐约记得在某处读过 Windows 程序有一个`main()`功能。它只是隐藏在某个标题或库中。我相信这个`main()`函数会初始化所有需要的变量`WinMain()`，然后调用它。

当然，我是一个WinAPI菜鸟，所以如果我错了，我希望其他知识渊博的人能纠正我。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-11T20:40:30.467

我有一个使用 _tWinMain 和 Configuration Properties.Linker.System.Subsystem: Windows (/SUBSYSTEM:WINDOWS) 的 exe。后来我希望它支持 cmdline args 并打印到控制台，所以我添加了：

```
// We need to printf to stdout and we don't have one, so get one
AllocConsole();
// Redirect pre-opened STDOUT to the console
freopen_s((FILE **)stdout, "CONOUT$", "w", stdout); 
```

但这只能通过在另一个消失的控制台窗口中打印来实现，所以没有那么有用。以下是我将其更改为使用控制台 (/SUBSYSTEM:CONSOLE) 的方式，如果需要，我可以来回切换。

```
int _tmain(int argc, TCHAR* argv[], TCHAR* envp[])
{
  UNREFERENCED_PARAMETER(argc);
  UNREFERENCED_PARAMETER(argv);
  UNREFERENCED_PARAMETER(envp);
  return (_tWinMain(NULL, NULL, ::GetCommandLineW(), 0));
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-08T10:10:35.213

主要与 WinMain

正如我从许多链接中读到的：

`WinMain()`是`C`任何 Windows 应用程序的入口点函数。就像具有入口点功能的普通`DOS/console`应用程序一样，在 Windows 中我们有。是系统在创建进程期间调用的函数。`main()``C``WinMain()``WinMain()`

第一个参数是当前进程的实例句柄。

接下来是上一个实例。

命令行参数作为下一个参数。

最后 shell 传递主窗口的显示/显示属性。

注意：WinMain 将成功返回为零，错误返回非零。******

# xcode - 如何从 xcodebuild 获取构建变量？

> ID：13871618
> 
> 赞同：4
> 
> 时间：2012-12-14T01:58:59.507
> 
> 标签：xcode, makefile, xcodebuild

我正在使用以下命令：

`xcodebuild -project eagle.xcodeproj -target eagle_test -showBuildSettings`

但我需要将其提取`OBJROOT`为外部 makefile 的一部分。我怎么会得到这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T02:16:46.557

她你去。解析得很好。

```
xcodebuild -project eagle.xcodeproj -target eagle_test -showBuildSettings | grep "OBJROOT" | sed 's/[ ]*OBJROOT = //' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:10:10.327

高级答案：作为 makefile 的一部分，运行`xcodebuild -project eagle.xcodeproj -target eagle_test -showBuildSettings`命令并解析输出以获取`OBJROOT`.

# javascript - Safari Inspector 时间线中的空白，较长的渲染时间

> ID：13871619
> 
> 赞同：0
> 
> 时间：2012-12-14T01:59:03.780
> 
> 标签：javascript, jquery, css, wordpress, inspector

我目前正在处理一个在主页上显示相对较长（约 5 秒）渲染时间的网站。这是一个 WordPress 安装，进行了很多操作，但加载时间似乎过长。我通过网络检查器注意到加载时间线中有几个很大的空白，似乎什么都没有发生。有谁知道会发生什么？我已确认正在发出加载信号的代码中没有错误。该网站可以在[http://ewokdown.com](http://ewokdown.com)找到。作为比较，您可以看到[http://ewokdown.com/reviews](http://ewokdown.com/reviews)的加载速度相当快。

谢谢！

艾略特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:14:17.997

检查了您的网站，延迟不是由客户端的任何原因造成的。**而是在等待服务器响应**我的浏览器请求时发生延迟。加载资源后，渲染会花费标准（相对较短）的时间。

**这是什么意思？**这意味着您的网站呈现方式可能没有什么特别的*问题*，无论您为您的网站拥有的任何服务器端代码最终都会挂起。

**智者的话**：我不会为初始页面加载时间出汗那么多。用户期望会有一些延迟，一旦资源被缓存，浏览器通常会很好地减少未来的加载时间。

# ruby-on-rails - Model.create() 抛出带有只读属性的错误

> ID：13871620
> 
> 赞同：0
> 
> 时间：2012-12-14T01:59:20.253
> 
> 标签：ruby-on-rails, activerecord

我在rails中有以下模型（简化）：

```
class Phone < ActiveRecord::Base
  include ActiveModel::Validations
  belongs_to :user
  belongs_to :brand
  attr_readonly :user, :brand
  attr_accessible :model, :phone_number

  validates :user, :presence => true
  validates :brand, :presence => true
  validates :model, :presence => true
  validates :phone_number, :presence => true
end 
```

根据文档， attr_readonly 应该允许在创建时设置属性，但不能在更新时设置。

但是，当我这样做时：

`Phone.create(:user => <existing_user>, :brand => <existing_brand>, :model => "Galaxy", :phone_number => "555-433-5678")`

我收到此错误：

`Can't mass-assign protected attributes user, brand`

我错过了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T02:03:19.200

如果您想分配这样的用户和品牌关联，则必须将它们定义为可访问的属性：

```
attr_accessible :user, :brand 
```

否则，您可以像这样分配它们：

```
Model.create({:user => user, :brand => brand }, :without_protection => true) 
```

# jquery - JQuery $.getJSON 加载本地 JSON 文件不起作用

> ID：13871625
> 
> 赞同：3
> 
> 时间：2012-12-14T01:59:31.987
> 
> 标签：jquery, json, getjson

我的问题很简单，我有一个名为 new.json 的文件，我正在尝试使用 JQuery 来加载和显示数据。我一直在编写 JavaScript 代码：

```
$.getJSON("new.json", function(data){
        // I have placed alert here previously and realized it doesn't go into here
        $.each(data.streetCity, function(i,s){
            alert(s);
        });
    });
} 
```

new.json 中的数据如下所示：

```
{"streetCity":
    {
        "1":"Abergement-Clemenciat",
        "2":"Abergement-de-Varey",
        "3":"Amareins"
    }
}; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-14T02:10:53.447

如果您使用的是 Chrome。因为 Chrome 不允许 xmlhttprequest 请求本地文件。所以 jquery 不能加载你的 new.json

你可以加

--allow-file-access-from-files

到chrome的启动命令。这可以允许 xmlhttprequest 加载本地资源

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T02:12:56.637

如果您使用的是 jQuery 1.5+，您可以将错误处理程序链接到调用以查看发生了什么：

```
$.getJSON("new.json", function(data){
        // I have placed alert here previously and realized it doesn't go into here
        $.each(data.streetCity, function(i,s){
            alert(s);
        });
    }).error(function(jqXhr, textStatus, error) {
                alert("ERROR: " + textStatus + ", " + error);
    }); 
```

new.json 可能与调用页面位于不同的路径中。此外，如果您的片段是准确的，您不需要脚本中的最后一个花括号或 json 中的最后一个分号。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-03T20:46:49.910

你的问题是';' （分号）在 JSON 文件中。JSON 响应不需要分号。删除您的示例应该可以正常工作！

# .net - 更新服务引用时自动重新编译服务项目

> ID：13871630
> 
> 赞同：0
> 
> 时间：2012-12-14T02:00:04.420
> 
> 标签：.net, wcf, visual-studio

我们有一个解决方案（例如，称为`Cabbage`），它分为基于 WCF 的后端 ( `Cabbage.Backend`) 和前端 ( `Cabbage.Frontend`)。一个经常出现的问题是开发人员更改了 WCF 服务的定义`Cabbage.Backend`，然后更新了服务引用，`Cabbage.Frontend` **而没有**首先重建`Cabbage.Backend`。（这些服务旨在通过这种方式紧密耦合，这些层仅由 WCF 分隔，以便我们更快地部署后端修补程序。）这会基于随机的旧构建而不是源代码的当前状态重新生成服务客户端， BE 开发者收工，当 FE 开发者自己更新客户端时，会发生有趣的合并冲突。

有没有办法让 Visual Studio 在每次运行更新服务参考之前自动重建服务项目/整个解决方案以避免这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:18:25.643

如果您可能会遭受更长的构建时间，请考虑将后端的项目依赖项添加到前端项目。当您构建前端时，后端及其所有依赖项也将构建。

# java - 类的 Eclipse 代码模板

> ID：13871636
> 
> 赞同：1
> 
> 时间：2012-12-14T02:01:18.030
> 
> 标签：java, eclipse, code-templates

在 Eclipse 中，类文件的代码模板不清楚。我在哪里定义 ${filecomment} 和其他元素？

![Eclipse 代码模板](../Images/d8223179cd87adf99a80f0989e9f8c04.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:09:51.730

这些是在自动完成期间提供帮助的占位符/预定义变量，其他字符串文字按原样放置。

### 例子

当您键入`for`并按`Ctrl`+`Space`时，您放置了结构化的 for 循环，其中定义了一个局部变量`i`并将光标放置在此位置。

浏览这个[ibm 开发人员工作教程](http://www.ibm.com/developerworks/opensource/tutorials/os-eclipse-code-templates/index.html)，其中详细解释了这一点。

# php - 如何设置 mysql 以使用 php

> ID：13871638
> 
> 赞同：-3
> 
> 时间：2012-12-14T02:01:55.557
> 
> 标签：php, mysql

我在已经设置了我的数据库的远程服务器上有一个工作站点。现在我想在我自己的服务器上启动一个我自己的数据库并从那里运行该站点。我已经下载了mysql并安装了它。我创建了与远程服务器上相同的表。我在 php.ini 中允许了 mysqli 和 mysql 命令。我确实有一个名为 crom 的数据库，但如何连接到它？

这是我在远程服务器上使用的命令（我上传文件的地方）。

```
$server="localhost";
$username='crom@localhost';
$password='ncrisnowredhorse';
$database="crom";

mysql_connect($server,$username,$password) or die("Problem connecting to the server");
mysql_select_db($database) or die("Problem connecting to the database"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:13:17.023

请使用 or mysqli 或 PDO，因为 mysql 是一种旧的连接方式。

以下是 PDO 连接的示例：

```
try {
$dsn = 'mysql:host=localhost;dbname=crom';
$username = 'crom@localhost'; //it can be root or just crom
$password = 'ncrisnowredhorse';
$options = array(
PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES utf8',
); 

$dbh = new PDO($dsn, $username, $password, $options);
$dbh->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION); 
} catch (PDOException $e) {
echo 'Something went wrong'. $e->getMessage();
} 
```

# php - 使用 PHP 从 YouTube 上抓取统计信息

> ID：13871642
> 
> 赞同：0
> 
> 时间：2012-12-14T02:02:13.213
> 
> 标签：php, xpath, curl, youtube, scrape

在尝试自己做这件事挣扎了 3 个小时之后，我决定我自己做这件事是不可能或不可能的。我的问题如下：

如何使用 PHP 抓取附件图像中的数字以在网页中回显它们？

图片网址： http: [//gyazo.com/6ee1784a87dcdfb8cdf37e753d82411c](http://gyazo.com/6ee1784a87dcdfb8cdf37e753d82411c)

请帮忙。我几乎尝试了所有方法，从使用 cURL 到使用正则表达式，再到尝试 xPath。没有什么是正确的。

我只想要数字本身，以便将它们隔离，分配给一个变量，然后在页面的其他地方回显。

更新：

[http://youtube.com/exonianetwork](http://youtube.com/exonianetwork) - 我要抓取的 URL。

```
/html/body[@class='date-20121213 en_US ltr   ytg-old-clearfix guide-feed-v2 site-left-aligned exp-new-site-width exp-watch7-comment-ui webkit webkit-537']/div[@id='body-container']/div[@id='page-container']/div[@id='page']/div[@id='content']/div[@id='branded-page-default-bg']/div[@id='branded-page-body-container']/div[@id='branded-page-body']/div[@class='channel-tab-content channel-layout-two-column selected   blogger-template ']/div[@class='tab-content-body']/div[@class='secondary-pane']/div[@class='user-profile channel-module yt-uix-c3-module-container ']/div[@class='module-view profile-view-module']/ul[@class='section'][1]/li[@class='user-profile-item '][1]/span[@class='value'] 
```

我尝试过的 xPath，由于某种未知原因无法正常工作。没有抛出异常或错误，也没有显示任何内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:56:49.407

也许一个简单的 XPath 会更容易操作和调试。

这是一个[简短的自包含正确示例](http://sscce.org/)（注意名称末尾的空格`class`）：

```
#!/usr/bin/env php

<?
$url = "http://youtube.com/exonianetwork";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_AUTOREFERER, true);
curl_setopt($ch, CURLOPT_FAILONERROR, true);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, true);
curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
curl_setopt($ch, CURLOPT_TIMEOUT, 10);
$html = curl_exec($ch);
if (!$html)
{
    print "Failed to fetch page. Error handling goes here";
}
curl_close($ch);

$dom = new DOMDocument();
@$dom->loadHTML($html);
$xpath = new DOMXPath($dom);

$profile_items = $xpath->query("//li[@class='user-profile-item ']/span[@class='value']");

if ($profile_items->length === 0) {
    print "No values found\n";
} else {
    foreach ($profile_items as $profile_item) {
        printf("%s\n", $profile_item->textContent);
    }
}

?> 
```

## 执行：

```
% ./scrape.php

57
3,593
10,659,716
113,900
United Kingdom 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:45:42.630

如果您愿意再次尝试正则表达式，则此模式应该有效：

```
!Network Videos:</span>\r\n +<span class=\"value\">([\d,]+).+Views:</span>\r\n +<span class=\"value\">([\d,]+).+Subscribers:</span>\r\n +<span class=\"value\">([\d,]+)!s 
```

它使用嵌入的逗号捕获数字，然后需要将其删除。我不熟悉PHP，所以不能给你更完整的代码

# ruby - 来自脚本的 OAuth

> ID：13871644
> 
> 赞同：0
> 
> 时间：2012-12-14T02:02:23.613
> 
> 标签：ruby, oauth

我已经看到了一些关于在 Rails 应用程序中实现 3 步 OAuth 的问题/指南，但我只对它的客户端部分感兴趣。我正在尝试以消费者身份向 OAuth2 服务器进行身份验证。据我所知，我正在正确构建访问令牌。

```
@consumer = OAuth::Consumer.new(@config[:client_id], @config[:client_secret], 
{
  :site               => "http://api.server.com",
  :oauth_version      => "2.0",
  :http_method        => :post,
  :authorize_path     => "/oauth2/authorize",
  :access_token_path  => "/oauth2/token",
  :request_token_path => "/oauth2/request_token"
})
token_hash = { oauth_token: @config[:client_id], oauth_token_secret: @config[:client_secret] }
@access_token = OAuth::AccessToken.from_hash(@consumer, token_hash) 
```

所有这些都成功了，访问令牌最终看起来像这样：

```
#<OAuth::AccessToken:0x007fb6f2290468 
  @token="client_id", 
  @secret="secret",
  @consumer=#<OAuth::Consumer:0x007fb6f2290800
              @key="client_id",
              @secret="secret",
              @options={:signature_method=>"HMAC-SHA1", 
                        :request_token_path=>"/outh2/request_token",
                        :authorize_path=>"/oauth2/authorize", 
                        :access_token_path=>"/oauth2/token", 
                        :proxy=>nil,
                        :scheme=>:header, 
                        :http_method=>:post, 
                        :oauth_version=>"2.0", 
                        :site=>"https://api.server.com"
                        }
            >, 
  @params={:oauth_token=>"client_id", 
           :oauth_token_secret=>"secret"
}> 
```

问题是我使用`@access_token`的任何请求都会返回`Forbidden`错误。

任何想法我的请求的哪一部分是错误的？

# entity-framework - 指定的架构无效 Membership.CreateUser

> ID：13871655
> 
> 赞同：0
> 
> 时间：2012-12-14T02:03:21.097
> 
> 标签：entity-framework, asp.net-membership

我的任务是从我们旧的半生不熟的用户存储（使用加密密码）迁移到默认的 MS 成员资格/角色提供程序。我在其他项目中做过这个没问题。

在这种情况下，我使用“新的”.NET 通用提供程序使用代码优先创建了必要的表。我只是想将新记录插入到用户表中，然后撞到了墙上。

我有一个简单的 edmx，其中包含由会员提供者创建的 6 个表。我已将 web.config 设置为指向必要的 cxn 字符串和成员资格/角色提供程序（代码如下）。

网络配置：

```
<connectionStrings>
    <add name="Test" connectionString="metadata=res://*/Entities.Test.csdl|res://*/Entities.Test.ssdl|res://*/Entities.Test.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=[OurServer];initial catalog=[OurDb];integrated security=True;MultipleActiveResultSets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
</connectionStrings>

<authentication mode="Forms">
  <forms loginUrl="~/Account/Login" timeout="2880" />
</authentication>
<membership defaultProvider="DefaultMembershipProvider">
  <providers>
    <add name="DefaultMembershipProvider" type="System.Web.Providers.DefaultMembershipProvider" connectionStringName="Test" enablePasswordRetrieval="false" enablePasswordReset="true" requiresQuestionAndAnswer="false" requiresUniqueEmail="false" maxInvalidPasswordAttempts="5" minRequiredPasswordLength="6" minRequiredNonalphanumericCharacters="0" passwordAttemptWindow="10" applicationName="/" />
  </providers>
</membership>
<roleManager enabled="true" defaultProvider="DefaultRoleProvider">
  <providers>
    <add connectionStringName="Test" applicationName="/" name="DefaultRoleProvider" type="System.Web.Providers.DefaultRoleProvider" />
  </providers>
</roleManager> 
```

这是我的“更新密码”功能：

```
System.Web.Security.MembershipCreateStatus status = new System.Web.Security.MembershipCreateStatus();

//Get list of existing users, containing Username & encrypted PW
List<UserMigration.Models.Users> usersList = UserMigration.Models.Users.GetUsers();

foreach (var user in usersList)
{
    string password = "";
    //We have two encryption methods (bogus I know), so I attempt to decrypt with one, then another, using existing utility functions.
    if (!EncryptDecrypt.TryDecryptTripleDES(user.Password, out password))
    {
        EncryptDecrypt.TryDecrypt(user.Password, out password);
    }
    //if we got a password, lets party
    if (!string.IsNullOrEmpty(password))
    {
        System.Web.Security.Membership.CreateUser(user.Username, password,string.Empty,null,null,true,out status);
    }
} 
```

我在 CreateUser 调用中遇到错误，我终生无法弄清楚原因。我没有以任何方式修改实体。这应该很简单。错误是：

```
Schema specified is not valid. Errors: 
The relationship 'TestModel.MembershipEntity_Application' was not loaded because the type 'TestModel.Membership' is not available.

The relationship 'TestModel.RoleEntity_Application' was not loaded because the type 'TestModel.Role' is not available.

The relationship 'TestModel.User_Application' was not loaded because the type 'TestModel.User' is not available.
The following information may be useful in resolving the previous error:
The required property 'Roles' does not exist on the type 'System.Web.Providers.Entities.User'. 
```

# ruby-on-rails - Ruby 权限错误

> ID：13871662
> 
> 赞同：0
> 
> 时间：2012-12-14T02:04:10.527
> 
> 标签：ruby-on-rails, ruby, shell

尝试这样做时，`gem install bundle`我得到了这个：

```
ERROR:  While executing gem ... (Gem::FilePermissionError)
    You don't have write permissions into the /Library/Ruby/Gems/1.8 directory. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:05:17.580

使用 sudo 进行 root 访问

```
sudo gem install bundle 
```

# emacs - Emacs 查找文件中列出的文件

> ID：13871666
> 
> 赞同：2
> 
> 时间：2012-12-14T02:04:39.290
> 
> 标签：emacs

我今天在另一个终端上使用 Emacs，我注意到当我点击 Cx Cf 打开一个文件时，Emacs 显示“Loading Tramp...”，然后列出了这些文件。我可以键入我想要的目录/文件，也可以使用左/右箭头键和 Return 来切换目录并打开文件。我太棒了。我熟悉 Tramp 模式并开始摆弄它，但我不知道如何让它在我的机器上工作，或者两者是否相关。

如何获得可以在 Emacs 中使用箭头键的文件树？

这是它在另一个终端上的显示方式：

```
Find file: .../dir1/dir1/{css/ | try.org | misc.txt | .emacs} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:31:37.460

那可能是`ido-mode`，它与 Emacs 捆绑在一起。把它放在初始化文件中：

```
(ido-mode) 
```

当它打开时，它会将一些常用命令重新绑定到它自己的使用这个可视化界面的版本。

流浪汉模式不相关。如果`ido-use-virtual-buffers`是`t`并且您最近访问了一些远程文件，它只会被加载。

# sql-server - 以 null 为条件的表视图

> ID：13871667
> 
> 赞同：0
> 
> 时间：2012-12-14T02:04:45.943
> 
> 标签：sql-server, view

我有两张桌子，一张用于音乐，一张用于艺术家。音乐有专辑名称、artistID（外键）和发布日期。Artist有3列，一列PKID，一列乐队名，一列歌手名。如果是乐队，则填写乐队名称，歌手名称为空。反之亦然。

如果bandname 不为null，我似乎无法创建一个显示乐队名称的表格视图，反之亦然。我尝试了许多不同的方法，包括一种声明变量的方法，但从未编译过。这是我尝试过的最新方法。我有点理解出了什么问题，但如果我不能声明@BandName，我不知道该往哪个方向前进。

```
CREATE VIEW MusicWithArtist AS

    IF B.BandName IS NOT NULL
        BEGIN 
         SELECT A.Title, A.ReleaseDate, B.BandName
            FROM Music A, Artist B
                WHERE A.ArtistID = B.ArtistID
        END;
    ELSE
        BEGIN
         SELECT A.Title, A.ReleaseDate, B.SingerName
            FROM Music A, Artist B
                WHERE A.ArtistID = B.ArtistID
        END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:23:30.743

```
CREATE VIEW MusicWithArtist AS
     SELECT A.Title, A.ReleaseDate, ISNULL(B.BandName,B.SingerName) ArtistName
        FROM Music A, Artist B
            WHERE A.ArtistID = B.ArtistID 
```

您使用什么环境会阻止您使用 JOIN？从 SQL92 开始就指定了 Ansi 样式的连接，这是很多年前的事了，这并不好笑。

```
CREATE VIEW MusicWithArtist AS
     SELECT A.Title, A.ReleaseDate, ISNULL(B.BandName,B.SingerName) ArtistName
        FROM Music A
        JOIN Artist B ON A.ArtistID = B.ArtistID; 
```

# php - Jquery在检查子复选框时获取父元素输入的值

> ID：13871673
> 
> 赞同：0
> 
> 时间：2012-12-14T02:05:17.247
> 
> 标签：php, javascript, jquery, html

我有这组表单，当用户检查输入时，我需要获取这个 div 之外的值，基本上是一个父 div，尝试使用 .parent() 执行它，然后找到但无法使其工作，不知道我做错了什么，我有一个js [http://jsfiddle.net/creativestudio/bCgeD/2/](http://jsfiddle.net/creativestudio/bCgeD/2/)

这是我的js：

```
 function set_index_id_checkbox() {
                        $("input:checkbox[name='like']").each(function(index){
                            var currElem = $(this);
                            var prevLabel = currElem.next();
                            currElem.attr("id", this.id + index);
                            prevLabel.attr("for", prevLabel.attr("for") + index);
                        });
                    }

                    set_index_id_checkbox();

                    function getValues(){
                        $("input:checkbox[name='like']").click(function(){
                            if (this.checked) {
                               $(this).closest('.reply-form').find('.feedback_nid').text(this.value);
                            } else {
                              // ...
                            }
                       });
                    } getValues(); 
```

这是我的html：

```
 <input type="hidden" class="feedback_nid" value="form a 111">
        <input type="hidden" class="branch_nid" value="form a 222">

        <div class="block">
            <!-- value -->
            <span class="info-item float-left value">
                <span class="likes">value</span>
            </span><!-- /.value -->
            <!-- checkbox -->
            <div class="btn like-checkbox float-right">
                     <input id="like" class="like" type="checkbox" name="like" value="33">
                     <label class="like" for="like">like 1</label>
            </div><!-- /checkbox -->
        </div>

        </div>

        <div class="reply-form">
        <input type="hidden" class="feedback_nid" value="form a 111">
        <input type="hidden" class="branch_nid" value="form a 222">
        <div class="block">
            <!-- value -->
            <span class="info-item float-left value">
                <span class="likes">value</span>
            </span><!-- /.value -->
            <!-- checkbox -->
            <div class="btn like-checkbox float-right">
                     <input id="like" class="like" type="checkbox" name="like" value="45">
                     <label class="like" for="like">like 2</label>
            </div><!-- /checkbox -->
        </div>
        </div>

        <div class="reply-form">
        <input type="hidden" class="feedback_nid" value="form a 111">
        <input type="hidden" class="branch_nid" value="form a 222">
        <div class="block">
            <!-- value -->
            <span class="info-item float-left value">
                <span class="likes">value</span>
            </span><!-- /.value -->
            <!-- checkbox -->
            <div class="btn like-checkbox float-right">
                     <input id="like" class="like" type="checkbox" name="like" value="66">
                     <label class="like" for="like">like 3</label>
            </div><!-- /checkbox -->
        </div>
        </div>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:18:28.383

试试父母，父母只会搜索更高的一个div，但父母会搜索文件，直到找到该div（如果存在）。

请参阅 jquery 文档： [Jquery parent](http://api.jquery.com/parent/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:20:42.210

其中包含文本的跨度`Value`是一个不同 `likes`的类，而不是`feedback_nid`您为隐藏输入设置的类。

如果您希望隐藏的输入具有相同的值，请使用`val()`输入并使用`text()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T02:24:17.377

[http://jsfiddle.net/gunderson/bCgeD/4/](http://jsfiddle.net/gunderson/bCgeD/4/)

我更新了您的示例以在 jsfiddle 中工作。

我所做的主要更改是使用 .parent() 遍历树，直到找到包含您要查找的值的 div。此外，我更新了您的语法以使用 jquery.val() 将值从隐藏字段中提取出来；

```
 function getValues(){
    $("input:checkbox[name='like']").click(function(){
        if (this.checked) {
           var value = $(this).parent().parent().parent()
               .find('.feedback_nid').val();
            $(this).parent().parent().find(".likes").text(value);
        } else {
          // ...
        }
   });
} getValues(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T02:15:43.043

在您尝试设置的代码中`html of hidden input field..`

```
.find('.feedback_nid').html(this.value); 
```

输入元素没有**内部 HTML ..**

也许你正在寻找`.val(this.value)`

您也可以使用`class like`而不是访问复选框`attribute selector..`

相反，我正在填充跨度`class="likes"`并且似乎工作正常..

**[检查小提琴](http://jsfiddle.net/bCgeD/3/)**

# c# - 项目的位置和“无法将类型隐式转换为字符串错误”

> ID：13871678
> 
> 赞同：2
> 
> 时间：2012-12-14T02:05:43.957
> 
> 标签：c#

我正在处理列表。我现在正在尝试确定 list `first`:`next`和`last`. 我已经能够通过函数确定列表中项目的第一个和最后一个位置，`getPostion`并通过标签显示项目名称。我的表单中的三个按钮： ShowFirstItem ShowNextItem 和 ShowLastItem 在标签中显示相应的项目。我在显示下一个项目时遇到问题。我有特殊的方法来`next`调用`GetNextTree`。当我从内部`ShowNextItem`单击调用此方法时，我收到此错误：`Cannot implicitly convert type 'TreeFarm.Form1.fruit_trees' to 'string'.`如何避免此错误并显示当前指向的项目？

```
namespace TreeFarm {
     public partial class Form1: Form {
         public Form1() {
             InitializeComponent();
         }

         public class ListForTrees {

             public fruit_trees GetNextTree() {
                 //save currently pointed tree
                 fruit_trees tree = this.current_tree;
                 if (tree != null) {
                     //move current_tree to the next tree, to be returned next time
                     current_tree = current_tree.next_tree;
                     //return saved tree object
                 }
                 return tree;
             }

         }
         private void ShowNextItem_Click(object sender, EventArgs e) {
             //Show Next Item
             labelSpecificTree.Text = mainlist.GetNextTree();
         }

     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:14:04.637

这是因为您的 GetNextTree() 方法返回一个fruit_trees 对象，但您试图将该返回值设置为 ShowNextItem 内的一个字符串（labelSpecificTree 的 Text 属性）。您需要执行以下操作：

```
private void ShowNextItem_Click(object sender, EventArgs e)
{
    //Show Next Item
    labelSpecificTree.Text = mainlist.GetNextTree().ToString(); 
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T02:12:13.463

您需要将您的转换`fruit_tree`为字符串，并且您可能还需要考虑这种`null`情况：

```
private void ShowNextItem_Click(object sender, EventArgs e)
{
    //Show Next Item
    fruit_trees nextTree = mainlist.GetNextTree();
    if (nextTree == null)
    {
        labelSpecificTree.Text = "No more trees!";
    }
    else
    {
        labelSpecificTree.Text = nextTree.ToString();
    }
} 
```

编辑：正如 MattSmith 指出的那样，也许您更愿意使用`nextTree.GetTreeType`来匹配您的其他方法。由你决定。

# jquery - 使用 jQuery 将一个标签替换为另一个标签，保留所有属性和数据

> ID：13871682
> 
> 赞同：2
> 
> 时间：2012-12-14T02:05:51.857
> 
> 标签：jquery

我意识到这类似于[Using jQuery to replace one tag with another](https://stackoverflow.com/questions/7093417/using-jquery-to-replace-one-tag-with-another)，但是我希望用 html 中的另一个标签替换一个标签，但保留对象的属性和任何定义的自定义数据（通过 $.data 设置）。知道如何实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:50:44.720

复制属性应该不会太难，这个答案的重点是保留附加到节点的数据和事件。

当您编写 时`$('#myid').data('msg', 'hello world')`，jQuery 会在内部为 DOM 元素创建一个特殊属性，称为`jQuery.expando`（它只是一个以一串数字开头`"jQuery"`并后跟一串数字的字符串）。该属性的值包含`jQuery.cache`数组的键，这是您的自定义数据和事件处理程序存储的位置。

```
// lets assume you want to replace node a with node b
// we need the DOM elements for this
var nodea = ..., nodeb = ...;

// jQuery data references are stored in a special property of the node
var key = nodea[jQuery.expando], 
cache = jQuery.cache[key];

// perform replacement
$(nodea).replaceWith(nodeb);

if (cache) {
  // restore data
  jQuery.cache[key] = cache;
  nodeb[jQuery.expando] = key;
} 
```

[**演示**](http://jsbin.com/onerok/1/)

不过，您应该自担风险使用它；搞乱内部通常不是最好的解决方案。

# javascript - 除了在 r eady 方法中访问页面片段

> ID：13871687
> 
> 赞同：0
> 
> 时间：2012-12-14T02:07:33.177
> 
> 标签：javascript, windows-8, winjs

当我在 WinJS 页面的 ready 方法中时，我可以访问页面元素（片段），因为它是作为元素参数传入的。有没有办法在 ready 方法之外访问它？我知道我可以将它从 ready 方法中保存到更高范围的变量中，然后它就可用了，但我想知道这是否不必要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T17:13:59.967

该元素存储在页面实例中——您可以通过 .element 属性访问它。

这假设您使用 Page 类来定义您的页面，并且页面类的构造函数会在调用 .ready 之前为您处理好这个问题。

# postgresql - postgresql 有数据库级触发器吗？

> ID：13871695
> 
> 赞同：2
> 
> 时间：2012-12-14T02:08:55.830
> 
> 标签：postgresql, triggers

我想在 postgresql 中构建一个触发器，该触发器将在服务器启动时触发。

在甲骨文我可以使用

```
CREATE TRIGGER iii AFTER STARTUP ON DATABASE 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:33:19.977

不可以。 [Postgres 触发器只能在对表运行查询时触发](http://www.postgresql.org/docs/9.1/static/sql-createtrigger.html)

作为一个组合，您可能能够找到一个在数据库启动时以某种方式修改的表（也许对某个系统表有一个 INSERT？），但取决于这将是一个 hack。

# matlab - 导入多个csv文件并提取一列数据形成单个矩阵

> ID：13871696
> 
> 赞同：2
> 
> 时间：2012-12-14T02:08:58.493
> 
> 标签：matlab, csv, for-loop, import

我对 MATLAB 很陌生，所以我相当肯定这是一个非常简单的问题。我有几个输出数据集，每个都有一个前缀（例如 PT_1 到 PT_20）。我想使用 for 循环将数据从每个 csv 文件的第二列导入到新矩阵中，并将其与时间对齐，这在所有文件中都是恒定的。

输入文件看起来像

PT_1.....

```
time    param 1 param 2 param 3
2/01/2001 23:00 11.449428   3   314.322471
3/01/2001 23:00 11.448935   3   311.683002 
```

PT_2.....

```
time    param 1 param 2 param 3
2/01/2001 23:00 11.445892   0   296.523937
3/01/2001 23:00 11.445393   0   294.0944 
```

我希望我的输出看起来像

```
time    PT_1    PT_2
2/01/2001 23:00 11.449428   11.445892
3/01/2001 23:00 11.448935   11.445393 
```

到目前为止，我得到的代码是

```
files = 0:1:21;
for i=1:21;
filename = sprintf('WQ_%d.csv', files(i));
origdata = importdata (filename);
end 
```

我可以看到它可以正确识别文件名，但它并没有真正做我想做的事情，因为它会在每个循环中重写数据。显然，我的编码错误。谁能帮我弄清楚如何为此编写合适的代码？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:33:27.447

试试这个：

```
%# Set the number of csv files
DirectoryPath = 'FullDirectoryPathHereWithTrailingSlash';
NumFile = 2;

%# Open the first file and get the first column (the date column)
File1Path = [DirectoryPath, 'PT_1.csv'];
fid1 = fopen(File1Path, 'r');
Date = textscan(fid1, '%s %*[^\n]', 'Delimiter', ',', 'HeaderLines', 1);
fclose(fid1);

%Convert dates to matlab date numbers and get number of rows
Date = datenum(Date{1, 1}, 'dd/mm/yyyy');
T = size(Date, 1);

%# Preallocate a matrix to hold all the data, and add the date column
D = [Date, NaN(T, NumFile)];

%# Loop over the csv files, get the second column and add it to the data matrix
for n = 1:NumFile

    %# Get the current file name
    CurFilePath = [DirectoryPath, 'PT_', num2str(n), '.csv'];

    %# Open the current file for reading and scan in the second colum using numerical format
    fid1 = fopen(CurFilePath, 'r');
    CurData = textscan(fid1, '%*s %f %*[^\n]', 'Delimiter', ',', 'HeaderLines', 1);
    fclose(fid1);

    %Add the current data to the cell array
    D(:, n+1) = CurData{1, 1};

end 
```

希望使用我提供的注释代码应该是不言自明的。有点棘手的是我在`textscan`函数中使用的格式字符串。这是一个快速的解释：

1)`'%s %*[^\n]'`说：获取第一列，它是字符串格式（即`%s`）并跳过所有剩余的列（即`%*[^\n]`）。

2)`'%*s %f %*[^\n]'`说：跳过第一列，即字符串格式（即`%*s`），获取第二列，即浮点数（即`%f`），然后跳过所有剩余的列（即`%*[^\n]`）。

**更新：**我刚刚更新了代码以在顶部包含一个变量，该变量允许您指定 csv 文件所在的目录（以防它不是当前目录）。只需将文本 FullDirectoryPathHereWithTrailingSlash 替换为适当的路径，例如`/home/username/Documents/`在 Linux 或`C:\Windows\Blah\`Windows 上。

我刚刚在两个测试 csv 文件上测试了这段代码，命名`PT_1.csv`和`PT_2.csv`看起来完全一样：

```
time, param 1, param 2, param 3
2/01/2001 23:00, 11, 3, 314.322471
3/01/2001 23:00, 12, 3, 311.683002 
```

和

```
time, param 1, param 2, param 3
2/01/2001 23:00, 13, 0, 296.523937
3/01/2001 23:00, 14, 0, 294.0944 
```

结果？

```
>> D

D =

      730853          11          13
      730854          12          14 
```

# google-app-engine - 在 GAE1.7.3+ 中运行时从 BufferUtil.java 中抛出 NumberFormatException

> ID：13871697
> 
> 赞同：7
> 
> 时间：2012-12-14T02:09:04.013
> 
> 标签：google-app-engine, richfaces

我使用的是richface 4.3.0.M2，当我使用GAE 1.7.3 和GAE 1.7.4 运行时，它会抛出以下异常。但是，它适用于 GAE 1.7.2。

有任何帮助或解决方法吗？

```
INFO: request=com.google.appengine.tools.development.ResponseRewriterFilter$RequestWrapper@14e834c, response=com.google.appengine.tools.development.ResponseRewriterFilter$ResponseWrapper@18e2fc5, chain=Faces Servlet
14/12/2012 2:01:35 AM com.google.apphosting.utils.jetty.JettyLogger warn
WARNING: /javax.faces.resource/application.css.jsf
java.lang.NumberFormatException: Wed, 05 Dec 2012 23:22:19 GMT
    at org.mortbay.io.BufferUtil.toLong(BufferUtil.java:106)
    at org.mortbay.jetty.HttpFields$Field.getLongValue(HttpFields.java:1479)
    at org.mortbay.jetty.HttpFields.getLongField(HttpFields.java:720)
    at org.mortbay.jetty.Request.getIntHeader(Request.java:728)
    at javax.servlet.http.HttpServletRequestWrapper.getIntHeader(HttpServletRequestWrapper.java:106)
    at 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-17T16:02:16.073

我发现这是谷歌应用引擎的未决问题。 [问题页面可以在这里找到。](http://code.google.com/p/googleappengine/issues/detail?id=8415) 他们提供了解决此问题的解决方法，尽管尚未正式修复。

[这里提出了类似的问题。](https://stackoverflow.com/questions/13838811/jsf-on-google-app-engine)

# c# - 通过 foreach 为每个循环创建数据库连接会导致单步执行代码跳转

> ID：13871698
> 
> 赞同：2
> 
> 时间：2012-12-14T02:09:07.940
> 
> 标签：c#, asp.net, loops, foreach, database-connection

我正在将我的代码剥离到我可以得到的最基本的代码，但仍然会导致问题。

```
public void SomeMethod()
{
    CompanyList allCompanies = GetAllCompanies();

    foreach (Company x in allCompanies)
    {
         List<string> warnings = x.GenerateWarnings();
    }
}

public class Company
{
    public string CompanyCode { get; set; }

    public List<string> GenerateWarnings()
    {
        List<string> warnings = new List<string>();

        using (OleDbConnection conn = new OleDbConnection(connstring)) //ms access database
        {
            conn.Open();

            //do lots of stuff here, but commented out, still causes a problem
            //basically making some database calls to confirm that an expected
            //value is actually in the table.  List<string> warnings is then
            //populated based on the results of these calls.

            conn.Close();
        }
        return warnings;
    }
} 
```

所以发生的事情是，假设通过 allCompanies 的第一个循环是 CompanyCode 0001 的 Company。当我单步执行代码时，正如预期的那样，我到达 Company 的 GenerateWarnings() 代码。但是，当我到达 conn.Open() 时，下一步是针对 CompanyCode 0002 到达 GenerateWarnings() 的公司。然后我的下一步是再次使用 CompanyCode 0001，到达 conn.Close()。这种公司实例之间的跳跃在 allCompanies 的整个 foreach 循环中进行。这不是一个一致的模式，有时它会跳来跳去，就像一家公司会打开，然后关闭，然后继续执行其余代码，然后随机我的下一步将是 conn.Close() 某些公司像 20 步前一样运行 conn.Open() 。

我没有指定任何花哨的东西，比如多线程和异步的东西或类似的东西，所以我对为什么会发生这种情况有点困惑。我想...

*   A) 了解发生这种情况的原因和
*   B）知道如何阻止它跳来跳去

**编辑**：我发现这可能与它是一个 MS Access 数据库有关。当我运行该页面时，快速打开 Access 文件时创建的 .ldb 不断出现和消失。

**编辑2**：这对我来说真的很奇怪。我在整个过程中插入了一些快速的单行语句，以将 forloop 的进度记录到带有时间戳的文本文件中，这样我就可以确切地看到发生了什么，当我这样做时，文本会按顺序记录每一行，没有跳来跳去。是否将日志添加到文本函数调用就像无意中限制它或其他什么？这有效地解决了我的问题，但我现在比开始时更加困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T05:05:54.270

为什么不直接将 using/open/close 代码移至 SomeMethod 并将 conn obj 传递给 GenerateWarnings？

它应该运行得更快，而不必为每个项目打开/关闭。

```
SomeMethod()
{
    Using(...) 
    {
        Conn.open...
        Foreach (Company...)
        {
           ...GenerateWarnings(conn)..
        }
        Conn.close...
    }
}

GenerateWarnings(conn)
{
    ...use conn to make db calls...
} 
```

（或者重构对你的架构来说是有意义的，以获得相同的结果）

# regex - vim 模式匹配两个标记，中间没有另一个给定标记

> ID：13871710
> 
> 赞同：8
> 
> 时间：2012-12-14T02:10:30.607
> 
> 标签：regex, vim, regex-negation

对于此文本，使用 vim 7.2：

> foo foo **token** foo foo **countertoken** foo foo **token** foo ***target*** foo foo **countertoken** foo

我想匹配每个以'token'开头并以'target'结尾的字符串，*它不*包含'countertoken'。

所以，在上面的例子中，我想匹配这个：

> foo foo token foo foo countertoken foo foo **token foo target** foo foo countertoken foo

但*不是*这个：

> foo foo ~~**token foo foo countertoken foo foo**~~ **token foo target** foo foo countertoken foo

（这样做的原因是，实际上，我正在搜索长文件，并且我对“目标”之前的最后一个“令牌”感兴趣。令牌有点像 XML 标记，但它不是 XML，所以 XML工具无济于事。我知道我可以使用`\zs`这样光标落在“目标”上，然后向后搜索“令牌”，但肯定有一个一步的解决方案！）

我希望这样的事情会起作用，但它没有：

```
/token\(.*countertoken.*\)\@!*target 
```

有很多这样的事件我感兴趣，当然，我正在搜索的文件并没有像“foo”这样常规的东西。

vim 中是否有一个单行正则表达式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:36:13.820

如果你只对最后一个感兴趣`token`，你不必关心`countertoken`。一种可能性是查找最后一次出现`token`并匹配所有内容，直到下一次出现`target`。

```
/.*\zs\(token\).\{-}\(target\) 
```

解释：

*   `.*\zs`- 匹配最后一次出现。
*   `\(token\)`- 匹配字符串“令牌”
*   `.\{-}`匹配非贪婪
*   `\(target\)`- 匹配字符串“目标”

# c# - 级联下拉菜单的默认值不起作用

> ID：13871713
> 
> 赞同：1
> 
> 时间：2012-12-14T02:10:54.843
> 
> 标签：c#, asp.net, ajax, .net-2.0

假设父下拉列表是汽车（值为 car1、car2、car3），其子下拉列表是颜色（对于 car1 RYGB，对于 car2 R Yand，对于 car3 GB）。

现在选择 car2 R 和 Y 将出现并选择 R，然后再次在 car 上进行更改并选择 car3 然后再次选择与 G 和 B 一起选择 B。

现在，如果我在 car, car1 中再次选择，则子项将填充 car1 的值，但它将 B 作为默认值，因为它先前已被选择并且也存在于 car1 中。

这种情况只会发生。在选择可用于父选择的子值时

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:56:56.047

在选择汽车时，您可以固定下拉选择值

```
Dropdown.selectedindex =0; 
```

这样它将填充第一个值，即“选择”。
希望这会有所帮助。

# regex - MATLAB中单元格中正则表达式的字符数

> ID：13871716
> 
> 赞同：1
> 
> 时间：2012-12-14T02:11:08.033
> 
> 标签：regex, matlab, cell-array

早些时候，我得到了一些关于如何制作脚本的帮助，该脚本将从推文列表中提取主题标签并将它们放入单元格数组中。我用这个作为我的代码，在一个 for 循环中

```
hashtagCell{i} = regexp(textRead{i}, '#[A-z]*', 'match'); 
```

这适用于它应该做的事情，但现在我试图找到主题标签的平均字符长度，所以我需要能够添加由上述函数提取的每个主题标签的字符长度并将它们加在一起. 但是，当我尝试使用 size() 函数时，它只是给了我单元格的大小而不是字符串的大小，这正是我想要的。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:46:38.013

对于单个字符串，它将是这样的：

```
%# example string with hashtags.
MyText = 'this is a #text with #hashtag and also #another hashtag';

%# create the hashtagCell.
hashtagCell = regexp(MyText, '#[A-z]*', 'match');

%# compute the mean.
AverageLength = mean(cellfun(@(x) size(x,2), hashtagCell)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:44:32.543

这应该会有所帮助（并且它摆脱了任何循环，也许除了用于创建的循环之外`CellOfText`）：

```
%# Example cell array of tweets
CellOfText = {'Bah #humbug says #Mr scrooge'; 'No #presents for you'};

%# Get all hash tags
HTC = regexp(CellOfText, '#[A-z]*', 'match');

%# Get the average hash tag length, being careful to unnest HTC
AvgLength1 = mean(cellfun('length', [HTC{:}])); 
```

免责声明：此方法的灵感来自对类似问题的[出色回答。](https://stackoverflow.com/questions/8881735/how-to-compute-effectively-string-length-of-cell-array-of-strings)感谢@Andrey。

# c++ - OpenGL 从 1.x、2.x、3.x 和 4.x 有哪些变化？

> ID：13871723
> 
> 赞同：3
> 
> 时间：2012-12-14T02:12:44.727
> 
> 标签：c++, opengl, 3d

是什么让 OpenGL 与众不同？我听说人们从 OpenGL 3.x 开始就不喜欢 OpenGL，但是发生了什么？我想学习OpenGL，但不知道是哪一个。我想要新版本的出色图形，但有什么不好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T09:50:16.637

一般来说，OpenGL的每个主要版本都大致相当于一个硬件一代。这意味着通常如果您可以运行 OpenGL 3.0 卡，您也可以运行 OpenGL 3.3（如果您有足够新的驱动程序）。

OpenGL 2.x 是支持 DX9 的一代硬件，OpenGL 3.x 是 DX10，而 OpenGL 4.x 是 DX11 一代硬件。没有 100% 精确的重叠，但这是一般情况。

OpenGL 1.x 围绕着*即时模式*（从概念上讲非常易于使用）和严格固定的功能管道。入门门槛非常低，因为几乎没有什么需要学习的，也几乎没有什么可以做错的。
缺点是您有更多的库调用，并且 CPU-GPU 并行性在此模型中不是最佳的。这在旧硬件上并不重要，但对于从新硬件中获得最佳性能变得越来越重要。

从 OpenGL 1.5 开始，在 2.x 中越来越多，从*立即模式*到*保留模式*有轻微的范式转变，即使用缓冲区对象和*一些*可编程的管道。顶点和片段着色器可用，具有不同的功能集和可编程性。
这些版本中的大部分功能是通过（通常是特定于供应商的）扩展来实现的，有时只是中途或几个不同的步骤，并且不少功能对临时程序员（例如寄存器组合器，缺乏分支、指令和依赖纹理提取的限制、支持*零*提取的 vtf 支持）。

在 OpenGL 3.0 中，已弃用固定功能，但仍支持作为向后兼容功能。几乎所有的“现代 OpenGL”都是作为 OpenGL 3.x 的核心功能实现的，具有明确的要求和保证，并且具有（几乎）完全可编程的管道。编程模型完全基于使用保留模式和着色器。除了顶点和片段着色器之外，还提供几何着色器。
版本 3 收到了很多负面批评，但在我看来这并不完全公平。出生过程无疑是一场公关惨败，但结果并不全是坏事。与以前的版本相比，OpenGL 3.x 是幸福的。

OpenGL 4.x 有一个额外的曲面细分着色器阶段，它需要 OpenGL 3.x 兼容硬件中不存在的硬件功能（尽管我敢说这是一个营销原因，而不是技术原因）。支持旧硬件也无法处理的新纹理压缩格式。
最后，OpenGL 4.x 引入了一些与底层硬件无关的 API 改进。*这些也可以在 OpenGL 3.x 下作为 100% 相同的核心扩展使用。*

总而言之，我对开始学习 OpenGL 的每个人的建议是立即从**3.3**版本开始（如果您使用 Apple，则从 3.2 版本开始）。

如今，兼容 OpenGL 3.x 的硬件几乎无处不在。没有理智的理由去假设任何更旧的东西，而且你会为自己省去很多痛苦。从经济的角度来看，支持任何旧的东西是没有意义的。入门级 GL4 卡目前的价格约为 30 美元。因此，买不起 GL3 卡的人也将无法为您的软件付费（不过，维护 2 个代码路径的工作量是两倍）。
此外，您最终将别无选择，只能使用现代 OpenGL，因此如果您从 1.x/2.x 开始，您将不得不忘记并在以后重新学习。

另一方面，直接进入 4.x 版本是可能的，但我建议暂时不要这样做。API 中不依赖于硬件的任何东西在 3.x 中也可用，并且曲面细分（或计算着色器）通常不是一次性*绝对*必要的，您可以随时添加。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T08:57:29.270

对于更改的确切列表，我建议您下载每个 OpenGL 主要版本的最新规范文档。在每一个的末尾都有几个附录，详细记录了版本之间的变化。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T20:14:31.833

大约一年前设计的许多配备英特尔集成显卡的笔记本电脑不支持 OpenGL 3。

这包括一些昂贵的商用机器，例如 1600 美元的 Thinkpad x201，截至今天（2013 年 4 月 3 日）仍在亚马逊上出售（尽管联想已经停止生产），

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T02:18:02.127

OpenGL 3.1 移除了“固定功能管道”。这意味着编写顶点和片段着色器不再是可选的：如果你想显示任何东西，你*必须*编写它们。这使得初学者更难在 OpenGL 中编写“hello world”。

[OpenGL Superbible Rev 5](http://www.starstonesoftware.com/OpenGL/)很好地教您使用现代 OpenGL，而无需依赖于固定功能管道。如果我从头开始学习 OpenGL，我会从那里开始。

如果您想从更“历史”的方法开始，他们的第 4 版仍然涵盖固定功能管道。

# mysql - 从每小时总和中获取最大用户分数

> ID：13871729
> 
> 赞同：1
> 
> 时间：2012-12-14T02:13:17.727
> 
> 标签：mysql, sql, group-by, sum

我有一个 MySql 表，其中包含如下示例数据：

```
+---------+---------+--------+---------------------+
|      id | user_id | scores |          created_at |
+---------+---------+--------+---------------------+
|       1 |       1 |     10 | 2012-12-14 02:40:37 |
|       2 |       1 |     20 | 2012-12-14 02:55:54 |
|       3 |       1 |     10 | 2012-12-14 01:17:21 |
|       4 |       2 |     30 | 2012-12-13 01:54:47 |
|       5 |       2 |     55 | 2012-12-15 00:34:39 |
|       6 |       2 |     10 | 2012-12-14 00:20:21 |
+---------+---------+--------+---------------------+ 
```

我需要查询它，以便按用户和每小时计算分数。这里假设一小时是`created_at`跳过的分钟和秒（04:00:00 到 04:59:59 等）。所以是这样的：

```
+---------+--------+---------------------+
| user_id | scores |          created_at |
+---------+--------+---------------------+
|       1 |     30 | 2012-12-14 02:00:00 |
|       1 |     10 | 2012-12-14 01:00:00 |
|       2 |     30 | 2012-12-13 01:00:00 |
|       2 |     55 | 2012-12-15 00:00:00 |
|       2 |     10 | 2012-12-14 00:00:00 |
+---------+--------+---------------------+ 
```

在这个示例数据中，只有第一个用户在一小时内（2012-12-14 02:00:00）玩了不止一次 - 所以他在那一小时内的分数被总结了。

从总分中，我只需要每个用户的最高分（创建排名）。所以最终的预期结果应该是：

```
+---------+---------------------+---------------------+
| user_id | top_scores_per_hour |                hour |
+---------+---------------------+---------------------+
|       1 |                  30 | 2012-12-14 02:00:00 |
|       2 |                  55 | 2012-12-15 00:00:00 |
+---------+---------------------+---------------------+ 
```

我有一个想法如何做这部分......我可以处理数据库之外的休息，但我真的想知道 - 我怎么能用 SQL 查询这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:38:18.777

```
SELECT a.user_id,
       a.totalScores top_scores_per_hour,
       a.newTime hour
FROM
    (
      SELECT  user_id, 
              SUM(Scores) totalScores, 
              DATE_Format(created_at, '%Y-%m-%d %H:00:00') newTime
      FROM    TableName 
      GROUP BY user_id, DATE_Format(created_at, '%y-%m-%d %H:00:00')
    ) a INNER JOIN 
    (
      SELECT  user_id, 
              max(DATE_Format(created_at, '%Y-%m-%d %H:00:00')) newTime
      FROM    TableName 
      GROUP BY user_ID
    ) b ON a.user_ID = b.user_ID AND
           a.newTime = b.newTime 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/f5cd1/4)

输出

```
╔═════════╦═════════════════════╦═════════════════════╗
║ USER_ID ║ TOP_SCORES_PER_HOUR ║        HOUR         ║
╠═════════╬═════════════════════╬═════════════════════╣
║       1 ║                  30 ║ 2012-12-14 02:00:00 ║
║       2 ║                  55 ║ 2012-12-15 00:00:00 ║
╚═════════╩═════════════════════╩═════════════════════╝ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T09:34:28.060

试试这个：

```
SELECT user_id, score, createdDate 
FROM (SELECT user_id, SUM(scores) score, DATE_FORMAT(created_at, '%Y-%m-%d %H:00:00') createdDate 
      FROM tablename 
      GROUP BY user_id, createdDate
      ORDER BY user_id, score DESC) AS A 
GROUP BY user_id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T02:25:39.237

怎么样

```
Select user_id, Max(totalHouirlyScore) TopHourlyScore
From (Select user_id, Sum(scores) totalHouirlyScore
      From tablename
      Group By user_id, 
            DateFormat(created_at, '%y%m%d%H')) Z 
```

# jquery - 在导航栏上的活动链接后面放置背景图像

> ID：13871733
> 
> 赞同：1
> 
> 时间：2012-12-14T02:13:34.527
> 
> 标签：jquery, html, css

我正在寻找一个导航菜单，其中活动链接后面有一个背景图像，当单击下一个链接时，图像会转到下一个活动链接。我不确定这是否可以单独使用 CSS 完成，或者是否还需要一些 jQuery。

```
<div id="header">
    <div id="company_name">

    </div>
        <ul id="gen_navigation" class="container_fixed">
            <li><a href="#"><span>Home</span></a></li>
            <li><a href="#"><span>About</span></a></li>
            <li><a href="#"><span>Technology</span></a></li>
            <li><a href="#"><span>Applications</span></a></li>
            <li><a href="#"><span>Benefits</span></a></li>
            <li><a href="#"><span>Inquiries</span></a></li>
        </ul>

</div> 
```

[http://jsfiddle.net/Dk6eq/](http://jsfiddle.net/Dk6eq/)

**注意：**我目前只有基本的 css 和 html

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:17:47.727

它不能只用 CSS 来完成，因为 CSS 没有持久的“点击”触发器。

只需添加一个 CSS 类，例如

```
.active {
   background-image: url(...)
} 
```

然后，当你点击...

```
$("#gen_navigation a").on('click', function () {
   $("#gen_navigation a").removeClass('active');
   $(this).addClass('active');
}); 
```

# python - 如何使用 readline 功能制作一个扭曲的 python 客户端

> ID：13871738
> 
> 赞同：5
> 
> 时间：2012-12-14T02:14:00.630
> 
> 标签：python, twisted, readline

我正在尝试使用 Python Twisted 为简单的 TCP 服务器编写客户端。当然，我对 Python 很陌生，刚开始研究 Twisted，所以我可能做错了。

服务器很简单，您打算使用 nc 或 telnet。没有身份验证。您只需连接并获得一个简单的控制台。我想编写一个添加一些 readline 功能的客户端（历史和 emacs，如 ctrl-a/ctrl-e 是我所追求的）

下面是我编写的代码，它与在命令行中使用 netcat 一样好，如下所示`nc localhost 4118`

```
from twisted.internet import reactor, protocol, stdio
from twisted.protocols import basic
from sys import stdout

host='localhost'
port=4118
console_delimiter='\n'

class MyConsoleClient(protocol.Protocol):
    def dataReceived(self, data):
        stdout.write(data)
        stdout.flush()

    def sendData(self,data):
        self.transport.write(data+console_delimiter)

class MyConsoleClientFactory(protocol.ClientFactory):
    def startedConnecting(self,connector):
        print 'Starting connection to console.'

    def buildProtocol(self, addr):
        print 'Connected to console!'
        self.client = MyConsoleClient()
        self.client.name = 'console'
        return self.client

    def clientConnectionFailed(self, connector, reason):
        print 'Connection failed with reason:', reason

class Console(basic.LineReceiver):
    factory = None
    delimiter = console_delimiter

    def __init__(self,factory):
        self.factory = factory

    def lineReceived(self,line):
        if line == 'quit':
            self.quit()
        else:
            self.factory.client.sendData(line)

    def quit(self):
        reactor.stop()

def main():
    factory = MyConsoleClientFactory()
    stdio.StandardIO(Console(factory))
    reactor.connectTCP(host,port,factory)
    reactor.run()

if __name__ == '__main__':
    main() 
```

输出：

```
$ python ./console-console-client.py 
Starting connection to console.
Connected to console!
console> version
d305dfcd8fc23dc6674a1d18567a3b4e8383d70e
console> number-events
338
console> quit 
```

我看过

[Python Twisted 与 Cmd 模块的集成](https://stackoverflow.com/questions/8568241/python-twisted-integration-with-cmd-module)

这真的不适合我。示例代码效果很好，但是当我介绍网络时，我似乎遇到了 stdio 的竞争条件。这个较旧的链接似乎提倡类似的方法（在单独的线程中运行 readline），但我并没有走得太远。

我也研究过扭曲的海螺侮辱，但除了演示示例之外，我没有任何运气可以工作。

制作可提供 readline 支持的基于终端的客户端的最佳方法是什么？

[http://twistedmatrix.com/documents/current/api/twisted.conch.stdio.html](http://twistedmatrix.com/documents/current/api/twisted.conch.stdio.html)

看起来很有希望，但我很困惑如何使用它。

[http://twistedmatrix.com/documents/current/api/twisted.conch.recvline.HistoricRecvLine.html](http://twistedmatrix.com/documents/current/api/twisted.conch.recvline.HistoricRecvLine.html)

例如，似乎也提供了对处理向上和向下箭头的支持，但我无法让切换控制台从 HistoricRecVLine 继承而不是 LineReceiver 来运行。

也许扭曲的框架是错误的，或者我应该使用所有的海螺类。我只是喜欢它的事件驱动风格。在扭曲的客户端中是否有更好/更简单的方法来获得类似 readline 或 readline 的支持？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T17:47:41.843

我通过不使用 Twisted 框架解决了这个问题。这是一个很棒的框架，但我认为它不适合这项工作。相反，我使用了`telnetlib`,`cmd`和`readline`模块。

我的服务器是异步的，但这并不意味着我的客户端需要如此，所以我用于`telnetlib`与服务器的通信。这使得创建一个`ConsoleClient`子类`cmd.Cmd`并获取历史和类似 emacs 快捷方式的类变得容易。

```
#! /usr/bin/env python

import telnetlib
import readline
import os
import sys
import atexit
import cmd
import string

HOST='127.0.0.1'
PORT='4118'

CONSOLE_PROMPT='console> '

class ConsoleClient(cmd.Cmd):
    """Simple Console Client in Python.  This allows for readline functionality."""

    def connect_to_console(self):
        """Can throw an IOError if telnet connection fails."""
        self.console = telnetlib.Telnet(HOST,PORT)
        sys.stdout.write(self.read_from_console())
        sys.stdout.flush()

    def read_from_console(self):
        """Read from console until prompt is found (no more data to read)
        Will throw EOFError if the console is closed.
        """
        read_data = self.console.read_until(CONSOLE_PROMPT)
        return self.strip_console_prompt(read_data)

    def strip_console_prompt(self,data_received):
        """Strip out the console prompt if present"""
        if data_received.startswith(CONSOLE_PROMPT):
            return data_received.partition(CONSOLE_PROMPT)[2]
        else:
            #The banner case when you first connect
            if data_received.endswith(CONSOLE_PROMPT):
                return data_received.partition(CONSOLE_PROMPT)[0]
            else:
                return data_received

    def run_console_command(self,line):
        self.write_to_console(line + '\n')
        data_recved = self.read_from_console()        
        sys.stdout.write(self.strip_console_prompt(data_recved))        
        sys.stdout.flush()

    def write_to_console(self,line):
        """Write data to the console"""
        self.console.write(line)
        sys.stdout.flush()

    def do_EOF(self, line): 
        try:
            self.console.write("quit\n")
            self.console.close()
        except IOError:
            pass
        return True

    def do_help(self,line):
        """The server already has it's own help command.  Use that"""
        self.run_console_command("help\n")

    def do_quit(self, line):        
        return self.do_EOF(line)

    def default(self, line):
        """Allow a command to be sent to the console."""
        self.run_console_command(line)

    def emptyline(self):
        """Don't send anything to console on empty line."""
        pass

def main():
    histfile = os.path.join(os.environ['HOME'], '.consolehistory') 
    try:
        readline.read_history_file(histfile) 
    except IOError:
        pass
    atexit.register(readline.write_history_file, histfile) 

    try:
        console_client = ConsoleClient()
        console_client.prompt = CONSOLE_PROMPT
        console_client.connect_to_console()
        doQuit = False;
        while doQuit != True:
            try:
                console_client.cmdloop()
                doQuit = True;
            except KeyboardInterrupt:
                #Allow for ^C (Ctrl-c)
                sys.stdout.write('\n')
    except IOError as e:
        print "I/O error({0}): {1}".format(e.errno, e.strerror)
    except EOFError:
        pass

if __name__ == '__main__':
    main() 
```

我所做的一项更改是删除从服务器返回的提示并用于`Cmd.prompt`向用户显示。我的理由是支持 Ctrl-c 更像一个外壳。

# android - 使用 Galaxy Tab 10.1 的 Android 应用程序中的图像恶化

> ID：13871743
> 
> 赞同：0
> 
> 时间：2012-12-14T02:14:44.933
> 
> 标签：android, galaxy-tab

我在 Galaxy tab 10.1 上测试了我的应用程序，发现了一些奇怪的东西。

我使用大图像作为为大屏幕创建的应用程序的标题。但是当检查它时，图像质量会降低。

我从来没有像调整大小那样接触过图像。图像分辨率合适，因此无需更改。

在画廊中查看相同的图像时，它似乎几乎相同。仅在应用程序中，图像会变质。

我使用图像文件夹 drawble-xhdpi 和布局文件夹 layout-xlarge。还有什么我应该检查的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:25:35.460

您应该检查您正在测试的设备的实际密度。Galaxy Tab 10.1 是一个`mdpi`设备，而不是一个`xhdpi`设备。此外，建议*不要*使用`large`and`xlarge`限定符，而是使用最小宽度限定符（例如`sw600dp`，对于 7"，`sw720dp`对于 10"）。

# jquery - 如何使用 JQuery 分页链接到部分

> ID：13871747
> 
> 赞同：0
> 
> 时间：2012-12-14T02:14:55.563
> 
> 标签：jquery

我正在使用从另一篇文章[jquery-pagination](http://d-scribe.de/webtools/jquery-pagination/demo/demo_options.htm)中找到的简单分页。如何从网站的其他部分链接到分页的某些部分。例如，用户应该能够单击页面顶部的链接并转到分页的不同部分。任何建议将不胜感激。

我查看了可以找到的[文档](https://github.com/gbirke/jquery_pagination)，并尝试使用`$("#News-Pagination").trigger('setPage', [4]);`但无法使其正常工作。

# c++ - c ++静态成员，我如何测试它

> ID：13871756
> 
> 赞同：0
> 
> 时间：2012-12-14T02:15:55.123
> 
> 标签：c++, static

我在 foo.h 中有一个包含静态成员的类

```
class foo {
 public:
  static vector<int> a;
  static void Init() { // Init a }
} 
```

一切正常，直到我有一个正在测试类 foo 的测试文件 foo_test.cpp。但是在测试文件中，静态成员 a 不可见，因为静态成员只可见......我该如何解决这个问题？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T02:19:21.217

您需要定义`a`，在您的`cpp`文件中添加如下行：

```
vector<int> foo::a; 
```

**编辑：**更改数据类型以反映问题中的编辑

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:39:18.547

如果你在作用域外调用 foo::Init() ，你会得到函数重新声明错误。如果你把它放在范围内，你会得到未解析的外部符号。您只能将其初始化为 int foo::a = 0;

# c++ - OpenCV 矩阵和 FileNodeIterator：选择第一次迭代

> ID：13871760
> 
> 赞同：0
> 
> 时间：2012-12-14T02:16:27.900
> 
> 标签：c++, opencv, matrix

我要做的是从迭代中获取第一个矩阵，并将其保存为单独的矩阵，然后我可以使用它来对其余数据执行函数。下面是我的迭代代码；

```
FileNode n = fs.root();
    for (FileNodeIterator current = n.begin(); current != n.end(); current++) 
    {
        FileNode item = *current;
        Mat v, pose;
        item["pose"] >> v;
        string Frame;
        Frame = item.name();

        if (v.rows != 0) // finding the nodes that contain data and saving them as "pose"
        {
            transpose(v, pose);
            pose.size();
            cout << "The size of pose for " << Frame;
            cout << " is: \n" << pose.size()<< "\n Data was collected for this frame: \n" << pose << endl;
        }

        if (v.rows != 6) // Nodes with no data
        {
            cout << "The size of pose for " << Frame;
            cout << " is: \n" << v.size() << "\n No Data was collected for this frame. \n" << endl;

        } 
```

有没有办法获取“pose”的第一个实例并将其保存为另一个矩阵，例如“base”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:46:01.027

如果我理解正确，也许您想要的是声明一个标志，您可以使用它来仅保存矩阵的第一个实例，如下所示：

```
FileNode n = fs.root();
bool firstTime = true;
Mat base;
for (FileNodeIterator current = n.begin(); current != n.end(); current++) 
{
    FileNode item = *current;
    Mat v, pose;
    item["pose"] >> v;
    string Frame;
    Frame = item.name();

    if (v.rows != 0) // finding the nodes that contain data and saving them as "pose"
    {
        transpose(v, pose);
        pose.size();
        cout << "The size of pose for " << Frame;
        cout << " is: \n" << pose.size()<< "\n Data was collected for this frame: \n" << pose << endl;
    }

    if (v.rows != 6) // Nodes with no data
    {
        cout << "The size of pose for " << Frame;
        cout << " is: \n" << v.size() << "\n No Data was collected for this frame. \n" << endl;

    }

    if(firstTime) 
    {
        base = pose.clone();
        firstTime = false;
    }
} 
```

请注意`clone()`，如果您想要矩阵标题和数据的完整副本，则需要这样做。

# c++ - 如何使用 C++11 std::thread 设置堆栈大小

> ID：13871763
> 
> 赞同：40
> 
> 时间：2012-12-14T02:17:15.450
> 
> 标签：c++, multithreading, c++11, pthreads

我一直在尝试熟悉 C++11 中的**std::thread**库，但遇到了一个绊脚石。

最初我来自 posix 线程背景，并且想知道如何在构造之前设置 std::thread 的堆栈大小，因为我似乎找不到执行此类任务的任何参考。

使用 pthreads 设置堆栈大小是这样完成的：

```
void* foo(void* arg);
.
.
.
.
pthread_attr_t attribute;
pthread_t thread;

pthread_attr_init(&attribute);
pthread_attr_setstacksize(&attribute,1024);
pthread_create(&thread,&attribute,foo,0);
pthread_join(thread,0); 
```

**使用std::thread**时是否有类似的东西？

我一直在使用以下参考：

[http://en.cppreference.com/w/cpp/thread](http://en.cppreference.com/w/cpp/thread)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-14T02:27:55.290

> 最初我来自 posix 线程背景，并且想知道如何在构造之前设置 std::thread 的堆栈大小，因为我似乎找不到执行此类任务的任何参考。

你不能。`std::thread`不支持这一点，因为`std::thread`它是标准化的，C++ 甚至不需要机器有一个堆栈，更不用说固定大小的堆栈了。

pthread 在它们支持的硬件方面更具限制性，并且它假设每个线程有一些固定的堆栈大小。（所以你可以配置这个）

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-02-14T05:09:58.090

正如 Loki Astari 已经说过的，实际上需要非默认堆栈大小的情况极为罕见，通常是错误或编码错误的结果。

*   如果您觉得默认堆栈大小对于您的需求来说太大并且想要减少它，那就忘记它。现在每个现代操作系统都使用虚拟内存/按需提交，这意味着在您访问页面之前，内存只是保留，而不是实际分配。减少堆栈大小**不会**减少您的实际内存占用。

*   由于这种行为，操作系统可以将默认堆栈大小设置为非常大的值。例如，在 vanilla Debian 上，这是 8MB ( `ulimit -s`)，应该足以满足所有需要。如果你仍然设法达到这个限制，我的第一个想法是你的代码是错误的，所以你应该首先检查它并将东西移动到堆中，将递归函数转换为循环等。

*   如果尽管如此，您*确实确实*需要更改堆栈大小（即增加它，因为减小它是无用的），在 POSIX 上，您始终可以在程序开始时使用[setrlimit来增加默认堆栈大小。](http://linux.die.net/man/2/setrlimit)当然这会影响所有线程，但只有需要它的线程才会真正使用额外的内存。

*   最后但并非最不重要的一点是，平心而论，我可以看到减少堆栈大小有意义的极端情况：如果您在 32 位系统上有大量线程，它们可能会占用您的虚拟地址空间（同样，不是实际内存消耗）直到您没有足够的地址空间可用于堆。同样，[setrlimit](http://linux.die.net/man/2/setrlimit)在这里是您的朋友，即使我建议迁移到 64 位系统以从更大的虚拟地址空间中受益（如果您的程序无论如何都那么大，您可能也会从额外的 RAM 中受益）。

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-12-10T18:47:45.220

我也一直在调查这个问题。对于某些应用程序，默认堆栈大小是不够的。示例：程序根据它正在解决的特定问题进行深度递归；该程序需要创建许多线程并且内存消耗是一个问题。

以下是我发现的（部分）解决方案/解决方法的摘要：

*   g++ 支持`-fsplit-stack`Linux 上的选项。[有关拆分堆栈的更多信息，请参阅](http://gcc.gnu.org/wiki/SplitStacks)。以下是他们网站的摘要：

> 拆分堆栈的目标是允许根据需要自动增长的不连续堆栈。这意味着您可以运行多个线程，每个线程都从一个小堆栈开始，并根据程序的需要让堆栈增长和收缩。

备注：`-fsplit-stack`仅在我开始使用[黄金链接器](http://en.wikipedia.org/wiki/Gold_%28linker%29)后才为我工作。似乎 clang++ 也会支持这个标志。尝试使用 flag 编译我的应用程序时，我尝试的版本（clang++ 3.3）崩溃`-fsplit-stack`。

*   `ulimit -s <size>`在 Linux 上，通过在启动应用程序之前执行来设置堆栈大小。`size`是以 Kbs 为单位的堆栈大小。备注：该命令`unlimit -s unlimited`不影响使用创建的线程的大小`std::thread`。当我使用`ulimit -s unlimited`时，主线程可以增长，但创建的线程具有`std::thread`默认大小。

*   在使用 Visual Studio 的 Windows 上，我们可以使用链接器`/STACK`参数或`/STACKSIZE`在模块定义文件中，这是所有创建线程的默认大小。有关更多信息，请参阅[此链接](http://msdn.microsoft.com/en-US/library/8cxs58a6%28v=vs.120%29.aspx)。我们还可以使用命令行工具[EDITBIN](http://msdn.microsoft.com/en-US/library/xd3shwhf.aspx)在任何可执行文件中修改此参数。

*   在使用 mingw g++ 的 Windows 上，我们可以使用选项`-Wl,--stack,<size>`. 由于某种原因，在使用 cygwin g++ 时，该标志只影响主线程的大小。

**对我**不起作用的方法：

*   `ulimit -s <size>`在 OSX 上。它只影响主线程的大小。此外，Mac OSX 默认的 pthread 堆栈大小为 512kB。

*   [`setrlimit`](http://linux.die.net/man/2/setrlimit)仅影响 Linux 和 OSX 上主线程的大小。在cygwin上，它从来没有为我工作过，它似乎总是返回一个错误。

对于 OSX，唯一的替代方法似乎是使用`boost::thread`而不是`std::thread`，但如果我们想坚持标准，这并不好。我希望 g++ 和 clang++ 将来也能`-fsplit-stack`在 OSX 上支持。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-12-14T02:45:02.723

我在 Scott Meyers 的书中找到了这个`Overview of the New C++(C++0x)`，因为它很长，我不能将它作为评论发布，这有帮助吗？

> 还有一个标准 API 用于获取线程、互斥体、条件变量等背后的特定于平台的句柄。这些句柄被假定为设置线程优先级、设置堆栈大小等的机制。（关于设置堆栈大小， Anthony Williams 指出：“在那些支持设置堆栈大小的操作系统中，它们的做法都不同。如果您正在为特定平台编码（这样使用 native_handle 就可以了），那么您可以使用该平台的工具来切换堆栈。例如，在 POSIX 上，您可以使用 makecontext 和 swapcontext 以及显式分配堆栈，在 Windows 上，您可以使用 Fibers。然后您可以使用特定于平台的工具（例如链接器标志）将默认堆栈大小设置为某个值真的很小，然后在必要时将堆栈切换到更大的堆栈。“）

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2013-11-09T01:06:52.603

刚才自己也在寻找这个问题的答案。

看来，虽然 std::thread 不支持这一点，但 boost::thread 支持。

特别是，您可以使用[boost::thread::attributes](http://www.boost.org/doc/libs/1_51_0/doc/html/thread/thread_management.html#thread.thread_management.tutorial.attributes)来完成此操作：

```
boost::thread::attributes attrs;
attrs.set_stack_size(4096*10);
boost::thread myThread(attrs, fooFunction, 42); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-11-14T04:40:23.503

如果你不想包含一个大的库，你可以做一些这样的修改。

它仍然是依赖 C++ 编译器 STL 库。（现在是 Clang / MSVC）

[HackingSTL 库](https://github.com/metarutaiga/HackingSTL/blob/master/thread)

```
std::thread thread = std::stacking_thread(65536, []{
    printf("Hello, world!\n"); 
}); 
```

# asp.net - asp.net 模拟更改活动目录对象

> ID：13871766
> 
> 赞同：1
> 
> 时间：2012-12-14T02:17:42.343
> 
> 标签：asp.net, active-directory, impersonation, kerberos

所以这是我试图找到解决方案的场景。

我的公司目前有一个员工记录系统，但它没有链接到活动目录。因此，我们有重复且经常不准确的数据。我正在尝试做的事情是允许记录系统更新活动目录中的值，但是我想确定可以更改的范围以及由谁更改。所以

1.  当我们有新员工时，IT 将输入初始记录，这也将创建 AD 用户。
2.  hr 出现并更新标题/描述/电话/地址等，但他们不应该能够从系统中创建或删除记录。（他们必须提交一张票，或其他东西）

我一直在尝试阅读有关 kerberos 双跳问题的信息，看来我需要委派的能力，但是，我自己的 IT 能力还不够高。我可以升级并尝试从更高级别的 IT 人员那里获得签名以授予帐户授权，但我将其保存为最后的手段。

我想使用模拟来完成任务，但我很难找到关于如何实现模拟的明确答案。

我在 web.config 和 iis 中启用了模拟。我已将 appPool 身份设置为网络服务。在那之后，我不知道下一步该做什么或如何测试设置。

编辑1：我也遵循这种模仿模式

```
var iid = HttpContext.Current.User.Identity;
WindowsIdentity wi = (WindowsIdentity)iid;
WindowsImpersonationContext wic = wi.Impersonate();
try
{
    // do something with a directory entry here
}
catch
{}
finally
{
    wic.Undo();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:48:01.897

确保您的 Web 服务器在 AD 中启用了委派。无论如何，这是我总是忘记的步骤。

情侣参考链接：

[http://blog.reveille.org.uk/2010/01/asp-net-impersonation-delegation/](http://blog.reveille.org.uk/2010/01/asp-net-impersonation-delegation/) http://support.microsoft.com/kb/810572?wa=wsignin1.0

还要确保您使用的是网站的 Windows 身份验证。

您将能够快速判断其是否正常工作，因为只有具有适当 AD 访问权限的用户才能操作 AD 设置（因为它实际上就像他们自己更改 AD 一样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T21:06:26.517

委托是一种更强的模仿形式。模拟允许您充当本地计算机上的用户，委托允许您充当远程计算机上的用户。避免委派的唯一方法是将 AD 中的控制权委派给 Web 服务（在这种情况下，您作为网络​​服务运行，因此让 Web 服务器的计算机帐户能够写入所需的属性），并让 Web服务执行更新。但这不是一个好主意，因为您不能将更改归因于使用该网站的用户。

# google-maps - Bootstrap input-append + Google Maps 表单

> ID：13871767
> 
> 赞同：0
> 
> 时间：2012-12-14T02:17:43.747
> 
> 标签：google-maps, input, twitter-bootstrap

我试图有一个块级输入追加，其中输入栏占据了按钮以外的所有空间。

我使用 a `<button>`or得到了这个`<span>`，但是一旦我将标签切换到 a `<input>`，我又开始遇到样式问题。但是，`<input>`标签是必需的。

我已经包括了一个[小提琴 - 这里](http://jsfiddle.net/thong/TrVXE/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T03:04:29.657

我通过这样做使它工作：

```
.input-append {
  display: table;
  width: 100%;
}
.add-on {
  display: table-cell;
  height: auto !important;
}
.input-bar {
  display: table-cell;
  width: 100%;
  border-right-style: None;
}
.well{
  padding-right: 58px;
}​ 
```

1.  我删除了嵌套选择器，因为您不能在常规 CSS 中这样做。（不过，使用 Sass 和 LESS 可以）。
2.  我在“.add-on”选择器中添加了“height: auto !important”。尽管通常认为使用“！important”不是最佳实践。
3.  我在 58px 的井中添加了 padding-right，这是 GO 的宽度！按钮，39px，加上 19px 的填充。

**编辑：**正如@nicefinly 指出的那样，GO 的高度！按钮仍然关闭。在 Chrome 中我没有发现任何问题，但在 Firefox 中我绝对可以看到高度问题。

因此，通过[他的所有更改](http://jsfiddle.net/thong/TrVXE/43/)，我还要补充一点，例如，在修改井和附加类时，这将更改使用这些标准 Bootstrap 类的所有地方，这可能不是您想要的。

相反，我会为所有这些自定义类创建单独的类，以便它们在这种特定情况下工作，而在其他地方则按预期工作。例如，“add-on-button”、“well-with-button”等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T08:52:07.413

@CoderDave 用他的建议为我指明了正确的方向 - [@CoderDave 的答案的 JSFiddle](http://jsfiddle.net/thong/TrVXE/34/)

但是，我随后注意到高度有些偏离。相反，我手动设置按钮高度 -[我的解决方法的 JSFiddle](http://jsfiddle.net/thong/TrVXE/36/)

```
.input-append {
  display: table;
  width: 100%;
}
.add-on {
  display: table-cell;
  height: 30px !important;
}
.input-bar {
  display: table-cell;
  width: 100%;
  border-right-style: None;
}
.well{
  padding-right: 58px;
}
​ 
```

**但是之后...**

在 Chrome 中进行测试给了我奇怪的结果（不一定是在小提琴中，而是在我的本地环境中）。因此，我没有使用填充，而是使用`margin-left`and `margin-right`where

`margin-left = 17px`在`input .add-on`

和

`margin-right = -55px`在`.input-bar`

**但是...**在那之后，我注意到 z-index 导致`.input-bar`GO! 当栏处于焦点时的按钮（即我点击它）。

因此，我设置`z-index`

`z-index: -1`为`well` `z-index: 1`为`.input-bar` `z-index: 2`为`.add-on`

[**最后的 JSFIDDLE 在这里！**](http://jsfiddle.net/thong/TrVXE/43/)

这似乎是一个非常老套的解决方案。如果有人有更好的解决方案，请分享。

# python - 通过方法装饰器修改类属性

> ID：13871769
> 
> 赞同：3
> 
> 时间：2012-12-14T02:17:53.377
> 
> 标签：python, metaprogramming

我有一个看起来像这样的类：

```
class Test(object):
    data = {}

    @add_to_data(1)
    def method_1(self, x, y):
        pass

    @add_to_data(1, 2, 3)
    def method_2(self, x, y):
        pass

    @add_to_data(5, 6, 7)
    def method_3(self, x, y):
        pass 
```

我希望它在“导入时间”时`data`类的属性是：

```
>>> Test.data
{'method_1': [1], 'method_2': [1, 2, 3], 'method_3': [5, 6, 7]} 
```

目前我有这个（`data`是一个`defaultdict`）：

```
def add_to_data(*items):
    def decorator(func):
        for item in items:
            name = func.__name__
            cls = ??
            cls.data[name].append(item)
        return func
    return decorator 
```

但我不知道如何获取类对象。有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T02:33:26.763

它不是特别干净，但是您可以使用它`sys._getframe()`来检查调用范围（装饰器将在类定义的上下文中调用，其中`data`是局部变量。

所以像下面这样的东西应该可以工作：

```
import sys

def add_to_data(*items):
    def decorator(func):
        name = func.__name__
        data = sys._getframe(1).f_locals.get('data')
        if data is not None:
            data.setdefault(name, []).extend(items)
        return func
    return decorator 
```

如果你不想依赖`sys._getframe`或想要更明确的东西，你可以让你的`@add_to_data`函数装饰器简单地用适当的函数属性标记方法，然后使用类装饰器`data`从所有标记的方法构建字典。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T02:33:14.300

你不能这样做，因为类对象还不存在。

您可能可以通过创建一个基类来做类似的事情，该基类`@classmethod`在子类中用作装饰器，或者将东西存储在其他地方的装饰器以及`data`稍后将存储复制到类的属性中的类装饰器或元类。

好吧，真的，不知道你的实际目标是什么——以及你是使用 Py2 还是 Py3（以及你是否只关心 CPython 或任何 Python）——很难知道该建议什么。

# sockets - jgroup的配置

> ID：13871772
> 
> 赞同：0
> 
> 时间：2012-12-14T02:18:26.013
> 
> 标签：sockets, networking, jgroups

我在单机上启动了两个 jgroup 进程，使用`JChannel channel=new JChannel();`
它将使用 jgroups-all.jar 中名为**udp.xml**的默认 XML 配置文件。

然后我通过执行 netstat 命令查看了端口使用情况。结果如下。

```
C:\Documents and Settings\xxxxxx\Desktop>netstat -ano | find "45588"
  UDP    0.0.0.0:45588          *:*                                    9304
  UDP    0.0.0.0:45588          *:*                                    2492 
```

数字 9304 和 2492 是 JVM 进程 ID，而 45588 是端口 ID。

我想知道的是为什么两个进程可以在一台主机上使用同一个端口45588，而IP **0.0.0.0**代表什么？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-18T07:24:23.687

这可能会给你最后一个问题的答案：

显示 IP 0.0.0.0 表示它们未连接到 TCP/IP 网络。拥有此地址后，无法通过 IP 访问计算机或与任何其他设备通信。

# java - 数组不会通过 for 循环进入下一个位置

> ID：13871774
> 
> 赞同：0
> 
> 时间：2012-12-14T02:18:29.553
> 
> 标签：java, arrays, for-loop

这是我的代码：

ArrayFunHouseTwo

```
public class ArrayFunHouseTwo
{
//goingUp() will return true if all numbers
//in numArray are in increasing order
//[1,2,6,9,23] returns true
//[9, 11, 13, 8]  returns false
public static boolean goingUp(int[] numArray)
{
    int num = 0;
    int numMinus = 0;
    for(int x = 1; x < numArray.length; x++){
        System.out.println(x);
        num = numArray[x];
        numMinus = numArray[x-1];

        if(num > numMinus){
            return true;
        }

    }
    return false;           
} 
```

和相关的跑步者类：

```
import java.util.Arrays;

public class Lab14b
{
public static void main( String args[] )
{
    int[] one = {1,2,3,4,5,6,7,8,9,10};
    int[] two = {1,2,3,9,11,20,30};
    //add more test cases
    //int[] three = {9,8,7,6,5,4,3,2,0,-2};
    //int[] four = {3,6,9,12,15,18,21,23,19,17,15,13,11,10,9,6,3,2,1,0};

    System.out.println(Arrays.toString(one));
    System.out.println("is going Up ?  " + ArrayFunHouseTwo.goingUp(one));
    System.out.println(Arrays.toString(two));
    System.out.println("is going Up ?  " + ArrayFunHouseTwo.goingUp(two));
    //add more test cases
    //System.out.println(Arrays.toString(three));
    //System.out.println("is going Up ?  " + ArrayFunHouseTwo.goingUp(three));
    //System.out.println(Arrays.toString(four));
    //System.out.println("is going Up ?  " + ArrayFunHouseTwo.goingUp(four)); 
```

我希望它打印出来，从而证明它正在读取整个数组，但它读取的唯一数组是第三个数组，它将打印位置 x 处的所有值或 x 的值，具体取决于我如何对`println()`语句进行编码

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T02:20:38.187

```
if(num > numMinus){
    return true;
} 
```

这意味着一旦您找到一个大于其先前数字的数字，它将终止循环。你现在想要做的是这样的事情。

```
...
    if(num <= numMinus){
        return false;
    }
}
return true;
} 
```

编辑：将条件修复为`<=`基本上检查连续数字，如果数字相等或减少，则将标志设置为 false（实际上此时您可以返回 false）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:46:15.073

好的，你有几个问题。

以 x=0 开始你的 for 循环。Java 中的所有数组都从 0 开始并运行到数组 length-1，这意味着您的 x < numArray.length 是正确的（如果您不遵循这一点，请仔细考虑）。

System.out.println(x); 将打印出 x 的值，这只是你的计数器。

System.out.println(numArray[x]); 将在 x 值处打印出数组的内容（即：从 0 开始到最后一个长度为 1）

numMinus = numArray[x-1]; 将给您带来问题，因为您无法查看 -1 索引。而是将 x 处的值与 x+1 处的值进行比较。即： (numArray[x] < numArray[x+1]) 应该返回 true 因为您正在查看 numArray[x+1]，请将 for 循环中的条件更改为 x < numArray.length-1，否则您将结束向上查看数组末尾时会产生错误。

目前，您正在返回第一次比较的结果，因为 return 会破坏您的循环，我很确定您仅在检查所有值之后才想要结果，至少在您得到 false 或用完值之前。

在此函数中创建一个布尔值，并使用它来跟踪每对是否为真。如果该值变为 false，则返回它。否则在函数末尾返回（它只能是真的）值。

不知道我是否遇到了所有问题，但如果解决这些问题，您就会顺利进行。

# javascript - javascript：使用数组创建撤消 - 导航数组的困难

> ID：13871776
> 
> 赞同：0
> 
> 时间：2012-12-14T02:18:44.723
> 
> 标签：javascript, arrays, textarea, counter, undo

我正在尝试在 textarea 中创建撤消功能，因为我发现 IE 上的“必须在工作中使用它”的本机功能缺失。

这个想法是在用户按下空格、退格、删除或右键单击鼠标时推送到数组。我遇到问题的地方是使用 Z 键浏览数组“历史”。我在想，如果我每次按下 Z 键时都增加一个计数器，然后从 array.length 中减去它，这将允许我浏览历史记录。

这是我为测试[http://jsfiddle.net/synthet1c/5fqe3/2/而制作的 JSFiddle](http://jsfiddle.net/synthet1c/5fqe3/2/)

这是我遇到问题的脚本部分

```
//keypress listener script

var pos = undo.length - 1

if(key_code == "90"){
var counter = 0
counter++;
var newCount = pos - counter;
e.preventDefault();
id("myTextarea").value = undo[newCount] + " ";
id('counter').innerHTML = counter; 
```

}

此外，在按空格键以节省内存时仅将最后一个单词推入数组的任何想法都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:22:50.853

好吧，每次按键都将您的计数器重置为 0 `var counter = 0`，如果您想增加计数器，您应该声明您`var counter = 0;`退出按键事件。在您的操作之后增加计数器

[http://jsfiddle.net/roine/5fqe3/4/](http://jsfiddle.net/roine/5fqe3/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:30:32.663

编写自己的撤消工具是一个很好的练习，但您可能还需要考虑现有的解决方案，例如[StackOverflow 文章中提到的那些](https://stackoverflow.com/questions/1979863/undo-redo-plugin-in-jquery)

# c# - 实例化一个抽象类？

> ID：13871788
> 
> 赞同：1
> 
> 时间：2012-12-14T02:20:56.817
> 
> 标签：c#

```
public abstract class T
{
    public abstract IEnumerable<T> MakeOneMove();

    public IEnumerable<T> MakeOneMove(string evt)
    {
        List<T> returnList = new List<T>();
        IEnumerable<T> steps = MakeOneMove();
        foreach (T step in steps)
        {
            if (step.Event == evt)
            {
                returnList.Add(step);
            }
        }
        return returnList;
    } 
```

在其他地方，该类的使用如下：

```
 T currentImpl = pendingImpl.Pop();

            IEnumerable<T> nextImpl = currentImpl.MakeOneMove();
            foreach (ConfigurationBase next in nextImpl){

            } 
```

我对两件事感到困惑。似乎类 T 正在被实例化，但类 T 是一个抽象类。我以为这是不可能的。我认为只能实例化抽象类的非抽象子类。另外，在类中，调用了 makeonemove() ，但是没有参数的版本不是没有被覆盖，因此没有定义吗？在我看来，这段代码不应该编译，但它确实可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:22:36.483

> 我对两件事感到困惑。似乎类 T 正在被实例化，但类 T 是一个抽象类。我以为这是不可能的。我认为只有子类可以被实例化。

`abstract class T`没有被实例化，它只是一个指向`abstract class`.

> 另外，在类中，调用了 makeonemove() ，但是没有参数的版本不是没有被覆盖吗？在我看来，这段代码不应该编译，但它确实可以。

这是使用抽象类的好处之一。它允许您提供*可以*在派生类中覆盖的成员的*“基本”*实现。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:15:15.087

不，T 只是意味着该类必须可转换为 T（即它继承自它并且可以转换为 T）。

我建议在这里检查以阅读继承： [http ://www.csharp-station.com/Tutorial/CSharp/lesson08](http://www.csharp-station.com/Tutorial/CSharp/lesson08)

在这里阅读有关铸造的信息： http: [//csharp-station.com/Tutorial/CSharp/Lesson22](http://csharp-station.com/Tutorial/CSharp/Lesson22)

本质上，如果一个类继承了另一个类，它可以被强制转换为该类的一个实例，因此被视为该类进行强制转换。

假设我创建了一个继承自 T 的 H 类，然后将其转换为 T，在该转换期间，H 基本上会伪装成 T，您只能访问它从 T 继承的元素。假设我给了 H a函数名为“MakeTwoMoves”，然后创建了一个名为“hi”的 H 实例（例如 H hi = new H();）我可以调用 MakeOneMove 和 MakeTwoMoves。但是，一旦将其转换为 T（例如（T）H），您就无法再访问 MakeTwoMoves，因为它没有在 T 中声明，它是 H 独有的。

然而，这对您的代码意味着什么，pendingImpl 很可能会包含一个继承自 T 的类的实例数组（例如我的示例中的 H）。然后它们被转换到 pop 方法中（或者可能更早，即在放入内部数组之前）并作为 T 出来，所以每个实例可能是一个完全不同的类，但你唯一知道的就是它们继承自T。

我希望澄清一下，T 不是最直观的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T02:37:40.140

不，该类`T`是抽象的。在方法调用`T currentImpl = pendingImpl.Pop();`中，T 只是意味着返回的对象将是从 T 派生的类型，它有效地建立（声明）变量 named`currentImpl`的类型，而不是对象本身的类型。

被实例化的对象的实际类型将是`pendingImpl.Pop()`创建的任何类型。看起来`Pop()`就是所谓的工厂方法。您必须查看它是如何实现的，才能准确了解实例化和返回的类型。*

# php - CodeIgniter num_rows() 不工作？

> ID：13871789
> 
> 赞同：0
> 
> 时间：2012-12-14T02:20:59.933
> 
> 标签：php, codeigniter

好的，我不知道什么不起作用。我知道我的表单验证肯定是有效的，因为我的所有其他功能都可以正常工作，但是我正在设置消息，无论是真还是假，它们都没有出现，所以我觉得它正在跳过验证规则......这很奇怪...... .

```
$this->form_validation->set_rules('region', 'required|valid_region'); 
```

我的库文件夹中 MY_Form_validation.php 中的规则。首先加载库。正如我所说，我的所有其他验证都可以正常工作，例如我的 reCaptcha 和所有内容。

```
function valid_region($str) {
        $this->load->database();
        if($this->db->query('SELECT id
                FROM region
                WHERE name = ?
                LIMIT 1', array($str))->num_rows() == 0) {
            //not a valid region name
            $this->set_message('valid_region', 'The %s field does not have a valid value!');
            return false;
        }

        $this->set_message('valid_region', 'Why is it validating?');
    } 
```

没有任何消息会设置，所以我感觉没有任何东西可以验证！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T02:36:38.723

[`set_rules()`](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#validationrules)函数接受 3 个参数

> 1.  字段名称 - 您为表单字段指定的确切名称。
> 2.  此字段的“人”名，将插入到错误消息中。例如，如果您的字段被命名为“用户”，您可以给它一个人名“用户名”。注意：如果您希望将字段名称存储在语言文件中，请参阅翻译字段名称。
> 3.  此表单字段的验证规则。

您将验证规则作为第二个参数。这就是验证未运行的原因。试试这个：

```
$this->form_validation->set_rules('region', 'Region', 'required|valid_region'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T02:32:50.493

代替

```
$this->form_validation->set_rules('region', 'required|valid_region'); 
```

尝试

```
$this->form_validation->set_rules('region', 'required|callback_valid_region'); 
```

使用自定义验证规则时，您应该使用

**回调**以添加函数名称。

**更新**

并使用

```
$this->form_validation->set_message 
```

代替

```
$this->set_message 
```

并且在`function valid_region`

`return true`验证成功时使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T04:55:27.407

```
$this->form_validation->set_rules('region', 'Region', 'required|valid_region');

function valid_region() {
    $str = $this->input->post('name_of_input');
    $this->load->database();
    if($this->db->query('SELECT id
            FROM region
            WHERE name = ?
            LIMIT 1', array($str))->num_rows() == 0) { // why compare "=" between `name` field and array() ?
        //not a valid region name
        $this->form_validation->set_message('valid_region', 'The %s field does not have a valid value!');
        return false;
    }

    $this->form_validation->set_message('valid_region', 'Why is it validating?');
    return true;
} 
```

# vmware - VMWare Workstation：从 vmdk 自动安装和部署

> ID：13871791
> 
> 赞同：0
> 
> 时间：2012-12-14T02:21:40.557
> 
> 标签：vmware, vmware-workstation

我正在构建一个（手动）可引导的 .vmdk 文件，但希望通过使用 .vmdk 创建所有必要的 VM 文件并使其引导来进一步自动化该过程。

我怎样才能做到这一点？

感谢您的阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-15T07:39:00.313

解决了。我希望通过 API 找到一种优雅的方式来执行此操作，但解决方案就像手动创建 VM 一样简单，然后交换生成文件中的所有文件引用，并完全替换 .vmdk。

# javascript - 访问 wysihtml5 编辑器对象以在“事件”中使用它？

> ID：13871799
> 
> 赞同：2
> 
> 时间：2012-12-14T02:23:30.023
> 
> 标签：javascript, twitter-bootstrap, wysihtml5

我在[bootstrap-wysihtml5 的文档中](https://github.com/jhollingworth/bootstrap-wysihtml5)发现了这一点：

```
The underlying wysihtml5 object
You can access the wysihtml5 editor object like this:

var wysihtml5Editor = $('#some-textarea').wysihtml5().data("wysihtml5").editor;
wysihtml5Editor.composer.commands.exec("bold"); 
```

所以我尝试了这个：

```
 <script type="text/javascript">
  var myCustomTemplates = {
    link : function(locale) {
      return "<li>" +
        "<div class='bootstrap-wysihtml5-insert-link-modal modal hide fade'>" +
          "<div class='modal-header'>" +
            "<a class='close' data-dismiss='modal'>&times;</a>" +
            "<h3>" + locale.link.insert + "</h3>" +
          "</div>" +
          "<div class='modal-body'>" +
            "<input value='http://' class='bootstrap-wysihtml5-insert-link-url input-xlarge'>" +
          "</div>" +
          "<div class='modal-footer'>" +
            "<a href='#' class='btn' data-dismiss='modal'>" + locale.link.cancel + "</a>" +
            "<a href='#' class='btn btn-primary' data-dismiss='modal'>" + locale.link.insert + "</a>" +
          "</div>" +
        "</div>" +
        "<a class='btn' data-wysihtml5-command='createLink' title='" + locale.link.insert + "'><i class='icon-link'></i></a>" +
      "</li>";
    },
    "font-styles": function(locale, options) {
      return "<li>" +
        "<a class='logo'>Logo</a>" +
      "</li>" +
      "<li>" +
        "<a class='btn btn-paragraph' data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='p'>" + locale.font_styles.p + "</a>" +
      "</li>" +
      "<li>" +
        "<a class='btn btn-paragraph' data-wysihtml5-command='formatBlock' data-wysihtml5-command-value='p'>" + locale.font_styles.p + "</a>" +
      "</li>";
    }
  }

  $('#wysihtml5-textarea').wysihtml5('deepExtend', {
    "font-styles": true, //Font styling, e.g. h1, h2, etc. Default true
    "emphasis": true, //Italics, bold, etc. Default true
    "lists": true, //(Un)ordered lists, e.g. Bullets, Numbers. Default true
    "html": true, //Button which allows you to edit the generated HTML. Default false
    "image": false, //Button to insert an image. Default true,
    "link": false,
    "format-code": false, // enable syntax highlighting
    customTemplates: myCustomTemplates,
    "events": {
      "focus": function() { 
        //var wysihtml5Editor = $('#wysihtml5-textarea').wysihtml5().data("wysihtml5").editor;
        //wysihtml5Editor.composer.commands.exec("insertHTML", "<a href=...>");
      }
    },
    parserRules: {
      tags: {
        p: {}
      }
    },
    "stylesheets": ["<%= root_url %>wysiwyg-color.css", "<%= root_url %>github.css"], // CSS stylesheets to load
  });
 </script> 
```

但它似乎正在破坏代码：

```
GET http://localhost:3000/posts/lib/css/wysiwyg-color.css 404 (Not Found) 
```

而且`wysihtml5Editor.composer.commands.exec`也不工作。

（如果我不包含里面的内容，文件加载就好了`"focus": function() {`）

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T03:06:23.877

**编辑**

这是一个最低限度的工作代码，用作起点：

```
// I use this to keep this code out of the global scope. 
// This takes this form: (function($){...})(jQuery);
// and allows me to use $ without worry about it interfering
// with other libraries and frameworks that share it's use.
(function priv($) {
    // This is another scope thing; I can set the reference
    // later on, but it will be in the parent scope, so I
    // can cache these and then access them from within a
    // window.onload handler, for instance, that I create 
    // further down.
    var $editor,
        opts;

    // A more elegant, clean way of doing what was in the docs.
    opts = {
        // Note, it's not necessary to use quotes on labels in
        // object notation, UNLESS there's something not allowed.
        // This and format-code have comments ONLY because they
        // have that infernal dash in there. No others in this 
        // list do, however.
        'font-styles': false,
        'format-code': false,
        emphasis: true,
        lists: true,
        html: false,
        image: false,
        link: false,
        events: { 
            // Passing a reference to a function I've declared
            // later. I could not have this before the actual
            // functions, though, if I use var onload = function...
            // since "hoisting" does not occur. So, be careful
            // emulating this too liberally if you don't under
            // why it works.
            load: onload,
            focus: onfocus,
            blur: onblur
        }
    };

    // I'm using the `window.onload` method to setup my editor
    // AFTER the page has loaded and the DOM is ready. 
    $(window).on('load', function load() {
        // See, I set this up here, and can access it in the
        // onload, onfocus, and onblur handlers without 
        // requerying. It's called caching a reference.
        $editor = $('#wysihtml5-textarea');

        $editor.wysihtml5(opts);
    });

    function onload() {
        console.log('load');
    }

    function onfocus() {
        console.log('focus');
    }

    function onblur() {
        console.log('blur');
    }

})(jQuery);​ 
```

[http://jsfiddle.net/userdude/nWebx/5/](http://jsfiddle.net/userdude/nWebx/5/)

* * *

我将[wysihtml5 编辑器演示](http://jhollingworth.github.com/bootstrap-wysihtml5/)放在[正确运行的小提琴](http://jsfiddle.net/userdude/nWebx/)中，然后对其进行修改以运行您引用的代码：

```
$(window).on('load', function load(){
    /*$('.textarea').wysihtml5();
    $(prettyPrint);*/

    $('#wysihtml5-textarea').wysihtml5('deepExtend', {
        "font-styles": true, //Font styling, e.g. h1, h2, etc. Default true
        "emphasis": true, //Italics, bold, etc. Default true
        "lists": true, //(Un)ordered lists, e.g. Bullets, Numbers. Default true
        "html": true, //Button which allows you to edit the generated HTML. Default false
        "image": false, //Button to insert an image. Default true,
        "link": false,
        "format-code": false, // enable syntax highlighting
        customTemplates: myCustomTemplates,
        "events": {
            "focus": function() { 
                var wysihtml5Editor = $('#wysihtml5-textarea').wysihtml5().data("wysihtml5").editor;
                wysihtml5Editor.composer.commands.exec("insertHTML", "<a href=...>");
            }
        },
        parserRules: {
            tags: {
                p: {}
            }
        },
        "stylesheets": ["<%= root_url %>wysiwyg-color.css", "<%= root_url %>github.css"], // CSS stylesheets to load
    });
}) 
```

[http://jsfiddle.net/userdude/nWebx/2/](http://jsfiddle.net/userdude/nWebx/2/)

照原样，我在 Chrome 控制台中收到此错误：

> 未捕获的 ReferenceError：未定义 myCustomTemplates

所以我评论那条线，它运行。尝试一下：

[http://jsfiddle.net/userdude/nWebx/1/](http://jsfiddle.net/userdude/nWebx/1/)

现在，我正在`window.onload`使用 jQuery 的`$.on()`事件处理程序方法在事件中运行编辑器代码：

```
$(window).on('load', function load(){
    $('#wysihtml5-textarea').wysihtml5('deepExtend', {
        ...
    });
}) // <<< I'd try to always using `;` at the end of statements. 
```

而且我也没有得到`focus`处理程序的错误，尽管我需要检查它的事件是否从一开始就运行。那么，里面有什么`myCustomTemplates`？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T02:43:44.343

尝试这样的事情：

```
var wysihtml5Editor = $('#some-textarea').wysihtml5().data("wysihtml5").editor;
wysihtml5Editor.composer.commands.exec("bold"); 
var focusHanlder = function(){
     console.log(wysihtml5Editor);
     wysihtml5Editor.composer.commands.exec("insertHTML", "<a href=...>");
}

var secondFocusHandler = function(){
    console.log(this);
    this.composer.commands.exec("insertHTML", "<a href=...>");
}.bind(wysihtml5Editor); 
```

where`focusHandler`使用外部变量`wysihtml5Editor`并将`secondFocusHanlder`该变量用作`this`调用内部。现在将这些变量之一传递给`focus`事件。

这是在 wysihtml5Editor 上使用事件的一个小例子：[https ://github.com/xing/wysihtml5/wiki/Events](https://github.com/xing/wysihtml5/wiki/Events)

# c# - 在 C# Web 浏览器中更新选项卡的名称

> ID：13871800
> 
> 赞同：-1
> 
> 时间：2012-12-14T02:24:11.913
> 
> 标签：c#, tabs

我正在使用 Visual Studio 2010 中的 Web 浏览器，但无法将选项卡名称更新为网站名称。例如，当您访问 CNN.Com 之类的网站时，我希望标签页也显示“cnn.com”。顺便说一句，该项目没有使用默认的 WebBrowser 表单。请以最简单的方式解释它，因为我是 C# 新手（刚从 C++ 和 Java 迁移）所以我不熟悉使用 Windows 表单。谢谢。任何帮助表示赞赏。

这是问题的图片：http: [//postimage.org/image/5ym4yx0pt/](http://postimage.org/image/5ym4yx0pt/)

……

```
 public Form1()
    {
        InitializeComponent();
    }

    int i = 1;
    private void Form1_Load(object sender, EventArgs e)
    {
        WebBrowser Browse = new WebBrowser();
        //Load a tab when loading form
        tabControl1.TabPages.Add("Tab");//problem
        tabControl1.SelectTab(i - 1);
        Browse.Name = "Lithium Browser";
        Browse.Dock = DockStyle.Fill;
        tabControl1.SelectedTab.Controls.Add(Browse);
        i++;
        ((WebBrowser)tabControl1.SelectedTab.Controls[0]).Navigate("www.google.com");
    }

    private void button1_Click(object sender, EventArgs e)
    {
        ((WebBrowser)tabControl1.SelectedTab.Controls[0]).Navigate(textBox1.Text);
    }

    private void toolStripButton1_Click(object sender, EventArgs e)
    {
        WebBrowser Browse = new WebBrowser();
        tabControl1.TabPages.Add("Tab"); //problem
        tabControl1.SelectTab(i - 1);
        Browse.Name = "Lithium Browser";
        Browse.Dock = DockStyle.Fill;
        tabControl1.SelectedTab.Controls.Add(Browse);
        i++;
    }

    private void toolStripButton2_Click(object sender, EventArgs e)
    {
        tabControl1.TabPages.RemoveAt(tabControl1.SelectedIndex);
        tabControl1.SelectTab(tabControl1.TabPages.Count - 1);
        i = i- 1;

    }

    private void toolStripButton3_Click(object sender, EventArgs e)
    {
        ((WebBrowser)tabControl1.SelectedTab.Controls[0]).GoBack();
    }

    private void toolStripButton4_Click(object sender, EventArgs e)
    {
        ((WebBrowser)tabControl1.SelectedTab.Controls[0]).GoForward();
    }

    private void toolStripButton5_Click(object sender, EventArgs e)
    {
        ((WebBrowser)tabControl1.SelectedTab.Controls[0]).GoHome();
    }

    private void toolStripButton6_Click(object sender, EventArgs e)
    {
        ((WebBrowser)tabControl1.SelectedTab.Controls[0]).Refresh();
    }

    private void toolStripButton7_Click(object sender, EventArgs e)
    {
        ((WebBrowser)tabControl1.SelectedTab.Controls[0]).Stop();
    }

    private void yahooSearchToolStripMenuItem_Click(object sender, EventArgs e)
    {
        toolStripDropDownButton1.Text = yahooSearchToolStripMenuItem.Text;
    }

    private void youtubeSearchToolStripMenuItem_Click(object sender, EventArgs e)
    {
        toolStripDropDownButton1.Text = youtubeSearchToolStripMenuItem.Text;
    }

    private void googleSearchToolStripMenuItem_Click(object sender, EventArgs e)
    {
        toolStripDropDownButton1.Text = googleSearchToolStripMenuItem.Text;
    }

    private void toolStripButton8_Click(object sender, EventArgs e)
    {
        if (toolStripDropDownButton1.Text == googleSearchToolStripMenuItem.Text)
        {
            ((WebBrowser)tabControl1.SelectedTab.Controls[0]).Navigate("http://www.google.com/search?q=" + toolStripTextBox1.Text);
        }

        if (toolStripDropDownButton1.Text == yahooSearchToolStripMenuItem.Text)
        {
            ((WebBrowser)tabControl1.SelectedTab.Controls[0]).Navigate("http://search.yahoo.com/search?p=" + toolStripTextBox1.Text);
        }

        if (toolStripDropDownButton1.Text == youtubeSearchToolStripMenuItem.Text)
        {
            ((WebBrowser)tabControl1.SelectedTab.Controls[0]).Navigate("http://www.youtube.com/results?search_query=" + toolStripTextBox1.Text);
        }
    }

    private void textBox1_TextChanged(object sender, EventArgs e)
    {

    }

    //add KeyUp event for detecting 'Enter' key
    //navigate to specified URL withoud pressing the 'Go' button
    private void textBox1_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Enter)
        {
            ((WebBrowser)tabControl1.SelectedTab.Controls[0]).Navigate(textBox1.Text);
        }

    }

    private void toolStripTextBox1_KeyUp(object sender, KeyEventArgs e)
    {
        if (e.KeyCode == Keys.Enter)
        {
            if (toolStripDropDownButton1.Text == googleSearchToolStripMenuItem.Text)
            {
                ((WebBrowser)tabControl1.SelectedTab.Controls[0]).Navigate("http://www.google.com/search?q=" + toolStripTextBox1.Text);
            }

            if (toolStripDropDownButton1.Text == yahooSearchToolStripMenuItem.Text)
            {
                ((WebBrowser)tabControl1.SelectedTab.Controls[0]).Navigate("http://search.yahoo.com/search?p=" + toolStripTextBox1.Text);
            }

            if (toolStripDropDownButton1.Text == youtubeSearchToolStripMenuItem.Text)
            {
                ((WebBrowser)tabControl1.SelectedTab.Controls[0]).Navigate("http://www.youtube.com/results?search_query=" + toolStripTextBox1.Text);
            }

            if (toolStripDropDownButton1.Text == youtubeSearchToolStripMenuItem.Text)
            {
                ((WebBrowser)tabControl1.SelectedTab.Controls[0]).Navigate("http://en.wikipedia.org/wiki/" + toolStripTextBox1.Text);
            }

            if (toolStripDropDownButton1.Text == youtubeSearchToolStripMenuItem.Text)
            {
                ((WebBrowser)tabControl1.SelectedTab.Controls[0]).Navigate("http://en.wikipedia.org/wiki/" + toolStripTextBox1.Text);
            }

        }
    }

    private void newTabToolStripMenuItem_Click(object sender, EventArgs e)
    {
        WebBrowser Browse = new WebBrowser();
        tabControl1.TabPages.Add("Tab");
        tabControl1.SelectTab(i - 1);
        Browse.Name = "Lithium Browser";
        Browse.Dock = DockStyle.Fill;
        tabControl1.SelectedTab.Controls.Add(Browse);
        i++;
    }

    private void closeTabToolStripMenuItem_Click(object sender, EventArgs e)
    {
        tabControl1.TabPages.RemoveAt(tabControl1.SelectedIndex);
        tabControl1.SelectTab(tabControl1.TabPages.Count - 1);
        i = i - 1;
    }

    private void printDocument1_PrintPage(object sender, System.Drawing.Printing.PrintPageEventArgs e)
    {

    }

    private void printToolStripMenuItem_Click(object sender, EventArgs e)
    {
        PrintDialog printDialog = new PrintDialog();
        printDialog.ShowDialog();
    }

    private void printPreviewDialog1_Load(object sender, EventArgs e)
    {

    }

    private void printPreviewToolStripMenuItem_Click(object sender, EventArgs e)
    {
        //Associate PrintPreviewDialog with PrintDocument.
        printPreviewDialog1.Document = printDocument1;

        // Show PrintPreview Dialog
        printPreviewDialog1.ShowDialog();
    }

    private void exitToolStripMenuItem_Click(object sender, EventArgs e)
    {
        if (MessageBox.Show("Exit?", "Exit", MessageBoxButtons.OKCancel) == DialogResult.OK)
        {

            Application.Exit();

        }
    }

    // Bring up 'Print Dialog'
    private void pageSetupToolStripMenuItem_Click(object sender, EventArgs e)
    {
        PageSetupDialog pageSetup = new PageSetupDialog();
        pageSetup.PrinterSettings = new System.Drawing.Printing.PrinterSettings();
        pageSetup.PageSettings = new System.Drawing.Printing.PageSettings();
        pageSetup.EnableMetric = false;
        pageSetup.ShowDialog();
    }

    private void stopToolStripMenuItem_Click(object sender, EventArgs e)
    {
        ((WebBrowser)tabControl1.SelectedTab.Controls[0]).Stop();
    }

    private void refreshToolStripMenuItem_Click(object sender, EventArgs e)
    {
        ((WebBrowser)tabControl1.SelectedTab.Controls[0]).Refresh();
    }

    private void homeToolStripMenuItem_Click(object sender, EventArgs e)
    {
        ((WebBrowser)tabControl1.SelectedTab.Controls[0]).GoHome();
    }

    private void previousPageToolStripMenuItem_Click(object sender, EventArgs e)
    {
        ((WebBrowser)tabControl1.SelectedTab.Controls[0]).GoBack();
    }

    private void nextPageToolStripMenuItem_Click(object sender, EventArgs e)
    {
        ((WebBrowser)tabControl1.SelectedTab.Controls[0]).GoForward();
    }

    private void tabControl1_SelectedIndexChanged(object sender, EventArgs e)
    {

    }

    private void aboutToolStripMenuItem_Click(object sender, EventArgs e)
    { 
        Form2 about = new Form2();
        about.Show();
    }

    private void calenderToolStripMenuItem_Click(object sender, EventArgs e)
    {
        calenForm cal = new calenForm();
        cal.Show();
    }
 } 
```

}

............

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T04:43:53.310

假设`WebBrowser`是内置的`WebBrowser`，您可以在`OnDocumentTitleChanged`每次`WebBrowser`更改文档标题时触发事件以更改选项卡文本。

为此，在表单加载事件中，在声明浏览后，开始输入`browse.DocumentTitleChanged +=`，并且应该出现一个工具提示，说“插入此代码的选项卡”或类似的内容。只需 Tab 两次，Visual Studio 就会为您插入一个新方法，并带有`throw new NotImplementedException();`一行。删除该行并将其替换为将选项卡文本更改为浏览器的`DocumentTitle`.

如果您需要更多信息，我建议您查看文档：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.aspx)

虽然我相信使用事件是最好的解决方案。事件被设计为在某些重要的编程“事件”发生时执行，更改网页是此类事件的一个示例。（如果这有助于您的理解，事件大致相当于 C# 的 C++ 函数指针。虽然它们更类似于`std::vector`函数指针。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T02:56:10.360

为包含在两个标签中的页面文本设置 HTML 标题标签将显示在显示网页的选项卡中。

[有关如何在代码隐藏中使用 Eval 设置 Page.Title](https://stackoverflow.com/questions/2359790/how-to-use-eval-in-codebehind-to-set-page-title)后面的代码中设置标题的更多信息，请参阅以下内容

还有这个链接

[http://www.asprobot.com/ASP.NET/ASPNET-Title-Tag-and-Meta-Tags](http://www.asprobot.com/ASP.NET/ASPNET-Title-Tag-and-Meta-Tags)

# java - Android - LinearLayout 不添加自定义视图

> ID：13871803
> 
> 赞同：0
> 
> 时间：2012-12-14T02:25:22.677
> 
> 标签：java, android, nullpointerexception, android-linearlayout, viewgroup

注意：由于我发现自己的愚蠢，这个问题已经解决

我想向 a 添加一个自定义类`LinearLayout`，但由于某种原因，我不断得到一个`NullPointerException`.

这是处理加法的方法：

```
protected void onPostExecute(String results) {
        System.out.println("ON POST EXECUTE : " + results);
        try {
            if(!results.equals(((MessageBlurb)container.getChildAt(0)).getMessage())){
                try {
                    container.removeViewAt(30);
                    for (int i = 29; i > 0; i--) {
                        container.addView(container.getChildAt(i-1), i);
                        container.removeViewAt(i-1);
                    }
                    container.addView(new MessageBlurb(getApplicationContext(), results, Color.BLACK), 0);
                } catch (NullPointerException e) {
                    // TODO: handle exception
                }
            }
        }
        catch (Exception e) {
            MessageBlurb mb = new MessageBlurb(getApplicationContext(), results, Color.BLACK);
            mb.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
            System.out.println(mb);
            container.addView(mb, 0);
        }

    } 
```

whereextends ，因为我有一个`MessageBlurb`里面的。`ViewGroup``TextView``MessageBlurb`

该类`MessageBlurb`如下所示：

```
public MessageBlurb(Context context, String message, int color){
    super(context);
    myTV = new TextView(context);
    this.addView(myTV);
    myTV.setText(message);
    System.out.println("THE BLURB IS CREATED");
    this.setOnClickListener(new OnClickListener() {

        public void onClick(View v) {
            System.out.println("YOU CLIKED THE BLURB");

        }
    });

} 
```

我打印了 的描述`mb`，它给了我一个内存位置。除此之外，logcat 错误指向这一行：

```
container.addView(mb, 0); 
```

它`container`本身是在文件`LinearLayout`中定义的。`activity_main.xml`它通过以下代码行初始化：

```
container = (LinearLayout)findViewById(R.id.container); 
```

xml文件中Layout的id也称为`container`

有人可以看到我做错了什么吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T22:31:08.243

我不是 100% 确定这是否是问题所在，但以下代码看起来只是在自找麻烦：

```
 container.removeViewAt(30);
                for (int i = 29; i > 0; i--) {
                    container.addView(container.getChildAt(i-1), i);
                    container.removeViewAt(i-1);
                }
                container.addView(new MessageBlurb(getApplicationContext(), results, Color.BLACK), 0); 
```

看起来您正在尝试删除容器中的最后一个视图并在顶部添加一个新的 MessageBlurb。但是您不需要像那样手动向下移动所有视图，只需在位置 0 添加一个新视图即可为您完成所有这些工作。尝试用这个替换它：

```
 container.removeViewAt(30);
                container.addView(new MessageBlurb(getApplicationContext(), results, Color.BLACK), 0); 
```

另外，您是否有充分的理由`getApplicationContext()`在创建消息简介时使用？您的代码看起来像是嵌套在 Activity 类中的 AsyncTask 类的一部分，因此您可以并且应该将 Activity 本身作为上下文（即`new MessageBlurb(Activity.this, results, Color.BLACK)`或类似的东西）传递。

希望有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T00:43:13.537

事实证明，我是一个彻头彻尾的白痴。我查看了我的 onCreate() 并发现我已经注释掉了这一行： `setContentView(...)`

尽管如此，我还是要感谢所有回复此主题的人。对不起，所有的烦恼！:)

# c# - 对 Apple 的 APNS 的 PushSharp 通知不起作用，不会引发任何异常

> ID：13871806
> 
> 赞同：2
> 
> 时间：2012-12-14T02:25:49.237
> 
> 标签：c#, .net, apple-push-notifications, pushsharp

我不知道为什么这不起作用，也没有抛出任何错误。任何订阅的事件都不会被触发（包括`OnNotificationSent`和`OnNotificationSendFailure`）。该代码几乎与 PushSharp[在 GIT 中的示例代码](https://github.com/Redth/PushSharp/blob/master/PushSharp.Sample/Program.cs)相同，唯一的区别是它在线程内运行：

```
public class MyNotificationService
{
    ILog _log = LogManager.GetLogger("");
    PushService _PushService;
    public void Start()
    {
    PushService _PushService;
    byte[] appleCert = File.ReadAllBytes("myCert.p12");
    _PushService = new PushService();
    _PushService.Events.OnChannelCreated += Events_OnChannelCreated;
    _PushService.Events.OnChannelDestroyed += Events_OnChannelDestroyed;
    _PushService.Events.OnChannelException += Events_OnChannelException;
    _PushService.Events.OnDeviceSubscriptionExpired += Events_OnDeviceSubscriptionExpired;
    _PushService.Events.OnDeviceSubscriptionIdChanged += Events_OnDeviceSubscriptionIdChanged;
    _PushService.Events.OnNotificationSendFailure += Events_OnNotificationSendFailure;
    _PushService.Events.OnNotificationSent += Events_OnNotificationSent;

    _PushService.StartApplePushService(new ApplePushChannelSettings(false, appleCert, "myPass"));
            _MainThread = new Thread(() =>
            {
                try 
                {
            var nt = NotificationFactory.Apple()
            .ForDeviceToken("60A378B0FF0628FB52461C6F9F2CEDAA29A05D52F97EF2E811")
            .WithAlert("Test")
            .WithSound("default")
            .WithCustomItem("data", "some other data")
            .WithBadge(7);
            _PushService.QueueNotification(nt);
                    }
                    catch (Exception e)
                    {
                        _log.Error("In main thread", e);
                    }
                }
            });
            _MainThread.Start();
    }

    static void Events_OnDeviceSubscriptionIdChanged(PlatformType platform, string oldDeviceInfo, string newDeviceInfo, Notification nt)
    {
        //Currently this event will only ever happen for Android GCM
        _log.Debug("Device Registration Changed:  Old-> " + oldDeviceInfo + "  New-> " + newDeviceInfo);
    }

    static void Events_OnNotificationSent(Notification nt)
    {
        _log.Debug("Sent: " + nt.Platform.ToString() + " -> " + nt.ToString());
    }

    static void Events_OnNotificationSendFailure(Notification nt, Exception notificationFailureException)
    {
        _log.Error("Failure: " + nt.Platform.ToString() + " -> " + notificationFailureException.Message + " -> " + nt.ToString());
    }

    static void Events_OnChannelException(Exception exception, PlatformType platformType, Notification nt)
    {
        _log.Error("Channel Exception: " + platformType.ToString() + " -> " + exception.ToString());
    }

    static void Events_OnDeviceSubscriptionExpired(PlatformType platform, string deviceInfo, Notification nt)
    {
        _log.Debug("Device Subscription Expired: " + platform.ToString() + " -> " + deviceInfo);
    }

    static void Events_OnChannelDestroyed(PlatformType platformType, int newChannelCount)
    {
        _log.Debug("Channel Destroyed for: " + platformType.ToString() + " Channel Count: " + newChannelCount);
    }

    static void Events_OnChannelCreated(PlatformType platformType, int newChannelCount)
    {
        _log.Debug("Channel Created for: " + platformType.ToString() + " Channel Count: " + newChannelCount);
    }

} 
```

同样，没有任何事件被触发（没有记录，没有命中断点）。奇怪的是，呼叫`StopAllServices`永远挂起，显然没有做任何事情。我已经多次检查了我的配置文件和证书，但没有发现它们有任何问题。有任何想法吗？

**编辑：**

**事实证明，只有当我从 Windows Service .Net 项目运行它时，才能重现该问题。从控制台应用程序，一切正常。我认为这是阻止网络访问的权限问题，但我无法使其工作。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-18T20:42:14.187

我有同样的问题！我在我的 exe 引用的 dll 中使用 push sharp。我通过将以下内容添加到我的 app.config 来解决问题：

```
<configuration>
    <runtime>
    <assemblyBinding xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="Newtonsoft.Json" publicKeyToken="30ad4fe6b2a6aeed" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-6.0.0.0" newVersion="6.0.0.0" />
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

确保 Newtonsoft.Json dll 在您的 bin 文件夹中！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-26T17:27:38.243

我有一个类似的问题。我在我的 ASP.Net MVC 应用程序中使用了 PushSharp。确保您的应用程序和 PushSharp 版本中的 Newtonsoft.Json 版本相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-01T18:41:01.167

**第一的**

我有同样的问题。不会触发任何事件，但会传递通知。仍在寻找答案。也许[这个链接](http://redth.info/the-problem-with-apples-push-notification-ser/)会有所帮助。

**第二**（关于“StopAllServices 永远挂起”）

也许[这](https://github.com/Redth/PushSharp/issues/211)会有所帮助。简而言之 - 不应提供空设备令牌

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-11T09:27:27.567

您的服务是否作为“LocalSystem”运行？如果不是，请尝试将其安装为“LocalSystem”。

也许该服务没有网络访问权限，因此没有连接到 Internet 或数据库。

顺便说一句，设备令牌似乎很短，但如果它作为控制台应用程序工作，它应该作为服务工作。

# git - 添加 repo 作为你的遥控器和樱桃选择

> ID：13871810
> 
> 赞同：1
> 
> 时间：2012-12-14T02:27:11.297
> 
> 标签：git, cherry-pick

如何将此存储库添加为远程和樱桃选择增量补丁。 [https://github.com/adridu59/semc-7x30-kernel-ics/commits/master-V2?page=6](https://github.com/adridu59/semc-7x30-kernel-ics/commits/master-V2?page=6)

我只需要从这个 repo（而不是从其他站点）更新 android 内核

```
cd '/home/teru/android/system/kernel/semc/msm7x30'
git remote add zzz https://github.com/adridu59/semc-7x30-kernel-ics/commits/master-V2?page=6
git cherry-pick -n <commit> 
```

（我知道输入什么）但有错误

```
fatal: bad revision <commit> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:36:42.310

看起来有两个问题。首先，repo 的 URL 不正确——那只是 Github 上某个地方的 URL。其次，您需要在添加后从远程获取所有提交。

所以你应该得到这样的结果：

```
cd /home/teru/android/system/kernel/semc/msm7x30
git remote add zzz git://github.com/adridu59/semc-7x30-kernel-ics.git
git fetch zzz
git cherry-pick -n <commit> 
```

# jquery - jQuery File Upload - 我的安装显示服务器上的所有文件等

> ID：13871811
> 
> 赞同：1
> 
> 时间：2012-12-14T02:27:33.590
> 
> 标签：jquery, file, upload

我希望熟悉[**jQuery File Upload**](http://blueimp.github.com/jQuery-File-Upload/)的人可以帮助解决三个问题。

1.  我安装了它，与他们网站的演示页面（index.html）不同，[**我**](http://westlandprintworks.com/jquery-file-upload/)的显示了服务器“server/php/files”目录中的所有文件——不仅仅是那些刚刚在表单提交中上传的文件。我需要用户上传他们的文件，而不是看到其他人的上传。

2.  最初将文件添加到队列中时，它会显示正确的文件名，但在点击“开始上传”并实际发送后，它将文件命名为“(1)”、“(1) (1)”和很快。

3.  我想删除这个演示的客户端和服务器端预览和缩略图。（有些用户将上传数百兆字节的图像，我不希望任何一个系统都尝试处理这些图像。）

（顺便说一句，演示页面说上传的文件会在 5 分钟后自动删除，这似乎不是他们演示的 PHP 后端的情况。太好了 - 我不希望文件自动删除。）

PS如果不是要求太多，我只是注意到我的演示的 index.html 仍然有 action="//jquery-file-upload.appspot.com/" 在表单中，但是正在将文件写入我的服务器，并且我使困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:27:53.343

如果您要使用登录系统，请使用其唯一 ID 创建一个文件夹并将文件上传到那里。否则，您可能需要做一些花哨的命名约定，并且只显示与这些名称匹配的文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-25T04:11:51.610

# 1：

编辑主 index.php 文件并删除以下内容：

```
 <tr class="template-download fade">
  {% if (file.error) { %}
  <td></td>
  <td class="name"><span>{%=file.name%}</span></td>
  <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
  <td class="error" colspan="2"><span class="label label-important">Error</span> {%=file.error%}</td>
  {% } else { %}
  <td class="preview">{% if (file.thumbnail_url) { %}
    <a href="{%=file.url%}" title="{%=file.name%}" data-gallery="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
    {% } %}</td>
  <td class="name">
    <a href="{%=file.url%}" title="{%=file.name%}" data-gallery="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
  </td>
  <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
  <td colspan="2"></td>
  {% } %}
  <td class="delete">
    <button class="btn btn-danger" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}"{% if (file.delete_with_credentials) { %} data-xhr-fields='{"withCredentials":true}'{% } %}>
            <i class="icon-trash icon-white"></i>
      <span>Delete</span>
    </button>
    <input type="checkbox" name="delete" value="1">
  </td>
</tr> 
```

# 2

如果已经存在同名文件，则进行 (1) 命名。

# 3

＃1的解决方案也将解决这个问题。

5 分钟删除仅适用于在其服务器上运行的应用程序。

如果您所做的只是接受文件，则不需要表单操作。你可以删除它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-19T16:48:24.457

不确定您的所有问题，但第一个问题（不同用户的分离文件）通过`user_dirs`设置`UploadHandler`类来解决。在 index.php 中，你可以这样：

```
<?php
// ...
$upload_handler = new UploadHandler(array(
    'user_dirs' => true
)); 
```

有关更多详细信息，请参阅此页面：[https](https://github.com/blueimp/jQuery-File-Upload/wiki/PHP-user-directories) ://github.com/blueimp/jQuery-File-Upload/wiki/PHP-user-directories 。

# java - 上下文和活动有什么区别？

> ID：13871816
> 
> 赞同：3
> 
> 时间：2012-12-14T02:28:16.677
> 
> 标签：java, android, android-activity, constructor, android-context

> **可能重复：**
> [活动上下文和应用程序上下文之间的区别](https://stackoverflow.com/questions/4128589/difference-between-activity-context-and-application-context)

何时使用上下文和活动。我已经阅读了在构造函数中同时使用 Context 和 Activity 作为参数的代码，如下所示，请清除我

```
public AmazedView(Context context, Activity activity) {
        super(context);

        mActivity = activity;

        // init paint and make is look "nice" with anti-aliasing.
        mPaint = new Paint();
        mPaint.setTextSize(14);
        mPaint.setTypeface(mFont);
        mPaint.setAntiAlias(true);

        // setup accelerometer sensor manager.
        mSensorManager = (SensorManager)                activity.getSystemService(Context.SENSOR_SERVICE);
        // register our accelerometer so we can receive values.
        // SENSOR_DELAY_GAME is the recommended rate for games
        mSensorManager.registerListener(mSensorAccelerometer, SensorManager.SENSOR_ACCELEROMETER,
                SensorManager.SENSOR_DELAY_GAME);

        // setup our maze and marble.
        mMaze = new Maze(mActivity);
        mMarble = new Marble(this);

        // load array from /res/values/strings.xml
        mStrings = getResources().getStringArray(R.array.gameStrings);

        // set the starting state of the game.
        switchGameState(GAME_INIT);
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-14T02:58:08.320

`Context`: 是系统的句柄。上下文包含环境数据，如本地文件、数据库、... 上下文还包括许多系统服务。例如，上下文将提供对`Location Service`...的访问权限。此外，通过上下文，您可以使用资源、访问数据库和首选项、本地数据...

`Activity`:**延伸**自`Context`. 不仅如此`Activity`，还有许多其他扩展`Context`，并且每个都有自己的目的，例如：`FragmentActivity`, `Service`, `WallpaperService`。更多详细信息`Activity`，“正常”的 android 应用程序有活动。它就像您的应用程序当前运行的环境的句柄。`Activity`可以创建 UI（用户界面）

在您上面的代码中，**依赖**于其他构造函数，您应该放入`context`或`activity`对象。如您所见，如果`activity`取自相同的`context`，您可以在构造函数中使用一个参数

```
public AmazedView(Context context) {
   Activity activity = (Activity) context;
} 
```

但是你可以看到，它并不清楚，并且“隐藏”了真实的对象。因为`Activity`是上下文的子类，所以以一种非正式的方式，`Activity`有一些上下文没有的“额外的东西”。如果你把它作为一个上下文对象，没有人知道这个事实，并且会使代码看起来晦涩难懂。此外，上下文可能会变成 from`Service`例如，并且您不确定何时类型转换为`Activity`. 所以，这里做两个参数是合适的。

更重要的是，你应该小心使用 Activity 作为上下文对象，因为它可能会导致**内存泄漏**。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-14T02:41:39.057

应用程序上下文是指应用程序环境和所有组件都在其中运行的进程。它允许应用程序在各种构建块之间共享数据和资源。每当启动此应用程序的第一个组件时，就会创建应用程序上下文，无论该组件是活动、服务还是其他东西。应用程序上下文只要存在您的应用程序是有效的。因此，它独立于活动生命周期。您可以通过调用轻松获取对上下文的引用

```
 Context.getApplicationContext() or Activity.getApplication() 
```

请记住，活动和服务已经是上下文的子类，因此它们继承了上下文的所有方法。

活动通常是用户一次在设备上看到的单个屏幕。一个应用程序通常有多个活动，用户在它们之间来回切换。因此，活动是应用程序中最明显的部分。

你也可以看看这个：[什么是Android上的'Context'？](https://stackoverflow.com/questions/3572463/what-is-context-in-android)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T02:33:12.470

在 android 的开发者页面上：http: [//developer.android.com/reference/android/content/Context.html](http://developer.android.com/reference/android/content/Context.html) 它声明：

“[上下文是]有关应用程序环境的全局信息的接口。这是一个抽象类，其实现由 Android 系统提供。它允许访问特定于应用程序的资源和类，以及对应用程序的向上调用-层级操作，如发起活动、广播和接收意图等。”

如页面所述，Activity 是 Context 的间接子类。

# php - Youtube 频道订阅人数

> ID：13871817
> 
> 赞同：2
> 
> 时间：2012-12-14T02:28:32.760
> 
> 标签：php, youtube

我正在尝试获取特定 youtube 频道的订阅者数量。我提到了 Stackoverflow 上的一些链接以及外部网站，遇到了这样的[链接](https://stackoverflow.com/questions/10859627/get-youtube-subscriber-count-for-a-user)。几乎所有链接都建议我使用 youtube gdata api 并从subscriberCount 中提取计数，但以下代码

```
$data   = file_get_contents("http://gdata.youtube.com/feeds/api/users/Tollywood/playlists");
$xml    = simplexml_load_string($data); 
```

print_r($xml);

不返回这样的subscriberCount。有没有其他方法可以让订阅者计数，或者我做错了什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-06-24T22:14:13.810

YouTube API v2.0 已弃用。这是使用 3.0 的方法。不需要 OAuth。

1) 登录谷歌账户并访问[https://console.developers.google.com/](https://console.developers.google.com/)。您可能需要开始一个新项目。

2) 导航到`APIs & auth`公共 API 访问 -> 创建新密钥

3) 选择您需要的选项（我使用“浏览器应用程序”）这将为您提供 API 密钥。

4) 在 YouTube 中导航到您的频道并查看 URL。频道 ID 在这里： https: [//www.youtube.com/channel/YOUR_CHANNEL_ID](https://www.youtube.com/channel/YOUR_CHANNEL_ID)

5) 使用 API 密钥和频道 ID 来获取您的查询结果：[https ://www.googleapis.com/youtube/v3/channels?part=statistics&id=YOUR_CHANNEL_ID&key=YOUR_API_KEY](https://www.googleapis.com/youtube/v3/channels?part=statistics&id=YOUR_CHANNEL_ID&key=YOUR_API_KEY)

巨大的成功！

* * *

文档实际上非常好，但是有很多。这里有几个关键链接：

频道信息文档：[https ://developers.google.com/youtube/v3/sample_requests](https://developers.google.com/youtube/v3/sample_requests)

“试试看”页面：[https ://developers.google.com/youtube/v3/docs/subscriptions/list#try-it](https://developers.google.com/youtube/v3/docs/subscriptions/list#try-it)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-14T03:07:06.977

尝试这个 ;）

```
<?php 
$data = file_get_contents('http://gdata.youtube.com/feeds/api/users/Tollywood');

$xml = new SimpleXMLElement($data);
$stats_data = (array)$xml->children('yt', true)->statistics->attributes();
$stats_data = $stats_data['@attributes'];

/********* OR **********/

$data = file_get_contents('http://gdata.youtube.com/feeds/api/users/Tollywood?alt=json');
$data = json_decode($data, true);
$stats_data = $data['entry']['yt$statistics'];

/**********************************************************/

echo 'lastWebAccess = '.$stats_data['lastWebAccess'].'<br />';
echo 'subscriberCount = '.$stats_data['subscriberCount'].'<br />';
echo 'videoWatchCount = '.$stats_data['videoWatchCount'].'<br />';
echo 'viewCount = '.$stats_data['viewCount'].'<br />';
echo 'totalUploadViews = '.$stats_data['totalUploadViews'].'<br />';
?> 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-27T13:21:47.743

我可以为我的页面使用正则表达式，但不确定它是否适合您。检查以下代码：

```
<?php 
$channel = 'http://youtube.com/user/YOURUSERNAME/';
$t = file_get_contents($channel);
$pattern = '/yt-uix-tooltip" title="(.*)" tabindex/';
preg_match($pattern, $t, $matches, PREG_OFFSET_CAPTURE);
echo $matches[1][0]; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-08-27T03:27:30.737

```
<?php

//this code was written by Abdu ElRhoul
//If you have any questions please contact me at info@oklahomies.com
//My website is http://Oklahomies.com

set_time_limit(0);

function retrieveContent($url){
$file = fopen($url,"rb");
if (!$file)
    return "";
while (feof ($file)===false) {
    $line = fgets ($file, 1024);
    $salida .= $line;
}
fclose($file);
return $salida;
}

{
$content = retrieveContent("https://www.youtube.com/user/rhoula/about");         //replace rhoula with the channel name
$start = strpos($content,'<span class="about-stat"><b>');
$end = strpos($content,'</b>',$start+1);
$output = substr($content,$start,$end-$start);

echo "Number of Subscribers = $output";
}
?> 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-01-28T04:33:32.253

```
<?php 
echo get_subscriber("UCOshmVNmGce3iwozz55hpww");

function get_subscriber($channel,$use = "user") {
    (int) $subs = 0;
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,            "https://www.youtube.com/".$use."/".$channel."/about?disable_polymer=1");
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1 );
    curl_setopt($ch, CURLOPT_POST,           0 ); 
    curl_setopt($ch, CURLOPT_REFERER, 'https://www.youtube.com/');
    curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:59.0) Gecko/20100101 Firefox/59.0');
    $result = curl_exec($ch);
    $R = curl_getinfo($ch);
    if($R["http_code"] == 200) {
        $pattern = '/yt-uix-tooltip" title="(.*)" tabindex/';
        preg_match($pattern, $result, $matches, PREG_OFFSET_CAPTURE);
        $subs = intval(str_replace(',','',$matches[1][0]));
    }
    if($subs == 0 && $use == "user") return get_subscriber($channel,"channel");
    return $subs;
} 
```

# r - ns 无明显原因变化

> ID：13871818
> 
> 赞同：3
> 
> 时间：2012-12-14T02:28:37.303
> 
> 标签：r

我使用`splines::ns`最小二乘拟合的结果各不相同，我看不到任何押韵或理由，我认为我已经将问题追溯到`ns`函数本身。

我已将问题简化为：

```
require(splines)
N <- 0
set.seed(1)
for (i in 1:100) N <- N + identical(ns(1:10,3),ns(1:10,3))
N 
```

我的结果平均约为 39，范围为 34--44 左右，但我每次都预期为 100。为什么结果应该`ns`是随机的？如果我在两个地方都替换`bs`，`ns`我得到 100，正如预期的那样。我`set.seed(1)`希望证明我得到的随机性不是 R 想要的。

在干净的会话中，使用 RStudio 和 R 版本 2.14.2 (2012-02-29)，我得到 39、44、38 等。其他人似乎都得到 100。

**更多信息：**

替换`splines::ns`为`ns`给出相同的结果。干净的香草会议给出了相同的结果。我的电脑有8个核心。

当它们发生时，差异通常或总是 2^-54：

```
Max <- 0
for (i in 1:1000) Max <- max( Max, abs(ns(1:10,3)-ns(1:10,3)) )
c(Max,2^-54) 
```

结果`[1] 5.551115e-17 5.551115e-17`。这种可变性给我带来了很大的问题，因为我的`optimize(...)$min`now 有时甚至在第一个数字中也会发生变化，导致结果不可重复。

**我的 sessionInfo 带有一个干净的香草会话：**

我创建了我所理解的干净的香草会话，使用

```
> .Last <- function() system("R --vanilla") 
> q("no") 
```

这会吹走会话，当我重新启动它时，我会得到干净的香草会话。然后，为了回答 Ben Bolker 的澄清问题，我在干净的香草会议开始时这样做了：

```
> sessionInfo()
R version 2.14.2 (2012-02-29)
Platform: x86_64-pc-mingw32/x64 (64-bit)

locale:
[1] LC_COLLATE=English_United States.1252 
[2] LC_CTYPE=English_United States.1252   
[3] LC_MONETARY=English_United States.1252
[4] LC_NUMERIC=C                          
[5] LC_TIME=English_United States.1252    

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] Revobase_6.1.0   RevoMods_6.1.0   RevoScaleR_3.1-0 lattice_0.20-0  
[5] rpart_3.1-51    

loaded via a namespace (and not attached):
[1] codetools_0.2-8   foreach_1.4.0     grid_2.14.2       iterators_1.0.6  
[5] pkgXMLBuilder_1.0 revoIpe_1.0       tools_2.14.2      XML_3.9-1.1      
> require(splines)
Loading required package: splines
> N <- 0
> set.seed(1)
> for (i in 1:100) N <- N + identical(ns(1:10,3),ns(1:10,3))
> N
[1] 32 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T20:40:27.933

这是我从 REvolution Technical Suppoort 得到的答案（经许可在此处发布）：

> 这里的问题是浮点运算的问题。Revolution R 使用英特尔 mkl BLAS 库进行一些计算，这与 CRAN-R 使用的不同，并使用该库进行“ns()”计算。在这种情况下，您还将获得不同的结果，具体取决于您是在基于 Intel 处理器的机器上还是在具有 AMD 芯片组的机器上进行计算。
> 
> 我们确实提供了与 CRAN-R 一起提供的相同 BLAS 和 Lapack DLL，但它们不是 Revolution R 使用的默认值。如果客户愿意并愿意，可以通过执行以下操作恢复已安装的 DLL：
> 
> 1）。将文件夹“C:\Revolution\R-Enterprise-6.1\R-2.14.2\bin”中的“Rblas.dll”重命名为“Rblas.dll.bak”，将“Rlapack.dll”重命名为“Rlapack.dll.bak” \x64'。
> 
> 2）。将此文件夹中的文件“Rblas.dll.0”和“Rlapack.dll.0”分别重命名为 Rblas.dll 和 Rlpack.dll。

他们的建议非常有效。我使用 RStudio（使用 Revolution R）和 Revolution R 自己的 IDE 来回重命名这些文件，结果总是相同：BLAS dll 给我`N==40 or so`，CRAN-R dll 给我`N==100`。

我可能会回到 BLAS，因为在我的测试中，它`%*%`比`svd()`. 这只是使用我的一个内核（由 Windows 任务管理器的进程选项卡的 CPU 使用率列验证）。

我希望有更好理解的人能写出更好的答案，因为我仍然不太了解这一切的全部后果。

# zend-framework2 - zf2：Zend 客户端和 cUrl 不工作

> ID：13871819
> 
> 赞同：2
> 
> 时间：2012-12-14T02:28:45.087
> 
> 标签：zend-framework2

```
$adapter = new \Zend\Http\Client\Adapter\Curl();

    $client = new \Zend\Http\Client($url);
    $client->setAdapter($adapter);
    $client->setMethod('POST');
    $adapter->setOptions(array(
        'curloptions' => array(
                            CURLOPT_POST => 1,
            CURLOPT_POSTFIELDS => $data,
            CURLOPT_HTTPAUTH => CURLAUTH_BASIC,
            CURLOPT_USERPWD => "username:password",
            CURLOPT_RETURNTRANSFER => 1,
            CURLOPT_SSL_VERIFYPEER => FALSE,
            CURLOPT_SSL_VERIFYHOST => FALSE,

        )
    ));
  $client->send(); 
```

以上截断了我正在使用的内容，我正在关注此处的文档[http://framework.zend.com/manual/2.0/en/modules/zend.http.client.adapters.html](http://framework.zend.com/manual/2.0/en/modules/zend.http.client.adapters.html)

问题是，当我执行自己的 curl 函数调用时，它工作正常，并且我得到了有效的响应。但是当我使用 zend 约定时，我不断收到 401-未授权。我使用的 curl 选项对于两种方法都是相同的。

有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-26T02:09:10.523

由于 CURLOPT_POSTFIELDS 和 CURLOPT_POST 被 Curl.php 中的 invalidOverwritableCurlOptions 数组阻止，因此您要做的是在客户端上设置参数。

在 Zend/Http/Client 中使用 setParameterPost 方法，如下所示：

```
 use Zend\Http\Client;
    use Zend\Http\Client\Adapter\Curl;

    //some post params
    $postParams = array('per_page' => 25);

    $adapter = new Curl();
    // -- add your curl options here (excluding CURLOPT_POST and CURLOP_POSTFIELDS --

    $client = new Client('https://example.com/somePage');
    $client->setAdapter($adapter);
    $client->setMethod('POST');
    $client->setParameterPost($postParams);
    $response = $client->send($client->getRequest());

    //output the response
    echo $response->getBody()."<br/>"; 
```

您甚至不需要创建一个 Request 对象，因为 Client 类无论如何都会创建一个。在上面的代码中，我只是检索了 Client 使用 getRequest 方法创建的那个，然后将它传递给 send 方法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T03:44:03.233

我记得那个例子有问题，所以我用了另一个，这对我有用：

```
$request = new Request();
$request->setUri($url);
$request->setMethod('POST');

$client = new Client();
$adapter = new \Zend\Http\Client\Adapter\Curl();
$client->setAdapter($adapter);

$adapter->setOptions(array(
    'curloptions' => array(
        CURLOPT_POST => 1,
        CURLOPT_POSTFIELDS => $data,
        CURLOPT_HTTPAUTH => CURLAUTH_BASIC,
        CURLOPT_USERPWD => "username:password",
        CURLOPT_RETURNTRANSFER => 1,
        CURLOPT_SSL_VERIFYPEER => FALSE,
        CURLOPT_SSL_VERIFYHOST => FALSE,
    )
));

$response = $client->dispatch($request); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T10:40:16.013

Zend 不允许覆盖选项 CURLOPT_POSTFIELDS。

你需要弄清楚如何覆盖它。

从 Zend 库的 curl.php 中的 invalidOverwritableCurlOptions 中删除此选项将解决您的问题。但是你需要找到不干扰图书馆的方式。

# java - 如何从 int 数组中获取多个最小值？

> ID：13871822
> 
> 赞同：0
> 
> 时间：2012-12-14T02:29:22.497
> 
> 标签：java

`int`我正在尝试从's数组中获取至少 5 个最小值。我的附加代码有效，但它跳过了几个值！

```
public static void main(String[] args) {
    int array[] = {0, 1, 2, 1, 4, 5, 1, 7, 8, 1, 10, 11, 12, 13, 1, 15, 16, 17, 18, 19, 20, 2, 22, 23};
    int min = 0;
    int index = 0;
    String output = "";
    for (int x = 0; x < 5; x++){
        min = array[x];
        index++;
        for(int i = index, limit = array.length; i < limit; ++i){
            if(array[i] <= min){
                min = array[i];
                index = i + 1;
                break;
            }
        }
        output += index + "\t";               
    }
    System.out.println(output);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T02:33:15.920

```
Arrays.sort(array);
return Arrays.copyOfRange(array, 0, 5); 
```

* * *

如果你不想改变传入的数组（即你想让它不排序），首先添加这一行：

```
int[] array = Arrays.copyOf(array); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-14T02:33:27.680

也许您可以使用 Arrays.sort() 对数组进行排序，然后取前五个值：

```
Arrays.sort(array); 
```

现在包含最低的 5 个值`array[0]`。`array[4]`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T10:20:29.917

如果您只想获得 5 个最小值，我同意 Bohemian's Answer。如果你想显示数组的位置，比如1,2,4,7,10，你的demo跳过2，试试我的测试...

```
public static void main(String[] args) {
    int getNum = 5;
    int step = 0;
    String output = "";
    int array[] = {0, 1, 2, 1, 4, 5, 1, 7, 8, 1, 10, 11, 12, 13, 1, 15, 16, 17, 18, 19, 20, 2, 22, 23};
    int arrayClone[] = array.clone();
    Arrays.sort(array);
    int arrayResult[] = Arrays.copyOfRange(array, 0, getNum); //the arrayResult is what you want minimum values

    ploop:for (int i:arrayResult) {
        int index = 1;
        for (int j :arrayClone) {
            if(j==i){
                step++;
                output += index + "\t"; 
                if (step>=getNum) {
                    break ploop;
                }                    
            }
            index++;
        }
    }  

    System.out.println(output);        
} 
```

# git - 下载 Android 源时节省空间

> ID：13871823
> 
> 赞同：3
> 
> 时间：2012-12-14T02:29:49.210
> 
> 标签：git, android-source, repository

我正在寻找一种使用 Android 源代码的方法，同时试图保持较低的磁盘空间使用率。是否有可能`init`一些项目很浅（我只需要最新的源代码并且不会修改）和其他项目作为常规 git repos 能够获取、推送等？

编辑：`repo`有一个`--depth=DEPTH`参数，我想知道每个子项目的参数是否不同。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-14T05:08:37.170

克隆和维护完整的 Android 树的唯一实际可行的方法是使用`repo`带有`repo init`和的实用程序`repo sync`。据我所知，`repo`不支持浅存储库。但是在不使用的情况下检查 200-400 个 git 存储库`repo`是非常困难的。

另外，请记住，存储在`.git`目录中的 git 元数据通常比仅签出 top commit 占用更少的空间（但是 repo 使用符号链接玩了一些技巧，因此实际数据存储在`.repo`. 因此，在绝对最好的情况下，您将节省不超过 50% 的磁盘空间，但实际上差别会小得多。

最后，在当今的典型 HDD 大小为 1TB 或更大的情况下，保持磁盘使用率低的唯一可能原因是在使用 SSD 时。完整的 Android 树应该可以轻松放入大约 30GB（即使有 build out/ 目录），这使得相当小的 128 GB SSD 成为 Android 开发非常实用的解决方案。

# c# - 对现有 ASP.NET MVC 控制器进行单元测试

> ID：13871831
> 
> 赞同：2
> 
> 时间：2012-12-14T02:31:53.330
> 
> 标签：c#, asp.net-mvc, visual-studio-2010, unit-testing, tdd

我已经阅读了越来越多有关单元测试的内容，并决心将其付诸实践。我使用存储库模式、依赖注入和 EF 挖出了一个用 ASP.NET MVC 编写的项目。我的第一个任务是对控制器进行单元测试。这是控制器中要测试的片段：

```
 IUserRepository _userRepository;
    IAttachmentRepository _attachmentRepository;
    IPeopleRepository _peopleRepository;
    ICountryRepository _countryRepository;

    public UserController(IUserRepository userRepo, IAttachmentRepository attachRepo, IPeopleRepository peopleRepo, ICountryRepository countryRepo)
    {
        _userRepository = userRepo;
        _attachmentRepository = attachRepo;
        _peopleRepository = peopleRepo;
        _countryRepository = countryRepo;
    }

    public ActionResult Details()
    {
        UserDetailsModel model = new UserDetailsModel();

        foreach (var doc in _attachmentRepository.GetPersonAttachments(Globals.UserID))
        {
            DocumentItemModel item = new DocumentItemModel();
            item.AttachmentID = doc.ID;
            item.DocumentIcon = AttachmentHelper.GetIconFromFileName(doc.StoragePath);
            item.DocumentName = doc.DocumentName;
            item.UploadedBy = string.Format("{0} {1}", doc.Forename, doc.Surname);
            item.Version = doc.VersionID;

            model.Documents.Add(item);
        }

        var person = _peopleRepository.GetPerson();
        var address = _peopleRepository.GetAddress();

        model.PersonModel.DateOfBirth = person.DateOfBirth;
        model.PersonModel.Forename = person.Forename;
        model.PersonModel.Surname = person.Surname;
        model.PersonModel.Title = person.Title;

        model.AddressModel.AddressLine1 = address.AddressLine1;
        model.AddressModel.AddressLine2 = address.AddressLine2;
        model.AddressModel.City = address.City;
        model.AddressModel.County = address.County;
        model.AddressModel.Postcode = address.Postcode;
        model.AddressModel.Telephone = address.Telephone;

        model.DocumentModel.EntityType = 1;
        model.DocumentModel.ID = Globals.UserID;
        model.DocumentModel.NewFile = true;

        var countries = _countryRepository.GetCountries();

        model.AddressModel.Countries = countries.ToSelectListItem(1, c => c.ID, c => c.CountryName, c => c.CountryName, c => c.ID.ToString());

        return View(model);
    } 
```

我想测试 Details 方法并有以下查询：

1) Globals.UserID 属性从会话对象中检索当前用户。我怎样才能轻松测试这个（我正在使用内置的 VS2010 单元测试和起订量）

2) 我在这里调用 AttachmentHelper.GetIconFromFileName() ，它只是查看文件的扩展名并显示一个图标。我还在附件存储库中调用 GetPersonAttachments，调用 GetPerson、GetAddress 和 GetCountries 以及调用创建的扩展方法将 List 转换为 SelectListItem 的 IEnumerable。

此控制器操作是不良做法的示例吗？它使用了大量的存储库和其他辅助方法。据我所知，对这个单一动作进行单元测试将需要大量代码。这会适得其反吗？

在测试项目中对一个简单的控制器进行单元测试是一回事，但是当你进入像这样的现实生活中的代码时，它可能会变成一个怪物。

我想我的问题真的是我应该重构我的代码以使其更容易测试，还是我的测试应该变得更加复杂以满足当前代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T03:13:32.810

复杂的测试和复杂的代码一样糟糕：它们容易出现错误。因此，为了使您的测试保持简单，重构您的应用程序代码以使其更易于测试通常是一个好主意。例如，您应该将您的 Details() 方法中的映射代码提取到单独的辅助方法中。然后，您可以非常轻松地测试这些方法，而不必太担心测试 Details() 的所有疯狂组合。

我已经拉出了下面的人员和地址映射部分，但您可以将其拉得更远。我只是想让你明白我的意思。

```
 public ActionResult Details() {
        UserDetailsModel model = new UserDetailsModel();

        foreach( var doc in _attachmentRepository.GetPersonAttachments( Globals.UserID ) ) {
            DocumentItemModel item = new DocumentItemModel();
            item.AttachmentID = doc.ID;
            item.DocumentIcon = AttachmentHelper.GetIconFromFileName( doc.StoragePath );
            item.DocumentName = doc.DocumentName;
            item.UploadedBy = string.Format( "{0} {1}", doc.Forename, doc.Surname );
            item.Version = doc.VersionID;

            model.Documents.Add( item );
        }

        var person = _peopleRepository.GetPerson();
        var address = _peopleRepository.GetAddress();

        MapPersonToModel( model, person );

        MapAddressToModel( model, address );

        model.DocumentModel.EntityType = 1;
        model.DocumentModel.ID = Globals.UserID;
        model.DocumentModel.NewFile = true;

        var countries = _countryRepository.GetCountries();

        model.AddressModel.Countries = countries.ToSelectListItem( 1, c => c.ID, c => c.CountryName, c => c.CountryName, c => c.ID.ToString() );

        return View( model );
    }

    public void MapAddressToModel( UserDetailsModel model, Address address ) {
        model.AddressModel.AddressLine1 = address.AddressLine1;
        model.AddressModel.AddressLine2 = address.AddressLine2;
        model.AddressModel.City = address.City;
        model.AddressModel.County = address.County;
        model.AddressModel.Postcode = address.Postcode;
        model.AddressModel.Telephone = address.Telephone;
    }

    public void MapPersonToModel( UserDetailsModel model, Person person ) {
        model.PersonModel.DateOfBirth = person.DateOfBirth;
        model.PersonModel.Forename = person.Forename;
        model.PersonModel.Surname = person.Surname;
        model.PersonModel.Title = person.Title;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T03:04:01.433

只是想详细说明一下主题。我们试图单元测试的是逻辑。在控制器中没有太多。因此，在这种特殊情况下，我将执行下一个：返回模型而不是视图的提取方法。将模拟的 repos 注入控制器对象。并且在执行映射后将确保所有属性都填充有预期值。另一种方法是生成 JSON 并确保正确填充所有属性。但是，我会努力在映射部分本身上进行单元测试，然后考虑将 BDD 用于集成测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T17:39:06.837

我会将您所有的模型构造代码移动到模型本身的构造函数中。我更喜欢将控制器限制在几个简单的任务中：

*   选择正确的视图（如果控制器操作允许多个视图）
*   选择正确的视图模型
*   权限/安全
*   查看模型验证

因此，您的 Details 控制器变得更加简单，测试变得更加易于管理：

```
public ActionResult Details() {
    return View(new UserDetailsModel(Globals.UserId);
} 
```

既然您的控制器是紧凑且可测试的，让我们看看您的模型：

```
 public class UserDetailsModel {
        public UserDetailsModel(int userId) {
           ... instantiation of properties goes here...
         }

        ... public properties/methods ...
    } 
```

同样，模型中的代码是封装的，只需要特别关注它的属性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T16:56:13.250

正如@KevinM1 已经提到的，如果您正在练习 TDD（您的问题中有该标签），那么您就是在实施*之前*编写测试。

您首先为控制器的 Detail 方法编写测试。编写此测试时，您注意到需要将人员映射到 UserDetailsModel。在编写测试时，您“隐藏了复杂性”，这些复杂性不属于您想要在抽象背后测试的实际实现。在这种情况下，您可能会创建一个 IUserDetailModelMapper。编写第一个测试时，您可以通过创建控制器将其变为绿色。

```
public class UserController
{
   ctor(IUserRepository userRepo, IUserDetailModelMapper mapper){...}

   public ActionResult Details()
   {
      var model = _mapper.Map(_userRepo.GetPerson());
      return View(model);
   }
} 
```

当您稍后为您的映射器编写测试时，您说您需要使用一些名为 Globals.UserId 的静态道具。一般来说，如果可能的话，我会避免使用静态数据，但如果这是一个遗留系统，你需要“客观化”它以使 i 可测试。一种简单的方法是将其隐藏在界面后面，就像这样......

```
interface IGlobalUserId
{
  int GetIt();
} 
```

...并在使用静态数据的地方进行实施。从现在开始，您可以注入此接口来隐藏它是静态数据的事实。

“AttachmentHelper”也是如此。将其隐藏在界面后面。不过，一般来说，XXXHelpers 应该有警钟 - 我会说这表明没有将方法放置在它们应该放置的位置（对象的一部分），而是将各种混合在一起的东西混合在一起。

# python - 否定前瞻断言在 python 中不起作用

> ID：13871833
> 
> 赞同：8
> 
> 时间：2012-12-14T02:32:06.233
> 
> 标签：python, regex, assertion, lookahead

任务：
- 给定：图像文件名列表
- 待办事项：使用不包含单词“thumb”的文件名创建一个新列表 - 即仅针对非缩略图图像（使用 PIL - Python Imaging Library）。

我试过`r".*(?!thumb).*"`但失败了。

我找到了解决方案（在stackoverflow上）将 a`^`添加到正则表达式并将其`.*`放入负前瞻中：`r"^(?!.*thumb).*"`这现在有效。

问题是，我想了解为什么我的第一个解决方案不起作用但我没有。由于正则表达式足够复杂，我真的很想了解它们。

我所理解的是，它`^`告诉解析器以下条件将在字符串的开头匹配。但是`.*`（不工作的）第一个示例中的不是也从字符串的开头开始吗？我认为它会从字符串的开头开始，并在到达“拇指”之前搜索尽可能多的字符。如果是这样，它将返回不匹配。

有人可以解释为什么`r".*(?!thumb).*"`不起作用，但`r"^(?!.*thumb).*"`可以吗？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T03:25:26.090

> 有人可以解释为什么`r".*(?!thumb).*"`不起作用，但 `r"^(?!.*thumb).*"`可以吗？

第一个将始终匹配，因为`.*`它将消耗所有字符串（因此它后面不能有任何东西以使负前瞻失败）。第二个有点复杂，将从行首开始匹配，直到遇到 'thumb' 为止的字符数量最多，如果存在，则整个匹配失败，因为该行确实以某些内容开头，然后是 'thumb' .

第二个更容易写成：

*   `'thumb' not in string`
*   `not re.search('thumb', string)`（而不是匹配）

同样正如我在评论中提到的，您的问题是：

> 不包含***单词***“thumb”的文件名

所以你不妨考虑一下是否`thumbs up`应该排除在外。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T03:44:42.607

（该死，乔恩打败了我。哦，好吧，无论如何你可以看看例子）

就像其他人所说的那样，正则表达式不是这项工作的最佳工具。如果您正在使用文件路径，请查看[os.path](http://docs.python.org/2/library/os.path.html)。

至于过滤您不想要的文件，您可以`if 'thumb' not in filename: ...`在剖析路径后执行（其中`filename`a `str`）。

对于后代，这是我对这些正则表达式的看法。`r".*(?!thumb).*"`不起作用，因为`.*`它是贪婪的，并且前瞻的优先级很低。看看这个：

```
>>> re.search('(.*)((?!thumb))(.*)', '/tmp/somewhere/thumb').groups()
('/tmp/somewhere/thumb', '', '')
>>> re.search('(.*?)((?!thumb))(.*)', '/tmp/somewhere/thumb').groups()
('', '', '/tmp/somewhere/thumb')
>>> re.search('(.*?)((?!thumb))(.*?)', '/tmp/somewhere/thumb').groups()
('', '', '') 
```

最后一个很奇怪……

另一个正则表达式 ( `r"^(?!.*thumb).*"`) 之所以有效，是因为`.*`它位于前瞻内部，因此您不会遇到任何字符被盗的问题。您实际上甚至不需要`^`，这取决于您使用的是`re.match`还是`re.search`：

```
>>> re.search('((?!.*thumb))(.*)', '/tmp/somewhere/thumb').groups()
('', 'humb')
>>> re.search('^((?!.*thumb))(.*)', '/tmp/somewhere/thumb').groups()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'NoneType' object has no attribute 'groups'
>>> re.match('((?!.*thumb))(.*)', '/tmp/somewhere/thumb').groups()
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
AttributeError: 'NoneType' object has no attribute 'groups' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T03:07:44.463

忽略有关正则表达式的所有内容，您的任务似乎相对简单：

> *   给定：图像文件名列表
> *   待办事项：使用不包含单词“thumb”的文件名创建一个新列表 - 即仅针对非缩略图图像（使用 PIL - Python Imaging Library）。

假设您有一个看起来像这样的文件名列表：

```
filenames = [ 'file1.jpg', 'file1-thumb.jpg', 'file2.jpg', 'file2-thumb.jpg' ] 
```

然后你可以得到一个*不*包含单词 thumb 的文件列表，如下所示：

```
not_thumb_filenames = [ filename for filename in filenames if not 'thumb' in filename ] 
```

这就是我们所说的[列表推导](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)，本质上是以下的简写：

```
not_thumb_filenames = []
for filename in filenames:
  if not 'thumb' in filename:
    not_thumb_filenames.append(filename) 
```

对于这个简单的任务，正则表达式并不是真正必需的。

# html - 用于移动设备的 html 元标记

> ID：13871836
> 
> 赞同：13
> 
> 时间：2012-12-14T02:32:51.117
> 
> 标签：html, mobile, meta-tags

我有一段 html 代码，主要是元标记。我正在尝试为移动设备重新设计我的布局，所以我想知道我使用的元标记是否对于移动布局是必需的。代码块如下所示：

```
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE-edge,chrome=1">
<title>ConquestRealms - Home</title>
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta http-equiv="cleartype" content="on"> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-14T03:02:24.327

它们是否必要取决于您尝试定位的“移动”设备。

我只用过：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0" /> 
```

并仅使用 Respond.js 和 @media 查询在许多移动设备上取得了不错的结果。

可能会有所帮助：

[http://www.alistapart.com/articles/responsive-web-design](http://www.alistapart.com/articles/responsive-web-design)

[http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/](http://paulirish.com/2008/conditional-stylesheets-vs-css-hacks-answer-neither/)

[http://css-tricks.com/snippets/css/media-queries-for-standard-devices](http://css-tricks.com/snippets/css/media-queries-for-standard-devices)

[https://github.com/scottjehl/Respond](https://github.com/scottjehl/Respond)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-07-27T15:59:56.877

你所拥有的已经很不错了，但不要忘记`<!DOCTYPE html>`在你的 html 文件的顶部添加。我发现在某些情况下，这会显着影响移动设备上的外观。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-07T15:18:43.223

我也喜欢包含设计元标签。之前的回复中没有提到。它们允许全屏显示并更改浏览器栏的颜色。好的！

```
<meta name="theme-color" content="#ff0000" />
<meta name="apple-mobile-web-app-capable" content="yes" />
<meta name="mobile-web-app-capable" content="yes">
<meta name="application-name" content="My Web App">
<meta name="apple-mobile-web-app-title" content="Mobile rules">
<meta name="apple-mobile-web-app-status-bar-style" content="red"> 
```

# javascript - 带有下划线和对象字面量的 javascript 范围

> ID：13871839
> 
> 赞同：1
> 
> 时间：2012-12-14T02:33:06.360
> 
> 标签：javascript, underscore.js

我有以下代码，并希望将所有下划线模板设置为使用 mustache 语法。如果我将 _.templateSetting 移到函数之外，它就不起作用。我将如何在全球范围内设置它？

提前谢谢

```
arc_eh.mb={
  show_tree:function(){
    // all i want to do is move this outside and set globally 
    //  for all my underscore microtemplates
    _.templateSettings = {
      interpolate : /\{\{(.+?)\}\}/g
    };

    var template=_.template("hello {{ some }}");
    var jt = { "some" : "more-something" };
    //var final=template({ some : "say-something" });
    var final=template(jt);
    console.log(final); 
```

**更新#1**

所以我已经用我在这里遇到的问题更新了你的小提琴：http: [//jsfiddle.net/vMHeq/1/](http://jsfiddle.net/vMHeq/1/)

我同意你的小提琴工作正常 - 我知道这是一个我不熟悉的范围问题。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:18:37.630

基本上，您需要在 arc_eh.mb 对象之外设置 _.templateSettings 选项。如果您想使用 _.template 的所有功能，您需要包含所有三个设置。我使用 {{- }}、{{= }} 和 {{ }} 对此进行格式化。

```
_.templateSettings = {
    interpolate: /\{\{\=(.+?)\}\}/gim,
    escape: /\{\{\-(.+?)\}\}/gim,
    evaluate: /\{\{([\s\S]+?)\}\}/gim
}; 
```

设置一个简单的小提琴来告诉你发生了什么。

[http://jsfiddle.net/AbLA8/1/](http://jsfiddle.net/AbLA8/1/)

# javascript - Ext-js 中的自定义渲染器 - Bryntum/ExtJs UTC 日期问题

> ID：13871851
> 
> 赞同：1
> 
> 时间：2012-12-14T02:34:11.417
> 
> 标签：javascript, date, extjs, utc, renderer

我正在尝试将**自定义渲染器**添加到 Bryntum Ext 甘特图。

我有在本地时区显示的日期，但我希望在 UTC 日期中显示它们，因为这是数据源用来在源应用程序中向用户显示日期（它与浏览器时区无关）的内容。

这里的帖子让我朝着正确的方向前进（根据我的测试，这似乎是我所需要的）：[为什么 ExtJS 在格式化日期时会减去一天？](https://stackoverflow.com/questions/9023641/why-does-extjs-subtract-a-day-when-formatting-a-date)

*如何在自定义渲染器中实现链接解决方案*？

* * *

我试过了，该列是空白的：

```
{
    xtype:'startdatecolumn',
    sortable: false,
    text: 'Start',
    dataIndex: 'StartDate',
    renderer: function (v, m, r) {
        return Ext.util.Format.date(Ext.Date.parse(v, "Y-m-d"), "m-d-Y");
    }
} 
```

也试过这个，该列是空白的：

```
{
    xtype:'startdatecolumn',
    sortable: false,
    text: 'Start',
    dataIndex: 'StartDate',
    renderer: function (v) {
        var dt = Ext.Date.parse(v, "Y-m-d");
        Ext.util.Format.date(dt, "m-d-Y");
        return dt;
    }
} 
```

使用这种格式，它以本地时区显示日期（不正确，除非设置为 UTC）。

```
{   
    xtype:'enddatecolumn',
    dataIndex: 'EndDate',
    sortable: false,
    text: 'End'
} 
```

* * *

# 布林顿柱示例

```
 columns : [
            {
                xtype : 'treecolumn',
                header: 'Tasks',
                sortable: true,
                dataIndex: 'Name',
                width: 200,
                field: {
                    allowBlank: false
                },
                renderer : function(v, meta, r) {
                    if (!r.data.leaf) meta.tdCls = 'sch-gantt-parent-cell';

                    return v;
                }
            },
            {
                xtype : 'startdatecolumn'
            },
            {
                //hidden : true,
                xtype : 'enddatecolumn'
            }, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T07:32:35.463

修复了使用此功能：

```
function niceDate (v, m, r) {
            var dt =    padStr(1 + v.getMonth()) + 
                        '-' +
                        padStr(v.getDate()) +
                        '-' +
                        padStr(v.getFullYear());
            return dt;
           }

function padStr(i) {
    return (i < 10) ? "0" + i : "" + i;
} 
```

并在列渲染器中：

```
 {
                    xtype:'startdatecolumn',
                    sortable: false,
                    text: 'Start',
                    dataIndex: 'StartDate',
                    renderer: niceDate
                    } 
```

解析 xml 时，我使用具有以下时间戳的 switch 函数：

```
case 'timestamp':
    if(!empty(v))
    v = new Date(parseInt(v));
    break; 
```

这似乎可靠地将“日期”对象提供给 ext.js，并且使用渲染器渲染列以匹配我们的源日期格式。

# encryption - GPG如何找到对应的私钥

> ID：13871854
> 
> 赞同：1
> 
> 时间：2012-12-14T02:35:03.203
> 
> 标签：encryption, gnupg

这是我所拥有的或据我所知的关于 GPG 1 的内容。当 GPG 使用公钥加密时，我们需要指定一个 keyid/user_id 来标识该密钥。

1.  但是在解密时，看起来我们不需要指定 keyid/user_id。

所以我的问题是：GPG如何识别或找出该加密公钥的对应私钥？加密文件中是否显示了该信息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T12:18:43.963

通过使用密钥 ID，通常是密钥（部分）上的加密安全散列。请注意，对于例如 RSA，模数已经标识了公钥和私钥，因此通常对模数进行散列就足以进行标识。无需直接存储 ID。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T02:37:00.210

加密文件包含可用于解密它的所有密钥的列表。如果你有任何这些私钥，你可以解密它。

# image - 资源库在 h:graphicImage 中被忽略

> ID：13871855
> 
> 赞同：5
> 
> 时间：2012-12-14T02:35:04.153
> 
> 标签：image, jsf, jsf-2, mojarra

我有以下标签：

```
<h:graphicImage value="Circle_Yellow.png" library="images" /> 
```

在我的文件夹中，我具有以下结构：

```
/resources/images/.....
/WEB-INF/....
/*.xhtml 
```

渲染时，该图像显示为：

```
<img src="Circle_Yellow.png"> 
```

但是我确实看到了其他使用资源的东西，例如

```
<script type="text/javascript" src="/www/javax.faces.resource/jquery/jquery.js.xhtmlln=primefaces"></script> 
```

如果我去`/www/javax.faces.resource/Circle_Yellow.png?ln=images`它工作。

那么我的库在 h:graphicImage 上被忽略了，我可能做错了什么。此外，它不仅仅是一个图像，我还有一个 css 文件也失败了。

我正在使用 mojarra 2.1.16 和 primefaces 3.4.1。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-14T11:10:20.167

该`value`属性采用 URL，而不是资源名称。要指定资源名称，请使用`name`属性。

```
<h:graphicImage library="images" name="Circle_Yellow.png" /> 
```

[有关详细信息，`<h:graphicImage>`](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/graphicImage.html)另请参阅[标签文档](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/h/graphicImage.html)。

* * *

**与具体问题**无关**`library`，您对属性的使用并不完全正确。请仔细阅读[JSF资源库是干什么用的，应该如何使用？](https://stackoverflow.com/questions/11988415/what-is-the-jsf-resource-library-for-and-how-should-it-be-used)您应该将其用作**

 **```
<h:graphicImage name="images/Circle_Yellow.png" /> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T04:04:50.170

试试用这个，

```
<h:graphicImage value="resources/images/Circle_Yellow.png"/> 
```

或者

```
<h:graphicImage library="images" name="Circle_Yellow.png" /> 
```

并包括你的CSS如下

```
<h:outputStylesheet library="css" name="style.css" /> 
```**

# java - 在小程序 HTML 上加载图像

> ID：13871857
> 
> 赞同：2
> 
> 时间：2012-12-14T02:35:13.453
> 
> 标签：java, html, eclipse, image, applet

我正在尝试制作一个仅在屏幕上随机呈现 4 张图像的简单游戏，但我想将它放在 HTML 上的网站上。当我在 Eclipse 上测试时它工作得很好，但是当我把它放在一个 html 上并将它上传到网站时它告诉我：访问被拒绝（“java.io.FilePermission”“Sheet.png”“read”），我知道我必须把 getResourceAsStream("Sheet.png");

但它只是不起作用请帮助！

```
import java.awt.Canvas;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.io.IOException;
import java.io.InputStream;
import java.util.Random;
import javax.imageio.ImageIO;

public class Game extends Canvas implements Runnable{

public BufferedImage icons = null;
public BufferedImage wall = null;
public Random r = new Random();
public boolean running;
private InputStream input;

public Game(){

    setBackground(Color.white);
    setSize(640, 320);

    input = Game.class.getResourceAsStream("Sheet.png");

    start();
    this.setSize(new Dimension(640, 320));

    try {
        icons = ImageIO.read(input);
    } catch (IOException e) {
        System.out.println(e.getMessage());
    }

    wall = icons.getSubimage(0, 0, 16, 16);
}

public static void main(String args[]){
    new Apple().init();
}

public void start(){
    running = true;
    new Thread(this).start();
}
public void stop(){
    running = false;
}

public void run() {
    while(running){
        try {
            new Thread().sleep(200);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        repaint();
    }
}
    int rendered;
public void paint(Graphics g){
    g.drawImage(wall, r.nextInt(600), r.nextInt(280),null);
    g.drawImage(wall, r.nextInt(600), r.nextInt(280),null);
    g.drawImage(wall, r.nextInt(600), r.nextInt(280),null);
    g.drawImage(wall, r.nextInt(600), r.nextInt(280),null);
    rendered++;
    g.drawString("Rendered: "+rendered, 0, 290);
}
} 
```

小程序类：

```
import java.awt.Color;
import java.awt.Dimension;
import javax.swing.JApplet;

public class Apple extends JApplet{

public void init(){
    this.start();
    this.setBackground(Color.WHITE);
    this.setEnabled(true);
    this.setMinimumSize(new Dimension(640, 320));
    this.setMaximumSize(new Dimension(640, 320));
    this.setSize(new Dimension(640, 320));
    this.add(new Game());
}

} 
```

HTML：

```
<html><body>
<p>
<applet code="Apple.class" archive="Applet.jar"
width="640" height="320"></applet>
</p>
</body></html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:21:06.673

我有一些“坏消息”要告诉你。小程序在这里工作得很好。

![工作小程序](../Images/7558786ce3809ec306a73138e5a14517.png)

这表明您看到的问题是缓存旧类的结果。确保[Java 控制台](http://www.java.com/en/download/help/javaconsole.xml)已打开并在重新加载页面之前刷新缓存。

# ios - 带有类似于 uitabbar 的图标/文本的 uitoolbar

> ID：13871858
> 
> 赞同：0
> 
> 时间：2012-12-14T02:35:16.487
> 
> 标签：ios, cocoa-touch, uibutton, uitabbar, uitoolbar

理想情况下，我想使用 UIToolbar，但我希望底部的图标出现在 UITabBar 中，意思是默认图标和突出显示的状态以及下方的标题。我知道我可以将 UIButton 拖到工具栏上，它会在 UIBarButtonItem 内创建一个 UIButton，但我似乎无法操纵 UIButton 在下方显示标题？我遇到的另一个问题是，当我在 IB 中设置按钮的对齐方式（在控制部分中）时，它只会更改默认状态的对齐方式，而不是突出显示的状态。任何人都可以在这里给我一些指示，非常感谢！

rc

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:43:39.190

将 UIButton 放入 UIBarButtonItem 是我发现的最佳方法。只需设置按钮的文本，它应该会显示得很好。操作定位时，请记住您操作的是 UIBarButtonItem 的位置，而不是 UIButton。希望有帮助！

# php - 将 Web 表单数据发送到 ipad 应用程序

> ID：13871863
> 
> 赞同：0
> 
> 时间：2012-12-14T02:36:14.480
> 
> 标签：php, ipad, http-post

我正在向 php 发送一些数据，它将数据存储在数据库中。另一个网页将从数据库中检索数据，该网页还将包含一个文本框和一个按钮，单击该按钮后，在文本框中输入的任何数据都应发送回同一 ipad。问题是 。. 如何将数据从文本框发送回ipad？我正在使用 HTTP POST 方法将数据从 ipad 发送到 php。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:50:26.627

您需要以某种方式在您的网络服务器之间建立连接（我假设您使用的是未在 iPad 上运行的外部服务器）。有许多不同的方法可以做到这一点，其中一些是：

1.  将发送的数据存储在某处并轮询来自 iPad 的输入。
2.  在 iPad 上打开服务器。考虑到 NAT 和动态 ip，这可能有点复杂
3.  无论如何，最好的方法是使用 Apple 的推送通知，它会为您处理所有繁琐的工作，如果您愿意，如果您的应用程序不在前台，它甚至会通知用户。

为此，如果您的网络服务器允许，您必须在 php 中打开一个套接字并向 Apple 的服务器发送推送通知。你可以在这里找到一个很好的介绍：[https ://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html](https://developer.apple.com/library/ios/documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html)

更新：

我之前没有提到这一点，但如果你不想自己编写 apns 通信，那么有一个很好的开源 php 框架：[http ://code.google.com/p/apns-php/](http://code.google.com/p/apns-php/)

# c# - 从 SAP 写入 .net Web 服务使用

> ID：13871865
> 
> 赞同：1
> 
> 时间：2012-12-14T02:36:36.223
> 
> 标签：c#, .net, web-services, sap

我需要编写 .Net (C#) 一个从 SAP 端使用的 Web 服务。我编写了 c# 网络服务，但问题是需要添加 HTTP 请求标头。实际上我不知道如何将 HTTP 请求标头添加到 Web 服务？我添加了 SOAP 标头，但 SAP 端需要 HTTP 请求标头。

示例代码

```
 public class TestService : System.Web.Services.WebService
    {
         public class AuthSoapHeader : SoapHeader
         {
              public AuthSoapHeader() { }

              public string Username = string.Empty;
              public string Password = string.Empty;
         }

        [WebMethod]
        [SoapHeader("AuthHeader")]
        public List<Response> Testmethod(TestClass testData)
        {

            if ( AuthHeader.Username == "testuser" && AuthHeader.Password == "testpawd")
            {
            }
        }
    } 
```

请问有人知道怎么做吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-26T18:59:44.870

我已经研究过类似的解决方案，但在 VB.net 中。在那个解决方案上，我创建了一个单独的层（项目）来处理 SAP 通信和数据检索。下面的代码是带有 SOAP 身份验证的 Web 服务片段。

```
<SoapHeader("Authentication", Required:=True)> _
<WebMethod(Description:="SAP search")> _
Public Function SampleSearch() As String

    Dim objSearch As New clsSapSearch
    Dim dsReturn As New DataSet
    dsReturn.Tables.Add(objSearch.Search("parameter1", "parameter2"))

    Return GetXmlIncludingNull(dsReturn)

End Function 
```

# javascript - 使用 Dojo 获取文本框值

> ID：13871871
> 
> 赞同：-1
> 
> 时间：2012-12-14T02:38:17.753
> 
> 标签：javascript, html, dojo

好的，我认为这样的事情会非常简单，但显然 Dojo 中没有什么是简单的。我快要扔掉这东西了。这是个好主意，但我发现 C# 和 OOP 比这更容易。我现在尝试以多种方式获取 AddressModel_ZipCode 文本框的值。每次我都拉空它。我也尝试过使用 dom-attr 无济于事。谁能看到我到底哪里错了？谢谢。

```
 require(["dojo/dom", "dojo/dom-style", "dojo/request"],
function (dom, domStyle, request) {
    window.getZipCode = function () {
        var zipcode = dom.byId("AddressModel_ZipCode");
        alert(zipcode.get("value"));
        request.post("../PricingRequest/custinfozip", {
            data: { zipCode: zipcode }
        }).then(function (response) {
            dom.byId('custinfozip').innerHTML = response;
            var zipErrorMessage = dom.byId('zipErrorMessage');
            if ('@Model.AddressModel.ErrorMessage' != null) {
                domStyle.set(zipErrorMessage, 'display', 'inline');
            }
            else {
                domStyle.set(zipErrorMessage, 'display', 'none');
            }
        });
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T03:50:18.807

好的，所以道场的人帮助了我。如果您使用的是 dojo 而不是 dijit，那么它是 dom.byId('node').value。由于 Firefox，我也遇到了其他问题，所以我收回我所说的关于 dojo 的内容。哈哈

# user-interface - 是否有任何关于网站导航栏不应位于窗口右侧的 UI 设计原则？

> ID：13871882
> 
> 赞同：0
> 
> 时间：2012-12-14T02:39:48.467
> 
> 标签：user-interface

我发现许多流行的 Web 应用程序，如 facebook、twitter 和 gmail 都将它们的菜单栏设计在窗口的左侧。请问这是不是一些设计原则和心理原因造成的？我的想法是将菜单栏放在右侧应该更有意义，因为大多数人使用右手握住鼠标。希望熟悉UI设计的人可以帮助解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:48:27.940

左侧的菜单确保您无需水平滚动即可找到页面导航链接或按钮。

请注意，页面顶部也很常见，并且在许多情况下同样有用，并且简约现在很流行（尽可能少显示选项/仅显示更快到达目的地所需的选项）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T04:51:53.413

菜单通常位于左上角，原因如下：

1.  我们从左到右、从上到下阅读屏幕。这意味着任何应用程序（无论是否是 Web）的左上角都是主要的不动产，并且应该是最常用的项目所在的位置。

2.  除非有人将他们的窗口调整得小得离谱，否则网站的左上角总是可见的，这意味着菜单总是立即可见的。

这两个导致了第三个原因：

1.  由于大多数网站和应用程序都以这种方式运行，因此人们希望菜单位于该位置。把你的菜单搬到别处打破了这种期望，让你更难找到东西。如果您要打破这种期望，那么您应该有充分的理由这样做，并且它应该如此自然和更好的交互，以至于您的用户甚至都不会注意到它。

当您考虑如何布置网页（或应用程序）时，鼠标并不是您应该考虑的第一件事。眼睛是你要考虑的。我可能会用右手鼠标，但我的眼睛不一定在看鼠标在屏幕上的位置。此外，尽管许多人是右撇子，但请记住，越来越多的人将笔记本电脑用作他们的主要计算机，并且不使用外接鼠标，因此使用的是物理居中的指点设备，而不是远离正确的。

（我会注意到，这个答案只适用于从左到右阅读的语言，就像大多数西方语言一样。专为从右到左阅读的语言（如阿拉伯语和希伯来语）设计的网站不一定遵循这个。他们的阅读方式不同，所以优质房地产不一定是左上角。）

# clojure - 如何将字符串列表转换为闭包中的双精度列表？

> ID：13871883
> 
> 赞同：1
> 
> 时间：2012-12-14T02:39:53.183
> 
> 标签：clojure

如何在创建 mymap 的同时将“mymap”的值转换为双精度列表而不是字符串列表？

```
(use '[clojure.string :only (join split)])
;(def raw-data (slurp "http://ichart.finance.yahoo.com/table.csv?s=INTC"))
;Downloaded and removed the first line
(def raw-data (slurp "table-INTC.csv"))

(def raw-vector-list
  (map
    #(split % #",")          ; anonymous map function to split by comma
    (split raw-data #"\n"))) ; split raw data by new line

(pr (take 1 raw-vector-list))

(def mymap 
  (zipmap 

    ;construct composite key out of symbol and date which is head of the list
    (map #(str "INTC-" %) (map first raw-vector-list))

    ;How do i convert these values to Double instead of Strings?
    (map rest raw-vector-list)))

(pr (take 1 mymap)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:00:36.300

```
(def mymap
  (zipmap 
    (map #(str "NAT-" %) (map first raw-vector-list)) 
    (map #(map (fn [v] (Double/parseDouble v)) %)
         (map rest raw-vector-list))))

(pprint (take 1 mymap))
-> (["NAT-1991-09-30" (41.75 42.25 41.25 42.25 3.62112E7 1.03)]) 
```

另一个版本

```
(def mymap
  (map (fn [[date & values]]
         [(str "NAT-" date)
          (map #(Double/parseDouble %) values)])
       ;; Drop first non-parsable element in raw-vector-list
       ;; ["Date" "Open" "High" "Low" "Close" "Volume" "Adj Close"]
       (drop 1 raw-vector-list))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T14:04:24.927

所以对于这个数据的尾部/其余部分。您将匿名映射函数映射到字符串列表，然后将类型转换映射到每个子列表中的元素。

```
(def mymap
  (zipmap 
   (map #(str "NAT-" %) (map first raw-vector-list)) 
   (map #(map (fn [v] (Double/parseDouble v)) %)
     (map rest raw-vector-list)))) 
```

如何将类型转换提取到如下函数中......然后使用我的自定义方法？

```
(defn str-to-dbl [n] (Double/parseDouble n)) 
```

此代码抱怨嵌套的#。

```
(def mymap
  (zipmap 
   (map #(str "NAT-" %) (map first raw-vector-list)) 
   (map #(map #(str-to-double %)
     (map rest raw-vector-list)))) 
```

# javascript - Camelcase 在 Javascript 中使用 split() 两次

> ID：13871884
> 
> 赞同：0
> 
> 时间：2012-12-14T02:39:57.517
> 
> 标签：javascript

我正在尝试制作一个将句子拆分为单词然后将单词拆分为字符并将每个单词的第一个字母大写的函数。是的，这是家庭作业，经过多次尝试，我无法让它工作。让我绊倒的一件事是使用 split() 两次。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<head>
    <title>Sentence Case Conversion</title>
    <script type= "text/javascript">
    /* <![CDATA[ */
    /* ]]> */
    </script>
</head>

<body>
    <form name= "convertText">
        <p>Enter text to convert to sentence case:</p>
        <input type ="text" size ="120" name="userInput">
        </br>
        </br>

        <input name= "Submit" onclick= "sentenceCase()" value= "Convert Text" type= "button">
    </form>

        </br>
        </br>
        </br>

        <form name= "ouputText">
        <p>Here is your converted text:</p>
        <input type="text" size="120" name="result">
            <script type= "text/javascript">
            /* <![CDATA[ */
            function sentenceCase() {

                var userInput = document.forms[0].userInput.value;        //get user input
                var wordArray = userInput.split(" ");                     //split user input into individual words

                for (var i=0; i<wordArray.length; i++) { 
                     var characterArray = wordArray[i].split("");
                     characterArray[0].toUpperCase();
                     wordArray[i]=characterArray.join;
                }

            /* ]]> */
            </script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T02:55:49.580

你很接近：

```
> characterArray[0].toUpperCase(); 
```

返回一个值，它不会就地修改它

```
> wordArray[i]=characterArray.join; 
```

`join`是一种方法，你必须调用它。此外，它返回一个值，它不会修改任何内容。您可能会考虑改用子字符串，但使用您拥有的数组：

```
var firstChar = characterArray.shift().toUpperCase();
var newWord = firstChar + characterArray.join(''); 
```

应该做的伎俩。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T02:51:57.953

`toUpperCase()`无法就地修改您的变量；它返回大写的字符串。所以：

```
characterArray[0] = characterArray[0].toUpperCase(); 
```

...但您也可以使用`charAt()`and `substring()`：

```
wordArray[0] = wordArray[0].charAt(0).toUpperCase() + wordArray[0].substring(1); 
```

...然后您必须实际调用`join()`：

```
wordArray[i] = characterArray.join(); 
```

...并且您可能希望传递一个空字符串，否则它将默认为逗号作为分隔符。

[不过，有趣的方式是`'hello world this is camel case'.replace(/\s(\S)/g, function($0, $1) { return $1.toUpperCase(); })`。]

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T03:07:37.600

将常见元素分解为可理解的代码片段：

```
function toCamelCase(sentence) {
    var words = sentence.split(" ");
    var length = words.length;

    for (var i = 1; i < length; i++)
        words[i] = capitalize(words[i]);
    return words.join("");
}

function capitalize(word) {
    return word.charAt(0).toUpperCase() + word.slice(1);
} 
```

现在您可以将句子转换为大写。在转换之前从句子中删除标点符号可能是个好主意。这里有一些例子：

```
alert(toCamelCase("java script")); // javaScript
alert(toCamelCase("json to XML")); // jsonToXML
alert(toCamelCase("ECMA script")); // ECMAScript 
```

最后一个似乎是 PascalCase，但仍被认为是有效的 camelCase。你可以在这里看到演示：http: [//jsfiddle.net/GhKmf/](http://jsfiddle.net/GhKmf/)

# asp.net-mvc-4 - asp.net mvc，通过自定义路由生成url

> ID：13871885
> 
> 赞同：0
> 
> 时间：2012-12-14T02:40:23.990
> 
> 标签：asp.net-mvc-4, routes

我创建了应用程序，其中 url 生成取决于数据库值。我解析这些 url 没有任何问题，并在我的路由处理程序中从数据库中获取控制器和操作。

但是当我尝试生成 url 时，我遇到了麻烦。

就我而言，它似乎是：

看法

```
@Html.ActionLink("more", MVC.Blog.Post(item.Alias)) // i use T4MVC 
```

我的路由约束

```
public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
{
    if (routeDirection == RouteDirection.UrlGeneration)
    {
        var data = GetDataFromDbByControllerActionAndParameters(values);
        if (data == null)
            return false;
        var valuesToRemove = new List<string>();
        var path = GenerateUrlByData(data, valuesToRemove);
        values.Remove("controller");
        values.Remove("action");
        valuesToRemove.ForEach(v => values.Remove(v)); // remove values that is already used in path
        values.Add("all", path) // path = "blog/post/postalias"
        return true;
    }
    //  skipped code
} 
```

路由规则

```
routes.MapRoute("Locations", "{*all}", 
    constraints: new { all = new LocationConstraints() },
    defaults: new { }, 
    namespaces: new []{typeof(BaseController).Namespace}).RouteHandler = new LocationRouteHandler(); 
```

结果我得到了这样的网址

```
localhost:8553/?Controller=Blog&Action=Post&alias=postalias 
```

但期待这样

```
localhost:8553/blog/post/postalias 
```

我怎样才能生成网址？它应该在哪里？我认为不是常数，但为什么在这种情况下会调用它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T08:27:43.813

在我的 MVC 应用程序中，与您拥有的最接近的路线是以下路线：

```
routes.MapRoute(
    name: "MyRouteName",
    url: "{SomeFolder}/{SomePageName}",
    defaults: new { controller = "MyController", action = "Index" },
    constraints: new { routeConstraint = new MyRouteConstraint() }
); 
```

`SomeFolder`可以从数据库中固定或更改，而从数据库`SomePageName`中更改为不同的值。`url`应该是您希望与此路由匹配的任何 URL，并且该 URL 将被数据库中的值替换。`defaults`将在 MVC 循环结束时呈现页面的 Controller 和 Action的地址。这`constraints`将导致您描述的 Match 方法。

使用此配置，我有类似`www.project.com/SomeFolder/SomePageNameFromDatabase`.

# java - JTabbedPane 不会在鼠标单击时更改面板

> ID：13871887
> 
> 赞同：-1
> 
> 时间：2012-12-14T02:40:34.213
> 
> 标签：java, swing, mouse, jpanel

我有一个将 TabbedComponent（扩展 JTabbedPane）存储为变量的 Main 类。另一个类 (ToolbarComponent(extending JMenuBar) 也作为变量存储在我的主类中。

在 Toolbar 上发生用户事件时，它会调用父类（main），以获取 TabbedComponent 对象并调用方法来创建新选项卡。这一切都很好。

我的问题是，当我尝试用鼠标单击 ta 时，没有任何变化。我很确定我不需要 MouseAdapter 上的侦听器来做一些简单的事情，但如果我需要它我猜会添加它。

以下是与此问题相关的类的精简版本

公共类 ExampleClass 扩展 JFrame {

```
private TabbedBrowserPaneComponent cTabbedBrowserPane;

public ExampleClass() {
    super("");

    // Set up Components
    this.cTabbedBrowserPane = new TabbedBrowserPaneComponent(this);

    // Set up behaviour
    setSize(500, 300);
    setVisible(true);
}

/**
 * @return the cTabbedBrowserPane
 */
public TabbedBrowserPaneComponent getTabbedBrowserPane() {
    return cTabbedBrowserPane;
}

/**
 * @param cTabbedBrowserPane the cTabbedBrowserPane to set
 */
public void setTabbedBrowserPane(TabbedBrowserPaneComponent cTabbedBrowserPane) {
    this.cTabbedBrowserPane = cTabbedBrowserPane;
} 
```

}

```
public class TabbedBrowserPaneComponent extends JTabbedPane {

// Parent class of the component
private JFrame parent = null;

public TabbedBrowserPaneComponent(JFrame parent) {
    super();
    setParent(parent);

    // Add an initial pane
    createNewTab();
    parent.getContentPane().add(this);
}

public void createNewTab() {
    JPanel panel = new JPanel(new BorderLayout());
    panel.add(new JScrollPane(), BorderLayout.CENTER);
    this.addTab("Tab " + this.getTabCount(), panel);
}

/**
 * @return the parent
 */
public JFrame getParent() {
    return parent;
}

/**
 * @param parent the parent to set
 */
public void setParent(JFrame parent) {
    this.parent = parent;
}
} 
```

要创建一个新选项卡，ToolBarComponent 的侦听器调用如下

```
public class CreateNewTabAction extends AbstractAction {

// Parent
private JMenu parent;

public CreateNewTabAction(JMenu parent) {
    super();
    this.setParent(parent);

    // Values for the tab
    putValue(Action.NAME, "New Tab");
}

@Override
public void actionPerformed(ActionEvent e) {
    ExampleClass.class.cast((parent.getParent().getParent())).getTabbedBrowserPane().createNewTab();
}

/**
 * @return the parent
 */
public JMenu getParent() {
    return parent;
}

/**
 * @param parent the parent to set
 */
public void setParent(JMenu parent) {
    this.parent = parent;
}
} 
```

我真的很想念这件事吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T03:24:29.503

抱歉，您的代码明显缺乏设计（我不是刻薄，但我花了 3 年的大部分时间来消除这种行为，所以它给了我一个讨厌的抽搐）。

您的问题是您正在覆盖`getParent`，这是`Component`用于确定组件实际添加到何处的方法。这导致了系统内部工作的问题。

无需向选项卡组件提供父框架。如果您出于某种原因确实需要访问父框架，请考虑使用`SwingUtilities.getWindowAncestor`. 如果您只是计划为框架中的选项卡提供功能，请创建一个`interface`可以在选项卡和控制器/引擎之间建立合同的工具。

不要让我开始`Action`...

**一个例子**

我不确定您实际上想要实现什么，但绝对没有必要传递对浏览器选项卡或主框架的引用。您将程序的元素传递给它们只是不需要知道有关其父项的太多信息即可实现那里的工作，而且，您极大地限制了组件的灵活性和可重用性。

下面，我使用了一个简单的`interface`\controller，它在示例中的各种视图和控件之间提供了一个契约。各种元素中的任何一个都不需要知道更多......

```
public class ExampleClass {

    public static void main(String[] args) {
        new ExampleClass();
    }

    public ExampleClass() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                BrowserPane browserPane = new BrowserPane();
                CreateNewTabAction createNewTabAction = new CreateNewTabAction(browserPane);

                JMenu mnu = new JMenu("Stuff");
                mnu.add(createNewTabAction);

                JMenuBar mb = new JMenuBar();
                mb.add(mnu);

                JToolBar tb = new JToolBar();
                tb.add(createNewTabAction);

                JFrame frame = new JFrame();
                frame.setJMenuBar(mb);
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(browserPane);
                frame.add(tb, BorderLayout.NORTH);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
            }
        });
    }

    public interface TabController {

        public void createNewTab();
    }

    public class BrowserPane extends JPanel implements TabController {

        private TabbedBrowserPaneComponent cTabbedBrowserPane;

        public BrowserPane() {
            setLayout(new BorderLayout());
            // Set up Components
            this.cTabbedBrowserPane = new TabbedBrowserPaneComponent();
            add(cTabbedBrowserPane);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(400, 400);
        }

        @Override
        public void createNewTab() {

            cTabbedBrowserPane.createNewTab();

        }
    }

    public class TabbedBrowserPaneComponent extends JTabbedPane {

        public TabbedBrowserPaneComponent() {
            super();
            createNewTab();
        }

        public void createNewTab() {
            JPanel panel = new JPanel(new BorderLayout());
            panel.add(new JScrollPane(), BorderLayout.CENTER);
            this.addTab("Tab " + this.getTabCount(), panel);
        }
    }

    public class CreateNewTabAction extends AbstractAction {

        private TabController controller;

        public CreateNewTabAction(TabController controller) {
            super();
            this.controller = controller;
            putValue(Action.NAME, "New Tab");
        }

        @Override
        public void actionPerformed(ActionEvent e) {
            getController().createNewTab();
        }

        /**
         * @return the parent
         */
        public TabController getController() {
            return controller;
        }
    }
} 
```

# java - Glassfish JSF 罐子

> ID：13871889
> 
> 赞同：0
> 
> 时间：2012-12-14T02:40:47.363
> 
> 标签：java, jsf-2, glassfish, glassfish-3

我下载了 Glassfish 3.1.2.2 的 zip 版本并将其解压缩到我的本地目录中。

当我尝试将以下 glassfish 目录添加为运行时库时，它说没有 glassfish 运行时。

我检查了该文件夹，我认为它缺少一些 jsf jar，例如 jsf-impl ..

我该如何设置？我真的需要下载一些 3rd 方 jsf 实现 jars 吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T03:10:09.727

> *我检查了该文件夹，我认为它缺少一些 jsf jar，例如 jsf-impl。*

`jsf-api.jar`从 Mojarra 2.1.6 开始，这两个 JAR`jsf-impl.jar`被合并到一个 JAR`javax.faces.jar`中。这样做是为了符合一般 Java EE Maven 规则。另见[问题 2028](http://java.net/jira/browse/JAVASERVERFACES-2028)。

# c# - 更改富文本框的颜色并在按 Enter 时向其中添加文本

> ID：13871890
> 
> 赞同：0
> 
> 时间：2012-12-14T02:40:55.367
> 
> 标签：c#

我正在制作一款 RPG 风格的基于文本的游戏。目前它在一个控制台应用程序中，但我宁愿将它移到一个 Windows 窗体应用程序中，以获得一些附加功能和花哨。这带来了一些问题。

颜色区分消息的类型，因此颜色很重要。我在另一个问题上发现了这个：

```
int length = richTextBox.TextLength;  // at end of text
richTextBox.AppendText(mystring);
richTextBox.SelectionStart = length;
richTextBox.SelectionLength = mystring.Length;
richTextBox.SelectionColor = Color.Red; 
```

这似乎在文本之后添加了颜色。有没有更好的方法来处理颜色？另外，如果我想在一行上有多种不同的颜色怎么办？这使事情复杂化了。（最好我可以使用颜色代码来指定字符串本身的颜色，例如 &&4this 是红色 &&fthis 是白色 &&0this 是黑色，但我想这可能会使事情过于复杂。）

目前，输入框是一个简单的文本框。当你按下回车键时，什么也没有发生。我想输入以清除文本框并输出我可以使用的字符串（不一定添加到富文本框中）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T03:11:45.357

我在评论中假设的是真的，只是测试了一下。将您的代码更改为：

```
Color prevColor = richTextBox.SelectionColor;
richTextBox.SelectionColor = Color.Red;
richTextBox.AppendText(mystring);
richTextBox.SelectionColor = prevColor; 
```

# ms-access - 在 Access 中构建查询

> ID：13871891
> 
> 赞同：2
> 
> 时间：2012-12-14T02:41:35.973
> 
> 标签：ms-access, time, ms-access-2010

我需要查询一个人在办公室内停留的时间。我有一个列表，该列表创建了一个人何时进入办公室的记录，以及该人何时离开办公室的记录和其他记录。我有一些困难，因为一个人可以在同一天多次进出，有时一个人没有注册您的进出。根据例子

```
╔════════════╦════════════╦════════════════════╦═════════════════╦═════════╦═══════╗
║ Local Date ║ Local Time ║      Employee      ║     Office      ║ Catraca ║ Staus ║
╠════════════╬════════════╬════════════════════╬═════════════════╬═════════╬═══════╣
║ 11/7/2012  ║ 10:16      ║ SILVA ,ANDRE BRAGA ║ Alexandre Duma  ║     002 ║ In    ║
║ 11/7/2012  ║ 13:03      ║ SILVA ,ANDRE BRAGA ║ Alexandre Dumas ║     004 ║ Out   ║
║ 11/7/2012  ║ 15:19      ║ SILVA ,ANDRE BRAGA ║ Alexandre Dumas ║     004 ║ Out   ║
║ 11/7/2012  ║ 15:25      ║ SILVA ,ANDRE BRAGA ║ Alexandre Dumas ║     004 ║ In    ║
║ 11/7/2012  ║ 18:31      ║ SILVA ,ANDRE BRAGA ║ Alexandre Dumas ║     004 ║ Out   ║
║ 11/7/2012  ║ 18:40      ║ SILVA ,ANDRE BRAGA ║ Alexandre Dumas ║     004 ║ In    ║
║ 11/7/2012  ║ 19:56      ║ SILVA ,ANDRE BRAGA ║ Alexandre Dumas ║     004 ║ Out   ║
╚════════════╩════════════╩════════════════════╩═════════════════╩═════════╩═══════╝ 
```

在这个例子中，这个人在办公室的时间是 07:09

Regads 安德烈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T05:43:55.810

好的，合计起来相当容易。消除没有匹配时间戳的时间戳更加困难。

至于总计：日期和时间在内部存储为数字。假设没有人在午夜工作，那么您所要做的就是将所有“In”时间相加并从所有“Out”时间中减去。像这样：

```
SELECT [TotOut]-[TotIn] AS TotHours, *
FROM (SELECT CheckIn.Employee, CheckIn.[Local Date], Sum(CheckIn.[Local Time]) AS [TotIn]
FROM CheckIn
WHERE (((CheckIn.Staus)="In"))
GROUP BY CheckIn.Employee, CheckIn.[Local Date])  AS TotIn INNER JOIN (SELECT CheckIn.Employee, CheckIn.[Local Date], Sum(CheckIn.[Local Time]) AS [TotOut]
FROM CheckIn
WHERE (((CheckIn.Staus)="Out"))
GROUP BY CheckIn.Employee, CheckIn.[Local Date])  AS TotOut ON (TotIn.Employee = TotOut.Employee) AND (TotIn.[Local Date] = TotOut.[Local Date]); 
```

消除不匹配的时间是可能的，但很困难。这个查询完成了大部分工作。但是，它跳过了第一条记录，因此需要调整。

```
SELECT A.ID, A.[Local Time], B.[Local Time] AS [Prev Time], A.Staus
FROM CheckIn AS A LEFT JOIN CheckIn AS B ON (A.Employee = B.Employee) AND (A.[Local Date] = B.[Local Date])
WHERE (((B.[Local Time])=DMax("[local time]","[checkin]","[local time] < #" & [a].[Local Time] & "#")) AND ((A.Staus)<>[b].[staus]))
ORDER BY A.[Local Time]; 
```

此外，您需要首先创建一个记录集，该记录集会跳过任何以“Out”状态开头的记录。[这是一篇可能会有所帮助的文章](http://office.microsoft.com/en-us/access-help/creating-an-outer-join-query-in-access-HA001034555.aspx)。

# python - Python 正则表达式拆分多行包含模式

> ID：13871893
> 
> 赞同：1
> 
> 时间：2012-12-14T02:41:37.103
> 
> 标签：python, regex, include, split, multiline

我在 python 中接收到类似于这种格式的数据

```
garbage
=== Season 1 ===
season 1 data
more season 1 data
=== Season 2 ===
season 2 data 
```

使用换行符，但未定义“=== Season x ===”之间的数据（如果您知道，它来自维基百科的 API）。

无论如何，我正在尝试使用正则表达式将其分解，但似乎无法正确处理。我试试

```
p = re.compile('(===\sSeason.*)'
print p.split(data) 
```

并得到

```
['garbarge\n', '=== Season 1 ===', '\nseason 1 data\nmore season 1 data\n\n', '=== Season 2 ===', '\nseason 2 data\n'] 
```

但我正在寻找的是：

```
['garbarge\n', '=== Season 1 ===\nseason 1 data\nmore season 1 data\n\n', '=== Season 2 ===\nseason 2 data\n'] 
```

每个模式包括文本，直到下一个模式，换行符和所有。我尝试过 re.MULTILINE、re.DOTALL 的组合，但我似乎无法做到正确。有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T02:47:45.790

不知道为什么这不完全有效，但这似乎对我有用：

```
>>> data = """
garbage
=== Season 1 ===
season 1 data
more season 1 data
=== Season 2 ===
season 2 data
"""
>>> re.split('^===\sSeason\s\d+\s===$',data,0,re.MULTILINE)
['\ngarbage\n', '\nseason 1 data\nmore season 1 data\n', '\nseason 2 data\n'] 
```

哦..这不是你想要的吗？但是`split`去掉你正在分裂的东西；如果您想保留它，那么您没有使用正确的工具来完成这项工作。

这是另一个更复杂的解决方案，它过滤掉“垃圾”，但保留季节信息：

```
>>> re.findall('=== Season \d+ ===.*?(?=^===|\Z)',data,re.DOTALL|re.MULTILINE)
['=== Season 1 ===\nseason 1 data\nmore season 1 data\n', '=== Season 2 ===\nseason 2 data\n'] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T02:53:14.457

一种直接的方法是逐行浏览内容：

```
season = ''
for line in data.splitlines():
    if line.startswith('=== Season'):
        season = line
    elif season:
        do something 
```

# wordpress - Wordpress RewriteRule 与 .passwd 冲突

> ID：13871897
> 
> 赞同：0
> 
> 时间：2012-12-14T02:41:59.867
> 
> 标签：wordpress, .htaccess, mod-rewrite, .htpasswd

在我的根 .htaccess 文件中，我有以下 Wordpress 代码：

```
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule . /wordpress/index.php [L] 
```

与标准代码略有不同，因为 Wordpress 文件位于“wordpress”目录中，但重写仍然相对于域根目录出现。例如，可以将博客文章称为 site.com/this-is-a-blog-post.php 并且重写工作。

这很好用，**除非**我想使用 htpasswd 来保护站点上的目录。如果我将以下代码添加到任何目录中的 .htaccess 文件中，我会在尝试浏览到该目录时得到 404：

```
AuthName "Private"
AuthUserFile "/home/passwd"
AuthType Basic
require valid-user 
```

当 Wordpress 重写代码的最后一行被注释掉时，此代码可以正常工作，但是在 Wordpress 代码完整的情况下，我的密码保护目录给出了 404。

所以我在两个 .htaccess 文件之间存在冲突。我尝试编写一堆 RewriteCond 来尝试排除应用密码的子目录，但无法确定。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:45:20.603

好的，墨菲定律，在发布问题后才解决！

Wordpress 重写所需的额外条件是：

```
RewriteCond %{REQUEST_URI} (/|\.htm|\.php|\.html|#.*|\?.*|/[^.]*)$  [NC] 
```

所以完整的 Wordpress 重写代码变成：

```
RewriteRule ^index\.php$ - [L]
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} (/|\.htm|\.php|\.html|#.*|\?.*|/[^.]*)$  [NC]
RewriteRule . /wordpress/index.php [L] 
```

现在我要去完成我不起眼的馅饼了。

# visual-studio-2010 - 构建 Outlook 加载项项目时出现“无法导入以下密钥文件”错误

> ID：13871902
> 
> 赞同：2
> 
> 时间：2012-12-14T02:42:29.757
> 
> 标签：visual-studio-2010, vsto, outlook-addin, app-certification-kit

> 错误消息：无法导入以下密钥文件：. 密钥文件可能受密码保护。要更正此问题，请尝试再次导入证书或手动将证书导入当前用户的个人证书存储区。

有人说使用以下命令来修复它，虽然我的没有返回容器名称，所以我不知道如何运行这个命令。我们在证书中根本没有密码。

`sn -i companyname.pfx VS_KEY_3E185446540E7F7A`

# php - 如何在 php 中将 create gif 发送回？

> ID：13871911
> 
> 赞同：0
> 
> 时间：2012-12-14T02:44:04.123
> 
> 标签：php, image

我有一个接收 id 并将图片发回的协议。现在我有问题如何发送只创建 .gif ？在这里请看一下我的代码

```
if($id!="")
    {
        ........

        $ext = substr( $picturename, strrpos($picturename, '.')+1 );
        switch($ext)
        {
            case 'jpg':
                $ext = 'jpeg';
                break;
            case 'jpeg':
                $ext = 'jpeg';
                break;
            case 'png':
                $ext = 'png';
                break;
            case 'gif':
                $ext = 'gif';
                break;
        }

        header('Content-Description: File Transfer');
        header('Content-Type: image/'.$ext);

        $file = "./images/".$picturename;
        readfile($file);
            //this work 

    }
    else
    {
        // Create a 1x1 image
        $im = imagecreatetruecolor(55, 30);
        $trans = imagecolorallocate($im, 0, 0, 0);
        // Make the background transparent
        imagecolortransparent($im, $trans);

        header('HTTP/1.1 403 Forbidden');
        //How can I send .gif back with header ??
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:55:02.307

您可以设置多个标题并以相同的方式输出图像。附件是生成 1x1 像素的代码。

```
....
header('HTTP/1.1 403 Forbidden');
header('Content-Type: image/gif');
// output a 1x1 pixel
echo base64_decode("R0lGODdhAQABAIAAAPxqbAAAACwAAAAAAQABAAACAkQBADs="); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:52:03.677

只是输出`imagegif($im);`。设置`403`标题并没有做任何特别的事情，因此您可以输出图像，这就是将收到的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T02:54:07.990

如果您不需要在图像中动态包含任何内容（例如文本），您可以只返回一个默认的 1x1 图像，而不是使用 imagecreate 函数...？

不过，就 403 标头而言，我不确定如果浏览器认为这是来自服务器的错误响应，它是否会显示图像 - 所以你可能会得到损坏的图像。

# python - ZCML中的模板和ViewPageTemplateFile有什么区别

> ID：13871915
> 
> 赞同：6
> 
> 时间：2012-12-14T02:44:34.430
> 
> 标签：python, plone, zope, zcml

在 Plone 中创建[BrowserView](http://developer.plone.org/views/browserviews.html)时，我知道我可以选择使用**ZCML**配置模板，如下所示：

```
<configure

    xmlns:browser="http://namespaces.zope.org/browser"
    >

    <browser:page
        …
        class=".foo.FooView"
        template="foo.pt"
        …
        />

</configure> 
```

或者在代码中：

```
# foo.py
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
from zope.publisher.browser import BrowserPage

class FooView(BrowserPage):
    """
    My View
    """

    def __call__(self):
        return ViewPageTemplateFile('foo.pt')(self) 
```

这两种方法有什么区别吗？它们似乎都产生了相同的结果。

**子问题**：我知道有`BrowserView`一个可以导入的类，但通常每个人都使用`BrowserPage`. 如果两个类别之间存在任何显着差异怎么办？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-14T09:53:03.470

注意：要完全等同于 ZCML，您应该设置`index`变量以指定您使用的模板。这样，TTW 自定义也将起作用。

```
# foo.py
from Products.Five.browser.pagetemplatefile import ViewPageTemplateFile
from zope.publisher.browser import BrowserPage
class FooView(BrowserPage):
    index = ViewPageTemplateFile('foo.pt') 
```

您可以在浏览器视图中使用的另一种模式是添加更新方法。

```
class FooView(BrowserPage):
    index = ViewPageTemplateFile('foo.pt')
    def __call__(self):
        self.update()
        return self.index()

    def update(self):
        self.portal_catalog = ...  # initialize code 
```

但这不是问题。

* * *

那么区别是什么呢？**没有区别**。浏览器视图必须是可调用的。ZCML 指令以对象具有必须返回呈现页面的索引的方式构建此可调用对象。

但是在每次调用（您的示例）时创建模板有一个区别：您在每次调用浏览器视图时创建模板的新实例。类变量不是这种情况。

最后一个选项：指令中不需要类参数

```
<configure xmlns:browser="http://namespaces.zope.org/browser">
  <browser:page
    …
    template="foo.pt"
    …
    />
</configure> 
```

有关更多信息，您应该阅读[指令的代码，该指令](http://svn.zope.org/%2acheckout%2a/zope.browserpage/trunk/src/zope/browserpage/metadirectives.py?content-type=text%2Fplain&rev=127196)使用[SimpleViewClass，其中 src 是模板名称](http://svn.zope.org/%2acheckout%2a/zope.browserpage/trunk/src/zope/browserpage/simpleviewclass.py?content-type=text%2Fplain&rev=126060)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-14T06:11:03.230

在 Plone 中，您只能在显式注册模板时（例如使用 ZCML 或 Grok 指令）自定义模板 TTW（通过`portal_view_customizations`）。

如果您只在您的 中定义模板`__call__`，您将不会在`portal_view_customizations`.

另外，我猜想在方法中加载模板会为每个视图实例（每个请求）从磁盘重新加载它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T04:33:10.530

AFAIK，**没有区别**。ZCML 指令生成一个带有 a 的 ViewClass`ViewPageTemplateFile`并将模板呈现在`__call__`. 见`zope.browserpage.metaconfigure.page`第 132、151 行。

这与您在示例中所做的完全相同：您在`__call__`方法中显式实例化模板。

至于子问题：据我了解，在 Zope2/Plone 的上下文中，显着差异并不明显。基于接口 ( `zope.publisher.interfaces.browser.IBrowserPage`)，BrowserPage 是您想要继承的基类，因为它实现了`__call__`和`browserDefault`。`BrowserPage`然而，使用或`BrowserView`与 Plone 一起使用似乎并不重要。

# java - 防止＆符号转换为 &

> ID：13871917
> 
> 赞同：5
> 
> 时间：2012-12-14T02:44:52.667
> 
> 标签：java, spring

我有一个 Spring MVC webapp（不确定该信息是否重要，但可能是），它使用 ModelAndView 将字符串值传递给 JSP 文件。

字符串值的格式为：

```
&#100;&#64;&#46;&#110;&#121; 
```

当 tomcat 显示生成的 HTML 时，所有 & 符号都已转换为：

```
&amp;#99;&amp;#97; 
```

这不是我想要的。我尝试了一些来自 Apache commons 和 Spring 的转义函数，但它们产生了奇怪的输出：

```
&amp;amp;#99;&amp;amp;#97; 
```

关于如何防止这种情况的任何想法？谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:09:18.817

由于字符串已经被转义（根据 HTML 规则），只需将其原始输出；这应该工作

```
 <%= string %> 
```

但如果您以其他方式输出它，则可能会应用额外的转义。

更深层次的问题是，为什么下层逃脱了字符串？它不应该。

# php - 格式化链接以轻松更改网站位置（例如在另一个网站的子目录中）

> ID：13871919
> 
> 赞同：1
> 
> 时间：2012-12-14T02:45:01.300
> 
> 标签：php, javascript, css, url, iis

我需要获取一个现有网站并将其作为另一个现有网站的子目录。例如，我有 www.website1.com 和 www.website2.com，我需要将 website2 放在 website1 中，如下所示：www.website1.com/website2/。应该注意的是，我使用 IIS 来托管这些网站。

我实际上已经多次遇到这种情况，我想知道是否有一种编写链接的好方法，这样我就可以轻松地将网站放到任何地方，而不必重新格式化每个链接。我使用两个主要路径 - 一个用于我的根目录，一个用于根目录外的包含文件夹。我的第一个想法是在 PHP 中为这些路径设置两个路径变量，但后来它无法进入我的外部 js 和 css 文件。如果我可以帮助它，我不想将它们转换为 php 文件，因为它会产生缓存复杂性。

无论如何，还有其他人对此有很好的解决方案吗？你过去是如何处理的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:47:02.047

这就是我最终做的事情：

对于我的根目录下的项目，我使用了纯相对路径。因此，例如，当我访问图像文件夹中的图像时，链接取决于我在目录结构中所在页面的深度：

```
<img src='./images/myImg.png'/> <!-- in root dir -->
<img src='../images/myImg.png'/> <!-- 2 levels deep -->
<img src='../../images/myImg.png'/> <!-- 3 levels deep --> 
```

这并不理想，因为我必须考虑每个链接与我所在的文件的关系，如果我更改图像文件夹或文件的位置，我需要更改每个链接。积极的一面是，只要我不开始更改我的目录结构，我就可以将此文件夹放置在任何级别，并且无需更改即可工作。例如，我可以这样做：

```
www.website2.com
www.website1.com/website2/
www.website1.com/sub-directory/website2/ 
```

它可以在不对链接进行任何更改的情况下工作。

对于根文件夹之外的包含文件夹中的项目，我必须做一些不同的事情。对于那些，我在 PHP 中使用了相对链接，我在这里了解了更多信息[http://yagudaev.com/posts/resolving-php-relative-path-problem/](http://yagudaev.com/posts/resolving-php-relative-path-problem/)。他描述了几个不同的选项，但最后，我创建了一个全局变量，如下所示：

```
$includesPath = $_SERVER['DOCUMENT_ROOT'] . "/../myProductsIncludes/"; 
```

这将在与根文件夹相同的文件夹中查找包含文件夹。如果我需要调整包含文件夹的位置，我只需更改这个变量中的链接。然后，每当我将 url 写入包含文件夹中的文件时，我都会在全局变量前面添加，如下所示：

```
include $includesPath . "classes/myClass.php"; 
```

这都是相当基本的东西，并且有一些缺点，所以我不会在每个项目中都使用它，但是如果我有一个我不知道它会在目录结构中结束的项目（例如，如果我为客户签约）。因此，例如，如果我将其提供给客户，他可以将我的根文件夹的内容放到他网站上的任何子目录中，并将包含文件夹放在与他网站的根目录相同的文件夹中（或者只是更改那个变量，如果他想将它存储在其他地方），并且无需更改链接即可全部工作。

如果有人有不同的方式来做到这一点，或者对我的方式有任何改进，我很想听听。

# c++ - 函数没有改变指针的值

> ID：13871924
> 
> 赞同：2
> 
> 时间：2012-12-14T02:45:21.917
> 
> 标签：c++, function, pointers

我认为代码是不言自明的：

```
MyClass* pointer = NULL;
changePointer( pointer );
if (pointer == NULL) 
{
   // it's entering here :(
}

    void changePointer( MyClass* p)
    {
        MyClass* temp = NULL;
        for (int i = 0; i < myContainer.size(); ++i) 
        {
            p = &(myContainer[i]);

            if (p == NULL) 
            {
                 // it's not entering here :)
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T02:47:41.200

如果要更改指针在调用者函数中指向的内容，则希望通过引用传递指针

```
void changePointer(MyClass*& p) 
```

**您**无需更改****调用**函数的方式或在函数中的**使用** `p`方式。现在如果你改变`p`函数内部的目标，它也会**在原始变量**中改变。**

 **这是你要问的吗？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T02:48:34.227

指针是按值传递的，而不是按引用传递的，因此无法更改原始变量。您需要将函数签名更改为：

```
void changePointer(MyClass** p) 
```

...并将指针传递给指针：

```
changePointer(&pointer); 
```

您还需要在函数体中进行一些相应的更改。**

# python - 使用命名空间获取 lxml 标记属性

> ID：13871925
> 
> 赞同：7
> 
> 时间：2012-12-14T02:45:27.683
> 
> 标签：python, xml, namespaces, lxml

我的 XML 看起来像：

```
...
<termEntry id="c1">
    <langSet xml:lang="de">
    ... 
```

我有代码：

```
from lxml import etree
...

for term_entry in root.iterfind('.//termEntry'):
    print term_entry.attrib['id']
    print term_entry.nsmap

    for lang_set in term_entry.iterfind('langSet'):
        print lang_set.nsmap
        print lang_set.attrib

        for some_stuff in lang_set.iterfind('some_stuff'):
            ... 
```

我得到空的 nsmap 字典，我的属性字典看起来像`{'{http://www.w3.org/XML/1998/namespace}lang': 'en'}`

该文件可能不包含`xml:`在命名空间中，或者它可能具有不同的命名空间。我如何知道标签声明中使用的命名空间？事实上，我只需要获取一个`lang`属性，我不在乎使用了什么命名空间。我不想使用任何蹩脚的垃圾`lang_set.attrib.values()[0]`或其他具有已知名称的字段的查找。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-15T14:07:46.953

> *我只需要获取一个`lang`属性，我不在乎使用了什么命名空间*

您的问题不是很清楚，您还没有提供任何完整的可运行代码示例。但是按照@mmgp 在评论中的建议进行一些字符串操作可能就足够了。

但是，`xml:lang`与`random_prefix:lang`（或只是`lang`）不同。我认为你*应该*关心命名空间。如果目标是识别适用于元素内容的自然语言，那么您应该使用`xml:lang`（因为这是此属性的明确目的；请参阅[http://www.w3.org/TR/REC-xml/#秒语言标签](http://www.w3.org/TR/REC-xml/#sec-lang-tag)）。

* * *

> *我只想知道`{http://www.w3.org/XML/1998/namespace}`属性的字符串*存储在哪里。

重要的是要知道`xml`前缀是特殊的。它是保留的（与几乎所有其他应该是任意的命名空间前缀相反）并定义为绑定到`http://www.w3.org/XML/1998/namespace`.

来自[XML 1.0 W3C 推荐中的命名空间](http://www.w3.org/TR/REC-xml-names/#ns-decl)：

> 前缀**xml**根据定义绑定到命名空间 name `http://www.w3.org/XML/1998/namespace`。它可以，但不需要，被声明，并且不能被绑定到任何其他命名空间名称。其他前缀不得绑定到此名称空间名称，并且不得将其声明为默认名称空间。

`xml`前缀的其他用途是`xml:space`和`xml:base`属性。

* * *

> *真的很奇怪，如果lxml没有提供任何命名空间处理的方法*

lxml 可以很好地处理命名空间，但要尽可能[避免使用前缀。](http://lxml.de/tutorial.html#namespaces)`http://www.w3.org/XML/1998/namespace`在进行涉及`xml`前缀的查找时，您将需要使用命名空间名称。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2016-12-28T01:25:48.283

你可以简单地使用xpath：

```
lang_set.xpath('./@xml:lang')[0] 
```

顺便问一下，您在处理 TBX 文件吗？

# jquery - 从 HTML 元素突出显示（动画）饼图切片（鼠标悬停）

> ID：13871927
> 
> 赞同：1
> 
> 时间：2012-12-14T02:45:34.960
> 
> 标签：jquery, html, highcharts

我有一系列带有数据的 HTML 表格单元格 - 其中一个示例是：

```
<tr id="rrow1">
  <td>
    <a href="/electricity" class="category">Electricity</a>
  </td>
  <td>
    901.471
  </td>
</tr>

<tr id="rrow2">...
<tr id="rrow3">...
etc 
```

在这种情况下，每个`<tr>`（或者对于更广泛的社区来说是一个/// `div`）`span`都被分配一个基于while循环（在PHP中）的顺序ID `tr`。`td``$rrow++;`

我还有一个使用 highcharts 库的[饼图](http://jsfiddle.net/xN3DQ/5/)[，](http://highcharts.com)我想突出显示`sliced: true`基于特定 /// 元素的 onmouseover 的切片 () `div`-在这种情况下如上所述，但需要多个/迭代元素和 ( `span`) onmouseout.. .`tr``td``#rrow1``sliced: false`

作为一个简单的例子，我尝试访问以下的各种衍生物，但失败了：

```
$('#rrow1').mouseover(function() {
    chart.series[0].graph.attr('sliced', true);
});

$('#rrow1').mouseout(function() {
    chart.series[0].graph.attr('sliced', false);
}); 
```

我发现的最接近的是这个，但最多是混蛋并且没有成功：

```
plotOptions: {
  series: {
        mouseOver: function() {
          if( $('#rrow1').mouseover )
            series.x = sliced: true;
        },
        mouseOut: function() {
          if( $('#rrow1').mouseout )
            series.x = sliced: false;
        }
      }
    } 
```

这些远非正确，尽管进行了搜索，但我找不到有效/有用的示例来工作或绘制方向。

[您可以在此处](http://jsfiddle.net/xN3DQ/5/)的 jsfiddle 上查看有问题的饼图。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T03:18:50.383

**鼠标悬停动画**

有一个切馅饼的功能，您可以在每个点事件上调用它。

```
plotOptions: {
    series; {
        point: {
            events: {
                mouseOver: function() {
                    this.slice();
                },
                mouseOut: function() {
                    this.slice();
                }
            }
        }
    }
} 
```

更新[了您的图表](http://jsfiddle.net/xN3DQ/4/)。

**从外部元素制作动画**

首先，您必须确定要为哪个切片设置动画。Iou 可以使用`id`for each来做到这一点`slice`，并**在相应的 html 元素上存储相同的 id**。
然后您可以使用`chart.get(id);`获取切片并调用`slice`函数。

像这样：
**我的系列**

```
series: [{
    type: 'pie',
    name: 'Share',
    data: [{
        name: 'Electricity',
        id: 'eletricity-slice'
    }, {
        name: 'Heating Oil',
        id: 'oil-slice'
    }, {
        name: 'Gas',
        id: 'gas-slice'
    }, {
        name: 'Other',
        id: 'other-slice'
    }]
}] 
```

**我的 HTML**

```
<table border="1">
    <tr data-slice="eletricity-slice"><td>Electricity</td></tr>
    <tr data-slice="oil-slice"><td>Heating Oil</td></tr>
    <tr data-slice="gas-slice"><td>Gas</td></tr>
    <tr data-slice="other-slice"><td>Other</td></tr>
</table> 
```

这样我就知道哪个元素切片了哪个点。然后我只需要**绑定事件**。

```
$('table').on('mouseover mouseout', 'tr', function() {
    var sliceId = $(this).data('slice'); // get data attr which contais the id
    animateSlice(chart.get(sliceId));    // pass slice point as parameter
}); 
```

我创建了一个函数`animateSlice`来为我想要的切片设置动画，因此您也可以从图表事件中调用它，例如：

```
mouseOver: function() {
    animateSlice(this);
},
mouseOut: function() {
    animateSlice(this);
} 
```

这是`animateSlice`功能：

```
function animateSlice(point) {
    point.slice();
} 
```

所以，这里是[**结果**](http://jsfiddle.net/cH7NV/)。

# streaming - 使用 gstreamer 通过 RTP 流式传输视频

> ID：13871933
> 
> 赞同：0
> 
> 时间：2012-12-14T02:46:36.223
> 
> 标签：streaming, video-streaming, gstreamer, rtp, python-gstreamer

我正在尝试使用 gstreamer 通过 RTP 将视频文件从一台设备流式传输到另一台设备。在发件人端，我使用以下命令：

gst-launch filesrc 位置=/home/kuber/Desktop/MELT.MPG ！mpeg解析！rtpsend ip=localhost

但这给出了以下错误：没有元素“rtpsend”，我下载了所有的 rtp 工具，但仍然是同样的错误。我是否以某种错误的方式使用 rtpsend？也有人可以给我从一台设备到另一台设备流式传输视频文件（本地存储在我的笔记本电脑中，而不是 testvideosrc 文件）的命令行代码吗？**强文本**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T21:53:05.533

假设这是您要发送的 MPEG1/2 基本流（因为您使用的是 mpegparse）您需要在 mpegparse 之后使用 rtpmpvpay，然后将输出提供给 udpsink。

```
mpegparse ! rtpmpvpay ! udpsink host="hostipaddr" port="someport" 
```

我不知道有任何 rtpsend 插件。以上适用于 rtp 上的任何流式传输。

做 gst-inspect | grep rtp 查看所有的payloaders，depayers

如果它是 mpegps 流，您需要在管道的其余部分之前先执行 mpegpsdemux。

编辑：

为什么不删除 mpegparse？不明白你为什么需要它。您应该学习在组件的 gst-inspect 中查看源和接收器要求，这将告诉您节点之间所需的兼容性。接收将是反向 udpsrc port="portno" ！capsfilter caps="application/x-rtp, pt=32, ..在此处输入 caps" ！rtpmpvdepay！

# .htaccess - 子域中的 htaccess

> ID：13871936
> 
> 赞同：0
> 
> 时间：2012-12-14T02:47:16.953
> 
> 标签：.htaccess

再次面临子域的 htaccess 问题。

子域的 url 是[http://m.domain.co.uk](http://m.domain.co.uk)，它从[http://www.domain.co.uk/m重定向](http://www.domain.co.uk/m)

现在主站点的索引文件位于 `/m/webstores/ecommerce/`.

在该索引文件中，产品的链接是`shopping-cart/293/test`其中 293 是产品 ID 和 test 是产品名称。

现在htaccess代码是：

```
RewriteEngine on
RewriteBase /
RewriteCond %{HTTP_HOST}%{REQUEST_URI}   ^(www\.)?domain.co.uk/webstores/ecommerce/(.*)
RewriteRule  (.*)  http://m.domain.co.uk/%1  [R=301,L]
RewriteRule ^(\d+)/([^/]+)/?$ /shopping-cart/index.php?uiid=$1&title=$2 [L] 
```

htaccess 文件位于 `/m/webstores/ecommerce/`.

上面的代码正确地检测了子域，即`http://m.domain.co.uk/webstores/ecommerce/`但不是产品 url。

请建议我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:28:52.797

`RewriteRule (.*) http://m.domain.co.uk/%1 [R=301,L]`

应该

`RewriteRule (.*) http://m.domain.co.uk/$1 [R=301,L]`

$1 不是 %1 - 您将重定向到`http://m.domain.co.uk/www.`

# java - onClick 事件不会触发

> ID：13871941
> 
> 赞同：0
> 
> 时间：2012-12-14T02:47:57.203
> 
> 标签：java, android

我正在构建一个篮球比分时钟应用程序。我让主计时器运行良好。当我点击它时，它会启动时钟，当我再次点击它时，它会停止时钟。这很完美。

我已经实例化了第二个对象，它是用于拍摄时钟的。但是，`onClick`对于第二个文本视图，该事件根本没有触发。

这两个`onClick`事件都设置在 TextView 元素上。我不知道为什么`onClickShotClock(View view)`当我单击第二个文本视图时该方法没有触发。

我知道该对象已正确实例化，因为它正确设置了值，并且该值是通过代码设置来实例化它的。

谁能看到这不起作用？

```
package com.example.ultimatescoreclock;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.View;
import android.view.Window;
import android.view.WindowManager;
import android.widget.TextView;
import android.os.CountDownTimer;
import com.example.ultimatescoreclock.ScoreClock;

public class MainActivity extends Activity {

    TextView strMainClock, strShotClock;
    ScoreClock timerMainClock, timerShotClock; 
    long msSavedMainClock = 0;
    long msSavedShotClock = 0;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        strMainClock = (TextView) findViewById(R.id.clockMain);
        strShotClock = (TextView) findViewById(R.id.clockShot);

        timerMainClock = new ScoreClock( 13000, 100, strMainClock );
        timerShotClock = new ScoreClock( 8000, 100, strShotClock );

        strMainClock.setText( timerMainClock.getTimeLeft() );
        strShotClock.setText( timerShotClock.getTimeLeft() );
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    public void onMainClockClick(View view) {

        if ( !timerMainClock.isRunning ) {

            if ( msSavedMainClock != 0 )
                timerMainClock = new ScoreClock( msSavedMainClock, 100, strMainClock );

            timerMainClock.start();
            timerMainClock.isRunning = !timerMainClock.isRunning;
        } else {
            timerMainClock.cancel();
            msSavedMainClock = timerMainClock.msRemaining;
            timerMainClock.isRunning = !timerMainClock.isRunning;
        }       
    }

    public void onShotClockClick(View view) {

        strShotClock.setText("go!");
        /*
        if ( !timerShotClock.isRunning ) { 

            if ( msSavedShotClock != 0 )
                timerShotClock = new ScoreClock( msSavedShotClock, 100, strShotClock );

            timerShotClock.start();
            timerShotClock.isRunning = !timerShotClock.isRunning;
        } else {
            timerShotClock.cancel();
            msSavedShotClock = timerShotClock.msRemaining;
            timerShotClock.isRunning = !timerShotClock.isRunning;
        }
        */      
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T14:30:55.170

根据[TextView onClick() not working](https://stackoverflow.com/questions/9079170/textview-onclick-not-working)，您需要设置

> 安卓：可点击=“真”

到 TextViews，因为默认情况下它们不可点击。

您还可以像这样以编程方式附加 OnClickListener：

```
strShotClick.setOnClickListener(new View.OnClickListener() {
    @Override
    public void onClick(View v) {
        onShotClockClick(v);            
    }
}); 
```

# jquery - 基于邻近度的大规模分配链接属性

> ID：13871946
> 
> 赞同：2
> 
> 时间：2012-12-14T02:48:49.473
> 
> 标签：jquery, dom

我有一小段代码，它很有效：

```
var r_link = $(".link_article a");
var j_link = $(r_link).closest(".row").find(".read-more a");
var attributes = r_link.prop("attributes");
$.each(attributes, function() {
  j_link.attr(this.name, this.value);
}); 
```

一切都很好，除了它没有根据接近度获取链接的属性，最终结果是`j_link`页面上的所有 s 都具有相同的链接，而不是它们应该具有的不同链接。我无法访问`j_links`给他们 ID。

有什么想法吗？干杯!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T02:51:51.243

你需要循环`r_link`

尝试这个

```
var r_link = $(".link_article a");

r_link.each(function(){
    var $this = $(this);
    var j_link = $this.closest(".row").find(".read-more a");
    j_link.attr('href', this.href);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T02:52:59.473

```
$.each(...
   j_link.eq(i).attr(...) 
```

[文档`.eq`](http://api.jquery.com/eq/)

# java - 文本字段中数字的数组列表

> ID：13871947
> 
> 赞同：-5
> 
> 时间：2012-12-14T02:49:02.557
> 
> 标签：java, swing, nullpointerexception

这就是我在尝试执行我的程序时遇到的错误。老实说，我真的不知道从哪里开始我的代码。我有一个新旧按钮名称。我希望 textfieldMemberID 显示 yearToday 和加入该组织的成员数组。例如，如果我单击新建，textfieldMemberId 值将自动显示“2012-000001”，如果 ic 再次舔新，则它将显示“2012-000002”。' 我有一个会员等级：

```
 import java.text.DecimalFormat;
     import java.text.NumberFormat;
     import java.util.ArrayList;
     import java.util.Calendar;
     import java.util.Date;

      public class Member {
      private ArrayList accounts;
      private String MemberId;
      private String VotersId;
private String FirstName;
private String MiddleName;
private String LastName;
private String LotNo;
private String Street;
private String Barangay;
private String City;
private String Region;
private int Age;
private String Gender;
private Date Birthday;
private String ContactNo;
private String EmailAddress;
private int size=0;
private int yearToday = Calendar.getInstance().get(Calendar.YEAR);

public Member(String MemberId) {
   NumberFormat formatter = new DecimalFormat("000000");
    size= this.accounts.size()+1;
    this.setMemberId(""+yearToday + "-" + (formatter.format(size)));  
} //im trying to have the solution here

public Member(String MemberId,String FirstName,String MiddleName,String LastName){
    this.setMemberId(MemberId);
    this.setFirstName(FirstName);
    this.setMiddleName(MiddleName);
    this.setLastName(LastName);
}

public int getAge() {
    return Age;
}

public void setAge(int Age) {
    this.Age = Age;
}

public String getBarangay() {
    return Barangay;
}

public void setBarangay(String Barangay) {
    this.Barangay = Barangay;
}

public Date getBirthday() {
    return Birthday;
}

public void setBirthday(Date Birthday) {
    this.Birthday = Birthday;
}

public String getCity() {
    return City;
}

public void setCity(String City) {
    this.City = City;
}

public String getContactNo() {
    return ContactNo;
}

public void setContactNo(String ContactNo) {
    this.ContactNo = ContactNo;
}

public String getEmailAddress() {
    return EmailAddress;
}

public void setEmailAddress(String EmailAddress) {
    this.EmailAddress = EmailAddress;
}

public String getFirstName() {
    return FirstName;
}

public void setFirstName(String FirstName) {
    this.FirstName = FirstName;
}

public String getGender() {
    return Gender;
}

public void setGender(String Gender) {
    this.Gender = Gender;
}

public String getLastName() {
    return LastName;
}

public void setLastName(String LastName) {
    this.LastName = LastName;
}

public String getLotNo() {
    return LotNo;
}

public void setLotNo(String LotNo) {
    this.LotNo = LotNo;
}

public String getMemberId() {
    return MemberId;
}

public void setMemberId(String MemberId) {
    this.MemberId = MemberId;
}

public String getMiddleName() {
    return MiddleName;
}

public void setMiddleName(String MiddleName) {
    this.MiddleName = MiddleName;
}

public String getRegion() {
    return Region;
}

public void setRegion(String Region) {
    this.Region = Region;
}

public String getStreet() {
    return Street;
}

public void setStreet(String Street) {
    this.Street = Street;
}

public String getVotersId() {
    return VotersId;
}

public void setVotersId(String VotersId) {
    this.VotersId = VotersId;
}

public ArrayList getAccounts() {
    return accounts;
}

public void setAccounts(ArrayList accounts) {
    this.accounts = accounts;
}

@Override
public boolean equals(Object obj) {
    if (obj == null) {
        return false;
    }
    if (getClass() != obj.getClass()) {
        return false;
    }
    final Member other = (Member) obj;
    if ((this.MemberId == null) ? (other.MemberId != null) : !this.MemberId.equals(other.MemberId)) {
        return false;
    }
    return true;
}

@Override
public int hashCode() {
    int hash = 5;
    hash = 89 * hash + (this.MemberId != null ? this.MemberId.hashCode() : 0);
    return hash;
}

@Override
public String toString() {
    return "Member{" + "MemberId=" + MemberId + ", VotersId=" + VotersId + ", FirstName=" + FirstName + ", MiddleName=" + MiddleName + ", LastName=" + LastName + ", LotNo=" + LotNo + ", Street=" + Street + ", Barangay=" + Barangay + ", City=" + City + ", Region=" + Region + ", Age=" + Age + ", Gender=" + Gender + ", Birthday=" + Birthday + ", ContactNo=" + ContactNo + ", EmailAddress=" + EmailAddress + '}';
}
} 
```

我试图通过按钮“新建”中的此代码调用 getmemberId

```
String last="";
last = member.getMemberId();
this.txtMembersID.setText((last)); 
```

但我得到了这个错误。 **线程“AWT-EventQueue-0”中的异常 java.lang.NullPointerException** 请帮助。感谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T02:53:54.037

问题出现在您的第一个构造函数的这一行：

```
size= this.accounts.size()+1; 
```

因为`accounts`还没有初始化。

在它之前添加这一行：

```
accounts = new ArrayList(); 
```

应该解决你的问题。

* * *

此外，为了将来参考，您可以在此处提供的最有用的信息之一是导致异常的行号 - 使事情更容易解决！

# php - 如果值有逗号，如何使用 FIND_IN_SET？

> ID：13871959
> 
> 赞同：0
> 
> 时间：2012-12-14T02:51:18.120
> 
> 标签：php, mysql, sql, select, sql-order-by

我想使用函数 FIND_IN_SET 来“ORDER BY”查询mysql结果，问题是这些值里面有COMMAS，如下所示：

```
valu,e1
value,2
va,lue3
val,ue4 
```

现在，当我进行查询时，我会这样做：

```
SELECT * FROM table ORDER BY FIND_IN_SET( column, 'valu,e1,value,2,va,lue3,val,ue4' ); 
```

如您所见，“，”用于分隔值，但值中有“，在其中...

我尝试了一些没有成功的解决方案，例如：

```
SELECT * FROM table ORDER BY FIND_IN_SET( column, 'valu\,e1,value\,2,va\,lue3,val\,ue4' ); 
```

或者

```
SELECT * FROM table ORDER BY FIND_IN_SET( column, '\'valu,e1\',\'value,2\',\'va,lue3\',\'val,ue4\'' ); 
```

但是，这一切都很好！

你知道这个的正确解决方案是什么吗？？？谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:58:32.847

我相信这个功能是正确的答案/方式：

```
SELECT * 
FROM table 
ORDER BY FIELD( 
   column, 'valu,e1', 'value,2', 'va,lue3', 'val,ue4' 
); 
```

# mysql - 无法使用mac osx中的终端连接到mysql

> ID：13871960
> 
> 赞同：2
> 
> 时间：2012-12-14T02:51:18.933
> 
> 标签：mysql, macos, terminal, phpmyadmin

我在 iMac 上安装了 zend 服务器。我可以登录到zend服务器，我可以登录到phpmyadmin，使用用户：root pw：（空白）

然而。我拼命尝试使用终端打开mysql。我现在已经尝试了 3 小时，并且使用了各种途径和 sudo-whatnot..

这我得到什么时候：

> Williams-iMac:mysql 丑脸$ cd /usr/local/zend/mysql/bin
> 
> Williams-iMac:bin 丑脸$ ls

innochecksum mysql_config mysqlaccess.conf mysqlhotcopy msql2mysql mysql_convert_table_format mysqladmin mysqlimport my_print_defaults mysql_find_rows mysqladmin.client mysqlmanager myisam_ftdump mysql_fix_extensions mysqlbinlog mysqlshow myisamchk mysql_fix_privilege_tables mysqlbug mysqlslap myisamlog mysql_secure_installation mysqlcheck mysqltest myisampack mysql_setpermission mysqld mysqltest_embedded mysql mysql_tzinfo_to_sql mysqld-debug perror mysql.client mysql_upgrade mysqld_multi replace mysql.服务器 mysql_waitpid mysqld_safe resolve_stack_dump mysql_client_test mysql_zap mysqldump resolveip mysql_client_test_embedded mysqlaccess mysqldumpslow setup_mysql.sh

所以在这里我可以se mysql，但我已经能够用它做任何事情。我很抱歉显示我得到的输出的方式。我试图让它以不同的方式显示，但没有成功，如你所见......

有谁知道我可以做什么，以便我可以登录到我的mysql？

/W

编辑：/usr/local/bin 中没有 mysql...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:55:47.910

如果 mysql 正在运行（您使用 zend 服务器控制器启动它），您应该能够：

```
 /usr/local/zend/mysql/bin/mysql -uroot -p <your dbname> 
```

您可以通过一个简单的方式验证 mysqld 是否正在运行

```
 ps -ef | grep mysqld 
```

如果它正在运行，您将在生成的进程列表中看到的不仅仅是 grep 命令。

# windows-phone-7 - WP7如何加速动画

> ID：13871964
> 
> 赞同：0
> 
> 时间：2012-12-14T02:51:59.323
> 
> 标签：windows-phone-7, animation, storyboard, panel

我正在使用`Storyboard`with`DoubleAnimation`将 a 的 Y`StackPanel`从上到下翻译。

它工作正常。但我想要的是在它即将触底时**加速它（如Android的状态面板）。**

[我在这里](http://msdn.microsoft.com/en-us/library/ms746613.aspx)阅读了本教程，但它似乎仅适用于 Silverlight。

怎么做 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T03:21:42.727

您正在寻找的是一个缓和类。

轻松课程会随着时间的推移而改变速度。因此，动画将开始缓慢并快速或相反等等。

这是关于`ExponentionalEasing`. 它非常简单 [http://msdn.microsoft.com/en-us/library/system.windows.media.animation.exponentialease(v=vs.95).aspx](http://msdn.microsoft.com/en-us/library/system.windows.media.animation.exponentialease(v=vs.95).aspx)

但是，如果您想进行更多微调，则必须使用 KeyFrames 并设置它们之间的时间差

# ios - iPad presentViewController 总是全屏（需要 formSheet）iOS6

> ID：13871968
> 
> 赞同：7
> 
> 时间：2012-12-14T02:52:23.757
> 
> 标签：ios, xcode, ipad, storyboard, presentmodalviewcontroller

`formSheet`当用户在我的通用应用程序的 iPad 侧的导航栏中点击“设置”按钮时，我需要呈现一个 viewController 。该视图称为“SettingsViewController”，它是我的 iPad Storyboard 中的一个视图控制器，其 ID 为“settings”。

我没有使用 segues，因为在我的 iPad 版本的应用程序中，左侧导航栏中有多个按钮，因此我必须以编程方式添加按钮。（无法将 segue 连接到情节提要中不存在的 UIBarButtonItem。）

我想要的功能在那里，演示文稿不在那里。当我`SettingsViewController`在 iPad 上展示我的 , 时，它呈现为全屏视图。我需要它是一个表格。

我将它包装在一个`NavigationController`中，我需要它并且工作正常，只需要它以正确的方式呈现自己。

这是呈现视图的代码：

```
-(void)showSettings:(id)sender {

    SettingsViewController *svc = [self.storyboard instantiateViewControllerWithIdentifier:@"settings"];
    svc.delegate = self;
    svc.modalPresentationStyle = UIModalPresentationFormSheet;
    UINavigationController *navcont = [[UINavigationController alloc] initWithRootViewController:svc];
    [self presentViewController:navcont animated:YES completion:NULL];

} 
```

我已经尝试了我能想到的一切。任何帮助都深表感谢。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-14T03:02:40.323

看起来你设置了模态演示样式，`SettingsViewController`但你应该在你的`UINavigationController`.

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-12-22T08:22:53.207

```
navcont.modalPresentationStyle = UIModalPresentationFormSheet; 
```

# ios - 将 NNString 标签名称从 MasterView 传递到 DetailView 时遇到问题

> ID：13871971
> 
> 赞同：1
> 
> 时间：2012-12-14T02:53:05.330
> 
> 标签：ios, xcode, master-detail

我正在尝试制作一个在主视图上显示声音列表的 Master-Detail 应用程序。当您点击声音时，您会转到详细信息屏幕，它会显示您选择的声音作为标签，然后显示声音的短片。我的问题是，所有声音都显示为列表中第一个声音的名称的标签。当我点击声音 B 时，详细屏幕显示“声音 B”。当我点击 tSound F 时，详细屏幕显示“Sound B”。

没有错误或警告出现。有任何想法吗？

提前致谢。

slfViewController.h

```
#import <UIKit/UIKit.h>

@interface slfViewController : UIViewController <UITableViewDelegate, UITableViewDataSource>

@property (nonatomic, strong) IBOutlet UITableView *tableView;

@end 
```

slfViewController.m

```
#import "slfViewController.h"
#import "slfSoundDetailViewController.h"

@interface slfViewController ()

@end

@implementation slfViewController 
{
    NSArray *tableData;
    NSArray *thumbnails;
}

@synthesize tableView = _tableView;

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    tableData = [NSArray arrayWithObjects:
             @"B Sound", 
             @"Ch Sound", 
             @"D Sound", 
             @"F Sound", 
                ...
             @"Zh Sound",
             nil];

thumbnails = [NSArray arrayWithObjects:
              @"b.jpg", 
              @"ch.jpg", 
              @"d.jpg", 
              @"f.jpg", 
                ...
              @"zh.jpg",
              nil];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"showSoundDetail"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        slfSoundDetailViewController *destViewController = segue.destinationViewController;
        destViewController.soundName = [tableData objectAtIndex:indexPath.row];
    }
}

#pragma mark - TableView Data Source methods

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [tableData count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *simpleTableIdentifier = @"soundCell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:simpleTableIdentifier];
    }

    cell.textLabel.text = [tableData objectAtIndex:indexPath.row];
    cell.imageView.image = [UIImage imageNamed:[thumbnails objectAtIndex:indexPath.row]];

    return cell;
}

@end 
```

slfSoundDetailViewController.h

```
#import <UIKit/UIKit.h>

@interface slfSoundDetailViewController : UIViewController

@property (nonatomic, strong) IBOutlet UILabel *soundLabel;
@property (nonatomic, strong) NSString *soundName;

@end 
```

slfSoundDetailViewController.m

```
#import "slfSoundDetailViewController.h"

@interface slfSoundDetailViewController ()

@end

@implementation slfSoundDetailViewController

@synthesize soundLabel;
@synthesize soundName;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    soundLabel.text = soundName;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:58:23.690

您只是设置...所以它只被调用一次（当视图控制器的视图第一次加载时）`soundLabel.text = soundName`。`viewDidLoad`这个应用程序很可能重用相同的实例，`slfSoundDetailViewController`因此它不会重新加载其视图。

您可能想要覆盖其中一个`-[slfSoundDetailViewController setSoundName:]`或`-[slfSoundDetailViewController viewWillAppea:]`并在`soundLabel.text`那里设置。

# php - PHP 中的空数组 -> JSON -> JS = Javascript 中的空数组。如何取而代之的是空对象？

> ID：13871973
> 
> 赞同：1
> 
> 时间：2012-12-14T02:53:11.417
> 
> 标签：php, associative-array, json

因此，这是将我的 JSON 响应构建回我的 JS 的基础。

```
$this->_response['vendor'] = array();

foreach ($_results as $_row) {
    $this->_response['vendor'][$_row['id']] = $_row;
}

echo(json_encode($this->_response)); 
```

这很好，并且可以很好地在 javascript 中构建对象，除非没有结果。在这种情况下，php 将其视为一个空数值数组，而不是关联数组。然后这归结为 javascript 并转换为空数组而不是空对象。

我知道我可以通过检查事物、将变量预先声明为 javascript 中的对象等以多种方式解决此问题。我想知道是否有一种方法可以在 php 中声明一个空的关联数组，或者其他方式强制 json_encode 创建一个对象（“{}”）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-17T01:54:36.207

这是 PHP 的一个已知限制——因为它本身不支持 JavaScript 类型（例如对象），解码然后再次编码可能会导致数据丢失。

我使用这样的解决方法来保持 JSON 的完整性：

```
/**
 * @param $input
 * @return array
 */
public static function safeDecode($input) {
    // Fix for PHP's issue with empty objects
    $input = preg_replace('/{\s*}/', "{\"EMPTY_OBJECT\":true}", $input);

    return json_decode($input, true);
}

/**
 * @param array|object $input
 * @return string
 */
public static function safeEncode($input) {
    return preg_replace('/{"EMPTY_OBJECT"\s*:\s*true}/', '{}', json_encode($input));
} 
```

这并不理想，但它有效。请注意，您可以：

*   json_decode() 到对象，这是默认方式。然后空对象不会丢失，但大多数现代框架都需要数组，因为大多数集合操作工具都使用数组。因此，在大多数情况下，这不是一个可行的选择；
*   您可以强制 json_encode() 将空数组编码为对象，但随后您将丢失空数组 - 也不是一个好的选择。

因此，像我上面显示的解决方法可能是目前唯一的选择。简而言之，您必须扩展 PHP 的 json_encode() 和 json_decode()。不幸的是，PHP 不允许内置函数重载，因此您必须定义具有不同名称的函数。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-14T03:05:45.167

我想这里最合理的答案是，首先提供一个空数组或对象可能没有意义。然后简单检查 javascript 中的存在性就可以解决问题。

```
if (count($_results)) {

    $this->_response['vendor'] = array();

    foreach ($_results as $_row) {
        $this->_response['vendor'][$_row['id']] = $_row;
    }
}
echo(json_encode($this->_response)); 
```

# javascript - 是否有条件“不等于a且不等于b”之类的JS简写？

> ID：13871975
> 
> 赞同：6
> 
> 时间：2012-12-14T02:53:22.017
> 
> 标签：javascript, syntax, comparator, conditional-statements, shorthand-if

我只是想知道是否有这样的 JS 速记：

> `if (x != 1 && x != 2) do stuff;`

这样的野兽存在吗？相反，我想说这样的话：

> `if (x != 1:2) do stuff;`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-14T03:05:08.087

不，没有这样的速记。

如果您不想重复变量，可以使用开关：

```
switch (x) {
  case 1:
  case 2: break;
  default: do stuff;
} 
```

另一种选择是在数组中查找值：

```
if ([1, 2].indexOf(x) == -1) do stuff; 
```

但是，`Array.indexOf`并非所有浏览器都存在 ，因此您可能需要一个备用方案，例如可以在 Mozilla[`Array.indexOf`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/indexOf)文档页面上找到它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T03:02:53.807

不，那不存在，那很好！只有在不太精确的自然语言中才会存在这样的事情，这会导致混乱。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T03:21:21.730

我能想到的方法有两种。

**情况1：**

```
if ([1, 2].indexOf(x) < 0) // do stuff 
```

**案例二：**

我不推荐这种方式：

```
if (!(x in {1:0, 2:0})) // do stuff 
```

逐步：

1.  我们创建一个对象，其中的数字作为键进行比较：`{1:0, 2:0}`
2.  我们使用`in`运算符来检查值是否`x`是对象的键。
3.  我们使用否定结果布尔值，`!`因为我们想检查不等式。

我建议您改用[CoffeeScript 。](http://coffeescript.org/ "咖啡脚本")它具有[链式比较](http://coffeescript.org/#comparisons "咖啡脚本")，允许您执行以下操作：

```
if (1 <= x <= 2) // do stuff 
```

它与您的情况不同，但您可能会觉得它很有趣。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-14T03:23:56.930

```
var a = 4;
if ([1,2,3,5,7,8,9,0,10,15,100].indexOf(a) == -1) console.log(a); 
```

将 4 记录到控制台，因为列表中不存在 4。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-14T05:54:46.587

x!=1 && x!=2**是**浏览器的简写——如果第一部分为假，它会立即退出。没有任何代码可以包装它来评估这两个表达式几乎一样有效。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-14T03:20:40.917

编写自己的函数向给定对象添加方法不会有任何问题。有多种方法可以做到这一点，通过扩展原型或使用命名空间。示例语法可能是：

```
if (!x.equals('1||2')) { /* do your stuff */ }
// the custom method '.equals' would extend a STRING, and return true or false 
```

另一个例子：

```
if (π.is(x,['1||2'])) { /* do your stuff */ }
// custom object "π" has a method "is" which checks whether x is 1 or 2, and returns true or false 
```

有很多方法可以做到这一点。有些人不赞成有很好的理由（例如，扩展核心对象原型并不总是理想的，因为它可能会影响其他库并吓坏人们），当然总是存在过度设计的风险。小心行事。

小注：我故意放置逻辑运算符'||'，因为底层函数可能是灵活的并采用其他运算符，例如'&&'或'！' 等等

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-26T11:35:16.983

您现在可以使用`.includes`：

```
![1, 2].includes(x); 
```

# php - 无论如何通过外部方式动态更改 php 变量？

> ID：13871978
> 
> 赞同：1
> 
> 时间：2012-12-14T02:53:57.740
> 
> 标签：php, workflow

有时，我必须根据变量的内容测试不同的布局。

我更愿意即时更改此变量的内容，理想情况下是通过控制台之类的外部手段或其他方式，这样我就不必将测试脚本注入到我的基本代码中。
然后我可以做类似的事情，`set myVar layout=2`在我验证布局 1 没问题并刷新页面之后。

这可能吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T03:04:18.060

您想要使用 Xdebug 之类的调试器运行脚本的强大功能。有了它，您可以使用它的功能在脚本运行期间更改变量。

在快速谷歌之后，有很多关于 Xdebug 的教程，例如，请参阅此链接以简要说明 xdebug 是什么以及它可以做什么：http: [//jtreminio.com/2012/07/xdebug-and-you-为什么你应该使用真正的调试器/](http://jtreminio.com/2012/07/xdebug-and-you-why-you-should-be-using-a-real-debugger/)

# google-api - 无法刷新访问令牌：响应为“unauthorized_client”

> ID：13871982
> 
> 赞同：26
> 
> 时间：2012-12-14T02:54:15.323
> 
> 标签：google-api, oauth-2.0, google-api-java-client

尝试刷新访问令牌时出现错误：

> 400 错误请求
> 
> {错误：“unauthorized_client”}

从 Google 令牌 URI：

```
{
  "error" : "invalid_request"
} 
```

[我在这里](https://stackoverflow.com/questions/12792326/how-do-i-refresh-my-google-oauth2-access-token-using-my-refresh-token)阅读了这个答案和谷歌官方文档（描述了`POST`请求的外观），我没有看到任何区别。

我捕获了我的`POST`请求（已删除秘密）：

```
POST /SHOWMERAWPOST HTTP/1.1
User-Agent: Google-HTTP-Java-Client/1.10.3-beta (gzip)
Pragma: no-cache
Host: requestb.in
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Content-Length: 175
Connection: keep-alive
Cache-Control: no-cache
Accept-Encoding: gzip
Accept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2

grant_type=refresh_token&refresh_token=******&client_id=*******.apps.googleusercontent.com&client_secret=****** 
```

发送请求的 Java 代码：

```
RefreshTokenRequest req = new RefreshTokenRequest(new NetHttpTransport(), new JacksonFactory(), new GenericUrl(
                    getSecrets().getDetails().getTokenUri()), REFRESH_TOKEN);

           req.set("client_id", getSecrets().getDetails().getClientId());
           req.set("client_secret", getSecrets().getDetails().getClientSecret());

           TokenResponse response = req.execute(); 
```

*有什么不对的吗？*

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2017-01-09T20:55:43.817

**问题说明**

在@MartinV 给出的提示下，我终于能够修复它！因为他的回答并没有很好地解释如何解决它，所以我将其发布在这里。

问题是因为我们都使用[Google 的 OAuth Playground](https://developers.google.com/oauthplayground/)生成了 Refresh Token ，但是当您在第一步中单击“Authorize APIs”时，它会将您带到使用 Playground 应用程序的集中屏幕。之后，您创建的所有令牌只能由 Playground 应用程序使用，但您当然不知道该应用程序的客户端 ID 或客户端密码。

**解决方案**

解决方案是让 Playground 使用您自己的 Client ID 和 Secret。为此，请单击“设置”按钮：

[![游乐场设置](../Images/7b16e604b0e0ff00a1b68edadcf22ace.png)](https://i.stack.imgur.com/my5Xv.png)

并输入您的客户 ID 和密码。但是，在您这样做之前，正如它所说的那样，您需要转到[Developer's Console](https://console.developers.google.com/apis/credentials)，找到您的*OAuth 2.0 客户端 ID*客户端，对其进行编辑并在*Authorized redirect URIs*下添加*[https://developers.google.com/oauthplayground](https://developers.google.com/oauthplayground)*。添加并保存更改后，返回 Playground 并尝试授权 API。就我而言，*授权重定向 URI*的更改需要 15 分钟才能生效。

 **完成后，不要忘记从开发者控制台中删除 Playground URI！

**额外的**

一旦我这样做了，在 Python 中我就这样做了，它起作用了：

```
access_token = None 
client_id = 'xxxxxxxx.apps.googleusercontent.com'
client_secret = 'xxxxxxxxxxxx'
refresh_token = 'xxxxxxxxxxxx'
token_expiry = None
token_uri = "https://accounts.google.com/o/oauth2/token"
user_agent = 'YourAgent/1.0'

credentials = client.GoogleCredentials(access_token, client_id, client_secret, refresh_token, token_expiry, token_uri, user_agent)

http = credentials.authorize(httplib2.Http())
credentials.refresh(http)

service = build('drive', 'v3', http=http)
req = service.files().list()
resp = req.execute(http=http) 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-12-18T19:08:48.417

我在 OAuth2 Playground 中创建了访问和刷新令牌，然后将它们复制到我的应用程序中。不允许有不同的客户端进行自动化和令牌刷新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-10T21:00:12.553

另一种使用 REST API 获取`access_token`然后使用它与 REST API 交互的解决方案（例如，将视频添加到私有播放列表）在[如上所述](https://stackoverflow.com/a/41556775/3774227)`refresh_token`创建之后。

```
import requests
import json

# according to  https://stackoverflow.com/a/41556775/3774227
client_id = '<client_id>'
client_secret = '<client_secret>'
refresh_token = '<refresh_token>'

playlist_id = '<playlist>'
video_id = 'M7FIvfx5J10'

def get_access_token(client_id, client_secret, refresh_token):

    url = 'https://www.googleapis.com/oauth2/v4/token'

    data = {
        'client_id': client_id,
        'client_secret': client_secret,
        'refresh_token': refresh_token,
        'grant_type': 'refresh_token'
    }

    response = requests.post(
        url=url,
        data=data,
    )

    return response.json().get('access_token')

def add_video_to_playlist(playlist_id, video_id, access_token):

    url = 'https://www.googleapis.com/youtube/v3/playlistItems'

    params = {
        'part': 'snippet',
    }

    headers = {
        'Content-Type': 'application/json',
        'Authorization': 'Bearer {}'.format(access_token)
    }

    data = {
        'snippet': {
            'playlistId': playlist_id,
            'resourceId': {
                'kind': 'youtube#video',
                'videoId': video_id
            },
        }
    }

    requests.post(
        url=url,
        params=params,
        headers=headers,
        data=json.dumps(data)
    )

if __name__ == '__main__':
    access_token = get_access_token(client_id, client_secret, refresh_token)
    add_video_to_playlist(playlist_id, video_id, access_token) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-24T18:39:02.237

我有同样的问题。解决方案是在应用程序中授权和更新服务器上的令牌时使用相同的客户端。

[无法在服务器端刷新 Google Calendar API 的访问令牌](https://stackoverflow.com/questions/52928598/cant-refresh-access-token-for-google-calendar-api-on-server-side/52945725)**

# regex - 正则表达式匹配日期

> ID：13871983
> 
> 赞同：2
> 
> 时间：2012-12-14T02:54:33.030
> 
> 标签：regex

如何使用正则表达式从字符串中提取日期，如下所示？

CCBS_Call_History_.20-NOV-12.txt_RO.gz

例外输出：20-NOV-12

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T02:56:01.267

```
/\d+\-[A-Z]+\-\d+/ 
```

会为你解决问题的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T03:07:53.543

像这样的东西会起作用。

```
\d{1,2}\-[A-Z]{3}\-\d{1,2} 
```

这是一个解释。

```
\d{1,2} - One to two digits
\-      - Followed by a dash
[A-Z]{3}- Followed by 3 uppercase characters(JAN, FEB, NOV, DEC)
\-      - Followed by a dash
\d{1,2} - Followed by one to two digits 
```

您可以对其进行调整以包括小写字符、4 位数年份或您的任何其他需求。

# c# - 字符串拆分和数组

> ID：13871992
> 
> 赞同：1
> 
> 时间：2012-12-14T02:55:55.653
> 
> 标签：c#

在这个存储高分的程序中，我希望用户在一行中输入球员的姓名和高分，例如“eric 87”。在用户输入最后一名球员的姓名和分数后，它应该立即列出所有输入的分数。在拆分像“eric 97”这样的字符串时，我不知道该怎么做。非常感谢您的帮助！

```
const int MAX = 20;
static void Main()
{
    string[ ] player = new string[MAX];
    int index = 0;

    Console.WriteLine("High Scores ");
    Console.WriteLine("Enter each player's name followed by his or her high score.");
    Console.WriteLine("Press enter without input when finished.");

    do {
        Console.Write("Player name and score: ", index + 1);
        string playerScore = Console.ReadLine();
        if (playerScore == "")
            break;
        string[] splitStrings = playerScore.Split();
        string n = splitStrings[0];
        string m = splitStrings[1];

    } while (index < MAX);

    Console.WriteLine("The scores of the player are: ");
    Console.WriteLine("player \t Score \t");

  //  Console.WriteLine(name + " \t" + score);
    // scores would appear here like:
    // george 67
    // wendy 93
    // jared 14 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T03:00:42.067

查看您的代码，您没有使用播放器数组。但是，我建议采用更面向对象的方法。

```
public class PlayerScoreModel
{
    public int Score{get;set;}

    public string Name {get;set;}
} 
```

将玩家和分数存储在`List<PlayerScoreModel>`.

当最后一个用户和分数被输入时......只需遍历列表。

```
 do {
        Console.Write("Player name and score: ", index + 1);
        string playerScore = Console.ReadLine();
        if (playerScore == "")
            break;
        string[] splitStrings = playerScore.Split();
        PlayerScoreModel playerScoreModel = new PlayerScoreModel() ;

        playerScoreModel.Name = splitStrings[0];
        playerScoreModel.Score = int.Parse(splitStrings[1]);
        playerScoreModels.Add(playerScoreModel) ;

    } while (somecondition);

   foreach(var playerScoreModel in playerScoreModels)
   {
      Console.WriteLine(playerScoreModel.Name +" " playerScoreModel.Score) ;
    } 
```

根据需要提供错误检查。

# java - 在 Netbeans 中使用 CardLayout

> ID：13871996
> 
> 赞同：0
> 
> 时间：2012-12-14T02:56:26.810
> 
> 标签：java, swing, jframe, layout-manager, cardlayout

```
getContentPane().setLayout(new CardLayout());
CardLayout x = (CardLayout) getLayout(); 
```

我正在使用 Netbeans，在设计管理器中我选择了我的 JFrame 内容作为 CardLayout。但是到目前为止我还不能让它工作。我在 initComponenets 调用之后设置了上面的代码，但我仍然有这个错误：

```
java.awt.BorderLayout cannot be cast to java.awt.CardLayout 
```

不知何故，我有 BorderLayout 而不是 CardLayout。这怎么可能？我刚刚将布局设置为 CardLayout。PS：我的课程扩展了 javax.swing.JFrame。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T03:00:42.163

您可以使用：

```
CardLayout x = (CardLayout) getContentPane().getLayout(); 
```

与切换卡面板类似，您可以使用：

```
x.show(getContentPane(), "card2"); 
```

如果您只是使用单独的作为“卡片”容器，并且如果您希望添加导航按钮（例如在位置中），您可以获得使用的额外好处，这*不是问题。*`JPanel``JFrame` `BorderLayout``BorderLayout.SOUTH`

[使用 CardLayout 的必备读物](http://docs.oracle.com/javase/tutorial/uiswing/layout/card.html)

# android - 如何在 Android 中从 JSON url 解析图像？

> ID：13871997
> 
> 赞同：1
> 
> 时间：2012-12-14T02:56:30.450
> 
> 标签：android, json, android-imageview, android-image

![图片](../Images/693f88c2533aaab925d5f813aca135a8.png)

我正在解析来自 Wordpress 博客的内容。我不知道如何从`JSON`. 这是图片网址`"content":"<p><img class=\"aligncenter\" style=\"cursor: -moz-zoom-in;\" src=\"http:\/\/sphotos-h.ak.fbcdn.net\/hphotos-ak-ash4\/395050_10151219612828815_5123523_n.jpg\" alt=\"http:\/\/sphotos-h.ak.fbcdn.net\/hphotos-ak-ash4\/395050_10151219612828815_5123523_n.jpg\" width=\"390\" height=\"466\" \/><\/p>\n<p><span id=\"more-5267\"><\/span><\/p>\n<p>Some texts here...XXXXXYYYYYZZZZ"`

```
HttpClient client;
HttpGet get;
HttpResponse res;
HttpEntity ent;
Button b;
TextView tv1,tv2,tv3;
@TargetApi(Build.VERSION_CODES.GINGERBREAD)
@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Typeface tp=Typeface.createFromAsset(getAssets(), "AftaSansThin-Regular.otf");
    StrictMode.enableDefaults();
    b = (Button) findViewById(R.id.button1);
    tv1 = (TextView) findViewById(R.id.textView1);
    tv2 = (TextView) findViewById(R.id.textView2);
    tv3 = (TextView) findViewById(R.id.textView3);
    tv1.setTypeface(tp);
    tv2.setTypeface(tp);
    tv3.setTypeface(tp);
    client = new DefaultHttpClient();
    get = new HttpGet("http://example.com");
    b.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub
            try {
                res=client.execute(get);
            } catch (ClientProtocolException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            ent=res.getEntity();
            InputStream is = null;
            try {
                is=ent.getContent();
            } catch (IllegalStateException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            BufferedReader br = new BufferedReader(new InputStreamReader(is));
            StringBuffer sb = new StringBuffer();
            String line = null;
            do{
                try {
                    line = br.readLine();
                } catch (IOException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                sb.append(line);
            } while (line!=null);
            String str = sb.toString();

            try {
                JSONObject ob1 = new JSONObject(str);
                JSONObject ob2 = ob1.getJSONObject("post");
                String title = ob2.getString("title");
                String date = ob2.getString("date");
                String content = ob2.getString("content");

                tv1.setText(title);
                tv2.setText(date);
                Spanned marked_up = Html.fromHtml(content);
                tv3.setText(marked_up.toString(),BufferType.SPANNABLE);

            } catch (JSONException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }
    });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T04:32:36.073

**对于 HTML 数据：**

根据代码，我可以说您正在图像中获取 HTML 数据，因此您可以在 WebView 中加载此 HTML。

**图片网址：**

正如其他人建议的那样，您可以使用[Android 通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)或Fedor库或[任何库](https://stackoverflow.com/questions/541966/how-do-i-do-a-lazy-load-of-images-in-listview)[的图像延迟加载](https://github.com/thest1/LazyList)来加载图像，前提是您获取的是图像 URL 而不是 HTML 数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T03:04:14.523

首先，这不是一个有效的图像 URL - \"http://sphotos-h.ak.fbcdn.net/hphotos-ak-ash4/395050_10151219612828815_5123523_n.jpg\" 更接近你想要的但仍然有所有转义字符.

如果您可以让 JSON 数据包将 URL 作为字符串发送下来，效率会更高。如果未对其进行配置使其不会转义所有字符，则从返回的文本中删除 Url。

接下来，我要做的是在 AsyncTask 中启动 http 连接并获取输入流。使用 BitmapFactory.decodeStream(HttpInputStream) 将流转为位图，然后将位图返回给 UI 线程 onPostExecute。

如果您正在处理许多图像下载，您可能需要考虑使用开源库或编写 AsyncImageLoader

希望这可以帮助 ：）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-14T03:30:03.253

如果您已经获得图像 URL，则可以使用此库从主线程异步加载图像，我只是尝试一下，它非常易于使用并且工作正常，希望对您有所帮助：[https ://github.com/nostra13/Android-通用图像加载器](https://github.com/nostra13/Android-Universal-Image-Loader)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-14T03:15:33.490

很少有内容实际上是 JSON。此内容中的“键”被命名为“内容”，值是第一个冒号“：”之后的其余部分。其余部分是常规 HTML（需要使用正则表达式或其他 HTML 解析器提取）。

在 javascript 中，您能做的最好的事情是：

```
var text = JSON.parse(content)["content"]; // which gives you everything after the colon. 
```

但是你仍然需要一个正则表达式来提取所有的 href 标签：

这是命令行上的示例：

```
bash$ content="<p><img class=\"aligncenter\" style=\"cursor: -moz-zoom-in;\" src=\"http:\/\/sphotos-h.ak.fbcdn.net\/hphotos-ak-ash4\/395050_10151219612828815_5123523_n.jpg\" alt=\"http:\/\/sphotos-h.ak.fbcdn.net\/hphotos-ak-ash4\/395050_10151219612828815_5123523_n.jpg\" width=\"390\" height=\"466\" \/><\/p>\n<p><span id=\"more-5267\"><\/span><\/p>\n<p>Some texts here...XXXXXYYYYYZZZZ"

bash$ echo $content | grep -oE "(src|alt)=\"[^\"]+\.jpg\"" | sed "s/\(src=\|alt=\|\"\)//g" | sed "s/\\///g"
http:\\sphotos-h.ak.fbcdn.net\hphotos-ak-ash4\395050_10151219612828815_5123523_n.jpg
http:\\sphotos-h.ak.fbcdn.net\hphotos-ak-ash4\395050_10151219612828815_5123523_n.jpg 
```

您可以将该正则表达式翻译成您使用的任何语言。

# c++ - argv 不适用于 chdir

> ID：13871999
> 
> 赞同：0
> 
> 时间：2012-12-14T02:56:37.287
> 
> 标签：c++, argv, chdir

我正在尝试使用`chdir()`以下方式将当前工作目录更改为可执行文件的路径：

```
#include <iostream>
#include <string>
using namespace std;

int main(int argc,char *argv[]) {

    if(chdir(argv[0]) == 0) printf("In %s\n", argv[0]);
        else printf("Failed to change directory\n");
} 
```

输出是：

```
Failed to change directory 
```

为什么不`chdir`使用`argv[0]`？这个问题的其他解决方案也将被接受。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T02:59:15.953

您需要使用`splitpath`或类似*的*方法从`argv[0]`. 你不能`chdir`到一个文件。

[编辑] 对不起，我认为`splitpath`是 Windows 的事情......只要这样做：

```
char *dirsep = strrchr( argv[0], '/' );
if( dirsep != NULL ) *dirsep = 0; 
```

现在`argv[0]`已被修剪以删除可执行文件名称。

请注意，命令行可能根本不包含任何目录。

* * *

通过尝试这个，你有点打破了整个 Linux（我假设）范式......你不应该知道你的可执行文件存储在哪里。通常，您可以通过以下方式之一指定输出：

1.  在配置文件中（例如，可能保存在`/usr/local/etc`，或用户的主目录中，或在命令行中给出）；

2.  使用命令行选项；

3.  写入标准输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T07:28:36.563

因为 argv[0] 有当前脚本的路径，包括当前脚本。因此，您需要修剪最后一个路径分隔符（“/”、“：”或“\”，具体取决于您的平台）之后的所有内容，并将结果传递*给*chdir。