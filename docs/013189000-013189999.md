# StackOverflow 问答 13189000-13189999

# javascript - 从外部访问使用 jQuery onready 定义的对象字面量

> ID：13189001
> 
> 赞同：0
> 
> 时间：2012-11-02T03:44:16.810
> 
> 标签：javascript, jquery

我采用了一个定义了多个对象文字的项目——主要用于构建代码。顺便说一句，不是全职前端开发人员。问题是它们中的一些是用 jQuery onready 事件定义的，而一些在外部。至少可以说，这似乎真的有问题。这会被认为是糟糕的设计吗？我假设是这样。我已经包含了一段代码，它显示了一些问题，特别是 obj2 中的 from_inside 函数：

```
<script>
$(document).ready(function(){
  alert('here i am' + obj2.handlers2.background2);  // can access the obj2 value as expected
  alert('make this up: ' + obj2.handlers2.tell_me2());
  var obj={};
  obj.handlers={
    background: 'blue',
    foreground: 'green'
  }
});

var obj2={};
obj2.handlers2={
  background2: 'here i am jt',
  foreground2: 'there you are',
  tell_me2: function(){
    return "these are things";
  }
  ,
  from_inside: function(){
    alert('color from inside jQuery: ' + obj.handlers.background); // problem here! could I get a reference to obj here?
  }
};

obj2.handlers2.from_inside();

</script> 
```

鉴于我们目前拥有它，什么是更可取的解决方法？看起来我可以在上面将 jQuery 对象的引用传递给 obj2，但即使可能，将所有对象拉到 jQuery 之外可能会更简单。

提前谢谢任何建议

**编辑#1**

```
$(document).ready(function(){
  $(document).on('click','#pairing-comment-submit', function(){
    arc.event_handler.submit_pairing_comment.call(this);
  });
  ... about 50 more of these
});

arc={};
arc.event_handler={
  submit_pairing_comment: function(){
     var id=$(this).data('the-id');
     ....
  },
  ....
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:48:35.953

您可以将变量赋值移到 ready 函数之外。这是一个快速重构：

```
var obj={};
obj.handlers={
  background: 'blue',
  foreground: 'green'
};

var obj2={};
obj2.handlers2={
  background2: 'here i am jt',
  foreground2: 'there you are',
  tell_me2: function(){
    return "these are things";
  },
  from_inside: function(){
    alert('color from inside jQuery: ' + obj.handlers.background); // problem here! could I get a reference to obj here?
  }
};

$(document).ready(function(){
  alert('here i am' + obj2.handlers2.background2);  // can access the obj2 value as expected
  alert('make this up: ' + obj2.handlers2.tell_me2());
  obj2.handlers2.from_inside();
}); 
```

工作示例：http: [//jsfiddle.net/JxS7v/](http://jsfiddle.net/JxS7v/)

您面临的问题是由于范围可变。一般来说，变量的范围仅限于它们所在的函数。看看这篇文章：http: [//javascriptplayground.com/blog/2012/04/javascript-variable-scope-this](http://javascriptplayground.com/blog/2012/04/javascript-variable-scope-this)

# facebook - 错误无法在 facebook 评论中显示所有评论

> ID：13189004
> 
> 赞同：-1
> 
> 时间：2012-11-02T03:44:45.083
> 
> 标签：facebook, facebook-comments

在[https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

我使用 URL 发表评论，`http://dongcam.vn/t2525`但是当我点击查看更多评论时，它无法显示所有评论，它只显示 1 条评论，如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T17:58:37.033

您是否启用了评论审核功能？

此外，如果评论看起来不像真正的评论，我认为 FB 可能会过滤它。您的网址只有 9 条评论 (graph.facebook.com/?ids=YOUR_URL)。

对于我的网站，当有人发布评论“yyy”时，它没有显示在公共视图中，但是当我进入版主视图时可以看到它。

# java - 用另一个 2 数组填充 2d 数组

> ID：13189006
> 
> 赞同：0
> 
> 时间：2012-11-02T03:45:20.073
> 
> 标签：java, for-loop, complexity-theory, multidimensional-array

```
 void some_function() {
     int d[] = new int[10];
     int e[] = new int[15]; 
     int f[] = new int[20];
     int g[] = new int[25]; 
     int h[] = new int[30];
     int i[] = new int[35];
     int j[] = new int[40];
     int k[] = new int[45];
     int l[] = new int[50];
     int m[] = new int[55];
     int n[] = new int[60];
     int o[] = new int[65];
     int p[] = new int[70];
     int q[] = new int[75];
     int r[] = new int[80];
     int s[] = new int[85];
     int t[] = new int[90];
     int u[] = new int[95];
     int v[] = new int[100];
    //Randomly generate int elements of the array
     int master_list[][] = {d, e, f, g, h, i, j, k, l, m, n, 
        o, p, q, r, s, t, u, v};
     Random gen = new Random();
     int i_array[];
     double run_times[][] = new double[19][6];
     double start, end, total_time_1, total_time_2, total_time_3;
     double comp_1, comp_2, comp_3;
     for(int idex = 0; idex < master_list.length; idex++) {
        i_array = master_list[idex];
        //Randomly generate integers to put in each array        
        for(int jdex = 0; jdex < master_list[idex].length; jdex++) {
           i_array[jdex] = gen.nextInt(10);
        }

        comp_1 = ((14*(Math.pow(i_array.length, 2))) 
           + (i_array.length/2) + 4);
        comp_2 = ((14*i_array.length) + 35);
        comp_3 = ((19*i_array.length) + 4);
        /* This is the part where we begin to print and calculate
           data for our report. It begins with caluculating the
            run time of each algorithm by calling the system clock
            method of System.nanoTime() */
        System.out.println("Input size: " + i_array.length);
        System.out.println("Run time of Algorithm 1:");        
        start = System.nanoTime();
        driver.algorithm_1(i_array); 
        end = System.nanoTime();
        total_time_1 = end - start;
        System.out.println("Total time elapsed: " + total_time_1
           + " milliseconds.");
        //We then add this time into the [19][6] matrix.
        run_times[idex][0] = total_time_1;
        run_times[idex][3] = comp_1;

        //The process then repeats for algorithm 2
        System.out.println("Run time of Algorithm 2:"); 
        start = System.nanoTime();
        driver.algorithm_2(i_array); 
        end = System.nanoTime();
        total_time_2 = end - start;
        System.out.println("Total time elapsed: " + total_time_2
           + " milliseconds.");
        run_times[idex][1] = total_time_2; 
        run_times[idex][4] = comp_2; 

        //Yet again another repitition for algorithm 3
        System.out.println("Run time of Algorithm 3:");
        start = System.nanoTime();
        driver.algorithm_3(i_array); 
        end = System.nanoTime();
        total_time_3 = end - start;
        System.out.println("Total time elapsed: " + total_time_3
           + " milliseconds.\n");
        run_times[idex][2] = total_time_3;
        run_times[idex][5] = comp_3;
     }
  } 
```

所以整个事情的问题是我正在尝试创建一个大小为run_times [19] [6]的数组，但是，我只得到一个大小为[10] [5]的列表。

因此，该算法采用 int 数组 d - v 并为它们生成随机元素。然后我计算每个算法的运行时间和复杂性（不包括在内）。

运行时数组是这样的： [0][0] = algorithm_1 time [0][1] = algorithm_2 time [0][2] = algorithm_3 time [0][3] = algorithm_1 complex [0][4 ] = algorithm_2 复杂度 [0][5] = algorithm_3 复杂度

复杂度加倍是在 T(n) 递归关系中为 n 插入数组大小。

知道出了什么问题吗？它可以编译并且没有运行时错误。

# r - 如何以列表形式创建未显示为列表的输出以及如何仅打印部分结果

> ID：13189012
> 
> 赞同：0
> 
> 时间：2012-11-02T03:46:05.743
> 
> 标签：r, list, function, lm

许多函数的输出都在列表结构中——例如 lm()。因此，您可以使用“$”或带方括号的索引来检索输出的单独部分。我的问题是如何以列表形式创建输出，而不会公开表明它是一个列表。如您所知，当在屏幕上打印列表时，通常会指示子列表名称或索引，如下所示：

```
L1 = list(a=1:3, b=letters[1:3])
L1

$a
[1] 1 2 3

$b
[1] "a" "b" "c" 
```

但是，lm() 输出从不使用“$”和子列表名称显示不同的子列表 - 尽管您可以使用“$”和子列表名称提取这些子列表。

第二个问题与某些函数的输出包含的内容远比实际打印在屏幕上的内容（例如，lm() 再次）有关这一事实。如果我们将 str() 用于拟合模型，我们将在拟合模型中看到一大堆内容，其中大部分没有打印出来。这是如何实现的？该函数是否像下面那样分别打印某些内容并输出其他内容（使用 invisible()）？

```
foo = function(x){
   result = list(data=x, test.result=t.test(x))
   print(result[[2]])
   invisible(result)
}
foo(1:10)$data 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T03:50:41.860

阅读 S3 课程。具体来说，当您在提示符处键入一个对象名称时，R 会调用`print`，它具有不同类的方法。

看看`print.lm`这是如何工作的。

```
> test <- list()
> class(test) <- "myclass"
> print.myclass <- function(x) cat("hi")
> test
hi 
```

# git - 你如何以自动化的方式管理团队中的 git pre-commit 钩子？

> ID：13189019
> 
> 赞同：10
> 
> 时间：2012-11-02T03:47:14.820
> 
> 标签：git, pre-commit-hook

假设您正在与一个 20 人的开发团队一起工作或为其提供支持，并且希望使用 git pre-commit 钩子来对正在提交或推送的代码进行一些验证。例如，您想确保人们不会签入大型资产或 SWF 文件的调试版本，您还想检查代码是否有足够的测试覆盖率等。

1.) 应该有一个可以管理这些钩子的中心位置

2.) 它们应该在所有用户/机器上自动更新

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T05:57:51.693

将一些 git setup 和 bootstrap config 放入构建本身时，我一直很幸运。

以这种方式，您可以`.git/hooks`通过在构建中添加`.git/hooks`与已提交的`conf/git-hooks`.

如果您的开发人员仅使用他们的 IDE 来构建/运行/测试代码，那么这可能会非常糟糕，并且开发人员可以禁用或跳过任何本地运行的挂钩。

您可以将一些钩子（大型断言、调试 SWF 检查）放在中央存储库上，请参阅 post-receive 和更新[钩子](http://www.kernel.org/pub/software/scm/git/docs/githooks.html)。

如果你需要更多的灵活性，像 Gitolite 的[virtual refs](http://sitaramc.github.com/gitolite/vref.html)功能可以让你只允许特定的开发人员炫耀规则。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-06-30T10:36:57.497

我建议您不要限制开发人员的提交方式。给他根据自己的优先任务的自由。话虽如此，保持编码风格的结构也很重要。

我建议您使用诸如[Team City](http://www.jetbrains.com/teamcity/)之类的构建运行器来处理此类任务。在开发分支上设置一些关于 teamcity 的钩子，这将验证代码质量并向您发送非常详细的报告。

此外，有时您必须向客户提供修补程序，而此时您并不真正关心代码质量。当你的系统充满了这些讨厌的钩子时，这些情况就成为一个真正需要处理的大问题。

# asp.net - 无法使用 MVC2 asp.net 在 CKEditor 中加载数据？

> ID：13189022
> 
> 赞同：1
> 
> 时间：2012-11-02T03:47:27.860
> 
> 标签：asp.net, asp.net-mvc-2, ckeditor

在我完成所有设置之后。我偶然发现的唯一最后一步是，我无法将数据从 SQL 加载到 CKEditor。

*   当我删除`<%: Model.Service.ShortDescription%>`并添加文本时`aaaaaa`。它加载正常。
*   当我更改文本时`<%: "aaaaaa" %>`。它没有加载。

    ```
    <CKEditor:CKEditorControl ID="Description" BasePath="~/Content/ckeditor" runat="server" FilebrowserImageBrowseUrl= "/Content/ckfinder/ckfinder.html"                            FilebrowserImageUploadUrl= "/Content/ckfinder/core/connector/asp/connector.asp"                            FilebrowserBrowseUrl="/Content/ckfinder/ckfinder.html" FilebrowserUploadUrl="/Content/ckfinder/core/connector/asp/connector.asp">
       <%: Model.Service.ShortDescription %></CKEditor:CKEditorControl> 
    ```

# jquery - 仅在 Chrome 浏览器中出现 JQuery Listbox 奇怪错误

> ID：13189023
> 
> 赞同：0
> 
> 时间：2012-11-02T03:47:37.290
> 
> 标签：jquery, google-chrome

我不知道这件事。

这应该是一件容易的事，但 Chrome 做得很糟糕。我有 2 个列表框区域和区域。这个想法是仅在选择区域时显示区域。它在 Firefox 中运行良好，但在 Chrome 中却不行。经过反复试验，我发现如果列表框选项减少它可以工作，但有很多选项它不能只在 Chrome 中工作，另一个浏览器很好。

请参阅粘贴箱中的脚本。有 2 个列表框版本。工作版本被评论。

[http://pastebin.com/jt8JwFj4](http://pastebin.com/jt8JwFj4)

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:53:12.857

我对您的问题有另一种解决方案，请检查此[问题](http://jsfiddle.net/YudsE/)

javascript

```
 $(document).ready(function(){                
            $("#fstarted-region").change(function() {
                var reg = $("#fstarted-region :selected").val();
                if(reg==''){
                    $("#fstarted-areas").hide();
                }else{
                    $("#fstarted-areas").show();
                    $("#fstarted-areas option").hide();
                    $("#fstarted-areas option."+reg).show();
                }

            });

        }); 
```

css

```
 #fstarted-areas option {
display: none;
}

#fstarted-areas{
display: none;
}
#fstarted-areas option.always {
display: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:03:21.083

Webkit 浏览器的对象有点与 CSS 样式隔离。这意味着您无法执行 .show()、.hide() 等类似操作。

期待一些`.detach()`和`.append()`调用工作，或者只是开始使用模板引擎。

您调用`.fadeIn()`了 jsFiddle，假设您希望它首先隐藏。

HTML：

```
<select id="fstarted-areas" style="display: none"> 
```

Javascript：

```
$(document).ready(function() {
    // Get hold of all options
    var areaOptions = $("#fstarted-areas option");

    $("#fstarted-region").change(function() {
        // Also with a multiple selection I assume you need to get ALL 
        // selected instead of the first one.
        var regs = $("#fstarted-region :selected").map(function(i, el) {
            return '.' + $(el).val();
        });

        regs = $.makeArray(regs);

        // Detach all options, chain the search option.
        regs = areaOptions.detach().filter(regs.join(', '));

        // Add options into selection, then show it.
        $("#fstarted-areas").append(regs).fadeIn(500);
    });
});​ 
```

# php - Flex Builder PHP 登录

> ID：13189026
> 
> 赞同：0
> 
> 时间：2012-11-02T03:48:01.243
> 
> 标签：php, actionscript-3, apache-flex, flex4.5, mobile-application

我为我的移动应用程序创建了一个登录系统，但按下按钮的那一刻没有任何反应。当我查看网络监视器时，它正在连接，所以我想知道出了什么问题。

我错过了什么吗？

.mxml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
    <s:View xmlns:fx="http://ns.adobe.com/mxml/2009"
            xmlns:s="library://ns.adobe.com/flex/spark"
            currentState="login" tabBarVisible="{currentState!='login'}">
        <s:actionContent>
            <s:Button includeIn="login" label="login" click="currentState='planner'"/>
        </s:actionContent>
        <s:states>
            <s:State name="login"/>
            <s:State name="planner"/>
        </s:states>

<fx:Script>
    <![CDATA[

        import mx.rpc.events.ResultEvent;

        private function checkLogin(evt:ResultEvent):void

        {
            if(login.lastResult.loginsuccess == "yes"){currentState = "planner";}
            if(evt.result.loginsuccess == "yes")

            {

                currentState = "planner";

            }

            if(evt.result.loginsuccess == "no")

            {

                statusLabel.text = "Incorrect. (Try user/password)";

            }       

        }

    ]]>
</fx:Script>

    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
        <s:HTTPService id="login" result="checkLogin(event)"
                       method="POST"
                       url="http://localhost:8888/MenuPlannerApp/Services/login.php"
                       useProxy="false">
            <s:request xmlns="">

                <username>{email.text}</username>

                <password>{password.text}</password>
            </s:request>
        </s:HTTPService>
    </fx:Declarations>
    <s:BorderContainer includeIn="login" width="100%" height="100%" >
        <s:Label id="statusLabel" />  
        <s:TextInput id="email" y="192" left="15" right="15" text="Email address"/>
        <s:TextInput id="password" y="247" left="15" right="15" text="Password" displayAsPassword="true"/>
        <s:Button id="submit" y="306" right="15" width="100" height="30"
                  label="Login" click="login.send();"/>
        <s:Button id="LoginCreate" y="306" left="15" width="100" height="30"
                  label="Create"/>
        <s:Label x="166" y="39" width="113" height="101" fontSize="30"
                 text="Menu&#xd;Planner"/>
    </s:BorderContainer>
    <s:BorderContainer includeIn="planner" width="100%" height="100%">

<s:HGroup y="10" width="320" height="46" horizontalAlign="center"
          textAlign="center">

</s:HGroup>
    <s:VGroup includeIn="planner" >
     </s:VGroup>

    </s:BorderContainer>
</s:View> 
```

.php 文件

```
<?php

define( "DATABASE_SERVER", "localhost" );

define( "DATABASE_USERNAME", "xxxx" );

define( "DATABASE_PASSWORD", "xxxx" );

define( "DATABASE_NAME", "MenuPlannerApp" );

//connect to the database

$mysql = mysql_connect(DATABASE_SERVER, DATABASE_USERNAME, DATABASE_PASSWORD) or die(mysql_error());

//asign the data passed from Flex to variables

$email = ($_GET["email"]);

$password = ($_GET["password"]);

//Query the database to see if the given username/password combination is valid.

$query = "SELECT * FROM account WHERE email = '$email' AND password = '$password'";
$result = $mysqli->query($query);

//start outputting the XML

$output = "<loginsuccess>";

//if the query returned true, the output <loginsuccess>yes</loginsuccess> else output <loginsuccess>no</loginsuccess>

if(!$result->num_rows)

{

$output .= "yes";       

}else{

$output .= "no";    

}

$output .= "</loginsuccess>";

//output all the XML

print ($output);

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:01:00.737

您正在使用`mysqli`连接到数据库，但调用过时的 mysql_## 函数来执行查询。

而是更新您的代码

```
$query = "SELECT * FROM account WHERE email = '$username' AND password = '$password'";
$result = $mysqli->query($query);
if(!$result->num_rows)
// No Results Found
else
// Results found 
```

更多功能参见：[MYSQLI PHP Manual](http://www.php.net/manual/en/book.mysqli.php)

# iphone - 使用 AFNetworking 的编译器警告

> ID：13189031
> 
> 赞同：0
> 
> 时间：2012-11-02T03:48:51.173
> 
> 标签：iphone, objective-c, ios, ios6, afnetworking

我是 AFNetworking 的新手，我正在运行一个简单的应用程序来了解 AFNetworking 的工作原理。我正在关注[MobileTuts 上的本教程：](http://mobile.tutsplus.com/tutorials/iphone/ios-sdk_afnetworking/)

我已经包含了 AFNetworking 库，并且还在每个 AFNetworking 文件的编译源中输入了 -fno-objc-arc。

我将此部分包含在实现文件中：

```
NSURL *url = [[NSURL alloc] initWithString:@"http://itunes.apple.com/search?term=harry&country=us&entity=movie"];
NSURLRequest *request = [[NSURLRequest alloc] initWithURL:url];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    NSLog(@"JSON");
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON) {
    NSLog(@"Request Failed with Error: %@, %@", error, error.userInfo);
}];
[operation start]; 
```

当我点击运行时，我有 14 个语义问题并且项目失败了。例如一个错误是：

```
Method possibly missing a [super dealloc] call. 
```

不知道如何解决这个错误。需要一些指导...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T04:47:00.857

**试试这个**：

首先是`delete` `AFNetworking` `library`清洁项目。

现在`download` [最新的 AFNetworking](https://github.com/AFNetworking/AFNetworking)。

`Add`再次`AFNetworking` `library`和`build`项目。

# java - Java 检查 HttpResponse 是否还活着

> ID：13189035
> 
> 赞同：2
> 
> 时间：2012-11-02T03:49:08.723
> 
> 标签：java, ajax, httpresponse

java servlet有没有办法检查httpresponse是否仍然“活着”？例如，在我的情况下，我将 ajax 请求从浏览器发送到 servlet。在这种情况下，它是一个轮询请求，因此它可能会轮询长达 5 分钟，当 servlet 准备好响应数据时，我想检查用户是否关闭了浏览器窗口或移动到另一个页面等。换句话说，检查发送数据到响应是否真的会做任何事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T03:58:01.503

Java Servlet Response 没有任何这样的方法，因为它基于请求和响应行为。如果您想检查状态，那么您可能需要在较低级别工作，例如[**TCP/IP Sockets**](http://docs.oracle.com/javase/7/docs/api/java/net/Socket.html)，它有以下几种状态检查方法：

```
boolean isBound()
Returns the binding state of the socket.

boolean isClosed()
Returns the closed state of the socket.

boolean isConnected()
Returns the connection state of the socket.

boolean isInputShutdown()
Returns whether the read-half of the socket connection is closed.

boolean isOutputShutdown()
Returns whether the write-half of the socket connection is closed. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T03:59:21.067

通常，可以通过在实际消息之前发送一个虚拟有效负载来解决此问题。

如果套接字被切断，则抛出 an`IOException`或 a`SocketException`或类似的东西（取决于库）。从技术上讲，浏览器应该在您离开页面或关闭浏览器（或任何类似的东西）时切断连接，但我发现实现细节可能会有所不同。例如，旧版本的 FF 在离开页面时会适当地关闭连接，但新版本（尤其是在使用 AJAX 时）倾向于保持连接打开。

这是您可以在实际消息之前使用虚拟数据包的主要原因。另一个重要的考虑因素是超时。我之前做过轮询，您要么需要实现某种心跳来保持连接处于活动状态，要么增加服务器超时（尽管请记住，某些浏览器也可能有超时 - 您无法控制的超时）。

我强烈建议尝试（至少部分）支持 Websocket 解决方案，而不是轮询或推送 AJAX。

# ant - TestNG [错误] 如果 testng.xml 有 6 个以上的类，则无法实例化类（在命令提示符中）

> ID：13189037
> 
> 赞同：0
> 
> 时间：2012-11-02T03:49:33.373
> 
> 标签：ant, selenium, webdriver, testng

根据我的项目，testng.xml 中有 15 个类。当我运行 testng 时，我得到了 OutofMemory exp.. 所以我给了更多的堆内存（在 Eclipse 中），然后它工作正常。

我将 build.xml 文件添加到我的项目中，当我尝试通过命令提示符运行时，得到：TestNG [错误] 无法实例化类（对于第 7 类）。多达 6 节课其工作正常。

我尝试在命令提示符下为 jvm 分配最大 1548m 的内存，但没有用。ant bat 文件中没有 Xmx 选项，就像 eclipse 一样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:23:14.347

仔细查看错误信息，找出TestNG不能实例化的类。最有可能的是，该类没有公共的、无参数的构造函数。这与您的`testng.xml`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:36:05.007

您是否对测试进行了配置文件，大多数时候对于 lager suits 内存清理很重要。使用像 jprofiler 这样的工具，看看你的测试中是否有任何内存泄漏。

# node.js - Azure Node.js 表存储查询不返回想要的结果

> ID：13189049
> 
> 赞同：0
> 
> 时间：2012-11-02T03:51:16.450
> 
> 标签：node.js, azure, sdk

我正在使用 Azure Node.js SDK，但无法让此查询正常工作：

```
var ts1 = azure.createTableService(config.storageAccount, config.storageAccessKey, config.tableHost);
var query = azure.TableQuery
    .select()
    .from('users')
    .where('PartitionKey eq ?', '0')
    .and('FriendsSeeVideo eq ?', 'true')
    .and('Status eq ?', 'Active');

var firstTimeThrough = true;
for (f in friends){
    if (firstTimeThrough){
        query.and('UserID eq ?', friends[f].id);
        firstTimeThrough = false;
    }
    else query.or('UserID eq ?', friends[f].id);
} 
```

当我将查询写入屏幕时，我得到一个如下所示的 Azure 表查询：

```
query = {"_fields":[],"_from":"users","_where":["PartitionKey eq '0'"," and FriendsSeeVideo eq 'true'"," and Status eq 'Active'"," and UserID eq '763424639'"," or UserID eq '1385552681'"," or UserID eq '100001386550915'"," or UserID eq '100001869159941'"],"_top":null,"_partitionKey":null,"_nextPartitionKey":null,"_rowKey":null,"_nextRowKey":null} 
```

但它没有返回我期望的结果。有 1 个用户满足表存储条件，结果应该返回用户 ID 为 763424639 的用户，但不是吗？

基本上，我传入一个朋友集并询问表存储这些人是否存在于用户表中，如果他们启用了 FriendsSeeVideo 设置，则返回他们。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T04:42:22.570

I was calling the field [FriendsSeeVideo] by the wrong name it should have been [FriendsSeeVideoView].

I think I'll leave this question on SO because my example code can help somebody wondering how to compare and retrieve sets from table storage.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:32:52.317

只是一个猜测，但也许您想使用布尔值 true 而不是字符串“true”？很难从中看出哪里出了问题……也许您可以向我们展示您希望返回的实际实体。

# java - 如何用参数化查询的方式处理SQL语句中的'IN' case？

> ID：13189051
> 
> 赞同：2
> 
> 时间：2012-11-02T03:51:38.213
> 
> 标签：java, sql, spring, db2

为了避免我的项目中的 SQL 注入攻击，我正在尝试使用参数化查询方式访问数据库。现在我知道如何处理如下相同的情况（使用 Spring JdbcTemplate）：

```
String sql = "SELECT * FROM T_USER WHERE USERNAME = ? AND PASSWORD = ?"
jdbcTemplate.query(sql, 
                   new UserRowMapper(), 
                   new Object[]{"%admin%", "%password%"}); 
```

上面的代码运行没有问题，但我不知道如何处理“IN”的情况，以下是我的情况，它工作失败：

```
String sql = 
   "SELECT * FROM T_USER WHERE USERNAME = ? AND PASSWORD = ? AND CLASS_ID IN (?)"
jdbcTemplate.query(sql, 
                   new UserRowMapper(), 
                   new Object[]{"%admin%", "%password%", "1,2,3"}); 
```

有人给我指导吗？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:10:13.920

我认为您可以创建一个列表并将其作为第三个参数传递。`LIKE`此外，您需要`=`在前两列过滤器中使用。

```
List<Integer> classIds = new ArrayList<Integer>();
classIds.add(1);
classIds.add(2);
classIds.add(3);

String sql = "SELECT * FROM T_USER WHERE "+
              "USERNAME LIKE ? AND PASSWORD LIKE ? AND CLASS_ID IN (?)";
jdbcTemplate.query(sql, new Object[]{"%admin%", "%password%", classIds},
                                                         new UserRowMapper()); 
```

请注意：以下是语法：

```
public List query(String sql, Object[] args, RowMapper rowMapper) 
             throws DataAccessException 
```

编辑：请尝试`namedParameterJdbcTemplate`bwlow：

```
String sql = "SELECT * FROM T_USER WHERE "+
           "USERNAME LIKE :uname AND PASSWORD LIKE :passwd AND CLASS_ID IN (:ids)";
 Map<String, Object> namedParameters = new HashMap<String, Object>();
 namedParameters.put("uname", "%admin%);
 namedParameters.put("passwd", "%password%");
 namedParameters.put("ids", classIds);
 List result = namedParameterJdbcTemplate.query(sql, namedParameters, 
                                                             new UserRowMapper()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:04:39.633

三个选项：

1.  为 IN LIST 的每个长度生成不同的 JDBC 查询，并参数化每个 INDIVIDUAL 项目，例如[这个答案](https://stackoverflow.com/a/337792/573261)
2.  对于小桌子，您可以作弊并使用 LIKE 语句，例如[这个答案](https://stackoverflow.com/a/337817/573261)
3.  使用 SPLIT 函数（反 LISTAGG）将分隔列表转换为每列一列的单独行，并对其进行 JOIN。[示例 SPLIT 函数](http://www.dbforums.com/db2/1672833-splitting-row-mulitple-columns.html)
    *   您会将函数的参数参数化为单个字符串

# encryption - 在没有 KeyGenerator 的情况下生成密钥字节

> ID：13189053
> 
> 赞同：0
> 
> 时间：2012-11-02T03:52:18.340
> 
> 标签：encryption, jce, jca

在没有 JCA(JCE) 的环境中`Java ME`，使用 生成密钥（或 iv）字节可以`java.util.Random`吗？

```
// MIDP
// MIDP
// MIDP

private static final Random RANDOM = new Random();

/**
 * Generates a new encryption key. This method is not intended to be used in
 * production stage.
 *
 * @return a new encryption key.
 */
protected static byte[] newKey() {

    final Random random;
    synchronized (RANDOM) {
        random = new Random(RANDOM.nextLong());
    }

    final byte[] key = new byte[256]; // AES 256
    for (int i = 0; i < key.length; i++) {
        key[i] = (byte) random.nextInt(256);
    }

    return key;
} 
```

是否存在任何加密问题？

这个问题中是否有任何拼写错误，包括源代码和注释？（我不擅长使用 Uslish。）

# android - 在 google maps android 上实现落针动画

> ID：13189054
> 
> 赞同：7
> 
> 时间：2012-11-02T03:52:18.683
> 
> 标签：android, google-maps, google-maps-markers

我正在我的 android 应用程序中实现谷歌地图。在这个过程中，我想添加落针动画。我已经搜索了每一个，但找不到执行此操作的确切方法。任何人都可以帮助我如何做将是一个很大的帮助...

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-11-27T12:02:52.100

将标记添加到地图中的所需位置，然后使用该标记调用此函数

```
private void dropPinEffect(final Marker marker) {
        final Handler handler = new Handler();
        final long start = SystemClock.uptimeMillis();
        final long duration = 1500;

        final Interpolator interpolator = new BounceInterpolator();

        handler.post(new Runnable() {
            @Override
            public void run() {
                long elapsed = SystemClock.uptimeMillis() - start;
                float t = Math.max(
                        1 - interpolator.getInterpolation((float) elapsed
                                / duration), 0);
                marker.setAnchor(0.5f, 1.0f + 14 * t);

                if (t > 0.0) {
                    // Post again 15ms later.
                    handler.postDelayed(this, 15);
                } else {
                    marker.showInfoWindow();

                }
            }
        });
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T04:21:00.733

检查这个[线程](https://stackoverflow.com/questions/10607042/tutorial-android-map-pin-drop-animation-working-right)和这个[线程](https://stackoverflow.com/questions/7144327/how-to-implement-drop-pin-animation-in-android-using-google-maps)

Android 具有叠加标记（请参阅 ItemizedOverlay），可以轻松地将图像添加到地图中，但请注意，至少根据我的经验，动画图像在添加到叠加层时不起作用。

但老实说，你应该记住它是 Android，从 iOS 复制每一个小功能是不必要的。Android 上的 Google 地图不使用大头针标记，而是使用静态蓝点 - 我想说最好复制它并记住您的用户是 Android 用户，而不是 iOS 用户 - 他们希望 Android 应用程序之间的一致性

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T04:08:26.043

要在 gps 中实现落针动画，请点击链接

[http://www.codeproject.com/Articles/112044/GPSLocator-App-to-Find-Current-Nearest-Location-us](http://www.codeproject.com/Articles/112044/GPSLocator-App-to-Find-Current-Nearest-Location-us)

# objective-c - 将对象从一个 NSMutable 数组复制到另一个

> ID：13189058
> 
> 赞同：0
> 
> 时间：2012-11-02T03:52:50.343
> 
> 标签：objective-c, nsmutablearray

我做了一些搜索，并没有真正找到我的问题的答案。下面的代码试图复制包含一些对象的 NSMutable 数组的内容。

我已经尝试了下面的代码，但是在运行时没有错误，但是新数组没有像我想象的那样得到对象。

csvContent 是一个数组，其中包含来自解析 CSV 文件的对象，其他 NSMutable 数组 round1、round2 等已在头文件中定义。

NSLOG 输出是正确的，但数组不包含任何对象。

```
for(int loopNumber = 0; loopNumber < [csvContent count]; loopNumber++)
{
    if ([[[csvContent objectAtIndex:loopNumber] objectAtIndex:1] isEqualToString:@"1"])
    {
        [round1 addObject:[csvContent objectAtIndex:loopNumber]];
        NSLog(@"round 1");
    }

    if ([[[csvContent objectAtIndex:loopNumber] objectAtIndex:1] isEqualToString:@"2"])
    {
        [round2 addObject:[csvContent objectAtIndex:loopNumber]];
        NSLog(@"round 2");
    }

    if ([[[csvContent objectAtIndex:loopNumber] objectAtIndex:1] isEqualToString:@"3"])
    {
        [round3 addObject:[csvContent objectAtIndex:loopNumber]];
        NSLog(@"round 3");
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T04:00:26.417

您是否真的创建并初始化了`round1`、`round2`和的数组`round3`？换句话说，确保`nil`在运行此循环时它们不在。

此外，您的代码效率极低。您在循环内调用`[csvContent objectAtIndex:loopNumber]`了六次。试试这个（我使用`i`而不是`loopNumber`保存打字）：

```
for (int i = 0; i < csvContent.count; i++) {
    NSArray *loopContent = csvContent[i];
    NSString *val = loopContent[1];

    if ([val isEqualToString:@"1"]) {
        [round1 addObject:loopObject];
    } else if ([val isEqualToString:@"2"]) {
        [round2 addObject:loopObject];
    } else if ([val isEqualToString:@"3"]) {
        [round3 addObject:loopObject];
    }
} 
```

# facebook-graph-api - Facebook 个人资料图片未在 Chrome 中显示

> ID：13189060
> 
> 赞同：0
> 
> 时间：2012-11-02T03:53:05.430
> 
> 标签：facebook-graph-api, google-chrome

我在我的应用程序中加载 Facebook 个人资料图片时遇到问题。我从图形 API 获取我的朋友列表，然后显示相关的朋友信息和他们的公开个人资料图片

我的 HTML 如下。

```
<div id = "profile_picture" style="float:left; width:100px;height: 100px" >
                <img src="https://graph.facebook.com/{{providerUserId}}/picture?width=100&height=100"/>
            </div>
            <div id="user_basic_info" style="float:left;margin-left:14px;">
                <div id="name" style="font-size:16px;font-weight:bold;margin-bottom:6px;">{{name}}</div>
                <div id="email" style="margin-bottom:6px;width:400px;">{{email}}</div>
                <div id="address"></div>
            </div> 
```

{{}} 是通过模型填充的 Mustache 模板。由于某种原因，图像无法在 Chrome 中加载；但在 Chrome Canary、Firefox、Safari 中运行良好。

如果我也传入硬编码的 userId 也没有什么区别。

有指导吗？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-11T03:39:44.953

通过在隐身模式下打开 url 来检查是否有任何 chrome 插件导致问题，即假设您在该模式下禁用了所有扩展。

我注意到*断开连接*扩展隐藏了您所描述的图像。

# jquery - 在之间注入文本 它位于一个

> ID：13189061
> 
> 赞同：0
> 
> 时间：2012-11-02T03:53:08.333
> 
> 标签：jquery

我有这样的事情：

```
<div id="myId">
     <p></p>
</div> 
```

我想在`<p></p>`标签之间注入一些简单的文本，但现在确保不要通过先通过 div 然后在其相关的 dom 上引用它`<p>`

截至今天，我正在使用最新版本的 jQuery。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T03:59:56.753

注入文本

```
$('#myId').find('p').text('Hello'); 
```

注入html

```
$('#myId').find('p').html('<h1>Hello</h1>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T03:55:14.447

使用此选择器 `$('#myId p')`

要插入文本，您可以使用`.html()`

**jQuery**

```
$('#myId p').html('Hello World') 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/KCY5U/1/)**

**纯Javascript**

```
var children = document.getElementById("myId").children;
for(var i = 0; i < children.length; i++) {
    if(children[i].tagName == 'P') {
        children[i].innerHTML = 'Hello World !!';
    }
}​ 
```

**[小提琴](http://jsfiddle.net/sushanth009/Y96hc/)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T03:55:26.537

使用子选择器

```
$("#myId > p").text('a'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T04:56:03.833

你可以这样做

如果它只是文本

```
 $('#myId p').text('your text'); 
```

如果它只是像 span 之类的 html 代码或其他东西

```
 $('#myId p').html('your hmtl'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T03:55:12.883

你可以简单地使用

```
$("#myId p").text("Hello World"); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T03:55:17.493

`$('#myID p').text('content');` 应该这样做

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-02T03:55:22.643

我认为这应该可行： $("#myID p").text("asdf")

# xamarin.ios - 带有 MonoTouch.Dialog 的 mm:ss 的入口元素？

> ID：13189069
> 
> 赞同：1
> 
> 时间：2012-11-02T03:54:47.713
> 
> 标签：xamarin.ios, monotouch.dialog

我正在尝试 MonoTouch 和 MonoTouch.Dialog 并且想知道什么是仅为分钟和秒创建时间条目元素的最佳方法。TimeElement 似乎只支持小时和分钟。

我对整个框架很陌生，所以我想知道是否有办法创建一个带有“##:##”掩码的文本输入元素并使用数字键盘来填充分钟和秒？

一个更酷的选择是使用一个部分，将用户带到具有两个“选择器视图”（旋转轮子）的视图几分钟和几秒钟，但我还没有。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T12:32:28.050

MonoTouch.Dialog 的源代码可在 Github (https://github.com/migueldeicaza/MonoTouch.Dialog/tree/master/MonoTouch.Dialog) 上获得。

在那里，看看**DateElement**的实现（https://github.com/migueldeicaza/MonoTouch.Dialog/blob/master/MonoTouch.Dialog/Elements.cs#L1827）

为了得到你`TimeElementMinutesSeconds`，你所要做的就是（未经测试）滥用倒计时模式。它将提供小时和分钟，但您可以将它们解释为分钟和秒：

```
public class TimeElementMinutesSeconds : DateTimeElement {
        public TimeElementMinutesSeconds (string caption, DateTime date) : base (caption, date)
        {
        }

        public override string FormatDate (DateTime dt)
        {
            DateTime dtLocal = GetDateWithKind (dt).ToLocalTime ();
return string.Format("{0:##}:{1:##}"dtLocal.Hours, dtLocal.Minutes);
        }

        public override UIDatePicker CreatePicker ()
        {
            var picker = base.CreatePicker ();
            picker.Mode = UIDatePickerMode.CountDownTimer;
            return picker;
        }
    } 
```

如果这不能让您足够接近，您可以创建自己的选择器并将其返回。

# javascript - 如何识别地图上的谷歌地图标记

> ID：13189086
> 
> 赞同：0
> 
> 时间：2012-11-02T03:55:52.220
> 
> 标签：javascript, google-maps, google-maps-api-3

我有一个谷歌地图标记列表作为谷歌地图旁边的 html 链接。我有点击链接时触发的功能。标记 ID 被传递给此函数。

我的问题是 - 当我有 100 个标记时，我想以某种方式识别地图上点击的标记。某种会远离标记的涟漪效应。

请告知我可能的选择，以便我可以开发适当的解决方案

示例：地图上已有 100 个标记。我的左边还有 100 个名字。每个名称对应于每个标记。当我单击名称时，我希望属于该名称的标记以某种方式“闪烁”或以其他方式在其他标记中标识自己。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T04:11:33.610

在标记被固定在地图上之前，您需要设置一个全局标记变量

```
var gb.markers = []; 
```

当您创建每个标记时，需要推入全局标记数组

```
marker = new google.maps.Marker({
  // other stuff
  'id': marker.id
}); 
```

完成将函数分配给标记后，将其推入全局变量

```
gb.markers.push(marker); 
```

确保当您单击标记时将获得标记 id 并循环全局标记或使用 id 作为索引的标记数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T04:15:54.073

涟漪效果会非常复杂，可能涉及以您希望突出显示的标记为中心的[“GroundOverlay”对象的定位。](https://developers.google.com/maps/documentation/javascript/reference#GroundOverlay)

如果您的目标只是能够突出显示标记，则可以使用['Marker.setAnimation(animationObject)'](https://developers.google.com/maps/documentation/javascript/reference#Marker)播放简单的动画。您也许可以使用[“Animation.BOUNCE”](https://developers.google.com/maps/documentation/javascript/reference#Animation)来突出显示标记？

# google-chrome - 谷歌浏览器给出警告资源解释为字体但使用 MIME 类型应用程序/八位字节流传输：

> ID：13189089
> 
> 赞同：17
> 
> 时间：2012-11-02T03:56:15.177
> 
> 标签：google-chrome, playframework-2.0

我不断收到此警告

资源解释为字体，但使用 MIME 类型应用程序/八位字节流传输：“http://127.0.0.1:8080/assets/font/fontawesome-webfont.woff”。

我正在使用 Play 2.0.4 网络服务器。我将 mime-types 添加到我的 application.conf 文件中，如下所示

```
mimetype.eot = application/vnd.ms-fontobject
mimetype.otf = application/octet-stream
mimetype.ttf=application/x-font-ttf
mimetype.woff = application/x-font-woff 
```

知道我可能做错了什么。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-12T09:14:33.873

实际上，我找到了答案：

> 某些浏览器（例如 Google Chrome）会在从 Web 服务器下载字体时显示此警告，该字体设置了意外的字体 MIME 类型。
> 
> 对于许多字体类型，有一个解决方案！
> 
> 使用以下每个字体文件扩展名的 MIME 类型更新 Web 服务器的配置：
> 
> ```
> .ttf — font/truetype 
> .otf — font/opentype 
> .eot — application/vnd.ms-fontobject 
> .woff — application/x-font-woff 
> ```
> 
> 如果您使用的是 Apache 配置，您可以为每种字体类型包含 AddType 指令：
> 
> AddType application/vnd.ms-fontobject eot
> AddType font/truetype ttf
> AddType application/x-font-woff woff
> AddType font/opentype otf
> 
> 为每个字体配置一个特定的 MIME 类型，而不是通用的 application/octet-stream MIME 类型，您应该不再在 Web 浏览器控制台中看到警告。
> 
> 此配置虽然对清理控制台很有效，但不包括 OTF、TTF 和 WOFF 等字体在技术上正确的 MIME 类型。对于这些字体类型，官方 MIME 类型尚未（尚未）获得批准。WOFF 的官方类型——application/font-woff——已被请求。AddType font/opentype otf

[http://www.jbarker.com/blog/2011/resource-interpreted-font-transferred-mime-type](http://www.jbarker.com/blog/2011/resource-interpreted-font-transferred-mime-type)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-09-04T20:03:21.127

对于我的 IIS 实例，我必须使用以下内容：

`.woff`—— `application/font-woff`（不是`application/x-font-woff`）

看：

*   [资源解释为字体但使用 MIME 类型 application/x-font-woff 传输](https://stackoverflow.com/questions/16704967/resource-interpreted-as-font-but-transferred-with-mime-type-application-x-font-w)
*   [http://zduck.com/2013/google-chrome-and-woff-font-mime-type-warnings/](http://zduck.com/2013/google-chrome-and-woff-font-mime-type-warnings/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-28T22:08:15.487

如果您使用的是基于 Rack 的应用程序，您可以修改您的`Rack::Mime::MIME_TYPES`哈希`config.ru`：

```
# Additional mime types
Rack::Mime::MIME_TYPES.merge!({
  ".eot" => "application/vnd.ms-fontobject",
  ".ttf" => "font/ttf",
  ".otf" => "font/otf",
  ".woff" => "application/x-font-woff"
}) 
```

# jquery - jQuery-v1.3.2 兼容Jstree

> ID：13189090
> 
> 赞同：0
> 
> 时间：2012-11-02T03:56:42.907
> 
> 标签：jquery, jquery-ui, jstree

我需要为我的应用程序构建树状表示。为此，我正在使用最新版本的 JStree-tree builder util。这个 util 包包含最新版本的 jQuery。

但是我的应用程序使用了一些旧版本的 JQuery-v1.3.2。如果我将我的应用程序的 jQuery 更新到最新版本，那么迁移现有代码会很痛苦。那么任何人都可以指出与 JQuery-v1.3.2 兼容的 jquery-jstree.js 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T04:21:39.093

奇怪的是，您在将站点升级到当前版本的 jQuery 时遇到问题，因为大多数升级都是向后兼容的。这是 jQuery 团队一直非常清楚的事情。少数例外之一可能是`attr`方法的使用

如果您这样做，您可以加载 2 个版本的 jQuery 并作为隔离实例运行：

```
<script src="path/to/jQuery compatible with plugin"></script>
<script>
  /* must call this before loading other version*/
  $jQ_1.8= $.noConflict();
</script>
<script src="jquery-1.3"></script>

<script>
/* use "$" as you normally do for exisitng site code*/
  $(function(){
      /* code using 1.3*/
  })

/* for higher version jQuery use different *document.ready**/
$jQ_1.8(function( $){/* pass "$" as argument to allow using "$" in code if you want*/
  $(selector).pluginThatUsesDifferentVerion()

}) 
```

# php - Zend 框架，PHP cURL，内部文件以获取原始内容，解析它们并将它们呈现为 php 文件

> ID：13189094
> 
> 赞同：0
> 
> 时间：2012-11-02T03:57:16.783
> 
> 标签：php, file, zend-framework

好的，不确定这是否是正确的逻辑。但是计划的最终游戏是我需要想出一种方法来检索给定目录中的文件内容，然后按照正常约定调用它们时输出它们`include()`，`require()`等等。

这样做的基础是，销售团队希望能够编辑可以通过 FTP 轻松添加/删除/编辑到特定目录的特定帮助文档。然而，这个目录超出了正常的 MVC 逻辑的范围，但仍然包含在 MVC 安装中。

因此，我试图为他们提供一个默认模板来使用它，我可以从某些点之间获取位并显示它，而无需为此使用数据库。想法？我还没有尝试过任何事情，只是为了节省这个问题的时间。我正在寻找一个或 2 个想法来弄清楚如何开始这个过程，这将是解决手头问题的最佳方式

# routes - 播放 framework2：从 url 中删除尾部斜杠

> ID：13189095
> 
> 赞同：32
> 
> 时间：2012-11-02T03:57:18.557
> 
> 标签：routes, playframework-2.0, config

在播放框架 1 中，您可以在路由文件中使用类似这样的内容（查看[http://www.playframework.org/documentation/1.2.5/routes#syntax](http://www.playframework.org/documentation/1.2.5/routes#syntax)上的文档）

```
GET     /clients/?       Clients.index 
```

这样路由将匹配 /api/clients 以及 /api/clients/

如何在游戏框架 2 中实现相同的目标？

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-11-02T13:31:08.790

从 SEO 的角度来看，相同的链接与`trailing slash`没有它的链接不同。强烈建议始终使用一种模式（拖尾或非拖尾链接）。

虽然有不同的学校，但最重要的是从“错误”的 URL 到正确的 URL 进行 301 重定向。[您可以在 Play 中使用“跨越多个 / 的动态部分](http://www.playframework.org/documentation/2.0.4/ScalaRouting)”轻松实现它。

我个人更喜欢不拖尾的版本，可能是因为在 Play 中实现它就像写几行简单的行。将此规则添加到您的路由文件中，在开头的某处（保留斜杠 - 这很重要，因为它不被视为跨组中的下一个斜杠，并且允许轻松匹配尾随 URL）：

```
GET  /*path/  controllers.Application.untrail(path: String) 
```

然后你可以在控制器中进行重定向 - 到参数，所以最后没有斜杠：

`Java`

```
public static Result untrail(String path) {
   return movedPermanently("/" + path);
} 
```

`Scala`

```
def untrail(path: String) = Action { 
  MovedPermanently("/" + path)
} 
```

到现在为止，所有以斜线结尾的路由都将被重定向到无尾版本。简单的 ：）

当然，强烈建议使用反向路由器来生成正确的 URL - 以最大限度地减少冗余重定向。此外，如果您在某处（即在某些 JS 或外部应用程序中）对 URL 进行硬编码，最好编写正确的 URL，而不是每次都转换它们。如果您计划发布一些公共 API，请在文档中记下您的应用程序更喜欢哪种模式，这样开发人员就会收到警告，并且（也许）会准备正确的调用。

更重要的是 - 这对路线最重要，`GET`因为它们是客户端操纵的主题。在使用`POST`,`PUT`和`DELETE`其他您不需要（或者更确切地说，您不应该）关心重定向时，因为它们不能被用户更改，因此您需要记住您选择的方式。如果呼叫错误，即。对于 POST，只返回 404 错误 - 所以第三部分应用程序的开发者将有义务使用正确的结尾。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-02T06:26:34.993

我设法想出了一些东西，它并不像我希望的那么简单，但这也不是火箭科学

```
import play.api.mvc.RequestHeader

import play.api.Play.current

class NormalizedRequest(request: RequestHeader) extends RequestHeader {

  val headers = request.headers
  val queryString = request.queryString
  val remoteAddress = request.remoteAddress
  val method = request.method

  val path = request.path.stripSuffix("/")
  val uri = path + {
    if(request.rawQueryString == "") ""
    else "?" + request.rawQueryString
  }
}

object NormalizedRequest {
  def apply(request: RequestHeader) = new NormalizedRequest(request)
} 
```

然后我在 Global.scala 中像这样使用它

```
override def onRouteRequest(request: RequestHeader): Option[Handler] = {
  super.onRouteRequest(NormalizedRequest(request))
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2016-05-30T09:15:44.697

更新了 @opensas 和 @lloydmeta 的示例以进行 play 2.5

```
/**
  * HttpRequestHandler that removes trailing slashes from requests.
  */
class TrailingSlashNormaliserHttpRequestHandler(router: Router, errorHandler: HttpErrorHandler, configuration: HttpConfiguration, filters: HttpFilters) extends HttpRequestHandler {

  private val default = new DefaultHttpRequestHandler(router, errorHandler, configuration, filters)

  override def handlerForRequest(request: RequestHeader): (RequestHeader, Handler) = {
    default.handlerForRequest(removeTrailingSlash(request))
  }

  private def removeTrailingSlash(origReq: RequestHeader): RequestHeader = {
    if (origReq.path.endsWith("/") && origReq.path != "/") {
      val path = origReq.path.stripSuffix("/")
      if (origReq.rawQueryString.isEmpty) {
        origReq.copy(path = path, uri = path)
      }else {
        origReq.copy(path = path, uri = path + s"?${origReq.rawQueryString}")
      }
    } else {
      origReq
    }
  }
} 
```

有关如何应用处理程序的说明，请参阅[https://www.playframework.com/documentation/2.5.x/ScalaHttpRequestHandlers](https://www.playframework.com/documentation/2.5.x/ScalaHttpRequestHandlers)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-08-10T23:59:26.160

对于 Play 2.8，此处对其他答案的更新：

```
import play.api.OptionalDevContext
import play.api.http._
import play.api.mvc.{Handler, RequestHeader}
import play.api.routing.Router
import play.core.WebCommands

import javax.inject.Inject

class TrailingSlashHandler @Inject() (
  webCommands: WebCommands,
  optDevContext: OptionalDevContext,
  router: Router,
  errorHandler: HttpErrorHandler,
  configuration: HttpConfiguration,
  filters: HttpFilters
) extends DefaultHttpRequestHandler(
    webCommands,
    optDevContext,
    router,
    errorHandler,
    configuration,
    filters
  ) {

  override def handlerForRequest(request: RequestHeader): (RequestHeader, Handler) =
    super.handlerForRequest(removeTrailingSlash(request))

  private def removeTrailingSlash(originalRequest: RequestHeader): RequestHeader =
    if (originalRequest.path.endsWith("/") && originalRequest.path != "/") {
      val normalizedPath = originalRequest.path.stripSuffix("/")
      val normalizedUri =
        if (originalRequest.queryString.isEmpty) originalRequest.target.uriString.stripSuffix("/")
        else originalRequest.target.uriString.replaceFirst("/\\?", "?")
      originalRequest.withTarget(
        originalRequest.target
          .withPath(normalizedPath)
          .withUriString(normalizedUri)
      )
    } else {
      originalRequest
    }
} 
```

然后只需通过将其放入您的 conf 中进行注册：`play.http.requestHandler = your.package.here.TrailingSlashHandler`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-12T01:27:37.543

这是基于[opensas 的回答](https://stackoverflow.com/a/13190382/1814775)，只是简化了一点以重用 Play 的内置`copy`方法，`RequestHeader`以便`RequestHeader`保留原始内容中的所有内容，如 id、标签、版本、安全等。

```
import play.api.GlobalSettings
import play.api.mvc.{Handler, RequestHeader}

trait TrailingSlashNormaliser extends GlobalSettings {

  def removeTrailingSlash(origReq: RequestHeader): RequestHeader = {
    if (origReq.path.endsWith("/")) {
      val path = origReq.path.stripSuffix("/")
      if (origReq.rawQueryString.isEmpty)
        origReq.copy(path = path, uri = path)
      else
        origReq.copy(path = path, uri = path + s"?${origReq.rawQueryString}")
    } else {
      origReq
    }
  }

  override def onRouteRequest(request: RequestHeader): Option[Handler] = 
    super.onRouteRequest(removeTrailingSlash(request))

}

/**
 * Global object that removes trailing slashes from requests.
 */
object Global extends TrailingSlashNormaliser 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T04:45:21.333

在您的路线文件中添加该条目两次。一个带斜线，一个不带。

# javascript - 为什么 JSF 支持 bean 函数不能从 Firefox 中的 JavaScript 调用，但在 IE 和 Chrome 中工作正常？

> ID：13189104
> 
> 赞同：1
> 
> 时间：2012-11-02T03:58:54.187
> 
> 标签：javascript, jsf, browser, backing-beans

当页面被卸载时，我试图从 JavaScript 触发一个 JSF 支持 bean 函数。它在 IE 和 chrome 中运行良好，但在 Firefox 中运行良好。

这是`onunload`事件在 XHTML 中触发的方式：

```
<h:body onunload="onPageUnload()">
  <h:form id="theForm">
    <p id="hiddenButton" style="display:none">
      <h:commandLink id="hiddenCloseEvent" styleClass="button" action="#{theBean.doHiddenCloseEvent}">
        <f:param name="action" value="CLOSE"/>
      </h:commandLink>
    </p>
  ...
  </form>
</h:body> 
```

收到卸载事件后，将执行以下 JavaScript。有2个版本，一个是针对IE的，一个是针对谷歌浏览器的。

IE版本：

```
function onPageUnload() {
  if( detailPage == "false" ) {
    document.getElementById('theForm:hiddenCloseEvent').click();
  }
} 
```

谷歌浏览器版本：

```
window.onbeforeunload = function(e) {
  onPageUnload();
}; 
```

执行时`onPageUnload()`，触发隐藏的输入按钮JSF组件点击事件，然后触发JSF backing bean, `theBean`, 函数`theBean.doHiddenCloseEvent`做一些处理。现在的情况是 JSF 函数在 IE 和 Google Chrome 版本中执行，但在 Firefox 中没有被触发，请问这个问题如何解决？

**更新**

我修改了如下代码：

```
function onPageUnload() {
  if( detailPage == "false" ) {
    alert('before');
    document.getElementById('theForm:hiddenCloseEvent').click();
    alert('after');
  }
} 
```

从上面的代码中我发现`before`得到提示但`after`没有提示。此测试用例验证组件是否在 Web 浏览器中不可见。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:30:10.973

我相信这是 Firefox 的一个特殊问题。建议你`onbeforeunload`用来迎合FF。

请参阅[Firefox 论坛](http://support.mozilla.org/en-US/questions/891962)和[此处](http://www.codingforums.com/showthread.php?t=153856)。`onbeforeunload`并非所有浏览器都支持

您可以使用这两个事件来覆盖两个基础。

# ruby-on-rails - 无法运行 rake db：使用 Railscast 示例在 Rails 中为 Postgresql 迁移 tsvector GIN 索引

> ID：13189105
> 
> 赞同：9
> 
> 时间：2012-11-02T03:59:17.843
> 
> 标签：ruby-on-rails, postgresql, postgresql-9.1, pg-search

我正在关注 Ryan Bates关于在 Rails 中使用内置 PostgresQL 全文搜索的[优秀教程。](http://railscasts.com/episodes/343-full-text-search-in-postgresql)我目前正在使用 pg_search gem un-indexed 没问题，但我需要提高性能。我正在使用指定了“英语”字典的 tsvector。

我正在使用 PostgreSQL 版本 9.1.4

根据 Ryan 的指示，我已经使用此代码运行了一个新的迁移，指定了我想要创建的两个新索引。首先是架构：

```
create_table "references", :force => true do |t|
  t.string   "title"
  t.string   "type"
  t.datetime "created_at",         :null => false
  t.datetime "updated_at",         :null => false
  t.string   "public_url"
  t.string   "content_type"
  t.integer  "file_size"
  t.text     "overview"
  t.text     "body"
  t.text     "full_text"
  t.integer  "folder_id"
end 
```

我的迁移如下所示：

```
def up
  execute "create index references_title on references using gin(to_tsvector('english', title))"
  execute "create index references_full_text on references using gin(to_tsvector('english', full_text))"
end

def down
  execute "drop index references_title"
  execute "drop index references_full_text"
end 
```

我还继续并取消了 application.rb 中的 :sql 选项的注释

```
config.active_record.schema_format = :sql 
```

我继续收到相同的 rake aborted 错误：

```
==  AddSearchIndexesToReferences: migrating ===================================
-- execute("CREATE INDEX references_title on references using gin(to_tsvector('english',    title))")
rake aborted!
An error has occurred, this and all later migrations canceled:

PG::Error: ERROR:  syntax error at or near "references"
LINE 1: CREATE INDEX references_title on references using gin(to_tsv...
                                     ^
: CREATE INDEX references_title on references using gin(to_tsvector('english', title)) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T04:05:07.773

REFERENCES 是与[外键](http://www.postgresql.org/docs/current/interactive/ddl-constraints.html#DDL-CONSTRAINTS-FK)一起使用的关键字，因此除非双引号，否则不能将其用作表名：

```
def up
  execute %q{create index references_title on "references" using gin(to_tsvector('english', title))}
  execute %q{create index references_full_text on "references" using gin(to_tsvector('english', full_text))}
end 
```

您还必须在 SQL 代码片段中使用该表名的任何地方用双引号引起来。如果 ActiveRecord 正在构建 SQL，它将为您进行引用。如果您希望在很多 SQL 片段中使用表名，那么我建议您重命名表，这样您就不必关心引用问题。

# ruby-on-rails - Rails 3.2 应用程序的 NGINX 到期标头

> ID：13189108
> 
> 赞同：1
> 
> 时间：2012-11-02T03:59:36.893
> 
> 标签：ruby-on-rails, nginx, header

我正在尝试为 nginx 1.2.4 上的 3.2 应用程序添加过期标头，编译时默认支持标头模块。

我在 server {} 块内的规则是：

```
location /assets/ {
    access_log   off;
    expires      30d;
} 
```

我根据在网上找到的文件扩展名尝试了其他 reg exp，但似乎都不起作用。我究竟做错了什么？

响应标题是：

```
Accept-Ranges   bytes
Age 0
Cache-Control   proxy-revalidate
Connection  Keep-Alive
Content-Type    text/css
Date    Fri, 02 Nov 2012 03:58:45 GMT
Last-Modified   Fri, 02 Nov 2012 01:08:09 GMT
Via 1.1 BC5-ACLD 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:23:03.277

是的，我终于发现我最初的规则是完美的。我的互联网提供商正在对来自非国家网站（我住在新西兰）的内容进行一些聪明的处理，因此他们的一些代理更改了标题。还好，我很困惑，因为我多次使用这些规则，从来没有遇到过麻烦；这是我第一次在新西兰的另一个国家/地区拥有服务器，所以从未遇到过这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:16:35.627

确保将该配置文件放在正确的位置。确保重新启动 nginx。

# c - 为什么即使我已经注释了标题并使用了它的功能，我也没有收到错误消息？

> ID：13189109
> 
> 赞同：0
> 
> 时间：2012-11-02T03:59:39.640
> 
> 标签：c, gcc, ctype

在下面的程序中，我对该语句进行了注释，希望在使用和`#include <ctype.h>`之类的函数时会引发错误。但令我惊讶的是，没有抛出任何错误。为什么会这样？维基[百科](http://en.wikipedia.org/wiki/C_character_classification)页面在标题类型中列出了这些函数。`isupper``isgraph``ctype.h`

```
#include <stdio.h>
//#include <ctype.h>

int main() {
char ch;
for(;;) {
   ch = getc(stdin);
   if( ch == '.') break;
   int g = isgraph(ch);
   if(isupper(ch) != 0) printf("Is in upper case\n");
}   
return 0;   
 } 
```

*注意：*我`gcc`用于在 linux (fedora) 上编译。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T04:02:25.237

默认情况下，`gcc`以相当宽松的模式运行。您可以通过添加来获得警告，例如：

```
 gcc -Wall -c yourfile.c 
```

要求所有主要警告。（有更多的警告可以作为：`-Wextra`添加一堆。）您还可以指定`-std=c99`（并且可能`-pedantic`）以获得更多警告。

C99 要求在使用函数之前定义或声明函数。

```
$ gcc -O3 -g -std=c99 -Wall -Wextra -Wmissing-prototypes -Wstrict-prototypes -Wold-style-definition -c warn.c
warn.c:4:5: warning: function declaration isn’t a prototype [-Wstrict-prototypes]
warn.c: In function ‘main’:
warn.c:4:5: warning: old-style function definition [-Wold-style-definition]
warn.c:9:4: warning: implicit declaration of function ‘isgraph’ [-Wimplicit-function-declaration]
warn.c:10:4: warning: implicit declaration of function ‘isupper’ [-Wimplicit-function-declaration]
warn.c:9:8: warning: unused variable ‘g’ [-Wunused-variable]
$ 
```

这是 GCC 4.7.1（在 Mac OS X 10.7.5 上）的输出，带有我使用的标准编译选项集——在你的源代码上运行，存储在一个文件中`warn.c`。

# javascript - IE9 日期对象处理

> ID：13189113
> 
> 赞同：0
> 
> 时间：2012-11-02T04:00:04.653
> 
> 标签：javascript, internet-explorer, datetime

我有以下行，它在 FF 和 Chrome 中生成一个有效的时间戳：

```
new Date('2012 11 2 00:00:00 GMT').getTime(); 
```

但是，在 IE9 中，我得到了 NaN。要使这条线与跨浏览器兼容，需要做些什么不同的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:27:50.577

将字符串转换为日期的唯一可靠方法是手动解析它。您可以使用库，但无论您使用什么，都必须知道格式，因此自己动手通常会更简单。

对于“2012 11 2 00:00:00 GMT”（不符合 ISO8601，因此解析取决于实现），如果时区始终为 UTC，您可以使用：

```
function stringToDate(s) {
  var b = s.split(/\D/);
  return new Date(Date.UTC(b[0], --b[1], b[2], b[3], b[4], b[5]));
} 
```

生成的日期对象将具有基于客户端系统设置的时区偏移量，这应该是正确的，但可能不正确。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T04:03:09.050

您使用的日期格式应该符合 EMCAscript 规范，恰好 Firefox 和 Chrome 对解析更宽容。

格式应为：

```
YYYY-MM-DDTHH:mm:ss.sssZ 
```

所以试试这个：

```
new Date('2012-11-02T00:00:00.000Z').getTime() 
```

这在旧版本的 IE 中不起作用。如果您需要完全兼容，请参阅其他答案。

# python - 我可以在查询列表中使用 django raw

> ID：13189115
> 
> 赞同：0
> 
> 时间：2012-11-02T04:00:21.937
> 
> 标签：python, django

我只想知道，就像我们可以多次在查询列表上应用过滤器一样。

我可以像这样在查询列表上应用原始 sql

`models.Burn.active.filter(some filter).raw('custom sql')`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:11:16.547

不，你不能那样做。您只能[`raw`调用`manager`对象](https://docs.djangoproject.com/en/dev/topics/db/sql/#performing-raw-queries)。

由于`filter`返回一个 new `QuerySet`，您将无法调用`raw`它。

# nsis - 是否可以使用 nsis 脚本更改 bat 文件的值？

> ID：13189119
> 
> 赞同：0
> 
> 时间：2012-11-02T04:01:02.020
> 
> 标签：nsis

我已经在我的 Eclipse 中使用 nsis 插件成功构建了 nsi 脚本。我的项目中有 bat 文件。我在该 bat 文件中有 JVM_DLL、HOME_PATH 两个具有默认值的变量。我创建了一个文本框并将其作为该 JVM_DLL 的默认值和 HOME_PATH。如果我更改了应该反映在批处理文件中的文本框值。我尝试了以下代码

```
 ${ConfigWrite} "$INSTDIR\batch.bat" "JVM_DLL" "=$JVM_DLL" $R0
 ${configWrite} "$INTDIR\batch.bat" "HOME_PATH" "=$HOME_PATH" $R1 
```

但是更改的值不会反映在批处理文件中。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T17:56:07.130

如果您再次检查[NSIS 文档](http://anders_k.users.sourceforge.net/public/NSIS/2.46/Manual.html#configwrite)，您将在批处理文件示例中看到语法 is`"SET name=" "newvalue"`和 not `"name" "=newvalue"`。您还可以检查 $R0 和 $R1，它们会报告执行了哪个操作...

# iphone - iOS主视图正在响应子视图手势

> ID：13189120
> 
> 赞同：0
> 
> 时间：2012-11-02T04:01:05.870
> 
> 标签：iphone, ios, ipad, uiviewcontroller, uigesturerecognizer

我正在添加带有点击手势的子视图：

来自 UIView 类（masterButton）：

> ```
> [self addSubview:self.button];
> 
> // Add gesture recognizers
> [self addGestureRecognizer:[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(isTapped:)]]; 
> ```

视图控制器：

> masterButton *button = [[masterButton alloc] initWithFrontImage:img ];
> 
> [self.view addSubview:button];

我删除子视图：

> UIView * button= [controller.view viewWithTag:controller.tagButton]; [按钮 removeFromSuperview];

它触发播放音频文件的点击手势并且工作得很好，但是当我删除子视图并点击子视图所在的同一区域时，它会播放音频，就像子视图在那里一样。如果主视图没有响应子视图的任何手势，我该如何添加子视图？

我正在从 UIview 子类生成子视图，如果我尝试添加这样的手势：

> [self.button addGestureRecognizer:[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(isTapped:)]];

它不起作用。你们中的任何人都知道为什么吗？

我会非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T05:37:06.537

添加按钮喜欢

```
[self.button addGestureRecognizer:[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(isTapped:)]]

[self.button removeFromSuperview]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:13:40.047

您正在将 UITapGestureRecognizer 添加到主视图

将 UITapGestureRecognizer 添加到`self.button`而不是`self`

```
[self.button addGestureRecognizer:[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(isTapped:)]];
[self addSubview:self.button]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T04:46:33.093

只需将 Gesture 添加到 masterButton ，如下所示..

```
[self.button addGestureRecognizer:[[UITapGestureRecognizer alloc] initWithTarget:self action:@selector(isTapped:)]]; 
```

# rspec - RSpec 功能测试中的 Stub、Should_Receive 和 Before 块

> ID：13189122
> 
> 赞同：0
> 
> 时间：2012-11-02T04:02:19.707
> 
> 标签：rspec, functional-testing, stub

下面的代码示例显示了来自 The RSpec Book 中控制器规范一章的重构：

```
require 'spec_helper'

describe MessagesController do
  describe "POST create" do
    it "creates a new message" do
      message = mock_model(Message).as_null_object
      Message.should_receive(:new).
        with("text" => "a quick brown fox").
        and_return(message)
      post :create, :message => { "text" => "a quick brown fox" }
    end

    it "saves the message" do
      message = mock_model(Message)
      Message.stub(:new).and_return(message)
      message.should_receive(:save)
      post :create
    end

    it "redirects to the Messages index" do
      post :create
      response.should redirect_to(:action => "index")
    end
  end
end 
```

* * *

```
require 'spec_helper'

describe MessagesController do
  describe "POST create" do
    let(:message) { mock_model(Message).as_null_object }

    before do
      Message.stub(:new).and_return(message)
    end

    it "creates a new message" do
      Message.should_receive(:new).
        with("text" => "a quick brown fox").
        and_return(message)
      post :create, :message => { "text" => "a quick brown fox" }
    end

    it "saves the message" do
      message.should_receive(:save)
      post :create
    end

    it "redirects to the Messages index" do
      post :create
      response.should redirect_to(:action => "index")
    end
  end
end 
```

我有一些问题：

1) 我理解使用 let 块的好处，因为创建和保存的测试都使用 mock_model。但是，我不明白 before 块的好处。如果只有保存测试需要存根，为什么不将代码保留在测试中，而不是将其移动到在每个测试之前运行的 before 块？

2) 更根本的是，前块是否会干扰创建测试指定的内容？创建测试表明 Message 应该接收带有一些参数的新消息，然后使用 post :create 对其进行测试。但是，如果 before 块只是取消对 new 的调用，那不是短路了创建测试中的 should_receive 断言吗？也许我不明白 stub 和 should_receive 是如何交互的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T04:22:55.057

> 如果只有保存测试需要存根

典型的创建操作如下所示：

```
def create
  @message = Message.new(params[:message])
  if @message.save
    # ... etc. ... 
```

所以是的，`Message.new`需要为每个示例存根。

> 如果 before 块只是取消了对 new 的调用，那不是在创建测试中短路了 should_receive 断言吗？

实际上它的工作方式相反。before 块首先运行并存根`:new`，然后消息期望运行并替换存根。您可以删除`before`块并将存根放在其他两个示例的开头并获得相同的效果。

# objective-c - 在 AVFoundation 中创建 SMPTE 轨道

> ID：13189125
> 
> 赞同：2
> 
> 时间：2012-11-02T04:02:44.230
> 
> 标签：objective-c, macos, synchronization, avfoundation, avassetwriter

关于将 SMPTE 嵌入到我认为应该是 AVMediaTypeTimecode 类型的轨道中，我有几个广泛的问题。SMPTE 数据本身是 64 位 - 后跟 LTC 的 16 位同步信息，或 VITC 的 18 位和 8 位 CRC。

大多数消费者期望 SMPTE 数据的表示类型是什么？即在 FCP 或类似中，它是否会尝试解码 SMPTE 信息的 64、80 或 90 位帧？

AVFoundation 轨道表示的字节序是什么？

最后，您将使用什么特定机制将数据填充到轨道中？即，假设我们正在讨论一个采样率为 50khz 的文件和一个 25 fps 的非丢帧时间码（只是为了让数学变得简单）。假设我拼凑了 00:00:00:01 的 64、80 或 90 位表示。然后我会连续使用第一帧 2,000 次，然后通过 00:00:00:02 的表示转到。

假设我正在使用 AVAssetWriter 并在 AVAssetWriterInput 准备好时填充包含我的数据的 CMSampleBufferRef？

将不胜感激任何帮助。AVFoundation 文档仍然有点不稳定。看起来 32 位 quicktime 界面有一种几乎干净的方式来做到这一点。我的应用程序是 64 位的。

# reporting-services - ssrs 参数限制

> ID：13189129
> 
> 赞同：1
> 
> 时间：2012-11-02T04:02:59.550
> 
> 标签：reporting-services, parameters, ssrs-2008

有没有办法从下拉列表中可用的默认列表中更改 ssrs 参数的数据类型，它们是（文本、布尔值、日期/时间、整数、浮点数）？我的问题是日期/时间数据类型会切断时间，当我们需要它来保持将参数值传递给查询时的时间。如果有人遇到此问题或知道解决方案，我们将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-02T13:37:20.560

不幸的是，Reporting Services 使用午夜时间作为一种技巧来表明用户只对日期感兴趣。例如，如果您使用午夜时间作为日期/时间参数的默认值，您将只能在参数输入框中看到日期。如果您使用任何其他时间值，您将在参数输入框中看到日期和时间。

正如其他人所提到的，时间组件始终存在，只是有时会在午夜时被 SSRS 隐藏。Stack Overflow 上还有其他几个关于此的讨论，例如[这里](https://stackoverflow.com/questions/8492169/reporting-services-datetime-parameter-not-showing-the-time-part-when-its-midnig?lq=1)。

# linux - openX 广告服务器不显示横幅图像

> ID：13189130
> 
> 赞同：2
> 
> 时间：2012-11-02T04:03:07.907
> 
> 标签：linux, openx

openX 广告服务器不显示横幅图像。它只显示白框。带有插件的版本-openx.2.8.10。操作系统 - Ubuntu 12.04

如何设置横幅以显示图像。当我使用[路径](http://www.example.com/openx/www/images/xyxyx.gif)时。

它显示广告图片。在横幅属性中，我无法查看图像。它只是显示白框。

帮我。我挣扎了 2 天来解决这个问题。我没有得到任何线索。我该如何解决这个问题。谢谢。等待回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-12-30T18:07:15.717

我迟到了几年，但我在显示图像 openx.png 时遇到了类似的问题。我将名称更改为 open.png 并且效果很好。

尝试将路径从： [http](http://www.example.com/openx/www/images/xyxyx.gif) ://www.example.com/openx/www/images/xyxyx.gif 更改 为 [http://www.example.com/open/www/images/xyxyx.gif](http://www.example.com/open/www/images/xyxyx.gif)

# php - MySQL 查询语句使用 SUM() 转换为 Codeigniter 活动记录样式查询语句

> ID：13189132
> 
> 赞同：0
> 
> 时间：2012-11-02T04:03:08.793
> 
> 标签：php, mysql, codeigniter, activerecord

我试图找出转换这个 mysql 查询的最佳方法

```
SELECT
        SUM(invite.friendID = $mID AND invite.decidedwhen = '0000-00-00 00:00:00' AND evnt.ends >= '$event_ts' and invite.isactive = 0 and evnt.isactive = 0) AS invites_undecided,
        SUM(invite.friendID = $mID AND invite.decidedwhen != '0000-00-00 00:00:00' AND invite.yes = 1 AND evnt.ends >= '$event_ts' and invite.isactive = 0) and evnt.isactive = 0 AS invites_yes,
        SUM(invite.friendID = $mID AND invite.decidedwhen != '0000-00-00 00:00:00' AND invite.no = 1 AND evnt.ends >= '$event_ts' and invite.isactive = 0 and evnt.isactive = 0) AS invites_no,
        SUM(invite.friendID = $mID AND invite.decidedwhen != '0000-00-00 00:00:00' AND invite.maybe = 1 AND evnt.ends >= '$event_ts' and invite.isactive = 0 and evnt.isactive = 0) AS invites_maybe
FROM user_event_invite AS invite
JOIN user_event AS evnt ON evnt.eID = invite.eID 
```

到使用 Codeigniters 活动记录格式的东西。例如

```
$this->db->select()
  ->from('user_event')
  ->... something? 
```

标准的 mysql 语句工作得很好。但是以坚持统一的名义，我想使用活动记录。有什么办法吗？我找不到任何东西`SUM()`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T04:29:11.980

（更多的是评论而不是答案，因为我没有测试过它；但它可能仍然有帮助）

有一个`$this->db->select_sum();`用于活动记录的功能，并且（这是我不确定的一点）您可能可以使用方法链。所以这里有一些东西可以尝试。

第 1 阶段是将常见的东西剥离到 WHERE 中。如果 WHERE 被索引，它会加快速度。这会给你（括号也固定 - 你的 SQL 有错误）

```
SELECT
    SUM(invite.decidedwhen = '0000-00-00 00:00:00') AS invites_undecided,
    SUM(invite.decidedwhen != '0000-00-00 00:00:00' AND invite.yes = 1 ) AS invites_yes,
    SUM(invite.decidedwhen != '0000-00-00 00:00:00' AND invite.no = 1) AS invites_no,
    SUM(invite.decidedwhen != '0000-00-00 00:00:00' AND invite.maybe = 1) AS invites_maybe
FROM user_event_invite AS invite
   JOIN user_event AS evnt ON evnt.eID = invite.eID
WHERE invite.friendID = $mID  AND evnt.ends >= '$event_ts' and invite.isactive = 0 AND evnt.isactive = 0 
```

此外，如果您可以通过sayign 接受来简化，使yes，no，也许都是排他性的，那么您也可以去掉“decidedwhen”以进一步简化。（理想情况下，您只需使用“COUNT”并减去其余部分，但不清楚如何在活动记录的一个查询中执行此操作）。

```
SELECT
    SUM(invite.decidedwhen = '0000-00-00 00:00:00') AS invitees_undecided,
    SUM(invite.yes = 1 ) AS invites_yes,
    SUM(invite.no = 1) AS invites_no,
    SUM(invite.maybe = 1) AS invites_maybe
FROM user_event_invite AS invite
   JOIN user_event AS evnt ON evnt.eID = invite.eID
WHERE invite.friendID = $mID  AND evnt.ends >= '$event_ts' AND invite.isactive = 0 AND evnt.isactive = 0 
```

现在将其用于活动记录上的方法链：

```
$this->db->select_sum('invite.decidedwhen = '0000-00-00 00:00:00', 'invite_undecided')
  ->select_sum('yes', 'invite_yes')
  ->select_sum('no', 'invite_no')
  ->etc
  ->from('user_event_invite')
  ->join('user_event', 'user_event.eID=user_event_invite.eID)
  ->where('friendID', '$mID')
  ->where('user_event.ends >=', $event_ts)
  -> etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:24:25.227

```
 Like that you can write query :
    ==================================
     $query="SELECT SUM(case when invite.friendID = " . $mID ." AND 
     invite.decidedwhen = '0000-00-00 00:00:00' AND evnt.ends >= '" . $event_ts . "'
     and invite.isactive = 0 and evnt.isactive = 0) AS invites_undecided,...       
     FROM user_event_invite AS invite
      left outer JOIN user_event AS evnt ON evnt.eID = invite.eID" 
```

# javascript - 什么是“.toJSON”以及如何“撤消”或“反转”它

> ID：13189133
> 
> 赞同：0
> 
> 时间：2012-11-02T04:03:13.183
> 
> 标签：javascript, javascript-framework, kendo-ui, gridview-sorting

我正在做一个项目，我们在前端使用 KENDOUI 和 jQuery/Javascript 编码来管理我们不能用框架本身做的任何事情。

我有一个需要客户端排序的 KENDO Grid，这就是我想要做的 -

```
 var tPositiondata = _DetailsGridDS.data();
    // sort position datasource in order to bind treeview
    tPositiondata = tPositiondata.toJSON().sort(function (a, b) {
        {
            if ((a.DisplayText.localeCompare(b.DisplayText)) < 0) { return -1; }
            else if ((a.DisplayText.localeCompare(b.DisplayText)) > 0) { return 1; }
        }
    });

    //re-initialize the grid with new datasource
    $("#DivDetailsTable").empty();
    $("#DivDetailsTable").kendoGrid({
        autobind: false,
        scrollable: true,
        height: 333,
        pageSize: 10,
        dataSource: tPositiondata,
        dataBound: OnReceivedDataFromDatasource,
        columns: [
    {
        field: "UniqueValue",
        title: _ColumnHeaderUniqueValue
    },
    {
        //field: "DisplayTextTranslation",
        title: _ColumnHeaderDisplayText,
        template: '#= GetTranslation(Id) #'
    },
    {
        field: "CodeAttribute",
        title: _ColumnHeaderCodeAttribute
    },
    { command: [{ text: _ButtonEdit, className: "k-button k-button-icontext buttonEdit k-grid-Edit" }, { text: _ButtonDelete, className: "k-button k-button-icontext buttonDelete k-grid-Delete" }, { text: "&nbsp;", className: "buttonUp", width: 15 }, { text: "&nbsp;", className: "buttonDown", width: 15}], text: "", title: "&nbsp;", width: 230 }
    ],
        editable: "inline"
    }); 
```

现在的问题是，变量“tPositionData”不能重新分配给“_DetailsGridDS”，因为它们显然不是相同的类型或格式。因此，我的全局变量“_DetailsGridDS”没有更新的排序数据。如果我在代码中的其他地方引用它，那么我没有排序数据。

有人可以帮我在排序后“撤消”/“反转” .toJSON 调用，以便我可以将其重新分配给 _DetailsGridDS 或者有人可以建议一种解决方法，以便我的全局变量始终使用最新的排序数据进行更新?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:04:58.420

Sandeep，你为什么不能使用内置排序功能？您能否解释一下如何对数据进行排序。

例如。将“可排序”添加到您的剑道网格定义和您对排序感兴趣的列中。

```
 $("#DivDetailsTable").kendoGrid({
    autobind: false,
    scrollable: true,
    sortable: {   mode: "single",
              allowUnsort: false }, 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-08T06:01:44.417

非常感谢所有的提示。最终我的解决方案是这样的：

```
function SortGrid() {
if ($("#DivDetailsTable").data("kendoGrid") != undefined) {
    if ($("#inputSortByValueName").is(":checked")) {
        $("#DivDetailsTable").data("kendoGrid").dataSource.sort({ field: "DisplayText", dir: "asc" });
    }
    else {
        $("#DivDetailsTable").data("kendoGrid").dataSource.sort({ field: "DisplaySequence", dir: "asc" });
    }
} 
```

}

这对我来说很好。再次感谢你 ：）

# java - Install4j - 有没有办法让程序组匹配媒体安装目录值？

> ID：13189135
> 
> 赞同：1
> 
> 时间：2012-11-02T04:03:26.060
> 
> 标签：java, install4j

具体来说，我有多个媒体文件，我想自定义程序组名称以匹配媒体文件安装目录。我知道你可以让它与媒体文件的名称匹配，但这有问题，因为我有同一个媒体文件的 32 位和 64 位版本，因此很难阅读媒体配置屏幕中的内容。换句话说，我的屏幕上有两个媒体文件。

如果我可以只使用我覆盖的安装目录值，或者以其他方式获取媒体文件中的特定值，那就太好了！

**更新：**我也只是尝试使用以下似乎不起作用的预激活脚本：

```
if(context.getMediaFileId().equals("mediaFileID#1"))
    context.setVariable("sys.programGroup.name", "MyCustomGroupName");
else if(context.getMediaFileId().equals("mediaFileID#2"))
    context.setVariable("sys.programGroup.name", "MyCustomGroupName2");
else 
    context.setVariable("sys.programGroup.name", "Not even this works..."); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:37:23.690

问题是变量名。我在以下 StackOverFlow 响应中使用了 Ingo 指示的旧名称：[install4j - 更新程序组名称](https://stackoverflow.com/questions/9573133/install4j-updating-program-group-name)，现在它应该是 sys.programGroupName 而不是 sys.programGroup.name

# oop - 使用 extend() 和 include() 函数向类添加属性

> ID：13189138
> 
> 赞同：4
> 
> 时间：2012-11-02T04:03:45.610
> 
> 标签：oop, javascript, javascript-framework

谁能向我解释以下代码中发生了什么？我理解了 include() 和 exclude() 的含义，但是我们什么时候以及为什么要使用特定的函数呢？

```
var Class = function () {
    var klass = function () {
        this.init.apply(this, arguments);
    };

    klass.prototype.init = function () {};

    klass.fn = klass.prototype;
    //shortcut to access class
    klass.fn.parent = klass; //where do we use it?

    //adding class properties
    klass.extend = function (obj) {
        var extended = obj.extended; //what is happening here?
        for (var i in obj) {
            klass[i] = obj[i];
        }
        if (extended) extended(klass) //didn't understand this part
    };
    //adding instance properties
    klass.include = function (obj) {
        var included = obj.included; //??
        for (var i in obj) {
            klass.fn[i] = obj[i]; //??
        }
        if (included) included(klass) //??
    };
    return klass;
};
var Person = new Class; // is this same as: var Person = new Class(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T02:13:51.717

他是从[Alex MacCaw 的 Javascript Web Applications 获得的](https://rads.stackoverflow.com/amzn/click/com/144930351X)。目的是演示实现 Javascript 类，并使用适当的模块化和继承。作者的解释很抽象，并没有具体说明是否使用了 Prototype.js 等库。

我认为这个问题的一个很好的补充是：

*   这一切看起来都像原生 Javascript 吗？
*   是否扩展/扩展和包含/包含 Javascript 的本机方法？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-22T21:01:54.700

在您的问题块作者给我们这部分之后：

```
Person.extend({
    extended: function(klass) {
        console.log(klass, " was extended");
    }
}); 
```

因此，如果我们在参数对象中有一个“扩展”属性 - 我们称之为。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-20T11:06:39.437

想提供我是如何理解的。我会将其分为两部分：定义和实现（或使用）。按照您上面引用的定义，我将添加用法作为此代码：

```
var Person = new Class;

Person.extend({
    find: function(id) { /* definition */
    },
    exists: function(id) { /* definition */
    }
});
Person.include({
    save: function(id) { /* definition */
    },
    destroy: function(id) { /* definition */
    }
});

var person_e = Person.find(1);
var person_e = Person.exists(2);

var person = new Person;
person.save();
person.destroy(2); 
```

请参阅与先前代码连续的此代码。我会尝试列举发生了什么：

1.  类被设置为保存函数定义。它还没有执行——所以 Class 指向内存中写入函数定义的那个块。
2.  var Person = new Class -> 这等价于'new Class()' - 所以会执行Class，并将结果分配给Person。由于它是使用“new”关键字调用的，因此“this”被分配给 Class 的新实例。
3.  现在，Class() 内部发生了什么？(i) klass 设置为函数（其工作是在调​​用时初始化“this”）-但尚未执行。(ii) 在 klass 的原型上定义了一个 init 属性；init 属性设置为一个空函数（稍后我们将根据我们定义的类来覆盖它） (iii) 一些更花哨的东西，扩展并包含 klass 上的属性 (iv) 并返回 klass -> klass 在此保存函数定义时间点。因此，调用“new Class()”会返回一个名为“klass”的函数，该函数在调用时会对“this”执行初始化。
4.  此时的人，用外行的话来说，可以被认为是持有'function klass()'。所以，Person.extend 可以认为是去klass.extend 的部分代码。klass.extend 是一个需要对象的函数。该对象具有键值对，键是实用程序/函数的名称，值是函数定义。在 'for' 语句中，我们执行 (var i in obj) - 所以 'i' 包含键 - 当我们执行 'klass.fn[i]' 时，我们的意思是 klass.prototype.save 或 klass.prototype.destroy - 因为下标[i] 与点表示法（命名空间）相同。我们知道，添加到 klass.prototype 的方法可用于 Person 的实例，而不是作为属性添加到 Person 上。
5.  我们调用 new Person() - 实际上，我们正在执行 klass，因为此时 Person 持有 klass，并且由于附加了 new，因此传递了“this”。现在，在 'klass' 内部，初始化发生在 'this' 的 init 属性上（通过应用形式）-> 而我们刚刚覆盖的这个 'init' 属性。

    klass.fn.parent = 类；//我们在哪里使用它？//不知道在哪里。

# python - 如何删除模板中 Django 自定义表单的某些字段产生的换行符？

> ID：13189141
> 
> 赞同：2
> 
> 时间：2012-11-02T04:04:01.170
> 
> 标签：python, django

自定义表格：

```
CALLMODE_CHOICES = ( 
    (1,'a'), 
    (2,'b'), 
    (3,'c'), 
) 
class EcmNoneTelForm(forms.Form): 
    callmode = forms.ChoiceField(choices=CALLMODE_CHOICES, required=False) 
```

模板：

```
{{form.callmode}} 
```

每行都有换行符：

```
<select name="callmode" id="id_callmode"> 
<option value="1">a</option> 
<option value="2">b</option> 
<option value="3">c</option> 
</select> 
```

我想将所有内容连续显示，因为我想将 {{form.callmode}} 与 js 脚本中的其他字符串结合起来：

```
var str = "<form>" + "{{form.callmode}}" + "</form>"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T04:25:39.580

假设您的意思是您希望生成的 HTML 没有换行符，我认为您可以使用[`spaceless`](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#spaceless)模板标签来做到这一点：

```
{% spaceless %}
    <p>
        <a href="foo/">Foo</a>
    </p>
{% endspaceless %} 
```

此示例将返回此 HTML：

```
<p><a href="foo/">Foo</a></p> 
```

# android - 应用程序可以在模拟器上运行，但不能在手机上运行

> ID：13189142
> 
> 赞同：1
> 
> 时间：2012-11-02T04:04:04.697
> 
> 标签：android, database, encoding, android-emulator

我正在构建一个 android 测验应用程序，它从 data.txt 中获取问题，data.txt 中的编码是 "utf-8" 。但我的 android 测验应用程序可以在模拟器上运行，但它在我的手机上不起作用。当我将编码“utf-8”更改为编码“ANSI”时，这个应用程序可以在我的手机上运行。我怎样才能运行它编码“utf-8”？请帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:58:55.597

设备不支持，检查任何其他设备，如果出现问题，则放置错误或 logcat 报告

# mysql - mysql创建表时出现1064语法错误

> ID：13189147
> 
> 赞同：0
> 
> 时间：2012-11-02T04:04:51.030
> 
> 标签：mysql, syntax-error, create-table

```
drop table member cascade constraints;
create table member (
    mid varchar2(10) not null,
    email varchar2(40) not null,
    fname varchar2(20) not null,
    lname varchar2(20) not null,
    street varchar2(50) not null,
    city varchar2(30) not null,
    state varchar2(20) not null,
    zip number(5) not null,
    phone varchar2(12),
    password varchar2(20),
    primary key (mid)
); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T04:11:19.003

好吧，Oracle 的剪切和粘贴并不总是很好。

`VARCHAR2`在 MySQL 中不作为数据类型存在。
`NUMBER`也没有。
`CASCADE CONSTRAINTS`似乎也不能作为修饰符`DROP TABLE`。

作为 的替代`CASCADE CONSTRAINTS`，您可以使用一条语句删除多个表`DROP TABLE IF EXISTS a,b,c`。不完全一样，但和它一样好。

你想要的可能是这样的；

```
drop table if exists member;

create table member (
  mid varchar(10) not null,
  email varchar(40) not null,
  fname varchar(20) not null,
  lname varchar(20) not null,
  street varchar(50) not null,
  city varchar(30) not null,
  state varchar(20) not null,
  zip numeric(5) not null,
  phone varchar(12),
  password varchar(20),
  primary key (mid)
); 
```

[SQLfiddle 在这里](http://sqlfiddle.com/#!2/09805)。

# jquery - Jquery 相当于 php 的 FILTER_VALIDATE_EMAIL 是什么

> ID：13189152
> 
> 赞同：0
> 
> 时间：2012-11-02T04:05:06.260
> 
> 标签：jquery, regex, validation, email

> **可能重复：**
> [在 Javascript 中验证电子邮件地址？](https://stackoverflow.com/questions/46155/validate-email-address-in-javascript)
> [jQuery电子邮件验证？](https://stackoverflow.com/questions/2507030/jquery-email-validation)

我想使用 filter_Validate_email 来验证 email.val() 而不是下面的内容。

```
var email = $("#email");
var emailReg = /^[A-Z0-9._%+-]+@([A-Z0-9-]+\.)+[A-Z]{2,4}$/i;

   if (!emailReg.test(email.val())) {
        email.addClass("error").focus();

    } else {

        email.removeClass("error");
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:36:50.157

[jQuery 验证插件](http://bassistance.de/jquery-plugins/jquery-plugin-validation/)简单地保护了很多工作。

# python - AttributeError: 'str' 对象没有属性 'sub' Python 代码

> ID：13189155
> 
> 赞同：4
> 
> 时间：2012-11-02T04:05:18.747
> 
> 标签：python, regex, attributeerror

在为即将到来的期末考试学习时遇到此错误，需要了解它为什么不起作用。这是代码。

```
morning_agenda = "At 9.00AM the project team will assemble. The first topic will be fixing the bug in program product.py. We'll break for coffee at 10.30\. Work will then continue on improving display.html until 12.30PM."

print morning_agenda

morning_agenda.sub('([0-9]+)\.([0-9]+)', r'\1:\2', morning_agenda)

print morning_agenda 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-02T04:07:01.660

`re.sub`是 re 模块中的函数，而不是字符串的方法。

```
import re
morning_agenda = re.sub('([0-9]+)\.([0-9]+)', r'\1:\2', morning_agenda) 
```

# javascript - 使用javascript获取托管页面的服务器的IP地址

> ID：13189161
> 
> 赞同：0
> 
> 时间：2012-11-02T04:06:20.330
> 
> 标签：javascript

> **可能重复：**
> [我可以从 javascript 中查找主机名的 IP 地址吗？](https://stackoverflow.com/questions/102605/can-i-lookup-the-ip-address-of-a-hostname-from-javascript)

我的页面 test.html 托管在服务器上。现在，当我从任何计算机访问 test.html 时，test.html 应该只显示托管页面的服务器的 IP 地址，而不是请求计算机的 IP 地址。

有没有办法用 JavaScript 做到这一点？

# internet-explorer - 是否可以使用 IE 条件注释进行重定向？

> ID：13189162
> 
> 赞同：1
> 
> 时间：2012-11-02T04:06:21.117
> 
> 标签：internet-explorer, redirect, conditional-comments

我有一个简单地卡在 IE 中的启动页面，创建一个解决方法需要大量的 jQuery。有什么方法可以使用 IE 的条件注释跳过启动页面，并重定向到主页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T05:27:25.903

在条件注释中进行元刷新：

```
<meta http-equiv="refresh" content="0;url=mainpage-url"/> 
```

# git - 使用预建库和从源文件制作自己的库安装 OpenCV 有什么区别？

> ID：13189164
> 
> 赞同：4
> 
> 时间：2012-11-02T04:06:46.433
> 
> 标签：git, opencv, github, cmake, git-bash

我需要 2 知道安装 OpenCV 之间的区别

**1\. 通过使用预建库？**

**2\. 通过从源文件制作自己的库？**

当我们做第一个时，我们只需要下载 OpenCV 新版本并将其解压缩，然后使用 CMake 使用 Visual Studio 对其进行配置。

**但是为什么我们要使用 TortoiseGit hub 下载 OpenCV 库和其他库**（这需要很多时间）？这样做有什么特别的好处吗？

你能回答这些问题吗...

感谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T10:04:56.620

通过自己构建库，您可以自定义构建——例如，指定不同的依赖项（例如 QT 的本地版本）、功能（例如 CUDA）或选项（例如特定于体系结构的优化）。如果这些事情对您来说都不重要，那么安装预构建的库会更方便。

# lambda - 带有 flex 和 bison 的 END OF FILE 令牌（仅在没有它的情况下有效）

> ID：13189167
> 
> 赞同：1
> 
> 时间：2012-11-02T04:06:57.733
> 
> 标签：lambda, bison, eof, flex-lexer, lambda-calculus

好的，这是一个奇怪的问题，因为我这里的东西按我想要的方式工作。我正在做的是为 lambda 演算表达式编写解析器。因此，表达式可以是以下四种情况之一：

*   多变的
*   持续的
*   （表情表达）
*   （lambda 变量。表达式）

现在如您所见，最后两个表达式中包含表达式。我试图做的是确定整体表达式，以便我可以报告它是哪种类型。例如，表达式 ((lambda x.(f1 x)) 100) 是一个整体组合。我的想法是当它到达文件末尾时从 flex 返回一个 END 令牌。我的代码如下所示：

```
overallexpr: combo END { printf(" The overall expression is a combination\n"); } |
         constant END { printf(" The overall expression is a constant\n"); } |
         VARIABLE END { printf(" The overall expression is a variable\n"); } |
         l_expr END { printf(" The overall expression is a lambda expression\n"); }
;

expr: combo | constant | VARIABLE | l_expr
;

combo: LPARENS expr expr RPARENS
;

constant: FUNCTION | NUMBER
;

l_expr: LPARENS LAMBDA VARIABLE DOT expr RPARENS
; 
```

如果我将那个 END 标记放在像组合 END 一样的整体表达式中的四种可能性之后，而不是仅仅组合，它就行不通。但是解析器会收到 END 令牌。如果我在读取时打印每个标记（带有变量、函数和数值），它看起来像这样

```
LPARENS  LPARENS  LAMBDA  VARIABLE x  DOT  LPARENS  FUNCTION f1  VARIABLE x  RPARENS  RPARENS  NUMBER 100  RPARENS  END Sorry, Charlie 
```

可能很难说，但这应该有效。该组合以 RPARENS 结尾，并且紧随其后有一个 END 标记。但它不会作为一个整体表达式进行评估。但是，如果我取出 END 令牌，它似乎每次都有效。即使overallexpr 和expr 的产生完全相同，我总是会打印出整体消息。输出与最后一个相同，只是它在 END 标记之前显示“整体表达式是一个组合”。所以我的问题是为什么？野牛总是先尝试早期的作品吗？为什么它可以在没有 END 而没有 END 的情况下工作？特别是因为您可以在它说它是一个组合之后立即看到 END 令牌。我只是想更好地了解 Bison 的工作原理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:13:13.863

在没有看到您的代码的情况下很难判断这里发生了什么（而且我真的不想涉足它，无论如何），但我会冒险猜测：我的猜测是您正在替换标准 yylex EOF使用您的 END 令牌指示（即返回 0）。如果野牛解析器从未看到 EOF，则它永远不会完成解析。

实际上，野牛自己创造了一个特殊的产品：

```
__parse__: __start__ $; 
```

**parse**是（实际上是未命名的）产生式，并且`__start__`是您声明的任何内容`%start`（或第一个非终端，如果您没有明确声明它）。在你的情况下，我想它是`overallexpr`. `$`是通常用于表示 EOF 标记的符号。

现在，野牛解析器操作何时发生？尽管在某些情况下，它们可能会发生在您认为会发生的地方（即紧接在生产中的最后一个标记之后），但它们通常不会发生，直到解析器偷看下面的标记。允许这样做；这就是为什么它被称为`LALR(1)`解析器：`1`它是在决定如何处理已经获得的令牌之前允许查看的未来令牌的数量。它几乎总是需要这些信息，并且经常像它一样工作，即使在你和我看来它不需要。

所以很可能，解析器实际上不会进行`overallexpr`归约——或者换句话说，它不会执行与`overallexpr`规则相关的动作——直到它说服自己文件结束标记是下一个标记.

现在，如果您将`END`令牌排除在规则之外并且词法分析器实际上返回 EOF，那么野牛在看到 EOF 时会进行归约。

# c - 与用户创建的结构不兼容的类型

> ID：13189175
> 
> 赞同：0
> 
> 时间：2012-11-02T04:08:05.283
> 
> 标签：c, pointers, data-structures, error-handling, typedef

> **可能重复：**
> [“来自不兼容指针类型的分配”警告](https://stackoverflow.com/questions/8755637/assignment-from-incompatible-pointer-type-warning)

我有两个结构，一个建立在另一个之上。我希望将它们一起使用来为有向加权图创建一个邻接表。

这是我的结构：

```
typedef struct{
        int v;
        int edgeWeight;
        struct adjEdge * next;
}adjEdge;

typedef struct{
        int v;
        int weight;
        struct  adjEdge *adj;
}vertex; 
```

所以基本上顶点 adj 将是空的，除非有一个连接到另一个顶点，这是 adjEdge 结构函数。

我的问题是，当我将 adjEdge 分配给顶点结构时，出现错误：

```
bfs.c:75: warning: assignment from incompatible pointer type 
```

这是代码的一部分。查看它以查看错误实际被抛出的位置

```
while((fscanf(fp, "%d %d %d", &u, &v, &w)) != EOF)
{
    vertexArray[u-1].v = u;

    adjEdge * newEdge;
    newEdge->v = v;
    newEdge->edgeWeight = w;
    newEdge->next = NULL;

    if(vertexArray[u-1].adj = NULL)
    {
        vertexArray[u-1].adj = newEdge; //error
    }
    else
    {
        adjEdge * traverse = vertexArray[u-1].adj; //error
        while(traverse->next != NULL)
        {
            traverse = traverse->next; //error
        }
        traverse->next = newEdge;  //error
    }
} 
```

我认为一旦在我的结构中声明我可以利用这样的任务？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T05:13:54.857

问题在于您定义结构的方式。如下定义它们并消除警告。

```
typedef struct adjEdge_{
        int v;
        int edgeWeight;
        struct adjEdge_ * next;
}adjEdge;

typedef struct vertex_{
        int v;
        int weight;
        struct  adjEdge_ *adj;
}vertex; 
```

希望这可以帮助！

# ruby - 尝试用 Ruby 编写简单的 DSL

> ID：13189177
> 
> 赞同：0
> 
> 时间：2012-11-02T04:08:17.187
> 
> 标签：ruby

我希望能够编写如下代码：

```
MyModule::MyClass.configure do |item|
  item.var1 = 'dsads'
  item.var2 = 'dsadsa'
  item.var3 = 'fdsfdsfd'
end 
```

好吧，我在其中定义了一个模块和一个类：

```
module MyModule
 class MyClass
 end
end 
```

......我应该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T04:15:17.053

如果您想进行配置，那么我建议您使用一个`Singleton`类，如下所示：

```
require 'singleton'
module MyModule
 class MyClass
   include Singleton
 end
end 
```

然后你需要定义这个`configure`方法：

```
require 'singleton'
module MyModule
 class MyClass
   include Singleton
   def self.configure
     yield(self)
   end
 end
end 
```

`yield`将在类的上下文中评估块，这意味着在块对象上调用的任何方法都将在类对象上调用。

然后，对于您在块内调用的每个方法`configure`，您都需要在类中定义相应的方法。您可以通过手动定义方法来做到这一点：

```
 class MyClass
   def self.var1=(value)
     @var1 = value
   end

   def self.var1
     @var1
   end 
 end 
```

或者，您可以使用`attr_accessor`：

```
 class MyClass
   class << self
     attr_accessor :var1
   end
 end 
```

要取回值，只需执行以下操作：

```
 MyMoudle::MyClass.var1 
```

如果您不想使用单例，则将表示的类更改`MyClass`为模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:16:44.393

您应该编写将块作为参数的类方法，并使用新创建的项目实例生成它。像这样的东西

```
class MyClass
  def self.configure
    if block_given?
      item = ItemClass.new
      yield(item)
    end
  end
end 
```

# android - 数组字符串声明

> ID：13189179
> 
> 赞同：25
> 
> 时间：2012-11-02T04:08:28.527
> 
> 标签：android, arrays

我有一个令人沮丧的问题，这很容易。java中的数组似乎令人沮丧地不直观。

我有一个名为 title 的字符串数组，它有几个标题

这是数组的一部分

```
 private String[] title = {
        "Abundance",
        "Anxiety",
        "Bruxism",
        "Discipline",
        "Drug Addiction"
    } 
```

这部分看起来不错，因为代码编译并运行得很好，现在我想基于这个数组创建另一个数组。新数组将成为静态文本，与该数组中的数据连接，然后是更多静态文本。

我定义了两个静态字符串

```
 String urlbase = "http://www.somewhere.com/data/";
    String imgSel = "/logo.png"; 
```

所以我添加了新数组的声明

```
 String[] mStrings; 
```

然后我创建一个基本的 for 循环来迭代并创建新数组的元素

```
 for(int i=0;i<title.length;i++) {
        mStrings[i] = urlbase + title[i].replaceAll("[^a-zA-Z]", "").toLowerCase() + imgSel;
    } 
```

循环获取数组值并去除非 alpha 字符并将其变为小写

吸毒成瘾

变成

吸毒成瘾

我想结束这样的事情

```
mStrings[0]="http://www.somewhere.com/data/abundance/logo.png"
mStrings[1]="http://www.somewhere.com/data/anxiety/logo.png"
mStrings[2]="http://www.somewhere.com/data/bruxism/logo.png"
mStrings[3]="http://www.somewhere.com/data/discipline/logo.png"
mStrings[4]="http://www.somewhere.com/data/drugaddiction/logo.png" 
```

我在声明 mStrings 时尝试了几种不同的尝试，但是当我将其排除在外时，所有尝试都不正确 Eclipse 建议这样做

```
 String[] mStrings; 
```

现在这看起来应该相当简单和正确，但是当我在它之后输入任何内容时，我收到一个错误提示

```
 Syntax error on token ";", { expected after this token 
```

因为它与另一个数组是一对一的，所以我在声明中尝试了这个，但它也失败了

```
 String[] mStrings[title.length]; 
```

只是给它一个数量

我认为错误出现在声明中的某个地方，但我似乎找不到任何清楚说明它的文档。

似乎它不仅期望声明而且还期望加载数组，这是我不想要的，但我也尝试用三个元素加载它，但它仍然无法正常工作

正如我所说，虽然我想将它加载到 for 循环中

任何帮助将不胜感激。

我确实尝试设置数组大小但得到了同样的错误

这是确切的代码

也许在别处

```
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.ListView;

public class MainActivity extends Activity {

ListView list;
LazyAdapter adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    list=(ListView)findViewById(R.id.list);
    adapter=new LazyAdapter(this, mStrings);
    list.setAdapter(adapter);

    Button b=(Button)findViewById(R.id.button1);
    b.setOnClickListener(listener);
}

@Override
public void onDestroy()
{
    list.setAdapter(null);
    super.onDestroy();
}

public OnClickListener listener=new OnClickListener(){

    public void onClick(View arg0) {
        adapter.imageLoader.clearCache();
        adapter.notifyDataSetChanged();
    }
};

private String[] title = {
        "Abundance",
        "Anxiety",
        "Bruxism",
        "Discipline",
        "Drug Addiction"
}

String urlbase = "http://imobilize.s3.amazonaws.com/giovannilordi/data/";
String imgSel = "/logo.png";    
String[] mStrings = new String[title.length]; 
```

此处显示错误

```
for(int i=0;i<title.length;i++) {
    mStrings[i] = urlbase + title[i].replaceAll("[^a-zA-Z]", "").toLowerCase() + imgSel;
} 
```

[![eclipse中的错误截图](../Images/8b749e09fffe72c8e7bbd51944c6d2e4.png)](https://i.stack.imgur.com/FeUSx.png)
[（来源：[imobilizeit.com](http://www.imobilizeit.com/_errorshot/errorshot.png)）]

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-11-02T04:10:59.003

采用：

```
String[] mStrings = new String[title.length]; 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-11-02T04:25:39.717

你没有初始化你的`String[]`. 您需要按照@TrầnSĩLong 的建议使用确切的数组大小对其进行初始化，或者使用 a`List<String>`然后转换为 a `String[]`（以防您不知道长度）：

```
String[] title = {
        "Abundance",
        "Anxiety",
        "Bruxism",
        "Discipline",
        "Drug Addiction"
    };
String urlbase = "http://www.somewhere.com/data/";
String imgSel = "/logo.png";
List<String> mStrings = new ArrayList<String>();

for(int i=0;i<title.length;i++) {
    mStrings.add(urlbase + title[i].toLowerCase() + imgSel);

    System.out.println(mStrings[i]);
}

String[] strings = new String[mStrings.size()];
strings = mStrings.toArray(strings);//now strings is the resulting array 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-02T04:14:38.120

声明数组大小将解决您的问题

```
 String[] title = {
            "Abundance",
            "Anxiety",
            "Bruxism",
            "Discipline",
            "Drug Addiction"
        };
    String urlbase = "http://www.somewhere.com/data/";
    String imgSel = "/logo.png";
    String[] mStrings = new String[title.length];

    for(int i=0;i<title.length;i++) {
        mStrings[i] = urlbase + title[i].toLowerCase() + imgSel;

        System.out.println(mStrings[i]);
    } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-04T04:50:53.130

我认为解决这个问题的开始是这样一个事实，即 for 循环或任何其他函数或动作的使用不能在类定义中完成，但需要包含在方法/构造函数/块定义中班级。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-11-02T09:48:35.707

正如 Trần Sĩ Long 建议的那样，使用

```
String[] mStrings = new String[title.length]; 
```

并用适当的括号替换字符串连接。

```
mStrings[i] = (urlbase + (title[i].replaceAll("[^a-zA-Z]", ""))).toLowerCase() + imgSel; 
```

试试这个。如果由于连接而出现问题，将使用适当的括号解决。希望能帮助到你。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-11-02T04:14:44.417

你可以像下面这样写。查看此[线程中的语法指南](https://stackoverflow.com/questions/5387643/java-array-initialization-syntax)

```
AClass[] array;
...
array = new AClass[]{object1, object2}; 
```

如果您发现数组烦人，最好使用[ArrayList](http://developer.android.com/reference/java/util/ArrayList.html)。

# hadoop - 以其他用户身份运行 pig 作业

> ID：13189181
> 
> 赞同：0
> 
> 时间：2012-11-02T04:08:39.130
> 
> 标签：hadoop, apache-pig

所以这是一种情况，我有一个未配置 Kerberos 安全性和工作站的 hadoop 集群。Hadoop 集群运行 Cloudera CDH3 发行版。集群上的数据全部存储在“hdfs”用户下。

工作站是运行嵌入 PIG 客户端的复杂软件的 linux 或 macos 工作站。PIG 客户端连接到集群以运行分析作业。

这是一个问题。集群和工作站上的用户帐户不同，hadoop 集群中的所有数据都存储在“hdfs”主目录用户下，工作站拥有完整的用户帐户集。是否可以告诉 PIG 在不同的用户帐户下执行作业。当前 pig 尝试使用当前登录到工作站的用户帐户执行作业。该作业实际运行，但它无法访问数据，因为脚本使用相对于 HDFS 用户主目录的路径。

我知道，当没有为集群配置安全性时，用户名只是通过作业配置 .XML 传递，但由于某种原因，我无法弄清楚如何将我需要的用户名强制到该 XML 文档中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-31T07:10:13.043

尝试设置“HADOOP_USER_NAME”环境变量。
更多细节可以在[类似问题](https://stackoverflow.com/questions/11041253/set-hadoop-system-user-for-client-embedded-in-java-webapp)中找到。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T08:09:47.053

您不能通过属性传递用户。安全子系统更复杂，然后简单地传递用户名。您有四种可能的解决方案：

1.  完全禁用安全性（如果所有数据都存储在“root”帐户下，为什么需要它？）
2.  在本地工作站创建 hdfs 用户并在 sudo -u hdfs 下运行软件
3.  在 hadoop 集群上创建本地工作站用户，为该用户创建组，并将该组读取数据的权限添加到文件中。
4.  不要将文件存储在“hdfs”下，并在工作站和 hadoop 集群上创建类似的用户。

我认为在你的情况下最好的方法是 1。但如果不可能，4 更受欢迎。

# c# - 将面板控件添加到类对象的窗体中

> ID：13189183
> 
> 赞同：0
> 
> 时间：2012-11-02T04:08:52.107
> 
> 标签：c#, winforms

我对 C# 还有些陌生，所以如果我以错误的方式提出问题，请原谅我。

我正在编写一个 Windows 窗体程序。我有一个带有 Tab 控件的表单。在其中一个选项卡上的 Tab 控件内部是一个 FlowlayoutPanel 控件，我有一个具有各种属性的类。此类表示联系人卡片上的数据，即姓名地址、电话等，并且被设计为看起来像一个面板控件。这是一些代码：

```
public class clsContactCard
{
#region Fields (8) 

    private Color _backColour;
    private BorderStyle _borderStyle;
    private List<string> _detailLines = new List<string>();
    private Color _foreColour;
    private Size _size;
    private string _subTitle;
    private string _title;

#endregion Fields 

#region Constructors (1) 

    public clsContactCard()
    {}

#endregion Constructors 

#region Properties (8) 

    public Color BackColour
    {
        get { return _backColour; }
        set { _backColour = value; }
    }

    public BorderStyle BorderStyle
    {
        get { return _borderStyle; }
        set { _borderStyle = value; }
    }

    public List<string> DetailLines
    {
        get { return _detailLines; }
        set { _detailLines = value; }
    }

    public Color ForeColour
    {
        get { return _foreColour; }
        set { _foreColour = value; }
    }

    public Size Size
    {
        get { return _size; }
        set { _size = value; }
    }

    public string SubTitle
    {
        get { return _subTitle; }
        set { _subTitle = value; }
    }

    public string Title
    {
        get { return _title; }
        set { _title = value; }
    }

#endregion Properties 

    public Panel CreateCard()
    {
        // New Contact Card  
        Point labelLoc = new Point(18, 11);             //Location for a label
        Size labelSize = new Size(218, 16);             //default label size

        Panel pnl = new Panel();                        //Instantiate a new Panel
        pnl.BackColor = _backColour;                    //Set the new panel's properties
        pnl.BorderStyle = _borderStyle;
        pnl.Size = _size;
        pnl.Visible = true;

        //Title
        Label l = new Label();                          //Create new label object
        l.Name = "uxTitle";                             //Give it a name
        l.Text = _title;                                //Assign it data from properties
        l.Size = labelSize;                             //set its size & font
        l.Font = new Font("Microsoft Sans Serif",10,FontStyle.Bold);
        l.Location = labelLoc;                          //set its location
        labelLoc.Y += labelSize.Height;                 //update next labels location
        pnl.Controls.Add(l);                            //add label to panel controls

        //Type
        //Label l = new Label();
        l.Name = "uxSubTitle";
        l.Text = _subTitle;
        l.Size = new Size(215, 15);
        l.Font = new Font("Microsoft Sans Serif",7,FontStyle.Regular);
        l.Location = new Point(21, 27);
        labelLoc.Y += labelSize.Height + 5;

        //Detail lines
        int lineCount = 0;
        bool firstPhone = true;

        foreach (string line in _detailLines)
        {
            if (SAPSCommon.Instance.IsNumeric(line.Trim()) && firstPhone)
            {
                firstPhone = false;
                labelLoc.Y += 5;
            }
            lineCount += 1;
            //Label l = new Label();
            l.Name = "uxLine" + lineCount;
            l.Text = line;
            l.Size = labelSize;
            l.Font = new Font("Microsoft Sans Serif",8,FontStyle.Regular);
            l.Location = labelLoc;
            labelLoc.Y += labelSize.Height + 5;
        }
        return pnl;
    }
} 
```

这个想法是在类似于 MS Outlook 联系人列表的 FlowLayoutPanel 控件中显示卡片对象。我有填充对象属性的代码，但是当我尝试将卡片对象（面板）添加到 FlowlayoutPanel 控件时，编译器会抱怨以下类型：

> 错误 2 参数 1：无法从“SAPS.clsContactCard”转换为“System.Windows.Forms.Control”

代码如下：

```
foreach (clsContacts contact in _pensioner.Contacts)
{
    clsContactCard card = new clsContactCard();
    if (contact.OtherNames != "")
    {
        card.Title = string.Format("{0} {1} {2}", contact.Givname, contact.OtherNames,
                                   contact.Surname);
    }
    else
    {
        card.Title = string.Format("{0} {1}", contact.Givname, contact.Surname);
    }
    card.SubTitle = contact.ContactTypeDescription;
    card.DetailLines.Add(contact.Addr1);
    string addr2 = contact.Addr2;
    if (addr2.Length >= 0) 
        card.DetailLines.Add(addr2);
    card.DetailLines.Add(string.Format("{0} {1} {2}", contact.Suburb, contact.State, contact.PCode).Trim());
    string country = contact.Country;
    if (country.Length >= 0)
        card.DetailLines.Add(country);
    foreach(clsPhoneNumbers phone in contact.PhoneNumbers)
    {
        card.DetailLines.Add(string.Format("{0} - {1}", phone.PhoneNumber, phone.PhoneType));
    }
    foreach(clsEmailAddresses email in contact.EmailAddresses)
    {
        card.DetailLines.Add(string.Format("{0} - {1}", email.EmailAddress, email.EmailType));
    }
    card.CreateCard();

    uxContactDetsFlp.Controls.Add(card);
} 
```

谁能阐明我做错了什么以及如何解决？我认为可以将面板控件添加到 flowlayout 面板中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T04:15:00.360

您不能将任何其他不是控件的内容添加到 FlowLayoutPanel 等容器控件。您应该改为添加面板本身而不是卡片对象。像这样做：

```
Panel pnl = card.CreateCard();
pnl.Tag = card; //optional
uxContactDetsFlp.Controls.Add(pnl); 
```

此外，`Tag`如果您稍后必须检索卡片对象，您可以使用卡片对象的面板。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T04:24:00.330

这不起作用，因为您没有从控件继承您的类。您只能将继承自 Control 的类添加到控件集合中，例如 Panel.Controls 等。

```
public class clsContactCard : Control 
```

如果是这样，您需要覆盖 OnPaint 事件处理程序以将内容呈现到您的自定义面板。

来自[微软的文档](http://msdn.microsoft.com/en-us/library/skcysbt2%28v=vs.80%29.aspx)：

> 如果您想创建一个完全自定义的控件以在 Windows 窗体上使用，您应该从 Control 类继承。

您还可以继承 Panel 控件并覆盖其 OnPaint 以使生活更轻松。

更新 - 这里有一些资源开始：

[http://msdn.microsoft.com/en-us/library/5h0k2e6x.aspx](http://msdn.microsoft.com/en-us/library/5h0k2e6x.aspx)
[http://msdn.microsoft.com/en-us/library/b818z6z6%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/b818z6z6%28v=vs.71%29.aspx)
[http:// bytes.com/../c-sharp/...creating-custom-controls-movable-resizable-container-control](http://bytes.com/topic/c-sharp/insights/911860-creating-custom-controls-movable-resizable-container-control)
[http://visualbasic.about.com/od/usingvbnet/a/firstnetctrl.htm](http://visualbasic.about.com/od/usingvbnet/a/firstnetctrl.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T04:16:17.217

感谢大家提供建议。大多数都在我的脑海中，但我确实仔细观察了它们。最后我听从了纳法尔的建议。我重新阅读了我的代码，发现我没有将该`CreateCard`方法生成的面板对象分配给任何东西。我想使用卡片对象创建的 Panel 对象来填充 flowlayoutpanel 而不是卡片对象本身（我很傻）。所以我真正需要做的唯一改变是方法末尾的这个小代码段`PopulateContactDetails`：

> ```
>  //Create a new panel ...
>             Panel cd = card.CreateCard();
>             //... and show on screen
>             uxContactDetsFlp.Controls.Add(cd); 
> ```

# c# - .NET 2 到 4 迁移后无法加载文件或程序集“Microsoft.Scripting.ExtensionAttribute...”

> ID：13189187
> 
> 赞同：1
> 
> 时间：2012-11-02T04:09:13.887
> 
> 标签：c#, asp.net, .net, ajax, asp.net-ajax

我正在将很多 .NET 2 ASP.NET Web 应用程序转换为 .NET 4。我在此过程中遇到的问题之一是以下错误消息 -

```
Could not load file or assembly 'Microsoft.Scripting.ExtensionAttribute, Version=0.9.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The system cannot find the file specified. 
```

该错误还突出显示了在我的 ScriptManager 中是罪魁祸首的代码行 -

```
<asp:ScriptManager ID="ScriptManager1" EnablePartialRendering="true" runat="server">
</asp:ScriptManager> 
```

我注意到的奇怪的事情是，一旦刷新页面，这个错误就会消失，但如果我回收应用程序池会重新出现（我猜我是否再次发布网络应用程序）。

我的大部分研究都导致了死胡同，这主要将责任归咎于 Umbraco（根本没有使用）和 IronPython（我承认，它在同一解决方案中的另一个项目中使用，但不是问题）。

每次我对网站进行更改时，我真的不能让这些网络应用程序崩溃，有人有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:18:43.610

似乎是一个错误，但这里有一个修复（没有尝试过，但在 8/24/10 上查找 Jerod Venema 的评论）：

[https://groups.google.com/forum/?fromgroups=#!topic/websync/g8H4iruwC4A](https://groups.google.com/forum/?fromgroups=#!topic/websync/g8H4iruwC4A)

还：

[http://www.mattwrock.com/post/2012/02/29/What-you-should-know-about-running-ILMerge-on-Net-45-Beta-assemblies-targeting-Net-40.aspx](http://www.mattwrock.com/post/2012/02/29/What-you-should-know-about-running-ILMerge-on-Net-45-Beta-assemblies-targeting-Net-40.aspx)

[程序集使我的 asp.net 4.0 崩溃](https://stackoverflow.com/questions/10139017/assembly-crashing-my-asp-net-4-0)

# github - 如何阻止 GitHub 重新生成 Jekyll 站点？

> ID：13189188
> 
> 赞同：8
> 
> 时间：2012-11-02T04:09:28.690
> 
> 标签：github, jekyll, github-pages

我创建了一个 Jekyll 站点并将其提交到 GitHub。但是，当我使用自定义插件时，我想关闭自动生成页面，因为该站点看起来与我的本地主机上的有点不同。

我的 _config.yml 仅包含以下内容：

```
server:      false
auto:        false

source:      .
destination: ./_site

markdown:    maruku
permalink:   date 
```

尽我所能，我无法阻止 GitHub Pages 重新生成站点。主页[http://omgcarlos.com的大引号下方应该有一个蓝色的“Read More”](http://omgcarlos.com)

我的仓库在这里：[https ://github.com/OMGCarlos/omgcarlos.github.com/](https://github.com/OMGCarlos/omgcarlos.github.com/)

Pages 是否只是忽略配置文件并重新生成它？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-07-12T22:57:13.513

只需添加一个名为`.nojekyll`repos `gh-pages`-branch root 的文件，就不会再有自动生成了。

[源链接](https://github.com/blog/572-bypassing-jekyll-on-github-pages)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T13:44:37.153

如果您在 [username].github.com 有一个存储库，则主分支的内容将在 [username].github.com 提供。如果该存储库是 Jekyll 站点，则会生成它。

为避免您遇到的问题，您需要确保 master 仅包含您的 _site/ 目录的内容。然后，您可以将其余的源代码保存在另一个分支中（例如“源代码”）。Octopress 以一种很好的方式（http://octopress.org/docs/deploying/github/）做到了这一点，但实际上，这只是管理 git 存储库的问题——你想从“源”生成 _site 目录分支，并保留 _site

# java - 计算所有可能的组合

> ID：13189191
> 
> 赞同：6
> 
> 时间：2012-11-02T04:10:02.627
> 
> 标签：java, algorithm, data-structures

### 前言

考虑一个包含 12 个元素的列表、数组或字符串，它们的值不相关（比如说 E）。每个元素最多可以链接到一个其他相邻元素，或者如果它是列表的最后一个元素，它可以链接到第一个元素。

有效列表示例，其中破折号表示链接，“E”表示元素。

```
E E E E E E E E E E E E 
E E-E E-E E E E-E E-E E
E E E-E E E-E E-E E E E- 
```

无效列表的示例。

```
E-E-E E E E E-E E E E E- 
```

### 问题

我想计算唯一列表的总数，并打印它们。

要解决这个问题，表示数据的最佳方式可能是什么？

最好实现一个专门针对这个问题的数据结构？

我希望在 Java 中实现这一点，但如果您认为另一种语言更适合，我愿意接受建议。

### 为什么

这不是一个家庭作业问题。

这个想法是在一个 12/8 的小节中找到每个节奏模式，该小节仅由八分音符的单组和双组组成，其中八分音符可以绑在一个小节线上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T04:31:16.800

在这里计算可能性的数量实际上有一个非常巧妙的解决方案（在我看来）。

`C(n)`请注意，对于 n 个音符，如果第一个音符连接到第二个音符，则可能的连接数 ( ) 是`C(n-2)`。否则就是`C(n-1)`。这意味着

```
C(n) = C(n-1) + C(n-2)
C(1) = 3 //Either the first and second are connected, 
         //neither are connected, or the end is connected.
C(0) = 2 //Either the end is connected or it isn't 
```

**注意：**如果单个音符示例中的最后一个音符可以“与自身”连接，则 G(0) 为 1 否则为 0。另外我不清楚`E-E`和`E E-`是否分开，如果不是，`C(1)`则为 2 3\. 请注意，这些仅适用于 0 或 1 的序列，**您**必须在实际函数之外有一个 if 语句`C(n)`才能返回 1 而不是 2。否则它会破坏整个循环。有点乱，但这是算法中真实世界数据的本质

这意味着您基本上已经有了斐波那契数列的变体！酷吧？

**数据表示**

我会有一个 n`boolean`的列表。数组可以正常工作。如果连接了 2 个音符，则数组中的该条目应为`true`. 我会让索引 0 是第一个和第二个音符的连接，索引`n-1`是最后一个音符是否连接到任何东西。

**置换生成**

我们计算可能性总数的方式非常适合生成方法（`G(n)`）。对于 n，我们需要添加`E-E`to`G(n-2)`和`E`to `G(n-1)`。

在这种重复的基础上，我们有：

```
G(0) = {E, E-} 
G(1) = {E-E, E E, E E-} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:33:04.190

如果您让元素间空间成为您的主要数据，那么您有 12 个“空间”（最后一个是与第一个相关的结尾之后的那个）。

每个“空格”可以是空白或有一个链接。所以你可以将它表示为 0 或 1。所以最多有 2^12 种可能性。这是一个相当小的数字（4096），因此您可以生成所有这些，然后清除具有相邻 1 的那些。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T04:33:20.710

我认为变体的总数是 466。

可以按如下方式计算数字：

如果我们假设一个 EE 链接被标记为 Y，那么例如，当第一个被认为是重复10次，第二次被视为只重复一次。基本上这相当于以下列表：

```
Y E E E E E E E E E E 
E Y E E E E E E E E E
E E Y E E E E E E E E
..
E E E E E E E E E E Y 
```

这与计算多项式 (10, 1) 基本相同，即 11 ( [http://www.wolframalpha.com/input/?i=multinomial%2810%2C+1%29](http://www.wolframalpha.com/input/?i=multinomial%2810%2C+1%29) )

总数如下：

```
multinomial(12) + // there is no E-E link at all 
multinomial(12 - 2, 1) + // only one E-E link 
multinomial(12 - 4, 2) + // two E-E links
...
multinomial(12 - 12, 6)  // 6 E-E links 
```

这是 233 ( [http://www.wolframalpha.com/input/?i=multinomial%2812%29+%2B+multinomial%2810%2C+1%29+%2B+multinomial%288%2C+2%29 +%2B+多项式%286%2C+3%29+%2B+多项式%284%2C+4%29+%2B+多项式%282%2C+5%29+%2B+多项式%286%29](http://www.wolframalpha.com/input/?i=multinomial%2812%29+%2B+multinomial%2810%2C+1%29+%2B+multinomial%288%2C+2%29+%2B+multinomial%286%2C+3%29+%2B+multinomial%284%2C+4%29+%2B+multinomial%282%2C+5%29+%2B+multinomial%286%29) )

通常我会将其乘以 2 以说明最终链接的可能性，但这实际上可以在某些情况下创建三个 EEE 链，这会破坏您的问题。

另一方面，有可用的算法可以为某些参数生成所有多项式组合，并且由于所有参数都像 200 一样，因此很容易生成所有参数，只需检查哪些可以通过循环链接进行扩展。

# java - 使用 line.contains 在 Java 中对文本文件的信息进行排序

> ID：13189195
> 
> 赞同：0
> 
> 时间：2012-11-02T04:10:58.980
> 
> 标签：java, indexof

我正在编写一个程序，要求用户进行测验。我必须阅读包含我需要的信息的文本文件。但是，我遇到了如何做到这一点的麻烦。我已经将尽可能多的问题分类到一个列表数组中，但其余的问题给我带来了麻烦。这是我必须使用的文本文件的格式：

（问题）（选项中的答案数量）（x 选项）（尝试次数）（正确次数）（错误次数）

我将如何使用我必须区分答案整数和统计整数的代码？

```
 Scanner fScan = new Scanner(new File(file_name));

    List<String> questions = new ArrayList<String>();
    List<String> other = new ArrayList<String>();
    int[] answers = new int[questions.size()];

    while (fScan.hasNextLine()) 
    {

        String line = fScan.nextLine();

    if (line.contains("?")) 
    {
        questions.add(line);

    } 
    else 
    {
        other.add(line);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:20:00.737

最好创建一个`Map`以问题为键和答案列表为值的方法，例如：

```
Map<String, List<String>> questionAnswersMap = new HashMap<String, List<String>>();
List<String> answers = null;
while (fScan.hasNextLine()) {
   String line = fScan.nextLine();
   if (line.contains("?")){
      //new Question
      answers = new ArrayList<String>()
      questionAnswersMap.put(line, answers );
   }else{
      //answer of the previous question
      answers.add(line);
   } 
} 
```

在这里，我假设问题和答案是按顺序编写的。

# javascript - 使用数据属性在 jQueryUI 日历上设置选项

> ID：13189199
> 
> 赞同：1
> 
> 时间：2012-11-02T04:11:35.980
> 
> 标签：javascript, jquery, jquery-ui

我想使用“data-dateformat”属性来设置 jQueryUI Datepicker 的 dateformat 选项

所以我可以在我的页面上这样做

```
<input name="t1" type="text" class="datepicker" data-dateformat="MM YY"> 
<input name="t2" type="text" class="datepicker" data-dateformat="DD MM y"> 
```

并且日期选择器将使用正确的格式

我试过

```
 $( ".datepicker" ).datepicker({
                  dateFormat: $(self).attr('data-dateformat') 
               }); 
```

但这不起作用。

有什么办法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T04:15:55.567

您的`self`值将不具有单个元素的适当范围。您需要遍历每个日期选择器。

试试这个：

```
$(".datepicker").each(function(){
    var $this = $(this);
    $this.datepicker({
       dateFormat: $this.attr('data-dateformat')
    });
}); 
```

您也可以使用 jQuery`data`方法。

```
$(".datepicker").each(function(){
    var $this = $(this);
    $this.datepicker({
       dateFormat: $this.data('dateformat')
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:27:46.487

你可以试试这可能有用

```
$( ".datepicker" ).datepicker({
              dateFormat: $(this).data('dateformat') 
}); 
```

# c - 十进制到八进制转换器，最后一位数字问题

> ID：13189201
> 
> 赞同：5
> 
> 时间：2012-11-02T04:11:40.050
> 
> 标签：c, decimal, octal

我尝试制作一个 C 程序来将用户输入的十进制数转换为八进制。我用自己的逻辑编写了 C 代码，没有研究其他用户如何尝试这样做。它适用于数字`601`和其他一些数字，但对于大多数数字，它返回等效的八进制数，最后一位数字`1`小于应有的数字。因为`75`它返回`112`而不是`113`. 我意识到使用`printf`with`%o`可以完成工作，但这有点违背学习编程的目的。这是我的代码：

```
#include <stdio.h>
#include <math.h>

/* converting decimal to octal */

int main() 
{
    int n,x,y,p,s;
    printf("Enter a decimal number ");
    scanf("%d",&x);
    s=0;p=0;

    while (x!=0)
    {
         y=x%8;
         s=s+y*pow(10,p);
         x=(x-y)/8;
         p=p+1;
    }  

  printf("the octal equivalent is: %d\n",s);
  getch();
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T04:40:15.343

这是一种有趣的方式。我会为了原创性而对这个问题投赞成票。

通过添加一个软糖因子来解决这个问题：

```
s = s + y*pow(10,p) + 0.1; 
```

问题是浮点精度。其中一个 pow 计算返回类似 99.99999999999992 而不是 100。转换回 int 会丢失 0.999... 分数并得到 99 而不是 100。或 999 而不是 1000。它不在一个位置，因为零指数是恰好得到 1.0 的特殊情况。

顺便说一句，由于您只能在 32 位 int 中得到 9 位数字，因此 susmit 以 int 形式乘以 10 的幂的建议是相当合理的。除特殊情况外，pow 会将 pow(x,y) 计算为 exp(y*log(x))。exp() 和 log() 往往是昂贵的计算。

更顺便说一句，即使强制 exp 和 log 计算，我也无法重现该问题。我得到 (10 + 1.8e-15)、(100 + 4.3e-14) 和 (1000 + 6.8e-13) 的值，所有四舍五入都是正确的，因为错误都是正数。这是在 x86 上，我相信我用 VC++2008 编译了这个计算器。你用的是什么编译器？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:11:46.840

替代第一个答案，而不是

```
s=s+y*pow(10,p); 
```

有一个 shiftfactor，初始化为 1，然后做

```
s += y*shiftfactor;
shiftfactor *= 10; 
```

此外，代替 x=(xy)/8; 只做 x/=8 就足够了；由于整数舍入。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T06:15:19.540

```
#include <stdio.h>
#include <math.h>

/* converting decimal to octal */

int main()
{
   int n, x, y, p;
   double s = 0;
   printf("Enter a decimal number ");
   scanf("%d", &x);

   p = 0;

   while (x != 0)
   {
        y = x % 8;
        s = s + (double)y * pow(10, p);
        x = ( x - y ) / 8;
        p = p + 1;
} 
```

printf("八进制等效值为：%lf\n",s);

返回0；}

我认为这将解决您的问题。实际上 Pow() 返回双精度值。在您的代码中，您使用了 int，因此小数部分将被截断并放入变量“s”中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T06:41:25.113

```
#include <stdio.h>
int main()
{
    int d_num = 0;
    int o_num = 0;
    int factor = 1;

    printf("Enter a decimal number: ");
    scanf("%d", &d_num);

    while (d_num > 0) {
            o_num += d_num % 8 * factor;
            d_num /= 8;
            factor *= 10;
    }

    printf("Octal equivalent: %d\n", o_num);
    return 0;
} 
```

对我来说，这段代码只适用于整数运算。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T06:42:06.290

为什么你需要使用`x=(x-y)/8`. 为什么你不能用`x=x/8`。它与 lhs 和 rhs 中使用的变量类型都是整数的效果相同。顺便说一句，代码对我有用。我认为问题在于整数舍入。只需`x=(x-y)/8`替换`x=x/8`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-08-27T13:09:43.540

OP 前段时间解决了这个问题，但我想我会提出一个简单的解决方案。

```
/* converting decimal to octal */
unsigned decimal_to_octal(unsigned x) {
  if (x < 8) {
    return x;
  }
  return decimal_to_octal(x/8)*10 + x%8;
} 
```

测试代码

```
unsigned test10to8(void) {
  for (;;) {
    unsigned x;
    scanf("%d", &x);
    printf("x:%u y:%u\n", x, decimal_to_octal(x));
  }
} 
```

# jquery - 使用 JSON 数据更新 DIV 并显示/隐藏 DIV

> ID：13189204
> 
> 赞同：0
> 
> 时间：2012-11-02T04:12:32.450
> 
> 标签：jquery, json, show-hide

我有一个这样的json数组：

```
var headerStrings = [
        "Apple",
        "Banana",
        "Pineapple",
    ]; 
```

这是我的 HTML：

```
<div id="links">
    <ul>
        <li><a>One</a></li>
        <li><a>Two</a></li>
        <li><a>Three</a></li>
    </ul>
</div>

<div id="fruit">Mango</div>
<div>
    <div>Some content one</div>
    <div>Some content two</div>
    <div>Some content three</div>
</div> 
```

当我单击“一个”链接时，我想做两件事：

1.  将 DIV #fruit 的内容替换为数组中的第一项 - Apple。
2.  显示第一个 DIV（一些内容）并隐藏其他两个 div

我也想对其他两个链接执行此操作 - 当我单击链接“两个”时，我想显示 DIV（一些内容二）并将 DIV #fruit 替换为数组中的第二项 - 香蕉。

这是我尝试过的：

```
var items = $('#links ul li');
items.click(function(event){
    event.preventDefault();
    var which = $(this).index();
    $('div').find('div').hide().eq(which).show();
    $('#fruit').innerHTML = data.headerStrings[which];
}); 
```

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:23:30.110

**[演示](http://jsfiddle.net/pintu31/q3YJ3/)**

```
var headerStrings = [
    "Apple",
    "Banana",
    "Pineapple",
];

$('ul li a').each(function(i){
 $(this).click(function(){
     $('#fruit').html(headerStrings[i]);
     $('#content').children().hide().eq(i).show();
 });
});

<div>
<ul>
    <li><a>One</a></li>
    <li><a>Two</a></li>
    <li><a>Three</a></li>
</ul> 
```

```
<div id="fruit">Mango</div>
 <div id='content'>
 <div>Some content one</div>
 <div>Some content two</div>
 <div>Some content three</div>
</div>​​​ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:20:57.080

您可以使用 jquery 模板来解决这个问题。

[jquery模板介绍](http://stephenwalther.com/archive/2010/11/30/an-introduction-to-jquery-templates.aspx)将让您入门。总而言之，您将加载所有div并将其隐藏，然后根据单击显示/隐藏div。有一个[jquery toggle div 方法。](https://stackoverflow.com/questions/752847/switch-toggle-div-jquery)

# php - PHP：如何检测 URL 是否以“m.”开头？

> ID：13189208
> 
> 赞同：-1
> 
> 时间：2012-11-02T04:13:21.903
> 
> 标签：php

我使用 CakePHP 的内置方法`$this->RequestHandler->isMobile()`来检测移动设备，但是当我想使用桌面浏览器尝试我的应用程序时它不起作用。所以我使用下面的代码，因为它的 url 以“m”开头。例如“m.mywebsite.com”：

```
 <?php
    $url = explode('.', $_SERVER['SERVER_NAME']);
    if($url[0] == 'm'){
      echo "Welcome to our mobile version";
     }
    ?> 
```

但不知何故，在另一台具有“m.trial.mywebsite2.com”之类的子域地址的服务器上进行测试时，它也无法正常工作。这种网址还有其他更好的检测代码吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T04:21:40.980

使用正则表达式，或者简单地使用 strpos() 它。

```
// Regular Expression
if (preg_match('/^m\./', $_SERVER['SERVER_NAME']) {
}

// strpos()
if (0 === strpos($_SERVER['SERVER_NAME'], 'm.')) {
} 
```

你的情况闻起来好像有什么问题`$_SERVER['SERVER_NAME']`，你真的应该检查一下。

# html - 在响应式中调整图像大小

> ID：13189216
> 
> 赞同：1
> 
> 时间：2012-11-02T04:14:42.950
> 
> 标签：html, css, responsive-design

响应式网页设计将图像大小调整为移动设备的屏幕。将完整图像下载到移动设备上并调整大小以适合屏幕。这会消耗不必要的 CPU 和 RAM。有没有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:23:56.907

我认为您要寻找的是“自适应图像”。本质上是基于设备/视口提供较小的图像。

最近有很多关于这个的讨论，但我想这里是你可以开始的一个地方：

[http://adaptive-images.com/](http://adaptive-images.com/)

这将使用服务器端方法。在这种情况下是 PHP。

这些文章有助于大致了解当前情况：

*   [http://filamentgroup.com/lab/rwd_img_compression/](http://filamentgroup.com/lab/rwd_img_compression/)
*   [http://blog.netvlies.nl/design-interactie/retina-revolution/](http://blog.netvlies.nl/design-interactie/retina-revolution/)

希望有帮助。

# sql - SSRS 强制单面打印

> ID：13189222
> 
> 赞同：0
> 
> 时间：2012-11-02T04:15:43.733
> 
> 标签：sql, tsql, reporting-services

当前windows pc的打印机设置默认为双面打印以节省纸张。
有一些报告他们希望 SSRS 忽略窗口设置并单面打印。

我不认为这是可能的，是吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:35:26.657

该设置是在打印机驱动程序上指定的，而不是在报告上。所以你是对的，这是不可能的。

一种解决方法是为同一台打印机定义两台设备，一台启用双面打印，另一台不启用。

# css - 是否可以使用选择器单独定位 CSS3 列？

> ID：13189229
> 
> 赞同：9
> 
> 时间：2012-11-02T04:16:37.753
> 
> 标签：css, css-selectors, multiple-columns

我正在研究的设计有不同的背景用于交替列。是否可以为每列设置不同的平铺背景，

例如

```
column:nth-child(n+1) {background:url(tile1.gif) repeat-x; } 
```

还是我必须依靠每两列平铺的巨大背景图像？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T13:21:23.763

不幸的是，您无法更改列的颜色：

> 无法在列框上设置属性/值。例如，不能设置某个列框的背景，列框没有内边距、边距或边框的概念。

来自 w3.org：2 [. 多列模型](http://www.w3.org/TR/css3-multicol/#the-multi-column-model)

# c# - JSON.Net, JsonConvert.DeserializeObject - 反序列化问题

> ID：13189234
> 
> 赞同：3
> 
> 时间：2012-11-02T04:17:06.203
> 
> 标签：c#, json, json.net, deserialization

当我尝试使用 JSON.Net 反序列化我的 JSON 时，它为我提供了 JSON 数组的无效值。

我有简单的 JSON：

```
[
{
    "PhaseName": "Start",
    "Advices": ["Lorem ipsum dolor",
    "Lorem ipsum dolor",
    "Lorem ipsum dolor"]
},
{
    "PhaseName": "In Progress",
    "Advices": ["Lorem ipsum dolor",
    "Lorem ipsum dolor",
    "Lorem ipsum dolor"]
},
{
    "PhaseName": "Finish",
    "Advices": ["Lorem ipsum dolor",
    "Lorem ipsum dolor",
    "Lorem ipsum dolor"]
} 
```

]

我的代码中有一个对应的类：

```
public class Advices
{
    public string PhaseName { get; set; }
    public List<string> AdvicesList { get; set; }
} 
```

还有一个表示 Advices 对象数组的 veriable：

```
public class MyAdvices
{
    private Advices[] MyAdvicesArrays;
.... 
```

因此，当我尝试像这样反序列化我的 JSON 时：

```
MyAdvicesArrays= JsonConvert.DeserializeObject<Advices[]>(sMyJSON)); 
```

JSON.Net 用正确的值填充 MyAdvicesArrays 数组中每个对象的“阶段名称”属性，但每个对象的 Advices 数组无效：如果您在运行时检查它们，则“无法评估表达式”。我不明白。我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:24:37.677

根据实体，您`json`是无效的。

在您的类型中更改`AdvicesList`为`Advices`.

```
public List<string> AdvicesList { get; set; } 
```

将其更改为

```
public List<string> Advices { get; set; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:38:59.043

我所做的就是改变`Advices`类的定义：

```
public class Advice
{
    public string PhaseName { get; set; }
    public List<string> Advices { get; set; }
} 
```

我将类名更改为 just`Advice`并将`AdvicesList`属性更改为`Advices`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T04:34:10.680

不，你的 JSON 和你的 Class 一样不正确。

首先将您的 JSON 更改为：

```
{
    phases:[
        {
            "PhaseName": "Start",
            "Advices": ["Lorem ipsum dolor",
            "Lorem ipsum dolor",
            "Lorem ipsum dolor"]
        },
        {
            "PhaseName": "In Progress",
            "Advices": ["Lorem ipsum dolor",
            "Lorem ipsum dolor",
            "Lorem ipsum dolor"]
        },
        {
            "PhaseName": "Finish",
            "Advices": ["Lorem ipsum dolor",
            "Lorem ipsum dolor",
            "Lorem ipsum dolor"]
        }
    ]
} 
```

在您没有正确声明 JSON 对象之前请注意。您还需要数组的属性。

现在你需要两个类：

```
public class AnythinYouWant{
    public List<Phase> Phases{get;set;}
}

public class Phase{
    public string PhaseName{get;set;}
    public List<string> Advices{get;set;}
} 
```

注意第一个类是如何用于顶级 JSON 对象的。名字可以是任何你想要的。但是任何属性都需要与名称匹配。

# security - MD5函数的最大输入长度是多少？

> ID：13189235
> 
> 赞同：-3
> 
> 时间：2012-11-02T04:17:16.230
> 
> 标签：security, hash, cryptography

> **可能重复：**
> [MD5 输入/输出的最大长度](https://stackoverflow.com/questions/3394503/maximum-length-for-md5-input-output)

我知道 MD5 函数产生的最大长度为 32 个字节，但它的最大输入呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T04:22:03.053

没有最大输入长度。

# c++ - 函数调用不起作用和向量访问数据

> ID：13189236
> 
> 赞同：1
> 
> 时间：2012-11-02T04:17:22.390
> 
> 标签：c++

所以我想做一个使用类项目向量的库存程序。到目前为止，我的代码看起来像这样：

```
#include <iostream>
#include <vector>
#include <string>
using namespace std;
class Item{
private:
  string month;
  string name;
  float volume;
  float sales;
public:
  void print();
  void print2();
  void sale();
  void report();
  void getdata();
  void setname (string itemname){name=itemname;}
  void setID(int setID){ID=setID;}
};
void Item::print(){
  cout<<"Name    : "<<name<<endl;
  cout<<"ID      : "<<ID<<endl;
}
void Item::print2(){
  vector<Item>*::iterator i;
    for (i=list.begin(); i !=list.end(); ++i){
      i->print();
  }
/*void Item::sale(){
  vector<Item> }

void Item::report(){
}*/
void Item::getdata(){
  vector<Item> items;
  string name;
  int ID;
  Item *a;
  for (int n=0; n<2; n++){
    cout<<"Enter name:"<<endl;
    getline(cin, name);
    cout<<"Enter ID: "<<endl;
    cin>>ID;
    a = new Item;
    a->setname(name);
    a->setID(ID);
    items.push_back(*a);
    cin.get();
  }
}

int main(){
  cout<<"0\. Exit \n1\. Item Sale \n2\. Daily Report \n3\. Weekly Check \n4\. Monthly Update \n5\. Load Inventory File \n6\. S\
ort file by Key \n7\. Save inventory to a file \n8\. Add a New Item \n9\. Edit an Item \n10\. Delete an item\n";
  int x;
  cin>>x;
  switch(x){
  case 0:
    exit(0);
    break;
  case 1:
    sale();
    break;
  case 2:
    break;
  case 8:
    getdata();
    break;
  default:
    cout<<"Wrong choice!\n";
    break;
  } 
```

程序无法编译，因为`getdata()`万一 8 没有调用该函数，这是为什么呢？另一个问题是，如果我在 getdata() 函数中存储了数据，我如何通过取消引用在其他函数中使用该数据向量数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T05:13:55.283

我建议将您的对象设计分成两部分：一部分代表物品，另一部分代表库存。

物品：

```
class Item
{
public:
  void print() const;
  void sale();
  void report();
  void setname (string itemname){name=itemname;}
  void setID(int setID){ID=setID;}

private:
  string month;
  string name;
  int ID;
  float volume;
  float sales;
};

void Item::print() const
{
  cout<<"Name    : "<<name<<endl;
  cout<<"ID      : "<<ID<<endl;
} 
```

存货：

```
class Inventory
{
public:
  void print() const;
  void report();
  void getdata();

private:
  std::vector<Item> items;
};

void Inventory::print() const
{  
  for (
    vector<Item>::const_iterator iter = list.begin();
    iter != items.end();
    ++iter)
  {
      iter->print();
  }
} 
```

.

```
void Inventory::getdata()
{
  string name;
  int ID;
  for (int n=0; n<2; n++)
  {
    cout<<"Enter name:"<<endl;
    getline(cin, name);
    cout<<"Enter ID: "<<endl;
    cin>>ID;
    Item item;
    item.setname(name);
    item.setID(id);
    items.push_back(item);
    cin.get();
  }
} 
```

这是您的主要外观：

```
int main()
{
  Inventory inventory;
  cout
      << "0\. Exit \n"
      << "1\. Item Sale \n"
      << "2\. Daily Report \n"
      << "3\. Weekly Check \n"
      << "4\. Monthly Update \n"
      << "5\. Load Inventory File \n"
      << "6\. Sort file by Key \n"
      << "7\. Save inventory to a file \n"
      << "8\. Add a New Item \n"
      << "9\. Edit an Item \n"
      << "10\. Delete an item\n";
  int x;
  cin>>x;
  switch(x)
  {
  case 0:
    exit(0);
    break;
  case 1:
    sale();
    break;
  case 2:
    inventory.report();
    break;
  case 8:
    inventory.getdata();
    break;
  default:
    cout<<"Wrong choice!\n";
    break;
  }
} 
```

请注意，您需要类的对象才能调用成员函数。 `getdata()`没有它所作用的对象就没有任何意义。

编辑：您问“例如，您将如何遍历向量以查找特定 ID？”

我们已经看到了如何遍历每个成员来调用 print。我们真正需要做的只是有时只调用 print 。

首先，您需要一种方法来告诉项目的 ID。在 Item 中的 setID(...) 之后添加：

```
int getID() const {return ID;} 
```

现在您可以在迭代时检查此值：

```
void Inventory::find
(
  const int ID_
) const
{
  bool found = false;
  for (
    vector<Item>::const_iterator iter = items.begin();
    iter != items.end();
    ++iter)
  {
    if (iter->getID() == ID_)
    {
      cout << "Found item " << ID_ << ": \n";
      iter->print();
      found = true;
    }
  }
  if (!found)
  {
    cout << "No items matching " << ID_ << " found." << endl;
  }
} 
```

您可以在这里看到一个工作示例：http: [//codepad.org/w1MwGCYo](http://codepad.org/w1MwGCYo)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T04:23:22.660

您需要修复 OOP 的基础知识。您没有在 Item 类的 main 中创建对象。没有它，您将无法调用公共成员函数。

只能调用静态成员函数而不创建类对象。

其次，在成员函数中创建类本身的向量是疯狂的。如果必须，请在课外进行。

类定义了*一个实例*的属性和行为。如果您希望创建实例数组/向量，则必须在类外部完成，然后每个实例调用一些成员函数。

你应该创建你的类来处理一个没有向量的项目。getdata 函数还应该接受一项的输入。您在主目录中创建一个向量。然后在这个向量上运行一个循环，并为这些项目中的每一个调用 get_item 或任何其他 api。详细地说，在循环中从控制台获取输入并将其传递给 vector[index].setitem()

# node.js - 可以为节点应用程序安装所有缺少的模块吗？

> ID：13189239
> 
> 赞同：45
> 
> 时间：2012-11-02T04:17:40.040
> 
> 标签：node.js, npm

我有一个刚开始使用的节点应用程序，每次尝试运行它时，它都会说缺少一个模块。我一直在使用`npm install ...`每个模块，但是在做了大约 10 个之后，我想知道是否有一种方法可以让 npm 下拉节点应用程序所需的所有模块，而无需我手动安装每个模块。可以做到吗？

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-11-02T05:21:52.983

是的，只要依赖项列在`package.json`.

在包含 的目录中`package.json`，只需键入：

```
npm install 
```

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-11-12T16:49:04.070

我创建了一个 npm 模块来处理自动安装缺少的模块。

[npm-安装-缺失](https://npmjs.org/package/npm-install-missing)

它将自动安装所有应用程序依赖项和子依赖项。当子模块未正确安装时，这很有用。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-03T03:27:13.073

您可以运行`npm install yourModule --save`以安装并`package.json`使用这个新安装的模块自动更新。

因此，当您`npm install`第二次运行时，它将安装先前添加的每个依赖项，您无需逐个重新安装每个依赖项。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-03T10:37:38.100

我为此写了一个脚本。
将它放在脚本的开头，当你运行它时，所有卸载的模块都会被安装。

```
(function () {
  var r = require
  require = function (n) {
    try {
      return r(n)
    } catch (e) {
      console.log(`Module "${n}" was not found and will be installed`)
      r('child_process').exec(`npm i ${n}`, function (err, body) {
        if (err) {
          console.log(`Module "${n}" could not be installed. Try again or install manually`)
          console.log(body)
          exit(1)
        } else {
          console.log(`Module "${n}" was installed. Will try to require again`)
          try{
            return r(n)
          } catch (e) {
            console.log(`Module "${n}" could not be required. Please restart the app`)
            console.log(e)
            exit(1)
          }
        }
      })
    }
  }
})() 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-11-19T22:25:42.467

我受到[@Aminadav Glickshtein 的回答的](https://stackoverflow.com/questions/13189239/possible-to-install-all-missing-modules-for-a-node-application/21525031#21525031)启发，创建了一个我自己的脚本来**同步**安装所需的模块，因为他的回答缺乏这些功能。

我需要一些帮助，所以我**[在这里](https://stackoverflow.com/questions/53270058/node-cant-find-certain-modules-after-synchronous-install)**开始了一个 SO 问题。您可以在那里阅读有关此脚本如何工作的信息。
结果如下：

```
const cp = require('child_process')

const req = async module => {
  try {
    require.resolve(module)
  } catch (e) {
    console.log(`Could not resolve "${module}"\nInstalling`)
    cp.execSync(`npm install ${module}`)
    await setImmediate(() => {})
    console.log(`"${module}" has been installed`)
  }
  console.log(`Requiring "${module}"`)
  try {
    return require(module)
  } catch (e) {
    console.log(`Could not include "${module}". Restart the script`)
    process.exit(1)
  }
}

const main = async () => {
  const http    = await req('http')
  const path    = await req('path')
  const fs      = await req('fs')
  const express = await req('express')

  // The rest of the app's code goes here
}

main() 
```

还有一个单行字（139 个字符！）。它没有全局定义`child_modules`，没有最后一个`try-catch`，也没有在控制台中记录任何内容：

```
const req=async m=>{let r=require;try{r.resolve(m)}catch(e){r('child_process').execSync('npm i '+m);await setImmediate(()=>{})}return r(m)}

const main = async () => {
  const http    = await req('http')
  const path    = await req('path')
  const fs      = await req('fs')
  const express = await req('express')

  // The rest of the app's code goes here
}

main() 
```

# ios - AVPlayer 播放一段时间后出现噪音问题

> ID：13189240
> 
> 赞同：1
> 
> 时间：2012-11-02T04:18:02.157
> 
> 标签：ios, avplayer

我使用 AVPlayer 播放流式网络音频。

我从 Apple修改示例代码[AVPlayerDemo](http://developer.apple.com/library/ios/#samplecode/AVPlayerDemo/Introduction/Intro.html)

工作很好。但是播放一段时间后，播放器有杂音，有人称之为“刮擦声”。

我检查了代码，任何时候我的播放器只有一个 AVPlayer 对象，一个用于标记的 AVPlayerItem 对象，一个用于标记的 AVURLAsset 对象。我明确地使用“alloc, retain, realease”，所以这不是内存开销的问题。

你能知道是什么原因引起的噪音吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-04T18:47:56.060

我有个类似的问题。使用`AVPlayer`或`AVAudioPlayer`一段时间，在我的情况下播放多个剪辑之间有停顿，会导致音频降级。首先它开始变得沙哑，然后随着它变得更糟，它最终完全脱落并且听不见。

我尝试`AVAudioPlayer's`为每个剪辑创建新的，但无济于事。

我怀疑是音频文件本身 (*.m4a) 导致了问题。即使经过几轮降噪，有些本身也含有静电。尽管其中的静态不是 AVAudioPlayer 引入的静态。

我正在研究两种替代理论和一种理论；

1.  使用原始的 *.wav 文件或 *.mp3 文件
2.  停用/激活`AVAudioSession`剪辑之间或定期。
3.  这可能只是一个模拟器问题，不会发生在设备上（理论上）。

虽然这些可能不适用于您的流，但也许这里有一个解决方案。

更新： *.wav 与 *.m4a 没有区别。

更新：这不会发生在设备本身上，只发生在我的模拟器中。

# java - 致命错误 不允许匹配“[xX][mM][lL]”的处理指令目标

> ID：13189243
> 
> 赞同：0
> 
> 时间：2012-11-02T04:18:11.720
> 
> 标签：java, apache, https, httprequest, domparser

使用 dom 解析器解析我的 xml 时出现以下异常。url "http://www.xyz.com/ABC.aspx?accessCode=......&vin=GJHHFJHFJHFGF6788&reportType=3" 为每个 vin 参数返回一个 xml。

这是上面 url 返回的 xml

```
<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<VINdecode Version="1.0.0" Report_Type="LITE" Date="11/1/2012">
    <VIN Number="GJHHFJHFJHFGF6788" Status="SUCCESS">
        <Vehicle VINdecode_Vehicle_ID="26870" Model_Year="2004" Make="Volkswagen" Model="Touareg" Trim_Level="V6">
            <Item Key="Model Year" Value="2004" Unit="" />
            <Item Key="Make" Value="Volkswagen" Unit="" />
            <Item Key="Model" Value="Touareg" Unit="" />
            <Item Key="Trim Level" Value="V6" Unit="" />
            <Item Key="Manufactured in" Value="GERMANY" Unit="" />
            <Item Key="Body Style" Value="SPORT UTILITY 2-DR" Unit="" />
            <Item Key="Engine Type" Value="3.2L V6 DOHC 24V" Unit="" />
        </Vehicle>
    </VIN>
</VINdecode> 
```

这是我用来解析从带有 vin 的 url 返回的 xml 的代码。

```
 public VIN getVINExpansion(String vin) 
    {
        if(vin.length() != 17)
           return null;
        VIN vehicle = null;

        try 
        {

               String url="http://www.xyz.com/ABC.aspx?accessCode=........&vin="
                    + vin + "&reportType=3";
               DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
               DocumentBuilder db = dbf.newDocumentBuilder();
               Document doc = db.parse(url);  **// I get Exception in this line**
               NodeList vinlist = doc.getElementsByTagName("VIN");

               // rest goes here

         }
         catch(Exception e)
         {
           e.printStackTrace();
         }
        return vin;
    } 
```

当我通过 rpc 调用从客户端将“vin”参数传递给上述函数时，我得到了正确的响应。但是在我传递相同的 vin 参数几个小时（比如 4-5）小时后，我得到了异常。之后，我继续收到此异常，直到我重新启动我的 tomcat 服务器。重新启动 tomcat 服务器后，我再次得到正确的响应 4-5 小时，直到它开始失败。

我得到的例外：

```
[Fatal Error] xml_ABC.aspx?accessCode=.......&vin=GJHHFJHFJHFGF6788&reportType=3:4:6: The processing instruction target matching "[xX][mM][lL]" is not allowed.
org.xml.sax.SAXParseException;

 systemId: http://www.xyz.com/ABC.aspx?accessCode=......&vin=GJHHFJHFJHFGF6788&reportType=3; lineNumber: 4; columnNumber: 6; The processing instruction target matching "[xX][mM][lL]" is not allowed.
        at org.apache.xerces.parsers.DOMParser.parse(Unknown Source)
        at org.apache.xerces.jaxp.DocumentBuilderImpl.parse(Unknown Source)
        at javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:177) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:07:56.707

我不知道它失败的确切原因，但我也遇到了同样的问题：当我尝试使用 DocumentBuilder.parse(url) 解析 url 响应 xml 时，经过几次试验后解析失败。

当我使用以下函数获取响应 xml 时：

```
public String getHttpGetResponseString(String url) throws Exception
    {
        HttpClient httpclient = new DefaultHttpClient();
        String responseBody ="";
        try {
            HttpGet httpget = new HttpGet(url);

            System.out.println("executing request " + httpget.getURI());

            // Create a response handler
            ResponseHandler<String> responseHandler = new BasicResponseHandler();
            responseBody = httpclient.execute(httpget, responseHandler);

        }
        finally {
            // When HttpClient instance is no longer needed,
            // shut down the connection manager to ensure
            // immediate deallocation of all system resources
            httpclient.getConnectionManager().shutdown();

        }
        return responseBody;
    } 
```

然后将xml加载到dom中，我摆脱了异常。希望这可以解决您的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-10-01T16:41:49.660

这是一个完全的hack，但以下将任何处理指令更改为标签....记住.... Hack！

```
public static String formatXml(String xml)
{
    String result = doFormatXml(xml);
    if (result.equals(xml))
    {
        result = doFormatXml(xml + "</xml>");
    }
    return result;
}

public static String doFormatXml(String xml)
{
    xml = xml.replaceAll("[?][>]", "/>");
    xml = xml.replaceAll("[<][?]", "<");
    try{
        Transformer serializer= SAXTransformerFactory.newInstance().newTransformer();
        serializer.setOutputProperty(OutputKeys.INDENT, "yes");
        serializer.setOutputProperty("{http://xml.apache.org/xslt}indent-amount", "2");
        Source xmlSource=new SAXSource(new InputSource(new ByteArrayInputStream(xml.getBytes())));
        StreamResult res =  new StreamResult(new ByteArrayOutputStream());            
        serializer.transform(xmlSource, res);
        return new String(((ByteArrayOutputStream)res.getOutputStream()).toByteArray());
    }catch(Exception e){
        return xml;
    }
} 
```

所以这样称呼它：

```
 String formattedXml = formatXml(unformattedXml); 
```

# php - 无法通过套接字连接到本地 MySQL 服务器问题

> ID：13189247
> 
> 赞同：1
> 
> 时间：2012-11-02T04:18:48.000
> 
> 标签：php, mysql

我正在用 php 创建一个联系表单。当我填写所有内容并按提交时，它不会向特定的电子邮件地址发送任何消息。它显示了几个错误消息。

**错误信息：**

```
Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: Can't connect 
to local MySQL server through socket '/var/run/mysqld/mysqld.sock' (2) in /homez.91
/maaks/www/hotel/eng/resellers.php on line 93

Warning: mysql_real_escape_string() [function.mysql-real-escape-string]: A link to the 
server could not be established in /homez.91/maaks/www/hotel/eng/resellers.php on line 
93

etc..... 
```

**php代码：**

```
<?php
        if(isset($_POST['Send']) && $_POST['Send'] == "Submit")
        {
            $fname = mysql_real_escape_string($_POST['fname']);
            $email = mysql_real_escape_string($_POST['email']);
            $conum = mysql_real_escape_string($_POST['conum']);
            $country = mysql_real_escape_string($_POST['country']);
            $find = mysql_real_escape_string($_POST['find']);
            $msg = mysql_real_escape_string($_POST['msg']);

            $err = array();

if(isset($fname) & isset($email) & isset($conum) & isset($country) & isset($find) & 
isset($msg))
            {

if(empty($fname) & empty($email) & empty($conum) & empty($country) & empty($find) & 
empty($msg))
                {
                    $err[] = "All field require";
                }
                else
                {
                    if(empty($fname))
                    $err[] = "Your first name require";
                }

            }
            else
            {
            if(!empty($err))
              {
                  foreach($err as $er)
                    {
                               echo "<font color=red>$er</font><br/>";
                    }
              }
            else
            {
                $to = "creativeart09@yahoo.com";
                $subject = "Message from Customer";
                        $message = "$msg";                                              
                        $from = "$email";
                        $headers = "From:" . $from;
                        mail($to,$subject,$message,$headers);

                if(mail())
                    {

                    echo "<script>";
                            header("Refresh: 0; url=Thankyou.html");
                    echo "</script>";
                    }
                    else
                    {
                        echo "Something is wrong" . mysql_error();
                    }
                }
            }

        }           

 ?> 
```

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:23:04.383

您必须先连接到您的 mysql 数据库，然后才能使用该`mysql_real_escape_string`功能。此外，mysql_* 在 php 中已弃用，您应该使用 mysqli 或 pdo 进行数据库工作。

此外，`mysql_real_escape_string`旨在保护 mysql 数据库免受注入尝试，但您只是发送电子邮件。

# java - 如何在不使用常规客户端-服务器套接字编程的情况下在 java 中发送一个字节？

> ID：13189249
> 
> 赞同：0
> 
> 时间：2012-11-02T04:19:09.347
> 
> 标签：java, sockets

我有一个要求，我需要测试发送几个字节所需的时间。但是，我不想编写套接字程序并跳入复杂性，我只想将字节“转储到黑暗中”，而不关心是否建立了连接或接收到了字节。我的唯一目标是测量程序发送这么多字节所花费的时间。实现这样的目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T04:21:30.267

[UDP](https://en.wikipedia.org/wiki/User_Datagram_Protocol)应该做你想做的事。您可以在 Java 中使用[DatagramSocket](http://docs.oracle.com/javase/7/docs/api/java/net/DatagramSocket.html)。

UDP 是一种网络协议，它在发送数据之前不建立连接，并且没有任何（内置）方法来确保对方收到它。

# ios - Novocaine - 如何循环播放文件？(iOS)

> ID：13189251
> 
> 赞同：1
> 
> 时间：2012-11-02T04:19:38.630
> 
> 标签：ios, core-audio

我正在为我的音频项目使用 alexbw [Novocaine的 Novocaine。](https://github.com/alexbw/novocaine)

我正在使用此处的示例代码进行文件读取。文件播放没有问题。我想用循环之间的间隙循环这段录音 - 关于我如何做到这一点的任何建议？

谢谢。

码头。

```
// AUDIO FILE READING OHHH YEAHHHH
// ========================================

NSArray *pathComponents = [NSArray arrayWithObjects:
                           [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject],
                           @"testrecording.wav",
                           nil];
NSURL *inputFileURL = [NSURL fileURLWithPathComponents:pathComponents];
NSLog(@"URL: %@", inputFileURL);

fileReader = [[AudioFileReader alloc]
              initWithAudioFileURL:inputFileURL
              samplingRate:audioManager.samplingRate
              numChannels:audioManager.numOutputChannels];

[fileReader play];
[fileReader setCurrentTime:0.0]; 
//float duration = fileReader.getDuration;

[audioManager setOutputBlock:^(float *data, UInt32 numFrames, UInt32 numChannels)
 {
     [fileReader retrieveFreshAudio:data numFrames:numFrames numChannels:numChannels];         
     NSLog(@"Time: %f", [fileReader getCurrentTime]);

 }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-09T05:59:59.073

这对我有用：

```
[audioManager setOutputBlock:^(float *data, UInt32 numFrames, UInt32 numChannels)
 {
     if( ![fileReader playing] ){

//      [fileReader release]; // for some reason this is causing an error, but I assume if you don´t do it, it will eventually cause a memory problem
//      fileReader = nil;

        [self playSound];
     } else {
         [fileReader retrieveFreshAudio:data numFrames:numFrames numChannels:numChannels];         
         NSLog(@"Time: %f", [fileReader getCurrentTime]);
    }
 }];

- (void) playSound
{
    NSArray *pathComponents = [NSArray arrayWithObjects:
                           [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject],
                           @"testrecording.wav",
                           nil];
    NSURL *inputFileURL = [NSURL fileURLWithPathComponents:pathComponents];
    NSLog(@"URL: %@", inputFileURL);

    fileReader = [[AudioFileReader alloc]
                  initWithAudioFileURL:inputFileURL
                  samplingRate:audioManager.samplingRate
                  numChannels:audioManager.numOutputChannels];

    [fileReader play];
    [fileReader setCurrentTime:0.0]; 
    //float duration = fileReader.getDuration;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-19T11:00:33.327

您还可以像这样修改 AudioFileReader.mm：

```
if ((self.currentFileTime - self.duration) < 0.01 && framesRead == 0) {
    [self setCurrentTime:0.0];
} 
```

在发现：

```
- (void)bufferNewAudio 
```

这将导致循环文件读取器，而无需重新初始化它。

缺点是，您必须修改其中一个框架文件...

希望能帮助到你！

# php - 使用 PHP 将日期和时间表单字段发送到 MySQL

> ID：13189252
> 
> 赞同：0
> 
> 时间：2012-11-02T04:19:49.257
> 
> 标签：php, mysql, forms, html

我在帖子中搜索了答案，最接近的答案来自主题“trying-to-post-date-via-php-with-mysql-need-help”

我有一个带有 2 个输入字段和 . 的表单。用户从 html5 弹出日历选择器中选择日期，输入时间，然后将表单提交到 mysql 数据库。我无法获取日期和时间字段以验证/上传到数据库。

在我的 MySQL 数据库中，我有一个名为约会的表，其中有一列名为 curdate，其类型为 DATE；另一列称为 curtime，类型为 TIME。

我的 PHP 文件在文件顶部有 PHP 验证和 SQL 操作，在底部有粘性 html 表单。表单用于发送表单

这是代码：

```
$td = date( 'Y-m-d H:i:s', $phpdate );
$phpdate = strtotime( $td );
if(isset($_POST['submitted'])) {
    require_once('mysqli_connect.php');
    $errors=array();
if(empty($_POST['curdate'])) {
            $errors[]='Your date did not match';
        } else {
            $td=mysqli_real_escape_string($dbc,trim($_POST['curdate']));
    }

    if(empty($_POST['curtime'])) {
            $errors[]='Your time is empty';
    } else {
        $tt=$_POST['curtime'];
    }
if(empty($errors)) {
    $q="INSERT INTO users (first_name,last_name,email,curdate,curtime,physician,reason) VALUES ('$fn','$ln','$e','$td','$tt','$phys','$reason')";
    $r=@mysqli_query($dbc,$q);

    if($r) {
        echo '<h1>Thanks</h1>
        <p>You are now registered</p><p><br/></p>';
    } else {
        echo '<h1>System Error</h1>
        <p class="error">You could not be registered</p>';
        echo '<p>'.mysqli_error($dbc).'<br/><br/>Query:'.$q.'</p>';
    }

    mysqli_close();
    include('includes/footer.html');
    exit();
    } else {
    echo '<h1>Error</h1>
    <p class="error">The following errors occurred:<br/>';
    foreach ($errors as $msg) {
        echo "-$msg<br/>\n";
    }
    echo '</p><p> Please try again</p><p><br/></p>';
    }
    mysqli_close($dbc);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T04:37:15.513

Mysql 或 Mysqli 支持日期格式为 'yyyy-mm-dd' 所以你需要在插入数据库之前以正确的格式转换日期和时间

如果您想在用户提交表单时插入当前日期和时间，请使用以下查询

```
    插入用户（名字，姓氏，电子邮件，curdate，curtime，医师，原因）
               值 ('$fn','$ln','$e',CURDATE(),CURTIME(),'$phys','$reason')

```

但是，如果您想从表单字段中插入日期，请​​执行以下操作

```
    $td=$_POST['curdate'];
    $tt=$_POST['curtime'];

    $td=date('Ymd',strtotime($td)); //将日期转换为mysql可接受的'yyyy-mm-dd'
    $tt=date('H:i:s',strtotime($tt)); //将时间转换为 HH:mm:ss

    //现在将您的查询应用为
     插入用户（名字，姓氏，电子邮件，curdate，curtime，医师，原因）
               值（'$fn','$ln','$e','$td','$tt','$phys','$reason'）

```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T17:54:40.363

您可能会遇到问题，如果您在 mysql 中以表 dateandtime 类型创建了该行，如果是这种情况，您将无法像那样存储它。如果您希望它像那样，只需使用 text 或 varchar ....

DATE - 以 YYYY-MM-DD 形式存储日期值。例如 2008 年 10 月 23 日。DATETIME - 存储格式为 YYYY-MM-DD HH:MM:SS 的日期和时间值。例如 2008-10-23 10:37:22。支持的日期和时间范围是 1000-01-01 00:00:00 一直到 9999-12-31 23:59:59 TIMESTAMP - 与 DATETIME 类似，但根据 MySQL 的版本和模式有所不同服务器在其中运行。

# java - 如何使用 Android 2.36 (Gingerbread) 开发/编码 WIFI Direct？

> ID：13189253
> 
> 赞同：1
> 
> 时间：2012-11-02T04:19:51.250
> 
> 标签：java, android, android-wifi, wifi-direct

有些手机在安装 Android OS 2.3.x 的同时有 Wifi Direct 应用程序。但 Android 4.0 或更高版本支持 Wifi 直接 API。

那么我可以使用 Android 2.3 直接为 Wifi 开发（代码）吗，有没有这样的库或方法可以这样做（例如使用 NDK 或其他）？请提供链接或详细信息！谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T07:37:47.580

您应该看到以下链接：

[适用于 Android 版本 2.3+ 的 WiFi Direct](https://stackoverflow.com/questions/12000286/wifi-direct-for-android-version-2-3)。

[我们可以让 wifi direct api 在 2.3 版本中工作吗](https://stackoverflow.com/questions/8381831/can-we-have-wifi-direct-api-working-in-2-3-version)？

答案是不。您可以在装有 Android 2.3 的设备中使用内置的 wifi Direct 应用程序。请注意，在官方网站上，Google 仅支持 Android 4.0 的 Wifi Direct API。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-06T00:40:19.180

严格来说不，Gingerbread 不支持 Wi-Fi Direct。运行此版本 Android 的设备既不能充当群组所有者，也不能使用 Wi-Fi Direct 呼叫连接到其他 Wi-Fi Direct 设备。

也就是说，Gingerbread 设备可以使用其标准 Wi-Fi 接口连接到 Wi-Fi Direct 设备。在 Wi-Fi Direct 设备上，WifiP2pManager 类定义了一个 createGroup 方法，该方法使设备成为组所有者，不仅可以接受来自其他 Wi-Fi Direct 设备的连接，还可以接受旧版 Wi-Fi 设备。为了实现这一点，该设备可以有效地充当接入点，并且可以与任何 Wi-Fi 设备（包括 Gingerbread 设备）连接。

您需要设计一种机制来将 SSID 和密钥从 Wi-Fi Direct 设备传输到 Gingerbread 设备。这样，设备就可以使用 Wi-Fi 以编程方式连接到 Wi-Fi Direct 组。

# joomla - 从组件 Joomla 3.0 获取参数值

> ID：13189258
> 
> 赞同：0
> 
> 时间：2012-11-02T04:20:24.527
> 
> 标签：joomla, joomla1.5, joomla2.5

我在我的组件表字段参数中保存了这样的值。

```
unique=1
default_value=Default
validate=Validate
validate_error_msg=Validate error messag
searchable=1 
```

现在我想在我的组件中获取值。所以我以这种方式在组件的 view.html.php 中传递值， `$params = new JForm($row->params);`但它不起作用。现在我想获得价值，所以我采取这样的方式

```
$this->params->getValue('default_value'); 
```

但它在 Joomla 2.5 中不起作用，我们可以像这样获得价值

```
$this->params->get('default_value'); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T07:28:05.393

像这样试试

对于前。

```
$param  = JComponentHelper::getParams('com_users');
$default = $param->get('default_value'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T10:27:43.610

你试过用

```
$params->get('your_parameter_value_name'); 
```

代替

```
$this->params->get('your_parameter_value_name'); 
```

它应该工作。

# mongodb - 如何遍历这个并排序

> ID：13189260
> 
> 赞同：3
> 
> 时间：2012-11-02T04:20:33.730
> 
> 标签：mongodb

我正在学习使用 python 语言的 mongo 课程。我必须删除/删除每个学生的最低作业成绩。通过这个查询，我提取了作业成绩，并按学生和成绩对它们进行了排序

```
db.grades.find( { 'type' : 'homework' }, { 'student_id' : 1, 'score' : 1, '_id' : 0}).sort({ 'student_id' : 1, 'score' : 1 }) 
```

我安排了查询，以便只显示学生 ID 和分数，就像这样。这些只是前10名学生。实际上有 400 个。现在我必须对它们进行排序并删除每个的最低等级。

问题是，我如何对此进行排序以删除每个学生的最低成绩？

```
{ "student_id" : 0, "score" : 14.8504576811645 }
{ "student_id" : 0, "score" : 63.98402553675503 }
{ "student_id" : 1, "score" : 21.33260810416115 }
{ "student_id" : 1, "score" : 44.31667452616328 }
{ "student_id" : 2, "score" : 60.9750047106029 }
{ "student_id" : 2, "score" : 97.75889721343528 }
{ "student_id" : 3, "score" : 50.81577033538815 }
{ "student_id" : 3, "score" : 92.71871597581605 }
{ "student_id" : 4, "score" : 5.244452510818443 }
{ "student_id" : 4, "score" : 28.656451042441 }
{ "student_id" : 5, "score" : 23.29430953857654 }
{ "student_id" : 5, "score" : 41.21853026961924 }
{ "student_id" : 6, "score" : 81.23822046161325 }
{ "student_id" : 6, "score" : 89.72700715074382 }
{ "student_id" : 7, "score" : 63.35102050393443 }
{ "student_id" : 7, "score" : 85.56691619291915 }
{ "student_id" : 8, "score" : 66.42784200049636 }
{ "student_id" : 8, "score" : 67.29005808579812 }
{ "student_id" : 9, "score" : 16.60130789148128 }
{ "student_id" : 9, "score" : 75.29561445722392 } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-03T23:45:25.987

这是用 JavaScript 编写的解决方案

```
var students = db.grades.find( { 'type' : 'homework' }, { 'student_id' : 1, 'score' : 1, '_id' : 0}).sort({ 'student_id' : 1, 'score' : 1 })

// Create a variable to track student_id so we can detect when it changes
var id = "";

// Loop through our query results. Each document in the query is passed into a function as 'student'
students.forEach(function (student) { 
    if (id !== student.student_id) { 
        db.grades.remove(student)
        id = student.student_id; 
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-04T19:56:06.843

哈哈，这是我做功课的方法：

```
import pymongo
import sys
connection = pymongo.Connection("mongodb://localhost", safe=True)
db=connection.students
grades = db.grades

def delete_lowest_score():

print "grading nice?! look at these scores now!"

query = {'type':'homework'}
sort = [('student_id',pymongo.ASCENDING),('score',pymongo.ASCENDING)]
track = -1

try:

    cursor = grades.find(query).sort(sort)

except:
    print "Unexpected error:", sys.exc_info()[0]

for doc in cursor:
    if doc['student_id'] != track:
        grades.remove(doc)
        track = doc['student_id']

delete_lowest_score() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-12-09T17:03:47.497

```
connection = pymongo.MongoClient("mongodb://localhost" , safe = True)
db = connection.students           
collection = db.grades      
query = {}
iter = collection.find({'type':'homework'}).sort([('student_id',pymongo.ASCENDING),  ('score',pymongo.ASCENDING)])
try:
    for doc in iter:
    nextStudentId =  iter.next()
        if ((doc['student_id']) == nextStudentId['student_id']):
            collection.remove({"_id":doc['_id']})
except:
    print "Error trying to read collection:" + sys.exc_info()[0] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-11T03:33:49.360

我一直在上同样的课程。

现在截止日期已经过去......以下似乎可以解决问题：

```
import pymongo, sys
connection = pymongo.Connection("mongodb://localhost",safe=True)
db=connection.students
### s1 for sample (a cursor (iterable)); sort first by "student_id"
s1=db.grades.find({"type":"homework"}).sort([("student_id", pymongo.ASCENDING),("score", pymongo.DESCENDING)])
### c1 is a counter; note every 2nd record will be the lower score for that student 
c1=1
for d in s1: # d for document
    id1=d["_id"] # id1 is particular id
    if c1%2==0: # c1 divisible by 2?
       db.grades.remove({"_id":id1})
    c1=c1+1 
```

这将修改原始集合，删除作业中两个分数中较低的所有记录，留下 600 条记录。更改为`mongo`界面，您将能够复制`Java` [此处](https://education.10gen.com/courses/10gen/M101/2012_Fall/courseware/Week2_-_CRUD/Homework_2.2/)给出的所有示例。

我承认这是@scicholas 答案的一个变体，只是有点简洁。起初我在使用游标时遇到了麻烦，因为在运行上述内容之前迭代记录。如果您在 Python 中以交互方式检查它，请不要忘记`s1.rewind()`先重置它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-08-16T05:41:44.343

这是在 C# 中

```
static async Task MainAsync(string[] args)
    {
        var connectionString = "mongodb://localhost:27017";
        var client = new MongoClient(connectionString);

        var db = client.GetDatabase("students");
        var col = db.GetCollection<Grade>("grades");

        var builder = Builders<Grade>.Filter;
        var filter = builder.Eq("type", "homework");
        var gradedHomework = await col.Find(filter)
                .Sort(Builders<Grade>.Sort.Ascending("student_id").Ascending("score"))
                .ToListAsync();

        var sid = -1;

        foreach (Grade doc in gradedHomework)
        {

            if (sid != doc.student_id)
            {
               var result = await col.DeleteOneAsync(x => x.Id == doc.Id);
                Console.WriteLine(doc.score);
                sid = doc.student_id;
            }

        }

    }

    public class Grade
    {
        public object Id { get; set; }
        public int student_id { get; set; }
        public string type { get; set; }
        public double score { get; set; }
    }
} 
```

# apache2 - Apache2 别名在 Ubuntu 中不起作用？

> ID：13189261
> 
> 赞同：4
> 
> 时间：2012-11-02T04:20:46.453
> 
> 标签：apache2, ubuntu-12.04

我刚刚在 Ubuntu 12.04 中设置了 apache/php/mysql，并为我的虚拟目录创建了别名，这是我的 /etc/apache2/sites-enabled/000-default 文件：

```
Alias /demo/ "/home/czetsuya/projects/eclipse/eclipse-php/demo-portfolio"
<Directory "/home/czetsuya/projects/eclipse/eclipse-php/demo-portfolio">
    DirectoryIndex index.php
    Options Indexes MultiViews FollowSymLinks
    AllowOverride All
    Order deny,allow
    Deny from all
    Allow from all
</Directory> 
```

请注意，我已经将 chown 和 chmod 应用于：/home/czetsuya/projects/eclipse/eclipse-php/demo-portfolio

```
chown www-data:www-data /home/czetsuya/projects/eclipse/eclipse-php/demo-portfolio -R
chmow 777 /home/czetsuya/projects/eclipse/eclipse-php/demo-portfolio -R 
```

但是当我访问：_http://localhost/demo 时，我得到了 404 Not found 错误。查看 /var/log/apache2/error.log 我发现它仍然指向 /var/www/demo：

```
File does not exist: /var/www/demo 
```

知道为什么 Alias 会被忽略吗？

请注意，我已经重新启动并重新加载了 apache2。并且还启用了重写。

谢谢，
czetsuya

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T04:25:07.647

您的问题很可能可以通过[mod_alias 手册](http://httpd.apache.org/docs/2.2/mod/mod_alias.html)解决；

> 请注意，如果您在 URL 路径中包含尾随 /，则服务器将需要尾随 / 以扩展别名。也就是说，如果你使用
> 
> 别名 /icons/ /usr/local/apache/icons/ 那么 URL /icons 将不会被别名，因为它缺少尾随 /。

尝试在您的别名中更改`/demo/`为`/demo`，它应该会更好。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-08-13T19:28:18.427

Apache 2.4 中的所有别名都必须在`/etc/apache2/mods-enabled/alias.conf`文件中进行配置。

它们在虚拟主机文件中被忽略。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-01-10T09:17:56.367

家伙要注意这些 SLASHES 的确切语法，它不能在目录名称的末尾，也不能在别名的末尾，这让我花费了难以置信的时间来发现这个错误，来自 apache 的工作人员非常好！正确方式：别名“/docs”“/var/web” 错误方式：别名“/docs/”“/var/web/”

# mysql - 将字符串添加到mysql结果

> ID：13189267
> 
> 赞同：4
> 
> 时间：2012-11-02T04:21:23.777
> 
> 标签：mysql, string, add

我需要带有一些前缀和后缀的 mySql 结果。这是我的代码：

```
SELECT bk_id, bk_rtype, villas_db.v_name AS villa_name
FROM booking_db
INNER JOIN villas_db ON booking_db.bk_vid = villas_db.v_id
WHERE '2012-11-02'
BETWEEN bk_date1
AND bk_date2
ORDER BY bk_id DESC
LIMIT 0 , 30 
```

结果是：

```
bk_id   bk_rtype    villa_name
30          2           T2
29          3           V1 
```

所以我需要结果为：

```
bk_id   bk_rtype    villa_name     booking_no
30          2           T2         B2-00030
29          3           V1         B3-00029 
```

而 B 是由“-”和 sprintf("%05d",bk_id); 分隔的预订前缀；

请建议。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T04:25:26.443

您可能希望使用`CONCAT`和`LPAD`功能如下：

```
 SELECT bk_id, bk_rtype, villas_db.v_name AS villa_name, 
        CONCAT('B',bk_rtype,'-', LPAD(bk_id, 5, '0')) AS booking_no
 FROM booking_db
 INNER JOIN villas_db ON booking_db.bk_vid = villas_db.v_id
 WHERE '2012-11-02'
     BETWEEN bk_date1
     AND bk_date2
 ORDER BY bk_id DESC 
 LIMIT 0 , 30 ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T04:36:39.590

我找到了我的解决方案：

```
SELECT bk_id, bk_rtype, villas_db.v_name AS villa_name, concat( 'B', bk_rtype, '-', lpad( bk_id, 5, 0 ) ) AS booking_no
FROM booking_db
INNER JOIN villas_db ON booking_db.bk_vid = villas_db.v_id
WHERE '2012-11-02'
BETWEEN bk_date1
AND bk_date2
ORDER BY bk_id DESC
LIMIT 0 , 30 
```

# apache - 我可以只在内部重写 url 而不更改地址栏中的 url 吗？

> ID：13189271
> 
> 赞同：0
> 
> 时间：2012-11-02T04:21:54.990
> 
> 标签：apache, url, mod-rewrite, url-rewriting

我目前正在使用

`RewriteRule ^(.*)wordpress(.*) $1wp-oct/live$2`

将我的测试安装重新映射`www/wp-oct/live/`到`http://localhost/wordpress/`

它可以完成这项工作，但它也会将地址栏中的 url 更改为`http://localhost/wp-oct/live`

有没有办法将网址保留在地址栏中`http://localhost/wordpress/`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:52:49.633

您可能希望使用`mod_proxy`它而不是重写：

```
<IfModule mod_proxy.c>
  ProxyRequests Off

  <proxy *>
    Order deny,allow
    Allow from all
  </proxy>

  ProxyPass /wordpress http://localhost/wp-oct/live
  ProxyPassReverse /wordpress http://localhost/wp-oct/live
</IfModule> 
```

# php - PHP - 正则表达式 - 数组 - 找到最后一个数字并将它们加在一起

> ID：13189272
> 
> 赞同：0
> 
> 时间：2012-11-02T04:21:58.130
> 
> 标签：php, regex, arrays, file

我得到了一个包含类似于这种结构的文件：

```
12345    ABC  100M 001   2.0  ABC    1010  4510  A01 451  Apple, Johnny A  150

12345    ABC  100M 011   2.0  ABC    1010  4510  A01 451  Apple, Johnny A  80

12345    ABC  100 011   2.0  ABC    1010  4510  A01 451  Apple, Johnny A  80 
```

我需要从这个文件中获取以下部分：

*   如果它们相似，则将第三列（即 100M）组合在一起
*   将第四列加在一起（如果它们与第三列在同一组中）
*   根据第四列将最后一列相加

我设法做到了以下几点：

```
$List1 = array();
$grab = fopen("file.txt", "r") or die("Can't open file");
$check = fgets($grab);

 while(!feof($grab)) {    
   if (ereg("^[[:digit:]]{5} +ABC +([[:digit:]]{3}[[:alpha:]]?)+ ([[:digit:]]{3})",
     $check, $output)) {
  if (!in_array($output[1], $List1)) {      
    array_push($List1, $output[1]);               
  } 
      if (!in_array($output[2], $List1)) {        
    array_push($List1, $output[2]);                    
  } 
}    
$check = fgets($grab);
 }     
 fclose($grab); 

foreach ($List1 as $list) {
   print "$list <br/>";     
 } 
```

我设法以某种方式将第三列组合在一起。
正在显示第四列，但如果它在同一组下，我不确定如何将它组合到第三列中。
而且我不确定如何轻松获取文件/数组中的最后一位。有没有捷径可以获取文件中的最后一个并将它们相加？

提前感谢任何可以帮助我的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:36:39.310

这应该这样做：

```
$string = '12345    ABC  100M 001   2.0  ABC    1010  4510  A01 451  Apple, Johnny A  150

12345    ABC  100M 011   2.0  ABC    1010  4510  A01 451  Apple, Johnny A  80

12345    ABC  100 011   2.0  ABC    1010  4510  A01 451  Apple, Johnny A  80';

$third = array();
$fourth = array();

foreach (explode("\n", $string) as $line)
{
    // Skip empty lines.
    if (empty($line))
        continue;

    // Clean up any excessive white space.
    $line = trim(preg_replace('~[\s]{2,}~', ' ', $line));

    $info = explode(' ', $line);

    if (!isset($third[$info[2]]))
        $third[$info[2]] = array();

    $third[$info[2]][] = $info;

    if (!isset($fourth[$info[3]]))
        $fourth[$info[3]] = 0;

    $fourth[$info[3]] += (int) end($info);
}

print_r(array(
    'third' => $third,
    'fourth' => $fourth,
)); 
```

# ios - UIViewAnimationOptionLayoutSubviews 如何工作的示例？

> ID：13189275
> 
> 赞同：8
> 
> 时间：2012-11-02T04:22:13.727
> 
> 标签：ios, core-animation

Apple 的文档描述`UIViewAnimationOptionLayoutSubviews`为：

> 在提交时布置子视图，以便它们与父视图一起动画。

这是我感兴趣的代码示例。我希望为`-layoutSubviews`of设置动画`detailView`；但是，它似乎没有布局 的子视图`detailView`，所以我不确定它实际上有什么效果。

```
 void (^animation) () = ^
    {
        [self.detailView setNeedsLayout];
        [self.detailView layoutIfNeeded];
    };

    [UIView animateWithDuration:0.5
                          delay:0.0
                        options:UIViewAnimationOptionLayoutSubviews
                     animations:^{
                         animation();
                     }
                     completion:nil]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-25T05:39:11.210

由于您希望您的第二个动画从您的第一个动画的当前状态发生（无论它是否完成），我建议在设置您的第二个动画时使用 UIViewAnimationOptionLayoutSubviews 选项。

```
[UIView animateWithDuration:0.2
                      delay:0.0
                    options:UIViewAnimationOptionLayoutSubviews
                 animations:^{
                     CGAffineTransform settingsTransform = CGAffineTransformMakeTranslation(self.animatedView.frame.size.width, 0);
                        self.animatedView.transform = settingsTransform;
                 } 
completion:nil]; 
```

# facebook - 从移动应用程序存储 Facebook 用户 ID 的最佳实践？

> ID：13189279
> 
> 赞同：1
> 
> 时间：2012-11-02T04:23:15.140
> 
> 标签：facebook, facebook-graph-api, webserver, facebook-ios-sdk

我有一个需要用户登录的移动应用程序，用户帐户存储在我的服务器上。将用户帐户与其 Facebook 帐户关联的最佳方式是什么？

例如，您可以使用 Facebook 移动 SDK 登录，然后将 Facebook 用户 ID 发送到服务器。但是我担心这意味着有人可以发送其他人的 FB 用户 ID（因为这些用户 ID 是公开的）。

相反，我发送访问令牌，并在我的服务器上检索用户 ID。不过，这似乎有点低效，因为我实际上是在进行两次查找——一次在客户端获取访问令牌，然后一次在服务器上。

进行双重查找或直接发送用户 ID 是否更有意义？或者，还有更好的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T22:27:57.190

唯一安全的方法是将令牌发送到服务器并让服务器检索用户 ID。这就是诸如[stackmob](http://www.stackmob.com)和[parse](http://www.parse.com)之类的服务的工作方式。

# solr - solr/lucene 按匹配文本的百分比评分？

> ID：13189281
> 
> 赞同：1
> 
> 时间：2012-11-02T04:23:26.227
> 
> 标签：solr, lucene

Solr/Lucene 相当新。我有一个简单的要求，不确定配置 solr 是否容易做到这一点。

假设所有文档只有一个文本字段，未标记。

当查询进来时，我希望结果按匹配（包含）文本的百分比排序。百分比由下式计算`len(query)/len(matched text field)`

例如，有三个文档，文本字段如下：
doc1：abcdefghij
doc2：abcdefgh
3：abc

如果搜索词是“cde”，则匹配文档 1 和文档 2（文本字段包含搜索词）。对于文档 1，百分比匹配 = 3/10=30%
对于文档 2，百分比匹配 = 3/8=37.5%

所以结果应该是：
doc2
doc1

这有意义吗？如何使用 solr 实现它？

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T05:02:34.553

您可以覆盖 Lucene 评分。

扩展[org.apache.lucene.search.DefaultSimilarity](http://lucene.apache.org/core/old_versioned_docs/versions/3_5_0/api/all/org/apache/lucene/search/DefaultSimilarity.html)，定义您的自定义评分算法。

许多 DefaultSimilarity 方法您可能只想存根，例如 idf（只返回 1），以便更复杂的评分元素不会影响您的结果。

然后在 solr 中的 schema.xml 中添加一行，将其配置为使用您的评分类，例如：

```
<similarity class="com.mycompany.MySimilarity" /> 
```

这是一个页面，其中包含有关评分工作原理的一些信息，请在此处查看：[Lucene Scoring](http://lucene.apache.org/core/3_6_0/scoring.html)。那里还有一些关于添加自定义功能的资源，这可能有助于组合一个可用的 Similarily 类。

不过，老实说，特别是如果您是 Lucene/Solr 的新手，那么获得一些默认评分的经验可能会更好。它工作得很好，你把它扔掉会删除很多有价值的功能。

编辑：

请注意，这提供了一种可能（虽然不是很漂亮）的方式来实现相似性。再往下看另一种方式。您仍然需要自定义相似度，但它更简单。

好吧，这里是一个刺。我还没有测试过它（现在还不能这样做），但也许它会为你指明正确的方向。

可能最简单的方法是为每个字段存储一个规范来编码术语的长度。为此，请覆盖 computeNorm，并返回取自第二个参数的长度的倒数。

为了计算您指定的精确评分，您需要访问匹配的查询词，或者它的长度。两者都不是很容易。您可能会找到一种方法，或者您可以手动将该值传递给相似性类。由于您只需要按照您指定的顺序获取值，因此说明您的要求的另一种方式是“从最短到最长的顺序结果”。我们已经用 computeNorm 完成了。

然后，您只需将其余部分存根，从而产生以下内容：

```
float computeNorm(String field, FieldInvertState state) {
    int length = state.getOffset() - state.getPosition();
    return 1.0 / (float)length;
}
float coord(int overlap, int maxOverlap) {
    return 1;
}
float idf(int docFreq, int numDocs) {
    return 1;
}
float tf(float freq) {
    return 1;
}
float queryNorm(float sumOfSquaredWeights) {
    return 1;
}
float sloppyFreq(int distance) {
    return 1;
}
float lengthNorm(string fieldName, int numTerms) {
    return 1;
} 
```

注意：范数是在文档被索引时计算的，所以插入文档时必须使用这个相似度才能生效。查询时间为时已晚，无法设定标准。由于压缩，它也非常近似。

一种更简单的方法（也许）：

你知道，现在我想起来了，因为相同的排序是通过从最短到最长排序来获得的，你可以在没有新的相似性类的复杂性的情况下做到这一点。当您添加文档时，您可以应用字段级提升来完成同样的事情。只需将这些术语中的每一个提高 1/length 或一些类似的方法。

如果插入 abcde，则对该字段应用 1/5 的提升。

完成此操作后，您甚至可以查询“term:abc*^3”，这将允许您获得之前指定的百分比分数（尽管效果几乎相同，只有一个查询词）。

如果您使用这样的提升得分，我认为您应该能够在您的 CustomSimilarity 中删除所有内容。在这种情况下，'idf' 和 'tf' 可能是您真正需要担心的全部覆盖。

# java - 导入自定义java文件

> ID：13189282
> 
> 赞同：0
> 
> 时间：2012-11-02T04:23:28.487
> 
> 标签：java

我目前正在尝试阅读我在网上找到的一些 Java 源代码来学习和学习这些材料。我想先编译这些文件，以确保它们在我研究之前能正常工作。但是，当我尝试编译时，编译器会抱怨它找不到一些需要导入的文件。所以打开main.java，我发现

```
 package br.com.seimos.minijava;

 import java.io.BufferedReader;
 import java.io.FileNotFoundException;
 import java.io.FileReader;
 import java.util.ArrayList;

 import br.com.seimos.minijava.parser.MiniJavaParser;
 import br.com.seimos.minijava.syntaxtree.Program;
 import br.com.seimos.minijava.visitor.TreeDumper;
 import br.com.seimos.minijava.visitor.TreeFormatter; 
```

我得到的错误来自于无法找到`MiniJavaParser`，`TreeDumper`...第三块代码。这些文件与主文件存在于同一目录中，那么发生了什么？什么是`br.com.seimos.minijava`东西？我尝试将文件放在那些文件夹中（如 中`br\com\seimos\minijava\PUT_FILES_HERE`），但仍然不行。是否`br`需要在根目录下？

谢谢，我意识到这可能是一个非常基本的问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T04:30:24.563

因为`import br.com.seimos.minijava.parser.MiniJavaParser;`您的`MiniJavaParser`班级必须在目录中`br\com\seimos\minijava\parser\`而不是`br\com\seimos\minijava\`. 其他类也是如此。尝试改变它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:30:52.557

你在正确的轨道上。您需要按照`br/com/seimos/minijava/...`每个文件的包名称将这些文件放入其中。Java 要求您将文件放在与其包名称匹配的目录层次结构中。

然后，您需要使用如下命令进行编译：

```
javac br/com/seimos/minijava/parser/MiniJavaParser.java 
```

这在命令行中有点不方便，尤其是对于一个较大的项目，所以你最好获得一个 Java IDE 并让它帮助你安排文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T04:31:47.807

所需的目录结构是`br/com/seimos/minijava/OTHER_FOLDERS/SOURCE_FILES.java`. 例如，路径`MiniJavaParser`应该是`br/com/seimos/minijava/parser/MiniJavaParser.java`. 然后，您应该从`br`.

如果您使用的是 Eclipse 或其他 IDE，您应该配置您的项目设置来处理这个问题。

# objective-c - 代码中添加的 UIButton 对触摸没有响应

> ID：13189292
> 
> 赞同：1
> 
> 时间：2012-11-02T04:24:24.860
> 
> 标签：objective-c, ios

我只是添加一个带有按钮的快速介绍屏幕，它可以正确编译和显示，但我的按钮没有响应。

```
- (void)viewDidLoad {
   [super viewDidLoad];
   NSLog(@"viewDidLoad!");
   [self showIntro];
}

//  make a quick Intro screen
- (void) showIntro {
   UIImageView *myBackImage = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320, 460)];
   [myBackImage setImage:(UIImage *) [UIImage imageNamed:@"myBkgnd.png"]];

   UIButton *clickBtn = [UIButton buttonWithType:UIButtonTypeCustom ];
   [clickBtn addTarget:self action:@selector(myButton_pressed:) forControlEvents:UIControlEventTouchUpInside];
   [clickBtn setImage:(UIImage *) [UIImage imageNamed:@"btnImage.png"] forState:UIControlStateNormal];
   clickBtn.frame = CGRectMake(111, 200, 75, 60);
   [myBackImage addSubview:clickBtn];
   [self.view addSubview:myBackImage];
}

- (void)myButton_pressed:(UIButton*)button {
   NSLog(@"Button Pressed!");
} 
```

我在看什么？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T04:31:08.883

正如您已添加`UIButton`但您没有`UIImageView`忘记`imageView's` `userInteraction`. `default NO`所以 ：

```
myBackImage.userInteractionEnabled = YES; 
```

**编辑**：刚刚格式化

# c# - LINQ 查询以选择畅销书

> ID：13189295
> 
> 赞同：4
> 
> 时间：2012-11-02T04:24:38.440
> 
> 标签：c#, asp.net, linq, entity-framework

聪明人可以帮我写一个 LINQ 查询来获得最畅销的产品，我在[实体框架](http://msdn.microsoft.com/en-us/data/ef.aspx)模型中有这两个表/类：

```
Orders (OrderedItems)
OrderedItem (Product, Qty) 
```

例如。（这显然行不通）

```
Orders.OrderByDescending(o => Sum(o.OrderedItems.Qty))
      .Select(o => o.OrderedItems.Product) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T04:41:50.393

您根本不需要 Orders 表。假设每个订购的商品都有相应的订单，您应该能够做到这一点。

```
var query =
    (from item in OrderedItem
    group item.Qty by item.Product into g
    orderby g.Sum() descending
    select g.Key).Take(5); // get the top 5 orders 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T04:41:32.330

```
class Product {
            public int Id { get; set; }
        }
        class OrderedItem
        {
            public Product Product { get; set; }

            public int Qty { get; set; }
        } 
```

进而：

```
 List<OrderedItem> orders = new List<OrderedItem>();
        var products = orders.GroupBy(p => p.Product.Id).OrderByDescending(pi => pi.Sum(pii => pii.Qty)).Select(p=>p.Key); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T04:39:47.340

我认为您使用[Sum](http://msdn.microsoft.com/en-us/library/bb534734.aspx)不正确。我想这就是你想要的

```
Orders.OrderByDescending(o => o.OrderedItems.Sum(oi => oi.Qty))
      .Select(o => o.OrderedItems.Product) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-09-09T11:10:08.047

```
 public IQueryable<Product> Bestsellers(int? count)
    {
        var query = (from item in db.OrderDetails
                     group item.Qty by item.Product into g
                     orderby g.Sum() descending
                     select g.Key).Take(count??20); // get the top 5 orders

        return query;
    } 
```

# qt - 如何获取 iframe/frame QWebElement 的 QWebFrame？

> ID：13189296
> 
> 赞同：4
> 
> 时间：2012-11-02T04:24:47.693
> 
> 标签：qt, iframe, qtwebkit

我有使用 QtWebkit 的简单 Qt GUI 应用程序。我正在加载带有大量嵌套 IFRAME 标记的复杂页面。我想遍历完整的 DOM 树（就像 Chrome 浏览器在调试面板中所做的那样），包括 iframe 的内容。

我的代码是：

```
QWebElement doc = ui->webView->page()->mainFrame()->documentElement();
QWebElement iframe = doc.findFirst("iframe[id=someid]");
QWebFrame *webFrame = ....? // how to get the QWebFrame for an iframe/frame QWebElement? 
```

注意：我可以遍历所有帧（包括嵌套）：

```
void MainWindow::renderFramesTree(QWebFrame *frame, int indent)
{
    QString s;
    s.fill(' ', indent * 4);
    ui->textLog->appendPlainText(s + " " + frame->frameName());
    foreach (QWebFrame *child, frame->childFrames())
        renderFramesTree(child, indent + 1);
} 
```

但我的问题与此无关。我需要获取 iframe-QWebElement 对应的 QWebFrame*。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T12:39:22.597

每个 QWebFrame 都有`QList<QWebFrame *> QWebFrame::childFrames () const`方法。每一帧也有`QString QWebFrame::frameName () const`。将两者结合起来可能会让你找到你需要的东西。

```
QWebFrame * frameImLookingFor = NULL;
foreach(QWebFrame * frame, ui->webView->page()->mainFrame()->childFrames())
{
    if (frame->frameName() == QLatin1String("appFrame"))
    {
        frameImLookingFor = frame;
        break;
    }
}

if (frameImLookingFor)
{
    // do what you need
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-07T21:20:54.937

*   在当前帧上运行选择器
*   如果它返回一些好的东西，我们发现我们的 webframe 在当前帧上，让我们调用这个元素 X ：
    *   现在使用当前页面中的选择器“iframe,frame”获取所有框架元素
    *   循环遍历所有这些元素并尝试将它们与 X 框架匹配，这样您就可以在文档中找到 X 框架的确切索引
    *   最后，您现在可以使用该 INDEX 专注于子框架
*   否则这意味着在此框架中找不到选择器
    *   循环遍历所有子帧并为每个子帧重复整个过程

# python - 在 OSX 10.8.2 上让 AppTrace for Google App Engine 与 Python 2.7 一起使用

> ID：13189297
> 
> 赞同：2
> 
> 时间：2012-11-02T04:24:49.893
> 
> 标签：python, google-app-engine, python-2.7

在我的一生中，我无法让 AppTrace 在我的 Google App Engine 开发服务器（OSX 10.8.2 上的 Python 2.7）上工作，主要是因为：

```
ImportError: dlopen(/apptrace/guppy/sets/setsc.so, 2): Symbol not found: __PyLong_AsScaledDouble
Referenced from: /apptrace/guppy/sets/setsc.so
Expected in: flat namespace in /apptrace/guppy/sets/setsc.so 
```

这类似于以下问题，除了问题是询问在 GAE 上分析/监控的最佳方法，并且接受的答案不能解决 ImportError 问题： [Google AppEngine 上的内存分析/监控（python）](https://stackoverflow.com/questions/11202475/memory-profiling-monitoring-python-on-google-appengine)

我也从 Guppy 的跟踪器中发现了这些信息，但它仍然没有解决问题： http: [//sourceforge.net/tracker/ ?func=detail&aid=3047282&group_id=105577&atid=641821](http://sourceforge.net/tracker/?func=detail&aid=3047282&group_id=105577&atid=641821)

当我直接从主干获得 0.1.9 版本时，这是我的输出：

```
pip install https://guppy-pe.svn.sourceforge.net/svnroot/guppy-pe/trunk/guppy
Downloading/unpacking https://guppy-pe.svn.sourceforge.net/svnroot/guppy-pe/trunk/guppy
  Downloading guppy
  Checking out https://guppy-pe.svn.sourceforge.net/svnroot/guppy-pe/trunk/guppy to /var/folders/w7/k0q671gx6hb03_rl_tmcnkq80000gn/T/pip-JA8fuK-build
  Running setup.py egg_info for package from https://guppy-pe.svn.sourceforge.net/svnroot/guppy-pe/trunk/guppy

Cleaning up... 
```

这比 Guppy 跟踪器的输出要少得多。但是，如果我运行 python -c 'import guppy; import guppy.sets' 我仍然得到与以前相同的 ImportError。

我远离 python 甚至 OSX 专家，所以任何关于可能配置不正确或可能指向错误位置的建议都会有所帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T05:56:22.183

成功！基本上当我使用这些说明安装 Guppy 时： [http ://code.google.com/p/apptrace/wiki/UsingApptrace](http://code.google.com/p/apptrace/wiki/UsingApptrace)

我的 OSX 10.8 没有使用 GCC 4.2 构建。我必须更新自制软件才能使用 GCC 4.2 构建：

```
brew update
brew tap homebrew/homebrew-dupes
brew install apple-gcc42 
```

我能够从这篇文章中找到答案： [https ://superuser.com/questions/400179/gcc-on-os-x-lion-with-xcode-4-3-1](https://superuser.com/questions/400179/gcc-on-os-x-lion-with-xcode-4-3-1)

# java - 在一个应用程序中创建两个标签主机

> ID：13189299
> 
> 赞同：1
> 
> 时间：2012-11-02T04:24:53.303
> 
> 标签：java, android, android-activity, android-tabhost

我正在制作一个 android 应用程序，其中我在两个不同的活动中使用两个不同的选项卡主机，但是当我使用第二个选项卡主机进入活动时，我无法区分然后我的应用程序停止。

我的第一个活动中的代码如下：

```
private TabHost tHost_;
private TabSpec tSpec_;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_mypls_shared);
        setTitle("Workout Scheduler");
        tHost_ = (TabHost) findViewById(R.id.tabhost);
        tHost_.setup();
        tSpec_ = tHost_.newTabSpec("tag1");
        tSpec_.setContent(R.id.myTab);
        tSpec_.setIndicator("My Workouts");
        tHost_.addTab(tSpec_);
        tSpec_ = tHost_.newTabSpec("tag2");
        tSpec_.setContent(R.id.shareTab);
        tSpec_.setIndicator("Shared Workouts");
        tHost_.addTab(tSpec_);

    } 
```

在我的 xml 文件中，tabhost 的 android id 指定如下：

```
<TabHost
        android:id="@+id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" > 
```

我的第二个文件中的代码如下：

```
private TabHost tHost_;
private TabSpec tSpec_;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_three_by3);
    setTitle("Workout Scheduler");
    tHost_ = (TabHost) findViewById(R.id.tabhost);
    tHost_.setup();

} 
```

xml 文件如下所示：

```
<TabHost
        android:id="@android:id/tabhost"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1" > 
```

但是，当我进入第二个活动时，应用程序停止。我知道 tabhost 必须这样命名：

```
android:id="@+id/tabhost" 
```

但是如果我有 2 个标签主机，我该怎么办`R.id.tabhost`？

# java - 如何根据频率和日期创建多个对象

> ID：13189304
> 
> 赞同：0
> 
> 时间：2012-11-02T04:25:39.640
> 
> 标签：java

出于某种原因，我无法弄清楚如何以干净的方式对其进行编码。我有一个任务对象，这个对象有一个开始日期和结束日期。我想将此对象传递给将执行此任务的方法，根据频率将其克隆 X 次并将其开始日期设置为发生日期。

当然，可以通过示例更好地说明事情：假设我的任务开始日期为 2012 年 6 月 1 日，结束日期为 2012 年 9 月 15 日。频率设置为每月。我想将此任务传递给一个方法，该方法将为我创建一个包含 4 个任务的数组（6 月、7 月、8 月、9 月），其开始日期设置为相应月份的第一天

```
ArrayList<task> spawnTasks(Task task, Frequency Monthly){
    ArrayList<Task> arr  = new  ArrayList<Task>();

    Task TaskJune = task.clone();
    TaskJune.setStartDate("June, 1, 2012");       

    Task TaskJuly = task.clone();
    TaskJuly.setStartDate("July, 1, 2012");     

    Task TaskAug = task.clone();
    Taskaug.setStartDate("Aug, 1, 2012");     

    Task TaskSept = task.clone();
    TaskSept.setStartDate("Sept, 1, 2012");     

} 
```

所以你可以看到我每月创建一次任务，因为频率是每月一次（我可以只每周或每月一次），它发生在 1 日，因为那是开始日期，它从未超过 9 月，因为结束日期是 9 月 15 日。

我知道我必须使用日历和循环来做到这一点，但我就是想不通

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T16:33:29.713

试试这个：

```
private List<Task> spawn(Task original, Frequency frequency) {

    Date sd = original.getSd();
    Date ed = original.getEd();

    Calendar cal = Calendar.getInstance();
    cal.setTimeInMillis(sd.getTime());

    List<Task> tasks = new ArrayList<Task>();
    for (; cal.getTimeInMillis() <= ed.getTime(); cal.add(frequency.getFrequency(), frequency.getMultiplier())) {
        Task task = original.clone();
        task.setSd(cal.getTime());

        tasks.add(task);
    }

    return tasks;
}

public enum Frequency {

    WEEKLY(Calendar.WEEK_OF_YEAR, 1),
    BIWEEKLY(Calendar.WEEK_OF_YEAR, 2),
    MONTHLY(Calendar.MONTH, 1),
    QUARTERLY(Calendar.MONTH, 3);

    private int frequency;
    private int multiplier;

    Frequency(int frequency, int multiplier) {
        this.frequency = frequency;
        this.multiplier = multiplier;
    }

    public int getFrequency() {
        return frequency;
    }

    public int getMultiplier() {
        return multiplier;
    }

} 
```

# java - java.awt.geom.Area 的 android 等价物是什么？

> ID：13189305
> 
> 赞同：9
> 
> 时间：2012-11-02T04:25:43.963
> 
> 标签：java, android, geometry, shapes

我想构建复杂的形状作为两个圆和一个矩形的交集。经过一番研究，[java.awt.geom.Area](http://docs.oracle.com/javase/tutorial/2d/advanced/complexshapes.html)类似乎非常适合这项任务。

然而，当我发现该`awt`软件包没有附带 android SDK 时，我感到很沮丧。有谁知道android的任何替代方案，允许我通过定义简单形状的联合和交集来创建复杂的形状？

注意：使用图形剪辑来绘制形状是行不通的，因为我不只是想绘制形状，我还想将形状存储在内存中以进行碰撞检测和其他交互。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T04:36:46.653

**java.awt.geom.Area 的 Android 替代品**

**编辑**：@numan 指出了使用 Android SDK 中的一些类的一个*很好*的选择，我在最初回答时不知道：

[https://developer.android.com/reference/android/graphics/Region.html](https://developer.android.com/reference/android/graphics/Region.html) [https://developer.android.com/reference/android/graphics/Region.Op.html](https://developer.android.com/reference/android/graphics/Region.Op.html)

`Region`允许您定义几何区域，然后您可以使用`Region`s`op()`方法`Region.Op` `enum`来计算交叉点和更复杂的形状。

### 其他一些选择

您可以使用 a`Canvas`来绘制自定义形状，尤其是使用 clip* 方法：

[http://developer.android.com/reference/android/graphics/Canvas.html](http://developer.android.com/reference/android/graphics/Canvas.html)

以下是一些关于 Android 中 2d 图形的页面：

[http://developer.android.com/guide/topics/graphics/2d-graphics.html](http://developer.android.com/guide/topics/graphics/2d-graphics.html) [http://developer.android.com/guide/topics/graphics/2d-graphics.html#shape-drawable](http://developer.android.com/guide/topics/graphics/2d-graphics.html#shape-drawable) [http:// developer.android.com/guide/topics/graphics/opengl.html](http://developer.android.com/guide/topics/graphics/opengl.html)

如果您的图形保持相同（或大致相同）是基于 XML 的，则其他一些不错的选择：

[http://developer.android.com/guide/topics/graphics/2d-graphics.html#drawables-from-xml](http://developer.android.com/guide/topics/graphics/2d-graphics.html#drawables-from-xml)

我发现一种非常简洁的解决方案是使用 9-patch 可绘制对象：

[http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch](http://developer.android.com/guide/topics/graphics/2d-graphics.html#nine-patch)

**碰撞检测** 对于您的目的来说这可能有点矫枉过正，但有许多游戏物理库：

[http://www.andengine.org](http://www.andengine.org) [http://code.google.com/p/andengineexamples/](http://code.google.com/p/andengineexamples/)

[http://bulletphysics.org](http://bulletphysics.org)

[http://www.emini.at/](http://www.emini.at/)

[http://www.dremsus.com/index.php/2012/01/box2d-game-demo-in-android/](http://www.dremsus.com/index.php/2012/01/box2d-game-demo-in-android/)

[Android、libgdx 和 box2d 基础知识](https://stackoverflow.com/questions/10420088/android-libgdx-and-box2d-basics)

或者您可以推出自己的解决方案：

[http://cooers.blogspot.com/2012/08/simple-collision-detection-in-2d.html](http://cooers.blogspot.com/2012/08/simple-collision-detection-in-2d.html)

[http://content.gpwiki.org/index.php/Polygon_Collision](http://content.gpwiki.org/index.php/Polygon_Collision)

[http://www.codeproject.com/Questions/244344/Collision-Detection-in-Android](http://www.codeproject.com/Questions/244344/Collision-Detection-in-Android)

[Android上旋转位图的碰撞检测](https://stackoverflow.com/questions/11475719/collision-detection-for-rotated-bitmaps-on-android)

这真的取决于目的；对于游戏，您最好只使用库；但是如果碰撞检测是您唯一需要的功能，您最好自己做以节省资源。

**额外信用：Android 库的一些索引**

[http://www.appbrain.com/stats/libraries/dev](http://www.appbrain.com/stats/libraries/dev)

[http://www.theultimateandroidlibrary.com/](http://www.theultimateandroidlibrary.com/)

[http://www.openintents.org/en/](http://www.openintents.org/en/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-25T16:20:07.627

Android UI takelit 使用 Skia 进行图形渲染，skia 使用[**Region**](http://developer.android.com/reference/android/graphics/Region.html)抽象对来自 Paths 或 Rects 的形状（例如，交集、联合、减法。参见 Region.Op 类）形状进行集合操作。

Region 类还可以通过 Region.quickContains 或 Region.quickReject 方法进行简单的碰撞检测。

# android - android在ExpandableListView中改变组的颜色

> ID：13189307
> 
> 赞同：1
> 
> 时间：2012-11-02T04:25:59.280
> 
> 标签：android, expandablelistview

我正在尝试采用我已经创建的可扩展列表视图并更改组列表中一项的背景颜色。我只想更改主列表中条目的颜色，而不是其下拉子项，也就是您单击以展开或隐藏其他部分的部分。我认为 getGroupView 会做到这一点，但我不知道如何做到这一点。如果这是正确的使用方法，有人可以解释如何使用它吗？如果有更好的方法，它是什么？

[编辑] 我又玩了一些，并想出了如何使用 getGroupView ，但我仍然遇到问题。根据我的理解，我所做的应该只是更改单个条目的颜色，而是将它们全部更改。这是代码：

```
 View listViewRow = findViewById(R.layout.menu_item);
    listViewRow = myNewAdapter.getGroupView(2, false, listViewRow, expandView);
    listViewRow.setBackgroundColor(Color.RED); 
```

其中 menu_item 是我用于可展开列表中的组的布局文件的名称，expandView 是可展开列表视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:12:04.117

在扩展的 BaseExpandableListAdapter 类中尝试这个

```
public View getGroupView(int groupPosition, boolean isExpanded,
    View convertView, ViewGroup parent) {

   if (convertView == null) {
    LayoutInflater inflater =  (LayoutInflater) myContext.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    convertView = inflater.inflate(R.layout.group_row, null);
   }

   TextView tvGroupName = (TextView) convertView.findViewById(R.id.tvGroupName);
   tvGroupName.setText(list.get(groupPosition).getYear() +" COLLECTION");

   return convertView;
  } 
```

或者引用[这个](http://www.dreamincode.net/forums/topic/270612-how-to-get-started-with-expandablelistview/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-23T10:40:41.747

# 尝试这个

*   如果您想更改 headerlist.xml 中 headerlist 更改的颜色

    ```
     <?xml version="1.0" encoding="utf-8"?>
    <LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
      android:layout_height="match_parent"
      android:padding="8dp"
      android:orientation="vertical"
     android:background="@color/colorRed">
    </LinearLayout> 
    ```

    -如果你想改变 childlist.xml 中子列表的颜色

    ```
     <?xml version="1.0" encoding="utf-8"?>
    <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
     android:layout_width="match_parent"
      android:layout_height="55dip"

     android:layout_marginLeft="@dimen/_15dp"
    </RelativeLayout> 
    ```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-02T04:47:13.370

把这条线放在你想显示不同颜色的地方：

```
- android:textColor="#a60704" 
```

用任何颜色代替：

```
- #a60704 
```

# facebook - Facebook 分享按钮未发布到墙上

> ID：13189308
> 
> 赞同：1
> 
> 时间：2012-11-02T04:26:13.807
> 
> 标签：facebook, facebook-sharer

我需要在 facebook 上发布带有 Cutsom 文本的 URL。我正在使用以下字符串发布到 facebook 墙：

`http://www.facebook.com/sharer.php?s=100&p[title]=This is the dummy text&p[summary]=This is the dummy summary&p[url]=www.google.com`

它打开 facebook 窗口并在该页面上显示消息和链接，但是当我单击共享按钮时，会弹出一条消息说`Could not post to wall`。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T04:31:22.567

[url] 参数格式错误。尝试添加`http://`

# c# - 合并 PDF iTextSharp

> ID：13189310
> 
> 赞同：2
> 
> 时间：2012-11-02T04:26:20.903
> 
> 标签：c#, asp.net, .net, pdf, itextsharp

我在网上查看了一些示例，并想出了使用 iTextSharp 合并 pdf 的代码。但我收到一个错误:.

**{“文档没有页面。”}**

它在**Page = writer.GetImportedPage(reader, X);处失败**

这是堆栈跟踪：

```
 at iTextSharp.text.pdf.PdfPages.WritePageTree()
 at iTextSharp.text.pdf.PdfWriter.Close()
 at iTextSharp.text.pdf.PdfCopy.Close()
 at iTextSharp.text.Document.Close() 
```

当我调试它时，它有 3 页。这里有什么问题？？

这是我的代码

```
public static MemoryStream MergePdfs(List<MemoryStream> pdfStreams)
       {
        //Create output stream
           MemoryStream OutStream = new MemoryStream();
           Document Document = null;

           try
           {
                //Create Main reader
                PdfReader Reader = new PdfReader(pdfStreams.ElementAt(0));
                //Create Main Doc
                Document = new Document(Reader.GetPageSizeWithRotation(1));
                //Create main writer
                PdfCopy Writer = new PdfCopy(Document, OutStream);
                //Open document for writing
                Document.Open();
                //Add pages
                AddPages(Reader.NumberOfPages, Reader, ref Writer);

                //For each additional pdf after first combine them into main document
                foreach (MemoryStream PdfStream in pdfStreams.Skip(1))
                {
                    PdfReader Reader2 = new PdfReader(PdfStream);
                    // Add content
                    AddPages(Reader2.NumberOfPages, Reader2, ref Writer);
                }
             }
             finally
             {
                 // Step 5: Close the document
                 if (Document != null)
                     Document.Close();

                foreach (var Strm in pdfStreams)
                {
                    try { if (null != Strm) Strm.Dispose(); } catch { }
                }
             }

             return OutStream;
         }

        private static void AddPages(int Pages, PdfReader reader, ref PdfCopy writer)
        {
            PdfImportedPage Page = null;

            for (int X = 0; X < Pages; X++)
            {
                 Page = writer.GetImportedPage(reader, X);
                 writer.AddPage(Page);
            }

            if (reader.AcroForm != null)
                writer.CopyAcroForm(reader);
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T15:59:45.487

GetImportedPage 的页码从 1 开始。因此：

```
for (int X = 1; X < Pages + 1; X++)
{
    Page = writer.GetImportedPage(reader, X);
    writer.AddPage(Page);
} 
```

# php - PHP：开始日期 - 按月解析结束日期范围

> ID：13189311
> 
> 赞同：0
> 
> 时间：2012-11-02T04:26:22.460
> 
> 标签：php, mysql

好的，我在这里有一个逻辑问题而不是编码一个，但是代码示例/解决方案可能会同时回答这两个问题，所以这里......

如果我有一个表格，我用 start_date 和 end_date 传入 PHP （在 m/d/Y 格式上是完整的），我需要打印出 mysql 数据库中属于该范围的所有条目的表（所以从 m1/d1/ Y1 到 m2/d2/Y2) 按月分组，我怎么能以一种优雅的方式去做呢？

例如，如果我通过 start_date = 5/20/2012, end_date = 7/31/2012，我需要结果表以这种格式显示结果：

```
May 2012  |  June 2012  |  July 2012
....      |  ....       |  ..... 
```

2012 年 5 月的第一列将显示 mysql 查询的结果，例如

```
SELECT ... WHERE signup_date >= 5/20/2012 AND signup_date <= 5/31/2012 
```

2012 年 6 月同样显示：

```
SELECT ... WHERE signup_date >= 6/1/2012 AND signup_date <= 6/30/2012 
```

ETC

因此，我正在寻找一种方法将开始日期和结束日期解析为从该月的开始日期到该月的最后一天正确排列的日期数组，如果 end_date 是几个月后，则涵盖所有其他日期完全介于两者之间的月份（从该月的第一天到最后一个月），以便我可以在 for/while 循环中循环它们？所以像：

[0]['开始'] =​​> '5/20/2012'

[0]['结束'] => '5/31/2012'

[1]['开始'] =​​> '6/1/2012'

[1]['结束'] => '2012 年 6 月 30 日'

[2]['开始'] =​​> '7/1/2012'

[2]['结束'] => '7/31/2012'

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:27:00.900

您应该使用[mktime()](http://php.net/mktime)来实现这一点。下面的示例代码。

```
<?php
$startDate = '05/20/2012';
$endDate = '07/31/2012';

$curMonth =  date("m", strtotime($endDate)); //End Month
$curYear = date("Y", strtotime($endDate)); //End Year

$months = array();
$months[] = array('start' => "$curMonth/01/$curYear", 'end' => $endDate);

while ("$curMonth/01/$curYear" > $startDate) {
        $monthEnd =  date("m/d/Y", mktime(0, 0, 0, $curMonth, 0, $curYear));
        $curMonth = date('m', strtotime($monthEnd));
        $curYear = date('Y', strtotime($monthEnd));
        $monthStart = ($curMonth/01/$curYear > $startDate) ? $startDate : "$curMonth/01/$curYear";
        $months[] = array('start' => $monthStart, 'end' => $monthEnd);
}

print_r(($months));
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:45:18.650

尝试这个：

```
$date = '5/20/2012';
$dateStart = date("m/01/y", strtotime($date));

$start = date("Y-m-d", strtotime($dateStart));
$end = date("Y-m-d", strtotime($dateStart. '+ 1 month - 1 day') );

echo $start;
echo $end; 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T04:45:44.073

请先查看我的评论以了解 mysql db 日期格式。

用伪语言写了一点

```
 $sql="SELECT * FROM ... WHERE `signup_date`>='2012-5-20' AND `signup_date`<'2012-5-31' ORDER BY  `signup_date`";

        $result=mysql_query($sql);

    $month_year=array() //3-dimensional array $month_year[year][month][primary_key];

    $month_index=-1;
    while($row=mysql_fetch_assoc($result)){

    // find $month_of_the_date AND $year_of_the_date

    //find different months ,corresponding years, and db primary key and keep track in the $month_year array

    }

    for( all the years in the array ){

    for(all the corresponding months of the year  in the array){

//**EDIT:** you MIGHT need other loops and arrays to collect distinct years and corresponding months together

    // show the records with the primary keys corresponding to that month and year

    }

    } 
```

# c++ - 如何找到具有最小k长度和最大和的子数组？

> ID：13189314
> 
> 赞同：4
> 
> 时间：2012-11-02T04:27:07.130
> 
> 标签：c++, algorithm, dynamic-programming, kadanes-algorithm

子数组包含正数和负数。您必须找到一个最大和子数组，使得子数组的长度大于或等于 k。

这是我使用 Kadane 算法的 c++ 代码。

```
#include <iostream>

using namespace std;

int main(){

    int n,k;
    cin >> n >> k;
    int array[n];
    int sum = 0;
    int maxsum = 0;
    int beststarts[n];

    for(int i = 0;i < n; i++){
            cin >> array[i];
    }

    for(int i = 0;i < k-1;i ++){
            sum = sum+array[i];
            beststarts[i] = 0;
    }

    for(int i =  k-1;i < n; i++){ //best end search with min length;
            sum = sum+array[i];
            int testsum = sum;
            if(i > 0){
            beststarts[i] = beststarts[i-1];
            }
            for(int j = beststarts[i] ;i-j > k-1;j ++){
                    testsum = testsum - array[j];
                    if(testsum > sum){
                            beststarts[i] = j+1;
                            sum = testsum;
                    }
            }
            if(sum > maxsum){
                    maxsum = sum;
            }
    }

    cout << maxsum;

    return 0;
} 
```

我的代码运行良好，但速度很慢，我想不出任何方法来改进我的代码。我也读过这个问题[查找总和可被 K 整除的最长子数组，](https://stackoverflow.com/questions/13089010/arraysfind-longest-subarray-whose-sum-divisible-by-k)但这不是我想要的，长度也可以大于 k。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T05:33:18.690

基于[此答案的解决方案](https://stackoverflow.com/questions/7861387/maximum-contiguous-subsequence-sum-of-at-least-length-l/7862283#7862283)

[现场演示](http://ideone.com/Sd2JTu)

```
#include <algorithm>
#include <iterator>
#include <iostream>
#include <numeric>
#include <ostream>
#include <utility>
#include <vector>

// __________________________________________________

template<typename RandomAccessIterator> typename std::iterator_traits<RandomAccessIterator>::value_type
max_subarr_k(RandomAccessIterator first,RandomAccessIterator last,int k)
{
    using namespace std;
    typedef typename iterator_traits<RandomAccessIterator>::value_type value_type;
    if(distance(first,last) < k)
        return value_type(0);
    RandomAccessIterator tail=first;
    first+=k;
    value_type window=accumulate(tail,first,value_type(0));
    value_type max_sum=window, current_sum=window;
    while(first!=last)
    {
        window += (*first)-(*tail) ;
        current_sum = max( current_sum+(*first), window );
        max_sum = max(max_sum,current_sum);
        ++first;
        ++tail;
    }
    return max_sum;
}

// __________________________________________________

template<typename E,int N>
E *end(E (&arr)[N])
{
    return arr+N;
}

int main()
{
    using namespace std;
    int arr[]={1,2,4,-5,-4,-3,2,1,5,6,-20,1,1,1,1,1};
    cout << max_subarr_k(arr,end(arr),4) << endl;
    cout << max_subarr_k(arr,end(arr),5) << endl;
} 
```

输出是：

```
14
11 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-29T11:23:28.107

```
 int w(0);
    for (int i=0; i < k; i++) w += a[i];
    int run_sum(w), max_sum(w);
    for (int i=k; i < n; i++) {
              w = a[i] + max(w, w-a[i-k]); //  window will such that it will include run_sum
              run_sum = max(run_sum + a[i], w);
              max_sum = max(run_sum, max_sum); 
    }
    return max_sum; 
```

# tmux - byobu/tmux 中的状态更新导致鼠标选择丢失

> ID：13189317
> 
> 赞同：6
> 
> 时间：2012-11-02T04:27:32.510
> 
> 标签：tmux, iterm, byobu

我在 Mac 10.7.5 iTerm2 上，通过 ssh 连接到运行 byobu 5.12 和 tmux 1.7 的 Ubuntu 机器。

问题是，如果我尝试用鼠标从终端中选择文本，每次状态栏右下角的时间更新时，它都会被清除。也就是我选择了fine，然后时钟滴滴答答，又清零了。

有什么解决方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-06T12:58:47.687

我刚刚提出了这个微小的修复[http://bazaar.launchpad.net/~zekus-one/byobu/trunk/revision/1992](http://bazaar.launchpad.net/~zekus-one/byobu/trunk/revision/1992)并且正在等待修订。这解决了我的问题。

您应该能够编辑 /usr/bin/byobu-status 并在等待正式发布时手动应用修复。

希望这可以帮助。

# java - 在Java中交换十六进制整数的元素

> ID：13189327
> 
> 赞同：2
> 
> 时间：2012-11-02T04:29:03.570
> 
> 标签：java, substring

我想交换一个像素的红色和蓝色值。应该执行此操作的方法接收作为 int 0xAARRGGBB 的像素，其中 AA 是 alpha 的十六进制值，颜色为 r、g、b，例如完全不透明的蓝色为 0xFF0000FF。

我将值转换为字符串，然后使用 substring() 将其剪切，以修改后的顺序将其拼接在一起并将结果转换回 int。这似乎不雅且不起作用：

```
public int filterRGB(int x, int y, int pixel) {

    int filteredPixel;
    String s, a, r, g, b, res;
        s = Integer.toString(pixel);            
        a = s.substring(2,4);//alpha                
        r = s.substring(4,6);//r
        g = s.substring(6,8);//g
        b = s.substring(8,10);//b

    res = "0x" + a + b + g + r;
    filteredPixel = Integer.parseInt(res);

    return filteredPixel; 
```

它不起作用的原因似乎是 substring(8,10)。该行之后的代码不会被执行。它确实适用于 substring(8,9)，但这会切断蓝调的第二个十六进制值。我不知道如何自己查找，所以，请有人解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T04:31:25.703

如果你更换

```
s = Integer.toString(pixel); 
```

和

```
s = Integer.toString(pixel, 16);
a = s.substring(0,2);//alpha
r = s.substring(2,4);//r
g = s.substring(4,6);//g
b = s.substring(6,8);//b 
```

你的方法应该有效。

但是，更好的方法是使用位算术和移位来执行重新排列：

```
int a = (pixel >>> 24) & 0xFF;
int r = (pixel >>> 16) & 0xFF;
int g = (pixel >>>  8) & 0xFF;
int b = (pixel >>>  0) & 0xFF;

int filteredPixel = (a << 24) | (b << 16) | (g << 8) || (r << 0); 
```

# php - substr 计数返回错误的结果

> ID：13189329
> 
> 赞同：1
> 
> 时间：2012-11-02T04:29:20.263
> 
> 标签：php, regex, substring

我正在使用 substr_count 来计算一个单词被使用的次数。但它没有返回我想要的结果。这是我的示例代码：

```
<?php
    echo substr_count("The Hello world. Therefore the world is nice","the");
?> 
```

这将返回数字 3，即 3 个字符串。我希望它只返回 2 个。因为有 2 个。第三个是单词的一部分，因此它不是 the。我想到了正则表达式，但我不太擅长这些。有什么建议么 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T04:36:47.267

您需要在后面添加空格`the`，它只能包括那些`the`后面有空格的空格

```
 <?php
        echo substr_count("The Hello world. Therefore the world is nice","the ");
    ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T04:45:22.257

这是计算子字符串出现次数的另一种方法，

```
<?php
 $string = "The Hello world. Therefore the world is nice";
 $substring = 'the';

 $cArr = explode($substring,strtolower($string));
 echo $substring_count = count($cArr) - 1;
?> 
```

或者

```
$wordCounts = array_count_values(str_word_count(strtolower($string),1));
echo $theCount = (isset($wordCounts['the'])) ? $wordCounts['the'] : 0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T04:32:45.707

我认为 substr_count 的用法不同。句法：

```
 int substr_count ( string $haystack , string $needle [, int $offset = 0 [, int $length ]] ) 
```

substr_count() 返回 needle 子字符串在 haystack 字符串中出现的次数。请注意针是区分大小写的。

请参考 [http://php.net/manual/en/function.substr-count.php](http://php.net/manual/en/function.substr-count.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T11:51:52.623

```
<?php
  echo preg_match_all('/\bthe\b/i', 'The Hello World. Therefore the world is nice', $m);
?> 
```

第一个参数是模式，其中`\b`表示单词边界，`/i`修饰符表示区分大小写。

第二个参数是匹配的主题。

第三个参数填充了匹配数组。我的旧 PHP 需要它，5.4 以后的版本不需要它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T04:38:08.767

有 3 个。因此和

尝试这个：

```
<?php
   echo substr_count("The Hello world. Therefore the world is nice","the ");
?> 
```

# javascript - 如何将数据库中的数据放入 Ext.FormPanel？

> ID：13189330
> 
> 赞同：0
> 
> 时间：2012-11-02T04:29:35.347
> 
> 标签：javascript, extjs

我有一个带有 textfielda 的 Ext.FormPanel，我想在这个字段中显示数据。在 sencha 站点中，我看到了一个示例如何执行此操作[http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/form/xml-form.html](http://dev.sencha.com/deploy/ext-4.1.0-gpl/examples/form/xml-form.html)。但他们使用 ExtJs 4.1 但我只有 ExtJS 3.4。当我尝试重复这个例子时，萤火虫说`Ext.define is not a function`。我也无法在 sencha 网站上的 API 中找到`Ext.data.Model`。
那么它有可能用 ExtJs 3.4 做这样的事情吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:35:24.113

在 Ext 3 中有完全相同的例子：

[http://dev.sencha.com/deploy/ext-3.4.0/examples/form/xml-form.html](http://dev.sencha.com/deploy/ext-3.4.0/examples/form/xml-form.html)

# php - 如何在php中绘制数学模式？

> ID：13189332
> 
> 赞同：1
> 
> 时间：2012-11-02T04:30:48.777
> 
> 标签：php

我想画这样的图案。

```
1
2 3
3 5 8
5 8 13 21
8 13 21 34 55 
```

有人可以帮助我吗？就像在这种模式的 php 代码中一样

```
1
12
123
1234
12345 
```

是

```
<?php
    for($i=1;$i<=5;$i++) {
        for($j=1;$j<=$i;$j++) {
            echo $j;
        }
        echo "</br>";
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:40:45.813

```
<?php
$first = 0;
$second = 1;
$n =20;

print $first.'<br/>';
for($j=1;$j<=$n-1;$j++)
{
for($i=1;$i<=$j;$i++)
   {
   $final = $first + $second;
   $first = $second;
   $second = $final;
   print $final.' ';
   }
 print '<br/> ';
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:03:09.310

```
function nextLine($arr) {
    $n = count($arr);
    if ($n == 1) {
        $arr[$n] = 2;
    } else {
        $arr[$n] = $arr[$n-1] + $arr[$n-2];
    }
    $arr[$n+1] = $arr[$n] + $arr[$n-1];
    array_splice($arr,0,1);
    return $arr;
}
function draw() {
    $count = 5;
    $arr = array(0=>1);
    for($i=0;$i<$count;$i++) {
        echo join(' ',$arr);
        echo '<br/>';
        $arr = nextLine($arr);
    }
}

draw(); 
```

# java - 如何在其他控制器中调用动作

> ID：13189335
> 
> 赞同：0
> 
> 时间：2012-11-02T04:30:56.533
> 
> 标签：java, playframework

我正在开发一个游戏框架项目，我想知道是否有任何方法可以从其他控制器调用动作。重定向不是解决方案，因为这些是具有不同 url 的 2 个页面（但逻辑操作是相同的）。

任何人都有线索。很高兴你能给我一个提示来做这件事

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:42:04.557

如果它们是 2 个不同页面中的 2 个不同操作并且您想将它们链接起来，则重定向是标准方式。如果您不能这样做，因为这会将用户移出应用程序的某个区域，那么您可能需要重新考虑您的设计是否正确。也许你不应该只有 2 页，而应该是第 3 页，或者别的什么。

如果它们是具有公共代码的 2 页，则使用公共代码创建第 3 类并根据需要调用。

# window - Mac OS X Lion：窗口已消失且不会再出现

> ID：13189345
> 
> 赞同：0
> 
> 时间：2012-11-02T04:32:11.337
> 
> 标签：window, osx-lion, hidden, macvim

我正在运行最新版本的 MacVim `Mac OS X 10.7.3`。

在编辑文件时，应用程序决定以某种方式隐藏/缩小其窗口。它发生在一瞬间。

我试过了：

*   重启
*   重新安装
*   在停靠栏中右键单击 -> 显示所有窗口
*   在菜单栏中： Window -> 将所有内容置于前面（这是灰色的，好像*没有*任何窗口一样）。

什么都没有把它带回来。

我也尝试过applescripts：

*   将所有隐藏的窗口移动到可见空间
*   调整指定应用程序窗口的大小和位置

上面的第二个从未成功执行，表明我提供的窗口索引（我试过`0`, `1`, `2`）不存在。

有什么好主意吗？我现在正在扯头发。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T18:18:11.393

我手动删除了 Mac OS X 内置的 Ruby 版本并安装了另一个。

事实证明，这导致了这个问题。

我通过在终端中手动运行 MacVim 确定了这一点：

```
dave$ /Applications/MacVim.app/Contents/MacOS/MacVim 
```

当我单击它显示在 Dock 中的图标时，终端显示以下内容：

```
dyld: Library not loaded: /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/libruby.1.dylib
  Referenced from: /Applications/MacVim.app/Contents/MacOS/Vim
  Reason: image not found 
```

因此，我重新创建了它引用的原始系统内置 Ruby 目录：

```
dave$ sudo mkdir -p /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib 
```

然后从我较新的 Ruby 安装的动态库到 MacVim 寻找的位置创建了一个符号链接：

```
dave$ sudo ln -s /usr/local/lib/libruby.1.8.7.dylib /System/Library/Frameworks/Ruby.framework/Versions/1.8/usr/lib/libruby.1.dylib 
```

现在 MacVim 工作正常。

# forms - MS Access 中表单的“键预览”属性是什么意思？

> ID：13189348
> 
> 赞同：4
> 
> 时间：2012-11-02T04:32:34.647
> 
> 标签：forms, ms-access, ms-access-2010, keypreview

我现在正在 MS Access 中进行编程，在浏览表单的属性时，我遇到了一个名为“key preview”的属性。MS Access 文档告诉它用于在控件的键盘事件之前调用表单的键盘事件。

我不确定这意味着什么，为什么可以使用这个属性？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T07:14:03.647

如果 KeyPreview 属性设置为 true，则表单将在控件接收到键盘事件之前接收到键盘事件，从而使您有机会在表单级别对其进行操作。

现在，假设您有一个带有许多控件的表单。
想象一下，您希望允许用户按键盘上的 F2 键来执行某些操作，例如打开另一个表单、播放音乐或其他任何操作。

在 Access 中，与大多数 UI 编程一样，任何时候只有一个控件可以接收焦点。因此，如果焦点在文本框上，当您按下 F2 时，该文本框键盘事件将触发。
您可以从文本框事件中捕获该按键，但如果用户从另一个控件按 F2，则不会检测到它，除非您还检测到该控件本身按 F2。

因此，为了使事情更容易，您可以将表单设置为首先接收键盘事件，然后再将它们传递给具有焦点的控件，让您有机会检测到用户在一个地方按下了 F2，而不是让连接每个控件以检测该按键。

### 例子

将单个文本框添加`mytextbox`到新表单。在表单背后的代码中，添加以下事件以捕获表单和文本框的键盘事件：

```
Private Sub Form_KeyDown(KeyCode As Integer, Shift As Integer)
    Debug.Print "Form_KeyDown(keycode:" & KeyCode & ", Shift:" & Shift & ")"
End Sub

Private Sub Form_KeyPress(KeyAscii As Integer)
    Debug.Print "Form_KeyPress(KeyAscii:" & KeyAscii & ")"
End Sub

Private Sub Form_KeyUp(KeyCode As Integer, Shift As Integer)
    Debug.Print "Form_KeyUp(keycode:" & KeyCode & ", Shift:" & Shift & ")"
End Sub

Private Sub mytextbox_KeyDown(KeyCode As Integer, Shift As Integer)
    Debug.Print "mytextbox_KeyDown(keycode:" & KeyCode & ", Shift:" & Shift & ")"
End Sub

Private Sub mytextbox_KeyPress(KeyAscii As Integer)
    Debug.Print "mytextbox_KeyPress(KeyAscii:" & KeyAscii & ")"
End Sub

Private Sub mytextbox_KeyUp(KeyCode As Integer, Shift As Integer)
    Debug.Print "mytextbox_KeyUp(keycode:" & KeyCode & ", Shift:" & Shift & ")"
End Sub 
```

现在，打开表单并键入一个键。
如果您按下该`Q`键，您应该会在即时窗口中看到类似这样的内容：

![控制键盘事件](../Images/1de6dd83697ffdae2f376e4dbb2ec404.png)

只有文本框接收到事件。

现在，将 KeyPreview 属性设置为 true（是），当您打开表单并点击`Q`时，您应该会看到表单首先收到了键盘事件。

![表单和控制键盘事件](../Images/1f343cf356adc56166ef8ff547606239.png)

# android - 将数组列表从一个意图传递到另一个意图

> ID：13189349
> 
> 赞同：2
> 
> 时间：2012-11-02T04:32:42.817
> 
> 标签：android, arraylist

我试图将一个arrylist 从一个意图传递到另一个意图。我的代码如下：

```
intent.putExtra("near_places", nearPlaces);
intent.putExtra("nearby", nearbylist); 
```

在新的意图下，我这样做：

```
nearPlaces = (PlacesList) extras.getSerializable("near_places");
nearbylist = (ArrayList<FsqVenue>)extras.getArrayList("nearby"); 
```

firat 的代码是正确的，但是第二个它向我显示 fsqVenue 是一个类的错误

请帮我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T04:43:55.427

首先确保 FsqVenue 类实现 `Serializable`接口，然后使用此代码在其他 Activity 中获取 ArrayList ：

```
nearbylist = (ArrayList<FsqVenue>)extras.getSerializable("nearby"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:41:33.067

在您的接收意图中，您需要执行以下操作：

```
Intent i = getIntent();  
near_places = i.getStringArrayListExtra("nearPlaces"); 
```

这是完美的作品，请尝试重播。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T04:42:08.490

Princewill，这是你的答案：-[我想让用户按动作顺序添加多个项目](https://stackoverflow.com/questions/13189354/i-want-to-let-user-add-multiple-items-by-action-sequence)，我已经这样做了，并希望让它更高级.....只需打开目录和 SingleMenuItem Activity 的链接并查看代码并完成.

# iphone - IAD/ADBannerView_Deprecated.h 文件在 adwhirl sdk 中找不到问题

> ID：13189352
> 
> 赞同：1
> 
> 时间：2012-11-02T04:33:14.567
> 
> 标签：iphone, xcode, ios5, ios-simulator, adwhirl

我已经在我的应用程序中集成了 adwhirl，它在模拟器 5.0 中工作正常，但在模拟器 6 中显示错误。但我在模拟器 6.0 中通过包含头文件“IAD/ADBanner_Deprecated.h”解决了这个问题，但在模拟器 5.0 中它显示的错误如下文件未找到。请提出解决此问题的想法。这是我的代码。

```
#ifndef __IPHONE_6_0
#import <iAd/ADBannerView_Deprecated.h>
#endif 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-06T17:38:43.557

这包括给你一个错误吗？这在 iOS 6 模拟器中会给您带来什么错误？

```
#import <iAd/iAd.h> 
```

# android - 我想让用户按动作序列添加多个项目

> ID：13189354
> 
> 赞同：1
> 
> 时间：2012-11-02T04:33:24.127
> 
> 标签：android, android-intent, android-emulator, android-listview

我正在制作一个应用程序，在该应用程序中，我使用 JSON 将数据提取到 ListView 中，并允许用户以另一种形式（以 singleMenuItem 形式）查看所选项目。

我已经放置了一个按钮 - 添加到购物车。每当用户单击“添加到购物车”按钮时，所选项目需要显示在“查看购物车”表单中。对于添加到购物车的每个项目，将重复相同的过程。

我只想显示每个项目的标题和成本，对于那些我`SingleMenuItem`使用 Intent from `ListView`Form 提取到表单中的项目，现在我想在查看购物车表单中显示如下：- 按操作顺序添加多个项目，问题是我不知道每次用户单击“添加到购物车”按钮时如何更新查看购物车表单。

目录（列表查看活动）代码：-

```
public class Catalogue  extends Activity{

    static String URL = "http:/--------/and/menu.json";
    static String KEY_CATEGORY = "item";    
    static final String KEY_TITLE = "title";
    static final String KEY_DESCRIPTION = "description";
    static final String KEY_COST = "cost";
    static final String KEY_THUMB_URL = "imageUri";

ListView list;
LazyAdapter adapter;

/** Called when the activity is first created. */
@Override
 protected void onCreate(Bundle savedInstanceState) {
// TODO Auto-generated method stub
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

final ArrayList<HashMap<String, String>> itemsList = new ArrayList<HashMap<String, String>>();
list=(ListView)findViewById(R.id.listView1);            
adapter=new LazyAdapter(this, itemsList);        
list.setAdapter(adapter);

Intent in = getIntent();

KEY_CATEGORY = in.getStringExtra("category");

                           try{

                 JSONArray jsonArray = json.getJSONArray(KEY_CATEGORY);

                    for(int i=0;i < jsonArray.length();i++){                        

                        HashMap<String, String> map = new HashMap<String, String>();
                        JSONObject jsonObject = jsonArray.getJSONObject(i);                     

                        map.put("id",  String.valueOf(i));
                        map.put(KEY_TITLE, jsonObject.getString(KEY_TITLE));
                        map.put(KEY_DESCRIPTION, jsonObject.getString(KEY_DESCRIPTION));
                        map.put(KEY_COST, jsonObject.getString(KEY_COST));
                        map.put(KEY_THUMB_URL, jsonObject.getString(KEY_THUMB_URL));

                    itemsList.add(map);

                  } 
                    return itemsList;
            }catch(JSONException e)        {
                 Log.e("log_tag", "Error parsing data "+e.toString());
            }

                return null;

                }

          @Override

          protected void onPostExecute(ArrayList<HashMap<String, String>> result) {

                list=(ListView)findViewById(R.id.listView1);            
                adapter=new LazyAdapter(Catalogue.this, itemsList);        
                list.setAdapter(adapter);

                this.progressDialog.dismiss();
                list.setOnItemClickListener(new OnItemClickListener() {

                    public void onItemClick(AdapterView<?> parent, View view,
                            int position, long id) {
                          HashMap<String, String> map = itemsList.get(position);

                        Intent in = new Intent(Catalogue.this, SingleMenuItem.class);
                        in.putExtra(KEY_TITLE, map.get(KEY_TITLE));
                        in.putExtra(KEY_DESCRIPTION, map.get(KEY_DESCRIPTION));
                        in.putExtra(KEY_THUMB_URL, map.get(KEY_THUMB_URL));
                        in.putExtra(KEY_COST, map.get(KEY_COST));
                        startActivity(in);
                    }

                });     

               ImageButton viewShoppingCart = (ImageButton) findViewById(R.id.ButtonViewCart);
               viewShoppingCart.setOnClickListener(new OnClickListener() {

                    public void onClick(View v) {
                        Intent in = new Intent
                               (Catalogue.this, FinalOrder.class);
                        startActivity(in);

                    }
                });

          } }} 
```

* * *

SingleMenuItem 活动代码

```
 public class SingleMenuItem extends Activity{
static final String KEY_TITLE = "title";
static final String KEY_COST = "cost";
static final String KEY_THUMB_URL = "imageUri";
private EditText edit_qty_code;
private TextView txt_total;
private TextView text_cost_code;
private double itemamount = 0;
private double itemquantity = 0;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.single);

    Intent in = getIntent();
    String title = in.getStringExtra(KEY_TITLE);
    String thumb_url = in.getStringExtra(KEY_THUMB_URL);
    final String cost = in.getStringExtra(KEY_COST);

    ImageLoader imageLoader = new ImageLoader(getApplicationContext());

    ImageView imgv = (ImageView) findViewById(R.id.single_thumb);
    TextView txttitle = (TextView) findViewById(R.id.single_title);
    TextView txtcost = (TextView) findViewById(R.id.single_cost);
    TextView txtheader = (TextView) findViewById(R.id.actionbar);

    txttitle.setText(title);
    txtheader.setText(title);
    txtcost.setText(cost);
    imageLoader.DisplayImage(thumb_url, imgv);

    ImageButton addToCartButton = (ImageButton) findViewById(R.id.img_add);
    addToCartButton.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {                               
        Intent in = new Intent
               (SingleMenuItem.this, FinalOrder.class);
            in.putExtra(KEY_TITLE, getIntent().getStringExtra(KEY_TITLE)); 
            in.putExtra(KEY_COST, getIntent().getStringExtra(KEY_COST));
            startActivity(in);

            // Close the activity
                finish();
            }
        });    
}} 
```

* * *

ViewCart 活动代码：-

```
public class FinalOrder extends Activity
{
static final String KEY_TITLE = "title";
static final String KEY_COST = "cost";
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.view);     

Intent in = getIntent();

String title1 = in.getStringExtra(KEY_TITLE);
String cost1 = in.getStringExtra(KEY_COST);

TextView txttitle1 = (TextView) findViewById(R.id.item_name);
TextView txtcost1 = (TextView) findViewById(R.id.item_cost);

txttitle1.setText(title1);
txtcost1.setText(cost1);    

}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:01:36.650

要更新查看购物车，您需要集中存储数据。最好使用 SQLite 数据库。然后您可以在用户添加到购物车时更新此数据库，然后在查看购物车时，您可以从数据库中读取。

# asp.net - 在 Web 应用程序中检查节点后树视图更改位置

> ID：13189362
> 
> 赞同：0
> 
> 时间：2012-11-02T04:34:57.853
> 
> 标签：asp.net

我有一个 asp.net 树视图。在展开的节点上，我正在为展开的节点绑定子节点。但是如果我检查节点而不是展开它，节点和它的所有子节点都会改变位置并变得像主节点的子节点。再次单击 + 时，它会出现在正确的位置。任何想法如何解决它！

```
 <asp:Panel ID="pnl_tree_testplan" CssClass="pnl_treeview" runat="server" ScrollBars="Auto">
                                <asp:UpdatePanel ID="treeview_testplan" runat="server">
                                    <ContentTemplate>
                                        <asp:TreeView ID="testPlanTreeView" runat="server" OnLoad="Tree_TestPlan_Load" OnTreeNodeExpanded="Tree_TestPlan_Node_Expanded"
                                            OnTreeNodeCheckChanged="TestPlan_Treeview_TreeNodeCheckChanged">
                                        </asp:TreeView>
                                    </ContentTemplate>
                                </asp:UpdatePanel>
                            </asp:Panel>
            .pnl_treeview
            {
              Height:410px;
              border-width:1px;
              border-color:Blue;
              min-width:260px;
              width:100%;
              font-family:Calibri;
              font-size:small;
              color:Black;           
             } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:11:17.520

如果当您将鼠标悬停在节点上时它在 Firefox（尤其是）中“上下跳跃”，请尝试以下 CSS 修复：

```
<div id="idTreeView">
    <asp:TreeView ID="TreeView1" runat="server"
        DataSourceID="SiteMapDataSource1"
            HoverNodeStyle-Height="0" Font-Bold="true" ImageSet="BulletedList">
        <RootNodeStyle Font-Bold="True" />
        <ParentNodeStyle VerticalPadding="0px" Font-Bold="True"
            Font-Underline="false"  />
        <HoverNodeStyle Font-Underline="false" ForeColor="#5555DD" />
        <NodeStyle Font-Bold="False" Font-Size="8pt" CssClass="sitelink"
            ForeColor="Black" HorizontalPadding="5px" NodeSpacing="0px" 
            VerticalPadding="0px" />
    </asp:TreeView>

    <asp:SiteMapDataSource ID="SiteMapDataSource1" runat="server" />
</div>

div#idTreeView img
{
    display: block;
    float: left;
}

div#idTreeView div
{
    display: inline-block;
}

div#idTreeView .sitelink a
{
    text-decoration:none;
} 
```

# c - 如何删除此警告：“va_start”的第二个参数不是最后一个命名参数？

> ID：13189365
> 
> 赞同：24
> 
> 时间：2012-11-02T04:35:13.130
> 
> 标签：c, linux, gcc

我有一个发出以下警告的函数（见下文）：

> 'va_start' 的第二个参数不是最后一个命名参数

它是什么意思以及如何删除它？

功能如下：

```
static int  ui_show_warning(GtkWindow *parent, const gchar *fmt, size_t size, ...)
    {
      GtkWidget *dialog = NULL;
      va_list args = NULL;
      int count = -1;
      char *msg = NULL;

      if((msg = malloc(size + 1)) == NULL)
        return -12;

      va_start(args, fmt);

      if((count = snprintf(msg, size, fmt, args)) < 0)
        goto outer;

      dialog = gtk_message_dialog_new(parent,
                      GTK_DIALOG_DESTROY_WITH_PARENT,
                      GTK_MESSAGE_WARNING,
                      GTK_BUTTONS_OK,
                      "%s", msg);
      (void) gtk_dialog_run(GTK_DIALOG(dialog));

      gtk_widget_destroy(dialog);

     outer: {
        if(args != NULL)
          va_end(args);

        if(msg != NULL)
          free(msg);

        return count;
      }
    } 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-02T04:36:53.860

您需要使用`size`而不是`fmt`：

```
va_start(args, size); 
```

它是`size`，不是`fmt`，是最后一个具有显式名称的参数（与没有名称的可变参数相反）。您需要将最后一个命名参数传递`va_start`给它，以便它找出可变参数参数开始的内存地址。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-02T04:38:58.447

> ```
> second parameter of ‘va_start’ not last named argument 
> ```
> 
> 它是什么意思以及如何删除它？

您的函数具有命名参数`parent`和。C 规范说您必须始终将最后一个命名参数传递给，以便与旧编译器兼容。所以你必须通过，不是。`fmt``size``va_start``size``fmt`

（但使用现代编译器，它可能仍然有效）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-05-14T19:33:01.347

我认为这里有一个混淆：大多数人只处理具有格式和可变参数的类似prinf的函数。他们认为他们必须传递描述格式的参数名称。但是 va_start 与任何类型的 printf 格式无关。这只是一个计算未命名参数开始的堆栈上的偏移量的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-02T08:56:54.900

我在Ubuntu20.04上也遇到同样的问题，和点赞最多的答案相反，开头的代码，

```
void sprintf(char *str, char *fmt, ...) {
    va_list list;
    int i, len;
    va_start(list, 2);
    ...
} 
```

然后，代码如下

```
void sprintf(char *str, char *fmt, ...) {
    va_list list;
    int i, len;
    va_start(list, fmt);
    ...
} 
```

问题已解决。

# android - 在 Linux 和 Windows 之间共享 Eclipse 工作区

> ID：13189367
> 
> 赞同：9
> 
> 时间：2012-11-02T04:35:24.100
> 
> 标签：android, linux, windows, eclipse

我已经开始在我的 Windows 机器上使用 Eclipse 为 Android 开发已经有一段时间了，但我越来越多地启动到我的 Ubuntu 分区。老实说，我喜欢这两种操作系统，因为它们各有优缺点，但我随机启动每个操作系统。无论如何，我的硬盘上有三个分区。一种用于 Windows 8，一种用于 Ubuntu，一种用于共享数据（文档、图片、视频）。但我想在一个操作系统上无缝开发，然后在另一个操作系统上进行开发。因此，我的数据分区应该能够容纳我的工作区，但我不知道这是否会破坏或破坏 .metadata 并可能破坏我的项目。基本上我的问题是......在两个操作系统之间使用 Android SDK、AVD、ADT、工作区或 .metadata 时是否有任何提示或技巧，以便无缝运行？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T04:39:21.383

理论上，您可以使用两种不同的 Eclipse 安装来管理一个共享工作区。但是，如果您没有在两侧运行*完全相同*的版本（或者，如果您升级一侧而不是另一侧） ，您可能会遇到问题。

在实践中，您最好在每个操作系统上拥有单独的工作区，然后拥有一个共享存储库（例如使用 Git）来共享您的代码。这不仅会更好地工作，而且您还将使用源代码控制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T06:40:33.057

人们之前已经尝试过并且遇到了麻烦，所以请改用版本控制解决方案。

缺点是版本控制系统中只共享项目内容。您将拥有两个完全独立的工作区。因此，如果您更改工作区设置，则需要更改两次（甚至不要考虑将 .metadata 置于版本控制之下，这会产生不良的副作用）。

请注意，Eclipse 中的一些设置可用作工作区设置和项目设置（例如，要使用的 Java 编译器版本）。确保使用项目设置并将项目中的“.settings”子目录的内容置于版本控制之下，因为它包含这些项目设置。所以它们在你的两台机器之间是同步的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-30T05:39:47.070

我在 linux 和 windows 之间共享工作空间已经有一段时间了，我只是遇到了一些小问题。

以下是一些要记住的事情，如果出现问题，并且您想尝试一些快速修复。

*   最初，您必须将 sdk 的位置指向 windows 或 linux 路径。这将是第一个可能出现的错误。

*   尝试一个干净的项目构建（项目 -> 清理 -> 清理所有项目 -> 单击确定）

*   检查项目的位置路径（右键单击项目 -> 单击资源）。如果它是从 ubuntu 路径加载的（例如：/home//Android_Projects），那么您必须删除项目（不是从磁盘，而是从工作区）并再次导入。

希望这可以帮助。

# java - 实例变量的正确命名约定是什么？

> ID：13189368
> 
> 赞同：1
> 
> 时间：2012-11-02T04:36:07.507
> 
> 标签：java, coding-style, naming-conventions

在我的编程入门课程中，我的老师在他的代码中声明实例变量时总是使用以下命名约定：

```
public class Snowman {
    private Ellipse _top;
    private Ellipse _middle;
    private Ellipse _bottom;

public Snowman() {
        _top = new Ellipse();
        _top.setColor(Color.WHITE);
        _top.setFrameColor(Color.BLACK);
        _top.setFrameThickness(1);
        _top.setSize(80, 80);
        _middle = new Ellipse();
        _middle.setColor(Color.WHITE);
        _middle.setFrameColor(Color.BLACK);
        _middle.setFrameThickness(1);
        _middle.setSize(120, 120);
        _bottom = new Ellipse();
        _bottom.setColor(Color.WHITE);
        _bottom.setFrameColor(Color.BLACK);
        _bottom.setFrameThickness(1);
        _bottom.setSize(160, 160);
    }
} 
```

然而，在课程教科书中，实例变量不以下划线开头，而是遵循与原始类型变量 ( `int revolutionsPerMinute`) 相同的命名约定。当我进行在线搜索时，我发现了几个来源，包括在线 Javadoc，它们引用了与我的教科书相同的约定。由于我无法重现我的老师遵循的命名约定，我怀疑他的约定是否合法。如果没有被广泛接受，我的老师教授的惯例是否存在？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T04:43:55.113

通常，Java 中的标准约定是**驼峰式大小写**，变量以小写开头，其他单词的第一个字母使用大写。例如：

```
int myVariable; 
int mySecondVariable; 
```

但请注意，这些是约定而不是规则。所以任何人都可以自由使用任何约定，但建议使用标准约定以使代码对任何人**都可读**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T04:40:46.387

**类名和类型**

第一个大写字母：`SomeClassName`, `URL`（首字母缩写词）

**静态、实例变量和方法**

骆驼案：`thisIsCamelCase`。

**常数**

所有大写：`A_CONSTANT`

**套餐**

全小写：`javax.swing.jfilechooser`

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T04:42:28.993

我想说约定是您在编写代码时遵循的，以便于编写代码。我不认为存在诸如存在或不存在的约定之类的东西。但是，您创建的类也可能被其他程序员使用。因此，如果他们不知道您遵循的约定，他们可能会遇到问题。因此，建议您遵循大多数 java 程序员遵循的命名约定：

```
int myFirstNumber;
ClassName objectName; 
```

因此，您可以选择约定，但我建议遵循 javadoc 和您的教科书中提到的标准。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T04:52:07.970

前导下划线没什么大不了的。

只要它不以大写字母开头-这将完全使Java程序员感到困惑。

# java - 为什么我的 Java 进程没有获得更多的实际内存？

> ID：13189369
> 
> 赞同：0
> 
> 时间：2012-11-02T04:36:09.587
> 
> 标签：java, memory, io

我可能在做一些愚蠢的事情，但我需要 100 GB 的空间。我在启动时使用[内存映射文件分配它们，它几乎立即发生。](http://www.linuxtopia.org/online_books/programming_books/thinking_in_java/TIJ314_029.htm)因为我只有 32 GB 的物理内存，所以我重新安排了程序，使它与 20 GB 的块一起工作，并且只有在做了很多工作后才切换到另一个块。我在`-mx24G`Linux 机器上开始这个过程。

发生的事情是它永远不会接近第一个块的末尾。CPU大多空闲，HD一直很忙。该过程永远不会超过 6 GB，这解释了为什么它无法取得任何进展（局部性非常糟糕，几乎每次内存访问都是页面错误）。

但是为什么这个过程不占用更多的真实内存呢？仍然有 15 GB 的可用空间，并且可以轻松交换相当多的进程。

* * *

这些文件是在流程开始时创建的，因此是空的。看起来这个过程确实是*不必要地*获取空页面。所以我预先进行了顺序扫描，现在我的进程很快就得到了 20 GB。但仅此而已...

CPU 仍然处于空闲状态，就好像每次内存访问都是*直写到*磁盘一样。这是怎么回事？

# maven - 如果有更新版本的依赖项，maven 可以自动报告吗？

> ID：13189370
> 
> 赞同：0
> 
> 时间：2012-11-02T04:36:24.910
> 
> 标签：maven, maven-3

是否有一个 maven 命令可以分析给定的 pom.xml 并报告是否有更新版本的插件或依赖项。

例如，假设 pom.xml 依赖于 hibernate 4.1.6 并且发布了 hibernate 4.1.7 是否有一个命令可以分析 pom.xml 并打印出类似的内容，您使用的是 hibernate 4.1.6 和最新版本版本是4.1.7？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T04:43:35.260

检查[版本 Maven 插件](http://mojo.codehaus.org/versions-maven-plugin/)目标 version-display-* 和 versions-use-*

# java - 运行 Tomcat 服务器 org.apache.catalina.deploy.WebXml addServlet 时出现异常

> ID：13189371
> 
> 赞同：14
> 
> 时间：2012-11-02T04:36:27.900
> 
> 标签：java, tomcat, servlets

我已经使用 eclipse 在我的本地机器上编写了几个 servlet。我已经在我的本地机器上对它们进行了测试，一切正常。

然后，我将我的项目导出为 .war 文件，并将其放在我只能通过 ssh 访问的另一台机器中我的 tomcat 的 webapps 目录下。我重新启动了我的 tomcat 服务器，在查看日志文件后，我发现它抛出了以下异常：

```
java.lang.NoSuchMethodException: org.apache.catalina.deploy.WebXml addServlet
at org.apache.tomcat.util.IntrospectionUtils.callMethod1(IntrospectionUtils.java:855)
at org.apache.tomcat.util.digester.SetNextRule.end(SetNextRule.java:201)
at org.apache.tomcat.util.digester.Digester.endElement(Digester.java:1051)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.endElement(AbstractSAXParser.java:604)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanEndElement(XMLDocumentFragmentScannerImpl.java:1759)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2915)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:625)
at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:488)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:819)
at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:748)
at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:123)
at com.sun.org.apache.xerces.internal.parsers.AbstractSAXParser.parse(AbstractSAXParser.java:1208)
at com.sun.org.apache.xerces.internal.jaxp.SAXParserImpl$JAXPSAXParser.parse(SAXParserImpl.java:525)
at org.apache.tomcat.util.digester.Digester.parse(Digester.java:1537)
at org.apache.catalina.startup.ContextConfig.parseWebXml(ContextConfig.java:1875)
at org.apache.catalina.startup.ContextConfig.getDefaultWebXmlFragment(ContextConfig.java:1472)
at org.apache.catalina.startup.ContextConfig.webConfig(ContextConfig.java:1250)
at org.apache.catalina.startup.ContextConfig.configureStart(ContextConfig.java:878)
at org.apache.catalina.startup.ContextConfig.lifecycleEvent(ContextConfig.java:369)
at org.apache.catalina.util.LifecycleSupport.fireLifecycleEvent(LifecycleSupport.java:119)
at org.apache.catalina.util.LifecycleBase.fireLifecycleEvent(LifecycleBase.java:90)
at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5173)
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:901)
at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:633)
at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:968)
at org.apache.catalina.startup.HostConfig$DeployWar.run(HostConfig.java:1646)
at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:471)
at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
at java.util.concurrent.FutureTask.run(FutureTask.java:166)
at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
at java.lang.Thread.run(Thread.java:679) 
```

不知道这意味着什么？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-11-02T17:31:52.023

我在[这里](https://web.archive.org/web/20140711115315/http://blog.xeiam.com/blog/2013/01/05/a-random-tomcat-error)找到了解决方案。

我是对的，因为您不再需要 web.xml。您可以简单地使用注释来定义您的 servlet 的路径。但问题是我在我的库中包含了 catalina.jar，这导致了问题。删除 catalina.jar 解决了问题！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-17T15:34:45.490

我在项目中使用 maven 后遇到了这个问题。正如亚当所说，我删除了 maven 依赖项中的所有 tomcat 库，然后问题得到了解决。

# c - 为什么我的 removeWhitespace 函数不起作用？

> ID：13189372
> 
> 赞同：1
> 
> 时间：2012-11-02T04:36:32.363
> 
> 标签：c

我在包含以下内容的行中收到段错误错误：

```
*pointer++ = *pointer_2++ 
```

不知道为什么。

字符串被声明为（在我的主目录中）：

```
char *str = "Why doesn't this function work?" 
```

这是我的功能：

```
void removewhitespace(char *str)
{
        // remove whitespace from the string.                                   
  char *pointer = str;
  char *pointer_2 = str;
 do{

    while (*pointer_2 == ' ' || *pointer_2 == '\n' || *pointer_2 == '\t')
      pointer_2++;

  }while (*pointer++ = *pointer_2++);

} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T04:40:20.097

这是因为您的函数修改了字符串，并且您将字符串文字的地址传递给它；就地修改字符串文字是未定义的行为。

改变这个

```
char *str = "Why doesn't this function work?"; 
```

对此

```
char str[] = "Why doesn't this function work?"; 
```

并且您的功能将按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:24:51.393

```
char *pointer = str; 
```

此分配不是必需的，因为这是目标指针。您的 'pointer_2' 指向实际的字符串。所以你可以使用喜欢，

字符 * 指针；

字符 *pointer_2 = str;

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:16:20.557

你的 *str 的地址被指针改变了，所以 *p 保存地址，数组保存值

# android - 实现 Android LoaderManager.LoaderCallbacks 正在引发语法错误

> ID：13189386
> 
> 赞同：0
> 
> 时间：2012-11-02T04:37:57.010
> 
> 标签：android, android-loadermanager

我正在编写 Android API 指南中的加载器教程，并且我已经逐字逐句地复制了它。我安装了 API 16，所以我知道我不需要导入支持库。

我得到的唯一错误是我的类声明：

```
public class GroupsFragment extends ListFragment implements OnQueryTextListener,  
LoaderManager.LoaderCallbacks<Cursor>
{

  ..... 
```

我得到的错误是：

> ```
> Breakpoint:GroupsFragment
> Syntax error on token ".", delete this token
> Syntax error on token "LoaderManager", delete 
> this token 
> ```

我对开发非常陌生，所以我无法弄清楚这一点。

任何建议表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T18:16:07.460

有同样的问题，但想通了。响应可能为时已晚，但是如果您导入 android.app.LoaderManager 应该没问题。注意：如果您使用的是 Eclipse，它不会自动导入（即使有内容辅助）。

# sql - Rails 按 has_many 的聚合选择和排序

> ID：13189390
> 
> 赞同：0
> 
> 时间：2012-11-02T04:38:17.357
> 
> 标签：sql, ruby-on-rails, sum

我有一个包含许多评论的课程模型。我的评论模型有一个评分字段。我想要的是一个查询以找到最受好评的课程。我想在 SQL 中执行此操作，以避免返回所有课程对象，然后尝试对它们进行排名和排序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:48:24.503

我会试试这个 SQL：

```
SELECT courses.* FROM 
 (SELECT courses.*, count(*) as rating_no 
  FROM courses 
  JOIN reviews ON reviews.course_id = courses.id 
  GROUP BY reviews.course_id ) as res 
ORDER BY rating_no DESC 
```

想法：您首先获取每门课程的所有数据以及评分数量。然后你只需对它们进行排序。我在 MySQL 中的经验是 GROUP BY 和 ORDER BY 互不喜欢，这就是我使用子查询的原因。您可能想先尝试一个查询，但我怀疑它会起作用:) 如果您不只关心评分*数量*，但例如实际平均评分，您可以进行如下查询

```
SELECT courses.* FROM 
 (SELECT courses.*, (SUM(reviews.rating)/count(*)) as avg_rating 
  FROM courses 
  JOIN reviews ON reviews.course_id = courses.id 
  GROUP BY reviews.course_id HAVING count(*) > 0) as res 
ORDER BY rating_no DESC 
```

很可能不需要 count(*) >0，但以防万一我添加了它，以指出您应该避免除以 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T12:59:00.023

您没有描述如何定义“最高评价”。您可能想要个人评分最高的课程：

```
Course.joins(:reviews).group("courses.id").order("reviews.rating desc") 
```

或者您可能想要总评分最高的课程：

```
Course.joins(:reviews).group("courses.id").order("sum(reviews.rating) desc") 
```

然后在每一个上，您都可以`first(10)`根据您想要的任何标准调用以获得前十名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T04:59:13.153

你可以试试这个

```
select  * from courses where review=(select max(rating) from table) 
```

或者

```
select top 1.* from courses order by review desc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T08:20:22.790

试试这个

`@courses = Course.find(:all, :joins => "INNER JOIN reviews ON reviews.courses_id = courses.id", :order => "reviews.rating DESC")`

或原始 sql

```
`SELECT `courses`.* FROM `courses` INNER JOIN reviews ON reviews.courses_id = courses.id ORDER BY reviews.rating DESC` 
```

# java - @DiscriminatorFormula - 冗余 IN 限制

> ID：13189393
> 
> 赞同：0
> 
> 时间：2012-11-02T04:38:47.963
> 
> 标签：java, hibernate, hibernate-mapping

我有类的层次结构，例如 AbstractClass - Employee - Engineer （以及许多其他子类），并且我使用每个类层次结构策略的单个表。AbstractClass 有属性`case`，在我定义的 Employee 中`@DiscriminatorFormula("case")`，Engineer 有一些`@DiscriminatorValue`。

当我使用 HQL-query 加载所有对象时`SELECT id FROM Employee`，Hibernate 会进行此 SQL 查询：

`select employee0_.id as col_0_0_ from public.tbl_employee employee0_ where employee0_.case in ('engineer', 'operator')`

换句话说，Hibernate 添加了带有所有鉴别器值的冗余限制。

有没有办法从 SQL 中排除这个 IN 限制？

* * *

AbstractClass 和 Employee 有一些简化的映射：

```
@MappedSuperclass
@Inheritance(strategy = InheritanceType.SINGLE_TABLE)
public abstract class AbstractClass {

    @Id
    @Column(name = "id")
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "SEQ_GEN")
    @SequenceGenerator(name = "SEQ_GEN", sequenceName = "objectid_sequence", allocationSize = 100)
    private long id;

    @Column(name = "case", nullable = false)
    private String case;
}

@Entity
@Table(name = "tbl_employee")
@DiscriminatorFormula("case")
public class Employee extends AbstractClass {

    @Column(name = "name", nullable = false)
    private String name = "";
} 
```

# jpa - JPA：@SequenceGenerator 没有生成序列

> ID：13189401
> 
> 赞同：3
> 
> 时间：2012-11-02T04:39:44.283
> 
> 标签：jpa, nativequery

我的应用程序已将 JPA 与 Hibernate 供应商和 Oracle 11G DB 一起使用。

在这里，我在我的 MST_EMP 表上使用如下本机查询..

```
 Query query  = this.entityManager.createNativeQuery("INSERT  INTO MST_EMP emp (" +
                    "EMP_NAME,EMP_MAIL_ID) VALUES ('dasdas',?)");
            query.setParameter(1,"dhrumil");
            query.executeUpdate(); 
```

这是我的 MST_EMP 实体详细信息..

```
@Table(name = "MST_EMP")
public class MstEmp implements Serializable, IsEntity {

    private static final long serialVersionUID = 1L;

    @Id 
    @Column(name = "EMP_CODE")
    @SequenceGenerator( name = "EMP_CODE_SEQ", sequenceName = "EMP_CODE_SEQ")   
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "EMP_CODE_SEQ")
    private String empCode;

    @Column(name="EMP_MAIL_ID")
    private String empMailId;

    @Column(name="EMP_NAME")
    private String empName;

    public MstEmp() {
    }

    public String getEmpCode() {
        return this.empCode;
    }

    public void setEmpCode(String empCode) {
        this.empCode = empCode;
    }

    public String getCreatedBy() {
        return this.createdBy;
    }

    public void setEmpMailId(String empMailId) {
        this.empMailId = empMailId;
    }

    public String getEmpName() {
        return this.empName;
    }

    public void setEmpName(String empName) {
        this.empName = empName;
    }

} 
```

据我了解，我们不需要在本机查询中为 EMP_CODE 赋予值。因为序列与它相关联。

但是这个查询给了我这样的错误..

```
SEVERE: ORA-01400: cannot insert NULL into ("PERK"."MST_EMP"."EMP_CODE")

SEVERE: javax.persistence.PersistenceException: org.hibernate.exception.ConstraintViolationException: could not execute native bulk manipulation query
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1179)
    at org.hibernate.ejb.AbstractEntityManagerImpl.convert(AbstractEntityManagerImpl.java:1112) 
```

谁能告诉我，我们需要在本机查询中提供 EMP_CODE 吗？

请问原生查询，不引用Entity中自动声明的序列？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T09:33:39.997

`EntityManager.persist()`JPA 仅在您通过方法持久化新对象时自动生成序列：

例如

```
EntityManager em = \\ ...  Initialise
MstEmp newMstEmp = new MstEmp();
newMstEmp.setEmpCode(...);
newMstEmp.setEmpMailId(...);
newMstEmp.setEmpName(...);
EntityTransaction tx = em.getTransaction();
tx.begin();
em.persist(newMstEmp);
tx.commit(); 
```

当您将 JPQL 直接应用到数据库（通过`entityManager.createQuery()`）或将原始 SQL 直接应用到数据库（通过`entityManager.createNativeQuery()`- 正如您在此处所做的那样）时，您必须插入自己的序列：

```
Query query  = this.entityManager.createNativeQuery("INSERT  INTO MST_EMP emp (" +
                    "EMP_CODE,EMP_NAME,EMP_MAIL_ID) VALUES (EMP_CODE_SEQ.nextval,'dasdas',?)");
query.setParameter(1,"dhrumil");
query.executeUpdate(); 
```

# unix - 同时输出到屏幕和文件以调试程序

> ID：13189403
> 
> 赞同：2
> 
> 时间：2012-11-02T04:39:50.790
> 
> 标签：unix, pipe

如果我有一个程序，比如说：`test.sh`，有时需要通过观察屏幕输出进行调试，并在程序到达输出中的某个点时终止程序。对于特别详细的输出，将此输出保存在文件以及终端中会很有用。

**在代码和调试工具中执行此操作的最佳方法是什么？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T04:39:50.790

输出可以使用以下行进行管道传输：

```
./test.sh | tee -a Log.log 
```

这将打印到屏幕并将 test.sh 的输出写入 Log.log。

# javascript - 从作为参数传递的匿名函数返回

> ID：13189406
> 
> 赞同：1
> 
> 时间：2012-11-02T04:40:08.447
> 
> 标签：javascript, node.js, anonymous-function

考虑以下代码：

```
function dbTask(q) {
    mysql = new MySQL();
    mysql.host = sqlHost;
    mysql.user = sqlUser;
    mysql.password = sqlPassword;
    mysql.query("USE stock");

    return mysql.query(q, function(err, results, fields) {
        if(err) {
            console.log("MySQL Error: " + err + ", Query: " + q);
            return false;
        } else {
            return results; //here
        }
    });
};

var r = dbTask("SELECT * FROM user;");
console.log(r); 
```

然而，我希望在倒数第二行`results`调用时从内部匿名函数返回`dbTask()`，我得到不同的输出，这似乎是正在使用的 mysql 库的一些内部构造。

如何让 dbTask`results`在调用时返回？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T04:43:34.467

由于`mysql.query`是异步的，那么您将不得不重新考虑您的架构。

*如果查询返回 true 或 false，则必须传入*要调用的处理程序，而不是让您的函数返回 true或 false。

像这样的东西：

```
function dbTask(q, success, failure) {
    mysql = new MySQL();
    mysql.host = sqlHost;
    mysql.user = sqlUser;
    mysql.password = sqlPassword;
    mysql.query("USE stock");

    mysql.query(q, function(err, results, fields) {
        if(err) {
            console.log("MySQL Error: " + err + ", Query: " + q);
            failure(err, results, fields);
        } else {
            success(results, fields);
        }
    });
}; 
```

你会这样称呼它：

```
dbTask(q, 
          function(results, fields) { /* ... */ }, 
          function(err, results, fields) { /* ... */ }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T04:43:52.130

您不能因为调用完成后`dbTask`返回`mysql.query`以启动查询。所以到 time`mysql.query`的回调被调用时，`console.log(r)`已经执行了。

这是 node.js 的异步特性的症结所在。

您*可以*做的是`dbTask`接受一个回调参数，该函数调用一次`results`可用，以便可以异步提供给调用者。

# opengl - GLSL中的奇怪错误，同时将属性分配给顶点着色器的变化

> ID：13189412
> 
> 赞同：1
> 
> 时间：2012-11-02T04:40:47.543
> 
> 标签：opengl, glsl, shader, vertex

我正在编写一个用于纹理映射的 GLSL 程序。我有一个奇怪的问题。从我的顶点着色器中，我试图将纹理坐标 vec2 作为变量传递给片段着色器。在同一个 prog 的 diff 着色器中，我做了同样的事情并且它起作用了。但是对于这种纹理它不起作用。如果我评论那条线，那么一切正常。我不知道为什么会这样。

这是顶点着色器：

```
attribute vec4 position; 
attribute vec4 color1; 
attribute vec4 normal; 
attribute vec2 texCoord;

uniform mat4 model; //passed to shader 
uniform mat4 projection; //passed to shader
uniform mat4 view; // passed to shader
uniform mat4 normalMatrix; //passed to shader
uniform mat4 worldNormalMatrix;
uniform vec3 eyePos;

varying vec4 pcolor; 
varying vec3 fNormal;
varying vec3 v;
varying mat4 modelMat;
varying mat4 viewMat;
varying mat4 projectionMat;
varying vec2 texCoordinate;
varying vec3 reflector;

void main()
{     
      //texCoordinate = texCoord;  // If I uncomment this, then I get wrong output. but the same thing works in a diff shader!! 
      mat4 projectionModelView;
      vec4 N;
      vec3 WorldCameraPosition = vec3(model*vec4(eyePos,1.0));
      vec3 worldPos = vec3(model*position);
      vec3 worldNorm = normalize(vec3(worldNormalMatrix*normal));
      vec3 worldView = normalize(vec3(WorldCameraPosition-worldPos));
      reflector = reflect(-worldView, worldNorm);      
      projectionMat = projection;
      modelMat=model;
      viewMat=view;
      N=normalMatrix*normal;      
      fNormal = vec3(N); //need to multiply this with normal matrix
      projectionModelView=projection*view*model;
      v=vec3(view*model*position); // v is the position at eye space for each vertex passed to frag shader
      gl_Position =  projectionModelView * position; // calculate clip space position     
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T05:42:02.037

```
varying vec4 pcolor; 
varying vec3 fNormal;
varying vec3 v;
varying mat4 modelMat;
varying mat4 viewMat;
varying mat4 projectionMat;
varying vec2 texCoordinate;
varying vec3 reflector; 
```

这是总共 17 个不同的向量。这对于大多数 2.1 级硬件来说太多了（它们通常只支持 16 个）。这可能就是当您取消注释该行时它“不起作用”的原因，因为您的顶点着色器将忽略您实际上没有写入的任何变化。

You should not be passing those matrices *at all*. They're *uniforms*; by definition, they don't change from vertex to vertex. And fragment shaders are perfectly capable of accessing those same uniforms too. So just declare them in your fragment shader if you need to use them.

# php - 将字符串转换为按位比较

> ID：13189414
> 
> 赞同：1
> 
> 时间：2012-11-02T04:41:02.393
> 
> 标签：php, bit-manipulation

是否可以轻松转换字符串

```
"4 | 2" 
```

进入标准的按位比较，因此它返回 6。

这样我就可以完成这样的事情

```
$var1 = "4 | 2";
if(evalAsBitwise($var1) & 2) {
    return true;
} else {
    return false;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:51:31.500

如果你用空格作为分隔符来分割你的字符串，你会得到三个部分：第一个数字、运算符和第二个数字。在您的函数中，您可以使用 switch 来确定要使用的运算符。

就像是

```
function evalAsBitwise($input) {      

   $parms = explode(" ", $input);       
   $next;
   $op;

   $total = array_shift($parms);

   while (!empty($parms)) {
     $next = array_shift($parms);
     if(is_numeric($next)) {
        switch($op) {
          case "|": $total = $total | intval($next); break;
          case "&": ...
        }
     }
     else {
       $op = $next;
     } 
   }// End while
   return $total;
} 
```

您还需要测试〜。但是，如果您需要它执行更复杂的表达式，例如 (a & b ^ (c ^ d))，它会变得更加复杂。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:13:57.917

试试这个。它仅适用于按位或。

```
function evalAsBitwise($var) {
    $values = explode($var);
    $result = 0;
    foreach ($$values as &$value) {
        $value = trim($value);
        $result = intVal($value) | intVal($result);
    }
    return $result;
} 
```

我的 php 技能有点生疏，请检查语法错误。

# objective-c - NSString 上的索引超出范围

> ID：13189415
> 
> 赞同：-3
> 
> 时间：2012-11-02T04:41:05.620
> 
> 标签：objective-c, ios

这是我的日志...

*** 由于未捕获的异常“NSRangeException”而终止应用程序，原因：“*** -[__NSCFConstantString substringToIndex:]: Range or index out of bounds”

我不知道该怎么办...有人可以帮我解决什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T04:54:50.343

字符串中的每个字符（例如`@"ABCD"`）都有一个关联的索引。在我的示例中，“A”将位于索引 0，“B”位于索引 1，“C”位于索引 2，等等。

字符串的`length`（例如`NSUInteger stringLength = myStringInstance.length;`）等于字符串中的字符总数。该字符串`@"ABCD"`的长度为 4。

该语句`NSString *mySubString = [@"ABCD" substringToIndex:2];`将`mySubString`等于`@"AB"`。您不能尝试访问大于或等于字符串长度的索引——例如`NSString *myOtherSubString = [@"ABCD" substringToIndex:4];`会崩溃。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:48:07.847

这可能是对其他问题的诊断。

您可能在程序的其他地方对内存管理不善。

这可能会导致您的字符串被不同的字符串“替换”。

# javascript - 使用 Javascript 和 websockets 进行客户端和服务器通信

> ID：13189416
> 
> 赞同：2
> 
> 时间：2012-11-02T04:41:20.430
> 
> 标签：javascript, html, websocket

我是 Javascript 的初学者，想知道使用 JS 和 websockets 连接客户端和服务器端的程序和起始代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:02:59.427

试试socket.io：http://socket.io/#how-to-use 如果你在服务器端有nodejs，那就更简单[了](http://socket.io/#how-to-use)

# javascript - 使用 Haxe 访问外部 JavaScript 库

> ID：13189417
> 
> 赞同：3
> 
> 时间：2012-11-02T04:41:31.313
> 
> 标签：javascript, haxe

我试图弄清楚如何从 Haxe 访问外部 JavaScript 库。extern 类的源文件是否应该与相应的本机 JavaScript 文件以及“主”Haxe 源文件位于同一文件夹中，还是可以在单独的源文件夹中定义？

这是我所指的文档：

[https://haxe.org/manual/target-javascript-external-libraries.html](https://haxe.org/manual/target-javascript-external-libraries.html)

此外，是否有任何 Haxe 文档解释了如何访问所有目标中的外部库（而不仅仅是一个目标）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T14:16:59.757

Extern 机制假设定义的类型在运行时存在（它们可以被调用/使用），但不假设这些类型的定义方式和位置。这适用于所有平台。

extern 库如何包含在您的项目中主要取决于目标，并且可能会有很大差异。

对于 JS，外部定义（.hx 文件）和包含这些类型的 JS（js 库）之间没有直接关联。haxe 文件应该可以通过 haxe 访问（使用`-cp`,`-lib`或将它们放在源目录中），而 js 文件应该可以通过运行时访问（在 haxe 生成的代码之前在 HTML 中包含 lib JS）。

可能会造成一些混乱的是，Haxe 支持一个允许您在生成的代码中嵌入外部 js 文件的功能。这样您就可以只分发一个文件，而不是一个主文件 + 一个或多个 lib 文件。您可以查看 Haxe 如何自动将 JQuery 包含[在`__init__()`](https://github.com/HaxeFoundation/hx3compat/blob/5d05c5c1962387ac3ffe1cfb73c6c389c8b9cbbd/std/js/JQuery.hx#L402).

# numpy - 如何在 scipy 中计算稀疏矩阵的广义逆

> ID：13189424
> 
> 赞同：1
> 
> 时间：2012-11-02T04:42:27.777
> 
> 标签：numpy, scipy, sparse-matrix, scientific-computing, matrix-inverse

我有一个稀疏矩阵 W，当我使用 时`linalg.pinv(W)`，它会引发一些错误：

```
Traceback (most recent call last):
  File "/Users/ad9075/PycharmProjects/bednmf/test.py", line 14, in testNmfRun
    self.factor = factorization(self.V)
  File "/Users/ad9075/PycharmProjects/bednmf/nmf.py", line 18, in factorization
    W_trans = linalg.pinv(W)
  File "/Library/Python/2.7/site-packages/scipy/linalg/basic.py", line 540, in pinv
    b = np.identity(a.shape[0], dtype=a.dtype)
IndexError: tuple index out of range` 
```

但是当我将其修改为 时`linalg.pinv(W.todense())`，它运行良好。但是，如果我想计算生成的**逆**矩阵，我真的需要转换稀疏矩阵吗？有人对此有想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T13:56:13.650

稀疏矩阵的逆（和广义逆）通常是密集的，除非您可以置换矩阵的行和列，使其成为块对角线。

因此，您的问题分为两部分：（i）找到使其成为块对角线的排列，以及（ii）使用 linalg.pinv 分别为每个块计算广义逆。如果您的矩阵足够小，只需先将其转换为密集矩阵，然后计算伪逆矩阵也是有效的。

另一方面，如果您想计算“A^{-1} x”之类的东西，使用 gmres 或其他一些迭代例程可能是更有效的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T13:52:22.087

您的答案就在这里：[C 中的良好矩阵求逆例程](https://stackoverflow.com/questions/11184037/good-matrix-inversion-routines-in-c)（不要让标题打扰您，讨论是关于 scipy 的）

但是你必须知道逆矩阵不一定是稀疏矩阵，正如 George E. Forsythe 和 Cleve B. Moler 所说：

> “几乎所有你可以用 A^{-1} 做的事情都可以在没有它的情况下完成”

# blackberry - 添加客户端证书http请求

> ID：13189426
> 
> 赞同：1
> 
> 时间：2012-11-02T04:42:32.300
> 
> 标签：blackberry, java-me, x509certificate

如何在 java-me 的 http 请求中附加客户端证书？在 c# 中，我会简单地这样做

```
 request.ClientCertificates.Add(new X509Certificate()); 
```

其中 request 是 **HttpWebRequest**的一个实例。

# django - 延伸百日草

> ID：13189427
> 
> 赞同：0
> 
> 时间：2012-11-02T04:42:35.557
> 
> 标签：django, zinnia

我正在尝试编辑 Zinnia 的模板，但我不知道 pip install zinnia 的位置。我使用了网站上的这个安装说明。我尝试查找和定位，但找不到它。

$ pip install django-blog-zinnia

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:02:20.527

如果您使用的是虚拟环境，它将安装在 python2.x/site-packages/ 中。

如果您不使用虚拟环境，它将安装在 /lib/ 文件夹下的同一位置。

我对 Zinnia 做了很多修改，我只是将它从站点包中取出到我的 django 项目中以备不时之需。

# javascript - 如何在Javascript中匹配“=”？

> ID：13189429
> 
> 赞同：-2
> 
> 时间：2012-11-02T04:42:39.987
> 
> 标签：javascript, regex

我已经`"icon_abc".match(/\bicon_(.*?)\b/);`工作了，打印出来的`["icon_abc", "abc"]`

但是当我使用时`"icon=abc".match(/\bicon=(.*?)\b/);`，我无法得到 abc，它会打印`["icon=", ""]`

如何在 Javascript 中匹配这些特殊符号？如： `= -` ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T04:47:12.527

`=`不是那个意义上的特殊符号。

这会做，例如：

```
"icon=abc".match(/\bicon=(.+)\b/) 
```

也可以这样：

```
"icon=abc".match(/\bicon=(.*)\b/) 
```

您需要进一步阐明您的要求，以便涵盖可能字符串的整个字段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T04:52:07.003

删除 ?

```
"icon=abc".match(/\bicon=(.*)\b/);
["icon=abc", "abc"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T04:56:10.043

利用：

```
"icon=abc".match(/\bicon=(.+?)\b/) 
```

问题是这`*`意味着匹配零个或多个前面的 RE，并且`?`修饰符使其非贪婪，因此它将返回最短的匹配。在这种情况下，零长度字符串匹配，因为单词边界就在那里。

更改为`+`意味着它将匹配 1 个或更多，因此当它已经位于单词边界时，您不会得到空匹配。

# c# - 如何获取 Current.Server.MapPath？

> ID：13189434
> 
> 赞同：0
> 
> 时间：2012-11-02T04:43:26.777
> 
> 标签：c#, asp.net-mvc

我正在使用 MVC。我想将 xml 文件保存在服务类中。所以写了这个。

```
string path = HttpContext.Current.Server.MapPath((Url.Content("~/client-authentication.xml"))); 
```

但有错误，它说

```
'System.Security.Policy.Url' does not contain a definition for 'Content' 
```

怎么解决？？我该如何给出路径？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T05:05:17.637

此代码在您的视图（.cshtml）或控制器（.cs）中吗？

如果是cshtml，可以直接写“string path = Url.Content(...)”，不需要Server.MapPath。

如果是控制器，只需 Server.MapPath(...)，不需要 Url.Content。

PS，您还可以使用 AppDomain.CurrentDomain.BaseDirectory 检索站点根目录的物理路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T04:47:29.380

这是错误的`Url`课程。您需要名为[Url的](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.url%28v=vs.98%29.aspx)[System.MVC.Web.UrlHelper](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.content%28v=vs.108%29.aspx)实例，它是 MVC 控制器上提供的属性。

# html - 试图找到两个向量之间的角度（三角形）（HTML5 Canvas）

> ID：13189437
> 
> 赞同：0
> 
> 时间：2012-11-02T04:43:39.787
> 
> 标签：html, canvas, vector, geometry, angle

如果绘制的不是直角，我很难理解为什么我的角度会返回奇怪的角度。我在 HTML5 中使用 Canvas 绘制了一个基本三角形。

我有 html 代码和 js 代码要粘贴在这里：请有人告诉我为什么只有这些直角加起来是 180 度。我已经将 js 代码设置为将角度及其总和输出到控制台......所以你可以看到我在说什么。

您可以修改绘图功能代码，将其中一个点的位置设置为直角..然后您将看到180度并且角度正确。

我在互联网上搜索了一个解释并检查了我的公式。似乎无法弄清楚这一点。

非常感谢您提供的任何帮助..

--- HTML 代码 ---

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Canvas - Triangle experiment</title>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="js/drawShapes.js"></script>
    <style>
        * { margin: 0; }
        * { padding: 0; }

        span.markings {
            position: absolute;
        }

        div.drawingArea {
            margin: 50px 0 0 10px;
            padding: 0;
            width: 500px;
            height: 500px;
            position: relative;
            background: #ccc;
        }
        .coords { position: absolute; top: 0; left: 200px; }
        .coords p { position: relative; }
        .xcoord, .ycoord {  font-weight: bold; color: red; }
        #myCanvas { background: #eee; }
    </style>
  </head>
  <body>
    <div class="coords"><p>X: <span class="xcoord"></span></p><p>Y: <span class="ycoord"></span></p></div>
    <div class="drawingArea">
        <span class="markings A"></span>
        <span class="markings B"></span>
        <span class="markings C"></span>
        <canvas id="myCanvas" width="410" height="410">Your browser does not have support for Canvas. You should see:</canvas>
    </div>
  </body>
</html> 
```

--- JS 代码 ---

```
$(document).ready(function(){
    // Just for dev purposes.. show X and Y coords when inside drawingArea
    $('.drawingArea').mousemove(function(e){
        $('.xcoord').html(e.pageX -10); // subtract 10 for margin left is 10
        $('.ycoord').html(e.pageY -50); // subtract 40 bc margin top is 40
    });

    draw();

    function draw()
    {
        // Initialize context
        createContext('2d');

        // Set the style properties.
        context.fillStyle   = '#fff';
        context.strokeStyle = '#FF9900';
        context.lineWidth   = 5;

        // Set initial positions and lengths
        pts = {};
        pts.AXLoc = 60;
        pts.AYLoc = 40;
        pts.BXLoc = 360;
        pts.BYLoc = 40;
        pts.CXLoc = 100;
        pts.CYLoc = 340;

        // Get difference between points
        vector = {};
        vector.Ax = Math.abs(pts.AXLoc-pts.BXLoc);
        vector.Ay = Math.abs(pts.AYLoc-pts.BYLoc);
        vector.Bx = Math.abs(pts.BXLoc-pts.CXLoc);
        vector.By = Math.abs(pts.BYLoc-pts.CYLoc);
        vector.Cx = Math.abs(pts.CXLoc-pts.AXLoc);
        vector.Cy = Math.abs(pts.CYLoc-pts.AYLoc);

        console.log(vector.Ax);
        console.log(vector.Ay);
        console.log(vector.Bx);
        console.log(vector.By);
        console.log(vector.Cx);
        console.log(vector.Cy);

        // Find the magnitude of each vector
        vector.magA = Math.sqrt(Math.pow(vector.Ax, 2) + Math.pow(vector.Ay, 2));
        vector.magB = Math.sqrt((Math.pow((vector.Bx), 2) + Math.pow((vector.By), 2)));
        vector.magC = Math.sqrt((Math.pow((vector.Cx), 2) + Math.pow((vector.Cy), 2)));

        // Cos A = (A.C) / sqrt(magnitude of A) x (magnited of C)
        // This should return radian which is then converted to degrees
        // Create function once code works!
        vector.angleA = ((vector.Ax * vector.Cx) + (vector.Ay * vector.Cy)) / (vector.magA * vector.magC); 
        vector.angleA = Math.acos(vector.angleA) * (180/Math.PI);
        vector.angleB = ((vector.Ax * vector.Bx) + (vector.Ay * vector.By)) / (vector.magA * vector.magB); 
        vector.angleB = Math.acos(vector.angleB) * (180/Math.PI);
        vector.angleC = ((vector.Bx * vector.Cx) + (vector.By * vector.Cy)) / (vector.magB * vector.magC); 
        vector.angleC = Math.acos(vector.angleC) * (180/Math.PI);

        // Output test data         
        console.log('angle a = ' + vector.angleA);
        console.log('angle b = ' + vector.angleB);
        console.log('angle c = ' + vector.angleC);
        vector.allangles = vector.angleA + vector.angleB + vector.angleC;
        console.log('All angles = ' +vector.allangles ); // only adds up to 180deg if right angle??!!

        // Begin drawing
        context.beginPath();
        // Start from the top-left point.
        context.moveTo(pts.AXLoc, pts.AYLoc); // give the (x,y) coordinates
        context.lineTo(pts.BXLoc, pts.BYLoc);
        context.lineTo(pts.CXLoc, pts.CYLoc);
        //context.lineTo(pts.AXLoc, pts.AYLoc); // closes the origin point? alternate way of closing???
        context.lineJoin = 'mitre';
        context.closePath(); // closes the origin point? good for strokes

        // Done! Now fill the shape, and draw the stroke.
        // Note: your shape will not be visible until you call any of the two methods.
        context.fill();
        context.stroke();
        context.closePath();

        // Set position of markings (spans)
        $('span.markings.A').css({
                'top'   : pts.AYLoc -30,
                'left'  : pts.AXLoc -5
            });

        $('span.markings.B').css({
                'top'   : pts.BYLoc -5,
                'left'  : pts.BXLoc +10
            });

        $('span.markings.C').css({
                'top'   : pts.CYLoc -5,
                'left'  : pts.CXLoc -25
            });

        // Write markings onto canvas (degrees and lengths) 
        $('span.markings.A').html('A');  
        $('span.markings.B').html('B');  
        $('span.markings.C').html('C');         
    }

    function createContext(contextType)
    {
        // Get the canvas element.
        var elem = document.getElementById('myCanvas');
        if (!elem || !elem.getContext) {
        return;
        }

        // Get the canvas 2d context.
        context = elem.getContext(contextType);
        if (!context) {
        return;
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:37:16.737

你的角度公式有点错误。这是一个工作小提琴：http: [//jsfiddle.net/manishie/AgmF4/](http://jsfiddle.net/manishie/AgmF4/)。

这是我更正的公式：

```
 vector.angleA = (Math.pow(vector.magB, 2) + Math.pow(vector.magC, 2) - Math.pow(vector.magA, 2)) / (2 * vector.magB * vector.magC);
    vector.angleA = Math.acos(vector.angleA) * (180/Math.PI);

    vector.angleB = (Math.pow(vector.magA, 2) + Math.pow(vector.magC, 2) - Math.pow(vector.magB, 2)) / (2 * vector.magA * vector.magC);
    vector.angleB = Math.acos(vector.angleB) * (180/Math.PI);

    vector.angleC = (Math.pow(vector.magA, 2) + Math.pow(vector.magB, 2) - Math.pow(vector.magC, 2)) / (2 * vector.magA * vector.magB);
    vector.angleC = Math.acos(vector.angleC) * (180/Math.PI); 
```

# c# - 使用 C# 和 Mono 的 Hadoop 流式传输：IdentityMapper 使用不正确

> ID：13189445
> 
> 赞同：12
> 
> 时间：2012-11-02T04:44:50.463
> 
> 标签：c#, mono, hadoop-streaming

我有用 C# 编写的 mapper 和 reducer 可执行文件。我想将这些与 Hadoop 流一起使用。

这是我用来创建 Hadoop 作业的命令...

```
hadoop jar $HADOOP_HOME/contrib/streaming/hadoop-streaming-*.jar 
-input "/user/hduser/ss_waits" 
-output "/user/hduser/ss_waits-output" 
–mapper "mono mapper.exe" 
–reducer "mono reducer.exe" 
-file "mapper.exe" 
-file "reducer.exe" 
```

这是每个mapper遇到的错误...

```
java.io.IOException: Type mismatch in key from map: expected org.apache.hadoop.io.Text, recieved org.apache.hadoop.io.LongWritable
at org.apache.hadoop.mapred.MapTask$MapOutputBuffer.collect(MapTask.java:1014)
at org.apache.hadoop.mapred.MapTask$OldOutputCollector.collect(MapTask.java:592)
at org.apache.hadoop.mapred.lib.IdentityMapper.map(IdentityMapper.java:38)
at org.apache.hadoop.mapred.MapRunner.run(MapRunner.java:50)
at org.apache.hadoop.mapred.MapTask.runOldMapper(MapTask.java:436)
at org.apache.hadoop.mapred.MapTask.run(MapTask.java:372)
at org.apache.hadoop.mapred.Child$4.run(Child.java:255)
at java.security.AccessController.doPrivileged(Native Method)
at javax.security.auth.Subject.doAs(Subject.java:415)
at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1121)
at org.apache.hadoop.mapred.Child.main(Child.java:249) 
```

基于调用堆栈，问题似乎是（Java）IdentityMapper 类被用作映射器。（这解释了导致类型不匹配错误的原因）。**映射器应该是可执行文件“mono mapper.exe”。**

任何想法为什么不使用*mono mapper.exe ？*

mapper.exe 和 reducer.exe 具有以下权限：-rwxr-xr-x

我能够从 unix 命令 shell 成功执行*mono mapper.exe*并让它从标准输入读取文本并写入标准输出。

**环境：**

*   Ubuntu Server 12.04 LTS（在 Azure 上运行的 VM）
*   Hadoop 1.0.4
*   单声道 2.10

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:46:45.083

假设 mono 在 PATH 中，您是否需要 mapper.exe 和 reducer.exe 的完整路径？IE

```
hadoop jar $HADOOP_HOME/contrib/streaming/hadoop-streaming-*.jar 
-input "/user/hduser/ss_waits" 
-output "/user/hduser/ss_waits-output" 
–mapper "mono /path/to/mapper.exe" 
–reducer "mono /path/to/reducer.exe" 
-file "mapper.exe" 
-file "reducer.exe" 
```

# php - 用php从数据库表中操作值

> ID：13189450
> 
> 赞同：0
> 
> 时间：2012-11-02T04:45:23.050
> 
> 标签：php

我目前在 MySQL 数据库中有 5 个表。其中一些共享外键并且相互依赖。我根据他们的专业显示课程。每节课都在或`fall`期间教授。在我的数据库中，我有一个名为 term 的表，其中包含、和字段。特别是该字段是具有三个值的 a ，，。这表示,或。当我显示查询而不是显示查询时，或者我可以显示查询等 ？额外：如何在每个循环的末尾添加空间，使数据看起来不聚集？`spring``all_year``id``year``semester``semester``tinyint``0``1``2``fall``spring``all_year``0``1``2``fall``spring`

**钥匙**

```
0 Fall
1 Spring
2 All-year 
```

**PHP**

```
<?

try {

    $pdo = new PDO ("mysql:host=$hostname;dbname=$dbname","$username","$pw");
    } catch (PDOException $e) {
    echo "Failed to get DB handle: " . $e->getMessage() . "\n";
    exit;
  }
      $query = $pdo->prepare("SELECT course.name, course.code, course.description, course.hours, semester.semester, semester.year
                            FROM course
                            LEFT JOIN major_course_xref ON course.id = major_course_xref.course_id
                            LEFT JOIN major ON major.id = major_course_xref.major_id
                            LEFT JOIN course_semester_xref ON course.id = course_semester_xref.course_id
                            LEFT JOIN semester ON course_semester_xref.semester_id = semester.id");
      $query->execute();

     if ($query->execute()){

      while ($row = $query->fetch(PDO::FETCH_ASSOC)){       
        print $row['name'] . "<br>";
        print $row['code'] . "<br>";
        print $row['description'] . "<br>";
        print $row['hours'] . " hrs.<br>";
        print $row['semester'] . "<br>";
        print $row['year'] . "<br>";
    }
    }
else
    echo 'Could not fetch results.';

      unset($pdo); 
      unset($query);

?> 
```

**当前显示**

```
Computer Programming I
CPSC1400
Introduction to disciplined, object-oriented program development.
4 hrs.
0
2013 
```

**欲望展示**

```
Computer Programming I
CPSC1400
Introduction to disciplined, object-oriented program development.
4 hrs.
Fall
2013 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:53:56.673

`semester.semester`在查询中替换为：

```
CASE semester.semester
  WHEN 0 THEN 'Spring'
  WHEN 1 THEN 'Fall'
  WHEN 2 THEN 'All-year'
END semester 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T04:59:21.607

再做一张桌子。说学期时间。

```
|  id  |  semester_time  |
|  0   |  Fall           |
|  1   |  Spring         |
|  2   |  All_year       | 
```

然后只需通过semester_time 进行连接和检索。

**基于上表的查询的可能模型：**

```
SELECT course.name, course.code, course.description, course.hours, semester.semester, semester.year, semester_time 
                            FROM course
                            LEFT JOIN major_course_xref ON course.id = major_course_xref.course_id
                            LEFT JOIN major ON major.id = major_course_xref.major_id
                            LEFT JOIN course_semester_xref ON course.id = course_semester_xref.course_id
                            LEFT JOIN semester ON course_semester_xref.semester_id = semester.id
                            LEFT JOIN semester_time ON semester.semester = semester_time.id 
```

**在每个循环之后添加空间**

* * *

```
 while ($row = $query->fetch(PDO::FETCH_ASSOC)){       
        print $row['name'] . "<br>";
        print $row['code'] . "<br>";
        print $row['description'] . "<br>";
        print $row['hours'] . " hrs.<br>";
        print $row['semester'] . "<br>";
        print $row['year'] . "<br>";
        echo "<div class='add-space'></div>";
    } 
```

**在CSS中**

```
.add-space {
margin-bottom: 15px; 
} 
```

只需更改值以满足您的需求。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T05:04:01.237

```
while ($row = $query->fetch(PDO::FETCH_ASSOC)){       
        print $row['name'] . "<br>";
        print $row['code'] . "<br>";
        print $row['description'] . "<br>";
        print $row['hours'] . " hrs.<br>";
        print ($row['semester'] == 0) ? "FALL":( ($row['semester'] == 1) ? "Spring" : ( ($row['semester'] == 2) ? "All-year":"")) . "<br>";
        print $row['year'] . "<br>";
        print "<br>------------------------------<br />";
    } 
```

# .net - .NET New Relic Agent 是否可以配置为记录我的应用程序的日志消息和捕获的异常？

> ID：13189452
> 
> 赞同：3
> 
> 时间：2012-11-02T04:45:37.307
> 
> 标签：.net, logging, azure, exception-handling, newrelic

我目前正在将 New Relic 用于托管在 Azure 中的 .NET 应用程序，在 New Relic UI 中，我可以看到我的 Web 应用程序中发生的所有未捕获的异常。我想做的是记录所有消息并捕获异常，以便我可以在 New relic UI 中看到它们以及未捕获的异常（我现在看到的）。以前有没有人这样做过，如果是这样，你能提供一个操作方法或一些代码来说明你是如何工作的吗？

[除了以某种方式使用“NoticeError”API 调用](https://newrelic.com/docs/dotnet/AgentApi)外，我无法在网上找到太多关于此的信息。这是正确的方法还是有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T19:56:53.493

联系 New Relic 支持后，我发现了以下信息：

*   New Relic 确实不是伐木设施
*   但是，它确实允许您为每个 Web 事务记录单个异常或字符串消息

因此，您可以配置 NoticeError API 调用以记录引发的最高级别异常或每个 Web 服务或页面请求的单个错误消息字符串。

然后，此错误将显示在“事件”选项卡中“错误”部分下的 New Relic UI 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T16:04:09.940

NewRelic 不是记录工具！它是监控/分析设施。你必须自己塑造你的日志记录。使用您熟悉的任何日志框架，或创建您自己的框架。

我个人使用 System.Diagnostics.Trace 的静态方法[WriteLine](http://msdn.microsoft.com/en-us/library/149a051x.aspx)、[TraceError](http://msdn.microsoft.com/en-us/library/9w0w6s51.aspx)、[TraceWarning](http://msdn.microsoft.com/en-us/library/4f15e7w4.aspx)的包装器。然后我让[Azure 诊断监视器](http://msdn.microsoft.com/en-us/library/windowsazure/gg433048.aspx)自动传输它们。我不会仅仅为了记录一些东西而引发异常。

# sql - 在 SQL 中查找 5 分钟时间间隔内的记录

> ID：13189458
> 
> 赞同：0
> 
> 时间：2012-11-02T04:46:27.323
> 
> 标签：sql, sql-server, time, intervals

我有一个超过 100,000 行的表，其中包含以下列：ID、时间和布尔值。
时间列将时间跟踪到秒。
我需要一个查询，从表的开始到结束每 5 分钟的时间间隔查找 Boolean = 1 的所有实例，然后按时间间隔对计数进行分组。

该表代表 4 小时的数据，所以我应该得到 48 行结果。
我正在使用 MS SQL Server。

我尝试了几种方法，但时间间隔逻辑让我很难过。

编辑：我想通了！

```
SELECT DATEADD(MINUTE, DATEDIFF(MINUTE, 0, timestamp)/5 * 5,0), COUNT(*)  
FROM table  
WHERE isrepeat = 1  
GROUP BY by DATEADD(MINUTE, DATEDIFF(MINUTE, 0, timestamp)/5 * 5,0)  
ORDER BY by 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T04:49:14.743

这应该做。您可以按时间间隔/5 对结果进行分组。

```
select
cast(to_char(Time, 'mi') as int) / 5 * 5 || ' - ' || cast(to_char(Time, 'mi') as int) / 5 * 5 + 5 as "Interval",
count(1)
from tableName
where
Boolean = 1
group by
cast(to_char(Time, 'mi') as int) / 5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-08T06:04:51.657

```
select * from tableName where Time 
BETWEEN DATEADD(minute, -5, current_timestamp)
AND current_timestamp 
```

# entity-framework - 处理来自实体框架的 SQL 异常

> ID：13189463
> 
> 赞同：1
> 
> 时间：2012-11-02T04:47:07.383
> 
> 标签：entity-framework, exception-handling

在我的 sql 存储过程中，我做了一些插入和更新，在某些情况下会引发主键或唯一键违规。

当我尝试从 ADO.net 执行此过程时，.net 应用程序也会抛出该异常并让我知道发生了错误。

但是当我尝试从 EF 执行此过程时，它只是执行。它既不显示任何内容，也不更新任何内容。

我应该如何处理或通知用户发生了错误？

Ado.Net 代码是

```
 SqlConnection sqlConnection = new SqlConnection(@"data source=database01; database=test; user id=test; password=test;");
        SqlCommand cmd = new SqlCommand("[uspUpdateTest]", sqlConnection);
        cmd.CommandType = System.Data.CommandType.StoredProcedure;
        cmd.Parameters.AddWithValue("RunID", RunID);
        cmd.Parameters.AddWithValue("RunCode", RunCode);
        sqlConnection.Open();
        var str = cmd.ExecuteNonQuery(); 
```

实体框架代码是

```
 TestEntities context = new TestEntities();
        var str=context.UpdateRun(RunID, RunCode); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-03T20:34:56.943

我非常确定，您必须在函数导入中设置一些返回类型（虚拟）。大多数情况下这是有道理的，因为如果你不这样做，你的方法名称不会出现在智能感知中，你将无法使用 context.MethodName 访问它。

我对您的建议是，删除函数导入的返回类型并将其设置为无。**使用上下文的ExecuteFunction**方法执行您的方法。

Context.ExecuteFunction(FunctionName,Parameters)。它肯定会抛出异常。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-03T04:41:50.133

首先，确保您在存储过程中抛出异常，我们可以在 C# 代码中捕获该异常。请参阅 - [http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/efea444e-6fca-4e29-b100-6f0c5ff64e59](http://social.msdn.microsoft.com/forums/en-US/adodotnetdataproviders/thread/efea444e-6fca-4e29-b100-6f0c5ff64e59) - 报价：

> 如果希望 RAISERROR 抛出 SqlException，则需要将其严重性设置为 10 以上。严重性为 10 及以下的错误是信息性的，因此不要抛出异常。

我还将向您展示以下代码。当我使用实体框架从我的服务层获取数据时，我一直在我的 MVC 控制器中使用它：

```
try
{

   try
   {
        //Entity Framework/Data operations that could throw the data exception
        //...
   } catch (DataException dex) //see http://msdn.microsoft.com/en-us/library/system.data.dataexception.aspx
   {
      //Specifically handle the DataException
      //...
   }
}
catch (Exception e)
{
   //do something (logging?) for the generic exception
   throw e;
} 
```

如果第一个捕获未触发以查看“e”的异常类型/内部异常并从那里开始，您可以在最后一个捕获上放置一个断点。在通用异常上放置断点很有用，因为它让我知道什么时候我还没有处理某些事情。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-17T05:27:03.810

对于实体框架中的 sql 引发的错误异常，我们可以使用以下方式：假设我们有 DBContext。以便

```
var connection= (SqlConnection)db.Database.Connection;
if (connection != null && connection.State == ConnectionState.Closed)
        {
            connection.Open();
        }
        SqlCommand com = new SqlCommand("spname", connection);
        com.CommandType = CommandType.StoredProcedure;
com.Parameters.Add(new SqlParameter("@parameter", parameter));
                        try
                        {
                            com.ExecuteNonQuery();
                        }
                        catch (Exception ex)
                        {
                            throw ex.message;
                        } ` 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-02T13:48:42.983

这里的[问题](https://stackoverflow.com/questions/8645233/entity-framework-4-2-getting-proper-database-errors?lq=1)很好地总结了优雅地捕获和处理异常。之后你有几个选项可以回滚等。

# r - 如何将 .Rdata 格式转换为文本文件格式

> ID：13189467
> 
> 赞同：16
> 
> 时间：2012-11-02T04:47:29.630
> 
> 标签：r, export-to-csv, file-conversion

我是 R 的新手，我正在尝试将 .Rdata 格式文件转换为逗号分隔的文本文件格式。有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-02T04:52:31.217

```
load("yourData.RData")
ls() #returns a list of all the objects you just loaded (and anything else in your environment)
write.csv(theItemOfInterestFromYourDRadataFileAsThereMayBeMoreThanOneThingInthere,
  file="yourCSV.csv") 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-11-02T05:21:49.057

一个`.RData`文件可以包含多个任何类的对象。

如果您的文件包含超过 1 个`data.frame`-like 类的对象，则以下内容应该有效

```
resave <- function(file){
  e <- new.env(parent = emptyenv())
  load(file, envir = e)
  objs <- ls(envir = e, all.names = TRUE)
  for(obj in objs) {
    .x <- get(obj, envir =e)
    message(sprintf('Saving %s as %s.csv', obj,obj) )
    write.csv(.x, file = paste0(obj, '.csv'))
  }
}

  resave('yourData.RData') 
```

您可以将呼叫更改`write.csv`为做您想做的事情。如果您的对象与 一起表现不佳`write.csv`，那么您不应该尝试这样做。

# javascript - 如何在 Dashcode 的列表中获取所选项目的值

> ID：13189470
> 
> 赞同：0
> 
> 时间：2012-11-02T04:47:56.553
> 
> 标签：javascript, dashcode

所以我在 Dashcode 中有一个静态列表，设置为允许多项选择。dashcode 文档并不那么复杂，我似乎无法找到如何判断列表中的元素是否被选中。到目前为止，我只能浏览列表并获取元素值。

```
var labelArray = document.getElementsByClassName("rowLabel_template");

for (var i = 0; i<labelArray.length; i++)
{
    if(labelArray[i].innerHTML=="White")
    {
        alert("White");
        selectionString = labelArray[i].innerHTML;
        document.getElementById("displayText").innerText = selectionString;
        break;
    }
} 
```

# html - 具有行高的字符底部的CSS切割？

> ID：13189471
> 
> 赞同：2
> 
> 时间：2012-11-02T04:48:03.370
> 
> 标签：html, css, web

我试图让一个文本字符触摸它下面的钻孔器。

我没有边距也没有填充，但是有一个间隙，因为字体字符本身似乎在字符下方有空格。

我试图减少行高，但这会削减字符的顶部。我想剪掉字符的底部。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T04:50:48.677

基线以下的空间在印刷世界中称为下降。不幸的是，您无法使用 CSS 进行调整。

你可以做的是将你的字符串放在一个 div 中。在 CSS 中设置`height`你想要的，然后设置`overflow:hidden;`

## [演示在这里](http://jsfiddle.net/EfajG/)

```
<div class="cutter">
    This a test string
</div> 
```

**CSS：**

```
.cutter {
    display:block;
    font-size:24px;
    height:20px;
    overflow:hidden;
} 
```

结果：

![以随机高度剪切的文本](../Images/ade8a1daf236437111ae059b8f00d9a0.png)

正如 Dai 在评论中指出的那样，您还可以将文本放置和定位在父容器中，然后应用负底部边距。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-09T08:15:01.220

请检查此代码段，这可能会对您有所帮助！

```
div {
   display: -webkit-box;
   -webkit-line-clamp: 4;
   -webkit-box-orient: vertical;
   overflow: hidden;
   text-overflow: ellipsis; 
} 
```

我将此参考[https://www.codegrepper.com/code-examples/css/css+text+truncate+max+height](https://www.codegrepper.com/code-examples/css/css+text+truncate+max+height)

# java - 我的抽象类中有一个通用方法。我如何使它工作？

> ID：13189473
> 
> 赞同：0
> 
> 时间：2012-11-02T04:48:16.650
> 
> 标签：java, generics

我有一个名为 Contact 的类，它是名为 PersonalContact 和 BusinessContact 的类的超类。

我的类中有一个抽象方法，它应该告诉子类来实现它。方法是

```
public abstract Set<T> getEventsWithinPeriod(DateTime start, DateTime end); 
```

T 可以与每个子类中不同类型的事件互换。PersonalContacts 有生日，BusinessContacts 有会议。问题是我收到一条错误消息`T cannot be resolved to a type`，但这不是泛型的全部意义吗？

我也尝试将其放入类标题中

```
public abstract class Contact<T> implements Comparable<Contact>{ 
```

但是编译器给了我一个警告说

```
Contact is a raw type. References to generic type Contact<T> should be parameterized. 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T04:51:33.887

它应该引入一个正式的类型参数：

```
public abstract <T> Set<T> getEventsWithinPeriod(Class<T> type, DateTime start, DateTime end); 
```

即使没有参数，它实际上也可以工作`Class<T> type`。但是看起来您打算`T`在方法内部实例化它（由于类型擦除，您不能这样做）。因此，该参数可以帮助在运行时反射地实例化实际类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:00:50.403

由于您想将 T 与子类而不是 getEventsWithinPeriod 方法联系起来，因此将 T 声明为联系的参数。

```
public abstract class Contact<T>
{
    public abstract Set<T> getEventsWithinPeriod();
}

class DOB
{
}
class BMeeting
{
}

class PersonalContact extends Contact<DOB>
{
    @Override
    public Set<DOB> getEventsWithinPeriod() 
    {
        // TODO Auto-generated method stub
        return null;
    }
}

class BusinessContact extends Contact<BMeeting>
{
    @Override
    public Set<BMeeting> getEventsWithinPeriod() 
    {
        return null;
    }
} 
```

# linux - 哪个 Linux 发行版更适合 Node.js 网络服务器

> ID：13189474
> 
> 赞同：5
> 
> 时间：2012-11-02T04:48:19.530
> 
> 标签：linux, node.js, webserver

我用 Node.js 创建了一个 Web 服务器。我正在使用 Express 框架。数据库是 MongoDB。

我想在 Linux 机器上托管 Web 服务器。我不知道如何在不同的 Linux 发行版之间做出决定，例如 Debian、Unbuntu 或 RedHat。

我的问题是：

1.  不同分布的主要区别是什么？
2.  我应该考虑哪些因素？
3.  哪一个更符合我的要求？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T06:01:36.693

不同分布的主要区别是什么？

*   没有。（只要运行 node.js 是唯一的问题）

我应该考虑哪些因素？

*   node.js 是否有任何未解决的问题尚未解决。

哪一个更符合我的要求？

*   我会考虑 Ubuntu，因为它很受欢迎，并且由于发布周期更短，可以更快地解决错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:01:25.093

我在**Debian 中使用它。坚如磐石**！

在你的情况下，它也符合 Joachim Isaksson 给你的聪明提示 - `use whatever you're familiar with`。

# c - 使用 Mingw 编译

> ID：13189476
> 
> 赞同：0
> 
> 时间：2012-11-02T04:48:29.780
> 
> 标签：c, mingw32

我在文件夹中有一堆 C 文件和头文件。当我用 MinGW 编译器编译 C 文件时，它显示没有这样的文件或目录。但我将所有文件都放在同一个文件夹中。我如何让他们编译？

我已附上代码供您参考（文件`computil.c`）：

```
#include <stdio.h>
#include <computil.h>
#include <dataio.h>

int getc_skip_marker_segment(const unsigned short marker, unsigned char **cbufptr, unsigned char *ebufptr)
{
  int ret;
  unsigned short length;

  ret = getc_ushort(&length, cbufptr, ebufptr);
  if(ret)return(ret);
  length -= 2;
  if(((*cbufptr)+length) >= ebufptr)
  {
    fprintf(stderr, "ERROR : getc_skip_marker_segment : ");
    fprintf(stderr, "unexpected end of buffer when parsing ");
    fprintf(stderr, "marker %d segment of length %d\n", marker, length);
    return(-2); }(*cbufptr) += length; return(0);
  }
} 
```

我正在用`gcc -c computil.c`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:12:27.853

我相信您将不得不将当前目录添加到 gcc 使用的“标准位置”列表中。当您使用而不是“computil.h”时，Unix 风格的编译器不会在当前目录中查找。

要快速解决此问题，请添加`-I.`到 gcc 命令行。（破折号，大写的眼睛，句号）：gcc -I。编译器.c

如果这是一个应用程序包含文件，旨在在找到源文件的位置找到，那么您应该将包含行更改为：#include "computil.h"

这是 Classic C 在 ANSI 标准化过程中丢失的宝贵细微差别之一。标准 C 让编译器决定是否存在差异，或者在 <> 括号和 "" 引用的标题之间是否存在差异。它在 Unix 和 GNU 中有所不同（“GNU's Not Unix！”），好吧，Unix 几乎只是在某些地方更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:59:41.380

简而言之，`#include <header.h>`意思是“在编译器自己的库目录中`#include "header.h`搜索，而意思是“在与生成#include 的.c 文件相同的目录中搜索”。

我不相信 gcc 有任何名为 computil.h 和 dataio.h 的库头文件，所以代码不会编译。

# drop-down-menu - KendoUI 中的下拉列表

> ID：13189480
> 
> 赞同：0
> 
> 时间：2012-11-02T04:50:03.607
> 
> 标签：drop-down-menu, kendo-ui

我正在使用 KendoUI，我使用以下代码创建了带有 Json 数据的下拉列表。

```
$("#locationdropdownList").kendoDropDownList({
        dataTextField: "LocationDescription",
        dataValueField: "LocationName",

            dataSource: new kendo.data.DataSource({
                transport: {
                    read: {
                        url: "******my url******",
                        dataType: "json"
                    },

                }
            })
    }); 
```

它工作正常..但是，我的要求是..我想将我的自定义值显示为下拉列表的默认值（即我的自定义值将出现在下拉列表视图的顶部，保留 json 数据将显示在定制一个之后）。

我该怎么做..请给我解决方案..在此先感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T14:40:51.030

Lokesh，您可以使用 kendo ddl 的 optionLabel 属性：

```
$("#locationdropdownList").kendoDropDownList({
        dataTextField: "LocationDescription",
        dataValueField: "LocationName",
        optionLabel: " my custom value ...." 
```

# cocos2d-iphone - box2d 销毁并重新创建形状

> ID：13189481
> 
> 赞同：0
> 
> 时间：2012-11-02T04:50:35.150
> 
> 标签：cocos2d-iphone, box2d

我在尝试调整 b2body 的固定装置的大小/缩放/重塑时遇到了重大问题……我已经阅读了很多教程，而且由于我是 box2d 的 n3wb，所以大部分都没有意义。

我正在尝试做的是使 b2body 的碰撞框缩放到 cocos2d 中的 CCSprite，因为精灵在应用程序中动态移动。

任何参考代码将不胜感激，我知道您必须销毁并重新创建夹具，但我不知道如何正确执行！我已经在这几个小时没有成功。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:31:20.947

我认为你需要用新的身体创造新的夹具。请查看教程，它解决了另一个问题，但你会学到很多有用的东西（例如如何用新的夹具重新创建身体）：

[http://www.raywenderlich.com/14302/how-to-make-a-game-like-fruit-ninja-with-box2d-and-cocos2d-part-1](http://www.raywenderlich.com/14302/how-to-make-a-game-like-fruit-ninja-with-box2d-and-cocos2d-part-1)

[http://www.raywenderlich.com/14393/how-to-make-a-game-like-fruit-ninja-with-box2d-and-cocos2d-part-2](http://www.raywenderlich.com/14393/how-to-make-a-game-like-fruit-ninja-with-box2d-and-cocos2d-part-2)

# text - 有没有办法访问 UIView 中的标签文本？

> ID：13189489
> 
> 赞同：2
> 
> 时间：2012-11-02T04:51:48.897
> 
> 标签：text, uiview, interface-builder, label

当我在 Interface Builder 中添加视图时，我经常进入 Identity Inspector，向下滚动到“文档”部分，然后编辑“标签”字段。这使得在“对象”浏览器中区分一个视图和另一个视图变得更容易。但我想知道：有没有办法从控制器访问该文本以获取我的视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T09:57:54.757

我想你不能。

但是如果你想在代码和 Interface Builder 中访问关于 UIView 的东西，你可以将 TAG 值设置为 UIView 的属性。

这对我在调试过程中很有用。

# sql - sql：如何对特定列使用计数，（或）按字段名称计算特定列

> ID：13189490
> 
> 赞同：0
> 
> 时间：2012-11-02T04:51:51.870
> 
> 标签：sql

在我的查询中，我需要按字段名称计算特定列，

```
SELECT 
  C.INC_COUNT, MIN_X, MIN_Y, MAX_X, MAX_Y, B.STATE_ABBR,
  B.STATE_NAME, B.LATITUDE, B.LONGITUDE, A.STATE, GEO_ID, 
  concat(A.LSAD_TRANS,' ' , A.NAME) DIST_NAME, 
  A.LSAD, GeometryType(SHAPE) GEO_TYPE, AsText(SHAPE) GEOM  
from SHAPE_LAYERS A 
join SHAPE_LAYER_STATE_DESC B 
  on ( A.state = B.state) 
left outer join INC_DIST_SUMMARY_ALL C 
  on (C.SHAPE_GEO_ID = A. GEO_ID) 
```

在这里我必须数

```
 B.STATE_NAME ,C.INC_COUNT 
```

如果例如字段名称`nevada`意味着我必须获取所有`neveda value count`和 C.INC_COUNT。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:56:31.553

尝试这个

```
 SELECT count(C.INC_COUNT), MIN_X, MIN_Y, MAX_X, MAX_Y,
  B.STATE_ABBR, count(B.STATE_NAME),B.LATITUDE,B.LONGITUDE,
  A.STATE, GEO_ID, concat(A.LSAD_TRANS,' ' , A.NAME) DIST_NAME,
  A.LSAD, GeometryType(SHAPE) GEO_TYPE, AsText(SHAPE) GEOM  
  from SHAPE_LAYERS A join SHAPE_LAYER_STATE_DESC B
  on ( A.state = B.state) 
  left outer join INC_DIST_SUMMARY_ALL C
  on (C.SHAPE_GEO_ID = A. GEO_ID) 
```

# php - 与网站访问者实时互动？

> ID：13189491
> 
> 赞同：0
> 
> 时间：2012-11-02T04:51:52.450
> 
> 标签：php, javascript, jquery, ajax

我正在尝试设置一个页面，用户可以在与我聊天时在网页上执行不同的操作。我需要能够在具有标签的用户页面上实时查看特定 DIV。当我点击一个标签时，它应该在他们的屏幕上更新，当他们点击一个标签时，它应该反映在我的屏幕上。

找到一个聊天脚本很容易，但我很难在 Google 和 Stack Overflow 上找到一个基本脚本或代码片段来实现这一点。也许我没有使用正确的术语。有人可以指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:03:45.607

有很多方法可以让它工作，但是，如果你想要一种标准化的方法，请使用 Bayeux 协议。gmail、facebook等通过**cometd**（[cometd.org](http://cometd.org/)）的实现来完成这种通信的方式。有很多参考资料可用于在网上实现此设置。

通过这条路线，这将是一个两部分的问题：（1）设置环境以允许彗星交互

这基本上可以是 0 工作，前提是您的远程主机使您能够运行守护程序脚本，例如：无限 PHP 脚本。

(2) 编写将客户端与服务器同步的代码。这将是您阅读 div 并与所有客户端进行广播级通信的低端部分。

一个很好的完全可操作的例子是这篇[如何用 PHP 实现 COMET 的](http://www.zeitoun.net/articles/comet_and_php/start)文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:01:19.990

我认为您需要的是socket.io。它真的很容易使用：[http ://socket.io/#how-to-use](http://socket.io/#how-to-use)

# c# - Windows 不透明 UserControl 不刷新对其所做的任何图形更改

> ID：13189492
> 
> 赞同：1
> 
> 时间：2012-11-02T04:51:59.240
> 
> 标签：c#, graphics, grid

我创建了一个 Windows `UserControl`. 它实际上`Grid`使用`Graphics`. 用户可以更改每个单元格的高度和宽度，并据此`Grid`刷新。覆盖`OnPaint`我创建网格的事件。我曾经 `SetStyle(ControlStyles.Opaque, true)`让它透明。我在一个表单上使用了这个控件，并从那里更改了单元格高度和宽度的值，但由于不透明，新网格与前一个网格重叠并使其笨拙。我该如何解决这个问题？

**用户控制代码：**

```
public partial class Grid : UserControl
{
    public Grid()
    {
        InitializeComponent();
        SetStyle(ControlStyles.Opaque, true);
    }
    private float _CellWidth = 10, _CellHeight = 10;
    private Color _GridColor = Color.Black;
    public float CellWidth
    {
        get
        {
            return this._CellWidth;
        }
        set
        {
            this._CellWidth = value;
        }
    }
    public float CellHeight
    {
        get
        {
            return this._CellHeight;
        }
        set
        {
            this._CellHeight = value;
        }
    }
    public Color GridColor
    {
        get
        {
            return this._GridColor;
        }
        set
        {
            this._GridColor = value;
        }
    }
    protected override void OnPaint(PaintEventArgs e)
    {
        base.OnPaint(e);
        Graphics g;
        float iHeight = this.Height;
        float iWidth = this.Width;
        g = e.Graphics;  
        Pen myPen = new Pen(GridColor);
        myPen.Width = 1;
        if (this.CellWidth > 0 && this.CellHeight > 0)
        {
            for (float X = 0; X <= iWidth; X += this.CellWidth)
            {
                g.DrawLine(myPen, X, 0, X, iHeight);
            }
            for (float Y = 0; Y <= iHeight; Y += this.CellHeight)
            {
                g.DrawLine(myPen, 0, Y, iWidth, Y);
            }
        }
    }
    public override void Refresh()
    {
        base.ResumeLayout(true);
        base.Refresh();
        ResumeLayout(true);            
    }
} 
```

**表格代码：**

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }        

    private void Form1_Load(object sender, EventArgs e)
    {   

    }

    private void btnBrowse_Click(object sender, EventArgs e)
    {
        try
        {
            if (ofdImage.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            {
                pbImage.Image = Image.FromFile(ofdImage.FileName);
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

    private void btnShowGrid_Click(object sender, EventArgs e)
    {
        if (grid1.Visible)
        {
            grid1.Visible = false;
            btnShowGrid.Text = "Show";
        }
        else
        {
            grid1.Visible = true;
            btnShowGrid.Text = "Hide";
        }
    }

    private void btnGridCellMaximize_Click(object sender, EventArgs e)
    {
        grid1.CellHeight += 1;
        grid1.CellWidth += 1;            
        grid1.Refresh();
    }

    private void btnGridCellMinimize_Click(object sender, EventArgs e)
    {
        grid1.CellHeight -= 1;
        grid1.CellWidth -= 1;            
        grid1.Refresh();
    }
} 
```

# dos - 连接字符串无法写入文本文件

> ID：13189493
> 
> 赞同：0
> 
> 时间：2012-11-02T04:52:01.763
> 
> 标签：dos, batch-file

我有一个批处理文件，其中我正在传递一个命令行参数并将这个参数与一些字符串连接起来，如下所示。假设如果我发送 1.0 作为命令行参数

```
echo ^<em:version^>%1^</em:version^> 
```

这打印`<em:version>1.0</em:version>`和工作正常。如果我尝试使用以下命令将此字符串重定向到某个文本文件：

```
echo ^<em:version^>%1^</em:version^> >> test.txt 
```

它只写入`<em:version></em:version>`文件，留下命令行参数。我想用命令行写整个字符串。会有什么问题？如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T08:34:52.050

这对我来说可以。我叫它`1.bat`。我在下面称之为：

```
d:\Uploads\fbi>1 1.0

d:\Uploads\fbi>echo <em:version>1.0</em:version>  1>>test.txt

d:\Uploads\fbi>type test.txt
<em:version>1.0</em:version> 
```

使用或不使用`@echo off`顶部。

它在什么代码里？向我们展示调用它的代码。你**确定**你正在传递一个值吗？

无论您传递什么变量，都回显该变量，然后在调用它之前暂停它，如下所示：

```
echo %var%
pause
call 1.bat %var% 
```

如果你得到的只是：

```
ECHO is off.
Press any key to continue . . . 
```

然后变量为空。

# javascript - 使用带有 JSON 的 Jq 图创建饼图

> ID：13189496
> 
> 赞同：2
> 
> 时间：2012-11-02T04:52:07.710
> 
> 标签：javascript, jquery, asp.net, charts, jqplot

我使用以下函数创建图表，它工作正常。

```
$(document).ready(function(){
  var data = [
    ['Heavy Industry', 12],['Retail', 9], ['Light Industry', 14], 
    ['Out of home', 16],['Commuting', 7], ['Orientation', 9]
  ];
  var plot1 = jQuery.jqplot ('chart1', [data], 
    { 
      seriesDefaults: {
        renderer: jQuery.jqplot.PieRenderer, 
        rendererOptions: {

          showDataLabels: true
        }
      }, 
      legend: { show:true, location: 'e' }
    }
  );
}); 
```

我的问题是，如果我在另一个数组中获取 JSON 并且我将该数组用于饼图它将不起作用。这意味着......

```
$(document).ready(function(){
 var data1= new Array();
  data1=[['Heavy Industry', 12],['Retail', 9], ['Light Industry', 14], 
    ['Out of home', 16],['Commuting', 7], ['Orientation', 9]];

  var plot1 = jQuery.jqplot ('chart1', [data1], 
    { 
      seriesDefaults: {
        renderer: jQuery.jqplot.PieRenderer, 
        rendererOptions: {

          showDataLabels: true
        }
      }, 
      legend: { show:true, location: 'e' }
    }
  );
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-04T11:46:50.257

试试这个，工作正常。

```
 $.getJSON('/mcontraller/getvalues', function(data) {
        var items1 = new Array();
        var j=0;
        for ( var i in data ) {
            var items = new Array();
            items.push(i,Number(data[i]));
            items1[j++] = items;
        }

        var plot1 = jQuery.jqplot('chart1', eval([items1]), {

                    seriesDefaults:{
                        // Make this a pie chart.
                        renderer:jQuery.jqplot.PieRenderer,
                        rendererOptions:{
                            // Put data labels on the pie slices.
                            // By default, labels show the percentage of the slice.
                            dataLabels:'value',
                            showDataLabels:true
                        }
                    },
                    legend:{ show:true, location:'e' }
                }
        );

    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T11:05:13.530

用于绘制图表的图表数据作为字符串传递，因此我使用 eval 将其解析为对象并且效果很好。 `eval(data1)`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T11:37:05.987

我只是自己尝试了您的代码。它工作得很好。我不认为有任何错误。可能你应该检查对[jqplot.pieRenderer.min.js的引用](http://www.jqplot.com/src/plugins/jqplot.pieRenderer.min.js)

# android - Android：在 android Places Api 中提供自动自动建议？

> ID：13189497
> 
> 赞同：8
> 
> 时间：2012-11-02T04:52:08.223
> 
> 标签：android, google-maps, search, autocomplete

我对 android Google 地图非常陌生.请看一次，让我知道我在哪里做错了。

```
 ExampleApp.java
package com.example.exampleapp;

import java.io.IOException;
import java.io.InputStreamReader;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.net.URLEncoder;
import java.util.ArrayList;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;

import android.app.Activity;
import android.content.Context;
import android.os.Bundle;
import android.view.LayoutInflater.Filter;
import android.view.View;
import android.widget.AdapterView;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.ArrayAdapter;
import android.widget.AutoCompleteTextView;

import android.widget.Filterable;
import android.widget.Toast;

public class ExampleApp extends Activity implements OnItemClickListener{

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        AutoCompleteTextView autoCompView = (AutoCompleteTextView) findViewById(R.id.autocomplete);
        autoCompView.setAdapter(new PlacesAutoCompleteAdapter(this, R.layout.list_item));
    }

    @Override
    public void onItemClick(AdapterView<?> arg0, View arg1, int arg2, long arg3) {
        // TODO Auto-generated method stub
        String str = (String) arg0.getItemAtPosition(arg2);
        Toast.makeText(this, str, Toast.LENGTH_SHORT).show();
    }

}
class PlacesAutoCompleteAdapter extends ArrayAdapter<String> implements Filterable {
    private ArrayList<String> resultList;

    public PlacesAutoCompleteAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }
    private static final String PLACES_API_BASE = "https://maps.googleapis.com/maps/api/place";
    private static final String TYPE_AUTOCOMPLETE = "/autocomplete";
    private static final String OUT_JSON = "/json";

    private static final String API_KEY = "";
    @Override
    public int getCount() {
        return resultList.size();
    }

    @Override
    public String getItem(int index) {
        return resultList.get(index);
    }

    @Override
    public android.widget.Filter getFilter() {
        Filter filter = new Filter() {
            protected FilterResults performFiltering(CharSequence constraint) {
                FilterResults filterResults = new FilterResults();
                if (constraint != null) {
                    // Retrieve the autocomplete results.
                    resultList = autocomplete(constraint.toString());

                    // Assign the data to the FilterResults
                 //   filterResults.values = resultList;
                  //  filterResults.count = resultList.size();
                }
                return filterResults;
            }

            private ArrayList<String> autocomplete(String input) {
                ArrayList<String> resultList = null;

                HttpURLConnection conn = null;
                StringBuilder jsonResults = new StringBuilder();
                try {
                    StringBuilder sb = new StringBuilder(PLACES_API_BASE + TYPE_AUTOCOMPLETE + OUT_JSON);
                    sb.append("?sensor=false&key=" + API_KEY);
                    sb.append("&components=country:uk");
                    sb.append("&input=" + URLEncoder.encode(input, "utf8"));

                    URL url = new URL(sb.toString());
                    conn = (HttpURLConnection) url.openConnection();
                    InputStreamReader in = new InputStreamReader(conn.getInputStream());

                    // Load the results into a StringBuilder
                    int read;
                    char[] buff = new char[1024];
                    while ((read = in.read(buff)) != -1) {
                        jsonResults.append(buff, 0, read);
                    }
                } catch (MalformedURLException e) {
                   // Log.e(LOG_TAG, "Error processing Places API URL", e);
                    return resultList;
                } catch (IOException e) {
                    //Log.e(LOG_TAG, "Error connecting to Places API", e);
                    return resultList;
                } finally {
                    if (conn != null) {
                        conn.disconnect();
                    }
                }

                try {
                    // Create a JSON object hierarchy from the results
                    JSONObject jsonObj = new JSONObject(jsonResults.toString());
                    JSONArray predsJsonArray = jsonObj.getJSONArray("predictions");

                    // Extract the Place descriptions from the results
                    resultList = new ArrayList<String>(predsJsonArray.length());
                    for (int i = 0; i < predsJsonArray.length(); i++) {
                        resultList.add(predsJsonArray.getJSONObject(i).getString("description"));
                    }
                } catch (JSONException e) {
                   // Log.e(LOG_TAG, "Cannot process JSON results", e);
                }

                return resultList;
            }
            protected void publishResults(CharSequence constraint, FilterResults results) {
                if (results != null) {
                    notifyDataSetChanged();
                }
                else {
                    notifyDataSetInvalidated();
                }
            }

            @Override
            public boolean onLoadClass(Class arg0) {
                // TODO Auto-generated method stub
                return false;
            }};
        return (android.widget.Filter) filter;
    }
}

FilterResults.java

package com.example.exampleapp;

import java.util.ArrayList;

public class FilterResults {

    protected ArrayList<String> values;
    protected int count;

}

i write the above code but the application closed .please see once and let me know where i am doing mistake in the above code ?
Thanks in Advance.......... 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T05:15:24.553

这是我遇到类似问题时使用的代码片段。我给你一个建议，不要把你的整个代码放在一个 java 文件中。为您在代码中使用的每个不同任务创建单独的方法/类。它将帮助您更轻松地跟踪它。

这是我的 PlacesAutoCompleteAdapter.java 文件。

```
package com.inukshk.adapter;

import java.util.ArrayList;

import android.content.Context;
import android.widget.ArrayAdapter;
import android.widget.Filter;
import android.widget.Filterable;

import com.inukshk.CreateInukshk.CreateInukshk;

public class PlacesAutoCompleteAdapter extends ArrayAdapter<String> implements
        Filterable {
    private ArrayList<String> resultList;

    public PlacesAutoCompleteAdapter(Context context, int textViewResourceId) {
        super(context, textViewResourceId);
    }

    @Override
    public int getCount() {
        return resultList.size();
    }

    @Override
    public String getItem(int index) {
        return resultList.get(index);
    }

    @Override
    public Filter getFilter() {
        Filter filter = new Filter() {
            @Override
            protected FilterResults performFiltering(CharSequence constraint) {
                FilterResults filterResults = new FilterResults();
                if (constraint != null) {
                    // Retrieve the autocomplete results.

                    resultList = CreateInukshk.autocomplete(constraint
                            .toString());

                    // Assign the data to the FilterResults
                    filterResults.values = resultList;
                    filterResults.count = resultList.size();
                }
                return filterResults;
            }

            @Override
            protected void publishResults(CharSequence constraint,
                    FilterResults results) {
                if (results != null && results.count > 0) {
                    notifyDataSetChanged();
                } else {
                    notifyDataSetInvalidated();
                }
            }
        };
        return filter;
    }
} 
```

这是您在活动的 OnCreate() 中必须执行的操作。

```
autoCompView = (AutoCompleteTextView) findViewById(R.id.editloc);
        autoCompView.setAdapter(new PlacesAutoCompleteAdapter(this,
                R.layout.list_item)); 
```

这是我在应用程序中使用的静态字符串。

```
private static final String PLACES_API_BASE = "https://maps.googleapis.com/maps/api/place";
    private static final String TYPE_AUTOCOMPLETE = "/autocomplete";
    private static final String OUT_JSON = "/json";
    private static final String API_KEY = "YOUR API KEY"; 
```

最后是您将在适配器中使用的方法。

```
public static ArrayList<String> autocomplete(String input) {

        ArrayList<String> resultList = null;

        HttpURLConnection conn = null;
        StringBuilder jsonResults = new StringBuilder();
        try {
            StringBuilder sb = new StringBuilder(PLACES_API_BASE
                    + TYPE_AUTOCOMPLETE + OUT_JSON);
            sb.append("?sensor=false&key=" + API_KEY);
            // sb.append("&components=country:uk");
            sb.append("&input=" + URLEncoder.encode(input, "utf8"));

            URL url = new URL(sb.toString());
            conn = (HttpURLConnection) url.openConnection();
            InputStreamReader in = new InputStreamReader(conn.getInputStream());

            // Load the results into a StringBuilder
            int read;
            char[] buff = new char[1024];
            while ((read = in.read(buff)) != -1) {
                jsonResults.append(buff, 0, read);
            }
        } catch (MalformedURLException e) {
            Log.e(TAG, "Error processing Places API URL", e);
            return resultList;
        } catch (IOException e) {
            Log.e(TAG, "Error connecting to Places API", e);
            return resultList;
        } finally {
            if (conn != null) {
                conn.disconnect();
            }
        }

        try {
            // Create a JSON object hierarchy from the results
            JSONObject jsonObj = new JSONObject(jsonResults.toString());
            JSONArray predsJsonArray = jsonObj.getJSONArray("predictions");

            // Extract the Place descriptions from the results
            resultList = new ArrayList<String>(predsJsonArray.length());
            for (int i = 0; i < predsJsonArray.length(); i++) {
                resultList.add(predsJsonArray.getJSONObject(i).getString(
                        "description"));
            }

        } catch (JSONException e) {
            Log.e(TAG, "Cannot process JSON results", e);
        }

        return resultList;
    } 
```

**编辑：**

我猜你已经指定了 list_item.xml 如下。

```
<?xml version="1.0" encoding="utf-8"?>
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content" android:layout_height="wrap_content" /> 
```

试试看。希望它会帮助你。

**更新 ：**

```
You have to manually attach the debugger while the emulator says "Waiting for debugger to attach". In Netbean's menu bar, click "Debug", then "Attach Debugger...". You have to select your package from the "Process" drop down list, and then click "Attach". That should do it.
This works in Netbeans 7 anyway. 
```

或者你也可以试试下面的东西。

```
You have two choices: connect a debugger, or kill the process.

Looking at your logcat, you have at least two different desktop applications that are trying to connect to each application process, which is where the "Ignoring second debugger" messages are coming from.

This would happen if you were, say, running Eclipse with the ADT plugin, and the stand-alone DDMS at the same time. I don't know what you're running or what the netbeans plugin does, but I would start by figuring out if you have two different things fighting for control. 
```

**编辑：** `HOW TO GET TEXT OF AutoCompleteTextView`

只需编写此代码段。

```
autoCompView.setOnItemClickListener(new OnItemClickListener() {

            @Override
            public void onItemClick(AdapterView<?> arg0, View arg1, int arg2,
                    long arg3) {
                // TODO Auto-generated method stub
                YOURTEXT = autoCompView.getText().toString();
                //new AsyncGetAutoPlace().execute(autoCompView.getText()
                //      .toString().trim());
            }
        }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-21T10:35:11.813

我们必须先添加计费凭据......所以，在谷歌开发者控制台上创建一个项目并完成计费部分。

添加变量

```
//Autocomplete for location ----------------------------------------------
ArrayList<String> names;
String browserKey = "AIzaSyA.....................";
String url;
private static final String TAG_RESULT = "predictions";
ArrayAdapter<String> adapter; 
```

在 oncreate 中添加此代码

```
 edtLocation = (AutoCompleteTextView) findViewById(R.id
            .edt_location);
    edtLocation.setThreshold(1);

    names = new ArrayList<String>();
    edtLocation.addTextChangedListener(new TextWatcher() {

        public void afterTextChanged(Editable s) {

        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                                      int after) {

        }

        public void onTextChanged(CharSequence s, int start, int before,
                                  int count) {

            if (s.toString().length() <= 6) {

                names = new ArrayList<String>();
                updateList(s.toString());

            }

        }
    }); 
```

在您的活动中添加此方法

```
 //Method to get location suggestion
public void updateList(String place) {
    String input = "";

    try {
        input = "input=" + URLEncoder.encode(place, "utf-8");
    } catch (UnsupportedEncodingException e1) {
        e1.printStackTrace();
    }

    String output = "json";
    String parameter = input + "&types=(regions)&sensor=true&key="
            + browserKey;

    url = "https://maps.googleapis.com/maps/api/place/autocomplete/"
            + output + "?" + parameter;

    Log.e("browsekey", browserKey);
    Log.e("URL-LOCation", url);

    JsonObjectRequest jsonObjReq = new JsonObjectRequest(Request.Method.GET, url,
            null, new Response.Listener<JSONObject>() {

        @Override
        public void onResponse(JSONObject response) {

            System.out.println("keyresponse==>>" + response.toString());

            try {

                JSONArray ja = response.getJSONArray(TAG_RESULT);

                for (int i = 0; i < ja.length(); i++) {
                    JSONObject c = ja.getJSONObject(i);
                    String description = c.getString("description");
                    Log.d("description", description);
                    names.add(description);
                }

                adapter = new ArrayAdapter<String>(
                        getApplicationContext(),
                        android.R.layout.simple_list_item_1, names) {
                    @Override
                    public View getView(int position,
                                        View convertView, ViewGroup parent) {
                        View view = super.getView(position, convertView, parent);
                        TextView text = (TextView) view.findViewById(android.R.id.text1);
                        text.setTextColor(Color.BLACK);
                        return view;
                    }
                };
                edtLocation.setAdapter(adapter);
                adapter.notifyDataSetChanged();
            } catch (Exception e) {
            }
        }
    }, new Response.ErrorListener() {
        @Override
        public void onErrorResponse(VolleyError error) {
        }
    });
    MyApplication.getInstance().addToReqQueue(jsonObjReq, "jreq");
} 
```

添加 MyApplication 类以调用 webservice

```
public class MyApplication extends Application {

private RequestQueue mRequestQueue;
private static MyApplication mInstance;

@Override
public void onCreate() {
    super.onCreate();
    mInstance = this;
}

public static synchronized MyApplication getInstance() {
    return mInstance;
}

public RequestQueue getReqQueue() {
    if (mRequestQueue == null) {
        mRequestQueue = Volley.newRequestQueue(getApplicationContext());
    }

    return mRequestQueue;
}

public <T> void addToReqQueue(Request<T> req, String tag) {

    getReqQueue().add(req);
}

public <T> void addToReqQueue(Request<T> req) {

    getReqQueue().add(req);
}

public void cancelPendingReq(Object tag) {
    if (mRequestQueue != null) {
        mRequestQueue.cancelAll(tag);
    }
} 
```

}

# python - 不断收到语法错误。我需要做什么？

> ID：13189498
> 
> 赞同：0
> 
> 时间：2012-11-02T04:52:16.807
> 
> 标签：python, function, python-3.x, arguments, sum

我试图让我的函数接受两个参数，并返回它们的总和。我会以正确的方式解决这个问题吗？这是我到目前为止所拥有的：

```
def my_sum(a, b):
    sum = a + b

def main():
    a = input(int("enter a number: ", a)
    b = input(int("enter a number: ", b)

    sum = a + b

    return sum
    print(" result: ", sum)

main() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T05:08:07.150

所以它看起来不错，但主要问题是你实际上并没有调用你的函数:) 一旦你得到你的两个数字，你就可以调用你的函数（你已经正确设置了）：

```
def main():
    # When you assign variables here, make sure you are putting the int outside
    # You also don't need to reference the variable twice
    a = int(input("enter a number: "))
    b = int(input("enter a number: "))

    # Here is where your call goes (try to avoid using variable names that
    # are the same as Python keywords, such as sum)
    s = my_sum(a, b)

    print(" result: ", s) 
```

现在，您必须做的另一件事是修改您的函数以返回一个值。您已经快到了 - 只需添加一个 return（请注意，由于您只是返回两个数字的总和，因此您不必将其分配给变量）：

```
def my_sum(a, b):
    return a + b 
```

现在这意味着当您运行时`s = my_sum(a, b)`，您的函数将返回这两个数字的总和并将它们放入`s`中，然后您可以按照您的操作进行打印。

另一件小事 - 当您使用您的设置时（使用`def main()`等），您通常希望这样称呼它：

```
if __name__ == '__main__':
    main() 
```

在这个阶段，不要太在意这意味着什么，但是一旦你开始接触模块等有趣的东西，这是一个好习惯。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:01:06.350

1.  执行一个`print`函数之后`return sum`将不起作用，因为当返回一个返回值时，执行将退出范围，顺序应该颠倒。

2.  您的输入功能未正确实现。

正确的代码应该是：

```
def main():

    a = input("enter a number: ")
    b = input("enter a number: ")
    sum = a + b    
    print(" result: ", sum)    
    return sum 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T05:15:16.823

你写了错误的编码风格如果你想用 sum 方法做一些比这样做

```
def my_sum(a, b):
    sum = a + b
    return sum

def main():
    a = int(raw_input("enter a number: "))
    b = int(raw_input("enter a number: ")) 

    sum = my_sum(a,b) 
    print" result: ", sum

main() 
```

我希望这将按照您的要求工作。问候， 阿尼尔

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T05:21:04.807

我不确定您在那里定义的第一个函数的用途（`my_sum`）。但是，其中也有一些问题`main`。该`return`函数总是退出它所在的函数，并缩小到更高级别的范围。这与 非常相似`break`，只是它也返回一个值。此外，当您要求用户输入时，您的语法不正确。它应该是：

```
def main():
    a = int(raw_input("Enter a number: "))
    b = int(raw_input("Enter a number: "))

    return "Result" + (a+b)

main() 
```

此外，如果您想`my_sum`自动返回总和，您应该使用`return`or `print`：

```
def my_sum(a, b):
    return a + b 
```

# javascript - 将背景纹理与居中的 div 匹配

> ID：13189499
> 
> 赞同：0
> 
> 时间：2012-11-02T04:52:24.497
> 
> 标签：javascript, css, background

我有一个文档，我在`body`.

然后我有`div`一个设置宽度和高度并以`margin: 40px auto 0 auto;`

现在，它的背景图像`div`（假设它是 960×500，与元素本身相同）与`body`. 我不能使用透明的 png，因为我试图用这个图像实现图形效果。

但是，要使效果发挥作用，背景的背景`div`需要与`body`. 用户甚至不应该知道那里有一个单独的块元素；只是无尽的纹理海洋，中间有一个细节。

这变得困难，因为它`div`是居中的，因此，它与左侧的水平距离会发生变化。

无论页面宽度如何，如何确保背景纹理始终与**像素**`body`中的模拟纹理匹配？`div`

 **如有必要，我并不害怕使用 JS 解决方案，但显然更喜欢纯 CSS 解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:04:04.183

如果您尝试使用 40x40 平铺图像作为身体背景，并在其上使用具有相同背景的 960x500 图像，请使用以下代码：

```
body {
    background: url(repeat.png) top center repeat; /* 40x40 image goes here */
}

div {
    background: url(overlay.png); /* overlay image goes here, must be multiple of 40px wide, example is 960px wide x 500px tall */
    width: 960px; /* must be multiple of 40px wide */
} 
```

您可能需要编辑此 CSS 片段，并且您可能需要对叠加的图像进行一些调整以使接缝对齐，但这应该使它们彼此对齐。我之前在一些网站上使用过它，并且效果很好。

如果您有任何问题或者我忽略了某个场景，请告诉我，我可以再看一遍。您的代码示例将很有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:12:29.523

您要做的是将 body 元素上的背景图像设置为从中间开始。所以：

```
body {
    background: url(to/your/tile.png) 50% 0;
} 
```

这意味着无论窗口大小如何调整，您都将在重复模式中拥有一个可预测的区域。

然后，您必须定制包含 div 的背景以在主体中进行平铺。

这里有一些代码展示了这个方法是如何工作的：http: [//jsbin.com/olabos/2/edit](http://jsbin.com/olabos/2/edit)。请注意调整窗口大小不会使模式不同步。将鼠标悬停在预览的中间以查看包装 div 的位置。

注意：此技术的一些注意事项，取决于浏览器如何处理半像素，您将在背景中获得 1 像素的差异。我不知道另一种技术可以解决你的问题，所以希望你能忍受 1px 的关闭。**

# javascript - 如何将 html 表格保存为图像以供客户保存在他们的计算机上

> ID：13189500
> 
> 赞同：5
> 
> 时间：2012-11-02T04:52:29.173
> 
> 标签：javascript, php, save, screenshot

我有一个网站，它从用户粘贴到文本区域的某些行生成一个表格（使用 php 回显一个表格）。我希望我的客户能够将这张表保存在他们的机器上。这是我到目前为止发现的[http://html2canvas.hertzen.com/](http://html2canvas.hertzen.com/)但不知道如何使用它。同样在未来的某个时候，我希望它有一个“在 facebook 上分享”按钮，以便将图像上传到他们的 facebook 帐户。

我已经在 Google 上搜索了 2 天，但没有任何结果，我能找到的所有结果都像 php 函数一样将图像保存到服务器而不是客户端计算机。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:39:39.123

您可以为此使用画布。只需将所有数据放在画布中，您将获得图像输出。一个更好的例子可以在[这里找到](http://www.botskool.com/geeks/how-convert-canvas-data-image)

```
<html>
<body>
<style type="text/css">
table
{
border=5;
}
</style>
<p><canvas id="canvas" style="border:2px solid black;" width="500" height="500"></canvas>
<script>
var canvas = document.getElementById("canvas");
var ctx = canvas.getContext("2d");
var data = "<svg xmlns='http://www.w3.org/2000/svg' width='200' height='200'>" +
             "<foreignObject width='100%' height='100%'>" +
               "<div xmlns='http://www.w3.org/1999/xhtml' style='font-size:40px'>" +
                 "<table><tr><td>HI</td><td>Welcome</td></tr><tr><td>Hello</td><td>World</td></tr> </table>" +
               "</div>" +
             "</foreignObject>" +
           "</svg>";
var DOMURL = self.URL || self.webkitURL || self;
var img = new Image();
var svg = new Blob([data], {type: "image/svg+xml;charset=utf-8"});
var url = DOMURL.createObjectURL(svg);
img.onload = function() {
    ctx.drawImage(img, 0, 0);
    DOMURL.revokeObjectURL(url);
};
img.src = url;
</script>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:13:58.653

用于`PHP GD`在旅途中创建图像。

`Content-type: image/png`当调用 php 文件时，使用它会返回一个标头类型。（注意：您不能将 html 与此 php 中的图像一起返回，因为我们将标头类型定义为 image/png）

或者，您可以生成支持表格的 pdf 文件。生成 pdf 的最佳库是`FPDF` See the table generation example in fpdf [**here**](http://www.fpdf.org/en/tutorial/tuto5.htm)

链接：

[PHP GD](http://www.php.net/manual/en/book.image.php)

[FPDF](http://fpdf.org)

# url-rewriting - URL 重写 - 重定向到不同的端口并使用映射更改 URL

> ID：13189505
> 
> 赞同：2
> 
> 时间：2012-11-02T04:53:25.930
> 
> 标签：url-rewriting, iis-7.5

我想根据 HTTP_URL 重写 URL 以重定向到不同的端口，同时保留 URL 的其余部分和查询字符串（如果指定）。例如，
`http://host/john/page.aspx`应该重定向到`http://host:1900/page.aspx,`
`http://host/paul/anotherpage.aspx?query`和`http://host:1901/anotherpage.aspx?query`
到`http://host/ringo`我`http://host:1902/`
已经为每个允许的端口添加了一堆规则，但它看起来并不高效或易于管理。
我正在尝试使用地图（即 john->1900，paul->1901），但无法弄清楚如何组装所需的 URL。
有什么建议么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-09T12:21:39.477

它需要一些摆弄才能让它工作，但回顾它，解决方案非常简单和优雅。

```
<rewrite>
    <rules>
        <clear />
        <rule name="Redirect known names to ports" stopProcessing="true">
            <match url=".*" />
            <conditions trackAllCaptures="true">
                <add input="{REQUEST_URI}" pattern="/(.*?)/(.*)" />
                <add input="{NameToPort:{C:1}}" pattern="(.+)" />
            </conditions>
            <action type="Redirect" url="http://{HTTP_HOST}:{C:3}/{C:2}" appendQueryString="false" redirectType="Permanent" />
        </rule>
    </rules>
    <rewriteMaps>
        <rewriteMap name="NameToPort">
            <add key="john" value="1900" />
            <add key="paul" value="1901" />
            <add key="ringo" value="1902" />
        </rewriteMap>
    </rewriteMaps>
</rewrite> 
```

让我知道这是否是您想要的。

# jquery - 如何检查下拉菜单中的选项值与以前的值？

> ID：13189506
> 
> 赞同：-6
> 
> 时间：2012-11-02T04:53:26.507
> 
> 标签：jquery

如果选项值和以前的匹配，它不会显示在使用 jquery 的下拉列表中

编辑

根据用户的评论填充选择框

```
$.each(g_Vehicle, function (index) { 
     var iYear = g_Vehicle[index].Year;
     sMake = g_Vehicle[index].Make;
            selectYear = '<option value="' + iYear + '">' + iYear + '</option>'; selectMake =   '<option value="' + sMake + '">' + sMake + '</option>'; 
     $("#DropDown_Year").append(selectYear);    
     $("#DropDown_Make").append(selectMake); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:01:35.817

您可以存储以前的全局变量并在更改时访问它。假设选择了零索引处的起始元素。

**[现场演示](http://jsfiddle.net/J9Tj4/)**

```
previousVal = $('#selectId option').eq(0).val();    

$('#selectId').change(function(){
    alert(previousVal);
    previous = $('#selectId').val();
});​ 
```

*要存储以前的项目文本，您可以使用 text() 方法而不是 val()*

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-02T05:07:58.213

```
 $(document).ready(function(){ 
$('body').delegate('#DropDown_Year','change',function(){
var prev = $(this).find('option:selected').prev().val();

  if($(this).val() ==  prev ){ 
    alert('Matched');
     //your curent value and previous value are the same
  }else{
    //not same
  }

 });
}); 
```

# grails - 如何使用 Spring 安全管理控制台为 Grails 应用程序提供细粒度的安全性？

> ID：13189507
> 
> 赞同：1
> 
> 时间：2012-11-02T04:53:35.493
> 
> 标签：grails

如何使用 Spring 安全管理控制台为 Grails 应用程序提供细粒度的安全性？示例将不胜感激。

# security - 如何在服务器端保存机密数据

> ID：13189508
> 
> 赞同：0
> 
> 时间：2012-11-02T04:53:37.687
> 
> 标签：security, node.js, webserver

我用 Node.js 创建了一个 Web 服务器。数据库是 MongoDB。我正在使用 json 文件来保存服务器配置。节点模块“nconf”用于读取 json 文件。

目前，json文件中保存的所有数据，包括一些机密数据，都是纯文本。我认为它不够安全。我应该怎么做才能确保机密数据是安全的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:09:10.967

您可以查看`crypto`节点库。

这是文档的链接：[Crypto Node.js](http://nodejs.org/api/crypto.html)

您可以使用它来加密文件中包含的一些数据。但是您可能还应该考虑删除敏感信息并找到另一种方法将其存储在其他位置，可能在数据库中，例如您的 MongoDB。

# php - 我无法破译的 3 个 PHP 小错误

> ID：13189509
> 
> 赞同：0
> 
> 时间：2012-11-02T04:53:44.853
> 
> 标签：php, mysql

***注意：使用未定义的常量 _ - 在 /.../uploader.php 第 45 行假设为“_”***

**45号线**

```
$newname = str_replace(array(' ', '&'), array('_', 'and'), trim( strip_tags( $_POST['name'] ) ) ) . _ . $formKey->generateKey() . '_' . time() . '.jpg'; 
```

* * *

***注意：未定义的索引：在第 81 行的 /.../uploader.php 中批准***

**第 81 行 - 这里的倒数第二行**

```
 $query = sprintf("INSERT INTO `$db_name`.`the_table` (`id` , `name` , `photo` , `email` , `date` , `code` , `subscribe` , `approve` , `created` )
        VALUES ( NULL , '%s', '%s', '%s', '%s', '%s', '%s', '1', CURRENT_TIMESTAMP );",
        mysql_real_escape_string($_POST['name']),
        mysql_real_escape_string($newname),
        mysql_real_escape_string($_POST['email']),
        mysql_real_escape_string($date),
        mysql_real_escape_string($_POST['code']),
        mysql_real_escape_string($subscribe),
        mysql_real_escape_string($_POST['approve'])
        ); 
```

* * *

***警告：无法修改标头信息 - 标头已由（输出开始于 /.../uploader.php:45）在 /.../uploader.php 第 102 行发送***

**45号线**

```
$newname = str_replace(array(' ', '&'), array('_', 'and'), trim( strip_tags( $_POST['name'] ) ) ) . _ . $formKey->generateKey() . '_' . time() . '.jpg'; 
```

**第 102 行 - 这里的第三行**

```
if ($success == 'Done') {
    $page = 'uploader';
    header('Location: ./thanks.php');
} else {
echo "error";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T04:57:13.183

第 45 行：`. _ .`应该是`. '_' .`

第 81 行：您的帖子数据没有“批准”检查提交帖子的表单。

第 102 行：在调用`header()`. 我相信之前生成的警告会导致同样的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:30:11.320

**第一的 ：**

`$newname = str_replace(array(' ', '&'), array('_', 'and'), trim( strip_tags( $_POST['name'] ) ) ) . _ . $formKey->generateKey() . '_' . time() . '.jpg';`

在这你错过了_beatween的报价`trim( strip_tags( $_POST['name'] ) ) ) . _ . $formKey->generateKey()`

将此行替换为

`$newname = str_replace(array(' ', '&'), array('_', 'and'), trim( strip_tags( $_POST['name'] ) ) ) . '_' . $formKey->generateKey() . '_' . time() . '.jpg';`

**第二：**

你应该更换你所有的

```
mysql_real_escape_string($_POST['name']),
mysql_real_escape_string($_POST['email']),
mysql_real_escape_string($_POST['code']),
mysql_real_escape_string($_POST['approve']) 
```

经过

```
 $name = (isset($_POST['name'])) ? mysql_real_escape_string($_POST['name']) : "";
    $email = (isset($_POST['email'])) ? mysql_real_escape_string($_POST['email']) : "";
    $code = (isset($_POST['code'])) ? mysql_real_escape_string($_POST['code']) : "";
    $approve = (isset($_POST['approve'])) ? mysql_real_escape_string($_POST['approve']) : "";
    $query = sprintf("INSERT INTO `$db_name`.`the_table` (`id` , `name` , `photo` , `email` , `date` , `code` , `subscribe` , `approve` , `created` )
    VALUES ( NULL , '%s', '%s', '%s', '%s', '%s', '%s', '1', CURRENT_TIMESTAMP );",
    $name,
    mysql_real_escape_string($newname),
    $email,
    mysql_real_escape_string($date),
    $code,
    mysql_real_escape_string($subscribe),
    $approve
    ); 
```

**第三**

您可以`<?php ob_start(); ?>`在页面顶部和页面`<?php ob_flush(); ?>`底部添加，也可以替换`header('Location: ./thanks.php');`为

`echo '<script>document.location.href="thanks.php";</script>';`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T05:06:46.453

正如 Istiaque Ahmed 所提到的，标头错误是因为在收到标头命令之前已经将错误输出到浏览器。一旦你处理了其他错误，标题错误就会消失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T05:02:10.763

就像你写字符串一样`"%s"`，`. $_POST['name'] .`例如：

```
 $query = sprintf("INSERT INTO `" . $db_name . "`.`the_table` (`id` , `name` , `photo` , `email` , `date` , `code` , `subscribe` , `approve` , `created` )
                   VALUES ( NULL , '" . $_POST['name'] . "', ...
                 ); 
```

# r - 如何构建包含一些软件包的独立 R 引擎？

> ID：13189514
> 
> 赞同：1
> 
> 时间：2012-11-02T04:54:59.190
> 
> 标签：r

我有一个 Windows 服务器，它不允许我安装任何东西，但它允许我运行 exe 文件（这意味着我不能简单地下载 R 安装包并以这种方式安装 R）。我想在它上面运行 R，我想知道我是否可以制作一个包含 ggplot 和 lattice 等包的 R.exe？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T08:03:57.030

您在服务器上有任何文件存储吗？我无法想象你不会有。您可以将软件包安装到任何目录，然后该目录可以成为您自己的个人库。看看`help(install.packages)`and `help(library)`，有一个`lib`or`lib.loc`参数告诉它把它放在哪里。

如果您无法安装的原因是因为`install.packages`无法通过网络到达 CRAN，则从 CRAN 下载二进制文件，将其传输到服务器，然后以这种方式安装。

请注意，我没有回答您关于使用捆绑包构建 R exe 的问题（这是答案：“否”），因为您认为该问题的答案是您真正问题的解决方案（“我无法安装包” ）。总是问你原来的问题......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T01:10:51.983

我遇到了可以为我做的 R 的便携式版本。它会生成一个可以移动到新服务器的文件夹。

[http://sourceforge.net/projects/rportable/](http://sourceforge.net/projects/rportable/)

# android - 如何正确使用Activity的服务和方法？

> ID：13189518
> 
> 赞同：0
> 
> 时间：2012-11-02T04:55:34.010
> 
> 标签：android, service, android-intent, android-activity

我想通过服务器或活动方法将子视图中的操作发布到当前的活动，如何使用这些方法？请帮我！感谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:19:58.123

这会对您有所帮助：- 查看链接并阅读所有三个活动代码：-[我想让用户按操作顺序添加多个项目](https://stackoverflow.com/questions/13189354/i-want-to-let-user-add-multiple-items-by-action-sequence)

# python - 我的 python 代码有什么问题？

> ID：13189527
> 
> 赞同：0
> 
> 时间：2012-11-02T04:56:09.450
> 
> 标签：python, string, python-3.x, string-formatting

我是一名初级程序员，我一直在完成 zedshaw 的`Learn Python The Hard Way`课程，但是在练习 26 中，我们得到了一个有缺陷的代码，因此我们可以对其进行调试。虽然代码是使用 Python 2.x 编写的，但我一直在用 Python 3 重新编写它们，以便我可以学习它。

它引发以下错误：

```
Traceback (most recent call last):
  File "/home/omar/PycharmProjects/Python_The_Hardway/ex26_Quiz.py", line 76, in <module>
    print("We'd have {} beans, {} jars, and {} crates".format(secret_formula(start_point)))
IndexError: tuple index out of range 
```

这是我的代码：[链接](http://pastebin.com/bK9Ng6Vm)

原始代码：[链接](http://learnpythonthehardway.org/exercise26.txt)（这是练习文件）

所以我的问题是：

*   为什么它以退出代码 1 结束？
*   为什么它不继续执行代码？
*   如何使用 Python 3 重写它？

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T05:01:16.033

该`secret_formula`方法返回一个元组，因此您实际上是`.format()`使用单个参数调用 - 元组。尝试将 a`*`放在前面`secret_formula()`：

```
print("We'd have {} beans, {} jars, and {} crates".format(*secret_formula(start_point))) 
```

这会将元组视为单独的参数，并且*应该*修复它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T09:20:07.417

> 为什么它以退出代码 1 结束？

因为你得到一个错误。

> 为什么它不继续执行代码？

因为你得到一个错误。

> 如何使用 Python 3 重写它？

原始的 Python 2 代码如下所示：

```
print "We'd have %d beans, %d jars, and %d crabapples." % secret_formula(start_pont 
```

Python 3 版本是：

```
print("We'd have %d beans, %d jars, and %d crabapples." % secret_formula(start_pont) 
```

我在要打印的内容周围添加了括号，因为`print`- 语句现在是一个`print()`函数。

现在，这段代码当然是有问题的，因为它没有右括号，而且`start_point`拼写错误。所以它真的应该是：

```
print("We'd have %d beans, %d jars, and %d crabapples." % secret_formula(start_point)) 
```

如果您想切换到新`.format()`格式而不是旧`%`格式，那么它看起来像这样：

```
print("We'd have {:d} beans, {:d} jars, and {:d} crabapples.".format(*secret_formula(start_point)) 
```

但这不是必需的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-19T16:57:13.240

正确答案如下

```
def break_words(stuff):
        """This function will break up words for us."""
        words = stuff.split(' ')
        return words

    def sort_words(words):
        """Sorts the words."""
        return sorted(words)

    def print_first_word(words):
        """Prints the first word after popping it off."""
        word = words.pop(0)
        print word

    def print_last_word(words):
        """Prints the last word after popping it off."""
        word = words.pop(-1)
        print word

    def sort_sentence(sentence):
        """Takes in a full sentence and returns the sorted words."""
        words = break_words(sentence)
        return sort_words(words)

    def print_first_and_last(sentence):
        """Prints the first and last words of the sentence."""
        words = break_words(sentence)
        print_first_word(words)
        print_last_word(words)

    def print_first_and_last_sorted(sentence):
        """Sorts the words then prints the first and last one."""
        words = sort_sentence(sentence)
        print_first_word(words)
        print_last_word(words)

    print "Let's practice everything."
    print 'You\'d need to know \'bout escapes with \\ that do \n newlines and \t tabs.'

    poem = """
    \tThe lovely world
    with logic so firmly planted
    cannot discern \n the needs of love
    nor comprehend passion from intuition
    and requires an explantion
    \n\t\twhere there is none.
    """

    print "--------------"
    print poem
    print "--------------"

    five = 10 - 2 + 3 - 5
    print "This should be five: %s" % five

    def secret_formula(started):
        jelly_beans = started * 500
        jars = jelly_beans / 1000
        crates = jars / 100
        return jelly_beans, jars, crates

    start_point = 10000
    beans, jars, crates = secret_formula(start_point)

    print "With a starting point of: %d" % start_point
    print "We'd have %d jeans, %d jars, and %d crates." % (beans, jars, crates)

    start_point = start_point / 10

    print "We can also do that this way:"
    print "We'd have %d beans, %d jars, and %d crabapples." % secret_formula(start_point)

    sentence = "All god\tthings come to those who weight."

    #python_exercise.break_words(sentence)
    #words = python_exercise.break_words(sentence)
    #python_exercise.sort_words(words)
    #sorted_words = python_exercise.sort_words(words)

    #print_first_word(words)
    #print_last_word(words)
    #print_first_word(sorted_words)
    #print_last_word(sorted_words)
    #sorted_words = python_exercise.sort_sentence(sentence)
    #print sorted_words

    #print_first_and_last(sentence)

    #print_first_a_last_sorted(sentence) 
```

# javascript - Oracle 11g 表单 Javascript 事件调用 - 如何设置配置 ID 变量

> ID：13189528
> 
> 赞同：0
> 
> 时间：2012-11-02T04:56:13.817
> 
> 标签：javascript, forms, oracle11g

我正在尝试将 Oracle Forms 与 Javascript 集成，并使用 Oracle 的此文档作为指南：

[http://docs.oracle.com/cd/E23943_01/web.1111/e10240/javascript.htm](http://docs.oracle.com/cd/E23943_01/web.1111/e10240/javascript.htm)

我在第 6.2 节遇到问题，它说：

“document.forms_applet.raiseEvent（事件名称，有效载荷）；

这里的假设是您已将 ID 配置变量设置为 forms_applet。”

我不知道如何设置 ID 配置变量。有谁知道如何做到这一点？谷歌似乎没有太多帮助，Oracle doco 对我来说太模糊了。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T05:51:38.593

我找到了在哪里设置表单的 ID。它在标签内的小程序定义中。

```
<OBJECT classid="cldis:DAEID"
        codebase="http://java.sun.com/update/1.6.0/jinstall-6-windows-i586.cab#version=1,6,0,12"
        WIDTH="1000"
        HEIGHT="800"
        HSPACE="0"
        VSPACE="0"
        ID="forms_applet"> 
```

然后在更改 ID 后，我可以在我的 javascript 中执行以下操作：

```
document.forms_applet.raiseEvent("myEvent", "My string for the event"); 
```

# objective-c - 在沙盒应用程序中获取用户在 Mac 上的下载文件夹的 API

> ID：13189531
> 
> 赞同：4
> 
> 时间：2012-11-02T04:57:29.620
> 
> 标签：objective-c, macos

如何在沙盒 Mac 应用程序中获取用户的下载文件夹，即 (~/Downloads)？

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:01:40.900

您可以为“下载”文件夹添加一项权利。

[根据此 Apple 文档](http://developer.apple.com/library/ios/#documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/EnablingAppSandbox.html)，您可以将“ `com.apple.security.files.downloads.read-write`”添加到您的应用程序的权利文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-02T15:58:09.880

```
// App Sandbox:
// Project / Target / Signing & Capabilities / App Sandbox / File Access / Downloads Folder:
// "com.apple.security.files.downloads.read-write" OR "*.read-only"
- (NSURL*)downloadsURL:(NSError**)error{
    NSFileManager *fm = [NSFileManager defaultManager];
    NSURL *sandboxDownloadsURL = [fm URLForDirectory:NSDownloadsDirectory
                                            inDomain:NSUserDomainMask
                                   appropriateForURL:nil
                                              create:YES
                                               error:error];
    NSURL *resolvedURL = sandboxDownloadsURL.URLByResolvingSymlinksInPath;
    return resolvedURL;
} 
```

# linux - 如何在 Linux 上取消修补目录/文件？

> ID：13189534
> 
> 赞同：6
> 
> 时间：2012-11-02T04:58:06.250
> 
> 标签：linux, patch

如何从已修补的文件和目录中取消修补文件和目录。

我已经使用这两个命令`pd.patch`在目录和`pf.patch`文件上应用了补丁：

```
patch -p1 < pd (in the directory) 

patch -p1 file_unpatch < pf.patch . ( will give me file_patch(patched file_unpatch)) 
```

我怎样才能检索原始`file_unpatch`和`unpatched`目录？

**编辑** 我发现我们可以使用以下`-R`选项取消修补目录：

```
patch -p1 -R < pd (in the directory) --> will give me unpatched directory. 
```

现在，如何取消修补文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-29T06:19:22.410

正如你所发现的，你只需要使用`patch -R`来恢复补丁。

显然，您必须按还原顺序取消补丁，因此在您的情况下：

```
patch -R -p1 file_unpatch < pf.patch

patch -R -p1 < pd.patch 
```

# ssis - 使用 SSIS 脚本任务枚举文件夹中的文件

> ID：13189535
> 
> 赞同：-4
> 
> 时间：2012-11-02T04:58:42.587
> 
> 标签：ssis

有人可以展示如何使用 SSIS 中的脚本任务枚举给定文件夹中的文件吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:06:36.133

配置两个变量：只读字符串`User::download_path`和读写对象`User::files_to_process`来接收文件列表。

```
public void Main()
{
    bool fireAgain = true;

    var filesToProcess = new System.Collections.ArrayList();
    var filesInDirectory = new System.Collections.ArrayList();

    var download_path = (String)Dts.Variables["User::download_path"].Value;

    // Find for example all csv files in the directory which are having size > 0 
    var downloadedFiles = new DirectoryInfo(download_path).EnumerateFiles("*.csv",SearchOption.TopDirectoryOnly);
    foreach (var f in downloadedFiles)
    {
        if (f.Length > 0)
            filesInDirectory.Add(f.FullName);
    }

    Dts.Events.FireInformation(3, "Getting files in directory", downloadedFiles.Count().ToString() + " found.", "", 0, ref fireAgain);

    // Report the file names into the SSIS Log:
    foreach (var f in filesToProcess)
    {
        Dts.Events.FireInformation(3, f.ToString(), "Ready for processing", "", 0, ref fireAgain);
    }

    // Return them into the READWRITE object variable
    Dts.Variables["User::files_to_process"].Value = filesInDirectory;

    Dts.TaskResult = (int)ScriptResults.Success;
} 
```

# matlab - matlab：图形大小，相同的轴大小

> ID：13189537
> 
> 赞同：4
> 
> 时间：2012-11-02T04:59:05.657
> 
> 标签：matlab, resize, scaling, figure

我有一个固定大小的图形，如下所示：

```
hFig = figure(1);
set(hFig, 'Position', [200 200 500 500]) 
```

但问题是，我想让我的 AXIS 具有固定大小（我希望它们是正方形），而不是（必要的）整个图形...... - 见附图，Y 轴比 X 轴长一点（当然更长的意思是显示... X和Y轴范围设置为相同的值）。如何调整它？

谢谢！

![粒子轨迹](../Images/30feb362e9a5a40ed1218aac0deb6177.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T05:08:13.537

用于`axis equal`将轴的间距设置为相同。

# objective-c - 一个对象是否有指向它的指针的指针？

> ID：13189541
> 
> 赞同：0
> 
> 时间：2012-11-02T04:59:35.103
> 
> 标签：objective-c, xcode4.5

在 ARC 中，当一个对象被释放时，指针被设置为 nil。

该对象如何告诉所有这些点它即将被释放？

这适用于强指针还是所有类型的指针？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:06:02.490

在 ARC（或 MRC）中，释放对象时指针不会设置为 nil。在 ARC 中，`weak`对象引用被设置为`nil`对象被释放时，而不是被释放时。这里有很大的不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:23:40.510

基于对[需要添加到 Objective-C 运行时的 ARC](http://clang.llvm.org/docs/AutomaticReferenceCounting.html)的一些快速阅读，弱引用本身已向运行时注册。有很多电话要求建立弱连接，将其拆除并重新分配。编译器决定执行哪种类型的赋值，就像它在自动保留和释放方面也有作用。根据链接的文档：

> 运行时跟踪包含非空值的 __weak 对象。直接修改运行时正在跟踪的 __weak 对象是未定义的行为，除非通过 objc_storeWeak、objc_destroyWeak 或 objc_moveWeak 调用。

由此我得出结论，运行时维护当前指向给定对象的每个弱指针的集合。当该对象被释放时，它会将指针清零。

因此，每个对象都有一个指向相关指针的列表，以创建双向连接。存储的方式和位置并不明确——它可以通过现有的对象关联机制，它可以是一个全局字典，它几乎可以是任何东西。

# objective-c - 为大文件和小文件创建 NSFileHandle 之间是否存在性能差异？

> ID：13189542
> 
> 赞同：0
> 
> 时间：2012-11-02T04:59:36.547
> 
> 标签：objective-c, ios, nsfilehandle

这个问题让我觉得几乎是愚蠢的，但我只是想检查一下自己的理智。出于各种原因，我将一堆文件合并为一个单独的巨型文件，然后将其作为资源打包到我的 iOS 应用程序中。然后我使用 NSFileHandle 打开文件，寻找正确的位置，然后只读出我想要的字节。

这样做和读取松散文件之间有什么性能差异吗？或者，假设我可以选择只使用一个单一的巨型文件，而不是 10 个中型（但仍连接）文件，“打开”大文件和小文件之间是否存在性能差异？

由于我确切地知道要查找的位置，并且我只读取我想要的字节，所以我看不出会有什么不同。但是，嘿 - 事实证明是奇怪的事情。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:03:14.367

如果文件数量非常多，可能会有所不同。每个打开的文件都会占用内存中的资源（文件句柄等），并且在某些存储设备上，即使没有填满，文件也会占用整个块。在极端情况下，这可能会导致空间浪费。但在实践中，这可能不会成为问题。要确定，您可以分析您的代码，看看它是否比另一种方式更快，并查看它在典型设备上占用的空间类型。

# c - Shamir Secret Sharing 的 OpenSSL 实现

> ID：13189544
> 
> 赞同：0
> 
> 时间：2012-11-02T04:59:45.710
> 
> 标签：c, openssl, shared-secret

我正在尝试使用 OpenSSL 实现 Shamir Secret Sharing。我在解密消息时遇到了很多麻烦！

我已经尝试了几种解密实现，这两个： [http ://www.cs.cornell.edu/courses/cs754/2001fa/307.pdf](http://www.cs.cornell.edu/courses/cs754/2001fa/307.pdf)

而这个（参考了上面的论文，但使用了不同的方法）：

![http://i9.photobucket.com/albums/a60/cacollo/confused1.jpg](../Images/71feb7f7f67a041070fc624c0fbeacf8.png)（注意我知道计算的错字`u2`）

我相信我的问题可能是在使用 BIGNUM 值表示关键数字对 ik/(ik-ij) 进行拉格朗日插值时失去精度。我写了一个小函数，将一个`int`like 键号转换为一个BIGNUM 值。

我会为你省去我的密钥生成代码，因为我很确定它工作正常。以下是我链接的 JPEG（不是 PDF）的实现：

```
int i;
for (i = 0; i < 3; i++) {
    aij[i] = BN_new();
    BN_mod_exp(aij[i], c.c1, key[i].key, p, ctx);
}

BIGNUM *ik = BN_new();
BIGNUM *ij = BN_new();
BIGNUM *denomTmp = BN_new();
BIGNUM *numTmp = BN_new();
BIGNUM *divTmp = BN_new();
BIGNUM *accum = BN_new();

int j, k;

/* Lagrange Interpolation */
for (j = 0; j < 3; j++) {
    BN_one(accum);
    for (k = 0; k < 3; k++) {
        if(j == k) continue;
        else {
            ik = int2BN(key[k].keynum); //int2BN is my function for converting ints to BNs
            ij = int2BN(key[j].keynum);

            BN_sub(denomTmp, ik, ij);

            BN_div(divTmp, NULL, ik, denomTmp, ctx);
            BN_mul(accum, accum, divTmp, ctx);
        }
    }
    cij[j] = BN_new();
    BN_mod(cij[j], accum, q, ctx); // accum % q = cij[j]
}

// Now for the second half...
int a;
u1 = BN_new();
BIGNUM *u1tmp = BN_new();
BN_one(u1);
for (a = 0; a < 3; a++) {
    BN_mod_exp(u1tmp, aij[a], cij[a], p, ctx);
    BN_mod_mul(u1, u1, u1tmp, p, ctx);
} 
```

当我在 cij[] 中吐出计算值时，使用键 [2、4、5] 时，我得到：2、-5、0。根据我手工做的一些数学计算，它实际上应该是 10/3、5 和 8/3。有没有办法解决这个问题？

您看到我的代码还有其他问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T08:38:43.470

当你做 sub、div、mul 时，你需要做模运算。即分母上的BN_mod_sub、BN_mod_inverse和BN_mod_mul。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-30T13:46:39.320

BN_div 是整数除法。

对于拉格朗日，您需要进行模数反转然后乘法。

# javascript - 比较值的Javascript

> ID：13189545
> 
> 赞同：-1
> 
> 时间：2012-11-02T04:59:47.060
> 
> 标签：javascript, greasemonkey

我有一个 Greasemonkey 脚本（这里的原始线程：[Javascript to grab Javascript comments within <head>](https://stackoverflow.com/questions/8305706/javascript-to-grab-javascript-comments-within-head)）从网页中抓取一个字符串——我们的 CMS 在页面上标记的 PageID——然后这个字符串使用 Greasemonkey 显示在我的浏览器中。这样做的目的是为了网站维护，这样我就可以浏览我们的网站并快速查看特定页面的 PageID 是什么。用于实现此目的的代码是：

```
var commentNode = [].slice.call(document.head.childNodes).filter(function(node) {
            return node.nodeType == 8;
          })[0],
    id = commentNode.data.match(/^\s*(\d+)/)[1];

var elem = document.createElement('div');
elem.id = 'id-display';
elem.appendChild(document.createTextNode(id));
document.body.appendChild(elem);

GM_addStyle = function(css) {
        var head = document.getElementsByTagName('head')[0], style = document
                .createElement('style');
        if (!head) {
            return
        }
        style.type = 'text/css';
        style.textContent = css;
        head.appendChild(style);
} 
```

这在我的浏览器（Chrome 或 Firefox w/Greasemonkey）中显示为：

```
Page ID: 0001 
```

我现在有一个单独的 HTML 报告，它以以下格式从我们的 CMS 发布：

```
<table class="report-table">
 <thead>
    <tr>
      <th scope="col">Page Id</th>
      <th scope="col">Page title</th>
      <th scope="col">Page URL</th>
      <th scope="col">Content Editor</th>
      <th scope="col">Content manager</th>
      <th scope="col">Date updated</th>     
    </tr>
  </thead>
    <tr>
     <td>0001</td>
     <td>Webpage title</td>
     <td><a href="http://www.website.com/page01.htm">www.website.com/page01.htm</a></td>
     <td>Joe Bloggs</td>
     <td>Sussan Smith</td>
     <td>01/11/2012</td>
   </tr>
</table> 
```

此网页报告保存在内部可访问位置*\internal-pc\cms-report.html*

我现在想做的是让我的 Greasemonkey 仍然获取 PageID 字符串，然后在*cms-report.html*中的表中查找此 PageID ，然后在 Greasemonkey 覆盖中显示此信息：

```
Page ID: 0001
Page title: Webpage title
Page URL: www.website.com/page01.htm
Content Editor: Joe Bloggs
Content manager: Sussan Smith
Date Updated: 01/11/2012 
```

谁能带领我走正确的道路？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:38:13.760

`pID`使用 jQuery 并假设您在变量和结果 div中有可用的页面 id `#result`：

```
var pID = '0001';
$(function(){
    $.get('internal-pc/cms-report.html', function(data){
        var table = $(data),
            selectedTD = table.find('td:contains("' + pID + '")'),
            parentTR = selectedTD.parent();
            parentTR.find('td').each(function(i){
                $('#result').append('<p>' + table.find('th:eq(' + i + ')').text() + ': ' + $(this).text() + '</p>');
            });
    });         
}); 
```

`Note: You will need to modify the $.get URL to point to your cms-report.html`文件。

# python - 播客，以及音频文件的位置

> ID：13189547
> 
> 赞同：0
> 
> 时间：2012-11-02T04:59:57.453
> 
> 标签：python, xml-parsing

我正在用 Python 编写一个播客聚合器。我发现大多数播客都在`link`标签下链接了音频文件。但有些没有：例如[Nature 播客](http://feeds.nature.com/nature/podcast/current)`origEnclosureLink`在标签下有它。

许多播客聚合器下载 Nature 播客都没有问题，所以我假设人们知道一些我不知道的东西，即哪些标签（倾向于）在播客提要中携带肉。有人可以启发我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T05:39:51.530

> ..哪个标签（倾向于）在播客提要中携带肉

*   [RSS 2.0](http://cyber.law.harvard.edu/rss/rss.html)：`<enclosure`
*   [原子](http://www.ietf.org/rfc/rfc4287.txt)：`<link rel="enclosure"`
*   [`<media:content xmlns:media="http://search.yahoo.com/mrss/"`](http://video.search.yahoo.com/mrss)
*   `<feedburner:origEnclosureLink xmlns:feedburner="http://rssnamespace.org/feedburner/ext/1.0"`

Nature 播客提要是 RSS 2.0。

# excel - 更新目标工作簿从源工作簿中提取数据

> ID：13189554
> 
> 赞同：1
> 
> 时间：2012-11-02T05:00:59.517
> 
> 标签：excel, vba

我有 2 个工作簿 一个有包含一些列的文档列表说列表

列出城市经理

abc abc1 xyz

和其他在列表中具有名称的列中说 A1 具有 abc

与其他列中的城市和经理的值分别为列表中的每个项目说 C10 和 C11 我有单独的工作簿

我想添加一个按钮，以便当我在 abc 的工作簿中更新城市和经理并按下按钮时，它会被复制到列表中 abc 行的列表中。

# javascript - 单页网站的自动生成导航菜单

> ID：13189555
> 
> 赞同：0
> 
> 时间：2012-11-02T05:01:03.757
> 
> 标签：javascript, jquery, dom

我想为单页网站创建一个自动生成的导航菜单。

```
<!-- html -->
<section id="home">
</section>
<section id="aboutus">
</section>
<section id="contactus">
</section>
<nav id="nav_menu">
</nav>

// jQuery
<script>
  $(function() {
    $('section').each(function(index) {
      $('#nav_menu').append('<a href="'+$(this).hash+'">&diams;<br /></a>')
    });
  });
</script> 
```

我想为页面中的每个部分创建一个菱形，其中每个菱形都有一个指向相应页面的锚。

问题是 $(this).location.hash 显示*undefined*而不是页面的锚点。我不确定应该使用什么来获取该部分的哈希值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:09:52.957

您想要该部分的 ID

```
$('section').each(function(index) {
  $('#nav_menu').append('<a href="#'+this.id+'">&diams;<br /></a>')
}); 
```

# python - 如何在 Django Python 的原始 SQL 中插入参数

> ID：13189563
> 
> 赞同：13
> 
> 时间：2012-11-02T05:01:50.180
> 
> 标签：python, django

我有这个代码

```
myquery =   '''SELECT * from users 
               where id = 10 and
               city = 20 and 
               state = 30''' 
```

我想用三个变量替换那些

```
var_id = bla
var_city = bla
var_state = bla 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-02T05:12:58.887

使用[`params`参数`raw()`](https://docs.djangoproject.com/en/dev/topics/db/sql/#passing-parameters-into-raw)：

```
var_id = 10
var_city = 20
var_state = 30

mymodel.objects.raw('''SELECT * from users 
                       where id = %s and
                       city = %s and 
                       state = %s ''', [var_id, var_city, var_state]) 
```

`params`是参数列表。您将`%s`在查询字符串中使用占位符（无论您的数据库引擎如何）；它们将被参数列表中的参数替换。

* * *

来自 Django 文档的重要说明：

> 警告不要对原始查询使用字符串格式！
> 
> 将上述查询写为：

```
>>> query = 'SELECT * FROM myapp_person WHERE last_name = %s' % lname
>>> Person.objects.raw(query) 
```

> 不。
> 
> 使用参数列表可以完全保护您免受 SQL 注入攻击，这是攻击者将任意 SQL 注入您的数据库的常见漏洞。如果你使用字符串插值，你迟早会成为 SQL 注入的受害者。只要您记得始终使用参数列表，您就会受到保护。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-11-07T23:04:39.677

您还可以在查询中使用字典和变量，如下所示：

```
my_dict = {
   'id': 10,
   'city': 20,
   'state': 30
} 

mymodel.objects.raw('''SELECT * from users 
                       where id = %(id)s and
                       city = %(city)s and 
                       state = %(state)s ''', my_dict) 
```

你可以在这里阅读更多内容：[https ://docs.djangoproject.com/en/1.10/topics/db/sql/#passing-parameters-into-raw](https://docs.djangoproject.com/en/1.10/topics/db/sql/#passing-parameters-into-raw)

# c# - 登录失败：未知用户名或密码错误。访问其他服务器时出错

> ID：13189565
> 
> 赞同：2
> 
> 时间：2012-11-02T05:02:14.517
> 
> 标签：c#, console-application, .net

我正在使用登录凭据访问其他服务器。我的问题是，如果我最初运行代码，它会显示错误为

```
Logon failure: unknown user name or bad password 
```

但是如果我在通过命令提示符连接到服务器后尝试运行代码。然后，该应用程序工作正常，它不会抛出任何错误。因此，每天我都需要通过命令提示符连接到服务器一次，才能正常运行应用程序。

这是我的代码：

```
static void main()
{
  string sourceDir = "//server.domain.mhc//drive";
                string DestinationDir = "D:\\Test";

                DirectoryCopy(sourceDir, DestinationDir, true);
}

[DllImport("advapi32.DLL", SetLastError = true)]
public static extern int LogonUser(string lpszUsername, string lpszDomain, string lpszPassword, int dwLogonType, int dwLogonProvider, ref IntPtr phToken);

private static void DirectoryCopy(string sourceDirName, string destDirName, bool copySubDirs)
{
    clsEmail objEmail = new clsEmail();
    try
    {
        IntPtr admin_token = default(IntPtr);
        if(LogonUser("myusername","domain","pwd",9,0,ref admin_token) != 0)
        {
            DirectoryInfo dir = new DirectoryInfo(sourceDirName);
            DirectoryInfo[] dirs = dir.GetDirectories();
        } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T06:03:54.143

找到了解决方案。请参阅更新的代码以获取答案。

```
try
     {
        IntPtr admin_token = default(IntPtr);
        //Added these 3 lines
        WindowsIdentity wid_current = WindowsIdentity.GetCurrent();
        WindowsIdentity wid_admin = null;
        WindowsImpersonationContext wic = null;

        if(LogonUser("myusername","domain","pwd",9,0,ref admin_token) != 0)
        {
        //Newly added lines
         wid_admin = new WindowsIdentity(admin_token);
         wic = wid_admin.Impersonate();

         DirectoryInfo dir = new DirectoryInfo(sourceDirName);
         DirectoryInfo[] dirs = dir.GetDirectories();
         }
     } 
```

# c# - 如何在同一图表上绘制 2 种图表使用 EPPlus

> ID：13189570
> 
> 赞同：7
> 
> 时间：2012-11-02T05:02:28.110
> 
> 标签：c#, excel-2007, epplus

我想在 EPPlus（帮助导出 Excel 文件的 COM）中的一个图表上绘制 2 个不同类型的系列（即列和线）。任何人都知道该怎么做。提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-02T06:29:33.263

终于，我找到了我的答案。链接参考：[http ://epplus.codeplex.com/wikipage?title=FAQ](http://epplus.codeplex.com/wikipage?title=FAQ)

**如何将具有不同图表类型的系列添加到我的图表中？**

这是你的做法...

```
ExcelChart chart = worksheet.Drawings.AddChart("chtLine", eChartType.LineMarkers);        
var serie1= chart.Series.Add(Worksheet.Cells["B1:B4"],Worksheet.Cells["A1:A4"]);
//Now for the second chart type we use the chart.PlotArea.ChartTypes collection...
var chartType2 = chart.PlotArea.ChartTypes.Add(eChartType.ColumnClustered);
var serie2 = chartType2.Series.Add(Worksheet.Cells["C1:C4"],Worksheet.Cells["A1:A4"]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-28T11:42:51.633

你可以这样做...

```
var chartType2 = chart.PlotArea.ChartTypes.Add(eChartType.ColumnClustered)as ExcelBarChart;
(ExcelBarChartSerie) serie2 = (ExcelBarChartSerie) chartType2.Series.Add(Worksheet.Cells["C1:C4"],Worksheet.Cells["A1:A4"]);
serie2.DataLabel.ShowValue = true; 
```

# coffeescript - 当我通过中间函数管道我的方法定义时，为什么胖箭头不绑定到这个？

> ID：13189573
> 
> 赞同：0
> 
> 时间：2012-11-02T05:02:40.540
> 
> 标签：coffeescript, arrow-functions

我有以下代码声明了一个方法，该方法在函数结果分配给原型槽之前由中间函数建议。

```
class A
    somemethod: advise => @dosomething() 
```

为什么在这种情况下胖箭头不绑定到实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:02:40.540

### 简单的答案

当在原型槽名称和函数定义之间放置中介时，您会破坏使 CS 在构造函数中发出绑定代码的句法模式

```
class A
    foo: (paramlist) =>
    bar: ()=>
    baz: => 
```

所有这些方法定义在生成的 Javascript 构造函数中发出此代码

```
function A() {
    this.foo = __bind(this.foo, this);
    this.bar = __bind(this.bar, this);
    this.baz = __bind(this.baz, this);
} 
```

如果你在两者之间插入一些东西，你就会破坏Coffeescript编译器可以识别该模式并生成必要代码的句法模式。

```
class A
    helpWhereIsMyMethod: processTheFollowing => @doSomething() 
```

在这种情况下，构造函数中不会生成绑定调用

### 更复杂的答案

当您定义一个原型槽（名称）并立即为其分配一个（匿名）函数时，您已经有效地创建了一个句柄，您以后可以通过该句柄访问该函数并“处理”它或调用它（大多数情况下）。

如果在将结果绑定到原型槽之前将函数通过管道传递到另一个函数（中介），那么您实际上会创建一个以后无法访问的匿名函数。

因此，Coffeescript 编译器不知道如何在构造函数中发出绑定代码，因为在对象创建期间不再提供对匿名函数的访问。

中间函数也可以生成自己的代码并发出这个新代码以绑定到原型槽。

# string - listunagg 函数？

> ID：13189575
> 
> 赞同：9
> 
> 时间：2012-11-02T05:02:47.703
> 
> 标签：string, oracle, csv, oracle11g, tokenize

oracle中有没有像listunagg函数这样的东西？例如，如果我有如下数据：

| 用户身份 | 度_fi | degree_en | degree_sv |
| --- | --- | --- | --- |
| 3601464 | 3700 | 1600 | 2200 |
| 1020 | 100 | 0 | 0 |
| 3600520 | 100,320,400 | 1300、800、3000 | 1400、600、1500 |
| 3600882 | 0 | 100 | 200 |

我想显示这样的数据：

| 用户身份 | 度_fi | degree_en | degree_sv |
| --- | --- | --- | --- |
| 3601464 | 3700 | 1600 | 2200 |
| 1020 | 100 | 0 | 0 |
| 3600520 | 100 | 1300 | 1400 |
| 3600882 | 0 | 100 | 200 |
| 3600520 | 3200 | 800 | 600 |
| 3600520 | 400 | 3000 | 1500 |

我试图找到一些类似的功能，`listagg`但找不到任何功能。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T05:52:42.873

正如@be here now 已经在评论中指出的那样，Oracle 没有提供这样的功能。因此，作为一种快速解决方法，您可以编写类似的查询：

```
with t1(user_id, degree_fi, degree_en, degree_sv) as
(
  select 3601464, '3700', '1600', '2200' from dual union all
  select 1020   , '100' , '0'   , '0'    from dual union all
  select 3600520, '100,3200,400', '1300, 800, 3000', '1400, 600, 1500'  from dual union all
  select 3600882, '0',    '100',  '200'  from dual
),
Occurence(ocr) as(
  select Level as ocr
    from (select max(greatest(regexp_count(degree_fi, '[^,]+')
                             , regexp_count(degree_en, '[^,]+')
                             , regexp_count(degree_sv, '[^,]+')
                             )
                    ) mx
            from t1    
          ) 
    connect by level <= mx
)
select *
  from (
select User_id
     , regexp_substr(degree_fi, '[^,]+', 1, o.ocr) as degree_fi
     , regexp_substr(degree_en, '[^,]+', 1, o.ocr) as degree_en
     , regexp_substr(degree_sv, '[^,]+', 1, o.ocr) as degree_sv
   from t1 t
  cross join Occurence o
)
where degree_fi is not null
  or degree_en is not null 
  or degree_sv is not null 
```

结果：

```
User_Id   Degree_Fi  Degree_En  Degree_Sv
------------------------------------------------------------ 
3601464   3700       1600       2200 
1020      100        0          0 
3600520   100        1300       1400 
3600882   0          100        200 
3600520   3200       800        600 
3600520   400        3000       1500 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-04-26T10:30:56.690

OraOpenSource [Utils](https://github.com/OraOpenSource/oos-utils)软件包集提供了一个[`listunagg`功能。](http://oos-utils.readthedocs.io/en/latest/oos_util_string/#listunagg-function)它也很好用。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-06-17T22:50:10.433

要取消列表，请考虑 Tom 在 Oracle 的“Ask Tom”中所说的话，请参阅[https://blogs.oracle.com/oraclemagazine/on-cursors-sql-and-analytics](https://blogs.oracle.com/oraclemagazine/on-cursors-sql-and-analytics) 代码清单 3 或 4。

Tom 没有讨论的我的首选选项适用于短字符串（<34 个字符）。我使用 Oracle DBMS_UTILITY.comma_to_table 函数。例子：

```
SET SERVEROUTPUT ON
DECLARE
/** test data **/   
  L_LIST1   VARCHAR2(500) := '"A","B","C","Pierre - Andre","D","E","OFVampFVapos;CBryan","F","G","H","I","J"';
  l_list2   VARCHAR2(500);
  l_tablen  BINARY_INTEGER;
  l_tab     DBMS_UTILITY.uncl_array;
BEGIN
  DBMS_OUTPUT.put_line('l_list1 : ' || l_list1);

  DBMS_UTILITY.comma_to_table (
     list   => l_list1,
     tablen => l_tablen,
     tab    => l_tab);

  FOR i IN 1 .. l_tablen LOOP
    DBMS_OUTPUT.put_line(i || ' : ' || l_tab(i));
  END LOOP;

  DBMS_UTILITY.table_to_comma (
     tab    => l_tab,
     tablen => l_tablen,
     list   => l_list2);

  DBMS_OUTPUT.put_line('l_list2 : ' || l_list2);
end; 
```

# c - 在内核崩溃后获取 Linux 内核调试信息

> ID：13189576
> 
> 赞同：6
> 
> 时间：2012-11-02T05:02:49.510
> 
> 标签：c, linux, debugging, linux-kernel

发生内核崩溃后，有没有办法获取内核先前的调试信息。

我正在尝试开发一个内核模块，它基本上在内核网络堆栈内的 IP 层中捕获 IP 数据包，经过一些修改后，我必须将相同的数据包发送回 NIC 进行传输。

在所有这些过程中，我在**printk()**的帮助下编写调试信息。但是如果出现任何问题并且发生内核故障，我们必须重新启动系统。有没有办法获取我以前的调试信息，因为重新启动后调试信息不​​存在，因为我尝试通过**dmesg**命令获取它？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T06:34:24.790

实际上，*/var/log/dmesg*文件包含当前启动打印消息日志。*/var/log/kern.log文件包含您之前在*[Ubuntu](https://en.wikipedia.org/wiki/Ubuntu_%28operating_system%29)中的启动内核打印消息日志。在其他 Linux 风格中，它将包含在Fedora 等的*/var/log/messages文件中。*

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T06:23:30.317

`/var/log/dmesg`即使在系统重新启动后，也可以在文件中查看内核日志消息。

dmesg.X 会有很多文件，这些文件是以前的内核日志。`dmesg`是最新的文件。

查看*[dmesg 和 /var/log/kern.log 之间的区别](https://stackoverflow.com/questions/11412950/difference-between-dmesg-and-var-log-kern-log)*

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T06:42:58.840

最新版本的 Linux 支持[故障转储](https://help.ubuntu.com/12.04/serverguide/kernel-crash-dump.html)。成功后，这些将包括完整的内存转储，包括内核日志消息和堆栈跟踪。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-02T05:13:52.067

您可以尝试通过键盘或串行控制台输入[神奇的 SysRq](http://kernel.org/doc/Documentation/sysrq.txt)键序列来与挂起的系统进行交互。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-12-21T03:38:15.927

GNOME Logs 是一个非常有用的软件。您可以将日志消息限制为最后一个会话，并轻松阅读崩溃前的最后一条消息。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-05-03T04:38:29.620

实际上，崩溃信息 (dmesg) 位于 /var/crash/ 位置。在这里，我们有每个系统崩溃的文件夹。文件夹名称，例如 127.0.0.1-date-time。vmcore-dmesg.txt 存在于文件夹中。从这些文件中，我们得到了崩溃前执行的 dmesg。

# mapreduce - 使用 MapReduce 为 String 分配唯一 ID

> ID：13189578
> 
> 赞同：2
> 
> 时间：2012-11-02T05:03:13.160
> 
> 标签：mapreduce, uniqueidentifier, apache-zookeeper

我想运行一个 MapReduce 作业，我想从给定文件中扫描多个列，并为每列的每个不同值分配一个唯一 ID（索引号）。主要挑战是在不同节点或 Reducer 的不同实例上遇到的相同值共享相同的 ID。

目前，我正在使用 zookeeper 来共享唯一 ID，但这会对性能产生影响。我什至将信息保存在减速器级别的本地缓存中，以避免多次访问 Zookeeper 以获得相同的值。我想探索是否有其他更好的机制来做同样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T07:50:12.613

I can suggest two possible solutions for your problem

1.  Create unique ID based on your value. This might be a hash function with low collision rate.
2.  Use faster storage than ZooKeeper. You can try simple key value storage like Redis to store value to id mapping.

# delphi - 将外部代码处理工具集成到 RAD Studio IDE

> ID：13189587
> 
> 赞同：3
> 
> 时间：2012-11-02T05:04:08.967
> 
> 标签：delphi, ide, c++builder, external-tools

早期的 Borland IDE (TP, TC) 具有执行外部工具、通过*过滤器*处理其输出并呈现用户可导航视图的方法，其中包含与相应文件名和行/列号相关的消息（协议已在[此处](https://collab.firelab.org/software/projects/lidar/repository/revisions/59/entry/Lidar/BP/UNITS/EXAMPLES/UTILS/GREP2MSG.PAS)描述）。现在是否支持这种整合，或者我必须诉诸类似的东西`IOTAMessageServices.AddToolMessage`（并自己写这样的“合适”）？

# java - 使用 J2s [自动完成组合框] 的 JTable 的自动完成不起作用

> ID：13189590
> 
> 赞同：1
> 
> 时间：2012-11-02T05:04:14.723
> 
> 标签：java, swing, autocomplete, jcombobox, swingx

参考[问题](https://stackoverflow.com/questions/10897839/how-to-implement-auto-complete-functionality-in-a-cell-in-jtable/10901944#10901944)！由 abg 和由 mKorBel 回答。

并使用 J2s[自动完成组合框](http://www.java2s.com/Code/Java/Swing-Components/AutocompleteComboBox.htm)！

当我对 ArrayList 项使用 Item Class 而不是 String 时，mKorBel 针对我的案例的答案中的代码不起作用。

```
 Vector<Vector<String>> comboData=util.GetComboData();
   ArrayList<String> listSomeString =      util.GetListForComboBox(comboData);
   Java2sAutoComboBox comboBox = new Java2sAutoComboBox(listSomeString);
   comboBox.setDataList(listSomeString);
   column.setCellEditor(new DefaultCellEditor(comboBox)); 
```

函数 GetListForComboBox 的代码如下

```
 public ArrayList GetListForComboBox(Vector<Vector<String>> comboData) {

    //Vector model = new Vector();

    ArrayList<Item_> listSomeString = new ArrayList<Item_>();        
    try {

    String strdata;
    for (int i = 0; i < comboData.size(); i++) {
    String id = comboData.get(i).elementAt(0).toString();

    if (comboData.get(i).elementAt(1) != null) {
        strdata = comboData.get(i).elementAt(1).toString();
    } else {
        strdata = "";
    }

    Item_ it = new Item_(id, strdata);
    //model.addElement(it);
    listSomeString.add(it);
    }

    } catch (Exception ex) {
    ex.printStackTrace();
    }

    return listSomeString;
    } 
```

Item_ 类的代码如下

```
 public class Item_     
    {       

    private String description;   
    private String id; 
    public Item_( String id,String description)        
    {            

    this.description = description;    
    this.id = id;   
    }          
    public String getId()         
    {             return id;         
    }         

    public String getDescription()    
    {             return description;        
    }         
    public String toString()        
    {             return description;         
    } 

    public void setDescription(String desc)    
    {              description=desc;        
    } 

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T07:19:07.083

不知道，必须创建一个HashMap或MutableComboBoxModel，因为AutoComplete严格基于Array，必须更改构造函数

我对 Bug 的好奇心（我无法模拟这个问题），也从这段代码中呈现出来（禁用`comboBox.setRenderer(new ItemRenderer());`）

```
import java.awt.BorderLayout;
import javax.swing.DefaultCellEditor;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;
import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JList;
import javax.swing.plaf.basic.BasicComboBoxRenderer;

public class TableRenderDemo extends JPanel {

    private static final long serialVersionUID = 1L;

    public TableRenderDemo() {
        super(new BorderLayout(5, 5));
        final JTable table = new JTable(new MyTableModel());
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        table.setFillsViewportHeight(true);
        table.setRowHeight(20);
        JScrollPane scrollPane = new JScrollPane(table);
        initColumnSizes(table);
        setUpSportColumn(table, table.getColumnModel().getColumn(2));
        add(scrollPane, BorderLayout.CENTER);
        JButton resetButton = new JButton("Reset to default");
        resetButton.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                for (int i = 0; i < table.getRowCount(); i++) {
                    table.getModel().setValueAt("None of the above", i, 2);
                }
            }
        });
        add(resetButton, BorderLayout.SOUTH);
    }

    private void initColumnSizes(JTable table) {
        MyTableModel model = (MyTableModel) table.getModel();
        TableColumn column = null;
        Component comp = null;
        int headerWidth = 0;
        int cellWidth = 0;
        Object[] longValues = model.longValues;
        TableCellRenderer headerRenderer = table.getTableHeader().getDefaultRenderer();
        for (int i = 0; i < 5; i++) {
            column = table.getColumnModel().getColumn(i);
            comp = headerRenderer.getTableCellRendererComponent(null, column.getHeaderValue(), false, false, 0, 0);
            headerWidth = comp.getPreferredSize().width;
            comp = table.getDefaultRenderer(model.getColumnClass(i)).getTableCellRendererComponent(table, longValues[i], false, false, 0, i);
            cellWidth = comp.getPreferredSize().width;
            column.setPreferredWidth(Math.max(headerWidth, cellWidth));
        }
    }

    private void setUpSportColumn(JTable table, TableColumn sportColumn) {
        ArrayList<String> listSomeString = new ArrayList<String>();
        listSomeString.add("Snowboarding");
        listSomeString.add("Rowing");
        listSomeString.add("Knitting");
        listSomeString.add("Speed reading");
        listSomeString.add("Pool");
        listSomeString.add("None of the above");
        JComboBox comboBox = new JComboBox();
        comboBox.addItem(new Item(1, "-"));
        comboBox.addItem(new Item(2, "Snowboarding"));
        comboBox.addItem(new Item(3, "Rowing"));
        comboBox.addItem(new Item(4, "Knitting"));
        comboBox.addItem(new Item(5, "Speed reading"));
        comboBox.addItem(new Item(6, "Pool"));
        comboBox.addItem(new Item(7, "None of the above"));
        comboBox.setMaximumRowCount(3);
        comboBox.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                JComboBox comboBox = (JComboBox) e.getSource();
                Item item = (Item) comboBox.getSelectedItem();
                System.out.println(item.getId() + " : " + item.getDescription());
            }
        });
        comboBox.setRenderer(new ItemRenderer());
        sportColumn.setCellEditor(new DefaultCellEditor(comboBox));
        DefaultTableCellRenderer renderer = new DefaultTableCellRenderer();
        renderer.setToolTipText("Click for combo box");
        sportColumn.setCellRenderer(renderer);
    }

    class ItemRenderer extends BasicComboBoxRenderer {

        @Override
        public Component getListCellRendererComponent(JList list, Object value,
                int index, boolean isSelected, boolean cellHasFocus) {
            super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
            if (value != null) {
                Item item = (Item) value;
                setText(item.getDescription().toUpperCase());
            }
            if (index == -1) {
                Item item = (Item) value;
                setText("" + item.getId());
            }
            return this;
        }
    }

    class Item {

        private int id;
        private String description;

        public Item(int id, String description) {
            this.id = id;
            this.description = description;
        }

        public int getId() {
            return id;
        }

        public String getDescription() {
            return description;
        }

        @Override
        public String toString() {
            return description;
        }
    }

    class MyTableModel extends AbstractTableModel {

        private static final long serialVersionUID = 1L;
        private String[] columnNames = {"First Name", "Last Name", "Sport", "# of Years", "Vegetarian"};
        private Object[][] data = {{"Kathy", "Smith", "Snowboarding", new Integer(5), false},
            {"John", "Doe", "Rowing", new Integer(3), true}, {"Sue", "Black", "Knitting", new Integer(2), false},
            {"Jane", "White", "Speed reading", new Integer(20), true}, {"Joe", "Brown", "Pool", new Integer(10), false}};
        public final Object[] longValues = {"Jane", "Kathy", "None of the above", new Integer(20), Boolean.TRUE};

        @Override
        public int getColumnCount() {
            return columnNames.length;
        }

        @Override
        public int getRowCount() {
            return data.length;
        }

        @Override
        public String getColumnName(int col) {
            return columnNames[col];
        }

        @Override
        public Object getValueAt(int row, int col) {
            return data[row][col];
        }

        @Override
        public Class<?> getColumnClass(int c) {
            return getValueAt(0, c).getClass();
        }

        @Override
        public boolean isCellEditable(int row, int col) {
            if (col < 2) {
                return false;
            } else {
                return true;
            }
        }

        @Override
        public void setValueAt(Object value, int row, int col) {
            data[row][col] = value;
            fireTableCellUpdated(row, col);
            System.out.println("New value of data: " + getValueAt(row, col));
        }
    }

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("TableRenderDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        TableRenderDemo newContentPane = new TableRenderDemo();
        frame.setContentPane(newContentPane);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T07:35:37.543

必须使用插入符号（插入符号的快速实现，抱歉太懒了，没有任何想法），否则选择所有编辑器，默认选择退格键第一项

```
import java.awt.BorderLayout;
import javax.swing.DefaultCellEditor;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.AbstractTableModel;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.TableCellRenderer;
import javax.swing.table.TableColumn;
import java.awt.Component;
import java.awt.EventQueue;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.FocusEvent;
import java.awt.event.FocusListener;
import java.util.ArrayList;
import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFormattedTextField;
import javax.swing.JList;
import javax.swing.JTextField;
import javax.swing.plaf.basic.BasicComboBoxRenderer;
import javax.swing.text.JTextComponent;

public class TableRenderDemo extends JPanel {

    private static final long serialVersionUID = 1L;

    public TableRenderDemo() {
        super(new BorderLayout(5, 5));
        final JTable table = new JTable(new MyTableModel());
        table.setPreferredScrollableViewportSize(table.getPreferredSize());
        table.setFillsViewportHeight(true);
        JScrollPane scrollPane = new JScrollPane(table);
        initColumnSizes(table);
        setUpSportColumn(table, table.getColumnModel().getColumn(2));
        add(scrollPane, BorderLayout.CENTER);
        JButton resetButton = new JButton("Reset to default");
        resetButton.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                for (int i = 0; i < table.getRowCount(); i++) {
                    table.getModel().setValueAt("None of the above", i, 2);
                }
            }
        });
        add(resetButton, BorderLayout.SOUTH);
    }

    private void initColumnSizes(JTable table) {
        MyTableModel model = (MyTableModel) table.getModel();
        TableColumn column = null;
        Component comp = null;
        int headerWidth = 0;
        int cellWidth = 0;
        Object[] longValues = model.longValues;
        TableCellRenderer headerRenderer = table.getTableHeader().getDefaultRenderer();
        for (int i = 0; i < 5; i++) {
            column = table.getColumnModel().getColumn(i);
            comp = headerRenderer.getTableCellRendererComponent(null, column.getHeaderValue(), false, false, 0, 0);
            headerWidth = comp.getPreferredSize().width;
            comp = table.getDefaultRenderer(model.getColumnClass(i)).getTableCellRendererComponent(table, longValues[i], false, false, 0, i);
            cellWidth = comp.getPreferredSize().width;
            column.setPreferredWidth(Math.max(headerWidth, cellWidth));
        }
    }

    private void setUpSportColumn(JTable table, TableColumn sportColumn) {
        ArrayList<String> listSomeString = new ArrayList<String>();
        listSomeString.add("-");
        listSomeString.add("Snowboarding");
        listSomeString.add("Rowing");
        listSomeString.add("Knitting");
        listSomeString.add("Speed reading");
        listSomeString.add("Pool");
        listSomeString.add("None of the above");
        AutoComboBox comboBox = new AutoComboBox(listSomeString);
        comboBox.setDataList(listSomeString);
        comboBox.setMaximumRowCount(3);
        comboBox.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                JComboBox comboBox = (JComboBox) e.getSource();
                System.out.println(comboBox.getSelectedItem());
            }
        });
        JTextComponent editor = ((JTextField) comboBox.getEditor().getEditorComponent());
        editor.setCaretPosition(editor.getCaretPosition());
        editor.moveCaretPosition(0);
        editor.addFocusListener(focsListener);

        sportColumn.setCellEditor(new DefaultCellEditor(comboBox));
        DefaultTableCellRenderer renderer = new DefaultTableCellRenderer();
        renderer.setToolTipText("Click for combo box");
        sportColumn.setCellRenderer(renderer);
    }

    private FocusListener focsListener = new FocusListener() {

        @Override
        public void focusGained(FocusEvent e) {
            dumpInfo(e);
        }

        @Override
        public void focusLost(FocusEvent e) {
            //dumpInfo(e);
        }

        private void dumpInfo(FocusEvent e) {
            //System.out.println("Source  : " + name(e.getComponent()));
            //System.out.println("Opposite : " + name(e.getOppositeComponent()));
            //System.out.println("Temporary: " + e.isTemporary());
            final Component c = e.getComponent();
            if (c instanceof JFormattedTextField) {
                EventQueue.invokeLater(new Runnable() {

                    public void run() {
                        ((JFormattedTextField) c).requestFocus();
                        ((JFormattedTextField) c).setText(((JFormattedTextField) c).getText());
                        ((JFormattedTextField) c).selectAll();
                    }
                });
            } else if (c instanceof JTextField) {
                EventQueue.invokeLater(new Runnable() {

                    public void run() {
                        ((JTextField) c).requestFocus();
                        ((JTextField) c).setText(((JTextField) c).getText());
                        ((JTextField) c).selectAll();
                    }
                });
            }
        }

        private String name(Component c) {
            return (c == null) ? null : c.getName();
        }
    };

    class ItemRenderer extends BasicComboBoxRenderer {

        @Override
        public Component getListCellRendererComponent(JList list, Object value,
                int index, boolean isSelected, boolean cellHasFocus) {
            super.getListCellRendererComponent(list, value, index, isSelected, cellHasFocus);
            if (value != null) {
            }
            if (index == -1) {
            }
            return this;
        }
    }

    class MyTableModel extends AbstractTableModel {

        private static final long serialVersionUID = 1L;
        private String[] columnNames = {"First Name", "Last Name", "Sport", "# of Years", "Vegetarian"};
        private Object[][] data = {{"Kathy", "Smith", "Snowboarding", new Integer(5), false},
            {"John", "Doe", "Rowing", new Integer(3), true}, {"Sue", "Black", "Knitting", new Integer(2), false},
            {"Jane", "White", "Speed reading", new Integer(20), true}, {"Joe", "Brown", "Pool", new Integer(10), false}};
        public final Object[] longValues = {"Jane", "Kathy", "None of the above", new Integer(20), Boolean.TRUE};

        @Override
        public int getColumnCount() {
            return columnNames.length;
        }

        @Override
        public int getRowCount() {
            return data.length;
        }

        @Override
        public String getColumnName(int col) {
            return columnNames[col];
        }

        @Override
        public Object getValueAt(int row, int col) {
            return data[row][col];
        }

        @Override
        public Class<?> getColumnClass(int c) {
            return getValueAt(0, c).getClass();
        }

        @Override
        public boolean isCellEditable(int row, int col) {
            if (col < 2) {
                return false;
            } else {
                return true;
            }
        }

        @Override
        public void setValueAt(Object value, int row, int col) {
            data[row][col] = value;
            fireTableCellUpdated(row, col);
            System.out.println("New value of data: " + getValueAt(row, col));
        }
    }

    private static void createAndShowGUI() {
        JFrame frame = new JFrame("TableRenderDemo");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        TableRenderDemo newContentPane = new TableRenderDemo();
        frame.setContentPane(newContentPane);
        frame.pack();
        frame.setVisible(true);
    }

    public static void main(String[] args) {
        javax.swing.SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                createAndShowGUI();
            }
        });
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T14:56:01.790

我知道这是一个老问题，但如果它可以帮助那里的人，这里是如何做 OP 要求的：

在 Java2sAutoCombobox 中，将函数 setSelectedValue(Object obj) 替换为以下函数：

```
void setSelectedValue(String str)
{
    if(!isFired)
    {
        Object objectToSelect = null;

        for(Object obj: getDataList())
        {
            if( obj.toString().equals(str) )
            {
                objectToSelect = obj;
                break;
            }
        }

        isFired = true;
        setSelectedItem(objectToSelect);
        fireItemStateChanged(new ItemEvent(this, 701, selectedItemReminder,
                                           1));
        isFired = false;
    }
} 
```

通过这样做，JComboBox.setSelectedItem() 将从数据列表中选择对象，而不是其字符串表示形式。

# python - 有没有更快的方法来检查一个值是否在 python 的集合中？

> ID：13189591
> 
> 赞同：2
> 
> 时间：2012-11-02T05:04:15.957
> 
> 标签：python

我想维护一个字符串列表，并继续检查列表中是否存在不同的变量。

我正在做的是：

```
li=[one,two,three]
for x in different_x_values:
  if(x in li):
    print 'yes' 
```

有没有比使用`x in li`它检查某个字符串是否在其他字符串集合中更快的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T05:09:44.310

检查更新的python版本中的内置“set（）”数据类型 - 我认为它应该比列表更快。字典键曾经是快速的方法，但我认为现在集合相等或更快，所以如果你使用的是 2.5 之前的 python 版本，你可以执行以下操作（不管值是什么字典是）：

```
li = {'one':1, 'two': 1, 'three':1}
for x in different_values:
    if x in li:
        print 'yes' 
```

更新版本，只需将 li 设为 set()。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T05:09:55.550

为此使用一个`set`对象。

```
Python2> s = set(["one", "two", "three"])
Python2> "one" in s
True

Python2> s2 = set(["three", "four", "five"]) 
```

路口：

```
Python2> s & s2
set(['three'])

Python2> x = "three"
Python2> x in s & s2
True 
```

我认为这就是你想要的，两组的交集。我认为，如果您了解集合对象，那么意图也更具可读性。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-02T05:10:59.930

```
print set(different_values).intersection(li) 
```

应该工作相同......可能会更快..

```
>>> other_values = ["franks","pies","pie","beans"]
>>> li = ["apple","pie","franks","and","beans"]
>>> set(other_values).intersection(li)
set(['franks', 'beans', 'pie']) 
```

这里有一些基准

```
In [1]: other_values = range(1000)
In [2]: li = range(500,1000)
In [3]: %timeit set(other_values).intersection(li)
10000 loops, best of 3: 78.6 us per loop
In [4]: %timeit [x for x in other_values if x in li]
100 loops, best of 3: 8.7 ms per loop
In [5]: %timeit set(other_values) & set(li)
10000 loops, best of 3: 97.6 us per loop 
```

所以看起来设置交叉点要快得多

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T05:09:40.677

我相信您已经得到了答案，这是为了完整起见。出于好奇，我对提到的方法进行了测试，得到了以下结果。

size=主列表的大小
setopttime: 使用s1&s2的那个 setintersectiontime:
使用交集操作的
那个 bruteforcetime:burte force time

大小=1000
setoptime :0:00:00.001000 setintersectiontime
:0:00:00.001000
bruteforcetime:0:00:00.005000

大小=10000
setoptime :0:00:00.001000 setintersectiontime
:0:00:00.010000
bruteforcetime:0:00:00.367000

大小=100000
setoptime :0:00:00.001000 setintersectiontime
:0:00:00.115000
bruteforcetime:0:00:35.444000

方法 1 (setopttime) 胜出。如果您想检查，这是代码。

```
import timeit
import datetime
def getList(size):
    s=[]
    for i in range(size):
        s.append(str(i))
    return s

def getSubList(size):
    s=[]
    for i in range(size/2):
        s.append(str(i))
    return s

def testSet(size):
    s=set(getList(size))
    sublist=set(getSubList(size))
    list(s&sublist)

def testIntersection(size):
    s=set(getList(size))
    sublist=set(getSubList(size))
    list(s.intersection(sublist))

def bruteForce(size):
    s=getList(size)
    sublist=getSubList(size)
    final=[]
    for elem in sublist:
        try:
            if s.index(elem)!=-1:
                final.append(elem)
        except ValueError:
            pass
currentsize=1000
for i in range(3):
    t1=datetime.datetime.now()
    testSet(1000)
    t2=datetime.datetime.now()
    testIntersection(currentsize)
    t3=datetime.datetime.now()
    bruteForce(currentsize)
    t4=datetime.datetime.now()
    print "Size="+str(currentsize)
    print "setoptime:"+str(t2-t1)
    print "setintersectiontime:"+str(t3-t2)
    print "bruteforcetime:"+str(t4-t3)
    currentsize=currentsize*10 
```

# c - 如何接受带整数的输入和带空格的字符串？

> ID：13189592
> 
> 赞同：0
> 
> 时间：2012-11-02T05:04:19.897
> 
> 标签：c, scanf

我正在尝试接受来自文件的输入。该文件采用整数格式，后跟一个制表符，后跟一个字符串（可能有也可能没有空格）。

例如：

```
1\tls -l
2\tls 
```

我尝试使用：

```
int   cmd_num;
char command[80];

while (fscanf(ifp, "%d\t%s", &cmd_num, command) != EOF) {
    ...
} 
```

但是，当它看到一个空格时，它失败了。有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:24:11.987

您可能需要使用扫描集来读取字符串：

```
if (fscanf(fp, "%d\t%79[^\n]\n", &cmd_num, command) != 2)
    ...error handling...
else
    ...use cmd_num and command... 
```

请注意格式字符串中的大小限制，以防止缓冲区溢出。

另请注意，您将不知道换行符是否匹配。您最好使用`fgets()`阅读整行（或`getline()`），然后使用`sscanf()`而不是`fscanf()`; 至少您会知道是否收集了换行符（并且可以在必要时吞噬换行符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:27:59.370

`fscanf`在你的函数中试试这个：

```
fscanf(fp,"%d\t%[^\n]s",&cmd_num,command); 
```

这肯定会奏效...

# opengl - 几何着色器和顶点着色器之间的性能差异

> ID：13189594
> 
> 赞同：7
> 
> 时间：2012-11-02T05:04:26.970
> 
> 标签：opengl, glsl, shader

目前正在渲染大约 100 万个顶点的模型。在顶点着色器中，我正在为每个顶点进行一些复杂的计算。现在我想提高模型的分辨率。我对此有两个疑问：

1.  是否建议使用几何着色器将分辨率提高到非常大的因子（例如 64 倍）？
2.  如果我引入几何着色器，我可能需要将计算从顶点着色器移动到几何着色器。就性能而言，在顶点着色器中执行操作是否与在几何着色器中执行操作相同。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T05:35:33.770

> 是否建议使用几何着色器将分辨率提高到非常大的因子，例如 64 倍。

绝对不。虽然 GS*可以*放大几何图形并进行曲面细分，但这并不是它们真正的用途。它们的主要用途是处理变换反馈数据（特别是可以处理多流输出的硬件）和分层渲染。

> 如果我引入几何着色器，我可能需要将计算从顶点着色器移动到几何着色器。就性能而言，在顶点着色器中执行操作是否与在几何着色器中执行操作相同。

在 GS 中做尽可能少的工作是合理的。GS 发生在 T&L 后缓存之后，您希望尽可能多地从中获得。因此，在顶点着色器中尽可能多地进行真正的转换工作。

# symfony-1.4 - Symfony sfGuard 拉取特定用户配置文件中的字段

> ID：13189603
> 
> 赞同：0
> 
> 时间：2012-11-02T05:06:07.013
> 
> 标签：symfony-1.4, sfguard

我正在尝试让“产品”页面显示特定用户的简介和图片。我拥有的代码在下面，但它不断拉动当前登录的用户的简介和图片，这不是我想要的。一旦我注销，我就会收到`Call to a member function getBlurb() on a non-object`错误消息。有没有办法调出特定用户的“模糊”和“图片”字段？

```
public function executeShow(sfWebRequest $request)
  {
    $this->car = $this->getRoute()->getObject();
    $seller_id = $this->car->getSeller_id();
    $this->seller = $this->getUser()->getGuardUser($seller_id);
    $this->blurb = $this->seller->getBlurb();
    $this->picture = $this->seller->getPicture();
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T10:49:46.657

`$this->seller`不是对象，因为`$this->getUser()->getGuardUser($seller_id);`不接受任何参数，它只检索当前用户。在 中查看该方法定义`sfGuardSecurityUser`。

你必须这样做：

教义：`$this->seller = $this->car->getSeller();`

推进：`$this->seller = SfGuardUserPeer::retrieveByPK($seller_id);`

# xslt - 创建具有值的递归元素

> ID：13189604
> 
> 赞同：0
> 
> 时间：2012-11-02T05:06:13.053
> 
> 标签：xslt

我正在尝试使用从我的输入 XML 中获取的值创建一个递归元素，似乎我缺少一个循环或导致值出现在空格中但不在相应标签下的东西。

这是我得到的输入 XML：

```
<soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
<soap:Body>
    <ns2:getOrgEntityListByOrgEntityIdsResponse xmlns:ns2="http://client.initiate.com/">
        <OrgEntity>
            <entityId>
                <enterpriseId>269</enterpriseId>
            </entityId>
            <ORG>
                <caudRecno>0</caudRecno>
                <maudRecno>0</maudRecno>
                <memSeqno>0</memSeqno>
                <memVerno>0</memVerno>
                <AccountTypeNameList>
                    <AccountTypeName>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>2</memSeqno>
                        <attrVal>HOSPITAL</attrVal>
                        <elemDecs/>
                    </AccountTypeName>
                </AccountTypeNameList>
                <FacilityTypeNameList>
                    <FacilityTypeName>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>3</memSeqno>
                        <attrVal>HOSPITAL</attrVal>
                        <elemDecs/>
                    </FacilityTypeName>
                </FacilityTypeNameList>
                <FaxNumberList>
                    <FaxNumber>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>12</memSeqno>
                        <custAddressGlobalUniqueIdentifier/>
                        <phoneAreaCode/>
                        <phoneNumber>7704544279</phoneNumber>
                        <sequenceNumber/>
                        <telephoneTypeName/>
                    </FaxNumber>
                </FaxNumberList>
                <InstitutionAddressList>
                    <InstitutionAddress>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>1</memSeqno>
                        <addressSequenceNumber/>
                        <addressTypeDescription/>
                        <custAddressGlobalUniqueIdentifier>12847292</custAddressGlobalUniqueIdentifier>
                        <permanentAddressIndicator/>
                        <sourceAddressLine1>4575 N SHALLOWFORD RD</sourceAddressLine1>
                        <sourceAddressLine2/>
                        <sourceAddressLine3/>
                        <sourceAddressLine4/>
                        <sourceCity>ATLANTA</sourceCity>
                        <sourceClientId/>
                        <sourceCode/>
                        <sourceCountryCode>USA</sourceCountryCode>
                        <sourceCounty/>
                        <sourceState>GA</sourceState>
                        <sourceZip>30338</sourceZip>
                        <sourceZipExtention/>
                        <standardAddressConcatenated>4575NSHALLOWFORDRD30338</standardAddressConcatenated>
                        <standardAddressLine1>4575 N SHALLOWFORD RD</standardAddressLine1>
                        <standardAddressLine2/>
                        <standardAddressLine2Copy/>
                        <standardAddressLine3/>
                        <standardAddressLine4/>
                        <standardCity>ATLANTA</standardCity>
                        <standardCountryCode>USA</standardCountryCode>
                        <standardCounty/>
                        <standardState>GA</standardState>
                        <standardZip>30338</standardZip>
                        <standardZipExtention/>
                    </InstitutionAddress>
                    <InstitutionAddress>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>1</memSeqno>
                        <addressSequenceNumber/>
                        <addressTypeDescription/>
                        <custAddressGlobalUniqueIdentifier>12847292</custAddressGlobalUniqueIdentifier>
                        <permanentAddressIndicator/>
                        <sourceAddressLine1>4575 N SHALLOWFORD RD</sourceAddressLine1>
                        <sourceAddressLine2/>
                        <sourceAddressLine3/>
                        <sourceAddressLine4/>
                        <sourceCity>ATLANTA</sourceCity>
                        <sourceClientId/>
                        <sourceCode/>
                        <sourceCountryCode>USA</sourceCountryCode>
                        <sourceCounty/>
                        <sourceState>GA</sourceState>
                        <sourceZip>30338</sourceZip>
                        <sourceZipExtention/>
                        <standardAddressConcatenated>4575NSHALLOWFORDRD30338rr</standardAddressConcatenated>
                        <standardAddressLine1>4575 N SHALLOWFORD RD</standardAddressLine1>
                        <standardAddressLine2/>
                        <standardAddressLine2Copy/>
                        <standardAddressLine3/>
                        <standardAddressLine4/>
                        <standardCity>ATLANTA</standardCity>
                        <standardCountryCode>USA</standardCountryCode>
                        <standardCounty/>
                        <standardState>GA</standardState>
                        <standardZip>30338</standardZip>
                        <standardZipExtention/>
                    </InstitutionAddress>
                </InstitutionAddressList>
                <InstitutionNameList>
                    <InstitutionName>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>9</memSeqno>
                        <institutionName>EMORY DUNWOODY MEDICAL</institutionName>
                    </InstitutionName>
                </InstitutionNameList>
                <LastChangeTimestampList>
                    <LastChangeTimestamp>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>7</memSeqno>
                        <dateVal>2009-06-19</dateVal>
                    </LastChangeTimestamp>
                </LastChangeTimestampList>
                <NationalProviderIdentifierNumberOrgList>
                    <NationalProviderIdentifierNumberOrg>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>10</memSeqno>
                        <idIssuer>NPI</idIssuer>
                        <idNumber>1679632137</idNumber>
                        <idSrcRecno>0</idSrcRecno>
                    </NationalProviderIdentifierNumberOrg>
                </NationalProviderIdentifierNumberOrgList>
                <OrgAddrKeyList>
                    <OrgAddrKey>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>1</memSeqno>
                        <custAddressGlobalUniqueIdentifier>12847292</custAddressGlobalUniqueIdentifier>
                        <standardAddressConcatenated>4575NSHALLOWFORDRD30338</standardAddressConcatenated>
                    </OrgAddrKey>
                    <OrgAddrKey>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>1</memSeqno>
                        <custAddressGlobalUniqueIdentifier>1284729299</custAddressGlobalUniqueIdentifier>
                        <standardAddressConcatenated>4575NSHALLOWFORDRD30338rr</standardAddressConcatenated>
                    </OrgAddrKey>
                </OrgAddrKeyList>
                <OrgLineageList>
                    <OrgLineage>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>1</memSeqno>
                        <sourceClientId>314612</sourceClientId>
                        <sourceCode>CIMS_HM</sourceCode>
                        <standardAddressConcatenated>4575NSHALLOWFORDRD30338</standardAddressConcatenated>
                    </OrgLineage>
                </OrgLineageList>
                <OrganizationDEANumberList>
                    <OrganizationDEANumber>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>9</memSeqno>
                        <idIssuer>DEA</idIssuer>
                        <idNumber>BE6185323</idNumber>
                        <idSrcRecno>0</idSrcRecno>
                    </OrganizationDEANumber>
                </OrganizationDEANumberList>
                <OrganizationHierarchyList>
                    <OrganizationHierarchy>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>1</memSeqno>
                        <careGroup>Care Group</careGroup>
                        <legalGroup>Legal Group</legalGroup>
                    </OrganizationHierarchy>
                </OrganizationHierarchyList>
                <OrganizationProspectFlagList>
                    <OrganizationProspectFlag>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>4</memSeqno>
                        <attrVal>N</attrVal>
                        <elemDecs/>
                    </OrganizationProspectFlag>
                </OrganizationProspectFlagList>
                <OrganizationSyntheticRecordFlagList>
                    <OrganizationSyntheticRecordFlag>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>5</memSeqno>
                        <attrVal>N</attrVal>
                        <elemDecs/>
                    </OrganizationSyntheticRecordFlag>
                </OrganizationSyntheticRecordFlagList>
                <OrganizationTargetDataList>
                    <OrganizationTargetData>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>1</memSeqno>
                        <targetDocileValue>Target Docile Value</targetDocileValue>
                        <targetLastChangeDate>2012-12-12T12:12:12-08:00</targetLastChangeDate>
                        <targetType>Target Type</targetType>
                    </OrganizationTargetData>
                </OrganizationTargetDataList>
                <SalesOrganizationDescriptionList>
                    <SalesOrganizationDescription>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>6</memSeqno>
                        <attrVal>IV</attrVal>
                        <elemDecs/>
                    </SalesOrganizationDescription>
                </SalesOrganizationDescriptionList>
                <TaxIdentificationNumberList>
                    <TaxIdentificationNumber>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>11</memSeqno>
                        <idIssuer>SSA</idIssuer>
                        <idNumber>581529062</idNumber>
                        <idSrcRecno>0</idSrcRecno>
                    </TaxIdentificationNumber>
                </TaxIdentificationNumberList>
                <TelephoneNumberList>
                    <TelephoneNumber>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>8</memSeqno>
                        <custAddressGlobalUniqueIdentifier>12847292</custAddressGlobalUniqueIdentifier>
                        <phoneAreaCode/>
                        <phoneNumber>770-454-2000</phoneNumber>
                        <sequenceNumber/>
                        <telephoneTypeName/>
                    </TelephoneNumber>
                </TelephoneNumberList>
                <TotalBedCountList>
                    <TotalBedCount>
                        <caudRecno>2</caudRecno>
                        <maudRecno>2</maudRecno>
                        <asaIdxno>0</asaIdxno>
                        <memSeqno>7</memSeqno>
                        <attrVal>118</attrVal>
                        <elemDecs/>
                    </TotalBedCount>
                </TotalBedCountList>
            </ORG>
            <ORGIdList>
                <ORGId>
                    <memIdnum>314612</memIdnum>
                    <srcCode>CIMS_HM</srcCode>
                </ORGId>
                <ORGId>
                    <memIdnum>PO7TWHX5</memIdnum>
                    <srcCode>HMS_IN</srcCode>
                </ORGId>
            </ORGIdList>
        </OrgEntity>
    </ns2:getOrgEntityListByOrgEntityIdsResponse>
</soap:Body> 
```

这是我正在尝试编写的 XSLT：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet exclude-result-prefixes="exslt saxon bpws cis p0 p1 ihmap" version="2.0"
xmlns:bpws="http://schemas.xmlsoap.org/ws/2003/03/business-process/"
xmlns:cis="http://www.approuter.com/schemas/2003/1/UserCallouts/"
xmlns:exslt="http://exslt.org/common" xmlns:ihmap="http://www.approuter.com/xmlns/2002/Mapping"
xmlns:p0="http://client.initiate.com/"
xmlns:p1="http://www.approuter.com/connectors/request/28/" xmlns:saxon="http://saxon.sf.net/"
xmlns:xml="http://www.w3.org/XML/1998/namespace" xmlns:xsd="http://www.w3.org/2001/XMLSchema"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output encoding="UTF-8" indent="yes" method="xml"/>
<xsl:template match="/">
    <xsl:element name="INSTITUTIONS">
        <xsl:for-each select="//OrgEntity">
            <xsl:element name="INSTITUTION">
                <xsl:element name="MDM_EID">
                    <xsl:value-of select="entityId/enterpriseId"/>
                </xsl:element>
                <xsl:element name="ADDRESSES">
                    <xsl:for-each select="ORG/InstitutionAddressList/InstitutionAddress">
                        <xsl:element name="ADDRESS">
                            <xsl:element name="ADDR_TYPE_NM">
                                <xsl:value-of select="standardCity"/>
                            </xsl:element>
                            <xsl:element name="ADDR_SEQ_NR">
                                <xsl:value-of select="standardCountryCode"/>
                            </xsl:element>
                            <xsl:element name="SRC_ADDRESS_LIST">
                                <xsl:element name="SRC_ADDRESS">
                                    <xsl:choose>
                                        <xsl:when
                                            test="//ORG/OrgAddrKeyList/OrgAddrKey[standardAddressConcatenated = //ORG/InstitutionAddressList/InstitutionAddress/standardAddressConcatenated]">
                                            <xsl:element name="SRC_ADDRESS_KEY">
                                              <xsl:value-of
                                              select="//ORG/OrgAddrKeyList/OrgAddrKey/custAddressGlobalUniqueIdentifier"
                                              />
                                            </xsl:element>
                                        </xsl:when>
                                    </xsl:choose>
                                </xsl:element>
                            </xsl:element>
                        </xsl:element>
                    </xsl:for-each>
                </xsl:element>
            </xsl:element>
        </xsl:for-each>
    </xsl:element>
</xsl:template> 
```

预期输出应如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<INSTITUTIONS>
<INSTITUTION>
    <MDM_EID>269</MDM_EID>
    <ADDRESSES>
        <ADDRESS>
            <ADDR_TYPE_NM>ATLANTA</ADDR_TYPE_NM>
            <ADDR_SEQ_NR>USA</ADDR_SEQ_NR>
            <SRC_ADDRESS_LIST>
                <SRC_ADDRESS>
                    <SRC_ADDRESS_KEY>12847292</SRC_ADDRESS_KEY>
                </SRC_ADDRESS>
                <SRC_ADDRESS>
                    <SRC_ADDRESS_KEY>1284729299</SRC_ADDRESS_KEY>
                </SRC_ADDRESS>
            </SRC_ADDRESS_LIST>
        </ADDRESS>
        <ADDRESS>
            <ADDR_TYPE_NM>ATLANTA</ADDR_TYPE_NM>
            <ADDR_SEQ_NR>USA</ADDR_SEQ_NR>
            <SRC_ADDRESS_LIST>
                <SRC_ADDRESS>
                    <SRC_ADDRESS_KEY>12847292</SRC_ADDRESS_KEY>
                </SRC_ADDRESS>
                <SRC_ADDRESS>
                    <SRC_ADDRESS_KEY>1284729299</SRC_ADDRESS_KEY>
                </SRC_ADDRESS>
            </SRC_ADDRESS_LIST>
        </ADDRESS>
    </ADDRESSES>
</INSTITUTION> 
```

但是，我得到的输出如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<INSTITUTIONS>
<INSTITUTION>
    <MDM_EID>269</MDM_EID>
    <ADDRESSES>
        <ADDRESS>
            <ADDR_TYPE_NM>ATLANTA</ADDR_TYPE_NM>
            <ADDR_SEQ_NR>USA</ADDR_SEQ_NR>
            <SRC_ADDRESS_LIST>
                <SRC_ADDRESS>
                    <SRC_ADDRESS_KEY>12847292 1284729299</SRC_ADDRESS_KEY>
                </SRC_ADDRESS>
            </SRC_ADDRESS_LIST>
        </ADDRESS>
        <ADDRESS>
            <ADDR_TYPE_NM>ATLANTA</ADDR_TYPE_NM>
            <ADDR_SEQ_NR>USA</ADDR_SEQ_NR>
            <SRC_ADDRESS_LIST>
                <SRC_ADDRESS>
                    <SRC_ADDRESS_KEY>12847292 1284729299</SRC_ADDRESS_KEY>
                </SRC_ADDRESS>
            </SRC_ADDRESS_LIST>
        </ADDRESS>
    </ADDRESSES>
</INSTITUTION> 
```

对此的任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:34:27.947

您似乎正在从其连接地址中查找机构的唯一地址 ID。由于一个机构实际上只有一个地址，因此您应该只获得一个值而不是两个值。@Tim 已经在评论中指出。所以你的 SRC_ADDRESS_LIST 应该更像这样创建：-

```
<xsl:element name="SRC_ADDRESS_LIST">
  <xsl:variable name="v" select="standardAddressConcatenated"/>
  <xsl:for-each select='//ORG/OrgAddrKeyList/OrgAddrKey[standardAddressConcatenated=$v]'>
    <xsl:element name="SRC_ADDRESS">
      <xsl:element name="SRC_ADDRESS_KEY">
        <xsl:value-of select="custAddressGlobalUniqueIdentifier"/>
      </xsl:element>
    </xsl:element>
  </xsl:for-each>
</xsl:element> 
```

# jsf-2 - 想要打开一个对话框以在基于 Web 浏览器的应用程序中打开文件

> ID：13189605
> 
> 赞同：0
> 
> 时间：2012-11-02T05:06:24.390
> 
> 标签：jsf-2, primefaces

我正在使用 JSF 和 primefaces 开发 Web 应用程序。我想使用提示用户选择路径和相应文件的对话框打开客户端计算机上的现有文件。请推荐一个可以使用的组件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T02:05:11.367

虽然我怀疑你的意图的可行性；直接在客户的机器上访问内容（那里有一些安全隐患），这两者的结合[`<p:media/>`](http://www.primefaces.org/showcase/ui/media.jsf)将为[`<p:lightBox/>`](http://www.primefaces.org/showcase/ui/lightBox.jsf)您工作。虽然有primefaces施加的文件类型限制（仅限多媒体文件和pdf），但`<p:media/>`可以嵌入`<p:lightBox/>`如下：

```
 <p:lightBox>
          <p:media value="{yourBean.filePath}" width="100%" height="300px">
    </p:lightBox> 
```

就像我说的，我怀疑直接从客户端的本地文件系统流式传输内容的可行性。您打算如何`c:\Users\john doe\my documents\my books\book.pdf`在您自己的 Web 应用程序中使用用户本地系统上的路径，而无需先将文件上传到您自己的 Web 服务器？对于图像文件，您可能会成功地将文件加载到内存中并使用...直接从 RAM 流式传输文件[`<p:dynaImage/>`](http://www.primefaces.org/showcase/ui/dynamicImage.jsf)...考虑到此选项对于高流量应用程序的可扩展性

# websphere - OSGi 中的 Apache Wink 客户端

> ID：13189607
> 
> 赞同：2
> 
> 时间：2012-11-02T05:06:44.100
> 
> 标签：websphere, osgi, apache-wink, websphere-liberty

我正在尝试在 WebSphere Liberty Profile 8.5 上运行的 OSGi 应用程序中使用 Apache Wink 客户端：

```
org.apache.wink.client.ClientConfig clientConfig = new ClientConfig();
org.apache.wink.client.RestClient client = new RestClient(clientConfig);
org.apache.wink.client.Resource resource = client.resource(uri);
org.apache.wink.client.ClientResponse response = resource.get();
System.out.println(response.getEntity(String.class)); 
```

编译器在调用 ClientResponse.getEntity() 时产生以下错误：

```
The type org.apache.wink.client.internal.BaseRequestResponse cannot be resolved. It is indirectly referenced from required .class files 
```

ClientResponse 似乎扩展了 org.apache.wink.client.internal.BaseRequestResponse，它不包含在 com.ibm.websphere.appserver.thirdparty.jaxrs 的 Export-Package 声明中。

是否可以在 OSGi 应用程序中使用来自 jaxrs-1.1 功能的 Apache Wink 客户端？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T20:48:07.750

无论如何，我都不是权威，但一位从事 WebSphere Web Services 支持工作的 IBM 人员直接告诉我，这些`org.apache.wink.server.internal.*`Wink 类是不可访问的，也不打算被访问。

# html - 如何制作带有标题和左侧边栏的页面？

> ID：13189610
> 
> 赞同：21
> 
> 时间：2012-11-02T05:07:01.010
> 
> 标签：html, css

我想做一个这样的网页：

```
|----------------------------|
|            header          |
|----------------------------|
|  L  |                      |
|  e  |                      |
|  f  |                      |
|  t  |                      |
|     |                      |
|  S  |   Content Area       |
|  i  |                      |
|  d  |                      |
|  e  |                      |
|  b  |                      |
|  a  |                      |
|  r  |                      |
|----------------------------| 
```

标题具有固定的高度，但它的宽度应该是动态的。左侧边栏应该有一个固定的宽度但一个动态的高度。对于内容区域，高度和宽度都是动态的。当用户缩放他们的浏览器时，滚动条不应该出现（不设置溢出：隐藏；隐藏它。）。

我试着写这样的代码：

```
<div class="top">
    TOP
</div>
<div class="left">
    LEFT
</div>
<div class="main">
    MAIN
</div> 
```

使用 CSS：

```
.top {
    width: 100%;
    height: 92px;
}
.left {
    width: 178px;
    height: 100%;
    float:left;
}
.main {
    float: left;
    height: 100%;
    width: 100%;
 } 
```

但它失败了。

**编辑：内容区和左侧栏必须填满整个浏览器窗口.....我不需要**

```
|----------------------------|
|            header          |
|----------------------------|
|  L  |                      |
|  e  |                      |
|  f  |                      |
|  t  |                      |
|     |                      |
|  S  |   Content Area       |
|  i  |                      |
|  d  |----------------------|
|  e  |
|  b  |
|  a  |
|  r  |
|-----| 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-02T05:54:38.787

[jsFiddle 的示例](http://jsfiddle.net/coltrane/cxQGc/)

```
.top {
    position:absolute;
    left:0; right:0;
    height: 92px;
}
.left {
    position:absolute;
    left:0; top:92px; bottom: 0;
    width: 178px;
}
.main {
    position: absolute;
    left:178px; top:92px; right:0; bottom:0;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T09:34:08.450

这是给你的简单代码。试试这个并了解质量`CSS`编码。

HTML：

```
<div class="main">
<div class="top">TOP</div>
<div class="left">LEFT</div>
<div class="right">MAIN</div>
<div class="clear"></div>
</div> 
```

CSS：

```
.clear{
clear:both;
} 
.main{
width:500px;
}
.top {
background: blue;
width:500px;
height: 92px;
}
.left {
float:left;
width: 150px;
background: red;
}
.right{
float:right;
width:350px;
background: yellow;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T05:16:59.717

***[现场演示](http://tinkerbin.com/4iUXfEdJ)***

嗨，现在你就像这样轻松地做

**CSS**

```
.top {
    height: 92px;
}
.left {
    width: 178px;
    float:left;
}
.main {
  margin-left:178px;
 } 
```

**HTML**

```
<div class="top">
    TOP
</div>
<div class="left">
    LEFT
</div>
<div class="main">
N content here MAIN content here MAIN content here </div> 
```

***[现场演示](http://tinkerbin.com/tph5goZ8)***

## ------------

***[更新的演示](http://jsfiddle.net/rohitazad/5AUMA/)***

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T05:11:33.190

你只需`"float: left;"`要从你的`.main`定义中删除。

此外，在调试定位时，这确实有帮助：

```
div {
    border: 1px solid #000;
} 
```

此外，可能值得`height: 100%`从 .left 和 .main 中删除以防止垂直滚动条

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T05:11:34.523

演示：http: [//jsfiddle.net/nRQeA/](http://jsfiddle.net/nRQeA/)

```
.top {
    width: 100%;
    height: 92px;

}
.left {
    width: 20%;
    height: 100%;
    float:left;
}
.main {
    float: left;
    height: 100%;
    width: 80%

 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-11-01T09:11:41.103

您还可以使用*display : table*和*display : table-cell*创建一个页面，该页面包含一个带有 2 个表格单元的表格级元素（侧边栏和内容区域）

[![示例图像](../Images/23b8790b8980c483ab76b33a1d90e75a.png)](https://i.stack.imgur.com/F0haz.png)

```
<div id="outer-container">
    <div id="sidebar"></div>
    <div id="content"></div>
</div>

#outer-container {
    display: table;
    width: 100%;
    height: 100%;
}

#sidebar {
    display: table-cell;
    width: 15%;
    vertical-align: top;
}

#content {
    display: table-cell;
    width: 85%;
    vertical-align: top;
} 
```

这里有一个演示教程：http: [//usefulangle.com/post/61/html-page-with-left-sidebar-main-content-with-css](http://usefulangle.com/post/61/html-page-with-left-sidebar-main-content-with-css)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-08-14T10:26:32.370

我是css的新手，但我对html很熟悉。我接管了一个由其他人创建的网站，该网站广泛使用表格来放置网页。我正在重做网站的一页，省略了表格。我在 2012 年对 Lee 的上述解决方案发表评论。我通过添加“top:0;”使他的解决方案起作用。作为顶级 css 类的属性。我想我可以这样做，因为我注意到 left 也是 Lee 解决方案中左侧 css 类的属性。我想 Lee 的解决方案原样对我不起作用，因为现有 css 文件中肯定存在由其他人创建的冲突。

# bash - 使用 bash 替换多个文件中的特定行

> ID：13189611
> 
> 赞同：3
> 
> 时间：2012-11-02T05:07:11.290
> 
> 标签：bash, loops, replace, sed

我对 bash 脚本比较陌生，因为我需要在超级计算机上管理我的模拟。我目前坚持编写脚本来更改我的 pbs 文件中的特定行。

我的问题有两个阶段。首先，我需要替换文本文件（另一个脚本）中的多行，并覆盖该文件以供以后使用。粗略的想法是：

> 将第 27、28 和 29 行替换`'filename005'`为`'text1=000'`,`'text2=005'`和`'text3=010'`

接下来，我想对一组带有编号后缀的文本文件递归地执行此操作，并且编号会影响替换的文本。

到目前为止，我的代码是：

```
#!/bin/bash
for ((i = 1; i < 10; i++))
    do
    let NUM=i*5
    let OLD=NUM-5
    let NOW=NUM
    let NEW=NUM+5

    let FILE=$(printf "filename%03g" $NUM)
    sed "27 c\text1=$OLD" $FILE
    sed "28 c\text2=$NOW" $FILE
    sed "29 c\text3=$NEW" $FILE
done 
```

我知道我的代码的最后 4 行有一些错误，我仍在研究正确的实现方式`sed`。感谢任何提示！

谢谢！CS

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:16:29.413

取规范的第一行：

```
Replace lines 27:29 of filename005, with text1=000; text2=005; text3=010 
```

那变成：

```
sed -e '27,29c\
text1=000\
text2=005\
text3=010' filename005 
```

冲洗并重复。反斜杠表示`sed`更改仍在继续。如果您的实际数据行不需要以反斜杠结尾，那么您自己会更容易。

你可以玩：

```
seq 1 35 |
sed -e '27,29c\
text1=000\
text2=005\
text3=010' 
```

看看会发生什么，而不会有损坏珍贵文件的风险。给定规范行，您可以编写一个`sed`脚本来根据规范生成`sed`脚本（尽管我很想使用 Perl 或`awk`替代；实际上，我可能会在 Perl 中完成整个工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T08:36:25.223

好的，在发现要进行内联替换后，我设法让我的代码工作，我需要将它写入一个临时文件。因此，使用递归循环和多行替换（以及其他小调整）：

```
for ((i = 1; i < 10; i++ ))
    do
    let NUM=i*5
    let OLD=NUM-5
    let NOW=NUM
    let NEW=NUM+5

    FILE=`printf "filename%03g" $NUM`

    sed -e "27,29 c\
    OLD=$OLD\n\
    NOW=$NOW\n\
    NEW=$NEW" $FILE >temp.tmp && mv temp.tmp $FILE
done 
```

`sed`请让我知道在这种情况下是否有更优雅的使用方式。再次感谢@Johnathan！

# mysql - 我将使用哪种 SQL 数据类型作为驾驶执照号码？

> ID：13189615
> 
> 赞同：2
> 
> 时间：2012-11-02T05:07:31.680
> 
> 标签：mysql, sql

这对大多数人来说可能是一个愚蠢的问题，但我想知道驾驶执照号码使用哪种 SQL 数据类型。在我的州，驾驶执照号码包含一个字母。我知道有三种不同类别的数据类型，文本、数字和日期/时间类型。我也知道属于这些类别的类型，但不确定将哪一个用于包含数字和字母的字符串。

在此先感谢我收到的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T05:09:20.957

使用“varchar”数据类型。所以你可以同时使用数字和字母

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:10:23.107

使用 varchar 数据类型或 nvarchar

varchar-8000 最大值 nvarchar-4000 最大值

# android - GestureDetector onScroll() 问题（执行 3 次）

> ID：13189620
> 
> 赞同：2
> 
> 时间：2012-11-02T05:08:13.147
> 
> 标签：android

我有这段代码可以使用 GestureDetector 检测滚动手势。它可以工作，只是它检测到滚动活动 3 次而不是一次。

我怎样才能让它只检测一次？它记录滚动活动（log.i 行）3 次，并播放声音（mp.start）3 次而不是一次......也导致我的应用程序强制关闭。

```
 public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX, float distanceY) {

        //get x and Y co-ordinates and log it as info. 
        float x1 = e1.getX();
        float y1 = e1.getY();
        float x2 = e2.getX();
        float y2 = e2.getY();       
        Log.i("Scroll_Gesture", "Scrolled from: (" + x1 + "," + y1 + " to " + x2 +"," + y2 + ")");

        mp = MediaPlayer.create(this, R.raw.scroll_success);        
        mp.start();

       //start success page
        Intent intent = new Intent(this, ScrollSuccess.class);
        startActivity(intent); 
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T08:43:05.837

“onScroll()”将被多次调用。它会被调用多少次取决于用户所做的滚动操作。

如果您希望代码块在每个滚动操作开始时只运行一次，那么您必须添加一个条件，如下所示：

```
 float scrollstartX1, scrollStartY1;

   public boolean onScroll(MotionEvent e1, MotionEvent e2, float distanceX,
           float distanceY) {
    // get x and Y co-ordinates and log it as info.
       if (scrollstartX1 != e1.getX() || scrollStartY1 != e1.getY()) {
           scrollstartX1 = e1.getX();
           scrollStartY1 = e1.getY();
               //***************************************
           //code run only once for a scroll action...
               //****************************************
       }
           float x2 = e2.getX();
           float y2 = e2.getY();
           Log.i("Scroll_Gesture", "Scrolled from: (" + scrollstartX1 + "," + scrollStartY1 + " to "
                   + x2 + "," + y2 + ")");

           mp = MediaPlayer.create(this, R.raw.scroll_success);
           mp.start();

           // start success page
           Intent intent = new Intent(this, ScrollSuccess.class);
           startActivity(intent);

       return false;
   } 
```

# java - 谷歌云 sql 访问在本地被拒绝异常

> ID：13189623
> 
> 赞同：0
> 
> 时间：2012-11-02T05:08:35.517
> 
> 标签：java, hibernate, google-app-engine, google-cloud-sql

我在这里粘贴了完整的堆栈跟踪 - [Pastebin](http://pastebin.com/nG8shz7j)。

```
Caused by: java.security.AccessControlException: access denied (java.net.SocketPermission localhost resolve)
    at java.security.AccessControlContext.checkPermission(AccessControlContext.java:374)
    at java.security.AccessController.checkPermission(AccessController.java:546)
    at java.lang.SecurityManager.checkPermission(SecurityManager.java:532)
    at 

    com.google.appengine.tools.development.DevAppServerFactory$CustomSecurityManager.checkPermission(DevAppServerFactory.java:283)
        at java.lang.SecurityManager.checkConnect(SecurityManager.java:1031)
        at java.net.InetAddress.getAllByName0(InetAddress.java:1145)
        at java.net.InetAddress.getAllByName(InetAddress.java:1083)
        at java.net.InetAddress.getAllByName(InetAddress.java:1019)
        at com.mysql.jdbc.StandardSocketFactory.connect(StandardSocketFactory.java:243)
        at com.mysql.jdbc.MysqlIO.<init>(MysqlIO.java:284)
        at com.mysql.jdbc.ConnectionImpl.createNewIO(ConnectionImpl.java:2043)
        ... 123 more
    Caused by:

    com.mysql.jdbc.exceptions.jdbc4.CommunicationsException: Communications link failure 
```

这是我的数据库属性

```
jdbc.driverClassName=com.google.appengine.api.rdbms.AppEngineDriver
jdbc.url=jdbc:mysql://localhost:3306/tester
jdbc.username=root
jdbc.password=root
hibernate.dialect = org.hibernate.dialect.MySQL5Dialect
hibernate.hbm2ddl.auto=update 
```

和 applicationContext -

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="location">
      <value>/WEB-INF/classes/database.properties</value>
    </property>
  </bean>

  <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="${jdbc.driverClassName}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
  </bean>

  <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource">
      <ref local="dataSource"/>
    </property>

    <property name="hibernateProperties">
      <props>
        <prop key="hibernate.dialect">${hibernate.dialect}</prop>
        <prop key="hibernate.show_sql">false</prop>
        <prop key="hibernate.cache.use_query_cache">
          false
        </prop>
        <prop key="hibernate.cache.use_second_level_cache">
          false
        </prop>
        <prop key="hibernate.hbm2ddl.auto">${hibernate.hbm2ddl.auto}</prop>
      </props>
    </property> 
```

这是我尝试使用它的方式 -

```
public class MainDao {
  protected SessionFactory sessionFactory;

  public SessionFactory getSessionFactory() {
    return sessionFactory;
  }

  public void setSessionFactory(SessionFactory sessionFactory) {
    this.sessionFactory = sessionFactory;
  }

  private Session openSession(){
    return this.sessionFactory.openSession();
  }
} 
```

调用 openSession 时出现错误。需要帮助。我无法弄清楚问题所在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:17:20.980

我通过将数据库属性更改为这些来解决问题

```
jdbc.driverClassName=com.google.appengine.api.rdbms.AppEngineDriver
jdbc.url=jdbc:google:rdbms://localhost/database
jdbc.username=root
jdbc.password=root
hibernate.dialect = org.hibernate.dialect.MySQL5Dialect
hibernate.hbm2ddl.auto=update 
```

然后`dev_appserver.cmd`使用以下 jvm args 运行命令 -

```
-Drdbms.server=local
-Drdbms.driver=com.mysql.jdbc.Driver
-Drdbms.url=jdbc:mysql://localhost:3306/yourdatabase?user=username&password=password 
```

这对我有用。命令提示符上的命令不起作用（显示错误），但在我的 IDE（intellij 想法）中，在将上面指定为 jvm 参数后它起作用了。

# visual-studio - 每次我尝试调试错误 CLR20r3 时，Visual Studio 2012 都会崩溃

> ID：13189625
> 
> 赞同：16
> 
> 时间：2012-11-02T05:08:43.660
> 
> 标签：visual-studio, visual-studio-2012, visual-studio-debugging, intellitrace

每次我尝试调试我的一个应用程序时，我都会收到以下错误消息。有人有想法么？我尝试在安全模式下运行 Visual Studio，但我得到了同样的结果。我还尝试修复安装并完全重新安装它没有运气:(。完整的问题签名是这样的：

问题签名：
问题事件名称：CLR20r3
问题签名 01：devenv.exe
问题签名 02：11.0.50727.1
问题签名 03：5011ecaa
问题签名 04：Microsoft.IntelliTrace.Package.11.0.0
问题签名 05：11.0.50727.1
问题签名 06 ：5011dad8
问题签名 07：311
问题签名 08：1f1
问题签名 09：System.AccessViolationException
操作系统版本：6.1.7601.2.1.0.256.48
区域设置 ID：1033
附加信息 1：0a9e
附加信息 2：0a9e372d3b4ad19135b953a3
：78882e789
附加信息4：0a9e372d3b4ad19135b953a78882e789

[![错误图像](../Images/8707f13f58bacde6814a71e75ae06a2f.png)](https://i.stack.imgur.com/cfTVC.jpg)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-02T15:32:24.333

不知道出了什么问题，但要修复它，我必须删除 .sln 文件和 .csproj 文件并再次从 TFS 获取它们才能正常工作。不知道他们出了什么问题，但这确实有效。谢谢你们的帮助！

编辑：

上面结果只在很短的时间内工作。似乎使它起作用的原因（至少在最后一个小时内）是将 IIS 中的最大工作进程数改回 1。完全不知道为什么会起作用：/

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-05T16:21:11.250

问题出在 Web Essentials 上，打开 VS 2012 Tools - Extensions and Updates - Uninstall web essentials

如果你愿意，你可以重新安装它，似乎工作正常

谢谢，

塞巴斯蒂安

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2014-01-09T00:34:19.837

在可能的情况下，问题是由 .NET Reflector 引起的。卸载 .NET Reflector 后，调试再次正常工作，没有任何问题。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-05-27T09:18:41.240

由于它必须对 vs 的调试环境做一些事情，所以我在这里找到了一个解决方案：

[http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/0376db8f-4761-4ae5-9af2-98c53216318a#VS_IDE_unexpected_problems](http://social.msdn.microsoft.com/Forums/en-US/vssetup/thread/0376db8f-4761-4ae5-9af2-98c53216318a#VS_IDE_unexpected_problems)

它在 a) 使用命令“ **devenv /ResetSettings** ”（在命令提示符中 - devenv.exe 位于***VS-Install-Path* \Common7\IDE**中）重置 IDE 的本地用户设置以消除相关的潜在设置问题。对 VS 设置的所有自定义都会重置 - 这对我有用 - 无需卸载。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-02T10:58:14.043

[http://social.msdn.microsoft.com/Forums/eu/vssetup/thread/0376db8f-4761-4ae5-9af2-98c53216318a#VS_IDE_unexpected_problems](http://social.msdn.microsoft.com/Forums/eu/vssetup/thread/0376db8f-4761-4ae5-9af2-98c53216318a#VS_IDE_unexpected_problems)

如果您想在这里阅读它：

当出现意外问题时，关键是要尝试找出潜在的原因。所以最好让情况尽可能简单。

如果 Visual Studio IDE 未按预期工作，我们可以尝试以下方法： a) 尝试运行 devenv /ResetSettings（在命令提示符中）以消除相关的潜在设置问题。

b) 尝试禁用加载项（例如“工具”|“加载项管理器”）或运行“devenv.exe /SafeMode”。这可以消除第三方加载项或程序包导致问题的可能性。（更详细的VS命令行开关信息见：http: [//msdn2.microsoft.com/en-us/library/xee0c8y7.aspx](http://msdn2.microsoft.com/en-us/library/xee0c8y7.aspx)）

c) 尝试创建一个新项目。有时损坏的项目设置可能会导致问题。这些是特定于项目的。

d) 确保我们应用了最新的服务包。例如，Visual Studio 2005，请参考 Microsoft® Visual Studio® 2005 Team Suite Service Pack 1 [http://www.microsoft.com/downloads/details.aspx?FamilyId=BB4A75AB-E2D4-4C96-B39D-37BAF6B5B1DC](http://www.microsoft.com/downloads/details.aspx?FamilyId=BB4A75AB-E2D4-4C96-B39D-37BAF6B5B1DC)（本下载安装 Microsoft® Visual Studio® 2005 Standard、Professional、Team Editions 的 Service Pack 1）或 Microsoft® Visual Studio® 2005 Express Editions Service Pack 1 [http://www.microsoft.com/downloads/details.aspx?FamilyId=7B0B0339 -613A-46E6-AB4D-080D4D4A8C4E](http://www.microsoft.com/downloads/details.aspx?FamilyId=7B0B0339-613A-46E6-AB4D-080D4D4A8C4E)（此下载安装 Microsoft® Visual Studio® 2005 Express Edition 的 Service Pack 1）

e) 尝试将操作系统重新启动到安全模式。这有助于确定是否有任何其他应用程序干扰了 Visual Studio。请注意，某些功能（如 IIS）在安全模式下不可用。请检查是否可以应用。除了安全模式，我们还可以尝试“干净启动”：如何配置 Windows XP 以“干净启动”状态启动[http://support.microsoft.com/kb/310353](http://support.microsoft.com/kb/310353)。

f) 尝试创建一个新的用户帐户。这可以帮助隔离与用户配置文件损坏相关的原因。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-31T09:46:26.173

只需删除所有 *.map 文件就可以了。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-02-18T06:23:10.200

打开 cmd 并导航到

```
C:\Program Files (x86)\Microsoft Visual Studio 10.0\Common7\IDE 
```

或者

```
C:\Program Files\Microsoft Visual Studio 10.0\Common7\IDE 
```

并尝试键入以下命令：

1.  devenv.exe /日志

2.  devenv.exe /安全模式

3.  devenv.exe /resetskippkgs

4.  devenv.exe /installvstemplates

5.  devenv.exe /resetsettings

6.  devenv.exe /resetuserdata

资料来源：[MSDN](http://social.msdn.microsoft.com/Forums/en-US/abcb54bb-5490-48ab-a961-f2c7f64331a3/visual-studio-startup-error-clr20r3?forum=vssetup)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-05-09T16:42:32.640

就我而言，上述解决方案都不适合我，即使尝试了**修复**选项，也必须通过命令行进行完全卸载：

```
vs_ultimate.exe /uninstall /force 
```

注意：根据您的 Visual Studio 版本，它可能是 vs_professional.exe 或 vs_premium.exe 更多信息可以在这里找到：http: [//support.microsoft.com/kb/2771441 ?wa=wsignin1.0](http://support.microsoft.com/kb/2771441?wa=wsignin1.0)

然后完成完整的重新安装

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-05-14T07:40:52.937

我试图恢复新的解决方案文件并以保存模式启动，但它不起作用。然后我删除了 .suo 文件，因为我新建了它与本地环境设置有关。这对我来说效果很好。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-07-10T10:11:33.987

这个对我有用。我再次运行安装程序，选择修改，然后取消选择 Microsoft Web 开发人员工具。我从来没有使用过这些工具，所以我没有为那些使用的人提供解决方案。

# android - Cordova 2.1.0 中的 Childbrowser 无法正常工作

> ID：13189627
> 
> 赞同：0
> 
> 时间：2012-11-02T05:09:04.347
> 
> 标签：android, cordova, childbrowser

我正在将 Phonegap 1.4.1 升级到 Cordova 2.1.0。childbrowser.java 中出现错误。我需要进行哪些更改才能使 Childbrowser 正常工作？

从导入行开始，我在 childbrowser.java 中遇到了很多错误：

```
import com.phonegap.api.PhonegapActivity;
import com.phonegap.api.Plugin;
import com.phonegap.api.PluginResult; 
```

那么，如何在 Android 移动应用程序中将 Phonegap 1.4.1 替换为 Cordova 2.1.0 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:09:14.430

我从[这里](https://github.com/alunny/ChildBrowser/tree/master/www)得到了完整的解释。

谢谢。

# php - 尝试 RIGHT(string, int) 时出现资源 id 错误

> ID：13189635
> 
> 赞同：0
> 
> 时间：2012-11-02T05:09:56.063
> 
> 标签：php, mysql

我有一个带有 2 个表的数据库：

```
db: scwdb
Table 1: tblspecies 
field: txtSpeciesList (ex: "Maple")

Table 2: tblsplintersbowlinventory
field: txtProductBowlCode (ex: "MapleSpTi12-025")
field: txtProductPrimarySpecies - which is blank, it is the target field to be filled 
```

还有一些 PHP MySQL 代码：

```
 mysql_select_db("scwdb", $con);

$query = "SELECT * FROM tblspecies"; 

$species = mysql_query($query) or die(mysql_error());

while($row = mysql_fetch_array($species)){

    $wood = $row['txtSpeciesList'];
    $seq = mysql_query('SELECT txtProductBowlCode, RIGHT(txtProductBowlCode,6) FROM tblsplintersbowlinventory');

    echo "Species: ". $row['txtSpeciesList'];
    echo "<br />";
    echo "Wood: ". $wood;
    echo "<br />";
    echo "Seq: ". $seq;
    echo "<br />"; 
```

基本上，我读取 tblspecies 并为每个 txtSpeciesList 获取 $species 值并循环遍历 tblsplintersbowlinventory ，并且每次 txtProductBowlCode 值包含 $species 值时，我都会使用该值更新 txtProductPrimarySpecies 。

这可以很好地将 txtProductPrimarySpecies 设置为 $species 值 - 但我还想附加 txtProductBowlCode 的最后 6 个字符（例如：MapleSpTi12-025 产生 12-025）并将其附加到 $species 值（Mpale）和然后使用新的组合值 (Maple12-025) 更新 txtProductPrimarySpecies。

这也可以运行，但我得到以下输出：

```
Species: Ash
Wood: Ash
Seq: Resource id #5 
```

它显示了物种，但由于某种原因

```
$seq = mysql_query('SELECT txtProductBowlCode, RIGHT(txtProductBowlCode,6) FROM tblsplintersbowlinventory'); 
```

代码给了我“ `Resource id #5`”错误。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:13:49.930

你需要在 $seq 上做 mysql_fetch_array;

```
$rowSeq = mysql_fetch_array($seq);
print_r($rowSeq); 
```

# java - Java用户在一行上指定输入文件

> ID：13189639
> 
> 赞同：1
> 
> 时间：2012-11-02T05:10:32.880
> 
> 标签：java

我在网上看到的大部分内容是如何读取预定义文件。

```
 File file = new File("myfile.txt"); 
```

在询问用户之后我们如何读取用户输入还有另一个线程。（即`Please enter input:`）

我想做一些类似的事情`java main < inputfile` 我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:16:38.963

> 我想做一些类似的事情`java main < inputfile`我该怎么做？

将其更改为`java main inputfile.name`，然后在 中`main(String[] args)`它将是第 0 个参数。例如

```
File file = new File(args[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:18:51.207

当您以 身份运行启动应用程序时`java MainClass < inputfile`，该文件将作为输入蒸汽 ( `System.in`) 提供给应用程序。

因此，您可以执行以下操作来读取文件的内容：

```
BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

//or

Scanner sc = new Scanner(System.in); 
```

# python - Python字典覆盖错误？

> ID：13189645
> 
> 赞同：0
> 
> 时间：2012-11-02T05:11:19.353
> 
> 标签：python, class, dictionary

好的，所以，我不太确定如何用一个简洁的短语来表达这个问题，所以如果一个模组能想出一个更好的标题，请修复它。

所以假设你有一个模块“testModule.py”

```
# testModule.py    
data = {'x': 1, 'y': 2, 'z': 3}

class A:
    def __init__(self):
        pass

class B(A):
    def __init__(self):
        self.classData = data

class C(B):
    def __init__(self):
        B.__init__(self)
        self.classData = {'x': 2, 'y': 2, 'z': 3} 
```

然后将 testModule 导入文件“test.py”

```
# test.py
import testModule

b = testModule.B()
c = testModule.C()

print test.data
print b.classData
print c.classData 
```

当你运行 test.py 你得到：

```
{'x': 1, 'y': 2, 'z': 3}
{'x': 1, 'y': 2, 'z': 3}
{'x': 2, 'y': 2, 'z': 3} 
```

这是意料之中的，很好，而且花花公子......

但是，如果您要将 testModule 中的 C 类更改为：

```
class C(B):
    def __init__(self):
        B.__init__(self)
        self.classData['x'] = 2 
```

然后运行 ​​test.py 你得到：

```
 {'x': 2, 'y': 2, 'z': 3}
 {'x': 2, 'y': 2, 'z': 3}
 {'x': 2, 'y': 2, 'z': 3} 
```

所以我想我的问题是：为什么当你通过引用字典中的单个元素来更改属于基本模块的字典时，它是否会更改后续类的所有字典的该元素（我希望这是有道理的）。当您重新定义字典时，它不会这样做。请帮忙，因为这个问题真的开始困扰我。

很高兴知道这些 .py 文件的结构是这样的，因为我目前在一个项目中遇到这个问题，并且我的类遵循相同的结构。谢谢大家，杰拉尔达莫

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T05:28:14.947

实际上，您在所有类中都引用了一个全局且可变的对象。所以你会看到所有这些变化都反映出来。这是因为您正在更改同一个对象。您需要`copy()`每个类实例的字典来获取全局实例的唯一副本。

```
self.classData = data.copy() 
```

但是，如果 dict 的值也是可变的，即使这样也可能会给您带来问题。这是因为该`copy()`方法只进行浅拷贝。最安全的做法是使用`copy`模块的 deepcopy 功能进行深层复制。把它放在你的类初始化器中。

```
self.classData = copy.deepcopy(data) 
```

# c++ - 移植到 MSVS2010 C++ GUI 的 MSVS2010 C++ 控制台代码失败。为什么？

> ID：13189650
> 
> 赞同：0
> 
> 时间：2012-11-02T05:11:42.483
> 
> 标签：c++, visual-studio, user-interface, libraries, libsndfile

我刚刚完成了一个概念验证，或者我认为，将一些 C++ 代码作为控制台程序提供给 Microsoft Visual Studio 2010。编译的 C++ 代码如下：

```
#include "stdafx.h"
#include <stdio.h>
#include <Windows.h>
#include <stdlib.h>
#include <sndfile.h>

//The following libraries are related to parsing the text files
#include <iostream> //Open the file 
#include <fstream> //Reading to and from files

//The following libraries are for conducting the DTW analysis
#include "dtw.h"

using namespace std;

int _tmain(int argc, _TCHAR* argv[])
{
    printf("This is a test\n");

    //This will be the length of the buffer used to hold samples while the program processes them. 

    //A SNDFILE is like FILE in a standard C library. Consequently, the sf_open_read and sf_open_write functions will return an 
    //SNDFILE* pointer when they successfully open the specified file. 
    SNDFILE* sf = NULL; 

    /*SF_INFO will obtain information of the file we wish to load into our program. */
    SF_INFO info; 

    /*The following is descriptive information to obtain from wave files. These are declarations*/
    int num_channels;
    double num, num_items;S
    double *buf; 
    int f, sr, c; 
    int i,j;
    FILE *out; 

    /*This is where the program will open the WAV file */
    info.format = 0; 
    sf = sf_open("C:\\Users\\GeekyOmega\\Desktop\\gameon.wav", SFM_READ, &info);
    if(sf == NULL)
    {
        printf("Failed to open the file.\n");
        getchar();
        exit(-1);
    }

    /*Print some file information */
    f = info.frames;
    sr = info.samplerate;
    c = info.channels;

    /*Print information related to file*/
    printf("frames = %d\n",f);
    printf("sample rate = %d\n",sr);
    printf("channels = %d\n",c);

    /*Calculate and print the number of items*/  
    num_items = f*c;
    printf("Read %lf items\n", num_items);

    /*Allocate space for the data to be read*/
    buf = (double *) malloc(num_items*sizeof(double));
    num = sf_read_double(sf,buf,num_items);
    sf_close(sf);

    /*print the information*/
    printf("Read %lf items\n", num);

    /*Write the data to the filedata.out*/  
    out = fopen("filedata.txt", "w");
    for(i = 0; i < num; i+=c)
    {
        for(j = 0; j < c; ++j)
        {
            fprintf(out, "%lf ", buf[i +j]);
        }
        fprintf(out,"\n");
    }
    fclose(out); 
```

}

所以接下来，这很关键，我希望它与 GUI 一起工作。也就是说，我加载了我想要的任何文件，并将该 wav 文件转换为文本。我在下面提供该代码：

```
#pragma once
//Libraries required for libsndfile
#include <sndfile.h>
#include <stdlib.h>
#include <stdio.h>
#include <iostream>
#include <fstream>

namespace WaveGui {

    using namespace System;
    using namespace System::ComponentModel;
    using namespace System::Collections;
    using namespace System::Windows::Forms;
    using namespace System::Data;
    using namespace System::Drawing;

    using namespace System::Runtime::InteropServices;

    using namespace std;

    /// <summary>
    /// Summary for Form1
    /// </summary> 
```

为了便于阅读，我对此进行了编辑。这是一个标准的 MSVS2010 表格。我只添加了一个按钮和打开文件对话框。

```
 private: System::Void button1_Click(System::Object^  sender, System::EventArgs^  e) 
             {

                if(openFileDialog1->ShowDialog() == System::Windows::Forms::DialogResult::OK)
                 {  
                    //Note: Ask Gustafson how we might free the memory for this strign
                    //  http://support.microsoft.com/?id=311259

                    char* str2 = (char*)(void*)Marshal::StringToHGlobalAnsi(openFileDialog1->FileName);
                    SNDFILE* sf = NULL; 
                    SF_INFO info;

                    /*The following is descriptive information to obtain from wave files. These are declarations*/
                    int num_channels;
                    double num, num_items;
                    double *buf; 
                    int f, sr, c; 
                    int i,j;
                    FILE *out; 

                    /*This is where the program will open the WAV file */
                    info.format = 0; 
                    sf = sf_open(str2, SFM_READ, &info);
                    if(sf == NULL)
                    {
                        exit(-1);
                    }

                    /*Print some file information */
                    f = info.frames;
                    sr = info.samplerate;
                    c = info.channels;

                    /*Calculate and print the number of items*/  
                    num_items = f*c;

                    /*Allocate space for the data to be read*/
                    buf = (double *) malloc(num_items*sizeof(double));
                    num = sf_read_double(sf,buf,num_items);
                    sf_close(sf);

                    /*Write the data to the filedata.out*/  
                    out = fopen("filedata.txt", "w");
                    for(i = 0; i < num; i+=c)
                    {
                        for(j = 0; j < c; ++j)
                        {
                            fprintf(out, "%lf ", buf[i +j]);
                        }
                        fprintf(out,"\n");
                    }
                    fclose(out);

                 }

             }
    };
} 
```

在按钮的代码中，我从系统字符串转换为常规字符串，然后尝试使用上面的 C++ 代码将我的波形文件转换为 txt 信息。我知道转换代码有效，并且我知道按钮代码有效，因为我已经单独测试了它们。但是，当我现在尝试使用它时，我的库 sndfile.h 真的死了。

当我添加库 stdio.h、Windows.H、stdlib.h、iostream、fstream 时它给我的错误如下：

```
1>WaveGui.obj : error LNK2031: unable to generate p/invoke for "extern "C" int __clrcall sf_close(struct SNDFILE_tag *)" (?sf_close@@$$J0YMHPAUSNDFILE_tag@@@Z); calling convention missing in metadata
1>WaveGui.obj : error LNK2031: unable to generate p/invoke for "extern "C" __int64 __clrcall sf_read_double(struct SNDFILE_tag *,double *,__int64)" (?sf_read_double@@$$J0YM_JPAUSNDFILE_tag@@PAN_J@Z); calling convention missing in metadata
1>WaveGui.obj : error LNK2031: unable to generate p/invoke for "extern "C" struct SNDFILE_tag * __clrcall sf_open(char const *,int,struct SF_INFO *)" (?sf_open@@$$J0YMPAUSNDFILE_tag@@PBDHPAUSF_INFO@@@Z); calling convention missing in metadata
1>WaveGui.obj : warning LNK4248: unresolved typeref token (01000027) for 'SNDFILE_tag'; image may not run
1>WaveGui.obj : error LNK2028: unresolved token (0A000022) "extern "C" int __clrcall sf_close(struct SNDFILE_tag *)" (?sf_close@@$$J0YMHPAUSNDFILE_tag@@@Z) referenced in function "private: void __clrcall WaveGui::Form1::button1_Click(class System::Object ^,class System::EventArgs ^)" (?button1_Click@Form1@WaveGui@@$$FA$AAMXP$AAVObject@System@@P$AAVEventArgs@4@@Z)
1>WaveGui.obj : error LNK2028: unresolved token (0A000023) "extern "C" __int64 __clrcall sf_read_double(struct SNDFILE_tag *,double *,__int64)" (?sf_read_double@@$$J0YM_JPAUSNDFILE_tag@@PAN_J@Z) referenced in function "private: void __clrcall WaveGui::Form1::button1_Click(class System::Object ^,class System::EventArgs ^)" (?button1_Click@Form1@WaveGui@@$$FA$AAMXP$AAVObject@System@@P$AAVEventArgs@4@@Z)
1>WaveGui.obj : error LNK2028: unresolved token (0A000025) "extern "C" struct SNDFILE_tag * __clrcall sf_open(char const *,int,struct SF_INFO *)" (?sf_open@@$$J0YMPAUSNDFILE_tag@@PBDHPAUSF_INFO@@@Z) referenced in function "private: void __clrcall WaveGui::Form1::button1_Click(class System::Object ^,class System::EventArgs ^)" (?button1_Click@Form1@WaveGui@@$$FA$AAMXP$AAVObject@System@@P$AAVEventArgs@4@@Z)
1>WaveGui.obj : error LNK2019: unresolved external symbol "extern "C" int __clrcall sf_close(struct SNDFILE_tag *)" (?sf_close@@$$J0YMHPAUSNDFILE_tag@@@Z) referenced in function "private: void __clrcall WaveGui::Form1::button1_Click(class System::Object ^,class System::EventArgs ^)" (?button1_Click@Form1@WaveGui@@$$FA$AAMXP$AAVObject@System@@P$AAVEventArgs@4@@Z)
1>WaveGui.obj : error LNK2019: unresolved external symbol "extern "C" __int64 __clrcall sf_read_double(struct SNDFILE_tag *,double *,__int64)" (?sf_read_double@@$$J0YM_JPAUSNDFILE_tag@@PAN_J@Z) referenced in function "private: void __clrcall WaveGui::Form1::button1_Click(class System::Object ^,class System::EventArgs ^)" (?button1_Click@Form1@WaveGui@@$$FA$AAMXP$AAVObject@System@@P$AAVEventArgs@4@@Z)
1>WaveGui.obj : error LNK2019: unresolved external symbol "extern "C" struct SNDFILE_tag * __clrcall sf_open(char const *,int,struct SF_INFO *)" (?sf_open@@$$J0YMPAUSNDFILE_tag@@PBDHPAUSF_INFO@@@Z) referenced in function "private: void __clrcall WaveGui::Form1::button1_Click(class System::Object ^,class System::EventArgs ^)" (?button1_Click@Form1@WaveGui@@$$FA$AAMXP$AAVObject@System@@P$AAVEventArgs@4@@Z)
1>c:\users\geekyomega\documents\visual studio 2010\Projects\WaveGui\Debug\WaveGui.exe : fatal error LNK1120: 6 unresolved externals 
```

据我所知，我正确安装了库。毕竟，它在控制台情况下与这些库完美配合。但是，当我尝试在我的 GUI 表单中使用完全相同的代码和库时，似乎这些库不能很好地相互配合，因此，我无法正确读取我的 .h 文件并访问像 SNDFILE 这样的结构.

有人可以让我知道出了什么问题吗？我已经为此花费了几个小时，我希望我不必废弃 libsndfile 库。我真的想让它与 MSVS2010 和 GUI 一起工作，据我所知，这没有理由不工作。但你知道他们说什么，电脑不会说谎。

一如既往，感谢您的耐心帮助。极客欧米茄

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T06:17:51.583

因此，您的控制台应用程序是本机代码，但您的 GUI 应用程序是托管 C++。这是故意的，还是您打算让您的 GUI 应用程序也成为本机 (Win32) 代码？

我认为，如果您使用 100% 本机代码，或者创建一个 DLL 来封装您的本机代码并通过 P/Invoke 从您的 .NET GUI 调用它，我认为您会有更好的运气。以下是使用 P/Invoke 的示例：

[http://manski.net/2012/05/29/pinvoke-tutorial-basics-part-1/](http://manski.net/2012/05/29/pinvoke-tutorial-basics-part-1/)

# json - Google 电子表格 JSON 请求 - 400 状态

> ID：13189653
> 
> 赞同：1
> 
> 时间：2012-11-02T05:11:48.930
> 
> 标签：json, google-spreadsheet-api

您好，我在[Google Docs](https://docs.google.com/spreadsheet/ccc?key=0AtEgI2WeGqwBdFZ3SThmdkJ0bEVZd0JYS1hjZjh3M2c#gid=0)有一个公开的 google 电子表格。但是，当我请求 JSON 时：

```
$.getJSON( "https://spreadsheets.google.com/feeds/list/0Ak0qDiMLT3XddHlNempadUs1djdkQ0tFLWF6ci1rUUE/od6/public/values?alt=json-in-script&callback=?&gid=0",
function (data) {   console.log(data) }) 
```

我收到 HTTP 400 请求错误。奇怪的是，同样的代码也适用于[这个电子表格](https://docs.google.com/spreadsheet/ccc?key=0Ak0qDiMLT3XddHlNempadUs1djdkQ0tFLWF6ci1rUUE#gid=0)。

这里发生了什么？非常感谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-06T01:41:01.657

我一直在寻找相同问题的解决方案。它使我想到了这一点。

只想分享[修复](https://developers.google.com/google-apps/spreadsheets/)：

“警告：API 请求对未**“发布到 Web”**的电子表格上的供稿使用公开可见性会产生 HTTP 400 错误请求响应，并显示消息找不到此 URL 的电子表格。确保您拥有正确的 URL并且电子表格的所有者没有删除它。”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-04T18:31:45.343

根据我的经验，我猜您可能忘记分享或忘记公开。我刚试了一下，它工作正常。通过在浏览器中输入此链接：

[https://spreadsheets.google.com/feeds/list/0Ak0qDiMLT3XddHlNempadUs1djdkQ0tFLWF6ci1rUUE/od6/public/values?alt=json-in-script&gid=0](https://spreadsheets.google.com/feeds/list/0Ak0qDiMLT3XddHlNempadUs1djdkQ0tFLWF6ci1rUUE/od6/public/values?alt=json-in-script&gid=0)

# java - 对链表删除感到困惑

> ID：13189662
> 
> 赞同：1
> 
> 时间：2012-11-02T05:12:38.403
> 
> 标签：java

我正在尝试在

```
public static boolean delete(Object d, ListElement head){
ListElement p=find(d,head);
if(p.data==null){return false;}
else {
    System.out.println("Delete Successfully!");
    if(head.data==d){head=head.next;}
    else{
    while(head.next.data!=d){
        head=head.next;
    }
    head.next=head.next.next;}
    return true;}

} 
```

这个函数基本上检查元素`d`是否在列表中，-if`not->return false;`

-else 检查该元素是否是列表的第一个元素，如果`true`，将头部更改为其`next`，

-else 遍历它前面的列表元素。

问题是要删除的元素是第一个元素，例如布尔值，`s=ListElement.delete(1,d);`我不能使用“ `head=head.next;`”为头部分配新值。**但是java是通过引用传递的，为什么我不能改变呢？**

//实际上我发现我的问题是我们是否可以在函数内部更改传递给函数的引用，例如：

```
 void fun(dog a){
    a=new dog("Po");
}
main()   
{dog b=new dog("Jo");fun(b);} 
```

//所以b会改变吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:25:39.157

对第一个列表元素的引用要么由列表对象本身保存，要么由“不可见”根元素保存（在单链表的情况下）。

因此，您要么必须将整个列表传递给方法，要么如果您有那个不可见的根，则将根作为头传递。

```
public static boolean delete(Object d, MyLinkedList<ListElement> list) {

  ListElement head = list.getHead();
  if (head.data.equals(d)) {   // <- ALWAYS use equals, never == to compare objects!!
    list.setHead(head.next);
  } else {
    ListElement element = head.next;

    // ... the rest is similiar to your algorithm

  } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:26:01.633

Java 通过引用传递的想法意味着，当您调用一个方法并给某个对象作为参数时，您将获得一个指向同一对象的*新引用。*

更改值将更改对象，进而影响其他引用。但是如果你给参数一个新的值，只有那个会被改变，指向一些不同的对象。（值得一提的是，有些语言确实允许更改参数，以更改第一个传递的参数。）

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T05:17:34.313

```
void delete(visit_ptr_node_type this_is_the_node)
{
  visit_ptr_node_type one_back;
  if(anchor == NULL)
    printf("\n The list is empty");
  else
    {
    if(this_is_the_node==anchor)
      anchor=anchor->next_ptr;
    else
      {
      one_back=anchor;
      while(one_back->next_ptr != this_is_the_node)
    one_back=one_back->next_ptr;
      one_back->next_ptr = (this_is_the_node) ->next_ptr;
      }
    free(this_is_the_node);
    }
} 
```

# android - 可以自动更改公共静态字符串参数吗？

> ID：13189664
> 
> 赞同：2
> 
> 时间：2012-11-02T05:12:39.743
> 
> 标签：android, static-members

该类包含此参数，例如thie

```
public class Global {
    public static String USER_ID = "";
    public static String USER_NAME = "";
    public static String USER_PASSWORD = "";
} 
```

，`USER_ID`我在登录时设置了一次。（例如 Global.USER_ID = "12345"）。并且在后台运行的线程每 5 分钟将一些数据（包含此`USER_ID`）发布到 web 服务。

问题是当线程运行很长时间（大约一天）。我发现参数`USER_ID`返回“”，不是“12345”。

为什么？？？

有人知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T05:26:46.950

我认为您的类已被类加载器（在 GC 期间）从内存中删除，并在您下次使用 Global 类时加载。

我的建议是为此使用 Singelton 类，您可以拥有这样的东西

```
public class Global {
    public String USER_ID = "";
    public String USER_NAME = "";
    public String USER_PASSWORD = "";

    //constructor 
   private Global(){
    // just to prevent object creation from outside
   }
    //static reference
    public static Global global=null;
    public Global getInstance(){    
     return ((global!=null)? global : (global=new Global()) ;
    }
} 
```

现在无论你想使用这个类，你都可以得到这个对象，singelton 逻辑确保它们只是一个在所有人之间共享的对象。

您可以使用在您的线程中获取参考

```
global = Global.getInstance(); 
```

现在您可以使用变量，即使用**global.USER_ID 的****USER_ID**

 **由于您有全局对象的引用，因此在您的线程处于活动状态之前，GC 不会将其从内存中删除。

**注意** 我使用公共变量只是为了说明，但在大多数情况下不推荐使用它们。

**编辑**

为了保存用户数据，我推荐**SharedPreferences**，您可以按如下方式使用它们：-

```
private final String YourAppName_PREFS_NAME = "chooseAMeaningFulName";
private final String YourAppName_USERNAME = "username";
private final String YourAppName_PASSWORD = "password";

 /*This function will save the user name and password for providing Automatically login in future*/

       public void saveUserData() {
          if ( rememberMeChckbox.isChecked() ) {
            //      Log.i("loginFrag", "Saving userName: Pass " + userName + " : " + password);
            loginActivity.getSharedPreferences(YourAppName_PREFS_NAME, Context.MODE_PRIVATE).edit().putString(YourAppName_USERNAME, userName)
                  .putString(YourAppName_PASSWORD, password).commit();
          } else {
            loginActivity.getSharedPreferences(YourAppName_PREFS_NAME, Context.MODE_PRIVATE).edit().remove(RBR_USERNAME).remove(RBR_PASSWORD).commit();
          }
        }

        /*This function returns the previous data from the SharedPreferences and fills the UserName and Password Text Box*/
        private void getPreviousUserData() {
          SharedPreferences preferences = loginActivity.getSharedPreferences(YourAppName_NAME, Context.MODE_PRIVATE);
          userName = preferences.getString(YourAppName_USERNAME, null);
          password = preferences.getString(YourAppName_PASSWORD, null);
          //      Log.i("loginFrag", "Got userName: Pass " + userName + " : " + password);
          if ( userName != null ) {
            uText.setText(userName);
          } else {
            uText.setText("android");
          }
          if ( password != null ) {
            passText.setText(password);
          } else {
            passText.setText("android");
          }
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:27:21.547

```
public class Credentials {
    private Context context;
    private  final String USERID = "USER_ID";
    private final String USER_NAME = "USER_NAME";
    private  final String PASSWORD = "Password";
    private  final String KEY="SaveCredentials";

     public Credentials(Context mcontext) {
        super();
        this.context = mcontext;
    }

    public boolean saveCredentials(String userId,String password,String UserName) {
            Editor editor = context.getSharedPreferences(KEY, Context.MODE_PRIVATE).edit();
            editor.putString(USERID,userId);
            editor.putString(USER_NAME,UserName);
                editor.putString(PASSWORD,password);
            return editor.commit();
        }
    public ArrayList<String> restoreCredentials() {
        ArrayList<String> credentials=new ArrayList<String>();
        SharedPreferences sharedPreferences = context.getSharedPreferences(KEY, Context.MODE_PRIVATE);

       String userid= sharedPreferences.getString(USERID, null);
    String userName=sharedPreferences.getString(USER_NAME,null);
     String password=sharedPreferences.getString(PASSWORD,null);
       credentials.add(userid);
      credentials.add(userName);
       credentials.add(password);
        return credentials;
    }
   public void deleteCredentials()
   {
       Editor editor = context.getSharedPreferences(KEY, Context.MODE_PRIVATE).edit();
    editor.clear();
    editor.commit();
   }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T05:25:56.370

```
public class UserDetail {
    public String USER_ID = "";
    public String USER_NAME = "";
    public String USER_PASSWORD = "";

    public static void setUSER_ID(String USER_ID)
    {
        this.USER_ID = USER_ID;
    }

    public static String getUSER_ID()
    {
        return USER_ID;
    }   
} 
```

在你的`Globals Class`声明中

```
public static UserDetail userDetails = new UserDetail(); 
```

在您的代码中，首先设置如下值

```
Globals.userDetals.setUSER_ID("12345"); 
```

并从相同的 Like 中获取值

```
String USER_ID = Globals.userDetails.getUSER_ID(); 
```**

# java - 带点数字的正则表达式模式

> ID：13189665
> 
> 赞同：6
> 
> 时间：2012-11-02T05:12:56.653
> 
> 标签：java, regex

我需要一个正则表达式

那么任何数字。再次编号和。

所以这是有效的

```
1.3.164.1.2583.15.46
546.598.856.1.68.268.695.5955565 
```

但

```
5..........
...56.5656 
```

无效

我尝试了以下模式：

```
pattern = "[0-9](\\.[0-9]?*)?*";
pattern = "[0-9](\\.[0-9]?*)?$";
pattern = "[^0-9\\.]"; 
```

但这些都不符合我的要求。请帮忙？

我现有的代码是

```
String PATTERN="\\d+(\\.\\d+)*";
@Override
public void insertString(int arg0, String arg1, AttributeSet arg2)
{

    if(!arg1.matches(this.PATTERN))
        return;

    super.insertString(arg0, arg1, arg2);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T05:15:43.740

像这样的东西应该工作：

`(\\d+\\.?)+`

### 编辑

是的，从描述中不清楚`.`是否允许决赛（假设最初的*不是*）。

如果不：

`(\\d+\\.?)*\\d+` 或 `\\d+(\\.\\d+)*`（如果这看起来更合乎逻辑）

### 测试

```
for (String test : asList("1.3.164.1.2583.15.46",
    "546.598.856.1.68.268.695.5955565", "5..........", "...56.5656"))
    System.out.println(test.matches("\\d+(\\.\\d+)*")); 
```

产生：

```
true
true
false
false 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:20:43.140

我在这里考虑递归正则表达式，我的模式是：

```
pattern = "\\d+.\\d+(?:.\\d+.\\d+)*" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-24T06:46:45.587

这个 `[0-9]+([.][0-9]+)* equivalent to \\d+([.]\\d+)*`适用于

> 1.3.164.1.2583.15.46、546.598.856.1.68.268.695.5955565**和**5465988561682686955955565 _ **_**

这个 `[0-9]+([.][0-9]+)+ equivalent to \\d+([.]\\d+)+`适用于

> 1.3.164.1.2583.15.46 和 546.598.856.1.68.268.695.5955565**但不适用于**5465988561682686955955565

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-29T19:31:40.340

您可以匹配以下正则表达式。

```
(?<![.\d])\d+(?:\.\d+)+(?![.\d]) 
```

[启动你的引擎！](https://regex101.com/r/OcJbQ2/4/)

消极的环顾四周是为了避免匹配`.1.3.164.1`和`1.3.164.1.`。包括`\d`在环视中是为了避免匹配`1.3.16`.`1.3.164.1.`

Java 的正则表达式引擎执行以下操作。

```
(?<![.\d])  : negative lookbehind asserts following character is not
              preceded by a '.' or digit
\d+         : match 1+ digits
(?:\.\d+)   : match '.' then 1+ digits in a non-capture group
+           : match the non-capture group 1+ times
(?![.\d])   : negative lookahead asserts preceding character is not
              followed by a '.' or digit 
```

# c# - 我应该声明什么命名空间才能在 C# 中使用 Extension.GetFieldNames() 方法？

> ID：13189680
> 
> 赞同：0
> 
> 时间：2012-11-02T05:14:31.943
> 
> 标签：c#, interop, ms-word, vsto, extension-methods

我最近浏览了很多线程并遇到了这个：

[替换 Word 2003 文档中的 MergeFields 并保持样式](https://stackoverflow.com/questions/1525808/replace-mergefields-in-a-word-2003-document-and-keep-style-c?rq=1)

这是一个旧线程，但看起来很有前途，因为我把代码的逻辑写下来了，我相信我可以利用它。我面临的唯一问题是我似乎无法声明/使用这种方法？

```
Extensions.GetFieldName() 
```

任何替代它的想法也将不胜感激！:)

这是我尝试使用的实际代码

```
foreach (Field mergeField in document.Fields)
{
   if (mergeField.Type == WdFieldType.wdFieldMergeField)
   {
      string fieldText = mergeField.Code.Text;
      string fieldName = Extensions.GetFieldName(fieldText);

      if (values.ContainsKey(fieldName))
      {
         mergeField.Select();
         application.Selection.TypeText(values[fieldName]);
      }
   }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:53:06.823

我真的不认为这`Extensions.GetFieldName`是一种内置方法。它可能是用户定义的方法，并且不存在于互操作下。

通常像这样检索字段名称

```
Int32 endMerge = fieldText.IndexOf("\\");
Int32 fieldNameLength = fieldText.Length - endMerge;
String fieldName = fieldText.Substring(11, endMerge - 11); 
```

请通过此[链接](http://www.experts-exchange.com/Programming/Languages/C_Sharp/Q_23967308.html)。关于如何检索 FieldNames 有一个非常清晰的代码。

# silverlight - Silverlight RIA 身份验证服务，具有分组的配置文件属性

> ID：13189684
> 
> 赞同：2
> 
> 时间：2012-11-02T05:15:09.007
> 
> 标签：silverlight, authentication, ria

我已经阅读了 MSDN 和其他关于在 silverlight 中使用 RIA 和域服务进行身份验证的帖子，使用 Silverlight 业务应用程序模板成功实现了示例。但是当尝试使用组修改配置文件属性时，登录成功，但加载用户配置文件属性时出错。

```
 <profile enabled="true" automaticSaveEnabled="false">
      <providers>
        <clear/>
        <add name="AspNetSqlProfileProvider" type="System.Web.Profile.SqlProfileProvider" connectionStringName="ApplicationServices" applicationName="/"/>
      </providers>
      <properties>
<group name="Personal">
          <add name="FirstName" type="String" />
          <add name="FriendlyName" type="String" />
        </group>
  </properties>
    </profile> 
```

未找到“名字”。

在业务模板生成的 user.vb 类中，我添加了以上两个属性，但没有了解如何将组名称推送到那里（请注意，用户尝试登录存储在 .

# sql - 将空字符串插入 SQL Server 的 INT 列

> ID：13189688
> 
> 赞同：13
> 
> 时间：2012-11-02T05:15:33.003
> 
> 标签：sql, sql-server-2008, insert, numeric

一个`SAMPLE`表只有一列`ID`type `int`，默认为 null。

当我这样做时，在 Oracle 中：

```
 insert into SAMPLE (ID) values (''); 
```

新记录添加了空白值。但在 SQL Server 2008 中，当我运行相同的`insert`语句时，新记录的值为 0。

有没有办法强制 SQL Server 2008 默认空白字符串为 NULL 而不是 0（对于数字类型的列）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T11:03:07.907

假设您的 INSERT 语句是在您的应用程序的许多地方重复使用的存储过程的一部分（或者，可能是始终由客户端代码的同一部分构造的批处理）并且插入的值是作为传递的数字字符串参数，您可以像这样修改 INSERT：

```
INSERT INTO SAMPLE (ID) VALUES (NULLIF(@argument, '')); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-02T05:18:29.477

请改用 NULL。

```
insert into SAMPLE (ID) values (NULL); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-02T08:31:57.573

另一个想法怎么样 - 定义一个[INSTEAD OF INSERT 触发器](http://msdn.microsoft.com/en-us/library/ms175089%28v=sql.100%29.aspx)。

尽管您试图插入一个字符串，但操作被“拦截”，空字符串被 NULL 替换，插入成功。

如果您在表上定义此触发器，则可以像以前一样继续插入空字符串，无需进行其他更改。

**编辑：**正如 Martin Smith 指出的那样，这实际上是与 0 的比较（相当于空字符串作为 int），这意味着您将无法在此表中存储 0。我把这个答案留在这里，以防你的情况可以接受——或者重新做你的所有查询！

```
CREATE TRIGGER EmptyStringTrigger
ON [SAMPLE]
INSTEAD OF INSERT
AS
  BEGIN
      INSERT INTO [SAMPLE](ID)
      SELECT CASE
               WHEN ID = '' THEN NULL
               ELSE ID
             END
      FROM   inserted
  END 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!3/a8ec9/2)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T08:15:16.893

另一种选择

```
insert into SAMPLE (ID) values (DEFAULT) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T05:18:38.170

您不能将“字符串”插入 int 列。甲骨文一定只是为您处理。

如果这是您需要的，请尝试插入 NULL 。

```
insert into SAMPLE (ID) values (NULL); 
```

# css - 为

> ID：13189689
> 
> 赞同：5
> 
> 时间：2012-11-02T05:15:36.617
> 
> 标签：css, ruby-on-rails, ruby, ruby-on-rails-3.2

我有一个这种 Railscast [http://railscasts.com/episodes/196-nested-model-form-revised?view=asciicast风格的嵌套模型表单](http://railscasts.com/episodes/196-nested-model-form-revised?view=asciicast)

我需要给每个标签一个唯一的 ID。目前，生成的每个字段都有一个唯一的 ID 和名称，由帮助方法给出，该方法为每个关联记录分配一个唯一的 ID。所以这被照顾了。但是，此表单具有未分配 ID 的“fieldset”标签。出于 jQuery 操作目的，我需要每个字段集的唯一 ID。

具体来说，如何为“活动”记录生成的每个字段集提供唯一的 CSS 标记 ID？下面发布的是我的表单是如何创建的。谢谢

**_form.html.erb**

```
<%= form_for(@trip) do |f| %>

<%= f.fields_for :days do |builder| %>
  <%= render 'day_fields', f: builder %>
<% end %>
<%= link_to_add_fields "Add Day", f, :days %> 
```

**_day_fields.html.erb 部分**

```
<fieldset>
  <%= f.label :summary, "Day Summary" %><br />
  <%= f.text_area :summary, :rows => 1 %><br />
    <%= link_to "remove", '#', class: "remove_fields" %>

  <%= f.fields_for :activities do |builder| %>
    <%= render 'activity_fields', f: builder %>
  <% end %>
  <%= link_to_add_fields "Add Activity", f, :activities %>
</fieldset> 
```

**_activity_fields.html.erb**

```
<fieldset>
  <%= f.label :title, "Activity" %><br />
  <%= f.text_field :title, :rows => 1 %><br />
  <%= f.hidden_field :_destroy %>
  <%= link_to "remove", '#', class: "remove_fields" %>
</fieldset> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-11T12:00:01.440

如果您使用的是 ryanb nested_form gem ：

改为使用`f.index`。并确保在您的部分中传递每个不同的 form_builder。

例如，如果你这样做

```
<%= main_form.fields_for :nested1_items do |nested1_form| %>
    <%= render partial 'main/nested1_fields', nested1_form: nested1_form %>
<% end %> 
```

*_nested1_fields*

```
<fieldset id="nested1-<%= nested1_form.index %>-items"> 
```

请参阅我[在这个问题中](https://stackoverflow.com/questions/15782006/rails-nested-form-assign-unique-id-to-generated-field/26864291#26864291)的回答。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:18:52.000

为什么不只使用`f.object`传入的两个部分？

```
<% fieldset_id = "#{f.object.class.underscore}_#{f.object.id}" %>
<fieldset id='<%= fieldset_id %>'>
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T06:58:31.520

我有一个类似的问题，我使用以秒为单位的时间来解决它，并将它传递到我需要的每个地方。

例如：

在**控制器中**

```
def something
  # First idea
  @dynid = Time.now.to_i
  ...
  # Second idea: store it in the session
  session[:dynid] = Time.now.to_i
  ...
end 
```

在你**看来**

```
<fieldset id="#{@dynid}">
<!-- or in case @dynid is out of reach, then use the session[:dynid] -->
<fieldset id="#{session[:dynid]}"> 
```

`session[:dynid}`即使使用 ajax 呈现的代码，它仍然有效。

我希望这可以帮助你。

# android - 如何在opencv android中导入IplImage类？

> ID：13189691
> 
> 赞同：2
> 
> 时间：2012-11-02T05:15:43.533
> 
> 标签：android, opencv, iplimage

如何在opencv android中导入和使用IplImage类？或者它只支持 javacv ??

我尝试通过以下方式声明新 val

```
IplImage image = IplImage.create( bm.getWidth(), bm.getHeight(), IPL_DEPTH_8U, 4); 
```

eclipse 显示 IplImage 无法解析为类型。

我尝试了很多方法来导入，但我找不到解决方案...

谁能帮忙？？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T04:21:27.340

IplImage 是 JavaCV 的一个类，它映射到一个 mat 或 senCV 类。

我认为您必须查看 JavaCV 示例并尝试使用 OpenCV for Android 复制它们，这几乎行不通。您最好查看 C++ 中的 OpenCV 示例并尝试自己使用 Android 库来实现它们。

# c# - 如何在 xaml 文本块或富文本框中附加文本？

> ID：13189693
> 
> 赞同：1
> 
> 时间：2012-11-02T05:15:52.097
> 
> 标签：c#, windows-8

我正在 Windows 8 Windows Metro Style App 中创建一个聊天应用程序。我需要将对话附加到 a`richtextblock`或`textblock`XAML 中。有人能告诉我这个代码块的等价物吗？

```
public void AppendConversation(string str)
{
    conversation.Append(str);
    rtbConversation.Text = conversation.ToString();
    rtbConversation.Focus();
    rtbConversation.SelectionStart = rtbConversation.Text.Length - 1;
    rtbConversation.ScrollToCaret();
    rtbSendMessage.Focus();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T06:24:43.840

**由于 WPF 使用`System.Windows.Controls`而不是`System.Windows.Forms`，我们必须考虑以下问题**

1. `System.Windows.Controls.RichTextBox`没有用于`Text`设置其值的属性，我们可以设置其值创建一个新类，`TextRange`因为控件取决于`TextPointer`可以使用定义的`TextRange`

```
string _Text = ""
new TextRange(
  rtbConversation.Document.ContentStart,
  rtbConversation.Document.ContentEnd).Text = _Text; 
```

* * *

2\. 中的选择`System.Windows.Controls.RichTextBox`不取决于`int`它们是否由 持有`TextPointer`。所以，我们不能说

```
rtbConversation.SelectionStart = rtbConversation.Text.Length - 1; 
```

但我们可以说

```
int TextLength = new TextRange(
  rtbConversation.Document.ContentStart,
  rtbConversation.Document.ContentEnd).Text.Length;
TextPointer tr = rtbConversation.Document.ContentStart.GetPositionAtOffset(
  TextLength - 1, LogicalDirection.Forward);
rtbConversation.Selection.Select(tr, tr); 
```

这将与`rtbConversation.SelectionStart = rtbConversation.Text.Length - 1;`

**备注**：您始终可以使用`RichTextBox.Selection.Start`
**通知**在 WPF 中检索选择的开头：`RichTextBox.Selection.Start`输出名称类`TextPointer`而不是名称结构`int`

* * *

3\. 最后，`System.Windows.Controls.RichTextBox`没有 的定义`ScrollToCaret();`。在这种情况下，我们可能会使用以下关于您的控制权的空白之一`rtbConversation`

```
rtbConversation.ScrollToEnd();
rtbConversation.ScrollToHome();
rtbConversation.ScrollToHorizontalOffset(double offset);
rtbConversation.ScrollToVerticalOffset(double offset); 
```

* * *

所以，你的 void 在 WPF 中应该是这样的

**例子**

```
public void AppendConversation(string str)
{   
    conversation.Append(str) // Sorry, I was unable to detect the type of 'conversation'
    new TextRange(rtbConversation.Document.ContentStart,
                  rtbConversation.Document.ContentEnd).Text =
                    conversation.ToString();
    rtbConversation.Focus();
    int TextLength = new TextRange(rtbConversation.Document.ContentStart,
                                   rtbConversation.Document.ContentEnd).Text.Length;
    TextPointer tr = rtbConversation.Document.ContentStart.GetPositionAtOffset(
        TextLength - 1, LogicalDirection.Forward);
    rtbConversation.Selection.Select(tr, tr);
    rtbConversation.ScrollToEnd();
    rtbSendMessage.Focus();
} 
```

谢谢，
我希望你觉得这有帮助:)

# javascript - 将样式属性添加到警报框

> ID：13189695
> 
> 赞同：-1
> 
> 时间：2012-11-02T05:15:56.387
> 
> 标签：javascript, alert, confirm

这是我正在尝试做的事情的快速背景。我的网站上有一个联系表，当用户点击“提交”时，我希望它这样做：

1.  用户点击提交
2.  确认框打开，要求用户同意或不同意免责声明
3.  如果同意 = 提交表格
4.  如果不同意 = 关闭确认框

这是我想知道的。我不一定要设置实际警报框的样式，因为我知道这是不可能的，我想做的是设置警报框内的文本样式；“免责声明”。我尝试只添加标题标签和粗体标签，但这些只是生成文本而不是实际样式。

这是我正在使用的代码，它只是一个非常简单的警报框脚本。如果您有更好的想法，请告诉我。

```
<SCRIPT language="JavaScript">
<!--
function go_there()
{
var where_to= confirm("DISCLAIMER TEXT WILL GO HERE");
if (where_to== true)
 {
  window.location="http://mcgehee.ace-onecomputers.com/nlphpmail.php";
 }
  else
 {

 }
}
//--> 
```

HTML：

```
<button class="button" id="submit" value="send" type="submit" name="submit" onClick="go_there()">Send</button> 
```

此外，我遇到的另一个问题是，它不仅关闭对话框，还继续执行脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:38:45.613

您不能设置警报或确认框的样式。您必须使用 DHTML 框。

**即兴演奏**

试试这个，我用了`jQuery Impromptu`插件[http://trentrichardson.com/Impromptu/](http://trentrichardson.com/Impromptu/)

演示：http: [//jsfiddle.net/muthkum/4h8cX/6/](http://jsfiddle.net/muthkum/4h8cX/6/)

有关完整代码，请查看[http://fiddle.jshell.net/muthkum/4h8cX/6/show/上的页面源代码](http://fiddle.jshell.net/muthkum/4h8cX/6/show/)

**使用smoke.js**

演示：http: [//jsfiddle.net/muthkum/8qXsv/3/](http://jsfiddle.net/muthkum/8qXsv/3/)

**更新：**

这是使用的完整代码`jQuery Impromptu`

你可以看到，我已经包含了`jquery-1.8.2.js`和`jquery-impromptu.4.0.min.js`。样式也包含在以下代码中。我希望这有帮助。

```
<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <title> - jsFiddle demo by muthkum</title>

  <script type='text/javascript' src='http://code.jquery.com/jquery-1.8.2.js'></script>    

      <script type='text/javascript' src="http://trentrichardson.com/Impromptu/scripts/jquery-impromptu.4.0.min.js"></script>

  <style type='text/css'>
    /*
------------------------------
    Impromptu
------------------------------
*/
.jqifade{
    position: absolute; 
    background-color: #777777; 
}
div.jqi{ 
    width: 400px; 
    font-family: Verdana, Geneva, Arial, Helvetica, sans-serif; 
    position: absolute; 
    background-color: #ffffff; 
    font-size: 11px; 
    text-align: left; 
    border: solid 1px #eeeeee;
    border-radius: 10px;
    -moz-border-radius: 10px;
    -webkit-border-radius: 10px;
    padding: 7px;
}
div.jqi .jqicontainer{ 
    font-weight: bold; 
}
div.jqi .jqiclose{ 
    position: absolute;
    top: 4px; right: -2px; 
    width: 18px; 
    cursor: default; 
    color: #bbbbbb; 
    font-weight: bold; 
}
div.jqi .jqimessage{ 
    padding: 10px; 
    line-height: 20px; 
    color: #444444; 
}
div.jqi .jqibuttons{ 
    text-align: right; 
    padding: 5px 0 5px 0; 
    border: solid 1px #eeeeee; 
    background-color: #f4f4f4;
}
div.jqi button{ 
    padding: 3px 10px; 
    margin: 0 10px; 
    background-color: #2F6073; 
    border: solid 1px #f4f4f4; 
    color: #ffffff; 
    font-weight: bold; 
    font-size: 12px; 
}
div.jqi button:hover{ 
    background-color: #728A8C;
}
div.jqi button.jqidefaultbutton{
    background-color: #BF5E26;
}
.jqiwarning .jqi .jqibuttons{ 
    background-color: #BF5E26;
}

  </style>

<script type='text/javascript'>//<![CDATA[ 

function go_there(){

    $.prompt('<b>DISCLAIMER</b> <span style="font-weight:normal">TEXT WILL GO HERE</span>',{
       buttons: { Ok: true, Cancel: false}, 
       callback: function(e,v,m,f){
          if(v){
             window.location="http://mcgehee.ace-onecomputers.com/nlphpmail.php";
          }else{

          }
       }
   });

}

//]]>  

</script>

</head>
<body>
  <button class="button" id="submit" value="send" type="submit" name="submit" onClick="go_there()">Send</button>

</body>

</html>

​ 
```

# android - 在contactscontract action_edit之后没有调用onactivityforresult

> ID：13189699
> 
> 赞同：0
> 
> 时间：2012-11-02T05:16:13.703
> 
> 标签：android, contactscontract, start-activity

我有一个显示所有聚合联系人的 ListActivity。当用户单击一个时，我的代码调用 startActivityForResult。所有这些都可以正常工作。当用户完成编辑时，我希望我的 ListActivity 再次显示。相反，会显示“人员”活动。同样，我的 onActivityResult 函数永远不会被调用。

这是处理点击的代码：

```
 @Override
  public void onItemClick (AdapterView<?> parent, View view, int position, long id) 
  {
    Cursor cur = ((SimpleCursorAdapter)parent.getAdapter()).getCursor();
    cur.moveToPosition (position);
    String key = cur.getString (2);  // "2" is the col containing the LOOKUP_KEY
    System.out.println ("clicked " + key);

    // make intent to edit contact
    Intent intent = new Intent (Intent.ACTION_EDIT);
    intent.setData (Uri.parse (ContactsContract.Contacts.CONTENT_LOOKUP_URI + "/" + key));
    startActivityForResult (intent, 2);
  } 
```

而且我还有一个 onActivityResult 函数：

```
 @Override
  protected void onActivityResult (int requestCode, int resultCode, Intent data)
  {
    System.out.println ("request " + requestCode + ", result " + resultCode);
  } 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T21:25:45.160

我为此向android提交了一个错误。有人看着它并回答说有一个未记录的解决方法。从错误报告中：

> 未记录的解决方法是调用 putExtra("finishActivityOnSaveCompleted", true); 在 ACTION_EDIT 意图上。
> 但是，由于这是无证的，我不知道哪个 Android 版本会使用它。

我试过了，它适用于我正在使用的 Android 版本：4.1.2。有关详细信息，请参阅问题 39262。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:33:12.027

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // Check which request we're responding to
    if (requestCode == 2) {
        // Make sure the request was successful
        if (resultCode == RESULT_OK) {
            // The user picked a contact.
            // The Intent's data Uri identifies which contact was selected.

            // Do something with the contact here (bigger example below)
        }
    }
} 
```

> 将您的 onActivity 结果替换为此。在他们将工作后获取请求代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T05:21:40.160

添加

```
super.onActivityResult(requestCode, resultCode, data); 
```

在 OnActivtyResult() 中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T05:46:51.740

确保您从活动中调用 startActivityForResult，然后只会调用您的 onActivityResult。例如，如果您在片段中有类似的代码，则永远不会调用 onActivityResult。

# ios - 无法使用 glGenFramebuffers 生成帧缓冲区

> ID：13189700
> 
> 赞同：1
> 
> 时间：2012-11-02T05:16:16.973
> 
> 标签：ios, xcode, opengl-es, framebuffer

glGenFramebuffers 不分配帧缓冲区对象！我无法让这个小程序工作。

编码：

```
/* ----- AppDelegate.h ----- */
#import <UIKit/UIKit.h>

#import "GLView.h"

@interface AppDelegate : NSObject <UIApplicationDelegate>{
@private
    UIWindow *window;
    GLView *view;
}

@end 
```

* * *

```
/* ----- AppDelegate.h ----- */

#import "AppDelegate.h"

@implementation AppDelegate

- (void)dealloc
{
    [view release];
    [window release];
    [super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    CGRect frame = [[UIScreen mainScreen] bounds];

    window = [[UIWindow alloc] initWithFrame:frame];
    view = [[GLView alloc] initWithFrame:frame];

    [window addSubview:view];
    [window makeKeyAndVisible];
    return YES;
}

@end 
```

* * *

```
/* ----- GLView.h ----- */

#import <UIKit/UIKit.h>
#import <QuartzCore/QuartzCore.h>
#import <OpenGLES/EAGL.h>
#import <OpenGLES/ES2/gl.h>
#import <OpenGLES/ES2/glext.h>

@interface GLView : UIView{
@private
    EAGLContext* context;
    GLuint color_render_buffer;
    GLuint depth_render_buffer;
    GLuint frame_buffer;
}

-(void)render:(CADisplayLink*)displayLink;

@end 
```

* * *

```
/* ----- GLView.mm ----- */

#import "GLView.h"

@implementation GLView

- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        CAEAGLLayer* eaglLayer = (CAEAGLLayer*)self.layer;
        eaglLayer.opaque = YES;

        context = [[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];
        if(!context && ![EAGLContext setCurrentContext:context]){
            [self release];
            return nil;
        }

        int width = (int)frame.size.width;
        int height = (int)frame.size.height;

        glGenFramebuffers(1, &frame_buffer);
        glBindFramebuffer(GL_FRAMEBUFFER, frame_buffer);
        if(glIsFramebuffer(frame_buffer) == GL_FALSE){
            //NSLog(@"%i", frame_buffer);
            NSLog(@"frame_buffer is GL_FALSE!");
        }

        glGenRenderbuffers(1, &color_render_buffer);
        glBindRenderbuffer(GL_RENDERBUFFER, color_render_buffer);
        [context renderbufferStorage:GL_RENDERBUFFER fromDrawable:eaglLayer];

        if(glIsRenderbuffer(color_render_buffer) == GL_FALSE){
            NSLog(@"%i", color_render_buffer);
            NSLog(@"color_render_buffer is GL_FALSE");
        }

        glGenRenderbuffers(1, &depth_render_buffer);
        glBindRenderbuffer(GL_RENDERBUFFER, depth_render_buffer);
        glRenderbufferStorage(GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, width, height);

        if(glIsRenderbuffer(depth_render_buffer) == GL_FALSE){
            NSLog(@"depth_render_buffer is GL_FALSE");
        }

        glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, color_render_buffer);
        glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, depth_render_buffer);

        if(glCheckFramebufferStatus(GL_FRAMEBUFFER) != GL_FRAMEBUFFER_COMPLETE){
#ifdef DEBUG_LOG
            NSLog(@"Framebuffer is not complete!");
            exit(1);
#endif
        }

        [[CADisplayLink displayLinkWithTarget:self selector:@selector(render:)] addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
    }
    return self;
}

+(Class)layerClass{
    return [CAEAGLLayer class];
}

-(void)dealloc{
    if([EAGLContext currentContext] == context){
        [EAGLContext setCurrentContext:nil];
    }

    [context release];
    [super dealloc];
}

-(void)render:(CADisplayLink*)displayLink{
    /* Rendering */

    [context presentRenderbuffer:GL_RENDERBUFFER];
}

@end 
```

我总是得到“frame_buffer is GL_FALSE！” 打印到控制台... frame_buffer 始终为 0（窗口系统默认帧缓冲区） 是否需要将任何设置添加到 plist？还是我错过了什么？

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T12:39:41.897

你永远不会调用 setCurrentContext: when context != nil。
改变：

```
if(!context && ![EAGLContext setCurrentContext:context]){ 
```

至：

```
if(!context || ![EAGLContext setCurrentContext:context]){ 
```

# sql - SQL Server，如何在列标题中显示（正方形）^2？

> ID：13189706
> 
> 赞同：0
> 
> 时间：2012-11-02T05:16:42.167
> 
> 标签：sql, sql-server, sql-server-2008, tsql

请指导我如何在列标题中显示 m2（m 和 2 作为 m 顶部的正方形小）？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T05:17:41.580

用于`[]`将名称括起来：

```
select  1 as [^2] 
```

或者，如果您的意思是小 2，请使用 Unicode `00B2`：

```
select  1 as [m²] 
```

`00B2`您可以使用 keystroke输入 Unicode `Alt+0178`。`alt`键入时按住`0178`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:29:07.973

根据 SQL Server 标准：

列名应该只包含字母和数字。不应使用特殊字符、下划线或空格。

# php - PHP：从属性文件初始化常量

> ID：13189707
> 
> 赞同：1
> 
> 时间：2012-11-02T05:16:48.883
> 
> 标签：php, constants

让我把满足的要求放在第一位

一个 PHP 网关和一组使用许多常量的请求处理程序，这些常量目前我在`constants.php`with中定义`define('conts','value');`

我可以在属性文件中定义这个常量，比如

```
const1 =val1
const2 = val2
const3 = val3 
```

在一些外部文件中说`gateway.properties`并`define()`在运行时将其加载到。这可以是一次性的操作，以便 php 创建的尽可能多的线程可以进一步访问这个常量，而无需再次重新加载它？

我不知道这是否真的可能，我想要一个专家建议。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:18:40.957

我会通过将结果对象填充到[memcached](http://memcached.org/)中来处理这个问题。

这显然有一些开销。您将需要权衡它是否对您的情况有意义。对于 3 个变量，它根本没有意义。对于 300,000，也许它会。测试一下看看。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:25:43.407

在 PHP 中，最好使用 .ini 文件并使用

[http://php.net/manual/en/function.parse-ini-file.php](http://php.net/manual/en/function.parse-ini-file.php) 或 php.net/manual/en/function.parse-ini-string.php 如果您已经将文件读取为字符串。

您可以使用 apc 将其缓存在内存中，如果尚未缓存则回退到读取文件，然后缓存它。

```
<?php
$ini = apc_fetch('configuration');
if (!$ini) {
    $ini = file_get_contents('path/to/ini.ini');
    if ($ini) {
        apc_store('configuration',$ini);
    }
}
$config = parse_ini_string($ini); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T05:18:13.613

您可以阅读每一行，解析出 = 并在 for 循环中定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T05:29:24.837

最简单的方法是将您的值存储在一个`.ini`文件中，然后使用`parse_ini_file()`. ini 文件如下所示：

```
var1 = 'blah blah blah'
var2 = 'more blah' 
```

PHP 非常快地读取这些文件。我建议，不要将所有值都转换为常量，而是将从 .ini 文件中获得的关联数组存储在单个全局变量中。让工作，同样的知名度。

如果你真的设置缓存，你可以使用 APC 缓存。它会节省几毫秒，但除非您谈论的是一组相当大的值，否则它不会有什么不同。`define()`如果您坚持将它们全部转换为常量，您仍然必须调用每个值。保存单个全局关联数组仍然要快得多。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-10-14T20:42:00.800

考虑使用全局易于访问的静态类。
您可以创建一个只有公共静态成员的类，并且 CLASS::init() 调用可选配置文件来替换变量。
如果缺少该值，它将保持默认值。
因此，您可以使用 CLASS:$STATIC_VAR 从任何地方访问配置

初始化函数：

```
 $vars = parse_ini_file(dirname(__FILE__) .'/'. $filename,true,INI_SCANNER_TYPED);
            if ($vars)
            {
                foreach ($vars as $key => $val) 
                {
                        if (property_exists(get_called_class(),$key)) self::$$key=$val;
                }
            } 
```

# android - Android 谷歌地图有超过一千个标记？

> ID：13189709
> 
> 赞同：1
> 
> 时间：2012-11-02T05:16:59.500
> 
> 标签：android, google-maps, android-maps

我的应用程序中有一个地图视图。而且我必须在地图上显示超过 1,000 个叠加层。我有一个包含这些地方的列表。那么，我是否必须通过迭代列表中的项目来创建 1,000 个叠加对象？谁能给我一个有效的方法来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:53:20.480

Sanket 的做法是在添加每个点后填充点，这往往会滞后。一个更有效的方法可以这样做：

发生的事情是每次添加 GeoPoint 时都会填充 MapView。尝试将此添加到您的代码中：

在您遍历 GeoPoints 后，放置此代码

```
itemizedOverlay.populateNow(); 
```

并将您的 itemizedOverlay 更改为如下所示：

```
public void addOverlay(OverlayItem overlay) {
m_overlays.add(overlay);
    }
public void populateNow()
{
populate(); 
}

@Override
protected OverlayItem createItem(int i) {
return m_overlays.get(i);
}

@Override
public int size() {
return m_overlays.size();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:23:43.100

为此，您不必制作 1000 个叠加层。只需在 itemizedoverlay 中添加叠加层，然后在 mapoverlay 中添加此 itemizedoverlay 并在添加新的 itemizedoverlay 之前填充叠加层。

```
try
         {
         point = new GeoPoint((int) (Double.parseDouble(list.get(i).getLatitude()) * 1e6),(int) (Double.parseDouble(list.get(i).getLongitude()) * 1e6));
         overlayitem = new OverlayItem(point, list.get(i).getLocationName()+"_@_"+list.get(i).getLatitude()+"_@_"+list.get(i).getLongitude()+"_@_yes", list.get(i).getAddress());
         itemizedoverlay.addOverlay(overlayitem);
         itemizedoverlay.populateOverlay();
                 mapOverlays.add(itemizedoverlay);
         }
         catch (Exception e)
         {
            Log.v("log",""+e.toString());
            e.printStackTrace();
         } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-28T07:29:32.537

您可以只显示可见区域标记和不可见区域标记隐藏在下面的代码中；

```
mMap.setOnCameraChangeListener(new GoogleMap.OnCameraChangeListener() {
@Override
    public void onCameraChange(CameraPosition cameraPosition) {
         LatLngBounds bounds = mMap.getProjection().getVisibleRegion().latLngBounds;

         for (Marker marker : markerArrayList) {
             if (bounds.contains(marker.getPosition())) {
                   marker.setVisible(true);
             } else {
                   marker.setVisible(false);
             }
        }
      }
   }); 
```

# java - 带有jTable的重音无关正则表达式

> ID：13189712
> 
> 赞同：0
> 
> 时间：2012-11-02T05:17:22.690
> 
> 标签：java, regex, filtering

我有一个 Java 正则表达式，`RowFilter`它可以作为表格中显示的信息的过滤器。

我的想法是我有一个包含信息的表格，表格下方是一个文本字段，我在其中编写一些内容并过滤行，仅当该行至少有一个单元格时，根据输入的文本进行正则表达式匹配文本域。

我有一个扩展`AbstractTableModel`了我用于表格的模型的类。假设该类被调用`ClientesTableModel`。

然后我在文本字段中放置一个事件`KeyReleased`，它执行以下操作：

```
private void EventFiredInTextField() {
    RowFilter<ClientesTableModel, Object> rf;
    try {
        rf = RowFilter.regexFilter("(?i)" + jTextFieldFiltro.getText());
    } catch (PatternSyntaxException ex) {
        return;
    }
    sorter.setRowFilter(rf);
} 
```

过滤器已经不区分大小写了。有什么办法让它对口音不敏感吗？

已经尝试了下面的内容，但是如果单元格的字符串带有重音符号，则它不起作用。

```
private void Filtrar() {
    RowFilter<ClientesTableModel, Object> rf;
    try {
        rf = RowFilter.regexFilter("(?i)" + Normalizer.normalize(jTextFieldFiltro.getText(), Normalizer.Form.NFD).replaceAll("\\p{InCombiningDiacriticalMarks}+", ""));
    } catch (PatternSyntaxException ex) {
        return;
    }
    sorter.setRowFilter(rf);
} 
```

并且还尝试了在 SO 和其他网站上出现的至少 20 多种解决方案，但没有运气。他们似乎都没有和桌子一起工作......

编辑1：

尝试了更多：

```
private void Filtrar() {
    RowFilter<ClientesTableModel, Object> rf;
    try {
        Map<String, String> replacements = new HashMap();
        replacements.put("a", "[aá]");
        replacements.put("e", "[eé]");
        replacements.put("i", "[ií]");
        replacements.put("o", "[oó]");
        replacements.put("u", "[uú]");
        String regex = "";
        for (char c : jTextFieldFiltro.getText().toCharArray()) {
            String replacement = replacements.get(Normalizer.normalize(Character.toString(Character.toLowerCase(c)), Normalizer.Form.NFD).replaceAll("\\p{InCombiningDiacriticalMarks}+", ""));
            if (replacement == null) {
                regex += c;
            } else {
                regex += replacement;
            }
        }
        rf = RowFilter.regexFilter("(?i)" + regex);
    } catch (PatternSyntaxException ex) {
        return;
    }
    sorter.setRowFilter(rf);
} 
```

它只是在应用正则表达式文本之前对其进行了一些更改，具有以下想法：

如果过滤器文本是`edit`，它将被转换为`[eé]d[ií]t`，并且它将是一个正则表达式，与中美洲字母的重音无关。

但是，我遇到了一个大问题。我`(?i)`在正则表达式中有标志，所以它应该不区分大小写。但是，如果一个单元格具有例如 text `edÍt`，`í`and`Í`没有捕获`(?i)`标志，则它们不会被视为应有的，不区分大小写......

一个简单的解决方案是更改`replacements.put("i", "[ií]");`，`replacements.put("i", "[iíÍ]");`但是，嘿......那么放置`(?i)`标志有什么意义呢？

无论如何，这个解决方案不是那么优雅，并且对于其他重音类型（如`¨`）将失败。想法？

并且`sorter`变量是类型`TableRowSorter<ClientesTableModel>`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T04:10:42.557

SO 不允许超过 30000 个字符的响应，所以，我将把它分成三个答案。

第 1/3 部分：

经过4个多小时的尝试和错误，找到了一种方法。不是那么性感，但它很有效，并且它是使用正则表达式过滤 jTables 的真正的口音无关解决方案。

我想修改JDK版本7更新7的一些源文件。它们是`DefaultRowSorter`和`TableRowSorter`.

我添加了一个名为`RowFilterSpecialFilter`简化编码的额外类。

修改后的`DefaultRowSorter`和`TableRowSorter`类分别称为`DefaultRowSorterSpecialFilter`和`TableRowSorterSpecialFilter`。

`DefaultRowSorterSpecialFilter`并且`RowFilterSpecialFilter`在一个名为`javax.swing`.

`TableRowSorterSpecialFilter`位于一个名为`javax.swing.table`.

`TableRowSorterSpecialFilter`基本相同`TableRowSorter`。唯一的变化是所有出现的`TableRowSorter`where 都替换为`TableRowSorterSpecialFilter`，现在它继承自`DefaultRowSorterSpecialFilter`。修改后的文件源（`TableRowSorterSpecialFilter.java`）：

```
/*
 * Copyright (c) 2005, 2006, Oracle and/or its affiliates. All rights reserved.
 * ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 */
package javax.swing.table;

import java.text.Collator;
import java.util.*;
import javax.swing.DefaultRowSorterSpecialFilter;
import javax.swing.RowFilter;

/**
 * An implementation of
 * <code>RowSorter</code> that provides sorting and filtering using a
 * <code>TableModel</code>. The following example shows adding sorting to a
 * <code>JTable</code>:
 * <pre>
 *   TableModel myModel = createMyTableModel();
 *   JTable table = new JTable(myModel);
 *   table.setRowSorter(new TableRowSorterSpecialFilter(myModel));
 * </pre> This will do all the wiring such that when the user does the
 * appropriate gesture, such as clicking on the column header, the table will
 * visually sort. <p>
 * <code>JTable</code>'s row-based methods and
 * <code>JTable</code>'s selection model refer to the view and not the
 * underlying model. Therefore, it is necessary to convert between the two. For
 * example, to get the selection in terms of
 * <code>myModel</code> you need to convert the indices:
 * <pre>
 *   int[] selection = table.getSelectedRows();
 *   for (int i = 0; i &lt; selection.length; i++) {
 *     selection[i] = table.convertRowIndexToModel(selection[i]);
 *   }
 * </pre> Similarly to select a row in
 * <code>JTable</code> based on a coordinate from the underlying model do the
 * inverse:
 * <pre>
 *   table.setRowSelectionInterval(table.convertRowIndexToView(row),
 *                                 table.convertRowIndexToView(row));
 * </pre> <p> The previous example assumes you have not enabled filtering. If
 * you have enabled filtering
 * <code>convertRowIndexToView</code> will return -1 for locations that are not
 * visible in the view. <p>
 * <code>TableRowSorterSpecialFilter</code> uses
 * <code>Comparator</code>s for doing comparisons. The following defines how a
 * <code>Comparator</code> is chosen for a column: <ol> <li>If a
 * <code>Comparator</code> has been specified for the column by the
 * <code>setComparator</code> method, use it. <li>If the column class as
 * returned by
 * <code>getColumnClass</code> is
 * <code>String</code>, use the
 * <code>Comparator</code> returned by
 * <code>Collator.getInstance()</code>. <li>If the column class implements
 * <code>Comparable</code>, use a
 * <code>Comparator</code> that invokes the
 * <code>compareTo</code> method. <li>If a
 * <code>TableStringConverter</code> has been specified, use it to convert the
 * values to
 * <code>String</code>s and then use the
 * <code>Comparator</code> returned by
 * <code>Collator.getInstance()</code>. <li>Otherwise use the
 * <code>Comparator</code> returned by
 * <code>Collator.getInstance()</code> on the results from calling
 * <code>toString</code> on the objects. </ol> <p> In addition to sorting
 * <code>TableRowSorterSpecialFilter</code> provides the ability to filter. A
 * filter is specified using the
 * <code>setFilter</code> method. The following example will only show rows
 * containing the string "foo":
 * <pre>
 *   TableModel myModel = createMyTableModel();
 *   TableRowSorterSpecialFilter sorter = new TableRowSorterSpecialFilter(myModel);
 *   sorter.setRowFilter(RowFilter.regexFilter(".*foo.*"));
 *   JTable table = new JTable(myModel);
 *   table.setRowSorter(sorter);
 * </pre> <p> If the underlying model structure changes (the
 * <code>modelStructureChanged</code> method is invoked) the following are reset
 * to their default values:
 * <code>Comparator</code>s by column, current sort order, and whether each
 * column is sortable. The default sort order is natural (the same as the
 * model), and columns are sortable by default. <p>
 * <code>TableRowSorterSpecialFilter</code> has one formal type parameter: the
 * type of the model. Passing in a type that corresponds exactly to your model
 * allows you to filter based on your model without casting. Refer to the
 * documentation of
 * <code>RowFilter</code> for an example of this. <p> <b>WARNING:</b>
 * <code>DefaultTableModel</code> returns a column class of
 * <code>Object</code>. As such all comparisons will be done using
 * <code>toString</code>. This may be unnecessarily expensive. If the column
 * only contains one type of value, such as an
 * <code>Integer</code>, you should override
 * <code>getColumnClass</code> and return the appropriate
 * <code>Class</code>. This will dramatically increase the performance of this
 * class.
 *
 * @param <M> the type of the model, which must be an implementation of
 * <code>TableModel</code>
 * @see javax.swing.JTable
 * @see javax.swing.RowFilter
 * @see javax.swing.table.DefaultTableModel
 * @see java.text.Collator
 * @see java.util.Comparator
 * @since 1.6
 */
public final class TableRowSorterSpecialFilter<M extends TableModel> extends DefaultRowSorterSpecialFilter<M, Integer> {

    /**
     * Comparator that uses compareTo on the contents.
     */
    private static final Comparator COMPARABLE_COMPARATOR =
            new ComparableComparator();
    /**
     * Underlying model.
     */
    private M tableModel;
    /**
     * For toString conversions.
     */
    private TableStringConverter stringConverter;

    /**
     * Creates a
     * <code>TableRowSorterSpecialFilter</code> with an empty model.
     */
    public TableRowSorterSpecialFilter() {
        this(null);
    }

    /**
     * Creates a
     * <code>TableRowSorterSpecialFilter</code> using
     * <code>model</code> as the underlying
     * <code>TableModel</code>.
     *
     * @param model the underlying <code>TableModel</code> to use,
     * <code>null</code> is treated as an empty model
     */
    public TableRowSorterSpecialFilter(M model) {
        setModel(model);
    }

    /**
     * Sets the
     * <code>TableModel</code> to use as the underlying model for this
     * <code>TableRowSorterSpecialFilter</code>. A value of
     * <code>null</code> can be used to set an empty model.
     *
     * @param model the underlying model to use, or <code>null</code>
     */
    public void setModel(M model) {
        tableModel = model;
        setModelWrapper(new TableRowSorterModelWrapper());
    }

    /**
     * Sets the object responsible for converting values from the model to
     * strings. If non-
     * <code>null</code> this is used to convert any object values, that do not
     * have a registered
     * <code>Comparator</code>, to strings.
     *
     * @param stringConverter the object responsible for converting values from
     * the model to strings
     */
    public void setStringConverter(TableStringConverter stringConverter) {
        this.stringConverter = stringConverter;
    }

    /**
     * Returns the object responsible for converting values from the model to
     * strings.
     *
     * @return object responsible for converting values to strings.
     */
    public TableStringConverter getStringConverter() {
        return stringConverter;
    }

    /**
     * Returns the
     * <code>Comparator</code> for the specified column. If a
     * <code>Comparator</code> has not been specified using the
     * <code>setComparator</code> method a
     * <code>Comparator</code> will be returned based on the column class
     * (
     * <code>TableModel.getColumnClass</code>) of the specified column. If the
     * column class is
     * <code>String</code>,
     * <code>Collator.getInstance</code> is returned. If the column class
     * implements
     * <code>Comparable</code> a private
     * <code>Comparator</code> is returned that invokes the
     * <code>compareTo</code> method. Otherwise
     * <code>Collator.getInstance</code> is returned.
     *
     * @throws IndexOutOfBoundsException {@inheritDoc}
     */
    @Override
    public Comparator<?> getComparator(int column) {
        Comparator comparator = super.getComparator(column);
        if (comparator != null) {
            return comparator;
        }
        Class columnClass = getModel().getColumnClass(column);
        if (columnClass == String.class) {
            return Collator.getInstance();
        }
        if (Comparable.class.isAssignableFrom(columnClass)) {
            return COMPARABLE_COMPARATOR;
        }
        return Collator.getInstance();
    }

    /**
     * {@inheritDoc}
     *
     * @throws IndexOutOfBoundsException {@inheritDoc}
     */
    @Override
    protected boolean useToString(int column) {
        Comparator comparator = super.getComparator(column);
        if (comparator != null) {
            return false;
        }
        Class columnClass = getModel().getColumnClass(column);
        if (columnClass == String.class) {
            return false;
        }
        if (Comparable.class.isAssignableFrom(columnClass)) {
            return false;
        }
        return true;
    }

    /**
     * Implementation of DefaultRowSorterSpecialFilter.ModelWrapper that
     * delegates to a TableModel.
     */
    private class TableRowSorterModelWrapper extends ModelWrapper<M, Integer> {

        @Override
        public M getModel() {
            return tableModel;
        }

        @Override
        public int getColumnCount() {
            return (tableModel == null) ? 0 : tableModel.getColumnCount();
        }

        @Override
        public int getRowCount() {
            return (tableModel == null) ? 0 : tableModel.getRowCount();
        }

        @Override
        public Object getValueAt(int row, int column) {
            return tableModel.getValueAt(row, column);
        }

        @Override
        public String getStringValueAt(int row, int column) {
            TableStringConverter converter = getStringConverter();
            if (converter != null) {
                // Use the converter
                String value = converter.toString(
                        tableModel, row, column);
                if (value != null) {
                    return value;
                }
                return "";
            }

            // No converter, use getValueAt followed by toString
            Object o = getValueAt(row, column);
            if (o == null) {
                return "";
            }
            String string = o.toString();
            if (string == null) {
                return "";
            }
            return string;
        }

        @Override
        public Integer getIdentifier(int index) {
            return index;
        }
    }

    private static class ComparableComparator implements Comparator {

        @SuppressWarnings("unchecked")
        @Override
        public int compare(Object o1, Object o2) {
            return ((Comparable) o1).compareTo(o2);
        }
    }
} 
```

在 的情况下`DefaultRowSorterSpecialFilter`，它比 有更多的变化`TableRowSorterSpecialFilter`。基本上，它有一个额外的属性，`public boolean accentIndiferent`它开始于嵌套类`false`的覆盖方法已被修改为根据值返回一个没有重音符号的字符串。修改来源（）：`public String getStringValue(int index)``private class FilterEntry extends RowFilter.Entry<M, I>``accentIndiferent``DefaultRowSorterSpecialFilter.java`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T04:14:51.683

SO 不允许超过 30000 个字符的响应，所以，我将把它分成三个答案。

第 2/3 部分：

```
/*
 * Copyright (c) 2005, 2006, Oracle and/or its affiliates. All rights reserved.
 * ORACLE PROPRIETARY/CONFIDENTIAL. Use is subject to license terms.
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 *
 */
package javax.swing;

import java.text.Collator;
import java.text.Normalizer;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;

/**
 * An implementation of
 * <code>RowSorter</code> that provides sorting and filtering around a
 * grid-based data model. Beyond creating and installing a
 * <code>RowSorter</code>, you very rarely need to interact with one directly.
 * Refer to {@link javax.swing.table.TableRowSorter TableRowSorter} for a
 * concrete implementation of
 * <code>RowSorter</code> for
 * <code>JTable</code>. <p> Sorting is done based on the current
 * <code>SortKey</code>s, in order. If two objects are equal (the
 * <code>Comparator</code> for the column returns 0) the next
 * <code>SortKey</code> is used. If no
 * <code>SortKey</code>s remain or the order is
 * <code>UNSORTED</code>, then the order of the rows in the model is used. <p>
 * Sorting of each column is done by way of a
 * <code>Comparator</code> that you can specify using the
 * <code>setComparator</code> method. If a
 * <code>Comparator</code> has not been specified, the
 * <code>Comparator</code> returned by
 * <code>Collator.getInstance()</code> is used on the results of calling
 * <code>toString</code> on the underlying objects. The
 * <code>Comparator</code> is never passed
 * <code>null</code>. A
 * <code>null</code> value is treated as occuring before a non-
 * <code>null</code> value, and two
 * <code>null</code> values are considered equal. <p> If you specify a
 * <code>Comparator</code> that casts its argument to a type other than that
 * provided by the model, a
 * <code>ClassCastException</code> will be thrown when the data is sorted. <p>
 * In addition to sorting,
 * <code>DefaultRowSorterSpecialFilter</code> provides the ability to
 * filterInclude rows. Filtering is done by way of a
 * <code>RowFilter</code> that is specified using the
 * <code>setRowFilter</code> method. If no filterInclude has been specified all
 * rows are included. <p> By default, rows are in unsorted order (the same as
 * the model) and every column is sortable. The default
 * <code>Comparator</code>s are documented in the subclasses (for example, {@link
 * javax.swing.table.TableRowSorter TableRowSorter}). <p> If the underlying
 * model structure changes (the
 * <code>modelStructureChanged</code> method is invoked) the following are reset
 * to their default values:
 * <code>Comparator</code>s by column, current sort order, and whether each
 * column is sortable. To find the default
 * <code>Comparator</code>s, see the concrete implementation (for example, {@link
 * javax.swing.table.TableRowSorter TableRowSorter}). The default sort order is
 * unsorted (the same as the model), and columns are sortable by default. <p> If
 * the underlying model structure changes (the
 * <code>modelStructureChanged</code> method is invoked) the following are reset
 * to their default values:
 * <code>Comparator</code>s by column, current sort order and whether a column
 * is sortable. <p>
 * <code>DefaultRowSorterSpecialFilter</code> is an abstract class. Concrete
 * subclasses must provide access to the underlying data by invoking
 * {@code setModelWrapper}. The {@code setModelWrapper} method <b>must</b> be
 * invoked soon after the constructor is called, ideally from within the
 * subclass's constructor. Undefined behavior will result if you use a {@code
 * DefaultRowSorterSpecialFilter} without specifying a {@code ModelWrapper}. <p>
 * <code>DefaultRowSorterSpecialFilter</code> has two formal type parameters.
 * The first type parameter corresponds to the class of the model, for example
 * <code>DefaultTableModel</code>. The second type parameter corresponds to the
 * class of the identifier passed to the
 * <code>RowFilter</code>. Refer to
 * <code>TableRowSorter</code> and
 * <code>RowFilter</code> for more details on the type parameters.
 *
 * @param <M> the type of the model
 * @param <I> the type of the identifier passed to the <code>RowFilter</code>
 * @see javax.swing.table.TableRowSorter
 * @see javax.swing.table.DefaultTableModel
 * @see java.text.Collator
 * @since 1.6
 */
public abstract class DefaultRowSorterSpecialFilter<M, I> extends RowSorter<M> {

    public boolean accentIndiferent = false;
    /**
     * Whether or not we resort on TableModelEvent.UPDATEs.
     */
    private boolean sortsOnUpdates;
    /**
     * View (JTable) -> model.
     */
    private Row[] viewToModel;
    /**
     * model -> view (JTable)
     */
    private int[] modelToView;
    /**
     * Comparators specified by column.
     */
    private Comparator[] comparators;
    /**
     * Whether or not the specified column is sortable, by column.
     */
    private boolean[] isSortable;
    /**
     * Cached SortKeys for the current sort.
     */
    private SortKey[] cachedSortKeys;
    /**
     * Cached comparators for the current sort
     */
    private Comparator[] sortComparators;
    /**
     * Developer supplied Filter.
     */
    private RowFilter<? super M, ? super I> filter;
    /**
     * Value passed to the filterInclude. The same instance is passed to the
     * filterInclude for different rows.
     */
    private FilterEntry filterEntry;
    /**
     * The sort keys.
     */
    private List<SortKey> sortKeys;
    /**
     * Whether or not to use getStringValueAt. This is indexed by column.
     */
    private boolean[] useToString;
    /**
     * Indicates the contents are sorted. This is used if getSortsOnUpdates is
     * false and an update event is received.
     */
    private boolean sorted;
    /**
     * Maximum number of sort keys.
     */
    private int maxSortKeys;
    /**
     * Provides access to the data we're sorting/filtering.
     */
    private ModelWrapper<M, I> modelWrapper;
    /**
     * Size of the model. This is used to enforce error checking within the
     * table changed notification methods (such as rowsInserted).
     */
    private int modelRowCount;

    /**
     * Creates an empty
     * <code>DefaultRowSorterSpecialFilter</code>.
     */
    public DefaultRowSorterSpecialFilter() {
        sortKeys = Collections.emptyList();
        maxSortKeys = 3;
    }

    /**
     * Sets the model wrapper providing the data that is being sorted and
     * filtered.
     *
     * @param modelWrapper the model wrapper responsible for providing the data
     * that gets sorted and filtered
     * @throws IllegalArgumentException if {@code modelWrapper} is {@code null}
     */
    protected final void setModelWrapper(ModelWrapper<M, I> modelWrapper) {
        if (modelWrapper == null) {
            throw new IllegalArgumentException(
                    "modelWrapper most be non-null");
        }
        ModelWrapper<M, I> last = this.modelWrapper;
        this.modelWrapper = modelWrapper;
        if (last != null) {
            modelStructureChanged();
        } else {
            // If last is null, we're in the constructor. If we're in
            // the constructor we don't want to call to overridable methods.
            modelRowCount = getModelWrapper().getRowCount();
        }
    }

    /**
     * Returns the model wrapper providing the data that is being sorted and
     * filtered.
     *
     * @return the model wrapper responsible for providing the data that gets
     * sorted and filtered
     */
    protected final ModelWrapper<M, I> getModelWrapper() {
        return modelWrapper;
    }

    /**
     * Returns the underlying model.
     *
     * @return the underlying model
     */
    @Override
    public final M getModel() {
        return getModelWrapper().getModel();
    }

    /**
     * Sets whether or not the specified column is sortable. The specified value
     * is only checked when
     * <code>toggleSortOrder</code> is invoked. It is still possible to sort on
     * a column that has been marked as unsortable by directly setting the sort
     * keys. The default is true.
     *
     * @param column the column to enable or disable sorting on, in terms of the
     * underlying model
     * @param sortable whether or not the specified column is sortable
     * @throws IndexOutOfBoundsException if <code>column</code> is outside the
     * range of the model
     * @see #toggleSortOrder
     * @see #setSortKeys
     */
    public void setSortable(int column, boolean sortable) {
        checkColumn(column);
        if (isSortable == null) {
            isSortable = new boolean[getModelWrapper().getColumnCount()];
            for (int i = isSortable.length - 1; i >= 0; i--) {
                isSortable[i] = true;
            }
        }
        isSortable[column] = sortable;
    }

    /**
     * Returns true if the specified column is sortable; otherwise, false.
     *
     * @param column the column to check sorting for, in terms of the underlying
     * model
     * @return true if the column is sortable
     * @throws IndexOutOfBoundsException if column is outside the range of the
     * underlying model
     */
    public boolean isSortable(int column) {
        checkColumn(column);
        return (isSortable == null) ? true : isSortable[column];
    }

    /**
     * Sets the sort keys. This creates a copy of the supplied {@code List};
     * subsequent changes to the supplied {@code List} do not effect this
     * {@code DefaultRowSorterSpecialFilter}. If the sort keys have changed this
     * triggers a sort.
     *
     * @param sortKeys the new <code>SortKeys</code>; <code>null</code> is a
     * shorthand for specifying an empty list, indicating that the view should
     * be unsorted
     * @throws IllegalArgumentException if any of the values in
     * <code>sortKeys</code> are null or have a column index outside the range
     * of the model
     */
    @Override
    public void setSortKeys(List<? extends SortKey> sortKeys) {
        List<SortKey> old = this.sortKeys;
        if (sortKeys != null && sortKeys.size() > 0) {
            int max = getModelWrapper().getColumnCount();
            for (SortKey key : sortKeys) {
                if (key == null || key.getColumn() < 0
                        || key.getColumn() >= max) {
                    throw new IllegalArgumentException("Invalid SortKey");
                }
            }
            this.sortKeys = Collections.unmodifiableList(
                    new ArrayList<>(sortKeys));
        } else {
            this.sortKeys = Collections.emptyList();
        }
        if (!this.sortKeys.equals(old)) {
            fireSortOrderChanged();
            if (viewToModel == null) {
                // Currently unsorted, use sort so that internal fields
                // are correctly set.
                sort();
            } else {
                sortExistingData();
            }
        }
    }

    /**
     * Returns the current sort keys. This returns an unmodifiable
     * {@code non-null List}. If you need to change the sort keys, make a copy
     * of the returned {@code List}, mutate the copy and invoke
     * {@code setSortKeys} with the new list.
     *
     * @return the current sort order
     */
    @Override
    public List<? extends SortKey> getSortKeys() {
        return sortKeys;
    }

    /**
     * Sets the maximum number of sort keys. The number of sort keys determines
     * how equal values are resolved when sorting. For example, assume a table
     * row sorter is created and
     * <code>setMaxSortKeys(2)</code> is invoked on it. The user clicks the
     * header for column 1, causing the table rows to be sorted based on the
     * items in column 1\. Next, the user clicks the header for column 2, causing
     * the table to be sorted based on the items in column 2; if any items in
     * column 2 are equal, then those particular rows are ordered based on the
     * items in column 1\. In this case, we say that the rows are primarily
     * sorted on column 2, and secondarily on column 1\. If the user then clicks
     * the header for column 3, then the items are primarily sorted on column 3
     * and secondarily sorted on column 2\. Because the maximum number of sort
     * keys has been set to 2 with
     * <code>setMaxSortKeys</code>, column 1 no longer has an effect on the
     * order. <p> The maximum number of sort keys is enforced by
     * <code>toggleSortOrder</code>. You can specify more sort keys by invoking
     * <code>setSortKeys</code> directly and they will all be honored. However
     * if
     * <code>toggleSortOrder</code> is subsequently invoked the maximum number
     * of sort keys will be enforced. The default value is 3.
     *
     * @param max the maximum number of sort keys
     * @throws IllegalArgumentException if <code>max</code> &lt; 1
     */
    public void setMaxSortKeys(int max) {
        if (max < 1) {
            throw new IllegalArgumentException("Invalid max");
        }
        maxSortKeys = max;
    }

    /**
     * Returns the maximum number of sort keys.
     *
     * @return the maximum number of sort keys
     */
    public int getMaxSortKeys() {
        return maxSortKeys;
    }

    /**
     * If true, specifies that a sort should happen when the underlying model is
     * updated (
     * <code>rowsUpdated</code> is invoked). For example, if this is true and
     * the user edits an entry the location of that item in the view may change.
     * The default is false.
     *
     * @param sortsOnUpdates whether or not to sort on update events
     */
    public void setSortsOnUpdates(boolean sortsOnUpdates) {
        this.sortsOnUpdates = sortsOnUpdates;
    }

    /**
     * Returns true if a sort should happen when the underlying model is
     * updated; otherwise, returns false.
     *
     * @return whether or not to sort when the model is updated
     */
    public boolean getSortsOnUpdates() {
        return sortsOnUpdates;
    }

    /**
     * Sets the filterInclude that determines which rows, if any, should be
     * hidden from the view. The filterInclude is applied before sorting. A
     * value of
     * <code>null</code> indicates all values from the model should be included.
     * <p>
     * <code>RowFilter</code>'s
     * <code>include</code> method is passed an
     * <code>Entry</code> that wraps the underlying model. The number of columns
     * in the
     * <code>Entry</code> corresponds to the number of columns in the
     * <code>ModelWrapper</code>. The identifier comes from the
     * <code>ModelWrapper</code> as well. <p> This method triggers a sort.
     *
     * @param filterInclude the filterInclude used to determine what entries
     * should be included
     */
    public void setRowFilter(RowFilter<? super M, ? super I> filter) {
        this.filter = filter;
        sort();
    }

    /**
     * Returns the filterInclude that determines which rows, if any, should be
     * hidden from view.
     *
     * @return the filterInclude
     */
    public RowFilter<? super M, ? super I> getRowFilter() {
        return filter;
    }

    /**
     * Reverses the sort order from ascending to descending (or descending to
     * ascending) if the specified column is already the primary sorted column;
     * otherwise, makes the specified column the primary sorted column, with an
     * ascending sort order. If the specified column is not sortable, this
     * method has no effect.
     *
     * @param column index of the column to make the primary sorted column, in
     * terms of the underlying model
     * @throws IndexOutOfBoundsException {@inheritDoc}
     * @see #setSortable(int,boolean)
     * @see #setMaxSortKeys(int)
     */
    @Override
    public void toggleSortOrder(int column) {
        checkColumn(column);
        if (isSortable(column)) {
            List<SortKey> keys = new ArrayList<>(getSortKeys());
            SortKey sortKey;
            int sortIndex;
            for (sortIndex = keys.size() - 1; sortIndex >= 0; sortIndex--) {
                if (keys.get(sortIndex).getColumn() == column) {
                    break;
                }
            }
            if (sortIndex == -1) {
                // Key doesn't exist
                sortKey = new SortKey(column, SortOrder.ASCENDING);
                keys.add(0, sortKey);
            } else if (sortIndex == 0) {
                // It's the primary sorting key, toggle it
                keys.set(0, toggle(keys.get(0)));
            } else {
                // It's not the first, but was sorted on, remove old
                // entry, insert as first with ascending.
                keys.remove(sortIndex);
                keys.add(0, new SortKey(column, SortOrder.ASCENDING));
            }
            if (keys.size() > getMaxSortKeys()) {
                keys = keys.subList(0, getMaxSortKeys());
            }
            setSortKeys(keys);
        }
    }

    private SortKey toggle(SortKey key) {
        if (key.getSortOrder() == SortOrder.ASCENDING) {
            return new SortKey(key.getColumn(), SortOrder.DESCENDING);
        }
        return new SortKey(key.getColumn(), SortOrder.ASCENDING);
    }

    /**
     * {@inheritDoc}
     *
     * @throws IndexOutOfBoundsException {@inheritDoc}
     */
    @Override
    public int convertRowIndexToView(int index) {
        if (modelToView == null) {
            if (index < 0 || index >= getModelWrapper().getRowCount()) {
                throw new IndexOutOfBoundsException("Invalid index");
            }
            return index;
        }
        return modelToView[index];
    }

    /**
     * {@inheritDoc}
     *
     * @throws IndexOutOfBoundsException {@inheritDoc}
     */
    @Override
    public int convertRowIndexToModel(int index) {
        if (viewToModel == null) {
            if (index < 0 || index >= getModelWrapper().getRowCount()) {
                throw new IndexOutOfBoundsException("Invalid index");
            }
            return index;
        }
        return viewToModel[index].modelIndex;
    }

    private boolean isUnsorted() {
        List<? extends SortKey> keys = getSortKeys();
        int keySize = keys.size();
        return (keySize == 0 || keys.get(0).getSortOrder()
                == SortOrder.UNSORTED);
    }

    /**
     * Sorts the existing filtered data. This should only be used if the
     * filterInclude hasn't changed.
     */
    private void sortExistingData() {
        int[] lastViewToModel = getViewToModelAsInts(viewToModel);

        updateUseToString();
        cacheSortKeys(getSortKeys());

        if (isUnsorted()) {
            if (getRowFilter() == null) {
                viewToModel = null;
                modelToView = null;
            } else {
                int included = 0;
                for (int i = 0; i < modelToView.length; i++) {
                    if (modelToView[i] != -1) {
                        viewToModel[included].modelIndex = i;
                        modelToView[i] = included++;
                    }
                }
            }
        } else {
            // sort the data
            Arrays.sort(viewToModel);

            // Update the modelToView array
            setModelToViewFromViewToModel(false);
        }
        fireRowSorterChanged(lastViewToModel);
    }

    /**
     * Sorts and filters the rows in the view based on the sort keys of the
     * columns currently being sorted and the filterInclude, if any, associated
     * with this sorter. An empty
     * <code>sortKeys</code> list indicates that the view should unsorted, the
     * same as the model.
     *
     * @see #setRowFilter
     * @see #setSortKeys
     */
    public void sort() {
        sorted = true;
        int[] lastViewToModel = getViewToModelAsInts(viewToModel);
        updateUseToString();
        if (isUnsorted()) {
            // Unsorted
            cachedSortKeys = new SortKey[0];
            if (getRowFilter() == null) {
                // No filterInclude & unsorted
                if (viewToModel != null) {
                    // sorted -> unsorted
                    viewToModel = null;
                    modelToView = null;
                } else {
                    // unsorted -> unsorted
                    // No need to do anything.
                    return;
                }
            } else {
                // There is filterInclude, reset mappings
                initializeFilteredMapping();
            }
        } else {
            cacheSortKeys(getSortKeys());

            if (getRowFilter() != null) {
                initializeFilteredMapping();
            } else {
                createModelToView(getModelWrapper().getRowCount());
                createViewToModel(getModelWrapper().getRowCount());
            }

            // sort them
            Arrays.sort(viewToModel);

            // Update the modelToView array
            setModelToViewFromViewToModel(false);
        }
        fireRowSorterChanged(lastViewToModel);
    }

    /**
     * Updates the useToString mapping before a sort.
     */
    private void updateUseToString() {
        int i = getModelWrapper().getColumnCount();
        if (useToString == null || useToString.length != i) {
            useToString = new boolean[i];
        }
        for (--i; i >= 0; i--) {
            useToString[i] = useToString(i);
        }
    }

    /**
     * Resets the viewToModel and modelToView mappings based on the current
     * Filter.
     */
    private void initializeFilteredMapping() {
        int rowCount = getModelWrapper().getRowCount();
        int i, j;
        int excludedCount = 0;

        // Update model -> view
        createModelToView(rowCount);
        for (i = 0; i < rowCount; i++) {
            if (include(i)) {
                modelToView[i] = i - excludedCount;
            } else {
                modelToView[i] = -1;
                excludedCount++;
            }
        }

        // Update view -> model
        createViewToModel(rowCount - excludedCount);
        for (i = 0, j = 0; i < rowCount; i++) {
            if (modelToView[i] != -1) {
                viewToModel[j++].modelIndex = i;
            }
        }
    }

    /**
     * Makes sure the modelToView array is of size rowCount.
     */
    private void createModelToView(int rowCount) {
        if (modelToView == null || modelToView.length != rowCount) {
            modelToView = new int[rowCount];
        }
    }

    /**
     * Resets the viewToModel array to be of size rowCount.
     */
    private void createViewToModel(int rowCount) {
        int recreateFrom = 0;
        if (viewToModel != null) {
            recreateFrom = Math.min(rowCount, viewToModel.length);
            if (viewToModel.length != rowCount) {
                Row[] oldViewToModel = viewToModel;
                viewToModel = new Row[rowCount];
                System.arraycopy(oldViewToModel, 0, viewToModel,
                        0, recreateFrom);
            }
        } else {
            viewToModel = new Row[rowCount];
        }
        int i;
        for (i = 0; i < recreateFrom; i++) {
            viewToModel[i].modelIndex = i;
        }
        for (i = recreateFrom; i < rowCount; i++) {
            viewToModel[i] = new Row(this, i);
        }
    }

    /**
     * Caches the sort keys before a sort.
     */
    private void cacheSortKeys(List<? extends SortKey> keys) {
        int keySize = keys.size();
        sortComparators = new Comparator[keySize];
        for (int i = 0; i < keySize; i++) {
            sortComparators[i] = getComparator0(keys.get(i).getColumn());
        }
        cachedSortKeys = keys.toArray(new SortKey[keySize]);
    }

    /**
     * Returns whether or not to convert the value to a string before doing
     * comparisons when sorting. If true
     * <code>ModelWrapper.getStringValueAt</code> will be used, otherwise
     * <code>ModelWrapper.getValueAt</code> will be used. It is up to
     * subclasses, such as
     * <code>TableRowSorter</code>, to honor this value in their
     * <code>ModelWrapper</code> implementation.
     *
     * @param column the index of the column to test, in terms of the underlying 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-03T04:20:07.857

SO 不允许超过 30000 个字符的响应，所以，我将把它分成三个答案。

第 3/3 部分：

```
 * model
     * @throws IndexOutOfBoundsException if <code>column</code> is not valid
     */
    protected boolean useToString(int column) {
        return (getComparator(column) == null);
    }

    /**
     * Refreshes the modelToView mapping from that of viewToModel. If
     * <code>unsetFirst</code> is true, all indices in modelToView are first set
     * to -1.
     */
    private void setModelToViewFromViewToModel(boolean unsetFirst) {
        int i;
        if (unsetFirst) {
            for (i = modelToView.length - 1; i >= 0; i--) {
                modelToView[i] = -1;
            }
        }
        for (i = viewToModel.length - 1; i >= 0; i--) {
            modelToView[viewToModel[i].modelIndex] = i;
        }
    }

    private int[] getViewToModelAsInts(Row[] viewToModel) {
        if (viewToModel != null) {
            int[] viewToModelI = new int[viewToModel.length];
            for (int i = viewToModel.length - 1; i >= 0; i--) {
                viewToModelI[i] = viewToModel[i].modelIndex;
            }
            return viewToModelI;
        }
        return new int[0];
    }

    /**
     * Sets the
     * <code>Comparator</code> to use when sorting the specified column. This
     * does not trigger a sort. If you want to sort after setting the comparator
     * you need to explicitly invoke
     * <code>sort</code>.
     *
     * @param column the index of the column the <code>Comparator</code> is to
     * be used for, in terms of the underlying model
     * @param comparator the <code>Comparator</code> to use
     * @throws IndexOutOfBoundsException if <code>column</code> is outside the
     * range of the underlying model
     */
    public void setComparator(int column, Comparator<?> comparator) {
        checkColumn(column);
        if (comparators == null) {
            comparators = new Comparator[getModelWrapper().getColumnCount()];
        }
        comparators[column] = comparator;
    }

    /**
     * Returns the
     * <code>Comparator</code> for the specified column. This will return
     * <code>null</code> if a
     * <code>Comparator</code> has not been specified for the column.
     *
     * @param column the column to fetch the <code>Comparator</code> for, in
     * terms of the underlying model
     * @return the <code>Comparator</code> for the specified column
     * @throws IndexOutOfBoundsException if column is outside the range of the
     * underlying model
     */
    public Comparator<?> getComparator(int column) {
        checkColumn(column);
        if (comparators != null) {
            return comparators[column];
        }
        return null;
    }

    // Returns the Comparator to use during sorting.  Where as
    // getComparator() may return null, this will never return null.
    private Comparator getComparator0(int column) {
        Comparator comparator = getComparator(column);
        if (comparator != null) {
            return comparator;
        }
        // This should be ok as useToString(column) should have returned
        // true in this case.
        return Collator.getInstance();
    }

    private RowFilter.Entry<M, I> getFilterEntry(int modelIndex) {
        if (filterEntry == null) {
            filterEntry = new FilterEntry();
        }
        filterEntry.modelIndex = modelIndex;
        return filterEntry;
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public int getViewRowCount() {
        if (viewToModel != null) {
            // When filtering this may differ from getModelWrapper().getRowCount()
            return viewToModel.length;
        }
        return getModelWrapper().getRowCount();
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public int getModelRowCount() {
        return getModelWrapper().getRowCount();
    }

    private void allChanged() {
        modelToView = null;
        viewToModel = null;
        comparators = null;
        isSortable = null;
        if (isUnsorted()) {
            // Keys are already empty, to force a resort we have to
            // call sort
            sort();
        } else {
            setSortKeys(null);
        }
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public void modelStructureChanged() {
        allChanged();
        modelRowCount = getModelWrapper().getRowCount();
    }

    /**
     * {@inheritDoc}
     */
    @Override
    public void allRowsChanged() {
        modelRowCount = getModelWrapper().getRowCount();
        sort();
    }

    /**
     * {@inheritDoc}
     *
     * @throws IndexOutOfBoundsException {@inheritDoc}
     */
    @Override
    public void rowsInserted(int firstRow, int endRow) {
        checkAgainstModel(firstRow, endRow);
        int newModelRowCount = getModelWrapper().getRowCount();
        if (endRow >= newModelRowCount) {
            throw new IndexOutOfBoundsException("Invalid range");
        }
        modelRowCount = newModelRowCount;
        if (shouldOptimizeChange(firstRow, endRow)) {
            rowsInserted0(firstRow, endRow);
        }
    }

    /**
     * {@inheritDoc}
     *
     * @throws IndexOutOfBoundsException {@inheritDoc}
     */
    @Override
    public void rowsDeleted(int firstRow, int endRow) {
        checkAgainstModel(firstRow, endRow);
        if (firstRow >= modelRowCount || endRow >= modelRowCount) {
            throw new IndexOutOfBoundsException("Invalid range");
        }
        modelRowCount = getModelWrapper().getRowCount();
        if (shouldOptimizeChange(firstRow, endRow)) {
            rowsDeleted0(firstRow, endRow);
        }
    }

    /**
     * {@inheritDoc}
     *
     * @throws IndexOutOfBoundsException {@inheritDoc}
     */
    @Override
    public void rowsUpdated(int firstRow, int endRow) {
        checkAgainstModel(firstRow, endRow);
        if (firstRow >= modelRowCount || endRow >= modelRowCount) {
            throw new IndexOutOfBoundsException("Invalid range");
        }
        if (getSortsOnUpdates()) {
            if (shouldOptimizeChange(firstRow, endRow)) {
                rowsUpdated0(firstRow, endRow);
            }
        } else {
            sorted = false;
        }
    }

    /**
     * {@inheritDoc}
     *
     * @throws IndexOutOfBoundsException {@inheritDoc}
     */
    @Override
    public void rowsUpdated(int firstRow, int endRow, int column) {
        checkColumn(column);
        rowsUpdated(firstRow, endRow);
    }

    private void checkAgainstModel(int firstRow, int endRow) {
        if (firstRow > endRow || firstRow < 0 || endRow < 0
                || firstRow > modelRowCount) {
            throw new IndexOutOfBoundsException("Invalid range");
        }
    }

    /**
     * Returns true if the specified row should be included.
     */
    private boolean include(int row) {
        RowFilter<? super M, ? super I> filterInclude = getRowFilter();
        if (filterInclude != null) {
            return filterInclude.include(getFilterEntry(row));
        }
        // null filterInclude, always include the row.
        return true;
    }

    @SuppressWarnings("unchecked")
    private int compare(int model1, int model2) {
        int column;
        SortOrder sortOrder;
        Object v1, v2;
        int result;

        for (int counter = 0; counter < cachedSortKeys.length; counter++) {
            column = cachedSortKeys[counter].getColumn();
            sortOrder = cachedSortKeys[counter].getSortOrder();
            if (sortOrder == SortOrder.UNSORTED) {
                result = model1 - model2;
            } else {
                // v1 != null && v2 != null
                if (useToString[column]) {
                    v1 = getModelWrapper().getStringValueAt(model1, column);
                    v2 = getModelWrapper().getStringValueAt(model2, column);
                } else {
                    v1 = getModelWrapper().getValueAt(model1, column);
                    v2 = getModelWrapper().getValueAt(model2, column);
                }
                // Treat nulls as < then non-null
                if (v1 == null) {
                    if (v2 == null) {
                        result = 0;
                    } else {
                        result = -1;
                    }
                } else if (v2 == null) {
                    result = 1;
                } else {
                    result = sortComparators[counter].compare(v1, v2);
                }
                if (sortOrder == SortOrder.DESCENDING) {
                    result *= -1;
                }
            }
            if (result != 0) {
                return result;
            }
        }
        // If we get here, they're equal. Fallback to model order.
        return model1 - model2;
    }

    /**
     * Whether not we are filtering/sorting.
     */
    private boolean isTransformed() {
        return (viewToModel != null);
    }

    /**
     * Insets new set of entries.
     *
     * @param toAdd the Rows to add, sorted
     * @param current the array to insert the items into
     */
    private void insertInOrder(List<Row> toAdd, Row[] current) {
        int last = 0;
        int index;
        int max = toAdd.size();
        for (int i = 0; i < max; i++) {
            index = Arrays.binarySearch(current, toAdd.get(i));
            if (index < 0) {
                index = -1 - index;
            }
            System.arraycopy(current, last,
                    viewToModel, last + i, index - last);
            viewToModel[index + i] = toAdd.get(i);
            last = index;
        }
        System.arraycopy(current, last, viewToModel, last + max,
                current.length - last);
    }

    /**
     * Returns true if we should try and optimize the processing of the
     * <code>TableModelEvent</code>. If this returns false, assume the event was
     * dealt with and no further processing needs to happen.
     */
    private boolean shouldOptimizeChange(int firstRow, int lastRow) {
        if (!isTransformed()) {
            // Not transformed, nothing to do.
            return false;
        }
        if (!sorted || (lastRow - firstRow) > viewToModel.length / 10) {
            // We either weren't sorted, or to much changed, sort it all
            sort();
            return false;
        }
        return true;
    }

    private void rowsInserted0(int firstRow, int lastRow) {
        int[] oldViewToModel = getViewToModelAsInts(viewToModel);
        int i;
        int delta = (lastRow - firstRow) + 1;
        List<Row> added = new ArrayList<>(delta);

        // Build the list of Rows to add into added
        for (i = firstRow; i <= lastRow; i++) {
            if (include(i)) {
                added.add(new Row(this, i));
            }
        }

        // Adjust the model index of rows after the effected region
        int viewIndex;
        for (i = modelToView.length - 1; i >= firstRow; i--) {
            viewIndex = modelToView[i];
            if (viewIndex != -1) {
                viewToModel[viewIndex].modelIndex += delta;
            }
        }

        // Insert newly added rows into viewToModel
        if (added.size() > 0) {
            Collections.sort(added);
            Row[] lastViewToModel = viewToModel;
            viewToModel = new Row[viewToModel.length + added.size()];
            insertInOrder(added, lastViewToModel);
        }

        // Update modelToView
        createModelToView(getModelWrapper().getRowCount());
        setModelToViewFromViewToModel(true);

        // Notify of change
        fireRowSorterChanged(oldViewToModel);
    }

    private void rowsDeleted0(int firstRow, int lastRow) {
        int[] oldViewToModel = getViewToModelAsInts(viewToModel);
        int removedFromView = 0;
        int i;
        int viewIndex;

        // Figure out how many visible rows are going to be effected.
        for (i = firstRow; i <= lastRow; i++) {
            viewIndex = modelToView[i];
            if (viewIndex != -1) {
                removedFromView++;
                viewToModel[viewIndex] = null;
            }
        }

        // Update the model index of rows after the effected region
        int delta = lastRow - firstRow + 1;
        for (i = modelToView.length - 1; i > lastRow; i--) {
            viewIndex = modelToView[i];
            if (viewIndex != -1) {
                viewToModel[viewIndex].modelIndex -= delta;
            }
        }

        // Then patch up the viewToModel array
        if (removedFromView > 0) {
            Row[] newViewToModel = new Row[viewToModel.length
                    - removedFromView];
            int newIndex = 0;
            int last = 0;
            for (i = 0; i < viewToModel.length; i++) {
                if (viewToModel[i] == null) {
                    System.arraycopy(viewToModel, last,
                            newViewToModel, newIndex, i - last);
                    newIndex += (i - last);
                    last = i + 1;
                }
            }
            System.arraycopy(viewToModel, last,
                    newViewToModel, newIndex, viewToModel.length - last);
            viewToModel = newViewToModel;
        }

        // Update the modelToView mapping
        createModelToView(getModelWrapper().getRowCount());
        setModelToViewFromViewToModel(true);

        // And notify of change
        fireRowSorterChanged(oldViewToModel);
    }

    private void rowsUpdated0(int firstRow, int lastRow) {
        int[] oldViewToModel = getViewToModelAsInts(viewToModel);
        int i, j;
        int delta = lastRow - firstRow + 1;
        int modelIndex;
        int last;
        int index;

        if (getRowFilter() == null) {
            // Sorting only:

            // Remove the effected rows
            Row[] updated = new Row[delta];
            for (j = 0, i = firstRow; i <= lastRow; i++, j++) {
                updated[j] = viewToModel[modelToView[i]];
            }

            // Sort the update rows
            Arrays.sort(updated);

            // Build the intermediary array: the array of
            // viewToModel without the effected rows.
            Row[] intermediary = new Row[viewToModel.length - delta];
            for (i = 0, j = 0; i < viewToModel.length; i++) {
                modelIndex = viewToModel[i].modelIndex;
                if (modelIndex < firstRow || modelIndex > lastRow) {
                    intermediary[j++] = viewToModel[i];
                }
            }

            // Build the new viewToModel
            insertInOrder(Arrays.asList(updated), intermediary);

            // Update modelToView
            setModelToViewFromViewToModel(false);
        } else {
            // Sorting & filtering.

            // Remove the effected rows, adding them to updated and setting
            // modelToView to -2 for any rows that were not filtered out
            List<Row> updated = new ArrayList<>(delta);
            int newlyVisible = 0;
            int newlyHidden = 0;
            int effected = 0;
            for (i = firstRow; i <= lastRow; i++) {
                if (modelToView[i] == -1) {
                    // This row was filtered out
                    if (include(i)) {
                        // No longer filtered
                        updated.add(new Row(this, i));
                        newlyVisible++;
                    }
                } else {
                    // This row was visible, make sure it should still be
                    // visible.
                    if (!include(i)) {
                        newlyHidden++;
                    } else {
                        updated.add(viewToModel[modelToView[i]]);
                    }
                    modelToView[i] = -2;
                    effected++;
                }
            }

            // Sort the updated rows
            Collections.sort(updated);

            // Build the intermediary array: the array of
            // viewToModel without the updated rows.
            Row[] intermediary = new Row[viewToModel.length - effected];
            for (i = 0, j = 0; i < viewToModel.length; i++) {
                modelIndex = viewToModel[i].modelIndex;
                if (modelToView[modelIndex] != -2) {
                    intermediary[j++] = viewToModel[i];
                }
            }

            // Recreate viewToModel, if necessary
            if (newlyVisible != newlyHidden) {
                viewToModel = new Row[viewToModel.length + newlyVisible
                        - newlyHidden];
            }

            // Rebuild the new viewToModel array
            insertInOrder(updated, intermediary);

            // Update modelToView
            setModelToViewFromViewToModel(true);
        }
        // And finally fire a sort event.
        fireRowSorterChanged(oldViewToModel);
    }

    private void checkColumn(int column) {
        if (column < 0 || column >= getModelWrapper().getColumnCount()) {
            throw new IndexOutOfBoundsException(
                    "column beyond range of TableModel");
        }
    }

    /**
     * <code>DefaultRowSorterSpecialFilter.ModelWrapper</code> is responsible
     * for providing the data that gets sorted by
     * <code>DefaultRowSorterSpecialFilter</code>. You normally do not interact
     * directly with
     * <code>ModelWrapper</code>. Subclasses of
     * <code>DefaultRowSorterSpecialFilter</code> provide an implementation of
     * <code>ModelWrapper</code> wrapping another model. For example,
     * <code>TableRowSorter</code> provides a
     * <code>ModelWrapper</code> that wraps a
     * <code>TableModel</code>. <p>
     * <code>ModelWrapper</code> makes a distinction between values as
     * <code>Object</code>s and
     * <code>String</code>s. This allows implementations to provide a custom
     * string converter to be used instead of invoking
     * <code>toString</code> on the object.
     *
     * @param <M> the type of the underlying model
     * @param <I> the identifier supplied to the filterInclude
     * @since 1.6
     * @see RowFilter
     * @see RowFilter.Entry
     */
    protected abstract static class ModelWrapper<M, I> {

        /**
         * Creates a new
         * <code>ModelWrapper</code>.
         */
        protected ModelWrapper() {
        }

        /**
         * Returns the underlying model that this
         * <code>Model</code> is wrapping.
         *
         * @return the underlying model
         */
        public abstract M getModel();

        /**
         * Returns the number of columns in the model.
         *
         * @return the number of columns in the model
         */
        public abstract int getColumnCount();

        /**
         * Returns the number of rows in the model.
         *
         * @return the number of rows in the model
         */
        public abstract int getRowCount();

        /**
         * Returns the value at the specified index.
         *
         * @param row the row index
         * @param column the column index
         * @return the value at the specified index
         * @throws IndexOutOfBoundsException if the indices are outside the
         * range of the model
         */
        public abstract Object getValueAt(int row, int column);

        /**
         * Returns the value as a
         * <code>String</code> at the specified index. This implementation uses
         * <code>toString</code> on the result from
         * <code>getValueAt</code> (making sure to return an empty string for
         * null values). Subclasses that override this method should never
         * return null.
         *
         * @param row the row index
         * @param column the column index
         * @return the value at the specified index as a <code>String</code>
         * @throws IndexOutOfBoundsException if the indices are outside the
         * range of the model
         */
        public String getStringValueAt(int row, int column) {
            Object o = getValueAt(row, column);
            if (o == null) {
                return "";
            }
            String string = o.toString();
            if (string == null) {
                return "";
            }
            return string;
        }

        /**
         * Returns the identifier for the specified row. The return value of
         * this is used as the identifier for the
         * <code>RowFilter.Entry</code> that is passed to the
         * <code>RowFilter</code>.
         *
         * @param row the row to return the identifier for, in terms of the
         * underlying model
         * @return the identifier
         * @see RowFilter.Entry#getIdentifier
         */
        public abstract I getIdentifier(int row);
    }

    /**
     * RowFilter.Entry implementation that delegates to the ModelWrapper.
     * getFilterEntry(int) creates the single instance of this that is passed to
     * the Filter. Only call getFilterEntry(int) to get the instance.
     */
    private class FilterEntry extends RowFilter.Entry<M, I> {

        /**
         * The index into the model, set in getFilterEntry
         */
        int modelIndex;

        @Override
        public M getModel() {
            return getModelWrapper().getModel();
        }

        @Override
        public int getValueCount() {
            return getModelWrapper().getColumnCount();
        }

        @Override
        public Object getValue(int index) {
            return getModelWrapper().getValueAt(modelIndex, index);
        }

        @Override
        public String getStringValue(int index) {
            /* Original code here was:
             * 
             * return getModelWrapper().getStringValueAt(modelIndex, index);
             */
            if (accentIndiferent) {
                return Normalizer.normalize((String) getModelWrapper().getStringValueAt(modelIndex, index), Normalizer.Form.NFD).replaceAll("\\p{InCombiningDiacriticalMarks}+", "");
            } else {
                return getModelWrapper().getStringValueAt(modelIndex, index);
            }
        }

        @Override
        public I getIdentifier() {
            return getModelWrapper().getIdentifier(modelIndex);
        }
    }

    /**
     * Row is used to handle the actual sorting by way of Comparable. It will
     * use the sortKeys to do the actual comparison.
     */
    // NOTE: this class is static so that it can be placed in an array
    private static class Row implements Comparable<Row> {

        private DefaultRowSorterSpecialFilter sorter;
        int modelIndex;

        public Row(DefaultRowSorterSpecialFilter sorter, int index) {
            this.sorter = sorter;
            modelIndex = index;
        }

        @Override
        public int compareTo(Row o) {
            return sorter.compare(modelIndex, o.modelIndex);
        }
    }
} 
```

最后，一个助手类，`RowFilterSpecialFilter`. 来源（`RowFilterSpecialFilter.java`）：

```
/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package javax.swing;

import java.text.Normalizer;

/**
 *
 * @author Miroslav
 */
public abstract class RowFilterSpecialFilter {

    public static <M, I> RowFilter<M, I> regexFilterAccentIndiferent(String regex) {
        return RowFilter.regexFilter("(?i)" + Normalizer.normalize(regex, Normalizer.Form.NFD).replaceAll("\\p{InCombiningDiacriticalMarks}+", ""));
    }

    public static <M, I> RowFilter<M, I> regexFilterAccentIndiferent(String regex, int... indices) {
        return RowFilter.regexFilter("(?i)" + Normalizer.normalize(regex, Normalizer.Form.NFD).replaceAll("\\p{InCombiningDiacriticalMarks}+", ""), indices);
    }
} 
```

现在，如何使用带有重音无关功能的过滤器？

不是通过方法将 a 附加`TableRowSorter<MyClassThatInheritsFromAbstractModel>`到 jTable ，而是通过相同的方法将 a 附加到它。`setRowSorter``TableRowSorterSpecialFilter<MyClassThatInheritsFromAbstractModel>`

不要忘记将`accentIndiferent`属性设置为`true`. 一个简单`myTableRowSorterSpecialFilterInstance.AccentIndiferent = true;`的就够了；

应该启动以应用过滤器的代码如下，将成为过滤器`FilterText`的字符串在哪里：

```
 RowFilter<ClientesTableModel, Object> rf;
    try {
        rf = RowFilterSpecialFilter.regexFilterAccentIndiferent("(?i)" + FilterText);
    } catch (PatternSyntaxException ex) {
        return;
    }
    sorter.setRowFilter(rf); 
```

我已经提供了很多资源来帮助遇到与我相同的麻烦的任何人。我很确定我已经修改了其他东西，但我不记得了，所以，最好确定并做出好的贡献。

并做了！！！

# php - 如何让 GET Web 服务更安全

> ID：13189717
> 
> 赞同：1
> 
> 时间：2012-11-02T05:18:11.003
> 
> 标签：php, android, web-services

我用 GET 方法在 PHP 中为 android 创建了 web 服务。现在我想将其转换为 POST，以使其更安全。如何将应用程序从 GET 转换为 POST？有没有其他方法可以让它更安全？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T06:08:49.933

答案取决于您想从谁那里保护它。假设您想保护网络嗅探器，SSL 是您的最佳选择。

POST 是您可以建议的最弱的“安全性”形式。它所做的只是防止参数在浏览器的缓存历史记录中可见（在这种情况下根本不会影响您），并使通过网络嗅探参数变得更加困难（这确实会影响您）。所以有一点好处（是的，这是值得的），但它根本不安全。

最简单的解决方案是使用 SSL 进行 POST。换句话说，与发布到“ [http://example.com](http://example.com) ”相反，您应该使用服务器上的有效证书发布到“ [https://example.com ”。](https://example.com)这将加密设备和服务器之间的流量。Google 寻求建议，或[在 Android 中启动 Secure HTTP Post](https://stackoverflow.com/questions/2253061/secure-http-post-in-android)

如果做不到这一点，您可以自己加密数据，然后公开发送加密查询，因为只有您的服务器可以解密它。一点点谷歌搜索将为您提供有关如何在一个中加密并在另一个中安全解密的代码 - 但作为一个小警告，让它工作可能会令人沮丧，因为它不会工作，直到它突然工作......没有当它不起作用时，你可以做很多调试！

# ios - 在 iOS 中使用 SharePoint Rest 界面的步骤

> ID：13189720
> 
> 赞同：2
> 
> 时间：2012-11-02T05:18:23.593
> 
> 标签：ios, sharepoint

我正在为 SharePoint Online 开发一个应用程序，并希望在我的 ios 应用程序中使用 SharePoint Rest 界面。有人可以告诉我在 iOS 中使用 SharePoint Rest 界面的步骤吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T10:57:46.043

我明白了，以下是要遵循的步骤：

1.  在你的 ios 应用程序中包含 RestKit。

2.  在您的主屏幕中创建一个 UIView 并加载登录页面。

    在 UIWebView 中加载 http://server name/Pages/default.aspx

3.  在 webViewDidFinished 方法中找出 Fed Auth 令牌并将其附加到请求 URL

    ```
     - (void)webViewDidFinishLoad:(UIWebView *)webView {
       //Retrive HTTPOnly Cookie
       NSHTTPCookieStorage *storage = [NSHTTPCookieStorage sharedHTTPCookieStorage];
       NSArray *cookiesArray = [storage cookies];

       //Search for Fed Auth cookie
       for (NSHTTPCookie *cookie in cookiesArray) {

        if ([[cookie name] isEqualToString:@"FedAuth"]) {
        /*** DO WHATEVER YOU WANT WITH THE COOKIE ***/

        NSLog(@"Found FedAuth");

        NSURL *url=[NSURL URLWithString:@"http://my server/_vti_bin/listdata.svc"];
        RKClient *client = [RKClient clientWithBaseURL:url];
        client.requestQueue.requestTimeout = 10;
        client.cachePolicy = RKRequestCachePolicyNone;
        client.authenticationType = RKRequestAuthenticationTypeHTTPBasic;
        client.username = @"username";
        client.password = @"Password";

        NSString *cookieVale=[cookie value];
        NSString *getResourcePath=[@"?" stringByAppendingFormat:@"%@",cookieVale];

        [client get:getResourcePath delegate:self];

        break;
    }
    }

    } 
    ```

4.  在这里你可以找到答案。

    ```
    - (void)request:(RKRequest *)request didLoadResponse:(RKResponse *)response {

    id xmlParser = [[RKParserRegistry sharedRegistry] parserForMIMEType:RKMIMETypeXML];
    NSError *error = nil;
    id parsedResponse = [xmlParser objectFromString:[response bodyAsString] error:&error];
    RKLogInfo(@"Parsed response : %@, error:%@",parsedResponse,error);

    if ([response isSuccessful]) {
    NSLog(@"%d",[response isCreated]);
    // Response status was 200..299
    if ([response isCreated] && [response isJSON]) {
        // Looks like we have a 201 response of type application/json
        RKLogInfo(@"The JSON is %@", [response bodyAsJSON]);
    }
    } else if ([response isError]) {
    // Response status was either 400..499 or 500..599
    RKLogInfo(@"Ouch! We have an HTTP error. Status Code description: %@", [response localizedStatusCodeString]);
    }
    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-21T09:48:38.703

自我接受的答案让我失去了很多小时的试验和错误。它省略了一些关键方面，例如您还需要获取 rtFa cookie。用户代码中提供的 client.username = @"username" 和 client.password = @"Password" 是怎么回事。那是什么？请注意，客户端在任何时候都不知道用户名或密码...

无论如何，下面是一篇很棒的文章，它将引导您朝着正确的方向前进：http: [//www.codeproject.com/Articles/571996/Development-of-iPhone-client-application-for-Share](http://www.codeproject.com/Articles/571996/Development-of-iPhone-client-application-for-Share)

这描述了如何在不使用 UIWebView 的情况下获取 cookie [http://allthatjs.com/2012/03/28/remote-authentication-in-sharepoint-online/](http://allthatjs.com/2012/03/28/remote-authentication-in-sharepoint-online/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T10:34:21.363

将 FedAuth cookie 与所有后续请求一起发送。

通过身份验证后，您可以调用 REST API，此处的文档：http: [//msdn.microsoft.com/en-us/library/fp142385 (v=office.15).aspx#bk_determining](http://msdn.microsoft.com/en-us/library/fp142385(v=office.15).aspx#bk_determining)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-28T16:45:54.007

当用户完成对 Office365 Sharepoint 实例的登录过程时，Web 视图将分几个步骤重定向。作为加载实际 Sharepoint 网站之前的最后一步之一，Web 视图将被要求加载“about:blank”。

检测您的 Web 视图何时开始加载“about:blank”，并且您知道用户何时完成登录过程并可以关闭 Web 视图。下面的示例代码。

```
// Load page in web view
- (BOOL)webView:(UIWebView *)webView shouldStartLoadWithRequest:(NSURLRequest *)request navigationType:(UIWebViewNavigationType)navigationType {
  NSLog(@"WebView should start loading %@", request.URL.absoluteString);

  // Detect that the user finished the sign in process
  if ([request.URL.absoluteString isEqualToString:@"about:blank"]) {

    // Do your stuff here

    return NO;
  }

  return YES;
} 
```

如果身份验证成功，Sharepoint 实例还将设置 FedAuth cookie。cookie 必须包含在以后对服务器的请求中。

您不必手动附加 cookie，只要 cookie 已被接受并存储在 NSHTTPCookieStorage 中并且您将请求发送到同一服务器，URL 加载系统就会处理此问题。

来自 Apple 文档

> URL 加载系统会自动发送任何适合 NSURLRequest 的存储 cookie。除非请求指定不发送 cookie。同样，在 NSURLResponse 中返回的 cookie 根据当前的 cookie 接受策略被接受。

# android - Android Currency 类 - 如何获取货币的显示名称？

> ID：13189731
> 
> 赞同：2
> 
> 时间：2012-11-02T05:18:51.773
> 
> 标签：android, get, currency

我可以使用它的 ISO 4217 代码轻松设置货币，例如“USD”。这将允许我使用 .getSymbol() 获取美元符号，但是，我到底如何从货币中获取显示名称“美元”？

我有一个微调器，我想填充诸如“美元”、“欧元”、“日元”等货币的名称。但是，我无法从 ISO 4217 代码中提取这些。这不是很容易吗？

请注意，我不能使用简单的字符串数组来解决这个问题。那是因为我获取了默认语言环境并将其货币添加到上面提到的微调器中。这就是我需要能够动态获取货币显示名称的原因，我不知道用户可能使用的所有货币。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T05:42:03.333

参考这个问题。

[我可以在 Java 中获得 ISO 货币代码的文本描述吗？](https://stackoverflow.com/questions/1458912/can-i-get-a-text-description-of-an-iso-currency-code-in-java)

它可能会回答你的问题。该页面上有很多答案。

# java - 获取缺少或空属性的实体？

> ID：13189734
> 
> 赞同：2
> 
> 时间：2012-11-02T05:19:21.253
> 
> 标签：java, google-app-engine, objectify

> **可能重复：**
> [在应用引擎数据存储区中查询缺少属性的实体？](https://stackoverflow.com/questions/3332080/querying-for-entities-with-missing-properties-in-app-engine-datastore)

我正在使用 Objectify4，如果未设置字段，从数据存储查看器中我们可以看到它被标记为`<missing>`或`<null>`，有没有办法获取这些实体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:54:35.127

您无法查询缺少或未为实体设置的属性。但是，您可以查询使用值初始化的属性`null`。有关更多信息，请查看[查询限制](https://developers.google.com/appengine/docs/java/datastore/queries)。

希望这可以帮助！

# javascript - elementFromPoint 滚动页面后返回 null

> ID：13189735
> 
> 赞同：5
> 
> 时间：2012-11-02T05:19:27.023
> 
> 标签：javascript, bookmarklet

我有一个 javascript 小书签，我把它放在一起使一项艰巨的任务变得更容易忍受。基本上，我正在浏览数百页的培训材料，并确保所有这些材料都已正确地从 Helvetica 交换到 Arial。小书签代码如下，但快速分解是它创建了一个 mousemove 事件侦听器和一个小的、绝对定位的 div。在 mousemove 事件中，div 移动到新的鼠标位置（向下和向右偏移 10px），使用 elementFromPoint 获取鼠标下的元素并显示该元素的 font-family 属性。哦，它会根据 Arial 是否出现在属性中来改变它的背景颜色。

```
var bodyEl=document.getElementsByTagName("body")[0];
var displayDiv=document.createElement("div");
displayDiv.style.position="absolute";
displayDiv.style.top="0px";
displayDiv.style.top="0px";
bodyEl.appendChild(displayDiv);

function getStyle(el,styleProp) {
  var camelize = function (str) {
    return str.replace(/\-(\w)/g, function(str, letter){
      return letter.toUpperCase();
    });
  };

  if (el.currentStyle) {
    return el.currentStyle[camelize(styleProp)];
  } else if (document.defaultView && document.defaultView.getComputedStyle) {
    return document.defaultView.getComputedStyle(el,null)
                               .getPropertyValue(styleProp);
  } else {
    return el.style[camelize(styleProp)]; 
  }
}
function getTheElement(x,y) {return document.elementFromPoint(x,y);}

fn_displayFont=function displayFont(e) {
    e = e || window.event;
    var divX=e.pageX+10;
    var divY=e.pageY+10;
    var font=getStyle(getTheElement(e.pageX,e.pageY),"font-family");
    if (font.toLowerCase().indexOf("arial") != -1) {
        displayDiv.style.backgroundColor = "green";
    } else {
        displayDiv.style.backgroundColor = "red";
    }
    displayDiv.style.top= divY.toString() + "px";
    displayDiv.style.left= divX.toString() + "px";
    displayDiv.style.fontFamily=font;
    displayDiv.innerHTML=font;
}

window.addEventListener('mousemove', fn_displayFont);
document.onkeydown = function(evt) {
    evt = evt || window.event;
    if (evt.keyCode == 27) {
        window.removeEventListener('mousemove', fn_displayFont);
        bodyEl.removeChild(displayDiv);
    }
}; 
```

（作为记录，我从 SO 上的答案中窃取了样式确定代码，但不久之后我丢失了标签。谢谢，匿名的互联网人！）所以这一切都很好 - 直到我尝试将鼠标悬停在部分从顶部向下滚动的页面。如果我在滚动到页面顶部时将鼠标放在屏幕的最底部，并且如果我向下滚动足够远，则 div 将位于该位置，并且如果我向下滚动足够远，则萤火虫开始记录 e.pageX 未定义。

有任何想法吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T06:53:07.527

好吧，想通了。我看到[http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/276742/elementfrompoint-problems-when-window-has-been-scrolled-](http://www.daniweb.com/web-development/javascript-dhtml-ajax/threads/276742/elementfrompoint-problems-when-window-has-been-scrolled-)并认为这意味着我必须减去 pageoffset直接从 e.pageX/Y 值开始，在我用它来计算 div 位置或其他任何东西之前，这对我来说破坏了一切，所以我认为它一定是不相关的 - 不是这样！根据我现在的理解， elementFromPoint 方法在浏览器的当前视图中取一个相对点，也就是说，基于当前可以看到的左上角，而不是整个页面。我通过在获取元素时仅从 X 和 Y 值中获取偏移量来修复它。现在工作的代码如下。

```
var bodyEl=document.getElementsByTagName("body")[0];
var displayDiv=document.createElement("div");
displayDiv.style.position="absolute";
displayDiv.style.top="0px";
displayDiv.style.top="0px";
bodyEl.appendChild(displayDiv);

function getStyle(el,styleProp) {
  var camelize = function (str) {
    return str.replace(/\-(\w)/g, function(str, letter){
      return letter.toUpperCase();
    });
  };

  if (el.currentStyle) {
    return el.currentStyle[camelize(styleProp)];
  } else if (document.defaultView && document.defaultView.getComputedStyle) {
    return document.defaultView.getComputedStyle(el,null)
                               .getPropertyValue(styleProp);
  } else {
    return el.style[camelize(styleProp)]; 
  }
}
function getTheElement(x,y) {return document.elementFromPoint(x,y);}

fn_displayFont=function displayFont(e) {
    e = e || window.event;
    var divX=e.pageX + 10;
    var divY=e.pageY + 10;
    var font=getStyle(getTheElement(e.pageX - window.pageXOffset,e.pageY - window.pageYOffset),"font-family");
    if (font.toLowerCase().indexOf("arial") != -1) {
        displayDiv.style.backgroundColor = "green";
    } else {
        displayDiv.style.backgroundColor = "red";
    }
    displayDiv.style.top= divY.toString() + "px";
    displayDiv.style.left= divX.toString() + "px";
    displayDiv.style.fontFamily=font;
    displayDiv.innerHTML=font;
}

document.addEventListener('mousemove', fn_displayFont);
document.onkeydown = function(evt) {
    evt = evt || window.event;
    if (evt.keyCode == 27) {
        window.removeEventListener('mousemove', fn_displayFont);
        bodyEl.removeChild(displayDiv);
    }
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:30:51.247

嗯，而不是用鼠标检查，为什么不检查每个叶节点呢？如果任何叶节点的字体系列为 arial，那么它应该指示其祖先之一的字体系列为 Arial。

首先，您需要将 jquery 放到页面上。试试这个[书签](http://www.learningjquery.com/2009/04/better-stronger-safer-jquerify-bookmarklet)

然后运行这段代码：

```
(function(){
    var arialNodes = $('div:not(:has(*))').filter(function(){
        return $(this).css('font-family').toLowerCase().indexOf("arial") != -1;
    });
})(); 
```

该`arialNodes`变量应包含具有“Arial”字体系列的每个叶节点。然后，您可以使用它来确定哪个父元素具有声明。

或者，如果您只想查看页面是否合规，只需检查长度即可。

**更新**

更新以反映以下评论

```
(function() {
    var arialNodes = $('*:not(:has(*))', $('body')).filter(function() {
        return $(this).css('font-family').toLowerCase().indexOf("arial") === -1;
    });

    var offendingParents = [];
    arialNodes.each(function(){
        var highestOffendingParent = $(this).parentsUntil('body').filter(function(){
            return $(this).css('font-family').toLowerCase().indexOf("arial") === -1;
        }).last();
        if(offendingParents.indexOf(highestOffendingParent) === -1){
            offendingParents.push(highestOffendingParent);
        }
    });

})(); 
```

# .net - 设置找不到 update.inf 文件

> ID：13189736
> 
> 赞同：3
> 
> 时间：2012-11-02T05:19:32.610
> 
> 标签：.net, .net-framework-version, wic

![在此处输入图像描述](../Images/02c7450fded4d32ad9249804949e55a9.png)
我需要在 .net 平台上安装一个需要 .net 框架 4 的软件构建。实际上我的问题是我有一台新笔记本电脑，我需要安装一个 .net 框架，但是在安装时它会出现错误，如我上传的图像所示. 于是我搜索了谷歌，发现需要安装WIC（Windows Imaging Component）。但是当我安装它时，它给出了设置找不到`update.inf`文件需要更新系统的错误。那么可能的错误是我无法在我的笔记本电脑中安装这些组件。有关信息，我的笔记本电脑有 Windows 7 32 位操作系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T06:51:17.030

请在安装 .NET Framework 4 之前尝试执行以下步骤

1.  打开命令
2.  输入命令“net stop WuAuServ”（禁用 Windows 更新）
3.  转到运行（您可以通过按`Win`+来执行此操作`R`）并输入`"%windir%"`（此命令可让您转到 Windows 系统文件夹）
4.  找到文件夹“SoftwareDistribution”并将其重命名为“SDold”
5.  然后，返回之前的命令提示符并运行命令“net start WuAuServ”
6.  现在，尝试再次安装 .NET Framework

参考：[解决：安装 .NET Framework 4.0 失败，错误代码 HRESULT：0xc8000222](http://digitalmemo.neobie.net/2011/08/17/net-framework-4-0-error-code-hresult-0xc8000222/)

# php - 如何更改 JavaScript 的输出以直接转到另一个页面而不是警报窗口？

> ID：13189739
> 
> 赞同：0
> 
> 时间：2012-11-02T05:19:38.990
> 
> 标签：php, javascript

```
 <html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <title>Validate Zip Code</title>
            <script type="text/javascript">
                function IsValidZipCode(zip) {
                    var isValid = /20132/.test(zip);
                    if (isValid)
                        alert('Valid ZipCode');
                    else {
                        alert('yep')
                         }
                }
            </script>
        </head>

   <body>
    <form>
    <input id="txtZip" name="zip" type="text" /><br />
    <input id="Button1" type="submit" value="Check My Zipcode"
    onclick="IsValidZipCode(this.form.zip.value)" />
    </form>
    </body>
    </html> 
```

我需要使用它来允许用户转到表示抱歉我们无法为您所在地区提供服务的页面或另一个表示我们可以根据他们的邮政编码为您所在地区提供服务的页面。

另外，如何在 isValid = 行中添加多个邮政编码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:40:28.700

```
if (isValid)
    document.location.href="validzipcode.html";
else {
    document.location.href="yep.html";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:33:47.413

设置`window.location.href = "your url here";`回答了问题的第一部分。

> *“我如何在 isValid = 行中添加多个邮政编码？”*

如果您想坚持使用正则表达式测试，您可以使用正则表达式或`|`：

```
var isValid = /^(20132|20133|20200|90210|etc)$/.test(zip); 
```

请注意，我还添加了`^`and`$`以匹配输入字符串的开头和结尾 - 如果用户输入包含该代码的更长字符串（例如，`"abc20132xyz"`将匹配），您也会得到匹配项。

不过，我更倾向于在服务器端进行此验证。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T05:24:17.873

```
<script type="text/javascript">
            function IsValidZipCode(zip) {
                var isValid = /20132/.test(zip);
                if (isValid)
                  window.location = baseurl."/valid.php"
                else {
                    window.location = baseurl."/invalid.php"
                     }
            }
</script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T05:22:45.973

```
function IsValidZipCode(zip) {
    var isValid = /20132/.test(zip);
    if (isValid)
        document.location.href="valid_zip.html";
    else {
        document.location.href="not_valid_zip.html";
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T05:25:03.080

您可以使用以下代码在 javascript 中重定向它，可​​以将其放在您的示例中，而不是 alert()

```
window.location.href = "http://stackoverflow.com"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T05:47:22.783

您可以为此尝试ajax：

```
<html xmlns="http://www.w3.org/1999/xhtml">
        <head>
            <title>Validate Zip Code</title>

<script language="javascript" type="text/javascript">
<!-- 
//Browser Support Code
function IsValidZipCode(zip){

    var ajaxRequest;  // The variable that makes Ajax possible!

    try{
        // Opera 8.0+, Firefox, Safari
        ajaxRequest = new XMLHttpRequest();
    } catch (e){
        // Internet Explorer Browsers
        try{
            ajaxRequest = new ActiveXObject("Msxml2.XMLHTTP");
        } catch (e) {
            try{
                ajaxRequest = new ActiveXObject("Microsoft.XMLHTTP");
            } catch (e){
                // Something went wrong
                alert("Your browser broke!");
                return false;
            }
        }
    }

        //alert(ajaxRequest);
    // Create a function that will receive data sent from the server
    ajaxRequest.onreadystatechange = function(){

        if(ajaxRequest.readyState == 4){
            //var ajaxDisplay = document.getElementById('ajaxDiv');
            //ajaxDisplay.innerHTML = ajaxRequest.responseText;
                        alert(ajaxRequest.responseText);
                        if(ajaxRequest.responseText=="")
                        {
                                alert("sorry we cannot service your area");
                        }
                        else{
                                window.location = "Page.php?zip="+zip+"";
                        }

        }
    }
    //var age = document.getElementById('age').value;
    //var wpm = document.getElementById('wpm').value;
    //var sex = document.getElementById('sex').value;

    var queryString = "?zip=" + zip;

    ajaxRequest.open("GET", "zip_check.php" + queryString, true);
    ajaxRequest.send(null); 
}

//-->
</script>

        </head>

   <body>
    <form name="form1" method="post">
    <input id="txtZip" name="zip" type="text" /><br />
    <input type="button" id="Button1"  value="Check My Zipcode"
    onclick="IsValidZipCode(document.form1.zip.value)" />
    </form>
    </body>
    </html> 
```

# iphone - 是否可以在 iphone 的设置中检测 facebook 登录状态？

> ID：13189740
> 
> 赞同：3
> 
> 时间：2012-11-02T05:19:48.257
> 
> 标签：iphone, ios, facebook-ios-sdk

我想检测到该用户是否已经在 iphone 的设置中登录了 facebook？我正在使用 Facebook ios sdk 3.1 在 twitter 中，我可以通过这个检查它

```
[TWTweetComposeViewController canSendTweet] 
```

任何建议将不胜感激:)，非常感谢您的宝贵时间。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T22:20:42.297

下面会告诉你。它会提示用户许可，但前提是他们在 iOS 设置中启用了 Facebook。查看返回的错误代码以区分不同的故障情况。将“YOUR_FACEBOOK_APPID”替换为您的 Facebook 应用程序的 ID。

```
ACAccountStore *accountStore = [[ACAccountStore alloc] init];
ACAccountType *accountType = [accountStore accountTypeWithAccountTypeIdentifier:ACAccountTypeIdentifierFacebook];
NSDictionary* options = [NSDictionary dictionaryWithObject:@"YOUR_FACEBOOK_APPID" forKey:ACFacebookAppIdKey];
[accountStore requestAccessToAccountsWithType:accountType options:options completion:^(BOOL granted, NSError *error) {
    if(granted) {
        NSLog(@"Access granted");
    }
}]; 
```

未安装帐号：

```
Error Domain=com.apple.accounts Code=6 "The operation couldn’t be completed. (com.apple.accounts error 6.)" 
```

用户拒绝权限：

```
Error Domain=com.apple.accounts Code=7 "The operation couldn’t be completed. (com.apple.accounts error 7.)" 
```

# java - 二叉树的数组表示（打印方法）

> ID：13189741
> 
> 赞同：2
> 
> 时间：2012-11-02T05:19:49.083
> 
> 标签：java, arrays, printing, binary-tree

我完成了我的任务，只是希望输出看起来不错，所以我需要一个打印方法，它可以打印二叉树的树结构（由数组表示）。

在树的数组表示中：

> 如果节点：我
> 
> 孩子：2*i，2*i+1
> 
> 家长：i/2

例如，对于数组

```
value 10 5 8 2 3 6 7
index 1  2 3 4 5 6 7 
```

树表示应该是：

> ```
>  10
>   5      8
> 2   3  6   7 
> ```

它不必与上面显示的完全相同。它可以是正确显示树的任何表示。

有人可以帮我吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T05:27:19.533

这应该很容易。对于第一行，打印 1。第二行，打印数组元素 2、3。第三行，打印数组元素 4、5、6、7。第四排，8,9,10,11,12,13,14,15。看到图案了吗？每一行，您打印元素 2^n 到 2^(n+1) - 1，其中顶行为零。

这假设如果有一些节点没有两个孩子，那些空孩子仍然使用数组中的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-07-31T11:17:09.923

这是任何人的代码。（*好久没用Java写了）

```
public class PrintTree{

    static int PowerOf2(int power)
    {
        return (1<<power);
    }

    static void PrintTreeArray(int array[], int arrayLength)
    {
    int currentLevel = 0;
    int maxPerLevel = PowerOf2(currentLevel);
    for(int i = 0; i < arrayLength; i++)
    {
        if(i == maxPerLevel-1)
        {
            System.out.println("\n");
            currentLevel++;
            maxPerLevel = PowerOf2(currentLevel);
        }
        System.out.print(" "+array[i]);
    }
    }

     public static void main(String []args)
     {
        int[] array = new int[]{0,1,2,3,4,5,6,7,8,9,10,11,12,13,14};
        PrintTreeArray(array,15);
     }
} 
```

# c# - 如果中断，C# Console.Out() 不会写入

> ID：13189743
> 
> 赞同：0
> 
> 时间：2012-11-02T05:20:16.093
> 
> 标签：c#, console-application, filewriter

```
using System;
using System.Diagnostics;
using System.Collections;
using System.Management;
using System.IO;

FileStream ostrm;
    StreamWriter writer;
    TextWriter oldOut = Console.Out;
    try
    {
        ostrm = new FileStream ("./Output.txt", FileMode.OpenOrCreate, FileAccess.Write);
        writer = new StreamWriter (ostrm);
    }
    catch (Exception e)
    {
        Console.WriteLine("Cannot open Output for writing");
        Console.WriteLine(e.Message);
        return;
    }
    foreach (ManagementObject envVar in searcher.Get())
    {
        Console.WriteLine("Username: {0}", envVar["Name"]);
    }
    Console.SetOut (writer);
    foreach (ManagementObject envVar in searcher.Get())
    {
        Console.WriteLine("Username: {0}", envVar["Name"]);
    }
    Console.SetOut (oldOut);
    writer.Close();
    ostrm.Close();
Console.WriteLine("" +
Environment.NewLine + "Press any key to exit");
Console.ReadLine(); 
```

我在控制台应用程序中有这段代码，它需要 AGES 才能完成写入网络上的所有用户，如果它在任何阶段被中断，Output.txt 最终会是空的。有没有办法让它定期保存，以便如果发生任何事情我在文本文件中有用户名？

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T05:22:14.730

你试过`Console.Out.Flush();`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:31:27.353

该程序似乎两次做同样的工作。此外，不要像这样重定向`Console.Out`尝试使用`File.AppendAllText`：

```
foreach (ManagementObject envVar in searcher.Get()) {
    string str = string.Format("Username: {0}\r\n", envVar["Name"]);
    File.AppendAllText("./Output.txt", str);
} 
```

AppendAllText 将在每次写入时打开和关闭文件，因此它可能会更慢但更可靠。

# java - 用每个元素的总和替换数组的方法

> ID：13189744
> 
> 赞同：0
> 
> 时间：2012-11-02T05:20:33.513
> 
> 标签：java, arrays, methods

我需要一个将在我的 Java 考试中出现的概念的帮助。我需要编写一个方法，它接受一个数组并返回一个新数组，每个元素都是它之前元素的总和。即第一个数组是{3, 2, 1, 4}，方法返回的数组是{3, 5, 6, 10}

到目前为止，这是我的代码：

```
public class testPrac1 {
public static void main(String[] args){
    int[] array = {3, 2, 1, 4};

    for (int value: sum(array)) {
        System.out.print(value);
    }
}
public static int[] sum(int[] array) {
    int[] newArray = new int[array.length];

    for (int i = 0; i < array.length ; i++) {
        if (i == 0){
            newArray[i] = array[0];
        }
        else 
            for (int j = 0; j < i; j++) 
                    newArray[i]  =  (array[i] + array[j]);
    }

    return newArray;
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:29:59.730

只是为了调味，怎么样：

```
public static int[] sum(int[] array) {
  int[] newArray = new int[array.length];

  for (int i = 0; i < array.length; i++) {
    newArray[i] = array[i];
    if (i > 0) {
      newArray[i] += newArray[i-1];
    }
  }

  return newArray;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T15:45:39.607

你为什么不试试这个简单的代码：

```
int [] array = {3,5,1,4};
int newarray[]=new int[array.length];
int sum=0;
for(int i=0;i<array.length;i++)
        {sum=sum+array[i];
        newarray[i]=sum;} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T05:35:49.890

```
 public static int[] sum(int[] array) {
        int[] newArray = new int[array.length];

        for (int i = 0; i < array.length ; i++) {
          for (int j = 0; j <= i; j++) 
             newArray[i]  += array[j];
        }
        return newArray;
      } 
```

您不需要条件，因为`<=`将处理`0`. 所以循环只是说遍历数组并将位置中的所有值求和，即 <= 到数组中的当前位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T05:25:52.063

```
for (int j = 0; j <= i; j++) 
    newArray[i]  += array[j]); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T05:27:39.877

试试你的其他部分

```
 for (int j = 0; j <= i; j++) 
     // newArray[i]  =  (array[i] + array[j]);
     newArray[i]  += array[j]; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T05:28:57.880

就这样做

```
 else 
        newArray[i]  = newArray[i-1] + array[i]; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-02T05:29:16.503

前 k 个元素的和等于前 k-1 个元素加上第 k 个元素的和。

在您给出的示例中：

```
{3,2,1,4} --> {3,5,6,10}
3 = 3
3+2 = 5
3+2+1 = 5+1 = 6
3+2+1+4 = 6+4 = 10 
```

所以你真正需要的是：

```
newArray[0]=array[0];
for(int i=1; i<array.length; i++)
    newArray[i]=newArray[i-1]+array[i]; 
```

# c - 如果其他方法中的 printf 被注释，则不显示返回值

> ID：13189747
> 
> 赞同：2
> 
> 时间：2012-11-02T05:20:47.367
> 
> 标签：c

我下面的代码中似乎发生了一些奇怪的事情。当 nthtoken() 中的任何 printf 被注释时，main() 中不会显示任何标记，但是当取消注释 nthtoken() 中的任何 printf 时，main() 中会显示标记。

```
 #include <stdio.h>
 #include <stdlib.h>
 #include <string.h>

 char *nthtoken (char *origStr, char *delimiters, int nth);

 int main (void) {

      char *str = "in principio creavit deus caelum et terram";
      char *delims = " ";

      char *tok = nthtoken (str, delims, 3);
      printf ("token: %s\n", tok);

      return (EXIT_SUCCESS);
 }

 char *nthtoken (char *origStr, char *delimiters, int nth) {

      char str[strlen (origStr)];
      strncpy (str, origStr, strlen (origStr) + 1);

      char *token = NULL;
      token = strtok (str, delimiters);
      // printf ("first token: %s\n", token);

      int i = 0;
      for (i = 0; i < nth; i++) {
           token = strtok (NULL, delimiters);
           //printf ("token inside the loop: %s\n", token); 
      }
      // printf ("token before returning to main(): %s\n", token);
      return token;
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T05:26:51.140

这是一个经典的错误。令牌是本地的。退回它会产生不可预知的结果。如果它没有被覆盖，你可能会在 printf 中得到它，但它不能保证，你不应该这样做。底线是，在函数终止时，局部变量超出范围，技术上不再存在于编译器或运行时。

例如，malloc 并将令牌复制到它（并在 main 中释放它）或将其作为输出参数传递给函数

```
char * ret_string = malloc(MAX_SIZE); // ensure this is always sufficiently large
strcpy(ret_string, token);
return ret_string; 
```

不要忘记释放 main 中的 malloc 内存。

编辑：**线程安全说明**- 正如@grhegde 建议的那样，仅作记录， strtok 不是线程安全的。如果您处于多线程环境中，那么您最好找到替代方案。

*为了进一步解释这一点，strtok 使用一个全局缓冲区来跟踪标记，这意味着当一个字符串被标记时*，不能调用它来标记另一个字符串 。执行此操作的标准解决方案通常使用名为 strtok_r 的函数（r 表示可重入），其中实现对每个调用使用本地缓冲区，因此可以从多个线程轻松调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:58:35.313

除了使用 malloc 并占用 free 开销之外，您也可以以这种方式工作......

```
#include <stdio.h>
 #include <stdlib.h>
 #include <string.h>

 char *nthtoken (char *str, char *delimiters, int nth);

 int main (void) {

      char str[] = "in principio creavit deus caelum et terram";
      char *delims = " ";

      char *tok = nthtoken (str, delims, 3);
      printf ("token: %s\n", tok);

      return (EXIT_SUCCESS);
 }

 char *nthtoken (char *str, char *delimiters, int nth) {

      char *token = NULL;
      token = strtok (str, delimiters);
      // printf ("first token: %s\n", token);

      int i = 0;
      for (i = 0; i < nth; i++) {
                token = strtok (NULL, delimiters);
               //printf ("token inside the loop: %s\n", token); 
      }
      // printf ("token before returning to main(): %s\n", token);
       return token;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T05:30:01.807

这称为**悬空指针**问题。

```
{
  char *token = NULL;
  ....

  return token;
} 
```

[http://en.wikipedia.org/wiki/Dangling_pointer](http://en.wikipedia.org/wiki/Dangling_pointer)

# java - MD5 哈希生成问题

> ID：13189751
> 
> 赞同：0
> 
> 时间：2012-11-02T05:21:09.633
> 
> 标签：java, md5

我正在使用以下代码为我的应用程序生成 MD5 哈希，它编码一些字符串值，然后我通过我的 Web 服务将生成的哈希发送到一些 .Net 代码，该代码读取我的 MD5 哈希并生成字符串的 MD5 他是从数据库获取然后比较它们

```
public static String getMD5Hash(String val) throws Exception {
        byte[] bytes = val.getBytes();

        MessageDigest m = MessageDigest.getInstance("MD5");
        byte[] digest = m.digest(bytes);
        String hash = new BigInteger(1, digest).toString(16);
        System.out.println(hash.length());
        return hash;
    }

    public static void main(String[] asd) throws Exception{
        for(int i=0;i<10;i++){
            System.out.println(getMD5Hash(i+Math.pow(10, i)+""));//for testing
            System.out.println(getMD5Hash(i+""));//for testing
        }
    } 
```

**问题是**当我从 BigInteger 获得转换后的哈希时，有时生成的哈希以 0 开头，在这种情况下，Biginteger 不考虑 0，而另一方面，当 .Net 生成相同字符串的哈希时，它会使用 0 和以这种方式字符串比较返回false，例如我生成并发送的哈希码“ `102678D1922799CF9122B3F103975F1`”在.Net中的哈希是“ `0102678D1922799CF9122B3F103975F1`”

有时它也会生成类似的代码

```
.Net generates  0012678D1922799CF9122B3F103975F1 and java 12678D1922799CF9122B3F103975F1 
```

或者

```
0002678D1922799CF9122B3F103975F1 and 2678D1922799CF9122B3F103975F1 
```

我怎样才能得到这个全为 0 的代码。提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T05:49:59.880

我认为没有`MessageDigest`比仅填充字符串更好的方法了：

```
// ...
StringBuilder builder = new StringBuilder();
for (int i = hash.length(); i < 64; i++) {
  builder.append('0');
}
builder.append(hash);
return builder.toString(); 
```

...但你可以使用[Guava](https://google.github.io/guava/releases/snapshot/api/docs/com/google/common/base/Strings.html))的`Strings.padStart()`：

```
// ...
return Strings.padStart(hash, 64, '0'); 
```

...甚至使用[Guava 的哈希库](http://google.github.io/guava/releases/17.0/api/docs/com/google/common/hash/package-summary.html)，它返回与您的函数完全相同的字符串（我刚刚检查过）：

```
public static String getMD5Hash(String val) throws Exception {
  return Hashing.md5().hashBytes(val.getBytes()).toString();
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-02T18:40:20.753

这个问题有一些更好的生成十六进制字符串的方法：

[在 Java 中，如何将字节数组转换为十六进制数字字符串，同时保持前导零？](https://stackoverflow.com/questions/332079/in-java-how-do-i-convert-a-byte-array-to-a-string-of-hex-digits-while-keeping-l)

由于您已经在使用`BigInteger`，这似乎是最好的解决方案：

```
BigInteger bi = new BigInteger(1, digest);
String hash = String.format("%0" + (digest.length << 1) + "X", bi); 
```

# iphone - 使用 GHUnit 编译单元测试的架构问题

> ID：13189752
> 
> 赞同：8
> 
> 时间：2012-11-02T05:21:12.110
> 
> 标签：iphone, ios, xcode4.5, gh-unit

我正在使用 Xcode 4.5。

最近我下载了 GHunit 框架并通过以下[链接](http://gabriel.github.com/gh-unit/docs/appledoc_include/guide_install_ios_4.html)进行设置。

在编译目标时，我收到下面提到的错误。需要您的宝贵建议。

```
Undefined symbols for architecture i386:
      "_CACurrentMediaTime", referenced from:
          _GHRunForInterval in GHUnitIOS(GHTestUtils.o)
          _GHRunUntilTimeoutWhileBlock in GHUnitIOS(GHTestUtils.o)
    ld: symbol(s) not found for architecture i386
    clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-02T11:28:37.990

`CACurrentMediaTime`在框架中声明`CABase.h`并实现`QuartzCore`，您需要将其链接到项目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-15T19:59:30.527

在我们在学校的移动应用程序开发课程中，我们一直在使用这个教程 [http://www.raywenderlich.com/3716/unit-testing-tutorial-for-ios-xcode-4-quick-start-guide](http://www.raywenderlich.com/3716/unit-testing-tutorial-for-ios-xcode-4-quick-start-guide)

没有 QuartzCore.framework 也无法运行，非常感谢！

# asp.net - 菜单项出现在 Datagrid Asp.net 标题后面如何避免？

> ID：13189756
> 
> 赞同：0
> 
> 时间：2012-11-02T05:21:40.613
> 
> 标签：asp.net, css, datagrid

我遇到了一个非常丑陋的现象，我的菜单项出现在 asp.net 中 Datagrid 的 Header 后面，而且 Datagrid 的 Header 在滚动数据时闪烁

任何帮助，将不胜感激

![在此处输入图像描述](../Images/3e2e81087cac1e5a79c116fe9597fff8.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T05:24:22.250

对于要在其他元素前面显示的元素，将 css 中的z [**-index设置得更高。**](http://www.w3schools.com/cssref/pr_pos_z-index.asp)您还需要设置要放在前面的 div 的绝对位置。

```
<div style="z-index: 8;">.......

<div style="z-index: 10; position:absolute">....... 
```

z-index: 10 的 div 将显示在 z-index: 8 的 div 前面

# sql-server - Sql 是否有任何属性在从一列获取数据时插入和解密时进行加密？

> ID：13189760
> 
> 赞同：0
> 
> 时间：2012-11-02T05:22:09.783
> 
> 标签：sql-server, sql-server-2008

我想知道是否有任何属性或任何方式我想加密表的一列，所以每当我在表中插入或更新任何行时，列会自动加密该数据，并在选择它时解密和数据并获取值那一栏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T07:05:18.970

尝试这个：

```
IF NOT EXISTS(select * from sys.certificates where name='EncryptTestCert')
CREATE CERTIFICATE EncryptTestCert
WITH SUBJECT = 'xyz007'

IF NOT EXISTS(select * from sys.symmetric_keys where name='TestTableKey') 
CREATE SYMMETRIC KEY TestTableKey
WITH ALGORITHM = TRIPLE_DES ENCRYPTION
BY CERTIFICATE EncryptTestCert 
```

现在进行加密

```
ENCRYPTBYKEY(KEY_GUID('TestTableKey'),@string) 
```

用于解密

```
DECRYPTBYKEY(@string) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T08:46:12.123

您正在描述[透明数据库加密](http://msdn.microsoft.com/en-us/library/bb934049.aspx)。这可以透明、即时地加密磁盘上的数据，无需对应用程序进行任何更改。它在 SQL Server 2008 中可用，但需要企业版。

# android - 有效地加载位图

> ID：13189761
> 
> 赞同：2
> 
> 时间：2012-11-02T05:22:12.760
> 
> 标签：android, memory, bitmap

我正在浏览 developer.android 页面以有效地加载位图，在这里：http: [//developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)他们谈论将缩小版本加载到内存中，其中显然是非常有效的。

现在我的问题是给定的方法需要资源的 id，我们在从 Internet 下载图像/位图时没有得到（如果我在这里错了，请纠正我）。

那么有什么方法可以对从互联网下载的图像使用给定方法的一些变体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:28:43.340

嘿，我不知道这种方法，但这是我从互联网下载图像并保存到 sd 卡的方法，您可以根据您的要求使用它我使用保存的方法保存图片

```
public class fetchImage extends Activity implements OnClickListener {
    int id;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        id = 1;// declaring static as of now

    }

    {

        new BackgroundTask().execute();
        File storagePath = Environment.getExternalStorageDirectory();
        File imgFile = new File(storagePath, "/Pictures/" + id + ".jpg");

        if (imgFile.exists()) {
            Bitmap myBitmap = BitmapFactory.decodeFile(imgFile
                    .getAbsolutePath());
        }

    }

    class BackgroundTask extends AsyncTask<Void, Void, Void> {
        ProgressDialog mDialog;

        protected void onPreExecute() {
            mDialog = ProgressDialog.show(fetchImage.this, "",
                    getString(R.string.progress_bar_loading), true);
        };

        @Override
        protected Void doInBackground(Void... params) {
            try {

                savesd(id, null);

            } catch (final Exception e) {

            }
            return null;
        }

        private void savesd(int id, URL uri) throws IOException {
            URL url;
            if (uri == null) {
                url = new URL("http://i.zdnet.com/blogs/3-29-androids.jpg");
            } else {
                url = uri;
            }
            InputStream input = url.openStream();
            try {
                File storagePath = Environment.getExternalStorageDirectory();
                OutputStream output = new FileOutputStream(new File(
                        storagePath, "/Pictures/" + id + ".jpg"));
                try {
                    byte[] buffer = new byte[20000];
                    int bytesRead = 0;
                    while ((bytesRead = input.read(buffer, 0, buffer.length)) >= 0) {
                        output.write(buffer, 0, bytesRead);
                    }
                } finally {
                    output.close();
                }
            } catch (Exception e) {

                e.printStackTrace();
            } finally {
                input.close();
            }

        }

        protected void onPostExecute(Void result) {
            mDialog.dismiss();
        };
    }

    @Override
    public void onClick(View v) {
        // TODO Auto-generated method stub

    }

} 
```

# interop - 如何将从非托管代码中检索到的 System::IntPtr 转换为在 C++/CLI 中定义的委托类型？

> ID：13189763
> 
> 赞同：0
> 
> 时间：2012-11-02T05:22:20.990
> 
> 标签：interop, c++-cli, marshalling, void-pointers, intptr

目前我正在使用两层。一层是 C++/CLI，另一层是我没有源代码的非托管 C++ 图形库。当用户在非托管代码中移动操纵器时，我将数据传递给非托管代码并在回调函数“intermediateCallback”中接收数据。

下面是我如何定义名为“tempFunc”的委托类型。它什么也不接受，也不返回。'intermediateCallback' 的 'void* userData' 参数是我想要转回委托实例的参数。此参数作为转换为 IntPtr 强制转换为 void* 的委托传递到未管理的代码中。我可以将 void* 变回 IntPtr，但如何将其变回委托类型“tempFunc”？

```
delegate void tempFunc();

//the function that the delegate instance actually points to
void libCoin3D::CenterballDragger::memberCallback()
{
....
}

//the function that the unmanaged code will call and pass data to
void intermediateCallback( void * userData, SoDragger *dragger)
{
    System::IntPtr ptr=(System::IntPtr)userData;
    tempFunc^ tF=(tempFunc^)ptr;//this line does not work, I want to do something like it
} 
```

最初，当我将委托传递给非托管代码时，这就是我将委托变成 void* 的方式。

如果 tF 是由以下定义的委托：

```
tempFunc^ tF=gcnew tempFunc(this,&libCoin3D::CenterballDragger::memberCallback); 
```

我将其转换为：

```
(System::Void*)(System::Runtime::InteropServices::Marshal::GetFunctionPointerForDelegate(tF)) 
```

那么是否可以将 void* 转换为 tempFunc？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T07:16:41.663

我解决了一个类似的问题：

```
delegate void tempFunc();

//the function that the delegate instance actually points to
void libCoin3D::CenterballDragger::memberCallback()
{
  ....
}

//the function that the unmanaged code will call and pass data to
void __stdcall intermediateCallback( void * userData, SoDragger *dragger)
{
  using System::Runtime::InteropServices::GCHandle;
  GCHandle gch = GCHandle::FromIntPtr((System::IntPtr)userData);
  tempFunc^ tF = (tempFunc^)gch.Target;

  tF();

  gch.Free(); // If the call only once, otherwise it is necessary to keep the pointer and delete it later     

}

tempFunc^ tF = gcnew tempFunc(this, &libCoin3D::CenterballDragger::memberCallback);

 // pass to unmanaged code
setCallback( &intermediateCallback, (void*)GCHandle::ToIntPtr(GCHandle::Alloc(tF)) ); 
```

# php - 资源 id #4 为什么我会得到这个？

> ID：13189764
> 
> 赞同：4
> 
> 时间：2012-11-02T05:22:39.487
> 
> 标签：php, mysql

我有一个非常基本的论坛模板，我正在为测试目的而工作

当我创建主题并按提交时，进程会更新数据库但不会在屏幕上输出。为什么是这样？当我从下面的代码中回显 $result 时，为什么我会得到一个资源 ID #4：

```
<?php

$host="server"; // Host name 
$username="usernamehere"; // Mysql username 
$password=""; // Mysql password 
$db_name="forum"; // Database name 
$tbl_name="question"; // Table name 

// Connect to server and select databse.
mysql_connect("$host", "$username", "")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");
$sql="SELECT * FROM $tbl_name ORDER BY id DESC";
// OREDER BY id DESC is order result by descending

$result=mysql_query($sql);
echo $result;
?>
<html>
<body>
<table width="90%" border="0" align="center" cellpadding="3" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<td width="6%" align="center" bgcolor="#E6E6E6"><strong>#</strong></td>
<td width="53%" align="center" bgcolor="#E6E6E6"><strong>Topic</strong></td>
<td width="15%" align="center" bgcolor="#E6E6E6"><strong>Views</strong></td>
<td width="13%" align="center" bgcolor="#E6E6E6"><strong>Replies</strong></td>
<td width="13%" align="center" bgcolor="#E6E6E6"><strong>Date/Time</strong></td>
</tr>

<?php

// Start looping table row
while($rows=mysql_fetch_array($result)){
?>
<tr>
<td bgcolor="#FFFFFF"><? echo $rows['id']; ?></td>
<td bgcolor="#FFFFFF"><a href="view_topic.php?id=<? echo $rows['id']; ?>"><? echo $rows['topic']; ?></a><BR></td>
<td align="center" bgcolor="#FFFFFF"><? echo $rows['view']; ?></td>
<td align="center" bgcolor="#FFFFFF"><? echo $rows['reply']; ?></td>
<td align="center" bgcolor="#FFFFFF"><? echo $rows['datetime']; ?></td>
</tr>

<?php
// Exit looping and close connection 
}
mysql_close();
?>

<tr>
<td colspan="5" align="right" bgcolor="#E6E6E6"><a href="create_topic.php"><strong>Create New Topic</strong> </a></td>
</tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-02T05:25:14.140

你得到 `resource id #4`因为`$result`是一种资源，你必须通过这种方式提取其中包含的值，

```
$result=mysql_query($sql);
$values = mysql_fetch_array($result);
var_dump($values); 
```

有关[资源变量的更多信息](http://www.php.net/manual/en/language.types.resource.php)

**更新 2（来自 OP 评论）**

您正在使用字段名称打印值，在这种情况下，您必须更改为

```
while($rows=mysql_fetch_array($result,MYSQL_ASSOC)) 
```

或者您可以直接使用[mysql_fetch_assoc()](http://www.php.net/manual/en/function.mysql-fetch-assoc.php)，在您的情况下将是

```
while($rows=mysql_fetch_assoc($result)){
      echo $rows['id'];
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-02T05:30:33.437

问题出在您的代码中：

```
$result=mysql_query($sql);
echo $result; 
```

`$result`是资源类型，因为`mysql_query($sql)`返回资源 Stop echoing `$result`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-02T05:28:51.603

如果您检查链接 - [http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)

> 对于 SELECT、SHOW、DESCRIBE、EXPLAIN 和其他返回结果集的语句，mysql_query() 成功时返回资源，错误时返回 FALSE

因此，您看到的是资源#4

. 你想达到什么目的？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-18T11:11:15.737

```
<?php

$host="server";
$username="usernamehere"; 
$password=""; 
$db_name="forum";
$tbl_name="question"; 
mysql_connect("$host", "$username", "")or die("cannot connect"); 
mysql_select_db("$db_name")or die("cannot select DB");
$sql="SELECT * FROM $tbl_name ORDER BY id DESC";
// OREDER BY id DESC is order result by descending

$result=mysql_query($sql);
echo $result; //remove it
?>
<html>
<body>
<table width="90%" border="0" align="center" cellpadding="3" cellspacing="1" bgcolor="#CCCCCC">
<tr>
<td width="6%" align="center" bgcolor="#E6E6E6"><strong>#</strong></td>
<td width="53%" align="center" bgcolor="#E6E6E6"><strong>Topic</strong></td>
<td width="15%" align="center" bgcolor="#E6E6E6"><strong>Views</strong></td>
<td width="13%" align="center" bgcolor="#E6E6E6"><strong>Replies</strong></td>
<td width="13%" align="center" bgcolor="#E6E6E6"><strong>Date/Time</strong></td>
</tr>

<?php

// Start looping table row
while($rows=mysql_fetch_array($result)){

echo"<tr>
<td bgcolor=#FFFFFF>$rows['id']</td>
<td bgcolor=#FFFFFF><a href='view_topic.php?id=$rows['id']'>$rows['topic']</a><BR></td>
<td align=center bgcolor=#FFFFFF>$rows['view']</td>
<td align=center bgcolor=#FFFFFF>$rows['reply']</td>
<td align=center bgcolor=#FFFFFF>$rows['datetime'];</td>
</tr>";

// Exit looping and close connection 
}
mysql_close();
?>

<tr>
<td colspan="5" align="right" bgcolor="#E6E6E6"><a href="create_topic.php"><strong>Create New Topic</strong> </a></td>
</tr>
</table>
</body>
</html> 
```

**只需检查上面的代码，我认为您的问题应该解决**

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2015-04-05T23:02:40.543

您不必使用 mysql_fetch_array()。如果你愿意，试试这样的：

```
$sql="SELECT * FROM $tbl_name ORDER BY id DESC"; //that's your query
$result=mysql_query($sql);
$rows=mysql_num_rows($result);
$iteration=0;
echo "<table>";

while($iteration < $rows){
    $cell_in_your_html_table = mysql_result($result , $iteration , 'column_name_from_database');
    echo "<tr><td>".$cell_in_your_html_table."</td></tr>";
      $iteration++;
}
echo "</table>" 
```

# jquery - jQgrid中的编辑功能？

> ID：13189773
> 
> 赞同：0
> 
> 时间：2012-11-02T05:24:09.660
> 
> 标签：jquery, asp.net-mvc, jqgrid-asp.net

我有一个 jQgrid，我需要为其提供编辑功能，当用户单击特定行时，该行详细信息应显示在弹出窗口中...

在我看来，这是我的 jquery 代码

```
 <table id="list" class="scroll" cellpadding="0" cellspacing="0"  width="175"></table>

    <script type="text/javascript">
    $(function () {

        jQuery("#list").jqGrid({
            url: '/Home/GetStudents/',
            datatype: 'json',
            mtype: 'POST',
            colNames: ['StudentID', 'FirstName', 'LastName', 'Email'],
            colModel: [
      { name: 'StudentID', index: 'StudentID', width: 150, align: 'center',sortable:false },
      { name: 'FirstName', index: 'FirstName', width: 150, align: 'center', sortable: true },
      { name: 'LastName', index: 'LastName', width: 150, align: 'center', sortable: false },
      { name: 'Email', index: 'Email', width: 200, align: 'center', sortable: false}],

            pager: jQuery('#pager'),
            width:750,
            rowNum: 15,
            rowList: [5, 10, 20, 50],
            sortname: 'StudentID',
            sortorder: "asc",
            viewrecords: true,
            caption: ' My First JQgrid'
        });

    });

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:09:52.563

你看起来像那样吗？ ![屏幕](../Images/928dbaefb3c77d355bb2b5933030f8d3.png)

[看这里](http://www.trirand.com/blog/jqgrid/jqgrid.html)

# c# - ipad 上的会话为空

> ID：13189776
> 
> 赞同：0
> 
> 时间：2012-11-02T05:24:18.433
> 
> 标签：c#, asp.net-mvc, ipad

我有以下代码在起作用：

```
public JsonResult AddTicketToCart(...)
{
   ... 
   Session.Add("Cart", cart);
   return Json(new { IsSuccess = true }, JsonRequestBehavior.AllowGet);
} 
```

在 JS 代码中：

```
$.get('/desk/AddTicketToCart', { clientId: clientId, sessionId: sessionId, levelId: levelId, places: places, isWithoutPlace: isWithoutPlace, delivery: delivery }, function (data) {
     if (data.IsSuccess) {
          if (isQuickBuy)
              window.location = '/desk/paywizard';
          else
              window.location = $('#wiz_header .first-child>a').attr('href');
      } else {
                 toastr.options.timeOut = 10000;
                 toastr.error('Error.');
                }
            }); 
```

该`PayWizard`动作包含：

```
if (Session["Cart"] == null)
return new HttpNotFoundResult();

var model = CreateViewData<PersonalInfoViewData>();
return View("PersonalInformation", model); 
```

问题在于我在 Ipad 上收到 404 错误。在桌面上一切正常。我将日志消息添加到`AddTicketToCart`：

```
public JsonResult AddTicketToCart(...)
    {
       ... 
       Session.Add("Cart", cart);

       if(Session["Cart"] != null)
            Logging.Log.Info("Cart not null");
       else
            Logging.Log.Info("Cart equal null");

        var test = (CartModel) Session["Cart"];
        if( test != null)
        {
            Logging.Log.Info("CartModel not null");
            Logging.Log.Info("Tickets count: {0}", test.Tickets.Count);
        }
        else
            Logging.Log.Info("CartModel equal null");

       return Json(new { IsSuccess = true }, JsonRequestBehavior.AllowGet);
    } 
```

输出如下：

```
2012-11-02 09:37:34.4887 | Info | Cart not null 

2012-11-02 09:37:34.4887 | Info | CartModel not null 

2012-11-02 09:37:34.4887 | Info | Tickets count: 1 
```

如您所见`Cart`，会话中存在。Butin`Paywizard`等于 null。哪里有问题？

# iphone - 如何从使用 AVFoundation 创建的相机上传视频

> ID：13189779
> 
> 赞同：0
> 
> 时间：2012-11-02T05:25:04.917
> 
> 标签：iphone, ios, avfoundation

我创建了一个只录制视频并将其发送到服务器的应用程序，我使用了[AVCam](http://developer.apple.com/library/ios/#samplecode/AVCam/Listings/Classes_AVCamCaptureManager_m.html)项目寻求帮助。并`MKNetworkKit`用于在服务器上上传视频。

但是当我转换我的输出网址时，`NSData`它会给我无限的数据，`NSLog`我的 xcode 和 iPhone 都会挂起，所以请帮忙。

这是我尝试过的：

```
@implementation AVCamRecorder (FileOutputDelegate)

- (void)             captureOutput:(AVCaptureFileOutput *)captureOutput
didStartRecordingToOutputFileAtURL:(NSURL *)fileURL
                   fromConnections:(NSArray *)connections
{
                           //
    if ([[self delegate] respondsToSelector:@selector(recorderRecordingDidBegin:)]) {
        [[self delegate] recorderRecordingDidBegin:self];
    }

}

- (void)              captureOutput:(AVCaptureFileOutput *)captureOutput
didFinishRecordingToOutputFileAtURL:(NSURL *)anOutputFileURL
                    fromConnections:(NSArray *)connections
                              error:(NSError *)error
{

    videodata = [NSData dataWithContentsOfURL:outputFileURL];   //video data is my NSData

    NSLog(@"output video data is :%@",videodata);   //Here i have get non stop output data and hang
    NSLog(@"output file url is: %@",anOutputFileURL);

    if ([[self delegate] respondsToSelector:@selector(recorder:recordingDidFinishToOutputFileURL:error:)]) {
        [[self delegate] recorder:self recordingDidFinishToOutputFileURL:anOutputFileURL error:error];
    }

    //NSLog(@"captureOutput is: %@",captureOutput);

    //videoPath = [NSString stringWithContentsOfURL:anOutputFileURL encoding:NSUTF8StringEncoding error:nil];

    //videoPath = [anOutputFileURL absoluteString];

    //videoURL = anOutputFileURL;
   // videodata = captureOutput;
   // NSLog(@"video path is: %@",videodata);

    UIAlertView *message = [[UIAlertView alloc] initWithTitle:nil
                                                       message:@"Do you want to upload this content to the yes stream network ?"
                                                      delegate:self
                                             cancelButtonTitle:nil
                                             otherButtonTitles:@"Yes",@"No",nil];
    [message show];
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
    if([title isEqualToString:@"Yes"])
    {
        NSLog(@"Yes was selected.");

        self.flUploadEngine = [[fileUploadEngine alloc] initWithHostName:@"manektech.net" customHeaderFields:nil];

        NSMutableDictionary *postParams = [NSMutableDictionary dictionaryWithObjectsAndKeys:
                                           @"testApp", @"appID",
                                           nil];      
        self.flOperation = [self.flUploadEngine postDataToServer:postParams path:@"/dilipvideotest/savefile.php"];

        [self.flOperation addData:videodata forKey:@"uploadfile" mimeType:@"video/mov" fileName:@"output.mov" ];

        [self.flOperation onCompletion:^(MKNetworkOperation *operation) {

            NSLog(@"response string is : %@", [operation responseString]);

            /*   
             This is where you handle a successful 200 response
             */
        }     
                               onError:^(NSError *error) {
                                   NSLog(@"error : %@", error);
                                   UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                                                                   message:[error localizedDescription]
                                                                                  delegate:nil
                                                                         cancelButtonTitle:@"Dismiss"
                                                                         otherButtonTitles:nil];
                                   [alert show];        
                               }];

        [self.flUploadEngine enqueueOperation:self.flOperation ];

    }
    else if([title isEqualToString:@"No"])
    {
        NSLog(@"No was selected.");
    }
}

@end 
```

这里是我的日志文件：

```
2012-11-02 11:16:25.585 AVFoundationCam[322:707] output file url is :file://localhost/private/var/mobile/Applications/4B2E02E5-3EE2-493E-8ECF-4B1DA29B9387/tmp/output.mov

2012-11-02 10:38:20.172 AVFoundationCam[157:707] output video data is :<00000014 66747970 71742020 00000000 71742020 00000008 77696465 0048f6a2 6d646174 00cc4007 010299cc 3dbd55cc 24c445ef bf3ae6f8 d24efffc 37c1ae35 2e5820d7 9111eef2 78c4b828 851be773 17f438d7 ed6ff47e afd5f439 cc3f2bed f60e0fb1 f2f6ba5e 81fcfbe2 df2b758e 373963b2 2b84f47e 0757c80a baf7abc8 cb0004a6 52001ff2 b257cbfb df66f0b6 3a325664 76dd35fa 758fa705 c1feeb4d 31376570 c4a967da 4d8d2fc2 d5b7c66b 30bc4477 9f0d0701 3099fe12 35a697bd 270d7556 3b24b833 7198a99a 314dcb28 32505930 9ac1a7a3 484c07a4 22d55921 115aae8f 481d2742 35c71af9 c94bd590 f841bf1d e2b9866b 10ecc5ba 333a9da7 9f1c5cb5 8f1a8686 619954c8 d4437dfb 4caa68bd 1164561c 2e15751a c29b0b41 34b1990e a6454c32 c472e79c 26d31699 95a6e164 e2c159ab 9a065e1f 1eaeec74 4445ddb1 11092ed0 b4f66d1a 68bb5a53 a1ee7eec a612b540 1a912034 07c7bffa 6733ad30 c8c43801 26d520c9 12220486 61153df9 ad6624a6 ab716849 25ca924b 912aab41 c16316eb 21a409d6 4175a0f6 9675e80f fbbe61ba 12cf4f7e af73a9a6 029961d7 0bed268a 97a116a0 e27add77 68de97c4 a476a450 9504cb0d d539f984 9b3af0f2 30c4632b AND STILL showing much more data and hang............... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:15:09.657

不要尝试 NSLog 数据。您的视频文件可能非常大。NSLog 将以文本表示形式打印出数据的每个字节。如果您需要知道电影有多大，可以打印出字节数：

```
NSLog(@"output video data size is:%d", videodata.length); 
```

我对 MKNetworkOperation 不熟悉，你需要弄清楚它是否有任何数据大小限制。此外，电影文件通常很大。因此，在分配大量数据块时，您的应用程序可能会耗尽内存。如果服务器端能够以这种方式接收电影，我会考虑通过流逐个发送电影。

# objective-c - 从相册/UIimagepickercontroller 获取电影的创建日期

> ID：13189783
> 
> 赞同：3
> 
> 时间：2012-11-02T05:25:45.093
> 
> 标签：objective-c, ios, uiimagepickercontroller

如何获取通过 UIimagepickercontroller 获得的电影的创建日期。我得到了以下代码，但没有关于创建日期的信息。我也尝试了文件属性，但没有运气。

```
NSURL *url = urlfromimagepicker;
NSDictionary *options = @{ AVURLAssetPreferPreciseDurationAndTimingKey : @YES };
AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:url options:options];

NSArray *metadata = [asset commonMetadata];
for ( AVMetadataItem* item in metadata ) {
    NSString *key = [item commonKey];
    NSString *value = [item stringValue];
    NSLog(@"key = %@, value = %@", key, value);
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T05:38:06.920

```
-(void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    NSString* mediaType = [info objectForKey:UIImagePickerControllerMediaType];

    if(CFStringCompare((CFStringRef) mediaType,  kUTTypeMovie, 0) == kCFCompareEqualTo)
    {
        //Dismiss the media picker view
        [picker dismissModalViewControllerAnimated:YES];

        //Get the URL of the chosen content, then get the data from that URL
        NSURL *videoURL = [info objectForKey:UIImagePickerControllerMediaURL];
        NSData *webData = [NSData dataWithContentsOfURL:videoURL];

        //Gets the path for the URL, to allow it to be saved to the camera roll
        NSString *moviePath = [[info objectForKey:UIImagePickerControllerMediaURL] path];
        if (UIVideoAtPathIsCompatibleWithSavedPhotosAlbum (moviePath))
        {
            ALAssetsLibrary *lib = [[ALAssetsLibrary alloc] init];

            //The key UIImagePickerControllerReferenceURL allows you to get an ALAsset, which then allows you to get metadata (such as the date the media was created)
            [lib assetForURL:[info objectForKey:UIImagePickerControllerReferenceURL] resultBlock:^(ALAsset *asset) {
                NSLog(@"created: %@", [asset valueForProperty:ALAssetPropertyDate]);
            } failureBlock:^(NSError *error) {
                NSLog(@"error: %@", error);
            }];
        }
    }
} 
```

参考这个问题：[如何跟踪 UIImagePickerController 创建/选择的媒体？](https://stackoverflow.com/questions/8474058/how-can-i-keep-track-of-media-created-chosen-by-uiimagepickercontroller)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:38:35.990

`ALAsset`有`valueForProperty`属性，它包含：

```
NSString *const ALAssetPropertyType;
NSString *const ALAssetPropertyLocation;
NSString *const ALAssetPropertyDuration;
NSString *const ALAssetPropertyOrientation;
NSString *const ALAssetPropertyDate;
NSString *const ALAssetPropertyRepresentations;
NSString *const ALAssetPropertyURLs;
NSString *const ALAssetPropertyAssetURL; 
```

像这样使用：

```
ALAssetsLibraryAssetForURLResultBlock resultBlock = ^(ALAsset *myAsset){
     NSLog(@"created Date: %@",[myAsset valueForProperty:ALAssetPropertyDate]);
}; 
```

# powershell - powershell 3.0“get-disk”丢失

> ID：13189785
> 
> 赞同：1
> 
> 时间：2012-11-02T05:25:53.480
> 
> 标签：powershell

我有 Windows 8 企业版 64 位。

我在管理员模式下使用 powershell 并发现缺少“Get-Disk”-命令。

为什么？

我也使用“show-command”并且没有“Get-Disk”命令。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T11:53:40.003

Get-Disk 出现在“Windows Server 2012”中

```
Import-Module Storage

Get-Disk 
```

# sql - SQL获取类别列表但排除没有项目的类别？

> ID：13189786
> 
> 赞同：1
> 
> 时间：2012-11-02T05:25:54.180
> 
> 标签：sql, sqlite

我有一个**类别**表和一个**项目**表。我有大约20个类别。在项目表中有来自这些类别中的 10 个的项目。我想选择项目表中包含项目的所有类别。我想排除所有没有项目的类别。

Items 表有一个与类别的 ID 字段匹配的 categoryID 字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T05:33:06.647

```
select * from categories c inner join items i on i.categoryID = c.id; 
```

或者

```
select * from categories c where c.id in (select i.categoryID from items i); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:31:43.513

试试这个

```
select * from categories c inner join Items I on 
 I.categoryid=c.id 
```

# java - 根据地图内地图的键检索值

> ID：13189788
> 
> 赞同：0
> 
> 时间：2012-11-02T05:26:05.290
> 
> 标签：java, collections, map, struts2, arraylist

我正在做一个项目，我必须根据bank_name连接特定的数据库。我正在使用java，struts2，hibernate。例如：

```
{'sbi': 
   {'host':'111.111.15.45','port':3306,'username':'xxxx','password':'xxxx','database':'sbidb'} 
```

这里**sbi**是一个银行名称，它是一个**键**，然后作为一个值，还有另一个映射。所以我想根据bank_name（例如：'sbi'）检索所有值，例如主机、端口、db。如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:29:27.457

这很简单。

你的地图是这样的：

```
 Map<String, Map<String, String>> map = new HashMap<String, Map<String, String>>();
 ..... 
```

现在您可以从内部映射中检索键值对，如下所示：

```
 Map<String,String> sbiMap = map.get("sbi");
  Set<String> keys = sbiMap.keySet();
  for(String key: keys){
    System.out.println("key="+key+" value = " + sbiMap.get(key));
  } 
```

这将打印映射中的所有内部键和相应的值`sbi`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:30:09.437

你应该有一个`Map<String,Map<String,String>>`. 要获取内部地图的键，请使用地图的`keySet()`功能。前任：

```
Map<String,Map<String,String>> X;
Set<String> sbikeys = X.get('sbi').keySet(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T05:37:08.957

您可以使用以下数据结构来实现这一点

```
Map<String, Map<String,String> bankdetails =  new HashMap<String, Map<String,String> (); 
```

放置 sbi 的详细信息，

首先填充 sbi 的具体细节

```
HashMap<String, String> details =  new HashMap<String,String>();

   details.put("host","XXXX);

   details.put("port", "101111");

  ...... 
```

然后使用将sbi的详细信息如下

```
bankdetails.put(sbi ,details); 
```

# c++ - 覆盖动态分配的内存-C++

> ID：13189789
> 
> 赞同：2
> 
> 时间：2012-11-02T05:26:33.703
> 
> 标签：c++, memory, dynamic

我现在正在做一个任务，我们创建我们自己的基本的、动态分配的向量结构。我们应该做的功能之一是在用户输入值时扩展向量的功能。

```
struct Vector{//vector structure
    unsigned int size;
    Elem *svector;
};

Vector *extend_vec(Vector *extend,Elem element){
    if (extend==NULL){
        return NULL;}

    Elem *tempVec=new Elem[(*extend).size];

    memcpy(tempVec,(*extend).svector,sizeof((*extend).svector));//copies memory from the original array to the temp array

    (*extend).size+=1;

    delete[] (*extend).svector;//clears the memory

    (*extend).svector=new Elem[(*extend).size];//reallocates with the new size

} 
```

Elem =浮动顺便说一句**

我的问题是这条线是否必要，为什么：

```
 delete[] (*extend).svector;//clears the memory 
```

我对在这种情况下如何覆盖/重新分配内存有点模糊。我不确定重新分配是否会覆盖已经存在的内容。

**所以我阅读了每个人的评论，这就是我想出的。

```
Vector *extend_vec(Vector *extend,Elem element){
    if (extend==NULL){
            return NULL;}

    Elem *tempVec=new Elem[extend->size+1];
    tempVec[extend->size+1]=element;

     memcpy(tempVec,extend->svector,(extend->size*sizeof(Elem)));//copies the memory from the original array to the rest of the temp array

    extend->size+=1;

    delete[] extend->svector;//clears the memory

    extend->svector=tempVec;//the original vector now becomes the extended vector

    delete[] tempVec;//clears the temporary memory

    return extend;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T05:41:43.430

你没有覆盖任何东西，你正在分配一个新的、更长的数组来代替旧数组。因此，您需要在完成后删除旧数组。

但是，函数的最后一行是错误的。您将旧`svector`数组的内容复制到中`tempVec`，但不是使用它来替换，而是`svector`分配另一个数组。最后一行应该是：

```
extend->svector = tempVec; 
```

另一件事：由于您的函数被声明为返回 Vector*，因此您需要`return extend;`在此之后声明。

顺便说一句，我认为`ptr->member`是首选样式而不是`(*ptr).member`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T05:45:54.330

我认为这里提供的代码不会按预期工作。我想你想要的是：

```
Elem *tempVec = new Elem[extend->size +1];
tempVec[extend->size] = element;
memcpy(tempVec, extend->svector, extend->size);
delete[] extend->svector;
extend->svector = tempVec;
extend->size += 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T05:41:30.570

这条线是必要的，你也 `delete[] (*extend).svector;//clears the memory`需要释放`tempVec``delete [] tempVec;`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T06:15:46.427

您发布的代码中有几个错误。

这将为您可能想要的 Vector*当前大小分配足够的空间 (*extend).size + 1*

```
 Elem *tempVec=new Elem[(*extend).size]; 
```

这只会复制存储指针所需的字节，即 sizeof((*extend).svector)，

```
 memcpy(tempVec,(*extend).svector,sizeof((*extend).svector));//copies memory from the original array to the temp array 
```

您应该复制以前存储的所有字节，即`(*extend).size * sizeof(Elem)`

```
 (*extend).size+=1; 
```

这会将先前保留的内存返回给运行时。你必须为你所做的每一件事都这样`new[]`做。

```
 delete[] (*extend).svector;//clears the memory 
```

接下来，这指向另一个分配的内存块......但*不是*您之前复制到的块。这应该是`(*extend).svector = tempVec;`

```
 (*extend).svector=new Elem[(*extend).size];//reallocates with the new size 
```

最后，您永远不会将新值复制到新分配的空间中！也就是说，你错过了类似的东西

```
 (*extend).svector[(*extend).size - 1] = element; 
```

# android - 如何在表格布局中绘制水平线和垂直线

> ID：13189790
> 
> 赞同：7
> 
> 时间：2012-11-02T05:26:34.977
> 
> 标签：android, android-layout

我想要在表格行内绘制一条*垂直和水平线。*

我不能附上图片

我尝试在表格行中画线`TextView`，但线没有正确连接下面是我的**xml**和**样式**

```
 <TableLayout
    android:id="@+id/traningprogram_tabla_monday"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:stretchColumns="0,1,2,3"
     >

            <TableRow
                android:id="@+id/traningprogram_tableRow_mondayHeading"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content" 

                >

                <TextView
                    android:id="@+id/traningprogram_textView_mondayheadingWeek"
                    android:layout_width="0dip"
                      android:layout_weight="1"
                    android:layout_height="wrap_content"
                    android:padding="5dp"
                    android:textSize="12dp"
                    android:text="TextView" />

                <TextView
                    android:id="@+id/traningprogram_textView_mondeyheadingWeekName"
                    android:layout_width="0dp"
                    android:layout_height="25dp"
                    android:layout_weight="1"
                    android:padding="5dp"
                    android:textSize="12dp"
                    android:text="TextView" />

            </TableRow>

            <TableRow android:id="@+id/traningprogram_tableRow_workspeed" android:layout_width="wrap_content" android:layout_height="wrap_content">                    

                <TextView
                    android:id="@+id/traningprogram_textView_workspeed"
                    android:layout_width="0dip"
                     android:layout_weight="1"
                    android:layout_height="25dp"
                    android:background="@drawable/cell_shape"
                    android:padding="5dp"
                    android:text="@string/workspeed"
                    android:textSize="12dp"

                    ></TextView>

               <TextView 
                   android:background="@drawable/cell_shape" 
                   android:padding="5dp" 
                   android:id="@+id/traningprogram_textView_workspeedvalue"
                   android:layout_width="0dip" 
                   android:layout_weight="1" 
                   android:layout_height="25dp"  
                   android:textSize="12dp"
                   android:text="TextView"></TextView>

            </TableRow>

               <TableRow android:id="@+id/traningprogram_tableRow_recoveryspeed" android:layout_width="match_parent" android:layout_height="wrap_content">                    

                <TextView
                    android:id="@+id/traningprogram__textView_recoveryspeed"
                    android:layout_width="0dip"
                    android:layout_height="25dp"
                    android:layout_weight="1"
                    android:background="@drawable/cell_shape"
                    android:padding="5dp"
                     android:textSize="12dp"
                    android:text="@string/recoveryspeed" ></TextView>

                <TextView 
                    android:background="@drawable/cell_shape" 
                    android:padding="5dp" 
                    android:layout_weight="1"
                    android:textSize="12dp"
                    android:id="@+id/traningprogram_textView_recoverspeedvalue" 
                    android:layout_width="0dp" android:layout_height="25dp"  
                    android:text="TextView"></TextView>

            </TableRow>
            <TableRow android:id="@+id/traningprogram_tableRow_workduration" android:layout_width="match_parent" android:layout_height="wrap_content">                    

                <TextView
                    android:id="@+id/traningprogram_textView_workduration"
                    android:layout_width="0dip"
                    android:layout_height="25dp"
                    android:layout_weight="1"
                    android:background="@drawable/cell_shape"
                    android:padding="5dp"
                    android:textSize="12dp"
                    android:text="@string/workduration" ></TextView>

                <TextView 
                    android:background="@drawable/cell_shape" 
                    android:padding="5dp" 
                    android:layout_weight="1"
                     android:textSize="12dp"
                    android:id="@+id/textView_workdurationValue" 
                    android:layout_width="0dp" 
                    android:layout_height="25dp"  
                    android:text="TextView"></TextView>

            </TableRow>

             <TableRow android:id="@+id/traningprogram_tableRow_recoverduration" android:layout_width="match_parent" android:layout_height="wrap_content">                    

                <TextView
                    android:id="@+id/traningprogram_textViewrecoverduration"
                    android:layout_width="0dip"
                    android:layout_height="25dp"
                    android:layout_weight="1"
                    android:background="@drawable/cell_shape"
                    android:padding="3dp"
                    android:text="@string/recoveryduration" ></TextView>

                <TextView
                    android:id="@+id/traningprogram_textView_recoverydurationvalue"
                    android:layout_width="0dip"
                    android:layout_height="25dp"
                    android:layout_weight="1"
                    android:padding="3dp"
                    android:text="TextView"
                    android:textSize="12dp" />

            </TableRow>

              <TableRow android:id="@+id/traningprogram__tableRow_repe" android:layout_width="match_parent" android:layout_height="wrap_content">                    

                <TextView
                    android:id="@+id/traningprogram_textView_repes"
                    android:layout_width="0dip"
                    android:layout_height="25dp"
                    android:layout_weight="1"
                    android:background="@drawable/cell_shape"
                    android:padding="5dp"
                     android:textSize="12dp"
                    android:text="@string/reps" >
                  </TextView>
                <TextView 
                    android:background="@drawable/cell_shape" 
                    android:padding="5dp" 
                    android:id="@+id/traningprogram_textView_repes"
                     android:layout_width="0dip"
                     android:layout_weight="1" 
                     android:layout_height="25dp"  
                      android:textSize="12dp"
                     android:text="TextView"></TextView>

            </TableRow>
        </TableLayout> 
```

**可绘制/单元格形状**

```
 <?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:bottom="1dp"
        android:left="-2dp"
        android:right="1dp"
        android:top="-3dp">
        <shape android:shape="rectangle" >
            <stroke
                android:width="1dp"
                android:color="#FF000000" />

            <solid android:color="#00FFFFFF" />
        </shape>
    </item>

</layer-list> 
```

提前感谢您的帮助

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-02T05:35:31.530

**对于水平线**

```
view v = new View(this);
            v.setLayoutParams(new TableRow.LayoutParams(TableRow.LayoutParams.MATCH_PARENT, 1)); 
```

**对于垂直线**

```
 view v = new View(this);
 v.setLayoutParams(new TableRow.LayoutParams(1, TableRow.LayoutParams.MATCH_PARENT)); 
```

将此添加到您的代码中并以编程方式将其添加到表行

**编辑：**

```
TableRow row;
row=(TableRow)findViewById(R.id.traningprogram_tableRow_mondayHeading);
row.addView(v); 
```

如果您想在**xml**中创建它，请在每行 items( `TextView`)之后使用此代码

**用于 XML 中的水平线**

```
<View android:layout_width="match_parent"
      android:background="@android:color/red" 
                    android:layout_height="2dp" /> 
```

**用于 XML 中的垂直线**

```
<View android:layout_width="2dp"
      android:background="@android:color/red" 
      android:layout_height="match_parent"/> 
```

试试这个它会工作

# c++ - 使用 C++ Win32 API 禁用消息框右上角的 X 按钮图标？

> ID：13189791
> 
> 赞同：6
> 
> 时间：2012-11-02T05:26:43.953
> 
> 标签：c++, windows, winapi, dialog

我正在使用 C++ win32 API ...

我有一个包含`OKCANCEL`按钮的 Windows 消息框...

消息框的右上角有一个关闭（X 按钮）...

`retun1=MessageBox(hDlg,TEXT("Your password will expired,you must change the password"),TEXT("Logon Message"),MB_OK | MB_ICONINFORMATION);`

我只想使用`CANCEL`按钮关闭消息框...

所以，我想禁用 X 按钮图标...

我已经在尝试`MB_ICONMASK` `MB_MODEMASK`这样的 Somethink 了。

但我无法得到它，我需要什么...

我该如何解决？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T05:34:22.213

在您的 OnInitDialog 中，您可以尝试：

```
CMenu* pSysMenu = GetSystemMenu(FALSE);

if (pSysMenu != NULL)
{
//disable the X
pSysMenu->EnableMenuItem (SC_CLOSE, MF_BYCOMMAND|MF_GRAYED);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-02T07:41:19.440

您可以使用`SetWindowsHookEx()`安装特定于线程的`WH_CBT`钩子来获取 MessageBox `HWND`，然后您可以以任何您想要的方式操作它。例如：

```
HHOOK hHook = NULL;

LRESULT CALLBACK CBTHookProc(int nCode, WPARAM wParam, LPARAM lParam)
{
    if (nCode == HCBT_CREATEWND)
    {
        HWND hMsgBox = (HWND) wParam;
        LONG_PTR style = GetWindowLongPtr(hMsgBox, GWL_STYLE);
        SetWindowLongPtr(hMsgBox, GWL_STYLE, style & ~WS_SYSMENU);
    }

    return CallNextHookEx(hHook, nCode, wParam, lParam);
}

int WarnAboutPasswordChange(HWND hDlg)
{
    hHook = SetWindowsHookEx(WH_CBT, (HOOKPROC)CBTHookProc, NULL, GetCurrentThreadId());

    int retun1 = MessageBox(hDlg, TEXT("Your password will expired, you must change the password"), TEXT("Logon Message"), MB_OK | MB_ICONINFORMATION);

    if (hHook)
    {
        UnhookWindowsHookEx(hHook);
        hHook = NULL;
    }

    return retun1;
} 
```

在 Windows Vista 及更高版本上，还有另一种解决方案 - 使用`TaskDialogIndirect()`而不是`MessageBox()`. 从字段中省略`TDF_ALLOW_DIALOG_CANCELLATION`标志`TASKDIALOGCONFIG.dwFlags`将禁用 X 按钮以及 Escape 键：

```
int WarnAboutPasswordChange(HWND hDlg)
{
    TASKDIALOGCONFIG config = {0};
    config.cbSize = sizeof(config);
    config.hwndParent = hDlg;
    config.dwCommonButtons = TDCBF_OK_BUTTON;
    config.pszWindowTitle = L"Logon Message";
    config.pszMainInstruction = L"Your password will expired, you must change the password";
    config.pszMainIcon = TD_INFORMATION_ICON;
    config.nDefaultButton = IDOK;

    int retun1 = 0;
    TaskDialogIndirect(&config, &retun1, NULL, NULL);

    return retun1;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-02T05:39:03.503

除了您给我们的问题之外，很可能还有一个更大的问题，但是禁用关闭按钮的一种方法是将类样式设置为 include `CS_NOCLOSE`，您可以使用窗口句柄和`SetClassLongPtr`. 考虑以下完整示例：

```
#include <windows.h>

DWORD WINAPI CreateMessageBox(void *) { //threaded so we can still work with it
    MessageBox(nullptr, "Message", "Title", MB_OKCANCEL);
    return 0;
}

int main() {
    HANDLE thread = CreateThread(nullptr, 0, CreateMessageBox, nullptr, 0, nullptr);

    HWND msg;
    while (!(msg = FindWindow(nullptr, "Title"))); //The Ex version works well for you

    LONG_PTR style = GetWindowLongPtr(msg, GWL_STYLE); //get current style
    SetWindowLongPtr(msg, GWL_STYLE, style & ~WS_SYSMENU); //remove system menu 

    WaitForSingleObject(thread, INFINITE); //view the effects until you close it
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-09-13T21:02:27.643

只需使用此功能：

```
void DisableCloseButton(HWND hwnd)
{
    EnableMenuItem(GetSystemMenu(hwnd, FALSE), SC_CLOSE,
        MF_BYCOMMAND | MF_DISABLED | MF_GRAYED);
} 
```

# javascript - 在使用 html5 捕获图像时需要帮助

> ID：13189798
> 
> 赞同：0
> 
> 时间：2012-11-02T05:27:26.583
> 
> 标签：javascript, html, cordova, camera

我正在尝试使用 html5 为移动设备制作一个简单的相机应用程序。我使用以下方法来使用 html5 捕获图像，但它们都不起作用。首先，我尝试使用 navigator obj 的 getUserMedia 函数，但我在 android 平板电脑上的最新版本 chrome 上不支持它。其次，我尝试使用phoneGap。我从 code.google 下载了 js phonegap 文件，但是每当我运行 navigator.camera.getPicture(); 函数，在导入 phonegap.js 后，我运行时出现以下错误，“无法调用未定义的 getPicture”。您对我制作这个简单的应用程序有什么解决方案或建议吗？提前致谢。这是我用于调试的一个小示例代码，它不起作用。PS我不认为我应该使用jquery插件，

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<body>
<script>    navigator.camera.getPicture();   </script>
<script src="phonegap-1.0.0.js"/>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:41:32.773

我不认为 navigator.camera 在 W3C 规范中的任何地方都有指定。这种设备不在 HTML5 域中。

以防万一，至少在 iOS6 上这个元素：

```
<input type=file> 
```

放置在可提交的表单中将允许您进行相机拍摄并将其发送到服务器。

# url-rewriting - Asp.net Forms 不匹配 global.asax 中定义的任何规则？

> ID：13189804
> 
> 赞同：1
> 
> 时间：2012-11-02T05:27:46.120
> 
> 标签：url-rewriting, routing

我有一个规则：

```
routes.MapPageRoute("routenamea", "{brandname}-prices/", "page.aspx") 
```

在`global.asax`和链接`/dell-prices`。

但是，该规则不匹配并重定向到主页。请问是什么问题？

# java - java Method.invoke()：如何检查是否指定了有效的jar？

> ID：13189805
> 
> 赞同：0
> 
> 时间：2012-11-02T05:27:56.067
> 
> 标签：java, reflection, jar, swt

我正在使用[此处](https://stackoverflow.com/a/3204032/1360074)的代码动态加载适当的 SWT 库。

```
Method addUrlMethod = URLClassLoader.class.getDeclaredMethod("addURL", URL.class);
addUrlMethod.setAccessible(true);
....
URL swtFileUrl = new URL("rsrc:" + swtFileName);
addUrlMethod.invoke(classLoader, swtFileUrl); 
```

现在只是为了实验，我将 swt_win32_x86.jar 文件更改为一个空文件。但是行“addUrlMethod.invoke(classLoader, swtFileUrl);” 不会抛出任何异常。

为什么会这样？以及如何检查 swtFileName 是否是有效的 SWT 库文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:12:12.377

> 为什么会这样？

如果您查看`URLClassLoader.addURL`，它只会将参数添加到要搜索的 URL 列表中。

> 以及如何检查 swtFileName 是否是有效的 SWT 库文件？

尝试加载一个应该存在的类：

```
try {
    classLoader.loadClass("org.eclipse.swt.SWT");
} catch (ClassNotFoundException e) {
    ...
} 
```

# tridion - 需要帮助使用现有蓝图开发 tridion 移动网站

> ID：13189812
> 
> 赞同：-5
> 
> 时间：2012-11-02T05:28:48.567
> 
> 标签：tridion, tridion-2011

Tridion 顾问为我的公司开发了以下蓝图（蓝图 1）的 tridion 网站。现在公司需要用现有的内容（网站内容）开发tridion移动网站，但要有新的外观和感觉（蓝图2）。

Tridion 顾问已对 tridion 进行了基础培训，以修改内容并创建新的页面模板和组件模板（我只是复制现有的以创建新模板）。我不知道 tridion 移动网站。我的公司希望我开发 tridion 移动网站。

我计划使用响应式网页设计来开发 tridion 移动网站。所以它会自动调整整个手机和平板电脑的屏幕。请提供您的建议和指导以开发 tridon 移动网站。

蓝图 1

空父 --> 内容 --> 网站设计 --> 网站

蓝图 2

空父 --> 内容 --> 网站设计 --> 网站

```
 |
                  |-------> Mobile Design --> Mobile site 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T08:24:00.657

听起来您已经接受过的培训并未深入介绍 BluePrinting。使您的蓝图正确非常重要，因为错误的选择可能会限制您未来的设计决策。我建议两件事：

1.  立即获取有关如何扩展当前 BluePrint 的详细信息的专业建议
2.  如果您将来要进行这种开发，请考虑自己学习相关的培训模块。

# java - 如何使 Spring 缓存中的缓存名称可配置？

> ID：13189814
> 
> 赞同：8
> 
> 时间：2012-11-02T05:28:51.003
> 
> 标签：java, spring, caching, dependency-injection

我们使用 Spring 缓存框架进行缓存，我们希望能够支持多个缓存命名空间，例如“book”或“isbn”，缓存命名空间是可配置的，而不是在类中硬编码，例如，具有

```
@Cacheable({ "book","isbn"})
public Book findBook(ISBN isbn) {...} 
```

我们希望能够以某种方式从属性文件中注入缓存名称，以便可以动态设置缓存名称，例如：

```
@Cacheable({ #cachename1, #cachename2})
public Book findBook(ISBN isbn) {...} 
```

我在这里使用SpEL，但不知道这是否可行。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-08-17T17:50:50.647

离开[smartwjw](https://stackoverflow.com/users/2576076/smartwjw)的答案......

我希望通过 spring 环境变量解析 cacheNames，例如`@Cacheable("${my.config.property.name}")`. 我通过自定义完成了这个`CacheResolver`

```
import java.util.Collection;
import java.util.stream.Collectors;

import org.springframework.cache.CacheManager;
import org.springframework.cache.interceptor.CacheOperationInvocationContext;
import org.springframework.cache.interceptor.SimpleCacheResolver;
import org.springframework.core.env.PropertyResolver;

public class PropertyResolvingCacheResolver
    extends SimpleCacheResolver {

    private final PropertyResolver propertyResolver;

    protected PropertyResolvingCacheResolver(CacheManager cacheManager, PropertyResolver propertyResolver) {
        super(cacheManager);
        this.propertyResolver = propertyResolver;
    }

    @Override
    protected Collection<String> getCacheNames(CacheOperationInvocationContext<?> context) {
        Collection<String> unresolvedCacheNames = super.getCacheNames(context);
        return unresolvedCacheNames.stream()
            .map(unresolvedCacheName -> propertyResolver.resolveRequiredPlaceholders(unresolvedCacheName)).collect(Collectors.toList());
    }
} 
```

然后当然您必须将其配置为 THE`CacheResolver`才能与`@Configuration`that extends一起使用`org.springframework.cache.annotation.CachingConfigurerSupport`。

```
@Configuration
@EnableCaching
public class CacheConfig extends CachingConfigurerSupport {

    public static final String PROPERTY_RESOLVING_CACHE_RESOLVER_BEAN_NAME = "propertyResolvingCacheResolver";

    @Autowired
    private CacheManager cacheManager;
    @Autowired
    private Environment springEnv;

    @Bean(PROPERTY_RESOLVING_CACHE_RESOLVER_BEAN_NAME)
    @Override
    public CacheResolver cacheResolver() {
        return new PropertyResolvingCacheResolver(cacheManager, springEnv);
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-01-21T10:09:49.777

Spring 4.1 引入了`CacheResolver`，并且使用你自定义`CacheResolver`的选择`Cache`然后可以是动态的。[spring 4.1 缓存改进](https://spring.io/blog/2014/06/16/further-cache-improvements-in-spring-4-1)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T08:03:06.770

`value`不，@ Cacheable 注释的缓存名称 ( ) 属性不支持动态（SpEL 或其他）表达式。您必须实现自己的版本`org.springframework.cache.annotation.SpringCacheAnnotationParser`并将其注入框架。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-15T13:33:05.583

你也可以直接使用缓存，让一切更加可预测

```
EhCacheCacheManager cacheManager = (EhCacheCacheManager) CDBBeanFactory.instance().getBean("cacheManager");
CacheManager manager cacheManager.getCacheManager();
manager.getCache("cacheBin").get("key");
manager.getCache("cacheBin").put(new Element(key, obj)); 
```

ETC ..

# html - 如何在 Apache 中为 IE8 和 IE9 设置不同的 X-UA 兼容选项？

> ID：13189817
> 
> 赞同：0
> 
> 时间：2012-11-02T05:29:01.547
> 
> 标签：html, apache, browser, internet-explorer-8

我在 IE8 中渲染大表时遇到了问题（请参阅[this](http://social.msdn.microsoft.com/Forums/en-US/iewebdevelopment/thread/2afa46aa-16bb-4e65-be38-a6de19b2b2e9)），它变得非常缓慢并且挂起。这在 IE7 中工作正常，所以为了解决它，我`Header add X-UA-Compatible IE=EmulateIE7`在我的 Apache`httpd.conf`文件中使用了它，现在一切正常。我也使用 IE9，我的网站在为 IE7 仿真添加 HEADER 时效果很好。但有了这个修复IE9也使用`EmulateIE7`我宁愿它使用IE9渲染引擎。我希望 IE8 使用 IE7 渲染引擎，而 IE9 使用 IE9 渲染引擎。

有谁知道如何在同一个网站上做到这一点？在同一修复中添加另一个条目不起作用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T05:48:10.520

我认为您不能在 Apache 中指定这一点 - 您正在尝试基于用户代理执行逻辑，这是不可靠的。更好的方法是在每页评估。您可能需要使用这样的东西：

```
<meta http-equiv="X-UA-Compatible" content="IE=7, IE=9"> 
```

阅读内容：[使用“X-UA-Compatible”为 IE8 模拟 IE7，但不为 IE9 模拟](https://stackoverflow.com/questions/3413629/emulate-ie7-for-ie8-but-not-for-ie9-using-x-ua-compatible)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-17T04:00:34.677

是的，我们可以做到，请参考：设置服务器级响应标头

```
1\. Open httpd.conf in a text editor

2\. Uncomment (or add)  “LoadModule headers_module modules/mod_headers.so”

3\. Add the following configuration fragment at the end of the httpd.conf file:

<IfModule headers_module>

   Header set X-UA-Compatible: IE=EmulateIE7

</IfModule>

4\. Save httpd.conf file

5\. Restart the Apache server

6\. Browse the test web page 
```

参考链接：http: [//blogs.msdn.com/b/hanuk/archive/2008/08/28/apache-httpd-configuration-for-ie7-standard-mode-rendering-in-ie8.aspx](http://blogs.msdn.com/b/hanuk/archive/2008/08/28/apache-httpd-configuration-for-ie7-standard-mode-rendering-in-ie8.aspx)

# mysql - MySQL订购多列不起作用

> ID：13189821
> 
> 赞同：1
> 
> 时间：2012-11-02T05:29:25.197
> 
> 标签：mysql, sql-order-by, multiple-columns

这是我正在处理的查询：

```
SELECT i.*,  
CASE WHEN i.modified = 0 THEN i.created ELSE i.modified END as lastChanged, c.name as categoryname,c.id as categoryid, c.alias as categoryalias, c.params as categoryparams   
FROM mc23r_k2_items as i  
LEFT JOIN mc23r_k2_categories AS c  
ON c.id = i.catid  
WHERE i.published = 1  
AND c.id IN (1,2,3,4)  
ORDER BY c.ordering, i.ordering  
LIMIT 0, 100 
```

我是完整的新手加入和先进的东西。上述查询的结果是返回 catid 如下：

```
c.ordering: 2 1 2 1 2 1 2 2 2 3 3 3 4 4 4 4 4  
i.ordering: 1 1 2 2 3 3 4 5 6 1 2 3 1 2 3 4 5 
```

我正在寻找订单

```
c.ordering: 1 1 1 2 2 2 2 2 2 3 3 3 4 4 4 4 4
i.ordering: 1 2 3 1 2 3 4 5 6 1 2 3 1 2 3 4 5 
```

请问我应该对查询做些什么改变。只有`c.ordering`第 1 列和第 2 列是冲突点，其余的模式都很好。

据我所知`c.ordering`，应该首先订购为什么第 1 列和第 2 列是混乱的？

`**mc23r_k2_items**
id INT(11)
title VARCHAR(255)
alias VARCHAR(255)
catid INT(11)
published SMALLINT(6)
introtext MEDIUMTEXT
fulltext MEDIUMTEXT
video TEXT
gallery VARCHAR(255)
extra_fields TEXT
extra_fields_search TEXT
created DATETIME
created_by INT(11)
created_by_alias VARCHAR(255)
checked_out INT(10)
checked_out_time DATETIME
modified DATETIME
modified_by INT(11)
publish_up DATETIME
publish_down DATETIME
trash SMALLINT(6)
access INT(11)
ordering INT(11)
featured SMALLINT(6)
featured_ordering INT(11)
image_caption TEXT
image_credits VARCHAR(255)
video_caption TEXT
video_credits VARCHAR(255)
hits INT(10)`

`**mc23r_k2_categories**
id INT(11)
name VARCHAR(255)
alias VARCHAR(255)
description TEXT
parent INT(11)
extraFieldsGroup INT(11)
published SMALLINT(6)
access INT(11)
ordering INT(11)
image VARCHAR(255)
params TEXT
trash SMALLINT(6)
plugins TEXT
language CHAR(7)`

* * *

**这是我的问题的简化版本，谢谢大家的时间。请运行以下 sql 代码片段**

```
CREATE DATABASE `test1` DEFAULT CHARACTER SET latin1 COLLATE latin1_swedish_ci;  
USE `test1`;  

CREATE TABLE IF NOT EXISTS `mc23r_k2_categories` (  
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,  
  `ordering` int(11) NOT NULL DEFAULT '0',  
  PRIMARY KEY (`id`),
  KEY `ordering` (`ordering`)  
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=16 ;  

INSERT INTO `mc23r_k2_categories` (`id`, `ordering`) VALUES  
(1, 1),  
(2, 1),  
(3, 2),  
(4, 3),  
(5, 2),  
(6, 1),  
(7, 2),  
(8, 3),  
(9, 4),  
(10, 1),  
(11, 2),  
(12, 3),  
(13, 4),  
(14, 5),  
(15, 6);  

CREATE TABLE IF NOT EXISTS `mc23r_k2_items` (  
  `id` int(11) NOT NULL AUTO_INCREMENT,  
  `catid` int(11) NOT NULL,  
  `ordering` int(11) NOT NULL DEFAULT '0',  
  PRIMARY KEY (`id`),  
  KEY `catid` (`catid`),  
  KEY `ordering` (`ordering`)  
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 AUTO_INCREMENT=58 ;  

INSERT INTO `mc23r_k2_items` (`id`, `catid`, `ordering`) VALUES  
(1, 2, 1),  
(2, 2, 2),  
(3, 2, 3),  
(4, 2, 4),  
(5, 2, 5),  
(6, 2, 6),  
(7, 3, 1),  
(8, 3, 2),  
(9, 3, 3),  
(10, 3, 4),  
(11, 4, 1),  
(12, 4, 2),  
(13, 4, 4),  
(14, 4, 3),  
(15, 4, 5),  
(16, 1, 2),  
(17, 1, 3),  
(18, 1, 1); 
```

* * *

**请运行下面的查询来模拟我的问题**

```
 SELECT catid  
  FROM mc23r_k2_items as i  
  LEFT JOIN mc23r_k2_categories AS c  
  ON c.id = i.catid  
  WHERE  c.id IN (1,2,3,4)  
  ORDER BY c.ordering, i.ordering  
  LIMIT 0, 100 
```

* * *

结果集不是由 catid 排序的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:48:45.490

查询实际上是按照它的意图进行的。问题在于 c.ordering 值，在我的项目中，父类别具有相同的排序值 (1)，其第一个子类别具有相同的排序值 (1)
感谢大家的宝贵时间@nawfal。

# c# - 按上次写入时间对 Visual Studio 解决方案的文件夹进行排序

> ID：13189825
> 
> 赞同：1
> 
> 时间：2012-11-02T05:29:51.160
> 
> 标签：c#, visual-studio-2010, filesystemwatcher

我有一个文件夹，里面有一堆 Visual Studio 2010 解决方案文件夹。

在 Windows 资源管理器中，我按“修改日期”的降序对文件夹进行排序。

如果我在某处的解决方案文件夹中修改 C# 文件，我希望该解决方案文件夹移动到资源管理器列表的顶部。即，我希望将该文件夹视为“已修改”。

是否有启用此行为的 Visual Studio 扩展？或者是否有更直接的方法来对解决方案进行排序，以便最近修改的解决方案首先出现在 Windows 资源管理器中？

我将这个 C# 程序放在一起，该程序用于`FileSystemWatcher`监视文件夹中的文件更改`*.cs`并触及它对应的 VS 解决方案文件夹。但是，调用`Directory.SetLastWriteTime(path, DateTime.Now)`会导致异常；看来，当 VS 打开解决方案时，该目录被锁定，`SetLastWriteTime`因此无法更新时间。

```
using System;
using System.IO;

namespace MyDocumentsWatcher
{
    class Program
    {
        static void Main(string[] args)
        {
            var watcher =
                new FileSystemWatcher()
                {
                    Path = "C:/Users/dharmatech/Documents",
                    Filter = "*.cs",
                    NotifyFilter = 
                        NotifyFilters.LastWrite |
                        NotifyFilters.FileName |
                        NotifyFilters.DirectoryName,
                    IncludeSubdirectories = true,
                    EnableRaisingEvents = true
                };

            watcher.Changed += (s, e) =>
                {
                    Console.WriteLine("{0} {1}", e.ChangeType, e.Name);

                    var path = e.FullPath;

                    while (true)
                    {
                        Console.WriteLine(path);
                        if (Path.GetDirectoryName(path) == @"C:\Users\dharmatech\Documents")
                        {
                            Directory.SetLastWriteTime(path, DateTime.Now);
                            break;
                        }
                        else
                            path = Path.GetDirectoryName(path);
                        System.Threading.Thread.Sleep(1000);
                    }
                };

            Console.ReadLine();
        }
    }
} 
```

欢迎任何有关如何实现这一目标的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T05:17:06.703

我的解决方案是使用上述程序，但稍作调整。我没有尝试更新`LastWriteTime`VS 解决方案文件夹，而是在该文件夹中创建并删除了一个临时文件；具有更新`LastWriteTime`. 这是该程序的版本：

```
using System;
using System.IO;

namespace MyDocumentsWatcher
{
    class Program
    {
        static void Main(string[] args)
        {
            var random = new Random();

            var watcher =
                new FileSystemWatcher()
                {
                    Path = @"C:\Users\dharmatech\Documents",
                    Filter = "*.cs",
                    NotifyFilter = NotifyFilters.LastWrite | NotifyFilters.FileName | NotifyFilters.DirectoryName,
                    IncludeSubdirectories = true,
                    EnableRaisingEvents = true
                };

            watcher.Changed += (s, e) =>
                {
                    Console.WriteLine("{0} {1}", e.ChangeType, e.Name);

                    var path = e.FullPath;

                    while (true)
                    {
                        if (Path.GetDirectoryName(path) == @"C:\Users\dharmatech\Documents")
                        {
                            var tmp = Path.Combine(path, random.Next().ToString());
                            using (File.Create(tmp)) { }
                            File.Delete(tmp);
                            break;
                        }
                        else
                            path = Path.GetDirectoryName(path);
                    }
                };

            Console.ReadLine();
        }
    }
} 
```

# php - 用php裁剪图像

> ID：13189831
> 
> 赞同：-3
> 
> 时间：2012-11-02T05:30:24.577
> 
> 标签：php

我只想`30px`从图像底部裁剪图像。我进行了一些搜索并找到了一些东西，但是当我尝试保存图像时，图像被全黑保存，即使图像被裁剪，我也不确定。我不想回到我现在拥有的代码。那么裁剪图像最快和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:17:06.950

您可以在 codeigniter 中使用图像库的图像裁剪功能，`$this->image_lib->crop()` 但在使用图像功能之前，请确保先加载图像库 `$this->load->library('image_lib');`

你可以在[这里的文档中找到这个](http://codeigniter.com/user_guide/libraries/image_lib.html)

# php - 未找到“调度程序”类和“路由器”类

> ID：13189836
> 
> 赞同：7
> 
> 时间：2012-11-02T05:30:54.780
> 
> 标签：php, mysql, apache, cakephp, cakephp-2.2

我做了什么：

我在`CakePHP 2.2.3`. 在我对 css 进行一些更改之前，它工作得很好。发生了什么

当我在浏览器中刷新页面时，出现以下错误

```
Fatal error: Class 'Dispatcher' not found on my site path/app/webroot/index.php on line 91

Fatal error: Class 'Router' not found 
```

仅供参考，我已经清除了所有缓存。

# python - Django重复模型定义/字段

> ID：13189837
> 
> 赞同：3
> 
> 时间：2012-11-02T05:30:55.723
> 
> 标签：python, django, model-view-controller, metaclass

这是我使用的：

```
class a(models.Model):
    x = models.CharField()

class b(a):
    pass 
```

这样做的问题是，当创建 b 的实例时，也会创建 a 的实例，我猜这是因为 b 继承了 Django 分配的某些属性，例如数据库表。我想让 b 拥有所有的字段和方法，这样就不会发生这种重复。**如果不简单地将所有代码从 a 复制并粘贴到 b 或使用抽象基类 c 并且 a 和 b 都从 c 继承（我只想有两个模型/类），如何做到**这一点？你必须使用元类吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T09:15:36.337

```
class A(models.Model):
    #some fields here
    x = models.CharField()
    class Meta:
        abstract = True

class B(A):
    pass 
```

`A`将是一个抽象类，你不能单独使用这个类。但据我了解，您想要两个真正的课程`A`和`B`. 在这种情况下，您需要第三个（抽象）类`C`。因此，他们将从抽象字段继承字段并向它们添加额外的字段。

例如：假设抽象是C

```
class C(models.Model):
    # the common fields 
    class Meta:
        abstract = True
class A(C):
    #extra fields if you need or pass
class B(C):
     #extra fields if you need or pass 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:34:31.870

制作[抽象](https://docs.djangoproject.com/en/dev/topics/db/models/#abstract-base-classes)模型`a`：

```
class a(models.Model):
    class Meta:
        abstract = True
    x = models.CharField() 
```

还要注意，类名应该是大写的，所以应该是`A`and `B`，但是`x`是正确的。

# android - 在 Android 应用程序中从 1 到 500 中选择数值的最佳方法？

> ID：13189838
> 
> 赞同：0
> 
> 时间：2012-11-02T05:31:18.383
> 
> 标签：android, android-widget, android-spinner

我目前正在开发一个 android 应用程序，其中一个功能是选择大范围的数值。允许用户从微调器（下拉列表的 android 版本）或选择器（主要用于选择时间和日期）中选择数字的最佳方式是什么？我需要确保应用程序的高效率，让用户不需要做太多的事情来获取号码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:48:25.543

使用经过验证的`EditText`（带有数字键盘提示）或，为每个数字使用三个选择器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:56:25.680

使用经过验证的自动完成绑定值，当用户编写文本时，它会给出选择值的建议。

# macos - 找不到 Couchdb 命令

> ID：13189842
> 
> 赞同：1
> 
> 时间：2012-11-02T05:31:46.510
> 
> 标签：macos, couchdb, osx-mountain-lion, couchdb-futon

我将非常感谢 CouchDb 的帮助...

我已经在运行 Mountain Lion (10.7.5) 的 Mac 上加载了 CouchDB。我相信我加载了 Lion 版本，因为我有 10.8 所需的 Mountain Lion 选项。从网络浏览器 CouchDb 运行良好。我有一个数据库正在运行，并从一个由 cronjob 每晚触发的 python 脚本收集 twitter 数据。

问题是我想创建一个管理员帐户，我在 local.ini 文件中进行了所需的更改，但是当我尝试重新启动 CouchDb 服务器时，该命令不起作用。我的 shell（Bash 或 SH）无法识别应该停止 Couch 的命令。

我都试过了 `couchdb -d`，`couchdb stop`但我得到了同样的信息 - `sh: couchdb: command not found`。

我假设这是一个路径问题，所以我尝试在 CouchDb 目录中运行该命令，但得到了相同的结果。我正在考虑的一个问题是我将 Couch 加载到了错误的目录中，但我尝试在我找到的所有与 CouchDb 相关的目录中运行此命令。我确信我遗漏了一些东西，但任何关于如何解决这个问题的建议都将不胜感激。我考虑重新加载所有内容，但我想将其用作最后的手段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T11:54:29.660

在 OSX 中启动 Couch DB 后，我可以看到它的过程：

```
$ launchctl list | grep couchdb
4578    -   [0x0-0x101101].org.apache.couchdb 
```

我可以通过以下方式阻止它：

```
$ launchctl stop '[0x0-0x101101].org.apache.couchdb' 
```

也许有一种更简单的方法，但我刚刚检查过它是否有效。您还可以在描述为“加载配置文件和/或目录”的可用`launchctl`命令列表 ( `launchctl help`)中看到。`load`我也很确定 Couch DB 中有一些用于停止/重新启动的 REST API。

# css - 图像叠加不起作用

> ID：13189843
> 
> 赞同：0
> 
> 时间：2012-11-02T05:31:47.540
> 
> 标签：css

我似乎无法让这个图像覆盖工作，我不明白我哪里出错了。当我`headerImageOverlay`在标题下方时，它看起来更糟。现在，背景徽标看起来不错，但要叠加的图像位于正确的位置，但在徽标下方而不是顶部。任何援助将不胜感激。

首先是CSS：

```
.container {
width: 960px;
background-color: #FFF;
margin: 0 auto;
}

.headerImageOverlay {
float: right;
padding: 1px;
width: 127px;
position: relative;
}

img.overlay {
position: absolute;
right: 0px;
top: 0px;
z-index: 10;
}

img.logo {
z-index: 1;
display: block;
}

.spanner {
position: absolute;
width: 100%;
height: 100%;
    top: 0;
    left: 0;
    z-index: 1;
} 
```

现在是 HTML：

```
<div class="container">
  <div class="header">
    <img src="images/logo.jpg" class="logo" width="850" height="166" /> 
  </div>
  <div class="headerImageOverlay">
    <span class="spanner">
      <img src="images/ross.jpg" class="overlay" />
    </span>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T05:40:00.480

……***[现场演示](http://tinkerbin.com/GEu193zE)***…………

HI 现在定义`.container` `position:relative;`和删除`.headerImageOverlay` `position:relaive;`

```
 .container {
      position: relative; // add this line in your css
    }

.headerImageOverlay{
position: relative; // remove this line in your css
} 
```

# ruby - 如何在 Ruby 中初始化类变量？

> ID：13189847
> 
> 赞同：0
> 
> 时间：2012-11-02T05:32:03.353
> 
> 标签：ruby

例如：

```
class MyClass
    @@var1 = '123456'
    def self.var1
        @@var1
    end

    class << self
        attr_accessor :var2
        def self.initialize
          self.var2 = 7890
        end
    end

end

 p MyClass.var1 # "123456"
 p MyClass.var2 # nil 
```

有没有办法初始化var2？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T06:30:18.843

如果 var2 不是布尔值，您可以这样做。

```
class MyClass
  class << self
    attr_writer :var2
  end

  def self.var2
    @@var2 ||= 'my init value'
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T06:44:55.940

首先，这是类变量和单例类的混淆。当你这样做`class << self`并不意味着你现在可以得到`@@var1`as `self.var1`。我用这个例子来说明

```
class MyClass

  @@var1 = '123456'

  class << self
    attr_accessor :var1

    def get_var1
      @@var1
    end

    def set_var1
      self.var1 = '654321'
    end
  end
end

MyClass.get_var1 #=> '123456'
MyClass.set_var1 #=> '654321'
MyClass.get_var1 #=> '123456' 
```

如您所见，@@var1 在整个类范围内都可用，但它与单例变量不同。

类变量在类的所有对象之间共享，并且类方法也可以访问它。所以你可以在任何你认为可以接受的地方初始化它。最简单易懂的就是在类范围内。

```
class MyClass
  @@var1 = '123456'
  ...
end 
```

# integer - 如何从clang中的Expr *获取整数变量名称及其值

> ID：13189848
> 
> 赞同：3
> 
> 时间：2012-11-02T05:32:08.787
> 
> 标签：integer, clang

我在`VisitBinaryOperator()`Clang 的覆盖方法中有以下代码：

```
Expr* lhs = E->getLHS();  
Expr* rhs = E->getRHS(); 
```

`lhs`我想从表达式和中提取整数变量名称及其值`rhs`。

假设我有，`x = 10;`那么我想从中`x`获取标识符。 如果我有， 那么我想从中获取标识符并作为子表达式`lhs``10``rhs`
`x = x + 10;``x``lhs``x + 10``rhs`

同样对于类型，`: int identifier`当我转储`lhs`类型时我会得到这个

```
QualType type_lhs = lhs->getType();  
type_lhs->dump(); 
```

如何为 clang 做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-08T07:51:37.100

用于`dyn_cast`确定您在 LHS 上的表达方式：

```
if (DeclRefExpr *DRE = dyn_cast<DeclRefExpr>(lhs)) {
  // It's a reference to a declaration...
  if (VarDecl *VD = dyn_cast<VarDecl>(DRE->getDecl())) {
    // It's a reference to a variable (a local, function parameter, global, or static data member).
     std::cout << "LHS is " << VD->getQualifiedNameAsString() << std::endl;
  }
} 
```

如果要处理 LHS 上的其他表达式形式，则需要更复杂的代码。如果您想在那里处理任意代码，请查看`RecursiveASTVisitor`.

要评估右侧的值（假设它是 Clang 可以评估的值，like `10`， not like `x + 10`），请使用`Expr`的`Evaluate*`函数之一：

```
llvm::APSInt Result;
if (rhs->EvaluateAsInt(Result, ASTContext)) {
  std::cout << "RHS has value " << Result.toString(10) << std::endl;
} 
```

# android - Android 如何对所有类和活动使用单个数组列表？

> ID：13189856
> 
> 赞同：0
> 
> 时间：2012-11-02T05:33:13.747
> 
> 标签：android, google-maps, arraylist, overlay

在我的应用程序中，我将 googlemaps 用于该一项主要活动，并在 googlemaps 上用于该覆盖类的免费手绘草图。对于这个用于存储路径的手绘草图，覆盖类中使用了一个数组列表。接下来在主要活动中执行撤消和重做功能，因此我必须在主要活动中使用数组列表，因为我将覆盖类中的数组列表声明为公共静态。使用静态我得到了连续绘图，这是我的问题..如何在我的应用程序中使用数组列表而不使用静态....

```
public class HandDrawOverlay extends Overlay {

   private boolean iseditMode = true;
   private boolean isTouched = false;
   private Paint paint = new Paint();
   private Point screenPt1 = new Point();
   private Point screenPt2 = new Point();
   public static ArrayList<GeoPoint> points = new ArrayList<GeoPoint>();    
   int x, y;
   GeoPoint geoP;
   HandDrawOverlay handDrawOverlay;
   private GoogleMapActivity mview = null;
   private boolean isUp = false;     

   public HandDrawOverlay(GoogleMapActivity mapviewdata){

      paint.setStrokeWidth(4.0f);
      paint.setStyle(Style.STROKE);
      paint.setColor(Color.BLUE);
      mview = mapviewdata;       
   }

   public static ArrayList<GeoPoint>  getBitmap(){
          return points;
   }   

   @Override
   public void draw(Canvas canvas, MapView mapView, boolean shadow) {    
    if (points != null && points.size() > 1) {           
        mapView.getProjection().toPixels(points.get(0), screenPt1);

        for (int i = 1; i < points.size(); i++) {            
            mapView.getProjection().toPixels(points.get(i), screenPt2);
            canvas.drawLine(screenPt1.x, screenPt1.y, screenPt2.x, screenPt2.y, paint);
            screenPt1.set(screenPt2.x, screenPt2.y);                 
        }
     }
  }

   @Override
   public boolean onTouchEvent(MotionEvent e, MapView mapView) {
    if(mview.isEditMode() && (iseditMode)){         

        x = (int) e.getX();
        y = (int) e.getY();           
        geoP = mapView.getProjection().fromPixels(x, y);    
        Log.i("", "geoP" +geoP);

        switch (e.getAction()) {
        case MotionEvent.ACTION_DOWN:                            
            isTouched = true;        
            points.add(geoP);                               
            break;              

        case MotionEvent.ACTION_MOVE:            
            if (isTouched = true)
                points.add(geoP);               
            break;

        case MotionEvent.ACTION_UP:          
            if (isTouched = true)
                points.add(geoP);                    
            isUp = true;
            handDrawOverlay = new HandDrawOverlay(mview);
            mapView.getOverlays().add(handDrawOverlay);
            break;
        }           
        mapView.postInvalidate();    
        return true;            
      }      
       return false;
   }     
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:16:29.380

为此，您可以使用它。

```
public class Hiroshima {

    private static Hiroshima hr = new Hiroshima();

    public ArrayList<String> mImages = new ArrayList<String>();

      private Hiroshima(){}

      public static Hiroshima getInstance(){

          return hr;
      }

} 
```

现在你可以从任何地方使用这个 ArrayList。它会给你相同的实例。

在您的活动中写下如下。

```
Hiroshima hx = Hiroshima.getInstance(); 
```

# git - 本地存储库来源不存在

> ID：13189864
> 
> 赞同：2
> 
> 时间：2012-11-02T05:34:26.800
> 
> 标签：git

目前，Windows 中的 git bash 指向 vikas@VIKAS-PC /D/code/myrepo (master)

我运行了以下 git 命令：

```
$ git config --global user.name "Vikas Sharma" 
$ git config --global user.email "vikas.sharma.in@gmail.com"

git init 
git add . 
git commit -m "initial commit"

$ git status 
On branch master nothing to commit (working directory clean) 
```

现在，“git remote”命令什么也不返回。我期待原始回购。

所以，我创建了原始仓库，如下所示：

```
$ git remote add origin D:/code/myrepo

$ git push origin "some-external-repo" 
```

但是，出现以下错误：

```
error: src refspec myrepo does not match any.
error: failed to push some refs to 'D:/code/myrepo' 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T05:39:00.017

跟随您的步骤：

```
git init   # You now have a .git directory
git add .  # You've added the working directory files to the index
git commit -m "initial commit" # You now have one commit. 
```

这些步骤都没有给你一个遥控器。

```
git remote add origin D:/code/myrepo  # Claims that a remote is located there
git push origin # Tries to push to it. 
```

如果不在 D:/code/myrepo 手动创建带有 'git init' 的 repo，这将失败。Git 不会在远程位置为您创建存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:34:30.613

最后，我能够解决它。

我错误地认为下面的命令将创建名为“origin”的本地存储库：

$ git remote add origin D:/code/myrepo

但是，后来我意识到“master”是本地存储库的名称。我们不需要显式地创建它们。

现在，下面的命令对我有用：

$ git push "some-external-repo" master

感谢 anonfunc 在这方面帮助我。

# android - 在android中拍摄图像时压缩图像

> ID：13189867
> 
> 赞同：0
> 
> 时间：2012-11-02T05:34:35.457
> 
> 标签：android

您好，我正在开发相机应用程序。拍摄图像后，图像将保存在 sdcard 中。我希望在保存 sdcard 时图像的大小应该是 400kb 到 500kb，但现在它需要超过 1mb。如何在捕获图像后压缩并保存在 sdcard 中。

我的代码是

```
 public void onClick(View v) {
            Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
            imageName="MyCameraApp" + String.valueOf(System.currentTimeMillis()) + ".jpg";
            File file = new File(Environment.getExternalStorageDirectory()+"/pictures", imageName);
            fileUri = Uri.fromFile(file);
            intent.putExtra(MediaStore.EXTRA_OUTPUT, fileUri); // set the image file name

            startActivityForResult(intent, CAPTURE_IMAGE_ACTIVITY_REQUEST_CODE);

        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:33:45.900

我遇到了同样的问题，现在我解决了。我想这对你会有帮助。如果您更改 sdcard 的目录，我认为此代码可以正常工作。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_image_optimization);

    String dirname = Environment.getExternalStorageDirectory() + "/shahin/";

    File sddir = new File(dirname);
    if (!sddir.mkdirs()) {
        if (sddir.exists()) {
        } else {
            Toast.makeText(ImageOptimizationActivity.this, "Folder error", Toast.LENGTH_SHORT)
                    .show();
            return;
        }
    }

    try {
        Bitmap bitmap = null;
        File file = new File(Environment.getExternalStorageDirectory()
                + "/DCIM/101SHARP/rubon.jpg");
        try {
            bitmap = BitmapFactory.decodeStream(new FileInputStream(file));
        } catch (FileNotFoundException e1) {
            e1.printStackTrace();
        }

        FileOutputStream fos = new FileOutputStream(dirname + "output.jpg");
        bitmap.compress(CompressFormat.JPEG, 75, fos);

        fos.flush();
        fos.close();
    } catch (Exception e) {
        Log.e("MyLog", e.toString());
    }
} 
```

}

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:51:22.753

尝试这个：

```
String root = Environment.getExternalStorageDirectory()
                    .toString();
            File myDir = new File(root + "/_images");
            myDir.mkdirs();
            Random generator = new Random();
            int n = 10000;
            n = generator.nextInt(n);
            String fname = "Image-" + n + ".jpg";
            file = new File(myDir, fname);
            Log.i(TAG, "" + file);
            if (file.exists())
                file.delete();
            try {
                FileOutputStream out = new FileOutputStream(file);
                bm.compress(Bitmap.CompressFormat.JPEG, 90, out);
                out.flush();
                out.close();
            } catch (Exception e) {
                e.printStackTrace();
            } 
```

其中 bm 是位图图像

# android - 布局在方向变化时急剧变化

> ID：13189869
> 
> 赞同：1
> 
> 时间：2012-11-02T05:34:50.090
> 
> 标签：android, android-layout, orientation, xml-layout

我已经为一个活动创建了一个布局。布局包含一些图像按钮和文本视图。问题是，当我将设备的方向设置为纵向时，它工作正常，但是当我将方向更改为横向时，布局会产生意想不到的结果。

这是我的**布局文件**：

```
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:fillViewport="true"
    android:padding="50dp" >

<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <ImageView
        android:id="@+id/settings_imageView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:src="@android:drawable/bottom_bar" />

    <TextView
        android:id="@+id/settings_textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="16dp"
        android:text="@string/my_settings"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <ImageView
        android:id="@+id/myProgramming_imageView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/settings_imageView"
        android:layout_alignParentLeft="true"
        android:src="@android:drawable/bottom_bar" />

    <TextView
        android:id="@+id/myProgramming_textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/myProgramming_imageView"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="14dp"
        android:text="@string/my_programming"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <ImageView
        android:id="@+id/library_imageView"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/myProgramming_imageView"
        android:layout_alignParentLeft="true"
        android:src="@android:drawable/bottom_bar" />

    <TextView
        android:id="@+id/library_textView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/library_imageView"
        android:layout_centerHorizontal="true"
        android:layout_marginBottom="16dp"
        android:text="@string/library"
        android:textAppearance="?android:attr/textAppearanceMedium" />

</RelativeLayout>
</ScrollView> 
```

这是**设备上纵向模式**的输出，这是纵向和横向模式下的预期输出：

![人像模式](../Images/30199655223851f73f784447c201b17d.png)

**这是设备上横向** **模式**的输出，这是出乎意料的：

![横向模式](../Images/8d52531fda6dc5b373834042b708f00d.png)

我希望布局在纵向和横向模式下看起来相似。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T06:28:50.347

首先，您必须为不同的布局创建以下文件夹.....

```
Folder Name                       

layout-ldpi                           
layout-land-ldpi                    

layout-mdpi                           
layout-land-mdpi                      

layout-hdpi                           
layout-land-hdpi                      

layout-xlarge                        
layout-xlarge-land 
```

1...AndroidManifest.xml 中的更改

```
android:configChanges="orientation|keyboardHidden" 
```

2 ....在布局文件夹中创建layout_land.xml。

3....在 layout-land 文件夹中创建 layout_port.xml。

4...创建以下方法

```
@Override
public void onConfigurationChanged(Configuration newConfig) 
{
    super.onConfigurationChanged(newConfig);

    if (newConfig.orientation == Configuration.ORIENTATION_LANDSCAPE) 
    {
        setContentView(R.layout.layout_land);
        set_all_id();
    } 
    else if (newConfig.orientation == Configuration.ORIENTATION_PORTRAIT)
    {
        setContentView(R.layout.layout_port);
        set_all_id();
    }
} 
```

5..OnCreate方法的变化（仅此内容）

```
@Override
public void onCreate(Bundle savedInstanceState)
{

    super.onCreate(savedInstanceState);
    if (getResources().getConfiguration().orientation == 1)
    {
        setContentView(R.layout.layout_port);
    }
    if (getResources().getConfiguration().orientation == 2)
    {
        setContentView(R.layout.layout_land);
    }
    set_all_id();

} 
```

6...为视图对象的初始化创建set_all_id()方法

```
public void set_all_id()
{
    //define id for all view objects..
    //textview = (textview)findViewById(R.id.textview);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:38:29.323

由于`landscape`模式中的高度较小，布局将显示为这样。

根据我的说法，好的方法是在 res 文件夹中维护 layout-land 并为横向模式设计布局。这样看起来会很好看

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T05:39:52.897

**-**看来你`screen size`在这里制造了一个问题。

**-**您必须在目录**下创建另一个文件夹** `res`as `layout-land`，并在其中创建一个`.xml`文件，就像您在`layout`文件夹中所做的一样，并使其看起来像您想要的那样`landscape mode`。

**-**当您的应用程序进入`landscape`模式时，将**自动**选择此`.xml`文件（即从布局域）文件夹。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-02T05:50:11.610

*   创建文件夹 /res/layout-land （在这里你将保持你的横向调整布局）
*   在那里复制chooseActivity.xml
*   对其进行必要的更改

# php - $this->load->model('foo_model'); 是什么？实际上在codeigniter中做吗？

> ID：13189873
> 
> 赞同：0
> 
> 时间：2012-11-02T05:35:01.137
> 
> 标签：php, codeigniter

控制器是否扩展了 foo_model 或者只是我们正在加载整个模型本身？

如果它正在加载我如何为模型（foo_model）类创建一个合适的对象..

因为我用过类似的东西`$obj = new foo_model();`

我的模型类如下所示：

```
class foo_model extends CI_model{
public $model_variable;

function foo_model(){
    parent::__construct();

    $this->$model_variable = $this->db->query('mysql query returning array of values')->result();

} 
```

}

我的控制器是这样的

```
class foo1_controller extends CI_controller{

public function foo1_controller()
{
    //loading basic libraries and helper fn.
}

public function some_controllerfn()
{
    $this->load->model('foo_model');
    $foo_details = new foo_model();
    //print $foo_details as objects
} 
```

}

我在这里面临的问题是，当我使用控制器功能时，模型被调用了两次，我还希望 $foo_details 作为对象返回。什么是正确的方法，任何帮助将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:11:41.603

的`model`方法`Loader`将为传递的模型名称实例化模型对象。

`array`如果传递了一个模型名称，它将递归调用该函数。它将从允许的路径列表中加载模型文件，然后实例化模型对象并将其分配给控制器中的同名成员变量。

# android - android动态添加复选框

> ID：13189874
> 
> 赞同：2
> 
> 时间：2012-11-02T05:35:02.697
> 
> 标签：android, checkbox

以下是我的布局 xml。现在我们在布局 (listitem.xml) 中有数量有限（七个）的复选框。我们将它添加到线性布局中。

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:background="#FFFFFF"
   >

    <LinearLayout
        android:id="@+id/linearLayout1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:layout_marginLeft="21dp"
        android:layout_marginTop="38dp" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_alignBottom="@+id/linearLayout1"
            android:layout_alignLeft="@+id/linearLayout1"
            android:text="TESTER : "
            android:textColor="#000000" />

        <AutoCompleteTextView
            android:id="@+id/tester_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:ems="10"
            android:capitalize="characters" 
            android:textColor="#000000">

            <requestFocus />
        </AutoCompleteTextView>

    </LinearLayout>

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/linearLayout1"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="19dp"
        android:text="APPS TO TEST : "
        android:textAppearance="?android:attr/textAppearanceLarge" 
        android:textColor="#000000"/>

    <View
        android:id="@+id/view1"
        android:layout_width="wrap_content"
        android:layout_height="1dp"
        android:layout_below="@+id/textView2"
        android:background="#CCCCCC" 
        android:layout_marginBottom="5dp"/>

    <ListView
        android:id="@+id/apps_list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/view1" 
        android:dividerHeight="5dp">
    </ListView>

    <Button
        android:id="@+id/refreshBtn"
        android:layout_width="wrap_content"
        android:layout_height="40dp"
        android:layout_alignBottom="@+id/textView2"
        android:layout_alignParentLeft="true"
        android:text="Refresh" />

</RelativeLayout> 
```

列表项.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:background="#FFFFFF"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >

        <TextView
            android:id="@+id/app_name"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_weight="70"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#000000" />

        <Button
            android:id="@+id/launch_btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginTop="4dp"
            android:layout_weight="20"
            android:text="LAUNCH" />
    </LinearLayout>

    <RadioGroup
        android:id="@+id/status_group"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <RadioButton
            android:id="@+id/pass_btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:checked="true"
            android:text="PASS"
            android:textColor="#000000" />

        <RadioButton
            android:id="@+id/fail_btn"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="FAIL"
            android:textColor="#000000" />
    </RadioGroup>

    <LinearLayout
        android:id="@+id/failure_layout"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/textView1"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:gravity="center"
            android:text="FAILURE REASONS"
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#000000" />

        <LinearLayout
            android:id="@+id/failure_reasonslist"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:focusable="false"
            android:focusableInTouchMode="false"
            android:orientation="vertical" >

            <CheckBox
                android:id="@+id/failure_Sound"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:textColor="#000000" />

            <CheckBox
                android:id="@+id/failure_GPS"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:focusable="false"
                android:focusableInTouchMode="false"
                android:textColor="#000000" />

            <CheckBox
                android:id="@+id/failure_Display"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:focusable="false"
                android:focusableInTouchMode="false"
                android:textColor="#000000" />

            <CheckBox
                android:id="@+id/failure_Network"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:focusable="false"
                android:focusableInTouchMode="false"
                android:textColor="#000000" />

            <CheckBox
                android:id="@+id/failure_Rotation"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:focusable="false"
                android:focusableInTouchMode="false"
                android:textColor="#000000" />

            <CheckBox
                android:id="@+id/failure_Microphone"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:focusable="false"
                android:focusableInTouchMode="false"
                android:textColor="#000000" />

            <CheckBox
                android:id="@+id/failure_Others"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:focusable="false"
                android:focusableInTouchMode="false"
                android:textColor="#000000" />
        </LinearLayout>
    </LinearLayout>

    <LinearLayout
        android:id="@+id/lineatlayout1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >

        <TextView
            android:id="@+id/textView2"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="DESCRIPTION : "
            android:textAppearance="?android:attr/textAppearanceMedium"
            android:textColor="#000000" />

        <EditText
            android:id="@+id/description_text"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1"
            android:clickable="true"
            android:ems="10"
            android:focusable="true"
            android:focusableInTouchMode="true"
            android:inputType="textMultiLine"
            android:textColor="#000000" >
        </EditText>
    </LinearLayout>
 <LinearLayout
        android:id="@+id/lineatlayout2"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:orientation="horizontal" >
    <Button
        android:id="@+id/submit_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="  SUBMIT " />
    <Button
        android:id="@+id/uninstall_btn"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="UNINSTALL" />
    </LinearLayout>

    <!-- </RelativeLayout> -->

</LinearLayout> 
```

但根据新要求，我们需要动态添加复选框。就像需要从 API 调用中获取选项并将其转换为视图中的复选框。我花了很多时间在里面。有人可以提出解决此问题的方法。

我们的布局应该是这样的。在列表视图中，我们正在显示员工详细信息，并且对于每个员工记录，应从 API 调用或数据库加载资格。

```
 [Reviewer Name (Editable)]       
               Employee Lest           
---------------------------------------
Employee1                    [Click Me]

Male (0)          Female ( )
Salary : [5999 (editable)]
Qualification
[X]BA
[ ]BSc
[ ]Matriculation
[ ]Other
[Submit Button]
---------------------------------------
Employee2                    [Click Me]

Male (0)          Female ( )
Salary : [5999 (editable)]
Qualification
[X]BA
[ ]BSc
[ ]Matriculation
[ ]Other
[Submit Button]
---------------------------------------
Employee3                    [Click Me]

Male (0)          Female ( )
Salary : [5999 (editable)]
Qualification
[X]BA
[ ]BSc
[ ]Matriculation
[ ]Other
[Submit Button]
--------------------------------------- 
```

源代码

```
private class ListAdapters extends ArrayAdapter<ApplicationBean> {
    private ArrayList<ApplicationBean> items;
    private int position;

    public ListAdapters(Context context, int textViewResourceId,
            ArrayList<ApplicationBean> mTitleList) {
        super(context, textViewResourceId, mTitleList);
        this.items = mTitleList;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View v = convertView;
        this.position = position;
        if (v == null) {
            LayoutInflater inflater = (LayoutInflater) mContext
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(R.layout.applicationlistitem, null);
        }

        final ApplicationBean o = (ApplicationBean) items.get(position);

        if (o != null) {

            txtAppName = (TextView) v.findViewById(R.id.app_name);
            txtAppName.setText("" + o.getAppName());
            launchButton = (Button) v.findViewById(R.id.launch_btn);
            launchButton.setTag(position);
            launchButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {

                    final PackageManager pm = mContext.getPackageManager();
                    Intent LaunchIntent = pm
                            .getLaunchIntentForPackage(items
                                    .get(Integer.parseInt(v.getTag()
                                            .toString())).getPname());
                    mContext.startActivity(LaunchIntent);

                }
            });
            final LinearLayout failure_reasonslist = (LinearLayout) v
                    .findViewById(R.id.failure_reasonslist);

            rdgPassFail = (RadioGroup) v.findViewById(R.id.status_group);
            rdgPassFail.setTag(position);

            RadioButton passBtn = (RadioButton) v
                    .findViewById(R.id.pass_btn);
            passBtn.setTag(position);
            RadioButton failbtn = (RadioButton) v
                    .findViewById(R.id.fail_btn);
            failbtn.setTag(position);

            rdgPassFail
                    .setOnCheckedChangeListener(new OnCheckedChangeListener() {

                        @Override
                        public void onCheckedChanged(RadioGroup group,
                                int checkedId) {
                            ApplicationBean o = (ApplicationBean) items
                                    .get(Integer.parseInt(group.getTag()
                                            .toString()));

                            switch (checkedId) {
                            case R.id.fail_btn:
                                Log.e("Fail button", "Clicked");
                                o.setFailState(true);
                                o.setPassState(false);
                                numOptions = 0;
                                Log.e("Fail button--1", "Clicked");

                                break;
                            case R.id.pass_btn:
                                Log.e("Pass button", "Clicked");

                                o.setFailState(false);
                                o.setPassState(true);
                                Log.e("Pass button-----1", "Clicked");

                                break;
                            }
                            items.set(Integer.parseInt(group.getTag()
                                    .toString()), o);
                        }

                    });

            LinearLayout featuresTable = (LinearLayout) v.findViewById(R.id.failure_reasonslist);

            // use loop CheckBox feature1 = new CheckBox(this); 
            for(int i = 0; i<=5; i++) {
                CheckBox feature1 = new CheckBox(this.getContext());
                featuresTable.addView(feature1);
            }

            txtDescription = (EditText) v
                    .findViewById(R.id.description_text);
            txtDescription.setTag(position);
            if (txtDescription.isFocused()) {
                InputMethodManager inputManager = (InputMethodManager) mContext
                        .getSystemService(INPUT_METHOD_SERVICE);
                inputManager.restartInput(txtDescription);
            }

            txtDescription
                    .setOnFocusChangeListener(new View.OnFocusChangeListener() {

                        @Override
                        public void onFocusChange(View v, boolean hasFocus) {
                            if (!hasFocus) {

                                final EditText Caption = (EditText) v;
                                o.setDescription(Caption.getText()
                                        .toString());

                            }

                        }
                    });
            uninstallButton = (Button) v.findViewById(R.id.uninstall_btn);
            uninstallButton.setTag(position);
            // uninstallButton.setVisibility(View.INVISIBLE);
            o.setUninstallVisible(false);
            uninstallButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    Uri packageUri = Uri.parse("package:"
                            + items.get(
                                    Integer.parseInt(v.getTag().toString()))
                                    .getPname());
                    Intent uninstallIntent = new Intent(
                            Intent.ACTION_DELETE, packageUri);
                    uninstallIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                    startActivity(uninstallIntent);
                    mTitleList.remove(items.get((Integer) v.getTag()));

                    mListView.setAdapter(new ListAdapters(mContext,
                            R.id.app_name, mTitleList));
                    ((BaseAdapter) mListView.getAdapter())
                            .notifyDataSetChanged();
                    isUninstallclicked = true;

                }
            });

            submitButton = (Button) v.findViewById(R.id.submit_btn);
            submitButton.setTag(txtDescription);
            submitButton.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub
                    EditText tv = (EditText) v.getTag(); // get edittext
                                                            // object

                    txtDescription = tv;
                    if (txtTesterName.getText().toString().equals("")) {
                        showDialog("Please enter the name of tester",
                                mContext);
                    } else if (numOptions == 0) {
                        showDialog("Please select failure reason", mContext);
                    } else if (tv.getText().toString().equals("")) {
                        showDialog("Please enter the description", mContext);
                    } else if (!isNetworkAvailable()) {

                        showDialog(
                                "No network connection.Report won't be submitted",
                                mContext);
                    } else {

                        if (!o.isUninstallVisible()) {
                            uninstallButton.setVisibility(View.VISIBLE);
                            o.setUninstallVisible(true);
                            mListView.invalidate();
                        }
                        PostRequest p = new PostRequest(Integer.parseInt(tv
                                .getTag().toString()));
                        p.execute();

                    }
                }

            });

        }
        return v;
    } 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-02T05:49:04.200

```
LinearLayout featuresTable = (LinearLayout) findViewById(R.id.failure_reasonslist);
// use loop 
CheckBox feature1 = new CheckBox(this);
featuresTable.addView(feature1 ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-06T10:12:34.217

**动态添加复选框**

```
LinearLayout my_layout = (LinearLayout)findViewById(R.id.my_layout);
// Add Checkbox Dynamically
CheckBox checkBox = new CheckBox(mContext);
checkBox.setText(ETnewcheckbox.getText().toString()+""); 
checkBox.setLayoutParams(new LinearLayout.LayoutParams(ViewGroup.LayoutParams.WRAP_CONTENT, ViewGroup.LayoutParams.WRAP_CONTENT)); 
checkBox.setOnCheckedChangeListener(new CompoundButton.OnCheckedChangeListener() { 
    @Override 
    public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
        String msg = "You have " + (isChecked ? "checked" : "unchecked") + " this Check it Checkbox.";
        Toast.makeText(MainActivity.this, msg, Toast.LENGTH_SHORT).show();
    } 
}); 

// Add Checkbox to LinearLayout 
if (my_layout != null) { 
    my_layout.addView(checkBox); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T05:49:41.827

试试这个。

```
 LinearLayout lLayout = (LinearLayout)findViewById(R.id.yourMainLayout);
 CheckBox checkBox = new CheckBox(this);   // Here you will create CheckBox as many number of Checkbox you want.

 lLayout.addView(checkBox); // Here you have to add this CheckBox to your layout. 
```

祝你好运。

# jakarta-ee - 注释验证异常 (com.ibm.wsspi.amm.validate.ValidationException)

> ID：13189881
> 
> 赞同：3
> 
> 时间：2012-11-02T05:35:49.347
> 
> 标签：jakarta-ee, ejb, websphere

当我尝试在服务器上部署我的应用程序时，我在 IBM Websphere Application server 8.5 上遇到了以下异常。我在我的应用程序中使用 WS 8.5、EJB 3.1、Java EE 6。

```
[11/1/12 11:06:47:208 PKT] 0000005d annotations   E   CWWAM0003E: An exception occurred while validating an annotation: com.ibm.wsspi.amm.validate.ValidationException: CWWAM2302E: The class com.xxx.yyy.services.UsersServiceBean is annotated with an invalid @PersistenceContext declaration; no name is specified.
                             com.ibm.wsspi.amm.validate.ValidationException: CWWAM2302E: The class com.xxx.yyy.services.UsersServiceBean is annotated with an invalid @PersistenceContext declaration; no name is specified.
at com.ibm.ws.amm.validate.persistence.PersistenceContextValidator.validateClassAnnotation(PersistenceContextValidator.java:86) 
```

下面是我的 Java 代码。

```
@PersistenceContext(unitName="myUnit")
@Stateless(name="UsersService")
public class UsersServiceBean implements UsersService {...} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T13:24:48.140

简而言之，在声明`@PersistenceUnit`一个类时，您必须添加一个`name="..."`可用于查找`EntityManagerFactory`with 的`new InitialContext("java:...")`。或者，您可以`@PersistenceUnit(...) EntityManagerFactory emf;`在类中声明一个字段并省略名称。

所有的 ref 注释基本上与`@Resource`. 根据公共注释规范：

> name 元素是资源的 JNDI 名称。当 Resource 注解应用于字段时，name 元素的默认值是类名限定的字段名。应用于方法时，默认值为与类名限定的方法对应的 JavaBeans 属性名。当应用于类时，没有默认值并且必须指定名称。

最后一句话是相关的，并且是有道理的：使用`@PersistenceUnit`（和所有其他`@Resource`类似的注释）有两个效果：

1.  如果在字段或方法上声明注释，则容器将在创建实例时自动注入。
2.  `java:comp`引用使用其名称插入到命名空间中。如果在字段或方法上声明注释，则默认名称为`java:comp/env/com.example.ClassName/targetName`.

如果您在一个类上声明注释，那么 (1) 没有注入，并且 (2) 没有默认名称，因此无法绑定到`java:comp/env`. 在这种情况下，注释声明将毫无意义，因此这是一个错误。

# android - 使用 res 文件夹中的可绘制图像创建图像库

> ID：13189883
> 
> 赞同：1
> 
> 时间：2012-11-02T05:35:51.217
> 
> 标签：android, image, listview, image-gallery

我是安卓新手。我现在有个要求。我需要在 res/drawable 文件夹中添加大约 10 张图像，并且在运行应用程序时，我应该在 listView 上显示这些图像。在选择任何图像时，我应该在新活动中显示这个图像应该能够放大并缩小。请帮助我用示例代码弄清楚这一点。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T11:15:22.817

此示例用于创建 Gallery，选择一个并设置为 selectedImageView。所以在那之后你可以用 selectedImageView 做任何事情。

```
 public class MyActivity extends Activity{

    private int selectedImagePosition = 0;
    private ImageView selectedImageView;
    private List<Drawable> drawables;
    private Gallery gallery;    

    @Override
    public void onCreate(Bundle savedInstanceState) {
      selectedImageView = (ImageView) view.findViewById(R.id.selected_imageview);
      getDrawablesList();

      gallery = (Gallery) view.findViewById(R.id.Gallery);
      gallery.setAdapter(new ImageAdapter(getActivity().getApplicationContext()));

      gallery.setOnItemClickListener(new OnItemClickListener() {
    public void onItemClick(AdapterView<?> parent, View v, final int position, long id) {

        setSelectedImage(selectedImagePosition);

    }
    });

     private void getDrawablesList() {
            drawables = new ArrayList<Drawable>();
            drawables.add(getResources().getDrawable(R.drawable.res1));
            drawables.add(getResources().getDrawable(R.drawable.res2));
            drawables.add(getResources().getDrawable(R.drawable.res3));
            drawables.add(getResources().getDrawable(R.drawable.res4));
        }

    private void setSelectedImage(int selectedImagePosition) {

            BitmapDrawable bd = (BitmapDrawable) drawables.get(selectedImagePosition);
            Bitmap b = Bitmap.createScaledBitmap(bd.getBitmap(), (int) (bd.getIntrinsicHeight() * 0.9), (int) (bd.getIntrinsicWidth() * 0.7), false);
            selectedImageView.setImageBitmap(b);
            selectedImageView.setScaleType(ScaleType.FIT_XY);

        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T11:20:43.970

您可以使用 GalleryView

请参阅以下链接以获取更多帮助：

[http://mobiforge.com/designing/story/understanding-user-interface-android-part-3-more-views](http://mobiforge.com/designing/story/understanding-user-interface-android-part-3-more-views)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-03T04:44:14.743

```
 private ImageView selectedImageView;
    private TextView _nameTextView;
    private Gallery gallery;
    Integer[] imageIDs = { R.drawable.hbath, R.drawable.hfood,
        R.drawable.hmedicine, R.drawable.htherapy, R.drawable.htoilet,
        R.drawable.hother };

@Override
    public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.activity_main);
            selectedImageView = (ImageView) findViewById(R.id.imageSwitcher1);
            _nameTextView = (TextView) findViewById(R.id.NameTextView);
            gallery = (Gallery) findViewById(R.id.gallery1);
            gallery.setAdapter(new ImageAdapter(this));
            gallery.setOnItemClickListener(new OnItemClickListener() {
            gallery.setOnItemSelectedListener(new OnItemSelectedListener() {

        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int position, long arg3) {
            // TODO Auto-generated method stub

            if (position == 0) {
                selectedImageView
                        .setImageResource(R.drawable.hbathbackground);
                _nameTextView.setText("Toilet");
            } else if (position == 1) {
                selectedImageView
                        .setImageResource(R.drawable.hfoodbackground);
                _nameTextView.setText("Food");
            } else if (position == 2) {
                selectedImageView
                        .setImageResource(R.drawable.hmedicinebackground);
                _nameTextView.setText("Medicine");
            } else if (position == 3) {
                selectedImageView
                        .setImageResource(R.drawable.htherapybackground);
                _nameTextView.setText("Therapy");
            } else if (position == 4) {
                selectedImageView
                        .setImageResource(R.drawable.htoiletbackground);
                _nameTextView.setText("Bath");
            } else if (position == 5) {
                selectedImageView
                        .setImageResource(R.drawable.hotherbackground);
                _nameTextView.setText("Other");
            }

        }

        public void onNothingSelected(AdapterView<?> arg0) {
            // TODO Auto-generated method stub

        }
    });
} 
```

和图像适配器

```
 public class ImageAdapter extends BaseAdapter {
    private Context context;
    private int itemBackground;

    public ImageAdapter(Context c) {
        context = c;
        // ---setting the style---
        TypedArray a = obtainStyledAttributes(R.styleable.Gallery1);
        itemBackground = a.getResourceId(
                R.styleable.Gallery1_android_galleryItemBackground, 0);
        a.recycle();
    }

    // ---returns the number of images---
    public int getCount() {
        return imageIDs.length;
    }

    // ---returns the ID of an item---
    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    // ---returns an ImageView view---
    public View getView(int position, View convertView, ViewGroup parent) {
        ImageView imageView = new ImageView(context);
        imageView.setImageResource(imageIDs[position]);
        imageView.setBackgroundColor(0xFF000000);
        // imgView.setImageBitmap(bitmap);
        imageView.setScaleType(ImageView.ScaleType.FIT_XY);
        imageView.setLayoutParams(new Gallery.LayoutParams(155, 235));
        imageView.setBackgroundResource(R.drawable.customborder2);
        return imageView;
    }
} 
```

# facebook - RestFB：检索私人消息中的附件

> ID：13189885
> 
> 赞同：2
> 
> 时间：2012-11-02T05:36:15.017
> 
> 标签：facebook, restfb

我需要检索作为私人消息的一部分存在的附件，这些附件作为私人消息的一部分发布到我在 Facebook 的帐户中。我正在使用 restfb api 做同样的事情，但我只收到短信作为回复，没有链接到附件。有没有办法获取链接或检索附件？

我正在使用restfb 1.6.9 版。

重现这个的步骤是

1.  在 Facebook 中创建附有照片的私人消息。
2.  使用图形 API 访问帐户的收件箱。
3.  Web 服务响应仅返回内容和发件人详细信息

# css - 在具有固定宽度标题的滚动列底部填充

> ID：13189886
> 
> 赞同：4
> 
> 时间：2012-11-02T05:36:14.713
> 
> 标签：css, firefox, google-chrome, layout, padding

所以我有一个带有专栏的网页。该列顶部有一个固定的标题和一个大的滚动正文部分，下面的 HTML/CSS 可以很好地解决这个问题。

*问题*：我想在身体底部添加填充，所以如果你一直向下滚动，你会得到一些空白，而不是让所有东西都卡在底部边缘。添加`padding-bottom: 50px`到`.body`Chrome 中完美运行；但是，在 Firefox 中，使用该属性似乎`bottom`意味着`padding-bottom`被忽略。如果你 drop `bottom`，填充出现，但滚动条消失。

**测试.html**

```
<link type="text/css" rel="stylesheet" media="all" href="/test.css">
<div class="column">
  <div class="header">
    Fixed header
  </div>
  <div class="body">
    <h1>Body</h1>
    Where's the bottom padding?
  </div>
</div> 
```

**测试.css**

```
.column {
  position: absolute;
  height: 100px;
  width: 100%;
  background-color: green;
}

.header {
  position: absolute;
  height: 30px;
  background-color: red;
}

.body {
  position: absolute;
  top: 30px;
  bottom: 0;
  overflow-y: auto;
  background-color: blue;
  padding-bottom: 50px;  /* Broken in Firefox */
} 
```

上面的 JSFiddle：http: [//jsfiddle.net/jpatokal/PBwVa/](http://jsfiddle.net/jpatokal/PBwVa/)

有没有解决的办法？我想出的一个解决方法是使用一串`:last-child`选择器将填充添加到其中的最后一个元素`.body`，但是，eww。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T09:44:42.883

在 div.body 中添加一个带有底部边距的内部 div 似乎可以在您的 jsfiddle 中使用。

```
<link type="text/css" rel="stylesheet" media="all" href="/test.css">
<div class="column">
  <div class="header">
    Fixed header
  </div>
  <div class="body">
    <div class="inner">
      <h1>Body</h1>
        Where's the bottom padding?
    </div> 
  </div>
</div> 
```

和（额外的）CSS：

```
.body .inner {
  margin-bottom: 30px;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T05:43:47.617

另一种解决方法是将您的内容包装在另一个 div 中，并将您的填充（或边距）添加到该 div 而不是滚动`.body`div：

```
 <div class="body">
    <div class="body-content">
      <h1>Body</h1>
      Where's the bottom padding?
    </div>
  </div> 
```

和CSS...

```
.body {
  position: absolute;
  top: 30px;
  bottom: 0;
  overflow-y: auto;
  background-color: blue;
}
.body-content {
  padding-bottom: 50px;  /* should work */
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-26T11:44:08.520

当您不想添加额外的 DIV 时，还有另一种解决方法。

```
.body:after {
  content: "";
  display: block;
  height: 50px;
  width: 100%;
} 
```

在 FF、Chrome、IE8-10 中工作。

# android-emulator - 如何在 Ubuntu 12.10 中启动 Android 模拟器？

> ID：13189888
> 
> 赞同：3
> 
> 时间：2012-11-02T05:36:23.267
> 
> 标签：android-emulator, ubuntu-12.10

我下载了 android-sdk-linux 并将其复制到我的本地驱动器并解压缩。现在，当我尝试在 avd 管理器中创建模拟器并启动模拟器时，它不会启动。它需要 android-sdk-linux 中的平台和平台工具目录的环境变量。如何在 Ubuntu 中创建这两个目录的环境变量？

# ios - 如何从 iTunes 获取 iOS App 图标链接？

> ID：13189890
> 
> 赞同：0
> 
> 时间：2012-11-02T05:36:46.423
> 
> 标签：ios, itunes

有没有办法从 iTunes 获取 iOS 应用程序图标链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:44:54.657

你想要应用程序的图标链接吗？在网络浏览器中打开应用程序的链接，而不是在 iTunes 中。右键单击应用程序的图标。选择检查元素，然后您可以看到该图像的链接。首先应用程序必须已经在 AppStore 中。 ![在此处输入图像描述](../Images/8b1e17e93f9ba4133fc5ea127907401a.png)

如果您想在将应用程序提交到 AppStore 之前获取应用程序的链接。你可以试试[这个](http://itunesconnect.apple.com)。

选择您的应用程序，在 App Store 中有一个链接 View，即使该应用程序仍然不存在，此按钮也会为您提供应用程序商店链接

请参阅此 SO 问题：[在 Apple Appstore 中发布应用程序之前，我可以获得指向我的应用程序的链接吗？](https://stackoverflow.com/questions/10927996/can-i-get-a-link-to-my-app-before-i-publish-it-in-the-apple-appstore)

# iphone - 蓝牙连接到其他没有附件的外部 USB 蓝牙设备？

> ID：13189891
> 
> 赞同：3
> 
> 时间：2012-11-02T05:36:48.833
> 
> 标签：iphone, ios, ios5, bluetooth, ios6

我有一个要求 - 我需要将我的 iPhone 应用程序与外部蓝牙设备（如温度计、血氧计）连接，而无需外部附件，并且我需要将数据与我的应用程序一起传输到蓝牙设备。可能吗？我可以将我的 iPhone 连接到任何其他设备（不是 Apple 设备）吗？有人知道吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:16:33.500

如果您要求将蓝牙与任何其他蓝牙连接，而不是从现在开始。

在 ios 苹果中引入了用于连接外部蓝牙设备的核心蓝牙。CoreBluetooth 框架提供对蓝牙 4.0 低功耗设备的访问。但它在 ios 5.0 之后的支持。

您可以从下面的 url 获取更多信息和演示源代码。

[http://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/_index.html](http://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CoreBluetooth_Framework/_index.html)

希望这会帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T06:35:50.380

如果您要求将蓝牙与任何其他蓝牙连接，而不是从现在开始。

您还可以从以下网址获取更多信息。

[http://developer.apple.com/library/ios/#samplecode/TemperatureSensor/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/TemperatureSensor/Introduction/Intro.html)

# java - Java 自定义树节点交换

> ID：13189893
> 
> 赞同：1
> 
> 时间：2012-11-02T05:37:01.157
> 
> 标签：java, generics, tree

我在使用自定义树时遇到了一些麻烦。我正在编写一个“学习”动物的程序。让我们从节点开始。我从一个名为 BTNode 的类开始。它包含一个字符串值和一个“右”和“左”BTNode。然后我将 BTNode 扩展为一个名为 DecisionTreeNode 的抽象类。DecisionTreeNode 由 ThingNode 和 QuestionNode 扩展。事物节点仅作为叶节点，其字符串值是动物的名称。QuestionNode 将保存区分动物的问题，并且应该始终有两个子节点。

所以，这个想法是它将通过询问用户提供的问题来学习。因此，它会从简单地让用户想到一种动物开始，然后问，“它是一个吗？”，如果我回答不是，它会询问我的答案，以及一个区分两者的问题。

例如，我可以用一个thingNode（“mouse”）“播种”树，如果我想的是一条鱼，那么我将回答它的第一个问题“否”，并提供一个问题，“它活吗？在水里？”。现在下一次，它会先问：“它生活在水中吗？” “是”将导致“它是一条鱼”，而“否”将导致“它是一只老鼠吗？”。

所以，我将在下面发布我的“学习”方法。我想我有一个参考问题。我将 DecisionTreeNode 传递给 learn 方法，但我对其所做的更改并没有级联备份。不确定我是否解释正确。该方法适用于第一次运行，您将看到我将根节点从事物更改为问题并将其子节点设置为两个动物的位置。然而，这不适用于“当前”（传递给方法的叶节点），学习方法的最后一行是未按预期运行的行。

对不起，文字墙，如果您想发布更多代码或任何其他信息，请告诉我。提前致谢。

“root”最初被传递到 play 方法中。

```
public static void play(DecisionTreeNode current) {
    while(!current.isLeaf()) {
        if(queryUser(current.getValue())) {
            current = current.getYesLink();
        }
        else {

            current = current.getNoLink();
        }
    }
    System.out.println("Is it a " + current.getValue() + "?");
    if(!queryUser("Correct?")) {
        learn(current);
    }
    else {
        System.out.println("I win!");
    }
}

public static void learn(DecisionTreeNode current) {
        String currentGuess;
        String correctGuess;
        String newQuestion;
        ThingNode tempNode;

        currentGuess = current.getValue();
        System.out.println("I give up, what animal were you thinking of?");

        correctGuess = stdin.nextLine();
        System.out.println("Please enter a yes or no question that distinguishes a " + correctGuess + " from a " + currentGuess +": ");

        newQuestion = stdin.nextLine();

        tempNode = (ThingNode)current;
        if(current == root) {
            if(queryUser("")) {
                root = new QuestionNode(newQuestion, tempNode, new ThingNode(correctGuess));
            }
            else {
                root = new QuestionNode(newQuestion, new ThingNode(correctGuess), tempNode);
            }
        }
        else {
            current = new QuestionNode(newQuestion, tempNode, new ThingNode(correctGuess));
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:45:04.803

你的问题在这里：

```
else {
    current = new QuestionNode(newQuestion, tempNode, new ThingNode(correctGuess));
} 
```

当前是方法的参数。*它是对通过 value 传递*的 DecisionTreeNode 的引用。在此处设置`current`不会更改`current`传递给方法的内容。

您可以将父级传递`current`给函数并调整其引用`current`或创建一个`replace(Node, Node)`可以调用的方法，例如`parent.replace(leaf, createNewLearnedNode(leaf))`.

# php - Codeigniter controller model call fail

> ID：13189903
> 
> 赞同：1
> 
> 时间：2012-11-02T05:37:53.917
> 
> 标签：php, codeigniter, sql-update

I am new to CI and I want to update some data in mysql . So here is my controller

```
class Ci_update extends CI_Controller
{
    function __construct() {
        parent::__construct();
    }

    function index()
    {
        $data = array
        (
          'title' => 'Data Structure using C',  
          'text' => 'Data Structure Using C, for, IIIrd Sem VTU CSE students'
        );
        $id = 4 ;

        $this->load->model('ci_update_model');
        $this->ci_update_model($data,$id);
    }
} 
```

and my model is :

```
class Ci_update_model extends CI_Model
{
    function __construct() {
        parent::__construct();
    }

    function updateData($data,$id)
    {
        $this->db->where('id',$id);
        $this->db->update('data',$data);
    }
} 
```

But when I tried to run the program , it says `Call to undefined method Ci_update::ci_update_model() in C:\wamp\www\ci\application\controllers\ci_update.php on line 19` What wrom am I doing?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-02T05:44:39.283

Use as below

```
$this->load->model('ci_update_model');
$this->ci_update_model->updateData($data,$id); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:55:58.240

DO this changes in your Controller code,Rest is same:

```
 $this->load->model('ci_update_model');
 $this->ci_update_model->updateData($data,$id); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-11-02T05:41:29.837

in your controller's constructer add this line

```
$this->load->model('Ci_update_model'); 
```

and the error will get resolved

# java - Java 扫描器输入，测试是否按下按钮

> ID：13189905
> 
> 赞同：0
> 
> 时间：2012-11-02T05:37:59.263
> 
> 标签：java, input, java.util.scanner

> **可能重复：**
> [如何从 Java 中的控制台读取单个字符（当用户键入时）？](https://stackoverflow.com/questions/1066318/how-to-read-a-single-char-from-the-console-in-java-as-the-user-types-it)

我正在用 Java 编程，我想知道它们是否是一种“等待”直到按下按钮，然后再继续程序的下一部分的方法。我在终端中运行它。IE

```
Scanner in = new Scanner(System.in);
.
.
.
System.out.print("Something");
/* Wait until a button has been pressed */ 
System.out.println("Something Else"); 
```

像 in.next() 这样的东西会等到你按下某个东西然后按下回车。有没有办法可以等到按下任何按钮（或单击鼠标？）然后继续下一行。最好不要将输入回显到屏幕上（如果可能的话）。
所以输出将是：Something Something Else

感谢您的所有时间任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T05:42:32.253

一种方法是设置键盘/鼠标挂钩。

您可以使用[Jnativehook](http://code.google.com/p/jnativehook/)来做到这一点：

> JNativeHook 是一个为 Java 提供全局键盘和鼠标侦听器的库。这将允许您监听全局快捷方式或鼠标移动，否则使用纯 Java 是不可能的。为了完成这项任务，JNativeHook 通过 Java 的本机接口利用平台相关的本机代码来创建低级系统范围的挂钩并将这些事件传递给您的应用程序。

另一种方法是编写一个 KeyListener 来捕获键盘输入，看看[这里](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)

# html - SVG 渲染问题

> ID：13189910
> 
> 赞同：0
> 
> 时间：2012-11-02T05:38:15.757
> 
> 标签：html, svg, cross-browser

我在除 Chrome 之外的所有浏览器中都遇到了一些 SVG 渲染错误。SVG 都嵌入在 HTML 文件中，当前所有浏览器都支持该文件。然而，大多数浏览器的颜色是错误的（只是标准的十六进制颜色），而其他浏览器则根本无法渲染一些（而其他浏览器则很好）。这是源文件和屏幕截图：[http](http://awesomegeek.com/bugreport/bugreport.zip) ://awesomegeek.com/bugreport/bugreport.zip自己看看，如果您可以复制它或提出解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T07:36:33.510

恐怕您的 html 文件无效。您有多个具有相同 id 的元素，例如 linearGradient id="a"。我知道它们出现在不同的 svg 片段中，但你仍然不能这样做，所有 Id 在文件中必须是全局唯一的。我认为 Firefox 通过在整个文件中选择第一个图标来正确绘制图标。

# dependency-injection - EntityManager 注入在 JBoss 7.1.1 中有效，但在 WebSphere 7 中无效

> ID：13189911
> 
> 赞同：0
> 
> 时间：2012-11-02T05:38:17.023
> 
> 标签：dependency-injection, struts2, jpa-2.0, jboss7.x, websphere-7

我已经构建了一个 EJB 来管理我的数据库访问。我正在围绕它构建一个使用 Struts 2 的网络应用程序。

我遇到的问题是，当我部署耳朵时，EntityManager 没有注入到我的服务类中（并且最终为 null 并导致 NullPointerExceptions）。

奇怪的是，它适用于 JBoss 7.1.1，但不适用于 WebSphere 7。

您会注意到 Struts 不注入 EJB，所以我有一些拦截器代码可以做到这一点。我目前的工作理论是，WS7 容器由于某些未知原因而无法注入 EntityManager。我的下一步是尝试下一个 Spring，但如果可能的话，我真的很想让它工作。

我花了几天时间搜索和尝试各种事情，但没有任何运气。我想我会试一试。让我知道我是否可以提供更多信息。

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence    xmlns="http://java.sun.com/xml/ns/persistence"
                xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.0"
                xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd">
    <persistence-unit name="JPATestPU" transaction-type="JTA">
        <description>JPATest Persistence Unit</description>
        <jta-data-source>jdbc/Test-DS</jta-data-source>
        <class>org.jaredstevens.jpatest.db.entities.User</class>
        <properties>
            <property name="hibernate.hbm2ddl.auto" value="update"/>
        </properties>
    </persistence-unit>
</persistence> 
```

```
package org.jaredstevens.jpatest.db.entities;

import java.io.Serializable;
import javax.persistence.*;

@Entity
@Table
public class User implements Serializable {
    private static final long serialVersionUID = -2643583108587251245L;

    private long id;
    private String name;
    private String email;

    @Id
    @GeneratedValue(strategy = GenerationType.TABLE)
    public long getId() {
        return id;
    }

    public void setId(long id) {
        this.id = id;
    }

    @Column(nullable=false)
    public String getName() {
        return this.name;
    }

    public void setName( String name ) {
        this.name = name;
    }

    @Column(nullable=false)
    public String getEmail() {
        return this.email;
    }

    @Column(nullable=false)
    public void setEmail( String email ) {
        this.email= email;
    }
} 
```

```
package org.jaredstevens.jpatest.db.services;
import java.util.List;

import javax.ejb.Remote;
import javax.ejb.Stateless;
import javax.ejb.TransactionAttribute;
import javax.ejb.TransactionAttributeType;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.PersistenceContextType;
import javax.persistence.Query;

import org.jaredstevens.jpatest.db.entities.User;
import org.jaredstevens.jpatest.db.interfaces.IUserService;

@Stateless(name="UserService",mappedName="UserService")
@Remote
public class UserService implements IUserService {
    @PersistenceContext(unitName="JPATestPU",type=PersistenceContextType.TRANSACTION)
    private EntityManager em;

    @TransactionAttribute(TransactionAttributeType.REQUIRED)
    public User getUserById(long userId) {
        User retVal = null;
        if(userId > 0) {
            retVal = (User)this.getEm().find(User.class, userId);
        }
        return retVal;
    }

    @TransactionAttribute(TransactionAttributeType.REQUIRED)
    public List<User> getUsers() {
        List<User> retVal = null;
        String sql;
        sql = "SELECT u FROM User u ORDER BY u.id ASC";
        Query q = this.getEm().createQuery(sql);
        retVal = (List<User>)q.getResultList();
        return retVal;
    }

    @TransactionAttribute(TransactionAttributeType.REQUIRED)
    public void save(User user) {
        this.getEm().persist(user);
    }

    @TransactionAttribute(TransactionAttributeType.REQUIRED)
    public boolean remove(long userId) {
        boolean retVal = false;
        if(userId > 0) {
            User user = null;
            user = (User)this.getEm().find(User.class, userId);
            if(user != null) this.getEm().remove(user);
            if(this.getEm().find(User.class, userId) == null) retVal = true;
        }
        return retVal;
    }

    public EntityManager getEm() {
        return em;
    }

    public void setEm(EntityManager em) {
        this.em = em;
    }
} 
```

```
package org.jaredstevens.jpatest.actions.user;

import javax.ejb.EJB;
import org.jaredstevens.jpatest.db.entities.User;
import org.jaredstevens.jpatest.db.interfaces.IUserService;

import com.opensymphony.xwork2.ActionSupport;

public class UserAction extends ActionSupport {
    @EJB(mappedName="UserService")
    private IUserService userService;

    private static final long serialVersionUID = 1L;
    private String userId;
    private String name;
    private String email;

    private User user;

    public String getUserById() {
        String retVal = ActionSupport.SUCCESS;
        this.setUser(userService.getUserById(Long.parseLong(this.userId)));
        return retVal;
    }

    public String save() {
        String retVal = ActionSupport.SUCCESS;
        User user = new User();
        if(this.getUserId() != null && Long.parseLong(this.getUserId()) > 0) user.setId(Long.parseLong(this.getUserId()));
        user.setName(this.getName());
        user.setEmail(this.getEmail());
        userService.save(user);
        this.setUser(user);
        return retVal;
    }

    public String getUserId() {
        return this.userId;
    }

    public void setUserId(String userId) {
        this.userId = userId;
    }

    public String getName() {
        return this.name;
    }

    public void setName( String name ) {
        this.name = name;
    }

    public String getEmail() {
        return this.email;
    }

    public void setEmail( String email ) {
        this.email = email;
    }

    public User getUser() {
        return this.user;
    }

    public void setUser(User user) {
        this.user = user;
    }
} 
```

```
package org.jaredstevens.jpatest.utils;

import com.opensymphony.xwork2.ActionInvocation;
import com.opensymphony.xwork2.interceptor.Interceptor;

public class EJBAnnotationProcessorInterceptor implements Interceptor {
    private static final long serialVersionUID = 1L;

    public void destroy() {
    }

    public void init() {
    }

    public String intercept(ActionInvocation ai) throws Exception {
        EJBAnnotationProcessor.process(ai.getAction());
        return ai.invoke();
    }
} 
```

```
package org.jaredstevens.jpatest.utils; 

import java.lang.reflect.Field;

import javax.ejb.EJB;
import javax.naming.Context;
import javax.naming.InitialContext;
import javax.naming.NamingException;

public class EJBAnnotationProcessor {
    public static void process(Object instance)throws Exception{
        Field[] fields = instance.getClass().getDeclaredFields();
        if(fields != null && fields.length > 0){
            EJB ejb;
            for(Field field : fields){
                ejb = field.getAnnotation(EJB.class);
                if(ejb != null){
                    field.setAccessible(true);
                    field.set(instance, EJBAnnotationProcessor.getEJB(ejb.mappedName()));
                }
            }
        }
    }

    private static Object getEJB(String mappedName) {
        Object retVal = null;
        String path = "";
        Context cxt = null;
        String[] paths = {"cell/nodes/virgoNode01/servers/server1/","java:module/"};
        for( int i=0; i < paths.length; ++i )
        {
            try {
                path = paths[i]+mappedName;
                cxt = new InitialContext();
                retVal = cxt.lookup(path);
                if(retVal != null) break;
            } catch (NamingException e) {
                retVal = null;
            }
        }
        return retVal;
    }
} 
```

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE struts PUBLIC
    "-//Apache Software Foundation//DTD Struts Configuration 2.0//EN"
    "http://struts.apache.org/dtds/struts-2.0.dtd">

<struts>
    <constant name="struts.devMode" value="true" />

    <package name="basicstruts2" namespace="/diagnostics" extends="struts-default">
        <interceptors>
            <interceptor name="ejbAnnotationProcessor"
                class="org.jaredstevens.jpatest.utils.EJBAnnotationProcessorInterceptor"/>
            <interceptor-stack name="baseStack">
            <interceptor-ref name="defaultStack"/>
            <interceptor-ref name="ejbAnnotationProcessor"/>
            </interceptor-stack>
        </interceptors>
        <default-interceptor-ref name="baseStack"/>
    </package>

    <package name="restAPI" namespace="/conduit" extends="json-default">
        <interceptors>
            <interceptor name="ejbAnnotationProcessor"
                class="org.jaredstevens.jpatest.utils.EJBAnnotationProcessorInterceptor" />
            <interceptor-stack name="baseStack">
                <interceptor-ref name="defaultStack" />
                <interceptor-ref name="ejbAnnotationProcessor" />
            </interceptor-stack>
        </interceptors>
        <default-interceptor-ref name="baseStack" />

        <action name="UserAction.getUserById"
            class="org.jaredstevens.jpatest.actions.user.UserAction" method="getUserById">
            <result type="json">
                <param name="ignoreHierarchy">false</param>
                <param name="includeProperties">
                    ^user\.id,
                    ^user\.name,
                    ^user\.email
                </param>
            </result>
            <result name="error" type="json" />
        </action>

        <action name="UserAction.save"
            class="org.jaredstevens.jpatest.actions.user.UserAction" method="save">
            <result type="json">
                <param name="ignoreHierarchy">false</param>
                <param name="includeProperties">
                    ^user\.id,
                    ^user\.name,
                    ^user\.email
                </param>
            </result>
            <result name="error" type="json" />
        </action>
    </package>
</struts> 
```

堆栈跟踪

```
java.lang.NullPointerException
    org.jaredstevens.jpatest.actions.user.UserAction.save(UserAction.java:38)
    sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:60)
    sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:37)
    java.lang.reflect.Method.invoke(Method.java:611)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeAction(DefaultActionInvocation.java:453)
    com.opensymphony.xwork2.DefaultActionInvocation.invokeActionOnly(DefaultActionInvocation.java:292)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:255)
    org.jaredstevens.jpatest.utils.EJBAnnotationProcessorInterceptor.intercept(EJBAnnotationProcessorInterceptor.java:21)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:256)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:176)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:265)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:138)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:211)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:190)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:90)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:100)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:141)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:145)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:171)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:98)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:192)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:187)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:249)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:54)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:511)
    org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
    com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
    com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:997)
    com.ibm.ws.webcontainer.extension.DefaultExtensionProcessor.invokeFilters(DefaultExtensionProcessor.java:1062)
    com.ibm.ws.webcontainer.extension.DefaultExtensionProcessor.handleRequest(DefaultExtensionProcessor.java:982)
    com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3935)
    com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:276)
    com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:931)
    com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1583)
    com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
    com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
    com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
    com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
    com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:276)
    com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.sendToDiscriminators(NewConnectionInitialReadCallback.java:214)
    com.ibm.ws.tcp.channel.impl.NewConnectionInitialReadCallback.complete(NewConnectionInitialReadCallback.java:113)
    com.ibm.ws.tcp.channel.impl.AioReadCompletionListener.futureCompleted(AioReadCompletionListener.java:165)
    com.ibm.io.async.AbstractAsyncFuture.invokeCallback(AbstractAsyncFuture.java:217)
    com.ibm.io.async.AsyncChannelFuture.fireCompletionActions(AsyncChannelFuture.java:161)
    com.ibm.io.async.AsyncFuture.completed(AsyncFuture.java:138)
    com.ibm.io.async.ResultHandler.complete(ResultHandler.java:204)
    com.ibm.io.async.ResultHandler.runEventProcessingLoop(ResultHandler.java:775)
    com.ibm.io.async.ResultHandler$2.run(ResultHandler.java:905)
    com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T20:28:40.073

这里真正的问题是 EJB 没有注入。我的拦截器代码无法在 JNDI 中成功查找 EJB，并将我对它的本地引用设置为 null。一旦解决了这个问题，EntityManager 就会被注入，一切都会再次变得愉快。

对此的解决方案有两个：

1.  我的拦截器类中的 JNDI 查找失败，因为我硬编码的路径对于我所在的服务器是错误的。
2.  WS7 配置需要应用程序的 EJB 设置中的别名，以便我的拦截器类可以找到正确的 EJB。

要修复＃1 - 我修改了我的代码。我需要一个更好的解决方案，尽管这与服务器无关。

要修复＃2：

1.  登录控制台。(http://servername:9080/admin)
2.  应用程序->应用程序类型->Websphere 企业应用程序。
3.  单击您的应用程序名称（在我的例子中是 JPATestEAR）。
4.  右侧有链接。单击“EJB JNDI 名称”（它应该列出所有 EJB）。
5.  在右侧，有单选按钮和表单域，您可以在其中为每个 EJB 输入别名。我使用了“所有接口的 JNDI 名称”，并在“UserService”字段中输入了我的 EJB 名称。
6.  单击“保存”，然后再次保存设置。

感谢@bkail 让我走上正轨。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-03T16:57:35.503

如果您的应用程序被打包为 WAR，这可能解释了为什么它不能在 WS7 上运行。

正如 bkail 指出的那样，这可能是包装问题。

从 EE6 开始，您可以将本地 EJB bean 捆绑为您的 war 应用程序的一部分，但在 EE6 之前，您需要将其部署为 ear 并将 ejb 打包在 ejb-jar 中。

您可以尝试使用 Websphere 8+，它应该可以工作或将您的应用程序重新打包为带有 ejb-jar 模块和 war 模块的 ear。

# desire2learn - Desire2learn-如何查看文件访问日期

> ID：13189920
> 
> 赞同：1
> 
> 时间：2012-11-02T05:39:18.207
> 
> 标签：desire2learn

我在配置我们的 Desire2Learn 安装时遇到了一些问题。我希望能够查看用户访问文件的所有日期/时间。到目前为止，我只能查看文件是否已打开。

有什么建议吗？

谢谢

# plot - Mathematica - 绘制直接从求解创建的函数的输出

> ID：13189922
> 
> 赞同：2
> 
> 时间：2012-11-02T05:39:21.793
> 
> 标签：plot, wolfram-mathematica

我有一些相当长的矩阵代数，我试图绘制其结果。轴上似乎没有任何东西出现，我不能完全确定问题出在哪里。我使用此处的提示成功地从solve的输出创建了一个函数： [如何直接从solve的输出创建一个函数](https://stackoverflow.com/questions/5319771/how-to-create-a-function-directly-from-the-output-of-solve) 但它不会绘图！

这里（简要地）是代码：

`eqn = m.{1, r} == {t, 0}`

`sols1 = Solve[eqn, {t, r}]`

m 是一个复矩阵

这是输出：

`{{t -> -((-1\. cos[9.62458 s]^2 - (1\. + 0\. I) sin[9.62458 s]^2)/( cos[9.62458 s] - (0\. + 2.4087 I) sin[9.62458 s])), r -> ((0\. + 2.1913 I) sin[9.62458 s])/( cos[9.62458 s] - (0\. + 2.4087 I) sin[9.62458 s])}}`

到目前为止一切顺利（除了 Mathematica 似乎对整个 cos^2 + sin^2 = 1 事物有问题）。

然后我尝试将 t 的实部绘制为 s 的函数：

`Plot[Re[t /. sols1], {s, 0, 0.4}]`

我只是得到空轴。

我尝试将输出分配给一个函数并以这种方式绘图

`f[s_] = t /. sols1[[1, 1]]`

`Plot[Re[f[s]], {s, 0, 0.4}]`

而且我仍然得到一个空轴。我在 Matlab 中转录了函数，它绘制得很好，所以我知道解决方案是合理的。我必须为几个越来越多毛的矩阵 m 解决这个问题，所以转录到 Matlab 并不理想。我想在 Mathematica 中绘图。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T12:02:57.613

尝试使用数学语法。即`Sin`代替`sin`; 相同的`cos`：

```
In[1]:= sols1={
{t->-((-1\. cos[9.62458 s]^2-(1.+0\. I) sin[9.62458 s]^2)/(cos[9.62458 s]-(0.+2.4087 I) sin[9.62458 s]))
,r->((0.+2.1913 I) sin[9.62458 s])/(cos[9.62458 s]-(0.+2.4087 I) sin[9.62458 s])}
}/.{cos->Cos,sin->Sin}//FullSimplify//Chop
Out[1]= {{t->1./(Cos[9.62458 s]-(0\. +2.4087 I) Sin[9.62458 s]),r->1/(-1.09921-(0\. +0.45635 I) Cot[9.62458 s])}} 
```

然后例如

```
GraphicsColumn[Plot[t /. sols1 // #, {s, 0, .4}, PlotLabel -> #[t], Frame -> True] & /@ {Re, Im, Abs[#]^2 &}] 
```

应该运作良好。

# c# - 所有线程完成后关闭加载表单

> ID：13189926
> 
> 赞同：1
> 
> 时间：2012-11-02T05:39:56.833
> 
> 标签：c#, winforms, multithreading

我想知道我所有的异步线程什么时候完成，所以我知道什么时候关闭我的加载表单。我的代码从不关闭加载表单。我不知道为什么。我也不确定如何正确地将 ManualResetEvent 对象传递给异步线程。

我也愿意采用更简单的方法来实现我知道何时关闭加载表单的目标。

**更新**

在阅读了这里的建议后，我更新了我的课程。不幸的是，它仍然不起作用。不过我觉得更近了。只是回调永远不会触发。

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.Threading.Tasks;
using System.Threading;

namespace BrianTests
{

    public class TaskInfo
    {
        public RegisteredWaitHandle Handle;
        public string OtherInfo = "default";
        public Form loading;
    }

    public partial class AsyncControlCreateTest : Form
    {
        //List<ManualResetEvent> MREs = new List<ManualResetEvent>();
        Form loading = new Form() { Text = "Loading...", Width = 100, Height = 100 };
        CountdownWaitHandle cdwh;

        public AsyncControlCreateTest()
        {
            InitializeComponent();       
        }

        private void AsyncControlCreateTest_Load(object sender, EventArgs e)
        {            
            loading.Show(this);//I want to close when all the async threads have completed
            CreateControls();
        }  

        private void CreateControls()
        {
            int startPoint= 0;
            int threadCount = 2;
            cdwh = new CountdownWaitHandle(threadCount);

            for (int i = 0; i < threadCount; i++)
            {
                ManualResetEvent mre = new ManualResetEvent(initialState: true);                
                UserControl control = new UserControl() { Text = i.ToString() };                
                control.Load += new EventHandler(control_Load);
                Controls.Add(control);
                control.Top = startPoint;
                startPoint += control.Height;
                //MREs.Add(mre);
                //mre.Set();//just set here for testing
            }
            Task.Factory.StartNew(new Action(() => 
                {   
            TaskInfo info = new TaskInfo();
            info.loading = loading;
            try
            {
                info.Handle = ThreadPool.RegisterWaitForSingleObject(cdwh, WaitProc, info, 4000, executeOnlyOnce: false);
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);
            }
                })); 
        }

        public static void WaitProc(object state, bool timedOut)
        {//this callback never occurs...
            TaskInfo ti = (TaskInfo)state;

            string cause = "TIMED OUT";
            if (!timedOut)
            {
                cause = "SIGNALED";
                // If the callback method executes because the WaitHandle is 
                // signaled, stop future execution of the callback method 
                // by unregistering the WaitHandle. 
                if (ti.Handle != null)
                    ti.Handle.Unregister(null);
            }

            Console.WriteLine("WaitProc( {0} ) executes on thread {1}; cause = {2}.",
                ti.OtherInfo,
                Thread.CurrentThread.GetHashCode().ToString(),
                cause
            );
            ti.loading.Close();
        }

        void control_Load(object sender, EventArgs e)
        {
            RichTextBox newRichTextBox = new RichTextBox();
            UserControl control = sender as UserControl;
            control.Controls.Add(newRichTextBox);            

            Task.Factory.StartNew(new Action(() => 
                {                    
                   Thread.Sleep(2000);
                   newRichTextBox.Invoke(new Action(() => newRichTextBox.Text = "loaded"));
                   cdwh.Signal();
                })); 
        }      
    }

    public class CountdownWaitHandle : WaitHandle
    {
        private int m_Count = 0;
        private ManualResetEvent m_Event = new ManualResetEvent(false);

        public CountdownWaitHandle(int initialCount)
        {
            m_Count = initialCount;
        }

        public void AddCount()
        {
            Interlocked.Increment(ref m_Count);
        }

        public void Signal()
        {
            if (Interlocked.Decrement(ref m_Count) == 0)
            {
                m_Event.Set();
            }
        }

        public override bool WaitOne()
        {
            return m_Event.WaitOne();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:57:30.073

问题是 WaitHandle.WaitAll 抛出异常，您可以看到：

```
 try
 {
    WaitHandle.WaitAll(MREs.ToArray());
 }
 catch (Exception e) {
    MessageBox.Show(e.Message);
    throw;
 } 
```

错误消息是“不支持 STA 线程上的多个句柄的 WaitAll”。如果你做类似的事情

```
foreach(var m in MREs)
   m.WaitOne(); 
```

它会起作用的。

我不太确定为什么异常没有像我希望的那样使应用程序崩溃。看看[我怎样才能让 WinForms 停止默默地忽略未处理的异常？](https://stackoverflow.com/questions/7572995/how-can-i-get-winforms-to-stop-silently-ignoring-unhandled-exceptions)为了这。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T14:31:25.357

锁定 MRE 并将 WaitAll 移出 STA 线程就可以解决问题。

```
public partial class AsyncControlCreateTest : Form
{
    object locker = new object();
    static List<ManualResetEvent> MREs = new List<ManualResetEvent>();
    Form loading = new Form() { Text = "Loading...", Width = 100, Height = 100 };

    public AsyncControlCreateTest()
    {
        InitializeComponent();       
    }

    private void AsyncControlCreateTest_Load(object sender, EventArgs e)
    {            
        loading.Show(this);//I want to close when all the async threads have completed
        CreateControls();
    }  

    private void CreateControls()
    {
        int startPoint= 0;            
        for (int i = 0; i < 100; i++)
        {
            ManualResetEvent mre = new ManualResetEvent(initialState: false);                
            UserControl control = new UserControl() { Text = i.ToString() };                
            control.Load += new EventHandler(control_Load);
            Controls.Add(control);
            control.Top = startPoint;
            startPoint += control.Height;
            MREs.Add(mre);
        }
        Task.Factory.StartNew(new Action(() =>
        {
            try
            {
                WaitHandle.WaitAll(MREs.ToArray());
            }
            catch (Exception ex)
            {
                MessageBox.Show("error " + ex.Message);
            }
            finally
            {
                MessageBox.Show("MRE count = " + MREs.Count);//0 count provides confidence things are working...
                loading.Invoke(new Action( () => loading.Close()));
            }

        }));
    }

    void control_Load(object sender, EventArgs e)
    {
        RichTextBox newRichTextBox = new RichTextBox();
        UserControl control = sender as UserControl;
        control.Controls.Add(newRichTextBox);            

        Task.Factory.StartNew(new Action(() => 
            {                    
               Thread.Sleep(500);
               newRichTextBox.Invoke(new Action(() => newRichTextBox.Text = "loaded"));

               lock (locker)
               {
                   var ev = MREs.First();
                   MREs.Remove(ev);
                   ev.Set();
               }                   
            })); 
    }      
} 
```

# ssh - 我收到错误 ssh exit status 1

> ID：13189927
> 
> 赞同：2
> 
> 时间：2012-11-02T05:39:59.687
> 
> 标签：ssh, jenkins

在 jenkins 构建后操作中，我使用 ssh ssh site *10.32.25.66在远程主机上配置了**Execute shell 脚本*，命令：

 *```
cd $HOME/appsadm/bin; ./ims-carte-stop 
```

我再次修改

```
cd /HOME/appsadm/bin; ./ims-carte-stop.* 
```

我尝试了这两个命令并且构建成功，但是我在 Jenkins 的控制台输出中看到它没有执行我的脚本。我收到 ssh 退出状态 1 错误。在我的 winscp 中，我的脚本 (ims-carte-stop) 在这个位置`home/appsadm/bin`。

如果我做错了什么，请告诉我。我的意图是在构建成功时自动从 jenkins 停止我的服务器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T16:29:59.463

这可能是您的问题中的一个错字，但是：

你说你的`ims-carte-stop`脚本在：

```
/home/appsadm/bin 
```

而你的脚本正在做：

```
cd $HOME/appsadm/bin
or
cd /HOME/appsadm/bin 
```

查看路径，我假设您使用的是 UNIX 风格的操作系统（Linux、BSD、OSX）。UNIX 路径区分大小写。您的脚本应该调用：

```
cd /home/appsadm/bin 
```

请注意，“家”这个词都是小写字母而不是大写字母。此外， using`$`使它成为一个变量，我认为你不想要。*

# java - Java TreeMap 实现 get 和 put 方法

> ID：13189929
> 
> 赞同：2
> 
> 时间：2012-11-02T05:40:00.043
> 
> 标签：java, recursion, treemap, comparable

我正在编写 TreeMap 的实现，并且在使用 get 和 put 方法时遇到了问题。这是代码：

```
public class MyTreeMap<K extends Comparable<? super K>,V> extends AbstractMap<K,V>  {

K key;
V value;
int height;
MyTreeMap<K,V> left,right;
int size;

private V get(K searchKey) {
    if(this.isEmpty())
        return null;//it needs an exception

    if(this.key.compareTo(searchKey) == 0)
        return this.value;
    else if(this.key.compareTo(searchKey) > 0)
        return this.left.get(searchKey);
    else
        return this.right.get(searchKey);
}

public V put(K key, V value) {

    if(this.containsKey(key)) {
        if(this.key.compareTo(key) == 0) {
            V temp = this.value;
            this.value = value;
            return temp;
        }

        else if(this.key.compareTo(key) < 0)
            return this.right.put(key, value);
        else if(this.key.compareTo(key) > 0)
            return this.left.put(key, value);
    }

    else {
        if(this.isLeaf() || this.isEmpty()) {
            if(this.key.compareTo(key) > 0) //this line gives NPE during tests
                this.left = new MyTreeMap(key,value,null,null);
            else
                this.right = new MyTreeMap(key,value,null,null);

               //check for balance and rebalance if needed
            this.size++;
            this.setHeight();
            return null;
        }

        else {
            if(this.key.compareTo(key) > 0)
                return this.left.put(key, value);
            else
                return this.right.put(key, value);
        }
    }
} 
```

最疯狂的错误是 put 方法需要另一个 return 语句。多次检查代码，在我看来这不应该是这种情况，因为有一个返回语句不需要任何布尔语句为真。

在测试 put 方法时，我得到了一个 NPE。我认为我的代码存在一些非常严重的逻辑错误，因为我似乎无法弄清楚出了什么问题。如果您能指出我正确的方向来解决这些各种错误，那将很有帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:56:41.200

关于“额外”`return`声明：

```
if(this.containsKey(key)) {
    if(this.key.compareTo(key) == 0) {
        V temp = this.value;
        this.value = value;
        return temp;
    }

    else if(this.key.compareTo(key) < 0)
        return this.right.put(key, value);
    else if(this.key.compareTo(key) > 0)
        return this.left.put(key, value);
} 
```

您的逻辑是您正在检查`this.key.compareTo(key)`，因此您已经涵盖了所有案例。但编译器并非如此，因为：`<0``>0``==0`

1.  编译器不知道`this.key.compareTo(key)`在所有三个执行中的值是否相同。即使它具有检查方法的智能并看到它没有使用任何其他输入来获得结果（它没有），编译器也无法知道另一个线程是否正在同时更改键的值。

2.  即使您这样做`int value=this.key.compareTo(key)`并稍后对 执行检查`value`，编译器也不会检查连续的 if-elsif 是否涵盖所有值范围。无论如何，出于性能/并发原因，我建议您使用这种方法只调用`compareTo`一次。

最简单的解决方法是更改​​最后一个`else if (this.key.compareTo(key) > 0)`for just `else`（您应该知道，如果执行该块是因为 if 必须为真。

# ios5 - 在 xcode4 中插入 SQLITE3

> ID：13189934
> 
> 赞同：1
> 
> 时间：2012-11-02T05:40:18.720
> 
> 标签：ios5, xcode4, sqlite

我`SQLITE3`在 iPhone 应用程序中用于数据库操作。

我在数据库中有 2 个表，我想在不同情况下插入 2 个表。

我的问题是第一次插入操作正常。如果我尝试将值插入到另一个表中，则该值将插入到最后插入的表中。

我的 Table1 代码是：

```
-(void)addToTable1

{

    if(addStmt == nil) {
        const char *sql = "insert into Table(T1_Name) Values(?)";
        if(sqlite3_prepare_v2(database, sqlCurrency, -1, &addStmt, NULL) != SQLITE_OK)
            NSAssert1(0, @"Error while creating add statement. '%s'", sqlite3_errmsg(database));
    }

    sqlite3_bind_text(addStmt, 1, [T1_Name UTF8String], -1, SQLITE_TRANSIENT);

    if(SQLITE_DONE != sqlite3_step(addStmt))
        NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
    else
        rowID = sqlite3_last_insert_rowid(database);

    sqlite3_reset(addStmt);
    sqlite3_close(database);
} 
```

表 2 的代码是：

```
-(void)addToTable2
{
    if(addStmt == nil) {
        const char *sql = "insert into Table2(T2_Name) Values(?)";
        if(sqlite3_prepare_v2(database, sqlWeight, -1, &addStmt, NULL) != SQLITE_OK)
            NSAssert1(0, @"Error while creating add statement. '%s'", sqlite3_errmsg(database));
    }
    sqlite3_bind_text(addStmt, 1, [T2_Name UTF8String], -1, SQLITE_TRANSIENT);

    if(SQLITE_DONE != sqlite3_step(addStmt))
        NSAssert1(0, @"Error while inserting data. '%s'", sqlite3_errmsg(database));
    else
        rowID = sqlite3_last_insert_rowid(database);

    sqlite3_reset(addStmt);
    sqlite3_close(database);

} 
```

我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T08:36:38.143

释放后必须重置`addStmt`为`nil`，否则`if(addStmt == nil)`检查将阻止使用新语句。

此外，您必须在关闭数据库之前使用[`sqlite3_finalize`](http://www.sqlite.org/c3ref/finalize.html)，而不是。[`sqlite3_reset`](http://www.sqlite.org/c3ref/reset.html)

# android - 如何在android中对日期和空日期进行排序？

> ID：13189936
> 
> 赞同：1
> 
> 时间：2012-11-02T05:40:34.410
> 
> 标签：android, json, sorting, arraylist

我得到 json 数据，我想在 arrylist 中获取日期和 nulldate 存储。如何在下面的 listview 排序日期中对日期和空日期数据集进行排序。我将所有数据存储在 All_Approval_data_dto 类中。我的代码如下：请检查它，我错过了什么？

```
static final Comparator<All_Approval_data_dto> byDate = new Comparator<All_Approval_data_dto>() {
        SimpleDateFormat sdf = new SimpleDateFormat("MM/dd/yyyy hh:mm:ss a");

        public int compare(All_Approval_data_dto ord1,
                All_Approval_data_dto ord2) {

            java.util.Date d1 = null;
            java.util.Date d2 = null;
            try {
                d1 = sdf.parse(ord1.lastModifiedDate);
                d2 = sdf.parse(ord2.lastModifiedDate);
                if (d1 == null) {
                    return (d2 == null) ? 0 : -1;
                }
                if (d2 == null) {
                    return 1;
                }

            } catch (java.text.ParseException e) {
                // TODO Auto-generated catch block`
                e.printStackTrace();
            }

            return (d1.getTime() > d2.getTime() ? -1 : 1); // descending
            // return (d1.getTime() > d2.getTime() ? 1 : -1); //ascending
        }

    }; 
```

我在下面的错误：

```
11-02 11:03:58.861: ERROR/AndroidRuntime(473): FATAL EXCEPTION: main
11-02 11:03:58.861: ERROR/AndroidRuntime(473): java.lang.NullPointerException
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at java.text.SimpleDateFormat.parse(SimpleDateFormat.java:1201)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at java.text.DateFormat.parse(DateFormat.java:642)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at com.serana.Approval$2.compare(Approval.java:155)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at com.serana.Approval$2.compare(Approval.java:1)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at java.util.TimSort.countRunAndMakeAscending(TimSort.java:320)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at java.util.TimSort.sort(TimSort.java:185)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at java.util.TimSort.sort(TimSort.java:169)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at java.util.Arrays.sort(Arrays.java:1907)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at java.util.Collections.sort(Collections.java:1972)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at com.serana.Approval$4.onItemSelected(Approval.java:79)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at android.widget.AdapterView.fireOnSelected(AdapterView.java:864)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at android.widget.AdapterView.access$200(AdapterView.java:42)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at android.widget.AdapterView$SelectionNotifier.run(AdapterView.java:830)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at android.os.Handler.handleCallback(Handler.java:587)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at android.os.Handler.dispatchMessage(Handler.java:92)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at android.os.Looper.loop(Looper.java:123)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at android.app.ActivityThread.main(ActivityThread.java:4627)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at java.lang.reflect.Method.invokeNative(Native Method)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at java.lang.reflect.Method.invoke(Method.java:521)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
11-02 11:03:58.861: ERROR/AndroidRuntime(473):     at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T06:41:40.607

请用此代码替换您的 try/catch 块

```
try {

            if (d1 == null) {
                return (d2 == null) ? 0 : -1;
            }
            if (d2 == null) {
                return 1;
            }

            d1 = sdf.parse(ord1.lastModifiedDate);
            d2 = sdf.parse(ord2.lastModifiedDate);

        } catch (java.text.ParseException e) {
            // TODO Auto-generated catch block`
            e.printStackTrace();
        } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T05:46:53.907

**-**更好地使用`Joda`库来比较日期。

**-**首先你需要解析它们。使用`DateTimeFormat`：

```
DateTimeFormatter fmt = DateTimeFormat.forPattern("yyyy-MM-dd");
DateTime dateTime1 = fmt.parseDateTime(string1); 
```

**-**然后使用 DateTime.isBefore(..) 方法来比较它们：

`if (dateTime1.isBefore(dateTime2))`

# facebook - 带有数据的 Facebook 请求对话框

> ID：13189937
> 
> 赞同：3
> 
> 时间：2012-11-02T05:40:48.487
> 
> 标签：facebook

我读了这篇[文章](https://stackoverflow.com/questions/7832533/request-dialog-using-facebook?answertab=votes#tab-top)。

所以，我试了一下，我在 data 属性中输入了一个数字。

```
FB.ui({
    method: 'apprequests',
    message: 'Come join me and play at MyWebSite!',
    data: '12345',
    redirect_uri: 'myWebSite'
}); 
```

我得到了`request_ids`，但我如何得到数据部分（12345 号）？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-02T08:29:02.160

在服务器端，您可以执行以下操作：（在此处使用 php）

```
$request_ids = $_GET['request_ids'];
$request_ids = explode(",", $request_ids);
foreach($request_ids as $request_id)
    {
        $request_object = $facebook->api($request_id);
         if(isset($request_object['data'])) $req_data = $request_object['data']; //$req_data will be '12345' as per your request data set.
       // after getting the data, you may like to delete the request.
           $full_request_id = $request_id."_".$fbid; //$fbid is current user facebook id
          $facebook->api("$full_request_id","DELETE");
     } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T06:13:40.683

您是否也尝试过 Facebook 的文档？

[https://developers.facebook.com/docs/requests/](https://developers.facebook.com/docs/requests/)有更多文档；如果`data`在对请求对话框的调用中添加了参数，则在通过 API 请求请求详细信息时也应该存在相同的值（即调用`/REQUEST_ID`）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T06:14:23.457

有关更多详细信息，请参阅 facebook 开发人员站点文档 [http://developers.facebook.com/docs/reference/dialogs/requests/](http://developers.facebook.com/docs/reference/dialogs/requests/)

笔记：

`data`：可选的，您可以传递用于跟踪的附加数据。这将作为创建的请求对象的一部分存储。最大长度为 255 个字符。

# wpf - 在超极本上使用 GPS 传感器

> ID：13189939
> 
> 赞同：2
> 
> 时间：2012-11-02T05:40:56.303
> 
> 标签：wpf, geolocation

我正在英特尔超极本上开发 WPF 应用程序。由于 Ultrabook 已经包含 GPS 传感器，我该如何使用这个传感器在我的应用程序中检索我的当前位置？

我找不到任何示例代码来帮助我入门。任何指导表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T20:54:05.757

看：

[http://msdn.microsoft.com/en-us/library/system.device.location.geocoordinatewatcher(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.device.location.geocoordinatewatcher(v=vs.100).aspx)

特别是声明：

> 要开始访问位置数据，请创建 GeoCoordinateWatcher 并调用 Start 或 TryStart 以启动从当前位置提供程序获取数据。
> 
> 可以检查 Status 属性以确定数据是否可用。如果数据可用，您可以从 Position 属性中一次性获取位置，或通过处理 PositionChanged 事件接收连续的位置更新。

# r - R匹配更改顺序

> ID：13189956
> 
> 赞同：1
> 
> 时间：2012-11-02T05:42:28.543
> 
> 标签：r, match

我有一个向量（A，比如一个更大矩阵的列名）和一个矩阵（B）。

A = q,w,e,r,t

乙 =

```
q 1 
y 2
w 3
e 4
u 5
t 6
r 7 
```

我将 A 与 B 的第一列相匹配

匹配AB =

```
 q 1
      w 3
      i 4
      e 5 
      t 6
      r 7 
```

我只需要第二列。并与A一起使用。如果您看到顺序不一样。其中 a = q,w,e,r,t。matchAB, 变为 q,w,e,t,r。我不想对 A 进行字母排序。我希望 matchAB 的顺序与 A 相同。有什么帮助吗？

谢谢 ！

正如 mnel 所问：

> 输入（一）

```
a =c("q", "w", "e", "r", "t") 
```

> 输入(b)

```
b <- structure(c("q", "1", "y", "2", "w", "3", "i", "4", "e", "5",
    "t", "6", "r", "7"), .Dim = c(2L, 7L), .Dimnames = list(c("bi","bb"), NULL))

ind=which(match(b[1,],a) != 0)

> b[,ind]=

[,1] [,2] [,3] [,4] [,5]

bi "q"  "w"  "e"  "t"  "r"

bb "1"  "3"  "5"  "6"  "7" 
```

所以，我想要的输出是，

```
b[,ind]=

[,1] [,2] [,3] [,4] [,5]

bi "q"  "w"  "e"  "r"  "t"

bb "1"  "3"  "5"  "7"  "6" 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T07:10:54.633

有时参数的顺序需要与您最初认为的相反：

```
> a = c('q','w','e','r','t'); b[, match(a,b[1,])]
#-------
   [,1] [,2] [,3] [,4] [,5]
bi "q"  "w"  "e"  "r"  "t" 
bb "1"  "3"  "5"  "7"  "6" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T06:06:54.120

`dput`当您发布问题时，按照 mnel 的建议使用非常有帮助。

您的问题实际上是关于索引的。首先，我将展示我将如何做到这一点，然后将其分解：

**您的数据重新创建（请从现在开始使用 1dput`）：**

```
B <- read.table(text="q 1 
y 2
w 3
e 4
u 5
t 6
r 7", stringsAsFactors = TRUE)

A <- c('q','w','e','r','t') 
```

**我会怎么做：**

```
data.frame(A=A, B=B[B[, 1] %in% A, 2]) 
```

**分解：** 注意我将上面的列设置为一个因素？这应该保留您的订单。首先，`%in%`运算符将 B 的第 1 列中的元素与 A 匹配，并且作为一个因素，该顺序得到遵守：

```
B[, 1] %in% A
# >     B[, 1] %in% A
# [1]  TRUE FALSE  TRUE  TRUE FALSE  TRUE  TRUE 
```

然后我在 B 的新索引中使用这个逻辑向量并只选择第 2 列

```
B[B[, 1] %in% A, 2]
# [1] 1 3 4 6 7 
```

# javascript - 将 javascripts/css 添加到本地 html 文件并执行它们的自动化方法

> ID：13189958
> 
> 赞同：0
> 
> 时间：2012-11-02T05:43:00.037
> 
> 标签：javascript, html-parsing, watir, automated-tests

我有一组需要在本地修改的 html 文件。所以我找到了一种简单的方法：编写 javascript/css，将它们附加到现有的 html 中，在 Web 浏览器中运行它们，然后将结果保存回 html 文件。问题是我有大量的 html 文件要处理。所以我需要一个自动化。

我很想知道应该如何处理这项任务。我发现有一个像 Watir 这样的自动化测试工具，但仍然想知道这是否是解决问题的正确选择。

具体来说，我使用 jQuery 轻松地动态解析和修改 html 页面。这就是我不想以其他方式执行此操作的原因，例如，Java 缺乏对 html 解析的良好库的支持。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T15:12:10.053

[像Phantom JS](http://phantomjs.org/)这样的“无头浏览器”可能会对您有所帮助。

# javascript - Html页面滚动问题

> ID：13189962
> 
> 赞同：0
> 
> 时间：2012-11-02T05:43:32.413
> 
> 标签：javascript, jquery, html, css

我正在做一个项目，我必须在其中显示某些数据行。我为此目的使用表格。

这是一个[演示表](http://nitinkabra.com/table)。

现在的问题是，每当我更改行的选择或滚动当前行时，它就会向上或向下隐藏。如何修复滚动以显示当前行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T06:08:52.713

当您单击滚动条时，焦点从所选行丢失，因此调用模糊函数将行的颜色更改回白色。

而不是使用模糊功能，在焦点功能尝试这个代码......

```
 $("tr").css("color", "black");
        $("tr").css("background-color", "white");

        $("'#"+id+"'").css("color", "white");
        $("'#"+id+"'").css("background-color", "black"); 
```

首先将所有 tr 的背景颜色重置为白色，然后将所选 tr 的背景颜色设置为黑色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:11:54.417

好吧，我找到了解决方案，修复了 div 的高度并删除了滚动条。即溢出：无

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T05:49:35.960

这是因为您正在更改焦点所在行的背景颜色，并且当它不在焦点上时，它会返回到 .data-row 类。这就是为什么每当您单击滚动条时，它都会变回来。

相反，只要一行处于焦点位置，只需替换/添加一个 css 类，这会将颜色设置为黑色，并将先前关注的焦点重置为白色。

# iphone - 从 sqlite 数据库存储和获取粗体/斜体字体

> ID：13189964
> 
> 赞同：0
> 
> 时间：2012-11-02T05:43:46.960
> 
> 标签：iphone, sql, ios, database, sqlite

我尝试通过制作 Excel 文件并在 sqlite 中导入为 csv 文件。但它以普通字体而不是粗体或斜体字体显示。

在我的应用程序中，我使用 sqlite 数据库并从中获取数据。我想以斜体字体显示一些文本，我该怎么做？

**Sqlite 是否支持斜体？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T06:55:37.853

你应该用规则存储数据，因为如果 html 我们存储它，`<b>topic/b><i>this is topic</i>`我的意思是在保存之前添加适当的标记。我不分享`ios`或`xcode`如何分享，但您应该在保存文本之前向文本添加一些额外的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T23:08:37.147

当您阅读**粗体**文本时，您正在解释“强烈”的含义。可以通过多种不同的方式强调这种强烈的含义（例如，全部大写：BOLD）。您的文本不应包含有关信息如何*呈现*（样式）的信息，但**应**包含有关含义（结构）的信息。将这两个分开可以让您更灵活地更改文本的呈现方式，例如，如果您想更改网站模板或应用程序设计。您可以随心所欲地选择将强文本显示为粗体、全部大写、全部大写和下划线等。

我推荐 HTML 的一些子集，因为它本质上是结构化的并且被广泛使用。在 HTML 中，存在粗体标签（`<b>`; 但是，它是一种风格，因此`<strong>`建议使用该标签来编码强烈的含义）。

数据库不支持编码；但是，您可以在将文本粘贴到数据库之前自己对文本进行编码。以下是 HTML 编码字符串的示例：

```
<p><strong>An HTML-encoded string</strong> inside a paragraph.</p> 
```

当您提取它时，您可以选择将强文本表示为**粗体**：

> **段落**中的 HTML 编码字符串。****

 **或作为大写：

> 段落内的 HTML 编码字符串。

甚至是斜体大写：

> *段落内的*HTML 编码字符串。**

 *还有许多其他编码结构的方法，包括 Mark Down（我相信这是 StackOverflow 使用的）。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-02T05:53:41.753

你想在哪里显示它？在一些标签，文本文件或其他一些？在要显示的位置更改字体类型

例如，如果你想在 UILable 中显示它

然后更改 UILabel 的字体类型

```
 [<lblname> setFont:[UIFont boldSystemFontOfSize:<whatever_you_want>]]; 
```

**从数据库中获取粗体文本是您的错误逻辑。**

享受编程***

# ruby-on-rails - 在 Ruby on Rails 的页面上显示列表的数量

> ID：13189968
> 
> 赞同：0
> 
> 时间：2012-11-02T05:44:25.907
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在使用一个 RoR 项目，在该项目中我实现了一个运行良好的搜索页面，我想要实现的是[列表的数量](http://screencast.com/t/Rp7Ytncbut)。

实际上，我在这里使用的是硬编码的 HTML，因为我不知道要使用什么代码或 gem。有什么建议可以实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T05:47:35.607

您需要通过 GEM kaminari 使用分页（替换 will_paginate）。看看[这个 Railcast](http://railscasts.com/episodes/254-pagination-with-kaminari)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T05:51:49.403

您也可以尝试一个名为“will_paginate”的 gem。 [这是它在 Github 上的主页](https://github.com/mislav/will_paginate)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T06:11:09.140

下面的代码片段可能会对您有所帮助：

```
<div class="digg_pagination">
    <div clas="page_info">
      <%= page_entries_info @posts %>
    </div>
    <%= will_paginate @posts, :container => false %>
  </div> 
```

有关更多详细信息，请参阅[此链接](http://mislav.uniqpath.com/will_paginate/)。

# android - 永久访问保管箱帐户的应用程序？

> ID：13189970
> 
> 赞同：2
> 
> 时间：2012-11-02T05:44:32.880
> 
> 标签：android, dropbox-api

我有一个链接到保管箱帐户的应用程序。我可以登录一次并保存它。但是每次它都会询问我是否要允许访问该应用程序。有没有办法保存此偏好并永久提供对应用程序的访问？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T09:20:32.050

再次阅读[https://www.dropbox.com/developers/start/authentication#android](https://www.dropbox.com/developers/start/authentication#android)尤其是“用户授权后返回您的应用程序”。

成功后 .getSession().finishAuthentication() 有 AccessTokenPair tokens = mDBApi.getSession().getAccessTokenPair() 它将为您提供数据，您应该将其保存在某处以备后用（您可以为此使用 SharedPreferences）。

在应用程序的开始时间你必须检查这个保存的数据是否存在，如果它在那里，你不必再次调用 .startAuthentication() ，而是你应该调用 .setAccessTokenPair(access) 保存的数据作为访问（查看[https://www.dropbox.com/developers/start/files#android](https://www.dropbox.com/developers/start/files#android)的顶部）。

# html - IE垂直对齐

> ID：13189973
> 
> 赞同：1
> 
> 时间：2012-11-02T05:45:02.417
> 
> 标签：html, css, internet-explorer, vertical-alignment

我正在尝试使列中的文本`<th>`与行的顶部对齐。With `vertical-align: top;`It 适用于除 IE 之外的所有浏览器（我最担心 IE9 支持）。

HTML

```
<tr class="three">
<th>
    Header</th>
<td class="divider">
&nbsp;</td>
<td class="first">
    <ul>
        <li><img src="images/icon.jpg" alt="A5 chip" width="81" height="91" /></li>
        <li>Text</li>
    </ul>
</td>
</tr> 
```

CSS

```
img {vertical-align: top;}
.compare-table tr th {
    padding-top: 20px; 
    padding-left: 5px; 
    width: 165px; 
    line-height: 1.5em;
} 
```

我不确定代码的其他哪些元素是相关的。该页面可以在[这里](http://www.proavsolutions.com.au/296/compare-ipad-models.aspx)查看。

如果这个问题不是独立的，或者没有得到很好的解释，我很抱歉。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:57:16.730

忘记`tr`& `td`。为了获得更好的外观，请始终使用`div`. 它适用于所有浏览器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T07:43:49.890

它在 IE9 中运行良好。我的猜测是您的文档类型有点混乱，因为它使 IE 浏览器现在使用 IE7 标准和兼容性视图呈现页面。

尝试将其更改为 html5：

`<!DOCTYPE html>`

或 html4 过渡：

`<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">`

`<meta http-equiv="X-UA-Compatible" content="IE=edge">`或者通过放入页面的头部标签告诉 IE 使用最新的 IE 标准视图呈现页面。

但在此之前尝试在你的 doctype 声明之前去掉两个空行，如果在 doctype 声明之前有什么东西，IE 可能会切换到怪癖模式。我知道如果您在 doctype 之前添加注释会发生这种情况，这可能与前导空格相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T06:05:41.293

我不确定这个问题，因为它可以得到更多解释。但是，就在 IE 中渲染 CSS 的问题而言，我建议考虑一个 JS 库 ---> excanvas。这不仅有助于在 IE 中渲染大部分 CSS，还有助于在 IE 中渲染 CSS3 元素和 HTML5 元素。Revert Back 以防万一需要帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T07:35:44.620

列表项的顺序不正确。将`<li>tekst</li>`上面的`<li><img src="images/icon.jpg" alt="A5 chip" width="81" height="91" /></li>`.

# python - Django表单一旦更新就不会刷新

> ID：13189978
> 
> 赞同：0
> 
> 时间：2012-11-02T05:45:17.980
> 
> 标签：python, django, django-forms

我正在使用 python 以 django 形式工作。保存编辑表单时遇到问题。

如果我使用 charfield 和 textfield 更改保存表单，则它的工作正常（使用更新的内容刷新）。但是，如果我通过更改图像字段和字符字段来保存表单，它会更新但不刷新页面。

我希望在更新或保存详细信息后刷新页面。提前致谢。

我的观点.PY：

```
def profile_page(request,type = None):
    profile_list = get_object_or_404(UserProfile, visit_id = request.user.username, profile_type = type)
    image = UserProfile.objects.get(visit_id = request.user.username, profile_type = type).image
    if request.method == "POST":
        form = UserProfileForm(request.POST, request.FILES)
        if form.is_valid():
            new_image = form.cleaned_data['image']
            if new_image == None:
                current_image=form.fields['image'].initial = profile_list.image
            else:
                person = UserenaSignup.objects.get(visitid = request.user.username).id
                UserImage.objects.filter(username = person, profile_type = type).delete()
                current_image = UserImage.objects.create(username_id = person, profile_type = type, image = form.cleaned_data['image']).image
            UserProfile.objects.filter(visit_id = request.user.username, profile_type = type).update(username            = form.cleaned_data['username'],
                                                                                                  designation            = form.cleaned_data['designation'],
                                                                                                  image                  = current_image,
                                                                                 )
            return render_to_response('profile_page.html',locals(),context_instance = RequestContext(request))
        else:
            form = UserProfileForm(instance = profile_list)
            return render_to_response('profile_page.html', locals(), context_instance=RequestContext(request))
    else:
        form = UserProfileForm(instance = profile_list)
    return render_to_response('profile_page.html',locals(),context_instance = RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T08:26:23.580

您可以尝试`.image`从这一行的末尾删除：

```
current_image = UserImage.objects.create(username_id = person, profile_type = type, image = form.cleaned_data['image']).image 
```

# api - 循环遍历数据表以在 web api 中创建 json

> ID：13189979
> 
> 赞同：0
> 
> 时间：2012-11-02T05:45:25.263
> 
> 标签：api, web

我正在尝试从返回数据集的 Web 服务创建 JSON 响应。如何遍历数据表并将这些值放入客户端模型中？当我尝试遍历数据表时，我收到无效的启动器错误。这是我的代码：

```
public class ClientsController : ApiController
{
    public IEnumerable<ClientResponseModels> GetAllClients()
    {  
        //retrieves list of all the clients
        var dsClients = ClientRepository.GetAllClients();

        //create a json response object
        ClientResponseModels[] response = new ClientResponseModels[]
        {
            new ClientResponseModels
            {
                UserId= userDetails.UserID,
                UserName=userDetails.LoginName,
                LocationName=centreLocation.ToString(),
                Clients = new List<ClientModels>
                {  
                    foreach(DataRow row in dsClients.Tables[0].rows)
                    {
                        new ClientModels //these values need to come from datatable
                        {
                            Id =Convert.ToInt32(row["client_id"]), 
                            ClientName=Convert.ToString(row["client_nme"])", 
                            DOB= Convert.ToDateTime(row["birth_date]")
                        }
                    }    
                } 
            }
        };
        return response;
    }
    else {
        throw new HttpResponseException(HttpStatusCode.Forbidden);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-11-29T23:30:26.917

我认为该函数是您的代码循环遍历可查询的原因。您可以在循环之前先检索数据，例如 GetAllClients().ToList()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-03T05:45:57.923

我使用实体框架更改数据上下文配置。

```
 MyDataContext db = new MyDataContext();
        db.Configuration.LazyLoadingEnabled = false;
        db.Configuration.ProxyCreationEnabled = false; 
```

# c# - 带有自定义标头的异步 WCF 客户端调用：此 OperationContextScope 被乱序处理

> ID：13189980
> 
> 赞同：31
> 
> 时间：2012-11-02T05:45:36.363
> 
> 标签：c#, wcf, asynchronous, wcf-client

我正在从 WinRT 应用程序调用 WCF 服务。该服务要求为身份验证设置一些标头。问题是，如果我**同时**对服务进行**多次调用**，则会出现以下异常：

 ****此 OperationContextScope 正在无序处置。**

当前代码如下所示：

```
public async Task<Result> CallServerAsync()
{
    var address = new EndpointAddress(url);
    var client = new AdminServiceClient(endpointConfig, address);

    using (new OperationContextScope(client.InnerChannel))
    {
        OperationContext.Current.OutgoingMessageProperties[HttpRequestMessageProperty.Name] = GetHeader();

        var request = new MyRequest(...); 
        {
            context = context,
        };

        var result = await client.GetDataFromServerAsync(request);
    }
} 
```

[我从文档中](http://msdn.microsoft.com/en-us/library/system.servicemodel.operationcontextscope.aspx)找到以下评论：

> 不要在 OperationContextScope 块中使用异步“等待”模式。当继续发生时，它可能在不同的线程上运行，并且 OperationContextScope 是特定于线程的。如果您需要为异步调用调用“等待”，请在 OperationContextScope 块之外使用它。

所以看来我显然错误地调用了该服务。但正确的方法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2020-03-30T07:19:51.593

根据[微软文档](https://docs.microsoft.com/en-us/dotnet/api/system.servicemodel.operationcontextscope?redirectedfrom=MSDN&view=netframework-4.8)：

> 不要在 OperationContextScope 块中使用异步“等待”模式。当继续发生时，它可能在不同的线程上运行，并且 OperationContextScope 是特定于线程的。如果您需要为异步调用调用“等待”，请在 OperationContextScope 块之外使用它。

所以最简单的正确解决方案是：

```
Task<ResponseType> task;
using (new OperationContextScope(client.InnerChannel))
{
    OperationContext.Current.OutgoingMessageProperties[HttpRequestMessageProperty.Name] = GetHeader();

    var request = new MyRequest(...); 
    {
        context = context,
    };

    task = client.GetDataFromServerAsync(request);
}

var result = await task; 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2018-05-25T11:02:08.500

这是一个已知的“问题”，对于任何遇到此问题的人，您都可以简单地同步运行您的呼叫。使用 GetAwaiter().GetResult(); 相反，因为它根本不安排任务，它只是阻塞调用线程，直到任务完成。

```
public Result CallServer()
{
    var address = new EndpointAddress(url);
    var client = new AdminServiceClient(endpointConfig, address);

    using (new OperationContextScope(client.InnerChannel))
    {
        OperationContext.Current.OutgoingMessageProperties[HttpRequestMessageProperty.Name] = GetHeader();

        var request = new MyRequest(...); 
        {
            context = context,
        };

        return client.GetDataFromServerAsync(request).GetAwaiter().GetResult();
    }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-02T07:43:45.603

使用以下代码，一切似乎都很好：

```
public async void TestMethod()
{
    var result = await CallServerAsync();
}

public Task<Result> CallServerAsync()
{
    var address = new EndpointAddress(url);
    var client = new AdminServiceClient(endpointConfig, address);

    using (new OperationContextScope(client.InnerChannel))
    {
        OperationContext.Current.OutgoingMessageProperties[HttpRequestMessageProperty.Name] = GetHeader();

        var request = new MyRequest(...); 
        {
            context = context,
        };

        return client.GetDataFromServerAsync(request);
    }
} 
```**

# mongodb - $push 不在 Mongodb 中插入数组

> ID：13189982
> 
> 赞同：1
> 
> 时间：2012-11-02T05:46:01.387
> 
> 标签：mongodb, push

我在 mongo 中有这个文件：

```
array (
  '_id' => new MongoId("509356edf275130917000000"),
  0 => 
  array (
    'id1' => '1000',
  ),
  1 => 
  array (
    'book' => 
    array (
      'id2' => '0',
      'name' => 'Example',
    ),
  ),
) 
```

我想在“book”数组中添加一本书：

```
$coll->update(array(array("id1"=>'1000'),
     '$push'=>array('book'=>array(
        "id2"=>"1",
        "name" =>'War and peace')))); 
```

但没有任何反应，有人知道该怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T09:17:25.657

`book`是单个数组。你不能更新。

根据给定条件更新记录

```
$collection->update($criteria, $newdata); 
```

例子：

```
[
  '_id'     => new MongoId("509356edf275130917000000"),
  'ids'     => [1, 2, 3],
  'books'   => ['Book1', 'Book2']
] 
```

* * *

```
$data = ['books' => 'Book3'];

$collection->update(

    // Criteria 
    ["_id"   => new MongoId("509356edf275130917000000")],

    // New Object 
    ['$push' => $data]
); 
```

# objective-c - UIBarButtonItem 中的 UIView 中的 UISearchBar 无法按预期工作

> ID：13189983
> 
> 赞同：1
> 
> 时间：2012-11-02T05:46:08.883
> 
> 标签：objective-c, uiview, uisearchbar, uibarbuttonitem

我试图将 UIsearchBar 添加到我的导航控制器。我也希望使用 UISearchBar 的取消按钮。

```
UISearchBar* searchBar = [[UISearchBar alloc] init];
searchBar.frame = CGRectMake(0, 0, 300, searchBar.frame.size.height);
searchBar.translucent = NO;
searchBar.barStyle = UIBarStyleBlack;
searchBar.delegate = self;
UIView* myView = [[UIView alloc] initWithFrame:searchBar.frame];
[myView addSubview:searchBar];
UIBarButtonItem* sbItem = [[UIBarButtonItem alloc] initWithCustomView:myView];    
[self.navigationItem setRightBarButtonItems:[NSArray arrayWithObjects:chart,sbItem,nil]]; 
```

searchBar 处于非活动状态的麻烦。它出现在导航控制器中。但是当我点击它时，它不会以任何方式响应。如果我显示取消按钮，它会出现但也无法点击。

如果我不将 UIsearchBar 包装在 UIView 上，它可以正常工作，除非它不想向我显示取消按钮。

**UPD** 如果我打电话

```
[searchBar becomeFirstResponder] 
```

它进入编辑模式并向我显示一个取消按钮和键盘，但看起来像其中 searchBar 包裹的视图更改了它的框架参数并从其原始外观向下 10 像素。并将其背景从 trnsparent 更改为 blackopaque

看起来像是某种巫毒教……这么简单的动作要花这么多时间……

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T12:06:13.383

我认为您在搜索栏框架上弄错了，您将搜索栏高度作为 searchBar.frame.size.height，但当时没有高度，只需将其更改为：

> ```
> UISearchBar* searchBar = [[UISearchBar alloc] init];
> searchBar.frame = CGRectMake(0, 0, 300, 40);
> searchBar.translucent = NO;
> searchBar.barStyle = UIBarStyleBlack;
> searchBar.delegate = self;
> UIView* myView = [[UIView alloc] initWithFrame:searchBar.frame];
> [myView addSubview:searchBar];
> UIBarButtonItem* sbItem = [[UIBarButtonItem alloc] initWithCustomView:myView];    
> [self.navigationItem setRightBarButtonItems:[NSArray  arrayWithObjects:chart,sbItem,nil]]; 
> ```
> 
> 对不起，我不知道这里的图表是什么，希望它是你要找的。

# c# - 模型活页夹不填充嵌套列表中的项目

> ID：13189985
> 
> 赞同：4
> 
> 时间：2012-11-02T05:46:16.067
> 
> 标签：c#, razor, asp.net-mvc-4, model-binding

我有以下模型：

```
public class ConfigurationPolicyModel
{
    public ConfigurationPolicyModel()
    {
        Properties = new List<Property>();
    }

    public List<Property> Properties { get; set; }

    public class Property
    {
        public Property()
        {
            Value = new List<ValueItem>();
        }

        public List<ValueItem> Value { get; set; }

        public class ValueItem
        {
            public string Data { get; set; }
        }
    }
} 
```

简化后的控制器如下：

```
[HttpPost]
public ActionResult EditPolicy(ConfigurationPolicyModel model)
{
    foreach (var prop in model.Properties)
    {
        var n = prop.Value.Count; // The problem is here: prop.Value is empty
    }
    ...
} 
```

问题上下文如下：

*   EditPolicy 视图足够复杂，其中 Knockout.JS 用于动态添加/删除值项，输入元素如下所示：

```
<input class="text-box single-line" type="text" data-bind="value: Data" name="Properties[@i].ValueItem" /> 
```

但是在提交表单时，JavaScript 代码会更新名称属性以具有正确的名称，例如`Properties[0].Value[0].Data`：

```
for (var i = 0; i < viewModel.properties().length; ++i)
{
    var valueItems = $('input[name="Properties[' + i + '].ValueItem"]');

    for (var j = 0; j < valueItems.length; ++j)
    {
        $(valueItems[j]).attr("name", "Properties[" + i + "].Value[" + j + "].Data");
    }
} 
```

Fiddler 中 HTTP 请求的表单数据如下所示（在 WebForms 模式下）：

![属性值项](../Images/5060c8ffb1bf589c849d0c8ce086f094.png)

HTTP 请求的原始负载如下：

```
Id=00000000-0000-0000-0000-000000000000&Level=Platform&Name=SmsPolicy&InheritanceLevels[0].Level=SafeCenter&InheritanceLevels[0].InheritanceType=Force&InheritanceLevels[1].Level=TeamSafe&InheritanceLevels[1].InheritanceType=Force&Properties[0].Name=Providers&Properties[0].ValueIsSequence=True&Properties[0].Value[0].Data=O2&Properties[0].Value[1].Data=Telecom&Properties[0].Value[2].Data=&Properties[0].Value[3].Data=&Properties[0].Minimum=&Properties[0].Maximum=&Targets[0].Level=Platform&Targets[0].Name=Platform&Targets[0].Selected=true&Targets[0].Selected=false&Targets[1].Level=SafeCenter&Targets[1].Name=SafeCenters&Targets[1].Selected=true&Targets[1].Selected=false&Targets[1].Items[0].Level=SafeCenter&Targets[1].Items[0].OwnerId=7292f9aa-b168-43ab-83a7-db193599d02f&Targets[1].Items[0].Name=Google+Inc.&Targets[1].Items[0].Selected=true&Targets[1].Items[0].Selected=false&Targets[1].Items[1].Level=SafeCenter&Targets[1].Items[1].OwnerId=6c481d66-0ece-4269-8256-c02d3b8c5109&Targets[1].Items[1].Name=SC11&Targets[1].Items[1].Selected=true&Targets[1].Items[1].Selected=false&Targets[1].Items[2].Level=SafeCenter&Targets[1].Items[2].OwnerId=9afd1968-6742-435d-919e-36068ff4b235&Targets[1].Items[2].Name=SC2&Targets[1].Items[2].Selected=true&Targets[1].Items[2].Selected=false&Targets[1].Items[3].Level=SafeCenter&Targets[1].Items[3].OwnerId=995813e1-91d4-4fad-bf10-fbafa0354cbb&Targets[1].Items[3].Name=SC4&Targets[1].Items[3].Selected=true&Targets[1].Items[3].Selected=false&Targets[1].Items[4].Level=SafeCenter&Targets[1].Items[4].OwnerId=acbd68a8-cb9b-4e50-8eeb-59b374fedae0&Targets[1].Items[4].Name=SC5&Targets[1].Items[4].Selected=true&Targets[1].Items[4].Selected=false&Targets[2].Level=TeamSafe&Targets[2].Name=TeamSafes&Targets[2].Selected=true&Targets[2].Selected=false 
```

*   当表单发布到服务器时，表单数据实际上包含这些字段，Fiddler 确认了这一点。此外，我分配（通过`ModelBinderAttribute`）自定义模型活页夹来观察字段实际上确实到达了模型活页夹， - 是的，它们确实如此。
*   但是当默认绑定器创建模型的实例时 -`Property`实例的列表中没有项目`Value`。
*   还有最奇怪的一点：这个问题时有发生，而且似乎取决于价值项的数量。如果一个属性有一个值项，则`Value`列表可能会被填充，但如果有六个值项，则不会向列表中插入任何项`Value`。

有人可以建议如何解决这个问题吗？非常感谢您提前。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T11:09:47.947

以下工作正常：

```
@using (Html.BeginForm())
{
    <input type="text" name="Properties[0].Value[0].Data" value="O2" />
    <input type="text" name="Properties[0].Value[1].Data" value="Telecom" />
    <input type="text" name="Properties[0].Value[2].Data" value="" />
    <input type="text" name="Properties[0].Value[3].Data" value="" />

    <button type="submit">OK</button>
} 
```

并正确绑定到以下操作：

```
[HttpPost]
public ActionResult EditPolicy(ConfigurationPolicyModel model)
{
    return View();
} 
```

以下有效负载通过网络发送：

```
Properties[0].Value[0].Data = O2
Properties[0].Value[1].Data = Telecom
Properties[0].Value[2].Data =
Properties[0].Value[3].Data = 
```

因此，如果这对您不起作用，则可能有其他一些原因，例如自定义模型绑定器会干扰默认约定，或者您的请求负载看起来不像此处所示。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-02T08:54:09.920

确保编号是连续的。跳过的每个 Id 都会导致模型中不填充所有更大的 Id。

具体来说，我在一个 MVC 网站上做了一个类似的测试，并注意到：

*   当我在客户端上有 ID 1、2、3、4、5、6、7 时，所有元素都正确填充到模型中
*   对于 ID 1、2、3、5、6、7，只有元素 1、2 和 3 被填充（5、6 和 7 由于缺少 4 而丢失）。

# mysql - MySQL如何按月份排序

> ID：13189986
> 
> 赞同：3
> 
> 时间：2012-11-02T05:46:18.307
> 
> 标签：mysql, sql-order-by

[这是演示](http://sqlfiddle.com/#!2/8b9a4/10/0)

订单是 11 月和 10 月。我怎样才能将 ORDER BY 添加到此，以便按月、1 月、2 月、3 月...等顺序排列。

提前致谢。

```
CREATE TABLE `hw_homework` (
  `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
  `studentid` int(10) NOT NULL,
  `subjectid` int(10) NOT NULL,
  `assignment_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  `teacherid` int(10) NOT NULL,
  `date` date NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=55 ;

--
-- Dumping data for table `hw_homework`
--

INSERT INTO `hw_homework` (`id`, `studentid`, `subjectid`, `assignment_name`, `teacherid`, `date`) VALUES
(52, 56, 13, '1A', 20, '2012-10-28'),
(53, 56, 6, '12', 18, '2012-10-28'),
(54, 56, 4, 'page42', 59, '2012-11-02');

SELECT  studentID, 
        DATE_FORMAT(`date`,'%M') `month`,
        COUNT(studentid) totalMissed
FROM hw_homework
WHERE studentid = 56
GROUP BY studentid, DATE_FORMAT(`date`, '%M') 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-02T06:32:47.740

正如Chuidian建议的那样，我添加了以下内容以获得我想要的。感谢大家。

```
ORDER BY Month(date) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-02T06:57:11.037

在您的情况下，它是根据 aplhabets 订购的。以下将给出正确的结果。

```
SELECT  studentID, 
    DATE_FORMAT(`date`,'%M') `month`,
    COUNT(studentid) totalMissed
FROM hw_homework
WHERE studentid = 56
GROUP BY studentid, DATE_FORMAT(`date`, '%M')
ORDER BY DATE_FORMAT(`date`,'%m') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-02T05:50:39.373

在您的查询中使用如下

```
GROUP BY MONTH(date) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-01T23:48:40.147

偶然发现这篇文章试图找到按月份名称排序的解决方案。可能不是很优雅的解决方案，但您可以使用[FIELD](https://dev.mysql.com/doc/refman/5.7/en/string-functions.html#function_field)字符串函数来获取该结果集。

```
SELECT
studentID,
DATE_FORMAT(`date`, '%M') `month`,
COUNT(studentid) totalMissed FROM
hw_homework WHERE
studentid = 56 GROUP BY
studentid, 
DATE_FORMAT(`date`, '%M') ORDER BY
FIELD(
    DATE_FORMAT(`date`, '%M'),
    'January',
    'February',
    'March',
    'April',
    'May',
    'June',
    'July',
    'August',
    'September',
    'October',
    'November',
    'December'
); 
```

试试看。`date`出于可读性目的，您也可以将 DATE_FORMAT 替换为更简单的函数 MONTHNAME( )。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-02T05:49:44.430

```
 SELECT  studentID, 
    DATE_FORMAT(`date`,'%M') as `month`,
    COUNT(studentid) totalMissed
FROM hw_homework
WHERE studentid = 56
order by Month(month)
GROUP BY studentid, DATE_FORMAT(`date`, '%M') 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-02T05:53:24.843

```
SELECT  studentID, 
        DATE_FORMAT(`date`,'%M') `month`,
        COUNT(studentid) totalMissed
FROM hw_homework
WHERE studentid = 56
GROUP BY MONTH(DATE) ASC 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-11-02T05:51:08.670

mysql> select * from hw_homework order by date asc; //递增顺序

或者

mysql> select * from hw_homework order by date desc;

# iphone - 触摸移动，计算距离

> ID：13189987
> 
> 赞同：1
> 
> 时间：2012-11-02T05:46:26.047
> 
> 标签：iphone, objective-c, ios

拖动手指时，我将如何进行触摸移动查找距离。假设我的手指从 A 点开始，然后到达 10 像素的 B 点，然后返回到总共 20 像素的 A 点。我将如何计算？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T06:34:29.627

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
 UITouch *touch=[touches anyObject];
point1 = [touch locationInView:self];//(point2 is type of CGPoint)
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
 UITouch *touch=[touches anyObject];
point2 = [touch locationInView:self];//(point2 is type of CGPoint)
} 
```

在 CGPOint x 或 y 轴的差异之后，你可以得到差异

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-11T18:59:17.967

**Swift 中的整体解决方案：**

```
var startLocation: CGPoint?
var totalDistance: CGFloat = 0

override func touchesBegan(_ touches: Set<UITouch>, with event: UIEvent) {
    super.touchesBegan(touches, with: event)
    if let touch = touches.first {
        totalDistance = 0
        startLocation = touch.location(in: view)
    }
}

override func touchesMoved(_ touches: Set<UITouch>, with event: UIEvent) {
    super.touchesMoved(touches, with: event)
    if let startLocation = startLocation, let touch = touches.first {
        let currentLocation = touch.location(in: view)
        let dX = currentLocation.x - startLocation.x
        let dY = currentLocation.y - startLocation.y
        self.totalDistance += sqrt(pow(dX, 2) + pow(dY, 2))
        self.startLocation = currentLocation
    }
}

override func touchesEnded(_ touches: Set<UITouch>, with event: UIEvent) {
    super.touchesEnded(touches, with: event)
    print("Total distance: \(totalDistance)")
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-02T05:53:02.420

您可以跟踪用户移动的点。记住点`touchesBegin:`，累积距离，`touchesMoved:`得到整个距离`touchesEnded:`。

```
– touchesBegan:withEvent:
– touchesMoved:withEvent:
- touchesEnded:withEvent: 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-02T05:54:29.363

为您的需求系统提供主要的 3 种委托方法，用于从设备屏幕获取触摸点，这 3 种方法是..

```
- (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@\"touchesBegan\");// here you can find out A point which user began to touch screen
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@\"touchesMoved\");// here get points of user move finger on screen to start to end point
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event
{
    NSLog(@\"touchesEnded\");// here user end touch or remove finger from Device Screen means  (B)
} 
```

我希望这对你有用...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-02T19:03:32.327

到目前为止，所有答案都没有考虑多点触控。如果您需要记住哪个手指对应于哪个拖动以支持多点触控，这些解决方案会变得更加困难。

如果您只是对增量感兴趣，例如，您正在用两根手指同时滚动两个不同的东西，您可以直接从 中的触摸对象计算增量，`touchesMoved`而无需记住 中的任何状态`touchesBegan`，

```
override func touchesMoved(_ touches: Set<UITouch>, with event: UIEvent?) {
    for t in touches {
        let a = t.location(in: view)
        let b = t.previousLocation(in: view)
        let delta = b.y - a.y
        doSomethingWithDelta()
    }
} 
```

例如，如果您有一系列要上下移动的 SKNode，

```
let nodesForFirstFinger = children.filter { $0.name == "firstGuys" }
let _ = nodesForFistFinger.map { $0.position.y += delta } 
```

# c++ - 数组元素值、元素地址和指针增量

> ID：13189996
> 
> 赞同：1
> 
> 时间：2012-11-02T05:47:23.007
> 
> 标签：c++, arrays, pointers, multidimensional-array, memory-address

这是一个非常基本的概念。但是，我通常会感到困惑。帮我。

情况1：

对于以下代码：

```
int oneDArray[] = {1,2,3};
cout<<&oneDArray<<endl;
cout<<oneDArray<<endl;
cout<<&oneDArray+1<<endl;
cout<<oneDArray+1<<endl; 
```

输出是：

```
0x28fef4
0x28fef4
0x28ff00
0x28fef8 
```

为什么增量值存在差异？

案例二：

```
 int arr[2][3] = {{1,2,3}, {4,5,6}};
  cout<<&arr<<endl;
  cout<<arr<<endl;
  cout<<*arr<<endl;

  cout<<&arr+1<<endl;
  cout<<arr+1<<endl;
  cout<<*arr+1<<endl; 
```

输出是：

```
0x28fee8
0x28fee8
0x28fee8
0x28ff00
0x28fef4
0x28feec 
```

为什么 arr 和 *arr 的输出相同？（它是如何在内部工作的）为什么增量值会有差异？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-02T08:22:14.327

对于您的一维数组：

```
//starting at memory address: 0x28FEF4
int My_Array[3] = {1,2,3};

//memory dumping, each 'int' element takes 4 bytes, 
//high bytes are at higher addresses
0x28FEF4 01 00 00 00
0x28FEF8 02 00 00 00
0x28FEFC 03 00 00 00 
```

这是从 C 语言到英语的翻译：

```
My_Array     = (address) of-the (first-byte) of (My_Array)
My_Array[0]  = (value)   of-the (element-at-index-0)
My_Array[k]  = (value)   of-the (element-at-index-k)

&My_Array    = (address) of-the (first-byte) of (My_Array)
&My_Array[0] = (address) of-the (first-byte) of (element-at-index-0)
&My_Array[k] = (address) of-the (first-byte) of (element-at-index-k)

*My_Array    = (value) pointed-by (My_Array)
*My_Array[0] = (value) pointed-by (My_Array[0])
*My_Array[k] = (value) pointed-by (My_Array[k])

The values of 'My_Array' and '&My_Array' are always identical for array type
but there's a difference when using them with mathematical operators.
My_Array is a pointer to 'int' type, while &My_Array is a pointer 
to 'int[3]' type.  When incremented, the values added in are sizeof(int) 
and sizeof(int[3]) respectively.

The last two notations: *My_Array[0] and *My_Array[k]
are valid in mathematical sense but not valid in C language when using 
with single-dimension array because C langugae doesn't allow using 
'int' value as pointer. 
```

案例1的输出结果说明：

```
(&My_Array) is identical to (My_Array)  = 
0x28FEF4

(My_Array)  is identical to (&My_Array) = 
0x28FEF4

(&My_Array+1) = 0x28FEF4 + sizeof(int[3]) = 0x28FEF4 + 12 = 
0x28FF00

(My_Array+1)  = 0x28FEF4 + sizeof(int)    = 0x28FEF4 + 4  = 
0x28FEF8 
```

将我上面的笔记应用到你的第二个案例中，注意以下几点：

```
(1) Value of element in single dimension array is the base type. Eg:
    int My_Array[3]; //base type is 'int'

(2) Value of element in multiple dimension array is either pointer 
    or base type. Eg:
    int My_Array[2][3][4]; //base type is 'int'

    My_Array is a pointer to 'int' type        
    My_Array[i] is a pointer to 'int' type
    My_Array[i][j] is a pointer to 'int' type
    My_Array[i][j][k] is an 'int' value

    &My_Array is a pointer to 'int[2][3][4]'
    &My_Array[i] is a pointer to 'int[3][4]' 
    &My_Array[i][j] is a pointer to 'int[4]'
    &My_Array[i][j][k] is a pointer to 'int'

(3) Values of 'My_Array' and '&My_Array' are always equal,
    however, when dealing with operators, they work differently.
    Eg.
    int My_Array[2][3][4]; //base type is 'int'

    '&My_Array' here is a pointer to 'int[2][3][4]', but
    'My_Array' is a pointer to base type 'int'.

(4) A pointer is always incremented by the size of the type 
    that it points to. 'int' has size of 4 bytes.
    Eg.
    int My_Array[2];          //type size = (2)*4
    int My_Array[2][3];       //type size = (2*3)*4
    int My_Array[2][3][4];    //type size = (2*3*4)*4
    int My_Array[2][3][4][5]; //type size = (2*3*4*5)*4 
```

# ui-automation - 将 TestComplete 的 UIAObject 与 Microsoft UI 自动化控制模式一起使用

> ID：13189998
> 
> 赞同：1
> 
> 时间：2012-11-02T05:47:32.703
> 
> 标签：ui-automation, testcomplete, uia

在 TestComplete 中，UIAObject“ControlPatterns”属性列出了对象的 Microsoft UIA 控件模式。

一般问题：如何针对 UIAObject 调用这些控制模式？

具体问题：如果您有 UIAObject，如何获得 DataGridCell 的列标题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T05:55:48.540

据我所知，TestComplete 支持 UI 自动化对象的模式。模式的成员可用作 TestComplete 中相应对象的成员。您不需要将对象强制转换为模式或以任何其他特殊方式调用模式。

至于您的具体问题，您可以通过**column**属性获取该列的索引，然后通过该索引找到对应的列。

```
var dataCellObj = dataGridObj.UIAObject("RowsPresenter").UIAObject("Example_Nutrition_2").UIAObject("DataGridCell");
var colIndex = dataCellObj.column;
var column = dataGridObj.UIAObject("ColumnHeadersPresenter").Child(colIndex);
Log.Message(column.NativeUIAObject.Name); 
```