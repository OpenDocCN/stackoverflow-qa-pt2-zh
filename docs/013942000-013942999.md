# StackOverflow 问答 13942000-13942999

# marklogic - MarkLogic 中的注册查询是什么

> ID：13942003
> 
> 赞同：3
> 
> 时间：2012-12-18T21:45:42.440
> 
> 标签：marklogic

MarkLogic 中的注册查询是什么，用例是什么？

[http://docs.marklogic.com/cts:registered-query](http://docs.marklogic.com/cts:registered-query)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T21:53:39.130

MarkLogic 在 Search Developer's Guide 中有一个很好的解释：

> 如果重复使用相同的复杂 cts:query 表达式，并且将它们用作未过滤的 cts:query 构造函数，则可以注册 cts:query 表达式以供以后使用。注册 cts:query 表达式会存储表达式的预评估版本，从而使后续查询更快地使用相同的表达式。未过滤的构造函数直接从索引返回结果并返回所有候选片段进行搜索，但不执行后过滤来验证每个片段是否完全符合搜索条件。

这是该指南的 HTML 版本：http: [//docs.marklogic.com/guide/search-dev/cts_query](http://docs.marklogic.com/guide/search-dev/cts_query)。它非常彻底，并包含示例。

# ios - 将 NSMutableArray 中的数字与 indexPath.row 进行比较

> ID：13942004
> 
> 赞同：1
> 
> 时间：2012-12-18T21:45:43.517
> 
> 标签：ios, xcode, uitableview, nsmutablearray

我有一个 NSMutableArray，它在编辑 TableView 时经常被编辑。我想要做的是运行检查，看看 TableView 中的行是否与 NSMutableArray 中的任何数字匹配，如果匹配，则执行操作。因此，在 TableView 代码中，我有：

```
if([thearray containsObject:indexPath.row] {
   //perform action here
} 
```

但是我不断收到错误消息：

```
Incompatible integer to pointer conversion sending 'NSInteger' (aka 'int') to parameter of type 'id'; 
```

我做错了什么，我该怎么做？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T21:53:36.290

使用此代码...

```
if([thearray containsObject:[NSNumber numberWithInt:indexPath.row]]) {
   //perform action here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T21:54:34.670

我认为您可以在这里做的最好的事情是检查数组的当前计数是否大于 indexPath.row （因为理论上索引中不会有间隙）。您当前调用的方法接受一个对象并告诉您它是否是数组的成员。还有`objectAtIndex:`, 但如果您传递的整数超出范围，则会引发异常。

```
if(thearray.count > indexPath.row) {
  // array has at least indexPath.row + 1 items, so you can get objectAtIndex:indexPath.row
} 
```

# bash - 如何检测等待来自 bash 脚本的用户输入？

> ID：13942005
> 
> 赞同：2
> 
> 时间：2012-12-18T21:46:02.970
> 
> 标签：bash, node.js

我的 bash 脚本如下所示：

```
read -p "Do you wish to continue?" yn
# further actions ... 
```

我只想使用 nodejs / child_process 与这个脚本进行交互。如何检测到它正在等待用户输入？

```
var spawn = require('child_process').spawn;
var proc = spawn('./script.sh');
proc.stdout.on("data", function(data) {
  console.log("Data from bash");
}
proc.stdin.on("data", function(data) {
  console.log("Data from bash"); // doesn't work :/
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:23:16.397

您是否尝试使用“期望” [http://en.wikipedia.org/wiki/Expect](http://en.wikipedia.org/wiki/Expect)？它是一个“预期”一些文本（它使用正则表达式）并且 bash 脚本可以自动回答的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T11:06:58.590

从[bash 手册页](http://linux.die.net/man/1/bash)：

> ```
> read -p prompt 
> ```
> 
> 在尝试读取任何输入之前，在**标准错误**上显示提示，不带尾随换行符。**只有当输入来自终端时才会**显示提示。

而且我认为 node.js 中没有任何方法可以检测到脚本正在*等待*输入。问题实际上是 bash 检测到非终端并禁用输出到标准错误。即使这样，您也必须从 stderr 而不是 stdin 读取来检测任何*等待状态*。

最后，正如 Antoine 指出的那样，您可能必须使用诸如[empty](http://empty.sourceforge.net/)或[Expect](http://en.wikipedia.org/wiki/Expect)之类的工具来包装您的 shell 脚本并欺骗 Bash 使其认为它位于终端中。

顺便说一句：`proc.stdin.write("yes\n")`工作正常。因此，您可以使用脚本，但不会收到任何提示，`proc.stderr`并且不知道脚本*何时*实际读取输入。`proc.stdin.write`即使脚本尚未在`read -p`语句中，您也可以立即输入。输入被缓冲，直到脚本吃掉它。

# java - 如何全局获取Android中的鼠标位置

> ID：13942009
> 
> 赞同：1
> 
> 时间：2012-12-18T21:46:08.977
> 
> 标签：java, android, c, linux

在 Android 平台上，我必须找出全局鼠标位置。这意味着不仅在当前运行的应用程序中。但在任何应用程序或主屏幕中。我可以完全访问 Android 平台。所以这也可能是在底层 Linux 系统上使用 C 语言的一些解决方案。

我知道在 Linux 上使用 xdotool 很容易，但不幸的是这依赖于 Xlib 等等。Android 上没有 X 服务器。至少不是我的。

是否有一些我可以使用的命令或在 Linux 系统上可以读取鼠标位置的东西？

谢谢，爱德华

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T02:47:45.210

我找不到获得鼠标位置的方法。所以我实现了一个解决方法来用绝对值控制鼠标。我在开始时将鼠标重置为 0/0，然后缓冲实际位置。

# sql - 从 SQL 中的父元组中复制一个值

> ID：13942010
> 
> 赞同：1
> 
> 时间：2012-12-18T21:46:09.637
> 
> 标签：sql, sql-server, sql-server-2008

我正在寻找一种优雅的方式将值从父元组复制到子元组。我需要复制它，因为它可以独立于父值更改，但这是开始的基线。

这是该表的简化版本：

```
CREATE TABLE Parent (
    Id INT NOT NULL PRIMARY KEY,
    ParentValue VARCHAR(128)
);

CREATE TABLE Child (
    Id INT NOT NULL PRIMARY KEY,
    ParentId INT NOT NULL FOREIGN KEY REFERENCES Parent(Id),
    ChildValue VARCHAR(128)
); 
```

现在我想做的是：

```
 UPDATE Child
   SET ChildValue = Parent.ParentValue
   WHERE TRUE 
```

这有意义吗？我有一种循环方式，但对于我计划运行它的大量记录来说，它似乎效率不高。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T21:49:11.897

您可以使用专有`UPDATE FROM`语法

```
UPDATE Child
SET ChildValue = ParentValue
FROM Child
JOIN Parent ON Parent.Id = Child.ParentId; 
```

或 2008 年的标准 SQL`MERGE`语法

```
MERGE INTO Child
   USING Parent
      ON Parent.Id = Child.ParentId
WHEN MATCHED THEN
   UPDATE 
      SET ChildValue = ParentValue; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T21:53:38.037

编写查询的一种可移植方式是在`set`子句中使用相关子查询：

```
update child
    set childValue = (select ParentValue from Parent where Parent.ParentId = Child.ParentId) 
```

不过，我不知道你是否认为这很优雅。

# c# - 带有 Directx 11 的 WPF

> ID：13942011
> 
> 赞同：3
> 
> 时间：2012-12-18T21:46:13.547
> 
> 标签：c#, c++, wpf, directx, wrapper

现在我有一个用 c++/cli 编写的包装器，用于 c#(WPF)。这个包装器将原生 c++ 图形引擎包装成 c# 可理解的代码。但这不是问题（等等...）。因此，在 WPF 中，我有一个 Windows 控件（是的，这是可能的），我从（HWND）接收句柄。所有这一切都很棒，并且帧正在渲染，唯一的问题是性能。渲染触发如下：

```
 ...
        System.Windows.Media.CompositionTarget.Rendering += new EventHandler(Render);
    }

    private void Render(Object sender, EventArgs e)
    {
        EngineWrapper.RenderFrame();
    } 
```

所以 fps 非常低，这意味着对 Render() 的调用率非常低（因为我的应用程序最初是在 MFC 中，帧率要高得多！）。所以我问你，有什么办法可以提高这个吗？一种新的方式，另一个线程？（必须以某种方式......）

编辑：我通过以下方式创建 Windows 控件：

```
 System.Windows.Forms.Integration.WindowsFormsHost host =
            new System.Windows.Forms.Integration.WindowsFormsHost();

        System.Windows.Forms.Panel panel = new System.Windows.Forms.Panel();

        host.Child = panel;

        this.RenderCamera_WorkareaGrid.Children.Add(host); 
```

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:35:51.490

你需要访问表面，渲染你的场景，并将它的句柄发送到 WPF 系统的 D3DImage。看看 codeplex 它是如何制作的。

# html - firefox图片加载问题

> ID：13942013
> 
> 赞同：0
> 
> 时间：2012-12-18T21:46:19.773
> 
> 标签：html, firefox, css, xhtml

我从我的桌面加载了一个图像，它在 chrome 中正确加载，但它没有在 Firefox 中加载，由下面的图像标记代码提供，问题出在这一行

```
<img alt="Splitwise" id="logo" src="C:\Users\Admin\Desktop\defie.bmp"> 
```

代码：

```
 <header>

<body>
        <!--[if lt IE 7]>
            <p class="chromeframe">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> or <a href="http://www.google.com/chromeframe/?redirect=true">activate Google Chrome Frame</a> to improve your experience.</p>
        <![endif]-->

        <!-- Add your site or application content here -->

        <img alt="Splitwise" id="logo" src="C:\Users\Admin\Desktop\defie.bmp">
        <header>
            <div class="menu">

                 <!--<a href="/">
                    <img alt="Splitwise" id="logo" src="//dx0qysuen8cbs.cloudfront.net/assets/logo-ffe4f2b804af3331e58f523445a844e2.png">
                </a>-->
                <ul>
                    <li class="active"><a href="#">Home</a></li>
                    <li><a href="#">About Us</a></li>
                    <li><a href="#">Contact Us</a></li>
                    <div class="clearFloat"></div>
                </ul>
            </div>
        </header>

        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"></script>
        <script>window.jQuery || document.write('<script src="js/vendor/jquery-1.8.3.min.js"><\/script>')</script>
        <script src="js/plugins.js"></script>
        <script src="js/main.js"></script>

        <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
        <script>
            var _gaq=[['_setAccount','UA-XXXXX-X'],['_trackPageview']];
            (function(d,t){var g=d.createElement(t),s=d.getElementsByTagName(t)[0];
            g.src=('https:'==location.protocol?'//ssl':'//www')+'.google-analytics.com/ga.js';
            s.parentNode.insertBefore(g,s)}(document,'script'));
        </script>
    </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:08:57.593

更改此行

```
<img alt="Splitwise" id="logo" src="C:\Users\Admin\Desktop\defie.bmp"> 
```

至

```
<img alt="Splitwise" id="logo" src="file:///C:/Users/Admin/Desktop/defie.bmp"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:05:27.837

资源在与您提供的文件相同的目录中被引用。假设此代码文件名为 page.html.. 引用类似“C:..”的路径，将在 page.html 所在的同一文件夹中查找 C 文件夹。您可以使用“../”返回一个文件夹（到父文件夹）。

如果页面由服务器提供（不确定如果不是会发生什么），您可以使用在 url 前面加上 a`/`以使用来自网站/应用程序根目录的相对路径。

如果将图像文件与 page.html 放在同一目录中，则可以使用

```
<img alt="Splitwise" id="logo" src="defie.bmp"> 
```

或者，例如，如果您将其放在 page.html 所在目录的子目录 (dir1) 中。

```
<img alt="Splitwise" id="logo" src="dir1/defie.bmp"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T21:52:22.450

我认为这是因为您正在使用反斜杠尝试使用正斜杠的 uri 路径：

```
<img src="images/image.bmp" alt="whatever"> 
```

如果那不起作用，请尝试

```
<img src="file://C:/your_path_to_pic.jpeg" alt="whatever"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T21:59:28.030

第一个驱动器图像不会加载到 ftp 服务器上，您需要将它们上传到 ftp 上的文件映射，使用它就像

```
<img src="LINK" alt="ALT TXT" /> 
```

尝试将 // 替换为完整且有效的链接，因为您提交的路径无效。试试这条线：

```
<img src="http://www.dx0qysuen8cbs.cloudfront.net/assets/logo-ffe4f2b804af3331e58f523445a844e2.png" alt="Splitwise" id="logo"> 
```

# c# - await 是否使其余方法异步？

> ID：13942016
> 
> 赞同：8
> 
> 时间：2012-12-18T21:46:33.723
> 
> 标签：c#, .net, async-await

我读过“BackgroundWorker”[旨在被](https://stackoverflow.com/a/12414657/16241)Ansyc/Await 取代。

因为我喜欢 Async/Await 的简洁外观，所以我开始将我的一些 BackgroundWorkers 转换为 Async/Await 调用。

这是我拥有的代码示例（从 UI 调用）：

```
public async void RunFromTheUI()
{
   await OtherAction();
}

public async void OtherAction()
{
   var results = await services.SomeRemoteAction();

   foreach (var result in results)
   {
      result.SemiIntenseCalculation(); 
      Several();
      Other();
      NonAsync();
      Calls();  
   }

   SomeFileIO();
} 
```

当我调用`RunFromTheUI`它时，它几乎会立即返回（根据 Async 和 Await 设计）。

但是当它在完成后恢复时，`services.SomeRemoteAction()`它有一个`foreach`循环和另一个方法调用来运行。

我的问题是：**如果该循环是性能猪，它会冻结 UI 吗？** （在我把它全部放在后台工作线程中之前，它并没有减慢 UI 的速度）。

注意：我的目标是 .Net 4.0 并使用 Async Nuget 包。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T21:52:14.433

> 我的问题是：如果该循环是性能猪，它会冻结 UI 吗？

是的，它会的。远程操作完成后，其余的异步方法仍将在 UI 线程上执行。如果您不希望这种情况发生，那么选项是：

*   使用[`ConfigureAwait(continueOnCapturedContext: false)`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.configureawait.aspx)以便继续*不在*UI 线程上执行
*   在不同的线程中执行整个方法以开始，使用`Task.Run`. （您仍然可以将其设为异步方法，以避免在不需要时阻塞线程。）

基本上，如果您有大量同步、阻塞调用或 CPU 密集型工作，您希望避免在 UI 线程上发生这种情况，这与`async`/`await`默认情况下为您所做的相反。

# java - 防止 jSpinner 中的负值

> ID：13942017
> 
> 赞同：0
> 
> 时间：2012-12-18T21:46:46.957
> 
> 标签：java, swing, netbeans, jspinner, changelistener

我正在使用 netbeans 在 java 中构建 gui 应用程序。它有一个 jSpinner。我将其最小值设置为 0。当我运行并单击向下箭头按钮时，我得到了negativearraysizeexception。有什么解决办法吗？

//这段代码在netbeans中自动生成

```
protected void fireStateChanged() {
    Object[] listeners = listenerList.getListenerList();
    for (int i = listeners.length - 2; i >= 0; i -= 2) {
        if (listeners[i] == ChangeListener.class) {
            if (changeEvent == null) {
                changeEvent = new ChangeEvent(this);
            }
            ((ChangeListener)listeners[i+1]).stateChanged(changeEvent);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-20T12:13:42.477

有点晚了，但这是 Netbeans 中的一个自动生成代码的解决方案：jSpinner -> 属性 -> 第二行“模型”单击 [..]，你有不同的选择:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T22:05:44.173

尝试这种方式，而不是 NetBeans 自动生成的代码：

```
import javax.swing.JFrame;
import javax.swing.JSpinner;
import javax.swing.SpinnerModel;
import javax.swing.SpinnerNumberModel;
import javax.swing.SwingUtilities;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class Spinner {

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                JFrame frame = new JFrame("Spinner demo");
               //10 is init value, 0 is minimum, 20 maximum and 1 is step
                SpinnerModel model = new SpinnerNumberModel(10, 0, 20, 1);
                JSpinner spinner = new JSpinner(model);
                spinner.addChangeListener(new ChangeListener() {
                    public void stateChanged(ChangeEvent e) {
                        JSpinner s = (JSpinner)e.getSource();
                        int val = (int)s.getValue();
                        System.out.println(val);
                    }
                });

                frame.add(spinner);
                frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                frame.pack();
                frame.setVisible(true);
            }
        });
    }
} 
```

它返回正确的值。没有负面的。祝你好运！

# python - Python - 遍历嵌套列表的麻烦

> ID：13942019
> 
> 赞同：3
> 
> 时间：2012-12-18T21:47:04.503
> 
> 标签：python, algorithm, list, data-structures, iterator

我正在尝试通过 python 中的一些列表迭代进行暴力破解（我是 pynoob），我似乎无法理解为什么这是一个问题。

我的数据结构如下所示：

```
pprint.pprint(list)

[[1355759452000L, 1],
 [1355759191000L, 1],
 [1355758983000L, 1],
 [1355758939000L, 1],
 ... items removed for brevity...
 [1355742844000L, 1],
 [1355742833000L, 1],
 [1355742558000L, 1]] 
```

我想遍历这个列表，但是，我能够从中获取时间戳的唯一方法是执行以下操作（似乎错误）：

```
startEpoch = 0
endEpoch = ...some future date...
newList = []
while currentTime <= endEpoch:
        for i,l in enumerate(list):
            for epoch in enumerate(l):
                if epoch[1] >= currentTime and epoch[1] <= (currentTime + 7200):
                    newList.append(currentTime)
        currentTime += 7200 
```

这样做的目标是遍历“列表”并添加所有在 2 小时范围内的条目。因此，如果开始为 0，则计算 0 到 7200 之间的每个条目，然后计算 7200 和 14200 之间的每个条目，等等。

理想情况下，我希望 newList 类似于：

```
[0][12]
[7200][11]

[the time stamp][the count] 
```

无论出于何种原因，我在其他语言中的坏习惯以及我对 python 的理解不足，这变得容易出错并且比应有的方式更加困难。

任何帮助和指导表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T21:53:53.570

像这样的东西怎么样：

```
In [17]: l = [[0, 1], [3, 1], [200, 1], [8000, 1], [9000, 1], [20000, 1]]

In [24]: [(k,len(list(g))) for k,g in itertools.groupby(l, lambda x:x[0]-x[0]%7200)]
Out[24]: [(0, 3), (7200, 2), (14400, 1)] 
```

这假设时间戳按时间顺序排列。如果不是，您可以使用`collections.Counter`：

```
In [26]: sorted(collections.Counter(x[0]-x[0]%7200 for x in l).items())
Out[26]: [(0, 3), (7200, 2), (14400, 1)] 
```

> 有什么办法可以让这个包含 0 的 7200 时间组？因此，如果我有一个 7200 的时间段，在原始列表中没有匹配的条目，我可以让它放置一个零。（我正在绘制这些数据）

```
In [29]: c = collections.Counter(x[0]-x[0]%7200 for x in l)

In [30]: [(t, c.get(t, 0)) for t in range(0, 72000, 7200)]
Out[30]: 
[(0, 3),
 (7200, 2),
 (14400, 1),
 (21600, 0),
 (28800, 0),
 (36000, 0),
 (43200, 0),
 (50400, 0),
 (57600, 0),
 (64800, 0)] 
```

在这里，`t`迭代您希望绘制的时间戳；`c.get(t, 0)`如果有数据则获取计数，如果没有则返回`0`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T21:58:48.957

类似于 NPE 的回答，

```
for k, g in itertools.groupby(items, lambda x: x[0] / 7200000):
    print k,
    print sum([x[1] for x in g]) 
```

我假设（可能不正确）子列表中的第二项是该时间戳的计数。如果不是，那么获取列表的长度（如 NPE 的答案）是正确的方法。

**注意**
您可能希望使用 7200000 而不是 7200，因为您的时间戳似乎以毫秒为单位。

# bash - Bash：替换变音符号？

> ID：13942024
> 
> 赞同：1
> 
> 时间：2012-12-18T21:47:31.100
> 
> 标签：bash

是否可以将 bash 中的所有变音符号替换为普通字母？

即：ń -> n，Ą -> A，Ó -> O，Ć -> Ć，ę -> e 等...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:15:29.350

```
$ iconv -f utf-8 -t ascii//translit <<< 'ń -> n, Ą -> A, Ó -> O, Ć -> Ć, ę -> e'
n -> n, A -> A, O -> O, C -> C, e -> e

$ iconv -f utf-8 -t ascii//translit <<< 'Kości zostały rzucone i żaden żywy człowien nie ujrzał już ćmy'
Kosci zostaly rzucone i zaden zywy czlowien nie ujrzal juz cmy 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:12:20.713

Ok, i found it:

```
echo "Kości zostały rzucone i żaden żywy człowien nie ujrzał już ćmy" | sed \
-e 's/ą/a/g' \
-e 's/ć/c/g' \
-e 's/ę/e/g' \
-e 's/ł/l/g' \
-e 's/ń/n/g' \
-e 's/ó/o/g' \
-e 's/ś/s/g' \
-e 's/[żź]/z/g' \
\
-e 's/Ą/Ą/g' \
-e 's/Ć/C/g' \
-e 's/Ę/E/g' \
-e 's/Ł/L/g' \
-e 's/Ń/N/g' \
-e 's/Ó/O/g' \
-e 's/Ś/S/g' \
-e 's/[ŻŹ]/Z/g' \
\ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T22:04:38.740

好吧，你会认为`tr`这是完美的：

`echo ńę | tr abcdefghijklmnopqrstńĄÓĆę abcdefghijklmnopqrstnAOCę`

不过对我不起作用。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-18T21:54:34.037

您可以运行 sed、awk、Perl、Python、PHP 等程序并将输出捕获到 Bash 变量中。

# proxy - 使用带有自动代理配置 URL 的 FTP 程序

> ID：13942031
> 
> 赞同：1
> 
> 时间：2012-12-18T21:48:02.960
> 
> 标签：proxy, ftp, ftp-client, filezilla

在过去的 5 个小时里，我确实在互联网上搜索过，我已经尝试了所有的建议，我开始怀疑我想要做的事情是否根本不可能......

大多数网络服务器只允许 X 个同时连接进行上传/下载。我只是想通过各种代理连接/上传来更快地上传我的许多文件。但是，我找不到任何程序具有自动代理配置的功能，并且仅适用于特定的代理 IP。我有一个代理服务帐户，它为通过它进行的每个请求/连接提供不同的 IP 地址。我可以从任何 FTP 程序连接到这个罚款，但是当他们看到不同的 IP 连接时，服务器似乎很困惑，并且没有办法在服务器端手动将它们列入白名单/身份验证，所以它只是关闭了所有连接。我什至有一个我愿意使用的带有端口/用户/密码的 IP 地址列表，但我不能

非常感谢任何帮助/输入！

# matlab - matlab方程系统求解器

> ID：13942032
> 
> 赞同：0
> 
> 时间：2012-12-18T21:48:05.350
> 
> 标签：matlab, variables, system, intervals, equation

我可以求解方程组以获得“q”的精确值：

```
[A,B,C,Y]= solve('825*cos(A)+792*cos(B)-446.687*cos(C)=187.069','825*sin(A)+792*sin(B)-446.687*sin(C)=694.126','446.687*cos(C)-280.446*cos(2.778+B)=550','446.687*sin(C)-280.446*sin(2.778+B)=Y') 
```

但我需要根据变量 q=121:10:501 的解决方案：

```
[A,B,C,Y]= solve('(q+704)*cos(A)+792*cos(B)-446.687*cos(C)=187.069','(q+704)*sin(A)+792*sin(B)-446.687*sin(C)=694.126','446.687*cos(C)-280.446*cos(2.778+B)=550','446.687*sin(C)-280.446*sin(2.778+B)=Y') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T21:55:09.443

```
i = 1;
for q = 121:10:501
    [A(i),B(i),C(i),Y(i)] = solve(['(',num2str(q),'+704)*cos(A)+792*cos(B)-446.687*cos(C)=187.069'],['(',num2str(q),'+704)*sin(A)+792*sin(B)-446.687*sin(C)=694.126'],'446.687*cos(C)-280.446*cos(2.778+B)=550','446.687*sin(C)-280.446*sin(2.778+B)=Y')
i = i+1;
end 
```

# iphone - 滚动并同时从后台线程中的资产加载全屏图像时感觉滞后

> ID：13942036
> 
> 赞同：2
> 
> 时间：2012-12-18T21:48:40.243
> 
> 标签：iphone, ios, grand-central-dispatch, lag, alasset

事情是这样的：我有一个滚动视图，它对用户照片的全屏图像进行了延迟加载：

```
[self.assetsLibrary assetForURL:[NSURL URLWithString:[[self.assets objectAtIndex:index] objectForKey:@"asset_url"]]
    resultBlock:^(ALAsset *asset) {
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            CGImageRef cgImage = asset.defaultRepresentation.fullScreenImage;
            UIImage *image = [UIImage imageWithCGImage:cgImage];
            dispatch_async(dispatch_get_main_queue(), ^{
                imageView.image = image;
            });
        });
                    }
failureBlock:^(NSError *error) {
    NSLog(@"error");
}]; 
```

我知道加载全屏图像很昂贵，所以我把它放在后台线程中，但是当我滚动时它仍然滞后。即使我这样改变它仍然滞后：

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
                            CGImageRef cgImage = asset.defaultRepresentation.fullScreenImage;
                            UIImage *image = [UIImage imageWithCGImage:cgImage];
                            imageView.image = image;
                            dispatch_async(dispatch_get_main_queue(), ^{
                            });
                        }); 
```

显然，在主队列中无事可做，但它仍然滞后，直到我评论该行：

```
// CGImageRef cgImage = asset.defaultRepresentation.fullScreenImage; 
```

所以我很困惑，我使用GCD时有什么问题吗？有人可以帮我解释一下吗？任何事情都会有所帮助。

谢谢你们。

**更新**

致@Fogmeister：照片的大小是全屏大小，actuel imageView 大小约为一半。即使我评论了这一行：“imageView.image = image;” 它仍然滞后。这意味着它不是来自调整大小。我知道时间花在了哪里，在这里：“asset.defaultRepresentation.fullScreenImage;”。当我评论它时，一切都很好，没有更多的滞后。 **所以，我不明白的是，我已经把它放在后台线程中......**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T15:48:41.623

好的，最后我解决了问题：

而不是直接通过

```
asset.defaultRepresentation.fullScreenImage 
```

我使用 Apple 的[Example PhotosByLocation](http://developer.apple.com/library/ios/#samplecode/PhotosByLocation/Introduction/Intro.html#//apple_ref/doc/uid/DTS40010136)中的方法（下面的代码）在 BG 线程中获取图像。效果很好，滚动时不再滞后。**但是我仍然很困惑，我不知道为什么。因此，如果有人可以向我解释，我将不胜感激。**

```
- (UIImage *)fullSizeImageForAssetRepresentation:(ALAssetRepresentation *)assetRepresentation {

UIImage *result = nil;
NSData *data = nil;

uint8_t *buffer = (uint8_t *)malloc(sizeof(uint8_t)*[assetRepresentation size]);
if (buffer != NULL) {
    NSError *error = nil;
    NSUInteger bytesRead = [assetRepresentation getBytes:buffer fromOffset:0 length:[assetRepresentation size] error:&error];
    data = [NSData dataWithBytes:buffer length:bytesRead];

    free(buffer);
}

if ([data length]) {
    CGImageSourceRef sourceRef = CGImageSourceCreateWithData((__bridge CFDataRef)data, nil);

    NSMutableDictionary *options = [NSMutableDictionary dictionary];

    [options setObject:(id)kCFBooleanTrue forKey:(id)kCGImageSourceShouldAllowFloat];
    [options setObject:(id)kCFBooleanTrue forKey:(id)kCGImageSourceCreateThumbnailFromImageAlways];
    [options setObject:(id)[NSNumber numberWithFloat:640.0f] forKey:(id)kCGImageSourceThumbnailMaxPixelSize];
    //[options setObject:(id)kCFBooleanTrue forKey:(id)kCGImageSourceCreateThumbnailWithTransform];

    CGImageRef imageRef = CGImageSourceCreateThumbnailAtIndex(sourceRef, 0, (__bridge CFDictionaryRef)options);

    if (imageRef) {
        result = [UIImage imageWithCGImage:imageRef scale:[assetRepresentation scale] orientation:(UIImageOrientation)[assetRepresentation orientation]];
        CGImageRelease(imageRef);
    }

    if (sourceRef) CFRelease(sourceRef);
}

return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-08T06:11:08.203

您从 Apple 的 PhotosByLocation 中获取的解决方案实际上是获取**最大**分辨率的图像，而不是**全屏**图像。IOW，它本质上与调用 fullResolutionImage 而不是 fullScreenImage 相同。这如何解决你的问题，我不确定。我正在努力解决同样的性能问题。如果我使用 fullScreenImage，我的滚动会滞后。但是切换到 fullResolutionImage 可以摆脱滞后。fullResolutionImage 花费的时间大约是 fullScreenImage 的两倍，但由于它始终在后台，因此花费多少时间并不重要。我怀疑 fullScreenImage 正在返回一个图像，一旦它在主线程中呈现到屏幕上，就需要某种额外的处理 - 因此存在滞后。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T21:52:13.840

你知道照片的实际尺寸吗？非常昂贵的是正在调整大小以适应屏幕的滚动图像。

看到您已经在 BG 线程中加载，可能值得将图像大小调整为您正在显示的大小，然后再将其粘贴到屏幕上。

您可以使用 Instruments 中的 CoreAnimation 工具通过从 Xcode 分析应用程序来查看所花费的时间。它甚至会告诉你哪一行代码导致了动画帧的变慢和丢失。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T21:57:41.417

从苹果文档：

`DISPATCH_QUEUE_PRIORITY_DEFAULT
Items dispatched to the queue run at the default priority; the queue is scheduled for execution after all high priority queues have been scheduled, but before any low priority queues have been scheduled.

DISPATCH_QUEUE_PRIORITY_BACKGROUND
Items dispatched to the queue run at background priority; the queue is scheduled for execution after all high priority queues have been scheduled and the system runs items on a thread whose priority is set for background status. Such a thread has the lowest priority and any disk I/O is throttled to minimize the impact on the system.`

您在单独的线程中运行它，但这不一定是“在后台”的线程。根据我的经验，加载某些内容的后台线程将通过执行 UI 更新（例如滚动 UIScrollView）被完全阻止。你试过使用`DISPATCH_QUEUE_PRIORITY_BACKGROUND`吗？

# android - MultiTouching - Horizo ntalScrollView 中的触摸按钮 - Android

> ID：13942040
> 
> 赞同：0
> 
> 时间：2012-12-18T21:48:59.623
> 
> 标签：android, button, multi-touch, horizontalscrollview

我尝试使用多点触控制作应用程序，并使用以下代码：

[多点触控代码](http://www.passsy.de/multitouch-for-all-views/)

它可以工作，但我遇到了问题，因为在我的应用程序中，我有 Horizo​​ntalScrollView (HSV)，当我从 HSV 开始按下按钮时，我`View.getId()`在“downTouchedViewsIndex”中有按钮 Id ()，但是当我滚动我的 HSV并按我只有布局的 ID 的任何按钮 - 与按钮无关。

我的触摸码：

```
package com.lacrima.pianoo;

public class MainActivity extends Activity implements SeekBar.OnSeekBarChangeListener, OnTouchListener {

    static private String TAG = "MainActivity";

    public View parent;

    private final ArrayList[] recentTouchedViewsIndex = new ArrayList[10];

    private final ArrayList[] downTouchedViewsIndex = new ArrayList[10];

    private final ArrayList<View> moveOutsideEnabledViews = new ArrayList<View>();

    private List<Integer> list = new ArrayList<Integer>();

    private final int mTouchSlop = 24;

    AssetFileDescriptor des; // deskryptor do opisu wczytywanego pliku muzycznego (miejsce gdzie jesta zapisany dlugość i inne takie)
    MediaPlayer[] mp = new MediaPlayer[36];// = new MediaPlayer();

    //Pierwsza oktawa
    Button button1, button2, button3, button4, button5, button6, button7;
    Button button1_5, button2_5, button4_5, button5_5, button6_5;
    //Druga oktawa
    Button button8, button9, button10, button11, button12, button13, button14;
    Button button8_5, button9_5, button11_5, button12_5, button13_5; 
    //Trzecia oktawa
    Button button15, button16, button17, button18, button19, button20, button21; 
    Button button15_5, button16_5, button18_5, button19_5, button20_5;

    SamplePlayer sound;
    Integer[] soundIDs = new Integer[36];

    private boolean[] whitePlays = new boolean[21];
    private boolean[] blackPlays = new boolean[15];

    private View[] whiteViews = new View[21];
    private View[] blackViews = new View[15];

    private int lastButton;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN, WindowManager.LayoutParams.FLAG_FULLSCREEN);

        setContentView(R.layout.activity_main);

        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE); //Ustawienie ekranu horuzontalnie na sztywno
        this.setVolumeControlStream(AudioManager.STREAM_MUSIC);

        parent = findViewById(android.R.id.content).getRootView();
        parent.setOnTouchListener(this);

        SeekBar seek = (SeekBar) findViewById(R.id.seekBar);
        final LockedHorizontalScrollView hsv = (LockedHorizontalScrollView)findViewById(R.id.hsv);

        seek.setMax(948);
        seek.setProgress(474);
        seek.setOnSeekBarChangeListener(this);
        hsv.post(new Runnable() {
            @Override
            public void run() {
                hsv.scrollTo(474, 0);
            }
        });

        sound = new SamplePlayer(this);

        falsePlays();
        buttonListeners();
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onProgressChanged(SeekBar seekBar, int progress, boolean fromTouch) {

        LockedHorizontalScrollView hsv = (LockedHorizontalScrollView)findViewById(R.id.hsv);
        hsv.scrollTo(progress, 0);
    }

    @Override
    public void onStartTrackingTouch(SeekBar seekBar) {
        //uruchamiane w momencie kliknięcia na suwak
        Log.d(TAG, "Tracking on");
    }

    @Override
    public void onStopTrackingTouch(SeekBar seekBar) {
        //uruchamiane w momencie odkliknięcia suwaka
        Log.d(TAG, "Tracking off");

    }

    @Override
    protected void onDestroy() {
        sound.release();
        super.onDestroy();
    }

    @Override
    public boolean onTouch(View v, MotionEvent event) {

        // index of the pointer which starts this Event
        final int actionPointerIndex = event.getActionIndex();

        // resolve the action as a basic type (up, down or move)
        int actionResolved = event.getAction() & MotionEvent.ACTION_MASK;
        if (actionResolved < 7 && actionResolved > 4) {
            actionResolved = actionResolved - 5;
        }

        if (actionResolved == MotionEvent.ACTION_DOWN || actionResolved == MotionEvent.ACTION_UP
                || actionResolved == MotionEvent.ACTION_CANCEL) {
            dealEvent(actionPointerIndex, event, v, actionResolved);
        }

        return true;
    }

    private void dealEvent(final int actionPointerIndex, final MotionEvent event, final View eventView,
            final int actionResolved) {

        int rawX, rawY;
        final int location[] = { 0, 0 };
        eventView.getLocationOnScreen(location);
        // Log.v("tag", location + "");
        rawX = (int) event.getX(actionPointerIndex) + location[0];
        rawY = (int) event.getY(actionPointerIndex) + location[1];

        final int actionPointerID = event.getPointerId(actionPointerIndex);
        ArrayList<View> hoverViews = getTouchedViews(rawX, rawY);

        if (actionResolved == MotionEvent.ACTION_DOWN) {
            downTouchedViewsIndex[actionPointerID] = (ArrayList<View>) hoverViews.clone();

            lastButton = hoverViews.get(k-1).getId();

        }

        if(actionResolved == MotionEvent.ACTION_UP){
            int k = hoverViews.size();
            Log.d("klop", "Odklijniecie: " + hoverViews.get(k-1).getId());
            lastButton = eventView.getId();
        }
        // deletes all views which where not clicked on ActionDown
        if (downTouchedViewsIndex[actionPointerID] != null) {
            final ArrayList<View> tempViews = (ArrayList<View>) hoverViews.clone();
            tempViews.removeAll(downTouchedViewsIndex[actionPointerID]);
            hoverViews.removeAll(tempViews);
        }

        if (recentTouchedViewsIndex[actionPointerID] != null) {
            final ArrayList<View> recentTouchedViews = recentTouchedViewsIndex[actionPointerID];

            final ArrayList<View> shouldTouchViews = (ArrayList<View>) hoverViews.clone();
            if (!shouldTouchViews.containsAll(recentTouchedViews)) {
                shouldTouchViews.removeAll(recentTouchedViews);
                shouldTouchViews.addAll(recentTouchedViews);

                final ArrayList<View> outsideTouchedViews = (ArrayList<View>) shouldTouchViews.clone();
                outsideTouchedViews.removeAll(hoverViews);
            }

            recentTouchedViewsIndex[actionPointerID] = hoverViews;
            hoverViews = shouldTouchViews;
        } else {
            recentTouchedViewsIndex[actionPointerID] = hoverViews;
        }

        if (actionResolved == MotionEvent.ACTION_UP) {
            recentTouchedViewsIndex[actionPointerID] = null;
            downTouchedViewsIndex[actionPointerID] = null;
        }
        for (final View view : hoverViews) {
            int x, y;
            view.getLocationOnScreen(location);
            x = rawX - location[0];
            y = rawY - location[1];

            // View does not recognize that the Pointer is
            // outside if the Pointer is not far away (>mTouchSlop)
            if (recentTouchedViewsIndex[actionPointerID] != null) {
                if (pointInView(x, y, mTouchSlop, view.getWidth(), view.getHeight())) {

                    if (!recentTouchedViewsIndex[actionPointerID].contains(view)) {
                        recentTouchedViewsIndex[actionPointerID].add(view);
                    }
                } else if (moveOutsideEnabledViews.contains(view)) {
                    Log.v("tag", "outside but gets event");
                    recentTouchedViewsIndex[actionPointerID].add(view);
                }
            }
            final MotionEvent me = MotionEvent.obtain(event.getDownTime(), event.getEventTime(), actionResolved, x, y,
                    event.getPressure(actionPointerIndex), event.getPressure(actionPointerIndex), event.getMetaState(),
                    event.getXPrecision(), event.getYPrecision(), event.getDeviceId(), event.getEdgeFlags());
            me.setLocation(x, y);

            if (!me.equals(event)) {
                // deals the Event
                view.onTouchEvent(me);
            }

            // debug
            if (actionResolved == MotionEvent.ACTION_MOVE) {
                Log.v("tag", "#" + actionPointerIndex + " Rawx:" + rawX + " rawy:" + rawY + " x:" + x + " y:" + y + " "
                        + view.toString());
            }
        }
    }

    private ArrayList<View> getTouchedViews(final int x, final int y) {

        final ArrayList<View> touchedViews = new ArrayList<View>();
        final ArrayList<View> possibleViews = new ArrayList<View>();

        if (parent instanceof ViewGroup) {
            possibleViews.add(parent);
            for (int i = 0; i < possibleViews.size(); i++) {
                final View view = possibleViews.get(i);

                final int location[] = { 0, 0 };
                view.getLocationOnScreen(location);

                if (((view.getHeight() + location[1] >= y) & (view.getWidth() + location[0] >= x) & (view.getLeft() <= x) & (view
                        .getTop() <= y)) || view instanceof FrameLayout) {
                    touchedViews.add(view);
                    possibleViews.addAll(getChildViews(view));
                }

            }
        }

        return touchedViews;

    }

    private ArrayList<View> getChildViews(final View view) {
        final ArrayList<View> views = new ArrayList<View>();
        if (view instanceof ViewGroup) {
            final ViewGroup v = ((ViewGroup) view);
            if (v.getChildCount() > 0) {
                for (int i = 0; i < v.getChildCount(); i++) {
                    views.add(v.getChildAt(i));
                }

            }
        }
        return views;
    }

    private boolean pointInView(final float localX, final float localY, final float slop, final float width,
            final float height) {
        return localX >= -slop && localY >= -slop && localX < ((width) + slop) && localY < ((height) + slop);
    }

    public void addMoveOutsideEnabledViews(final View view) {
        moveOutsideEnabledViews.add(view);
    } 
```

和 xml 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#0A0A0A"
    android:orientation="vertical" >

    <SeekBar
        android:id="@+id/seekBar"
        android:layout_width="fill_parent"
        android:layout_height="53dp" />

    <com.lacrima.pianoo.LockedHorizontalScrollView
        android:id="@+id/hsv"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:scrollbars="none" >

        <RelativeLayout
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:orientation="horizontal" >

            <Button...

</RelativeLayout>
    </com.lacrima.pianoo.LockedHorizontalScrollView>

</LinearLayout> 
```

我的代码很长，所以我把它放在 Dropbox（整个项目）上，你可以看到发生了什么

[项目](https://dl.dropbox.com/u/8086560/Uczelnia/Piano.rar)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:12:29.653

我认为如果您移动滚动条，您将失去第一个单击按钮的焦点。两个原因： - Scrollview 覆盖 onTouchEvent 并返回 true。--> 触摸被消耗——你失去了第一个按钮的焦点。尝试使用 addMoveOutsideEnabledViews 方法添加按钮，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T21:21:15.740

我解决了我的问题。

您不需要在触摸下寻找按钮。您必须获取触摸位置的 X 和 Y 并从 scrollView 添加您的值。然后你要检查，有没有按钮和启动方法：

```
rawX = (int) event.getX(actionPointerIndex) + location[0];
rawY = (int) event.getY(actionPointerIndex) + location[1];

    scrollX = seek.getProgress() + rawX;

    if (actionResolved == MotionEvent.ACTION_DOWN) {
        findButton(scrollX, rawY, true);
    }

    if(actionResolved == MotionEvent.ACTION_UP || actionResolved == MotionEvent.ACTION_CANCEL) {
        findButton(scrollX, rawY, false);
    } 
```

# html - 如何强制浏览器下载页面内容资源？

> ID：13942054
> 
> 赞同：1
> 
> 时间：2012-12-18T21:50:10.060
> 
> 标签：html, asp.net-mvc, caching, webpage, browser-cache

我经常看到客户/客户必须刷新网页的问题，通常是在清除他们的历史记录/缓存之后，才发现网页完全没问题。

有没有办法添加版本或只是强制浏览器下载所有资源，例如脚本、图像等？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T21:53:41.073

一种常见的方法是将[随机数](http://en.wikipedia.org/wiki/Cryptographic_nonce)或版本号附加到这些资源的 URL：

```
myStylesheet.css?ver=1.1

logo.png?ver=13.1 
```

当您更改文件时，您会更新版本号并且任何缓存的资源都会更新。

您还可以确保每次对代码库进行任何更改时都使用相同的版本号（或其他）。

# php - 抓取文章ID帖子

> ID：13942056
> 
> 赞同：0
> 
> 时间：2012-12-18T21:50:26.690
> 
> 标签：php

出于某种原因，这不起作用，但不知道为什么。我正在尝试获取有关数据库中有多少评论的评论 ID，但它显示为“0”。当我清楚地看到评论时。

现场访问：[http ://www.krissales.me/#/media/articles](http://www.krissales.me/#/media/articles)

如果您单击文章链接，它将显示该页面上有多少评论，但不会显示我希望它显示的页面上。

我很确定它与以下内容有关：

> $amount_get = mysql_query("SELECT * FROM comment WHERE id='" . mysql_real_escape_string($_GET['id']) . "'"); $comments = mysql_num_rows($amount_get);

文章.php：

```
<?php

        $amount_get = mysql_query("SELECT * FROM comment WHERE id='" . mysql_real_escape_string($_GET['id']) . "'"); 
        $comments = mysql_num_rows($amount_get);            

        $grab = mysql_query("SELECT * FROM articles WHERE id='" . mysql_real_escape_string($_GET['id']) . "' LIMIT 1");    
        $grab = mysql_query("SELECT id, news_title, news_content, news_author, news_day, news_month, news_year, news_date FROM articles ORDER BY id DESC limit 3"); 
        $news_day =$row['news_day'];
        $news_month =$row['news_month'];
        $news_year =$row['news_year'];

        if (mysql_num_rows($grab)==0) {
        echo "<div class='alert alert-note-x'>Sorry, it looks like their are no articles posted!</div>";
    }
        while($row = mysql_fetch_array($grab)){

    ?>

    <div class="post-container">
        <div class="post">
        <div class="left">
        <div class="date"><span class="day"><?php echo $row['news_day'] ?></span> <span class="month"><?php echo $row['news_month'] ?></span> <span class="year"><?php echo $row['news_year'] ?></span></div></div>
        <div class="postcontent"><h5 class="posttitle"><a href="#/media/<?php echo $row['id'] ?>.<?php echo stripslashes(str_replace(" ", "-", $row['news_title'])); ?>"><?php echo stripslashes($row['news_title']); ?></a></h5>                       
            <p>The content for this article will be posted here shortly, i need to edit some PHP that limits the chars for this section</p>
            <p>Comments (<?php echo $comments ?>)</p>
            </div>
    </div>​
    </div>  

  <?php } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T21:55:34.313

你应该看看这一行的 WHERE 条件：

```
$amount_get = mysql_query("SELECT * FROM comment WHERE id='" . mysql_real_escape_string($_GET['id']) . "'"); 
```

我想`id`应该将其更改为`article_id`- 指向文章的 foreign_key。

# knockout.js - 使 observableArray 中的内部对象成为可观察对象

> ID：13942058
> 
> 赞同：0
> 
> 时间：2012-12-18T21:50:36.300
> 
> 标签：knockout.js, knockout-mapping-plugin

假设`observableArray`我的 viewModel 中有一个名为`movies`，其中包含与此类似的数据...

```
[{
    Id: 12345,
    Title: 'Movie1',
    Year: 2010,,
    UserMovies: [{
        Id: 8
        IsWatched: false,
        Rating: 3.5,
        UserId: 'e1e9c075-1ded-4e7d-8d30-d5d1fbd47103'
    }]
},{
    Id: 12345,
    Title: 'Movie2',
    Year: 2010,,
    UserMovies: [{
        Id: 11
        IsWatched: false,
        Rating: 4,
        UserId: 'e1e9c075-1ded-4e7d-8d30-d5d1fbd47103'
    }]
}] 
```

我知道我可以使用映射插件，每个属性都会变成一个，`observable`但是如果我只想让一个属性可观察怎么办。是否有可能只做`UserMovies`一个`observableArray`，我将如何去做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T07:15:14.330

您可以在对象中指定您希望 ko.mapping 插件映射为普通值的属性，如下所示：

```
var mapping = {
    'copy': ["propertyToCopy"]
}
var viewModel = ko.mapping.fromJS(data, mapping); 
```

您需要为您定义的每个模型执行此操作。它可能非常乏味，并且取决于您的模型的性质，很可能首先会破坏插件的主要好处（不必重新定义您的数据模型客户端）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:13:00.720

您可以尝试循环数组中的每个项目，将其存储`UserMovies`在临时变量中，`UserMovies`并用可观察的数组覆盖。像这样的东西：

```
for (var i = 0; i < movies().length; i++) {
        var tempUserMovies = movies()[i].UserMovies;
        movies()[i].UserMovies = ko.observableArray();
        for (var j = 0; j< tempUserMovies.length; j++) {
            movies()[i].UserMovies.push(tempUserMovies[j]);
        }
    } 
```

有点丑陋的方法，但你应该从中得到大致的想法。

# c++ - 使用基于 ATL 的库的 Windows 应用商店应用程序认证失败

> ID：13942059
> 
> 赞同：3
> 
> 时间：2012-12-18T21:50:39.073
> 
> 标签：c++, windows-8, visual-studio-2012, windows-runtime, atl

我有一个用 C++ 开发的 Windows 库，它大量使用 ATL 集合、ATL CString 和 COM 接口与 CComPtr。我从库中删除了所有非 winrt 允许的 API 调用，并且构建良好，因此我将库包装在 C++/CX 引用类中，并尝试从 Windows 应用商店应用程序中使用它。应用程序运行正常，但 Win-Store 应用程序认证失败并出现以下错误：

> 发现错误：受支持的 API 测试检测到以下错误：此应用程序类型不支持 kernel32.dll 中的 API GetModuleHandleW。MyLibrary.dll 调用此 API。此应用程序类型不支持 kernel32.dll 中的 API InitializeCriticalSectionAndSpinCount。MyLibrary.dll 调用此 API。

我的库的 VS 项目为 Windows 应用商店配置了以下设置：

![在此处输入图像描述](../Images/51d6ab119815e35cc61dd721fac195db.png)

这些设置按预期激活/停用 SDK 中所需的宏（例如 WINAPI_FAMILY 为 WINAPI_FAMILY_APP）。

我 100% 确定我没有*直接*在我的库中调用 GetModuleHandleW 或 InitializeCriticalSectionAndSpinCount，所以我认为这个问题一定来自某些 ATL 类的方法，该方法在 Windows 8 SDK 中没有正确过滤。

深入 ATL 头文件并不是很有用，因为那里的一切*看起来都*经过适当过滤，例如从 ATL::CComCriticalSection::Init 看到这个片段

```
#if !defined(_ATL_USE_WINAPI_FAMILY_DESKTOP_APP) || defined(_ATL_STATIC_LIB_IMPL)
        if (!_AtlInitializeCriticalSectionEx(&m_sec, 0, 0))
#else
        if (!InitializeCriticalSectionAndSpinCount(&m_sec, 0))
#endif 
```

为了证明我的理论，我使用了一个十六进制编辑器并从我的 Kernel32.lib 文件中编辑了 GetModuleHandleW，这给了我以下链接错误：

> atls.lib(atlwinverapi.obj)：错误 LNK2001：无法解析的外部符号 __imp__GetModuleHandleW@4

所以看来我的理论没有错。请注意，我正在使用发布版本进行所有这些操作，因为调试版本未通过认证。

现在的问题：

**除了查看头文件之外，我有什么方法可以准确地知道 ATL 中的哪个类正在破坏我的库？**

[MSDN论坛](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/1588e531-86a6-4087-a963-6cf4a09d7487/#1588e531-86a6-4087-a963-6cf4a09d7487)中的相同问题

我添加了一个[关于 microsoft connect 的错误报告，](https://connect.microsoft.com/VisualStudio/feedback/details/774871/certification-fails-for-windows-store-app-with-atl-based-library#details)其中包含一个重现此问题的小示例代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T03:36:30.550

这是我的猜测。查看文件 atlwinverapi.h。宏 _ATL_NTDDI_MIN 有条件地定义为 x86/x64 的一种方式和 ARM 的另一种方式。

我认为这可能在最近添加 XP 支持的 VSUpdate 期间发生了变化。现在在文件atlwinverapi.cpp（我猜它进入atls.lib）中，在方法_AtlInitializeCriticalSectionEx 中，您会注意到如果_ATL_NTDDI_MIN < NTDDI_VISTA，它正在调用InitializeCriticalSectionAndSpinCount。

我假设您正在构建 x86 或 x64，这就是您看到此问题的原因。如果你为 ARM 构建，你不会看到这个问题。

当然，您将无法在 ARM 上运行 WACK，但您可以在二进制文件上运行 dumpbin /imports 并查看它是否仍使用那些不兼容的 API。

# c# - 如何在 Windows 服务或控制台应用程序中有问题地更改系统 IP

> ID：13942062
> 
> 赞同：2
> 
> 时间：2012-12-18T21:50:53.260
> 
> 标签：c#, windows, windows-services, ip, ip-address

我正在编写一个 C# 应用程序并想更改我系统的 IP 地址。

我找到了这个命令

```
netsh interface ip set address name="Local Area Connection" static 192.168.1.191 255.255.255 
```

但是我怎么能在代码中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:12:06.140

像这样的东西应该工作，使用`System.Diagnotics.Process`类。

```
string result;

Process p = new Process();
p.StartInfo.FileName = "netsh.exe";
p.StartInfo.Arguments = "interface ip add address name=\"Local Area Connection\" static 192.168.1.191 255.255.255";
p.StartInfo.UseShellExecute = false;
p.StartInfo.CreateNoWindow = true;
p.StartInfo.RedirectStandardOutput = true;
try
{
   p.Start();
   p.WaitForExit(30000);
   result = p.StandardOutput.ReadToEnd();
}
catch(Exception ex)
{
   result = ex.Message;
}

// check "result" variable for your results. 
```

# c# - 在 Windows Phone 7 中创建运行时文本框

> ID：13942066
> 
> 赞同：0
> 
> 时间：2012-12-18T21:51:08.160
> 
> 标签：c#, xaml, windows-phone-7

我当然想在每个文本框中不显示 json 对象，但由于它们是不可预测的对象数量，因此我使用此代码动态创建了文本框

```
List<Course> Cdata = JsonConvert.DeserializeObject<List<Course>>(App.data);
            TextBox[] Tblock = new TextBox[Cdata.Count];
            double top = 0; int i = 0;

            foreach (Course de in Cdata)
            {
                result += de.course_name + "\r\n";
                result += "Total Absents = " + de.absents;
                result += " + " + de.presents;
                result += " = " + de.sessions + "\r\n\r\n\r\n";

                Tblock[i] = new TextBox();
                Tblock[i].Text = result;
                Tblock[i].AcceptsReturn = true;
                Tblock[i].TextWrapping = TextWrapping.Wrap;
                Tblock[i].Width = 475;
                Tblock[i].Height = 270;
                Tblock[i].IsReadOnly = true;
                Tblock[i].Margin =new Thickness (0,top,0,0);
                Tblock[i].Visibility = System.Windows.Visibility.Visible;
                Tblock[i].VerticalAlignment = System.Windows.VerticalAlignment.Top;
                top += 270; i++;

                result = "";

            } 
```

现在，当我调试我的应用程序数据时，它可以正常工作，唯一的问题是文本框

> 从不显示在视图上

我还没有在视图的 Xaml 文件中编写任何文本框 提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T06:05:27.593

您必须将文本框添加到 XAML 中的任何现有面板（通常是 Grid 或 StackPanel），如下所示

```
StackPanel sp = new StackPanel(); //Create stack panel before foreach loop
foreach (Course de in Cdata)
{
   //your code which you shown above
   sp.Children.Add(Tblock[i]); //Add all the Textboxes to the stackpanel
}

ContentPanel.Children.Add(sp); //And add the above stackpanel to the existing Grid named ContentPanel 
```

顺便说一句，我建议您使用带有 ItemTemplate 的 ListBox 来绑定数据，而不是如上所示创建 TextBoxes。

另外，我不明白您为什么选择 TextBox 而不是 TextBlock 来显示数据

# ruby-on-rails - 语法错误，意外的 tIDENTIFIER，需要关键字_end

> ID：13942067
> 
> 赞同：0
> 
> 时间：2012-12-18T21:51:15.663
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, railstutorial.org

rb文件代码

```
SampleApp::Application.routes.draw do
  get "static_pages/home"

match '/help' to:'static_pages#help'
match '/about' to:'static_pages#about'
match '/contact' to:'static_pages#contact'

  # The priority is based upon order of creation:
  # first created -> highest priority.

  # Sample of regular route:
  #   match 'products/:id' => 'catalog#view'
  # Keep in mind you can assign values other than :controller and :action

  # Sample of named route:
  #   match 'products/:id/purchase' => 'catalog#purchase', :as => :purchase
  # This route can be invoked with purchase_url(:id => product.id)

  # Sample resource route (maps HTTP verbs to controller actions automatically):
  #   resources :products

  # Sample resource route with options:
  #   resources :products do
  #     member do
  #       get 'short'
  #       post 'toggle'
  #     end
  #
  #     collection do
  #       get 'sold'
  #     end
  #   end

  # Sample resource route with sub-resources:
  #   resources :products do
  #     resources :comments, :sales
  #     resource :seller
  #   end

  # Sample resource route with more complex sub-resources
  #   resources :products do
  #     resources :comments
  #     resources :sales do
  #       get 'recent', :on => :collection
  #     end
  #   end

  # Sample resource route within a namespace:
  #   namespace :admin do
  #     # Directs /admin/products/* to Admin::ProductsController
  #     # (app/controllers/admin/products_controller.rb)
  #     resources :products
  #   end

  # You can have the root of your site routed with "root"
  # just remember to delete public/index.html.
  # root :to => 'welcome#index'

  # See how all your routes lay out with "rake routes"

  # This is a legacy wild controller route that's not recommended for RESTful applications.
  # Note: This route will make all actions in every controller accessible via GET requests.
  # match ':controller(/:action(/:id))(.:format)'
end 
```

它向我显示了一个错误

```
syntax error, unexpected tIDENTIFIER, expecting keyword_end
match '/contact' to:'static_pages#contact'
                   ^
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `block in load'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:236:in `load_dependency'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/dependencies.rb:245:in `load'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/application/routes_reloader.rb:40:in `block in load_paths'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/application/routes_reloader.rb:40:in `each'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/application/routes_reloader.rb:40:in `load_paths'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/application/routes_reloader.rb:16:in `reload!'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/application/routes_reloader.rb:26:in `block in updater'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/file_update_checker.rb:78:in `call'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/activesupport-3.2.9/lib/active_support/file_update_checker.rb:78:in `execute'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/application/routes_reloader.rb:27:in `updater'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/application/routes_reloader.rb:7:in `execute_if_updated'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/application/finisher.rb:66:in `block in <module:Finisher>'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `instance_exec'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/initializable.rb:30:in `run'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/initializable.rb:55:in `block in run_initializers'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `each'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/initializable.rb:54:in `run_initializers'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/application.rb:136:in `initialize!'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/railties-3.2.9/lib/rails/railtie/configurable.rb:30:in `method_missing'
    from /home/ritesh/projects/sample_app/config/environment.rb:5:in `<top (required)>'
    from /home/ritesh/projects/sample_app/spec/spec_helper.rb:3:in `require'
    from /home/ritesh/projects/sample_app/spec/spec_helper.rb:3:in `<top (required)>'
    from /home/ritesh/projects/sample_app/spec/requests/static_pages_spec.rb:1:in `require'
    from /home/ritesh/projects/sample_app/spec/requests/static_pages_spec.rb:1:in `<top (required)>'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `load'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `block in load_spec_files'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `map'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.9.0/lib/rspec/core/configuration.rb:746:in `load_spec_files'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.9.0/lib/rspec/core/command_line.rb:22:in `run'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.9.0/lib/rspec/core/runner.rb:69:in `run'
    from /home/ritesh/.rvm/gems/ruby-1.9.3-p327/gems/rspec-core-2.9.0/lib/rspec/core/runner.rb:10:in `block in autorun' 
```

为什么会出现这个语法错误我认为这个代码行是正确的书面匹配'/contact'到：'static_pages#contact'请帮助纠正它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T21:55:23.383

你之前忘记了逗号`to:`

```
match '/help', to:'static_pages#help'
match '/about', to:'static_pages#about'
match '/contact', to:'static_pages#contact' 
```

# python - 函数的烧瓶流输出到浏览器

> ID：13942069
> 
> 赞同：6
> 
> 时间：2012-12-18T21:51:21.607
> 
> 标签：python, flask

阅读此页面[http://flask.pocoo.org/docs/patterns/streaming/](http://flask.pocoo.org/docs/patterns/streaming/)似乎我可以做我想做的事，我有一个简单的 url 路由将输出发送到 json 但我宁愿流式传输输出：

```
@app.route('/')
def aws_api_route_puppet_apply(ip=None):
    output = somemethod(var1,var2,var3)
    return Response(json.dumps(output), mimetype='application/json') 
```

有没有办法只使用烧瓶和 HTML 将某些方法流式传输到浏览器，还是我需要使用 javascript？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T22:08:41.780

就像文档说的那样，只需创建一个生成器并生成您想要返回给客户端的每一行。

如果输出长度为 10 行，则以下内容将向客户端打印 10 行中的每一行（如果它们可用）：

```
@app.route('/')
def aws_api_route_puppet_apply(ip=None):
    def generate():
        for row in somemethod(var1,var2,var3):
            yield row + '\n'
    return Response(generate(),  mimetype='application/json') 
```

# vb.net - 网格视图中的循环中的 if 语句

> ID：13942075
> 
> 赞同：0
> 
> 时间：2012-12-18T21:51:57.320
> 
> 标签：vb.net, loops, gridview, for-loop

我正在尝试检查每行单元格 (3) 中的日期。如果第一个条件为真，我只能获得日期`If`，其余单元格显示为空白。代码如下。

```
 For Each row As GridViewRow In GridView1.Rows
            If Not IsDBNull(dr("B1Week").ToString) Then
                e.Row.Cells(3).Text = dr("B1week").ToString
                e.Row.Cells(3).ForeColor = System.Drawing.Color.Blue

            ElseIf DD2 <= Now Then
                e.Row.Cells(3).Text = e.Row.Cells(3).Text & " - OVERDUE"
                e.Row.Cells(3).ForeColor = System.Drawing.Color.Red

            ElseIf DD2 <= Now.AddDays(7) Then
                e.Row.Cells(3).Text = e.Row.Cells(3).Text & " - DUE "
                e.Row.Cells(3).ForeColor = System.Drawing.Color.Green

            End If

        Next row 
```

我希望检查每行中的每个单元格 3 并分配值。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:15:43.120

在您的 For Each 循环中，您需要使用 row 变量：

```
 For Each row As GridViewRow In GridView1.Rows
        If Not IsDBNull(dr("B1Week").ToString) Then
            row.Cells(3).Text = dr("B1week").ToString
            row.Cells(3).ForeColor = System.Drawing.Color.Blue

        ElseIf DD2 <= Now Then
            row.Cells(3).Text = e.Row.Cells(3).Text & " - OVERDUE"
            row.Cells(3).ForeColor = System.Drawing.Color.Red

        ElseIf DD2 <= Now.AddDays(7) Then
            row.Cells(3).Text = e.Row.Cells(3).Text & " - DUE "
            row.Cells(3).ForeColor = System.Drawing.Color.Green

        End If

    Next row 
```

# python - Python：替换数组中的值

> ID：13942083
> 
> 赞同：6
> 
> 时间：2012-12-18T21:52:49.873
> 
> 标签：python, arrays, numpy, interpolation, median

我有一个一维数据集，其中一些没有数据值设置为 9999。这是一个摘录，因为它很长：

```
this_array = [   4,    4,    1, 9999, 9999, 9999,   -5,   -4, ... ] 
```

我想用两边最接近的值的平均值替换无数据值，但是由于一些无数据值也具有最接近的值作为无数据值，替换它们有点困难。即我希望将三个无数据值替换为-2。我创建了一个循环来遍历数组中的每个标量并测试没有数据：

```
for k in this_array:
    if k == 9999:
        temp = np.where(k == 9999, (abs(this_array[k-1]-this_array[k+1])/2), this_array[k])
    else:
        pass
this_array[k] = temp 
```

但是，如果它也等于 9999，我需要添加一个 if 函数或方法来获取 k-1 之前或 k+1 之后的值，例如：

```
if np.logical_or(k+1 == 9999, k-1 == 9999):
    temp = np.where(k == 9999, (abs(this_array[k-2]-this_array[k+2])/2), this_array[k]) 
```

可以看出，这段代码会变得混乱，因为最终可能会采用错误的值或以嵌套的 if 函数告终。有谁知道实现这一点的更简洁的方法，因为它在整个数据集中变化很大？

根据要求：如果第一个和/或最后一个点没有数据，最好将它们替换为最近的数据点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:02:40.383

使用 numpy 函数可能有一种更有效的方法，但这里有一个使用[itertools 模块](http://docs.python.org/2/library/itertools.html)的解决方案：

```
from itertools import groupby

for k, g in groupby(range(len(this_array)), lambda i: this_array[i] == 9999):
    if k:
        indices = list(g)
        new_v = (this_array[indices[0]-1] + this_array[indices[-1]+1]) / 2
        this_array[indices[0]:indices[-1]+1].fill(new_v) 
```

如果最后一个元素或第一个元素可以是`9999`，则使用以下内容：

```
from itertools import groupby

for k, g in groupby(range(len(this_array)), lambda i: this_array[i] == 9999):
    if k:
        indices = list(g)
        prev_i, next_i = indices[0]-1, indices[-1]+1
        before = this_array[prev_i] if prev_i != -1 else this_array[next_i]
        after = this_array[next_i] if next_i != len(this_array) else before
        this_array[indices[0]:next_i].fill((before + after) / 2) 
```

使用第二个版本的示例：

```
>>> from itertools import groupby
>>> this_array = np.array([9999, 4, 1, 9999, 9999, 9999, -5, -4, 9999])
>>> for k, g in groupby(range(len(this_array)), lambda i: this_array[i] == 9999):
...     if k:
...         indices = list(g)
...         prev_i, next_i = indices[0]-1, indices[-1]+1
...         before = this_array[prev_i] if prev_i != -1 else this_array[next_i]
...         after = this_array[next_i] if next_i != len(this_array) else before
...         this_array[indices[0]:next_i].fill((before + after) / 2)
...
>>> this_array
array([ 4,  4,  1, -2, -2, -2, -5, -4, -4]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T22:15:56.570

我会按照以下方式做一些事情：

```
import numpy as np

def fill(arr, fwd_fill):
  out = arr.copy()
  if fwd_fill:
    start, end, step = 0, len(out), 1
  else:
    start, end, step = len(out)-1, -1, -1
  cur = out[start]
  for i in range(start, end, step):
    if np.isnan(out[i]):
      out[i] = cur
    else:
      cur = out[i]
  return out

def avg(arr):
  fwd = fill(arr, True)
  back = fill(arr, False)
  return (fwd[:-2] + back[2:]) / 2.

arr = np.array([   4,    4,    1, np.nan, np.nan, np.nan,   -5,   -4])
print arr
print avg(arr) 
```

第一个函数可以进行前向或后向填充，将每个 NaN 替换为最近的非 NaN。

一旦你有了这个，计算平均值就很简单了，由第二个函数完成。

你没有说你希望如何处理第一个和最后一个元素，所以代码只是将它们砍掉。

最后，值得注意的是，如果输入数组的第一个或最后一个元素丢失（在这种情况下，没有数据可以计算某些平均值），该函数可以返回 NaN。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T22:45:34.040

这是一个递归解决方案，其中第一个和最后一个不是 9999。您可能可以使用生成器清理它，因为递归可能会变得很深。这是一个合理的开始

```
def a(list, first, depth):    
  if ([] == list):
    return []
  car = list[0]
  cdr = list[1:]
  if (9999 ==  car):        
      return a(cdr, first, depth+1)
  if (depth != 0):
      avg = [((first + car) /2)] * depth
      return  avg + [car] + a(cdr, car, 0)
  else:
      return [car] + a(cdr, car, 0)

print a([1,2,9999, 4, 9999,9999, 12],0,0)
# => [1, 2, 3, 4, 8, 8, 12] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T22:58:59.957

好的，恐怕我必须自己编写它，您可以使用`np.interp`或等效（可能更好，功能更多）的 scipy 函数，您可以在`scipy.interpolate`.

好的，重读......我猜你不想要线性插值？在这种情况下，这当然不起作用......虽然我确信有一些矢量化方法。

```
imort numpy as np
# data is the given array.
data = data.astype(float) # I cast to float, if you don't want that badly...
valid = data != 9999
x = np.nonzero(valid)[0]
replace = np.nonzero(~valid)[0]
valid_data = data[x]

# using np.interp, but I think you will find better things in scipy.interpolate
# if you don't mind using scipy.
data[replace] = np.interp(replace, x, valid_data,
                                   left=valid_data[0], right=valid_data[-1]) 
```

# android - 使用 android-support-v4.jar 转换为 Dalvik 格式失败，错误 1

> ID：13942084
> 
> 赞同：2
> 
> 时间：2012-12-18T21:52:53.680
> 
> 标签：android, facebook, dalvik

我正在尝试将 facebook 库添加到我的 Android 项目中，**转换为 Dalvik 格式失败，出现错误 1**​​错误。经过搜索，似乎我的问题与**android-support-v4.jar 有关**。

jar 都出现在 facebook 依赖项和我的项目的依赖项中。我删除了两个 jar 并将一个重新添加到 facebook 库，但我仍然收到错误。下面是显示依赖项所在位置的屏幕截图。

谢谢。

![在此处输入图像描述](../Images/483d7704fba56931906e49167ee44254.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T01:05:53.653

您有重复的依赖问题。

移除对 NCC 项目的最后一个依赖

```
 android-support-v4.jar - /Users/Heather/Documents/workspace/facebook-android-sdk-3.0/facebook/libs 
```

android-support-v4.jar 已经由 FacebookSDK 库项目提供，因此无需在主项目中再次引用它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T15:27:52.967

使用 Facebook SDK 的应用程序也遇到了这个问题。我正在尝试各种各样的东西，所以我不确定到底修复了什么，但这里的设置对我有用：

FacebookSDK > 属性 > Java 构建路径 > 排序和导出

Android 2.2 - 未选中

Android 私有库 - 已选中

Android 依赖项 - 已检查

MyApp > 属性 > Java 构建路径 > 排序和导出

Android 4.2.2 - 选中

Android 私有库 - 已选中

Android 依赖项 - 已检查

另外，我以前做过，不确定是否重要。从 3.5.2 恢复到 Facebook SDK 版本 3.5。更新到最新的 ADT 22.2.1。将 Facebook SDK 从 4.2.2 更改为使用 Android 2.2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-06T13:35:36.453

有时错误也是由于权限引起的。检查您是否在清单文件中声明了多个权限。从文件中删除无关的权限。

这对我有用：

这是基于 facebookSDK 的应用程序的典型清单文件

```
 <?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.devey.androidnativeapp"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:permission="android.permission.ACCESS_CHECKIN_PROPERTIES"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.devey.androidnativeapp.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
            android:name="com.facebook.sdk.ApplicationId"
            android:value="@string/app_id" />

        <activity android:name="com.facebook.LoginActivity" >
        </activity>
        <activity
            android:name="com.devey.androidnativeapp.Testnative"
            android:label="@string/title_activity_testnative" >
        </activity>
    </application>

</manifest> 
```

我删除了这个额外的权限并干净地构建了我的应用程序，没有进一步的错误：

> android:permission="android.permission.ACCESS_CHECKIN_PROPERTIES"

# c# - 在 C# 中连接到 Active Directory 需要哪些信息？

> ID：13942085
> 
> 赞同：0
> 
> 时间：2012-12-18T21:52:54.400
> 
> 标签：c#, active-directory

我需要连接到客户端 AD 服务器以显示所有用户的信息。他们给了我以下信息：fqdn、netbios 名称和域控制器。这足以连接吗？

```
using (var context = new PrincipalContext(ContextType.Domain, "",)) 
using (var searcher = new PrincipalSearcher(new UserPrincipal(context))) 
{ 
   foreach (var result in searcher.FindAll()) 
   { 
            DirectoryEntry de = result.GetUnderlyingObject() as DirectoryEntry; 
   }
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:35:58.257

我认为瑞恩向你展示了旧的方法。从您的代码看来，您正在使用较新的类。

```
 // create a principal searcher for running a search operation 
        using (PrincipalSearcher pS = new PrincipalSearcher(uParams))
        {
            // assign the query filter property for the principal object you created 
            // you can also pass the user principal in the PrincipalSearcher constructor 
            pS.QueryFilter = uParams;

            // run the query 
            using (PrincipalSearchResult<Principal> results = pS.FindAll())
            {
                foreach (Principal item in results)
                {
                    UserPrincipal u = item as UserPrincipal;
                    list.Add(new MyCustomClass(u.UserPrincipalName)
                    {
                        Cn = u.Name,
                        Email = u.EmailAddress,
                        EmployeeId = u.EmployeeId,
                        NameFirst = u.GivenName,
                        NameLast = u.Surname,
                        ObjectSid = u.Sid.ToString(),
                        DistinguishedName = u.DistinguishedName,
                        SamAccount = u.SamAccountName
                    });
                }
            }
        } 
```

请注意，AD 仍然对您的查询施加了 1500 项限制，因此您可能需要将 DirectoryEntry 顶部发送到以下内容：

```
 /// <summary>
    /// group member enumeration, simple and fast for large AD groups
    /// </summary>
    /// <param name="deGroup"></param>
    /// <returns>list if distinguished names</returns>
    public static List<string> GetMemberList(DirectoryEntry deGroup)
    {
        List<string> list = new List<string>();
        DirectoryEntry entry = deGroup;

        uint rangeStep = 1000;
        uint rangeLow = 0;
        uint rangeHigh = rangeLow + (rangeStep - 1);
        bool lastQuery = false;
        bool quitLoop = false;

        do
        {
            string attributeWithRange;
            if (!lastQuery)
            {
                attributeWithRange = String.Format("member;range={0}-{1}", rangeLow, rangeHigh);
            }
            else
            {
                attributeWithRange = String.Format("member;range={0}-*", rangeLow);
            }
            using (DirectorySearcher searcher = new DirectorySearcher(entry))
            {
                searcher.Filter = "(objectClass=*)";
                //searcher.Filter = LdapObjectMgr.filterDisabledUsers;

                searcher.PropertiesToLoad.Clear();
                searcher.PropertiesToLoad.Add(attributeWithRange);
                SearchResult results = searcher.FindOne();
                foreach (string res in results.Properties.PropertyNames)
                {
                    //list the property names
                    System.Diagnostics.Debug.WriteLine(res.ToString());
                }

                if (results.Properties.Contains(attributeWithRange))
                {
                    foreach (object obj in results.Properties[attributeWithRange])
                    {
                        //Console.WriteLine(obj.GetType());
                        if (obj.GetType().Equals(typeof(System.String)))
                        {
                        }
                        else if (obj.GetType().Equals(typeof(System.Int32)))
                        {
                        }
                        //Console.WriteLine(obj.ToString());
                        list.Add(obj.ToString());
                    }
                    if (lastQuery)
                    {
                        quitLoop = true;
                    }
                }
                else
                {
                    if (lastQuery == false)
                    { lastQuery = true; }
                    else
                    { quitLoop = true; }
                }
                if (!lastQuery)
                {
                    rangeLow = rangeHigh + 1;
                    rangeHigh = rangeLow + (rangeStep - 1);
                }
            }
        }
        while (!quitLoop);

        return list;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:04:13.127

要通过 C# 连接，您将需要以下内容：

```
DirectoryEntry child = new DirectoryEntry("LDAP://" + domainControllerName + "/" + 
        objectDn, userName, password); 
```

如果您有域控制器名称、对象域、用户名和密码，那么您应该可以开始了。

只是提醒一下，你被否决了，因为你没有提到你之前尝试过的任何东西。

# html - html选择选项自动时间

> ID：13942086
> 
> 赞同：0
> 
> 时间：2012-12-18T21:53:00.767
> 
> 标签：html

```
<select id="day" name="day">
  <option selected="selected" value="today">To day</option>
  <option value="Tomorrow">Tomorrow</option>
  <option value="December19">December 19</option>
</select> 
```

如何设置十二月的自动时间，这样我就不必每天手动更改它了？

我的意思是在今天之后自动化，然后明天将显示 12 月 20 日。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:12:45.953

```
<select id="day" name="day">
  <option selected="selected" value="today">To day</option>
  <option value="Tomorrow">Tomorrow</option>
  <option value="<?php echo date('Fd' strtotime('+2 days')) ?>"><?php echo date('F d' strtotime('+2 days')) ?></option>
</select> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T21:56:21.743

您不能仅使用 HTML 来做到这一点。

您需要使用 JavaScript 或 PHP、PERL、JSP、.NET（仅举几例）等服务器端语言创建下拉列表。

使用编程语言就是这样一种方式，您可以获取当前日期并构建下拉列表。

# c# - 使用 LINQ to Entities 进行条件投影

> ID：13942091
> 
> 赞同：8
> 
> 时间：2012-12-18T21:53:17.657
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我对单个实体（具有一些导航属性）进行了查询，需要将它们投影到模型中以供 API 客户端使用。它看起来基本上是这样的：

```
repository.CreateQuery<Reviews>()
  .Where(/* criteria */)
  .Select(m => new
    {
      ID = m.ID,
      Reviewers = m.IsAnonymous 
        ? m.Reviewers.Take(1).Select(r => new { Name = "Anonymous" })
        : m.Reviewers.Select(r => new { Name = r.Name })
    }) 
```

LINQ to Entities 无法在运行时执行此操作。在 Visual Studio 调试器中，异常消息是“不支持指定的方法”。在 LinqPad 中，内部异常是“不支持嵌套查询。Operation1='Case' Operations2='Collect'”。

任何想法如何解决这个问题？我宁愿不强制执行查询以获取内存中的对象，因为这个条件查询的目的是解决性能问题，所以据我所知，我确实需要在 L2E 查询的范围内解决这个问题.

**更新**：在我的实际应用程序中，投影类型不是匿名的。我在这里只使用匿名的，因为设计这个例子很方便。以类似的方式，真正的查询涉及许多附加属性，这意味着来自映射表的更多数据。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T07:00:14.620

你可以使用 union 做你想做的事：

```
var query1 = repository.CreateQuery<Reviews>()
                       .Where(/* criteria */);
var queryAnonimous = query1.Where(m=>m.IsAnonymous)
                           .Select(m => new
                                        {
                                            ID = m.ID,
                                            Reviewers = m.Reviewers.Take(1).Select(r => new { Name = "Anonymous" })        
                                        })

var queryNotAnonymous =  query1.Where(m=>!m.IsAnonymous)
                               .Select(m => new
                                            {
                                                ID = m.ID,
                                                Reviewers = m.Reviewers.Select(r => new { Name = r.Name })
                                            })
var unionQuery = queryAnonimous.union(queryNotAnonymous); 
```

# django - 通过选择更改查询参数

> ID：13942096
> 
> 赞同：0
> 
> 时间：2012-12-18T21:53:34.740
> 
> 标签：django, django-forms, django-views

我有一个模型菜和一个模型菜单：

```
class MenuItem(models.Model):
    dish_name=models.TextField(unique=False)
    price=models.DecimalField(max_digits=5,decimal_places=2,blank=True)
    main_ngredient=models.TextField(unique=False)
    course=models.CharField(max_length=100)
    menu=models.ForeignKey('Menu')
    def __unicode__(self):
        return name
class Menu(models.Model):
    restaurant=models.TextField(unique=False)
    year=models.IntegerField(unique=False)
    location=models.TextField(unique=False)
    status=models.CharField(unique=False,max_length=20)
    NYPLid=models.IntegerField(unique=True)
    def __unicode__(self):
        return restaurant
    def __period__(self):#adapted from http://stackoverflow.com/questions/2272149/round-to-5or-other-number-in-python
    p=int(10*round(float(self.year)/10))
    if p < self.year:
        return "%s-%s"%(p,p+5)
    else:
        return "%s-%s"%(p-5,p)
    period=property(__period__) 
```

我有一个视图搜索：

```
def search(request):
    errors = []
    form = SearchForm(request.GET)
    if form.is_valid():
        cd = form.cleaned_data
        row = cd['row']
        query = cd['query']
        dish_row_dict = {"dish_name":'name__icontains=query',
    "main_ingredient":"ingredient__icontains=query",
    "course":"course__iexact=query"
    }
        menu_row_dict = {"year":'year__exact=query',
    "period":'period__exact=query',
    "location":'location__icontains=query',
    "restaurant":"restaurant__icontains=query",
    }
        if row in dish_row_dict:
            dishes = MenuItem.objects.filter(eval(dish_row_dict[row]))
        elif row in menu_row_dict:
            dishes = MenuItem.objects.filter(eval("menu__%s"%(menu_row_dict[row])))
        return render_to_response("search_returns.html",{"dishes":dishes})
    return render_to_response("search_page.html",{"form":form}) 
```

我有一个表格 SearchForm：

```
class SearchForm(forms.Form):
    row = forms.ChoiceField([("dish_name","Dish Name"),("year","Year"),
("period","Five-Year Period"),("location","Location"),
("main_ingredient","Main Ingredient"),("course","Course or Dish Type"),("restaurant","Restaurant"),])
    query = forms.CharField()) 
```

我希望用户能够选择其中一个选项，然后根据他们的选择进行查询（例如，如果他们选择“菜名”，则按菜名搜索。）我现在做事的方式，使用字典+eval() 不起作用（我知道，我知道，eval = bad，但我不知道该怎么做！）

我觉得这不是什么异国情调或不寻常的事情，但如果我能在网上找到任何关于它的东西，我会被诅咒的。我怀疑答案与 MultiValueField 或类似的东西有关，但我真的不明白如何使它工作。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T10:38:03.803

您可以忘记`=query`and`eval()`部分并简单地构建一个 dict，并将其作为 kwargs 传递：

```
filter_keys = {
    # menuitem queries
    "dish_name":'name__icontains',
    "main_ingredient": "ingredient__icontains",
    "course": "course__iexact",
    # menu queries
    "year": 'menu__year__exact',
    "period": 'menu__period__exact',
    "location": 'menu__location__icontains',
    "restaurant": "menu__restaurant__icontains",
}

...

if row in filter_keys:
    dishes = MenuItem.objects.filter(**{filter_keys[row]: query}) 
```

这`**`是一种将命名参数作为字典传递的 Python 方式。

# ruby-on-rails - Rails 显示多个相同的记录

> ID：13942098
> 
> 赞同：1
> 
> 时间：2012-12-18T21:53:35.753
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我在下面提供我的活动记录。在 view/users/show 我想通过蓝图显示用户正在处理的任何项目。当用户向一个项目添加多个蓝图时，该项目会多次显示。我尝试了一些 validate_uniqueness 选项无济于事。

```
class Blueprint < ActiveRecord::Base
  attr_accessible :id, :name, :project_id, :user_id, :loc
  belongs_to :user
  belongs_to :project
  has_many :comments
end

class Project < ActiveRecord::Base
  attr_accessible :id, :name
  has_many :blueprints
  has_many :users, :through => :blueprints
  has_many :comments
end

class User < ActiveRecord::Base
  attr_accessible :id, :name
  has_many :blueprints
  has_many :projects, :through => :blueprints
end 
```

这是显示同一项目的多个值的视图代码。

```
 <% @user.blueprints.each do |blueprint| %>
      <tr>
        <td><%= link_to blueprint.project.name, project_path(blueprint.project) %></td>
      </tr>
    <% end %> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:04:47.643

尝试将`uniq`选项设置为这样`true`的用户`projects`关系

```
class User < ActiveRecord::Base
  has_many :projects, :through => :blueprints, :uniq => true
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T01:04:32.500

既然您已经在用户中拥有项目关联，为什么不循环浏览用户的项目而不是蓝图。

```
<% @user.projects.each do |project| %>
      <tr>
        <td><%= link_to project.name, project_path(project) %></td>
      </tr>
    <% end %> 
```

# scala - 在scala中折叠列表的有效方法，同时避免分配和变量

> ID：13942106
> 
> 赞同：4
> 
> 时间：2012-12-18T21:53:55.270
> 
> 标签：scala, optimization, functional-programming

我的列表中有一堆项目，我需要分析内容以找出其中有多少是“完整的”。我从分区开始，但后来意识到我不需要两个列表，所以我切换到折叠：

```
val counts = groupRows.foldLeft( (0,0) )( (pair, row) => 
     if(row.time == 0) (pair._1+1,pair._2) 
     else (pair._1, pair._2+1)
   ) 
```

但是对于很多并行用户，我有很多行要经过，这导致了很多 GC 活动（我的假设...... GC*可能*来自其他东西，但我怀疑这是因为我理解它将在每个折叠的项目上分配一个新的元组）。

目前，我已将其重写为

```
var complete = 0
var incomplete = 0
list.foreach(row => if(row.time != 0) complete += 1 else incomplete += 1) 
```

它修复了 GC，但引入了 vars。

我想知道是否有一种方法可以在不使用 vars 的同时又不滥用 GC 来做到这一点？

**编辑：**

强烈要求我收到的答案。var 实现在大型列表上似乎要快得多（比如 40%），甚至比功能更强大但应该等效的尾递归优化版本要快得多。

dhg 的第一个答案似乎与尾递归的性能相当，这意味着尺寸传递是超级高效的......事实上，当优化时，它的运行速度比尾递归的快一点我的硬件。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T22:44:34.257

最干净的两遍解决方案可能只是使用内置`count`方法：

```
val complete = groupRows.count(_.time == 0)
val counts = (complete, groupRows.size - complete) 
```

但是，如果您`partition`在迭代器上使用，您可以一次性完成：

```
val (complete, incomplete) = groupRows.iterator.partition(_.time == 0)
val counts = (complete.size, incomplete.size) 
```

这是有效的，因为新返回的迭代器在幕后链接，调用`next`一个迭代器会导致它向前移动原始迭代器，直到找到匹配的元素，但它会记住另一个迭代器的不匹配元素，这样它们就不会需要重新计算。

* * *

一次性解决方案示例：

```
scala> val groupRows = List(Row(0), Row(1), Row(1), Row(0), Row(0)).view.map{x => println(x); x}
scala> val (complete, incomplete) = groupRows.iterator.partition(_.time == 0)
Row(0)
Row(1)
complete: Iterator[Row] = non-empty iterator
incomplete: Iterator[Row] = non-empty iterator
scala> val counts = (complete.size, incomplete.size)
Row(1)
Row(0)
Row(0)
counts: (Int, Int) = (3,2) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T02:15:46.953

我看到您已经接受了一个答案，但您正确地提到该解决方案将遍历列表两次。有效地做到这一点的方法是递归。

```
def counts(xs: List[...], complete: Int = 0, incomplete: Int = 0): (Int,Int) = 
  xs match {
    case Nil => (complete, incomplete)
    case row :: tail => 
      if (row.time == 0) counts(tail, complete + 1, incomplete)
      else               counts(tail, complete, incomplete + 1)
  } 
```

这实际上只是一个自定义的`fold`，除了我们使用 2 个累加器，它们只是`Int`s （原语）而不是元组（引用类型）。它也应该与 vars 的 while 循环一样有效 - 事实上，字节码应该是相同的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T22:46:54.120

也许只有我一个人，但如果可用的话，我更喜欢使用各种专门的折叠（.size、.exists、.sum、.product）。我发现它比一般折叠的重型功能更清晰，更不容易出错。

```
val complete = groupRows.view.filter(_.time==0).size
(complete, groupRows.length - complete) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T01:03:55.143

好的，受上述答案的启发，但我真的想只传递一次列表并避免 GC，我决定，面对缺乏直接 API 支持，我会将其添加到我的中央库代码中：

```
class RichList[T](private val theList: List[T]) {
  def partitionCount(f: T => Boolean): (Int, Int) = {
    var matched = 0
    var unmatched = 0
    theList.foreach(r => { if (f(r)) matched += 1 else unmatched += 1 })
    (matched, unmatched)
  }
}

object RichList {
  implicit def apply[T](list: List[T]): RichList[T] = new RichList(list)
} 
```

然后在我的应用程序代码中（如果我导入了隐式），我可以编写无变量表达式：

```
val (complete, incomplete) = groupRows.partitionCount(_.time != 0) 
```

并得到我想要的：一个优化的对 GC 友好的例程，它可以防止我用 var 污染程序的其余部分。

但是，我随后看到了 Luigi 的基准，并将其更新为：

*   使用更长的列表，以便列表中的多次通过在数字中更明显
*   在所有情况下都使用布尔函数，以便我们公平地比较事物

[http://pastebin.com/2XmrnrrB](http://pastebin.com/2XmrnrrB)

var 实现肯定要快得多，即使 Luigi 的例程应该是相同的（正如人们对优化尾递归所期望的那样）。令人惊讶的是，dhg 的双通道原始版本与尾递归版本一样快（如果编译器优化打开，则速度稍快）。我不明白为什么。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-19T03:35:02.203

这个怎么样？没有进口税。

```
import scala.collection.generic.CanBuildFrom
import scala.collection.Traversable
import scala.collection.mutable.Builder

case class Count(n: Int, total: Int) {
  def not = total - n
}
object Count {
  implicit def cbf[A]: CanBuildFrom[Traversable[A], Boolean, Count] = new CanBuildFrom[Traversable[A], Boolean, Count] {
    def apply(): Builder[Boolean, Count] = new Counter
    def apply(from: Traversable[A]): Builder[Boolean, Count] = apply()
  }
}
class Counter extends Builder[Boolean, Count] {
  var n = 0
  var ttl = 0
  override def +=(b: Boolean) = { if (b) n += 1; ttl += 1; this }
  override def clear() { n = 0 ; ttl = 0 }
  override def result = Count(n, ttl)
}

object Counting extends App {
  val vs = List(4, 17, 12, 21, 9, 24, 11)
  val res: Count = vs map (_ % 2 == 0)
  Console println s"${vs} have ${res.n} evens out of ${res.total}; ${res.not} were odd."
  val res2: Count = vs collect { case i if i % 2 == 0 => i > 10 }
  Console println s"${vs} have ${res2.n} evens over 10 out of ${res2.total}; ${res2.not} were smaller."
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-18T22:15:14.387

像这样使用可变累加器模式会稍微整洁一些，特别是如果您可以重复使用您的累加器：

```
case class Accum(var complete = 0, var incomplete = 0) {
  def inc(compl: Boolean): this.type = {
    if (compl) complete += 1 else incomplete += 1
    this
  }
}
val counts = groupRows.foldLeft( Accum() ){ (a, row) => a.inc( row.time == 0 ) } 
```

如果你真的想，你可以将你的变量隐藏为私有；如果不是，您仍然比使用 vars 的模式更加独立。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-18T22:21:19.467

您可以像这样使用差异来计算它：

```
def counts(groupRows: List[Row]) = {
  val complete = groupRows.foldLeft(0){ (pair, row) => 
    if(row.time == 0) pair + 1 else pair
  }
  (complete, groupRows.length - complete)
} 
```

# video - What type of file of subtitles is this?

> ID：13942112
> 
> 赞同：1
> 
> 时间：2012-12-18T21:54:26.690
> 
> 标签：video, subtitle, formats, srt

Quick question, i know that this isnt .srt but i cant find which format is this, can anyone help with this markup?

Ps: they are portuguese.

```
0001 00:01:06:10 00:01:09:00

O crescimento da Internet mudou
as pequenas Startups para

0002 00:01:09:02 00:01:11:22

as empresas mais influentes
no mundo. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:00:02.700

That looks like final cut pro subtitle, used for syncing the subtitles with the movie/clip example:

[Subtitle Example](http://i.stack.imgur.com/FQ6ab.gif)

# wcf - Silverlight 不喜欢我的 WCF MessageContract。为什么？

> ID：13942113
> 
> 赞同：3
> 
> 时间：2012-12-18T21:54:28.047
> 
> 标签：wcf, silverlight-4.0

我正在尝试使用以下内容通过 Silverlight 客户端上传文件`MessageContract`：

```
[MessageContract]
public class CategoryClientFileTransferMC : IDisposable
{
    /// <summary>
    /// CategoryID - Category identity.
    /// </summary>
    [MessageHeader(MustUnderstand = true)]
    public int CategoryID;

    /// <summary>
    /// ID - File identifier.
    /// </summary>
    [MessageHeader(MustUnderstand = true)]
    public string ID;

    /// <summary>
    /// Length - File length in bytes.
    /// </summary>
    [MessageHeader(MustUnderstand = true)]
    public long Length;

    /// <summary>
    /// FileByteStream - File stream.
    /// </summary>
    [MessageBodyMember(Order = 1)]
    public Stream FileByteStream;

    /// <summary>
    /// Dispose the contract.
    /// </summary>
    public void Dispose()
    {
        if (FileByteStream != null)
        {
            FileByteStream.Close();
            FileByteStream = null;
        }
    }
} 
```

我的问题是在客户端生成的操作方法只需要一个参数；一个字节数组，称为`FileByteStream`. 在我创建的其他（非 Silverlight）客户端中，它也要求输入`MemberHeader`字段。如果不指定这些标头，服务器将不知道如何处理该文件。调用操作时如何设置这些标头？

另外，有没有更好的方法从 Silverlight 客户端上传文件？这是一个巨大的头痛。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T23:53:32.207

WCF 客户端的 Silverlight 子集不支持该`[MessageHeader]`属性。您仍然可以设置消息头，但它不像其他平台那样简单。基本上，在进行调用之前，您需要使用操作上下文设置标头，如下例所示：

```
var client = new SilverlightReference1.MyClient();
using (new OperationContextScope(client.InnerChannel))
{
    string contractNamespace = "http://tempuri.org/";
    OperationContext.Current.OutgoingMessageHeaders.Add(
        MessageHeader.CreateHeader("CategoryId", contractNamespace, 1));
    OperationContext.Current.OutgoingMessageHeaders.Add(
        MessageHeader.CreateHeader("ID", contractNamespace, "abc123"));
    OperationContext.Current.OutgoingMessageHeaders.Add(
        MessageHeader.CreateHeader("Length", contractNamespace, 123456L));
    client.UploadFile(myFileContents);
} 
```

`contractNamespace`消息头字段的 XML 命名空间在哪里（IIRC 它们默认与服务合同相同）。您可以使用 Fiddler 和 WCF 测试客户端之类的东西来查看那里使用了哪个命名空间。

# git - 更新后 Git Hook 找不到目录

> ID：13942116
> 
> 赞同：1
> 
> 时间：2012-12-18T21:54:42.413
> 
> 标签：git, msysgit, githooks

我正在设置一个环境，我可以将在我的工作站上本地完成的更改推送到“Hub”存储库（这是一个远程），然后更新后挂钩将自动更新我的登台网站，即“Prime”。我这样做是为了在我推送到远程集线器时可以看到我的更改会自动反映在我的暂存站点中。

此设置基于[本文](http://joemaller.com/990/a-web-focused-git-workflow/)。我的服务器是 Windows 2012，我在服务器和我的工作站（Windows 7）上都使用 MSysGit。

当我手动执行所有操作时，一切正常 - 从我的本地存储库推送到集线器，然后手动获取/合并到素数。我的问题是当我尝试通过更新后挂钩完成获取/合并时。

当我对集线器进行更改时，我得到的输出是：

```
c:\Code4X\GIT\stage>git push stage master
Counting objects: 11, done.
Delta compression using up to 8 threads.
Compressing objects: 100% (6/6), done.
Writing objects: 100% (6/6), 518 bytes, done.
Total 6 (delta 5), reused 0 (delta 0)
remote:
remote: **** Pulling changes into Live [Stage's post-update hook]
remote:
remote: hooks/post-update: line 12: cd: /c/websites/myproject.staging: No
such file or directory
To w:/stage.git
   ce1e2ea..93e11f4  master -> master 
```

我的更新后挂钩是：

```
#!/bin/sh

echo
echo "**** Pulling changes into Live [Stage's post-update hook]"
echo

cd /c/websites/myproject.staging || exit
unset GIT_DIR
git pull stage master

exec git update-server-info 
```

我可以毫无问题地启动 bash cmd shell 和 cd 到目录，所以我不确定问题是什么。

我也试过：

*   在我的 PATH 中包括 git\cmd
*   将我试图 cd 到的路径括在引号 (") 中
*   让我的 shebang 指向 #!/c/progra~1/git/bin/sh

希望这是显而易见的。关于问题是什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T00:57:04.510

我*刚刚*在我的一个项目上做了一些类似的事情。看起来你有正确的想法。

尝试使用相对路径。

```
#!/bin/sh
unset GIT_DIR
cd ..
# You are now in the project root
cd ../project.prime
git pull stage master 
```

我想我会让你知道我在做什么，因为这可能会帮助你。每次更新 repo 时，此脚本将强制更新工作副本：

```
#!/bin/sh
unset GIT_DIR
cd ..
git checkout -f 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:00:11.740

您用作参考的文章似乎假设集线器和主服务器位于同一主机上。也许您在不同的主机上拥有这些，因此意味着更新后挂钩在真正没有 /c/websites/myproject.staging 的地方运行（它在接收推送的远程执行）？

此外，虽然作者避免推送到非裸存储库的建议通常是有效的，但以这种方式编写拉取脚本大致相当于这样做，因此可能将其更改为将推送链接到集线器上的远程（指向主要) 在更新后？这将允许它与位于不同主机上的集线器和主服务器一起使用，并完全消除挂钩中导航目录的需要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-08T13:51:00.093

[我在这里](http://debuggable.com/posts/git-tip-auto-update-working-tree-via-post-receive-hook:49551efe-6414-4e86-aec6-544f4834cda3)找到了答案：在钩子后运行的任何 git 命令之前使用“env -i”。因此：

```
cd /path/to/other/repo && env -i git pull 
```

如帖子中所述，原因是 post-hook 命令使用 GIT_DIR 环境变量集运行，因此运行的任何 git 命令都会查看您的旧仓库，而不是您所在的仓库。“env -i”是取消设置该变量的一种方法。

# bash - 用字符串评估变量

> ID：13942118
> 
> 赞同：1
> 
> 时间：2012-12-18T21:54:49.933
> 
> 标签：bash, eval

我是 bash 的新手，但这应该是一个非常常见的场景。我有以下 bash “伪脚本”

```
VAR1=oldValue
VAR2=var2

COMMAND="-option1 "$VAR1" -option2 "$VAR2

run $COMMAND $OTHERSTUFF

VAR1=newValue

run $COMMAND $OTHERSTUFF
#$COMMAND is stil using oldValue 
```

我应该使用 eval 为 COMMAND 变量生成一个新值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:06:09.060

$COMMAND 具有旧值，因为在 BASH 中 $VAR1 和 $VAR2 在最初分配时会替换它们的实际值。如果您希望 COMMAND 使用新的 VAR1 值更新，您可以这样做：

```
run -option1="$VAR1" -option2="$VAR2" $otherStuff 
```

eval() 效率低下（因为您要解析某些代码两次），必须小心使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T00:18:34.837

使用数组

```
options=( -option1 x -option2 y )

options[1]=oldValue
options[3]=var2
run "${options[@]}" "$OTHERSTUFF"

options[1]=newValue
run "${options[@]}" "$OTHERSTUFF" 
```

如果您不想直接分配给数组，请使用函数来封装血淋淋的细节：

```
initialize_options() { options=( -option1 x -option2 y ); }

set_first()  { set_value 1 "$1"; }
set_second() { set_value 3 "$1"; }
set_value()  { option[$1]="$2"; }

initialize_options

set_first oldValue
set_second var2
run "${options[@]}" "$OTHERSTUFF"

set_first newValue
run "${options[@]}" "$OTHERSTUFF" 
```

* * *

我突然想到——这可能更简单：

```
do_run() { run -option1 "$1" -option2 "$2" "$OTHERSTUFF"; }

VAR1=oldValue
VAR2=var2
do_run "$VAR1" "$VAR2"

VAR1=newValue
do_run "$VAR1" "$VAR2" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T22:00:03.260

我自己是新手，但我认为问题在于，命令变量不会改变，因为您必须将其设置为新值。在 $command 中将保留您的旧内容，否则

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T22:02:20.150

您应该将设置为 COMMAND 的值放在单引号中，以便不会在现场插入变量。然后在运行 $COMMAND 时使用 eval，以便在 COMMAND 内插到该字符串之后内插 COMMAND 中的字符串，如下所示：

```
 var1=hello

cmd='echo $var1'

eval $cmd

var1=goodbye

eval $cmd 我必须说这是一种非常不规则的做事方式。您应该简单地重置 COMMAND 而不是在其中嵌入某种对变量的伪动态引用。

```

# c# - 安装 Framework 4.5 时以 .NET Framework 4 为目标

> ID：13942123
> 
> 赞同：13
> 
> 时间：2012-12-18T21:55:10.090
> 
> 标签：c#, visual-studio-2010, .net-4.0, .net-4.5, .net-framework-version

我的计算机上安装了 VS2010 和 VS2012，并安装了 .NET Framework 4.0，然后我将其升级到 .NET Framework 4.5。但是，我仍在开发需要在 .NET Framework 4.0 上运行的应用程序。该项目表示它的目标是 .NET Framework 4（客户端配置文件），这些程序集甚至指向 Referenced Assemblies 下的 .NET Framework 4.0 文件夹。当我将此应用程序移动到只有 4.0 的机器上时，问题就出现了，它不会启动并出现错误，直接的问题是导致`WindowState={Binding WindowState}`您无法在 4.0 中执行但您可以在 4.5 中执行的异常。我需要这个来在我的开发框上抛出异常，为什么不呢？我的假设是，尽管我尽了最大努力，但它使用 4.5 dll（如果存在）。如何在不卸载 4.5 的情况下让它真正使用 4.0？

**更新**

要重现此安装 .NET Framework 4.5 并创建一个面向 .NET Framework 4.0 的 WPF 项目。将 WindowState 绑定到 VM 中的属性或后面的代码使该属性具有公共获取和私有集。.NET Framework 4.5 可以很好地处理这个问题，即使 Mode=TwoWay 必须忽略设置的 .NET Framework 4 不会并引发异常：“TwoWay 或 OneWayToSource 绑定无法对类型的只读属性 'State' 起作用.. ."。在带有 .NET Framework 4.5 的盒子上，它就像一个魅力，在只有 .NET Framework 4.0 的机器上试一试，它就爆炸了……那么，关于在安装 4.5 时如何真正定位 4.0 有什么想法吗？

在此处向 MS 报告错误：[https ://connect.microsoft.com/VisualStudio/feedback/details/774694/targeting-net-framework-4-0-when-4-5-doesnt-seem-to-work](https://connect.microsoft.com/VisualStudio/feedback/details/774694/targeting-net-framework-4-0-when-4-5-doesnt-seem-to-work)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T19:23:12.560

这似乎是 .NET Framework 4.5 中的一个错误，它应该引发异常，但安装了 .NET Framework 4.5 后，无法让您的应用程序在 .NET Framework 4.0 上运行，它将始终使用 4.5。

有关更多信息，请参阅此报告的错误： [http ://connect.microsoft.com/VisualStudio/feedback/details/773682/wpf-property-with-private-setter-is-updated-by-a-twoway-binding](http://connect.microsoft.com/VisualStudio/feedback/details/773682/wpf-property-with-private-setter-is-updated-by-a-twoway-binding)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T22:38:52.640

是时候提出这个问题了。我不是 WPF 专家，不太喜欢这类问题，调试依赖属性问题是一场噩梦。但我很确定你在追鬼。WindowState 一直是 3.0 的依赖属性，在 4.5 中我可以看到或听说过没有什么特别的事情发生。

你得到了一些没有人能看到的错误信息，这让你确信它与绑定有关。我来自向我展示的州密苏里州。好吧，离威斯康星州够近了。

花更多的时间在代码上，为您提供可靠的异常消息和堆栈跟踪，帮助您诊断部署到的机器上的错误，没有调试器的机器可以帮助您找出问题所在。为此，您可以为 AppDomain.CurrentDomain.UnhandledException 事件编写事件处理程序。记录或显示 e.ExceptionObject.ToString() 返回值。它为您提供异常消息和神圣堆栈跟踪。如果那没有帮助，请用您所看到的内容更新您的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-10-21T13:07:01.193

.Net 4.5 用新的同名库替换了 .net 4.0，这些库实际上有一些修复。这是简短的回答。

与早期版本不同，将 .net 4 更新到 4.5 会替换文件，而不是并排添加文件。即使你有这样的文件夹 Windows/Microsoft.Net/Framework/v40/ ，更新后，这个文件夹也会发生变化。文件已更改，在 .net 中处理了一些错误，无需开发人员关注。

如何使用 .net 4.5 定位 4.0 框架？我还不知道，但我还在挖掘

建议阅读此主题：

斯科特汉塞尔曼： [http ://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx](http://www.hanselman.com/blog/NETVersioningAndMultiTargetingNET45IsAnInplaceUpgradeToNET40.aspx)

里克·斯特拉尔： [http ://weblog.west-wind.com/posts/2012/Mar/13/NET-45-is-an-inplace-replacement-for-NET-40](http://weblog.west-wind.com/posts/2012/Mar/13/NET-45-is-an-inplace-replacement-for-NET-40)

和我创建的类似问题： [https ://stackoverflow.com/questions/26483168/errors-on-net-4-0-dont-appear-on-net-4-5](https://stackoverflow.com/questions/26483168/errors-on-net-4-0-dont-appear-on-net-4-5)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T00:31:04.880

你说你不能在测试项目中重现这个。所以这意味着它可能在 4.0中*应该可以正常工作，对吧？*您可能有一些代码组合在 4.0 中因错误而崩溃，该错误已在 4.5 中修复。当您以 4.0 为目标时，只有当您尝试使用编译器可以确定在 4.0 中不受支持的 API/功能时，您才会收到警告。

由于一些罕见的错误，应该在 4.0 中工作的东西可能会崩溃，然后在 4.5 中修复。当您的 4.0 目标应用程序在 4.5 环境下运行时，它将受到 4.0 中存在的功能的错误修复的影响。

4.0 可能会有包含错误修复的更新，以便在用户出于某种原因反对时不需要升级 4.5。因此，它甚至可能不是 4.5 的更改，而只是巧合，一些用户没有 4.0 的所有可用更新（这些更新将累积包含在您的 4.5 中）。

这种情况我很少遇到，但有时确实会发生，这也是支持桌面 .NET 应用程序的人臭名昭著的原因，因为他们要求用户更新 .NET 框架，作为第一次尝试解决奇怪问题，然后再花时间进行故障排除。

有时会发生相反的情况。您的代码仅由于 .NET API 的某些错误或不良行为而起作用，后来更新将其清除，也许在某处加强安全性是我见过的最常见的事情，并且您的代码由于次要版本更新而突然中断.NET 的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-05-09T18:45:55.173

**解决方案：**

**在VS2015**之后安装**VS2017**时我遇到了同样的问题：Framework 4.0 刚刚从项目目标列表中消失。

跟随这里的一些评论，我尝试过使用 NuGet 包：*Microsoft.CodeDom.Providers.DotNetCompilerPlatform* 1.0.4 和 bin fix for 1.0.1。

**不要那样**做！对于同一个项目，我的构建时间增加了约 300%。这是一场灾难。

> 我看到 4.5 是 4.0 的“就地替换”但是这并不能解释为什么我在目标框架组合中看不到这两个选项。

我在网上读到同样的咒语。这根本不是问题的答案。框架 4.0 是任何工业机械相关软件**的必备**- 因为它运行在 Windows XP 上，而 .NET 4.5。在我的场景中是无用的，可能对于许多其他现实生活中的东西。

解决方案很简单：您只需从官方网页 下载并**安装 Visual Studio 2013 Express ：** [https ://www.microsoft.com/en-us/download/details.aspx?id=44914](https://www.microsoft.com/en-us/download/details.aspx?id=44914)

安装好之后，只要打开你的**VS2015**，你就会再次看到**4.0**。

[![在此处输入图像描述](../Images/54417db0117357dd0d72f76bcc37eacd.png)](https://i.stack.imgur.com/hevL6.png)

......“就地替换......”我的......

* * *

这是我在重复问题上给出的答案的重新发布。我在这里发帖是因为这个帖子得到了更多的关注，而这里的现有答案没有解决这个问题。

# java - 如何从更大的字符串java中提取特定的子字符串

> ID：13942127
> 
> 赞同：-2
> 
> 时间：2012-12-18T21:55:24.433
> 
> 标签：java, regex, substring

我有以下字符串：

```
String n = "(.........)(......)(.......)(......) etc" 
```

我想写一个方法来填充 a之间`List<String>`的每个子字符串和。先感谢您！`n``(``)`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T22:01:15.457

它可以在一行中完成：

```
String[] parts = input.replaceAll("(^.*\\()|(\\).*$)", "").split("\\)\\("); 
```

调用`replaceAll()`剥离租赁和尾随括号（加上第一个/最后一个括号之前/之后的任何其他垃圾字符），然后你就`split()`在括号对上。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T22:00:29.697

我对 String 方法不是很熟悉，所以我确信有一种方法可以完成，而无需自己编写代码，只需使用一些花哨的方法，但你可以：

经过测试，工作 100% 完美 :)

```
String string = "(stack)(over)(flow)";
ArrayList<String> subStrings = new ArrayList<String>();
for(int c = 0; c < string.length(); c++) {
    if(string.charAt(c) == '(') {
        c++;
        String newString = "";
        for(;c < string.length() && string.charAt(c) != ')'; c++) {
            newString += string.charAt(c);
        }
        subStrings.add(newString);
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T22:20:11.253

我制作了这个正则表达式版本，但有点冗长。我确信它可以改进。（注意：“n”是您的输入字符串）

```
 Pattern p = Pattern.compile("\\((.*?)\\)");
    Matcher matcher = p.matcher(n);
    List<String> list = new ArrayList<String>();
    while (matcher.find())
    {
        list.add(matcher.group(1));  // 1 == stuff between the ()'s
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T22:01:36.457

如果 (...) 对没有嵌套，您可以在 Java 中使用正则表达式。看看 java.util.regex.Pattern 类。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-18T22:04:32.737

这应该有效：

```
 String in = "(bla)(die)(foo)";
    in = in .substring(1,in.length()-1);
    String[] out = in .split(Pattern.quote(")(")); 
```

# python - 如何将数组从 C 传递到嵌入式 python 脚本

> ID：13942128
> 
> 赞同：13
> 
> 时间：2012-12-18T21:55:30.287
> 
> 标签：python, embedding, python-c-api

我遇到了一些问题，需要一些帮助。我有一段代码，用于嵌入 python 脚本。这个 python 脚本包含一个函数，它期望接收一个数组作为参数（在这种情况下，我在 python 脚本中使用 numpy 数组）。我想知道如何将一个数组从 C 传递到嵌入式 python 脚本作为脚本中函数的参数。更具体地说，有人可以给我看一个简单的例子。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-18T22:04:23.540

真的，这里最好的答案可能是只使用`numpy`数组，即使是从你的 C 代码中。但如果这不可能，那么您将遇到与在 C 类型和 Python 类型之间共享数据的任何代码相同的问题。

一般来说，在 C 和 Python 之间共享数据至少有五个选项：

1.  创建`list`要传递的 Python 或其他对象。
2.  定义一个新的 Python 类型（在您的 C 代码中）来包装和表示数组，使用您在 Python 中为序列对象定义的相同方法（`__getitem__`等）。
3.  将指向数组的指针转换为`intptr_t`，或显式`ctypes`类型，或者不进行转换；然后`ctypes`在 Python 端使用来访问它。
4.  将指向数组的指针转换为`const char *`并将其作为 a `str`（或，在 Py3 中，`bytes`）传递，并在 Python 端使用`struct`or`ctypes`来访问它。
5.  创建一个与`buffer`协议匹配的对象，然后在 Python 端再次使用`struct`or `ctypes`。

在您的情况下，您想`numpy.array`在 Python 中使用 s 。因此，一般情况变为：

1.  创建一个`numpy.array`通过。
2.  （可能不合适）
3.  将指针按原样传递给数组，并从 Python 中用于`ctypes`将其`numpy`转换为可以转换为数组的类型。
4.  将指向数组的指针转换`const char *`为 a `str`（或者，在 Py3 中，`bytes`），它已经是`numpy`可以转换为数组的类型。
5.  创建一个与`buffer`协议匹配的对象，我相信`numpy`它可以直接转换。

对于 1，这里是如何用 a 来做的`list`，只是因为它是一个非常简单的例子（而且我已经写过了……）：

```
PyObject *makelist(int array[], size_t size) {
    PyObject *l = PyList_New(size);
    for (size_t i = 0; i != size; ++i) {
        PyList_SET_ITEM(l, i, PyInt_FromLong(array[i]));
    }
    return l;
} 
```

这是`numpy.array`等效的（假设您可以依赖 C`array`不被删除 - 请参阅在文档中[创建数组以获取有关您的选项的更多详细信息）：](http://docs.scipy.org/doc/numpy-1.6.0/reference/c-api.array.html#creating-arrays)

```
PyObject *makearray(int array[], size_t size) {
    npy_int dim = size;
    return PyArray_SimpleNewFromData(1, &dim, (void *)array);
} 
```

无论如何，无论如何你这样做，你最终会得到一个看起来像`PyObject *`来自 C 的东西（并且有一个引用计数），所以你可以将它作为函数参数传递，而在 Python 端它看起来像一个`numpy.array`, `list`, `bytes`, 或其他任何合适的。

现在，您实际上如何传递函数参数？[好吧，您在评论中引用的Pure Embedding](http://docs.python.org/extending/embedding.html#pure-embedding)中的示例代码显示了如何执行此操作，但并没有真正解释发生了什么。实际上，扩展文档中的解释比嵌入文档要多，特别是[Calling Python Functions from C](http://docs.python.org/extending/extending.html#calling-python-functions-from-c)。另外，请记住，[标准库源代码](http://hg.python.org/cpython/file/2.7/Modules)充满了这样的示例（尽管其中一些不是因为优化，或者只是因为它们没有被更新以利用新的简化 C API 功能）。

跳过关于从 Python 获取 Python 函数的第一个示例，因为大概您已经拥有了。第二个示例（以及与之相关的段落）显示了一种简单的方法：使用[`Py_BuildValue`](http://docs.python.org/c-api/arg.html#Py_BuildValue). 所以，假设我们想调用一个你已经存储在上面的函数返回`myfunc`的列表的函数。这是你要做的：`mylist``makelist`

```
if (!PyCallable_Check(myfunc)) {
    PyErr_SetString(PyExc_TypeError, "function is not callable?!");
    return NULL;
}
PyObject *arglist = Py_BuildValue("(o)", mylist);
PyObject *result = PyObject_CallObject(myfunc, arglist);
Py_DECREF(arglist);
return result; 
```

当然，如果你确定你有一个有效的可调用对象，你可以跳过可调用检查。（如果合适的话，通常最好在第一次得到 时检查`myfunc`，因为这样可以提供更早和更好的错误反馈。）

如果您想真正了解发生了什么，请尝试不使用`Py_BuildValue`. 正如文档所说， to 的第二个参数`[PyObject_CallObject][6]`是一个元组，`PyObject_CallObject(callable_object, args)`相当于`apply(callable_object, args)`，相当于`callable_object(*args)`. 所以，如果你想`myfunc(mylist)`在 Python 中调用，你必须有效地将它转换成 C，`myfunc(*(mylist,))`这样你就可以将它翻译成 C。你可以`tuple`像这样构造一个：

```
PyObject *arglist = PyTuple_Pack(1, mylist); 
```

但通常，`Py_BuildValue`它更容易（特别是如果您还没有将所有内容打包为 Python 对象），并且代码中的意图更清晰（就像使用`PyArg_ParseTuple`比`tuple`在另一个方向使用显式函数更简单和清晰一样）。

那么，你是怎么得到的`myfunc`呢？好吧，如果您已经从嵌入代码创建了函数，只需保留指针即可。如果您希望它从 Python 代码中传递，这正是第一个示例所做的。例如，如果您想从模块或其他上下文中按名称查找它，具体类型[`PyModule`](http://docs.python.org/c-api/module.html)和抽象类型的 API[`PyMapping`](http://docs.python.org/c-api/mapping.html)非常简单，如何将 Python 代码转换为等效的 C 代码通常很明显，即使结果大多是丑陋的样板。

综上所述，假设我有一个 C 整数数组，我想`import mymodule`调用一个`mymodule.myfunc(mylist)`返回 int 的函数。这是一个精简的示例（未经实际测试，也没有错误处理，但它应该显示所有部分）：

```
int callModuleFunc(int array[], size_t size) {
    PyObject *mymodule = PyImport_ImportModule("mymodule");
    PyObject *myfunc = PyObject_GetAttrString(mymodule, "myfunc");
    PyObject *mylist = PyList_New(size);
    for (size_t i = 0; i != size; ++i) {
        PyList_SET_ITEM(l, i, PyInt_FromLong(array[i]));
    }
    PyObject *arglist = Py_BuildValue("(o)", mylist);
    PyObject *result = PyObject_CallObject(myfunc, arglist);
    int retval = (int)PyInt_AsLong(result);
    Py_DECREF(result);
    Py_DECREF(arglist);
    Py_DECREF(mylist);
    Py_DECREF(myfunc);
    Py_DECREF(mymodule);
    return retval;
} 
```

如果您使用的是 C++，您可能想研究某种范围守卫/看门人/等。处理所有这些`Py_DECREF`调用，尤其是当您开始进行正确的错误处理时（这通常意味着`return NULL`通过函数进行的早期调用）。如果您使用的是 C++11 或 Boost，`unique_ptr<PyObject, Py_DecRef>`可能就是您所需要的。

但实际上，如果您打算进行大量 C<->Python 通信，那么减少所有丑陋样板的更好方法是查看所有为改进 Python 扩展而设计的熟悉框架——<a href="http: //www.cython.org" rel="noreferrer">Cython、[boost::python](http://www.boost.org/libs/python/doc/)等。即使您正在嵌入，您实际上也在做与扩展相同的工作，因此它们可以以相同的方式提供帮助。

就此而言，如果您搜索文档，其中一些*还*具有帮助嵌入部分的工具。例如，您可以使用 Cython 编写主程序，同时使用 C 代码和 Python 代码，以及`cython --embed`. 您可能想要交叉手指和/或牺牲一些鸡，但如果它有效，它会非常简单和富有成效。Boost 的开始并不是那么简单，但是一旦你把所有的东西放在一起，几乎所有的事情都会按照你期望的方式完成，并且可以正常工作，对于[嵌入](http://www.boost.org/doc/libs/1_52_0/libs/python/doc/tutorial/doc/html/python/embedding.html)和扩展来说都是如此。等等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T22:12:29.790

Python 函数需要传入一个 Python 对象。由于您希望该 Python 对象是一个 NumPy 数组，因此您应该使用其中一个[NumPy C-API 函数来创建数组](http://docs.scipy.org/doc/numpy/reference/c-api.array.html#creating-arrays)；[`PyArray_SimpleNewFromData()`](http://docs.scipy.org/doc/numpy/reference/c-api.array.html#PyArray_SimpleNewFromData)可能是一个好的开始。它将使用提供的缓冲区，而不复制数据。

也就是说，用 Python 编写主程序并为 C 代码使用 C 扩展模块几乎总是更容易。这种方法可以更轻松地让 Python 进行内存管理，并且该`ctypes`模块与 Numpy 的`cpython`扩展一起可以轻松地将 NumPy 数组传递给 C 函数。

# java - 不幸的是，“此处的应用程序名称”已停止 - 跟随教程

> ID：13942131
> 
> 赞同：0
> 
> 时间：2012-12-18T21:55:39.293
> 
> 标签：java, android

首先，我按照本教程进行操作：

[http://www.codeproject.com/Articles/102065/Android-A-beginner-s-guide?fid=1583614&df=90&mpp=10&noise=1&prof=True&sort=Position&view=Expanded&spc=None&fr=11#xx0xx](http://www.codeproject.com/Articles/102065/Android-A-beginner-s-guide?fid=1583614&df=90&mpp=10&noise=1&prof=True&sort=Position&view=Expanded&spc=None&fr=11#xx0xx)

我在这里检查了很多类似的帖子，但是所有的解决方案都是特定于代码的并且没有奏效。

我刚刚开始开发 android 应用程序，并找到了本教程。但是，当我启动它时，模拟器会给我这个应用程序已停止的消息。我的代码没有警告，所以我什至不知道从哪里开始。

这是我的代码：MainActivity.java

```
package com.example.test;

import android.app.Activity;
import android.os.Bundle;
import android.view.KeyEvent;
import android.view.Menu;
import android.view.View;
import android.widget.EditText;
import android.widget.TextView;

public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_main, menu);
    //return true;

//get the two controls we created earlier, also with the resource reference and the id
final TextView lv_View = (TextView)findViewById(R.id.lv_View);
lv_View.setText("4");
final EditText et_Text = (EditText)findViewById(R.id.et_Text);  

//add new KeyListener Callback (to record key input)
et_Text.setOnKeyListener(new View.OnKeyListener()
{
    //function to invoke when a key is pressed
    public boolean onKey(View v, int keyCode, KeyEvent event)
    {
        //check if there is 
        if (event.getAction() == KeyEvent.ACTION_DOWN)
        {
            //check if the right key was pressed
            if (keyCode == KeyEvent.KEYCODE_DPAD_CENTER)
            {
                                //add the text to the text view
                lv_View.setText(lv_View.getText() + ", " + 
                                 et_Text.getText());
                                //and clear the EditText control
                et_Text.setText("");
                return true;
            }
        }
        return false;
    }
});
return true;
} 
} 
```

测试清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.test"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.test.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

</manifest> 
```

字符串.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources>

<string name="app_name">test</string>
<string name="hello_world">&quot;I got it to work!&quot;</string>
<string name="menu_settings">Settings</string>

</resources> 
```

activity_main.xml（布局）

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity"
 >
 <edittext android:layout_height="wrap_content" 
         android:layout_width="fill_parent" android:textColor="#FF0000FF"
         android:id="@+id/et_Text" />
<textview android:layout_height="wrap_content" android:layout_width="fill_parent"
android:textColor="#FF00FF00" android:id="@+id/lv_View" />
<TextView
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:textColor="#FF00FF00"
    android:text="@string/hello_world" 
    />

</RelativeLayout> 
```

LogCat 报告

```
12-18 21:34:37.873: W/Trace(713): Unexpected value from nativeGetEnabledTags: 0
12-18 21:34:38.442: W/Trace(713): Unexpected value from nativeGetEnabledTags: 0
12-18 21:34:38.522: W/Trace(713): Unexpected value from nativeGetEnabledTags: 0
12-18 21:34:39.562: D/AndroidRuntime(713): Shutting down VM
12-18 21:34:39.602: W/dalvikvm(713): threadid=1: thread exiting with uncaught exception     (group=0x40a70930)
12-18 21:34:39.812: E/AndroidRuntime(713): FATAL EXCEPTION: main
12-18 21:34:39.812: E/AndroidRuntime(713): java.lang.RuntimeException: Unable to start     activity ComponentInfo{com.example.test/com.example.test.MainActivity}:     android.view.InflateException: Binary XML file line #7: Error inflating class edittext
12-18 21:34:39.812: E/AndroidRuntime(713):  at     android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.os.Handler.dispatchMessage(Handler.java:99)
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.os.Looper.loop(Looper.java:137)
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.app.ActivityThread.main(ActivityThread.java:5039)
12-18 21:34:39.812: E/AndroidRuntime(713):  at java.lang.reflect.Method.invokeNative(Native Method)
12-18 21:34:39.812: E/AndroidRuntime(713):  at java.lang.reflect.Method.invoke(Method.java:511)
12-18 21:34:39.812: E/AndroidRuntime(713):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-18 21:34:39.812: E/AndroidRuntime(713):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-18 21:34:39.812: E/AndroidRuntime(713):  at dalvik.system.NativeStart.main(Native Method)
12-18 21:34:39.812: E/AndroidRuntime(713): Caused by: android.view.InflateException: Binary XML file line #7: Error inflating class edittext
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:698)
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-18 21:34:39.812: E/AndroidRuntime(713):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.app.Activity.setContentView(Activity.java:1881)
12-18 21:34:39.812: E/AndroidRuntime(713):  at com.example.test.MainActivity.onCreate(MainActivity.java:17)
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.app.Activity.performCreate(Activity.java:5104)
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
12-18 21:34:39.812: E/AndroidRuntime(713):  ... 11 more
12-18 21:34:39.812: E/AndroidRuntime(713): Caused by: java.lang.ClassNotFoundException: Didn't find class "android.view.edittext" on path: /data/app/com.example.test-2.apk
12-18 21:34:39.812: E/AndroidRuntime(713):  at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
12-18 21:34:39.812: E/AndroidRuntime(713):  at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
12-18 21:34:39.812: E/AndroidRuntime(713):  at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.view.LayoutInflater.createView(LayoutInflater.java:552)
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:643)
12-18 21:34:39.812: E/AndroidRuntime(713):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:66)
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
12-18 21:34:39.812: E/AndroidRuntime(713):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
12-18 21:34:39.812: E/AndroidRuntime(713):  ... 21 more 
```

谢谢你的帮助！如果您需要更多信息，请告诉我。我仍然不确定解决这些错误需要什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T21:58:05.627

在您的布局 XML 文件中，您需要确保`textview`和`edittext`是 CamelCase，否则 android 将不知道如何扩展布局。这是因为 android layout inflater 尝试使用 XML 文件中指定的名称来实例化一个类。在这种情况下，`android.view.TextView`和`android.view.EditText`。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">

    <EditText android:layout_height="wrap_content" 
         android:layout_width="fill_parent"
         android:textColor="#FF0000FF"
         android:id="@+id/et_Text" />

    <TextView android:layout_height="wrap_content"
         android:layout_width="fill_parent"
         android:textColor="#FF00FF00"
         android:id="@+id/lv_View" />

    <TextView
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:layout_centerHorizontal="true"
         android:layout_centerVertical="true"
         android:textColor="#FF00FF00"
         android:text="@string/hello_world" />

</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T21:58:03.210

你需要注意你的拼写。像这样的事情是区分**大小写**的。

```
edittext 
```

应该

```
EditText 
```

与`textview`它正下方的元素相同。

它应该是

```
TextView 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T22:00:16.687

查看您的日志猫，我认为您收到此错误是因为`edittext`应该是`EditText`，并且理智`TextView`

# python - Perl / Python 快速参考？

> ID：13942132
> 
> 赞同：4
> 
> 时间：2012-12-18T21:55:52.803
> 
> 标签：python, perl

我在编写 perl / python 脚本方面相当流利，但是在编写代码时，我发现自己经常使用 google 来查找某些内置函数的操作数的确切顺序，或者我知道存在的某些功能的确切名称。虽然 google 工作得相当好，但它确实需要一些搜索，而且大约有一半的时间，参考页面没有我需要的正确示例。

有没有人知道任何关于 perl 或 python 的快速参考，将大部分重要的使用信息和基本示例放在一个地方？我应该自己做吗？还是大多数人使用 IDE 并且不需要这种帮助？（我使用 vim，顺便说一句）。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T22:09:16.800

Most **well written** python code should have docstrings that provide information on modules and functions simply by entering *help* into the interpreter.

```
>>> help(str)
>>> (lots of helpful output here!) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-18T22:04:34.500

对于 Perl，它是`perldoc`

```
perldoc Module::Name  # display docs for Module::Name
perldoc -f substr     # display docs for substr()
perldoc -Q parse      # search the FAQ for "parse"
perldoc -v %+         # display docs for special variable %+
perldoc perlcheat     # overview of most important syntax
perldoc perl          # overview of interesting perldoc pages 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-18T22:36:24.737

对于 perl，如果你想在你的肘部做点什么，你不能比 Johan Vromans 的[Perl Reference Guide / Perl Pocket Reference](http://www.vromans.org/johan/perlref.html)做得更好。打印出[PDF](http://www.squirrel.nl/pub/perlref-5.004.1.pdf)并将其装订成小册子，或者直接在当地书店购买。（让我们面对现实吧，对于 perl 来说，一页的快速参考是远远不够的）。

它让我经历了多年的 perl 使用......直到我切换到 python :-)

对于 python，顺便说一句，我只是在[docs.python.org](http://docs.python.org/)上搜索文档——或者在 stackoverflow 上搜索；python 的语法就是这样，当我查找某些内容时，我通常会进行比快速参考卡更深入的描述。

# ruby-on-rails-3 - 如何按特定顺序输出数据列表？

> ID：13942135
> 
> 赞同：1
> 
> 时间：2012-12-18T21:56:15.673
> 
> 标签：ruby-on-rails-3

使用 Rails，我试图按照分配给每个片段的“打印顺序”的顺序显示给定“章节”中的所有“片段”。

这是我正在使用的：

@chapter.fragments.order("printorder").each 做 |fragment|

是的，这对我来说都是非常非常新的。：） 谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:56:23.150

像这样的东西？我不确定打印顺序是什么。

```
@fragments = @chapter.fragments.order("printorder desc")

@fragments.each do |fragment| 
```

# c# - 如何从大量可为空的布尔值中返回布尔值？

> ID：13942138
> 
> 赞同：14
> 
> 时间：2012-12-18T21:56:33.053
> 
> 标签：c#, boolean, nullable

使用此代码：

```
private bool AtLeastOnePlatypusChecked()
{
    return ((ckbx1.IsChecked) ||
            (ckbx2.IsChecked) ||
            (ckbx3.IsChecked) ||
            (ckbx4.IsChecked));
} 
```

...我在我的轨道上停下来

```
Operator '||' cannot be applied to operands of type 'bool?' and 'bool? 
```

那么我该如何实现呢？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-18T21:58:30.770

您可以将 s 链接在一起`|`，最后使用 null-coalescing 运算符：

```
return (ckbx1.IsChecked | cxbx2.IsChecked | cxbx3.IsChecked | cxbx4.IsChecked) ?? false; 
```

如果任一操作数是，如果两个操作数都是，并且如果任一操作数是而另一个不是，则提升的`|`运算符返回。`true``true``false``false``null``null``true`

这不是短路，但我认为在这种情况下这对你来说不是问题。

或者 - 并且更可扩展地 - 将复选框放入某种集合中。然后你可以使用：

```
return checkboxes.Any(cb => cb.IsChecked ?? false); 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-12-18T21:58:15.107

尝试：

```
return ((ckbx1.IsChecked ?? false) ||
        (ckbx2.IsChecked ?? false) ||
        ... 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-18T22:01:10.200

我假设如果为空，那么它将是错误的，您可以使用 ?? 操作员。

```
 private bool AtLeastOnePlatypusChecked()
 {
      return ((ckbx1.IsChecked ?? false) ||
      (ckbx2.IsChecked ?? false) ||
      (ckbx3.IsChecked ?? false) ||
      (ckbx4.IsChecked ?? false));
 } 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-12-18T22:03:45.003

您可以使用`GetValueOrDefault()`来获取值，或`false`.

```
private bool AtLeastOnePlatypusChecked()
{
    return ((ckbx1.IsChecked.GetValueOrDefault()) ||
            (ckbx2.IsChecked.GetValueOrDefault()) ||
            (ckbx3.IsChecked.GetValueOrDefault()) ||
            (ckbx4.IsChecked.GetValueOrDefault()));
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2012-12-18T21:58:13.943

您可以使用以下内容：

```
(ckbx1.IsChecked.HasValue && ckbx1.IsChecked.Value) 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-12-18T22:03:18.013

在方法中使用`??`运算符；

```
private bool AtLeastOnePlatypusChecked()
{
return ((ckbx1.IsChecked ?? false) ||
        (ckbx2.IsChecked ?? false) ||
        (ckbx3.IsChecked ?? false) ||
        (ckbx4.IsChecked ?? false)
} 
```

# wix - 如何在安装期间更新名称值对 (NVP) 配置文件

> ID：13942139
> 
> 赞同：1
> 
> 时间：2012-12-18T21:56:40.690
> 
> 标签：wix

我的自定义 Wix 对话框要求用户提供 IP 地址和端口号。然后我想更新一个名为 config.txt 的文本文件，如下所示：

```
IP=192.168.001.234
PORT=45 
```

就像 boost 属性或 qt 配置文件一样。

我使用 UtilExtensions:XmlFile 来更新 .NET 配置文件，但没有看到修改名称值对配置文件的简单快捷方法。

蛮力将编写一个自定义操作，该操作采用命令行工具，该工具采用配置文件，然后是 NVP。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T05:56:20.233

您可以使用 Wix 编写一个[ini 文件](http://wix.sourceforge.net/manual-wix3/wix_xsd_inifile.htm)

```
<IniFile Id="Ini1"
          Action="createLine"
          Directory="INSTALLOCATION"
          Section="Settings"
          Name="settings.ini"
          Key="IP"
          Value="127.0.0.1" /> 
```

将输出一个包含

```
[Settings]
IP=127.0.0.1 
```

# jquery - 删除无效字段上的默认错误消息

> ID：13942144
> 
> 赞同：0
> 
> 时间：2012-12-18T21:57:48.880
> 
> 标签：jquery, jquery-validate

我正在使用 jquery 验证插件，并且验证工作几乎按照我想要的方式进行，但我遇到了一个小问题。

验证输入字段后，我会在输入字段旁边显示一个绿色勾号，表示该字段已成功验证。

如果页面上有错误，我会在页面顶部显示一条错误消息，指示无效字段的数量。

所有这一切都很好。

如果输入字段被修改并且不再有效，则会出现此问题。验证删除会删除输入字段旁边的绿色勾号，这是正确的，但随后会在输入字段旁边显示默认错误消息。我不想在输入字段旁边显示错误消息。

当字段无效时，如何删除默认错误消息文本？

这是[关于 jsfiddle 的工作演示](http://jsfiddle.net/Dman100/tXRjh/5/)

```
<script type="text/javascript">

    var j$ = jQuery.noConflict();

    j$(document).ready(function(){

        j$.validator.addMethod("money", function(value, element) {
            return this.optional(element) || /^(\d{1,3})(\.\d{2})$/.test(value);
        }, "Must be in US currency format 0.99");

        var validator = j$('[id$=Details]').validate({
            invalidHandler: function() {
                j$("#error-message").html('<img src="{!URLFOR($Resource.event_ver2, 'images/error-icon.png')}" width="32" height="32">').append(" Please correct the entries highlighted below. " + validator.numberOfInvalids() + " field(s) are invalid.");
            },
            success: function(label, element) {
                label.html('<img src="{!URLFOR($Resource.event_ver2, 'images/success-icon.png')}" width="16" height="16" class="validated">').insertAfter(element);
            },
            errorPlacement: function(error, element) {
                return false;
            }
        });

        j$('[id$=Email]').rules("add",{
            required: true,
            email: true
        });

        j$('[id$=Credit_Amount]').rules("add",{
            required: true,
            'money': true
        });

        j$('[id$=Credit_Card_Number]').rules("add",{
            required: true,
            creditcard2: function() { return j$('[id$=Credit_Card_Type]').val(); }
        });

        j$('[id$=Verification_Code]').rules("add",{
            required: true,
            digits: true
        }); 

        j$('[id$=Credit_Card_Type]').change(function(){j$('[id$=Details]').validate().element('[id$=Credit_Card_Type]') });
    });
</script> 
```

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T00:10:17.030

解决此问题的主要障碍是您的复选标记包含在与错误消息*相同* `label`的元素内，并且它`class`始终`.error`是包含错误消息还是复选标记。

我能让这个工作的唯一方法是永久消除动态生成的`label`.

`label`1）在旁边添加一个空的`input`，以完全消除对这个动态生成的需要`label`。

```
<div>
    Email:
    <input id="email" type="text" name="email" class="required" maxlength="30" />
    <label></label>
</div> 
```

2) 修改您的 jQuery 以放置和删除兄弟`label`元素的复选标记。

```
var j$ = jQuery.noConflict();

j$(document).ready(function() {

    var validator = j$("#Details").validate({
        invalidHandler: function(form, validator) {
            j$("#error-message")
                .html('<img src="http://shc.dev1.cs3.force.com/MedicalStaffPayment/resource/1355859689000/event_ver2/images/error-icon.png" width="32" height="32">')
                .append(" Please correct the entries highlighted below. " + validator.numberOfInvalids() + " field(s) are invalid.");
        },
        success: function(label, element) {
            j$(element).next('label')
                .html('<img src=http://shc.dev1.cs3.force.com/MedicalStaffPayment/resource/1355859689000/event_ver2/images/success-icon.png width="16" height="16" class="validated">');
        },
        errorPlacement: function(error, element) {
            j$(element).next('label').html('');
        }
    });

    j$("#email").rules("add", {
        required: true,
        email: true
    });
});​ 
```

[**工作演示：**](http://jsfiddle.net/tXRjh/13/)

[http://jsfiddle.net/tXRjh/13/](http://jsfiddle.net/tXRjh/13/)

# php - Codeigniter 提交以纯 HTML 编写的表单

> ID：13942146
> 
> 赞同：2
> 
> 时间：2012-12-18T21:57:54.770
> 
> 标签：php, forms, codeigniter, submit

我现在玩了大约2天，无法解决这个问题。我正在工作，`codeigniter 2.1.0.`我想提交一个用 HTML 编写的表单。我不想使用 CI 表单助手。

原因是因为我正在动态地使用 JavaScript 在表单中添加内容。当用户单击一个项目时，它就会被添加到表单中。现在，当用户单击提交按钮时，我添加的所有项目都应该在 POST 请求中发送，但我的 POST 完全是空的。

`form_input()`现在我注意到只有当我使用CI form_helper时才会发送 POST 。是否可以在不使用表单助手的情况下仅提交普通的纯 HTML 表单？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:00:20.400

> 是否可以在不使用表单助手的情况下仅提交普通的纯 HTML 表单？

是的。实际提交完全独立于 CI，只需确保您使用表单的正确操作 URI，以便表单提交 post（我假设您的表单方法是 post）请求调用正确的控制器操作。

您不需要为提交按钮使用 CI form_helper。如果你用这些来模拟一个表单，你会发现那些只是生成纯 HTML 并没有神奇地做任何事情。

# asp.net-mvc-3 - 尝试使用 RenderPartial 的对象引用错误

> ID：13942149
> 
> 赞同：0
> 
> 时间：2012-12-18T21:58:08.240
> 
> 标签：asp.net-mvc-3, asp.net-mvc-4

我有一个使用`ViewModel`. 在里面`ViewModel`我这样做**（编辑显示完整`ViewModel`）**：

```
namespace MyNameSpace.ViewModels
{
    public class MyViewModel
    {
        public ModelOne ModelOne { get; set; }
        public ModelTwo ModelTwo { get; set; }
    }
} 
```

在我的主要观点上，我这样做**（编辑：添加`@Html.Hidden`代码）**：

```
@using MyNameSpace.ViewModels
@using MyNameSpace.Models
@model MyViewModel

...
@using (Html.BeginFormAntiForgeryPost())
{ 
    @Html.Hidden("myData", new MvcSerializer()
        .Serialize(Model, SerializationMode.Signed))
....
<div>
    @{Html.RenderPartial("_MyCheckBox", 
        Model.ModelTwo, new ViewDataDictionary());}
</div>
}
.... 
```

我的部分观点是：

```
@using MyNameSpace.Models
@model ModelTwo
<div>
    <fieldset>
        <div class="editor-label">
            @Html.LabelFor(x => x.MyCheckBox)</div>
        <div class="editor-field">
            <select multiple="multiple" id="@Html.FieldIdFor(x =>
                x.MyCheckBox)" name="@Html.FieldNameFor(x =>
                x.MyCheckBox)">

                @foreach (MyEnum item in Enum.GetValues(typeof(MyEnum)))
                {
                    var selected = Model.MyCheckBox.Contains(item); //ERROR HERE
                    <option value="@((int)item)" @if (selected)
                        {<text>selected="selected"</text>}>
                        @T(item.ToString())
                    </option>
                }
            </select>
        </div>
    </fieldset>
</div> 
```

我收到了`Object reference not set to an instance ...`错误，不知道如何纠正它。

最初，我`<fieldset>`在我的主视图中有这个并且得到了那个错误。我以为是因为这两个模型，所以我把它放在局部视图中。但只是发现我遇到了同样的问题。

我没有正确设置`MyCheckBox`我的部分视图`var selected = Model.MyCheckBox.Contains(item);`。

有什么想法吗？

**编辑（添加`MyCheckBox`代码）**

这是`MyCheckBox`里面*ModelOne.cs*：

```
[Mandatory(ErrorMessage = "Please select at least one option")]
[Display(Name = "Please select one ore more options")]
[MySelector]
public virtual int MyCheckBox { get; set; } 
```

它在*ModelTwo.cs*里面：

```
private IList<MyEnum> _myEnum;
public IList<MyEnum> MyCheckBox
{
    get
    {
        if (_myEnum== null)
        {
            _myEnum= new List<MyEnum>();
            foreach (MyEnumitem in Enum.GetValues(typeof(MyEnum)))
            {
                if (((MyEnum)Record.MyCheckBox& item) == item)
                    _myEnum.Add(item);
            }
        }
        return _myEnum;
    }
    set
    {
        _myEnum= value;
        Record.MyCheckBox= 0;
        foreach (var item in value)
        {
            Record.MyCheckBox|= (int)item;
        }
    }
} 
```

请注意，我使用的是 Orchard（因此是`Record`），而后者又使用 NHibernate。我不认为这是相关的，但我可能是错的。该`MyCheckBox`代码使用`[Flags]`属性`enum`并将值存储为`int`数据库（因此是代理）。下面是它的`enum`样子：

*我的枚举.cs*：

```
[Flags]
public enum MyEnum
{
    [Display(Name="Name 1")]
    Enum1 = 1,
    [Display(Name="Name 2")]
    Enum2 = 2,
    [Display(Name="Name 3")]
    Enum3 = 4,
    [Display(Name="Name 4")]
    Enum4 = 8,
    [Display(Name="Name 5")]
    Enum5 = 16
} 
```

*我的控制器.cs*

```
private MyViewModel myData;
protected override void OnActionExecuting(ActionExecutingContext filterContext)
{
    var serialized = Request.Form["myData"];
    if (serialized != null) //Form was posted containing serialized data
    {
    myData= (MyViewModel)new MvcSerializer().Deserialize
        (serialized, SerializationMode.Signed);
        TryUpdateModel(myData);
    }
    else
        myData= (MyViewModel)TempData["myData"] ?? new MyViewModel();
    TempData.Keep();
}
protected override void OnResultExecuted(ResultExecutedContext filterContext)
{
    if (filterContext.Result is RedirectToRouteResult)
        TempData["myData"] = myData;
} 
```

然后在`Action`*MyController.cs 中的特定内容中：

```
public ActionResult Step5(string backButton, string nextButton)
{
    if (backButton != null)
        return RedirectToAction("Step4");
    else if ((nextButton != null) && ModelState.IsValid)
        return RedirectToAction("Confirm");
    else
        return View(myData);
    } 
```

# vb6 - UI 从 .NET 自动化 VB6 应用程序

> ID：13942160
> 
> 赞同：1
> 
> 时间：2012-12-18T21:58:59.217
> 
> 标签：vb6, controls, ui-automation

在过去的几天里，我一直试图找出在 vb6 应用程序中为特定控件获取 AutomationElement 的最佳方法。

我最初的做法是使用以下条件进行搜索： new PropertyCondition(AutomationElement.NameProperty, *controlName* )

我假设这在一个小的测试 VB6 应用程序中正常工作了大约一周。

但几天前我意识到了一些事情......当我将一个 vb6 文本框拖到表单中时，“名称”属性**和**“文本”属性都设置为“文本 1”

因此，当我使用以下内容进行搜索时： new PropertyCondition(AutomationElement.NameProperty, 'Text1')
它返回正确的元素，但如果我随后将 'Text' 属性设置为 ''，则相同的搜索将不会带来任何结果。

**问题：**有没有人找到一种方法来获取基于 VB6 控件名称的 AutomationElement

**我试过的：**

1.  获取 MSAA 等效界面并查看“名称”属性 - 结果：“” [http://msdn.microsoft.com/en-us/library/windows/desktop/dd318490%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd318490%28v=vs.85%29.aspx)
2.  根据其他属性（AutomationId、RuntimeId）获取控件 - 结果：AutomationId - 并非所有控件似乎都有此属性可用 - RuntimeId - 每次应用程序运行时都会更改
3.  我查看了很多不同的站点，下面列出了主要的站点-虽然有些人说他们已经设法让它工作了-我不相信我能看到他们是如何做到的..或者我只是不明白：$

[http://blogs.msdn.com/b/brianmcm/archive/2006/01/17/getting-the-winforms-id-of-a-control.aspx](http://blogs.msdn.com/b/brianmcm/archive/2006/01/17/getting-the-winforms-id-of-a-control.aspx)

虽然我可以访问演示应用程序，但我不会访问生产应用程序，因为它是由第三方创建的。

我打算从这里做的是根据它们在表单上的位置来获取自动化元素..

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T14:50:49.513

由于代表人数少，无法发表评论。你绝对必须有一个AutomationElement吗？

您可能想查看调用 [user32.dll] ( [http://pinvoke.net/default.aspx/user32.EnumChildWindows](http://pinvoke.net/default.aspx/user32.EnumChildWindows) )。查看 FindWindowEx、GetWindow、EnumWindows、EnumChildWindows、GetWindowText 等。

您需要父窗口的句柄，因此您可以使用此循环来获取它。从那里您可以使用其他功能来获取您需要的有关控件的信息。

```
 IntPtr hWnd = IntPtr.Zero;
        foreach(var process in System.Diagnostics.Process.GetProcesses())
            if(condition)
                hWnd = process.Handle; 
```

在 VB6 窗口中用您需要的确切信息进行注释，我会给您更好的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-10T19:00:34.867

您可以使用特定（或任何其他容器）中的关系位置来检测它*。*例如，如果您的主窗口中有 5，并且您确定顺序不会更改，则可以在类名上创建 a，然后使用该方法返回s 的集合并遍历它，查询属性以找出哪个是最低的（或中间的，或任何其他位置，就此而言）。`AutomationElement``Window``TextBox` `AutomationElements``PropertyCondition``TextBox``FindAll``AutomationElement``BoundingRectangle`

我将创建一个辅助方法，该方法将返回 a `Dictionary<int,AutomationElement>`，键是 的视觉位置，`AutomationElement`值是`AutomationElement`自身。

通过这种方式，您可以避免`Point`在屏幕上使用特定的（任何窗口大小更改或元素定位都会很容易破坏您的代码），而不会绑定到`AutomationId`属性。

# powershell - 脚本完成后，powershell 似乎忘记了 ntfssecurity 模块

> ID：13942161
> 
> 赞同：0
> 
> 时间：2012-12-18T21:59:04.827
> 
> 标签：powershell, module

该模块位于[http://gallery.technet.microsoft.com/scriptcenter/1abd77a5-9c0b-4a2b-acef-90dbb2b84e85](http://gallery.technet.microsoft.com/scriptcenter/1abd77a5-9c0b-4a2b-acef-90dbb2b84e85)

当我在 Windows Powershell 环境中运行使用 get-ace cmdlet 的脚本并完成时，使用 ctrl-c 或在脚本中使用 exit 命令退出它，我必须重新启动我的 Powershell 环境才能再次使用我的脚本。否则我最终会得到错误，它不知道 get-ace 是什么。然而，在脚本第一次运行的整个过程中，它可以运行数天并正常完成。

关于问题是什么的任何想法？

# javascript - KendoUI 图表未反映数据源更改

> ID：13942162
> 
> 赞同：-1
> 
> 时间：2012-12-18T21:59:12.753
> 
> 标签：javascript, jquery, kendo-ui

当用户填写表格指示要绘制的产品 ID（已售出的单位）并触摸更新按钮时，我正在尝试更新剑道图表数据源。

我抓住了触摸并更改了数据源的 url（因为我将产品 id 作为 GET 参数传递）并将 DS 的 url 更改为文本字段上的值。

我很确定它正在使用正确的参数（id）请求正确的 url，但不知何故，剑道图表没有刷新，这非常令人沮丧。

有什么帮助吗？米

DS

```
var dsByUnits = "libyPrds.php?way=byUnits&prodID=-1";
        var dsByMoney = "libyProducts.php?way=byMoney&prodID=-1";

        var byUnitsDataSource = new kendo.data.DataSource({
                            transport:{
                                read:dsByUnits,
                                dataType: "json"
                            }}); 
```

更新

```
$(document).ready(function() {

                $("#btProd").click(function () {
                    dsByUnits = "libyPrds.php?way=byUnits&prodID="+$("#prodID").val();

                    byUnitsDataSource = new kendo.data.DataSource({
                            transport:{
                                read:dsByUnits,
                                dataType: "json"
                            }});

                    byUnitsDataSource.read();
                });

            }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T07:16:24.793

没有将图表实际绑定到新创建的数据源的代码。这意味着图表永远不会知道您的数据已更改。您应该使用图表绑定的数据源实例，而不是创建新实例。像这样的东西：

`$("#chart").data("kendoChart").dataSource.read();`

# javascript - 非破坏性替代拼接？

> ID：13942163
> 
> 赞同：12
> 
> 时间：2012-12-18T21:59:13.523
> 
> 标签：javascript

是否有非破坏性替代拼接？

我想为一个系列保留一组数据是条形图。虽然我可能有大约 10,000 个数据点，但也许我只想在用户使用滚动条滚动时一次显示 100 个。所以如果我有

```
var data = [];
// ... fill data with ~1000 data points
// ... data periodically updated and appended
stripchart.draw( data.splice(-100,100) ); // get last 100 data points 
```

但是我已经破坏了我的数据，因为拼接是破坏性的。那么......抓取数据窗口的最巧妙的解决方案是什么？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-18T22:01:22.307

改为使用`slice`。就像`substr`数组一样；）

# java - 选择用于 GPU 处理的语言

> ID：13942168
> 
> 赞同：3
> 
> 时间：2012-12-18T21:59:31.020
> 
> 标签：java, cuda, opencl, gpu

我希望使用 Java 来使用 GPU 来加速计算。我听说 CUDA 有 Java 绑定，但我想知道 OpenCL 是否也有？总的来说，我很困惑哪些设备支持哪些设备，哪些设备最适合与 Java 一起使用。

基本上，我试图找到一些可以在 Java 中轻松实现的东西，并且可以支持最多数量的 GPU（NVIDIA、ATI 等）。有没有人建议我应该采取什么措施来实现这一目标？谢谢！

# grails - 存储用户国家、年龄组等的域设计

> ID：13942169
> 
> 赞同：0
> 
> 时间：2012-12-18T21:59:35.957
> 
> 标签：grails, grails-orm, grails-domain-class

情况如下：用户表包含与其他用户数据重叠的数据，例如国家、年龄组、性别等。

在 MySQL 中，我会使用三个或两个表。在存储国家/地区的情况下，我将使用三个表：一个是用户表，另一个是国家/地区表，最后一个连接这两个表。（当然，如果一个用户有一个国家，我可以使用两张表。）

**例如）用户（id，otherUserInfo），userCountry（id_user，id_country），国家（id，countryName）**

作为 Grails 的新手，我想知道表示此模式的最佳方式是什么。是否需要创建 2-3 个域类？或者是否有一些神奇的功能（就像许多其他 Grails 功能 (:) 一样在单个域类中执行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T23:14:54.040

很可能你可以用两个来做到这一点。

```
class User {
    //other user info

    //if user only has one country
    Country country

    //if user has many countries
    static hasMany = [countries: Country]
}

class Country {
    //country info
} 
```

由于您可能不希望 a`Country`属于 ，因此`User`您不需要`Country`类中的任何内容来表明与 . 的联系`User`。Grails/Gorm 将在这两种情况下处理创建链接实体。

如果用户有很多国家，并且您需要存储有关关系的其他信息，则需要创建自己的连接表。例如，如果您需要保留用户对该国家/地区的访问次数：

```
class User {
     //other user info

    static hasMany = [userCountries: UserCountry]
}

class UserCountry {
    static belongsTo = [user: User]
    Country country
    int numberOfVisits
}

class Country {
    //country info
} 
```

# .htaccess - htaccess 打破资产路径

> ID：13942172
> 
> 赞同：0
> 
> 时间：2012-12-18T21:59:48.220
> 
> 标签：.htaccess, rewrite

我正在尝试找到一种包含 htaccess 重写的方法，以将访问[http://site.com](http://site.com)的任何人重定向到[http://www.site.com](http://www.site.com)。

我试过以下...

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?site.co.uk [NC]
RewriteRule ^(.*)$ http://www.site.co.uk/$1 [R=301,L] 
```

...但这也破坏了我所有资产的路径（在各种文件夹中，奇怪的是不能重命名） - 在不应该有的地方添加一个“www”。

我该如何解决这个问题？

**解决方案：**

现在很明显，我想到了 - 在 assets 文件夹中创建另一个 htaccess，如下所示：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?site.co.uk/assets/ [NC]
RewriteRule ^(.*)$ http://www.site.co.uk/assets/$1 [R=301,L] 
```

# bash - Bash script to automate Open VPN

> ID：13942182
> 
> 赞同：1
> 
> 时间：2012-12-18T22:00:21.903
> 
> 标签：bash, ssh, openvpn

so what I'm trying to do is to write a Bash script that will ssh into a server and generate new user credentials. However, it won't create the new user keys, but it can tell you if a user already exists.

```
echo "You entered $NAME. Is this correct?(y/n) "
read AN

while [ "$AN" != "y" ]
do
    echo "Enter the correct user name: "
    read NAME
    echo "You entered $NAME. Is this correct(y/n)? "
    read AN
done

ssh -t x@0.0.0.0 <<EOF

if [ ! -e /etc/openvpn/easy-rsa/keys/"$NAME.crt" ]
then
    cd /etc/openvpn/easy-rsa/
    source vars
    ./pkitool "$NAME"
else
    echo "File already exists!"
fi

exit
EOF
scp x@0.0.0.0:/etc/openvpn/easy-rsa/keys/$NAME.crt . 
```

This code can generate new user keys, but when I add the if block, it then will no longer create new keys for some reason. Anybody have any ideas why the if block doesn't properly work?

EDIT: I solved it

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:59:15.730

I figured it out. I accidentally moved ca.crt into a different folder. This explains why new user keys couldn't be made.

I appreciate the help, sorry for the newbie mistake.

# bash - 如何在 gnome 中记录我的登录/注销和屏幕锁定/解锁

> ID：13942184
> 
> 赞同：5
> 
> 时间：2012-12-18T22:00:28.930
> 
> 标签：bash, login, gnome

我想创建一个包含某些事件日志的日志文件，例如：

*   登录 gnome
*   日志屏幕
*   解锁屏幕
*   登出

我的计划是编写一个脚本，作为 gnome 会话的子进程在后台运行。它将首先附加“LOGIN”，监视屏幕锁定/解锁，并在收到 SIGHUP（表示会话结束）时附加“LOGOUT”。

我编写了一个脚本 [1]，如果我在 shell 中启动它就可以工作，但它很笨重。我希望这个程序在后台运行——我不想每次登录时都记得启动它。

有人可以指出我正确的方向吗？

[1] 脚本：

```
#!/bin/bash
# param $1: type, in:
#     ["SCREEN_LOCKED",
#     "SCREEN_UNLOCKED",
#     "LOGIN",
#     "LOGOUT",
#     "SIGINT",
#     "SIGTERM"]
function write_log {
  if [ -z $1 ]; then
    1="unspecified"
  fi
  echo -e "$1\t$(date)" >> "$LOG"
}

function notify {
  echo "$@" >&2
}

function show_usage {
  notify "Usage: $0 login <address> <logfile>"
  notify "Parameters:"
  notify "  login: You must use the string 'login' to avoid seeing this message."
  notify "  <logfile>: File to store logs."
  notify ""
  notify "This script is designed to go in the bashrc file, and be called in the"
  notify "form of: $0 login '$USER@$(uname -n)' >>/path/to/logfile &"
  notify ""
}

if [ "$#" -eq 0 ]; then
  show_usage
  exit 1
fi
if [ "$1" != "login" ]; then
  show_usage
  notify "Error: first parameter must be the string 'login'."
  exit 1
fi
LOG="$2"
if [ -z "$LOG" ]; then
  notify "Error: please specify a logfile."
  exit 1
elif [ -f "$LOG" ]; then
  # If the logfile exists, verify that the last action was a LOGOUT.
  LASTACTION=$(tail -1 "$LOG" | awk '{print $1}')
  if [ $LASTACTION != "LOGOUT" ]; then
    notify "Logfile '$LOG' exists but last action was not logout: $LASTACTION"
    exit 1
  fi
else
  # If the file does not exist, create it.
  touch "$LOG" || ( notify "Cannot create logfile: '$2'" && exit 1 )
fi

# Begin by logging in:
write_log "LOGIN"

# Handle signals by logging:
trap "write_log 'LOGOUT'; exit" SIGHUP
trap "write_log 'INTERRUPTED_SIGINT'; exit 1" SIGINT
trap "write_log 'INTERRUPTED_SIGTERM'; exit 1" SIGTERM

# Monitor gnome for screen locking. Log these events.
dbus-monitor --session "type='signal',interface='org.gnome.ScreenSaver'" | \
  (
    while true; do
      read X;
      if echo $X | grep "boolean true" &> /dev/null; then
        write_log "SCREEN_LOCKED"
      elif echo $X | grep "boolean false" &> /dev/null; then
        write_log "SCREEN_UNLOCKED"
      fi
    done
  ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T23:43:02.570

我也有这样的脚本，它可以很好地使用自动启动目录中的桌面文件启动它：

```
$ cat ~/.config/autostart/watcher.sh.desktop 

[Desktop Entry]
Type=Application
Exec=/home/<username>/hg/programs/system/watcher/watcher.sh
Hidden=false
X-GNOME-Autostart-enabled=true
Name[de_DE]=watcher
Name=watcher
Comment[de_DE]=
Comment= 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-06-10T23:35:13.500

`LockedHint`现在，我认为听听屏幕保护信息比听屏幕保护信息更好。这样，您就不会被绑定到屏幕保护程序的实现。

这是一个简单的脚本来做到这一点：

```
gdbus monitor -y -d org.freedesktop.login1 | grep LockedHint 
```

给出了这个：

```
/org/freedesktop/login1/session/_32: org.freedesktop.DBus.Properties.PropertiesChanged ('org.freedesktop.login1.Session', {'LockedHint': <true>}, @as [])
/org/freedesktop/login1/session/_32: org.freedesktop.DBus.Properties.PropertiesChanged ('org.freedesktop.login1.Session', {'LockedHint': <false>}, @as []) 
```

# iphone - 恢复应用内购买交易

> ID：13942196
> 
> 赞同：6
> 
> 时间：2012-12-18T22:01:19.233
> 
> 标签：iphone, ios, in-app-purchase

这个想法是无论风雨无阻，潮湿还是晴天，用户都必须付出所有代价。

来自苹果：

```
Store Kit 提供内置功能来恢复非消耗品、自动更新订阅和免费订阅的交易

```

对于这些交易，Apple Store Kit 有很好的内置工具。我想专注于其他类型（特别是消耗品）。唯一的交易信息是我们在成功购买后通过 Store Kit 收到的标识符和收据数据。我们的应用程序使用服务器端模型向其交付产品。但是仍然存在很多丢失购买数据的情况，例如如果服务器在用户通过 App Store 进行购买时放下，因此无法将收据发送到服务器以完成验证过程。

当前的解决方法是：

1.  服务器返回产品标识符列表
2.  用户选择一个；应用程序将其标识符保存在设备上（通过 SQLite 或 Core Data）。标准 Apple Store 交易流程紧随其后。
3.  在成功的情况下，应用程序将收据数据连同其标识符一起保存在设备上并将其发送到服务器。如果出现故障或取消，则立即从设备中删除标识符。
4.  如果服务器的响应正常，则应用程序会从设备中删除带有收据数据的标识符。否则它将定期向服务器发送请求，直到成功响应为止。

但是这种方法仍然存在漏洞。例如，用户可以在不等待交易交付到服务器的设备上删除应用程序，因此根本不会有任何关于他购买的证据。

你的建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:17:33.077

基本规则是，在您成功交付内容之前，您不要在支付队列上调用 finishTransaction:。这意味着您向验证和内容服务器发出请求，它们会返回有效响应。只有在这些正确的响应之后，您才会调用 finishTransaction:。请注意，不良购买收据是有效的，只是不好。你会让人们试图盗窃商品——不要为此失眠，但要进行适当的收据检查。

据我了解（根据我的非消耗品），只要您不调用finishTransaction，商店将继续在您的应用安装时重试。因此，我认为您不需要您的应用程序将收据保存在设备上。但是，对于消耗品，如果您希望以后能够恢复数据，则服务器必须存储数据。一个重要的问题是将其存储在什么键下。

顺便说一句，你的第一行是绝对正确的，值得失眠。

# jquery - 将设置放在 JQuery 插件中的位置

> ID：13942199
> 
> 赞同：1
> 
> 时间：2012-12-18T22:01:38.637
> 
> 标签：jquery, jquery-plugins

JQuery插件创作文档中的[默认和选项部分](http://docs.jquery.com/Plugins/Authoring#Defaults_and_Options)，说包括这样的设置：

```
(function( $ ){

  $.fn.tooltip = function( options ) {  

    // Create some defaults, extending them with any options that were provided
    var settings = $.extend( {
      'location'         : 'top',
      'background-color' : 'blue'
    }, options);

    return this.each(function() {        

      // Tooltip plugin code here

    });

  };
})( jQuery ); 
```

但是再往下看，就像在[数据部分](http://docs.jquery.com/Plugins/Authoring#Data)一样，构建插件的方式发生了变化，并且不清楚如何声明和初始化设置。

**他们会像这样被扔进 init 方法吗？如果是这样，另一种方法如何访问它们？**

```
 var methods = {
    init: function(options) {

      // no idea if this is the right place for settings
      var settings = $.extend({}, $.fn.myPlugin.defaultSettings, options || {});

      return this.each(function() {
       ....
      });
    },
    displaySettings: function() {
      console.log('WTF to do?');
    }
  ... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:17:11.843

我会看看这篇文章：[jQuery Plugin Design Patterns](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#jquerypluginpatterns)

还有[一个随附的 Github 存储库](https://github.com/addyosmani/jquery-plugin-patterns/tree/master/patterns)，其中包含所有示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:20:17.737

这条线可能是您正在寻找的。它检查方法是作为参数传递还是作为带有选项的对象传递。

```
if ( methods[method] ) { //Check if a method was passed
    return methods[method].apply( this, Array.prototype.slice.call( arguments, 1 ));
} else if ( typeof method === 'object' || ! method ) { // Check if options were passed
    // If Options passed, apply them to the .init method where it accepts arguments. 
    // In the example it doesn't show the init method utilizing the options.
    return methods.init.apply( this, arguments ); 
} else {
    $.error( 'Method ' +  method + ' does not exist on jQuery.tooltip' );
} 
```

如果传递了选项，那么您将在 init 方法中使用上面相同的代码：

```
var methods = {
    init: function(options) {
        var settings = $.extend( {
            'location'         : 'top',
            'background-color' : 'blue'
        }, options);
... 
```

您通常“初始化”一个插件作为您的第一种方法，因此可以选择。通常，您不会使用“destroy”之类的方法传递选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-17T02:41:40.757

这对我有用：

```
(function ( $ ) {
    var methods = {
        init : function(options) {
            var settings = $.extend({
                some_setting: true
                ,some_other_setting: true
            }, options );

            var _this = this;
            _this[0].pluginNameSettings = settings;
            // rest of your init method here
        } // end of init method
        ,some_method: function( ) {
            $(this)[0].pluginNameSettings.some_setting;
            // rest of your method here
        }
    }

    $.fn.dropDownMenu = function(methodOrOptions) {
        if (methods[methodOrOptions]) {
            return methods[ methodOrOptions ].apply(this, Array.prototype.slice.call(arguments, 1));
        } else if (typeof methodOrOptions === 'object' || ! methodOrOptions) {
            // Default to "init"
            return methods.init.apply(this, arguments);
        } else {
            $.error('Method ' +  methodOrOptions + ' does not exist on jQuery.dropDownMenu');
        }
    };
}( jQuery )); 
```

# macos - R 和用于并行的共享内存::mclapply

> ID：13942202
> 
> 赞同：10
> 
> 时间：2012-12-18T22:02:01.663
> 
> 标签：macos, r, shared-memory

我试图通过并行化在大约 1000 个项目的列表上执行的昂贵操作来利用四核机器。

我目前正在使用 R 的 parallel::mclapply 函数：

```
res = rbind.fill(parallel::mclapply(lst, fun, mc.cores=3, mc.preschedule=T)) 
```

哪个有效。问题是，任何额外的子进程都必须分配一大块内存：

![在此处输入图像描述](../Images/f5a678c8616acc09c28b424e3dcf587b.png)

理想情况下，我希望每个核心都能从父 R 进程访问共享内存，这样当我增加 mclapply 中使用的核心数量时，我不会在核心限制之前达到 RAM 限制。

我目前不知道如何调试这个问题。每个进程访问的所有大型数据结构都是全局的（当前）。这是某种程度上的问题吗？

我确实将操作系统的共享内存最大设置增加到 20 GB（可用 RAM）：

```
$ cat /etc/sysctl.conf 
kern.sysv.shmmax=21474836480
kern.sysv.shmall=5242880
kern.sysv.shmmin=1
kern.sysv.shmmni=32
kern.sysv.shmseg=8
kern.maxprocperuid=512
kern.maxproc=2048 
```

我认为这会解决问题，但问题仍然存在。

还有其他想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-03-20T08:39:36.280

[只是提示R-devel Digest，第 149 卷，第 22 期](http://r.789695.n4.nabble.com/Re-R-devel-Digest-Vol-149-Issue-22-td4710367.html)可能发生的事情

Radford Neal 2015 年 7 月 26 日的回答：

*当 mclapply fork 启动一个新进程时，内存最初是与父进程共享的。但是，每当任何一个进程写入内存页时，都必须复制内存页。不幸的是，R 的垃圾收集器写入每个对象以标记和取消标记它，只要完成完整的垃圾收集，因此每个 R 对象很可能在每个进程中都被复制，即使它们中的许多实际上并没有改变（从这一点来看R 程序的视图）。*

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-03T09:10:13.467

Linux和macosx在fork的时候都有[copy-on-write](http://en.wikipedia.org/wiki/Copy-on-write)机制，这意味着内存的pages实际上并没有被复制，而是共享到第一次写入。 **mclapply**基于 fork()，因此可能（除非您写入大共享数据），您看到的进程列表报告的内存不是实际内存。

但是，在收集结果时，主进程必须为 mclapply 的每个返回结果分配内存。

为了进一步帮助您，我们需要更多地了解您的**有趣**功能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-06T18:35:58.177

我想我会认为这不会因为写时复制功能而使用额外的内存。我认为列表的元素很大？也许当 R 将元素传递给 fun() 时，它实际上是在复制列表项，而不是在写入时使用复制。如果是这样，以下可能会更好：

```
fun <- function(itemNumber){
  myitem <- lst[[itemNumber]]
  # now do your computations
}
res = rbind.fill(parallel::mclapply(1:length(lst), fun, mc.cores=3, mc.preschedule=T)) 
```

或者`lst[[itemNumber]]`直接在你的函数中使用。如果 R/Linux/macos 不够聪明，无法在您编写函数时使用写时复制，则可能使用这种修改后的方法。

编辑：我假设您没有修改列表中的项目。如果这样做，R 将复制数据。

# mysql - VB.net 更新查询没有给出错误，也没有更新我的 sql 数据库

> ID：13942205
> 
> 赞同：1
> 
> 时间：2012-12-18T22:02:05.593
> 
> 标签：mysql, vb.net

```
Dim conntps As MySqlConnection
Dim myconnstringtps As String
conntps = New MySqlConnection()
Dim mycommand As New MySqlCommand
Dim Updatepayments As String = "update payments set payments.payorname='" & _
    epayorname.Text & "', payments.cardnumber='" & eccnumber.Text & _
    "', payments.bankname='" & ebankname.Text & "', payments.checkaccountnumber='" & _
    eaccountnumber.Text & "', payments.checkroutingnumber='" & _
    erouting.Text & "', payments.cardexpirationdate='" & eexpmonth.Text & "/" & _
    eexpireyear.Text & "', payments.cardexpirationmonth='" & _
    eexpmonth.Text & "', payments.cardexpirationyear='" & eexpireyear.Text & _
    "', payments.cardaddress='" & eaddy.Text & "', payments.cardzipcode='" & _
    ezip.Text & "', payments.threedigitnumber='" & ecvv.Text & _
    "' where payments.filenumber='" & TextBox1.Text & "' and paymentstatus='PENDING';"
myconnstringtps = "server=localhost; user id=root; " & _
                  "password=1C0cac0la; database=collectionsmax"
Try
    conntps.Open()
    Try
        mycommand.Connection = conntps
        mycommand.CommandText = Updatepayments
        mycommand.ExecuteNonQuery()
        conntps.Close()
        mycommand.Dispose()
    Catch myerror As MySqlException
        MsgBox("error connecting:" & myerror.Message)
    End Try
Catch myerror As MySqlException
    MsgBox("error connecting:" & myerror.Message)
Finally
    If conntps.State <> ConnectionState.Closed Then conntps.Close()
    MsgBox("Successfully Changed")
End Try 
```

尝试运行代码时，我没有收到任何错误或异常。

我试图将生成的更新查询输出到文本框并通过 mysql management studio 运行代码，它运行良好。所以我很确定这不是将实际查询发送到服务器的问题。

我使用几乎完全相同的代码来插入语句，没有任何问题。

当代码使用上述代码通过我的 VB.net 应用程序运行时，它不会更新数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:18:56.637

您没有在 MySqlConnection 中设置连接字符串

```
myconnstringtps = "server=localhost; user id=root; password=1C0cac0la;......"
conntps = New MySqlConnection(myconnstringtps) 
```

除此之外，您需要使用参数化查询来避免字符串中的单引号问题和[Sql Injection Attack](http://xkcd.com/327/)安全问题

```
Dim Updatepayments As String = "update payments " & _
    "set payments.payorname=@name," & _
    "payments.cardnumber=@cnum," & _
    "payments.bankname=@bank," & _
    "payments.checkaccountnumber=@actnum," & _
    "payments.checkroutingnumber=@routing," & _
    "payments.cardexpirationdate=@monthyear," & _
    "payments.cardexpirationmonth=@month," & _
    "payments.cardexpirationyear=@year," & _
    "payments.cardaddress=@address," & _
    "payments.cardzipcode=@zip," & _
    "payments.threedigitnumber=@digits " & _
    "where payments.filenumber=@file and paymentstatus='PENDING'"

Dim mycommand As New MySqlCommand(Updatepayments, conntps)
mycommand.Parameters.AddWithValue("@name", epayorname.Text)
mycommand.Parameters.AddWithValue("@cnum", eccnumber.Text)
mycommand.Parameters.AddWithValue("@bank", ebankname.Text)
mycommand.Parameters.AddWithValue("@actnum", eaccountnumber.Text);
mycommand.Parameters.AddWithValue("@routing", erouting.Text)
mycommand.Parameters.AddWithValue("@monthyear", eexpmonth.Text & "/" &  eexpireyear.Text)
mycommand.Parameters.AddWithValue("@month", eexpmonth.Text)
mycommand.Parameters.AddWithValue("@year", eexpireyear.Text)
mycommand.Parameters.AddWithValue("@address", eaddy.Text)
mycommand.Parameters.AddWithValue("@zip", ezip.Text)
mycommand.Parameters.AddWithValue("@digits", ecvv.Text)
mycommand.Parameters.AddWithValue("@file", TextBox1.Text) 
```

其他问题点：您确定您的字段都是字符串类型的吗？您为每个字段传递一个字符串并用单引号将值括起来。如果您的某些字段不是字符串类型，这可能会失败。（尤其是这些字段可能不是字符串类型的*payment.cardnumber、payments.checkaccountnumber、payments.cardexpirationmonth、payments.cardexpirationyear、payments.threedigitnumber*）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T22:29:27.620

使用命令参数。这使得它更安全（[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)）和更容易处理。

```
Dim Updatepayments As String = "UPDATE payments SET payments.payorname=@1, " & _
    "payments.cardnumber=@2, ..." & _
    "WHERE payments.filenumber=@11 AND paymentstatus='PENDING';"

mycommand.Parameters.AddWithValue("@1", epayorname.Text);
mycommand.Parameters.AddWithValue("@2", eccnumber.Text);
... 
```

您也可以使用参数名称`@epayorname`，如 SQL-Server，但某些连接类型（如 ODBC）只允许位置参数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T22:22:16.800

**红色警报**您显然在这里处理信用卡信息，但您却让您自己和您的客户容易受到 SQL 注入攻击！

您在公共 Internet 上发布的代码中也有密码！

（史蒂夫似乎有正确的答案。）

# css - 背景图像未在 td 中缩放

> ID：13942208
> 
> 赞同：0
> 
> 时间：2012-12-18T22:02:16.627
> 
> 标签：css, google-chrome, safari, webkit

我在一个试图将我们的 Flash 应用程序转换为 HTML5 和 Css 的团队中，我遇到了一个影响 WebKit 的错误，并希望得到一些帮助来解决这个问题。基本思想是有一个表格，其中包含一个带有背景图像和背景颜色的单元格，并且无论出于何种原因，当图像大小正好合适时`background-size: 100% 100%`，图像实际上会缩小以显示背景颜色。如果我使用像素值而不是 % 值，这也会重复。

在有人告诉我只使用 div 之前（因为它只有一个单元格），此内容是由使用现有工具创建自定义 xml 文档的其他人创作的，该文档为我们提供表格，我必须让我的解决方案工作在我们已经拥有的预先存在的内容上。

这是显示它的小提琴，下面是各种浏览器中的图像：

[http://jsfiddle.net/CEvnx/2/](http://jsfiddle.net/CEvnx/2/)

**闪光灯（参考）**

![闪光灯（参考图像）](../Images/510c04d8d4b8db9d9ae46dcdf008c203.png)

**火狐（工作）**

![火狐](../Images/dec72bae871670978dedef560a90d0a9.png)

**Chrome（图像缩小）**

![铬合金](../Images/db0a4058e0a992ce4309432f80d00ccb.png)

**Safari（图像变大）**

![苹果浏览器](../Images/c5f28d6d8139bddf452f39874c65efee.png)

PS忽略高度和字体差异，因为它们与问题没有任何关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T23:46:44.360

has to do with the table's `border-width`, if you set `border-width` at `2px` or less the background sizes correct (in Chrome/Safari). Quite strange that Chrome shrinks and Safari grows. There must be some odd math or image resize logic in webkit and probably worth submitting a [bug report](http://www.webkit.org/quality/reporting.html).

# ios - 如何在 https 期间测试证书是否过期而不会出现配置文件错误？

> ID：13942210
> 
> 赞同：1
> 
> 时间：2012-12-18T22:02:17.067
> 
> 标签：ios, xcode

我正在与服务器建立 HTTPS 连接，并想测试如果服务器的证书过期会发生什么。

但是，如果我将手机日期设置为未来几年，那么应用程序将无法运行，因为 Xcode/手机现在认为开发配置文件已过期。

是否有任何不涉及将服务器上的证书更改为测试证书的解决方法？

# javascript - 在另一个框架中选择选项后重新加载框架

> ID：13942217
> 
> 赞同：3
> 
> 时间：2012-12-18T22:02:51.073
> 
> 标签：javascript, html

我在子文件夹/子文件夹中有 PHP 页面。在根目录中，我有两个文件：index.html 和 demo.html。

演示.html：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html>
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf8" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
    <script language="JavaScript" type="text/JavaScript">
    <!--
    function MM_jumpMenu(targ,selObj,restore){ //v3.0
        eval(targ+".location='"+selObj.options[selObj.selectedIndex].value+"'");
        if (restore) selObj.selectedIndex=0;
    }
    //-->
    </script>
</head>
<body>
    <div id="demo_wrapper">
        <div id="themeslist">
            <form action="" name="form" id="form">
                <select name="select" onChange="MM_jumpMenu('parent',this,1)">
                    <option value="#">Select Theme</option>
                    <option value="http://127.0.0.1/themes/index.php?theme=1">Theme1</option>
                    <option value="http://127.0.0.1/themes/index.php?theme=3">Theme2</option>
                </select>
            </form>
        </div>
    </div>
</body>
</html> 
```

和 index.html：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Frameset//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-frameset.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title></title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf8" />
    <meta name="description" content="" />
    <meta name="keywords" content="" />
</head>
    <frameset rows="100,*" framespacing="0" frameborder="no" border="0">
        <frame src="http://127.0.0.1/demo.html" name="head_frame" scrolling="no" noresize="noresize" id="head_frame" title="head_frame" />
        <frame src="http://127.0.0.1/themes/index.php" name="main_iframe" id="main_iframe" title="main_iframe" />
    </frameset>
<noframes>
<p>Your browser does not handle frames!</p>
</noframes>
</html> 
```

来源：[http ://www.entheosweb.com/website_design/jump_menus.asp](http://www.entheosweb.com/website_design/jump_menus.asp)

现在的问题是当我在菜单中选择选项时 - 它会重新加载整个页面并且框架消失。仅重新加载选定的框架（main_iframe）有什么变化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:07:29.973

首先，您不使用 iframe，而是使用旧的 fasion 框架集。然而，

在处理选择菜单的表单中，您必须将 target 属性设置为您希望在其中打开位置的框架的名称，如下所示：

```
<form action="" name="form" id="form" target="main_iframe"> 
```

您必须选择适合您要打开它的窗口名称的目标。即 main_iframe 或其他任何东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:24:45.463

所以我找到了解决方案：

这太容易了......只需将选择菜单中的 onchange 操作更改为：

```
onchange="window.open(this.options[this.selectedIndex].value, 'nameOfTargetFrame')" 
```

并删除了整个 *MM_jumpMenu* 代码。感谢您的提示，没有它们我不会找到它:)

# c# - Json解码不解码成复杂对象

> ID：13942221
> 
> 赞同：-1
> 
> 时间：2012-12-18T22:03:16.467
> 
> 标签：c#, .net, .net-4.0, json.net

所以我有一组课程：

```
public class CallQueueRequest
{
    public string ACK { get; set; }
    public string ERROR { get; set; }
    public Agent AGENT { get; set; }
    public Skill SKILL { get; set; }
    public string TIME { get; set; }
}

public class Agent
{
    public string has_result { get; set; }
    public List<Agents> agents { get; set; }
}

public class Agents
{
    public string display_name { get; set; }
    public string time_in_state { get; set; }
    public string state { get; set; }
    public string callstakentoday { get; set; }
    public string avaya_skill_num { get; set; }
}

public class Skill
{
    public string has_result { get; set; }
    public string num_skills { get; set; }
    public List<Skills> skills { get; set; }
}

public class Skills
{
    public string display_name { get; set; }
    public string avaya_skill_num { get; set; }
    public string callsinqueue { get; set; }
    public string callstoday { get; set; }
    public string abantoday { get; set; }
    public string lwt { get; set; }
    public string ewt { get; set; }
    public string servicelvl { get; set; }
    public string avgspeedans { get; set; }
    public string talktime { get; set; }
} 
```

我有这个Json：

```
{
    "ACK":"SUCCESS",
    "ERROR":null,
    "AGENT":{
        "has_results":1,
        "agents":[
            {
                "display_name":"John Doe",
                "time_in_state":"378",
                "state":"Acd",
                "callstakentoday":null,
                "avaya_skill_num":"81"
            },
            {
                "display_name":"Jane Joe",
                "time_in_state":"220",
                "state":"Acd",
                "callstakentoday":null,
                "avaya_skill_num":"81"
            }
        ]
    },
    "SKILL":{
        "has_results":1,
        "num_skills":1,
        "skills":[
            {
                "display_name":"QueueName",
                "avaya_skill_num":"81",
                "callsinqueue":"1",
                "callstoday":"29",
                "abandtoday":"1",
                "lwt":"74",
                "ewt":"223",
                "servicelvl":"86",
                "avgspeedans":"35",
                "talktime":"873"
            }
        ]
    },
    "TIME":1355864270
} 
```

我正在使用这段代码：

```
object qr = JsonConvert.DeserializeObject(jsonString); 
```

这似乎没有正确地从 Json 转换为复杂的类。有人可以帮助我吗？我认为这只是一个小错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:15:36.917

我能够找到一些关于我正在尝试做的事情的信息。如果有人发现这个问题，[这里是答案](https://stackoverflow.com/questions/12711407/c-sharp-json-net-how-to-deserialize-complex-object)

# java - JSP 联系表 - 将其发送到 Gmail

> ID：13942223
> 
> 赞同：5
> 
> 时间：2012-12-18T22:03:18.253
> 
> 标签：java, html, jsp, email, contact-form

我是 JSP 的新手，我正在一个项目中创建一个联系表单页面。我使用 Tomcat 作为我的本地主机。我已经创建了表单，并将其保存在 JSP 中。这是一个非常简单的表格。带有姓名、电子邮件、主题、消息。

现在，我还需要使用 JSP 对其执行操作，并将其发送到 Gmail。因此，当有人使用联系表格时，它将被发送到 gmail 地址。我创建了一个新的 JSP 文件并将其命名为 mail.jsp。

但现在我完全迷失了。有人能帮助我吗？

这是第一页，联系表格：

```
<%@ page language="java" contentType="text/html; charset=ISO-8859-1"
    pageEncoding="ISO-8859-1"%>
    <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

    <html>
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
    <title>Contact Form</title>
    </head>
    <body>

    <form method="post" action="mail.jsp">
    <center><h4>Contact us:</h4></center>
    <br />
    <center>Name: <input type="text" name="name"><br /></center> 
    <br> 
    <center>Email: <input type="text" name="email"><br /></center>
    <br>  
    <center>Subject: <input type="text" name="subject"><br /></center>
    <br>  
    <center>Message: <br/><textarea name="message"> </textarea><br /></center>
    <center>
    <input type="submit" value="Submit">
    <input type="reset" value="Reset">
    </center>   
  </form>
  </body>
  </html> 
```

我现在该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:12:28.147

You need to use an SMTP client (like the one in the [Javamail](http://www.oracle.com/technetwork/java/javamail/index.html) library) to send from your domain `postmaster@example.com` to `dest@gmail.com`. You need to put the Javamail JAR on your CLASSPATH, and code like [in this question](https://stackoverflow.com/q/6616521/315306).

Since Java programming in a JSP is not recommended, you'd better using a Servlet for this.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:44:59.663

由于您的操作设置为 mail.jsp，因此创建该 JSP 并在 JSP 内部您可以使用类似 scriptlet

```
<%
// Use Java Mail API to send email here
%>

Some points
1\. Get the information from request e.grequest.getParameter("subject")
2\. Explore Java Mail API and find out about SMTP server available for you. If not available then you can also Google SMTP Server (Do bit google on it)
3\. I think your problem is how to put Java Code in JSP, so as mentioned above use scriptlets. 
```

执行此操作的最佳方法是创建一个 servlet，并在您的表单操作属性中提供该 servlet 的 URL。从该 servlet 发送电子邮件后，您可以转发到任何其他 JSP 或带有消息（已发送电子邮件）的相同 JSP。

如果您是 JSP 新手，那么这应该会有所帮助，但如果您是 Java 新手，请告诉我，我可以发送可以使用表单参数发送电子邮件的源代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T23:46:07.687

Look at JavaBrains video tutorial, it's great for me.
There will be information how You can send data from form in JSP to servlet and how You can do something with that data.
[http://javabrains.koushik.org/p/jsps-and-servlets.html](http://javabrains.koushik.org/p/jsps-and-servlets.html)

# objective-c - Apple 的 Objective-C 运行时如何在不降低性能的情况下进行多线程引用计数？

> ID：13942226
> 
> 赞同：12
> 
> 时间：2012-12-18T22:03:34.550
> 
> 标签：objective-c, multithreading, performance, memory-management, reference-counting

所以我正在阅读[这篇文章](http://dabeaz.blogspot.com/2011/08/inside-look-at-gil-removal-patch-of.html)，试图从 Python 解释器中删除全局解释器锁 (GIL) 以提高多线程性能，并看到了一些有趣的东西。

事实证明，删除 GIL 实际上使事情变得更糟的地方之一是内存管理：

> 使用自由线程，引用计数操作失去了它们的线程安全性。因此，补丁引入了全局引用计数互斥锁以及用于更新计数的原子操作。在 Unix 上，锁定是使用标准 pthread_mutex_t 锁（包装在 PyMutex 结构中）和以下函数实现的......
> 
> ...在 Unix 上，必须强调简单的引用计数操作已被不少于三个函数调用以及实际锁定的开销所取代。比它贵很多...
> 
> ...显然，引用计数的细粒度锁定是导致性能不佳的主要原因，但即使您取消锁定，引用计数性能仍然对任何类型的额外开销（例如，函数调用等）非常敏感.)。在这种情况下，性能仍然是使用 GIL 的 Python 的两倍。

然后：

> 引用计数对于自由线程来说是一种非常糟糕的内存管理技术。这已经广为人知，但性能数据给出了一个更具体的数字。对于任何尝试 GIL 移除补丁的人来说，这绝对是最具挑战性的问题。

所以问题是，如果引用计数对于线程来说是如此糟糕，那么 Objective-C 是如何做到的呢？我已经编写了多线程 Objective-C 应用程序，并没有注意到内存管理的太多开销。他们在做别的事情吗？像某种对象锁而不是全局锁？Objective-C 的引用计数实际上在技术上对线程不安全吗？作为并发专家，我还不足以真正推测很多，但我有兴趣知道。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-18T22:19:26.950

存在开销，并且在极少数情况下（例如，微基准测试；）可能很重要，无论是否进行了优化（其中有很多）。但是，正常情况针对对象引用计数的非竞争性操作进行了优化。

> 所以问题是，如果引用计数对于线程来说是如此糟糕，那么 Objective-C 是如何做到的呢？

有多个锁在起作用，实际上，对任何给定对象的保留/释放会为该对象选择一个随机锁（但总是相同的锁）。因此，减少了锁争用，同时不需要每个对象一个锁。

（以及 Catfish_man 所说的；一些类将实现自己的引用计数方案，以使用特定于类的锁定原语来避免争用和/或针对其特定需求进行优化。）

实现细节更复杂。

> Objectice-C 的引用计数实际上在技术上对线程不安全吗？

不——它在线程方面是安全的。

实际上，与其他操作相比，典型的代码会调用`retain`并且`release`非常罕见。因此，即使在这些代码路径上有很大的开销，它也会在应用程序中的所有其他操作中分摊（相比之下，将像素推送到屏幕*确实很*昂贵）。

如果一个对象是跨线程共享的（通常是坏主意），那么保护数据访问和操作的锁定开销通常会比保留/释放开销大得多，因为保留/释放的频率很低。

* * *

就 Python 的 GIL 开销而言，我敢打赌，它与作为正常解释器操作的一部分的引用计数增加和减少的频率有关。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-18T22:35:19.800

除了 bbum 所说的之外，许多在 Cocoa 中最常被抛出的对象覆盖了正常的引用计数机制并在对象中存储了一个内联引用计数，它们使用原子加减指令而不是锁定来操作。

（从未来编辑：Objective-C 现在通过将 refcount 与“isa”指针混合，在现代 Apple 平台上自动进行此优化）

# jquery - 从新插入的元素中获取文本

> ID：13942227
> 
> 赞同：0
> 
> 时间：2012-12-18T22:03:42.853
> 
> 标签：jquery, dom

如何使用 DOMNodeInserted 从新插入的元素中获取文本。

例子：

```
<div id='elementID'>
    <span class='elementClass'>Some text</span> <!-- already present -->
    <span class='elementClass'>Some text</span> <!-- already present -->
    <span class='elementClass'>Some text</span> <!-- newly inserted -->
    ...
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:26:38.250

您可以通过 event.target 获取它

```
$('#elementID').on('DOMNodeInserted', function(e) {
    console.log($(e.target).text());
});​ 
```

[http://jsfiddle.net/Pccwc/](http://jsfiddle.net/Pccwc/)

# jquery - 使用 jQuery 和 CSS3 在点击时翻译另一个 div

> ID：13942229
> 
> 赞同：0
> 
> 时间：2012-12-18T22:03:48.120
> 
> 标签：jquery, css, click, transform

我正在尝试模仿[http://mashable.com/](http://mashable.com/)上可爱的移动菜单实现（缩小浏览器的宽度以查看左上角的菜单按钮，然后单击它）。

基本上，我有一个按钮（#slide-menu）。页面内容的其余部分包含在一个“#nudge”div 中，当单击按钮时，我想向右滑动 250 像素。

```
jQuery('#slide-menu').click(function() {
        jQuery('#nudge').css('-webkit-transform', 'translate(250px, 0)');
        jQuery('#mobile-menu').css('display', 'block');
    }); 
```

#mobile-menu 包含从屏幕左侧弹出的导航。此代码有效，但没有平滑过渡。内容只是弹出到右侧并出现菜单，但没有任何延迟来提供像 mashable 上的平滑幻灯片。我也尝试切换一个类而不是使用 .css() 来允许多个前缀，但运气更差。

我不确定我是否误解了 transform 属性的工作原理。我已经尝试阅读它，但我能找到的大多数示例都与将鼠标悬停在一个元素上并使其具有动画效果有关，而不是在单击另一个元素时操纵元素。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T20:07:59.080

我确实错过了过渡时间！

```
 jQuery('#slide-menu').click(function() {
        jQuery('#nudge').toggleClass('slide-menu');
    }); 
```

和CSS：

```
.slide-menu{
    transform: translate(180px, 0);
    -ms-transform: translate(180px, 0);
    -moz-transform: translate(180px, 0);
    -webkit-transform: translate(180px, 0);
    -o-transform: translate(180px, 0);
    -webkit-transition-duration: 1s;
} 
```

瞧！

# r - 如何在 R 中使用带状图指定对数刻度 y 轴？

> ID：13942230
> 
> 赞同：2
> 
> 时间：2012-12-18T22:03:59.470
> 
> 标签：r, lattice

如何`stripplot`从带有 log y 轴的 lattice 包中使用？使用`plot`，我可以使用参数`log`并在对数刻度上指定我想要的轴。有没有办法用 stripplot 做到这一点，而无需使用数字数据的日志，然后指定 y 轴点？

`singer`使用数据的示例代码：

```
stripplot(voice.part ~ height, data = singer, aspect = 1,
      jitter.data = TRUE, xlab = "Height (inches)") 
```

注意。这个数据不需要是对数刻度，我只是用它作为例子

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T22:14:43.277

使用 lattice 包对绘图中的轴进行微调由`scales`参数处理（请参阅页面上的相应条目`?xyplot`）。该参数本质上是一个列表，其中两个列表组件可以是`x`和`y`，它们也是具有分别控制 x 轴和 y 轴外观的组件的列表。

对于 x 轴上的对数刻度，请使用

```
stripplot(voice.part ~ height, data = singer, aspect = 1,
      jitter.data = TRUE, xlab = "Height (inches)",
      scales = list(x = list(log = 2))) 
```

替换`2`为您想要的任何日志库。

# c++ - KDevelop IDE 中的关键字“incr”是什么？

> ID：13942231
> 
> 赞同：7
> 
> 时间：2012-12-18T22:04:01.290
> 
> 标签：c++, keyword, kdevelop

我刚刚下载了[KDevelop](http://kdevelop.org/)，因为它会扫描头文件以在代码完成方面提供更好的建议。
当根本不包含任何头文件时，我正在查看它建议的所有关键字： ![在此处输入图像描述](../Images/3315f7793b2ce20316c66d8059c3857e.png)
为什么推荐“incr”？
这不是 C++ 关键字。

* * *

它是什么，它的用途是什么？
我认为它可能是增量的缩写..？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T23:50:21.260

大概是个bug吧。查看 KDevelop 源代码，`incr`已`languages/cpp/codecompletion/context.cpp`在第 2326 行的文件中添加代码完成。它看起来像是递增操作的同义词，但只有有效的同义词是：`and (&&), bitand (&), and_eq (&=), or (||), bitor (|), or_eq (|=), xor (^), xor_eq (^=), not (!), not_eq (!=), compl (~)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T22:43:49.527

我在 C++98 或 C++11 中看不到任何`incr`作为关键字或替代标记（例如`and`for `&&`）的提及，因此我只能得出结论，其他一些语言使用该关键字并且 KDevelop 没有正确引入用于名称建议的仅限 C++ 的关键字集。

# c# - 您如何以编程方式从 dot.net 调用 ashx 文件？

> ID：13942232
> 
> 赞同：1
> 
> 时间：2012-12-18T22:04:02.373
> 
> 标签：c#, .net, ashx

我获得了一个返回图像的 ashx“服务”。我是 ashx 文件的新手 - 所以不知道如何处理它。

我需要将图像流式传输到 byte[] 中，以便可以将其复制到其他地方。我怎么做？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:21:53.767

您可以使用指向 asxh 的[WebClient.DownloadData 。](http://msdn.microsoft.com/en-us/library/system.net.webclient.downloaddata%28v=vs.80%29.aspx)

所以让我给你一个样本。假设您的图像位于 asp.net 页面上，如下所示：

```
<img src="http://someServer/someSite/MyHandler.ashx?id=myId"/> 
```

在这种情况下，您可以使用以下代码：

```
 using (System.Net.WebClient wclient = new System.Net.WebClient())
        {
            byte[] data = wclient.DownloadData(
                "http://someServer/someSite/MyHandler.ashx?id=myId");  
        } 
```

或者，您可以使用[WebRequest](http://msdn.microsoft.com/en-us/library/system.net.webrequest.aspx)

# android - Android - SimpleCursorAdapter 是否允许像 BaseAdapter 这样的多种布局？

> ID：13942238
> 
> 赞同：4
> 
> 时间：2012-12-18T22:04:29.543
> 
> 标签：android, sqlite, adapter, simplecursoradapter

我知道您可以创建自定义`Adapter`扩展`BaseAdapter`并创建各种布局，这些布局可以根据所在的行进行膨胀`AdapterView`..

但是有没有什么方法可以通过 a 获得简单的定制量`SimpleCursorAdapter`？

例如。我有一个数据库，我想查询它并将结果返回到`ListView`具有交替行布局的数据库。

会`SimpleCursorAdapter`做吗？或者有什么优雅的解决方案吗？

干杯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T22:23:37.067

> 但是有什么方法可以使用 SimpleCursorAdapter 进行简单的定制？

就像 BaseAdapter 一样，您可以扩展 CursorAdapter 或 SimpleCursorAdapter 来进行自定义。

> 例如。我有一个数据库，我想查询它并将结果返回到具有交替行布局的 ListView。

如果您只是交替使用诸如行颜色之类的次要事物，则可以简单地覆盖`bindView()`并检查`if(cursor.getPosition() % 2 == 0)`（或`== 1`）以设置适当的背景颜色。

如果您在每个布局中使用不同类型或数量的视图，则需要覆盖`getViewTypeCount()`和`getItemViewType()`。然后使用`getItemViewType()`in`newView()`加载适当的布局并`bindView()`显示适当的数据。

# c++ - 指向静态变量的指针和指向某个变量的静态指针之间的区别

> ID：13942240
> 
> 赞同：6
> 
> 时间：2012-12-18T22:04:33.637
> 
> 标签：c++, c

有没有区别

```
static int * pn; 
```

和

```
int static * pn; 
```

基本上我正在寻找指向静态变量的指针和指向某个变量的静态指针之间的区别，并且不确定上述两个声明是否对应于它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T22:07:54.037

在 C 中没有区别，但不鼓励使用第二种形式。

> （C99，6.11.5p1）“存储类说明符在声明中的声明说明符开头以外的位置是一个过时的功能”

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T22:05:55.717

不，没有区别。在这里，声明说明符序列是`static int`or`int static`并且说明符在声明说明符序列中的顺序无关紧要。您的两个声明都具有“指向 int 的指针”类型。

你可以做其他奇怪的事情，比如`int static unsigned const* pn;`如果你足够讨厌别人。我写[了一个涵盖该主题的问题/答案](https://stackoverflow.com/q/13808932/150634)。

# sharepoint-2010 - 如何在 Project Web App 网站集中启用功能？

> ID：13942244
> 
> 赞同：0
> 
> 时间：2012-12-18T22:04:41.597
> 
> 标签：sharepoint-2010

我正在尝试在 Project Web App 中启用功能。实际上，我正在尝试重新部署与之前具有相同名称和相同 Guid 值的工作流 .wsp 文件。我从“管理农场解决方案”中卸载了该解决方案。

当我尝试添加和部署解决方案时，它失败了。

以下是我到目前为止使用的命令：

```
Add-SPSolution -LiteralPath C:\DeployPSS\Workflow.wsp
Install-SPSolution –Identity Workflow.wsp –GacDeployment
Enable-SPFeature -Identity Workflow Feature1 -Url http://xyz/pwa 
```

谁能让我知道将解决方案重新部署到具有相同名称和相同 Guid 值的农场的过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T06:25:45.527

试试这个

```
Enable-SPFeature -Identity "Workflow Feature1" -Url http://xyz/pwa 
```

如果功能名称包含空格，则应使用逗号。

如果这不起作用，请提供您遇到的详细错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-24T07:55:02.233

wsp 部署可能存在问题。

如果之前部署的 wsp 可用，您必须在以下位置收回并删除它

管理中心 -> 在场管理中单击管理场解决方案 -> 检查 wsp 的状态。

使用以下步骤撤消和删除

1) 单击 wsp 名称。

2) 单击撤回解决方案。

3) 选择何时像现在一样撤回解决方案。

4) 单击确定按钮并等待几秒钟，然后刷新页面。现在状态将是“未部署”。

5) 再次点击 wsp 名称，状态将是“未部署”</p>

6) 单击“删除解决方案”。

现在，如果您使用工作流 wsp，您可以使用以下步骤部署和安装它

打开共享点管理外壳

开始 -> 程序 -> Microsoft SharePoint 2010 产品 -> SharePoint 2010 命令行管理程序（右键单击并以管理员身份运行）

在管理外壳中使用它添加 wsp

添加-SPSolution -LiteralPath "E:\WSP Backup\test.wsp"

在管理外壳中使用它安装添加的 wsp

安装-SPSolution -Identity test.wsp –GACDeployment

# wolfram-mathematica - 在数学绘图的刻度标签中强制科学记数法

> ID：13942255
> 
> 赞同：3
> 
> 时间：2012-12-18T22:05:12.253
> 
> 标签：wolfram-mathematica

我正在尝试在我的 Plot 上科学格式化刻度标签，这在某种程度上是一个框架。通过搜索 Mathgroup 档案，看起来弄乱刻度标签的常用方法是使用 AbsoluteOptions 提取它们，使用自定义格式运行替换规则，然后使用 Ticks->{... 显式地将它们提供给绘图函数} 选项。但是，以下内容不适用于 FrameTicks：

```
makePlotLegend[names_, markers_, origin_, markerSize_, fontSize_, 
   font_] := 
  Join @@ Table[{Text[Style[names[[i]], FontSize -> fontSize, font], 
      Offset[{1.5*markerSize, -(i - 0.5)*
         Max[markerSize, fontSize]*1.25}, Scaled[origin]], {-1, 0}], 
     Inset[Show[markers[[i]], ImageSize -> markerSize], 
      Offset[{0.5*markerSize, -(i - 0.5)*
         Max[markerSize, fontSize]*1.25}, Scaled[origin]], {0, 0}, 
      Background -> Directive[Opacity[0], White]]}, {i, 1, 
     Length[names]}];

LJ[r_] := 4 e ((phi/r)^12 - (phi/r)^6)

phi = 2.645;
e = 10.97 8.621738 10^-5;

l1 = Plot[LJ[r], {r, 2, 11}, PlotStyle -> {Blue}, 
  PlotRange -> {{2, 6}, {0.001, -0.002}}, Frame -> True,
  LabelStyle -> {8}, 
  Epilog -> 
   makePlotLegend[{"He-He", 
     "H-H"}, (Graphics[{#, Line[{{-1, 0}, {1, 0}}]}]) & /@ {Blue, 
      Red}, {0.80, 0.35}, 7.5, 7.3, "Times New Roman"]] 
```

# visual-studio-2010 - 签出 TFS 2010 变更集中的文件

> ID：13942258
> 
> 赞同：2
> 
> 时间：2012-12-18T22:05:25.200
> 
> 标签：visual-studio-2010, version-control

我们目前使用 TFS 2010 源代码控制。我有一个要回滚的更改集，但我想在签入旧代码之前签出所有包含的文件并将它们搁置。有谁知道这是否可能？有很多很多文件，我不想手动检查它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T01:27:45.097

由于回滚实际上不会删除旧文件，而是会创建一个删除了更改的新版本，因此您始终可以通过获取原始变更集编号来查看文件的旧版本。

不需要搁板。只需使用获取特定版本并检索文件的旧版本。

# java - 如何将 json 从 primefaces 发送到 jquery

> ID：13942260
> 
> 赞同：0
> 
> 时间：2012-12-18T22:05:31.193
> 
> 标签：java, jquery, json, jsf-2, primefaces

我想问一下如何将json从primefaces发送到前端的jquery？我有简单的json：

```
this.jsonObject.put("key", "value"); 
```

而且我什至不知道如何开始发送​​和接收数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T07:57:55.753

使用[RequestContext](http://www.primefaces.org/docs/api/3.4/org/primefaces/context/RequestContext.html)的 addCallbackParam 功能（[示例](http://www.primefaces.org/showcase-labs/ui/requestContext.jsf)）。

# sql - Linq to SQL 问题

> ID：13942265
> 
> 赞同：0
> 
> 时间：2012-12-18T22:05:55.687
> 
> 标签：sql, linq

我创建了一个类库，将 linq 添加到 SQL 类并拖动一些表。创建另一个类库向上述项目添加一个引用并为 GetCustomers 创建一个简短的函数（dim query = from c in customers select c return c.toList）然后我添加一个 Vb .Net Web 应用程序并向第二个类添加一个引用创建库并调用 GetCustomers 方法。我收到一条错误消息，告诉我添加对包含 linq to SQL 数据模型的类的引用，这似乎不正确。

我怎样才能正确分离这些层？我将不胜感激和 Vb .Net 中的文章或任何代码。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:12:05.563

由于数据类是在 Linq to SQL 类库中定义的，因此 Web 应用程序需要对其进行引用才能知道这些类是什么。

要真正分离层，您需要[使用 Linq to SQL 类](http://blog.bobcravens.com/2009/09/best-practices-for-using-linq-in-your-data-access-layer/)在第二个类库中创建单独的传输对象。

像[automapper](https://github.com/AutoMapper/AutoMapper)这样的工具在那里真的很有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T22:17:42.140

您的 LINQ to SQL 模型需要显式引用才能使用它们。您不能通过另一个参考来推断参考。

解决此问题的一种方法是使用 DTO 和视图模型。

*   在这种情况下，Web 应用程序调用中间层的存储库
*   中间层为实体调用数据层
*   数据层给中间层实体
*   中间层将实体转换为数据传输对象并将其返回给 Web 应用程序
*   Web 应用程序使用数据传输对象将实体的状态传递给中间层
*   Web 应用程序将 DTO 转换为视图模型以进行演示。

这是一个非常笼统的概述。基本上，每一层对数据的外观都有自己的想法，并与另一层就如何翻译签订了合同。其他人可以比我更好地解释它。[这](http://www.codeproject.com/Articles/430014/N-Tier-Architecture-and-Tips)是一篇关于 N 层架构的相当不错的文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T22:13:22.620

听起来您的函数可能会将值作为 List(Of Customers) 类型返回 - 在这种情况下，客户类型是在您的第一个类库中定义的。

假设您的项目名为“Data”、“Business”和“UI”，如果您不想让 UI 项目引用 Data 类库，则业务项目将不得不将数据的结果复制或呈现到在业务中定义的表单，以便 UI 可以使用它。否则，即使 UI 最终只针对业务进行调用，UI 也必须仅为类型定义引用 Data。

# java - 模拟结果集关闭失败

> ID：13942266
> 
> 赞同：-5
> 
> 时间：2012-12-18T22:05:57.790
> 
> 标签：java, sql, jdbc

我将如何模拟这个异常：

```
java.sql.SQLException: Invalid state, the CallableStatement object is closed.
    at net.sourceforge.jtds.jdbc.JtdsCallableStatement.checkOpen(JtdsCallableStatement.java:120)
    at net.sourceforge.jtds.jdbc.JtdsStatement.getConnection(JtdsStatement.java:1207)
    at net.sourceforge.jtds.jdbc.JtdsResultSet.getConnection(JtdsResultSet.java:409)
    at net.sourceforge.jtds.jdbc.JtdsResultSet.close(JtdsResultSet.java:470)
    at org.apache.tomcat.dbcp.dbcp.DelegatingResultSet.close(DelegatingResultSet.java:152)
    at 
```

使用 Java 代码。

下面的这段代码有时会产生上面的错误，但有时不会：

```
 private void doRequest(HttpServletRequest request) throws IOException, ServletException {
        CallableStatement stmt = null;
        ResultSet rs = null;
        String someString;
        try {
            this.connectDB();
            stmt = this.conn.prepareCall("{call sp_SomeSP1(?)}");
            stmt.setLong(1, someFunc());

            rs = stmt.executeQuery();

            while (rs.next()) {
                if (rs.getInt(1)==someOtherFunc()) {
                    someString = rs.getString(2);
                    break;
                }
            }

            stmt = conn.prepareCall("{call sp_someSP(?, ?)}");
            stmt.setLong(1, someFunc());
            stmt.setTimestamp(3, new Timestamp(getFrom().getTime()));

            rs = stmt.executeQuery();
            if (rs.next()) {
                lastUpdated = rs.getTimestamp("LastUpdated");
            }

            request.setAttribute("lastUpdated", lastUpdated);

            LOGGER.debug("Forwarding to view...");
            getServletContext().getRequestDispatcher("/SomeJSP.jsp").forward(this.request, this.response);

        } catch (NamingException e) {
            LOGGER.error("Database connection lookup failed", e);
            sendError("Server Error");
        } catch (SQLException e) {
            LOGGER.error("Query failed", e);
            sendError("Server Error");
        } catch (IllegalStateException e) {
            LOGGER.error("View failed", e);
        } finally {
            try {
                if (rs!=null) rs.close(); 
            } catch (NullPointerException e) {
                LOGGER.error("Result set closing failed", e);
            } catch (SQLException e) {
                LOGGER.error("Result set closing failed", e);
            }
            try {
                if (stmt!=null) stmt.close();
            } catch (NullPointerException e) {
                LOGGER.error("Statement closing failed", e);
            } catch (SQLException e) {
                LOGGER.error("Statement closing failed", e);
            }
            try {
                this.closeDB();
            } catch (NullPointerException e) {
                LOGGER.error("Database connection closing failed", e);
            } catch (SQLException e) {
                LOGGER.error("Database connection closing failed", e);
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:08:48.050

我在想这样的事情：

1.  创建一个准备好的语句并使用它进行查询，返回一个结果集。
2.  关闭准备好的语句。
3.  关闭准备好的语句后尝试关闭结果集。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:09:56.980

Using [Mockito](http://code.google.com/p/mockito/):

```
when(mockResultSet.close()).doThrow(new SQLException("Invalid state, the CallableStatement object is closed.")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T22:08:54.163

在调用之前调用close [()](http://docs.oracle.com/javase/6/docs/api/java/sql/Statement.html#close%28%29)`statement``execute();`

# ios - 如何显示 iPad 的 GPU 利用率？

> ID：13942267
> 
> 赞同：1
> 
> 时间：2012-12-18T22:06:01.783
> 
> 标签：ios, ipad, gpu, diagnostics

我正在为 iPad 应用程序开发诊断工具，我想将 CPU 和 GPU 都渲染到表格视图中。我已成功拉出 CPU，但找不到确定 GPU 利用率/可用性的挂钩。iOS中是否有类似于sysctl库的方法？

谢谢。

# php - 在mysqli中循环结果

> ID：13942268
> 
> 赞同：13
> 
> 时间：2012-12-18T22:06:04.357
> 
> 标签：php, mysqli, while-loop

我是 mysqli 的新手，并且在使用 mysqli 循环遍历结果时遇到问题。不幸的是，我只得到一个结果。当我将查询放入 phpMyAdmin 时，它会产生三个结果。我相信相关代码在这里，我只是说错了：

```
$connection = new mysqli($host, $databaseUsername, $databasePassword, $database);

if ($connection->connect_errno > 0) {
    die ('Unable to connect to database [' . $connection->connect_error . ']');
}

$sql = "SELECT clientId, studentFirstName, studentLastName
        FROM clients
        WHERE (studentEmail = '$postEmail') OR (parentEmail = '$postEmail');";  

if (!$result = $connection->query($sql)) {
    die ('There was an error running query[' . $connection->error . ']');
}

echo '<select class = "toolbarDropdown" id = "toolbarDropdown-MultipleAccounts">';

    while ($row = $result->fetch_array()) {
        echo '<option value="'.$row["clientId"].'">'.$row["studentFirstName"].' '.$row["studentLastName"].'</option>';
    }

echo '</select>'; 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-18T22:25:46.233

您在 HTML 中缺少关闭的 " at option="value <--

注意

```
$row = $result->fetch_array() 
```

可以替换为

```
$row = $result->fetch_assoc() 
```

这样做，您获取的每条记录的数组将占用一半大小。

# heroku - 将 Mercurial 主分支部署到 Heroku

> ID：13942271
> 
> 赞同：2
> 
> 时间：2012-12-18T22:06:08.727
> 
> 标签：heroku, mercurial, hg-git

几个月来，我一直在使用 hg-git 将我的 hg 存储库部署到 Heroku，但它最近停止工作了。

```
0 HAL:0 work/nrb % hg push git+ssh://git@heroku.com:nrb.git
pushing to git+ssh://git@heroku.com:nrb.git/
exporting hg objects to git
converting revision 75ef42d9fe22b99259a2a05b28be56c92d0aa01b
creating and sending data
["git-receive-pack 'nrb.git'"]
Pushed to non-master branch, skipping build. 
```

如您所见，Heroku 想要一个 master 分支。我尝试创建一个并推动

`hg push -b master git+ssh://git@heroku.com:nrb.git/`

但得到了相同的结果。**有没有办法让 hg-git 将一个名为 master 的分支推送到 Heroku？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T05:23:56.783

尝试用“-B”替换命令中的“-b”。小写意味着推送一个分支，而大写意味着推送一个书签，这是 Hg-Git 映射到 Git 分支的内容（无论如何，在最常见的用例中）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T17:52:54.860

1.  检查`.hg\git\HEAD`文件内容，必须是`ref: refs/heads/master`
2.  验证并修复如果需要的提示数据

    `$ hg log -r tip`

    `changeset: 7:32bbc6bc3867`

    `bookmark: master`

    `tag: default/master`

    `tag: tip`

# android - 带有 RoboGuice 2.0 的 Android 应用程序 - 如何使用应用程序上下文注入单例

> ID：13942273
> 
> 赞同：6
> 
> 时间：2012-12-18T22:06:22.530
> 
> 标签：android, dependency-injection, guice, roboguice

我有一个 GameStateManager 单例，我希望它可用于我的所有活动。特别是我希望它使用应用程序上下文而不是单个活动上下文来监听 EventManager 触发的事件。

GameStateManager 标有单例注解

我试图在 Application.OnCreate 期间注入 GameStateManager （对不起，从内存中输入了以下代码段，没有复制和粘贴，所以可能不正确）

```
public void OnCreate(){
    GameStateManager gameStateManager = RoboGuice.InjectMembers(this.getApplicationContext(), new GameStateManager())

} 
```

我认为 GameStateManager 的实例将使用应用程序上下文构建，并且由于它被注释为单例，因此稍后可以使用应用程序上下文。我注意到，当我将 GameStateManager 注入到一个活动中时，我实际上得到了一个与活动上下文相关联的新单例。所以本质上我有2个单身人士:)

关于如何拥有连接到应用程序上下文的真正“单例”的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-09T08:30:20.050

您观察到的问题可能是由开发模式下的延迟初始化（请参阅[https://code.google.com/p/google-guice/wiki/Scopes ）引起的。](https://code.google.com/p/google-guice/wiki/Scopes)

如果您首先在活动中注入您的经理，那么它会在此时延迟创建。由于`Activity`满足 any `@Inject Context`，因此注入了活动。这实际上是非常有害的，因为如果你的经理被注释了`@Singleton`，它的寿命比活动长，你基本上只是造成了内存泄漏。

我发现它更明确`@Inject` `Application`或`Activity`取决于我期望注入的位置（`Activity`通常用于`@ContextSingleton`'s，`Application`用于 plain `@Singleton`'s）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:30:35.133

由于**RoboGuice**是在**Guice**下构建的，因此您可以尝试使用`@Singelton`注释来保证每个实例`Injector`

查看[示例应用程序](https://github.com/emmby/roboguice/blob/master/astroboy/src/main/java/org/roboguice/astroboy/controller/Astroboy.java)

# c++ - 基类对象中的受保护方法

> ID：13942276
> 
> 赞同：2
> 
> 时间：2012-12-18T22:06:27.807
> 
> 标签：c++

> **可能重复：**
> [不能调用基类保护函数？](https://stackoverflow.com/questions/477829/cannot-call-base-class-protected-functions)

在 g++ 下编译：

```
class A
{
protected:
    void f(){}
};

class B: public A
{
    void g()
    {
        A a;
        f(); //This works
        a.f(); //Error: "A::F() is protected"
        this->f(); //Works
        ((A*)this)->f(); //Same error
    }
}; 
```

为基类的非 this 对象调用受保护函数时出错。编译器是 GCC - 但相同的代码在其他风格的 GCC 下工作。请问这是怎么回事 - 因为当调用基类的受保护方法时，`verboten`除非它是 via `this`？

编辑：对不起，我的错。这都是规范；在它起作用的另一个地方，有一种我没有注意到的友谊。请投票关闭。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:09:22.413

You're calling function f() from the instance A. f() is a private function of B so from within B, you can do something like:

```
this->f() 
```

But if you make a new instance of A like you did and then call its f(), it's protected.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T22:14:06.557

您不必`f`通过`this`- 您可以从任何类型的对象访问它`B`。例如，这将在内部工作`B::g`：

```
B b;
b.f(); 
```

C++03 标准说 (11​​.5)：

> 当派生类的友元或成员函数引用基类的受保护非静态成员函数或受保护非静态数据成员时，除了前面第 11 节中描述的那些之外，还应用访问检查。除非形成指向成员的指针（5.3 .1)，**访问必须通过派生类本身（或从该类派生的任何类）的指针、引用或对象**

所以你可以`f`从一个对象类型`B`或派生对象访问`B`——包括但不限于`*this`.

C++11 标准包含类似的限制 (11.4)

# c# - .NET 浏览器模拟 API

> ID：13942277
> 
> 赞同：3
> 
> 时间：2012-12-18T22:06:31.707
> 
> 标签：c#, .net, browser, emulation

我正在搜索 .NET 库/组件，这将允许我执行以下操作：

1.  加载网页
2.  执行链接的 JS
3.  在页面范围内执行我自己的JS并返回执行结果，可以是复杂对象或对象数组。

到目前为止，我发现的唯一解决方案是使用 WebBrowser 对象，但它需要大量样板代码才能使一切正常工作，并且无法处理对象数组。在以下代码示例中，我收到了 RuntimeBinderException`dynamic val = o.a;`

```
class Program
{
    [STAThread]
    static void Main(string[] args)
    {
        var t = new System.Threading.Thread(BrowserThread);
        t.SetApartmentState(System.Threading.ApartmentState.STA);
        t.Start();

        Console.ReadLine();
    }

    private static void BrowserThread()
    {
        var wb = new WebBrowser();
        wb.Navigate("http://google.com");
        wb.DocumentCompleted += (sender, args) =>
            {
                var head = wb.Document.GetElementsByTagName("head")[0];
                var script = wb.Document.CreateElement("script");
                dynamic el = script.DomElement;
                el.text = "function test(){return [{a:2},{a:2},{a:2}]}";
                head.AppendChild(script);
                dynamic result = wb.Document.InvokeScript("test");
                dynamic o = result.pop();
                dynamic val = o.a;
            };
        Application.Run();
    }
} 
```

任何人都可以提供替代解决方案或帮助解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:09:26.063

you could try `dynamic a = o[0].a;` or `dynamic a = result[0].a;` and see if that helps...

Another point: you should check the type of `result` by stepping though your code... this might help finding a working answer...

Regarding alternatives there are some options:

*   [WebKit.Net](http://sourceforge.net/projects/webkitdotnet/) (free)

*   [Awesomium](http://awesomium.com/)
    It is based on Chrome/WebKit and works like a charm. There is a free license available but also a commercial one and if need be you can buy the source code :-)

*   [WatiN](http://watin.org/) (also free)

# events - knockoutjs：防止没有处理程序的元素的事件冒泡

> ID：13942279
> 
> 赞同：8
> 
> 时间：2012-12-18T22:06:37.317
> 
> 标签：events, event-handling, knockout.js, event-bubbling

似乎[绑定](http://knockoutjs.com/documentation/event-binding.html)`<event>Bubble: false`仅*在*为. _*`<event>`*

 *这是一个示例[fiddle](http://jsfiddle.net/stvnmntjy/stjFM/)。

对于具有某些事件的本机处理程序（例如 click: `<textarea>`、`<a>`、`<select>`等）的元素，本机处理程序就足够了，我希望`clickBubble: false`在它们上设置绑定，例如，无需绑定“虚假”处理程序即可工作。

我想我的问题是，是否有另一种淘汰方法可以在没有额外绑定的情况下实现这一目标？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-18T22:43:11.997

处理程序不是实际的`Bubble`绑定处理程序，而是用作绑定中的选项`event`（`click`绑定调用`event`绑定）。因此，它们不会自行运行。

因此，您可以添加一个“伪造的”无操作处理程序并使用`clickBubble`，或者您当然可以选择创建一个自定义绑定来为您执行此操作。

也许是这样的：

```
ko.bindingHandlers.preventBubble = {
    init: function(element, valueAccessor) {
        var eventName = ko.utils.unwrapObservable(valueAccessor());
        ko.utils.registerEventHandler(element, eventName, function(event) {
           event.cancelBubble = true;
           if (event.stopPropagation) {
                event.stopPropagation();
           }                
        });
    }        
}; 
```

然后放：

```
<input data-bind="preventBubble: 'click'" /> 
```

如有必要，您还可以进一步增强它以接受一系列事件。

示例：http: [//jsfiddle.net/rniemeyer/WcXwZ/](http://jsfiddle.net/rniemeyer/WcXwZ/)*

# entity-framework-4.1 - 实体框架 EDMX 设计器扩展默认值

> ID：13942281
> 
> 赞同：0
> 
> 时间：2012-12-18T22:06:43.123
> 
> 标签：entity-framework-4.1, edmx-designer

为 EDMX 设计器添加了设计器扩展，允许我指定与某些 T4 模板一起使用的附加信息。一切正常，但我想在首次创建或更新模型时为我的一些属性分配默认值。例如，我想将我的一个属性值设置为主键的某个值。知道我怎么能参与其中吗？

谢谢

射线

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T17:17:28.357

我使用 SQL Server 删除表中的`DocumentNode`( `hierachyid`) 和`DocumentLevel`列`Production.Document`，然后将该`Title`列设置为表的主键。这似乎奏效了......到目前为止。

在 SQL Server 对象资源管理器中 > 将 AdventureWorks db 展开到 Production.Document 表 > 展开列文件夹 > 右键单击​​ DocumentNode > 单击修改 >>> 表在查询编辑器中填充 > 右键单击​​要编辑的列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:26:31.917

挂钩创建意味着仅为属性支持字段指定默认值或在构造函数中设置它。挂钩更新需要属性设置器中的逻辑 - 通常通过实现`INotifyPropertyChanged`接口来处理。

# android - 我们可以有任何其他方式来访问 Android 中的 c++ 代码，而不是使用 JNI

> ID：13942283
> 
> 赞同：0
> 
> 时间：2012-12-18T22:07:07.323
> 
> 标签：android, c++, java-native-interface, latency

我正在编写一个测试应用程序来测量延迟，无论如何我可以访问网络数据帧的（视频/音频）时间戳和应用层中的标签吗？为了确保我不添加任何开销，我想避免 JNI，或者 JNI 是选项？

欢迎提出建议:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:50:07.620

我认为用纯 C++ 编写一个应用程序并让它在有根手机上运行可能是可能的，但很麻烦。但是，使用最新的 NDK，JNI 实际上非常容易。您必须编写几行代码才能使事情正常进行。加载库的开销是公平的，但您可以在 c++ 中测量函数的延迟，它应该与本机 c++ 一样快。将结果返回给 java 时会添加唯一的延迟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:15:55.653

如果您想使用纯 cpp 编写应用程序，您可以从[android-ndk](http://developer.android.com/tools/sdk/ndk/index.html)获取演示。在示例文件夹下有一个名为 native-activity 的项目。它是用纯cpp编写的。

# css - 改变 高度

> ID：13942289
> 
> 赞同：0
> 
> 时间：2012-12-18T22:07:34.243
> 
> 标签：css, primefaces

我正在使用并且我有一长串节点。

我可以更改宽度大小但不能更改高度如何更改树高？

```
.ui-tree-container {
   border:1px solid;
   width: 20%;
   height: 20%;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:58:38.383

这是有效的

```
.ui-tree {
  height: 700px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:24:29.047

您必须使用像 20px 这样的实数，而不是高度的百分比。

# java - 左轴标签字体重置为红色？

> ID：13942293
> 
> 赞同：0
> 
> 时间：2012-12-18T22:07:43.180
> 
> 标签：java, android, teechart

请回想这段代码： [如何去除中心点下方的阴影？](https://stackoverflow.com/questions/13928039/how-to-remove-the-shadow-below-the-center-point)

当我显示该图表并稍后切换到条形图/饼图时，左轴标签设置为**red**。我无法理解这一点，因为我从不修改该变量。我确定这是一个错误。

一种解决方法是在生成图表之前明确设置颜色：

```
_chart.getAxes().getLeft().getLabels().getFont().setColor(Color.fromArgb(0xffffffff)); 
```

此外，相关的函数调用可能如下：

```
_chart.setAutoRepaint(false);
_chart.removeAllSeries();
_chart.getAxes().getBottom().setIncrement(1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T11:51:10.127

你说的对。处理 CircularGauge 时，图表轴正在恢复错误的默认 Ticks&MinorTicks 笔和 Labels 字体。我刚刚为下一个维护版本更正了它。

# drupal-6 - drupal 6 中节点模板命名的问题

> ID：13942297
> 
> 赞同：0
> 
> 时间：2012-12-18T22:07:53.707
> 
> 标签：drupal-6

我正在尝试覆盖 drupal 6 中节点的模板。例如，我有一个名为 purchase 的内容类型。为此，我创建了 node-purchase.tpl.php 来覆盖模板并且它起作用了。我有另一种名为 user_account_map 的内容类型。为此，我创建了 node-user_account_map.tpl.php。但是，在这种情况下它似乎不起作用。在第二种情况下，模板的名称应该是什么。我已经清除了缓存并全部查看是否是因为缓存，但事实并非如此。建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T10:12:30.360

node-user_account_map.tpl.php 改为将其重命名为 node-user-account-map.tpl.php 并清除缓存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T18:22:53.677

如有疑问，请尝试安装[Devel Themer 模块](http://drupal.org/project/devel_themer)，它将显示您命名主题文件的选项。有关示例，请参阅[截屏视频和教程](http://drupal.org/node/209561)。

# javascript - 如何按值对集合进行排序？

> ID：13942299
> 
> 赞同：2
> 
> 时间：2012-12-18T22:08:00.537
> 
> 标签：javascript, underscore.js

我有一个对象数组。我想使用 underscore.js 按它们各自的值对每个对象进行排序。

```
var myArray = [
    {a:1, b:2, c:2},
    {a:1, b:3, c:2},
    {a:3, b:2, c:1},
    {a:1, b:1, c:4},
    {a:1, b:2, c:4},
]; 
```

我试过这个方法没有运气...

```
var myArray = [
    {a:1, b:2, c:2},
    {a:1, c:2, b:3},
    {c:1, b:2, a:3},
    {a:1, b:1, c:4},
    {a:1, b:2, c:4},
]; 
```

我正在尝试使用这种方法。

```
_.each(myArray, function(obj) {
    _(obj).sortBy(function(val, key) {
      return val;
    }); 
```

});

这是我的小提琴[http://jsfiddle.net/rsturim/wNLkX/](http://jsfiddle.net/rsturim/wNLkX/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T22:15:00.097

您不能对对象中的属性进行排序。对象中的属性没有任何特定的顺序。

循环访问属性时返回的顺序取决于实现，并且在浏览器之间有所不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T22:27:51.307

如前所述，您不能在 Javascript 中对属性进行排序。但是，您可以做的是将排序信息保存在单独的数组中。

1.  创建一个仅包含对象键的数组。
2.  通过交叉检查原始对象中的值对该数组进行排序
3.  通过遍历排序的键数组以排序顺序访问值

# asp.net-mvc - Ajax 请求返回 HTTP 错误 500，使用 MVC 和 $.ajax 调用与 POST？

> ID：13942304
> 
> 赞同：28
> 
> 时间：2012-12-18T22:08:21.947
> 
> 标签：asp.net-mvc, jquery, asp.net-ajax

我已经看到了几个关于这个的线程，并且我已经尝试了所有的答案（[ASP.NET MVC JsonResult return 500](https://stackoverflow.com/questions/3113952/asp-net-mvc-jsonresult-return-500)）

我的 ajax 请求重新返回 500 内部错误。如果我调试，我什至不会采取行动。

这是我的ajax调用：

```
$.ajax({
                    url: '@Url.Action("UpdateSortOrder", "FormItems")',
                    data: { itemToUpdateId: item.attr("id"), newParentItemId: parentItemId, newPreviousItemId: previousItemId },
                    type: 'POST',
                    success: function (data) {
                        console.log(data);
                    },
                    error: function (xhr, status, exception) {
                        console.log("Error: " + exception + ", Status: " + status);
                    }
                }); 
```

而我的行动：

```
[HttpPost]
    public ActionResult UpdateSortOrder(Guid itemToUpdateId, Guid newParentItemId, Guid newPreviousItemId)
    {
        FormItem updatedItem = _formItemService.GetOne(x => x.Id == itemToUpdateId);

        return Json(updatedItem, JsonRequestBehavior.DenyGet);
    } 
```

使用 chrome 控制台，这些是来自回复的响应标头：

> HTTP/1.1 500 内部服务器错误缓存控制：私有内容类型：文本/html；charset=utf-8 服务器：Microsoft-IIS/7.5 X-AspNetMvc-Version：3.0 X-AspNet-Version：4.0.30319 X-Powered-By：ASP.NET 日期：2012 年 12 月 18 日星期二 21:53:41 GMT内容长度：17041

服务器日志不显示子状态代码。知道我在这里做错了什么吗？我更喜欢使用 POST 而不是 GET。

表单数据显示为：

> itemToUpdateId:18ac5399-342e-4a39-9da1-3281a89501df
> 
> newParentItemId：空
> 
> newPreviousItemId:null

哪个是对的。

我已经尝试将 contentType 设置为 application/json 和 traditional = true 就像在这个问题中一样：[Sending ajax post to mvc with "application/json; charset=utf-8" returns error 500 from vs web developer server](https://stackoverflow.com/questions/11606449/sending-ajax-post-to-mvc-with-application-json-charset-utf-8-returns-error-50)

同样的错误。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-12-18T22:51:49.537

好吧，我能够找出问题所在，我的 AJAX 语法甚至操作都没有问题。只是我返回的对象包含循环引用。通过单击“网络”选项卡下的 POST 请求，然后查看预览选项卡，我能够在 chrome 控制台中看到实际错误。这显示了实际的错误消息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-30T11:07:02.880

旧帖子，替代答案...以防万一有人在这里结束..

我的问题是由于我调用的控制器操作返回了 Partial View Action Result 并且 PartialView`.cshtml`文件没有发布到服务器上（发布时没有“包含”在 Visual Studio 项目中）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-20T14:41:56.563

[Fiddler](https://www.telerik.com/download/fiddler/fiddler4)是一个很好的捕获 http 请求的工具，对于调试客户端和服务器端之间的响应非常有用。当您怀疑浏览器中的问题时打开它，当错误发生时打开 fiddler 并选择请求，然后查看其原始信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-06-10T05:42:05.087

如果您不需要 updatedItem 成功则不要返回它只返回一个简单的变量

# python - Python 2.x 中 PHP 类模板的最快 stdlib 方法？

> ID：13942308
> 
> 赞同：1
> 
> 时间：2012-12-18T22:08:47.187
> 
> 标签：python, template-engine

我目前正在进行的项目需要我使用 Python 的内置 HTTP 服务器，并且我需要自己构建动态 HTML 页面。HTML 文件中的 %REPLACE_ME% 语法最近太烦人了，我很想用就地代码替换它，就像它在 PHP 中所做的那样。有没有什么好的解决方案可以用（或任何其他类似的语法）解析字符串并评估里面的代码？

编辑：

Jon Clements 指出我忘了解释为什么我需要就地代码。有两个原因 - 首先是我习惯了这种方法，后者是我想使用一些循环并且不想结束自己为模型文件中的表格构建一半的 HTML 代码。stdlib 要求是因为我想尽可能少地保持依赖关系。不过，我可以允许一些非常苗条的库。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:32:56.507

如果您使用 PHP，如果您无法执行任意代码，一开始可能会令人沮丧。

您**可以**使用[Python CGI](http://docs.python.org/2/library/cgi.html)模块来执行此操作。（但与 PHP 不同的是，它旨在通过接口而不是其他东西运行 - WSGI 是这里的方式 - 也没有太多的设置）。

现在，将程序逻辑与显示逻辑分开更为传统。这样就有“模板”从“视图”（通过响应对象返回信息）中填充信息。它通常被称为“MVC”，但并非所有“MVC”都是“MVC”。

我仍然记得 PHP 是“项目主页”的时候——它已经发展了很多，并且是一种不为 CGI 编写 C 的好方法……但是从那时起语言和技术都在进步……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T22:39:27.400

根据最后一条评论，我将尝试概述一些选项：

内置到 python 中最好的选择是`string`模块。

如评论中所述，文档位于：[7.1。细绳](http://docs.python.org/2/library/string.html#template-strings)

有许多非常强大的第三方模板系统。我不是 PHP 大用户，但您会将这些分类为 Smarty 等...

[Django 模板](https://docs.djangoproject.com/en/dev/ref/templates/)

还有一本很棒的开源书籍与使用它们有关[Django Book: Chapter 4 - Templating](http://www.djangobook.com/en/2.0/chapter04.html)

我从来没有在 Django 之外使用过这些，但我知道有一些框架可以让你使用它们。我不确定将它与另一个系统集成需要做多少工作，但绝对可以完成。

[鲭鱼模板](http://www.makotemplates.org/)

这是另一个非常强大的模板系统。这被一些大型框架（如 Pylons）使用。

[神社2](http://jinja.pocoo.org/docs/)

这也是一个很好的模板系统。

围绕模板系统还有一些其他讨论：[什么是 Python 最快的模板系统？](https://stackoverflow.com/questions/1324238/what-is-the-fastest-template-system-for-python). 这只是一个示例，但那里有更大的模板系统列表。

# visual-studio - 使用 Xaml 时如何在 VS 中保持较大的代码窗口

> ID：13942315
> 
> 赞同：1
> 
> 时间：2012-12-18T22:08:59.253
> 
> 标签：visual-studio, xaml, visual-studio-2012, editor, design-time

我正在使用 Visual Studio 分析一些 Xaml 代码。我的工作水平相当低，因此设计师对我来说完全没有意义。所以，我发现我双击一个 Xaml 文件会被一个很小的代码查看窗口和一个巨大的设计器打招呼，这很烦人。

我试过调整窗口的大小，这种工作。但是，如果我关闭文件并重新打开它，问题就会再次出现。此外，如果我打开其他 Xaml 文件，它们仍然会打开一个巨大的设计器

我第一次打开 Xaml 文件时它的外观：

![在此处输入图像描述](../Images/deb946c2bf91e70618ffd198351ac1c5.png)

每次打开 Xaml 文件时我希望它的外观如何：

![在此处输入图像描述](../Images/08d77617b88368894b78bfea07948434.png)

有没有办法让这个配置“坚持”？我可以设置某种设置来配置设计时窗口的大小吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:03:55.503

工具 -> 选项 -> 文本编辑器 -> XAML -> 其他。单击“始终以完整 XAML 视图打开文档”复选框。希望这可以帮助 ：）

# c# - DGV DataSource displays Class name not value

> ID：13942323
> 
> 赞同：0
> 
> 时间：2012-12-18T22:09:37.213
> 
> 标签：c#, winforms, datagridview

I have a DataGridView being populated using CoolStorage (ORM) CSList class as its DataSource. It is displaying Contacts and it's the ContactType column that instead of displaying the underlying ContactTypeName just displays "ContactType" for every record.

I cannot change the value of that cell by stepping through the rows as it's data bound, although when hovering over DataSource I can see that it has the ContactTypeName is available as a property of ContactType.

Is there a way I can change what value is displayed in the ContactType cells (I'm thinking something like an equivalent to ComboBox's DisplayMember) without having to manually constuct a DataTable from my result set?

Many thanks.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:12:52.527

~~在不手动设置列的情况下，我知道~~的唯一~~`ToString()`一种方法是覆盖类的功能`ContactType`。~~

 ~~但是，如果要对其进行*编辑*，则需要手动设置列。

由于某种原因，几乎所有其他我处理过的网格 UI 都需要手动设置列。

另一种选择是绑定到将 ContactName 作为属性而不是相关对象公开的包装类（基本上是 ViewModel）。您甚至可以使用该模型进行双向绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T22:22:29.650

您是否考虑过使用[`CSListGeneric`](http://coolstorage.codeplex.com/SourceControl/changeset/view/69709#209293)而不是`CSList`？

然后，您可以使用`System.Linq`选择要在 中显示的内容`DataGridView`：

```
class Program
{
    class ContactType
    {
        public string Name { get; set; }
    }
    class Contact
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public ContactType ContactType { get; set; }
    }
    static void Main(string[] args)
    {
        CSList<Contact> contacts = new CSList<Contact>();
        //add contacts to the list
        var x = from c in contacts
                select new {
                    c.Id,
                    c.Name
                    ContactTypeName=c.ContactType.Name
                };
    }
} 
```~~

# php - Why does cURL sometimes require the "www." part of a URL to work, and vice versa?

> ID：13942330
> 
> 赞同：4
> 
> 时间：2012-12-18T22:10:06.333
> 
> 标签：php, curl, http-headers, http-response-codes

For instance, using this code:

```
 $curl = curl_init();
 curl_setopt_array( $curl, array(
      CURLOPT_RETURNTRANSFER => true,
      CURLOPT_URL => "$url" ) );
 curl_exec( $curl );
 $header = curl_getinfo( $curl, CURLINFO_HTTP_CODE );
 curl_close( $curl ); 
```

`$url = "http://upenn.edu"` will *not* work, while `$url = "http://www.upenn.edu"` will work.

Without the `www.` the response code I get is `0`, whereas with the `www.` it is `200`.

If I were to use PHP `get_headers("http://upenn.edu")`, I would get two errors:

> `Warning: get_headers() [function.get-headers]: php_network_getaddresses: getaddrinfo failed: nodename nor servname provided, or not known`

and

> `Warning: get_headers(http://upenn.edu) [function.get-headers]: failed to open stream: php_network_getaddresses: getaddrinfo failed: nodename nor servname provided, or not known`

However, when I use the exact same code, `http://google.com` *will* work (as well as the expected `http://www.google.com`.)

Then, for a website such as `http://www.dogpile.com`, the `www.` part included returns a response code of `0` whereas *without* the `www.`, I get a `302`.

Why is this? and is there a better method to use in order to ensure reliable results (i.e., where a `www.` is not present, yet the response code is still returned?)

I am new to using cURL and dealing with headers and response codes, so any help is appreciated. Thank you.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T22:12:14.267

Not all domains treat `www.domain.com` and `domain.com` the same. *Usually* they do, but if you wanted to you could have two completely different websites on them.

Personally, I like to have all requests to `www.mydomains.com` redirected to the www-less version, but that's just my preference.

There is no realiable way of automatically detecting whether or not to use `www.`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T22:36:32.937

你的问题，甚至是因为现在使用 curl 而被问到，实际上是完全独立于 curl 的。其他客户端 http 库将与这些示例相同，因为它与计算机上运行的域名系统和服务有关。

Curl 是一个 HTTP 库。如果您执行 HTTP 请求，默认情况下您将尝试连接到远程计算机上的端口 80。

远程计算机由 IP 地址标识。这是一个数字`173.194.35.134`——你可能已经知道了。

大多数情况下不是使用数字，而是使用一些域名，`google.com`例如`173.194.35.134`.

所以告诉 curl 使用 URI`http://google.com/`将打开一个连接到

```
173.194.35.134:80 
```

域名系统会将域解析`google.com`为 IP 地址。

域名可以按层次组织。每个级别由一个点分隔`.`。所谓的顶级域 (TLD) 是最右边的部分，`google.com`即`com`. 然后分别是二级域（SLD）`google`。和`www.google.com`你有另一个域名，然后有三个级别。通常`www`称为*子域*。

这里最重要的部分是，对于每个不同的域，DNS 系统可以返回不同的 IP 地址。

因此`www.google.com`和`google.com`可以是两个完全不同的东西。`www`子域只是在以`SLD.TLD`.

因此，通过这很常见，您可以尝试两者，看看哪一个有效。但是，我不会尝试更多 with and w/o `www`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T22:24:35.317

这件事情是由很多原因导致的。

“0”状态表示您没有收到回复。这可能是因为：

*   url 不解析服务器（例如，如果您没有放置`www`但服务器期望它 - 正如 Kolink 所说，您不必在两者上都有网站）
*   服务器没有响应（例如，url 可能会到达服务器，但网络服务器没有给您响应）
*   服务器没有响应（可能是 dogpile 发生了什么；您没有传递适当的标头，所以它知道您是一台计算机而不是人类，所以只是直接将您弹回）

200 的状态意味着一切都很好。

3XX 状态一般表示搬家。使用 302，如果您阅读其余标题，您会发现该站点已移动到的 URL，建议您去那里。（注意，cUrl 可以自动处理重定向

您通常得到的其他值是 100（继续）、404（未找到）和 500（服务器错误），但实际上，服务器可以返回任何内容。包括418“我是一个小茶壶”。(http://tools.ietf.org/html/rfc2324)

更多阅读：

*   curl_getinfo() 将告诉您有关最后一个 curl 请求的更多信息。将帮助您破译为什么您的状态为“0” [http://php.net/manual/en/function.curl-getinfo.php](http://php.net/manual/en/function.curl-getinfo.php)
*   curl_setopt() 将允许您告诉 curl 处理重定向。[http://php.net/manual/en/function.curl-setopt.php](http://php.net/manual/en/function.curl-setopt.php)
*   状态码及其含义：[http ://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T22:39:09.487

```
$ dig upenn.edu

; <<>> DiG 9.8.3-P1 <<>> upenn.edu
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 54604
;; flags: qr rd ra; QUERY: 1, ANSWER: 0, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;upenn.edu.         IN  A

;; Query time: 2 msec
;; SERVER: 10.0.1.1#53(10.0.1.1)
;; WHEN: Tue Dec 18 17:37:18 2012
;; MSG SIZE  rcvd: 27

$ dig www.upenn.edu

; <<>> DiG 9.8.3-P1 <<>> www.upenn.edu
;; global options: +cmd
;; Got answer:
;; ->>HEADER<<- opcode: QUERY, status: NOERROR, id: 10583
;; flags: qr rd ra; QUERY: 1, ANSWER: 4, AUTHORITY: 0, ADDITIONAL: 0

;; QUESTION SECTION:
;www.upenn.edu.         IN  A

;; ANSWER SECTION:
www.upenn.edu.      123 IN  CNAME   www.upenn.edu-dscg.edgesuite.net.
www.upenn.edu-dscg.edgesuite.net. 4782 IN CNAME a1165.dscg.akamai.net.
a1165.dscg.akamai.net.  4   IN  A   208.47.254.80
a1165.dscg.akamai.net.  4   IN  A   208.47.254.83

;; Query time: 2 msec
;; SERVER: 10.0.1.1#53(10.0.1.1)
;; WHEN: Tue Dec 18 17:37:23 2012
;; MSG SIZE  rcvd: 141 
```

宾夕法尼亚大学忽略了为其域名的非 www 变体设置 DNS 记录。奇怪的是，他们这样做了（并且可能与他们的 CDN 设置有关，该设置依赖于 CNAME，而对于域的根级别是不能拥有的）。

与 cURL 无关，只是 upenn.edu 的 DNS 设置。

# c# - ASP.NET Card view from Repeater with paging capabilities

> ID：13942333
> 
> 赞同：1
> 
> 时间：2012-12-18T22:10:28.877
> 
> 标签：c#, asp.net, gridview, pagination, repeater

I need to create a carview as gridview. Any suggestion?
I can use any free (must be stable) or open source tool.
My main concern is using micro soft **repeater with paging capabilities**
1\. Is it the best practice?
2\. What are the main point I must keep in mind for this?
3\. I need to reuse this control in many pages as well many projects. So creating a web server control is right option?

**EDIT**

Is it possible to achieve cardview with micro soft gridview control?

# iphone - SIGTRAP error for Core Data iOS

> ID：13942336
> 
> 赞同：0
> 
> 时间：2012-12-18T22:10:47.307
> 
> 标签：iphone, ios, xcode, core-data

I am continuously getting a SIGTRAP error from this function

```
- (void)saveShindyToDatabase
{

    NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
    // url = [url URLByAppendingPathComponent:@"Default Shindy Database"];
    self.shindyDatabase = [[UIManagedDocument alloc] initWithFileURL:url];

    [self.shindyDatabase setValue:self.detailView.text forKey:@"details"];

    if (FBSession.activeSession.isOpen) {
        [[FBRequest requestForMe] startWithCompletionHandler:
         ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
             if (!error) {
                 self.name = user.name;
                 self.photo.profileID = user.id;
                 self.username = user.username;
             }
         }];
    }

    // [Guest guestWithName:self.name username:self.username photo:self.photo inManagedObjectContext:self.shindyDatabase.managedObjectContext];
    [self.shindyDatabase setValue:self.locationManager.location forKey:@"location"];
    [self.shindyDatabase setValue:self.dateAndTimePicker.date forKey:@"dateAndTime"];
} 
```

I'm trying to execute the function when the user taps a button, or in the background. Either one returns the same error.

What am I doing wrong?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:30:18.103

弄清楚了。我正在调用主线程。

```
- (void)saveShindyToDatabase
{

    dispatch_queue_t fetchQ = dispatch_queue_create("HomeViewController", nil);
    dispatch_async(fetchQ, ^{
        NSArray *shindys = [[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask];
        [self.shindyDatabase.managedObjectContext performBlock:^{
            for (NSDictionary *shindyInfo in shindys) {
                [Shindy shindyWithShindyDBInfo:shindyInfo inManagedObjectContext:self.shindyDatabase.managedObjectContext];

                NSURL *url = [[[NSFileManager defaultManager] URLsForDirectory:NSDocumentDirectory inDomains:NSUserDomainMask] lastObject];
                // url = [url URLByAppendingPathComponent:@"Default Shindy Database"];
                self.shindyDatabase = [[UIManagedDocument alloc] initWithFileURL:url];

                [self.shindyDatabase setValue:self.detailView.text forKey:@"details"];

                if (FBSession.activeSession.isOpen) {
                    [[FBRequest requestForMe] startWithCompletionHandler:
                     ^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error) {
                         if (!error) {
                             self.name = user.name;
                             self.photo.profileID = user.id;
                             self.username = user.username;
                         }
                     }];
                }

                // [Guest guestWithName:self.name username:self.username photo:self.photo inManagedObjectContext:self.shindyDatabase.managedObjectContext];
                [self.shindyDatabase setValue:self.locationManager.location forKey:@"location"];
                [self.shindyDatabase setValue:self.dateAndTimePicker.date forKey:@"dateAndTime"];
            }
        }];
    });
} 
```

# phantomjs - PhantomJS sometimes gives "parse error" messages

> ID：13942338
> 
> 赞同：4
> 
> 时间：2012-12-18T22:11:00.677
> 
> 标签：phantomjs

Our company wants to start triggering our QUnit unit tests through our CI server and are looking at PhantomJS as a means of achieving this goal. We started by just trying to open a couple of our QUnit test pages in phantom via the following script:

```
var page = require('webpage').create();
var args = require('system').args;

page.onConsoleMessage = function(msg, lineNum, sourceId) {
    console.log('CONSOLE: ' + msg + ' (from line #' + lineNum + ' in "' + sourceId + '")');
};
page.onError = function(msg, trace) {
    var msgStack = ['ERROR: ' + msg];
    if (trace) {
        msgStack.push('TRACE:');
        trace.forEach(function(t) {
            msgStack.push(' -> ' + t.file + ': ' + t.line + (t.function ? ' (in function "' + t.function + '")' : ''));
        });
    }
    console.error(msgStack.join('\n'));
};

page.open(args[1], function(status) {
    phantom.exit();
}); 
```

Nothing fancy, almost copied verbatim from the phantomJS reference pages. But alas, this **sometimes** results in the following output:

```
ERROR: SyntaxError: Parse error
TRACE:
ERROR: SyntaxError: Parse error
TRACE:
ERROR: SyntaxError: Parse error
TRACE:
ERROR: SyntaxError: Parse error
TRACE: 
```

I've dug into it and the "parse error" is because PhantomJS thinks that the jQuery variable is uninitialized, but the thing is, the pages I am trying to load in PhantomJS work perfectly fine in Chrome, IE, and Firefox, so there is no parse error that I can see (the code to load jQuery is a boring SCRIPT tag at the top of the HEAD tag, so nothing exciting there).

If it makes any difference, our tests are inside ASP.NET (aspx) pages, served through either the VS2010 built in development server, IIS8 Express, or IIS 6\. My next step is to turn them into pure HTML to see if phantom will still complain, but that's not really a valid solution since loading up ASPX pages will be a requirement further down the line (to potentially do automated UI tests using Phantom).

Any ideas on what is wrong? Not sure what other pieces of information would be useful to debug this problem, but I will provide them as requested. I am stumped (especially since "parse error" isn't exactly the most useful of error messages).

**Edit:** This seems to be related to the following two WebKit issues:

*   [https://bugreports.qt.io/browse/QTBUG-16022](https://bugreports.qt.io/browse/QTBUG-16022)
*   [https://bugs.webkit.org/show_bug.cgi?id=58727](https://bugs.webkit.org/show_bug.cgi?id=58727)

If I turn off GZIP compression on our server it seems to work okay, but I still have to do further research into the issue.

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-18T22:23:59.993

这是 PhantomJS 中的一个错误：[http ://code.google.com/p/phantomjs/issues/detail?id=930&start=300](http://code.google.com/p/phantomjs/issues/detail?id=930&start=300)

解决方法是暂时关闭 GZIP 压缩（或从 Phantom 发送虚假的接受标头以欺骗服务器不发送压缩内容）。

# javascript - Ext JS doesn't load on import, response body is 0bytes in FireBug

> ID：13942340
> 
> 赞同：0
> 
> 时间：2012-12-18T22:11:09.547
> 
> 标签：javascript, jsp, extjs

For starters I'm brand new to ExtJS

Thanks for taking a moment to look at my problem, so far I haven't been able to find any equivalent questions anywhere. I'm attempting to transition a webapp interface from Tiles/Spring/jQuery to a Tiles/Spring/ExtJS interface, but I'm having trouble in getting some of the basics started.

For starters, the code:

```
Ext.onReady(function() {

    Ext.QuickTips.init();

    var login = new Ext.FormPanel({
        title: "Please Login",
        url: 'j_spring_security_check',
        labelWidth: 80,
        frame: true,
        defaultType: 'textField',
        width: 300,
        height: 150,
        monitorValid: true,
        bodyStyle: 'padding:10px',
        items: [{
            fieldLabel: 'Username',
            name: 'j_username',
            id: 'userName',
            allowBlank: false,
            listeners: {
                afterrender: function(field) {
                    field.focus();
                }
            }
        }, {
            fieldLabel: 'Password',
            name: 'j_password',
            inputType: 'password',
            allowBlank: false
        }],
        buttons: [{
            text: 'Login',
            formBind: true,
            handler: function() {
                loginSubmit();
            }
        }, {
            text: 'Reset',
            formBind: true,
            handler: function() {
                reset();
            }
        }],
        listeners: {
            afterRender: function(thisForm, options) {
                this.keyNav = Ext.create('Ext.util.KeyNav', this.el, {
                    enter: loginSubmit,
                    scope: this
                });
            }
        }
    });

    function reset() {
        login.getForm().reset();
    }

    function loginSubmit() {
        login.getForm().submit({
            method: 'POST',
            success: function(form, action) {
                window.location = 'home';
            },
            failure: function(form, action) {
                Ext.Msg.alert('Login Failed!', 'Login Failed');
                reset();
            }
        });
    }

    login.render('login');
}); 
```

And this is wrapped properly in the script tags, in a jsp page.

I import the extJS files in the tile page that this JSP renders to:

```
<link type="text/css" rel="stylesheet" href="extjs/resources/css/ext-all.css" />
<script type="text/javascript" src="extjs/ext-all-debug.js"></script> 
```

And at this point I'd expect things to render somehow, but instead I get this: ![firebug error](../Images/da45cbafae516040174fdbb527902768.png)

Strangely, the files do load successfully (at least they don't appear with an error) except that it shows a responseBody of 0 bytes, as you can see in lines 2 and 3 below. ![firebug response](../Images/42f05c10d9d55504ef9cec54c5b17621.png)

I've looked around and already tried all the easy fixes to the best of my ability, I'm hoping someone here will be able to help. Thanks again for taking the time to look at my problem.

## Update

When I changed out the script reference to the sencha CDN, I get past this error on to a new one, but I want to stick with this and resolve this first.

My best guess now based on the comments below is that I'm either missing ext-base.js (which is not included in the ExtJS I have downloaded) or I somehow have my file location/Spring config wrong. I've added these entries to my spring config now:

```
<mvc:resources location="/WEB-INF/extjs/*" mapping="/extjs/**" />
 ....
    <security:intercept-url pattern="/appName/extjs/**"
  access="permitAll" requires-channel="any" /> 
```

And yet I still have the same error. I've got the extjs folder in my WEB-INF directory, shouldn't that mvc:resources above fix that so I can reference it like so:

```
< script type="text/javascript" src="extjs/ext-all-debug.js" 
```

Yet I still get the "302 found" error

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:28:15.687

正如您在网络流量历史记录（您的最新图像）中看到的，未找到 extjs 文件（ext-all-debug.js 和 ext-all.css）。更有趣的是，错误代码是 302（可能是重定向），而不是更常见的 404。

无论如何，这就是你得到 0 字节响应的原因，因为资源不存在。您可以查看失败请求的详细信息以查看更多详细信息，但基本上您应该验证文件位置和服务器/应用程序配置，以查看为什么找不到这些文件。

**更新：**

大多数情况下，此类问题是因为您未通过身份验证。然后，当您执行 GET 请求时，服务器会检查您未通过身份验证，然后将您（302 错误代码）重定向到登录页面。

使用 CDN 是可行的，因为您不必在 CDN 服务器上进行身份验证！

即使您未通过身份验证，登录页面也必须有权访问它需要的所有资源。

可悲的是，我不知道您正在使用的技术，但这就是您正在遭受的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:33:05.303

你不是想念这个吗……？

```
<script type="text/javascript" src="extjs/adapter/ext/ext-base.js"></script> 
```

路径可能错误，您可能需要更正

**更新**

不需要 ext-base.js，而且确实在任何地方都找不到它。检查您的代码以查看是否包含所有这些

我将只发布我的 index.php 的头部

```
<head>

    <META http-equiv="Content-Type" content="text/html; charset=utf-8">

    <META HTTP-EQUIV="Pragma" CONTENT="no-cache">

    <META HTTP-EQUIV="Expires" CONTENT="-1">

    <title>Page Title</title>

    <link rel="stylesheet" type="text/css" href="lib/ext/resources/css/ext-all.css"/>
    <link rel="stylesheet" type="text/css" href="src/views/css/data-view.css" />

    <script type="text/javascript" src="lib/ext/ext-all-debug.js"></script>
    <script type="text/javascript" src="src/app.js"></script>
</head> 
```

# windows-8 - Can User turn off Background Task in Windows 8?

> ID：13942346
> 
> 赞同：0
> 
> 时间：2012-12-18T22:11:55.987
> 
> 标签：windows-8, windows-runtime

In Windows Phone 7.5 there is a way to turn a backgroundagent by going to Settings->Applications->background tasks

Is there a similar thing in Windows 8 for me turn it off?

This is a programming question because I want to get an answer to this for me to use this following API in my application. If user turns it off then I need to go for 'Push notification' implementation on my server

[http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh977056.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/hh977056.aspx)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T23:25:42.227

如果您正在构建与锁定屏幕相关的后台任务，则可以禁用它们。查看设置 - 更改电脑设置 - 个性化

AFAIK，用户不能禁用其他后台任务，如背景音频、文件传输、维护等。不是后台任务专家，所以可能我错过了一些东西，但我很确定我做对了。

![在此处输入图像描述](../Images/c811b7536d4fc60e79a612f6abbfc2d0.png)

# php - Combining two query results - php, mysql

> ID：13942347
> 
> 赞同：0
> 
> 时间：2012-12-18T22:12:01.477
> 
> 标签：php

So I'm doing something wrong (new to PHP) and I think the issue is related to my inexperience with manipulating arrays in php.

```
 $query2 = "SELECT * FROM birds where breed = '".$row['breed']."' and wing_span = '".$row['wing_span']."' and id != '".$row['id']."' limit 4";
    $s_query = mysql_query($query2);

    $theArray = array();

    $counter = 0;
    while($row3 = mysql_fetch_assoc($s_query)) {
        $counter = $counter + 1;
        array_push($theArray, $row3);
    }

    if($counter < 4) {
        $new_limit = 4 - $counter;

        $query5 = "SELECT * FROM birds where breed = '".$row['breed']."' and id != '".$row['id']."' limit ".$new_limit."";
        $s_query2 = mysql_query($query5);

        $counter = 0;
        while($row5 = mysql_fetch_assoc($s_query2)) {
            $counter = $counter + 1;
            array_push($theArray, $row5);
        }
    } 
```

The goal is that if I don't reach the maximum of 4 in the first query, I will run a second query with the difference in MAX - count as the limit. But when I run that query, I try to add the rows ($s2_query) to the existing rows ($s_query)

In this attempt, I tried to create a new array, push the elements as I go. I've tried manually combining them too (array_merge), but also didn't work.

**Edit** It's intentional for there to be two queries. Point is that if the first query doesn't give me a total of 4 results, I run a second query to fill the remaining spots.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:17:04.807

编辑后的答案[deceze](https://stackoverflow.com/users/476/deceze)在我认为应该可以正常工作的评论中建议了一个 UNION，请尝试：

```
$query = "(SELECT *, 1 as SORY_QUERY1 FROM birds where breed = '".$row['breed']."' and wing_span = '".$row['wing_span']."' and id != '".$row['id']."') UNION (SELECT *, 2 FROM birds where breed = '".$row['breed']."' and id != '".$row['id']."') ORDER BY SORY_QUERY1 LIMIT 0, 4";

$theArray = mysql_fetch_array($s_query);

var_dump($theArray); //to debug 
```

* * *

顺便说一句，你可以使用

```
$theArray[] = $row5; 
```

代替

```
array_push($theArray, $row5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:39:56.167

正如 deceze 所说，只有 1 个 UNION 请求最适合您的需求。

顺便说一句，使用限制作为范围

```
LIMIT 0, 4 
```

问候，

# javascript - Streamlining code

> ID：13942348
> 
> 赞同：4
> 
> 时间：2012-12-18T22:12:01.290
> 
> 标签：javascript, jquery

I have a question about streamlining my jquery code. I have a list of images and each has a unique id and the click event displays the larger image and its info. Is there a way to do this with a loop similar to php's foreach loop?

```
$(function() {
  $('img#cl_1').click(function() {
    $('div#left').html('display image').slideDown('fast');
    $('div#right').html('display image info').slideDown('fast');
  });
  $('img#cl_2').click(function() {
    $('div#left').html('display image').slideDown('fast');
    $('div#right').html('display image info').slideDown('fast');
  });
  $('img#cl_3').click(function() {
    $('div#left').html('display image').slideDown('fast');
    $('div#right').html('display image info').slideDown('fast');
  });
  $('img#cl_4').click(function() {
    $('div#left').html('display image').slideDown('fast');
    $('div#right').html('display image info').slideDown('fast');
  });
  /*so on and so forth*/
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:20:33.647

如果您不想使用类选择器，也可以使用以下内容：

```
$(function() {
  $('img[id^="cl_"]').click(function() {
    $('div#left').html('display image').slideDown('fast');
    $('div#right').html('display image info').slideDown('fast');
  });
}); 
```

这应该适用于元素 id 以“cl_”开头的任何图像。不过，类选择器肯定更干净。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T22:19:34.343

如果每个图像的“显示图像”和“显示图像信息”的值不同，请考虑将它们加载到数组中或通过 AJAX 获取它们。然后将您的事件绑定更改为如下所示：

```
$('img.showStuff').click(showDetails);  

function showDetails() {
   var id = this.id;
   $('div#left').html(images[id]).slideDown('fast');
   $('div#right').html(info[id]).slideDown('fast');
} 
```

# drop-down-menu - 当值来自数据库时，选择框如何设置设置第一个值

> ID：13942354
> 
> 赞同：0
> 
> 时间：2012-12-18T22:12:16.593
> 
> 标签：drop-down-menu

我用我的数据库中的值制作了一个选择框，我希望第一个值是“做出选择”。

如何做呢？我有这个代码..

```
 <tr>
                <td width="180" height="30"><label for="valgtkon" class="labelLeft">Vælg konkurrencetype</label></td> 
                <td><select id="valgtTitel" name="valgtTitel" onchange="run()">                  
                <?php
                $virksomhedsID = $_SESSION['virkID'];
                $sql = "SELECT * FROM konkurrenceType ORDER BY konkurrenceType.kontypeID";
                $result = mysql_query($sql) or die(mysql_error());                  

                while($rowSelect = mysql_fetch_assoc($result))
                { 
                    $kontypeTitel = $rowSelect['kontypeTitel'];
                    $kontypeID = $rowSelect['kontypeID'];

                    echo '<option value="' . $kontypeID . '">' . $kontypeTitel . '</option>';
                }?>                    
                </select></td>
                <script>
                function run() {
                    document.getElementById("valgtID").value = document.getElementById("valgtTitel").value;
                }
                </script>

                <td><input type="text" name="valgtID" id="valgtID"/></td>
                </tr> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:14:47.303

Set **option** first **option**在数据库结果之前，所以将它放在 php 之外的**select**标记之后，这应该可以解决问题！

**粗体**文本必须代表标签。（我在我的 iPhone 上）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:18:16.353

在 while 循环之前，添加另一个 echo 语句，为第一个“做出选择”选项创建选项，然后在提交时添加一些验证，以确保他们从列表中选择了不同的选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T22:28:40.490

杰普我明白了。谢谢你。

```
 <tr>
                <td width="180" height="30"><label for="valgtkon" class="labelLeft">Vælg konkurrencetype</label></td> 
                <td><select id="valgtTitel" name="valgtTitel" onchange="run()">                  
                <?php
                $virksomhedsID = $_SESSION['virkID'];
                $sql = "SELECT * FROM konkurrenceType ORDER BY konkurrenceType.kontypeID";
                $result = mysql_query($sql) or die(mysql_error());                  

                echo '<option value="Vælg type">Vælg type</option>';

                while($rowSelect = mysql_fetch_assoc($result))
                { 
                    $kontypeTitel = $rowSelect['kontypeTitel'];
                    $kontypeID = $rowSelect['kontypeID'];

                    echo '<option value="' . $kontypeID . '">' . $kontypeTitel . '</option>';
                }?>                    
                </select></td>
                <script>
                function run() {
                    document.getElementById("valgtID").value = document.getElementById("valgtTitel").value;
                }
                </script>

                <td><input type="text" name="valgtID" id="valgtID"/></td>
                </tr> 
```

# ejb-3.0 - EJB3 方法调用返回空对象

> ID：13942363
> 
> 赞同：0
> 
> 时间：2012-12-18T22:13:01.710
> 
> 标签：ejb-3.0

我正在从一个独立的 Java 程序（使用 jnp 查找）调用部署在我的 jBoss 4.2.3 服务器中的 EJB3 服务。我已将所有数据对象序列化。我已经成功调用了我的 EJB 的方法，但是我正在从客户端的对象中丢失数据。我在 Application Server 中调试了 EJB 端，我可以看到我的对象中有数据。

我正在使用以下代码调用我的 EJB；

```
public void doStuff () {

    // Component and its JNDI
    ResourceProviderServiceBeanRemote componentEJB;
    String JNDI_NAME_REMOTE = "ResourceProviderService/ResourceProviderServiceBean/remote";

    // Setup Environment
    Hashtable environment = new Hashtable();
    environment.put(Context.INITIAL_CONTEXT_FACTORY, "org.jnp.interfaces.NamingContextFactory");
    environment.put(Context.URL_PKG_PREFIXES, "org.jboss.naming:org.jnp.interfaces");
    environment.put(Context.PROVIDER_URL, "jnp://127.0.0.1:1099"); // remote machine IP
    Context context = null;
    try {
        context = new InitialContext(environment);
        Object factoryObj = context.lookup(JNDI_NAME_REMOTE); //ejb-name
        componentEJB = (ResourceProviderServiceBeanRemote) factoryObj;

        UserContextCallBack userContext = new UserContextCallBackImpl(new UserDetails("username", "password", ""));
        componentEJB.setUserContextCallBack(userContext);

        QueryDetails query = new QueryDetails();
        query.setName("anything");
        List<String> cols = new ArrayList<String>();
        List<Row> rows = new ArrayList<Row>();
        ResponseDetails responseDetails = new ResponseDetails();
        componentEJB.doQuery(query, cols, rows, responseDetails);
        System.out.println(responseDetails);
    } catch (Exception e) {
        throw new RuntimeException(e);
    } 
```

}

注意：我可以在服务器端看到填充在“cols”、“rows”和“responseDetails”中的数据，但客户端仍然是相同的空初始化对象。

我错过了什么吗？

--

SJunejo

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:12:15.187

这是一个愚蠢的错误，我发现在任何 RMI 接口上调用方法时，所有对象都是按值传递的。我必须有一些返回类型，这就是它所缺少的。所以我将我的代码升级如下；

```
// Created a new Response Object by combing all the OUT parameters as one object
// and updated the method on EJB to accept only IN paramters
DoQueryResponse response = componentEJB.doQuery(query); 
```

希望这会帮助像我这样的人（愚蠢）:)

# c - 新手使用 malloc 处理 char

> ID：13942365
> 
> 赞同：2
> 
> 时间：2012-12-18T22:13:17.363
> 
> 标签：c, microcontroller

我正在使用环形/圆形缓冲区进行 USART。无法将 Buffer 中的字符移动到`char* Command_String`我定义的位置：

```
char holder ;
holder = usart_getchar();
RingBuffer_Insert(&Buffer, holder);

if (holder == '\0') {
  uint16_t BufferCount = RingBuffer_GetCount(&Buffer);
  char* Command_String = malloc (BufferCount);
  while (BufferCount--) {
    *Command_String = RingBuffer_Remove(&Buffer);
    Command_String++;                 
  }
  usart_pstr(Command_String);
  free (Command_String);
} 
```

功能`RingBuffer_Insert()`和`RingBuffer_GetCount()`工作。但是我尝试将字符移动到`Command_String`没有。帮助请

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:16:28.957

您增加 Command_String 指针：

```
while (BufferCount--) {
*Command_String = RingBuffer_Remove(&Buffer);
Command_String++;                 
             } 
```

但是然后使用它，就好像它仍然指向开头一样：

```
usart_pstr(Command_String);
 free (Command_String); 
```

您应该获取它的副本以填充字符串，以便保留原始值以供将来使用，或者在不修改的情况下对其进行索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:17:34.073

由于您正在增加 Command_String 与

```
Command_String++; 
```

当你的循环结束时，Command_String 指向它的最后一个字符。

# apache - 在 Ubuntu 12 LTS 和 Apache2 上为 Phabricator 配置/安装 PHPExcel

> ID：13942373
> 
> 赞同：0
> 
> 时间：2012-12-18T22:13:46.187
> 
> 标签：apache, apache2, ubuntu-12.04, phpexcel, phabricator

我正在尝试在我的 Ubuntu 服务器（Ubuntu 12.04.1 LTS - 由 Amazon EC2 托管）上安装 PHPExcel。

我运行了以下命令：

```
sudo pear channel-discover pear.pearplex.net
sudo pear install pearplex/PHPExcel 
```

这些似乎在这里安装了 PHPExcel：

```
/usr/share/php/PHPExcel 
```

我尝试将此包含路径添加到/etc/php5/cli/php.ini：

```
include_path = ".:/usr/share/php/PHPExcel" 
```

但是模块似乎没有安装？我重新启动了服务器、apache2 等。

我害怕通过随机尝试来杀死我的网络服务器。

更多信息：

php --ini =

```
Configuration File (php.ini) Path: /etc/php5/cli
Loaded Configuration File:         /etc/php5/cli/php.ini
Scan for additional .ini files in: /etc/php5/cli/conf.d
Additional .ini files parsed:      /etc/php5/cli/conf.d/apc.ini,
/etc/php5/cli/conf.d/curl.ini,
/etc/php5/cli/conf.d/gd.ini,
/etc/php5/cli/conf.d/mcrypt.ini,
/etc/php5/cli/conf.d/mysql.ini,
/etc/php5/cli/conf.d/mysqli.ini,
/etc/php5/cli/conf.d/pdo.ini,
/etc/php5/cli/conf.d/pdo_mysql.ini 
```

我安装的php模块：（php -m）

> apc bcmath bz2 calendar Core ctype curl date dba dom ereg exif fileinfo filter ftp gd gettext hash iconv json libxml mbstring mcrypt mhash mysql mysqli openssl pcntl pcre PDO pdo_mysql Phar posix readline Reflection session shmop SimpleXML soap sockets SPL standard sysvmsg sysvsem sysvshm tokenizer wddx xml xmlreader xmlwriter压缩zlib

我被难住了，我不知道该怎么办。

对于熟悉 php / apache2 等的人来说，这可能非常简单，但那不是我。我是开发人员，只是不适合这个平台。

现在我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T18:27:52.693

根据来自 Phabricator 的错误消息，尝试将您的更改`include_path`为`.:/usr/share/php/PHPExcel/Classes`（即，只需在末尾添加“/Classes”）：

> 您的 PHP "include_path" 需要更新以包含 PHPExcel Classes/ 目录。

从广义上讲，PHPExcel 是一个库（用 PHP 编写，由应用程序在运行时加载）而不是扩展（用 C 编写，由 报告`php -m`，由 PHP 在启动时加载），因此它不会被报告`php -m`并且没有`.ini`文件等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-04-20T19:25:12.877

我在 Linux 机器上安装了 Phabricator，我执行以下操作将 PHPExcel 安装到我的 Phabricator 中：

1.  通过转到[https://github.com/PHPOffice/PHPExcel](https://github.com/PHPOffice/PHPExcel)并执行“git clone [https://github.com/PHPOffice/PHPExcel](https://github.com/PHPOffice/PHPExcel) ”或转到 https 上的绿色“克隆或下载”按钮获取[PHPExcel的副本://github.com/PHPOffice/PHPExcel](https://github.com/PHPOffice/PHPExcel)并单击“下载 Zip”。请注意您克隆或解压缩到的路径，并确保其中有一个“Classes”文件夹。出于本演练的目的，我将 PHPExcel 文件夹复制到我的 Phabricator 文件夹中。
2.  在您的 Linux/OSX shell 中，将目录或“cd”更改为您的 Phabricator 安装，然后键入“find .-name “php.ini”以找到与 Phabricator 关联的 php.ini。对于我的版本，它位于 $PHABRICATOR/ php/etc/php.ini
3.  制作 php.ini 文件的副本作为备份，然后在编辑器中打开您在步骤 2 中找到的 php.ini
4.  在编辑器中找到“include_path”语句，它应该看起来像这样......

*include_path = ".:/root/servers/phabricator/php/lib/php"*

...并且您应该将其更改为...

*include_path = ".:/root/servers/phabricator/php/lib/php: **/root/servers/phabricator/PHPExcel/Classes** "*

5.  重新启动 Phabricator，通过更改目录或对您的 Phabricator 根文件夹执行“cd”，然后执行“./ctlscript.sh restart”

它对我有用，希望对你也有用。

# maven - Maven 依赖问题 - 未填充变量

> ID：13942381
> 
> 赞同：1
> 
> 时间：2012-12-18T22:14:21.720
> 
> 标签：maven

目前我有两个独立的项目，但其中一个项目依赖于另一个。第一个项目称为*Commons*，其布局与此类似。该项目有子项目，所有内容都正确部署到 Nexus 中。

```
 <properties>
        <parentVersion>2.0.0</parentVersion>
    </properties>

    <groupId>Commons</groupId>
    <artifactId>Commons</artifactId>
    <packaging>pom</packaging>
    <version>${parentVersion}</version>

    ... 
```

第二个项目与上面的项目类似，但在依赖项中它接近于

```
 <dependency>
       <groupId>Commons</groupId>
       <artifactId>Commons</artifactId>
      <version>${parentVersion}</version>
    </dependency> 
```

当我为他们两个做 Maven 构建时，我正在定义`parentVersion`，所以像

```
 mvn deploy -f pom.xml -DparentVersion=2.0.0 
```

但是，在第一个执行此操作时，我收到以下错误：

> 无法读取 Commons.Commons:jar:2.0.0 的工件描述符：无法在存储库中找到 Commons.Commons:pom:${parentVersion}

那么为什么看起来它正在获取`${parentVersion}`Commons jar 的变量，但是当它找到 POM 版本并且只是传递变量而不是变量值时却找不到它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:20:53.773

这是不可能的。项目自己的版本需要被继承或显式定义。您只能将其用于您的依赖项或插件。

# objective-c - 当我按其中一列对 NSTableView 进行排序然后滚动时，我滚动到的单元格无法正确显示

> ID：13942382
> 
> 赞同：0
> 
> 时间：2012-12-18T22:14:33.040
> 
> 标签：objective-c, cocoa, tableview, nstableview, nsscrollview

我有一个`NSTableView`内部和`NSScrollView`一个非常标准的配置。当我对表格视图进行排序（通过单击列标题之一）时，当前可见的所有内容都会正确显示，但是当我向任何方向（左、右、上、下）滚动时，我滚动到的单元格没有已正确更新。如果在我排序时半个单元格可见，当我滚动查看整个单元格时，它甚至会显示一半具有旧值的单元格和一半具有新值的单元格。

这是怎么回事？我可以在对表格进行排序时强制表格视图重绘所有内容吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:21:46.743

当您需要重绘表格时，只需调用：

```
[yourTableViewOutlet reloadData]; 
```

[参考这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSTableView_Class/Reference/Reference.html)。

> **重新加载数据**
> 
> 将表格视图标记为需要重新显示，因此它将重新加载可见单元格的数据并绘制新值。

# c++ - 如何发送和接收特定字符winsock

> ID：13942386
> 
> 赞同：1
> 
> 时间：2012-12-18T22:14:55.897
> 
> 标签：c++, winsock, winsock2

我有`char* MESSAGE = new char[256];`但是`char* DISCONNECT = new char[256];`当我使用winsock从客户端发送它们并在服务器中接收它们（服务器具有相同的字符名称）时，出于某种原因会`char* MESSAGE`拦截`char* DISCONNECT`任何关于为什么这会很棒的帮助！

城市：

```
private: System::Void Form1_FormClosing(System::Object^  sender, System::Windows::Forms::FormClosingEventArgs^  e) {
         char* Disconnect = new char[256];
         ZeroMemory(Disconnect, sizeof(Disconnect));
         Disconnect = "DC";
         send(sConnect, "DC", 256, NULL);
     }

private: System::Void txtMessage_KeyDown(System::Object^  sender, System::Windows::Forms::KeyEventArgs^  e) {
         if(e->KeyCode == Keys::Enter && txtMessage->Text != "")
         {
             char* MESSAGE = new char[sizeof(txtMessage->Text->Length)];
             ZeroMemory(MESSAGE, sizeof(MESSAGE));

             string strMESSAGE = "";

             MarshalString(txtMessage->Text, strMESSAGE);

             send(sConnect, strMESSAGE.c_str(), strMESSAGE.length(), NULL);
             txtMessage->Clear();
         }
     } 
```

服务器：

```
int RecieveThread()
{
ZeroMemory(MESSAGE, sizeof(MESSAGE));
for (;; Sleep(50))
{
    if(recv(sConnect, MESSAGE, 256, NULL) != SOCKET_ERROR)
    {
        printf("<%s:> %s\n", NAME, MESSAGE);
    }
}
return 0;
}

int DisconnectThread()
{
ZeroMemory(Disconnect, sizeof(Disconnect));
for(;; Sleep(50))
{
    if(recv(sConnect, Disconnect, 256, NULL) != SOCKET_ERROR)
    {
        if (Disconnect == "DC")
        {
            printf("has disconnected.");
        }
    }
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T23:52:53.860

在评论中提到的其他错误中，您的使用`recv`是一个等待发生的问题。该函数*最多*`recv`读取您指定的字节数，而不是确切的数字。如果你得到更少的字节，你需要再次调用。*`recv`*

 *另外，*永远不要*丢弃`recv`. 这是知道您实际获得了多少字节数据的唯一方法。

TCP 层不知道您将 256 字节视为应用层消息。它不会将这些字节粘合在一起。只有您的代码知道这一点，因此您的代码有责任在收到消息时将它们重新组合在一起。*

# java - java中的麻烦，拆分字符串

> ID：13942390
> 
> 赞同：-1
> 
> 时间：2012-12-18T22:15:04.543
> 
> 标签：java, string, split

我想扫描用户键入的句子，但我想单独扫描单词，然后根据用户输入的单词执行操作。

```
}else if(choice.equals("load")){
  System.out.println("Enter the name of the file:");
  String name = input.next();
  loadFile(name); 
```

我想要的是用户直接输入“load file.txt”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:30:29.277

我尝试为您编写一个小代码，这可能会对您有所帮助

```
 public class Tester2 {

    /**
     * @param args
     */
    public static void main(String[] args) {

        boolean state = true;
        while(state) {

            System.out.println("Please enter your text");
            Scanner scan = new Scanner(System.in);
            String input = scan.nextLine();
            if(input.contains("load")) {
                String fileName = getFileName(input);
                if(fileName != "" || fileName!= null) {
                    load(fileName);
                }
            }else{

            }

        }

    }

    private static String getFileName(String input) {
        String values[] = input.split("\\s+");
        String fileName = "";
        for(String s : values) {
            if(s.indexOf(".") > 0) {
                fileName = s;
                break;
            }
        }
        return fileName;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:07:07.483

评论太长了，我真的不明白你最后的评论是什么意思。这是一些示例代码。尝试使用类似的输入

*   加载文件名.txt
*   加载 foo bar baz
*   保存 foo
*   任何 ...

    ```
    System.out.println("What would you like to do");
    Scanner scanner = new Scanner(System.in);
    String line = scanner.nextLine();
    String[] input = line.split("\\s+");
    if (input[0].equals("load")) {
        for (int i = 1; i < input.length; i++) {
            System.out.println("Token #" + i + " after load: " + input[i]);
        }
    } else {
        System.out.println("You did not enter load, I ignore your input");
    } 
    ```

如果您对行为或其他任何问题有疑问：请随时发表评论。

# algorithm - [a,b] 范围内的除数数，a 和 b 可以是大数

> ID：13942394
> 
> 赞同：1
> 
> 时间：2012-12-18T22:15:24.587
> 
> 标签：algorithm, for-loop

假设要找到 1 到 N 之间所有数字的除数，我们使用：

```
for (i = 1; i < N; ++i) 
    for (j = i; j < N; j += i) 
        factors[j]++; 
```

如果范围是`[a,b]`这样的，我们应该怎么做`1 < a,b < 10^9 and b-a < 10,000?`
如果我们将上面的代码修改为：

```
for (i = 1; i < b; ++i)
    for (j = i; j < b; j += i)
        factors[j]++; 
```

如果`b = 10^9`. 那么，假设 ba 相对于 a 和 b 较小，而 a 和 b 较大（10^9 或更大），可以进行什么样的优化？

PS。也许我无法很好地解释这个问题。我真正需要找到的是该范围内有多少个数的除数等于一些`x <= 100.`

*谢谢。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T03:13:53.997

基本答案是计算每个感兴趣数字的分解，然后用它来计算除数：如果分解是 a^w * b^x * c^y * d^z 那么除数是 ( w+1) * (x+1) * (y+1) * (z+1)。

您可以通过多种方式找到分解。一种方式是通过试划分；由于 10^9 的限制很小，所以试用除法将不会太痛苦。另一种方法是通过筛选，使用分段的 Eratosthenes 筛子来查找因子，然后通过除法计算它们的多重性。

[您可以在我的博客](http://programmingpraxis.com)上找到用于试验除法、Eratosthenes 分段筛以及计算数字除数的算法和代码。单击菜单栏上的练习，然后单击主题，然后选择质数。

编辑：我会这样做。

第一步是筛选范围内所有数字的因子。使用埃拉托色尼筛法计算小于*b*平方根的素数。*创建一个长度为b* - *a* + 1的数组，其中每个元素都初始化为一个空列表。*对于小于b*的平方根的每个素数，计算大于或等于*a*的第一个数*k*，它是素数的倍数，然后对于从*k* - *a*开始且间隔为*p* - *k* - *a* +的每个数组元素, *k* - *a* *+* 2**********p*、*k* - *a* + 3 *p*等等——将*p*添加到数组位置的列表中。这为您提供了该范围内所有数字的因子列表，但不是它们的多重性。*********

 **第二步是计算范围内所有数字的除数。数组的每个元素*i*都包含一个列表。如果列表为空，则数字是素数，并且数字*a* + *i*有两个除数。否则，使用列表中已知因子的试除法来确定它们的多重性，并使用这些多重性来计算除数的数量。

然后，您只需计算除数等于*x*的范围内的那些。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T03:03:47.663

对于任何数字 n，例如： 1 < a <= n <= b < 10^9 ，一个非常简单的算法将为您提供 n 的素数分解（您不需要比 sqrt(n) 更进一步）。然后一个你有它，一个公式会给你不同除数的数量。

由于您必须处理的 n 数量非常小，这应该可行。**

# cookies - 无法从 Windows Phone 7 上的 HttpWebResponse 获取 cookie

> ID：13942396
> 
> 赞同：0
> 
> 时间：2012-12-18T22:15:30.483
> 
> 标签：cookies, asynchronous, windows-phone, httpwebresponse

我对这里的问题感到非常困惑。我的理解`CookieContainer`一定是完全错误的。我正在尝试登录我机器上托管的网站。我已将提琴手设置为代理，因此我可以读取流量。

每次我尝试在 windows phone 上查看 cookie 时，cookie 容器总是空的。我尝试了很多不同的方法来装满那个容器，但一切都失败了。这是我尝试的最后一件事：

```
 CookieContainer cc = new CookieContainer();
        HttpWebRequest request = WebRequest.CreateHttp("http://localhost:8888/account/logon");
        request.ContentType = "application/x-www-form-urlencoded";
        request.Method = "POST";
        request.CookieContainer = cc;
        request.BeginGetRequestStream(streamResult =>
        {
            HttpWebRequest xR = streamResult.AsyncState as HttpWebRequest;
            Stream stream = xR.EndGetRequestStream(streamResult);
            StreamWriter sw = new StreamWriter(stream);
            sw.Write("username=user1&password=1111");
            sw.Close();

            xR.BeginGetResponse(responseResult =>
            {
                HttpWebRequest yR = responseResult.AsyncState as HttpWebRequest;
                HttpWebResponse response = yR.EndGetResponse(responseResult) as HttpWebResponse;
                response.Close();

                Dispatcher.BeginInvoke(() => MessageBox.Show("cc count: " + cc.Count.ToString() + "\nresponse count: " + response.Cookies.Count));
            }, xR);

        }, request); 
```

但是，如果我在控制台应用程序中使用完全相同的代码，则容器“cc”具有 cookie！

```
 CookieContainer cc = new CookieContainer();
        HttpWebRequest request = WebRequest.CreateHttp("http://localhost:8888/account/logon");
        request.ContentType = "application/x-www-form-urlencoded";
        request.Method = "POST";
        request.CookieContainer = cc;
        request.BeginGetRequestStream(streamResul =>
        {
            HttpWebRequest xR = streamResul.AsyncState as HttpWebRequest;
            Stream stream = xR.EndGetRequestStream(streamResul);
            StreamWriter sw = new StreamWriter(stream);
            sw.Write("username=user1&password=1111");
            sw.Close();

            xR.BeginGetResponse(responseResult =>
            {
                HttpWebRequest yR = responseResult.AsyncState as HttpWebRequest;
                HttpWebResponse response = yR.EndGetResponse(responseResult) as HttpWebResponse;
                response.Close();

                Console.WriteLine("cc count: {0}\nresponse count: {1}", cc.Count.ToString(), response.Cookies.Count);
            }, xR);

        }, request);

        Console.Read(); 
```

每次测试时，服务器都会发回我正在寻找的两个 cookie。然而，无论出于何种原因，windows phone 代码都无法获取这些 cookie。这与这个问题几乎相同：[Cannot get cookies in wp7 using HttpWebRequest](https://stackoverflow.com/questions/9622296/cannot-get-cookies-in-wp7-using-httpwebrequest)但是我不明白解决方案是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T00:13:56.597

哇，我觉得自己像个傻瓜。它一直在工作......也许对其他人来说这是显而易见的，但我错过了。问题是，由于被发回`HttpOnly`的 cookie 是 ，cookie 容器根本不会公开它们，即使您询问 cookie 的计数。

奇怪的是，虽然在控制台版本中，我可以看到有两个，但我想 Windows phone 的 System.Net.dll 锁定了`CookieContainer`一点。

# iphone - 如何为 iOS 创建像谷歌地图这样的用户卡片动画

> ID：13942397
> 
> 赞同：0
> 
> 时间：2012-12-18T22:15:32.437
> 
> 标签：iphone, objective-c, ios, ipad

在新的 iOS 谷歌地图中，​​当你搜索一个地方时，它的底部有一张卡片，你可以上下拖动/动画。我试图通过在 UIViewController 的视图上使用 UIPanGestureRecognizer 来复制这一点，但是当我轻弹时，我希望它能够像在 Google 地图上那样流畅地动画。怎样才能达到这种效果？当我点击并按住它时，它工作得很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:03:58.233

计算您希望它移动的速度（可能是轻弹的速度，如果太快则可能更小），然后使用[animateWithDuration:animations:](https://developer.apple.com/library/ios/documentation/uikit/reference/UIView_Class/UIView/UIView.html#//apple_ref/occ/clm/UIView/animateWithDuration%3aanimations%3a)将视图设置为动画到其最终位置。设置持续时间，使其以您希望它移动的速度移动。

# c# - 没有始终如一地在 ASP.net 中设置线程文化 - 坏主意？

> ID：13942398
> 
> 赞同：0
> 
> 时间：2012-12-18T22:15:34.087
> 
> 标签：c#, asp.net, culture

我发现了一种特定情况，即我们在页面加载后不设置线程文化。

我们也有一个非常罕见的情况，即某人的文化无缘无故地转换。

这两件事有关系吗？

我知道当您使用线程池时，池中的所有内容都不会被重置。线程文化是否是其中之一，因此线程已被归还给池的一个人的文化是否会泄漏到下一个人的线程中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:54:08.280

鉴于 michielvoo 评论中**[链接](https://stackoverflow.com/questions/1467194/does-changing-the-culture-of-a-threadpool-thread-affect-it-when-it-gets-returne)**中的信息，我认为这两件事很可能是相关的。

您可能希望从 HTTP 请求标头`Accept-Language`（在`Application_BeginRequest`方法覆盖中的 global.asax 中）手动设置线程文化，并在缺少该标头时使用默认的回退文化（取决于您的 Web 的目标受众，但通常最好使用`en`）。

**但是**，如果可能的话，让用户/访问者覆盖此类文化/语言设置是一个*非常*好的做法 - 浏览器是邪恶的，有时文化设置可能会超出用户的控制（例如，在其语言的国家/地区度假时的网吧用户不说话）

# uiviewcontroller - 实例化 UIViewController 显示 UIImageView

> ID：13942401
> 
> 赞同：0
> 
> 时间：2012-12-18T22:15:50.130
> 
> 标签：uiviewcontroller, uiimageview

不知道为什么这对我来说如此困难，但我几天来一直在尝试创建一个具有两个 UIViewControllers 的简单应用程序。根视图控制器包含大约 20 个 jpg 缩略图图像。选择图像时，我想实例化一个新的 UIViewController 来显示所选图像。有人会碰巧有任何代码供我使用吗？在根视图控制器中，我愿意使用 UIImageViews 或 UIButtons 并将背景设置为相应的 jpg 文件。

我的问题似乎是双重的：1）确定选择了哪个缩略图图像和 2）实例化显示所选图像的新 UIViewController。

任何建议和/或代码将不胜感激，因为我一直在不知疲倦地努力解决对你们大多数人来说可能是一个非常简单的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:30:35.093

你可以为每个imageView添加点击手势，在tapGesture的selector方法中，你可以提取被点击的imageView。不要忘记将 imageViews 的 userInteractionEnabled 设置为 YES。

```
//code for adding tap gesture, where img is your imageView
 UITapGestureRecognizer *tap = [[UITapGestureRecognizer alloc]initWithTarget:self action:@selector(handleTap:)];
        [img addGestureRecognizer:tap];
        [img setUserInteractionEnabled:YES];

//in selector method

-(void)handleTap:(UITapGestureRecozgnizer *)recognizer
{

UIImageView *imView = (UIImageView *)recognizer.view;

SecondViewController *vc = [[SecondViewController alloc]init];

[vc setImage : imView.image];

[self.navigationController pushViewController:vc animated:YES];

} 
```

# flash - 在 testMovie 命令之后，如何让 JSFL 将跟踪输出保存到文件中？

> ID：13942405
> 
> 赞同：3
> 
> 时间：2012-12-18T22:16:21.907
> 
> 标签：flash, export, jsfl

我正在尝试为我们的一种产品自动化单元测试。它基于 ActionScript，但我们没有 FlashBuilder。我们使用 Jenkins 来完成我们所有的自动输出，我可以让文件正常工作，并创建和渲染 AS 单元测试 FLA 文件的 testMovie。这样做会将测试结果输出到跟踪输出面板。我使用 JSFL simlar 来运行这个 flash 文件

```
var folderPath = path/to/folder/file.fla
if (fl.fileExists(folderPath))
{
    fl.openDocument(folderPath);
    fl.getDocumentDOM().testMovie;
    fl.getDocumentDOM().close(false);
    fl.outputPanel.save("file:///C:/testJSFL/output.txt");
} 
```

不幸的是 outputPanel.save 在 testMovie 输出被放置为跟踪操作之前运行，我还没有通过许多 Google 搜索找到一种方法，以了解如何让系统等到电影运行以保存此文件。我什至尝试多次打开和关闭文件。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T19:59:41.230

确保*testMovie*作为函数调用并在关闭*前保存输出：*

```
var folderPath = path/to/folder/file.fla
if (fl.fileExists(folderPath))
{
    fl.openDocument(folderPath);
    fl.getDocumentDOM().testMovie();
    fl.outputPanel.save("file:///C:/testJSFL/output.txt");
    fl.getDocumentDOM().close(false);
} 
```

# javascript - dijit 中 animateProperty 的范围问题

> ID：13942406
> 
> 赞同：0
> 
> 时间：2012-12-18T22:16:23.993
> 
> 标签：javascript, scope, dojo

在自定义 dijit 中，我有一个按钮`data-dojo-attach-event`连接到一个名为`_goNext`. 我需要对 Dijit 控制器 javascript 文件中声明的节点进行动画处理，但它的范围似乎`animateProperty`有点捏造。

```
require([/* deps */], function(/*deps*/){
    return declare(null, {
    postCreate : function(){
        this._animNode = query('.someNode')[0];
    },
    // non-essentials omitted
    _goNext : function(){
        fx.animateProperty({
            node : this._animNode
            properties : { 
                left : { 
                    start : this._start,
                    end : this._end,
                    unit : 'px'
                } 
            },
            onEnd : function(){
                this.updateCurrentScreen();
            }
        }).play();
    }
} 
}) 
```

...本质上就是我正在使用的东西。这样一来，它什么也不做，因为它的范围与声明我的节点和值的地方不同。如果我手动输入值（硬编码）并为要抓取的节点参数应用一个 id，它可以正常工作，但这很愚蠢，而不是我想要的。

我尝试将它包装在`this`作为参数传递的匿名包装器中，但我得到了 TypeErrors`style`和其他一些东西。

我是否必须使用挂钩或其他范围修改方法的变体？或者有没有更简单的方法来正确准备好这个东西`this`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T00:09:54.000

您肯定需要将`onEnd`处理程序连接到 的当前值`this`，否则当您尝试调用时会遇到上下文问题`updateCurrentScreen`

# python - 从消费者生成器返回单个值

> ID：13942413
> 
> 赞同：1
> 
> 时间：2012-12-18T22:16:38.223
> 
> 标签：python, generator

我有一个消费者生成器的管道。从这些消费者中的最后一个，我想在某个时间点返回结果。这有效：

```
class StopIterationWithResult(StopIteration):
    def __init__(self, result):
        super(StopIterationWithResult, self).__init__()
        self.result = result

# for definition fo consumer decorator see http://www.python.org/dev/peps/pep-0342/
@consumer
def waitfor3():
    while True:
        value = (yield)
        if value == 3:
            raise StopIterationWithResult('Hello')

c = waitfor3()
for i in range(10):
    try:
        print 'calling', i
        c.send(i)
    except StopIterationWithResult as r:
        print 'stopped', r.result
        break 
```

有没有更好的办法？例如，如果生成器`StopIteration`因`return`语句而引发，您能否访问它的返回值？

根据@alexis 的要求，这是一个带有管道的示例：

```
class StopIterationWithResult(StopIteration):
    def __init__(self, result):
        super(StopIterationWithResult, self).__init__()
        self.result = result

@consumer
def add1_filter(consumer):
    while True:
        value = (yield)
        consumer.send(value+1)

@consumer
def waitfor3():
    while True:
        value = (yield)
        print 'got', value
        if value == 3:
            raise StopIterationWithResult('Hello')

c = waitfor3()
f = add1_filter(c)
for i in range(10):
    try:
        print 'calling', i
        f.send(i)
    except StopIterationWithResult as r:
        print 'stopped', r.result
        break 
```

这与@Martijn Pieters 的答案相同 - 但是，过滤器有点难看：

```
@consumer
def add1_filter(consumer):
    result = None
    while True:
        value = (yield result)
        result = consumer.send(value+1)

@consumer
def waitfor3():
    while True:
        value = (yield)
        print 'got', value
        if value == 3:
            yield 'Hello'
            break

c = waitfor3()
f = add1_filter(c)
r = None
for i in range(10):
    try:
        print 'calling', i
        r = f.send(i)
    except StopIteration:
        print 'stopped', r
        break 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:30:12.520

收益是双向的。在右手表达式中使用，它将接收并用作产生表达式结果的语句。

只需产生该结果值：

```
def waitfor3():
    while True:
        value = (yield)
        if value == 3:
            yield 'Hello'
            break

c = waitfor3()
for i in range(10):
    try:
        print 'calling', i
        result = c.send(i)
    except StopIteration:
        print 'stopped', result
        break 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:25:41.367

你不需要子类`StopIteration`，你可以访问`args`你传递给它的构造函数。请参阅[http://docs.python.org/2/library/exceptions.html#exceptions.BaseException](http://docs.python.org/2/library/exceptions.html#exceptions.BaseException)：

```
@consumer
def add1_filter(consumer):
    while True:
        value = (yield)
        consumer.send(value+1)

@consumer
def waitfor3():
    while True:
        value = (yield)
        print 'got', value
        if value == 3:
            # This doesn't work:
            # return 456 # SyntaxError: 'return' with argument inside generator 
            # But this does:
            raise StopIteration(123)

c = waitfor3()
f = add1_filter(c)
for i in range(10):
    try:
        print 'calling', i
        f.send(i)
    except StopIteration as r:
        print 'stopped (StopIteration)', r, type(r.args[0])
        break 
```

# module - 创建一个 prestashop 模块试图在 PrestaShop 模块上显示错误

> ID：13942416
> 
> 赞同：-2
> 
> 时间：2012-12-18T22:16:50.813
> 
> 标签：module, prestashop

当用户从表单提交数据时，我试图显示错误，但没有错误。

尝试按如下方式放入驱动程序（迫使您向我显示错误）

```
 public function postProcess()
    {
    $ this-> errors [] = Tools :: DisplayError ('Invalid e-mail address');
    } 
```

并在模板中

```
{include file = "$ tpl_dir. / errors.tpl"}

<form method="post" action="{$request_uri|escape:'htmlall':'UTF-8'}" class="std" id="form_confirmPassword">
<fieldset>
<p class="text">
<label for="email"> {l s = 'E-mail'} </ label>
<input type = "text" id = "email" name = "email" value = "{if isset ($ smarty.post.email)} {$ smarty.post.email | escape: 'htmlall': 'UTF-8 '| stripslashes} {/ if} "/>
</ p>
</ fieldset>
</ form> 
```

无论如何，我无法显示任何消息错误，例如 prestashop 本机模块显示...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T15:28:56.613

我做错了一切。

从一个链接调用到一个既不是类也不是控制器的页面。

我的最后一个电话是...

```
{base_dir} {$ modules / mymodule / beginprofile.php 
```

在那个页面上，我拥有像普通 PHP 页面一样的所有逻辑。

并改变这一点。

```
{base_dir} {$ index.php? fc = module & MyModule = extrainfos & controller = beginprofile 
```

  然后我将所有函数移动到一个新类，该类扩展了 MYMODULE 的控制器文件夹中的 FrontController 类

并且工作不止于此。

# bash - 使用 `at` 进行作业调度。“EOF：未找到”

> ID：13942420
> 
> 赞同：2
> 
> 时间：2012-12-18T22:17:16.617
> 
> 标签：bash, scheduled-tasks, timedelay

我正在尝试在远程服务器上安排作业。我希望这个作业被安排在当前服务器时间的一分钟或最后一个计划作业的服务器时间的一分钟，以便在服务器上运行。这样，没有两个作业同时运行（因此避免了竞争条件）。

作业调度是通过`at`远程（linux）服务器上的命令完成的。我被迫使用`at`，因为我在连接到同一服务器的多个主机上运行一堆复杂的模拟以请求下一个模拟（为简洁起见，我的问题中省略了这部分）。

我在尝试将作业安排在最后一次安排的作业之后的一分钟（如果没有安排的作业，则从现在起一分钟）运行时遇到了问题。我的调度程序脚本当前如下所示：

```
minute=`atq | sort -t" " -k1 -nr | head -n1 | cut -d' ' -f4 | cut -d":" -f1,2`
curr=`date | cut -d' ' -f4 | cut -d':' -f1,2`

# the 'python -c" prints the correct scheduling time to stdout
cat <<EOF | at `python -c "import sys; hour,minute=map(int,max(sys.argv[1:]).split(':')); minute += 1; hour, minute = [(hour,minute), ((hour+1)%24,(minute+2)%60)][minute>=60]; print '%d:%02d'%(hour, minute)" "$minute" "$curr"`

python path/to/somescript "$1"

EOF 
```

但是，使用此脚本，我收到以下错误：

```
somescript: 8: EOF: not found 
```

但是，如果我按如下方式对时间进行硬编码，该错误就会消失，并且调度会按预期进行：

```
minute=`atq | sort -t" " -k1 -nr | head -n1 | cut -d' ' -f4 | cut -d":" -f1,2`
curr=`date | cut -d' ' -f4 | cut -d':' -f1,2`

cat <<EOF | at 16:48 # or whatever other time

python path/to/somescript "$1"

EOF 
```

我将不胜感激有关如何解决此错误的任何帮助，因为此错误导致我的整个设置变得疯狂。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:45:42.170

只是一个想法。而不是使用此处的文档，为什么不创建一个临时文件并摆脱 EOF 问题？

或这样做：

```
echo python path/to/somescript "$1" | at `python -c "import sys; hour,minute=map(int,max(sys.argv[1:]).split(':')); minute += 1; hour, minute = [(hour,minute), ((hour+1)%24,(minute+2)%60)][minute>=60]; print '%d:%02d'%(hour, minute)" "$minute" "$curr"` 
```

将摆脱 EOF，也许您可​​以更好地看到错误。

我猜 python 代码在一些奇怪的情况下出现错误，缺少前导零，am/pm，这是我目前看不到的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T22:54:03.510

而不是`cat <<EOF | at ...`，尝试`at <time> <<EOF`。没有理由折磨`cat`这里。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T03:05:30.333

这就是我最终实施的：

```
minute=`atq | sort -t" " -k1 -nr | head -n1 | cut -d' ' -f4 | cut -d":" -f1,2`
curr=`date | cut -d' ' -f4 | cut -d':' -f1,2`

# the 'python -c" prints the correct scheduling time to stdout
gotime=`python -c "import sys; hour,minute=map(int,max(sys.argv[1:]).split(':')); minute += 1; hour, minute = [(hour,minute), ((hour+1)%24,(minute+2)%60)][minute>=60]; print '%d:%02d'%(hour, minute)" "$minute" "$curr"`

cat <<EOF | at "$gotime"

python path/to/somescript "$1"

EOF 
```

它就像一个魅力

# jenkins - Jenkins插件在winstone上工作但不在tomcat中

> ID：13942423
> 
> 赞同：0
> 
> 时间：2012-12-18T22:17:38.207
> 
> 标签：jenkins, jenkins-plugins

我在 Jenkins 的两个实例上使用 0.6.15 版本。一个实例在 tomcat6 上运行，一个在码头上运行。墙显示在 Jetty 上运行的 jenkins 实例上运行良好。但是对于在 tomcat6 上运行的那个，我得到一个内部服务器错误。跟踪显示原因：org.acegisecurity.AccessDeniedException：请登录访问作业。我确实有管理员级别的权限。有什么想法可以解决这个问题吗？

# audio - FFmpeg - 从传输流文件（.ts）中提取视频和音频

> ID：13942424
> 
> 赞同：15
> 
> 时间：2012-12-18T22:17:39.813
> 
> 标签：audio, video, ffmpeg, transport-stream

我希望通过指定其 PID 而不会损失质量并在结果文件中使用相同的编解码器（输出文件是 MPEG）来**提取传输流文件（.ts）中某个程序的音频和视频。**

FFmpeg甚至*可能吗？*如果是这样，我该怎么做？

到目前为止，我已经来到这个命令：

```
 ffmpeg -i tsfile.ts -vcodec copy -acodec copy -q:v 1 output.mpg 
```

*编辑*：请注意，文件 output.mpg 已创建。该文件包含视频，但未附加音频（无声音）。另外，我无法指定要提取的程序 PID。

*编辑 2*：这是**ffmpeg -i tsfile.ts的输出**

```
ffmpeg version N-47062-g26c531c Copyright (c) 2000-2012 the FFmpeg developers
built on Nov 25 2012 12:21:26 with gcc 4.7.2 (GCC)
    libavutil      52\.  9.100 / 52\.  9.100
    libavcodec     54\. 77.100 / 54\. 77.100
    libavformat    54\. 37.100 / 54\. 37.100
    libavdevice    54\.  3.100 / 54\.  3.100
    libavfilter     3\. 23.102 /  3\. 23.102
    libswscale      2\.  1.102 /  2\.  1.102
    libswresample   0\. 17.101 /  0\. 17.101
    libpostproc    52\.  2.100 / 52\.  2.100
[mpeg2video @ 0201c7a0] mpeg_decode_postinit() failure
Last message repeated 10 times
[mpegts @ 0037b800] PES packet size mismatch
Input #0, mpegts, from 'tsfile.ts':
Duration: 00:01:30.58, start: 56297.848344, bitrate: 18045 kb/s
Program 1
    Stream #0:0[0x31]: Video: mpeg2video (Main) ([2][0][0][0] / 0x0002), yuv420p, 1920x1080  [SAR 1:1 DAR 16:9], 29.97 fps, 29.97 tbr, 90k tbn, 59.94 tbc
    Stream #0:1[0x34]: Audio: ac3 ([129][0][0][0] / 0x0081), 48000 Hz, 5.1(side), s16, 384      kb/s 
```

这是**.ts 文件上的 tsinfo.exe**：

```
Reading from C:\tsfile.ts
Scanning 10000 TS packets

Packet 1 is PAT
Program list:
    Program 1 -> PID 0020 (32)

Packet 2 is PMT with PID 0020 (32)
  Program 1, version 1, PCR PID 0031 (49)
     Program info (38 bytes): 0e 03 c0 b9 16 10 06 c0 02 71 c0 04 00 0b 02 42 3f 05 04
                              47 41 39 34 86 0d e2 65 6e 67 7e 3f ff 65 6e 67 c1 3f ff
 maximum bitrate (3 bytes): c0 b9 16
 smoothing buffer (6 bytes): c0 02 71 c0 04 00
 system clock (2 bytes): 42 3f
 Registration GA94
 Descriptor tag 86 (134) (13 bytes): e2 65 6e 67 7e 3f ff 65 6e 67 c1 3f ff
  Program streams:
PID 0031 (  49) -> Stream type 02 (  2) H.262/13818-2 video (MPEG-2) or 11172-2 constrained video
PID 0034 (  52) -> Stream type 81 (129) User private
    ES info (6 bytes): 6a 04 41 43 2d 33
    DVB AC-3 (4 bytes): 41 43 2d 33

Found 14 PAT packets and 7 PMT packets in 10000 TS packets 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-07-25T04:22:00.393

我可以通过提取所需的流并重新混合它来从 ffmpeg 中的 MPTS 获得 SPTS。我的 mpts 有 6 个流，用于三个节目（一个音频，一个视频）：

```
ffmpeg -i mpt.ts -map 0:0 -map 0:1 -acodec copy -vcodec copy -f mpts program1.ts 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-10-31T15:11:25.007

尝试：

```
ffmpeg -i input.ts -map 0:0 -map 0:1 -acodec copy -vcodec copy output.ts 
```

根据您的 input.ts 程序修改地图值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-07-02T07:13:52.070

尝试：

```
`cat *.ts | ffmpeg  -i pipe: -c:a copy -c:v copy output.mp4` 
```

# html - VideoJS - 无缝循环视频

> ID：13942425
> 
> 赞同：4
> 
> 时间：2012-12-18T22:17:40.970
> 
> 标签：html, video, html5-video, video.js

新来的，对任何有 HTML5 视频和/或 VideoJS 播放器经验的人有疑问（如有必要，我也愿意使用不同的播放器）。

我有一个视频，其中包括一个介绍部分和一个我想循环播放的部分。我这样做是为了防止在加载它的第二部分时出现“黑点”。

所以我的问题是，我想让第二部分无缝循环，但似乎不能完全正确地完成它。在它再次开始播放之前似乎有一秒钟左右的延迟。我让我的视频编辑器将循环点设置为正好 36 秒，并使用以下代码寻找 36 秒并在结束后播放。

```
myPlayer.addEvent("ended", function () {
  myPlayer.currentTime(36);
  myPlayer.play();
}); 
```

这最终将视频摆动回第一帧，然后跳到 36 秒，然后播放。我将尝试为视频的最后一秒设置一个侦听器并执行搜索，但我仍然担心搜索后的瞬间延迟。

任何帮助将不胜感激！

亚历克斯

更新：我已经设法通过编辑 video.js 的源来消除它回到第一帧的位，以删除在“结束”事件被触发时运行的默认函数（基本上是这样的：“pause() ; currentTime(0); pause();" )

视频现在将直接进入我需要的 36 秒标记，但问题是它仍然将视频注册为已结束并在 36 秒标记处再次播放之前停止它，从而在循环中产生轻微延迟。我试图弄清楚如何让它监听视频即将结束的第二秒并触发 seek (currentTime) 函数，而不是“结束”事件监听器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T06:39:19.717

尝试将视频分成两部分：介绍和循环部分。为每个元素制作一个`<video>`元素并将它们放置在同一个位置，隐藏第二个视频。在介绍上设置一个`"ended"`事件以换出显示并开始第二个视频。然后，您可以`loop`在第二个视频元素上设置属性。

只要您`preload`至少具有循环视频的属性，就可以让两个视频无缝地一起播放，这应该没有问题。

如果这不起作用，请尝试使用相同的循环视频制作两个视频元素。当一个正在播放时，您可以隐藏另一个并将其设置`currentTime`回零，因此当没有人在看时，任何搜索延迟都会发生。（希望浏览器足够智能，可以缓存视频文件，并且只从网络加载一次，但您可能想尝试一下。）

（不幸的是，这些都不适用于 ipad，因为移动 safari 不支持一个网页上的多个媒体元素。）

# ruby-on-rails-3 - 寻找不应该存在的资产路径时，Rspec/Capybara/Selenium 测试失败

> ID：13942428
> 
> 赞同：3
> 
> 时间：2012-12-18T22:17:54.557
> 
> 标签：ruby-on-rails-3, capybara, jstree, rspec-rails

我正在创建一个使用 jstree 的 rails 应用程序。现在我正在尝试在 rspec 测试中测试 jstree 的功能，使用 capybara 和 selenium 驱动程序（js：true）。测试是：

```
scenario "the object associated with the data-pane is selected in the tree", js: true do 
  visit surveyor_path
  using_wait_time(20) { expect(page).to have_selector("##{obj.class.name}_#{obj.id.to_s}")  }
end 
```

这是在 shared_example 中，obj 是与测试相关的对象（在本例中为测量员）。我的 js 树应该生成 id 像“_”的节点。所以我期待像“Surveyor_1”这样的东西。

运行时，我收到以下错误：

```
Failure/Error: Unable to find matching line from backtrace
     ActionController::RoutingError:
       No route matches [GET] "/surveyors/themes/default/style.css"
     # /Users/chrisgat/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
     # /Users/chrisgat/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
     # /Users/chrisgat/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/rack/logger.rb:26:in `call_app'
     # /Users/chrisgat/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/rack/logger.rb:16:in `call'
     # /Users/chrisgat/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/middleware/request_id.rb:22:in `call'
     # /Users/chrisgat/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/methodoverride.rb:21:in `call'
     # /Users/chrisgat/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/runtime.rb:17:in `call'
     # /Users/chrisgat/.rvm/gems/ruby-1.9.3-p194/gems/activesupport-3.2.8/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
     # /Users/chrisgat/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/lock.rb:15:in `call'
     # /Users/chrisgat/.rvm/gems/ruby-1.9.3-p194/gems/actionpack-3.2.8/lib/action_dispatch/middleware/static.rb:62:in `call'
     # /Users/chrisgat/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/engine.rb:479:in `call'
     # /Users/chrisgat/.rvm/gems/ruby-1.9.3-p194/gems/railties-3.2.8/lib/rails/application.rb:223:in `call'
     # /Users/chrisgat/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:134:in `call'
     # /Users/chrisgat/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/urlmap.rb:64:in `block in call'
     # /Users/chrisgat/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/urlmap.rb:49:in `each'
     # /Users/chrisgat/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/urlmap.rb:49:in `call'
     # /Users/chrisgat/.rvm/gems/ruby-1.9.3-p194/gems/capybara-2.0.1/lib/capybara/server.rb:19:in `call'
     # /Users/chrisgat/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/handler/webrick.rb:59:in `service'
     # /Users/chrisgat/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
     # /Users/chrisgat/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
     # /Users/chrisgat/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

事情是这样的，`/surveyors/themes/default/style.css`首先不应该是一条路线。它正在寻找的资产位于`assets/themes/default/style.css`. 这是一个特定于 js-tree 的样式表。在测试中插入一些调试器语句，我可以验证页面确实有选择器。如果页面确实有选择器，我只会得到异常......也就是说，如果我将内容更改为`have_selector`to `"BadSelector"`，测试将定期失败（没有找到选择器）。js-tree 功能在手动查看时有效。

在此先感谢您的帮助

Rails 3.2.8 Rspec 2.12 Capybara 2.0

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-27T22:39:51.620

Echo，有人在吗？不，看来我是在给自己写信。

如果其他人遇到这个问题，我确实想出了如何解决它，尽管我不能 100% 确定根本原因。当我“安装”jstree 时，我只是将它转储到资产管道（javascript）中。在开发中效果很好，但在测试中效果不佳（见上文）。Jstree 使用它的主题插件来加载样式表，而不是将它们直接放在样式表文件夹中。在测试中，无论出于何种原因，它生成的路径都会作为当前页面路径的前缀。我使用 jstree rails gem 解决了这个问题，它明确引用了用于样式表的目录。问题解决了。

# google-apps-script - 在 Google Apps 脚本中使用 d3.js 绘图？

> ID：13942431
> 
> 赞同：2
> 
> 时间：2012-12-18T22:18:14.763
> 
> 标签：google-apps-script, d3.js

由于 Google Apps 脚本是用 javascript 编写的，我想知道是否可以以某种方式导入它并使用它来代替图表库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-08T06:40:57.290

截至 2016 年，它运行良好。这是一个简单的例子。

[GAS内的D3](http://bit.ly/1QmhNbG)

你可以在这里找到代码：[github-D3-GAS](http://bit.ly/1KAoWs8)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T13:38:16.357

是的，原则上你可以包含任何你喜欢的 Javascript 库。但是，它必须符合 Google 的 Caja 清理 -[请参阅此处的“JavaScript 库”子标题](https://developers.google.com/apps-script/html_service#Caja)。您将需要使用[Html Service](https://developers.google.com/apps-script/html_service)而不是[Ui Service](https://developers.google.com/apps-script/uiapp)来构建您的应用程序。

* * *

[2015 年 2 月 9 日更新] 自最初编写以来，HtmlService 发生了一些变化。[此限制页面](https://developers.google.com/apps-script/guides/html/restrictions)详细介绍了 3 种不同的沙盒模式。IFRAME 模式不使用 Caja 清理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-12-30T00:14:05.697

是的，您可以导入 d3 并在 Google Apps 脚本中使用它。为此，您需要将其包含在您的脚本中，如下所述：[https ://github.com/d3/d3](https://github.com/d3/d3)

这是Gist中的 hello world [GAS 脚本](https://gist.github.com/tanyagupta/bfb2e1da7186164b75cd66ef5d86c2c3)

# c++ - 十六进制到十六进制字节的字符串

> ID：13942433
> 
> 赞同：2
> 
> 时间：2012-12-18T22:18:22.080
> 
> 标签：c++

我的输入是

```
char *str = "/send 13 01 09 00"; 
```

我需要输出

```
BYTE* result = { 0x13, 0x09, 0x00 }; 
```

（所以跳过/发送）

有人可以为我提供一个从一串十六进制字节中获取字节的解决方案吗？

这是我尝试过的：

```
#include "stdafx.h"
#include <iostream>
#include <windows.h>
#include <conio.h>
#include <string>

byte *ToPacket(const char* str)
{
    const char *pos = str;
    unsigned char val[sizeof(str)/sizeof(str[0])];

    size_t count = 0;

    for(count = 0; count < sizeof(val)/sizeof(val[0]); count++)
    {
        sscanf_s(pos, "%2hhx", &val[count]);
        pos += 2 * sizeof(char);
    }

    return val;
}

int _tmain(int argc, _TCHAR* argv[])
{

redo:

    while (true)
    {
        std::string key;
        std::getline(std::cin, key); 

        if (key != "")
        {
            if (key == "/hit")
            {
                BYTE packet[] = { 0x13, 0x01, 0x00 };
                int size = sizeof(packet) / sizeof(packet[0]);              

                std::cout << "[FatBoy][" << key << "]: Hit\n";
            }
            else if (strstr(key.c_str(), "/send"))
            {
                BYTE * packet = ToPacket(key.c_str());
                int size = sizeof(packet) / sizeof(packet[0]);

            }

            key = "";
            break;
        }

        Sleep(100);
    }
    goto redo; 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:32:14.850

```
#include <iostream>
#include <sstream>
#include <string>
#include <iomanip>

std::string s("/send 13 01 09 00");
int v1,v2,v3,v4;
std::string cmd;
std::istringstream inp_stream(s);
inp_stream >> cmd >> std::setbase(16) >> v1 >> v2 >> v3 >> v4; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T22:33:54.327

`std::istringstream`与IO 操纵器一起使用[`std::hex`](http://en.cppreference.com/w/cpp/io/manip/hex)来填充`std::vector<unsigned char>`：

```
std::string s("13 01 09 00");
std::vector<unsigned char> v;
std::istringstream in(s);
in >> std::hex;

unsigned short c;
while (in >> c) v.push_back(static_cast<unsigned char>(c)); 
```

[请参阅http://ideone.com/HTJmzJ](http://ideone.com/HTJmzJ)上的演示。

# javascript - 重置“随机”数学

> ID：13942437
> 
> 赞同：0
> 
> 时间：2012-12-18T22:18:39.890
> 
> 标签：javascript, jquery, random, reset

我有一个随机生成器，我使用数组和以下字符串进行随机化：

```
var doelgroepRand = doelgroepArray[Math.floor(Math.random() * doelgroepArray.length)]; 
```

/

```
var divergeerIdee = 'Laat een' + ' ' + doelgroepRand + ' ' + watRand + ' ' + handelingRand 
```

这进入

```
$('#something').click( function() { 
event.preventDefault();
alert(divergeerIdee); });
}); 
```

但是要获得一组新的随机项目，您需要刷新页面。我希望，点击时，一切都被“重置”，你会得到新的随机物品。

我需要的字符串是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:34:52.990

只需将其全部打包在一个 javascript 函数中。例如：

```
function createRandom() {
  var doelgroepRand = doelgroepArray[Math.floor(Math.random() * doelgroepArray.length)];
  return divergeerIdee = 'Laat een' + ' ' + doelgroepRand + ' ' + watRand + ' ' + handelingRand
}

$('#something').click( function() { 
    event.preventDefault();
    alert(createRandom()); 
    alert(createRandom()); 
  });
}); 
```

# python - Google App Engine 和组配置

> ID：13942439
> 
> 赞同：0
> 
> 时间：2012-12-18T22:18:45.043
> 
> 标签：python, google-app-engine, google-api, oauth-2.0, google-provisioning-api

我真的需要一些帮助，我已经在这里待了将近 2 周。

我正在尝试做的是使用 oAuth2 在 GAE（Google App Engine）内部使用 Google 的配置 API。我知道有一些使用 oAuth1 的示例来完成此操作。我的理解是，现在不推荐使用 oAuth1，我们必须使用 oAuth2，如果我错了，请纠正我。

我已经搜索了互联网，我能找到的唯一例子是：

[http://gdata-samples.googlecode.com/svn-history/r232/trunk/gdata/youtube-oauth2-app-engine/main.py](http://gdata-samples.googlecode.com/svn-history/r232/trunk/gdata/youtube-oauth2-app-engine/main.py)

我发现的其他示例使用 oAuth 1，或者它们不是为与 App Engine 一起使用而设计的。

我从上面的示例中获取了代码，并尝试对其进行修改以与组配置 API 一起使用，这是我的代码：

```
import os

from gdata.alt import appengine
from gdata.service import RequestError
from google.appengine.api import users
from google.appengine.ext import webapp
from google.appengine.ext.webapp import template
from google.appengine.ext.webapp import util
from oauth2client.appengine import OAuth2Decorator
import gdata.auth
import gdata.apps.groups.client
import gdata.client
import httplib2

API_VERSION = '2.0'
BASE_URL = '/a/feeds/group/%s' % API_VERSION
# HACK to use the Python GData client library with OAuth 2 tokens.
# We use the methods that deal with AuthSub tokens.
gdata.auth.AUTHSUB_AUTH_LABEL = "OAuth "

class MainHandler(webapp.RequestHandler):
  # The client_id and client_secret are copied from the API Access tab on
  # the Google APIs Console <http://code.google.com/apis/console>
  oauth2_decorator = OAuth2Decorator(
    client_id="myClientID.apps.googleusercontent.com",
    client_secret="myClientSecret",
    scope="https://apps-apis.google.com/a/feeds/groups/")

  # This decorator ensures that whenever this page is served, we have a valid
  # OAuth 2 token for the user.
  @oauth2_decorator.oauth_required
  def handle_exception(self, exception, debug_mode):
    """Handle OAuth 2 token expirations by forcing a refresh.

    For newer Google APIs, refreshes are handled automatically by the client
        library, but for GData APIs, we need to explicitly force this behavior.
    """
    if (isinstance(exception, RequestError) and
        exception.args[0]["status"] == 401):
      body = exception.args[0]["body"]
      if "Token invalid - Invalid AuthSub token." in body:
        self.oauth2_decorator.credentials._refresh(httplib2.Http().request)
        self.redirect(self.request.url)
        return

    webapp.RequestHandler.handle_exception(self, exception, debug_mode)

  # This decorator ensures that whenever this page is served, we have a valid
  # OAuth 2 token for the user.
  @oauth2_decorator.oauth_required
  def get(self):
      self.domain='testdomain123456.mygbiz.com'
      self.baseuri = '%s/%s' % (BASE_URL, 'testdomain123456.mygbiz.com')
      self.token = self.oauth2_decorator.credentials.access_token
      self.client = gdata.apps.groups.client.GroupsProvisioningClient(
        domain=self.domain, auth_token=self.token)

      self.client.SetAuthSubToken(self.token)

      params = dict(
      logout_url=users.create_logout_url(self.request.uri),
      memberFeed = self.client.RetrieveAllMembers('test')
    )
      path = os.path.join(os.path.dirname(__file__), 'templates', 'index.html')
      self.response.out.write(template.render(path, params))

def main():
  application = webapp.WSGIApplication([('/', MainHandler)], debug=True)
  util.run_wsgi_app(application)

if __name__ == '__main__':
  main() 
```

我将它部署到[http://appplat4.appspot.com](http://appplat4.appspot.com)，如您所见，它返回 500 服务器错误。我在同一个目录中拥有所有必要的库，`app.yaml`并且我为域设置了我的 google api。

**截屏：** ![在此处输入图像描述](../Images/b75d8dc4da20a23cd23b3b0be1b597d4.png)

我一直在尽我所能从 GAE 中配置组，但没有成功。如果可以，请提供帮助，*不胜*感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T23:38:53.873

这不涉及应用程序引擎，但它是使用带有 oauth 2 的 gdata 客户端的命令行示例：

```
import sys
import os
import webbrowser
import gdata.gauth
import oauth2client.client
import oauth2client.file
import oauth2client.tools
import gdata.gauth
import gdata.client
import gdata.apps.groups.client

APICONSOLE = 'https://code.google.com/apis/console'
SCOPES = 'https://apps-apis.google.com/a/feeds/groups/'
OAUTH2FILENAME = 'credentials.oauth2'
OAUTH2JSONFILE = 'client_secrets.json'
OAUTH2USERAGENT = 'GROUPS'
MISSING_OAUTHJSONFILE_MESSAGE = """
You must create or download a client secrets json file (%s)
from the Google APIs console <https://code.google.com/apis/console>.
Attemping to open page with your browser ...
""" % os.path.join(os.path.dirname(__file__), OAUTH2JSONFILE)

# populate with approprate values
DOMAIN = 'your-domain'
GROUP_ID = 'agroup@your.domain'

if not os.path.isfile(OAUTH2JSONFILE):
  message = MISSING_OAUTHJSONFILE_MESSAGE
  print message
  try:
    webbrowser.open(str(APICONSOLE))
  except Exception, e:
    print "Error opening web page"
    sys.exit(1)
  message = 'When %s is created/downloaded press Enter to continue ... ' %(OAUTH2JSONFILE)
  raw_input(message)
oauth2_flow = oauth2client.client.flow_from_clientsecrets(OAUTH2JSONFILE,
  scope=SCOPES,message=MISSING_OAUTHJSONFILE_MESSAGE)
storage = oauth2client.file.Storage(OAUTH2FILENAME)
oauth2_credentials = storage.get()
if oauth2_credentials is None or oauth2_credentials.invalid:
  oauth2_credentials = oauth2client.tools.run(oauth2_flow, storage)
oauth2_token = gdata.gauth.OAuth2Token(
  client_id=oauth2_credentials.client_id,
  client_secret=oauth2_credentials.client_secret,
  scope=SCOPES,
  user_agent=OAUTH2USERAGENT,
  access_token=oauth2_credentials.access_token,
  refresh_token=oauth2_credentials.refresh_token)
# authorize client
groups_client = oauth2_token.authorize(
  gdata.apps.groups.client.GroupsProvisioningClient(domain=DOMAIN))
print 'Authorized domain %s . . .\n' %(DOMAIN)
group_entry = groups_client.RetrieveGroup(group_id=GROUP_ID)
print group_entry.group_id
print group_entry.group_name
print group_entry.description
print group_entry.email_permission

sys.exit(0) 
```

# algorithm - 是 O(1/2 X log N) = O(logN)

> ID：13942442
> 
> 赞同：5
> 
> 时间：2012-12-18T22:19:14.100
> 
> 标签：algorithm, math, big-o

假设我有一个内存要求为 logN+1 的算法，其中 N 是问题的大小（要处理的位数）。我提出了第二个版本，将内存需求降低到 (logN)/2+1。我了解到在 Big-O 分析中忽略了常量，因此两个算法版本的复杂度都是 O(logN)。

现在，如果我计算使用第二版算法节省的内存，我得到

> 在 N = M(N) = 1 - [(logN)/2+1]/[logN+1]
> lim N→∞ M(N) = 1/2时节省的内存

这表明渐近地我将始终节省 50% 的内存。我很困惑为什么我无法在 Big-O 分析中看到这种收益？

我的第二个问题是：如果我对 Big-O 表示法的理解是错误的，那么突出显示算法第二版中保存的内存的正确方法是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T22:30:14.070

请记住，大 O 表示法不包括常数因子。函数 f(n) = n 和 g(n) = 10 ^(100) n 都是 O(n)，尽管 f(n) 是一个比 g(n) 小得多的函数。

您的分析是正确的 - 如果您可以使空间使用量 (log n) / 2 - 1，那么您将（在限制范围内）将所需的内存量减半。但是，这不会出现在大 O 分析中，因为大 O 忽略了常数因素。正如在其他一些答案中所提到的，大 O 表示法捕获了长期增长率，尽管常量可能会告诉您更多关于使用的空间的*绝对*量，但常量并不能控制空间使用的长期增长率.

如果你想做更精确的分析，你可以给出之前和之后的确切内存使用情况，然后说你已经减少了 50% 的内存使用情况。许多关于算法和数据结构的论文实际上确实包含了常数因素，并提到它们正在获得不断的加速。例如，[Cholesky 分解](http://en.wikipedia.org/wiki/Cholesky_decomposition)算法和高斯消元算法都给出了求解线性系统的 O(n ³ ) 算法，但是当可以使用 Cholesky 分解时，它的运算量减少了大约 50%。大多数涵盖这些主题的教科书都会提到，尽管两种算法都是 O(n ³ )，但如果可以使用前者，则前者比后者更可取。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T22:30:51.973

Big-O 没有考虑常数因素。它只是衡量算法如何扩展的量度 - 所以任何与 log N 成比例增长的东西都是 O(log N)。这是一个相对的衡量标准，就像说两个人加薪 10%，即使一个人的工资从 10,000 到 12,000，另一个从 1,000,000 到 1,200,000。如果你被告知某人的总工资每年增长 10%，你就不会指望知道他们的总工资是多少，所以如果你知道算法的总成本增长 O(log N)，就不要指望知道它的总成本.

如果算法的第二个版本使用了一半的内存但具有相同的缩放行为，那么简单地说它使用了一半的内存。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T22:32:20.460

Big-O 在确定算法或实现如何扩展方面非常有用。常数的改进（在您的示例中是一半）仍然有用，但是当问题大小增加一个数量级时，它们几乎没有效果。

# imagemagick - 在 Mountain Lion 上安装 Rmagick 时出错

> ID：13942443
> 
> 赞同：66
> 
> 时间：2012-12-18T22:19:22.470
> 
> 标签：imagemagick, rvm, bundler, osx-mountain-lion, rmagick

我见过其他人[在 Mountain Lion 上安装 RMagick 时遇到](https://stackoverflow.com/questions/11676844/issue-with-installing-imagemagick-and-rmagick-on-mountain-lion)同样的问题，但是建议的解决方案都没有让我成功安装 rmagick。

这是我收到的错误消息：

```
Gem::Installer::ExtensionBuildError: ERROR: Failed to build gem native extension.
checking for Ruby version >= 1.8.5... yes
checking for /usr/local/bin/gcc-4.2... yes
checking for Magick-config... yes
checking for ImageMagick version >= 6.4.9... yes
checking for HDRI disabled version of ImageMagick... yes
checking for stdint.h... yes
checking for sys/types.h... yes
checking for wand/MagickWand.h... yes
checking for InitializeMagick() in -lMagickCore... no
checking for InitializeMagick() in -lMagick... no
checking for InitializeMagick() in -lMagick++... no
Can't install RMagick 2.13.1\. Can't find the ImageMagick library or one of the dependent    libraries. Check the mkmf.log file for more detailed information.

*** extconf.rb failed ***
Could not create Makefile due to some reason, probably lack of
necessary libraries and/or headers.  Check the mkmf.log file for more
details.  You may need configuration options. 
```

我做过的事情：

```
Installed XCode
Installed the command line tools
Installed XQuartz
Installed homebrew with imagemagick library
Installed most recent version of RVM
Symlinked GCC
Uninstalled and reinstalled both RVM and imagemagick 
```

任何想法为什么我仍然无法下载 rmagick？

* * *

## 回答 #1

> 赞同：215
> 
> 时间：2012-12-19T19:57:27.353

看来这是 Homebrew github repo ( [https://github.com/mxcl/homebrew/issues/16625](https://github.com/mxcl/homebrew/issues/16625) ) 上报告的一个问题，归咎于 rmagick 本身不支持较新版本的 imagemagick。在同一问题上（[https://github.com/mxcl/homebrew/issues/16625#issuecomment-11519383](https://github.com/mxcl/homebrew/issues/16625#issuecomment-11519383)），您可以找到此链接：[https](https://coderwall.com/p/wnomjg) ://coderwall.com/p/wnomjg ，它实际上对我有用。这就是他所做的：

```
cd /usr/local/Cellar/imagemagick/6.8.0-10/lib
ln -s libMagick++-Q16.7.dylib   libMagick++.dylib
ln -s libMagickCore-Q16.7.dylib libMagickCore.dylib
ln -s libMagickWand-Q16.7.dylib libMagickWand.dylib 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：31
> 
> 时间：2013-02-04T20:30:34.880

最新版 rmagick (2.13.2) 现在支持 imagemagick 6.8

*   [https://github.com/rmagick/rmagick/pull/63](https://github.com/rmagick/rmagick/pull/63)
*   [http://github.com/rmagick/rmagick/blob/master/ChangeLog](http://github.com/rmagick/rmagick/blob/master/ChangeLog)
*   [http://singlebrook.com/blog/rmagick-resurrected](http://singlebrook.com/blog/rmagick-resurrected)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-02-07T22:36:25.820

我们所做的如下：

```
cd /usr/local
git checkout 834ce4a Library/Formula/imagemagick.rb
brew install imagemagick 
```

这将安装 Imagemagick 6.7.7-6

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-01T18:24:12.140

我知道这已经过时了，但我经历了很多这样的反应，但仍然无法让它发挥作用。我找到了另一种语言的随机链接，它实际上为我解决了这个问题（[http://sugiarto.webmuapp.com/Package_MagickCore_was_not_found_in_the_pkg_config_search_path](http://sugiarto.webmuapp.com/Package_MagickCore_was_not_found_in_the_pkg_config_search_path)）。看起来它正在寻找未设置的 PKG_CONFIG_PATH。

什么对我有用：

```
export PKG_CONFIG_PATH=/usr/local/lib/pkgconfig 
```

然后确保它有效：

```
find /usr -name 'MagickCore.pc'
/usr/local/Cellar/imagemagick/6.8.0-10/lib/pkgconfig/MagickCore.pc
/usr/local/lib/pkgconfig/MagickCore.pc 
```

然后再次尝试安装 rmagick：

```
gem install rmagick
Building native extensions.  This could take a while...
Successfully installed rmagick-2.13.2
1 gem installed
Installing ri documentation for rmagick-2.13.2...
Installing RDoc documentation for rmagick-2.13.2... 
```

成功！希望这可以帮助其他仍然遇到此问题的人。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-09-25T22:59:15.280

从其他答案：

```
PKG_CONFIG_PATH=/usr/local/Cellar/imagemagick/6.8.0-10/lib/pkgconfig C_INCLUDE_PATH=/usr/local/Cellar/imagemagick/6.8.0-10/include/ImageMagick gem install rmagick -v '2.13.1' 
```

请参阅[https://stackoverflow.com/a/10645011/1197775](https://stackoverflow.com/a/10645011/1197775)了解如何获取这些目录。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2016-11-24T22:43:21.327

这是在 macOS Sierra 上对我有用的方法。

```
brew uninstall pkg-config
brew install pkg-config
brew unlink pkg-config
brew link pkg-config 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-07T14:28:54.980

我知道这是一个很老的问题，但最近确实发生在我身上。我为那些尝试了所有其他答案但到目前为止无法解决的人发布此信息。将`rmagick`gem 升级到版本已在 MacOS 上`2.13.4`与 Ruby 一起使用。`1.9.3`

希望能帮助到你！

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-12-19T18:53:54.577

检查我对 openssl 问题的回答[https://stackoverflow.com/a/13958931/497756](https://stackoverflow.com/a/13958931/497756) - 只需确保编译 imagemagick 时包含`*.pc`文件 - 这是大多数软件的默认设置，但并非全部。

# delphi - 使用 Indy 连接到 FTP 时如何加密凭据？

> ID：13942445
> 
> 赞同：4
> 
> 时间：2012-12-18T22:19:27.800
> 
> 标签：delphi, ftp, indy, delphi-6

最近我在 WireShark 中注意到我可以看到我用于连接到我的 FTP 服务器以上传文件的 FTP 用户名/密码（我相信 Delphi 6 和 Indy 9 或 10）。我想通过加密密码来防止这种情况，但我不知道从哪里开始。

你会建议什么来防止黑客获得凭据？请不要使用任何组件（即使是免费的）或任何花钱的东西。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T23:46:20.150

In *pure* FTP protocol, you have no means to encrypt anything, so the credentials travel as a plain text and the files, list, etc travel unencrypted to/from the server.

If your sever supports FTPS, which is a plain *normal* FTP session over a SSL encrypted connection, you can do it using the same TIdFTP object you're using, but changing the default IO handler to a SSL capable one, for example, an instance of TIdSSLIOHandlerSocketOpenSSL, which does the encryption using the popular OpenSSL library.

In code it looks like:

```
var
  ftp: TIdFTP;
  ssl: TIdSSLIOHandlerSocketOpenSSL;
begin
  ftp := TIdFTP.Create();
  try
    ssl := TIdSSLIOHandlerSocketOpenSSL.Create(ftp);
    ftp.IOHandler := ssl;
    ftp.Host := 'ftp.myserver.com';
    ftp.Username := 'myuser';
    ftp.Password := 'mypass';
    ftp.Connect;
    DoWhateverYouWantToDoWithThe(ftp);
    AndUploadMoreFiles(ftp);
    ftp.Disconnect;
  finally
    ftp.Free;
  end;
end; 
```

# frama-c - 如何证明包含指针操作的断言

> ID：13942446
> 
> 赞同：4
> 
> 时间：2012-12-18T22:19:28.727
> 
> 标签：frama-c

我正在尝试使用 frama-c 的 WP 插件来证明一个简单的断言。C 代码是从 Targetlink 查找表生成的。我的目标是为函数提供足够的注释，以便我可以使用生成的合约来证明调用程序的属性。作为第一步，我在函数开头附近编写了一个断言，它将常量与从取消引用的指针获得的值进行比较，请参见以下示例。

```
typedef struct MAP_Tab1DS0I2T3_b_tag {
   int Nx;
   const int * x_table;
   const int * z_table;
} MAP_Tab1DS0I2T3_b;

int LARA_GearEnaCndn_X[9] =
{
   -1, 0, 1, 2, 3, 4, 5, 6, 8
};

int LARA_GearEnaCndn_Z[9] =
{
   1, 0, 1, 1, 0, 0, 0, 0, 0
};

MAP_Tab1DS0I2T3_b Sb218_LARA_GearEnaCndn_CUR_map = {
   9,
   (const int *) &(LARA_GearEnaCndn_X[0]),
   (const int *) &(LARA_GearEnaCndn_Z[0])
};

/*@ requires x == 2; */
int Tab1DS0I2T3_b(const MAP_Tab1DS0I2T3_b * map, int x)
{
   /* SLLocal: Default storage class for local variables | Width: 8 */
   int Aux_U8;
   int Aux_U8_a;
   int Aux_U8_b;
   int Aux_U8_c;

   /* SLLutLocalConst: Default storage class for local variables | Width: 32 */
   const int * x_table /* Scaling may differ through function reuse. */;
   const int * z_table /* Scaling may differ through function reuse. */;

   x_table = map->x_table;
   z_table = map->z_table;

   //@ assert (x < x_table[(int) (map->Nx - 1)]);

   if (x <= *(x_table)) {
      /* Saturation. */
      return z_table[0];
   }
   if (x >= x_table[(int) (map->Nx - 1)]) {
      return z_table[(int) (map->Nx - 1)];
   }

   /* Linear search, start low. */
   x_table++;
   while (x > *(x_table++))    {
      z_table++;
   }
   x_table -= 2 /* 2\. */;
   Aux_U8 = *(z_table++);
   Aux_U8_a = *(z_table);

   /* Interpolation. */
   Aux_U8_b = (int) (((int) x) - ((int) x_table[0]));
   Aux_U8_c = (int) (((int) x_table[1]) - ((int) x_table[0]));
   if (Aux_U8 <= Aux_U8_a) {
      /* Positive slope. */
      Aux_U8 += ((int) ((((int) (int) (Aux_U8_a - Aux_U8)) * ((int) Aux_U8_b)) /
       Aux_U8_c));
   }
   else {
      /* Negative slope. */
      Aux_U8 -= ((int) ((((int) (int) (Aux_U8 - Aux_U8_a)) * ((int) Aux_U8_b)) /
       Aux_U8_c));
   }
   return Aux_U8;
} 
```

有人可以提示我需要哪些注释才能成功证明吗？通过查看 Coq 证明义务，我发现没有用于重写条款所需的“addr_of_data”或“access”等操作的公理。断言中引用的全局变量的信息也丢失了。

```
1 subgoals
______________________________________(1/1)
forall x_0 map_0 : Z,
is_sint32 x_0 ->
forall m_0 : array data,
x_0 = 2 ->
forall x_table_0 : Z,
x_table_0 = addr_of_data (access m_0 (addr_shift map_0 1)) ->
2 <
sint32_of_data
  (access m_0
     (addr_shift x_table_0
    (as_sint32 (sint32_of_data (access m_0 (addr_shift map_0 0)) - 1)))) 
```

BR，哈拉尔

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T04:37:02.380

addr_of_data 、**addr_shift等****exioms**会自动在您的 coq-ide的**store_model.v选项卡中给出。**

您的示例无处说明**map****将 Sb218_LARA_GearEnaCndn_CUR_map**作为 实际参数。否则，断言可能是错误的。

现在，我不知道如何让**wp**利用全局初始化器的显式值作为证明的一部分。ACSL中有一些*全局不变量*，但**wp**似乎无论如何都没有处理它们。因此，我将对所需值使用显式的*require语句。*

给定函数头中的以下一组语句：

```
/*@ requires x == 2; 
    requires map->x_table == Sb218_LARA_GearEnaCndn_CUR_map.x_table;
    requires map->Nx == Sb218_LARA_GearEnaCndn_CUR_map.Nx;
    requires LARA_GearEnaCndn_X[8] == 8;
    requires Sb218_LARA_GearEnaCndn_CUR_map.Nx == 9;
    requires Sb218_LARA_GearEnaCndn_CUR_map.x_table == LARA_GearEnaCndn_X;
    requires Sb218_LARA_GearEnaCndn_CUR_map.z_table == LARA_GearEnaCndn_Z;
*/ 
```

我能够证明所需的断言。

第一个是你的。第二个和第三个是显式扩展，`*map=Sb218_LARA_GearEnaCndn_CUR_map` 以免弄乱地址范围。其余部分反映了初始值设定项值。

# java - Hadoop一次读取2个文件（一个头文件和一个数据文件）

> ID：13942450
> 
> 赞同：1
> 
> 时间：2012-12-18T22:19:38.660
> 
> 标签：java, hadoop, mapreduce, cloudera

我有这些文件的集合-

**objectA-record-data.log**文件 - 包含多行带有时间戳的数据。

**objectA-record-metadata.log**文件 - 仅包含一行。将其视为对象 A 的所有记录的元数据。

它们将一起形成一个记录以供处理。

我已经能够处理数据文件。映射器将 objectA 设置为数据文件中所有行的键，reducer 处理并打印文本文件。现在我想将元数据也添加到这些记录中。有什么想法我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:05:38.923

使用分布式缓存：

在驱动程序/配置类中：

```
DistributedCache.addCacheFile(new URI("/user/chris/theMetaDataFile.txt"), conf); 
```

在映射器中：

```
public void setup(Context context) {
    Configuration conf = context.getConfiguration();
    Path[] cachedFiles = DistributedCache.getLocalCacheFiles(conf);
    File metadataFile = new File(chachedFiles[0].toString());

    // metadataFile can now be read and the results stored locally for use in the map method
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T04:42:28.210

我想您的数据文件和元文件之间必须有一些映射您可以在 Mapper 的设置方法中获取元文件，如下所示

```
protected void setup(
        org.apache.hadoop.mapreduce.Mapper<Long, Text, Text, Text>.Context context)
        throws java.io.IOException, InterruptedException {
    FileSplit split=(FileSplit)context.getInputSplit();
    Path path=split.getPath();
    Path metaFile=getMetaFile(path);
}; 
```

# c - 是否可以仅按名称管理 JobObjects，而不保持打开的 HANDLE？

> ID：13942451
> 
> 赞同：1
> 
> 时间：2012-12-18T22:19:40.100
> 
> 标签：c, windows, process, handle, jobs

通过流程，我可以执行以下操作：

```
int pid;
::CreateProcess(NULL, cmd, ..., &pi);
pid = pi.dwProcessId;
::CloseHandle(pi.hProcess);
// then later...
HANDLE proc = ::OpenProcess(PROCESS_TERMINATE, FALSE, pid);
::TerminateProcess(proc, 1);
::CloseHandle(proc); 
```

以这种方式，我可以只通过 pid 来管理 windows 进程，这对于多平台代码来说很好。

我想将此模式扩展到工作对象：

```
HANDLE job = ::CreateJobObject(NULL, name);
::AssignProcessToJobObject(job, proc); // proc from above
::CloseHandle(job);
// then later...
job = ::OpenJobObject(JOB_OBJECT_TERMINATE, FALSE, name);
::TerminateJobObject(job, 1); 
```

需要明确的是，我不在工作中，但我的子进程在。[MSDN 说](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682409%28v=vs.85%29.aspx)“当它的最后一个句柄已关闭并且所有相关进程都已退出时，该作业将被销毁”。在这种情况下，我的主进程已经关闭了他的最后一个句柄，但是子进程仍在运行，并且仍然有一个句柄。`IsProcessInJob(proc, NULL, &isit)`确认工作仍然存在的电话。但是，我打开作业的调用返回 NULL，错误代码是 ERROR_FILE_NOT_FOUND。

所以问题是：我的主进程在关闭它后有什么办法来处理这个工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T10:25:57.870

这就是 NT 对象管理器的工作方式。几乎所有对象都是“临时的”，这意味着当不再存在对它们的引用（内核模式指针引用或句柄）时，它们将被删除。您应该能够通过调用`NtMakePermanentObject`您的作业对象来更改此行为。不过，我以前从未尝试过。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T22:43:03.730

是的，有可能。但是，请注意：

```
// This example will fail to reopen and terminate the job.
// Processes cmd and ping stay running
STARTUPINFO si;
memset(&si, 0, sizeof(STARTUPINFO));
si.cb = sizeof(STARTUPINFO);
PROCESS_INFORMATION pi;
memset(&pi, 0, sizeof(PROCESS_INFORMATION));

// BEGIN BLOCK A
::CreateProcess(NULL, "cmd /c ping 127.0.0.1 -n 10 > nul",
    NULL, NULL, TRUE, CREATE_SUSPENDED, NULL, ".", &si, &pi);
HANDLE job = ::CeateJobObject(NULL, "myjob");
::AssignProcessToJobObject(job, pi.hProcess);
// END BLOCK A

::ResumeThread(pi.hThread);
::CloseHandle(pi.hProcess);
::CloseHandle(pi.hThread);
::CloseHandle(job);
HANDLE reopenJob = ::OpenJobObject(JOB_OBJECT_TERMINATE, FALSE, "myjob");
if(reopenJob != NULL)
    ::TerminateJobObject(reopenJob, 1); 
```

本例中重新打开的作业为 NULL，错误代码为 ERROR_FILE_NOT_FOUND。

作业必须在进程之前创建并被继承，才能重新打开作业。

```
// NEW BLOCK A
HANDLE job = ::CreateJobObject(NULL, "myjob");
::SetHandleInformation(job, HANDLE_FLAG_INHERIT, HANDLE_FLAG_INHERIT);
::CreateProcess(NULL, "cmd /c ping 127.0.0.1 -n 10 > nul",
    NULL, NULL, TRUE, CREATE_SUSPENDED, NULL, ".", &si, &pi);
::AssignProcessToJobObject(job, pi.hProcess); 
```

如果您的目标是使用 PID 命名作业，请注意此创建顺序会阻止此类约定。这仍然意味着除了 PID 之外，还必须跟踪某些信息才能重新打开作业。

# vb.net - 将 InfoPath 代码 2003 升级到 2010（重复节更改事件）

> ID：13942455
> 
> 赞同：1
> 
> 时间：2012-12-18T22:20:10.193
> 
> 标签：vb.net, infopath

我能够阻止用户删除 InfoPath 2003 中的保存重复部分。我的代码在 InfoPath 2010 中不起作用。任何人都可以找到重写以下代码的新方法吗？

在重复部分的 OnBeforeChange 内的 InfoPath 2003 中，我能够检查 DataDOMEvent 属性 e.Site 和 e.Source 以查看谁引发了该事件。例如：

```
 <ParentElement>
  …
 <RepeatingSection IsSave=”false” …&gt;
<Field 1 />
     <Field 2  />
     <Field 3  />
     <Field 4  />
     <Field 5  />
     <Field 6  />
 </RepeatingSection>
 …
 </ParentElement>

 Dim isRowModification As Boolean
 Dim IsSave As Boolean 

 …

 isRowModification = (e.Source Is e.Site)

 If IsSave AndAlso isRowModification Then
     e.ReturnMessage = "You cannot modify or remove this Section."
     e.ReturnStatus = False
 End If 
```

在 InfoPath 2010 中，XmlChangingEventArgs 没有 e.Source 属性。当重复部分的更改事件由字段更改或重复部分本身引发时，e.Site 始终指向重复部分。我需要一种方法来知道字段 5 是否引发重复的部分更改事件。

# c# - 点击外部后隐藏按钮

> ID：13942458
> 
> 赞同：0
> 
> 时间：2012-12-18T22:20:19.857
> 
> 标签：c#, button, hide

感觉这个问题之前肯定被问过很多次了，但是找不到。对不起，如果我是对的。

问题是我的应用程序的角落有一个这样的 X 按钮：

![在此处输入图像描述](../Images/c37414ec299ec52a7c4ea1ad6f80198f.png)

我旁边还有其他确认按钮（可见= false 和启用= false）。当我单击 X 按钮时，我将这些属性设置为 true 并出现按钮。

![在此处输入图像描述](../Images/17d6c13d156ce4acc192f92d160666d6.png)

如果现在我点击它，表格就会关闭。但这是我的问题。如果我单击应用程序的任何其他部分，如何隐藏确认按钮并再次禁用它？

大概是微不足道的。对不起，我对这一切都很陌生。

非常感谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:29:24.750

我不知道，也许像这样的事件？

this.MouseClick += (sender, args) => { this.button1.Visible = false; };

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:30:01.643

最好的方法是向您的应用程序添加一个[MessageFilter](http://msdn.microsoft.com/en-us/library/system.windows.forms.imessagefilter.aspx)，它被动地侦听单击事件并隐藏“确认”按钮 - 只需在 IMessageFilter 上搜索即可找到许多有关如何使用它的文章。

请注意，您可以使用许多其他 Windows 消息来禁用“确认”按钮（例如，不仅是单击，还包括按键、移动窗口等），因此您可以使用它来实现全面的解决方案。

# php - 自动表单提交和计算

> ID：13942461
> 
> 赞同：0
> 
> 时间：2012-12-18T22:20:33.880
> 
> 标签：php, javascript, html

我是网页设计的新手，所以希望这是一个简单的问题。我有这样的东西...

```
<form action="process.php" method="POST">

Height: <input type="text" name="height" value=""><br>
Width: <input type="text" name="width" value=""><br>

</form>

<p>The area of the of the box is [output = height * width]</p> 
```

如果用户之前提交了数据，我希望使用数据库中的数据预先填充高度和宽度输入框。如果没有，我希望输入框包含“0.00”。此外，我希望输出框在输入框被填充时自动计算，并且我希望将高度和/或宽度的任何新输入提交到数据库以代替任何当前数据，而无需用户按下提交按钮。所以也许是在一个 tab out 事件上。

你能帮助我吗？我正在使用 php 和 mysql。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:28:31.460

要填充您的字段，请使用 value 属性。要在更改值时发送数据或仅计算输出，请使用 onblur 事件

```
<?php $width = your logic here (or 0.00)
$height =your logic here (or 0.00)
?>
<form action="process.php" method="POST" id="myform">

Height: <input type="text" name="height" onblur="document.getElementById('myform').submit();" value="<?php echo $height?>"><br>
Width: <input type="text" name="width" onblur="document.getElementById('myform').submit();"  value="<?php echo $width ?>"><br>

</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:38:14.060

我创建了一个适用于高度的 jFiddle。

[http://jsfiddle.net/R6NJ2/](http://jsfiddle.net/R6NJ2/)

您需要使用 javascript 库 jQuery 来实现这一点。

```
 jQuery('.height').change(updateHeight);
    jQuery('.height').keyup(updateHeight); 
```

当用户输入更改输入时触发更新事件。

```
function updateHeight() {

    var remaining = jQuery('.height').val()
    jQuery('.output').text(remaining );

    updateCountdown();
}; 
```

这首先读取值，然后将其写入目标元素。在此之后，您可以使用变量 'remaining' 和您要使用相同逻辑为宽度创建的变量进行计算

```
var result = remaining * yourWidthVariable
jQuery('.resultContainer).text(result); 
```

这应该是进一步完成任务的良好开端（发送到 php、提交值等）

`Number.toFixed`PS：您可以使用iE获得 Int to Double `(100).toFixed(2);`

# android - 使用 opencv 处理 Android 图像

> ID：13942462
> 
> 赞同：0
> 
> 时间：2012-12-18T22:20:46.317
> 
> 标签：android, opencv, android-image

我有这个代码：

```
protected Bitmap processFrame(byte[] data) {
    Mat mat = new Mat(mFrameHeight, mFrameWidth, CvType.CV_8UC3);
    mat.put(0, 0, data);

    //process mat with native code

    Utils.matToBitmap(mat, mBitmap);

    return mBitmap;
}

private Camera.PreviewCallback previewCallback = new Camera.PreviewCallback() {

    public void onPreviewFrame(byte[] data, Camera camera) {
        Bitmap bmp = processFrame(data);

        if (bmp != null) {
            //draw bmp
        }
    }
}; 
```

在某些时候，我将位图定义为：

```
mBitmap = Bitmap.createBitmap(mFrameWidth, mFrameHeight, Bitmap.Config.RGB_565); 
```

结果是捕获的相同相机帧但在灰度水平上重复了 3 次，我尝试了 CvType.CV_8UC4 并且它们被重复了 4 次。

我需要使用相同的步骤显示整个图像

有人发现错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T06:52:14.557

刚改了这个方法..解决了..

```
protected Bitmap processFrame(byte[] data) {

    Mat mYuv = new Mat( mFrameHeight + mFrameHeight/2, mFrameWidth, CvType.CV_8UC1);
    mYuv.put(0, 0, data);

    Mat mRGB = new Mat();

    Imgproc.cvtColor(mYuv, mRGB, Imgproc.COLOR_YUV2RGB_NV21, 3);

    ProcessFrame(mRGB.getNativeObjAddr(), mRGB.width(), mRGB.height());

    Utils.matToBitmap(mRGB, mBitmap);

    return mBitmap;
} 
```

# linux - 从静态库中删除不需要的符号

> ID：13942469
> 
> 赞同：8
> 
> 时间：2012-12-18T22:21:21.910
> 
> 标签：linux, static-libraries

我有一组来自第三方的绝对庞大的 .a 文件。我有自己的库，它只调用这组库中的 5 或 6 个函数。我想生成一个小得多的 .a 文件，其中包含我的代码及其在外部库中的（少量）依赖项。

具体来说：

## 我有的

1.  外部.h

    ```
    int foo();
    int bar(); 
    ```

2.  libexternal.a

    ```
    0000000000000000 T foo()
    0000000000000010 T bar() 
    ```

3.  图书馆.c

    ```
    #include "external.h"
    int foo_wrapper() { return foo(); } 
    ```

4.  图书馆.h

    ```
    int foo_wrapper(); 
    ```

## 我想要的是

我想创建一个文件`libmylibrary.a`，其中包含符号 for `foo_wrapper`、其依赖项`foo`以及内部调用的任何内容`foo`，但不是`bar`（实际上代表了数千个函数）。这样，人们可以包含我的库，而无需包含`external.h`或链接`libexternal.a`. 我不愿意手动列出`foo`，因为实际上有一大堆功能。

可以做到吗？

## 更多详情

我愿意列出我需要的符号。例如，我可以`foo_wrapper`在命令行上指定。但我也不能`foo`在命令行上指定，以及它调用的任何函数。我可以指定的原因`foo_wrapper`是它允许我编写一个名为`callEverything()`的函数，它只调用我想要提供的所有函数，然后将该符号放在命令行上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-06T21:09:42.553

就像 KevinDTimm 所说：您可以使用“ar”编辑您的 .a 文件，以提取其中的所有目标文件并将必要的目标文件添加回 .a 存档。

该库的作者可以将他的所有函数放入单个 .c 文件或多个文件中。每个 .c 文件产生一个目标文件。

我认为您没有机会只获取目标文件的一部分，您需要全部或什么都不需要。在链接时，将 .obj 文件再次分离到其函数中为时已晚：直接嵌入的地址和函数调用太多。

此外，您的最终程序将包含“归档”到链接的 .a 静态库中的 obj 文件的子集。但是每个单独的 obj 文件要么完全在你的最终可执行文件中，要么根本不存在！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:25:32.687

您需要的是`ar`*nix 的存档程序；

满足您的所有需求，请参见[此处](http://www.thegeekstuff.com/2010/08/ar-command-examples/)（或只需键入`man ar`）

不过，简短的回答是，您正在寻找“t”选项来查看，“x”选项用于从库中提取对象，“r”选项用于添加它们。

请注意，可能（将）存在大量相互依赖关系，需要相当长的时间才能确定。

# c++ - 指向引用参数的指针

> ID：13942472
> 
> 赞同：4
> 
> 时间：2012-12-18T22:21:26.567
> 
> 标签：c++

> **可能重复：**
> [函数参数类型后跟 *&](https://stackoverflow.com/questions/5054484/function-argument-type-followed-by)

我现在正在查看其他人的代码，并看到了一个不寻常的（至少对我而言）函数声明语法。以下是有效的 C++ 语法吗？

```
bool Foo::Bar(Frame *&ptoframe, int msToBlock)
{
    ....
} 
```

我认为开发人员正试图声明一个指向引用的指针。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T22:23:19.833

是的，它是有效的。从右到左阅读语法：它是*对指针的读取引用*。如果您希望更改传递给函数的指针，这一点很重要。指针通过引用有效地传递，就像任何其他参数一样。

这是一个漂亮的例子：

```
void no_change(int * ptr) {
    ptr = 0;
}

void change_ptr(int *& ptr) {
    ptr = 0;
}

int main() {

    int *x;

    change_ptr(x);

} 
```

传递给的任何指针的值`change_ptr`都会改变，因为我们是通过引用传递它的。

但是请注意，指针指向的对象的值仍然可以通过`no_change`函数（即`*ptr = new int`）更改。此语法仅适用于实际指针，而不适用于其指向的对象。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T22:22:48.810

不，第一个函数参数是*对指针的引用*。有时你想改变别人的指针......也就是说：

```
void change_my_char(char & c)    { c = 'x';     }

void pimp_my_pointer(void * & p) { p = nullptr; }

int main() {
  char x;
  void * y;
  change_my_char(x);
  pimp_my_pointer(y);
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-18T22:23:25.520

这是一个通过引用传递的指针。这允许被调用者更改调用者指针的值。

# ruby-on-rails - 如何查看我的任何嵌套模型在 `where` 语句中是否具有特定属性？

> ID：13942474
> 
> 赞同：0
> 
> 时间：2012-12-18T22:21:40.393
> 
> 标签：ruby-on-rails, activerecord, where

我的声明..

```
Object.joins(:child_objects).where("child_objects.type != 'Magical!'").group(:id) 
```

这仍然会返回`Object`类型`child_object`等于`Magical!`..

我怎样才能只返回*不*具有魔法的 child_object 类型的对象！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:05:58.830

您可以使用子选择（我使用“经典”`Product <= LineItem => Order`模型集）和`NOT IN`：

```
jdoe_products = Product.joins(:orders).where(orders: {name: 'jdoe'})
Product.where('id NOT IN (%s)' % jdoe_products.select(:id).to_sql) 
```

产生：

```
 Product Load (0.0ms)  SELECT "products".* FROM "products" WHERE (id NOT IN (SE
LECT "products"."id" FROM "products" INNER JOIN "line_items" ON "line_items"."pr
oduct_id" = "products"."id" INNER JOIN "orders" ON "orders"."id" = "line_items".
"order_id" WHERE "orders"."name" = 'jdoe')) 
```

# ruby-on-rails-3 - activerecord 循环引用错误实际上是什么意思？你如何解决它？

> ID：13942476
> 
> 赞同：0
> 
> 时间：2012-12-18T22:21:43.913
> 
> 标签：ruby-on-rails-3, activerecord

我从 rails "ActiveSupport::JSON::Encoding::CircularReferenceError" 得到一个错误，

当它说我有一个引用自身的对象时，我不确定该错误是什么意思。有人可以解释一下，并帮助我了解如何解决吗？

错误来自以下代码。在我的模型中，调用

```
范围 :search_wineries, lambda{|wineries|{:joins => :winery, :conditions =>["wineries.id IN (?)", wineries]}}
    范围 :search_varietals, lambda{|varietals|{:joins => :varietals, :conditions => ["varietals.id IN (?)",varietals] }}
    范围 :search_wines, lambda{|wines|{:conditions=>["wines.id IN (?)",wines]}}

    def self.search_wines（参数）
        范围=自我
        [:wineries,:varietals,:wines].each do |s|

            scope = scope.send("search_#{s}", params[s]) if !params[s].empty?
        结尾
        范围
    结尾

```

这是从我的控制器调用的

```
return_wines = Wine.search_wines（{葡萄酒：葡萄酒，品种：品种，葡萄酒：葡萄酒}）
        渲染 :json => return_wines.to_json(:include=>[:winery,:varietals])

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-12-13T05:15:01.837

这通常意味着您正在打印一个其 json 模型包含自身的模型，通常是通过另一个模型。

例如考虑这两个类

```
class Pet
  belongs_to :owner

  def as_json
    super(only: :name, include: :owner)
  end
end

class Owner
  has_many :pets
  def as_json
    super(only: :name, include: :pets)
  end
end 
```

我们可以将它们中的每一个打印为 json

```
o = Owner.new(name: "Steve")
o.as_json 
#=> { name: "Steve", pets: [] }

p = Pets.new(name: "Fido", owner: nil)
p.as_json 
#=> { name: "Fido", owner: nil } 

p.owner = o
o.as_json 
#=> FAILS with CircularReference error. Why? 
```

想想它*应该*产生什么。

```
o.as_json 
#=>
{ 
  name: "Steve",
  pets: [
    {
      name: "Fido",
      owner: {
        name: "Steve", # Uh oh! We've started to repeat ourselves.
        pets: [
          {
             name: "Fido",
             owner: ...and so on, and so on, forever recursing, because the models json representation *includes* itself.
           }
         ]
       }
     }
   ]
]} 
```

# ios - 如何在另一个不是 AppDelegate 的类中获取 devicetoken？

> ID：13942482
> 
> 赞同：2
> 
> 时间：2012-12-18T22:21:59.447
> 
> 标签：ios, xcode, ios6, appdelegate, devicetoken

下午好。我是巴西人，所以请原谅我的任何英语错误！

我正在向我自己的设备发送推送通知。我可以在我的设备令牌中获取`AppDelegate.m`：

```
- (void)application:(UIApplication*)application didRegisterForRemoteNotificationsWithDeviceToken:(NSData*)deviceToken {  
    NSLog(@"Device Token Global : %@", deviceToken);   
} 
```

但是我有一个名为的类`LoginViewController.m`，我在其中执行登录并将其`deviceToken`发布到 web 服务（将其插入到 mySQL 表中）。如何`deviceToken`在我的 LoginViewController.m 类中将其作为字符串获取？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T03:59:54.630

将令牌转换为字符串：

```
NSString *tokenString = [deviceToken description];
tokenString = [tokenString stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"<>"]]; 
tokenString = [tokenString stringByReplacingOccurrencesOfString:@" " withString:@""]; 
```

`NSUserDefaults`使用您选择的特定于应用程序的密钥存储令牌：

```
[[NSUserDefaults standardUserDefaults] setObject:tokenString forKey:@"MyAppSpecificGloballyUniqueString"]; 
```

然后，在您的应用程序的其他地方检索它：

```
NSString *tokenString = [[NSUserDefaults standardUserDefaults] objectForKey:@"MyAppSpecificGloballyUniqueString"]; 
```

您不必**使用**`NSUserDefaults`. 您可以使用任何类型的全局状态、单例对象、注册表或依赖注入来传递值。你如何做到这一点取决于你；这只是一个例子。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T11:06:06.770

使用单例类并创建一个设备字符串（deviceString）。

```
singletonObject.deviceString = [deviceToken description];
singletonObject.deviceString = [tokenString stringByTrimmingCharactersInSet:[NSCharacterSet characterSetWithCharactersInString:@"<>"]]; 
singletonObject.deviceString = [tokenString stringByReplacingOccurrencesOfString:@" " withString:@""]; 
```

现在您可以在任何其他类中使用 singletonObject.deviceString

# elasticsearch - ES: histogram facet with histogram facet with all_terms=true

> ID：13942484
> 
> 赞同：3
> 
> 时间：2012-12-18T22:22:16.373
> 
> 标签：elasticsearch

[Elasticsearch](http://www.elasticsearch.org) [Histogramfacet](http://www.elasticsearch.org/guide/reference/api/search/facets/histogram-facet.html)似乎不支持 all_terms = true （即：即使 count=0 也返回 facetvalue / bucket）

它是否正确？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T05:28:41.080

是的，这是正确的。但是，如果您不使用相关性对结果进行排序，则可以将查询移动到顶级`filter`元素中并放入`match_all`顶级`query`元素中。例如，对于以下请求，将返回两个直方图 - 一个仅包含与查询对应的元素，另一个用于整个索引：

```
{
    "query": {
        "match_all": {}
    },
    "filter": {
        // filter goes here
    },
    "facets": {
        "histo_all": {
            "histogram": {
                "field": "my_field"
            }
        },
        "histo": {
            "histogram": {
                "field": "my_field"
            },
            "facet_filter": {
                // same filter from top-level filter goes here
            }
        }
    }
} 
```

# image - Phonegap 图片库和大图片

> ID：13942493
> 
> 赞同：0
> 
> 时间：2012-12-18T22:22:59.613
> 
> 标签：image, html, cordova, mobile

我正在开发一个 phonegap HTML5 移动应用程序来显示我手机上的所有照片。我需要将图片显示为缩略图，让用户选择其中的许多，然后上传到云服务器。

我发现了许多关于如何将照片显示为缩略图的好例子，并得到了一个简单的版本。但是，由于照片都是 3mb，我只能在我的应用程序使用大量内存（和崩溃）之前显示一些。有没有人推荐创建缩略图的正确方法？

现在我只是在（文件的）循环中创建一个 img 标签并使用 CSS 将宽度/高度设置为 60 像素。这是片段：

```
$('#gallery').append('<div class="' + uiBlockClass +'"><div class="thumbnail"><img src="'+ entry.fullPath+'" title="'+ entry.name+ '" /></div></div>'); 
```

和 CSS： .thumbnail{ padding:5px; 高度：60px；宽度：60px；}

我确实看到了一些关于使用画布的东西并尝试了一个简单的例子，但这似乎也耗尽了内存。我的移动应用程序是 HTML5 并使用 phonegap。该条目是来自 HTML5/phonegap 代码的文件条目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T16:34:16.667

您需要一次将图像加载到 phonegap 中，以免内存不足，将它们复制到画布，然后卸载它们，如下所示：

```
var thumbnailWidth = 100; // Thumbnail width in pixels
var gap=10; // gap between thumbnails
var sourceImagePaths = ["1.jpg","2.jpg","3.jpg","4.jpg","5.jpg"]; // paths to source images   
var y=0; // vertical offset on canvas
var i=0; // image index
var image = new Image();
var context = $('#canvas')[0].getContext("2d");

function loadImage(){
  image.onload = onImageLoad;
  image.src = sourceImagePaths[i];
}

function onImageLoad(){
  var height = Math.round((thumbnailWidth/image.width)*image.height);           
  context.drawImage(image, 0, 0, image.width, image.height, 0, y, thumbnailWidth, height);      
  y+= height + gap;
  image.src = null;
  i++;
  if(i<sourceImagePaths.length){
    loadImage();
  }
}     
loadImage(); // load images 
```

这是小提琴：http: [//jsfiddle.net/dpa99c/M2yYp/](http://jsfiddle.net/dpa99c/M2yYp/)

# php - Kohana 3.2 - ORM 的 pk() 方法在 save() (create()) 之后返回 false - 为什么？

> ID：13942495
> 
> 赞同：0
> 
> 时间：2012-12-18T22:23:13.663
> 
> 标签：php, postgresql, orm, kohana

我正在使用 Postgre 9，并通过 PDO 连接到它。我使用了来自 auth-schema-postgresql.sql 的模式，所以表应该没问题。

我正在做这样的事情：

```
$post = $this->request->post();
$member = new Model_User(); // ORM::factory('user');s
$member->create_user($post, array('email', 'username', 'password')); 
```

模型用户没什么花哨的

```
<?php defined('SYSPATH') or die('No direct access allowed.');

class Model_User extends Model_Auth_User {

    protected $_table_columns = array(
        'id'    => NULL,
        'email'  => NULL,
        'username'  => NULL,
        'password'  => NULL,
        'logins'  => NULL,
        'last_login'  => NULL
    );

} // End User Model 
```

问题是 $member->object() 中的 id 值在保存后等于 false（pk() 和 $member->id 相同）。行创建得很好，它有它的 id，但我非常希望 pk() 方法给出这个数字。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T20:47:16.610

在 PDO 中，您必须提供与表 User 的主键关联的 Sequence 对象的名称。它可能是 user_id_sequence。导航到文件“modules/database/classes/Kohana/Database/PDO.php”。在以下代码行 (188-196) 中：

```
elseif ($type === Database::INSERT)
    {
        // Return a list of insert id and rows created
        return array(
            $this->_connection->lastInsertId(),
            $result->rowCount(),
        );
    } 
```

序列对象的名称必须作为 $this->_connection->lastInsertId() 方法的参数传递，如下所示：

```
elseif ($type === Database::INSERT)
    {
        // Return a list of insert id and rows created
        return array(
            $this->_connection->lastInsertId($sequence_name),
            $result->rowCount(),
        );
    } 
```

这样，ORM 模型可以“知道”新记录的 id 由序列自动递增，因此 pk() 方法可以正常工作。

# php - 如果您正在验证客户端，您应该验证服务器端吗？

> ID：13942498
> 
> 赞同：1
> 
> 时间：2012-12-18T22:23:29.590
> 
> 标签：php, forms, security

我还应该补充一点，我正在`mysql`考虑扩展名。我知道`mysqli`或`PDO`应该使用。如果我使用[jQuery Validation](http://docs.jquery.com/Plugins/Validation)来验证客户端（例如电子邮件），我是否也应该在服务器端进行验证（确保它不是空白并且是有效的电子邮件）？

我只是想知道我是否通过简单地不验证服务器端来向跨站点脚本漏洞或 SQL 注入或其他任何事情敞开大门，或者只要我在表单数据时采取安全措施就可以了正在提交。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-18T22:24:28.260

是的 是的 总是是的。永远不要相信来自浏览器的任何东西。

在最良性的情况下，如果他们禁用了 Javascript 怎么办？

对于更狡猾的情况，如果他们手动发布类似的数据`curl`怎么办？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:11:55.197

正如其他人已经说过的那样：服务器端验证是必须的，并且在任何情况下都不能被忽略，客户端验证除了防止用户输入错误的数据外，并没有做更多的事情。关于安全性，客户端验证绝对没有任何作用，因为它总是可以被攻击者关闭或以其他方式规避。

如果您想通过验证来保护自己免受 SQL 注入和 XSS 等攻击，我建议您阅读以下网站：

*   [XSS 预防备忘单 (OWASP)](https://www.owasp.org/index.php/XSS_%28Cross_Site_Scripting%29_Prevention_Cheat_Sheet)
*   [SQL 注入预防备忘单 (OWASP)](https://www.owasp.org/index.php/SQL_Injection_Prevention_Cheat_Sheet)

更一般的 PHP 安全问题：

*   [PHP 安全备忘单 (OWASP)](https://www.owasp.org/index.php/PHP_Security_Cheat_Sheet)

# c# - 将 Strobe Media Playback 嵌入到 .NET C# 应用程序中

> ID：13942502
> 
> 赞同：0
> 
> 时间：2012-12-18T22:24:12.167
> 
> 标签：c#, .net, flash, rtmp

我试图在 C# 应用程序中捕获 RTMP 流并播放它。

我选择了以下架构：

1.  将 Flash Player 嵌入到 C# 应用程序中。（完毕）
2.  在嵌入式 Flash Player 中运行 Strobe Media Playback。（完毕）
3.  在嵌入式 Strobe Media Playback 播放器中捕获 RTMP 流。（失败的）

问题是我无法设置视频源位置。RTMP 和 HTTP 源都不起作用。
Strobe Media Playback 显示唯一的文本字符串：“我们无法连接到您请求的内容。对于给您带来的不便，我们深表歉意。”

我尝试了几种设置源的方法：

1.  通过设置 FlashVars: `flash.FlashVars = @"src=http://players.edgesuite.net/videos/big_buck_bunny/bbb_448x252.mp4";`
    或
    `flash.FlashVars = @"FlashVars=""src=http://players.edgesuite.net/videos/big_buck_bunny/bbb_448x252.mp4""";`
2.  通过创建 XML-config 并通过 FlashVars 将有关它的信息传递给 Strobe： `flash.FlashVars = @"configuration=D:\configuration.xml";`

此外，我无法以任何这种方式播放本地托管的 .flv 文件。

从理论上讲，我正在尝试做什么？

如果是，如何从 C# 代码设置 Strobe Playback 的视频源？

*附加技术信息：*

*为了将 Flash Player 嵌入 C# 应用程序，我使用了两个库：*
*AxInterop.ShockwaveFlashObjects.dll 和 Interop.ShockwaveFlashObjects.dll*

*Flash 版本：11.5.502.135*
*频闪媒体播放版本：1.6.328*

*示例 C# 项目可以在这里找到：http:* [//narod.ru/disk/64598707001.c8d1ae94c60a63a021bfdffc82864bb2/WPF_Flash.7z.html](http://narod.ru/disk/64598707001.c8d1ae94c60a63a021bfdffc82864bb2/WPF_Flash.7z.html)

PS 如果您知道在 .NET 应用程序中捕获和播放 RTMP 流的更好方法，请分享您的知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T22:54:12.537

尝试 `parameters.flashvars="src=rtmp:[url here]`

# assembly - “Loader.o：文件无法识别：文件格式无法识别”错误

> ID：13942503
> 
> 赞同：0
> 
> 时间：2012-12-18T22:24:16.247
> 
> 标签：assembly, linker, g++, cygwin, kernel

我对 G++`ld`命令有疑问。

我正在尝试使用这个：`ld -T linker.ld -o Kernel.bin Loader.o Video.o Kernel.o`，但它给了我错误：`Loader.o: File not recognized: File format not recognized`。

是什么导致了这个错误，我该如何解决它。

# mysql - Google Apps 脚本/JDBC/MySQL

> ID：13942508
> 
> 赞同：1
> 
> 时间：2012-12-18T22:24:30.823
> 
> 标签：mysql, jdbc, google-apps-script

我正在尝试将 Google Apps 脚本连接到 Rackspace 上托管的 MySQL 服务器。我正在使用此处提供的文档。

[https://developers.google.com/apps-script/jdbc](https://developers.google.com/apps-script/jdbc)

我在这行代码中正确设置了参数：

```
var conn = Jdbc.getConnection("jdbc:mysql://127.0.0.1:3306/dbname","user","pw"); 
```

我收到此错误。

```
Failed to establish a database connection. Check connection string, username and password. (line 2) 
```

我在本地计算机上使用 Putty 隧道连接到数据库和端口转发，连接到使用数据库的其他程序（Tableau、MySQL 等）没有问题。

我难住了。尝试了多个用户/密码迭代，允许谷歌的端口访问数据库等。

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T21:22:57.103

起初我在连接方面遇到了很多问题，我们花了 3 个人才完全正确。最后我找到了一个网页，抱歉我不记得是哪一个，它为我提供了这个：

```
var conn = Jdbc.getConnection("jdbc:sqlserver://localhost:1433;" +
   "databaseName=AdventureWorks;user=MyUserName;password=*****;"); 
```

我输入了我的信息，确保我使用的是 1433 端口并建立了连接。希望这可以帮助！

# jquery - jQgrid双击项目不起作用

> ID：13942511
> 
> 赞同：1
> 
> 时间：2012-12-18T22:24:39.867
> 
> 标签：jquery, asp.net-mvc, jqgrid

我收到错误消息：

**Microsoft JScript 运行时错误：“prmGridDialog”未定义**

双击 jQgrid 中的一行时。当我使用工具栏按钮时，对话框打开。其他一切工作正常。这是jQuery：

```
<script src="~/Scripts/jquery.jqGrid.min.js"></script>
<script src="~/Scripts/i18n/grid.locale-en.js"></script>
<script src="~/Scripts/json2.min.js"></script>
<script src="~/Scripts/jquery.jqGrid.src.js"></script>
<link href="~/Content/jquery.jqGrid/ui.jqgrid.css" rel="stylesheet" />

$(document).ready(function() {
    $.jgrid.nav.addtext = "Add";
    $.jgrid.nav.edittext = "Edit";
    $.jgrid.nav.deltext = "Delete";
    $.jgrid.edit.addCaption = "Add Item";
    $.jgrid.edit.editCaption = "Edit Item";
    $.jgrid.del.caption = "Delete Contact";
    $.jgrid.del.msg = "Delete selected item?";

    var updateDialog = {
        url: '/VisitorProducts/EditjQGridData'
        , closeAfterEdit: true
        , closeOnEscape: true
        , modal: true
        , width: "400"
    };

    var addDialog = {
        url: '/VisitorProducts/AddjQGridData'
        , closeAfterAdd: true
        , closeOnEscape: true
        , modal: true
        , width: "400"
    };

    var deleteDialog = {
        url: '/VisitorProducts/DeletejQGridData'
        , closeAfterEdit: true
        , closeOnEscape: true
        , modal: true
        , width: "400"
    };

    jQuery("#list2").jqGrid({
        url: '/VisitorProducts/jQgridData?visitorId=32'
        , datatype: "json"
        , colNames: ['RowId', 'VisitorId', 'Product Name']
        , colModel: [
            { name: 'RowId', index: 'RowId', width: 150, editable: false, edittype: 'text', key: true },
            { name: 'VisitorId', index: 'VisitorId', width: 150, editable: true, edittype: 'text' },
            { name: 'ProductName', index: 'ProductName', sortable: true, align: 'left', width: 250, editable: true, edittype: 'text', editoptions: { size: 50 } }
        ]
        , rowNum: 10
        , rowList: [10, 20, 30, 50]
        , pager: '#pager2'
        , sortname: 'RowId'
        , viewrecords: true
        , sortorder: "desc"
        , caption: "Visitor Products"
        , rownumbers: false
        , autowidth: true
        , recreateForm: true
        , ondblClickRow: function (rowid, iRow, iCol, e) {
            $("#list2").editGridRow(rowid, prmGridDialog);
        }
    }).navGrid('#pager2',
        { edit: true, add: true, del: true, search: true, refresh: true }
        , updateDialog
        , addDialog
        , deleteDialog
    );
}); 
```

不确定我是否遗漏了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:32:40.333

我的错。prmGridDialog 是一个不存在的变量。该示例是从网站复制的，我一定没有复制变量初始化代码。一旦我指定了一个现有的对话框（在这种情况下是更新），它就起作用了：

```
var updateDialog = {
    url: '@Url.Action("EditStudentClass", "StudentClasses")'
    , closeAfterEdit: true
    , closeOnEscape: true
    , modal: true
    , width: "400"
};

$("#list2").editGridRow(rowid, updateDialog); 
```

代替

```
$("#list2").editGridRow(rowid, prmGridDialog); 
```

# windows - 我们使用批处理脚本连接到 FTPS 服务器的方式有很大不同吗？

> ID：13942512
> 
> 赞同：0
> 
> 时间：2012-12-18T22:24:41.683
> 
> 标签：windows, batch-file, ftp

我正在编写我的第一个批处理脚本来将文件上传到 FTPS 服务器。我在网上看到很多例子，使用 FTP。我们连接到 FTPS 服务器的方式会有很大的不同吗？

谢谢，dgk

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T16:36:42.473

FTP 和 FTPSecure 都使用相同的协议，但是，FTPS 使用带有 TLS 或 SSL 的 FTP。除非客户端软件用于处理 TLS 或 SSL，否则它将无法工作。据我所知，内置的 windows`ftp`命令不支持 FTPS。您将不得不使用第三方 ftps 客户端解决方案。

# .net - 指向图片框的指针

> ID：13942520
> 
> 赞同：0
> 
> 时间：2012-12-18T22:25:39.557
> 
> 标签：.net, winforms, visual-c++, visual-studio-2005, c++-cli

我正在尝试使用 Visual Studio 2005 学习 C++。我创建了一个包含许多 PictureBoxes 的表单，我希望能够通过数组引用它们。在创建数组之前，我试图创建一个单指针变量来看看它是如何工作的。

这是我尝试过的：

```
System::Windows::Forms::PictureBox *p = &animation::Form1::Boule1; 
```

但它给了我错误 2440 说它无法转换。我也尝试过 ^ 而不是 * 但它不起作用。

我该怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:31:56.920

animation::Form1::Boule1 可能已经是一个指针。在这种情况下，请尝试这样做：

```
System::Windows::Forms::PictureBox *p = animation::Form1::Boule1 
```

否则，我们能否看到整个错误消息，以便我们知道它试图转换什么？

# mysql - 如何获得 MySQL 行的最大大小？

> ID：13942525
> 
> 赞同：2
> 
> 时间：2012-12-18T22:25:56.440
> 
> 标签：mysql

我尝试创建一个表，并得到“行大小太大”错误。没问题，我只是将一些大型 VARCHAR 字段更改为 TEXT，并且它起作用了。但现在我不知道我离行大小限制有多近。如何确定表的最大行大小？

MySQL 版本：5.5。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:36:27.250

这取决于您使用的**存储引擎和为该表选择的****行格式**，以及您的**索引**。很难计算，因为数据库能够不断改变其结构。

但是VARCHAR、TEXT和BLOB都是变长数据类型，它有一个length属性，但是值可以为空；计算可能不准确。看看中的`Avg_row_length`字段`information_schema.tables`。

编辑：看看：[数据类型存储要求](http://dev.mysql.com/doc/refman/5.0/en/storage-requirements.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:29:41.040

[MySQL 文档中有一些关于行大小限制](http://dev.mysql.com/doc/refman/5.5/en/column-count-limit.html)的粗略指南可能会有所帮助。

请记住，*字节*和*字符*是不等价的。UTF-8 类型表中的A`VARCHAR(255)`将被视为每个字符超过一个字节。默认情况下保留三个字节。

# javascript - 我可以修改这个 javascript 以不重新加载当前窗口吗？

> ID：13942530
> 
> 赞同：0
> 
> 时间：2012-12-18T22:26:20.703
> 
> 标签：javascript, smf

我继承了一个论坛，它有一个不受支持和废弃的 mod，它使包含任何指向子论坛或线程的链接的整个 td 元素都可点击。这意味着作为一种可用性度量，只需单击包含您要查看的子论坛或线程的大表格单元格就很容易。

问题是 javascript 对“中键单击”不友好：使用任何普通键盘或鼠标方法在新窗口或选项卡中打开链接会在新选项卡中打开链接并通过单击重新加载当前窗口-在链接上。

这与预期的行为背道而驰，我想找到一个解决方案，它既允许它引入的可用性功能又允许标准的链接点击行为。

这是附加到包含元素的代码：

```
<td class="info" onclick="window.location.href='http://www.bestcafes.com.au/forum/index.php?board=13.0'" name="b13"> 
```

任何建议都将受到欢迎！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:30:31.027

将链接移动到标准锚元素应该可以完成这项工作：

```
<td class="info">
    <a href="http://www.bestcafes.com.au/forum/index.php?board=13.0" name="b13">
        …
    </a>
</td> 
```

正如评论中所建议的，您也可以适当地设置它们的样式：

```
td.info > a { /* only table-cell-links, might need a better selector */
    display: block;
    width:100%; height:100%; /* as long as this doesn't collide with any padding */
    color: inherit; text-decoration: inherit; /* depending on your link style */
} 
```

# php - 使用 jQuery .ajax() 时 PHP 邮件脚本不发送电子邮件

> ID：13942534
> 
> 赞同：1
> 
> 时间：2012-12-18T22:27:24.253
> 
> 标签：php, jquery, ajax, email

我完全被这件事难住了。我正在尝试使用 jQuery ajax 函数将 POST 数据发送到电子邮件脚本。

这是jQuery代码。

```
$('#bas-submit-button').click(function () {
    var baslogo = $('input#bas-uploaded-logo').val();
    var basscent = $('input[name="scent"]:checked').val();
    var bascolor = $('input[name="color"]:checked').val();
    var basdistributor = $('select#bas-distributor-name').val();
    var basname = $('input#bas-contact-name').val();
    var basemail = $('input#bas-contact-email').val();
    var bascontactphone = $('input#bas-contact-phone').val();
    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;
    var baspantone = $('input#pantone').val();
    var basclip = $('input[name="clip-name"]:checked').val();
    var dataString = 'bas-contact-name=' + basname + '&bas-contact-email=' + basemail + '&bas-contact-phone=' + bascontactphone + '&bas-uploaded-logo=' + baslogo + '&scent=' + basscent + '$color=' + bascolor + '&clip-name=' + basclip + '&pantone=' + baspantone + '&bas-distributor-name=' + basdistributor;
    $.ajax({
        type: "POST",
        url: "build-a-smen-submit.php",
        data: dataString,
        success: function () {
            $("#bas-submit-message").removeClass("error").addClass("success").html("Virtual Sample Submitted!").fadeIn(200).delay(5000).fadeOut(200);
        }
    });
    return false;
}); 
```

还有我的 PHP 脚本。

```
<?

/* config start */
$emailAddress = '*****';
$ccAddress = '*****';
/* config end */

require "class.phpmailer.php";

session_start();

if($_POST['bas-submit-button']=='Submit'){

$msg='Name: '.$_POST['bas-contact-name'].'<br />
Email: '.$_POST['bas-contact-email'].'<br />
Phone: '.$_POST['bas-contact-phone'].'<br /><br />
Options<br /><br />
Logo File: '.$_POST['bas-uploaded-logo'].'<br />
Scent Selection: '.$_POST['scent'].'<br />
Accent Color: '.$_POST['color'].'<br />
Name on clip: '.$_POST['clip-name'].'<br />
Pantone Colors: '.$_POST['pantone'].'<br />
Distributor: '.$_POST['bas-distributor-name'].'<br /><br />
Submitting IP:  '.$_SERVER['REMOTE_ADDR'];

$mail = new PHPMailer();
$mail->IsMail();
$mail->AddReplyTo($_POST['bas-contact-email'], $_POST['bas-contact-name']);
$mail->AddAddress($emailAddress);
$mail->AddCC($ccAddress);
$mail->SetFrom($_POST['bas-contact-email'], $_POST['bas-contact-name']);
$mail->Subject = 'Build-A-Smen Promotional Product Interest';
$mail->MsgHTML($msg);
$mail->Send();

if($_POST['ajax']){
    echo '1';
}
else{
    if($_SERVER['HTTP_REFERER'])
        header('Location: '.$_SERVER['HTTP_REFERER']);
    exit;
}

};

?> 
```

我相信问题出在从 jQuery 发送 POST 数据的某个地方。如果我注释掉我的 jQuery 代码，则 php 脚本可以正常工作，但是当我使用 jQuery ajax 函数运行它时，我会触发 ajax 成功函数但没有电子邮件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:39:13.913

你的问题是数据：dataString。

要么像前面所说的那样序列化，要么尝试与此类似的东西：

数据：{ basscent：basscent，bascolor：bascolor，}等。

# c3p0 - c3p0 连接池查询

> ID：13942540
> 
> 赞同：0
> 
> 时间：2012-12-18T22:28:03.537
> 
> 标签：c3p0

我正在使用 c3p0 连接池，我有 minPoolSize=1 maxPoolSize=5 和 InitialPoolSize=5。

当服务器启动时，我可以看到它有 5 个连接。但随着第一个请求的到来，没有。增加到 10。从那时起，它保持 10，因为这 10 个连接正在处理该负载。现在我的问题是，即使 maxPoolSize 是 5 ，为什么还要创建另一个 5 conn。在游泳池。是因为 initialPoolSize 吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T23:52:22.463

听起来您有两个活动池。您是在调用 getConnection(user, password) 而不是默认的 getConnection()？c3p0 为每个身份验证创建一个不同的池。此外，您可以通过 JMX 跟踪活动身份验证的数量。

initialPoolSize 应该与它没有太大关系。此外，在尝试了解 c3p0 问题时，确保活动配置符合您的预期总是一个好主意。同样，您可以通过 JMX 查看大多数配置参数，或者更简单地说，检查您的日志文件。c3p0 数据源在初始化时将其配置转储到 INFO。

# vb.net - VB.NET - 共享变量

> ID：13942544
> 
> 赞同：2
> 
> 时间：2012-12-18T22:28:34.813
> 
> 标签：vb.net, visual-studio-2010, variables

我正在尝试为孩子们编写一个程序来给圣诞老人写信，但我遇到了一个问题。如果我在按钮中使用 ByVal，我将返回错误 [方法无法处理事件，因为它们没有兼容的签名。]

这是代码...

```
 Dim formChecked As Boolean
    ' Load complete
    LabelMain.Text = "Write a Letter to Santa!"
    ' Start program
End Sub

Private Sub ButtonCheck_Click(ByVal formchecked As Boolean, ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ButtonCheck.Click
    If formChecked = True Then
        ButtonSign.Enabled = False
        ButtonCheck.Text = "Check Letter"
        TextBoxName.Enabled = True
        TextBoxAge.Enabled = True 
```

顶部子在程序开始时声明变量，但我希望能够在子之间共享变量。正如您在 ButtonCheck_Click 子中看到的那样，我已经输入了`ByVal formchecked as Boolean`，但它返回错误 Method cannot handle event 因为它们没有兼容的签名。

我是vb.net的新手，如果有人可以帮助我，我正在徘徊。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:33:49.890

要在方法之间“共享”变量，请将其设为实例变量，即在任何方法之外但在 Form 内部声明它。

```
Private formChecked As Boolean

Private Sub ButtonCheck_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ButtonCheck.Click

    If formChecked = True Then
        ...
    End If

End Sub 
```

# dart - 来自 pub 的软件包未正确安装

> ID：13942545
> 
> 赞同：0
> 
> 时间：2012-12-18T22:28:35.277
> 
> 标签：dart, dart-pub, dart-webui

我有以下项目：

![项目结构](../Images/0c94f7f4f2e807ce0bd6363b86e861a5.png)

我通过以下方式配置了软件包`pubspec.yaml`：

```
dependencies:
  web_ui: any 
```

从 pub 安装后，控制台输出写道一切正常：

```
Running pub install ...
Resolving dependencies...
Dependencies installed! 
```

但是当我尝试从我的 dart.file 中的这个包中导入类时，我得到了编译错误：

![编译错误](../Images/a522b39f8db13b1803aa3164bf933f71.png)

看起来它在正在安装的软件包中找不到任何东西。我检查了文件系统，发现包内只有链接而不是带有 .dart 文件的目录。此链接指向真实目录，但看起来 IDE 看不到此目录。

我正在使用 SpringToolSuite 版本：3.1.0.RELEASE 和 Dart 插件 v 0.2.9 build 16251。操作系统：Windows 8

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:37:55.413

删除包中的“s”并尝试：

```
import 'package:web_ui/component_build.dart'; 
```

# php - 在PHP中按字母顺序对json数组进行排序

> ID：13942547
> 
> 赞同：0
> 
> 时间：2012-12-18T22:28:37.740
> 
> 标签：php, json, sorting

> **可能重复：**
> [在 PHP 中对关联数组进行排序](https://stackoverflow.com/questions/777597/sorting-an-associative-array-in-php)

我有一个看起来像这样的 Jsion 数组：

```
{
    devices: [
        {
            name: " Server 00 ",
            ip: " 172.20.10.10 ",
            status: 0
        },
        {
            name: " Server  10 ",
            ip: " 172.20.10.12 ",
            status: 0
        },
        {
            name: " Server  01 ",
            ip: " 172.20.10.13 ",
            status: 1
        },
        {
            name: " Server 11 ",
            ip: " 172.20.10.15 ",
            status: 0
        }
    ]
} 
```

我正在使用 PHP 将其转换为 html 表，但我希望它们按字母顺序排列。这是我的 PHP 代码：

```
 private static function toHtml($output, $rmkeyworkxen = false) {
    $return = '';

    $devices = json_decode($output, true)['devices'];

    foreach($devices as $device) {
        if(startsWith(trim($device['name']), "Xen")&&$rmkeyworkxen == true) {
            $return .= '';
        }
        else {
            if($device['status'] == 0) {
                $state = "Online";
                $return .= "<tr class=\"success\"><td>";
            }
            else {
                $state = "Offline";
                $return .= "<tr class=\"error\"><td>";
            }

            $return .= $device['name'];
            $return .= '</td><td>';
            $return .= $device['ip'];
            $return .= '</td><td>';
            $return .= $state;
            $return .= '</td></tr>';
        }
    }
    return $return;
} 
```

如何按设备名称对数组进行排序？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T22:31:30.273

```
usort($devices,function($a,$b) {return strnatcasecmp($a['name'],$b['name']);}); 
```

文档：[`usort()`](http://php.net/usort)，[`strnatcasecmp()`](http://php.net/strnatcasecmp)

# c# - 如何在 .NET c# 中正确创建可移植库

> ID：13942548
> 
> 赞同：-1
> 
> 时间：2012-12-18T22:28:38.650
> 
> 标签：c#, .net

我决定创建一个可用于不同项目的库，包括 .net 4.5 控制台应用程序、Windows 商店应用程序、Windows Phone 8。我的库正在做一些套接字编程，如果是正常的 4.5，我将使用 TcpClient .

第一步（假设）是创建一个便携式库，但这很快就结束了，因为那里不支持 TcpClient。

创建此类库的常规方法是什么？创建可用于多重目标的库的第一步是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:53:43.223

非常有名的问题。

有几种方法可以解决这个问题。

1.  共享代码文件应在相关项目中添加链接。这种方式你可以改变一次，它将影响所有依赖的项目。请记住，在这种情况下，当然必须重建所有依赖项目。右键单击依赖项目，选择 Add->Existing Item - 在对话框中，下拉 Add 按钮并选择 Add As Link。您将不得不使用一些[C# 预处理器指令](http://msdn.microsoft.com/en-us/library/ed8yd1ha%28v=vs.71%29.aspx)来区分不同的平台 - 例如，某些命名空间和 API 在 Windows 8 中可能会有所不同。

2.  使用部分类和继承来扩展类型。例如，假设您有一种类型，它的一种方法应该从 Internet 下载文件并将其保存在本地。假设在 Windows 8 和 Windows Phone 中，API 是不同的（它们实际上是不同的），您可以在一个公共文件中创建具有私有方法 deceleration 的类型，并在每个相关项目中创建实现该方法的部分类 - 一个部分类对于 Windows Phone，以及 Windows 8 中的一个部分类，每个类都将在其相关上下文中构建。有关部分类和方法的更多信息，[请阅读此处](http://msdn.microsoft.com/en-us/library/wa80x488.aspx)。

我希望这会有所帮助。

无论如何，特别是您提到要使用的 TcpClient - 如果我没记错的话，Windows Phone 不支持它，而不仅仅是便携式库:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:44:39.790

对于不兼容的库（例如`TcpClient`仅在 x86 上可用），您应该要么；1) 找到适用于两种设备的不同库或 2) 找到它可以替代其他设备并添加一些逻辑以使正确的代码在不同设备上执行。

在这种甚至不相关的情况下，可移植性是不可能的。一个设备是 x86，另一个是 ARM。如果没有单独的构建，就无法创建一个在两者上都可以工作的库。因为在这种情况下，您也可以使用编译器宏来指示为每个宏构建的内容，然后只使用`TcpClient`x86 版本中的 和 ARM 版本中的其他库。

# svn - 使用 subversion 设置 WAMP 开发环境

> ID：13942550
> 
> 赞同：0
> 
> 时间：2012-12-18T22:29:00.083
> 
> 标签：svn, wamp

我在一个站点上工作了一段时间，使用 Dreamweaver 并通过内置 FTP 上传更改。我现在意识到这是一个愚蠢的设置。我没有办法在非生产环境中测试文件，也没有源代码控制。我很烂。

我想改进这个设置，但我有点迷茫。我的理解正确吗？

1.  在我的本地机器上设置开发环境（我会使用 WAMP）。
2.  在生产服务器上设置基于 /www 目录的存储库的颠覆服务器
3.  在本地开发和测试
4.  准备好转移到生产环境时，在生产服务器上提交 subversion。

我在正确的轨道上吗？有一个更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:52:40.840

是的，你在正确的轨道上。您可能也想使用 Vagrant，以便与生产服务器拥有相同的环境。然后使用 git。

# asp.net - C# MVC 4 API - 三个函数抛出错误

> ID：13942551
> 
> 赞同：-1
> 
> 时间：2012-12-18T22:29:09.323
> 
> 标签：asp.net, asp.net-mvc, api, asp.net-mvc-4

我已经使用 MVC4 和 C# 创建了一个 API。我的一些命令有问题。我不断收到此错误：“'API.Controllers.EmployeesController.GetDepartment(int)' 的最佳重载匹配有一些无效参数。” 下面是我的代码。我在调用类似函数的三个不同行上收到错误。发送给函数的值有可能为空。

```
public List<Models.Position> GetPositions(int EmployeeID)
    {
        var positions = from position in _context.tbl_positions
                        where position.people_ID == EmployeeID
                        select new Models.Position
                        {
                            PositionID = position.id
                            ,Department = position.dept_ID == null ? string.Empty : GetDepartment(position.dept_ID)
                            ,JobTitle = position.title
                            ,Building = position.location_ID == null ? string.Empty : GetBuilding(position.location_ID)
                            ,Room = position.room
                            ,Phone = position.public3 == null ? string.Empty : "000-111-" + position.public3
                            ,Fax = position.fax3 == null ? string.Empty : "000-111-" + position.fax3
                            ,College = position.college_ID == null ? string.Empty ? GetCollege(position.college_ID)
                        };

        return positions.ToList();
    }

    public string GetDepartment(int DeptId)
    {
        var department = (from departments in _context.tbl_departments
                          where departments.ID == DeptId
                          select departments.dept).SingleOrDefault();

        return department;
    }

    public string GetBuilding(int BID)
    {
        var building = (from buildings in _context.tbl_locations
                          where buildings.id == BID
                          select buildings.Name).FirstOrDefault();

        return building;
    }

    public string GetCollege(int CID)
    {
        var college = (from colleges in _context.tbl_colleges
                          where colleges.id == CID
                          select colleges.college).SingleOrDefault();

        return college;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:53:29.810

您问题的这一部分解释了一切：

> 发送给函数的值有可能为空。

您的问题是您将一个可为空的 int 传递给一个需要一个 int 的方法。将方法的签名更改为：

```
public string GetDepartment(int? departmentId) 
```

或将您对 GetDepartment 的呼叫更改为：

```
string department = GetDepartment(departmentId.Value); 
```

当然，无论您选择哪个，请确保在尝试引用它之前检查参数是否为空值！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:35:31.227

你可能在传递 a `int?`or`Nullable<int>`吗？试试`position.college_ID.Value`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T22:49:14.620

`dept_ID`（+1 到斯科特评论）的类型是什么？

通过查看您的代码，我可以说`dept_ID`肯定是引用类型（所以绝对不是`int`which 是值类型）。实际上，您正在检查代码以查看是否`dept_id`是`null`（但是如果`dept_ID`是真的，`int`它无论如何都不会编译，因为不可能检查值类型`null`）。

所以`dept_ID`要么是一个有意义的`Nullable<int>`（语法糖： ）......而且在这种情况下Max答案会工作得很好......或者是另一个引用类型（例如一个类），在这种情况下我们将需要类型声明看看如何解决这个问题。`int?``dept_id`

无论如何，这`dept_ID`肯定不是一个 int，所以你得到错误“无效参数”是有道理的，因为`GetDepartment`除了一个`int`参数，但你给它的东西不是一个 int。

`GetCollege`同样，您调用and时也会出现错误`GetBuilding`，两者都`int`期望值类型作为参数，但获取的引用类型不是`int`.

希望有帮助！

# c++ - 如何在 GNU Radio 中实现消息传递？

> ID：13942557
> 
> 赞同：1
> 
> 时间：2012-12-18T22:29:40.293
> 
> 标签：c++, gnuradio

我需要实现消息传递，我的想法是制作某种消息源（我继承自`public gr_sync_block`）作为另一个块的控制器（它必须每 6 分钟发送一条消息）。

我读到这是继承自`gnuradio::block` - 顺便说一句，安装 greextras 是强制性的 - 所必需的。在`.h`文件中，我添加了`#include <gnuradio/block.h>`and 继承自 block `class JDFM_API jdfm_control : public gr_sync_block, public gnuradio::block`。我知道我已经重新定义了一些东西，比如`gnuradio::block`构造函数，但我不知道是什么`msg_signature`，我也没有得到块参数和工作参数之间的关系，我不确定的最后一件事是`gnuradio-companion`如果我创建了我是否仍然可以使用像这样的块。

我一直无法找到消息实现的简单示例。如果有人可以指导我或给我看一个例子，那就太棒了。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:01:32.410

这已经由 Josh Blum 完成，并且可以作为他的 GNURadio extras 包的一部分在 GitHub 上获得：

[https://github.com/guruofquality/greextras/wiki#wiki-feature-message-passing](https://github.com/guruofquality/grextras/wiki#wiki-feature-message-passing)

享受！

# actionscript-3 - 使用 Vector 作为图表数据提供者？

> ID：13942560
> 
> 赞同：0
> 
> 时间：2012-12-18T22:29:57.900
> 
> 标签：actionscript-3, apache-flex, flex4.5

```
public class TMyClass 
{
   public var value : Number;
   public var scale : Number;
   public function TMyClass()
   {
   }

}

[Bindable]
public var myVector : Vector.<TMyClass> = new Vector.<TMyClass>();

yField="value" // the line series property
xFiled="scale" 
```

我正在尝试将**myVector**设置为 Chart 对象中 LineSeries 的数据提供者。构建时一切都没有问题，但是当我执行它时 - 出现属性“值”不存在的错误。如果我将 dataprovider 切换到 ArrayCollection - 一切都很好。

*   Vector 可以用作图表系列对象的数据提供者吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T01:33:40.603

不，您不能将该`Vector`类用作数据提供者。即使`dataProvider`property 的类型为`Object`，它也对该对象应该是什么有一些期望。

a （并假设其他图表系列对象）的`dataProvider`属性的setter 方法在类中定义。如果您查看该 setter 方法，它最终会进入一系列语句，在其中检查您传入的类型。它检查是否是以下类型之一：`LineSeries``ChartElement``if``dataProvider``dataProvider`

*   `Array`
*   `ArrayCollection`
*   `XMLList`
*   `XMLListCollection`
*   `ListCollectionView`
*   或任何实现`IList`或`ICollectionView`接口的东西

如果你想使用 a `Vector`，你可以将你的`Vector`in 类包装成实现`IList`or `ICollectionView`。

人们已经编写了包装 Vector 并实现`IList`接口的类，包括我自己。这允许您将`Vector`'s 与通常具有`dataProvider`属性的任何 Flex 组件一起使用。

我的实现的一个设计目标是避免其他人的实现正在做的所有强制转换（尽管从来没有做任何性能测试）。

*   我自己的[VectorCollection](https://github.com/sunild/Flex-Collection-Utils)实现
*   [来自 DigitalPrimates 的VectorCollection](http://www.digitalprimates.net/author/codeslinger/2010/05/18/vectorcollection/)（我相信他们也将此实现贡献给了 Apache Flex SDK (Flex 4.8)

# facebook - 如何将我在 JS SDK 中获得的 Facebook 访问令牌传递给我的 PHP 脚本？

> ID：13942567
> 
> 赞同：2
> 
> 时间：2012-12-18T22:30:21.710
> 
> 标签：facebook, facebook-javascript-sdk, facebook-php-sdk, facebook-apps, facebook-access-token

我有一个使用 JS SDK 的功能性 facebook 应用程序。我可以使用 JS SDK 来获取我的用户 facebook ID 和访问令牌，它似乎工作正常。但是，我的 JS 脚本需要通过 JQuery AJAX 调用一些服务器端 PHP 代码，以便进行一些服务器端相关操作......但我仍然需要访问我的用户在 PHP 代码上的访问令牌。在 PHP SDK 的官方 facebook 文档中，我看到以下内容：

> Facebook SDK for PHP 可以与 Facebook SDK for Javascript 结合使用，在应用程序的客户端和服务器端提供无缝会话管理。
> 
> 要启用此功能，请确保在嵌入和初始化 JS SDK 时，将传递给 FB.init() 的对象的状态和 cookie 参数都设置为 true。

我按照上面写的确切说明进行操作，但在我初始化我的 facebook PHP 对象后，我的 PHP 代码似乎无法获取用户的 facebook ID 和访问令牌。

我想念什么？我不明白，因为根据文档所说，我的用户的访问令牌应该使用 cookie 自动传递给 PHP SDK。

是否应该以其他方式完成？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T01:12:30.820

如果`access_token`是使用 Javascript SDK 检索的，那么您知道您只会在第一个页面加载后（在页面重新加载或 ajax 调用时）获得它。

虽然，请务必检查您的 SDK 是否设置正确（以及通道文件），因为这可能会导致跨域通信出现问题 - 并且因为 cookie 大部分时间都在 iframe 中被阻止，而没有某种黑客攻击（主要在 IE 和 Safari 中）。

此外，JS SDK 将设置的 cookie 将通过 PHP SDK 函数使用，对您来说，这似乎`getAccessToken`就是您想要的。[https://developers.facebook.com/docs/reference/php/facebook-getAccessToken/](https://developers.facebook.com/docs/reference/php/facebook-getAccessToken/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-12T19:33:58.497

我知道已经很晚了，但是以防万一其他人需要将访问令牌从 JS SDK 传递到 PHP SDK，您可以通过调用来实现它

```
$jsHelper = $fb->getJavaScriptHelper();
$signedRequest = $jsHelper->getSignedRequest();
$accessToken = $jsHelper->getAccessToken(); 
```

有关`getJavaScriptHelper()`访问者[Facebook\Helpers\FacebookJavaScriptHelper的更多详细信息](https://github.com/facebookarchive/php-graph-sdk/blob/5.x/docs/reference/FacebookJavaScriptHelper.md)

**注意：**不要忘记`cookie:true`在配置中设置`FB.init({/*..*/})`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-13T17:46:11.140

您仍然可以将从 js-SDK 获得的访问令牌与您的 ajax 请求一起传递给 PHP，并将其与 PHP 一起使用。

```
<script>
  // This is called with the results from from FB.getLoginStatus().
  function statusChangeCallback(response) {
    console.log(response);

    if (response.status === 'connected') {
      // Logged into your app and Facebook.
     // testAPI();  
      var accessToken = response.authResponse.accessToken;
        console.log(accessToken);

       //ajax call to PHP **************************************************************
       //*******************************************************************************
       $.get("/ajaxpage.php?token="+accessToken+"&uid="+response.authResponse.userID,"",function(data){
           // on reply from the server
       });

    } else if (response.status === 'not_authorized') {
      // The person is logged into Facebook, but not your app.

    } else {
      // The person is not logged into Facebook.
    }
  }

  // This function is called when someone finishes with the Login
  // Button.  See the onlogin handler attached to it in the sample
  // code below.
  function checkLoginState() {
    FB.getLoginStatus(function(response) {
      statusChangeCallback(response);
    });
  }

  window.fbAsyncInit = function() {
    FB.init({
      appId: '..................',
      cookie: true, // enable cookies to allow the server to access the session
      xfbml: true, // parse social plugins on this page
      version: 'v2.2' // use version 2.2 
    });

    FB.getLoginStatus(function(response) {
      statusChangeCallback(response);
    });

  };

  // Load the SDK asynchronously
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s);
    js.id = id;
    js.src = "//connect.facebook.net/en_US/sdk.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));

 <fb:login-button scope="public_profile,email" onlogin="checkLoginState();">
 </fb:login-button> 
```

# java - JSF selectOneMenu 实体转换失败，使用 CDI 转换器

> ID：13942569
> 
> 赞同：0
> 
> 时间：2012-12-18T22:30:28.743
> 
> 标签：java, jsf, jsf-2, primefaces, cdi

> **可能重复：**
> [为什么 selectOneMenu 将 ItemLabel 发送给转换器？](https://stackoverflow.com/questions/7022965/why-selectonemenu-send-itemlabel-to-the-converter)

我有一个 JSF 页面，上面有两个`p:selectOneMenu`，它们都代表非常简单的实体。

ListType 实体：

```
@Entity
@Table( name = "LISTTYPES" )
@NamedQueries
(
    {
        @NamedQuery( name  = "...",
                     query = "SELECT lty " +
                             "FROM ListType lty " +
                             "WHERE lty.name = :name "),
    }
)
public class ListType implements ClientDependent, Serializable
{
    @Id
    @Column( name = "LISTTYPE_ID" )
    private Long               id;

    @Basic( optional = false )
    @Column( name = "LIST_NO" )
    private Long               nbr;

    @Basic( optional = false )
    @Column( name = "LIST_NAME" )
    private String             name;

    @Column( name = "LIST_DESC" )
    private String             description;

    ...
} 
```

监控原因实体：

```
@Entity
@Table( name = "MONITORINGREASONS" )
@NamedQueries
(
    {
        @NamedQuery( name  = "...",
                     query = "SELECT mtr " +
                             "FROM MonitoringReason mtr " +
                             "WHERE mtr.code = :code"),
    }
)
public class MonitoringReason implements Serializable
{
    @Id
    @Column( name = "MONITORINGREASON_ID" )
    private Long               id;

    @Basic( optional = false )
    @Column( name = "MONITORINGREASON_NO" )
    private String             code;

    @Basic( optional = false )
    @Column( name = "MONITORINGREASON_NAME" )
    private String             name;

    @Basic( optional = false )
    @Column( name = "MONITORINGREASON_DESC" )
    private String             description;

    ...
} 
```

简单实体。请注意，我省略了两个实体都正确实现的 equals + hashCode 方法。

以下是一些示例数据：

列表类型数据：

```
LISTTYPE_ID  LIST_NO  LIST_NAME           LIST_DESC
      1         3       'WL'        'Watch List'
      0         4       'RL'        'Restricted List'
      2         5       'Emb'       'Embargo'
      7         7       'NRL'       'Not Recommended List'
   5009        14       'GWL'       'Global Watch List'
   5010        15       'GRL'       'Global Restricted List'
   5011        16       'PIL'       'Permanent Insider List' 
```

监控原因数据：

```
MONITORINGREASON_ID  MONITORINGREASON_NO  MONITORINGREASON_NAME  MONITORINGREASON_DESC
        3                   'Ah'           'Ad-Hoc'              'Ad-Hoc'
        6                   'Al'           'Autom. Liste'        'Automatische Liste'
        4                   'Be'           'Beobachtung'         'Beobachtung'
        7                   'CLC'          'Limit Changes'       'Limit Changes'
        1                   'Fus'          'Fusion'              'Fusion'
        5                   'Li'           'Liste'               'Liste'
        2                   'Res'          'Research'            'Research Unternehmen' 
```

对上述实体的命名查询用于由转换器查找实体：

ListTypeConverter.java：

```
@Named
@RequestScoped
public class ListTypeConverter implements Converter
{
    @Inject
    @SeamLogger
    private Logger log;

    @Inject
    private SessionHelper sessionHelper;

    @Inject
    private ListTypeService listTypeService;

    @Override
    public Object getAsObject( FacesContext ctx, UIComponent comp, String identifier )
    {
        this.log.info( getClass().getSimpleName() + ".getAsObject: " + identifier );

        if ( identifier == null )
        {
            return null;
        }

        ListType listType = this.listTypeService.findByClientIdAndName( this.sessionHelper.getLoginUser().getClientId(), identifier );

        this.log.info( "Returning " + listType.getName() +  "!" );

        return listType;
    }

    ...
} 
```

监控ReasonConverter.java：

```
@Named
@RequestScoped
public class MonitoringReasonConverter implements Converter
{
    @Inject
    @SeamLogger
    private Logger log;

    @Inject
    private SessionHelper sessionHelper;

    @Inject
    private MonitoringReasonService monitoringReasonService;

    @Override
    public Object getAsObject( FacesContext ctx, UIComponent comp, String identifier )
    {
        this.log.info( getClass().getSimpleName() + ".getAsObject: " + identifier );

        if ( identifier == null )
        {
            return null;
        }

        MonitoringReason monitoringReason = this.monitoringReasonService.findByClientIdAndCode( this.sessionHelper.getLoginUser().getClientId(), identifier );

        this.log.info( "Returning " + monitoringReason.getName() +  "!" );

        return monitoringReason;
    }

    ...
} 
```

如您所见，两个简单的 CDI 转换器，**几乎**是副本。唯一不同的是列表类型是按名称查询的，监控原因是按代码查询的。（请参阅命名查询，我检查了服务是否调用了正确的查询）

它们在 JSF 页面中使用，例如：

```
<p:selectOneMenu id="list-type"
                 value="#{complianceCaseManager.selectedListType}"
                 converter="#{listTypeConverter}">
    <f:selectItems value="#{listTypeManager.selectableListTypes}"
                   var="ltp"
                   itemValue="#{ltp}"
                   itemLabel="#{ltp.description}" />
    <p:ajax process="@this" update="@form" />
</p:selectOneMenu>

<p:selectOneMenu id="monitoring-reason"
                 value="#{complianceCaseManager.selectedMonitoringReason}"
                 converter="#{monitoringReasonConverter}">
    <f:selectItems value="#{monitoringReasonManager.selectableMonitoringReasons}"
                   var="mtr"
                   itemValue="#{mtr}"
                   itemLabel="#{mtr.name}" />
    <p:ajax process="@this" update="@form" />
</p:selectOneMenu> 
```

好的，这里也一样，复制的代码基本相同。唯一的区别是列表类型使用`itemLabel="#{ltp.description}"`和监控原因`itemLabel="#{mtr.name}"`作为 UI 标签。

现在发生的事情不是我所期望的：

列表类型**和**监控原因转换器都从 JSF 获取名称作为标识符。这对于列表类型转换器来说不是问题，因为它使用带有名称的查询来查找相应的实体。执行选择更改时会发生这种情况：

```
2012-12-18 22:51:23,923 [http-thread-pool-8181(5)] INFO  de.company.project.ListTypeConverter     - ListTypeConverter.getAsObject: RL
2012-12-18 22:51:23,927 [http-thread-pool-8181(5)] INFO  de.company.project.ListTypeConverter     - Returning RL! 
```

但是，当使用监控原因选择时，会记录以下内容：

```
2012-12-18 22:52:02,091 [http-thread-pool-8181(2)] INFO  de.company.project.MonitoringReasonConverter     - MonitoringReasonConverter.getAsObject: Fusion
2012-12-18 22:52:02,100 [http-thread-pool-8181(2)] ERROR de.company.project.MonitoringReasonService       - Monitoring reason not found for client ID = 1 with code Fusion
javax.persistence.NoResultException: getSingleResult() did not retrieve any entities.
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.throwNoResultException(EJBQueryImpl.java:1307)
    at org.eclipse.persistence.internal.jpa.EJBQueryImpl.getSingleResult(EJBQueryImpl.java:778)
    at de.company.project.MonitoringReasonService.findByClientIdAndCode(MonitoringReasonService.java:92)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.glassfish.ejb.security.application.EJBSecurityManager.runMethod(EJBSecurityManager.java:1052)
    at org.glassfish.ejb.security.application.EJBSecurityManager.invoke(EJBSecurityManager.java:1124)
    at com.sun.ejb.containers.BaseContainer.invokeBeanMethod(BaseContainer.java:5388)
    at com.sun.ejb.EjbInvocation.invokeBeanMethod(EjbInvocation.java:619)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at org.jboss.weld.ejb.SessionBeanInterceptor.aroundInvoke(SessionBeanInterceptor.java:42)
    at sun.reflect.GeneratedMethodAccessor7832.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.EjbInvocation.proceed(EjbInvocation.java:571)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.doAround(SystemInterceptorProxy.java:162)
    at com.sun.ejb.containers.interceptors.SystemInterceptorProxy.aroundInvoke(SystemInterceptorProxy.java:144)
    at sun.reflect.GeneratedMethodAccessor7831.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at com.sun.ejb.containers.interceptors.AroundInvokeInterceptor.intercept(InterceptorManager.java:861)
    at com.sun.ejb.containers.interceptors.AroundInvokeChainImpl.invokeNext(InterceptorManager.java:800)
    at com.sun.ejb.containers.interceptors.InterceptorManager.intercept(InterceptorManager.java:370)
    at com.sun.ejb.containers.BaseContainer.__intercept(BaseContainer.java:5360)
    at com.sun.ejb.containers.BaseContainer.intercept(BaseContainer.java:5348)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandler.invoke(EJBLocalObjectInvocationHandler.java:214)
    at com.sun.ejb.containers.EJBLocalObjectInvocationHandlerDelegate.invoke(EJBLocalObjectInvocationHandlerDelegate.java:89)
    at $Proxy2626.findByClientIdAndCode(Unknown Source)
    at de.company.project.__EJB31_Generated__MonitoringReasonService__Intf____Bean__.findByClientIdAndCode(Unknown Source)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.jboss.weld.util.reflection.SecureReflections$13.work(SecureReflections.java:267)
    at org.jboss.weld.util.reflection.SecureReflectionAccess.run(SecureReflectionAccess.java:52)
    at org.jboss.weld.util.reflection.SecureReflectionAccess.runAsInvocation(SecureReflectionAccess.java:137)
    at org.jboss.weld.util.reflection.SecureReflections.invoke(SecureReflections.java:263)
    at org.jboss.weld.bean.proxy.EnterpriseBeanProxyMethodHandler.invoke(EnterpriseBeanProxyMethodHandler.java:110)
    at org.jboss.weld.bean.proxy.EnterpriseTargetBeanInstance.invoke(EnterpriseTargetBeanInstance.java:56)
    at org.jboss.weld.bean.proxy.ProxyMethodHandler.invoke(ProxyMethodHandler.java:105)
    at de.company.project.MonitoringReasonService$Proxy$_$$_Weld$Proxy$.findByClientIdAndCode(MonitoringReasonService$Proxy$_$$_Weld$Proxy$.java)
    at de.company.project.MonitoringReasonConverter.getAsObject(MonitoringReasonConverter.java:63)
    at de.company.project.MonitoringReasonConverter$Proxy$_$$_WeldClientProxy.getAsObject(MonitoringReasonConverter$Proxy$_$$_WeldClientProxy.java)
    at com.sun.faces.renderkit.html_basic.HtmlBasicInputRenderer.getConvertedValue(HtmlBasicInputRenderer.java:171)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.convertSelectOneValue(MenuRenderer.java:201)
    at com.sun.faces.renderkit.html_basic.MenuRenderer.getConvertedValue(MenuRenderer.java:318)
    at org.primefaces.component.selectonemenu.SelectOneMenuRenderer.getConvertedValue(SelectOneMenuRenderer.java:55)
    at javax.faces.component.UIInput.getConvertedValue(UIInput.java:1030)
    .
    .
    . 
```

**问**：

1.  为什么在转换过程中要同时使用 name 属性**？**
2.  是什么决定了 name 属性*应该*用于 getAsObject 方法字符串值，而不是 - 正如我一直假设的那样 - 传递到的属性`itemLabel="..."`？怎么控制？？
3.  这些信息在 JSF 规范中隐藏在哪里？（如果不是 PrimeFaces 在这里做一些覆盖）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T08:13:33.200

我认为这将是转换器的问题。我发现了一个类似的问题，检查一下它可能会有所帮助。[为什么 selectOneMenu 将 ItemLabel 发送给转换器？](https://stackoverflow.com/questions/7022965/why-selectonemenu-send-itemlabel-to-the-converter)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T09:51:16.023

The answer is ultimately that my converter's `getAsString()` method defines the strings that `getAsObject` receives. I had always assumed that the value is determined by JSF, e.g. the `itemLabel="..."`, which isn't the case.

I kind of makes sense this way when thinking about it, but I'm rather shocked that I have missed this information for my 1.5+ years of reading and programming JSF...

# stringtemplate - 更新 Maven 仓库

> ID：13942576
> 
> 赞同：0
> 
> 时间：2012-12-18T22:31:23.987
> 
> 标签：stringtemplate, stringtemplate-4

你能更新[http://mvnrepository.com/artifact/org.antlr/ST4](http://mvnrepository.com/artifact/org.antlr/ST4) 吗？

最新版本是 4.0.4，你们都在 4.0.6 上。

仅供参考：我在这里问这个的唯一原因是由于这个页面： http: [//www.stringtemplate.org/support.html](http://www.stringtemplate.org/support.html)

这表明这是首选的问答机制。

# cookies - Akamai 的文件夹安全性

> ID：13942579
> 
> 赞同：0
> 
> 时间：2012-12-18T22:31:27.843
> 
> 标签：cookies, akamai

是否可以通过 Akamai 创建文件夹级安全性？我想为一小群人保护一个文件夹，但仍将其缓存在 Akamai 中。

此外，如果我能以编程方式执行此操作，那就太好了。我知道您可以使用他们的服务清除缓存，但我找不到任何其他可能可用的文档。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T11:09:04.750

您可以[在此处](http://www.akamai.com/dl/feature_sheets/FS_edgesuite_accesscontrol.pdf)阅读有关通过 Akamai 实施访问控制的几种方法，即在请求`/myfolder/mysecuredfolder/*`Akamai 时，会询问您的服务器是否有用户可以访问。然后在您的来源实施“编程读取权限”。进一步优化以尽量减少 Akamai 需要询问您用户是否可以读取特定文件夹的次数可以通过将上述边缘身份验证与 cookie 相结合来实现。

# facebook - 使用 Graph API 根据条件请求有限的朋友集

> ID：13942581
> 
> 赞同：0
> 
> 时间：2012-12-18T22:31:34.673
> 
> 标签：facebook, facebook-graph-api

有没有办法让所有喜欢特定电视节目的朋友都使用 Facebook 图形 API？

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2013-01-02T08:33:56.033

在 Graph v2.0 生效之前，您可以使用 fql 来实现这一点。

我所有喜欢泰德神父的朋友：

`SELECT uid, first_name, last_name FROM user WHERE uid IN(SELECT uid FROM page_fan WHERE page_id='306411942918' AND uid IN (SELECT uid2 FROM friend WHERE uid1 = me()))`

使用图形 API：

`https://graph.facebook.com/me/friends?fields=first_name,last_name,likes{id}&<ACCESS_TOKEN>`

一旦你得到你朋友喜欢的所有结果，你就可以在你的代码中遍历它们，并根据特定的 id 检查它们。

# javascript - 自初始化主干视图

> ID：13942583
> 
> 赞同：1
> 
> 时间：2012-12-18T22:31:54.970
> 
> 标签：javascript, backbone.js

我想知道是否有一种简单的方法可以自行初始化主干视图。最好我展示一个我想要做的例子。

目前初始化主干视图的默认方式如下：

```
var BBview = Backbone.View.extend({});
var myView = new BBview(); 
```

出于名称间距的原因，我想“自动”或“自我”初始化主干视图。例如。

```
var MyApp.MyView = Backbone.View.extend({}).initialize(); 
```

这样 MyApp.MyView 将自动成为我的视图，而不必先创建一个变量作为主干视图，然后再创建另一个变量来初始化它。希望这是有道理的。任何帮助深表感谢。多谢你们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T22:52:31.663

`Backbone.View.extend()`返回一个构造函数，以便您可以调用`new`它。唯一棘手的部分是让优先级正确，以便`extend`看到括号中的参数，而不是`new`将它们视为构造函数的参数：

```
var v = new (Backbone.View.extend({ ... })); 
```

演示：http: [//jsfiddle.net/ambiguous/TpmtH/](http://jsfiddle.net/ambiguous/TpmtH/)

没有额外的括号：

```
var v = new Backbone.View.extend({ ... }); 
```

您将（或多或少）这样做：

```
var V = Backbone.View.extend;
var v = new V({ ... }); 
```

这不是你想要的。

我不会推荐这种事情，你只会让任何最终在六个月内查看你的代码的人感到困惑和困惑。你最好使用一个函数来避免命名空间污染：

```
var myView = (function() {
    var BBview = Backbone.View.extend({});
    return new BBview();
})(); 
```

这可能不那么漂亮或聪明，但它具有作为一种常见且可立即识别的模式的巨大优势。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T22:53:11.790

只需直接使用`new`操作符初始化主干视图：

```
var myView = new Backbone.View(); 
```

或者通过使用扩展：

```
var myView = new (Backbone.View.extend({ 
      initialize : function() { console.log('init'); } 
})); 
```

# php - 更改主机后wordpress升级和插件更新问题

> ID：13942586
> 
> 赞同：0
> 
> 时间：2012-12-18T22:31:55.780
> 
> 标签：php, content-management-system, wordpress

几个月前，我将我的 wordpress 网站从以前的主机更改为新主机，并且它已正确转移并且工作正常。但是几天后，我遇到了这个我自己无法解决的不寻常问题：

每当我尝试升级我的 wordpress 版本甚至尝试更新我的插件时，在等待了很长时间之后，我的网站都会显示以下消息：

> 自动 WordPress 更新未能完成。

如何解决此问题，以便我可以像以前一样更新我的网站？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T17:32:45.987

WP 根目录中是否有 .maintenance 文件？如果是这样，请将其删除。请记住，它是不可见的，因此请确保您的不可见文件可见。

那应该这样做。如果没有，请更新您的上传目录或 wp-content 文件夹中的目录。去掉它。

# ios - 图像缩放，低分辨率

> ID：13942587
> 
> 赞同：1
> 
> 时间：2012-12-18T22:31:58.167
> 
> 标签：ios, xcode, scaling

我正在使用菜单，我需要创建适合“单元格”的图像。每当我缩放我的图像时，它看起来很糟糕！

![还是坏了](../Images/06fd7ec60c807a5a5c36faa2d50a240d.png)

代码：

```
 CGSize newSize = CGSizeMake(22, 22);  //whaterver size
        UIGraphicsBeginImageContext(newSize);
    [cimg drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
  UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
         UIGraphicsEndImageContext(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:40:20.630

[尝试使用此处](https://stackoverflow.com/questions/4394491/how-to-compress-resize-image-on-iphone-os-sdk-before-uploading-to-a-server)提到的另一种调整大小的技术。

如果这不能满足您的需求，您可能想尝试查看这个[问题](https://stackoverflow.com/questions/6141298/how-to-scale-down-a-uiimage-and-make-it-crispy-sharp-at-the-same-time-instead)的答案、[这个](https://github.com/mattgemmell/MGImageUtilities)（非常有用的）MGImageUtilities 类别或[这个](http://code.google.com/p/simple-iphone-image-processing/)库，以在不损失质量的情况下缩放图像。

# java - 使用 maven-assembly 插件时在类路径中找不到资源

> ID：13942588
> 
> 赞同：2
> 
> 时间：2012-12-18T22:31:58.630
> 
> 标签：java, maven-2, maven-assembly-plugin

我正在使用 maven 程序集来打包一个可执行 jar 及其依赖项和资源。资源（spring 应用程序上下文）从 jar 中排除。当我运行`mvn assembly:assembly`时，测试运行并且构建成功。但是，当我在程序集打包后运行可执行 jar 时，我得到`FileNotFoundException`. 找到打包下`\lib`的spring框架等依赖。资源`my-application-context.xml`文件也打包在`\lib`. 你能帮忙吗？

这是POM：

```
<plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-assembly-plugin</artifactId>
            <version>2.2.2</version>
            <configuration>
                <descriptors>
                    <descriptor>src/main/assembly/assembly.xml</descriptor>
                </descriptors>
                <excludes>
                    <exclude>*.xml</exclude>
                </excludes>
            </configuration>
        </plugin>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <version>2.3.1</version>
            <configuration>
                <excludes>
                    <exclude>**/*.xml</exclude>
                </excludes>
                <archive>
                    <manifest>
                        <addClasspath>true</addClasspath>
                        <classpathPrefix>lib/</classpathPrefix>
                        <mainClass>com.myapp.MainClass</mainClass>
                    </manifest>
                </archive>
            </configuration>
        </plugin>
    </plugins> 
```

和描述符：

```
<formats>
    <format>zip</format>
</formats>
<files>
    <file>
        <source>${project.basedir}/src/main/resources/my-application-context.xml</source>
        <outputDirectory>lib</outputDirectory>
    </file>
</files>
<dependencySets>
    <dependencySet>
        <useProjectArtifact>false</useProjectArtifact>
        <outputDirectory>lib</outputDirectory>
        <unpack>false</unpack>
    </dependencySet>
</dependencySets>
<fileSets>
    <fileSet>
        <directory>${project.build.scriptSourceDirectory}</directory>
        <outputDirectory>/</outputDirectory>
        <includes>
            <include>*.bat</include>
        </includes>
    </fileSet>
    <fileSet>
        <directory>${project.build.directory}</directory>
        <outputDirectory>/</outputDirectory>
        <includes>
            <include>*.jar</include>
        </includes>
    </fileSet>
</fileSets> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T14:42:33.080

您可能会遇到这个与依赖 jar 的 INDEX.LIST 文件相关的[晦涩问题。](http://www.velocityreviews.com/forums/t365098-manifest-mf-and-index-list.html)

# java - 正则表达式替换 <

> ID：13942592
> 
> 赞同：0
> 
> 时间：2012-12-18T22:32:25.653
> 
> 标签：java, mysql, sql, regex, oracle

我有下面的数据，是否可以使用 regexp_replace 函数编写通用正则表达式以在 oracle 中获得所需的输出。

```
<Tier><grade><><sdlc><17,10><>  : result should be 17.10
<><sdlc><16,909312> :   16.909312
<><sdlc><11396,87> :11396.87
<20121217>        :20121217
<UNIT><6086>  : 6086
<Tier1><><sdlc><0,47> :0.47 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:35:54.603

你可以给你一个简单的正则表达式，如下所示：

脚步：

*   替换`,`为`.`
*   使用正则表达式查找匹配项

代码：

```
String s="<Tier><grade><><sdlc><17,10><>";
            s = s.replace(',', '.');
            Pattern p = Pattern.compile("\\d+\\.*\\d+");
            Matcher m = p.matcher(s);
            if(m.find()){
            System.out.println(m.group());// 17.10
        } 
```

# javascript - UIWebView Javascript 窗口到窗口通信

> ID：13942593
> 
> 赞同：4
> 
> 时间：2012-12-18T22:32:35.533
> 
> 标签：javascript, iphone, ios, xcode

我正在开发一个 iOS 应用程序，我试图用它`UIWebView`来显示各种网站。最近我完成了将 Javascript 注入`UIWebView`到捕获`window.open`、`window.close`和`window.opener.focus`. 简而言之，为此，我注入了覆盖上述 JS 函数的 JS，其中包括`iframe`使用我可以在应用程序方法中捕获的特定方案创建一个`webView:shouldStartLoadWithRequest:navigationType`。现在一切正常，包括`window.open`创建一个新的`UIWebView`而不是在同一个窗口中加载。

但是现在，问题出现了，窗口之间的 JS 通信没有可行的解决方案。如果子窗口尝试调用`window.opener`or `window.parent`，它总是返回一个空值，因此，它无法与原始 Web 视图进行通信。

为了了解哪些 iOS 浏览器能够有效地执行窗口到窗口的通信，我发现在我的 iPhone 上的 9 个浏览器中，只有 Safari 能够成功地有效地执行这种通信。这让我相信有些东西`UIWebView`阻止了完整的 JS 窗口到窗口的通信。

有没有人成功让 UIWebView 与所有 JS 逻辑完全集成，即窗口到窗口的通信？或者有证据证明 JS 窗口到窗口的通信是不可能的？任何方向或建议表示赞赏。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-18T16:23:05.653

找到了可能的解决方案。

将 JavaScriptCore.framework 添加到链接框架和 webViewDidFinishLoad：

```
JSContext *parentCtx = [self.parentWebView valueForKeyPath:@"documentView.webView.mainFrame.javaScriptContext"];
JSContext *childCtx = [self.childWebView  valueForKeyPath:@"documentView.webView.mainFrame.javaScriptContext"];
childCtx[@"window"][@"opener"] = parentCtx[@"window"]; 
```

现在当你从 childWebView 调用 window.opener.test() 时，它会在 parentWebView 中触发测试函数！

我不确定私有 API。仅适用于 iOS 7

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-01T18:53:15.653

斯威夫特版本

```
 import JavaScriptCore

    let jsContextA = webA.valueForKeyPath("documentView.webView.mainFrame.javaScriptContext")
    let jsContextB = webB.valueForKeyPath("documentView.webView.mainFrame.javaScriptContext")        

    //Original objc code : jsContextB[@"window"][@"opener"] = jsContextA[@"window"];
    jsContextB!.setObject("opener", forKeyedSubscript: "window")
    jsContextB!.setObject(jsContextA!.objectForKeyedSubscript("window"), forKeyedSubscript: "opener") 
```

# php - 自定义类别页面模板

> ID：13942596
> 
> 赞同：0
> 
> 时间：2012-12-18T22:32:45.230
> 
> 标签：php, wordpress

我正在尝试设计基于二十十二个 category.php 模板的类别模板。

我相信我已经修改了下面的内容以适应，但是它只显示标题而没有内容，我错过了一行吗？

```
<?php get_header(); ?> 
```

```
 <?php if ( have_posts() ) : ?>

            <header class="page-header">
                <h1 class="page-title"><?php
                    printf( __( 'Category Archives: %s', 'D-Theme' ), '<span>' . single_cat_title( '', false ) . '</span>' );
                ?></h1>

                <?php
                    $category_description = category_description();
                    if ( ! empty( $category_description ) )
                        echo apply_filters( 'category_archive_meta', '<div class="category-archive-meta">' . $category_description . '</div>' );
                ?>
            </header>

            <?php /* Start the Loop */ ?>
            <?php while ( have_posts() ) : the_post(); ?>

                <?php get_template_part( 'content', get_post_format() );
                ?>

            <?php endwhile; ?>

        <?php else : ?>

            <article id="post-0" class="post no-results not-found">
                <header class="entry-header">
                    <h1 class="entry-title"><?php _e( 'Nothing Found', 'D-Theme' ); ?></h1>
                </header><!-- .entry-header -->

                <div class="entry-content">
                    <p><?php _e( 'Apologies, but no results were found for the requested archive. Perhaps searching will help find a related post.', 'D-Theme' ); ?></p>
                    <?php get_search_form(); ?>
                </div><!-- .entry-content -->
            </article><!-- #post-0 -->

        <?php endif; ?>

        </div><!-- #content -->
    </section><!-- #primary --> 
```

一如既往地感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:51:25.733

如果要显示帖子内容，则需要`the_content()`在 wordpress 循环中使用。 [http://codex.wordpress.org/Function_Reference/the_content](http://codex.wordpress.org/Function_Reference/the_content)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:27:41.713

我想我会贡献我对上述问题的回答。我已经对此进行了编码，以显示我的类别，包括日期、发布者和发布时间，以及显示相关类别标题的主标题。

请查看这产生的代码和屏幕截图，我希望这证明有用:)

```
<?php get_header(); ?>
<div id="maincontentwrap" role="main">
<h1 class="page-title"><?php
printf( __( 'Category Archives: %s', 'D-Theme' ), '<span>' . single_cat_title( '', false ) . '</span>' );
                ?></h1>
<div class="pagedivider"></div>
<?php if ( have_posts() ) : while ( have_posts() ) : the_post(); ?>
<h1><?php the_title(); ?></h1>
<?php the_content(); ?>
Written by <?php the_author_posts_link() ?> in <?php the_category(); ?> at <?php the_time('H:h a'); ?> 
<div class="pagedivider"></div>
<?php endwhile; else: ?>
<p><?php _e('Sorry, no posts matched your criteria.'); ?></p>
<?php endif; ?>
</div>
<?php get_footer(); ?> 
```

![在此处输入图像描述](../Images/a9c874594a71477f7421b1a685c8fa32.png)

# java - 将属性更改事件从大（grand-grand）子级传播到父级的正确方法

> ID：13942598
> 
> 赞同：2
> 
> 时间：2012-12-18T22:32:48.573
> 
> 标签：java, events, properties

我正在寻找一种将属性更改事件从孙子传播到其父级的正确方法。假设我们有一些树结构，当其中一个叶子的某些属性发生变化时，应该通知该树的根。我想，一种方法是将属性更改侦听器从节点添加到其子节点，然后将事件重新触发到前任。另一种方法是让根订阅其所有子级的属性更改事件，而不管层次结构如何。所以问题是如何正确地做到这一点？有什么模式吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:44:54.593

在我的一个项目中，我们为此开发了一个框架。最后，我们的决定是显式订阅嵌套结构的属性，而不是重新触发事件。这会变得非常混乱。

我们的解决方案是一个基于地图的模型，由树状结构组成。可以在树中的任何位置注册侦听器。为了让事情更好用，我们将它包裹在一个代理 shell 中，这使得树结构消失在 pojos 后面（树结构是在模型构建时构建的）。

当然，我们寻找已经可以做我们想做的事情的框架，但是没有。所有现有的框架都只处理平面 pojo。这是一项艰巨的工作，但现在我们对此感到非常满意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T22:44:27.857

我认为有一个权衡取决于您修改树的频率与传播事件的频率相比。

如果树的变化频繁，我会通过树上的直接父级将信息传递回。唯一需要的设置是每个节点中的父指针。这也很简单。

如果树的变化相对不频繁，并且通知过程的性能很重要，那么在根和每个叶子之间建立直接的侦听器关系可能会更好。

# c++ - 在 C++ 中为二叉搜索树创建删除函数

> ID：13942603
> 
> 赞同：0
> 
> 时间：2012-12-18T22:33:48.757
> 
> 标签：c++, performance, recursion, binary-search-tree

已编辑*：我正在研究二叉搜索树的删除功能。我现在正在处理第一个案例。我认为这是正确的，但我想知道它是否可以递归或更有效地完成。任何帮助表示赞赏。假设 BSTSearch 搜索一个节点，`isLeaf`如果该节点是叶子，则返回 true，并且每个节点都有一个指针，允许它们访问其父节点。

```
void
BinarySearchTree::BSTDelete(int x, BSTNode *node){

    BSTNode *deleteNode;
    deleteNode = BSTSearch(x,node); 

    if(isLeaf(deleteNode)){

        if(deleteNode->sortkey > (deleteNode->parent)->sortkey){
             delete (deleteNode->parent)->right;
            (deleteNode->parent)->right = NULL;
        }

        else{
            delete (deleteNode->parent)->left;
            (deleteNode->parent)->left = NULL;  
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-24T06:15:38.640

您不需要指向父级的指针。这是一个应该可以工作的递归版本：（按引用传递（`&`），以防您不知道，允许您修改变量，类似于按指针`BSTNode *&`传递；是按引用传递的指针，因此我们可以修改值节点->左/右（指针）（不仅仅是他们指向的东西））

```
void BinarySearchTree::BSTDelete(int x, BSTNode *&node)
{
   if (node == NULL)
      return;
   if (x == node->sortKey)
   {
      if (isLeaf(node))
      {
         delete node;
         node = NULL;
      }
      else
      {
         // other stuff goes here
      }
      return;
   }
   else if (x < node->sortKey)
      BSTDelete(x, node->left);
   else
      BSTDelete(x, node->right);
} 
```

# mysql - 如何将多个详细信息行的列汇总为一列？

> ID：13942606
> 
> 赞同：2
> 
> 时间：2012-12-18T22:33:59.630
> 
> 标签：mysql, sql, join

我有两张桌子：

```
table_a:

ID    |    NAME    
===============
1     |    DAN
2     |    RON
3     |    JANE

table_b:

ID    |    TEXT    
===============
2     |    APPLE
2     |    BANANA
2     |    COFFEE 
```

我需要得到 ID 2 的结果。我在想，即使我得到一个包含 ID 2 的 TEXT 值的字符串`table_b`也很好，例如：

```
ID     |    NAME    |    TEXT
=============================
2      |    RON     | APPLE,BANANA,COFFEE 
```

这甚至可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:36:33.400

```
SELECT
    A.*,GROUP_CONCAT(B.`TEXT`) `TEXT`
FROM
    table_a A INNER JOIN table_b B USING (ID)
WHERE A.ID=2; 
```

这是一个示例

```
mysql> DROP TABLE IF EXISTS table_a;
Query OK, 0 rows affected (0.03 sec)

mysql> DROP TABLE IF EXISTS table_b;
Query OK, 0 rows affected (0.03 sec)

mysql> CREATE TABLE table_a
    -> (ID int not null auto_increment,
    -> NAME VARCHAR(20),primary key (ID));
Query OK, 0 rows affected (0.13 sec)

mysql> CREATE TABLE table_b
    -> (ID int not null,`TEXT` TEXT,key (ID));
Query OK, 0 rows affected (0.06 sec)

mysql> INSERT INTO table_a (NAME) VALUES ('DAN'),('RON'),('JANE');
Query OK, 3 rows affected (0.06 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> INSERT INTO table_b (ID,`TEXT`) VALUES
    -> (2,'APPLE'),(2,'BANANA'),(2,'COFFEE');
Query OK, 3 rows affected (0.05 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> SELECT A.*,GROUP_CONCAT(B.`TEXT`) `TEXT`
    -> FROM table_a A INNER JOIN table_b B USING (ID) WHERE A.ID=2;
+----+------+---------------------+
| ID | NAME | TEXT                |
+----+------+---------------------+
|  2 | RON  | APPLE,BANANA,COFFEE |
+----+------+---------------------+
1 row in set (0.00 sec) 
```

试试看 ！！！

要获取 table_a 中可用的所有值以及可以从 table_b 分组的任何值：

```
SELECT
    A.*,IFNULL(GROUP_CONCAT(B.`TEXT`),'') `TEXT`
FROM
    table_a A LEFT JOIN table_b B USING (ID)
GROUP BY A.ID 
```

这是该示例：

```
mysql> use test
Database changed
mysql> DROP TABLE IF EXISTS table_a;
Query OK, 0 rows affected (0.03 sec)

mysql> DROP TABLE IF EXISTS table_b;
Query OK, 0 rows affected (0.02 sec)

mysql> CREATE TABLE table_a (ID int not null auto_increment,NAME VARCHAR(20),primary key (ID));
Query OK, 0 rows affected (0.01 sec)

mysql> CREATE TABLE table_b (ID int not null,`TEXT` TEXT,key (ID));
Query OK, 0 rows affected (0.03 sec)

mysql> INSERT INTO table_a (NAME) VALUES ('DAN'),('RON'),('JANE');
Query OK, 3 rows affected (0.02 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> INSERT INTO table_b (ID,`TEXT`) VALUES (2,'APPLE'),(2,'BANANA'),(2,'COFFEE');
Query OK, 3 rows affected (0.00 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> SELECT A.*,IFNULL(GROUP_CONCAT(B.`TEXT`),'') `TEXT`
    -> FROM table_a A LEFT JOIN table_b B USING (ID) GROUP BY A.ID;
+----+------+---------------------+
| ID | NAME | TEXT                |
+----+------+---------------------+
|  1 | DAN  |                     |
|  2 | RON  | APPLE,BANANA,COFFEE |
|  3 | JANE |                     |
+----+------+---------------------+
3 rows in set (0.00 sec)

mysql> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T22:36:52.180

你只需要使用`GROUP_CONCAT`

```
SELECT  a.ID, a.Name, GROUP_CONCAT(b.text) textList
FROM    table_a a
        INNER JOIN table_b b
            ON a.ID = b.ID
-- WHERE ...if you want extra condition.
GROUP BY a.ID, a.Name 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/104f8/1)
*   [GROUP_CONCAT](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T22:36:44.183

您可以使用[**`GROUP_CONCAT`**](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)MySQL 中的函数来组合相关表中的结果：

```
select
  a.id,
  a.name,
  group_concat(b.text) text
from
  table_a a
join
  table_b b on a.id = b.id
group by a.id 
```

样本输出：

```
| ID | NAME |         TEXT         |
------------------------------------
|  2 |  RON |  APPLE,BANANA,COFFEE | 
```

演示：[http ://www.sqlfiddle.com/#!2/e3584/9](http://www.sqlfiddle.com/#!2/e3584/9)

# objective-c - 在 iOS 应用中使用 STL

> ID：13942609
> 
> 赞同：1
> 
> 时间：2012-12-18T22:34:07.560
> 
> 标签：objective-c, ios, stl

在网上搜索，我找不到任何教程，其中介绍了在 iOS 应用程序中使用 STL 的步骤。例如，如果我想在我的应用程序的后端工作程序类中使用一个 Vector，它不与任何 Cocoa 结构交互。

如果有人可以为此给我一个简单的“Hello world”等价物，那将不胜感激。或者向我指出他们可能找到的任何教程。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T17:39:07.343

这是一些示例代码。创建一个新的 ios 项目，将 BuildSettings->Apple LLVM Language->Compile Sources As 设置为“Objective-C++”。打开“ViewController.m”并添加这一行

```
#import "queue" 
```

并将其放入 viewDidLoad。

```
typedef std::pair<int, int> P;
std::priority_queue<P> queue;
for (int i = 0; i < 10; ++i)
{
    queue.push(P(rand(), i));
}    
for (int i = 0; i < 10; ++i, queue.pop())
{
    P p = queue.top();
    printf("%u %u\n",p.first,p.second);
} 
```

为我工作。

# c - 第一个条目被跳过

> ID：13942612
> 
> 赞同：0
> 
> 时间：2012-12-18T22:34:18.940
> 
> 标签：c

当我运行它时，它会跳过“输入名字”并直接进入“输入姓氏”。

例子：

**输入名字：输入姓氏：Frank**

**名字是弗兰克**

**输入电话：**

它不允许我输入名字。想法？

```
if( (fp=fopen("contacts","w")) == NULL )
{
printf( "Failed to open file contacts to write.\n" );
exit( 1 );
}

printf("Enter first name: ");
fgets(first, sizeof(first), stdin);

first[strlen(first) - 1] = '\0';

printf("Enter last name: ");
fgets(last, sizeof(last), stdin);

last[strlen(last) - 1] = '\0';

strcpy(list.name, first);
strcat(list.name, " ");
strcat(list.name, last);

printf("The name is %s\n", list.name);

printf("Enter Phone:");
fgets( line, sizeof( line ), stdin );
sscanf( line, "%s",&list.ph);
printf("You entered: %s", &list.ph);

printf("Enter Address:");
fgets( line, sizeof( line ), stdin );
sscanf( line, "%s", list.add );

printf("Enter Email Address:");
fgets( line, sizeof( line ), stdin );
sscanf( line, "%s", list.email );

printf("\n");

fprintf( fp, "%s\t%s\t%s\t%s", list.name, &list.ph, list.add, list.email );
fclose(fp); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:37:17.920

我怀疑您将“first”声明为 char 指针，如果您希望 sizeof 有效，则必须将其声明为数组，否则您将获得指针的大小，无论它指向何处

```
char first[100]; 
printf("Enter first name: ");
fgets(first, sizeof(first), stdin); 
```

免责声明：您没有显示任何变量的声明

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T03:04:53.230

标准输入中可能有一些数据（`\n`例如 wild ）。最好在调试器下运行代码，看看会发生什么。

# grails - 如何在 Grails 中使用 Spring Security 进行基于规则的授权？

> ID：13942614
> 
> 赞同：9
> 
> 时间：2012-12-18T22:34:33.753
> 
> 标签：grails, spring-security, spring-el

Spring Security*非常*适合进行*基于角色的授权，但在**基于规则的*授权方面似乎有所不足。当然，有一些方法可以通过 SpEL 来实现，但走这条路似乎会将您的授权逻辑锁定在注释中，而将逻辑提取到服务中会更好，以便多个地方可以使用相同的逻辑。

似乎有*一些* [方法](http://borislam.blogspot.com/2012/08/writing-your-spring-security-expression_9.html) [可以添加](https://stackoverflow.com/questions/3785706/whats-the-difference-between-secured-and-preauthorize-in-spring-security-3/3786581) [你](https://stackoverflow.com/questions/5250397/criteria-based-authorization-check-with-spring-security) [自己](https://stackoverflow.com/questions/13587503/debug-symbol-information-is-required-after-injecting-modified-spring-sec)的 SpEL 表达式，但注意特别清楚，甚至那些对我来说有意义的方法似乎也达不到要求。我认为，鉴于Groovy 的*灵活性，**必须*有某种方法不必将依赖项硬编码在一起，而是在运行时获取安全规则（或 SpEL 扩展）。

虽然并不理想，但即使像定义所有所需的新规则并注入 as mixins（即。`SecurityExpressionRoot.mixin MyRule1`）这样看似简单的事情也是一个好的开始，但这似乎不起作用。

有谁知道这样做的例子？如果没有，我自己怎么做呢？

* * *

一个（简化）示例：如果 4 个字段中有 3 个的值超过特定阈值，则用户只能对对象执行特定操作（即执行服务方法），但前提是对象小于 3 天：

```
class MyRule {

    boolean canTakeAction(Person person, MyThing myThing) {
        int numFieldsWithValues = 0
        if (myThing.field1 != null) { numFieldsWithValues++ }
        if (myThing.field2 != null) { numFieldsWithValues++ }
        if (myThing.field3 != null) { numFieldsWithValues++ }
        if (myThing.field4 != null) { numFieldsWithValues++ }

        return (numFieldsWithValues > 3) && (ageInDays(myThing) < 3)
    }

    int ageInDays(MyThing myThing) {
        ...
    }
} 
```

这是更简单的规则之一。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:45:26.503

基于角色的授权是最简单但不太灵活的方式。与此形成对比的是 Spring 安全[ACL 系统](http://static.springsource.org/spring-security/site/docs/3.0.x/reference/domain-acls.html)。ACL 让您可以精确定义**谁**可以在运行时对**哪个**对象执行**什么操作。**另一方面，这需要更复杂的设置。还有一个[用于此的 grails 插件](http://grails.org/plugin/spring-security-acl)。

 **使用带有 SpEL 表达式的注释的方式介于这两种选择之间。它们比简单的角色更灵活，比 ACL 更容易。如果您正在寻找有关 Grails 中方法安全性的介绍，那么我前段时间写的[这篇博文可能会对您有所帮助。](http://www.mscharhag.com/2013/10/getting-started-with-method-security-in.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T04:15:54.187

您可以在提供动态配置功能的[Requestmap中管理您的规则。](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/5%20Configuring%20Request%20Mappings%20to%20Secure%20URLs.html)

例如，首先在 config.groovy 中将安全类型定义为 requestmap：

```
grails.plugins.springsecurity.securityConfigType = "Requestmap" 
```

然后你可能有类似于 User 和 Role 的 Requestmap 域类，像这样：

```
package com.app.auth
class Requestmap {

    String url
    String configAttribute

    static mapping = {
        cache true
    }

    static constraints = {
        url blank: false
        configAttribute blank: false
    }
} 
```

现在，由于 User、Role 和 Reqestmap 都保存在数据库中，您可以通过某些控制器中的 CRUD 操作轻松更改您的规则，而无需重新部署或重新启动您的服务。像这样：

```
class RequestmapController {

def springSecurityService

...

def save = { 
    def requestmapInstance = new Requestmap(params) 
    if (!requestmapInstance.save(flush: true)) { 
        render view: 'create', model: [requestmapInstance: requestmapInstance] 
        return 
    }

    springSecurityService.clearCachedRequestmaps()     //This is important: to refresh the requestmap. Without it the rules remain unchanged.
    flash.message = "${message(code: 'default.created.message', args: [message(code: 'requestmap.label', default: 'Requestmap'), requestmapInstance.id])}" 
    redirect action: show, id: requestmapInstance.id 
    } 
} 
```

在视图层中，您可以使用 spring 安全标签来管理您的菜单、按钮和其他需要授权的元素，例如：

```
<sec:access url="foo/bar">
    <li><g:link class="list" controller="foo" action="bar">Bar action</g:link></li>
</sec:access> 
```

因此，视图也符合授权规则。

此外，还有一个[分层角色](http://grails-plugins.github.com/grails-spring-security-core/docs/manual/guide/14%20Hierarchical%20Roles.html)功能可以用来减少请求映射中的混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T14:42:41.190

从您发布的示例中，[GContracts](https://github.com/andresteingress/gcontracts/wiki)可能是您正在寻找的。您只需要弄清楚在运行 GContract 闭包时如何访问 Principal ，但这可能就像将其作为参数传递给收缩方法一样简单。**

# haskell - 我的表演课去哪儿了

> ID：13942615
> 
> 赞同：2
> 
> 时间：2012-12-18T22:34:36.000
> 
> 标签：haskell

我有以下定义

```
data AST
    = Number Integer
    | Identifier String
    | String String
    -- | Operation BinOp AST AST
    | Query String
    deriving (Show, Eq)

data Tuple = Tuple {cmd :: String, 
                    cid :: AST,
                    argumentList :: [AST],
                    queryList :: [AST]} deriving (Show, Eq) 
```

当我尝试打印例如 cid 时，我得到了错误

```
No instance for (Show (Tuple -> AST)) arising from a use of `print' 
```

这让我很惊讶，因为 AST 和 Tuple 都是 show 类的成员。如何使 cid、argumentList 和 queryList 可打印？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T22:39:27.210

`cid`只是一个用于访问元组的“cid”字段的函数。打印它是不可能的，就像打印它是不可能的一样`fst`。但是，这是正确的：

```
t :: Tuple
t = ...

main = print (cid t) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T22:39:06.943

你不能打印`cid`。

您*可以*打印`cid tuple`，其中`tuple`是类型的值`Tuple`。

你的错误信息

```
No instance for (Show (Tuple -> AST)) arising from a use of `print' 
```

表示您正在尝试打印 type 的值`Tuple -> AST`。无法打印功能。

# c++ - 小部件删除后qt调整窗口大小

> ID：13942616
> 
> 赞同：6
> 
> 时间：2012-12-18T22:34:35.743
> 
> 标签：c++, qt

我在布局中添加小部件

```
ui->horizontalLayout->addWidget(tabwidget); 
```

并且 qmainwindow 会自行调整大小。但后来我做

```
tabwidget->setVisible(false);
qs = sizeHint();
resize(qs); 
```

我得到像 tabwidget 这样的大小没有从窗口中删除。

我制作了新按钮

```
void MainWindow::on_pushButton_2_clicked()
{
    qs = sizeHint();
    resize(qs);
} 
```

它给出了正确的尺寸。

似乎我需要一些更新功能，但我找不到它。请指教

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-05-27T03:40:15.113

这是由一个长期的内部 Qt 问题引起的（我记得第一次使用 Qt3 时遇到过）。顶部小部件需要接收事件才能真正更新其几何形状并了解其边界。这个事件似乎总是在布局生成的resize事件之后收到，因此收缩widget总是为时已晚。

已接受答案中发布的解决方案有效。但是，在布局之后添加时，下面发布的更简单的解决方案也可以使用：

```
layout()->removeWidget( widget );

QApplication::processEvents( QEventLoop::ExcludeUserInputEvents );
resize( sizeHint() ); 
```

基本上，我们需要的只是让事件循环运行并传递必要的事件，以便在运行 resize() 之前更新顶部的小部件几何形状。

请注意，如果您有多个线程正在运行，或者有事件传递到您的插槽，则此代码可能会产生副作用。因此，在 resize() 之后不要在此函数中包含任何代码会更安全。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T22:45:41.757

如果按钮槽为您提供正确的结果，那么您始终可以在由单次计时器调用的槽中调用`sizeHint()`和后续：`resize()`

```
void MainWindow::fixSize()
{
    QSize size = sizeHint();
    resize(size);
}

void MainWindow::methodWhereIHideTheTabWidget()
{
    tabwidget->setVisible(false);
    QTimer::singleShot(0, this, SLOT(fixSize()));
} 
```

该定时器设置为零延迟。这意味着当程序返回主循环并希望在内部小部件状态更新后，将立即调用该插槽。如果这不能解决您的问题，您可以尝试将零替换为 1。

# wpf - 需要帮助将鼠标定位在控件模板中的颜色变化上

> ID：13942621
> 
> 赞同：1
> 
> 时间：2012-12-18T22:35:12.360
> 
> 标签：wpf, combobox, mouseover, tabcontrol

我的 WPF 应用程序在警车中运行，并具有夜间模式，可将应用程序切换到更柔和的颜色，这样屏幕就不会影响警官的夜视。我已经改变了几乎所有需要更改的颜色。问题是鼠标悬停在`Tab`控件和`ComboBox`控件上的背景颜色。这些变成明亮的蓝白色。

对于我的生活，我找不到这种颜色变化发生在哪里。这些控件的控件模板不包含我能找到`Trigger`的`IsMouseOver`属性。

有谁知道我在哪里可以找到这个设置？或者我应该`IsMouseOver`在我自己的基于 Aero 模板的自定义模板中添加一个触发器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:50:09.513

我使用 Visual Studio 2012 和 Windows 8，所以我的风格可能与你的略有不同。

```
<Style x:Key="TabItemStyle1" TargetType="{x:Type TabItem}">
        <Setter Property="FocusVisualStyle">
            <Setter.Value>
                <Style>
                    <Setter Property="Control.Template">
                        <Setter.Value>
                            <ControlTemplate>
                                <Rectangle Margin="2" SnapsToDevicePixels="True" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" StrokeThickness="1" StrokeDashArray="1 2"/>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </Setter.Value>
        </Setter>
        <Setter Property="Foreground" Value="Black"/>
        <Setter Property="Background">
            <Setter.Value>
                <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                    <GradientStop Color="#FFF0F0F0" Offset="0"/>
                    <GradientStop Color="#FFE5E5E5" Offset="1"/>
                </LinearGradientBrush>
            </Setter.Value>
        </Setter>
        <Setter Property="BorderBrush" Value="#FFACACAC"/>
        <Setter Property="Margin" Value="0"/>
        <Setter Property="Padding" Value="6,2"/>
        <Setter Property="HorizontalContentAlignment" Value="Stretch"/>
        <Setter Property="VerticalContentAlignment" Value="Stretch"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TabItem}">
                    <Grid x:Name="templateRoot" SnapsToDevicePixels="True">
                        <Border x:Name="mainBorder" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="1,1,1,0" Background="{TemplateBinding Background}" Margin="0">
                            <Border x:Name="innerBorder" BorderBrush="#FFACACAC" BorderThickness="1,1,1,0" Background="White" Margin="-1" Opacity="0"/>
                        </Border>
                        <ContentPresenter x:Name="contentPresenter" ContentTemplate="{TemplateBinding HeaderTemplate}" Content="{TemplateBinding Header}" ContentStringFormat="{TemplateBinding HeaderStringFormat}" ContentSource="Header" Focusable="False" HorizontalAlignment="{Binding HorizontalContentAlignment, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type ItemsControl}}}" Margin="{TemplateBinding Padding}" RecognizesAccessKey="True" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{Binding VerticalContentAlignment, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type ItemsControl}}}"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Self}}" Value="true"/>
                                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Left"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="Background" TargetName="mainBorder">
                                <Setter.Value>
                                    <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                                        <GradientStop Color="#FFECF4FC" Offset="0"/>
                                        <GradientStop Color="#FFDCECFC" Offset="1"/>
                                    </LinearGradientBrush>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="BorderBrush" TargetName="mainBorder" Value="#FF7EB4EA"/>
                            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,1,0,1"/>
                            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,1,0,1"/>
                        </MultiDataTrigger>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Self}}" Value="true"/>
                                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Bottom"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="Background" TargetName="mainBorder">
                                <Setter.Value>
                                    <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                                        <GradientStop Color="#FFECF4FC" Offset="0"/>
                                        <GradientStop Color="#FFDCECFC" Offset="1"/>
                                    </LinearGradientBrush>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="BorderBrush" TargetName="mainBorder" Value="#FF7EB4EA"/>
                            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,0,1,1"/>
                            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,0,1,1"/>
                        </MultiDataTrigger>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Self}}" Value="true"/>
                                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Right"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="Background" TargetName="mainBorder">
                                <Setter.Value>
                                    <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                                        <GradientStop Color="#FFECF4FC" Offset="0"/>
                                        <GradientStop Color="#FFDCECFC" Offset="1"/>
                                    </LinearGradientBrush>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="BorderBrush" TargetName="mainBorder" Value="#FF7EB4EA"/>
                            <Setter Property="BorderThickness" TargetName="innerBorder" Value="0,1,1,1"/>
                            <Setter Property="BorderThickness" TargetName="mainBorder" Value="0,1,1,1"/>
                        </MultiDataTrigger>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Self}}" Value="true"/>
                                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Top"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="Background" TargetName="mainBorder">
                                <Setter.Value>
                                    <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                                        <GradientStop Color="#FFECF4FC" Offset="0"/>
                                        <GradientStop Color="#FFDCECFC" Offset="1"/>
                                    </LinearGradientBrush>
                                </Setter.Value>
                            </Setter>
                            <Setter Property="BorderBrush" TargetName="mainBorder" Value="#FF7EB4EA"/>
                            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,1,1,0"/>
                            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,1,1,0"/>
                        </MultiDataTrigger>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsEnabled, RelativeSource={RelativeSource Self}}" Value="false"/>
                                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Left"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="Opacity" TargetName="contentPresenter" Value="0.56"/>
                            <Setter Property="Background" TargetName="mainBorder" Value="#FFF0F0F0"/>
                            <Setter Property="BorderBrush" TargetName="mainBorder" Value="#FFD9D9D9"/>
                            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,1,0,1"/>
                            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,1,0,1"/>
                        </MultiDataTrigger>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsEnabled, RelativeSource={RelativeSource Self}}" Value="false"/>
                                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Bottom"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="Opacity" TargetName="contentPresenter" Value="0.56"/>
                            <Setter Property="Background" TargetName="mainBorder" Value="#FFF0F0F0"/>
                            <Setter Property="BorderBrush" TargetName="mainBorder" Value="#FFD9D9D9"/>
                            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,0,1,1"/>
                            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,0,1,1"/>
                        </MultiDataTrigger>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsEnabled, RelativeSource={RelativeSource Self}}" Value="false"/>
                                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Right"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="Opacity" TargetName="contentPresenter" Value="0.56"/>
                            <Setter Property="Background" TargetName="mainBorder" Value="#FFF0F0F0"/>
                            <Setter Property="BorderBrush" TargetName="mainBorder" Value="#FFD9D9D9"/>
                            <Setter Property="BorderThickness" TargetName="innerBorder" Value="0,1,1,1"/>
                            <Setter Property="BorderThickness" TargetName="mainBorder" Value="0,1,1,1"/>
                        </MultiDataTrigger>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsEnabled, RelativeSource={RelativeSource Self}}" Value="false"/>
                                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Top"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="Opacity" TargetName="contentPresenter" Value="0.56"/>
                            <Setter Property="Background" TargetName="mainBorder" Value="#FFF0F0F0"/>
                            <Setter Property="BorderBrush" TargetName="mainBorder" Value="#FFD9D9D9"/>
                            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,1,1,0"/>
                            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,1,1,0"/>
                        </MultiDataTrigger>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="false"/>
                                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Left"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,1,0,1"/>
                            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,1,0,1"/>
                        </MultiDataTrigger>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="true"/>
                                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Left"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="Panel.ZIndex" Value="1"/>
                            <Setter Property="Margin" Value="-2,-2,0,-2"/>
                            <Setter Property="Opacity" TargetName="innerBorder" Value="1"/>
                            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,1,0,1"/>
                            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,1,0,1"/>
                        </MultiDataTrigger>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="false"/>
                                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Bottom"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,0,1,1"/>
                            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,0,1,1"/>
                        </MultiDataTrigger>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="true"/>
                                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Bottom"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="Panel.ZIndex" Value="1"/>
                            <Setter Property="Margin" Value="-2,0,-2,-2"/>
                            <Setter Property="Opacity" TargetName="innerBorder" Value="1"/>
                            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,0,1,1"/>
                            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,0,1,1"/>
                        </MultiDataTrigger>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="false"/>
                                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Right"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="BorderThickness" TargetName="innerBorder" Value="0,1,1,1"/>
                            <Setter Property="BorderThickness" TargetName="mainBorder" Value="0,1,1,1"/>
                        </MultiDataTrigger>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="true"/>
                                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Right"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="Panel.ZIndex" Value="1"/>
                            <Setter Property="Margin" Value="0,-2,-2,-2"/>
                            <Setter Property="Opacity" TargetName="innerBorder" Value="1"/>
                            <Setter Property="BorderThickness" TargetName="innerBorder" Value="0,1,1,1"/>
                            <Setter Property="BorderThickness" TargetName="mainBorder" Value="0,1,1,1"/>
                        </MultiDataTrigger>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="false"/>
                                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Top"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,1,1,0"/>
                            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,1,1,0"/>
                        </MultiDataTrigger>
                        <MultiDataTrigger>
                            <MultiDataTrigger.Conditions>
                                <Condition Binding="{Binding IsSelected, RelativeSource={RelativeSource Self}}" Value="true"/>
                                <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Top"/>
                            </MultiDataTrigger.Conditions>
                            <Setter Property="Panel.ZIndex" Value="1"/>
                            <Setter Property="Margin" Value="-2,-2,-2,0"/>
                            <Setter Property="Opacity" TargetName="innerBorder" Value="1"/>
                            <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,1,1,0"/>
                            <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,1,1,0"/>
                        </MultiDataTrigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style> 
```

那么当你将鼠标悬停在它上面时，是什么导致了蓝色呢？这个小多重触发器就在这里：

```
<MultiDataTrigger>
    <MultiDataTrigger.Conditions>
        <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Self}}" Value="true"/>
        <Condition Binding="{Binding TabStripPlacement, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type TabControl}}}" Value="Top"/>
    </MultiDataTrigger.Conditions>
    <Setter Property="Background" TargetName="mainBorder">
        <Setter.Value>
            <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                <GradientStop Color="#FFECF4FC" Offset="0"/>
                <GradientStop Color="#FFDCECFC" Offset="1"/>
            </LinearGradientBrush>
        </Setter.Value>
    </Setter>
    <Setter Property="BorderBrush" TargetName="mainBorder" Value="#FF7EB4EA"/>
    <Setter Property="BorderThickness" TargetName="innerBorder" Value="1,1,1,0"/>
    <Setter Property="BorderThickness" TargetName="mainBorder" Value="1,1,1,0"/>
</MultiDataTrigger> 
```

从条件中可以看出，它在鼠标悬停时触发，并且标签条位于顶部。有一些其他触发器看起来相同，但是当标签在右侧，左下角。不过，那是你的颜色变化。

编辑：这是组合框的多重触发器：

```
<MultiDataTrigger>
    <MultiDataTrigger.Conditions>
        <Condition Binding="{Binding IsMouseOver, RelativeSource={RelativeSource Self}}" Value="true"/>
        <Condition Binding="{Binding IsEditable, RelativeSource={RelativeSource FindAncestor, AncestorLevel=1, AncestorType={x:Type ComboBox}}}" Value="false"/>
    </MultiDataTrigger.Conditions>
    <Setter Property="Background" TargetName="templateRoot">
        <Setter.Value>
            <LinearGradientBrush EndPoint="0,1" StartPoint="0,0">
                <GradientStop Color="#FFECF4FC" Offset="0"/>
                <GradientStop Color="#FFDCECFC" Offset="1"/>
            </LinearGradientBrush>
        </Setter.Value>
    </Setter>
    <Setter Property="BorderBrush" TargetName="templateRoot" Value="#FF7EB4EA"/>
</MultiDataTrigger> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T23:10:25.197

可能是 SystemColors，您可以覆盖这些，不久前我在 Buttons 上遇到过类似问题（找不到项目 :()

要覆盖系统 burshes，您可以在您的`<Window.Resources>`或`<ControlTemplate.Resources>`

```
<SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Transparent" />
<SolidColorBrush x:Key="{x:Static SystemColors.HotTrackBrushKey}" Color="Transparent" /> 
```

可以在此处找到要覆盖的 sustem 颜色的完整列表：http: [//blogs.msdn.com/b/wpf/archive/2010/11/30/systemcolors-reference.aspx](http://blogs.msdn.com/b/wpf/archive/2010/11/30/systemcolors-reference.aspx)

就像我说的那样，我不确定这是否会有所帮助，但值得一试:)

# memory-leaks - 为什么 IronPython 代码的多次执行会导致 OutOfMemoryException？

> ID：13942623
> 
> 赞同：0
> 
> 时间：2012-12-18T22:35:20.080
> 
> 标签：memory-leaks, ironpython

我在 C# 类中有一些 IronPython 代码，该类在函数中有以下两行：

```
void test(MyType request){
    compiledCode.DefaultScope.SetVarialbe("target", request);
    compiledCode.Execute();
} 
```

我正在编写一些代码来对此进行压力测试/性能测试。我传入的请求对象是`List<MyType>`一百万`MyType`的。所以我遍历这个列表：

```
foreach(MyType thing in myThings){
    test(thing);
} 
```

而且效果很好 - 运行时间约为 6 秒。当我跑

```
for(int x = 0; x < 1000; x++){
    foreach(MyType thing in myThings){
        test(thing);
    }
} 
```

在循环的第 19 次迭代中，我得到一个`OutOfMemoryException`.

我尝试做`Python.CreateEngine(AppDomain.CurrentDomain)`而不是，这似乎没有任何效果，我尝试了

```
...
compiledCode.Execute();
compiledCode.DefaultScope.RemoveVariable("target"); 
```

希望 IronPython 以某种方式保留参考。这大约是它花费的时间的两倍，但它仍然在同一时间爆炸。

为什么我的代码会导致内存泄漏，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T16:32:27.533

*IronPython 在某处*存在内存泄漏，阻止了对象被 GC 处理。（让这成为一个教训，孩子们：托管语言不能免受内存问题的影响。它们只是有*不同*的问题。）不过，我无法弄清楚在哪里。

您可以[创建一个问题](http://ironpython.codeplex.com/WorkItem/Create)并附加一个自包含的复制品，但更好的是针对内存分析器运行您的应用程序并查看您的 MyType 对象上保存的是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T23:56:23.153

所以，事实证明我根本没有*考虑*。

目标对象对象包含我要添加行的 StringBuilder。每次迭代大约 10 行，所以显然我可以在内存不足之前在 StringBuilder 中保存大约 1.9 亿行文本；）

# eclipse - “Java Build Path”中的“Order and Export”选项卡

> ID：13942628
> 
> 赞同：22
> 
> 时间：2012-12-18T22:35:35.870
> 
> 标签：eclipse, build

![在此处输入图像描述](../Images/acd998b18d5ba3dc3fa61b4e5f6db213.png)

“Java Build Path”对话框中的“Order and Export”选项卡有什么用？通过名称“order”，我可以猜测在 Plug-in Dependencies 之前搜索 JRE System 库，但为什么我们在 Build Path 中有“Export”？元素左侧的按钮是什么？

## 添加

这是我从[Eclipse](https://rads.stackoverflow.com/amzn/click/com/0321288157)中借来的示例。

orderes.webapp 依赖于订单，但它很可能使用 ubl 和 catalog 中定义的类。

![在此处输入图像描述](../Images/7a23f188d98d84ddd118089367bf13c3.png)

这种情况下，订单可以导出catalog和ubl，这样依赖它的包就可以使用catalog和ubl了。

![在此处输入图像描述](../Images/a7aea9fdfcf2970c7e606a63e3359a0b.png)

还有更多关于“订购和出口”的信息。

1.  左侧按钮的检查修改了`.classpath`要添加的文件，`exported=true`例如`<classpathentry exported="true" kind="lib" path="lib/log4j-1.2.7.jar"/>`.
2.  src 总是被选中，你不能取消选中它。

### 参考

*   [解释 eclipse .classpath 文件。'kind="con"' 和 'exported="true"' 是什么意思？](https://stackoverflow.com/questions/13960556/interpreting-eclipse-classpath-file)
*   [配置 Eclipse Java 项目](http://www.informit.com/articles/article.aspx?p=367962)
*   [Java 构建路径](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/ref-properties-build-path.htm)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-18T23:04:52.877

此选项卡似乎具有双重职责（有关少量详细信息， 请参阅[此帮助页面的底部）。](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/ref-properties-build-path.htm)

一方面，它用作构建相关项目中使用的资源的解决顺序（“顺序”部分）。另一方面，它还用于定义此构建路径的哪些部分贡献给依赖项目（那些在“项目”选项卡中列出此项目以查看此首选项面板的）构建路径（“导出”部分）。

后一个功能是复选框存在于左侧的原因，正如您所问的（请注意，不能取消选中“-”符号，因为无法取消选择此项目中定义的源文件，如帮助文件中所述）。如果贡献项目不导出该资源，则期望来自贡献项目的某些资源的依赖项目将不会编译/运行。

编辑：请参阅[此 SO 帖子](https://stackoverflow.com/questions/2737486/what-is-the-use-of-order-and-export-tab-in-java-build-path)以获取佐证。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-01-22T17:36:43.140

[Ilja Preuss的](http://www.coderanch.com/forums/user/profile/16595)[Coderanch](http://www.coderanch.com/t/104274/vc/Order-Export-tab-Java-Build) 的一个很好的例子

> 假设您在项目 A 的构建路径中有 junit.jar。项目 B 依赖于项目 A。
> 
> 现在您在项目 B 中编写一个 junit 测试。如果项目 A 导出 junit.jar，项目 B 可以在编译时使用它 - 无需更多操作。如果 A 不导出它，B 就不知道它——你也必须明确地将它放入它的构建路径中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T22:50:33.850

`Order and Export`正确猜到的选项卡显示了将包含在项目构建路径中的库的顺序。

使用按钮`up`，`down`您可以根据项目需要调整库顺序。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T22:53:45.427

为了回答您的具体问题，如果要将此项目添加为另一个 Java 项目的依赖项，则该命令将用于在运行另一个项目时解析该项目中的类和包。据说这些类和包被导出到/用于其他正在运行的项目的类路径。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-09T11:34:12.427

有一种情况——我发现这很有用。我不得不使用一个 sun.* 类的 IBM jar。这个类也存在于本地 jre 中，但我的要求是使用 IBM 的类。但默认情况下，编译器只会引用本地 jdk 类。在 Eclipse 订单和导出选项卡中，我将外部 jar 移动到 JRE lib 之前。现在，编译器将引用 IBM jar 中的类而不是本地 JRE。

# c# - 使用模型或数据传输对象作为跨应用程序不同层移动数据的工具？

> ID：13942630
> 
> 赞同：1
> 
> 时间：2012-12-18T22:35:36.337
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, ef-code-first

我正在使用 EF 代码优先方法处理 mvc4 应用程序。我已经完成了应用程序模型的编写，并且遇到了我以前从未使用过的数据传输对象 DTO。我对模型的基本印象是，他们是出租车司机，他们从数据库中获取数据作为乘客，然后在需要的地方下车。那么，在什么情况下我们应该选择 DTO？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:10:11.110

使用模型作为唯一载体的问题是有时它携带的数据太多。例如，可能需要显示所有用户信息，但不显示 SSN。另一个问题是过度发布。例如，如果您的模型在 WEB API 中用于反序列化 JSON 对象，那么有人可以轻松地将额外信息粘贴到其中。如果您的模型将这些信息一直传送到数据库。为了限制这些问题，您可以创建视图模型、DTO 或两者，这将限制对客户端“可见”的字段数量。您的 DTO 水合器将在水合期间简单地跳过不存在的字段。检查这个自动映射器[http://www.dnrtv.com/default.aspx?showNum=155](http://www.dnrtv.com/default.aspx?showNum=155)

# javascript - 在 JavaScript 中通过正则表达式拆分字符串

> ID：13942631
> 
> 赞同：1
> 
> 时间：2012-12-18T22:35:53.083
> 
> 标签：javascript, regex, string, split

我正在尝试通过以下字符数组拆分字符串：

```
"!", "%", "$", "@" 
```

我考虑过使用正则表达式，所以我开发了以下方法，我认为它可以按字符拆分字符串：

```
var splitted = string.split(/\!|%|\$|@*/); 
```

但是，当我运行以下代码时，输​​出被每个字符分割，而不是我希望的：

```
var toSplit = "abc%123!def$456@ghi";
var splittedArray = toSplit.split(/\!|%|\$|@*/); 
```

我怎样才能使它`splittedArray`包含以下元素？

```
"abc", "123", "def", "456", "ghi" 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:37:30.293

`@*`匹配空字符串并且任意两个字符之间有一个空字符串，因此字符串在每个字符处被分割。改用`+`：

```
/\!|%|\$|@+/ 
```

另外，如果您的意思是`+`应用于每个角色，而不仅仅是`@`将它们分组：

```
/(\!|%|\$|@)+/ 
```

或者更好的是，使用字符类。这使您可以省略反斜杠，因为这些字符在方括号内都不是特殊字符。

```
/[!%$@]+/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T22:37:53.830

使用以下内容：

```
var splittedArray = toSplit.split(/[!%$@]+/); 
```

您当前的代码将在每个字符之间拆分，因为`@*`将匹配空字符串。我假设因为您使用`@*`过您想将连续字符视为单个分隔符，这就是为什么在`+`正则表达式的末尾。这只会匹配一个或多个字符，因此不会匹配空字符串。

`[...]`语法是一个字符类，类似于字符的交替，只是`|`它仅适用于单个字符，因此`[!%$@]`将匹配`!`、`%`、`$`或`@`。在字符类内部，转义规则有一点改变，所以你可以使用`$`代替`\$`.

# sql - 从 VBS 调用时产生不同结果的 SQL/Server 函数

> ID：13942647
> 
> 赞同：1
> 
> 时间：2012-12-18T22:37:03.503
> 
> 标签：sql, sql-server-2008, vbscript, ado

我在 C# 中定义了以下 SQL/Server 函数来检测车辆何时加油。我保留了上次使用的燃料的上下文，这样我就不需要将光标移回数据上：

```
[Microsoft.SqlServer.Server.SqlFunction]
public static SqlDouble GetFuelRefill(SqlString ID, SqlString FuelLeft)
{
    object _lastID = CallContext.GetData("lastID6");
    object _fuelRefill = CallContext.GetData("fuelRefill");
    double fuelRefill = _fuelRefill == null ? 0.0 : Convert.ToDouble(_fuelRefill);
    object _lastFuelLeft = CallContext.GetData("lastFuelLeft");
    double lastFuelLeft = _lastFuelLeft == null ? 0.0 : Convert.ToDouble(_lastFuelLeft);

    double result = 0.0;

    if ((_lastID == null) || (Convert.ToString(_lastID) != ID.Value) || (_lastFuelLeft == null))
    {
        fuelRefill = 0;
        CallContext.SetData("lastFuelLeft", 0.0);
    }
    else if (!FuelLeft.IsNull)
    {
        double fl = Convert.ToDouble(FuelLeft.Value);
        if ((fl > 0.0) && (lastFuelLeft > 0.0) && ((fl - lastFuelLeft) / fl * 100.0 >= 5.0))
            fuelRefill += fl - lastFuelLeft;
        CallContext.SetData("lastFuelLeft", FuelLeft.Value);
    }
    result = fuelRefill;

    CallContext.SetData("lastID6", ID.Value);
    CallContext.SetData("fuelRefill", fuelRefill);
    return new SqlDouble(result);
} 
```

为了重复这个问题，我创建了一个小测试表：

```
SequenceNo  AssetID   FuelLeft
1           PJ1       50
2           PJ1       49
3           PJ1       48
4           PJ1       98
5           PJ1       95 
```

然后我从 SQL/Server Management Studio 执行以下命令：

```
SELECT SequenceNo,dbo.GetFuelRefill(AssetID,FuelLeft) AS Refill 
FROM TestTable ORDER BY SequenceNo 
```

这会产生我期望的以下结果：

```
SequenceNo  Refill
1           0
2           0
3           0
4           50
5           50 
```

但是，然后我尝试使用 VBScript 中的 ADO 执行相同的查询：

```
const DatabaseName = "MyDB"
const DatabaseServer = "(local)"
const adOpenForwardOnly = 0
const adLockOptimistic = 3
Dim FSO : set FSO = CreateObject("Scripting.FileSystemObject")
Dim Conn : Set Conn = CreateObject("ADODB.Connection")
Conn.Open "Provider=SQLOLEDB.1;Integrated Security=SSPI;Initial Catalog=" & DatabaseName & ";Server=" & DatabaseServer
Set Query = CreateObject("ADODB.Recordset")
Query.Open "SELECT SequenceNo,dbo.GetFuelRefill(AssetID,FuelLeft) AS Refill FROM TestTable ORDER BY SequenceNo", Conn, adOpenForwardOnly, adLockOptimistic
Set f = FSO.CreateTextFile("E:\Temp\Test.TXT", true)
do while not Query.EOF
    f.WriteLine Query("SequenceNo") & ", " & Query("Refill")
    Query.MoveNext
loop
Set FSO = Nothing
Query.Close
Conn.Close 
```

test.txt 文件包含以下内容：

```
1, 0
2, 0
3, 0
4, 0
5, 0 
```

做一些进一步的调试，似乎在查询期间没有保存调用上下文，但我想知道是否有人知道为什么以及解决它的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T00:22:50.430

经过进一步的实验，我找到了两种解决方案。一种是将查询放在一个简单的存储过程中，例如：

```
CREATE PROCEDURE sp_Test
AS
BEGIN
    SET NOCOUNT ON;
    SELECT SequenceNo,dbo.GetFuelRefill(AssetID,FuelLeft) AS Refill 
        FROM TestTable ORDER BY SequenceNo
END 
```

另一个是更改 VBS 代码以使用客户端游标：

```
const DatabaseName = "MyDB"
const DatabaseServer = "(local)"
const adOpenForwardOnly = 0
const adLockOptimistic = 3
const adUseClient = 3
Dim FSO : set FSO = CreateObject("Scripting.FileSystemObject")
Dim Conn : Set Conn = CreateObject("ADODB.Connection")
Conn.Open "Provider=SQLOLEDB.1;Integrated Security=SSPI;Initial Catalog=" & DatabaseName & ";Server=" & DatabaseServer
Set Query = CreateObject("ADODB.Recordset")
Query.CursorLocation = adUseClient
Query.Open "SELECT SequenceNo,dbo.GetFuelRefill(AssetID,FuelLeft) AS Refill FROM TestTable ORDER BY SequenceNo", Conn, adOpenForwardOnly, adLockOptimistic
Set f = FSO.CreateTextFile("E:\Temp\Test.TXT", true)
do while not Query.EOF
    f.WriteLine Query("SequenceNo") & ", " & Query("Refill") 
    Query.MoveNext
loop
Set FSO = Nothing
Query.Close
Conn.Close 
```

# google-calendar-api - 谷歌日历 API 查看/编辑房间/资源？

> ID：13942649
> 
> 赞同：8
> 
> 时间：2012-12-18T22:37:08.283
> 
> 标签：google-calendar-api, google-admin-sdk

在通过 API 检索会议时，Google Calendar API 是否有某种方式可以查看已预订的房间？

还有一种方法可以通过日历 API 将房间资源添加到会议中吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-11-27T14:17:08.177

我刚刚尝试过 - 它工作正常（返回每个资源 ID 的预订日期数组，最终如果这样的数组为空 -**资源可供您使用**。我想获得布尔值，但仍然......）

因此，您需要使用以下[API](https://developers.google.com/google-apps/calendar/v3/reference/freebusy/query)。

1.  转到部分尝试

2.  使用 oauth 登录

3.  在下面粘贴请求（将资源 ID 替换为现有）

请求代码：

```
{
    "maxResults": 10,
    "timeMin": "2013-11-27T00:00:00+02:00",
    "timeMax": "2013-12-27T23:59:59+02:00",
    "items": [
        {
            "id": "RESOURCE_ID_1@resource.calendar.google.com"
        },
        {
            "id": "RESOURCE_ID_2@resource.calendar.google.com"
        },
        {
            "id": "RESOURCE_ID_3@resource.calendar.google.com"
        }
    ]
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-10-24T08:07:52.730

您在 Google 日历中使用资源这一事实告诉我，您是 Google Apps for Business/Education 用户。

如果您需要组织中的资源列表，则需要使用**[Google Apps Calendar Resource API](https://developers.google.com/admin-sdk/calendar-resource/)**。您还可以使用此 API 创建新资源。

如果您想列出日历资源的可用性，您需要使用 Google Calendar API。您需要使用具有查看资源日历的适当权限的用户名查询 API。日历资源的 ID 类似于以***@resource.calendar.google.com结尾的电子邮件地址***

您还会注意到资源列在您的活动参与者中。

* * *

**现在坏消息**

在撰写本文时（2013 年 10 月），Google Apps 日历资源 API 使用 Atom/OAuth 1.0a，而 Google 日历 API 版本 3 使用 JSON/OAuth 2.0。

所以这意味着你目前需要实现两种不同的身份验证机制和两种不同风格的 API，有趣吧？

也就是说，由于 Google 正在弃用对 OAuth 1.0a 的支持，我确信他们正在努力重新编写 Google Apps 日历资源 API 以使其与 JSON/OAuth 2.0 兼容（我可能会在这里发布一个问题来询问这个问题！）。

**更新**

有关 Google Apps 日历资源 API 的生命周期的信息，请参阅我的问题：

[Google Apps 日历资源 API v1 (Atom/OAuth 1.0) 可能的使用寿命？](https://stackoverflow.com/questions/19561133/google-apps-calendar-resource-api-v1-atom-oauth-1-0-likely-lifespan/19597733#19597733)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-21T18:14:37.703

您是否尝试过查询资源的忙/闲信息（https://developers.google.com/google-apps/calendar/v3/reference/freebusy/query）？

您可以通过更新活动 (https://developers.google.com/google-apps/calendar/v3/reference/events/update) 将会议室资源更新为会议。

希望这能给你一些好主意。

# android - 在片段之间传递arrayadapter和arraylist

> ID：13942650
> 
> 赞同：1
> 
> 时间：2012-12-18T22:37:09.923
> 
> 标签：android, interface, android-arrayadapter, parcelable

我有一个包含两个片段的活动。我想在两个片段之间传递数据（一个 ArrayAdapter 和一个 ArrayList）。Fragment 1 中的用户操作修改了这两种数据类型，然后需要将其传递给 Fragment 2。类似地，Fragment 2 中的用户操作也修改了这两种数据类型，然后需要将其传递回 Fragment 1。

你能指导一下最优雅的方法吗？我一直在研究parcelable和interface。因为，我对 Java（更不用说 android）没有太多经验，所以我无法辨别两种方法的局限性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:51:33.173

我建议在每个片段中保留对您的数据对象的引用（我相信您是这样）并执行以下操作：

```
public void onResume()
{
    mDataObject = getFragmentManager.getFragmentByTag("Fragment1").getDataObject1();
    super.onResume();
} 
```

您可以在 Frag 1 和 Frag 2 中运行它，它应该会更新模型。如果您有子对象，则需要比较它们并确定子对象在类似这样的函数中是否不同。

```
public void determineIfDifferent(DataObject mData1) 
{
    Field mData1Fields[] = mData1.getClass().getFields();
    Field mData2Fields[] = mData2.getClass().getFields();

    for (int i = 0; i < mData1Fields.length; i++)
    {           
        try 
        {
            if (mDataFields[i].get(mData) != null && tempFields[i].get(PS)!= null)
            {
                String mDataValue =  mDataFields[i].get(mData).toString().trim();
                String tempValue =  tempFields[i].get(PS).toString().trim();

                if (!mDataValue.equals(tempValue))
                {   
                    differenceList.add(tempValue);
                }
            }
        }
        catch (IllegalArgumentException e) 
        {
            Logger.logStackTrace(getClass().getSimpleName(), e);
        }
        catch (IllegalAccessException e) 
        {
            Logger.logStackTrace(getClass().getSimpleName(), e);
        }
    }
} 
```

如果类型不是字符串，这显然可以修改 - 这正是我手头的

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-18T22:41:55.033

您可以将它们放入 Intent.putExtra() 中，反之亦然

# javascript - 尝试使用 CasperJS 跟踪 iframe 中的链接

> ID：13942651
> 
> 赞同：2
> 
> 时间：2012-12-18T22:37:12.483
> 
> 标签：javascript, web-scraping, casperjs

我正在尝试使用[CasperJS](http://casperjs.org/index.html)来跟踪 iframe 中的链接，但我似乎无法访问 iframe 的文档。

这是使用我找到的 iframe 示例页面进行的测试。第三个 iframe 有一个 name 属性，我需要 Casper 的 frame 方法。[卡斯帕 API](http://casperjs.org/api.html)

```
var casper = require('casper').create();

casper.start('http://nunzioweb.com/iframes-example.htm');

casper.withFrame('frame', function(){
  this.echo('Page url is ' + this.getCurrentUrl());
  this.echo(this.getHTML());
});

casper.run(); 
```

正如我所料，页面网址返回“http://nunzioweb.com/lyrics/455Rocket.html”，但返回的 html 是包装 iframe 的页面。

知道如何进入 iframe 以便我可以单击链接 [在我实际执行此操作的页面上]？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T09:20:21.170

由于某种原因`.getHTML()`在这里不起作用，您必须直接从`WebPage`实例中获取页面 HTML。

```
var casper = require('casper').create();

casper.start('http://nunzioweb.com/iframes-example.htm');

casper.withFrame('frame', function(){
    this.echo('Page url is ' + this.getCurrentUrl());
    this.echo(this.page.content);
});

casper.run(); 
```

我会处理这个问题。

点击一个链接，例如。在`Slick City`您的 iframe 示例中的一个：

```
var casper = require('casper').create();

casper.start('http://nunzioweb.com/iframes-example.htm');

casper.withFrame('frame', function() {
    this.echo('Page url is ' + this.getCurrentUrl());
    this.clickLabel('Slick City');
});

casper.waitForPopup('slickcitydown.htm').withPopup('slickcitydown.htm', function() {
    this.echo('New page url is ' + this.getCurrentUrl());
});

casper.run(); 
```

这给出了：

```
$ casperjs test.js 
Page url is http://nunzioweb.com/lyrics/455Rocket.html
New page url is http://nunzioweb.com/slickcitydown.htm 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-04T15:38:25.437

看起来在最新版本中该问题已得到修复。

我正在使用 casperjs v.1.0.2 问题中的代码示例，并且我得到了 iframe [http://nunzioweb.com/lyrics/455Rocket.html](http://nunzioweb.com/lyrics/455Rocket.html)的 html，正如预期的那样。

# c# - 无法加载文件或程序集“DotNetOpenAuth.Core

> ID：13942653
> 
> 赞同：84
> 
> 时间：2012-12-18T22:37:19.030
> 
> 标签：c#, asp.net, .net, asp.net-mvc, asp.net-mvc-4

启动我的 asp net mvc 4 应用程序时出现以下错误：

```
Could not load file or assembly 'DotNetOpenAuth.Core, Version=4.0.0.0, 
Culture=neutral, PublicKeyToken=2780ccd10d57b246' or one of its dependencies. 
The system cannot find the file specified 
```

这是错误日志

```
Assembly manager loaded from:  C:\Windows\Microsoft.NET\Framework\v4.0.30319\clr.dll
Running under executable  C:\Windows\SysWOW64\inetsrv\w3wp.exe
--- A detailed error log follows. 

=== Pre-bind state information ===
LOG: User = notebook\Guilherme
LOG: DisplayName = DotNetOpenAuth.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=2780ccd10d57b246
 (Fully-specified)
LOG: Appbase = file:///C:/Users/Guilherme/Documents/Visual Studio 2012/Projects/Gedi/Gedi/
LOG: Initial PrivatePath = C:\Users\Guilherme\Documents\Visual Studio 2012\Projects\Gedi\Gedi\bin
Calling assembly : Microsoft.Web.WebPages.OAuth, Version=2.0.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35.
===
LOG: This bind starts in default load context.
LOG: Using application configuration file: C:\Users\Guilherme\Documents\Visual Studio 2012\Projects\Gedi\Gedi\web.config
LOG: Using host configuration file: C:\Windows\Microsoft.NET\Framework\v4.0.30319\aspnet.config
LOG: Using machine configuration file from C:\Windows\Microsoft.NET\Framework\v4.0.30319\config\machine.config.
LOG: Post-policy reference: DotNetOpenAuth.Core, Version=4.0.0.0, Culture=neutral, PublicKeyToken=2780ccd10d57b246
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/root/2635bb56/154c3fbb/DotNetOpenAuth.Core.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/root/2635bb56/154c3fbb/DotNetOpenAuth.Core/DotNetOpenAuth.Core.DLL.
LOG: Attempting download of new URL file:///C:/Users/Guilherme/Documents/Visual Studio 2012/Projects/Gedi/Gedi/bin/DotNetOpenAuth.Core.DLL.
LOG: Attempting download of new URL file:///C:/Users/Guilherme/Documents/Visual Studio 2012/Projects/Gedi/Gedi/bin/DotNetOpenAuth.Core/DotNetOpenAuth.Core.DLL.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/root/2635bb56/154c3fbb/DotNetOpenAuth.Core.EXE.
LOG: Attempting download of new URL file:///C:/Windows/Microsoft.NET/Framework/v4.0.30319/Temporary ASP.NET Files/root/2635bb56/154c3fbb/DotNetOpenAuth.Core/DotNetOpenAuth.Core.EXE.
LOG: Attempting download of new URL file:///C:/Users/Guilherme/Documents/Visual Studio 2012/Projects/Gedi/Gedi/bin/DotNetOpenAuth.Core.EXE.
LOG: Attempting download of new URL file:///C:/Users/Guilherme/Documents/Visual Studio 2012/Projects/Gedi/Gedi/bin/DotNetOpenAuth.Core/DotNetOpenAuth.Core.EXE. 
```

我已经使用打包管理器从 DotNetOpenAuth 中删除了所有引用。我还通过我的自我引用检查了我在项目中拥有的每个 Auth 程序集，但没有。

这是我的 packages.config

```
<packages>
  <package id="AutoMapper" version="2.2.0" targetFramework="net45" />
  <package id="EntityFramework" version="5.0.0" targetFramework="net45" />
  <package id="jQuery" version="1.7.1.1" targetFramework="net45" />
  <package id="jQuery.UI.Combined" version="1.8.20.1" targetFramework="net45" />
  <package id="jQuery.Validation" version="1.9.0.1" targetFramework="net45" />
  <package id="knockoutjs" version="2.1.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.Mvc" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.Razor" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.Web.Optimization" version="1.0.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebApi" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebApi.Client" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebApi.Core" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebApi.WebHost" version="4.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebPages" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebPages.Data" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.AspNet.WebPages.WebData" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.jQuery.Unobtrusive.Ajax" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.jQuery.Unobtrusive.Validation" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.Net.Http" version="2.0.20710.0" targetFramework="net45" />
  <package id="Microsoft.Web.Infrastructure" version="1.0.0.0" targetFramework="net45" />
  <package id="Modernizr" version="2.5.3" targetFramework="net45" />
  <package id="Newtonsoft.Json" version="4.5.11" targetFramework="net45" />
  <package id="Repository" version="1.0.2.12" targetFramework="net45" />
  <package id="RestSharp" version="103.4" targetFramework="net45" />
  <package id="WebGrease" version="1.1.0" targetFramework="net45" />
</packages> 
```

谢谢

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-12-19T01:57:20.147

如果您不想使用 OAuth，请删除引用：WebPages OAuth DLL（我认为它是**Microsoft.Web.WebPages.OAuth.dll** ¹）和 DotNetOpenAuth DLL。

* * *

¹：您可以在`Calling assembly`. 因此，删除所有`calling assembly`内容`DotNetOpenAuth.Core`应该对您有用。这种方法应该适用于其他未使用的缺失引用。

* * *

## 回答 #2

> 赞同：78
> 
> 时间：2013-02-08T17:03:42.953

我有类似的问题。这真的很奇怪，因为该项目在前一天运行良好。

从项目文件夹中删除 obj 和 bin 文件夹，清理解决方案并重建它工作。

希望有帮助。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-02-04T18:02:55.547

我在将 MVC 应用程序部署为`bin deploy`. 当您右键单击项目并选择`Add deployable dependencies`VS 时，如果您选中`ASP .NET Webpages with Razor syntax`.

要解决此问题，请删除该`_bin_deployableAssemblies`文件夹和您的应用程序的`bin`文件夹，然后清理并重建您的应用程序，它会再次运行。

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2013-04-18T13:19:23.573

在我的情况下，MVC4 应用程序在 VS2012 调试器中运行良好，但是当我在服务器上发布应用程序时出现“无法加载文件或程序集 'DotNetOpenAuth.Core'”错误。

选中“发布 Web”窗口的设置选项卡上的“发布前删除所有现有文件”复选框解决了该问题。

![文件系统发布设置](../Images/a5dfd37143796a436772f781d075bb3d.png)

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2013-07-11T09:20:09.143

我通过使用 Nuget 安装包解决了这个问题

```
Install-Package Microsoft.AspNet.WebPages.OAuth 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2014-07-09T18:49:00.023

只需在发布设置上选择“在目标位置删除其他文件”。这对我有用

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2013-11-08T16:22:26.007

通过安装以下两个软件包，我在 VS2012 Professional Update 4 RC 上解决了这个问题：

1.  从菜单中打开包管理器控制台：

    工具| 库包管理 | 包管理器控制台

2.  安装包 DotNetOpenAuth.AspNet

3.  安装包 Microsoft.AspNet.WebHelpers

希望这对你有帮助！！！

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2012-12-18T22:59:33.393

尝试对值“2780ccd10d57b246”进行全局解决方案搜索（如果您尚未更改，请按 ctrl+shift+f）。我猜你会在你的 web.config 中找到它。

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2014-05-04T06:45:10.080

对我来说，它的工作方式如下，使用打包管理器控制台，我已经按照以下顺序卸载了软件包，然后我重新安装了它，它解决了我的问题..

> 卸载

```
Uninstall-Package Microsoft.AspNet.WebPages.OAuth
Uninstall-Package DotNetOpenAuth.AspNet 
Uninstall-Package DotNetOpenAuth.OpenId.RelyingParty
Uninstall-Package DotNetOpenAuth.OpenId.Core 
Uninstall-Package DotNetOpenAuth.OAuth.Consumer
Uninstall-Package DotNetOpenAuth.OAuth.Core
Uninstall-Package DotNetOpenAuth.core 
```

构建，如果您没有使用上述软件包，那么这应该可以解决问题，如果需要再次安装上述软件包，请执行以下操作..

> 重新安装

```
install-Package DotNetOpenAuth.AspNet 
install-Package Microsoft.AspNet.WebPages.OAuth
install-Package DotNetOpenAuth.OpenId.RelyingParty
install-Package DotNetOpenAuth.OpenId.Core 
install-Package DotNetOpenAuth.OAuth.Consumer
install-Package DotNetOpenAuth.OAuth.Core
install-Package DotNetOpenAuth.core 
```

推荐：

*   进入项目的bin文件夹，清空
*   何时发布到 IIS，删除虚拟目录并将网站再次分配给 IIS，因为我遇到了服务器中有现金的问题，这导致了问题......

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-10-14T05:47:54.487

另一种解决方案选择是具有程序集依赖项，如下所示：

```
<dependentAssembly>
  <assemblyIdentity name="DotNetOpenAuth.AspNet"
                    publicKeyToken="2780ccd10d57b246"
                    culture="neutral" />
  <bindingRedirect oldVersion="0.0.0.0-4.3.0.0" newVersion="4.3.0.0" />
</dependentAssembly>
<dependentAssembly>
  <assemblyIdentity name="DotNetOpenAuth.Core"
                    publicKeyToken="2780ccd10d57b246"
                    culture="neutral" />
  <bindingRedirect oldVersion="0.0.0.0-4.3.0.0" newVersion="4.3.0.0" />
</dependentAssembly> 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2014-01-17T14:19:51.533

我没有评论的声誉，但我可以确认我遇到了这个确切的问题，并且 Jack 为我提供了正确的解决方案。我最近按下了添加服务引用，它用上述错误消息破坏了程序。

删除 _bin_deployableAssemblies 文件夹和应用程序的 bin 文件夹，然后清理并重建应用程序使其再次工作。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-04-24T09:03:15.807

我也遇到了这个错误，但是使用的是 ASP.NET MVC 5 项目。我通过安装 Package DotNetOpenAuth.Mvc5 并调用 AsActionResultMvc5() 而不是 AsActionResult() 解决了这个问题

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2015-03-03T12:51:33.953

我在这里遇到了同样的问题。我发布的 web.config 没有以下行：

```
 <dependentAssembly>
    <assemblyIdentity name="DotNetOpenAuth.Core" publicKeyToken="2780ccd10d57b246" />
    <bindingRedirect oldVersion="1.0.0.0-4.1.0.0" newVersion="4.1.0.0" />
  </dependentAssembly> 
```

刚刚添加，它的工作。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2013-10-14T17:51:57.983

如果这对任何人都有帮助 - 我无法通过 Nuget 卸载 DotNetOpenAuth 组件，因此我通过直接从引用列表中删除它们然后通过 nuget 重新安装 dotnetopenauth 来解决此错误。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2014-08-08T20:12:18.320

对我来说，帮助将以下部分添加到 csproj 文件中：

```
<PropertyGroup>
   <PostSharpHostConfigurationFile>web.config</PostSharpHostConfigurationFile>            
</PropertyGroup> 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2019-06-03T16:47:57.863

我在更新我们所有的库时遇到了这个问题。这个链接帮助我解决了这个问题。[https://www.devexpress.com/Support/Center/Question/Details/Q554890/the-could-not-load-file-or-assembly-dotnetopenauth-core-version-4-0-0-0-error-消息是](https://www.devexpress.com/Support/Center/Question/Details/Q554890/the-could-not-load-file-or-assembly-dotnetopenauth-core-version-4-0-0-0-error-message-is).

特别是我将这些绑定重定向添加到我的 web.config 文件中。

```
 <dependentAssembly>
    <assemblyIdentity name="DotNetOpenAuth.Core" publicKeyToken="2780CCD10D57B246" culture="neutral" />
    <bindingRedirect oldVersion="1.0.0.0-4.1.0.0" newVersion="4.3.0.0" />
  </dependentAssembly>
  <dependentAssembly>
    <assemblyIdentity name="DotNetOpenAuth.AspNet" publicKeyToken="2780CCD10D57B246" culture="neutral" />
    <bindingRedirect oldVersion="1.0.0.0-4.1.0.0" newVersion="4.3.0.0" />
  </dependentAssembly> 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2015-10-06T13:31:02.983

只需从 wwwroot 中删除 BIN 文件夹，然后再次发布。

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2016-03-27T07:14:28.127

我能够通过删除 Microsoft.AspNet.Membership.OpenAuth 最终解决它

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2013-04-17T15:01:44.497

删除项目中所有位置的任何 Microsoft.Web.WebPages.OAuth 依赖项。

# asp.net-mvc - MVC 中的 Unity Framework 构造函数参数

> ID：13942654
> 
> 赞同：1
> 
> 时间：2012-12-18T22:37:25.430
> 
> 标签：asp.net-mvc, asp.net-mvc-3, dependency-injection, unity-container, ioc-container

我有一个 ASP.NET MVC3 站点，我希望能够使用不同类型的电子邮件服务，具体取决于站点的繁忙程度。

考虑以下：

```
public interface IEmailService
{
    void SendEmail(MailMessage mailMessage);
}

public class LocalEmailService : IEmailService
{
    public LocalEmailService()
    {
        // no setup required
    }

    public void SendEmail(MailMessage mailMessage)
    {
        // send email via local smtp server, write it to a text file, whatever
    }
}

public class BetterEmailService : IEmailService
{
    public BetterEmailService (string smtpServer, string portNumber, string username, string password)
    {
        // initialize the object with the parameters
    }

    public void SendEmail(MailMessage mailMessage)
    {
        //actually send the email
    }
} 
```

虽然网站正在开发中，但我所有的控制器都将通过 LocalEmailService 发送电子邮件；当网站投入生产时，他们将使用 BetterEmailService。

我的问题是双重的：

1) 我究竟如何传递 BetterEmailService 构造函数参数？是这样的吗（来自~/Bootstrapper.cs）：

```
 private static IUnityContainer BuildUnityContainer()
    {
        var container = new UnityContainer();
        container.RegisterType<IEmailService, BetterEmailService>("server name", "port", "username", "password");       

        return container;
    } 
```

2) 有没有更好的方法来做到这一点 - 即将这些密钥放在 web.config 或其他配置文件中，这样网站就不需要重新编译来切换它正在使用的电子邮件服务？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T23:01:09.070

由于在开发和生产之间切换是部署“事情”，我会在 web.config 中放置一个标志并按如下方式进行注册：

```
if (ConfigurationManager.AppSettings["flag"] == "true")
{
    container.RegisterType<IEmailService, BetterEmailService>();
}
else
{
    container.RegisterType<IEmailService, LocalEmailService>();
} 
```

> 1) 我究竟如何传递 BetterEmailService 构造函数参数？

您可以`InjectionFactory`使用创建类型的委托注册一个：

```
container.Register<IEmailService>(new InjectionFactory(c => 
    return new BetterEmailService(
        "server name", "port", "username", "password"))); 
```

# c# - Visual Studio 拦截 F1 帮助命令

> ID：13942657
> 
> 赞同：11
> 
> 时间：2012-12-18T22:37:36.207
> 
> 标签：c#, visual-studio, visual-studio-2012, visual-studio-addins, visual-studio-extensions

我希望编写一个 Visual Studio 插件，它可以`F1`在类或类型上调用帮助时拦截默认的在线帮助命令并获取 MSDN 库 URL。

例如，假设我将光标放在关键字字符串上并按下`F1`它通常会自动打开浏览器并导航到字符串引用类型的帮助文档。我想在它到达浏览器之前获取传递给浏览器的 URL。

是否可以编写一个可以拦截默认 F1 帮助命令的 Visual Studio 插件/扩展？

如果上面可以做任何关于从哪里开始的指针？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-12-19T00:24:18.743

大约 10 年前，当我在 Microsoft 工作时，我在 Visual Studio 2005 中编写了原始“在线 F1”功能的规范。所以我的知识有点权威，但也可能已经过时了。;-)

您无法更改 Visual Studio 正在使用的 URL（至少我不知道如何更改它），但您可以简单地编写另一个窃取 F1 键绑定的加载项，使用与默认相同的帮助上下文F1 处理程序执行，并将用户定向到您自己的 URL 或应用程序。

首先，关于 Online F1 的工作原理的一些信息：

1.  Visual Studio IDE 的组件将关键字推送到“F1 帮助上下文”中，这是一个包含有关用户正在做什么的信息的属性包：例如代码编辑器中的当前选择、正在编辑的文件类型、正在编辑的项目类型等.

2.  当用户按下 F1 时，IDE 会将帮助上下文打包到 URL 中并打开指向 MSDN 的浏览器。

Here's a sample URL, in this case when pressing F1 in the VS2012 HTML editor when the CSS property "width" was selected

```
msdn.microsoft.com/query/dev11.query?
    appId=Dev11IDEF1&
    l=EN-US&
    k=k(width);
        k(vs.csseditor);
        k(TargetFrameworkMoniker-.NETFramework,Version%3Dv4.0);
        k(DevLang-CSS)&
    rd=true 
```

上面的“k”参数包含了 Visual Studio 中的帮助上下文。帮助上下文包含“关键字”（文本字符串）和“属性”（名称/值对），Visual Studio 中的各种窗口使用它们来告诉 IDE 用户现在正在做什么。

CSS 编辑器推送了两个关键字：我选择的“宽度”和 MSDN 可以用作“后备”的“vs.csseditor”，例如，如果在 MSDN 上找不到我的选择。

还有一些上下文过滤属性：

```
TargetFrameworkMoniker = NETFramework,Version=v4.0
DevLang=CSS 
```

这些确保 F1 为正确的语言或技术加载页面，在本例中为 CSS。（另一个过滤器是 .NET 4.0，因为我加载的项目是针对 .NET 4.0）

请注意，上下文是有序的。“width”关键字比它下面的关键字更重要。

MSDN 上的实际帮助内容具有元数据（由编写文档的团队手动设置），其中包含与该页面关联的关键字和名称/值上下文属性。例如，MSDN 上的[CSS 宽度属性文档](http://msdn.microsoft.com/en-us/library/ie/ms531183.aspx)，当它存储在 MSDN 服务器上时，有一个与之关联的关键字列表（在本例中：“width”）和一个上下文属性列表（在本例中：“DevLang=CSS ”）。页面可以有多个关键字（例如“System.String”、“String”）和多个上下文属性（例如“DevLang=C#”、“DevLang=VB”等）。

当关键字列表到达 MSDN Online F1 服务时，算法是这样的，但需要注意的是它在过去几年中可能发生了变化：

1.  取第一个关键字
2.  查找与该关键字匹配的所有页面
3.  排除所有与上下文属性名称（例如“DevLang”）匹配但值不匹配的页面。例如，这将排除[Control.Width](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.width.aspx)页面，因为它将被标记为“DevLang=C#”、“DevLang=VB”。但它不会排除没有 DevLang 属性的页面。
4.  如果没有结果，但还有更多关键字，请从 #1 重新开始，使用下一个关键字（按顺序），除非您的关键字用完。如果没有关键字，请执行“备份”操作，这可能会返回 MSDN 搜索结果列表，可能会显示“找不到页面”或其他一些解决方案。
5.  对剩余的结果进行排名。我不记得确切的排名算法，从那以后它可能已经改变了，但我相信一般的想法是首先显示匹配更多属性的页面，然后首先显示更受欢迎的匹配项。
6.  在浏览器中显示最上面的结果

下面是 Visual Studio 加载项如何实现的代码示例：

1.  接管F1键绑定
2.  按下 F1 时，获取帮助上下文并将其转换为一组名称=值对
3.  将该组名称=值对传递到一些外部代码中，以对 F1 请求执行某些操作。

我将省略所有 Visual Studio 加载项样板代码——如果您也需要，Google 中应该有很多示例。

```
using System;
using Extensibility;
using EnvDTE;
using EnvDTE80;
using Microsoft.VisualStudio.CommandBars;
using System.Resources;
using System.Reflection;
using System.Globalization;
using System.Collections;
using System.Collections.Generic;
using System.Text;

namespace ReplaceF1
{
    /// <summary>The object for implementing an Add-in.</summary>
    /// <seealso class='IDTExtensibility2' />
    public class Connect : IDTExtensibility2, IDTCommandTarget
    {
        /// <summary>Implements the constructor for the Add-in object. Place your initialization code within this method.</summary>
        public Connect()
        {
        }

        MsdnExplorer.MainWindow Explorer = new MsdnExplorer.MainWindow();

        /// <summary>Implements the OnConnection method of the IDTExtensibility2 interface. Receives notification that the Add-in is being loaded.</summary>
        /// <param term='application'>Root object of the host application.</param>
        /// <param term='connectMode'>Describes how the Add-in is being loaded.</param>
        /// <param term='addInInst'>Object representing this Add-in.</param>
        /// <seealso class='IDTExtensibility2' />
        public void OnConnection(object application, ext_ConnectMode connectMode, object addInInst, ref Array custom)
        {
            _applicationObject = (DTE2)application;
            _addInInstance = (AddIn)addInInst;
            if(connectMode == ext_ConnectMode.ext_cm_UISetup)
            {
                object []contextGUIDS = new object[] { };
                Commands2 commands = (Commands2)_applicationObject.Commands;
                string toolsMenuName;

                try
                {
                    // If you would like to move the command to a different menu, change the word "Help" to the 
                    //  English version of the menu. This code will take the culture, append on the name of the menu
                    //  then add the command to that menu. You can find a list of all the top-level menus in the file
                    //  CommandBar.resx.
                    ResourceManager resourceManager = new ResourceManager("ReplaceF1.CommandBar", Assembly.GetExecutingAssembly());
                    CultureInfo cultureInfo = new System.Globalization.CultureInfo(_applicationObject.LocaleID);
                    string resourceName = String.Concat(cultureInfo.TwoLetterISOLanguageName, "Help");
                    toolsMenuName = resourceManager.GetString(resourceName);
                }
                catch
                {
                    //We tried to find a localized version of the word Tools, but one was not found.
                    //  Default to the en-US word, which may work for the current culture.
                    toolsMenuName = "Help";
                }

                //Place the command on the tools menu.
                //Find the MenuBar command bar, which is the top-level command bar holding all the main menu items:
                Microsoft.VisualStudio.CommandBars.CommandBar menuBarCommandBar = ((Microsoft.VisualStudio.CommandBars.CommandBars)_applicationObject.CommandBars)["MenuBar"];

                //Find the Tools command bar on the MenuBar command bar:
                CommandBarControl toolsControl = menuBarCommandBar.Controls[toolsMenuName];
                CommandBarPopup toolsPopup = (CommandBarPopup)toolsControl;

                //This try/catch block can be duplicated if you wish to add multiple commands to be handled by your Add-in,
                //  just make sure you also update the QueryStatus/Exec method to include the new command names.
                try
                {
                    //Add a command to the Commands collection:
                    Command command = commands.AddNamedCommand2(_addInInstance, 
                        "ReplaceF1", 
                        "MSDN Advanced F1", 
                        "Brings up context-sensitive Help via the MSDN Add-in", 
                        true, 
                        59, 
                        ref contextGUIDS, 
                        (int)vsCommandStatus.vsCommandStatusSupported+(int)vsCommandStatus.vsCommandStatusEnabled, 
                        (int)vsCommandStyle.vsCommandStylePictAndText, 
                        vsCommandControlType.vsCommandControlTypeButton);
                    command.Bindings = new object[] { "Global::F1" };
                }
                catch(System.ArgumentException)
                {
                    //If we are here, then the exception is probably because a command with that name
                    //  already exists. If so there is no need to recreate the command and we can 
                    //  safely ignore the exception.
                }
            }
        }

        /// <summary>Implements the OnDisconnection method of the IDTExtensibility2 interface. Receives notification that the Add-in is being unloaded.</summary>
        /// <param term='disconnectMode'>Describes how the Add-in is being unloaded.</param>
        /// <param term='custom'>Array of parameters that are host application specific.</param>
        /// <seealso class='IDTExtensibility2' />
        public void OnDisconnection(ext_DisconnectMode disconnectMode, ref Array custom)
        {
        }

        /// <summary>Implements the OnAddInsUpdate method of the IDTExtensibility2 interface. Receives notification when the collection of Add-ins has changed.</summary>
        /// <param term='custom'>Array of parameters that are host application specific.</param>
        /// <seealso class='IDTExtensibility2' />       
        public void OnAddInsUpdate(ref Array custom)
        {
        }

        /// <summary>Implements the OnStartupComplete method of the IDTExtensibility2 interface. Receives notification that the host application has completed loading.</summary>
        /// <param term='custom'>Array of parameters that are host application specific.</param>
        /// <seealso class='IDTExtensibility2' />
        public void OnStartupComplete(ref Array custom)
        {
        }

        /// <summary>Implements the OnBeginShutdown method of the IDTExtensibility2 interface. Receives notification that the host application is being unloaded.</summary>
        /// <param term='custom'>Array of parameters that are host application specific.</param>
        /// <seealso class='IDTExtensibility2' />
        public void OnBeginShutdown(ref Array custom)
        {
        }

        /// <summary>Implements the QueryStatus method of the IDTCommandTarget interface. This is called when the command's availability is updated</summary>
        /// <param term='commandName'>The name of the command to determine state for.</param>
        /// <param term='neededText'>Text that is needed for the command.</param>
        /// <param term='status'>The state of the command in the user interface.</param>
        /// <param term='commandText'>Text requested by the neededText parameter.</param>
        /// <seealso class='Exec' />
        public void QueryStatus(string commandName, vsCommandStatusTextWanted neededText, ref vsCommandStatus status, ref object commandText)
        {
            if(neededText == vsCommandStatusTextWanted.vsCommandStatusTextWantedNone)
            {
                if(commandName == "ReplaceF1.Connect.ReplaceF1")
                {
                    status = (vsCommandStatus)vsCommandStatus.vsCommandStatusSupported|vsCommandStatus.vsCommandStatusEnabled;
                    return;
                }
            }
        }

        /// <summary>Implements the Exec method of the IDTCommandTarget interface. This is called when the command is invoked.</summary>
        /// <param term='commandName'>The name of the command to execute.</param>
        /// <param term='executeOption'>Describes how the command should be run.</param>
        /// <param term='varIn'>Parameters passed from the caller to the command handler.</param>
        /// <param term='varOut'>Parameters passed from the command handler to the caller.</param>
        /// <param term='handled'>Informs the caller if the command was handled or not.</param>
        /// <seealso class='Exec' />
        public void Exec(string commandName, vsCommandExecOption executeOption, ref object varIn, ref object varOut, ref bool handled)
        {
            if(executeOption == vsCommandExecOption.vsCommandExecOptionDoDefault)
            {
                if (commandName == "ReplaceF1.Connect.ReplaceF1")
                {
                    // Get a reference to Solution Explorer.
                    Window activeWindow = _applicationObject.ActiveWindow;

                    ContextAttributes contextAttributes = activeWindow.DTE.ContextAttributes;
                    contextAttributes.Refresh();

                    List<string> attributes = new List<string>();
                    try
                    {
                        ContextAttributes highPri = contextAttributes == null ? null : contextAttributes.HighPriorityAttributes;
                        highPri.Refresh();
                        if (highPri != null)
                        {
                            foreach (ContextAttribute CA in highPri)
                            {
                                List<string> values = new List<string>();
                                foreach (string value in (ICollection)CA.Values)
                                {
                                    values.Add(value);
                                }
                                string attribute = CA.Name + "=" + String.Join(";", values.ToArray());
                                attributes.Add(CA.Name + "=");
                            }
                        }
                    }
                    catch (System.Runtime.InteropServices.COMException e)
                    {
                        // ignore this exception-- means there's no High Pri values here
                        string x = e.Message;
                    }
                    catch (System.Reflection.TargetInvocationException e)
                    {
                        // ignore this exception-- means there's no High Pri values here
                        string x = e.Message;
                    }
                    catch (System.Exception e)
                    {
                        System.Windows.Forms.MessageBox.Show(e.Message);
                        // ignore this exception-- means there's no High Pri values here
                        string x = e.Message;
                    }

                    // fetch context attributes that are not high-priority
                    foreach (ContextAttribute CA in contextAttributes)
                    {
                        List<string> values = new List<string>();
                        foreach (string value in (ICollection)CA.Values)
                        {
                            values.Add (value);
                        }
                        string attribute = CA.Name + "=" + String.Join(";", values.ToArray());
                        attributes.Add (attribute);
                    }

                    // Replace this call with whatever you want to do with the help context info 
                    HelpHandler.HandleF1 (attributes);
                }
            }
        }
        private DTE2 _applicationObject;
        private AddIn _addInInstance;
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-19T02:22:20.977

所有这些都非常令人兴奋但可能过度设计？我有一个像大多数人一样的可编程鼠标。我已经设置了一个要搜索的按钮。即点击单词和浏览器在最喜欢的搜索引擎中打开该单词。通常 MSDN 帮助在该列表中。AS Is SO 链接。我喜欢有效而简单的灵魂 :-)

# php - CakePHP Auth 无盐登录

> ID：13942658
> 
> 赞同：1
> 
> 时间：2012-12-18T22:37:45.180
> 
> 标签：php, cakephp, authentication, sha1

我正在导入一个旧数据库以与 cakephp 平台一起使用，而以前的用户表没有任何形式的加盐密码，它只是在它们上使用了普通的 SHA1。

我可以在 CakePHP 上注册帐户，并且它们以普通的 SHA1 存储（这就是我想要的方式），但我无法成功登录帐户。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T01:30:38.007

只需将哈希设置为 null Configure::write('Security.hash', null); 应该这样做。

# visual-studio-2008 - 如何删除激活上下文生成失败-依赖程序集-Microsoft.VC90.DebugCRT

> ID：13942661
> 
> 赞同：3
> 
> 时间：2012-12-18T22:37:57.267
> 
> 标签：visual-studio-2008, dll

我对基于 Windows 的开发非常陌生 - 事实上这是我的第一个项目。

我有一个基于 Windows 的项目，它使用 Visual Studio 2008 编译成 dll 文件。我想删除对 VS2008 的依赖，并通过我们工作中的 Makefile 构建系统对其进行编译。编译工作。

但是，当我运行生成的 dll（我的意思是运行加载生成的 dll 的测试应用程序）时，我收到一个错误 - “应用程序无法正确启动 - 0xc0150002）”我检查了事件日志 - 我看到了提到的消息在这篇文章的标题中。

谷歌搜索说 - 1）我应该重新启动机器 - 没有工作 2）在我运行 dll 的机器上安装 VS2008 - 这不是一个可行的选择 3）加载 dll 的应用程序（这只是一个测试应用程序) 也通过 VS2008 编译 - 也应该通过构建系统编译。

我已经检查过一切都是 32 位的。

所以我的问题是 - 是否有我缺少处理此依赖程序集错误的标志？我问的原因是——以前的 dll（通过 VS2008 构建的）可以毫无问题地运行——因此我认为我可能缺少一些标志/编译选项。

对不起，模糊的新手问题。如果有人能指出我要阅读的资源以获取有关此的更多详细信息，我什至将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-02T09:25:10.723

VS2008解决方案是否可以设置为“调试”模式而不是“发布”模式，所以当你构建DLL时，你得到了调试版本，因此要求调试依赖。尝试在 VS2008 中设置解决方案以构建发布版本，并查看该 DLL 是否给出相同的错误。

# jquery - 骨干分页器没有对我的收藏进行分页

> ID：13942664
> 
> 赞同：3
> 
> 时间：2012-12-18T22:38:08.393
> 
> 标签：jquery, jquery-ui, backbone.js, backbone.js-collections, backbone-paginator

```
define([
  'underscore',
  'backbone',
  'models/shared_object',
  'backbone_paginate'
], function(_, Backbone, Shared_Object){
   "use strict";
  var myCollection= Backbone.Collection.extend({
      initialize: function(option) {
          Backbone.Pagination.enable(this,{ipp:2,fetchOptions:{add:true}});
      },

   model: Shared_Object,
      baseUrl: function() {
          return location.protocol + '//' + location.host+'/address';
      },

    parse:function(dat){
      return dat.items;
    }
  });
  return new myCollection();
}); 
```

我有这个集合，我试图以这样的方式对它进行分页，以便每次调用只获取 2 个项目。如您所见，我有 ipp:2 将每页设置为每页 2 个项目。不过，我不明白为什么它会获取我收藏的所有项目。我的 Parse() 函数有问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-26T23:51:06.257

如上所述：

> 这听起来像是服务器问题，而不是 Backbone 问题。
> 
> 有两件事要看：
> 
> 1.  哪些参数被发送到服务器并且是ipp？
>     
>     
> 2.  检查服务器是否确实收到了“ipp”，并且它是否在做它应该做的事情，以限制发送回客户端的项目。

# actionscript-3 - 是否可以使用 Stage 3D 硬件加速来加速更多 Google 地图的 Flash？

> ID：13942667
> 
> 赞同：0
> 
> 时间：2012-12-18T22:38:32.643
> 
> 标签：actionscript-3, flash, apache-flex, air, flex4.5

我正在使用用于 Flash 的 Google Flash API，到目前为止它的效果非常好。

无论如何，我希望使用 Stage 3D 硬件加速来提高它的绘图性能。

*   是否可以使用 Stage 3D 和 Google Maps API for Flash 强制硬件加速？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-19T03:19:25.270

无法对任何现有内容强制 Stage3D 加速。

需要直接使用 Stage3D API 或在框架之上运行专门为 GPU 构建应用程序。几何由一系列顶点定义的三角形组成，这些顶点本质上是着色的，并由用 AS3 的着色器汇编语言 AGAL 编写的着色器组装。矢量内容无法在 GPU 上渲染，一切都是基于位图的。

这是一篇关于如何实现 Stage3D 的精彩文章：http: [//www.adobe.com/devnet/flashplayer/articles/how-stage3d-works.html](http://www.adobe.com/devnet/flashplayer/articles/how-stage3d-works.html)

同样正如 RIAstar 所提到的，Google maps Flash API 已被弃用。Mapquest 有一个可能值得一试的 Flash API。我不确定性能比较，因为它也不是 Stage3D 应用程序。

[http://developer.mapquest.com/web/products/featured/as3-flex-flash](http://developer.mapquest.com/web/products/featured/as3-flex-flash)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-11T07:00:28.330

[YCanvas](https://github.com/jozefchutka/YCanvas)是一个用 ActionScript 3 编写的开源 2D 平铺渲染器库。它为渲染世界地图提供了高性能的解决方案。该库还包含基于 Starling 的 Stage3D (GPU) 加速实现。

[ApplicationMap](http://ycanvas.yoz.sk/maps/) - 带有 Feathers UI 的 YCanvasMap 实现（可用切片：ArcGIS Imagery、ArcGIS National Geographic、MapQuest、OpenStreetMap、MapBox、CloudMade、Bing Maps Imagery）

# php - 外部图像转灰度

> ID：13942668
> 
> 赞同：0
> 
> 时间：2012-12-18T22:38:34.100
> 
> 标签：php, jquery, html, grayscale, securityexception

我正在我的大学做一个小项目，我遇到了一个问题，我在横幅中将灰度应用于来自 Google 的 Picasa 服务器的外部加载图像。我尝试为任何加载的图像创建灰度画布，但是在尝试获取图像数据时，我可以看到安全错误。

我正在使用 jQuery、HTML、PHP 和 Ajax 语言。

你可以在这里找到整个项目： [谷歌代码项目](http://code.google.com/p/movable-banner-with-picasa/)

我尝试使用这个库： [$getImageData](http://www.maxnov.com/getimagedata/#download)

但我得到一个信息，我的请求无法处理。我还尝试了许多其他库和代码，但没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:48:31.430

您正在使用不是有效的跨域数据类型的“json”数据类型发出跨域请求。您应该得到相同的来源错误。您需要切换到 jsonp 数据类型。

```
jQuery('.container').ready(function() {
    jQuery.ajax({
        type: 'GET',
        dataType:'jsonp',
        url: 'https://picasaweb.google.com/data/feed/base/user/115131339234962778181/album/jsite?access=public&kind=photo&alt=json-in-script', 
```

请注意，我还更改了网址，不要错过更改，这很重要。

[https://developers.google.com/gdata/docs/json](https://developers.google.com/gdata/docs/json)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:02:39.070

当您将外部数据绘制到画布上时，它会被标记为已污染。污染会禁用您从画布中获取图像数据的能力。但是，您应该能够使用该[`.crossOrigin`属性更改该行为](http://blog.chromium.org/2011/07/using-cross-domain-images-in-webgl-and.html)

# apache-flex - 带有文本的 BorderContainer 未正确显示 buttonMode

> ID：13942681
> 
> 赞同：0
> 
> 时间：2012-12-18T22:39:53.027
> 
> 标签：apache-flex

在我的代码中，我有一个由数据提供者中的项目组成的列表。列表的 itemRenderer 由一个 BorderContainer 组成，其中包含文本。我正在模仿滚动列表上的一排按钮。我希望光标在经过“按钮”时变为手形光标，但指针仅在 BorderContainer 中未被文本覆盖的部分发生变化。

![BorderContainer 上的指针](../Images/3425c734a3f805cde2f86d946d556cb3.png) ![文本上的指针](../Images/b18abc3e93c3dc92cd6599f7effe0876.png)

我已将列表、BorderContainer 和文本的 buttonMode 设置为 true，那么为什么在传递文本时光标没有变化？

这是列表代码

```
<s:List id="listProject" width="100%" height="100%" horizontalScrollPolicy="off" allowMultipleSelection="false"
                        click="listProject_clickHandler(event)" itemRenderer="ProjectRenderer"
                        dataProvider="{listProjects}" creationComplete="listProject_creationCompleteHandler(event)" buttonMode="true"> 
```

这是渲染器

```
<?xml version="1.0" encoding="utf-8"?>
<s:ItemRenderer xmlns:fx="http://ns.adobe.com/mxml/2009" 
            xmlns:s="library://ns.adobe.com/flex/spark" 
            xmlns:mx="library://ns.adobe.com/flex/mx" 
            autoDrawBackground="true">

    <!--<s:Label text="{data.header}"/>-->
    <s:states>
        <s:State name="normal"/>
        <s:State name="hovered"/>
        <s:State name="selected"/>
    </s:states>

    <!--<s:Image source.normal="{data.image1}" source.hovered="{data.image2}"/>-->

    <s:BorderContainer width="200" height="50" backgroundColor="{data.color}"
                   borderColor.selected="#FFFFFF" borderVisible.normal="false"
                   borderVisible.selected="true" borderWeight.selected="4" borderStyle.selected="inset" buttonMode="true">
        <s:layout>
            <s:HorizontalLayout verticalAlign="middle" horizontalAlign="center"/>
        </s:layout>
        <mx:Text width="200" text="{data.header}" selectable="false"
                 color="#FFFFFF" fontSize="15" fontWeight="bold" leading="0" textAlign="center" buttonMode="true" useHandCursor="true"/>
    </s:BorderContainer>
</s:ItemRenderer> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T23:04:40.940

只需使用 Spark[标签](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/spark/components/Label.html)而不是 mx:Text 就可以了。

此外，您的代码中存在一些冗余。我冒昧地把它剪掉了一点：

```
<s:BorderContainer width="200" height="50" backgroundColor="{data.color}"
                   borderColor.selected="#FFFFFF" borderVisible.normal="false"
                   borderVisible.selected="true" borderWeight.selected="4"
                   borderStyle.selected="inset" buttonMode="true">

    <s:Label text="{data.label}" color="#FFFFFF" fontSize="15" fontWeight="bold"
             horizontalCenter="0" verticalCenter="0"/>
</s:BorderContainer> 
```

这也将解决悬停或选择时文本令人讨厌的跳跃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T07:37:07.777

只要您不需要与 mx:Text 交互，就可以将其父级的 mouseChildren 属性设置为 false。它将解决问题。这是一个简短的例子：

```
<s:ItemRenderer>
    <s:BorderContainer width="200" buttonMode="true" useHandCursor="true" mouseChildren="false">
        <mx:Text text="No many text" selectable="false" />                  
    </s:BorderContainer>
</s:ItemRenderer> 
```

# api - 自定义字段上的 Rally Lookback API 过滤器

> ID：13942684
> 
> 赞同：1
> 
> 时间：2012-12-18T22:40:13.777
> 
> 标签：api, rally, lookbackapi

我们正在使用看板，并且在 UserStories 上有一个名为 KanbanState 的自定义字段。我可以过滤此字段的回溯查询吗？（属性：'KanbanState' 值：'Accepted'）。或者我可以只过滤 ScheduleState 字段吗？看来我必须使用 ScheduleState，但想验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T23:33:54.660

您绝对可以使用 Lookback API 查询/过滤自定义字段。您只需在字段名称前加上“c_”即可。以下查询示例说明了对从 2012 年 9 月 19 日至今看板状态为“已接受”的所有用户故事快照的查询。

```
{ "_TypeHierarchy" : "HierarchicalRequirement",
  "_ValidFrom" : { "$gte" : "2012-09-19T00:00:00.000Z" },
  "c_KanbanState" : "Accepted"
} 
```

# python - 如何使用远程主机运行烧瓶和 mongoengine？

> ID：13942686
> 
> 赞同：2
> 
> 时间：2012-12-18T22:40:19.443
> 
> 标签：python, flask, mongoengine

我在这里遵循这个例子：

[http://docs.mongodb.org/manual/tutorial/write-a-tumblelog-application-with-flask-mongoengine/](http://docs.mongodb.org/manual/tutorial/write-a-tumblelog-application-with-flask-mongoengine/)

我的问题出在这里：

```
from flask import Flask
from flask.ext.mongoengine import MongoEngine

app = Flask(__name__)
app.config["MONGODB_DB"] = "my_tumble_log"
app.config["SECRET_KEY"] = "KeepThisS3cr3t"

db = MongoEngine(app)

if __name__ == '__main__':
    app.run() 
```

这假设 MONGODB_DB 在我的本地机器和默认端口上是“my_tumble_log”。如果我的 mongo 数据库位于具有不同端口的远程计算机上怎么办？我将如何修改示例以允许这样做？

我尝试在 MONGODB_DB app.config 之前添加一行：

```
app.config['MONGODB_CONNSTRING'] = "mongodb://myremotehost:myport" 
```

虽然一点效果都没有。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-19T08:44:47.553

可以使用以下配置设置：

```
MONGODB_DB
MONGODB_USERNAME
MONGODB_PASSWORD
MONGODB_HOST
MONGODB_PORT 
```

# java - 检索数据并以树形结构返回

> ID：13942689
> 
> 赞同：0
> 
> 时间：2012-12-18T22:40:55.663
> 
> 标签：java, spring, hibernate

我在coldfusion中有一些代码，它使用基本的for循环检索我的组织结构

**例子：**

```
level1 = retrieveOrgs(1);
for loop level1
    <span>level1.description</span>
    level2 = retrieveOrgs(level1.orgId);
    for loop level2
        <span>level2.description</span>
        level3 = retrieveOrgs(level1.orgId);
        for loop level3
            ....
        end;
    end;
end; 
```

我正在使用 spring/hibernate 组合将 webapp 移动到 java。我想知道在 Java/Spring/Hibernate 中是否有“更好”的方法来做到这一点。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:46:41.137

定义一个如下所示的实体，您将拥有一个树形结构：

```
@Entity
public class Org {
    @OneToMany
    private Set<Org> childrenOrgs;
    ...
} 
```

# html - 获取运行 HTML5 游戏的域。Libgdx

> ID：13942692
> 
> 赞同：1
> 
> 时间：2012-12-18T22:41:08.200
> 
> 标签：html, libgdx

是否可以获取运行 HTML5 游戏的本地域/IP？框架是 Libgdx。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T13:09:43.860

要在 Libgdx 中接收本地域，可以使用`com.google.gwt.user.client.Window.Location`.

# python - 如何在不实际创建文件的情况下从变量或 http URL 获取文件对象？

> ID：13942694
> 
> 赞同：0
> 
> 时间：2012-12-18T22:41:32.980
> 
> 标签：python, google-app-engine, file-io, pypdf

我想使用 PyPDF 操作下载的 PDF，为此，我需要一个文件对象。

我使用 GAE 来托管我的 Python 应用程序，因此我实际上无法将文件写入磁盘。

有没有办法从 URL 或包含文件内容的变量中获取文件对象？

TIA。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T22:44:48.807

大多数工具（包括`urllib`）已经为您提供了一个类似文件的工具，但如果您需要真正的随机访问，那么您需要创建一个[`StringIO.StringIO`](http://docs.python.org/2/library/stringio.html)并将数据读入其中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T01:24:11.133

在 GAE 中，您可以使用 blobstore 读取、写入文件数据以及上传和下载文件。您可以使用文件 API：

例子 ：

```
_file = files.blobstore.create(mime_type=mimetype, _blobinfo_uploaded_filename='test')
with files.open(_file, 'a') as f :                                                      
    f.write(somedata)                                                         
files.finalize(_file) 
```

# python - 在 Python 中更新和清除字典

> ID：13942695
> 
> 赞同：1
> 
> 时间：2012-12-18T22:41:38.847
> 
> 标签：python, dictionary

所以我对Python中的字典有疑问。我想创建一个字典，其中将提示用户 2 个选项；更新字典或清除字典。首先让我向您展示我的代码：

```
def myStuff():
    food = {'Apple': 0, 'Banana': 0, 'Grapes': 0}
    choice = raw_input('Please pick an option:\n1) Update number of food I have\n2) Clear all\n>>')
    if choice == str(1):
        apple = int(raw_input('How many apples do you want to add?\n>>'))
        banana = int(raw_input('How many bananas do you want to add?\n>>'))
        grapes = int(raw_input('How many grapes do you want to add?\n>>'))
        print 'Updating...'
        food['Apple'] = apple
        food['Banana'] = banana
        food['Grapes'] = grapes
        print  food
    elif choice == str(2):
        food['Apple'] = 0
        food['Banana'] = 0
        food['Grapes'] = 0
        print food
    else:
        return False

myStuff() 
```

现在这是我想补充的：

1.用户不断更新字典的能力（也就是说如果有人输入10个苹果，字典将存储10个苹果，并再次提示用户输入他要输入的苹果数量来更新字典） . 我不太确定如何在其中实现循环。

2，用户在更新后可以清除他的字典的能力。例如：如果有人输入 10 个苹果，循环将再次询问用户是否要清除字典。

这有点像银行，有人存钱，如果账户里没有钱，就清空他们的账户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T23:08:17.877

1.  对于循环更新，也许尝试类似：

    ```
    for key in food:
        food[key] += int(raw_input('How many %s do you want to add?> ' % key) or 0) 
    ```

2.  您已经通过将值设置为零来清除字典。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:44:55.710

如果我理解正确 - 你想反复问这个问题吗？在这种情况下，您需要做的就是放置`while True:`并缩进您想要重复的代码块，它将永远循环下去。您可能希望将它从`raw_input`（仅`input`在 Python 3 中）放到`elif`- 之后，或者，如果您创建`food`了一个全局变量（这样每次调用它就不会重新初始化为 0 `myStuff()`），您可以这样做：

```
while True:
  myStuff() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T00:48:49.797

你可以这样做：

```
"""
in each loop check the fruit number to see if it is 0 or not.if it
is 0, then this means that you don't want to add fruit from the current 
type and skips to the nextFruit.Focus on the code and you realize the other parts.
"""    

import string

def myStuff():
    food = {'Apples': 0, 'Bananas': 0, 'Grapes': 0}
    choice = raw_input('Please pick an option:\n1) Update number of food I have\n2) Clear all\n>>')
    fruit = 0
    nextFruit = 'Apples'
    while True:
        if choice == str(1):
            fruit = int(raw_input('How many ' + str.lower(nextFruit) + ' do you want to add?\n>>'))
            if fruit == 0 and nextFruit == 'Apples':
                nextFruit = 'Bananas'
                continue
            elif fruit == 0 and nextFruit == 'Bananas':
                nextFruit = 'Grapes'
                continue
            elif fruit == 0 and nextFruit == 'Grapes':
                print 'Updating...'
                print  food
                choice = raw_input('Please pick an option:\n1) Update number of food I have\n2) Clear all\n>>')
            else:
                food[nextFruit] += fruit
        elif choice == str(2):
            food['Apples'] = 0
            food['Bananas'] = 0
            food['Grapes'] = 0
            print 'Updating...'
            print  food
            choice = raw_input('Please pick an option:\n1) Update number of food I have\n2) Clear all\n>>')
        else:
            print "You've entered a wrong number....try again please:"
            print
            choice = raw_input('Please pick an option:\n1) Update number of food I have\n2) Clear all\n>>') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T20:07:29.847

有了你正在做的事情，创建你自己的类可能会更好。对于您希望执行的所有不同操作，您还应该具有不同的功能。IE。更新、清除、添加

```
class Fruit:
    Apple = 0
    Banana = 0
    Grape = 0

    def __repr__(self):
         return "You have {self.Apple} apples, {self.Banana} bananas, and {self.Grape} grapes".format(**locals())

    def update(self):
       while 1:
         choice = raw_input('Please pick an option:\n1) Update number of food I have\n2) Clear all\n>>')
         if (int(choice) == 1):
            self.Add()
         elif (int(choice) == 2):
            self.Clear()
         else:
             print "Input not valid"

    def Add(self):
       self.Apple += int(raw_input('How many apples do you want to add?\n>>'))
       self.Banana += int(raw_input('How many bananas do you want to add?\n>>'))
       self.Grape += int(raw_input('How many grapes do you want to add?\n>>'))
       print self

    def Clear(self):
       self.Apple = 0
       self.Banana = 0
       self.Grape = 0
       print self

if __name__ == "__main__":
    fruit = Fruit()
    fruit.update() 
```

您还应该查看 using`try`和`except`语句，以确保在使用错误输入时程序不会崩溃。此外，您应该添加退出命令以退出程序，否则这将永远循环。例如。如果用户输入是“退出”，则有条件通知它并且`break`.

# python - 给定边界，找到区间

> ID：13942698
> 
> 赞同：11
> 
> 时间：2012-12-18T22:41:50.167
> 
> 标签：python, algorithm, python-3.x

有这样的清单

```
[207, 357, 470, 497, 537] 
```

其中每个数字表示一个区间的边界（`0`隐含在列表的开头），找出给定数字属于哪个区间的**pythonic方法是什么？**`n`

所以间隔是

```
0: (0, 207)
1: (208, 357)
2: (358, 497)
3: (498, 537) 
```

如果`n=0`，那么对应的区间是`0`，对于`n=360`，它是`2`。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-18T22:44:19.220

当然使用[`bisect`模块](http://docs.python.org/3/library/bisect.html)：

```
>>> import bisect
>>> lst = [207, 357, 470, 497, 537]
>>> bisect.bisect_left(lst, 0)
0
>>> bisect.bisect_left(lst, 360)
2 
```

该模块使用[二进制搜索](https://en.wikipedia.org/wiki/Binary_search_algorithm)，这需要一个排序的序列。使用这样的序列，您可以通过在第一个和最后一个之间的中间选择一个索引来将序列分成两半，以查看您需要的值是否在任何一半中。然后继续分割选定的一半，直到找到匹配的插入点。这使您可以在 O(log N) 时间内找到长度为 N 的序列的插入点，即非常快。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-06-11T10:36:24.913

使用`numpy`和[np.searchsorted](https://numpy.org/doc/stable/reference/generated/numpy.searchsorted.html)：

```
import numpy as np

intervals = [207, 357, 497, 537]
values = [0, 207, 300, 500, 9999]

np.searchsorted(intervals, values) 
```

这给出了：

```
>>> array([0, 0, 1, 3, 4]) 
```

（如果该值`207`原本打算属于区间`1`，`side='right'`则可以使用）

# java - 从扫描仪获取字符输入

> ID：13942701
> 
> 赞同：138
> 
> 时间：2012-12-18T22:42:20.907
> 
> 标签：java, input, char, java.util.scanner

我正在尝试找到一种`char`从键盘获取输入的方法。

我尝试使用：

```
Scanner reader = new Scanner(System.in);
char c = reader.nextChar(); 
```

这种方法不存在。

我尝试将`c`其作为`String`. 然而，它并不总是适用于所有情况，因为我从我的方法调用的另一个方法需要 a`char`作为输入。因此，我必须找到一种方法来明确地将 char 作为输入。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：179
> 
> 时间：2012-12-18T22:43:34.037

您可以从以下位置获取第一个字符`Scanner.next`：

```
char c = reader.next().charAt(0); 
```

要使用*一个*字符，您可以使用：

```
char c = reader.findInLine(".").charAt(0); 
```

要*严格*使用一个字符，您可以使用：

```
char c = reader.next(".").charAt(0); 
```

* * *

## 回答 #2

> 赞同：59
> 
> 时间：2015-01-18T08:42:26.737

设置扫描仪：

```
reader.useDelimiter(""); 
```

之后`reader.next()`将返回一个单字符串。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-12-18T22:43:38.900

没有从 Scanner 获取字符的 API 方法。您应该在返回的字符串上使用`scanner.next()`和调用`String.charAt(0)`方法获取字符串。

```
Scanner reader = new Scanner(System.in);
char c = reader.next().charAt(0); 
```

为了安全起见，您也可以先调用`trim()`字符串来删除任何空格。

```
Scanner reader = new Scanner(System.in);
char c = reader.next().trim().charAt(0); 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2012-12-18T23:15:24.670

有三种方法可以解决这个问题：

*   调用`next()`扫描仪，并提取字符串的第一个字符（例如`charAt(0)`） 如果您想将该行的其余部分作为字符读取，请遍历字符串中的剩余字符。其他答案有这个代码。

*   用于`setDelimiter("")`将分隔符设置为空字符串。这将导致`next()`标记为恰好是一个字符长的字符串。因此，您可以*反复*调用`next().charAt(0)`以迭代字符。然后，您可以将分隔符设置为其原始值并以正常方式继续扫描！

*   使用 Reader API 而不是 Scanner API。该`Reader.read()`方法提供从输入流中读取的单个字符。例如：

    ```
    Reader reader = new InputStreamReader(System.in);
    int ch = reader.read();
    if (ch != -1) {  // check for EOF
        // we have a character ...
    } 
    ```

* * *

当您通过 控制台从控制台读取时`System.in`，输入通常由操作系统缓冲，并且仅在用户键入 ENTER 时“释放”给应用程序。因此，如果您希望您的应用程序响应单个键盘敲击，这是行不通的。您需要执行一些特定于操作系统的本机代码来关闭或解决操作系统级别的控制台的行缓冲。

参考：

*   [如何从 Java 中的控制台读取单个字符（当用户键入时）？](https://stackoverflow.com/questions/1066318/how-to-read-a-single-char-from-the-console-in-java-as-the-user-types-it)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-11-17T22:54:59.260

您可以非常简单地解决“一次抓取键盘输入一个字符”的问题。通过使用它，不必全部使用 Scanner，也不必清除输入缓冲区作为副作用。

```
char c = (char)System.in.read(); 
```

如果您只需要与 C 语言“getChar()”函数相同的功能，那么这将非常有用。“System.in.read()”的最大优势是在您抓取每个字符后缓冲区不会被清除。因此，如果您仍然需要所有用户输入，您仍然可以从输入缓冲区中获取其余部分。该`"char c = scanner.next().charAt(0);"`方式确实抓住了字符，但会清除缓冲区。

```
// Java program to read character without using Scanner
public class Main
{
    public static void main(String[] args)
    {
        try {
            String input = "";
            // Grab the First char, also wait for user input if the buffer is empty.
            // Think of it as working just like getChar() does in C.
            char c = (char)System.in.read();
            while(c != '\n') {
                //<do your magic you need to do with the char here>
                input += c; // <my simple magic>

                //then grab the next char
                c = (char)System.in.read();
            }
            //print back out all the users input
            System.out.println(input);
        } catch (Exception e){
            System.out.println(e);
        }
    }
} 
```

希望这有帮助，祝你好运！PS对不起，我知道这是一篇较旧的帖子，但我希望我的回答能带来新的见解，并可以帮助其他也有这个问题的人。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-02-25T02:06:09.993

这实际上不起作用：

```
char c = reader.next().charAt(0); 
```

在这个问题中有一些很好的解释和参考： [为什么 Scanner 类没有 nextChar 方法？](https://stackoverflow.com/questions/18746185/why-doesnt-the-scanner-class-have-a-nextchar-method) “扫描器使用分隔符模式将其输入分解为标记”，这是非常开放的。例如当使用这个

```
c = lineScanner.next().charAt(0); 
```

对于这行输入“（1 + 9）/（3 - 1）+ 6 - 2”，对next的调用返回“（1”，c将被设置为'（'，你最终会失去' 1' 在下一次调用 next()

通常，当您想获得一个字符时，您想忽略空格。这对我有用：

```
c = lineScanner.findInLine("[^\\s]").charAt(0); 
```

参考： [正则表达式匹配一个不是空格的字符](https://stackoverflow.com/questions/1181271/regex-to-match-a-single-character-that-is-anything-but-a-space)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-01-14T16:19:08.497

在 Scanner 类中输入字符的最佳方法是：

```
Scanner sca=new Scanner(System.in);
System.out.println("enter a character");
char ch=sca.next().charAt(0); 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-06-16T05:59:07.130

您应该使用自定义输入阅读器来获得更快的结果，而不是从读取字符串中提取第一个字符。自定义 ScanReader 和说明的链接：[https ://gist.github.com/nik1010/5a90fa43399c539bb817069a14c3c5a8](https://gist.github.com/nik1010/5a90fa43399c539bb817069a14c3c5a8)

用于扫描 Char 的代码：

```
BufferedInputStream br=new BufferedInputStream(System.in);
char a= (char)br.read(); 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2017-10-16T13:51:50.057

```
import java.util.Scanner;

public class Test { 
    public static void main(String[] args) {

        Scanner reader = new Scanner(System.in);
        char c = reader.next(".").charAt(0);

    }
} 
```

只得到一个字符`char c = reader.next(".").charAt(0);`

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2019-04-24T06:19:17.843

有两种方法，您可以只取***一个***字符，也可以只***取***一个字符。当您准确使用时，无论您输入多少个字符，阅读器都只会读取第一个字符。

例如：

```
import java.util.Scanner;  

public class ReaderExample {  

    public static void main(String[] args) {  

        try {  

        Scanner reader = new Scanner(System.in);

        char c = reader.findInLine(".").charAt(0);

            reader.close();  

            System.out.print(c);

        } catch (Exception ex) {  

            System.out.println(ex.getMessage());  

        }

    }  

} 
```

当您输入一组字符时，例如“abcd”，读者将只考虑第一个字符，即字母“a”

但是当你严格使用时，输入应该只有一个字符。如果输入多于一个字符，则阅读器不会接受输入

```
import java.util.Scanner;  

public class ReaderExample {  

    public static void main(String[] args) {  

        try {  

        Scanner reader = new Scanner(System.in);

        char c = reader.next(".").charAt(0);

            reader.close();  

            System.out.print(c);

        } catch (Exception ex) {  

            System.out.println(ex.getMessage());  

        }

    }  

} 
```

假设您输入“abcd”，没有输入，变量**c**将具有 Null 值。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-10-19T07:10:44.333

尝试以下。

```
Scanner reader = new Scanner(System.in);
char c = reader.next().charAt(0); 
```

这将从键盘获取一个字符。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2015-02-15T14:24:24.483

```
import java.util.Scanner;

public class userInput{
    public static void main(String[] args){
        // Creating your scanner with name kb as for keyBoard
        Scanner kb = new Scanner(System.in);

        String name;
        int age;
        char bloodGroup;
        float height;

        // Accepting Inputs from user
        System.out.println("Enter Your Name");
        name = kb.nextLine(); // for entire line of String including spaces
        System.out.println("Enter Your Age");
        age = kb.nextInt(); // for taking Int
        System.out.println("Enter Your BloodGroup : A/B/O only");
        bloodGroup  = kb.next().charAt(0); // For character at position 0
        System.out.println("Enter Your Height in Meters");
        height = kb.nextFloat(); // for taking Float value

        // closing your scanner object
        kb.close();

        // Outputting All
        System.out.println("Name : " +name);
        System.out.println("Age : " +age);
        System.out.println("BloodGroup : " +bloodGroup);
        System.out.println("Height : " +height+" m");

    }
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-04-19T19:28:39.490

您应该使用scanner.next() 获取字符串并在返回的字符串上调用String.charAt(0) 方法。
**示例：**

```
 import java.util.Scanner;

    public class InputC{

            public static void main(String[] args) {
                // TODO Auto-generated method stub
                   // Declare the object and initialize with
                   // predefined standard input object
                    Scanner scanner = new Scanner(System.in);
                    System.out.println("Enter a character: ");
                    // Character input
                    char c = scanner.next().charAt(0);
                    // Print the read value
                    System.out.println("You have entered: "+c);
            }

        } 
```

输出

```
Enter a character: 
a
You have entered: a 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-01-31T18:51:48.813

你只需要写这个来获取 char 类型的值。

```
char c = reader.next().charAt(0); 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-09-14T14:28:28.647

试试这个： char c=S.nextLine().charAt(0);

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-01-29T05:58:01.430

从用户输入中读取字符的简单解决方案。读取一个字符串。然后在 String 上使用 charAt(0)

```
Scanner reader = new Scanner(System.in);
String str = reader.next();
char c = str.charAt(0); 
```

而已。

* * *

## 回答 #17

> 赞同：-1
> 
> 时间：2018-04-19T17:32:31.810

```
// Use a BufferedReader to read characters from the console.
import java.io.*;
class BRRead {
public static void main(String args[]) throws IOException
{
char c;
BufferedReader br = new
BufferedReader(new InputStreamReader(System.in));
System.out.println("Enter characters, 'q' to quit.");
// read characters
do {
c = (char) br.read();
System.out.println(c);
} while(c != 'q');
}
} 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2016-12-15T03:05:45.083

就用...

```
Scanner keyboard = new Scanner(System.in);
char c = keyboard.next().charAt(0); 
```

这将获取下一个输入的第一个字符。

* * *

## 回答 #19

> 赞同：-2
> 
> 时间：2014-12-22T09:50:10.913

```
import java.io.*;

class abc // enter class name (here abc is class name)
{
    public static void main(String arg[])
    throws IOException // can also use Exception
    {
        BufferedReader z =
            new BufferedReader(new InputStreamReader(System.in));

        char ch = (char) z.read();
    } // PSVM
} // class 
```

* * *

## 回答 #20

> 赞同：-2
> 
> 时间：2016-11-23T02:52:44.930

```
Scanner key = new Scanner(System.in);
//shortcut way 
char firstChar=key.next().charAt(0);  
//how it works;
/*key.next() takes a String as input then,
charAt method is applied on that input (String)
with a parameter of type int (position) that you give to get      
that char at that position.
You can simply read it out as: 
the char at position/index 0 from the input String
(through the Scanner object key) is stored in var. firstChar (type char) */

//you can also do it in a bit elabortive manner to understand how it exactly works
String input=key.next();  // you can also write key.nextLine to take a String with spaces also
char firstChar=input.charAt(0);
char charAtAnyPos= input.charAt(pos);  // in pos you enter that index from where you want to get the char from 
```

顺便说一句，您不能直接将 char 作为输入。正如您在上面看到的，首先获取一个字符串，然后获取 charAt(0); 找到并存储

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2016-08-17T20:30:43.140

尝试这个

```
Scanner scanner=new Scanner(System.in);
String s=scanner.next();
char c=s.charAt(0); 
```

* * *

## 回答 #22

> 赞同：-3
> 
> 时间：2016-03-26T20:15:03.160

您可以使用类型转换：

```
Scanner sc= new Scanner(System.in);
char a=(char) sc.next(); 
```

这样，由于函数“next()”，您将在 String 中输入，但由于括号中提到的“char”，它将被转换为字符。

这种通过在括号中提及目标数据类型来转换数据类型的方法称为类型转换。它对我有用，我希望它对你有用:)

* * *

## 回答 #23

> 赞同：-4
> 
> 时间：2016-06-10T20:56:16.810

要查找给定字符串中字符的索引，可以使用以下代码：

```
package stringmethodindexof;

import java.util.Scanner;
import javax.swing.JOptionPane;

/**
 *
 * @author ASUS//VERY VERY IMPORTANT
 */
public class StringMethodIndexOf {

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {
        // TODO code application logic here
        String email;
        String any;
        //char any;

//any=JOptionPane.showInputDialog(null,"Enter any character or string to find out its INDEX NUMBER").charAt(0);       
//THE AVOBE LINE IS FOR CHARACTER INPUT LOL
//System.out.println("Enter any character or string to find out its INDEX NUMBER");
       //Scanner r=new Scanner(System.in);
      // any=r.nextChar();
        email = JOptionPane.showInputDialog(null,"Enter any string or anything you want:");
         any=JOptionPane.showInputDialog(null,"Enter any character or string to find out its INDEX NUMBER");
        int result;
        result=email.indexOf(any);
        JOptionPane.showMessageDialog(null, result);

    }

} 
```

* * *

## 回答 #24

> 赞同：-8
> 
> 时间：2014-01-06T01:40:20.200

最简单的方法是，首先将变量更改为字符串并将输入作为字符串接受。然后，您可以使用 if-else 或 switch 语句根据输入变量进行控制，如下所示。

```
Scanner reader = new Scanner(System.in);

String c = reader.nextLine();
switch (c) {
    case "a":
        <your code here>
        break;
    case "b":
        <your code here>
        break;
    default: 
        <your code here>
} 
```

# asp.net-mvc-3 - 为什么 Visual Studio 找不到 System.Web.Mvc.resources.dll？

> ID：13942703
> 
> 赞同：8
> 
> 时间：2012-12-18T22:42:54.077
> 
> 标签：asp.net-mvc-3, visual-studio-2010, razor, tfs, visual-studio-2012

我在 Visual Studio 中不断收到这 11 个错误：

```
Error   456 Could not copy the file "_bin_deployableAssemblies\de\System.Web.Mvc.resources.dll" because it was not found.   ViMuDat
Error   457 Could not copy the file "_bin_deployableAssemblies\de\WebMatrix.WebData.resources.dll" because it was not found.    ViMuDat
Error   458 Could not copy the file "_bin_deployableAssemblies\de\WebMatrix.Data.resources.dll" because it was not found.   ViMuDat
Error   459 Could not copy the file "_bin_deployableAssemblies\de\System.Web.WebPages.resources.dll" because it was not found.  ViMuDat
Error   460 Could not copy the file "_bin_deployableAssemblies\de\System.Web.WebPages.Razor.resources.dll" because it was not found.    ViMuDat
Error   461 Could not copy the file "_bin_deployableAssemblies\de\System.Web.WebPages.Deployment.resources.dll" because it was not found.   ViMuDat
Error   462 Could not copy the file "_bin_deployableAssemblies\de\System.Web.WebPages.Administration.resources.dll" because it was not found.   ViMuDat
Error   463 Could not copy the file "_bin_deployableAssemblies\de\System.Web.Razor.resources.dll" because it was not found. ViMuDat
Error   464 Could not copy the file "_bin_deployableAssemblies\de\System.Web.Helpers.resources.dll" because it was not found.   ViMuDat
Error   465 Could not copy the file "_bin_deployableAssemblies\de\NuGet.Core.resources.dll" because it was not found.   ViMuDat
Error   466 Could not copy the file "_bin_deployableAssemblies\de\Microsoft.Web.Infrastructure.resources.dll" because it was not found. ViMuDat 
```

我尝试构建一个使用 Visual Studio 2010 开发的项目，但我使用的是 Visual Studio 2012。如果我构建它两次，它可以正常工作。

**我该如何解决？**

我发现[Bin Deploying ASP.NET MVC 3](http://haacked.com/archive/2011/05/25/bin-deploying-asp-net-mvc-3.aspx)和[_bin_deployableAssemblies 和 MSBuild](http://thedevstop.wordpress.com/2012/03/01/_bin_deployableassemblies-and-msbuild/)，但我无法修复这些错误。有人可以逐步解释我应该做什么吗？我是 C# 和 Visual Studio 的新手。

我认为这个错误也是我无法将项目签入 TFS 的问题。

我的`bin`文件夹中有这些程序集：

```
D:\...\bin> ls
Mode                LastWriteTime     Length Name
----                -------------     ------ ----
d----        18.12.2012     23:53            de
-a---        15.12.2012     21:11     783648 EntityFramework.dll
-a---        15.12.2012     21:11     834489 EntityFramework.xml
-a---        18.12.2012     23:53      42496 LumenWorks.Framework.IO.dll
-a---        18.12.2012     23:53     116224 LumenWorks.Framework.IO.pdb
-a---        18.03.2010     18:31      53640 System.ComponentModel.DataAnnotati
                                             ons.dll
-a---        18.03.2010     18:31    1328984 System.Data.dll
-a---        18.03.2010     18:31     919880 System.dll
-a---        18.03.2010     18:31      24944 System.Web.Abstractions.dll
-a---        18.03.2010     18:31    2824528 System.Web.dll
-a---        05.01.2011     14:45     130408 System.Web.Helpers.dll
-a---        03.05.2012     08:55      37861 System.Web.Helpers.xml
-a---        05.01.2011     16:42     445280 System.Web.Mvc.dll
-a---        03.05.2012     08:51     777665 System.Web.Mvc.xml
-a---        18.03.2010     18:31      24928 System.Web.Routing.dll
-a---        05.01.2011     14:45     136552 System.Web.WebPages.dll
-a---        03.05.2012     08:55      51735 System.Web.WebPages.xml
-a---        18.03.2010     18:31     941904 System.Xml.dll
-a---        18.12.2012     23:53     244736 ViMuDat.dll
-a---        18.12.2012     23:53     321024 ViMuDat.pdb
-a---        18.12.2012     23:53     125308 ViMuDat.XML
D:\...\bin\de> ls
Mode                LastWriteTime     Length Name
----                -------------     ------ ----
-a---        12.01.2011     16:04      15720 System.Web.Helpers.resources.dll
-a---        12.01.2011     17:24      32096 System.Web.Mvc.resources.dll
-a---        12.01.2011     16:04      15208 System.Web.WebPages.resources.dll 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T09:10:23.640

如果您正在 bin 部署 MVC 3，则必须在部署中打包一些程序集。 [Scott Hanselman 也写了一篇](http://www.hanselman.com/blog/BINDeployingASPNETMVC3WithRazorToAWindowsServerWithoutMVCInstalled.aspx)关于什么和在哪里的文章。

如果您已复制程序集，请让用户将其作为“内容”添加到您的 Visual Studio 项目中。然后在构建时它们将自动复制到 bin 目录中的正确结构中。

**编辑**：这是帮助解决问题的文章中的信息：

`C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET MVC 3\Assemblies`和

`C:\Program Files (x86)\Microsoft ASP.NET\ASP.NET Web Pages\v2.0\Assemblies`包含丢失的 dll

这些 dll 必须手动复制到`_bin_deployableAssemblies`我的项目中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-19T09:26:18.843

您可能会发现通过[nuget](http://nuget.org/packages/Microsoft.AspNet.Mvc)安装软件包更容易。

NuGet 是一个包管理器，可以轻松安装和更新项目中的依赖项。它是一个 Visual Studio 扩展，可以从[这里](http://visualstudiogallery.msdn.microsoft.com/27077b70-9dad-4c64-adcf-c7cf6bc9970c)安装。

如果您仍在使用 ASP.NET MVC3，则可以使用命令安装旧版本的包`Install-Package Microsoft.AspNet.Mvc -Version 3.0.20105.1`。

这会将二进制文件添加`bin`为构建项目时包含在文件夹中的普通引用。这将节省你不得不做的`_bin_deployableAssemblies`方法。大多数其他流行的 3rd 方框架（以及许多新的 Microsoft Web 堆栈）也可以在 nuget 上使用。

# r - 在单个图上绘制许多数据集（来自 csv）

> ID：13942704
> 
> 赞同：0
> 
> 时间：2012-12-18T22:43:04.857
> 
> 标签：r, ggplot2

按照这个例子：

[http://wiki.stdout.org/rcookbook/Graphs/Multiple%20graphs%20on%20one%20page%20(ggplot2)/](http://wiki.stdout.org/rcookbook/Graphs/Multiple%20graphs%20on%20one%20page%20(ggplot2)/)

请参阅标题为“每种饮食的拟合生长曲线”的图表，我想做同样的事情，但使用 CSV 文件中的一组数据，例如（值以 µs 为单位，“N”列除外）：

```
$ head RandomArray25PercentDup.csv 
N   SystemSort  QuickSort   RandomizedQuickSort TopDownMergeSort    BottomUpMergeSort   SelectionSort   InsertionSort   BubbleSort  
4   0   1   0   1   0   1   0   0   
5   0   0   0   1   1   0   1   0   
6   0   0   0   1   1   0   0   0   
7   0   0   0   0   1   0   0   0   
8   0   0   1   0   1   0   1   1   

... 
```

到目前为止，我已经尝试过：

```
library(ggplot2)
library(reshape2)

data <- read.table("RandomArray25PercentDup.csv",
                   sep="\t",
                   header=TRUE)
data.m <- melt(data, id.vars = 1)

ggplot(data.m, aes(data, value, colour=variable)) +
    geom_point(alpha=.3) +
    geom_smooth(alpha=.2, size=1) +
    ggtitle("Random array with ~25% duplicate values") 
```

我在 R 方面的背景非常有限，我正在尝试使用各种资源进行学习。

我有大约 800'000 行的数据，每个 N 的测量重复 20 次（这就是为什么我想通过每个算法的拟合曲线看到散布透明的原因）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:58:34.810

更换这个

```
data.m <- melt(data, id.vars = 1) 
```

和

```
data.m <- melt(data, id.vars = "N") 
```

接着

```
ggplot(data.m, aes(data, value, colour=variable)) +
    geom_point(alpha=.3) +
    geom_smooth(alpha=.2, size=1) +
    ggtitle("Random array with ~25% duplicate values") 
```

和

```
ggplot(data.m, aes(N, value, colour=variable)) +
    geom_point(alpha=.3) +
    geom_smooth(alpha=.2, size=1) +
    ggtitle("Random array with ~25% duplicate values") 
```

应该做的伎俩。第一次替换并不是真正必要的，但如果列的顺序发生变化，最好使用变量名。in 的第一个参数`aes`映射到 x 轴。`data`不是列，因此无法映射。

# android - 即使相机正在进行自动校正，也可以使用像素值计算（或估计）亮度值？

> ID：13942706
> 
> 赞同：0
> 
> 时间：2012-12-18T22:43:17.573
> 
> 标签：android, image-processing, android-camera, light, luminance

我实际上是在 Android 上做一个项目，我被冒犯到实时计算或估计后置摄像头的亮度（这意味着，从后置摄像头获取帧并在每次帧时都有一个亮度值改变）！不幸的是，我无法实时访问相机的参数，因此我无法真正知道相机在面对光线时使用其参数（ISO、快门时间或光圈！）

基本上，相机会根据进入它的光的强度来改变它的参数，所以在计算灰度图像的平均值时，例如，我们在某些情况下会有假值！（例如面对点光源时，由于相机的自动校正，周围一切都变暗了）

所以，我问自己是否有使用帧的像素值来检测相机捕获的帧的亮度值的方法：过滤器，计算方法，算法或类似的东西，可以在不知道相机参数的情况下将像素值映射到亮度值！！

我的意思是，即使相机正在通过从像素值更改其参数（当前 Android API 无法访问）来进行自动校正，也可以检测光（具有定量值）（因为，在我看来是只有我们可以操纵的信息才能获得有关亮度的信息！）。

这将真正帮助我实现我的项目！如果有不清楚的地方，请告诉我；）

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:04:13.943

这是相当简单的。您应该使用表面视图和相机预览。这样你就可以将每一帧作为一个字节数组。帧的默认格式是 YUV，即 Y（亮度）和 UV，即色度。您可以使用 Y 来计算图像中的平均亮度。如果您使用 BGR，您可以使用以下公式计算亮度：Y = 0.2126 R + 0.7152 G + 0.0722 B

```
class Preview extends ViewGroup implements SurfaceHolder.Callback {

SurfaceView mSurfaceView;
SurfaceHolder mHolder;

Preview(Context context) {
    super(context);

    mSurfaceView = new SurfaceView(context);
    addView(mSurfaceView);

    // Install a SurfaceHolder.Callback so we get notified when the
    // underlying surface is created and destroyed.
    mHolder = mSurfaceView.getHolder();
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
} 
```

... }

将回调添加到您的类，意味着对于每一帧调用此方法：

```
onPreviewFrame(byte [] frame, Camera cam){
   //do some processing
} 
```

OpenCV 有一些很好的函数来做这些计算。

# visual-studio-2010 - 有条件地将内容文件添加到 Visual Studio C++ 项目

> ID：13942711
> 
> 赞同：0
> 
> 时间：2012-12-18T22:43:45.817
> 
> 标签：visual-studio-2010, visual-studio, visual-c++

我有一个用于 DLL 的可视 C++ 项目和一个安装项目。在安装程序中，我添加了我的项目的内容文件。

有没有办法根据您是编译调试还是发布来将文件添加为内容文件？如果我在调试下编译，我想包括 boost_date_time-vc100-mt-gd-1_51.dll，如果我在发布下编译，我想包括 boost_date_time-vc100-mt-1_51.dll。

我的额外部门看起来像这样

`Shell32.lib;libzmq.lib;log4cxx.lib;boost_date_time-vc100-mt-gd-1_51.lib;...`

在其他库目录下，我添加了所有这些 .lib 文件的路径，这些文件还包含它们各自的 .dll 文件

我尝试了以下但没有成功...

1.  添加了一个自定义构建步骤以在构建之前运行，它将正确的 dll 文件复制到 OutDir，并将此自定义构建步骤的输出设置为 dll 文件。

2.  通过手动编辑 vcxproj 文件有条件地包含内容文件。如果配置是发布模式，我会将非调试版本设置为部署内容，将调试版本设置为 false，反之亦然。这看起来像这样，

    `<ItemGroup Condition="'$(Configuration)'=='Release'">`

    `<None Include="boost_date_time-vc100-mt-1_51.dll ">`

    `<DeploymentContent>true</DeploymentContent>....`

    `</None></ItemGroup`

然而，这些都不起作用。无论我如何构建项目，第二个选项似乎总是默认为调试模式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:50:08.970

添加依赖项时，可以将其添加到一个配置或所有配置中：

![在此处输入图像描述](../Images/d4726b3e7ac1a23faffcd47122120d6d.png)

[这张照片是 VS 2012 的，但 2010 和 2008 看起来几乎一样。]

因此，您在左上角选择要修改的配置，然后将库添加到`additional dependencies`. 请注意，您在此处添加的将是`.lib`与 DLL 关联的文件，而不是 dll 本身（编译器将使可执行文件依赖于 DLL，因为您链接到它的 .lib 文件）。

# ext.net - 排除验证

> ID：13942719
> 
> 赞同：0
> 
> 时间：2012-12-18T22:44:32.527
> 
> 标签：ext.net

我正在针对其模型验证网格面板列，但在排除验证时遇到问题。除了 0 之外的所有值都是有效的，但是使用下面的代码我总是无效。关于我可能做错了什么的任何想法？

```
<ext:ExclusionValidation Field="FormularioId" List="0" Message="Seleccione formulario" ></ext:ExclusionValidation> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T16:09:59.770

复制 Vladimir Shcheglov 在 Ext.net 论坛中给出的这个问题的答案：

'List="0"' 问题已在 SVN 中修复，该修复将在下一个公开版本中提供 解决方法，定义两个 '0'

```
List="0,0" 
```

# javascript - 我们如何限制 Fabric.js 中画布对象的最大宽度和高度

> ID：13942722
> 
> 赞同：5
> 
> 时间：2012-12-18T22:44:40.837
> 
> 标签：javascript, html, canvas, fabricjs

这是[jsfiddle](http://jsfiddle.net/Kmvwz/)。

我想在调整对象大小时限制对象的最大高度/宽度。

这是代码：

```
<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <script src="https://raw.github.com/kangax/fabric.js/master/dist/all.js"></script>
  </head>
  <body>
    <canvas id="c" width="300" height="300" style="border:1px solid #ccc"></canvas>
    <script>
      (function() {

         var canvas = new fabric.Canvas('c');

         canvas.add(new fabric.Rect({ width: 50, height: 50, fill: 'red', top: 100, left: 100 }));
         canvas.add(new fabric.Rect({ width: 30, height: 30, fill: 'green', top: 50, left: 50 }));

      })();
    </script>
  </body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-19T23:03:50.927

缩放结构对象时，scaleX 和 scaleY 属性会更新以反映对象的新缩放大小。因此，当缩放 2x 时，初始宽度为 50 的矩形的实际宽度将为 100。

您需要做的是找出形状允许的最大比例，因为它是 maxHeight 或 maxWidth。这是通过将最大尺寸除以初始尺寸来计算的。

这是一个如何为对象实现最大尺寸的示例

```
var canvas = new fabric.Canvas("c");
var rect1  = new fabric.Rect({ width: 50, height: 50, fill: 'red',   top: 100, left: 100});
var rect2  = new fabric.Rect({ width: 30, height: 30, fill: 'green', top: 50,  left: 50 });

// add custom properties maxWidth and maxHeight to the rect
rect1.set({maxWidth:100, maxHeight:120});

canvas.observe("object:scaling", function(e){
    var shape        = e.target
    ,   maxWidth     = shape.get("maxWidth")
    ,   maxHeight    = shape.get("maxHeight")
    ,   actualWidth  = shape.scaleX * shape.width
    ,   actualHeight = shape.scaleY * shape.height;

    if(!isNaN(maxWidth) && actualWidth >= maxWidth){
        // dividing maxWidth by the shape.width gives us our 'max scale' 
        shape.set({scaleX: maxWidth/shape.width})
    }

    if(!isNaN(maxHeight) && actualHeight >= maxHeight){
        shape.set({scaleY: maxHeight/shape.height})
    }

    console.log("width:" + (shape.width * shape.scaleX) + " height:" + (shape.height * shape.scaleY));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-03-20T12:36:57.013

适用于大多数织物对象..但您想获得对象的比例，对于 maxWidth 您可以复制它...对于 maxHeight 反转它。

```
fabric.Image.fromURL(photo, function(image) {
  //console.log(image.width, image.height);
  var heightRatio = image.height / image.width;
  var maxWidth = 100;
  image.set({
    left: canvasDimensions.width / 2,//coord.left,
    top: canvasDimensions.height / 2, //coord.top,
    angle: 0,
    width: maxWidth,
    height: maxWidth * heightRatio
  })
  //.scale(getRandomNum(minScale, maxScale))
  .setCoords();

  canvas.add(image);
  }) 
```

# php - 如何创建一个由其他接口组成的接口？

> ID：13942727
> 
> 赞同：64
> 
> 时间：2012-12-18T22:45:02.207
> 
> 标签：php, interface

我想创建一个接口，`IFoo`它基本上是一个自定义接口，`IBar`和一些本机接口的组合`ArrayAccess`，，，`IteratorAggregate`和`Serializable`。PHP 似乎不允许实现其他接口的接口，因为我在尝试时收到以下错误：

> PHP 解析错误：语法错误，意外的 T_IMPLEMENTS，在第 Y 行的 X 中期望 '{'

我知道接口可以扩展其他接口，但是 PHP 不允许多重继承，我不能修改本机接口，所以现在我被卡住了。

我是否必须在 中复制其他接口`IFoo`，还是有更好的方法可以让我重用本机接口？

* * *

## 回答 #1

> 赞同：126
> 
> 时间：2012-12-18T22:47:33.210

您正在寻找`extends`关键字：

```
Interface IFoo extends IBar, ArrayAccess, IteratorAggregate, Serializable
{
    ...
} 
```

请参阅[对象接口](http://php.net/language.oop5.interfaces)和特定[示例 #2 可扩展接口 ff](http://php.net/language.oop5.interfaces#language.oop5.interfaces.examples.ex2)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-09-12T09:38:47.527

你需要使用`extends`关键字来扩展你的接口，当你需要在你的类中实现接口时，你需要使用`implements`关键字来实现它。

您可以`implements`在类中使用多个接口。如果你实现了接口，那么你需要定义所有函数的主体，像这样......

```
interface FirstInterface
{
    function firstInterfaceMethod1();
    function firstInterfaceMethod2();
}
interface SecondInterface
{
    function SecondInterfaceMethod1();
    function SecondInterfaceMethod2();
}
interface PerantInterface extends FirstInterface, SecondInterface
{
    function perantInterfaceMethod1();
    function perantInterfaceMethod2();
}

class Home implements PerantInterface
{
    function firstInterfaceMethod1()
    {
        echo "firstInterfaceMethod1 implement";
    }

    function firstInterfaceMethod2()
    {
        echo "firstInterfaceMethod2 implement";
    }
    function SecondInterfaceMethod1()
    {
        echo "SecondInterfaceMethod1 implement";
    }
    function SecondInterfaceMethod2()
    {
        echo "SecondInterfaceMethod2 implement";
    }
    function perantInterfaceMethod1()
    {
        echo "perantInterfaceMethod1 implement";
    }
    function perantInterfaceMethod2()
    {
        echo "perantInterfaceMethod2 implement";
    }
}

$obj = new Home();
$obj->firstInterfaceMethod1(); 
```

等等...调用方法

# wkhtmltopdf - wkhtmltopdf 什么时候真的失败了

> ID：13942728
> 
> 赞同：5
> 
> 时间：2012-12-18T22:45:05.460
> 
> 标签：wkhtmltopdf

我正在使用 生成 PDF `wkhtmltopdf`，这太棒了。但是，有时该工具会返回退出代码，但在很多情况下，PDF 似乎仍然可以正确生成。

我怎么真的知道`wkhtmltopdf`没有完成这项工作？

例子：

[http://www.egresadotec.edu.sv/boletin_pdf_create.php?idbXwt=101](http://www.egresadoutec.edu.sv/boletin_pdf_create.php?idbXwt=101)给出了 404，但实际上整个页面是正确创建的（尽管 12Mb）。 [http://www.anarchia.com/link_in_frame.php?link=7243](http://www.anarchia.com/link_in_frame.php?link=7243)给出了 404 并且确实没有生成任何内容，但文件大小不是 0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T07:55:05.643

这实际上是一个非常复杂的问题。我有时希望将 404/500/503 页面正常呈现为 PDF。那么退出代码应该是什么？我认为退出代码应该类似于 2，只是为了通知我页面返回的 HTTP 代码，但我仍然确实需要 PDF 才能正常呈现。我怀疑您的实际问题是没有明确记录退出代码的原因，这确实是真的。

我为此创建[了一个问题](https://code.google.com/p/wkhtmltopdf/issues/detail?id=1088)，但 Antialize 是一个忙碌的人，所以他可能没有时间处理此类问题。我实际上怀疑您正在从您自己创建的某个包装器中调用 wkhtmltopdf 并且您正在那里检查退出代码。如果您不希望在 URL 返回 HTTP 2xx 以外的内容时生成 PDF，我建议您在调用 wkhtmltopdf 之前自己检查 URL。创建一个工具或使用现有工具来调用该 URL 并检查它的响应。不是很贵，很简单，它可能对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-05-29T06:38:43.683

```
EXITCODE     EXPLANATION 
```

```
0            All OK
1            PDF generated OK, but some request(s) did not return HTTP 200
2            Could not something something
X            Could not write PDF: File in use
Y            Could not write PDF: No write permission
Z            PDF generated OK, but some JavaScript requests(s) timeouted
A            Invalid arguments provided
B            Could not find input file(s)
C            Process timeout 
```

当出现错误代码 1 或 Z 时，它并没有真正失败。它创建 PDF。理想情况下，它应该是一个警告。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-05-03T20:24:34.827

这只是一个权限问题，请检查您对此文件“wkhtmltopdf”的用户权限并相应地运行，或者您可以更改它。

```
[root@localhost ~]#ls -l wkhtmltopdf
-rwxr-xr-x 1 xyz xyz 11068596 May  3 15:59 wkhtmltopdf
[root@localhost ~]#
[root@localhost ~]#su - xyz

[xyz@localhost ~]$ ./wkhtmltopdf 
```

（您将获得此文件 wkhtmltopdf 的可执行输出。）

——乔纳斯·约瑟夫

# latex - 从网站导出文本、图像和 LaTeX 方程

> ID：13942730
> 
> 赞同：5
> 
> 时间：2012-12-18T22:45:19.627
> 
> 标签：latex, wolfram-mathematica, webpage

是否可以从特定网站导出文本、图像和 LaTeX 方程，以便您可以直接自定义自己的 PDF 而不会使对象模糊？只有图像具有固定的分辨率。

我意识到有几种间接生成 PDF 的方法。例如，尝试在[Riemann Zeta 函数](http://mathworld.wolfram.com/RiemannZetaFunction.html)上从 Wolfram MathWorld 渲染 PDF可以通过 Chrome 打印并保存为 PDF，但是当您放大时，LaTeX 方程和文本自然会变得模糊。我尝试下载“Wolfram 的 CDF 播放器”，但它只包含 Mathematica 库的语法——而不是 Wolfram MathWorld 提供的有用解释。我需要什么来提取 PDF 文件中的文本、图像和 LaTeX 方程而不使它们模糊？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T07:37:05.277

检查源代码显示，描述每个方程的 gif 具有近似于将呈现它们的 LaTeX 的替代文本（它可能是 Mathematica 代码——我不熟悉 Wolfram 的工具）。提取一个合理的来源不是不可能的，但这会很困难。该站点以表格布局，因此即使使用[漂亮的汤](http://www.crummy.com/software/BeautifulSoup/)之类的东西来解析 HTML 也可能很棘手。有些方程被分解成不同的 gif，因此解析它们会更加棘手。您还必须将替代文本转换为 LaTeX。

总而言之，如果您不需要做大量页面，我建议您复制粘贴文本、保存图像、获取每个图像的替代文本并自己进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T07:12:22.373

除非您可以访问用于以您的问题不明显的方式生成图像的 LaTeX 源，否则答案是“您不能”。对链接网站的随意检查意味着用于生成方程式的 LaTeX 并不容易获得（它可能位于某个后端系统上，该系统会生成放置在 Web 服务器上的图像）。

对于浏览器来说，它只是一个图像。生成图像的方法与它在网页上的显示方式以及它在 PDF 中的显示方式无关（即比预期像素化程度更高）。

请注意，如果网站使用 SVG 之类的矢量图形格式而不是 PNG 或 JPEG 之类的基于像素的格式，那么这些格式将干净地转换为 PDF，并且可以很好地缩放。这是由相关网站的网站管理员做出的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T20:15:21.093

对于给定的示例，您可以下载该页面的 Mathematica 笔记本。也许可以从中解析出一些东西。

# lua - Lua 中的增量

> ID：13942732
> 
> 赞同：21
> 
> 时间：2012-12-18T22:45:25.173
> 
> 标签：lua

我正在玩一点 Lua。

我遇到了以下具有意外行为的代码片段：

```
a = 3;
b = 5;
c = a-- * b++; // some computation
print(a, b, c); 
```

Lua 运行程序没有任何错误，但没有`2 6 15`按预期打印。为什么 ？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-18T22:56:12.323

[`--`开始单行注释](http://en.wikibooks.org/wiki/Lua_Programming/How_to_Lua/comment)，喜欢`#`或`//`其他语言。

所以它相当于：

```
a = 3;
b = 5;
c = a 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-18T22:47:15.567

LUA 不会用`++`and递增和递减`--`。 `--`而是开始评论。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2018-03-29T05:41:35.173

lua中没有and`--`和and `++`。所以你必须使用`a = a + 1`or`a = a -1`或类似的东西

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-10T23:49:27.443

如果您想`2 6 15`作为输出，请尝试以下代码：

```
a = 3
b = 5
c = a * b
a = a - 1
b = b + 1
print(a, b, c) 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-03-26T16:44:04.197

这会给

```
3 5 3 
```

因为第 3 行将被评估为`c = a`.

为什么？因为在 Lua 中，注释以`--`. 因此，`c = a-- * b++; // some computation`被评估为两个部分：

1.  表达：`c = a`
2.  评论：`* b++; //// some computation`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-08-24T18:21:35.693

您的 Lua 代码中有 2 个问题：

```
a = 3;
b = 5;
c = a-- * b++; // some computation
print(a, b, c); 
```

一、Lua目前不支持自增。一种方法是：

```
c = a - 1 * b + 1
print(a, b, c) 
```

二，`--`在 Lua 中是注释，所以 using `a--`just 翻译为`a`，注释为`* b++; // some computation`。

三、`//`在Lua中不起作用，`--`用于注释。

`;`此外，在每行的末尾使用它也是可选的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-01-10T00:49:27.097

或者你可以做

本地默认值 = 0 本地最大值 = 100

while default < max do default = default + 1 print(default) end

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2020-05-30T06:54:21.770

**编辑：**在 C# 中使用 SharpLua 在 lua 中递增/递减可以用速记方式完成，如下所示：

```
a+=1 --increment by some value
a-=1 --decrement by some value 
```

此外，乘法/除法可以这样完成：

```
a*=2 --multiply by some value
a/=2 --divide by some value 
```

如果将一个变量与另一个变量相加、相减、相乘或相除，则可以使用相同的方法，如下所示：

```
a+=b
a-=b
a/=b
a*=b 
```

这更简单，更整洁，我认为不那么复杂，但不是每个人都会同意我的观点。

希望这可以帮助！

# c# - JSON 序列化/反序列化 Varbinary DataColumn 变为 String 而不是 Byte[]

> ID：13942736
> 
> 赞同：4
> 
> 时间：2012-12-18T22:45:40.387
> 
> 标签：c#, .net, json

**总体说明**

我有一个网络服务：

*   从我们的数据库中检索数据集
*   用于`JsonConvert.SerializeObject()`序列化对象并将该数据作为字符串返回给用户的本地应用程序

然后是我客户的本地应用程序：

*   用于`JsonConvert.DeserializeObject<DataSet>()`将对象转换回 System.Data.DataSet

**我的问题**

我有一个包含 Varbinary 数据（字节 []）的数据列。这个序列化/反序列化过程最终导致该列数据类型为字符串（我猜是 base64）。

有没有办法在我反序列化 JSON 对象时将此列视为 varbinary？

编辑：回应评论

我的问题是我根据我的数据集的列生成了一个 CREATE TABLE 脚本。当我遍历列时，我需要指定每列在我用 SQL 生成的这个新表中的数据类型。对于应该是 varbinary 的列，我的 DataColumn 数据类型是字符串，并且与“用户名”等实际字符串列无法区分

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T09:26:17.343

正如@eulerfx 提到的那样，您可以保持这种状态。但是，如果您绝对需要一个数组，请使用 int[] 而不是 byte[]。我需要在其他上下文 (UI) 中将数字数组呈现为数字数组，这对我有用。

# android - android相机与透明图片重叠

> ID：13942740
> 
> 赞同：0
> 
> 时间：2012-12-18T22:45:46.747
> 
> 标签：android, image, camera, overlap

我有一个小问题，使用 Android 应用程序：我需要拍照，但我需要在相机显示屏上放置一个透明图像，就像重叠一样。

有不同的方法，（但我不知道如何）：

1.  使用安卓相机

    ```
    Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
    intent.putExtra(MediaStore.EXTRA_OUTPUT, imageUri);
    intent.putExtra(MediaStore.EXTRA_VIDEO_QUALITY, 1);
    activity.startActivityForResult(intent, Picture.CAMERA); 
    ```

    为此，我应该做任何事情，比如开始这个意图透明，并且我的重叠图像在下面。

2.  在我的 XML 中包含相机，并进行我需要的更改，或者类似的事情。

3.  从某处下载android相机的源代码，根据需要进行更改，并将我的应用程序商业化。（我不知道许可证是否允许我这样做）。

4.  创建我自己的相机（这会很丑，也是我最后的选择）。

欢迎好的想法。

最好的祝福！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:57:53.530

我自己做过这个——当时我找不到其他人做过。您不能为此依赖相机意图。我将使用的方法是使用相机预览，您可以在类中编写它，然后将其包含在框架布局中的 xml 中。在同一布局中包括全屏图像视图。它需要一些 zorder 等的摆弄，特别是在添加/删除图像时。

编写一个类来控制相机预览可能看起来令人生畏，但实际上非常简单，并且比简单地使用相机意图提供了更多的控制。请参阅[此处](http://developer.android.com/training/camera/cameradirect.html)了解更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T08:29:50.243

试试 LayoutInflater

如下所示：

//主布局first.xml

```
setContentView(R.layout.preview_camera); 
```

//另一个second.xml文件

```
controlInflater1 = LayoutInflater.from(getBaseContext());
     View viewControl1 = controlInflater.inflate(R.layout.frame_layout, null);
     LayoutParams layoutParamsControl1
      = new LayoutParams(LayoutParams.FILL_PARENT,
      LayoutParams.FILL_PARENT);
     this.addContentView(viewControl1, layoutParamsControl1); 
```

阅读 LayoutInflater 的文档。它可能会有所帮助

# javascript - Easeljs精灵动画卡在框架上

> ID：13942743
> 
> 赞同：0
> 
> 时间：2012-12-18T22:46:13.847
> 
> 标签：javascript, animation, if-statement, sprite, easeljs

我正在通过使用easeljs 库为学校课程制作一个简单的游戏来学习javascript。我想制作一个十字准线，通过在您指向目标时显示一个小动画来向玩家提供一些反馈，使用我制作的命中测试。

然而，当十字准线接触到目标时，动画（应该是两个指向十字准线中间的小三角形）似乎卡在它的第一帧上。

这是我的一些代码，我将这两个函数都放在了一个ticker函数中。这些函数做了它们应该做的事情（我通过向console.log发送一条消息来检查），但我认为一旦变量“hitTestControle”设置为true，动画就会在每次滴答时重置。如果您想查看所有代码，这里是“游戏”的链接：http: [//athena.fhict.nl/users/i279907/achtergrond/achtergrond.html](http://athena.fhict.nl/users/i279907/achtergrond/achtergrond.html)

```
function hitTest() {
    if(distance(crossHair, block) < 60) {
        hitTestControle = true; 
} else {
        hitTestControle = false;
        console.log(hitTestControle);
    }
}

function hitTestControl() {
    if(hitTestControle == true) {
        crossHair.gotoAndPlay("move");
        console.log("hit");
    } else {
        crossHair.gotoAndPlay("stop");
    }
} 
```

PS：我使用的这个热门测试似乎也有问题。

```
function distance() {
    var difx = blok.x - crossHair.x;
    var dify = blok.y - crossHair.y;
    return Math.sqrt( (difx * difx) + (dify * dify) );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T23:24:39.377

看起来您正在启动动画...将其设置为第一帧并启动它...每次 hitTestControle 为真。由于只要您将鼠标悬停在目标上，hitTestControle 就会为真，因此动画将永远不会到达第二帧。

您需要做的是在从 hitTestControle = false 转换为 hitTestControle = true 时启动动画，但一旦发生这种情况，您只需让它自动播放。

尝试将 hitTestControl() 函数更改为以下内容：

```
function hitTestControl() {
    if(hitTestControle == true && alreadyOverHit == false) {
        crossHair.gotoAndPlay("move");
        alreadyOverHit = true;
        console.log("hit");
    } else {
        crossHair.gotoAndPlay("stop");
        alreadyOverHit = false;
    }
} 
```

换句话说，只启动一次动画，在您检测到命中的第一帧期间，然后不要触摸它，除非您离开目标并重新打开。

# python - 使用 Scikit Learn SVM 为文本分类准备数据

> ID：13942744
> 
> 赞同：11
> 
> 时间：2012-12-18T22:46:14.677
> 
> 标签：python, svm, scikit-learn

我正在尝试应用 Scikit learn 中的 SVM 对我收集的推文进行分类。因此，将有两个类别，分别命名为 A 和 B。现在，我将所有推文分类在两个文本文件中，“A.txt”和“B.txt”。但是，我不确定 Scikit Learn SVM 要求什么类型的数据输入。我有一个带有标签（A 和 B）作为键的字典和一个特征字典（一元组）和它们的频率作为值。抱歉，我对机器学习真的很陌生，不知道应该怎么做才能让 SVM 工作。我发现 SVM 使用 numpy.ndarray 作为其数据输入的类型。我需要根据自己的数据创建一个吗？应该是这样的吗？

```
Labels    features    frequency
  A        'book'        54
  B       'movies'       32 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-18T22:59:58.253

查看有关[文本特征提取](http://scikit-learn.org/stable/modules/feature_extraction.html#text-feature-extraction)的文档。

也看看[文本分类的例子](http://scikit-learn.org/stable/auto_examples/text/document_classification_20newsgroups.html)。

这里还有一个教程：

[http://scikit-learn.org/stable/tutorial/text_analytics/working_with_text_data.html](http://scikit-learn.org/stable/tutorial/text_analytics/working_with_text_data.html)

特别是不要过多地关注 SVM 模型（特别`sklearn.svm.SVC`是对于内核模型来说这不是更有趣，因此不是文本分类）：一个简单的感知器、LogisticRegression 或伯努利朴素贝叶斯模型可能工作得一样好，同时训练速度要快得多。

# mysql - MySQL Query 在连接时具有可能的空值

> ID：13942745
> 
> 赞同：3
> 
> 时间：2012-12-18T22:46:24.697
> 
> 标签：mysql, sql, join

当涉及到比平时更严重的 MySQL 查询时，我并不是很“聪明”。所以急需一些帮助。

我有一个表格如下：

```
CREATE TABLE IF NOT EXISTS `clients` (
  `c_id` int(11) NOT NULL AUTO_INCREMENT,
  `c_name` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`c_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ;

INSERT INTO `clients` (`c_name`) VALUES ('client1');
INSERT INTO `clients` (`c_name`) VALUES ('client2');
INSERT INTO `clients` (`c_name`) VALUES ('client3');
INSERT INTO `clients` (`c_name`) VALUES ('client4');
INSERT INTO `clients` (`c_name`) VALUES ('client5');

CREATE TABLE IF NOT EXISTS `people` (
  `p_id` int(11) NOT NULL AUTO_INCREMENT,
  `p_mark` int(1) NOT NULL DEFAULT '0',
  `p_client_id` int(11) DEFAULT NULL,
  `p_name` varchar(45) COLLATE utf8_unicode_ci NOT NULL,
  `p_source` varchar(45) COLLATE utf8_unicode_ci NOT NULL DEFAULT '--',
  `p_segment` varchar(45) COLLATE utf8_unicode_ci NOT NULL DEFAULT '--',
  `p_date` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`p_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ;

INSERT INTO `people` (`p_mark`,`p_client_id`,`p_name`,`p_source`,`p_segment`,`p_date`) VALUES ('0','1','John','AA','3',NOW());
INSERT INTO `people` (`p_mark`,`p_client_id`,`p_name`,`p_source`,`p_segment`,`p_date`) VALUES ('0','2','Alex','BB','23',NOW());
INSERT INTO `people` (`p_mark`,`p_client_id`,`p_name`,`p_source`,`p_segment`,`p_date`) VALUES ('1','4','Ivan','-','-',NOW());
INSERT INTO `people` (`p_mark`,`p_client_id`,`p_name`,`p_source`,`p_segment`,`p_date`) VALUES ('0','4','Stan','FF','5',NOW());
INSERT INTO `people` (`p_mark`,`p_client_id`,`p_name`,`p_source`,`p_segment`,`p_date`) VALUES ('1','1','Paul','DD','12',NOW());
INSERT INTO `people` (`p_mark`,`p_client_id`,`p_name`,`p_source`,`p_segment`,`p_date`) VALUES ('1','4','Greg','-','-',NOW());
INSERT INTO `people` (`p_mark`,`p_client_id`,`p_name`,`p_source`,`p_segment`,`p_date`) VALUES ('0','1','Eric','EE','7',NOW());
INSERT INTO `people` (`p_mark`,`p_client_id`,`p_name`,`p_source`,`p_segment`,`p_date`) VALUES ('1','5','Thom','BB','92',NOW());
INSERT INTO `people` (`p_mark`,`p_client_id`,`p_name`,`p_source`,`p_segment`,`p_date`) VALUES ('0','4','Finn','BB','41',NOW());
INSERT INTO `people` (`p_mark`,`p_client_id`,`p_name`,`p_source`,`p_segment`,`p_date`) VALUES ('0','2','Leon','CC','21',NOW());
INSERT INTO `people` (`p_mark`,`p_client_id`,`p_name`,`p_source`,`p_segment`,`p_date`) VALUES ('1','2','Sean','AA','25',NOW());

CREATE TABLE IF NOT EXISTS `sources` (
  `src_id` int(11) NOT NULL AUTO_INCREMENT,
  `src_name` varchar(45) COLLATE utf8_unicode_ci NOT NULL,
  `src_abbr` varchar(10) COLLATE utf8_unicode_ci NOT NULL,
  `src_client` int(11) NOT NULL,
  PRIMARY KEY (`src_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ;

INSERT INTO `sources` (`src_name`,`src_abbr`,`src_client`) VALUES ('Aoo oo','AA',1);
INSERT INTO `sources` (`src_name`,`src_abbr`,`src_client`) VALUES ('Boo oo','BB',2);
INSERT INTO `sources` (`src_name`,`src_abbr`,`src_client`) VALUES ('Boo oo','BB',4);
INSERT INTO `sources` (`src_name`,`src_abbr`,`src_client`) VALUES ('Coo oo','CC',1);
INSERT INTO `sources` (`src_name`,`src_abbr`,`src_client`) VALUES ('Doo oo','DD',1);
INSERT INTO `sources` (`src_name`,`src_abbr`,`src_client`) VALUES ('Eoo oo','EE',4);
INSERT INTO `sources` (`src_name`,`src_abbr`,`src_client`) VALUES ('Foo oo','FF',5);
INSERT INTO `sources` (`src_name`,`src_abbr`,`src_client`) VALUES ('Aoo oo','AA',2);
INSERT INTO `sources` (`src_name`,`src_abbr`,`src_client`) VALUES ('Boo oo','BB',5);
INSERT INTO `sources` (`src_name`,`src_abbr`,`src_client`) VALUES ('Coo oo','CC',2);
INSERT INTO `sources` (`src_name`,`src_abbr`,`src_client`) VALUES ('Doo oo','DD',4);
INSERT INTO `sources` (`src_name`,`src_abbr`,`src_client`) VALUES ('Eoo oo','EE',1);
INSERT INTO `sources` (`src_name`,`src_abbr`,`src_client`) VALUES ('Foo oo','FF',4);

CREATE TABLE IF NOT EXISTS `segments` (
  `seg_id` int(11) NOT NULL AUTO_INCREMENT,
  `seg_client_id` int(11) NOT NULL,
  `seg_src_id` int(11) NOT NULL,
  `seg_number` int(11) NOT NULL,
  `seg_value` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`seg_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=1 ;

INSERT INTO `segments` (`seg_client_id`,`seg_src_id`,`seg_number`,`seg_value`) VALUES ('1','1','3','aa-Seg-c1');
INSERT INTO `segments` (`seg_client_id`,`seg_src_id`,`seg_number`,`seg_value`) VALUES ('0','2','23','bb-Seg-c2');
INSERT INTO `segments` (`seg_client_id`,`seg_src_id`,`seg_number`,`seg_value`) VALUES ('1','4','5','ff-Seg-c4');
INSERT INTO `segments` (`seg_client_id`,`seg_src_id`,`seg_number`,`seg_value`) VALUES ('1','1','12','dd-Seg-c1');
INSERT INTO `segments` (`seg_client_id`,`seg_src_id`,`seg_number`,`seg_value`) VALUES ('1','1','7','ee-Seg-c1');
INSERT INTO `segments` (`seg_client_id`,`seg_src_id`,`seg_number`,`seg_value`) VALUES ('1','5','92','bb-Seg-c5');
INSERT INTO `segments` (`seg_client_id`,`seg_src_id`,`seg_number`,`seg_value`) VALUES ('1','4','41','bb-Seg-c4');
INSERT INTO `segments` (`seg_client_id`,`seg_src_id`,`seg_number`,`seg_value`) VALUES ('1','2','21','cc-Seg-c2');
INSERT INTO `segments` (`seg_client_id`,`seg_src_id`,`seg_number`,`seg_value`) VALUES ('1','2','25','aa-Seg-c2');
INSERT INTO `segments` (`seg_client_id`,`seg_src_id`,`seg_number`,`seg_value`) VALUES ('1','3','35','tt-Seg-c3');
INSERT INTO `segments` (`seg_client_id`,`seg_src_id`,`seg_number`,`seg_value`) VALUES ('1','3','11','rr-Seg-c3');
INSERT INTO `segments` (`seg_client_id`,`seg_src_id`,`seg_number`,`seg_value`) VALUES ('1','5','7','zz-Seg-c5'); 
```

我正在尝试使用以下查询从`people`限制为4 中选择所有行：`p_client_id`

```
SELECT
  `people`.*
  `clients`.*,
  `sources`.*,
  `segments`.*
FROM
  `people` 
INNER JOIN 
  `clients` ON `people`.`p_client_id` = `clients`.`c_id`
LEFT JOIN 
  `sources` ON `people`.`p_source` = `sources`.`src_abbr`
RIGHT JOIN
  `segments` ON `people`.`p_segment` = `segments`.`seg_number`
WHERE 
  `p_client_id` = '4'
GROUP BY 
  `people`.`p_id`
ORDER BY `people`.`p_date` DESC; 
```

问题是，上述查询假设返回 4 行，但连接无法返回 where 行`people`。`p_source`和`people`。`p_segment`缺失。

任何建议都非常感谢！

还准备**了sqlfiddle：** [http ://sqlfiddle.com/#!2/0c54c/1](http://sqlfiddle.com/#!2/0c54c/1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:53:46.893

将连接`segments`从 RIGHT JOIN 更改为 LEFT JOIN。`segments`一个 RIGHT JOIN 仅包括来自连接 ( )右侧表的匹配行。

# visual-studio-2008 - 重命名 Visual Studio 2008 MFC 项目后出现 R6034 运行时错误

> ID：13942746
> 
> 赞同：0
> 
> 时间：2012-12-18T22:46:24.950
> 
> 标签：visual-studio-2008, visual-c++, mfc, manifest

我最近的任务是对我们公司的一种产品进行完全重命名。目前它是在 Visual Studio 2008 中使用 MFC 构建的。我尝试通过使用查找/替换以及重命名各种项目属性从 Visual Studio 中进行重命名；但是，当我运行它时（成功构建/链接后），我收到以下错误：

> 运行时错误！
> 
> 程序：d...
> 
> R6034
> 
> 应用程序试图错误地加载 C 运行时库。请联系应用程序的支持团队以获取更多信息。

![在此处输入图像描述](../Images/450d8e0546f5f1af6f71d1ebe27998b4.png)

我想我搞砸了，所以我提取了一个干净的项目副本，确认它构建/链接/运行良好，然后继续使用外部编辑器重命名。经过一个乏味的小时左右后，我重新命名了所有内容。运行时，我遇到了同样的 R6034 错误。

我开始深入研究这个错误，大多数时候它似乎是由缺少清单文件引起的。我比较了应用程序设置的良好（原始名称）副本，除了几个名称之外，一切都是相同的。清单正在生成并被嵌入。我在 VS2008 中打开了可执行文件并确认 RT_MANIFEST 存在并且 ID 为 1。清单本身与工作程序集中的清单相同。我尝试使用外部清单并发生了同样的问题。

看起来我可能不得不手动移植整个应用程序，但我仍然无法知道这是否真的有效。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T17:07:25.557

嗯，我想通了。我希望我有一些深刻的洞察力，但这是一个简单的错误：

我与重命名（错误 #1）同时执行的其他任务之一是删除解决方案中的英特尔 Fortran 库项目。该代码很少（如果曾经更改），因此我们希望将其删除以简化在未安装英特尔编译器的另一台机器上构建的过程。此步骤的一部分是将库手动添加到链接器输入列表中。好吧，我不小心将发布库添加到调试版本中，这就是问题的原因。一旦我更正它并使其成为正确链接的调试版本。

我不太明白这导致问题的原因。我过去曾在调试版本中使用过发布库（反之亦然），但由于某种原因，将英特尔和/或 Fortran 混在一起搞砸了。

感谢大家的时间。

# c# - 需要等待'KeyDown'回车接受TextBox文本

> ID：13942747
> 
> 赞同：0
> 
> 时间：2012-12-18T22:46:33.513
> 
> 标签：c#

我需要有一种方法通过从文本框中获取用户输入来在方法中设置整数。问题是我需要暂停代码以允许输入输入，然后在键入“Enter”时恢复。Keydown 方法有效，但不适用于将变量设置为外部方法的本地变量。例如：

```
....method()
{
    int num = 0;

    //wait for keydown Enter

    num = Convert.ToInt32(TextBox1.Text);
    //or 
    String s = TextBox1.Text;
    num = Int.TryParse(s);

    ....
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:48:54.740

您通常应该更改程序的控制流。要么在类级别声明，要么从传递它的处理程序`num`中调用依赖的方法。喜欢;`num``num`

```
 KeyDownHandler()
  {
      MessageBox.Show("Some Message");
      // or if you need something with more flexiblity
      OtherForm of = new OtherForm();
      OtherForm.Show();
      string someVal = OtherForm.TextBox.Text;
      MethodThatNeedsInputFromTextBox(int.Parse(TextBox.Text));
  } 
```

MessageBox.Show 方法列表；

[http://msdn.microsoft.com/en-us/library/system.windows.forms.messagebox.show(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.messagebox.show(v=vs.71).aspx)

您可能希望使用默认值以外的其他内容，例如使消息框保持焦点直到用户关闭它的对话选项。

# php - Codeigniter 中的函数调用出现 500 错误

> ID：13942751
> 
> 赞同：2
> 
> 时间：2012-12-18T22:46:54.807
> 
> 标签：php, codeigniter

我正在使用刚刚安装的 CI 2.1.3 遵循我在 routes.php 中编写的 phpacademy 教程：

```
$route['default_controller'] = "site"; 
```

（而不是：$route['default_controller'] = "welcome";)

在控制器/site.php 中：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
class Site extends CI_Controller {
      public function index() {
        echo "default function started.<br/>";

      }
      public function hello(){
        echo "hello function started.<br/>";
      }
} 
```

将其上传到服务器并转到 [www.mydomain.ext] 后，它可以正常工作（写道：“默认功能已启动。”）但是如果我添加 'this->hello();' 对于 index() 函数，它会引发 500 错误。

为什么会发生这种情况，我该如何解决？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T23:01:39.460

您是`this->hello();`按照上面提到的那样添加到您的索引函数还是`$this->hello();`？

`$this->hello();`应该可以正常工作（经过测试）：

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');

class Site extends CI_Controller {
      public function index() 
      {
        echo "default function started.<br/>";
        $this->hello();
      }

      public function hello()
      {
        echo "hello function started.<br/>";
      }
} 
```

# email - 使用 Ruby on Rails 编码为 CID 时从电子邮件中检索和显示内联图像

> ID：13942752
> 
> 赞同：4
> 
> 时间：2012-12-18T22:46:57.750
> 
> 标签：email, url, outlook, inline, attachment

我正在使用[Viewpoint](https://github.com/zenchild/Viewpoint)从 Exchange 服务器检索电子邮件，以便在 Ruby on Rails 应用程序中创建对象。

我可以看到电子邮件正文中包含内联图像，如下所示：

```
<img src=\"cid:94C552FB-8474-437C-AB44-DDF809047AB9\" type=\"image/png\"> 
```

我也可以在项目 blob 中看到一个附件节点：

```
:attachments=>{
  :file_attachment=>{
    :content_type=>{
      :text=>"image/png"
    },
    :content_id=>{
      :text=>"94C552FB-8474-437C-AB44-DDF809047AB9"
    },
    :attachment_id=>{
      :id=>"AAMkAGEzNmExNzEzLTcxMjEtNDM5YS04NmE0LWE0NWU3MWZiMjEwNgBGAAAAAAB4VZcbdHrATrbGrKL0ANCfBwCjSVkOjPEtQoJN3xOKeIYJAAzyZ5e9AACjSVkOjPEtQoJN3xOKeIYJAA25w05NAAABEgAQAK9ad+6BP7VHru83AO7CTrU="
    },
    :name=>{
      :text=>"Hollowbody 2.png"
    }
  }
} 
```

我的问题是，如何将其中的任何内容转换为适合用作 img 标签的 src 的 URL？我见过这样的答案[，](https://stackoverflow.com/questions/9499904/getting-image-from-email)但他们似乎在这方面享有特权

1.  他们在 C# 中运行，它对 Exchange 及其处理资源的方式有特殊的理解（我假设）
2.  它们似乎与 Exchange 在同一台服务器上运行，并且可以访问保存附件的同一 tmp 目录。

如果您在使用另一种语言的另一台机器上，您如何获得这些图像？我知道这是可能的，因为从手机到冰箱等所有设备上都有电子邮件客户端，可以接收来自 Exchange/Outlook 的电子邮件并渲染图像……</p>

# php - 使用多个函数时的 MYSQL 自动提交

> ID：13942754
> 
> 赞同：1
> 
> 时间：2012-12-18T22:47:11.757
> 
> 标签：php, mysql, transactions, autocommit

将尝试使这尽可能简单。我在函数中使用 throw/catch。该函数接受名称、描述和用户数组。它将名称和描述添加到一个表中，然后获取用户数组，并执行一个单独的函数将它们添加到连接器表中。我将功能设置为关闭自动提交，直到输入最后一个用户然后提交。问题是，如果其中一个用户未能进入（由于外键约束），则不会退出事务。我正在调用单独的函数这一事实是否会“重置”自动提交并导致它无法按预期工作？通过将回滚放在 Catch 子句中，我做错了吗？

```
try
{
    autocommit=0
    run insert query
    if query fails: throw error, rollback
    else
      for count of array
        run another function (this function does more SQL and throws its own errors if it fails)

    autocommit=1
}

catch
{
    rollback, autocommit=1;
    display error
} 
```

希望我没有过度简化代码。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T04:26:44.420

```
$this->dbh->beginTransaction();
try {
    // do stuff

    $this->dbh->commit();
} catch (PDOException $e) {
    $this->dbh->rollBack();
    throw $e;
} 
```

# django - Django 管理器中的复选框布局

> ID：13942759
> 
> 赞同：1
> 
> 时间：2012-12-18T22:47:35.203
> 
> 标签：django, django-admin

Django 管理器应用程序的默认表单布局中的一个小但相当烦人的缺陷是复选框的定位，其中复选框及其标签位于第一列，其帮助文本（如果设置）在第二列对齐：

![在此处输入图像描述](../Images/963df65e8bcfe6326771a0f521a449b7.png)

复选框和标签应位于第二列，或者 - 更好的是 - 标签应与第一列（与所有其他标签）对齐，复选框位于第二列。

我认为机会很小，但有没有相对简单的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T01:26:06.013

如果可以通过添加css来实现，那么就比较简单了：

```
class MyModel(admin.ModelAdmin):
    class Media: 
        css = {
             'all': ('/path/to/css.css',)
        } 
```

# c# - 如何获取远程机器上正在运行的进程的描述？

> ID：13942761
> 
> 赞同：8
> 
> 时间：2012-12-18T22:47:46.317
> 
> 标签：c#, process, wmi, remote-access

到目前为止，我已经尝试了两种方法来实现这一点。

第一种方式，我用过`System.Diagnostics`，但`NotSupportedException`在`MainModule`.

```
foreach (Process runningProcess in Process.GetProcesses(server.Name))
{
    Console.WriteLine(runningProcess.MainModule.FileVersionInfo.FileDescription);
} 
```

第二种方式，我尝试使用`System.Management`，但似乎`Description`的`ManagementObject`与`Name`.

```
string scope = @"\\" + server.Name + @"\root\cimv2";
string query = "select * from Win32_Process";
ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);
ManagementObjectCollection collection = searcher.Get();

foreach (ManagementObject obj in collection)
{
    Console.WriteLine(obj["Name"].ToString());
    Console.WriteLine(obj["Description"].ToString());
} 
```

有人会碰巧知道一种更好的方法来获取远程机器上正在运行的进程的描述吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-07T19:59:14.767

好吧，我认为我有一种方法可以很好地满足我的目的。我基本上是从文件中获取文件路径`ManagementObject`并从实际文件中获取描述。

```
ConnectionOptions connection = new ConnectionOptions();
connection.Username = "username";
connection.Password = "password";
connection.Authority = "ntlmdomain:DOMAIN";

ManagementScope scope = new ManagementScope(@"\\" + serverName + @"\root\cimv2", connection);
scope.Connect();

ObjectQuery query = new ObjectQuery("select * from Win32_Process");
ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query);
ManagementObjectCollection collection = searcher.Get();

foreach (ManagementObject obj in collection)
{
    if (obj["ExecutablePath"] != null)
    {
        string processPath = obj["ExecutablePath"].ToString().Replace(":", "$");
        processPath = @"\\" + serverName + @"\" + processPath;

        FileVersionInfo info = FileVersionInfo.GetVersionInfo(processPath);
        string processDesc = info.FileDescription;
    }
} 
```

# winapi - 最小化所有打开的窗口？

> ID：13942765
> 
> 赞同：2
> 
> 时间：2012-12-18T22:48:01.197
> 
> 标签：winapi

我需要通过代码执行与 WindowsKey + M 相同的任务，即。最小化所有打开的窗口。这必须通过 Win32 API 而不是 .Net 来完成。

我在 FreeBasic 中尝试了以下操作，但没有任何反应：

```
Dim hWndConsole As HWND
'Shell_TrayWnd = class name of taskbar
Dim WindowName as String = "Shell_TrayWnd"

hWndConsole = FindWindow(0, strptr(WindowName))
ShowWindow(hWndConsole, SW_MINIMIZE) 'outta my sight 
```

有人知道该怎么做吗？

谢谢你。

* * *

编辑：这是工作解决方案：

```
#include "Windows.bi"

Dim hWndConsole As HWND
'Shell_TrayWnd = class name of taskbar
Dim WindowName as String = "Shell_TrayWnd"
Dim res as LRESULT
CONST minall = 419

hWndConsole = FindWindow( "Shell_TrayWnd",null)

res = postMessage(hWndConsole, WM_COMMAND,  minall, null ) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T23:02:37.467

这对我来说似乎有点像黑客，但以下似乎确实完成了你正在寻找的东西（在 C 中）：

```
HANDLE hwnd = FindWindow( "Shell_TrayWnd", NULL );
LRESULT res = SendMessage( hwnd, WM_COMMAND, (WPARAM)419, 0 ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T23:15:32.623

当您拥有一个窗口的句柄时，您可以通过消息使其最小化`WM_SYSCOMMAND`。例如：

```
SendMessage(hwnd, WM_SYSCOMMAND, SC_MINIMIZE, 0); 
```

因此，您需要做的就是枚举顶级窗口（使用`EnumWindows`命令）并将该命令发送到您要最小化的窗口（这不会是所有顶级窗口 - 可能只有可见的重叠窗口没有`WS_EX_TOOLWINDOW`扩展样式应该像这样最小化）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T11:00:27.653

Putting this out as an option, not a recommendation - simulating the keyboard events for `Win-M`:

```
keybd_event(VK_LWIN, 0, 0, 0);
keybd_event('M', 0, 0, 0);
keybd_event(VK_LWIN, 0, KEYEVENTF_KEYUP, 0); 
```

# asp.net - 在 asp.net 实体框架中通过一对一的关系使两个模型相互了解

> ID：13942766
> 
> 赞同：0
> 
> 时间：2012-12-18T22:48:07.843
> 
> 标签：asp.net, entity-framework, entity-framework-5

我无法让与 EF 的一对一关系正常工作。我为博客、SO 和 msdn 文档评分，但我所做的一切似乎都不起作用。

我有两个模型，一个类和一个考试，如下所示：

```
[Table("classes")]
public class Class
{

    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    [StringLength(255), Required]
    public string Title { get; set; }

    public virtual Exam Exam { get; set; }
}

[Table("exams")]
public class Exam
{
    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    [DisplayFormat(DataFormatString = "{0:h:mm tt}")]
    public DateTime? Time { get; set; }

    public int ClassId { get; set; }
    public virtual Class Class { get; set; }
} 
```

我希望能够从课堂和考试中访问考试，但无论我做什么，我都会发现一些错误。

尝试创建/运行迁移我得到以下信息。

```
The principal end of this association must be explicitly configured using either the relationship fluent API or data annotations. 
```

如果我将此添加到我的上下文中：

```
protected override void OnModelCreating(DbModelBuilder builder)
{
     builder.Entity<Exam>()
        .HasRequired(e => e.Class)
        .WithOptional(c => c.Exam);
} 
```

我收到以下错误：

```
System.Data.Entity.Infrastructure.DbUpdateException: Entities in 'BenchContext.Exams' participate in the 'Class_Exam' relationship. 0 related 'Class_Exam_Source' were found. 1 'Class_Exam_Source' is expected. ---> System.Data.UpdateException: Entities in 'BenchContext.Exams' participate in the 'Class_Exam' relationship. 0 related 'Class_Exam_Source' were found. 1 'Class_Exam_Source' is expected. 
```

我不确定如何告诉流利的 api 如何正确地在两个模型之间使用外键，而我所做的任何事情似乎都不会影响它。

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T11:20:57.147

`ClassId`您正在尝试通过类中的属性建立一对一的关系`Exam`。这需要`ClassId`是唯一的（= 唯一约束），但 EF 尚不支持唯一约束。

EF 目前支持真正的一对一关系的唯一方法是共享主键：

```
[Table("classes")]
public class Class
{

    [Key]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.Identity)]
    public int Id { get; set; }

    [StringLength(255), Required]
    public string Title { get; set; }

    public virtual Exam Exam { get; set; }
}

[Table("exams")]
public class Exam
{
    [Key, ForeignKey("Class")]
    [DatabaseGeneratedAttribute(DatabaseGeneratedOption.None)]
    public int Id { get; set; }

    [DisplayFormat(DataFormatString = "{0:h:mm tt}")]
    public DateTime? Time { get; set; }

    public virtual Class Class { get; set; }
} 
```

`Id`in表`Exams`是 PK 和 FK 到`Classes`表。它不能具有自动生成的值。虽然这是一对一的关系，但它仍然具有 1 - 0..1 的多重性（`Class`可以没有`Exam`但`Exam`必须有`Class`）。

# iphone - 以编程方式从 UITableView 启动特定选项卡，然后启动特定部分和单元格索引

> ID：13942770
> 
> 赞同：0
> 
> 时间：2012-12-18T22:48:26.950
> 
> 标签：iphone, uitableview, indexing, uitabbarcontroller, appdelegate

如果我想在启动时更改活动选项卡，我曾经使用过类似`tabBarController.selectedIndex = 3`的条件，例如我收到推送通知并启动该特定视图。

但是现在我要显示的视图是例如第三个选项卡，并且在该视图（即 a `UITableView`）内我想选择特定的部分和单元格索引。

如果我提前知道这个索引值，我可以以编程方式午餐这个视图吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T23:36:11.533

要选择一个单元格，您需要：

```
-(void)viewDidLoad:(BOOL)animated {
    // assuming you had the table view wired to IBOutlet myTableView
    // and that you wanted to select the first item in the first section
    [myTableView selectRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:0] animated:NO scrollPosition:0];
} 
```

# asp.net - TinyMCE 错误 - 内容无法在框架中显示

> ID：13942772
> 
> 赞同：2
> 
> 时间：2012-12-18T22:48:27.523
> 
> 标签：asp.net, tinymce

我的 ASPX.NET 页面上有一个 TinyMCE 控件。当用户单击控件上的“查找”按钮时： ![在此处输入图像描述](../Images/67e97aeb1e2a89155c0000275bd76c4a.png)

查找“弹出窗口”出现错误“此内容无法在框架中显示” ![在此处输入图像描述](../Images/d4677f97f27b21c3b0578cb3e181fff2.png)

令人费解的是，对于大多数用户来说，div/pop-up 显示得很好（使用完全相同的浏览器版本，IE8）。清除缓存和临时 Internet 文件似乎无法解决问题。

此项目在 web.config 的 system.webserver 节点中

```
<httpProtocol>
  <customHeaders>
    <add name="X-Frame-Options" value="SAMEORIGIN" />
  </customHeaders>
</httpProtocol> 
```

关于如何解决这个问题的任何想法？我无法复制、访问同一个网站并执行相同的操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:33:11.133

您可以尝试使用 tinymce 配置参数[dialog_type](http://www.tinymce.com/wiki.php/Configuration%3adialog_type)：

```
dialog_type: 'modal' 
```

使用模态对话，浏览器不必打开新窗口。

# facebook - 变量 og：标签

> ID：13942773
> 
> 赞同：1
> 
> 时间：2012-12-18T22:48:29.843
> 
> 标签：facebook, facebook-like, meta-tags, meta, lint

您好，感谢您查看我的问题。

```
<meta property="og:image" content="http://www.myurl.com/images/test.png"/> 
```

我有一个旨在为多个“活动”提供服务的应用程序，每个活动都有自己的图形和描述，我想在有人喜欢该页面时显示。我可以随心所欲地更新元标记，但 FB 仍将仅使用最近抓取的数据（来自夜间抓取或来自 linter）。

我读到我可能能够卷曲到 linter，让它在发送类似之前提取新数据，但是当我为数百人和多个活动提供服务时会发生什么？

有没有办法解决？经过几个小时的搜索，我没有找到任何可靠的解决方案。

tl;博士我希望我发布的喜欢尊重当前的元标记并忽略或更新该数据的 FB 缓存。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T23:59:14.593

每个对象/页面都需要自己的 URL，即使这些 URL 由相同的代码处理 - 使用 URL 中的查询字符串参数来识别不同的对象是实现此目的的最常见方法，服务器端 URL 重写是另一种方法

# c++ - 评估（去）引用运算符

> ID：13942779
> 
> 赞同：3
> 
> 时间：2012-12-18T22:49:17.267
> 
> 标签：c++, pointers, c++11, evaluation

我有一个（未注释的...）源文件，我正在尝试理解。

```
static const Map *gCurMap;
static std::vector<Map> mapVec; 
```

然后

```
auto e = mapVec.end();
auto i = mapVec.begin();
while(i!=e) {
    // ...
    const Map *map = gCurMap = &(*(i++));
    // ...
} 
```

我不明白是做什么`&(*(i++))`的。仅使用时它不会编译`i++`，但对我来说它看起来一样，因为我正在“递增” `i`，然后我请求给定地址的值，然后我请求这个值的地址？！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T22:50:15.420

一点也不。`&*x`与 相同`operator&(operator*(x))`，可以是任何你想要的。

仅对于与 .相同的*指针类型*才`T * p`适用。但是 C++ 有用户定义的类型和可重载的运算符。`&*p``p`

解引用运算符 ( `*`) 通常为迭代器重载以返回对容器元素的引用。与号运算符 ( `&`) 对容器元素的影响取决于类作者；如果你想无条件地获取地址，你应该使用`std::addressof(*i++)`（来自你最喜欢的 header `<memory>`）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T22:52:14.637

`mapVec.begin()`返回一个重载的迭代器`operator++`。迭代器的“取消引用”（重载`operator*`）是为了获取`map`对象。引用`&`是，因为`map`它是一个指针，所以它被分配给对象的地址，从`i`. 我们不能仅仅`i++`因为它仍然是一个迭代器，而不是实际的`map`对象。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T22:53:28.403

`i`是一个迭代器，`*i`是该迭代器指向的对象，并且`&*i`是该对象的地址。如果迭代器只是一个普通的旧指针，这将是不必要的，但通常不是那么简单。迭代器通常是某种重载的类类型，`operator*`以允许您访问它所指向的对象。所以这基本上是从迭代器到元素到指向该元素的指针的转换。

我会将增量移到下一行，因为它只会使给定的行更难理解。这将是等效的，因为 的值`i++`是公正`i`的，并且增量发生在之后。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-18T22:53:51.587

它不一样：`i`是一个迭代器。取消引用迭代器会产生对某个对象的引用，即，`T&`对于某个类型的 a `T`。获取这样一个对象的地址会产生一个`T*`，即对象在位置 的地址`i`。迭代器也在同一个表达式中递增只是一个细节，可能是一个坏主意（后递增通常比前递增效率低，并且没有真正需要在代码摘录中对迭代器进行后递增：它也可以在其他位置预先增加）。

# php - 任何关于如何在 PHPUnit 中使用 setUp() 和 tearDown() 的真实例子？

> ID：13942780
> 
> 赞同：31
> 
> 时间：2012-12-18T22:49:27.760
> 
> 标签：php, unit-testing, testing, phpunit

方法`setUp()`和`tearDown()`在每次测试之前和之后调用。但实际上，有没有关于我为什么需要这个的真实文字示例？

检查其他人的测试，我总是看到类似的东西：

```
public function setUp()
{
    $this->testsub = new TestSubject();
}

public function tearDown()
{
    unset($this->testsub);
}

public function testSomething()
{
    $this->assertSame('foo', $this->testsub->getFoo());
} 
```

当然，这种方式与“旧的”局部变量方式几乎没有区别。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-18T23:10:14.107

如果您单独执行每个测试方法，您的测试代码将共享很多行，这些行只是创建要测试的对象。此共享代码可以（但不应该）进入 setup 方法。

创建要测试的对象所需执行的任何操作也会进入 setup 方法，例如创建注入到测试对象的构造函数中的模拟对象。

这一切都不需要拆除，因为下一次调用 setup 将使用一组新的对象初始化类成员变量。

唯一需要拆卸的是您的测试是否会永久留下某些内容，例如创建的文件或数据库条目。编写执行此类操作的测试确实不是一个好主意，但在某些时候，您无法再抽象，不得不接触硬盘驱动器、数据库或真实网络之类的东西。

因此，除了需要拆卸之外，还有很多设置，如果没有为此测试做任何工作，我总是删除拆卸方法。

关于模拟，我是这样工作的：

```
private $_mockedService;
private $_object;
protected function setUp()
{
    $this->_mockedService = $this->getMock('My_Service_Class');
    $this->_object = new Tested_Class($this->_mockService);
}

public function testStuff()
{
    $this->_mockedService->expects($this->any())->method('foo')->will($this->returnValue('bar'));
    $this->assertEquals('barbar', $this->_object->getStuffFromServiceAndDouble());
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-18T22:57:45.547

您可以实例化一堆夹具对象，并在每个测试中将它们用作实例变量，而不是为每个测试单独构造它们。

您可以在 setUp 中创建文件句柄等资源，然后确保在 tearDown 中关闭它们。如果您正在编写临时文件，则可以确保删除它们。如果你打开一个数据库连接，你可以关闭它（尽管你可能想在别处这样做 - `setupBeforeClass`/`tearDownAfterClass`每个测试文件都会调用它，而不是每个测试用例。）

这只是一个之前/之后的钩子，一般来说这是一件很时髦的事情。使用它来让您的生活更轻松，或者不要使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-12T16:09:59.963

在接受的答案中提供的示例中存在内存泄漏。您应该添加拆解：

```
protected function tearDown()
{
    $this->_mockedService = null;
} 
```

PHPUnit 为每个测试方法调用创建新的测试用例对象。因此，如果有 4 个测试方法 - 将有 4 个对象，并且将创建 4 个 mockedService。并且直到脚本结束（整个测试套件）才会删除它们。因此，您需要删除所有对象并取消设置 tearDown 中的所有变量以防止内存泄漏。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-18T23:03:30.457

您几乎可以在您正在测试的类中有依赖项的任何时候使用它。一个典型的例子可能是某种存储应用程序状态的对象（会话对象、购物车等）。

例如，我有一个类要计算购物车对象定义的购物车内容的运费。假设这个购物车通过依赖注入传递到运输计算类。要测试类的大多数方法，您可能需要实际实例化一个购物车对象并将其设置在类中，以便对各种方法进行单元测试。您可能还需要将商品添加到购物车中。所以你可能有这样的设置：

```
public function setUp()
{
    $this->cart = new cart();
    $this->cart->add_item('abc');
    $this->cart->add_item('xyz');
} 
```

我们还假设您的测试方法实际上可能会修改购物车的商品，并用运费信息装饰它们。您不希望一次测试中的信息渗入下一次测试，因此您只需在最后取消设置购物车。

```
public function tearDown()
    unset($this->cart);
} 
```

# ruby-on-rails-3 - Ruby on Rails - image_tag 链接在帖子中不起作用

> ID：13942782
> 
> 赞同：-1
> 
> 时间：2012-12-18T22:49:46.343
> 
> 标签：ruby-on-rails-3, carrierwave

试图链接到我最近上传的图片

```
<%= link_to (image_tag (post.image_url(:thumb))), post.image.url(:original), :class => 'postimage' %> 
```

无论如何它根本不起作用...

```
 <% @post.image do |image| %>

   <%= link_to (image_tag (post.image_url(:thumb))), post.image.url(:original), :class        => 'postimage' %>

 <% end %> 
```

有趣的是

```
<%=  @post.image %> 
```

作品。但只显示 /uploads/post/image/3/eKoh3.jpg

完整代码在这里[https://gist.github.com/4332533](https://gist.github.com/4332533)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T09:26:40.480

这条线在我看来是错误的：

```
<% @post.image do |image| %> 
```

（顺便说一句，您的要点实际上是说`@post.image.each do |image|`，我假设这是您在上面要做的）

如果您在 Post 模型的`:image`属性上安装上传器，那么这没有任何意义。已安装的上传器允许您上传一个图像，并且您不能使用`each`.

我不确定你想做什么。您是否尝试遍历所有版本？尝试`post.image.versions.each`

您是否要上传多张图片？Carrierwave 无法直接帮助您。您需要创建一个新模型，`Image`并在此处安装您的上传器。你`Post`需要一条线

```
has_many :images 
```

您的`Image`模型将需要`belong_to :post`. 您还需要弄清楚如何上传和管理该新表中的图像。

# google-docs-api - Google Docs API - Zend GData - 创建新文档 - 400 错误请求 - 无法转换文档 - 间歇性

> ID：13942783
> 
> 赞同：1
> 
> 时间：2012-12-18T22:49:49.043
> 
> 标签：google-docs-api, zend-gdata

我正在使用 Zend GData 将文档上传到 Google 文档。

该代码工作正常，除了偶尔会引发异常：

```
400 Bad Request - Unable to convert document. 
```

这是一个间歇性问题。所以我相信代码不是问题。

```
try {
    $test=$sharedocs->insertEntry($dataShare, $uri, 'Zend_Gdata_Entry',$header);
} catch (Exception $e ) {
    echo $e->getMessage();
    exit();
} 
```

这是例外

```
    Zend_Gdata_App_HttpException 对象
    (
        [_httpClientException:protected] =>
        [_response:protected] => Zend_Http_Response 对象
            (
                [版本：受保护] => 1.1
                [代码：受保护] => 400
                [消息：受保护] => 错误请求
                [标题：受保护] => 数组
                    (
                        [内容类型] => 文本/html；字符集=UTF-8
                        [日期] => 格林威治标准时间 2012 年 12 月 14 日星期五 23:32:18
                        [过期] => 格林威治标准时间 2012 年 12 月 14 日星期五 23:32:18
                        [缓存控制] => 私有，max-age=0
                        [X-content-type-options] => nosniff
                        [X-frame-options] => SAMEORIGIN
                        [X-xss-保护] => 1; 模式=块
                        [服务器] => GSE
                        [连接] => 关闭
                    )
                [body:protected] => 无法转换文档。
            )
        [_previous:Zend_Exception:private] =>
        [message:protected] => 预期响应码 200，得到 400
    无法转换文档。
        [字符串：异常：私人] =>
        [代码：受保护] => 0
        [文件：受保护] => /usr/local/zend/share/ZendFramework/library/Zend/Gdata/App.php
        [行：受保护] => 714
        [trace:Exception:private] => 数组
            (
                [0] => 数组
                    (
                        [文件] => /usr/local/zend/share/ZendFramework/library/Zend/Gdata.php
                        [行] => 219
                        [功能] => 执行HttpRequest
                        [类] => Zend_Gdata_App
                        [类型] => ->
                        [参数] => 数组
                            (
                                [0] => 发布
                                [1] => https://docs.google.com/feeds/documents/private/full
                                [2] => 数组
                                    (
                                        [0] => 内容类型：多部分/相关；边界="END_OF_PART"
                                        [1] => 蛞蝓：test.doc
                                        [2] => 内容类型：应用程序/msword
                                        [3] => 资源 ID:4321
                                        [x-http-method-override] =>
                                        [授权] => AuthSub token="xxxxx"
                                    )
                                [3] =>

          辩论室 (12345)

                                [4] => 应用程序/原子+xml
                                [5] =>
                            )
                    )
                [1] => 数组
                    (
                        [文件] => /usr/local/zend/share/ZendFramework/library/Zend/Gdata/App.php
                        [行] => 905
                        [功能] => 执行HttpRequest
                        [类] => Zend_Gdata
                        [类型] => ->
                        [参数] => 数组
                            (
                                [0] => 发布
                                [1] => https://docs.google.com/feeds/documents/private/full
                                [2] => 数组
                                    (
                                        [0] => 内容类型：多部分/相关；边界="END_OF_PART"
                                        [1] => 蛞蝓：test.doc
                                        [2] => 内容类型：应用程序/msword
                                        [3] => 资源 ID:4321
                                        [x-http-method-override] =>
                                    )
                                [3] =>

          辩论室 (12345)

                                [4] => 应用程序/原子+xml
                            )
                    )
                [2] => 数组
                    (
                        [文件] => /usr/local/zend/share/ZendFramework/library/Zend/Gdata/App.php
                        [线] => 980
                        [功能] => 发布
                        [类] => Zend_Gdata_App
                        [类型] => ->
                        [参数] => 数组
                            (
                                [0] =>

          辩论室 (12345)

                                [1] =>
                                [2] =>
                                [3] =>
                                [4] => 数组
                                    (
                                        [0] => 内容类型：多部分/相关；边界="END_OF_PART"
                                        [1] => 蛞蝓：test.doc
                                        [2] => 内容类型：应用程序/msword
                                        [3] => 资源 ID:4321
                                    )
                            )
                    )
                [3] => 数组
                    (
                        [文件] => /var/www/GoogleFunctions.php
                        [线] => 90
                        [功能] => 插入条目
                        [类] => Zend_Gdata_App
                        [类型] => ->
                        [参数] => 数组
                            (
                                [0] =>

          辩论室 (12345)

                                [1] =>
                                [2] => Zend_Gdata_Entry
                                [3] => 数组
                                    (
                                        [0] => 内容类型：多部分/相关；边界="END_OF_PART"
                                        [1] => 蛞蝓：test.doc
                                        [2] => 内容类型：应用程序/msword
                                        [3] => 资源 ID:4321
                                    )
                            )
                    )
                [4] => 数组
                    (
                        [文件] => /var/www/myPaper.php
                        [行] => 342
                        [功能] => createNewDoc
                        [参数] => 数组
                            (
                                [0] => 辩论空间 (12345)
                                [1] => Zend_Gdata_Docs 对象
                                    (
                                        [_defaultPostUri:protected] => https://docs.google.com/feeds/documents/private/full
                                        [_registeredPackages:protected] => 数组
                                            (
                                                [0] => Zend_Gdata_Docs
                                                [1] => Zend_Gdata_Kind
                                                [2] => Zend_Gdata_Extension
                                                [3] => Zend_Gdata
                                                [4] => Zend_Gdata_App_Extension
                                                [5] => Zend_Gdata_App
                                            )
                                        [_httpClient:protected] => Zend_Gdata_HttpClient 对象
                                            (
                                                [_authSubPrivateKeyId:Zend_Gdata_HttpClient:private] =>
                                                [_authSubToken:Zend_Gdata_HttpClient:private] => 1/xxxxx
                                                [_clientLoginToken:Zend_Gdata_HttpClient:private] =>
                                                [_clientLoginKey:Zend_Gdata_HttpClient:private] =>
                                                [_streamingRequest:protected] =>
                                                [配置：受保护] => 数组
                                                    (
                                                        [最大重定向] => 0
                                                        [严格重定向] => 1
                                                        [用户代理] => Zend_Framework_Gdata/1.11.12
                                                        [超时] => 10
                                                        [适配器] => Zend_Http_Client_Adapter_Socket
                                                        [http版本] => 1.1
                                                        [保活] =>
                                                        [商店响应] => 1
                                                        [严格] => 1
                                                        [输出流] =>
                                                        [编码饼干] => 1
                                                        [rfc3986_strict] =>
                                                    )
                                                [适配器：受保护] => Zend_Http_Client_Adapter_Socket 对象
                                                    (
                                                        [套接字：受保护] =>
                                                        [connected_to:protected] => 数组
                                                            (
                                                                [0] =>
                                                                [1] =>
                                                            )
                                                        [out_stream:protected] =>
                                                        [配置：受保护] => 数组
                                                            (
                                                                [持久] =>
                                                                [ssltransport] => ssl
                                                                [sslcert] =>
                                                                [sslpassphrase] =>
                                                                [ssluse上下文] =>
                                                                [最大重定向] => 0
                                                                [严格重定向] => 1
                                                                [用户代理] => Zend_Framework_Gdata/1.11.12
                                                                [超时] => 10
                                                                [http版本] => 1.1
                                                                [保活] =>
                                                                [商店响应] => 1
                                                                [严格] => 1
                                                                [输出流] =>
                                                                [编码饼干] => 1
                                                                [rfc3986_strict] =>
                                                            )

                                                        [方法：受保护] => POST
                                                        [_context:protected] => 资源 ID #10
                                                    )
                                                [uri:protected] => Zend_Uri_Http 对象
                                                    (
                                                        [_username:protected] =>
                                                        [_密码：受保护] =>
                                                        [_host:protected] => docs.google.com
                                                        [_port:protected] => 443
                                                        [_path:protected] => /feeds/documents/private/full
                                                        [_query:protected] =>
                                                        [_fragment:protected] =>
                                                        [_regex:protected] => 数组
                                                            (
                                                                [转义] => %[[:xdigit:]]{2}
                                                                [未保留] => [A-Za-z0-9-_.!~*'()\[\]]
                                                                [段] => (?:%[[:xdigit:]]{2}|[A-Za-z0-9-_.!~*'()\[\]:@&=+$,;] )*
                                                                [路径] => (?:\/(?:(?:%[[:xdigit:]]{2}|[A-Za-z0-9-_.!~*'()\[\]: @&=+$,;])*)?)+
                                                                [尿酸] => (?:%[[:xdigit:]]{2}|[A-Za-z0-9-_.!~*'()\[\];\/?:@&=+ $,])
                                                            )

                                                        [_scheme:protected] => https
                                                    )
                                                [标题：受保护] => 数组
                                                    (
                                                        [用户代理] => 数组
                                                            (
                                                                [0] => 用户代理
                                                                [1] => MyCompany-MyApp-1.0 Zend_Framework_Gdata/1.11.12
                                                            )
                                                        [内容类型] => 数组
                                                            (
                                                                [0] => 内容类型
                                                                [1] => 应用程序/原子+xml
                                                            )
                                                        [蛞蝓] => 数组
                                                            (
                                                                [0] => 蛞蝓
                                                                [1] => 测试.doc
                                                            )
                                                        [resourceid] => 数组
                                                            (
                                                                [0] => 资源 ID
                                                                [1] => 4321
                                                            )
                                                        [授权] => 数组
                                                            (
                                                                [0] => 授权
                                                                [1] => AuthSub 令牌="1/xxxxx"
                                                            )
                                                        [接受编码] => 数组
                                                            (
                                                                [0] => 接受编码
                                                                [1] => 身份
                                                            )
                                                        [内容长度] => 数组
                                                            (
                                                                [0] => 内容长度
                                                                [1] => 273
                                                            )
                                                    )
                                                [方法：受保护] => POST
                                                [paramsGet:protected] => 数组
                                                    (
                                                    )
                                                [paramsPost:protected] => 数组
                                                    (
                                                    )
                                                [enctype:protected] => 应用程序/原子+xml
                                                [raw_post_data:protected] =>

          辩论室 (12345)

                                                [认证：受保护] =>
                                                [文件：受保护] => 数组
                                                    (
                                                    )
                                                [body_field_order:protected] => 数组
                                                    (
                                                        [服务] => 标量
                                                    )
                                                [cookiejar：受保护] =>
                                                [last_request:protected] => POST /feeds/documents/private/full HTTP/1.1
    主机：docs.google.com
    连接：关闭
    用户代理：MyCompany-MyApp-1.0 Zend_Framework_Gdata/1.11.12
    内容类型：application/atom+xml
    蛞蝓：test.doc
    资源 ID：4321
    授权：AuthSub token="1/xxxxx"
    接受编码：身份
    内容长度：273

          辩论室 (12345)

                                                [last_response:protected] => Zend_Http_Response 对象
                                                    (
                                                        [版本：受保护] => 1.1
                                                        [代码：受保护] => 400
                                                        [消息：受保护] => 错误请求
                                                        [标题：受保护] => 数组
                                                            (
                                                                [内容类型] => 文本/html；字符集=UTF-8
                                                                [日期] => 格林威治标准时间 2012 年 12 月 14 日星期五 23:32:18
                                                                [过期] => 格林威治标准时间 2012 年 12 月 14 日星期五 23:32:18
                                                                [缓存控制] => 私有，max-age=0
                                                                [X-content-type-options] => nosniff
                                                                [X-frame-options] => SAMEORIGIN
                                                                [X-xss-保护] => 1; 模式=块
                                                                [服务器] => GSE
                                                                [连接] => 关闭
                                                            )
                                                        [body:protected] => 无法转换文档。
                                                    )
                                                [redirectCounter:protected] => 0
                                                [_unmaskStatus:protected] =>
                                                [_queryBracketsEscaped:protected] => 1
                                            )
                                        [_majorProtocolVersion:protected] => 1
                                        [_minorProtocolVersion:protected] =>
                                        [_useObjectMapping:protected] => 1
                                    )
                            )
                    )
            )
        [上一个：例外：私人] =>
    )

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-27T19:20:28.307

哦，所以我在同一行回答了某人的问题，却忘了把它放在我的问题上。:D

( [https://stackoverflow.com/a/14290948/1736522](https://stackoverflow.com/a/14290948/1736522) ) [Google Docs/Drive API 不允许将新文档插入新的 Google 帐户](https://stackoverflow.com/questions/14288836/google-docs-drive-api-does-not-permit-a-new-document-to-be-inserted-into-a-new-g)

# android - 尝试从本地主机获取 xml 时在 Android 应用程序中获取 404

> ID：13942785
> 
> 赞同：2
> 
> 时间：2012-12-18T22:49:55.070
> 
> 标签：android, xml, web

这一定是非常愚蠢的事情，现在试图解决这个问题几天，但它真的不起作用。我到处搜索，可能有人有同样的问题，但我似乎找不到。

我正在开发一个 Android 应用程序，这个应用程序从网站上提取了一些 xml。由于这个网站宕机了很多，我决定保存它并在本地运行它。现在我做了什么：

*   我下载了用于托管下载的 xml 文件的 kWs 应用程序。
*   我将文件放在正确的目录中，并且可以通过移动浏览器访问它，但不能通过我的应用程序访问（与我从其他网站拉取文件时使用的代码相同，不是由我托管，唯一的区别显然是 URL）。

因此，我尝试将其托管在我的 PC 上并从那里使用我的应用程序访问它。同样的结果，移动浏览器找到它没有问题，但应用程序一直说`404 Not Found: "The requested URL /test.xml&amp;parama=Someone&amp;paramb= was not found on this server."`

*注意：*不要介意我发送的 2 个参数，我需要它来从不是我托管的网站上获取正确的东西。

**我的代码：**

```
public String getStuff(String name){
        String URL = "http://10.0.0.8/test.xml";

        ArrayList<NameValuePair> params = new ArrayList<NameValuePair>(2);
        params.add(new BasicNameValuePair("parama", name));
        params.add(new BasicNameValuePair("paramb", ""));

        APIRequest request = new APIRequest(URL, params);
        try {
                RequestXML rxml = new RequestXML();
                AsyncTask<APIRequest, Void, String> a = rxml.execute(request);
                ...
        } catch(Exception e) {
                e.printStackTrace();
        }
        return null;
} 
```

那应该可以正常工作。现在`RequestXML`上课部分：

```
class RequestXML extends AsyncTask<APIRequest, Void, String>{
        @Override
        protected String doInBackground(APIRequest... uri) {
                HttpClient httpclient = new DefaultHttpClient();
                String completeUrl = uri[0].url;

        // ... Add parameters to URL ...

                HttpGet request = null;
                try {
                        request = new HttpGet(new URI(completeUrl));
                } catch (URISyntaxException e1) {
                        e1.printStackTrace();
                }

                HttpResponse response;
                String responseString = "";
                try {
                        response = httpclient.execute(request);
                        StatusLine statusLine = response.getStatusLine();
                        if(statusLine.getStatusCode() == HttpStatus.SC_OK){
                        // .. It crashes here, because statusLine.getStatusCode()
                        // returns a 404 instead of a 200. 
```

*   xml 只是普通的 xml，没什么特别的。我将*.htaccess*文件的内容更改为“ **ALLOW FROM ALL** ”（有效，因为我的移动设备上的浏览器可以访问它并显示正确的 xml）。

*   我正在运行 Android 4.0.4，并且在我的移动设备上使用默认浏览器和 chrome。

*   我正在使用 MoWeS 在我的 PC 上托管网站。

任何帮助将不胜感激，如果您在找到此问题的答案之前需要了解任何信息，我将非常乐意为您提供该信息。

谢谢你的时间！

干杯。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T23:01:04.313

我想你只是错过了文件名后面的问号

/test.xml?¶ma=某人¶mb=

# python - 如何展平 dtype 对象的 numpy 数组

> ID：13942794
> 
> 赞同：9
> 
> 时间：2012-12-18T22:51:08.093
> 
> 标签：python, numpy

我正在使用不同长度的 ndarray 切片，我希望我的结果是平坦的。例如：

```
a = np.array(((np.array((1,2)), np.array((1,2,3))), (np.array((1,2)), np.array((1,2,3,4,5,6,7,8))))) 
```

有没有直接的方法通过使用 numpy 功能（没有循环）使这个数组变平？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-18T22:55:41.370

您可以尝试将其展**平**，然后使用**hstack**，它将数组按顺序水平堆叠。

```
>>> a = np.array(((np.array((1,2)), np.array((1,2,3))), (np.array((1,2)), np.array((1,2,3,4,5,6,7,8)))))
>>> np.hstack(a.flatten())
array([1, 2, 1, 2, 3, 1, 2, 1, 2, 3, 4, 5, 6, 7, 8]) 
```

# android - 在 Android 应用程序中需要 OpenGL ES 2

> ID：13942795
> 
> 赞同：2
> 
> 时间：2012-12-18T22:51:09.897
> 
> 标签：android, opengl-es, android-manifest

可以肯定的是，在 Android 应用程序中需要 ES2 时，您只需要附加 `android:glEsVersion="0x00020000"`到任何使用功能标签？

这实际上应该是它自己的使用功能标签吗？将其组合为另一个需要特定硬件的使用功能标签中的属性是否有任何问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T22:58:56.433

由于开发人员指南对此有[一个部分](http://developer.android.com/guide/topics/graphics/opengl.html#manifest)：

```
<!-- Tell the system this app requires OpenGL ES 2.0\. -->
<uses-feature android:glEsVersion="0x00020000" android:required="true" /> 
```

我会说上面的代码应该没问题。

# c++ - 如何从多图打印

> ID：13942803
> 
> 赞同：-1
> 
> 时间：2012-12-18T22:52:26.373
> 
> 标签：c++, printing, multimap

嘿，我试图从多图打印出来。我的多图是：`multimap<int,Questions*> map;` 我想要发生的事情是当我提出问题时： questions.printQuestion(1); 它以随机顺序打印出 3 个问题。但是到目前为止，我得到的只是调用 printQuestion 时的运行时错误。

```
Run time error: 
Debug Assertion Failed!
Expression: map/set iterator may not be dereferencable 
```

这是我的代码：

```
#include <iostream>
#include "Questions.h"
using namespace std;

Questions :: Questions()
{
}

Questions::Questions(string question,string correctAnswer, string wrongAnswer1,string wrongAnswer2,string wrongAnswer3)
{
    this->question = question;
    this->pAnswers = new string[4];
    this->pAnswers[0]=wrongAnswer1;
    this->pAnswers[1]=wrongAnswer2;
    this->pAnswers[2]=wrongAnswer3;
    this->pAnswers[3] =correctAnswer;
    this->shuffle(this->pAnswers,4);
    this->correctAnswer = correctAnswer;
}

void Questions::shuffle(string *array, int n)
{
    random_shuffle(&this->pAnswers[0],&this->pAnswers[4]);
}

string Questions::getQuestion()
{
    return this->question;
}

string Questions::getCorrectAnswer()
{
    return this->correctAnswer;
}

string* Questions::getAnswers()
{
    return this->pAnswers;
}

bool Questions::checkAnswer(string answer)
{
    if(this->correctAnswer.compare(answer)==0)
    {
        return true;
    }
    return false;
}

void Questions::questionStore()
{
    Questions *q1 = new Questions("Whats the oldest known city in the world?", "Sparta" , "Tripoli" , "Rome", "Demascus");
    Questions *q2 = new Questions("What sport in the olympics are beards dissallowed?", "Judo", "Table Tennis" , "Volleyball", "Boxing");
    Questions *q3 = new Questions("What does an entomologist study?", "People" , "Rocks" , "Plants", "Insects");
    Questions *q4 = new Questions("Where would a cowboy wear his chaps?", "Hat" , "Feet" , "Arms", "Legs");
    Questions *q5 = new Questions("which of these zodiac signs is represented as an animal that does not grow horns?", "Aries" , "Tauris" , "Capricorn", "Aquarius");
    Questions *q6 = new Questions("Former Prime Minister Tony Blair was born in which country?", "Northern Ireland" , "Wales" , "England", "Scotland");
    Questions *q7 = new Questions("Duffle coats are named after a town in which country?", "Austria" , "Holland" , "Germany", "Belgium");
    Questions *q8 = new Questions("The young of which creature is known as a squab?", "Horse" , "Squid" , "Octopus", "Pigeon");
    Questions *q9 = new Questions("The main character in the 2000 movie ""Gladiator"" fights what animal in the arena?", "Panther" , "Leopard" , "Lion", "Tiger");

    addQuestion(1,q1);
    addQuestion(1,q2);
    addQuestion(1,q3);
    addQuestion(2,q4);
    addQuestion(2,q5);
    addQuestion(2,q6);
    addQuestion(3,q7);
    addQuestion(3,q8);
    addQuestion(3,q9);
}

void Questions::addQuestion(int level, Questions *question)
{
    map.insert(pair<int,Questions*>(level,question));
}

Questions* Questions::printQuestion(int level)
{
    multimap<int, Questions*>::iterator iter;
    pair<multimap<int, Questions*>::iterator,multimap<int, Questions*>::iterator> constIter;
    for (multimap< int, Questions*, less< int > >::const_iterator iter =map.begin();
    iter != map.end(); ++iter )
      cout << iter->first << '\t' << iter->second << '\n';

        /*constIter = map.equal_range(level);
    size_t sz = distance(constIter.first, ret.second);
    size_t idx = rand();
    if(ret.first != ret.second)
    advance(ret.first, idx);
    it =ret.first;
    Questions* question = (*it).second;
    return (*it).second;
       cout << question->getQuestion() << std::endl;*/
       return iter->second;
} 
```

任何人都可以帮我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T22:59:50.553

当你说你得到一个“运行时错误”时，我假设函数打印和整数以及指针的地址。您可能打算在打印之前取消引用指向问题的指针：

```
*it->second 
```

另一个问题是你在 return 时取消引用过去的迭代器：语句`iter->second`前面的循环在. 取消引用过去的结束迭代器是非法的，并导致未定义的行为（这是实际断言的错误）。`return``iter == map.end()`

当然，您可能应该`Question`首先存储对象而**不是**在堆上分配它们：它们很可能会泄漏。*在“Question* s* *”对象中存储“question”似乎也不太正确：您可能希望必须分开类：一个用于单个问题，一个用于收集多个问题。

# javascript - 通过单击按钮淡出/淡入单独的 div

> ID：13942811
> 
> 赞同：-3
> 
> 时间：2012-12-18T22:52:41.837
> 
> 标签：javascript, jquery, html, fade

我看到了一个 Flash 网站，现在很好奇这是否可以使用 Jquery 构建，显然不是全部。我更希望通过单击按钮来淡出 div1 和 div2 。这是示例站点：www.justinfarrellyconstruction.com

示例：如果我来到主页并单击投资组合按钮，Gallery Div 将淡出然后淡入另一个图像。同时 Text div 将淡出其内容并加载投资组合文本。

如果这没有意义，我深表歉意，这对我来说都是全新的，我正在努力学习。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T23:01:20.210

你的问题很模糊，但希望这个例子能让你朝着正确的方向开始：http: [//jsfiddle.net/3mJ3z/](http://jsfiddle.net/3mJ3z/)

基本上，有 3 个菜单项和 3 个对应的内容项。单击菜单项时，所有其他内容项都会消失，相应的内容项会淡入。HTML：

```
<div class="item-1 content-item">
    I am the content for item 1
</div>

<div class="item-2 content-item" style="display: none;">
    I am the content for item 2
</div>

<div class="item-3 content-item" style="display: none;">
    I am the content for item 3
</div>

<ul>
    <li class="change-item" data-item="1">Item 1</li>
    <li class="change-item" data-item="2">Item 1</li>
    <li class="change-item" data-item="3">Item 1</li>
</ul>
​ 
```

JS：

```
$('.change-item').click(function(){
    var this_item = $(this).attr("data-item");
    $('.content-item').hide();
    $('.item-' + this_item).fadeIn();
});​ 
```

# php - 如何选择从 n 开始的 mySQL 中的每一行

> ID：13942812
> 
> 赞同：2
> 
> 时间：2012-12-18T22:52:51.943
> 
> 标签：php, mysql

我在[这里](https://stackoverflow.com/questions/13928848/how-to-split-mysql-information-to-show-in-html-columns)创建了一个问题，我认为这有点臃肿。在这里略过这个问题是我的要求：

我需要创建 3 个 mySQL 查询来获取该行中的所有信息，以便我可以将信息格式化为一个 HTML 表。

这是我选择所有内容的查询：

```
$qry_questions = mysql_query("SELECT * FROM mbr_qa_questions ORDER BY q_votes DESC);
while($row = mysql_fetch_array($qry_questions){
    //Grab all information
} 
```

现在，我需要进行三个与上述类似的查询，但我需要它来执行以下操作：

```
pull everything from every third row in a table starting at row #1
pull everything from every third row in a table starting at row #2
pull everything from every third row in a table starting at row #3 
```

然后我会将这些查询中的每一个放入 3 列之一。

我不能通过唯一 ID 做到这一点。是的，它是一个自动递增的 ID，但我可能不得不将整行移动到另一个表中。

编辑：我已经添加了对每一行进行计数并将查询结果放入正确的“bin”的尝试

```
//GIVE EACH ENTRY A COLUMN NUMBER
$count++;
if($count >= 4){
    $count = 1; 
}?> 

<div class="col" id="col-1">
    <?PHP
    while($count == 1){
        include("pieces/answers/newAnswerLayout.php"); 
    }
    ?>
</div>
<div class="col" id="col-2">
    <?PHP
    while($count == 2){
        include("pieces/answers/newAnswerLayout.php"); 
    }
    ?>
</div>
<div class="col" id="col-3">
    <?PHP
    while($count == 3){
        include("pieces/answers/newAnswerLayout.php"); 
    }
    ?>
</div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T23:08:08.070

这是获取 MySQL 返回的结果集的一种方法。（但只返回所有行并在应用程序中每隔三行获取一次可能会更容易）。但它可以很容易地在 MySQL 中完成。请注意，您的原始查询包含在括号中（作为内联视图），别名为`r`.

```
SELECT r.*
  FROM ( 
         SELECT *
           FROM mbr_qa_questions
          ORDER BY q_votes DESC
       ) r
 CROSS
  JOIN ( SELECT @i := 0 ) s
HAVING ( @i := @i + 1) MOD 3 = 1 
```

这将从第一行开始每隔三行返回一次。要从第 2 行和第 3 行开始每隔三行，请将`= 1`HAVING 子句中的文字替换为`= 2`or `= 3`（分别）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T22:58:04.217

为什么需要三个不同的查询？相反，您是否不能保留您拥有的单个查询，有一个在循环的每次迭代中递增的计数器，并且在 %3 上执行您对案例 #1、#2 或 #3 所做的任何事情？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T23:06:43.017

您可能可以只使用计数器以更简单的方式执行此操作，但我会这样做：

```
$questions = array();
$results = mysql_query("SELECT * FROM mbr_qa_questions ORDER BY q_votes DESC");

while($row = mysql_fetch_array($results)){
    $questions[] = $row;
}

for($i = 0; $i < count($questions); $i++) {
  if($i + 1 % 3 == 0) {
     $questions[$i];//this is a 3rd, so do something with it
  }
} 
```

# java - Eclipse - 引用 Java 资源

> ID：13942813
> 
> 赞同：3
> 
> 时间：2012-12-18T22:52:56.733
> 
> 标签：java, eclipse, resources

这可能只是 IDE 的细节。但是对于 Eclipse，我对组织我的类和资源更感兴趣。

据我了解，默认的“src”目录是放置我所有资源的地方。如果我的资源在那里，我可以像这样引用它们：

```
ImageIcon icon = new ImageIcon("src/icon-16x16.png"); 
```

如果我只为图标创建一个目录（在 src/ 目录内），那么我只需将路径更改为：

```
ImageIcon icon = new ImageIcon("src/icons/icon-16x16.png"); 
```

所以，现在我想在 src/ 目录之外为我的资源创建一个单独的目录。

这是我的旧结构：

```
prj.HelloWorld  (project)
-> src/ .........
-> src/images/ ........
-> src/ (default package) ......classes.java 
```

这是我清理的内容：

```
prj.HelloWorld  (project)
-> classes/ .........
-> images/ ........
-> media / ........ 
```

现在，我对使用专用项目 ( **prj.Resources** ) 很感兴趣，只是为了我可以在所有项目中共享的公共资源。

```
prj.Resources  (project)
-> global_classes/ .........
-> global_images/ ........
-> global_media / ........

prj.HelloWorld  (project)
-> classes/ .........
-> images/ ........
-> media / ........ 
```

然后通过将**prj.Resources**添加到 Java Build Path 内的 Projects 选项卡来修改**prj.HelloWorld 。**

 **（prj.HelloWorld > 属性 > Java 构建路径 > 项目选项卡 > 添加...）

到目前为止，我已经做到了，并且**prj.Resources/global_classes/**中的任何类都被成功检测到。

但是 global_images 中的图像不是。

```
ImageIcon icon0 = new ImageIcon("global_images/icon.png"); 
```

我知道我们可以使用位于不同项目中的资源，但我在这里遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:05:35.680

您无法访问 global_images 文件夹，因为它不在 HelloWorld 项目的根文件夹中。

但是您可以给出显示该项目资源文件夹的相对路径。

```
 ImageIcon icon0 = new ImageIcon("../Resources/global_images/icon.png"); 
```

[路径信息](http://webhelp.esri.com/arcgisdesktop/9.2/index.cfm?TopicName=Pathnames_explained%3a_Absolute,_relative,_UNC,_and_URL)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T23:32:26.150

您可以使用[Maven](http://maven.apache.org/)构建基础架构。有一个很好的eclipse集成。

Maven 被大量使用。Maven 使用最佳实践/约定，如目录树。

它进行库依赖管理并提供许多构建工具。

*   src/main/java - java 源代码
*   src/main/resources - 例如图片资源
*   src/main/webapp - Web 应用程序根目录
*   src/test/java - junit 测试
*   src/test/resources - 测试资源
*   目标 - 构建目录

有多模块项目，父项目，继承父的依赖版本管理等功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T03:17:08.833

了解如何从[URL](http://docs.oracle.com/javase/1.4.2/docs/api/javax/swing/ImageIcon.html#ImageIcon%28java.net.URL%29)构建 ImageIcon以及如何[找到](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Class.html#getResource%28java.lang.String%29)相对于已编译 .class 文件位置的 URL。Eclipse 会自动将任何不是 .java 文件的内容复制到输出文件夹，因此您的图像也会到那里。这样做可以让您的程序继续工作，无论您是否将其打包在 .jar 文件中，以及它们是否在不同的项目中，只要 Java 构建路径正确地说明了它们的关系（它用于确定运行时类路径，由 Class#getResource() 搜索。**

# java - ehcache 基于日期

> ID：13942814
> 
> 赞同：11
> 
> 时间：2012-12-18T22:53:00.150
> 
> 标签：java, hibernate, caching, ehcache

我正在使用 ehcache 2.5.4。

我有一个对象需要全天缓存并在每天上午 00:00 用新值刷新。

目前使用 ehcache 配置，我只能设置生存时间和空闲时间，但这取决于我创建对象的时间或使用它的时间。IE：

```
 <cache
    name="cache.expiry.application.date_status"
    maxElementsInMemory="10"
    eternal="false"
    timeToIdleSeconds="60"
    timeToLiveSeconds="50" /> 
```

有没有办法让 ehcache 根据特定时间使特定缓存过期。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-19T12:30:40.567

我通过`Element`像这样扩展 Ehcache 的类来做到这一点：

```
class EvictOnGivenTimestampElement extends Element {

    private static final long serialVersionUID = ...;
    private final long evictOn;

    EvictOnGivenTimestampElement(final Serializable key, final Serializable value, final long evictOn) {
        super(key, value);
        this.evictOn = evictOn;
    }

    @Override
    public boolean isExpired() {
        return System.currentTimeMillis() > evictOn;
    }
} 
```

其余的就像将`EvictOnGivenTimestampElement`对象的新实例放入缓存而不是`Element`.

这种方法的优点是您不必担心外部 cronjobs 等。明显的缺点是对 Ehcache API 的附件，我希望它不会经常更改。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-18T23:15:13.713

EHCache 仅支持在一定时间后驱逐（在缓存中或由于不活动）。但是，您应该能够通过使用以下方式安排删除来相当容易地完成此操作：

```
 Timer t = new Timer(true);
    Integer interval = 24 * 60 * 60 * 1000; //24 hours
    Calendar c = Calendar.getInstance();
    c.set(Calendar.HOUR, 0);
    c.set(Calendar.MINUTE, 0);
    c.set(Calendar.SECOND, 0);

    t.scheduleAtFixedRate( new TimerTask() {
            public void run() {
                Cache c = //retrieve cache                  
                c.removeAll();                                            
            }
        }, c.getTime(), interval); 
```

这个基本示例使用 Java Timer 类进行说明，但可以使用任何调度程序。每 24 小时，从午夜开始 - 这将运行并从指定的缓存中删除所有元素。`run`可以修改实际方法以删除匹配特定条件的元素。

您只需要确保在应用程序启动时启动它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-12-18T00:43:42.923

在 Ehcache 3.2 中，我实现了一个 Expiry 扩展。

```
public class EvictAtMidnightExpiry implements Expiry {

    @Override
    public Duration getExpiryForCreation(Object key, Object value) {
        DateTime now = new DateTime();
        DateTime resetAt = now.plusDays(1).withTimeAtStartOfDay();
        long difference = resetAt.toDateTime().getMillis() - now.getMillis();
        return Duration.of(difference, TimeUnit.MILLISECONDS);
    }

    @Override
    public Duration getExpiryForAccess(Object key, ValueSupplier value) {
        return null;
    }

    @Override
    public Duration getExpiryForUpdate(Object key, ValueSupplier oldValue, Object newValue) {
        return null;
    }
} 
```

现在，我也有日志记录等，但我最小化了我的代码以保持清洁。

然后你只需要在你的配置生成器中配置它。

```
CacheConfigurationBuilder.newCacheConfigurationBuilder(String.class, String.class, ResourcePoolsBuilder.heap(1000)).withExpiry(new EvictAtMidnightExpiry()).build() 
```

显然，Ehcache 在 API 上有所改进，从 2.5 到 3.2，因为您不需要创建自己的“元素”并确保使用它来启动过期或驱逐策略。这些策略现在是缓存绑定的。

# magento - Magento / Authorize.net - “此付款方式不允许使用信用卡类型”

> ID：13942815
> 
> 赞同：0
> 
> 时间：2012-12-18T22:53:10.667
> 
> 标签：magento, credit-card, authorize.net

我有一个客户正在运行 Magento 社区版网站 - 版本 1.3.2.4 - 他们使用 PayPal 支付一年多，完全没有问题。

上周我们添加了 Authorize.net 作为一个选项，并将其配置为授权和捕获付款。他们设置了 Authorize.net 帐户，然后在会计方面连接到他们的 Sage Pay 帐户。

在尝试提交付款之前，一切正常 - 无论在提交表单时使用 Authorize.net 选项（Visa / MC / Dis / AMEX）选择哪种卡类型，它都会抛出一个 Magento 警报“不允许使用信用卡类型对于这种付款方式”。

我已经在 Google 和 Magento 论坛上待了几个小时，试图追查这个问题，但我一无所获。我发现的大多数建议都是清除缓存 - 我已经这样做了，无论是在管理员中还是清除 var/cache 和 var/sessions 中，但这并没有什么区别。

我们已联系 Authorize.net 并确认该帐户处于活动状态并准备好接收来自这 4 种卡类型的交易。

关于为什么会发生这种情况以及如何纠正它的任何想法？

谢谢你的帮助，乔纳森

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T01:43:29.827

这通常意味着帐户被设置为有卡而不是无卡。将帐户更改为正确的类型将解决此问题。

# c# - 非 WPF 应用程序中的隐式 WPF 样式

> ID：13942817
> 
> 赞同：2
> 
> 时间：2012-12-18T22:53:12.973
> 
> 标签：c#, wpf, styles

我有几个不同的应用程序，这会有所帮助，但为了一个具体的例子，让我们假设我有一个 WinForms 应用程序。

此应用程序利用`ElementHost`对象内的 WPF 控件。我现在想为所有 WPF 按钮 ( `System.Windows.Controls.Button`) 定义一个隐式样式，以便每个`ElementHost`都不需要在资源字典中合并，也不`Button`需要每个都显式指定样式。

我在哪里定义所说的风格？

我尝试`Themes\Generic.xaml`在项目根目录中创建资源字典并指定

```
[assembly: ThemeInfo(
    ResourceDictionaryLocation.None,
    ResourceDictionaryLocation.SourceAssembly )] 
```

在`AssemblyInfo.cs`. 这不起作用，我的印象是，那里的样式仅适用于在同一程序集中定义的自定义控件，而`Button`在外部程序集中定义。

示例将隐式样式代码放在`<Application.Resources>`; 但是，该节点是 in-in `App.xaml`，其中（该项目尚未作为 WPF 应用程序开始其生命）不存在。是否可以添加`App.xaml`或是否有其他地方可以放置以使`<Application.Resources>`它们被识别？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T13:25:23.273

WPF 博士有几个建议：
[http ://drwpf.com/blog/2007/10/05/managing-application-resources-when-wpf-is-hosted/](http://drwpf.com/blog/2007/10/05/managing-application-resources-when-wpf-is-hosted/)

下面引用一些相关部分：

* * *

**在代码中创建应用程序实例并添加资源**
下面是一个非常简单的函数，如果应用程序对象不存在，它将创建它，然后加载一些资源：

```
public static void EnsureApplicationResources()
{
    if (Application.Current == null)
    {
        // create the Application object
        new Application();

        // merge in your application resources
        Application.Current.Resources.MergedDictionaries.Add(
            Application.LoadComponent(
               new Uri("MyLibrary;component/Resources/MyResourceDictionary.xaml",
               UriKind.Relative)) as ResourceDictionary);
    }
} 
```

现在，您只需确保在解析任何包含对应用程序级资源的静态资源引用的 XAML 文件之前调用此函数。为此，只需在基于标记的类的构造函数中添加对上述函数的调用，然后再调用`InitializeComponent()`：

```
public Page1()
{
    EnsureApplicationResources();
    InitializeComponent();
} 
```

* * *

**在 XAML 中定义应用程序类并动态创建它**
首先，我们不希望 MSBuild 为我们的应用程序类生成应用程序入口点。因此，我们需要将其声明为元素，而不是将文件声明为项目文件中的`App.xaml`元素：`ApplicationDefinition``Page`

```
<Page Include="App.xaml" />
<Compile Include="App.xaml.cs">
  <DependentUpon>App.xaml</DependentUpon>
  <SubType>Code</SubType>
</Compile> 
```

接下来，我们需要确保我们的`App.xaml`标记被解析。通常，这是作为入口点函数的一部分完成的（我们刚刚删除了它）。相反，我们可以简单地为`Application`类定义一个构造函数并直接调用`InitializeComponent`：

```
public App()
{
    InitializeComponent();
} 
```

现在我们所有的资源和合并的字典都可以在其中声明`App.xaml`，我们加载应用程序实例的静态函数可以像这样简单：

```
public static void EnsureApplicationResources()
{
    if (Application.Current == null)
    {
        // create the Application object
        new App();
    }
} 
```

* * *

**在代码中管理资源字典的集合并在元素级别合并它们**
在这种情况下，我们根本不利用`Application`对象。相反，我们在运行时动态加载每一个`ResourceDictionary`，并根据需要有选择地将其合并到页面或窗口或特定元素中。

```
public static class SharedResources
{
    public static readonly DependencyProperty MergedDictionariesProperty =
        DependencyProperty.RegisterAttached("MergedDictionaries",
            typeof(string), typeof(SharedResources),
            new FrameworkPropertyMetadata((string)null,
                new PropertyChangedCallback(OnMergedDictionariesChanged)));

    public static string GetMergedDictionaries(DependencyObject d)
    {
        return (string)d.GetValue(MergedDictionariesProperty);
    }

    public static void SetMergedDictionaries(DependencyObject d, string value)
    {
        d.SetValue(MergedDictionariesProperty, value);
    }

    private static void OnMergedDictionariesChanged(DependencyObject d,
        DependencyPropertyChangedEventArgs e)
    {
        if (!string.IsNullOrEmpty(e.NewValue as string))
        {
            foreach (string dictionaryName in (e.NewValue as string).Split(';'))
            {
                ResourceDictionary dictionary = GetResourceDictionary(dictionaryName);
                if (dictionary != null)
                {
                    if (d is FrameworkElement)
                    {
                        (d as FrameworkElement).Resources
                            .MergedDictionaries.Add(dictionary);
                    }
                    else if (d is FrameworkContentElement)
                    {
                        (d as FrameworkContentElement).Resources
                            .MergedDictionaries.Add(dictionary);
                    }
                }
            }
        }
    }

    private static ResourceDictionary GetResourceDictionary(string dictionaryName)
    {
        ResourceDictionary result = null;
        if (_sharedDictionaries.ContainsKey(dictionaryName))
        {
            result = _sharedDictionaries[dictionaryName].Target;
        }
        if (result == null)
        {
            string assemblyName = System.IO.Path.GetFileNameWithoutExtension(
                Assembly.GetExecutingAssembly().ManifestModule.Name);
            result = Application.LoadComponent(new Uri(assemblyName
                + ";component/Resources/" + dictionaryName + ".xaml",
                UriKind.Relative)) as ResourceDictionary;
            _sharedDictionaries[dictionaryName] = new WeakReference(result);
        }
        return result;
    }

    private static Dictionary<string, WeakReference> _sharedDictionaries
        = new Dictionary<string, WeakReference>();
} 
```

这将允许我们将共享资源字典合并到任何框架元素的 Resources 集合中，只需执行以下操作：

```
<Grid dw:SharedResources.MergedDictionaries="ApplicationBrushes;ButtonStyles"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-12-20T18:28:59.967

我能够让 Dr WPF App.xaml 方法工作在前面的答案中提到。我向我的 WinForms 应用程序从托管控件加载的 WPF 用户控件程序集添加了一个新页面。我从加载所有相同资源的其他 WPF 客户端应用程序复制了真正的 App.xaml.cs。我将它的内容复制到这个新的“页面”中，并根据需要更新命名空间和引用。我将 EnsureApplicationResources 静态方法添加到新的 App.xaml.cs App 类中。

它看起来像这样：

```
public static void EnsureApplicationResources() {
            if (Application.Current == null) {
                // create the Application object
                try {
                    new App() {
                        ShutdownMode = ShutdownMode.OnExplicitShutdown
                    };
                }
                catch (System.Exception ex) {
                    Debug.WriteLine(ex.ToString());
                }
            }
        } 
```

诀窍是找出正确的位置来调用它来实例化应用程序。我的 WinForms 应用程序从多个位置启动 WPF 窗口，因此我第一次尝试从根窗口的构造函数中调用 Ensure... 方法没有奏效，因为实际上可能实例化了多个“根窗口”。它也没有可靠地处理 WPF 应用程序，因此它随后在尝试重新创建相同的应用程序时抛出异常，即使 Application.Current 显示为空。

相反，我将它添加到 WinForms 应用程序的启动例程中。我不在那个项目中使用启动对象。相反，我选择 Main() 子例程提供的显式控制。顺便说一下，WinForms 应用程序位于 VB.NET 中。

```
Public Module MyWinFormsApp

    Public Sub Main()
        MyWpfApp.App.EnsureApplicationResources()
        Application.Run(New frmWinFormsMain())
        System.Windows.Application.Current.Shutdown()
    End Sub
End Module 
```

This approach works perfectly. The WPF App is created when the WinForms app starts up and shut down when it shuts down and is available with any App scoped resources to all of my hosted WPF controls including implicit styles, etc.

# python - 在 Groovy 中等效的 Python os.path 库

> ID：13942818
> 
> 赞同：1
> 
> 时间：2012-12-18T22:53:18.043
> 
> 标签：python, groovy, path

Groovy 是否有与 Python 的 os.path 等效的模块？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T23:10:43.893

大多数`os.path`功能都可以在[`java.io.File`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)类的方法中找到。此外，如果您使用的是 Java 1.7，在[`java.nio.file.Files`](http://docs.oracle.com/javase/7/docs/api/java/nio/file/Files.html).

另请注意，groovy 透明地在 Java 之上添加了一些新的附加功能。这些额外的方法记录在这里： http: [//groovy.codehaus.org/groovy-jdk/java/io/File.html](http://groovy.codehaus.org/groovy-jdk/java/io/File.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-18T23:09:09.860

标准的`java.io.File`Java 类可以做很多相同的事情，Groovy 添加了自己的扩展（参见[http://groovy.codehaus.org/groovy-jdk](http://groovy.codehaus.org/groovy-jdk)）。

# shell - 只有在 sed 中匹配时才打印特定的行号

> ID：13942821
> 
> 赞同：4
> 
> 时间：2012-12-18T22:53:35.880
> 
> 标签：shell, sed, line, match

`sed`只有在（Linux 流编辑器）中有匹配项时，如何打印（特定）行？假设我有第三行，只有当它符合匹配条件时我才想打印它；我怎样才能打印这个？

我正在将命令的输出传送到`sed`，并且不希望再次使用`sed`' 的输出来传送到`sed`：

```
| sed -ne ''"$currline"'p' | sed -n '/state/p'` 
```

另外，我将输出分配给带有反引号的变量。

* * *

给定输入 A 和 B 以及搜索模式`state`，A 的输出应该是行`3 stateless`（注意 3 是数据的一部分），而 B 应该什么都不是：

```
Input A              Input B
1 state              1 state
2 statement          2 statement
3 stateless          3 statless
4 stated             4 stated
5 estate             5 estate 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-19T01:22:12.733

```
sed -n '3{/state/p;}' $file 
```

3 匹配第 3 行；第 3 行的操作是“如果你找到`/state/`，打印”；防止`-n`一般打印行。

此外，您应该避免使用反引号；使用`var=$(cmd1 | cmd2)`符号比使用符号更好`var=`cmd1 | cmd2``。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T23:07:46.287

据我了解，您想要匹配两个条件，一个特定的行号和一个模式。`sed`您可以在一个命令中实现它。

假设`infile`内容：

```
one
two
three
four
five 
```

如果要打印第四行（如果匹配`ur`），请使用：

```
sed -ne '4 { /ur/ { p; q } }' infile 
```

这会产生：

```
four 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-18T22:58:50.647

使用[awk](/questions/tagged/awk "显示标记为“awk”的问题")：

```
awk 'NR==3 && /pattern/{print;exit}' 
```

**笔记**

*   *模式*是一个`regex`
*   `exit`避免解析整个文件

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-19T13:07:51.820

sed 是用于在单行上进行简单替换的出色工具，但对于其他任何事情，只需使用 awk：

```
awk 'NR==3 && /state/' 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-19T07:10:55.187

这可能对您有用（GNU sed）：

```
sed '3!d;/state/q;Q' file 
```

或者

```
sed -ne '3!b' -e '/state/p' -e 'q' file 
```

# linux - 在这段代码中，如何在汇编中将总和打印到屏幕上？

> ID：13942824
> 
> 赞同：1
> 
> 时间：2012-12-18T22:53:40.153
> 
> 标签：linux, assembly

如何将输出写入屏幕？

```
 SECTION .data
 x:
   dd 1
   dd 5
   dd 2
   dd 18
 sum:
   dd 0
 SECTION .text
  mov eax,4 ; EAX will serve as a counter
  mov ebx,0 ; EBX will store the sum
  mov ecx, x ; ECX will point to the current
 top:
  add ebx, [ecx]
  add ecx,4 ; move pointer to next element
  dec eax ; decrement counter
  jnz top ; if counter not 0, then loop again
 done:
  mov [sum],ebx ; done, store result in "sum" 
```

# c# - 设计数据库文件格式

> ID：13942829
> 
> 赞同：1
> 
> 时间：2012-12-18T22:53:50.390
> 
> 标签：c#, database, file, binary, format

我想暂时设计我自己的用于教育目的的数据库引擎。设计二进制文件格式并不难，也不是问题，我过去做过，但是在设计数据库文件格式时，我遇到了一个非常重要的问题：

如何处理项目的删除？

到目前为止，我已经想到了以下两个选项：

*   每个项目都有一个“已删除”位，删除时设置为 1。
    *   亲：比较快。
    *   缺点：潜在的敏感数据将保留在文件中。
*   `0x00`删除整个项目。
    *   亲：潜在的敏感数据将从文件中删除。
    *   缺点：相对较慢。
*   重新创建整个数据库。
    *   优点：没有空块，这使得后续问题无效。
    *   缺点：覆盖整个 4 GB 数据库文件是一个*非常好的主意，因为用户更正了一个错字。*我会尽快把这个方法卖给 Twitter！

现在假设您的数据库中已经有一些空块（已删除的项目）。后续问题是如何处理插入新项？

*   将项目附加到文件的末尾。
    *   亲：最快的可能。
    *   缺点：文件会变得很大，因为所有的空块仍然存在，因为删除的项目实际上并没有被删除。
*   搜索与您要插入的块大小完全相同的空块。
    *   临：可能会摆脱一些障碍。
    *   缺点：您最终可能会在每次插入时扫描整个文件，却发现它不太可能遇到完美匹配的空块。
*   找到第一个等于或大于您要插入的项目的空块。
    *   亲：你可能不会扫描整个文件，因为你会在中途发现一个空块；这将使文件大小保持相对较小。
    *   `0x00`缺点：在插入到比实际更大的空块中的项目末尾仍然会有很多剩余字节。

现在，我认为第一个删除方法和最后一个插入方法可能是“最好”的组合，但它们仍然会有自己的小问题。或者，第一种插入方法*和*预定的完整数据库重新创建。（在处理非常大的数据库时可能不是一个好主意。此外，该方法中的每个小更新都会将整个项目克隆到文件末尾，从而以可能疯狂的速度加速文件增长。）

除非有一种以文件系统批准的方式从文件中间删除/插入块的方法，否则最好的方法是什么？更重要的是，目前生产中使用的数据库通常如何处理这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T22:59:11.230

您命名的引擎非常不同...而且您的引擎似乎与它们没有太多共同点...您的引擎听起来类似于良好的旧 dBase 格式...

对于删除，这个想法很好......用0x00可配置覆盖已删除项目的部分......

对于插入，您应该保留一个具有各自大小的空闲块列表...当您删除项目、增大文件以及缩小过滤器时，此列表会更新...这样您可以非常快速地确定如何处理插入...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T23:08:37.720

为什么不从查看现有系统的工作原理开始呢？如果这是为了您自己的教育，从长远来看，这将使您受益更多。

对于初学者来说，看看久经考验的真正[B-Tree](http://en.wikipedia.org/wiki/B-tree) / [B+Tree 。](http://en.wikipedia.org/wiki/B+_tree)然后看看其他一些，如分形树索引、SSTables、哈希表、合并表等。

首先了解“数据库”如何存储和索引数据。在 NoSQL 领域以及更传统的 RDBMS 领域中，都有很好的开源和文档示例。拆开现有的东西，理解它，修改它，改进它。

我一直走这条路，虽然不是为了教育目的。.NET 空间缺少任何基于磁盘的线程安全 B+Tree，所以我写了一个。[你可以在我的博客http://csharptest.net/projects/bplustree/](http://csharptest.net/projects/bplustree/)上阅读一些关于它的信息，或者去下载源代码并把它拆开：[http ://code.google.com/p/csharptest-net/downloads/列表](http://code.google.com/p/csharptest-net/downloads/list)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-18T23:12:11.570

有开源数据库你为什么不先看看它们。MySQL 源代码可以是一个好的开始。您可以下载[源代码](http://dev.mysql.com/downloads/mysql/#downloads)并进入它。

此外，您可以开始研究数据库使用的数据结构，然后查看持久性策略等。

# asp.net-mvc - 每个请求的 HttpContext.ApplicationInstance.Context 是否唯一？

> ID：13942831
> 
> 赞同：0
> 
> 时间：2012-12-18T22:53:59.947
> 
> 标签：asp.net-mvc, httpcontext

在 MVC3 中，我想`HttpContext`从 Controller 访问（不是属性`HttpContextBase`返回的`HttpContext`）。几篇文章（和 StackOverflow 答案）建议使用`HttpContext.ApplicationInstance.Context`. 我试过了，它很有效，很简单。

有人可以确认此属性在每个请求中都是唯一的并且线程安全吗？也许这只是我，但我发现这个名字`ApplicationInstance`令人困惑——它表示一个应用程序范围的值（即，每个请求不是唯一的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T09:27:26.630

我刚刚在 Google 上快速搜索了一下`HttpContext.ApplicationInstance.Context`，在 MSDN 上找到了以下文章：

[http://msdn.microsoft.com/en-us/library/system.web.httpcontext.applicationinstance.aspx](http://msdn.microsoft.com/en-us/library/system.web.httpcontext.applicationinstance.aspx)

其中指出：

> 获取或设置***当前***HTTP 请求的 HttpApplication 对象。

# events - Magento Event Observer：修改 CatalogSearch 以包含自定义属性

> ID：13942833
> 
> 赞同：1
> 
> 时间：2012-12-18T22:54:03.337
> 
> 标签：events, magento, search, catalog, observers

我正在关注以下链接上的文章（使用事件/观察者自定义 Magento）：

[http://www.magentocommerce.com/wiki/5__-_modules_and_development/0__-_module_development_in_magento/customizing_magento_using_event-observer_method#step_7](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/customizing_magento_using_event-observer_method#step_7)

但不确定第 7 步。我该如何执行本文中的第 7 步？

**步骤 7**
导航到前端的商品详情页面，观察新的折扣已经生效。这里要注意的是，在所有其他需要折扣价的屏幕上。此处的示例是搜索结果屏幕，您需要在其中将此新属性添加到方法中的选择查询搜索属性中

```
Mage_CatalogSearch_Block_Result→_getProductCollection()

$_productCollection= $_productCollection->addAttributeToSelect('percent_discount'); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-25T14:56:39.800

我认为如果您可以导航到产品属性管理并将“在产品列表中使用”设置为“是”会容易得多，这样您就可以读取产品列表页面上的属性值。

# javascript - 如果 var 存在，如何在查询中创建对象或丢弃对象？

> ID：13942837
> 
> 赞同：1
> 
> 时间：2012-12-18T22:54:32.573
> 
> 标签：javascript, node.js, mongodb

我正在使用 mongodb，使用 ajax 表单，它工作正常......我想丢弃查询中的一些元素。这是代码：

```
var preVariable=
    {
        precio_alquiler: {$lte:query.price_input_by_user},
        tipo_usuario: query.type_of_user,
    };

db.collection('data').find(preVariable,{_id:0},{safe:true}, function(err, result) 
```

解释：

precio_alquiler 是元素的价格

tipo_usuario 是一个选择形式，包含

```
select(name='type_of_user')
                        option(value="Commerce") Comercio
                        option(value="User") Usuario
                        option(value="Mayorist") Mayor 
```

那么问题来了……如果用户想查询某个元素的价格而忽略了用户的类型，如何创建查询变量？？？这是一个可以解释这个问题的例子

```
var preVariable=
    {
        precio_alquiler: {$lte:query.price_input_by_user},
        tipo_usuario: query.type_of_user || "dont create the object tipo_usuario",
    }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:04:52.683

您可以创建不同的对象：

```
var preVariable = query.type_of_user ? {
    precio_alquiler: {
        $lte: query.price_input_by_user
    },
    tipo_usuario: query.type_of_user
} : {
    precio_alquiler: {
        $lte: query.price_input_by_user
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T00:13:55.007

一种常见的做法是首先用已知属性初始化对象，然后有条件地添加那些依赖于输入的对象：

```
var preVariable = {
    precio_alquiler: { $lte: query.price_input_by_user }
};

if(query.type_of_user) {
    preVariable.tipo_usuario = query.type_of_user;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-19T02:50:49.573

如果您有很多这些字段，那么这可能比使用条件更好：

```
var preVariable = {
    precio_alquiler: {$lte:query.price_input_by_user},
    tipo_usuario: query.type_of_user,
    //... more
};
// Remove the undefined fields
for (var prop in preVariable) {
    if (preVariable[prop] === undefined) delete preVariable[prop];
} 
```

# firefox - Aptana 内部网络浏览器错误，Ubuntu 12.04

> ID：13942838
> 
> 赞同：17
> 
> 时间：2012-12-18T22:54:39.370
> 
> 标签：firefox, ubuntu, aptana, chromium, xulrunner

我正在运行基本 0.2（Ubuntu 12.04，但具有不同的桌面环境）并且我安装了 Aptana Studio。一切都很好，因为我无法让内部网络浏览器工作。

当我打开 Aptana Studio 起始页时，我收到一条错误消息，提示“我们无法加载 Chromium 浏览器。请查看文档以获取有关可能的解决方法/修复的详细信息。该消息包含一个链接，但您必须拥有一个 @aptana访问它的地址。关闭错误后单击详细信息会给我以下内容，如果非常类似于[如何在 Linux 上为 Aptana 设置内部浏览器，](https://stackoverflow.com/questions/214272/how-to-set-up-internal-browser-for-aptana-on-linux)但我已经尝试过`MOZILLA_FIVE_HOME=/usr/lib/xulrunner`但没有成功。

> 没有更多句柄 [Unknown Mozilla path (MOZILLA_FIVE_HOME not set)] org.eclipse.swt.SWTError: 没有更多句柄 [Unknown Mozilla path (MOZILLA_FIVE_HOME not set)] at org.eclipse.swt.SWT.error(SWT.java:4308 ) 在 org.eclipse.swt.browser.Mozilla.initMozilla(Mozilla.java:1826) 在 org.eclipse.swt.browser.Mozilla.create(Mozilla.java:687) 在 org.eclipse.swt.browser.Browser。 (Browser.java:99) at org.eclipse.ui.internal.browser.BrowserViewer.(BrowserViewer.java:225) at com.aptana.portal.ui.internal.BrowserViewerWrapper.createSWTBrowserViewer(BrowserViewerWrapper.java:26) at com .aptana.portal.ui.browser.AbstractPortalBrowserEditor.createBrowserViewer(AbstractPortalBrowserEditor.java:216) 在 com.aptana.portal.ui.browser.AbstractPortalBrowserEditor.createPartControl(AbstractPortalBrowserEditor.java:112) 在 org.eclipse。ui.internal.EditorReference.createPartHelper(EditorReference.java:670) at org.eclipse.ui.internal.EditorReference.createPart(EditorReference.java:465) at org.eclipse.ui.internal.WorkbenchPartReference.getPart(WorkbenchPartReference.java: 595) 在 org.eclipse.ui.internal.presentations.PresentablePart.setVisible(PresentablePart.java:180) 在 org.eclipse.ui.internal 的 org.eclipse.ui.internal.PartPane.setVisible(PartPane.java:313) .presentations.util.PresentablePartFolder.select(PresentablePartFolder.java:270) 在 org.eclipse.ui.internal.presentations.util.LeftToRightTabOrder.select(LeftToRightTabOrder.java:65) 在 org.eclipse.ui.internal.presentations.util .TabbedStackPresentation.selectPart(TabbedStackPresentation.java:473) 在 org.eclipse.ui.internal.PartStack.refreshPresentationSelection(PartStack.java:第 1245 章.add(PartStack.java:493) at org.eclipse.ui.internal.EditorStack.add(EditorStack.java:103) at org.eclipse.ui.internal.PartStack.add(PartStack.java:479) at org. eclipse.ui.internal.EditorStack.add(EditorStack.java:112) at org.eclipse.ui.internal.EditorSashContainer.addEditor(EditorSashContainer.java:63) at org.eclipse.ui.internal.EditorAreaHelper.addToLayout(EditorAreaHelper. java:225) 在 org.eclipse.ui.internal.EditorManager.createEditorTab(EditorManager.java:808) 在 org.eclipse.ui.internal 的 org.eclipse.ui.internal.EditorAreaHelper.addEditor(EditorAreaHelper.java:213) .EditorManager。openEditorFromDescriptor(EditorManager.java:707) at org.eclipse.ui.internal.EditorManager.openEditor(EditorManager.java:666) at org.eclipse.ui.internal.WorkbenchPage.busyOpenEditorBatched(WorkbenchPage.java:2942) at org.eclipse .ui.internal.WorkbenchPage.busyOpenEditor(WorkbenchPage.java:2850) at org.eclipse.ui.internal.WorkbenchPage.access$11(WorkbenchPage.java:2842) at org.eclipse.ui.internal.WorkbenchPage$10.run(WorkbenchPage .java:2793) 在 org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2789) 在 org.eclipse.ui. internal.WorkbenchPage.openEditor(WorkbenchPage.java:2773) at org.eclipse.ui.internal.WorkbenchPage.openEditor(WorkbenchPage.java:2756) at com.aptana.portal.ui.internal.Portal$1。runInUIThread(Portal.java:227) at org.eclipse.ui.progress.UIJob$1.run(UIJob.java:95) at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35) at org. eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:135) 在 org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:3563) 在 org.eclipse.swt.widgets.Display.readAndDispatch(Display. java:3212) 在 org.eclipse.ui.internal.Workbench.runEventLoop(Workbench.java:2701) 在 org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2665) 在 org.eclipse.ui.internal .Workbench.access$4(Workbench.java:2499) at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:679) at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java :332) 在 org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:668) at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149) at com.aptana.rcp.IDEApplication.start(IDEApplication.java:125) at org.eclipse.equinox.internal.app.EclipseAppHandle.run (EclipseAppHandle.java:196) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110) 在 org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java :79) 在 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179) 在 sun.reflect 的 org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:344)。在 sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57) 在 sun.reflect.DelegatingMethodAccessorImpl 的 NativeMethodAccessorImpl.invoke0(Native Method)。在 org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:622) 在 org.eclipse.equinox 的 java.lang.reflect.Method.invoke(Method.java:601) 调用(DelegatingMethodAccessorImpl.java:43) .launcher.Main.basicRun(Main.java:577) 在 org.eclipse.equinox.launcher.Main.run(Main.java:1410) 在 org.eclipse.equinox.launcher.Main.main(Main.java:1386 )

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-12-18T22:54:39.370

刚刚发现这是一个缺失的依赖项，我想无论如何我都会发布这个，以防其他人遇到同样的问题。固定类型

```
sudo apt-get install libwebkitgtk-1.0-0 
```

# .htaccess - php下载文件变慢

> ID：13942842
> 
> 赞同：0
> 
> 时间：2012-12-18T22:55:22.427
> 
> 标签：.htaccess, download, php

好的，首先感谢您抽出宝贵的时间，我希望我能为这个问题多加一点。

问题：我的网站上有一些音乐文件 (.mp3)，我正在使用 php 文件来增加数据库以计算下载次数并指向要下载的文件。出于某种原因，此方法从 350kb/s 开始，然后慢慢下降到 5kb/s，然后文件说需要 11 小时才能完成。但是，如果我直接转到 .mp3 文件，我的浏览器会打开一个播放器，然后我可以右键单击并“另存为”，这样可以在 3 分钟内完成下载。（对于那些认为它是我的连接或 ISP 而它也不是我的服务器的人来说，是的。）

所以我最近一直在玩的唯一的东西是 php.ini 和 .htcaccess 文件。

所以不用多说，php 文件 php.ini 和 .htcaccess：

下载.php

```
<?php

include("config.php");
include("opendb.php");

$filename = 'song_name';
$filedl = $filename . '.mp3';      

$query = "UPDATE songs SET song_download=song_download+1 WHERE song_linkname='$filename'";          
mysql_query($query);

header('Content-Disposition: attachment; filename='.basename($filedl));
header('Content-type: audio/mp3');
header('Content-Length: ' . filesize($filedl));
readfile('/music/' . $filename . '/' . $filedl);

include("closedb.php");
?> 
```

php.ini

```
register_globals = off
allow_url_fopen = off

expose_php = Off
max_input_time = 60
variables_order = "EGPCS"
extension_dir = ./
upload_tmp_dir = /tmp
precision = 12
SMTP = relay-hosting.secureserver.net
url_rewriter.tags = "a=href,area=href,frame=src,input=src,form=,fieldset="

; Defines the default timezone used by the date functions
date.timezone = "America/Los_Angeles" 
```

.htaccess

```
Options +FollowSymLinks
RewriteEngine on
RewriteCond %{HTTP_HOST} !^(www.MindCollar.com)?$ [NC]
RewriteRule (.*) http://www.MindCollar.com/$1 [R=301,L]

<IfModule mod_rewrite.c>
RewriteEngine On
ErrorDocument 404 /errors/404.php
ErrorDocument 403 /errors/403.php
ErrorDocument 500 /errors/500.php
</IfModule>

Options -Indexes
Options +FollowSymlinks

<Files .htaccess>
deny from all
</Files> 
```

谢谢你的时间

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T22:59:44.240

如果你更新你的数据库，然后重定向用户

```
header('Location: path_to_MP3'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-21T09:05:35.337

重写引擎开启

```
RewriteCond %{DOCUMENT_ROOT}%{REQUEST_URI} !-f
RewriteRule ^(.*)$ index.php?page=$1&%{QUERY_STRING}&param=%{REQUEST_URI} 
```

使用这个 .htaccess 代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T23:01:44.330

你有一个语法错误：

```
$query = "UPDATE songs SET song_download=song_download+1 WHER song_linkname='$filename'"; 
```

mysql_query($查询);

应该

```
$query = "UPDATE songs SET song_download=song_download+1 WHERE song_linkname='$filename'"; 
```

mysql_query($查询);

显然如果失败，但你看到错误已经发生并开始下载为时已晚。

此外，由于您不再对数据库执行任何操作，请移动此行：

```
include("closedb.php"); 
```

在标题之上。这样总是更安全

# jsp - 将对象传递给 s:property 中的方法

> ID：13942843
> 
> 赞同：1
> 
> 时间：2012-12-18T22:55:28.747
> 
> 标签：jsp, struts2

我试图将一个对象从 s:iterator 传递到我的操作中定义的方法中，但由于某种原因，struts2 只传递了一个空对象。

我的代码如下所示：

```
<s:iterator value="#currentPriceList.discounts" var="currentDiscount">
    <s:property value="discountLine(#currentDiscount)" /><br />
</s:iterator> 
```

此函数根本不调用 discountLine 方法。

当我将其更改为以下内容时，我确实得到了正确的值：

```
<s:iterator value="#currentPriceList.discounts" var="currentDiscount">
    <s:property value="#currentDiscount.appliesTo" />
</s:iterator> 
```

当我将 currentDiscount 中的字段传递给方法时，我也得到了正确的行为。

```
<s:iterator value="#currentPriceList.discounts" var="currentDiscount">
    <s:property value="displaySomeText(#currentDiscount.appliesTo)" />
</s:iterator> 
```

那么，如何将完整的 currentDiscount 对象传递给操作方法呢？

更新问题：

的输出`<s:property value="#currentDiscount.class"/>`是`com.acteva.model.wrapper.PriceListWrapper$Discounts`

两个被调用方法的方法签名是：

```
public String discountLine(Discounts discount) 
```

和

```
public String displaySomeText(String valueToDisplay) 
```

# r - ggplot 按一个分类变量分组，按第二个变量分组

> ID：13942844
> 
> 赞同：21
> 
> 时间：2012-12-18T22:55:30.420
> 
> 标签：r, ggplot2

基本上，我想使用 ggplot 在 R 中创建下面显示的第一个图，但两个对象都在同一个图上（没有小平面包装）。

考虑一个模仿我的数据结构的最小示例：

```
library(reshape2)
library(ggplot2)
x <- seq(1, 5, length = 100)
y <- replicate(10, sin(2 * pi * x) + rnorm(100, 0, 0.3), "list")
z <- replicate(10, sin(2 * pi * x) + rnorm(100, 5, 0.3), "list")
y <- melt(y)
z <- melt(z)
df <- data.frame(x = y$Var1, rep = y$Var2, y = y$value, z = z$value)
dat <- melt(df, id = c("x", "rep")) 
```

我可以用它来绘制它

```
ggplot(dat) + geom_line(aes(x, value, group = rep, color = variable), 
    alpha = 0.3) + facet_wrap(~variable) 
```

并得到

[![](../Images/33d9adbb92e831cb034a9ea8562c61bc.png)](https://i.stack.imgur.com/lINza.png)
[（来源：[carlboettiger.info](http://carlboettiger.info/assets/figures/2012-12-18-NA-unnamed-chunk-2.png)）]

但是，如果我尝试删除构面包装，我认为它应该按颜色和变量分组，但数据没有正确分解，导致胡说八道：

[![](../Images/c95f824f73f112aa8816b0bf8a24706b.png)](https://i.stack.imgur.com/HYxmP.png)
[（来源：[carlboettiger.info](http://carlboettiger.info/assets/figures/2012-12-18-NA-unnamed-chunk-3.png)）]

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-12-18T23:03:49.997

问题在于*美学*`group`超越了标准分组协议 - 它不包括在.*[`?group`](http://docs.ggplot2.org/current/aes_group_order.html)*

 *所以，要让你的情节在没有分面的情况下工作，你需要手动指定交互

```
ggplot(dat) + geom_line(aes(x, value, group = interaction(rep,variable), color = variable), alpha = 0.3) 
```

![在此处输入图像描述](../Images/dc9f9288199cd39d71598e8c37741fc6.png)

要覆盖美学中的 alpha 值，请使用`guide_legend(override.aes = ...))`. 可以在以下链接中找到此信息[`?guides`](http://docs.ggplot2.org/current/guides.html)，特别是[`?guide_legend`](http://docs.ggplot2.org/current/guide_legend.html)

例如

```
ggplot(dat) + geom_line(aes(x, value, group = interaction(rep,variable), color = variable), 
                           alpha = 0.3) + 
  scale_colour_discrete(guide = guide_legend(override.aes = list(alpha = 1))) 
```

![在此处输入图像描述](../Images/889c0a41972072908712f8e4ed927b1a.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-18T23:06:49.600

您可以粘贴 rep 和变量组：

```
ggplot(dat) + geom_line(aes(x, value, group = paste(variable, rep), color = variable), 
                    alpha = 0.3) 
```*

# .net - 是否存在可以加载网站更新的 .NET 桌面应用程序安装程序？

> ID：13942848
> 
> 赞同：3
> 
> 时间：2012-12-18T22:55:52.103
> 
> 标签：.net, windows, com, installation, windows-installer

我需要一个能够安装的安装程序

1.  .NET 3.5 桌面应用程序的大部分静默安装（只需向用户显示一个问题 - 安装与否，因为应用程序非常简单）；
2.  可以从正确的 URL 下载（部分？）正确操作系统版本的应用程序；
3.  可以更新注册表；
4.  可以注册 COM dll（非常重要）；
5.  可选地有一个更新器，它可以从应用程序的相同或另一个位置下载更新。

没有要求它是免费的，但它可能是一个不错的 +

# compilation - 在 Mac OSX 上编译 LZMA 的 Makefile 错误

> ID：13942850
> 
> 赞同：2
> 
> 时间：2012-12-18T22:56:05.757
> 
> 标签：compilation, makefile, lzma

我已经下载了最新的[**LZMA SDK**](http://sourceforge.net/projects/sevenzip/files/LZMA%20SDK/lzma922.tar.bz2/download)并尝试在 Mac OSX 上编译它，尽管 tar 球中包含的任何 makefile 都会出错。这是我尝试运行的*任何*makefile的错误：

```
/lzma922/C/Util/Lzma/

# make

makefile:<#>: *** missing separator.  Stop. 
```

任何帮助将不胜感激 - 谢谢！

# wpf - 名称空间“clr-....”中不存在名称“DoublerConvert”

> ID：13942856
> 
> 赞同：3
> 
> 时间：2012-12-18T22:56:50.633
> 
> 标签：wpf, vb.net, converter, ivalueconverter

我意识到还有其他具有相同标题的问题，但是我尝试了所有这些解决方案均无济于事。我正在尝试使用我制作的转换器。我的另一个转换器工作正常，这个新转换器是前一个转换器的复制粘贴，名称已更改，返回值已更改。

XAML

```
xmlns:local="clr-namespace:ARC"
    <local:DoublerConvert x:Key="DoubleConverter"/> 'Doesn't work
    <local:ValueConverter x:Key="NegativeConverter"/> 'Works fine 
```

代码

```
Public Class ValueConverter
    Implements IValueConverter

    Public Function ProvideValue(serviceProvider As System.IServiceProvider) As Object
        Return Me
    End Function

    Public Function Convert(value As Object, targetType As Type, parameter As Object, culture As CultureInfo) As Object Implements IValueConverter.Convert
        Dim OldWidth As Integer = value
        OldWidth = -OldWidth
        Return OldWidth
    End Function

    Public Function ConvertBack(value As Object, targetType As Type, parameter As Object, culture As CultureInfo) As Object Implements IValueConverter.ConvertBack
        Throw New NotImplementedException
    End Function
End Class

Public Class DoublerConvert
    Implements IValueConverter

    Public Function ProvideValue(serviceProvider As System.IServiceProvider) As Object
        Return Me
    End Function

    Public Function Convert(value As Object, targetType As Type, parameter As Object, culture As CultureInfo) As Object Implements IValueConverter.Convert
        Dim OldWidth As Integer = value
        Return 2 * OldWidth
    End Function

    Public Function ConvertBack(value As Object, targetType As Type, parameter As Object, culture As CultureInfo) As Object Implements IValueConverter.ConvertBack
        Throw New NotImplementedException
    End Function
End Class 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-07T04:53:43.223

您尝试杀死 XDesProc.exe 并重新加载您的 xaml。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T09:21:27.777

我在 c# 中遇到了同样的错误。我已经阅读了很多关于这个问题的信息。那么我做了什么来解决它？我运行了干净的项目，然后构建了项目。VS 向我展示了错误列表，我修复了每个错误！每个！之后我的解决方案构建成功！希望它对你有用！

# actionscript-3 - 我动态创建的影片剪辑不会消失

> ID：13942857
> 
> 赞同：2
> 
> 时间：2012-12-18T22:56:58.243
> 
> 标签：actionscript-3, flash

我正在开发一个带有动态创建方块的突破型游戏。当一块砖被击中时，我会启动一个 removeMC 函数，该函数应该将其变为白色并使其尺寸缩小。然而，有时方块只是变成白色而不是补间。我已经包含了 removeMV 函数的脚本以及创建正方形的函数。Arg1 是要删除的正方形。我为糟糕的命名约定道歉，但火灾已经损坏，必须使用反编译器来恢复。

这是 removeMC 函数

```
 public function removeMC(arg1:flash.display.Sprite):*
    {
       this.score --;
        this.uiBar.txtScore.text=this.score;
        var loc1:*=new flash.geom.ColorTransform();
        loc1.color = 0xffffFF;
        arg1.transform.colorTransform = loc1;
        TweenMax.to(arg1, 0.4, {colorTransform:{tint:0x0000ff, tintAmount:1}});
        var loc2:*=this.ballMC.x - this.ballMC.x % 30;
        var loc3:*=this.ballMC.y - this.ballMC.y % 30;
        arg1.scaleY = arg1.scaleY * -1;
       // trace("Ball x:" + this.ballMC.x + " ballY:" + this.ballMC.y + " block x:" +     loc2 + " block y:" + loc3);
        var loc4:*=new fl.transitions.Tween(arg1, "width", null, 30, 0, 0.5, true);
        var loc5:*=new fl.transitions.Tween(arg1, "height", null, 30, 0, 0.5, true);
        var loc6:*=new fl.transitions.Tween(arg1, "x", null, 0, loc2, 0.5, true);
        var loc7:*=new fl.transitions.Tween(arg1, "y", null, 0, loc3, 0.5, true);
        this.brickArray.splice(this.indexSearch(this.brickArray, arg1), 1);
        arg1.x+=3000;//failsafe to remove the squares.  doesn't work
        arg1.y+=3000;
        return;
    } 
```

这是创建正方形的函数。Arg 1 和 arg2 是正方形的宽度和高度

```
 public function createImgNodeGrid(arg1:int=1, arg2:int=1, arg3:Number=0):void
    {
        var loc6:*=0;
        var loc7:*=null;
        var loc8:*=null;
        var loc9:*=null;
        var loc10:*=null;
        var loc1:*=this._img.width / arg1;
        var loc2:*=this._img.height / arg2;
        var loc3:*=arg1 * arg2;
        this._imgNodes = [];
        var loc4:*=0;
        var loc5:*=0;
        while (loc5 < arg1) 
        {
            loc6 = 0;
            while (loc6 < arg2) 
            {
                loc7 = new flash.geom.Rectangle(loc5 * loc1, loc6 * loc2, loc1, loc2);
                loc8 = new flash.display.BitmapData(loc1, loc2, true);
                loc8.copyPixels(this._img.bitmapData, loc7, this.zero);
                loc9 = new flash.display.Bitmap(loc8);
                loc9.x = loc5 * (loc1 + arg3);
                loc9.y = loc6 * (loc2 + arg3);
                var loc11:*;
                this._imgNodes[loc11 = loc4++] = loc9;
                loc10 = new flash.display.Sprite();
                loc10.mouseChildren = false;
                this.brickArray.push(loc10);
                loc10.addChild(loc9);
                this._tiledImg.addChild(loc10);
                ++loc6;
            }
            ++loc5;
        }
        return;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T13:58:11.197

我可能会错过这里的标记，因为它很难阅读，但是，这是我对您的 removeMc 函数的建议。我注意到你有 TweenMax，所以我会使用它而不是 flash tweener 类。

```
 public function removeMC(arg1:flash.display.Sprite):*
    {
       this.score --;
        this.uiBar.txtScore.text=this.score;
        var loc1:*=new flash.geom.ColorTransform();
        loc1.color = 0xffffFF;
        arg1.transform.colorTransform = loc1;
        var loc2:*=this.ballMC.x - this.ballMC.x % 30;
        var loc3:*=this.ballMC.y - this.ballMC.y % 30;

        TweenMax.to(arg1, 0.4, {scaleY:0, scaleX:0, x:loc2, y:loc3, colorTransform:{tint:0x0000ff, tintAmount:1}, onComplete:tweenComplete(arg1)});

       // trace("Ball x:" + this.ballMC.x + " ballY:" + this.ballMC.y + " block x:" + loc2 + " block y:" + loc3);

        this.brickArray.splice(this.indexSearch(this.brickArray, arg1), 1);
        return;
    }

private function tweenComplete(square:Sprite):void
{
    this.removeChild(square);
} 
```

这应该会导致正方形缩小到 0 大小并同时变为白色。然后，一旦完成，它将完全删除孩子。

# cache-control - 为什么要指定 Last-Modified？

> ID：13942861
> 
> 赞同：1
> 
> 时间：2012-12-18T22:57:20.520
> 
> 标签：cache-control, last-modified, expires-header, etag

我对这个标题有点困惑。我已经在我的 .httaccess 中添加了“Expires”和“Cache-Control: max-age”。我还按照建议删除了“E-tag”和“Last-Modified”：

> 如果您删除 Last-Modified 和 ETag 标头，您将完全消除 If-Modified-Since 和 If-None-Match 请求及其 304 Not Modified 响应，因此文件将保持缓存而不检查更新，直到 Expires 标头指示新内容可用！

那么为什么 Google 的 PageSpeed 显示了这一点？

> 指定缓存验证器：以下资源缺少缓存验证器。未指定缓存验证器的资源无法有效刷新。指定 Last-Modified 或 ETag 标头以启用以下资源的缓存验证

# asp.net-mvc - HttpContext.User.Identity 和 IClaimsPrincipal 之间的区别

> ID：13942864
> 
> 赞同：1
> 
> 时间：2012-12-18T22:57:41.377
> 
> 标签：asp.net-mvc, wif, claims-based-identity, adfs2.0

我是身份系统开发的新手，我正在考虑在 ASP.NET MVC 3 架构中使用声明主体和声明身份进行授权（在控制器级别实现）。

我可以看到很少有`HttpContext.User.Identity`用于授权的实现和一些使用`IClaimsPrincipal`. 根据我对几篇文章的理解（差），`IClaimsPrincipal`是一种基于声明的方法，可以为应用程序级别的使用提供`HttpContext.User.Identity`上下文。这两种方法有什么区别？如果我将 ADFS 2.0 用作 STS/FP 服务，哪一种更有效？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-20T22:02:16.590

`IClaimsPrincipal`是 的 WIF 扩展`IPrincipal`。`IClaimsPrincipal`提供 的集合`IClaimsIdentity`，同样地，`IClaimsIdentity`继承`IIdentity`.

如果您在 ASP.NET 中使用 WIF，则`IClaimsPrincipal`/`IClaimsIdentity`和`HttpContext.User.Identity`实际上是相同的方法。作为身份验证管道的一部分，WIF 会将您设置`HttpContext.User.Identity`为一个`IClaimsIdentity`，以便您可以像这样访问它：

```
IClaimsIdentity claimsId = HttpContext.User.Identity as IClaimsIdentity; 
```

# iphone - 当相机前面有一些移动时，是否可以通过编程方式从我的 iphone 拍照？

> ID：13942867
> 
> 赞同：6
> 
> 时间：2012-12-18T22:57:56.530
> 
> 标签：iphone, objective-c, ios

我正在尝试查看当相机前面有任何移动时是否可以在 iOS 上拍照。例如，当某个身体挥手或只是在相机前展示他/她的脸或向空中扔球以使其穿过相机视线时，应用程序是否可以拍照。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-20T19:24:21.360

查看[适用于 iPhone 的 Lucas-Kanade (LK) 光流](http://www.success-ware.com/150842/Lucas-Kanade-Detection-for-the-iPhone)这是一种光流估计算法（即“由观察者与场景之间的相对运动引起的视觉场景中物体、表面和边缘的表观运动模式”。 )

它可能会帮助您进行运动检测，然后您可能只需要响应该事件。

# android - 谷歌分析的数据使用情况

> ID：13942872
> 
> 赞同：5
> 
> 时间：2012-12-18T22:58:13.053
> 
> 标签：android, google-analytics, google-analytics-api

我已经在 Android 上为市场创建了一个应用程序，并准备在市场上发布。我使用 Google Analytics 来跟踪自定义事件，这将有助于我将来升级应用程序。

我想知道 Google Analytics 会消耗多少数据来报告我定义的事件？我担心的是它不应该消耗大量数据进行报告，从最终用户的角度来看，这会对应用程序产生不利影响。

有人知道谷歌分析在跟踪中对数据的消耗吗？可以通过增加派送周期来减少吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T01:16:26.677

发送到 Google Analytics 的数据通常非常小，所以只要您没有过度跟踪您的应用程序（报告每次触摸的位置，很傻，但我已经看到了），您就不必担心. 如果您确实希望限制发送的数据，您可以在报告中设置采样率，以仅将一些事件发送回 GA。如果您只有少量活跃用户，这将降低您的准确性，但如果 Google 要求这样做您每月报告的事件超过一千万。

使用 GA 时要考虑的最重要的事情是您的电池续航时间。如果您的应用程序尚未经常访问互联网，那么每次您向 GA 报告时，您只需通过激活设备的 wifi 或蜂窝天线消耗一点额外的电池。这些冷却时间约为 60 秒，所以如果您dispatch 设置为 60，那么您将无缘无故地慢慢耗尽用户的电池。

# ruby - 如何在 Sinatra 应用程序中使用 EventMachine？

> ID：13942876
> 
> 赞同：0
> 
> 时间：2012-12-18T22:58:27.290
> 
> 标签：ruby, sinatra, eventmachine

我使用的是写在 EM 之上的 api。这意味着要拨打电话，我需要编写如下内容：

```
EventMachine.run do
  api.query do |result|
    # Do stuff with result
  end
  EventMachine.stop
end 
```

工作正常。

但现在我想在 Sinatra 控制器中使用相同的 API。我试过这个：

```
get "/foo" do
  output = ""
  EventMachine.run do
    api.query do |result|
      output = "Result: #{result}"
    end
    EventMachine.stop
  end
  output
end 
```

但这不起作用。该`run`块被绕过，因此返回一个空响应，一旦`stop`被调用，Sinatra 就会关闭。

不确定它是否相关，但我的 Sinatra 应用程序在 Thin 上运行。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T13:57:58.613

通过忙于等待数据可用，我找到了一种解决方法。可能不是最好的解决方案，但它至少有效：

```
helpers do

  def wait_for(&block)
    while (return_val = block.call).nil?
      sleep(0.1)
    end
    return_val
  end

end

get "/foo" do
  output = nil
  EventMachine.run do
    api.query do |result|
      output = "Result: #{result}"
    end
  end
  wait_for { output }
end 
```

# c# - 面板垂直滚动

> ID：13942895
> 
> 赞同：5
> 
> 时间：2012-12-18T22:59:38.647
> 
> 标签：c#, winforms, visual-studio-2010, panel

我有一个 winform 应用程序，其中有一个面板控件。

![在此处输入图像描述](../Images/68021d8d410e1007cb492bccaef3d7eb.png)

我希望能够在面板内滚动并将控件垂直放置在控件的当前高度之上，然后有一个滚动可以帮助我查看所有控件，我该如何实现？

这也是设计器代码，以防有人想查看代码：

```
private void InitializeComponent()
{
  this.panel1 = new System.Windows.Forms.Panel();
  this.SuspendLayout();
  // 
  // panel1
  // 
  this.panel1.AutoScroll = true;           
  this.panel1.BackColor = System.Drawing.SystemColors.ControlLightLight;
  this.panel1.Location = new System.Drawing.Point(12, 12);    
  this.panel1.Name = "panel1";
  this.panel1.Size = new System.Drawing.Size(267, 365);
  this.panel1.TabIndex = 0;
  // 
  // Form2
  // 
  this.AutoScaleDimensions = new System.Drawing.SizeF(6F, 13F);
  this.AutoScaleMode = System.Windows.Forms.AutoScaleMode.Font;
  this.ClientSize = new System.Drawing.Size(456, 410);
  this.Controls.Add(this.panel1);
  this.Name = "Form2";
  this.Text = "Form2";
  this.ResumeLayout(false);
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-18T23:03:22.393

既然你有 AutoScroll = true，你不应该做任何事情。您放置在面板中可见边界下方的任何控件都将自动在面板中创建适当的滚动距离。

如果您想手动覆盖它，请设置 AutoScroll = false 并使用 AutoScrollMinSize 属性自己设置画布的大小，例如：

```
panel1.AutoScrollMinSize = new Size(0, 1200); 
```

您可能还需要考虑将面板锚定到表单的四个侧面，或者停靠填充，因为它看起来像一个可调整大小的表单。同样，面板将为您处理滚动条大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-15T12:09:08.917

尝试在 MDIForm 面板中加载其他表单。它完美地工作。

```
myForm.TopLevel = false;
myForm.AutoScroll = true;
main_panel.Controls.Clear();
main_panel.Controls.Add(myForm);
main_panel.AutoScrollMinSize = new Size(0, myForm.Height);
myForm.Show(); 
```

# javascript - 如何将谷歌地图以经纬度位置为中心？

> ID：13942897
> 
> 赞同：3
> 
> 时间：2012-12-18T22:59:44.027
> 
> 标签：javascript, api, google-maps

考虑以下代码：

```
$('.stores').click(function() {
    console.log($(this).data('latitude'));  // -1754.26265626
    console.log($(this).data('longitude')); // 65.262518
    console.log(themap); // Properly a Google Map instance.

    themap.setCenter(new LatLng($(this).data('latitude'), $(this).data('longitude')));
}); 
```

根据[文档](https://developers.google.com/maps/documentation/javascript/reference#LatLng)，我可以使用该`setCenter`方法并轻松地将地图居中，但我不明白文档使用的符号。

看：

```
LatLng(lat:number, lng:number, noWrap?:boolean) 
```

我究竟如何使用它？

我收到错误：

```
Uncaught ReferenceError: LatLng is not defined 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-18T23:04:04.717

你必须使用

```
themap.setCenter(new google.maps.LatLng($(this).data('latitude'), $(this).data('longitude'))); 
```

所有 Google Maps javascript 类都使用`google.maps.ClassName()`符号引用

# backbone.js - 基于会话变量渲染模板

> ID：13942903
> 
> 赞同：2
> 
> 时间：2012-12-18T23:00:15.947
> 
> 标签：backbone.js, meteor, handlebars.js

我正在使用 Meteor、Handlebars 和 Backbone 创建一个多页应用程序。我有一个使用主干设置的路由器，它设置了一个会话变量，`currentPage`. 如何根据 的值呈现不同的模板`currentPage`？

有人告诉我，我可以创建一个可以执行此操作的模板辅助函数，但我不确定如何处理。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T03:59:58.297

如果 currentPage 是全局的并且页面存储为字符串，那么我希望这可以工作：

```
Handlebars.registerHelper('currentPageIs',function(page){
    return currentPage == page;
});

// and in the html:
{{#if currentPageIs '/posts'}}
    {{> posts}}
{{else}}
    {{> homepage}}
{{/if}} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T04:00:37.240

一个非常简单的解决方案在这里：[https ://gist.github.com/3221138](https://gist.github.com/3221138)

但我强烈建议安装[meteor-router](https://github.com/tmeasday/meteor-router)。这将要求您首先安装[陨石](https://github.com/oortcloud/meteorite)。

另外，要知道[路线图](https://trello.com/c/Lz07fBAm)上有官方路由解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-30T18:06:23.540

最好的选择是使用 Iron-Router，但你不希望这是一个更改模板的好模式：

```
//HTML
<body>
  {{>mainTemplate}}
</body>

//JS Client Initially
var current = Template.initialTemplate;
var currentDep = new Deps.Dependency;

Template.mainTemplate = function()
{
  currentDep.depend();
  return current;
};

function setTemplate( newTemplate )
{
    current = newTemplate;
    currentDep.changed();
};

//Later
setTemplate( Template.someOtherTemplate ); 
```

我不知道如何检查路线，但如果可以，那么您可以使用建议的`setTemplate`功能有条件地更改模板。

# erlang - rabbitmq-erlang-client，使用 rebar 友好的 pkg，在 dev env 上工作在 rebar 发布时失败

> ID：13942904
> 
> 赞同：2
> 
> 时间：2012-12-18T23:00:24.267
> 
> 标签：erlang, rabbitmq, reltool

我成功地将rabbitmq-erlang-client的rebar-friendly包用于一个简单的Hello World rebarized和OTP“兼容”应用程序，并且在开发环境中一切正常。我能够启动一个 erl 控制台并执行我的操作`application:start(helloworld).`并连接到代理，打开一个通道并与队列通信。

但是，然后我继续做`rebar generate`，它构建了版本就好了，但是当我尝试从自包含的版本包中启动时，事情突然爆炸了。

我知道钢筋发布是一种晦涩难懂的艺术，但我想知道就使用 rabbitmq-erlang-client 部署应用程序而言，我有哪些选择。

您将在下面找到崩溃时控制台的输出：

```
=INFO REPORT==== 18-Dec-2012::16:41:35 ===
    application: session_record
    exited: {{{badmatch,
               {error,
                {'EXIT',
                 {undef,
                  [{amqp_connection_sup,start_link,
                    [{amqp_params_network,<<"guest">>,<<"guest">>,<<"/">>,
                      "127.0.0.1",5672,0,0,0,infinity,none,
                      [#Fun<amqp_auth_mechanisms.plain.3>,
                       #Fun<amqp_auth_mechanisms.amqplain.3>],
                      [],[]}],
                    []},
                   {supervisor2,do_start_child_i,3,
                    [{file,"src/supervisor2.erl"},{line,391}]}, 
                   {supervisor2,handle_call,3,
                    [{file,"src/supervisor2.erl"},{line,413}]}, 
                   {gen_server,handle_msg,5,
                    [{file,"gen_server.erl"},{line,588}]},
                   {proc_lib,init_p_do_apply,3,
                    [{file,"proc_lib.erl"},{line,227}]}]}}}},
              [{amqp_connection,start,1,
                [{file,"src/amqp_connection.erl"},{line,164}]}, 
               {hello_qp,start_link,0,[{file,"src/hello_qp.erl"},{line,10}]},
               {session_record_sup,init,1,
                [{file,"src/session_record_sup.erl"},{line,55}]},
               {supervisor_bridge,init,1,
                [{file,"supervisor_bridge.erl"},{line,79}]},
               {gen_server,init_it,6,[{file,"gen_server.erl"},{line,304}]},
               {proc_lib,init_p_do_apply,3,
                [{file,"proc_lib.erl"},{line,227}]}]},
             {session_record_app,start,[normal,[]]}}
    type: permanent {"Kernel pid terminated",application_controller 
```

**编辑：**根据评论中的要求。

`reltool.config`

```
{sys, [
       {lib_dirs, ["..", "../deps"]},
       {erts, [{mod_cond, derived}, {app_file, strip}]},
       {app_file, strip},
       {rel, "session_record", "0.1.0",
        [
         kernel,
         stdlib,
         sasl,
         session_record
        ]},
       {rel, "start_clean", "",
        [
         kernel,
         stdlib
        ]},
       {boot_rel, "session_record"},
       {profile, embedded},
       {incl_cond, derived},
       {mod_cond, derived},
       {excl_archive_filters, [".*"]}, %% Do not archive built libs
       {excl_sys_filters, ["^bin/.*", "^erts.*/bin/(dialyzer|typer)",
                           "^erts.*/(doc|info|include|lib|man|src)"]},
       {excl_app_filters, ["\.gitignore"]},
       {app, session_record, [{mod_cond, app}, {incl_cond, include}, {lib_dir, ".."}]},
       {app, hipe, [{incl_cond, exclude}]}
      ]}.

{target_dir, "session_record"}.

{overlay, [
           {mkdir, "log/sasl"},
           {copy, "files/erl", "\{\{erts_vsn\}\}/bin/erl"},
           {copy, "files/nodetool", "\{\{erts_vsn\}\}/bin/nodetool"},
           {copy, "files/session_record", "bin/session_record"},
           {copy, "files/session_record.cmd", "bin/session_record.cmd"},
           {copy, "files/start_erl.cmd", "bin/start_erl.cmd"},
           {copy, "files/install_upgrade.escript", "bin/install_upgrade.escript"},
           {copy, "files/sys.config", "releases/\{\{rel_vsn\}\}/sys.config"},
           {copy, "files/vm.args", "releases/\{\{rel_vsn\}\}/vm.args"}
          ]}. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T11:56:42.100

尝试更改`{mod_cond, derived}`为`{mod_cond, all}`. 这意味着 reltool 不会试图从包含的应用程序中获取哪些模块。我怀疑您的问题是 reltool 认为没有`amqp_connection_sup`必要；您可以通过检查它是否存在于`lib/amqp_client-0.8/ebin`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T11:22:41.563

@legoscia 给出的答案有效。这是示例，reltool.config

```
 %% -*- mode: erlang -*-
%% ex: ft=erlang
{sys, [
       {lib_dirs, ["..","../deps"]},
       {erts, [{mod_cond, all}, {app_file, strip}]},
       {app_file, strip},
       {rel, "chat_grabber", "1",
        [
         kernel,
         stdlib,
         sasl,
           couchbeam,
         chat_grabber
        ]},
       {rel, "start_clean", "",
        [
         kernel,
         stdlib
        ]},
       {boot_rel, "chat_grabber"},
       {profile, embedded},
       {incl_cond, derived},
       {excl_archive_filters, [".*"]}, %% Do not archive built libs
       {excl_sys_filters, ["^bin/(?!start_clean.boot)",
                           "^erts.*/bin/(dialyzer|typer)",
                           "^erts.*/(doc|info|include|lib|man|src)"]},
       {excl_app_filters, ["\.gitignore"]},
       {app,couchbeam,[{mod_cond,app},{incl_cond,include},{lib_dir, "../deps/"}]},
       {app, chat_grabber, [{mod_cond, app}, {incl_cond, include}, {lib_dir, ".."}]}
      ]}.

{target_dir, "chat_grabber"}.

{overlay, [
           {mkdir, "log/sasl"},
           {copy, "files/erl", "\{\{erts_vsn\}\}/bin/erl"},
           {copy, "files/nodetool", "releases/\{\{rel_vsn\}\}/nodetool"},
           {copy, "chat_grabber/bin/start_clean.boot",
                  "\{\{erts_vsn\}\}/bin/start_clean.boot"},
           {copy, "files/chat_grabber", "bin/chat_grabber"},
           {copy, "files/chat_grabber.cmd", "bin/chat_grabber.cmd"},
           {copy, "files/start_erl.cmd", "bin/start_erl.cmd"},
           {copy, "files/install_upgrade.escript", "bin/install_upgrade.escript"},
           {copy, "files/sys.config", "releases/\{\{rel_vsn\}\}/sys.config"},
           {copy, "files/vm.args", "releases/\{\{rel_vsn\}\}/vm.args"}
          ]}. 
```

# hadoop - PIG 不读取我的自定义 InputFormat

> ID：13942906
> 
> 赞同：1
> 
> 时间：2012-12-18T23:00:43.983
> 
> 标签：hadoop, user-defined-functions, apache-pig, amazon-emr

我有一个习惯`MyInputFormat`，假设要处理[多行输入](https://stackoverflow.com/questions/13871134/pig-udf-handle-multi-lined-tuple-split-into-different-mapper)的记录边界问题。但是当我把它`MyInputFormat`放入我的 UDF 加载函数中时。如下：

```
import org.apache.hadoop.mapreduce.InputFormat;
public class EccUDFLogLoader extends LoadFunc {
    @Override
    public InputFormat getInputFormat() {
        System.out.println("I am in getInputFormat function");
        return new MyInputFormat();
    }
}

import org.apache.hadoop.mapreduce.lib.input.TextInputFormat;
public class MyInputFormat extends TextInputFormat {
    public RecordReader createRecordReader(InputSplit inputSplit, JobConf jobConf) throws IOException {
        System.out.prinln("I am in createRecordReader");
        //MyRecordReader suppose to handle record boundary
        return new MyRecordReader((FileSplit)inputSplit, jobConf);
    }
} 
```

对于每个映射器，它打印出来`I am in getInputFormat function`但不是`I am in createRecordReader`. 我想知道是否有人可以提供有关如何将我的服装 MyInputFormat 连接到 PIG 的 UDF 加载器的提示？非常感谢。

我在 Amazon EMR 上使用 PIG。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T01:33:05.153

您的签名与父类的签名不匹配（您缺少 Reporter 参数），试试这个：

```
@Override
public RecordReader<LongWritable, Text> getRecordReader(
        InputSplit inputSplit, JobConf jobConf, Reporter reporter)
             throws IOException {
  System.out.prinln("I am in createRecordReader");
  //MyRecordReader suppose to handle record boundary
  return new MyRecordReader((FileSplit)inputSplit, jobConf);
} 
```

**编辑**对不起，我之前没有发现这一点，正如您所指出的，您需要使用新的 API 签名：

```
@Override
public RecordReader<LongWritable, Text> 
      createRecordReader(InputSplit split,
             TaskAttemptContext context) {
  System.out.prinln("I am in createRecordReader");
  //MyRecordReader suppose to handle record boundary
  return new MyRecordReader((FileSplit)inputSplit, jobConf);
} 
```

并且您的 MyRecordReader 类需要扩展`org.apache.hadoop.mapreduce.RecordReader`该类

# mysql - Union - 同一张表，不包括以前的结果 MySQL

> ID：13942907
> 
> 赞同：0
> 
> 时间：2012-12-18T23:00:56.507
> 
> 标签：mysql

我正在尝试编写一个查询，它将：

*   运行查询，给我 (x) 行数（限制 4）
*   如果该查询没有给我所需的 4，请运行第二个查询限制 4-(x) 并从第一个查询中排除 id
*   第三个查询的行为类似于第二个

我有这个：

```
(SELECT *, 1 as SORY_QUERY1 FROM xbamZ where state = 'Minnesota' and industry = 'Miscellaneous' and id != '229' limit 4) 
UNION 
(SELECT *, 2 FROM xbamZ where state = 'Minnesota' limit 2) 
UNION 
(SELECT *, 3 FROM xbamZ where industry = 'Miscellaneous' limit 1) 
```

我是如何（或者是？）这样做？我接近了吗？这个查询给了我重复

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T23:07:22.417

我认为没有必要 union 和三个`select`s。一个也可以

```
SELECT a.*
FROM
(
SELECT xbamZ.*,
CASE 
  WHEN state = 'Minnesota' and industry = 'Miscellaneous' and id != '229' THEN 1
  WHEN state = 'Minnesota' THEN 2
  WHEN industry = 'Miscellaneous' THEN 3
END as rnk
FROM xbamZ 
where state = 'Minnesota' or industry = 'Miscellaneous' 
)a 
ORDER BY rnk
LIMIT 4; 
```

# php - 使用 usort 重新排列多维数组

> ID：13942912
> 
> 赞同：-2
> 
> 时间：2012-12-18T23:01:18.307
> 
> 标签：php, arrays, json, usort

我有一个大数组（这只是其中的一部分）：

```
[0] => stdClass Object
    (
        [products] => Array
            (
                [0] => stdClass Object
                    (
                        [body_html] => bodyhtml
                        [published_at] => 2012-12-16T23:59:18+00:00
                        [created_at] => 2012-12-16T11:30:24+00:00
                        [updated_at] => 2012-12-18T10:52:14+00:00
                        [vendor] => Name
                        [product_type] => type
                    )
                [1] => stdClass Object
                    (
                        [body_html] => bodyhtml
                        [published_at] => 2012-12-16T23:59:18+00:00
                        [created_at] => 2012-12-16T10:30:24+00:00
                        [updated_at] => 2012-12-18T10:52:14+00:00
                        [vendor] => Name
                        [product_type] => type
                    )
              )
      ) 
```

而且我需要在每个产品的创建日期之前安排它们……我尝试了各种 usort、ksort、uksort 技术，但都失败了，试图让它按照特定的顺序（按时间顺序）但失败了！

任何指导将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:08:15.277

您将需要使用 uasort 函数，它可以让您指定您编写的简单比较函数。详见[uasort](http://php.net/manual/en/function.uasort.php)。您还可以将匿名函数定义为 uasort 调用的一部分。由于您有一个带有数组的对象，因此请确保将对象的数组传递给 uasort 函数。由于您正在对一组对象进行排序，因此您的比较函数应该考虑到它正在处理 2 个对象。

基于您的回复和您的 var_dump：

```
uasort($foo[0]->products, function($a, $b) {

    if ($a->created_at < $b->created_at) {
        return -1;
    }
    return 1;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:14:39.110

这是一个例子：

```
$arr_1 = array('name' => 'A', 
               'date' => '2012-12-16T11:30:24+00:00' , 
               'created_at' => '2012-12-16T11:30:24+00:00');
$arr_2 = array('name' => 'B', 
               'date' => '2012-12-16T11:30:22+00:00' , 
               'created_at' => '2012-12-16T11:30:21+00:00');

$test_array = array($arr_1, $arr_2);
var_dump($test_array);

usort($test_array, function($a, $b) {
    $a_date = new DateTime($a['date']);
    $b_date = new DateTime($b['date']);
    if ($a_date < $b_date) {
        return -1;
    }
    return 1;
});

var_dump($test_array); 
```

# android - Android - 从 SQLite 表行中检索所有数据

> ID：13942914
> 
> 赞同：2
> 
> 时间：2012-12-18T23:01:20.193
> 
> 标签：android, sqlite, textview

我已经搜索并找不到我的问题的答案，所以我希望我没有完全找错树（可以这么说）。

我是 android 新手，已经开始创建一个应用程序。我的应用程序在一个屏幕上使用公共类 DatabaseHandler 扩展 SQLiteOpenHelper 创建并向 SQLite 数据库添加条目，这一切似乎都有效。

我检索所有数据并将其填充到网格中，现在这又可以了。

我的问题是我无法从网格中检索出一条完整的线。

我使用以下代码填充/显示网格。

我已经剪掉了很多，因为网格是分阶段制作的，标题，空白行等，但网格确实按我想要的方式显示。

当我触摸一条线时，它会显示其唯一的 id。

onClick 就在最后，当我使用 getText() 而不是 getID() 时，它返回的只是 labelDate 中的数据。如何检索下面列出的所有标签？

包com.pump.diary；

```
import java.util.List;
import android.app.Activity;
import android.content.DialogInterface;
import android.content.DialogInterface.OnClickListener;
import android.graphics.Color;
import android.os.Bundle;
import android.view.View;
import android.view.ViewGroup.LayoutParams;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;
import android.widget.Toast;

public class PumpDiaryReview extends Activity implements android.view.View.OnClickListener{
DatabaseHandler db = new DatabaseHandler(this);

protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_pump_diary_review);

    TableLayout tl = (TableLayout) findViewById(R.id.gridview);
    boolean doFirstHeadings = true;
    String dateCheck = "";
    Integer count=0;

    List<Readings> readings = db.getAllReadings();
    for (Readings re : readings)
    {
        if (doFirstHeadings == true)
        {
            //First record so setup the headings.
            TableRow tr_head = new TableRow(this);
            tr_head.setId(10);
            tr_head.setBackgroundColor(Color.GRAY);
            tr_head.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

            TextView label_date = new TextView(this);
            label_date.setText("Date:Time");
            TextView label_CP = new TextView(this);
            label_CP.setText("CP");;
            TextView label_BG = new TextView(this);
            label_BG.setText("BG");
            TextView label_QA = new TextView(this);
            label_QA.setText("QA");
            TextView label_CN = new TextView(this);
            label_CN.setText("CN"); 
            TextView label_KT = new TextView(this);
            label_KT.setText("KT");  

            TextView[] tvHeaderArray = {label_date, label_CP, label_BG, label_QA, label_CN, label_KT};

            for (TextView tvHeader : tvHeaderArray)
            {
                tvHeader.setTextColor(Color.WHITE);
                tr_head.addView(tvHeader);
            }
            tl.addView(tr_head, new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
            doFirstHeadings = false;
            count = 0;
        }

        // Create the table row
        TableRow tr = new TableRow(this);
        tr.setClickable(true);
        tr.setId(100+count);
        tr.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

        TextView labelDATE = new TextView(this);
        TextView labelCP = new TextView(this);
        TextView labelBG = new TextView(this);
        TextView labelQA = new TextView(this);
        TextView labelCN = new TextView(this);
        TextView labelKT = new TextView(this);
        TextView[] tvArray = {labelDATE, labelCP, labelBG, labelQA, labelCN, labelKT};

        if (!dateCheck.equals(re.getDate()) || (dateCheck == null) || dateCheck == "")
        {
            //Add a blank line in.
            TableRow tr_blank = new TableRow(this);
            tr_blank.setId(10);
            tr_blank.setBackgroundColor(Color.GRAY);
            tr_blank.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

            TextView label_date = new TextView(this);
            label_date.setId(20);
            label_date.setText(re.getDate());
            label_date.setTextColor(Color.WHITE);
            tr_blank.addView(label_date);

            tl.addView(tr_blank, new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));
        }

        labelDATE.setText(re.getTime());
        labelCP.setText(re.getCP());
        labelBG.setText(re.getBG());
        labelQA.setText(re.getQA());
        labelCN.setText(re.getCN());
        labelKT.setText(re.getKT());
        for (TextView tv : tvArray)
        {
            tv.setTextColor(Color.WHITE);
            tv.setId(200+count);
            tr.setOnClickListener(this);
            tr.addView(tv);
        }
        //add this to the table row
        tl.addView(tr, new TableLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT));

        dateCheck = re.getDate().toString();
        ++count;
    }
    }
    public void onClick(View v) 
    { 
        if (v instanceof TableRow) 
        { 
            TableRow row = (TableRow) v; 
            TextView child = (TextView) row.getChildAt(0); 
            Toast toast = Toast.makeText(this, String.valueOf(child.getId()), Toast.LENGTH_SHORT); 
            toast.show();
        } 
    } 
} 
```

如果需要，我可以提供用于创建网格的所有代码。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T00:32:18.587

> 我的问题是我无法从网格中检索出一条完整的线。
> 
> onClick 就在最后，当我使用 getText() 而不是 getID() 时，它返回的只是 labelDate 中的数据。如何检索下面列出的所有标签？

我不确定我是否理解这个问题，但这会给你所有的 ID 都在一个`TableRow`

```
public void onClick(View v) {
    if (v instanceof TableRow) {
        TableRow row = (TableRow) v;
        String msg = "";
        for (int i=0; i < row.getChildCount(); i++) {
            TextView child = (TextView) row.getChildAt(i);
            msg += String.valueOf(child.getId()) + " ";
        }
        Toast toast = Toast.makeText(this, msg, Toast.LENGTH_SHORT);
        toast.show();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T23:22:56.833

你的问题在这里：

```
 TextView child = (TextView) row.getChildAt(0); <------------------
            Toast toast = Toast.makeText(this, String.valueOf(child.getId()), Toast.LENGTH_SHORT); 
            toast.show(); 
```

您专门请求该行的第一个孩子并从中获取文本，这当然只会产生一个值。要获得所有其余部分，我建议您前往`List<Readings>`并通过索引指定您想要的对象。然后您可以打印出对象中的所有内容。至于你如何获得这个索引......在你当前的实现中，我认为也许用索引**标记**你的 textViews，因为它们正在制作并由你填充`List`可能是最直接的。

# iphone - 为什么我的 iOS 数据没有与 NSKeyedArchiver 一起保存？

> ID：13942916
> 
> 赞同：1
> 
> 时间：2012-12-18T23:01:32.457
> 
> 标签：iphone, objective-c, ios, save, nskeyedarchiver

我只是在做我的第一款 iPhone 游戏的“收尾工作”。出于某种原因，当我使用 NSKeyedArchiver/Unarchiver 保存时，数据似乎加载了一次，然后就丢失了。

我正在尝试使用相同的存档器保存 2 个对象： an`NSMutableDictionary levelsPlist`和 an `NSMutableArray categoryLockStateArray`。被设置为非原子，在头文件中保留属性。

这是我能够推断出的：

1.  保存为 NSMutableDictionary 的对象始终存在。它工作得很好。

2.  当我在这个 viewController 中保存时，**弹出**到前一个，然后**推**回这个，数据被保存并按我想要的方式打印。

3.  但是当我保存在这个 viewController 中，然后**推送**一个新的并**弹**回到这个 viewController 中时，categoryLockState 丢失了。

知道为什么会发生这种情况吗？我这个设置错了吗？我是几个月前从一本书上抄来的。这是我用来保存和加载的方法。

```
 - (void) saveGameData {
        NSLog(@"LS:saveGameData");

        // SAVE DATA IMMEDIATELY
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *gameStatePath = [documentsDirectory stringByAppendingPathComponent:@"gameState.dat"];
        NSMutableData *gameSave= [NSMutableData data];
        NSKeyedArchiver *encoder = [[NSKeyedArchiver alloc] initForWritingWithMutableData:gameSave];
        [encoder encodeObject:self.categoryLockStateArray forKey:@"categoryLockStateArray];
        [encoder encodeObject:self.levelsPlist forKey:@"levelsPlist"];

        [encoder finishEncoding];
        [gameSave writeToFile:gameStatePath atomically:YES];

        NSLog(@"encoded catLockState:%@",categoryLockStateArray);
    }

- (void) loadGameData {
    NSLog(@"loadGameData");

    // If there is a saved file, perform the load
    NSMutableData *gameData = [NSData dataWithContentsOfFile:[[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:@"gameState.dat"]];

    // LOAD GAME DATA
    if (gameData) {
        NSLog(@"-Loaded Game Data-");
        NSKeyedUnarchiver *unarchiver = [[NSKeyedUnarchiver alloc] initForReadingWithData:gameData];
        self.levelsPlist = [unarchiver decodeObjectForKey:@"levelsPlist"];
        categoryLockStateArray = [unarchiver decodeObjectForKey:@"categoryLockStateArray"];

        NSLog(@"decoded catLockState:%@",categoryLockStateArray);
    }

    // CREATE GAME DATA
    else {
        NSLog(@"-Created Game Data-");
        self.levelsPlist = [[NSMutableDictionary alloc] initWithContentsOfFile:[[NSBundle mainBundle] pathForResource:kLevelsPlist ofType:@"plist"]];
    }

    if (!categoryLockStateArray) {
        NSLog(@"-Created categoryLockStateArray-");

        categoryLockStateArray = [[NSMutableArray alloc] initWithCapacity:[[self.levelsPlist allKeys] count]];

        for (int i=0; i<[[self.levelsPlist allKeys] count]; i++) {
            [categoryLockStateArray insertObject:[NSNumber numberWithBool:FALSE] atIndex:i];
        }
    }

    // set the properties of the categories
    self.categoryNames = [self.levelsPlist allKeys];
    NUM_CATEGORIES = [self.categoryNames count];
    thisCatCopy = [[NSMutableDictionary alloc] initWithDictionary:[[levelsPlist objectForKey:[self.categoryNames objectAtIndex:pageControl.currentPage]] mutableCopy]];
    NUM_FINISHED = [[thisCatCopy objectForKey:kNumLevelsBeatenInCategory] intValue];
} 
```

我只能猜测它与 viewController 在弹出然后推回时被卸载并重新加载的事实有关，但是我的 viewDidLoad 代码没有提及这些变量中的任何一个。它们是从 viewDidAppear 方法调用的。

谢谢你尽你所能的帮助！

# php - 如何通过其 url 找出文件的扩展名？

> ID：13942918
> 
> 赞同：-1
> 
> 时间：2012-12-18T23:01:38.960
> 
> 标签：php

我正在尝试找出特定 url 的扩展名，这是我想要做的：

```
$pathinfo = pathinfo('http://imgur.com/9P54j');
$extension = $pathinfo['extension'];
echo $extension; 
```

url 'http://imgur.com/9P54j' 实际上是一个具有 9P54j.gif 图像的 url，它在 url 中并不明显，如何提取文件 '9P54j' 的扩展名 .gif ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T23:06:52.737

该 URL 不是 .gf 图像的 URL，而是在其 HTML 中包含该图像的页面。您将需要解析图像 URL 的 HTML。尝试：右键单击您上面提供的链接中的图像，然后单击“打开图像”或“查看图像”以查看完整的 URL。

甚至该 URL 也可能没有扩展名，因为数据可能会流式传输给用户 bia PHP。如果是这种情况，只需检查 Content-Type 标头即可了解扩展名是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:11:35.007

您可以使用正则表达式来提取它，如下所示：

```
$url = 'http://imgur.com/9P54j';
$content = file_get_contents($url);
$explode = explode('/', $url);
preg_match('/http:\/\/i\.imgur\.com\/' . array_pop($explode) . '(\.[A-z]{1,4})/', $content, $matches);
$ext = $matches[1]; // '.gif' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T23:24:54.347

我的回答假设想要从 url 本身没有扩展名的 url 中获取文件的扩展名。

Using`pathinfo()`将不起作用，因为它使用文本队列检索扩展名，并且在 url 中没有扩展名。

一种方法是使用较低级别的 http 功能，该功能允许向 url 发送 http 请求并获取响应标头。响应标头应定期包含“Content-Type:”标头，该标头向我们显示内容的 mimetype。

一旦有了“Content-Type”标头，您就可以使用转换表和转换 mimetype 到文件扩展名。这个受支持的扩展名列表当然是有限的，并且存在可以转换为多个扩展名的 mimetypes。在这种情况下，您必须对文件内容本身进行进一步调查。

作为一个真正的 php 程序对于这个答案来说太大了，我只给出一个伪代码：

```
<?php

function get_extension_from_mimetype($url) {
    // static translation table. to be extended
    static $translationTable = array (
        'image/jpeg' => 'jpg',
        'text/xml' => 'xml',
        'text/html' => 'html'
    );

    $defaultExtension = 'dat';

    // you'll have to write this method 
    $mimetype = get_mimetype_by_url($url);

    if(isset($translationTable[$mimetype])) {
        $extension = $translationTable[$mimetype];
    } else {
        $extension = $defaultExtension;
    }

    return $extension;
} 
```

# database - 使用多个数据库

> ID：13942922
> 
> 赞同：1
> 
> 时间：2012-12-18T23:01:48.820
> 
> 标签：database, database-design

一家公司受雇于另一家公司以在某个领域提供帮助。

所以我创建了以下表格： 公司：id、公司名称、公司地址 管理员：（与公司相关）id、company_id、用户名、电子邮件、密码、全名

然后，每个公司都有一些工人，我存储有关工人的数据。因此，工人有一个职业，签署的协议类型和其他一些常见的东西。

现在，每个公司的员工（协议类型、专业、其他常见事物）的父表和数据将是相同的。

我应该为每家公司创建 1 个新数据库吗？还是将所有数据存储到同一个数据库中？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-18T23:14:11.153

由于每个公司的“协议类型”、“职业”都相同，我建议有一个像“协议类型”这样的查找表，其中包含“ID”、“类型”等列，并参考“工人”中的“ID”列“ 桌子。我认为不需要新的数据库，关系数据库用于消除数据冗余并在实体之间创建适当的关系。

通过想象一家公司拥有一个数据库，最终每个数据库的“公司”表中都有一条记录。“管理员”和“工人”与该单条记录相关联。而其他常见的实体，如“AgreementTypes”将在其他表中。

因此，如果对协议类型有任何添加/修改，很难在所有数据库中都进行。类似地，如果有任何新实体要链接到“公司”实体，则再次基于这些实体属于 ONE 应用程序的假设重新访问所有数据库。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-19T02:38:08.263

你应该有一个单一的数据库，其结构类似于这样（这有点过于简单，但你明白了）：

```
Companies
    CompanyID PK
    CompanyName
    CompanyAddress
    OtherCompanySpecificData

Workers
    WorkerID PK
    CompanyID FK
    LastName
    FirstName
    DOB
    AgreementTypeID FK
    ProfessionID FK
    UserID FK - A worker may need more than one user account
    Other UserSpecificData

Professions
    ProfessionID PK
    Profession
    OtherProfessionStuff

AgreementType
    AgreementTypeID PK
    AgreementTypeName
    Description
    OtherAgreementStuff

Users
    UserID PK -- A Worker may need more than 1 user account
    WorkerID FK
    UserName
    Password
    AccountStatus

Groups
    GroupID PK
    GroupName
    OtherGroupSpecificData

UserGroups --Composite Key with UserID and GroupID
    UserID PK 
    GroupID PK 
```

显然，事情会变得更复杂一些，我不知道你的需求或商业模式。例如，如果公司可以有不同的部门，您可能希望创建一个 CompanyDepartment 表，然后能够将工人分配到各个部门。

等等。

您可以使数据结构更加原子化，随着数据库的增长，您的数据库将更加灵活。谷歌术语数据库规范化，特别是数据库的第三范式（3NF）（被认为是有效数据库设计的最小值）。

希望有帮助。如果您遇到困难，请随意详细说明 - 这里有很多关于 SO 的帮助。

# php - 使用php在数据库中添加多行

> ID：13942929
> 
> 赞同：0
> 
> 时间：2012-12-18T23:03:00.380
> 
> 标签：php, mysql

我必须在数据库中添加许多具有相同特征的链接（链接类型、国家、作者、项目）。例如，我想一次在我的数据库中添加 6 个链接 - 6 行（见图）。请帮我这样做。

![在此处输入图像描述](../Images/94d5faf49917e6f2512d9d182eb02eec.png)

```
<html>
<head><title>Add values to DataBase</title></head>
    <body>
        <form name="input" action="" method="post">
            <table>
                    <tr>
                    <td>
                <b>Link Type: <br><input type="text" name="LinkType"><br>
                    </td>
                    <td>
                <b>Country: <br><input type="text" name="Country"><br>
                    </td>
                    </tr>
                    <tr>
                    <td>
                <b>Author: <br><input type="text" name="Author"><br>
                    </td>
                    <td>
                <b>Project: <br><input type="text" name="Project"><br>
                    </td>
                    </tr>
            </table>
                <b>Links:</b><br>
                    <textarea rows="20" cols="80" name='Link'>
                    </textarea><br>
                    <input type="submit" onclick="Confirmare()" name="introdu" value="Exporta">
        </form> 
    </body>
</html>

<?PHP

    error_reporting(E_ALL & ~E_NOTICE);
    mysql_connect("localhost", "root", "pechea.com") or die(mysql_error());
    mysql_select_db("repdb") or die(mysql_error());

    $Link=$_POST['Link'];
    $LinkType=$_POST['LinkType'];
    $Project=$_POST['Project'];
    $Date=$_POST['Date'];
    $Country=$_POST['Country'];
    $Author=$_POST['Author'];
    $Status=$_POST['Status'];

?>
<script type="text/javascript">
        function Confirmare()
        {
<?php
    mysql_query("INSERT INTO projects (Link, LinkType, Project, Date, Country, Author, Status)  
    VALUES ('".$Link."', '".$LinkType."', '".$Project."','".$Date."', '".$Country."', '".$Author."', '".$Status."') ")  or die(mysql_error());

?>
alert("Values Added in DB!");}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T23:09:58.770

展开文本区域中的链接

```
$links = explode("\n", $_POST['Link']); 
```

循环链接并插入

```
foreach($links as $link) {
    mysql_query("INSERT ...");
} 
```

别忘了逃跑...

# php - 正则表达式提取字符串中包含的 url

> ID：13942930
> 
> 赞同：-1
> 
> 时间：2012-12-18T23:03:04.630
> 
> 标签：php, regex, url

> **可能重复：**
> [如何匹配文本中的 URI？](https://stackoverflow.com/questions/82398/how-to-match-uris-in-text)
> [检查字符串是否为有效 URL 的最佳正则表达式是什么？](https://stackoverflow.com/questions/161738/what-is-the-best-regular-expression-to-check-if-a-string-is-a-valid-url)

我需要使用正则表达式（PHP）从包含许多 URL 的字符串中将 URL 提取到 zip 文件。

一个简单的例子应该会有所帮助：

目标：提取url [http://en.wikipedia.org/wiki/Kettle.zip](http://en.wikipedia.org/wiki/Kettle.zip)

基本字符串：

```
/url?q=http://en.wikipedia.org/wiki/Kettle.zip&sa=U&ei=VpnIUP22Js blah /url?q=http://en.wikipedia.org/wiki/Kettle&sa=U&ei=VpnIUP22Js blah /url?q=http://en.wikipedia.org/wiki/Kettle.rar&sa=U&ei=VpnIUP22Js 
```

更新; 假设基本字符串是

href="http://en.wikipedia.org/wiki/Kettle.zip">一些文字/a>这里有一些其他文字a href="http://google.com/wiki/Kettle"> /a>

我需要提取 [http://en.wikipedia.org/wiki/Kettle.zip](http://en.wikipedia.org/wiki/Kettle.zip)

任何方法都可以...正则表达式与否。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:11:31.797

不要使用正则表达式。正则表达式不是解决所有与字符串相关的问题的魔杖。

用于`parse_url()`拆分您的 URL，然后用于`explode`拆分`&`.

```
$url = "http://example.com/url?q=http://en.wikipedia.org/wiki/Kettle.zip&sa=U&ei=VpnIUP22Js";
$query = parse_url($url, PHP_URL_QUERY);
print "query is: $query\n";
$args = explode( '&', $query );
print_r( $args ); 
```

运行这个给出：

```
query is: q=http://en.wikipedia.org/wiki/Kettle.zip&sa=U&ei=VpnIUP22Js
Array
(
    [0] => q=http://en.wikipedia.org/wiki/Kettle.zip
    [1] => sa=U
    [2] => ei=VpnIUP22Js 
) 
```

从那里穿过阵列，找到你想要的。

# mercurial - 在 Mercurial 中处理自定义的本地源文件

> ID：13942942
> 
> 赞同：2
> 
> 时间：2012-12-18T23:03:59.427
> 
> 标签：mercurial, tortoisehg

我们的 4 人团队目前使用 svn，但我正在测试 Mercurial。我们在 .net 上主要使用 C++ 和 C# 编写代码。我已经安装了 TortoiseHg，并使用 hgsubversion 来推/拉现有的 svn 存储库。团队中的其他开发人员现在将继续使用 svn。

我倾向于有一些我以某种特定方式定制的源文件（屠宰会是一个更好的术语），我不想推送给其他开发人员。但我确实希望将这些自定义更改编译到我的项目版本中。普通文件与自定义文件的比例约为 100:1

在 mercurial 中处理这些被屠杀的文件的最佳方法是什么？我可以在提交期间简单地取消选中被屠宰的文件，但最终，我会忘记这一步。我简要介绍了搁置和忽略。

忽略似乎不对，因为这些是跟踪文件。我确实想从其他人那里提取对屠宰文件的更改。搁置很接近，但它从我的工作副本中删除了被屠杀的代码，所以这也不正确。

我不能成为那里唯一的代码屠夫。让我知道你是如何处理这个问题的。Git 用户，我们也很高兴收到您的来信，我们还没有完全致力于使用 hg。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T00:22:36.670

如果它们是大多数人都会修改的文件（每个开发人员数据库帐户信息等），那么正确的方法是跟踪`xxxxx.sample`文件。例如，使用 `local-database.config`位于存储库中的构建脚本`.hgignore`并在存储库中提供一个`local-database.config.sample`文件。您可以在说明中包含“将样本复制到实际样本”，或者如果实际样本不存在，则让构建脚本自动执行此操作。当且仅当它存在时，我们让我们的配置包含 settings.local，并允许它覆盖主要设置。然后没有人需要本地配置，但可以选择使用它来更改任何不存在提交风险的东西。

如果它们是只有你会修改的文件，最好的方法是学习 Mercurial 队列。然后，您可以`pop`使用仅限您更改的更改集，推送到中央存储库，然后再次将其应用于您的构建。有各种扩展可以做类似的事情（`shelve`例如），但 mq 更可取，因为您可以对正在弹出和应用的叠加层进行版本控制。

# php - 从后台更改网站背景图像？

> ID：13942946
> 
> 赞同：0
> 
> 时间：2012-12-18T23:04:13.457
> 
> 标签：php, css, background-image

客户要求我为他的网站构建以下功能：

*   能够从后台更改他的网站的背景图像。(PHP & MySql)

任何人都可以推荐优雅但易于构建的解决方案吗？

我正在考虑将图像添加到数据库表中，然后从表中读取并直接将背景应用于`<body>`like `<body background="<?php echo $mybackground;?>">`，但我想应该有更优雅的解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:16:43.047

最简单的方法可能是使用站点范围的样式表，该样式表设置`body`使用固定文件名的背景并设置上传文件的简单表单，然后该文件将存储在服务器上的相应文件夹中，在该固定文件名下。只需要一个文件输入字段和一些身份验证（可能只是一个简单的密码）。然后表单可以进行一些基本检查，以查看文件是否属于图像类型。

这假设已检查图像是否适合背景，并且是提交人的责任。

有一个小缺点。如果背景图像不经常更改（通常情况下），正常的缓存机制会为其分配相当长的新鲜时间。这意味着用户可能会在一段时间内从缓存中获取旧的背景图像。但如果这很严重，您可以修改服务器设置，将背景图像设置为不可缓存或生命周期较短。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:13:03.257

不会有一个快速的剪切粘贴片段来做到这一点。

假设您不想使用 CMS，则必须设置数据库，创建 html 表单和一些 php 代码来处理更新数据库等...

为了让您开始，谷歌“使用 phpmyadmin 创建数据库”，然后查看[http://php.net/manual/en/book.mysqli.php](http://php.net/manual/en/book.mysqli.php)以获取 php 代码以连接到它并`sql`针对它运行脚本。

# javascript - Backbone - 为模型中的 Fetch 声明默认参数

> ID：13942951
> 
> 赞同：4
> 
> 时间：2012-12-18T23:04:43.227
> 
> 标签：javascript, backbone.js, backbone.js-collections

我有一些全局参数，每次我在集合上调用 fetch 时都想发送这些参数......我的问题是我不想在`data: { ... }`每次获取时都声明。

有没有办法可以在集合本身内部提供默认参数，并可以添加更多或覆盖一些？

**例如：**

而不是每次都这样做：

```
this.articlesCollection.fetch({
    dataType: 'jsonp',
    data: {
        deviceType: GlobalVars.deviceType,
        memberId: GlobalVars.memberId,
        authToken: GlobalVars.authToken,
        targetObjectId: userId,
        limit: 50,
        excludeArticleBodies: true,
        excludeViewedItems: false
    },
    success: function() {
        _this.render();
    }
}); 
```

我只想提供一两个参数和一个成功函数，如下所示：

```
this.articlesCollection.fetch({
    data: {
        targetObjectId: userId
    },
    success: function() {
        _this.render();
    }
}); 
```

...并让 Collection 看起来像：

```
define([
  'underscore',
  'backbone',
  'global',
  'utilities',
  'models/article/ArticleModel'
], function(_, Backbone, GlobalVars, Utils, ArticleModel){

  var ArticlesCollection = Backbone.Collection.extend({

      model: ArticleModel,

      initialize : function(view) {
          this.view = view;
      },

      dataType: 'jsonp',
      data: {
          deviceType: GlobalVars.deviceType,
          memberId: GlobalVars.memberId,
          authToken: GlobalVars.authToken,
          limit: 50,
          excludeArticleBodies: true,
          excludeViewedItems: false
       },

      url : function() {
        return GlobalVars.baseAPIUrl + '/API/GetArticles';
      },

      parse : function(data) {  
        return data.Articles;
      }     

  });

  return ArticlesCollection;

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-18T23:21:05.993

这是一个使用一种方法的工作 jsFiddle：http: [//jsfiddle.net/LEuGq/1/](http://jsfiddle.net/LEuGq/1/)

基本上，您将集合的对象`defaultParams`和`params`属性都配置为集合的属性，用于在`fetch()`调用时动态计算正确的 URL。这种方式可能更符合骨干网，而不是更改 API`fetch()`以接受参数，而这并不是设计用来做的。

```
var ParamCollection = Backbone.Collection.extend({

    defaultParams: {deviceType: 'raceCar', limit: 42},
    params: {},
    url: function() {
      return "/paramcollection?" + $.param(_.defaults(this.params, this.defaultParams));
    }
});
var paramCollection = new ParamCollection();
paramCollection.params.excludeArticleBodies = true;
paramCollection.params.limit = 52;
$("#debug").append(paramCollection.url()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-18T23:10:58.277

Backbone`ajax`默认使用 jQuery 的调用，因此您可以使用各种方法将所需的任何内容设置为默认值。有关一些示例，请参见此问题：[jQuery 的 ajaxSetup - 我只想为 GET 请求添加默认数据](https://stackoverflow.com/questions/6996993/jquerys-ajaxsetup-i-would-like-to-add-default-data-for-get-requests-only)

# iphone - 如何在子类中使用 UIGesterRecognizer

> ID：13942955
> 
> 赞同：0
> 
> 时间：2012-12-18T23:05:28.673
> 
> 标签：iphone, objective-c, delegates, uislider

我有一个子类：

```
CustomView : UIScrollView. 
```

在这个子类中，我有一些方法，比如说，用一些 UI 元素填充我的自定义视图。我想向这些元素添加 UIGesterRecognizer 功能，但我不知道如何处理设置委托和添加选择器：

```
@implementation  CustomView 

-populateMe{

     UIImageView *iv = [...];
     UIGesterRecognizer r = [UIGesterRecognizer alloc] 
          initWithTarget:self 
          action:@selector(handleMySwipe:); 
                          //<==where to declare handler

     r.delegate = self; //<==COMPILER ERROR self
     [iv.addGestureRecognizer r];
} 
```

所以我的问题是我在上面评论的地方：self 不是一个有效的委托（我试过 self.superclass），我需要在哪里声明一个处理程序以执行操作，即 handleMySwipe。

请解释一下，以便我理解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T23:22:51.263

`CustomView` *如果你为它实现`UIGestureRecognizerDelegate` [协议，](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIGestureRecognizerDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/UIGestureRecognizerDelegate)*它*可能是一个委托。也就是说，在您的`CustomView`类中实现协议要求您执行的一些方法。*

 *完成此操作后，您应该能够将目标参数设置为`self`没有任何错误。由于您的目标是 now `self`，因此您需要`handleMySwipe:` *在*您的`CustomView`类中实现选择器/方法，因为它会在那里寻找它（目标）。

```
- (void) handleSwipe:(UIGestureRecognizer *)gr {
} 
```*

# matplotlib - 禁用 matplotlib 工具栏

> ID：13942956
> 
> 赞同：14
> 
> 时间：2012-12-18T23:05:35.017
> 
> 标签：matplotlib, toolbar

有没有办法禁用/隐藏底部显示的 matplotlib 工具栏？

我试过这样的事情：

```
import matplotlib as mpl
mpl.rcParams['toolbar'] = 'None' 
```

但不幸的是，这没有用。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-03-20T22:44:11.997

确保在实例化任何数字`mpl.rcParams['toolbar'] = 'None'` **之前调用。**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-04-20T20:22:59.460

如果您使用`%matplotlib widget`(ipympl) 在 Jupyter 中，您可以执行以下操作：

```
fig.canvas.toolbar_visible = False 
```

您还可以使用以下方法禁用页眉和页脚：

```
fig.canvas.header_visible = False
fig.canvas.footer_visible = False 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-01-13T23:11:48.610

或者，您可以隐藏工具栏：

```
QToolBar.hide() 
```

或者

```
QToolBar.setVisible(False) 
```

* * *

显然，这只适用于 Qt 后端。为了扩展这个答案，给定图图：

首先，如果使用 Qt5：

```
from PyQt5 import QtWidgets 
```

否则：

```
from PyQt4 import QtGui as QtWidgets 
```

然后：

```
try:
    win = fig.canvas.manager.window
except AttributeError:
    win = fig.canvas.window()
toolbar = win.findChild(QtWidgets.QToolBar)
toolbar.setVisible(False) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-17T15:38:19.187

要扩展 bejota 的答案：

显然，这只适用于 Qt 后端。为了扩展这个答案，给定图图：

首先，如果使用 Qt5：

```
from PyQt5 import QtWidgets 
```

否则：

```
from PyQt4 import QtGui as QtWidgets 
```

然后：

```
toolbar = win.findChild(QtWidgets.QToolBar)
toolbar.setVisible(False)
try:
    win = fig.canvas.manager.window
except AttributeError:
    win = fig.canvas.window()
toolbar = win.findChild(QtWidgets.QToolBar)
toolbar.setVisible(False) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2013-05-30T08:09:07.200

您可以转到`C:\Python27\Lib\site-packages\matplotlib\mpl-data`，在那里您将看到名为 的文件`matplotlibrc`，打开该文件，您会发现如下一行：

```
#toolbar      : toolbar2# None | toolbar2  ("classic" is deprecated) 
```

取消注释该行并放在`None`冒号之后，例如：

```
toolbar      : None# None | toolbar2  ("classic" is deprecated) and save the file, 
```

我猜你可以禁用 matplotlib 绘制的图表中的工具栏。

# c# - Silverlight Datagrid 到 Excel 导出与单元格格式

> ID：13942960
> 
> 赞同：0
> 
> 时间：2012-12-18T23:05:47.783
> 
> 标签：c#, .net, silverlight, excel, datagrid

有没有办法在浏览器中做到这一点？（没有自动化工厂）

我知道我可以很好地导出为 CSV，但我想将我的 Silverlight 数据网格导出为 Excel (.xls) 文档，并设置了一些行的背景颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T17:26:57.487

我发现这个指南几乎是我需要的，虽然它并不优雅。基本上，循环并将所有行打印为 XML 格式。我觉得很奇怪微软不会提供一个浏览器内的方法来导出到 Excel 格式，我们需要做这样的事情

[http://www.codeproject.com/Articles/45731/Export-Silverlight-DataGrid-to-Excel-XML-CSV](http://www.codeproject.com/Articles/45731/Export-Silverlight-DataGrid-to-Excel-XML-CSV)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T10:20:15.780

If you want to interact with MS Excel using Silverlight CLR - it is the only way to use AutomationFactory (becouse of silverlight pesmission restrictions). Ms Excel should be installed on client machines. But you can also pass data to web-service, process it, and return excel sheet as byte array.

I suggest you use the second way.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T10:38:09.620

从 silverlight 导出网格到 excel mht 将适用于任何颜色和格式。

# windows - COM 服务器 DLL 依赖项的搜索规则

> ID：13942964
> 
> 赞同：4
> 
> 时间：2012-12-18T23:06:06.677
> 
> 标签：windows, dll, com

考虑 Windows 上的以下文件组织：

```
[app folder]
    app.exe
    [folder 'sub']
        com_server.dll
        regular.dll
        helper.dll 
```

还假设以下内容：

*   com_server.dll 和regular.dll 都静态链接到helper.dll 中的函数，因此helper.dll 会在它们存在时被加载。
*   app.exe 没有静态依赖项。
*   com_server.dll COM 对象在 Windows 中注册
*   文件夹 'sub' 不在系统路径中。

考虑以下情况：

1.  app.exe 调用 LoadLibrary("sub/regular.dll")。这将失败，因为 Windows 将无法找到 helper.dll，这与文档中的 DLL 搜索过程一致。
2.  app.exe 调用 CoCreateInstance 以创建在 com_server.dll 中实现的对象。这成功并加载了 helper.dll。

主要问题：为什么案例 2 有效？COM 服务器案例的依赖 DLL 搜索过程的细节是什么？

看起来，当使用 CoCreateInstance 创建 com 对象时，实现 dll 的文件夹以某种方式添加到依赖项的搜索路径中。这是正在发生的事情吗，这是有保证的吗？我在任何地方都找不到任何讨论此案例的文档。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:37:16.303

[让我们看一下MSDN 上 LoadLibrary](http://msdn.microsoft.com/en-us/library/ms684175%28v=vs.85%29.aspx)的文档：

> 如果字符串指定了完整路径，则该函数仅在该路径中搜索模块。如果字符串指定了相对路径或不带路径的模块名称，则该函数使用标准搜索策略来查找模块；有关详细信息，请参阅备注。

好的，这就解释了上面 #1 的行为。如果你说过：

```
LoadLibrary("C:\\program files\\AppFolder\\Sub\\com_server.dll") 
```

然后就会找到您的依赖 DLL，并且 LoadLibrary 会成功。

至于 COM 如何在 #2 上取得成功，这实际上取决于 com_server.dll 如何在注册表中为 InProcServer32 键注册。如果它是文件的完整路径，则 LoadLibrary 将按上述方式工作。如果它是相对路径，那么我怀疑 COM 可能会做很多事情来使查找像您这样的 DLL 工作。

一种可能的可能性是 CoCreateInstance 在调用[LoadLibraryEx](http://msdn.microsoft.com/en-us/library/ms684179%28v=vs.85%29.aspx)时设置了**LOAD_LIBRARY_SEARCH_DLL_LOAD_DIR**标志。它甚至可以使用不同的标志组合多次调用 LoadLibrary(Ex)。

此外，鉴于 CoCreateInstance 是一个系统 API，它完全有可能拥有 LoadLibrary 的私有内部版本，允许备用搜索路径。

# view - 为小部件定义参数的最佳方法？

> ID：13942966
> 
> 赞同：2
> 
> 时间：2012-12-18T23:06:15.933
> 
> 标签：view, yii, widget

我正在创建一个小部件，其中将有 2 种类型的参数：

- 可以根据我们调用小部件的位置而改变的那个，那些将在小部件调用中定义：

```
<?php $this->widget('ext.myWidget', array(
    'someParams' => 'someValues',
)); ?> 
```

- 对小部件的所有调用都是相同的（库的路径，保存图像的位置，...）

我想知道定义第二种参数的最佳方法是什么。

我在让用户在配置文件的 params 数组中定义它还是在 Widget 文件的数组中定义它之间犹豫不决。

第一个选项的主要优点是用户不必修改 Widget 文件，因此在更新的情况下，他的修改不会被覆盖，但这不是特定的用户参数，所以将它放在 config 中的 parmas 数组中文件可能看起来很奇怪。

那么最好的解决方案是什么？如果还有比上面2个更好的，请告诉我！

编辑：

澄清我的想法：我的小部件将生成一些可以存储在可配置目录中的图像。但是由于每次调用小部件时这个目录都必须相同，所以我看不出将这个配置放入小部件调用中的意义！这就是为什么我正在考虑将一些参数放入配置文件中，在`params`数组中，例如：

```
params => array(
    'myWidget' => array(
        'imageDir' => 'images',
    )
) 
```

但我不知道扩展在`params`数组中有一些配置值是否是一个好习惯。

另一种解决方案是`config.php file`在我的扩展目录中有一个用户可以设置自己的值的地方，这样他就不必修改插件的主配置文件。但这种替代方案的主要缺点是，如果用户更新扩展，他将失去他的配置。

这就是为什么我正在寻找有关小部件配置的最佳实践

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T09:00:27.453

也许您寻找的更多是应用程序组件而不是小部件。与小部件相比，您在组件中拥有更多功能。它仍然可以存在于您的扩展目录中，在包含所有相关文件的文件夹下，并且仍然可以从任何地方轻松调用，但是可以在每个环境的配置文件中定义配置。

在配置中设置组件时，只需将`class`数组参数指向扩展文件夹，而不是组件文件夹。

**更新：**
如果您确实想使用一个小部件，因为没有更多的复杂性，您可以在应用程序配置中为小部件提供一些默认值，我相信，我自己从未使用过它，请参见此处：[http://www.yiiframework。 com/doc/guide/1.1/en/topics.theming#customizing-widgets-globally](http://www.yiiframework.com/doc/guide/1.1/en/topics.theming#customizing-widgets-globally)。

但是我发现对于更复杂的小部件，从长远来看，一个组件可以更好地为我服务，因为我可以更轻松、更清洁地调用方法和检索其上的选项，但仍然在一个文件夹中包含与扩展相关的所有内容。

# database - 当系统日期和时间到达到期日时，如何使我的数据库表自动更新？

> ID：13942967
> 
> 赞同：1
> 
> 时间：2012-12-18T23:06:25.183
> 
> 标签：database

我正在编写一个**Web 应用程序**。在它的**数据库**中，有一个**表格**保存了一些截止日期。**另一个表**有两列：`name`和`state`。我希望在`state`这些到期日期中的任何一个到达时自动更新该列（更新的值是根据我的程序中的某些逻辑计算的）。

我怎样才能实现这个功能？在服务器机器上运行另一个程序（独立于我的 Web 应用程序）来检查数据库的到期日期并更新表是否很常见，或者还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:48:34.123

尽管一些数据库支持计划任务，但大多数 DBA 使用`cron`计划任务来完成工作。

我建议你这样做。

（感谢 catcall 的评论）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-25T17:35:00.153

```
DELIMITER $$

CREATE EVENT 'DBNAME'.'EVENTNAME'

ON SCHEDULE
    EVERY 1 DAY

ON COMPLETION PRESERVE
ENABLE

DO
    BEGIN
     /*sql statements*/
     UPDATE tableName SET state = 'newState' where NOW() = (SELECT * FROM tableWithDates);
    END

DELIMITER ; 
```

* * *

这是在 MySql 中创建事件的代码。您可以使用 Mysql 事件更新表中的数据。此事件每 1 天运行一次，然后执行 sql 查询。MySql 事件也在后台运行。

# c++ - 更好的实数生成器

> ID：13942974
> 
> 赞同：-1
> 
> 时间：2012-12-18T23:06:48.083
> 
> 标签：c++, random

在浏览了一段时间的问题并在谷歌上搜索了一堆之后，我发现自己很痛苦，因为没有一个“随机”生成器是真正随机的，我所说的随机是什么意思？总随机性，我在编译它们并运行多次打印大量值后发现的所有算法，结果是相同的，或者至少可以找到一种模式。这很糟糕，我正在为 MMO 服务器做一个随机数生成器，其功能将从升级项目到将一组玩家分成团队，模式总是，总是不好，想象每次我重新启动程序时生成相同的数字顺序。我的想法是，获得随机数的最好方法是弄乱时间，你永远无法知道某事发生的确切时间，如果时间非常精确就更好了。

```
inline __int64 NanoTime()
{
    struct { int low, high; } Nano;

    __asm push EAX
    __asm push EDX
    __asm __emit 0fh __asm __emit 031h
    __asm mov Nano.low, EAX
    __asm mov Nano.high, EDX
    __asm pop EDX
    __asm pop EAX

    return *(__int64 *)( &Nano );

}

static DWORD g_Prev = NanoTime();

__int64 xRandom( void )
{
    __int64 Now = NanoTime() - g_Prev / 2;
    CString strRand, strLast;
    strRand.Format( "%I64d", Now );
    strLast = strRand.GetAt( strRand.GetLength()-1 );
    strLast += strRand.GetAt( strRand.GetLength()-2 );
    return( atoi( strLast ) );
} 
```

虽然文本很大，但问题很简单，我需要一个尽可能小的算法的实数生成器的方向，我的解决方案每秒被调用数十万次不是我想要的，它只是在这里提示我需要的方向。

我已经研究过`boost`，比如不使用最低位顺序`time(0)`等。但都有一个模式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-18T23:14:34.163

> 我在编译它们并运行多次打印大量值后发现的所有算法，结果是相同的，或者至少可以找到一种模式。

坦率地说，听起来您尝试过的算法很差，或者您使用或评估它们的方式并不理想。

如果标准`rand()`还不够（这是一个很大的假设！），你最好的选择是更高级别的伪随机生成器，例如[Mersenne Twister](http://en.wikipedia.org/wiki/Mersenne_twister)。此类算法已被证明可以通过各种统计随机性测试。

如果你要选择你使用的硬件，最近的（Ivy Bridge）英特尔硬件提供了一个带有内置熵源的片上随机数生成器：[`RDRAND`](http://en.wikipedia.org/wiki/RdRand). 这提供了良好的随机性和高吞吐量，但对于您的需求来说可能是多余的。

> 想象每次我重新启动程序时都会生成相同的数字顺序

如果这是一个问题，听起来你没有正确地为你的生成器播种。如果你每次运行一次，并使用当前时间作为种子，你将在不同的运行中得到不同的随机序列。

> 我想出了一个很棒的解决方案。

如果我正确阅读了您的代码，则您的熵源是[`TSC`](http://en.wikipedia.org/wiki/Time_Stamp_Counter)modulo `100`。试着在一个紧密的循环中调用你的生成器，看看它到底有多随机。

# jquery - Google Contacts API 无法使用 JQuery AJAX 调用 max-results

> ID：13942978
> 
> 赞同：0
> 
> 时间：2012-12-18T23:06:52.873
> 
> 标签：jquery, ajax, google-contacts-api

这是我的代码：

```
$.ajax({
url: 'https://www.google.com/m8/feeds/contacts/default/full',
dataType: 'jsonp',
data: { access_token: token, max-results: '5000', alt: 'json' },
success:function(data){ /*magic*/ }
}); 
```

问题是 max-results 具有“-”字符。

我该如何解决这个问题并保留参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T23:09:54.370

只需使用字符串文字作为属性的名称

```
$.ajax({
url: 'https://www.google.com/m8/feeds/contacts/default/full',
dataType: 'jsonp',
data: { access_token: token, 'max-results': '5000', alt: 'json' },
success:function(data){ /*magic*/ }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T00:21:32.797

试试这个，它对我有用

```
$.ajax({ url: 'https://www.google.com/m8/feeds/contacts/default/full?max-results=1000',
                          dataType: 'jsonp',
                          data: authParams,
                          success: function(data) {
                              console.log(data);}}) 
```

# language-agnostic - 谜题：在二维数组中的给定行和列中查找数字，其中没有数字可能出现两次

> ID：13942983
> 
> 赞同：2
> 
> 时间：2012-12-18T23:07:11.067
> 
> 标签：language-agnostic, multidimensional-array

我们有一个二维数组，左上角的数字为 0。然后用数字填充数组的其余部分，以便每个索引包含可能既不存在于同一行也不存在于同一列的最小正整数。

例子：

```
 0  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17
  1  0  3  2  5  4  7  6  9  8 11 10 13 12 15 14 17 16
  2  3  0  1  6  7  4  5 10 11  8  9 14 15 12 13 18 19
  3  2  1  0  7  6  5  4 11 10  9  8 15 14 13 12 19 18
  4  5  6  7  0  1  2  3 12 13 14 15  8  9 10 11 20 21
  5  4  7  6  1  0  3  2 13 12 15 14  9  8 11 10 21 20
  6  7  4  5  2  3  0  1 14 15 12 13 10 11  8  9 22 23
  7  6  5  4  3  2  1  0 15 14 13 12 11 10  9  8 23 22
  8  9 10 11 12 13 14 15  0  1  2  3  4  5  6  7 24 25
  9  8 11 10 13 12 15 14  1  0  3  2  5  4  7  6 25 24
 10 11  8  9 14 15 12 13  2  3  0  1  6  7  4  5 26 27
 11 10  9  8 15 14 13 12  3  2  1  0  7  6  5  4 27 26
 12 13 14 15  8  9 10 11  4  5  6  7  0  1  2  3 28 29
 13 12 15 14  9  8 11 10  5  4  7  6  1  0  3  2 29 28
 14 15 12 13 10 11  8  9  6  7  4  5  2  3  0  1 30 31
 15 14 13 12 11 10  9  8  7  6  5  4  3  2  1  0 31 30
 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31  0  1
 17 16 19 18 21 20 23 22 25 24 27 26 29 28 31 30  1  0 
```

给定这样的数组中的行和列，我需要能够在相对较新的台式 PC 上在一秒钟内找到指定索引中的数字（对于小于一百万的行和列）。到目前为止，我的蛮力尝试都是徒劳的，这显然不是我想要的方式。大概必须有一种方法可以在线性时间（？）内找出有问题的数字，这不需要计算数组中所有前面的数字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-19T00:17:18.930

观察表明，运算符是按位的`XOR`（将每个操作数表示为二进制数，将相应的位异或，读取为二进制）。

现在证明它*是*异或：

* * *

由于固定一个参数的 XOR 是另一个参数的双射，因此满足“既不存在于同一行也不存在于同一列”。

现在只需证明“最小”部分就足够了，即如果我们减少任一操作数，任何较低的值都已经出现：

```
foreach A >= 0, B >= 0, F >= 0:
  (A xor B > F) => (exists D: D xor B = F) or (exists E: A xor E = F) 
```

或等效地

```
foreach 0 <= A, 0 <= B, 0 <= F < (A XOR B)
  (exists D: D xor B = F) or (exists E: A xor E = F) 
```

*请注意，我们不再关心我们的运算符，我们正在证明 XOR 的最小性。*

定义`C = A xor B`

如果`A = 0`, `B = 0`, 则满足极小性。

现在，如果`A`和`B`具有相同的幅度（相同的位长），那么清除两者的最高位不会改变`C`。清除最高位是向矩阵中原点的平移，因此如果平移后上方或左侧存在较小的值，则它在平移前处于相同的相对位置。

`A`并且`B`必须具有不同的量级才能成为反例。`XOR`（以及正在考虑的运算符）是对称的，所以假设`A > B`.

如果`F`大于`A`，则不小于 ，因此不是反例。

如果`F`与 具有相同的幅度，则清除和 中`A`的最高位。这是表中的翻译。它会更改值，但不会更改它们的顺序，因此如果在平移后上方或左侧存在较小的值，则它在平移前处于相同的相对位置。`A``F`

如果`F`具有比 更小的量级`A`，则根据鸽笼原理和 XOR 的性质，存在一个`D`量级小于`A`的`D xor B = F`。

* * *

摘要： XOR 满足强加于解的条件的证明来自 XOR 的对称性、其保幅特性和双射特性。我们可以`A xor B`通过减少和挑战找到每个更小的元素`A`，`B`直到它们都为零或不同大小（此时我们应用鸽巢原理来证明可以在不实际对抗的情况下对抗挑战）。

# php - 建立数组的递归函数

> ID：13942985
> 
> 赞同：0
> 
> 时间：2012-12-18T23:07:23.237
> 
> 标签：php, arrays, recursion, array-splice

我正在尝试使用递归函数来构建具有继承的数组。

假设我有一个看起来像这样的对象“a”（父 ID 为“b”）

```
a = 'Item 1', 'Item 2', Parent_ID, 'Item 3', 'Item 4' 
```

我有一个看起来像这样的对象“b”：

```
b = 'Item X', 'Item Y' 
```

期望的结果是这样的：

```
final = 'Item 1', 'Item 2', 'Item X', 'Item Y', 'Item 3', 'Item 4' 
```

所以基本上 array_splice 函数继续寻找父 ID 并插入父项。我在代码上朝着这个方向发展：

```
$master_list = array();

getItems("a", $master_list);

function getItems($ID, &$master_list){
    $master_list = retrieve_items($ID); // returns items from "a"

    //if Parent ID exists, run function again to retrieve items from parent and insert them in place of the Parent ID
    if(Parent_ID)
        array_splice($master_list, [parent index], 1, getItems($parentID, $master_list);
} 
```

我的函数将其作为（不希望的）结果返回：

```
final = 'Item 1', 'Item 2', 'Item 3', 'Item 4', 'Item X', 'Item Y' 
```

**显然这是伪代码，只是为了说明问题**。谁能指出我正确的方向？我非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T00:28:28.893

我会说类似使用 array_walk() 来解析数组

```
function insert_array(&$item1, $key, $userdata) {
    if($item1 === $userdata['Product_ID']) {
        $item1 = $userdata['insert'];
    }
}

$data['product_id'] = PRODUCT_ID;
$data['insert'] = $b;

array_walk($a,'insert_array',$data); 
```

注意：如果你想做这样的事情，而不是基于键而不是值，你可以使用 array_replace()。

不是最优雅的，但在这里。

```
while(in_array(Parent_ID,$a,false)) {
    foreach($a as $value) {
        if($value != Parent_ID) {
            $temp[] = $value;
        } else {
            foreach($b as $key => $value2) {
            $temp[] = $value2;
            }
        }
     }
    $a = $temp;
    unset($temp);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T23:05:51.340

啊！，我能够弄清楚：

```
master_list = buildList(list_id)

function buildList(list_id){
    list = getItems(list_id) //example 'A', 'B', parent_id, 'C'

    if(parent_id){

        array_splice( list, index_of_parent_id, 1, buildList(parent_id) )

    }

    return list
} 
```

我感谢大家的帮助。

# jquery - 视差网站 - 直到我滚动图片才会出现

> ID：13942987
> 
> 赞同：0
> 
> 时间：2012-12-18T23:07:29.100
> 
> 标签：jquery, css, image, parallax

在我的[网站上](http://mmd3e12dae42.keaweb.dk/test/index.html)，我在第一页上有一个徽标，但在我开始滚动之前它不可见？如何让它立即可见？

这是我的html

```
<div id="introwrapper">
    <div id="intro">
    <!--    <div id="introbaggrundforan"></div>-->
    <div id="introbaggrundbagved"></div>
    <a name="section1" class="section1">SECTION 1</a>
    </div> <!--#intro-->
<div id="logo"></div> 
```

这是我的CSS：

```
#introwrapper {
height: 900px;
position: relative;
overflow: hidden;   
background: transparent url('images/introbagved.png') no-repeat center;
}

#intro{
background: url('images/introforan.png') no-repeat center;
height: 900px;
width: 1440px;
margin: 0;
position: relative;
z-index: 3;
}

#logo{
background: transparent url('images/logo.png') no-repeat center;
width: 400px;
height: 400px;
position: absolute;
margin-left: 520px;
margin-top: 160px;
z-index: 2;
} 
```

这是我的jQuery：

```
$(document).ready(function(){
            $(window).bind('scroll',function(e){
                parallaxScroll();
            });

            function parallaxScroll(){
                var scrolledY = $(window).scrollTop();
                $('#logo').css('top','+'+((scrolledY*.819))+'px'); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T00:03:55.313

我想你想做的是制作一个粘性标志吗？

```
$doucment.ready 
```

加载后触发。你的滚动事件应该是

```
$(window).scroll(function () { 
  var scrolledY = $(window).scrollTop();
  $('#logo').css('top','+'+((scrolledY*.819))+'px');
}); 
```

对于 IE8 试试

```
$("html").scrollTop(); 
```

此外，您的 HTML 缺少 DIV 标记

```
<div id="introwrapper">
    <div id="intro">
        <!--    <div id="introbaggrundforan"></div>-->
        <div id="introbaggrundbagved"></div>
        <a name="section1" class="section1">SECTION 1</a>
    </div> <!--#intro-->
    <div id="logo"></div>
</div> <-- close this 
```

此外，最好为空白标签保留一些数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-19T00:11:57.000

添加

```
top:0; 
```

到`#logo`css 规则。

* * *

问题是你没有为那个元素定义一个位置，所以它是相对于前面的元素插入的……那是在`#intro`div 之后。

# ruby-on-rails - therubyracer gem 不断导致捆绑安装在 ubuntu 12.04 上失败

> ID：13942988
> 
> 赞同：2
> 
> 时间：2012-12-18T23:07:30.237
> 
> 标签：ruby-on-rails, rubygems

我正在尝试使用 capistrano 进行部署，但由于 ruby​​racer gem 问题而失败。

我尝试将以下变体添加到 gemfile，然后部署到 ubuntu 上的生产服务器，但没有任何效果：

```
1)
gem 'libv8', '3.11.8.3'

3)
gem 'therubyracer'
gem 'libv8', '3.3.10.4'

4)
gem 'libv8', '~> 3.11.8.3' 
```

这一切都给出了相同的错误：

安装 ruby​​racer (0.11.0) 时出错，Bundler 无法继续。在捆绑之前确保 gem install therubyracer -v '0.11.0' 成功。

所以我试试这个：

```
group :production do
  gem 'therubyracer', '0.10.2', :platforms => :ruby
end 
```

但这会导致此错误：

```
Bundler could not find compatible versions for gem "libv8":
 In Gemfile:
  therubyracer (= 0.10.2) ruby depends on
  libv8 (~> 3.3.10) ruby
 libv8 (3.11.8.3) 
```

看来我目前在服务器上有两个版本的 lib8：

```
libv8 (3.11.8.4, 3.3.10.4 x86_64-linux) 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-09-29T04:38:36.817

经过几个小时从 stackoverflow 尝试解决方案后，我从这个站点得到了一个简单的修复，只需要 2 个命令，作者提到

> 安装 therubyracer gem 时，您可能会在全新机器安装时遇到此问题。

[http://usefulprogrammingshit.drmcnasty.com/?p=12](http://usefulprogrammingshit.drmcnasty.com/?p=12)

```
sudo apt-get install g++
sudo apt-get install build-essential 
```

我对 ruby​​ 一无所知，因此您需要对此解决方案进行更多研究，但毕竟，“therubyracer 0.12.2”安装在 ubuntu 14.04 上。我希望它可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-09T13:13:26.537

只需从您的机器上卸载两个 libv8

`Terminal`

```
gem uninstall libv8 
```

在终端中，系统会提示您选择要卸载的版本，如下所示：

1.  libv8 3.3.10.4 x86_64-linux
2.  libv8 3.11.8.4 x86_64-linux
3.  全部

选择 3 并按回车键（回车键）。它将卸载您机器中安装的两个 libv8 版本。

现在，在您的 Gemfile 中只包含没有 libv8 的 ruby​​racer 和 bundle install

```
gem 'therubyracer'
bundle install 
```

它会工作

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-18T23:28:35.023

1.  尝试 node.js 作为你的运行时 javascript 环境，而不是 libv8。

2.  如果您坚持使用 libv8，请不要指定版本。似乎版本有冲突。例如在您的 Gemfile 中：

    ```
    gem 'therubyracer'
    gem 'libv8' 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-18T23:32:10.757

在生产服务器的命令行执行

```
gem install therubyracer 
```

# database - getElementById 从选择框到文本字段

> ID：13942992
> 
> 赞同：0
> 
> 时间：2012-12-18T23:07:42.270
> 
> 标签：database, getelementbyid, drop-down-menu

我用我的数据库中的值制作了一个选择框，我想将所选项目的 ID 写入文本框。

怎么做到呢？我有这个代码..

```
<form method="POST" action="" id="submitKon">
    <fieldset>
    <table class="opretTable" border="0">
    <tr>
    <td width="180" height="30"><label for="valgtkon" class="labelLeft">Vælg konkurrencetype</label></td> 
    <td><select id="valgtTitel" name="valgtTitel" onchange="run()">                  
    <?php
    $virksomhedsID = $_SESSION['virkID'];
    $sql = "SELECT * FROM konkurrenceType ORDER BY konkurrenceType.kontypeID";
    $result = mysql_query($sql) or die(mysql_error());                  

    echo '<option value="Vælg type">Vælg type</option>';

    while($rowSelect = mysql_fetch_assoc($result))
    { 

        echo '<option value="' . $rowSelect['kontypeID'] . '">' . $rowSelect['kontypeTitel'] . '</option>';
    }?>                    
    </select> 
```

和..

```
<script>
function run() {
    document.getElementById("valgtID").value = document.getElementById("valgtTitel").value;
}
</script> 
```

我明白了

```
INSERT INTO `mah1233411190550`.`konkurrence` ( `konID` , `virkID` , `konTitel` , `konBeskriv` , `konMaal` , `konMaaltype` , `konStart` , `konSlut`, `kontypeID`, `holdID` ) VALUES (NULL , '1', '1', 'cykle', '500', 'km', '2013-01-01', '2018-05-03', '1', '' ); 
```

所以 konTitel 和 kontypeID 是一样的，这是为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T00:06:00.313

所以是这样的？？

```
 <tr>
                <td width="180" height="30"><label for="valgtkon" class="labelLeft">Vælg konkurrencetype</label></td> 
                <td><select id="select" name="select" onchange="run()">                  
                <?php
                $virksomhedsID = $_SESSION['virkID'];
                $sql = "SELECT * FROM konkurrenceType ORDER BY konkurrenceType.kontypeID";
                $result = mysql_query($sql) or die(mysql_error());                  

                echo '<option value="Vælg type">Vælg type</option>';

                while($rowSelect = mysql_fetch_assoc($result))
                { 
                    $kontypeID = $rowSelect['kontypeID'];
                    $kontypeTitel = $rowSelect['kontypeTitel'];             
                    echo '<option value="' . $kontypeID . '">' . $kontypeTitel . '</option>';
                }?>                    
                </select></td>
                <script>
                function run() {
                    var select = document.getElementById("select");
                    document.getElementById("valgtID").value = valgtTitel.options[select.selectedIndex].innerHTML; //how to make this right?
                    document.getElementById("valgtTitel").value = valgtTitel.options[select.selectedIndex].innerHTML; //how to make this right?
                }
                </script>

                <td><input type="text" name="valgtID" id="valgtID"/><input type="text" name="valgtTitel" id="valgtTitel"/></td>
                </tr> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T23:19:16.987

您可以执行以下操作：

```
var valgtTitel = document.getElementById("valgtTitel");
document.getElementById("valgtID").value = valgtTitel.options[valgtTitel.selectedIndex].value; 
```

这是小提琴：http: [//jsfiddle.net/viralpatel/JYHLM/](http://jsfiddle.net/viralpatel/JYHLM/)

**编辑：** 也许您可能希望将标题（除了 ID）保存在其他文本框中并从请求中检索它：

```
var valgtTitel = document.getElementById("valgtTitel");
document.getElementById("valgtTitle").value = valgtTitel.options[valgtTitel.selectedIndex].innerHTML; 
```

请注意我们如何使用`innerHTML`而不是`value`获取标题。

# c# - 并行运行一个简单的 LINQ 查询

> ID：13942998
> 
> 赞同：22
> 
> 时间：2012-12-18T23:08:09.890
> 
> 标签：c#, linq, plinq

我对 LINQ 和 PLINQ 还是很陌生。我通常只使用循环，并且`List.BinarySearch`在很多情况下，但我试图尽可能摆脱这种心态。

```
public class Staff
{
  // ...
  public bool Matches(string searchString)
  {
    // ...
  }
} 
```

使用“普通”LINQ - 抱歉，我不熟悉术语 - 我可以执行以下操作：

```
var matchedStaff = from s
                     in allStaff
                  where s.Matches(searchString)
                 select s; 
```

但我想并行执行此操作：

```
var matchedStaff = allStaff.AsParallel().Select(s => s.Matches(searchString)); 
```

当我检查 的类型时`matchedStaff`，它是一个`bool`s 的列表，这不是我想要的。

首先，我在这里做错了什么，其次，我如何`List<Staff>`从这个查询中返回一个？

```
public List<Staff> Search(string searchString)
{
  return allStaff.AsParallel().Select(/* something */).AsEnumerable();
} 
```

回报`IEnumerable<type>`，不是`List<type>`。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-12-18T23:13:55.577

对于您的**第一个问题**，您应该替换`Select`为`Where`：

```
var matchedStaff = allStaff.AsParallel().Where(s => s.Matches(searchString)); 
```

**`Select`是一个投影运算符**，而不是过滤运算符，这就是为什么您要从输入序列到方法调用`IEnumerable<bool>`返回的布尔值的所有 Staff 对象的投影对应的原因。`Matches`

我知道您根本不使用它可能是反直觉的，因为您`select`似乎更熟悉“查询语法”，其中 select 关键字是强制性的，而使用“lambda 语法”（或“流利的语法”）并非如此。 ..无论命名如何），但就是这样；）

**投影运算符，例如`Select`**，将序列中的一个元素作为输入，并以某种方式将此元素转换/投影到另一种类型的元素（这里投影到`bool`类型）。而**过滤运算符，例如`Where`**，将序列中的一个元素作为输入，并根据谓词在输出序列中输出该元素，或者根本不输出该元素。

至于你的**第二个问题**，`AsEnumerable`返回一个`IEnumerable`，因为它的名字表明;）如果你想得到一个`List<Staff>`你应该打电话`ToList()`（因为它的名字表明;））：

```
return allStaff.AsParallel().Select(/* something */).ToList(); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-12-29T15:55:48.247

无需放弃正常的 LINQ 语法即可实现并行性。您可以重写原始查询：

```
var matchedStaff = from s in allStaff
    where s.Matches(searchString)
    select s; 
```

The parallel LINQ ([“PLINQ”</a>) version would be:](https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/introduction-to-plinq)

 [```
var matchedStaff = from s in allStaff.AsParallel()
    where s.Matches(searchString)
    select s; 
```

To understand where the `bool`s are coming from, when you write the following:

```
var matchedStaff = allStaff.AsParallel().Select(s => s.Matches(searchString)); 
```

That is equivalent to the following query syntax:

```
var matchedStaff = from s in allStaff.AsParallel() select s.Matches(searchString); 
```](https://docs.microsoft.com/en-us/dotnet/standard/parallel-programming/introduction-to-plinq) 

[As stated by darkey](https://stackoverflow.com/a/13943073/429091), if you want to use the C# syntax instead of the query syntax, you should use [`Where()`](https://docs.microsoft.com/en-us/dotnet/api/system.linq.parallelenumerable.where?view=netframework-4.8):

```
var matchedStaff = allStaff.AsParallel().Where(s => s.Matches(searchString)); 
```