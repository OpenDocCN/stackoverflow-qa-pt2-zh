# StackOverflow 问答 13844000-13844999

# objective-c - AFNetworking - 为什么它会产生一个网络请求线程？

> ID：13844000
> 
> 赞同：10
> 
> 时间：2012-12-12T16:18:05.970
> 
> 标签：objective-c, afnetworking, nsoperation, nsoperationqueue, nsthread

我试图更好地理解操作和线程，并查看了 AFNetworking 的`AFURLConnectionOperation`子类，例如真实世界的源代码。

我目前的理解是，当将 的实例`NSOperation`添加到操作队列时，队列等管理负责执行操作的线程。在 Apple 的文档中`NSOperation`指出，即使子类返回`YES`操作`-isConcurrent`也将始终在单独的线程上启动（从 10.6 开始）。

基于 Apple 在*Thread Programming Guide*和*Concurrency Programming Guide*中的强大语言，似乎管理线程最好留给`NSOperationQueue`.

然而，AFNetworking 的`AFURLConnectionOperation`子类产生了一个新`NSThread`的 ，并且操作`-main`方法的执行被推到这个网络请求线程上。为什么？为什么这个网络请求线程是必要的？这是一种防御性编程技术，因为该库旨在供广大受众使用吗？图书馆的消费者调试的麻烦是否更少？在专用线程上进行所有网络活动是否有（微妙的）性能优势？

*（1 月 26 日添加）*
在 Dave Dribin 的[博客文章](http://www.dribin.org/dave/blog/archives/2009/05/05/concurrent_operations/)中，他说明了如何使用 NSURLConnection 的特定示例将操作移回主线程。

我的好奇心来自 Apple's *Thread Programming Guide*中的以下部分：

> **保持线程合理繁忙。**
> 如果您决定手动创建和管理线程，请记住线程会消耗宝贵的系统资源。你应该尽你最大的努力确保你分配给线程的任何任务都是合理的长寿命和高效的。同时，您不应该害怕终止大部分时间处于空闲状态的线程。线程使用大量内存，其中一些是有线的，因此释放空闲线程不仅有助于减少应用程序的内存占用，还可以释放更多物理内存供其他系统进程使用。

在我看来，AFNetworking 的网络请求线程并没有“保持相当忙碌”；它正在运行一个无限循环来处理网络 I/O。但是，看，这就是这个问题的重点——我不知道，我只是猜测。

任何关于操作、线程（运行循环？）和/或 GCD 的特定见解或解构`AFURLConnectionOperation`都将非常有助于填补我的理解空白。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-07T17:26:29.260

这是一个有趣的问题，答案是关于如何交互和协同工作的`NSOperation`语义`NSURLConnection`。

An`NSURLConnection`本身就是一个异步任务。这一切都发生在后台，并定期调用其委托与结果。当你启动`NSURLConnection`它时，它使用调度它的 runloop 来调度委托回调，因此 runloop 必须始终在你正在执行的线程上运行`NSURLConnection`。

因此`-start`，我们的方法`AFURLConnectionOperation`总是必须在操作完成之前返回，以便它可以接收回调。这要求这`AFURLConnectionOperation`是一个异步操作。

来自：[https ://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOperation_class/index.html](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSOperation_class/index.html)

> 对于相对于当前线程异步运行的操作，property 的值为 YES，对于在当前线程上同步运行的操作，property 的值为 NO。此属性的默认值为 NO。

但`AFURLConnectionOperation`会覆盖此方法并按`YES`我们的预期返回。然后我们从类描述中看到：

> 当您调用异步操作的 start 方法时，该方法可能会在相应任务完成之前返回。异步操作对象负责在单独的线程上调度其任务。该操作可以通过直接启动新线程、调用异步方法或将块提交到调度队列执行来实现。当控制权返回给调用者时操作是否正在进行实际上并不重要，只是它可能正在进行。

AFNetworking 使用一个类方法创建一个单一的网络线程，它调度所有`NSURLConnection`对象（及其产生的委托回调）。这是来自的代码[`AFURLConnectionOperation`](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFURLConnectionOperation.m)

```
+ (void)networkRequestThreadEntryPoint:(id)__unused object {
    @autoreleasepool {
        [[NSThread currentThread] setName:@"AFNetworking"];

        NSRunLoop *runLoop = [NSRunLoop currentRunLoop];
        [runLoop addPort:[NSMachPort port] forMode:NSDefaultRunLoopMode];
        [runLoop run];
    }
}

+ (NSThread *)networkRequestThread {
    static NSThread *_networkRequestThread = nil;
    static dispatch_once_t oncePredicate;
    dispatch_once(&oncePredicate, ^{
        _networkRequestThread = [[NSThread alloc] initWithTarget:self selector:@selector(networkRequestThreadEntryPoint:) object:nil];
        [_networkRequestThread start];
    });

    return _networkRequestThread;
} 
```

这是`AFURLConnectionOperation`显示他们`NSURLConnection`在所有运行循环模式下调度 AFNetwokring 线程的运行循环的代码

```
- (void)start {
    [self.lock lock];
    if ([self isCancelled]) {
        [self performSelector:@selector(cancelConnection) onThread:[[self class] networkRequestThread] withObject:nil waitUntilDone:NO modes:[self.runLoopModes allObjects]];
    } else if ([self isReady]) {
        self.state = AFOperationExecutingState;

        [self performSelector:@selector(operationDidStart) onThread:[[self class] networkRequestThread] withObject:nil waitUntilDone:NO modes:[self.runLoopModes allObjects]];
    }
    [self.lock unlock];
}

- (void)operationDidStart {
    [self.lock lock];
    if (![self isCancelled]) {
        self.connection = [[NSURLConnection alloc] initWithRequest:self.request delegate:self startImmediately:NO];

        NSRunLoop *runLoop = [NSRunLoop currentRunLoop];
        for (NSString *runLoopMode in self.runLoopModes) {
            [self.connection scheduleInRunLoop:runLoop forMode:runLoopMode];
            [self.outputStream scheduleInRunLoop:runLoop forMode:runLoopMode];
        }

        //...
    }
    [self.lock unlock];
} 
```

这里`[NSRunloop currentRunloop]`检索 AFNetworking 线程上的运行循环，而不是从`mainRunloop`该`-operationDidStart`线程调用方法。作为奖励，我们也可以`outputStream`在后台线程的 runloop 上运行。

现在`AFURLConnectionOperation`等待回调并随着网络请求的进行`NSURLConnection`更新自己的`NSOperation`状态变量（`cancelled`, `finished`, ）。`executing`AFNetworking 线程反复旋转它的运行循环，以便`NSURLConnections`从潜在的许多`AFURLConnectionOperations`调度它们的回调中调用它们并且`AFURLConnectionOperation`对象可以对它们做出反应。

> 如果您总是计划使用队列来执行您的操作，将它们定义为同步会更简单。但是，如果您手动执行操作，您可能希望将操作对象定义为异步的。定义异步操作需要做更多的工作，因为您必须监控任务的持续状态并使用 KVO 通知报告该状态的变化。但是，在您希望确保手动执行的操作不会阻塞调用线程的情况下，定义异步操作很有用。

另请注意，您也可以通过调用并观察它直到返回来使用`NSOperation`不带 a的 a 。如果被实现为同步操作并阻塞了等待完成的当前线程，它将永远不会真正完成，因为它将在当前运行循环上安排它的回调，因为我们会阻塞它而不会运行。因此，为了支持这种有效的使用场景，我们必须使异步。`NSOperationQueue``-start``-isFinished``YES``AFURLConnectionOperation``NSURLConnection``NSURLConnection``NSOperation``AFURLConnectionOperation`

## 问题的答案

*   是的，AFNetworking 创建了一个线程，用于调度所有连接。线程创建是昂贵的。（这就是创建 GCD 的部分原因。GCD 为您保留一个运行的线程池，并根据需要在不同的线程上分派块，而无需自己创建、销毁和管理线程）

*   该处理不在后台 AFNetworking 线程上完成。AFNetworking 使用 的`completionBlock`属性进行`NSOperation`处理，当`finished`设置为时执行`YES`。

> 无法保证完成块的确切执行上下文，但通常是辅助线程。因此，您不应使用此块来执行任何需要非常特定的执行上下文的工作。相反，您应该将该工作分流到应用程序的主线程或能够执行此操作的特定线程。例如，如果您有一个自定义线程来协调操作的完成，您可以使用完成块来 ping 该线程。

HTTP 连接的后处理在`AFHTTPRequestOperation`. 此类创建一个调度队列，专门用于在后台转换响应对象，并将工作分流到该队列上。看[这里](https://github.com/AFNetworking/AFNetworking/blob/master/AFNetworking/AFHTTPRequestOperation.m)

```
- (void)setCompletionBlockWithSuccess:(void (^)(AFHTTPRequestOperation *operation, id responseObject))success
                              failure:(void (^)(AFHTTPRequestOperation *operation, NSError *error))failure
{
    self.completionBlock = ^{
        //...
        dispatch_async(http_request_operation_processing_queue(), ^{
            //... 
```

我想这引出了一个问题，他们是否可以写信`AFURLConnectionOperation`不做一个线程。我认为答案是肯定的，因为有这个 API

```
- (void)setDelegateQueue:(NSOperationQueue*) queue NS_AVAILABLE(10_7, 5_0); 
```

这意味着将您的委托回调安排在特定的操作队列上，而不是使用运行循环。但是当我们看到 AFNetworking 的遗留部分时，该 API 仅在 iOS 5 和 OS X 10.7 中可用。查看 Github 上的责备视图，[`AFURLRequestOperation`](https://github.com/AFNetworking/AFNetworking/blame/master/AFNetworking/AFURLConnectionOperation.m)我们可以看到，mattt 实际上`+networkRequestThread`在 2011 年 iPhone 4s 和 iOS 5 发布的那一天巧合地编写了该方法！因此，我们可以推断线程存在，因为在编写线程时，我们可以看到创建线程并在其上调度连接是`NSURLConnection`在异步子类中运行时从后台接收回调的唯一方法`NSOperation`。

*   线程是使用该`dispatch_once`函数创建的。（请参阅我按照您的建议添加的额外代码）此功能确保包含在它运行的块中的代码将在应用程序的生命周期中仅运行一次。AFNetworking 线程在需要时创建，然后在应用程序的生命周期内持续存在

*   当我写的时候`NSURLConnectionOperation`，我的意思是`AFURLConnectionOperation`。我更正了，谢谢你提到它:)

# linux - 使用 cdt eclipse 和 cygwin 在 windows 7 上创建 .so 共享对象

> ID：13844007
> 
> 赞同：1
> 
> 时间：2012-12-12T16:18:19.697
> 
> 标签：linux, cygwin, shared-libraries, eclipse-cdt

我在我的 Windows 7 计算机上安装了 Eclipse CDT（juno）我安装了 cygwin（能够手动创建一个 makefile 并创建一个 .so）

我想在eclipse中使用cygwin编译器来创建一个.so

我在 Eclipse 中创建了一个新的共享库项目，告诉它使用 cygwin c++ 编译器

执行 ctrl-b 并创建一个 .dll

我如何让它制作一个.so？

这是使用 Windows 7

```
11:13:05 **** Build of configuration Debug for project cygwinc++ ****
make all 
Building file: ../main.cpp
Invoking: Cygwin C++ Compiler
g++ -O0 -g3 -Wall -c -fmessage-length=0 -MMD -MP -MF"main.d" -MT"main.d" -o "main.o" "../main.cpp"
cygwin warning:
  MS-DOS style path detected: C:\Users\EAIGREG\workspace\cygwinc++\Debug
  Preferred POSIX equivalent is: /cygdrive/c/Users/EAIGREG/workspace/cygwinc++/Debug
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
Finished building: ../main.cpp

Building target: cygwinc++.dll
Invoking: Cygwin C++ Linker
g++ -shared -o "cygwinc++.dll"  ./main.o   
cygwin warning:
  MS-DOS style path detected: C:\Users\EAIGREG\workspace\cygwinc++\Debug
  Preferred POSIX equivalent is: /cygdrive/c/Users/EAIGREG/workspace/cygwinc++/Debug
  CYGWIN environment variable option "nodosfilewarning" turns off this warning.
  Consult the user's guide for more details about POSIX paths:
    http://cygwin.com/cygwin-ug-net/using.html#using-pathnames
Finished building target: cygwinc++.dll

11:13:06 Build Finished (took 390ms) 
```

显然这是使用了错误的编译器...我知道我的 cygwin 可以创建 SO 那么我如何告诉它使用“linux”c++ 编译器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T18:08:39.673

也许有一种方法可以完成我正在寻找的事情，但我最终做的是让另一台运行 linux 的计算机......

如果我愿意，我可以手动创建我的 makefile 并手动链接和编译（可能是一些花哨的批处理文件），但最终在 linux 中拥有一个完整的工作 eclipse 环境会更容易

# java - Android 从指定范围中选择 2 个随机整数

> ID：13844008
> 
> 赞同：0
> 
> 时间：2012-12-12T16:18:21.957
> 
> 标签：java, android

在我的 Android 应用程序中，我需要从指定范围内选择两个随机整数。下面的代码有效，但它并不是真正选择一个随机整数，而是对整数进行洗牌。`randomNum2= (int)it.next();`让我烦恼的是，由于代码中的位，我必须将最大 int 指定为实际上比最大值小一。如果我将正确的数字（当前为 127）作为最大值，那么我会收到错误`java.util.NoSuchElementException`，因为它正在寻找 128 作为下一次迭代。在我使用之前`rand = new Random(); randomNum1 = rand.nextInt(max - min + 1) + min; randomNum2 = rand.nextInt(max - min + 1) + min;`但问题是两个随机整数最终可能相同，我需要它们是唯一的。那么任何人都可以提出一种更好的方法来从最小/最大整数范围中获取两个随机数吗？这是我的代码：

```
 int min = 1;
int max = 126;
int randomNum1;
int randomNum2;
List<Integer> choicesL;

public void randomTwo() {
    choicesL = new LinkedList<Integer>();
    for (int i = min; i <= max; i++) {
        choicesL.add(i);
    }
    Collections.shuffle(choicesL);
    Iterator<Integer> it = choicesL.iterator();
    while (it.hasNext())
    {
        randomNum1= (int)it.next();
        randomNum2= (int)it.next();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:24:17.063

您可以使用旧代码，但使用循环 while。

```
rand = new Random(); 
randomNum1 = rand.nextInt(max - min + 1) + min;
randomNum2 = rand.nextInt(max - min + 1) + min;

while (randomNum2==randomNum1){
    randomNum2 = rand.nextInt(max - min + 1) + min;
} 
```

**编辑**

有很多方法可以寻找随机数。我不知道你是否知道这一点，但在此之下有很多统计研究。如果您需要一种快速计算随机数的方法，这很棒。但是您必须知道，经过大量时间后，用户可以知道您的随机数的分布情况。如果你想改进你的代码，也许你可以检查：

[http://en.wikipedia.org/wiki/Box%E2%80%93Muller_transform](http://en.wikipedia.org/wiki/Box%E2%80%93Muller_transform)

[http://en.wikipedia.org/wiki/Ziggurat_algorithm](http://en.wikipedia.org/wiki/Ziggurat_algorithm)

当然，我认为网上还有更多的理论

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:21:03.877

您可以使用 a`Set`并继续插入元素，直到集合的大小为 2。
对于少量元素（与范围的大小相比），这应该比填充 + 洗牌更有效。

```
int max = 126;
int min = 1;
int size = 2;
Set<Integer> set = new HashSet<Integer>();
Random r = new Random();
while (set.size() != size) {
    set.add(r.nextInt(max - min + 1) + min);
}
System.out.println(set); 
```

注意：这是一个通用答案，适用于所有需要的尺寸（当然假设`size <= max - min`）

# javascript - 在 jQuery 中使用相同的函数多次调整 div 的大小

> ID：13844009
> 
> 赞同：0
> 
> 时间：2012-12-12T16:18:31.863
> 
> 标签：javascript, jquery, html, css

我有一个点击功能，可以为一系列 div 的宽度设置动画并添加隐藏的。那个小提琴在[这里](http://jsfiddle.net/DdBqW/3/)。

我想要的是让该函数做它正在做的事情，但也再次调整现有 div 的大小，以便更适合所有 div 10px 宽，让我能够在包装器中拥有尽可能多的东西。

所以我会单击“加号”触发器添加 5 个额外的 div 并将它们调整为 30px，然后我再次单击以添加 5 个更多并将它们调整为 15px ..依此类推到 10px。

jQuery在这里：

```
$(".plus").click(function(){
  $(".box").animate({ width: 20 }, 500 );
  $(".box2").fadeIn(500);
});

$(".minus").click(function(){
  $(".box").animate({ width: 60 }, 500 );
  $(".box2").fadeOut(500);
}); 
```

# javascript - 添加选项以在指定索引处选择（使用标签）

> ID：13844010
> 
> 赞同：0
> 
> 时间：2012-12-12T16:18:38.400
> 
> 标签：javascript, jquery, jquery-selectors

我有一个看起来像这样的选择列表：

```
<select id="testSelect">
    <option value="option1" label="1">Option 1</option>
    <option value="option3" label="3">Option 3</option>
    <option value="option5" label="5">Option 5</option>
</select>​ 
```

我使用标签来控制选项的显示顺序。初始选择列表的顺序正确（尽管缺少项目）。

我想以编程方式向此选择列表添加一个新选项。我发现[这个问题](https://stackoverflow.com/q/740195/1324019)为我提供了一个优秀的[jquery select 备忘单](http://comp345.awardspace.com/select_element_cheatsheet.pdf)的链接。

此备忘单提供以下代码以在特定索引处添加选项，这与我想要做的类似：

```
$("#elementid option:eq(0)").after("<option value='4'>Some pears</option>" 
```

但是，我不需要在特定索引之后插入新选项（因为这些项目将被删除并重新添加多次），我需要根据标签值以正确的顺序插入选项。

我尝试了两件事：

```
$(function () {
   $("#testSelect option:eq(1)").after("<option value='option2' label='2'>Option 2</option>"); //Method A
    $("#testSelect option:label(1)").after("<option value='option2' label='2'>Option 2</option>"); //Method B
});​ 
```

方法 A 在列表中的第二个项目之后插入新项目，这使我的列表看起来像：`1 3 2 5`

方法 B 抛出异常：`Uncaught Error: Syntax error, unrecognized expression: unsupported pseudo: label`

但是，即使方法 B 有效，我仍然会遇到问题，因为带有标签的选项`1`可能实际上并不存在。我真正想做的是将新选项插入列表中的正确位置（基于标签），而不管它周围是否存在特定的选项元素。

任何想法如何做到这一点？[jsfiddle](http://jsfiddle.net/Mansfield/mGgKK/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:21:52.370

您需要使用`[]`for 属性选择器。您可以在此处阅读有关可用选择器的信息[http://api.jquery.com/category/selectors/](http://api.jquery.com/category/selectors/)

```
$("#testSelect option[label=yourvalue]").after("<option value='option2' label='2'>Option 2</option>"); //Method B 
```

所以

```
$("#testSelect option[label=1]") // will grab <option value="option1" label="1">Option 1</option> 
```

并且新选项将插入该元素之后

您可以相应地对元素进行排序

```
$(function() {    
    $('#testSelect option')
          .add($("<option value='option7' label='7'>Option 7</option>"))
          .sort(function(a, b) {
                return a.label < b.label ? -1 : a.label > b.label ? 1 : -1;
          }).appendTo('#testSelect');
});​ 
```

[http://jsfiddle.net/5ksh7/](http://jsfiddle.net/5ksh7/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:30:17.520

这个怎么样？

**[jsFiddle 示例](http://jsfiddle.net/j08691/mGgKK/3/)**

您可以在任何地方插入新选项，然后根据标签值对选项进行排序。

```
$("#testSelect").append("<option value='option2' label='2'>Option 2</option>");

$("#testSelect option").sort(function(a, b) {
    if ($(a).attr('label') < $(b).attr('label')) return -1;
    if ($(a).attr('label') > $(b).attr('label')) return 1;
    return 0;
}).appendTo('#testSelect');​ 
```

# jquery - jquery加载xml并为负值和正值设置颜色

> ID：13844013
> 
> 赞同：1
> 
> 时间：2012-12-12T16:18:52.753
> 
> 标签：jquery, xml

问题：

1.  我有一个 withsomexml.php，其中包含服务器 A 上的 xml

    SomeName 111.196 等

2.  我需要使用刷新功能在服务器 B 上的另一个站点上显示这些值我现在拥有什么：

**--> 索引.html：**

```
<html>
<head>
<script type="text/javascript" src="js/jquery-1.8.2.min.js"></script>
<script type="text/javascript">
$(function(){
    setInterval(function() {
        $.get('getXML.php', function(data) {
        $(data).find('index').each(function(){
        $("#test").html('<div class="myclass1">ID:' +   $(this).find("id").text() + 
                            '</div><div class="myclass2">NAME:' + $(this).find("name").text() + 
                            '</div><div class="myclass3">KURS:' + $(this).find("kurs").text() + 
                            '</div>');
           });

        });
    }, 2000);
});
</script>
</head>
<body>
<div id="test"><div class="loader"><img src="loader.gif" id="load" width="50" height="50" align="absmiddle"/></div></div>
</body>
</html> 
```

**--> 获取XML.php**

```
<?php
$xml = simplexml_load_file('http://www.xxxxxx.com/withsomexml.php');
echo $xml->asXML();
?> 
```

到目前为止，它运作良好。但现在我不知道如何设置/更改或调整文本颜色。如果 kurs 值为负/红色正/绿色（kurs 和另外 2 个数值），则此解决方案`$("#div:contains('-')").addClass('red');`不起作用。

我感谢任何帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-24T03:31:39.520

也许你应该试试

$("div div:contains('-')").addClass('red');

这是下面的代码

[JSBin](http://jsbin.com/devog/2/edit)

# templates - 如何在淘汰赛中使用模板的内部节点？

> ID：13844014
> 
> 赞同：0
> 
> 时间：2012-12-12T16:18:53.703
> 
> 标签：templates, knockout.js

我想知道是否可以按照进一步描述的方式使用淘汰赛模板。

假设案例是制作一个抽象画廊。
让模板按以下方式定义：

```
<div data-bind="template: {name: 'galleryTemplate', data: data}">
  <img data-bind="attr:{src:thmbn}" />
</div> 
```

现在，在这种情况下，画廊模板可能会以以下方式定义：

```
<div id="galleryTemplate">
  <div data-bind="foreach: {data: items}">
     /* inner node of template from above */
  </div>
</div> 
```

看起来不错，但我不知道如何在淘汰赛中实现它。
任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:20:09.930

编写一个自定义绑定来尝试做你想做的事情是可能的，但不是微不足道的。

但是，我认为更简单的方法是将模板的名称传递给“galleryTemplate”，然后使用它来呈现子级。

就像是：

```
<div data-bind="template: {name: 'galleryTemplate', data: { templateName: 'itemTmplOne', data: data } }"></div>

<div data-bind="template: {name: 'galleryTemplate', data: { templateName: 'itemTmplTwo', data: data } }"></div>

<script id="galleryTemplate" type="text/html">
  <div data-bind="template: { name: templateName, foreach: data }"></div>
</script>​

<script id="itemTmplOne" type="text/html">
    <div>one</div>
</script>

<script id="itemTmplTwo" type="text/html">
    <div>two</div>
</script> 
```

示例：http: [//jsfiddle.net/rniemeyer/jdJPc/](http://jsfiddle.net/rniemeyer/jdJPc/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:32:55.543

首先，您应该定义一个`template`具有唯一 ID 的。你可以这样做，`div`但我更喜欢为此使用`script`标签：

```
<script id="galleryTemplate" type="text/html">
    <div data-bind="foreach: items">
        <img  data-bind="attr:{src:thmbn}" style="width:200px" />
    </div>
</script> 
```

然后你在你想要的地方：

```
<div data-bind="template: {name: 'galleryTemplate', data: data}">
</div> 
```

这是工作小提琴：http: [//jsfiddle.net/pm7Y9/1/](http://jsfiddle.net/pm7Y9/1/)

# algorithm - 二叉树的数组实现

> ID：13844016
> 
> 赞同：1
> 
> 时间：2012-12-12T16:19:10.250
> 
> 标签：algorithm, tree

我正在尝试将基于列表的树实现转换为基于数组的实现，父在第 i 个索引处，左子在第 2 个索引处，右子在第 2i+1 个索引处。由于某种原因，转换会导致节点数较多的树的数据丢失。我想知道在实现这一点时我需要检查的所有边界条件。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:46:13.377

假设您的语言使用从零开始的索引，则 node 的子级`i`进入`2i + 1`and `2i + 2`not `2i`and `2i + 1`。后者适用于基于 1 的索引。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:46:49.073

你把头放在0还是1？选择“0”肯定会出问题，除非你调整你的公式。

# jquery-plugins - jquery.forms + colorbox + dataTable

> ID：13844017
> 
> 赞同：0
> 
> 时间：2012-12-12T16:19:11.753
> 
> 标签：jquery-plugins, datatable, colorbox

美好的一天感谢您的任何回答。

我不是这里的专家，我问了很多谷歌，但在这里我真的不知道该怎么办......

我在一个表上同时使用 colorbox、jquery.forms 和 jquery.dataTable 插件。

这里我有两种形式，一种用于创建用户，一种用于编辑。例如创建用户链接不在桌面上，脚本工作得很好。问题在于编辑用户，表格中的链接，此内容来自ajax，colorbox部分工作，实现它然后出现在colorbox窗口中，但是“onComplete”功能中的任何脚本都不再起作用。我不知道从这里做什么，我没有为这个集成做很多备份，一些文章或问号只使用 {frame:true} 用于颜色框和数据表。

这是函数的代码：

这是非工作区

```
function cargarColorbox(){
    $('.edit').colorbox({
        OnComplete:function(){ //this is not workin
            var formulario = $('#usuarios_edit');
            var options = {success: mostrarRespuesta2};
            $("#update_info").text('llegan js');
            formulario.ajaxForm(options);
            //Implementamos los listeners del formulario            
            function mostrarRespuesta2(responseText){
                $("#update_info").removeClass();
                $("#update_info").html(responseText);
            }
        }
    });
}

function initTable ()
    {
        return $('#DataTable').dataTable( {
        "sScrollY": "200px",
        "bPaginate": true,
        "bRetrieve": true,
        "bProcessing": false,
        "sAjaxSource": 'usuarios/listado',
        "fnInitComplete": function(){
             cargarColorbox();
        },
  } );
}

function RefreshTable(tableId, urlData)
    {

      $.getJSON(urlData, null, function( json )
      {
        table = $(tableId).dataTable();
        oSettings = table.fnSettings();

        table.fnClearTable(this);

        for (var i=0; i<json.aaData.length; i++)
        {
          table.oApi._fnAddData(oSettings, json.aaData[i]);
        }

        oSettings.aiDisplay = oSettings.aiDisplayMaster.slice();
        table.fnDraw();
      });
    } 
```

这是工作区

```
$(document).ready( function() {
    initTable();
    $('#add').live('click', function(e){
        e.preventDefault();
    });

});

jQuery(document).ready(function(){

        $('#add').colorbox({onComplete:function(){
            //recogemos las variables que necesitaremos
            var formulario = $('#usuarios_add'); 
            var pass1 = $('#usuarios_pass');
            var pass2 = $('#usuarios_pass2');
            var email = $('#usuarios_email');
            var confirmacion = "coinciden";
            var longitud = "La contraseña debe estar formada entre 6-15 carácteres (ambos inclusive)";
            var negacion = "No coinciden las contraseñas";
            var vacio = "La contraseña no puede estar vacía";
            var options = {success: mostrarRespuesta};

            formulario.ajaxForm(options);

            pass2.keyup(function(){
                coincidePassword();
            });

            email.focusout(function(){
                validar_email();
            });

                function mostrarRespuesta(responseText){
                    $("#update_info").removeClass();
                    $("#update_info").html(responseText);
                }

                function coincidePassword(){
                    var val1 = pass1.val();
                    var val2 = pass2.val();

                    if(val1 != val2){
                        $('#update_info').text(negacion).addClass('bad');
                    }

                    if(val1.length==0 || val2==""){
                        $('#update_info').text(vacio).addClass('bad');
                    }

                    if(val1.length<6 || val2.length>15){
                        $('#update_info').text(longitud).addClass('bad');
                    }

                    if(val1.length!=0 && val1==val2){
                        $('#update_info').text(confirmacion).removeClass('bad').addClass('good');
                    }
                }

                function validar_email()
                {
                    valor = email.val();

                    var filter = /[\w-\.]{3,}@([\w-]{2,}\.)*([\w-]{2,}\.)[\w-]{2,4}/;

                    if(filter.test(valor)){
                        $('#update_info').text('El formato del E-mail es correcto').removeClass('bad').addClass('good');
                    }
                    else{
                        $('#update_info').text('Ese no es un formato de E-mail').addClass('bad');

                    }
                }

        }, onClosed:function(){
            RefreshTable(table, 'usuarios/listado');
            initTable();
        }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:16:53.930

`OnComplete`不同于`onComplete`.
您应该将此修复为`onComplete`.

# objective-c - Xcode 意外@错误

> ID：13844019
> 
> 赞同：-3
> 
> 时间：2012-12-12T16:19:16.403
> 
> 标签：objective-c

我已经尽一切努力尝试修复它，我在其他类似问题中阅读过，但没有任何效果。

```
#import "ViewController.h"
//sound
@implementation SoundappViewController
-(IBAction)play; {
CFBundleRef mainBundle = CFBundleGetMainBundle();
CFURLRef soundFileURLRef;
soundFileURLRef = CFBundleCopyResourceURL(mainBundle, (CFStringRef) @"app 3", CFSTR ("m4a"), NULL);
   UInt32 (soundID);
   AudioServicesCreateSystemSoundID(soundFileURLRef, &soundID);
   AudioServicesPlaySystemSound(soundID);
    @end              // Here i get the error Unexpected @ in program 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:24:26.250

*   消除 ';' 在方法标题行
*   你在你的方法结束时错过了'}'（就在@end之前）

# c# - 从 Excel 中仅选择一列值

> ID：13844022
> 
> 赞同：0
> 
> 时间：2012-12-12T16:19:36.433
> 
> 标签：c#, excel, com-interop

所以我使用 C# 来读取 Excel (.xlsm) 文件，一切都很好......直到我想做的只是读取一列。这就是我想做的，这里有一些示例代码：

```
Worksheet sheet = (Worksheet)workBookIn.Sheets[sheetName];
Range r =
    sheet.get_range("B2", sheet.Cells.SpecialCells(XlCellType.xlCellTypeLastCell));
Array vals = pitch.Cells.Value; 
```

另外，如果有人可以对代码的后半部分提出更优雅的方法（即处理 Excel 值的范围），请随时发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:41:41.520

```
Worksheet sheet = (Worksheet)workBookIn.Sheets[sheetName];
Range r =
    sheet.get_range("B2", "B" + sheet.Cells.SpecialCells(XlCellType.xlCellTypeLastCell).Row);
Array vals = pitch.Cells.Value; 
```

# java - Android - 将 JPG 转换为具有背景透明度的 PNG

> ID：13844031
> 
> 赞同：0
> 
> 时间：2012-12-12T16:19:53.300
> 
> 标签：java, android, image, png

我需要获取一个 JPG 文件并将其转换为 PNG 格式，以增加透明度，就像我正在擦除其中某些部分的图像一样，但每次我尝试操作时，我都无法弄清楚如何做到这一点图像，我在其中添加透明度我只看到黑色而不是我放置的背景图像，所以我认为只是转换它不会添加透明背景。我正在这样做：

```
String cacheDir = context.getCacheDir().getAbsolutePath();
//create output stream
OutputStream outputStream = null;
//create file
File file = new File(cacheDir, "img.png");
outputStream = new FileOutputStream(file);
bitmap2.compress(CompressFormat.PNG, 90, outputStream);
outputStream.flush();
outputStream.close(); 
```

然后在我触摸的地方我这样做是为了“擦除图像”：

```
pTouch = new Paint(Paint.ANTI_ALIAS_FLAG);         
pTouch.setXfermode(new PorterDuffXfermode(Mode.SRC_OUT)); 
pTouch.setColor(Color.TRANSPARENT);
c2.drawCircle(X, Y, 35, pTouch); 
```

提前致谢

# android - Android ActionBar：在操作栏上显示文本

> ID：13844032
> 
> 赞同：0
> 
> 时间：2012-12-12T16:19:53.457
> 
> 标签：android, android-actionbar

在我的应用程序中，我创建了一个登录会话。我有一个带有两个图标的 ActionBar，“home”和“login”。成功登录后，我想用字符串替换“登录”（例如，Welcome Dude！）。我是这样唤醒的：如果没有用户登录，则会显示一个操作栏，其中包含 HOME 和 ICON 项目。当用户登录时，会显示另一个操作栏。在这第二个操作栏中，我希望有 HOME 项目和欢迎信息。

那可能吗？

我还想在登录成功时创建一个项目并设置其文本，但我不能这样做。

谁能帮我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:41:11.200

您可以覆盖`onPrepareOptionsMenu()`. 它适用于 ActionBarSherlock 库：

```
@Override
public boolean onPrepareOptionsMenu(Menu menu) 
{
    if(userIsLogged){
        getSupportMenuInflater().inflate(R.menu.menu_with_hello_string, menu);
    }
    else {
        getSupportMenuInflater().inflate(R.menu.menu_with_login_button, menu);
    }
    return super.onPrepareOptionsMenu(menu);
} 
```

您只需要`invalidateOptionsMenu();`在用户登录时调用。

希望有帮助。

# android - 检测 URL 是否*成功*加载以及何时加载

> ID：13844033
> 
> 赞同：3
> 
> 时间：2012-12-12T16:20:00.413
> 
> 标签：android

我已经看到了检测 URL 何时完成加载的答案，我需要知道这一点。*但*我还需要知道加载是否成功。

我需要知道这一点，因为我正在加载一个 HTML 插页式广告，如果它没有加载，那么我不想显示它。我可以自己制作`WebClient`并检测`onPageFinished`，但我注意到如果我关闭互联网，我仍然会看到`onPageFinished`被调用。那么，如果两者都完成并成功，我如何检测该 URL？

**编辑：**查看 ObAt 的建议，并将其与[这个 SO question](https://stackoverflow.com/questions/2376471/how-do-i-get-the-web-page-contents-from-a-webview)的最流行答案结合起来，我仍然有点卡住。似乎当我关闭互联网后，WebView 的内容`onPageFinished`似乎是（我的 section_id 编号更改为 9999）：

```
<head><head><script type="text/javascript" src="http://ad.leadboltads.net/show_app_ad.js?section_id=9999"></script></head><body></body></head> 
```

这没有显示任何明显的错误。

**编辑：**刚刚注意到我在做 a`LoadData`而不是 a `LoadUrl`，我不知道这是否有什么不同。

**编辑：**如果我的互联网已打开并且广告加载成功，那么 webview 的示例内容是这样的：

```
<iframe name="ap_iframe" width="300" height="250" frameborder="0" src="http://ad.leadboltads.net/show_app_ad?section_id=9999&amp;lang=en-GB&amp;scr_w=480&amp;scr_h=800&amp;
url=data%3Atext%2Fhtml%2C%3Cscript%20type%3D%22text%2Fjavascript%22%20src%3D%22http%3A%2F%2Fad.leadboltads.net%2Fshow_app_ad.js%3Fsection_id%__HIDDEN__script%253E&amp;
referer=" marginwidth="0" marginheight="0" vspace="0" hspace="0" allowtransparency="true" scrolling="no"></iframe></body></head> 
```

所以，我现在可以看到这两种状态之间的差异......也许我可以在成功加载的页面中搜索“iframe”或“width”或任何我可能期望但不在失败页面中的东西...... .但感觉是一个非常不一般且不能令人满意的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:27:35.340

您可以检查您下载的数据是否不包含任何错误的[HTTP 状态错误](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)（HTTP 200 错误表示一切正常）。您还可以检查下载的数据是否不为*null*。

**编辑：** 成功的响应比不成功的请求长得多，因此您可以检查响应的长度。

```
if(serverRespons.length > 50){
  // do something
} 
```

或者您可以搜索您的回复，如果它包含仅在您的请求成功时获得的属性

```
String myCheck = "width="
if(serverRespons.toLowerCase().contains(myCheck.toLowerCase()){
  //do something
} 
```

我自己没有测试代码，但希望它对你有用！

注意：我更喜欢第二种方式，或者组合:)

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-12-12T16:55:20.513

也许通过设置 webchromeclient 并覆盖 onprogresschanged 方法。

在那里您可以检查进度何时为 100 以检查它是否已完成加载。

# c# - 在字符串中找到索引之前删除一定数量的字符

> ID：13844035
> 
> 赞同：0
> 
> 时间：2012-12-12T16:20:13.970
> 
> 标签：c#, string, replace, substring, indexof

我有一个字符串，我需要从中删除某些字符。

> string note = "TextEntry_Slide_7|记事本一我要到处输入文字:)|250887|0^TextEntry_Slide_10|记事本二：wrilun3q 4p9834m ggddi :(|996052|2^TextEntry_Slide_14||774159|4^TextEntry_Slide_16| tnoinrgb rt trn n|805585|5"

我想删除`^`字符以及字符后面的 9 个`^`字符。所以字符串看起来像：

> string note = "TextEntry_Slide_7|记事本一我要在所有地方输入文本:)TextEntry_Slide_10|记事本二：wrilun3q 4p9834m ggddi :(TextEntry_Slide_14|TextEntry_Slide_16|tnoinrgb rt trn n|805585|5"

之后我还需要删除字符串末尾的最后 9 个字符：

> string note = "TextEntry_Slide_7|记事本一我要在各处输入文本:)TextEntry_Slide_10|记事本二：wrilun3q 4p9834m ggddi :(TextEntry_Slide_14|TextEntry_Slide_16|tnoinrgb rt trn n"

我已经删除了最初在字符串音符中的大量其他内容，但我对如何执行上述操作感到困惑。

我找到了`^`字符的索引，`note.IndexOf("^")`但我不确定下一步要做什么来删除它之前的 9 个字符。

任何帮助将不胜感激 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:28:17.743

一种简单的方法是`Regex.Replace(note, ".{9,9}\\^", "");`

删除最后 9 个字符的明显方法是`note.Substring(0, note.length - 9);`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:33:33.607

当然，您只需要：

```
string output = Regex.Replace(note, @".{9}\^", string.Empty);
// remove last 9
output = output.Remove(output.Length - 9); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T16:34:54.250

首先，我们使用正则表达式去除插入符号和前面的九个字符。

```
 var stepOne = Regex.Replace(input, @".{9}\^", String.Empty); 
```

然后我们就扔掉最后九个字符。

```
 var stepTwo = stepOne.Remove(stepOne.Length - 9); 
```

您可能应该添加一些错误处理 - 例如，如果字符串在第一步之后短于九个字符。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T16:31:48.663

如果您正在使用`.IndexOf("^")`，您可以将该结果/位置存储到一个临时变量中，然后使用一些`.Substring()`调用来重建您的字符串。

尝试类似：

```
int carotPos = note.IndexOf("^");
while (carotPos > -1) {
    if (carotPos <= 9) {
        note = note.Substring(carotPos);
    } else {
        note = note.Substring(0, (carotPos - 9)) + note.Substring(carotPos);
    }
    carotPos = note.IndexOf("^");
} 
```

这将找到`^`字符串中的第一个字符并删除它之前的前 9 个字符（包括`^`）。然后，它将`^`在字符串中找到下一个并重复，直到没有剩余。

然后从字符串中删除最后 9 个字符，你再做一个`.Substring()`：

```
note = note.Substring(0, (note.Length - 9)); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T16:32:38.290

我不确定你的语言是什么，但在 vb.net 中我经常使用 instr() 函数。instr 告诉你它在什么位置找到了一个字符串在另一个字符串中的第一个匹配项，如果它没有找到一个字符串，它返回 0 或负数。

接下来，如果您想在 vb.net 中剥离字符串，您可以使用 mid() 函数和 len() 函数轻松完成此操作，len 与 instr 一起告诉长度，您可以从字符串中计算出您想要的内容。

如果您喜欢在 C# 中执行此操作，请查看以下网址：[http ://www.dotnetcurry.com/ShowArticle.aspx?ID=189](http://www.dotnetcurry.com/ShowArticle.aspx?ID=189)

# php - Doctrine2 不坚持某些领域

> ID：13844039
> 
> 赞同：4
> 
> 时间：2012-12-12T16:20:35.593
> 
> 标签：php, symfony, doctrine-orm, persist

几分钟前，我在 Doctrine2 中发现了一个错误。

我在我的实体中添加了一些字段，然后刷新了 mysql 表，然后我注意到新数据没有存储在表中。

尝试了 var_dump "->getXXX()" 的值，结果是正确的。

这是使用的代码：

```
$user->setName($name);
$user->setSurname($surname);

if($country)
   $user->setCountry($country->getId());

//New code 

if($province > 0)
    $user->setProvince($province);

if($town > 0)
    $user->setTown($town);

var_dump($user->getProvince(), $user->getTown()); //Works OK

$em->persist($user); // Only persists values before Province.
$em->flush(); 
```

谢谢并恭祝安康！

* * *

**已编辑**

关于我的实体的信息：

```
class Users
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="bigint")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var string $name
     *
     * @ORM\Column(name="name", type="string", length=50)
     */
    private $name;

    /**
     * @var string $surname
     *
     * @ORM\Column(name="surname", type="string", length=95)
     */
    private $surname;

    /**
     * @var string $mail
     *
     * @ORM\Column(name="mail", type="string", length=80, unique=true)
     */
    private $mail;

    /**
     * @var string $password
     *
     * @ORM\Column(name="password", type="string", length=255)
     */
    private $password;

    /**
     * @var $country
     *
     * @ORM\Column(name="country", type="integer")
     */
    private $country;

    /**
     * @var $province
     *
     * @ORM\Column(name="province", type="integer")
     */
    private $province;

    /**
     * @var $town
     *
     * @ORM\Column(name="town", type="integer")
     */
    private $town;
} 
```

Country、province 和 town 是来自同名表的 id。我尝试使用 ManytoOne 关联更改字段的类型，但它让我在 Doctrine2 生成的 SQL 上出错。这似乎是一个缓存错误，但我无法解决它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T21:36:48.747

在使用`doctrine:schema:update`. 和@lifo 一样，我不得不重新启动 apache。不同之处在于我没有运行 apc，所以我认为 Doctrine 为模型做了一些内部缓存。

```
$ apachectl -M | grep apc
Syntax OK 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:21:53.330

关于教义协会如何运作，你有很多东西要学。我建议花一些时间仔细阅读[Doctrine mapping 文档](http://docs.doctrine-project.org/en/2.0.x/reference/association-mapping.html)。

您的用户实体不应该使用这样的整数。相反，您可能想要一种`ManyToOne`关系（意思是：每个用户只能拥有一个国家和一个省）。您应该开始将事物视为*对象*，并尽量不要传递*ID*

例如：

```
/**
 * @ORM\ManyToOne(targetEntity="Country")
 * @ORM\JoinColumn(name="countryId", referencedColumnName="id")
 */
private $country;

/**
 * @ORM\ManyToOne(targetEntity="Province")
 * @ORM\JoinColumn(name="provinceId", referencedColumnName="id")
 */
private $province; 
```

其中`targetEntity`的每一个都应该更改为您的实体被调用的任何内容。

如果您尝试进行这些更改，请确保您运行`app/console doctrine:schema:update`命令以自动更新您的架构。

然后您可以在控制器中执行此操作：

```
$country = new Country('US');
$entityManager->persist($country);
$user->setCountry($country); 
```

注意：我没有将国家 ID 分配给该`setCountry()`方法。我传入实际`Country`对象。这只是一个示例，在您的实际控制器中，`$country`此处的变量将通过表单传入或从数据库中获取等。

# php - 变量在循环内返回 0

> ID：13844042
> 
> 赞同：-3
> 
> 时间：2012-12-12T16:20:40.007
> 
> 标签：php, variables, static

我正在编写一个简单的 PHP 类，但是当我尝试在 foreach 循环中使用变量时，它打印出 0（null）。但是，当我在该循环之前回显它时，它会打印正确的值。有什么想法吗？

```
class Search
{
    public static $KeyObject=null;

    //...KeyObject is assigned some value...

    public function resultsToHTML()
    {
        $KeyObject = $this->KeyObject;
        echo "inResults: $KeyObject <br />";
        $htmlString = "";
        if(!empty($this->resultList))
        {
            $htmlString .= "<table><th>Results</th><tbody>";
            foreach($this->resultList as $row)
            {
                $htmlString .= "<tr><td>"+$KeyObject+"</td></tr>";
                $htmlString .= "<tr>";
                foreach($row as $key => $value)
                {
                    $htmlString .= "<td class=\"$key\" id=\"$value\">$value</td>";
                }
                $htmlString .= "</tr>";
            }
            $htmlString .= "</tbody></table>";
        }

        return $htmlString;
    }
} 
```

这返回...

> 结果：玩家 000000000000000000000000000000000000000000000000000000000000000000000000000000000000

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T16:21:46.367

这是因为您使用的是连接`+`而不是`.`连接。

```
$htmlString .= "<tr><td>"+$KeyObject+"</td></tr>"; 
```

将 替换`+`为`.`：

```
$htmlString .= "<tr><td>".$KeyObject."</td></tr>"; 
```

`+`会将[您的字符串转换为整数](http://php.net/manual/en/language.types.string.php#language.types.string.conversion)（返回 0）并通过完全有效的`$htmlString += [string here]`.

# wpf - Crystal Reports VS2010如何在不同页面获取不同的图片

> ID：13844048
> 
> 赞同：5
> 
> 时间：2012-12-12T16:21:13.370
> 
> 标签：wpf, image, crystal-reports

使用 WPF CrystalReportsViewer 和 CrystalDecisions.ReportAppServer.ClientDoc.ISCDReportClientDocument 我可以通过在相应部分调用 ImportPicture 将图像动态添加到 rpt 中的所有页面。但是，我想为每个页面添加不同的图像。

我已经计算出有多少页面需要图像（请参阅[如何从 CrystalReportsViewer 获取渲染页面的数量？](https://stackoverflow.com/questions/12921457/how-do-i-get-the-number-of-rendered-pages-from-a-crystalreportsviewer)），但无法在每个页面上获取不同的图像。

是否有我可以访问的“呈现”报告的数据模型？我可以每页添加不同的图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:48:27.587

我不确定在 VS 中以编程方式执行此操作，但您可以在 Crystal Report 本身中执行此操作。

1.  将占位符图像放在所需的部分，位置。
2.  右键单击图像->转到“格式化图形”->选择“图片”选项卡
3.  您应该看到一个按钮，允许您输入“图形位置”的公式
4.  使用公式通过“pagenumber”关键字解析为有效的图像文件路径：

```
select pagenumber
case 1 : "C:\picture1.bmp"
case 2 : "C:\picture2.bmp"
...
default : "C:\warning.bmp"
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T18:52:22.373

将所有图像添加到所需部分，然后 EnableSuppress 并将公式设置为在其不在所需页面上时隐藏。

```
CrystalDecisions.ReportAppServer.ReportDefModel.PictureObject pic=ctl.ReportObjectController.ImportPicture(tempImagePath, s, 0, 0);
                        if (pic != null)
                        {
                            var picNew = pic.Clone();
                            picNew.Format.EnableSuppress = true;
                            CrystalDecisions.ReportAppServer.ReportDefModel.ConditionFormula f = roNew.Format.ConditionFormulas[CrObjectFormatConditionFormulaTypeEnum.crObjectFormatConditionFormulaTypeEnableSuppress];
                            if (f != null)
                            {
                                f.Syntax = CrFormulaSyntaxEnum.crFormulaSyntaxCrystal;
                                f.Text = string.Format("PageNumber <> {0}", ri.PageNumber);

                            }
                            ctl.ReportObjectController.Modify(pic, picNew);
                        } 
```

# c# - .Net MVC 4 资源

> ID：13844049
> 
> 赞同：0
> 
> 时间：2012-12-12T16:21:15.290
> 
> 标签：c#, .net, resources, asp.net-mvc-4, asp.net-mvc-routing

我有一个使用一些自定义路由的 MVC 应用程序：

```
{Customer}/{Entity}/{Action} 
```

`{Customer}`路由变量可以理解为本地化变量。我想根据`{Customer}`. 这意味着 for `Customer1`,`Field1`被标记`Username`并且 for `Customer2`,`Field1`被命名`LoginName`。（示例没有意义，但应该显示要求）。

我怎样才能达到预期的效果？我开始创建两个资源文件`Labels.Customer1.resx`，`Labels.Customer2.resx`但不知道如何在视图中启用它们。

顺便说一句，我没有使用剃须刀引擎。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:03:46.990

我在下面添加的链接显示了如何使用资源文件以及如何使用其中的值来替换标签的值，以便根据您选择的资源文件更改不同的值。

据此，您可以创建一个属性，您可以在其中设置当前资源文件。设置当前资源文件后，您可以从那里调用每个标签的值

[http://www.4microsoftsolutions.com/post/AspNet-Globalization-and-Localization-using-Local-Resource-files-and-Global-Resource-files-.aspx](http://www.4microsoftsolutions.com/post/AspNet-Globalization-and-Localization-using-Local-Resource-files-and-Global-Resource-files-.aspx)

[循环遍历 .resx 文件中的所有资源](https://stackoverflow.com/questions/2041000/loop-through-all-the-resources-in-a-resx-file)

# java - Java SE 版本 <-> Java EE 版本兼容性矩阵

> ID：13844050
> 
> 赞同：2
> 
> 时间：2012-12-12T16:21:18.850
> 
> 标签：java, jakarta-ee

[我注意到今天在Java Source](https://blogs.oracle.com/java/entry/end_of_public_updates_for?msgid=3-7555351270)上宣布 Java SE 6 的公共更新即将结束。我目前正在开发一个使用 Java EE 5 的 Web 应用程序，这提示了我是否应该推动更新到 Java EE 6 的问题。

*   [JSR 244](http://jcp.org/en/jsr/detail?id=244)声明“Java EE 5 [is] 基于 J2SE 5.0”
*   [JSR 316](http://jcp.org/en/jsr/detail?id=316)声明“Java EE 6 [is] 基于 Java SE 6”
*   [JSR 342](http://jcp.org/en/jsr/detail?id=342)声明“Java EE 7 [将构建]在 Java SE 7 上”，但也鼓励支持 JSR 的人寻找新的 Java SE 8 语言特性

鉴于我目前使用 OpenJDK 7 构建并部署在 Tomcat 7 上，我怀疑兼容性矩阵如下所示：

```
 EE5 EE6 EE7
SE5  x
SE6  x   x
SE7  x   x   x 
```

我们的项目是否可以继续基于 Java EE 5 编写代码并利用 Java SE 6 或 Java SE 7 的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:35:29.320

> 我们的项目是否可以继续基于 Java EE 5 编写代码并利用 Java SE 6 或 Java SE 7 的功能？

是的，这很好，尽管您可能还想在某个时候升级您的 Java EE 版本。

# ruby-on-rails - nil 的未定义方法“get_best_compatible”：类随机出现

> ID：13844051
> 
> 赞同：1
> 
> 时间：2012-12-12T16:21:25.527
> 
> 标签：ruby-on-rails, ruby, actionmailer

几天前，我们在从 Rails 应用程序发送电子邮件时开始遇到问题。这是错误的回溯：

```
mail-2.4.4/lib/mail/body.rb:143→ get_best_encoding
mail-2.4.4/lib/mail/body.rb:156→ encoded
mail-2.4.4/lib/mail/message.rb:1710→ encoded
actionmailer-3.2.8/lib/action_mailer/base.rb:434→ set_payload_for_mail
actionmailer-3.2.8/lib/action_mailer/base.rb:414→ block in deliver_mail
activesupport-3.2.8/lib/active_support/notifications.rb:123→ block in instrument
activesupport-3.2.8/lib/active_support/notifications/instrumenter.rb:20→ instrument
activesupport-3.2.8/lib/active_support/notifications.rb:123→ instrument
actionmailer-3.2.8/lib/action_mailer/base.rb:413→ deliver_mail
mail-2.4.4/lib/mail/message.rb:229→ deliver
!===> app/controllers/password_resets_controller.rb:16→ create <===!
actionpack-3.2.8/lib/action_controller/metal/implicit_render.rb:4→ send_action
actionpack-3.2.8/lib/abstract_controller/base.rb:167→ process_action 
```

我已经突出显示了指向我们代码的行。其余的是 gem / rails 代码。可能需要注意的是，在这种环境中，我们通过 delay_job 发送一些电子邮件，而没有它的其他一些电子邮件。上面的堆栈跟踪指的是没有延迟作业发送的电子邮件。

我们已经能够在应用了以下更改的开发环境中重现该问题：

*   Rails 已升级到 3.2.9 而不是 3.2.8
*   Ruby 已升级到 1.9.3-p327 而不是 1.9.3-p194
*   Delayed_job 现在发送*所有*电子邮件。并且被撞到了 3.0.4 而不是 3.0.3

这是开发环境中错误的回溯：

```
mail (2.4.4) lib/mail/body.rb:143:in `get_best_encoding'
mail (2.4.4) lib/mail/body.rb:156:in `encoded'
mail (2.4.4) lib/mail/message.rb:1710:in `encoded'
actionmailer (3.2.9) lib/action_mailer/base.rb:434:in `set_payload_for_mail'
actionmailer (3.2.9) lib/action_mailer/base.rb:414:in `block in deliver_mail'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.9) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.9) lib/active_support/notifications.rb:123:in `instrument'
actionmailer (3.2.9) lib/action_mailer/base.rb:413:in `deliver_mail'
mail (2.4.4) lib/mail/message.rb:229:in `deliver'
delayed_job (3.0.4) lib/delayed/performable_mailer.rb:6:in `perform'
delayed_job (3.0.4) lib/delayed/backend/base.rb:95:in `block in invoke_job'
delayed_job (3.0.4) lib/delayed/lifecycle.rb:60:in `call'
delayed_job (3.0.4) lib/delayed/lifecycle.rb:60:in `block in initialize'
delayed_job (3.0.4) lib/delayed/lifecycle.rb:65:in `call'
delayed_job (3.0.4) lib/delayed/lifecycle.rb:65:in `execute'
delayed_job (3.0.4) lib/delayed/lifecycle.rb:38:in `run_callbacks'
delayed_job (3.0.4) lib/delayed/backend/base.rb:92:in `invoke_job'
delayed_job (3.0.4) lib/delayed/backend/base.rb:37:in `block in enqueue'
delayed_job (3.0.4) lib/delayed/backend/base.rb:36:in `tap'
delayed_job (3.0.4) lib/delayed/backend/base.rb:36:in `enqueue'
delayed_job (3.0.4) lib/delayed/message_sending.rb:13:in `method_missing'
!===> app/controllers/password_resets_controller.rb:16:in `create' <===!
actionpack (3.2.9) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
actionpack (3.2.9) lib/abstract_controller/base.rb:167:in `process_action' 
```

据我们所见，除了delayed_job 部分和gem 版本之外，它似乎是完全相同的堆栈跟踪。

我们的应用程序控制器的第 16 行在我们的开发环境中如下所示：

```
UserMailer.delay(:queue => "mail").password_reset_instructions(@user) 
```

在产品中是：

```
UserMailer.password_reset_instructions(@user).deliver 
```

棘手的部分是这个错误是“随机的”。它不会每次都发生，当它不发生时，邮件发送成功。

这里有两个观察：

*   当错误发生在一封电子邮件中时，它会每次都发生在同一封电子邮件中。“相同的电子邮件”是指在同一个控制器中执行相同的操作，而不管参数如何。
*   因此，一封电子邮件可能被窃听，而其他电子邮件则正常。
*   对于所有电子邮件，重新启动服务器始终可以解决问题。但只是一段时间。
*   我们还没有找到可以 100% 置信度触发错误的操作序列。

我们已经调查了几天这个错误，但我们真的在这里碰壁了。你知道我们可能做错了什么吗？

# asp.net - 是否可以在 asp 会话对象中存储 For Next 循环？

> ID：13844053
> 
> 赞同：0
> 
> 时间：2012-12-12T16:21:31.677
> 
> 标签：asp.net, vb.net, session, viewstate

我需要将以下代码存储在 asp 会话对象或视图状态中。

```
For i As Integer = 0 To lstItems.Items.Count - 1
        txtcart.Text &= lstItems.Items.Item(i).ToString() & ""

    Next 
```

我在我的 ASP.Net 网站的内容页面上有此代码。我需要从我的母版页访问它，以便我可以将它打印到母版页上的文本框。

控件 txtCart.text 位于母版页上，而 lstitems 不是下拉列表。这是一个空的不可见列表，我用来存储项目，然后我调用一个文本框，因为列表框不提供文本换行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:28:57.873

正如@ashish 所说，您不能在会话变量中“存储代码”，因为没有这样的概念（我知道）。

但是，根据您的评论...

> 我需要存储它，以便我可以从母版页调用它以将其显示在文本框中，据我所知，没有办法直接将列表框中的值从内容页面调用到母版页并显示它们

你有很多选择：这里有几个......

首先是创建母版页的公共属性，例如...

```
Public Function DoThis(Byval lstItems as DropDownList) as String
  Dim result as string = ""
  For i As Integer = 0 To lstItems.Items.Count - 1
   result &= lstItems.Items.Item(i).ToString() & ""
  Next
  return result
End Function 
```

然后在你的页面调用中......

```
CType(Page.Master, MyMasterPageType).DoThis(lstItems) 
```

* * *

另一种选择是...

*   使用该方法创建一个类
*   创建对象的实例
*   将其存储在会话中
*   从会话中访问对象并调用方法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:24:47.673

不，你不能这样做..会话或视图状态对象只能存储变量值..

# speech-recognition - 扩展 Sphinx 以支持本地语言

> ID：13844054
> 
> 赞同：3
> 
> 时间：2012-12-12T16:21:37.160
> 
> 标签：speech-recognition, voice-recognition, cmusphinx, sphinx4

最初我正在考虑从头开始编写一个语音识别引擎（支持 50-100 个单词）来支持我的母语。

然而，经过一些研究，很明显，即使在 1.5 年内支持非常有限，也无法制造出语音识别引擎。

现在我正在考虑扩展 sphinx 引擎以支持我的语言。是否有可能在 1.5 年内完成，甚至这对于最后一年的项目来说工作量太大了。

我正在焦急地等待你在这件事上的经验。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-17T00:01:12.037

是的，这当然是可能的。我为我的毕业论文做了一个类似的 Chatino 识别器。（Chatino 是墨西哥南部瓦哈卡的土著语言）。识别器包括一个孤立的单词识别器和一个使用 Sphinx4 构建的连续语音识别器。

有关详细信息，请参阅[http://www.jaimalayalam.com/papers/chatinoVoiceRecognition09.pdf](http://www.jaimalayalam.com/papers/chatinoVoiceRecognition09.pdf)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T13:28:54.523

进行语音识别的时间取决于您的应用程序。

你会需要：

1.  定义您要识别的单词是什么；
2.  为这些单词编写一个语音词典；
3.  与几位母语人士一起录制单词；
4.  验证记录的数据；
5.  准备数据以训练声学模型；
6.  产生语法或语言模型（在这种情况下需要记录语音平衡的单词/句子）；
7.  训练声学模型；
8.  测试你的系统；
9.  对语法和声学模型进行调整和调整（说话者适应）；
10.  了解如何制作上述所有 9 个主题。:)

第10项是最耗时的任务！！！

答：是的，商业应用可以在 3 个月内完成。

Sphinx 是一种可能性，HTK 是一个优秀的开源语音识别系统，用于训练和测试一个完整的系统。Julius 是一个开源语音识别器（引擎），它使用由 HTK 构建的声学和语言模型。

路易斯·乌贝尔

ASR 实验室 - www.asrlabs.com.br

# joomla - 从 joomla 2.5 上的媒体模式框中选择一个文件

> ID：13844055
> 
> 赞同：2
> 
> 时间：2012-12-12T16:21:40.523
> 
> 标签：joomla, modal-dialog, joomla2.5

我在我的 Joomla 组件上使用这个片段来调用图像框并用他的值填充我的字段：

```
<a class="modal" title="Select your image" href="index.php?option=com_media&amp;view=images&amp;tmpl=component&amp;asset=59&amp;author=42&amp;fieldid=id_field&amp;folder=" rel="{handler: 'iframe', size: {x: 800, y: 500}}">Select your image</a> 
```

它工作正常。

但是如果我需要其他类型的文件？我试过这样：

```
<a class="modal" title="Select your file" href="index.php?option=com_media&amp;view=media&amp;tmpl=component&amp;asset=59&amp;author=42&amp;fieldid=id_field&amp;folder=" rel="{handler: 'iframe', size: {x: 800, y: 500}}">Select your file</a> 
```

> 使用 view= **media**而不是 view= **images**

我看到带有媒体文件的模式框..但我无法选择它们来填充我的字段..

为什么？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T20:08:00.997

如果我理解正确，我希望我不要再搞砸了。如果是 com_media 你可以在这里看到：http: [//forum.joomla.org/viewtopic.php?p=2253464](http://forum.joomla.org/viewtopic.php?p=2253464)

# linux - 没有设置 X11 DISPLAY 变量，但该程序执行了需要使用 Putty 的操作？

> ID：13844060
> 
> 赞同：2
> 
> 时间：2012-12-12T16:21:50.270
> 
> 标签：linux, x11, putty, display

我正在使用 Putty 连接到远程运行的服务器。为了监控服务器，我在 putty 终端下输入了 jconsole

我得到了这个例外。

```
[user001@test.hhh.com ~]$  jconsole
Exception in thread "AWT-EventQueue-0" java.awt.HeadlessException:
No X11 DISPLAY variable was set, but this program performed an operation which requires it.
        at java.awt.GraphicsEnvironment.checkHeadless(GraphicsEnvironment.java:159)
        at java.awt.Window.<init>(Window.java:432)
        at java.awt.Frame.<init>(Frame.java:403)
        at javax.swing.JFrame.<init>(JFrame.java:202)
        at sun.tools.jconsole.JConsole.<init>(JConsole.java:97)
        at sun.tools.jconsole.JConsole$6.run(JConsole.java:770)
        at java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:209)
        at java.awt.EventQueue.dispatchEvent(EventQueue.java:597)
        at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269)
        at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184)
        at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:174)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169)
        at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161)
        at java.awt.EventDispatchThread.run(EventDispatchThread.java:122)
[user001@test.hhh.com ~]$ 
```

即使我尝试在该站点之后更改腻子设置。

[获取 HeadlessException：未设置 X11 DISPLAY 变量](https://stackoverflow.com/questions/5218870/getting-a-headlessexception-no-x11-display-variable-was-set)

但是我仍然一次又一次地得到同样的异常，你能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-12T16:44:58.480

在本地计算机上安装 X 服务器，并按照另一个问题中的说明启用 X 转发。

# asp.net-mvc - MVC3：分组动作过滤器或从其他动作过滤器调用动作过滤器

> ID：13844068
> 
> 赞同：1
> 
> 时间：2012-12-12T16:22:24.307
> 
> 标签：asp.net-mvc, asp.net-mvc-3, action-filter, actionfilterattribute

我正在尝试编写一个属性类，该类可用于我的所有“管理”操作，然后有效地将所有相关操作/身份验证过滤器应用于该操作。例如，我总是应用`AuthoriseAttribute`and a custom `AdminLayoutAttribute`，所以我的意图是只拥有一个`AdminAttribute`以某种方式暗示上述两​​者的东西。这样我就可以在一个方便的地方对整个管理部分进行更改。

但是我不明白我怎么能做到这一点。任何人都可以指出我正确的方向吗？

非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T21:50:31.083

您可以考虑将它们从操作移动到控制器类或管理操作的基本控制器类。这样，您只需在控制器类中设置`Authorize`和`AdminLayout`属性，而不是每个单独的操作方法。

```
[Authorize]
[AdminLayout]
public AdminController: Controller
{
    //action methods
} 
```

拥有一个结合授权和一些自定义布局逻辑的属性可能被视为对单一责任原则的破坏，但如果您别无选择，那么您可以尝试以下方法：

如果您想用`AdminLayoutAttribute`新的 替换现有的`AdminAttribute`，则可以创建`AdminAttribute`它，使其继承自标准`AuthorizeAttribute`，并像在您的自定义 AdminLayoutAttribute 中一样实现 IActionFilter\IResultFilter。

```
public class AdminLayoutAttribute: AuthorizeAttribute, IActionFilter, IResultFilter
{
    //Logic as in existing AdminLayoutAttribute to be replaced
} 
```

否则，如果您想保留现有的并`AdminLayoutAttribute`添加一个`AdminAttribute`将其与`AuthorizeAttribute`

```
public class AdminLayoutAttribute: AdminLayoutAttribute, IAuthorizationFilter
{
    //Implement IAuthorizationFilter by delegating to an internal AuthorizeFilter instance
    private _authorizeFilter = new AuthorizeAttribute();

    public override object TypeId 
    { 
        //override from base Attribute class as in AuthorizeAttribute class
        get { return _authorizeFilter.TypeId ; }
    }

    public string Roles 
    {
        get { return _authorizeFilter.Roles; }
        set { _authorizeFilter.Roles = value; }
    }

    public string Users 
    {
        get { return _authorizeFilter.Users; }
        set { _authorizeFilter.Users = value; }
    }

    public void OnAuthorization(AuthorizationContext filterContext) 
    {
        _authorizeFilter.OnAuthorization(filterContext);
    }

} 
```

这两个选项的关键是不让新的 AdminAttribute 类继承自 2 个具体类，因为 C# 不支持多重继承。

# javascript - 用户单击链接时忽略显示/隐藏 div 的简单 jquery

> ID：13844072
> 
> 赞同：0
> 
> 时间：2012-12-12T16:22:38.810
> 
> 标签：javascript, jquery

我有两个div。当用户单击 div 'body' div 上的任意位置时，单击第一个会使用 jquery show 切换第二个。

我的问题是，当用户单击“body”div 中的链接时，节目会在链接加载之前执行。它会让那些认为他们错过了最后一页内容的用户感到困惑。**是否可以为“body”div 中的链接创建一个简单的例外？**

```
<div>
      <div class="body">
         <p>Some really good links</p>
         o Example Org: <a href="http://example.org">example.org</a><br>
         o Example Dotcom: <a href="http://example.com">example.com</a>
      </div>
      <div class="toggle" style="display: none;">
         <p>Some really detailed information here.</p>
      </div>
</div> 
```

我的 javascript 是这样的：

```
<script>
$(document).ready(function () {
  bindToggle;
});

function bindToggle() {
    $(".toggle").hide();
    $(".body").click(function(event) {
        el = $(this).next();
        if (el.is(":visible")) {
            el.hide('fast');
        } else {
            el.show('fast');
        }
    });
};
</script> 
```

这是一个演示：http: [//jsfiddle.net/esJsP/3/](http://jsfiddle.net/esJsP/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:29:44.933

单击正文中的链接时调用 event.stopPropagation 会阻止事件到达正文。添加以下代码并检查输出：

```
$('.body > a').click(function(e) {
    e.stopPropagation();
}); 
```

这是一个演示：http: [//jsfiddle.net/esJsP/5/](http://jsfiddle.net/esJsP/5/)

# wpf - JpegBitmapEncoder 在文件末尾留下灰色条纹？

> ID：13844074
> 
> 赞同：0
> 
> 时间：2012-12-12T16:22:44.190
> 
> 标签：wpf, encoding, bitmap, jpeg

我正在使用 WPF 成像组件来尝试进行一些简单的图像处理。我大致关注有关[如何编码和解码 JPEG 图像](http://msdn.microsoft.com/en-us/library/aa970689.aspx)的 MS 文章。

我的代码很简单：

```
BitmapImage bi = new BitmapImage();

bi.BeginInit();
bi.UriSource = new Uri("D:\\Temp\\StackOverflowCapture.png");
//bi.DecodePixelWidth = 1024;
//bi.DecodePixelHeight = 768;
bi.EndInit();

var jpg                  = new JpegBitmapEncoder();
    jpg.QualityLevel     = 90;
    //jpg.FlipHorizontal = false;
    //jpg.FlipVertical   = false;
    jpg.Frames.Add(BitmapFrame.Create(bi));

var fs = new FileStream("D:\\Temp\\StackOverflow_Result.jpg", FileMode.Create);

jpg.Save( fs );
jpg = null; 
```

代码片段创建了一个奇怪的工件，其中最后几“行”是一块纯灰色。就好像编码器的像素快用完了一样。根据我用作输入的图像（各种分辨率、jpeg、png）或我启用的选项（强制解码时的分辨率），灰度的数量会变化 2 倍或 3 倍。然而，最终效果是相同的，如下图所示。

我的源图像是：

> ![在此处输入图像描述](../Images/4bbfe3b0ae6cfcdec9c9b5809c36fb05.png)

输出图像（注意底部的灰色带）：

> ![在此处输入图像描述](../Images/fb3e3e74018173b0173bfeec61ef3564.png)

这里发生了什么？如何获得干净的转换？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T15:55:36.800

这绝对是耳朵之间的短路。但是，为了其他有类似弱点的人，我正在回答我自己的问题。

**您需要关闭/刷新流。** 或者，最好`fs`在一个`using`块中创建。

因此修改后的代码是：

```
BitmapImage bi = new BitmapImage();

bi.BeginInit();
bi.UriSource = new Uri("D:\\Temp\\StackOverflow_Source.png");
bi.EndInit();

var jpg                  = new JpegBitmapEncoder();
    jpg.QualityLevel     = 90;
    jpg.Frames.Add(BitmapFrame.Create(bi));

var fs = new FileStream("D:\\Temp\\StackOverflow_Result.jpg", FileMode.Create);

jpg.Save( fs );
fs.close();       <--- duh, flush the stream to disk
jpg = null; 
```

# java - jsp声明标签中的System.out.println()

> ID：13844075
> 
> 赞同：0
> 
> 时间：2012-12-12T16:22:49.650
> 
> 标签：java, jsp

为什么我们不能使用 System.out.println(); 在jsp**声明**元素里面？当我尝试编写该行时，显示编译器错误。

```
<%!System.out.println("test") %> 
 <body> 
  <form action="FindPhone" method="post"> 
    PhoneNumber : <input type="text" name="phone"> 
    <input type="submit" value="submit">
 </form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:49:12.333

因为声明元素转换为 JSP 生成的类中的字段声明：

```
public class GeneratedJsp extends JspServlet {

    System.out.println("test");

} 
```

不是有效的 Java 代码。一个声明元素应该包含……一个声明。

# gridview - 在 Dynamics CRM 2011 中是否可以突出显示视图中的一行？

> ID：13844079
> 
> 赞同：1
> 
> 时间：2012-12-12T16:22:59.183
> 
> 标签：gridview, view, customization, dynamics-crm-2011, dynamics-crm

我正在寻找一种方法来突出显示视图中的一行。我看到视图中的版本实际上非常有限，您可以编辑要显示的查询和列。

但是，如果我能够在某一列的行内至少显示一个图标就足够了。

其他方法是检查视图的 XML 源中是否存在允许我标记（任意标记）行的标记。作为“所有报价”视图的 XML 源代码下方的示例。

```
<grid name="resultset" object="1084" jump="name" select="1" icon="1" preview="1">
  <row name="result" id="quoteid">
    <cell name="name" width="300" />
    <cell name="statecode" width="100" />
    <cell name="totalamount" width="100" />
    <cell name="customerid" width="150" />
    <cell name="quotecustomeridcontactcontactid.emailaddress1" width="150" disableSorting="1" />
    <cell name="createdon" width="150" />
  </row>
</grid> 
```

提前致谢

**其他详情**

我需要这个用于 CRM 的在线和本地。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T08:00:38.210

如果您使用 CRM for Outlook，您可以使用条件格式：
[http](http://www.youtube.com/watch?v=-fJxWzp-qbo)

://www.youtube.com/watch?v= -fJxWzp-qbo 否则试试这个：
[http ://weblogs.asp.net/gayanperera/archive/2010 /06/30/how-to-change-the-grid-icons-dynamically.aspx](http://weblogs.asp.net/gayanperera/archive/2010/06/30/how-to-change-the-grid-icons-dynamically.aspx)
它不受支持，我还没有尝试过，但看起来它会起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T08:43:06.420

如果可能，我会建议您在`silverlight`或 中开发自定义视图`asp.net`。
在那里，您可以根据您的要求格式化您的自定义视图，这将是受支持的方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-15T23:25:54.443

不支持更新 CRM 样式或脚本。我建议显示具有所需值的视图列属性，而不是尝试显示颜色或图标。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T11:50:43.433

如果将 JScript 添加到视图中，则可以使用内联样式表动态编辑视图。
我知道在视图中获取 JScript 的唯一方法是向功能区添加一个按钮。
如果您找到解决此问题的方法，请发布。

# arrays - 为什么从 VBA 写入文件的字节会为每个字节添加 1100？

> ID：13844083
> 
> 赞同：4
> 
> 时间：2012-12-12T16:23:20.347
> 
> 标签：arrays, excel, vba, byte, jpeg

我正在尝试将图像作为字节数组复制到`vba`.

文件的前三个字节，表示为字节数组：

```
 Dim arr(3) As Byte arr = {23,21,2f} 
```

从数组复制到新文件的代码是：

```
Open "try444.jpg" For Binary As #1

For cnt = 1 To UBound(arr)

    Put #1, LOF(1) + 1, arr(cnt)

Next 
```

但它写入`1100 2311 0023 1100 2111 002f 1100`文件（全部在`hex`）

我的代码有什么问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T17:20:49.180

因为 arr 在某处被重新定义。如果我将过程编写为单个函数：

```
Option Explicit
Sub test()
Dim cnt As Long
Dim arr(3) As Byte

arr(1) = &H23
arr(2) = &H21
arr(3) = &H2F

Open "try444.jpg" For Binary As #1

For cnt = 1 To UBound(arr)

    Put #1, LOF(1) + 1, arr(cnt)

Next
Close #1

End Sub 
```

然后我得到了你期望的字节`23 21 2F`

如果我忽略了定义类型（或者我没有**Option Explicit**），那么它就会变成一个变体，然后任何人都可以猜测会出现什么，因为变体数据类型包含一个类型代码。（就我而言，我得到`02 00 23 00 02 00 21 00 02 00 2f 00`）

# c# - 更改连接字符串 app.config

> ID：13844084
> 
> 赞同：0
> 
> 时间：2012-12-12T16:23:21.707
> 
> 标签：c#

我已经为用户制作了一个表格，为应用程序选择数据库，我使用了这个 app.config 文件

```
 <?xml version="1.0" encoding="utf-8" ?>
  <configuration>
  <connectionStrings>
  <add name="primer" connectionString="Data Source=SQL-PC;Initial Catalog=contro;uid =sa;pwd = xxxxxxx" />
  </connectionStrings>
  </configuration/> 
```

我使用 app.config 的字符串在 C# 中有此代码：

```
 if (conexd != null && conexd.State == ConnectionState.Closed)
        {  MessageBox.Show("Conexion Cerrada"); }
        else if (conexd.State == ConnectionState.Open )
        {
            string stcon = ConfigurationManager.ConnectionStrings["primer"].ToString();   
            MessageBox.Show("Conexion Open" + stcon );
        } 
```

上面的代码工作正常，我在这里阅读了很多帖子，但我不明白如何用 C# 编写来更改 app.config 中的用户、密码、目录，我尝试过这样的事情：

```
 string catalogo, usuario, password;
        catalogo = "teste"; usuario = "sa"; password = "xxxxxx";
        System.Configuration.Configuration config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
        string modif =  string.Format(ConfigurationManager.ConnectionStrings["primer"].ConnectionString,catalogo,usuario,password);
        config.Save(ConfigurationSaveMode.Minimal); 
```

我也有这样的测试：

```
 var miconex = new SqlConnectionStringBuilder();
        miconex.DataSource = "SQL-PC"; miconex.InitialCatalog = "control";
        miconex.UserID = "sa"; miconex.Password = "xxxx";

        string saleconfritas = miconex.ToString();
        MessageBox.Show(saleconfritas); 
```

这会生成一个字符串，但是我将这个字符串值保存在 app.config 或注册表中的哪个位置？

是 config.save 正确的方式吗？感谢任何方向。

亚历杭德罗。

# .htaccess - ExpressionEngine htaccess 重定向

> ID：13844087
> 
> 赞同：0
> 
> 时间：2012-12-12T16:23:29.497
> 
> 标签：.htaccess, redirect, expressionengine

我正在尝试为我们的 ExpressioneEngine 站点设置一些重定向，但确定表达式引擎的设置方式我遇到了问题。

例如：

```
Redirect /something/else /something/else/this 
```

创建一个无限循环并且不起作用。我想这是因为它正在转发整个“文件夹” - 有没有办法只重定向那个页面。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:16:56.427

尝试这个：

```
RedirectMatch 302 /something/else/!(this) /something/else/this 
```

如果这不起作用，您将需要使用 mod_rewrite

```
RewriteEngine on
RewriteBase /
RewriteCond %{REQUEST_URI} !something/else/this
RewriteRule ^something/else/(.*)$ something/else/this/$1
RewriteRule ^something/else$ something/else/this 
```

# sql - 我在 Oracle 中收到有关命令未正确结束的错误

> ID：13844091
> 
> 赞同：0
> 
> 时间：2012-12-12T16:23:45.830
> 
> 标签：sql, oracle

我正在尝试进行多表插入，但由于某种原因出现错误。我在网上查看并尝试添加一个分号，但没有奏效。

错误是 SQL 错误：ORA-00933：SQL 命令未正确结束

这是我的代码

```
Insert Into EMP (empno,ename,job,mgr,sal,deptno)
Value    (4600,'BOB','CONSULT',4699,900,60),                                                
(5300,'AILEEN','MANAGER',7839,1800,40),
(9873,'RYAN','CONSULT',4699,800,50) 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:26:56.190

您不能在一个语句中执行多个插入。您必须为它们中的每一个编写单独的插入，例如

```
insert into table_1 (...) values (...);
insert into table_1 (...) values (...);
etc. 
```

另外，请注意它是`values`，而不是`value`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:37:49.993

您还可以使用此命令在单个语句中插入所有记录

```
Insert all Into EMP (empno,ename,job,mgr,sal,deptno)
Values    (4600,'BOB','CONSULT',4699,900,60)
Into EMP (empno,ename,job,mgr,sal,deptno)
values (5300,'AILEEN','MANAGER',7839,1800,40)
Into EMP (empno,ename,job,mgr,sal,deptno)
values (9873,'RYAN','CONSULT',4699,800,50)
select * from dual; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T16:53:10.413

您始终可以在每次选择之间`INSERT INTO...SELECT ..FROM dual`使用使用 a 的位置：`UNION ALL`

```
insert into EMP (empno,ename,job,mgr,sal,deptno)
select 4600,'BOB','CONSULT',4699,900,60
from dual
union all
select 5300,'AILEEN','MANAGER',7839,1800,40
from dual
union all
select 9873,'RYAN','CONSULT',4699,800,50
from dual; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/8d89a/1)

或者您可以使用：

```
INSERT ALL 
    INTO emp (empno, ename, job, mgr, sal, deptno)
         VALUES (4600, 'BOB', 'CONSULT', 4699, 900, 60)
    INTO emp (empno, ename, job, mgr, sal, deptno)
         VALUES (5300, 'AILEEN', 'MANAGER', 7839, 1800, 40)
    INTO emp (empno, ename, job, mgr, sal, deptno)
         VALUES (9873, 'RYAN', 'CONSULT', 4699, 800, 50)
SELECT * 
FROM dual; 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/1a002/1)

# javascript - Windows 8 JavaScript 项目中 bld 和 bin 文件夹的用途是什么？

> ID：13844096
> 
> 赞同：7
> 
> 时间：2012-12-12T16:23:53.147
> 
> 标签：javascript, windows-8, winjs

我知道*bld*和*bin*文件夹中的文件不是已部署的应用程序引用的文件（我可以篡改它们，并且下次我从开始屏幕启动它时它们对应用程序没有影响），那么是什么它们用于*bld*和*bin*文件夹之间有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:48:07.623

它们是“构建”应用程序过程的临时构建目录。但是，*bin*目录是部署目录，从技术上讲，您应该能够编辑并让下一个实例开始接收这些更改。

当我刚刚使用*bin*目录测试它时，它确实会在我终止应用程序后拾取更改的内容，并从起始页面重新开始

# c++ - 在 MonoDevelop 中更改 C++ 编译器

> ID：13844097
> 
> 赞同：0
> 
> 时间：2012-12-12T16:23:56.420
> 
> 标签：c++, macos, monodevelop

有没有办法告诉 MonoDevelop 使用不同的 C++ 编译器？我想使用通过 MacPorts 安装的最新 g++ 4.7，而不是 OS X 附带的默认 4.2。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:17:01.493

您可以更改 PATH 环境变量以将包含 g++ 的目录放在系统之前。

# save - vi中wq和x的区别

> ID：13844098
> 
> 赞同：13
> 
> 时间：2012-12-12T16:24:01.810
> 
> 标签：save, vi, quit

我总是`:wq`用来保存文件。今天，我才知道`:x`可以用它来做到这一点。但我没有在任何 vi 教程或 vi 快速参考中注意到它。这两个命令有什么区别吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-12T16:26:18.030

从

```
help :x

    *:x* *:xit*
:[range]x[it][!] [++opt] [file]
            Like ":wq", but write only when changes have been
            made.
            When 'hidden' is set and there are more windows, the
            current buffer becomes hidden, after writing the file. 
```

# templates - Magento Widget 不显示在 CMS 页面和产品页面上，但在主页和类别页面上可见

> ID：13844099
> 
> 赞同：0
> 
> 时间：2012-12-12T16:24:04.153
> 
> 标签：templates, magento, static, widget, block

我有一个自定义 Magento 小部件，在底部显示类别列表。这个小部件被放置在一个静态块中，静态块被添加到模板中。

这是静态块的内容：

```
test output
{{widget type="mylinks/view" template="mywidgets/mylinks.phtml" parent_category="1"}} 
```

奇怪的是，小部件确实显示在主页和所有类别页面中。但它不会显示在产品详细信息页面和 CMS 页面上。我唯一看到的是“测试输出”（证明静态块在那里）。

我在小部件模板“mywidgets/mylinks.phtml”中添加了一个“测试小部件输出”。但它也没有显示。看起来模板根本没有被解析，因为那里的 php-exit-command 也会被忽略！

没有输出时很难调试...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-12T09:48:28.320

我自己找到了解决方案：我用来构建自己的小部件代码已经覆盖了输出方法，它自己的 if 条件在我调整后是错误的。

无论如何感谢您的想法！

# java - 在多线程环境中摆脱标志/枚举的设计模式

> ID：13844100
> 
> 赞同：0
> 
> 时间：2012-12-12T16:24:09.110
> 
> 标签：java, design-patterns, coding-style

原程序代码修改：

/*这个方法被定期调用，它从 db 中获取数据，对其执行一些操作，并将结果放入一个文件中，该文件在所有处理结束时通过 ftp 发送*/

```
void pullData(){
    while(!stopped){
        rows= getRowsFromDb();

        for (row: rows){
            newRow= process(row);
            rowsContainer.add(newRow)
        }

        writeToFile(rowsContainer);
        sendFileSomewhere();
    }
} 
```

现在必须修改此代码以允许向其发出以下命令：仅处理 1 行；跳过 1 行（稍后会有更多命令）。为此，应用程序处于挂起模式，并且在获得我上面概述的 2 个命令之一之前，它不会处理行。此外，它可以从暂停模式恢复，然后恢复正常处理。

问题不是如何做到这一点，而是什么是正确的方法。

(1) 有人建议为每个操作设置布尔标志。这是一个非常糟糕的主意。我建议人们出于多种原因避免使用标志（有些可能已经讨论过堆栈溢出）。

(2) 另一个想法是对 isSuspended 使用 bool 标志，对命令使用 enums。这比（1）好，但不是很多，因为应用程序需要检查哪个命令是最后一个命令，以及它是否处于暂停模式并采取相应的行动。

(3) 我正在考虑拆分应用程序并使用策略模式。每个命令都会在应用程序中获得它自己的方法。这有点复杂，但对我来说似乎更干净。

**你有什么建议（你不需要从我列出的选项中选择，我想听听你是如何处理类似情况的）？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:30:42.653

我会使用[ExecutorService](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html)来完成类似的任务

```
private Future lastTask = null;

// only run one task at a time.
if (lastTask != null) lastTask.cancel(true);

lastTask = executorService.submit(new ProcessOnRowRunnable());
// or
lastTask = executorService.submit(new ProcessPendingRowsAndStopRunnable());
// or
lastTask = executorService.submit(new ProcessAllRowsUntilCancelledRunnable())

// later
future.cancel(true); 
```

注意：您的循环必须尊重中断，否则它们不会因为线程被中断而停止。您可以使用

```
while(conditions && !Thread.curentThread().isInterrupted()) {
     // do work
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:52:56.573

我认为您需要一个消息传递 ITC：

```
while true
  msg = getMsgFromQueue
  case msg 
    skipARow: skip();
    processARow: process();
    doSomethingElse: 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T17:19:32.727

在使用有限状态机（或基于枚举的简单状态驱动的子集）之前，我已经做过很多次了——最大的好处是你可以验证你的 FSM 并保持一些可管理的东西，而不会受到*大量的标志问题*

图 3\. 简单状态图：（来自[此处](http://www.javacodegeeks.com/2011/07/java-secret-using-enum-to-build-state.html)）

![图 3\. 简单状态图](../Images/02e07b19dd741f11ce2b7a02647183be.png)

我个人使用 FSM 管理可应用于对象（在本例中为订单）的操作，管理 RFC-822 电子邮件消息的解析，控制硬件；

状态驱动循环的一个非常简单但实用的示例：

```
state = S_Starting;
while(state != S_Finished){

    switch (state){
        case S_Starting:
             // do something 
             state = S_Running;
             break;

        case S_Running
             rows= getRowsFromDb();

             for (row: rows){
                  newRow= process(row);
                  rowsContainer.add(newRow)
             }
             state = S_HandleReceipt;

             break;

         case S_HandleReceipt:
             writeToFile(rowsContainer);
             sendFileSomewhere();

         case S_Paused:
             if (some_other_test){
                 state = S_Running;
             }
             break;
    }
    if (some_test_for_finished) {
        state = S_Finished;
    } else if (some_test_for_pause) {
                  state = S_Paused;
    }
} 
```

参考：

*   [使用枚举来构建状态机](http://www.javacodegeeks.com/2011/07/java-secret-using-enum-to-build-state.html)是一种非常简洁的方法。
*   [支持并发状态的有限状态机](http://today.java.net/article/2009/09/06/finite-state-machine-supporting-concurrent-states)

遗憾的是，C# Hierarchical State Machine [Stateless](http://code.google.com/p/stateless/)还没有移植到 Java，但它是一个出色的工具——我已经使用过很多次了，它很棒。

# ajax - IE9 更改 html ajax 响应

> ID：13844101
> 
> 赞同：0
> 
> 时间：2012-12-12T16:24:11.517
> 
> 标签：ajax, jquery, jquery-forms-plugin, ajaxform

我使用 jQuery 表单插件，我将一些数据发送到服务器，然后接收我在我的页面上插入的 HTML。

```
 $('form').ajaxForm({
        success: function(response) {  }
    }); 
```

响应是一些 HTML。此 HTML 无效。所以这是

```
<tr><td>some</td></tr> 
```

FF 和 Chrome 接收到我从服务器发送的相同 HTML。但是 IE 清除所有

```
<tr> and <td>. 
```

这真是太糟了。我该如何解决？

# javascript - Javascript RegExp 查找数组中所有出现的引用单词

> ID：13844105
> 
> 赞同：-1
> 
> 时间：2012-12-12T16:24:18.093
> 
> 标签：javascript, regex

鉴于我有一句话：

```
var testsentence = 'This "is" a wonderful "sentence" to "test" "stuff"'; 
```

我怎样才能得到这样的数组？

```
var testarray = [ "is", "sentence", "test", "stuff" ] 
```

**更新**

我正在使用 Chromium 控制台尝试您的响应，但到目前为止所有响应都返回：

```
[""is"", ""sentence"", ""test"", ""stuff""] 
```

我不想在我的比赛中有引号。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:48:06.730

要捕获引用的文本，而不是引号...注意`match`不会返回带有`g`修饰符的组（[请参阅此问题](https://stackoverflow.com/questions/844001/javascript-regex-and-submatches)），因此请使用以下内容循环匹配：

```
var testsentence = 'This "is" a wonderful "sentence" to "test" "stuff"';
var pattern = /"([^"]+)"/g;
var match;
var testarray = [];
while(match = pattern.exec(testsentence)) {
    testarray.push(match[1]);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:26:23.037

```
(testsentence.match(/"\w+"/g) || []).map(function(w) {
    return w.slice(1, -1);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T16:27:04.787

```
testsentence.match(/"([^"\s])+"/g) 
```

应该返回引用的所有内容，并避免类似`""`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T16:33:42.033

```
testsentence.match(/"[^"]+"/g); 
```

[**演示**](http://jsfiddle.net/cpRyT/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T16:29:07.883

```
return testsentence.match(/".+?"/g); 
```

# android - 像俄罗斯方块一样组合在一起的混合大小图像视图的 Android 滚动视图

> ID：13844112
> 
> 赞同：2
> 
> 时间：2012-12-12T16:24:34.480
> 
> 标签：android, gridview, size, imageview, scrollview

我要创建的是所有不同大小的图像的滚动视图，它们完美地组合在一起，没有任何明显的行或列。每个图像代表一种食物，每种食物都有一定比例的所有其他用户的投票。投票的百分比决定了 imageviews 的大小。有点棘手的地方是我想让所有这些不同大小的图像视图在图像的混合网格图中整齐地组合在一起。为了让您直观地了解我试图创建的内容，请在 scollview 中 想象类似于此[http://www.todomap.net/的内容。](http://www.todomap.net/)

我通常会发布到目前为止我尝试过的代码，但我的尝试都没有接近。我什至想不出一组好的关键字来搜索类似的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-10T23:05:44.320

只需使用网格布局。您可以根据需要添加具有行跨度和列跨度的视图。你会得到你所指的网站图像的精确复制品。

只需扩展gridLayout。使用以下功能

```
private Spec getSpan(int span) {
    return spec(UNDEFINED, span, FILL);
} 
```

和

```
public void addView(View view, int row_span, int column_span) {
    LayoutParams params = new LayoutParams(getSpan(row_span), getSpan(column_span));
    params.height = square_height*row_span;
    params.width = square_width*column_span;
    addView(view, params);
} 
```

然后您可以将视图添加到网格布局，它会为它们找到最佳位置。请记住定义***行、列、square_width 和 square_height***。

```
setRowCount(rows);
setColumnCount(columns); 
```

# assembly - 布尔值如何在汇编中“注释”？

> ID：13844115
> 
> 赞同：3
> 
> 时间：2012-12-12T16:24:52.740
> 
> 标签：assembly, compilation, x86, boolean-logic

我知道在类 C 语言中，我可以不使用运算符执行布尔`not`运算：(C)

```
int myBool = TRUE;
myBool = !myBool; 
```

但我的问题是：**这是如何在幕后实现的？**我的猜测是使用跳转，但如果过度使用这些可能效率低下：（英特尔 x86 语法）

```
; assume eax holds boolean
  test eax, eax
  jnz short boolTrue
  inc eax ; eax was 0, now 1
  jmp short after
boolTrue: ; eax non-zero
  xor eax, eax ; eax now 0
after: 
```

如图所示，它需要 5 条指令，其中至少有一个跳转和一个按位`and`( `test`)。`if (!!fileHandle)`必须有一种更简单的方法来做到这一点，因为我已经看到代码库出于某种奇怪的原因执行“双重非”（ ）。

所以（如上所述）：**编译器如何`!`在 x86 上执行 boolean ？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:28:13.197

您可以使用[`SETZ`](https://web.itu.edu.tr/kesgin/mul06/intel/instr/sete_setz.html)不需要分支的 (set (if) zero (flag is set)) 来执行此操作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T07:01:24.803

有可能使用进位和无分支序列：

```
sub %eax, 1        ;; this produces carry only when %eax EQ zero
sbb %eax, %eax     ;; 0 when not carry, -1 when carry
and %eax, 1        ;; just get the least significant bit (also neg %eax will do) 
```

对于`eax=!eax`和

```
sub %eax, 1        ;; 
sbb %eax, %eax     
add %eax, 1        ;; [-1, 0] + 1 == [0, 1] 
```

为`eax = !!eax`.

我不知道是否有 3 个指令（或更少）序列使用不会浪费原始变量（或寄存器 eax）的通用算术运算。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T18:42:08.170

在一个好的编译器中，实现诸如 NOT 之类的运算符的方法通常不会仅限于一种代码生成模式。编译器将考虑周围上下文的许多因素，例如编译时优化、源代码和/或紧接在 NOT 运算符之前生成的代码，NOT 运算符是否用于条件上下文（例如，用于 if 语句）或值上下文（用于赋值）。

当在 if 语句中使用时，NOT 运算符更有可能使用分支来实现，因为 if 语句很可能无论如何都需要分支。在值上下文中使用时，NOT 运算符更有可能通过比较和捕获结果来实现（没有分支）。

在较大的表达式中使用 NOT 运算符时，通常可以反转嵌套运算符，因此以一种方式看待它，NOT 运算符根本不会生成任何代码；这可能发生在诸如`a = ! (b > 0)`or的表达式中`if ( ! ( a && b ) )`。即使使用`if ( !a )`，您也可能会发现 a 实际上并没有被 NOT 处理，而只是像 in 一样被测试`if ( a )`，尽管分支条件被颠倒了。

在您给出的具体示例中，我希望一个好的编译器尽最大努力（为生产而不是为调试生成代码），它将在编译时确定应该将常量`0`而不是`myBool`传递给`printf`.

简而言之，一个体面的编译器有许多可用的技术和许多标准来确定使用哪个。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T16:58:09.590

如果您有适当的布尔值，则可以使用`XOR`在两种表示形式之间切换。请注意，`C`它没有布尔值，它只是将零解释为假，其他任何东西都解释为真。`C++`并且`C#`两者都有适当的布尔值，因此它们不需要弄乱非零检查，实际上至少`g++`确实使用了该`XOR`方法。

# c# - 用于快速搜索索引和值的字典、数组或列表

> ID：13844116
> 
> 赞同：0
> 
> 时间：2012-12-12T16:24:57.230
> 
> 标签：c#, .net, arrays, dictionary, listbox

我有 100,000 个字符串，每个字符串都有一个固定的有序索引值，如下所示：

```
Index   String Value
  0     XXXXXXXXXXXXXXXXXXXXX
  1     XXXXXXXXXX
  2     (empty string)
  3     XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX
  4     XXXXX
  5     XXXXXXXXX
  6     XXXXXXXXXXXXXXX
  7     (empty string)
  8     XX
  9     XXXXXXXXXX
 10     XXXXXXXXXXXXXXXXXXXXXXXXXX
 ...    ...
99999   XXXXXXXXXXXXXXXXXXX 
```

我的数据结构必须恰好包含 100,000 个有序条目，并且某些（或许多）字符串值可能是空的，至少最初是这样。每个索引值都是唯一的（顺序整数），除了空字符串，每个字符串值也是唯一的。为了在我的 UI 中显示，我通常只是填充我的数据结构，将列表框绑定到它（指定 DisplayMember 和 ValueMember）。但在这种情况下，我只想显示*不*为空的字符串。所以大概，我需要遍历我的数据结构，并以类似于以下的方式将适用的项目添加到列表框中：

```
foreach (item in MyDataStructure)
{
    if (item.StringValue != string.Empty)
    {
        listBox1.Items.Add(item);
    }
} 
```

能够始终保持每个字符串与其索引值之间的关系对我来说非常重要。如您所料，我的用户将需要添加/编辑/删除字符串。理论上，所有三个操作都归结为同一件事：更新特定索引处的字符串值。要添加新字符串，我需要首先遍历我的数据结构并确保某处有一个空字符串，以便我可以用新字符串替换它。如果不存在空字符串，我的用户将需要首先“编辑”现有字符串或“删除”另一个字符串，因为我们正在处理固定数量的总字符串（100k）。从编程的角度来看，“删除”字符串也只是在我的数据结构中的适当索引处用空/空字符串替换它的问题。

尽我所能预见，我需要一个数据结构，以便于执行以下操作：

1.  将每个非空字符串的索引和字符串值添加到列表框，并将索引用作 ValueMember，将字符串用作 DisplayMember。
2.  快速搜索特定索引的数据结构并检索其字符串值
3.  快速搜索数据结构中的字符串，看看它是否已经存在

考虑到这些事情，任何人都可以推荐一种适合该任务的特定数据结构吗？我最初在想一个带有键/值对的字典来保存每个索引/字符串。然后有人建议只使用数组，因为总大小是固定的，并且数组索引本身也可以用作每个字符串值的索引值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:36:04.430

鉴于您的项目数量固定，`List`并且每个项目都需要一个索引，因此您只需查看一个数组即可。

```
string[] arr = new string[100000]; 
```

您也可以访问`LINQ`该阵列，以便满足您的条件。

```
//1
arr.Where(x => !string.IsNullOrEmpty(x)).Select(str => new { value = Array.IndexOf(arr, str), display = str });
//2
string str = arr[index];
//3
arr.Any(x => x == "SomeString"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:34:59.723

我的第一个想法是[双字典](http://www.codeproject.com/Questions/273361/Csharp-Most-efficient-way-to-implement-dual-Dictio)。基本上保留*两个*字典：

```
Dictionary<int, string> // index-->value
Dictionary<string, int> // value-->index 
```

保持字典同步需要做更多的工作，但如果您根据值进行大量搜索，这可能是值得的。

每次搜索值时，使用数组都需要进行线性搜索，所以我认为它不会是最高性能的。

此外，如果您只是不在任一字典中存储空白/空值，那么您可以直接绑定到它们而无需进行任何过滤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:35:09.617

当然有很多方法可以做到这一点，但是您可以创建一个集合类，而不是`SortedDictionary<int, string>`用非空字符串封装 a 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T17:16:19.457

我认为您以错误的方式进行此操作...您的内存限制为 5mb 并且您将使用整个包含空白字符串的东西？这个数据结构也将保存在 5mb 中吗？这限制了您可以容纳的字符串数量。字符串是如何保存在这个内存中的？某种数据库？我不知道这是用来做什么的，但是您真的认为您的用户会使用所有 100,000 个字符串吗？我对此表示高度怀疑。

我仍然不明白键与字符串值的关系，但对我来说拥有 100,000 个项目的列表确实没有意义，很可能很多都是空字符串。这是对内存的浪费，更不用说它会产生的搜索/插入/删除开销。在考虑速度时，仅保留当前使用的列表会更有意义。

如果可能的话，我建议使用[`NoSQL`](http://en.wikipedia.org/wiki/NoSQL)数据库。您可以插入用户创建的字符串，从而为您提供索引值，并且可以随意更新字符串。如果用户删除/将字符串设置为空字符串，您可以将其从数据库中删除（或者，由于您非常热衷于这个想法，请将其设置为数据库中的空字符串）。继续插入，直到达到 100,000 个字符串的限制。

# rally - SDK2：超时错误？

> ID：13844120
> 
> 赞同：1
> 
> 时间：2012-12-12T16:25:10.970
> 
> 标签：rally

在 SDK 中，我请求查询多个 TestResult 对象：

```
 var createParams = {
        model: 'TestCaseResult',
        autoLoad: true,
        limit: 10000,
        listeners: {
            load: this._foundTestResults,
            scope: this
        },
        context: { project: null },
        filters:    [
                        { property: 'TestSet.Tags.Name', operator: 'contains', value: release },
                        { property: 'TestCase.Method', operator: '=', value: 'Manual' },
                        { property: 'Tester.UserName', operator: '!=', value: 'XXX' }
                    ],
        fetch: ['TestCase', 'FormattedID', 'Verdict'],
        sorters: [ { property: 'Date'} ]
    };

    Ext.create('Rally.data.WsapiDataStore', createParams); 
```

除了清晨或深夜之外，这都有效。当它失败时，我经常得到这个异常：

```
Uncaught TypeError: Cannot read property 'Errors' of undefined sdk.js:4
a.define.setException sdk.js:4
a.define.setException sdk.js:4
Ext.define.processResponse sdk.js:4
b.implement.callParent sdk.js:4
a.define.processResponse sdk.js:4
(anonymous function) sdk.js:4
Ext.apply.callback sdk.js:4
Ext.define.onComplete sdk.js:4
Ext.define.abort sdk.js:4
d.timeout 
```

我需要定义一个错误函数来避免这种情况吗？

另外，我想知道为什么 TestResults 似乎会发生这种情况——起初我认为这是因为在很多情况下我会返回大量对象，但我也发现即使结果很少（大约 100左右）我仍然可以得到这个错误。

更复杂的是，有时我会以不同的方式看到中断（更模糊的错误），我认为这可能与返回的项目数有关（当该数字在 3000 范围内时）。

# ios - 从命令行自动执行 iOS monotouch GUI 测试

> ID：13844122
> 
> 赞同：6
> 
> 时间：2012-12-12T16:25:13.717
> 
> 标签：ios, unit-testing, testing, xamarin.ios, ios-simulator

我正在尝试找出如何从命令行自动测试我的 monotouch 应用程序的 GUI？我的意思是在 CL 的 iOS 模拟器中执行 GUI 测试。我发现的唯一 GUI 测试方法是 Teleric 工具，但它还[没有自动化](https://stackoverflow.com/questions/13496473/run-telerik-test-studio-test-on-the-simulator)

一些技巧？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T15:14:02.683

如果您正在寻找可以帮助您解决 TDD 的问题，您可能对葫芦感兴趣：[https ://github.com/calabash/calabash-ios](https://github.com/calabash/calabash-ios)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:46:55.777

您可以使用该`UIAutomation`框架来实现自动化的 GUI 测试。它不是严格从命令行来的，而是您通过 Instruments 工具运行 Javascript 脚本。它与 Monotouch 完美配合（反正我用过它的时间）。

[关于 UIAutomation 的苹果文档非常深入；并且希望应该涵盖您需要的所有其他内容。](http://developer.apple.com/library/ios/#documentation/DeveloperTools/Conceptual/InstrumentsUserGuide/UsingtheAutomationInstrument/UsingtheAutomationInstrument.html)

举一个脚本的例子（[这个脚本来自 Gist 的 jacksonh；无耻地取自那里）。](https://gist.github.com/2719096)

```
var target = UIATarget.localTarget();
var window = UIATarget.localTarget().frontMostApp().mainWindow ();
var table = window.tableViews () [0];
var results_cell = table.cells () [0]
var run_cell = table.cells () [1];
var passed = false;
var results = '';

run_cell.tap ();

while (true) {

   target.delay (5);

    try {
        results = results_cell.name ();
    } catch (e) {
        UILogger.logDebug ('exception');
        continue;
    }

    if (results.indexOf ('failure') != -1) {
        passed = false;
        break;
    }
    if (results.indexOf ('Success!') != -1) {
        passed = true;
        break;
    }
}

UIALogger.logDebug ('Results of test run:  ' + results);
UIALogger.logDebug ('Passed:  ' + passed); 
```

# javascript - for循环和索引数组不起作用

> ID：13844124
> 
> 赞同：1
> 
> 时间：2012-12-12T16:25:18.267
> 
> 标签：javascript, arrays, loops, for-loop, indexed

我想在每个第一个元素中创建一个带有索引号的二维数组。

（我之前的问题让我想到了这一点>）

这有效：

```
$('#create_indexed_array').click(function() {
    var new_array = [[9,9],[9,9],[9,9],[9,9],[9,9]];
    for (var i = 0; i < 5; i++) {
        new_array[i][0] = i;
    }

    alert(JSON.stringify(new_array));

}); 
```

但这不起作用：

```
$('#create_indexed_array').click(function() {
    var new_array = new Array(new Array());
    for (var i = 0; i < 2; i++) {
        new_array[0][i] = ""; // create cols
    } 
    for (var i = 1; i < 5; i++) {
        new_array[i] = new_array[0]; // create rows
    }
    for (var i = 0; i < 5; i++) {
        new_array[i][0] = i; // set index
    }
    alert(JSON.stringify(new_array));

}); 
```

**编辑：** 我的最终工作版本（到目前为止）：

```
var myArray  = [];
var rows = 5;
var cols = 2;

for (var i = 0; i < rows; i++) {
    myArray [i] = [];
    for (var j = 0; j < cols; j++) {
        if (j==0) myArray [i][j] = i;
        else myArray [i][j] = '';
    }
}

alert(JSON.stringify(myArray)); 
```

(r) 主要由 jfriend 提供；)

仍然不知道为什么不能在开头声明二维数组：myArray = [[]]

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:33:56.637

按照您当前的模式，它将像这样工作：

```
$('#create_indexed_array').click(function() {
    var myArray = [[]];
    for (var i = 0; i < 2; i++) {
        myArray[0][i] = ""; // create cols
    } 
    for (i = 1; i < 5; i++) {
        // create copy of first row in each other row
        myArray[i] = myArray[0].slice(0); 
    }
    for (i = 0; i < 5; i++) {
        myArray[i][0] = i; // set index
    }
    alert(JSON.stringify(myArray));
});​ 
```

工作演示：http: [//jsfiddle.net/jfriend00/vJDPp/](http://jsfiddle.net/jfriend00/vJDPp/)

您必须记住的一件事是，分配一个数组会分配对该数组的引用，而不是一个副本，因此如果您希望数组的每个元素都不同，您必须在物理上制作第一行的副本以放入后续行。我还建议更改名称，`new_array`因为这听起来很像函数名称，以至于让不知道它的人阅读代码时会感到困惑。

* * *

如果您只是想像在第一个代码示例中那样将 2D 数组初始化为所有 9，那么这会简单得多：

```
$('#create_indexed_array').click(function() {
    var myArray = [];
    for (var i = 0; i < 5; i++) {
        myArray[i] = [];
        for (var j = 0; j < 2; j++) {
            myArray[i][j] = 9;
        }
    }
    alert(JSON.stringify(myArray));
}); 
```

或功能版本：

```
function create2DArray(lenX, lenY, initVal) {
    var myArray = [];
    for (var i = 0; i < lenX; i++) {
        myArray[i] = [];
        for (var j = 0; j < lenY; j++) {
            myArray[i][j] = initVal;
        }
    }
    return(myArray);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:31:00.377

为什么不将它与嵌入式 for 循环一起使用？

```
For(var i = 0; i < 2; i++) {
     For(var j = 0; j < 5; j++) {
          new_array[i][j] = i; //set index
     }
} 
```

这样它就可以一次设置索引。你必须先声明它。

之前的问题是您将它视为两个单独的数组、一个项目数组和该项目数组的一个数组。二维数组是 1 个二维数组。

# c++ - 具有继承的朋友类

> ID：13844129
> 
> 赞同：11
> 
> 时间：2012-12-12T16:25:47.953
> 
> 标签：c++, inheritance, friend, access-control

如果我有两个继承类如下：

```
class A
{
    ...
}

class B : public A
{
    ...
} 
```

第三类定义为朋友类A：

```
class C
{
    friend class A;
} 
```

我是否能够从`class B`（也是 type 的对象`A`）访问所有成员，`class C`就好像我首先定义`class B`了朋友类一样？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-12-12T16:40:14.817

`friend`ship 既不是继承的也不是传递的。这是两个类之间严格的一对一关系。

```
class A {
  friend class B;  
  int Aries;
};

class B {
  friend class C;  
  int Taurus;
};

class C {
  int Leo;
  void Capricorn() {
    A a;
    a.Aries = 0;  // this wont work, C is not a friend of A.
                // friendship is not transitive
  }
};

class D : public C {
  void Gemini() {
    B b;
    b.Taurus = 0;  // this wont work, D is not a friend of B.
                   // friendship is not inherited
  }
};    

class E : public B {
  void Scorpio() {
    C c;
    c.Leo = 0; // this wont work either, friendship is not inherited
  }
}; 
```

参考：“C++ 编程语言”Bjarne Stroustrup

更多解释（我的）：如果`friend`船不是一对一的，那将是封装的结束。请注意，只有当类声明声明为时，`B`类才能访问`private`的成员。无法强制发货。`A``A``B``friend``B``friend``A`

现在，如果友谊可以被继承，那么某人只需要继承`B`就可以访问 的私有成员`A`，而没有`A`任何发言权来阻止它。此外，允许`friend`ship 是可传递的会导致其他问题，因为 now`B`可以有一个`friend` `C`，而谁又可以有一个`friend` `D`，一直到`Z`。所有`B`, `C`, `D`, ...`Z`现在都可以访问`A`的`private`成员，这将是一场灾难。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-14T04:16:09.767

由于某种原因，每个人都忘记了您可以访问派生自友谊给予者的类的虚拟私有函数。

```
#include <iostream>

class Friend;
class Parent
{
    friend class Friend;
private:
    virtual void nameYourself() { std::cout << "Parent" << std::endl; }
};

class Child : public Parent
{
private:
    virtual void nameYourself() { std::cout << "Child" << std::endl; }
};

class Friend
{
public:
    void foo(Parent *p) { p->nameYourself(); }
};

int main()
{
    Parent p;
    Child c;
    Friend f;
    f.foo(&p);
    f.foo(&c);
    return 0;
} 
```

运行上述代码的输出是：

```
Parent
Child 
```

它起作用的原因很棘手，并且与该指针的传递方式有关（查找 vtables）。如果您从函数声明中删除“virtual”关键字，您将失去此能力。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T16:50:16.580

引用标准 C++11 11.3/10：

> 友谊既不是遗传的，也不是传递的。

这意味着派生类的朋友和朋友的朋友都不能获得友谊的好处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-10-14T23:36:13.660

在上面我发现有用的蒙面人答案/代码中添加了一个示例：

```
class B {
  friend class F;
  friend class E;
  int Taurus;
};

class E : public B {
  int Egg;
};

class F {
    void Foo () {
       B b;
       b.Taurus = 4;  //Works F is friend of B (of course)
       E e;
       e.Taurus = 6; // Works E is derived from B and F is friend of B 
                  // Taurus is private member of B.
       e.Egg = 5; // Does not work, F is friend of Base Class B but not
               // E, so can't access members of the derived class
    }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T16:28:06.820

我认为这取决于。您将可以从 B 的 A 部分（切片部分）访问。如果你定义了 B 自己的函数，我想你不会。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T16:37:54.310

我不明白您要做什么，但是 B 是 A 的超类。不是对象。B和C之间没有任何继承关系

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-12T16:46:24.967

*   否 - 它不是继承的（见下文）；如果 B 是 A 的子类并且 C 是 A 的朋友，则 B 无权访问 C 的私有成员，包括继承的成员。
*   同样，如果 A 是 C 的朋友，或者如果 A 和 C 都是彼此的朋友，这不会让 B 访问 C 的私有成员，包括继承的成员。
*   此 URL 声明朋友类的子类不继承朋友关联：

    [C++朋友继承？](https://stackoverflow.com/questions/7371087/c-friend-inheritance)

*   这适用于两个“关联（主类自己的和与主类友好的其他类）”——这里的问题是后一种情况。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-03-15T15:39:55.950

不，您不能`C`直接调用类方法，但可以通过指针访问它们。`A`类应该被修改：

```
class C
{
  void method()
  {
  }
  friend class A;
};

class A
{
protected:
  constexpr static void (C::*f)() = &C::method;
};

class B : public A
{
  B()
  {
    //C().method(); ← This wont work
    (C().*f)(); // ← This works fine
  }
}; 
```

访问数据成员和静态数据也很简单

# php - 如何执行搜索结果

> ID：13844131
> 
> 赞同：0
> 
> 时间：2012-12-12T16:26:10.207
> 
> 标签：php, sql

> **可能重复：**
> [没有双重查询的 MySQL 分页？](https://stackoverflow.com/questions/818567/mysql-pagination-without-double-querying)

我的网站上有一个搜索框，其中包括分页。

要设置分页，我必须知道匹配的数量，所以我考虑了两个选项：

1.  使用 2 个查询：查询页面中的 X 个匹配项（使用`limit`），以及一个查询总共有多少匹配项。
2.  使用 1 查询：获取所有匹配项，然后我知道行数，然后通过使用获取所需的行`array_slice`

我认为解决方案＃2更好，你怎么看？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:30:03.867

在 MySQL 中，您可以添加`SQL_CALC_FOUND_ROWS`到查询中，然后运行`SELECT FOUND_ROWS();`：

[http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_found-rows](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_found-rows)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:34:45.767

答案实际上取决于您预期匹配的行数以及存储在行中的数据大小。

传统的分页方法是使用 SQL`LIMIT`子句返回整个结果集的子集。如果您实际上需要知道全部记录数（以显示全部“页数”），那么您还需要进行 a`SELECT COUNT(primary_key_field) FROM table WHERE [search condition]`以获得该信息。

这通常会提供最佳结果，因为 COUNT 查询应该能够非常快速地执行，并且只要您在用于排序的字段上有索引（因为您总是想要一个`ORDER BY`以及`LIMIT`保证订单）。这也意味着您需要在应用程序的内存中保留的记录更少。

我确实认为在某些用例中，单一查询方法可能会更好（即不会有大量潜在行，行数据大小很小），这样您就没有大量的数据传输时间检索完整结果集的内存使用情况。

真的，您只需要在您的应用程序中测试一些场景，看看什么最适合您。

# php - 如何通过 Facebook API 发送“掌声”（可重复的“like-esque”动作）？

> ID：13844136
> 
> 赞同：0
> 
> 时间：2012-12-12T16:26:23.210
> 
> 标签：php, javascript, facebook, codeigniter

我正在尝试将 Facebook 功能整合到一个网站中。我很擅长 JS 和 PHP .. 该站点基于 CodeIgniter，到目前为止我已经实现了 JS SDK，但没有理由实现 PHP SDK。

我以前没有 Facebook 集成的经验。在网上很难找到*当前*信息，所以我会在这里问。

我拥有的是一个面向现场爵士音乐家的网站。音乐家已经设置了个人资料，我现在添加了一个字段来将他们的 Facebook ID 保存在 SQL 中。该网站提供了一个大型的玩家数据网格，可以以各种方式排序，并通过漂亮的 AJAXy 方式来显示额外的信息。

我想做的是让“观众成员”也能够在演出时访问该网站，登录并向个别玩家发送“掌声”。这不是“喜欢”，因为我希望他们能够在不同的夜晚为相同的球员鼓掌。（有时间差）。“掌声”也将作为“积分系统”存储在现场。

我正在做我的研究，只是想在正确的方向上寻找有用的推动力。

1.  “掌声”可以采取什么形式/机制？
2.  “观众”是否有可能触发在他的墙上张贴的动作，以及他鼓掌的音乐家的墙上？
3.  仅使用 JS SDK 就可以实现这一点吗？

* * *

**编辑***

澄清一下——我想最终包括一个城市的所有现场音乐家，并以某种方式根据良好的表演/演出给他们“评分”。不仅仅是一次性的“喜欢”/“我是粉丝”指标。但可重复的“你今晚打得非常好”点。

# codeigniter - 如何忽略 CodeIgniter 的 do_upload() 中的一些错误

> ID：13844137
> 
> 赞同：0
> 
> 时间：2012-12-12T16:26:34.787
> 
> 标签：codeigniter

注册新用户时，用户可以上传照片或将其保留为默认值，但在 CI 中如果没有选择文件则`$this->upload->do_upload()`返回 false。我怎样才能绕过这个错误。下面是我的方式：

```
if($this->form_validation->run()==FALSE)
            {
                $this->load->view('add_item_form', array('error' =>''));
            }
            else
            {
                $config['upload_path'] = 'images/';
                $config['allowed_types'] = 'gif|jpg|jpeg|png';
                $config['max_size'] = '100';
                $config['max_width'] = '1024';
                $config['max_height'] = '768';

                $this->load->library('upload', $config);
                $no_photo_error = "<p>You did not select a file to upload.</p>";

                if(!$this->upload->do_upload() AND $this->upload->display_errors() != $no_photo_error)
                {
                    $error = array('error' => $this->upload->display_errors());
                    $this->load->view('add_item_form', $error);
                }
                else
                {
                    $data['title'] = 'Add Item';
                    $this->load->view('success', $data);
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:52:44.833

```
// Check if we are even trying to upload anything
if ( ! ($_FILES AND $_FILES['userfile']['name']))
{
      // do_upload() logic here
}
else
{
      // no files selected for upload
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T06:39:27.033

试试这个

```
 if($this->form_validation->run()==FALSE){
            $this->load->view('add_item_form', array('error' =>''));
        }
        else
        {
            $config['upload_path'] = 'images/';
            $config['allowed_types'] = 'gif|jpg|jpeg|png';
            $config['max_size'] = '100';
            $config['max_width'] = '1024';
            $config['max_height'] = '768';

            $this->load->library('upload', $config);
            $no_photo_error = "<p>You did not select a file to upload.</p>";

            if(!$this->upload->do_upload() AND $this->upload->display_errors() != $no_photo_error)
            {
                $error = array('error' => $this->upload->display_errors());
                $this->load->view('add_item_form', $error);
            }elseif(empty($this->upload->data())){
            //Check if the file is uploaded .

                $data['title'] = 'Add Item';
                $this->load->view('success', $data);
    }
            else
            {
                $data['title'] = 'Add Item';
                $this->load->view('success', $data);
            }
        }
    } 
```

# actionscript-3 - AS3 为监听器添加回调

> ID：13844138
> 
> 赞同：0
> 
> 时间：2012-12-12T16:26:36.920
> 
> 标签：actionscript-3, button, callback, listener

最近有人要求我更改我制作的一个小型 Flash 应用程序，以使用外部回调而不是使用嵌入式按钮。

我试图自动化这个过程并想出了这个功能：

```
 /**
     * Add an External callback for all PUBLIC methods that listen to 'listenerType' in 'listenersHolder'.
     * @param   listenersHolder - the class that holds the listeners we want to expose.
     * @param   listenerType    - a String with the name of the event type we want to replace with the external callback.
     */
    public static function addCallbacksForListeners(listenersHolder:*, listenerType:String):void
    {
        // get the holder description
        var description:XML = describeType(listenersHolder);
        // go over the methods
        for each(var methodXML:XML in description..method)
        {
            // go over the methods parameters
            for each(var parameterXML:XML in methodXML..parameter)
            {
                // look for the requested listener type
                var parameterType:String = parameterXML.@type;
                if (parameterType.indexOf(listenerType) > -1)
                {
                    var methodName:String =  methodXML.@name;
                    trace("Found: " + methodName);
                    // get the actual method
                    var method:Function = listenersHolder[methodName];
                    // add the callback
                    try 
                    {
                        ExternalInterface.addCallback(methodName, method);
                        trace("A new callback was added for " + methodName);
                    } 
                    catch (err:Error)
                    {
                        trace("Error adding callback for " + methodName);
                        trace(err.message);
                    }
                }
            }
        } 
```

在使用此功能之前，我必须将侦听器的功能更改为公共，添加 null 默认参数，当然还有删除/隐藏视觉效果。

例如，来自：

> 私有函数 onB1Click(e:MouseEvent):void

至 ：

> 公共函数 onB1Click(e:MouseEvent = null):void

将此行添加到 init/onAddedToStage 函数：

> addCallbacksForListeners(this, "MouseEvent");

并从舞台上删除按钮或只是评论添加它的行。

我的问题是：你能找到更好/更有效的方法吗？欢迎任何反馈..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T00:30:34.233

也许你应该让 javascript 调用具有不同 functionName 参数的单个方法。然后你只需要添加一个回调，你不需要公开所有这些函数。

```
ExternalInterface.addCallback('callback', onCallback);

public function onCallback(res:Object)
{
    var functionName:String = res.functionName;
    this[functionName]();
} 
```

# sql-server-2008 - SSRS - 动态字段

> ID：13844144
> 
> 赞同：0
> 
> 时间：2012-12-12T16:26:56.143
> 
> 标签：sql-server-2008, tsql, ssrs-2008

鉴于：

*   SQL Server 2008 R2
*   SSRS 2008
*   卑微的程序员

考虑两个表：

```
CREATE TABLE PERSON
(
    PersonID INT,
    Name VARCHAR(100)
)

CREATE TABLE PERSON_EXTENDED
(
    PersonExtendedID INT,
    PersonID INT,
    DOB DATETIME,
    FavoriteColor VARCHAR(100)
) 
```

进一步考虑以下查询连接表，表明它们的关系。

```
SELECT
    *
FROM
    PERSON AS P
    JOIN PERSON_EXTENDED AS PE ON (P.PersonID = PE.PersonID) 
```

为了给您提供总体概念，我想创建一个存储过程来填充 SSRS 报告的字段选择参数。然后使用选定的参数将其作为参数传递给另一个存储过程，该过程使用选定的字段创建报告。

我的想法最初类似于以下内容，但是产生了两个问题。首先是两个表中 1 和 2 的重复序数。其次是重复的列名“PersonID”。

```
SELECT
    C.COLUMN_NAME,
    C.ORDINAL_POSITION
FROM
    INFORMATION_SCHEMA.columns AS C
WHERE
    C.TABLE_NAME = 'PERSON'
    OR C.TABLE_NAME = 'PERSON_EXTENDED' 
```

有什么想法吗？额外的功劳是以可扩展的方式执行此操作并包含某种“显示名称”字段，因此最终用户不必处理 PersonID，但可以处理“个人身份”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T21:43:49.013

[好文章！](http://sql-bi-dev.blogspot.com/2010/10/displaying-dynamic-columns-in-ssrs.html)

本文是朝着正确方向迈出的一大步，实际上可能是完整的解决方案。对于处于类似情况的其他任何人来说，它肯定是足够相关的。

其中一条评论特别耐人寻味：

> 嗨 Hari，我在处理多值参数时使用了另一种形式的隐藏列表达式。
> 
> =IIF(Filter(Parameters!MultiOption.Value,"6",true).Length>0,False,True)
> 
> 这意味着如果在参数列表中选择了该列，则显示该列。在这个例子中，6 是标签的 id。
> 
> 我有这么小的数据集，所以去定制查询的麻烦并不重要。

我担心这将是巨大的资源密集型。

# sql - TRANSACT SQL 从 DateDiff 生成多行

> ID：13844145
> 
> 赞同：1
> 
> 时间：2012-12-12T16:26:55.457
> 
> 标签：sql, sql-server, database, datediff

我有下表

```
table event(
   start_tstamp [datetime],
   stop_tstamp [datetime],
   exe_name [nvarchar](50),
   machine_name [nvarchar](30)
) 
```

我需要从此表生成一个标量表，其中包含以下形式的*start_tstamp*和*stop_tstamp之间每小时差异的一行信息：*

```
table event_temp(
   day_occured [datetime],
   hour_occured [tinyint],
   exe_name [nvarchar](50),
   machine_name [nvarchar](30)
) 
```

例如表**事件**包含两行

```
"2012/12/10 07:00", "2012/12/10 09:00", "notepad.exe", "testmachine"
"2012/12/11 15:00", "2012/12/11 18:00", "notepad.exe", "foomachine" 
```

结果**event_temp**应该如下

```
"2012/12/10 00:00", 7, "notepad.exe", "testmachine"
"2012/12/10 00:00", 8, "notepad.exe", "testmachine"
"2012/12/10 00:00", 9, "notepad.exe", "testmachine"
"2012/12/11 00:00", 15, "notepad.exe", "foomachine"
"2012/12/11 00:00", 16, "notepad.exe", "foomachine"
"2012/12/11 00:00", 17, "notepad.exe", "foomachine"
"2012/12/11 00:00", 18, "notepad.exe", "foomachine" 
```

然后，我需要将**event_temp**表与现有日历表连接起来，该表返回与**event_temp中的日期匹配的日期列表**

```
table calendar(
   day_occured [datetime],
   hour_occured [tinyint],
) 
```

那将只包含：

```
"2012/12/10 00:00", 0
"2012/12/10 00:00", 1
"2012/12/10 00:00", 2
"2012/12/10 00:00", 3
"2012/12/10 00:00", 4
"2012/12/10 00:00", 5
... 
```

结果基本上应该是在某个时间运行的记事本实例的列表。

```
table result(
   day_occured [datetime],
   hour_occured [tinyint],
   instances_running [int]
) 
```

任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:18:06.913

编辑：正如 Clockwork-Muse 指出的那样，我的最后一个答案有一些缺陷。这是一种不同的方法。

不包括零小时...

```
DECLARE @MinDate datetime = (SELECT TOP 1 start_tstamp FROM [event] ORDER BY start_tstamp ASC)
DECLARE @MaxDate datetime = (SELECT TOP 1 stop_tstamp FROM [event] ORDER BY stop_tstamp DESC)

WITH Dates AS (
    SELECT @MinDate AS dt
    UNION ALL
    SELECT DATEADD(hh, 1, dt)
      FROM Dates s
     WHERE DATEADD(hh, 1, dt) <= @MaxDate)

SELECT 
  CONVERT(date,d.dt,101) AS [day_occured],
  DATEPART(hh, d.dt) AS [hour_occured],
  COUNT(*) AS [instances_running]
FROM @Event e
JOIN Dates d ON e.start_tstamp <= d.dt
        AND e.stop_tstamp  > = d.dt 
GROUP BY d.dt
OPTION (MAXRECURSION 0) 
```

包括零小时...

```
SET @MinDate = CONVERT(date,@MinDate,101)
SET @MaxDate = CONVERT(date, DATEADD(dd,1,@MaxDate))
SET @MaxDate = DATEADD(MILLISECOND, -2,@MaxDate)

SELECT 
  CONVERT(date,d.dt,101) AS [day_occured],
  DATEPART(hh, d.dt) AS [hour_occured],
  SUM(CASE ISNULL(exe_name,'-1') WHEN '-1' THEN 0 ELSE 1 END ) AS [instances_running]
FROM [event] e
FULL JOIN Dates d ON e.start_tstamp <= d.dt
         AND e.stop_tstamp  >= d.dt 
GROUP BY d.dt
OPTION (MAXRECURSION 0) 
```

# c++ - lambdas 应该能够看到本地类吗？

> ID：13844148
> 
> 赞同：3
> 
> 时间：2012-12-12T16:27:07.817
> 
> 标签：c++, visual-c++, c++11, lambda, visual-studio-2012

下面给出了`'one': identifier not found`VS2010和VS2012中的错误

```
int main()
{
    struct one {};
    [](){ return one(); }();
} 
```

并稍作调整...

```
int main()
{
    struct one {};
    [](){ one uno; return uno; }();
} 
```

VS2010/VS2012 都因此代码导致编译器崩溃。

所以，问题是（忽略编译器崩溃），lambas 是否应该能够看到本地类？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:45:06.757

是的，VS 不正确。从 5.1.2p7 开始：

> [...] 出于名称查找的目的，[...]*复合语句在**lambda-expression*的上下文中被考虑。

# c++ - 在 C++ 预处理器中拆分参数

> ID：13844149
> 
> 赞同：9
> 
> 时间：2012-12-12T16:27:12.867
> 
> 标签：c++, macros, c-preprocessor

我正在处理的一些遗留代码有一个宏，它返回一个逗号分隔的列表，旨在用作函数参数。这很难看，但配置文件包含许多这些，现在很难更改。

```
#define XY1 0,0
#define XY2 1,7
...

void fun_point(x,y);

fun_point(XY1); 
```

只要它是一个被调用的函数，它就可以正常工作。但是，当尝试使用参数调用另一个宏时，整个字符串被视为一个参数，而不是在逗号处拆分为两个参数

```
#define MAC_POINT(x,y) (x+y)
MAC_POINT(XY1) #not expanded by preprocessor 
```

在不更改 XY 定义的情况下是否有解决此问题的方法？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-12T16:37:56.213

有点。以下作品：

```
#define MAC_POINT(x,y) (x+y)
#define MAC_POINT1(xy) MAC_POINT(xy)
#define XY x,y
MAC_POINT(x,y)
MAC_POINT1(XY) 
```

但是，如果您只有一个参数，则必须从 MAC_POINT 更改为 MAC_POINT1。

另一种可能性是：

```
#define MAC_POINT(x,y) (x+y)
#define MAC_POINT1(xy) MAC_POINT xy
#define XY x,y
MAC_POINT1((x,y))
MAC_POINT1((XY)) 
```

现在您必须更改对宏的所有调用，但至少它们是一致的。

# list - 在 OCaml 中，为什么列表构造函数 :: 不是运算符

> ID：13844151
> 
> 赞同：10
> 
> 时间：2012-12-12T16:27:15.453
> 
> 标签：list, constructor, ocaml

我今天正在阅读 Jason Hickey 的在线书籍“Objective Caml 简介”，在关于 Functor 的章节（第 140 页）中，我在 Set functor 的定义中遇到了以下行：

```
let add = (::) 
```

运行代码会导致一条不太明显的“语法错误”错误消息。在将行中的插件插入 ocaml 顶层之后，我发现这`::`实际上不是运算符，而是类型构造函数。

但是，根据我对 Haskell 的了解，等效的`:`构造函数也可以被视为运算符（函数）。

```
Prelude> :t (:)
(:) :: a -> [a] -> [a] 
```

我的问题是：OCaml 构造函数从来都不是一流的值（暗示书中的代码从一开始就是错误的），为什么会这样？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-12T16:57:13.593

在 OCaml 的前身 Caml Light 中，过去构造函数在部分应用时被提升为函数的情况。我不确定为什么在迁移到 OCaml 时会删除此功能，我也对此感到遗憾，但我听到的解释是“没有人使用它”。所以没有`List.map Some foo`了……

`::`作为代数数据类型构造函数，它有点特殊，因为它是唯一的中缀构造函数（在解析器中硬编码），但在其他方面的行为与任何其他数据类型构造函数一样。

# ruby-on-rails - rails form_tag 不提交

> ID：13844152
> 
> 赞同：0
> 
> 时间：2012-12-12T16:27:16.860
> 
> 标签：ruby-on-rails, jquery-plugins

我有以下表格用于使用 Ajax 发布数据。

```
<%= form_tag(check_answer_path, :id =>'myForm', :method => 'post', :remote => true) do %>
   some form fields here...
<%= submit_tag('Next', :class => 'btn btn-primary') %></td> 
```

但是当我单击“下一步”按钮时，表单没有提交。令我惊讶的是，当我删除 :id 和 :remote 属性时，表单提交没有问题（但页面重新加载我不想要）。

目标：我想提交`ajaxForm()`用于处理回调的表单，即`$("#myForm").ajaxForm()`。所以我需要`:remote`属性，我还需要识别我的表单（使用`:id`属性）。

`:id`当我包含和`:remote`属性时，为什么我的表单没有提交？

我正在使用 rails 3.2.8 和 jquery-rails。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:40:44.020

将远程添加到表单标签意味着它将使用 JS 发送请求。

所以它实际上是在提交表单，但它没有以预期的方式提交。在您的控制器中添加以下内容：

> ```
>  respond_to do |format|
>    format.js
>    format.html
>  end 
> ```

并且您将能够响应该请求在您的视图中放置一个 file.js.erb 并放置所需的 js 代码来完成请求。

希望有帮助。

# java - 扩展每列以适合文本的 java 代码（自动调整功能）

> ID：13844154
> 
> 赞同：0
> 
> 时间：2012-12-12T16:27:21.277
> 
> 标签：java, excel, apache-poi

我有现有的 java 代码，它将获取应用程序中生成的表格并将其导出到 Excel 电子表格，但现在它正在按原样写入 Excel 电子表格，没有任何格式。我希望能够添加到 java 代码以扩展每一列（如双击 Excel 中的列）以适应文本。我该如何做到这一点？

这是写入 excel 电子表格的代码部分

```
 /**
 *  This method writes data to the row.
 *
 *  @param header   The header row for the data to be written.
 *
 *  @param data     The data rows to be written.
 *
 *  @param rowIndex The starting index for the row.
 *
 *  @param columnIndex  The starting index for the column.
 *
 *  @throws IOException The file cannot be written to.
 *
 *  @throws FileNotFoundException   The file cannot be found or open.
 */

private HSSFSheet dataSheet;
private int processDataToSheet(List<Excel_o> header, List<List<Excel_o>> data, int rowIndex, int columnIndex)
                    throws IOException, FileNotFoundException
{
    //process header data
    processRowData(dataSheet, rowIndex, header, columnIndex);

    //write data to sheet
    for(List<Excel_o> singleList: data){
        //process data for the whole row.
        processRowData(dataSheet, ++rowIndex, singleList, columnIndex);
    }

    return rowIndex;
} 
```

我查找了可用于 apachi.poi.hssf.usermodel.HSSFSheet （我的代码中的数据表变量）的方法，它说它有一个名为 autoSizeColumn 的方法，但是当我查看 Eclipse 中的下拉菜单时，没有这样的选项可用。这是有原因的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:31:34.250

您可以使用 autoSizeColumn() 方法，请参阅[此处的 API 参考](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFSheet.html#autoSizeColumn%28int%29)

# magento - 在 Magento 中清除 URL 键

> ID：13844155
> 
> 赞同：4
> 
> 时间：2012-12-12T16:27:22.523
> 
> 标签：magento

我已经为添加了自己产品的店主设置了 magento 安装。不幸的是，他不理解 URl 键字段。当他复制产品时，现在每个产品都有相同的 URL，其编号递增 /product-1234.html，下一个是 /product-1235.html。由于他有将近 2k 的产品，手动调整所有 url 键会很麻烦。有没有办法在magento（或直接在DB上）清除这个而不破坏商店。似乎如果我删除一个 URL 键，magento 会自动生成一个，这对我来说很好。

编辑：好的，所以我找到了如何通过清除数据库表（catalog_product_entity_varchar）中的某些字段来重置 URL 键，但现在我需要 Magento 使用产品名称创建新字段。有任何想法吗？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T18:19:35.073

这是一个甚至没有经过测试的快捷方式。如果有很多产品可能需要很长时间，但它也会同时更新重写记录。将其复制到站点根目录中的 .php 文件中并执行它。

```
<?php
require 'app/Mage.php';
Mage::app();

$products = Mage::getModel('catalog/product')->getCollection();
foreach ($products as $product) {
    $product->setUrlKey($product->getSku())
            ->save();
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-12T20:45:56.177

最后以clockworkgeek的示例为基础，使用以下代码修复它。感谢那！

```
<?php
require 'app/Mage.php';
Mage::app();
$amount = 0;
$model = Mage::getModel('catalog/product');
$products = $model->getCollection();
foreach ($products as $product) {
    $model->load($product->getId());
    $product->setUrlKey($model->getName())->save();
    set_time_limit();
    $amount++;
} 
```

# ruby - 简单：需要帮助重构这种看起来很尴尬的方法

> ID：13844157
> 
> 赞同：-1
> 
> 时间：2012-12-12T16:27:35.950
> 
> 标签：ruby, ruby-on-rails-3, refactoring

我该如何清理这个？它读起来很尴尬，而且太长了。

```
def report_total(feed_event, advisor)
  count = 0
  advisor.activity_feed_events.each do |lead|
    if lead == SignupFeedEvent
      count += 1
    else
      if lead.is_a?(feed_event) 
        if lead.event_date > (Time.now - 7.days)
          count += 1
        end
      end
    end
  end
  return count
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:32:03.313

也许你可以使用：

```
def report_total(feed_event, advisor)
  advisor.activity_feed_events.count do |lead|
     lead == SignupFeedEvent ||
         (lead.is_a?(feed_event) && lead.event_date > (Time.now - 7.days))
  end
end 
```

做同样的事情，更少的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:45:28.360

阅读一本好书，例如 Refactoring Ruby 版。

良好的 OO 实践建议不要检查类相等或 is_a?，而是检查对象的功能，例如使用 respond_to?。

```
if lead.respond_to?(:event_date) ... 
```

# python - 对工作日文本进行排序

> ID：13844158
> 
> 赞同：4
> 
> 时间：2012-12-12T16:27:48.090
> 
> 标签：python, sorting, datetime, python-2.7

我有列表`["Tue", "Wed", "Mon", "Thu", "Fri"]`作为列表，我想将其设为 `["Mon", "Tue", "Wed", "Thu", "Fri"]`.

这个怎么排序？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-12T16:44:07.037

效率不是很高，但如果你有一个他们应该在的顺序列表......

```
>>> m = ["Mon", "Tue", "Wed", "Thu", "Fri"]
>>> n = ["Tue", "Wed", "Mon", "Thu", "Fri", "Tue", "Mon", "Fri"]
>>> sorted(n, key=m.index)
['Mon', 'Mon', 'Tue', 'Tue', 'Wed', 'Thu', 'Fri', 'Fri'] 
```

请注意，如果某个值存在于 中，那么这将引发`n`异常`m`。

或者将它们放入以名称为键并以顺序为值的字典中，然后`key=your_dict.get`用作键...例如：

```
>>> d = {name:val for val, name in enumerate(m)}
>>> d
{'Fri': 4, 'Thu': 3, 'Wed': 2, 'Mon': 0, 'Tue': 1}
>>> sorted(n, key=d.get)
['Mon', 'Mon', 'Tue', 'Tue', 'Wed', 'Thu', 'Fri', 'Fri'] 
```

这不会引发异常（在 Py3.x 上尝试排序时会出现错误除外`None`），但您可以使用 partial to sensible, sort before or after default，或获得等效行为`list.index`, use`key=d.__getitem__`或相似的

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:42:39.553

查找并用 1 替换星期一的所有实例，用 2 替换星期二的所有实例，等等排序、重新分配。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:29:51.547

[http://wiki.python.org/moin/HowTo/Sorting/](http://wiki.python.org/moin/HowTo/Sorting/)

您正在寻找词汇排序。作为学习事项，编写自己的函数也很有趣；）

编辑：好的，你只需要一个函数，在一天内返回它的星期几。您可以在函数中简单地使用天字符串数组，然后使用天数周数对元素进行排序，就像老板一样。

# java - JSR303 复合注解

> ID：13844161
> 
> 赞同：4
> 
> 时间：2012-12-12T16:27:58.610
> 
> 标签：java, bean-validation

我创建了一个由@Digits 和@Min 组成的复合注释

```
@Digits(integer=12, fraction=0)
@Min(value=0)
@ReportAsSingleViolation
@Documented
@Retention(RetentionPolicy.RUNTIME)
@Target( { FIELD, METHOD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER })
@Constraint(validatedBy={})
public @interface PositiveInt {
     String message() default "{positive.int.msg}";
     Class<?>[] groups() default {};
     Class<? extends Payload>[] payload() default {};
} 
```

我的问题是，我想在使用 PositiveInteger 时指定 @Digits 'integer' 值的地方重用这个注释

例子

```
public Demo{
    @PositiveInteger(integer=1)
    private Integer num1;

    @PositiveInteger(integer=2)
    private Integer num2;
} 
```

其中 num1 可以是 1-9，而 num2 可以是 1-99。

这甚至可能吗，如果可以，我该怎么做？

目前，我必须提供一个自定义 ConstraintValidator ，我将在其中获得@Digits 和 @Min 的验证码

```
@Documented
@Retention(RetentionPolicy.RUNTIME)
@Target( { FIELD, ANNOTATION_TYPE, PARAMETER })
@Constraint(validatedBy=PositiveIntConstraintValidator.class)
public @interface PositiveInt {
         String message() default "positive.int.msg";
     Class<?>[] groups() default {};
     Class<? extends Payload>[] payload() default {};

     int integer() default 1;
}

public class PositiveIntConstraintValidator implements ConstraintValidator<PositiveInt, Number> {
    private int maxDigits;

    @Override
    public void initialize(PositiveInt constraintAnnotation) {
    maxDigits = constraintAnnotation.integer();

    if (maxDigits < 1){
        throw new IllegalArgumentException("Invalid max size.  Max size must be a positive integer greater than 1");
    }
}

@Override
public boolean isValid(Number value, ConstraintValidatorContext context) {
    if (value == null){
        return true;
    }
    else if (value instanceof Long || value instanceof Integer || value instanceof Short || value instanceof BigInteger){
        String regex = "\\d{"0," + maxDigits + "}";
        return Pattern.matches(regex, value.toString());
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-12T23:17:26.737

您可以使用[@OverridesAnnotation](http://beanvalidation.org/1.1/spec/#constraintsdefinitionimplementation-constraintcomposition)：

```
@Digits(integer=0, fraction=0)
@Min(value=0)
@ReportAsSingleViolation
@Documented
@Retention(RetentionPolicy.RUNTIME)
@Target( { FIELD, METHOD, ANNOTATION_TYPE, CONSTRUCTOR, PARAMETER })
@Constraint(validatedBy={})
public @interface PositiveInteger {
    String message() default "{positive.int.msg}";
    Class<?>[] groups() default {};
    Class<? extends Payload>[] payload() default {};

    @OverridesAttribute(constraint=Digits.class, name="integer")
    int digits();
} 
```

这样，给出的值`@PositiveInteger#digits()`将传播到`@Digits`.

# python - Python中文件的行列表？

> ID：13844162
> 
> 赞同：-1
> 
> 时间：2012-12-12T16:27:58.763
> 
> 标签：python, list

有没有办法读取文件的行并将其转换为 Python 列表？例如：

一些文件：

```
Hello
World 
```

脚本：

```
>>>x = someFile.listLines()
>>>print x
['Hello', 'World'] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:28:25.387

你想要`readlines`一个`file`对象的方法。

```
fileobject = open(datafilename)
lines = fileobject.readlines() 
```

请注意，您（通常）不需要这个。您可以直接遍历文件对象，并且不必将整个文件存储在内存中：

```
for line in fileobject:
    #do something with the line 
```

*完成后不要忘记关闭文件对象！*（上下文管理器对此非常有帮助）

另外，请注意，这些行将以换行符 ( ) 结尾，但您可以使用列表中的字符串或系列中的某些变体`"\n"`轻松过滤掉它。例如：`.rstrip("\n")``str.strip`

```
stripped_lines = [ line.rstrip("\n") for line in fileobject ] 
```

* * *

换句话说，

```
lines = fileobject.readlines() 
```

给你同样的东西

```
lines = list(fileobject) 
```

# magento - Magento 购物者主题“添加到购物车”上的多个购物车顶部标题

> ID：13844164
> 
> 赞同：2
> 
> 时间：2012-12-12T16:28:09.580
> 
> 标签：magento

我正在使用 Magento Shopper 主题 ( [http://shopper.queldorei.com/](http://shopper.queldorei.com/) )。

当我将产品添加到我的购物车时，它会添加多个元素

```
<div class="cart-top-title">
<a href="https://droppinstudio.dk/horsepony/index.php/checkout/cart/" class="clearfix">
<span class="icon"></span>Cart</a></div> 
```

我发现是 jQuery 在这里犯了错误：

```
function setLocationAjax(url, id)
{
   ...
       if (data.status != 'ERROR' && $('.cart-top-container').length) {
          $('.cart-top-container').replaceWith(data.cart_top);
       }   
   ...
} 
```

有没有人知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:46:24.313

您应该查看 CartController，并更改响应变量 (data.cart_top)。

CartController 的位置取决于主题使用的模块。核心 CartController 位于 app/code/core/Mage/Checkout/controllers/CartController.php 中。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T11:12:22.617

谢谢欧文，[这帮助我弄清楚出了什么问题](https://stackoverflow.com/a/13844528/1369235)。

CartController 位于 app/code/local/Excellence/Ajax/controllers/ 中，实际上名为 IndexController.php。

第 52-54 行设置 data.cart_top 响应：

```
$sidebar_header = $this->getLayout()->getBlock('cart_top')->toHtml();
Mage::register('referrer_url', $this->_getRefererUrl());
$response['cart_top'] = $sidebar_header; 
```

解决方法可能是更改*cart_top*块的设计方式，从 cart_top.phtml 中删除“cart-top-title”，并将其放入自己的文件中，并将其包含在 header.phtml 中。

结果发现实际替换发生在 ajaxcart.js（函数 setLocationAjax）的第 85 行。

对我来说，一个快速的解决方法是使用 jQuery 删除 div，如下所示：

```
if (data.status != 'ERROR' && $('.cart-top-container').length) {
  $('.cart-top-title').remove();
  $('.cart-top-container').replaceWith(data.cart_top);
} 
```

js文件在这里：skin/frontend/default/shopper/js/ajaxcart/ajaxcart.js

cart_top.phtml 这里：app/design/frontend/default/shopper/template/checkout/cart/cart-top.phtml

header.phtml 这里：app/design/frontend/default/shopper/template/page/html/header.phtml

# python - 从文件中获取指定字节偏移量的行

> ID：13844166
> 
> 赞同：4
> 
> 时间：2012-12-12T16:28:12.513
> 
> 标签：python, perl, parsing, unix

我有一个包含一堆行的文件。我有一个与每行开头对应的字节偏移量列表。我想要与字节偏移量相对应的每一行。有没有办法在 unix、perl 或 python 中做到这一点？我必须以比描述的更大的规模来做这件事。

文件：

```
abcd
bcde
cdef 
```

字节偏移：

```
0
10 
```

期望的输出：

```
abcd
cdef 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T16:35:30.587

```
with open(filename, 'r') as f:    
    for offset in offsets:
        f.seek(offset)
        print(f.readline()) 
```

参考：

*   [与声明](http://effbot.org/zone/python-with-statement.htm)
*   [打开](http://docs.python.org/2/library/functions.html#open)
*   [寻找](http://docs.python.org/2/library/stdtypes.html#file.seek)
*   [阅读线](http://docs.python.org/2/library/stdtypes.html#file.readline)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-12T16:45:06.430

快速perl：

```
my @offsets = ( 0, 10 );

open (my $data, '<', 'file.txt') || die "Can't open input: $!\n";

foreach my $offset (@offsets) 
{
    seek( $data, $offset, 0 );
    my $line = <$data>;
    print $line;
}

close $data; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T16:35:49.623

`seek()`到所需的字节位置，然后读取。这对于 Python 和 Perl 来说应该很容易，并且可以通过 shell 脚本来实现（我在想`dd`）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T16:52:35.920

当我结束时（感谢unutbu）

```
#!/usr/bin/python
f = open(file_name, 'r')
offsets = [0,10]
for offset in offsets:
    f.seek(offset)
    print f.readline().strip() 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T16:36:16.983

这应该这样做。

```
def get_lines_by_offset(filename, *offsets):
    with open(filename, "r") as fp:
        results = []
        for offset in offsets:
            fp.seek(offset)
            results.append(fp.readline().strip())
    return results 
```

# c# - 正则表达式非贪婪（懒惰）

> ID：13844168
> 
> 赞同：30
> 
> 时间：2012-12-12T16:28:18.430
> 
> 标签：c#, regex, html-table, non-greedy

我正在尝试非贪婪地解析出 TD 标签。我从这样的事情开始：

```
<TD>stuff<TD align="right">More stuff<TD align="right>Other stuff<TD>things<TD>more things 
```

我使用以下作为我的正则表达式：

```
Regex.Split(tempS, @"\<TD[.\s]*?\>"); 
```

记录返回如下：

```
""
"stuff<TD align="right">More stuff<TD align="right>Other stuff"
"things"
"more things" 
```

为什么不拆分第一个完整结果（以“stuff”开头的结果）？如何调整正则表达式以拆分 TD 标签的所有实例，无论是否带有参数？

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2012-12-12T16:47:06.487

对于非贪婪匹配，试试这个`<TD.*?>`

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-12-12T16:36:40.650

你想要的正则表达式是`<TD[^>]*>`：

```
<     # Match opening tag
TD    # Followed by TD
[^>]* # Followed by anything not a > (zero or more)
>     # Closing tag 
```

注意：`.`匹配任何内容（包括空格），因此与文字匹配`[.\s]*?`是多余且错误的，因此请使用.`[.]``.``.*?`

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2018-06-11T06:12:47.817

来自[https://regex101.com/](https://regex101.com/)

*   `*`量词 - 在零次和无限次之间匹配，尽可能多次，根据需要回馈（贪婪）
*   `*?`量词 - 在零次和无限次之间匹配，**尽可能少**，根据需要扩展（惰性）

# c# - 将对象转换为类型而不创建新变量

> ID：13844176
> 
> 赞同：4
> 
> 时间：2012-12-12T16:28:25.783
> 
> 标签：c#, reference, compilation

这个问题是我的一个好奇心，所以我不是在寻找答案，只是一个解释。

我一直想知道为什么在铸造时必须创建一个新变量。

当我正在转换为已知类型时，我会认为编译器可以在这种事情上发挥神奇的作用。

所以这样的代码可以写得更短。

```
DataTable dataTable = RetrieveDataTableFrom(whereEver);

foreach (DataRow row in dataTable.rows)
{
    if (row.ItemArray[0].GetType() == typeof(myTypeA))
    {
         MyTypeA myTypeA = (myTypeA)row.ItemArray[0];
         myTypeA.myCustomProperty = "dem works";
    }
} 
```

像这样，我只是更直接地编辑属性。

```
foreach (DataRow row in dataTable.rows)
{
    if (row.ItemArray[0].GetType() == typeof(myTypeA))
    {
         (myTypeA)row.ItemArray[0].myCustomProperty = "dem breaks";
    }
} 
```

编辑：哦，我的理解是错误的！哎呀，我认为这没有意义......哈。多一点，您是否认为任何一种方法（假设使用正确数量的括号）比另一种更清晰/可读？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:44:55.493

这应该工作

```
foreach (DataRow row in dataTable.rows)
{
    if (row.ItemArray[0].GetType() == typeof(myTypeA))
    {
         ((myTypeA)row.ItemArray[0]).myCustomProperty = "dem breaks";
    }
} 
```

或者你可以使用 LINQ

```
foreach (var row in dataTable.Rows.Cast<DataRow>().Where(row => row.ItemArray[0].GetType() == typeof(myTypeA)))
{
   ((myTypeA)row.ItemArray[0]).myCustomProperty = "dem breaks";
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:33:15.833

好吧，这是因为您在第二个示例中实际上并没有以正确的方式进行投射。

```
((myTypeA)(row.ItemArray[0])).myCustomProperty = "dem breaks"; 
```

在施放时，尽可能清楚地知道您要施放的具体内容通常很重要。在这种情况下，添加几组括号向编译器表明您不想强制转换`row`or`row.ItemArray`或`row.ItemArray[0].myCustomProperty`，但是`row.ItemArray[0]`，它实际上是 type `myTypeA`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T16:33:19.830

您只需要添加括号就可以了：

```
((myTypeA)row.ItemArray[0]).myCustomProperty = "dem breaks"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T16:33:30.263

在第二种情况下仍然会创建一个新的引用，它只是在一个较低的范围内。在评估该复杂语句的过程中，将创建一些非常短暂的临时变量来存储中间值；你的演员的结果将是其中之一。

现在临时对象不需要在`if`语句的整个生命周期内都存在，就像第一个示例一样（尽管实际上在该语句中途 GC 收集的几率是...低），但那是不太重要。

另请注意，演员阵容与此无关。只写：

```
object first = new object();
object second = first; //the reference is copied here 
```

复制参考。不需要演员来做到这一点。

复制参考也不是一项缓慢的操作。事实上，它是计算机可能执行的最快的操作之一，即从内存中取出一个单词并移动它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T16:34:19.610

您应该添加括号；

```
((myTypeA)row.ItemArray[0]).myCustomProperty = "dem breaks"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T16:35:07.207

```
(row.ItemArray[0] as myTypeA).mycustomproperty = value 
```

# javascript - 为给定元素获取活动（运行）D3 v3 转换的标准方法是什么？

> ID：13844179
> 
> 赞同：13
> 
> 时间：2012-12-12T16:28:31.020
> 
> 标签：javascript, d3.js, transitions

D3 的抽象仍然让我心烦意乱，所以希望我能正确地呈现这一点。

在 D3**版本 3**中，给定一个元素（比如一个圆圈），并且[给定每个元素可能只运行一个转换](http://bost.ocks.org/mike/transition/#per-element)，如果有的话，确定该元素上当前正在运行的转换是什么的最佳方法是什么？

我知道我可以手动检查`__transition__`元素（尽管也欢迎帮助），但我真的希望有更高级别的东西。

我更大的目标是创建一个子转换 if-and-only-if 有一个到 sub 的转换。否则，我将创建一个新的过渡。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-01T20:06:03.170

`d3.transition`另一种方法：在存储实际对象数组的每个节点上创建自己的属性。创建新过渡时，从数组中获取最后一个过渡并创建子过渡。

复杂之处在于您的新过渡可能不是基于与活动过渡相同的选择。`.each()`因此，我在调用中基于每个元素创建新的“安全”转换。

```
function saveTransition(t) {
    //save the transition immediately (don't wait for "start")
    //clear it on "end"
    t.each(function() {
        var tArr = this.__tObj__
        if (!tArr) tArr = this.__tObj__ = [];

        tArr.push(t);
        //console.log("saving ", t, " for ",this);
      } )
     .each("end", function() {
        var test =  this.__tObj__.shift();
        // console.log("clearing ", t, " from " ,this, 
         //            (test == t ? "correctly" : "ERROR") );
       } );
}
function newSafeTransition(node) { 
    var tArr = node.__tObj__; 
    if ( tArr && tArr.length ) {

        var t = tArr[ tArr.length - 1 ];
        return t.filter( function(){ return this === node; } )
                .transition().call(saveTransition);
    }
    else {
        return  d3.select(node).transition().call(saveTransition);
    }
}

d3.selectAll("div.foo")
    .transition().duration(3000)
    .call( saveTransition )
    .style("left", "100px");

d3.selectAll("div.bar")
    .transition().duration(3000)
    .call( saveTransition )
    .style("top", "100px");

setTimeout( function() { 
    console.log("blue");

    d3.selectAll("div.blue")
      .each( function() {
            newSafeTransition(this).style("color", "blue");
        });
}, 1000);

setTimeout( function() { 
    console.log("reposition");

    d3.selectAll("div.foo")
      .each( function() {
            newSafeTransition(this).style("left", "0px");
        });
}, 2000); 
```

[http://jsfiddle.net/7SQBe/3/](http://jsfiddle.net/7SQBe/3/)

它可能会被清理掉，你甚至可以重写`selection.transition()`和`transition.transition()`方法来自动执行此操作。但是，您可能希望保留一种方法来指示您是要在任何预定的转换之后将新转换排队还是要中断。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-01T00:09:46.357

简短的回答是，没有标准的方式来实现过渡，你也不是要这样做。如，不支持。

稍长一点的答案是，出于您的目的，您可能可以使用`__transition__`. 这个想法是检查是否`__transition__`存在，如果存在，等到它不存在才开始新的（子）转换。

为此，它有助于使用适当的功能扩展选择原型：

```
d3.selection.prototype.getTransition = function() {
  if(this[0][0].__transition__) {
    return this[0][0].__transition__[1];
  } else return undefined;
} 
```

请注意，这在这里*非常hacky*，并且只有在选择中*只有一个元素**和一个transition时**才会*起作用。不过，您应该明白这一点。

 **现在，我们可以使用这个函数来确定一个转换是否正在运行。

```
if(sel.getTransition() !== undefined) {
  // transition is there
} else {
  // no transition
} 
```

不幸的是，`__transition__`不允许您重建过渡对象，即以下内容不起作用。

```
sel.getTransition().transition()... 
```

因此，要模拟在当前运行完成后开始的子转换，请使用`setTimeout`检查是否有东西在运行，一旦没有，就开始新的转换：

```
function check() {
  if(sel.getTransition() !== undefined) {
    setTimeout(check, 100);
  } else {
    sel.transition().duration(1000)...;
  }
}
check(); 
```

您可以减少检查之间的间隔（此处为 100 毫秒），以更好地印象紧跟前一个的过渡。

完整的例子[在这里](http://jsfiddle.net/7SQBe/)。请注意，在几乎所有情况下，在某处保留对过渡对象的引用并使用它要容易得多，也更好。这个例子实际上只是作为一个 hacky 的概念证明。**

# jquery - jQuery - 在窗口调整大小和重新运行功能时重新计算变量

> ID：13844183
> 
> 赞同：0
> 
> 时间：2012-12-12T16:28:54.917
> 
> 标签：jquery, toggle, window-resize, outerheight

我编写了一个隐藏和切换顶栏 div 的函数：

```
jQuery(document).ready(function($) {

        $.fn.myTopBar = function() {

                var sipPosTop = 0;
                var topDivHeight = $("#top").outerHeight();

                $('#top').css('top' , -topDivHeight+10).show().animate({top: '+=0'}, 2000);

                $("#top-toggle").click(function(e) {
                    e.preventDefault();
                    $("#top").animate({ top: sipPosTop }, 200, 'linear', function() {
                        if(sipPosTop == 0) { sipPosTop = -topDivHeight+10; }
                        else { sipPosTop = 0; }
                    });
                });
        };
}); 
```

在页面加载时效果很好，但在窗口调整大小时，#top div 高度会发生变化，并且会破坏布局。如何重新计算它并在调整窗口大小时重新运行该函数？我尝试了以下方法：

```
jQuery(document).ready(function($){
    $.fn.myTopBar();
});

jQuery(window).resize(function($){
    $.fn.myTopBar();
}); 
```

但不起作用。谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:31:45.557

**编辑**——根据您的评论，我编写了这个插件，（希望）将具有您正在寻找的功能。如果*有的话*，您也许可以提取一些关于如何去做的信息。

用这个调用插件——

```
$(function () {
    $('.someFlyoutContainerClass').flyout({
        flyButton : $('.someButtonClass'), // button that toggles the flyout
        topOffset : 50, // (px) offset from the top of the window
        fade : { // (fade speeds/durations) -- remove object if not needed
            inSpeed : 350,
            easingIn : 'swing', // by removing easing, it will default to linear
            outSpeed: 250,
            easingOut : 'swing'            
        },
        slide : { // (slide speeds/durations) -- remove object if not needed
            inSpeed : 350,
            easingIn : 'swing',
            outSpeed : 250,
            easingOut : 'swing'      
        },
        closeButton : $('.close-flyout'), // you may remove if not needed
        clickOffClose: true // click anywhere but modal/flyout to close it
    });
}); 
```

这是脚本的工作版本——（12/13 更新） [http://jsfiddle.net/jmsessink/fC8ht/5/](http://jsfiddle.net/jmsessink/fC8ht/5/)

我希望这会有所帮助，如果您有任何问题，请告诉我。

# php - php无法从Windows上的xampp连接到远程数据库（在我的IP上启用了远程访问）

> ID：13844188
> 
> 赞同：0
> 
> 时间：2012-12-12T16:29:10.610
> 
> 标签：php, mysql, apache, xampp

我在 Windows 7 上的 xampp 出现问题。除了我尝试从本地主机连接到远程数据库时，一切工作正常。我已经为我的 ip 地址启用了 mysql 服务器上的远程访问，并且我试图关闭 windows 防火墙。

似乎有些东西阻止了从我的本地主机到远程主机的传出连接。

有人可以帮助我吗？

谢谢

加州

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:44:10.767

检查您的 MySQL 服务器上的权限，它可能是您正在登录的用户（针对数据库）具有 localhost 作为它的主机名尝试将主机名设置为 % 以进行 MySql 登录

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:45:36.243

你插入了什么ip？

前段时间，我无法从本地网络中的外部 PC/平板电脑连接到我的本地主机。最后，当我使用 ip 从安装了 xammp 的另一台电脑连接时，问题解决了：“http://192.168.1.128:80”也许是这个

# php - 带有交易计时器的 CMS 购物车

> ID：13844190
> 
> 赞同：0
> 
> 时间：2012-12-12T16:29:13.670
> 
> 标签：php, mysql

我需要推荐开源购物车，它可以出售带有计时器的商品，例如

1.  [http://www.mydeal.com.my/](http://www.mydeal.com.my/)
2.  [http://www.mydeal.com.au/](http://www.mydeal.com.au/)

与软件标准：

1.  PHP >= v5.2
2.  数据库 MySQL

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:32:31.560

您可以使用 JOOMLA 和 VirtueMart - ***Virtuemart Sale 倒计时计时器***

[这里](http://extensions.joomla.org/extensions/extension-specific/virtuemart-extensions/virtuemart-coupons/16956)

[演示](http://addonstreet.com/demo/virtuemart-sale-countdown-timer/)

*编辑：*所以，[打开购物车](http://www.opencart.com/)是一种选择。[倒计时](http://www.opencart.com/index.php?route=extension/extension&filter_search=Countdown)有很多，但我想都是有商业执照的。

# c# - 用户退出时的 Safari OnUnload 事件

> ID：13844193
> 
> 赞同：2
> 
> 时间：2012-12-12T16:29:21.687
> 
> 标签：c#, javascript, asp.net, safari

我通过添加 OnUnload 事件从后面的代码中调用 JavaScript 函数，因为我需要它在用户退出窗口或导航到新页面时触发。

```
bodyName.Attributes.Add("OnUnload", "JSFucntionName"); 
```

此函数在用户刷新或导航到新页面时在所有浏览器上触发，并且在用户退出时在 IE、Chrome 和 Firefox 上触发，但在 Safari 上不触发。

`OnUnload`当用户退出窗口时，Safari 不会调用事件吗？或者是否有在用户退出时调用 Safari 中的 JavaScript 函数的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:17:39.730

您可以尝试调用 onpagehide 作为解决方法，我相信在页面关闭时也会调用它：

```
window.onpagehide = function() {
    // some code here.
}; 
```

# java - 是否有与 Win32 函数“AdjustWindowRect”等效的 Java JFrame？

> ID：13844194
> 
> 赞同：3
> 
> 时间：2012-12-12T16:29:21.667
> 
> 标签：java, swing, user-interface

如果你不知道“AdjustWidowRect”是做什么的，下面是 MSDN 的描述：

> 根据所需的客户端矩形大小计算所需的窗口矩形大小。

更清楚：

在 Swing 中，当您设置 JFrame 的大小时，包括边框。这意味着如果您将 JFrame 的大小设置为 640 x 480，那将不是客户端大小，因为您输入的大小会计算框架边框的大小。

我想要一个矩形，并且能够对其进行调整，因此当 JFrame 的大小设置为该矩形时，JFrame 的客户端大小就是调整前的矩形。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:34:15.843

您必须计算 JFrame 的插图并将它们添加到所需的客户端大小，以设置 JFrame 的大小。

```
Insets insets = getInsets(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T02:01:16.400

AFAIU 接受的答案不考虑菜单栏或混合中的其他组件。这是通过覆盖组件的首选大小并打包框架来实现的。

> 我正在向 JFrame 绘制图形，我需要它的尺寸精确。

不要在顶级容器上绘画，例如`JFrame`或`JWindow`。而是渲染到`JPanel`or`BufferedImage`并将其添加到 TLC。

![大小 GUI - 从“内而外”](../Images/84f257fc1426c67bbad7a2b1e655fe6e.png)

```
import java.awt.*;
import javax.swing.*;
import javax.swing.border.EmptyBorder;

public class SizedGUI {

    public static void main(String[] args) {
        Runnable r = new Runnable() {
            @Override
            public void run() {
                // the GUI as seen by the user (without frame)
                JPanel gui = new JPanel(new BorderLayout());
                gui.setBorder(new EmptyBorder(2,3,2,3));

                gui.add(new FixedSizeComponent());

                gui.setBackground(Color.RED);

                JFrame f = new JFrame("Demo");
                f.add(gui);
                // Ensures JVM closes after frame(s) closed and
                // all non-daemon threads are finished
                f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
                // See http://stackoverflow.com/a/7143398/418556 for demo.
                f.setLocationByPlatform(true);

                // ensures the frame is the minimum size it needs to be
                // in order display the components within it
                f.pack();
                // tweak to ensure the GUI never gets too small
                f.setMinimumSize(f.getSize());
                // should be done last, to avoid flickering, moving,
                // resizing artifacts.
                f.setVisible(true);
            }
        };
        // Swing GUIs should be created and updated on the EDT
        // http://docs.oracle.com/javase/tutorial/uiswing/concurrency/initial.html
        SwingUtilities.invokeLater(r);
    }
}

class FixedSizeComponent extends JPanel {

    @Override
    public Dimension getPreferredSize() {
        return new Dimension(400,100);
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        int w = getWidth();
        int h = getHeight();
        g.setColor(Color.BLACK);
        g.drawString(w + "x" + h, w/2, h/2);
    }
} 
```

# visual-studio - 仅当通过引用列名的表达式进行排序时才允许使用变量

> ID：13844195
> 
> 赞同：0
> 
> 时间：2012-12-12T16:29:26.943
> 
> 标签：visual-studio, parameters, sql-order-by, dataset-designer

我们想在 Visual Studio 数据集设计器中为此查询的“排序依据”使用一个参数：

```
SELECT Students.ID, Students.Surname, Students.Forename, Students.DateOfBirth, Parents.MotherName, 
       Parents.FatherName, Parents.AddressLine1, Parents.AddressLine2, Parents.City, 
       Parents.State + '       ' AS State, Parents.Zip,
CASE 
   WHEN len(ltrim(rtrim(Parents.PrimaryPhone))) = '10' THEN 
      '(' + SUBSTRING(Parents.PrimaryPhone, 1, 3) + ')' + ' ' + 
            SUBSTRING(Parents.PrimaryPhone, 4, 3) + '-' + 
            SUBSTRING(Parents.PrimaryPhone, 7, 4)
   WHEN len(ltrim(rtrim(Parents.PrimaryPhone))) = '7' THEN 
      SUBSTRING(Parents.PrimaryPhone, 1, 3) + '-' + 
      SUBSTRING(Parents.PrimaryPhone, 4, 4)
   WHEN len(ltrim(rtrim(Parents.PrimaryPhone))) = '' THEN 
      ' ' 
END AS PrimaryPhone,
CASE 
   WHEN len(ltrim(rtrim(Parents.SecondaryPhone))) = '10' THEN 
      '(' + SUBSTRING(Parents.SecondaryPhone, 1, 3) + ')' + ' ' + 
            SUBSTRING(Parents.SecondaryPhone, 4, 3) + '-' + 
            SUBSTRING(Parents.SecondaryPhone, 7, 4)
   WHEN len(ltrim(rtrim(Parents.SecondaryPhone))) = '7' THEN 
      SUBSTRING(Parents.SecondaryPhone, 1, 3) + '-' + 
      SUBSTRING(Parents.SecondaryPhone, 4, 4)
   WHEN len(ltrim(rtrim(Parents.SecondaryPhone))) = '' THEN 
      ' ' 
END AS SecondaryPhone,
       Parents.HomeEmail
  FROM Parents INNER JOIN
       Students ON Parents.ID = Students.ParentID
 WHERE (Students.Forename LIKE '%' + @SearchValue + '%') OR
       (Students.Surname LIKE '%' + @SearchValue + '%') OR
       (@SearchValue = 'ALL')
ORDER BY @OrderByColumn 
```

显示此错误：

```
Variables are only allowed when ordering by an expression referencing 
a column name. 
```

我们需要帮助来完成消息所描述的内容吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-19T19:10:43.863

试试下面的查询.....

订购方式

案例@OrderByColumn='Students.ID' THEN Students.ID END,

CASE WHEN @OrderByColumn='Students.Surname' THEN Students.Surname END

# prolog - 在 Prolog 中实现算术解析器

> ID：13844199
> 
> 赞同：0
> 
> 时间：2012-12-12T16:29:34.540
> 
> 标签：prolog, context-free-grammar, dcg, arithmetic-expressions

我有以下 Prolog 代码：

```
expression-->first,operator,second.
first-->[X].
operator-->['+'];['-'].
second-->[X]. 
```

编译后，机器会在命令行中响应以下类型的查询“yes”：

```
| ?- expression([5,'+',3],[]).
| ?- expression(['a','-','b'],[]).
| ?- expression([2.8,'+',3.2],[]). 
```

我如何将其限制为仅数字？因此，只有涉及数字的表达式才应该是真实的，例如：`| ?- expression([92,'+',23.48],[]).`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:43:45.260

您可以检查是否`X`in`first`和`second`are 数字：

```
first-->[X], {number(X)}.

second-->[X], {number(X)}. 
```

# c++ - C ++中的通用二进制搜索

> ID：13844200
> 
> 赞同：0
> 
> 时间：2012-12-12T16:29:34.760
> 
> 标签：c++, templates, search, binary

我想编写一个模板二进制搜索算法，它可以使用任意比较器在模板类型 QList 中搜索模板类型元素，如下所示：

```
template<typename T,typename compare_less>
static int binary_search(QList<T>* list, T target) {
    int low = 0;
    int high = list->count()-1;
    while (low <= high) {
        int middle = low + (high - low)/2;
        if (compare_less(*target, *list[middle]))
            high = middle - 1;
        else if (compare_less(*list[middle],*target))
            low = middle + 1;
        else
            return middle;
    }
    return low; 
```

}

现在我该如何正确实现它以使其与 QDateTime* 模板参数一起使用？我想这样调用函数：

```
int index = binary_search<QDateTime*, ???>(dateTimeList,date); 
```

dateTimeList 是 QList 类型，date 是 QDateTime* 类型，我真的不知道在问号位置写什么。

有人可以帮我正确实现算法并告诉我如何用这些参数调用算法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T16:37:40.743

[如果Qt 文档](http://doc.qt.digia.com/qt/qlist.html)是有效的，你不应该实现任何东西。只需将 std::binary_search 与列表的 .begin() 和 .end() 一起使用，如果需要实现比较器，请执行此操作并将其传递给 STL 算法。

# jquery - 尝试使用 jQuery 添加和删除表行

> ID：13844202
> 
> 赞同：0
> 
> 时间：2012-12-12T16:29:41.677
> 
> 标签：jquery, html-table, tablerow

我正在尝试使用 jQuery 添加和删除表行，添加的行包含一个删除链接，由于某种原因，它不适用于生成的元素，即使我使用 on。

这是我的代码：

```
$("#target").click(function() {
$('#myTable tr:last').after('<tr><td>Bla</td><td><div class="remove">REMOVE</div></td></tr>');
});
$(".remove").on('click', function(event) {
  $(this).parent().parent().remove();
}); 
```

[http://jsbin.com/ucopun/1/](http://jsbin.com/ucopun/1/)

可能是什么问题呢？

删除链接应该删除它所在的整行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:32:31.050

当您使用 时`on()`，您仍然需要将事件绑定到页面上已经存在的容器元素。我认为这就是你想要的：

```
$("#myTable").on('click', '.remove', function(event) {
  $(this).parent().parent().remove();
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:33:22.060

你快到了。请参阅此**[jsFiddle 示例](http://jsfiddle.net/j08691/hyguF/1)**。

```
$("#myTable").on('click', '.remove', function(event) {
    $(this).closest('tr').remove();
});​ 
```

由于您要添加代码运行时不存在的元素，因此您需要使用`.on()`绑定到代码运行时确实存在的元素。

正如[文档](http://api.jquery.com/on/)所述：

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。

另外，我发现`.closest('tr')`比`.parent().parent()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T16:35:54.000

我会将事件绑定到表格并将其委托给按钮

参考：[http ://api.jquery.com/delegate/](http://api.jquery.com/delegate/)

```
$("#myTable").delegate('.remove','click' , function(event) {
  $(this).closest('tr').remove();
}); 
```

**编辑**：似乎委托被 on 取代（截至 jQuery 1.7 - 参考[http://api.jquery.com/on/](http://api.jquery.com/on/)）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T16:57:26.383

使用直播功能

```
$('.remove',$("#myTable")).live('click',function(){
  $(this).parents('tr:first').remove();
}); 
```

​<a href="http://jsfiddle.net/B8wSq/2/" rel="nofollow">http://jsfiddle.net/B8wSq/2/

# c++ - 获得 QT 代码的普通 C++ 实现

> ID：13844206
> 
> 赞同：4
> 
> 时间：2012-12-12T16:29:52.910
> 
> 标签：c++, qt, signals

我试图弄清楚这段代码在没有任何依赖关系的普通 C++ 中的样子，所以我使用了`moc`编译器，但显然我错了。

moc 总是返回

```
main.cpp:0: Note: No relevant classes found. No output generated. 
```

代码是

> ```
> #include <QApplication>
> #include <QWidget>
> #include <QPushButton>
> 
> class MyButton : public QWidget
> {
>  public:
>      MyButton(QWidget *parent = 0);
> };
> 
> MyButton::MyButton(QWidget *parent)
>     : QWidget(parent)
> {   
>   QPushButton *quit = new QPushButton("Quit", this);
>   quit->setGeometry(50, 40, 75, 30);
> 
>   connect(quit, SIGNAL(clicked()), qApp, SLOT(quit()));
> }
> 
> int main(int argc, char *argv[])
> {
>   QApplication app(argc, argv);  
> 
>   MyButton window;
> 
>   window.resize(250, 150);
>   window.move(300, 300);
>   window.setWindowTitle("button");
>   window.show();
> 
>   return app.exec();
> } 
> ```
> 
> 来自[http://www.zetcode.com/gui/qt4/firstprograms/](http://www.zetcode.com/gui/qt4/firstprograms/)

一般来说，我有兴趣只使用 C++ 标准库（没有升压信号，没有 QT，没有别的）创建自己的信号槽系统，所以我这样做是为了研究目的，我只对基础设施感兴趣关于信号和插槽。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T16:37:58.153

将`Q_OBJECT`宏添加到**类的私有部分**，以便`moc`对其进行转换。

```
class MyButton : public QWidget
{
 Q_OBJECT
 public:
     MyButton(QWidget *parent = 0);
}; 
```

[这](http://qt-project.org/doc/qt-4.8/qobject.html#Q_OBJECT)是文档所说的。

# java - Google Maps Android api v2 和当前位置

> ID：13844209
> 
> 赞同：18
> 
> 时间：2012-12-12T16:29:54.913
> 
> 标签：java, android, google-maps, google-maps-api-2

我正在尝试使用新的 google maps android api v2，并且正在为 android 2.3.3 或更高版本开发应用程序。这是一个非常简单的应用程序：它使用方向 api 从 db 获取 POI 获取用户当前位置（使用 gps 或网络信号），并将用户驱动到 POI。

我的问题是获取用户当前位置。感谢这篇文章 [如何在 Google Maps Android API v2 中获取当前位置？](https://stackoverflow.com/questions/13756261/how-to-get-the-current-lcoation-in-google-maps-android-api-v2)我了解到我无法使用新的 google api 更新当前位置。另一个问题是我可以使用设置我的位置，`GoogleMap setMyLocationEnabled(boolean enabled)`但我无法`getMyLocation()`知道用户在哪里。

我使用本指南[http://www.vogella.com/articles/AndroidLocationAPI/article.html#maps_mylocation](http://www.vogella.com/articles/AndroidLocationAPI/article.html#maps_mylocation)来获取我的位置，并尝试集成到我的 Activity 中以绘制用户位置。

这是我的代码：

显现

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="it.mappe"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-permission android:name="it.mappe.permission.MAPS_RECEIVE" />

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="16" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

    <uses-feature
        android:glEsVersion="0x00020000"
        android:required="true" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

         <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="MYGMAPSKEY" />
        <activity
            android:name="it.mappe.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

主要活动

```
package it.mappe;

import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.SupportMapFragment;

import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.Marker;
import com.google.android.gms.maps.model.MarkerOptions;

import android.content.Context;
import android.content.Intent;
import android.location.Criteria;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.provider.Settings;
import android.support.v4.app.FragmentActivity;
import android.widget.Toast;

public class MainActivity extends FragmentActivity implements LocationListener {
    private GoogleMap map;
    private static final LatLng ROMA = new LatLng(42.093230818037,11.7971813678741);
    private LocationManager locationManager;
    private String provider;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        map = ((SupportMapFragment) getSupportFragmentManager().findFragmentById(R.id.map)).getMap();

        LocationManager service = (LocationManager) getSystemService(LOCATION_SERVICE);
        boolean enabledGPS = service
                .isProviderEnabled(LocationManager.GPS_PROVIDER);
        boolean enabledWiFi = service
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        // Check if enabled and if not send user to the GSP settings
        // Better solution would be to display a dialog and suggesting to 
        // go to the settings
        if (!enabledGPS) {
            Toast.makeText(this, "GPS signal not found", Toast.LENGTH_LONG).show();
            Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            startActivity(intent);
        }

        locationManager = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
        // Define the criteria how to select the locatioin provider -> use
        // default
        Criteria criteria = new Criteria();
        provider = locationManager.getBestProvider(criteria, false);
        Location location = locationManager.getLastKnownLocation(provider);

        // Initialize the location fields
        if (location != null) {
            Toast.makeText(this, "Selected Provider " + provider,
                    Toast.LENGTH_SHORT).show();
            onLocationChanged(location);
        } else {

            //do something
        }

    }

    /* Request updates at startup */
    @Override
    protected void onResume() {
        super.onResume();
        locationManager.requestLocationUpdates(provider, 400, 1, this);
    }

    /* Remove the locationlistener updates when Activity is paused */
    @Override
    protected void onPause() {
        super.onPause();
        locationManager.removeUpdates(this);
    }

    @Override
    public void onLocationChanged(Location location) {
        double lat =  location.getLatitude();
        double lng = location.getLongitude();
        Toast.makeText(this, "Location " + lat+","+lng,
                Toast.LENGTH_LONG).show();
        LatLng coordinate = new LatLng(lat, lng);
        Toast.makeText(this, "Location " + coordinate.latitude+","+coordinate.longitude,
                Toast.LENGTH_LONG).show();
        Marker startPerc = map.addMarker(new MarkerOptions()
        .position(coordinate)
        .title("Start")
        .snippet("Inizio del percorso")
        .icon(BitmapDescriptorFactory.fromResource(R.drawable.ic_launcher)));
    }

    @Override
    public void onProviderDisabled(String provider) {
        Toast.makeText(this, "Enabled new provider " + provider,
                Toast.LENGTH_SHORT).show();

    }

    @Override
    public void onProviderEnabled(String provider) {
        Toast.makeText(this, "Disabled provider " + provider,
                Toast.LENGTH_SHORT).show();

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

} 
```

主要布局

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    class="com.google.android.gms.maps.SupportMapFragment" /> 
```

它可以工作但不是很好，正如您在图片中看到的那样，每一次都有一个新位置添加了一个新标记（我认为是前叠加......我从不使用旧的谷歌地图 api）。 ![在此处输入图像描述](../Images/5810517731d177fdc7a6c3b85f43e0cb.png)

如何只显示一个标记？

此外，在我的地图上，我还需要显示 POI 的标记，所以我认为这不是一个好的解决方案，将所有标记删除并在地图上重新绘制。还有另一种获取用户当前位置的最佳方法，每时每刻都更新它，只显示一个自定义标记？！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T16:52:58.163

您可以调用`startPerc.remove();`仅删除此标记。

从[这里](http://developer.android.com/reference/com/google/android/gms/maps/model/Marker.html#remove%28%29)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-05-29T02:06:17.317

为什么不只是使用`startPerc.setPosition`移动标记而不是不断添加和删除...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-12T10:35:21.043

当您通过此方法获得另一个位置时，设置标记的位置

```
marker. set position (location) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-07-24T06:27:13.627

您应该在添加标记之前使用**googlemap.clear()**，因为每次更改位置时，它都会在地图上添加具有最旧标记的新标记。所以在更改位置添加标记之前使用 googlemap.clear() 。它将删除最旧的标记并添加新标记。googlemap 是**GoogleMap**类的实例。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-09T15:34:20.190

您可以将标记替换为新标记：

```
if(userMarker!=null) userMarker.remove();
    userMarker = theMap.addMarker(new MarkerOptions()
    .position(lastLatLng)
    .title("You are here")
    .icon(BitmapDescriptorFactory.fromResource(R.drawable.your_loc_icon))
    .snippet("Your current location")); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-31T12:06:20.070

在android中定义谷歌地图android v2的完整快捷方式......

XML 文件：

```
<fragment
        android:id="@+id/map"
        android:name="com.google.android.gms.maps.SupportMapFragment"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" /> 
```

清单文件：

```
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="17" />

<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_MOCK_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />

<!-- Map permission Starts -->
<permission
    android:name="com.example.mapdemoapiv2.permission.MAPS_RECEIVE"
    android:protectionLevel="signature" />

<uses-permission android:name="com.example.mapdemoapiv2.permission.MAPS_RECEIVE" />
<uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES" />

<uses-feature
    android:glEsVersion="0x00020000"
    android:required="true" />

<!-- Map permission Starts -->

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name="com.example.mapdemoapiv2.MainActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    <activity android:name=".MapDetail" >
    </activity>

    <meta-data
        android:name="com.google.android.maps.v2.API_KEY"
        android:value="Your Key" />

    <uses-library android:name="com.google.android.maps" />
</application> 
```

活动课：

```
public class MainActivity extends android.support.v4.app.FragmentActivity
{
   GoogleMap googleMap;
    MarkerOptions markerOptions;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    setUpMapIfNeeded();

    GetCurrentLocation();

    }

private void setUpMapIfNeeded() {
    if (googleMap == null) {

        Log.e("", "Into null map");
        googleMap = ((SupportMapFragment) getSupportFragmentManager()
                .findFragmentById(R.id.map)).getMap();

        googleMap.setInfoWindowAdapter(new CustomInfoWindowAdapter(
                MainActivity.this));

        if (googleMap != null) {
            Log.e("", "Into full map");
            googleMap.setMapType(googleMap.MAP_TYPE_NORMAL);
            googleMap.getUiSettings().setZoomControlsEnabled(false);
        }
    }
}

private void GetCurrentLocation() {

    double[] d = getlocation();
    Share.lat = d[0];
    Share.lng = d[1];

     googleMap
            .addMarker(new MarkerOptions()
                    .position(new LatLng(Share.lat, Share.lng))
                    .title("Current Location")
                    .icon(BitmapDescriptorFactory
                            .fromResource(R.drawable.dot_blue)));

             googleMap
                .animateCamera(CameraUpdateFactory.newLatLngZoom(
                        new LatLng(Share.lat, Share.lng), 5));
}

public double[] getlocation() {
    LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
    List<String> providers = lm.getProviders(true);

    Location l = null;
    for (int i = 0; i < providers.size(); i++) {
        l = lm.getLastKnownLocation(providers.get(i));
        if (l != null)
            break;
    }
    double[] gps = new double[2];

    if (l != null) {
        gps[0] = l.getLatitude();
        gps[1] = l.getLongitude();
    }
    return gps;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-08-29T06:02:37.850

首先在地图 api v2 中使用 LocationClient 检索您的位置，请参阅：http: [//developer.android.com/training/location/retrieve-current.html](http://developer.android.com/training/location/retrieve-current.html)

重要提示：要启动 API，请在主 Activity 的 onStart 中调用它：

```
private void kickStardedLocationManager(){

 // Acquire a reference to the system Location Manager
    LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

 // Define a listener that responds to location updates
    android.location.LocationListener locationListener = new android.location.LocationListener() {
        public void onLocationChanged(Location location) {
          // Called when a new location is found by the network location provider.
            //MainActivity.this.makeUseOfNewLocation(location);
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {}

        public void onProviderEnabled(String provider) {}

        public void onProviderDisabled(String provider) {}
      };

      long l = 10;
      float f = 100;
   // Register the listener with the Location Manager to receive location updates
      locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener); //LocationManager.GPS_PROVIDER
} 
```

# php - 编辑函数创建一个新用户，并且不会更新数据库中的当前用户

> ID：13844211
> 
> 赞同：0
> 
> 时间：2012-12-12T16:29:57.750
> 
> 标签：php, cakephp, sql-update, edit

我目前正在使用 CAKEPHP 2.3，并且正在尝试编辑用户信息。但是当我提交信息时，它不会将信息更新到数据库中。相反，它会使用我插入的新信息创建一个新用户。我希望它更新用户，而不是创建一个新用户。

我的 edit.ctp 代码是：

```
 <h1>Edit Account information</h1>
<?php
echo $this->Form->create('User', array('action' => 'edit'));
echo $this->Form->input('username', array('value' => $this->Session->read('Auth.User.username')));
echo $this->Form->input('name', array('value' => $this->Session->read('Auth.User.name')));
echo $this->Form->end('Submit');
?> 
```

然后我在用户控制器中的编辑功能是：

```
public function edit() {
//        debug($this->User->save($this->request->data));
        $this->User->id = $this->Session->read('Auth.User.id');
        $this->request->data['User']['id'];
        if ($this->request->is('post')) {
            if ($this->User->save($this->request->data)) {
                $this->Session->setFlash(__('The User has been saved', true));
                $this->redirect(array('action' => 'index'));
            } else {
                $this->Session->setFlash(__('The User could not be saved. Please, try again.', true));
            }
        } else {
            $this->request->data = $this->User->read(null);
            isset($this->request->data['User']['password']);
        }
    } 
```

这是进入编辑用户页面的索引。

```
<h1>Users Home</h1>
<p>Welcome <?php print $this->Session->read('Auth.User.name');?> <br/></p>
<table border="0" width="200" text-align="center">
<tr>
<td width="50"><?php echo $this->Html->link('Log out', array('action' => 'logout')); ?></td>
<td width="50"><?php echo $this->Html->link('Edit', array('action' => 'edit')); ?></td>
<td width="50"><?php echo $this->Html->link('Add User', array('action' => 'add')); ?></td><!-- should only show for admin -->
<td width="50"><?php echo $this->html->link('Manage Users', array('action' => 'usermanage')); ?></td><!-- should only show for admin -->
</tr>
</table> 
```

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:04:09.110

在您的编辑方法中丢失 $id 。通常用户只能 - 并且只有他自己 - 编辑他自己的记录。

```
public function edit() {
    if ($this->request->is('post')) {
        $this->request->data['User']['id'] = $this->Session->read('Auth.User.id');
        if ($this->User->save($this->request->data)) {
        ... 
```

并且`value`不适合您的表格。永远不要使用它。它会在发布和验证错误时破坏您的表单（有关“为什么”，请参见[http://www.dereuromark.de/2010/06/23/working-with-forms/](http://www.dereuromark.de/2010/06/23/working-with-forms/) - 您还将找到如何设置默认值，如果你真的需要）。

由于您通过传递数据，`$this->request->data`因此需要将它们保持原样：

```
echo $this->Form->input('username'); 
```

也失去了行动。表单将自动发布到自己！

最后但同样重要的是不要使用 read()，使用 find(first)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:36:53.487

您必须指定`$id`要编辑的用户。在这种情况下，由于只有一个用户可以编辑他自己的个人资料，我们在控制器上进行：

```
public function edit() {
    $this->User->id = this->Session->read('Auth.User.id');
    //whatever...
} 
```

如果您在编辑视图中并且 $id 由参数传递，您甚至不需要这样做，只需像这样创建表单，CakePHP 将自动为编辑操作生成表单：

```
echo $this->Form->create('User'); 
```

此外，您的输入似乎是错误的，您不需要该`options`变量：

```
echo $this->Form->input('username', array('value' => $this->Session->read('Auth.User.username')));
echo $this->Form->input('name', array('value' => $this->Session->read('Auth.User.name'))); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:47:16.407

您也可以将其包含在表单中。默认情况下，id 字段将隐藏在表单中。使用会话执行此操作更安全，但您可以对管理功能执行此操作或在保存之前对其进行验证。

```
 echo $this->Form->input('User.id'); 
```

# objective-c - UICollectionView 布局间距问题。单元格之间的空间太大

> ID：13844212
> 
> 赞同：1
> 
> 时间：2012-12-12T16:29:59.330
> 
> 标签：objective-c, ios, uicollectionview, uicollectionviewcell

我正在以编程方式设置我的`UICollectionView`一切，一切看起来都对我来说是正确的，但是当我测试我的应用程序时，我得到了一些非常奇怪的间距，无论是垂直还是水平。`LibraryViewController`可以在此处找到设置集合视图的我的类： [LibaryViewController 类](http://pastebin.com/yi1rsjNr)。我的`LibraryCell`初始化看起来像这样：

```
- (id)initWithFrame:(CGRect)frame
{
NSLog(@"Init called");
NSLog(@"%@", NSStringFromCGRect(frame));
self = [super initWithFrame:frame];
if (self) {
    // Initialization code
    imageView = [[UIImageView alloc] initWithFrame:frame];
    [self.contentView addSubview:imageView];
}
return self;
} 
```

因此，每次设置单元格时，我都会让它向我报告框架是什么。有趣的是这些值看起来是正确的。这是我的日志文件的一部分，显示帧位于正确的位置：

```
2012-12-12 11:08:48.333 ARApp2[16330:907] Init called
2012-12-12 11:08:48.335 ARApp2[16330:907] {{10, 10}, {80, 120}}
2012-12-12 11:08:48.341 ARApp2[16330:907] Loaded image0.png
2012-12-12 11:08:48.349 ARApp2[16330:907] success
2012-12-12 11:08:48.352 ARApp2[16330:907] Init called
2012-12-12 11:08:48.354 ARApp2[16330:907] {{120, 10}, {80, 120}}
2012-12-12 11:08:48.358 ARApp2[16330:907] Loaded image1.png
2012-12-12 11:08:48.365 ARApp2[16330:907] success
2012-12-12 11:08:48.368 ARApp2[16330:907] Init called
2012-12-12 11:08:48.370 ARApp2[16330:907] {{230, 10}, {80, 120}}
2012-12-12 11:08:48.375 ARApp2[16330:907] Loaded image2.png
2012-12-12 11:08:48.382 ARApp2[16330:907] success 
```

但是当您查看屏幕上的结果时，它看起来像这样：[Screenshot](http://img717.imageshack.us/img717/6028/img0088z.png) 这个集合中有四个项目。前三个在第一排，所以你甚至看不到第三个。然后第四个开始下一行，但比我想要的要低得多。谁能明白为什么这些细胞间隔如此之远？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:52:19.960

`imageView = [[UIImageView alloc] initWithFrame:frame];`

这条线似乎是你的问题。您的图像视图应该是 {(0,0), (80,120)} 但您将其超级视图的框架分配为图像的框架，因此您最终得到的第二张图像的超级视图为 {(120, 10), (80, 120)} 但图像也具有相同的偏移量和大小，这给了你疯狂的间距。

tl；博士，将您的 imageView 框架设置为 self.bounds，因为您的 imageView 应该占据整个超级视图。

# php - MySQL杀死过程是用户没有足够的积分PHP

> ID：13844214
> 
> 赞同：-2
> 
> 时间：2012-12-12T16:30:06.087
> 
> 标签：php, mysql, database

下面的代码就像当用户点击提交时，他得到一张票（lodd）并失去五分，因为他用五分买了一张票。但是我很怀念当一个用户没有得到他买不到的五分的时候。我希望如果用户没有获得足够的积分，那么回声会说（示例）：

> 抱歉，您至少需要 5 分才能买票。

我怎样才能做到这一点？现在人们只有在购买比他们拥有的更多时才会减负。

```
<?php
    session_start();

    //=============Configuring Server and Database=======
    $host        =    'localhost';
    $user        =    'root';
    $password    =    '';

    //=============Data Base Information=================
    $database    =    'login';

    $conn        =    mysql_connect($host,$user,$password) or die('Server Information is not Correct'); //Establish connection with the server
    mysql_select_db($database,$conn) or die('Database Information is not correct');

    //===============End Server Configuration============

    //=============Starting Registration Script==========

    $username    =    mysql_real_escape_string($_POST['txtusername']);

    //=============To Encrypt Password===================

    //============New Variable of Password is Now with an Encrypted Value========

    $insert = "UPDATE `users` SET `points` = (`points`-5) WHERE `username` = '".$username."'";
    mysql_query($insert);

    // Other code

    $insert = "UPDATE `users` SET `lodd` = (`lodd` +1) WHERE `username` = '".$username."'";
    mysql_query($insert);

    mysql_query($insert);

    header('location: succes.php');
?> 
```

这是给人们一张五分票的代码：

```
$insert = "UPDATE `users` SET `points` = (`points`-5) WHERE `username` = '".$username."'";
mysql_query($insert);

// Other code

$insert = "UPDATE `users` SET `lodd` = (`lodd` +1) WHERE `username` = '".$username."'";
mysql_query($insert);

mysql_query($insert); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:35:20.193

首先，不推荐使用 mysql_* ，因此您应该考虑在某个时候更改它们。一种选择是使用：[MySQLi](http://php.net/manual/en/book.mysqli.php)

回到你的问题，你可以这样做：

```
$insert = "UPDATE `users` SET `points` = (`points`-5) WHERE `username` = '".$username."' and points > 5";
mysql_query($insert);
if (mysql_affected_rows() > 0)
{
    // other codes

    $insert = "UPDATE `users` SET `lodd` = (`lodd` +1) WHERE `username` = '".$username."'";
    mysql_query($insert); 
}else{
    echo "You don't have enough points";
} 
```

# powerpivot - 传递 Excel Services (PowerPivot) 查询字符串参数以选择切片器或模拟切片器

> ID：13844217
> 
> 赞同：0
> 
> 时间：2012-12-12T16:30:17.020
> 
> 标签：powerpivot

是否可以从查询字符串中选择 PowerPivot 2010 中的切片器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:27:47.237

比尔，当然可以使用 QueryString Webpart 将“变量”传递给共享点上的 PowerPivot 枢轴。

[此处](http://www.powerpivotpro.com/2012/05/drill-across-in-powerpivot-live-demo/#more-4343)记录了该技术- 帖子底部有一个链接，指向一些非常详细的 PDF 说明。

诀窍是您的 Pivot 需要字段的报表过滤器以及切片器 - 您的报表过滤器值所在的单元格需要是一个命名范围，然后变量作为该名称传递。然后，您可以在必要时隐藏报告过滤器 - 切片器和报告过滤器基本上是可互换的。

希望这可以帮助。雅各布

# objective-c - 选择器/方法名称作为字符串参数

> ID：13844219
> 
> 赞同：2
> 
> 时间：2012-12-12T16:30:18.627
> 
> 标签：objective-c, ios, ios6

所以这段代码有效（将方法名称作为字符串发送到接收方法）

```
[self.Client sendDigitalJoinAndReleaseByName:[NSString stringWithFormat:@"%s",_cmd]]; 
```

但是，自从 ios 6（我认为）以来，我现在收到警告

> 格式指定类型 'char *' 但参数的类型为 SEL

SEL 是否有格式说明符？这样做的正确方法是什么（这样就没有警告）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T16:42:20.020

只需使用`NSStringFromSelector(_cmd)`并打印结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:38:42.727

你可以使用 NSStringFromSelector：

```
[self.Client sendDigitalJoinAndReleaseByName:NSStringFromSelector(_cmd)]; 
```

# delphi - 通过客户端-服务器断开连接管理 SQLConnection / Datasnap

> ID：13844220
> 
> 赞同：9
> 
> 时间：2012-12-12T16:30:28.520
> 
> 标签：delphi, delphi-xe2, sqlconnection, datasnap, disconnect

在我的 Datasnap 客户端应用程序中，我将 1 个 TSQLConnection 用于我的方法和 ProviderConnection。

当连接丢失时会出现问题。TSQLConnection.Connected 和 TSQLConnection.ConnectionState 都没有捕捉到这一点。

当我的 TSQLconnection 已打开，但我失去了 Internet 连接，或者服务器停止 Datasnap 客户端应用程序时，会出现很多错误。（服务器方法或客户端数据集）

我创建了一个函数来管理我的服务器方法的 SQL 连接。但是当例如关闭通过 TDSProviderConnection 连接的 ClientDataset 时会出现更多问题。

**问：**您如何管理您的客户端应用程序以安全地捕获 TSQL 连接上的任何断开连接。
**问**：您如何管理停机时间，以及您如何处理未保存的客户端状态。

停机后重新连接不是问题。

调用服务器方法时：这将引发异常。

```
tmpM:=TServerMethodsClient.Create(MYTSQLCONNECTION.dbxconnection,true); 
```

所以我编写了下一个方法来使用虚拟方法从我的数据模块中获取 TSQLCONNECTION。

```
function TDMForm.DSConnection: TSQLConnection;
var
  tmpM:TServerMethodsClient;
begin
  result:=nil;
  if assigned(MYTSQLCONNECTION) then begin
    tmpM:=TServerMethodsClient.Create(MYTSQLCONNECTION.dbxconnection,true);
    try
      try
        tmpM.Ping;
        result:=MYTSQLCONNECTION
      except
        ReconnectForm.ShowModal; // has a reconnect button that tries to reconnect + shutdownbutton
        if ReconnectForm.modalresult=mrOK then
          result:=MYTSQLCONNECTION
        else
          MainForm.Close;
      end;
    finally
      tmpm.Free;
    end;
  end;
end; 
```

我以这种方式编写了方法，因为找出连接是否丢失的唯一方法是通过会引发相同错误的虚拟方法......然后我可以查询重新连接或关闭程序。

编辑：我期待某种一般性的答案和指导方针，做和不做。不是对我的代码的更正，这只是为了展示我目前正在做的事情。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T23:44:13.170

我们在同一个问题上苦苦挣扎——如何检测连接何时断开，以及如何优雅地重新连接。这就是我们最终做的事情，事实证明这对我们来说非常成功。

我们的用户连接到 DataSnap 服务器以检索数据并进行更改。`OnBeforePost`所有记录的创建、更新和删除都`OnBeforeDelete`通过`TClientDataSet`.

由于在您尝试与服务器通信并发现连接已被切断之前，您无法检测到客户端何时被强制断开与 DataSnap 服务器的连接，因此我们`TApplicationEvents`在应用程序的主窗体中添加了一个并编写了一个事件处理程序为`OnException`事件。当我们看到 时`EIdSocketError`，我们知道连接已死，因此我们向用户显示一条消息，说同样多，然后调用`Abort`，以便在本地数据集中不会发生`Post`or 。`Delete`用户可以重新登录，然后再次单击**保存**或**删除**以完成之前的操作。

我们的全局异常处理程序如下所示：

```
procedure TMainForm.AppEventsException(Sender: TObject; E: Exception);
begin
  if E is EIdSocketError then
  begin
    AppEvents.CancelDispatch;
    MessageDlg('The connection to the database was lost.  You must log in before you retry the failed action.  Actual error message:'#13#10#13#10 + E.Message, mtError, [mbOK], 0);
    Abort;
  end;

  if E is TDBXError then
  begin
    AppEvents.CancelDispatch;
    MessageDlg('The database returned an error.  If you cannot correct the issue, please contact customer service with the following database error message:'#13#10#13#10 + E.Message, mtError, [mbOK], 0);
    Abort;
  end;

  // Show any other unhandled exceptions
  Application.ShowException(E);
end; 
```

这`TDBXError`是我们捕获的另一个问题，因为它通常意味着发生了数据库错误，例如外键或唯一键违规。由于没有在数据库中`Abort`进行更改，因此我们在本地进行更改，这使我们与数据库保持同步。

由于我们处理与数据库同步的方式（通过`OnBeforePost`和`OnBeforeDelete`），连接被切断并且用户重新连接并获得新的 DataSnap 会话并不重要。我们甚至可以重新启动 DataSnap 服务器，而不会丢失用户所做的更改等。他们只需再次登录并单击**保存**。什么都不会丢失。

所有这一切都回答了您的第一个问题......有一天，我们将实现离线模式，`TClientDataSet`可以将其保存到用户的 HDD，下次他们登录时，我们将进行同步以应用所有本地保存的更改。但是我们还没有这样做——所以我对你的第二个问题没有很好的答案。

# ibm-connections - 请求访问令牌失败，原因是：缺少参数代码，但属性列表有一个名为代码的属性？

> ID：13844221
> 
> 赞同：0
> 
> 时间：2012-12-12T16:30:29.067
> 
> 标签：ibm-connections, ibm-sbt

我正在对我的 GAE 应用程序和我们的 Connections4 测试环境之间的 OAuth2.0 流进行故障排除。在 Connections 服务器上启用跟踪后，我看到以下几行：

```
{_status: 1 _attributeList: {{name: request_type type: urn:ibm:names:oauth:request values: [access_token]},{name: client_id type: urn:ibm:names:oauth:param values: [socialdms4g]},{name: callback_uri type: urn:ibm:names:query:param values: [https://eog-fire-ice.appspot.com/socialdms]},{name: client_id type: urn:ibm:names:query:param values: [socialdms4g]},{name: code type: urn:ibm:names:query:param values: [Pb2JtuOb1UkgPyV6aT1LflZ12B6kL1]},{name: client_secret type: urn:ibm:names:query:param values: [REMOVED]},{name: grant_type type: urn:ibm:names:query:param values: [authorization_code]}} _cause: com.ibm.oauth.core.api.error.oauth20.OAuth20MissingParameterException: A required runtime parameter was missing: code}
[12-12-12 16:15:08:680 CET] 000000e8 CachedDBToken 3   processing exception with OAuthResult: invalid_request
[12-12-12 16:15:08:680 CET] 000000e8 CachedDBToken <  handleResultException Exit
                             {_status: 1 _attributeList: {{name: request_type type: urn:ibm:names:oauth:request values: [access_token]},{name: client_id type: urn:ibm:names:oauth:param values: [socialdms4g]},{name: callback_uri type: urn:ibm:names:query:param values: [https://eog-fire-ice.appspot.com/socialdms]},{name: client_id type: urn:ibm:names:query:param values: [socialdms4g]},{name: code type: urn:ibm:names:query:param values: [Pb2JtuOb1UkgPyV6aT1LflZ12B6kL1]},{name: client_secret type: urn:ibm:names:query:param values: [REMOVED]},{name: grant_type type: urn:ibm:names:query:param values: [authorization_code]}} _cause: com.ibm.oauth.core.api.error.oauth20.OAuth20MissingParameterException: A required runtime parameter was missing: code}
[12-12-12 16:15:08:680 CET] 000000e8 OAuth20Endpoi <  processTokenRequest Exit 
```

用于调用此序列的 url 包含一个代码（和所有其他）参数。

这可能是什么原因，甚至更好，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T01:43:35.113

至少我们可以很容易地看出问题所在:) com.ibm.oauth.core.api.error.oauth20.OAuth20MissingParameterException: A required runtime parameter was missing: code

代码是应在[请求中发送以获取访问令牌](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-v2-31#section-4.1.3)的参数之一。搜索 SDK 的 src 代码，看起来应该一直在 OAuth2Handler.getAccessTokenForAuthorizedUser() 中发送。是这样称呼的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-19T06:52:56.107

@红球

这就是我们今天的工作

```
redirectURL = "/oauth2/endpoint/connectionsProvider/authorize?response_type=code&_oauth_client_auto_authorize=true&client_id="+AppId+"&callback_uri="+CallbackUrl; 
```

其中 AppId 和 CallBackUrl 特定于您的应用程序。

在你的 callBackUrl Servlet 的 doGet 中，使用这个帮助类

```
com.ibm.sbt.security.authentication.oauth.consumer.OAuth2Handler 
```

我们已经这样做了

```
OAuth2Handler oAuth2Handler = new OAuth2Handler();
logger.warning("WARNING Always trusting SSL certificate !!");
oAuth2Handler.setForceTrustSSLCertificate(true);
logger.fine("getting accesstoken...");
oAuth2Handler.setClient_uri(CallbackUrl);

oAuth2Handler.setConsumerKey(AppId);
oAuth2Handler.setAuthorization_code(code);
oAuth2Handler.setConsumerSecret(AppSecret);
oAuth2Handler.setAccessTokenURL(AccessTokenUrl);

logger.fine("getting token using GET...");
oAuth2Handler.getAccessTokenForAuthorizedUser();
String accessToken = oAuth2Handler.getAccessToken();
String expiresIn = oAuth2Handler.getExpiresIn()
String refreshToken = oAuth2Handler.getRefreshToken(); 
```

# c# - 将日期时间从 xml 日期时间转换为纪元格式

> ID：13844222
> 
> 赞同：0
> 
> 时间：2012-12-12T16:30:29.253
> 
> 标签：c#, android, xml

我正在使用具有 datetime 属性的 xml 提供一个 android 应用程序。这里的问题是，应用程序接受 13 位数字的日期时间，如 1347712845061。我无法在 c# 中找到进行此类转换的选项。

有人有什么建议吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T16:33:42.720

假设样本值是 2012 年 9 月 15 日星期六 12:40:45 UTC，它仅表示“自 Unix 纪元以来的毫秒数”。（这是 a 中的信息`java.util.Date`。）所以你可以写：

```
private static readonly DateTime UnixEpoch =
    new DateTime(1970, 1, 1, 0, 0, 0, DateTimeKind.Utc);

public static DateTime FromJavaDate(long millisSinceEpoch)
{
    return UnixEpoch.AddMilliseconds(millisSinceEpoch);
} 
```

（您也可以使用 a `DateTimeOffset`，它的偏移量始终为 0。）

# sql - SQL 在函数中将时间设置为午夜

> ID：13844225
> 
> 赞同：0
> 
> 时间：2012-12-12T16:30:32.810
> 
> 标签：sql, datetime

我有这个功能

```
ALTER FUNCTION [General].[GetWeekEnding] 
(
@Date DATETIME
)
RETURNS DATETIME
AS
BEGIN
-- Return the result of the function
RETURN (DATEADD(day, -1 - (DATEPART(dw, @Date) + @@DATEFIRST - 2) % 7, @Date) + 7)
END 
```

我还需要将时间设置为 00:00:00.000 以及找到所提供日期的一周结束有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:52:32.563

我使用 UDF 将时间组件添加到日期，例如

```
CREATE FUNCTION [dbo].[DateTimeAdd] 
( 
      @datepart         date, 
      @timepart         time 
) 
RETURNS datetime2 
AS 
BEGIN 
      RETURN DATEADD(dd, DATEDIFF(dd, 0, @datepart), CAST(@timepart AS datetime2)); 
END 
```

然后在您的情况下，您可以像这样使用它：

```
SELECT dbo.DateTimeAdd(DATEADD (D, -1 * DatePart (DW, GetDate()) + 7, GetDate()), DATEADD(hh, 0, CAST(DATEADD(DAY, DATEDIFF(DAY, -1, GETDATE()), -1)  AS TIME))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:53:34.417

自 SQL Server 2005 以来，删除时间的最佳方法是强制转换为`date`数据类型：

```
select cast(@Date as date) 
```

我建议你让你的函数返回 a`date`而不是 a `datetime`。

要获得一周结束，您需要一个查找表来将一周中的日期映射到整数。您可以使用`datepart`. 但是，这取决于系统设置。这是一个函数：

```
Create FUNCTION [GetWeekEnding] (
   @Date DATETIME,
   @WeekEndingDOW varchar(10)
)
RETURNS DATE
AS
BEGIN
-- Return the result of the function
    declare @newdate datetime;
    with lookup as (
        select 'Sunday' as dow, 0 as daynum union all
        select 'Monday' as dow, 1 as daynum union all
        select 'Tuesday' as dow, 2 as daynum union all
        select 'Wednesday' as dow, 3 as daynum union all
        select 'Thursday' as dow, 4 as daynum union all
        select 'Friday' as dow, 5 as daynum union all
        select 'Saturday' as dow, 6 as daynum
       )
    select @newdate = @Date - (select daynum from lookup where datename(dw, @date) = dow) + (select daynum from lookup where @WeekEndingDOW = dow);
    select @newdate = (case when @newdate < @date then @newdate + 7 else @newdate end)
    RETURN cast(@newdate as date)
END; 
```

请注意，此函数确实在`datetime`内部使用。出于某种我无法理解的原因，当@date 是日期时间时，您可以说“@date + 1”来表示“在日期值上加一天”。但是，当 @date 是日期时，这不起作用。（dateadd 函数也是如此。）

# asp.net-mvc-4 - ASP.NET MVC4：如何将视图模型和其他数据传递给视图

> ID：13844229
> 
> 赞同：0
> 
> 时间：2012-12-12T16:30:49.097
> 
> 标签：asp.net-mvc-4, ef-code-first, viewmodel

我创建了一个名为 DashboardViewModel 的 ViewModel：

```
public class DashboardViewModel
{        
    public Hardware Hardware { get; set; }
    public Software Software { get; set; }      
} 
```

我将 ViewModel 传递给 ActionResult 中的视图。但我也需要传递其他东西。这是我的 ActionResult：

```
public ActionResult Index()
{

    HardwareType hwt = new HardwareType { HType = "PC" };
    IEnumerable<Hardware> Pcs = db.Hardware.Where(h => h.HardwareType.Contains(hwt));

    DashboardViewModel dvm = new DashboardViewModel();   

    return View(dvm);
} 
```

`Pcs`如果我已经通过了，如何通过视图`dvm`？我什至不知道这是否是正确的方法。我想要完成的是在页面上创建导航。因此，我不仅将拥有个人电脑，而且还将拥有显示器和打印机以传递给视图，以及软件。这是我的硬件类：

```
public class Hardware
{
    public int Id { get; set; }
    public virtual ICollection<DeviceType> Type { get; set; }
    public string AssetTagId { get; set; }
    public virtual ICollection<Manufacturer> Manufacturer { get; set; }
    [Required]
    [StringLength(50)]
    public string ServiceTagId { get; set; }
    [Required]
    [StringLength(50)]
    public string SerialNumber { get; set; }
    [Required]
    [StringLength(75)]
    public string ProductNumber { get; set; }
    // [Required]
    [StringLength(20)]
    public string PurchaseDate { get; set; }
    [StringLength(20)]
    public string WarrantyExpiration { get; set; }
    [Required]
    [StringLength(20)]
    public string WarrantyType { get; set; }
    public virtual ICollection<Location> Location { get; set; }
    public virtual ICollection<HardwareType> HardwareType { get; set; }
    [Required]
    [StringLength(2000)]
    public string Notes { get; set; }
    public string POATag { get; set; }
} 
```

对于我想做的事情（使用各种硬件和软件创建导航）的最佳方法是什么？我是 MVC 的新手，正在尝试遵循有关做什么的建议，但我可以使用更高级别的方法，因为也许我正在处理这一切都是错误的。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:37:13.570

你可以把你`Pcs`的`ViewBag or ViewData`如下：

```
public ActionResult Index()
{

    HardwareType hwt = new HardwareType { HType = "PC" };
    IEnumerable<Hardware> Pcs = db.Hardware.Where(h => h.HardwareType.Contains(hwt));
    ViewBag.Pcs=Pcs;//or ViewData["Pcs"]=Pcs;

    DashboardViewModel dvm = new DashboardViewModel();   

    return View(dvm);
} 
```

`ViewBag`是动态对象。您可以向其中添加任何内容。使用任何名称，例如`Pcs`，您也可以存储`ViewBag`为`ViewBag.AnyNameYouLike=Pcs;`

```
**RAZOR SYNTAX:** 
```

只需应用循环，您就完成了。

```
@foreach(var pc in ViewBag.Pcs)
{
  @pc.Id;//Will give you id

} 
```

您可以像这样遍历所有属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:38:55.003

创建一个顶级视图模型 - 就像你拥有的一样`DashboardViewModel`- 并将所有必要的模型添加为属性。

如果您为该顶级视图模型中所需的每个业务模型创建视图模型，那就太好了。

将业务对象自动映射到新的视图模型 - 请参阅[AutoMapper](http://automapper.codeplex.com/)示例。这样，您只传递视图实际需要的信息。

# batch-file - 批处理文件 - 捕获 PSEXEC 结果

> ID：13844231
> 
> 赞同：5
> 
> 时间：2012-12-12T16:30:58.707
> 
> 标签：batch-file, psexec

如果我成功运行 PSEXEC 命令，它会显示...
“cmd 在工作站上退出，错误代码为 0。”

有什么办法可以防止这种情况并做类似的事情

```
psexec \\workstation.domain -u username -p password cmd /c "assoc.pdf= "
if %errorlevel%==0 (
  echo Success!
) else (
  REM display psexec error here.
) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T19:13:22.373

由于我的编辑被拒绝...

发布的原始代码是更大脚本的一部分吗？如果是这样，那么您是否将您的错误代码设置为与 ERRORLEVEL 环境变量匹配？

```
psexec \\workstation.domain -u username -p password cmd /c "assoc.pdf= "
IF '%ERRORLEVEL%'=='0' (
  echo Success!
) else (
  REM display psexec error here.
) 
```

每当尝试批量确定 IF / THEN 并使用 == 时，您需要将变量和 valuecheck 放在单个“'”标记中。上面的代码为您解决了这个问题，并将 errcode 替换为 ERRORLEVEL，这是 Windows 的默认环境变量。

此外，在实践中，我总是在任何 ERRORLEVEL 检查之前使用以下内容来删除初始值以正确捕获错误。

```
verify >nul 
```

在这种情况下，我会执行以下操作：

```
verify >nul
psexec \\workstation.domain -u username -p password cmd /c "assoc.pdf= "
    IF '%ERRORLEVEL%'=='0' (
      echo Success!
    ) else (
      echo.Error is %ERRORLEVEL%; please see http://msdn.microsoft.com/en-us/library/ms681381(VS.85).aspx for more details.
    ) 
```

我添加了一个 weburl 来检查收到的错误。

或者，您可以自动打开相应页面的 URL：

```
@ECHO OFF
    verify >nul
    set ERRCODE=0
    psexec \\workstation.domain -u username -p password cmd /c "assoc.pdf= "
        IF '%ERRORLEVEL%'=='0' (
          echo Success!
        ) else (
          set ERRCODE=%ERRORLEVEL%
        )
IF %ERRCODE% LEQ 499 set MSERROR=681382
IF %ERRCODE% GTR 500 set MSERROR=681388
IF %ERRCODE% GTR 1000 set MSERROR=681383
IF %ERRCODE% GTR 1300 set MSERROR=681385
IF %ERRCODE% GTR 1700 set MSERROR=681386
IF %ERRCODE% GTR 4000 set MSERROR=681387
IF %ERRCODE% GTR 6000 set MSERROR=681389
IF %ERRCODE% GTR 8200 set MSERROR=681390
IF %ERRCODE% GTR 9000 set MSERROR=681391
IF %ERRCODE% GTR 12000 set MSERROR=681384

IF ERRCODE NEQ 0 start http://msdn.microsoft.com/en-us/library/ms%MSERROR%(v=vs.85).aspx
IF ERRCODE NEQ 0 echo.This failed with ERROR: %ERRCODE%
pause 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T18:29:35.913

供参考`psexec` [http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx](http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx)

确定程序结果的第一步是确定所有返回值以及是否设置了错误级别。

```
@echo off

:: Method 1, Handle a single line of output. No errorlevel support
for /f "usebackq delims=" %%A in (`psexec \\workstation.domain -u username -p password cmd /c "assoc.pdf= " ^| find /v "error code 0"`) do (
    rem Display the error
    echo.%%A
    goto Failed
)
echo.Success
:Failed

:: Method 2, Handle multiple lines of output. No errorlevel support
for /f "usebackq delims=" %%A in (`psexec \\workstation.domain -u username -p password cmd /c "assoc.pdf= "`) do (
    rem Check the status
    for /f "usebackq delims=" %%X in (`echo."%%~A" ^| find /v "error code 0"`) do (
        echo.%%X
    )
    for /f "usebackq delims=" %%X in (`echo."%%~A" ^| find "error code 0"`) do (
        echo.Success
    )
)

:: Method 3, Supports error level variable; only works if the called program supports it.
verify > nul
psexec \\workstation.domain -u username -p password cmd /c "assoc.pdf= "> nul
if %ERRORLEVEL% EQU 0 echo.Success
if %ERRORLEVEL% NEQ 0 echo.Error

:: Method 4, specific error message with error level, requires delayed expansion.
setlocal enabledelayedexpansion
verify > nul
for /f "usebackq delims=" %%A in (`psexec \\workstation.domain -u username -p password cmd /c "assoc.pdf= "`) do (
    if !ERRORLEVEL! EQU 0 echo.Success
    if !ERRORLEVEL! NEQ 0 echo.%%A
)
endlocal

pause 
```

# atoi - STM32 atoi 和 strtol 有时会丢失前 2 位数字

> ID：13844233
> 
> 赞同：3
> 
> 时间：2012-12-12T16:31:04.777
> 
> 标签：atoi, stm32, strtol

我正在读取通过 RS485 发送的值，这是编码器的值我首先检查它是否返回了 E 字符（编码器报告错误），如果没有，则执行以下操作

```
 *position = atoi( buffer ); 
    // Also tried *position = (s32) strtol(buffer,NULL,10); 
```

缓冲区中的值为 4033536 并且位置设置为 33536 这不会在此函数中每次都发生，可能 1000 次中的 1 次，尽管我没有计算。如果失败，将程序计数器重新设置并再次执行该行会返回相同的结果，但再次启动调试器会导致值正确转换。

我正在使用 keil uvision 4，它是一个使用 stm32f103vet6 和 stm32f10 库 V2.0.1 的自定义板，这真的让我很难过，从来没有遇到过这样的事情，在得到任何帮助之前，我们将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-06T14:34:44.643

没人知道我只会发布我最终做的事情，那就是编写我自己的转换函数并不理想，但它确实有效。

```
bool cdec2s32(char* text, s32 *destination)
{
    s32 tempResult = 0;
    char currentChar;
    u8 numDigits = 0;
    bool negative = FALSE;
    bool warning = FALSE;

    if(*text == '-')
    {
      negative = TRUE;
      text++;
    }

while(*text != 0x00 && *text != '\r') //while current character not null or carridge return
{
    numDigits++;
    if(*text >= '0' && *text <= '9')
    {
        currentChar = *text;
        currentChar -= '0';

        if((warning && ((currentChar > 7 && !negative) || currentChar > 8 && negative )) || numDigits > 10) // Check number not too large
        {
            tempResult = 2147483647;
            if(negative)
                tempResult *= -1;

            *destination = tempResult;
            return FALSE;
        }

        tempResult *= 10;
        tempResult += currentChar;
        text++;
        if(numDigits >= 9)
        {
            if(tempResult >= 214748364)
            {
                warning = TRUE; //Need to check next digit as close to limit
            }
        }
    }
    else if(*text == '.' || *text == ',')
    {
        break;
    }
    else
        return FALSE;
}
if(negative)
    tempResult *= -1;

*destination = tempResult;
return TRUE; 
```

}

# database - 如何在 Ruby on Rails 中一次更新多个记录？

> ID：13844234
> 
> 赞同：0
> 
> 时间：2012-12-12T16:31:07.333
> 
> 标签：database, ruby-on-rails-3, update-attributes

我正在开发一个 Ruby on Rails 应用程序。在我的控制器中，我需要多次更新表属性。我已将此逻辑放入控制器中。

```
def index   
  if request.post?
    @user_new = Bookmark.new(params[:user_new])
    tags = @user_new.tags.split(",")
    i=0
    while i < tags.length
      @user_new.update_attributes(:title => @user_new.title, :url => @user_new.url, :tags => i)  
      i=i+1
    end

   @check = "hello"
  end   

 end 
```

这将迭代 while 循环，直到达到标签数组大小。并且多次更新是使用表内的不同值完成的。

这应该会更新所有记录。如果数组大小为 3，则应插入 3 条记录。但它没有发生。谁能告诉我如何使用数组作为每行的区分因子插入多条记录？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:50:00.850

像这样的工作：

```
@user_new = Bookmark.new(params[:user_new])
if @user_new.save!
  @user_new.tags.split(",").each do |tag|
    tag.update_attributes(:title => @user_new.title, :url => @user_new.url)  
  end
else
  < do something else >>
end 
```

或者你可以使用 .create 代替。

**按照@Thilo 的另一篇文章来索引标签。**

此外，如果您使用 ! 在 update_attributes 上！你看到任何错误。

您可能会遇到一些验证错误。试试看并检查控制台/日志。

# c++ - 创建一个带有整数链表的 n 数组

> ID：13844235
> 
> 赞同：0
> 
> 时间：2012-12-12T16:31:24.290
> 
> 标签：c++, pointers, tree, trie

我最近做了一个 26array 并试图模拟一个字典。

我似乎无法弄清楚如何制作这个。我尝试过传入整数的链表而不是字符串。我当前的代码创建了 26 个节点（az），然后每个节点都有 26 个节点（az）。我想用整数实现一种方法，比如（1-26）。这些 int 节点将表示项目，而我想要传入的 int 链表将包含一组我想要在树中表示的 int，类似于字符串。

示例：传入集合 {1, 6 , 8}，而不是诸如“hello”之类的字符串

```
 #include <iostream>
using namespace std;

class N26
{
   private:
       struct N26Node 
        {
          bool isEnd;
          struct N26Node *children[26];
        }*head;

   public:
      N26();
      ~N26();

      void insert(string word);
      bool isExists(string word);
      void printPath(char searchKey);
};
N26::N26()
{
    head = new N26Node();
    head->isEnd = false;
}
N26::~N26()
{
}

void N26::insert(string word)
{
   N26Node *current = head;
   for(int i = 0; i < word.length(); i++)
   {
       int letter = (int)word[i] - (int)'a';

       if(current->children[letter] == NULL)
       {
           current->children[letter] = new N26Node();
       }
       current = current->children[letter];
   }
   current->isEnd = true;

}

/*      Pre:  A search key
 *     Post:  True is the search key is found in the tree, otherwise false
 *  Purpose:  To determine if a give data exists in the tree or not
 ******************************************************************************/

bool N26::isExists(string word)
{
    N26Node *current = head;
    for(int i=0; i<word.length(); i++)
    {
        if(current->children[((int)word[i]-(int)'a')] == NULL)
        {
            return false;
        }
        current = current->children[((int)word[i]-(int)'a')];
    }
    return current->isEnd;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:11:59.093

```
class N26
{
  private:
    N26Node newNode(void);
    N26Node *mRootNode;
  ...    
};

N26Node *newNode(void)
{
  N26Node *mRootNode = new N26Node;
  mRootNode = NULL;
  mRootNode->mData = NULL;

  for ( int i = 0; i < 26; i++ )
    mRootNode->mAlphabet[i] = NULL;
  return mRootNode;
} 
```

***啊! 我的眼睛！***

说真的，你正在尝试一些太高级的东西。您的代码充满了错误，无法按预期工作。修修补补将无济于事，您必须回到指针和链表的基础知识。学习基础知识，*不要尝试链接列表之类的东西，*直到您了解上面的代码有什么问题。

我会给你一些提示：“内存泄漏”、“悬空指针”、“类型不匹配”、“未定义的行为”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T00:51:30.603

我没有完全使用链表，但我设法使用数组让它工作。

```
/* ***  Author:       Jamie Roland
     *  Class:        CSI 281
     *  Institute:    Champlain College
     *  Last Update:  October 31, 2012
     *
     *  Description:
     *      This class is to implement an n26 trie.  The 
     *  operations
     *  available for this impementation are:
     *  
      *  1\.  insert
     *  2\.  isEmpty
      *  3\.  isExists
     *  4\.  remove
     *  5\.  showInOrder
     *  6\.  showPreOrder
     *  7\.  showPostOrder
     *
     *  Certification of Authenticity:  
     *     I certify that this assignment is entirely my own work.
     **********************************************************************/
#include <iostream>
using namespace std;

class N26
{
   private:
       struct N26Node 
        {
          bool isEnd;
          struct N26Node *children[26];
        }*head;

   public:
      N26();
      ~N26();

      void insert(int word[]);
      bool isExists(int word[]);
      void printPath(char searchKey);
};
N26::N26()
{
    head = new N26Node();
    head->isEnd = false;
}
N26::~N26()
{
}

void N26::insert(int word[])
{
    int size = sizeof word/sizeof(int);
   N26Node *current = head;
   for(int i = 0; i < size; i++)
   {
       int letter = word[i] - 1;

       if(current->children[letter] == NULL)
       {
           current->children[letter] = new N26Node();
       }
       current = current->children[letter];
   }
   current->isEnd = true;

}

/*      Pre:  A search key
 *     Post:  True is the search key is found in the tree, otherwise false
 *  Purpose:  To determine if a give data exists in the tree or not
 ******************************************************************************/

bool N26::isExists(int word[])
{
    int size = sizeof word/sizeof(int);
    N26Node *current = head;
    for(int i=0; i<size; i++)
    {
        if(current->children[(word[i]-1)] == NULL)
        {
            return false;
        }
        current = current->children[(word[i]-1)];
    }
    return current->isEnd;

} 
```

# php - 这样使用return语句有错吗？

> ID：13844236
> 
> 赞同：0
> 
> 时间：2012-12-12T16:31:26.333
> 
> 标签：php, loops, autoloader

我有这个自动加载器方法，用于根据需要包含类文件。

```
public static function autoloader($className) {

    $fileExists = false;
    foreach(array(LIBS_PATH, CONTROLLERS_PATH, MODELS_PATH) as $path) {

        // Check if the class file exists and is readable
        if(is_readable($classPath = $path . '/' . $className . '.php')) {
            // Include the file
            require($classPath);
            $fileExists = true;
            break;
        }
    }

    if($fileExists === false) {
        exit('The application cannot continue as it is not able to locate a required class.');
    }
} 
```

这很好，但我想这样更好：

```
public static function autoloader($className) {

    foreach(array(LIBS_PATH, CONTROLLERS_PATH, MODELS_PATH) as $path) {

        // Check if the class file exists and is readable
        if(is_readable($classPath = $path . '/' . $className . '.php')) {
            // Include the file
            require($classPath);
            return;
        }
    }
    exit('The application cannot continue as it is not able to locate a required class.');
} 
```

如您所见，我在循环中间使用 return 语句来终止函数的其余部分，因为已包含类文件并且该方法已完成其工作。

如果找到匹配项，哪种方式是跳出循环的最佳方式？我只是不确定是否使用 return 语句，因为我总是将它与从方法返回一些值相关联。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:34:15.497

Return 可用于简单地跳出方法/函数，这种用法是完全合法的。真正要问的问题是你觉得它对可读性有什么影响？

关于早期回报有不同的思想流派。

一所学校维护一个单一的入口/出口点，声称它使代码更易于阅读，因为可以确保将达到代码底部的逻辑。

另一所学校表示第一所学校已经过时，这并不是一个紧迫的问题，特别是如果一个人保持较短的方法/函数长度。

两者之间存在一种媒介，即存在早期回报和复杂逻辑之间的权衡。

这取决于你的判断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:34:48.007

不，这样使用 return并**没有错。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:35:10.570

至少看一下手册：

[http://php.net/manual/en/function.autoload.php](http://php.net/manual/en/function.autoload.php)

`void __autoload ( string $class )`

**void**意味着它不应该返回任何东西。
但这不是错误。

`require_once`并且在包含类定义时也可以更好地使用。

# ios - 将 mobileprovision 文件添加到 Xcode

> ID：13844238
> 
> 赞同：42
> 
> 时间：2012-12-12T16:31:36.087
> 
> 标签：ios, xcode

我知道这很简单，但我已经阅读了所有问题，似乎没有一个简单的答案。

我已经创建了一个 appID。我创建了一个 mobileprovision 文件，下载并双击它，一切看起来都很好。

我如何让这个配置文件出现在 XCode 中？它会出现在哪里？

使用最新版本的 iOS 和 XCode。

* * *

它正在出现，显然它只是需要时间才能出现。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-12-12T16:36:30.167

在 Xcode 中打开 Organizer（Window -> Organizer），转到 Devices 选项卡并在左侧抽屉中选择 Provisioning Profiles。然后使用右下角的刷新按钮。

# 2018 年更新

来自@mikeLspohn 评论：转到 Window > Devices 然后右键单击您的设备并选择 Show Provisioning Profiles ... 从那里您可以单击 +/- 添加或删除配置文件 -

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2014-03-23T04:18:04.563

两步：

1.  首先将其拖到 iTunes 上。将 .mobileProvision 放到 iTunes 上会将其安装到`~/Library/MobileDevice/Provisioning Profiles`它应该去的地方。

2.  第二次双击 .mobileProvision 将其添加到 Xcode 商店。

之后重新启动 Xcode 并没有什么坏处。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-12T16:39:27.207

您可以随时将文件拖到 Xcode 停靠图标上。这会将它添加到 Xcode 的商店中。当您的目标具有正确的捆绑 ID 并且您拥有私钥时，您应该能够在代码签名构建设置中选择适当的配置文件和签名身份。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-12-07T19:17:17.643

在 XCode 12.2 中，单击菜单中的**Window >** **Devices and Simulators**

右键单击您的设备，然后选择**显示配置文件...**

[![在此处输入图像描述](../Images/acca7a1ee6eca9355174231fcaee3a39.png)](https://i.stack.imgur.com/7RbP9.png)

然后单击“+”添加您的**.mobileprovision**文件。

[![在此处输入图像描述](../Images/70d3bdb2de54794af831de6f1fe52422.png)](https://i.stack.imgur.com/GWDSI.png)

**更新：**

上面的方法添加了 mobileprovision 文件并在 Xcode UI 中显示。但是，它并没有添加到

`/Users/myusername/Library/MobileDevice/Provisioning Profiles`

当我从 Xcode 构建时，它仍然说 mobileprovision 文件丢失。

最后，我发现我只需要双击每个mobileprovision文件即可将它们添加到文件夹下

`/Users/myusername/Library/MobileDevice/Provisioning Profiles`

这次我的 Xcode 构建没有问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-01-22T00:43:36.247

Xcode 12.3

*   在导航器中选择您的项目
*   选择你的目标
*   选择签名和功能
*   取消选中自动管理签名框

然后，您将看到一个下拉菜单以选择配置文件。假设您已经在开发者网站上设置了配置文件，您可以直接从 Apple '下载'。或者您可以“导入”您单独下载的文件。

*   现在，再次选中自动签名框。

我不确定这是否有必要，但正如 Hongbo Miao 指出的那样，您可以下载文件并双击它以“将其添加到库中”。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-07-18T22:03:59.457

转到`http://developer.apple.com`设备上的 Safari 并导航到 SDK/下载部分。从该页面下载`.mobileconfig`文件，并在出现提示时安装。这将允许您在转到设置 -> 常规 -> 软件更新时安装 beta 版本。

# jms - jmeter中的JMS点对点

> ID：13844239
> 
> 赞同：0
> 
> 时间：2012-12-12T16:31:41.330
> 
> 标签：jms, jmeter, load-testing, performance-testing

注册：JMeter 点对点

你能告诉我如何获得`QueueConnnectionFaction`

和`ContextConnectionFactory`

谁能帮我配置JMETER 的`JNDI`属性`JMS POINT-TO-POINT`

```
ERROR - jmeter.protocol.jms.sampler.JMSSampler: progress/message/jclient/TopicConnectionFactory java.lang.NoClassDefFoundError: progress/message/jclient/TopicConnectionFactory 
```

请提供一些解决方案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T08:33:13.933

看来您没有从 jms 提供程序中放置依赖项 jar，请参阅：

*   java.lang.NoClassDefFoundError：进度/消息/jclient/TopicConnectionFactory

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-26T16:36:02.000

`QueueConnnectionFactory`是在队列之前创建的队列容器。我曾经使用 Hermes JMS 应用程序来获取此信息，但您也可以从 WebLogic 获取它。

比如下图是我的配置，使用for字段的信息，`binding`使用for`QueueConnectionFactory`字段的信息，`initialContextFactory`别忘`InitialContextFactory`了`providerURL`在`ProviderURL`字段中使用。

![图像1](../Images/f9f6c85e907d510ee6f1bc7068ec8739.png)

在此示例中，我没有得到响应。出于这个原因，我只输入我的请求者队列的名称。

确保信息正确。在`JMS Properties`您可以使用 Headers 的请求。

![图2](../Images/4b6f721407f02c1bcd9c6b92b0cadf8d.png)

![图3](../Images/3d6603f0c2a870598abc643d2b0f65e7.png)

# c# - MVC 4 在控制器中编辑路由参数

> ID：13844240
> 
> 赞同：1
> 
> 时间：2012-12-12T16:31:44.447
> 
> 标签：c#, url-rewriting, asp.net-mvc-4, asp.net-mvc-routing

我有一个小问题，希望有人可以帮助我。

在 ASP.net MVC 4 (C#) 上，我需要能够从我的控制器编辑我的路由参数。

例如请求网址是

```
MyController/MyAction/param1/param2 
```

现在`MyAction`我需要编辑返回的 url 以便它显示

```
MyController/MyAction/Modifiedparam1/Modifiedparam2 
```

这样做的目的是翻译我从数据库中检索到的语言更改的参数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:41:20.170

不要与框架打架。它迟早会反击。而是遵循 mvc 原则，从控制器操作或过滤器/拦截器重定向来这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:37:06.707

请为此使用重定向结果（在`MyAction`某些情况下）：

```
return RedirectToAction("MyAction", { param1Name = Modifiedparam1, param2Name = Modifiedparam2 }; 
```

基本上你不能在控制器中修改 url。Urls 是浏览器发送来调用某些操作的东西。您可能只是说浏览器将用户重定向到另一个 url。

# java - Java中的正则表达式模式用于查找和删除重复的电子邮件

> ID：13844243
> 
> 赞同：1
> 
> 时间：2012-12-12T16:31:44.853
> 
> 标签：java, regex

```
public String readEmails(String fileData) {

    String regex = "[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9]"
            + "(?:[a-z0-9-]*[a-z0-9])?\\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?";

    String emails = "", emails2 = "";
    fileData = fileData.toLowerCase();
    Matcher m = Pattern.compile(regex).matcher(fileData);
    while (m.find()) {
        emails += m.group()+", ";
    }

    return emails;
} 
```

我正在阅读 rtf 文件，查找电子邮件，然后存储到数据库中。我发现一封电子邮件被提取了两次，即 HYPERLINK "mailto: aa@ymail.com" 然后是 aa@ymail.com

如何通过删除所有相似的电子邮件来匹配两封相似的电子邮件并保留一份副本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:16:33.763

您可以将代码更改为

```
Set<String> set = new HashSet<String>();
Matcher m = Pattern.compile(regex).matcher(fileData);
    while (m.find()) {
        String email = m.group();
        if (!set.contains(email)) {
           emails += email + ", ";
           set.add(email);
        }
    }

    return emails;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:01:24.873

而不是将电子邮件保存为带逗号的字符串：

1.  小写它们。
2.  将它们存储在字典（HashSet）中以对它们进行重复数据删除
3.  最后，从字典中的元素创建输出字符串。

# synchronization - 绘制矢量时钟时间线

> ID：13844245
> 
> 赞同：2
> 
> 时间：2012-12-12T16:31:55.760
> 
> 标签：synchronization, distributed-computing, clock, distributed-system

我有一个问题要求绘制矢量时钟时间线图来说明事件的部分顺序发生之前的关系。

以下是矢量时钟：

```
V(a) = (4,4,2)
V(b) = (4,2,2)
V(c) = (2,2,3)
V(d) = (4,3,2)
V(e) = (4,4,4)
V(f) = (3,2,2) 
```

我不确定如何确定每个事件属于哪个进程。我使用的所有示例都使用向量时钟，其值从 0 开始，例如 V(a)=(1,0,0) 所以我假设事件 a 是第一个发生的事件或者它与其他进程并发但我不知道如何做这个特定的问题。

任何人都可以帮忙吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-03T15:58:57.903

您正在寻找的是下图：

p1 -​​------ f(3,2,2) ----------- b(4,2,2) --------------- ---------------------

p2 --------------------------------- d(4,3,2) --------一（4,4,2）-------------

p3 -------- c(2,2,3) --------------------------------- ---------- e(4,4,4) ---

b -> d 和 a -> e 之间也有进程间通信

这是为什么？

您会看到具有共同点的流程在同一条线上，然后您可以在流程线上对它们进行逻辑排序，因为该流程的线上没有任何变化。如果你对他们中的每一个都这样做，那么就很容易勾勒出整个交互。

希望这是您正在寻找的东西，尽管我认为这是一个很老的问题。:D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T09:51:21.433

假设原始矢量时钟算法，如[Fidge 所述](http://zoo.cs.yale.edu/classes/cs426/2012/lab/bib/fidge88timestamps.pdf)，这组矢量时钟读数是不可能的。

首先，观察有一个线性排序的事件链：f < b < d < a < e。该链中的每个元素与下一个元素的区别仅在于一个时钟组件并且仅相差 1。这意味着所有这些事件都发生在同一个进程上，因为否则链中的一对事件必须通过消息路径连接（因为它们是有序的，因此是因果连接的），但每条消息发送和接收都会改变向量时钟的 2 个分量（一次用于发送，一次用于接收）。

因此，链中的所有事件都发生在同一个进程上，但是对应于该进程的时钟分量必须沿着链单调增加。矛盾。

# synchronization - 仅在某些字段上同步文本文件

> ID：13844251
> 
> 赞同：3
> 
> 时间：2012-12-12T16:32:10.363
> 
> 标签：synchronization, text-files

我有一个这样的 PLIST 文件：

```
 <key>background_0</key>
    <dict>
        <key>Type</key>
        <string>Picture</string>
        <key>Position</key>
        <string>{239.5,160}</string>
        <key>Sizes</key>
        <string>{480,320}</string>
        <key>Scale</key>
        <string>{1.0,1.0}</string> 
```

这个文件有很多这样的块。我只想更改某些字段（**POSITION, SIZES**），不要更改其他字段。

因此，假设我将生成包含我需要的字段的相同文件，并排除那些不需要的字段。（Type 必须保持 type，Scale 必须保持 Scale）

所以如果我有类似的文件

```
A A
B B 
```

然后我添加一个文件

```
C C
D D 
```

并**排除第一个字符串**，结果必须是

```
A A
D D 
```

我知道**SED**可以帮助我，但我不知道如何。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:44:19.240

我自己找到的。不管怎么说，还是要谢谢你。

[乌龟](http://sourceforge.net/projects/tortoisesvn/?source=dlp)

# c# - 如何在服务中捕获应用程序启动？

> ID：13844253
> 
> 赞同：0
> 
> 时间：2012-12-12T16:32:18.757
> 
> 标签：c#, process, windows-services

尝试用VS 2012创建windows服务。默认情况下，服务有3种方法：

```
Constructor(say MyService)
OnStart
OnStop 
```

但是当我在构造函数中放入一些代码时，看起来它只运行了一次。

我想要的是：当一个应用程序从 Windows 启动时，例如 notepad.exe，我可以捕获它。我应该在构造函数中放置一个死循环来监视进程列表吗？我认为服务应该总是像死循环一样。那么当一个应用程序启动它时，如何在 MyService 中捕获它呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:40:39.887

> 我应该在构造函数中放置一个死循环来监视进程列表吗？

不，那进去了`OnStart()`。基本伪代码为：

*   开始：
    *   设置监控
    *   启动它
*   监控：
    *   while (true) 监控进程
    *   如果（停止信号）退出
*   停车
    *   向监控对象发出停止信号

# css - 如何在具有 :after 伪元素的链接中使用省略号

> ID：13844262
> 
> 赞同：0
> 
> 时间：2012-12-12T16:33:02.317
> 
> 标签：css

我有一个链接，如下图所示

![在此处输入图像描述](../Images/5cad6509e4fd3f8702f9f65c4257a704.png)

我想做的是申请

```
text-overflow: ellipsis; 
```

所以在这种情况下，“Page”这个词将被省略号替换，但仍然有箭头，它是链接的一个 :after 元素。

链接代码是这样的：

```
.next-lesson:after{
background: url("img/icons.png") no-repeat -9px -91px;
display: inline-block;
background-repeat: no-repeat;
width: 15px;
height: 15px;
content: "";
margin-left: 5px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:59:35.537

关于您的最后一条评论，您可以执行以下操作：

`position:relative`在链接的父 div 和`position:absolute`链接的伪元素上声明，使其独立于及其`a`声明的`overflow:hidden`. 相应地调整位置，一切都应该没问题。

# html - 鼠标进入时IE7浮动左移

> ID：13844263
> 
> 赞同：0
> 
> 时间：2012-12-12T16:33:05.850
> 
> 标签：html, css, internet-explorer-7

以下代码是我编写的表单的“工具栏”。一切正常，但**IE7**不行。当鼠标进入一个`div.btn`元素时，所有按钮都向左移动 1 或 2 个像素，`p>input.toggle`然后移动到最后一个按钮的右侧。

[演示](http://jsfiddle.net/CuGtD/1/)

HTML：

```
 <form class="form-file-upload" action="SiGA/pedido/add/" method="post" enctype="multipart/form-data">
          <div class="barra-cmd clear">
            <div class="btn btn-add bt-adicionar">
              <label><span class="icons icon-add"></span> Ad. Imagens</label>
              <input type="file" name="cmd_adicionar[]" accept="image/*" multiple="multiple" />
            </div>
            <div class="btn btn-send bt-enviar">
              <label><span class="icons icon-up"></span> Enviar</label>
              <input type="submit" name="cmd_enviar" value="Enviar" />
            </div>
            <div class="btn btn-cancel bt-cancelar">
              <label><span class="icons icon-cancel"></span> Cancelar</label>
              <input type="reset" name="cmd_cancelar" value="Cancelar" />
            </div>
            <div class="btn btn-del bt-limpar">
              <label><span class="icons icon-clean"></span> Apagar</label>
              <input type="button" name="cmd_apagar" value="Apagar" />
            </div>
            <p><input type="checkbox" name="cmd_apagar[]" value="" class="toggle" /></p>
            <div class="btn btn-next bt-finalizar">
              <label><span class="icons icon-next"></span> Finalizar pedido</label>
              <input type="button" name="cmd_fechar" value="Finalizar" />
            </div>
          </div>
        </form>​ 
```

CSS：

```
.btn{color:#fff;padding:7.5px 0;overflow:hidden;text-align:center;margin:0 2px;border-radius:5px;border:1px solid #aaa;background-image:url('../imgs/back.png');background-repeat:repeat-x;background-position:left top;}
.btn:hover{background-position:left center;}
.btn:active{background-position:left bottom;}
.btn-add{background-color:#4cb749;}
.btn-send{background-color:#3F8DCA;}
.btn-cancel{background-color:#fcd209;}
.btn-del{background-color:#df2227;}
.btn-next{background-color:#910B0E;}

.form-file-upload{display:block;}
  .form-file-upload .barra-cmd>div{float:left;width:150px;}
  .form-file-upload .barra-cmd label{z-index:1;color:#fff;text-shadow:0 0 15px #000;}
  .form-file-upload .barra-cmd div input{z-index:3;cursor:pointer;border-width:0 0 100px 200px;border-style:solid;border-color:transparent;position:absolute;top:0;right:0;margin:0;opacity:0;filter:alpha(opacity=0);}
  .form-file-upload .barra-cmd>p{margin:5px 0 0 -20px;z-index:4;position:relative;display:block;float:left;}
  .form-file-upload .barra-cmd .toggle{} 
```

# autocomplete - 如何让 CSS Intellisense 在 Visual Studio 2012 中的 .scss 文件中工作？

> ID：13844267
> 
> 赞同：3
> 
> 时间：2012-12-12T16:33:14.650
> 
> 标签：autocomplete, visual-studio-2012, intellisense, sass

我们在 VS 2010 中使用 Mindscape 的 Web Workbench 插件已经有一段时间了。它非常好。但是，在安装 Visual Studio 2012 后，我们注意到 CSS Intellisense 不再适用于 .scss 文件。

也就是说，如果我输入

```
.myStyle {
   display: 
} 
```

我希望在“display:”之后有一个 Intellisense 下拉菜单来显示“block”、“none”等选项。但我只看到 SASS 完成选项，没有 CSS 选项。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T16:33:14.650

1.  转到工具 > 选项 > 文本编辑器 > 文件扩展名
2.  添加扩展“scss”并将其与“CSS Source Editor”相关联
3.  转到工具>选项>文本编辑器> CSS
4.  选中“自动列表成员”的“声明完成”下的框

这将为您提供 CSS 补全，但不幸的是，您似乎将不再获得 SASS 内容的自动补全。所以选择你的毒药，直到有人提出更好的答案。:)

# ftp - Windows 中的 FTP 批处理脚本不起作用

> ID：13844269
> 
> 赞同：0
> 
> 时间：2012-12-12T16:33:19.033
> 
> 标签：ftp, batch-file, dos, ftp-client

我尝试从 FTP 下载一组文件。我为此使用以下命令。

```
ftp  -v -s:DownloadCommand.txt ftp.SampleFTP.com>>%log% 
```

此特定代码在开发机器中执行时有效，但在生产机器中执行时，它不起作用。我的日志文件中没有任何内容。没有错误被抛出。

有人可以帮忙吗？谢谢。

附加信息。Downloadcommand.txt 有以下内容

```
<username>
<password>
binary
cd <FolderName>
lcd <LocalPath>
prompt
mget <FileName>
quit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-25T14:39:09.827

问题是 .bat 文件无法访问 DownloadCommand.txt，尽管它们位于同一文件夹中。我通过在调用 FTP 之前使用 PUSHD“DownloadCommand.txt 的路径”解决了这个问题。

# php - 设置静态模型 CModel 的属性

> ID：13844273
> 
> 赞同：1
> 
> 时间：2012-12-12T16:33:24.327
> 
> 标签：php, static, yii, yii-cmodel

我正在修改依赖于 CActiveRecord 的现有功能代码。我现在连接到 sybase，它没有模式驱动程序，所以我用 CModel 而不是 CActiveRecord 重写。我的问题可能是我不理解这个通用的 OOP 概念？

原文：MyModelController.php

```
MyModel::model()->scenario='case1'; 
```

指代`::model()`不再有效...因为我相信此方法仅在基类为 CActiveRecord 时有效。

```
/**
 * Returns the static model of the specified AR class.
 * @param string $className active record class name.
 * @return ClientProg the static model class
 */
public static function model($className=__CLASS__)
{
    return parent::model($className);
} 
```

既然 MyModel 是基于 CModel 的，我该如何设置它的场景属性，就像我在基类是 CActiveRecord 时所做的那样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T00:08:25.660

当你调用 model() 时，它是在内部为你第一次创建一个实例，然后引用这个缓存的对象。

如果你的方法是静态的，那么不依赖于实例化版本的属性，你以后会头疼的。

检查静态属性是否满足您的需求，或将场景作为参数传递给您的静态调用。

无论如何，[static 它是邪恶的](http://kore-nordmann.de/blog/0103_static_considered_harmful.html)，所以如果可以的话，请避免它。

# ms-access - 插入错误

> ID：13844276
> 
> 赞同：0
> 
> 时间：2012-12-12T16:33:30.487
> 
> 标签：ms-access

所以我有一个系统，我需要从未绑定的文本框中获取数据并将所述数据提交到绑定的文本框中。那部分工作得很好，但我也想使用 insert into 命令来捕获未绑定框中的信息并将其提交到某种历史表中。

```
db.Execute "Insert Into stagingtest (Me.A, Me.B, Me.C)" & _
              "Values(" & Me.txtA & ", " & Me.txtB & ", " & Me.txtC & ")" 
```

这就是我目前所拥有的，但每次我运行它时，都会收到“需要对象”错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:39:09.170

看起来您的语法没有引用实际字段。
从您的 SQL 语句看来，您在*stagingtest*中有一个名为*Me.A*的字段。如果您将 Me.A,Me.B,Me.C 替换为有效字段，则一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:48:20.853

I changed the code to

```
CurrentDb.Execute "Insert Into stagingtest (A, B, C)" & _
              "Values ('" & Me.txtA & "', '" & Me.B & "', '" & Me.C & "')" 
```

and it seems to work without a hitch.

My apologies if I wasted anyone's time.

# sybase - 如何查看 Sybase 中的触发器何时被触发

> ID：13844277
> 
> 赞同：-1
> 
> 时间：2012-12-12T16:33:29.100
> 
> 标签：sybase

我需要在 Sybase 版本 12.5 中看到触发器被触发或使用任何帮助会很好，有谁知道如何取悦谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:17:38.373

您可以`print`在触发器中使用：

```
create trigger trigger_name
on table_name
for insert
print "I'm working" 
```

# google-earth - Google 地球企业版 5.x 中是否提供 Google 地球浏览器插件

> ID：13844279
> 
> 赞同：0
> 
> 时间：2012-12-12T16:33:31.350
> 
> 标签：google-earth, google-earth-plugin

如果是这样，我如何找出它与当前版本（7.x）的不同之处？有没有办法获取旧版本插件的 API 文档？

我们有一个客户，他们声称可能是 Google 地球企业版的 5.x 部署。我们正在尝试使用浏览器插件开发解决方案，但无法访问他们的部署（它位于安全网络上），而且我们有权访问的人员似乎都不知道有关部署的任何信息，除了它存在。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:39:50.250

一般来说，这种类型的产品支持问题比 StackOverflow 更适合 Google 论坛。

也就是说，现有的企业客户可以联系提交支持案例，并请求旧版本（官方仅支持当前和最新版本）。

# javascript - 使用 javascript 或 jQuery 根据页面的 URL 做一些事情

> ID：13844280
> 
> 赞同：1
> 
> 时间：2012-12-12T16:33:31.753
> 
> 标签：javascript, jquery, regex, window.location

我想知道一个检查页面网址的功能，如果是某个网址，请采取进一步措施。我对正则表达式不是特别熟练，也不知道它们是否是满足我需要的最佳方式。

我想检查 URL，但如果它略有变化，则基本位置检查是不够的。如果 url 以 /# 结尾，则为同一页面。所以我需要使用通配符或其他特殊字符进行检查。从概念上讲：**`if url = http://*.domain.com/thingcheckingfor*`**星号代表通配符，意味着任何东西都可以在它们所在的位置。

`http://blog.domain.com/page1`

`http://www.domain.com/page1`

`http://www.domain.com/page1/#`

...所有都需要考虑，因此我希望使用正则表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:37:33.820

```
if((new RegExp('^http://([^\.]+)\.domain\.com/thingcheckingfor(.*)$').test(url)) 
```

# iphone - 在处理Core Image过滤器ios中> 1.4MB大小的图像时收到内存警告？

> ID：13844291
> 
> 赞同：1
> 
> 时间：2012-12-12T16:33:44.103
> 
> 标签：iphone, ios5, image-processing, uiimage, core-image

在我的应用程序中，我正在使用核心图像过滤器下面的代码我用于

**我的代码：**

```
- (UIImage*)applyRGBWithRed:(float)red withGreen:(float)green withBlue:(float)blue
{
        ciimage=[CIImage imageWithCGImage:self.CGImage];
       // Make the filter
    CIFilter *colorMatrixFilter = [CIFilter filterWithName:@"CIColorMatrix"]; // 2
    [colorMatrixFilter setDefaults]; // 3
    [colorMatrixFilter setValue:ciimage forKey:kCIInputImageKey]; // 4
    [colorMatrixFilter setValue:[CIVector vectorWithX:red Y:0 Z:0 W:0] forKey:@"inputRVector"]; // 5
    [colorMatrixFilter setValue:[CIVector vectorWithX:0 Y:green Z:0 W:0] forKey:@"inputGVector"]; // 6
    [colorMatrixFilter setValue:[CIVector vectorWithX:0 Y:0 Z:blue W:0] forKey:@"inputBVector"]; // 7
    [colorMatrixFilter setValue:[CIVector vectorWithX:0 Y:0 Z:0 W:1] forKey:@"inputAVector"]; // 8z

    // Get the output image recipe
    CIImage *outputImage = [colorMatrixFilter outputImage];  // 9

    // Create the context and instruct CoreImage to draw the output image recipe into a CGImage
    context = [CIContext contextWithOptions:nil];
    CGImageRef cgimg = [context createCGImage:outputImage fromRect:[outputImage extent]]; // 10
    self.saveImage=[UIImage imageWithCGImage:cgimg];
    CGImageRelease(cgimg);
    return self.saveImage;
  } 
```

当我处理大图像[即大于 1.4 MB 大小] 时，它会发出内存警告并使应用程序崩溃。

**为什么会导致崩溃？我该如何处理这种情况？**

任何建议或想法都非常值得赞赏。我打了一个多星期……

提前致谢....

**在分析器中运行时，它会给出以下输出** ![在此处输入图像描述](../Images/a79eee0028a6b59b94e42ffbc930f8ca.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T04:58:54.527

也许您可以将大图像“拆分”为较小的部分，将文件管理器应用于每个部分，然后将它们组合回大图像？

```
UIImage *image = [UIImage imageWithContentsOfFile:imagePath]; // The Big image
NSMutableArray *croppedImages = [NSMutableArray array];
CGSize imageSize = image.size;
CGSize cropSize = CGSizeMake(500, 500); // The size of each "small image"
// Step 1: Produce the small images and save to disk
for (CGFloat x = 0; x < imageSize.width; x += cropSize.width)
{
    for (CGFloat y = 0; y < imageSize.height; y += cropSize.height)
    {
        UIGraphicsBeginImageContext(cropSize);
        [image drawAtPoint:CGPointMake(-x, -y)];
        UIImage *cropped = UIGraphicsGetImageFromCurrentImageContext();
        UIGraphicsEndImageContext();

        NSString *path = [NSTemporaryDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"cropped_%f_%f.png",x,y]];
        NSData *imageData = UIImagePNGRepresentation(cropped);
        [imageData writeToFile:path atomically:YES];
        imageData = nil;

        [croppedImages addObject:path];
    }
}
// Release the big image (assume we are using ARC)
image = nil;
// Step 2: Apply the filter to the small images and re-save them
for (NSString *path in croppedImages)
{
    UIImage *img = [UIImage imageWithContentsOfFile:path];

    // Apply your filter to img here

    NSData *imageData = UIImagePNGRepresentation(img);
    [imageData writeToFile:path atomically:YES];
    imageData = nil;
}
// Step 3: Combine the small images back to a big one
UIGraphicsBeginImageContext(imageSize);
for (CGFloat x = 0; x < imageSize.width; x += cropSize.width)
{
    for (CGFloat y = 0; y < imageSize.height; y += cropSize.height)
    {
        NSString *path = [NSTemporaryDirectory() stringByAppendingPathComponent:[NSString stringWithFormat:@"cropped_%f_%f.png",x,y]];
        UIImage *img = [UIImage imageWithContentsOfFile:path];

        [img drawAtPoint:CGPointMake(x, y)];
    }
}
UIImage *finalImage = UIGraphicsGetImageFromCurrentImageContext();
UIGraphicsEndImageContext();
// Step 4: Optionally remove the temporary files
for (NSString *path in croppedImages)
{
    [[NSFileManager defaultManager] removeItemAtPath:path error:NULL];
} 
```

显然，它会很慢。

# jquery - 无法成功将 Google Analytics 事件标签添加到由 .attr 创建的链接

> ID：13844292
> 
> 赞同：0
> 
> 时间：2012-12-12T16:33:51.717
> 
> 标签：jquery, onclick, google-analytics, bind

我正在使用其他人创建的 jQuery 代码，而且我对 jQuery 非常陌生（公平警告）。

我需要将 google 事件标签添加到 jQuery 正在创建的链接中。这个 jQuery 用于一个模式弹出窗口，其中包含各种大小的项目的图标和一个静态按钮。当用户将鼠标悬停在图标上时，按钮上的链接会发生变化，当按钮上的每个图标发生变化时，我需要为每个图标的链接添加谷歌分析标记。

以下是在特定图标悬停时为按钮创建链接的代码：

```
$('#modal_sizes_4 .size_5').hover(function() {
    if (!$(this).hasClass('selected')) {
        $('#modal_sizes_4 .selected').removeClass('selected');
        $(this).addClass('selected');
        $('#modal_sizes_4 .detail_left h3').text('15 3/4” Item');
        $('#modal_sizes_4 .detail_left p').text('Good for many things.');
        $('#modal_sizes_4 .detail_right img').attr({
            src: 'images/5.4.5-product.jpg'
        });
        $('#modal_sizes_4 .detail_bottom a.shop_size').attr({
            href: 'http://testing.com'
        });
    }
}); 
```

创建链接后，将其添加到链接的最佳方法是什么：

```
onclick = "_gaq.push(['_trackEvent','CIGuide', 'Click Shop Size', '15 3/4 Item']);" >​ 
```

我尝试过使用 .click、.attr、.on 和 .bind，但没有成功。

如果我的问题没有完美的意义，我深表歉意，再次，我对这一切都很陌生。任何帮助，将不胜感激。我最终想要实现的是谷歌中的事件标签。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:50:20.057

您可以使用以下代码添加调用：

```
$( "#my_element a" ).bind( "mousedown" , function() {
    _gaq.push( [ "_trackEvent" , "CIGuide" , "Click Shop Size" , "15 3/4 Item" ] ) ;
} ) ; 
```

上面的代码适用于 id 为“my_element”的元素下的任何锚点：

```
<h1>Hello World</h1>
<div id="my_element">
    <h2>Title here</h2>
    <ul>
        <li>
            <a href="http://www.example.com">Example</a>
        </li>
        <li>
            <a href="./some-page.html">Some Page</a>
        </li>
        <li>
            <a href="http://www.anotherexample.com">Another Example</a>
        </li>
    </ul>
</div>
<a href="./wont-fire">This link won't fire the event</a> 
```

自定义选择器以适合您的目的，仅此而已。

# css - 为什么菜单项的文本不可见？

> ID：13844299
> 
> 赞同：0
> 
> 时间：2012-12-12T16:34:06.873
> 
> 标签：css, twitter-bootstrap

Bootstrap menu item 的文本在下面的小提琴中不可见。请问可以提供原因吗？

[http://jsfiddle.net/PfzDk/](http://jsfiddle.net/PfzDk/)

同样的小提琴代码复制粘贴在这里，

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/css/bootstrap-combined.min.css" rel="stylesheet"/>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.3/jquery.min.js"> </script>
    <script src="//netdna.bootstrapcdn.com/twitter-bootstrap/2.2.2/js/bootstrap.min.js"></script>
  </head>
  <body>
  <div class="btn-group">
   <span class="dropdown">   
   <a class="btn dropdown-toggle" data-toggle="dropdown" href="#"><span class="caret"></span></a>  
   <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
      <li><a tabindex="-1" href="#">Action</a></li>
      <li><a tabindex="-1" href="#">Another action</a></li>
      <li><a tabindex="-1" href="#">Something else here</a></li>
      <li class="dropdown-submenu">
        <a tabindex="-1" href="#">More options</a>
        <ul class="dropdown-menu ">
          <li><a tabindex="-1" href="#">Action</a></li>
          <li><a tabindex="-1" href="#">Another action</a></li>
          <li><a tabindex="-1" href="#">Something else here</a></li>
        </ul>
      </li>
    </ul>
    </span>
    <a class="btn" data-toggle="dropdown" href="#">ClickMe</span></a>
    <span class="dropdown">
    <a class="btn dropdown-toggle" data-toggle="dropdown" href="#"><span class="caret"></span></a>
    <ul class="dropdown-menu" role="menu" aria-labelledby="dLabel">
      <li><a tabindex="-1" href="#">One</a></li>
      <li><a tabindex="-1" href="#">Two</a></li>
      <li><a tabindex="-1" href="#">Three</a></li>
    </ul>
  </span>
  </div>
  </body>
</html>​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:04:34.983

.btn-group 在此文件中的字体大小为零：

bootstrap-combined.min.css

# c - c libev 未定义对 `ev_default_loop' 的引用

> ID：13844309
> 
> 赞同：1
> 
> 时间：2012-12-12T16:34:37.643
> 
> 标签：c, libev

我在 ubuntu 上运行 gcc 编译器我正在使用一个示例来学习如何与 libev 建立套接字连接我安装了 libev4 和 libev-dev，但是一切正常，除非我添加 struct ev_loop *loop = ev_default_loop(0); 它引发了一个未定义的参考错误，谁能告诉我这里有什么问题是我的代码

```
#include <stdio.h>
#include <netinet/in.h>
#include <ev.h>

#define PORT_NO 3033
#define BUFFER_SIZE 1024

int total_clients = 0;  // Total number of connected clients

void accept_cb(struct ev_loop *loop, struct ev_io *watcher, int revents);
void read_cb(struct ev_loop *loop, struct ev_io *watcher, int revents);

int main() {
    struct ev_loop *loop = ev_default_loop(0); <--error-->
    int sd;
    struct sockaddr_in addr;
    int addr_len = sizeof(addr);
    struct ev_io w_accept;

    // Create server socket
    if ((sd = socket(PF_INET, SOCK_STREAM, 0)) < 0) {
        perror("socket error");
        return (-1);
    }

    bzero(&addr, sizeof(addr));
    addr.sin_family = AF_INET;
    addr.sin_port = htons(PORT_NO);
    addr.sin_addr.s_addr = INADDR_ANY;

    // Bind socket to address
    if (bind(sd, (struct sockaddr*) &addr, sizeof(addr)) != 0) {
        perror("bind error");
    }

    // Start listing on the socket
    if (listen(sd, 2) < 0) {
        perror("listen error");
        return (-1);
    }

    // Initialize and start a watcher to accepts client requests
    ev_io_init(&w_accept, accept_cb, sd, EV_READ);
    ev_io_start(loop, &w_accept); <-- error -->

    // Start infinite loop
    while (1) {
        ev_loop(loop, 0);
    }

    return (0);
}

/* Accept client requests */
void accept_cb(struct ev_loop *loop, struct ev_io *watcher, int revents) {
    struct sockaddr_in client_addr;
    socklen_t client_len = sizeof(client_addr);
    int client_sd;
    struct ev_io *w_client = (struct ev_io*) malloc(sizeof(struct ev_io));

    if (EV_ERROR & revents) {
        perror("got invalid event");
        return;
    }

    // Accept client request
    client_sd = accept(watcher->fd, (struct sockaddr *) &client_addr,
                       &client_len);

    if (client_sd < 0) {
        perror("accept error");
        return;
    }

    total_clients++; // Increment total_clients count
    printf("Successfully connected with client.\n");
    printf("%d client(s) connected.\n", total_clients);

    // Initialize and start watcher to read client requests
    ev_io_init(w_client, read_cb, client_sd, EV_READ);
    ev_io_start(loop, w_client); <--error-->
}

/* Read client message */
void read_cb(struct ev_loop *loop, struct ev_io *watcher, int revents) {
    char buffer[BUFFER_SIZE];
    ssize_t read;

    if (EV_ERROR & revents) {
        perror("got invalid event");
        return;
    }

    // Receive message from client socket
    read = recv(watcher->fd, buffer, BUFFER_SIZE, 0);

    if (read < 0) {
        perror("read error");
        return;
    }

    if (read == 0) {
        // Stop and free watchet if client socket is closing
        ev_io_stop(loop, watcher); <--error-->
        free(watcher);
        perror("peer might closing");
        total_clients--; // Decrement total_clients count
        printf("%d client(s) connected.\n", total_clients);
        return;
    } else {
        printf("message:%s\n", buffer);
    }

    // Send message bach to the client
    send(watcher->fd, buffer, read, 0);
    bzero(buffer, read);
} 
```

我收到了多个错误，我已经标记了任何人都可以告诉我出了什么问题我做了很多搜索但没有找到任何东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T16:42:04.893

代码看起来没什么问题，但我怀疑你不喜欢 libev。添加`-lev`到您的编译器行：

```
gcc -o ev_test ev_test.c -lev 
```

# google-app-engine - 在 App Engine 上以特定于 URL 的方式管理延迟

> ID：13844318
> 
> 赞同：1
> 
> 时间：2012-12-12T16:35:03.567
> 
> 标签：google-app-engine, web-applications, latency, pbs

我正在使用 GAE 上的应用程序来接收集群上运行的 PBS pro 生成的电子邮件。该应用程序通过电子邮件解析集群作业的统计信息并生成一个简单的报告。

问题是，当集群上启动大量作业时，应用程序可能会在几秒钟内收到 1000 多封电子邮件。大量实例被启动来处理请求。我可以通过将允许的延迟设置为大约几秒来控制这一点，但这会在为具有报告的应用程序的首页提供服务时产生可见的延迟。

有没有办法为每个单独的 URL 设置可接受的延迟，以便

```
/_ah/mail/user@myapp.appspotmail.com 
```

可以有高延迟而不会导致更多实例启动，但如果任何其他 URL 导致高延迟，将启动更多实例？

- 安德鲁

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:48:53.383

据我所知，无法根据路由在管理控制台中设置最大延迟。但是，您可以做的是，在您收到电子邮件后，将电子邮件文本提供给任务队列任务。这些可以被限制为非常精细的细节。如果您使用的是 python，则可以使用[deferred](https://developers.google.com/appengine/articles/deferred)模块，因此您不必为这些任务队列任务创建单独的处理程序。我没有在 GAE 上使用 java 的经验，所以我不知道是否有类似的 java。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:33:30.750

不，您不能为每个 Url 设置应用程序延迟设置。

缓解问题的一种方法是让邮件处理程序做最少的工作。因此，您应该将所有耗时的操作移至[任务队列](https://developers.google.com/appengine/docs/java/taskqueue/overview)，而不是在邮件处理程序中进行所有解析和报告生成。这样邮件处理程序将快速返回，允许它一次处理更多请求。

任务队列让您可以控制并行任务执行，因此您可以微调需要多少实例。

# c# - 将 Vidalia/Tor 包含到另一个程序中

> ID：13844319
> 
> 赞同：1
> 
> 时间：2012-12-12T16:35:03.830
> 
> 标签：c#, proxy, include, tor

我想为匿名和安全的网络浏览制作一个小型网络浏览器，并且我想使用 Vidalia/Tor 进行匿名，它应使用标准的 Tor 代理 127.0.0.1:8118。现在我想让它变得简单，这样用户在想要使用这个网络浏览器时就不必运行 vidalia。当有人启动我的浏览器时，有没有办法让 vidalia 在后台自动运行？我在 Windows 7 64 位上运行并使用 VS2012

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:09:44.850

您不需要使用 Vidalia，因为它的目的只是为了控制/监视 tor。您可以让您的程序执行此功能。您想获得“专家包”，它只是 tor 本身，没有支持程序。tor 许可证允许您将其与您的程序一起重新分发。

在浏览器中放置一些代码来检查端口 8118 是否打开。如果不是，它应该尝试启动 tor，然后等待端口 8118 打开。您可能还希望它在退出时终止 tor 进程。

# sql - 在其他查询中重用来自一个查询的 FROM 子句 (Oracle)

> ID：13844322
> 
> 赞同：2
> 
> 时间：2012-12-12T16:35:07.230
> 
> 标签：sql, oracle10g

问题：

我正在编写一个 SELECT 查询，其 FROM 子句包含嵌套查询并从多个查询中获取数据。我需要在其他几个查询中再次使用来自 FROM cluase 的数据。

在 Oracle 中执行此操作的最佳方法是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T16:38:50.840

如果您需要在多个不同的 SQL 语句中重用一个查询，最简单的选择是为该 SQL 语句创建一个视图

```
CREATE VIEW view_name
AS
  <<query to reuse>> 
```

然后在所有查询中使用该视图。

如果您需要在同一 SQL 语句中的多个位置重用查询，请使用子查询分解和`WITH`子句

```
WITH query_name AS (
  <<query to reuse>>
)
SELECT *
  FROM query_name q1
 WHERE something = (select max(something)
                      from query_name q2
                     where q1.key = q2.key) 
```

# php - 检查表单提交上是否存在用户名

> ID：13844325
> 
> 赞同：2
> 
> 时间：2012-12-12T16:35:10.647
> 
> 标签：php, javascript, ajax

这是我的代码。

**.js**

```
$(document).ready(function() {

    $("#username").focusout(function() {

        $.ajax({
            type:'post',
            url:site_url()+'/client/checkUserName',
            data:{'username':$("#username").val()},
            dataType:'json',
            success:function(result){
                if(result != 'false'){
                  $('#message').text('Username exists');  
                }

            }
        });  
    }); 
```

**.html**

```
<form id='form1'  method="post">
        <input type="text" name="username" id="username"/>
        <span id="message" style="color:red"></span>
        <input type="submit" value="submit" id="regis" class="btn"/>
</form> 
```

它在聚焦时工作正常。如果用户名存在，如何使表单不提交？

假设表单中有一个隐藏字段说

```
 <input type="text" hidden id="type" value="<?php echo $type;?>"> 
```

然后，如果隐藏字段中存在值，则无需检查用户名是否已存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:42:34.183

如果您只检查用户名是否存在于 javascript 中，您的网站将不安全。黑客无需实际单击按钮或执行您的客户端代码即可进行提交。

这意味着您需要在提交已经发生时检查服务器端的用户名存在。在这种情况下，javascript 检查并没有什么好处。

您也不想为黑客提供一种方法来检查哪些用户名存在，哪些不存在。如果您在提交后检查，黑客不知道用户名是否无效，或者密码是否错误。

编辑：到目前为止，@КонстантинРекунов 提供了唯一可行的 javascript。但是，请参阅我在他的回答下关于解决方案的脆弱性的评论。任何像这样的解决方案本质上都是脆弱的。

这样做的唯一合理原因是在注册过程中建议替代方案。即使这样也是不好的做法。我建议您更改您的预期设计。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:43:39.957

您可以简单地禁用提交按钮

```
$(document).ready(function() {

$("#username").focusout(function() {

    $.ajax({
        type:'post',
        url:site_url()+'/client/checkUserName',
        data:{'username':$("#username").val()},
        dataType:'json',
        success:function(result){
            if(result != 'false'){
              $('#message').text('Username exists');
              $('#regis').attr('disabled','disabled');
            } else {
              $('#regis').removeAttr('disabled');
            }
        }
    });  
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:44:38.503

您可能需要将您的 js 代码放在一个函数中并添加：`return false;`如果检查失败，则添加`onsubmit = "[functionName]";`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T16:49:51.100

您应该添加 return false like 以及调用函数的位置

```
 if(result != 'false'){
                  $('#message').text('Username exists'); 
                   return true; 
                    }
                    else
                    {
                      return false;
                    } 
```

# php - 永久设置显示错误 (PHP)

> ID：13844331
> 
> 赞同：0
> 
> 时间：2012-12-12T16:35:31.550
> 
> 标签：php, ini

```
ini_set('display_errors', '0'); 
```

这应该禁用 display_errors，但它不会永久禁用。当我尝试 echo ini_get('display_errors'); 下次我运行脚本时，我得到 1。我怎样才能永久设置它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:51:52.297

您需要将**display_errors =Off**设置为**php.ini**配置文件。

ini_set 函数用于为定义在 php.ini 文件中的配置参数运行时间值。

**修改php.ini文件中的配置参数后，重启apache web服务器服务，使用phpinfo()**函数验证配置参数display_error的值是否被修改

有关**display_error**配置参数的更多详细信息，请参阅以下 url 中提到的文档

[http://php.net/manual/en/errorfunc.configuration.php#ini.display-errors](http://php.net/manual/en/errorfunc.configuration.php#ini.display-errors)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:38:30.230

我建议更改 php.ini 设置：

```
display_errors = Off 
```

还是您需要在每个应用程序/每个脚本基础上使用它？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:50:48.307

这是从[php.net](http://php.net/manual/en/function.ini-set.php)站点的提取

> 设置给定配置选项的值。配置选项将在脚本执行期间保留此新值，并将在脚本结束时恢复。

所以它不是永久的。因此更改您的 php.ini 文件。

# visual-studio-2010 - 如何在 Visual Studio 2010 中将 VSTO 项目的引用添加到 WiX 安装程序项目？

> ID：13844333
> 
> 赞同：6
> 
> 时间：2012-12-12T16:35:37.453
> 
> 标签：visual-studio-2010, wix, vsto, wix3.6

我有一个包含 VSTO 加载项项目的 Visual Studio 2010 解决方案。我还在解决方案中添加了一个 WiX 安装项目，现在我需要在安装项目中添加对 VSTO 项目的引用，但我无法这样做。当我右键单击 WiX 设置项目中的引用，然后选择添加引用，然后选择项目选项卡时，VSTO 项目不会出现在要引用的可用项目列表中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-29T13:16:40.840

I had the same problem, then I tried to "do it wrong": I added the reference editing the .wixproj file manually.

I just had to add the following snippet:

```
<ItemGroup>
<ProjectReference Include="..\MyExcelAddin\MyExcelAddin.csproj">
<Name>MyExcelAddin</Name>
  <Project>{2b1d7a7b-4928-45fa-bfdf-cd7d435eecfc}</Project>
  <Private>True</Private>
  <DoNotHarvest>
  </DoNotHarvest>
  <RefProjectOutputGroups>Binaries;Content;Satellites</RefProjectOutputGroups>
  <RefTargetDir>INSTALLFOLDER</RefTargetDir>
  </ProjectReference>
</ItemGroup> 
```

Obviously you have to replace the path to your project and the project GUID (found in the assembly informations).

When you reload the project in Visual Studio (I use 2012 but I guess it'll be the same) you see the reference with a warning icon.

You still manage to use variables as `$(var.MyExcelAddin.TargetDir)` though.

Hope this helps.

# java - 如何在 actionPerformed() 中更新 JFrame？

> ID：13844341
> 
> 赞同：1
> 
> 时间：2012-12-12T16:36:01.770
> 
> 标签：java, swing, user-interface

我在按钮上添加了一个动作监听器：

```
myButton.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent e)
    {
        myButtonAction();
    }
}); 
```

该按钮将启动阻塞/短调用。我想在调用发生之前更新 JFrame（一些组件）——以通知用户。但是，JFrame 似乎没有paintImmediately。我应该怎么做？

此时任何更改，包括在完成*后才*`myButton.setEnabled(false)`更新。 *`myButtonAction()`*

 *我真的应该为所有东西（非 ui 相关）创建新线程吗？这对我来说似乎是一项轻量级的任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:40:57.220

是的，您应该在另一个线程上运行它。首先，我不会认为它是“轻量级”的。

如果需要，您可以重用线程，请参阅[SwingWorker](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/worker.html)和[ThreadPoolExecutor](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html)。*

# java - 安装 Android 应用程序后如何在内部存储上创建目录？

> ID：13844343
> 
> 赞同：18
> 
> 时间：2012-12-12T16:36:08.057
> 
> 标签：java, android, directory, installation

我想要一个文件夹，我将在其中放置我需要的所有资源，并且我希望它在内部存储中。由于我希望这个目录只创建一次，我发现我应该在应用程序的主要活动中创建它：

```
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    File directory = context.getDir("mydir", Context.MODE_PRIVATE);
    Log.d("directory", directory.getAbsolutePath().toString());
} 
```

这似乎没问题，因为这是我在互联网上能够找到的，但是我收到了大量错误，我可以访问目录路径的日志并且应用程序无法启动。知道为什么吗？

另外，如果我每次将应用程序从 Eclipse 运行到手机时都使用内部存储，它会自动删除前一个及其资源，还是我必须手动删除？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-12-12T18:03:53.657

使用`getCacheDir()`. 它返回文件系统上应用程序特定缓存目录的绝对路径。然后你可以创建你的目录

```
File myDir = new File(getCacheDir(), "folder");
myDir.mkdir(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-12T16:43:22.187

如果你想存储在外部存储 SD 卡上，你需要有这个

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

在您的 AndroidManifest.xml 文件中

这也适用于存储：

```
File direct = new File(Environment.getExternalStorageDirectory()+"/folder");

if(!direct.exists()) {
     if(direct.mkdir()); //directory is created;
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-12-12T17:14:00.147

首先，请务必阅读并了解可用于您的应用程序的不同存储选项。谷歌在这里有一篇关于这个主题的非常好的文章：

[http://developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

上面 Andy 的回答提到了 Environment.getExternalStorageDirectory()（API 级别 7）用于写入 SD 卡或类似内容，但您应该记住，当用户卸载应用程序时，写入该位置的文件不会被删除。[文档](http://developer.android.com/reference/android/os/Environment.html#getExternalStorageDirectory%28%29)说：

“应用程序不应该直接使用这个顶级目录，以免污染用户的根命名空间”

相反，如果您以 API 级别 8 及更高版本为目标，则应使用 Context.getExternalCacheDir()，因为卸载应用程序时该位置的文件将被删除。如果您真的希望文件在卸载后仍然存在，您应该使用 Context.getExternalFilesDir()。还有 getCacheDir() 和 getFilesDir() 用于处理内部存储上的文件。

正如对您的问题的评论中提到的，您确实应该在此处发布错误，以便我们能够为您提供帮助。

PS 我是新来回答关于 SO 的问题，所以我没有足够的代表来发布我的答案中提到的所有功能的链接，而且我似乎无法对以前的帖子发表评论。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-08-22T08:01:22.033

Android studio 在特定文件夹中下载视频：

```
 <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
  <uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE" />          

  String path = Environment.getDataDirectory().getAbsolutePath().toString() + "/storage/emulated/0/appFolder";
  File mFolder = new File(path);
  if (!mFolder.exists()) {
      mFolder.mkdir();
  }
  File Directory = new File("/sdcard/kaizzan/");
  Directory.mkdirs(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-04T12:49:35.247

```
<uses-permission android:name="android.permission.WRITE_INTERNAL_STORAGE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

File newfile = new File(Environment.getExternalStorageDirectory()+"/specifyfoldername","nestedfoldername");
    direct.mkdir();
// it will create two folder in your internal storage first is specifyfoldername and another one inside the mentioned folder which is nestedfoldername
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-02-08T11:13:52.393

我认为 Blackbelt 的答案很好，但不想将其存储在内部缓存中（对于我试图制作的规范，它会经常被擦除和写入）所以我所做的是：

```
String path = ""; 
```

进而

```
if (path.isEmpty()) {
        File file = new File(this.getFilesDir(), "my_dir_identfiying_name/");
        path = file.getAbsolutePath();
        Log.d("PATH", path);
    } 
```

# html - 强制周围的 div 包围元素

> ID：13844355
> 
> 赞同：0
> 
> 时间：2012-12-12T16:37:01.567
> 
> 标签：html, css

我有一个容器 div，它应该改变以包裹它的内容，从而产生带边框的效果，但是由于某种原因，该 div 似乎只是在页面顶部显示为一条线。下图显示了我想要实现的目标，但正如您从这个[Fiddle](http://jsfiddle.net/jezzipin/9yUX3/)中看到的那样，它不起作用。

有什么建议么？

```
Code enclosed in Fiddle. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:38:11.510

这是因为 div 的内容是向左浮动的，而 div 不是。应用于`float: left;`带有边框的 div 并且它可以工作：http: [//jsfiddle.net/9yUX3/7/](http://jsfiddle.net/9yUX3/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:45:42.603

解决此问题的另一种方法是将溢出：隐藏（或自动）应用于 .boxed_content DIV。这可能对您更好，因为将浮动应用到容器可能会进一步弄乱您的布局。

```
.boxed_content {
   border: 1px solid black;
   box-shadow: 0px 0px 5px 5px #c4c4c4;
   overflow:hidden;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:44:17.907

以下是包含浮动的所有方法[http://www.visibilityinherit.com/code/contain-floats.php](http://www.visibilityinherit.com/code/contain-floats.php)

# r - r中的MLE非常慢

> ID：13844361
> 
> 赞同：0
> 
> 时间：2012-12-12T08:36:58.063
> 
> 标签：r, estimation

我正在做一个 EM 估计，在 M 步骤中我需要最大似然估计，它有 24 个参数。我尝试了 R 中的 nlm/optim/maxLik 函数。它们都很慢。欢迎任何建议。谢谢。这是 LogL 函数：（选择 M、S、K、N 和 Alpha 是已知的。）

```
logl <- function(theta,choices,M,S,K,N,Alpha){

betas <- theta[(1:(S*(K+1)))]
betas<-matrix(betas,S,K+1,byrow=TRUE)

loglik <-for (n in 1:N){
pr1s=foreach (s=1:S) %dopar%{ 
pr11=foreach (i = 1:K) %dopar%{ 
exp(sum(betas[s,]*choices[[n]][i,]))/exp(sum(M[[i]]%*%betas[s,]))}
pr11=as.numeric(pr11)
prod(pr11) 
}
pr1sn=as.numeric(pr1s) 

l[n]= sum(Alpha*pr1sn)
}
L=-sum(log((l)))
return(L)} 
```

我想要得到的是：

```
ops=nlm(logl,theta.start,choices=choices,M=M,S=2,K=11,N=3,Alpha=Alpha,hessian=TRUE) 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T13:52:08.540

我建议你让你的代码更整洁。始终如一。您将更容易阅读和改进代码。

据我了解，您有三个循环。所有这些都可以并行完成，不是吗？为什么你用 做一个循环，用 做`for`另外两个`foreach`？有什么原因吗？

这个任务`loglik <- for (n in 1:N)`是干什么的？

有一个`.combine`论点`foreach`可以在这里使用。`%:%`嵌套循环有一个运算符。

试图改进代码。但是不确定我是否理解正确。并且不确定它是否比你的更快。需要可重复的示例才能在时间上给出更准确的答案。

```
logl <- function(theta, choices, M, S, K, N, Alpha) {
  betas <- theta[(1:(S*(K+1)))]
  betas <- matrix(betas, S, K+1, byrow=TRUE)

  l <- foreach(n = 1:N, .combine = c) %:%
    foreach(s = 1:S, .combine = sum) %:%
      foreach(i = 1:K, .combine = prod) %dopar% {
        exp(sum(betas[s,] * choices[[n]][i,])) / exp(sum(M[[i]] %*% betas[s,]))
      }

  return(-sum(log(Alpha * l)))
} 
```

# javascript - 使用 SPServices 和 jQuery 时将浏览器证书发送到 https SharePoint Web 服务

> ID：13844363
> 
> 赞同：0
> 
> 时间：2012-12-12T16:37:25.860
> 
> 标签：javascript, certificate, spservices

我正在编写一些 JavaScript 来与位于防火墙后面并需要证书的 SharePoint Web 服务进行通信。

我的浏览器中安装了正确的证书。当我浏览到 WSDL 时，我可以很好地加载页面。

但是，当我使用 javascript/jQuery 从网页执行一个简单的 SPServices 命令 (GetListCollection) 时，我收到了未经授权的错误。

我从浏览器中删除了证书并尝试加载 WSDL 并得到完全相同的错误。重新安装证书修复了 WSDL 视图，但我的 JavaScript 仍然出错。

我正在使用这段代码：

```
$().SPService({
  webURL:  [the url],
  operation: "GetListCollection",
  async: false,
  completefunc: function( xData, Status ) {
    console.log( 'Status: ' + Status );
    if ( !!xData ) {
      $( xData.responseXML ).find("Lists > List").each(function() {
        var $node = $(this);
        console.log( $node.attr( "Title" ) );
      });
    }
    else {
       alert('Null result.');
    }
  }
}); 
```

对不起，如果代码中有错别字；这不是剪切和粘贴，因为我的开发盒没有连接到互联网。

我想我需要将安装在浏览器中的证书（无论谁在我的页面上运行代码）嵌入到 Web 服务请求中，但我不知道如何或在哪里寻找答案。任何提示将非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T14:01:54.343

事实证明，除了您从中加载原始页面的服务器之外，您不允许使用 javascript 通过 https 与任何其他服务器通信。它是 ajax/javascript 安全规范的一部分。所以这个解决方案根本行不通。我将不得不研究一个服务器端代理请求解决方案。

# c++11 - GCC 4.7.2 (cygwin) 上的 std::async 因“无效使用不完整类型”而失败

> ID：13844364
> 
> 赞同：1
> 
> 时间：2012-12-12T16:37:28.903
> 
> 标签：c++11, lambda, g++, cygwin, incomplete-type

在 GCC 4.7.2 上（在 cygwin 上，[从源代码编译](http://cygwin.wikia.com/wiki/How_to_install_a_newer_version_of_GCC#Build_and_Install_GCC)）使用`std::async`失败

```
error: invalid use of incomplete type 
```

一些`std::__async_sfinae_helper`。我不走运，感谢您的帮助。

```
#include <future>

int main()
{
  std::async([]{});
} 
```

失败了

```
g++ -Wall -pedantic -std=c++0x    future.cpp   -o future
future.cpp: In function 'int main()':
future.cpp:5:22: error: invalid use of incomplete type 'std::__async_sfinae_helper<main()::<lambda()>, main()::<lambda()> >::type {aka class std::future<void>}'
In file included from future.cpp:1:0:
/usr/local/lib/gcc/i686-pc-cygwin/4.7.2/../../../../include/c++/4.7.2/future:111:11: error: declaration of 'std::__async_sfinae_helper<main()::<lambda()>, main()::<lambda()> >::type {aka class std::future<void>}'
/usr/local/lib/gcc/i686-pc-cygwin/4.7.2/../../../../include/c++/4.7.2/future: At global scope:
/usr/local/lib/gcc/i686-pc-cygwin/4.7.2/../../../../include/c++/4.7.2/future:187:5: error: 'typename std::__async_sfinae_helper<typename std::decay<_Func>::type, _Fn, _Args ...>::type std::async(_Fn&&, _Args&& ...) [with _Fn = main()::<lambda()>; _Args = {}; typename std::__async_sfinae_helper<typename std::decay<_Func>::type, _Fn, _Args ...>::type = std::future<void>]', declared using local type 'main()::<lambda()>', is used but never defined [-fpermissive]
<builtin>: recipe for target `future' failed 
```

版本信息

```
% g++ -v
Using built-in specs.
COLLECT_GCC=g++
COLLECT_LTO_WRAPPER=/usr/local/libexec/gcc/i686-pc-cygwin/4.7.2/lto-wrapper.exe
Target: i686-pc-cygwin
Configured with: ../gcc-4.7.2/configure --enable-languages=c,c++
Thread model: single
gcc version 4.7.2 (GCC) 
```

[c++11 std::async 在 mingw 中不起作用](https://stackoverflow.com/questions/10209871/c11-stdasync-doesnt-work-in-mingw)并没有帮助，因为我既没有使用 mingw，也没有使用线程模型 win32。

# mysql - Rails 3：从今天开始查找日期时间为 3 天的记录

> ID：13844371
> 
> 赞同：2
> 
> 时间：2012-12-12T16:37:40.793
> 
> 标签：mysql, ruby-on-rails-3, activerecord

我有以下范围：

```
def coming_up_on_renewal(product_name = "product_name")
  where('billing_start_date = NOW() + INTERVAL 3 day AND status = ? AND product_name = ? AND auth_net_subscription_id IS NOT NULL', :active, "#{product_name}")
end 
```

我已经将数据库中的一条记录操作为未来 3 天，但是当我运行这个范围时，返回一个空数组。

我基本上是在尝试检索`billing_start_date`从当天起 3 天的记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:43:14.230

试试这个。

```
def coming_up_on_renewal(product_name)
  where(:status => :active, :product_name => product_name)
  .where(:billing_start_date => 
   (3.days.from_now.beginning_of_day)..(3.days.from_now.end_of_day))
  .where('auth_net_subscription_id IS NOT NULL')
end 
```

对于您的其他“IS NOT NULL”条件，请参阅[此答案](https://stackoverflow.com/questions/4252349/rail-3-where-condition-using-not-null)。

# jquery - jQuery更改attr添加了一个空白？

> ID：13844373
> 
> 赞同：2
> 
> 时间：2012-12-12T16:37:49.267
> 
> 标签：jquery, attr

试图改变某些东西的属性，我已经让一切正常，但是它在“=”和“数据”之间添加了一个空白，我真的不知道为什么。我希望有人可以帮助我。

```
function get_delete_news(news_id) {
$.post('remove_get_news.php', {news_id:news_id}, function(data) {
    $('.confirmYes').attr('href', 'remove_news.php?newsID='+data);
});
} 
```

所以现在它是这样写的：`remove_news.php?newsID= 2`

我希望它是这样的：`remove_news.php?newsID=2`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:40:06.127

该[`.trim()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/Trim)函数将删除字符串上的前导和尾随空格。

改变：

```
$('.confirmYes').attr('href', 'remove_news.php?newsID='+data); 
```

到：

```
$('.confirmYes').attr('href', 'remove_news.php?newsID='+data.trim()); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:43:47.257

显然 remove_get_news.php 将空格连接到其响应。一种解决方法是：

```
data.replace(/(^\s+|\s+$)/g, ''); 
```

在使用数据变量之前。

# javascript - console.log 有时不起作用

> ID：13844375
> 
> 赞同：7
> 
> 时间：2012-12-12T16:37:51.667
> 
> 标签：javascript, google-chrome

我遇到过几次，没有解释。网站上没有 JS 错误。代码确实正在执行。用工作代替它们`alert()`就好了。

所以今天又发生了这种情况，所以我尝试检查控制台对象中的控制台对象，发现一些异常情况，好像有什么东西覆盖了控制台对象。

以下屏幕截图是我遇到此问题的站点（站点 A）：

[http://ompldr.org/vZ256Mw/Selection_004.jpg](http://ompldr.org/vZ256Mw/Selection_004.jpg)

你看到日志、警告和信息是空函数了吗？并且控制台对象与控制台工作正常的站点（站点 B）上的不同（屏幕截图如下）？

[http://ompldr.org/vZ256Mg/Selection_003.jpg](http://ompldr.org/vZ256Mg/Selection_003.jpg)

现在在两个站点上运行的代码完全相同。站点 B 是我的本地安装，站点 A 正在暂存，我的代码中没有任何内容会覆盖控制台对象，那么这种行为的解释是什么？

* * *

根据 nfroidure 的建议，我在 head 部分中添加了该代码，然后得到了这个：`uncaught error! (anonymous function) (anonymous function)`，其中第二个指向另一个库文件中的代码，其中包含以下内容：

```
if (!("console" in window) || !("firebug" in console))
{
    var names = ["log", "debug", "info", "warn", "error", "assert", "dir", "dirxml",
    "group", "groupEnd", "time", "timeEnd", "count", "trace", "profile", "profileEnd"];

    window.console = {};
    for (var i = 0; i < names.length; ++i)
        window.console[names[i]] = function() {}
} 
```

这是负责任的，因为我认为 if 检查有问题。`"console" in window`在 Chrome中将`"firebug" in window`是对的，对我来说将是错误的，从而导致替换控制台方法。它应该`&&`在那里，不是吗？

**更新：**在将操作员更改为之后，`&&`它开始在站点 A 上工作，但我不明白为什么它只会在一个而不是另一个上触发。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:50:28.423

看起来站点 A 包含了 firebug，因为控制台的方法看起来很像这里的方法：http: [//getfirebug.com/wiki/index.php/Console_API](http://getfirebug.com/wiki/index.php/Console_API)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:50:41.177

尝试将其添加到文档顶部：

```
<script>
(function(){
    var wc=window.console;
    delete window.console;
    window.__defineGetter__("console", function(){
        return wc;
        });

    window.__defineSetter__("console", function(val){
        throw('error!');  // Look at js stack when throwed
        });
})();
</script> 
```

# appfog - 在 appfog 上，如何查找 500 Internal Server Error 的原因？

> ID：13844376
> 
> 赞同：2
> 
> 时间：2012-12-12T16:37:51.067
> 
> 标签：appfog

我创建了一个简单的 python 烧瓶应用程序，它在[http://cm-test.aws.af.cm/上运行良好](http://cm-test.aws.af.cm/)

但是，当您在路由[http://cm-test.aws.af.cm/redis](http://cm-test.aws.af.cm/redis)上访问它时，它会因“500 Internal Server Error”而失败

问题是，我找不到查看有关该问题的日志或错误消息的方法……这是语法错误，还是异常，还是其他？

如何获取有关此错误的更多信息？

我在仪表板上找不到任何内容，日志中也没有任何内容（“af logs cm-test”）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-25T13:02:45.580

在命令行上，您可以使用`af logs <appname>`查看应用程序的服务器输出/日志。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-23T00:43:40.897

我花了很长时间才弄清楚这一点，Appfog 不会在运行时从您的应用程序中提供错误日志，它可能会显示编译日志，就像您做了一些缩进错误一样。您必须处理代码中的错误。最初我尝试使用 try: except: 但这也没有创建任何日志。您必须在您的 python 程序中添加以下代码

```
import logging
from logging import FileHandler

application = app = Flask(__name__)

file_handler = FileHandler("debug.log","a")
file_handler.setLevel(logging.WARNING)
app.logger.addHandler(file_handler)
@app.route('/') 
```

之后你可以像这样通过af查看日志——

```
af files appname app/debug.log 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T21:32:14.747

即使您不应该在生产中执行此操作，但要进行故障排除，您也可以打开调试。

```
app.debug = True 
```

如果在烧瓶侧而不是 500，这将向您显示错误消息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-26T14:36:00.197

我猜日志被删除了。我的应用程序也有同样的问题。我尝试重新启动应用程序，然后`af logs appname`

日志出现了。

# mysql - 在同一查询中对 dup 进行 INSERT INTO、SELECT 和 UPDATE

> ID：13844379
> 
> 赞同：0
> 
> 时间：2012-12-12T16:37:57.077
> 
> 标签：mysql

我正在尝试使用插入和选择更新重复键。

```
INSERT INTO f_s.s_d_p(dom,title,lastupdated)
SELECT dom AS dDom,
COUNT(db2.rets.dom) AS dcount,
NOW() AS timeNow
FROM db2.rets
GROUP BY db2.rets.dom
LIMIT 5
ON DUPLICATE KEY UPDATE title = dDom, last_updated = NOW(); 
```

但是当我运行查询时，我总是得到“未知列 dDom”

我尝试为选择查询设置别名，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:40:14.737

使用字段名称，而不是别名：`ON DUPLICATE KEY UPDATE title = db2.rets.dom, last_updated = NOW();`。或者做

```
INSERT INTO f_s.s_d_p(dom,title,lastupdated)
SELECT * FROM (
SELECT dom AS dDom,
COUNT(db2.rets.dom) AS dcount,
NOW() AS timeNow
FROM db2.rets
GROUP BY db2.rets.dom
LIMIT 5)
a
ON DUPLICATE KEY UPDATE title = a.dDom, last_updated = NOW(); 
```

# php - PHP - 正则表达式工作不一致

> ID：13844381
> 
> 赞同：-2
> 
> 时间：2012-12-12T16:37:59.260
> 
> 标签：php, regex

我有以下声明

```
echo preg_replace("/(?<=\d)(th|rd|st|nd)([^0-z])/i","<sup>$1</sup>$2","some text 1st<br />\n2nd<br />\n3rd<br />\n4th 5th 21nd 33rd 41st<br />\nsome text"); 
```

它输出

```
some text 1st<br />
2nd<br />
3rd<br />
4<sup>th</sup> 5<sup>th</sup> 21<sup>nd</sup> 33<sup>rd</sup> 41st<br />
some text 
```

我只是不知道如何在所有情况下用上标标签包围 th、rd、st 或 nd。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:44:22.180

你可以使用

```
/(?:\b\d+)(th|rd|st|nd)\b/i

//boundary \b is required here or else it would also replace within a word 
```

并将其替换为

```
<sup>$1</sup> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:40:37.843

`[0-z]`还包括以下符号：`:;**<**=>?@[]^_``

值得注意的是，`<`包括在内。

试试`[^[:alnum:]]`吧。

编辑：此外，为什么不让它向前看呢？

```
/(?<=\d)(?:th|rd|st|nd)(?=![[:alnum:]])/i 
```

然后你可以`$0`在替换字符串中使用。

# spring - GWT + Spring DATA、JPA 配置

> ID：13844388
> 
> 赞同：3
> 
> 时间：2012-12-12T16:38:38.657
> 
> 标签：spring, gwt, maven, jpa, spring-data

尝试基于以下内容设置应用程序时出现错误：SPRING-DATA-JPA，GWT 项目。尝试在**托管模式下**运行时出现异常：

> 嵌套在 org.springframework.beans.factory.BeanCreationException：创建名为 'org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor#0' 的 bean 时出错：bean 初始化失败；嵌套异常是 org.springframework.beans.factory.BeanCreationException：在 URL [file:/ *** */www/WEB-INF/classes/applicationContext.xml] 中定义名称为“entityManagerFactory”的 bean 创建错误：调用 init 方法失败；嵌套异常是 javax.persistence.PersistenceException: [PersistenceUnit: default] Unable to build EntityManagerFactory: javax.validation.ValidationException: Unable to find a default provider

这是我的 applicationContext.xml：

```
<context:component-scan base-package="service"/>

<jpa:repositories base-package="service.repositories"
                  query-lookup-strategy="create-if-not-found"/>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
    <property name="rollbackOnCommitFailure" value="true"/>
</bean>

<tx:annotation-driven transaction-manager="transactionManager"/>

<bean id="dataSource" class="com.mchange.v2.c3p0.ComboPooledDataSource" destroy-method="close">
    <property name="driverClass" value="${jdbc.driver.classname}"/>
    <property name="jdbcUrl" value="${jdbc.url}"/>
    <property name="user" value="${jdbc.user}"/>
    <property name="password" value="${jdbc.password}"/>
    <property name="autoCommitOnClose" value="true"/>
</bean>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceProviderClass" value="org.hibernate.ejb.HibernatePersistence"/>
    <property name="packagesToScan" value="com.logicify.office.domain"/>
    <property name="dataSource" ref="dataSource"/>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
            <property name="showSql" value="true"/>
            <property name="generateDdl" value="true"/>
            <property name="databasePlatform" value="org.hibernate.dialect.PostgreSQL82Dialect"/>
        </bean>
    </property>
</bean> 
```

这里是 pom.xml：

```
<modelVersion>4.0.0</modelVersion>
<groupId></groupId>
<artifactId>parent</artifactId>
<packaging>pom</packaging>
<version>1.0-SNAPSHOT</version>
<name>Logicify Infrastructure</name>

<modules>
    <module>m-domain</module>
    <module>m-service</module>
    <module>m-calendar</module>
    <module>m-admin</module>
    <module>m-supply</module>
    <module>m-entry</module>
</modules>

<properties>
    <gwtVersion>2.5.0</gwtVersion>
    <spring.version>3.1.2.RELEASE</spring.version>
    <hibernate.version>4.1.7.Final</hibernate.version>
    <webappDirectory>${project.build.directory}/${project.build.finalName}</webappDirectory>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
    <build.filter.file>test.properties</build.filter.file>
</properties>

<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-aop</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-asm</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-beans</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-context</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-expression</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-orm</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-tx</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-jdbc</artifactId>
            <version>${spring.version}</version>
        </dependency>
        <dependency>
            <groupId>org.springframework</groupId>
            <artifactId>spring-web</artifactId>
            <version>${spring.version}</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.data</groupId>
            <artifactId>spring-data-jpa</artifactId>
            <version>1.0.2.RELEASE</version>
            <exclusions>
                <exclusion>
                    <groupId>org.springframework</groupId>
                    <artifactId>spring-core</artifactId>
                </exclusion>
            </exclusions>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>${hibernate.version}</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-entitymanager</artifactId>
            <version>${hibernate.version}</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate.javax.persistence</groupId>
            <artifactId>hibernate-jpa-2.0-api</artifactId>
            <version>1.0.1.Final</version>
        </dependency>

        <dependency>
            <groupId>postgresql</groupId>
            <artifactId>postgresql</artifactId>
            <version>9.0-801.jdbc4</version>
        </dependency>

        <dependency>
            <groupId>javax.servlet</groupId>
            <artifactId>javax.servlet-api</artifactId>
            <version>3.0.1</version>
            <scope>provided</scope>
        </dependency>

        <dependency>
            <groupId>c3p0</groupId>
            <artifactId>c3p0</artifactId>
            <version>0.9.1.2</version>
        </dependency>

    </dependencies>
</dependencyManagement>

<dependencies>

    <!--GWT SDK-->
    <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-user</artifactId>
        <version>${gwtVersion}</version>
        <scope>provided</scope>
    </dependency>

    <dependency>
        <groupId>com.google.gwt</groupId>
        <artifactId>gwt-servlet</artifactId>
        <version>${gwtVersion}</version>
    </dependency>

    <!--Validation API-->
    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
    </dependency>

    <dependency>
        <groupId>javax.validation</groupId>
        <artifactId>validation-api</artifactId>
        <version>1.0.0.GA</version>
        <classifier>sources</classifier>
    </dependency>

    <!--LOGGER-->
    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-api</artifactId>
        <version>1.6.1</version>
    </dependency>

    <dependency>
        <groupId>org.slf4j</groupId>
        <artifactId>slf4j-log4j12</artifactId>
        <version>1.6.1</version>
    </dependency>

    <dependency>
        <groupId>log4j</groupId>
        <artifactId>log4j</artifactId>
        <version>1.2.16</version>
    </dependency>

    <!--PROXY LIBS-->
    <dependency>
        <groupId>javassist</groupId>
        <artifactId>javassist</artifactId>
        <version>3.12.1.GA</version>
    </dependency>

    <dependency>
        <groupId>cglib</groupId>
        <artifactId>cglib</artifactId>
        <version>2.2.2</version>
    </dependency>

    <dependency>
        <groupId>commons-lang</groupId>
        <artifactId>commons-lang</artifactId>
        <version>2.3</version>
    </dependency>

    <!-- TESTING -->
    <dependency>
        <groupId>junit</groupId>
        <artifactId>junit</artifactId>
        <version>4.10</version>
    </dependency>

    <dependency>
        <groupId>org.mockito</groupId>
        <artifactId>mockito-core</artifactId>
        <version>1.9.5-rc1</version>
    </dependency>
</dependencies>

<build>
    <finalName>logicify-infrastructure</finalName>
    <outputDirectory>${webappDirectory}/WEB-INF/classes</outputDirectory>
    <filters>
        <filter>${project.basedir}/../properties/${build.filter.file}</filter>
    </filters>

    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>2.3.2</version>
            <configuration>
                <source>1.5</source>
                <target>1.5</target>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-source-plugin</artifactId>
            <version>2.2.1</version>
            <executions>
                <execution>
                    <id>attach-sources</id>
                    <goals>
                        <goal>jar</goal>
                    </goals>
                </execution>
            </executions>
        </plugin>

         <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-war-plugin</artifactId>
                <version>2.1.1</version>
                <executions>
                    <execution>
                        <phase>compile</phase>
                        <goals>
                            <goal>exploded</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <webappDirectory>${webappDirectory}</webappDirectory>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>gwt-maven-plugin</artifactId>
                <version>2.5.0</version>
                <executions>
                <execution>
                    <goals>
                        <goal>clean</goal>
                        <goal>compile</goal>
                        <goal>resources</goal>
                        <goal>generateAsync</goal>
                    </goals>
                </execution>
            </executions>
            <configuration>

                <compileSourcesArtifacts>
                    <artifact>com.logicify.office:m-domain</artifact>
                    <artifact>com.logicify.office:m-admin</artifact>
                    <artifact>com.logicify.office:m-calendar</artifact>
                    <artifact>com.logicify.office:m-service</artifact>
                    <artifact>com.logicify.office:m-supply</artifact>
                </compileSourcesArtifacts>

                <runTarget>Entry.html</runTarget>
                <hostedWebapp>${webappDirectory}</hostedWebapp>
            </configuration>
            </plugin>
        </plugins>
</build> 
```

没有 GWT 集成的相同配置工作正常。任何帮助都会很有用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T13:18:25.367

正如 Maksym 所说，指定 javax.validation 仅提供您需要实现的接口

```
<!--Validation API-->
<dependency>
    <groupId>javax.validation</groupId>
    <artifactId>validation-api</artifactId>
    <version>1.0.0.GA</version>
</dependency> 
```

你需要一些休眠验证器版本

```
<dependency>
    <groupId>org.hibernate</groupId>
    <artifactId>hibernate-validator</artifactId>
    <version>5.0.0.CR5</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-17T17:24:02.553

尝试将 hibernate-validator.jar 添加到您的类路径中。GWT 2.5.0 使用验证 API **（已包含在 GWT SDK 中）**，您需要为其提供实现。请参阅[验证设置说明](https://developers.google.com/web-toolkit/doc/latest/DevGuideValidation#SetupInstructions)

# java - 打破Java中的嵌套for循环

> ID：13844390
> 
> 赞同：2
> 
> 时间：2012-12-12T16:38:43.537
> 
> 标签：java, loops, for-loop, while-loop, break

> **可能重复：**
> [打破 Java 中的嵌套循环](https://stackoverflow.com/questions/886955/breaking-out-of-nested-loops-in-java)

例如，如伪代码所示，我如何使用 break 和/或 continue 语句在点 1、2 和 3 处返回 while 循环的第一行？

假设我有一个让人联想到以下内容的场景：

```
while(condition) {
    // want to return to this point
    for (Integer x : xs) {
        // point 1
        for (Integer y : ys) {
            // point 2
            ...
        }
        ...
    }
    for (Integer a : as) {
        for (Integer b : bs) {
            // point 3
            ...
        }
        ...
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T16:39:58.403

使用标签，例如：

```
outer:
while(condition) {
// want to return to this point
for (Integer x : xs) {
    // point 1
    for (Integer y : ys) {
        // point 2
        ...
    }
    ...
}
for (Integer a : as) {
    for (Integer b : bs) {
        // point 3
        ...
    }
    ...
} 
```

}

然后您可以使用它`break outer;`来转义 while 循环。这也适用于嵌套的 for 循环，但我尽量不要过度使用标签

正如@Peter 所指出的，`continue outer;`如果您希望尽早完成当前的外部迭代并继续下一个迭代，而不是转义 while 循环，请使用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:41:04.783

[**用语法标记**](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/branch.html)你的循环

`LABEL: LoopType`稍后您可以使用**Break 语句**退出某个循环`break LABEL;`。

```
OUT: while(somecond){
IN:for(...) {
   INNER: for(...){
break IN;// will get you outta IN and INNER for loop
}
 }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T16:41:41.123

```
loop:
while(condition) {
// want to return to this point
for (Integer x : xs) {
    continue loop:
    for (Integer y : ys) {
        continue loop:
        ...
    }
    ...
}
for (Integer a : as) {
    for (Integer b : bs) {
        continue loop:
        ...
    }
    ...
} 
```

}

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-12T16:40:16.517

你可以这样做：

```
here:
while(condition) {
   for (Integer x : xs) {
        // point 1
        for (Integer y : ys) {
            break here;
        }
    } 
```

[Java 规范中描述了](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.15)带或不带标签的 break 语句：

> 没有标签的 break 语句试图将控制转移到最里面的封闭式 switch、while、do 或 for 立即封闭方法或初始化程序的语句；此语句称为中断目标，然后立即正常完成。
> 
> 带有标签 Identifier 的 break 语句尝试将控制转移到封闭的带有标签的语句（第 14.7 节），该语句具有与其标签相同的 Identifier；此语句称为中断目标，然后立即正常完成。在这种情况下，break 目标不必是 switch、while、do 或 for 语句。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T16:39:57.343

是的，您可以使用`break`带有标签的语句：

```
SOME_LABEL:
   // ... some code here
   break SOME_LABEL; 
```

谨慎使用，这是打破多个嵌套循环的干净方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T16:42:30.333

您可以像在此处发布的那样做 stackoverflow.com/questions/886955/break-out-of-nested-loops-in-java 处理相同的问题。

# spring-integration - 如何检查 Spring Integration 中的 mail:inbound-channel-adapter 是否正在运行？

> ID：13844395
> 
> 赞同：2
> 
> 时间：2012-12-12T16:38:59.780
> 
> 标签：spring-integration

我在 Spring Integration 中使用控制总线来启动和停止 mail:inbound-channel-adapter。有什么方法可以检查频道状态吗？如果它正在运行？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T02:21:45.017

使用消息网关向控制总线发送消息...

```
public interface Gateway {
    boolean controlBusBooleanMethod(String command);
}

...

<int:gateway service-interface="foo.Gateway" default-request-channel="toControlBus" />

...

@Autowired
Gateway gateway;

...

boolean isRunning = gateway.controlBusBooleanMethod("@adapter.isRunning()");

.... 
```

高温高压

# vb.net - VB.NET 4.0 使用什么文档

> ID：13844396
> 
> 赞同：0
> 
> 时间：2012-12-12T16:39:02.743
> 
> 标签：vb.net, documentation-generation

我正在寻找一种从 VB.NET 4.0 代码中的源标记生成文档的工具。

到目前为止我遇到的一些问题：

*   [doxygen](http://doxygen.org/)不支持 VB.NET
*   [NDOC](http://ndoc.sourceforge.net/)等已弃用，或不处理泛型等[。](http://vb-doc.sourceforge.net/)
*   [沙堡](http://sandcastle.codeplex.com/)很复杂
*   [doc-o-matic](http://doc-o-matic.com/)和[ForgeDoc](http://www.forgedoc.com)是商业的，似乎专注于 Visual Studio 集成，我不使用（故意）

我会欣赏的功能：

*   用于生成链接 HTML 的命令行工具
*   图形类结构

我希望有人可以指出我忽略的这个小工具...... :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:43:58.147

看看这个链接：

> [https://softwareengineering.stackexchange.com/questions/36071/what-javadoc-equivalents-do-you-use-in-net](https://softwareengineering.stackexchange.com/questions/36071/what-javadoc-equivalents-do-you-use-in-net)
> 
> Sandcastle Help File Builder 支持的 Sandcastle - 两者都可以在 Microsoft 的 CodePlex 网站上找到。
> 
> 不久前，我的任务是使用 NDoc（现已死亡）替换我们公司以前的构建时文档生成。沙堡是提出的新方法。经过研究，我发现 Sandcastle 是微软为生成文档而生产的一堆实用程序。试图自己实现这些实用程序是一场噩梦。
> 
> Sandcastle Help File Builder 是一个非常有用的层，它使用 Sandcastle 实用程序，但使文档项目的创建变得容易了一百万倍。当我请求帮助时，它背后的开发人员在 CodePlex 论坛中反应非常迅速。
> 
> 它提供了用于配置项目的 GUI，并生成与 MSBuild 兼容的项目文件。我设置我们的动态生成 SHFB 项目，使用 MSBuild 运行它，然后输出到我们的内部 API Web 服务器。效果很好。

# string - Bash 字符串操作

> ID：13844399
> 
> 赞同：-1
> 
> 时间：2012-12-12T16:39:10.993
> 
> 标签：string, bash

我正在尝试从以下字符串中获取 bash 中的数字。

`$qry2)); 275`-->`275`而不是`2275`

`$qry1)) { 147`-->`147`而不是`1147`

那么获取最后一个整数的代码是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:44:56.407

如果可以使用`grep`，可以尝试：

```
echo '$qry2)); 275' | grep -o '[0-9]*$' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:45:51.910

使用 an`awk`您可以获得最后一个字段：

```
awk '{ print $NF }' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:00:35.030

使用`sed`：

```
sed 's/^.*[^0-9]\([0-9][0-9]*$\)/\1/' 
```

查找行首，任意数量的字符，后跟一个非数字和一串数字到行尾；用数字字符串替换它。

# php - Symfony2：在重复字段上获取表单验证错误

> ID：13844401
> 
> 赞同：1
> 
> 时间：2012-12-12T16:39:16.283
> 
> 标签：php, symfony

我设置了一个非常基本的表单来注册用户（用户名+密码）。我想在我的控制器中获取验证错误。

我找到了两种方法来做到这一点：

```
// In my controller:
$user = new User();
$form = $this->createForm(new UserType, $user);

$request = $this->get('request');

if($request->getMethod() == 'POST') {
     $form->bind($request);

     if($form->isValid()) {
         // save user in DB
     } else {
         // First way
         $errors = $this->get('validator')->validate($user);

         // OR
         $errors = $form->getErrors();
     }
 } 
```

例如，如果我在表单中输入的用户名太短，这两种方法都有效（此字段上有一个约束 MinLength）。但是如果我输入了两个不同的密码，表单就无效了，并且在 $form->getErrors() 或 $this->get('validator')->validate($user) 中没有消息错误。我怎样才能得到这个错误信息？

这是我构建表单的方式

```
$builder->add('username', 'text', array(
    'attr' => array(
       'placeholder' => 'Choose an username'
    ),
    'label' => 'Username *',
    'error_bubbling' => true,
));

$builder->add('password', 'repeated', array(
    'type' => 'password',
    'invalid_message' => 'The password fields must match.',
    'required' => true,
    'first_options'  => array(
        'label' => 'Password',
        'attr' => array('placeholder' => 'Enter password')
    ),
    'second_options' => array(
        'label' => 'Repeat Password',
        'attr' => array('placeholder' => 'Retype password')
    ),
    )); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:09:44.437

为什么要在控制器中获取此消息？

无论如何，您必须为您的`'password'`字段类型调用 getErrors()。这应该给你`'The password fields must match.'`错误。

```
$passwordErrors = $form->get('password')->getErrors();

foreach ($passwordErrors as $key => $error) {
      $message .= $error->getMessageTemplate(). '<br/>';
} 
```

[`error_bubbling`](http://symfony.com/doc/2.0/reference/forms/types/repeated.html#error-bubbling)选项用于将给定字段的任何错误传递给父字段或表单。在您的示例`error_bubbling`中，将 设置为 true `username`，因此您可以通过在父元素（此处为 $form ）上调用 getErrors() 来获取用户名字段验证错误消息。密码重复字段不是这种情况，除非您`error_bubbling`也将此特定字段的选项设置为 true。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-10T11:24:47.690

在我的情况下，这是最终的解决方案，经过多次尝试......

**FIRST：**设置为 false `error_bubbling`（或不设置，因为 false 是默认值）。

**第二：**使用以下代码获取`field`=>`error_message`数组。

```
 $errors = array();
    foreach ($form->all() as $child) {
        $fieldName = $child->getName();
        $fieldErrors = $form->get($child->getName())->getErrors(true);

        foreach ($fieldErrors as $fieldError){
            $errors[$fieldName] = $fieldError->getMessage();
        }
    } 
```

此代码应适用于 Symfony 3.4 / 4.1

# memory-leaks - 使用 .NET 服务追踪 OOM 错误

> ID：13844405
> 
> 赞同：0
> 
> 时间：2012-12-12T16:39:31.960
> 
> 标签：memory-leaks, out-of-memory

我只是在寻找一些反馈或我应该检查的东西......并不是一个明确的答案。

我正在追踪 .NET 服务发生的 OOM 错误。该服务长时间徘徊在 1.3 GB 左右。我意识到这是一个非常大的内存量，但是服务在这个级别上运行很长时间（最多大约一个月没有错误）运行得非常好。然后它在正常操作下随机崩溃。

我一直在跟踪此服务的私有字节、所有堆中的字节、工作集和 CPU 使用情况。当问题发生时，工作集在大约 30 秒内从大约 700 MB 飙升到 1.3 GB，然后服务崩溃。当这种情况发生时，其他（私有字节、所有堆中的字节和 CPU）的读数会冻结并保持**完全相同**，即使通常这三个在每次更新它们的值时读取的数字略有不同。

这对我来说有点奇怪。我之前追过一些内存泄漏，但这次有很大不同......有人有什么建议吗？欢迎任何想法，反馈，反思。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:43:48.287

崩溃它应该是创建一个崩溃转储文件。使用 windbg 和 SOS 打开它，您应该能够获得导致异常的步骤的堆栈跟踪。如果没有创建故障转储，您可以安装调试诊断工具并让它为您创建转储。

# javascript - Jquery触发身体调整大小

> ID：13844414
> 
> 赞同：2
> 
> 时间：2012-12-12T16:39:58.467
> 
> 标签：javascript, jquery, events

我有一个页面，其中包含由 javascript 修改的内容。我想创建某种在内容大小更改时触发的事件侦听器。我不想要这个：

```
$(window).resize(...); 
```

这会在窗口大小发生变化时触发 - 例如，当用户重新调整浏览器窗口的大小时。我试过这个：

```
$('body').resize(...); 
```

但是它不会触发。如何创建在内容导致页面大小更改时触发的事件？我也对纯 JavaScript 解决方案持开放态度。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-12T16:51:38.103

默认情况下，jQuery 只允许您使用该事件，`window`但至少有一个[插件](http://benalman.com/projects/jquery-resize-plugin/)可以让您将其绑定到其他元素。我建议使用它。

有了这个，你就可以做类似的事情，比如

```
$("#unicorns").resize(function(e){
    // do something when #unicorns element resizes
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-07-01T10:08:22.727

你可以使用这样的方法：

```
$(elem).append('<iframe id="frame0" name="frame0" width=100% height=100% style="position:absolute;top:0px;z-index:-1"></iframe>');
frame0.onresize = function() {
    //..do something ””
} 
```

这将在每个元素大小更改时触发；）

# sql - SQL：创建一个基于日期创建职位的视图

> ID：13844419
> 
> 赞同：2
> 
> 时间：2012-12-12T16:40:12.697
> 
> 标签：sql, views

我实际上正在运行 oracle，但是当我将示例复制到 sqlfiddle 时，如果我选择 oracle 而不是 mysql，它将无法运行，也许 oracle 的 fiddle 版本与我的不同。 [http://www.sqlfiddle.com/#!2/44933/1](http://www.sqlfiddle.com/#!2/44933/1)

```
CREATE TABLE Positiontest(
ID VARCHAR(20),
code CHAR(06),
registrationdate DATE,
PRIMARY KEY(ID,code)
);

INSERT INTO Positiontest VALUES('01','COM002','2012-12-11');
INSERT INTO Positiontest VALUES('02','COM002','2012-12-12');
INSERT INTO Positiontest VALUES('01','COM003','2012-12-11'); 
```

这给了我位置测试表：

```
 ID     CODE      REGISTRATIONDATE
  01     COM002    2012-12-11
  02     COM002    2012-12-12
  01     COM003    2012-12-11 
```

**我想创建一个看起来像这样的视图：**

```
 ID     CODE      POSITION
  01     COM002    1
  02     COM002    2
  01     COM003    1 
```

顺序并不重要，只要每个代码有一个唯一的位置即可。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:45:20.077

```
SELECT ID, code, ROW_NUMBER() OVER (PARTITION BY CODE ORDER BY CODE)
FROM Positiontest 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:45:46.183

你想要的`row_number()`功能：

```
select pt.*,
       row_number() over (partition by code order by code) as Position
from PositionTest pt 
```

# c# - GetHashCode 返回不同的值

> ID：13844425
> 
> 赞同：2
> 
> 时间：2012-12-12T16:40:26.003
> 
> 标签：c#, linq, hashcode

我正在使用 Linq-to-Sql 来查询 SQL Server 数据库。此查询返回我的数据库中的实体列表。我的基础数据没有改变。

收到列表后，我会在其上调用 GetHashCode 以测试是否相等。奇怪的是，哈希值总是不同的。为什么总是不一样？

谢谢，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T16:42:26.427

是不同的，因为它们是不同的对象引用。

如果您想以这种方式行事，您需要根据对象数据为您的对象覆盖[Equals()](http://msdn.microsoft.com/en-us/library/bsc2ak47.aspx)和[GetHashCode() 。](http://msdn.microsoft.com/en-us/library/system.object.gethashcode.aspx)

[这里](http://msdn.microsoft.com/en-us/library/ms173147%28VS.90%29.aspx)有一个关于如何做的例子，[这里](http://blogs.msdn.com/b/ericlippert/archive/2011/02/28/guidelines-and-rules-for-gethashcode.aspx)有一篇关于覆盖该`GetHashCode()`方法的指南的博客文章。希望能帮助到你。

```
class TwoDPoint : System.Object
{
    public readonly int x, y;

    public TwoDPoint(int x, int y)
    {
        this.x = x;
        this.y = y;
    }

    public override bool Equals(System.Object obj)
    {
        if (obj == null) return false;

        TwoDPoint p = obj as TwoDPoint;
        if (p == null) return false;

        // Return true if the fields match
        return (x == p.x) && (y == p.y);
    }

    public override int GetHashCode()
    {
        return x ^ y;
    }
} 
```

正如[Servy](https://stackoverflow.com/users/1159478/servy)在他的评论中所说，请记住，即使是覆盖`GetHashCode()`方法，您也无法使用该类型的数据进行无冲突哈希（永远），您只能降低冲突率。您需要使用`Equals()`以确保具有相同哈希的对象确实相同

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:42:55.210

你覆盖了`GetHashCode()`吗？*如果不是，则默认实现是根据列表的引用*为您提供哈希码。*它与列表的内容*没有任何关系。

所以两个不同的实例意味着两个不同的哈希码。

检查实体类上的列表相等覆盖`Equals`（和）并在列表中使用。`GetHashCode()`[`SequenceEqual`](http://msdn.microsoft.com/en-us/library/bb348567.aspx)

# module - 模块何时超出 Fortran 90/95 的范围？

> ID：13844426
> 
> 赞同：3
> 
> 时间：2012-12-12T16:40:27.970
> 
> 标签：module, fortran, fortran90, fortran95

我的预期用途是

```
program main
  use mod

  external sub

  call sub
end program main

subroutine sub
  ! code here calls subroutines in mod
end subroutine sub 
```

具体来说，将`module mod`在范围内`subroutine sub`？另外，我有兴趣更广泛地了解模块何时在/超出范围。如果重要的话，我正在使用 gfortran 4.6.1。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:46:47.767

它不在子程序 sub 的范围内，因为 sub 不能调用程序或使用 mod 中的变量，因为`sub`它不是程序的一部分`main`。它们没有共同点，是独立的编译单元，只能相互调用（如果它们是可调用的）。

考虑一下：

```
program main

  external sub

  call sub
end program main

subroutine sub
  use mod
  ! code here calls subroutines in mod
end subroutine sub 
```

`mod`在这里，您可以使用in 中的变量和例程`sub`，因为`sub`显式使用`mod`.

另一个例子，`sub`的内部过程在哪里`main`：

```
program main
  use mod

  call sub

  contains

    subroutine sub
      ! code here calls subroutines in mod
    end subroutine sub

end program main 
```

同样在这种情况下，您可以使用 in 中的内容，因为 from`mod`中的`sub`所有内容都`main`在`sub`.

最后，本案`mod`不在范围内，与原案类似。

```
program main
  use mod
  use mod2

  call sub
end program main

module mod2

  contains

    subroutine sub

      ! code here calls subroutines in mod
    end subroutine sub

end module mod2 
```

另一个问题是模块变量超出范围时未定义。Fortran 2008 通过隐式生成所有模块变量来解决这个问题`save`。

# ios - 容器 UIViewController 不释放它的子视图控制器

> ID：13844432
> 
> 赞同：14
> 
> 时间：2012-12-12T16:40:49.030
> 
> 标签：ios, uiviewcontroller, automatic-ref-counting

我有一个自定义容器 UIViewController，它有六个子 UIViewController，以及一组与用户交互以在子视图控制器之间切换的选项卡。问题是当我的容器视图控制器被释放时，子视图控制器没有。

我已经通过在其 dealloc 方法中添加一些调试代码来验证子视图控制器不会被释放，并且只要它们的视图没有被添加到容器视图控制器的视图中，它们就会被释放。

下面是我用来创建自定义容器视图控制器的代码摘录。viewController 指针是 iVar。我也在使用 ARC，所以没有实际的发布调用。

```
- (void)init 
{
    if ((self = [super init])) { 
        vc1 = [[UIViewController alloc] init];
        [self addChildViewController:vc1];

        vc2 = [[UIViewController alloc] init];
        [self addChildViewController:vc2];

        vc3 = [[UIViewController alloc] init];
        [self addChildViewController:vc3];

        vc4 = [[UIViewController alloc] init];
        [self addChildViewController:vc4];

        vc5 = [[UIViewController alloc] init];
        [self addChildViewController:vc5];

        vc6 = [[UIViewController alloc] init];
        [self addChildViewController:vc6];
    }
    return self;
}

- (void)dealloc
{
    [vc1 removeFromParentViewController];
    vc1 = nil;

    [vc2 removeFromParentViewController];
    vc2 = nil;

    [vc3 removeFromParentViewController];
    vc3 = nil;

    [vc4 removeFromParentViewController];
    vc4 = nil;

    [vc5 removeFromParentViewController];
    vc5 = nil;

    [vc6 removeFromParentViewController];
    vc6 = nil;
}

- (void)switchFromViewController:(UIViewController *)fromViewController toViewController:(UIViewController *)toViewController
{
    if (fromViewController) {
        [fromViewController.view removeFromSuperview];
    }

    [self.view addSubview:toViewController];
    toViewController.view.frame = self.view.bounds;
} 
```

你们都知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-12T16:54:54.163

这不是添加和删除子视图控制器的方法

```
 [childViewController willMoveToParentViewController:nil];
    [childViewController view] removeFromSuperview];
    [childViewController removeFromParentViewController]; 
```

是删除和添加它的方法是

```
 [parentViewController addChildViewController:childViewController];
    [parentViewController.view addSubview:childViewController.view];
    [childViewController didMoveToParentViewController:parentViewController]; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-12-12T17:43:46.893

正如我所怀疑的，问题与问题中的视图控制器包含代码无关，而是与您添加观察者（您在回答此问题时讨论的）有关：

```
[[NSNotificationCenter defaultCenter] addObserverForName:kUpdateEventName object:nil queue:nil usingBlock:^(NSNotification *note) {
    // do stuff when update happen
}]; 
```

并且您尝试将其删除

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:kUpdateEventName object:nil]; 
```

所以，有两个问题：

1.  如果您使用`addObserverForName:object:queue:`，这不是删除此观察者的正确方法。相反，定义一个属性来跟踪观察者：

    ```
    @property (nonatomic, weak) id<NSObject> notification; 
    ```

    然后在创建时保存对该观察者的引用：

    ```
    self.notification = [[NSNotificationCenter defaultCenter] addObserverForName:kUpdateEventName object:nil queue:nil usingBlock:^(NSNotification *note) {
        // do something
    }]; 
    ```

    当您想删除它时，请使用此参考：

    ```
    [[NSNotificationCenter defaultCenter] removeObserver:self.notification]; 
    ```

    这将确保观察者被正确移除。

2.  在此观察者就位时释放子视图控制器的失败意味着您传递给`addObserverForName:object:queue:`must of 的这个块具有对`self`. 如果您尝试在 中正确移除此观察者（如上所示）`dealloc`，您仍然会有一个强引用循环（以前称为保留循环）。这可以通过多种方式解决，但最强大的模式是首先通过使用`weakSelf`模式来防止强引用循环：

    ```
    typeof(self) __weak weakSelf = self;

    self.notification = [[NSNotificationCenter defaultCenter] addObserverForName:kFooNotification object:nil queue:nil usingBlock:^(NSNotification *note) {
        // use `weakSelf` in this block; not `self`
    }]; 
    ```

* * *

我的原始答案如下：

* * *

虽然 Srikanth 是正确的，在之后`addChildViewController`，你应该跟注`didMoveToParentViewController:self`，在`removeFromParentViewController`你应该跟注之前`willMoveToParentViewController:nil`。但这不是你的问题。实际上，我使用了您的代码的变体（即使没有`dealloc`），并且子控制器可以正常发布。

最重要的是，我怀疑您的问题出在其他地方，可能是某个地方的保留周期。例如，您的孩子是否对父母有强烈的参考？你在使用循环计时器吗？您引用了一些选项卡。您没有使用标签栏控制器，是吗？一定是这样的。

[如果您想查看原始答案的其余部分以及 OP 代码示例的代码片段和次要细节，请参阅修订历史记录]

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T18:45:03.330

经过数小时试图弄清楚发生了什么，我终于找到了导致我的子视图控制器正确释放的原因。

每个视图控制器都声明了以下通知，以便它们可以响应各种事件。

```
[[NSNotificationCenter defaultCenter] addObserverForName:UPDATE_EVENT object:nil queue:nil usingBlock:^(NSNotification *note) {
    // do stuff when update happen
}]; 
```

结果由于某种原因使我的视图控制器无法正确释放。我猜这会将视图控制器添加到 NSNotificationCenters 观察者列表中，并且在我执行以下行时并没有被删除。

```
[[NSNotificationCenter defaultCenter] removeObserver:self name:UPDATE_EVENT object:nil]; 
```

因此，为了解决我的问题，我只是将通知更改为如下所示进行注册。

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(updateEvent:) name:UPDATE_EVENT object:nil]; 
```

我不知道为什么我注册通知的方式不允许我的视图控制器正确释放，但这似乎已经修复了它。如果有人对为什么会发生此问题有任何见解，请告诉我。

谢谢！

# php - 根据参数名称为函数分配参数

> ID：13844438
> 
> 赞同：0
> 
> 时间：2012-12-12T16:41:12.900
> 
> 标签：php

> **可能重复：**
> [PHP 可选参数 - 按名称指定参数值？](https://stackoverflow.com/questions/4029404/php-optional-parameters-specify-parameter-value-by-name)

我有一个 assoc 数组，其中列出了对我来说是什么参数。这是一个例子：

```
array(
    'param1' => 'value1',
    'param4' => 'value4',
    'param3' => 'value3',
    'param2' => 'value2',
); 
```

请注意，它们可能未排序。现在，有没有办法可以进行调用（静态或从实例，使用`call_user_func_array`或类似方法）并将每个值正确传递给每个参数？可以肯定的是，我想使用该参数数组调用的示例函数是这样的：

```
exampleFunction($param1, $param2, $param3, $param4) {
    ...
} 
```

PS：反射很棒，但我担心执行时间（至少在Java中使用反射时会增加很多）。如果您知道任何其他方法可以做到这一点，那就太棒了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:51:26.267

To avoid this problem you should pass an `array` as parameter, like the following.
This way you'll not be stacked in a specific order and you can set defaults for the parameters that are not in the array.

```
$data = array(
    'param1' => 'value1',
    'param4' => 'value4',
    'param3' => 'value3',
    'param2' => 'value2',
);

exampleFunction($data);

function exampleFunction($params= array()) {
    $defaults = array(
        'param1' => '1',
        'param4' => '2',
        'param3' => '3',
        'param2' => '4',
    );

    $params += $defaults;
} 
```

You can access an array element by the following.

```
$data['param1'], $data['param2'], $data['param3'], ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:51:42.160

If you're just trying to call the function using the values from the parameters, then I think this is what you want to do:

```
exampleFunction($params['param1'], $params['param2'], $params['param3'], $params['param4']); 
```

Arrays in PHP act as maps too, so you can just use it like that.

# javascript - jeditable：使用 Selects 时出错

> ID：13844441
> 
> 赞同：1
> 
> 时间：2012-12-12T16:41:35.583
> 
> 标签：javascript, jquery, asp.net, datatables, jeditable

我已经用 datatables.editable 和 Jeditable 实现了一个 jquery Datatable。我可以将文本区域用作可编辑字段，但在将 Select 设置为可编辑字段时遇到问题。

我有以下代码来初始化可编辑：

```
oTable.makeEditable({  
    sUpdateURL: "../ReconService.asmx/UpdateUser",  
    "aoColumns": [  
        null,  
        null,  
        {  
            indicator: 'Updating user...",  
            tooltip: "Change user",  
            type: "select",  
            submit: "Save",  
            data: getUserFilterOptions()  
        } 
    ]   
}); 
```

然后我有一个 javascript / jquery 函数来从数据库中获取用户列表。在函数中，我尝试了许多不同的东西。现在的功能手动将字符串组装成网站上指定的格式[jeditable](http://www.appelsiini.net/projects/jeditable)

我的功能如下：

```
function getUserFilterOptions() { 
    $.ajax({  
        type:"POST",  
        contentType: "application/json; charset=utf-8",  
        url: "../ReconService.asmx/GetUsers",  
        dataType: "json",  
        success: function(result){  
            var userResult = result.d;  
            if (userResult.length > 0){  
                var text = "{'Select':'Select',";  
                $.each(userResult, function(index, val) {  
                    text += "'";  
                    text += val["value"];  
                    text += "':'";  
                    text += val["value"];  
                    text += "'";  
                    text += ",";  
                });  
                text += "'selected:'Select'}";  
                return text;  
            }  
        },  
    }); 
} 
```

我已经使用 Chrome 中的开发人员工具单步执行该函数，该函数返回以下字符串：
“{'Select':'Select','Administrator':'Administrator','User1':'User 1','selected ':'Select'}"
据我所知，格式是正确的，但是当我单击可编辑的表格单元格时出现错误：

> Uncaught SyntaxError: Unexpected end of input jquery.jeditable.mini.js:34 $.editable.types.select.content jquery.jeditable.mini.js:34 $.fn.editable.each.reset.self.editing jquery.jeditable .mini.js:18 jQuery.event.dispatch jquery-1.8.3.js:3058 jQuery.event.add.elemData.handle.eventHandle jquery-1.8.3.js:2676

令人困惑的是，如果我复制该字符串值并将其直接放入 jeditable 的数据参数中，它就可以正常工作。我什至创建了一个函数来返回这个文字字符串，它工作正常。

例如，替换函数的内容如下：

```
function getUserFilterOptions(){  
    return "{'Select':'Select','Administrator':'Administrator','User1':'User 1','selected':'Select'}"  
} 
```

这工作正常。

我不是 javascript 专家，因此非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:03:00.127

您应该将 ajax 请求的类型从异步更改为同步，如下所示：

```
function getUserFilterOptions() { 
  return $.ajax({  
    type:"POST",  
    contentType: "application/json; charset=utf-8",  
    url: "/url",  
    dataType: "json",  
    async: false,
  }).responseText;
} 
```

我试图从服务器返回你的 json 并且它有效。

# asp.net - 将 PDF 写入响应输出流后刷新页面

> ID：13844445
> 
> 赞同：1
> 
> 时间：2012-12-12T16:41:41.790
> 
> 标签：asp.net, vb.net

我的页面上有一个表单，当我单击提交按钮时，它将信息发送到服务器，服务器通过`Context.Response.OutputStream.Write`.

我想要的是在保存 PDF 后重新加载页面。

我使用的是这些代码行

```
Context.Response.ContentType = "application/pdf"
Context.Response.AppendHeader("Content-Disposition", "attachment; filename=" + Resources.Resources.pdfFileName)
Context.Response.OutputStream.Write(b, 0, b.Length) 
```

我试图在这些之后添加这一行

```
Response.redirect("default.aspx") 
```

但它不起作用。它在保存对话框出现之前在页面之前重定向。

我试图将事件添加到我的流中，但这似乎不存在。

有没有办法等待输出流完成，直到做其他事情，或者将事件链接到保存对话框？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:48:31.610

This is by design. You can't redirect a request once you've written data into the response. The redirect would be done by an http header but this has to be sent to the client before any content is sent.

# java - 将字符串时间戳调整为 GMT

> ID：13844446
> 
> 赞同：0
> 
> 时间：2012-12-12T16:41:45.190
> 
> 标签：java

我有一个`String`当地时间：

```
"2012-12-12T08:26:51+000" 
```

我现在需要`String`基于旧的`String`. 例如，假设本地和 GTM 之间有 2 小时的差异：

```
"2012-12-12T10:26:51+000" 
```

我创建了一个`SimpleDateFormat`：

```
SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy-MM-dd'T'HH:mm:ss+SSSS"); 
dateFormat.setTimeZone(TimeZone.getTimeZone("GMT"));
String time = dateFormat.parse(mCreatedTime).toString(); 
```

但`time`字符串现在采用不同的格式：

```
Wed Dec 12 etc 
```

如何使输出格式为`yyy-MM-dd'T'HH:mm:ss+SSSS`GMT 时间？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T18:35:24.850

该`dateFormat.parse()`方法返回一个 Date 的实例，当您调用`toString()`它时，日期将在默认语言环境中打印。

用于`dateFormat.format()`将您的日期值恢复为所需的格式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-10T09:10:01.223

正如我对这个问题的评论所暗示的那样，我相信这个问题的原始发帖人对日期时间工作感到困惑和误解。尽管如此，我还是编写了一些示例代码，完全符合 Pierre 的要求，同时我警告说他正在遵循一些非常糟糕的做法。

使用 Joda-Time 2.3 库和 Java 7。

```
// © 2013 Basil Bourque. This source code may be used freely forever by anyone taking full responsibility for doing so.
// import org.joda.time.*;
// import org.joda.time.format.*;

// CAUTION: The question asked specifically for the format used here.
// But this format incorrectly uses the PLUS SIGN to mean milliseconds rather than offset from UTC/GMT.
// Very bad thing to do. Will create no end of confusion.
// Another bad thing: This code creates strings representing date-times in different time zones without indicating they are in different time zones.

// Time Zone list: http://joda-time.sourceforge.net/timezones.html
// "Atlantic/South_Georgia" is a time zone two hours behind UTC.
DateTimeZone southGeorgiaZone = DateTimeZone.forID( "Atlantic/South_Georgia" );
DateTimeFormatter formatter = DateTimeFormat.forPattern( "yyyy-MM-dd'T'HH:mm:ss+SSS" );
DateTime dateTimeInSouthGeorgia = formatter.withZone( southGeorgiaZone ).parseDateTime( "2012-12-12T08:26:51+000" );
DateTime dateTimeInUtc = dateTimeInSouthGeorgia.toDateTime( DateTimeZone.UTC );
String screwyBadPracticeDateTimeString = formatter.print( dateTimeInUtc );

System.out.println( "2012-12-12T08:26:51+000 in southGeorgiaDateTime: " + dateTimeInSouthGeorgia );
System.out.println( "same, in UTC: " + dateTimeInUtc );
System.out.println( "screwyBadPracticeDateTimeString: " + screwyBadPracticeDateTimeString ); 
```

运行时……</p>

```
2012-12-12T08:26:51+000 in southGeorgiaDateTime: 2012-12-12T08:26:51.000-02:00
same, in UTC: 2012-12-12T10:26:51.000Z
screwyBadPracticeDateTimeString: 2012-12-12T10:26:51+000 
```

# uiscrollview - 当一个 ImageView 在 ScrollView 中时，使用 Core Image 合成 2 个 UIImageViews

> ID：13844447
> 
> 赞同：2
> 
> 时间：2012-12-12T16:41:47.530
> 
> 标签：uiscrollview, uiimageview, core-image, cifilter, ciimage

我有`UIScrollView`一个`UIImageView`里面有一个。用户可以在 scrollView 内平移和缩放图像。

我在主视图中也有一个`UIImageView`（在滚动视图上方），用户可以在屏幕上移动该图像。

我正在使用 CISourceOverCompositing 将它们结合起来：

```
-(UIImage *) compositeFinalImage {

    CIImage *foregroundImage = [CIImage imageWithCGImage:foregroundImageView.image.CGImage];

    CIFilter *composite =[CIFilter filterWithName:@"CISourceOverCompositing"];
    [composite setValue: foregroundImage forKey: @"inputImage"];
    [composite setValue: [CIImage imageWithCGImage:backgroundImage.CGImage] forKey: @"inputBackgroundImage"];

    CIContext *context = [CIContext contextWithOptions:nil];
    CIImage *finalImage = [composite valueForKey:@"outputImage"];

    return [UIImage imageWithCGImage:[context createCGImage:finalImage fromRect:finalImage.extent] scale:1.0 orientation:userImageOrientation];    
} 
```

...但是当我将其设置为 a 时，图像的位置和比例已经丢失，`CIImage`并且前景图像始终位于左下角。

所以我尝试使用`imageByApplyingTransform`来移动前景图像的位置（最终我也必须应用缩放变换），但是我从 ImageView 中获取位置，但是坐标需要在背景图像的本机分辨率中本身......但是背景图像正在移动（我想这意味着我必须以`ContentOffset`某种方式考虑），并且背景图像具有一定的比例，而前景图像具有一定的比例......

似乎很奇怪，需要重新生成关于每个图像的不同比例、旋转和位置变量的所有转换......

这是我正在尝试做的基本思想（左侧位于主视图坐标中，而右侧位于本机图像坐标中）。

任何帮助都感激不尽！

谢谢！

![总体规划](../Images/36edf5673d27c98f2085bed2a0c4627d.png)

# javascript - extjs4 用图像问题替换按钮

> ID：13844448
> 
> 赞同：1
> 
> 时间：2012-12-12T16:41:56.537
> 
> 标签：javascript, extjs, extjs4.1, extjs-mvc

所以我正在尝试用图像替换 extjs 按钮并让它显示一些工具提示。问题是我只想显示图像而不想要 extjs 按钮的背景。下面是我的代码。要了解我在说什么，这里是 js 小提琴：http: [//jsfiddle.net/nCkZN/7/](http://jsfiddle.net/nCkZN/7/)

CSS：

```
.question {
    background-image: url(../www/css/slate/btn/question.png) !important;
    background-repeat: no-repeat;
} 
```

Javascript：

```
{
    xtype: 'button',
    iconCls: 'question',
    tooltip: "<b>read-only</b>:Read-only users will have read only access to all pages<br> ",
    padding: '2 6 2 7',
    width: 20,
    height: 24
} 
```

编辑：我用文本替换了按钮，只显示图像。但它不会显示工具提示。

```
{
    xtype: 'text',
    cls: 'question',
    tooltip: "<b>read-only</b>:Read-only users will have read only access to all pagess ",
    height: 20,
    padding: '12 6 2 7'
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T19:17:06.343

您可以通过 CSS [http://jsfiddle.net/nCkZN/10/修改按钮的外观](http://jsfiddle.net/nCkZN/10/)

```
Ext.create('Ext.form.Panel', {
    title: 'Contact Info',
    width: 300,
    bodyPadding: 10,
    renderTo: Ext.getBody(),
    items: [{
        xtype: 'button',
        cls: 'my-btn', // Add this so you can style the button
        iconCls:'questionIcon',
        tooltip:"<b>read-only</b>:Read-only users will have read only access to all pages<br> ",
        padding: '2 6 2 7'                    
    }]
});​ 
```

**CSS**

```
.questionIcon {
  background-image:url(http://www.myimage.com/pic.png) !important;
  background-repeat: no-repeat;            
}

.my-btn {
  border-radius: 0;
  background-image: none;
  border: 0;
} 
```

您也可以使用常规`Ext.Img`并向其添加工具提示。当您不想要按钮时，似乎比使用按钮更干净。[http://jsfiddle.net/nCkZN/15/](http://jsfiddle.net/nCkZN/15/)

```
Ext.create('Ext.form.Panel', {
    title: 'Contact Info',
    width: 300,
    bodyPadding: 10,
    renderTo: Ext.getBody(),
    items: [{
        xtype: 'image',
        src:'http://www.southampton.ac.uk/isolutions/computing/elearn/blackboard/small_pen.gif',
        padding: '2 6 2 7',
        listeners: {
            render: function(cmp) {
                Ext.create('Ext.tip.ToolTip', {
                    target: cmp.el,
                    html: "<b>read-only</b>:Read-only users will have read only access to all pages<br> "
                });
            }
        }
    }]
});​ 
```

您真正想要的是一种向任何组件添加工具提示的方法。这是一个插件来做到这一点。

```
Ext.define('Ext.ux.Tooltip', {
    extend: 'Ext.AbstractPlugin',
    alias: 'plugin.ux-tooltip',

    /**
     * @cfg html The text to put into the tooltip
     */
    init: function(cmp) {
        var me = this;
        cmp.on('render', function() {
            Ext.create('Ext.tip.ToolTip', {
                target: cmp.el,
                html: me.html
            });        
        });
    }
}); 
```

现在很容易向任何组件添加工具提示[http://jsfiddle.net/nCkZN/17/](http://jsfiddle.net/nCkZN/17/)

```
Ext.create('Ext.form.Panel', {
    title: 'Contact Info',
    width: 300,
    bodyPadding: 10,
    renderTo: Ext.getBody(),
    items: [{
        xtype: 'image',
        src:'http://www.southampton.ac.uk/isolutions/computing/elearn/blackboard/small_pen.gif',
        padding: '2 6 2 7',
        plugins: {
            ptype: 'ux-tooltip', 
            html: '<b>read-only</b>:Read-only users will have read only access to all pages<br> '
        }
    }]
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T19:01:33.157

背景图片：网址（../www/css/slate/btn/question.png）！重要；

第一个问题是您的网址需要单引号。

在您的 jsfiddle 中，更改为：

```
.question{
  background-image:url('http://www.southampton.ac.uk/isolutions/computing/elearn/blackboard/small_pen.gif');
  background-repeat: no-repeat;
}​ 
```

其次，如果您实际上没有任何文本，您可能不想指定 iconCls，最好只传递一个 cls。我认为 iconCls 是如果您将图标作为配置传递。

# qt - 带有特殊字符的 QString 到 const char*

> ID：13844449
> 
> 赞同：1
> 
> 时间：2012-12-12T16:41:58.747
> 
> 标签：qt, char, special-characters, qstring

我正在尝试将带有特殊字符的 QString 转换为 const char* 但我没有成功。我的功能是：

```
void class::func(const QString& Name) // fileName = "â.tmp" 
{ 
  qDebug()<< Name; // display "â.tmp"
  const char* cfileName = Name.toAscii().data();
  qDebug() << cfileName;  // display "a?.tmp" 
} 
```

qDebug()<< fileName 显示真正的值，即“â.tmp”，但在将其转换为 const a char* 后，我没有成功获得正确的值。

第二次我尝试使用 const char* cfileName = QString::fromUtf8(fileName.toAscii().data()); 但我仍然没有正确的值，它显示相同的内容：“a?.tmp”。我该如何解决这个谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-04T14:53:05.107

由于将 QString 转换为 const char* ：

```
QString str("hi lor!");
const char *s = str.toStdString().c_str();
msg.setText(QString::fromUtf8(s));
msg.exec(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:32:20.457

编辑：使用`QByteArray QString::toUtf8 () const`要好得多

```
QString string = "â.tmp";
const char* encodedString = string.toUtf8().data(); 
```

原件：

您可能需要使用编解码器，请参阅[http://qt-project.org/doc/qt-4.8/qtextcodec.html](http://qt-project.org/doc/qt-4.8/qtextcodec.html)

像这样的东西应该工作：

```
QString string = "â.tmp";
QTextCodec *codec = QTextCodec::codecForName("UTF-8");
QByteArray encodedString = codec->fromUnicode(string); 
```

文档没有说明 QDebug 和 QDebug::operator<< ( const char * s ) 支持什么编码类型，它可能与平台有关，请尝试验证另一个正确的转换。问题可能出在 qDebug() 或其写入的流中。

# php - 将带有提交按钮的复选框发布到 MySQL 数据库

> ID：13844452
> 
> 赞同：-1
> 
> 时间：2012-12-12T16:42:04.757
> 
> 标签：php, html, mysql, arrays, checkbox

目前，我有一段代码，它显示四个复选框，并允许用户选择复选框，单击提交，数据将通过 POST 方法发送到数据库（称为“电子表格”）并存储在其中.

通常，使用单选按钮，存储的数据只是一个元素。但我注意到，使用复选框，元素（特别是我的情况）的范围可以从零到四个项目。所以我的代码问题是，即使我按下所有四个元素，也只有一个元素被存储。我想我必须将这些项目存储为一个数组，但是如何在数据库中存储+检索所述项目？

下面是我的代码：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">

<html> <!--  tells browser this is an HTML document -->
<head> <!-- container of all head elements --> </head>
<body> <!-- Begin the content of the document -->

<?

if (isset($_POST['formSubmit2'])){
    $category = $_POST['category'];
    $accountID = $_POST['accountID']; 

mysql_query("UPDATE Spreadsheet SET category='$category' WHERE accountID='$accountID'");
}

while($row = mysql_fetch_array($query)){  

$values = array('0 - Luxury','1 - Brand','2 - Retailer','3 - B2B'); 

?>

<form name ="category" method ="POST" action ="" >

<?

echo "<input type = 'hidden' name = 'accountID' value = '" . $row['accountID'] . "' >";
 for($i = 0; $i < count($values); $i++){
?>
 <input type="checkbox" name="category" value="<?php echo $values[$i]; ?>" id="rbl_0" <? if($row['category'] == $i) echo "checked='checked'"; ?>/>
 <? echo $values[$i] ?><br>

 <? } ?>

        <input type ="Submit" name ="formSubmit2" value ="Submit" />
        </form>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:47:15.167

您必须给每个人`checkbox`一个不同的名称，因为如果没有，您将覆盖它们的值。

您还可以给它们一个数组名称`category[]`，例如：

```
<input type="checkbox" name="category[]" value="value 1"/> value 1<br/>
<input type="checkbox" name="category[]" value="value 2"/> value 2<br/>
<input type="checkbox" name="category[]" value="value 3"/> value 3<br/> 
```

然后使用以下命令检索它们：

```
$categories = $_GET['category'];

foreach($categories as $category){
    echo "Selected " . $category . "<br/>";
} 
```

另请参阅：[如何在 HTML 中创建数组？^(*文档*)](http://php.net/faq.html.php#faq.html.arrays)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:56:38.033

您可以序列化您的数组，然后将其存储在数据库中的 varchar 列中

节省：

```
$values = array(...);
$data = serialize($values);
// Store data in your database 
```

取回：

```
// $data should come from your DB
$values = unserialize($data);
// Now values holds your array 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:03:23.240

要在表单提交时在 HTTP POST 请求中发送多个值，您需要定义 HTML 数组。

请参考以下代码片段

```
 <input type="checkbox" name="category[]" value="0"/>Luxury 
    <input type="checkbox" name="category[]" value="1"/> Brand
    <input type="checkbox" name="category[]" value="2"/> Retailer
    <input type="checkbox" name="category[]" value="3"/> B2B 
```

可以通过超全局变量 $_POST['category'] 访问复选框的 POST 值

这里 S_POST['category'] 可以作为数组访问。例如**$_POST['category'][0]** , **$_POST['category'][1]** , **$_POST['category'][2]** , **$_POST['category'][3]** 所以你需要遍历用于插入复选框的单个值的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T17:05:56.460

不要传入 name="category"，而是将其设置为 "$category[]"。

您应该能够从 $_POST 中检索它，将其设置为一个新变量，然后按照您的意愿对其进行操作。

```
if (isset($_POST['formSubmit2'])){

   $submitted_category = $_POST['$category'];
   $accountID = $_POST['accountID']; 

   // rest of your code...

} 
```

希望有帮助。

# emacs - 如何使 Cw 的行为与 bash 相同？

> ID：13844453
> 
> 赞同：2
> 
> 时间：2012-12-12T16:42:05.850
> 
> 标签：emacs, copy-paste, key-bindings

在 bash 中，当我按下 Cw 时，它会杀死光标前的单词。在 emacs 中，它会拉出该区域，但是当没有活动区域时，它会向前杀死。所以我必须按 M- 到*(backward-kill-word)*如何使 Cw 表现得像 bash shell？我是否必须创建一个函数来检查活动区域，然后决定杀死*(backwards-kill-word)*或*(kill-region)*还是有其他方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-26T23:10:25.783

从我的 defuns.el （可能从其他地方撕下来）：

```
(defun kill-region-or-backward-word ()
  "If the region is active and non-empty, call `kill-region'.
Otherwise, call `backward-kill-word'."
  (interactive)
  (call-interactively
   (if (use-region-p) 'kill-region 'backward-kill-word))) 
```

编辑：#emacs 上的 tali713 有这个更好的版本，带有交互调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:11:14.987

你已经回答了你自己的问题。只需写几行 elisp 来做这个或那个，这取决于

```
(if mark-active 
```

# php - Magento中数量选择器的下拉列表仅提交一种产品

> ID：13844459
> 
> 赞同：-1
> 
> 时间：2012-12-12T16:42:38.587
> 
> 标签：php, magento

我为我的 Magento 商店集成了一个新的 CMS 产品页面，并希望使用下拉数量选择器让用户选择他们想要购买的商品数量。

到目前为止，我在页面上显示了数量选择器，但由于某种原因，它没有按预期运行。

1) 我已将可购买的产品数量设置为最大 5，但数量选择器显示库存中的数量（当前设置为 1000！）

2) 当我选择的金额大于 1 时，只有 1 个产品被添加到购物篮中

我一直在尝试调整和修改代码，但我无法让它正常工作。如果有人知道我应该如何做到这一点，我将不胜感激！

这是代码：

```
<?php 
$category_id = "49"; // category_id for "Products"
$_productCollection = Mage::getResourceModel('catalog/product_collection')
->addAttributeToSelect(array('name', 'price', 'small_image', 'short_description'), 'inner')
->addCategoryFilter(Mage::getModel('catalog/category')->load($category_id));
?>
<?php if($_productCollection->count()): ?>

       <?php 
       $products = array();
       foreach ($_productCollection as $_product) { 
        ?>

    <div class="media">
          <a class="fancybox static-thumbs pull-left" href="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(500, 450); ?>" alt="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" title="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>">
            <img class="media-object" src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(150, 125); ?>" alt="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" title="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" />
          </a>
    <div class="media-body span5">
       <h4 class="media-heading"><a class="view-item-button" href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($_product->getName()) ?>"><?php echo $this->__('Order'); ?> <?php echo $this->htmlEscape($_product->getName())?><?php echo $this->__('&#8482;'); ?></a></h4>

        <p>
            <?php echo $_product->_data['short_description']; ?>
        </p>
      </div>
      </div>
      <div class="media span2"> 
        <h2 class="product-name">Price <?php echo Mage::helper('core')->currency($_product->getPrice());; ?></h2>
         <?php if($_product->isSaleable()): ?>
         <select name="qty">
            <?php $i = 1 ?>
                <?php do { ?>
                <option value="<?php echo $i?>">
            <?php echo $i?>
            <?php $i++ ?>
                </option>
            <?php } while ($i <= (int)Mage::getModel('cataloginventory/stock_item')->loadByProduct($_product)->getQty()) ?>
        </select>
        <div class="clearfix"></div>
            <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="btn btn-danger" onclick="setLocation('<?php echo $this->getAddToCartUrl($_product) ?>')"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                <?php else: ?>
            <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
        <?php endif; ?> 
        <?php } ?>
    </div>

<?php endif; ?>
<script type="text/javascript">
    $j(document).ready(function() {
        $j(".fancybox").fancybox();
    });
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:20:31.437

如果有人遇到类似问题，您需要使用以下代码：

```
<?php 
$category_id = "49"; // category_id for "Accessories"
$_productCollection = Mage::getResourceModel('catalog/product_collection')
->addAttributeToSelect(array('name', 'price', 'small_image', 'short_description'), 'inner')
->addCategoryFilter(Mage::getModel('catalog/category')->load($category_id));
?>
<?php if($_productCollection->count()): ?>

       <?php 
       $products = array();
       foreach ($_productCollection as $_product) { 
        ?>
<form action="<?php echo $this->getSubmitUrl($_product) ?>" method="post" id="product_addtocart_form"<?php if($_product->getOptions()): ?> enctype="multipart/form-data"<?php endif; ?> class="form">
    <div class="media">
          <a class="fancybox static-thumbs pull-left" href="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(500, 450); ?>" alt="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" title="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>">
            <img class="media-object" src="<?php echo $this->helper('catalog/image')->init($_product, 'small_image')->resize(150, 125); ?>" alt="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" title="<?php echo $this->htmlEscape($this->getImageLabel($_product, 'small_image')) ?>" />
          </a>
    <div class="media-body span5">
       <h4 class="media-heading"><a class="view-item-button" href="<?php echo $_product->getProductUrl() ?>" title="<?php echo $this->htmlEscape($_product->getName()) ?>"><?php echo $this->__('Order'); ?> <?php echo $this->htmlEscape($_product->getName())?><?php echo $this->__('&#8482;'); ?></a></h4>

        <p>
            <?php echo $_product->_data['short_description']; ?>
        </p>
      </div>
      </div>
      <div class="media span2"> 
        <h2 class="product-name">Price <?php echo Mage::helper('core')->currency($_product->getPrice());; ?></h2>
         <?php if($_product->isSaleable()): ?>
   <select name="qty">
  <?php $i = 1 ?>
  <?php do { ?>
    <option value="<?php echo $i?>">
      <?php echo $i?>
      <?php $i++ ?>
    </option>
    <?php } while ($i <= (int)Mage::getModel('cataloginventory/stock_item')->loadByProduct($_product)->getMaxSaleQty()) ?>
</select>
        <div class="clearfix"></div>
            <button type="button" title="<?php echo $this->__('Add to Cart') ?>" class="btn btn-danger" onclick="productAddToCartForm.submit(this)"><span><span><?php echo $this->__('Add to Cart') ?></span></span></button>
                <?php else: ?>
            <p class="availability out-of-stock"><span><?php echo $this->__('Out of stock') ?></span></p>
        <?php endif; ?> 
        <?php } ?>

    </div>
</div>
<?php endif; ?>
<hr />
<script type="text/javascript">
    $j(document).ready(function() {
        $j(".fancybox").fancybox();
    });
</script>

 <script type="text/javascript">
    //<![CDATA[
        var productAddToCartForm = new VarienForm('product_addtocart_form');
        productAddToCartForm.submit = function(button, url) {
            if (this.validator.validate()) {
                var form = this.form;
                var oldUrl = form.action;

                if (url) {
                   form.action = url;
                }
                var e = null;
                try {
                    this.form.submit();
                } catch (e) {
                }
                this.form.action = oldUrl;
                if (e) {
                    throw e;
                }

                if (button && button != 'undefined') {
                    button.disabled = true;
                }
            }
        }.bind(productAddToCartForm);

        productAddToCartForm.submitLight = function(button, url){
            if(this.validator) {
                var nv = Validation.methods;
                delete Validation.methods['required-entry'];
                delete Validation.methods['validate-one-required'];
                delete Validation.methods['validate-one-required-by-name'];
                if (this.validator.validate()) {
                    if (url) {
                        this.form.action = url;
                    }
                    this.form.submit();
                }
                Object.extend(Validation.methods, nv);
            }
        }.bind(productAddToCartForm);
    //]]>
    </script> 
```

一定要添加多部分表单和javascript！！！

# c++ - 多线程调度任务

> ID：13844463
> 
> 赞同：0
> 
> 时间：2012-12-12T16:42:57.503
> 
> 标签：c++, multithreading, scheduling, task-queue, job-scheduling

我正在尝试在多线程系统中安排任务。我的想法是每个线程都有一个本地队列，每个线程将从其本地队列中获取作业。但是当线程达到某个阈值时，它不应该获取作业，而是应该将作业转移到低于阈值级别的线程。

我的疑问是如何设置线程的阈值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:52:32.113

这个问题的另一种安排是让已经完成队列的线程能够从其他队列中获取工作。这更好地称为“工作窃取”，并且是众所周知的调度算法，例如

[http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.38.8905](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.38.8905)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:08:51.870

您使用的是什么线程库？

我在所有线程项目 TBB 和 Cilk Plus 中使用了两个 OSS 库。这些更高级别的运行时提供的一个特性是它们以一种有效利用处理器资源的方式自动将任务调度到线程上。运行时在负载平衡许多任务方面也非常有效。

www.threadingbuildblocks.org

www.cilkplus.org

# r - R ksvm 支持向量

> ID：13844466
> 
> 赞同：2
> 
> 时间：2012-12-12T16:43:11.563
> 
> 标签：r, svm, kernlab

我正在尝试提取 R 的 ksvm 包的权重。

通常我使用 e1071 包，权重可以通过

```
 weights = t(svmmodel$coefs) %*% svmmodel$SV 
```

但是，当我查看 ksvm 包时，系数和 alpha（支持向量）都是相同维度的列表。alpha 不返回向量。

我的问题是，我应该如何访问包括零值的支持向量？我是否必须使用 SVindex 将变量对应回原始输入？

谢谢。

# php - 将复选框值发布到电子邮件？

> ID：13844469
> 
> 赞同：-2
> 
> 时间：2012-12-12T16:43:30.750
> 
> 标签：php, email, checkbox

我有一个简单的复选框示例，它记住在提交表单后选择的内容并且出现错误。

这部分效果很好......但是，我想将生成的“选中”框发布到我的表单邮件功能。

我现在只报告选中或未选中的内容，我希望在没有未选中框甚至注册的情况下拥有选中框的“值”。

```
<?php

$CB_1 = 'unchecked';
$CB_2 = 'unchecked';
$CB_3 = 'unchecked';
$CB_4 = 'unchecked';
$CB_5 = 'unchecked';

if (isset($_POST['submit'])) {

if (isset($_POST['CB_1'])) {$CB_1 = $_POST['CB_1'];
if ($CB_1 == 'item_01') {$CB_1 = 'checked';}
}

if (isset($_POST['CB_2'])) {$CB_2 = $_POST['CB_2'];
if ($CB_2 == 'item_02') {$CB_2 = 'checked';}
}

if (isset($_POST['CB_3'])) {$CB_3 = $_POST['CB_3'];
if ($CB_3 == 'item_03') {$CB_3 = 'checked';}
}

if (isset($_POST['CB_4'])) {$CB_4 = $_POST['CB_4'];
if ($CB_4 == 'item_04') {$CB_4 = 'checked';}
}

if (isset($_POST['CB_5'])) {$CB_5 = $_POST['CB_5'];
if ($CB_5 == 'item_05') {$CB_5 = 'checked';}
}
}

if (isset($_POST['submit'])) {
$error  = "";

    if (!empty($_POST['email'])) {
    $email = $_POST['email'];

    if (!preg_match("/^[a-z0-9]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i", $email)){ 
    $error .= "E-mail address not valid.";
    }

    } else {

    $error .= "E-mail address is required.";
    }

    if (empty($error)) {

    $from = 'From: '. @TEST .' <'. $email .'>';
    $to = "someone@company.com";
    $subject = "CHECKBOX TEST";
    $content = "

    checkbox selections: 
                        check box 01: $CB_1
                        check box 02: $CB_2
                        check box 03: $CB_3
                        check box 04: $CB_4
                        check box 05: $CB_5

    ";

    $success = mail($to,$subject,$content,$from);
    }
    }

?>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">

<?php if (!empty($error)) echo $error ?>

<br><br><br>

e-mail: <input type="text" name="email" value="<?php if (isset ($_POST {'email'})) { echo $_POST['email']; } ?>" />

<P>

<input type="checkbox" name="CB_1" value="item_01" <?PHP echo $CB_1; ?> /> Item 01 

<input type="checkbox" name="CB_2" value="item_02" <?PHP echo $CB_2; ?> /> Item 02 

<input type="checkbox" name="CB_3" value="item_03" <?PHP echo $CB_3; ?> /> Item 03 

<input type="checkbox" name="CB_4" value="item_04" <?PHP echo $CB_4; ?> /> Item 04 

<input type="checkbox" name="CB_5" value="item_05" <?PHP echo $CB_5; ?> /> Item 05 

<P>

<input type="submit" name="submit" value="Submit"></input>

</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:47:36.473

我找到了我想要的东西，我认为这是一个数组，我认为“redelman431”试图让我去做，但当时对我来说没有任何意义。

然后，我偶然发现了“David Bélanger”的另一个数组，由于某种原因，它对我来说更有意义，所以我将它用于我的复选框，并且效果非常好。

新问题是我无法获得已检查的复选框，以记住如果页面上的其他地方有错误，这是一场灾难，因为我的最终表单有很多。

有任何想法吗？

```
<?php

    #   Default Vars
    $_group_01 = '';
    if(isset($group_01) === TRUE){
    #   Is Array ?
    if(is_array($group_01) === TRUE){
    #   Count
    $c = count($group_01);
    #   Loop
    for($i=0; $i < $c; $i++){
    $_group_01.= (isset($group_01[$i]) === TRUE ? $group_01[$i] : '').($i == ($c-1) ? '' : ($i == $c-2 ? ' and ' : ', '));
    }
    }
    }

if (isset($_POST['submit'])) {
$error  = "";

    if (!empty($_POST['email'])) {
    $email = $_POST['email'];

    if (!preg_match("/^[a-z0-9]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i", $email)){ 
    $error .= "E-mail address not valid.";
    }

    } else {

    $error .= "E-mail address is required.";
    }

    if (empty($error)) {

    $from = 'From: '. TEST .' <'. $email .'>';
    $to = "someone@company.com";
    $subject = "CHECKBOX TEST";
    $content = "

checkbox selections: 

Items Checked: $_group_01

    ";

    $success = mail($to,$subject,$content,$from);
    }
    }

?>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">

<span style="color: red;"><?php if (!empty($error)) echo $error ?></span>

<br><br><br>

e-mail: <input type="text" name="email" value="<?php if (isset ($_POST {'email'})) { echo $_POST['email']; } ?>" />

<P>

<input type="checkbox" name="group_01[]" value="Item 01" 
<?php if(isset($_POST['group_01'])) { echo 'checked'; } ?> />Item 01

<input type="checkbox" name="group_01[]" value="Item 02" 
<?php if(isset($_POST['group_01'])) { echo 'checked'; } ?> />Item 02

<input type="checkbox" name="group_01[]" value="Item 03" 
<?php if(isset($_POST['group_01'])) { echo 'checked'; } ?> />Item 03

<input type="checkbox" name="group_01[]" value="Item 04" 
<?php if(isset($_POST['group_01'])) { echo 'checked'; } ?> />Item 04

<input type="checkbox" name="group_01[]" value="Item 05" 
<?php if(isset($_POST['group_01'])) { echo 'checked'; } ?> />Item 05

<P>

<input type="submit" name="submit" value="Submit"></input>

</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T09:06:47.377

okay, I found a way to do what I wanted but I'm fairly sure it's not the way someone who has real experience with PHP would do it. Any suggestions?

redelman431, thanks for your suggestion but it was really too advanced for my skill level.

```
<?php

        if(isset($_POST['item_01'])) {$item_01 = 'Item 01';}
        if(isset($_POST['item_02'])) {$item_02 = 'Item 02';}
        if(isset($_POST['item_03'])) {$item_03 = 'Item 03';}
        if(isset($_POST['item_04'])) {$item_04 = 'Item 04';}
        if(isset($_POST['item_05'])) {$item_05 = 'Item 05';}

if (isset($_POST['submit'])) {
$error  = "";

    if (!empty($_POST['email'])) {
    $email = $_POST['email'];

    if (!preg_match("/^[a-z0-9]+(\.[_a-z0-9-]+)*@[a-z0-9-]+(\.[a-z0-9-]+)*(\.[a-z]{2,3})$/i", $email)){ 
    $error .= "E-mail address not valid.";
    }

    } else {

    $error .= "E-mail address is required.";
    }

    if (empty($error)) {

    $from = 'From: '. @TEST .' <'. $email .'>';
    $to = "someone@company.com";
    $subject = "CHECKBOX TEST";
    $content = "

    checkbox selections: 

                        checked box's: $item_01 $item_02 $item_03 $item_04 $item_05

    ";

    $success = mail($to,$subject,$content,$from);
    }
    }

?>

<form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">

<span style="color: red;"><?php if (!empty($error)) echo $error ?></span>

<br><br><br>

e-mail: <input type="text" name="email" value="<?php if (isset ($_POST {'email'})) { echo $_POST['email']; } ?>" />

<P>

<input type="checkbox" name="item_01" value="Item 01" 
<?php if(isset($_POST['item_01'])) { echo 'checked'; } ?> /> Item 01

<input type="checkbox" name="item_02" value="Item 02" 
<?php if(isset($_POST['item_02'])) { echo 'checked'; } ?> /> Item 02

<input type="checkbox" name="item_03" value="Item 03" 
<?php if(isset($_POST['item_03'])) { echo 'checked'; } ?> /> Item 03

<input type="checkbox" name="item_04" value="Item 04" 
<?php if(isset($_POST['item_04'])) { echo 'checked'; } ?> /> Item 04

<input type="checkbox" name="item_05" value="Item 05" 
<?php if(isset($_POST['item_05'])) { echo 'checked'; } ?> /> Item 05

<P>

<input type="submit" name="submit" value="Submit"></input>

</form> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:06:14.010

我知道这可能不一定能回答这个问题，但可以让你的代码更高效的一种方法就是这样做。

```
for($i=1; $i<=5;$i++)
{

     if(isset($_POST['submit'])&& isset($_POST['CB_'.$i]) && $CB_.$i=='item_0'.$i)
     {
        $CB_.$i = $_POST['CB_'.$i];
        $CB_.$i = 'checked';
     }
} 
```

如果您以这种方式修复它，它也可能使我们更容易调试。

# maven - Tomcat7 Maven 插件似乎没有在配置中获取 url

> ID：13844472
> 
> 赞同：1
> 
> 时间：2012-12-12T16:43:36.710
> 
> 标签：maven, plugins, tomcat7

> **可能重复：**
> [Maven 尝试部署到本地主机而不是远程服务器](https://stackoverflow.com/questions/13725945/maven-attempting-to-deploy-to-localhost-instead-of-remote-server)

我在这里有一个有趣的问题。我正在使用 Maven - 3.0.4 和 jdk 1.6 在 Windows 7 Pro x64 环境中工作

我在 Maven 的 settings.xml 中有：

```
 <servers>
        <server>
            <id>LocalTomcatServer</id>
            <username>localTomcatAdmin</username>
            <password>password</password>
        </server>
    </servers> 
```

在我的 tomcat-users.xml 文件中，我定义了：

```
 <tomcat-users>
        <role rolename="manager-gui"/>
        <role rolename="manager-script"/>
        <role rolename="admin"/>
        <user username="localTomcatAdmin" password="password" roles="manager-gui,manager-script,admin"/>
    </tomcat-users> 
```

我还创建了一个 pom-deploy.xml，它是 pom.xml 的父级（位于同一级别），其中包含以下插件：

```
 <plugin>
        <groupId>org.apache.tomcat.maven</groupId>
        <artifactId>tomcat7-maven-plugin</artifactId>
        <version>2.0</version>
        <configuration>
             <server>LocalTomcatServer</server>
         <path>/<path to deploy to></path>
         <port>8080</port>
        </configuration>
    </plugin> 
```

出于某种我无法理解的原因，当我运行 mvn -f pom-deploy.xml tomcat:deploy 时，我从 maven 得到以下输出。

```
 [INFO] BUILD FAILURE
    [INFO] ------------------------------------------------------------------------
    [INFO] Total time: 20.201s
    [INFO] Finished at: Wed Dec 12 09:00:21 EST 2012
    [INFO] Final Memory: 11M/149M
    [INFO] ------------------------------------------------------------------------
    [ERROR] Failed to execute goal org.codehaus.mojo:tomcat-maven-plugin:1.1:deploy  (default-cli) on project <project name>: Cannot invoke Tomcat manager: Server returned HTTP response code: 403 for
    URL: http://localhost:8080/manager/deploy?path=%2FTripTixRX&war= -> [Help 1] 
```

每个其他生命周期目标都有效。

未为此项目配置 codehaus 插件。我已经尝试了 org.codehaus.mojo 插件并将其设置为`http://127.0.0.1:8080/manager/html`

输出似乎表明 url 没有被插件解析，但是，现在我已经切换到官方 tc7 插件，我认为这会缓解这个问题。

这几乎表明 maven 没有使用配置的插件。我已经清除了我的 .m2/repository 并重新开始。仍然没有运气。此时，我开始挖掘，发现它甚至没有下载tomcat7-maven-plugin。我在这里阅读了一些关于添加到 settings.xml 中的评论，我不情愿地这样做了。这对我来说似乎很违反直觉，但我想消除所有的可能性。我将 org.tomcat.apache.maven 添加到我的 settings.xml 文件中，用于 maven、rebuilt 和 blamo，它可以工作。

所以在这一点上，我很高兴它有效，但我很生气。在不修改每台机器的 maven settings.xml 配置的情况下，这不是完全消除了从一个 maven 环境到另一个环境的可移植性吗？我不应该为项目配置 Maven，但我认为配置应该完全驻留在 pom 中以获得最大的可移植性。

另外我不确定这是否是我的设置，但是没有关于“嘿，您配置的这个插件没有找到！”的消息。我不得不 -X -e 并将我的屁股拖过输出日志，甚至可以远程了解最终问题“可能”是什么。

让它发挥作用从来都不是问题，这就是为什么。似乎必须像这样定义它，从我的角度来看，项目可移植性已经出现了。这是我的 Maven 配置的结果还是这是常态？从阅读其他用户关于此的帖子来看，这似乎是 maven 中的正常现象。我想最终的结果是“我很高兴我回答了这个问题”，但我更关注如何以及为什么机制。

编辑：我正在运行的命令是： mvn -f pom-deploy.xml -U -Dmaven.test.skip=true clean package tomcat7:deploy -X -e

这是 maven 输出的一个片段，它仍然显示没有身份验证服务器：

```
 [DEBUG] Configuring mojo org.apache.tomcat.maven:tomcat7-maven-plugin:2.0:deploy from plugin realm ClassRealm[plugin>org.apache.tomcat.maven:tomcat7-maven-plugin:2.0, parent: sun.misc.Launcher$AppClassLoader@c22b29a]
    [DEBUG] Configuring mojo 'org.apache.tomcat.maven:tomcat7-maven-plugin:2.0:deploy'  with basic configurator -->
    [DEBUG]   (f) charset = ISO-8859-1
    [DEBUG]   (f) contextFile = `E:\workspace\<repo-name>\branches\<project name>-0.1\target\<project name>\META-INF\context.xml`
    [DEBUG]   (f) ignorePackaging = false
    [DEBUG]   (f) mode = war
    [DEBUG]   (f) packaging = war
    [DEBUG]   (f) path = /<project name>
    [DEBUG]   (f) update = false
    [DEBUG]   (f) url = http://localhost:8080/manager/html
    [DEBUG]   (f) version = 2.0
    [DEBUG]   (f) warFile = E:\workspace\<repo name>\branches\<Project name>-0.1\target\<project-name>.war
    [DEBUG] -- end configuration --
    [INFO] Deploying war to http://localhost:8080/<project name>
    [DEBUG] No server specified for authentication - using defaults
    Uploading: http://localhost:8080/manager/html/deploy?path=%2F<project name> 
```

有了这个，它让我害怕：401 - 未经授权

# jquery - 更新表单项时显示通知

> ID：13844474
> 
> 赞同：0
> 
> 时间：2012-12-12T16:43:42.313
> 
> 标签：jquery, notifications

我正在使用它来捕获表单上发生的事件。

```
$( '.my-form input[type=checkbox]' ).click( function() {
    var CurrectForm=$(this).parents('.my-form:first');
    $.post(
        'go.php',
        CurrectForm.serialize(),
        function( response ) {
            CurrectForm.find('#form-response').html( response );
        }
    );
} );

$("select").change( function() {
    var CurrectForm=$(this).parents('.my:first');
    $.post(
        'go.php',
        CurrectForm.serialize(),
        function( response ) {
            CurrectForm.find('#form').html( response );
        }
    );
} ); 
```

每当单击复选框或更改下拉列表时，值都会传递给 go.php 并更新 MySQL 数据库。

有什么方法可以在屏幕上显示“更新成功”的通知？我一直在看：[http](http://akquinet.github.com/jquery-toastmessage-plugin/demo/demo.html) ://akquinet.github.com/jquery-toastmessage-plugin/demo/demo.html 它确实可以满足我的要求。

但是我是否将它添加到我的主页或 go.php 以及如何？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T13:39:20.610

我通过在之后调用通知功能来完成这项工作

```
function( response ) {
            CurrectForm.find('#form').html( response );
        } 
```

这现在可以按我的意愿工作了:)

# c# - 如何设置互斥的自定义配置元素？

> ID：13844478
> 
> 赞同：3
> 
> 时间：2012-12-12T16:43:47.550
> 
> 标签：c#, .net

我正在使用 .NET 配置 API 编写自定义配置部分。我想定义一个可以恰好具有两个子元素之一的部分，

例如

```
<MyCustomSection>
    <myItems>
        <myItemType name="1">
            <firstSubTypeConfig />
        </myItemType>
        <myItemType name="2">
            <secondSubTypeConfig />
        </myItemType>
    </myItems>
</MyCustomSection> 
```

目前，我的部分定义如下：

```
public class MyCustomSection : ConfigurationSection
{
    public override bool IsReadOnly()
    {
        return false;
    }

    [ConfigurationProperty("myItems")]
    public MyItemsCollection MyItems 
    { 
        get { return (MyItemsCollection)base["myItems"]; }
        set { base["myItems"] = value; }
    }
}

[ConfigurationCollection(typeof(MyItemType), AddItemName="myItemType",
    CollectionType=ConfigurationElementCollectionType.BasicMap)]
public class MyItemsCollection : ConfigurationElementCollection
{
    public override bool IsReadOnly()
    {
        return false;
    }

    public override ConfigurationElementCollectionType CollectionType
    {
        get { return ConfigurationElementCollectionType.BasicMap; }
    }

    protected override string ElementName
    {
        get { return "myItemType"; }
    }

    protected override ConfigurationElement CreateNewElement()
    {
        return new MyItemType();
    }

    protected override object GetElementKey(ConfigurationElement element)
    {
        return (element as MyItemType).Name;
    }
}

public class MyItemType : ConfigurationElement
{
    public override bool IsReadOnly()
    {
        return false;
    }

    [ConfigurationProperty("name", IsRequired=true)]
    public string Name 
    { 
        get { return (string)base["name"]; }
        set { base["name"] = value; }
    }

    [ConfigurationProperty("firstSubTypeConfig")]
    public FirstSubTypeConfig FirstSubTypeConfig 
    { 
        get { return (FirstSubTypeConfig)base["firstSubTypeConfig"]; }
        set { base["firstSubTypeConfig"] = value; }

    }

    [ConfigurationProperty("secondSubTypeConfig")]
    public SecondSubTypeConfig SecondSubTypeConfig 
    { 
        get { return (SecondSubTypeConfig)base["secondSubTypeConfig"]; }
        set { base["secondSubTypeConfig"] = value; }
    }
}

public class FirstSubTypeConfig : ConfigurationElement
{
    public override bool IsReadOnly()
    {
        return false;
    }
}

public class SecondSubTypeConfig : ConfigurationElement
{
    public override bool IsReadOnly()
    {
        return false;
    }
} 
```

配置也以编程方式修改和保存，目前，即使我只指定了 firstSubTypeConfig 元素，保存配置部分也会添加 secondSubTypeConfig 元素。

我的第一个想法是为 and 引入一个通用基类`FirstSubTypeConfig`，`SecondSubTypeConfig`但我不清楚配置 api 是否或如何处理它。

如何设置互斥的自定义配置元素？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:27:08.197

我不确定这是“正确”的方法，但这有效。

问题中编写的代码将很好地加载配置文件。您可以检查该`ElementInformation.IsPresent`属性以验证是否包含一个元素。

例如

```
var custom = (MyCustomSection)ConfigurationManager.GetSection("MyCustomSection");
foreach (MyItemType itemType in custom.MyItems)
{
    if (itemType.FirstSubTypeConfig.ElementInformation.IsPresent 
        && itemType.SecondSubTypeConfig.ElementInformation.IsPresent)
    {
        throw new ConfigurationErrorsException("At most one of firstSubTypeConfig or secondSubTypeConfig can be specified in a myItemType element");
    }
    else if (!itemType.FirstSubTypeConfig.ElementInformation.IsPresent
        && !itemType.SecondSubTypeConfig.ElementInformation.Ispresent)
    {
        throw new ConfigurationErrorsException("Either a firstSubTypeConfig or a secondSubTypeConfig element must be specified in a myItemType element");
    }
} 
```

至于保存配置，似乎检查`ElementInformation.IsPresent`并明确设置它`null`会阻止元素被写入配置文件。例如

```
var config = ConfigurationManager.OpenExeConfiguration(ConfigurationUserLevel.None);
var custom = (MyCustomSection)config.GetSection("MyCustomSection");

//make modifications against the custom variable ...

foreach (MyItemType itemType in custom.MyItems)
{
    if (!itemType.FirstSubTypeConfig.ElementInformation.IsPresent)
        itemType.FirstSubTypeConfig = null;
    if (!itemType.SecondSubTypeConfig.ElementInformation.IsPresent)
        itemType.SecondSubTypeConfig = null;  
}

config.Save(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-10-03T14:21:58.240

我认为您应该对`PostDeserialize`从类中提取的方法执行此操作`ConfigurationElement`，而不对您的业务逻辑执行此操作。

例如：

```
protected override void PostDeserialize()
{
    base.PostDeserialize();
    if (FirstSubTypeConfig != null && SecondTypeCOnfig != null)
    {
        throw new ConfigurationErrorsException("Only an element is allowed.");
    }
} 
```

# java - 请求调度程序转发和 servlet 链接之间的区别

> ID：13844481
> 
> 赞同：1
> 
> 时间：2012-12-12T16:44:01.283
> 
> 标签：java, servlets, request, response

request dispatcher 的 forward 方法和 servlet chaining 的概念有什么区别？

例子

```
RequestDispatcher rd= req.getRequestDispatcher("pathToServlet");
rd.forward(req,resp); 
```

这样做是在不涉及客户端（浏览器）交互的情况下转发请求。但是我们可以使用*Servlet Chaining*实现相同的目标吗？如果我们可以那么有什么区别？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T16:56:08.267

这没有什么不同。“Servlet 链接”只是在不存在 servlet 过滤器的黑暗 J2EE 1.1/1.2 时代创造的一个术语。实际上，它基本上是使用`RequestDispatcher#forward()`从一个 servlet 转发到另一个 servlet 的方法（并确保响应尚未提交，否则会导致`IllegalStateException`）。

自 J2EE 1.3（Servlet 2.3，*十*多年前！）以来，引入了[servlet 过滤器](https://stackoverflow.com/tags/servlet-filters/info)，这使得该过程变得更加干净和容易。从那时起，“Servlet 链接”就被人们所反对，通常被标记为“糟糕的设计”。这些天来，您最终希望只得到一个前端控制器 servlet 和几种业务模型。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:00:49.347

我认为**“链接”**的概念，因为它与配置服务器而不是使用`forward()`方法有关，是您可以配置某些类型的请求来激活特定的 servlet 链。

例如，如果请求来自 Intranet，您可能希望用户看到一些内部广告。所以你可以让所有这些请求`AddInternalBanner`首先作为 servlet 进行。

如果特定的 servlet 决定它应该传递请求，则该`forward()`方法很有用。

# java - 使用计时器在 JFreeChart 上闪烁 XYImageAnnotation

> ID：13844489
> 
> 赞同：1
> 
> 时间：2012-12-12T16:44:25.057
> 
> 标签：java, timer, annotations, jfreechart, bufferedimage

我很难在 JFreeChart - XYLineChart 上绘制图像。主要问题是注释的 x 和 y 坐标是实时动态更新的。因此，我的代码添加注释并清除它以绘制新的注释会导致闪烁，这对用户来说很烦人。

我已经检查了一些在 JAVA 上使用 update() 、paint () 或 repaint() 方法使用图形的闪烁问题的示例，但似乎无法在 JFreeChart 上实现。

您是否有任何想法如何摆脱闪烁或解决方法以在 JFreeChart 上使用一个 bufferedImage 而不是注释？

更具体地说，这里是画线和图像：

[截屏](http://i45.tinypic.com/270px.jpg)

所以这个十字准线（作为缓冲图像）应该随着 x 和 y 轴的更新值在绘图线上上下移动。但不幸的是，这种运动会导致闪烁。

这是我绘制图像的代码部分 - 我猜我无法提供 SSCCE，因为有超过 15 个类和 5k 的书面代码：

```
// After a button clicked on panel
SomeButton.addActionListener(new ActionListener() {
    public void actionPerformed(ActionEvent event) {

        // The chart and XYPlot is already drawn at this point 

        // Reading the image
        try {
            myPicture = ImageIO
                    .read(new File("\\\\Users2\\blabla\\Data\\MyPictures\\x.png"));
        } catch (IOException e) {
            e.printStackTrace();
        }

        // Setting up a timer
        timer2 = new java.util.Timer();

        Object source = event.getSource();
        if (source == SomeButton) {

        // Setting up a task
            task2 = new java.util.TimerTask() {
                @Override
                public void run() {
                    double x1;
                    double y1;
                    try {
                        // Getting different x and y values from a microcontroller instantaneously
                        if (microContConnected()) {

                            x1 = microCont.getX();
                            y1 = microCont.getY();

                            // creating the annotation
                            XYImageAnnotation ImageAnn = new XYImageAnnotation(x1, y1, myPicture);

                            // Here is the drawing and clearing made !
                            plot.addAnnotation(ImageAnn);       
                            pause(50);
                            plot.clearAnnotations();    
                        }

                    } catch (SerialPortException e) {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                    }
                }
            };
            timer2.scheduleAtFixedRate(task2, 50, 50);
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T17:07:03.860

看来我自己找到了解决方案；我没有将图像添加到绘图中，而是使用渲染器，并且在使用新坐标添加和删除图片之间没有暂停功能。添加和删除的顺序也颠倒了。我必须说，以这种方式工作让我感到惊讶。没有闪烁；它与剪切的图形或双缓冲一样平滑。:) 这是新代码：

```
 // renderer
    final XYLineAndShapeRenderer renderer = (XYLineAndShapeRenderer) plot.getRenderer();

    // Reading the image
    try {
        myPicture = ImageIO.read(new File("\\\\Users2\\blabla\\Data\\MyPictures\\x.png"));
    } catch (IOException e) {
        e.printStackTrace();
    }

    // Setting up a timer
    timer2 = new java.util.Timer();

    Object source = event.getSource();
    if (source == someButton) {

                task2 = new java.util.TimerTask() {
                    @Override
                    public void run() {
                        if (check == true) {
                            if (microContConnected()) {

                                 x1 = microCont.getX();
                                 y1 = microCont.getY();

                                renderer.removeAnnotations();

                                XYImageAnnotation img2 = new XYImageAnnotation(
                                        x1, y1, myPicture);
                                renderer.addAnnotation(img2,
                                        Layer.FOREGROUND);
                            }
                        }
                    }
                };
                timer2.scheduleAtFixedRate(task2, 50, 50);
            } 
```

# java - 如何在 XML 中添加元素和值？

> ID：13844490
> 
> 赞同：0
> 
> 时间：2012-12-12T16:44:27.327
> 
> 标签：java, xml

我有这个 XML 文件：（
实际上，现在它是一个 StringBuffer，我不想将它保存到文件中，我想直接从内存中使用它）

```
StringBuffer book =  
<book>
 <title>test</title>
 <bookinfo>
  <page>100</page>
 </bookinfo>
</book> 
```

在这里，我想添加一个元素和一个像这样的值：

```
<book>
 <title>test</title>
 <bookinfo>
  <page>100</page>
  <price>100</price>
 </bookinfo>
</book> 
```

在 XML 中添加元素和值的最快和最简单的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:50:21.643

您绝对想熟悉 javax.xml。

这里有一些很好的教程：

*   [http://tutorials.jenkov.com/java-xml/dom.html](http://tutorials.jenkov.com/java-xml/dom.html)

*   [http://www.vogella.com/articles/JavaXML/article.html](http://www.vogella.com/articles/JavaXML/article.html)

*   [http://docs.oracle.com/javase/tutorial/jaxp/stax/example.html](http://docs.oracle.com/javase/tutorial/jaxp/stax/example.html)

# c# - 选择/保存数据到与开始时不同的页面后的页面导航

> ID：13844499
> 
> 赞同：0
> 
> 时间：2012-12-12T16:44:55.950
> 
> 标签：c#, asp.net-mvc

我目前有一个页面，当点击时都显示两个按钮转到不同的页面，我希望当用户完成他们正在做的事情并保存我希望他们路由回他们开始的页面（显示两个按钮的页面）。

带有按钮的页面的路径是：.../School/CreatePartySchool...

使用两个按钮显示的页面上的字段集：

```
<fieldset>
<legend>Schools</legend>
<div id="address">
    <%Html.RenderPartial("SchoolAddress"); %>
</div>
<div id="buttonSaveCancelAlign" style="margin-bottom: 4px">
    <a class="glossyBtn" href='<%:Url.Action("Create", "School")%>'>
                <img style="vertical-align: middle" alt="" src="<%:Url.Content("~/Content/blueprint/plugins/buttons/icons/add.png")%>" />
                <span style="vertical-align: middle">Add School</span> </a>

    <input class="glossyBtn" type="submit" name="button" style="vertical-align: middle; padding-right: 13px;" value="Select School"/> 
```

单击选择学校后....选择并保存学校

返回的页面是：.../Party/Edit（此页面比/Schools/CreatePartySchool 高一级。我希望它返回到/Schools/CreatePartySchool）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:34:31.533

你的问题没有定义问题..你到底想做什么。据我所知，导航可以从后面的代码中处理，在按钮的 onclick 事件中。

# c# - 如何本地化 Html 电子邮件模板

> ID：13844503
> 
> 赞同：2
> 
> 时间：2012-12-12T16:45:01.160
> 
> 标签：c#, email, localization

我正在 mvc3 应用程序中构建本地化功能，并且我已经本地化了大部分应用程序，但是会有电子邮件模板，即 html，我需要与其他应用程序功能一起本地化。

# ruby-on-rails - 使用 Rails 设置 Shopify Webhook

> ID：13844506
> 
> 赞同：3
> 
> 时间：2012-12-12T16:45:08.930
> 
> 标签：ruby-on-rails, shopify, webhooks

我正在尝试在 Rails 中使用 order/create 设置一个基本的 shopify webhook 应用程序。

我已按照 webhook 支持 api 中的说明进行操作，并部署了那里提供的 Sync_App_Demo 示例，但无法在授权步骤中授权登录。它会打开“我们很抱歉出了点问题”页面 - myapp/login/authenticate

我是 webhook 的新手，并且已经浏览过 SO 和谷歌搜索，但没有为 webhook 连接制定基本设置感到高兴。我根据创建的 shopify_app gem 设置将 shopify 应用程序 api 密钥和秘密放置在其中，但不确定这是否正确。

此外，一旦我通过一个 webhook 控制器连接到 abouts 指向的位置（例如，我的测试商店的订单通知面板中的什么 url /order.xml），webhook 订单/创建？

任何帮助将非常感激。

这是 shopify 同步应用演示的链接：

[https://github.com/Shopify/sync_app_demo](https://github.com/Shopify/sync_app_demo)

[http://wiki.shopify.com/WebHook#Rails](http://wiki.shopify.com/WebHook#Rails)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2016-03-25T21:46:09.070

在自己搜索如何执行此操作时偶然发现了您的问题。鉴于您在此处发布此内容已经有好几年了，希望您已经找到了答案。如果你还没有，这就是我们所做的：

在这两种情况下，您都必须知道您的 Shopify API 密钥、密码和商店名称。

1) 使用 Shopify 的`shopify_api`gem：

```
new_webhook = ShopifyAPI::Webhook.new({
   topic: "orders/create",
   address: "http://www.example.com/webhook", # substitute url with your endpoint
   format: "json"
})

new_webhook.save 
```

2）使用终端：

```
curl -X POST -H 'Content-Type: application/json' 'https://shopify_api_key:shopify_api_password@store_name.myshopify.com/admin/webhooks.json' -d '{"webhooks": {"topic": "orders\/create", "address": "http:\/\/www.example.com\/webhook", "format": "json"}}' 
```

因此，您需要添加自己的`shopify_api_key`、`shopify_api_password`、`store_name`和地址端点，以便接收已发布的事件。

其他有用的东西：

[Ultrahook](http://www.ultrahook.com/) - 用于在本地运行的服务器上接收 webhook（例如，使用时`rails s`）

[RequestBin](http://requestb.in/) - 用于查看 webhook 响应的原始正文和标头

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-24T07:37:59.920

对于刚开始使用 Ruby on Rails 开发 Shopify 应用程序的新人，我强烈建议使用包含[shopify_api](https://github.com/Shopify/shopify_app) gem 的[shopify_app](https://github.com/Shopify/shopify_api) gem。

要注册 webhook，您可以运行生成器或在初始化程序`add_webhook`中手动添加一行：`shopify_app.rb`

```
config.webhooks = [
  {topic: 'app/uninstalled', address: 'https://myapp.url/webhooks/app_uninstalled', format: 'json'},
  {topic: 'orders/create', address: 'https://myapp.url/webhooks/orders_create', format: 'json'},
] 
```

通过此设置，您的应用程序将在应用程序安装时注册 webhook。

# yii - 仅在模块中加载 Yii Bootstrap

> ID：13844509
> 
> 赞同：5
> 
> 时间：2012-12-12T16:45:22.203
> 
> 标签：yii, yii-extensions

我尝试仅在管理模块中加载 Yii Bootstrap 扩展，但它不起作用。我假设我需要预加载它或以某种方式启动它......谢谢！

```
 class AdminModule extends CWebModule
    {
        public function init()
        {
            // import the module-level models and components
            $this->setImport(array(
                'admin.models.*',
                'admin.components.*',
                'ext.bootstrap.components.Bootstrap',
            ));
        }

        public function beforeControllerAction($controller, $action)
        {
            if(parent::beforeControllerAction($controller, $action))
            {
                         $this->layout = 'admin';                
                         return true;
            }
            else
                return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-12T17:52:24.860

有 4 种不同的方法可以做到这一点：

1.  将配置添加到应用程序的配置 ( *protected/config/main.php* )：

    ```
    'modules'=>array(
        'admin'=>array(
            'preload'=>array('bootstrap'),
            'components'=>array(
                'bootstrap'=>array(
                    'class'=>'ext.bootstrap.components.Bootstrap'
            )
        ),
    // ... other modules ...
    ) 
    ```

2.  将其预加载到`init`：

    ```
    public function init()
    {
        // import the module-level models and components
        $this->setImport(array(
            'admin.models.*',
            'admin.components.*',
            // 'ext.bootstrap.components.Bootstrap', // this will go to app config for components
        ));
        Yii::app()->getComponent('bootstrap');// this does the loading
    } 
    ```

3.  `init`以另一种方式预加载：

    ```
    public function init()
    {
        // import the module-level models and components
        $this->setImport(array(
            'admin.models.*',
            'admin.components.*',
        ));

        $this->configure(array(
                'components'=>array(
                    'bootstrap'=>array(
                        'class'=>'ext.bootstrap.components.Bootstrap'
                    )
                )
        ));
        $this->getComponent('bootstrap');
    } 
    ```

4.  `init`以另一种方式预加载：

    ```
    public function init()
    {
        // import the module-level models and components
        $this->setImport(array(
            'admin.models.*',
            'admin.components.*',
        ));

        $this->configure(array(
                'preload'=>array('bootstrap'),
                'components'=>array(
                    'bootstrap'=>array(
                        'class'=>'ext.bootstrap.components.Bootstrap'
                    )
                )
        ));
        $this->preloadComponents();
    } 
    ```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-11-19T09:05:12.300

当您在主配置（protected/config/main.php）中配置以下内容时，例如：

```
'admin' => array(
      'preload'=>array('bootstrap'),
       'components'=>array(
          'bootstrap' => array(
               'class' => 'bootstrap.components.Bootstrap',
               'responsiveCss' => true,
           ),
       ),
 ) 
```

然后，您可以将组件用作

```
$bootstrap = $this->getModule()->bootstrap; // with $this is a current controller. 
```

要将此模块组件定义**为主组件**，您必须在 Module 类的 init() 中设置 Component：

```
// Set main component `bootstrap`  instead of CController->getModule()->bootstrap
app()->setComponent('bootstrap', $this->bootstrap); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-26T21:57:25.750

真正有效的代码：在您的模块初始化函数中只需粘贴以下代码：

```
Yii::setPathOfAlias('bootstrap', Yii::getPathOfAlias('ext.bootstrap'));
Yii::app()->setComponent('bootstrap', array('class'=>'bootstrap.components.Bootstrap')); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-06T11:25:03.330

```
protected/config/main.php

'modules'=>array(
    'admin'=>array(
        'preload'=>array('bootstrap'),
        'components'=>array(
            'bootstrap'=>array(
                'class'=>'ext.bootstrap.components.Bootstrap'
        )
    ),

) 
```

在 init 中预加载它：

```
public function init()
{
    // import the module-level models and components
    $this->setImport(array(
        'admin.models.*',
        'admin.components.*',
        // 'ext.bootstrap.components.Bootstrap', // this will go to app config for components
    ));
    Yii::app()->getComponent('bootstrap');// this does the loading
} 
```

如果它不起作用，则将您的 url 粘贴到该文件中，您正在使用引导程序的形式

```
<link rel="stylesheet" type="text/css" href="/pojects/fcorginal/assets/b2e88ad5/bootstrap/css/bootstrap.min.css" /> 
```

# sql - 永久设置 datefirst

> ID：13844510
> 
> 赞同：4
> 
> 时间：2012-12-12T16:45:29.083
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我想永久更改 DATEFIRST 的值（*用于**DATEPART 之***类的函数）

如果我这样做：`SET DATEFIRST 1`该值在执行期间保持不变，**但**在执行后返回默认值 - 此处为 7

我已经遇到了问题，我知道它与登录的国家/地区有关，但我忘记了我必须更改哪个表和哪个属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:34:59.083

我必须说这需要我进行一些研究。看看下面的查询。您会注意到 datefirst 字段。我想在这个级别更改语言设置会产生各种权限影响。

```
SELECT
    *
FROM
    sys.syslanguages 
```

我目前没有可以对其进行测试的服务器，但我想通过 set 语句，您可以将 datefirst 列设置为您想要的任何内容。

TEST TEST TEST 因为这将对您试图解决的问题产生巨大的影响。

[有趣的资源#1](http://msdn.microsoft.com/en-us/library/ms190303%28v=sql.100%29.aspx)

[有趣的资源#2](http://social.msdn.microsoft.com/forums/en-US/transactsql/thread/62ba79c6-172e-4360-86e2-79bfb356a0f2/)

[有趣的资源#3](http://social.msdn.microsoft.com/forums/en-US/sqlsecurity/thread/b533994a-f343-46bb-a29e-0c3663138397/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-10T05:35:57.403

您可以使用 Microsoft SQL Server Management Studio 或执行以下示例 t-sql 脚本来更改在 SQL Server 上通过身份验证的 sql 登录或 windows 用户的默认语言：

```
USE [master]
GO
ALTER LOGIN [login] WITH DEFAULT_LANGUAGE = [you_language]
GO 
```

[脚本取自此站点](http://www.kodyaz.com/articles/sql-set-datefirst-scope-permanent-for-sql-server-database.aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-20T13:15:06.697

派对可能有点晚了，但这是一种“破解”它的方法，无论 datefirst 值如何，设置为服务器、数据库、登录或会话，并且在第一天之前可参数化（哇，以前从未使用过这个词）你实际希望它是：

```
declare 
/*
 Let's say for a regular, boring day of Monday
, regarldess of the datefirst value, I want it to return Monday as 1 (first day of week)
*/
@ForDate datetime = '20170320',
-- you can play with any value here
@SetDateFirstValue int = 5

--this is only for testing
set datefirst @SetDateFirstValue;

select 
  datepart(dw,@ForDate) as ActualReturnedDayOfWeek
, datepart(dw,dateadd(dd, @@DATEFIRST - 1,@ForDate)) As IWantItThisWay 
```

P.S. : Perhaps the only situations you'll ever need this, is in a function or constraint (computed columns maybe) where `SET` operations are not allowed. If `SET` is allowed, SET it as you need it and forget about it.

# r - 将函数应用于矩阵列表

> ID：13844512
> 
> 赞同：0
> 
> 时间：2012-12-12T16:45:42.090
> 
> 标签：r, list, matrix, lapply

```
res_log <- lapply(res, log2) 
```

`res`是 a`list`并且每个元素都是 a `MATRIX`。我得到了错误。

```
Error in match.fun(FUN) : '1' is not a function, character or symbol 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:55:41.573

如果要计算列表中所有矩阵值的以 2 为底的对数`res`，可以使用以下命令：

```
lapply(res, log2) 
```

该命令`apply(res, 1, log2)`将不起作用，因为列表没有行。这只能与单个矩阵对象（或数组）一起使用。

一个例子：

```
res <- rep(list(matrix(1:9, 3)), 2)

# [[1]]
#      [,1] [,2] [,3]
# [1,]    1    4    7
# [2,]    2    5    8
# [3,]    3    6    9
# 
# [[2]]
#       [,1] [,2] [,3]
# [1,]    1    4    7
# [2,]    2    5    8
# [3,]    3    6    9

lapply(res, log2)

# [[1]]
#          [,1]     [,2]     [,3]
# [1,] 0.000000 2.000000 2.807355
# [2,] 1.000000 2.321928 3.000000
# [3,] 1.584963 2.584963 3.169925
# 
# [[2]]
#          [,1]     [,2]     [,3]
# [1,] 0.000000 2.000000 2.807355
# [2,] 1.000000 2.321928 3.000000
# [3,] 1.584963 2.584963 3.169925 
```

# java - 如何通过套接字发送非常大的对象

> ID：13844516
> 
> 赞同：1
> 
> 时间：2012-12-12T16:45:43.230
> 
> 标签：java, sockets, large-data

我的系统涉及通过 TCP 套接字发送大量数据和元数据。我正在发送一个包含各种元数据以及 20 个字节数组的单个对象。到目前为止，我一直在使用包含 BufferedOutputStream 的 ObjectOutputStream 处理小示例（130kB 数组）。我尝试达到 67MB 数组的目标，但 ObjectOutputStream 无法处理那么多数据。我能够发送 1MB 的数组，但 writeObject() 在 2MB 处挂断。

我听说 DataOutputStream 更快，但我宁愿不必将我的元数据编码为字节并在另一端解码。有没有一个很好的选择可以快速发送非常大的对象？

**编辑：**

在每个写入方法之后，我已经在使用 reset() 了。我目前正在发送一个包含我自己的 Message 对象的 SignedObject，该对象包含 20 个数组以及许多元数据字段。我宁愿把这一切都打包，因为它很方便，但我知道分离可能是唯一的方法。话虽如此，我仍然需要确保所有传输都是安全的。

**更新：**

所以我去吃午饭，回来后决定试着弄清楚事情是挂在发送端还是接收端。然后它就再也没有挂断。我可以继续成功发送多达 4MB 的数组，直到我用完堆（这是不相关的，只是意味着我需要一台更好的计算机或更有效的处理）。所以我想问题消失了？但这并不意味着我不需要更好的传播方式，所以如果人们有想法，我会采取更多的想法。另外，我假设一旦我更新它，它将再次停止工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:05:16.790

> 有没有一个很好的选择可以快速发送非常大的对象？

在发送的对象之间使用带有 reset() 的 ObjectOutputStream。除非您只有几 MB 内存（在这种情况下您应该获得更多），否则您不会有问题。

与自己编码字节相比，ObjectOutputStream 相当慢，但它可以很好地处理编码。您的网络上传速度更有可能是您的限制因素。在这个例子中，它发送大约 600 Mb/s，而大多数宽带连接大约是 500 kb/s（大约慢 1000 倍）

```
ServerSocket ss = new ServerSocket(0);
Socket s = new Socket("localhost", ss.getLocalPort());
final Socket s2 = ss.accept();
ss.close();

new Thread(new Runnable() {
    @Override
    public void run() {
        int count = 0;
        long start = System.nanoTime();
        try {
            ObjectInputStream in = new ObjectInputStream(
                    new InflaterInputStream(s2.getInputStream()));
            while (in.readObject() != null) count++;
            s2.close();
        } catch (Exception e) {
            e.printStackTrace();
        }
        long time = System.nanoTime() - start;
        System.out.printf("Read %,d objects in %.3f seconds%n", count, time / 1e9);
    }
}, "reader").start();
ObjectOutputStream oos = new ObjectOutputStream(
        new DeflaterOutputStream(s.getOutputStream()));
for (int i = 0; i < 20; i++) {
    byte[] bytes = new byte[67 * 1000 * 1000];
    oos.writeObject(bytes);
    oos.reset();
}
oos.writeObject(null); // poison pill
oos.close();
s.close(); 
```

印刷

```
Read 20 objects in 21.644 seconds 
```

# mysql - 拆分日期并在mysql的单独列中插入单个字段

> ID：13844520
> 
> 赞同：1
> 
> 时间：2012-12-12T16:45:57.697
> 
> 标签：mysql

我直接通过 phpmyadmin 创建了一个日期表，我想将日期（yyyy:mm:dd）拆分为单独的日、月和年并插入单独的字段。任何人都可以帮助我直接在 phpmyadmin 中使用的查询来执行上述工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:50:53.860

尝试：

```
UPDATE `table` SET `year` = YEAR(`date`), `month` = DATE_FORMAT(`date`, '%m'), `day` = DATE_FORMAT(`date`, '%d') 
```

我使用`DATE_FORMAT()`而不是`MONTH()`和`DAY()`作为后两个删除前导零。

# javascript - 如何使用 JavaScript 删除 html 输入元素？

> ID：13844521
> 
> 赞同：2
> 
> 时间：2012-12-12T16:45:58.183
> 
> 标签：javascript, html

我想从表中删除输入元素。我想不出任何方法可以通过 JavaScript 删除它们。

```
<table><tbody><tr>
<td><input id="c11" value=" " size="1" style="border-width: 0px;" type="text"></input></td>
<td><input id="c12" value=" " size="1" style="border-width: 0px;" type="text"></input></td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:48:00.900

You can do that :

```
var inputs = document.getElementsByTagName('input');
while (inputs.length) inputs[0].parentNode.removeChild(inputs[0]); 
```

If you have your table element, you could also use `myTable.getElementsByTagName('input');`.

[Demonstration](http://jsfiddle.net/8peNA/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:52:05.513

```
document.getElementById('c11').outerHTML =  ""; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:52:41.380

如果您使用[Jquery](http://jquery.com/)

[使用 .remove()](http://api.jquery.com/remove/)

```
$("#yourtableid tr").remove(); 
```

如果您想保留数据以供将来使用，即使在删除后也可以使用 .detach()

```
$("#yourtableid tr").detach(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-02T10:58:12.880

试试这个代码

```
 function removeRow(r)
    {
         var fo = "foo";
         var ido = r.id.substring(3,r.id.length-1);
         for(i=1;i<=3;i++)
         {
            document.getElementById(fo+id0+i).remove();
         }
         document.getElementById(fo+ido+5).nextSibling.remove();  
         document.getElementById(fo+ido+5).remove();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-05-02T10:50:50.847

这是工作！

```
document.getElementById('c11').val("");
document.getElementById('c12').val(""); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-12T16:55:56.007

就个人而言，如果您无权访问 jQuery，我只会给父元素一个 id，然后执行此操作

```
var els = document.findElementById('tableId').childNodes.getElementByTagName('input');
for( var i = 0; i < els.length; i++){
    els[i].removeNode(true);
} 
```

或者，您可以用类似这样的代码替换代码以获得完整的浏览器兼容性，因为@dystroy 指出 removeNode 仅在 IE 中可用。

```
var els = document.getElementById('tableId').getElementsByTagName('input');
while( els.length ){
    els[0].parentNode.removeChild(els[0]);
}​ 
```

像这样的东西应该工作。老实说，我会使用 jQuery。容易得多。

# html - jquery mobile：将填充设置为主页Div元素，以便填充+宽度=设备宽度

> ID：13844530
> 
> 赞同：0
> 
> 时间：2012-12-12T16:46:28.463
> 
> 标签：html, css, jquery-mobile

我想为文档的主页 DIV 元素设置一个填充，以便填充 + 宽度（页面 Div 元素）= Device-Width

我想设置 10px 的填充并希望页面元素占据设备宽度的其余部分。

问题是即使设置了填充，页面元素的宽度（ 100% ）与设备宽度相同。

我有以下东西 -

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <link rel="stylesheet" href="jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <style>
            #page1
            {
                padding:10px;
            }
        </style>
        <script src="jquery/1.7.2/jquery.min.js"></script>
        <script src="jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>
    </head>
    <body>
        <div data-role="page" id="page1">
        </div>
    </body>
</html> 
```

现在，如果说设备宽度为 480 像素，那么“page1”的宽度为 480 像素——我希望它的宽度为 460 像素（即不包括 20 像素的填充），如果设备宽度为 n，那么我想要页面 div 的宽度为“n - 20”

“page1”采用相同宽度的原因是 jquery-mobile css 将宽度指定为 100%（在 ui-page css 类中）

我试图通过这样做来覆盖它

```
\#page1
{
   width:auto;
} 
```

但这样做会导致页面占用不正确的宽度 - 基于子宽度的宽度；

我不能在 css 中以百分比指定宽度，因为我之前没有设备宽度，并且我没有百分比填充 - 否则如果填充为 5%，那么我可以将宽度指定为 90%，因为它是 10px 硬编码的，我不能为页面元素指定百分比。

通常，具有 width = auto 的 div （这是一个块元素）会导致 div 占用等于其父宽度的空间，不包括其填充/边距/边框 - 但 wrt “页面”（内部是一个 DIV 元素）不会似乎是这样-

关于如何使它工作的任何想法？

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:00:37.383

一种建议是使用 Modernizr 来检测最大设备宽度或最大宽度：

```
if (Modernizr.mq("screen and (max-width: 480px)")) {
  // set width of page class = 480-n
}
.. settings for other common screen widths .. 
```

此解决方案的主要问题是它不是任意的，因此您需要为要支持的每个设备编写一个案例。测试`window.screen.width`可能更适合您的目的。

# clojure - Clojure模板引擎生成Java源码

> ID：13844532
> 
> 赞同：2
> 
> 时间：2012-12-12T16:46:35.333
> 
> 标签：clojure, code-generation, template-engine

我正在编写一个需要生成 Java 源代码的 Clojure 程序。是否有一个很好的惯用方式/模板引擎。

在 Java 世界中，我可能会使用 Velocity 或 Freemarker。我知道我仍然可以从 Clojure 使用它们，但想知道是否有更好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:04:39.097

可能你可以看看[Rythm 模板引擎](http://rythmengine.com/)，它比 Freemarker 和 Velocity 快得多，也更容易使用。

文档可以在[http://www.playframework.org/modules/rythm-1.0.0-20121210/home找到](http://www.playframework.org/modules/rythm-1.0.0-20121210/home)

注意虽然该文档是针对play-rythm模块的，但大部分内容也适用于纯节奏环境

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T15:14:18.743

我已经将 Clojure 与[StringTemplate 一起](http://www.stringtemplate.org/)用于您描述的目的已有一段时间了，效果很好。我还定义了一组有用的宏，使从 Clojure 调用 StringTemplate 渲染器变得轻而易举。**StringTemplate**已建立、稳固并用于重量级编译器，因此它不会让您失望。关于简单性/速度或其他权衡，我无法评论。

# javascript - 使用 GAE 插入公共日历后执行刷新谷歌日历 UI

> ID：13844534
> 
> 赞同：1
> 
> 时间：2012-12-12T16:46:39.963
> 
> 标签：javascript, google-app-engine, google-calendar-api, google-gadget

使用 .插入公共日历后执行刷新谷歌日历 UI `GAE`。

`GWT`我用and创建了一个小工具`GAE`，使用 URL 将它添加到 Google 日历中，这个应用程序，只需为当前连接的用户添加一个公共日历列表。

一切都很好，除了我没有检测到存在更改，并且有必要使用浏览器的刷新选项按钮重新加载整个页面以查看新日历。

任何人都知道一种通知谷歌日历的方法，当前用户有新日历，它必须进行刷新。或者使用 JavaScript 从小工具内部的 iframe 调用刷新方法的方法？

感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:32:48.137

没有内置的 API 可以做到这一点。但是，如果您绝对*必须*提供此功能，并且不能依赖日历刷新本身，您可以通过在您的小工具中调用以下命令来强制重新加载整个日历页面：

```
window.top.location.href = "https://www.google.com/calendar/render"; 
```

这是一种非常糟糕的用户体验，因此请仔细权衡其他选项。

# java - 括号内的“和”和“否”条件

> ID：13844538
> 
> 赞同：0
> 
> 时间：2012-12-12T16:46:59.960
> 
> 标签：java, conditional-statements, boolean-logic

为什么

```
while(!s1.isEmpty() && !s2.isEmpty()) 
```

和

```
while(!(s1.isEmpty() && s2.isEmpty())) 
```

不一样吗？

因为当我这样做时 !(x&y) eclipse 给了我一个错误。
[http://pastebin.com/8zBK1jQv](http://pastebin.com/8zBK1jQv)

错误信息：

```
Exception in thread "main" java.lang.NullPointerException 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-12T16:48:22.720

This is one of [De Morgan's Law's](http://en.wikipedia.org/wiki/De_Morgan%27s_laws), fundamental to Boolean algebra:

```
(NOT A) AND (NOT B) == NOT (A OR B) 
```

and its converse:

```
(NOT A) OR (NOT B) == NOT (A AND B) 
```

i.e, to fix your second version, you must replace the `&&` with `||`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:51:16.090

编译真值表，自己看看：

```
while(!s1.isEmpty() && !s2.isEmpty()):

false, false -> true
false, true  -> false
true,  false -> false
true,  true  -> false

while(!(s1.isEmpty() && s2.isEmpty())):

false, false -> true
false, true  -> true
true,  false -> true
true,  true  -> false 
```

从上面可以看出，这两个条件的含义非常不同。

此外，由于`&&`短路，它们在是否`s2.isEmpty()`评估方面有所不同。第一个语句评估它 iff `s1.isEmpty() == false`，而第二个语句评估它 iff `s1.isEmpty() == true`)。如果`s2`碰巧是`null`，这可以决定你是否得到 a `NullPointerException`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-12T17:05:07.150

检查此表（假设 1=true，0=false）

```
A|B| !A | !B | !A and !B | A and B |  not(A and B)
-+-+----+----+-----------+---------+---------------
0|0|  1 |  1 |    [1]    |    0    |      [1]
0|1|  1 |  0 |    [0]    |    0    |      [1]   <- (!A and !B)  !=  not(A and B)
1|0|  0 |  1 |    [0]    |    0    |      [1]   <- (!A and !B)  !=  not(A and B)
1|1|  0 |  0 |    [0]    |    1    |      [0] 
```

如您所见，`A=1, B=0`您`A=0, B=1`将在`!A and !B`和中得到不同的结果`not(A and B)`。

让我们现在检查`not(A or B)`

```
A|B| !A | !B |[!A and !B]|  A or B |  not(A or B)
-+-+----+----+-----------+---------+---------------
0|0|  1 |  1 |    [1]    |    0    |      [1]
0|1|  1 |  0 |    [0]    |    1    |      [0]   
1|0|  0 |  1 |    [0]    |    1    |      [0]   
1|1|  0 |  0 |    [0]    |    1    |      [0] 
```

现在您可以看到为什么`!A **AND** !B`可以替换为`not(A **OR** B)`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T16:53:13.513

`while(!s1.isEmpty() && !s2.isEmpty())`
并且
`while(!(s1.isEmpty() || s2.isEmpty()))`
是平等的。

//注意“||”

非常重要
，尽管摩根规则表明这两个陈述在逻辑上是相同的。大多数语言只评估他们拥有的东西。因此，如果条件的任何部分有副作用或只能在其他部分有效性的情况下访问，您应该考虑部分的顺序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T17:06:25.960

```
NOT
1 -> 0    
0 -> 1 
```

让我们说`s1.isEmpty()`是`True`和`s2.isEmpty()`是`False`

对于**案例 1：**

`while(!s1.isEmpty() && !s2.isEmpty())`.

然后它会像对待一样`(False AND True)`，最终返回`False`。因为 和的`AND`运算是。`True``False``True`

对于**案例 2：**

`while(!(s1.isEmpty() && s2.isEmpty()))`.

然后它会像对待一样`(!(True AND False))`，返回`(!(False))`和`Not`操作`False`会是哪个`True`。

# arrays - Exception in thread "main" java.lang.NumberFormatException: For input string

> ID：13844539
> 
> 赞同：0
> 
> 时间：2012-12-12T16:47:02.520
> 
> 标签：arrays

Alright, so basically, I am trying to write a simple program. The purpose is that it reads a file (the file is a set of numbers that would fill a 401 by 401 table) and then writes the data into an array and prints the array to the console. This is going ot be used later to find specific numbers, so like I will write code to find the highest and lowest numbers in the array etc. I don't know how yet, but I haven't got the program working yet. Every time I run this program, the exact error I get is as follows.

Exception in thread "main" java.lang.NumberFormatException: For input string: "363.0 360.0 354.0 349.0 343.0 339.0 333.0 319.0 324.0 325.0 324.0 317.0 317.0 322.0 322.0 320.0 315.0 314.0 313.0 311.0 309.0 308.0 315.0 320.0 326.0 332.0 336.0 341.0 346.0 350.0 353.0 353.0 352.0 351.0 352.0 353.0 351.0 350.0 346.0 339.0 338.0 349.0 354.0 357.0 360.0 366.0 371.0 377.0 383.0 387.0 393.0 398.0 402.0 409.0 414.0 419.0 425.0 432.0 439.0 442.0 444.0 446.0 448.0 450.0 453.0 457.0 460.0 460.0 462.0 464.0 465.0 466.0 467.0 467.0 469.0 470.0 471.0 470.0 470.0 470.0 470.0 477.0 479.0 480.0 486.0 490.0 492.0 495.0 497.0 496.0 499.0 499.0 500.0 500.0 499.0 499.0 499.0 500.0 500.0 497.0 494.0 491.0 488.0 487.0 485.0 490.0 490.0 488.0 484.0 482.0 481.0 478.0 474.0 471.0 466.0 461.0 454.0 449.0 443.0 436.0 432.0 422.0 410.0 397.0 389.0 381.0 375.0 365.0 340.0 318.0 289.0 283.0 276.0 266.0 255.0 241.0 235.0 233.0 234.0 235.0 235.0 239.0 257.0 281.0 302.0 321.0 330.0 337.0 354.0 373.0 383.0 389.0 401.0 410.0 413.0 403.0 389.0 381.0 373.0 363.0 351.0 343.0 335.0 328.0 322.0 314.0 306.0 298.0 293.0 285.0 275.0 270.0 276.0 283.0 286.0 286.0 285.0 283.0 283.0 283.0 279.0 274.0 270.0 264.0 255.0 245.0 239.0 238.0 238.0 239.0 240.0 249.0 256.0 262.0 268.0 272.0 275.0 276.0 275.0 273.0 271.0 269.0 269.0 271.0 274.0 276.0 279.0 283.0 289.0 293.0 294.0 295.0 295.0 297.0 307.0 312.0 314.0 314.0 314.0 313.0 312.0 310.0 307.0 305.0 304.0 303.0 304.0 299.0 291.0 308.0 325.0 335.0 344.0 351.0 358.0 361.0 366.0 370.0 379.0 382.0 386.0 389.0 391.0 391.0 390.0 390.0 393.0 395.0 397.0 402.0 408.0 412.0 413.0 414.0 415.0 415.0 416.0 416.0 416.0 415.0 415.0 414.0 413.0 411.0 410.0 408.0 407.0 407.0 406.0 404.0 402.0 400.0 394.0 375.0 379.0 390.0 394.0 397.0 397.0 397.0 397.0 402.0 405.0 407.0 407.0 412.0 417.0 423.0 428.0 441.0 448.0 451.0 453.0 457.0 458.0 459.0 460.0 460.0 460.0 458.0 456.0 455.0 454.0 455.0 455.0 455.0 454.0 452.0 452.0 451.0 450.0 450.0 450.0 450.0 447.0 442.0 440.0 437.0 436.0 436.0 437.0 437.0 437.0 436.0 434.0 429.0 427.0 425.0 422.0 412.0 410.0 415.0 415.0 414.0 413.0 413.0 414.0 411.0 410.0 409.0 408.0 406.0 404.0 402.0 400.0 398.0 395.0 393.0 392.0 389.0 387.0 385.0 384.0 380.0 377.0 376.0 375.0 374.0 372.0 370.0 369.0 367.0 365.0 362.0 355.0 346.0 340.0 334.0 331.0 331.0 330.0 327.0 323.0 322.0 319.0 316.0 315.0 310.0 297.0 289.0 280.0 274.0 274.0 282.0 301.0 320.0 328.0 344.0 352.0 351.0 350.0 346.0 341.0 338.0 333.0 329.0 323.0 318.0 312.0 308.0 304.0" at sun.misc.FloatingDecimal.readJavaFormatString(Unknown Source) at java.lang.Double.parseDouble(Unknown Source) at MultiArray.main(MultiArray.java:19)

Now, here is the code for my program.

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;  //importing tools

public class MultiArray {
    public static void main(String[] args)throws IOException {

        //variables
        int rows = 401;
        int columns = 401;
        String file = "dmt.asc";

        double dmtData[][] = new double[rows][columns];  //array

        BufferedReader Reader = new BufferedReader(new FileReader(file)); //read the file

        //split the numbers and write to array
        for(int i = 0; i < rows; i++){
            String rowArray [] = Reader.readLine().split("\t");
            for(int j = 0; j < columns; j++){
                dmtData[i][j] = Double.parseDouble(rowArray[j]);
            }
        }

        Reader.close();  //close the reader and the file

        //print out the array
        for(int i = 0; i < rows; i++){
            for(int j = 0; j < columns; j++){
                System.out.println(dmtData[i][j]);
            }
        }

        //code here to find highest number
        System.out.println("The highest peak in this area is: ");

        //code here to find lowest number
        System.out.println("The lowest dip in this area is: ");

    }

} 
```

Thanks for any help, I promise once I understand java I'll do my best to answer questions on here :)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:40:12.863

If your `rowArray[j]` is returning a proper parsable double value, then you should not have any trouble in your code. See your file whether its seperated by **\t** (tab) and not jus **" "**(whitespace). Cos I did the same mistake while trying to execute your code and check getting the same exception as told by you..

# list - 使用 scanLeft 打包符号

> ID：13844541
> 
> 赞同：3
> 
> 时间：2012-12-12T16:47:07.560
> 
> 标签：list, scala, traversal, tail-recursion

[99个scala问题](http://aperiodic.net/phil/scala/s-99/)有这个问题：

> > 将列表元素的连续副本打包到子列表中。如果列表包含重复的元素，则应将它们放置在单独的子列表中。
> > 
> > ```
> > Example: 
> > ```
> 
> ```
> scala> pack(List('a, 'a, 'a, 'a, 'b, 'c, 'c, 'a, 'a, 'd, 'e, 'e, 'e, 'e))
> res0: List[List[Symbol]] = List(List('a, 'a, 'a, 'a), List('b), List('c, 'c), List('a, 'a), List('d), List('e, 'e, 'e, 'e)) 
> ```

我对解决上述给定问题的尾递归方式有所了解。我想知道是否有一种方法可以使用 scanLeft 完成上述操作，其中中间结果是公共元素的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:38:48.607

这是使用的解决方案`foldLeft`：

```
def pack[A](l:List[A]): List[List[A]] = l match {
  case head :: tail =>
    tail.foldLeft(List(List(head))) { (collector:List[List[A]], elem:A) =>
      if (collector.head.head == elem)
        (elem +: collector.head) +: collector.tail
      else
        List(elem) +: collector
    }.reverse
  case _ => List.empty
} 
```

这仅适用于列表。`MultiSets`尽管很难找到 Scala 实现，但可能会使用更好的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-17T13:14:13.700

简洁但未优化的版本可能如下所示：

```
val l = List('a, 'a, 'a, 'a, 'b, 'c, 'c, 'a, 'a, 'd, 'e, 'e, 'e, 'e)
for (i <-l.distinct) yield l.filter(_ == i)

res0: List[List[Symbol]] = List(List('a, 'a, 'a, 'a, 'a, 'a), List('b), List('c, 'c), List('d), List('e, 'e, 'e, 'e)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-14T07:41:36.063

开始`Scala 2.13`,`List`现在随[`unfold`](https://www.scala-lang.org/api/2.13.x/scala/collection/immutable/List$.html#unfold[A,S](init:S)(f:S=%3EOption[(A,S)]):CC[A])构建器一起提供，可以与[`List::span`](https://www.scala-lang.org/api/2.13.x/scala/collection/immutable/List.html#span(p:A=%3EBoolean):(List[A],List[A])):

```
// val list = List('a, 'a, 'a, 'a, 'b, 'c, 'c, 'a, 'a, 'd, 'e, 'e, 'e, 'e)
List.unfold(list) {
  case Nil  => None
  case rest => Some(rest.span(_ == rest.head))
}
// List[List[Symbol]] = List(List('a, 'a, 'a, 'a), List('b), List('c, 'c), List('a, 'a), List('d), List('e, 'e, 'e, 'e)) 
```

或者，与`Scala 2.13`'s [`Option#unless`](https://www.scala-lang.org/api/2.13.x/scala/Option$.html#unless[A](cond:Boolean)(a:=%3EA):Option[A])builder 结合使用：

```
List.unfold(list) {
  rest => Option.unless(rest.isEmpty)(rest.span(_ == rest.head))
} 
```

* * *

细节：

*   Unfold 使用一个内部状态，在我们的例子中用`list`to split初始化`List('a, 'a, 'a, 'a, 'b, 'c, 'c, 'a, 'a, 'd, 'e, 'e, 'e, 'e)`
*   在每次迭代中，我们`span`为了找到包含相同符号的前缀的内部状态：`l.span(_ == l.head)`这是在第一次迭代期间`l.span(_ == 'a)`并给出`(List('a, 'a, 'a, 'a),List('b, 'c, 'c, 'a, 'a, 'd, 'e, 'e, 'e, 'e))`
*   正如`unfold`预期的那样，元组的每个迭代的`Option`第一部分是要添加到正在构建的列表中的新元素（此处`List('a, 'a, 'a, 'a)`），其第二部分是内部状态的新值（此处`List('b, 'c, 'c, 'a, 'a, 'd, 'e, 'e, 'e, 'e)`），该跨度完全符合该要求。
*   我们不断迭代相同的步骤，直到内部列表为空，在这种情况下，我们`unfold`通过返回来告诉 ing 我们已经完成`None`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T17:34:11.267

scanLeft 对于计算前缀总和很有用，但问题中并非如此。您可以尝试将其与其他调用结合使用，但我认为这不是解决问题的好方法。

foldLeft 似乎对这项任务更有用。

```
def pack[T](list: Seq[T]) = list.foldLeft(new ArrayBuffer[ArrayBuffer[T]])((ret, el) => {
    if (ret.isEmpty || ret.last.head != el)
      ret.append(new ArrayBuffer[T])
    ret.last.append(el)
    ret
  }) 
```

有两个简单的任务留给好奇的读者：

*   使用 List 前置使其纯功能化
*   制作正确的返回类型

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T00:03:29.643

不，`scanLeft`在这种情况下不是合适的方法。`scanLeft`将产生一组结果，列表中的每个值都有一个元素，加上您提供的初始值。因此，例如使用`scanLeft`on`List(1,2,3,4)`将始终产生包含 5 个元素的结果

例如

```
scala> List(1,2,3,4).scanLeft(">"){case (last, x) => last + x}
res7: List[String] = List(>, >1, >12, >123, >1234) 
```

# android - 修改 MP3 音高或速度

> ID：13844554
> 
> 赞同：1
> 
> 时间：2012-12-12T16:47:34.683
> 
> 标签：android

我正在寻找一种方法来修改 MP3 文件的速度或音高。显然，我首先尝试使用 android 类（SoundPool、MediaPLayer 等），但我们没有找到任何东西。我已经测试了来自 NDK 的导航音频样本（使用 OpenSSL），但没有进入我的手机。它运行但没有实现任何效果。有任何想法吗？

# sql - ListBox 或 Combobox ADODB 导入的十进制项目在列表中不可见

> ID：13844556
> 
> 赞同：0
> 
> 时间：2012-12-12T16:47:36.340
> 
> 标签：sql, vba, excel, combobox

我已经多次遇到这个问题，并且直到现在都能够解决它。万能的搜索引擎也没有帮助我。

问题是，当我从 ADODB 记录集填充列表框或组合框时，所有十进制数据元素在框中都不可见，例如以下内容（conn 是 ADODB 连接）：

```
Private Sub GetFilteredRecords()
    Dim strSQL As String
    Dim arr As Variant

    'create the SQL
    strSQL = "SELECT * FROM vwStandard_Fee2"

    'execute the SQL and fill the rs ( rsFiltered )
    Set rsFiltered = conn.Execute(strSQL)

    'Apply recordset to the listbox on the form
    If Not (rsFiltered.EOF = True And rsFiltered.BOF = True) Then
        arr = rsFiltered.GetRows()
        With lbDeeper
            .ColumnCount = rsFiltered.Fields.Count
            .List = TransposeArray(arr)
        End With
        With cbDeeper
            .ColumnCount = rsFiltered.Fields.Count
            .List = TransposeArray(arr)
        End With
    End If

End Sub 
```

上面包含 6 列 Ids（都显示 Type = Variant/Decimal），其中包含的值由于某种奇怪的原因都没有“显示”。只有字符串和日期列正常显示，小数在那里但为空！

这里有一些片段：

![arr的总体布局](../Images/b817ddc647fc765a84a3a12bce287709.png)

![显示字符串，不显示小数](../Images/190e7f4685fb7d5dd4f20d6cab53fa17.png)

![看到显示了欧元，而它旁边的小数字段没有！](../Images/2d1d5566071feaafa50dfbb3033ee5e2.png)

现在，如果是组合框，当我选择该列表项时，如果它们的列是 BoundColumn，我可以获得一列的值，但只能在组合框的值中（所以仍然不在列表中）。

我最初的解决方法是在添加到列表框/组合框之前将它们转换为字符串值，但是在这种情况下，我想直接将查询结果链接到 Box.List 而不查看详细信息。因此，我正在寻找解决方案而不是解决方法。

简而言之：由于某种奇怪的原因，我的数字字段项默认不可见。解决方法是使项目字符串值。我现在正在寻找解决此错误/问题的方法：

1.  这是什么原因造成的？
2.  如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T03:51:34.860

那么所有的字符串数据都出现了吗？而且，只有数字不出现？

然后，您可能希望将数字转换为字符串并将其传递给您的列表、组合框。你已经做过我注意到了。

现在，无论出于何种原因，如果您的最大行数和数组/记录器行数的长度不匹配，它也可能导致问题。但是，您似乎使用记录集行数设置组合框行。您可以尝试迭代记录集以填充组合框，而不是使用数组吗？是的，这对性能不友好，在优化之前猜猜我们需要它在没有错误的情况下工作。;-)

您是否已将您的组合框绑定到记录集？你能确认你的数组是否是一维的并且它有数据要输入到盒子里吗？

如果问题仍然存在，您可以尝试使用数据库中保存的查询填充列表框。 *但是，基于 SQL 语句的列表框和组合框比基于保存查询的列表框和组合框要慢。*

那么您可以尝试以下设置`rowsource`属性吗？确保对数字和测试列进行测试。以及旧组合框和新组合框。

```
Rowsource->build query->
sqlview copy to rowsource property box-> 
delete or don't save that above built query since you already have SQL statement. 
```

只是想让您尝试缩小问题范围的可能性。

* * *

**用最可能的问题和解决方案更新答案**

根据我的评论，他们主要假设您在填充列表框/组合框时遇到问题

> 我忘了问一些非常重要的问题，您是否声明了 Option Base 1 以确保在转储二维数组时避免丢失数组的列值之一......？因为您对用于将数据转储到列表框的数组没有任何明确的声明............ :)

确保您的**列表框已启用以显示多列数据。**

**所以你有三个选择，**

*   选项基础 1

*   重新调整您的数组并进行循环以填充它并将其转储到 .list 中。

*   由于 ReDim 数组无论如何都需要您循环遍历，因此您也可以使用 recorset 本身来添加数据。

您似乎对未声明但从记录集转置到列表框/组合框的数组存在维度问题。所以你未声明的数组没有正确填充多列。这可能是您正确声明数组时它起作用的原因......

事实上，在您的评论中，您已经说过，

> 当我在我的代码中创建一个数组并将其填充到我的代码中（逐个条目）时，它将毫无问题地显示 – K_B 14 分钟前

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T10:06:35.877

好的，在经历了各种可能的原因之后，似乎是这样的：

VBA 没有自己的 Decimal Variant Type。VBA 可以从声明为 Variant 的变量中处理 Decimal（因此成为 Variant/Decimal）这通常不会阻止您的程序工作，但在 Listbox 和 Combobox 等控件中，Type Variant/Decimal 是不可解释的，因此不会绘制具体条目。

例如，用这个填充一个名为 lbHigher 的列表框：

```
Private Sub ListBoxProblem()

    Dim tempArray(2, 2) As Variant

    tempArray(0, 0) = "A"
    tempArray(0, 1) = 1
    tempArray(0, 2) = 1.1
    tempArray(1, 0) = "B"
    tempArray(1, 1) = CStr(CDec(5.2))
    tempArray(1, 2) = 2.3
    tempArray(2, 0) = "C"
    tempArray(2, 1) = DateSerial(2012, 12, 13)
    tempArray(2, 2) = 100
    tempArray(3, 0) = "D"
    tempArray(3, 1) = -1
    tempArray(3, 2) = CDec(5.2)

    lbHigher.ColumnCount = 3
    lbHigher.List = tempArray
End Sub 
```

除 CDec(5.2) 外，一切正常。CStr(CDec(5.2)) 工作正常，VBA 将首先将十进制转换为字符串，然后列表框才能获取它。

所以要么：不要让 SQL 生成任何十进制输出或将任何十进制输出转换为 VBA 中的 Single/Double/String/Integer/Long，然后再将其交给 Listbox。

# xsd - xjc 混合内容生成为 List instead of List I am trying to re-generate web service stubs and java objects from WSDL and XSD's using the batch commands available in WAS 7 (wsdl2java.bat, using ant script). In the gener 问问题 问问题 2012-12-12T16:47:40.103 590 次 This question shows research effort; it is useful and clear 2 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. I am trying to re-generate web service stubs and java objects from WSDL and XSD's using the batch commands available in WAS 7 (wsdl2java.bat, using ant script). In the generated file, the field denoting mixed content is displayed as: @XmlMixed protected List content; However, my existing codebase has the following: @XmlMixed protected List <serializable>content; Due to this issue, I am getting compilation errors. I am using JDK 1.6\. The schema has not change in between. It would be great if you could advise me on how to make sure the generated code confirms to Serializable type instead of object. Fb login session with heroku multiple dynos failed My app is using Facebook login, it works perfectly fine with 1 dyno. But when I increase the number of dyno, the app often forget that I have already logged in. I suspect that the dynos doesn't recognize my session from other dynos. xsdjaxbwebspherewsdl2javaxjc 4 1 回答 1 This answer is useful 0 -extension在生成 JAXB 类并检查时使用。如下所示。 xjc -extension schema.xsd 于 2017-05-23T09:02:28.563 回答 Related 2 python - python os.environ, os.putenv, /usr/bin/env 1 php - 页面加载/打开时在php中获取复选框值 1 c# - 允许用户将文档上传到应用程序 0 html - 下拉菜单未在 IE7 中下推内容 1 json - 使用 @JsonTypeInfo 属性出现意外的重复键错误 1 eclipse - gwt : 未找到 URL。椭圆形/ 1 android - 在 android 片段中覆盖哪个方法来填充列表视图 2 vb.net - 制作日历比使用标签更好的方法是什么？ 3 c# - MSTest 拒绝运行 64 位？ 1 twitter-bootstrap - 引导下拉菜单链接问题 Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641

> ID：13844557
> 
> 赞同：2
> 
> 时间：
> 
> 标签：xsd, jaxb, websphere, wsdl2java, xjc

I am trying to re-generate web service stubs and java objects from WSDL and XSD's using the batch commands available in WAS 7 (wsdl2java.bat, using ant script).

In the generated file, the field denoting mixed content is displayed as:

```
@XmlMixed
protected List<Object> content; 
```

However, my existing codebase has the following:

```
@XmlMixed
protected List<Serializable> content; 
```

Due to this issue, I am getting compilation errors. I am using JDK 1.6\. The schema has not change in between. It would be great if you could advise me on how to make sure the generated code confirms to `Serializable` type instead of object.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-05-23T09:02:28.563

`-extension`在生成 JAXB 类并检查时使用。如下所示。

```
xjc -extension schema.xsd 
```</serializable>

# java - 为什么我不能在我的 Android 项目中使用来自 Maven 存储库的库？如何为此编写正确的 pom.xml？

> ID：13844558
> 
> 赞同：0
> 
> 时间：2012-12-12T16:47:46.497
> 
> 标签：java, android, maven, pom.xml

我想在我的 android 项目中使用 Jackson JSON 解析器库。我在 Maven 存储库中看到了这个库，但我不知道如何使用它。我已经从 Maven 存储库和 Jackson jar 下载了源并将源附加到 jar，但是在 logcat 中我看到了错误消息 NoClassDefFoundError。谷歌搜索时，我读到我必须在 pom.xml 文件中声明 Jackson 依赖项。我是 Java 开发的新手，所以我不知道所有这些意味着什么。还有一些问题：

1.Jackson库如何编写pom.xml

2.把这个pom.xml放在哪里

3\. 如果我只想使用这个库，我真的需要安装 Maven。

4\. 我还需要什么才能开始使用图书馆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:29:25.450

不，您不需要编写 pom 文件，除非您使用 Maven 进行构建（在这种情况下，无论杰克逊如何，您都需要它）。

你需要的只是杰克逊罐子——不止一个，因为有些项目只需要一些碎片。这一页：

[http://wiki.fasterxml.com/JacksonDownload](http://wiki.fasterxml.com/JacksonDownload)

应该显示你需要什么，以及从哪里得到它们。如果您是从头开始，我强烈建议您使用 Jackson 2.1（不是 1.9）。然后你很可能需要 3 个 jars（jackson-annotations、jackson-databind、jackson-core）——虽然最小只是`jackson-core`，如果你使用所谓的“流 API”（低级，最高性能，但更多工作） .

使用 Maven 的好处就是您可以定义逻辑依赖（jar 的组和工件 id），Maven 会将其解析为物理 jar，以及对其他 jar 的引用。

# php - 与heroku多个测功机的FB登录会话失败

> ID：13844559
> 
> 赞同：0
> 
> 时间：2012-12-12T16:47:53.237
> 
> 标签：php, facebook, heroku

我的应用程序使用 Facebook 登录，它与 1 dyno 完美配合。但是当我增加测功机的数量时，应用程序经常忘记我已经登录。我怀疑测功机无法从其他测功机中识别出我的会话。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:15:03.717

您需要使用某种共享会话存储，例如 memcached 或 DB 会话存储。默认磁盘存储不会扩展到多个测功机。

# windows-8 - 如何使用 html 和 JS 将查询字符串变量添加到 Windows8 应用程序中的页面

> ID：13844561
> 
> 赞同：1
> 
> 时间：2012-12-12T16:47:55.797
> 
> 标签：windows-8, microsoft-metro, winjs

我正在使用 Html & JS 为 Windows 8 构建导航应用程序。对于我的一些 div，我正在处理`onclick`执行以下代码，`WinJS.Navigation.navigate("/pages/video/video.html")`这是一个仅播放视频的视频页面。在调用该代码之前，我在 default.html 中设置了一个隐藏的输入元素，`<input id="currentVideoId" type="hidden" />`其中包含单击的视频 ID 的值。

这样，在我的视频页面上，我可以获取隐藏输入的当前值，以确定要为用户加载 ajax 的视频。

**问题**：我怎样才能将用户导航到`/pages/video/video.html?id=555`？我试过了，但我的 video.html 似乎根本没有加载。如果我能做到这一点，那么在我的 video.js 文件中，我可以查找查询字符串 var 以获取它应该播放的视频的 id。

**问题**：如果我不这样做，那么如果我从 1 个视频转到另一个视频（我在每个视频页面上都有一个“Up next”控件，依次指向下一个视频），后退按钮无法正常工作因为它只是转到最后播放的视频。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:43:28.360

`navigate`您可以对第二个参数使用相同的函数：

```
WinJS.Navigation.navigate("/pages/video/video.html", videoId); 
```

# java - 骆驼路线在ftp完成之前拾取文件

> ID：13844564
> 
> 赞同：6
> 
> 时间：2012-12-12T16:48:02.863
> 
> 标签：java, spring, apache-camel

我有一个客户将文件通过 ftp 传输到我们的服务器。我定义了一个路由来从该目录中选择某些文件并将它们移动到要处理的不同目录。问题是它一看到它就接受它，而不是等到 ftp 完成。结果是 to uri 中描述的路径中的 0 字节文件。我已经尝试了每个 readLock 选项（masterFile、rename、changed、fileLock），但都没有奏效。我正在使用 spring DSL 来定义我的骆驼路线。这是一个不工作的例子。骆驼版本是 2.10.0

```
 <route>
        <from uri="file:pathName?initialDelay=10s&amp;move=ARCHIVE&amp;sortBy=ignoreCase:file:name&amp;readLock=fileLock&amp;readLockCheckInterval=5000&amp;readLockTimeout=10m&amp;filter=#FileFilter" />
        <to uri="file:pathName/newDirectory/" />
    </route> 
```

任何帮助，将不胜感激。谢谢！

只是要注意......有一次，这条路线在另一台服务器上运行，我不得不将文件 ftp 到另一台处理它的服务器。当我在骆驼中使用 ftp 组件时，该路由运行良好。也就是说，它确实等到收到文件后才执行 ftp。我在定义的路线上有相同的选项。这就是为什么我认为应该有办法做到这一点，因为 ftp 组件使用骆驼中的文件组件选项。

* * *

我正在接受@PeteH 的建议 #2 并做了以下事情。我仍然希望有另一种方法，但这会奏效。

我添加了以下方法，该方法返回一个日期为 current.minus(x seconds)

```
public static Date getDateMinusSeconds(Integer seconds) {
Calendar cal = Calendar.getInstance();
cal.add(Calendar.SECOND, seconds);
return  cal.getTime();
} 
```

然后在我的过滤器中检查初始过滤是否为真。如果是，我将上次修改日期与 getDateMinusSeconds() 进行比较。如果比较为真，我为过滤器返回假。

```
 if(filter){
        if(new Date(pathname.getLastModified()).after(DateUtil.getDateMinusSeconds(-30))){
            return false;
        }
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T17:13:46.170

我没有在你的环境中做过任何这样的事情，但之前在使用 FTP 时遇到过这种问题。

我可以建议的两个更好的选择是如果您可以让客户发送两个文件。File1 是他们的数据，File2 可以是任何东西。他们按顺序发送。当 File2 到达时您陷入困境，但您所做的只是将其用作 File1 已安全到达的“信号”。

不太好的选择（这是我们最终实施的选择，因为我们无法控制正在发送的文件）是编写代码，以便您拒绝处理任何文件，直到其最后修改的时间戳至少是*x*分钟。我想我们定下了 5 分钟。这太可怕了，因为你基本上是在开火、检查、睡觉、检查等等。

但是您描述的问题在 FTP 中是众所周知的。就像我说的那样，我不知道这两种方法中的任何一种是否适用于您的环境，但在较高的水平上它们肯定是合理的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-11-25T15:23:39.767

camel 继承自文件组件。这是在顶部描述这件事..

请注意，JDK File IO API 在检测另一个应用程序当前是否正在写入/复制文件方面有点受限。并且实现也可能因操作系统平台而异。这可能导致 Camel 认为该文件没有被另一个进程锁定并开始使用它。因此，您必须自己调查适合您的环境的内容。为了帮助解决这个问题，Camel 提供了不同的 readLock 选项和 doneFileName 选项，您可以使用它们。另请参阅从其他人直接放置文件的文件夹中使用文件部分。

为了解决这个问题，我让我的出版商发布了一个“完成”文件。这解决了这个问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-22T15:15:49.813

这样做的一种方法是使用一个观察者，一旦文件被废弃，它将触发作业，并将文件的消耗延迟到相当长的时间，以确保它的上传完成。

```
from("file-watch://{{ftp.file_input}}?events=CREATE&recursive=false")
                .id("FILE_WATCHER")
                .log("File event: ${header.CamelFileEventType} occurred on file ${header.CamelFileName} at ${header.CamelFileLastModified}")
                .delay(20000)
                .to("direct:file_processor");

from("direct:file_processor")
                .id("FILE_DISPATCHER")
                .log("Sending To SFTP Uploader")
                .to("sftp://{{ftp.user}}@{{ftp.host}}:{{ftp.port}}//upload?password={{ftp.password}}&fileName={{file_pattern}}-${date:now:yyyyMMdd-HH:mm}.csv")
                .log("File sent to SFTP"); 
```

回应永远不晚。希望它可以帮助那些在 SFTP 世界最令人毛骨悚然的地方挣扎的人......

# c# - xml解析？如何？

> ID：13844566
> 
> 赞同：-5
> 
> 时间：2012-12-12T16:48:11.150
> 
> 标签：c#, xml, linq, linq-to-xml

如何将此 xml 数据的“问题”元素解析为一个名为“问题”的对象，该对象具有一个名为“选项”的字符串数组属性？我知道有很多带有答案的 xml 帖子，但它们都让我感到困惑，我只需要一个适合我的问题的帖子。xml 文件中共有 50 个问题，我想将每个问题元素及其子元素和内容提取到一个问题对象中。我在 Visual Studio 2010 上使用 C#。

```
<?xml version="1.0" encoding="utf-8" ?>
<Questions>
 <Question id ="1">
<Content>Which of the following statements represents the view expressed by the writer    in the first paragraph?</Content>
<Options>
  <A>Evil Thoughts will eventually ruin the evil man.</A>
  <B>If we do not stop the pendulum of thoughts from swinging, our thoughts will soon become our enemies.</B>
  <C>Too many evil thoughts leave fatal consequence.</C>
  <D>It is possible to decide what controls our thoughts.</D>
</Options>
</Question>
<Question id ="2">
<Content>From the argument in the second paragraph, it can be concluded that evil thoughts control the lives people who</Content>
<Options>
  <A>are helpless because they fly out of their minds</A>
  <B>cherish idle and slothful ways</B>
  <C>are thieves with evil instincts</C>
  <D>treasure and ruminate on them.</D>
</Options>
</Question>
<Question id ="3">
   <Content>The expression think of the devil and he will appear..., as used in this  passage, suggests that</Content>
 <Options>
  <A>like the devil, evil thoughts must not reign in our hearts</A>
  <B>evil thoughts are fantasies which exist only in people's minds</B>
  <C>uncontrolled evil thoughts may lead to evil deeds</C>
  <D>the devil gives evil thoughts only to those who invite him in.</D>
</Options>
</Question>
<Question id ="4">
<Content>Which of the following statements summarizes the argument of the last paragraph?</Content>
 <Options>
  <A>Heavy traffic on a miry and dirty road may lead to evil thoughts.</A>
  <B>The more evil we think, the more vile we are likely to become.</B>
  <C>Evil people should not be welcomed as guest in our homes the same way as we welcome good people.</C>
  <D>Evil thoughts control the key to the human heart and no one can keep the out.</D>
</Options> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:54:19.117

您可以使用[LINQ to Xml](http://msdn.microsoft.com/en-us/library/bb387061.aspx)做到这一点：

```
XDocument xdoc = XDocument.Load(path_to_xml);
var query = xdoc.Descendants("Question")
                .Select(q => new Question()
                {
                    Id = (int)q.Attribute("id"),
                    Content = (string)q.Element("Content"),
                    Options = q.Element("Options")
                               .Elements()
                               .Select(o => (string)o).ToArray()
                }); 
```

这将返回`IEnumerable<Question>`序列，其中 Question 是一个类，如：

```
public class Question
{
    public int Id { get; set; }
    public string Content { get; set; }
    public string[] Options { get; set; }
} 
```

# ruby-on-rails - Rails 列出特定日期的记录

> ID：13844567
> 
> 赞同：0
> 
> 时间：2012-12-12T16:48:16.140
> 
> 标签：ruby-on-rails

我正在尝试创建一个 index.html.erb 文件，该文件将列出名为 events 的表中的记录。我正在尝试选择特定日期的记录。starts_at 是表中的日期时间字段。例如，我正在尝试使用以下命令获取本周星期一的所有记录：

```
<% @events = Event.where('starts_at.to_date = ?', DateTime.now.beginning_of_week.to_date) each do |event| %> 
```

但是，我不应该得到记录。

它不喜欢的一件事是 each 语句。

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:55:59.830

我相信你错过了一个等号条件符号。

```
<% @events = Event.where('starts_at.to_date = ?', DateTime.now.beginning_of_week.to_date) each do |event| %> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:10:40.950

您可以使用 AREL。

```
@date = DateTime.now.beginning_of_week
@events = Event.where(starts_at: @date..@date.end_of_day) 
```

这应该进入你的控制器。不建议在您的视图中进行数据库查询（不是非常 MVC！）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:58:22.360

```
Event.find(:all, :conditions => ["DATE(starts_at) = DATE(?)", DateTime.now.beginning_of_week]) 
```

或者

```
Event.where("DATE(starts_at) = DATE(?)", DateTime.now.beginning_of_week) 
```

# php - Twitter API 1.1 搜索查询和 OAuth

> ID：13844571
> 
> 赞同：1
> 
> 时间：2012-12-12T16:48:24.020
> 
> 标签：php, api, twitter, twitter-oauth

我开始学习 Twitter API。我想对关键字进行简单的搜索，例如“bananaz”，并从它将返回的 JSON 数据中获取一些信息。我使用 PHP 和 abrahams twitteroauth 库。

我的代码是这样的：

```
require_once('/twitteroauth.php');
$connection = new TwitterOAuth ('****', '****', '****', '******');

$statuses = $connection->get('search/tweets.json?q=bananaz');

print_r($statuses); 
```

但它返回的只是“抱歉，该页面不存在 [code] => 34”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T05:33:25.177

***2013 年 10 月更新的答案***

TwitterOAuth 现在支持新的 Twitter API 1.1 并且搜索已经过身份验证（[文档](https://dev.twitter.com/docs/api/1.1/get/search/tweets)）——搜索查询的工作方式与原始代码类似：

```
require_once('/twitteroauth.php');
$connection = new TwitterOAuth ('****', '****', '****', '******');

$statuses = $connection->get('search/tweets', array('q' => 'bananaz'));

print_r($statuses); 
```

***旧答案（Twitter API v1）***

Twitter 不需要对搜索进行身份验证，因此 TwitterOAuth 不支持它。搜索的 URL 与 API URL 不同，这就是您收到“页面不存在错误”（[Twitter doco](https://dev.twitter.com/docs/api/1/get/search)）的原因。

为了解决这个问题，您可以在通过 TwitterOAuth 进行呼叫时使用完整的 URL：

```
$statuses = $connection->get('http://search.twitter.com/search/tweets.json?q=bananaz'); 
```

然而[，该库的作者建议](https://groups.google.com/d/topic/twitter-development-talk/MS5V12Cwtw8/discussion)仅使用 cURL 进行搜索，从而节省使用该库的开销：

```
$ch = curl_init();    
curl_setopt($ch, CURLOPT_URL, "http://search.twitter.com/search/tweets.json?q=bananaz");
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);

$json = curl_exec($ch);

curl_close($ch);

$statuses = json_decode($json); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-18T10:59:08.730

请注意 Twitter API 1.1 要求身份验证。看看这个文档：

[https://dev.twitter.com/docs/api/1.1/get/search/tweets](https://dev.twitter.com/docs/api/1.1/get/search/tweets)

# sql - 在 select 语句的一部分周围连接单引号

> ID：13844575
> 
> 赞同：2
> 
> 时间：2012-12-12T16:48:34.013
> 
> 标签：sql, datetime, concatenation

以下是我的选择语句的一部分

```
CAST(Table.field AS datetime) AS newDate 
```

如您所料，它返回如下内容

```
1/1/1900  2:45:00 PM 
```

但是，我需要它在单引号内返回相同的值，如下所示。但是我很难理解这个语法，使用强制转换语句，重命名列。希望你们能有所帮助？

```
'1/1/1900  2:45:00 PM' 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T16:51:43.200

将值转换为 varchar 并将它们连接起来：

```
''''+cast(cast(table.field as date) as varchar(255))+'''' 
```

您可能希望进行调查`convert`以更好地控制结果日期的格式。

它使用 SQL Server 方法进行连接。在其他数据库中，您可能会使用`||`或 函数`concat`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:53:25.597

您可以像这样附加单引号。

```
chr(39)||CAST(Table.field AS datetime) AS newDate||chr(39) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:54:51.660

`Chr(39) + CAST(CAST(table.field AS DATE) AS VARCHAR(255)) + Chr(39)`

为了更容易阅读。

# android - android:screenOrientation="portrait" 在 Jellybean 中被忽略

> ID：13844577
> 
> 赞同：4
> 
> 时间：2012-12-12T16:48:38.647
> 
> 标签：android, screen-orientation, android-4.2-jelly-bean

android:screenOrientation="portrait" 在 Jellybean 中被忽略。如果我将手机变成横向，无论如何它都会改变方向。我试过几部手机。我必须使用任何新标志吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:55:45.647

您可以尝试以编程方式进行，

```
@Override
public void onConfigurationChanged(Configuration newConfig) {
    super.onConfigurationChanged(newConfig);
    switch (newConfig.orientation)
    {
    case Configuration.ORIENTATION_PORTRAIT:
        // taking action on event
        lockScreenRotation(Configuration.ORIENTATION_PORTRAIT);
    break;
    case Configuration.ORIENTATION_LANDSCAPE:
        // taking action on event
        lockScreenRotation(Configuration.ORIENTATION_LANDSCAPE);
    break;
    case Configuration.ORIENTATION_SQUARE:
        // taking action on event
        lockScreenRotation(Configuration.ORIENTATION_SQUARE);
    break;
    default:
        throw new Exception("Unexpected orientation!!!");
    break;
 }

private void lockScreenRotation(int orientation)
    {
      // Stop the screen orientation changing during an event
        switch (orientation)
        {
        ...
      case Configuration.ORIENTATION_PORTRAIT:
        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        break;
      case Configuration.ORIENTATION_LANDSCAPE:
        this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);
        break;
        ...
      case default:
       this.setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_UNSPECIFIED); 
       break;
        }
    } 
```

# c# - 如何在不安装 Microsoft Lync 的情况下在我的业务应用程序中创建自定义 Lync 客户端？

> ID：13844578
> 
> 赞同：5
> 
> 时间：2012-12-12T16:48:45.330
> 
> 标签：c#, .net, lync

我想为嵌入在我的业务应用程序中的 Microsoft Lync 实施我自己的客户端。是否可以在不安装 Lync 的情况下这样做？我的目标是 Lync SDK 2010。我在文档中找到了以下信息，我想知道是否有解决方案可以避免这种情况：

> 使用 Microsoft Lync 2010 SDK 将通信和协作功能添加到您的应用程序。使用 Lync SDK，您可以将 Microsoft Lync 2010 功能添加到现有业务应用程序，或创建包含 Microsoft Lync 2010 功能的自定义客户端。**在任何一种情况下，Lync 2010 都必须是托管 Microsoft Lync 2010 API 应用程序的客户端计算机上正在运行的进程。**

我的想法是安装我的 .Net 应用程序而不需要安装任何 Lync。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:59:01.340

如果 SDK 文档表明没有……那么没有。原因是 Lync 客户端仍处理实际的 Lync 协议。您唯一的其他选择是对 Lync 协议进行逆向工程并从网络上滚动您自己的客户端（这是假设它不使用某种加密，即 Skype）。

**编辑** 原来微软发布了 Lync 协议文档： http: [//msdn.microsoft.com/en-us/library/cc339480 (v=office.12).aspx](http://msdn.microsoft.com/en-us/library/cc339480(v=office.12).aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T16:44:21.507

有可能，请阅读这篇文章：[Lync API 概述](http://www.codelync.com/an-overview-of-the-lync-apis/)。

基本上，您想要使用的**Lync 2010 SDK与您安装的 lync 客户端对话，因此需要它。**但是使用**统一通信客户端 API (UCCA)**，您可以编写自己的客户端，同时仍然使用方便的 SDK 功能。

# ios - 静态表视图 - 键盘隐藏的 UITextField

> ID：13844581
> 
> 赞同：2
> 
> 时间：2012-12-12T16:48:49.073
> 
> 标签：ios, uitableview, uitextfield

也许这是一个反复出现的问题，但我被这个问题和一些 iOS 概念所困扰。我有一个带有**静态表视图**、**三个部分**和每个部分的一些**行的****ViewController 。**在行内我有 UITextFields。我想要做的是阻止键盘隐藏我的底部屏幕 UI 文本字段。我刚刚尝试了[管理键盘](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)中的苹果解决方案，但是由于我没有将滚动视图背后的概念附加到静态表格视图中，因此我无法将这个想法实施到我的项目中。大家有没有推荐的地方学习呢？抱歉，如果无法解释我要做什么。我有点失落。

 ******任何帮助将不胜感激。

非常感谢，马科斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:04:30.470

我不得不做类似的事情，这是我的代码，希望它可以帮助你。

```
- (void)keyboardWasShown:(NSNotification*)aNotification
{
    NSDictionary* info = [aNotification userInfo];
    CGSize kbSize = [[info objectForKey:UIKeyboardFrameBeginUserInfoKey] CGRectValue].size;

    UIEdgeInsets contentInsets = UIEdgeInsetsMake(0.0, 0.0, kbSize.height, 0.0);
    scrollView.contentInset = contentInsets;
    scrollView.scrollIndicatorInsets = contentInsets;

    CGRect aRect = self.bounds;
    aRect.size.height -= kbSize.height;
    CGRect activeRect = [activeTextField convertRect:activeTextField.frame toView:self];

    if (!CGRectContainsPoint(aRect, activeRect.origin) ) {
        CGPoint scrollPoint = CGPointMake(0.0, activeRect.origin.y-kbSize.height+10);
        [scrollView setContentOffset:scrollPoint animated:YES];
    }
}

// Called when the UIKeyboardWillHideNotification is sent
- (void)keyboardWillBeHidden:(NSNotification*)aNotification
{
    UIEdgeInsets contentInsets = UIEdgeInsetsZero;
    scrollView.contentInset = contentInsets;
    scrollView.scrollIndicatorInsets = contentInsets;
}

- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    self.activeTextField = textField;
}

- (void)textFieldDidEndEditing:(UITextField *)textField
{
    self.activeTextField = nil;
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    return NO;
} 
```

此外，请确保在加载视图时设置通知观察者，如下所示：

```
[[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(keyboardWasShown:)
                                                     name:UIKeyboardWillShowNotification object:nil];

[[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(keyboardWillBeHidden:)
                                                     name:UIKeyboardWillHideNotification object:nil]; 
```

只需将 activeTextField 定义为 UITextField 并确保您想要移动的所有内容都包含在您的 scrollView 中（在您的情况下，您可能可以将 viewController 更改为 scrollView）。另外，确保你的 scrollView 的 contentSize 至少是 self.bounds.size。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-01T18:34:06.143

I just had to do this in my application - Stakenborg's answer got me 80% there, but there were a couple of additional refinements I added to work with TableViews specifically.

The main bits are that:

*   TableViews already have insets, so we need to add or subtract from those.
*   I also want to scroll so that the cell I'm editing is in a good place to be seen.

The second part requires a little bit of indirection - the text fields belong to my custom cells, so I need to respond to the BeginEditing message there by sending a message to the UITableViewController.

Here's how it all comes together. In the UITableViewController:

```
@property (nonatomic, strong) NSIndexPath *editCellIndexPath;
@property (nonatomic) bool keyboardShowing;

//....

- (void)setEditRow:(UITableViewCell *)cell
{
    self.editCellIndexPath = [self.tableView indexPathForCell:cell];
    if (self.keyboardShowing)
    {
        [self.tableView scrollToRowAtIndexPath:self.editCellIndexPath atScrollPosition:UITableViewScrollPositionBottom animated:true];
    }
}

- (void)keyboardWillShow:(NSNotification *)sender
{
    CGSize kbSize = [[[sender userInfo] objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue].size;
    NSTimeInterval duration = [[[sender userInfo] objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];

    UIEdgeInsets edgeInsets = [self.tableView contentInset];
    edgeInsets.bottom += kbSize.height;
    UIEdgeInsets scrollInsets = [self.tableView scrollIndicatorInsets];
    scrollInsets.bottom += kbSize.height;

    self.keyboardShowing = true;

    [UIView animateWithDuration:duration animations:^{
        [self.tableView setContentInset:edgeInsets];
        [self.tableView setScrollIndicatorInsets:scrollInsets];
    }];
}

- (void)keyboardWillHide:(NSNotification *)sender
{
    CGSize kbSize = [[[sender userInfo] objectForKey:UIKeyboardFrameEndUserInfoKey] CGRectValue].size;
    NSTimeInterval duration = [[[sender userInfo] objectForKey:UIKeyboardAnimationDurationUserInfoKey] doubleValue];

    UIEdgeInsets edgeInsets = [self.tableView contentInset];
    edgeInsets.bottom -= kbSize.height;
    UIEdgeInsets scrollInsets = [self.tableView scrollIndicatorInsets];
    scrollInsets.bottom -= kbSize.height;

    self.keyboardShowing = false;

    [UIView animateWithDuration:duration animations:^{
        [self.tableView setContentInset:edgeInsets];
        [self.tableView setScrollIndicatorInsets:scrollInsets];
    }];
} 
```

Then I have a weak property for the owningController in each of my custom UITableViewCells, and let the controller know when my cell is being text-edited. I use a TextView in one, and TextFields in another row, so I use these methods:

```
- (void)textViewDidBeginEditing:(UITextView *)textView
{
    MyCustomTableController *itemControl = (MyCustomTableController *)self.owningController;
    [itemControl setEditRow:self];
} 
```

and

```
- (void)textFieldDidBeginEditing:(UITextField *)textField
{
    MyCustomTableController *itemControl = (MyCustomTableController *)self.owningController;
    [itemControl setEditRow:self];
} 
```

So far, this is working very well.******

# java - 从Java中的集合中删除任何数字

> ID：13844585
> 
> 赞同：0
> 
> 时间：2012-12-12T16:49:14.440
> 
> 标签：java, set

我在 Java 中有一套看起来像

```
[0.99998945, line10Rule:14013, noOfCommits:0] 
```

并且，我想从其元素中删除所有数字数字和冒号“：”以获取

```
[line10Rule, noOfCommits] 
```

最好的方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:01:49.170

现在更正：

```
String[] array = new String[set.size()];   // create a String array of the same size as the set
set.toArray(array);                        // copy the sets content into the array
set.clear();                               // clear the set

for (String string : array) {              // iterate through the array
    set.add(string.replaceAll("[0-9]*$", ""));   // remove the digits and put the resulting String back into the set    
} 
```

@jlordo：感谢您指出。我忘记了，迭代器在字符串的副本上工作。这可能不优雅（迭代这么多循环等）但它有效：D

问候克里斯托夫

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:02:22.733

没办法，您将不得不逐项重新创建设置。要用“”替换数字，请考虑 String.replace()。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:07:48.787

试试这个

```
 List<String> list = new ArrayList<String>(Arrays.asList("0.99998945", "line10Rule:14013", "noOfCommits:0"));
    ListIterator<String> i = list.listIterator();
    while(i.hasNext()) {
        String s = i.next();
        int p = s.indexOf(':');
        if (p > 0) {
            i.set(s.substring(0, p));
        } else {
            i.remove();
        }
    }
    System.out.println(list); 
```

输出

```
[line10Rule, noOfCommits] 
```

# spring-mvc - 支持 UrlBasedViewResolver 和 TilesConfigurer 和 InternalResourceViewResolver

> ID：13844587
> 
> 赞同：1
> 
> 时间：2012-12-12T16:49:22.817
> 
> 标签：spring-mvc

我的项目使用 Spring Tiles nad 我需要实现一个普通的 jsp 方法，因此该项目有一个使用瓷砖的页面，我想合并一个加载 html 的 iframe，以便我可以根据需要刷新。我发现我找到了实现解析器以加载 html 文件的解决方案。

我担心解析器冲突。有没有人在他们的应用程序中组合了多个视图解析器？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T10:25:15.847

您可以在 spring 配置文件中定义多个视图左轮手枪并为它们设置顺序。

```
<bean id="viewResolverTiles"
    class="org.springframework.web.servlet.view.UrlBasedViewResolver">
    <property name="viewClass">
        <value>org.springframework.web.servlet.view.tiles2.TilesView</value>
    </property>
    <property name="order" value="1" />
</bean>
<bean id="jspViewResolver" class="org.springframework.web.servlet.view.InternalResourceViewResolver">
  <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
  <property name="prefix" value="/WEB-INF/jsp/"/>
  <property name="suffix" value=".jsp"/>
  <property name="order" value="2"/>
</bean> 
```

请注意我们如何`order`在两个视图解析器中定义属性。因此，默认情况下，将调用基于 Tiles 的视图解析器。如果 Spring 没有找到视图，它会移动到 JSP 视图解析器。

文档：[16.5 解析视图](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/mvc.html#mvc-viewresolver)

我希望这有帮助。

# javascript - 使用javascript提取特定的子字符串？

> ID：13844589
> 
> 赞同：0
> 
> 时间：2012-12-12T16:49:28.340
> 
> 标签：javascript

如果我有以下字符串：

```
mickey mouse WITH friend:goofy WITH pet:pluto 
```

javascript中获取该字符串并将所有“键：值”对提取到某个对象变量中的最佳方法是什么？冒号是分隔符。尽管我可能无法保证 WITH 会在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:59:15.433

```
myString.split(/\s+/).reduce(function(map, str) {
    var parts = str.split(":");
    if (parts.length > 1)
        map[parts.shift()] = parts.join(":");
    return map;
}, {}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:02:59.830

```
var array = str.match(/\w+\:\w+/g); 
```

然后使用 , 拆分数组中的每个项目`":"`以获取键值对。

这是代码：

```
function getObject(str) {
  var ar = str.match(/\w+\:\w+/g);
  var outObj = {};
  for (var i=0; i < ar.length; i++) {
    var item = ar[i];
    var s = item.split(":");
    outObj[s[0]] = s[1];
  }
  return outObj;  
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:55:55.170

也许像

```
"mickey WITH friend:goofy WITH pet:pluto".split(":") 
```

它将返回数组，然后循环遍历数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T17:01:08.190

字符串模式必须至少以一种或另一种方式保持一致。使用 javascript 的 split 函数并按共同出现的单词进行拆分（我们说空间 Atleast）然后您需要使用 : 作为键来拆分每个单词，并将所需的值放入一个对象中。希望那是你渴望的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T17:01:37.730

你可以这样做，例如：

```
 var myString = "mickey WITH friend:goofy WITH pet:pluto";

    function someName(str, separator) {
        var arr = str.split(" "),
            arr2 = [],
            obj = {};
        for(var i = 0, ilen = arr.length; i < ilen; i++) {
            if ( arr[i].indexOf(separator) !== -1 ) {
              arr2 = arr[i].split(separator);
              obj[arr2[0]] = arr2[1];
            }
        }
        return obj;
    }

    var x = someName(myString, ":");

    console.log(x); 
```

# python - for 循环 - .split 和 int

> ID：13844592
> 
> 赞同：0
> 
> 时间：2012-12-12T16:49:44.830
> 
> 标签：python

我写了 2 个运行良好的函数，但我想更改我的部分代码以提高效率，使用 for 循环，每 8 个图表“跳转”一次。当我跑步时`verify_checksum`，我得到：

```
AttributeError: 'int' object has no attribute 'split' 
```

但是当我用行注释运行它时，`#`它工作正常。知道如何在不更改代码其他部分的情况下修复它吗？（有更多的功能可以与这些一起使用，这会导致混乱）。

我的代码：

```
def xor_bytes(byte1, byte2):
    byte1, byte2=byte1.split(), byte2.split()
    xor=""
    a=0
    for i in byte1:
        for j in i:
            t=int(byte2[0][a])^int(j)
            xor+="".join(str(t))
            a+=1
    return xor

def verify_checksum(datagram):
    datagram=list(datagram)
    org_checksum=datagram[48:56]
    org_checksum="".join(org_checksum)
    x=48
    for i in datagram[48:56]:
        datagram[x]='0'
        x+=1
    datagram="".join(datagram)

    res=xor_bytes(datagram[0:8], datagram[8:16])
    for i in (16,88,8):
        res=xor_bytes(res, i)
    #res=xor_bytes(res,datagram[16:24])
    #res=xor_bytes(res,datagram[24:32])
    #res=xor_bytes(res,datagram[32:40])
    #res=xor_bytes(res,datagram[40:48])
    #res=xor_bytes(res,datagram[48:56])
    #res=xor_bytes(res,datagram[56:64])
    #res=xor_bytes(res,datagram[64:72])
    #res=xor_bytes(res,datagram[72:80])
    #res=xor_bytes(res,datagram[80:88])

    if res==org_checksum:
        return True
    else:
        return False 
```

输入：

```
verify_checksum("1111000000001111000011111111000001010101101010101010111001110011001000000110101101101001") 
```

输出：

```
True 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:53:45.040

你有一个`for`这样的循环：

```
for i in (16,88,8):
    res=xor_bytes(res, i) 
```

然后您尝试在函数中调用`.split`on `i`（它是一个整数）`xor_bytes`：

```
byte1, byte2=byte1.split(), byte2.split() 
```

（`i`作为 传入`byte2`）。

我不确定您要在这里完成什么，所以我无法帮助您解决问题，但这就是它发生的原因。

* * *

也许你想要类似的东西：

```
bytes_range = range(16,89,8)  #make 89 the upper bound so that 88 is included in the range
for start,end in zip(bytes_range[:-1],bytes_range[1:]):
    res = xor_bytes(res,datagram[start:end]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:56:58.367

您的循环看起来***不像***注释行。

```
for i in range(16,88,8):
    res=xor_bytes(res, datagram[i:i + 8]) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T16:57:24.420

在注释掉的行中，您将两个字符串作为参数传递。

在循环中，您传递一个字符串和一个 int 作为参数。

错误出现在 byte2.split() 上，因为它是一个 int。传入数据报的一部分，而不是数字位置，你会没事的。

# netbeans-7 - 设置 NetBeans 模块的类型

> ID：13844595
> 
> 赞同：1
> 
> 时间：2012-12-12T16:49:54.127
> 
> 标签：netbeans-7, netbeans-platform

我一直在使用 NetBeans IDE 并行开发几个 NetBeans 模块。昨天（2012 年 12 月 12 日）IDE 更新了，现在我在运行平台时无法显示它们中的任何一个。平台加载没有错误，但我的模块没有出现。如果我尝试显式启用它们，我会得到：

```
java.lang.IllegalArgumentException: Not all requested modules can be enabled: [StandardModule:com.foo jarFile: D:\bar.jar]
at org.netbeans.ModuleManager.enable(ModuleManager.java:1024) 
```

我看到 module.xml 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<nbm>
    <!--
    <moduleType>autoload</moduleType>
    <codeNameBase>com.foo/1</codeNameBase>
    <licenseName>Apache License, Version 2.0</licenseName>
    <licenseFile>license.txt</licenseFile>
    -->
</nbm> 
```

这都是自动生成的，看起来被注释掉了，但看起来它试图将模块设置为自动加载模块。这很奇怪，因为在我看来该模块就像一个自动加载模块。

所以我的问题，看起来应该很简单，但我似乎无法弄清楚，如何明确定义模块的类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-15T08:24:47.100

我认为，这个问题可能出在模块依赖关系之间。

1.  打开你的模块项目
2.  移除所有模块依赖
3.  检查您选择的NB平台（或更改）
4.  添加所有模块依赖项
5.  再次清理并构建和安装您的模块

# java - 空安全集合包含方法

> ID：13844597
> 
> 赞同：12
> 
> 时间：2012-12-12T16:49:57.730
> 
> 标签：java, collections, apache-commons-collection

`contains`在 Java 集合上 执行 null 安全的最佳方法是什么？

换句话说 -

```
 if (collection != null && collection.contains(x)) 
```

?

我希望 Apache commons-collections 有类似的东西`CollectionUtils.contains(collection, x)`，如果集合为 null，则只会返回 false，就像 with`size()`一样，它将 null 视为空集合。

然而，似乎没有这样的事情——我只是错过了吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-12T16:56:23.183

相反，您应该在此处应用**空对象模式**并使用空集合，而不是空集合。当然，也许这适合您的问题，但是如果没有更多上下文，很难说。换句话说，我认为你正在解决错误的问题——为什么一开始可能`collection`是空的？

# jsp - jasper 报告和 struts2

> ID：13844601
> 
> 赞同：0
> 
> 时间：2012-12-12T16:50:08.463
> 
> 标签：jsp, struts2, jasper-reports

这可能是一个棘手的问题。

使用 jaspersoft studio 我创建了一个报告：myreport.jrxml，它工作得很好：

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- Created with Jaspersoft Studio version last-->
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="Blank A4" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="36f7dbef-85e9-4a2e-bc9a-61e146a441b6">
    <property name="com.jaspersoft.studio.data.defaultdataadapter" value="ISA"/>
    <queryString>
        <![CDATA[select nom, prenom from beneficiaire where nni='105011411873713']]>
    </queryString>
    <field name="NOM" class="java.lang.String"/>
    <field name="PRENOM" class="java.lang.String"/>
    <background>
        <band splitType="Stretch"/>
    </background>
    <pageHeader>
        <band height="147" splitType="Stretch">
            <image>
                <reportElement uuid="ca704754-4477-48ed-999d-29bc717e08d3" x="0" y="0" width="50" height="50"/>
                <imageExpression><![CDATA["C:/Documents and Settings/DAVENNE-09298/Bureau/logo_assurance_maladie.gif"]]></imageExpression>
            </image>
            <staticText>
                <reportElement uuid="29581e3a-a202-43c1-b3c9-47a56d05edfe" x="0" y="60" width="121" height="25"/>
                <textElement>
                    <font size="8" isBold="false"/>
                </textElement>
                <text><![CDATA[SERVICE  ADMINISTRATIF
DU CENTRE APPAREILLAGE]]></text>
            </staticText>
            <textField>
                <reportElement uuid="7049158d-a7e1-4c10-adb0-2e10e11bbcb7" x="380" y="80" width="175" height="20"/>
                <textElement/>
                <textFieldExpression><![CDATA[$F{NOM} + ' ' + $F{PRENOM}]]></textFieldExpression>
            </textField>
        </band>
    </pageHeader>
    <detail>
        <band height="253" splitType="Stretch">
            <staticText>
                <reportElement uuid="c6bb6b7e-5316-49fb-b3c4-90faed1f4fcc" x="3" y="15" width="552" height="20"/>
                <textElement textAlignment="Center" verticalAlignment="Middle">
                    <font size="12" isBold="true"/>
                </textElement>
                <text><![CDATA[A L'ATTENTION DE VOTRE MUTUELLE]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="c3e93907-b312-437f-b032-68c919387986" x="0" y="50" width="554" height="130"/>
                <textElement/>
                <text><![CDATA[Madame, Monsieur,

La fourniture ....

Le montant ...

Recevez, Madame, Monsieur, mes sincères salutations]]></text>
            </staticText>
            <staticText>
                <reportElement uuid="f71b41b6-02fb-44d4-9c8d-f10cc78d4b83" x="370" y="200" width="186" height="51"/>
                <textElement/>
                <text><![CDATA[LE RESPONSABLE DU SERVICE

]]></text>
            </staticText>
        </band>
    </detail>
    <pageFooter>
        <band height="54" splitType="Stretch"/>
    </pageFooter>
</jasperReport> 
```

现在我想在我的 struts 2 项目中使用这个模板（我在我的项目中添加了 struts2-jasperreport 插件）。我必须添加 myreport.jasper 但在我摆脱项目中不需要的 2 行之前：

```
<property name="com.jaspersoft.studio.data.defaultdataadapter" value="ISA"/>
<queryString>
        <![CDATA[select nom, prenom from beneficiaire where nni='105011411873713']]>
</queryString> 
```

我声明我的新结果类型：

```
<result-type name="jasper" class="org.apache.struts2.views.jasperreports.JasperReportsResult"/> 
```

我在 struts.xml 中声明我的操作：

```
<action name="testCourrierMutuellePDF" class="isa.presentation.jasper.CourrierMutuellePDF">
    <result name="success" type="jasper">
        <param name="location">jasper/courriers/myreport.jasper</param>
        <param name="dataSource">resultats</param>
        <param name="format">PDF</param>
    </result>
 </action> 
```

我写了我的动作课：

```
private Beneficiaire resultats;

public String execute() {
        try {
            GestionBeneficiaireFacade facade = GestionBeneficiaireFacade.getInstance();
            resultats = facade.recupererBeneficiaire("105011411873713");
        } catch (IsaException e) {
            this.addActionMessage(this
                    .getText("error.benefInfosAction.sauverBenef"));
            this.isaException = e;
            return ERROR;
        }
        return SUCCESS;
    }

public Beneficiaire getResultats() {
        return this.resultats;
} 
```

我确信几件事：

1.  找到jasper文件是因为我没有FileNotFoundException

2.  找到数据源是因为我调试了，调用了getter，不为空，数据在里面

最后一件事..当然，我的对象结果具有“nom”和“prenom”属性

无论如何，我得到一个我不明白的 nullpointerException ：

```
java.lang.NullPointerException
    net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:89)
    net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:601)
    org.apache.struts2.views.jasperreports.JasperReportsResult.doExecute(JasperReportsResult.java:326)
    org.apache.struts2.dispatcher.StrutsResultSupport.execute(StrutsResultSupport.java:186)
    com.opensymphony.xwork2.DefaultActionInvocation.executeResult(DefaultActionInvocation.java:361)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:265)
    isa.presentation.intercepteur.IsaExceptionXMLIntercepteur.intercept(IsaExceptionXMLIntercepteur.java:29)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.DefaultWorkflowInterceptor.doIntercept(DefaultWorkflowInterceptor.java:163)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.validator.ValidationInterceptor.doIntercept(ValidationInterceptor.java:251)
    org.apache.struts2.interceptor.validation.AnnotationValidationInterceptor.doIntercept(AnnotationValidationInterceptor.java:68)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.ConversionErrorInterceptor.intercept(ConversionErrorInterceptor.java:122)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:148)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:243)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:89)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:128)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:270)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:126)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:138)
    com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:164)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:128)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
    com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:236)
    org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:498)
    org.apache.struts2.dispatcher.FilterDispatcher.doFilter(FilterDispatcher.java:434)
    org.netbeans.modules.web.monitor.server.MonitorFilter.doFilter(MonitorFilter.java:393) 
```

* * *

感谢 Aleksandr，我升级了 jasperReport 库，并且有了我的 pdf 文件。但是名称和名字为空。当我调试应用程序时，我可以看到通过 getter 调用 resultats 变量，并且 name / firstname 属性不为空，但具有良好的值..

所以？任何想法 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T11:51:02.043

当然是区分大小写的

所以不是 NOM 和 PRENOM 而是 nom 和 prenom

# c# - 以一种方法在两个 foreach 循环之间传递字符串变量

> ID：13844602
> 
> 赞同：1
> 
> 时间：2012-12-12T16:50:12.340
> 
> 标签：c#, foreach

这是我的代码：

```
public void refresh_SID(string callsign) {
    // zjistime si vsechny potrebne informace o danem letu
    XmlNodeList lety = airplanes.SelectNodes("/vEsup/flights/LKPR/odlety/let");
    XmlNodeList sids = airports.SelectNodes("/vEsup/config/airports/LKPR/sidstar/sids/sid");
    XmlNodeList getQfu = airplanes.SelectNodes("/vEsup/airports/airport/");
    MessageBox.Show(callsign);
    foreach (XmlNode let in lety) {
        if(let.Attributes.GetNamedItem("callsign").Value == callsign) {
            string adep = let.Attributes.GetNamedItem("adep").Value;
            foreach(XmlNode letiste in getQfu) {
                if(adep == letiste.Attributes.GetNamedItem("icao").Value);
                string qfu = letiste.Attributes.GetNamedItem("rwy").Value;
            }
            string depRunway = let.Attributes.GetNamedItem("deprwy").Value; 
            string type = let.Attributes.GetNamedItem("type").Value;
            string exitpoint = let.Attributes.GetNamedItem("exitpoint").Value;
            string rules = let.Attributes.GetNamedItem("rules").Value;
            ComboBox sidRoute = new ComboBox();
            Load_SID(depRunway, qfu, type, exitpoint, rules, sids, sidRoute);
        }
    }
} 
```

不幸的是，我无法将两个`foreach`循环合并为一个，因为在第二个循环中，我需要使用`adep`在第一个循环中得到的字符串，并且我需要第二个循环作为单独的`foreach`循环，因为它必须检查不同部分XML 文件。所以现在，当调用该`Load_SID`方法时，`qfu`不存在。有什么办法可以到那里吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:53:41.903

当您调用方法 Load_SID 时，您会得到错误不存在，因为变量 qfu 不在范围内。

试试这个：

```
 ...
    string adep = let.Attributes.GetNamedItem("adep").Value;
    string qfu = string.Empty;
    foreach(XmlNode letiste in getQfu)
    {
       if(adep == letiste.Attributes.GetNamedItem("icao").Value);
            qfu = letiste.Attributes.GetNamedItem("rwy").Value;
    }
    ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:48:13.207

您在内部 foreach 单次迭代期间声明 qfu，当您尝试调用它时，它超出了范围。您需要在内部 foreach 之外声明它，并且当您具有适当的值时，退出 foreach 并拨打电话。

# c# - 发布不可编辑的值

> ID：13844604
> 
> 赞同：1
> 
> 时间：2012-12-12T16:50:15.020
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3

我有一个视图和一个模型（比如汽车）。表单中的一个字段是可编辑的（仅显示其他信息）。当视图表单发布时，我需要所有信息，而不仅仅是可编辑属性。但是所有其他属性都是空的。

我曾经创建隐藏字段来发布数据，但是当你的隐藏字段比非隐藏字段多时，它会产生非常脏的代码。

有没有办法在不使用隐藏字段的情况下发布模型的所有属性？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T17:01:41.870

您应该只使用带有可编辑字段的 ViewModel。在视图中，只需将模型的 id 作为隐藏字段放在数据库中。

在您的控制器中，从数据库中获取模型。然后检查您是否确实可以修改此项目（例如，有人可以使用 Firebug 更改隐藏字段中的 id）。

然后，只需使用 ViewModel 中的字段更新数据库模型...并再次将模型保存到数据库。

如果您在视图中使用您的 CAR 模型，有人可能会更改比您允许的更多的字段......如果您使用 CarViewModel，这是不可能的，因为模型绑定器只会绑定视图模型的属性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:54:21.723

以 html 形式发布的数据是输入的内容。如果您在帖子上需要这些数据，我认为隐藏字段没有问题，这就是隐藏字段的用途。

话虽如此，如果您真的想减少隐藏字段的数量，您可以在一个字段中“序列化”所有这些信息，然后在帖子中“反序列化”它。或者在自定义模型绑定器中。

但是，如果您想要在 Asp.Net MVC 中开箱即用的 ModelBinder 的魔力，则必须使用表单字段。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-12T16:54:24.350

如果您反对将信息发布在隐藏字段中，另一种选择是将它们包含在查询字符串中。

# c++ - 在头文件 C++ 中声明对象

> ID：13844610
> 
> 赞同：0
> 
> 时间：2012-12-12T16:50:22.830
> 
> 标签：c++, oop, class, header

我在头文件 (.h) 中声明了一个类，并在 .cpp 中定义了它的构造函数和函数（包括默认构造函数）

现在我想在另一个头文件中声明一个对象，并在另一个 .cpp 文件中对其进行初始化。我需要这样做，因为对象的初始化取决于 cpp 中的一些变量。.h 文件中的声明如下：

```
Saboteur *activeFault; /*Saboteur is the class, activeFault the object*/ 
```

当我尝试编译我的程序时，出现以下错误：

> 错误 C2143：语法错误：缺少“；” 前 '*'。

任何线索为什么会发生这种情况？

提示：#includes 一切正常，最奇怪的是，当编译器尝试编译`class Saboteur`定义了函数的 .cpp 文件时，我得到了错误，但它说错误在上面写的那行（这是另一个 cpp 文件）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:53:57.447

原型破坏者类。宣布：

```
class Saboteur; 
```

在声明之前`activeFault`。

然后，在其他地方，您提供`class Saboteur`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:57:35.633

有很多想法浮现在脑海

1.  您是否在产生此问题的头文件中包含了破坏者的 .h 文件？
2.  这是一个模板类吗？
3.  可能包含破坏者的头文件在实际包含破坏者类之前包含在内。在这种情况下，添加您的其他 .h 文件：

    破坏者级；

# mysql - Rails 无法连接到“localhost”上的 MySQL 服务器

> ID：13844613
> 
> 赞同：3
> 
> 时间：2012-12-12T16:50:36.373
> 
> 标签：mysql, ruby-on-rails, mysql2

尽管我研究了无数相关线程，但我的 Rails 3 应用程序的 Mysql 连接问题无穷无尽。我的错误信息：

```
C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32/lib/mysql2/client.rb:44:in `connect': Can't connect to MySQL server on 'localhost' (10061) (Mysql2::Error) 
```

（在您将此标记为重复问题之前，请考虑您是否可以找到另一个具有我未遵循的相关建议的线程。）

**到目前为止我的努力：**

我已将 libmysql.dll 文件从复制`<mysql installation>/bin`到`<ruby installation>/bin`.

我在捆绑包中有 mysql2 gem，它与连接器 ( `--with-mysql-dir=C:/mysql-connector-c-noinstall-6.0.2-win32`) 一起安装：

```
> bundle show mysql2
C:/Ruby193/lib/ruby/gems/1.9.1/gems/mysql2-0.3.11-x86-mingw32 
```

我相信我的 database.yml 文件配置正确：

```
development:
  adapter: mysql2
  encoding: utf8
  reconnect: false
  database: tq_development
  pool: 5
  username: root
  password: pinney
  host: localhost 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T17:10:05.583

尝试用 127.0.0.1 替换 localhost（在工作台和 yml 中）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T16:55:08.140

您是否在相关项目上运行过 rake db:create ？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:59:35.747

我同意上述观点......确保它可以与工作台或其他一些 GUI 工具一起使用，并且您可以使用 database.yml 文件的信息进行连接。

如果不是......回来再给我们一个叫喊声。

# c# - 有一些数据库问题（创建、连接、安全......等）

> ID：13844617
> 
> 赞同：1
> 
> 时间：2012-12-12T16:50:48.633
> 
> 标签：c#, database, sql-server-2005, visual-studio-2008

我是编程新手，对数据库的使用几乎没有疑问...
（抱歉，如果我的帖子有点长）
我学习使用 C# 使用 Visual Studio 2008

**1.如何创建数据库？- 总是有正确的方法吗？**
我是如何学会这样做的：
- 在*解决方案资源管理器*中，我右键单击然后转到添加 -> 新项目... ->（选择）基于服务的数据库 ->（单击）添加 -> 完成。仅此而已。然后在解决方案资源管理器中，我进入*app.config*，从那里我可以找到稍后我可以使用的连接字符串，它看起来像这样：

```
connectionString="Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\Database.mdf;Integrated Security=True;User Instance=True" 
```

那么这是创建数据库的正确方法吗？后来，当我测试时，我需要将 SQL Express 安装到没有 Visual Studio 的计算机上，以便该数据库可以为该程序工作。
那么有没有更好的方法来创建数据库，或者这很好。

**2.如何保证数据库不被他人打开？**
我的意思是，Visual Studio 中的其他人也可能会打开表和记录以及数据库中的所有内容。只需创建一个新项目，右键单击“服务器资源管理器”窗口，然后单击“添加连接”作为数据源，选择“Microsoft SQL Server 数据库文件”，然后只需浏览现有数据库即可。之后，您就可以完全访问数据库。那么关于这个的任何提示？

**3\. 如何以编程方式创建数据库？**
所以我的想法是，将来我可能想创建一个程序将使用的新数据库（已经连接到另一个数据库）。但是不知道我将如何使用该连接字符串（如何获取它），如果数据库是使用代码创建的（例如，客户端单击一个按钮来为新的“工作年”创建一个新数据库）。我从互联网上找到的用于创建数据库的示例中尝试了一些，但它总是给我一个错误......

我知道这个问题并不具体，但我是编程新手，有点不确定我的做法是否正确，而且我知道这个地方不像论坛，但我想我可能会得到一些好的答案指导我建立我未来的知识......

PS我还很年轻，如果我在写作中犯了一些错误，很抱歉（英语不是我的主要语言）......
（如果我在某些方面不清楚，请告诉我，我会尽量更清楚）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:23:44.747

> > 1.  如何创建数据库？- 总是有正确的方法吗？

因为，小型学生项目可能没问题，但从长远来看，您将不得不学习 DBMS 和数据库设计技术。一些已知的数据库是 MS SQL、MySQL、Oracle、DB2 等。由于您使用的是 Visual Studio，所以我建议您安装 MS SQL 免费版。

您开始使用最新技术的次数越多，创建数据库的方法就越多。最新的技术增加了某种抽象，所以最初只专注于在 DBMS 中创建数据库。

> > 如何保护数据库不被他人打开？

好吧，您首先需要某种书籍来了解数据库。

在现实世界的场景中，大多数情况下，数据库位于安全服务器上，只有数据库管理员有权更改其中的内容。开发人员通常具有只读权限，他们要求管理员运行数据库脚本。其次，开发人员获得的数据库通常是加密的，我的意思是客户几乎从不将真实数据提供给开发人员，以确保安全。

最后，如果您使用的是 MS SQL，那么您的数据库总是落后于某种安全措施，例如最初的登录框。

> > 如何以编程方式创建数据库？

嗯，有一些方法，但既然你是新手，你现在应该尝试一下。在此处发布您的问题，人们将通过一些简单的方法指导您完成任务。

最后，论坛是学习东西的好方法。我通过向老年人提问来做同样的事情。保持下去，欢迎来到 SO 和编程，你会喜欢这个社区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:46:48.243

欢迎来到 SO。正如评论中所写，您需要从一本好书开始，我相信您可以在网上找到一些东西。

一个建议是*总是*先检查谷歌。例如，搜索您的第三个问题会带来几个[结果](https://www.google.com/search?q=How%20to%20create%20a%20database%20programmatically?)，即使是前几个问题也会为您提供所需的所有信息。

当您有特定问题时，请在此处询问一些代码，显示您已尝试过的内容，并尽最大努力创建[SSCCE](http://sscce.org/)。我向你保证答案会很快。

> **1.如何创建数据库？- 总是有正确的方法吗？**

对于任何事情都没有正确的方法。大多数软件以编程方式创建数据库，因为您不能期望您的用户为您创建正确的模式。这通常在安装程序中或在启动时完成。

> **2.如何保证数据库不被他人打开？**

对此没有任何简单的解决方案。一种选择是在创建数据库时询问用户密码，然后在每次运行程序时再次询问用户。一些数据库允许创建加密的属性文件来启动指定密码的数据库服务器。

一般来说，安全是一个很大的话题。再次，谷歌搜索带来了有趣的材料，但没有明确的指导方针

> **3\. 如何以编程方式创建数据库？**

检查谷歌。这是一个特定的问题，但您应该能够很容易地为自己找到答案。

# node.js - 节点 js - SSL 例程：SSL23_GET_SERVER_HELLO:unknown protocol:.Error

> ID：13844618
> 
> 赞同：5
> 
> 时间：2012-12-12T16:50:51.913
> 
> 标签：node.js, ssl, https, dashboard

所以我使用的是Statusdashboard（https://github.com/obazoud/statusdashboard），它是一个检查网站是否启动的简单工具（我知道我也可以使用Monit，但我想给Node JS一个试试这就是我使用它的原因。）

在设置文件中使用“http”时，这似乎效果很好，但是当我尝试检查使用“https”协议的网站的状态时，它会在控制台和仪表板上给出错误声明 - “SSL23_GET_SEVER_HELLO：未知协议”。我发现这与节点HTTPS有关。

只是想知道是否有人以前遇到过这个错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-11T06:01:01.003

错误的原因可能是您的服务只使用 SSLv3。Node HTTPS 默认使用 SSLv2。

我遇到了同样的问题并按照这个提示解决了

[nodejs中的SSL错误](https://stackoverflow.com/questions/11091974/ssl-error-in-nodejs/12683325#comment25535766_12683325)

希望这可以帮助

# jdbc - 构建树状结构以从 JDBC 提供 Freemarker

> ID：13844623
> 
> 赞同：0
> 
> 时间：2012-12-12T16:51:02.350
> 
> 标签：jdbc, groovy, freemarker

我想用 Groovy 和 Freemarker（尤其是[GFreeMarker](http://groovy.codehaus.org/GFreeMarker)）生成代码——我想生成一个 Java 包装器来调用存储过程。所以我用这个语句查询 ORACLE：

```
select PACKAGE_NAME, OBJECT_NAME, POSITION, ARGUMENT_NAME, DATA_TYPE, IN_OUT
from USER_ARGUMENTS 
```

该数据是非规范化的（每个参数都在一行上）和分层：

```
- Package (PACKAGE_NAME)
  - Function (OBJECT_NAME)
    - Arguments (ARGUMENT_NAME, DATA_TYPE, IN_OUT) 
```

我想将它存储到一个层次结构中，以将其提供给 Freemarker 以生成代码。这意味着对于每一行，我必须创建一个新的 Package 实例或选择一个现有的实例，然后创建一个新的 Function 实例或选择一个现有的实例并创建一个新参数。

这可以通过[ObjectGraphBuilder](http://groovy.codehaus.org/ObjectGraphBuilder)完成，还是应该与地图和列表结合使用？
这是如何以“常规方式”完成的？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T09:00:06.327

Groovy 与否，我是按照以下方式完成的，请提供更好的答案，我会接受！

首先，我构建以下结构：

```
Map packages = new LinkedHashMap()  

class Package {
    String name
    Map functions = [:]
}

class Function {
    String name
    String returnType
    boolean isFunction = false
    Map parameters = [:]
}

class Parameter {
    String name
    String dataType
    String inOut
} 
```

然后我读了

```
sql.eachRow("""\
    select PACKAGE_NAME, OBJECT_NAME, POSITION, ARGUMENT_NAME, DATA_TYPE, IN_OUT
    from USER_ARGUMENTS
    order by PACKAGE_NAME, OBJECT_NAME, POSITION""")
{
    // create or get package
    def thePackage = packages[it.PACKAGE_NAME ?: '']
    if (thePackage == null) {
        thePackage = new Package(name : it.PACKAGE_NAME ?: '')
        packages[it.PACKAGE_NAME ?: ''] = thePackage
    }

    // create or get function
    def theFunction = thePackage.functions[it.OBJECT_NAME ?: '']
    if (theFunction == null) {
        theFunction = new Function(name: it.OBJECT_NAME ?: '')
        thePackage.functions[it.OBJECT_NAME ?: ''] = theFunction
    }

    // Position 0 is the return value
    if (it.POSITION == 0) {
        theFunction.isFunction = true
        theFunction.returnType = it.DATA_TYPE
    }
    else {
        // create the argument 
        def theParameter = new Parameter(
            name: it.ARGUMENT_NAME, dataType: it.DATA_TYPE, inOut: it.IN_OUT)
        theFunction.parameters[it.ARGUMENT_NAME ?: ''] = theParameter
    }
} 
```

# cuda - Cuda __syncthreads 未定义。没有它-> 随机结果

> ID：13844624
> 
> 赞同：1
> 
> 时间：2012-12-12T16:51:08.330
> 
> 标签：cuda, sync

我是 cuda 的新手，我有一个问题。我想对我的线程进行同步，所以我尝试使用同步线程。问题是 Visual Studio 2010 说：标识符 __syncthreads() 未定义...顺便说一下，我正在使用 cuda 4.2。所以我决定改用 cudaDeviceSynchronize() 并从主机调用它。我的代码类似于上面的代码（我只向您发送重要部分）：

```
__global__ void sum( float avg[]){
  avg[0]+=1;
  avg[1]+=2;
}
int main(){
  float avg[2];
  float *devAvg;
  cudaError_t cudaStatus;
  size_t size=sizeof(unsigned char)*2;
  cudaStatus = cudaMalloc((void**)&devAvg, size2);
  if (cudaStatus != cudaSuccess) {
    fprintf(stderr, "cudaMalloc 2 failed!");
    return -1;
  }
  avg[0]=0;
  avg[1]=0;
  cudaStatus = cudaMemcpy(devAvg,avg, size, cudaMemcpyHostToDevice);
  if (cudaStatus != cudaSuccess) {
    fprintf(stderr, "cudaMemcpy failed!");
    return -1;
  }
  dim3 nblocks(40,40);
  dim3 nthreads(20,20);
  sum<<<nblocks,nthreads,msBytes>>>(devAvg);
  cudaStatus = cudaDeviceSynchronize();
  if (cudaStatus != cudaSuccess) {
      fprintf(stderr, "cudaDeviceSynchronize returned error code %d after launching addKernel!\n", cudaStatus);
  }

  cudaStatus = cudaMemcpy(avg,devAvg,size,cudaMemcpyDeviceToHost);
  if (cudaStatus != cudaSuccess) {
      fprintf(stderr, "cudaMemcpy Device to Host failed!");
      return -1;}
  cout<<"avg[0]="avg[0]<<" avg[1]="<<avg[1]<<endl;
  cudaFree devAvg;
  return 0;
  } 
```

我认为结果应该是 avg[0]=640.000 avg[1]=1.280.000

但不仅我的结果不同（这可能是溢出问题）而且它们并不稳定。例如，对于三种不同的执行，结果是：

平均[0]=3041 平均[1]=6604

平均[0]=3015 平均[1]=6578

平均[0]=3047 平均[1]=6600

那么我在这里做错了什么？是同步问题吗？为什么我不能使用 __syncthreads() 还是竞争条件的问题？

此外，对于 __syncthreads() 问题，它附带我编写的任何代码。即使是最简单的：

```
#include "cuda_runtime.h"
#include "device_launch_parameters.h"
#include <stdio.h>
#include <Windows.h>

// Kernel that executes on the CUDA device
__global__ void square_array(float *a, int N)
{
  int idx = blockIdx.x * blockDim.x + threadIdx.x;
  if (idx<N) a[idx] = a[idx] * a[idx];
  __syncthreads();
}

// main routine that executes on the host
int main(void)
{
  float *a_h, *a_d;  // Pointer to host & device arrays
  const int N = 10;  // Number of elements in arrays
  size_t size = N * sizeof(float);
  a_h = (float *)malloc(size);        // Allocate array on host
  cudaMalloc((void **) &a_d, size);   // Allocate array on device
  // Initialize host array and copy it to CUDA device
  for (int i=0; i<N; i++) a_h[i] = (float)i;
  cudaMemcpy(a_d, a_h, size, cudaMemcpyHostToDevice);
  // Do calculation on device:
  int block_size = 4;
  int n_blocks = N/block_size + (N%block_size == 0 ? 0:1);
  square_array <<< n_blocks, block_size >>> (a_d, N);
  // Retrieve result from device and store it in host array
  cudaMemcpy(a_h, a_d, sizeof(float)*N, cudaMemcpyDeviceToHost);
  // Print results
  for (int i=0; i<N; i++) printf("%d %f\n", i, a_h[i]);
  // Cleanup
  free(a_h); cudaFree(a_d);
      return 0;
} 
```

它是这样说的：错误：标识符“__syncthreads（）”未定义

有趣的是，即使使用 4.2 CUDA SDK 附带的示例代码，也会发生同样的事情......也许是更普遍的错误，因为 SDK 示例中有更多的函数被认为是未定义的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T17:08:42.080

您所有的线程块都写入相同的两个位置。使其正常工作的唯一方法是使用原子操作。否则，线程读取该位置、添加到该位置并将结果“同时”写回该位置的结果是未定义的。

如果你重写你的内核如下：

```
__global__ void sum( float avg[]){
   atomicAdd(&(avg[0]),1);
   atomicAdd(&(avg[1]),2);
} 
```

它应该可以解决您所看到的问题。

要回答有关 __syncthreads() 的问题，我需要查看导致编译器错误的确切代码。如果你发布，我会更新我的答案。在此内核中插入 __syncthreads() 调用应该没有问题，尽管它不会解决您看到的问题。

您可能希望查看 C 编程指南的[原子操作](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#atomic-functions)部分。

请注意，使用原子通常会导致您的代码运行速度变慢，因此应谨慎使用它们。然而，对于这个学习练习，它应该为您解决问题。

另请注意，您发布的代码编译不干净，有许多缺失的定义，以及您的代码的各种其他问题。但是由于您要发布结果，我假设您有这个工作的某个版本，即使您没有发布它。因此，我没有发现您发布的代码的所有问题。

这是与您的代码相似的代码，修复了所有各种编码问题，它似乎对我有用：

```
#include <stdio.h>
#include <iostream>

#define msBytes 0

__global__ void sum( float avg[]){
  atomicAdd(&(avg[0]),1);
  atomicAdd(&(avg[1]),2);
}
int main(){
  float avg[2];
  float *devAvg;
  cudaError_t cudaStatus;
  size_t size=sizeof(float)*2;
  cudaStatus = cudaMalloc((void**)&devAvg, size);
  if (cudaStatus != cudaSuccess) {
    fprintf(stderr, "cudaMalloc 2 failed!");
    return -1;
  }
  avg[0]=0;
  avg[1]=0;
  cudaStatus = cudaMemcpy(devAvg,avg, size, cudaMemcpyHostToDevice);
  if (cudaStatus != cudaSuccess) {
    fprintf(stderr, "cudaMemcpy failed!");
    return -1;
  }
  dim3 nblocks(40,40);
  dim3 nthreads(20,20);
  sum<<<nblocks,nthreads,msBytes>>>(devAvg);
  cudaStatus = cudaDeviceSynchronize();
  if (cudaStatus != cudaSuccess) {
      fprintf(stderr, "cudaDeviceSynchronize returned error code %d after launching addKernel!\n", cudaStatus);
  }

  cudaStatus = cudaMemcpy(avg,devAvg,size,cudaMemcpyDeviceToHost);
  if (cudaStatus != cudaSuccess) {
      fprintf(stderr, "cudaMemcpy Device to Host failed!");
      return -1;}
  std::cout<<"avg[0]="<<avg[0]<<" avg[1]="<<avg[1]<<std::endl;
  cudaFree(devAvg);
  return 0;
  } 
```

当我运行它时，我得到以下输出：

```
avg[0]=640000 avg[1]=1.28e+06 
```

另请注意，要`atomicAdd`在 上使用`float`，必须具有计算能力 2.0 或更好的设备（并通过编译器开关，例如`-arch=sm_20`为那种设备进行编译）。如果您有较早的设备（计算能力 1.x），那么您可以创建一个类似的程序，将 avg[] 定义为`int`而不是`float`. 或者，如果您愿意，您可以创建自己的 atomicAdd __ device__ 函数，该函数可在 cc 1.x 设备上使用，如此处以[“](http://docs.nvidia.com/cuda/cuda-c-programming-guide/index.html#atomic-functions)注意，任何原子操作都可以基于 atomicCAS() （比较和交换）。 ”。

# jquery - Check Resize Only On Completion

> ID：13844627
> 
> 赞同：0
> 
> 时间：2012-12-12T16:51:19.943
> 
> 标签：jquery, events, listener, responsive-design

In developing a navigation menu with very specific design details, I am using this to check the window size and append some code after selected elements.

```
$(document).ready(function() {
// Optimalisation: Store the references outside the event handler:
var $window = $(window);

function checkWidth() {
    var windowsize = $window.width();
    if (windowsize >= 768) {
        //if the window is greater than 440px wide then turn on jScrollPane..
        $('nav.dropdowns ul.patient>li:nth-child(4n+5)').after('<div class="clear"></div>');
    }
    else if (windowsize <= 767) {
        //if the window is greater than 440px wide then turn on jScrollPane..
        $('nav.dropdowns ul.patient>li:nth-child(3n+4)').after('<div class="clear"></div>');
    }
}
// Execute on load
checkWidth();
// Bind event listener
$(window).resize(checkWidth);
}); 
```

The problem is that it keeps firing, which appends my code endlessly. I can easily solve this by removing the event listener. This works great is a window is loaded as it's final size. But in terms of fluid responsiveness, it fails as the event only first on load and not anytime after that. I have looked at a thousand other scripts, but have found no way to prevent the event from firing over and over again that I can actually get working.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T21:47:44.683

如果您只想不过度触发该功能，您可以使用`setTimeout`and `clearTimeout`。尝试这样的事情：

```
$(document).ready(function() {
    // Optimalisation: Store the references outside the event handler:
    var $window = $(window);

    function checkWidth() {
        var windowsize = $window.width();
        if (windowsize >= 768) {
            //if the window is greater than 440px wide then turn on jScrollPane..
            $('nav.dropdowns ul.patient>li:nth-child(4n+5)').after('<div class="clear"></div>');
        }
        else if (windowsize <= 767) {
            //if the window is greater than 440px wide then turn on jScrollPane..
            $('nav.dropdowns ul.patient>li:nth-child(3n+4)').after('<div class="clear"></div>');
        }
    }

    var timeoutId;
    function resizeEvent(){
        // 'reset' the timeout each fire
        clearTimeout(timeoutId);
        // save reference to the timeout delay in 'timeoutId'.  10ms delay
        timeoutId = setTimeout(checkWidth, 10);
    }

    // Execute on load
    checkWidth();
    // Bind event listener
    $(window).resize(resizeEvent);
}); 
```

这将持续触发`resizeEvent()`，但 10ms 延迟将阻止`checkWidth()`持续运行。

**注意：**这是您的问题的解决方案，但可能不是最佳解决方案。你应该尽可能多地实现`CSS`

# wpf - When does WPF decide to requery commands whether they can execute?

> ID：13844630
> 
> 赞同：4
> 
> 时间：2012-12-12T16:51:33.543
> 
> 标签：wpf, command

When does WPF requery commands whether they can execute? Debugger reports it happens quite often. But what is the exact set of conditions?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-30T21:35:19.210

它的 TL;DR 版本是当窗口上发生某些输入事件时调用 CanExecute 方法。主要有键盘和鼠标事件。

因此，无论何时有人单击或按下某个键， CommandManager 都会使**所有**命令无效（通过引发[CommandManager.RequerySuggested](https://msdn.microsoft.com/en-us/library/system.windows.input.commandmanager.requerysuggested.aspx)事件）。这就是保持 CanExecute 方法快速运行很重要的原因。

也可以通过创建一个`ICommand`不对`CanExecuteChanged`事件使用 CommandManager 的自定义实现来自己处理这个问题。

# c# - 在 WPF RichTextBox 的每一行中的第 60 个字符之后插入一个“返回”

> ID：13844636
> 
> 赞同：0
> 
> 时间：2012-12-12T16:51:48.203
> 
> 标签：c#, .net, wpf, richtextbox

我的自定义 RichTextBox 控件有一些问题。

RichTextBox 似乎没有任何“线条”集合的概念。但我需要逐行管理文本。

有没有办法获取和更新 RichTextBox 中的一行文本？

**我要进行的确切方案是查看 RichTextBox 中的每一行，如果该行有超过 60 个字符，则在第 60 个字符`Environment.NewLine`之后插入一个。**

更新：我发现您可以使用以下代码获取一行：

```
richTextBox.Document.ContentStart.GetLineStartPosition(lineNumber); 
```

**但是我仍然没有办法更新一行。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:22:48.323

您只需遍历行，检查长度，如果长度超过 60，则添加一个新行字符。对行中的所有字符重复，并返回结果。

下面是代码的概要

```
private void richTextBox1_KeyUp(object sender, KeyEventArgs e)
{
    TextPointer line = richTextBox1.CaretPosition.GetLineStartPosition(0);
    if (line.GetOffsetToPosition(richTextBox1.CaretPosition) > 60)
    {
        line.GetPositionAtOffset(60, LogicalDirection.Forward).InsertLineBreak();
    }
} 
```

如果您正在运行一次格式化，上面的代码很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T16:12:21.813

如果当前行太长，此代码将添加一个新行。（这只适用于当前行，因此需要适应更多行进行粘贴。）

```
 private const int lineLimit = 60;
    private static void BlockCurrentToNotExceedMaxChars(TextPointer currentLocation)
    {
        var currentStart = currentLocation.GetLineStartPosition(0);
        var nextStart = currentLocation.GetLineStartPosition(1);
        var currentEnd = (nextStart != null ? nextStart : currentLocation.DocumentEnd).GetInsertionPosition(LogicalDirection.Backward);

        TextRange currentLine = new TextRange(currentStart, currentEnd);
        if (currentLine.Text.Trim().Length > lineLimit)
        {
            currentStart.GetPositionAtOffset(lineLimit + 1).InsertLineBreak();
        }
    } 
```

# asp.net-mvc - ASP.NET MVC WebApi - 不公开导航属性

> ID：13844640
> 
> 赞同：1
> 
> 时间：2012-12-12T16:51:53.887
> 
> 标签：asp.net-mvc, entity-framework, asp.net-web-api

我有一个 WebApi 项目，我正在使用实体框架绑定到我的数据库。我的大多数模型都有导航属性，当我从控制器返回它们时，它们会出现在 JSON 字符串中。可以不曝光吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T19:20:39.803

您应该考虑使用视图模型并为它们提供服务，而不是您的模型。为了帮助您，您可以使用[AutoMapper](http://automapper.org/)等映射库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:59:01.037

在各种 JSON 序列化器中，您可以在属性上设置一些属性以防止它们被序列化。

另一种选择是创建 DTO，其唯一目的是将它们用作 WebAPI 的返回类型。更多工作，但您将完全控制发送的内容。

# php - Javascript：检索 window.open innerHTML

> ID：13844642
> 
> 赞同：0
> 
> 时间：2012-12-12T16:52:00.253
> 
> 标签：php, javascript, ajax, cross-domain

我想首先指出，我知道这可能由于跨域限制而失败 - 只是想真正确认一下。

我有一个用 javascript 打开的窗口。然后，我使用 Ajax 请求来拉取站点的内容并将其（包括在基本 href 链接中以强制其相对工作）回显到新窗口中。

我的想法是我可以抓取 JS 呈现的 HTML 以查看该网站是否真的在运行我们的横幅（我们怀疑它们不是！）

我用这个打开窗口：

```
msaScrape.msaWin = window.open ('null.php', 'msa_weed', "scrollbars=yes,toolbar=no,status=no,width=1000,height=1000"); 
```

这将使用目标页面的内容加载新窗口，并正确加载和呈现 JS 触发的内容（横幅是后面的位）。

我已经尝试过 msaScrape.msaWin.document.body、msaScrape.msaWin.document.body.innerHTML 和许多其他组合，但没有一个可以让我返回完全呈现的 HTML。

当我在 Ajax 请求的原始缓冲区上运行测试时，我可以很好地检测到嵌入的字符串 - 但由于横幅是通过 JS 加载的，所以我需要先将它们加载到 DOM 中，然后才能在 HTML 中搜索横幅 ID。

我正在尝试做的事情是可能的，还是我正在尝试做一些无法完成的事情？我觉得很奇怪我可以写入这个弹出窗口，并且我可以扫描（并在其中找到匹配项）原始的、未渲染的缓冲区。一旦我允许弹出页面呈现它掉下来的 HTML，我就无法从源头获取。

如果需要，我可以发布我正在尝试进行抓取和匹配的整个（小）JS 位 - 只需与客户核实他们是否介意我这样做（它是针对私人客户并且不想让他们不安！）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:23:53.313

以下是我如何扫描远程加载窗口的 innerHTML：

```
 setTimeout(function(){
                window.parent.document.getElementById('stopScraper').focus();
                if(window.parent.msaScrape.msaWin.document.body.innerHTML.match(window.parent.msaScrape.msaTest)){
                    window.parent.msaScrape.msaHits++;
                }
            }, 1000);
            window.parent.focus(); 
```

stopScraper 只是一个表单输入，它允许我将焦点返回给调用页面。

问题是由于弹出窗口没有足够的时间来呈现其 Dom （另外，当我使用 PHP 将内容作为字符串抓取时，我必须注入一个 base href="http://www.example.com" 以确保当我将字符串回显到 null.php 时，路径有效）

我运行它，请求之间的间隔为 8.5 秒，然后在尝试读取页内 JS 文件加载的内容之前，再给弹出窗口一秒钟以完全加载其 Dom。

实时跨域测试的最终结果：

Requests: 4024 Scrapes: 4024 (没有错过任何一个节拍！) 点击数: 147 (在 Dom 中寻找一个特定的横幅)

如果人们想要更多关于我是如何做到这一点的解释，那么最好给我发电子邮件，然后将整个引擎发送给你——它有一个内置的测试模式，可以在你在其他域上尝试之前对其进行测试！虽然有几个文件 - 加上我不太确定我所做的事情的合法性所以不认为我应该公开整个答案！

简而言之，如果您使用 PHP file_get_contents 通过同一域加载您的内容，请添加基本 href（如果缺少），作为 null.php 的内容回显（使用 javascript 作为弹出窗口打开此窗口，如顶部问题所示） -此处的代码会将您的测试字符串与*完全加载的 Dom进行匹配*

我想在这一点上强调，我需要测试所有内容（包括由外部 JS 文件加载的横幅），因此必须在浏览器中呈现原始 HTML 以导致 JS 触发。我也看过 PhantomJS 但最终不需要它！设法用JS解决了这个问题:)

# java - 我需要一种优雅的方式来从处理中排除特定的单词

> ID：13844643
> 
> 赞同：1
> 
> 时间：2012-12-12T16:52:02.127
> 
> 标签：java, algorithm, file-io

我正在编写一种算法来从文档文本中提取可能的关键字。我想计算单词的实例并将前 5 个作为关键字。显然，我想排除“无关紧要”的词，以免每个文档都以“the”和“and”作为主要关键字出现。

这是我成功用于测试的策略：

```
exclusions = new ArrayList<String>();
exclusions.add("a","and","the","or"); 
```

现在我想做一个真实的测试，我的排除列表接近 200 字长，我希望能够做这样的事情：

```
exclusions = new ArrayList<String>();
exclusions.add(each word in foo.txt); 
```

从长远来看，出于显而易见的原因，需要维护一个外部列表（而不是嵌入在我的代码中的列表）。使用 Java 中的所有文件读/写方法，我相当肯定可以做到这一点，但是我的搜索结果是空的……我知道我必须搜索错误的关键字。有人知道在处理中包含外部列表的优雅方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:55:39.843

您可以使用 a从文件`FileReader`中读取`String`s 并将它们添加到`ArrayList`.

```
private List<String> createExculsions(String file) throws IOException {
   BufferedReader reader = new BufferedReader(new FileReader(file));
   String word = null;
   List<String> exclusions = new ArrayList<String>();

   while((word = reader.readLine()) != null) {
      exclusions.add(word);
   }

   return exclusions;
} 
```

然后您可以使用`List<String> exclusions = createExclusions("exclusions.txt");`创建列表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:57:07.833

这不会立即解决您开出的解决方案，但可能会为您提供另一种可能更好的途径。

与其事先决定什么是无用的，你可以计算所有东西，然后过滤掉你认为无关紧要的东西（从信息承载的角度来看），因为它存在压倒性的存在。它类似于信号处理中用于消除噪声的[低通滤波器](http://en.wikipedia.org/wiki/Low-pass_filter)。

简而言之，计算一切。然后决定如果某些东西出现的频率高于您设置的阈值（您必须从实验中确定该阈值是多少，例如所有单词中有 5% 是“the”，这意味着它不携带信息）。

如果你这样做，它甚至适用于外语。

这只是我的两分钱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T16:59:17.550

Google Guava 库包含许多有用的方法来简化日常任务。您可以使用其中之一将文件内容读取为字符串并按空格字符拆分：

```
String contents = Files.toString(new File("foo.txt"), Charset.defaultCharset());
List<String> exclusions = Lists.newArrayList(contents.split("\\s")); 
```

Apache Commons IO 提供了类似的快捷方式：

```
String contents = FileUtils.readFileToString(new File("foo.txt"));
... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T17:00:17.757

不确定它是否优雅，但在这里我创建了一个简单的解决方案来检测语言或几年前从推文中删除噪音词：

*   [TweetDetector.java](https://github.com/karussell/Jetwick/blob/master/src/main/java/de/jetwick/tw/TweetDetector.java)
*   [JTweet.java](https://github.com/karussell/Jetwick/blob/master/src/main/java/de/jetwick/data/JTweet.java)使用[英语等数据](https://github.com/karussell/Jetwick/blob/master/src/main/java/de/jetwick/data/noise_words_en.txt)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T17:04:57.113

Commons-io 具有支持此功能的实用程序。包含 commons-io 作为依赖项，然后发出

```
File myFile = ...;
List<String> exclusions = FileUtils.readLines( myFile ); 
```

如所述： [http ://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html](http://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html)

这假设每个排除词都在一个新行上。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T17:07:23.467

从文件中读取非常简单。

```
import java.io.BufferedReader;
import java.io.File;
import java.io.FileReader;
import java.io.IOException;
import java.util.HashSet;

public class ExcludeExample {
    public static HashSet<String> readExclusions(File file) throws IOException{
        BufferedReader br = new BufferedReader(new FileReader(file));
        String line = "";
        HashSet<String> exclusions = new HashSet<String>();
        while ((line = br.readLine()) != null) {
            exclusions.add(line);
        }
        br.close();
        return exclusions;
    }

    public static void main(String[] args) throws IOException{
        File foo = new File("foo.txt");
        HashSet<String> exclusions = readExclusions(foo);
        System.out.println(exclusions.contains("the"));
        System.out.println(exclusions.contains("Java"));
    }
} 
```

foo.txt

```
the
a
and
or 
```

我使用了 HashSet 而不是 ArrayList，因为它的查找速度更快。

# appfabric - 数据库依赖的Appfabric缓存

> ID：13844648
> 
> 赞同：0
> 
> 时间：2012-12-12T16:52:19.807
> 
> 标签：appfabric

我们相信 AppFabric 缓存非常适合缓存要求。但是，我们还想实现某种数据库依赖，即缓存应该与后端数据库异步同步。read-through and write behind 功能似乎很有趣，谁能帮我们指出一个方向，我们如何利用这些功能来实现 appfabric 和数据库之间的自动同步行为？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T06:11:36.723

SqlDependency 可用于通知您的应用程序有关数据库中的修改。要使用它，您需要在数据库级别启用服务代理，请在实施此解决方案之前通过这些[限制](https://stackoverflow.com/questions/7588572/what-are-the-limitations-of-sqldependency)

```
using (SqlConnection connection = new SqlConnection(yourConnectionString))
{
    connection.Open();

    using (SqlCommand command = new SqlCommand(databaseSqlToBeMonitered, connection))
    {
       SqlDependency dependency = new SqlDependency(command);
       dependency.OnChange += new OnChangeEventHandler((a, b) =>
                                {
                    //Remove data from cache
                                });

       command.ExecuteReader().Close();
    }
} 
```

# sql-server-2008 - 如何使用 Management Studio 查看视图正在执行的操作

> ID：13844654
> 
> 赞同：0
> 
> 时间：2012-12-12T16:52:40.477
> 
> 标签：sql-server-2008

我的数据库上有一个视图。Management Studio 有没有办法查看该视图连接到哪些表和列？属性屏幕没有这方面的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:55:42.333

右键单击视图并选择“设计”或“脚本视图为 > 创建到 > 新查询编辑器窗口”

# asp.net-mvc - 带有 Kendo 树视图的 MVC - 远程数据 JSON 或 XML

> ID：13844655
> 
> 赞同：0
> 
> 时间：2012-12-12T16:52:42.813
> 
> 标签：asp.net-mvc, asp.net-mvc-4, treeview, kendo-ui

我正在尝试创建一个从我的控制器（PropertyController）填充的 Kendo 树视图。

我坚持的部分是如何在控制器中格式化我的数据。如何创建深度三个项目的树视图并将其传递给我的视图以显示在树视图中？

```
@(Html.Kendo().TreeView()
                .Name("treeview")
                .Events(events => events
                                        .DragStart("PartnershipPage.OnDragStart")
                                        .Drop("PartnershipPage.OnDrop")
                                        .DragEnd("PartnershipPage.OnDragEnd")
                  )
                  .HighlightPath(true)
                  .DragAndDrop(true)
                  .DataSource(dataSource => dataSource
                    .Read(read => read
                        .Action("Index","Tree")
                    )
                  )
            ) 
```

我已包含控制器以查看我是否正确执行此操作。到目前为止所发生的只是 JSON 作为文本显示在屏幕上。

控制器：

```
public ActionResult Index()
    {
        var org = new Entities();
        var eList = new List<Entity>();

        var entity1 = new Entity
            {
                Id = 1,
                Name = "LLC-A",
                parentId = 0
            };
        eList.Add(entity1);

        var entity2 = new Entity
        {
            Id = 2,
            Name = "LLC-B",
            parentId = 0
        };
        eList.Add(entity2);

        var entity3 = new Entity
        {
            Id = 1,
            Name = "LLC-C",
            parentId = 2
        };
        eList.Add(entity3);

        var entity4 = new Entity
        {
            Id = 1,
            Name = "LLC-D",
            parentId = 2
        };
        eList.Add(entity4);

        org.Entity = eList;

        var test = from x in org.Entity
                   where (x.Name != null)
                   select new
                       {
                           Id = x.Id,
                           Name = x.Name,
                           parentId = x.parentId
                       };
        ;

        return Json(test, JsonRequestBehavior.AllowGet);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:57:21.370

来自：[剑道网站](http://docs.kendoui.com/api/wrappers/aspnet-mvc/Kendo.Mvc.UI.Fluent/TreeViewBuilder)

```
<%= Html.Kendo().TreeView()
    .Name("TreeView")
    .BindTo(Model, mapping => mapping
    .For<Customer>(binding => binding
    .Children(c => c.Orders) // The "child" items will be bound to the the "Orders" property
    .ItemDataBound((item, c) => item.Text = c.ContactName) // Map "Customer" properties to TreeViewItem properties
    )
    .For<Order<(binding => binding
    .Children(o => null) // "Orders" do not have child objects so return "null"
    .ItemDataBound((item, o) => item.Text = o.OrderID.ToString()) // Map "Order" properties to TreeViewItem properties
    )
    )
    %> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-14T14:57:15.603

您可以将实体放入一个名为“myEntities”的列表中，然后将其从控制器返回到视图：

```
public ActionResult Index()
{
  var ents = getMyEntities(); // some method you have to return the list of your entities
  return ents;
} 
```

然后在您的视图中，您可以遍历模型中的所有实体：

```
@(Html.Kendo().TreeView()
  .Name("TreeView")
  .Items(treeview =>
           {
               foreach (var entity in Model)
               {
                   var entityName = entity.Name;
                   var children = entity.Children;

                   treeview.Add().Text(entityName ).Expanded(false).Items(branch =>
                                  {
                                      if (children != null)
                                      {
                                           foreach (var child in children)
                                           {
                                                branch.Add().Text(child);
                                           }
                                       }
                                   });
              }
         }
   )
   ) 
```

我使用了孩子，因为我发现它比父母更容易使用，所以我会将我的实体更改为这样的：

```
 var entity4 = new Entity
    {
        Id = 1,
        Name = "LLC-D",
        Children = <list of children names ... >
    }; 
```

你可以在这里看到我是怎么做的：[Populate KendoUI Treeview with RavenDB Documents](https://stackoverflow.com/questions/13848228/populate-kendoui-treeview-with-ravendb-documents/13879988#13879988)

希望这可以帮助。

* * *

编辑回应：如何显示孩子的孩子？

* * *

我遇到了与您描述的相同的问题（显示孩子的孩子）。以下是我在显示孩子的孩子的问题后的做法：

我使用了实体框架：

数据库上下文类：

```
public class EntityDBContext : DbContext
{
    public DbSet<MyEntity> Entities { get; set; }
} 
```

控制器：

```
public JsonResult EntitiesForTreeView(int? id)
    {
        // Here I am using EntityFramework
        var entitiesContext = new EntityDBContext();
        var myEntity= from e in entitiesContext.Entities
                      where (id.HasValue ? e.Parent == id : e.Parent == null)
                      select new
                                 {
                                     id = e.Id,
                                     Name = e.Name,
                                     hasChildren = e.Id
                                 };
        return Json(myEntity, JsonRequestBehavior.AllowGet);
    } 
```

和视图：

```
 @(Html.Kendo().TreeView()
      .Name("treeview")
      .DataTextField("Name")
      .LoadOnDemand(true)
      .HighlightPath(true)
      .DataSource(dataSource => dataSource
                                    .Read(read => read
                                    .Action("EntitiesForTreeView", "SiteMap")
                                    )
      )
      .Checkboxes(true)
    ) 
```

希望这可以帮助。抱歉，如果有一些愚蠢的事情 - 我只做了 3 个月的 Web 开发，所以如果需要，请取消标记为答案。让我知道我是否可以提供进一步的帮助。PS：我应该提一下，在实施上面显示的解决方案后，我注意到我的树上的节点都有“+”号......不管他们是否有孩子。如果您知道如何解决此问题，请告诉我:)

# jquery - 向下滑动菜单向下滑动但不向上滑动

> ID：13844665
> 
> 赞同：0
> 
> 时间：2012-12-12T16:53:03.330
> 
> 标签：jquery

我使用 jQuery 制作了一个下拉菜单

```
$(document).ready( function() {
    $('ul.menu li').mouseover( function() {
        $('ul', this).slideDown(200, function(){
        $('ul.menu li ul').mouseout( function() {
            $('ul', this).slideUp(200, function(){
                $(this).stop();
            });

        });
        });
    })
}); 
```

但是在我做鼠标悬停后它并没有隐藏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:43:15.327

我认为这是因为您在 mouseover 函数中绑定了 mouseout 函数。

尝试像这样修改它：

```
$(document).ready( function() {
    $('ul.menu li').mouseover(function() {
        $('ul', this).slideDown(200);
    });
    $('ul.menu li ul').mouseout( function() {
        $('ul', this).slideUp(200);
    });
}); 
```

# c++ - 如何在 C++/WinAPI 中通过网络适配器获取发送/接收的字节数

> ID：13844668
> 
> 赞同：3
> 
> 时间：2012-12-12T16:53:10.247
> 
> 标签：c++, windows, winapi

如何在 C++/WinAPI 中通过网络适配器获取发送/接收的字节数？

我的编程平台是 Windows。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T16:58:01.063

查看功能[`GetTcpStatistics`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366020.aspx)和相关功能（`GetUdpStatistics`等）。

再三考虑：[性能计数器](http://msdn.microsoft.com/en-us/library/windows/desktop/aa373088.aspx)可能会提供另一种更适合您需求的方法。这也可以通过 WMI ( [`Win32_PerfFormattedData_Tcpip_NetworkInterface`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394293.aspx)) 查询。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-01T15:21:47.303

如果您想像从“netstat -e”中获取信息，我建议使用[GetIfTable](http://msdn.microsoft.com/en-us/library/windows/desktop/aa365943%28v=vs.85%29.aspx)函数，它会返回带有[MIB_IFROW结构的表，该结构在](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366836%28v=vs.85%29.aspx)**dwOutOctets**和**dwInOctets**中保存有关输出/输入字节的信息。

# asp.net-web-api - Web API 参数过滤

> ID：13844670
> 
> 赞同：1
> 
> 时间：2012-12-12T16:53:16.277
> 
> 标签：asp.net-web-api

这一定很简单，而且我非常密集，但我找不到一个例子来帮助我弄清楚。我想通过通过参数传入的`tblAsset`项目来过滤我的项目列表。`assessmentId`我可以得到参数值，但我不确定如何编写查询。

我的模型是使用模型创建向导从现有数据库构建的。

谢谢你的帮助！

```
public IEnumerable<tblAsset> GettblAssets()
{
  NameValueCollection nvc = HttpUtility.ParseQueryString(Request.RequestUri.Query);
  var assessmentId = nvc["aid"];

  //limit the assets by assessmentId somehow and return
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:18:57.763

您可以在数据库返回的实例`.Where`上使用扩展方法：`IQueryable<tblAsset>`

```
public IEnumerable<tblAsset> GettblAssets()
{
    NameValueCollection nvc = HttpUtility.ParseQueryString(Request.RequestUri.Query);
    var assessmentId = nvc["aid"];

    // TODO: you might need to adjust the property names of your model accordingly
    // Also if the assessmentId property is an integer on your model type
    // you will need to parse the value you read from the request to an integer
    // using the int.Parse method
    return db.tblAsset.Where(a => a.assessmentId == assessmentId);
} 
```

# macos - NSOutLineViews 中的 NSTableViews

> ID：13844673
> 
> 赞同：0
> 
> 时间：2012-12-12T16:53:27.493
> 
> 标签：macos, cocoa, user-interface

如图所示，我需要用表格视图填充大纲视图。每个 nsoutlineview 节点只有一个子表视图。表视图的数量不是静态的。所以，我需要以编程方式实现 NSOutlineView。

![如图所示名为“Command”的大纲视图][1] ![在此处输入图像描述](../Images/d3d26c2679b51e5e035729c0593d5b44.png)

有人可以建议，如何继续要求？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:57:54.390

上面不是以表格视图作为子视图的大纲视图。它是通过使用“Xcode 菜单”和“文件菜单”的根节点作为根节点并将所有子节点作为叶子的 NSOutlineView 实现的。打开标题行（如果它是根节点，它就是标题行）就是这样。

# vb.net - 对于列表 byref 中的每个元素

> ID：13844674
> 
> 赞同：0
> 
> 时间：2012-12-12T16:53:33.827
> 
> 标签：vb.net, multithreading, visual-studio-2010

我有一个必须作为参数传递给线程的结构列表；列表中的每个元素一个。线程将循环直到结构中的布尔值变为真。

所以我做了：

```
 For Each ScaleElement In Scales
            Dim NewThread As New System.Threading.Thread(Sub() ScaleThread(ScaleElement))
            NewThread.Start()
        Next 
```

使用 ScaleElement 通过引用。但是，我有一个警告：“在 lambda 表达式中使用迭代变量可能会产生意想不到的结果”。警告是正确的，因为它似乎在同一个元素上运行线程。

如果我尝试：

```
 For Each ScaleElement In Scales
            Dim NewScale = ScaleElement
            Dim NewThread As New System.Threading.Thread(Sub() ScaleThread(NewScale))
            NewThread.Start()
        Next 
```

它工作正常，但由于“NewScale”是一个不同的元素，当我尝试设置打破列表元素中循环的条件时，它当然不起作用。

规模结构：

```
Public Structure ScaleStruct
    Dim Key As String
    Public Scale
    Dim Database As String
    Dim Table As String
    Dim Field As String
    Dim Keyname As String
    Dim Interval As Integer
    Dim Insert As Boolean
    Dim Format As String
    Public Abort As Boolean
    Dim FailCount As Integer
End Structure 
```

scale 变量被设置（在配置文件读取）到读取比例的类。

Scales 是一个“Public Sc​​ales As New List(Of ScaleStruct)”，因此，当我想停止线程时，我想在结构中使用布尔值（Abort）。

然后，线程是一个循环：

```
Private Sub ScaleThread(ByRef Tscale As ScaleStruct)
        Do Until Tscale.Abort
            ...
        Loop
End Sub 
```

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:59:51.313

你的意思是`ScaleElement`有一个布尔属性来确定是否继续？如果是这样，听起来最简单的方法是将其设为类而不是结构。（老实说，*听起来*无论如何它会更适合作为一个班级。）

# sql - 使用列名参数“排序依据”

> ID：13844678
> 
> 赞同：30
> 
> 时间：2012-12-12T16:53:40.927
> 
> 标签：sql, sql-server, visual-studio, parameters, sql-order-by

我们希望在使用 Visual Studio 数据集设计器创建的查询或存储过程的“排序依据”子句中使用一个参数。

例子：

```
 FROM TableName
 WHERE (Forename LIKE '%' + @SearchValue + '%') OR
       (Surname LIKE '%' + @SearchValue + '%') OR
       (@SearchValue = 'ALL')
ORDER BY @OrderByColumn 
```

显示此错误：

```
Variables are only allowed when ordering by an expression referencing 
a column name. 
```

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-12-12T18:29:19.890

你应该能够做这样的事情：

```
SELECT *
FROM
    TableName
WHERE
    (Forename LIKE '%' + @SearchValue + '%') OR
    (Surname LIKE '%' + @SearchValue + '%') OR
    (@SearchValue = 'ALL')
ORDER BY 
    CASE @OrderByColumn
    WHEN 1 THEN Forename
    WHEN 2 THEN Surname
    END; 
```

*   分配 1 以`@OrderByColumn`对 进行排序`Forename`。
*   分配 2 进行排序`Surname`。
*   等等......您可以将此方案扩展到任意数量的列。

* * *

不过要注意性能。这些类型的结构可能会干扰查询优化器找到最佳执行计划的能力。例如，即使`Forename`被索引覆盖，查询可能仍然需要全排序，而不是按顺序遍历索引。

如果是这种情况，并且您无法忍受性能影响，则可能需要为每个可能的排序顺序提供单独的查询版本，从而使客户端的事情变得相当复杂。

# java - 什么可能导致 http://localhost:9000 无法在 Windows 中测试 Java Play？

> ID：13844681
> 
> 赞同：0
> 
> 时间：2012-12-12T16:53:46.663
> 
> 标签：java, playframework, playframework-1.x

我是[Java Play 的新手！](http://www.playframework.org)框架并使用它为客户（在所有机器上使用它）开发 RESTful 服务。我已将 1.2.3 版安装到我的 Windows 开发机器上。 `play`在路径中。

我已经成功地按照[“我的第一个播放应用程序”教程](http://www.playframework.org/documentation/1.2.3/firstapp)中的说明操作，直到它建议打开浏览器到`http://localhost:9000/`. 浏览器只是坐在那里表示“忙碌”。

有趣的是，当我打开它*而不*先调用浏览器时，浏览器也只是坐在那里`play run`，这让我想知道是否有其他东西占用了端口 9000。

*   如何确定是否有东西占用了 9000 端口？
*   如果我不能阻止这种情况，有没有一种简单的方法来获得 Play！使用其他端口？
*   如果不是这样，那还能是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:04:03.230

1.  要检查 Windows 上正在使用的端口，请尝试`netstat -an`.
2.  其他人已经回答了如何让 Playframework 使用不同的端口，这是答案：[https ://stackoverflow.com/a/8206747/463196](https://stackoverflow.com/a/8206747/463196)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:04:11.887

最快的方法就是找到下一个可用端口，事实上的端口 9000 对 Play 没有特殊意义。（也正如 Thorbjørn 在评论中所写的，检查是否没有防火墙阻止连接）

检查[配置参考](http://www.playframework.org/documentation/1.2.5/configuration)以查看如何更改默认端口，只需将其添加到您的 conf/application.conf 文件中：

```
http.port=10123 
```

另一方面，我建议你转向当前稳定版本的 Play - 2.0.4，目前 1.2.x 分支没有积极开发，它处于“维护状态”，这意味着只会添加重要的错误修复.

# java - 如何让 myBatis 更新语句在 Java Spring 应用程序中提交？

> ID：13844683
> 
> 赞同：1
> 
> 时间：2012-12-12T16:53:57.417
> 
> 标签：java, spring, commit, mybatis, maven-jetty-plugin

我在 jetty-maven 插件中运行 Java Spring 应用程序。当我调用 myBatis 插入语句时，该语句会自动提交。但是，当我调用更新时，该语句未提交。根据 myBatis 文档（http://www.mybatis.org/spring/transactions.html）：

*您不能通过 Spring 托管的 SqlSession 调用 SqlSession.commit()、SqlSession.rollback() 或 SqlSession.close()。*

如何将我的应用程序配置为在 myBatis 更新语句上自动提交？

我启用了日志记录。以下是更新日志中的状态：

persistence.MyMapper.updateMyItem] - ooo 使用连接 [net.sourceforge.jtds.jdbc.ConnectionJDBC3@af7eaf] 2012-12-12 17:20:31,684 调试 [com.persistence.MyMapper.updateMyItem] - ==> 准备：更新我的表设置日期=？哪里id=？2012-12-12 17:20:31,700 调试 [com.persistence.MyMapper.updateMyItem] - ==> 参数：2012-11-26 00:00:00.0（时间戳），0（整数）2012-12-12 17 :20:31,700 调试 [org.mybatis.spring.SqlSessionUtils] - 关闭非事务性 SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e86f9] 2012-12-12 17:20:31,700 调试 [org.springframework. jdbc.datasource.DataSourceUtils] - 返回到 DataSource 的 JDBC 连接 updateMyItem] - ==> 准备：更新 myTable 设置日期=？哪里id=？2012-12-12 17:20:31,700 调试 [com.persistence.MyMapper.updateMyItem] - ==> 参数：2012-11-26 00:00:00.0（时间戳），0（整数）2012-12-12 17 :20:31,700 调试 [org.mybatis.spring.SqlSessionUtils] - 关闭非事务性 SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e86f9] 2012-12-12 17:20:31,700 调试 [org.springframework. jdbc.datasource.DataSourceUtils] - 返回到 DataSource 的 JDBC 连接 updateMyItem] - ==> 准备：更新 myTable 设置日期=？哪里id=？2012-12-12 17:20:31,700 调试 [com.persistence.MyMapper.updateMyItem] - ==> 参数：2012-11-26 00:00:00.0（时间戳），0（整数）2012-12-12 17 :20:31,700 调试 [org.mybatis.spring.SqlSessionUtils] - 关闭非事务性 SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@19e86f9] 2012-12-12 17:20:31,700 调试 [org.springframework. jdbc.datasource.DataSourceUtils] - 返回到 DataSource 的 JDBC 连接

插入时，日志为：

2012-12-12 16:35:53,932 调试 [org.mybatis.spring.SqlSessionUtils] - 创建一个新的 SqlSession 2012-12-12 16:35:53,932 调试 [org.mybatis.spring.SqlSessionUtils] - SqlSession [org. apache.ibatis.session.defaults.DefaultSqlSession@22da8f] 未注册同步，因为同步未激活 2012-12-12 16:35:53,932 调试 [org.springframework.jdbc.datasource.DataSourceUtils] - 从数据源获取 JDBC 连接2012-12-12 16:35:53,932 调试 [org.springframework.jdbc.datasource.DriverManagerDataSource] - 创建新的 JDBC DriverManager 连接到 [jdbc:jtds:sqlserver://test/test] 2012-12-12 16:35 :53,932 DEBUG [org.mybatis.spring.transaction.SpringManagedTransaction] - JDBC 连接 [net.sourceforge.jtds.jdbc.ConnectionJDBC3@3af3cb] 将不会由 Spring 2012-12-12 16:35:53,932 DEBUG [com. .persistence.MyMapper.insertMyItem] - ooo 使用连接 [net.sourceforge.jtds.jdbc.ConnectionJDBC3@3af3cb] 2012-12-12 16:35:53,932 调试 [com.persistence.MyMapper.insertMyItem] - ==> 准备：插入进入 myTable (id,date) 值 (?, ?) 2012-12-12 16:35:53,932 DEBUG [com.persistence.MyMapper.insertMyItem] - ==> 参数：5(Integer), 2012-11-26 00 ：00:00.0（时间戳）2012-12-12 16:35:53,932 调试 [org.mybatis.spring.SqlSessionUtils] - 关闭非事务性 SqlSession [org.apache.ibatis.session.defaults.DefaultSqlSession@22da8f] 2012-12 -12 16:35:53,932 调试 [org.springframework.jdbc.datasource.DataSourceUtils] - 将 JDBC 连接返回到数据源insertMyItem] - ==> 准备：插入 myTable (id,date) 值 (?, ?) 2012-12-12 16:35:53,932 DEBUG [com.persistence.MyMapper.insertMyItem] - ==> 参数：5(整数），2012-11-26 00:00:00.0（时间戳）2012-12-12 16:35:53,932 调试 [org.mybatis.spring.SqlSessionUtils] - 关闭非事务性 SqlSession [org.apache.ibatis.session。 defaults.DefaultSqlSession@22da8f] 2012-12-12 16:35:53,932 调试 [org.springframework.jdbc.datasource.DataSourceUtils] - 将 JDBC 连接返回到 DataSourceinsertMyItem] - ==> 准备：插入 myTable (id,date) 值 (?, ?) 2012-12-12 16:35:53,932 DEBUG [com.persistence.MyMapper.insertMyItem] - ==> 参数：5(整数），2012-11-26 00:00:00.0（时间戳）2012-12-12 16:35:53,932 调试 [org.mybatis.spring.SqlSessionUtils] - 关闭非事务性 SqlSession [org.apache.ibatis.session。 defaults.DefaultSqlSession@22da8f] 2012-12-12 16:35:53,932 调试 [org.springframework.jdbc.datasource.DataSourceUtils] - 将 JDBC 连接返回到 DataSourcedefaults.DefaultSqlSession@22da8f] 2012-12-12 16:35:53,932 调试 [org.springframework.jdbc.datasource.DataSourceUtils] - 将 JDBC 连接返回到 DataSourcedefaults.DefaultSqlSession@22da8f] 2012-12-12 16:35:53,932 调试 [org.springframework.jdbc.datasource.DataSourceUtils] - 将 JDBC 连接返回到 DataSource

插入和更新日志语句似乎指示相同的基本步骤。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T00:37:54.027

经过一番研究，我发现这是一个客户问题。它总是在更新语句中为 id 传递一个 0。记录的ids > 0。一路上，我配置了spring txn管理。就在那时，我观察到了同样的行为，并意识到它一定不是服务器端配置问题。很抱歉在发布之前没有抓住它。

# css - iPad裁剪问题

> ID：13844684
> 
> 赞同：0
> 
> 时间：2012-12-12T16:53:58.913
> 
> 标签：css, ipad

我开发了我的网站宽度为 1020 像素。

但是，当我尝试从 iPad 访问该网站时，它会从右侧裁剪该网站。

我怎样才能使它缩小并显示整个网站？

我尝试了不同的元视口标签，但没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:54:59.757

iPad 3（和其他 2 倍像素密度设备）的视口行为异常。您是否尝试将视口设置为 1020 像素？

像这样的东西应该工作：

```
<meta name="viewport" content="width=1020px"/> 
```

# google-chrome - 如何在设置 > 扩展中显示打包的 chrome 应用程序

> ID：13844686
> 
> 赞同：1
> 
> 时间：2012-12-12T16:54:05.293
> 
> 标签：google-chrome, google-chrome-extension

我制作了一些 chrome 应用程序并将它们发布到 chrome 商店，当我安装它们时，它们就会出现在我的`chrome://chrome/extensions/`页面中。当我将应用程序打包到 crx 文件中并手动安装时，我的应用程序工作正常并显示在新标签页上，但不显示在`chrome://chrome/extensions/`页面上。我是否在清单文件中遗漏了某些内容，或者只会在扩展页面上显示商店应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T17:56:48.380

让正在开发的应用程序显示在扩展程序页面中的正确方法是从扩展程序页面将它们作为“加载打包扩展程序”加载。您只需将其指向应用程序的父目录，然后在进行更改时，您只需保存并刷新您的应用程序。当您准备好发布时，只需将其压缩并上传到商店。

除非您在 chrome 网上商店之外分发应用程序，否则无需手动打包您的应用程序。

# vb.net - 如何序列化我作为参数在 Windows 应用商店应用程序中逐页传递的对象

> ID：13844687
> 
> 赞同：1
> 
> 时间：2012-12-12T16:54:08.773
> 
> 标签：vb.net, data-binding, windows-8, xml-serialization

我正在开发一个 Windows 应用商店应用程序，并且在将我的 DTO 类序列化回我能够反序列化的 xml 文件时遇到问题。在数据绑定和更改一些数据之后，我不知道如何序列化 DTO 类，以便在我再次反序列化时这些更改可以存在。我正在做的是在登录到我的应用程序后，我还将我的`Data`对象传递给下一页，即`ItemsListView`页面。这就是我传递对象的方式：

```
Dim oData As Data
oData = Await FileHelper.DeserializeXml()
Me.Frame.Navigate(GetType(ItemsListView),oData) 
```

然后，在我的`ItemsListView`页面中，我将对象绑定到 ，`DataContext`以便能够像这样查看数据：

```
 Protected Overrides Sub LoadState(navigationParameter As Object, pageState As Dictionary(Of String, Object))

      Dim oData As Data = navigationParameter

      pageTitle.DataContext = oData.Field

      Me.DefaultViewModel("Items") = oData.ListRoot

    End Sub 
```

然后我还有另一个页面，我在其中传递项目单击对象并将该数据绑定到下一页，这就是代码：

```
 Private Sub ItemView_ItemClick(sender As Object, e As ItemClickEventArgs) Handles itemGridView.ItemClick

    If e.ClickedItem IsNot Nothing Then
        Me.Frame.Navigate(GetType(RecordAddEditView), e.ClickedItem)
    End If

End Sub 
```

还有更多页面，但我认为这足以了解我的应用程序在做什么。那么在将所有对象传递到下一页并修改这些页面上的数据之后，我怎样才能序列化我的`Data`对象，以便可以序列化来自所有页面的所有数据？我是否应该在我的 GetDataForSerialization() 方法中这样做，例如在我的 LoginPage 中调用 oData 对象？这可能是一件非常简单的事情，几天后似乎无法弄清楚。任何代码建议表示赞赏。

这是我进行序列化的方式：

```
 Public Shared Async Function SerializeXml() As Task

    Dim serializer As New XmlSerializer(GetType(Data))
    Dim nameSpaces As XmlSerializerNamespaces = New XmlSerializerNamespaces()
    Dim mStream As New MemoryStream()
    Dim result As Byte()
    Dim dataToSerialize As Data = GetDataForSerialization()

    ' Creates empty namespaces
    nameSpaces.Add(String.Empty, String.Empty)

    ' Serializes the objects
    serializer.Serialize(mStream, dataToSerialize, nameSpaces)

    ' Writes bytes to stream
    result = mStream.ToArray()

End Function

Private Shared Function GetDataForSerialization() As Data

    ' What to do here to get all the data from my Data class so that I can serialize it

End Function 
```

# c# - 实体框架，随机查询分页

> ID：13844689
> 
> 赞同：2
> 
> 时间：2012-12-12T16:54:14.530
> 
> 标签：c#, asp.net, sql, sql-server

这就是我想要实现的目标：

1.  我想查询我的数据库以返回实体列表
2.  随机化列表
3.  存储收到的项目的 IDS 以供将来查询
4.  在 ID 位于我存储的列表中的同一个表上运行新查询
5.  按我存储的列表排序。

我已经设法实现了第 1、2、3、4 步，但第 5 步很困难。任何人都可以帮助我进行这样的查询：

```
SELECT * 
FROM table_name 
WHERE id IN (1,2,3,4....)
ORDER BY (1,2,3,4....) 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:23:35.433

正常的连接（equi join）应该可以解决问题，这是我测试的示例方法：

```
/**crazyOrder filled 100 rows with random value from 1-250 in Id**/
CREATE TABLE [dbo].[crazyOrder] (
[Id]   INT          NOT NULL,
[Area] VARCHAR (50) NULL,
PRIMARY KEY CLUSTERED ([Id] ASC)
);
/**Normal order is filled with value from 1-100 sequentially in id**/
CREATE TABLE [dbo].[normalOrder] (
[Id]   INT          NOT NULL,
[Name] VARCHAR (50) NULL,
PRIMARY KEY CLUSTERED ([Id] ASC)
);

create table #tempOrder
(id int)
insert into #tempOrder
Select top 10 Id
  from crazyOrder
   order by NewID()
go
Select n.*
from normalOrder n
  join #tempOrder t
  on t.id = n.id 
```

我能够以与临时表中相同的顺序检索行（我对值使用了数据生成器）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T04:24:35.230

尝试

```
SELECT table_name.*
FROM   crazy_sorted_table
       LEFT JOIN
       table_name ON crazy_sorted_table.ID=table_name.ID 
```

# android - 在相对布局中独立设置 1 个文本视图和 2 个按钮

> ID：13844690
> 
> 赞同：0
> 
> 时间：2012-12-12T16:54:15.310
> 
> 标签：android, android-relativelayout

我有这个 XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="match_parent"
  android:layout_height="match_parent">

     <RelativeLayout
      xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/upperBar"
      android:orientation="vertical"
      android:layout_width="fill_parent"
      android:layout_height="wrap_content"
      android:background="@android:color/darker_gray"
      >

    <TextView
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/txtForum"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:textStyle="bold"
            android:textSize="25dp"
            android:textColor="#255094"
            android:layout_centerVertical="true"
            android:layout_marginLeft="5dp"
            android:layout_marginTop="5dp"
            android:layout_marginBottom="5dp"
            android:layout_alignParentLeft="true"
            android:maxLines="2"
            android:scrollbars="vertical"
            >
      </TextView>

    <ImageButton
          android:id="@+id/btnBrowser"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:layout_marginTop="5dp"
          android:layout_marginBottom="5dp"
          android:layout_alignParentRight="true"
          android:src="@drawable/icon_browser"
          android:contentDescription="Open Browser"
          >
    </ImageButton>

    <Button
          android:id="@+id/btnNewThread"
          android:layout_width="wrap_content"
          android:layout_height="wrap_content"
          android:text="NewThread"
          android:layout_marginTop="5dp"
          android:layout_marginBottom="5dp"
          android:layout_toLeftOf="@+id/btnBrowser">
    </Button>
</RelativeLayout>
   <ListView
    android:id="@+id/list"
    android:layout_width="match_parent"
    android:layout_height="match_parent" 
    android:cacheColorHint="#00000000"
    android:padding="10dp"
    android:layout_below="@+id/upperBar">
    </ListView>
</LinearLayout> 
```

看起来像这样：

![在此处输入图像描述](../Images/bde712ecf0084d68615de8412a77526d.png)

问题是，当 TextView 太长时，它会与按钮重叠。我想独立地拥有这些元素，因为文本很长。我应该在我的代码中添加什么？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:02:55.443

为文本视图添加以下代码`android:layout_toLeftOf="@+id/btnBrowser"`。

# iphone - 用西班牙语解析 xml 文件（非 UTF-8 格式）

> ID：13844691
> 
> 赞同：1
> 
> 时间：2012-12-12T16:54:16.410
> 
> 标签：iphone, ios, ipad, xml-parsing

我需要用西班牙语解析 xml 文件（如果我无法控制生成方式）。解析部分工作得很好，但问题是当 xml 文件有特殊字符时，例如：

看点

什么时候解析我得到这个：áculos

我正在使用 CocoaXMLParser。你们中的任何人都知道这是如何处理的吗？

这是我的代码：

```
-(void)getRss
{
    NSString *urlString=@"http://mysite.com/content.xml";
    NSURL *url=[NSURL URLWithString:urlString];
    NSURLRequest *rssRequest=[NSURLRequest requestWithURL:url];
    self.contentConnection=[[NSURLConnection alloc]initWithRequest:rssRequest delegate:self startImmediately:YES];

}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {

    self.dataResponse = [NSMutableData data];

    NSLog(@"didReceiveResponse");

}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    [_dataResponse appendData:data];

     NSLog(@"didReceiveData");

}
- (void)connection:(NSURLConnection *)connection didFailWithError:(NSError *)error {

    NSLog(@"didFailWithError");

}

- (void)connectionDidFinishLoading:(NSURLConnection *)connection {

     NSLog(@"connectionDidFinishLoading ");

     [self parseContent];
}

-(void)parseContent
{
    NSString *response = [[NSString alloc] initWithData:_dataResponse encoding:NSUTF8StringEncoding];
    NSLog(@"data received %@", response);
    NSLog(@"parse content ");

    NSXMLParser *parser = [[NSXMLParser alloc] initWithData:_dataResponse];
    parser.delegate = self;
    [parser parse];

}

- (void) parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    self.currentNodeContent = (NSMutableString *) [string stringByTrimmingCharactersInSet:[NSCharacterSet whitespaceAndNewlineCharacterSet]];
}

- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementname isEqualToString:@"categoriaNoticias"])
    {
            self.validXML=YES;
        NSLog(@"es xml valido");

    }
    else
    {
         self.validXML=YES;
    }
}

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if (_validXML) {
        if ([elementname isEqualToString:@"titulo"])
        {
            NSString *string=_currentNodeContent;
            NSLog(@"titulo %@", string);
        }
        if ([elementname isEqualToString:@"link"])
        {
        NSLog(@"titulo %@", _currentNodeContent);
    }

} 
```

}

我真的很感激任何指示

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:52:35.487

假设您的 XML 文件以 Latin-1 (ISO-8859-1) 编码，您可以即时修复 XML 文件：

```
- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    const char* xmlDecl = "<?xml version=\"1.0\" encoding=\"ISO-8859-1\" ?>\r\n";
    self.dataResponse = [NSMutableData data];
    [self.dataResponse appendBytes: xmlDecl length: strlen(xmlDecl)];
} 
```

请检查有效编码是什么，并在需要时进行相应调整。

# php - MySQL更新查询，如何跳过空值？

> ID：13844701
> 
> 赞同：1
> 
> 时间：2012-12-12T16:54:38.127
> 
> 标签：php, mysql

我有这样的查询：

```
$sql = "UPDATE test_accs SET 
    acc_owner = '$owner_id', 
    acc_policy_version = '$version', 
    acc_policy_last_update = '$approved', 
    acc_policy_next_update = '$renewed' 
        WHERE acc_id = '1'"; 
```

现在，web folmular 上的所有这些值都是可选的，一个可以设置这些值中的一个，两个，左右。现在，在我提交表单后，它会像这样进入查询：

```
UPDATE test_accs SET acc_owner = '2', acc_policy_version = '1.2', acc_policy_last_update = '2012-12-19', acc_policy_next_update = '2012-12-18' WHERE acc_id = '1' 
```

它仅在我提交表单中的所有值时才有效。即使没有发送所有值（例如其中一个值），您能否告诉我它如何工作？

当我设置一个值（例如政策版本）时，它看起来像这样：

```
UPDATE test_accs SET acc_owner = '', acc_policy_version = '1.2', acc_policy_last_update = '', acc_policy_next_update = '' WHERE acc_id = '1' 
```

它不工作。

可能是 acc_owner 表值的原因？

```
#1366 - Incorrect integer value: '' for column 'acc_owner' at row 1 
```

谢谢指教。

形式：

```
echo '<td>Change owner: <select name="owner_id" onchange="showUser(this.value)" style="font-size:9px"><option value="">Select a person:</option>';
    while($owners = mysql_fetch_array($owners_query)) { echo '<option value="'.$owners['id'].'">'.$owners['surname'].' '.$owners['name'].'</option></h2>'; } echo '</select></td>';
    echo "<td><input name='version' style='width:50px;text-align:center' placeholder='0.0' /></td>";
    echo "<td><input name='approved' class='datepicker_all' readonly='readonly' style='text-align:center' placeholder='1999-01-01' /></td>";
    echo "<td><input name='renewed' class='datepicker_all' readonly='readonly' style='text-align:center' placeholder='1999-01-01' /></td>"; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-12T17:14:57.127

实现此目的的一种方法是在 SQL 语句中使用表达式来测试提供的值是否为空字符串。如果提供的值为空字符串，则使用列的当前值作为分配给该列的值。否则，将提供的值分配给列。

在下面的示例中，提供的每个值都必须在语句中包含两次：一次在条件测试中，然后再次作为条件测试的可能结果。

这个说法：

```
UPDATE test_accs
   SET acc_owner              = IF('2'='',acc_owner,'2')
     , acc_policy_version     = IF('1.2'='',acc_policy_version,'1.2')
     , acc_policy_last_update = IF('2012-12-19'='',acc_policy_last_update,'2012-12-19')
     , acc_policy_next_update = IF('2012-12-18'='',acc_policy_next_update,'2012-12-18')
 WHERE acc_id = '1' 
```

等效于问题中的第一个 UPDATE 语句，因为它将所有四列的值设置为新的指定值。

这个说法：

```
UPDATE test_accs
   SET acc_owner              = IF(''='',acc_owner,'')
     , acc_policy_version     = IF('1.2'='',acc_policy_version,'1.2')
     , acc_policy_last_update = IF(''='',acc_policy_last_update,'')
     , acc_policy_next_update = IF(''='',acc_policy_next_update,'')
 WHERE acc_id = '1' 
```

仅更改`acc_policy_version`列的值，其他三列的值将保持不变。

这不一定是最好的方法，但在某些情况下是可行的。

也可以创建一个表达式，要求在语句中指定每个提供的值一次，尽管我认为这些表达式不太直观：

```
 SET acc_owner          = COALESCE(NULLIF( ''     ,''),acc_owner         )
     , acc_policy_version = COALESCE(NULLIF( '1.2'  ,''),acc_policy_version) 
```

这基本上与上面的例子做同样的事情。

如果提供的值等于 ''（就像`acc_owner`上面示例中的那样），则 NULLIF 表达式将返回 NULL。COALESCE 函数本质上会导致 NULL 值被跳过，并且列的当前值将保持不变（列的当前值分配给列。）

如果提供的值不等于 ''（就像`acc_policy_version`上面示例中的那样），则 NULLIF 表达式将返回提供的值。COALESCE 函数将获取该值，并将其分配给列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T16:58:23.800

检查是否`acc_owner`为空并将其设置为零是一种选择，如果列应该包含整数，则不能插入空格 - 或者除非您有 int 值，否则不要进行更新

1：

```
if(strlen($acc_owner)==0){
  $acc_owner=0;

} 
```

2：

```
 if(is_int($acc_owner)){
  //update it
  } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T17:04:58.173

整数字段的值是必需的吗？如果不是，则检查设置的 GET/POST 值，如果为空，则不要将其包含在更新语句中。

```
if(isset($_GET['acc_id'])) {
    $acc_id = $_GET['acc_id'];
    $sql = "UPDATE test_accs SET ";

    if(isset($_GET['version'])) {
       $version = $_GET['version'];
       $sql = $sql . "acc_policy_version = " . $version . ",";
    }

    if(isset($_GET['owner_id'])) {
       $owner_id = $_GET['owner_id'];
       $sql = $sql . "acc_owner = " . $owner_id . ",";
    }

    $sql = $sql .
        "acc_policy_last_update = '$approved', 
        acc_policy_next_update = '$renewed' 
        WHERE acc_id = " . $acc_id;

    //Execute SQL
    echo "successfully updated " . $acc_id;
} else { 
    echo "invalid acc_id"; 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T17:19:55.360

1 - 将您的 $owner_id 转换为 int 类型

```
$owner_id = (int)$owner_id; 
```

2 - 仅当值 > 0 时才使用条件更新此字段

```
$sql = "UPDATE test_accs SET " . 
        ($owner_id > 0 ? "acc_owner = '$owner_id', " : "") .
        "acc_policy_version = '$version', " .
        "acc_policy_last_update = '$approved', " . 
        "acc_policy_next_update = '$renewed' " .
        "WHERE acc_id = '1'"; 
```

**注意：**小心，您的变量似乎没有正确安全，并且您有 mysql 注入的风险。请参阅[http://php.net/manual/fr/mysqli.real-escape-string.php](http://php.net/manual/fr/mysqli.real-escape-string.php)。

而且，也许您应该考虑为您的 mysql 开发或任何 orm 使用 PDO php 扩展 (http://fr2.php.net/manual/en/intro.pdo.php)？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-12T17:25:34.230

您可以根据它们各自的数据类型使用默认值初始化保存可选字段值的变量。

请参考下面提到的代码片段。

```
 $owner_id=0;
      $version=0;
      $approved='';
      $renewed='';

     if($_SERVER['REQUEST_METHOD']=='POST')
     {
          extract($_POST);
      }

             $sql = "UPDATE test_accs SET 
acc_owner = '$owner_id', 
acc_policy_version = '$version', 
acc_policy_last_update = '$approved', 
acc_policy_next_update = '$renewed' 
    WHERE acc_id = '1'"; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-12T17:02:22.950

您应该验证来自 html 表单的所有值。比，如果你的 mysql 字段可以为 NULL，只需将 NULL 设置为 php var：

```
if (strlen($owner_id) == 0) {
    $owner_id = NULL;
    // OR 
    $owner_id = 0;
} else {
    $owner_id = addslashes($owner_id);
}

$sql = "UPDATE test_accs SET 
    acc_owner = '$owner_id', 
    acc_policy_version = '$version', 
    acc_policy_last_update = '$approved', 
    acc_policy_next_update = '$renewed' 
        WHERE acc_id = '1'"; 
```

# asp.net - linQ max 返回空值

> ID：13844703
> 
> 赞同：1
> 
> 时间：2012-12-12T16:54:44.133
> 
> 标签：asp.net, asp.net-mvc, entity-framework

我有一个这样的模型

```
public partial class TableNames
{

    public string Name { get; set; }
    [Key]
    [DatabaseGenerated(DatabaseGeneratedOption.None)] 
    public int IntId { get; set; }
} 
```

然后在控制器中，我试图从该模型中获取最大 IntId

```
var max = from c in db.TableNames
          select c;

int? Max = max.AsQueryable().Max(x => x.IntId); //This isntruction throws an error
int IntId = ( Max == null ? 1 : Max + 1); 
```

当表没有记录（它是空的）时，控制器会抛出这个错误

```
The cast to value type 'Int32' failed because the materialized value is null. 
Either the result type's generic parameter or the query must use a nullable type. 
```

我该怎么做才能解决它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:16:42.243

试试这个：

```
int? Max = max.AsQueryable().Max(x => (int?)x.IntId); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-17T21:25:33.313

如果您不想处理 Nullable 并且想要一个默认值（基于 Splendor 的代码），您可以执行类似于以下的操作：

`int Max = max.AsQueryable().Max(x => (int?)x.IntId) ?? 1;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:20:44.287

尝试：

```
max.Where(i => i.IntId.HasValue).Select(i => i.IntId.Value).Max() 
```

# sql - Group By 使查询时间大大延长

> ID：13844705
> 
> 赞同：2
> 
> 时间：2012-12-12T16:54:46.387
> 
> 标签：sql, optimization, db2, squirrel-sql

*作为第一个说明，我只有对我的服务器的读取权限。只是，仅供参考，因为它似乎出现了很多......

服务器：DB2(6.1) for i (IBM)

我有一个查询，我在一个有 1900 万行的表上运行（我不设计它们，我只是查询它们）。我一直将我的返回数据限制为 10 行 (*)，直到我整理出这个查询，以便返回时间更合理一些。

基本设计是我需要获取有关我们每周销售的产品类别的数据，使用列：WEEK_ID 和 CATEGORY。这是示例代码（带有一些重要的位####。）

```
SELECT WEEK_ID, CATEGORY
FROM DWQ####.SLSCATW
INNER JOIN DW####.CATEGORY
ON DWQ####.SLSCATW.CATEGORY_NUMBER = DW####.CATEGORY.CATEGORY_NUMBER
WHERE WEEK_ID  
BETWEEN 200952 AND 201230 --Format is year/week
GROUP BY WEEK_ID, CATEGORY 
```

如果我注释掉最后一行，我可以在 254 毫秒内取回 100 行。如果我把这条线放回我的回报中需要的时间比我有耐心等待的时间要长:-)。（我等的最长的时间是 10 分钟。）

这个问题有两个部分。第一个问题很初级：这正常吗？我试图浓缩到 50 个类别（大约）和 140 周（左右）。我意识到要从 1900 万行中压缩很多信息，但我希望将查询限制为返回的 10 行可以最大限度地减少时间？

而且，如果我不只是一个完整的 n00b，而且这实际上不需要几分钟，那么我的 SQL 到底有什么问题？

我用谷歌搜索了 WHERE 语句优化，似乎找不到任何东西。非常欢迎所有链接和解释。

为这样一个新手帖子道歉......我们都必须从某个地方开始，对吧？

(*)*使用 SQLExplorer，我的 IDE，Squirrel SQL 的 Eclipse 实现。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:11:25.240

`group by`当查询中没有聚合函数时，我不确定服务器如何处理。根据您在评论中的回答，我将尝试添加以下内容：

```
SELECT
    ...,
    SUM(SalesCost) as SalesCost,
    SUM(SalesDollars) as SalesDollars
FROM
    ... 
```

保持查询的其余部分不变。

如果这不能解决问题，您可能缺少索引。我会尝试找出 WEEK_ID 是唯一列还是*第一***列**的索引。您还可以检查在同一个表上是否有另一个临时列（即 TransactionDate 或类似的东西）已经被索引。`where`如果是这样，您可以在子句中使用它。

如果没有正确的索引，数据库服务器将被迫进行完整的表扫描，这可以解释您的性能问题。从磁盘读取 3900 万行确实需要一些不小的时间。

还要检查 WEEK_ID 的数据类型是否为`int`或类似，以避免在查询中进行不必要的强制转换。

为了避免对 Category 表进行表扫描，您需要确保 Category_Number 也被索引。（它可能已经是，因为我认为它是该表的键。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T21:49:46.380

WEEK_ID、CATEGORY（可能还有 CATEGORY_NUMBER）上的索引是使其真正快速的唯一方法，因此您需要说服 DBO 引入这些索引。

# javascript - Firefox 中未定义事件

> ID：13844706
> 
> 赞同：2
> 
> 时间：2012-12-12T16:54:48.097
> 
> 标签：javascript, firefox, javascript-events

我注意到这里有几个类似性质的帖子，但没有一个回答我的问题，这就是我发布这个的原因。

我正在尝试制作一个简单的表单，其中每个 input/textarea 元素在由 onblur 效果和值 === "" 触发时变为红色。以下代码适用于 Crhome 和 IE，但在 Firefox 中“未定义事件” - 即使我正在通过一个事件。

请参见下面的代码。

```
//declare gloabl variables
var srcForm = document.myForm;
var nameField = srcForm.nameTxt;
var emailField = srcForm.emailTxt;
var commentsField = srcForm.comments;

//function for field onfocus events
function focusClear (event) {
var eSrc = nuahs.eventUtility.eventSource(event);
if(eSrc.className === "invalid") {
    eSrc.className = "";
    eSrc.value = "";    
}
}

//function for field onblur events
function blurCheck (event) {
var eSrc = nuahs.eventUtility.eventSource(event);
if(eSrc.value === "") {
    eSrc.className = "invalid";
    eSrc.value = "This field is required";  
}
}

//set up event handlers for focus events on each field
nuahs.eventUtility.addEvent(nameField, "focus", function() { focusClear(event)});
nuahs.eventUtility.addEvent(emailField, "focus", function() { focusClear(event)});
nuahs.eventUtility.addEvent(commentsField, "focus", function() { focusClear(event)});

//set up event handlers for focus events on each field
nuahs.eventUtility.addEvent(nameField, "blur", function() { blurCheck(event)});
nuahs.eventUtility.addEvent(emailField, "blur", function() { blurCheck(event)});
nuahs.eventUtility.addEvent(commentsField, "blur", function() { blurCheck(event)}); 
```

因此，您可以在底部看到 - 我正在使用 blurCheck 和 focusCheck 函数处理我的事件，并传入事件。因此，我不知道为什么 FF 无法识别它！

nuahs 对象只是另一个脚本中的一个简单事件实用程序，但为了完整起见，您可以在下面看到它：

```
var nuahs = new Object();

nuahs.eventUtility = {
addEvent: function() {
    if(typeof addEventListener !== "undefined") {
        return function(obj, evt, fn) {
            obj.addEventListener(evt, fn, false);   
        };
    } else {
        return function(obj, evt, fn) {
            obj.attachEvent("on" + evt, fn);    
        };
    }
}(),
removeEvent: function() {
    if(typeof addEventListener !== "undefined") {
        return function(obj, evt, fn) {
            obj.removeEventListener(evt, fn, false);    
        };
    } else {
        return function(obj, evt, fn) {
            obj.detachEvent("on" + evt, fn);    
        };
    }
}(),
eventSource: function(event) {
    if (typeof addEventListener !== "undefined") {
        return event.target;    

    } else {
        return event.srcElement;    
    }
},
preventDefault: function() {
    if (typeof addEventListener !== "undefined") {
        return function(event) {
            event.preventDefault(); 
        }
    } else {
        return function(event) {
            event.returnValue = false;  
        }
    }
}(),
stopEvent: function() { //to stop event capture and bubbling
    if (typeof addEventListener !== "undefined") {
        return function(event) {
            event.stopPropagation();    
        }
    } else {
        return function(event) {
            event.cancelBubble = true;
        }
    }
}()
} 
```

非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T16:57:10.347

您忘记传递事件对象。它只是旧 IE 版本中的全局变量。

```
nuahs.eventUtility.addEvent(nameField, "focus", function(event) { focusClear(event)});
nuahs.eventUtility.addEvent(emailField, "focus", function(event) { focusClear(event)});
nuahs.eventUtility.addEvent(commentsField, "focus", function(event) { focusClear(event)}); 
```

或者更好的是，`this`以防万一您的实用程序库将其设置为适当的值：

```
nuahs.eventUtility.addEvent(nameField, "focus", focusClear);
nuahs.eventUtility.addEvent(emailField, "focus", focusClear);
nuahs.eventUtility.addEvent(commentsField, "focus", focusClear); 
```

# sql - 交叉引用另一个表时如何更新记录？

> ID：13844710
> 
> 赞同：0
> 
> 时间：2012-12-12T16:54:53.053
> 
> 标签：sql, sql-server, join

如果标题没有准确描述问题（它可能没有），请道歉。我有以下两个表：-

tLiveTable：

```
PieceID      LocationRef
------------------------
100              5 
```

tPieceTable:

```
ID    BatchNo      PieceNumber
------------------------------
50    ABC          X1
100   ABC          X1 
```

仅在给定 BatchNo 和 PieceNo 的情况下，如何更新 tLiveTable 中该片段的 LocationRef？

我尝试了以下方法：

```
UPDATE tLiveTable
SET LocationRef = 'blabla unimportant'
WHERE
PieceID = (SELECT ID FROM tPieceTable WHERE (BatchNo = 'ABC') AND (PieceNo = 'X1')) 
```

但是 tPieceTable 中可以有多个条目具有相同的 BatchNo 和 PieceNo。我只想从 tPieceTable 中检索 ID，其 ID 当前是 tLiveTable 中的 ID。

我真的应该为此使用 INNER JOIN 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T16:58:27.867

**您的**查询将无法*返回***多个 ID** **`SELECT ID FROM tPieceTable WHERE (BatchNo = 'ABC') AND (PieceNo = 'X1')`**

 ****尝试这个;

```
UPDATE L SET LocationRef = 'blabla unimportant'
FROM tLiveTable L JOIN tPieceTable P 
     ON L.PieceID = P.ID
WHERE (P.BatchNo = 'ABC') AND (P.PieceNo = 'X1') 
```

或`IN`用于`=`

```
UPDATE tLiveTable
SET LocationRef = 'blabla unimportant'
WHERE
PieceID IN (SELECT ID FROM tPieceTable WHERE (BatchNo = 'ABC') AND (PieceNo = 'X1')) 
```****

# c++ - UDP 打孔 (c++/winsock)

> ID：13844711
> 
> 赞同：1
> 
> 时间：2012-12-12T16:54:54.437
> 
> 标签：c++, udp, winsock, p2p, hole-punching

堆栈溢出用户！

我有一个必须处理 p2p 的应用程序，这就是我进行 UDP 打孔的方式。但我在实施时遇到了麻烦。希望你能给我一些建议。

我有服务器，它运行完美，可以互相介绍客户端，但客户端无法连接可能是因为我的小 exp 使用套接字。所以，客户端算法是：

1.  创建 udp 套接字 ( **socket(AF_INET, SOCK_DGRAM, IPPROTO_UDP);** )
2.  **通过sendto**函数向服务器发送消息
3.  使用**recvfrom**储物柜功能从服务器获取答案

在这 3 个步骤之后，我得到了对等端点。接下来，我尝试以两种方式连接客户端：

**方式1**：

1.  使用同一个套接字通过**sendto**函数向对等方发送数据，但传递另一个**sockaddr**
2.  **使用recvfrom**储物柜功能收听（此时我收到**WSAECONNRESET**错误）

**方式2**：

1.  创建新套接字
2.  绑定它
3.  使用它向对等方发送数据
4.  听

这样，一个客户端绑定失败，另一个客户端监听失败，并出现**WSAEADDRINUSE**和**WSAECONNRESET**错误。我显然做错了什么，您的帮助将不胜感激。提前致谢。

PS想分享一篇关于UDP打孔的好文章，以帮助那些不熟悉这种技术的人：[http ://www.brynosaurus.com/pub/net/p2pnat/](http://www.brynosaurus.com/pub/net/p2pnat/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T22:26:43.747

如果您[阅读 的文档](http://msdn.microsoft.com/en-us/library/ms740120.aspx)，`recvfrom()`它会说：

> WSAECONNRESET
> 
> 虚电路被远程端执行硬或异常关闭复位。应用程序应该关闭套接字；它不再可用。**在 UDP 数据报套接字上，此错误表明先前的发送操作导致 ICMP 端口不可达消息**。

这意味着您的呼叫`sendto()`失败。如果一个或两个客户端都在路由器后面，这是有道理的。根据您的描述（并且缺少代码），您实际上并没有执行任何打孔来打开路由器以允许客户端到客户端的数据包通过。您只向服务器发送了一条消息，它允许客户端到服务器和服务器到客户端的数据包通过。每个客户端和服务器之间需要更多的数据包交换才能在每一端执行打孔，如[您链接到的文章](http://www.brynosaurus.com/pub/net/p2pnat/)中详细描述的那样。你真的按照文章说的去做了吗？

# jquery - 使用 jQuery 将数据传递给 WebMethod()

> ID：13844712
> 
> 赞同：0
> 
> 时间：2012-12-12T16:54:54.593
> 
> 标签：jquery, vb.net, web-services, webmethod

我正在使用 $.ajax() 调用 WebMethod() 并且 VB 似乎没有正确处理数据。

这是我的 JS：

```
$.ajax({
    type: "POST",
    url: "Default.aspx/RemoveUser",
    data: "{'s':'test'}",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (msg) {
        alert(msg.d);
    },
    error: function (jqXHR, textStatus, errorThrown) {
        alert(textStatus + "\n" + errorThrown);
    }
}); 
```

我创建了两个 RemoveUser 函数，如下所示：

```
<WebMethod()> _
Public Shared Function RemoveUser(ByVal s As String) As String
    Return s
End Function 
```

和

```
<WebMethod()> _
Public Shared Function RemoveUser() As Boolean
    Return True
End Function 
```

但是，当我执行上面的 JS 时，我会返回“true”。它正确地传递数据：

![发布数据](../Images/dded87af08fda8ad29471b99bf1fdb16.png)

注释掉 RemoveUser(ByVal s As String) 函数根本不会改变行为。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T00:58:24.673

我认为您在这里使用重载方法：

看看这个：[.NET 重载 WebMethods - 可能吗？](https://stackoverflow.com/questions/3921142/net-overload-webmethods-possible)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T20:11:39.620

去掉引号，数据元素可以是一个对象。目前你什么都没通过......
试试这个：

```
data: {"s":"test"}, 
```

# android - 将 MotionEvent 传递给 GridView

> ID：13844717
> 
> 赞同：0
> 
> 时间：2012-12-12T16:55:13.130
> 
> 标签：android, listview, gridview, scroll, motionevent

这是我试图实现的目标的总结。我有一个观点，在那个观点上我正在监听 MotionEvent。当它匹配特定条件时，我想将该 MotionEvent 传递给 GridView，以便滚动。我正在做类似的事情

```
if (event.getAction() == MotionEvent.ACTION_MOVE) {
    if (condition match) {
        getGridView().dispatchTouchEvent(event);
    }
} 
```

但它不会使我的网格根据 MotionEvent 滚动。也许它没有在听那种事件，但由于没有“ScrollEvent”，我不知道。

任何人都可以请启发我。我没有发现文档有帮助。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:55:08.407

为了处理运动事件，视图需要获取与该运动相关的完整事件集。

例如，一个卷轴应该以 开头`MotionEvent.ACTION_DOWN`，然后是几个`MotionEvent.ACTION_MOVE`，最后以`MotionEvent.ACTION_UP`. 您不能只分派这些事件之一，需要分派整个事件集，以便视图能够解码滚动运动。

问候。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:09:06.933

Luis 解释了您的网格视图不滚动的原因。事实上，这样的调度是不正确的。你说要把View A的MotionEvent传给View B。但是一个motion中的x和y是相对于view的，不能直接在另一个view中使用。尝试查看 ViewGroup.dispatchTouchEvent() 的源代码，ViewGroup 会在将动作分派给孩子之前对其进行转换。如果视图 B 是视图 A 的子视图，则应使用 onInterceptTouchEvent() 来拦截运动，而不是更改调度机制。

# android - 当我按返回或转到另一个活动时，如何正确停止 MediaPlayer

> ID：13844718
> 
> 赞同：0
> 
> 时间：2012-12-12T16:55:12.557
> 
> 标签：android, media-player

我创建了一个卡拉 OK 应用程序。但我无法在没有错误的情况下停止 MediaPlayer。当我按下返回按钮回家时，我得到“对不起，应用程序已停止工作”如果我尝试开始另一个活动，也会发生同样的事情。

这是我的代码。

```
public class Main extends Activity implements MediaPlayerControl, OnClickListener {
private MediaController mMediaController;
private MediaPlayer mMediaPlayer;
public TextView subtitles;
Handler mHandler = new Handler();

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    subtitles = (TextView) findViewById(R.id.subs1);
    Button btnvol = (Button) findViewById(R.id.volc);
    btnvol.setOnClickListener(this);

    mMediaPlayer = new MediaPlayer();
    mMediaController = new MediaController(this);

    mMediaController.setMediaPlayer(Main.this);
    mMediaController.setAnchorView(findViewById(R.id.audioView));

    try {
        mMediaPlayer
                .setDataSource(
                        this,
                        Uri.parse("android.resource://com.app.audioplayer/raw/buchatri"));
        mMediaPlayer.prepare();
    } catch (IllegalStateException e){
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    }

    mHandler = new Handler(){
        @Override
        public void handleMessage(Message msg) {
            // TODO Auto-generated method stub
            super.handleMessage(msg);
              final long currentPos = mMediaPlayer.getCurrentPosition();
              if (currentPos < 5130) {
                    subtitles.setText("Stupid");
                } else if (currentPos > 5130 && currentPos < 10572) {
                    subtitles.setText("Sorry");
                } else if (currentPos > 10572 && currentPos < 10597) {
                    subtitles.setText("555+");
                } else if (currentPos > 15312 && currentPos < 18478) {
                    subtitles.setText("OMG");
                } else if (currentPos > 18478 && currentPos < 24191) {
                    subtitles.setText("AFK");
                } else if (currentPos > 24191 && currentPos < 28137) {
                    subtitles.setText("Help me !");
                } else if (currentPos > 28137 && currentPos < 29500) {
                    subtitles.setText("Oh no !");
                }
              mHandler.sendEmptyMessageDelayed(0, 1);
        }
    };
    mHandler.sendEmptyMessage(0);

    mMediaPlayer.setOnPreparedListener(new OnPreparedListener() {
        public void onPrepared(MediaPlayer mp) {
            mHandler.post(new Runnable() {
                public void run() {
                    mMediaController.show(0);
                    mMediaPlayer.start();
                }
            });
        }
    });
}

protected void onDestroy() {
    super.onDestroy();
    mMediaPlayer.stop();
    mMediaPlayer.release();
}

public boolean canPause() {
    return true;
}

public boolean canSeekBackward() {
    return true;
}

public boolean canSeekForward() {
    return true;
}

public int getBufferPercentage() {
    int percentage = (mMediaPlayer.getCurrentPosition() * 100)
            / mMediaPlayer.getDuration();
    return percentage;
}

public int getCurrentPosition() {
    return mMediaPlayer.getCurrentPosition();
}

public int getDuration() {
    return mMediaPlayer.getDuration();
}

public boolean isPlaying() {
    return mMediaPlayer.isPlaying();
}

@Override
public void pause() {
    // TODO Auto-generated method stub
    super.onPause();
    if (mMediaPlayer.isPlaying()) {
        mMediaPlayer.stop();
    }

}

@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
}

public void seekTo(int pos) {
    mMediaPlayer.seekTo(pos);

}

public void start() {
    mMediaPlayer.start();
}

public boolean onTouchEvent(MotionEvent event) {
    mMediaController.show(0);
    return false;
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub

}
} 
```

我想我对“if else”有一个错误。我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T16:57:51.160

你可以试试这个

发布后，您应该将 mediaplayer 设置为 null

```
private void releaseMediaPlayer() {
        if (mMediaPlayer != null) {
            mMediaPlayer.release();
            mMediaPlayer = null;
        }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:09:41.620

先尝试`mMediaPlayer.stop()`然后释放它`mMediaPlayer.release()`

# javascript - Jquery mobile pageshow，pagehide倒计时重定向或退出将

> ID：13844721
> 
> 赞同：0
> 
> 时间：2012-12-12T16:55:20.880
> 
> 标签：javascript, ajax, jquery, jquery-mobile

所以我试图在 Jquery Mobile 中设置一个倒计时 30 秒的页面。它必须具备以下能力：

(1) 在 pageshow 开始倒计时 (2) 当倒计时到期时，重定向到新页面 (3) 如果用户在倒计时到期之前点击离开（页面隐藏），退出计时器功能并重置计数。

所以这是我的尝试。我已将代码放在`<div data-role="page" id="pay">`.

```
<script>
            $("#pay").live("pageshow",function(){
            alert("show!");
            var sec = 10;
            var timer = setInterval(function() { 
               $('#seconds').text(sec--);
               if (sec == 5) { alert("5 seconds mark")};
               if (sec == -1) {
                  document.location = "cuentas";
                  clearInterval(timer);
               } 
            }, 1000);
            });

            $("#pay").live("pagehide",function(){
                alert("hide!");
                clearInterval(timer);
                var sec = 10;

            });

</script> 
```

我得到了“表演！” 警报。我收到“5 秒标记”警报。我得到了“隐藏！” 当我在倒计时到期之前切换页面时发出警报。但是，如果我离开页面，比如说在 8 秒时，我的菜单栏会冻结 - 我无法再导航到其他页面 - 我会看到 5 秒警报！区间函数永远不会结束......我不确定出了什么问题。

另一个注意事项---

```
$("#pay").live("pagehide",function(){
               clearInterval(timer);
                var sec = 10;
                alert("hide!");

            }); 
```

当我这样做时，我从来没有看到警报......

我试过了`return false;`，，，`return;`。`break;`任何想法如何杀死页面隐藏上的间隔倒计时功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:36:21.583

来自 jQuery 文档：

> 从 jQuery 1.7 开始，不推荐使用 .live() 方法。使用 .on() 附加事件处理程序。旧版本 jQuery 的用户应该使用 .delegate() 而不是 .live()。

除此之外，您的计时器变量似乎是 pageshow 上调用的函数的本地变量

```
$("#pay").live("pageshow",function(){
        var timer = setInterval(function() { 
```

我认为您必须将其拉出才能将其从要在 pagehide 上调用的函数中传递给 clearInterval

此外，也许不相关，但你有一个分号是关闭的：

```
if (sec == 5) { alert("5 seconds mark")}; 
```

应该

```
if (sec == 5) { alert("5 seconds mark");} 
```

# ios - 无法更改所选自定义单元格中的图像

> ID：13844724
> 
> 赞同：1
> 
> 时间：2012-12-12T16:55:25.507
> 
> 标签：ios, uiimage, tableview, custom-cell

我创建了一个自定义单元格来显示一个文本和 2 个图像，当用户选择单元格时，图像应该会改变。我可以访问单元格的属性，但不能更改它们：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    CustomCell *cell = (CustomCell *)[self.tableView cellForRowAtIndexPath:indexPath];
    cell.check.image = setImage:[UIImage imageNamed:@"1355327732_checkbox-checked"];
    [cell.check setImage:[UIImage imageNamed:@"1355327732_checkbox-checked"]]; } 
```

> cell.check 是一个 UIImageView

我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:58:34.590

如果您使用的是自定义单元格，那么您可以覆盖函数 setSelected:animated: 像这样......

```
- (void)setSelected:(BOOL)selected animated:(BOOL)animated
{
    [super setSelected:selected animated:animated];

    // Configure the view for the selected state
    if (selected) {
        self.check.image = [UIImage imageNamed:@"1355327732_checkbox-checked"];
    } else {
        self.check.image = nil;
    }
} 
```

然后你不必在 tableView 代码中做任何事情来改变它。它会起作用的。

一个更好的替代方法是在 self.check 中保持图像相同。然后，您可以相应地将隐藏设置为 YES 或 NO。这也将更加高效。

为此，您可以从表中获得多个选择，然后在 TableViewController 中放置...

```
self.tableView.allowsMultipleSelection = YES; 
```

这将设置它，以便您可以选择多行。一次点击选择，另一次点击取消选择。

要获取选定的行，您可以运行...

```
NSArray *selectedRows = [self.tableView indexPathsForSelectedRows]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:02:47.943

为什么在同一行调用 setImage 和 cell.check.image ？试试这个，看看结果是否相同。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    [tableView deselectRowAtIndexPath:indexPath animated:YES];

    CustomCell *cell = (CustomCell *)[self.tableView cellForRowAtIndexPath:indexPath];
    //cell.check.image = setImage:[UIImage imageNamed:@"1355327732_checkbox-checked"];
    [cell.check setImage:[UIImage imageNamed:@"1355327732_checkbox-checked"]]; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:10:07.610

我注意到您的代码中有两个问题

1）这段代码：

`cell.check.image= setImage:[UIImage imageNamed:@"1355327732_checkbox-checked"];`

2）没有为图像提供扩展名

将其替换为：

`cell.check.image= [UIImage imageNamed:@"1355327732_checkbox-checked.png"];`

# python - 使用 suds 访问响应肥皂标题

> ID：13844725
> 
> 赞同：2
> 
> 时间：2012-12-12T16:55:27.567
> 
> 标签：python, soap, suds

我有一个我正在尝试使用[suds](https://fedorahosted.org/suds)访问的 soap 1.1/1.2 Web 服务。

不幸的是，该服务将身份验证令牌放在响应肥皂头中。

是否可以以某种方式访问​​标题？

我知道可以在请求中设置一个自定义的肥皂头，但这不是我想要的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-04-09T15:09:06.897

我一直在使用（仍然维护的）suds-jurko 分支，但遇到了麻烦，因为`client.last_received()`它在分叉后很早就被删除了。所以我不得不想出一种访问标题的替代方法。

幸运的是，您可以使用消息插件来存储已解析的文档，然后通过插件访问标题。为了更加方便，您可以根据服务方法处理标头，而不是使用 xml 文档中的原始值，以获取正确键入/结构化的值。

```
from suds.plugin import MessagePlugin

class HeaderPlugin(MessagePlugin):
    def __init__(self):
        self.document = None

    def parsed(self, context):
        self.document = context.reply

    def get_headers(self, method):
        method = method.method
        binding = method.binding.output
        rtypes = binding.headpart_types(method, False)

        envns = ('SOAP-ENV', 'http://schemas.xmlsoap.org/soap/envelope/')
        soapenv = self.document.getChild('Envelope', envns)
        soapheaders = soapenv.getChild('Header', envns)
        nodes = soapheaders.children
        if len(nodes):
            resolved = rtypes[0].resolve(nobuiltin=True)
            return binding.unmarshaller().process(nodes[0], resolved)
        return None 
```

用法：

```
from suds.client import Client

hp = HeaderPlugin()
client = Client(wsdl, plugins=[hp])

response = client.service.LoremIpsum()
headers = hp.get_headers(client.service.LoremIpsum) 
```

示例输出：

```
>>> headers
(AuthenticationResponseHeader){
   sessionKey = "a631cd00-c6be-416f-9bd3-dbcd322e0848"
   validUntil = 2030-01-01 01:01:01.123456+01:00
 }
>>> headers.validUntil
datetime.datetime(2030, 1, 1, 1, 1, 1, 123456, tzinfo=<suds.sax.date.FixedOffsetTimezone object at 0x7f7347856be0>) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T17:00:41.530

你可以做类似的事情

```
print client.last_received().getChild("soap:Envelope").getChild("soap:Header")
.getChild("ResponseHeader").getChild("resultCode").getText() 
```

上面读取了soap头中的一个字段resultCode。您必须为每个字段执行此操作。据我所知，这是阅读标题的后门。

有关详细信息，请查看[带有泡沫的肥皂头](http://www.jansipke.nl/python-soap-client-with-suds/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-18T21:39:24.433

Towr 的类插件运行良好，但是当您在 Soapheader Response 中有多个 obj 时，它会出现问题。他的代码只得到第一个对象。

以下是改进 Towr 类的代码：

```
class HeaderPlugin(MessagePlugin):
    def __init__(self):
        self.document = None

    def parsed(self, context):
        self.document = context.reply

    def get_headers(self, method):
        Result = {}
        method = method.method
        binding = method.binding.output
        SHeaderElem = binding.headpart_types(method, False)

        envns = ('SOAP-ENV', 'http://schemas.xmlsoap.org/soap/envelope/')
        soapenv = self.document.getChild('Envelope', envns)
        soapheaders = soapenv.getChild('Header', envns)
        SHeaderNodes = soapheaders.children

        for Elem in SHeaderElem:
            for Node in SHeaderNodes:
                if(Node.name == Elem.name):
                    ElemRes = Elem.resolve(nobuiltin=True)
                    NodeRes = binding.unmarshaller().process(Node, ElemRes)
                    Result[Elem.name] = NodeRes
        return Result
    # 
```

为了更好地理解，请参阅示例。如果您收到此 Soap 响应：

```
<soap-env:Envelope xmlns:eb="http://www.ebxml.org/namespaces/messageHeader" xmlns:soap-env="http://schemas.xmlsoap.org/soap/envelope/"  xmlns:wsse="http://schemas.xmlsoap.org/ws/2002/12/secext">
    <soap-env:Header>
        <eb:MessageHeader eb:version="1.0" soap-env:mustUnderstand="1">
            <!-- -->
        </eb:MessageHeader>
        <wsse:Security>
            <!-- -->
        </wsse:Security>
    </soap-env:Header>
    <soap-env:Body>
        <!-- -->
    </soap-env:Body>
</soap-env:Envelope> 
```

函数 get_headers 将返回一个像这样的字典：

```
SoapHeadersResp = {'MessageHeader':MessageHeaderObj, 'Security':SecurityObj} 
```

要使用这个类，只需按照 Towr 所说的相同步骤，用这个替换他的 HeaderPlugin 类。

# android - SQLDroid 和加密数据库

> ID：13844735
> 
> 赞同：3
> 
> 时间：2012-12-12T16:55:56.130
> 
> 标签：android, sqlite, jdbc, sqlcipher

我的应用程序已经存在一个数据库。“已经存在”是指我没有在我的应用程序中创建数据库，我只是连接到它并读取数据。要设置连接，我使用 SQLDroid。

现在我想知道是否有可能用 SQLDroid 加密我的数据库？否则我的数据库是未加密的，任何人都可以读取数据。

我已经尝试过使用 SQLCipher，但问题是我必须在我的应用程序中创建我的数据库，而我没有在做......

我知道有可能使用在线应用程序（-> 数据库在服务器上），但这不是我的解决方案，因为我必须制作一个离线应用程序。

我对每一个想法都很高兴。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:54:28.237

> 否则我的数据库是未加密的，任何人都可以读取数据。

您无法对设备用户隐藏数据。即使您加密了数据，您也必须在您的应用程序中拥有解密密钥，这可以不费吹灰之力找到。

使用加密数据库（例如，Android 的 SQLCipher）允许*用户*保护*用户的*数据免受其他人的侵害是完全合理的。

话虽如此，SQLDroid 需要移植才能使用 SQLCipher 或其他一些加密的 SQLite 引擎。我没有看到任何证据表明这项工作已经完成。

# javascript - Javascript将日期添加到日期

> ID：13844745
> 
> 赞同：4
> 
> 时间：2012-12-12T16:56:41.920
> 
> 标签：javascript, html, date

嗨，我正在尝试创建一个变量，即今天的当前日期。我正在尝试为其添加 106 天，它成功运行。然后我尝试创建第二个变量 today2 并从“今天”变量中减去 31 天（当前日期 + 106 -31）。这部分不起作用。这就是它给我的...

2013 年 3 月 28 日星期四 11:52:21 EDT
2012 年 11 月 27 日星期二 11:52:21 EST

第二行不是第一行前 31 天。有人可以帮我纠正这个吗？

随意玩我的 jsfiddle [http://jsfiddle.net/fjhxW/](http://jsfiddle.net/fjhxW/)

```
<div id="current"></div>
<div id="current2"></div>
<div id="current3"></div>

var today = new Date();
var today2 = new Date();

today.setDate(today.getDate() + 106);

today2.setDate(today.getDate() - 31);  

var dd = today.getDate();
var mm = today.getMonth(); //January is 0!
var yy = today.getFullYear();

document.getElementById('current').innerHTML = today;
document.getElementById('current2').innerHTML = today2; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:10:10.640

现在是圣诞节时间，所以我给出的答案只是复制/粘贴：

```
var oneDay = 24 * 60 * 60 * 1000, // 24h
    today = new Date().getTime(), // in ms
    firstDate,
    secondDate;

firstDate = new Date(today + 106 * oneDay);
secondDate = new Date(firstDate.getTime() - 31 * oneDay); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T17:15:58.723

尝试[日期js](http://www.datejs.com/)：

```
Date.parse('t - 31 d'); // today - 31 days
Date.today().add(106).days().add(-31).days(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:05:33.993

您不能将负数传递给`setDate`。 `setDate`用于设置日期以设置*绝对*天数，而不是*相对*天数。

从[文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/setDate)：

> 如果您指定的参数超出预期范围，setDate 会尝试相应地更新 Date 对象中的日期信息。例如，如果您对 dayValue 使用 0，则日期将设置为上个月的最后一天。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T17:16:13.653

数学解法：

将 75 天添加到当前日期 (106 - 31)，然后将 31 天添加到该日期。更改您在代码上显示两个日期的顺序。

当你总是可以前进时，为什么要前进和后退？

# joomla - Joomla！2.5 语言文件-翻译描述

> ID：13844746
> 
> 赞同：1
> 
> 时间：2012-12-12T16:56:44.000
> 
> 标签：joomla, joomla2.5, joomla-extensions

我为 joomla 2.5 创建了一个新插件，并在 xml 中使用：

```
<description>PLG_VAR_DESC</description> 
```

但是在安装时，他不显示翻译，而是显示文件中的 var。

```
<languages folder="">
  <language tag="en-GB">en-GB.plg_system_name.ini</language>
  <language tag="en-GB">en-GB.plg_system_name.sys.ini</language>
</languages>
<files>
   <folder>images</folder>
   <filename>index.html</filename>
   <filename>parameters.xml</filename>
   <filename plugin="plg_name">plg_name.php</filename>
</files> 
```

我尝试了一切，但我无法完成这项工作..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T19:27:39.017

在 Joomla 的管理员面板下！您可以在站点 - 全局配置 - 系统下找到：

![Joomla！ 调试语言](../Images/a47a1c43ad9173d2a0c3c02437ddded5.png)

这将允许您看到 Joomla！调试控制台：

![Joomla！ 调试控制台](../Images/534a93fcb0beae5cfa05d795ecfe7cbb.png)

在那里您可以查看您正在使用的语言文件是否已加载。如果未加载，则说明您的清单文件不一致。

我认为这个问题可以通过以下方式解决：

`<languages folder="admin">`

代替

`<languages folder="">`

也供您参考，Joomla！有关[“语言文件规范”的文档](http://docs.joomla.org/1.6:_Specification_of_language_files)可能是一个很好的阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T09:09:11.643

我发现问题..是语言文件的名称。谢谢你帮助我

# java - int 数组与 char 数组

> ID：13844750
> 
> 赞同：0
> 
> 时间：2012-12-12T16:57:09.377
> 
> 标签：java, methods, casting, signature

我有这样的代码：

```
public void execute(char[] array) {
    mergesort(array,0,array.length);
} 
```

但这里的签名`mergesort(int[] data, int first, int n)`

所以我不能在我的 char 数组上应用合并排序。
有什么办法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T16:59:15.007

您可以复制`char[]`到 a`new int[]`并在完成后复制回来。

或者您可以复制合并排序的代码并将其更改为`char[]`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T16:59:43.633

三种可能：

1.  换取。`mergesort()`_`char[]`
2.  创建一个`int`与数组内容相同的`char`数组，然后对其进行排序，将结果复制回来。
3.  使用[`Arrays.sort(char[])`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#sort%28char%5B%5D%29).

# asp.net - 为什么 ASP.Net 验证只能部分工作？

> ID：13844767
> 
> 赞同：0
> 
> 时间：2012-12-12T16:58:13.937
> 
> 标签：asp.net, forms, validation

我正在尝试使用带有 ASP 的 Visual Basic.Net 编写一个带有验证的表单。

我将 RegularExpressionValidator 放入表单字段中进行测试，并通过 Page_Load 函数中的 Visual Basic 代码分配属性，如下所示：

```
LoginID.ValidationExpression = "[\\s\\S]{0,3}"
LoginID.ErrorMessage = "Maximum 3 characters are allowed." 
```

我设置了一个最多三个字符用于测试目的。无论长度如何，该文本字段的输入都将无效，并且错误消息不会从其库存值更新。

为什么会发生这种情况，我该如何解决？

编辑：

我的正则表达式工作得很好。我已经测试过了。一定是别的什么问题。

这是需要查看更多内容的人的大部分代码。除此之外，我没有看到任何其他相关内容：

```
<%-- ASP code %>
<th width="200"><span class="required">*</span>Create Login ID :</th>
     <td width="230" align="left"><asp:TextBox ID="txtLoginID" runat="server"          CssClass="inputbox" MaxLength="50"></asp:TextBox><br />
<asp:RequiredFieldValidator ID="RequiredFieldValidator1" ValidationGroup="First" CssClass="ValueValidator" ControlToValidate="txtLoginID" Display="Dynamic" runat="server" ErrorMessage="<br>Please Enter LoginID"></asp:RequiredFieldValidator>

<asp:RegularExpressionValidator ID="ValRegExLoginID" runat="server" ControlToValidate="txtLoginID" CssClass="ValueValidator" ErrorMessage="*"></asp:RegularExpressionValidator>

</td>

//Visual Basic Code
Protected Sub Page_Load(ByVal source As Object, ByVal e As System.EventArgs) Handles Me.Load

If Not IsPostBack Then
    ValRegExLoginID.ValidationExpression = "[\\s\\S]{0, 3}"
    ValRegExLoginID.ErrorMessage = "Maximum 3 characters are allowed."
End If

End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T18:29:10.560

最多允许 3 个字符的正则表达式是：

```
^.{0,3}$ 
```

所以更换

```
LoginID.ValidationExpression = "[\\s\\S]{0,3}" 
```

和

```
LoginID.ValidationExpression = "^.{0,3}$" 
```

# c# - 无法将文本解析为十进制

> ID：13844770
> 
> 赞同：0
> 
> 时间：2012-12-12T16:58:25.410
> 
> 标签：c#, .net, winforms

在 Form_load 我有

```
txtAlteFonduri.Text = "5,00";
txtFReparatii.Text = "15,00";
txtFRulment.Text = "20,00"; 
```

在另一个函数中，我想将文本解析为十进制

```
decimal alteFonduri = Decimal.Parse(txtAlteFonduri.Text);
decimal fondRulment = Decimal.Parse(txtFRulment.Text);
decimal fondRepar = Decimal.Parse(txtFReparatii.Text); 
```

但我在第二行有一个错误

```
Input string was not in a correct format. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T17:00:14.273

您需要专门添加数字格式。对于上面的示例，以下内容应该有效：

```
decimal alteFonduri = Decimal.Parse(txtAlteFonduri.Text, CultureInfo.GetCulture("de-DE")); 
```

否则，使用系统的文化信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:03:32.350

您正在使用与 decimal.Parse() 期望的不同的文化（它需要小数点“。”但您提供了一个逗号。使用正确的文化应该正确解析字符串，尽管我可以运行您的代码而不会出现任何错误...

您可以使用 Decimal.Parse(variable, CultureInfo.GetCultureInfo("Culture-Name"));

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T17:04:23.903

您必须使用[这种重载`Decimal.Parse`](http://msdn.microsoft.com/en-us/library/t7xswkc6.aspx)并提供[`IFormatProvider`](http://msdn.microsoft.com/en-us/library/system.iformatprovider.aspx)与您输入的文化相匹配的内容。您还应该考虑使用其中一种[`Decimal.TryParse`方法](http://msdn.microsoft.com/en-us/library/s3b1e5ha.aspx)来更好地处理错误。

# java - java到javascript的实时通信

> ID：13844779
> 
> 赞同：0
> 
> 时间：2012-12-12T16:59:07.430
> 
> 标签：java, javascript, communication

我有一个从 COM 端口收集实时传感器数据的 java 程序，我想在不使用 node.js 的情况下将其发送到 javascript。

传感器数据应每秒至少发送 2 次。

我很难使用数据库进行通信，但这可能会减慢解决方案的速度。如果需要，可以将浏览器支持限制为 google chrome。(osx,win,linux)

你理想的解决方案是什么？

**编辑： -** java 软件应该在与基于 web 的 javascript 客户端相同的平台上运行。

本质上，正在发送的数据是 GPS，.. 显示在地图上的数据。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:02:30.437

[LiveConnect](http://jdk6.java.net/plugin2/liveconnect/)正是您所寻找的。它允许您定义从 JS 到 Java 的通信方法，反之亦然。它是 JDK 中的内置技术。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:18:53.413

有多种方法可以做到这一点。

- 一个用于闪存到 JavaScript 桥以通过套接字进行通信的 java。这是最兼容的方式，因为大多数浏览器都支持 Flash。有一些开源 AS3 桥接器，但是您需要套接字。

-Java 小程序并从小程序调用 JavaScript 代码。如果您有权读取 com 端口是最简单的方法，否则您可能不得不与小程序认证作斗争。Java 运行时必须安装在您的机器上。

- 如果您使用 Firefox 8.0+ 或最新版本的 google chrome 与您的 java 应用程序通过 websockets 通信，则为 websocket。是最现代的方法。它不适用于 IE，但您不需要任何其他应用程序作为 javascript 和 java 之间的桥梁，您可能需要努力寻找 java 套接字服务器示例、创建自己的实现或使用支持 WS 的 Web 容器/应用程序服务器:// 或 WSS://

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-02-20T07:13:08.400

```
import javax.script.Invocable;
import javax.script.ScriptEngine;
import javax.script.ScriptEngineManager;

//JAVA

public class Main {
    public static void main(String[] args) throws Exception {
        ScriptEngineManager manager = new ScriptEngineManager();
        ScriptEngine engine = manager.getEngineByName("JavaScript");
        if (!(engine instanceof Invocable)) {
            System.out.println("Invoking methods is not supported.");
            return;
        }
        Invocable inv = (Invocable) engine;
        String scriptPath = "/Users/sheikhhussain/IdeaProjects/JavaHome/src/calculator.js";

        engine.eval("load('" + scriptPath + "')");

        Object calculator = engine.get("calculator");

        int x = 3;
        int y = 4;

        Object addResult = inv.invokeMethod(calculator, "add", x, y);
        Object subResult = inv.invokeMethod(calculator, "subtract", x, y);
        Object mulResult = inv.invokeMethod(calculator, "multiply", x, y);
        Object divResult = inv.invokeMethod(calculator, "divide", x, y);

        System.out.println(addResult.toString());
        System.out.println(subResult);
        System.out.println(mulResult);
        System.out.println(divResult);
    }
}

        // JAVASCRIPT

        var calculator = new Object();
        calculator.add = function (n1, n2) "jjj";
        calculator.subtract = function (n1, n2) n1 - n2;
        calculator.multiply = function (n1, n2) n1 * n2;
        calculator.divide = function (n1, n2) n1 / n2; 
```

# c# - 使用 ASP.NET 和 C# 在 SQL Server 中存储对图像的引用

> ID：13844780
> 
> 赞同：0
> 
> 时间：2012-12-12T16:59:08.173
> 
> 标签：c#, asp.net, sql-server, database

我正在尝试将图像引用存储在 SQL Server 数据库中，并将实际图像存储在文件服务器/文件夹中。我希望有人能给我一个关于如何做到这一点的链接或代码示例。我不想将 BLOB 存储在数据库中。

我正在使用 ASP.NET/C# 来处理这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:14:20.910

据我所知。或我的过期图像存储在图像数据类型为 feild 的 sql server 中。它以字节格式存储。这实际上是实际图像的参考。希望此链接可以帮助您更清楚地了解它

[http://www.sqlhub.com/2009/03/image-store-in-sql-server-2005-database.html](http://www.sqlhub.com/2009/03/image-store-in-sql-server-2005-database.html) http://www.codeproject.com/Articles/10861/Storing-and-Retrieving-Images -from-SQL-Server-usin

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:14:41.207

使用 HttpHandler 从数据库中获取图像并使用 Image 数据类型：

[将图像控件的图像检索为使用generichandler（.ashx）设置的字节数组？](https://stackoverflow.com/questions/12831818/retrieve-image-of-image-control-as-byte-array-which-is-set-using-generichandler/12832305#12832305)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:17:47.127

将图像存储在数据酶或文件流中，完全取决于您的图像大小。在 Microsoft Research 中有一篇很好的论文，叫做[To BLOB or Not To BLOB](http://research.microsoft.com/apps/pubs/default.aspx?id=64525)。

经过大量的测试和分析；

*   如果您的图片低于 256K，请将它们存储在数据库`VARBINARY`列中是好的。
*   如果您的图片超过 1 MB，将它们存储在文件系统中是好的。（使用`FILESTREAM`属性，它们仍然处于事务控制之下，并且是数据库的一部分）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T17:12:42.557

文件夹中的所有文件都有唯一的名称，所以我认为你不应该担心存储图像的路径，正如评论中所建议的那样。如果您担心一致性，即有人删除“引用”图像或插入不存在的图像文件的路径，您可以从您的应用程序甚至**[从数据库](http://www.mssqltips.com/sqlservertip/1263/accessing-the-windows-file-system-from-sql-server/)**本身进行检查。

但是我会毫不犹豫地使用 blob，您可以使用 MS SQL 2012 并将图像文件插入**[文件表](http://msdn.microsoft.com/en-us/library/ff929144.aspx)**，这听起来很方便。

# objective-c - “上次打开”日期

> ID：13844782
> 
> 赞同：1
> 
> 时间：2012-12-12T16:59:14.837
> 
> 标签：objective-c, macos, cocoa

我怎样才能获得文件的“最后打开”日期？我知道如何获取修改日期，但我没有找到上次使用或上次打开的任何内容。

我想像在finder中一样排列我的文件。

感谢您的任何帮助 ！（沙盒将不胜感激）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:03:28.363

您需要查看 Spotlight 元数据 - 您感兴趣的字段是：http `kMDItemLastUsedDate`: [//developer.apple.com/library/mac/#documentation/Carbon/Reference/MDItemRef/Reference/reference.html](http://developer.apple.com/library/mac/#documentation/Carbon/Reference/MDItemRef/Reference/reference.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:04:34.960

如果您通过“最后打开”日期来表示“最后访问”日期，那么 C 标准库中有一个函数：

```
#include <sys/stat.h>

struct stat st;
stat("somefile.ext", &st);
time_t accessed = st.st_atime; 
```

# java - 从安全沙箱（例如，小程序）中生成自定义类

> ID：13844785
> 
> 赞同：2
> 
> 时间：2012-12-12T16:59:20.060
> 
> 标签：java, security, applet, classloader, securitymanager

我希望能够在（未签名的）小程序中生成和加载自定义类。生成它们我可以处理，但我正在与似乎不希望我加载它们的小程序 SecurityManager 作斗争。

这是一个视觉概述；如您所见，我被困在第 2 阶段：

![内裤侏儒](../Images/d8100a252319895b7cdfedbc2728a9bf.png)

我原本打算使用自定义类加载器。显然，这在小程序中是不允许的；ClassLoader 构造函数引发 SecurityException。

然后我考虑直接在另一个类加载器上调用[ClassLoader.defineClass(String name, byte[] b, int off, int len)](http://download.oracle.com/javase/7/docs/api/java/lang/ClassLoader.html#defineClass%28java.lang.String,%20byte[],%20int,%20int%29)，但该方法受到保护。

我试图通过反射使该方法可访问。我的希望并不高，但我试过了，确实也抛出了 SecurityException。

[URLClassLoader](http://docs.oracle.com/javase/7/docs/api/java/net/URLClassLoader.html)似乎提供了救赎：它有一个静态工厂创建方法，不会引发任何安全异常。但是，该技术不允许对加载程序进行子类化或访问受保护的 defineClass 方法。它只接受一组 URL 对象。

因此，我尝试对[URL](http://docs.oracle.com/javase/7/docs/api/java/net/URL.html)进行子类化以覆盖其 openConnection 方法，从而以这种方式返回我的类字节，但 URL 类是最终的。

然后我尝试使用重写的 openConnection 方法创建自定义[URLStreamHandler](http://docs.oracle.com/javase/7/docs/api/java/net/URLStreamHandler.html)并将其传递给 URL 的构造函数。SecurityManager 对此再次表示不满。

因此，我尝试使用将返回我的自定义流处理程序的自定义工厂调用 URL.setStreamHandlerFactory。又是 SecurityManager，在抱怨，因为如果不抱怨还有什么好处呢？

所以我尝试创建一个[javax.management.loading.MLet](http://docs.oracle.com/javase/7/docs/api/javax/management/loading/MLet.html)。我不知道它的用途，但它是 URLClassLoader 的子类，它允许在其构造函数中指定自定义 URLStreamHandlerFactory 并且没有提到引发安全异常，但它仍然这样做。

绝望中，我尝试使用自定义 ProxySelector 调用[ProxySelector](http://docs.oracle.com/javase/7/docs/api/java/net/ProxySelector.html) .setDefault，希望能够截获一个 URL 并以某种方式将其路由回我的小程序，但我也没有权限。

我尝试`java.system.class.loader`通过`<param name="java_arguments" ...>`标签设置属性，但它似乎不是受尊敬的属性之一。

~~最后，我能想到的唯一剩余方法是将我的类字节发送到远程服务器，该服务器将生成一个可以与 URLClassLoader.newInstance(URL[]) 结合使用的临时 URL。那行得通，但我真的不喜欢这个主意。随着不同类加载器的交互，它似乎会很快变得复杂，并且服务器依赖性对于我想做的事情并不实际。~~ *显然，SecurityManager 非常乐意让您创建一个 URLClassLoader，但是当您尝试使用它时会自发地感到不安。*

如果可能的话，我*想*在普通的未签名小程序安全沙箱中执行此操作，以便体验无缝。

但大多数情况下，我只是感到困惑，因为如果不可能，那就没有意义了。~~如果 SecurityManager 对从任意外部 URL 加载类感到满意，它不应该介意从局部变量中的字节数组加载类。~~ *限制仍然是荒谬的。代码仍然是内部的和沙盒的。*

它对于动态代码生成和实现自定义 JAR 压缩（如 LZMA 压缩）都很有用。

帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T02:20:11.237

> ..SecurityManager 再次抱怨，因为如果不抱怨还有什么好处？

它的存在是为了保护最终用户，防止你做你正在尝试的事情。

> ..如何加载课程？

对 Jar 签名，让用户接受数字签名的代码。

> ..将我的类字节发送到远程服务器，该服务器将生成一个临时 URL，我可以将其与 URLClassLoader.newInstance(URL[]) 结合使用。

沙盒小程序无法创建`URLClassLoader`.

# asp.net-mvc - Windows Azure 生产中的异常详细信息屏幕

> ID：13844786
> 
> 赞同：2
> 
> 时间：2012-12-12T16:59:24.943
> 
> 标签：asp.net-mvc, azure

我有一个在 Windows Azure 上发布的 ASP.NET MVC 项目。如果在我本地运行此项目时发生一些未处理的异常 - 它会显示一个特殊的“死亡页面”，也称为“异常详细信息黄屏”，其中包含完整的堆栈跟踪、发生错误的代码片段等。但是，如果我运行生产模式 - 它只显示放置在 ../Views/Shared/Error.cshtml 中的默认错误视图

问题是：如何在生产模式下也显示相同的“黄屏”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:07:53.437

您在此处描述的是默认的 asp.net 行为（不特定于 windows azure）。为了查看错误消息，您必须关闭 web.config 中的自定义错误并重新发布。

# c++ - try/catch 的奇怪行为

> ID：13844791
> 
> 赞同：-3
> 
> 时间：2012-12-12T16:59:49.157
> 
> 标签：c++, try-catch, stdmap

我的问题是：为什么下面的代码：

```
class A
{
public:
    A()
    {
        test[0] = "three";
        test[5] = "five";
        test2[3] = 5.55;
    }
    void foo(int j)
    {
        for(int i = j+1; i <= 7; ++i)
        {
            try
            {
                std::cout<<test.at(i)<<"\n";
            }
            catch(const std::out_of_range&)
            {
                try
                {
                    std::cout<<test2.at(i)<<"\n";
                }
                catch(const std::out_of_range&)
                {
                    throw i;
                }
            }
        }
    }
    virtual void bar()
    {

    }
    std::map< int, float > test2;
    std::map<int, std::string> test;
};

class B : public A
{
public:
    B()
    {
        test3[6] = 15;
        test3[7] = 42;
        bar();
    }

    void bar()
    {
        int k = -1;
        label:
        try
        {
            foo(k);
        }
        catch(int i)
        {
            try
            {
                std::cout<<test3.at(i)<<"\n";
            }
            catch(const std::out_of_range&)
            {
                k = i;
                goto label;
            }
        }
    }

std::map<int, int> test3;
}; 
```

打印

```
three
5.55
five
15 
```

并不是

```
three
5.55
five
15
42 
```

?

我想要做的是迭代许多包含不同数据类型的地图，这些数据类型不能保存在 1 个容器中，这就是我想出的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:23:55.713

我的理解是，您需要的是：

*   您希望在特定范围的键上打印包含在不同映射中的所有值。
*   地图具有不同类型的值。并非所有键都存在于所有地图中。
*   派生类可能包含其他映射。

与其使用这种复杂的异常+goto 设计，不如使用基于虚拟方法的更简单设计来打印特定值：

```
class A {
public:
    virtual void showValue(int key) {
        if (map1.count(key))
            std::cout << map1[key];
        else if (map2.count(key))
            std::cout << map2[key];
    }

    void showAll() {
        for (int i=0; i<=7; i++)
            showValue(i);
    }

    std::map<int, float> map1;
    std::map<int, std::string> map2;
};

class B : public A {
public:
    virtual void showValue(int key) {
        if (map3.count(key))
            std::cout << map3[key];
        else
            A::showValue(key);
    }

    std::map<int, int> map3;
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:05:17.383

正在发生的事情是，当您打印 15 时，您`throw i`. 这没有被捕获，并逃逸到：

```
 catch(int i)
    {
        try
        {
            std::cout<<test3.at(i)<<"\n";
        }
        catch(const std::out_of_range&)
        {
            k = i;
            goto label;
        }
    } 
```

该号码已正确打印在那里，但不会重新启动。在不了解更多细节的情况下，弄清楚如何解决它几乎是不可能的......

一个更好的解决方案看起来像这样：

```
for (int i=0;i<=7;i++)
{
    if (test.find(i)!=std::map::end)
      std::cout<<test.at(i)<<"\n";
    else if (test2.find(i)!=std::map::end)
      std::cout<<test2.at(i)<<"\n";
    else if (test3.find(i)!=std::map::end)
      std::cout<<test3.at(i)<<"\n";
    else
      std::count<<"Nothing Found"<<std::endl;
} 
```

# objective-c - Cocos2D 项目中的神秘内存泄漏

> ID：13844792
> 
> 赞同：0
> 
> 时间：2012-12-12T16:59:49.343
> 
> 标签：objective-c, memory-management, memory-leaks, cocos2d-iphone

当我调用以下代码时，我正在泄漏内存。我已经尝试了明显的（在我完成后释放对象，并返回一个自动释放的对象）但我收到以下错误：

> [CCTouchJoint release]：消息发送到释放实例 0x1dd10f30

*在主循环中：*

```
CCTouchJoint *tj = [CCTouchJoint touch:touch withMouseJoint:mouseJoint];
[touchJointList addObject:tj];

[touchJointsHaveNotMoved addObject:tj];
//*If I add [tj release] here we crash 
```

*在 CCTouchJoint.h*

```
@interface CCTouchJoint : NSObject
{
@public
    b2MouseJoint *mouseJoint;
    UITouch *touch;
}
@property (assign) b2MouseJoint *mouseJoint;
@property (nonatomic, retain) UITouch *touch; 
```

*在 CCTouchJoint.mm*

```
- (void)dealloc
{
    [touch release];
    [super dealloc];
}

- (id)initLocal:(UITouch *)_touch withMouseJoint:(b2MouseJoint *)_mouseJoint
{
    if ((self = [super init]))
    {
        self.touch = _touch;
        mouseJoint = _mouseJoint;
    }
    return self;
}

+ (id)touch:(UITouch *)_touch withMouseJoint:(b2MouseJoint *)_mouseJoint
{
    return [[self alloc] initLocal:_touch withMouseJoint:_mouseJoint];
   //*If I return an autoreleased object here we crash
}

- (void)destroyTouchJoint
{
    if (mouseJoint != NULL)
    {
        mouseJoint->GetBodyA()->GetWorld()->DestroyJoint(mouseJoint);
    }
} 
```

*关卡退出或重启*

```
-(void)removeAllTouchjoints:(BOOL)release{
    //remove touchjoints
    for (CCTouchJoint *tj in touchJointList)
    {
        [tj destroyTouchJoint];
    }

    for (CCTouchJoint *tj in touchJointsHaveNotMoved)
    {
        [tj destroyTouchJoint];
    }

    [touchJointList             removeAllObjects];
    [touchJointsHaveNotMoved    removeAllObjects];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:10:14.227

在您的 init 方法中，您使用了不应该这样做的 setter (self.touch =...)。分配给 iVar 并直接保留。

当您返回自动释放对象或向其他方法添加释放时，崩溃（异常消息）是什么？

**编辑**

好的，我无法使用您提供的代码重现您的错误。所以它必须在班级的其他地方。错误信息是什么？

**编辑 2**

如果，而不是

```
CCTouchJoint *tj = [CCTouchJoint touch:touch withMouseJoint:mouseJoint];
[touchJointList addObject:tj];

[touchJointsHaveNotMoved addObject:tj];
//*If I add [tj release] here we crash 
```

你做

```
CCTouchJoint *tj = [CCTouchJoint alloc] initLocal: touch withMouseJoint:mouseJoint];
[touchJointList addObject:tj];

[touchJointsHaveNotMoved addObject:tj];
[tj release]; //does it crash here?? What message? 
```

# .net - 是否可以将 ServiceStack.Text.JsConfig 设置范围仅限于您的库？

> ID：13844796
> 
> 赞同：6
> 
> 时间：2012-12-12T17:00:11.420
> 
> 标签：.net, .net-4.0, servicestack

我正在编写一个在内部使用[ServiceStack.Text](https://github.com/ServiceStack/ServiceStack.Text)的自定义库。其他使用我的库也可能使用 ServiceStack.Text。

我想更改一些`JsConfig`选项（特别是日期处理），但是，像任何好公民一样，我不希望我对这些值的修改对我的消费者造成副作用。

不幸`JsConfig`的是，它是一个静态类，所以它的设置是静态的，并且我相信会在同一个 AppDomain 中流向 ServiceStack 的其他消费者。这是不受欢迎的行为。

有什么方法可以将我的配置更改范围仅限于我对`JsonSerializer`?

**更新**

我确实意识到有这种`JsConfig.Reset`方法，不幸的是，如果调用者已经定制了它，那将会丢失。

我可以保存值并恢复它们，但我必须同步对序列化程序的访问，这也有点违背了目的。

希望我缺少一些简单的东西？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T21:41:47.990

ServiceStack.Text 中缺少此功能，因此我为其添加了[拉取请求](https://github.com/ServiceStack/ServiceStack.Text/pull/253)。

基本上现在，如果您想确定配置设置的范围，您可以使用以下语法：

```
using(var config = JsConfig.With(new Config { DateHandler = ... }))
{
} 
```

一旦 using 块超出范围，将不再设置这些值，它`ThreadStatic`也不会影响其他线程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:59:23.040

我想到的一种可能性是仅使用库内部的自定义类型作为要序列化的根对象，然后`JsConfig`专门为此指定值。

```
internal class MyInternalObject { }

JsConfig<MyInternalObject>.DateHandler = ... 
```

我不确定根配置值是否会向下传播到序列化中的子对象，但很容易测试。

# objective-c - 如何将 UIScrollView 图像与另一个 UIImageView 同步

> ID：13844800
> 
> 赞同：1
> 
> 时间：2012-12-12T17:00:22.410
> 
> 标签：objective-c, uiscrollview, uiimageview

我正在设计一个游戏，它在 UIScrollView 中有一个大的十六进制样式地图，在另一个视图中有一个 1/10 比例的“迷你地图”。迷你地图有一个矩形，用于指示滚动视图中可见的当前区域。定位矩形以使其与主地图同步的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:26:00.537

您可以随时获取 UIScrollView `contentOffset`。您可以在 UIScrollView 委托方法中检查此值`- (void)scrollViewDidScroll:(UIScrollView *)scrollView`。一旦你有了 contentOffset，你应该将它除以你的 UIScrollView`contentSize`减去 it's `frame.size`。这给了你一个浮点数，然后可以使用该浮点数来确定矩形在较小视图中的位置。下面的一些代码显示我在说什么。我只是给你x定位的例子。冲洗并重复 y 定位。

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView {
    CGFloat xRat;
    CGFloat xPos;

    xRat = scrollView.contentOffset.x/(scrollView.contentSize.width - scrollView.frame.size.width);
} 
```

这`xRat`是滚动视图滚动的百分比（以浮点格式）。因此，只需使用 xRat 以该百分比沿 x 轴定位直线。

# python - 在 __init__ 内部或外部声明数据属性有什么区别

> ID：13844804
> 
> 赞同：6
> 
> 时间：2012-12-12T17:00:57.163
> 
> 标签：python, attributes, initialization

> **可能重复：**
> [Python：类和实例属性之间的区别](https://stackoverflow.com/questions/207000/python-difference-between-class-and-instance-attributes)

我试图在 Python 中了解 OOP，但在类中声明变量时我有点困惑。我应该在`__init__`程序内部还是外部声明它们？有什么不同？

以下代码可以正常工作：

```
# Declaring variables within __init__
class MyClass:
    def __init__(self):
        country = ""
        city = ""
    def information(self):
        print "Hi! I'm from %s, (%s)"%(self.city,self.country)

me = MyClass()
me.country = "Spain"
me.city = "Barcelona"
me.information() 
```

但是在`__init__`过程之外声明变量也可以：

```
# Declaring variables outside of __init__
class MyClass:
    country = ""
    city = ""
    def information(self):
        print "Hi! I'm from %s, (%s)"%(self.city,self.country)

me = MyClass()
me.country = "Spain"
me.city = "Barcelona"
me.information() 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-12T17:34:36.820

在您的第一个示例中，您正在定义*实例属性*。第二，*类属性*。

类属性在该类的所有实例之间共享，其中实例属性由该特定实例“拥有”。

**示例差异**

为了理解这些差异，让我们举个例子。

我们将定义一个具有实例属性的类：

```
class MyClassOne:
    def __init__(self):
        self.country = "Spain"
        self.city = "Barcelona"
        self.things = [] 
```

还有一个具有类属性：

```
class MyClassTwo:
    country = "Spain"
    city = "Barcelona"
    things = [] 
```

还有一个函数可以打印出有关这些对象之一的信息：

```
def information(obj):
    print "I'm from {0}, ({1}). I own: {2}".format(
                obj.city, obj.country, ','.join(obj.things)) 
```

让我们创建 2 个`MyClassOne`对象，将其中一个更改为 Milan，并给 Milan “一些东西”：

```
foo1 = MyClassOne()
bar1 = MyClassOne()

foo1.city = "Milan"
foo1.country = "Italy"
foo1.things.append("Something") 
```

当我们调用`information()`时`foo1`，`bar1`我们会得到您期望的值：

```
>>> information(foo1)
I'm from Milan, (Italy). I own: Something

>>> information(bar1)
I'm from Barcelona, (Spain). I own: 
```

但是，如果我们要做完全相同的事情，但使用实例，`MyClassTwo`您会发现类属性在实例之间是共享的。

```
foo2 = MyClassTwo()
bar2 = MyClassTwo()

foo2.city = "Milan"
foo2.country = "Italy"
foo2.things.append("Something") 
```

然后打电话`information()`...

```
>>> information(foo2)
I'm from Milan, (Italy). I own: Something
>>> information(bar2)
I'm from Barcelona, (Spain). I own: Something 
```

如您所见 -`things`在实例之间共享。`things`是对每个实例都可以访问的列表的引用。因此，如果您从任何实例附加到事物，那么所有其他实例都会看到相同的列表。

您在字符串变量中看不到这种行为的原因是您实际上是在为实例分配一个新变量。在这种情况下，该引用由实例“拥有”，而不是在类级别共享。为了说明，让我们为事物分配一个新列表`bar2`：

```
bar2.things = [] 
```

这导致：

```
>>> information(foo2)
I'm from Milan, (Italy). I own: Something
>>> information(bar2)
I'm from Barcelona, (Spain). I own: 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T17:04:53.873

你的两个版本的代码有很大的不同。在 python 中，您有 2 个不同的实体： *类*和*类实例*。实例是在您执行以下操作时创建的：

```
new_instance = my_class() 
```

您可以将属性绑定到`__init__`via内的实例`self`（`self`是新实例）。

```
class MyClass(object):
    def __init__(self):
        self.country = ""  #every instance will have a `country` attribute initialized to "" 
```

`self`和没有什么特别的`__init__`。 `self`是用于表示传递给*每个方法*的实例的习惯名称（默认情况下）。

```
a.method()  #-> Inside the class where `method` is defined, `a` gets passed in as `self` 
```

这里唯一特别的是`__init__`在构造类时调用它：

```
a = MyClass()  #implicitly calls `__init__` 
```

您还可以将属性绑定到类（将其放在外面`__init__`）：

```
class MyClass(object):
    country = ""  #This attribute is a class attribute. 
```

在任何时候，您都可以通过以下方式将新属性绑定到实例：

```
my_instance = MyClass()
my_instance.attribute = something 
```

或通过以下方式为类添加新属性：

```
MyClass.attribute = something 
```

现在它变得有趣了。如果一个实例没有请求的属性，那么 python 会查看该属性的类并返回它（如果它存在的话）。因此，类属性是类的所有实例共享一条数据的一种方式。

考虑：

```
def MyClass(object):
    cls_attr = []
    def __init__(self):
        self.inst_attr = []

a = MyClass()
a.inst_attr.append('a added this')
a.cls_attr.append('a added this to class')
b = MyClass()
print (b.inst_attr) # []  <- empty list, changes to `a` don't affect this.
print (b.cls_attr) # ['a added this to class'] <- Stuff added by `a`!
print (a.inst_attr) #['a added this'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:02:45.283

当您在类范围内（任何方法之外）定义变量时，它就成为类属性。当你在方法范围内定义一个值时，它就变成了一个方法局部变量。如果您将值分配给`self`（或引用对象的任何其他标签）的属性，它将成为（或修改）实例属性。

# razor - ASP.NET MVC4：如何将 IEnumerable 转换为 ViewBag 的字符串

> ID：13844805
> 
> 赞同：0
> 
> 时间：2012-12-12T17:00:57.973
> 
> 标签：razor, asp.net-mvc-4

这是我正在尝试做的，但它不起作用：

```
HardwareType hwt = new HardwareType { HType = "PC" };
IEnumerable<Hardware> Pcs = db.Hardware.Where(h => h.HardwareType.Contains(hwt));
ViewBag.Pcs = Pcs.ToString(); 
```

那么如何将我的 IEnumerable 转换为字符串（或其他原始数据类型），以便在我尝试在 Razor 中使用它时编译器不会给我一个错误？

```
@foreach (var item in ViewBag.Pcs) {
     <li><a href="#" class="btn"><i class="icon-hdd"></i> @item.HType</a></li>
} 
```

硬件类：

```
public class Hardware
    {
        public int Id { get; set; }
        public virtual ICollection<DeviceType> Type { get; set; }
        public string AssetTagId { get; set; }
        public virtual ICollection<Manufacturer> Manufacturer { get; set; }
        [Required]
        [StringLength(50)]
        public string ServiceTagId { get; set; }
        [Required]
        [StringLength(50)]
        public string SerialNumber { get; set; }
        [Required]
        [StringLength(75)]
        public string ProductNumber { get; set; }
       // [Required]
        [StringLength(20)]
        public string PurchaseDate { get; set; }
        [StringLength(20)]
        public string WarrantyExpiration { get; set; }
        [Required]
        [StringLength(20)]
        public string WarrantyType { get; set; }
        public virtual ICollection<Location> Location { get; set; }
        public virtual ICollection<HardwareType> HardwareType { get; set; }
        [Required]
        [StringLength(2000)]
        public string Notes { get; set; }
        public string POATag { get; set; }
    } 
```

硬件类型类：

```
public class HardwareType
    {
        public int Id { get; set; }
        [Required]
        [StringLength(128)]
        public string HType { get; set; }
        public virtual ICollection<Hardware> Hardware { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:02:47.520

在我看来，好像问题在于您*将*其转换为字符串，在这里：

```
ViewBag.Pcs = Pcs.ToString(); 
```

你为什么这样做？看起来您想要遍历视图中序列中的各个项目。要么使用：

```
ViewBag.Pcs = Pcs; 
```

或者

```
ViewBag.Pcs = Pcs.ToList(); 
```

如果您想强制实现查询。

编辑：再次查看错误，我怀疑这实际上是`Where`问题所在的子句。我怀疑你*真的*想要：

```
var pcs = db.Hardware.Where(h => h.HardwareType.Any(hwt => hwt.HType == "PC"));
ViewBag.Pcs = pcs.ToList(); // Materialize the query 
```

问题是尝试使用您的`hwt`值作为查询的*输入*......

# for-loop - 将 .each() 循环重写为 for 循环进行优化，如何复制 $(this).attr()

> ID：13844806
> 
> 赞同：0
> 
> 时间：2012-12-12T17:00:58.117
> 
> 标签：for-loop, jquery

我在 IE 中运行时编写的 jquery 脚本遇到了一些性能问题，因此我正在尝试以任何可能的方式进行优化。显然使用 for 循环比使用 jQuery .each 方法快得多。这让我想到了一个关于`$(this)`for 循环内部的问题。我正在简化我在循环中所做的事情，只使用一个`attr()`函数，因为它涉及我的主要潜在问题。

我对每个都这样做（简化）

```
var existing = $('#existing').find('div');
    existing.each(function(){
    console.log($(this).attr('id'));
}); 
```

我已经尝试将其重写为 for 循环：

```
var existing = $('#existing').find('div');
for(var i = 0;i < existing.length;i++)
{
    console.log(existing[i].attr('id'));
} 
```

它抛出一个错误说：

```
Uncaught TypeError: Object #<HTMLDivElement> has no method 'attr' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:02:03.040

要获取元素的 id，只需执行

```
existing[i].id 
```

请注意，您的 jQuery 循环也会更快，因为

```
existing.each(function(){
  console.log(this.id);
}); 
```

更一般地，您不应该使用`attr('id')`，尤其是在您关心性能的情况下，因为 DOM 对象具有属性`id`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T17:02:31.793

你需要`existing.eq()`得到`jQuery`对象，`existing[]`给你`DOM`对象。该函数`attr()`应该使用 jQuery 对象而不是 DOM (javascript) 对象调用。

```
var existing = $('#existing');
for(var i = 0;i < existing.length;i++)
{
    console.log(existing.eq(i).attr('id'));
} 
```

您可以使用 each 来获取索引而无需 for 循环。

```
existing.each(function(index, item){
     alert(index);
     alert(item);
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T17:13:01.713

.在我给出答案之前，我必须问你一个问题，为什么你需要对单个元素执行循环，#existing 不是 Id，因此它是你页面上的一个独特元素。你可以简单地做

```
$('#existing').prop('id'); 
```

如果您有多个元素，您应该使用一个类或另一个属性，如果是这种情况，您可以使用以下内容：

```
$.each('.existing',function(index,item){
    console.log(item.prop('id'));
}); 
```

不推荐使用 attr() 的 prop() ，因为 attr 已被弃用

# backbone.js - 如何从使用 forEach 的集合中删除模型？

> ID：13844807
> 
> 赞同：0
> 
> 时间：2012-12-12T17:01:01.860
> 
> 标签：backbone.js, backbone.js-collections

我有以下一段代码

```
initialize : function(option){
   //some code
   this.PassedCollection = this.options.serverResponse.passedCollection;
   this.NewCollection = new Collection();
   this.NewSectionCollection.bind("add", this.add, this);
   this.NewSectionCollection.bind("remove", this.remove, this);
   //some code
}
//some other code
addRemove: function(){
    this.PassedCollection.forEach(_.bind(function(passedModel){
        if(passedModel.reference==event.target.id){
            if($('input[name='+passedModel.reference+']').attr( 'checked')){
                 console.log("checked");
                 this.NewCollection.add(passedModel);
            }
            else{
                 console.log("unchecked");
                 this.NewCollection.remove(passedModel, {silent : true});
                 console.log(JSON.stringify(this.NewCollection));
            }
        }, this));
 } 
```

我可以将“passedModel”添加到 NewCollection，但不能删除它们。我做错了什么，我应该如何更正我的代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:10:48.010

添加到集合中的passedModel 的cid 与为了从集合中删除模型而传递的passedModel 的cid 不同。我做了以下事情，它对我有用：（只是 else 部分中的代码）：

```
else{
    console.log("unchecked");
    var model = _.find(this.NewCollection.models, function(model) {
        return model.get("reference") == passedModel.reference;
    });
    this.NewCollection.remove(model, {silent : true});
} 
```

谢谢大家！

# javascript - 将 Javascript 中的字符串拆分为嵌入数字的数组

> ID：13844813
> 
> 赞同：2
> 
> 时间：2012-12-12T17:01:39.547
> 
> 标签：javascript, string

我正在尝试将一个字符串拆分为一个数组，其中任何数字都被单独拆分：

```
function mysplit(s) { ??? }

// What I want to have happen is this:
//
// mysplit('ABC12DEF678IJ') --> ['ABC',12,'DEF',678,'IJ']
// mysplit('ABCD123') --> ['ABCD',123]
// mysplit('Eeyore') --> ['Eeyore'] 
```

我认为我能做到这一点的唯一方法是使用正则表达式替换的函数形式，使用可变状态作为数组，但这看起来很难看。（见下文待定，因为这是我默认尝试的方式。）

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T17:04:38.643

使用**[`String.split()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/String/split)**本身但带有分隔符保留。

```
'ABC12DEF678IJ'.split(/(\d+)/);
["ABC", "12", "DEF", "678", "IJ"]

'ABCD123'.split(/(\d+)/)
["ABCD", "123", ""] //tiny issue. ;)

'Eeyore'.split(/(\d+)/)
["Eeyore"] 
```

**如果 separator 包含捕获括号，则在数组**中返回匹配的结果。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-12T17:06:22.543

`match`可以做得很好：

```
function mysplit(s) {
    return s.match(/\d+|\D+/g);
} 
```

[没有小问题:)](http://jsfiddle.net/minitech/ADJLV/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T17:05:56.787

作为参考，这里是我原来的方法，看起来还不错：

```
function numsplit(s)
{
    var a = [];
    s.replace(/([0-9]+)|([^0-9]+)/g, function(g) {
        a.push(isNaN(g) ? g : (+g));
    });
    return a;
} 
```

# c# - 从嵌套列表填充嵌套列表

> ID：13844816
> 
> 赞同：1
> 
> 时间：2012-12-12T17:01:41.823
> 
> 标签：c#, .net, linq, c#-4.0, nested

我有一个 Product ( `IList<Product>`) 列表，其中预先填充了所有数据。

模型：`Product`

```
public class Product
{

    public int Id { get; set; }

    public int ParentProductId { get; set; }

    public string Code { get; set; }

    public string Name { get; set; }

    public IList<Product> Children { get; set; } 

} 
```

属性`Children`将是 type `IList<Product>`，意味着它是嵌套的，它可以再次包含子`n`级。

我有另一个模型`FilterModel`。

模型：`FilterModel`

```
public class FilterModel
{
    //// This is same as that of Product Code
    public string Code { get; set; }

    //// This is a combination of Products Name, Id and some static strings
    public string FilterUrl { get; set; }

    public IList<FilterModel> Children
} 
```

它也具有相同的嵌套结构。

我计划将数据`FilterModel`从第一个模型 ( ) 插入到我的第二个模型 ( `Product`) 中。这可能以递归方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:08:41.270

尝试这个：

```
FilterModel Transfer(Product product)
{
    var fm = new FilterModel();
    fm.Code = product.Code;
    fm.Children = new List<FilterModel>();

    foreach (var p in product.Children)
    {
        fm.Children.Add(Transfer(p));
    }

    return fm;
} 
```

# java - 使用 Runtime.getRuntime().exec(command) 时用户对命令行的输入；

> ID：13844825
> 
> 赞同：6
> 
> 时间：2012-12-12T17:02:09.530
> 
> 标签：java, command-line, execute

我认为这是不可能的，但我一直在使用：

```
Process p = Runtime.getRuntime().exec(command); 
```

在命令行上运行命令，但现在我遇到了这样一种情况，即我正在运行的部分命令会要求一些用户输入，例如用户名。

这不能通过正在执行的命令的参数来解决，有什么办法可以将用户名传递给同一个命令行实例并继续？

- -编辑 - -

我仍然无法让它工作。这些是命令行上的步骤：

```
C:\someProgram.exe
Login:
Passowrd: 
```

所以我需要在运行时提示时传递登录名和密码。我得到的代码不起作用：

```
try {
        String CMD = "\"C:\\someProgram\"";
        Scanner scan = new Scanner(System.in);
        ProcessBuilder builder = new ProcessBuilder(CMD);
        builder.redirectErrorStream(true);
        Process process = builder.start();

        InputStream is = process.getInputStream();
        BufferedReader reader = new BufferedReader (new InputStreamReader(is));
        OutputStream out = process.getOutputStream();
        BufferedWriter writer = new BufferedWriter(new OutputStreamWriter(out));
        String line;
        try {
            while (scan.hasNext()) {
                String input = scan.nextLine();
                if (input.toLowerCase().startsWith("login")) {
                    writer.write("myUsername");
                } else if(input.toLowerCase().startsWith("password")){
                    writer.write("myPassword");
                }
                writer.flush();

                line = reader.readLine();
                while (line != null) {
                    System.out.println ("Stdout: " + line);
                    line = reader.readLine();
                }
                if (line == null) {
                    break;
                }
            }
            process.waitFor();
        }
        finally {;
            writer.close();
            reader.close();
        }
    }
    catch (Exception err) {
        System.err.println("some message");
    } 
```

我试过这样的事情： writer.write("myUsername\n");

任何帮助，我可以看到 someProgram.exe 被调用并在进程中运行，但它只是挂起。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:04:45.460

只需写入 p.getOutputStream()。这会将用户名发送到进程的标准输入，这应该可以满足您的要求。

```
out = p.getOutputStream();
out.write("fooUsername\n".getBytes());
out.flush(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:28:25.783

作为`command`字符串的一部分，如果您在 Unix/Linux/OSX 和 PowerShell 上运行，您*可以*预先设置`cat`shell 命令，让 shell 将文件的内容转储到输入流中，以便预期的可执行文件作为输入读取。

类似的命令`cat user_input.txt | myAppWantsInput.pl`。

这将获取 的内容`user_input.txt`，将其转储到标准输入中，因此当您`command`执行“myAppWantsInput.pl”并从标准输入中读取时，它将读取文件的内容并将其作为输入，就像从键盘。

当然，如果您*事先*不知道要传递什么值，则可以在调用命令之前动态生成所需的文件。如果在运行命令之前无法确定所需的所有输入，这将不起作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:06:12.983

您应该重定向命令输入并将参数发送到那里。使用`process.setInputStream()`, 写入此流。

# asynchronous - 异步进程调用

> ID：13844827
> 
> 赞同：5
> 
> 时间：2012-12-12T17:02:13.733
> 
> 标签：asynchronous, process, ipc, d

在 D 中异步调用其他进程的首选方式是什么？我的用例是调用`svn status`检查退出状态，并解析其标准输出和错误。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T18:59:09.823

我认为[std.stdio.popen](http://dlang.org/phobos/std_stdio.html#popen)是你想要的：

```
void popen(string command, in char[] stdioOpenmode = "r"); 
```

将它与 a 一起使用`File`，您将获得输出；就像是：

```
File f;
f.popen("svn status", "r");
char[] line;
string result;
while (f.readln(line))
    result ~= line;
return result; 
```

或者您可以使用显然为您执行此操作的[std.process.shell](http://dlang.org/phobos/std_process.html#shell)（并在错误时引发[ErrnoException](http://dlang.org/phobos/std_exception.html#ErrnoException)）。

# ruby-on-rails-3 - 使用 Worker Dyno 在 Heroku 上安排延迟作业

> ID：13844833
> 
> 赞同：0
> 
> 时间：2012-12-12T17:02:36.350
> 
> 标签：ruby-on-rails-3, heroku, delayed-job

我目前正在使用 Heroku 的调度程序来运行脚本。但是，脚本运行所需的时间将从几毫秒增加到几分钟。我正在考虑使用 delay_job gem 将这个过程推到 Worker Dyno 上。我想继续每天运行一次此脚本，只需将其卸载给工作人员即可。我目前的 rake 任务是：

```
desc "This task updates some stuff for you."
task :update_some_stuff => :environment do
  puts "Updating some stuff ..."
  SomeClass.new.process
  puts "... done."
end 
```

一旦 gem 安装完毕，迁移运行，worker dyno 启动，脚本是否只需要更改为：

```
 desc "This task updates some stuff for you."
    task :update_some_stuff => :environment do
      puts "Updating some stuff ..."
      SomeClass.new.delay.process
      puts "... done."
    end 
```

由于这个任务仍然是由 Heroku 的调度程序调度的 rake 任务，这里唯一需要发生的事情是引入将`delay`其放入 Worker 队列的方法吗？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T22:18:20.523

`delayed_jobs`是的，DJ 是一个非常简单的 gem，通过在数据库中的表中添加一条记录，您应该能够看到它在本地正常工作。在 Heroku 上运行一个工人，一切都应该没问题。

只需确保您的 Procfile 中有以下内容：

```
worker:  bundle exec rake jobs:work 
```

更多信息可以在这里找到：[https ://devcenter.heroku.com/articles/delayed-job](https://devcenter.heroku.com/articles/delayed-job)

# javascript - 画布可缩放弧位

> ID：13844834
> 
> 赞同：0
> 
> 时间：2012-12-12T17:02:43.380
> 
> 标签：javascript, html, animation, canvas

[http://jsfiddle.net/cs5Sg/11/](http://jsfiddle.net/cs5Sg/11/)

我想做可伸缩的画布。我创建了两个圆（弧）和一条线，当您单击圆并移动它时，线将跟随并改变位置。问题是当我添加调整大小的代码时：

```
var canvas = document.getElementById('myCanvas'),
    context = canvas.getContext('2d'),
    radius = 12,
    p = null,
    point = {
        p1: { x:100, y:250 },
        p2: { x:400, y:100 }
    },
    moving = false;

window.addEventListener("resize", OnResizeCalled, false);

function OnResizeCalled() {
    var gameWidth = window.innerWidth;
    var gameHeight = window.innerHeight;
    var scaleToFitX = gameWidth / 800;
    var scaleToFitY = gameHeight / 480;

    var currentScreenRatio = gameWidth / gameHeight;
    var optimalRatio = Math.min(scaleToFitX, scaleToFitY);

    if (currentScreenRatio >= 1.77 && currentScreenRatio <= 1.79) {
        canvas.style.width = gameWidth + "px";
        canvas.style.height = gameHeight + "px";
    }
    else {
        canvas.style.width = 800 * optimalRatio + "px";
        canvas.style.height = 480 * optimalRatio + "px";
    }
}

function init() {
        return setInterval(draw, 10);
}

canvas.addEventListener('mousedown', function(e) {
    for (p in point) {
        var
            mouseX = e.clientX - 1,
            mouseY = e.clientY - 1,
            distance = Math.sqrt(Math.pow(mouseX - point[p].x, 2) + Math.pow(mouseY - point[p].y, 2));

        if (distance <= radius) {
            moving = p;
            break;
        }
    }
});

canvas.addEventListener('mouseup', function(e) {
    moving = false;
});

canvas.addEventListener('mousemove', function(e) {

    if(moving) {
        point[moving].x = e.clientX - 1; 
        point[moving].y = e.clientY - 1;
    }
});

function draw() {
    context.clearRect(0, 0, canvas.width, canvas.height);

    context.beginPath();
    context.moveTo(point.p1.x,point.p1.y);
    context.lineTo(point.p2.x,point.p2.y);

    context.closePath();

    context.fillStyle = '#8ED6FF';
    context.fill();
    context.stroke();

    for (p in point) {
        context.beginPath();
        context.arc(point[p].x,point[p].y,radius,0,2*Math.PI);
        context.fillStyle = 'red';
        context.fill();
        context.stroke();
    }
    context.closePath();
}

init(); 
```

画布是可扩展的，但问题在于点（圆）。当您更改窗口大小时，它们在画布区域上仍然具有相同的位置，但是`distance`更改（因此单击选项失败）。如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T21:40:18.660

**[现场演示](http://jsfiddle.net/cs5Sg/12)**

基本上你只需要一个考虑到画布实际尺寸的缩放器值，以及像这样的css尺寸

```
var scaledX = canvas.width/ canvas.offsetWidth,
    scaledY = canvas.height/ canvas.offsetHeight; 
```

然后每次调整窗口大小时，您都需要确保更新缩放器值。

```
function OnResizeCalled() {

    scaledX = canvas.width/ canvas.offsetWidth;
    scaledY = canvas.height/ canvas.offsetHeight;
} 
```

要获得正确的坐标，您需要在所有鼠标事件中将`clientX`和乘以缩放器`clientY`

```
canvas.addEventListener('mousedown', function(e) {
    for (p in point) {
        var 
            mouseX = e.clientX*scaledX,
            mouseY = e.clientY*scaledY,
            distance = Math.sqrt(Math.pow(mouseX - point[p].x, 2) + Math.pow(mouseY - point[p].y, 2));

        if (distance <= radius) {
            moving = p;
            break;
        }
    }
});

canvas.addEventListener('mousemove', function(e) {
    var mouseX = e.clientX*scaledX,
        mouseY = e.clientY*scaledY;

    if(moving) {
        point[moving].x = mouseX;
        point[moving].y = mouseY;
    }
}); 
```

**完整代码**

```
var canvas = document.getElementById('myCanvas'),
    context = canvas.getContext('2d'),
    radius = 12,
    p = null,
    point = {
        p1: { x:100, y:250},
        p2: { x:400, y:100}
    },
    moving = false,
    scaledX = canvas.width/ canvas.offsetWidth,
    scaledY = canvas.height/ canvas.offsetHeight;

window.addEventListener("resize", OnResizeCalled, false);

function OnResizeCalled() {
    var gameWidth = window.innerWidth;
    var gameHeight = window.innerHeight;
    var scaleToFitX = gameWidth / 800;
    var scaleToFitY = gameHeight / 480;

    var currentScreenRatio = gameWidth / gameHeight;
    var optimalRatio = Math.min(scaleToFitX, scaleToFitY);

    if (currentScreenRatio >= 1.77 && currentScreenRatio <= 1.79) {
        canvas.style.width = gameWidth + "px";
        canvas.style.height = gameHeight + "px";
    }
    else {
        canvas.style.width = 800 * optimalRatio + "px";
        canvas.style.height = 480 * optimalRatio + "px";
    }

    scaledX = canvas.width/ canvas.offsetWidth;
    scaledY = canvas.height/ canvas.offsetHeight;
}

function init() {
        return setInterval(draw, 10);
}

canvas.addEventListener('mousedown', function(e) {
    for (p in point) {
        var 
            mouseX = e.clientX*scaledX,
            mouseY = e.clientY*scaledY,
            distance = Math.sqrt(Math.pow(mouseX - point[p].x, 2) + Math.pow(mouseY - point[p].y, 2));

        if (distance <= radius) {
            moving = p;
            break;
        }
    }
});

canvas.addEventListener('mouseup', function(e) {
    moving = false;
});

canvas.addEventListener('mousemove', function(e) {
    var mouseX = e.clientX*scaledX,
        mouseY = e.clientY*scaledY;

    if(moving) {
        point[moving].x = mouseX; //1 is the border of your canvas
        point[moving].y = mouseY;
    }
});

function draw() {
    context.clearRect(0, 0, canvas.width, canvas.height);

    context.beginPath();
    context.moveTo(point.p1.x,point.p1.y);
    context.lineTo(point.p2.x,point.p2.y);

    context.closePath();

    context.fillStyle = '#8ED6FF';
    context.fill();
    context.stroke();

    for (p in point) {
        context.beginPath();
        context.arc(point[p].x,point[p].y,radius,0,2*Math.PI);
        context.fillStyle = 'red';
        context.fill();
        context.stroke();
    }
    context.closePath();
}

init(); 
```

# django - django 扩展的问题

> ID：13844847
> 
> 赞同：3
> 
> 时间：2012-12-12T17:03:09.863
> 
> 标签：django

我像这样安装 django-extensions：

```
git clone git://github.com/django-extensions/django-extensions.git
cd django-extensions
python setup.py install 
```

然后我转到我的项目文件夹并使用：

```
./manage.py graph_models -a -g -o my_project_visualized.png 
```

什么回报：

```
Unknown command: 'graph_models'
Type 'manage.py help' for usage. 
```

我尝试“帮助”——我知道所有这些命令，但是如何解决 graph_models 的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T17:08:25.097

既然你没提。我假设你错过了这`INSTALLED_APPS`一步：

**设置.py**：

```
INSTALLED_APPS = (
    ...
    'django_extensions',
) 
```

[在GitHub](https://github.com/django-extensions/django-extensions)站点上没有提到，但在[文档](http://packages.python.org/django-extensions/installation_instructions.html#installation)中提到了。

而且当然：

```
pip install django_extensions 
```

`requirements`如果你有的话，把它添加到

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-23T16:09:49.810

对我来说，它仍然没有工作。我发现我必须重新激活环境（workon env_name）。然后它起作用了。

# php - 根据设定的时间段确定日期

> ID：13844849
> 
> 赞同：-2
> 
> 时间：2012-12-12T17:03:12.400
> 
> 标签：php, date, timestamp

我有开始日期（时间戳）和结束日期（时间戳）的 MySQL 列以及 pay_period 的第三列（3 个月或 6 个月）我想在整个期间获得 3 个月（paying_period）的差异。

**示例**开始日期为`1-jan-2012`，结束日期为`1-jan-2013`。我想要在 2012 年 3 月`, like 1st installment goes on`1 日 2012 年`,2nd on`1 月 1 日的 3 个月期间，依此类推。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:08:56.237

[DateTime](http://us3.php.net/manual/en/book.datetime.php)使处理日期变得容易

```
$date = new DateTime('1-jan-2012'); // Start date
$date->modify('+3 months');         // 3 months later
echo $date->getTimestamp();         // timestamp
$date->modify('+3 months');         // 6 mnths later
echo $date->getTimestamp();         // timestamp
$date->modify('+3 months');         // 9 months later
echo $date->getTimestamp();         // timestamp 
```

# javascript - 如何计算 2D 数组中匹配最小值和最大值的 javascript 中的元素以计算直方图

> ID：13844852
> 
> 赞同：0
> 
> 时间：2012-12-12T17:03:19.500
> 
> 标签：javascript, arrays, mongodb, histogram

我`DATA`在 javascript 中有一个二维数组，并且想要计算直方图。我已经将垃圾箱作为一维数组放置了`my_bins`。

有没有一种简单的方法可以计算，对于 中的每个 bin ，在和之间的匹配`my_bins`中总共有多少条目。我想计算.`DATA``my_bins[i]-d``my_bins[i] +d``DATA`

我正在使用 mongodb，以防这对答案很重要。非常感谢！

# java - 检票口表单测试器 - formTester.submit() 的行为与“真实”检票口提交不同

> ID：13844859
> 
> 赞同：0
> 
> 时间：2012-12-12T17:03:32.257
> 
> 标签：java, wicket

当我在真实检票口中提交表单时，会为我的组件调用 onInitialize()，但是当我使用检票口测试器（更具体地说是使用 FormTester）提交时，不会调用组件的 onInitialize()。

当我们遇到我们的表单不起作用时，这引起了一些干扰，即使单元测试都很好。

一个例子：

```
@Test
public void test() {

    tester.startPage(SomePage.class);

    tester.assertComponent("content:form:fields:items:0:component", TextField.class);

    FormTester ft = tester.newFormTester("content:form");

    ft.setValue("fields:items:0:component:input", "test");

    ft.submit();

    tester.assertVisible("content:contactForm:successMsg");

} 
```

“successMsg”仅在成功时显示。测试成功了，而实际上它失败了，因为组件的 onInitialize() 中发生了一些逻辑。

我现在不完全确定这是一个检票口问题还是我们做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T06:31:14.423

onInitialize() 与表单提交无关。当组件第一次附加到页面的组件树时调用它。

看看 ComponentInitializationIntegrationTest。

# c++ - 在从通用树转换的二叉树中找到节点的父亲

> ID：13844860
> 
> 赞同：2
> 
> 时间：2012-12-12T17:03:38.417
> 
> 标签：c++, algorithm, tree

我正在使用通用树的二叉树实现，使用通用算法，节点的第一个儿子是“左”，任何其他兄弟姐妹都是第一个儿子的“右”。

我要回答的是，给定一个节点 p，我怎样才能找到节点 p 的父亲？

这是一个节点（我使用非递归方式遍历，因此访问和父属性）

```
struct node {
  std::string name;
  int sons;
  bool visited;
  node * first;
  node * next;
  node * parent;    
}; 
```

这是一个例子：

**通用树**

```
 A                   
 /|\       
B C D 
```

**GeneralTree 的 BinaryTree 版本**

```
 A
 /
B
 \
  C
   \
    D 
```

所以B、C、D的父节点都是A。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:20:35.327

只需遵循父链接，直到找到空引用 - 如果您从`p`作为根节点开始 - 或以您来自的节点作为其左子节点的节点开始，就会发生这种情况。

```
var current = p;
var parent = current.parent;

while ((parent != null) && (current != parent.left))
{
    current = parent;
    parent = current.parent;
} 
```

现在`parent`包含节点的父节点，`p`或者`null`如果`p`包含根节点。

# lucene - 用lucene中的许多独特术语惩罚文档

> ID：13844867
> 
> 赞同：1
> 
> 时间：2012-12-12T17:04:07.367
> 
> 标签：lucene, similarity, term

我的目的是在给定城市（术语）的情况下找到动物（doc）

我以这种方式对文档进行了索引：

```
doc1(bear)  = [city1, city2, city2, city3..]
doc2(dog)   = [city1, city1, city1, city2, city2, city2, city3, city3, city3..]
.. 
```

我想惩罚出现在许多城市中的（动物）文件，因此不同城市/所有城市比例很高的文件，如“狗”。

有什么建议么？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:56:32.140

它已经做到了！

请参阅[Similarity.computeNorm](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/search/Similarity.html#computeNorm%28java.lang.String,%20org.apache.lucene.index.FieldInvertState%29)。

默认情况下，norm 函数将较短字段上的匹配视为更精确的匹配，因此对它们的评分高于较长字段。

如果您需要它产生更大的影响，您可以使用自定义版本覆盖 DefaultSimilarity，并修改从 computeNorm 方法返回的值以更重地权衡计算的 lengthNorm 部分。如果您需要这样做，我建议您在现有算法的某处添加一个乘数，但可以根据需要对其进行调整。

笔记！如 API 中所述，此值存储在索引中，而不是在查询时计算。您必须重新索引才能看到更改生效。

* * *

computeNorm (3.6.0) 中的计算是：

```
state.getBoost() * ((float) (1.0 / Math.sqrt(numTerms))) 
```

其中 numterms 是字段中的术语总数，而 state 是[FieldInvertState](http://lucene.apache.org/core/3_6_0/api/all/org/apache/lucene/index/FieldInvertState.html)。

# string - 删除字符串的内容 - TextBox 的行为与 DataGridView 文本单元格略有不同

> ID：13844869
> 
> 赞同：2
> 
> 时间：2012-12-12T17:04:08.777
> 
> 标签：string, winforms, data-binding, datagridview, textbox

如果您设置一个简单的测试表单，其中 TextBox 绑定到类的字符串属性并删除内容，则传递回属性设置器的值为`""`.

![在此处输入图像描述](../Images/b044d2ed2f70a3d60f900aca684db712.png)

如果您对 DataGridView 中的单元格执行相同操作，则传递回属性设置器的值为`Nothing`.

![在此处输入图像描述](../Images/7d9874bfbbd80019851e07bcd8fdb20d.png)

为什么会有差异？我们可以对 DataGridView 应用什么以使其行为与 TextBox 相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:18:33.667

`Nothing`是 VB 的 C# 版本`null`或数据库的`NULL`. 这意味着没有值，而不是`""`意味着有一个空字符串的值。

我不完全确定，但我怀疑区别在于文本框的`Text`属性始终是字符串，但单元格的`Value`属性可以是任何对象。当值为 时，您可以使用[null-coalescing 运算符](https://stackoverflow.com/questions/403445/is-there-a-vb-net-equivalent-for-cs-operator)返回一个空字符串`Nothing`。

```
Set(ByVal value As String)
   _Surname = If(value, "")
End Set 
```

或者，您可以验证单元后编辑并将其设置为`""`显式。有关示例，请参见[此处](https://stackoverflow.com/a/4942831/298754)- 您只需更改值，而不是向用户发送消息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T00:15:03.400

如果正确`DataGridViewTextBoxCell`，则默认为`Null`
，`TextBox`默认为`String.Empty`

你可以检查[Null vs Empty](https://stackoverflow.com/questions/1628434/null-objects-vs-empty-objects)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-10T09:48:05.130

DataGridView 在单元格解析期间将 "" 转换为 Null。

如果您处理 CellParsing 事件并仅设置 ParsingApplied，则不会执行进一步的解析，结果值将保持为“”。

# sql-server - SQL Server 日期格式用户依赖？

> ID：13844870
> 
> 赞同：4
> 
> 时间：2012-12-12T17:04:08.853
> 
> 标签：sql-server, sql-server-2008

我有一个硬编码日期的查询，格式为

```
startdate >= '2012-11-03' AND enddate <= '2012-11-30 23:59' 
```

我的数据库日期格式是“mdy”，但我确定它会接受 yyyy-mm-dd 作为其通用日期结构。

当我尝试在与特定数据库用户 (userX) 连接的目标数据库上的 SSMS 中运行此查询时，我收到有关日期格式的错误

> *消息 242，级别 16，状态 3，第 1 行
> 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。*

但是，当我运行作为 SA 用户连接的确切查询时，查询会执行..

为什么是这样？我已授予 userX 完整的 dbo 权限（sysadmin 等），但仍然出现错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:30:27.267

如果您需要使用字符串指定日期时间，则应使用**安全**的、与语言无关的格式。

在 SQL Server 中，这是 ISO-8601 格式（稍作调整），它基本上支持两种安全格式`DATETIME`，始终有效 - 无论您的语言、区域和日期格式设置如何：

```
YYYYMMDD              (e.g. 20121231  for 31st of December 2012)  if you need date only

YYYY-MM-DDTHH:mm:ss   (e.g. 2012-12-31T21:05:00 for 31st of December 2012, 9:05pm) 
```

笔记：

*   第一个仅日期格式**没有破折号**或分隔符！

*   第二种格式的日期有破折号（也可以省略），并且`T`字符串的日期和时间部分之间有一个固定的分隔符

**更新：**根据您的最后评论（关于两个用户的不同默认语言） - 试试这个：

```
-- this is how your `SA` interprets the string as datetime....
SET LANGUAGE english
SELECT CAST('2012-11-30 23:59' AS DATETIME) 
```

工作得很好...

```
-- this is how your British user interprets teh string as datetime
SET LANGUAGE british
SELECT CAST('2012-11-30 23:59' AS DATETIME) 
```

> *消息 242，级别 16，状态 3，第 7 行
> 将 varchar 数据类型转换为 datetime 数据类型导致值超出范围。*

这试图将字符串解释为*2012 年第 30 个月的 11 日*，显然，这失败了......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:32:55.057

考虑使用

> 开始日期 >= '2012-11-03' AND 结束日期 < '2012-12-01'

反而

# excel - Excel VBA中的结束循环

> ID：13844872
> 
> 赞同：1
> 
> 时间：2012-12-12T17:04:13.590
> 
> 标签：excel, vba

我有一个用于工作簿的 excel VBA。如何结束工作表上的循环？我不确定该怎么做。这是代码。

```
Private Sub Workbook_SheetActivate(ByVal Sh As Object)
 Dim dtDate As Date
 Dim intHours As Long
 Dim ws As Worksheet

 intHours = 11
 dtDate = InputBox("Date", , Date)

 For Each ws In ThisWorkbook.Worksheets
 Set SelRange = Range("A6:A366")
 Next ws(**This where I need the loop to stop after the last worksheet**)

 For Each b In SelRange.Rows
 b.Value = dtDate + TimeSerial(intHours, 0, 0)
 b.Value = dtDate + TimeSerial(intHours, intMinutes, 0)
 intHours = intHours
 intMinutes = intMinutes + 1
 If intHours > 24 Then
        intHours = intHours - 24

End If
Next
End Sub 
```

我需要在最后一个工作表即工作表 6 之后结束循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:36:50.093

根据您的问题，您只需要检查工作表索引以查看它是否为 6，如果是，则退出 for 循环。见下文。关于您的评论；您需要将其更改为 on workbook open 方法，以便仅在打开工作簿时运行一次。

附带说明一下，您的第一个 FOR 循环超出了第二个 FOR 循环的范围，因此您只是一遍又一遍地设置范围，并且在第一个 FOR 循环退出之前什么都不做。最好解释一下您要完成的全部工作，以便获得更好的响应。

```
Private Sub Workbook_Open()
Dim dtDate As Date
Dim intHours As Long
Dim ws As Worksheet

intHours = 11

For Each ws In ThisWorkbook.Worksheets
    'check the index of the worksheet and exit if it is 6
    If ws.Index = 6 Then
        Exit For
    End If
'get the date per sheet
dtDate = InputBox("Date", , Date)
    Set SelRange = Range("A6:A366")
Next ws '(**This where I need the loop to stop after the last worksheet**)

For Each b In SelRange.Rows
    b.Value = dtDate + TimeSerial(intHours, 0, 0)
    b.Value = dtDate + TimeSerial(intHours, intMinutes, 0)
    intHours = intHours
    intMinutes = intMinutes + 1
    If intHours > 24 Then
       intHours = intHours - 24
    End If
Next
End Sub 
```

* * *

这就是我认为你想要完成的事情。

```
Private Sub Workbook_Open()
Dim dtDate As Date
Dim intHours As Long
Dim ws As Worksheet

intHours = 11

For Each ws In ThisWorkbook.Worksheets

dtDate = InputBox("Date", , Date)
    'check the index of the worksheet and exit if it is 6
    If ws.Index = 6 Then
        Exit For
    End If
    Set SelRange = ws.Range("A6:A366")
    For Each b In SelRange.Rows
        b.Value = dtDate + TimeSerial(intHours, 0, 0)
        b.Value = dtDate + TimeSerial(intHours, intMinutes, 0)
        intHours = intHours
        intMinutes = intMinutes + 1
        If intHours > 24 Then
           intHours = intHours - 24
        End If
    Next
Next ws '(**This where I need the loop to stop after the last worksheet**)

End Sub 
```

# java - Java请求文件，发送文件（客户端-服务器）

> ID：13844875
> 
> 赞同：2
> 
> 时间：2012-12-12T17:04:26.303
> 
> 标签：java, sockets, networking, connection-reset

我正在制作一个客户端-服务器。我已经知道服务器可以发送硬编码文件，但不能发送指定的客户端。我将只需要发送文本文件。据我了解：客户端首先发送文件名，然后服务器发送它，没什么复杂的，但是我遇到了各种错误，这段代码是连接重置/套接字关闭错误。主要问题是，没有太多时间研究网络。

我会很感激我能得到的任何帮助。

**编辑。** 我找到了解决方法，关闭流会导致套接字关闭，这是为什么呢？它不应该发生，不是吗？

服务器端：

```
 InputStream sin=newCon.getInputStream();
    DataInputStream sdata=new DataInputStream(sin);
    location=sdata.readUTF();   
    //sdata.close();
    //sin.close();

File toSend=new File(location);
byte[] array=new byte[(int)toSend.length()];
FileInputStream fromFile=new FileInputStream(toSend);
BufferedInputStream toBuffer=new BufferedInputStream(fromFile);
toBuffer.read(array,0,array.length);

OutputStream out=newCon.getOutputStream(); //Socket-closed...
out.write(array,0,array.length);
out.flush();
toBuffer.close();
newCon.close(); 
```

客户端：

```
int bytesRead;
server=new Socket(host,port);

OutputStream sout=server.getOutputStream();
DataOutputStream sdata=new DataOutputStream(sout);
sdata.writeUTF(interestFile);
//sdata.close();
//sout.close();

InputStream in=server.getInputStream();     //socket closed..
OutputStream out=new FileOutputStream("data.txt");
byte[] buffer=new byte[1024];
while((bytesRead=in.read(buffer))!=-1)
{
    out.write(buffer,0,bytesRead);
}
out.close();
server.close(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T01:35:06.893

尝试在写入客户端输出流时从服务器读取文件的块，而不是创建临时字节数组并将整个文件读入内存。如果请求的文件很大怎么办？还要在 finally 块中关闭服务器端的新 Socket，以便即使抛出异常也关闭套接字。

服务器端：

```
 Socket newCon = ss.accept();
    FileInputStream is = null;
    OutputStream out = null;
    try {
        InputStream sin = newCon.getInputStream();
        DataInputStream sdata = new DataInputStream(sin);
        String location = sdata.readUTF();
        System.out.println("location=" + location);
        File toSend = new File(location);
        // TODO: validate file is safe to access here
        if (!toSend.exists()) {
            System.out.println("File does not exist");
            return;
        }
        is = new FileInputStream(toSend);
        out = newCon.getOutputStream();
        int bytesRead;
        byte[] buffer = new byte[4096];
        while ((bytesRead = is.read(buffer)) != -1) {
            out.write(buffer, 0, bytesRead);
        }
        out.flush();
    } finally {
        if (out != null)
            try {
               out.close();
            } catch(IOException e) {
            }
        if (is != null)
            try {
               is.close();
            } catch(IOException e) {
            }
        newCon.close();
    } 
```

如果您使用[Apache Common IOUtils](http://commons.apache.org/io/)库，那么您可以减少将文件读/写到流的大部分代码。这里 5 行减为 1 行。

```
org.apache.commons.io.IOUtils.copy(is, out); 
```

请注意，拥有通过绝对路径为远程客户端提供文件的服务器具有潜在危险，并且目标文件应限制在给定目录和/或文件类型集。不想将系统级文件提供给未经身份验证的客户端。

# mysql - mysql：选择以 2012-02* 开头的所有字段

> ID：13844877
> 
> 赞同：0
> 
> 时间：2012-12-12T17:04:29.960
> 
> 标签：mysql, sql, datetime

如何选择 mysql 中以“2012-02”开头的所有字段？

我试过的：

```
mysql> SELECT title,id FROM dle_post WHERE approve='1' AND date = '2012-02-13 21:35:00';
+-------------------------------------------------+----+
| title                                           | id |
+-------------------------------------------------+----+
| test title                                      |  7 |
+-------------------------------------------------+----+

mysql> SELECT title,id FROM dle_post WHERE approve='1' AND date='2012-02%';
Empty set, 2 warnings (0.00 sec)

mysql> SHOW WARNINGS;
+---------+------+-----------------------------------------------------------------+
| Level   | Code | Message                                                         |
+---------+------+-----------------------------------------------------------------+
| Warning | 1292 | Incorrect datetime value: '2012-02%' for column 'date' at row 1 |
| Warning | 1292 | Incorrect datetime value: '2012-02%' for column 'date' at row 1 |
+---------+------+-----------------------------------------------------------------+ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:06:49.910

理想情况下，日期应被视为日期，而不是字符串。此查询应返回 2012 年 2 月的所有行，并且应该优于`LIKE %`查询：

```
SELECT title, id
FROM dle_post
WHERE approve = 1 
AND date >= '2012-02-01' 
AND date <  '2012-02-01' + INTERVAL 1 MONTH 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:06:30.287

改成

```
SELECT title,id FROM dle_post WHERE approve='1' AND date LIKE '2012-02%'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:07:02.770

使用 like 运算符检查这些值

```
SELECT title,id FROM dle_post WHERE approve='1' AND date LIKE '2012-02%'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T17:10:49.890

你有没有尝试过

```
date LIKE '2012-02%' 
```

代替

```
date='2012-02%' 
```

您可能还必须使用 DATE_FORMAT(date,format) 将日期转换为字符串

见：[http ://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)

# qooxdoo - Qooxdoo - 忽略 config.json 文件中的全局变量

> ID：13844878
> 
> 赞同：1
> 
> 时间：2012-12-12T17:04:33.713
> 
> 标签：qooxdoo

您可以忽略 config.json 文件中的全局变量，例如 OpenLayers 吗？

我不得不在每个类文件的顶部执行此操作：

```
/**
* @ignore(OpenLayers)
*/ 
```

我也试过这个：

```
"lint" :
    {
      "lint-check" :
      {
        "allowed-globals" : 
        [               
          "OpenLayers"              
        ]
      }
    }, 
```

但这似乎并没有奏效。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:05:06.557

这真的取决于您正在运行的生成器作业。您的第二种方法，将*OpenLayers*添加到配置中`lint/lint-check/allowed-globals`应该很好地为您服务时运行`generate.py lint`.

但为了使其也与编译作业（源*、构建）相关，您还需要将`lint-check`密钥注入到*它们的*配置中。只需将此键分叉到专用的作业定义中，然后将其包含在“工人”作业中，例如：

```
"my-lint-options" : {
  "lint-check" : {
    "allowed-globals" : [
      "OpenLayers"
    ]
  }
},

"lint" : {
  "extend" : ["my-lint-options"],
},

"source-script" : {
  "extend" : ["my-lint-options"],
},

"source-all-script" : {
  "extend" : ["my-lint-options"],
},

"build-script" : {
  "extend" : ["my-lint-options"],
} 
```

现在所有相关作业都应该遵守忽略*OpenLayers*全局的设置。

# c++ - 参数对象的向量

> ID：13844881
> 
> 赞同：0
> 
> 时间：2012-12-12T17:04:34.867
> 
> 标签：c++, templates

我想创建一个参数类型的对象向量，其中每个对象都有不同的专用类型。例子：

```
template<typename A>
struct BaseAtom
{
    A _a;
};

struct AtomA : BaseAtom<int>
{};

int main()
{
    std::vector<BaseAtom*> v; // (1)

    AtomA a;

    v.push_back(&a);
} 
```

从逻辑上讲，这不起作用，因为 BaseAtom 是模板类型，并且模板参数未在 (1) 中指定。如何创建具有此特征的向量？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:06:58.927

您可以`BaseAtom<A>`从一个通用的非模板类派生，并存储指向该类的指针：

```
struct Base {};

template<typename A>
struct BaseAtom: Base
{
    A _a;
};

struct AtomA : BaseAtom<int>
{};

int main()
{
    std::vector<Base*> v; // (1)

    AtomA a;

    v.push_back(&a);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T17:09:51.840

要么选择模板的一些特化放入向量中：

```
std::vector<BaseAtom<int>*> v; 
```

或者定义一个非模板基类：

```
struct BaseAtomBase {};  // put anything independent of the template parameter here

template <typaname A>
struct BaseAtom : BaseAtomBase
{
    A _a;
};

std::vector<BaseAtomBase*> v; 
```

但请注意，这不允许您从向量访问对象的模板化部分。

您需要弄清楚哪些（如果有的话）适合您要解决的问题。

# vb.net-2010 - 如何使用带有 Vbasic 的 Visual Studio 2010 express 以编程方式垂直滚动表单上的文本框

> ID：13844883
> 
> 赞同：0
> 
> 时间：2012-12-12T17:04:39.437
> 
> 标签：vb.net-2010

我正在使用带有 Visual Basic 的 Visual Studio Express 2010。我试图在 30 天内充分学习和测试该产品，以查看常规 Visual Studio 2010（尤其是 Vbasic）是否能满足我的需求。这是问题/问题。我在表单上有一种输出类型的文本框，textbox1，它是以编程方式写入的。我已将其设置为多行、启用、只读和滚动条：垂直。我需要修复它，以便每次覆盖或附加文本时滚动拇指自动移动到底部。（我正在覆盖，但实际上添加到文本框（TextBox1.Text & Chr(13) & Chr(10) & newtextdata）。TextBox1 的值属性包括最小值为零和最大值为 100。更改这些不会'似乎没有帮助。文本框上没有自动滚动属性。我什至尝试将文本框设置为滚动条：无，然后从工具栏中添加一个 VScrollBar，但我无法将它连接到 TextBox1，而且我也不知道如何以编程方式将其滚动到底部。请给我必要的代码好吗？另外，如果需要系统导入，请您也提一下吗？这对我来说是一个成败的功能。如果这个产品和 vbasic 不会这样做，那么我必须看看别的东西。我已经在这里搜索了三本书以及在线，但无法弄清楚。非常感谢！请给我必要的代码好吗？另外，如果需要系统导入，请您也提一下吗？这对我来说是一个成败的功能。如果这个产品和 vbasic 不会这样做，那么我必须看看别的东西。我已经在这里搜索了三本书以及在线，但无法弄清楚。非常感谢！请给我必要的代码好吗？另外，如果需要系统导入，请您也提一下吗？这对我来说是一个成败的功能。如果这个产品和 vbasic 不会这样做，那么我必须看看别的东西。我已经在这里搜索了三本书以及在线，但无法弄清楚。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:10:31.227

感谢这里的建议（来自 David），我想出了一些可行的方法，并且因为它与 David 的建议不完全相同，所以我想与您分享具体细节……</p>

首先，我添加了一个公共子…</p>

PublicClassForm1 PublicSub ScrollToCaret()

结束子

然后在用户输入的接受按钮例程中，我做了以下......

```
 OutputTextBox.ScrollToCaret()
        OutputTextBox.SelectedText = strTextBeingAdded + _
            Microsoft.VisualBasic.vbCrLf 
```

我遇到了一个问题，尽管在设计页面上设置了 OutputTextBox.Text 并且不得不将其删除并将其放入 Form 加载事件中，以便它也可以滚动到插入符号那里......

PrivateSub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) HandlesMyBase.Load OutputTextBox.ScrollToCaret() OutputTextBox.SelectedText = "Initial Description" & strWrap + _ Microsoft.VisualBasic.vbCrLf

感谢您的评论导致我这样做！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T18:34:19.490

使用[SelectionStart](http://msdn.microsoft.com/en-us/library/system.windows.forms.textboxbase.selectionstart.aspx)属性：

```
TextBox.SelectionStart = Len(TextBox.Text) 
```

# visual-c++ - 有没有办法在 mfc 应用程序中获取光标位置？

> ID：13844886
> 
> 赞同：3
> 
> 时间：2012-12-12T17:04:45.883
> 
> 标签：visual-c++, mfc

我正在使用 OnKeyDown 处理程序来检测 Enter 按键：

```
void CShortestPathFinderView::OnKeyDown(UINT nChar, UINT nRepCnt, UINT nFlags)
{
  if( nChar == VK_RETURN)    //Enter key is pressed
{
    CClientDC aDC(this);
    rubberbanding = 0;
            m_pTempElement->vertices[i++]=  /*cursor position??*/;
    mSecondPoint=m_pTempElement->vertices[0];
    m_pTempElement->Draw(&aDC);
} 
```

在 if 语句的第 3 行中，我需要将光标位置存储在数组中，但是如何获取该点？处理程序是否提供给我？还是有一个单独的功能可以这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:17:41.817

要获取当前光标位置，可以调用`GetCursorPos`. 我不相信 MFC 为此提供了一个包装器，所以它只是 Win32 [`::GetCursorPos`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms648390.aspx)。它返回屏幕坐标中的点，因此您（几乎可以肯定）希望[`ScreenToClient`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd162952.aspx)在存储之前将其转换为客户区坐标。

但是请注意，*当您调用它时*`GetCursorPos`，它将返回光标的位置。这可能与按下键时光标所在的位置完全相同，也可能不完全相同（尽管通常至少*会非常接近）。*

 **通常，要添加这样的光标位置，您需要对用户单击鼠标按钮（例如，[`WM_LBUTTONDOWN`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645607.aspx)）做出反应。该消息将告诉您单击按钮时鼠标的位置。**

# css - 多余的滚动条

> ID：13844891
> 
> 赞同：1
> 
> 时间：2012-12-12T17:05:00.593
> 
> 标签：css, scrollbar, overflow, opera

在[这个小提琴](http://jsfiddle.net/Zb6pk/)中，我有一个 100% 高度的 div，其内容水平溢出。它在 IE、Firefox 和 Chrome 中按预期工作，但 Opera 会创建一个垂直滚动条来滚动水平滚动条所覆盖的距离。有没有办法避免这种情况？

`overflow-y:hidden`有点工作，但 div 仍在水平滚动条下方拉伸。

```
<html><body><div id="filler"><div id="scroller"></div></div></body></html>

#filler{
        position:absolute;
        top:100px;
        bottom:0;
        width:100%;
        overflow:auto;
    }
#scroller{
        height:100%;
        width:2000px;    
        } 
```

![比较图像](../Images/a7fba30d6e4df833b5a20a4588e550af.png)

# python - 在特定接口上接收组播数据

> ID：13844893
> 
> 赞同：5
> 
> 时间：2012-12-12T17:05:15.247
> 
> 标签：python, sockets, multicast, packet, tcpdump

tcmpdump 可以查看到 eth2 上特定组和端口的所有多播流量，但我的 Python 程序不能。在 Ubuntu 12.04 上运行的 Python 程序：

```
sock = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
sock.setsockopt(socket.SOL_SOCKET, socket.SO_REUSEADDR, 1)

# Multicast port is 52122
sock.bind(('', 52122))

# Interface eth2 IP is 1.2.3.4, multicast group is 6.7.8.9
mreq = socket.inet_aton('6.7.8.9')+socket.inet_aton('1.2.3.4')
sock.setsockopt(socket.IPPROTO_IP, socket.IP_ADD_MEMBERSHIP, mreq)

while True:
    print '\nwaiting to receive message'
    data, address = sock.recvfrom(1024)
    print data 
```

当我使用另一个程序向 eth2 发送多播数据包时，它会工作并打印数据包。但它看不到所有当前的多播流量。如果我在与上述程序相同的端口和组上的 eth2 上运行 tcpdump：

```
sudo tcpdump -i eth2 host 6.7.8.9 and port 52122 
```

它既可以看到我从另一个程序发送的数据包，也可以看到所有当前的多播流量。它的输出看起来像这样......

```
# Packet sent from my other program
09:52:51.952714 IP 1.2.3.4.57940 > 6.7.8.9.52122: UDP, length 19
# Packet send from the outside world
09:52:52.143339 IP 9.9.9.9.39295 > 6.7.8.9.52122: UDP, length 62 
```

为什么我的程序看不到来自外界的数据包？我该如何修改它（或其他东西）来解决这个问题？

编辑：

我应该提到，这个经过的接口不是`eth2`一个`eth2.200`VLAN。（本地 IP 和 tcpdump 命令都使用 运行`eth2.200`，我只是在这个问题中更改了它以使其更简单。）基于[这个答案](https://stackoverflow.com/a/7901972/862710)可能是问题吗？

编辑#2：

`netstat -ng`当程序运行时显示`eth2.200`订阅了 224.0.0.1 和 6.7.8.9`。

`tshark -i eth2.200 igmp``1.2.3.4 -> 6.7.8.9 IGMP 46 V2 Membership Report / Join group 6.7.8.9`程序第一次启动时显示三个重复。当程序进程被杀死时，它显示`1.2.3.4 -> 224.0.0.2 IGMP 46 V2 Leave group 6.7.8.9`. 还有一个 infrequent `1.2.3.1 -> 224.0.0.1 IGMP 60 V2 Membership Query, general`，其中 1.2.3.1 是 1.2.3.4 的网关。

不确定它是否会有所帮助，但路由表如下所示：

```
Destination     Gateway         Genmask         Flags   MSS Window  irtt Iface
0.0.0.0         1.2.5.6         0.0.0.0         UG        0 0          0 eth1
1.2.3.0         0.0.0.0         255.255.255.240 U         0 0          0 eth2.200 
```

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T20:59:47.353

最后！在 ServerFault 上发现[了这个问题](https://serverfault.com/questions/163244/linux-kernel-not-passing-through-multicast-udp-packets)，它解决了同样的问题。基本上内核没有转发/过滤掉数据包，因为它认为源地址被欺骗了。

更改了 /etc/sysctl.conf 中的设置以匹配：

```
net.ipv4.conf.default.rp_filter = 0
net.ipv4.conf.all.rp_filter = 0
net.ipv4.ip_forward = 1 
```

重新启动，一切正常。

# oracle - 如何使用oracle从存储函数中检索多行

> ID：13844898
> 
> 赞同：5
> 
> 时间：2012-12-12T17:05:35.123
> 
> 标签：oracle, plsql

我正在尝试在 oracle 中创建一个返回多行的存储函数。

[我的问题与这个](https://stackoverflow.com/questions/101033/how-to-return-multiple-rows-from-the-stored-procedure-oracle-pl-sql)问题非常相似，只是我想获取一个`select *`查询

简而言之，我想创建一个返回此查询结果的函数

```
select * from t_email_queue 
```

我试过的是这样的：

```
create or replace
PACKAGE email_queue AS 

  type t_email_queue_type is table of T_EMAIL_QUEUE%ROWTYPE;  

  FUNCTION lock_and_get return t_email_queue_type;

END email_queue;

create or replace
PACKAGE BODY email_queue AS 

    FUNCTION lock_and_get RETURN t_email_queue_type AS 
      queue_obj t_email_queue_type;

      cursor c (lockid in varchar2) is select * from t_email_queue where lockedby = lockid;
      lockid varchar2(100) := 'alf';
    BEGIN

      OPEN c(lockid);
      FETCH c bulk collect INTO queue_obj;

      return queue_obj;

    END lock_and_get;

END email_queue; 
```

包编译得很好但是当我尝试用这个查询调用它时

```
select * from table(email_queue.lock_and_get); 
```

Oracle 抛出以下错误

```
ORA-00902: invalid datatype
00902\. 00000 -  "invalid datatype"
*Cause:    
*Action:
Error at Line: 1 Column: 20 
```

我认为 Oracle 希望我在架构级别创建返回类型，但是当我尝试这样做时

```
create type t_email_queue_type is table of T_EMAIL_QUEUE%ROWTYPE; 
```

甲骨文抱怨

```
Type IMAIL.T_EMAIL_QUEUE_TYPE@imail dev
Error(1): PL/SQL: Compilation unit analysis terminated
Error(2,37): PLS-00329: schema-level type has illegal reference to IMAIL.T_EMAIL_QUEUE 
```

有人可以指出我正确的方向吗？我在这里想念什么？

谢谢阅读！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-12T17:29:50.957

对于 SQL 类型，您不能执行 %ROWTYPE，您必须键入每一列以匹配表*。

*sys.anydataset 放在一边。但是沿着这条路线走下去是更复杂的编码。

例如，如果你的桌子是

```
create table foo (id number, cola varchar2(1)); 
```

然后

```
create type email_queue_type is object (id number, cola varchar2(1));
/
create type t_email_queue_type as table of email_queue_type;
/ 
```

并使用该表 email_queue_type_tab 作为函数的输出。

但我建议使用流水线函数，因为您当前的代码不可扩展。

例如：

```
SQL> create table foo (id number, cola varchar2(1));

Table created.

SQL>
SQL> create type email_queue_type is object (id number, cola varchar2(1));
  2  /

Type created.

SQL> create type t_email_queue_type as table of email_queue_type;
  2  /

Type created.

SQL> insert into foo select rownum, 'a' from dual connect by level <= 10;

10 rows created.

SQL>
SQL> create or replace PACKAGE email_queue AS
  2
  3
  4    FUNCTION lock_and_get return t_email_queue_type pipelined;
  5
  6  END email_queue;
  7  /

Package created.

SQL> create or replace PACKAGE BODY email_queue AS
  2
  3      FUNCTION lock_and_get RETURN t_email_queue_type pipelined AS
  4        queue_obj t_email_queue_type;
  5
  6      BEGIN
  7
  8       for r_row in (select * from foo)
  9              loop
 10                pipe row(email_queue_type(r_row.id, r_row.cola));
 11              end loop;
 12
 13      END lock_and_get;
 14
 15  END email_queue;
 16  /

Package body created.

SQL> select * from table(email_queue.lock_and_get());

        ID C
---------- -
         1 a
         2 a
         3 a
         4 a
         5 a
         6 a
         7 a
         8 a
         9 a
        10 a

10 rows selected.

SQL> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T18:53:19.190

如果您不是特别热衷于使用 SQL 类型，则可以使用 a`sys_refcursor`代替：

```
create or replace package email_queue as 
    function lock_and_get return sys_refcursor;
end email_queue;
/

create or replace package body email_queue as 
    function lock_and_get return sys_refcursor AS 
        c sys_refcursor;
        lockid varchar2(100) := 'alf';
    begin
        open c for
            select * from t_email_queue
            where lockedby = lockid;

         return c;
    end lock_and_get;
end email_queue;
/ 
```

在 SQL*Plus 中，您可以这样称呼它：

```
var cur refcursor;
exec :cur := email_queue.lock_and_get;
print cur 
```

作为`exec`简单匿名块的简写，您也可以从其他 PL/SQL 对象调用 if。但是，您不能做的是：

```
select * from table(email_queue.lock_and_get); 
```

我不熟悉从 PHP 调用函数，但是从 Java 中，您可以直接将其用作可调用语句的返回值，因此您根本不需要该`select * from table()`构造。我不知道您是否可以在 PHP 调用中执行一个匿名块，例如`begin $cur = email_queue.lock_and_get; end;`，然后`$cur`将结果集作为您可以迭代的结果集？

我意识到这不是一个完整的答案，因为 PHP 方面太模糊了，但可能会给你一些想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-19T13:59:50.867

如果您使用 PHP 并且想要访问 oracle 存储的函数。你可以利用这样的东西

```
//Your connection details
$conn = oci_connect($username, $password, '(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = 127.0.0.1)(PORT = 1521))(CONNECT_DATA = (SERVER = DEDICATED) (SERVICE_NAME = XE)))' );

/* Your query string; you can use oci_bind_by_name to bind parameters or just pass the variable in it*/

$query = "begin :cur := functionName('".$param1."','".$param2."','".$param3."'); end;";
$stid = oci_parse($conn, $query); 
$OUTPUT_CUR = oci_new_cursor($conn);
oci_bind_by_name($stid, ':cur', $OUTPUT_CUR, -1, OCI_B_CURSOR);
oci_execute($stid); 
oci_execute($OUTPUT_CUR);
oci_fetch_all($OUTPUT_CUR, $res);

// To get your result  
var_dump($res); 
```

我希望这有帮助。

# jquery - jQuery on() 语法

> ID：13844900
> 
> 赞同：0
> 
> 时间：2012-12-12T17:05:46.040
> 
> 标签：jquery, syntax

我有一个新手语法问题，这是我的代码：

```
$('.selector').on({
  mouseenter: function() {
    // ...
  },
  mouseleave: function() {
    // ...
  }
}); 
```

现在，如果我想将 mouseenter 和 touchstart 事件绑定到同一个函数怎么办？我知道我可以这样做：

```
$('.selector').on('mouseenter touchstart', function(){
  // ...
}); 
```

但我喜欢我的第一个例子的外观。（我的想法是否正确，只是我的示例中的语法不同？）还有谁知道我可以在哪里查找这些东西？jQuery API 只展示了一种写东西的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:08:28.680

如果两个事件绑定到同一个函数，那么*将它们绑定到同一个函数！*

如果您创建两个具有相同主体的匿名函数，您将使用比您需要的更多的内存，因为您实际上将创建两个单独的函数。

从这个意义上说，您的两个示例在语义上*并不相同。*

*或者，在*外部声明回调函数（即不作为匿名函数）并使用第一种语法：

```
var cb = function(ev) { ... }

$(el).on({
    mouseenter: cb,
    touchstart: cb
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:08:14.977

试试这个方法

```
 $('.selector').on({
       mouseenter : move,
       touchstart : move
   });

    function move(){

    } 
```

如果您想为这两个事件定义不同的功能，请采用这种方法。

如果两者的功能相同，那么您的代码应该可以工作..

# java - 有没有办法自动捕获异常？

> ID：13844901
> 
> 赞同：1
> 
> 时间：2012-12-12T17:05:54.120
> 
> 标签：java, exception-handling

假设我有 10 行代码。任何行都可能引发 NullPointerException。我不想关心这些异常。如果一行抛出异常，我希望执行程序跳转到下一行并继续前进。我可以在 Java 上做到这一点吗？如果是，请给我一些示例代码。

更新：（添加示例源以获得更清晰的问题）

```
first.setText(prize.first);
second.setText(prize.second);
third.setText(prize.third);
fourth.setText(prize.fourth);
fifth.setText(prize.fifth);
sixth.setText(prize.sixth);
seventh.setText(prize.seventh);
eighth.setText(prize.eighth); 
```

假设我上面有 8 行代码。我想要的是：如果第 4 行（或第 5、6、...）行抛出异常，则所有其他代码行都正常工作。当然，我可以使用 try...catch 逐行捕获异常。但是这种方式使我的来源非常复杂。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T17:13:38.733

这是不可能的。如果你想一想，你会发现这也是无稽之谈。以这段代码为例：

```
String s = getSomeString(); // assigns null
int length = s.length; // throws NPE

if (length > 10) { // what would you do here?? length is un-initialized
    domeSomething();
} 
```

## 编辑

现在您已经使用代码片段更新了您的问题，有两种处理s 的**通用方法：**`null`

## 1\. 在不应该出现的地方禁止他们

在您的代码片段中，您提供了一个`EditText`s 列表，其中任何一个都可能为空。好吧，在我看来，如果你`Activity`在 Android 中有一个应该有一些视图的视图，那么如果其中任何一个出于某种原因，那就是**编程错误。**`null`没有其某些视图的活动无法正常工作，因此抛出 NPE 并退出应用程序是一件非常明智的事情。

NPE 告诉你“*嘿，你犯了一个错误，你必须改正它*”。在那之前，处于不可预测状态的应用程序继续执行是不安全的，因为没有人知道会发生什么，什么数据会损坏。

## 2\. 在有意义的地方允许他们，并提供空检查

在某些地方，您可以拥有值可以为空的变量。有几种方法可以表达一个空值，并且`null`是最明显的一种。

在这种情况下，您不能忽略 NPE 的可能性，您必须进行一些空值检查。但同样，**NPE 不是你的敌人**。它会告诉您，您忘记了考虑所有可能出现的情况。

当然，重复的 null 检查会使代码变得混乱和嘈杂，因此您可以创建一些方法来为您概括 null 检查。我想不出一个合理的例子，所以用这个方法只是为了说明：

```
public void clearEditTexts(EditText... editTexts) {
    for (EditText e : editTexts) {
        if (e != null) {
            e.setText("");
        }
    }
} 
```

此方法清除所有传递的 EditText 的内容。它们中的任何一个都可以为空，但此方法在内部进行这些空检查，因此您不必为每个都手动进行。

* * *

这个问题也是关于处理空值的一个很好的阅读： [避免！=空语句](https://stackoverflow.com/questions/271526/avoiding-null-statements-in-java)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-12-12T17:09:21.427

这是不可能的。如果您的变量可以为空，您只需要检查它，或防止它们为空。创建一个覆盖的方法什么都不做的虚拟对象实现很少有用，因此它可以用来代替有效对象而不是 null。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-12T17:18:28.183

变量为 null 的事实是值得注意的，不应被忽略。因此，你会想要这样的东西：

```
...
if(first != null && prize.first != null)
{
    first.setText(prize.first);
}
... 
```

如果出于某种原因，您绝对需要抛出 NPE，则需要用自己的 try/catch 包围每一行；没有办法自动捕获异常并让它前进到下一行。但是，不建议这样做。

```
...
try
{
    first.setText(prize.first);
}
catch(NullPointerException e)
{
}
try
{
    second.setText(prize.second);
}
catch(NullPointerException e)
{
}
... 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-12T17:09:18.993

不，你不能，你应该关心，他们试图告诉你什么是错的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-12T17:14:16.033

NullPointerException 是运行时（未经检查的）异常，Java 不建议捕获未经检查的异常。你应该有一个解决方案来防止它。

# php - mysql 数据库，点击链接编辑表行值

> ID：13844904
> 
> 赞同：-3
> 
> 时间：2012-12-12T17:05:59.627
> 
> 标签：php

> **可能重复：**
> [根据 id mysql DB 获取特定表行](https://stackoverflow.com/questions/13843809/getting-specific-table-row-based-on-id-mysql-db)

我有一个显示的数据库，但我想让表“id”成为编辑该表行的链接。因此，如果我显示 10 行数据，最后一列将是行​​的 id，单击 id 是指向该特定行的编辑表单的链接。
最简单的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:29:31.777

不知道在什么情况下你有这个要求..

在列出您的记录的页面上，将它们放入包含 ID 的列的 HTML 表中，将其呈现为

```
<php echo '<a href="edit.php?id='.ResultsArray[ID].'">Edit</a>'; ?> 
```

然后在您的编辑页面 (edit.php) 中使用通过 URL 传入的 id，例如 $_GET['id'].. 列出允许您编辑该记录的表单

您的 SQL 将使用 WHERE 类过滤到选择的记录

# haskell - 无法在 Mac OSX 上安装 scion-browser

> ID：13844909
> 
> 赞同：1
> 
> 时间：2012-12-12T17:06:26.170
> 
> 标签：haskell, cabal, eclipse-fp

`cabal install scion-browser`给出：

```
[ 6 of 23] Compiling Scion.PersistentBrowser.Query ( src/Scion/PersistentBrowser/Query.hs, dist/build/scion-browser/scion-browser-tmp/Scion/PersistentBrowser/Query.o )

src/Scion/PersistentBrowser/Query.hs:258:58:
    No instance for (MonadResource IO)
      arising from a use of `get'
    Possible fix: add an instance declaration for (MonadResource IO)
    In a stmt of a 'do' block: Just dc <- get declId
    In the expression:
      do { Just dc <- get declId;
           getDbModule dc }
    In an equation for `getDbModule':
        getDbModule (DbConstructor _ _ declId)
          = do { Just dc <- get declId;
                 getDbModule dc } 
```

和一些其他信息：

```
$ ghc-pkg list mtl
/usr/local/Cellar/ghc/7.4.2/lib/ghc-7.4.2/package.conf.d
   mtl-2.1.2
/Users/eric/.ghc/x86_64-darwin-7.4.2/package.conf.d
$ ghc-pkg list transformers
/usr/local/Cellar/ghc/7.4.2/lib/ghc-7.4.2/package.conf.d
   transformers-0.3.0.0
/Users/eric/.ghc/x86_64-darwin-7.4.2/package.conf.d
$ ghc-pkg list haskeline
/usr/local/Cellar/ghc/7.4.2/lib/ghc-7.4.2/package.conf.d
/Users/eric/.ghc/x86_64-darwin-7.4.2/package.conf.d
   haskeline-0.7.0.3 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T08:53:14.010

这是一个已知问题，请参阅[https://github.com/JPMoresmau/scion-class-browser/issues/4](https://github.com/JPMoresmau/scion-class-browser/issues/4)。将在下一个版本中修复（也许我会在本周 2012 年 12 月 15 日左右发布）

# css - IE8 请求 CSS 字体的错误路径

> ID：13844912
> 
> 赞同：3
> 
> 时间：2012-12-12T17:06:41.283
> 
> 标签：css, internet-explorer-8, font-face

我不完全确定为什么会发生这种情况，但我似乎收到了一些关于 IE8 对 CSS font-face 字体的请求的常规服务器端错误报告。CSS 中的路径是相对正确的，我没有看到任何来自 IE9 的错误。

这是记录的示例错误消息（某些信息被掩盖）。

```
{
  "DateTimeUTC": "2012-12-10T15:58:32.2512016+00:00",
  "RequestId": "goq9",
  "UserIP": "72.221.104.224",
  "UserAgent": "Mozilla/4.0 (compatible; MSIE 8.0; AOL 9.6; AOLBuild 4340.5004; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; Media Center PC 6.0; MDDS; .NET4.0C; Zune 4.7)",
  "ReferringUrl": "https://some-site/some/path/option1/option2",
  "Message": {
    "Exception": null,
    "RequestId": null,
    "ErrorCode": 404,
    "ErrorDescription": "Not Found",
    "OriginalUrl": "/some/path/fonts/rokkitt/rokkitt-webfont.eot"
  },
  "Exception": null,
  "RequestUrl": "https://some-site.com/some/path/fonts/rokkitt/rokkitt-webfont.eot",
  "Cookies": [/*removed from display*/],
  "PostData": {},
  "DebugInfo": null
}
```

如您所见，请求似乎是针对具有相对于页面 url 的路径的字体，而不是 css 文件的 url。（/content/css/site/site.css 与 /content/fonts/... 中的字体） IE8 是否恰好检查相对于页面？或者它是否同时检查两者？

我看到了类似的问题，似乎都是 IE8，但我自己无法重新创建问题。它似乎确实是 AOL 支持的 IE8，不确定这是否会有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-10T23:10:03.660

我遇到了同样的问题，我认为这是由嵌入的样式表引起的（即 HTML HEAD 中的 STYLE 元素中的规则）。我在错误日志中看到来自 IE8 的 404，以查找奇数路径中的 .eot 文件。.eot 文件在我的外部样式表中以相对路径引用。解析相对于样式表 URL 的路径的浏览器会找到字体文件，但 IE8 似乎偶尔会解析相对于文档 URL 的路径。我无法用我的 IE8 实例重现这一点，但日志讲述了一个非常清楚的故事。

我们最近更改了我们的应用程序以使用包含一些与字体相关的规则的小型嵌入式样式表（即 HEAD 中的 STYLE 元素），并且在此之后开始出现 404。我删除了这个嵌入的样式表，并将规则移到了外部样式表中。自从进行此更改后，我还没有看到任何 404。

**编辑** 这个答案是不正确的。将规则从嵌入样式表移动到外部样式表并没有改变行为。我在星期五下午进行了更改，周末没有看到任何 404，但今天（星期一）确实看到了 .eot 文件的 404。

# asp.net - 如何使用 VB 在 ASP.NET 中的文本文件中添加超链接

> ID：13844913
> 
> 赞同：1
> 
> 时间：2012-12-12T17:06:43.713
> 
> 标签：asp.net, database, vb.net, text-files

我有两个页面，第一个用于显示文本文件中的数据，另一个用于存储数据。我想在文本文件中保存一个站点，但是当我显示数据时将只是文本，我无法单击它作为链接。我发布的代码是当我在显示页面中写入文件时。

```
 Try
        Dim fs As String
        fs = Server.MapPath("Footer.txt")
        lblsplittext.Text = ""
        Dim filestream As StreamReader 
        filestream = New IO.StreamReader(fs)
        Dim readcontents As String = filestream.ReadToEnd()
        Dim textdelimiter As String = "#"
        Dim splitout = Split(readcontents, textdelimiter)
        Dim i As Integer
        For i = 0 To UBound(splitout)
            lblsplittext.Text &= splitout(i) & "<br>"
        Next
        filestream.Close()
    Catch ex As Exception

        Dim str As String
        str = ex.Message

    End Try 
```

如果您对如何从文件或数据库中读取有不同的建议（现在从哪里读取无关紧要），请在我显示它们时保留我的内容，我只需要在我的文本中添加超链接......或者我可以写到 html文件而不是文本文件，如果是这样，我需要做什么来写入 html。我真的真的需要帮助，我已经做了很多搜索，但我什么也没找到。提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T17:30:03.590

有很多方法可以做到这一点。一种是使用一系列动态添加的`Label`控件。您的`Hyperlink`控件可以简单地插入一个`Label`控件和下一个控件之间。

您是否打算在回发时从您的一系列标签中检索信息？（这样做是多余的，因为您已经知道信息是什么，但以防万一。）使用多个控件会使这变得更加复杂。您可以尝试一个或多个`Literal`控件，动态创建并作为子控件添加到`Panel`控件中。同样，`Hyperlink`控件将在您需要的任何时候添加。

# c# - 在 LINQ to Entity 中获取子值

> ID：13844923
> 
> 赞同：0
> 
> 时间：2012-12-12T17:07:14.810
> 
> 标签：c#, linq, entity

我有 LINQ 查询，它以以下格式返回结果

```
-- 家长1
 ----儿童
 ------键-aa
 ------价值 - 新
 ----儿童
 ------key - bb
 ------价值 - 旧
 -- 父母2
 ----儿童
 ------key - 抄送
 ------值 - 测试
 ----儿童
 ------键-dd
 ------值 - 测试
```

我想使用 Linq 在一行**中获取子值。**目前我可以得到价值，但在两行我不喜欢的代码中

```
 var firstPoint = SeriesList.Select(i => i.Childs.Where(j => j.key == "aa"))
                            .FirstOrDefault();
 decimal index = firstPoint.Select(d => d.Value)
                           .FirstOrDefault(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:13:55.280

```
decimal index = SeriesList.Select(i => i.Childs.Where(j => j.key == "aa"))
    .FirstOrDefault()
    .FirstOrDefault().Value; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:19:41.557

```
decimal index = SeriesList.SelectMany(p => p.Childs)
                          .FirstOrDefault(c => c.key == "aa").Value; 
```

但请记住，具有提供密钥的孩子应该存在于列表中，否则您将获得异常。我认为最好先找到孩子，然后如果孩子存在，获取它的价值：

```
Childs child = SeriesList.SelectMany(p => p.Childs)
                          .FirstOrDefault(c => c.key == "aa");
if (child != null)
    index = child.Value; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T17:09:09.127

```
var firstPoint = SeriesList.Select(i => i.Childs.Where(j => j.key == "aa")).FirstOrDefault().Value; 
```

# html - 如何在 MVC3 中过滤和压缩输出 HTML？

> ID：13844925
> 
> 赞同：1
> 
> 时间：2012-12-12T17:07:22.047
> 
> 标签：html, vb.net, asp.net-mvc-3, action-filter, global-filter

在我的 MVC3 项目中，所有页面都有以下 HTML 作为输出

```
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>My app</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="author" content="">
    <link href="/Content/bootstrap.min.css" rel="stylesheet">
    <link href="/Content/bootstrap-responsive.min.css" rel="stylesheet">
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link rel="shortcut icon" href="/Content/icons/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/Content/icons/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="/Content/icons/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="/Content/icons/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="/Content/icons/apple-touch-icon-57-precomposed.png">
  </head>

  <body>

    <div class="container-fluid">
      <div class="row-fluid">
        <div class="span12">
          <div class="well">
            <h2>Test</h2>
          </div>
        </div>
      </div>
      <hr>
      <footer>
        <p>&copy;</p>
      </footer>
    </div>
    <script src="/Scripts/jquery-1.8.2.min.js"></script>
    <script src="/Scripts/bootstrap.min.js"></script>
  </body>
</html> 
```

但是，如何制作过滤器来修剪行并删除空白行，以获得如下示例的输出......

```
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>My app</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="">
<meta name="keywords" content="">
<meta name="author" content="">
<link href="/Content/bootstrap.min.css" rel="stylesheet">
<link href="/Content/bootstrap-responsive.min.css" rel="stylesheet">
<!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
<!--[if lt IE 9]>
<script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
<![endif]-->
<link rel="shortcut icon" href="/Content/icons/favicon.ico">
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/Content/icons/apple-touch-icon-144-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/Content/icons/apple-touch-icon-114-precomposed.png">
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/Content/icons/apple-touch-icon-72-precomposed.png">
<link rel="apple-touch-icon-precomposed" href="/Content/icons/apple-touch-icon-57-precomposed.png">
</head>
<body>
<div class="container-fluid">
<div class="row-fluid">
<div class="span12">
<div class="well">
<h2>Test</h2>
</div>
</div>
</div>
<hr>
<footer>
<p>&copy;</p>
</footer>
</div>
<script src="/Scripts/jquery-1.8.2.min.js"></script>
<script src="/Scripts/bootstrap.min.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:23:00.383

在 ASP.NET MVC 中，您可以使用动作过滤器、缓存和压缩来快速加载您的站点。

请查看链接[过滤器缓存和压缩 (C#)](http://weblogs.asp.net/rashid/archive/2008/03/28/asp-net-mvc-action-filter-caching-and-compression.aspx)

希望它对你有用

# html - 阻止浏览器使用默认/备用字体

> ID：13844927
> 
> 赞同：14
> 
> 时间：2012-12-12T17:07:24.430
> 
> 标签：html, css, fonts, internationalization

我有一个网络应用程序，用户可以在其中以 WSIWYG 风格更改输入文本区域的字体系列。现在，假设用户在文本区域输入了一些中文文本，但选择了一个不支持中文字符的字体。在我的应用程序中，我希望用户看到那些通常在字体不支持字符时显示的讨厌的方块（或类似的东西）。这样，用户就会知道该字体不支持该语言并且可以选择不同的语言。我遇到的问题是浏览器（Firefox 17 和 Chrome 23）似乎使用支持这些汉字的字体（如 Arial）呈现文本的中文部分，使用户相信他正在尝试使用的字体工作正常。

有没有办法（我猜通过 CSS）来防止这种情况？有没有办法让浏览器只在这一次不那么“好”？

先感谢您。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2016-12-11T19:11:29.570

正如另一个答案已经解释的那样，解决方案是使用包含“所有”unicode 代码点的后备字体。然而，困难的部分是找到或建造一个重量不超过几 MB 的。

几年后，现在有一个更轻量级的备用字体解决方案，Adobe 的[NotDef 字体](https://github.com/adobe-fonts/adobe-notdef)。它显示了一个带有 1,111,998 个 Unicode 代码点的十字框，只有大约 22Kb，并且使用的是 SIL OPEN FONT LICENSE 版本 1.1。

如果您不想显示任何内容，还有[Adob​​e Blank 字体](https://github.com/adobe-fonts/adobe-blank)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-12T17:37:33.103

您可以通过抛出一个包罗万象的字体来拦截字体替换过程，使用相当于`font-family: userChoice, yourCatchAll`where`yourCatchAll` is a font 具有所有字符的通用字形。

问题在于找到这样的字体。最后的[手段](http://www.unicode.org/policies/lastresortfont_eula.html)字体将是理想的，因为它还可以在视觉上广泛地指示字符的类别，但其 EULA 似乎不允许修改。这是否适用于网络字体格式（如 .eot 和 .woff）的构建是有争议的。

[Unicode BMP Fallback Font](http://scripts.sil.org/cms/scripts/page.php?site_id=nrsi&item_id=UnicodeBMPFallbackFont)似乎有更自由的使用规则，但它只是在一个框中显示一个字符作为其 Unicode 编号（并且仅支持基本多语言平面，尽管它包含大多数人听说过的所有字符）。

# java - 从 JAX-RS 服务获取资源时出错

> ID：13844928
> 
> 赞同：1
> 
> 时间：2012-12-12T17:07:26.383
> 
> 标签：java, tomcat, jax-rs

我有简单的 JAX-RS 服务器应用程序：

```
@GET
@Path("/getImage/{key}")
@Produces("image/jpeg")
public final BufferedImage getImageResource(@PathParam("key") String key) {
  final File file = new File(key); // the key will be "cat.jpeg" e.t.c.

  final BufferedImage image = ImageIO.read(new FileInputStream(file));

  return image;
} 
```

将war文件部署到tomcat服务器（6.0）后，我下一步：

```
http://localhost:8080/resource-service/getImage/cat.png 
```

问题：

1）在*新文件（键）*上，它将转到tomcat根目录。我想在类周围的项目目录中拥有类似于默认根文件夹的资源。

2）据我了解，不允许返回 BufferedImage，我收到 500 错误消息：

```
HTTP Status 500 - Could not find MessageBodyWriter for response object of type: java.awt.image.BufferedImage of media type: image/jpeg 
```

我会很感激任何建议，链接。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T20:58:43.553

为了访问您的 WAR 包中的文件，您应该使用[`ServletContext`](http://docs.oracle.com/javaee/6/api/javax/servlet/ServletContext.html). 首先，首先将其作为变量注入到您的类中：

```
@Context
ServletContext context; 
```

然后使用以下命令查找文件：

```
final File file = new File(this.context.getRealPath(key)); 
```

不可能返回 a `BufferedImage`（并将其自动映射到`image/jpeg`），但在您的示例中，您不需要这样做。只需返回一个 JAX-RS 响应：

```
@GET
@Path("/getImage/{key}")
@Produces("image/jpeg")
public final Response get(@PathParam("key") String key) {
    return Response.ok()
        .entity(this.context.getResourceAsStream(key))
        .type("image/jpeg")
        .build();
} 
```

类似问题：[Dynamicly create image from JAX-RS servlet](https://stackoverflow.com/questions/5736973/dynamically-create-image-from-jax-rs-servlet)

# ios - 导航到主机 [iPhoneDriver + Selenium Webdriver + Ruby] 时“在 rbuf_fill 中救援”

> ID：13844931
> 
> 赞同：4
> 
> 时间：2012-12-12T17:07:42.133
> 
> 标签：ios, ruby, selenium, webdriver

尝试到达任何主机时开始接收：

```
[1] pry(main)> require "selenium-webdriver"
=> true
[2] pry(main)> driver = Selenium::WebDriver.for :remote, :url => "http://xxx.xxx.xxx.xxx:3001/wd/hub/", :desired_capabilities => :iphone
=> #<Selenium::WebDriver::Driver:0x..fb1a8bc1a0f688d1c browser=:iPhone>
[3] pry(main)> driver.get "http://google.com"
Timeout::Error: Timeout::Error
from /Users/apple/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/net/protocol.rb:146:in `rescue in rbuf_fill' 
```

先决条件： - 只有真实设备，iOS 模拟器上没有错误 - 最新版本的 iPhoneDriver / Selenium Webdriver，iOS5 / iOS6 - 在多个单元（Mac OS）上尝试并遇到同样的问题 - 甚至几天前也能正常工作 - 有不知道会发生什么 - 不会在类似代码的 Andoid 上重现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:15:19.007

当存在某种网络连接问题时，通常会发生这种情况。有可能您的 iphone 运行速度太慢而无法处理 selenium 脚本。所以增加超时。

尝试这个

```
client = Selenium::WebDriver::Remote::Http::Default.new
client.timeout = 180 # Increase the time if it takes longer to connect to the remote device 
driver = Selenium::WebDriver.for :remote, :url => "http://xxx.xxx.xxx.xxx:3001/wd/hub/", :desired_capabilities => :iphone, :http_client => client 
```

# .net - 检查套接字是否在紧凑框架中连接

> ID：13844941
> 
> 赞同：2
> 
> 时间：2012-12-12T17:08:14.163
> 
> 标签：.net, vb.net, sockets, compact-framework, tcpclient

我有一个在 Windows 桌面上运行并在 .net 中开发的服务器软件，它始终通过 TCP/IP 侦听套接字上的传入连接。

然后我有一个运行在 CE 6.0 上的客户端软件，使用紧凑框架 3.5 开发......这个客户端需要：

*   启用服务时连接到服务器
*   每 300 毫秒发送几个字节的数据
*   发送时永远不会挂起或每次都失去连接时间
*   检查套接字是否连接

到目前为止，我使用基于此示例的异步代码实现了服务器端，但经过修改以保持连接处于活动状态，直到服务器关闭它们......不仅是一次拍摄而且它完美地工作

[http://msdn.microsoft.com/en-us/library/fx6588te.aspx](http://msdn.microsoft.com/en-us/library/fx6588te.aspx)

然后我以这种方式实现了客户端：

```
dim clientSocket as new System.Net.Sockets.TcpClient()

/... code .../

'Activate the service
clientSocket.Connect("10.0.0.34", myPort)

/ .... code ..../ 

'Data send function
dim serverStream as NetworkStream = clientSocket.GetStream()
dim outStream as byte() = System.Text.Enconding.ASCII.GetBytes("My messagge...")
serverStream.Write(outStream, 0, outStream.Length)
serverStream.Flush 
```

这也是完美的工作。我需要什么？

1.  在发送数据之前检测与套接字的连接是否打开......这将避免在出现问题时浪费时间

我在网上搜索，但我无法在 CF 中进行搜索……而且 .connected 方法在此处不可用。

最好的——但对我来说似乎很愚蠢——我发现的方法是在连接/发送成功时设置一个标志，并在出现问题时重置它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T19:17:53.807

我曾经尝试轮询我的套接字以确定它们是否仍然连接。但是根据我的经验，确定套接字是否已经关闭的唯一可靠的、与设备无关的方法是发送操作成功或超时。（注意：您可能想自己检查超时。如果我记得清楚的话，标准 TCP 套接字会在 20 秒后超时，但在此之前我见过一些非标准的套接字，只是不想超时几分钟。）如果您很幸运，那么您在通过套接字实现的协议中有“ping”机制，因此您可以不时在网络上运行一些无意义的数据，以查看您是否仍然有连接。我知道，它会产生相当大的开销，但如果你真的需要知道，这是绝对适用于所有设备的唯一方法。

# matlab - matlab中具有高斯和均匀分布的随机数

> ID：13844944
> 
> 赞同：5
> 
> 时间：2012-12-12T17:08:23.183
> 
> 标签：matlab, gaussian, normal-distribution, uniform-distribution

我想在matlab中生成一个高斯分布和均匀分布的数字。我知道这个函数 `randi`，`rand()`但它们都处于正态（高斯）分布。如何生成均匀分布的随机数？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-12T17:58:25.787

用于0 和 1 之间`rand(dimensions)`的*均匀分布。*

用于均值为*mu*且标准差为*sigma*`randn(dimensions) * sqrt(sigma) + mu`的*高斯分布*。

 **![均匀分布](../Images/a77322fa7862ea41e1790616b3f16bbc.png)

![正态分布](../Images/09c6c0dfd5b0018c1cbea4f4ac4467a8.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-12T17:17:19.453

`randn`是生成高斯分布变量（`randi`并`rand`产生均匀分布的变量）的函数。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-11-19T18:58:34.317

您可以从 rand() 生成任何分布。

例如，假设您想为 rayleigh dist 生成 100000 个样本。这样做的方法是反转该特定函数的 cdf。基本思想是，由于 cdf 必须在 0 和 1 之间，我们可以找到通过输入 cdf b/w 0 和 1 的值来计算随机变量的值。所以对于 rayleigh，它将是

```
for i = 1:100000
  data(i) = (2*sigma^2 *(-(log(1 - rand(1,1)))))^.5;
end 
```

您可以为高斯分布做类似的事情。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-12T17:16:39.620

恭喜，您已经生成了具有高斯分布的伪随机数。正态分布是它的同义词。

我可以从您的问题中得到的唯一其他可能的解释是，您想要具有均值！= 0 和/或方差！= 1 的东西。要做到这一点，只需执行`mean + sqrt(var) * randn(X)`.

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2018-10-20T03:28:27.307

的确，您几乎可以从中生成任何东西，`rand`但这并不总是很方便，尤其是对于一些复杂的发行版。

MATLAB 引入了[概率分布对象](https://www.mathworks.com/help/stats/working-with-probability-distributions.html#bum5reu)，这使这变得更加容易，并允许您无缝访问`mean`、`var`、`truncate`、`pdf`、`cdf`、`icdf`（逆变换）`median`、 和其他函数。

您可以将分布拟合到数据。在这种情况下，我们使用`makedist`来**定义***概率分布对象*。然后我们**可以**使用`random`.

```
% Parameters
mu = 10; 
sigma = 3;
a = 5; b = 15;
N = 5000;

% Older Approaches Still Work
rng(1775)
Z = randn(N,1);    % Standard Normal  Z~N(0,1)
X = mu + Z*sigma;  % X ~ Normal(mu,sigma)

U = rand(N,1);     % U ~ Uniform(0,1)
V = a + (b-a)*U;   % V ~ Uniform(a,b)

% New Approaches Are Convenient
rng(1775)
pdX = makedist('Normal',mu,sigma);
X2 = random(pdX,N,1);

pdV = makedist('Uniform',a,b);
V2 = random(pdV,N,1); 
```

一个可重现的例子：

[![直方图](../Images/10f83374ba3ac0dce805fda642f43436.png)](https://i.stack.imgur.com/u9WFv.png)

```
Support = (0:0.01:20)';
figure 
s(1) = subplot(2,2,1)
h(1) = histogram(X,'Normalization','pdf')
xlabel('Normal')
s(2) = subplot(2,2,2)
h(2) = histogram(V,'Normalization','pdf')
xlabel('Uniform')
s(3) = subplot(2,2,3), hold on, box on
h(3) = histogram(X2,'Normalization','pdf')
plot(Support,pdf(pdX,Support),'r-','LineWidth',1.2)
xlabel('Normal (new)')
s(4) = subplot(2,2,4), hold on, box on
h(4) = histogram(V2,'Normalization','pdf')
plot(Support,pdf(pdV,Support),'r-','LineWidth',1.2)
xlabel('Uniform (new)')
xlim(s,[0 20]) 
```

参考：
[均匀分布](https://en.wikipedia.org/wiki/Uniform_distribution_(continuous))
[正态（高斯）分布](https://en.wikipedia.org/wiki/Normal_distribution)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2013-11-19T20:04:59.473

按照 raj 的回答：通过使用**Box-Muller 变换**，您可以生成独立的标准正态/高斯随机数：

```
N = 1e6; z = sqrt(-2*log(rand(N, 1))) .* cos(2*pi * rand(N, 1)); figure; hist(z, 100)
N = 1e6; z = sqrt(-2*log(rand(N, 1))) .* sin(2*pi * rand(N, 1)); figure; hist(z, 100) 
```

如果要应用**逆变换法**，可以使用逆互补误差函数 (erfcinv)：

```
N = 1e6; z = -sqrt(2) * erfcinv(2 * rand(1e6, 1)); figure; hist(z, 100) 
```

但我希望`randn`效果更好。**

# python - 中断与布尔？

> ID：13844952
> 
> 赞同：0
> 
> 时间：2012-12-12T17:08:39.923
> 
> 标签：python, boolean, break, continue, memory-efficient

我的编程基础老师在她的一堂课上说过，使用“break”或“continue”关键字的效率低于使用布尔值退出循环的效率。

我编写并运行了一个用 Python 编写的程序，看看是否是这种情况：

```
import time;

TIMES = 100000000
COMPARE_FROM = "foo"
COMPARE_TO = "roo"

def breakTest() :
    while(True) :
        break;
        if(COMPARE_FROM == COMPARE_TO) :
            boo = "boo"

def booleanTest() :
    running = True;
    while(running) :
        running = False;
        if(running):
            if(COMPARE_FROM == COMPARE_TO) :
                boo = "boo"

def main() :
    breakTimeBefore = 0;
    breakTimeAfter = 0;
    booleanTimeBefore = 0;
    booleanTimeAfter = 0;

    print("running break test ...");

    breakTimeBefore = time.time();
    for i in range(0, TIMES, 1):
        breakTest();
    breakTimeAfter = time.time();

    print("break test complete");
    print("Time: %f seconds \n" % (breakTimeAfter - breakTimeBefore));

    print("running boolean test ...");

    booleanTimeBefore = time.time();
    for i in range(0, TIMES, 1):
        booleanTest();
    booleanTimeAfter = time.time();

    print("boolean test complete");
    print("Time: %f seconds \n" % (booleanTimeAfter - booleanTimeBefore))

    print("---- FINDINGS ----");
    print("breakTest time:   %f" % (breakTimeAfter - breakTimeBefore));
    print("booleanTest time: %f" % (booleanTimeAfter - booleanTimeBefore));
    print("diffrence:        %f" % ((breakTimeAfter - breakTimeBefore) - (booleanTimeAfter - booleanTimeBefore)));
    input("Press enter to close...");

main(); 
```

在运行了 3 次并对结果进行平均后，我发现 breakTest 快了 6.25 秒。

那么 break 关键字更有效还是我的代码错误？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-12T17:24:26.883

您的测试并不完全等效。我想你的老师可能有类似以下的想法：

```
def breakTest():
    i = 0
    while True:
        i += 1
        if i == 10:
            break

def booleanTest():
    i = 0
    while i < 10:
        i += 1 
```

正如您在下面看到的，将条件放入 while 语句而不是 if/break 确实可以提高性能（并缩短代码）：

```
In [14]: %timeit breakTest()
1000000 loops, best of 3: 999 ns per loop

In [15]: %timeit booleanTest()
1000000 loops, best of 3: 201 ns per loop 
```

请注意，这只是退出循环的不同方法的一个示例，以及我*认为*您的老师的意思。当然，如果你真的在写这段代码，你应该使用`for i in range(11): ...`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-12T17:29:25.350

介绍性计算机编程课程通常会以不言而喻的方式教给你这样的东西，而不是最佳实践，因为很难说服没有经验的人相信最佳实践值得努力。您应该尽可能避免使用`break`and `continue`，但它们满足使用其他机制无法管理或至少无法干净管理的合法用例。对于你第一次学习编程时所做的事情，依赖于诸如`break`并且`continue`往往是懒惰、混乱的解决方案，所以你应该尽量避免它们。当您合法地需要它们时，您应该有足够的知识和经验来使用您自己的最佳判断。

# c# - 为什么 SQL 语句在传递“”时返回所有行？

> ID：13844956
> 
> 赞同：0
> 
> 时间：2012-12-12T17:08:49.460
> 
> 标签：c#, sql-server-2008, select

我正在使用这个 SQL 语句来获取行：

```
SELECT firstname, lastname 
FROM myTable 
WHERE ((lastname LIKE '" + parameter + "%') 
```

`parameter`从文本框获取值。文本框的默认值为`" "`

我的问题是当文本框中没有输入任何内容时，我得到了所有行。我试着用

```
WHERE lastname = 
```

这只是给了我所有的记录`" "`

获取在数据库中排除空白的数据的正确方法是什么，并且当空白或“”作为参数传递时也不给您任何记录

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-12T17:13:02.863

您正在使用通配符，因此对于空白搜索字符串，您最终会得到

```
... WHERE lastname LIKE '%' 
```

这将匹配一切。如果没有在搜索表单中输入任何内容，您应该简单地在脚本级别检测到，而不是运行查询，例如在 php-ish 术语中：

```
if (strlen($_GET['keywords']) == 0) {
   die("No search terms entered");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-12T17:13:49.250

```
SELECT firstname, lastname
FROM myTable
WHERE lastname LIKE '" + parameter + "%'
AND NULLIF(lastname,'') IS NOT NULL
AND '" + parameter + "' <> '' 
```

很简单，只返回姓氏以“参数”开头的记录，并且只返回“参数”不是空字符串的记录。

编辑：添加了要求它永远不会返回具有空白姓氏的记录的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T17:15:06.440

首先，我希望你做一些清理以避免 sql 注入。

然后您可以选择：

*   如果包含 trim() 的清理参数为空，则不运行查询
*   有`SELECT firstname, lastname FORM myTable WHERE ((lastname LIKE '" + parameter + "%') AND ''<>'" + parameter + "'"`

从性能角度来看，第二个是一种不好的做法，它会假设你已经放弃了消毒（非常糟糕）

您还应该注意，在您的清理过程中，您必须转义或删除特殊字符 _ 和 %，请参阅 [http://msdn.microsoft.com/en-us/library/ms179859(v=sql.105)。 aspx](http://msdn.microsoft.com/en-us/library/ms179859(v=sql.105).aspx)

我不处理这个，等于 % 的非空参数将导致 a `like '%%'`，相当于`like '%'`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T17:11:37.093

好吧，您可以只在代码中的参数变量上测试 string.IsNullOrEmpty，这样您甚至不需要进行数据库调用。

在我看来，这是最有效的做法。

# javascript - $(' 之间的区别 ') 和 $(' ')

> ID：13844962
> 
> 赞同：6
> 
> 时间：2012-12-12T17:09:14.697
> 
> 标签：javascript, jquery, html

> **可能重复：**
> [jQuery 中的 $('<element>') 与 $('<element />')](https://stackoverflow.com/questions/9675487/element-vs-element-in-jquery)

我习惯写作`$('<div>')`。
但是今天我看到了 john-resig 关于高级 jquery 的介绍，他使用了以下语法`$('<div/>')`。
[http://loft.bocoup.com/john-resig-advanced-jquery/](http://loft.bocoup.com/john-resig-advanced-jquery/)

对我来说，它们似乎产生了相同的输出。

`$('<div>')`我的问题是：和之间有什么区别 `$('<div/>')`吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-12T17:09:55.443

不，jQuery 会将这些语句标准化为完全相同的。

* * *

在一些早期版本的 jQuery 中，它碰巧`<div>`实际上比任何原因*都快。*`<div/>`我还不知道，如果这仍然适用。

[http://jsperf.com/jquery-constructor-performance](http://jsperf.com/jquery-constructor-performance)

似乎这个*错误/功能*不再正确。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-12T17:14:13.873

`<div>`, `<div/>`, `<div></div>`, 甚至`<div/></div>`（是的，这个只会创建一个元素）都触发了`singleTag`正则 rexpression ，这使得 jQuery 调用`document.createElement("div")`. 它根本没有传递给任何 html 解析器。

这是您可以使用的正则表达式，如果它返回 true，它将是`document.createElement'd`

```
var rsingleTag = /^<(\w+)\s*\/?>(?:<\/\1>|)$/; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-12T17:10:16.063

`<div>`是一个开始标签。`<div/>`是一个自闭合标签。但是，在这种情况下，没有区别。

# c++ - 正确销毁指向对象的指针

> ID：13844963
> 
> 赞同：9
> 
> 时间：2012-12-12T17:09:16.317
> 
> 标签：c++, pointers, memory-management

我想问几个关于正确销毁 int 指针和向量指针的问题。首先，我看到过去有人问过这类问题，几乎总是有几个回答说在 C++ 中使用向量指针、对象指针等不是好的标准 C++ 编码实践，你应该实例化一个对象的副本。这可能是真的，但你并不总是能够控制在你到达之前已经奠定的范式。我需要使用的范例需要初始化指向几乎所有内容的指针。一种非常类似于 Java 的 C++ 方法。我们这样做的主要原因之一是我们的数据集太大，堆栈分配会发生溢出。

我的问题：

如果我有一个指向 int32_t 数组的指针，那么在析构函数中销毁它的正确方法是什么？

注意：我们的做法是在构造函数中设置任何指向 NULL 的指针。

```
I initialize it as a member variable. 
int32_t *myArray_;

When I use it in a method, I would:
this->myArray = new int32_t[50];

To delete it in the method I would call delete on the array:
delete [] this->myArray;

What is the proper call in the destructor?
~MyDestructor(){

    delete this->myArray_;
    or delete [] this->myArray_;

} 
```

我对向量指针有同样的问题：

```
I initialize it as a member variable. 
std::vector<MyObject*> *myVector_;

When I use it in a method, I would:
this->myVector_ = new std::vector<MyObject*>();

//pushback some objects

To delete the vector in the method I would iterate the vector and delete its objects, then    delete the vector;

 for(std::vector<MyObject*>::iterator itr = this->myVector_->begin(); 
 its != this->myVector->end(); ++ itr){

      delete (*itr);

}

delete this->myVector_;

What would be the proper way to clean it up in the destructor?
would I just delete the vector?

delete this->myVector;

or do I need to iterate the entire vector again? 
```

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-12T17:15:52.827

任何分配的东西`new`都应该用 释放`delete`。

```
int* p = new int;
delete p; 
```

任何分配的东西`new []`都应该用 释放`delete []`。

```
int* p = new int[10];
delete [] p; 
```

任何动态分配和存储在 a 中的东西`vector`都需要手动释放：

```
std::vector<int*> v;
v.push_back(new int(1));
v.push_back(new int(2));

for(std::vector<int*>::iterator i = v.begin(), e = v.end(); i != e; ++i)
   delete (*i); 
```

如果出于某种奇怪的原因，您认为动态分配 a 是合适的`vector`，则适用相同的规则。

```
std::vector<int*>* v = new std::vector<int*>;
v->push_back(new int(1));
v->push_back(new int(2));

for(std::vector<int*>::iterator i = v->begin(), e = v->end(); i != v; ++i)
   delete (*i);

delete v; 
```

但是，我建议动态分配 a 的原因`std::vector`很少。

在 C++11 中，最好的方法是使用`std::unique_ptr`：

```
std::unique_ptr<int> p(new int);
// std::unique_ptr handles clean up for you

std::unique_ptr<int[]> p(new int[10]);
// std::unique_ptr handles clean up for you for arrays too! 
```

如果您有一个类的成员变量，则适用相同的规则：

```
class Foo
{
   Foo()
      : bar_(new int)
      , bar2_(new int[20])
   {
   }

   ~Foo()
   {
      delete [] bar2_;
      delete bar_;
   }

   int* bar_;
   int* bar2_;
}; 
```

但即便如此，将它们设置为 更有意义`std::unique_ptr`，您甚至可以在需要时将它们视为接口中的原始指针：

```
class Foo
{
   Foo()
     : bar_(new int)
     , bar2_(new int[20])
   {
   }

   int* get_bar()
   {
      return bar_.get();
   }

   int* get_bar2()
   {
      return bar2_.get();
   }

   std::unique_ptr<int> bar_;
   std::unique_ptr<int[]> bar2_;
}; 
```

# eclipse - Eclipse 行尾 WikiText 编辑器

> ID：13844964
> 
> 赞同：2
> 
> 时间：2012-12-12T17:09:16.707
> 
> 标签：eclipse, text-editor, eclipse-juno, line-endings, wikitext

我在 Eclipse 中遇到了行尾和 WikiText 编辑器的问题。

如果我在项目之外打开 *.textile 文档，则会保留行尾（不添加 CR）。我可以得到两个标签；一个用于源，另一个用于预览。

但是，如果我将 *.textile 文档添加到项目中，CR 会添加到每一行。

由于*.textile 具有锁定编码，我无法更改它。因此，我创建了自己的内容类型 (* .textl) 并将其与 WikiText 编辑器相关联，并将默认编码类型设置为 UTF-8。出现同样的问题。

如果我在项目之外打开一个与 WikiText 编辑器相关的文件，则不会添加任何 CR 并保留行尾。如果我打开作为项目一部分的 WikiText 编辑器关联文件，则会添加 CR。注意：同一项目中 *.c 文件中的行结尾保留为 Unix 样式，不添加 CR。

有任何想法吗？

# ruby-on-rails - Rails：与 to_json/to_xml 的分页关联

> ID：13844966
> 
> 赞同：1
> 
> 时间：2012-12-12T17:09:19.430
> 
> 标签：ruby-on-rails, xml, json, activerecord, pagination

我有一个名为 Playlists 的模型，它 has_and_belongs_to_many :songs

在我的 PlaylistController 中，我调用 respond_with(@playlist, :include => :songs) 所以我可以返回 json 和 xml 输出。

但是，一些播放列表有数百首歌曲。所以我想让调用者在调用中发送 ?limit=X&offset=Y （默认值分别为 25 和 0）。但是我如何在序列化过程中将此限制和偏移量传递给关联？我试过

@playlist.songs = @playlist.songs.limit(l).offset(o)

但这带来了一些不幸的结果。:(

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:41:49.907

这似乎是分页库的任务。我们正在使用 will_paginate。然后我们的调用如下所示：

```
collection.paginate page => 2, :per_page => 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-09T11:07:45.917

这是我所做的：

我添加了使用集合对模型进行分页并检索分页集合的方法：

```
# models/playlist.rb
def paginate_songs(limit, offset)
    @paginated_songs = Array.new
    songs.limit(limit).offset(offset).each do |song|
        @paginated_songs << song
    end
end

def paginated_songs
    return @paginated_songs
end 
```

我向控制器添加了一些逻辑，它将对对象进行分页并在响应中包含分页集合：

```
# controllers/playlists_controller.rb
@playlist.paginate_songs(l, o)
respond_with(@playlist, :methods => [ :paginated_songs ]) 
```

# c# - 如何在 c# 中使用 http://code.google.com/p/linqtoexcel/ 枚举 excel 文件

> ID：13844969
> 
> 赞同：0
> 
> 时间：2012-12-12T17:09:19.250
> 
> 标签：c#, linq-to-excel

基本上我需要的是在结构中复制的 excel 文件（非空白单元格）的内容，例如`IEnumerable<IEnumerable<string>> contents;`
第一个 IEnumerable 用于行，第二个用于列。
我已经开始使用以下方法加载文件：

```
var excel = new ExcelQueryFactory("file.xls"); 
```

提前谢谢各位。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T17:47:09.403

答案是：

```
var excel = new ExcelQueryFactory("file.xls");
var result = excel.WorksheetNoHeader().ToList().Select(x => x.Select(y => y.ToString()).AsEnumerable()); 
```

感谢您提供的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-12T17:16:55.137

你可以尝试这样的事情你可以自己编写额外的逻辑来拉入字段数据而不是 = 到 string.Empty 用你的文件路径位置替换文件路径

您还可以使用 Linq to Excel 开源项目 (code.google.com/.../linqtoexcel) 轻松地从 Excel 获取数据。它会为您处理 OleDB 连接，您可以使用 where 子句。您所要做的就是创建一个具有与 excel 列名对应的属性的类。这是一个例子：

```
IExcelRepository<Client> repo = new ExcelRepository<Client>(@"C:\file.xls");

var largeClients = from c in repo.Worksheet

                  where c.Employees > 200

                  select c;

foreach (Client client in largeClients)
{
   Console.WriteLine(client.ClientName);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T17:22:50.593

首先将数据放入数据表之类的东西中，然后使用 as Enumarable？

```
var x = _xlData.Tables[0].Rows
           .Cast<DataRow>()
           .Where(row => !row.ItemArray.All(field => field is System.DBNull ||   
                                            string.Compare((field as string).Trim(), 
                                            string.Empty) == 0))
           .AsEnumerable(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-12T17:28:29.583

根据文档，解决方案应该如下所示：

```
var excel = new ExcelQueryFactory("file.xls");
var result = excel.Worksheet()
                  .Select(x => x.Select(y => y.ToString())); 
```

# php - 在 Doctrine2 中使用部分查询和复合键时出现“无映射字段”

> ID：13844970
> 
> 赞同：9
> 
> 时间：2012-12-12T17:09:23.720
> 
> 标签：php, doctrine, doctrine-orm, composite-primary-key

我有两个模型叫做`Person`and `Tag`。一个人有许多标签，标签主键是`person_id`和`tag`（`Person $person`和`$tag`在Doctrine2中）的组合键。

模型中有一个数据字段 ( `BLOB`)，`Tag`其中包含大量数据。我正在设置一个不需要该字段数据的查询，因此我想设置一个不检索该字段的查询。

我尝试了以下查询：

```
SELECT c, PARTIAL t.{tag} FROM Contact c LEFT JOIN c.tags 
```

在这里，我得到了一些预期的错误*The partial field selection of class Tag must contain the identifier*。没问题，我添加联系人字段：

```
SELECT c, PARTIAL t.{contact,tag} FROM Contact c LEFT JOIN c.tags 
```

但是现在，我**在类 Tag 上没有名为 'contact' 的映射字段**。

Doctrine2 不支持对复合键的部分查询吗？

这是标签类：

```
/** @Entity @Table(name="tag") **/
class Tag
{
    /** @Id @ManyToOne(targetEntity="Contact",inversedBy="tags") @var Contact **/
    protected $contact;
    /** @Id @Column(type="string",length=10,nullable=false) @var string **/
    protected $tag;
    /** @Column(type="blob") **/
    protected $data;
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T19:43:36.880

每当执行部分选择时，您都需要包含要从中选择的类的主键。

您实际上并没有详细说明您的“联系人”实体，但我假设该类的主键字段是“id”。如果是这种情况，那么以下查询将满足您的要求：

```
SELECT c, PARTIAL t.{id, tag} FROM Contact c LEFT JOIN c.tags 
```

这似乎没有记录:(

[http://docs.doctrine-project.org/en/latest/reference/dql-doctrine-query-language.html#partial-object-syntax](http://docs.doctrine-project.org/en/latest/reference/dql-doctrine-query-language.html#partial-object-syntax)

# windows - 是否可以从 Matlab 向窗口发送多点触控事件？

> ID：13844972
> 
> 赞同：1
> 
> 时间：2012-12-12T17:09:35.203
> 
> 标签：windows, matlab, multi-touch

我在 Matlab 中有一个演示，我想从（到操作系统）发送多个触摸事件，就好像有人在触摸屏幕一样。我希望能够提供 5 到 10 个接触点及其坐标。在没有触摸输入硬件但安装了触摸驱动程序的机器上如何做到这一点......？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-16T01:04:52.037

这似乎比人们想象的要复杂一些。目前 Windows 7 上的最佳解决方案使用 MultiTouchVista 和 TUIO。

1) 下载[MultiTouchVista](http://multitouchvista.codeplex.com/)

2）激活笔和触摸

3) 运行 Multitouch.Service.Console.exe

4) 运行 Multitouch.Driver.Console.exe

5) 运行 Multitouch.Configuration.WPF.exe 并选择 TUIO

6) 下载[oscsend](http://www.mathworks.co.uk/matlabcentral/fileexchange/31400-send-open-sound-control-osc-messages/content/oscsend.m)以按照 TUIO的要求发送 OSC 帧。

这是一些示例代码，可循环发送 5 个触摸点到屏幕。

```
clear all
u = udp('127.0.0.1',3333);
fopen(u);
fprintf('Opened\n');
pause(0.5);
n = 0;

%%
pause(5);
while 1

    x = 0.5;
    y = 0.5;

    for t = -0.2:0.01:0.2
        oscsend(u , '/tuio/2Dcur' , 'siiiii' , 'alive' , 5*n,5*n+1,5*n+2,5*n+3,5*n+4);
        oscsend(u , '/tuio/2Dcur' , 'sifffff' , 'set' , 5*n,   x + t, y - 0.2, 0, 0, 0);
        oscsend(u , '/tuio/2Dcur' , 'sifffff' , 'set' , 5*n+1, x + t, y - 0.1, 0, 0, 0);
        oscsend(u , '/tuio/2Dcur' , 'sifffff' , 'set' , 5*n+2, x + t, y      , 0, 0, 0);
        oscsend(u , '/tuio/2Dcur' , 'sifffff' , 'set' , 5*n+3, x + t, y + 0.1, 0, 0, 0);
        oscsend(u , '/tuio/2Dcur' , 'sifffff' , 'set' , 5*n+4, x + t, y + 0.2, 0, 0, 0);        
        oscsend(u , '/tuio/2Dcur' , 'siiiii' , 'fseq' ,  5*n,5*n+1,5*n+2,5*n+3,5*n+4);
        pause(0.01);        
    end

    n = n + 1;
    fprintf('Sent\n');
    pause(1);
end

%%

fclose(u);
fprintf('Closed\n'); 
```

除了移动的鼠标，您可能看不到任何东西，但操作系统正在接收触摸，如果您打开[Microsoft 的 Touch-Pack](http://www.microsoft.com/en-us/download/details.aspx?id=17368)示例之一，您可以看到多个触摸点。[这是FruitNinja Lite](http://www.appup.com/app-details/fruit-ninja-lite)的屏幕截图

![在此处输入图像描述](../Images/3a1a3d49175b85f7f8a349a92fb1b715.png)

# android - Android - 不能在活动上应用装饰器模式？

> ID：13844981
> 
> 赞同：1
> 
> 时间：2012-12-12T17:10:05.687
> 
> 标签：android, android-intent, android-activity, decorator, solid-principles

我希望能够动态构建一个 Activity，它具有我们拥有的一些**功能**（例如防止滚动、监控互联网连接、防止方向改变等）。

我们不想创建一个`BaseActivity`包含所有功能的所有可能属性和抽象方法的抽象。我们将在子类中有很多空函数实现，`BaseActivity`它们只需要实际实现其中的几个函数。更糟糕的是，如果我们想到另一个功能（要添加到的另一组属性和函数`BaseActivity`），我们将不得不编辑每个子级`BaseActivity`以实现新的抽象函数（很可能是空的）。

另一种`BaseActivity`继承方法是创建仅实现我们拥有的少数功能的子类。但这将要求我们为每个功能组合创建一个子类，即使功能很少，也太多了。另外，这会导致 2+ 子类的大量重复代码实现相同的功能。

所以，我想到了实现装饰器模式，但我认为我们实际上并没有实例化一个新的活动。我们总是在它的构造函数中创建一个`Intent`并指定`SomeActivity.class`，然后我们调用`startActivity(new Intent(getApplicationContext(), SomeActivity.class));`

有没有办法拦截 Activity 的实际实例化，对其执行装饰器模式操作，然后让操作系统/应用程序将其放在堆栈顶部？

如果不是，还有哪些其他可行的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-12T18:02:05.683

> 我们不想创建一个抽象的 BaseActivity，它包含所有功能的所有可能的属性和抽象方法。

您可以通过删除关键字来完成此操作`abstract`。每个关键字大约需要 8 次击键。

> 有没有办法拦截 Activity 的实际实例化，对其执行装饰器模式操作，然后让操作系统/应用程序将其放在堆栈顶部？

只有通过分叉Android。

> 如果不是，还有哪些其他可行的方法？

创建一个`BaseActivity`“包含所有可能的属性”的非抽象和非抽象的“所有能力的方法”。根据需要覆盖子类中的方法。在有意义的地方，让子类链接到超类，因此超类可以具有子类可以增强的默认行为。

你可以看到它`Activity`本身。您不必实现`onCreate()`, `onStart()`, `onResume()`, `onPause()`, `onStop()`, `onDestroy()`, `onSaveInstanceState()`, `onRestoreInstanceState()`, 和许多其他方法。这些方法不是抽象的，默认实现是合理的（典型的例外`onCreate()`）。子类可以在需要添加功能的地方覆盖那些方法，或者在某些情况下替换现有的功能（例如，`onSaveInstanceState()`可以根据需要链接到超类或不链接到超类）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-14T16:28:51.010

我认为这篇文章可以帮助你。 [活动装饰师](http://deansserver.co.uk/~dean/2013/01/27/decorator-pattern-android/)

# optimization - N 个向量的内存布局

> ID：13844995
> 
> 赞同：3
> 
> 时间：2012-12-12T17:10:47.880
> 
> 标签：optimization, openmp, blas

我想知道我应该如何存储 N 个小维度的向量（比如说 X、Y、Z）以提高效率。

出于缓存局部性的原因，我期望将向量一个接一个地打包 [N][3]（行主要）会比布局 [3][N] （其中放置维度 X、Y 然后 Z连续输出）在使用 OpenMP 进行矢量运算时。

但是，将每个向量乘以一个 3x3 矩阵，并使用英特尔 MKL BLAS，我发现布局 [3][N] 的速度是原来的两倍。

我猜缓存局部性与 SSE 指令适用于非跨步数据的事实相抵消。这让我想知道人们（例如在计算机图形学中）如何存储他们的向量以及是否有其他优点和缺点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T11:28:46.850

常用的数据布局有两种：结构数组 (AoS) 和数组结构 (SoA)。

服务端：

```
struct
{
   float x;
   float y;
   float z;
} points[N]; 
```

索阿：

```
struct
{
   float x[N];
   float y[N];
   float z[N];
} points; 
```

为了将 AoS 案例中的每个点与 3x3 矩阵相乘`M`，循环体如下所示：

```
r[i].x = M[0][0]*points[i].x +
         M[0][1]*points[i].y +
         M[0][2]*points[i].z;
// ditto for r[i].y and r[i].z 
```

SSE 可以一次乘以 4 个浮点数（AVX 可以乘以 8 个浮点数），它还提供点积运算，但问题是在向量寄存器中加载 3 个浮点数是非常低效的操作。可以添加一个额外的`float`字段来填充结构，但仍然会损失 1/4 的计算能力，因为两个向量操作数中的第 4 个浮点数未使用（或不包含有用信息）。您也不能对这些点进行矢量化，例如一次处理 4 个点，因为一次加载`points[i].x`需要`points[i+3].x`收集负载，这在 x86 上（尚）不受支持（尽管一旦支持 AVX2 的 CPU 可用，这将改变）。

在 SoA 案例中，内部循环是：

```
r.x[i] = M[0][0]*points.x[i] +
         M[0][1]*points.y[i] +
         M[0][2]*points.z[i];
// ditto for r.y[i] and r.z[i] 
```

它基本上看起来相同，但有一个非常关键的区别。现在编译器可以使用向量指令一次处理 4 个点（甚至 AVX 的 8 个点）。例如，它可以展开循环并将其转换为以下等效向量：

```
<r.x[i], r.x[i+1], r.x[i+2], r.x[i+3]> =
    M[0][0]*<x[i], x[i+1], x[i+2], x[i+3]> +
    M[0][1]*<y[i], y[i+1], y[i+2], y[i+3]> +
    M[0][2]*<z[i], z[i+1], z[i+2], z[i+3]> 
```

这里有三个向量加载、三个标量向量乘法、三个向量加法和一个向量存储。它们都 100% 地利用了 SSE 的向量能力。唯一的问题是点的数量不能被 4 整除，但可以轻松填充数组，或者编译器可能会生成标量代码以串行执行剩余的迭代。无论哪种方式，如果您有很多点，那么仅在剩余的 1 到 3 个点上损失一些性能要比在每个点上不断地利用硬件要好得多。

另一方面，如果您经常需要访问`(x,y,z)`随机点的元组，那么 SoA 实现将导致三个缓存行读取（如果数据不适合缓存），而 AoS 实现将需要一个或两个（带有填充可以避免需要两个负载的情况）。所以答案是——数据结构取决于什么样的操作主导算法。

# git - git submodule init 不拉最新提交

> ID：13844996
> 
> 赞同：41
> 
> 时间：2012-12-12T17:10:48.607
> 
> 标签：git, git-submodules

我有一个 git repo，里面有一个 git 子模块。子模块托管在 bitbucket 上。我想将子模块的本地副本更新为其最新提交。我厌倦了“ **git submodule update** ”，但这并没有做任何事情。所以我尝试删除子模块文件夹，然后执行“ **git submodule init** ”但是它只是拉动初始子模块提交，而不是最新的。

如何让我的本地子模块更新到最新的提交？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-12-12T17:49:17.287

Git 正在做它应该做的事情。`git submodule update`会将您的子模块设置为父 repo 中的当前提交指定子模块应位于的位置。这样，您可以签出另一个分支、较旧的提交或标记，然后运行`git submodule update`，子模块将设置为该引用所期望的，因此您的整个解决方案将满足它的依赖关系。

你需要做的是：

```
cd mysubmoduledir
git fetch
git checkout master # or any other branch that you need the latest of
git merge origin/master
cd -  # go back to the top repo
git status # should show that your submodule changed
git add mysubmoduledir
git commit -m "Updated my solution to use latest sub project." 
```

一个较短的版本是：

```
cd mysubmoduledir
git pull # assumes you are already on the branch you need to be on
cd -
git commit -am "Updated submodule" # assumes you had no other modified files 
```

“更新”这个词不是这个子模块命令的最佳选择。这实际上意味着“将子模块指向父仓库的提交所期望的提交”。

将子模块更新为不同的提交（不必是最新的）需要您 cd 进入该目录，像常规 git repo 一样操作它，以便当前提交是您想要的，然后返回并提交此更改顶级回购。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2017-04-21T07:11:36.663

添加子模块后，只需尝试以下命令。

对于 git v 1.8.x

```
git submodule update --init --recursive --remote 
```

对于 v1.7.x：

`git submodule update --init --recursive`或者`git pull --recurse-submodules`

对于 v1.6.x

```
git submodule foreach git pull origin master 
```

检查您的 git 版本。

```
git version 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-12-12T17:49:05.430

每个包含子模块的 git 提交都与子模块存储库中的特定提交相关联。

提供该`git submodule update`命令以将子模块的签出版本更新为为父存储库的当前版本记录的提交。这实际上可能是比您当前在该子模块中签出的版本更旧的版本，例如，如果您正在检查使用旧版本子模块的父存储库的旧版本。

要获得更新版本的子模块，请切换到该目录并像任何其他 git 存储库一样对其进行更新（例如，从上游存储库中提取）。如果您进行任何新的提交或从与您用作子模块源的存储库不同的存储库中提取，请确保将您的更改推送出去。完成此操作后，您可以返回父存储库并将更改提交到子模块，以记录您现在在当前版本和未来版本中用于子模块的新子模块提交，直到您进行另一次更新。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-07-18T16:14:11.723

这里有点违反直觉的问题（或者至少对我来说是这样）：如果您的主存储库的最新版本与您的子模块不同步，那么当您尝试通过`git submodule update`从内部运行“更新”子模块时主存储库，它只会拉到在父模块中指定的最新更改，而不是在子模块中。

换句话说，您的父项目可能指向您的子模块的错误提交。为确保您的父级指向最新的子模块提交（这是我想要的），导航到子模块并运行`git pull`，然后返回父级并运行`git add .`

接下来，如果您运行该`git diff`命令，您会注意到虽然主存储库中的所有文件都没有更改，但您会收到一条`dirty`消息，显示子模块现在指向一个新的提交。那就是你想要的。只需提交更改并推送它们，您的两个项目应该会重新同步。

确保将来，如果您对子模块进行更改，您还将使用它们将它们添加到父存储库`git add .`（当子模块更改时您会注意到一条`dirty`消息）。

# ios - 如何在 XCode 中更改 iOS 的 Master-Detail 应用程序的结构？

> ID：13844998
> 
> 赞同：0
> 
> 时间：2012-12-12T17:11:01.913
> 
> 标签：ios, uitableview, master-detail

我正在构建一个使用 Master-Detail 模板的 iOS 应用程序。然而，我需要的是在我的初始屏幕上有一个空画布，并有一个具有表格视图的 detailViewController（即切换两个视图）。

我计划在主屏幕上放置按钮，其中一个将依次将我带到具有表格视图的 detailViewController。我更喜欢以编程方式而不是情节提要，因为我已经开始从事这个项目了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-12T17:20:09.663

如果我理解正确，您希望您的主视图有一些按钮，您可以使用这些按钮导航到详细视图。因此，当您添加按钮并创建每个选择器时，请在选择器方法上使用以下方法。如果我记得正确的 Master-Detail 模板创建了一个导航控制器，那么您在顶部有一个导航栏。

```
[self.navigationController pushViewController:yourDetailViewController animated:YES]; 
```

为了清除问题，当您按下按钮时，您调用该按钮的选择器，其中包含此方法。然后，您将通过向右滑动导航到您的详细视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T01:52:46.100

我认为您将不得不移动它——您希望主视图控制器成为 UIViewController 而不是 UITableViewController，对吗？听起来您对这个项目的了解并不深。您应该从正确的结构重新开始。