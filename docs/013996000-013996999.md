# StackOverflow 问答 13996000-13996999

# java - 在遍历日志文件条目时打印一些堆栈跟踪行

> ID：13996000
> 
> 赞同：0
> 
> 时间：2012-12-21T19:25:27.730
> 
> 标签：java, algorithm, log4j

我正在创建一个日志过滤器应用程序，它将显示在应用程序日志中找到的所有错误条目的报告，我想知道将堆栈跟踪的几行与每个错误一起显示的最佳方法是什么。

最终结果将是这样的：

```
+ ErrorA
- ErrorB
    com.package.Class.method(Class.java:666)
    com.package.AnotherClass.ADifferentMethodMethod(Class.java:2012)
    com.thatOtherPackage.ThatClass.someOtherMethod(ThatClass.java:34)
+ ErrorC 
```

这是我到目前为止所拥有的：

```
public JSONArray processFiles(File[] files){

        FileReader fr = null;
        BufferedReader br = null;

        JSONObject jFiles = new JSONObject();
        JSONArray jaf = new JSONArray();

        try {
            for (File file : files) {
                jFiles.put("fileName", file.getName());
                boolean fileIsOk = true;
                try {
                    fr = new FileReader(file);
                } catch (FileNotFoundException e) {
                    //Thanks to Windows, there's no way to check file.canRead()
                    //http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6203387
                    fileIsOk = false;
                }

                if(fileIsOk) {
                    br = new BufferedReader(fr);
                    String line = null;
                    JSONObject jLogEntries = new JSONObject();
                    JSONArray jalog = new JSONArray();
                    int lineNum = 0;

                    while ((line = br.readLine()) != null) {
                        if (line.contains("| ERROR |")) {
                            jLogEntries.put("line " + lineNum, line);
                            ++lineNum;
                        }
                        **// TODO: Implement something to print the next 5 lines of the stack trace.**
                    }
                    lineNum = 0;

                    jalog.add(jLogEntries);
                    jFiles.put("logEntries", jalog);

                    jaf.add(jFiles);
                }
            }// end of files iteration

        } catch (IOException e) {
            e.printStackTrace();
        } catch (Exception e){
            e.printStackTrace();
        }
        return jaf;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:50:08.490

[LineNumberReader](http://docs.oracle.com/javase/6/docs/api/java/io/LineNumberReader.html)是你的朋友。

```
LineNumberReadr lr = new LineNumberread(br);
while ((line = lr.readLine()) != null) {
  if (line.contains("| ERROR |")) {
    jLogEntries.put("line " + lr.getLineNumber(), line);
    for (int i = 0; i < 5; i++) {
      if ((line = lr.readLine()) != null) {
        jLogEntries.put("line " + lr.getLineNumber(), line);
      }
  }
} 
```

如果堆栈中的行数少于 5 行，则需要中断到外部循环，我将留给您解决。

# iphone - UIScrollView Html 链接中的 UIWebView 不起作用

> ID：13996002
> 
> 赞同：4
> 
> 时间：2012-12-21T19:25:33.647
> 
> 标签：iphone, ios, xcode, uiwebview, uiscrollview

我通过将其添加为 a 并`UIWebView`在其中添加了一些标签`UIScrollView`（使用`StoryBoards`），`subview`然后设置 ScrollView`height`以显示`WebView`使用`loadHtmlString`.

html 内容中的链接不起作用。稍微搜索一下，Apple 不建议将`UIWebView`UIScrollView 放入其中以避免意外行为。但由于我还必须添加标签和除 之外的其他东西`UIWebView`，所以我必须将它们嵌入其中`UIScrollView`。

有什么方法可以使链接在 html 内容中正常工作而不会违反 Apple 的建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:30:21.280

没有理由将 UIWebView 放在 ScrollView 中。UIWebView 将按原样正确滚动、缩放和平移内容。除非您有其他一些布局原因，例如将它与其他一些视图结合起来，否则它有点多余。

添加标签的正确方法是将它们添加到 UIViewController 或 NavigationController 并将它们定位在 UIWebView 周围，并将 UIWebView 也添加到其中。

# jquery - jQuery tabs tabs() - 根据 tab1 & tab2 显示隐藏单独的 div

> ID：13996019
> 
> 赞同：1
> 
> 时间：2012-12-21T19:26:44.770
> 
> 标签：jquery, jquery-ui-tabs

我想在选择 tab1 时显示特定的 div。与 tab2 相同。请给我一个解决方案以在单击选项卡时显示/隐藏这些 div。我无法识别处于活动状态的这些选项卡的特定类或 ID。我的要求是单击 tab1 时我需要显示`tab1`和`content1`div

下面是链接

[http://jsfiddle.net/ucaxt/](http://jsfiddle.net/ucaxt/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:42:05.687

一种不需要将外部内容移动到选项卡本身的方法是：

```
var contents = $('div[id^="content"]').hide();
$("#tabs").tabs({
    activate: function(evt, ui) {
        var num = ui.newPanel.attr('id').replace(/\D+/g, '');
        contents.hide();
        $('#content' + num).show();
    }
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ucaxt/3/)。

但是，这种方法*确实*要求您在要显示`id`的*所有*内容`div`元素中附加一个数字，以便识别单击的选项卡、显示的面板和选项卡*之外*的元素之间的关系；所以你的 HTML 变成：

```
<div id="tabs">
    <ul>
        <li><a href="#tab1">Tab1</a></li>
        <li><a href="#tab2">Tab2</a></li>
    </ul>
    <div id="tab1">
        test1
    </div>
    <div id="tab2">
        test2
    </div>
</div>
<br/>
<div id="content1">
    <p>
        on click of first tab (tab1) I need to show this id as well
    </p>
</div>
<br/>
<div id="content2"> <!-- added the '2' to the id here -->
    <p>
        on click of Second tab (tab2) I need to show this id as well
    </p>
</div> 
```

如果您将内容`div`元素包装在外部容器中，在我的演示中它有`id`of `containers`，那么您可以将`div`s 定位为稍微不同的显示/隐藏：

```
$("#tabs").tabs({
    activate: function(evt, ui) {
        var num = ui.newPanel.attr('id').replace(/\D+/g, '');
        $('#contents > div').eq(num - 1).show().siblings().hide();
    }
}); 
```

并使用 HTML：

```
<div id="tabs">
    <ul>
        <li><a href="#tab1">Tab1</a></li>
        <li><a href="#tab2">Tab2</a></li>
    </ul>
    <div id="tab1">
        test1
    </div>
    <div id="tab2">
        test2
    </div>
</div>
<br/>
<div id="contents">
    <div id="content1">
        <p>
            on click of first tab (tab1) I need to show this id as well
        </p>
    </div>
    <br/>
    <div id="content2">
        <p>
            on click of Second tab (tab2) I need to show this id as well
        </p>
    </div>
</div> 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ucaxt/4/)。

我已经修改了上面的代码，以回应 OP 留下的评论（下面）：

> [On] 加载页面我需要显示内容 div1 以及 tab1 内容。

```
function showContent(evt, ui) {
    if (!evt || !ui) {
        return false;
    }
    else {
        // ui.newPanel in the activate event,
        // ui.panel in the create event
        var panel = ui.newPanel || ui.panel,
            num = panel.attr('id').replace(/\D+/g, '');
        $('#contents > div').eq(num - 1).show().siblings().hide();
    }
}
$(function() {
    $("#tabs").tabs({
        // runs the function when the tabs are created:
        create: function(evt, ui) {
            showContent(evt, ui);
        },
        // runs the function when the tabs are activated:
        activate: function(evt, ui) {
            showContent(evt, ui);
        }
    });
});​ 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/ucaxt/6/)。

# javascript - 如何为 img setAttribute 设置后备图像

> ID：13996020
> 
> 赞同：1
> 
> 时间：2012-12-21T19:26:46.223
> 
> 标签：javascript, image, setattribute

我有一个 img 元素：

```
var photo = document.createElement("img"); 
```

这是由存储在对象数组中的名称的照片提供的，所以我“提供”这样的照片：

```
photo.setAttribute('src', './pics/' + myarray[id].Name + '.jpg'); 
```

它工作完美。

唯一不起作用的是为没有图片的元素设置带有默认照片的属性。

我试图在`setAttribute`上面做一行，为所有元素设置一个“默认”图片，希望第二行用正确的图片替换有一个元素，并保持默认的元素不变，但是没有......`console.log`仍然显示了期待`name+jpg`方案的消息，它完全忽略了我的前一行（所以我很确定它不是如何工作的）。

因此，如果您有一个`img`通过数组包含许多实例的元素，那么将默认图片分配给未有意指定图片的元素的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:29:17.300

你能用jQuery吗？这是您描述的问题的解决方案。如果图像以 404 形式返回，则应用默认图像

[http://jsfiddle.net/gunderson/D3DSt/](http://jsfiddle.net/gunderson/D3DSt/)

```
var photo = document.createElement("img");
photo.setAttribute("id", "myPhoto");
$('body').append(photo);

$("#myPhoto").attr("src", 'alogo3w.png').error(function() {
    $(this).attr("src", "https://www.google.com/images/srpr/logo3w.png");
  })
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:30:22.427

如有必要，只需设置默认值

```
photo.setAttribute('src', './pics/' + ( myarray[id].Name ? myarray[id].Name : 'default' ) + '.jpg'); 
```

# c# - SpeechRecognitionEngine 始终识别选择的单词，即使它是错误的

> ID：13996022
> 
> 赞同：1
> 
> 时间：2012-12-21T19:26:54.707
> 
> 标签：c#, speech-recognition, speech

我正在使用`SpeechRecognitionEngine`库在 C# 中进行语音识别，我已将单词“start”设置为要识别的单词（选择）：

```
Choices choices_start = new Choices("start");
GrammarBuilder grBuilder_start = new GrammarBuilder(choices_start);
Grammar grammar_start = new Grammar(grBuilder_start);

SpeechRecognitionEngine speech = new SpeechRecognitionEngine();
speech.LoadGrammar(grammar_start);
speech.SpeechRecognized += RecognizerSpeechRecognized;

private void RecognizerSpeechRecognized(object sender, SpeechRecognizedEventArgs e)
{
    foreach (RecognizedWordUnit word in e.Result.Words)
    {
        switch (word.Text)
        {
            case "start":
                Console.WriteLine(word.Text);
                speech.UnloadGrammar(grammar_start);
                speech.LoadGrammar(grammar_using);
                break;
            default:
                Console.WriteLine(word.Text);
                break;
        }
    }
} 
```

问题是不管我说什么，它总是能识别“开始”这个词，知道为什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T06:43:37.057

这就是算法的工作原理。只要您只给它一个选择，它只会返回给定的单词。你需要给它更多的文本变体来寻找。

例如，如果您想识别任意文本，您可以使用[DictationGrammar](http://msdn.microsoft.com/en-us/library/system.speech.recognition.dictationgrammar.aspx)而不是简单语法。请注意，单词列表仍然有限，无法识别非常稀有的单词。但是这个列表会很大。

如果您的任务是在连续流中查找特定单词，则需要查找关键字定位引擎，而不是语音识别引擎。Microsoft 不提供关键字发现引擎功能。[您可以使用CMUSphinx](http://cmusphinx.sourceforge.net)等开源引擎构建一个

# php - 如何将变量从 jquery POST 回显到另一个页面

> ID：13996023
> 
> 赞同：0
> 
> 时间：2012-12-21T19:27:10.067
> 
> 标签：php, jquery

如何使用从 jquery 从 page1 发布到 page2 的变量。我正在使用以下场景

```
page1.php

    if ( this.checked ) { 
            $.ajax({
                url: 'page2.php',
                type: "POST",
                data: ({name: 145}),
                success: function(data){
               //$("#result").html(data);
                }
            });        

        } 
```

这不起作用，为什么，如果我单独打开 page2.php 并希望进一步使用帖子数据

```
 Page2.php
    <?php
    $userAnswer = $_POST['name'];    
    if ($_POST['submit']){
         echo $userAnswer; 
    }       

    ?>
    <form method="post" action="page2.php">
<input type="submit" value="submit" name="submit" />
</form> 
```

如果我打开 page2.php 并按下提交按钮，则从 page1 发布的值不会显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:29:37.097

您没有发送“提交”数据。

```
if ( this.checked ) { 
    $.ajax({
        url: 'page2.php',
        type: "POST",
        data: ({name: 145, submit: "submit"}), // note the submit property
        success: function(data){
            //$("#result").html(data);
        }
    });        
} 
```

我刚刚注意到这一点：

> 如果我打开 page2.php 并按下提交按钮，则从 page1 发布的值不会显示

那永远不会发生。您从 ajax 请求发布的值不会持续到来自不同页面的第二个请求。您希望将其存储在某种持久存储（例如数据库）中，而不是在请求完成后将丢失的变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:04:51.037

```
if ( this.checked ) {

$.post("page2.php", {name1: variable1, name2: variable2, ...}, function (result) {

});
} 
```

page2.php

```
$storeVariable1 = $_POST['name1'];
$storeVariable2 = $_POST['name2']; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T15:53:20.443

为什么不使用“.load()”函数而不是 post ？

```
$('#resultat').load('page2.php',{name: 145}); 
```

# apache-flex - 灵活的组件样式选项

> ID：13996024
> 
> 赞同：0
> 
> 时间：2012-12-21T19:27:15.313
> 
> 标签：apache-flex, mxml, flexicious

某处是否有列出每种组件类型的所有样式选项的参考？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-23T08:17:02.110

只需查看[http://www.flexicious.com/Home/Documentation](http://www.flexicious.com/Home/Documentation)每个组件都有一个“样式”部分，可以为您提供所需的内容。另外，查看您感兴趣的控件的继承层次结构，许多样式是继承的，您也可以查看基类样式。

例如，我们的 Ultimate 数据网格的样式在这里：（搜索样式）

[http://www.flexicious.com/resources/docs29/com/flexicious/nestedtreedatagrid/FlexDataGrid.html](http://www.flexicious.com/resources/docs29/com/flexicious/nestedtreedatagrid/FlexDataGrid.html)

# ruby-on-rails - 可以在 Rails 中对布局视图进行子类化吗？

> ID：13996031
> 
> 赞同：0
> 
> 时间：2012-12-21T19:28:13.153
> 
> 标签：ruby-on-rails, ruby-on-rails-3, layout, ruby-on-rails-3.2, erb

我有一个很棒的默认布局视图`/app/views/layouts/application.html.erb`。现在我有一堆教学网页要显示。很简单..我只是将它们路由到控制器并将各个页面的`.html.erb`文件放在`views`目录中。但它们都围绕核心教学内容共享共同的 html/css 功能。

所以我希望他们都有一个很好的布局，称为类似的布局`layouts/instructional.html.erb`，并且该布局只是扩展了`application.html.erb`布局。可能的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:41:21.027

是的，可以使用嵌套布局，从您的模块布局中，您可以拥有自定义代码并扩展主布局。

看看她的例子：http: [//m.onkey.org/nested-layouts-in-rails-3](http://m.onkey.org/nested-layouts-in-rails-3)

# ruby-on-rails - 在 Ruby 中对数组进行排序（特殊情况）

> ID：13996033
> 
> 赞同：2
> 
> 时间：2012-12-21T19:28:24.313
> 
> 标签：ruby-on-rails, ruby, arrays, ruby-on-rails-3

我在 Ruby 中有一个数组，其值如下

```
xs = %w(2.0.0.1
2.0.0.6
2.0.1.10
2.0.1.5
2.0.0.8) 
```

等等。我想对数组进行排序，最终结果应该是这样的：

```
ys = %w(2.0.0.1
2.0.0.6
2.0.0.8
2.0.1.5
2.0.1.10) 
```

我曾尝试使用该`array.sort`功能，但它放在`"2.0.1.10"`前面`"2.0.1.5"`。我不确定为什么会这样

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-21T19:34:05.763

使用[Schwartzian 变换](http://en.wikipedia.org/wiki/Schwartzian_transform)( [Enumerable#sort_by](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-sort_by) )，并利用整数数组 ( [Array#<=> ) 定义的](http://www.ruby-doc.org/core-1.9.3/Array.html#method-i-3C-3D-3E)[字典顺序](http://en.wikipedia.org/wiki/Lexicographical_order)：

```
sorted_ips = ips.sort_by { |ip| ip.split(".").map(&:to_i) } 
```

> 你能解释得更详细一点吗

1.  您不能比较包含数字的字符串：`"2" > "1"`，是的，但是`"11" < "2"`因为字符串是按字典顺序比较的，就像字典中的单词一样。因此，您必须将 ip 转换为可以比较的东西（整数数组）`ip.split(".").map(&:to_i)`：. 例如`"1.2.10.3"`转换为`[1, 2, 10, 3]`. 我们称之为转换`f`。

2.  您现在可以使用`Enumerable#sort`: `ips.sort { |ip1, ip2| f(ip1) <=> f(ip2) }`，但始终检查是否`Enumerable#sort_by`可以使用更高的抽象。在这种情况下：`ips.sort_by { |ip| f(ip) }`。您可以将其理解为“`ips`按映射定义的顺序对它们进行排序`f`”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:32:57.203

通过拆分将数据拆分为块`'.'`。没有标准函数可以这样做，因此您需要编写自定义排序来执行此操作。

`2.0.1.10`并且您之前所说的行为`2.0.1.5`是预期的，因为它将数据作为字符串并进行 ASCII 比较，从而导致您看到的结果。

```
arr1 = "2.0.0.1".split('.')
arr2 = "2.0.0.6".split('.') 
```

`arr1`对于输入中的所有数据，`arr2`逐个元素进行比较。

# jquery - 用户输入值验证

> ID：13996034
> 
> 赞同：0
> 
> 时间：2012-12-21T19:28:24.207
> 
> 标签：jquery, html, validation

我试图在单击父按钮但无法正常工作时显示警告。如果输入的值是过去任何一天的值，则会显示警告。

这是HTML：

```
<div class="well">
  <button class="expando" />
  <fieldset class="hire_date_wrapper">
    <label>Hire Date</label>
    <input type="text" name="input_name" /><br />
    <span class="date_warning">Warning message</span>
  </fieldset>
</div> 
```

这是js：

```
$('.expando').click(function(){
    var well = $(this).parents('.well');
    var hiredate = well.children('[name="input_name"]').val();
    var today = new Date();
    if (hiredate < today) {
        well.children('.date_warning').show();
    } else {
        well.children('.date_warning').hide();
    };
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:34:16.113

您应该将输入的日期转换为日期对象

```
$('.expando').click(function(){
    var well = $(this).parents('.well');
    var hiredate = new Date($( '[name="input_name"]', well).val());
    var today = new Date();
    if ( isNaN( hiredate.getTime() ) ) {
        $( '.date_warning', well ).show();
    } else {
        if (hiredate.getTime() < today.getTime()) {
            $( '.date_warning', well ).show();
        } else {
            $( '.date_warning', well ).hide();
        }
    }
});​ 
```

在这里试试：http: [//jsfiddle.net/TM5EK/](http://jsfiddle.net/TM5EK/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:31:01.357

我认为这是因为您只是在比较输入的值和一个日期对象，而不是 2 个日期对象。

尝试使用 将受雇者变成一个对象`new Date(hiredate)`。

小提琴：http: [//jsfiddle.net/UjVRY/](http://jsfiddle.net/UjVRY/)

小提琴中的代码

```
var now = new Date(),
    hiredate = '2012-10-10',
    hiredateobj = new Date(hiredate);

$('#results_noobj').html((hiredate < now ? 'before' : 'after')+' now');
// Output 'after now'

$('#results_obj').html((hiredateobj < now ? 'before' : 'after')+' now');
// OUtputs 'before now' 
```

​</p>

# android - 如果激活了 swype，则无法在数字后键入文本

> ID：13996040
> 
> 赞同：1
> 
> 时间：2012-12-21T19:28:48.687
> 
> 标签：android, jquery-mobile

我面临一个问题，我的移动网站被 jQuery Mobile 破坏了。

似乎如果用户从带有 Swype 的 Android 设备进行浏览，则他无法在数字后输入字母。

例如，如果用户想输入“123hello”，“123”就可以正常工作，一旦他尝试输入“h”，h 就会出现然后立即消失。

我只有使用 jQuery Mobile 框架的页面才有这个问题，如果禁用 Swype 也没有问题。所以我猜这是 jQuery Mobile 和 Swype 之间的东西。

# javascript - 骨干模型已保存，但向 HTTP 发送一个空数组

> ID：13996041
> 
> 赞同：1
> 
> 时间：2012-12-21T19:28:49.727
> 
> 标签：javascript, http, rest, symfony, backbone.js

我试图解决一个简单的问题几个小时。我有一个集合，这是我的代码：

```
var id = $(e.target).data("id");
var permissionModel = this.params.collection.get(id);
permissionModel.set({'permission_status':'active'});
permissionModel.save({
    success: function(data) {},
    error: function(data,jXHR) {}
}); 
```

而且我已经看到模型发生了变化，但是我的 symfony 控制器中有：

```
$data = $this->getRequest()->request->all();
print_r($data);
die; 
```

结果：

```
 array() 
```

我不明白为什么。
任何人都可以帮我找出问题所在吗？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T06:20:08.307

也许您正在寻找`Backbone.emulateJSON = true`设置。

以下是[官方文档](http://documentcloud.github.com/backbone/#Sync-emulateJSON)所说的：

> 如果您正在使用无法处理编码为 application/json 的请求的旧版 Web 服务器，请设置 Backbone.emulateJSON = true; 将导致 JSON 在模型参数下序列化，并使用 application/x-www-form-urlencoded mime 类型发出请求，就像来自 HTML 表单一样。

# sql-server-2008 - 子查询未正确评估参数

> ID：13996043
> 
> 赞同：0
> 
> 时间：2012-12-21T19:28:57.713
> 
> 标签：sql-server-2008, tsql

需要启动一个新线程来处理旧问题的新问题。

原来的问题是在这个链接.... [复杂的查询连接检查值不存在](https://stackoverflow.com/questions/13992879/complex-query-join-checking-that-value-does-not-exist)

我有两张桌子，第一张

```
Tb1 = drID, schedDate, rteID 
```

第二个有：

```
Tb2  = drID, FName, LName, Active 
```

tb1 schedDate 的值为 11/12/2012 但不返回任何记录，如果我输入 11/01/2012 我会返回正确的记录，但 tb1 中的任何记录中都不存在此日期。

```
SELECT drID, Fname, LName
FROM   TB2
WHERE  Active = True 
AND   drID NOT IN (
      SELECT drID
      FROM   Tb1
      WHERE  (drID IS NULL OR drID = '')
      AND  (schedDate = (@targetDate)
      ) 
```

两个日期字段都是我尝试单独投射的日期，并且两者都放在一起，如...

```
AND (CAST(schedDate AS DATE) = CAST(@targetDate AS DATE)) 
```

和

```
AND (CAST(schedDate AS DATETIME) = CAST(@targetDate AS DATETIME)) 
```

我正在尝试检查提交日期的 tb1 中是否存在 drID。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:59:52.400

我认为您的子查询存在根本缺陷：

```
SELECT drID, Fname, LName
FROM   TB2
WHERE  Active = True 
AND   drID NOT IN (
  -- You are looking for drID's not included in the following subquery.
  SELECT drID
  FROM   Tb1
  WHERE  (drID IS NULL OR drID = '')
  AND  (schedDate = (@targetDate)
  ) 
```

您的子查询**仅**返回 null 或“drID”。

```
 SELECT drID
  FROM   Tb1
  WHERE  (drID IS NULL OR drID = '')
  AND  (schedDate = (@targetDate) 
```

编辑：

更清楚地说，外部查询从 table2 返回所有 drID、Fname、LName，其中活动标志设置为 true，并且 drID**不包含在****子查询返回**的 drID 列表中。您的子查询永远不会返回 drID。

从子查询中删除 (drID IS NULL or dirID = '')。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:52:21.093

这将在比较之前从两个日期时间变量中删除任何小时、分钟秒和更小的时间信息。

```
SELECT drID, Fname, LName
FROM   TB2
WHERE  Active = True 
AND   drID NOT IN (
      SELECT drID
      FROM   Tb1
      WHERE  (drID IS NULL OR drID = '')
      AND  (dateadd(day,datediff(day,0,schedDate),0) = 
            dateadd(day,datediff(day,0,@targetDate),0)
           ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T19:54:56.207

这行得通吗？

```
SELECT drID, Fname, LName
FROM   TB2 left outer join tb1 on
  tb2.drid = tb1.drid and
  tb1.active = true and
  schedDate = @targetDate
WHERE  
  tb1.drid is null 
```

如果是相等的日期测试导致它失败，您也可以尝试

```
where abs(datediff(day,@targetDate,schedDate)) < 1 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-03T19:08:46.493

这是这个问题的正确解决方案....

```
WHERE not exists (SELECT drID FROM tb1 .... 
```

日期值不是问题。

感谢所有的反馈。

# c# - 如何分离 MVVM

> ID：13996051
> 
> 赞同：0
> 
> 时间：2012-12-21T19:29:33.747
> 
> 标签：c#, .net, design-patterns, mvvm, castle-windsor

我想用 C# 的 MVVM 模式设置我的项目。

所以我想在我的解决方案中有三个项目：

*   `[projectname].Model`
*   `[projectname].View`
*   `[projectname].ViewModel`

我发现了类似的东西，我把我的东西分开了，但它都在一个项目中。所以在我看来没有真正的分离。

所以我来到了Castle Windsor 微内核。

现在我想要`[projectname].Loader`加载我的模型、我的 ViewModels 和视图并启动应用程序的东西。

但我无法弄清楚如何做到这一点。如何将我的`DataContext`视图设置为 ViewModel？

ViewModels 将获得模型的构造函数注入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:37:04.080

试着看看[Prism](http://msdn.microsoft.com/en-us/library/gg406140.aspx)，尤其是[关于依赖注入的部分](http://msdn.microsoft.com/en-us/library/ff921140%28v=pandp.40%29.aspx)。它允许您保持 [projectname].Model、[projectname].View 和 [projectname].ViewModel 程序集真正相互独立。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T05:04:37.373

是的，我同意第一个答案，因为 Prism 与 MVVM 相比更灵活，因此它允许您保持您的 prejectName.Model 、 ProjectName.View 和 ProjectName.ViewModel 以及 MVVM 的可访问性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-01T18:44:03.883

作为 Prism 的替代品，您可以看看 Caliburn Micro。如果你愿意，你可以把它和温莎结合起来。

亲切的问候， Marwijn

# android - 光栅化后是否应用了 Android 视图转换？

> ID：13996058
> 
> 赞同：3
> 
> 时间：2012-12-21T19:30:19.900
> 
> 标签：android, android-canvas, android-view

下面代码中的行 (A) 和行 (B) 应生成相同的图像。

![正确的图像](../Images/eff47f0f5478e76fe13befdf17adda03.png)

然而，行 (A) 却产生了图像：

![在此处输入图像描述](../Images/e463213db922409dbdb132aff39d9101.png)

怎么了？光栅化后是否应用视图/画布转换？

```
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Paint;
import android.graphics.Rect;
import android.graphics.RectF;
import android.view.View;
import android.graphics.Matrix;

public class MyView extends View {
    Paint paint = new Paint();

    public MyView(Context c) {
        super(c);
        // this.setLayerType(View.LAYER_TYPE_SOFTWARE, null); // (C)
    }

    Rect canvasRect   = new Rect();
    RectF canvasRectf = new RectF();
    RectF scene = new RectF();
    Matrix M = new Matrix();

    @Override
    protected void onDraw(Canvas canvas) {
        getDrawingRect(canvasRect);
        canvasRectf.set(canvasRect);

        scene.set(0,0, 100,100); // (A)
        // scene.set(0,0, 500,500); // (B)

        M.setRectToRect(scene, canvasRectf, Matrix.ScaleToFit.CENTER);
        canvas.setMatrix(M);

        canvas.drawCircle( 50, 50, 1, paint); // (A)
        // canvas.drawCircle(250,250, 5, paint); // (B)
    }
} 
```

**更新：**如果 (C) 行未注释，则不会出现问题（谢谢，Henry）。使用硬件加速时是否可以获得第一张图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-26T20:02:25.203

启用硬件加速后，我只能使用 Android 4.1.2 重现该问题。这可能是一个错误吗？

# eclipse - 有没有办法在 Eclipse 中获取存储库冲突通知

> ID：13996063
> 
> 赞同：0
> 
> 时间：2012-12-21T19:30:44.073
> 
> 标签：eclipse, svn

我刚刚意识到我可以在 Eclipse 中安排我的存储库的同步。但是，如果我在不必去“团队同步”视角查看冲突的情况下收到冲突通知，那就太好了。是否有摘要视图或弹出显示的方法？

基本上我想尽快知道有冲突。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:23:01.573

我认为当前的 svn eclipse 插件不可能，因为为了显示您的文件冲突，它必须自动连接到 svn 服务器，并在每次按下保存网络消耗的文件时进行文件比较。

# c - 每个 inode 的文件位置？

> ID：13996073
> 
> 赞同：3
> 
> 时间：2012-12-21T19:31:19.597
> 
> 标签：c, linux

我对 lseek 中使用的文件位置的概念感到困惑。这个文件位置是保持在 inode 级别还是一个简单的变量，对于在同一个文件上工作的不同进程可能具有不同的值？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T19:34:36.707

根据[lseek 文档](http://www.kernel.org/doc/man-pages/online/pages/man2/lseek.2.html)，文件位置与文件描述符指向的打开文件相关联，即由[open](http://www.kernel.org/doc/man-pages/online/pages/man2/open.2.html)交给您的东西。由于和之类的功能`dup`，`fork`多个*描述符*可以指向单个*描述*，但它是保存位置光标的描述。

想一想：如果它与 inode 相关联，那么您将无法让多个进程以合理的方式访问文件，因为一个进程对该文件的所有访问都会影响其他进程。

因此，单个进程可以跟踪许多不同的文件位置，因为它具有给定文件的文件描述符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:35:26.913

它不是“inode”，而是内核中的 FILEHANDLE。

Inode 是磁盘上 *nix 特定文件系统的文件描述的一部分。例如，FAT32 没有 inode，但受 Linux 支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-24T13:57:51.150

为了了解文件描述符和打开文件之间的关系，我们需要检查三个数据结构。

*   每个进程的文件描述符表
*   系统范围的打开文件描述符表
*   文件系统 i 节点表。

对于每个进程，内核维护一个打开文件描述符表。此表中的每个条目都记录有关单个文件描述符的信息，包括

*   一组控制文件描述符操作的标志。
*   对打开文件描述的引用

内核维护所有打开的文件描述符的系统范围表。打开文件描述存储与打开文件相关的所有信息，包括：

*   当前文件偏移量（由 read() 和 write() 更新，或使用 lseek() 显式修改）
*   打开文件时指定的状态标志。
*   文件访问模式（只读、只写或读写，在 open() 中指定）
*   与信号驱动 I/O 相关的设置和
*   对该文件的 i-node 对象的引用。

> *参考 - 第 94 页，Michael Kerrisk 的 Linux 编程接口*

# c# - C# .NET Process.Start() returning null when running shortcuts

> ID：13996075
> 
> 赞同：1
> 
> 时间：2012-12-21T19:31:24.237
> 
> 标签：c#, .net, process

Alright, I've figured out my issue. I am using some software to remotely start programs on local computers. In doing so, I send a path across the network of a program that I want that machine to start. It uses Process.Start and stores the executing path. I then, later, resend that path and tell it close the Process that was associated with this path.

```
Process newProcess = Process.Start(startPath);
_runningProcesses.Add(new MCProcess(startPath, new Process); 
```

Sometimes, I will use this to call a shortcut, which I use because I want to pass some command link arguments along with.

I've used this to call .exe and .lnk (shortcut extension) and it runs the programs just fine.

However, when passing in the path to a shortcut, the process that it returns is null! Therefor, when I send the path back to close the program, the process is null and it can't close the program.

Any solutions?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:36:25.230

You don't need shortcut to pass arguments to the program, just do following:

```
Process process = new Process();
process.StartInfo.FileName = "\"C:\\my.exe\"";
process.StartInfo.Arguments = "arg1 arg2 arg3";
//...
process.Start(); 
```

In command line it would look like C:\my.exe arg1 arg2 arg3

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:35:42.593

just take the target of the shortcut if its necessary to use the shortcut. [Get target of shortcut folder](https://stackoverflow.com/questions/9414152/get-target-of-shortcut-folder)

# powershell - 将 PowerShell SecureString 作为参数或控制台条目处理

> ID：13996080
> 
> 赞同：1
> 
> 时间：2012-12-21T19:31:42.833
> 
> 标签：powershell, directoryservices, securestring

我在尝试从中调用 DirectoryServices 查询的 PowerShell 脚本时遇到了很多困难。目前，如果我做一个

```
$password = read-host "Password" -asSecureString 
```

随后

```
$credential = New-Object System.Management.Automation.PSCredential $username,$password 
```

一切正常。但是，如果我尝试使用 param($password) 传递字符串参数，然后使用以下代码将其转换为安全字符串：

```
$password = ConvertTo-SecureString -AsPlainText -Force $password 
```

经过大量调试后，我可以看到这在将字符串转换为安全字符串方面工作正常，但是当我使用该参数时，我从 DirectoryServices 得到了错误的用户/密码。从控制台读取时一切正常。关于我可以做些什么来接受参数或在没有参数的情况下接受控制台输入的任何想法？

这是我希望的工作，但没有：

```
if($password -eq $null) {
    $password = read-host "Password" -asSecureString
} else {
    $password = ConvertTo-SecureString -AsPlainText -Force $password
}
$credential = New-Object System.Management.Automation.PSCredential $username,$password 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T16:40:00.927

我最近创建了一个脚本并遇到了同样的问题。我在我的案例中发现的解决方法如下：

```
#Prompts for the username/password, enter the username in the form of DomainName\UserName
$Credential = get-credential

#Converts the password to clear text to pass it through correctly as passing through a secure string does not work.
$Password = $credential.GetNetworkCredential().password

#Converts the $Credential to just the DomainName/UsernName.
$Account = $credential.UserName 
```

希望这将适用于您的情况

# c++ - 在 C++ 中获取环境变量 - 我得到 NULL

> ID：13996081
> 
> 赞同：2
> 
> 时间：2012-12-21T19:31:49.440
> 
> 标签：c++, environment-variables

我正在尝试获取环境变量的内容，如果它存在的话。

```
#define MY_VAR "MY_ENV_VAR"
//function
#pragma warning(disable:4996)
char const* temp = getenv(MY_VAR);
if(temp != NULL)
{
    string_variable = std::string(temp);            
}   
//code
#pragma warning(default:4996) 
```

我以为我在做正确的事情，但是一旦我创建了环境变量并为其赋予了默认值，我就希望 temp 不为 NULL ......我期待太多了吗？

我在调试中，我看到：

```
temp 0x00000 <Bad Ptr> 
! CXX0030 Error: Expression cannot be evaluated 
```

在命令行中运行“set”会显示环境变量（顺便说一下，系统）。

我在Windows...

注意：我使用了编译指示警告，因为我读到 getenv 已被弃用或其他东西。

请告诉我为什么我没有得到有效值。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-09T05:11:41.233

你的代码没问题。添加/删除环境变量后，您只需重新启动 Visual Studio 或/和计算机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:39:20.117

您发布的代码应该可以工作。无论如何，它对我有用。也许你没有得到正确的 env 变量，或者 Visual Studio 环境没有它。试试这个：

```
std::string string_variable;

#define MY_VAR "PATH"
int main()
{
    char const* temp = getenv(MY_VAR);
    if(temp != NULL)
    {
        string_variable = std::string(temp);            
    }   
} 
```

更好的是，去掉宏，这样你就可以在运行时看到传递给的内容`getenv`：

```
std::string string_variable;
static const std::string MY_VAR = "PATH";
int main()
{
    char const* temp = getenv(MY_VAR.c_str());
    if(temp != NULL)
    {
        string_variable = std::string(temp);            
    }   
} 
```

# javascript - 不重复的 jQuery 每个行为

> ID：13996087
> 
> 赞同：3
> 
> 时间：2012-12-21T19:32:47.957
> 
> 标签：javascript, settimeout, jquery

奇怪的概念问题。下面的数组包含三个元素。当我运行此代码时，我的意图是脚本等待两秒钟，显示警报，等待两秒钟，显示警报，等待两秒钟，然后显示最终警报。相反，它只等待两秒钟，然后连续显示所有三个警报。我一直在玩弄它一段时间，但找不到我缺少的东西。有什么建议么？

```
 $.each(node_array, function(index,value){
        if(value != undefined){
          setTimeout(function(){
            alert("hey")},
          2000)
        }
      }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:34:29.203

迭代时，您设置了超时，但不会停止迭代。所以所有的 setTimeout 都是同时启动的。

您需要`setTimeout`在用户单击警报后启动下一个：

```
var i=0;
function onestep(){
   alert('hey');
   var value = node_array[i];
   if (++i<node_array.length) setTimeout(onestep, 2000);
}
onestep(); 
```

[示范](http://jsfiddle.net/J53uE/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T19:40:20.663

每次迭代将延迟增加 2 秒。

```
$.each(node_array, function(index,value){
    if(value != undefined){
        setTimeout(function(){
            alert("hey");
        },(index+1)*2000)
    }
}); 
```

setTimeout 是非阻塞的，因此代码将在延迟过去之前继续运行，导致您以相同的延迟同时触发 x 个 setTimeout，因此它们都同时完成。

# c# - 用鼠标单击时如何获取 ListView (GridView) 单元格的内容

> ID：13996088
> 
> 赞同：4
> 
> 时间：2012-12-21T19:32:52.080
> 
> 标签：c#, wpf, listview, gridview

我正在尝试获取设置为 ListView 视图的 GridView 内的“单元格”的文本值。我不想获取 ListView 的 SelectedItem，因为它只返回我的整个视图模型（但不是单元格引用的属性）。

我可以通过响应直接鼠标事件（向上或其他）来获取文本值，如果该值是文本块，显然我可以使用文本。这很好用，到目前为止，这是我唯一的解决方案，尽管它目前有限。

我想更进一步，能够单击单元格区域中的任何位置，四处导航以找到适当的文本块，然后使用该值。我已经尝试了 50 万种方法来做到这一点，但看起来合乎逻辑的方法似乎并不像它应该的那样有效。

## 设置：

我有一个动态 GridView，它根据我传递给它的数据模型创建自己的列和绑定。我正在使用程序化单元格模板（如下所示）对单元格进行单独控制，特别是这样我可以为其添加一个“边框”，使其实际上分离出每个单元格。我已经命名了这些对象，因此当我在 VisualTree 中导航时可以更轻松地访问它们。

这是模板代码。（请注意，内容呈现器最初是一个文本块本身，但是为了以后的灵活性而改变了）

```
private DataTemplate GetCellTemplate(string bindingName)
    {
        StringBuilder builder = new StringBuilder();
        builder.Append("<DataTemplate ");
        builder.Append("xmlns='http://schemas.microsoft.com/winfx/");
        builder.Append("2006/xaml/presentation' ");
        builder.Append("xmlns:x='http://schemas.microsoft.com/winfx/2006/xaml' ");
        builder.Append("xmlns:local = 'clr-namespace:XXXXXXXX");
        builder.Append(";assembly=XXXXXXXXX'>");
        builder.Append("<Border Name=\"border\" BorderThickness=\"1,0,0,0\" BorderBrush=\"Gray\" Margin=\"-6,-3,-6,-3\">");
        builder.Append("<Grid Margin=\"6,3,6,3\">");
        builder.Append("<ContentPresenter Name=\"content\" HorizontalAlignment=\"Stretch\" Content=\"{Binding ");
        builder.Append(string.Format("{0}", bindingName));
        builder.Append("}\"/>");
        builder.Append("</Grid>");
        builder.Append("</Border>");
        builder.Append("</DataTemplate>");
        DataTemplate cellTemplate= (DataTemplate)XamlReader.Parse(builder.ToString());
        return cellTemplate; 
    } 
```

## 我试过的：

对我来说合乎逻辑的方法是对鼠标事件做出反应。从具有鼠标事件的对象中，我将执行 A. 查看其子项以查找文本块，或 B. 获取其父项，然后查找具有文本块的子项。

我的假设是，如果我单击空白区域，我将单击包含我的文本块的容器。到目前为止，出现的两件事是边框和矩形（如果我不单击文本本身）。A. 除了recangle 和边框之外，什么都不返回。当我做 B 时，我可以找到文本块，但它们是整行中的每个文本块。

所以我试图从中做的是获取所有文本块，然后倒退直到我找到哪个具有 IsMouseOver 属性为真。事实证明，除了整行的内容呈现器之外，这些对象都没有 IsMouseOver。所以这似乎向我表明单元格中的空白实际上并不包含文本块。

我发现当我单击边框并开始查看子项时，我最终会看到一个容器，该容器具有一个矩形（我单击的矩形）和一个网格行视图演示器。演示者显示了行内的所有对象（因此，当我进行递归扫描时，为什么我会得到所有文本块）。

这是一些用于执行此操作的代码，以了解我在做什么。我已经编写了大约 10 个不同版本的相同递归代码，通常试图找出谁将鼠标悬停在它上面并与文本框相关。

```
private void OnPreviewMouseUp(object sender, MouseButtonEventArgs e)
    {
        object original = e.OriginalSource;
        if (original is TextBlock)
        {
            this.valueTextBlock.Text = ((TextBlock)original).Text;
        }
        else if (original is FrameworkElement)
        {
            var result = GetAllNestedChildren<Border>(VisualTreeHelper.GetParent((DependencyObject)original)).Where(x => x.Name == "border").Where(x => HasAChildWithMouse(x)).ToList();

        }
        else
        {
            this.valueTextBlock.Text = string.Empty;
        }
    }

    private bool HasAChildWithMouse(UIElement element)
    {
        if (element.IsMouseOver || element.IsMouseDirectlyOver)
            return true;
        var childCount = VisualTreeHelper.GetChildrenCount(element);
        for (int i = 0; i < childCount; ++i)
        {
            var child = VisualTreeHelper.GetChild(element, i);
            if (child is UIElement)
                if (HasAChildWithMouse((UIElement)child))
                    return true;
        }
        return false;
    }
private IEnumerable<T> GetAllNestedChildren<T>(DependencyObject obj) where T : UIElement
    {
        if (obj is T)
            yield return obj as T;
        var childCount = VisualTreeHelper.GetChildrenCount(obj);
        for (int i = 0; i < childCount; ++i)
        {
            var child = VisualTreeHelper.GetChild(obj, i);
            foreach (var nested in GetAllNestedChildren<T>(child))
                yield return nested; 
        }
    }

    private T GetObjectByTypeParentHasMouse<T>(DependencyObject obj) where T : UIElement
    {
        if (obj is T)
        {
            if ((VisualTreeHelper.GetParent(obj) as UIElement).IsMouseOver )
            {
                return obj as T;
            }
        }
        var childCount = VisualTreeHelper.GetChildrenCount(obj);
        for (int i = 0; i < childCount; ++i)
        {
            var child = VisualTreeHelper.GetChild(obj, i);
            var correctType = GetObjectByTypeParentHasMouse<T>(child);
            if (correctType != null)
                return correctType;
        }
        return null;
    }

    private T GetContainedType<T>(DependencyObject obj, bool checkForMouseOver) where T : UIElement 
    {
        if (obj is T && ((T)obj).IsMouseOver)
            return obj as T;
        var childCount = VisualTreeHelper.GetChildrenCount(obj);
        for (int i = 0; i < childCount; ++i)
        {
            var child = VisualTreeHelper.GetChild(obj, i);
            var correctType = GetContainedType<T>(child, checkForMouseOver);
            if (correctType != null)
                return correctType;
        }
        return null;
    } 
```

我采取的另一种方法是从 TextBlock 本身开始，找到它的包含父项，然后找出我如何导航到答案。我发现 templateparent 是 ContentPresenter（命名为 ="content"）我找到了网格，然后是边框。边框的父级是内容呈现器，其内容是整行的数据视图模型。此 contentpresenter 的父级是网格列的 Presenter。这与我在另一个中导航到的相同。

看起来第一个方法对象虽然包含单元格，但实际上并不包含文本块或整个单元格模板项。在我看来，没有办法从单击的边框或矩形返回到实际的文本字段。

“长话短说”有没有办法建立这种联系？

（顺便说一句，我不愿意放弃这个 ListView/GridView，因为它的回报远远超过这个负面，我很乐意放弃这个想法以保留其余部分）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T11:01:06.667

我想你应该可以

1）在数据模板的根目录中添加某种（切换）按钮，然后绑定到 Command 并在视图模型上处理它，或者绑定到 IsChecked/IsPressed 并通过数据触发器或 w/e 在视图端处理更改。

2) 在某个时候将 EventTrigger 添加到您的数据模板中，并通过简单的动画在那里处理 PreviewNouseUp/Down 事件。

# android - Android 上的 PhoneGap：从远程服务器加载 WebApp

> ID：13996092
> 
> 赞同：7
> 
> 时间：2012-12-21T19:33:09.737
> 
> 标签：android, html, cordova

当我将所有 Web 文件（html、JS、CSS ...）复制到项目的 www 文件夹并使用这些文件编译应用程序时，我的 Android PhoneGap 应用程序完全按预期工作。但是，当我不复制它们并重定向到包含这些文件的 Web 服务器时（即在 WWW 文件夹中只有一个文件：index.html 重定向到我的服务器），phonegap 不再在应用程序中工作。

当应用程序内容文件由远程服务器交付并且未与应用程序一起编译时，有没有办法让 phonegap 工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T19:59:49.327

可以办到。没有什么能阻止你这样做。

Phonegap + 安卓：

在您的主要活动类中，方法 onCreate 将 loadUrl 更改为：

***super.loadUrl(" [http://.../index.html](http://.../index.html) ");***

iPhone + Phonegap 是另一个故事，仍然可以做到。因为这里有很多变化，这里有一个教程：[http ://www.joeldare.com/wiki/open_a_url_in_phonegap](http://www.joeldare.com/wiki/open_a_url_in_phonegap)

还有一件事，您必须为 Phonegap 启用互联网连接。

当您使用 android 平台时，将此行添加到您的 AndroidManifest：

```
<uses-permission android:name="android.permission.INTERNET" /> 
```

啊，还有一件事，必须在您的 html 文件中设置视口元标记。

# c++ - 为什么我不能在 Visual Studio 中进入这个循环

> ID：13996093
> 
> 赞同：0
> 
> 时间：2012-12-21T19:33:12.943
> 
> 标签：c++

出于某种原因，Visual Studio 不会进入这段代码，我看不到变量 k 和 p 的内容

```
 for(int k=0; k<6; k++)
            {
                for(int p=0; p<6; p++)
                {
                    if(k=0)
                    {
                        levelToDraw[k][p] = LevelOne[k][p];
                    }
                    else
                    {
                        levelToDraw[k][p] = LevelOne[k-1][p];
                    }
                }
            } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T19:42:03.167

从我所看到的

```
 for(int k=0; k<6; k++)
        {
            for(int p=0; p<6; p++)
            {
                if(k=0)
                {
                    levelToDraw[k][p] = LevelOne[k][p];
                }
                else
                {
                    levelToDraw[k][p] = LevelOne[k-1][p];
                }
            }
        } 
```

是一个没有可见副作用的无限循环，因为`k`在循环内总是重置为零。（注意意外分配）。没有可见副作用的无限循环在 C++ 中是未定义的行为。这意味着编译器可以做任何事情。例如，它可以丢弃循环，这意味着您无法进入它 - 这很可能就是发生的事情。由于它是未定义的行为，它甚至可能导致机器着火。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T19:34:48.720

您正在使用 assignemnt 而不是在这一行进行比较：

```
 if(k=0) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T19:54:21.353

考虑升级[C4706](http://msdn.microsoft.com/en-us/library/7hw7c1he)的警告级别。我不记得确切的编译器开关，但它可能类似于 /W14706。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T19:38:07.453

我认为您错过了 Voo 指出的一个“=”

该声明必须是 `if(k==0)`

你的处理器比你的断点分析快得多。当您的代码到达该循环时，它已经完成，然后才能检查断点停止。如果您停止该循环上方的代码，它将起作用，但由于处理速度的原因，在循环上它不会。尝试在循环中添加睡眠，然后您可以进入循环。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T19:38:29.740

由于您正在循环文字，因此编译器可能正在优化代码。例如，它可能正在展开循环。

您可以尝试关闭[编译器优化](https://stackoverflow.com/questions/4713320/is-there-any-way-to-disable-compiler-optimisation-for-a-specific-line-of-code)来验证。

删除诸如此类的决定性因素`if (k=0)...`当然也会有所帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T19:35:10.533

我认为你应该 ty `if(k==0)`。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T19:36:40.890

如果编译器很聪明`(k=0)`，就会被优化出来，并且你不能进入`if`. 至少在指令级别。

# ssis - 在集成服务 (SSIS) 中合并列

> ID：13996094
> 
> 赞同：1
> 
> 时间：2012-12-21T19:33:16.023
> 
> 标签：ssis, foreach, merge

在数据流中，我有一个 ADO NET 源，它加载如下表：

```
PersonID, Email
1, "john@hotmail.com"
1, "john_job@yahoo.com"
2, "susan@gmail.com"
2, "sus2010@hotmail.com" 
```

我需要合并每个人的电子邮件并得到如下结果：

```
PersonID, EmailsArray
1, "john@hotmail.com,john_job@yahoo.com"
2, "susan@gmail.com,sus2010@hotmail.com" 
```

我该怎么做？使用派生列？脚本组件？一个foreach循环？（在数据流中不存在）。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T10:40:25.123

使用具有以下逻辑的异步脚本组件：

1.  在 ID 列上对数据进行排序。
2.  在脚本组件中，声明一个跟踪前一个 id 的变量，在脚本末尾将其分配给输入缓冲区的 ID 列。
3.  对于输入缓冲区中的每一行，将电子邮件字段连接到一个字符串变量。
4.  检查前一个 ID 是否等于当前 ID（来自您的输入缓冲区）。如果不同，则使用先前的 ID 和连接的字符串向输出缓冲区添加一行。将字符串重置为空。

[MSDN](http://msdn.microsoft.com/en-us/library/ms136133.aspx)

# php - 卡在循环、步骤和打开/关闭标签中

> ID：13996095
> 
> 赞同：0
> 
> 时间：2012-12-21T19:33:19.330
> 
> 标签：php, loops

```
$step=3;
for($i=0;$i<100;$i++){
    if($i/$step===(int)($i/$step)){
        echo 'START:';
    }
    echo $i,'-';
    if($i>0 and $i/$step===(int)($i/$step)){
        echo ':END<BR>';
    }
} 
```

我需要这样的结果

```
START:0-1-2-:END
START:3-4-5-:END
START:6-7-8-:END
.... 
```

等等，但无法弄清楚如何实现它。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T19:41:23.967

只是为了演示数组函数的强大功能：

```
$numbers = range(0, 100);
$chunks = array_chunk($numbers, 3);
foreach($chunks as $chunk) {
  echo 'START:', implode('-', $chunk), '-:END<BR>';
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T19:38:07.850

```
$step = 3;
for($i = 0 ; $i < 100; $i++){
    if($i % $step == 0){
        echo "START:";
    }
    echo $i."-";
    if(($i + 1) % $step == 0){
        echo ":END<br />";
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T19:37:01.887

您可以使用模运算符。它基本上会返回您该部门的剩余部分。例如，当 $i 变为 20 时，在这种情况下它的模数将为 2 (20/3=18)，而 2 是剩余部分。当 $i 变为 21 时，没有任何东西可以保留，因为它完全除以 3，因此 21%3 结果为 0。这样你可以每三次找到执行某些操作。

试试这个：

```
$step=3;

echo 'START:';

for($i=0;$i<100;$i++){

    if(!($i%$step) and $i>0){
         echo ':END<BR>START:';
    }
    echo $i,'-';
}

echo ':END<BR>'; 
```

# jquery - CSS3 和 jQuery 动画

> ID：13996101
> 
> 赞同：0
> 
> 时间：2012-12-21T19:33:52.167
> 
> 标签：jquery, html, css

我有一个使用 CSS3 动画的加载圈。到目前为止，我已经编写了一些 jQuery 代码，一旦加载圆圈动画完成，就会显示一个 div 容器。是否可以用完全 CSS 编写 jQuery？任何帮助深表感谢。

CSS：

```
/*Loading Circle*/

.x {
   height: 15px; 
   width: 15px; 
   background: #dedede; 
   border-radius: 50px; 
   display: inline-block;
}

.a {animation: fade 1s forwards;}
.b {animation: fade 2s forwards;}
.c {animation: fade 3s forwards;}

@keyframes fade {
0%   {opacity:0;}
50%  {opacity:1;}
100% {opacity:0;}}

/*Empty Container*/

.container {
   display:none; 
   background: #dedede;
   height: 100px;
   width: 100px;

} 
```

JS：

```
function setup() {
  var e = document.getElementById("lastDot");
    e.addEventListener("animationend", function(){$("#mydiv").show();}, false);
}

setup() 
```

HTML：

```
<div class="a x"></div>
<div class="b x"></div>
<div class="c x" id="lastDot"></div>

<div class="container" id="mydiv"></div>​ 
```

[​jsFiddle](http://www.jsfiddle.net/vJsTr/6/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:53:33.700

只要这是为了美观，这应该是您正在寻找的：

```
.container {
  animation: timer 3s forwards;
}

@keyframes timer {
  0% {  opacity: 0; }
  80% {  opacity: 0; }
  100% { opacity: 1;}
} 
```

请记住不要`display:none`与这些 CSS3 动画一起使用，否则它们根本不会显示。我所做的只是制作另一个最初隐藏元素的 CSS3 动画，并在 80% 时将不透明度设置为 0（再次），因此您可以开始从 80% 到 100% 的淡入淡出。

要记住的另一件事是您的浏览器与此兼容性。只需在每个动画和关键帧函数的开头添加（我以关键帧函数为例）：

```
@keyframes example { }
@-moz-keyframes example { } /* Firefox */
@-webkit-keyframes example { } /* Safari and Chrome */
@-o-keyframes example { } /* Opera */ 
```

# jquery - 启用按钮 使用 jquery.load 检查复选框

> ID：13996105
> 
> 赞同：2
> 
> 时间：2012-12-21T19:34:02.920
> 
> 标签：jquery

当复选框位于页面本身内时，下面的代码可以正常工作。从 jquery 加载相关内容时，`.load`它不会注册复选框。

下面的`html`代码显示在`<div id='output'></div>`. 当我将它移到该 div 之外时，它工作正常。

***JS***

```
$(document).ready(function() {
    $('#dropdown').change( function() {
        $('#output').load('/process.php',{dropdown: $(this).val()});
    });

    $(".checkbox").click(function(){
        $('#continue').prop('disabled',$('input.checkbox:checked').length == 0);
    });
}); 
```

***process.php 的 HTML***

```
<input type="checkbox" class="checkbox"> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T19:38:03.070

您必须使用 on() 方法来说明通过 AJAX 添加到 DOM 的元素。尝试改变这个 -

```
$(".checkbox").click(function(){
    $('#continue').prop('disabled',$('input.checkbox:checked').length == 0);
}); 
```

对此——

```
 $('body').on('click', '.checkbox', function(){
     $('#continue').prop('disabled',$('input.checkbox:checked').length == 0);
 }); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T19:36:52.850

尝试将您的`checkbox`处理程序更改为

```
$("body").on("click", ".checkbox", function(){
    $('#continue').prop('disabled',$('input.checkbox:checked').length == 0);
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T19:36:55.117

也许您应该通过实时绑定尝试一下

```
$(document).ready(function() {
    ...

    $(document).on( 'click', '.checkbox', function(){
        $('#continue').prop('disabled',$('input.checkbox:checked').length == 0);
    });
}); 
```

这种方式允许您侦听事件以及在事件绑定完成后声明的对象。

# google-cloud-platform - 谷歌云存储传播

> ID：13996116
> 
> 赞同：30
> 
> 时间：2012-12-21T19:34:37.693
> 
> 标签：google-cloud-platform, google-cloud-storage

对 Google Cloud Storage 中的文件所做的更改需要多长时间才能传播？

我遇到了这个非常令人沮丧的问题，我更改了文件的内容并通过 gsutil 重新上传它，但更改在几个小时内都没有出现。有没有办法强制更改的文件立即传播所有内容？

如果我在 Google Cloud Storage 控制台中查看该文件，它会看到新文件，但如果我点击公共 URL，它是旧版本，在某些情况下，是 2 个版本之前。

有没有我没有设置的标题？

编辑：

我试过`gsutil -h "Cache-Control: no-cache" cp -a public-read MyFile`了，它没有帮助，但也许旧文件需要在新的无缓存版本接管之前过期？

我在文件上做了一个 curl -I 并将其取回：

```
HTTP/1.1 200 OK
Server: HTTP Upload Server Built on Dec 12 2012 15:53:08 (1355356388)
Expires: Fri, 21 Dec 2012 19:58:39 GMT
Date: Fri, 21 Dec 2012 18:58:39 GMT
Last-Modified: Fri, 21 Dec 2012 18:53:41 GMT
ETag: "66d820174d6de17a278b327e4c3e9b4e"
x-goog-sequence-number: 3
x-goog-generation: 1356116021512000
x-goog-metageneration: 1
Content-Type: application/octet-stream
Content-Language: en
Accept-Ranges: bytes
Content-Length: 160
Cache-Control: public, max-age=3600, no-transform
Age: 3449 
```

尽管没有缓存，但这似乎表明它将在一个小时内到期。

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-12-21T20:06:26.733

谷歌云存储提供强大的数据一致性：一旦写入完成，从世界任何地方读取都将获得最新数据。

但是，如果您启用缓存（对于任何公共可读对象，默认情况下都是如此），读取该对象可以看到与对象上指定的 Cache-Control max-age 一样旧的对象版本。例如，如果您像这样上传文件：

```
gsutil cp -a public-read file gs://my_bucket/file 
```

您可以看到 max-age 为 1 小时（3600 秒）：

```
gsutil ls -L gs://my_bucket/file
gs://my_bucket/file:
    Creation time:  Fri, 21 Dec 2012 19:59:57 GMT
    Cache-Control:  public, max-age=3600, no-transform
    Content-Length: 1065
    Content-Type:   text/plain
    ETag:       eb3fb83beedf1efffe5b8e32e8d6a65a
    ... 
```

如果你想防止公开可读的对象被缓存，你可以这样做：

```
gsutil setmeta -h Cache-Control:no-cache gs://my_bucket/file 
```

或者，您可以在对象上设置更短的 max-age：

```
gsutil setmeta -h 'Cache-Control:public, max-age=600, no-transform' 
```

Mike Schwartz，谷歌云存储团队

# java-me - 如何使用 lwut 在 j2me 中将文本字段与表单绑定？

> ID：13996117
> 
> 赞同：2
> 
> 时间：2012-12-21T19:34:37.860
> 
> 标签：java-me, textfield, lwuit

我在下面的代码中有问题，这`frmChinese.append(txtField);`对我不起作用。

将此文本字段与我的表单绑定的正确方法是什么？我使用的头文件和库也被提及。

```
package com.lbs;

import com.lbs.MidletSplashScreen;
import com.sun.lwuit.*;
import com.sun.lwuit.Button;
import com.sun.lwuit.Command;
import com.sun.lwuit.Form;
import com.sun.lwuit.Image;

import com.sun.lwuit.events.ActionEvent;
import com.sun.lwuit.events.ActionListener;
import com.sun.lwuit.layouts.BoxLayout;
import com.sun.lwuit.plaf.Border;
import java.io.IOException;

import javax.microedition.midlet.*;
import javax.microedition.lcdui.*;
import javax.microedition.lcdui.TextField;

public class Chinese extends Form implements ActionListener {
    Form frmChinese = null;
    Command cmdExit = null;
    TextField txtField = null;

    Chinese() {
        frmChinese = this;
        frmChinese.setTitle("Chinese");
        frmChinese.setLayout(new BoxLayout(BoxLayout.Y_AXIS));
        this.getStyle().setBgColor(0xFF5240);
        ShowUi();
        cmdExit = new Command("Exit");
        Command cmdBack = new Command("Back"); // new command with name Back
        frmChinese.addCommand(cmdExit);// add command in Form

        frmChinese.addCommand(cmdBack);// add command in Form
        frmChinese.setBackCommand(cmdBack); // setting back command 
        frmChinese.addCommandListener(this);  // register action listener in form

    }

    private void ShowUi() {
        txtField = new TextField("","Search", 20, TextField.ANY);
        frmChinese.append(txtField); 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T16:00:11.850

您需要使用的是表单类中的 addComponent 方法。在 lwuit 中，基本的界面元素是组件。将此组件添加到表单的布局中，您可以构建一些很酷的设计。

看看这里：

[LWUIT 布局](http://lwuit.java.net/tutorial/layouts.html)

# c# - MongoDB c#驱动程序_id字段和SetIdMember()

> ID：13996118
> 
> 赞同：0
> 
> 时间：2012-12-21T19:34:46.113
> 
> 标签：c#, mongodb, mongodb-.net-driver, uniqueidentifier

我已将`SetIdMember()`类映射设置为指向对象内的元素：

```
BsonClassMap.RegisterClassMap<Person>(x =>
    {
        x.AutoMap();
        x.SetIdMember(x.GetMemberMap(p => p.PersistedId));
    }); 
```

效果很好，但是我正在查看 mongo 数据（通过 MongoVUE）并注意到 PersistedId 字段未存储在数据库中的任何位置，我认为这是因为它将它映射到 _id 字段。

现在对于 99% 的场景，我确信这很好，但是在这种情况下，我使用的是非强类型模型，并拉回原始 BsonDocument，然后将其转换为 JSON 以交给客户端脚本，然后进一步使用。然而，它期望在 JSON 中获得一个 PersistedId 字段，但它不存在，它只是 _id。

那么有没有办法让我让它完成整个独特的 _id 字段的事情，但也让它把 PersistedId 字段也写到数据库中？（我知道它会是重复的数据，但它不是一个大问题）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T22:47:29.120

您可以添加一个只读属性并让驱动程序知道将其作为 PersistedId 存储在数据库中。

```
public class Entity
{
    public ObjectId Id { get; set; }

    public ObjectId PersistedId 
    {
        get { return Id; }
    }
}

BsonClassMap.RegisterClassMap<Person>(x =>
{
    x.AutoMap();
    x.MapMember(x => x.PersistedId);
}); 
```

但是，我不确定这是不是最好的主意。您可能不应该在这样的服务器环境中与您的 UI 共享您的数据库模型。相反，您应该从数据库模型映射到 UI 模型。这提供了很多好处，例如聚合模型、转换模型等......因此您的 UI 与您的 UI 如此耦合。但是，最终，这是你的决定。

# python - Python 多处理 pool.map 引发 IndexError

> ID：13996121
> 
> 赞同：7
> 
> 时间：2012-12-21T19:35:00.577
> 
> 标签：python, multiprocessing, cython

我已经开发了一个使用 python/cython 对 CSV 文件进行排序并为客户端生成统计信息的实用程序，但是在我的映射函数有机会执行之前调用 pool.map 似乎会引发异常。对少量文件进行排序似乎可以按预期运行，但是随着文件数量增长到 10 个，我在调用 pool.map 后得到以下 IndexError。有没有人碰巧认识到以下错误？任何帮助是极大的赞赏。

虽然代码在 NDA 下，但用例相当简单：

**代码示例：**

```
def sort_files(csv_files):
    pool_size = multiprocessing.cpu_count()
    pool = multiprocessing.Pool(processes=pool_size)
    sorted_dicts = pool.map(sort_file, csv_files, 1)
    return sorted_dicts

def sort_file(csv_file):
    print 'sorting %s...' % csv_file
    # sort code 
```

**输出：**

```
File "generic.pyx", line 17, in generic.sort_files (/users/cyounker/.pyxbld/temp.linux-x86_64-2.7/pyrex/generic.c:1723)
    sorted_dicts = pool.map(sort_file, csv_files, 1)
  File "/usr/lib64/python2.7/multiprocessing/pool.py", line 227, in map
    return self.map_async(func, iterable, chunksize).get()
  File "/usr/lib64/python2.7/multiprocessing/pool.py", line 528, in get
    raise self._value
IndexError: list index out of range 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-21T22:33:47.800

IndexError 是您在sort_file() 中的某个地方（即在子进程中）出现的错误。它由父进程重新引发。显然`multiprocessing`没有试图告诉我们错误真正来自哪里（例如它发生在哪一行），甚至没有告诉我们 sort_file() 的哪个参数导致它。我`multiprocessing`更讨厌:-(

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-08-09T17:17:09.923

在命令输出中进一步检查。至少在 Python 3.4 中，`multiprocessing.pool`将有助于`RemoteTraceback`在父进程回溯上方打印一个。你会看到类似的东西：

```
multiprocessing.pool.RemoteTraceback: 
"""
Traceback (most recent call last):
  File "/usr/lib/python3.4/multiprocessing/pool.py", line 119, in worker
    result = (True, func(*args, **kwds))
  File "/usr/lib/python3.4/multiprocessing/pool.py", line 44, in mapstar
    return list(map(*args))
  File "/path/to/your/code/here.py", line 80, in sort_file
    something = row[index]
IndexError: list index out of range
"""

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "generic.pyx", line 17, in generic.sort_files (/users/cyounker/.pyxbld/temp.linux-x86_64-2.7/pyrex/generic.c:1723)
    sorted_dicts = pool.map(sort_file, csv_files, 1)
  File "/usr/lib64/python2.7/multiprocessing/pool.py", line 227, in map
    return self.map_async(func, iterable, chunksize).get()
  File "/usr/lib64/python2.7/multiprocessing/pool.py", line 528, in get
    raise self._value
IndexError: list index out of range 
```

在上述情况下，引发错误的代码位于`/path/to/your/code/here.py", line 80`

另请参阅[调试 python 多处理中的错误](https://stackoverflow.com/questions/29080650/debugging-errors-in-python-multiprocessing)

# html - 在下拉/可折叠菜单中相对定位菜单项？

> ID：13996124
> 
> 赞同：1
> 
> 时间：2012-12-21T19:35:26.210
> 
> 标签：html, css

首先，这是我构建[的下拉/可折叠菜单。](http://jsfiddle.net/its_me/fxSYT/)

至于小提琴中显示[的预览中的“菜单”和“菜单项”是什么 -](http://jsfiddle.net/its_me/fxSYT/embedded/result/) *Channels*，*Search*和*About Us*是菜单，而单击菜单时下拉/滑出的菜单是菜单项。

**截屏：**

![截屏](../Images/cf962c46caaacaf2e126cd54a70414a2.png)

我`position: absolute;`在菜单项 ( `.collapse`) 和`position: relative;`菜单上使用。

**相关代码**（[更多在小提琴中](http://jsfiddle.net/its_me/fxSYT/)）：

```
/* Menu: <li class="float-left top-menu">... */
.top-menu {
    position: relative;
}

/* Menu-Item: <div id="channels-menu-item-container" class="collapse">... */
.collapse {
    position: absolute;
    width: 570px;
    z-index: 1000;
    padding: 0;
    margin: 0;
    color: #222;
    background-color: #fff;
    -webkit-box-shadow: 0 5px 5px rgba(0, 0, 0, 0.2), 0 10px 20px rgba(0, 0, 0, 0.12);
    -moz-box-shadow: 0 5px 5px rgba(0, 0, 0, 0.2), 0 10px 20px rgba(0, 0, 0, 0.12);
    box-shadow: 0 5px 5px rgba(0, 0, 0, 0.2), 0 10px 20px rgba(0, 0, 0, 0.12);
    overflow: hidden;
} 
```

`position: relative;`是否也可以在“菜单项”（ ）上实现相同的功能`.collapse`？

* * *

**注意：**在您使用小提琴提交答案之前，请确保*通过单击每个菜单并比较*两个小提琴（您的和我的）中的菜单功能相同（以确认没有菜单项因改变定位）。

当然，您可以添加额外的 HTML 和 CSS。

* * *

是的，我徒劳地尝试了几个小时，并想看看这是否可能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:25:53.380

像这样的东西怎么样：

*   从 中删除宽度`.collapse`。
*   从列中删除浮动，更改为`inline-block`.
*   更改`white-space`为`nowrap`。

html:

```
<div class="in collapse" id="channels-menu-item-container" style="height: auto;">
    <div id="channels-menu-item-wrapper">
        <ul class="channel-column" id="nav-channels">
           <!-- ... -->
        </ul>
        <ul class="channel-column" id="nav-topics">
           <!-- ... -->
        </ul>
        <ul class="channel-column" id="nav-editions">
           <!-- ... -->
        </ul>
        <div class="aahans"></div>
        <div class="clearfix"></div>
    </div>
</div> 
```

CSS：

```
.collapse {
    position: absolute;
    min-width:200px; /*for the seach box*/
    /* ... */
}

#channels-menu-item-wrapper {
    border-bottom: 4px solid #259;
    white-space:nowrap;
}

.channel-column {display:inline-block; vertical-align:top;} 
```

您可能还想重置`white-space`每个`.channel-column`.

结果：http: [//jsfiddle.net/kobi/fxSYT/1/embedded/result/](http://jsfiddle.net/kobi/fxSYT/1/embedded/result/)

# validation - 将对象从一个 jsp 发送到另一个 jsp

> ID：13996127
> 
> 赞同：0
> 
> 时间：2012-12-21T19:35:40.207
> 
> 标签：validation, jsp, jstl

好吧，距离我上一次编程已经过去 10 年了。我正在尝试验证 JSP 表单上的文本框和日期。我已经设置了一个消息对象，并且可以在验证输入数据后很好地读取它。

基本上，user.jsp 有一个从会话对象中读取的用户对象。这是在 servlet UserController.java 中设置的

表单动作设置如下：

```
<form method="POST" action='user.jsp' name="/MyApp/user.jsp"> 
```

如果 user.jsp 上存在数据输入错误，则 POST 操作会将用户带回同一页面并显示错误。

EL 中有没有办法基本上执行以下操作：

```
<%
request.setAttribute("user",user);
RequestDispatcher disp= getServletContext().getRequestDispatcher("/user.jsp");
disp.forward(request, response);
%> 
```

# python - Qt QGraphicsDropShadowEffect 未显示

> ID：13996130
> 
> 赞同：2
> 
> 时间：2012-12-21T19:35:45.837
> 
> 标签：python, qt, qt4, pyqt, pyside

我正在创建一个`my_widget`继承自`QWidget`.

在这里，我有一个我想应用的标签，`QGraphicsDropShadowEffect`但是它似乎不起作用，因为我没有看到任何阴影。

我的代码在 Python 中，它是：

```
eff = QGraphicsDropShadowEffect()
self.my_widget_label.setGraphicsEffect(eff) 
```

我尝试了对该代码的各种更改，但均无济于事。

在谷歌上搜索后，我遇到了许多没有答案的类似问题。

可能是什么原因？我怎样才能得到影子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T21:29:25.937

在 C++ 中为我工作。我在一个`QDialog`包含`QLabel`名为`titleLabel`. 我在 Windows XP 计算机上使用 Qt 4.8.4。

```
QGraphicsDropShadowEffect* eff = new QGraphicsDropShadowEffect(this);
eff->setBlurRadius(5);
titleLabel->setGraphicsEffect(eff); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-24T03:24:15.923

看看这是否适合你：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

import sip
sip.setapi('QString', 2)
sip.setapi('QVariant', 2)

from PyQt4.QtCore import *
from PyQt4.QtGui import *

class testShadow(QWidget):
    def __init__(self, parent=None):
        super(testShadow, self).__init__(parent)

        self.resize(94, 35)
        self.verticalLayout = QVBoxLayout(self)
        self.verticalLayout.setObjectName("verticalLayout")
        self.label = QLabel(self)
        self.label.setText("Text Label")

        self.shadow = QGraphicsDropShadowEffect(self)
        self.shadow.setBlurRadius(5)
        self.label.setGraphicsEffect(self.shadow)

        self.verticalLayout.addWidget(self.label)

if __name__ == "__main__":
    import  sys

    app = QApplication(sys.argv)
    main = testShadow()
    main.show()
    sys.exit(app.exec_()) 
```

![图片](../Images/8dcccc772a1cf6bbee1546cc7a930ab7.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-24T03:35:49.957

我只在某些`QGraphicsScene`情况下尝试过使用它（并成功使用它）。这对我有用，而尝试将其设置为正常`QWidget`实际上会使整个应用程序崩溃：

```
from PyQt4 import QtGui

class Graphics(QtGui.QWidget):
    def __init__(self):
        super(Graphics, self).__init__()

        layout = QtGui.QVBoxLayout(self)
        layout.setMargin(0)

        shad = QtGui.QGraphicsDropShadowEffect(self)
        shad.setBlurRadius(5)

        self.scene = QtGui.QGraphicsScene(self)
        self.view = QtGui.QGraphicsView(self)
        self.view.setScene(self.scene)
        text = self.scene.addText("Drop Shadow!")
        text.setGraphicsEffect(shad)

        layout.addWidget(self.view)

if __name__ == "__main__":
    app = QtGui.QApplication([])
    main = Graphics()
    main.show()
    main.raise_()
    app.exec_() 
```

# r - 计算从纬度/经度向量行进的总里程

> ID：13996141
> 
> 赞同：5
> 
> 时间：2012-12-21T19:36:27.060
> 
> 标签：r, geolocation

我有一个数据框，其中包含有关驾驶员及其遵循的路线的数据。我想弄清楚总行驶里程。我正在使用该`geosphere`软件包，但无法找出正确的应用方法并以英里为单位获得答案。

```
> head(df1)
  id       routeDateTime driverId      lat       lon
1  1 2012-11-12 02:08:41      123 76.57169 -110.8070
2  2 2012-11-12 02:09:41      123 76.44325 -110.7525
3  3 2012-11-12 02:10:41      123 76.90897 -110.8613
4  4 2012-11-12 03:18:41      123 76.11152 -110.2037
5  5 2012-11-12 03:19:41      123 76.29013 -110.3838
6  6 2012-11-12 03:20:41      123 76.15544 -110.4506 
```

到目前为止我已经尝试过

```
spDists(cbind(df1$lon,df1$lat)) 
```

和其他几个功能，但似乎无法得到合理的答案。

有什么建议么？

```
> dput(df1)
structure(list(id = c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 
13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 
29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40), routeDateTime = c("2012-11-12 02:08:41", 
"2012-11-12 02:09:41", "2012-11-12 02:10:41", "2012-11-12 03:18:41", 
"2012-11-12 03:19:41", "2012-11-12 03:20:41", "2012-11-12 03:21:41", 
"2012-11-12 12:08:41", "2012-11-12 12:09:41", "2012-11-12 12:10:41", 
"2012-11-12 02:08:41", "2012-11-12 02:09:41", "2012-11-12 02:10:41", 
"2012-11-12 03:18:41", "2012-11-12 03:19:41", "2012-11-12 03:20:41", 
"2012-11-12 03:21:41", "2012-11-12 12:08:41", "2012-11-12 12:09:41", 
"2012-11-12 12:10:41", "2012-11-12 02:08:41", "2012-11-12 02:09:41", 
"2012-11-12 02:10:41", "2012-11-12 03:18:41", "2012-11-12 03:19:41", 
"2012-11-12 03:20:41", "2012-11-12 03:21:41", "2012-11-12 12:08:41", 
"2012-11-12 12:09:41", "2012-11-12 12:10:41", "2012-11-12 02:08:41", 
"2012-11-12 02:09:41", "2012-11-12 02:10:41", "2012-11-12 03:18:41", 
"2012-11-12 03:19:41", "2012-11-12 03:20:41", "2012-11-12 03:21:41", 
"2012-11-12 12:08:41", "2012-11-12 12:09:41", "2012-11-12 12:10:41"
), driverId = c(123, 123, 123, 123, 123, 123, 123, 123, 123, 
123, 456, 456, 456, 456, 456, 456, 456, 456, 456, 456, 789, 789, 
789, 789, 789, 789, 789, 789, 789, 789, 246, 246, 246, 246, 246, 
246, 246, 246, 246, 246), lat = c(76.5716897079255, 76.4432530414779, 
76.9089707506355, 76.1115217276383, 76.2901271982118, 76.155437662499, 
76.4115052509587, 76.8397977722343, 76.3357809444424, 76.032417796785, 
76.5716897079255, 76.4432530414779, 76.9089707506355, 76.1115217276383, 
76.2901271982118, 76.155437662499, 76.4115052509587, 76.8397977722343, 
76.3357809444424, 76.032417796785, 76.5716897079255, 76.4432530414779, 
76.9089707506355, 76.1115217276383, 76.2901271982118, 76.155437662499, 
76.4115052509587, 76.8397977722343, 76.3357809444424, 76.032417796785, 
76.5716897079255, 76.4432530414779, 76.9089707506355, 76.1115217276383, 
76.2901271982118, 76.155437662499, 76.4115052509587, 76.8397977722343, 
76.3357809444424, 76.032417796785), lon = c(-110.80701574916, 
-110.75247172825, -110.861284852726, -110.203674311982, -110.383751512505, 
-110.450569844106, -110.22185564111, -110.556956546381, -110.24483308522, 
-110.217355202651, -110.80701574916, -110.75247172825, -110.861284852726, 
-110.203674311982, -110.383751512505, -110.450569844106, -110.22185564111, 
-110.556956546381, -110.24483308522, -110.217355202651, -110.80701574916, 
-110.75247172825, -110.861284852726, -110.203674311982, -110.383751512505, 
-110.450569844106, -110.22185564111, -110.556956546381, -110.24483308522, 
-110.217355202651, -110.80701574916, -110.75247172825, -110.861284852726, 
-110.203674311982, -110.383751512505, -110.450569844106, -110.22185564111, 
-110.556956546381, -110.24483308522, -110.217355202651)), .Names = c("id", 
"routeDateTime", "driverId", "lat", "lon"), row.names = c(NA, 
-40L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T19:46:47.200

这个怎么样？

```
## Setup
library(geosphere)
metersPerMile <- 1609.34
pts <- df1[c("lon", "lat")]

## Pass in two derived data.frames that are lagged by one point
segDists <- distVincentyEllipsoid(p1 = pts[-nrow(df),], 
                                  p2 = pts[-1,])
sum(segDists)/metersPerMile
# [1] 1013.919 
```

（要使用更快的距离计算算法之一，只需在上面的调用中替换`distCosine`、`distVincentySphere`或`distHaversine`for `distVincentyEllipsoid`。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T03:40:09.180

对丢失的数据要非常小心，因为 distVincentyEllipsoid() 对于缺少坐标 c(NA, NA)、c(NA, NA) 的任意两点之间的距离返回 0。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-14T09:52:05.873

```
library(geodist)
geodist(df, sequential = TRUE, measure = "geodesic") # sequence of distance increments
sum(geodist(df, sequential = TRUE, measure = "geodesic")) # total distance in metres
sum(geodist(df, sequential = TRUE, measure = "geodesic")) * 0.00062137 # total distance in miles 
```

由于涉及长距离，此处需要测地线距离。结果是 1013.915，与不太准确的文森特距离略有不同`geosphere`。街道网络距离也可以用

```
library(dodgr)
dodgr_dists(from = df) 
```

...但必须有一个街道网络，但 (lat = 76, lon = -110) 并非如此。如果有街道网络，默认情况下会为您提供通过街道网络路由的所有成对距离，其中顺序增量是非对角线。

# objective-c - 无法弄清楚如何使用 NSTimer 更改视图

> ID：13996143
> 
> 赞同：1
> 
> 时间：2012-12-21T19:36:37.170
> 
> 标签：objective-c, cocoa, views, switch-statement, nstimer

我创建了一个名为 view2 的类，它是 UIView 控制器的子类，当我运行程序时，计时器工作正常，但是当它改变屏幕时，它只是变黑，而不是我在 view2 上的图片。这是我在打开视图的 .m 上的代码，任何人都可以看到哪里出错了吗？

```
- (void)viewDidLoad
{
    randomMain = [NSTimer scheduledTimerWithTimeInterval:(2) target:self selector:@selector(onTimer) userInfo:nil repeats:NO];

    [super viewDidLoad];
}

-(void)onTimer{

    view2 *second= [[view2 alloc] initWithNibName:nil bundle:nil];
    [self presentViewController:second animated:YES completion:nil];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:44:11.777

您必须指定要加载的 xib 文件的名称（不带扩展名）：

```
view2 *second = [[view2 alloc] initWithNibName:@"MyView2Xib" bundle:nil]; 
```

或者，如果您以编程方式创建 GUI，只需使用简单的`init`：

```
view2 *second = [[view2 alloc] init]; 
```

一些补充说明：

*   类名应始终以大写字母开头，以将它们与变量区分开来。
*   在您的子类名称中包含部分超类名称是一个好主意。如果我看到一个名为 的类`View2`，我会认为它是一个`UIView`子类。我宁愿叫它`ViewController2`。
*   不需要将区间放在括号中。
*   an 的动作`NSTimer`应该有一个参数（本身）。

**编辑：**

使用情节提要，您必须手动执行在 2 个视图之间设置的序列：

```
- (void)onTimer {
    [self performSegueWithIdentifier:@"YourSegueIdentifier" sender:self];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:51:51.887

我认为 viewDidLoad 不适合您的目的。您应该改用 viewDidAppear。

DrummerB 的所有评论都非常有效且非常重要。

# view - 节省空间的视图

> ID：13996146
> 
> 赞同：0
> 
> 时间：2012-12-21T19:36:45.893
> 
> 标签：view, couchdb

对于所有具有特定内容的文档，`type`我的应用程序中有一个查询，它只选择最后一个文档的一个字段。我按日期映射这些文档，因此将降序查询限制为 1 肯定可以解决问题。我困扰的问题是这个视图会缓存所有这种类型的文档，占用明显的冗余空间。

所以我的问题是：

1.  向该视图添加一个减少到最后一个文档的reduce函数是否会为我节省任何空间，或者视图仍然必须存储所有涉及的文档？
2.  如果没有，还有其他节省空间的策略吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T21:57:32.803

1.  不会。map 函数的结果仍然会浪费空间。
2.  此刻我的一些想法：
    *   改变数据库的设计。如果文档的 id 将包括类型和日期，您可以在没有 map/reduce 的情况下进行一些搜索，如下所示`http://127.0.0.1:5984/YOURDB/_all_docs?start_key="<TYPE>_<CURRENT_TIME>"&descending=true&limit=1`：
    *   尽`map`你所能。不发出任何值，map 将存储文档的密钥和 id/ver。用于`include_doc`在查询时检索文档。
    *   添加附加字段，说明该文档是最后一个的候选者。仅映射那些确实拥有该领域的候选人。定期运行清理，从除最新文档之外的所有文档中删除该字段。注意：当支持删除最后添加的文档时，这可能会很困难。

对我来说，这似乎是 CouchDB 的想法：通过缓存查询来“浪费”空间，因此如果数据不经常更改，它们可以快速回答。也许如果您非常关心浪费空间，那么您的答案不是 CouchDB？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-28T18:20:03.060

我的 couchdb 设置具有独立 RAID 驱动器上的数据和索引。地图是用 erlang 编写的，我发现它比 javascript 快 8 倍，而且地图当然返回 null。我将密钥保持在较小的范围内，并且在许多设计文档中拆分了我的视图，并且我使我的数据保持非常平坦，从而提高了序列化性能。

# jquery - jquery下拉菜单定位

> ID：13996153
> 
> 赞同：0
> 
> 时间：2012-12-21T19:36:56.583
> 
> 标签：jquery, css, jquery-ui

我需要创建一个打开而不是向下打开的下拉菜单。通过[这个](http://www.instantshift.com/2010/07/16/create-simple-dropdown-menu-using-jquery/)，我想出了如何创建一个下拉菜单，然后根据我的要求对其进行修改，最终得到[这个（小提琴）](http://jsfiddle.net/QqEKw/3/)。

我现在想让这个下拉菜单粘在页面底部，所以我将容器的 css 更改为`position:absolute;bottom:0;`. 但是，我的下拉菜单不再正确显示，如此[处所示](http://jsfiddle.net/QqEKw/4/)。

谁能解释一下为什么会发生这种情况以及如何正确地去做？

提前致谢。:)

编辑：

感谢 kei 和 bukfixart，我现在交替使用下面给出的两种代码，结果相同：它们在 IE9 中工作，但在 Chrome 或 Firefox 中不起作用（阅读：行为奇怪）。[你可以在这里](http://jsfiddle.net/ZC4sz/2/)看到奇怪的行为。请注意，仅当所有 4 个选项卡都在同一行时才会发生这种情况。

谁能解释一下为什么会这样？？

提前致谢。:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:47:15.907

[***演示***](http://jsfiddle.net/ZC4sz/)

在您的 jQuery 中，将其从

```
 submenu.css({
        position: 'absolute',
        top: $(this).offset().top - submenu.height() + 'px',
        left: $(this).offset().left + 'px',
        zIndex: 1000
    }); 
```

到

```
 submenu.css({
        position: 'absolute',
        bottom: $("#container").height() + 'px',
        left: $(this).offset().left + 'px',
        zIndex: 1000
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T19:48:56.630

这有一个简单的原因。

你应该用这个替换你的代码

```
 submenu.css({
        position: 'absolute',
        top:  - submenu.height() + 'px',
        left: $(this).offset().left + 'px',
        zIndex: 1000
    }); 
```

（删除了父级的高度）。你给了父母一个绝对的定位。因此，孩子们以父母的立场为导向。在这种情况下，计算中不需要高度

只要给`#container`元素一个`relative`或`absolute`位置，你可以在所有情况下使用固定脚本

# ms-access - String = 字符串比较风格（理论？）

> ID：13996156
> 
> 赞同：2
> 
> 时间：2012-12-21T19:37:04.853
> 
> 标签：ms-access, if-statement, vba

我目前无法测试代码（没有笔记本电脑），但在`If`如下声明中：

```
Dim StrA As String, StrB As String

IF StrA = StrB Then
   'code for true result
Else
   'code for false result
End If 
```

该`If`语句是否以二进制或文本方式检查字符串？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T19:40:22.593

比较通常是文本的，stra=STRA，但您可以使用 StrComp：

```
 StrComp("stra","STRA",vbbinarycompare) 
```

[http://office.microsoft.com/en-ie/access-help/strcomp-function-HA001228914.aspx](http://office.microsoft.com/en-ie/access-help/strcomp-function-HA001228914.aspx)

```
Sub IsIt()
'Option Compare Database (default): True
'Option Compare Text : True
'Option Compare Binary : False
If "stra" = "STRA" Then
    Debug.Print True
Else
    Debug.Print False
End If
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T19:40:12.167

取决于[设置](http://msdn.microsoft.com/en-us/library/8t3khw5f%28v=vs.80%29.aspx) `option compare text`是最常见的，我认为

# css - 仅在 CSS 中更改悬停按钮类

> ID：13996158
> 
> 赞同：1
> 
> 时间：2012-12-21T19:37:16.370
> 
> 标签：css, twitter-bootstrap

我正在使用引导程序进行简单的测试 web 应用程序。我想要一个按钮以标准样式 ( ) 开始，并仅在悬停`btn`时切换到样式。`btn-danger`我知道这可以用 jquery 或直接 javascript 来完成，但我真的对这种方法不感兴趣。

我可以在直接 CSS 中执行此操作*而不*将任何引导样式代码复制到我自己的 CSS 中吗？理想情况下，我希望能够做这样的事情：

```
.mybutton {

}

.mybutton:hover {
  style: btn-danger;
} 
```

[http://jsfiddle.net/wPDCm/5/](http://jsfiddle.net/wPDCm/5/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:46:05.830

使用 LESS（Twitter Bootstrap 使用的 CSS 预处理器）的语法应该是这样的：

```
.mybutton:hover {
    @include .btn-danger;
} 
```

仅使用 CSS 是无法做到这一点的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:43:05.373

没有 CSS 预处理器就无法做到这一点。

使用[SASS](http://sass-lang.com/)，您可以执行以下操作：

```
@mixin danger-will-robinson {
  background-color: red;
}

.btn-danger {
  @include danger-will-robinson;
}

.mybutton:hover {
  @include danger-will-robinson;
} 
```

其他 CSS 预处理器也有类似的功能。

# ios - iOS NSUserDefaults 加载缓慢

> ID：13996159
> 
> 赞同：2
> 
> 时间：2012-12-21T19:37:21.593
> 
> 标签：ios, nsuserdefaults, uisegmentedcontrol, viewdidappear

我正在使用 NSUSerDefaults 为我的应用程序存储几个字符串和整数。每当打开视图时，字符串的加载速度都会比视图慢，因此您会看到故障。例如，我保存 selectedSegmentIndex，然后在 viewDidAppear 中读取它，当视图被调用时，没有选择任何段，然后选择正确的段。您如何做到这一点，以便在打开视图和读取设置之间没有时间间隔？

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    int segmentIndex = [[NSUserDefaults standardUserDefaults] integerForKey:@"selectedIndex"];
    unitSegmentControl.selectedSegmentIndex = segmentIndex;

    BOOL location = [[NSUserDefaults standardUserDefaults] boolForKey:@"locationManager"];
    [gpsSwitch setOn:location animated:NO];

    deviceID.text =  [[NSUserDefaults standardUserDefaults] stringForKey:@"DeviceID"];

}

- (IBAction)changeSeg:(id)sender {

    if (unitSegmentControl.selectedSegmentIndex == 0) {
        [[NSUserDefaults standardUserDefaults] setObject:@"http://98.246.50.81/firecom/xml/units/E01.xml" forKey:@"parserURL"];
        [[NSUserDefaults standardUserDefaults] setObject:@"Hillsboro Main" forKey:@"selectedStation"];
        [[NSUserDefaults standardUserDefaults] setObject:@"Hillsboro Fire & Rescue" forKey:@"selectedDepartment"];
    }
    if (unitSegmentControl.selectedSegmentIndex == 1) {
        [[NSUserDefaults standardUserDefaults] setObject:@"http://98.246.50.81/firecom/xml/units/E02.xml" forKey:@"parserURL"];
        [[NSUserDefaults standardUserDefaults] setObject:@"Hillsboro Witch Hazel" forKey:@"selectedStation"];
        [[NSUserDefaults standardUserDefaults] setObject:@"Hillsboro Fire & Rescue" forKey:@"selectedDepartment"];
    }
    [[NSUserDefaults standardUserDefaults] setInteger:unitSegmentControl.selectedSegmentIndex forKey:@"selectedIndex"];
    [[NSUserDefaults standardUserDefaults] synchronize];
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:40:15.623

默认值并不慢，只是加载数据太晚了。填充视图的标准位置是在视图`-viewDidLoad`的`-viewWillAppear`控制器中。两者都将尽快更新视图以避免视觉故障。如果这两种方法中的任何一种都不适合您，这里有一些提示可以找出原因：

*   尝试将选定的索引设置为硬连线数字。这将告诉您问题是在默认情况下还是（更有可能）在`-setSelectedSegmentIndex`通话中。
*   将 UI 填充代码移至`-viewWillAppear`. 这是在 UI 显示之前更新 UI 的最新时刻。
*   使用`NSParameterAssert`以确保`unitSegmentControl`不是`nil`。
*   确保从默认值读回的索引是预期的数字。通常，最好将默认键拉入常量。这样你就不会碰到简单的错字错误：

    ```
    static NSString *const SelectedSegmentKey = @"selectedSegment"; 
    ```

*   如果其他一切都失败了，`UISegmentControl`请为您使用自定义子类`unitSegmentControl`并放置一个断点`-setSelectedSegmentIndex`以查看还有谁可能在调用它。

# c++ - 在新线程中调用代码

> ID：13996163
> 
> 赞同：1
> 
> 时间：2012-12-21T19:37:34.700
> 
> 标签：c++

使用 Visual C++ 32 位，我有一个如下所示的函数：

```
void CastTestSpell(byte *packet, int length)
{
    ServerSend(packet, length);
} 
```

我想`ServerSend(packet, length);`在一个新线程中发送函数调用以脱离它所在的当前线程，这样它就不会阻塞它。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:42:26.443

假设您以某种方式管理缓冲区对象，您可以这样做

```
std::thread(&CastTestSpell, packet, length).detach(); 
```

（尽管我通常建议不要使用: 您可能希望在战略点`detach()`上获取`std::thread`对象和它）。`join()`

上面的代码使用当前的标准 C++ (C++ 2011)。如果它不能编译你的 C++ 系统是基于一个过时的标准：多线程支持，包括`std::thread`从以前的标准开始添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T23:15:52.780

如果您想以原生 Windows 方式执行此操作，请查看 Windows API CreateThread()。

但是，如果您经常调用 CastTestSpell()，则每次都启动一个新线程并不是一个好主意，因为线程设置的性能很低。在这种情况下，您需要使用线程池（请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/ms686760%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686760%28v=vs.85%29.aspx)）

# c - 在C中评估后递增变量

> ID：13996170
> 
> 赞同：-3
> 
> 时间：2012-12-21T19:38:11.173
> 
> 标签：c

代码1：

```
i = 0;
while ( arr[i++] != EOF )
     printf("%d", i); 
```

输出：1 2 3 4

代码2：

```
i = 0;
while ( arr[i] != EOF )
{
      printf("%d", i);
      i++;
} 
```

输出：0 1 2 3

在上面的代码中，`arr[] = "//\n\0"`

但是，我认为 i++ 应该首先分配 i 并递增，对吗？

IE，

```
if i = 1
j = i++
j = 1 (Not 2) 
```

那么，代码 1 中究竟发生了什么，为什么它的行为不像代码 2？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:42:30.837

`i`当你这样做时你会增加`arr[i++]`，所以当你去打印它时，它当然已经增加了。

而是打印出数组元素，这样你就知道你得到了正确的元素：

```
i = 0;
char c;
while ( (c = arr[i++]) != EOF )
     printf("%c", c); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:43:04.700

...也许我错过了您的问题的重点，但是：

`So, what exactly is happening in code 1 and why it isn't behaving like code 2?`

一旦你点击`i++`它，它将增加并将新值保存到`i`. 所以：

```
i = 0;                     // i = 0
while ( arr[i++] != EOF )  // i = 1, 2, etc now before the print
     printf("%d", i);      // the incremented i is printed

i = 0;                     // i = 0
while ( arr[i] != EOF )  
{
      printf("%d", i);     // i still = 0 and that's printed
      i++;                 // now i = 1, 2, etc
} 
```

如果您询问`i++`vs`++i`一旦执行了增量（前或后）的行，则存储新值。所以在你的第一种情况下，增量是在 while 检查期间完成的，所以它在那个时候被保存了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T19:42:29.793

好吧，在代码中你`i`在递增它之后打印。

在循环条件之后，立即`i`递增并变为 1。当您打印时，`i`已经递增。这就是为什么它与代码 2 相比打印不同的原因。

# sql - 从第 2 左连接突然出现“无效使用 Null”

> ID：13996171
> 
> 赞同：0
> 
> 时间：2012-12-21T19:38:11.547
> 
> 标签：sql, ms-access-2007

我在 Access 中有这个 SQL 查询，它工作正常：

```
SELECT TableA.FieldA As [Code],
   Count(TableA.FieldC) AS [Count]
FROM ((MainTable)
   LEFT JOIN TableA ON MainTable.FieldB = TableA.FieldB)
WHERE (((MainTable.DateOf)>=#1/1/2012#))
   AND Clng(TableA.FieldA) >= 119593451
   AND Clng(TableA.FieldA) <= 119593461
GROUP BY TableA.FieldA; 
```

但是当我尝试另一个左连接时，就像这样：

```
SELECT TableA.FieldA As [Code],
   Count(TableA.FieldC) AS [Count]
FROM ((MainTable)
   LEFT JOIN TableA ON MainTable.FieldB = TableA.FieldB)
   LEFT JOIN TableB ON TableA.FieldD = TableB.FieldD
WHERE (((MainTable.DateOf)>=#1/1/2012#))
   AND Clng(TableA.FieldA) >= 119593451
   AND Clng(TableA.FieldA) <= 119593461
GROUP BY TableA.FieldA; 
```

我在基于此的 FROM 子句中使用括号：http: [//nm1m.blogspot.com/2007/10/multiple-left-joins-in-ms-access.html](http://nm1m.blogspot.com/2007/10/multiple-left-joins-in-ms-access.html)

它给出了错误`Invalid use of Null`，这对我来说没有意义，因为我没有执行空检查等。这里有什么问题？我试图在 TableB 中拉出一个字段来显示（但还没有把它放在选择部分）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T19:43:08.217

Access 喜欢它的括号。在连接周围添加更多括号。

该`CLng`函数需要一个非空值。您可以使用`CLng(Nz(TableA.FieldA, "0")) >= 119593451`. 但是，如果该字段是数字的，那么您到底为什么要以文本开头呢？这是一个严重的问题，我强烈建议通过将数据类型更改为数字类型来立即修复（如果可能的话）。

但是你还有另一个问题。`LEFT JOIN`如果您在`WHERE`子句中放置一个条件，就像您在查询中所做的那样，那么对表来说毫无意义！要么更改为 a ，`INNER JOIN`要么将您的条件放在.`TableA`的`ON`子句中`LEFT JOIN`。如果 Access 不允许此语法，则更改为派生表：

```
SELECT
   TableA.FieldA As [Code],
   Count(TableA.FieldC) AS [Count]
FROM
   (
      (
         (MainTable)
         LEFT JOIN (
            SELECT * FROM TableA
            WHERE
               Clng(Nz(TableA.FieldA, "0")) >= 119593451
               AND Clng(Nz(TableA.FieldA, "0")) <= 119593461
         ) TableA ON MainTable.FieldB = TableA.FieldB
      )
      LEFT JOIN TableB ON TableA.FieldD = TableB.FieldD
   )
WHERE (((MainTable.DateOf)>=#1/1/2012#))
GROUP BY TableA.FieldA; 
```

注意：添加`WHERE TableA.FieldA IS NOT NULL`可能有效，但可能无效。在 Access 中它可能是 100% 安全的，但在 SQL Server 中这样的查询将不安全，因为不能保证应用条件的顺序。显然，在 SQL Server 中，即使为 NULL 并且没有`CLng`函数，您也可以转换为整数，但这一点仍然有效：不要养成依赖某些想象的`WHERE`条件顺序来保护您免受无效类型转换的习惯：相反，您必须处理可能出错的表达式内的无效类型转换——这是最佳实践。

# ios - 如何在 iOS 中处理跳回上一个屏幕

> ID：13996174
> 
> 赞同：0
> 
> 时间：2012-12-21T19:38:41.940
> 
> 标签：ios, memory-management, memory-leaks, uiviewcontroller

我只是在这里寻找健全性检查。

我有一个用户在进入主应用程序的途中经过的屏幕。该屏幕几乎可以从系统中的任何位置导航回。

就目前而言，我只是在展示 ViewController 而不使用 NavController 来管理它们（它似乎不适用于我的大多数应用程序，因为屏幕不一定是连续的或彼此相关的）。

我的问题是，如果我展示了 VC1，然后导航到其他屏幕，最后想再次展示 VC1，我正在做类似的事情：

```
[self presentViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"VC1"] animated:YES completion:nil]; 
```

这是不好的形式吗？我是通过创建一堆 VC1 实例来泄漏内存，还是有一些使用先前创建的实例的魔法？

如果它是坏的形式，我如何回到原来的 VC1 来重用它？

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:56:10.153

我想你已经确定了：在内存中同时拥有同一个视图控制器的多个实例并不是一个好主意。每次实例化一个新的视图控制器并以模态方式呈现它时，都会消耗更多的内存。

最优雅的解决方案是 iOS 6 unwind segue。但我们大多数人还不愿意放弃对 iOS 5 的支持。

如果你需要支持 iOS 5，你可以考虑使用导航控制器，但如果你不喜欢在你的用户界面中隐藏导航栏。然后用 push segues 替换模态 segues，现在您可以`popToRootViewController`随时返回主视图控制器。

# javascript - 添加另一个 javascript 代码时 Javascript 停止工作

> ID：13996180
> 
> 赞同：1
> 
> 时间：2012-12-21T19:39:07.540
> 
> 标签：javascript

我正在使用此 js 代码来验证是否将正确的电子邮件输入到表单中。如果没有，会弹出一个警告框。

```
function validateForm() {   
    var valid = true;
    var errMsg = "";
    var email = document.emailform.email.value;
    //var fname = document.emailform.fname.value;
    var filter = /^([a-zA-Z0-9_.-])+@(([a-zA-Z0-9-])+.)+([a-zA-Z0-9]{2,4})+$/;

   //if(fname.length <= 0) {
      //valid = false;
      //errMsg += "Please provide a valid first name.\n";
   //}
   if(email.length <= 0) {
      valid = false;
      errMsg += "Email address is required.\n";
   } else {
      if (!filter.test(email)) {
         valid = false;
         errMsg += "Please provide a valid email address.\n";
      }
   }   
   if (errMsg.length > 0) {
      alert(errMsg);
      return false;
   }
   } 
```

在我关闭之前，我有这个...

```
<script>$('#awform').submit(validateForm);</script> 
```

这工作得很好。

我通常在结束正文标记之前输入另一个 javascript 代码，在正常情况下可以正常工作。

```
<script language="JavaScript" type="text/javascript"> cbr202=Math.random()*10000000000000000;document.write('<scr'+'ipt language="JavaScript" src="http://mywebsite.com/track/static/landing.php?lpip=123&202cb='+cbr202+'" type="text/javascript"></scr' + 'ipt>'); </script> 
```

最后一块是我使用的自定义分析程序。

我遇到的问题是，当我一起使用这两个脚本时，验证不再有效。

所以我...

```
<script language="JavaScript" type="text/javascript"> cbr202=Math.random()*10000000000000000;document.write('<scr'+'ipt language="JavaScript" src="http://mywebsite.com/track/static/landing.php?lpip=123&202cb='+cbr202+'" type="text/javascript"></scr' + 'ipt>'); </script>
<script>$('#awform').submit(validateForm);</script>
</body> 
```

根据要求，这是跟踪脚本的样子......

```
function t202Init(){
    //this grabs the cid, but if they set a forced kw, this will be replaced 

    if (readCookie('t202forcedkw')) {
        var cid = readCookie('t202forcedkw');
    } else {
        var cid = t202GetVar('cid');
    }

    var lpip = '<? echo htmlentities($_GET['lpip']); ?>';
    var campid = t202GetVar('campid');
    var OVRAW = t202GetVar('OVRAW');
    var OVKEY = t202GetVar('OVKEY');
    var OVMTC = t202GetVar('OVMTC');
    var c1 = t202GetVar('c1');
    var c2 = t202GetVar('c2');
    var c3 = t202GetVar('c3');
    var c4 = t202GetVar('c4');
    var target_passthrough = t202GetVar('target_passthrough');
    var keyword = t202GetVar('keyword');
    var referer = document.referrer;
    var resolution = screen.width+'x'+screen.height;
    var language = navigator.appName=='Netscape'?navigator.language:navigator.browserLanguage; 
    language = language.substr(0,2); 

    document.write("<script src=\"<?php echo $strProtocol; ?>://<? echo $_SERVER['SERVER_NAME']; ?>/jump/static/record.php?lpip=" + t202Enc(lpip)
        + "&campid="                + t202Enc(campid)
        + "&cid="               + cid
        + "&OVRAW="                 + t202Enc(OVRAW)
        + "&OVKEY="                 + t202Enc(OVKEY)
        + "&OVMTC="                 + t202Enc(OVMTC)
        + "&c1="                    + t202Enc(c1)
        + "&c2="                    + t202Enc(c2)
        + "&c3="                    + t202Enc(c3)
        + "&c4="                    + t202Enc(c4)
        + "&target_passthrough="    + t202Enc(target_passthrough)
        + "&keyword="               + t202Enc(keyword)
        + "&referer="               + t202Enc(referer)
        + "&resolution="            + t202Enc(resolution)
        + "&language="              + t202Enc(language)
        + "\" type=\"text/javascript\" ></script>"
    );

}

function  t202Enc(e){
    return encodeURIComponent(e);

}

function  t202GetVar(name){
    get_string = document.location.search;         
     return_value = '';

     do { 
        name_index = get_string.indexOf(name + '=');

        if(name_index != -1) {
            get_string = get_string.substr(name_index + name.length + 1, get_string.length - name_index);

            end_of_value = get_string.indexOf('&');
            if(end_of_value != -1) {                
                value = get_string.substr(0, end_of_value);                
            } else {                
                value = get_string;                
            }

            if(return_value == '' || value == '') {
                return_value += value;
            } else {
                return_value += ', ' + value;
            }
          }
        } 

        while(name_index != -1)

         //Restores all the blank spaces.
         space = return_value.indexOf('+');
         while(space != -1) { 
            return_value = return_value.substr(0, space) + ' ' + 
            return_value.substr(space + 1, return_value.length);

            space = return_value.indexOf('+');
          }

     return(return_value);

}

function createCookie(name,value,days) {
    if (days) {
        var date = new Date();
        date.setTime(date.getTime()+(days*24*60*60*1000));
        var expires = "; expires="+date.toGMTString();
    }
    else var expires = "";
    document.cookie = name+"="+value+expires+"; path=/";

}

function readCookie(name) {
    var nameEQ = name + "=";
    var ca = document.cookie.split(';');
    for(var i=0;i < ca.length;i++) {
        var c = ca[i];
        while (c.charAt(0)==' ') c = c.substring(1,c.length);
        if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
    }
    return null;

}

function eraseCookie(name) {
    createCookie(name,"",-1);
}

t202Init(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:43:17.673

尝试切换两个脚本的顺序。自定义分析程序似乎正在运行`document.write`，这有点令人讨厌，可能会导致文档的其余部分无法正确解析。

*   [为什么 document.write 被认为是“坏习惯”？](https://stackoverflow.com/questions/802854/why-is-document-write-considered-a-bad-practice).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:43:49.877

您嵌入的 Javascript 标记可能会破坏您的脚本。每当我尝试执行以下形式的脚本时：

```
<script>
   // Some stuff here
   <script>
       // More stuff here
   </script>
 </script> 
```

脚本中断。尝试使用不同的方法来加载您的分析。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T19:46:39.233

为什么不使用 jQuery 添加脚本标签。你显然已经包含了 jQuery。

尝试

```
<script type="text/javascript">
    var cbr202 = Math.random() *10000000000000000;
    $('head').append('<scr'+'ipt type="text/javascript" src="http://mywebsite.com/track/static/landing.php?lpip=123&202cb='+cbr202+'" />');​
</script> 
```

# html - 如果我将字体添加到我的网站的 FTP 中，当我添加我的字体时，我应该将它放在 FTP 的什么位置以及如何使用该字体？

> ID：13996181
> 
> 赞同：0
> 
> 时间：2012-12-21T19:39:08.913
> 
> 标签：html, css, fonts, web, ftp

如果我在我的网站的 FTP 中添加一种字体，当我添加我的字体时，我应该将它放在 FTP 的什么位置以及如何将字体与 HTML 或 CSS 一起使用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:41:52.267

您可以将字体上传到您想要的任何位置，您只需要链接到正确的位置。请参阅下面的示例以了解 CSS 中的字体。

```
@font-face{
   font-family:'Your Font Name'; 
   src:url(http://www.example.com/fonts/YourFont.otf); 
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T19:51:58.203

我个人建议为此使用[Font Squirrel Fontface 生成器](http://www.fontsquirrel.com/fontface/generator)。你会得到类似的东西：

```
 /* @Fontface */
    @font-face {
        font-family: 'Yourfont';
        src: url('fonts/yourfont.eot');
        src: url('fonts/yourfont.eot?#iefix') format('embedded-opentype'),
             url('fonts/yourfont.woff') format('woff'),
             url('fonts/yourfont.ttf') format('truetype'),
             url('fonts/yourfont.svg#Yourfont') format('svg');
        font-weight: normal;
        font-style: normal;
    } 
```

使用这种方式，您将获得 IE、Chrome、Opera、Firefox 和 Safari 的有效选项。稍后您可以像使用普通字体一样使用此字体，使用

```
 div.heading { font-family: 'Yourfont', (othersifyouwant); } 
```

# jquery - 带有特殊/扩展 ascii/utf 字符的 jquery-json

> ID：13996182
> 
> 赞同：3
> 
> 时间：2012-12-21T19:39:11.120
> 
> 标签：jquery, json, html-encode

我已经使用 jquery-json 一段时间了，发现它是一个非常可靠的扩展。然而，我刚刚遇到了一个小问题，这让我怀疑我是不是在薄冰上滑冰。这是jquery-json今天想出的一段JSON

```
{"taqa1618Asava4382C":[{"d":"Vegetariana [6\" - £6.99]","c":"2","p":"6.99"}],"edited":1230} 
```

我将它输入到 PHP 的 json_decode 中，它立即抛出了一个不稳定的问题。它不喜欢 £ 字符，我想这是合理的。我可以在 jQuery/浏览器端做些什么来解决这个问题吗？谷歌搜索没有产生任何有用的东西。

嗯...让我印象深刻的是，这可能不是我在这个论坛上问过的最聪明的问题，但它是漫长工作日的结束。

# java - 忽略 JAX-WS 客户端的 XML 验证

> ID：13996183
> 
> 赞同：8
> 
> 时间：2012-12-21T19:39:17.213
> 
> 标签：java, xml, jax-ws

我有一些我正在尝试使用的 JAX-WS 服务，但是从服务返回的 XML（我无法更改）具有无效的 DTD（产生 XMLStreamReaderException，因为`publicId`和之间没有空格`systemId`）。如何让客户忽略格式不正确的 DTD？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-10T00:32:20.023

是 a 的无效`DTD`部分`WSDL`吗？如果是，您可以使用本地`JAXWS catalog`读取`XML`，然后调用服务。

您需要下载`WSDL`、修复它并将其存储在本地。然后，在创建`Service`实例时`WSDL`从本地存储中读取。更新`endpoint`属性并调用服务。

# javascript - 简单的javascript原型问题

> ID：13996187
> 
> 赞同：1
> 
> 时间：2012-12-21T19:39:36.177
> 
> 标签：javascript

我正在尝试将 onclick 功能附加到每个 a 标签。

我有

```
task.prototype.init=function(){  
        for (value in obj){
            var Link=document.createElement('a');
                Link.innerHTML='click';
                Link.id=value;   //I want to get the value
                Link.href='#'
                Link.onclick=this.changeName;
                document.body.appendChild(Link);
         }
}

task.prototype.changeName=function(){  

        //I want to get the clicked element id and I am not sure how to do it. 

    return false;
    } 
```

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:49:16.893

在事件处理程序内部，`this`是创建事件的对象，所以这应该工作：

```
task.prototype.changeName=function() { alert(this.id); }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:51:37.317

我在小提琴中创建了一个示例：http: [//jsfiddle.net/dWPCS/2/](http://jsfiddle.net/dWPCS/2/)

在您的事件处理程序中，对元素`changeName`的引用。`this`所以`this.id`返回你想要的值。

# seo - Yoast SEO 将 H1 插入页面。不知道怎么去掉

> ID：13996190
> 
> 赞同：0
> 
> 时间：2012-12-21T19:39:49.740
> 
> 标签：seo, wordpress

我创建了一个自定义主题并安装了 Yoast SEO 插件（wordpress seo）。当我这样做时，它采用了“SEO 标题”并将其放在页面顶部的 H1 中。我想删除它，因为它不符合主题。

有谁知道我该怎么做？如果你需要的话，我可以告诉你我在说什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T23:35:19.173

必须删除我使用的模板中默认生成的 h1 标签。只是从 wordpress 后端的编辑器中完成的。

# objective-c - CoreData NSNotification 的排序和同步

> ID：13996203
> 
> 赞同：1
> 
> 时间：2012-12-21T19:40:40.757
> 
> 标签：objective-c, core-data, nsnotifications

也许这是一个太简单的问题，但我从其他开发人员那里了解到关于 Objective-C 编程的一件事是自定义 NSNotifications 没有预测顺序。

那么，CoreData 通知背后的机制是什么，这使得 NSManagedObjectContextWillSaveNotification 成为可能，而其余的则以特定的顺序交付？

听力课怎么可能没有收到重叠或错误顺序的通知？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:05:29.453

我很确定当您更改某些内容并保存时，该顺序是显而易见的：

```
1\. NSManagedObjectContextObjectsDidChangeNotification
2\. NSManagedObjectContextWillSaveNotification
3\. NSManagedObjectContextDidSaveNotification 
```

您可以使用日志语句轻松检查。根据我的经验，这个订单是 100% 可靠的。

但是，您正确地指出，通过通知丢失关系并不能真正保证交付，更不用说在指定时间。如果您想确定收到某些回调，您应该使用`NSFetchedResultsController`委托。这种更紧密的关系几乎可以确保您的更改可以按确定的顺序做出反应。

# arrays - 制作openmp循环以将小数组组合成一个大数组

> ID：13996208
> 
> 赞同：0
> 
> 时间：2012-12-21T19:40:55.957
> 
> 标签：arrays, loops, fortran, openmp, do-loops

我有这个循环，它在 openmp 中如下所示，但出现分配错误：

```
!$OMP PARALLEL DO PRIVATE(fn)
  do fn=0, NFILES 
    allocate(temparray(1:3,1:Ntot))
    LOAD temparray FROM FILE(fn)
    Ntot = len(temparray)
    TOTALARRAY(1+nstart:nstart+Ntot,1:3)=temparray(1:Ntot, 1:3)
    deallocate(temparray)
    nstart=nstart+len(temparray)
  end do
!$OMP END PARALLEL DO 
```

有没有办法将这些文件加载​​到内存中并使用 openmp 快速组合它们？还是我必须按顺序进行？我拥有的数组比这大得多——这只是为了演示。我想并行加载它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T23:05:07.780

`Ntot`并且`temparray`应该是`private`。否则，您将分配它并释放它并从不同的线程重写它，并且最终必须出错。而不是`len`你可能想要的，但在这种情况下`size`它只会返回。`3*Ntot`

正如@sigma 指出的那样，`totalarray`插入刚刚阅读的位置取决于阅读的进度。那是行不通的。你必须让它以某种方式可以预测。也许只是读取文件并在一次通过中获得位置，然后`rewind`在真正读取的情况下进行第二次通过。或者，如果可能的话，只使用常量数组。（`pack`如有必要，也可以在最后使用，但可能需要很长时间。）

# vba - Outlook：保存 Excel 附件并更改文件扩展名

> ID：13996209
> 
> 赞同：2
> 
> 时间：2012-12-21T19:41:07.997
> 
> 标签：vba, outlook

我没有以前的经验，`VBA`并在这里找到了我问题的第一部分的解决方案。因此，我能够使用下面的代码使“保存 Excel 附件”部分工作。

现在，由于附件是一个`.xls`文件，并在打开时给我一个损坏的文件消息（其他工作表从这个保存的文件中提取数据），我想将它自动保存为 . `xlsx`文件。

我试图找到解决方案，但我尝试过的方法不起作用。希望能在这里找到一些帮助。任何帮助，将不胜感激！提前致谢！

```
Public Sub saveAttachtoDisk(itm As Outlook.MailItem)

    Dim objAtt As Outlook.Attachment
    Dim saveFolder As String
    Dim dateFormat
    dateFormat = Format(itm.ReceivedTime - 1, "yyyymmdd_")    
    saveFolder = "THIS IS MY FOLDER"

    For Each objAtt In itm.Attachments
        objAtt.SaveAsFile saveFolder & "\" & dateFormat & objAtt.DisplayName
        Set objAtt = Nothing
       Next    

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-04T03:56:25.123

你像这样指定 fileFormat

ActiveWorkbook.SaveAs 文件格式：=xlWorkbookDefault

或者

ActiveWorkbook.SaveAs 文件格式：=51

[http://msdn.microsoft.com/en-us/library/office/ff840717(v=office.14).aspx](http://msdn.microsoft.com/en-us/library/office/ff840717(v=office.14).aspx)

此处的文件格式：

*   [http://msdn.microsoft.com/en-us/library/bb241279.aspx](http://msdn.microsoft.com/en-us/library/bb241279.aspx)
*   [http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.xlfileformat.aspx](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.xlfileformat.aspx)？

# android - 新的 Google 帐户添加了广播

> ID：13996211
> 
> 赞同：1
> 
> 时间：2012-12-21T19:41:16.070
> 
> 标签：android, android-intent, android-c2dm, google-cloud-messaging

我正在为我们的应用程序实施 GCM。目前我在 GCM 注册期间面临一个问题。

如果设备运行的是 ICS 之前的 Android 操作系统并且没有与设备关联的 Google 帐户，则 GCM 服务器将**“Account_Missing”**错误发送回 Receiver。我正在通过通知用户添加新的 Google 帐户来处理这种情况。但问题是，在应用程序重新登录之前，应用程序永远不会知道是否添加了新的 Google 帐户。

在正常情况下 - 一旦应用程序收到 GCM 注册 ID，它就会将该注册 ID 发送到应用服务器。我想在应用程序获得第一个 Google 帐户添加广播并将注册 ID 自动发送到应用服务器后立即启动 GCM 注册过程。现在，我知道必须做什么，但我不知道是否有这样的广播，或者有没有其他方法可以实现相同的预期行为。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-26T07:09:56.657

请查看此[http://developer.android.com/reference/android/accounts/AccountManager.html#addOnAccountsUpdatedListener%28android.accounts.OnAccountsUpdateListener,%20android.os.Handler,%20boolean%29](http://developer.android.com/reference/android/accounts/AccountManager.html#addOnAccountsUpdatedListener%28android.accounts.OnAccountsUpdateListener,%20android.os.Handler,%20boolean%29) 并处理帐户添加。

希望有帮助！

# jsf-2 - 如何在 jsf 或 primefaces 中将 div 内容保存为图像（png、jpg ...）？

> ID：13996216
> 
> 赞同：1
> 
> 时间：2012-12-21T19:41:40.003
> 
> 标签：jsf-2, primefaces, html5-canvas

我正在为学校做一个项目。项目主题是 T 恤设计。我正在使用 jsf 和 primefaces。但是我不太了解jsf和primefaces。我有个问题。在一个div中，设计完成了，然后我想将div中的内容保存为图像文件。我可以使用 HTML5 吗？如何将 html5 添加到 JSF 项目？我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:49:36.813

创建具有所需大小的画布，在画布中加载图形内容，然后使用 canvas.toDataURL(fileType) 将文件内容获取为 base64，这是链接[http://tutorials.jenkov.com/html5-canvas/ todataurl.html](http://tutorials.jenkov.com/html5-canvas/todataurl.html)

# css - 在 Sencha Touch 2 中工作的所有 CSS 列表，除了一个属性

> ID：13996220
> 
> 赞同：0
> 
> 时间：2012-12-21T19:42:02.007
> 
> 标签：css, list, colors, sencha-touch-2

我的列表加载数据，工作正常，所有 CSS 都应用于每个 Cls，除了我有 .ListSelected 类的 SelectedCls 中的字体颜色。

选择状态时文本应为白色。

```
 .ListNormal {
        background: #f7f7f7;
        font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
        color: #024059 !important;
        text-shadow: 0px 0px 0px #000000;
    }

    .ListPressed {
        font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
        color: #024059 !important;
        font-weight: bold;
        text-shadow: 0px 0px 0px #000000;
        -webkit-box-shadow: inset 0px 1px 0px #ffffff;
        background: #b6e1ff;
    }

    .ListSelected {
        font-family: Arial, "Helvetica Neue", Helvetica, sans-serif;
        color: #ffffff !important;
        font-weight: bold;
        background-image: -webkit-gradient(linear, left top, left bottom, from(#1ca1ff), to(#0081dc));
        -webkit-box-shadow: inset 0px 1px 0px #b1dfff;
    } 
```

![在此处输入图像描述](../Images/26f037197b70747385725b7ded873b11.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:49:05.910

当您使用 !important 时，第一个属性优先于其他具有 !important 在工作表中更靠后的属性。不使用 !important 的属性则相反（last 优先）。您的其他课程之一优先于您选择的课程。

# grails - Transient hasMany 属性和 Auto-Magic Setter

> ID：13996227
> 
> 赞同：2
> 
> 时间：2012-12-21T19:42:19.693
> 
> 标签：grails, grails-orm, grails-2.0

我创建了一个域类，它使用瞬态属性代替真正的外键关系。

```
//ChildThing.groovy
class ChildThing {
    String name
    static constraints = {
    }
    static mapping = {
        datasource("two")
        //table name: "child_thing"
        version false
    }
}

//ParentThing.groovy
class ParentThing {
    String name
    static transients = [
            'children'
    ]
    static hasMany = [children: ChildThing]
    Set<ChildThing> getChildren() {
        ParentThingChildThing.findAllByParentThing(this).collect { ChildThing.get(it.childThing) } as Set
    }
    def setChildren(List<Long> children) {
        children.each {
            ParentThingChildThing.findOrSaveWhere([parentThing: this, childThing: it])
        }
    }
}
//ParentThingChildThing.groovy
import org.apache.commons.lang.builder.HashCodeBuilder

class ParentThingChildThing implements Serializable {
    ParentThing parentThing
    Long childThing
    boolean equals(other) {
        if (!(other instanceof ParentThingChildThing)) {
            return false
        }
        other.parentThing?.id == parentThing?.id &&
            other.childThing?.id == childThing
    }
    int hashCode() {
        def builder = new HashCodeBuilder()
        if (parentThing) builder.append(parentThing.id)
        if (childThing) builder.append(childThing)
        builder.toHashCode()
    }
    static mapping = {
        id composite: ['parentThing', 'childThing']
        version false
    }
} 
```

我希望`children`通过一个命名参数并设置`parentThing.properties = params`

除了一个目标，我可以让一切工作。是否可以将自动魔术属性覆盖到参数设置器？

# sql-server - SQL Server 密码已恢复为旧密码

> ID：13996232
> 
> 赞同：0
> 
> 时间：2012-12-21T19:42:32.530
> 
> 标签：sql-server, sql-server-2005, passwords, trace

今天我尝试通过SSMS登录我们的SQL服务器，发现登录不起作用。我发现不知何故旧密码有效，但新密码无效。我不知道这是怎么发生的。几个月前我已经更改了这个密码，并且一直在完美地工作。通常

*   我是唯一一个更改密码并创建新密码的人。
*   没有其他人可以访问数据库（AFAIK）

我不知道这是怎么发生的。我们确实有几个新的 IT 人员，其中一些人可以使用此登录名访问数据库。他们拥有存储在应用程序中的*旧密码。*

1.  他们是否有可能尝试通过旧密码登录，并且数据库会自动识别它并将密码更改为旧密码？

2.  有什么方法可以在错误日志中跟踪密码更改。

我已经跑`EXEC sp_readerrorlog 0`了，但没有多大帮助，但我可以看到登录失败。此时，我们只记录失败的登录，而不是所有登录。有没有更好的方法来跟踪此密码是如何更改的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:56:58.297

我做了一些检查，发现其他人也有同样的问题。

如果您创建一个新的登录名，您可以使用它来防止它发生：

```
CREATE LOGIN loginName WITH PASSWORD = '<enterStrongPasswordHere>', 
CHECK_POLICY = OFF; 
```

这将确保未启用强制密码策略。

# ios - 如何将 WAV/CAF 文件的样本数据转换为字节数组？

> ID：13996236
> 
> 赞同：1
> 
> 时间：2012-12-21T19:42:52.523
> 
> 标签：ios, audio

我需要能够以编程方式读取 WAV（或 CAF）文件并将样本（音频）数据提取为字节数组。最简单/最快的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:55:38.480

假设您在 iOS 或 OS X 上，您需要 AudioToolbox 框架，特别是其中的 API `AudioFile.h`（或者`ExtAudioFile.h`如果您需要在读取时将音频数据转换为另一种格式。）

例如，

```
#include <AudioToolbox/AudioFile.h>

...

AudioFileID audioFile;
OSStatus err = AudioFileOpenURL(fileURL, kAudioFileReadPermission, 0, &audioFile);
// get the number of audio data bytes
UInt64 numBytes = 0;
UInt32 dataSize = sizeof(numBytes);
err = AudioFileGetProperty(audioFile, kAudioFilePropertyAudioDataByteCount, &dataSize, &numBytes);

unsigned char *audioBuffer = (unsigned char *)malloc(numBytes);

UInt32 toRead = numBytes;
UInt64 offset = 0;
unsigned char *pBuffer = audioBuffer;
while(true) {
    err = AudioFileReadBytes(audioFile, true, offset, &toRead, &pBuffer);
    if (kAudioFileEndOfFileError == err) {
        // cool, we're at the end of the file
        break;
    } else if (noErr != err) {
        // uh-oh, some error other than eof
        break;
    }
    // advance the next read offset
    offset += toRead;
    // advance the read buffer's pointer
    pBuffer += toRead;
    toRead = numBytes - offset;
    if (0 == toRead) {
        // got to the end of file but no eof err
        break;
    }
}

// Process audioBuffer ...

free(audioBuffer); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-24T22:21:31.183

这是我从[iPhone 中从音乐文件中获取 NSData](https://stackoverflow.com/questions/13134785/getting-nsdata-out-of-music-file-in-iphone)并为 ARC 更新的东西

```
- (NSData *)readSoundFileSamples:(NSString *)filePath
{

    // Get raw PCM data from the track
    NSURL *assetURL = [NSURL fileURLWithPath:filePath];
    NSMutableData *data = [[NSMutableData alloc] init];

    const uint32_t sampleRate = 16000; // 16k sample/sec
    const uint16_t bitDepth = 16; // 16 bit/sample/channel
    const uint16_t channels = 2; // 2 channel/sample (stereo)

    NSDictionary *opts = [NSDictionary dictionary];
    AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:assetURL options:opts];
    AVAssetReader *reader = [[AVAssetReader alloc] initWithAsset:asset error:NULL];
    NSDictionary *settings = [NSDictionary dictionaryWithObjectsAndKeys:
                              [NSNumber numberWithInt:kAudioFormatLinearPCM], AVFormatIDKey,
                              [NSNumber numberWithFloat:(float)sampleRate], AVSampleRateKey,
                              [NSNumber numberWithInt:bitDepth], AVLinearPCMBitDepthKey,
                              [NSNumber numberWithBool:NO], AVLinearPCMIsNonInterleaved,
                              [NSNumber numberWithBool:NO], AVLinearPCMIsFloatKey,
                              [NSNumber numberWithBool:NO], AVLinearPCMIsBigEndianKey, nil];

    AVAssetReaderTrackOutput *output = [[AVAssetReaderTrackOutput alloc] initWithTrack:[[asset tracks] objectAtIndex:0] outputSettings:settings];
    [reader addOutput:output];
    [reader startReading];

    // read the samples from the asset and append them subsequently
    while ([reader status] != AVAssetReaderStatusCompleted) {
        CMSampleBufferRef buffer = [output copyNextSampleBuffer];
        if (buffer == NULL) continue;

        CMBlockBufferRef blockBuffer = CMSampleBufferGetDataBuffer(buffer);
        size_t size = CMBlockBufferGetDataLength(blockBuffer);
        uint8_t *outBytes = malloc(size);
        CMBlockBufferCopyDataBytes(blockBuffer, 0, size, outBytes);
        CMSampleBufferInvalidate(buffer);
        CFRelease(buffer);
        [data appendBytes:outBytes length:size];
        free(outBytes);
    }

    return data;

} 
```

# python - PyQT QTextEdit 小部件插入希腊符号

> ID：13996248
> 
> 赞同：1
> 
> 时间：2012-12-21T19:43:48.700
> 
> 标签：python, qt, pyqt

我正在寻找指导以使 QTextEdit 小部件能够插入希腊符号（欧米茄，增量），例如 Microsoft Word 的方式。我知道 QTextEdit 支持基本的 HTML 标签，如粗体/斜体，但在 QT 中有一种方法可以使文本编辑（不一定是 QTextEdit）更容易一点，以便一键插入希腊符号？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:17:14.660

您可以使用您的文本编辑并使用[此处](http://www.htmlhelp.com/reference/html40/entities/symbols.html)`setHtml()`给出的 html 代码

在您的情况下，创建一个按钮以使用插入字符代码`insertHtml()`

# javascript - 画布上的图形没有被正确清除？

> ID：13996250
> 
> 赞同：5
> 
> 时间：2012-12-21T19:43:52.830
> 
> 标签：javascript, html5-canvas

我试图从我的画布游戏中挤出最后一点性能；最近我发现清除画布的性能非常重，所以我试图找到一种方法来代替每帧清除整个画布。但是我发现我正在尝试的新方法存在一些问题，即分别清除每个对象的边界框，然后更新它们。

问题是元素在离开画布时被“抛在后面”，图像的某些部分仍然存在。我尝试简化代码以确保问题不在代码的其余部分并且没有乐趣。

返回到每帧擦拭整个画布也是不可取的，特别是因为这种新方法要快得多。这是代码（由于某种原因，它不能用作[小提琴](http://jsfiddle.net/hPwcr/1/)）。

```
var enemyCtx = document.getElementById('enemy').getContext('2d');

var game =
{
    w: 800,
    h: 500
};
var enemies = [];
window.addEventListener('load', function()
{
    for (var i = 0; i < 200; i++)
    {
        enemies[enemies.length] = new Enemy();
    }
    update();
}, false);

var buffer = document.createElement('canvas');
    buffer.width = 42;
    buffer.height = 42;
    var bufferCtx = buffer.getContext('2d');
    drawEnemy(bufferCtx, 5, 5, 32, 32, 'red');

function update()
{
    for (var i = 0; i < enemies.length; i++)
    {
                    enemyCtx.clearRect(    enemies[i].x,
                                enemies[i].y,
                                enemies[i].x + enemies[i].width,
                                enemies[i].y + enemies[i].height);
    }
    for (var i = 0; i < enemies.length; i++)
    {
        enemies[i].x-=5;
        enemyCtx.drawImage(buffer, enemies[i].x-5, enemies[i].y-5);
    }
    requestAnimationFrame(update);
}

function drawEnemy(ctx, x, y, width, height, colour)
{
        ctx.lineWidth = 1;
        ctx.strokeStyle = colour;
        ctx.strokeRect(x + 0.5, y + 0.5, width, height);
}

function Enemy()
{
    this.x = Math.random()*game.w;
    this.y = Math.random()*game.h;
    this.width = 32;
    this.height = 32;
}
(function()
{
    // http://paulirish.com/2011/requestanimationframe-for-smart-animating/
    var lastTime = 0;
    var vendors = ['ms', 'moz', 'webkit', 'o'];
    for(var x = 0; x < vendors.length && !window.requestAnimationFrame; ++x)
    {
        window.requestAnimationFrame = window[vendors[x]+'RequestAnimationFrame'];
        window.cancelAnimationFrame = window[vendors[x]+'CancelAnimationFrame'] || window[vendors[x]+'CancelRequestAnimationFrame'];
    }

    if (!window.requestAnimationFrame) window.requestAnimationFrame = function(callback, element)
    {
        var currTime = new Date().getTime();
        var timeToCall = Math.max(0, 16 - (currTime - lastTime));
        var id = window.setTimeout(function()
        {
            callback(currTime + timeToCall);
        }, timeToCall);
        lastTime = currTime + timeToCall;
        return id;
    };

    if (!window.cancelAnimationFrame) window.cancelAnimationFrame = function(id)
    {
        clearTimeout(id);
    };
}()); 
```

＆HTML：

```
<canvas id="enemy" width="800" height="500"></canvas>​ 
```

你们能给我的任何见解都会非常有用；谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:17:13.633

对此进行了更多考虑，我想出了一个解决方案；也许它可能对你们有一些好处。

基本上，图像在画布上“留下”，因为 clearRect() 方法需要使用实际的画布坐标。因为图像要离开画布，所以它的坐标将是负值。

```
function update()
{
    for (var i = 0; i < enemies.length; i++)
    {
        lx = (enemies[i].x > 0) ? enemies[i].x : 0;
        ly = (enemies[i].y > 0) ? enemies[i].y : 0;
        enemyCtx.clearRect( lx,
                            ly,
                            lx + enemies[i].width + 1,
                            ly + enemies[i].height + 1);
    }
    // ...
} 
```

宽度的附加 1 是为了停止画布绘制图像的最后一个像素列，因为它正在被擦除。希望这可以帮助。

# r - 获取一个点（栅格）距离内的像元编号

> ID：13996256
> 
> 赞同：2
> 
> 时间：2012-12-21T19:44:33.773
> 
> 标签：r, cell, distance, spatial, raster

我需要使用 R 获取一个点的距离（例如 10 公里）内的单元格编号，但我没有弄清楚如何处理栅格数据。

```
library(raster)
r <- raster(ncols=10, nrows=10)
cellFromXY(r, c(2,2)) # get the cell number of one point 
```

如何获取一个点距离内的单元格数？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-22T00:34:33.390

将 extract 与 buffer 选项和 cellnumbers=TRUE 一起使用

```
r <- raster(ncols=100, nrows=100)
  r[]<-runif(ncell(r))

xy <- cbind(-50, seq(-80, 80, by=20))
extract(r, xy[1:3,], buffer=1000000,cellnumbers=TRUE) 
```

# ruby-on-rails - 使用 Rspec + Capybara 在 Rails 中测试错误页面

> ID：13996259
> 
> 赞同：24
> 
> 时间：2012-12-21T19:44:38.480
> 
> 标签：ruby-on-rails, ruby, rspec, capybara

在 Rails 3.2.9 中，我有这样的自定义错误页面定义：

```
# application.rb
config.exceptions_app = self.routes

# routes.rb
match '/404' => 'errors#not_found' 
```

哪个像预期的那样工作。当我进入时`config.consider_all_requests_local = false`，`development.rb`我会`not_found`在参观时看到风景`/foo`

但是如何使用 Rspec + Capybara 进行测试？

我试过这个：

```
# /spec/features/not_found_spec.rb
require 'spec_helper'
describe 'not found page' do
  it 'should respond with 404 page' do
    visit '/foo'
    page.should have_content('not found')
  end
end 
```

当我运行这个规范时，我得到：

```
1) not found page should respond with 404 page
  Failure/Error: visit '/foo'
  ActionController::RoutingError:
    No route matches [GET] "/foo" 
```

我该如何测试呢？

**编辑：**

忘了说：我已经`config.consider_all_requests_local = false`进去了`test.rb`

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-03T15:23:55.603

*test.rb*中的问题设置不仅是

```
consider_all_requests_local = false 
```

但是也

```
config.action_dispatch.show_exceptions = true 
```

如果你设置了这个，你应该能够测试错误。我无法在周围过滤器中使用它。

看看[http://agileleague.com/blog/rails-3-2-custom-error-pages-the-exceptions_app-and-testing-with-capybara/](http://agileleague.com/blog/rails-3-2-custom-error-pages-the-exceptions_app-and-testing-with-capybara/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:19:42.093

该`config.consider_all_requests_local = false`设置需要以`config/environments/test.rb`与您为开发设置相同的方式进行设置。

如果您不想对所有测试都执行此操作，那么[围绕过滤器的 rspec](https://www.relishapp.com/rspec/rspec-core/v/2-0/docs/hooks/around-hooks)可能有助于在测试之前设置状态并在之后恢复，如下所示：

```
# /spec/features/not_found_spec.rb
require 'spec_helper'
describe 'not found page' do
  around :each do |example|
     Rails.application.config.consider_all_requests_local = false
     example.run
     Rails.application.config.consider_all_requests_local = true
  end

  it 'should respond with 404 page' do
    visit '/foo'
    page.should have_content('not found')
  end
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-22T14:23:37.457

如果您想这样做并且不想更改`config/environments/test.rb`，可以按照此[帖子](https://stackoverflow.com/a/9941128/2767026)中的解决方案进行操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-11T07:59:38.517

可以直接访问404错误页面：

访问`/404`而不是`/foo`

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2018-06-08T14:48:17.360

使用 Rails 5.2、Capybara 3，我能够使用以下命令模拟页面错误

```
around do |example|
  Rails.application.config.action_dispatch.show_exceptions = true
  example.run
  Rails.application.config.action_dispatch.show_exceptions = false
end

before do
  allow(Person).to receive(:search).and_raise 'App error simulation!'
end

it 'displays an error message' do
  visit root_path
  fill_in 'q', with: 'anything'
  click_on 'Search'
  expect(page).to have_content 'We are sorry, but the application encountered a problem.'
end 
```

### 更新

在运行完整的测试套件时，这似乎并不总是有效。所以我不得不设置`config.action_dispatch.show_exceptions = true`并`config/environments/test.rb`移除周围的块。

# android - 如何扩展行？

> ID：13996261
> 
> 赞同：5
> 
> 时间：2012-12-21T19:45:02.957
> 
> 标签：android, android-layout, android-gridlayout

我正在尝试使用 GridLayout 并且无法扩展行（使用 TextViews）以“填充”布局中的空间。

垂直图片（注意红线是行应该展开的地方）： ![在此处输入图像描述](../Images/62547cfcd5a7c7acfee3480bd6d168b5.png)

横向图片：
![在此处输入图像描述](../Images/04593e876e068333aa945d3ad6f79a4e.png)

**主.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<GridLayout xmlns:android="http://schemas.android.com/apk/res/android"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  android:columnCount="2"
  android:useDefaultMargins="true" >
<TextView
    style="@android:style/TextAppearance.Large"
    android:layout_columnSpan="2"
    android:layout_gravity="center_horizontal"
    android:padding="8dp"
    android:text="Which means: lacking in originality as to be obvious and boring." />
<Space android:layout_height="24dp" android:layout_columnSpan="2" />
<TextView style="@style/AnswerLetter" android:text="A." />
<TextView style="@style/AnswerChoice" android:text="ascetic" />
<TextView style="@style/AnswerLetter" android:text="B." />
<TextView style="@style/AnswerChoice" android:text="banal" />
<TextView style="@style/AnswerLetter" android:text="C." />
<TextView style="@style/AnswerChoice" android:text="contraption" />
<TextView style="@style/AnswerLetter" android:text="D." />
<TextView style="@style/AnswerChoice" android:text="dominion" />
<TextView style="@style/AnswerLetter" android:text="E." />
<TextView style="@style/AnswerChoice" android:text="enervation" />
</GridLayout> 
```

**样式.xml：**

```
 <style name="AnswerLetter" parent="@android:style/TextAppearance.Medium">
   <item name="android:layout_gravity">right</item>
   <item name="android:paddingLeft">32dp</item>
   <item name="android:textStyle">bold</item>
   <item name="android:gravity">center_vertical|center_horizontal</item>
 </style>
 <style name="AnswerChoice" parent="@android:style/TextAppearance.Large">
   <item name="android:layout_gravity">left</item>
   <item name="android:paddingLeft">32dp</item>
   <item name="android:gravity">left</item>
 </style> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-26T06:57:20.457

您希望所有子视图都增长（高度）以填充额外的空间，但这在 GridLayout 中是不可能的：

> GridLayout 不提供对权重原则的支持，如权重中定义的那样。通常，因此不可能配置 GridLayout 以在多行或多列之间以非平凡的比例分配多余的空间......为了完全控制行或列中的多余空间分配；使用 LinearLayout 子视图来保存相关单元组中的组件。”

尝试将线性布局添加为子视图，并将所有子视图的权重属性设置为相同的值（以便它们平等地展开）。

类似问题： [GridLayout (not GridView) how to stretch all children evenly](https://stackoverflow.com/questions/10016343/gridlayout-not-gridview-how-to-stretch-all-children-evenly)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-31T16:17:30.130

如果我理解正确 - 这种布局可以解决您的问题。GridView 不能拉伸列高，所以可以使用 LinearLayout。我为你做了这个布局，也许它需要一些填充调整

![水平的](../Images/22daa6bc72a122ab3a22f04cda601a9d.png) ![垂直的](../Images/ec86e015b8925763d13b59ccc0ad74be.png)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    android:id="@+id/LinearLayout1"
    android:orientation="vertical"
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent">
    <TextView
        style="@android:style/TextAppearance.Large"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:padding="8dp"
        android:text="Which means: lacking in originality as to be obvious and boring." />
    <LinearLayout
        android:layout_width="match_parent"
        android:layout_weight="1"
        android:gravity="center_vertical"
        android:layout_height="wrap_content">
        <TextView
            style="@style/AnswerLetter"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:gravity="center_vertical"
            android:text="A." />
        <TextView
            style="@style/AnswerChoice"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:gravity="center_vertical"
            android:text="ascetic" />
    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:gravity="center_vertical"
        android:layout_weight="1"
        android:layout_height="wrap_content">
        <TextView
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:gravity="center_vertical"
            style="@style/AnswerLetter"
            android:text="B." />
        <TextView
            style="@style/AnswerChoice"
            android:layout_width="match_parent"
            android:gravity="center_vertical"
            android:layout_height="match_parent"
            android:text="banal" />
    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:gravity="center_vertical"
        android:layout_weight="1"
        android:layout_height="wrap_content">
        <TextView
            style="@style/AnswerLetter"
            android:layout_width="wrap_content"
            android:gravity="center_vertical"
            android:layout_height="match_parent"
            android:text="C." />
        <TextView
            style="@style/AnswerChoice"
            android:layout_width="match_parent"
            android:gravity="center_vertical"
            android:layout_height="match_parent"
            android:text="contraption" />
    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:gravity="center_vertical"
        android:layout_weight="1"
        android:layout_height="wrap_content">
        <TextView
            style="@style/AnswerLetter"
            android:layout_width="wrap_content"
            android:gravity="center_vertical"
            android:layout_height="match_parent"
            android:text="D." />
        <TextView
            style="@style/AnswerChoice"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:gravity="center_vertical"
            android:text="dominion" />
    </LinearLayout>
    <LinearLayout
        android:layout_width="match_parent"
        android:gravity="center_vertical"
        android:layout_weight="1"
        android:layout_height="wrap_content">
        <TextView
            style="@style/AnswerLetter"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:gravity="center_vertical"
            android:text="E." />
        <TextView
            style="@style/AnswerChoice"
            android:layout_width="match_parent"
            android:gravity="center_vertical"
            android:layout_height="match_parent"
            android:text="enervation" />
    </LinearLayout>
</LinearLayout> 
```

# javascript - iFrame 自动高度

> ID：13996262
> 
> 赞同：0
> 
> 时间：2012-12-21T19:45:17.830
> 
> 标签：javascript, iframe

有没有办法用 iFrame 做到这一点并让它适用于所有浏览器？或者我是否必须使用 Javascript。如果有的话，有人可以帮助我吗？

我需要有一个自动高度，以便它根据需要扩展。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T19:57:28.140

我前段时间为我找到了解决方案。它没有 JS，但你必须使用`table`. 这就是我为我使用它的方式，也许您需要根据自己的需要进行一些更改。

```
<head>
<style>
*{margin:0;padding:0}
html, body {height:100%;width:100%;overflow:hidden}
table {height:100%;width:100%;table-layout:static;border-collapse:collapse}
iframe {height:100%;width:100%}

.header {border-bottom:1px solid #000}
.content {height:100%}
</style>
</head>

<table>
  <td class="header"></td>
  <td class="content" width="80%" valign="top"><iframe id="reportframe" src="src.html" frameborder="0"></td>
</table> 
```

# javascript - Javascript 范围 addEventListener 和 this

> ID：13996263
> 
> 赞同：23
> 
> 时间：2012-12-21T19:45:27.110
> 
> 标签：javascript, scope, this, addeventlistener

我是一名 C# 开发人员，正在尝试使用 JavaScript，我正在尝试了解范围 :)

我有以下代码，其中包含`addEventListener`我想使用对象中的字段：

```
(function(window) {

    function Keyboard() {
        this.keys = {};
    }

    Keyboard.prototype.handle_keydown = function(args) {
        this.keys[args.keyCode] = true;
    }

    Keyboard.prototype.listen = function() {
        window.addEventListener('keydown', this.handle_keydown);
    }

    app.util.keyboard = new Keyboard();

})(window); 
```

我想在我的处理程序中使用 keys 数组，但要知道我无法通过使用它来访问，因为这是该上下文中的窗口（正确吗？）。如果我将其更改为

```
app.util.keyboard.keys[args.keyCode] = true; 
```

它有效，但我不确定这是修复它的好方法。

我发现[了这个问题](https://stackoverflow.com/questions/1803195/addeventlistener-and-the-scope-of-this)，看起来很相似，但我不确定如何将它放入我的示例中。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-24T03:32:34.290

一些东西：

*   大多数人会提出类似`var self = this`的建议，因为它既快速又简单。

*   但是`var self = this`并没有将*视图对象*与视图逻辑完全分开，*视图逻辑*来自更正式的 C# 背景并查看您的代码，听起来像是您想做的事情。

*   为了让回调仅在事件触发时执行，请将处理程序包装在一个函数中，以便立即对其进行评估，但仅在`keydown`事件触发时执行（参见下面的代码）。

*   理解 JS 中的作用域：无论执行上下文是什么，也是当前作用域。您的侦听器已添加到 on 的方法（称为`listen`）中`Keyboard.prototype`，但`keydown`实际上触发了该事件`window`-处理程序在与其定义位置不同的上下文中执行；它在调用它的上下文中执行，在这种情况下，`window`它的范围是 ，除非您通过或在定义它时`window`将它绑定到另一个对象。`bind``apply`

在您的代码中，`window`是用户与之交互的视图，并且`Keyboard`是该视图的控制器。在 MVC 模式中，就像您在 C#/.NET 中可能习惯的那样，视图不会告诉自己当事情发生时要做什么，控制器会告诉视图要做什么。因此，如果您要像许多人那样使用分配对控制器的引用`var self = this`，则视图将自行管理——但仅适用于`keydown`事件的特定处理程序。这是不一致的，并且在大型项目中将变得难以管理。

**一个办法：**

```
Keyboard.prototype.listen = function() {
    window.addEventListener('keydown', function(e) {
        this.handle_keydown(e);
    }.bind(this), false);
} 
```

**更好的解决方案：**

```
Keyboard.prototype.view = window;

Keyboard.prototype.listen = function() {
    this.view.addEventListener('keydown', function(e) {
        this.handle_keydown(e);
    }.bind(this), false);
} 
```

**最好的解决方案（直到 ES6`class`准备好）：**

```
// define
function addViewController(view) {

    function ViewController() {

        this.handle_keydown = function(args) {
            // handle keydown events
        };

        this.listen = function() {
            this.view.addEventListener('keydown', function(e) {
                this.handle_keydown(e);
            }.bind(this), false);
        };

        this.view = view;
        return this;

    }

    return new ViewController(view);

}

// implement
var keyboard = addViewController(window);
keyboard.listen(); 
```

*   注意：`.bind()`与 ECMAScript 5+ 兼容；如果您需要旧版浏览器的解决方案，Mozilla 已经发布了一个很好的替代方法来`.bind()`使用`functions`and `.call()`：

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)

**编辑：**这是`keyboard`使用这个新的模块化解决方案的实例化对象的样子：![在此处输入图像描述](../Images/14b060ac11715d5c6891f4d9f6a55825.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-21T19:48:25.227

```
Keyboard.prototype.listen = function() {
    var self = this;
    window.addEventListener('keydown', function(event) {
       self.handle_keydown(event);
       // self is your Keyboard object. You can refer to all your properties from this
    });
} 
```

**此代码如何工作：**

1.  我们正在创建变量 self，它存储对`this`变量的引用。
2.  内部函数是一个闭包，因此它引用了 self。
3.  调用闭包函数时：`this`指向dom对象，而`self`指向keyboard对象。
4.  闭包`event`作为参数调用，我们将其传递给键盘对象的成员函数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T19:56:24.127

怎么样

```
function Keyboard() {
    this.keys = {};
    var self = this;
    this.handle_keydown = function(args) {
        self.keys[args.keyCode] = true;
    }
    this.listen = function() {
        window.addEventListener('keydown', this.handle_keydown);
    }
}
app.util.keyboard = new Keyboard(); 
```

# javascript - iPhone webapp：输入键盘向上移动页面

> ID：13996264
> 
> 赞同：1
> 
> 时间：2012-12-21T19:45:35.533
> 
> 标签：javascript, iphone, html, css, web-applications

我有一个页面，上面有四个输入，当我单击底部两个输入中的任何一个时，整个页面向上移动以为键盘腾出空间，但奇怪的是键盘已经有空间了，但整个页面仍然移动。这是一张图片：

![在此处输入图像描述](../Images/c6eb0ebc3e88aed0b3d57563900867ca.png) ![在此处输入图像描述](../Images/169ec052cf666049b9df85f81f4f8f9d.png)

现在我正在使用事件侦听器将 document.body.scrollTop 设置为 0 onfocus。它有效，但在恢复正常之前仍会向上移动。

我想知道是否有办法解决这个问题并且根本不让它上升。

# javascript - 永远循环并提供增量时间

> ID：13996267
> 
> 赞同：5
> 
> 时间：2012-12-21T19:45:41.180
> 
> 标签：javascript, html, loops, timedelta

我正在编写一个 HTML5 游戏开发 Javascript 框架，我想为用户提供最后一个刻度和当前刻度之间的时间差。

```
setInterval(tick, 16.6666666);

function tick() {
  update();
  draw();
} 
```

这就是我所拥有的，但我想拥有：

```
while (true) {
  /* Calculate delta time */

  tick(dt);
}

function tick(dt) {
  update(dt);
  draw();
} 
```

我试过了，使用 date.getTime(); 计算增量时间，但 Firefox 说脚本崩溃了。显然，无限循环会崩溃。有什么建议可以解决这个问题吗？

我想要一个无限循环，可以用`break`. 我也想通过增量时间，但我知道该怎么做。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-12-22T21:24:27.887

只需使用上次更新的时间维护一个变量，并`tick`自行计算经过时间/增量时间。

```
var lastUpdate = Date.now();
var myInterval = setInterval(tick, 0);

function tick() {
    var now = Date.now();
    var dt = now - lastUpdate;
    lastUpdate = now;

    update(dt);
    render(dt);
} 
```

这是一个 JSBin，虽然我不认为它真的需要...... [http://jsbin.com/okimam/10](http://jsbin.com/okimam/10)

**编辑**：我必须指出，这`setInterval(tick, 0)`并不一定意味着`tick`将立即调用，两次调用之间的间隔为“0ms”。这取决于浏览器。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-02-02T16:21:43.083

这就是我使用的：

```
let lastTick = performance.now()

function tick(nowish) {
  const delta = nowish - lastTick
  lastTick = nowish

  update(delta)
  render(delta)

  window.requestAnimationFrame(tick)
}

window.requestAnimationFrame(tick)
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-03-06T17:21:19.293

想给我两分钱。通常我在我的游戏中使用这个 deltatime 方法：

```
const perfectFrameTime = 1000 / 60;
let deltaTime = 0;
let lastTimestamp = 0;

function start() {
    requestAnimationFrame(update);
}

function update(timestamp) {
    requestAnimationFrame(update);
    deltaTime = (timestamp - lastTimestamp) / perfectFrameTime;
    lastTimestamp = timestamp;

    // YOUR FRAME CODE HERE!

}

start(); 
```

这确保您将拥有完美的 deltatime（就像 Unity deltaTime 一样），因此您可以将时间缩放到帧时间。

# datasource - JasperReports Server：根据用户切换 JDBC 数据源

> ID：13996268
> 
> 赞同：3
> 
> 时间：2012-12-21T19:45:41.493
> 
> 标签：datasource, jasperserver

谁能提供有关如何执行此操作的说明？我设置了几个不同的 JDBC 数据源，并希望能够配置用户使用不同的数据源运行相同的报告。例如，当用户 A 登录并运行报表 A 时，使用数据源 1；当用户 B 登录并运行报表 A 时，使用数据源 2。我使用的是 4.0 版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-06-20T15:24:25.217

我正在使用 JasperReports Server 6.2 版，这是完全可能的，因为用户具有属性，您可以在数据源连接设置中引用这些属性。

例如，您不会为您的数据库主机设置特定的 ip。相反，您将引用用户属性（可以为用户定义属性或从组织或服务器本身继承）：

```
host = {attribute('dbHost')} 
```

或者

```
host = {attribute('dbHost', 'User')} 
```

前者尝试在整个层次结构中查找属性（用户 > 组织 > 父组织 > 服务器）。后者期望找到在用户级别定义的属性。

*您可以在JasperReports Server Admin Guide*的第 4.1 节和这里找到完整的解释：

[http://community.jaspersoft.com/documentation/tibco-jasperreports-server-administrator-guide/v601/attributes-data-source-definitions](http://community.jaspersoft.com/documentation/tibco-jasperreports-server-administrator-guide/v601/attributes-data-source-definitions)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T13:33:26.567

可以通过使用 JasperReports Server 的多租户版本来实现类似的功能。您将拥有 2 个（或更多）租约/公司，其中用户被分配到不同的公司。登录时，用户只会看到属于该公司的报告/资源。这样，您可以为每个公司拥有不同的数据源，在每个公司中设置相同的报告，但每个报告单元将指向各自的数据源。如果您担心报告重复，但将通用报告 JRXML 资源文件放入两个公司都可以看到的通用文件夹（例如在根级别），并让报告单元将这些称为子报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-07T11:35:16.150

JasperReports Server 中没有内置功能可以执行此操作。您需要实现一个 Java 扩展，它可以作为 JDBC 数据源的包装器。此包装器将利用为每个用户选择的现有连接或用户对象本身将所需信息传递给数据源。[本文](http://community.jaspersoft.com/wiki/switching-datasource-based-user)可能适用于早期版本，但可以指导您朝着正确的方向前进。

您还可以在 JasperReports 服务器安装 (jasperserver-install-dir/samples) 中的示例/customDataSource 文件夹中找到有关自定义数据源的更多详细信息

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-29T15:52:26.940

现在似乎有可能，尽管可能不是每个用户，而是每个角色。因此，您可以设置一堆数据源，例如角色管理员、经理、用户、来宾，然后为用户使用适当的数据源。

**[基于用户切换数据源 - JasperSoft Community Wiki](http://community.jaspersoft.com/wiki/switching-datasource-based-user)**

> 此示例说明如何使用 JasperReports Server 中的自定义数据源为每个用户切换 JDBC 数据源。该示例适用于 JasperReports Server 版本 3.5.1
> 
> *\WEB-INF\applicationContext-customds.xml*
> 
> ```
>  <?xml version="1.0" encoding="UTF-8"?>
>  <beans xmlns="http://www.springframework.org/schema/beans"
>         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
>         xsi:schemaLocation="http://www.springframework.org/schema/beans
>         http://www.springframework.org/schema/beans/spring-beans-2.0.xsd">
>      <bean id="SwitcherDS"
>            class="com.jaspersoft.ps.examples.SwitchingDataSourceFactory" >
>          <property name="repositoryService">
>              <ref bean="repositoryService"/>
>          </property>
>          <property name="dataSourceServiceFactories">
>              <ref bean="dataSourceServiceFactories"/>
>          </property>
>      </bean>
>  </beans> 
> ```
> 
> 自定义数据源需要实现 ReportDataSourceService 接口
> 
> ```
>  public void setReportParameterValues(Map parameterValues) {
>      MetadataUserDetails userDetails = (MetadataUserDetails) SecurityContextHolder.getContext().getAuthentication().getPrincipal();
>      String userName = userDetails.getUsername();
>      // obtain a connection based on the username.
>      String dataSourceURI = "/datasources/test2";
>      if (userName.equalsIgnoreCase("jasperadmin")) {
>          dataSourceURI = "/datasources/ds_1";
>      }
>      connection = getRepositoryDatasource(dataSourceURI);
>      try {
>          parameterValues.put(JRParameter.REPORT_CONNECTION,
>                              connection.getDataSource().getConnection());
>      } catch (SQLException sqle){
>          sqle.printStackTrace();
>      }
>  } 
> ```

# windows-runtime - 从 Windows 8 中的桌面应用程序调用 WinRT GestureRecognizer

> ID：13996272
> 
> 赞同：2
> 
> 时间：2012-12-21T19:46:19.980
> 
> 标签：windows-runtime, desktop

GestureRecognizer 位于可从 win8 中的桌面应用程序调用的 API 列表中。 [http://msdn.microsoft.com/en-us/library/windows/desktop/hh920511%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/hh920511%28v=vs.85%29.aspx)

问题是要调用 ProcessDownEvent 我需要传递一个 PointerPoint。而且我只能从 CoreWindow 对象中获取一个……而且我被卡住了，因为很明显，不是“Metro”应用程序，CoreWindow.GetForCurrentThread() 返回 null。

有什么提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T09:47:51.480

桌面上 GestureRecognizer 的等价物是 InteractionContext，你不需要处理 DirectManipulation。

关于它的文档不多，但这里有一个代码示例： http: [//software.intel.com/en-us/articles/comparing-touch-coding-techniques-windows-8-desktop-touch-sample](http://software.intel.com/en-us/articles/comparing-touch-coding-techniques-windows-8-desktop-touch-sample)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T22:37:31.860

显然这是不可能的，根据结合这个

[http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/e65f53b4-cac9-44e3-aa10-cd7955d6a9b3](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/e65f53b4-cac9-44e3-aa10-cd7955d6a9b3)

与此：最低支持的客户端 Windows 8 [仅限 Windows 应用商店应用程序] [http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.input.gesturerecognizer.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.input.gesturerecognizer.aspx)

太糟糕了，GestureRecognizer 与 Metro 应用程序绑定得如此紧密。它基本上只是数学。

选项是遗留 API 或 DirectManipulation，它们的文档记录非常糟糕。对于一家将一切都押在“触摸”上的公司来说，Kinda 说了这么多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T20:17:59.423

PointerPoint 似乎有静态方法来获取某些指针的信息，其中一种方法是：http: [//msdn.microsoft.com/en-us/library/windows/apps/br242063](http://msdn.microsoft.com/en-us/library/windows/apps/br242063)

# asp.net - web.config 出错

> ID：13996274
> 
> 赞同：0
> 
> 时间：2012-12-21T19:46:22.540
> 
> 标签：asp.net, configuration, web-config

我有这个 web.config 错误的问题：

```
Line 44:             ASP.NET to identify an incoming user. 
Line 45:         -->
Line 46:     <authentication mode="Windows"/>
Line 47:     <!--
Line 48:             The <customErrors> section enables configuration 
```

我试图为此找到很多解决方案，但没有发现任何有用的东西。我怎么解决这个问题？错误在第 46 行。更新：这是 web.config 文件：

```
<?xml version="1.0"?>
<!-- 
    Note: As an alternative to hand editing this file you can use the 
    web admin tool to configure settings for your application. Use
    the Website->Asp.Net Configuration option in Visual Studio.
    A full list of settings and comments can be found in 
    machine.config.comments usually located in 
    \Windows\Microsoft.Net\Framework\v2.x\Config 
-->
<configuration>
  <configSections>
    <sectionGroup name="system.web.extensions" type="System.Web.Configuration.SystemWebExtensionsSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
      <sectionGroup name="scripting" type="System.Web.Configuration.ScriptingSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
        <section name="scriptResourceHandler" type="System.Web.Configuration.ScriptingScriptResourceHandlerSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        <sectionGroup name="webServices" type="System.Web.Configuration.ScriptingWebServicesSectionGroup, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35">
          <section name="jsonSerialization" type="System.Web.Configuration.ScriptingJsonSerializationSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="Everywhere"/>
          <section name="profileService" type="System.Web.Configuration.ScriptingProfileServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
          <section name="authenticationService" type="System.Web.Configuration.ScriptingAuthenticationServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
          <section name="roleService" type="System.Web.Configuration.ScriptingRoleServiceSection, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" requirePermission="false" allowDefinition="MachineToApplication"/>
        </sectionGroup>
      </sectionGroup>
    </sectionGroup>
  </configSections>
  <appSettings/>
  <connectionStrings/>
  <system.web>
    <!-- 
            Set compilation debug="true" to insert debugging 
            symbols into the compiled page. Because this 
            affects performance, set this value to true only 
            during development.
        -->
    <compilation debug="true">
      <assemblies>
        <add assembly="System.Core, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add assembly="System.Data.DataSetExtensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
        <add assembly="System.Xml.Linq, Version=3.5.0.0, Culture=neutral, PublicKeyToken=B77A5C561934E089"/>
      </assemblies>
    </compilation>
    <!--
            The <authentication> section enables configuration 
            of the security authentication mode used by 
            ASP.NET to identify an incoming user. 
        -->
    <authentication mode="Windows"/>
    <!--
            The <customErrors> section enables configuration 
            of what to do if/when an unhandled error occurs 
            during the execution of a request. Specifically, 
            it enables developers to configure html error pages 
            to be displayed in place of a error stack trace.

        <customErrors mode="RemoteOnly" defaultRedirect="GenericErrorPage.htm">
            <error statusCode="403" redirect="NoAccess.htm" />
            <error statusCode="404" redirect="FileNotFound.htm" />
        </customErrors>
        -->
    <pages>
      <controls>
        <add tagPrefix="asp" namespace="System.Web.UI" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
        <add tagPrefix="asp" namespace="System.Web.UI.WebControls" assembly="System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      </controls>
    </pages>
    <httpHandlers>
      <remove verb="*" path="*.asmx"/>
      <add verb="*" path="*.asmx" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="*" path="*_AppService.axd" validate="false" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35" validate="false"/>
    </httpHandlers>
    <httpModules>
      <add name="ScriptModule" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </httpModules>
  </system.web>
  <system.codedom>
    <compilers>
      <compiler language="c#;cs;csharp" extension=".cs" warningLevel="4" type="Microsoft.CSharp.CSharpCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <providerOption name="CompilerVersion" value="v3.5"/>
        <providerOption name="WarnAsError" value="false"/>
      </compiler>
      <compiler language="vb;vbs;visualbasic;vbscript" extension=".vb" warningLevel="4" type="Microsoft.VisualBasic.VBCodeProvider, System, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089">
        <providerOption name="CompilerVersion" value="v3.5"/>
        <providerOption name="OptionInfer" value="true"/>
        <providerOption name="WarnAsError" value="false"/>
      </compiler>
    </compilers>
  </system.codedom>
  <!-- 
        The system.webServer section is required for running ASP.NET AJAX under Internet
        Information Services 7.0\.  It is not necessary for previous version of IIS.
    -->
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false"/>
    <modules>
      <remove name="ScriptModule"/>
      <add name="ScriptModule" preCondition="managedHandler" type="System.Web.Handlers.ScriptModule, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </modules>
    <handlers>
      <remove name="WebServiceHandlerFactory-Integrated"/>
      <remove name="ScriptHandlerFactory"/>
      <remove name="ScriptHandlerFactoryAppServices"/>
      <remove name="ScriptResource"/>
      <add name="ScriptHandlerFactory" verb="*" path="*.asmx" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptHandlerFactoryAppServices" verb="*" path="*_AppService.axd" preCondition="integratedMode" type="System.Web.Script.Services.ScriptHandlerFactory, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
      <add name="ScriptResource" preCondition="integratedMode" verb="GET,HEAD" path="ScriptResource.axd" type="System.Web.Handlers.ScriptResourceHandler, System.Web.Extensions, Version=3.5.0.0, Culture=neutral, PublicKeyToken=31BF3856AD364E35"/>
    </handlers>
  </system.webServer>
  <runtime>
    <assemblyBinding appliesTo="v2.0.50727" xmlns="urn:schemas-microsoft-com:asm.v1">
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Extensions" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
      </dependentAssembly>
      <dependentAssembly>
        <assemblyIdentity name="System.Web.Extensions.Design" publicKeyToken="31bf3856ad364e35"/>
        <bindingRedirect oldVersion="1.0.0.0-1.1.0.0" newVersion="3.5.0.0"/>
      </dependentAssembly>
    </assemblyBinding>
  </runtime>
</configuration> 
```

这是错误消息： [http](http://tsnave.brinkster.net/WebSite2/allJokes.aspx) ://tsnave.brinkster.net/WebSite2/allJokes.aspx 希望得到帮助，谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:51:10.890

查看您的错误，您似乎尚未将虚拟目录配置为应用程序。您需要进入 IIS 并选择虚拟目录的属性。转到“主目录”选项卡（如果没记错的话）并将其创建为应用程序。

*更新：这是关于创建应用程序的 MS 说明的链接。*

[http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/1d1c9a73-b4c5-4cfb-ad69-b77fa2e17e19.mspx?mfr=true](http://www.microsoft.com/technet/prodtechnol/WindowsServer2003/Library/IIS/1d1c9a73-b4c5-4cfb-ad69-b77fa2e17e19.mspx?mfr=true)

# c# - 在 .NET 图表的 X 轴中仅使用自定义标签

> ID：13996281
> 
> 赞同：6
> 
> 时间：2012-12-21T19:46:50.337
> 
> 标签：c#, .net, charts, linechart, axis-labels

我正在用 C# 制作一个 X 轴间隔为几周的 .N​​ET 折线图。对于我的项目，我只想使用自定义标签，但现在我仍然想要网格线。有谁知道隐藏默认 X 轴标签同时仍保留自定义标签的方法？

我试过这个：

```
Chart4.ChartAreas[0].AxisX.LabelStyle.Enabled = false; 
```

明显的结果是没有应用标签，这不是我想要做的。

**编辑：** 生成原始行的代码是这样的：

```
Chart4.ChartAreas["ChartArea1"].AxisX.LabelStyle.Format = "M"; 
```

自定义标签的代码是这样的：

```
int month = XValues[0].Month;
var XAxis = Chart4.ChartAreas[0].AxisX;

DateTime StartMonthPos = XValues[0];
DateTime EndPos = new DateTime();

foreach (DateTime Date in XValues)
{
    EndPos = Date;

    if (Date.Month != month)
    {
        Chart4.ChartAreas[0].AxisX.CustomLabels.Add(StartMonthPos.ToOADate(), EndPos.ToOADate(), StartMonthPos.ToString("MMMM"), 1, LabelMarkStyle.None);
        StartMonthPos = Date;
    }

    month = Date.Month;
}

XAxis.CustomLabels.Add(StartMonthPos.ToOADate(), EndPos.ToOADate(), StartMonthPos.ToString("MMMM"), 1, LabelMarkStyle.None); 
```

图表如下所示：![带日期的图表](../Images/8a1859ca247dc85dd3e74518d7df0a8f.png)

它应该是这样的：![没有日期的图表](../Images/bc88b3e41316b5b0e40d64144a9aee21.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T20:03:51.310

好的，我查看了[MSDN](http://msdn.microsoft.com/en-us/library/dd456628%28v=vs.100%29.aspx)`Label`上的控件。为了使自定义标签出现在普通标签的位置，我将参数设置为，替换默认标签行。自定义行的最终代码如下所示：`RowIndex``0`

```
 int month = XValues[0].Month;
    var XAxis = Chart4.ChartAreas[0].AxisX;

    DateTime StartMonthPos = XValues[0];
    DateTime EndPos = new DateTime();

    foreach (DateTime Date in XValues)
    {
        EndPos = Date;

        if (Date.Month != month)
        {
           Chart4.ChartAreas[0].AxisX.CustomLabels.Add(StartMonthPos.ToOADate(),
              EndPos.ToOADate(), StartMonthPos.ToString("MMMM"), 0, LabelMarkStyle.None);
            StartMonthPos = Date;
        }

        month = Date.Month;
    }

    XAxis.CustomLabels.Add(StartMonthPos.ToOADate(), EndPos.ToOADate(),
          StartMonthPos.ToString("MMMM"), 0, LabelMarkStyle.None); 
```

# excel - 在网络驱动器上运行批处理文件

> ID：13996287
> 
> 赞同：1
> 
> 时间：2012-12-21T19:47:59.360
> 
> 标签：excel, vba

我正在尝试编写一个 VBA 代码来运行位于网络驱动器中的批处理文件，这就是我现在所拥有的：

```
Call Shell(Environ$("COMSPEC") & " /c \\networkdrive\c$\Test\Test.bat", vbNormalFocus) 
```

当我运行脚本时，它会弹出命令提示符，但它无法访问网络驱动器，因为 cmd 无法识别合成器 \networkdrive\c$\Test... 有谁知道如何处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:22:26.827

试试下面的，它对我有用。

`Call Shell(Environ$("COMSPEC") & " /c start \\networkdrive\c$\Test\Test.bat", vbNormalFocus)`

问题是控制台仍然打开......

# php - 获取数组 php

> ID：13996290
> 
> 赞同：0
> 
> 时间：2012-12-21T19:48:04.087
> 
> 标签：php, arrays, fetch

我正在使用以下代码从 PHP 中的表中获取数据。如何将所有行直接复制到数组中？我尝试`fetch_array()`了，`fetch()`但它也没有成功。

```
$stmt = $this->db->prepare($sql); 
$stmt->execute();
$stmt->bind_result($aID, $sID);

while ($stmt -> fetch()) { 
    echo $aID . " ". $sID . "<br>";
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:51:07.723

如果使用`PDO`

这`Fetch_column`就是你要找的

```
$stmt = $this->db->prepare($sql); 
        $stmt->execute();
        $stmt->bind_result($aID, $sID);
    $Arrays = $stmt ->fetchAll(PDO::FETCH_COLUMN); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T19:49:49.753

> 如何将所有行直接复制到数组中？

*   MySQLi -[`mysqli_fetch_all()`](http://php.net/manual/en/mysqli-result.fetch-all.php)
*   PDO - [fetchAll()](http://php.net/manual/en/pdostatement.fetchall.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T19:50:44.353

```
$array = $stmt->fetchAll(PDO::FETCH_ASSOC); 
```

# wordpress - 在两层导航中订购子导航

> ID：13996295
> 
> 赞同：0
> 
> 时间：2012-12-21T19:48:32.730
> 
> 标签：wordpress

我在 Wordpress 自定义主题中做了一个两层导航。它工作得很好，但有谁知道是否可以手动更改它的顺序？

这是我的自定义标头中的代码：

```
<div id="secNav">

<?php if($post->post_parent)  

$children = wp_list_pages("title_li=&child_of=".$post->post_parent."&echo=0"); else  
$children = wp_list_pages("title_li=&child_of=".$post->ID."&echo=0");  

if ($children && is_page()) { ?>  
<ul id="subnav"> 
<span class="subDescript"><?php echo $parent_title = get_the_title($post->post_parent); ?>         Section:</span>   
<?php echo $children; ?>
</ul>  
<?php } else { ?>  
<?php } ?>  
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:01:52.877

你可以使用`sort_column`参数`wp_list_pages`

```
<?php wp_list_pages('sort_column=menu_order'); ?> 
```

将其设置为`menu_order`将允许您通过在页面编辑器中指定排序顺序（在页面属性下）来使用自定义排序

# objective-c - 在 UIToolbar 上显示按钮的选择

> ID：13996298
> 
> 赞同：0
> 
> 时间：2012-12-21T19:48:40.647
> 
> 标签：objective-c, ios, cocoa-touch, uitoolbar

我在 uitoolbar 上有 4 个按钮，并且我有所有四个按钮的图像，仅用于默认状态。在选择时，我需要将其显示为已选择。现在我的问题是，当没有选定状态的图像时，如何将按钮显示为选定状态。我想显示下图中提到的按钮。怎么做。![在此处输入图像描述](../Images/d5df14d4164519e8b3d03168d4751589.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T02:22:08.427

您应该寻找标志：“forState”。我会看起来像这样：

```
forState:UIControlStateNormal 
```

当您的选项卡被选中时，您应该将状态更改为“UIControlStateSelected”。

# android - 意图和字符串数组

> ID：13996300
> 
> 赞同：3
> 
> 时间：2012-12-21T19:48:55.443
> 
> 标签：android

我需要将一个字符串数组从 AlarmReceiver.class 传递给 Notify.class，但该字符串始终为“null”。现在，AlarmReceiver 中的意图有问题吗？

```
public class AlarmReceiver extends BroadcastReceiver {
public void onReceive(Context context, Intent intent) {
[...]
Intent notificationIntent = new Intent("com.example.myapp", null, context, Notify.class);
        notificationIntent.putExtra("notify", not1[x]);
        PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0); 
```

通知班级：

```
@Override
    public void onCreate(Bundle savedInstanceState){ 
      super.onCreate(savedInstanceState);
Intent notificationIntent = getIntent();
      String[] message = notificationIntent.getStringArrayExtra("notify");
Toast toast6=Toast.makeText(this,""+message,Toast.LENGTH_LONG);
        toast6.show(); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T19:50:45.537

您正在使用两种不同的方法...

1.  在这里，您正在使用一个字符串：

    ```
    notificationIntent.putExtra("notify", not1[x]); // Pass one String 
    ```

    您应该阅读以下内容`"notify"`：

    ```
    String message = notificationIntent.getStringExtra("notify"); 
    ```

2.  如果要传递字符串数组，请使用：

    ```
    notificationIntent.putExtra("notify", not1); // Pass array of Strings 
    ```

    您应该阅读以下内容：

    ```
    String[] message = notificationIntent.getStringArrayExtra("notify"); 
    ```

你看得到差别吗？

# python - Python - GroupBy 对象的滚动函数

> ID：13996302
> 
> 赞同：73
> 
> 时间：2012-12-21T19:49:00.067
> 
> 标签：python, pandas, pandas-groupby, rolling-computation, rolling-sum

我有一个`grouped`类型的时间序列对象`<pandas.core.groupby.SeriesGroupBy object at 0x03F1A9F0>`。`grouped.sum()`给出了预期的结果，但我无法让 rolling_sum 使用该`groupby`对象。有没有办法将滚动功能应用于`groupby`对象？例如：

```
x = range(0, 6)
id = ['a', 'a', 'a', 'b', 'b', 'b']
df = DataFrame(zip(id, x), columns = ['id', 'x'])
df.groupby('id').sum()
id    x
a    3
b   12 
```

但是，我想要类似的东西：

```
 id  x
0  a  0
1  a  1
2  a  3
3  b  3
4  b  7
5  b  12 
```

* * *

## 回答 #1

> 赞同：123
> 
> 时间：2016-12-16T19:31:54.603

对于遇到这个老问题的 Google 员工：

关于@kekert 对@Garrett 使用新答案的评论

```
df.groupby('id')['x'].rolling(2).mean() 
```

而不是现在弃用的

```
df.groupby('id')['x'].apply(pd.rolling_mean, 2, min_periods=1) 
```

奇怪的是，新的 .rolling().mean() 方法似乎返回了一个多索引系列，首先由 group_by 列索引，然后是索引。然而，旧方法将简单地返回由原始 df 索引单独索引的系列，这可能不太有意义，但使得将该系列作为新列添加到原始数据框中非常方便。

所以我想我已经找到了一个使用新 rolling() 方法的解决方案，并且仍然可以正常工作：

```
df.groupby('id')['x'].rolling(2).mean().reset_index(0,drop=True) 
```

这应该给你系列

```
0    0.0
1    0.5
2    1.5
3    3.0
4    3.5
5    4.5 
```

您可以将其添加为列：

```
df['x'] = df.groupby('id')['x'].rolling(2).mean().reset_index(0,drop=True) 
```

* * *

## 回答 #2

> 赞同：74
> 
> 时间：2012-12-21T23:41:42.507

### 累计和

为了直接回答这个问题，cumsum 方法将产生所需的系列：

```
In [17]: df
Out[17]:
  id  x
0  a  0
1  a  1
2  a  2
3  b  3
4  b  4
5  b  5

In [18]: df.groupby('id').x.cumsum()
Out[18]:
0     0
1     1
2     3
3     3
4     7
5    12
Name: x, dtype: int64 
```

### 每组熊猫滚动功能

更一般地说，任何滚动功能都可以按如下方式应用于每个组（使用@kekert 评论的新 .rolling 方法）。请注意，返回类型是多索引系列，这与以前（已弃用）的 pd.rolling_* 方法不同。

```
In [10]: df.groupby('id')['x'].rolling(2, min_periods=1).sum()
Out[10]:
id
a   0   0.00
    1   1.00
    2   3.00
b   3   3.00
    4   7.00
    5   9.00
Name: x, dtype: float64 
```

要应用每组滚动功能并以原始数据帧顺序接收结果，应使用转换：

```
In [16]: df.groupby('id')['x'].transform(lambda s: s.rolling(2, min_periods=1).sum())
Out[16]:
0    0
1    1
2    3
3    3
4    7
5    9
Name: x, dtype: int64 
```

* * *

### 不推荐使用的方法

作为参考，以下是现已弃用的 pandas.rolling_mean 的行为方式：

```
In [16]: df.groupby('id')['x'].apply(pd.rolling_mean, 2, min_periods=1)
Out[16]: 
0    0.0
1    0.5
2    1.5
3    3.0
4    3.5
5    4.5 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-09-27T19:22:02.147

这是另一种泛化良好并使用熊猫[扩展](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.expanding.html#pandas.DataFrame.expanding)方法的方法。

它非常高效，也非常适用于具有固定窗口的[滚动窗口计算](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.DataFrame.rolling.html#pandas.DataFrame.rolling)，例如时间序列。

```
# Import pandas library
import pandas as pd

# Prepare columns
x = range(0, 6)
id = ['a', 'a', 'a', 'b', 'b', 'b']

# Create dataframe from columns above
df = pd.DataFrame({'id':id, 'x':x})

# Calculate rolling sum with infinite window size (i.e. all rows in group) using "expanding"
df['rolling_sum'] = df.groupby('id')['x'].transform(lambda x: x.expanding().sum())

# Output as desired by original poster
print(df)
  id  x  rolling_sum
0  a  0            0
1  a  1            1
2  a  2            3
3  b  3            3
4  b  4            7
5  b  5           12 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-12-21T23:07:35.800

我不确定机制，但这有效。注意，返回的值只是一个 ndarray。我认为您可以以这种方式应用任何累积或“滚动”功能，它应该具有相同的结果。

我已经用它进行了测试`cumprod`，`cummax`并且`cummin`它们都返回了一个 ndarray。我认为 pandas 足够聪明，可以知道这些函数返回一个系列，因此该函数被用作转换而不是聚合。

```
In [35]: df.groupby('id')['x'].cumsum()
Out[35]:
0     0
1     1
2     3
3     3
4     7
5    12 
```

编辑：我很好奇这种语法确实返回了一个系列：

```
In [54]: df.groupby('id')['x'].transform('cumsum')
Out[54]:
0     0
1     1
2     3
3     3
4     7
5    12
Name: x 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-10-01T07:02:36.910

如果您需要将分组滚动功能重新分配回原始数据框，同时保持顺序和组，您可以使用该`transform`功能。

```
df.sort_values(by='date', inplace=True)
grpd = df.groupby('group_key')
#using center=false to assign values on window's last row
df['val_rolling_7_mean'] = grpd['val'].transform(lambda x: x.rolling(7, center=False).mean()) 
```

# c# - 通过组合框从数据库中删除行

> ID：13996311
> 
> 赞同：1
> 
> 时间：2012-12-21T19:49:56.790
> 
> 标签：c#, visual-studio

我有一个组合框，它正在查看我的数据库并向我显示用户的姓名，除此之外，我还想查看 dID，我发现这项任务很难实现。我有两个表，所以我假设我必须重复这个 SQL 语句。请查看此代码！

总而言之，我想要实现的只是从数据库中删除用户！会员个人信息表格table_1和会员支付金额和年份dID信息表格表格2！一个删除命令删除 table_1 和 table_2 中成员信息的一行。

欢迎任何其他方法或想法！

```
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Data.SqlClient;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace CemiyetAidatSistem
{
    public partial class DeleteUser : Form
    {
        String conStr ="My connection string";
        public UyeSil()
        {
            InitializeComponent();
        }
        SqlDataAdapter da;
        DataSet ds = new DataSet();
        private void UserDelete_Load(object sender, EventArgs e)
        {
            SqlConnection con = new SqlConnection(conStr);
            SqlCommand cmd = con.CreateCommand();
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = "SELECT FullName FROM Members";
            da = new SqlDataAdapter(cmd);
            da.Fill(ds, "Members");
            cmbUyeSil.DataSource = ds.Tables["Members"];
            cmbUyeSil.DisplayMember = "DistinctID";
            cmbUyeSil.ValueMember = "FullName";

        }

        private void button1_Click(object sender, EventArgs e)
        {
            SqlConnection con = new SqlConnection(conStr);
            SqlCommand cmd = con.CreateCommand();
            cmd.CommandType = CommandType.Text;
            cmd.CommandText = "DELETE FROM Members WHERE ID = '" + cmbUyeSil.SelectedValue + "'";
            da = new SqlDataAdapter(cmd);
            con.Open();
            cmd.ExecuteNonQuery();
            con.Close();
            MessageBox.Show(" Member with dID \"" + cmbUyeSil.SelectedValue + "\"is deleted");

        }

        private void btnClose_Click(object sender, EventArgs e)
        {
            this.Close();
        }

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:56:04.067

如果您有[级联删除](http://msdn.microsoft.com/en-us/library/aa933119%28v=sql.80%29.aspx)，那么当您删除用户时，这将导致表 2 中的行也被删除

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:23:56.460

好的，belxandre 是完全正确的；你不应该删除这些记录。您应该能够将它们标记为非活动或其他东西。话虽如此，您可以创建一个执行删除操作的 SqlCommand，向其中添加必要的参数，然后在您的 DataAdapter 上调用它：

```
SqlCommand delcomm = new SqlCommand();
delcomm.CommandType = CommandType.StoredProcedure; //I'd do it with an sp, up to you
delcomm.CommandText = "sp_delUser";
SqlParameter delParam = new SqlParameter("@dID", SqlDbType.Int);//I'm assuming this is the column you need and the right datatype
delcomm.Parameters.Add(delParam);
da.DeleteCommand = delcomm;
da.AcceptChangesDuringUpdate = false;
da.Update(UserTable);//you'll need to set up a DataTable with the right data structure
UserTable.AcceptChanges(); 
```

这完全不在我的脑海中。你可能需要稍微摆弄一下，但如果我理解你的问题，这通常是你需要做的。按照建议对表进行级联删除也是一个好主意。

# excel - 将 For/Next 循环更改为变体数组

> ID：13996312
> 
> 赞同：0
> 
> 时间：2012-12-21T19:49:57.563
> 
> 标签：excel, vba

我想让我的代码运行得更快。我相信正确的技术是使用变体数组。您能否提供一个示例，说明如何将以下代码转换为更高效的 Variant Array？谢谢！

```
Dim i As Long
LastRow = Range("A" & Rows.Count).End(xlUp).Row

For i = 2 To LastRow

    If Range("S" & i) > 0.0014 Then
        Range("Z" & i, "AA" & i).Copy
        Range("AC" & i, "AD" & i).PasteSpecial xlPasteValues
    End If

Application.ScreenUpdating = False
Next i 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:49:22.030

这是一个例子：

```
Dim i As Long
Dim checkedValues 'Declare a variant
Application.ScreenUpdating = False
lastrow = Range("S" & Rows.Count).End(xlUp).Row
'Get range you're checking into the array
checkedValues = Range("S2:S" & lastrow)
For i = 1 To UBound(checkedValues)
    If checkedValues(i, 1) > 0.0014 Then
        'Transfer values directly instead of copy paste
        Range("AC" & i + 1, "AD" & i + 1).value = Range("Z" & i + 1, "AA" & i + 1).value
    End If
Next i
Application.ScreenUpdating = True 
```

如果您想做更多的数组工作，您需要创建一个包含实际更新内容和更新内容的数组，然后将更新后的数组的值传输回单元格。如果速度是一个非常重要的问题，您可能需要进行调查，看看这是否会改善它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T20:53:40.103

这是一种替代方法，只需将公式粘贴到指定范围内，然后将它们作为值复制：

```
Sub FastPaste()
Dim LastRow As Long

LastRow = Range("A" & Rows.Count).End(xlUp).Row
With Range("AC2" & ":AD" & LastRow)
    .FormulaR1C1 = "=IF(RC19>0.0014,RC[-3],"""")"
    .Copy
    .PasteSpecial (xlPasteValues)
End With
End Sub 
```

# vb.net - 连接两个数据表——数据集不支持 System.Nullable<>

> ID：13996315
> 
> 赞同：1
> 
> 时间：2012-12-21T19:50:25.943
> 
> 标签：vb.net, linq, datatable, dataset, extension-methods

我正在`JOIN`输入两个 DataTales（通过解析两个 Excel 电子表格填充）。这些 Excel 电子表格包含的列`TOTAL_DOLLARS`并不`TOTAL_UNITS`总是有值。因此，当我尝试运行时，我的程序会抛出以下错误`query.CopyToDataTable()`

`DataSet does not support System.Nullable<>`

```
Dim query = From c In dtDollars.AsEnumerable() _
   Join r In dtUnits.AsEnumerable() _
   On c.Field(Of String)("UPC") Equals r.Field(Of String)("UPC") _
   Select _
   New _
   With {.UPC = r.Field(Of String)("UPC"), .WIC_NUMBER = c.Field(Of String)("WIC_NUMBER"), _
   .WAG_ITEM_DESC = c.Field(Of String)("WAG_ITEM_DESC"), _
   .WAG_BRAND = c.Field(Of String)("WAG_BRAND"), .UOM = c.Field(Of String)("UOM"), _
   .GSK_PROMO_GRP = c.Field(Of String)("GSK_PROMO_GRP"), _
   .TOTAL_DOLLARS = c.Field(Of Decimal?)("TOTAL_DOLLARS"), _
   .TOTAL_UNITS = r.Field(Of Integer?)("TOTAL_UNITS"), _
   .WKND_DATE = c.Field(Of DateTime)("WKND_DATE")}

    myResultTable = query.CopyToDataTable() 
```

我能做些什么来解决这个问题？有没有办法可以将这些列的默认值设置为 0 if = `DBNull.Value`？

这是我正在使用的`Modules`方法：`Extensions``CopyToDataTable()`

```
Public Module CustomLINQtoDataSetMethods
    <Extension()> _
    Public Function CopyToDataTable(Of T)(ByVal source As IEnumerable(Of T)) As DataTable
        Return New ObjectShredder(Of T)().Shred(source, Nothing, Nothing)
    End Function

    <Extension()> _
    Public Function CopyToDataTable(Of T)(ByVal source As IEnumerable(Of T), ByVal table As DataTable, ByVal options As LoadOption?) As DataTable
        Return New ObjectShredder(Of T)().Shred(source, table, options)
    End Function

End Module

Module DataSetLinqOperators
  ''' <summary>
  ''' Creates a <see cref="DataTable"/> that contains the data from a source sequence.
  ''' </summary>
  ''' <remarks>
  ''' The initial schema of the DataTable is based on schema of the type T. All public property and fields are turned into DataColumns.
  ''' If the source sequence contains a sub-type of T, the table is automatically expanded for any addition public properties or fields.
  ''' </remarks>
  <Extension()> _
  Public Function ToDataTable(Of T)(ByVal source As IEnumerable(Of T)) As DataTable
    Return New ObjectShredder(Of T)().Shred(source, Nothing, Nothing)
  End Function

  ''' <summary>
  ''' Loads the data from a source sequence into an existing <see cref="DataTable"/>.
  ''' </summary>
  ''' <remarks>
  ''' The schema of <paramref name="table" /> must be consistent with the schema of the type T (all public property and fields are mapped to DataColumns).
  ''' If the source sequence contains a sub-type of T, the table is automatically expanded for any addition public properties or fields.
  ''' </remarks>
  <Extension()> _
  Public Function LoadSequence(Of T)(ByVal source As IEnumerable(Of T), ByVal table As DataTable, ByVal options As System.Nullable(Of LoadOption)) As DataTable
    If table Is Nothing Then
      Throw New ArgumentNullException("table")
    End If
    Return New ObjectShredder(Of T)().Shred(source, table, options)
  End Function
End Module 
```

此外，我正在使用[ObjectShredder](https://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CDQQFjAA&url=http://msdn.microsoft.com/en-us/library/bb669096.aspx&ei=Kb3UUJnMG8vD0AW90IDQBA&usg=AFQjCNFjeVzDJ4AK5ySDiboe4islrevfdw&sig2=-kTi8jkkv4ecCLtcBzdotQ&bvm=bv.1355534169,d.d2k)类。

任何帮助深表感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T22:47:09.657

试试这个：

```
.TOTAL_DOLLARS = If( (c.Field(Of Decimal?)("TOTAL_DOLLARS")).HasValue, _
                     (c.Field(Of Decimal?)("TOTAL_DOLLARS"), 0)) 
```

这有点尴尬，但它应该工作。

# java - PagerActivity 中图像视图中的图像大小

> ID：13996317
> 
> 赞同：0
> 
> 时间：2012-12-21T19:50:31.960
> 
> 标签：java, android, universal-image-loader

我正在使用这个项目[universal-image-loader](https://github.com/nostra13/Android-Universal-Image-Loader)。我想知道如何获得pagerActivity中显示的图像大小？

我在 ImagePagerActivity.java 中添加了这两行（在 imageLoader.displayImage(...){} 之后）

```
imageView.getDrawable().getIntrinsicHeight()
imageView.getDrawable().getIntrinsicWidth() 
```

但结果是 0 和 0。

我还尝试在 ImagePagerActivity.java 中使用它（我在 ImageLoader 中将 getImageSizeScaleTo 更改为 public）：

```
ImageSize targetSize = imageLoader.getImageSizeScaleTo(imageView); 
```

但尺寸始终为 width:540 height:960 而我的图像尺寸不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:09:14.370

您可以使用以下方法获取图像大小

```
 // Getting the size of the Image inside the ImageView and The size will differ based
 **// on the image you placed inside the ImageView

  ImageView imageObj = (ImageView)findViewById(R.id.image_view_id);
  int imageWidth = imageObj.getWidth();
  int imageHeight = imageObj.getHeight(); 
```

## 或者它可能会有所帮助，你可以试试这个：

```
 int imageWidth = imageObj.getMeasuredWidth();
  int imageHeight = imageObj.getMeasuredHeight(); 
```

# grails - 无法解析 Grails 项目中的符号

> ID：13996326
> 
> 赞同：1
> 
> 时间：2012-12-21T19:51:13.607
> 
> 标签：grails, groovy, spring-security

我在这个 Grails 项目中使用 Spring Security 核心。我收到错误“密码”无法在 BootStrap 类中解决。

我有这个域类：

```
class Person {

transient springSecurityService

String realName
String username
String password
boolean enabled
boolean accountExpired
boolean accountLocked
boolean passwordExpired

static constraints = {
    username blank: false, unique: true
    password blank: false
}

static mapping = {
    password column: '`password`'
}

Set<Authority> getAuthorities() {
    PersonAuthority.findAllByPerson(this).collect { it.authority } as Set
}

def beforeInsert() {
    encodePassword()
}

def beforeUpdate() {
    if (isDirty('password')) {
        encodePassword()
    }
}

protected void encodePassword() {
    password = springSecurityService.encodePassword(password)
}
} 
```

这是我的 BootsStrap 类：

```
class BootStrap {

def init = { servletContext ->

    if (!Person.count()) {
        createData()
    }
}
def destroy = {
}

private void createData() {
    def userRole = new Authority(authority: 'ROLE_USER').save()

    [harry: 'Harry Brock'].each { userName, realName ->
        def user = new Person(username: userName, realName: realName, password: password, enabled: true).save()
        PersonAuthority.create user, userRole, true
    }
}
} 
```

我正在使用 Grails 2.2 和 Spring Security Core 1.2.7.3

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:55:19.137

在 BootStrap 中，您使用的是一个未定义的变量，名为`password`.

我在问题所在的行上方添加了一条评论：

```
[harry: 'Harry Brock'].each { userName, realName ->
  // userName and realName are closure parameters, enabled is always true.. but where is password defined?
  def user = new Person(username: userName, realName: realName, password: password, enabled: true).save()
  PersonAuthority.create user, userRole, true
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T04:10:24.683

实例化 User 对象时，所有这些属性都不能为空：

```
String password        //apparently it missed, but the other 3 are also needed
boolean accountExpired
boolean accountLocked
boolean passwordExpired 
```

因此，像这样保存 userInstance：

```
def user = new Person(username: userName, realName: realName, password: password, enabled: true, accountExpired:false, accountLocked:false, passwordExpired:false).save() 
```

或者，您可以在 beforeInsert() 中放置布尔属性以简化代码：

```
def beforeInsert() {
    enabled=true
    accountExpired=false
    accountLocked=false
    passwordExpired=false
    encodePassword()
} 
```

# javascript - jQuery 小部件没有“扩展”方法

> ID：13996330
> 
> 赞同：8
> 
> 时间：2012-12-21T19:51:43.303
> 
> 标签：javascript, jquery, wordpress, jquery-ui, typeerror

我正在开发一个包含许多 jQuery 和 jQuery UI 相关插件的 Wordpress 站点。一切似乎都运行良好，但是当我们将整个站点转移到新域名时，我开始在 Chrome 控制台中看到以下错误：

未捕获的类型错误：对象函数 (b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-" +b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[ e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a .extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b ].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])} 没有方法“扩展”

这是 jQuery UI 1.9.3 中似乎导致此问题的行：

```
this.options = $.widget.extend( {},
this.options,
this._getCreateOptions(),
options ); 
```

无论我尝试做什么，我似乎都无法克服这一点。我正在使用正确的方法（或者我已经阅读过）通过使用 wp_enqueue_script() 并将 jquery 设置为 jquery-ui 的依赖项来添加脚本，并查看 HTML，jQuery 确实在 jQuery UI 之前加载。

如果有人对可能发生的事情有任何想法，我将不胜感激，这让我发疯了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-21T19:59:42.843

这不是您问题的答案，但为了说明，有时看起来您遇到了 jQuery 错误，而实际上您的自定义 javascript 出现错误。

如果您使用的是 Chrome，您可以打开控制台（工具 > Javascript 控制台）并旋转打开出现错误的小箭头。这将向您显示导致错误的所有代码行。

见图片：

![使用控制台查找线路错误](../Images/e521a53026a303ee81c428fb963b958c.png)

通常，如果您查看列表，它将导致除 jQuery 之外的另一个 javascript。如果您单击右侧的黑色链接（即activity.php），如果它是javascript，它将打开违规行。

另一个问题（如果您使用的是 Wordpress）是您可能会加载 jQuery 两次。听起来您这样做是正确的，但是，您的一个插件可能没有。

**编辑** 您正在运行什么版本的 jQuery（抱歉误读了 jquery ui）

来自文档：Ninja Forms 使用 WordPress 附带的 jQuery（javascript 库）版本。这意味着如果您使用外部 jQuery 文件，或者另一个插件正在加载自己的 jQuery 版本，则可能会出现错误。例如，如果您使用 WordPress 3.3 或更高版本，Ninja Forms 预计您的站点将使用 jQuery 1.7 版本。如果您有一个主题或插件将其更改为早期版本的 jQuery，Ninja Forms 可能无法正常工作。

# mysql - 如何在 bash 脚本中转义“返回”函数

> ID：13996333
> 
> 赞同：5
> 
> 时间：2012-12-21T19:51:53.603
> 
> 标签：mysql, bash, shell

下面的脚本将一堆 csv 文件加载到 mysql 数据库中。我试图在循环中执行这个函数，但是名为 return 的 mysql 表字段导致脚本认为它应该执行函数 return。

return 周围的 ` 是为 mysql 转义它，它是一个 mysql 关键字。

```
for f in *.txt; 
do 
 mysql -uroot -ppassword -e "LOAD DATA INFILE '$f' INTO TABLE info FIELDS TERMINATED BY ',' LINES TERMINATED BY '\n' (`return`,`id`,`field1`,`field2`);"; 
done 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T20:05:10.343

这是mysql中使用反引号字符的愚蠢引用约定。你可以使用单引号代替，即`'`，即`'return'`？

反引号的意思是“在 shell 的当前命令中执行命令替换”，所以它正在尝试运行命令`return`。

如果你不能使用`'return'`，那么你可以逃避所有的反引号，比如

```
\`return\` 
```

IHTH

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T20:04:26.033

发生这种情况是因为由 ` 包围的字符串是由 bash 执行的。

试试这个：

```
echo '` date `' # this output the string ` date `
echo "` date `" # this output current time 
```

但是你不能用一个单引号来改变双引号，因为你需要`$f`被变量所束缚。所以用`\`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T20:05:49.563

简单地避开你的反引号：

```
 mysql -uroot -ppassword -e "LOAD DATA INFILE '$f' INTO TABLE info FIELDS TERMINATED BY ',' LINES TERMINATED BY '\n' (\`return\`,\`id\`,\`field1\`,\`field2\`);"; 
```

# php - （部分）菜鸟的PHP5解析字符串帮助

> ID：13996337
> 
> 赞同：0
> 
> 时间：2012-12-21T19:51:57.927
> 
> 标签：php, html-parsing

我在 html 页面上有一个独特的项目。我已经能够解析大部分项目，因为它们没有使用组合处理来解析一个项目。

我有一个棘手的项目要解析：
- 它是一个列表项，在 DIV 内，它是唯一的 (ld_sec_col)
- UL 类不是唯一的 (ld_details_list)
- 它不是特定的列表项编号（例如，不是第三个或第四，那）总是在变化
- 它是在独特的文本之后发现的
- 我的问题是结合用于获取它的技术，没有错误，我脑死了。

```
Here is the snippet:
#####
   <div class="ld_sec_col">
    <ul class="ld_details_list">
    <li><span class="ld_lbl">Exterior:</span> Brick</li>
    <li><span class="ld_lbl">Living style:</span> Bungalow</li>
    <li><span class="ld_lbl">Property type:</span> Detached</li>
    <li><span class="ld_lbl">Sewer system:</span> Sewers</li>                   </ul>
    </div>
### End Snippet ### 
```

所以在这里我试图找到唯一的文本，（**属性类型**：）并抓住紧随其后的文本：

我显然在滥用 FIND。我被简化为反复试验。但我想在圣诞节前完成这个脚本。这是最后一个项目......

```
### START PHP CODE ###

$tempproptype = trim($entry->find('.ld_sec_col', 0)->plaintext);
if(preg_match('/^Property type: (.*),/', $tempproptype, $matches))
$propertytype = $matches[1];

### ENDPHP CODE ### 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T23:32:57.530

试试 preg_match('/属性类型:</span>([Az]*)/', $tempproptype, $matches)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-05T22:04:26.503

这就是我最终的结果：

```
$subpropertytypehtml = $html->find('.ld_details_list', 1)->find('li');          
        for($i=0;$i<count($subpropertytypehtml)-1;$i++)
        {
            if(preg_match('/Property type:/', $subpropertytypehtml[$i], $matches))
            {
                $subproptypehtml = trim($html->find('.ld_details_list', 1)->find('li', $i)->plaintext);
                $expsubproptypehtml=explode('Property type:',$subproptypehtml);
                $subpropertytype=$expsubproptypehtml[1];
                break;
            }               
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T22:32:26.770

替换正则表达式

```
'/^Property type: (.*),/' 
```

和

```
'~Property type:</span>(.*)</li>~Ui' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T23:24:04.040

我认为这样的事情应该可行：

```
$html = <<<HTML
<div class="ld_sec_col">
<ul class="ld_details_list">
<li><span class="ld_lbl">Exterior:</span> Brick</li>
<li><span class="ld_lbl">Living style:</span> Bungalow</li>
<li><span class="ld_lbl">Property type:</span> Detached</li>
<li><span class="ld_lbl">Sewer system:</span> Sewers</li>                   </ul>
</div>
HTML;

$dom = new DOMDocument();
$dom->loadHTML($html);
$xpath = new DOMXPath($dom);
$propertytype = null;

if ($node = $xpath->query("//ul[@class='ld_details_list']/li[contains(.,'Property type:')]")->item(0)) {
    if(preg_match('/^Property type:(.*)$/', $node->nodeValue, $matches)) {
        $propertytype = trim($matches[1]);
    }
} 
```

# php - PHP中的哈希问题

> ID：13996339
> 
> 赞同：0
> 
> 时间：2012-12-21T19:52:07.477
> 
> 标签：php, hash

> **可能重复：**
> [最安全的散列方法是什么？(PHP)](https://stackoverflow.com/questions/4291862/what-is-the-most-secure-hashing-method-php)

我知道 PHP 中没有 100% 安全的散列系统，但是现在你能告诉我下面的列表中最好的散列是什么，或者 PHP 中的任何其他内容是什么？

```
<?php
 $password = ‘SomePassword!’;
 echo ‘md5: ‘ . hash(‘md5’, $password) . ‘&lt;br />’;
 echo ‘sha1: ‘ . hash(‘sha1’, $password) . ‘&lt;br />’;
 echo ‘sha512: ‘ . hash(‘sha512’, $password) . ‘&lt;br />’;
 echo ‘whirlpool: ‘ . hash(‘whirlpool’, $password) . ‘&lt;br />’;
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:11:22.087

bCrypt 可能是目前最好的解决方案。

# c++ - &vec[0] 是否为 std::vector vec 定义了行为？

> ID：13996340
> 
> 赞同：8
> 
> 时间：2012-12-21T19:52:08.643
> 
> 标签：c++, c++11

我经常看到这个：

```
std::vector<Something> vec;
do_something_with_vec(vec);
Something *arr=&vec[0];
do_something_that_needs_carray(arr); 
```

我的意思是，一个向量可能会在内部使用一个数组，所以我明白为什么会这样，我只是想知道这是否是定义的行为（比如，一个实现者是否允许运行 std::vector 的实现，这将休息）。

如果标准之间存在冲突，我对 C++11 标准所说的内容感兴趣。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-21T19:54:02.783

是的，如果`std::vector`不为空，则允许。如果`vector`为空，`vec[0]`将引发未定义行为。

`std::vector`需要连续存储元素。

还有`data(`) 方法，但它只是 C++11。

重要的：

这不适用于`std::vector<bool>`（位高效的专业化）。但它也不是一个容器，IMO 它应该被弃用。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-21T19:54:22.253

那也行。但如果`vec`为空，则为未定义行为。更好地使用`vec.data()`它也可以在`vec`为空的情况下使用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-12-21T19:54:08.607

是的，这很好，因为保证元素是连续存储的。该标准承认这一点：

> 向量的元素是连续存储的，这意味着如果`v`是 a `vector<T, Allocator>`where`T`是 以外的某种类型`bool`，则它服从`&v[n] == &v[0] + n`所有的标识`0 <= n < v.size()`。

# java - 按后退按钮重新启动上一个活动

> ID：13996341
> 
> 赞同：1
> 
> 时间：2012-12-21T19:52:11.790
> 
> 标签：java, android

我正在制作一个应用程序，其中有一个“MainActivity.class”，该应用程序有一个“编辑配置文件”按钮，该按钮导致另一个活动，称为“Editprofile.class”。它（MainActivity）还有一个显示字符串（名称）的 TextView。

Editprofile.class 接受来自用户的字符串，并在按下按钮“添加”时，将新字符串更新到数据库，替换以前的字符串。现在，当用户在更新后通过后退按钮返回 MainActivity 时，我希望 TextView 显示新更新的字符串；为此我必须重新启动 MainActivity。

当用户按下“编辑配置文件”按钮时，我通过使用 finish() 函数实现了这一点，并且当用户在 Editprofile 活动期间按下后退按钮时，MainActivity 通过 onBackPress() 方法重新启动。

意图启动“Editprofile.class”的代码：

> ```
> public void edit_profile(View view)  {                                                
>     Intent intent = new Intent(this, Editprofile.class)
>     startActivity(intent)  
>     finish();
>   } 
> ```

返回“MainActivity”的代码：

> ```
> @Override
> public void onBackPressed() {
>     finish();
>     startActivity(new Intent(this, MainActivity.class));
> } 
> ```

我已经设法得到了我想要的结果，但如果有人能告诉我这是否是最有效的方法，我将不胜感激。

*我应该以 Q/A 格式发布这个吗？*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:08:25.423

我建议使用`startActivityForResult()`和更新你的`MainActivity`in `onActivityResult()`。

（无需检查 中的更新`onResume()`，因为*许多*其他实例都会调用此方法，而不仅仅是从 中返回`Editprofile`。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T20:09:08.563

@Mattias 答案的替代方法是开始`Editprofile`使用 `startActivityForResult(...)`. 然后，该活动可以返回一个结果，指示用户是否实际编辑了他/她的个人资料，您可以`onActivityResult(...)`在`MainActivity`. 仅当配置文件发生更改时才`TextView`需要更新。

它可能需要几行额外的编码，但比每次都更新更有效`onResume()`。在我看来，它也更干净一些，尽管就性能而言它可能没什么大不了的。

例如，查看Android 开发者网站上的[文档。](http://developer.android.com/reference/android/app/Activity.html#StartingActivities)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T20:06:21.750

> 但我也想“刷新” MainActivity 以便在返回时显示新更新的名称；

有`onResume()`这种事情的方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-21T19:56:51.147

只是：

*   删除`finish()`呼叫`edit_profile()`
*   删除整个`onBackPressed()`方法

因为您不需要重新启动活动（现在它将恢复，即：更快、更好、更容易且符合预期）。更新 TextView`onResume()`而不是`onCreate()`.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-21T20:28:32.490

不要在程序中的任何地方使用/覆盖 onBackPressed()

只需在父活动中添加以下方法，例如`MainActivity`和`EditProfile`

## 在 MainActivity.java

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
} 
```

使用 onClick 方法启动 Activity

```
 startActivityForResult(intentName, 0); 
```

## 在 EditProfile.java

您使用/覆盖 onStop() 方法

```
 @Override
protected void onStop()
{
    super.onStop();

} 
```

# html - 在此服务器上找不到请求的 URL xxxx.tgz

> ID：13996344
> 
> 赞同：-1
> 
> 时间：2012-12-21T19:52:23.850
> 
> 标签：html, apache

我试图创建一个允许用户从我的服务器下载文件的链接，但出现“xxx.tgz what not found on this server”错误。

我的代码很简单：

```
<a href="/var/www/ci/cilog/dir/test.tgz">test.tgz</a><br> 
```

当我单击该链接时，它将显示“在此服务器上未找到 test.tgz”错误。

很抱歉再次重新发布这个问题，但发布的解决方案都不适合我。我尝试更改 apache2 文件夹中的默认文件，但没有成功。

有谁可以帮我离开这里吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:58:23.333

不要在您的网址中使用*服务器上的路径。*网络服务器认为某个文件夹是它的根，并且不公开任何其他文件夹。

例如，这个网站是`http://stackoverflow.com/questions/13996344`，不是`/var/www/stackoverflow/questions`（我知道这不是这个网站的工作方式，但这只是一个例子）。

该路径必须是 Web 根目录，而不是服务器路径。

假设`/var/www`是你的webroot。

```
<a href="http://yourpage/ci/cilog/dir/test.tgz">test.tgz</a><br> 
```

或者，您可以使用`/`指向您网站的根目录：

```
<a href="/ci/cilog/dir/test.tgz">test.tgz</a><br> 
```

# javascript - 在 HTML 页面中的 window.location.hash 锚链接

> ID：13996346
> 
> 赞同：0
> 
> 时间：2012-12-21T19:52:26.070
> 
> 标签：javascript, jquery, anchor

需要解决我的以下问题。如果有人建议我会很棒..

我的 html 页面包含固定的标题 div。& 在固定标题 div 下面我有内容 div。内容 div 包含更多带有内部锚链接的内容。所以当我点击页面链接时，内容是从窗口顶部位置开始的。因为我用过“window.location.hash”。所以它从顶部和内部链接开始没有正确显示。那么任何人都可以给我一个解决方案，让这个内容链接出现在固定标题 div 下方

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T19:57:03.393

如果您正在处理您所说的固定标头，您可能需要使用`window.scrollTo`而不是哈希标签。该`Y`位置将是您想要滚动到页面下方的像素数。

```
window.scrollTo(x,y); 
```

# oracle - Oracle 更新查询忽略主约束

> ID：13996347
> 
> 赞同：1
> 
> 时间：2012-12-21T19:52:32.207
> 
> 标签：oracle

我有一个如下表 AreaUser 。

```
area   user
------------
area2  user1
area2  user2
area3  user1 
```

（区域，用户）是一个pk

我执行如下查询

```
update areatable
set user = 'user2'
where user = 'user1' 
```

第一行更新抛出主键约束错误，第三行未更新。我如何忽略第一行错误并继续更新第三行，或者如何在更新该行之前找到（区域，用户）组合是否已经存在于表中。

希望我用这个例子清楚地说明了这个问题。在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:59:41.003

你需要一个`NOT EXISTS`，例如

```
Update AreaTable
   Set User = 'user2'
 Where User = 'user1'
   And Not Exists (Select 1
                     From AreaTable CheckAreaTable
                    Where CheckAreaTable.Area = AreaTable.Area
                      And CheckAreaTable.User = 'user2') 
```

# javascript - 将文本区域链接到某物

> ID：13996350
> 
> 赞同：0
> 
> 时间：2012-12-21T19:52:45.803
> 
> 标签：javascript, html, textarea

我有一个文本区域，用户在其中添加一些内容并不时对其进行编辑。

我想让该文本指向 URL（即文本区域内的超链接）。但是由于在 textarea 中不可能有超链接，是否可以将整个 textarea 链接到 URL 本身？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:55:08.170

将 onclick 事件处理程序添加到 textarea 并将 window.location 设置为您想要执行的位置。

其他选择是使用像[CK Editor](http://ckeditor.com/)或[YUI Editor这样的编辑器](http://developer.yahoo.com/yui/editor/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T19:55:48.390

你可以使用jquery：

```
<a href='http://example.com' style='display:none' id='textarea_link'></a>
<textarea id='textarea1'></textarea>

<script type='text/javascript'>
    jQuery('#textarea1').click(function(){jQuery('#textarea_link').click()});
</script> 
```

然后，当您单击 textarea 时，它会将单击事件传递给链接，您的浏览器会将其视为您单击了链接。

注意：这不是故意使用 javascript window.open 函数

# c# - 从子页面访问和编辑母版页标签

> ID：13996352
> 
> 赞同：0
> 
> 时间：2012-12-21T19:53:06.550
> 
> 标签：c#, asp.net, master-pages

基本上，我需要在已成功完成的子页面上验证登录，但现在我需要在母版页上编辑标签以显示成功登录的用户的用户名。这基本上是一种视觉效果问题，如果你看到它只是这样，但是我需要从单个子页面访问母版页标签，使用用于登录的表验证那里的用户名并找出权限状态（管理员或用户），具体取决于结果激活或停用某些命令按钮

*   我的子登录页面名为：- Login.aspx
*   母版页：- Site.master
*   主标签：- Label1

我尝试使用的代码，但它们不太有效

```
Master.FindControl("Label1").Visible=true;
Label lb=(Label)this.master.FindControl("Label1")
lb.visible=true
lb.text=UserName.text 
```

请帮忙，我已经折断了一天无济于事从这里得到了一些很好的答案，我曾经希望有同样的运气

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T19:58:56.820

如果您告诉您的母版页将标签的值绑定到`HttpContext.User.Identity.Name`，那么您不必在子页中胡乱摆弄任何东西。

事实上，我相信有一个内置的 asp.net 控件用于显示用户的身份验证状态.. 虽然我可能是错的。

# java - 如果我有所有 ip 信息，是否可以绕过 P2P 应用程序的 NAT？

> ID：13996361
> 
> 赞同：3
> 
> 时间：2012-12-21T19:54:16.720
> 
> 标签：java, android, p2p, nat, upnp

我正在制作一个 P2P android 应用程序。我目前的问题是我无法让我的设备相互识别，除非它们在同一个网络上并且我使用私有 IP 地址——我将所有公共 IP/端口/私有 IP 地址存储在数据库中。

鉴于 NAT 阻止了我的尝试，并且我无法从公共 IP 地址中具体选择要选择的私有 IP，我应该如何让一个人联系另一个人，而无需进入路由器设置和端口转发……

我应该如何成功到达我的同伴设备=]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-07T19:39:39.803

简短的回答：你不能

长答案：NAT 穿越的问题需要 10 多个人年的努力，据我所知，除了 Skype 之外，没有其他产品可以可靠地做到这一点（Skype 允许您编写基本上使用 Skype 作为您不必关心的可靠 P2P 连接提供商，请参见[此处](https://developer.skype.com/public/skypekit/)和[此处](http://developer.skype.com/desktop-api-reference)）。果然，使用 Skype 作为“请为我提供 P2P 连接”服务提供商会将您与专有且无法控制的解决方案联系起来，因此它并不是真正的……解决方案。

现在，还有一个问题只会让未来几年在 IPv4 上的 NAT 遍历变得更加困难：具体来说，ISP 将开始引入所谓的“运营商级 NAT”（CGN，请参阅[此](http://en.wikipedia.org/wiki/Carrier-grade_NAT)作为介绍），它使用与家庭 NAT 使用的不同类型的端口分配算法（此外，除此之外，您现在将有两个级联 NAT 来处理）。简而言之，如果您手头没有 10 人年以上的开发资源，请忘记任何基于 IPv4 的 P2P。顺便说一句，甚至Skype也有望屈服于CGN（这已经是移动连接的标准，即几乎没有移动运营商为手机提供公共IPv4地址），这（很可能是恕我直言）原因MS 在获得 Skype 后所做的第一件事就是放置数千个 RELAYS，以便这些中继能够在未来几年内解决通过 IPv4 建立 P2P 连接的可能性，请看[这个](http://arstechnica.com/business/2012/05/skype-replaces-p2p-supernodes-with-linux-boxes-hosted-by-microsoft/)（忘记 MS 的回复在文章的最后，它'

您可以做的是开始更多地了解 IPv6：使用 IPv6 事情应该容易得多，因为（据称）将不再有 NAT（有一种叫做 NPT 的东西，但这是一个 P2P 友好的协议）。IPv6 路由器的问题是（目前）还没有端口控制标准协议，但是目前正在制作一些东西，请看[这个](https://datatracker.ietf.org/doc/html/draft-ietf-pcp-base-29)，所以应该/什么时候这个（或其他）协议将变得标准化并被 CPE 制造商采用，那么 IPv6 路由器遍历将变得微不足道。

所以，无论哪种方式，你现在最好的选择是在接下来的 3 到 5 年内忘记 P2P。很遗憾...

PS。还有2个链接：

1.  [这](http://p2p-os.blogspot.com)是我的项目，相信我，这是一团糟；
2.  [野外的CGN](http://www.scribd.com/doc/98023329/Carrier-Grade-NAT-Requirements-and-Challenges-in-the-Real-World)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:04:58.790

关键是您只能连接到另一个节点，如果通过公共互联网可以使用某种端口转发/ NAT。很可能是这样，因为对于您的每个私有节点（私有我的意思是一个在公共 ip 后面有一个私有 ip 地址的节点）它仍在访问互联网，并且只有在已经存在一些规则时才会发生这种情况。唯一的问题是您是否可以将该规则用于您的应用程序。

我在上面的评论中提到的链接提到了一些常用的技术。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T20:19:54.840

您必须使用 STUN 和/或 UPnP 等技术才能通过 NAT 路由器。

# backbone.js - 在 Backbone.js 中，如何为一些属性创建自定义 .render() 函数，并将所有其他属性指向更全局的渲染函数

> ID：13996362
> 
> 赞同：1
> 
> 时间：2012-12-21T19:54:16.453
> 
> 标签：backbone.js

我想说“当`question_number`更改时，运行`updateQuestionNumber`。如果有任何东西`question_number`（以及我提供自定义渲染函数的任何其他内容），运行 .render()”。

以下代码的问题是两者都运行`updateQuestionNumber`。`render`

```
v.QuestionBuilder = Backbone.View.extend({
    initialize: function() {
        this.model.on('change:question_number', this.updateQuestionNumber, this);
        this.model.on('change', this.render, this);
    },
    //only this function should run when question_number is changed
    updateQuestionNumber: function(){
        this.$('.question-number').text(this.model.get('question_number'));
    },
    //this should run when anything except question_number is changed
    render: function() {
        this.$el.html(this.template(this.model.toJSON()));
        this.$el.fadeIn('slow');

        /* blah blah blah */
        return this;
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T21:05:53.100

这是我能想到的最佳解决方案：

当 this.render() 触发时，我设置了一个数组 non_render 的属性，这些属性不需要完全渲染（由 处理`this.model.on('change:whatever', this.whateverRenderFunction, this);`）。然后它检查 changedAttributes。如果其中有任何不在 non_render ( `._difference`) 中的内容，那么它会继续。否则返回。

不过，这似乎是一个超级庞大的解决方案（而且我必须维护 in`initialize`和 in 中的 non_render 列表`render`。任何改进都会很棒......

```
 render: function(model, value, options){
        if(model){ //this was triggered via .change()
            var changed = _.keys(model.changedAttributes());
            var non_render = ['question_number'];

            //if there is anything in changed that's not part of non_render
            if(_.difference(changed, non_render).length === 0){
                return false;
            }
        }

        var data = this.model.toJSON();
        _.extend(data, _.result(this.templateProperties));

        this.$el.html(this.template(data));
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T21:25:58.003

```
initialize: function() {
    this.model.on('change', function(model) {
        var changed = model.getChanged();
        if(changed && 1 === changed.length && changed.question_number) {
            this.updateQuestionNumber();
        } else {
            this.render()
        }
    }, this);
}, 
```

# android - 警报管理器后android活动进入前台

> ID：13996366
> 
> 赞同：0
> 
> 时间：2012-12-21T19:54:29.960
> 
> 标签：android, android-activity, alarmmanager, foreground

我有应用程序，它在警报管理器中生成事件，并在特定时间调用它。代码看起来像这样

```
Intent intent = new Intent(this, AlarmActivity.class);
pendingIntent = PendingIntent.getActivity(this,req_code, intent, PendingIntent.FLAG_CANCEL_CURRENT);    
AlarmManager am = (AlarmManager)getSystemService(Activity.ALARM_SERVICE);
am.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),AlarmManager.INTERVAL_DAY*7,
                    pendingIntent); 
```

Intent 调用此活动。

```
public class AlarmActivity extends Activity {

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
    }

    public void onStart(){
        super.onStart();
        //Change ringer mode
        //Add notification in status bar
        //Other booring stuff here...
        Toast.makeText(this,"Finishing",2000).show();
        finish();
    }
} 
```

在无聊的东西中有一些代码应该在后台运行（更改铃声模式）

一切都对我有用，除了一件事。每当警报管理器调用我的活动时 - 应用程序就会进入前台。当它只应该在后台更改铃声模式，并在状态栏中添加通知。

有什么方法不允许应用程序出现在前台？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:29:46.293

您应该在[BroadCastReceiver](http://developer.android.com/reference/android/content/BroadcastReceiver.html)中完成所有这些操作。没有 UI，并且有一个`Context`变量传递给 Receiver 的`onReceive()`方法，它允许您基本上执行 Activity 所做的任何事情，而无需实际的 UI。这意味着您可以设置铃声、显示状态栏通知等。您的 BroadcastReceiver 类应如下所示：

```
public class AlarmBroadcastReceiver extends BroadcastReceiver {
@Override
public void onReceive(Context context, Intent intent) {
    //Change ringer mode
    //Add notification in status bar
    //Other boring stuff here...
    Toast.makeText(context,"Finishing",2000).show();
    }
} 
```

请注意，对于您的`Toast`，使用了名为的变量`context`。

您的`AlarmManager`代码应如下所示：

```
Intent intent = new Intent(this, AlarmBroadcastReceiver.class);
pendingIntent = PendingIntent.getBroadcast(this,req_code, intent, PendingIntent.FLAG_CANCEL_CURRENT);    
AlarmManager am = (AlarmManager)getSystemService(Activity.ALARM_SERVICE);
am.setRepeating(AlarmManager.RTC_WAKEUP, cal.getTimeInMillis(),AlarmManager.INTERVAL_DAY*7,
                    pendingIntent); 
```

你的清单应该有这个：

```
 <receiver android:name=".AlarmBroadcastReceiver" >
        </receiver> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:37:55.397

将此行添加到`Activity`您的`AndroidManifest`

```
android:theme="@android:style/Theme.NoDisplay" 
```

并且您有一个没有任何内容可显示的活动。由于您已经`finish();`在调用代码，因此它看起来像是在后台运行。

# php - 如何在两行中显示日期和时间？

> ID：13996368
> 
> 赞同：0
> 
> 时间：2012-12-21T19:54:50.333
> 
> 标签：php, html, date

请帮助在 .php 页面中格式化日期：
...return`

```
<div class="date">'.date('d M Y - H:m',$d['dt']).'</div> 
```

此 id 显示为`21 Dec 2012 - 20:12`

我想要第一行：`21 Dec 2012`
--------第二行：`20:12`

我尝试了很多组合`<br/>`，点，括号......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T19:56:13.727

您可以只使用两个`date()`调用：

```
<div class="date">'.date("d M Y",$d['dt']).'<br />'.date("H:m",$d['dt']).'</div> 
```

或正确逃脱：

```
date('d M Y <\b\r /> H:m',$d['dt']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:02:39.420

我会使用 2 日期功能：

```
$one = date('d M Y');
$two = date('H:m');

echo "<div class='date'>";
echo $one;
echo "<br />";
echo $two;
echo "</div>"; 
```

# jquery-ui - 根据请求在jquery DataTable中延迟加载数据

> ID：13996370
> 
> 赞同：0
> 
> 时间：2012-12-21T19:54:53.953
> 
> 标签：jquery-ui, jquery, datatable

我`jquery DataTables`用来填充表格。我们可以获取大量数据并将其呈现在 html 上，并使用`DataTable`. 我之前没有使用过它，但我认为它有时会死掉（在限制之后）。无论如何，一次性将全部数据带入未来可能无济于事。

当用户到达 DataTable 的最后一页并获取剩余数据时，有没有办法进行 ajax 调用？

我希望，我很清楚。执行此工作的任何替代方法都会有所帮助。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:06:27.870

Jquery DataTables 能够使用服务器端分页。您可以在此处找到详细信息：[服务器端分页文档](http://datatables.net/examples/data_sources/server_side.html)

# jquery - JavaScript 代码未执行

> ID：13996378
> 
> 赞同：-1
> 
> 时间：2012-12-21T19:55:28.730
> 
> 标签：jquery, jquery-ui, datepicker

我有一些没有被执行的 jQuery 代码。代码块看起来像

```
jQuery(document).ready(function() {
$('#Start').datepicker();
$('#End').datepicker();
$('#End').val('date');
$('#Start').val('start');
alert('hello');
}); 
```

但它没有在`Start`和 `End`文本框上应用日期选择器。请注意，在此脚本之前添加了 jQuery 和 jQuery.ui 文件。在这个代码块中，甚至最后一行 ( `alert`) 都没有被执行。

我可以在 Firefox 控制台中看到错误，`uncaught exception: Invalid dimensions for plot, width = null, height = null`但它没有告诉我错误的位置。

可能是什么问题呢？为什么这段代码没有运行？如何调试这个？

**编辑1：** 我已将代码更改为以下

```
jQuery(document).ready(function() {
        //$('#Start').datepicker();
        //$('#End').datepicker();
        //$('#End').val('date');
        //$('#Start').val('start');
        alert('hello inside');
    });
    alert("hello outside"); 
```

现在只有两个警报（注释的其余行）外部就绪函数执行警报，但内部没有执行。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-21T20:08:52.770

使用日期选择器，我不确定您是否可以在初始化日期选择器后设置字符串值。

尝试删除这两行：

```
$('#End').val('date');
$('#Start').val('start'); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T20:14:59.170

我从未使用过 Datepicker，但我认为如果您将这些行注释掉，它将起作用：

```
$('#End').val('date');
$('#Start').val('start'); 
```

大多数jquery是异步的，即。上面的两行将在用户选择日期之前执行（因此缺少值）。所以你需要包括一个这样的回调函数（快速谷歌）

[jQuery datepicker，onSelect 不起作用](https://stackoverflow.com/questions/887696/jquery-datepicker-onselect-wont-work)

```
 $('#End').datepicker( {
        onSelect: function(date) {
            alert(date);        }
    }); 
```

## 编辑：

这适用于 jsfiddle（[http://jsfiddle.net/q6UFc/](http://jsfiddle.net/q6UFc/)）：

HTML：

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.0/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.12/jquery-ui.min.js"></script>
<input type="text" id="end" name="end" /> 
```

Javascript：

```
$(document).ready(function () {          
$('#end').datepicker( {
            onSelect: function(date) {
                alert(date);        }
        });

}) 
```

# c - pmap 和 fork：我的写标志副本在哪里？

> ID：13996382
> 
> 赞同：2
> 
> 时间：2012-12-21T19:55:36.453
> 
> 标签：c, fork, pmap

我希望这是一个简单的问题。我熟悉 unix/linux/etc 中的 fork 实际上并不复制整个映像，而是使用写时复制标志将共享内存映射为私有的想法。为了说明这一点，我尝试了下面的示例，我希望将大型 malloc 区域显示为私有（写入时复制）。但是，我得到下面的输出。任何人都可以帮助阐明这是为什么吗？我的假设是我的操作系统按预期工作（uname -a: Linux xxxxxx 2.6.32-279.19.1.el6.x86_64 #1 SMP Tue Dec 18 17:22:54 CST 2012 x86_64 x86_64 x86_64 GNU/Linux）但 pmap 是没有按我的预期工作..

```
int main(int argc, char *argv[]) {

    pid_t pid;
    char syscmd[80];
    char *somebuffer=(char*)malloc(999999999l);
    pid = fork();
    if (0 == pid) { /* Child */
            sprintf(syscmd, "pmap -x %d", getpid());
            system(syscmd);

    } else { /* parent */
            wait(NULL);
    }

    return 0;
} 
```

输出：

```
9822:   ./a.out
Address           Kbytes     RSS   Dirty Mode   Mapping
0000000000400000       4       4       0 r-x--  a.out
0000000000600000       4       4       4 rw---  a.out
000000357e000000     128      24       0 r-x--  ld-2.12.so
000000357e21f000       4       4       4 r----  ld-2.12.so
000000357e220000       4       4       4 rw---  ld-2.12.so
000000357e221000       4       4       4 rw---    [ anon ]
000000357e400000    1572     120       0 r-x--  libc-2.12.so
000000357e589000    2048       0       0 -----  libc-2.12.so
000000357e789000      16      12       8 r----  libc-2.12.so
000000357e78d000       4       4       4 rw---  libc-2.12.so
000000357e78e000      20      16      16 rw---    [ anon ]
00007f64228ad000  976576      16      16 rw---    [ anon ]
00007f645e27b000       4       4       4 rw---    [ anon ]
00007f645e27c000       4       0       0 r-x--    [ anon ]
00007fff2a1eb000      84      12      12 rw---    [ stack ]
ffffffffff600000       4       0       0 r-x--    [ anon ]
----------------  ------  ------  ------
total kB          980480     228      76 
```

:: 为什么没有将那么大的区域（可能还有其他区域）标记为私有？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:08:01.680

我认为该`pmap`程序无法打印此信息。您为什么要使用这样的奇怪实用程序而不是 just `cat /proc/%d/maps`？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:11:33.630

我不确定 pmap 如何表示“写时复制”，我的印象是它在内核之外不可见（也就是说，您的第二个“anon”部分是您的 malloc 区域），但我可能是错的。那肯定是我要找的地方，而且大小合适。您可以进行一些测量以查看是否两次填充内存（测量需要多长时间），然后在子进程中执行相同操作，您会发现第二次填充两次所需的时间都更少，但是第一次在分叉过程中需要更长的时间。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-20T02:17:47.887

更高版本的 pmap 有一个新选项“-X”。使用此选项 pmap 在 /proc/pid/smaps 中显示详细信息

# ios - 不同类型的导航控制器/视图/栏

> ID：13996383
> 
> 赞同：1
> 
> 时间：2012-12-21T19:55:37.047
> 
> 标签：ios

有人可以解释以下与 iOS 中导航相关的事情的优缺点吗？

以防万一，如果它是相关的。我使用 XCode 4.5 和 xibs。

1）如果我在Interface Builder中选择一个视图并选择“属性检查器”，有一个名为“顶部栏”的项目，我可以在那里选择“导航栏”。

我做了一些实验。它显示在 Interface Builder 中，但看起来它不会影响运行时的任何内容。我错过了什么吗

2）在Interface Builder中，我可以从对象列表中拖放“导航控制器”并在其中添加一些视图。

3）在Interface Builder中，我可以拖放“导航栏”并将其放在某个视图上

我不清楚第 2 项和第 3 项之间有什么区别

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T06:01:00.087

1) 您可以在 Simulated Metrics 部分添加的内容只是为了帮助您在 IB 中进行布局，实际上并没有添加它们。

2) & 3) 导航控制器允许您在嵌入其中的视图控制器之间进行推送和弹出转换。它负责更改导航栏中的标题和后退按钮中的文本。如果您的控制器未嵌入导航控制器中，则您不能在代码中执行 push segue 或使用 pushViewController:animated:。导航栏只是一个 UI 元素，通常位于屏幕顶部，可以包含导航项。它本身并没有做任何事情。您必须编写处理标题和按钮文本的代码。将导航栏添加到视图并不能实现推送，只有将其嵌入 UINavigationController 才能执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T20:03:59.797

让我通过一个简单的方法来回答所有问题。只需使用 StoryBoards，因为它们非常简单，并且可以更清楚地显示正在发生的事情。

您需要做的就是选择视图控制器（让我们说您的主视图控制器）并转到菜单然后编辑器 > 嵌入 > 导航控制器。那时一切都会变得有意义。

# vbscript - 通过其在 vbscript 中的位置读取特定单词

> ID：13996385
> 
> 赞同：0
> 
> 时间：2012-12-21T19:55:38.293
> 
> 标签：vbscript

我在文件中有以下几行：

显示 5 of **17** -- 所有国家成员

显示 0 of **0** -- 所有国家成员

显示 15 of **417** -- 所有国家成员

显示 134 of **4890** -- 所有国家成员

在我的脚本条件下，我可能会从上面得到任何一行。我只想获取粗体数字。

有没有办法获取一行的第四个单词？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:03:56.657

您可以使用 Split() 来获取由“ ”分隔的行块组成的数组，并通过使用其（从零开始的）索引 3 来访问第四个元素。

演示：

```
>> WScript.Echo Split("Displaying 134 of 4890 -- All country members")(3)
>>
4890
>> 
```

# html - 指定-ms-viewport时div溢出滚动？

> ID：13996387
> 
> 赞同：16
> 
> 时间：2012-12-21T19:55:55.423
> 
> 标签：html, css, touch, windows-phone-8, internet-explorer-10

在 Windows Phone 8 中查看的页面上工作时，我注意到一个奇怪的行为。当 -ms-viewport 指定了宽度或高度时，用户似乎无法再在 overflow:auto 或 -ms-touch-move:pan-y 元素上使用触摸滚动行为。

有人遇到这种行为，或者知道任何解决方法吗？

编辑：在 WP8 设备上访问此 URL 进行复制：http: [//fiddle.jshell.net/Vk7SR/3/show/light](http://fiddle.jshell.net/Vk7SR/3/show/light)

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-11-12T00:10:50.320

对于许多渴望在 Windows Phone 设备上呈现反应式 UI 的应用程序来说，设置`@-ms-viewport { width: auto }`可能是不可接受的。允许您设置所需的任何视口宽度的可行替代方法是设置以下 CSS 规则：

```
body, html { 
  -ms-overflow-style: none !important; 
} 
```

[我复制了原始复制品并在https://gist.github.com/tjanczuk/7419485](https://gist.github.com/tjanczuk/7419485)上使用此规则对其进行了修复。您还可以从 Windows Phone 设备直接导航到带有修复程序的 HTML 页面，网址为[http://htmlpreview.github.io/?https://gist.github.com/tjanczuk/7419485/raw/9a13fc9ad43f2103d8b9e23e25c7b0672a13385f/gistfile1.html](http://htmlpreview.github.io/?https://gist.github.com/tjanczuk/7419485/raw/9a13fc9ad43f2103d8b9e23e25c7b0672a13385f/gistfile1.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-12T16:01:55.730

将宽度设置为 auto（如下所示）而不是 device-width 似乎可以解决滚动问题。我从您的页面 ( [http://fiddle.jshell.net/Vk7SR/3/show/light/](http://fiddle.jshell.net/Vk7SR/3/show/light/) ) 中获取了源代码，将其打包为 WP8 应用程序并在 Lumia 920 上试用。

```
@-ms-viewport {
    width: auto;
} 
```

# character-encoding - 为什么VBScript在使用ExecuteGlobal导入.vbs函数库文件时会提示“Invalid Character”？

> ID：13996394
> 
> 赞同：3
> 
> 时间：2012-12-21T19:56:36.500
> 
> 标签：character-encoding, vbscript, import, importerror, invalid-characters

我在我的 VBscript 中遇到“无效字符”错误！特别是，在这段代码中：

```
'*******************************************************************
'Import Code
'by Cheyne Wallace
'November 2008

'When using only VBscript (not QTP), this code will import any function library passed into it.
'Copy this function into a file, then use it to bring in various other function libraries.
'Usage:
'   Import "Library.vbs"

Sub Import(strFile)
    Dim objFSO : Set objFSO = CreateObject("Scripting.FileSystemObject")
    Dim wss : Set wss = CreateObject("WScript.Shell")
    strFile = wss.ExpandEnvironmentStrings(strFile)
    strFile = objFSO.GetAbsolutePathName(strFile)
    Set objFile = objFSO.OpenTextFile(strFile, 1)
    ExecuteGlobal objFile.ReadAll
    objFile.Close : Set objFSO = nothing
    Set wss = Nothing
End Sub 
```

错误`Microsoft VBScript compilation error. Invalid Character. Code: 800A0408`在 Char: 2, Line 206 上显示“”，这是第一个字母`ExecuteGlobal objFile.ReadAll`（字符 1 是制表符）。

我已经键入并重新键入了该行以及周围的换行符。不过，它一直说“无效字符”。到底是怎么回事？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T19:56:36.500

事实证明，问题不`ExecuteGlobal`在于 .vbs 文件，而是我试图导入的 .vbs 文件。我正在导入的文件不是 ANSI 编码。如果 VBScript 对您正在导入的文件有问题，它将在开头的字符和行处报告错误（这无疑会`ExecuteGlobal`导致混淆）。

打开您尝试导入的文件，将其转换为 ANSI，一切正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-03T05:32:26.347

仅供将来遇到相同问题的人参考，以解决此问题：

1.  在记事本中打开 .vbs
2.  转到文件并“另存为”
3.  在文件名框的正下方，您将看到一个用于编码的下拉菜单。选择 ANSI。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-20T16:49:53.507

更改您的代码：

```
Set objFile = objFSO.OpenTextFile(strFile, 1)
ExecuteGlobal objFile.ReadAll 
```

到

```
Set objFile = objFSO.OpenTextFile(strFile, 1, False, -2)
ExecuteGlobal objFile.ReadAll 
```

函数中的最后一个参数`OpenTextFile`是`TristateUseDefault = -2`（使用系统默认打开文件。）

# python - 如何取回类的动态创建的对象？

> ID：13996397
> 
> 赞同：1
> 
> 时间：2012-12-21T19:56:44.987
> 
> 标签：python, qt, python-2.7, pyqt, pyside

我有*一个字符串列表* **my_list**，其中包含 n 个项目。此列表在运行时逐个输入字符串。假设现在有 4 个项目。

示例：my_list = ['one', 'two', 'three', 'four']

我有一个名为**my_object***的自定义对象*，我需要为**list 中的每个项目**创建一个循环的实例。

 ****我的问题：通常，我将对象创建为：`**my_obj** = MyObj()`并且我可以使用**my_obj**变量来获取它并调用它的方法等。

由于我需要通过列表操作动态地进行此创建；

*   如何创建对象实例？
*   如何获取对象实例并调用其方法？

我知道它很旧，可能是错误的和过时的，但在 VisualBasic 中，对于视觉项目，这可能会像这样执行：

my_obj[动态变量] = ...

我不希望这涉及全局变量或任何东西变得复杂。

我该如何处理这个问题？

***更多背景：***

*我正在使用 Qt (PySide - PyQt) 开发应用程序。我有一个定制的小部件（my_class）我需要用这个对象的动态创建的实例填充一个可视列表（QGridLayout），然后调用它们的方法。*

谢谢你。

***显示我正在创建对象并尝试使用它们的代码：***

```
class my_class(object):
    def __init__(self):
        print 'hi'
    def talk(w):
        print w

my_list = ['one', 'two']

### code that won't work starts from here 
for i in list:
    i = my_class()

my_list[1].talk() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:02:58.873

你只是说你想创建一个没有名字的对象列表吗？只需执行以下操作：

```
myObjs = [MyObj() for i in range(5)] 
```

`myObjs[0]`然后您可以使用,`myObjs[1]`等访问每个对象。

此外，阅读[Python 教程](http://docs.python.org/tutorial/)以熟悉在 Python 中创建类实例、列表等的基础知识。

编辑：您在评论中描述的内容（创建具有给定名称的变量）不是一个好主意。创建一个动态变量名是没有意义的，因为你不能在不知道变量名是什么的情况下在代码中使用它。最好使用列表或字典。对于 dict，您可以执行以下操作：

```
myObjs = {}
theName = getNameSomehowFromUser()
myObjs[theName] = MyObj() 
```

然后随心所欲地执行此操作，将新对象添加到名为`myObjs`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:20:06.917

我想你可能对 Python 中“变量”和“名称”的含义感到困惑。

对象没有名称。除了增加它的引用计数外，说`foo = 1`对对象没有任何作用。`1`

变量是字符串到命名空间内对象的映射。命名空间是用 dicts 实现的。您可以使用该`locals()`函数访问本地命名空间。

例子：

```
Python 2.7.1 (r271:86832, Jun 16 2011, 16:59:05) 
[GCC 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2335.15.00)] on darwin
Type "help", "copyright", "credits" or "license" for more information.
>>> locals()
{'__builtins__': <module '__builtin__' (built-in)>, '__name__': '__main__', '__doc__': None, '__package__': None}
>>> a = 1
>>> locals()
{'__builtins__': <module '__builtin__' (built-in)>, '__name__': '__main__', '__doc__': None, 'a': 1, '__package__': None}
>>> 
```

请注意 'a':1 出现在`locals()`字典中。

您的问题仍然不清楚，因为您没有显示任何代码与您想要完成的任务以及您卡在哪里。可能做我认为你想做的事情的最好方法（虽然没有必要如何做你想做的事情）是使用字典：

```
>>> class MyClass(object): pass
... 
>>> myobjects = {}
>>> myobjects['key-name'] = MyClass()
>>> myvar = myobjects['key-name']  # some time later...
>>> myvar # what is myvar?
<__main__.MyClass object at 0x10f7c1c50>
>>> myobjects['key-name'] # myobjects['key-name'] is the same object
<__main__.MyClass object at 0x10f7c1c50>
>>> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T20:19:30.033

我是如何解决这个问题的：

我决定使用一个名为“instances”的类属性，我将所有新创建的实例都附加到该属性中。这可以是字典或列表。然后可以使用字符串或索引 int 来检索它们。

惊人的。****

# php - 从PHP中的数组值中删除部分字符串

> ID：13996401
> 
> 赞同：0
> 
> 时间：2012-12-21T19:57:09.573
> 
> 标签：php, arrays, variables, html-parsing, extract

我有以下代码片段，它基本上解析我的博客站点并将一些信息存储为变量：

```
global $articles;

$items = $html->find('div[class=blogpost]'); 

foreach($items as $post) {
    $articles[] = array($post->children(0)->innertext,
                        $post->children(1)->first_child()->outertext);
}

foreach($articles as $item) {
    echo $item[0]; 
    echo $item[1];
    echo "<br>";
} 
```

上述代码输出如下：

```
Title of blog post 1 <script type="text/javascript">execute_function(3,'')</script><a href="http://www.example.com/cool_news" id="963"  target="_blank" >Click here for news</a> &nbsp;<img src="/news.gif" width="12" height="12" title="validated" /><span class="title">
Title of blog post 2 <script type="text/javascript">execute_function(3,'')</script><a href="http://www.example.com/neato" id="963"  target="_blank" >Click here for neato</a> &nbsp;<img src="/news.gif" width="12" height="12" title="validated" /><span class="title">
Title of blog post 3 <script type="text/javascript">execute_function(3,'')</script><a href="http://www.example.com/lame" id="963"  target="_blank" >Click here for lame</a> &nbsp;<img src="/news.gif" width="12" height="12" title="validated" /><span class="title"> 
```

$item[0] 包含“博客文章 X 的标题”，$item[1] 包含其余部分。

我想要做的是解析 $item[1] 并仅保留其中包含的 URL 作为单独的变量。也许我没有正确地表达我的问题，但我找不到任何可以帮助我解决这个问题的东西。

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:16:37.397

如果您要解析`$item[1]`为您使用的任何 DOM 爬虫对象`$html`，您可以使用以下 XPath

```
$item[1]->find('//a[0]/@href'); 
```

这将返回

```
href="http://www.example.com/cool_news" 
```

然后使用 PHP 提取所需的 url 或优化 XPath 查询。不确定 XPath 是什么来获得价值，也许有人可以扩展那个。

编辑：看到您使用简单 DOM 解析器，请尝试以下操作

```
$blogItemHtml = new simple_html_dom();
$blogItemHtml->load($item[1]);

$anchors = $blogItemHtml->find('a');
echo $anchors[0]->href; // "http://www.example.com/cool_news" 
```

# python - Python 中 multiprocessing.manager 的替代方案

> ID：13996404
> 
> 赞同：2
> 
> 时间：2012-12-21T19:57:18.323
> 
> 标签：python, multiprocessing

由于某些要求，我一直在管理一个使用 multiprocessing.manager 的程序，但是我们收到了稳定数量的错误，例如超时、无效引用和其他类似错误。

现在我很好奇是否有更发达的 multiprocessing.manager 替代方案，它具有更好的整体可靠性和更少的客户端状态跟踪。

我已经在这个主题上尝试过谷歌，但由于关键字的奇怪组合，我只收到了虚假的结果。

我们通常的用例与此类似：

```
def connect():
  manager = CustomManager(address=manager_address, authkey=manager_authkey)
  manager.connect()
  session = manager.session()
  return session

connect().some_function() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T09:03:10.883

从问题和您的评论来看，如果您想要更可靠的东西来管理流程，那么使用多处理模块有更好的选择。以下是您可能想要探索的两个选项：

**齿轮人**

这是对[Gearman](http://gearman.org/)项目的描述。

> Gearman 提供了一个通用的应用程序框架，将工作分包给更适合完成工作的其他机器或进程

Instagram 有用 python 编写的工作人员，并使用 Gearman 在后台运行这些工作。[您可以在这篇What Powers Instagram](http://instagram-engineering.tumblr.com/post/13649370142/what-powers-instagram-hundreds-of-instances-dozens-of)帖子的任务队列部分了解它。

**Celery：分布式任务队列**

[Celery](http://celeryproject.org/)是一个基于分布式消息传递的异步任务队列，它专注于实时操作。它在 Django 社区中非常流行。

这两种解决方案都具有很强的可扩展性并且被广泛使用，因此您会发现很多关于如何使用它们的文档和教程。不过他们参与度更高，因此会有更多的初始学习曲线。但我认为，如果您达到了多处理的极限，那么投入时间可能是值得的。

# r - read.table 和带有多余逗号的文件

> ID：13996408
> 
> 赞同：1
> 
> 时间：2012-12-21T19:57:30.150
> 
> 标签：r, read.table

我正在尝试使用该`read.table`命令将 CSV 文件导入 R。我不断收到错误消息“列多于列名”，即使我已将 strip.white 设置为 TRUE。制作 csv 文件的程序在每一行的末尾添加了大量的逗号字符，我认为这是额外列的来源。

```
read.table("filename.csv", sep=",", fill=T, header=TRUE, strip.white = T, 
           as.is=T,row.names = NULL, quote = "") 
```

当 R 将其读入 R 控制台时，如何让 R 从标题行和 CSV 文件的其余部分中去除无关的逗号列？

此外，csv 文件中的许多单元格不包含任何数据。是否可以让 R 用“NA”填充这些空单元格？

csv 文件的前两行：

```
Document_Name,Sequence_Name,Track_Name,Type,Name,Sequence,Minimum,Min_(with_gaps‌​),Maximum,Max_(with_gaps),Length,Length_(with_gaps),#_Intervals,Direction,Average‌​_Quality,Coverage,modified_by,Polymorphism_Type,Strand-Bias,Strand-Bias_>50%_P-va‌​lue,Strand-Bias_>65%_P-value,Variant_Frequency,Variant_Nucleotide(s),Variant_P-Va‌​lue_(approximate),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
Chr2_FT,Chr2,Chr2.bed,CDS,10000_ARHGAP15,GAAAGAATCATTAACAGTTAGAAGTTGATG-AAGTTTCA‌​ATAACAAGTGGGCACTGAGAGAAAG,55916421,56019336,55916483,56019399,63,64,1,forward,,,U‌​ser,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,, 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T20:32:31.173

您可以使用 colClasses 与“NULL”条目的组合来“删除”逗号（还需要`, fill=TRUE`：

```
read.table(text="1,2,3,4,5,6,7,8,,,,,,,,,,,,,,,,,,
 9,9,9,9,9,9,9,9,,,,,,,,,,,,,,,,,", sep=",", fill=TRUE, colClasses=c(rep("numeric", 8), rep("NULL", 30)) )
#------------------
  V1 V2 V3 V4 V5 V6 V7 V8
1  1  2  3  4  5  6  7  8
2  9  9  9  9  9  9  9  9
Warning message:
In read.table(text = "1,2,3,4,5,6,7,8,,,,,,,,,,,,,,,,,,\n9,9,9,9,9,9,9,9,,,,,,,,,,,,,,,,,",  :
  cols = 26 != length(data) = 38 
```

我需要在第一行末尾添加缺少的换行符。（您应该编辑问题而不是在评论中放置数据示例的另一个原因。）标题中有一个 octothorpe，需要将`comment.char`其设置为“”：

```
read.table(text="Document_Name,Sequence_Name,Track_Name,Type,Name,Sequence,Minimum,Min_(with_gaps‌​),Maximum,Max_(with_gaps),Length,Length_(with_gaps),#_Intervals,Direction,Average‌​_Quality,Coverage,modified_by,Polymorphism_Type,Strand-Bias,Strand-Bias_>50%_P-va‌​lue,Strand-Bias_>65%_P-value,Variant_Frequency,Variant_Nucleotide(s),Variant_P-Va‌​lue_(approximate),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,\nChr2_FT,Chr2,Chr2.bed,CDS,10000_ARHGAP15,GAAAGAATCATTAACAGTTAGAAGTTGATG-AAGTTTCA‌​ATAACAAGTGGGCACTGAGAGAAAG,55916421,56019336,55916483,56019399,63,64,1,forward,,,U‌​ser,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,", header=TRUE, colClasses=c(rep("character", 24), rep("NULL", 41)), comment.char="", sep=",")

  Document_Name Sequence_Name Track_Name Type           Name
1       Chr2_FT          Chr2   Chr2.bed  CDS 10000_ARHGAP15
                                                        Sequence  Minimum Min_.with_gaps...  Maximum
1 GAAAGAATCATTAACAGTTAGAAGTTGATG-AAGTTTCA‌​ATAACAAGTGGGCACTGAGAGAAAG 55916421          56019336 55916483
  Max_.with_gaps. Length Length_.with_gaps. X._Intervals Direction Average.._Quality Coverage modified_by
1        56019399     63                 64            1   forward                                     U‌​ser
  Polymorphism_Type Strand.Bias Strand.Bias_.50._P.va..lue Strand.Bias_.65._P.value Variant_Frequency
1                                                                                                    
  Variant_Nucleotide.s. Variant_P.Va..lue_.approximate.
1 
```

如果您知道您的 colClasses 将是什么，那么您可以自动在数字列中将缺失值设为 NA。您也可以使用该`na.strings`设置来完成此操作。您还可以对标题进行一些编辑以删除列名中的非法字符。（不过，我认为我不需要成为那个人。）

```
read.table(text="Document_Name,Sequence_Name,Track_Name,Type,Name,Sequence,Minimum,Min_(with_gaps‌​),Maximum,Max_(with_gaps),Length,Length_(with_gaps),#_Intervals,Direction,Average‌​_Quality,Coverage,modified_by,Polymorphism_Type,Strand-Bias,Strand-Bias_>50%_P-va‌​lue,Strand-Bias_>65%_P-value,Variant_Frequency,Variant_Nucleotide(s),Variant_P-Va‌​lue_(approximate),,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
 Chr2_FT,Chr2,Chr2.bed,CDS,10000_ARHGAP15,GAAAGAATCATTAACAGTTAGAAGTTGATG-AAGTTTCA‌​ATAACAAGTGGGCACTGAGAGAAAG,55916421,56019336,55916483,56019399,63,64,1,forward,,,U‌​ser,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,", header=TRUE, colClasses=c(rep("character", 24), rep("NULL", 41)), comment.char="", sep=",", na.strings="")
#------------------------------------------------------
  Document_Name Sequence_Name Track_Name Type           Name
1       Chr2_FT          Chr2   Chr2.bed  CDS 10000_ARHGAP15
                                                        Sequence  Minimum Min_.with_gaps...  Maximum
1 GAAAGAATCATTAACAGTTAGAAGTTGATG-AAGTTTCA‌​ATAACAAGTGGGCACTGAGAGAAAG 55916421          56019336 55916483
  Max_.with_gaps. Length Length_.with_gaps. X._Intervals Direction Average.._Quality Coverage modified_by
1        56019399     63                 64            1   forward              <NA>     <NA>          U‌​ser
  Polymorphism_Type Strand.Bias Strand.Bias_.50._P.va..lue Strand.Bias_.65._P.value Variant_Frequency
1              <NA>        <NA>                       <NA>                     <NA>              <NA>
  Variant_Nucleotide.s. Variant_P.Va..lue_.approximate.
1                  <NA>                            <NA> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-22T03:20:23.867

我一直在摆弄你文件的前两行，问题似乎出`#`在你的一个列名中。`read.table`默认情况下被视为`#`注释字符，因此它会读取您的标题，忽略后面的所有内容`#`并返回 13 列。

您将能够`read.table`使用参数读取文件`comment.char=""`。

顺便说一句，这也是提问者应该包括他们正在使用的文件/数据集示例的[另一个原因。](https://stackoverflow.com/questions/5963269/how-to-make-a-great-r-reproducible-example)

# windows - 如何检测 Windows 8 是否显示桌面

> ID：13996410
> 
> 赞同：2
> 
> 时间：2012-12-21T19:57:43.880
> 
> 标签：windows, windows-8

在用 C# 编写并在 Windows 8 上运行的 Windows 桌面应用程序中，如何检测 Windows 8 是否处于桌面模式（即显示桌面而不是现代 UI）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T21:39:58.580

尽管它是 C++ 语言，但[Start Screen Visibility Sample](http://code.msdn.microsoft.com/windowsdesktop/Start-screen-visibility-b1a72059)对您来说应该是一个很好的起点。它使用 COM 对象来获取系统上显示 Windows 应用商店应用程序或开始屏幕的所有监视器的状态，并说明如何在监视器状态更改或开始屏幕的可见性更改时接收通知。

# android - 如何在 Python 中生成 ODIN-1

> ID：13996411
> 
> 赞同：0
> 
> 时间：2012-12-21T19:58:01.413
> 
> 标签：android, python, encoding, udid, sha1

我需要在 Python 中生成字符串的 ODIN-1。官方[文档](http://code.google.com/p/odinmobile/wiki/ODIN1)指定将SHA-1应用于输入字符串/标识符，但我不确定是否需要事先对其执行其他操作？另外，最终输出是 SHA-1 的十六进制摘要还是其他什么？

例如，如何在 Python 中将此 MAC 转换为 ODIN-1？“74e2f543d2ce”

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:14:21.750

```
from hashlib import sha1

def odin1(mac_addr):
    """SHA1 hexdigest of hex representaiton of MAC address"""
    to_hash ''.join([i.decode('hex') for i in mac_addr.split(':')])
    return sha1(to_hash).hexdigest()

>>> odin1('1a:2b:3c:4d:5e:6f')
'82a53f1222f8781a5063a773231d4a7ee41bdd6f' 
```

让我们在您链接到的文档和我的答案之间逐行分解：

```
// NOTE: iOS returns MAC Address NOT a string, but a 6-byte array. 

// A human readable MAC Address may be represented as the following:

@"1a:2b:3c:4d:5e:6f";
@"1A2B3C4D5E6F"; 
```

在蟒蛇中：

```
>>> '1A'.decode('hex') == '1a'.decode('hex')
True 
```

所以我们可以将给我们的字符串转换成更合适的格式（减少“标点符号和大写的任何歧义”）：

```
>>> mac = "1a:2b:3c:4d:5e:6f".split(':')
>>> hex_mac = [m.decode('hex') for m in mac]
>>> hex_mac
['\x1a', '+', '<', 'M', '^', 'o'] 
```

我们可以将此列表视为一个字符串（就像我们使用字节数组一样）以从 SHA1 哈希函数中获得相同的结果。

当然，我们可以这样接收 MAC 地址：

```
>>> mac = '1A2B3C4D5E6F'
>>> hex_chunks = lambda s: [s[i: i+2] for i in range(0, len(s), 2)]
>>> [m.decode('hex') for m in hex_chunks(mac)]
['\x1a', '+', '<', 'M', '^', 'o'] 
```

因此，我们有责任适当地统一单个函数的输入，以便在所有可能的形式上运行。无论如何，我们的函数可以采用任何一种形式，最终结果才是最重要的：

```
>>> sha1(''.join(['\x1a', '+', '<', 'M', '^', 'o'])).hexdigest() 
```

将产生正确的哈希（根据您发布的链接）。

希望这有助于使我的答案更清楚。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:14:25.747

> 我需要在 Python 中生成字符串的 ODIN-1。

不，你没有，不是根据文档。

您生成 802.11 MAC 地址、ANDROID_ID 或 DeviceUniqueID 的 ODIN-1。一些相关的引用：

> 种子应该与操作系统返回的格式保持不变。
> 
> 注意：iOS 返回的 MAC 地址不是字符串，而是图表下方的 6 字节数组。
> 
> ... 将其表示为原始字节数组可防止标点符号和大写的任何歧义：

而 IIRC，`ANDROID_ID`是一个 64 位整数，既不是 MAC 也不是字符串。（我不知道`DeviceUniqueId`在 Windows Phone 上。）

因此，您可能需要生成 6 字节数组的 ODIN-1 `[0x74, 0xe2, 0xf5, 0x43, 0xd2, 0xce]`，而不是 12 字符的字符串`"74e2f543d2ce"`。该示例展示了如何在 Objective-C 中做到这一点；在 Python 中，它是：

```
mac = bytes([0x74, 0xe2, 0xf5, 0x43, 0xd2, 0xce]) 
```

或者，由于您的问题指定了 Android，因此您可能根本不想要任何格式的 MAC 地址……但我认为这只是一个错误的标签，并且您使用的是 iOS，并且*确实*想要 MAC 地址。

你是怎样做的？

> **散列步骤**：通过 SHA-1 散列函数传递标识符种子。

在 Python 中，这是：

```
hash = hashlib.sha1(mac) 
```

> 生成的消息摘要是 ODIN-1。

在 Python 中，这是：

```
digest = hash.hexdigest() 
```

把它放在一起：

```
hashlib.sha1(bytes([0x74, 0xe2, 0xf5, 0x43, 0xd2, 0xce])).hexdigest() 
```

结果是“40 个小写字符串”，正如文档所说的那样：

```
'10f4ab0775380aceaca5a2733604efa6d6364b08' 
```

此外，如果您正在寻找关于发布在 wiki 页面上的初步规范的说明，您为什么要在 SO 上询问它而不是在该页面上发表评论？

要回答您的第一个具体问题：

> 我不确定是否需要事先对其执行其他操作？

规范说：

> 种子应该与操作系统返回的格式保持不变。

回答你的第二个：

> 另外，最终输出是 SHA-1 的十六进制摘要还是其他什么？

规范说：

> 生成的消息摘要是 ODIN-1。
> 
> // 此哈希的格式应为 40 个小写字符串：

同时，项目附带了示例代码（正如您所期望的那样，因为它位于 googlecode 中）……但这并没有那么有用。

[iOS 示例](http://code.google.com/p/odinmobile/source/browse/Sample%20Code/iOS/trunk/ODIN/ODINViewController.m)完全缺少相关代码。它是由向导生成的通用 GUI 应用程序`#import "ODIN.h"`，`textView.text = [ODIN1() lowercaseString];`在`viewDidLoad`. 但是那个`ODIN.h`文件，以及相应的`ODIN.m`or`libODIN.a`或任何东西似乎都不在任何地方。（简要浏览一下`project.pbxproj`，显然应该有更多文件，他们显然只是没有签入。）

[Android 示例](http://code.google.com/p/odinmobile/source/browse/Sample%20Code/Android/trunk/src/org/odinmobile/android/ODIN.java)确实有相关代码，但它显然违反了规范。它获取`ANDROID_ID`Unicode 字符串，然后**将其编码为 iso-8859-1**，在结果字节上调用 SHA-1，并从中生成十六进制摘要。文档明确表示要完全按照操作系统返回的方式使用操作系统值；代码 Latin-1 对其进行编码。

另一方面，Windows sample 似乎确实像文档所说的那样 - 它获取 DeviceUniqueId 作为 a ，[并按](http://code.google.com/p/odinmobile/source/browse/Sample%20Code/Windows%20Phone/trunk/ODIN/ODIN.cs)`byte[]`原样使用它。（然而，代码实际上并不能工作，因为它使用了一个过时的 API 调用，它会抛出一个异常而不是返回一个`byte[]`......）

在这一点上，我不得不问你为什么首先要遵循这个规范。如果您尝试与其他人的代码进行互操作，您可能会关心该代码正在使用哪种相互矛盾的方式来解释此规范，而不是试图猜测设计者的意图。

更何况苹果已经明确告诉人们不要使用任何基于 MAC 的东西来代替 UDID，而 ODIN 是一个基于 MAC 来代替 UDID 的琐碎的东西……</p>

# c# - 以编程方式更改 DataGridView 行上的只读模式

> ID：13996412
> 
> 赞同：6
> 
> 时间：2012-12-21T19:58:10.340
> 
> 标签：c#, winforms, datagridview, readonly

在不解释整个上下文的情况下，我的问题基本上是这样的：

我在绑定到实体框架 DbSet: 的 Windows 窗体上有一个 datagridview `dbSet<TEntity>.Local.ToBindingList()`。

如果我将 datagridview 的`ReadOnly`属性设置为 true（在设计视图中），然后在我的代码中使用此语句：

```
 myDataGridView.Rows[rowIndex].ReadOnly = false; 
```

它直接通过而不改变价值！（不，我的数据源*不是*只读的。）

循环遍历行中的单元格并单独设置每个单元格的 ReadOnly 属性也不起作用：

```
 foreach (DataGridViewCell cell in myDataGridView.Rows[rowIndex].Cells)
  {
      cell.ReadOnly = false;
  } 
```

[.ReadOnly](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.readonly.aspx) -但它的行为就像由于某种原因`Gets or sets a value indicating whether the user can edit the cells of the DataGridView control.` 无法**设置一样。**

有没有理由会发生这种情况？我在想也许datagridview的`ReadOnly`属性会覆盖对特定行/单元格所做的任何更改（即*整个表单*必须是只读的或不是），但显然[这](http://social.msdn.microsoft.com/Forums/en/winformsdatacontrols/thread/7471dd6e-aced-4131-875b-ff2c645adbd9)对某人有用......

还有其他方法可以实现我的最终目标，但我想知道为什么我不能更改此属性，因为这将是针对我的情况的最简单的解决方案。

* * *

**编辑：**

让我试着澄清我的问题：

同样，我知道还有其他方法可以实现我的最终目标，但希望得到这个问题的答案：

对于原始示例很抱歉，但为了轻松复制问题，创建一个 WinForm 应用程序，在其上抛出一个 datagridview，然后将此代码粘贴到您的项目中：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        dataGridView1.ReadOnly = true;
        string[] row1 = new string[] { "test", "test1" };
        string[] row2 = new string[] { "test2", "test3" };
        string[] row3 = new string[] { "test4", "test5" };
        dataGridView1.Columns.Add("1", "1");
        dataGridView1.Columns.Add("2", "2");
        dataGridView1.Rows.Add(row1);
        dataGridView1.Rows.Add(row2);
        dataGridView1.Rows.Add(row3);

        dataGridView1.Rows[1].ReadOnly = false;
    }
} 
```

如果您在最后一行设置断点并单步执行，您将看到 ReadOnly 属性不会更改！为什么？？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-26T17:58:18.473

所以我为我的问题找到了解决方案/解决方法，尽管我仍然不确定为什么......

显然，如果要逐行更改 DataGridView 的 ReadOnly 属性，**则不能**设置*主要*的DataGridView.ReadOnly 属性，因为显然这会覆盖任何后续更改。

要重用我之前的示例，解决方法是遍历行并设置每个*ROW 的*ReadOnly 属性（而不是设置*datagridview 的*ReadOnly 属性），然后您可以单独更改每行的 ReadOnly 属性：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
    }

    private void Form1_Load(object sender, EventArgs e)
    {
        //dataGridView1.ReadOnly = true;
        string[] row1 = new string[] { "test", "test1" };
        string[] row2 = new string[] { "test2", "test3" };
        string[] row3 = new string[] { "test4", "test5" };
        dataGridView1.Columns.Add("1", "1");
        dataGridView1.Columns.Add("2", "2");
        dataGridView1.Rows.Add(row1);
        dataGridView1.Rows.Add(row2);
        dataGridView1.Rows.Add(row3);

        foreach (DataGridViewRow row in dataGridView1.Rows)
        {
            row.ReadOnly = true;
        }

        dataGridView1.Rows[1].ReadOnly = false;
    }
} 
```

这对我来说非常有用，但是任何关于为什么我的原始问题中的代码不能正常工作的见解都将不胜感激！

# java - java-库，用于从/压缩文件中提取/压缩文件到档案中

> ID：13996415
> 
> 赞同：1
> 
> 时间：2012-12-21T19:58:16.347
> 
> 标签：java, compression, zip, archive, tar

我正在寻找一个从档案中提取文件/压缩文件以创建档案的 java 库。

以下是我的要求 -

(1) 它应该提取最广泛/类型的档案 (2) 简单且只需要几行代码（与 java 的默认 zip 类不同）。(3) 生产级：无缺陷。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:00:55.870

Apache commons compress 似乎很合适，它可以处理很多不同的压缩类型并且使用起来非常简单。

[http://commons.apache.org/compress/index.html](http://commons.apache.org/compress/index.html)

# c++ - C++：链表和指针的乐趣

> ID：13996420
> 
> 赞同：2
> 
> 时间：2012-12-21T19:58:42.633
> 
> 标签：c++, pointers, linked-list

关于这里指针的使用有一件事我不明白`Cell *curr = head;`这里需要地址，`head`它用它做什么？

```
Cell *ConvertToListIter(Vector<int>& vector)
{
    Cell *head = new Cell;
    head->next = NULL;
    head->value = vector[0];
    Cell *curr = head;

    for (int i = 1; i < vector.size(); i++) {
        Cell *newCell = new Cell;
        newCell->next = NULL;
        newCell->value = vector[i];
        curr->next = newCell;
        newCell = curr;
    }

    return head;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T20:00:57.377

`Cell *curr = head;` 不采用的地址*-*`head`它采用的**值**。`head`它恰好`head`是一个指针：

```
Cell *head = new Cell; 
```

所以，在`Cell *curr = head;`执行完之后，两者都`curr`指向`head`同一个东西。

**根据您的评论**编辑：****

 **> 那么如果我删除其中一个，它会影响两者吗？它们指向内存中的相同地址，而不是相同值的两个副本是吗？

这是正确的。这两个指针指向内存中的单个对象。该对象只需要`delete`编辑一次。事实上，尝试`delete`两次会导致未定义的行为，并且经常会导致程序崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T21:24:42.310

指针持有一个内存地址，因此指针的值是内存中的一个位置。当您在指针上使用赋值运算符时，该指针的值将被复制到另一个指针中。因此，新指针将指向与第一个指针指向的内存位置相同的内存位置。

想象一下主要类型的复制分配：

```
int i = 1;
int j = i; 
```

`i`和的值`j`都为 1。指针也是如此。所以代码

```
Cell *head = new Cell;
Cell *curr = head; 
```

将导致`head`和`curr`指向 的地址`new Cell`。**

# ruby-on-rails - 带有权限连接表的声明式授权

> ID：13996421
> 
> 赞同：4
> 
> 时间：2012-12-21T19:58:46.953
> 
> 标签：ruby-on-rails, ruby, declarative-authorization

用户有权管理特定位置和类别组合的文章。

例如，Dave 可能被允许管理 Paris 的 HR 文章。保罗可能被允许管理伦敦的商业文章。

模型及其关联如下：

*   用户有很多权限
*   权限属于用户、位置和类别
*   类别有很多文章和权限
*   location 有很多文章和权限
*   文章属于位置和类别

我可以说：

```
has_permission_on :articles, :to => :manage do
  if_attribute :location => { :permissions => { :user_id => is {user.id} }, :category => { :permissions => { :user_id => is {user.id} } }
end 
```

当我对文章记录（其类别 ID 为 1893，位置 ID 为 2939）调用 allowed_to?(:delete) 时，将运行以下查询：

```
SELECT `categories`.*  FROM `categories`  WHERE `categories`.`id` = 1893 LIMIT 1
SELECT `permissions`.* FROM `permissions` WHERE (`permissions`.category_id = 1893)
SELECT `locations`.*   FROM `locations`   WHERE `locations`.`id` = 2939 LIMIT 1
SELECT `permissions`.* FROM `permissions` WHERE (`permissions`.location_id = 2939) 
```

我需要运行的是：

```
SELECT `permissions`.* FROM `permissions` WHERE (`permissions`.category_id = 1893 AND `permissions`.location_id = 2939) 
```

有什么办法可以做到这一点？

* * *

**更新**

好的，所以我现在在文章模型中有一个实例方法：

```
def permitted_user_ids
  Permission.select('user_id').where(:location_id => location_id, :category_id => category_id).map(&:user_id)
end 
```

我现在的规则是：

```
has_permission_on :articles, :to => :manage do
  if_attribute :permitted_user_ids => contains { user.id }
end 
```

现在，当我在类别 ID 为 1893 且位置 ID 为 2939 的文章记录上调用 allowed_to?(:delete) （或读取/更新/创建/管理）时，将运行以下查询：

```
SELECT user_id FROM `permissions` WHERE `permissions`.`category_id` = 1893 AND `permissions`.`location_id` = 2939 
```

...这正是我想要的。

除了 with_permissions_to 范围的行为非常奇怪。

```
Article.with_permissions_to(:read) 
```

现在生成：

```
SELECT `articles`.* FROM `articles` WHERE (`articles`.`id` = 9473) 
```

...其中 9473 是当前用户的 ID！

我很困扰。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-03T12:17:40.987

您可以使用子类并使用[cancan](https://github.com/ryanb/cancan)管理权限。你可以有一个顶级文章，然后所有类型的文章都可以是子类，在子类中你可以使用 cancan 来管理它们的权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T12:19:20.493

这应该是一个评论，但我仍然是 45 :(

你说`permission`属于`user`,`location`和`category`。因此，权限表将具有 user_id、location_id 和 category_id 列。

如果这是真的，那么您为什么要声明该类别`belongs_to`权限和位置`belongs_to`权限？当然应该是关系`has_many`？

您应该`has_many`在没有外键（类别和位置）`belongs_to`的模型和有（权限）的模型上使用。

如果这一切只是您的错字，请原谅我，您真正的意思是权限 belongs_to 用户和 has_many 位置和类别。

# logic - 给定两支球队的统计数据，确定获胜者的逻辑是什么？

> ID：13996425
> 
> 赞同：-1
> 
> 时间：2012-12-21T19:58:59.997
> 
> 标签：logic

应该很简单，但我无法理解所需的数学。

假设您有团队 1（总共 80 人）与团队 2（总共 70 人）。

仅使用这两个变量，确定获胜者的最佳/最公平的方法是什么？显然，整体越高，Team 1 获胜的机会就越大。

我一直在尝试查找答案，但不幸的是，我并不完全知道我想要弄清楚的单词或措辞。

只是寻找一个逻辑，或者如果有人能指出我正确的搜索方向，那就太好了。

编辑：基本上，在第 1 队与第 2 队的比赛中，当我得到的唯一统计数据是双方的总和时，我如何计算获胜者？总体意思是球队的总分满分100分。（想想运动队，球员的平均分就是球队的总分）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:06:29.033

这个问题不清楚，因为您尚未定义如何选择获胜者的标准。如果获胜者是总排名最高的球队，那么很简单，第一队获胜。如果你在做某种加权抽签——比如NBA选秀抽签——得分越高的球队赢得抽签的机会就越大，那么你就会把它想象成碗里的纸片。第 1 队获得 8 件，第 2 队获得 7 件。碗里有 15 颗棋子，A 队有 8/15 或 53% 的几率将其中一颗棋子挑出来。添加一个排名为 30 的团队 3，因此他们得到 3 张纸。现在碗里有 18 个，第 1 队有 8/18 或 44.4% 的机会获胜。

如果这就是你所追求的，那么你可以编写一个公式来挑选加权随机获胜者——随机选择，但其中一个团队比另一个团队更有可能被选中。

# java - 将内部类转换为超类

> ID：13996429
> 
> 赞同：1
> 
> 时间：2012-12-21T19:59:18.503
> 
> 标签：java, casting, inner-classes

我实际上是通过代码行将子类转换为超类。由于特殊需要，我制作了一个内部类，但我无法将这个类转换为超类，至少使用相同的代码

例子

```
((Indicator)listaIndicatori.elementAt(i)).draw(this,schermo); 
```

作品。

```
((Indicator)listaIndicatori.elementAt(i)).draw(this,schermo); 
```

不适用于内部指标类。

Inner 类在指标类中声明如下

```
public class Bars extends JPanel 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:05:53.137

如果内部类不扩展外部类，则强制转换不起作用：

```
public class Bars extends JPanel 
```

`Bars`不延长`Indicator`。

你可以通过扩展来解决这个问题`Indicator`，如果`Indicator`它本身扩展`JPanel`（直接或间接，如果你想保持`JPanel`继承`Bars`）：

```
public class Bars extends Indicator 
```

**更新**：但是，如果您确实需要从内部类实例访问外部类实例，您可以在内部使用此方法`Bars`：

```
public Indicator getIndicator() {
  return Indicator.this;
} 
```

并像这样使用它：

```
(((Indicator.Bars)listaIndicatori.elementAt(i)).getIndicator()).draw(this,schermo); 
```

感谢 Jan Dvorak 在评论中指出这一点！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:08:12.810

```
class Indicator {
  ....
  class Bar extends JPanel {
    ....
    void foo() {
      ((Indicator)listaIndicatori.elementAt(i)).draw(Indicator.this,schermo);
    }
  }
} 
```

在内部`Bar`，外部类的实例由 访问`Indicator.this`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T20:06:25.610

仅当变量确实引用了具体类型为 B 或扩展 B 的对象时，才能将 A 类型的变量转换为 B 类型。

例如：

```
Object o = "hello";
String s = (String) o; 
```

有效，因为变量`o`引用了一个字符串*对象。*

但是做

```
Object o = "hello";
Integer i = (Integer) o; 
```

不起作用，因为 o 不引用整数。

很明显，将 JPanel 的实例转换为 Indicator 是行不通的，除非该类实际实现了 Indicator 接口。该类是否是内部类无关紧要。

# tomcat - 集群会话存储位置

> ID：13996430
> 
> 赞同：0
> 
> 时间：2012-12-21T19:59:21.880
> 
> 标签：tomcat, cloudbees

关于[应用集群](http://wiki.cloudbees.com/bin/view/RUN/AppClustering)，我们是否必须创建一个单独的会话存储位置？您在该页面上提到了几个选项（MySQL、CLoudant、RDS 等），这是否意味着我们必须设置其中一个并让它以某种方式与我们的集群交互？或者这一切都是通过[会话存储](http://wiki.cloudbees.com/bin/view/RUN/AppSessionStores)自动设置的？如果已设置，是否在幕后使用 CloudBees MySQL 进行设置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T05:13:09.933

如果内置的 cloudbees 会话集群服务已打开 - 那么它会自动在默认容器中为您设置。

对于诸如 MySQL 等之类的东西，您可以使用支持会话数据的会话提供程序/框架。

# c# - 如何将可为空的 guid 与 linq 查询中的 guid 进行比较？

> ID：13996433
> 
> 赞同：4
> 
> 时间：2012-12-21T19:59:40.327
> 
> 标签：c#, linq, guid

尝试运行时出现错误：

```
 Nullable<Guid> ng = corpid;

  var qry1 = from c in entities.Transactions
             join p in entities.Products on c.CorporationId equals (Nullable<Guid>) p.CorporationId
              where c.Branch == br &&
                    c.AccountNumber == accountnumber &&
                    c.CorporationId == ng
              orderby c.TransactionDate descending
              select new
              {
                Date = c.TransactionDate,
                RefNo = c.ReferenceNumber,
                DlvryAcct = c.DeliveryAccount,
                Desc = p.Description,
                GasQty = c.GasQuantity,
                Total = c.Amount,
                Balance = c.Balance
              }; 
```

这是消息：

```
LINQ to Entities 无法识别该方法
'System.Linq.IQueryable`1[f__AnonymousType1`7[System.Nullable`1[System.DateTime],
  System.String,System.String,System.String,System.Nullable`1[System.Decimal],
  System.Nullable`1[System.Decimal],System.Nullable`1[System.Decimal]]]
反向[f__AnonymousType1`7](System.Linq.IQueryable`1[f__AnonymousType1`7[System.Nullable`1[System.DateTime],
  System.String,System.String,System.String,System.Nullable`1[System.Decimal],
  System.Nullable`1[System.Decimal],System.Nullable`1[System.Decimal]]])'
方法，并且该方法不能翻译成商店表达式。

```

我认为可空 guid 的强制转换在这里不起作用。The`c.CorporationId`是一个可为空的 guid，但 the`p.corporationid`只是一个 guid。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:04:17.200

您是否尝试过替代铸造和等同`c.CorporationId`于？：`ng.Value`

```
 Nullable<Guid> ng = corpid;

  var qry1 = from c in entities.Transactions
             join p in entities.Products on c.CorporationId equals p.CorporationId
              where c.Branch == br &&
                    c.AccountNumber == accountnumber &&
                    c.CorporationId == ng.Value
              orderby c.TransactionDate descending
              select new
              {
                Date = c.TransactionDate,
                RefNo = c.ReferenceNumber,
                DlvryAcct = c.DeliveryAccount,
                Desc = p.Description,
                GasQty = c.GasQuantity,
                Total = c.Amount,
                Balance = c.Balance
              }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:26:43.177

似乎在抱怨 select 子句中的匿名构造函数。 `c.TransactioDate`, `c.GasQuantity`,`c.Amount`和`c.Balance`所有似乎都是可空的。尝试这样的事情只是为了看看这些领域是否有问题。

```
Nullable<Guid> ng = corpid;

var qry1 = from c in entities.Transactions
           join p in entities.Products on c.CorporationId equals (Nullable<Guid>) p.CorporationId
           where c.Branch == br &&
                c.AccountNumber == accountnumber &&
                c.CorporationId == ng.Value
           orderby c.TransactionDate descending
           select new
           {
               Date = c.TransactionDate.Value,
               RefNo = c.ReferenceNumber,
               DlvryAcct = c.DeliveryAccount,
               Desc = p.Description,
               GasQty = c.GasQuantity.Value,
               Total = c.Amount.Value,
               Balance = c.Balance.Value
           }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-09-20T01:54:59.163

这是一个老问题，但由于没有答案，这里是瘦的。在 C# 中 Guid 是一个不可为空的对象，所以你不能将 null 映射到 Guid，但你可以将 Null 映射到 Guid?，所以这里是解决方案：

```
var qry1 =    from c in entities.Transactions
              join p in entities.Products on c.CorporationId equals p.CorporationId
             where c.Branch == branch
                && c.AccountNumber == accountNumber
                && ((Guid?)c.CorporationId).Value == null // This is the secret sauce
           orderby c.TransactionDate descending
            select new
                   {
                       Date = c.TransactionDate,
                       RefNo = c.ReferenceNumber,
                       DlvryAcct = c.DeliveryAccount,
                       Desc = p.Description,
                       GasQty = c.GasQuantity,
                       Total = c.Amount,
                       Balance = c.Balance
                   }; 
```

但是，我可能会这样做：

```
var qry1 =    from c in entities.Transactions.Where(t => ((Guid?)t.CorporationId).Value == null)
              join p in entities.Products on c.CorporationId equals p.CorporationId
             where c.Branch == branch
                && c.AccountNumber == accountNumber
           orderby c.TransactionDate descending
            select new
                   {
                       Date = c.TransactionDate,
                       RefNo = c.ReferenceNumber,
                       DlvryAcct = c.DeliveryAccount,
                       Desc = p.Description,
                       GasQty = c.GasQuantity,
                       Total = c.Amount,
                       Balance = c.Balance
                   }; 
```

但是您必须问这个问题，如果您必须强制转换，为什么模型将此列标识为不可为空（如果设置正确，此时您可能不会面临必须强制转换的问题）。

# php - 如何使用这样的脚本或文本编辑器批量更新位于 a.html 文件中的基本一对一键结构？

> ID：13996436
> 
> 赞同：0
> 
> 时间：2012-12-21T19:59:45.723
> 
> 标签：php, javascript, html, json, text-editor

我对位于 .html 中的用户有一个一对一的邮政编码结构，看起来像......

```
...
'80135': 'user1',
'80136': 'user1',
'80137': '',
'80138': '',
'80202': 'user2',
'80203': 'user2',
'80204': '',
'80205': '',
'80206': '',
'80207': '',
... 
```

我想为 user3 获取一个批量列表邮政编码并填写或覆盖旧用户。因此，例如，如果我有 user3 的邮政编码 (80202,80203,80204)，那么我之前的代码块将更改为...

```
...
'80135': 'user1',
'80136': 'user1',
'80137': '',
'80138': '',
'80202': 'user3',
'80203': 'user3',
'80204': 'user3',
'80205': '',
'80206': '',
'80207': '',
... 
```

使用文本编辑器的原因是现在完成我的设置，但理想情况下，最好有一个客户端应用程序，我们的非程序员团队可以根据需要更新和进行更改，因此为此编写一个脚本对于未来的计划会很好。我通过...将内容传递到我的网站

```
var list_load = {<?php include_once('list.html'); ?>}; 
```

因为我相信有些人可能对这些信息的存储有不同的想法，这个列表很长，有 35,000 行代码，所以任何关于完全改变我的代码的想法都考虑一个迁移数据的过程。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:28:01.117

根据您提供的信息，我将假设您的示例代码是 JSON 对象的子集。我还将假设您的对象中的邮政编码与用户只有*一对一的*关系，因为您没有明确说明其他情况，并且现有的对象结构不允许*一对一-很多*关系。鉴于所有这些假设，您当前问题的解决方案是将 JSON 加载到 PHP 中，在那里进行更改，然后用更新的 JSON 对象覆盖整个文件。

```
$json = file_get_contents('list.html');
$array = json_decode($json, true);

$oldUser = 'user2';
$newUser = 'user3';
$listZipCodes = array("80204"); // list of zip codes to update

// Update the JSON based on user ...
foreach ($array as $zipCode => $user) {
    if ($user === $oldUser) {
        $array[$zipCode] = $newUser;
    }
}

// Update the JSON based on zip code ...
foreach (array_keys($array) as $zipCode) {
    if (in_array($zipCode, $listZipCodes)) {
        $array[$zipCode] = $newUser;
    }
}

$json = json_encode($array);

file_put_contents('list.html', $json); 
```

同样，这一切都假设**list.html**看起来像这样......

```
{
    "80135": "user1",
    "80136": "user1",
    "80137": "",
    "80138": "",
    "80202": "user2",
    "80203": "user2",
    "80204": "",
    "80205": "",
    "80206": "",
    "80207": ""
} 
```

请记住，它必须是**有效的 JSON 对象表示法**，`list.html`以便 PHP 能够正确解析它。您现有的示例不适用于 PHP，因为您使用的是单引号而不是双引号，这是 JSON 规范的要求。因此，您必须确保该部分在您的 list.html 文件中有效。

除此之外，我非常不鼓励您采用这种方法，因为它会导致许多不容易解决的严重问题。例如，您无法确保使用此方法不会损坏您的数据，因为任何两个 PHP 脚本都可能尝试同时覆盖文件（*没有数据完整性*）。此外，如果列表足够大，如果不花费大量不必要的 CPU 和内存问题，您将无法轻松实现此规模。此外，您无法控制谁可以直接编辑文件，因此无法控制流向尝试使用该数据的底层应用程序代码的数据流。

更好的解决方案是使用数据库，这样您就可以控制数据及其用户权限，此外，您还可以为非程序员提供一个前端，通过 PHP 通过您的前端编辑/修改/读取数据.

# cmake - 如何在 Windows 上使 add_custom_command 配置特定？

> ID：13996440
> 
> 赞同：11
> 
> 时间：2012-12-21T19:59:54.397
> 
> 标签：cmake

为了在我的一个项目中运行单元测试，我有一个自定义命令，它将可执行文件、库和其他相关文件复制到其他地方，以便可以使用特定设置运行它们，而不是在它们所在的地方运行它们建成。在 Linux 上，这非常简单。但是在 Windows 上，由于 cmake 将配置名称附加到输出目录（我通常喜欢它，但在这种情况下它搞砸了我正在做的事情），我遇到了一些障碍。这使得很难确定生成的库或可执行文件的路径。例如，如果我有一个自定义命令，它只是将可执行文件复制到另一个目录

```
set(EXE_PATH "${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/exeName${CMAKE_EXECUTABLE_SUFFIX}")
set(NEW_EXE_PATH "${RUN_UNITTESTS_DIR}/exeName${CMAKE_EXECUTABLE_SUFFIX}")

add_custom_command(TARGET unitTests POST_BUILD
                   COMMAND ${CMAKE_COMMAND} ARGS -E copy "${EXE_PATH}" "${NEW_EXE_PATH}") 
```

它会在 Windows 上窒息，因为可执行文件实际上不在`CMAKE_RUNTIME_OUTPUT_DIRECTORY`. 根据配置类型，它位于`${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/Release`或`${CMAKE_RUNTIME_OUTPUT_DIRECTORY}/Debug`中。在 Linux 上，可以通过使用`CMAKE_BUILD_TYPE`并将其添加到路径中来轻松解决此问题，但这不适用于 Windows，因为在 Windows 上，cmake 会生成多个配置，而不仅仅是一个。所以，我想做的是

```
add_custom_command(TARGET unitTests POST_BUILD
                   debug
                   COMMAND ${CMAKE_COMMAND} ARGS -E copy "${DEBUG_EXE_PATH}" "${DEBUG_NEW_EXE}")

add_custom_command(TARGET unitTests POST_BUILD
                   release
                   COMMAND ${CMAKE_COMMAND} ARGS -E copy "${RELEASE_EXE_PATH}" "${RELEASE_NEW_EXE}") 
```

并且一些 cmake 命令看到能够做到这一点（例如`target_link_libraries`），但据我所知，`add_custom_target`不提供这种能力。所以，问题是我会怎么做？如何在 Windows 上使自定义命令特定于配置？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-10-06T00:14:51.243

它可以在下一个“生成器表达式”（CMake 2.8.10）的帮助下解决：

*   `$<0:...>` = 空字符串（忽略“...”）
*   `$<1:...>` =“...”的内容
*   `$<CONFIG:cfg>`= '1' 如果配置为“cfg”，否则为 '0'

您可以将它们组合起来以达到您需要的行为（伪代码）：

`if debug then ${DEBUG_EXE_PATH} elseif release then ${RELEASE_EXE_PATH}`

翻译为：

`$<$<CONFIG:debug>:${DEBUG_EXE_PATH}>$<$<CONFIG:release>:${RELEASE_EXE_PATH}>`

所以你的字符串看起来像：

```
add_custom_command(TARGET unitTests POST_BUILD
                       COMMAND ${CMAKE_COMMAND} ARGS -E copy "$<$<CONFIG:debug>:${DEBUG_EXE_PATH}>$<$<CONFIG:release>:${RELEASE_EXE_PATH}>" "$<$<CONFIG:debug>:${DEBUG_NEW_EXE}>$<$<CONFIG:release>:${RELEASE_NEW_EXE}>") 
```

详细信息：[CMake：add_custom_command](https://cmake.org/cmake/help/latest/command/add_custom_command.html)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-21T23:32:53.167

这是为与 一起使用而提供的生成器表达式的情况[`add_custom_command`](https://cmake.org/cmake/help/latest/command/add_custom_command.html)。

在您的情况下，您希望编译的 exe 的完整路径，以及附加到目标目录的文件名。这些分别是`$<TARGET_FILE:unitTests>`和`$<TARGET_FILE_NAME:unitTests>`。

您的完整命令将是：

```
add_custom_command(TARGET unitTests POST_BUILD
                   COMMAND ${CMAKE_COMMAND} -E
                       copy $<TARGET_FILE:unitTests>
                            ${RUN_UNITTESTS_DIR}/$<TARGET_FILE_NAME:unitTests>) 
```

# mainframe - 使用 JCL 在 DSN 中包含上个月日期的年份

> ID：13996444
> 
> 赞同：1
> 
> 时间：2012-12-21T20:00:06.193
> 
> 标签：mainframe, jcl, syncsort

我有一个类似于“数据集名称中上个月年份的 JCL”问题的请求。该问题的答案使用了 ALTER 语句，它假定知道日期。我有 JCL 将年份附加到 DSN，但是在一月份，我需要前一年。我认为这在 SYNCSORT 或 DFSORT 的帮助下是可能的，但我对这两种方法都没有经验。任何帮助表示赞赏。

这是当前的 JCL：

```
//B999999X JOB (80594,XXX),'MAKE DATE',                      
//         CLASS=C,MSGCLASS=C,NOTIFY=&SYSUID                 
//STEP0100 EXEC PGM=EZACFSM1                                 
//SYSOUT   DD SYSOUT=(*,INTRDR)                              
//SYSIN    DD DATA,DLM=@@                                    
//B8025501 JOB (,9999),'TESTING',                            
//         CLASS=A,MSGCLASS=C,MSGLEVEL=(1,1),NOTIFY=&SYSUID  
//STEP01   EXEC PGM=IEFBR14                                  
//FILE01   DD DSN=B999999.TEST.MYFILE.FUEL&YR2,              
//            DISP=(NEW,CATLG,DELETE),                       
//            UNIT=SYSDA,                                    
//            SPACE=(CYL,(10,10),RLSE),                      
//            DCB=(LRECL=80,RECFM=FB,BLKSIZE=0)              
/*                                                           
@@ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T22:37:48.537

实际上，您首先引用的问题 的[答案是“最好的解决方案是使用您的作业调度程序的功能。”](https://stackoverflow.com/a/13314232/624463) *这仍然是最好的答案。* 我展示了如何做某事并不*意味着*我认为这是最好的或最可维护的方法。

您可以使用[Rexx](https://www.ibm.com/docs/en/zos/2.4.0?topic=tsoe-zos-rexx-reference)或[Unix System Services](https://www.ibm.com/docs/en/zos/2.4.0?topic=zos-unix-system-services) shell 脚本或[awk](https://www.ibm.com/docs/en/zos/2.4.0?topic=descriptions-awk-process-programs-written-in-awk-language)脚本或[Perl](https://www.rocketsoftware.com/product-categories/mainframe/perl-for-zos)来执行此操作，再次构造一个[ALTER](https://www.ibm.com/docs/en/zos/2.4.0?topic=commands-alter)语句以在后续步骤中使用，将静态命名的数据集重命名为包含所需日期限定符的数据集.

[这里](https://stackoverflow.com/questions/11464619/how-do-we-get-the-current-date-in-a-ps-file-name-qualifier-using-jcl/11470381#11470381)还有一些其他的技巧。

但是，如果你有一个可用的作业调度程序包，你真的应该使用它的功能。

上面提出的解决方案的示例如下。

Rexx 程序 MKALTR

```
dsn = Arg(1)                                                  
Parse Value Date('O') With yy '/' mm '/' dd                   
If mm = 1 Then                                                 
  If yy > 0 Then                                              
    yy = yy - 1                                               
  Else                                                        
    yy = 99                                                    
outLine.1 = ' ALTER ' || dsn || ' - '                         
outLine.2 = ' NEWNAME(' || dsn || yy || ')'                   
outLine.0 = 2                                                 
Address TSO 'EXECIO * DISKW OUTPUT01 ( STEM' outLine. 'FINIS )'
Exit 
```

JCL 运行 Rexx 程序 MKALTR

```
//*
// SET &DS=MY.DATASET.NAME
//*
//CATLG    EXEC PGM=IEFBR14                                     
//STDOUT   DD  DISP=(,CATLG),                                   
//             DSN=&DS,                       
//             AVGREC=U,                                        
//             LRECL=80,                                        
//             RECFM=FB,                                        
//             SPACE=(80,(1,1))                                 
//*                                                             
//MKALTER  EXEC PGM=IKJEFT1B,PARM='MKALTR &DS'
//SYSEXEC  DD  DISP=SHR,DSN=dataset.where.rexx.code.resides                  
//SYSTSPRT DD  SYSOUT=*                                         
//SYSPRINT DD  SYSOUT=*                                         
//SYSTSIN  DD  DUMMY                                            
//OUTPUT01 DD  DISP=(,PASS),                                     
//             AVGREC=K,                                        
//             LRECL=80,                                        
//             RECFM=FB,                                        
//             SPACE=(80,(2,1))                                  
//*                                                             
//DOALTER  EXEC PGM=IDCAMS                                      
//SYSIN    DD  DISP=(OLD,DELETE),DSN=*.MKALTER.OUTPUT01         
//SYSPRINT DD  SYSOUT=*                                          
//* 
```

Shell 脚本 mkaltr

```
let "mon=`date +'%m'`"     
let "yr=`date +'%y'`"      
if [ $mon -eq 01 ]         
then                       
  let "outyr=$yr-1"        
fi                         
echo \ ALTER $1 -          
echo \ \ NEWNAME\($1$outyr\) 
```

JCL 运行 shell 脚本 mkaltr

```
//*
// SET &DS=MY.DATASET.NAME
//*
//CATLG    EXEC PGM=IEFBR14                         
//STDOUT   DD  DISP=(,CATLG),                       
//             DSN=&DS,          
//             AVGREC=U,                            
//             LRECL=80,                             
//             RECFM=FB,                            
//             SPACE=(80,(1,1))                     
//*                                                 
//MKALTER  EXEC PGM=BPXBATCH,                       
// PARM='SH /path/to/script/mkaltr &DS'    
//STDOUT   DD  DISP=(,PASS),                        
//             AVGREC=U,                            
//             LRECL=80,                            
//             RECFM=FB,                            
//             SPACE=(80,(2,1))                     
//STDERR   DD  SYSOUT=*                             
//*                                                 
//DOALTER  EXEC PGM=IDCAMS                          
//SYSIN    DD  DISP=(OLD,DELETE),DSN=*.MKALTER.STDOUT
//SYSPRINT DD  SYSOUT=*                             
//* 
```

使用 awk 的 Shell 脚本 mkaltr

```
date +"$1 %m %y" | awk '                             
{                                                    
yr = $3                                              
if ( $2 = 1 ) yr -= 1                                
if ( yr > 100 ) yr -= 100                             
printf( " ALTER %s -\n NEWNAME(%s%2d)\n", $1, $1, yr )
}' 
```

JCL 运行 shell 脚本 mkaltr

```
//*
// SET &DS=MY.DATASET.NAME
//*
//CATLG    EXEC PGM=IEFBR14                         
//STDOUT   DD  DISP=(,CATLG),                       
//             DSN=&DS,          
//             AVGREC=U,                            
//             LRECL=80,                            
//             RECFM=FB,                            
//             SPACE=(80,(1,1))                     
//*                                                  
//MKALTER  EXEC PGM=BPXBATCH,                       
// PARM='SH /path/to/script/mkaltr &DS'   
//STDOUT   DD  DISP=(,PASS),                        
//             AVGREC=U,                             
//             LRECL=80,                            
//             RECFM=FB,                            
//             SPACE=(80,(2,1))                     
//STDERR   DD  SYSOUT=*                             
//*                                                  
//DOALTER  EXEC PGM=IDCAMS                          
//SYSIN    DD  DISP=(OLD,DELETE),DSN=*.MKALTER.STDOUT
//SYSPRINT DD  SYSOUT=*                             
//* 
```

Perl 程序 mkaltr

```
if ( @ARGV ) {                                                         
  $dsn = shift( @ARGV );                                                
} else {                                                               
  die "dataset name required";                                         
}                                                                      

($sec,$min,$hour,$mday,$mon,$year,$wday,$yday,$isdst) = localtime(time);
if ($mon == 0) {                                                       
  $year -= 1                                                           
}                                                                      
if ($year >= 100) {                                                    
  $year -= 100;                                                         
}                                                                      
printf (" ALTER %s -\n NEWNAME(%s%2d)\n", $dsn, $dsn, $year); 
```

JCL 运行 Perl 程序 mkaltr

```
//*
// SET &DS=MY.DATASET.NAME
//*
//CATLG    EXEC PGM=IEFBR14                              
//STDOUT   DD  DISP=(,CATLG),                            
//             DSN=&DS,               
//             AVGREC=U,                                 
//             LRECL=80,                                 
//             RECFM=FB,                                  
//             SPACE=(80,(1,1))                          
//*                                                      
//MKALTER  EXEC PGM=BPXBATCH,                            
// PARM='SH perl /path/to/perl/program/mkaltr &DS'
//STDOUT   DD  DISP=(,PASS),                             
//             AVGREC=U,                                 
//             LRECL=80,                                 
//             RECFM=FB,                                 
//             SPACE=(80,(2,1))                          
//STDERR   DD  SYSOUT=*                                  
//*                                                      
//DOALTER  EXEC PGM=IDCAMS                               
//SYSIN    DD  DISP=(OLD,DELETE),DSN=*.MKALTER.STDOUT    
//SYSPRINT DD  SYSOUT=*                                  
//* 
```

# wordpress - 在保存 {clicking Update} 时丢失部分 wordpress 帖子内容

> ID：13996446
> 
> 赞同：0
> 
> 时间：2012-12-21T20:00:07.717
> 
> 标签：wordpress

每当我打开帖子进行编辑并单击`update button` 以反映更改时，我最终都会丢失帖子的一部分。我正在运行最新版本的 wordpress`wordpress 3.5`

关于我可以从哪里开始调试问题的任何提示，或者这是`wordpress 3.5`版本的错误。我在以前的任何版本中都没有遇到此错误。

# c# - 来自 .net WCF 服务的 405 响应错误

> ID：13996448
> 
> 赞同：1
> 
> 时间：2012-12-21T20:00:33.757
> 
> 标签：c#, asp.net, wcf, request, http-status-code-405

我正在尝试在 asp.net 中为我的应用程序编写后端，但在来自 Ext 的 Ajax 请求后，我的 WCF 服务无法返回 POST 响应。相反，我收到 405 'Method not allowed' 错误。

这是我的要求：

```
Ext.Ajax.request({
    type: 'POST',
    url: 'http://localhost:35798/RestServiceImpl.svc/export',
    params: {
        html        : {'array': document.body.innerHTML}
    },
    success : function(response){
    console.log('RESPONSE !', response);
        //me.onSuccess(response, callback, errback);
    },
    failure : function(response){
        console.log('RESPONSE FAIL !', response);
    }
}); 
```

这是我的界面：

```
namespace RestService
{
    public class RestServiceImpl : IRestServiceImpl
    {
        #region IRestServiceImpl Members

        public string JSONData()
        {
            return "Your POST request";
        }

        #endregion
    }
} 
```

和服务代码：

```
using System.ServiceModel;
using System.ServiceModel.Web;
using System.Web.Script.Services;

namespace RestService
{

    [ServiceContract]
    public interface IRestServiceImpl
    {
        [OperationContract]
        [ScriptMethod]
        [WebInvoke(Method = "POST",
            ResponseFormat = WebMessageFormat.Json,
            BodyStyle = WebMessageBodyStyle.Bare,
            UriTemplate = "export")]
        string JSONData();
    }
} 
```

最后是配置：

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <services>
      <service name="RestService.RestServiceImpl" behaviorConfiguration="ServiceBehaviour">
        <!-- Service Endpoints -->
        <!-- Unless fully qualified, address is relative to base address supplied above -->
        <endpoint address ="" binding="webHttpBinding" contract="RestService.IRestServiceImpl" behaviorConfiguration="web">
          <!-- 
              Upon deployment, the following identity element should be removed or replaced to reflect the 
              identity under which the deployed service runs.  If removed, WCF will infer an appropriate identity 
              automatically.
          -->
        </endpoint>
      </service>
    </services>

    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehaviour">
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="false"/>
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="web">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T08:01:55.000

这可能是一个跨域问题。例如，如果您的服务在 at`http://localhost:35798`并且发出 AJAX 请求的网页在 at `http://localhost:80`，浏览器仍将其视为*不同*的域（即使只有端口号不同）。在这种情况下，某些浏览器发出 CORS 请求，如果您的服务不处理它，将返回 405。您的选择是（1）避免跨域请求，（2）实施 CORS（不会帮助浏览器不支持它），或（3）使用 JSONP。

# java - “xmlns:log4j”是 标签？

> ID：13996453
> 
> 赞同：6
> 
> 时间：2012-12-21T20:01:02.047
> 
> 标签：java, logging, configuration, log4j

`xmlns:log4j="http://jakarta.apache.org/log4j/"`我看到标签中包含一堆示例 log4j 配置，`<log4j:configuration>`这个属性是必需的吗？在我的配置中包含此属性对我有什么作用？

例子：

```
<log4j:configuration xmlns:log4j="http://jakarta.apache.org/log4j/">
    <appender name="infoLogsFile" class="org.apache.log4j.RollingFileAppender">
        <param name="File" value="MyApplication.log"/>     
        <layout class="org.apache.log4j.PatternLayout"> 
            <param name="ConversionPattern" value="%d %-5p [%c] %m%n"/>
        </layout>
    </appender>
    <root> 
        <priority value ="DEBUG" /> 
        <appender-ref ref="infoLogsFile"/>
    </root>
</log4j:configuration> 
```

我可以这样做吗？

```
<log4j:configuration>
    <appender name="infoLogsFile" class="org.apache.log4j.RollingFileAppender">
        <param name="File" value="MyApplication.log"/>     
        <layout class="org.apache.log4j.PatternLayout"> 
            <param name="ConversionPattern" value="%d %-5p [%c] %m%n"/>
        </layout>
    </appender>
    <root> 
        <priority value ="DEBUG" /> 
        <appender-ref ref="infoLogsFile"/>
    </root>
</log4j:configuration> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T20:07:12.967

该`xmlns`属性指定前缀为的元素`log4j`由该 URL 引用的模式定义。Log4J 在尝试解析配置文件之前实际上并不执行模式验证，因此它实际上不是必需的。

# javascript - 如何使用 JavaScript 创建文件？

> ID：13996454
> 
> 赞同：5
> 
> 时间：2012-12-21T20:01:07.547
> 
> 标签：javascript, jquery

> **可能重复：**
> [强制下载 'data:text/plain' URL](https://stackoverflow.com/questions/6468517/force-download-of-datatext-plain-url)
> [从 javascript 中的变量创建可下载链接](https://stackoverflow.com/questions/8355750/create-a-downloadable-link-from-a-vriable-in-javascript)

我见过可以创建/生成文件（.txt、.pdf、.vcard）的插件，但我不确定它是如何完成的。这些是通过 Ajax 完成的吗？还是我缺少一个对象/方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:05:41.607

Html5 确实支持访问文件系统。下面的链接有一个很好的例子：

[http://www.html5rocks.com/en/tutorials/file/filesystem/](http://www.html5rocks.com/en/tutorials/file/filesystem/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:13:10.957

这是[FS API](http://www.w3.org/TR/file-system-api/)的规范。不幸的是，对它的[支持](http://caniuse.com/#feat=filesystem)非常轻。不过，如果你想在移动应用程序中使用它，PhoneGap 已经[实现了它](http://docs.phonegap.com/en/2.2.0/cordova_file_file.md.html#File)。

如果您编写 GreaseMonkey 脚本，则您的[GM_xmlhttpRequest](http://wiki.greasespot.net/GM_xmlhttpRequest)没有相同的来源策略。

# c++ - 与#define KB_UP 72 for c++ 相关的其他定义是什么？它们都是什么？

> ID：13996455
> 
> 赞同：2
> 
> 时间：2012-12-21T20:01:14.793
> 
> 标签：c++, windows, keyboard-events

因此，我正在努力学习如何使用 C++ 获得 DIRECT 键盘输入。现在我知道如何使用 getch() 函数和那种性质的函数，但我不知道如何定义所有不同的键盘输入。这些是我正在寻找的那种。

#define KB_UP 72

#define KB_DOWN 80

#define KB_LEFT 75

#define KB_RIGHT 77

#define KB_ESCAPE 27

#define KB_ENTER 28

那么最终其他人是什么，还有其他人吗？我在 windows 上的 code::blocks 上使用 c++。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:17:18.847

查看 winapi 函数的 windows API 文档，该函数 `GetAsyncKeyState()`有一个链接到一个页面，该页面列出了该函数返回的虚拟键代码。该列表包括您在 q 中提到的代码，但它们的前缀是 VK_ 而不是 KB_。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms646293(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646293(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:05:34.427

抱歉，这不能直接回答您的问题，但我已经非常喜欢本教程的键盘输入。

[http://www.gamedev.net/blog/355/entry-2250186-designing-a-robust-input-handling-system-for-games/](http://www.gamedev.net/blog/355/entry-2250186-designing-a-robust-input-handling-system-for-games/)

你应该看看。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-03-16T15:50:03.830

> 此代码将有助于查找每个键盘键的 KB_code 值

```
#include<iostream>
#include<conio.h>
using namespace std;
int main()
{
    int KB_code=0;
    while(1)
    {

     if (kbhit())
      {
            KB_code = getch();
            cout<<"KB_code = "<<KB_code<<"\n";
}
    }
return(0);
} 
```

# oracle - SQL 触发器列出 Oracle

> ID：13996458
> 
> 赞同：0
> 
> 时间：2012-12-21T20:01:19.240
> 
> 标签：oracle, list, triggers

我有一张 Giving(donor, receiver, giftname) 表格，列出了谁给谁送了礼物。我正在尝试编写一个触发器，如果​​它是捐赠者赠送的第一份礼物，接收者收到的第一份礼物，或者它是捐赠者和接收者的第一份礼物，它将触发。基本上我需要做的是将新捐赠者的名字与所有捐赠者的名单进行比较，并确保它还没有。然后对接收器执行相同的操作。这是我的尝试，但我确信这是不对的，因为我的变量 existingreceivers 和 existingdonors 不会做我想让他们做的事情。这些变量existingreceivers 和existingdonors 是否会存储多个值？如果没有，我该如何完成我需要做的事情？

```
create or replace TRIGGER FirstGift
BEFORE INSERT OR UPDATE OF donor,receiver ON GIVING
FOR EACH ROW
DECLARE
ExistingReceivers varchar(255);
ExistingDonors varchar(255);

BEGIN
select donor into existingdonors
from giving;

select receiver into existingreceivers
from giving;

--first gift for donor, first gift for receiver
if(:new.donor not in existingdonors and :new.receiver not in existingreceivers)then
dbms_output.put_line('This is the first gift received by ', :new.receiver, 'and the first given by ', :new.donor);
insert into messages (intid, donor, receiver, giftname, msg) values (test_seq.nextval, :new.donor, :new.receiver, :new.giftname, 'First Gift Given and First Received!');

--first gift for donor, not first gift for receiver
elsif(:new.donor not in existingdonors)then
dbms_output.put_line('This is the first gift given by ', :new.donor);
insert into messages (intid, donor, receiver, giftname, msg) values (test_seq.nextval, :new.donor, :new.receiver, :new.giftname, 'First Gift Given!');

--first gift for receiver, not first gift for donor
elsif(:new.receiver not in existingreceivers)then
dbms_output.put_line('This is the first gift received by ', :new.receiver);
insert into messages (intid, donor, receiver, giftname, msg) values (test_seq.nextval, :new.donor, :new.receiver, :new.giftname, 'First Gift Received!');

end if;

end; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T21:27:52.003

我们最好帮助您在星期二之前完成这项工作，不是吗。（是你吗，圣诞老人？？？）

您的方法应该可以正常工作，只需将详细信息从所有礼物的列表更改为礼物的数量，这样更易​​于查询和存储。您可以使用触发器中的三个查询来查询捐赠者赠送的礼物数量、接收者收到的礼物数量以及两人交换的礼物数量，如下所示（我省略了 INSERT INTO MESSAGES 位）：

```
CREATE OR REPLACE TRIGGER FirstGift
  BEFORE INSERT OR UPDATE OF donor, receiver ON GIVING FOR EACH ROW
DECLARE
  num_donor     NUMBER;
  num_receiver  NUMBER;
  num_both      NUMBER;
BEGIN
  SELECT count(*) INTO num_both
    FROM giving
   WHERE donor = :new.donor AND receiver = :new.receiver;

  SELECT count(*) INTO num_donor
    FROM giving
   WHERE donor = :new.donor;       

  SELECT count(*) INTO num_receiver
    FROM giving
   WHERE donor = :new.donor;  

  IF num_both = 0 THEN 
    dbms_output.put_line(:new.donor||' and '||:new.receiver);
  ELSE 
    IF num_donor = 0 THEN
      dbms_output.put_line(:new.donor);
    END IF;

    IF num_receiver = 0 THEN
      dbms_output.put_line(:new.receiver);
    END IF;
END;
/ 
```

如果表变得很大，你可以用一个查询来解决它：

```
CREATE OR REPLACE TRIGGER FastFirstGift
  BEFORE INSERT OR UPDATE OF donor, receiver ON GIVING FOR EACH ROW
DECLARE
  num_donor     NUMBER;
  num_receiver  NUMBER;
  num_both      NUMBER;
BEGIN
  SELECT SUM(CASE WHEN donor    = :new.donor    THEN 1 END),
         SUM(CASE WHEN receiver = :new.receiver THEN 1 END),
         SUM(CASE WHEN donor    = :new.donor
                   AND receiver = :new.receiver THEN 1 END)
    INTO num_donor, num_receiver, num_both
  FROM giving;

  IF num_both = 0 THEN 
    dbms_output.put_line(:new.donor||' and '||:new.receiver);
  ELSE 
    IF num_donor = 0 THEN
      dbms_output.put_line(:new.donor);
    END IF;

    IF num_receiver = 0 THEN
      dbms_output.put_line(:new.receiver);
    END IF;
  END IF;
END;
/ 
```

希望这能回答你的问题...

# json - Sitecore Item Web API - 嵌套的 JSON 结构？

> ID：13996466
> 
> 赞同：1
> 
> 时间：2012-12-21T20:02:03.343
> 
> 标签：json, sitecore, sitecore6

有没有办法将参数传递给 Item Web API，以便它维护它在 JSON 中返回的项目的结构？例如，我正在撤回问题和答案，但现在我无法知道哪些答案属于哪些问题，因为 JSON 是扁平的。如果 JSON 复制了我的 Sitecore 树的结构并将答案嵌套在问题下方，那就太好了。

当前结构（简化）：

```
{
    template: 'sitecore/question',
    title: 'Question 1'
},
{
    template: 'answer',
    title: 'My first answer'
} 
```

预期结构：

```
{
    template: 'sitecore/question',
    title: 'Question 1',
    items:     
       {
           template: 'answer',
           title: 'My first answer'
       }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-25T18:08:39.473

据我所知，没有这样的功能。

您可以执行以下操作之一：

1.  通过修改 itemWebApiRequest 管道来实现您自己的功能。
2.  对每个问题提出新的要求以获得单独的答案。
3.  在接收端实现逻辑，解析“LongId”或“Path”字段并以这种方式查找关系。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T04:58:00.387

您可能可以编写自己的类来获得适合您需要的结果。如果您查看 api 的配置，您会发现您可以使用管道。

# oracle - PL/SQL 从固定字符集生成随机字符串

> ID：13996471
> 
> 赞同：3
> 
> 时间：2012-12-21T20:02:25.737
> 
> 标签：oracle, plsql

如何在 PL/SQL 中从一组固定的字符生成随机字符串？例如：我想生成一个长度为 10 的字母数字字符串，其中不包括某些字符和数字，例如 I、O、0 等。我找不到`DBMS_RANDOM.STRING()`使用所需集合播种的方法。PL/SQl 中是否有内置方法来执行此操作？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-31T19:56:52.930

您可以自己编写这样的函数 - 接受特定字符集的函数将其混合并返回结果。这是一个例子。在此示例中使用了[listagg](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions089.htm#CJABDFBD)函数，该函数仅在**Oracle 11G R2**及更高版本中可用。

1.  这是简单的功能：

    ```
    SQL> create or replace function RandomString(p_Characters varchar2, p_length number)
      2  return varchar2
      3  is
      4    l_res varchar2(256);
      5  begin
      6    select substr(listagg(substr(p_Characters, level, 1)) within group(order by dbms_random.value), 1, p_length)
      7      into l_res
      8      from dual
      9    connect by level <= length(p_Characters);
     10    return l_res;
     11  end;
     12  /

     Function created 
    ```

2.  以下是它的工作原理：

    ```
    SQL> select randomstring('1234567abcdefg', 10) res
      2    from dual
      3  connect by level <= 10
      4  /

    RES
    ----------
    caedg54f67
    f35eca6gb4
    4ae6f1c37b
    1c436g7a2b
    16e357bd2a
    564gca23ef
    d57c21bg36
    3gd62b4c1e
    31ea5cb472
    fe152bdga6

    10 rows selected 
    ```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T21:18:03.370

根据oracle在线文档，该包有一个SEED程序

[http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_random.htm#i996798](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_random.htm#i996798)

# ms-access - 使用 ADODB for Web-DAV 上传文件“找不到任何符合名称的对象或数据...”

> ID：13996479
> 
> 赞同：6
> 
> 时间：2012-12-21T20:03:07.993
> 
> 标签：ms-access, vba, adodb

我有一个在 Windows 7 上运行的 MS Access 2007 VBA 应用程序。一个关键功能是将文件上传到 WebDAV 服务器。下面的代码在一台 PC 上完美运行，但在其他 PC 上失败（是的，每台 PC 的配置方式相同）。

这是在其他 PC 上失败时弹出的挪威错误消息的 translate.google.com 翻译：

`Run-time error '-2147217895 (80040e19)': can not find any objects or data in accordance with the name, range or selection criteria within the scope of this operation`

它在这行代码上失败：

`objRecord.Open fil, "URL=" & URL, adModeReadWrite, adCreateOverwrite, adDelayFetchStream, sUsername, sPwd`

完整的功能代码如下。它实际上只是重用[http://social.msdn.microsoft.com/Forums/en-US/isvvba/thread/26b8e905-33d0-438b-98a7-bb69053b931e/](http://social.msdn.microsoft.com/Forums/en-US/isvvba/thread/26b8e905-33d0-438b-98a7-bb69053b931e/)上的代码。任何提示将不胜感激！

```
Function DAVPUT(ByVal URL As String, ByVal fil As String) As Boolean '
    Dim sUsername As String
    Dim sPwd As String
    sUsername = "k@dummy.com"
    sPwd = "dummy"

    Dim objRecord As New ADODB.Record
    Dim objStream As New ADODB.Stream

    objRecord.Open fil, "URL=" & URL, adModeReadWrite, adCreateOverwrite, adDelayFetchStream, sUsername, sPwd
    objStream.Type = adTypeBinary
    objStream.Open objRecord, adModeWrite, adOpenStreamFromRecord
    objStream.LoadFromFile fil 
    objStream.Flush
    DoEvents
    objStream.close
    objRecord.close

    DAVPUT = True

End Function 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T22:24:17.097

[这篇文章](http://bytes.com/topic/asp-classic/answers/56092-ado-stream-error-please-help)建议您“比较 MDAC 本地和远程的版本”。我意识到我提供了一个最小的、不专业的答案，但是由于没有其他答案，所以就在这里。

# coldfusion - 由于循环内 if 语句中的函数调用中的结构文字而引发错误

> ID：13996480
> 
> 赞同：2
> 
> 时间：2012-12-21T20:03:09.647
> 
> 标签：coldfusion, coldfusion-9

所以，我遇到了一个奇怪的错误，我在 CF9 中无法弄清楚。它似乎是由在函数调用内部、`if`语句内部、循环内部使用结构文字引起的。删除这些变量中的任何一个，并且不会发生这种情况。

以下代码引发错误：

错误：`Variable KEY is undefined.`

```
<cffunction name="test">
    <cfreturn true>
</cffunction>

<cfset local.data = { first = "asdf" }>

<cfloop list="first" index="key">
    <cfif test({ name = local.data[key] })>
        <cfoutput>test</cfoutput>
    </cfif>
</cfloop> 
```

为什么？如果我们将结构设置为一个变量，它就可以工作。如果我们不循环，它也可以正常工作。

```
<cffunction name="test">
    <cfreturn true>
</cffunction>

<cfset local.data = { first = "asdf" }>
<cfset key = "first">
<cfif test({ name = local.data[key] })>
    <cfoutput>test</cfoutput>
</cfif> 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T21:05:03.157

一旦你提出更好的问题，我会给出更好的答案；-)（根据我的评论告诉我们错误消息），但事实是 CF 对结构文字（和数组文字）表示法的实现已经被一长串的实现错误所困扰。我认为它们终于在 CF10 中得到了解决。

所以，稍微倾斜地回答你的问题：“发生了什么事？” ColdFusion 中的 Shonky 编码正在进行中。

解决方法是什么？当您遇到这些问题时，请改用传统的结构表示法（点表示法或关联数组表示法）。

恐怕没有比这更好的办法了。

还要查看[错误库](https://bugbase.adobe.com/)以查看您的特定案例是否已被记录，如果没有：记录一个新错误。

# client - 下载后如何从服务器中删除文件？或者如何将文件直接从输出流存储到客户端计算机？

> ID：13996481
> 
> 赞同：0
> 
> 时间：2012-12-21T20:03:20.687
> 
> 标签：client, save, download, portlet, liferay-6

我正在使用 liferay 自定义 portlet 并且正在使用 jasper 报告现在我的问题是我如何直接在客户端机器上下载 pdf 报告

现在我首先将文件存储在服务器上。然后提供用于将 pdf 下载到用户的 url。但是如果我有 pdf 文件的输出流，我如何直接将文件存储到客户端机器。

ot 如果我能知道用户单击下载链接时的一些方法，并且在下载文件后，如果我想从服务器中删除已删除的文件，那么我该怎么做。？如果有人可以指导我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:58:12.890

我不确定您所要求的是否可行，但是我很想看到有人纠正该陈述。

服务器确实不应该直接将文件存储在客户端计算机上，因为这违反了客户端服务器关系的意图。客户端必须对文件提出请求，然后客户端才能保存该文件（例如，像 ftp 下载）。服务器只是不会按照他们认为合适的方式操作客户端机器。

就知道何时下载文件而言，您无法在 portlet 中进行任何检测。您可以使用 ResourceRequest 和 serveResource 方法来提供文件，但是 portlet API 中的任何内容都不会通知您的 portlet 下载已完成或它没有被某些东西中断。

作为替代方案，您可以尝试简单地执行一个清理旧文件的 cron 作业。在这种情况下，请务必告知用户他们需要多长时间才能成功下载文件。

# facebook - 仅有时显示嵌入 swf 的 Facebook 对话帖子

> ID：13996487
> 
> 赞同：0
> 
> 时间：2012-12-21T20:03:40.583
> 
> 标签：facebook, flash

我正在尝试使用基于以下文档的嵌入式 Flash 对象做一个基本的 facebook 墙贴：

[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

我想只使用直接 URL 来执行此操作，例如（注意参数被编码）：

```
https://www.facebook.com/dialog/feed?
app_id=SOME_APP_ID&
link=http://www.myregisteredfbdomain.com/someurl&
picture=http://www.myregisteredfbdomain.com/cfg/media/imagelink.png&
name=Flash%20Test&
caption=Just%20a%20test&
description=A%20Description&
redirect_uri=http://www.myregisteredfbdomain.com/someurl&
source=http://www.myregisteredfbdomain.com/facebook/aflashfile.swf 
```

虽然我也尝试过使用 javascript，但结果相同：

```
<script> 
  FB.init({appId: SOME_APP_ID, status: true, cookie: true});

  function postToFeed() {
     var obj = {
       method: 'feed',
       redirect_uri: 'http://www.myregisteredfbdomain.com/someurl',
       link: 'http://www.myregisteredfbdomain.com/someurl',
       picture: 'http://www.myregisteredfbdomain.com/cfg/media/imagelink.png',
       name: 'Flash Test',
       description: 'A Description',
       source: 'http://www.myregisteredfbdomain.com/facebook/aflashfile.swf'
     };

     function callback(response) {
       document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
     }
  FB.ui(obj, callback);
  }
</script> 
```

当我在我的开发 fb 帐户下发帖时，帖子显示正常，我可以单击正确显示 flash 的图标。

但是，当我在自己的个人 fb 帐户下发帖时，该帖子仅显示图像，但当我单击它时没有 Flash 激活 - 它只是转到我定义的链接/重定向链接。

谁能给我任何关于为什么会这样的指示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T21:00:38.367

Found out why - It's because I'm accessing the post to my personal account through a https connection, which doesn't show the flash - it's linked via a http connection.

# qt - 使用类似于 Windows 桌面上显示的橡皮筋

> ID：13996490
> 
> 赞同：0
> 
> 时间：2012-12-21T20:03:55.133
> 
> 标签：qt, button, mouse, selection, drag

是否有课程可以让我使用与 Windows 桌面相同的橡皮筋？是这样的：

![在此处输入图像描述](../Images/8156a2485dc61cb4e088cac83f655913.png)

如果您仔细观察，那是您按住鼠标并将其拖到 Windows 桌面上以选择文件。

我需要做的是在该小部件上显示一些按钮，然后如果我想使用上面显示的方法将它们全部选中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:50:21.893

~~您的图片/视频未显示。~~ 编辑：这是一个非常简单的图像......我以为它一开始没有出现。

这是您想要的方向的东西：

[http://qt-project.org/doc/qt-4.8/qrubberband.html#details](http://qt-project.org/doc/qt-4.8/qrubberband.html#details)

# mysql - Magento MySQL 调优

> ID：13996493
> 
> 赞同：2
> 
> 时间：2012-12-21T20:04:07.997
> 
> 标签：mysql, apache, magento

我注意到我的 Magento 商店有很多延迟，我们正在运行一个具有 4GB RAM 的专用虚拟服务器。当我向我的主人询问这些问题时，我被告知以下声明。您能否就 MySQL 中的哪些具体需要进行调整以获得最佳性能提供帮助？

> 但是，使用 Magento 似乎会导致问题。Magento 需要对 MySQL 进行大量调整才能保持正常运行。我建议您与系统管理员一起调整服务器以适应 Magento 非常大的资源需求。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:13:26.253

[Magento 有一些涵盖基础知识](http://www.magentocommerce.com/whitepaper/)的白皮书。

Magento 论坛上有一个旧帖子，虽然包含过时的信息，但会指向您[需要调整](http://www.magentocommerce.com/boards/viewthread/4168/)的 MySQL 配置字段。

认真考虑使用专门从事[Magento 托管](http://www.magentocommerce.com/partners/hosting/)的托管合作伙伴。如果你在字里行间读到你的主人告诉你他们不想要你的生意。

# xslt - XSLT 删除空白元素

> ID：13996499
> 
> 赞同：0
> 
> 时间：2012-12-21T20:04:28.033
> 
> 标签：xslt

我正在尝试删除 XML 文档中的空元素。我想在 id31、id32 和 id33 为空时删除它们。下面是 XSLT 输出的示例。我正在尝试使用下面的 XSLT，但我没有任何运气。关于我做错了什么的任何想法？谢谢

数据

```
<Item type="Part AML">
    <related_id>
      <Item type="Manufacturer Part">
        <id keyed_name="1234" type="Manufacturer Part"></id>
        <manufacturer keyed_name="Bobs Workshop" type="Manufacturer"></manufacturer>
        <item_number>1234</item_number>
      </Item>
    </related_id>
  </Item>
  <Item type="Part Document">
    <related_id keyed_name="D000005" type="Document">
      <Item type="Document">
        <id keyed_name="D000005" type="Document"></id>
        <major_rev>B</major_rev>
        <name>Firmware 8-16-12</name>
        <item_number>D000005</item_number>
      </Item>
    </related_id>
  </Item>
  <Item type="Part Document">
    <related_id keyed_name="D000003" type="Document">
      <Item type="Document">
        <id keyed_name="D000003" type="Document"></id>
        <major_rev>A</major_rev>
        <name>Design Spec</name>
        <item_number>D000003</item_number>
      </Item>
    </related_id>
  </Item> 
```

输出

```
 <td width="5%" align="center" uniqueID="ms__id31"></td>
 <td width="13%" align="center" uniqueID="ms__id32"></td>
 <td width="13%" align="center" uniqueID="ms__id33"></td>
 <td width="5%" align="center" uniqueID="ms__id34">D000003</td>
 <td width="13%" align="center" uniqueID="ms__id35">Design Spec</td>
 <td width="8%" align="center" uniqueID="ms__id36">A</td> 
```

来自论坛的代码

```
 <xsl:template match="node()|@*">
   <xsl:copy>
     <xsl:apply-templates select="node()|@*"/>
 </xsl:copy>
   </xsl:template>

<xsl:template match="*[not(@*|*|comment()|processing-instruction()) and normalize-space()='']"/> 
```

我的 XSLT

```
<xsl:template match="Item[@type='Part AML']|Item[@type='Part Document']">
<tr>
  <td width="5%" align="center" uniqueID="ms__id31">
    <xsl:value-of select="state"/>
  </td>
  <td width="13%" align="center" uniqueID="ms__id32">
    <xsl:value-of select="related_id[@type='Manufacturer Part']/Item/manufacturer/@keyed_name"/>
  </td>
  <td width="13%" align="center" uniqueID="ms__id33">
    <xsl:value-of select="related_id[@type='Manufacturer Part']/Item/item_number"></xsl:value-of>
  </td>
    <td width="13%" align="center" uniqueID="ms__id34">
        <xsl:value-of select="related_id[@type='Document']/Item/item_number"></xsl:value-of>
    </td>
    <td width="13%" align="center" uniqueID="ms__id35">
        <xsl:value-of select="related_id[@type='Document']/Item/name"/>
    </td>
    <td width="8%" align="center" uniqueID="ms__id36">
        <xsl:value-of select="related_id[@type='Document']/Item/major_rev"/>
    </td>
 </tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:21:49.287

使用模板。这样，在空的情况下没有应用：

```
<xsl:template match="Item[@type='Part AML']|Item[@type='Part Document']">
<tr>
    <xsl:apply-templates select="state"/>

    <xsl:apply-templates select="related_id[@type='Manufacturer Part']/Item/manufacturer/@keyed_name"/>

    <xsl:apply-templates select="related_id[@type='Manufacturer Part']/Item/item_number">

    <td width="13%" align="center" uniqueID="ms__id34">
        <xsl:value-of select="related_id[@type='Document']/Item/item_number"></xsl:value-of>
    </td>
    <td width="13%" align="center" uniqueID="ms__id35">
        <xsl:value-of select="related_id[@type='Document']/Item/name"/>
    </td>
    <td width="8%" align="center" uniqueID="ms__id36">
        <xsl:value-of select="related_id[@type='Document']/Item/major_rev"/>
    </td>
 </tr>
</xsl:template>

<xsl:template match="Item[@type='Part AML' or @type='Part Document']/state">
  <td width="5%" align="center" uniqueID="ms__id31">
     <xsl:apply-templates>
  </td>
</xsl:template>

<xsl:template match="Item[@type='Part AML' or @type='Part Document']/related_id[@type='Manufacturer Part']/Item/manufacturer/@keyed_name">
   <td width="13%" align="center" uniqueID="ms__id32">
     <xsl:apply-templates>
  </td>
</xsl:template>

<xsl:template match="Item[@type='Part AML' or @type='Part Document']/related_id[@type='Manufacturer Part']/Item/item_number">
   <td width="13%" align="center" uniqueID="ms__id33">
     <xsl:apply-templates>
  </td>
</xsl:template> 
```

如果剩余`<td>`的 s 也可能有空值，您可以对它们使用相同的模式。

# c++ - 如何在c ++中将执行的输出cmd行保存在文件中

> ID：13996502
> 
> 赞同：4
> 
> 时间：2012-12-21T20:04:55.280
> 
> 标签：c++, visual-c++

我有这段代码用于在 C++ 中执行 CMD 行

```
#include <windows.h>
#include <stdio.h>
#include <tchar.h>

void _tmain( int argc, TCHAR *argv[] )
{
    STARTUPINFO si;
    PROCESS_INFORMATION pi;

    ZeroMemory( &si, sizeof(si) );
    si.cb = sizeof(si);
    ZeroMemory( &pi, sizeof(pi) );

    if( argc != 2 )
    {
        printf("Usage: %s [cmdline]\n", argv[0]);
        return;
    }

    // Start the child process. 
    if( !CreateProcess( NULL,   // No module name (use command line)
        argv[1],        // Command line
        NULL,           // Process handle not inheritable
        NULL,           // Thread handle not inheritable
        FALSE,          // Set handle inheritance to FALSE
        0,              // No creation flags
        NULL,           // Use parent's environment block
        NULL,           // Use parent's starting directory 
        &si,            // Pointer to STARTUPINFO structure
        &pi )           // Pointer to PROCESS_INFORMATION structure
    ) 
    {
        printf( "CreateProcess failed (%d).\n", GetLastError() );
        return;
    }

    // Wait until child process exits.
    WaitForSingleObject( pi.hProcess, INFINITE );

    // Close process and thread handles. 
    CloseHandle( pi.hProcess );
    CloseHandle( pi.hThread );
} 
```

我想将执行的输出保存在文件中。但是如何？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:10:45.783

将标准输出重定向到一个文件

```
freopen("file.txt", "w", stdout); 
```

或者，将输出通过管道传输到带有 windows 的文件

```
cmd> prg.exe > file.txt 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T20:21:20.430

在 CreateProcess 中，您传递一个 STARTUPINFO 结构。您可以在 si.dwFlags 中设置 STARTF_USESTDHANDLES，然后使用有效的文件描述符填写 hStdInput、hStdOutput 和 hStdError 字段，尤其是 hStdOutput 应该是以前打开的文件的句柄（由成功的 CreateFile 返回），然后它将接收已启动进程的标准输出。

**编辑：**

这是一个刻薄的答案，因为它需要做更多的工作才能使这件事起作用：您需要使用正确的 SECURITY_ATTRIBUTES 创建该文件，并且必须`Set handle inheritance`在 CreateProcess 中将其设置为 TRUE。因此，这样做也是纯粹主义者的噩梦。

```
#include <windows.h>
#include <stdio.h>
#include <tchar.h>

void _tmain( int argc, TCHAR *argv[] )
{
    STARTUPINFO si;
    PROCESS_INFORMATION pi;

    ZeroMemory( &si, sizeof(si) );
    si.cb = sizeof(si);
    si.dwFlags |=STARTF_USESTDHANDLES ;
    si.hStdInput=GetStdHandle(STD_INPUT_HANDLE);
    si.hStdError=GetStdHandle(STD_ERROR_HANDLE);
    SECURITY_ATTRIBUTES sa;
    ZeroMemory( &sa, sizeof(sa) );
    sa.nLength=sizeof(sa);
    sa.bInheritHandle=TRUE;
    si.hStdOutput=CreateFile ("log.txt", GENERIC_READ|GENERIC_WRITE, 0, &sa, CREATE_ALWAYS, FILE_ATTRIBUTE_NORMAL, 0);
    ZeroMemory( &pi, sizeof(pi) );

    if( argc != 2 )
    {
        printf("Usage: %s [cmdline]\n", argv[0]);
        return;
    }
    // Start the child process.
    if( !CreateProcess( NULL,   // No module name (use command line)
        argv[1],        // Command line
        NULL,           // Process handle not inheritable
        NULL,           // Thread handle not inheritable
        TRUE,           // Set handle inheritance to TRUE
        0,              // No creation flags
        NULL,           // Use parent's environment block
        NULL,           // Use parent's starting directory
        &si,            // Pointer to STARTUPINFO structure
        &pi )           // Pointer to PROCESS_INFORMATION structure
    )
    {
        printf( "CreateProcess failed (%d).\n", GetLastError() );
        return;
    }
    // Wait until child process exits.
    WaitForSingleObject( pi.hProcess, INFINITE );

    // Close process and thread handles.
    CloseHandle( pi.hProcess );
    CloseHandle( pi.hThread );
    CloseHandle (si.hStdOutput);
} 
```

# android - Eclipse 内容可以通过变量名辅助过滤吗？

> ID：13996506
> 
> 赞同：2
> 
> 时间：2012-12-21T20:05:02.933
> 
> 标签：android, eclipse, actionbarsherlock, content-assist

是否可以设置 Eclipse 以通过变量名过滤内容辅助建议？

**用例：** 在 Android 中编程，我使用 R.id.[Content-Assist] 定义了一些我永远不想被建议的东西；特别是来自我正在使用的库（Action Bar Sherlock）。所有 id 都以“abs__”为前缀，如果我能过滤掉它们会很棒。

**到目前为止：** 使用*类型过滤器*我可以根据包和内部类进行过滤，但我也想按变量名过滤。使用类似的东西

```
com.example.demo.R.id* 
```

可以忽略整个 id 集，但我只想忽略以特定字符串开头的那些，例如...

```
com.example.demo.R.id.abs__* 
```

# c# - 类型为对象结果 XmlNode 数组的属性的反序列化

> ID：13996513
> 
> 赞同：0
> 
> 时间：2012-12-21T20:05:33.500
> 
> 标签：c#, deserialization

我有以下要反序列化的 XML 文件：

```
<RoutesConfiguration>
    <RouteList>
        <SpecialRoute Name="Url" Urlpattern="MyUrl">
            <Defaults>
                <Item>
                    <Key>controller</Key>
                    <Value>Rss</Value>
                </Item>
                <Item>
                    <Key>action</Key>
                    <Value>LastItems</Value>
                </Item>
                 <Item>
                    <Key>id</Key>
                    <Value>1</Value>
                </Item>
            </Defaults>
        </SpecialRoute>
    </RouteList>
</RoutesConfiguration> 
```

这是我的反序列化代码：

```
StreamReader reader = new StreamReader(Server.MapPath(ConfigurationManager.AppSettings["RoutesConfigurationPath"]));
 var routes = (RoutesConfiguration)serializer.Deserialize(reader); 
```

此类代表我的 XML 文件中的**每个“项目”**元素。

```
public class Item
{
        public string Key { get; set; }
        public object Value { get; set; }
} 
```

我的反序列化实例没问题，但是每个项目的属性“值”都有一个问题。

这个“值”属性被反序列化为**System.Xml.XmlNode[]**。问题是我不能将此属性键入字符串或 int，因为此值可以设置为两种类型。出于这个原因，我输入了“对象”。

你知道有什么方法可以从反序列化中得到正确的类型而不是这个 XmlNode 数组吗？

谢谢

问候。

何塞

# r - 使用 R 绘制 ROCR 图

> ID：13996516
> 
> 赞同：0
> 
> 时间：2012-12-21T20:05:41.390
> 
> 标签：r, csv, roc

我有一个 csv 文件（制表符分隔），其中包含 2 列，看起来像这样

```
5   0
6   0
9   0
8   1
"+5000 lines similar lines" 
```

我正在尝试使用 ROCR 创建 ROC 图。

这是我到目前为止所尝试的：

```
p<-read.csv(file="forROC.csv", head=TRUE, sep="\t")
pred<-prediction(p[1],p[2]) 
```

第二行给了我一个错误：`Error in prediction(p[1], p[2]) : Number of classes is not equal to 2. ROCR currently supports only evaluation of binary classification tasks.`

我不确定错误是什么。我的 CSV 文件有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:12:50.927

我的猜测是您的数组索引设置不正确。如果您阅读该 CSV 文件，您应该会看到一个包含两列和 5,000 多行的 data.frame（想想矩阵或二维数组，具体取决于您的背景）。

因此，您当前对`p[1]`or`p[2]`的调用并没有特别的意义。您可能想要访问该 data.frame 的第一列和第二*列*，您可以使用`p[,1]`for the first column 和`p[,2]`for the second 的语法来执行此操作。

但是，您遇到的具体错误是抱怨您使用的“真相”变量不是二进制的。您的文件似乎设置为输出 1 和 0，因此一旦您正确访问数组，此错误可能会消失。但是如果以后遇到这种情况，请务必在使用之前对真实数据进行二值化处理。例如：

```
p[,2] <- p[,2] != 0 
```

将值设置为`FALSE`如果它是零，并且`TRUE`对于列中的每个非零单元格。

# qt - Selenium Webdriver 支持 Javafx 2.0 Webkit 或 QT5 Webkit（目标：无头 webkit）

> ID：13996518
> 
> 赞同：5
> 
> 时间：2012-12-21T20:05:45.123
> 
> 标签：qt, webkit, webdriver, integration-testing, javafx-2

我想知道：

*   有没有人考虑过为嵌入式 Javafx 2.0 Webkit 浏览器或新的 QT5 - Webkit 实现 webdriver 接口。
*   有人对朝着这个方向发展的一些 Github/Bitbucket/GoogleCode 项目有一些建议吗？

为什么？这将添加另一个跨平台浏览器，并有望使用新的 webkit 渲染引擎实现无头浏览器。现在我在 MacOSX 或 ChromeDriver 上使用 SafariDriver。这有点工作，但 chromedriver 经常咬我，当 Chrome 自动更新并破坏 chromedriver 时。

我认为，最接近无头 Webkit 实现（包括截屏）的项目是 phantomjs（QT-4.8 webkit）+ ghostdriver（用于 phantomjs 作为 javascript 实现的 webdriver 插件）。现在 phantomjs 有它的字体和连字符 () 渲染的怪癖。

测试 QT5 浏览器示例，字体/害羞渲染似乎已修复。现在我可以等待 phantomjs 赶上 qt5。

另一个想法是安装 Java 7，其中包括 Javafx 2.0 并实现一个 WebView，它也可以由 webdriver-protocol 控制。较新的 JavaFx 2.0 版本包含对 JavaFX 场景进行截图的可能性，这将很有帮助。

参考：

*   [http://ariya.ofilabs.com/2012/03/the-evolution-of-phantomjs-build-workflow.html（Phantomjs/QT](http://ariya.ofilabs.com/2012/03/the-evolution-of-phantomjs-build-workflow.html)集成）
*   [如何修复/解决 QtWebKit 不正确的字体回退行为？](https://stackoverflow.com/questions/12769169/how-to-fix-work-around-qtwebkits-incorrect-font-fallback-behavior)（qt4.x字体渲染）

圣诞节快乐，

简

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2015-02-27T02:01:50.813

Yes, I built this: [https://github.com/MachinePublishers/jBrowserDriver](https://github.com/MachinePublishers/jBrowserDriver)

It runs headless by default. Snapshots, xpath, and everything else work. No browser is required, just Java 8.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-01-13T12:35:37.733

存在 Qt4 和 Qt5 的 webdriver 实现：[https](https://github.com/cisco-open-source/qtwebdriver) ://github.com/cisco-open-source/qtwebdriver 。

它驱动 QtWebkit、QWidgets 和 QML。

# java - Android 在我的 Facebook 照片中标记朋友或页面

> ID：13996525
> 
> 赞同：1
> 
> 时间：2012-12-21T20:06:10.553
> 
> 标签：java, android, facebook, facebook-graph-api

我正在使用 Facebook SDK3.0 ，我想在我的照片上发布一张照片并在其中标记一个“朋友/页面”。

我已经看到我们必须提供一个带有 tag 参数的地方，我对此感到有些困惑，应该是什么地方......？！

## 还有另一种方法可以在我的照片上标记“朋友/页面”..？！

## 我的代码：-

```
Bundle parameters = new Bundle();
parameters.putParcelable(PICTURE_PARAM, image);
parameters.putString("tags", PAGE_ID);
parameters.putString("place", ??????);
parameters.putString("message", comment );
String graphPath = MY_PHOTOS;
Session activeSession = Session.getActiveSession();
Request postToPageRequest = new Request(activeSession, graphPath);
postToPageRequest.setParameters(parameters);
postToPageRequest.setHttpMethod(HttpMethod.POST);
postToPageRequest.executeAsync(); 
```

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-11T08:05:19.173

要标记您的朋友，您需要照片的 ID 和 Facebook 朋友的 ID。以下是一个工作代码：

```
for(int i = 0; i < selectedFriendsIDs.size(); i++){

    String inputParm = uploadedImageID + "/tags?to=" + selectedFriendsIDs.get(i);

    Bundle params = new Bundle();
    params.putString(Facebook.TOKEN, accessToken);   
    mAsyncRunner.request(inputParm, params, "POST", new RequestListener()
    {

        @Override
        public void onMalformedURLException(MalformedURLException e, Object state)
        {

        }

        @Override
        public void onFileNotFoundException(FileNotFoundException e, Object state)
        {

        }

        @Override
        public void onFacebookError(FacebookError e, Object state)
        {

        }

        @Override
        public void onComplete(String response, Object state)
        {
            Log.d("Selected IDs ", "" + selectedFriendsIDs);
        }

        @Override
        public void onIOException(IOException e, Object state)
        {
            // TODO Auto-generated method stub

        }
    }, null);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T10:01:53.653

## 经过搜索，我发现：-

*   我们可以添加“place”参数只是一个包含该地点 ID 的字符串，

    * * *

    您可以从每个城市的 Facebook 页面“即
    [http://www.facebook.com/pages/Cairo-Egypt/115351105145884](http://www.facebook.com/pages/Cairo-Egypt/115351105145884) ”中找到城市 ID。

    Cairo_ID = 115351105145884。

* * *

*   “标签”也是一个字符串列表，不是字符串。

    parameters.putStringArray("tags", new String[]{PAGE_ID}); parameters.putString("place",Cairo_ID);

# api - IMAP/SMTP 是查找已加星标的 Gmail 邮件的方法吗？

> ID：13996526
> 
> 赞同：0
> 
> 时间：2012-12-21T20:06:12.130
> 
> 标签：api, gmail

我想创建一个页面，任何向我发送电子邮件的人都可以在下面输入他们的电子邮件的消息 ID，

```
Message-ID: <CAK2W-gCNJNRAME8+Q1CjbzbPo+JQFm5de6bkjaJ0JYwBoD2N8Q@mail.gmail.com> 
```

在一个表格中，然后提交以查看我的已加星标的电子邮件队列中他们的消息在哪里，*例如*26 号。

我开始研究 Gmail API，但要么它太受限而无法做我想做的事，要么我不明白 API 是如何工作的。我只看到三个与我相关的“API”：IMAP、SMTP 和 Google Apps。（我什至不认为调用前两个*API是正确的，但无论如何，这就是我在网上看到的。）根据我对 IMAP/SMTP 的理解，**脚本*通过 IMAP 进行交易似乎不正确/SMTP；我弄错了吗？至于 Google Apps 前端，它仅适用于 Google Apps 域上的电子邮件。

**是否可以通过某些 API 从 Gmail 中检索邮件（包括所有邮件标头），并*保留其加星标状态*？如果是这样，哪个，以及如何？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:35:21.267

大多数脚本语言都有 IMAP 库，所以我认为这可以被认为是一个 API。（SMTP无关，它是用于*发送*邮件，而不是阅读它。）

以下文档描述了 Google 的 IMAP 扩展，看起来有一种方法可以使用它的`XLIST`命令查看已加星标的消息。

[https://developers.google.com/google-apps/gmail/imap_extensions](https://developers.google.com/google-apps/gmail/imap_extensions)

# php - 从 CakePHP 组件获取 CakeRequest 对象

> ID：13996527
> 
> 赞同：4
> 
> 时间：2012-12-21T20:06:16.670
> 
> 标签：php, cakephp, cakephp-2.0

我正在尝试从我的自定义组件中访问 CakeRequest 对象。但我不能。在[食谱](http://book.cakephp.org/2.0/en/controllers/request-response.html#cakerequest)里面我发现了这个：

> CakeRequest 是 CakePHP 中使用的默认请求对象。它集中了许多用于查询和与请求数据交互的功能。在每个请求上，都会创建一个 CakeRequest，然后通过引用传递给使用请求数据的应用程序的各个层。默认情况下，CakeRequest 被分配给 $this->request，并且在 Controller、Views 和 Helpers 中可用。**您还可以使用控制器引用在组件中访问它。**

控制器引用意味着什么？我尝试了以下。有用。
但是如何在不将参数**this**传递给组件的情况下到达 CakeRequest 呢？

```
// MyController.php
    public function foo(){
        $this->MyUtil->bar($this);
    }

// MyUtilComponent.php
    function bar(&$controller) {
        $a=$controller->request;
        print_r($a);
    } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T20:55:02.477

CakePHP 组件有一个[`initialize`](http://api20.cakephp.org/class/component#method-Componentinitialize)回调，您可以使用它来存储对控制器的引用。将此添加到您的 Component 类：

```
public function initialize(Controller $controller) {
    $this->controller = $controller;
} 
```

然后`bar`可以是：

```
function bar() {
    $a = $this->controller->request;
    print_r($a);
} 
```

# wpf - 绑定 UpdateSource 事件

> ID：13996528
> 
> 赞同：0
> 
> 时间：2012-12-21T20:06:17.453
> 
> 标签：wpf, data-binding, binding

我使用可编辑标签控件（带有覆盖模板属性的标签；您在此处看到的完整代码：http: [//www.nathanpjones.com/wp/2012/09/editable-label-in-wpf/](http://www.nathanpjones.com/wp/2012/09/editable-label-in-wpf/)）。

我用这种风格创建了自己的标签控制类。EditableLabelControl 类扩展了 Label 类，因此 EditableLabelControl 具有 Content 属性。

```
public partial class EditableLabelControl : Label
{
    //...
} 
```

之后，我把这个可编辑的标签放在我的自定义控件中，并将它绑定到模型的**MyValue**属性。

```
<controls:EditableLabelControl Content="{Binding Path=MyValue, Mode=TwoWay}" /> 
```

它正确显示模型值，但是当我在文本框中进行编辑时，它仅更新 Content 属性（模型的**MyValue**属性不会更新）。

我尝试为文本框编写 LostFocus 处理程序，但没有帮助。

```
var bindingExpression = ((TextBox)sender).GetBindingExpression(TextBox.TextProperty);
if (bindingExpression != null)
{
    bindingExpression.UpdateSource();
} 
```

我的错误在哪里？感谢您的回答，并为我糟糕的英语感到抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T03:23:14.387

也许您可以尝试将 设置`UpdateSourceTrigger`为`PropertyChanged`，这应该会在文本框属性更改时更新您的标签。

例子：

```
 <StackPanel>
        <Label Content="{Binding ElementName=UI, Path=MyValue, UpdateSourceTrigger=PropertyChanged}" x:Name="label"/>
        <TextBox Text="{Binding ElementName=UI, Path=MyValue, UpdateSourceTrigger=PropertyChanged}" x:Name="textbox" />
    </StackPanel> 
```

代码：

```
 public partial class EditableLabelControl : Label, INotifyPropertyChanged
    {
        private string _myValue;
        public string MyValue
        {
            get { return _myValue; }
            set { _myValue = value; NotifyPropertyChanged("MyValue"); }
        }

        public event PropertyChangedEventHandler PropertyChanged;
        /// <summary>
        /// Notifies the property changed.
        /// </summary>
        /// <param name="property">The info.</param>
        public void NotifyPropertyChanged(string property)
        {
            if (PropertyChanged != null)
            {
                PropertyChanged(this, new PropertyChangedEventArgs(property));
            }
        }
    } 
```

# dotnetzip - c# DotNetZip 参考

> ID：13996529
> 
> 赞同：0
> 
> 时间：2012-12-21T20:06:19.537
> 
> 标签：dotnetzip

我正在使用 dotnetzip - 我使用以下文件作为参考 - Ionic.Zip.dll

我现在让它指向我的 C: 驱动器中的一个位置。我通常使用 NuGet，所以不知道如何将 .dll 放在哪里，以便当它升级到生产时，它会从服务器运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:11:17.483

右键单击解决方案资源管理器中的“参考”文件夹/节点，然后选择“添加参考”。它将弹出一个对话框，您可以选择浏览到 DLL 文件。

默认情况下，VS 会将 DLL 复制到项目的输出目录中。

# objective-c - 无法从我的 iOS 应用中查看 Google Analytics（分析）数据

> ID：13996536
> 
> 赞同：1
> 
> 时间：2012-12-21T20:06:33.753
> 
> 标签：objective-c, google-analytics, tracking

我确实按照谷歌开发者网站上的教程并将这段代码放在我的 App 委托上：

```
[GAI sharedInstance].trackUncaughtExceptions = YES;
[GAI sharedInstance].dispatchInterval = 20;
[GAI sharedInstance].debug = NO;
id<GAITracker> tracker = [[GAI sharedInstance] trackerWithTrackingId:@"My tracker code"];
[[GAI sharedInstance] trackerWithTrackingId:KGATrackerId]; 
```

然后在我的视图控制器中，我将此代码放在 viewDidLoad 方法中：

```
id<GAITracker> tracker = [[GAI sharedInstance] defaultTracker];
[tracker trackView:@"Test View"]; 
```

当 GA 调试器打开时，它实际上声明它正在“使用”信息“命中”服务器；但是在我的 Googla Analytics 仪表板中，我在新创建的应用部分中看不到任何新数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:05:53.730

在我的 AppDelegate 中有以下代码`didFinishLaunchingWithOptions`

```
[[GANTracker sharedTracker] startTrackerWithAccountID:@"YOUR-ID-HERE"
                                       dispatchPeriod:10
                                             delegate:nil]; 
```

为了跟踪事件，比如按钮点击，我在不同的地方使用了这个片段：

```
NSError *error;
if (![[GANTracker sharedTracker] trackPageview:@"/login/TouchedSubmit"
                                     withError:&error]) {
    // Handle error here
} 
```

我已经在多个应用程序中使用过它，而且我的活动没有发送到 Google 从来没有遇到过任何问题——希望这会有所帮助

# javascript - 当 ul 可见时将事件附加到正文，然后在不可见时将其删除

> ID：13996543
> 
> 赞同：3
> 
> 时间：2012-12-21T20:07:08.463
> 
> 标签：javascript, jquery, html, css

我有一个`<ul>`，当点击时，切换另一个的可见性`<ul>`。当显示 s 时，如何将事件附加到页面的正文，`<ul>`以便正文将隐藏`<ul>`.

我是新来写这些冒泡的东西，我不明白为什么我到目前为止所做的似乎间歇性地工作。多次点击，打开`open`次要添加类失败`<ul>`。

当然，可能有更好的方法来做到这一点。

```
$(document).on('click', '.dd_deploy', function (e) {
    var ul = $(this).children('ul');
    var height = ul.css('height');
    var width = ul.css('width');
    ul.css('top', "-" + height);
    ul.fadeToggle(50, function () {

        //add open class depending on what's toggled to
        if (ul.hasClass('open')) {
            ul.removeClass('open');
        } else {
            ul.addClass('open');
        }
        //attach click event to the body to hide the ul when
        //body is clickd
        $(document).on('click.ddClick', ('*'), function (e) {
            e.stopPropagation();
           //if (ul.hasClass('open')) {
                ul.hide();
                ul.removeClass('open')
                $(document).off('click.ddClick');
           // }
        });
    });
});​ 
```

[http://jsfiddle.net/JYVwR/](http://jsfiddle.net/JYVwR/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:20:46.970

我建议不要在点击事件中绑定点击事件，即使您正在取消绑定它。相反，我会这样做：

[http://jsfiddle.net/JYVwR/2/](http://jsfiddle.net/JYVwR/2/)

```
$(document).on('click', function (e) {
    if ( $(e.target).is(".dd_deploy") ) {
        var ul = $(e.target).children('ul');
        var height = ul.css('height');
        var width = ul.css('width');
        ul.css('top', "-" + height);
        ul.fadeToggle(50, function () {

            //add open class depending on what's toggled to
            if (ul.hasClass('open')) {
                ul.removeClass('open');
            } else {
                ul.addClass('open');
            }
        });
    }
    else {
        $('.dd_deploy').children('ul:visible').fadeOut(50,function(){
            $(this).removeClass("open");
        })
    }
});​ 
```

If you need to further prevent clicking on the opened menu from closing the menu, add an else if that tests for children of that menu.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-21T20:26:09.123

You dont' really need all that code. All you need is jquery's [toggle](http://api.jquery.com/toggle/) class to accomplish what you want. simple code like one below should work.

# Example Code

```
$(document).ready(function() {
    $('ul.dd_deploy').click(function(){
        $('ul.dd').toggle();
    });
});​​​​ 
```

Firstly, you are defining a `document.on` function within a `document.on` function which is fundamentally wrong, you just need to check it once and execute the function once the document is ready.

Secondly why do you want to bind an event to `body.click` ? it's not really a good idea.

# Suggestion

I think you should also look at the [hover](http://api.jquery.com/hover/) function which might be useful to you in this case.

# Working Fiddles

[JSfiddle](http://jsfiddle.net/yU4dC/) with click function [JSfiddle](http://jsfiddle.net/QSyzC/) with hover function

# jquery - SEO 没有安全地显示指向机器人的链接

> ID：13996544
> 
> 赞同：2
> 
> 时间：2012-12-21T20:07:12.993
> 
> 标签：jquery, seo

使用 jquery 为用户而不是机器人生成链接是否安全？

例如。我有一个产品列表页面，该页面从不同的产品详细信息页面正确链接。产品详细信息页面可以通过以下方式突出显示功能：`www.site.com/product3?highlight_feature=3`

现在对于产品列表页面的每个列表项，我想将所有不同的功能链接添加到产品页面，例如。

```
PRODUCT LIST PAGE
**Product 1** (`www.site.com/product1)
feature1 (www.site.com/product1?highlight_feature=1)
feature2 (www.site.com/product1?highlight_feature=2)
... 
```

我不希望机器人跟踪功能链接（因为产品列表页面上的页面排名丢失）并且我正在考虑使用 jquery 来生成这些链接。我正在考虑对外部链接使用相同的技术，以避免机器人从我的网站退出。搜索引擎优化安全吗？如果是这样，我该如何完成它？

我正在测试类似的东西：

```
$(.myLink).live('click', function(e){
 window.location = ... uri;
}); 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:09:04.863

这就是[规范](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=139394)标签的用途。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T20:09:57.690

我会添加一个[robots.txt](http://www.robotstxt.org/robotstxt.html)，告诉机器人不要跟随这些链接。它看起来像这样：

```
User-agent: *
Disallow: /products/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-22T15:28:14.723

如果要阻止这些功能 URL，可以使用 robots.txt：

```
User-agent: *
Disallow: highlight_feature 
```

这将阻止以下 URL：

*   `example.com/product1?highlight_feature=2`
*   `example.com/product1?highlight_feature`
*   `example.com/highlight_feature=3`
*   `example.com/foo/bar/highlight_feature/foo/bar`
*   …</li>

* * *

和/或您可以使用该`rel`值`canonical`：

对于 URL `example.com/product1?highlight_feature=2`，添加以下`link`元素：

```
<link rel="canonical" href="http://example.com/product1" /> 
```

但是你应该只`canonical`在两个页面的内容几乎相同的情况下使用，例如当高亮功能真的只是“高亮”一个功能时。

# jquery - 如何按用户位置过滤 Bing Location API 结果以自动完成？

> ID：13996546
> 
> 赞同：5
> 
> 时间：2012-12-21T20:07:17.740
> 
> 标签：jquery, jquery-autocomplete, bing-api, bing-maps

我有这个函数可以根据用户输入的地址返回 bing 地址建议。**我已经指定了 userLocation**，但结果并不像我想象的那么准确。我应该在这里做些什么额外的事情吗？如果必须，我可以手动指定州或邮政编码，但我宁愿避免进行后期处理。

例如，输入 111 会返回来自 111, NY, 111 Sweden, 111 Denmark 的结果。我想至少将其限制在美国，并且实际上仅限于我可以硬编码的几个州内。当我在数据中手动指定 postalCode 的选项时，它会覆盖我在查询中使用的选项。

```
 var geolocate = function(options) {
    $.ajax({
        url: "http://dev.virtualearth.net/REST/v1/Locations",
        dataType: "jsonp",
        data: {
            key: "KEY",
            q: options.address,
            userLocation: options.latitude + ',' + options.longitude,
            maxResults: options.maxResults,
        },
        jsonp: "jsonp",
        success: function(data) {
            if (options.success instanceof Function) {
                options.success(data);
            }
        },
        error: function(xhr, status, text) {
            alert('ERROR:\n');
        }
    });
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-26T20:29:50.523

事实证明，这实际上会达到我的预期（除非测试证明不是这样）我将地址指定为单个参数 q，但如果我将 addressLine 与 userLocation 结合指定，它会按预期过滤结果。

```
var geolocate = function(options) {
    $.ajax({
        url: "http://dev.virtualearth.net/REST/v1/Locations",
        dataType: "jsonp",
        data: {
            key: "KEY",
            addressLine: options.address,
            countryRegion: 'US',
            userLocation: options.latitude + ',' + options.longitude,
            maxResults: options.maxResults,
        },
        jsonp: "jsonp",
        success: function(data) {
            if (options.success instanceof Function) {
                options.success(data);
            }
        },
        error: function(xhr, status, text) {
            alert('ERROR:\n\n');
        }
    });
}; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-26T15:51:09.187

除了我前一阵子做的一些修补之外，我对 Bing Maps API 不是很熟悉……但是您是否尝试过传递 ip 或包括位置？您可能需要反向查找用户 Lat/Lng 以获得城市名称......为什么他们不会从 userLocation 推断该信息是我无法理解的。

[http://msdn.microsoft.com/en-us/library/ff701714.aspx](http://msdn.microsoft.com/en-us/library/ff701714.aspx)

# jar - 如何将 JRE 捆绑到 Java 应用程序的 EXE 中？Launch4j 说“运行时丢失或损坏”。

> ID：13996547
> 
> 赞同：36
> 
> 时间：2012-12-21T20:07:22.187
> 
> 标签：jar, exe, java, launch4j

我是 Java 编程新手，但通常熟悉一切工作原理。我希望能够将 jar 文件和 jre 都放入 windows 可执行文件（exe）中，这样当我分发它时，客户端就不需要安装 JRE。我应该使用什么程序？

我有launch4j，它似乎完全符合我的要求，但是当我尝试运行该应用程序时，我得到“此应用程序配置为使用捆绑的Java运行时环境，但运行时丢失或损坏。”

我希望我的应用程序只是一个可运行的 exe，而不是安装程序。至少，谁能告诉我如何正确地将 JRE 与 launch4j 捆绑在一起？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2013-03-25T16:44:32.887

我可以捆绑 JRE 的唯一方法是使用[Launch4J](http://launch4j.sourceforge.net/)和[Inno Setup Compiler](http://jrsoftware.org/isinfo.php)。

首先，在与输出文件 (.exe) 相同的目录中创建一个`jre6`文件夹（例如）。

然后将 JRE 从您的系统复制到您的**jre6**文件夹中。

然后打开 Launch4J 并设置**Bundled JRE 路径**- 只需输入`jre6`. 然后单击 Build 按钮（显然，在您输入所有其他参数之后 - 但您需要在**JRE**选项卡本身上输入的唯一值是**Bundled JRE 路径**值。）

我原以为这会起作用，但是如果您随后将 .exe 移动到新位置（因此它不再与您的**jre6**文件夹位于同一位置），您会得到*此应用程序配置为使用捆绑的 Java 运行时环境，但是*当您尝试运行应用程序时，运行*时丢失或损坏错误...*

我整天都在玩这个，我无法让*Launch4J*将 JRE 包含在 .exe 文件中。在我看来真的很差，因为他们的文档似乎根本没有提到这个问题。

所以我要解决的是使用*Inno Setup Compiler (ISC)*。此应用程序用于将您的 .exe 包装为 Windows Installer 文件。所以我在 ISC 脚本中添加了一个设置，将 JRE 复制到安装程序包中。我添加到脚本中的行（在该`[Files]`部分中）是：

```
Source: "M:\Netbeans\MyApp\jre6\*"; DestDir: "{app}\jre6\"; Flags: recursesubdirs createallsubdirs 
```

...一些解决方法，但它成功了。

重复上述所有步骤，您应该被排序。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2019-04-13T06:13:12.327

将 jre 打包为 lanch4j 打包的 exe 的简单方法是使用 wrap。

```
warp-packer --arch windows-x64 --input_dir mycrt --exec run.bat --output single.exe 
```

然后在启动 exe 时停止 cmd 窗口。

```
editbin /subsystem:windows 
```

**经线**：[https ://github.com/dgiagio/warp](https://github.com/dgiagio/warp)

**editbin** : 由 VS 安装

演示：

[![在此处输入图像描述](../Images/942f9afa678f758eb6a3b3202884cf60.png)](https://i.stack.imgur.com/br2kh.png)

[![在此处输入图像描述](../Images/791a072ef47995a5fce11997c1e820dd.png)](https://i.stack.imgur.com/LtPtv.png)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-12-13T21:28:06.613

**用于 Inno Setup 的捆绑 JRE 解决方案**

为了使用应用程序 jar 实现捆绑的 JRE 解决方案，我创建了一个 Inno Setup 脚本：

1）将JRE复制到安装exe中

2) 执行等效的终端命令： java -jar myjar.jar 使用捆绑的 JRE

首先我复制JRE：

```
#define MyJREPath "C:\Program Files\Java\jre1.8.0_191"

[Files]
Source: "{#MyJREPath}\*"; DestDir: "{app}\runtime\jre\";  \
        Flags: ignoreversion recursesubdirs createallsubdirs; 
```

我遵循此处显示的目录结构约定：[https ://docs.oracle.com/javase/8/docs/technotes/guides/deploy/self-contained-packaging.html](https://docs.oracle.com/javase/8/docs/technotes/guides/deploy/self-contained-packaging.html)

运行 java -jar myjar.jar 的等效项：

```
[Run]
Filename: "{app}\runtime\jre\bin\javaw.exe"; Parameters: " -jar myjar.jar"; \
          WorkingDir: "{app}\app\"; \
          Description: "{cm:LaunchProgram,{#StringChange(MyAppName, '&', '&&')}}"; \
          Flags: postinstall skipifsilent 
```

（nb java.exe 使用终端运行，javaw.exe 不使用终端运行）

桌面快捷方式需要有正确的文件名、参数和工作目录：

```
[Icons]
Name: "{commondesktop}\{#MyAppName}"; \
      IconFilename: "{app}\app\{#MyAppIcoName}"; \
      Filename: "{app}\runtime\jre\bin\javaw.exe"; \
      Parameters: " -jar myjar.jar"; \
      WorkingDir: "{app}\app\"; \
      Tasks: desktopicon

[Tasks]
Name: "desktopicon"; \
    Description: "{cm:CreateDesktopIcon}"; \
    GroupDescription: "{cm:AdditionalIcons}"; \
    Flags: unchecked 
```

锦上添花，为了让我的脚本同时处理捆绑的 JRE 和非捆绑的选项，我使用预处理器 IF 语句（在每个脚本部分中重复）来测试脚本是否有空的 MyJREPath。如果 MyJREPath 不为空，因此需要捆绑的 JRE 解决方案，我使用上面的编码；或者，如果不需要捆绑解决方案，那么我使用更多“正常”编码显示 Inno Setup 示例或由他们的向导生成。这是 IF 语句：

```
#if MyJREPath != ""
    ; bundled JRE required

#else
    ; bundled JRE not required
#endif 
```

这是我的大部分脚本放在一起：

```
 ; Script generated by the Inno Setup Script Wizard.
        ; SEE THE DOCUMENTATION FOR DETAILS ON CREATING INNO SETUP SCRIPT FILES!

        ; some more #defines here

        #define MyAppExeName "javaw.exe"
        #define MyJREPath "C:\Program Files\Java\jre1.8.0_191" 
        ;#define MyJREPath ""

        [Setup]
        ; NOTE: The value of AppId uniquely identifies this application.
        ; Do not use the same AppId value in installers for other applications.
        ; (To generate a new GUID, click Tools | Generate GUID inside the IDE.)
        AppId=XXXXXXXXXX
        AppName={#MyAppName}
        AppVersion={#MyAppVersion}
        ;AppVerName={#MyAppName} {#MyAppVersion}
        AppPublisher={#MyAppPublisher}
        DefaultGroupName={#MyAppPublisher}
        AppPublisherURL={#MyAppURL}
        AppSupportURL={#MyAppURL}
        AppUpdatesURL={#MyAppURL}   
        DefaultDirName={pf}\{#MyDefaultDirName}
        DisableProgramGroupPage=yes
        LicenseFile={#MyInnoSetupDir}\system\{#MyLicenseFile}
        OutputDir={#MyInnoSetupDir}

        #if MyJREPath != "" 
          ; run app with bundled JRE
          OutputBaseFilename={#MyAppName}-{#MyAppVersion}-bundledJRE-setup
        #else
          ; run app without bundled JRE
          OutputBaseFilename={#MyAppName}-{#MyAppVersion}-setup          
        #endif 

        SetupIconFile={#MyInnoSetupDir}\{#MyAppIcoName}
        Compression=lzma
        SolidCompression=yes  
        AppComments={#MyAppName}
        AppCopyright={#MyAppCopyright}  
        UninstallDisplayIcon={#MyInnoSetupDir}\{#MyAppIcoName}
        UninstallDisplayName={#MyAppName}
        WizardImageStretch=No
        WizardSmallImageFile={#MyInnoSetupDir}\{#MyAppBmpName}

        [Languages]
        Name: "english"; MessagesFile: "compiler:Default.isl"
        ;Name: "german"; MessagesFile: "compiler:Languages\German.isl"

        [Tasks]
        Name: "desktopicon"; \
                Description: "{cm:CreateDesktopIcon}"; \
                GroupDescription: "{cm:AdditionalIcons}"; \
                Flags: unchecked
        Name: "quicklaunchicon"; \
                Description: "{cm:CreateQuickLaunchIcon}"; \
                GroupDescription: "{cm:AdditionalIcons}"; \
                Flags: unchecked; OnlyBelowVersion: 0,6.1

        [Files]
        ; bundle JRE if required
        #if MyJREPath != "" 
            Source: "{#MyJREPath}\*"; DestDir: "{app}\runtime\jre\";  \
                Flags: ignoreversion recursesubdirs createallsubdirs;       
        #endif      

        ; copy jar and all files  
        Source: "{#MyInnoSetupDir}\*"; DestDir: "{app}\app\"; \        
                Flags: ignoreversion recursesubdirs createallsubdirs

        [Icons]
        #if MyJREPath != ""
          ; set up icons with bundled JRE
          Name: "{commonprograms}\{#MyAppName}"; \
                  IconFilename: "{app}\app\{#MyAppIcoName}"; \
                  Filename: "{app}\runtime\jre\bin\{#MyAppExeName}"; \
                  Parameters: " -jar {#MyJarName}"; \
                  WorkingDir: "{app}\app\"
          Name: "{commondesktop}\{#MyAppName}"; \
                  IconFilename: "{app}\app\{#MyAppIcoName}"; \
                  Filename: "{app}\runtime\jre\bin\{#MyAppExeName}"; \
                  Parameters: " -jar {#MyJarName}"; \
                  WorkingDir: "{app}\app\"; \
                  Tasks: desktopicon            
          Name: "{userappdata}\Microsoft\Internet Explorer\Quick Launch\{#MyAppName}"; \
                  IconFilename: "{app}\app\{#MyAppIcoName}"; \
                  Filename: "{app}\runtime\jre\bin\{#MyAppExeName}"; \
                  Parameters: " -jar {#MyJarName}"; \
                  WorkingDir: "{app}\app\"; \
                  Tasks: quicklaunchicon
        #else
          ; set up icons without bundled JRE
          Name: "{commonprograms}\{#MyAppName}"; \
                  IconFilename: "{app}\app\{#MyAppIcoName}"; \
                  Filename: "{app}\app\{#MyJarName}"; \
                  WorkingDir: "{app}\app\"
          Name: "{commondesktop}\{#MyAppName}"; \
                  IconFilename: "{app}\app\{#MyAppIcoName}"; \
                  Filename: "{app}\app\{#MyJarName}"; \
                  WorkingDir: "{app}\app\"; \
                  Tasks: desktopicon            
          Name: "{userappdata}\Microsoft\Internet Explorer\Quick Launch\{#MyAppName}"; \
                  IconFilename: "{app}\app\{#MyAppIcoName}"; \
                  Filename: "{app}\app\{#MyJarName}"; \
                  WorkingDir: "{app}\app\"; \
                  Tasks: quicklaunchicon 
        #endif

        [Run]
        #if MyJREPath != ""
          ; run app with bundled JRE
          Filename: "{app}\runtime\jre\bin\{#MyAppExeName}"; Parameters: " -jar {#MyJarName}"; \
                  WorkingDir: "{app}\app\"; \
                  Description: "{cm:LaunchProgram,{#StringChange(MyAppName, '&', '&&')}}"; \
                  Flags: postinstall skipifsilent          
        #else
          ; run app without bundled JRE
          Filename: "{app}\app\{#MyJarName}"; \
                  WorkingDir: "{app}\app\"; \
                  Description: "{cm:LaunchProgram,{#StringChange(MyAppName, '&', '&&')}}"; \
                  Flags: shellexec postinstall skipifsilent          
        #endif 
```

希望这可以帮助。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-12-21T21:17:17.960

我从来没有使用过 Launch4J 产品，祝它配置正确。

看起来你可以去 Sourceforge 上的论坛获取其他[提示](http://sourceforge.net/projects/launch4j/forums/forum/332683)

其他建议：

我从 IBM (Websphere) 和 Oracle 看到的大多数产品只是在安装目录下提取一个 JRE，并配置启动批处理命令以使用已安装的 JRE。本质上，JRE 和您的 jar 文件将一次性安装。

安装 exe 通常会检查它是否已经安装，如果发现它已经存在则跳过该步骤。这对于仅升级 jar 文件很有用。

本地安装还解决了客户安装自己的 JRE 的问题，这些 JRE 可能不兼容或包含错误。这样您就可以处理已知的 JRE 版本。

如果您的应用程序没有图形组件，则 excelsior 路线是可以的（已经有一段时间了，该限制可能已经改变）。还有其他限制，但您最好将 JRE 与您的代码一起分发到单个可执行安装程序中。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-26T10:02:45.827

JDK 7 Update 6 中的 JDK 随附的 Java Packager 是将 JRE 与您的代码一起嵌入到本机可执行文件中 的[官方方式。](https://docs.oracle.com/javase/10/deploy/self-contained-application-packaging.htm)[一些maven插件](https://github.com/fvarrui/JavaPackager)似乎打包了主要平台打包生成本机可执行文件的任务。

从 JDK11 需要根据[java-packager-with-jdk11](https://medium.com/@adam_carroll/java-packager-with-jdk11-31b3d620f4a8)下载 java 打包程序，女巫演示使用 gradle 进行打包

另一种方法可能是构建一个带有约束的[GraalVM Native 映像](https://www.graalvm.org/reference-manual/native-image/)，以使用不受支持的反射来查找库的替代方案。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-02-05T11:47:39.647

很容易将 jre 捆绑到 launch4j 中。

只需将 jre 复制到相同的输出文件夹中

在bundle jre环境文本框中，只给jre文件夹本身

在环境变量文本框中（在下面的同一页中），给出直到 bin

然后创建exe ..它在机器中没有jre的情况下按预期工作。

谢谢

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-12-21T21:05:03.893

看来您需要本机代码编译器。这些编译器生成不需要 JRE 的本机代码。

检查这篇文章 - [https://www.excelsior-usa.com/articles/java-to-exe.html#aot](https://www.excelsior-usa.com/articles/java-to-exe.html#aot)。

* * *

## 回答 #8

> 赞同：-3
> 
> 时间：2014-05-15T02:46:25.467

launch4j 不能顺利运行有几个原因。部分原因是：

1) 用户不要以管理员身份运行应用程序

2) 用户没有正确设置图标图像。必须严格.ico

* * *

## 回答 #9

> 赞同：-3
> 
> 时间：2012-12-21T20:12:29.003

你所要求的并不容易做到（如果它完全可行的话。）如果我是你，我会考虑创建一个可执行的 JAR 文件：

[java eclipse 创建可执行jar](https://stackoverflow.com/questions/8159046/java-eclipse-create-executable-jar)

另一种选择是使用 Java Web Start。这是假设您使用的是现代浏览器，JNLP 将自动提示用户安装正确版本的 Java。

[http://docs.oracle.com/javase/tutorial/deployment/webstart/index.html](http://docs.oracle.com/javase/tutorial/deployment/webstart/index.html)

# c - 利用 C 代码中的不兼容指针类型错误

> ID：13996548
> 
> 赞同：1
> 
> 时间：2012-12-21T20:07:24.633
> 
> 标签：c, exploit

我正在尝试编译以下利用代码以进行学习练习，并对 C 中的指针进行了一些研究，但我多次尝试修复代码对编译器错误消息没有影响。如果有人能指出我正确的方向，我将不胜感激，我几乎没有使用 C 的经验。

相关错误：

```
OFudge.c: In function ‘get_server_hello’:
OFudge.c:1009:5: warning: passing argument 2 of ‘d2i_X509’ from incompatible pointer
type [enabled by default] 
```

第 1009 行：

```
ssl->x509=d2i_X509(NULL,&p,(long)cert_length); 
```

整体功能：

```
void get_server_hello(ssl_conn* ssl)
{
    unsigned char buf[BUFSIZE];
    unsigned char *p, *end;
    int len;
    int server_version, cert_length, cs_length, conn_id_length;
    int found;

    if (!(len = read_ssl_packet(ssl, buf, sizeof(buf)))) {
        printf("Server error: %s\n", ssl_error(ntohs(*(uint16_t*)&buf[1])));
        exit(1);
    }
    if (len < 11) {
        printf("get_server_hello: Packet too short (len = %d)\n", len);
        exit(1);
    }

    p = buf;

    if (*(p++) != SSL2_MT_SERVER_HELLO) {
        printf("get_server_hello: Expected SSL2 MT SERVER HELLO, got %x\n", (int)p[-1]);
        exit(1);
    }

    if (*(p++) != 0) {
        printf("get_server_hello: SESSION-ID-HIT is not 0\n");
        exit(1);
    }

    if (*(p++) != 1) {
        printf("get_server_hello: CERTIFICATE-TYPE is not SSL CT X509 CERTIFICATE\n");
        exit(1);
    }

    n2s(p, server_version);
    if (server_version != 2) {
        printf("get_server_hello: Unsupported server version %d\n", server_version);
        exit(1);
    }

    n2s(p, cert_length);
    n2s(p, cs_length);
    n2s(p, conn_id_length);

    if (len != 11 + cert_length + cs_length + conn_id_length) {
        printf("get_server_hello: Malformed packet size\n");
        exit(1);
    }

    /* read the server certificate */
    ssl->x509 = NULL;
    ssl->x509=d2i_X509(NULL,&p,(long)cert_length);
    if (ssl->x509 == NULL) {
        printf("get server hello: Cannot parse x509 certificate\n");
        exit(1);
    }

    if (cs_length % 3 != 0) {
        printf("get server hello: CIPHER-SPECS-LENGTH is not a multiple of 3\n");
        exit(1);
    }

    found = 0;
    for (end=p+cs_length; p < end; p += 3) {
        if ((p[0] == 0x01) && (p[1] == 0x00) && (p[2] == 0x80))
           found = 1;  /* SSL CK RC4 128 WITH MD5 */
    }

    if (!found) {
        printf("get server hello: Remote server does not support 128 bit RC4\n");
        exit(1);
    }

    if (conn_id_length > SSL2_MAX_CONNECTION_ID_LENGTH) {
        printf("get server hello: CONNECTION-ID-LENGTH is too long\n");
        exit(1);
    }

    /* The connection id is sent back to the server in the CLIENT FINISHED packet */
    ssl->conn_id_length = conn_id_length;
    memcpy(ssl->conn_id, p, conn_id_length);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:34:36.160

编译器清楚地告诉你问题是什么。它甚至告诉你哪个论点导致了问题。简单地将预期的参数类型与您作为参数传递的类型进行比较有那么难吗？

根据这个

[http://www.openssl.org/docs/crypto/d2i_X509.html](http://www.openssl.org/docs/crypto/d2i_X509.html)

该函数需要一个`const unsigned char **`参数

```
X509 *d2i_X509(X509 **px, const unsigned char **in, int len); 
```

你正在传递一个`unsigned char **`。`const unsigned char **`并且`unsigned char **`是两种不同的类型，不能相互隐式转换。所以，这是你的错误。

# indexeddb - 为什么 IndexedDB 被设计为带有锁定表的异步 API？

> ID：13996550
> 
> 赞同：2
> 
> 时间：2012-12-21T20:07:31.813
> 
> 标签：indexeddb

为什么 IndexedDB 被设计为带有锁定表的异步 API？

我的理解是异步部分已完成，因此多个选项卡不能相互阻止，这会导致浏览体验不佳......但是为什么选择异步来解决这个问题......然后，雪上加霜，它决定将事务锁定在表上而不是实体上。

Google Bigtable 有完全相同的问题，应用引擎上的多个实例可能会在读取和写入时相互阻塞，因此该团队决定在实体级别进行锁定（技术上是实体组，但与本次讨论没有区别）。他们对数万亿个实体和同步 api 没有任何问题。

所以我的问题是，为什么 indexeddb 没有设计为同步的，并阻止具有用户指定超时的实体？我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T03:23:19.530

IndexedDB API 没有提到锁定表或行，想必是由浏览器决定。它所说的事务是它的行为，例如：

> 允许以“只读”模式打开的任意数量的事务同时运行
> 
> 实现必须确保另一个事务不会修改“读写”事务范围内的对象存储的内容。

Chrome 使用[Leveldb](http://code.google.com/p/leveldb/)并且没有表或对象存储的概念。[为清楚起见编辑]

Appengine 是后端系统，而 javascript 是前端。任何 JS 进程都应该在 200 毫秒内完成，这样 UI 就不会显得生涩。任何有意义的数据库请求，因为它会涉及 IO，所以很容易花费 200 毫秒。所以即使你有同步 API，它在 UI 线程中也没有用。

目前异步 IndexedDB API 的设计使得很难编写会冻结 UI 线程的糟糕 JS 代码。这是一个很好的 API 设计。

在 appengine 中，严肃的应用程序使用异步 API。使用同步 API 而不是浪费 CPU 时间没有任何好处。同步 API 并不比异步 API 快。实际上，同步 API 是对异步 API 的包装。[IndexedDB API 实现](http://www.chromium.org/developers/design-documents/indexeddb)也是如此。

# android - 如何计算用户在 Activity 中花费的时间

> ID：13996551
> 
> 赞同：2
> 
> 时间：2012-12-21T20:07:34.823
> 
> 标签：android, time, android-activity

计算用户在特定活动中花费多长时间的最佳方法是什么？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T20:12:27.143

开始/停止您在活动`onResume()`和`onPause()`方法中的时间。还要安装一个 SCREEN_OFF / SCREEN_ON 广播接收器，这样您就知道屏幕何时打开和关闭，并在那里启用/禁用您的计时。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T20:28:59.410

我想我会从这样的事情开始：

```
private static long mTotalTime;
private long mStartTime;

@Override
public void onPause() {
    super.onPause();
    mTotalTime += System.currentTimeMillis() - mStartTime;
}

@Override
public void onResume() {
    super.onResume();
    mStartTime = System.currentTimeMillis();
} 
```

请注意，因为它使用 onPause/onResume，所以如果屏幕关闭、重新定向等，它也会“暂停”计时器。根据您的目的，您可能想要使用其他回调之一，例如 onCreate() 或onDestroy()，但请注意 onDestroy() 并不总是在从现有活动启动新活动时被调用。

您可能还希望将 mTotalTime 保存到 SharedPreferences 以便即使应用程序关闭也能保留它。也许是这样的：

```
private long mStartTime;

@Override
public void onPause() {
    super.onPause();
    int totalTime = getPreferences(0).getInt("TotalTime",0);
    getPreferences(0).edit().putInt("TotalTime", totalTime + System.currentTimeMillis() - mStartTime)
}

@Override
public void onResume() {
    super.onResume();
    mStartTime = System.currentTimeMillis();
} 
```

# php - 从 XAMPP 向电子邮件地址发送电子邮件（gmail/yahoo/whatever）

> ID：13996553
> 
> 赞同：0
> 
> 时间：2012-12-21T20:07:40.113
> 
> 标签：php, xampp

嗨quys 我有一个PHP 脚本的问题。它应该向我的电子邮件地址发送一封电子邮件，但它没有:(

```
<html>
<head>
<title>Aliens Abducted Me - Report an Abduction</title>
<link rel="stylesheet" type="text/css" href="css/mystyle.css">
</head>
<body>
<h2> Aliens Abducted Me - Report an Abduction</h2>
<p> Share your story of alien abduction:</p>
<form  method="POST" action="report.php">
<label for="firstname">First Name:</label>
<input type="text" id="firstname" name="firstname"><br>
<label for="lastname">Last Name:</label>
<input type="text" id="lastname" name="lastname"><br>
<label for="email">What is your email adress?</label>
<input type="text" id="email" name="email"><br>
<label for="whenithappened">When did it happen?</label>
<input type="text" id="whenithappened" name="whenithappened"><br>
<label for="howlong">How long where you gone?</label>
<input type="text" id="howlong" name="howlong"><br>
<label for="howmany">How many did you see</label>
<input type="text" id="howmany" name="howmany"><br>
<label for="aliendescription">Describe them:</label>
<input type="text" id="aliendescription" name="aliendescription"><br>
<label for="whattheydid">What they do to you?</label>
<input type="text" id="whattheydid" name="whattheydid"><br>
<label for="fangspotted">Have tou see my  dog Fang?</label>
<input type="radio" id="fangspotted" name="fangspotted"  value="YES">Yes
<input type="radio"id="fangspotted" name="fangspotted" value="NO">NO<br>
<img src="img/fang.jpg" alt="Fang Picture" title="Fang Picture"><br>
<label for="other">Anything else you want to add</label>
<textarea rows="4" cols="50" id="other" name="other"></textarea><br>
<input type="submit" value="Send report!">
</body>
</html> 
```

那是代码的 HTML 部分，PHP 脚本是：

```
<html>
<head>
<title>Aliens Abducted Me - Report an Abduction</title>
</head>
<body>
<h2>Aliens Abducted Me - Report an Abduction</h2>
<?php
$name = $_POST['firstname'] . ' ' . $_POST['lastname'];
$when_it_happened = $_POST['whenithappened'];
$how_long = $_POST['howlong'];
$how_many = $_POST['howmany'];
$alien_description = $_POST['aliendescription'];
$what_they_did = $_POST['whattheydid'];
$fang_spotted = $_POST['fangspotted'];
$email = $_POST['email'];
$other = $_POST['other'];
$to = 'my_email@gmail.com';
$subject = 'Aliens Abducted Me - Abduction Report';
$msg = "$name was abducted $when_it_happened and was gone for $how_long.\n" .
"Number of aliens: $how_many\n" .
"Alien description: $alien_description\n" .
"What they did: $what_they_did\n" .
"Fang spotted: $fang_spotted\n" .
"Other comments: $other";
mail($to, $subject, $msg, 'From:' . $email);
echo 'Thanks for submitting the form.<br/>';
echo 'You were abducted ' . $when_it_happened;
echo ' and were gone for ' . $how_long . '<br />';
echo 'Number of aliens: ' . $how_many . '<br />';
echo 'Describe them: ' . $alien_description . '<br />';
echo 'The aliens did this: ' . $what_they_did . '<br />';
echo 'Was Fang there? ' . $fang_spotted . '<br />';
echo 'Other comments: ' . $other . '<br>';
echo 'Your email address is ' . $email;
?>
</body>
</html> 
```

我的 php.ini 配置是：

```
[mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = localhost
; http://php.net/smtp-port
smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
sendmail_from = NULL

; For Unix only.  You may supply arguments as well (default: "sendmail -t -i").
; http://php.net/sendmail-path
sendmail_path = NULL 
```

没有错误，我的邮箱或垃圾邮件中没有收到任何电子邮件感谢帮助我的人，我想在 21/12 午夜之前解决这个问题，因为我不喜欢我的业务未完成而死〜开玩笑.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:25:29.747

您必须将您的 SMTP : localhost 替换为有效的 smtp 服务器名称，例如您的网络提供商或您的网络托管 stmp。其中一些需要在发送邮件之前进行识别。

# php - 使用 PHP 函数时在导航栏上找到搜索框？

> ID：13996554
> 
> 赞同：0
> 
> 时间：2012-12-21T20:07:48.333
> 
> 标签：php, css, wordpress, web, uinavigationbar

我刚刚发现这个 php 函数可以在我的[**网站**](http://mamou-mani.com)的菜单（导航栏）上添加一个搜索框。我是 php 新手，并且可以使用该功能，但是如何将其移动到菜单栏的最右侧？现在，该功能添加了一个菜单选项卡并将框放在那里。我应该使用 CSS 还是修改函数本身？

```
add_filter('wp_nav_menu_items','add_search_box', 10, 2);
function add_search_box($items, $args) {

    ob_start();
    get_search_form();
    $searchform = ob_get_contents();
    ob_end_clean();

    $items .= '<li>' . $searchform . '</li>';

return $items;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:11:48.353

打开文件：

[http://mamou-mani.com/wp-content/themes/modularity/style.css](http://mamou-mani.com/wp-content/themes/modularity/style.css)

改变

```
#search { margin: 0; padding: 0; } 
```

至

```
#search { margin: 0; padding: 0; width:395px; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T21:15:45.700

您始终可以在 css 中定位：相对并移动它

# html - Perl - 使用 pQuery 添加和修改 HTML

> ID：13996557
> 
> 赞同：1
> 
> 时间：2012-12-21T20:07:55.930
> 
> 标签：html, perl

我只是一个业余爱好者 Perl 程序员，学习 pQuery 并使用本地 HTML 文件来帮助这个过程。这是我到目前为止所拥有的：

```
 use strict;
        use warnings;

        use pQuery;

        my $filename = 'learn.html';
        my $file = pQuery($filename);

        my $metadesc = pQuery("meta", $file)->eq(2);
        my $title = $file->find('title');
        my $h1 = $file->find('h1')->find('a');
        my $h2 = $file->find('h2')->eq(0);

        $title->html('New Title');
        $h1->html('New Heading');
        $h2->html('New Sub-Heading'); 
```

但是，我遇到了一些困难，无法完全确定下一步该做什么。我想做的事：

1.  修改$metadesc的“Content”属性；
2.  在 $h2; 之后立即在 div 中添加 ap；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T22:47:08.400

如果是 jQuery，我会说 1\. 使用 .attr() 方法更新 $metadesc 的属性和 2\. 使用 insertAfter 方法。

但正如该模块所说，它正在建设中并且“这个模块仍在编写中。记录的方法都按照记录的方式工作（但可能还没有完成它们的 jQuery 对应物的端口）。” 所以这些方法可能还没有实现。

# objective-c - UITableView 作为 AppDelegate 中的子视图

> ID：13996559
> 
> 赞同：1
> 
> 时间：2012-12-21T20:07:58.183
> 
> 标签：objective-c, ios, xcode, ios6

在令人惊讶的世界今天没有结束之后我继续编码，

我制作了 UITableViewController，它在使用 segue 时效果很好，但我想在 AppDelegete 中制作这个控制器子视图（制作像 facebook 这样的侧边菜单）。

所以我的 AppDelegate (didFinishLaunchingWithOptions) 我添加了这个：

```
UIStoryboard* sb = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];

SideMenuViewController * rm = (SideMenuViewController *)[sb instantiateViewControllerWithIdentifier:@"RightMenu"];

[self.window addSubview:rm.tableView]; 
```

它添加了表格并且表格正确呈现， **直到**我单击某个单元格或尝试滚动，突然该表格中的所有内容都消失了，我看到完全空的表格，没有部分也没有单元格。

我能做些什么？可能是一些委托问题，因为它是在 AppDelegate 中实例化的？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:41:12.557

您必须设置`rootViewControlle`r 的属性`window`。可能这会有所帮助..在将表添加为子视图和控制器实例之间插入此代码的任何方式：

```
self.window.rootViewController = rm; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:36:39.363

我对故事板没有任何经验，所以这是一个疯狂的猜测：`SideMenuViewController`实例在用于填充初始表视图后是否被释放？该`UIStoryboard`对象肯定似乎是未保留的，但我不确定`instantiateViewControllerWithIdentifier:`.

# azure - TFS 构建服务生成一个引用错误版本的 msshrtmi 的包（应该是 1.7，最终引用 1.8）

> ID：13996561
> 
> 赞同：2
> 
> 时间：2012-12-21T20:08:04.580
> 
> 标签：azure, msbuild

我刚刚为我的项目设置了一个持续部署构建（使用 azure TFS 服务又名 visualstudio.com），但它不能正常工作。构建似乎很好，部署开始了，但我的工人角色总是不断地回收。我在通过管理门户部署的 Visual Studio 中的手动构建工作正常。当我远程访问其中一个工作虚拟机以查看发生了什么时，我在事件日志中发现了这一点：

```
An unhandled exception occurred. Type: Autofac.Core.DependencyResolutionException Process ID: 2488
Process Name: WaWorkerHost
Thread ID: 13
AppDomain Unhandled Exception for role MyProject.Worker_IN_1
Exception: An exception was thrown while invoking the constructor 'Void .ctor(Microsoft.WindowsAzure.CloudStorageAccount)' on type 'TemplateRepository'.
  at MyProject.Worker.WorkerRole.Run() in c:\a\src\MyProject\Dev\MyProject.Worker\WorkerRole.cs:line 383
  at Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.StartRoleInternal()
  at Microsoft.WindowsAzure.ServiceRuntime.Implementation.Loader.RoleRuntimeBridge.<startrole>b__1()
  at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean ignoreSyncCtx)
  at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
  at System.Threading.ThreadHelper.ThreadStart()

Inner Exception: The type initializer for 'Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment' threw an exception.
  at Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.GetConfigurationSettingValue(String configurationSettingName)
  at MyProject.Worker.Core.Repositories.TemplateRepository..ctor(CloudStorageAccount account) in c:\a\src\MyProject\Dev\MyProject.Worker.Core\Repositories\TemplateRepository.cs:line 24
  at lambda_method(Closure , Object[] )
  at Autofac.Core.Activators.Reflection.ConstructorParameterBinding.Instantiate()

Inner Exception: Could not load file or assembly 'msshrtmi, Version=1.8.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35' or one of its dependencies. The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT:
 0x80131040)
  at Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment.InitializeEnvironment()
  at Microsoft.WindowsAzure.ServiceRuntime.RoleEnvironment..cctor() 
```

似乎出于某种原因，在 TFS 构建服务器上执行的构建最终错误地引用了 msshrtmi 的 1.8 版，而不是 1.7（这是我所有项目实际引用的）。我尝试添加对 msshrtmi 的显式引用，并且还尝试了在此处找到的建议 (http://tomkrueger.wordpress.com/2010/07/27/azure-deployment-issue-after-upgrading-to-visual-studio- 2010-and-net-4-0/) 似乎都没有工作。

还有其他建议吗？

**更新**：这是我[在 MSDN 论坛上的交叉帖子的链接](http://social.msdn.microsoft.com/Forums/en-US/azuretfs/thread/8fd9dbec-532d-4dea-865b-080beef45266)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T01:01:12.077

你能引用 1.8 版本的 Azure 程序集吗？

Microsoft.WindowsAzure.ServiceRuntime 的 1.8 版本引用 msshrtmi.dll 的 1.8 版本，如果目标 Azure 环境没有该 dll，则会失败并显示此消息。

# mysql - Mysql 主键是否有推荐的大小

> ID：13996565
> 
> 赞同：5
> 
> 时间：2012-12-21T20:08:22.187
> 
> 标签：mysql, database-design, primary-key

我表中的每个条目`'projects'`都有一个唯一的 32 个字符的哈希标识符，使用`varchar(32)`.

将其用作`primary key`? 是否有推荐的主键大小和数据类型？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T20:13:00.500

我会说是的，将这么大的列用作主键是个坏主意。原因是您在该表上创建的每个索引都将包含 32 个字符的列，这会使所有索引的大小膨胀。更大的索引意味着更多的磁盘空间、内存和 I/O。

如果可能，最好使用自增整数键，并简单地在哈希标识符列上创建唯一索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T21:50:05.407

取决于^(tm) ;)

从您的描述来看，此字段是您的数据所固有的，并且必须是唯一的。如果确实如此，那么您*必须*将其设为密钥。如果您有子表，请考虑引入*另一个*所谓的“代理”键，以保持子 FK 更苗条，并可能避免 ON UPDATE CASCADE。但请注意，每个额外的索引都会引入开销，尤其是对于[聚簇表](http://www.ovaistariq.net/521/understanding-innodb-clustered-indexes/)。更多关于代理键[的信息](https://stackoverflow.com/a/13964847/533120)。

另一方面，如果此键不是数据模型固有的，请将其替换为较小的键（例如，自动递增的整数）。您将节省一些磁盘空间并（更重要的是）提高缓存的有效性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T20:42:09.273

这个键不好有几个原因。

*   @Eric 解决了一个问题，因为每个二级索引都将包含相同的 32 个字符
*   主键往往用于从其他表中查找，并且这些表也需要有这 32 个字符，也许在那里主键和同样的问题会在这些表上再次出现。
*   我能想到的最大原因是性能。当您插入散列类型的记录时，您基本上是以随机顺序插入键，这反过来最终会导致大量页面拆分和仅填充 50% 到 90% 的页面。这会导致不必要的深度树、更长的搜索时间、更大的表空间以及索引占用更多内存。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T20:12:28.440

取决于您对如何定义主键的用法。我通常使用 INT(11) 作为主键。它使外键变得非常容易。

我刚看到你的编辑。我个人会使用带有自动增量的 int(11)。根据您的设置，这将允许您非常轻松地拥有具有外键约束的其他表。你可以用 varchar 做同样的事情，但我一直认为 int 比 varchar 快，尤其是索引。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-21T20:13:10.500

将其用作 PKEY 本身并没有错。如果您有许多其他表将其用作 FKEY，则可能不会。没有一个答案。

另请注意，如果您知道它总是正好是 32 个字符，则应该改为 CHAR(32)。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-21T20:18:42.490

在数据库引擎中，最重要的项目之一是磁盘空间。通过减少数据库传输和传输的数据量，保持小而紧凑的数据通常与良好的性能相关联。如果表将有几行，则没有理由定义 INT 类型的 PK。可以使用 MEDIUMINT、SMALLINT 甚至 TINYINT（就像使用 DATE 而不是 DATETIME 一样），这一切都是为了保持简洁。

# r - knitr：如何将两个不同大小的地块并排显示？

> ID：13996567
> 
> 赞同：12
> 
> 时间：2012-12-21T20:08:39.840
> 
> 标签：r, knitr

我想生成两个不同大小的图像，但并排显示它们。这可能吗？

这可行，但是它们必须具有相同的大小：

```
```{r two_plots_same_size_side_by_side, fig.width=5, fig.height=5}
    plot(...)
    plot(...)
``` 
```

这不起作用，但它可能因为在 Markdown 中，由单个换行符分隔的行出现在同一行上。

```
```{r normal_plot, fig.width=5, fig.height=5}
    plot(...)
```
```{r tall_plot, fig.width=5, fig.height=9}
    plot(...)
``` 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T21:14:05.580

一种选择是使用 R 命令制作一个宽图，然后`knitr`只给出一个要处理的图，可能类似于：

```
```{r fig.width=10, fig.height=9}
layout( cbind( c(0,0,1,1,1,1,1,0,0), rep(2,9) ) )
plot(...)
plot(...)
``` 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-12-21T23:52:41.933

如果要输出到 HTML，另一种选择是使用`out.extra=`chunk 选项，并将它们设置为块内的浮动对象。例如。

```
```{r fig.width=4, fig.height=6,echo=FALSE,out.extra='style="float:left"'}
plot(cars)
```{r fig.width=8, fig.height=6,echo=FALSE, out.extra='style="float:left"'}
plot(cars)
``` 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-12-28T03:35:27.973

如果您不介意调整图的大小，则另一种选择是使用向量 for `out.width`or ，例如`out.height`

```
```{r out.width=c('500px', '300px'), fig.show='hold'}
boxplot(1:10)
plot(rnorm(10))
``` 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2016-07-29T13:54:40.167

您还可以使用 gridExtra 中的 grid.arrange ，它适用于 grob 或 ggplot 对象

```
require(gridExtra)
pre_fig <- rasterGrob(readPNG("paper_figures/surf_0000.png"), interpolate=TRUE)
post_fig <- rasterGrob(readPNG("paper_figures/surf_0044.png"), interpolate=TRUE)
grid.arrange(pre_fig, post_fig, ncol=2) 
```

# html - 选择下拉，只有一个选项作为链接

> ID：13996574
> 
> 赞同：0
> 
> 时间：2012-12-21T20:09:23.723
> 
> 标签：html, wordpress, select, drop-down-menu, jquery-events

我试图弄清楚如何在我的选择下拉列表中创建一个重定向到该页面的链接。到目前为止，我只找到了一种方法来制作所有重定向到的选项链接（[从下拉表单中选择加载页面](http://stackoverflow.com/questions/10175445/load-page-on-selection-from-dropdown-form)），但我**只希望其中一个**选项**成为**链接。我还需要链接在不点击提交按钮的情况下工作。

**使用@VLADIMIR 的建议编辑：**

```
 <form method="get" id="searchform" name="searchform" action="<?php echo home_url(); ?>/">
    <select name="posttype" id="selection">
            <option name="Product" value="Product">Legal Documents</option>
            <option name="videos" value="videos">Legal Advice - Videos</option>
             <option value="http://www.testing.com">An Attorney</option>
        </select>
 <input name="s" id="s" class="s" type="text" onfocus="if(this.value=='<?php _e('');?>') this.value='';" onblur="if(this.value=='') this.value='<?php _e('');?>';" value="<?php _e('');?>" />

<button tabindex="2" type="submit" class="search_btn"> 
    </button>

    <?php wp_dropdown_categories( 'taxonomy=videoscategory&show_option_all=All Practice Areas' ); ?>
    <?php wp_dropdown_categories( 'taxonomy=states&show_option_all=All U.S States' ); ?>

    </form>

    <script type="text/javascript">
    $(document).ready(function() {
        $("#selection").change(function() {
            var curVal = $("#selection option:selected").val();
            if (curVal.indexOf('http://') === 0) {
                location = $("#selection option:selected").val();
            }
        });
    });
    </script> 
```

还有一种方法可以让一个选项具有多个值吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:24:15.910

您可以[在从下拉表单中选择时从加载页面调整解决方案](https://stackoverflow.com/questions/10175445/load-page-on-selection-from-dropdown-form)

将 JS 代码替换为

```
$(document).ready(function() {
    $("#selection").change(function() {
        var curVal = $("#selection option:selected").val();
        if (curVal.indexOf('http://') === 0) {
            location = $("#selection option:selected").val();
        }
    });
}); 
```

这个想法是你检查选项值，如果它以'http://'开头，那么你设置新的位置。

# javascript - 记住动态/AJAX 表单值

> ID：13996576
> 
> 赞同：4
> 
> 时间：2012-12-21T20:09:43.653
> 
> 标签：javascript, ajax, forms

在我开始之前，如果之前有人问过这个问题，我很抱歉，但是我读过的大多数答案要么没有用，要么不够清楚。

我的第一个问题是浏览器如何记住表单输入值？IE，您转到 GMail 并开始输入您的电子邮件地址，然后出现一个下拉列表，其中包含已输入您计算机的电子邮件。我知道这只是由浏览器本机处理，但是如何或可以使它与动态/AJAX 表单一起使用？页面的 Cache-Control 或其他标头如何发挥作用？或者他们根本没有？

我的第二个问题是相关的，在某些网页上，当您登录浏览器（而不是网站）时，会询问您是否希望它记住您的姓名和密码。如果您这样做了，那么下次您进入登录页面时，表格已经以金色突出显示为您填写。我怎样才能复制这种行为？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:28:39.823

为了让您保存输入的电子邮件地址，您需要某种数据库。您将使用 ajax 将击键记录到数据库中，然后使用 ajax 检索它。这可以与 ajax 同时进行。

第二个问题是您需要存储一个带有 id 的 cookie，以便您可以使用 id 在数据库中查找信息并填写用户名或直接登录。

# vb.net - 列表框中只显示一个输入的文本框值

> ID：13996577
> 
> 赞同：0
> 
> 时间：2012-12-21T20:09:46.080
> 
> 标签：vb.net, visual-studio, textbox, listbox

简单的初学者问题在这里，放轻松。我有几个文本框，用户可以将值放入 + 选择日期，我希望它们出现在列表框中。不幸的是，只有第二个文本框的值出现多次。这可以在这里看到：http: [//i.stack.imgur.com/kCqrz.png](http://i.stack.imgur.com/kCqrz.png)

这是完整的表格代码： http: [//pastebin.com/MDb1hSCA](http://pastebin.com/MDb1hSCA)

这是将数据添加到数组的位置：

```
stockArray(nofDataDay, lowValue) = possibleLow
stockArray(nofDataDay, highValue) = possibleHigh
stockArray(nofDataDay, openValue) = possibleOpen
stockArray(nofDataDay, closeValue) = possibleClose
dateArray(nofDataDay) = Convert.ToDateTime(WeatherDateTimePicker.Text)
nofDataDay = nofDataDay + 1 
```

这是它的显示位置：

```
For day = 0 To nofDataDay - 1
    StockListBox.Items.Add(dateArray(day).ToShortDateString & _
        delimiter & stockArray(day, openValue).ToString & _
        delimiter & stockArray(day, closeValue).ToString & _
        delimiter & stockArray(day, highValue).ToString & _
        delimiter & stockArray(day, lowValue).ToString & _
        delimiter & AverageStock(stockArray(day, lowValue), stockArray(day, highValue)))
Next 
```

出于某种原因，它只是添加了 Close 值。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:36:23.167

您永远不会设置列索引变量的值（即`openValue`, `closeValue`, `highValue`, `lowValue`）。它们都默认为零，因此您只需多次添加第一列。您可以在声明它们时设置它们的值，如下所示：

```
Dim lowValue As Integer = 0
Dim highValue As Integer = 1
Dim openValue As Integer = 2
Dim closeValue As Integer = 3 
```

您还需要将数组声明为更大：

```
Dim stockArray(30, 3) As Integer 
```

但是，默认情况下`Dim`将字段声明为公共，并且由于这可能不是您真正想要的，我建议将它们更改为私有。此外，列索引确实应该是常量：

```
Private Const lowValue As Integer = 0
Private Const highValue As Integer = 1
Private Const openValue As Integer = 2
Private Const closeValue As Integer = 3
Private stockArray(30, 3) As Integer 
```

但是，这种错误不可能让您更好地设计代码。我建议不要使用二维数组，而是创建一个类来存储单个项目的所有数据。然后，使用`List(T)`对象而不是数组来存储项目列表。例如：

```
Public Class MyItem
    Public Date As Date
    Public LowValue As Integer
    Public HighValue As Integer
    Public OpenValue As Integer
    Public CloseValue As Integer
End Class

Private myItems As New List(Of MyItem)() 
```

然后，您可以像这样添加项目：

```
Dim item As New MyItem()
item.Date = Convert.ToDateTime(WeatherDateTimePicker.Text)
item.LowValue = possibleLow
item.HighValue = possibleHigh
' ...
myItems.Add(item) 
```

然后你可以像这样从列表中读取项目：

```
For Each item As MyItem in myItems
    StockListBox.Items.Add(item.Date.ToShortDateString() & _
            delimiter & item.OpenValue.ToString() & _
            delimiter & item.CloseValue.ToString() & _
            delimiter & item.HighValue.ToString() & _
            delimiter & item.LowValue.ToString() & _
            delimiter & AverageStock(item.LowValue, item.HighValue))
Next 
```

正如你所看到的，这样做更能自我记录，更少混乱，更不容易出错。

# c# - MongoDB CSUUID 字段

> ID：13996578
> 
> 赞同：1
> 
> 时间：2012-12-21T20:09:47.623
> 
> 标签：c#, mongodb, mongodb-.net-driver

有点奇怪的场景，但我基本上有一个强类型模型，我们称之为 Person。使用 C# 驱动程序将此模型保存到 MongoDB 中。然后另一个应用程序提取原始 BSON 文档（通过 QueryDocument），然后调用 ToJson() 并将其吐出到其他地方以供其他使用。

然而，JSON 吐出在 JSON 中有自定义 CSUUID 字段，并且序列化框架不知道如何处理它们，所以有什么方法可以删除它们并让它只有 GUID 而没有 CSUUID 包装器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T23:30:17.067

是的，当您使用带有 JsonWriterSettings 的重载执行 .ToJson() 时。JsonWriterSettings 有一个属性调用 OutputMode，它对应于 JsonOutputMode。有了它，你可以选择你想要的“严格”级别。

```
var settings = new JsonWriterSettings
{
  OutputMode = JsonOutputMode.Strict
};

return doc.ToJson(settings); 
```

# javascript - Javascript 模块模式混淆

> ID：13996580
> 
> 赞同：0
> 
> 时间：2012-12-21T20:09:59.940
> 
> 标签：javascript, design-patterns, module, zepto

我正在尝试使用 Javascript 模块模式。我希望我的模块有一个可以在加载 json 文件时调用的公共方法。在这个简单的示例中，模块在 init 上加载 json，并且（应该）在调用公共方法 'loadPic' 时将图像加载到 DOM 元素中。图像的来源在 json 文件中。）第一次运行脚本时，出现以下错误： Uncaught TypeError: Cannot read property 'src' of undefined。我的解释是在加载数据之前自动调用方法'loadPic'......但我不知道如何防止这种情况。这是代码（PS：我使用的是 Zepto，jQuery 的“轻量级”版本）：

```
<!-- language: lang-js -->
/* in module file: DualG.js */
;(function ($) {
    $.extend($.fn, {
        DualG: function (element, options) {
        var defaults = { // not used yet...
            indexStart:0,
            url: 'js/data.json'
        },
            my = {},
            init,
            loadPic,
            plugin = this;

        plugin.settings = {};
        plugin.pics = [];

        init = function () {
            plugin.settings =  $.extend{}, defaults, options);
            $.getJSON(plugin.settings.url, function (data) {
                var l = data.images.length, i;
                for (i = 0; i < l; i = i + 1) {
                    plugin.pics[data.images[i].index] = data.images[i];
                }
            });

        init();

        my.loadPic = function (index, container) {
            $(container).empty().append($("<img>").attr({"src":plugin.pics[index].src}));
        };

        return my;
     }
  });
}(Zepto)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:48:03.850

我的问题是数据是同步加载的——所以我想使用尚未加载的数据。加载数据后，我在 init 中添加了一个事件触发器。然后，我监听事件并调用 loadPic 方法......谢谢大家的帮助。

# ios - 检测第一次安装在 iOS NOT NSUserDefaults

> ID：13996582
> 
> 赞同：6
> 
> 时间：2012-12-21T20:10:07.307
> 
> 标签：ios, cocoa-touch, nsuserdefaults

**它是如何工作**的 - 该应用程序是对跨平台工作的服务的订阅。在 iphone 上，初次购买将获得 30 天的完整功能，然后在 30 天后，您将无法做某些事情，直到您通过应用内购买购买订阅。

**我需要什么**- 我需要知道它是否是第一次运行，以便我可以将用户信息添加到数据库中。或者因为它是跨平台的，他们可能已经支付了订阅费用，所以我需要为用户已经存在的订阅增加 30 天。

**我现在在做什么**- 目前我将 identifierForVendor 存储在远程数据库中，并且在 NSUserDefaults 中有一个 bool 检查以查看 1\. 是否是第一次运行和 2\. 如果是第一次运行以允许用户添加自己到数据库进行 30 天的完整使用，或将 30 天添加到他们现有的订阅中。

**问题**- 问题是如果用户删除应用程序然后重新安装它，NSUserDefaults 也将被删除，并且 identifierForVendor 将发生变化，这将允许用户通过删除并重新安装免费的订阅再增加 30 天应用程序。

**理想**的解决方案 我本来想订阅应用程序，但不知道如何在最初购买应用程序时查看收据并将用户插入远程数据库。此外，我真的不知道如何设置不是应用内购买的订阅。我还考虑过让应用程序免费，然后他们可以使用应用内购买来购买服务，但是应用程序没有用，因为它无法连接到远程服务器以首先建立数据。

**底线我想做以下其中一项**

1.  首次购买时进行订阅（我需要能够检测购买是否有效，以便将用户信息输入远程数据库）
2.  使应用程序免费，然后使用应用程序内购买来添加订阅（是否可以接受免费应用程序在您订阅之前不会做任何事情？）
3.  保持现在的状态（但要找到一个更永久的解决方案来解决 identifierForVendor，并且 identifierForAdvertising 也不起作用，因为它可以关闭）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T21:53:42.973

这会对你有很大帮助。基本上它是在 NSUserDefaults 之后模式化的 Keychain 的包装器。它帮助了我很多。将东西存储在钥匙串中可以让它们在应用程序重新安装后保持不变。

[https://github.com/carlbrown/PDKeychainBindingsController](https://github.com/carlbrown/PDKeychainBindingsController)

> 该项目旨在使使用 Mac OSX 和 iOS 钥匙串像 NSUserDefaults 一样简单。
> 
> 它是一个围绕 Mac OSX 和 iOS Keychains 的 KVO 兼容 Cocoa 包装器，这个包装器的模型是 NSUserDefaults，因此目的是对于您通常想要调用的常见情况：
> 
> [NSUserDefaultsController sharedUserDefaultsController] 你应该可以调用
> 
> [PDKeychainBindingsController sharedKeychainBindingsController] 对于您通常会调用的常见情况：
> 
> [NSUserDefaults standardUserDefaults] 你应该可以调用
> 
> [PDKeychainBindings sharedKeychainBindings]

# html - Div 跳到第二排？为什么？

> ID：13996587
> 
> 赞同：2
> 
> 时间：2012-12-21T20:10:37.030
> 
> 标签：html, css, regression

1.  打开这个页面：http: [//jsfiddle.net/dwDZx/6/](http://jsfiddle.net/dwDZx/6/)
2.  调整大小直到红色
3.  继续缩小浏览器

    ```
    <div id="container">
    <div id="div1"><div class="content">one</div></div>
    <div id="div2"><div class="content">two</div></div> 
    ```

    ​</p>

为什么 div2 会跳下一行而不是调整大小？我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T20:14:33.617

您正在为较小的屏幕尺寸添加边距。将边距设置为百分比并减去较小屏幕尺寸的宽度百分比。

所以不要以像素为单位设置边距。但以百分比表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:38:11.843

在 //jsfiddle.net/dwDZx/9/ 更新了您的代码

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T21:25:29.967

当 div 为红色时，div 尝试遵循两个相关约束：`width: 48%`和`margin-right: 10px`. 如果 div 是跳下一行而不是调整大小，这意味着该行上没有足够的空间供他们两个使用——他们试图占用比可用空间更多的空间。因此，第二个 div 为自己创建了一个新行，因此两个 div 可以任意宽。所以让我们看看这些数字，看看为什么 div 需要太多空间。

加载[http://jsfiddle.net/roryokane/kZZCh/](http://jsfiddle.net/roryokane/kZZCh/)，它会动态显示页面和每个 div 的宽度，并使 Result 面板的宽度正好为 400px，因此 bug 就会出现。现在两个 div 的宽度为 192px。这是有道理的——400px 的 48% 是 192px。宽度不包括边距，每个 div 为 10px。所以 div 要求的总宽度是 (192+10)*2 = (202)*2 = 404 像素，比分配给它们的 400px 还多。难怪 div 会换行而不是留在同一行。

那么你如何解决这个问题呢？[Dany 的回答](https://stackoverflow.com/a/13996648/578288)建议将`margin-right`值从像素值更改为百分比值。但这只是一种可能的解决方案。找到最佳解决方案取决于您为什么选择 和 中的两个特定数字，`width: 48%`以及`margin-right: 10px`保留哪个数字更重要。如果您需要将宽度保持在`48%`，请考虑是要保持固定的边距宽度还是切换到灵活的边距宽度。如果您仍需要固定宽度，请使用`margin-right: 8px`. 如果您想要灵活的宽度，请使用`margin-right: 2%`（Dany 的解决方案）。另一方面，如果您需要将右边距宽度保持在`10px`，那么对于宽度，请使用`width: 47.5%`。所有这些值确保即使页面只有 400px 宽，div 也保持在同一行。

# backbone.js - 路由和事件——backboneJS

> ID：13996588
> 
> 赞同：2
> 
> 时间：2012-12-21T20:10:39.777
> 
> 标签：backbone.js, backbone-routing

我应该如何处理 BackboneJS 中的路由？路由时，在新建视图后，我应该触发事件还是直接渲染视图？

以下是两种情况：

触发事件：

```
routes: {
    'orders/view/:orderId' : 'viewOrder'
},
viewOrder: function (orderId) {
    var viewOrderView = new ViewOrderView();
    vent.trigger('order:show', orderId);
} 
```

在我看来，我有：

```
var ViewOrderView = Backbone.View.extend({
    el: "#page",
    initialize: function () {
        vent.on('order:show', this.show, this);
    },
    show: function (id) {
        this.id = id;
        this.render();
    },
    render: function () {
        var template = viewOrderTemplate({ id: this.id });
        this.$el.html(template);
        return this;
    }
}); 
```

或者，我应该走这条路：

```
routes: {
    'orders/view/:orderId' : 'viewOrder'
},
viewOrder: function (orderId) {
    var viewOrderView = new ViewOrderView({id : orderId });
    viewOrderView.render();
} 
```

在我看来，我有：

```
var ViewOrderView = Backbone.View.extend({
    el: "#page",
    initialize: function () {
        //init code here
    },
    render: function () {
        var template = viewOrderTemplate({ id : this.id});
        this.$el.html(template);
        return this;
    }
}); 
```

我**认为**这是第一种情况——考虑到主干是事件驱动的，但第二种情况显然有更少的代码。

另外，我想第三种情况是将视图代码保留在第一种情况中，但抓住第二种情况的路由器情况......在导航上渲染视图，但如果我想在其他地方触发它，则公开一个事件。

想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T21:48:10.497

因此，所有主干问题通常都会以许多似是而非的答案告终。在这种情况下，我相信您的第二个示例是更规范/典型的主干模式。撇开处理加载微调器和数据加载后更新的棘手问题不谈，路由器中简化的基本模式将是：

```
routes: {
    'orders/view/:orderId' : 'viewOrder'
},

viewOrder: function (orderId) {
    //Use models to represent your data
    var orderModel = new Order({id: orderId});
    //models know how to fetch data for themselves given an ID
    orderModel.fetch();
    //Views should take model instances, not scalar model IDs
    var orderView = new OrderView({model: orderModel});
    orderView.render();
    //Exactly how you display the view in the DOM is up to you
    //document.body might be $('#main-container') or whatever
    $(document.body).html(orderView.el);
} 
```

我认为这是教科书的模式。同样，谁触发数据的获取并在数据到达后重新呈现的问题是棘手的。我认为最好是视图知道如何呈现自身的“加载”版本，直到模型获取数据，然后当模型在获取完成后触发更改事件时，视图会使用加载的模型数据重新呈现自身。但是，有些人可能会将这种逻辑放在别处。[这篇关于构建下一个 soundcloud 的文章](http://backstage.soundcloud.com/2012/06/building-the-next-soundcloud/)我认为代表了许多非常好的“最先进的”主干模式，包括它们如何处理未获取的模型。

通常，您可以根据自己的喜好使用回调或事件编写代码。但是，一个好的经验法则是问自己一些问题：

1.  是否有不止一个独立的逻辑工作将响应此事件？
2.  我是否需要将此事件的来源与响应它发生的事情分离？

如果这两个都是“是”，那么事件应该很合适。如果两者都是“否”，那么简单的函数逻辑更合适。在“导航到此 URL 触发此视图”的情况下，通常这两个问题的答案都是“否”，因此您可以将该逻辑编码到路由器的路由处理程序方法中并完成它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T21:45:16.590

我会使用第二种情况。看不到使用第一种方法的任何好处。这样会更有意义（但仍有争议）：

```
/* ... */
routes: {
    'orders/view/:orderId' : 'viewOrder'
},
viewOrder: function (orderId) {
    vent.trigger('order:show', orderId);
}
/* ... */
vent.on('order:show', function(orderId) {
    var viewOrderView = new ViewOrderView();
    viewOrderView.render();
});

var ViewOrderView = Backbone.View.extend({
    el: "#page",
    initialize: function (options) {
        this.orderId = options.orderId;
    },

    render: function () {
        var template = viewOrderTemplate({ 
            id: this.orderId 
        });
        this.$el.html(template);
        return this;
    }
}); 
```

这样至少您可以在不更新 url 的情况下触发路由操作。`Backbone.router.viewOrder(1)`但是使用大概也可以达到同样的效果。事件非常强大，但如果我真的不需要，我不会使用它们。

# date - date() 函数问题

> ID：13996595
> 
> 赞同：0
> 
> 时间：2012-12-21T18:44:03.700
> 
> 标签：date, timezone

我创建了一个位于澳大利亚的 WordPress 网站。我的`date()`功能有问题。如下所示的错误消息。我已将默认时区设置为澳大利亚/墨尔本，但我仍然收到错误消息。

![错误信息](../Images/76e37b6c40976d27c809fda74cf2c548.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:07:11.320

你是如何设置时区的？如果您正在使用该`date_default_timezone_set()`功能，那么您需要将其放在您网站的每个页面上。在 WordPress 网站上执行此操作的最佳方法是在以下位置添加一行`wp-config.php`：

```
date_default_timezone_set( 'Australia/Melbourne' ); 
```

但是，设置默认时区的**最佳**方法是添加一行`php.ini`：

```
date.timezone = Australia/Melbourne 
```

# scala - 类型别名和类型 lambda 之间的区别

> ID：13996601
> 
> 赞同：12
> 
> 时间：2012-12-21T20:11:21.520
> 
> 标签：scala, types, scalaz, implicits

这个问题是关于 Scala 隐式解析系统的限制，我在使用 Scalaz 时遇到过几次，这对我来说没有多大意义。我已将问题提炼为下面的无 Scalaz 版本，但如果需要，我很乐意提供有关动机的更多信息。

假设我有几个类型类见证了类型构造函数：

```
import scala.language.higherKinds

trait Foo[F[_]]
trait Bar[F[_], A] 
```

现在还假设如果我有`Foo`一些实例`F`，我知道我也有一个`Foo`实例`Bar[F, _]`：

```
implicit def barFoo[F[_]: Foo] = new Foo[({type L[X] = Bar[F, X]})#L] {} 
```

我也有实例`List`和右侧`Either`：

```
implicit object listFoo extends Foo[List]
implicit def eitherFoo[A] = new Foo[({type L[X] = Either[A, X]})#L] {} 
```

现在很清楚我应该能够编写以下内容：

```
type BarList[X] = Bar[List, X]

implicitly[Foo[BarList]] 
```

或者，等效地：

```
implicitly[Foo[({type L[X] = Bar[List, X]})#L]] 
```

事实上，两者都按预期工作。

所以我尝试以下方法：

```
type StringOr[X] = Either[String, X]
type BarStringOr[X] = Bar[StringOr, X] 
```

接着：

```
scala> implicitly[Foo[BarStringOr]]
res2: Foo[BarStringOr] = $anon$1@39a6c855 
```

同样，这里没有惊喜。但后来我尝试：

```
implicitly[Foo[({type L[X] = Bar[StringOr, X]})#L]] 
```

我得到以下信息：

```
<console>:15: error: could not find implicit value for parameter e: Foo[[X]Bar[[X]scala.util.Either[String,X],X]]
              implicitly[Foo[({type L[X] = Bar[StringOr, X]})#L]]
                        ^ 
```

请注意，我可以毫无问题地推断出必要的`Foo`实例`StringOr`，或者显式调用`barFoo`以获取所需的实例：

```
scala> implicitly[Foo[StringOr]]
res4: Foo[StringOr] = $anon$1@3eaac006

scala> barFoo[StringOr]
res5: Foo[[X]Bar[StringOr,X]] = $anon$1@179fbfea 
```

我无法确定允许 lambda 类型版本适用于前者但不适用于后者的情况`List`之间可能存在的重要区别。`StringOr`

我在 Scala 2.10.0-RC5 和 2.9.2 上试过这个。在整个过程中添加协方差并没有帮助。

我错过了一些明显的东西吗？有人可以指出规范中的某些内容可以帮助我理解这一点，或者指向以前对类似问题的讨论吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T05:41:53.620

好的，我不是 100% 确定，但我认为我们可以通过将其减少到最简单的失败案例来取得一些进展。隐式不是这里的问题，类型别名也不是。这足以失败：

```
trait Foo[F[_]]
trait Bar[F[_], A]

def barFoo[F[_]: Foo] = new Foo[({type L[X] = Bar[F, X]})#L] {}

val res1: Foo[({type L[X] = Either[String, X]})#L] = null

val works = barFoo[({type L[X] = Either[String, X]})#L](res1)
val fails = barFoo(res1) 
```

问题在于 Scala 无法推断`barFoo`as的类型参数`[X]Either[java.lang.String,X]`。这似乎是由于（或至少与）[scalac 拒绝推断部分应用的类型构造函数](http://pchiusano.blogspot.com/2011/05/making-most-of-scalas-extremely-limited.html)有关。

（在相关的说明中，这是 Scala 认为复杂到无法接受的类型之一的示例）。

# java - 如何在计时器倒计时时产生蜂鸣器？

> ID：13996602
> 
> 赞同：0
> 
> 时间：2012-12-21T20:11:21.363
> 
> 标签：java, android

我希望在 CountDownTimer 到期时播放声音。我似乎无法让它按我的意愿工作。我查看了一些使用 ToneGenerator 的示例代码，但它没有像我期望的那样工作，因为我是 android 和 java 的新手，不太确定如何让它更好地工作。

这是我所拥有的： - 倒数计时器有效。当我单击它时它会启动和停止，当我再次单击它时它会恢复。这里的一切都很完美。

*   我已经设法从我的设备中播放了一些声音，但由于某种原因它实际上会重复。不知道为什么。

这就是我想要的： - CountDownTimer 的 onFinish()，我想在 2 或 2.5 秒的时间段内生成大约 2800Hz 的音调。- 在我让它工作之后，我想尝试让它以 2800Hz 和 2000Hz 的频率交替变化，每次 50 毫秒或其他时间，持续 2 到 2.5 秒。

** 编辑 **

```
public void soundBuzzer() {
    ToneGenerator toneGen;
    int type1, type2;
    toneGen = new ToneGenerator(AudioManager.STREAM_MUSIC, 100);

    type1 = ToneGenerator.TONE_DTMF_6;
    type2 = ToneGenerator.TONE_DTMF_8;

    toneGen.startTone(type2, 2000);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-06T21:37:57.553

当您按住一个数字时，ToneGenerator 将产生一种听起来像电话铃声的声音。我无法使用该课程让蜂鸣器发声并使其听起来不错。结果，我最终播放了 MP3 声音。

这是代码：

```
// function to generate a tone for 3 seconds
public void soundBuzzer( boolean shortBuzzer ) {
    MediaPlayer mp;

    if( !shortBuzzer )
        mp = MediaPlayer.create(appContext, R.raw.buzzer_2s);
    else
        mp = MediaPlayer.create(appContext, R.raw.buzzer_short);

    mp.start();

} 
```

# c++ - 将 inFile 读入链表并按名称排序

> ID：13996605
> 
> 赞同：0
> 
> 时间：2012-12-21T20:11:41.640
> 
> 标签：c++, sorting, linked-list

我是链表上的菜鸟，所以如果你能帮助我处理这段代码，我将不胜感激，到目前为止，如果写下你可以在下面看到的我的第一个问题是我如何调用我的 void 对文本文档进行排序（见下文) 我已经写了 sort void 但不知道如何正确地写它来访问链表......

```
 ***1stName lastname number email bday***
  Nikos Nikolas 281085252 niko@hotmail.com 21/10/1995
  mary ann 2810258963 mary@hotmail.com 22/10/1995
  james bond 2810254789 james@hotmail.com 23/11/2000
  luna loop 2810258741 luna@hotmail.com 24/04/1990

 #include <iostream>
   #include <fstream>
   #include <string>
   #define TRUE 1
   using namespace std;

   struct organizer
   {
       string first_name;
       string last_name;
       int number;
       string email;
       string bday;
       organizer* next;
   };
   int main()
   {
      void sort_by_last(organizer* head_ptr);
      char command;
      ifstream inFile;
      inFile.open("mycontacts.txt");
      if (!inFile)
      {
          cerr << "Unable to open file." << endl;
          return 0;
      }
      organizer* temp = new organizer;
      organizer* head_ptr = temp;

      while(inFile)
      {
         inFile >> temp->first_name;
         inFile >> temp->last_name;
         inFile >> temp->number;
         inFile >> temp->email;
         inFile >> temp->bday;
         temp->next = new organizer;
         temp = temp->next;
      }
      temp->next = NULL;
      while (TRUE)
      {
          cout << "Write 'print' To print mycontacts." << '\n';
          cout << "Write 'find' '..'to search myconacts."<< '\n';
          cout << "Write 'delete' 'name'to delete a contact."<< '\n';
          cout << "Write 'insert' 'details' to add a contact."<< '\n';
          cout << "Write 'quit' to exit the programm."<< '\n';
          command = getchar();
          switch(command)
            {
            case 'p':
                    sort_by_last(organizer);
                    break;
            case 'f':
                    cout << "search and print\n"; break;
            case 'd':
                    cout << "delete\n";break;
            case 'i':
                    cout << "insert\n";break;
            case 'q':
                    cout << "Quitin programm.\n";
                    return 0;
            }
        }
        return 0;
        }
        void  sort_by_last(organizer* head_ptr)
         {
          organizer* node = head_ptr;
          organizer* temp = NULL;

          while (node->next != NULL)
            {
               if(node->last_name > node->next->last_name)
               {
                  temp = node;
                  node = node->next;
                  temp->next = node;
                  node = temp;
                }
            }
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-27T11:32:28.203

不使用`struct`，`class`改为使用。

```
class Organizer
{
   Organizer() { next = NULL; };
   string first_name;
   string last_name;
   int number;
   string email;
   string bday;
   Organizer* next;
   bool operator <(const Organizer &other)
   { return last_name.compare(other.last_name) == -1; };
}; 
```

我不认为 string 支持`<`，所以我使用 compare 代替。

由于您只有一个单链表，而不是双链表（只有`next`变量，也不`previous`是），因此 sort 需要采用 a `**`，或者您需要比较`->next`and`->next->next`并且有一个空白的 head 项目。

更改`sort_by_last(organizer);`为`sort_by_last(&head_ptr);`

排序函数看起来像（假设你想做插入排序，这很慢但很简单）：（未经测试）

```
void sort_by_last(Organizer **head_ptr)
{
   Organizer **node = head_ptr;

   while (*node != NULL)
   {
      Organizer **temp = head_ptr;
      Organizer **next = &(*node)->next;
      while (*temp != NULL && **temp < **node)
         temp = &(*temp)->next;
      if (*temp != NULL && *temp != *node)
      {
         (*node)->next = *temp;
         (*temp)->next = (*node)->next;
         *temp = *node; // same as (*temp)->prev->next = *node
         *node = NULL; // so we don't point back to earlier in the list
      }
      node = next;
   }
} 
```

我假设您必须使用链表，但 std::set 将是一个更简单的解决方案（它在插入时排序）。

```
#include <set>
std::set<Organizer> theSet;
...
Organizer organizer;
// set up organizer
theSet.insert(organizer); 
```

# sql - 通过linux使用mysqldump导出时将数据库名称添加到sql文件

> ID：13996606
> 
> 赞同：0
> 
> 时间：2012-12-21T20:11:41.947
> 
> 标签：sql, linux, command-line, mysqldump

我需要每天备份一系列数据库，我想通过命令行来完成。

我正在使用 mysqldump 将数据库转储到服务器根目录上附加日期的文件夹中。我想将数据库的名称动态添加到导出的文件名中，而不是将其硬编码到查询中。目前我有：

```
[~]# mysqldump -u user -h localhost -p unique_database_name > unique_database_name_1_$(date +%d%m%y).sql 
```

目标是将“unique_database_name”附加到文件名中，这样脚本就更便携了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:29:36.090

这个脚本会这样做：

```
#!/bin/bash
dbs='firstdb seconddb thirddb'

echo -n 'Enter database password: '
read pw

for db in $dbs
do
    mysqldump -u user -h localhost -p$pw $db > $db_1_$(date +%d%m%y).sql
done 
```

# node.js - Backbone.js 和 express：使用查询字符串按字段搜索 mongodb 集合时遇到问题

> ID：13996611
> 
> 赞同：1
> 
> 时间：2012-12-21T20:12:17.807
> 
> 标签：node.js, mongodb, backbone.js, express

我是主干、快递和 mongodb 的新手。我正在尝试传递查询字符串以按字段搜索 mongodb 集合。我做错了什么。如果我从路由器中注释掉“获取”，则会找到该页面。如果我尝试获取，那么我会收到一个找不到页面的错误。我试图隔离它在哪里中断，但骨干架构仍然让我感到困惑。提前致谢。（我打赌这是我的 mongodb 调用中的语法问题）克里斯汀

这是我的代码。

此 URL 应返回“type”= 3 的集合。

```
localhost:8888/#content/3 
```

模型/models.js：

```
window.Content = Backbone.Model.extend({

   urlRoot: "/content",

    idAttribute: "_id"

});

window.ContentCollection = Backbone.Collection.extend({

    model: Content,

    url: "/content"

}); 
```

意见/内容.js

```
window.ContentListView = Backbone.View.extend({

    initialize: function () {
        this.render();
    },

    render: function () {

        //return this;

       this.$el.append('<ul class="thumbnails">');

        this.collection.each(function(model) {
            this.$('.thumbnails').append(new ContentView({model: model}).render().el);
        }, this);

        return this;
    } });

window.ContentView = Backbone.View.extend({

    tagName: "li",

    initialize: function () {
        this.model.bind("change", this.render, this);
        this.model.bind("destroy", this.close, this);
    },

    render: function () {
        $(this.el).html(this.template(this.model.toJSON()));
        return this;
    }

}); 
```

意见/main.js

```
var AppRouter = Backbone.Router.extend({

    routes: { "content/:type" : "contentType" },

    contentType: function(type) {
        var contentList = new ContentCollection({type : type});
        contentList.fetch({success: function(){
            $("#content").empty().append(new ContentListView({collection: contentList}).el);
        }});
        this.headerView.selectMenuItem('build-menu');
    },

    utils.loadTemplate([
       'ContentView'
    ], function() {
    app = new AppRouter();
    Backbone.history.start(); }); 
```

内容视图.html

```
name (<% tag won't print here) 
```

路线/modules.js

```
exports.findContentByType = function(req, res) {

    var type = req.params.type;

    db.collection('content', function(err, collection) {

        collection.find({'type': type.toString()}).toArray(function(err, items) {

            res.send(items);
        });

    }); 

}; 
```

服务器.js

```
app.get('/content/:type', module.findContentByType); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T07:16:03.607

我可以在这里看到几个问题：

1.  `this.headerView.selectMenuItem('build-menu');`（在路由器中）意味着您已`headerView`在路由器对象中定义，但未定义。
2.  同样，`this.template`inside`ContentView`也没有定义

当我删除 #1 中的行并在以下位置定义一个虚拟模板时`ContentView`：

```
template: _.template("<div> Test: <%= version %> </div>"), 
```

然后视图至少呈现 -[请参见此处](http://jsfiddle.net/AUknc/1/)。（这是虚拟数据——我无法确认您的服务器正在返回有效/预期的 JSON。）

# html - 使用自定义字体时 Twitter 引导程序形成“折叠”

> ID：13996612
> 
> 赞同：1
> 
> 时间：2012-12-21T20:12:19.153
> 
> 标签：html, css, twitter-bootstrap

我刚刚将 twitter bootstrap 添加到[我的网站](http://djdavid98.zymichost.com/.math/?open=hmnu&lang=en)，但它似乎不像我希望的那样在使用自定义字体的表单字段上工作。表单输入被推到一个较小的高度，并且内容被切断。添加高度也无济于事。

我需要以某种方式解决这个问题。

![截屏](../Images/5fa11449c2cbbcbba1ec638881285785.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:18:33.503

添加一个更大的`height`和`line-height`。

例如：

```
.input-medium {
  height: 2em;
  line-height: 1em;
} 
```

![固定文本框](../Images/fa48a9c198aad0f5f90d6cf9b561a8be.png)

# vb.net - 访问 Excel 中作为 COM 公开的 .NET 函数

> ID：13996617
> 
> 赞同：2
> 
> 时间：2012-12-21T20:12:30.987
> 
> 标签：vb.net, excel

在[Convert vba to vb6 and create a .dll - how to - 提示、技巧和风险](https://stackoverflow.com/questions/2041363/convert-vba-to-vb6-and-create-a-dll-how-to-hints-tipps-and-risks/13996452#13996452)中，讨论了如何将 VBA 代码转换为 VB.NET 代码并在 Excel 中将 VB.NET 中的函数作为 COM 访问。

在 Excel 中，必须通过 VBA 以这种方式访问​​该函数：

```
Public Function getParameterNumberOfMaterial() As Integer
    Dim myclass as New ExcelExample.ExcelVB
    getParameterNumberOfMaterial = myclass.getParameterNumberOfMaterial()
End Function 
```

这意味着对于向用户公开的每个 VBA 函数，在转换为 VB.NET 时，我必须编写一个如上所述的包装器。

有没有办法直接使用该函数而无需编写 VBA 包装器？也就是说，在 Excel 中，用户可以直接使用`getParameterNumberOfMaterial()`，就像原来的 VBA 函数一样，而无需我编写 VBA 包装器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-25T15:46:02.947

您当然可以直接从 Excel 中调用 COM 可见 .DLL 中的 .NET 函数，尽管您需要稍微修改它们以使其与 COM 和 Excel 兼容。这个例子将在 C# 中，因为这是我熟悉的，但在 VB.Net 中的概念应该是相同的。

打开一个新的 Class 项目，并添加一行来导入 InteropServices 库：

```
using System.Runtime.InteropServices; 
```

声明一个包含您要调用的函数的接口：

```
public interface ISample
{
      object func1(int p1);
      object func2(string p1);
} 
```

只有界面中列出的函数才能在 Excel 中使用。请注意，函数的返回类型是“对象”。Excel 需要这样做才能在工作表中正确显示结果。

声明将实现接口的类，并通过 COM 公开。：

```
[ClassInterface(ClassInterfaceType.None)]  // the proper way to declare COM-visible classes
public class Sample : ISample
{
    public object func1(int p1)
    { 
        // sample implementation
        object[,] retval = new object[1,1]
        retval[0,0] = "a";
        return retval;
    }

    public object func2(string p1)
    {
           // ....
    } 
```

Excel 要求所有返回类型都是二维对象数组，因此您需要以这种方式转换函数的返回值。

您还需要添加一些有助于注册和注销 DLL 的函数：

```
 // helper function to get Registry key of given type
    private static string GetSubKeyName(Type type)
    {
        return "CLSID\\{" + type.GUID.ToString().ToUpper() + "}\\Programmable";
    }

    // called when class is being registered
    [ComRegisterFunctionAttribute]
    public static void RegisterFunction(Type type)
    {
        // register the automation DLL function will be visible to Excel
        RegistryKey key = Registry.ClassesRoot.CreateSubKey(GetSubKeyName(type));
        if (key != null)
        {
            key.SetValue(string.Empty, Environment.SystemDirectory + @"\mscoree.dll");
        }
    }

    // called when class is being unregistered
    [ComUnregisterFunctionAttribute]
    public static void UnregisterFunction(Type type)
    {
        try
        {
            // remove automation DLL from registry
            Registry.ClassesRoot.DeleteSubKeyTree(GetSubKeyName(type));
        }
        catch (Exception ex)
        {
            Debug.Print(ex.Message + ex.StackTrace);
        }
    } 
```

*   在项目的“属性”屏幕中，在“应用程序”选项卡中，单击“程序集信息”，然后选中“使程序集 COM-Visible”。单击确定。
*   在“构建”选项卡中，单击底部附近的“注册 COM 互操作”。
*   构建项目。

在 Excel 中，单击开发人员功能区，单击“加载项”、“自动化”并向下滚动到您的项目。它将以 [namespace].[classname] 的形式列出

您现在应该能够直接在 Excel 工作表中调用函数：

```
=func1(12) 
```

MSDN博主也有关于这个的[帖子](http://blogs.msdn.com/b/eric_carter/archive/2004/12/01/273127.aspx)，但它很旧

PS 如果您在转换到 VB.Net 时需要帮助，请告诉我，我当然可以提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T13:29:11.783

曾经有一种方法可以达到 excel 97，但由于存在安全风险而被删除。调用函数可以从 COM dll 调用函数。[http://www.cpearson.com/excel/Call.htm](http://www.cpearson.com/excel/Call.htm)

# node.js - 在 node-mysql 中使用 typeof 防止删除 where 1

> ID：13996619
> 
> 赞同：0
> 
> 时间：2012-12-21T20:12:37.460
> 
> 标签：node.js, node-mysql

我正在使用节点-mysql。

我注意到当我传入`1`一个删除查询时，我的整个表都被删除了。这对我的语法很有意义，但是我想防止意外掉落。

现在，我通过确保您使用`typeof`. 这可靠吗？

```
exports.destroy = function (sel, next) {
  if (typeof sel !== 'object') {
    //it defaults to id if you don't sepcify and object.
    sel = {'id' : sel};
  }
  db.query('DELETE FROM users WHERE ?', sel, next);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T11:35:18.670

首先，不是表被删除，而是所有行都被删除。其次，使用“<a href="https://github.com/felixge/node-mysql#escaping-query-values" rel="nofollow">准备好的语句”。

以下有点臃肿，但主要思想是使用类似于`removeQuery`. 如果您需要不同于相等的条件，您可以将其作为字符串传递给修改后的版本`post_rating < ?`（您而不是用户，生成的 sql 应该是类似的`DELETE FROM posts WHERE post_rating < ?;`）。

**不过，验证、模式和类似的东西应该交给某种[ORM 。](http://en.wikipedia.org/wiki/Object-relational_mapping)**

```
var util = require('util');

var db = {
  query: function (sql, params, callback) {
    console.log('executing sql `%s` with params `%j`', sql, params);
    callback();
  }
};

function removeQuery(db, table, whereField, type) {
  var sql = util.format('DELETE FROM %s WHERE %s = ?;', table, whereField);
  var fn  = db.query.bind(db, sql);

  return function (value, callback) {
    callback = callback || function () {};
    if (typeof value != type) {
      var message = util.format('Invalid type of `%s` field: should be `%s`; got `%s`',
                                whereField, type, typeof value);
      var err = new Error(message);
      console.error(err);
      return process.nextTick(callback.bind(null, err));
    }

    fn([value], callback);
  };
}

exports.removeUserByUsername = removeQuery(db, 'users', 'username', 'string');
exports.removePostByUserId   = removeQuery(db, 'posts', 'user_id', 'number');

[42, 'tony', undefined].forEach(function (val) {
  exports.removeUserByUsername(val);
  exports.removePostByUserId(val);
}); 
```

# objective-c - 在iOS中批量下载多个文件

> ID：13996621
> 
> 赞同：25
> 
> 时间：2012-12-21T20:12:46.017
> 
> 标签：objective-c, ios

我有一个应用程序，现在需要根据用户的选择下载数百个小型 PDF。我遇到的问题是它需要花费大量时间，因为每次它都必须打开一个新连接。我知道我可以使用 GCD 进行异步下载，但我将如何分批执行此操作，大约 10 个文件。是否有一个已经这样做的框架，或者这是我必须建立自己的东西？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-12-22T01:05:12.843

这个答案现在已经过时了。现在它`NSURLConnection`已被弃用并且`NSURLSession`现在可用，它为下载一系列文件提供了更好的机制，避免了这里设想的解决方案的大部分复杂性。请参阅我讨论的[其他答案](https://stackoverflow.com/a/20808917/1271826)`NSURLSession`。

出于历史目的，我将在下面保留这个答案。

* * *

我确信有很多很棒的解决方案，但是我写了一个小的[下载管理器](https://github.com/robertmryan/download-manager)来处理这个场景，你想下载一堆文件。只需将单个下载添加到下载管理器中，当一个下载完成后，它将启动下一个排队的下载。您可以指定您希望它同时执行多少个（我默认为四个），因此不需要批处理。如果不出意外，这可能会引发一些关于如何在自己的实现中执行此操作的想法。

请注意，这有两个优点：

1.  如果您的文件很大，这永远不会将整个文件保存在内存中，而是在下载时将其流式传输到持久存储。这显着减少了下载过程的内存占用。

2.  在下载文件时，会有委托协议通知您或下载进度。

我试图在[下载管理器 github 页面](https://github.com/robertmryan/download-manager)的主页上描述所涉及的类和正确操作。

* * *

不过，我应该说，这是为了解决一个特定问题而设计的，我想在下载大文件时跟踪它们的下载进度，并且我不想将整个文件保存在一个内存中时间（例如，如果您正在下载一个 100mb 的文件，您真的想在下载时将其保存在 RAM 中吗？）。

虽然我的解决方案解决了这些问题，但如果您不需要，还有使用操作队列的更简单的解决方案。事实上，你甚至暗示了这种可能性：

> 我知道我可以使用 GCD 进行异步下载，但我将如何分批执行此操作，大约 10 个文件。...

我不得不说，做异步下载让我觉得是正确的解决方案，而不是试图通过批量下载来缓解下载性能问题。

您谈到使用 GCD 队列。就我个人而言，我只是创建一个操作队列，这样我就可以指定我想要多少并发操作，然后使用方法下载各个文件，`NSData`使每次下载都是自己的操作。`dataWithContentsOfURL``writeToFile:atomically:`

因此，例如，假设您有一组要下载的文件 URL，它可能是：

```
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
queue.maxConcurrentOperationCount = 4;

for (NSURL* url in urlArray)
{
    [queue addOperationWithBlock:^{
        NSData *data = [NSData dataWithContentsOfURL:url];
        NSString *filename = [documentsPath stringByAppendingString:[url lastPathComponent]];
        [data writeToFile:filename atomically:YES];
    }];
} 
```

很好很简单。通过设置`queue.maxConcurrentOperationCount`您享受并发性，同时不会因过多的并发请求而破坏您的应用程序（或服务器）。

如果您需要在操作完成时收到通知，您可以执行以下操作：

```
NSOperationQueue *queue = [[NSOperationQueue alloc] init];
queue.maxConcurrentOperationCount = 4;

NSBlockOperation *completionOperation = [NSBlockOperation blockOperationWithBlock:^{
    [[NSOperationQueue mainQueue] addOperationWithBlock:^{
        [self methodToCallOnCompletion];
    }];
}];

for (NSURL* url in urlArray)
{
    NSBlockOperation *operation = [NSBlockOperation blockOperationWithBlock:^{
        NSData *data = [NSData dataWithContentsOfURL:url];
        NSString *filename = [documentsPath stringByAppendingString:[url lastPathComponent]];
        [data writeToFile:filename atomically:YES];
    }];
    [completionOperation addDependency:operation];
}

[queue addOperations:completionOperation.dependencies waitUntilFinished:NO];
[queue addOperation:completionOperation]; 
```

这将做同样的事情，除了当所有下载完成时它会调用`methodToCallOnCompletion`主队列。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2013-12-27T22:53:12.183

顺便说一句，iOS 7（和 Mac OS 10.9）提供[`URLSession`](https://developer.apple.com/Library/ios/documentation/Foundation/Reference/NSURLSession_class/Introduction/Introduction.html)和[`URLSessionDownloadTask`](https://developer.apple.com/Library/ios/documentation/Foundation/Reference/NSURLSessionDownloadTask_class/Reference/Reference.html#//apple_ref/occ/cl/NSURLSessionDownloadTask)，它可以很好地处理这个问题。如果您只想下载一堆文件，可以执行以下操作：

```
NSURLSessionConfiguration *configuration = [NSURLSessionConfiguration defaultSessionConfiguration];
NSURLSession              *session       = [NSURLSession sessionWithConfiguration:configuration];

NSString      *documentsPath = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];
NSFileManager *fileManager   = [NSFileManager defaultManager];

for (NSString *filename in self.filenames) {
    NSURL *url = [baseURL URLByAppendingPathComponent:filename];
    NSURLSessionTask *downloadTask = [session downloadTaskWithURL:url completionHandler:^(NSURL *location, NSURLResponse *response, NSError *error) {
        NSString *finalPath = [documentsPath stringByAppendingPathComponent:filename];

        BOOL success;
        NSError *fileManagerError;
        if ([fileManager fileExistsAtPath:finalPath]) {
            success = [fileManager removeItemAtPath:finalPath error:&fileManagerError];
            NSAssert(success, @"removeItemAtPath error: %@", fileManagerError);
        }

        success = [fileManager moveItemAtURL:location toURL:[NSURL fileURLWithPath:finalPath] error:&fileManagerError];
        NSAssert(success, @"moveItemAtURL error: %@", fileManagerError);

        NSLog(@"finished %@", filename);
    }];
    [downloadTask resume];
} 
```

也许，鉴于您的下载需要“大量时间”，您可能希望它们在应用程序进入后台后继续下载。如果是这样，您可以使用`backgroundSessionConfiguration`而不是`defaultSessionConfiguration`（尽管您必须实现[`NSURLSessionDownloadDelegate`](https://developer.apple.com/Library/ios/documentation/Foundation/Reference/NSURLSessionDownloadDelegate_protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLSessionDownloadDelegate)方法，而不是使用`completionHandler`块）。这些后台会话速度较慢，但​​是即使用户离开了您的应用程序，它们也会再次发生。因此：

```
- (void)startBackgroundDownloadsForBaseURL:(NSURL *)baseURL {
    NSURLSession *session = [self backgroundSession];

    for (NSString *filename in self.filenames) {
        NSURL *url = [baseURL URLByAppendingPathComponent:filename];
        NSURLSessionTask *downloadTask = [session downloadTaskWithURL:url];
        [downloadTask resume];
    }
}

- (NSURLSession *)backgroundSession {
    static NSURLSession *session = nil;

    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        NSURLSessionConfiguration *configuration = [NSURLSessionConfiguration backgroundSessionConfiguration:kBackgroundId];
        session = [NSURLSession sessionWithConfiguration:configuration delegate:self delegateQueue:[NSOperationQueue mainQueue]];
    });

    return session;
}

#pragma mark - NSURLSessionDownloadDelegate

- (void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didFinishDownloadingToURL:(NSURL *)location {
    NSString *documentsPath    = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES)[0];
    NSString *finalPath        = [documentsPath stringByAppendingPathComponent:[[[downloadTask originalRequest] URL] lastPathComponent]];
    NSFileManager *fileManager = [NSFileManager defaultManager];

    BOOL success;
    NSError *error;
    if ([fileManager fileExistsAtPath:finalPath]) {
        success = [fileManager removeItemAtPath:finalPath error:&error];
        NSAssert(success, @"removeItemAtPath error: %@", error);
    }

    success = [fileManager moveItemAtURL:location toURL:[NSURL fileURLWithPath:finalPath] error:&error];
    NSAssert(success, @"moveItemAtURL error: %@", error);
}

- (void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didResumeAtOffset:(int64_t)fileOffset expectedTotalBytes:(int64_t)expectedTotalBytes {
    // Update your UI if you want to
}

- (void)URLSession:(NSURLSession *)session downloadTask:(NSURLSessionDownloadTask *)downloadTask didWriteData:(int64_t)bytesWritten totalBytesWritten:(int64_t)totalBytesWritten totalBytesExpectedToWrite:(int64_t)totalBytesExpectedToWrite {
    // Update your UI if you want to
}

- (void)URLSession:(NSURLSession *)session task:(NSURLSessionTask *)task didCompleteWithError:(NSError *)error {
    if (error)
        NSLog(@"%s: %@", __FUNCTION__, error);
}

#pragma mark - NSURLSessionDelegate

- (void)URLSession:(NSURLSession *)session didBecomeInvalidWithError:(NSError *)error {
    NSLog(@"%s: %@", __FUNCTION__, error);
}

- (void)URLSessionDidFinishEventsForBackgroundURLSession:(NSURLSession *)session {
    AppDelegate *appDelegate = (id)[[UIApplication sharedApplication] delegate];
    if (appDelegate.backgroundSessionCompletionHandler) {
        dispatch_async(dispatch_get_main_queue(), ^{
            appDelegate.backgroundSessionCompletionHandler();
            appDelegate.backgroundSessionCompletionHandler = nil;
        });
    }
} 
```

顺便说一句，这假设您的应用程序委托具有一个`backgroundSessionCompletionHandler`属性：

```
@property (copy) void (^backgroundSessionCompletionHandler)(); 
```

如果应用程序被唤醒以处理`URLSession`事件，则应用程序委托将设置该属性：

```
- (void)application:(UIApplication *)application handleEventsForBackgroundURLSession:(NSString *)identifier completionHandler:(void (^)())completionHandler {
    self.backgroundSessionCompletionHandler = completionHandler;
} 
```

有关背景的 Apple 演示，`NSURLSession`请参阅[简单背景传输](https://developer.apple.com/library/iOS/samplecode/SimpleBackgroundTransfer/Introduction/Intro.html)示例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T20:40:33.833

如果所有 PDF 都来自您控制的服务器，那么一种选择是让单个请求传递您想要的文件列表（作为 URL 上的查询参数）。然后您的服务器可以将请求的文件压缩到一个文件中。

这将减少您需要发出的单个网络请求的数量。当然，您需要更新服务器以处理此类请求，并且您的应用程序需要解压缩返回的文件。但这比发出大量单独的网络请求要高效得多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T23:42:39.653

使用 NSOperationQueue 并使每个下载单独的 NSOperation。将队列上的最大并发操作属性设置为您希望能够同时运行的下载数量。我个人会保持在4-6范围内。

这是一篇很好的博客文章，解释了如何进行并发操作。 [http://www.dribin.org/dave/blog/archives/2009/05/05/concurrent_operations/](http://www.dribin.org/dave/blog/archives/2009/05/05/concurrent_operations/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-04-21T09:28:14.200

令人大吃一惊的是下载多个文件时 dataWithContentsOfURL 的速度有多慢！

要自己查看，请运行以下示例：（对于 downloadTaskWithURL，您不需要 downloadQueue，它只是为了便于比较）

```
- (IBAction)downloadUrls:(id)sender {
    [[NSOperationQueue new] addOperationWithBlock:^{
        [self download:true];
        [self download:false];
    }];
}

-(void) download:(BOOL) slow
{
       double startTime = CACurrentMediaTime();
        NSURLSessionConfiguration* config = [NSURLSessionConfiguration defaultSessionConfiguration];
        static NSURLSession* urlSession;

        if(urlSession == nil)
            urlSession = [NSURLSession sessionWithConfiguration:config delegate:nil delegateQueue:nil];

       dispatch_group_t syncGroup = dispatch_group_create();
       NSOperationQueue* downloadQueue = [NSOperationQueue new];
       downloadQueue.maxConcurrentOperationCount = 10;

       NSString* baseUrl = @"https://via.placeholder.com/468x60?text="; 
       for(int i = 0;i < 100;i++) {
           NSString* urlString = [baseUrl stringByAppendingFormat:@"image%d", i];
           dispatch_group_enter(syncGroup);
           NSURL  *url = [NSURL URLWithString:urlString];
           [downloadQueue addOperationWithBlock:^{
               if(slow) {
                   NSData *urlData = [NSData dataWithContentsOfURL:url];
                   dispatch_group_leave(syncGroup);
                   //NSLog(@"downloaded: %@", urlString);
               }
               else {
                   NSURLSessionDownloadTask* task = [urlSession downloadTaskWithURL:url completionHandler:^(NSURL * _Nullable location, NSURLResponse * _Nullable response, NSError * _Nullable error) {
                   //NSLog(@"downloaded: %@", urlString);
                   dispatch_group_leave(syncGroup);
                   }];[task resume];
               }
           }];
       }

       dispatch_group_wait(syncGroup, DISPATCH_TIME_FOREVER);

       double endTime = CACurrentMediaTime();
       NSLog(@"Download time:%.2f", (endTime - startTime));
} 
```

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2012-12-21T20:19:56.460

没有什么可以“建造”的。只需在 10 个线程中循环遍历接下来的 10 个文件，并在线程完成时获取下一个文件。

# python - Django：如何检查某事是否是没有表格的电子邮件

> ID：13996622
> 
> 赞同：17
> 
> 时间：2012-12-21T20:12:47.950
> 
> 标签：python, django, emailfield

我有 HTML 表单要在 Django View 中发布，并且由于一些限制，我更容易在`validation`没有通常的 Django 表单类的情况下进行操作。

我使用 Django Forms 的唯一原因是输入的电子邮件字段。

是否有任何功能可以检查某物是否为 an`email`或我必须使用`EmailField`来检查和验证它​​？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-12-21T20:28:22.500

您可以使用以下

```
from django.core.validators import validate_email
from django import forms

...
if request.method == "POST":
    try:
        validate_email(request.POST.get("email", ""))
    except forms.ValidationError:
        ... 
```

假设你`<input type="text" name="email" />`的表格中有一个

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-21T20:29:06.683

您可以使用 django.core.validators 中的 validate_email() 方法：

```
>>> from django.core import validators
>>> validators.validate_email('test@example.com')
>>> validators.validate_email('test@examplecom')
Traceback (most recent call last):
   File "<console>", line 1, in <module>
   File "/Users/jasper/Sites/iaid/env/lib/python2.7/site-    packages/django/core/validators.py", line 155, in __call__
    super(EmailValidator, self).__call__(u'@'.join(parts))
  File "/Users/jasper/Sites/iaid/env/lib/python2.7/site-packages/django/core/validators.py", line 44, in __call__
    raise ValidationError(self.message, code=self.code)
ValidationError: [u'Enter a valid e-mail address.'] 
```

# javascript - Alfresco Activiti 脚本任务监听器当前脚本节点？

> ID：13996624
> 
> 赞同：0
> 
> 时间：2012-12-21T20:12:59.893
> 
> 标签：javascript, alfresco, activiti

有没有办法在 Alfresco 的 Activiti 工作流中获取启动状态的 ScriptNode？我的工作流程中有一个 ScriptTask，它为 Start 事件设置了一个 Alfresco Script Listener。调用脚本时，我希望将在工作流中转换为 ScriptTask 的 ScriptNode 作为参数传递给定义为侦听器的函数。那可能吗？

为清楚起见进行编辑：这是带有 Activiti 插件的 Eclispe 的屏幕截图。 [http://i.imgur.com/DAKtq.jpg](http://i.imgur.com/DAKtq.jpg)

此工作流由另一个带有 webscripts 的工作流启动。

```
var props = new Object();
var dd = new Date();
props[EL_PROP_WORK_UNIT_NAME] = "testNode" + DateISOString( dd );
props[EL_PROP_WORK_UNIT_SOURCE_CODE] = "ROB";
props[EL_PROP_WORK_UNIT_DELIVERY_DATE] = dd;

node = getHome().createNode(name, EL_TYPE_WORK_UNIT, props);

var EL_WORKFLOW = "activiti$The-workflow";
var activeWfs = node.activeWorkflows;
if( activeWfs === null || activeWfs.length === 0 )
{
    var workflowPackage = workflow.createPackage();
    workflowPackage.addNode( node );
    var workflowDef = workflow.getDefinitionByName(EL_WORKFLOW);
    var workflowPath = workflowDef.startWorkflow( workflowPackage, new Object());
} 
```

所以监听器调用另一个javascript方法......

```
function artPDFRename()
{
    logger.log("==============================");
    logger.log("<START> artPDFRename");

    var workflowDef = workflow.getDefinitionByName(EL_WORKFLOW);
    var activeInstance = workflowDef.getActiveInstances();
        // ????
} 
```

目标是让这种处理是自动的。我们正在尝试以尽可能少的人工干预来设计它，并且不会将任务分配给用户执行。是的，可能还有另一种重命名 PDF 文件的方法，但我似乎无法从此处列出的文档中弄清楚如何获取指向我放入 bpm_package 对象中的节点的指针。这就是问题所在。

还是我离我们如何开发这个的基础太远了，这没有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-02T16:18:20.760

例如检查`ScriptTaskListener`类。在这里，所有工作流变量都放在一个地图中。

下面的代码很有趣：

> // 将所有工作流变量添加到模型 Map variables = delegateTask.getExecution().getVariables();
> 
> ```
>  for (Entry<String, Object> varEntry : variables.entrySet())
>     {
>         scriptModel.put(varEntry.getKey(), varEntry.getValue());
>     } 
> ```

因此，您可以使用 bpm_package 作为工作流脚本任务中脚本中的对象。

因此，如果您需要在工作流上运行的节点，则以下代码应该可以工作（其中任务是来自侦听器的通知方法的委托任务：

> delegateTask.getVariable("bpm_package");
> // 或者像上面的例子一样
> delegateTask.getExecution().getVariable("bpm_package");

这将是一个列表，因此请选择第一个，这将是您的节点。

- - - - -更新

如果您使用的是 alfresco 的 javascript，那么您可以直接使用父对象 bpm_package。

因此，在您的情况下，最好执行以下操作：

> var node = bpm_package.children[0]; //或者您可以检查包是否为空
> // 然后将节点发送到您的
> artPDFRename(node); //或者你可以在你的js文件中添加bpm_package代码

# unix - Groovy 中的 Unix FIND 命令

> ID：13996626
> 
> 赞同：5
> 
> 时间：2012-12-21T20:13:01.623
> 
> 标签：unix, groovy, scripting, ksh, groovy-console

我正在将 KornShell (ksh) 脚本转换为 Groovy。我有以下 Find 命令 - 在不依赖 Unix 命令的情况下，做类似事情的 Groovy 方法是什么（我需要它来跨平台工作，所以我不能执行“blah blah”.execute()）。

```
find <source directory> -name <file pattern> -type f -mtime +140 -level 0 
```

此代码搜索源目录（无子目录）中与文件模式匹配且超过 140 天的所有文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T20:30:06.713

Groovy 提供了一些在目录中搜索的方法：[`File.eachFile`](http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/File.html#eachFile(groovy.lang.Closure))针对`-level 0`案例，或者[`File.eachFileRecurse`](http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/File.html#eachFileRecurse(groovy.lang.Closure))针对一般案例。例子：

```
use(groovy.time.TimeCategory) {
    new File(".").eachFile { file ->
        if (file.isFile() &&
            file.lastModified() < (new Date() - 140.days).time) {
            println file
        }
    }
} 
```

# javascript - fullCalendar 渲染事件

> ID：13996629
> 
> 赞同：0
> 
> 时间：2012-12-21T20:13:14.400
> 
> 标签：javascript, fullcalendar

我从 html 调用这个函数：

```
AddEvent('2013-12-01T00:00:00Z', '2013-12-04T00:00:00Z'); 
```

这是我的功能：

```
function AddEvent(StartDate, EndDate){
            $('#calendar').fullCalendar('renderEvent', {
                        id: StartDate,
                        title: '1',
                        start: StartDate,
                        end: EndDate,
                        allDay: true
                    }, true );
        } 
```

但是没有添加事件。谁能帮我为什么不是？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-29T12:14:50.793

我认为这段代码会有所帮助：

```
var initDrag = function (el) {

            var eventObject = {
                title: $.trim(el.text())
            };
            el.data('eventObject', eventObject);
            el.draggable({ //ui
                zIndex: 999,
                revert: true,
                revertDuration: 0
            });
        }

        var addEvent = function (title,eventID) {
            var html = $('<div class="external-event label" id="'+ eventID +'">' + title + '</div>');
            jQuery('#event_box').append(html);
            initDrag(html);
        }

        var eventCreate = function (title) {
            $.ajax({
                type : 'POST',
                url : 'record.php',
                data : {title : title},
                dataType: 'JSON',
                success : function(data){
                    var eventID = data.Id;
                    var eventTitle = data.title;
                    addEvent(eventTitle,eventID);
                }
            });
        } 
```

# html - 如何在 Webbrowser 控件以外的 WPF 控件中显示格式化的 Html？

> ID：13996630
> 
> 赞同：1
> 
> 时间：2012-12-21T20:13:15.510
> 
> 标签：html, .net, wpf, browser

如何在除控件`HTML`之外的 WPF 控件中显示格式化的内容`WebBrowser`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:18:45.310

您可以使用 RichTextBox。

在 codeplex.com 上检查项目[Html To RichTextBox 。](https://htmltorichtextbox.codeplex.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:24:03.383

您可以将 HTML 转换为 FlowDocument 并显示它。使用 XSL 转换很好，除非您的 HTML 标记子集非常有限。

# knockout.js - 为一堆变量的格式化值创建一个计算的 observable

> ID：13996635
> 
> 赞同：9
> 
> 时间：2012-12-21T20:13:41.783
> 
> 标签：knockout.js, formatted, computed-observable

我在视图模型中有 3 个可观察变量，并希望输出为格式化值。但是，我不想为它们中的每一个编写计算方法，因为它们是相同的。重用代码的最佳方法是什么？谢谢。

我要实现的代码是：

```
 this.formattedPrice = ko.computed({
        read: function () {
            return '$' + this.price().toFixed(2);
        },
        write: function (value) {
            // Strip out unwanted characters, parse as float, then write the raw data back to the underlying "price" observable
            value = parseFloat(value.replace(/[^\.\d]/g, ""));
            this.price(isNaN(value) ? 0 : value); // Write to underlying storage
        },
        owner: this
    }); 
```

失败的例子在：[Jsfiddle](http://jsfiddle.net/EBxy4/68/)

谢谢，

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-12-21T21:20:08.060

您可以通过以下几种方法使其可重用。

如果您想在视图模型中处理此问题，那么一个不错的选择是创建一个扩展，它将格式化的计算 observable 存储为原始的“sub-observable”。[您可以使用扩展器或通过添加到](http://knockoutjs.com/documentation/extenders.html)[这里](http://knockoutjs.com/documentation/fn.html)`fn`描述的共享对象来扩展 observables 。我更喜欢后者。

因此，您可以向 observables 添加一个名为`withCurrencyFormat`. 它可能看起来像：

```
ko.observable.fn.withCurrencyFormat = function(precision) {
    var observable = this;
    observable.formatted = ko.computed({
        read: function (key) {
            return '$' + (+observable()).toFixed(precision);
        },
        write: function (value) {
            value = parseFloat(value.replace(/[^\.\d]/g, ""));
            observable(isNaN(value) ? null : value); // Write to underlying storage 
        }        
    }); 

    return observable;
}; 
```

现在，你可以说：

```
 self.week1Amount = ko.observable(w1).withCurrencyFormat(2);
 self.week2Amount = ko.observable(w2).withCurrencyFormat(2);
 self.week3Amount = ko.observable(w3).withCurrencyFormat(2); 
```

并在 UI 中绑定它，例如：

```
 <td><input data-bind="value: week1Amount.formatted" /></td>
    <td><input data-bind="value: week2Amount.formatted" /></td>
    <td><input data-bind="value: week3Amount.formatted" /></td> 
```

示例：http: [//jsfiddle.net/rniemeyer/xskJN/](http://jsfiddle.net/rniemeyer/xskJN/)

另一种选择是将其移动到绑定中，这样您就可以不理会您的视图模型。这将使用类似的代码，但在自定义绑定处理程序中可能如下所示：

```
ko.bindingHandlers.valueAsCurrency = {
    init: function(element, valueAccessor) {
        var observable = valueAccessor(),
            formatted = ko.computed({
                read: function (key) {
                    return '$' + (+observable()).toFixed(2);
                },
                write: function (value) {
                    value = parseFloat(value.replace(/[^\.\d]/g, ""));
                    observable(isNaN(value) ? null : value); // Write to underlying storage 
                },
                disposeWhenNodeIsRemoved: element                
            });

        //apply the actual value binding with our new computed
        ko.applyBindingsToNode(element, { value: formatted });
    }        
}; 
```

因此，在绑定处理程序中，我们创建了我们的计算，然后`value`对它使用绑定。

现在，您的视图模型不需要更改，您可以在 UI 中绑定，如下所示：

```
 <td><input data-bind="valueAsCurrency: week1Amount" /></td>
    <td><input data-bind="valueAsCurrency: week2Amount" /></td>
    <td><input data-bind="valueAsCurrency: week3Amount" /></td> 
```

示例：http: [//jsfiddle.net/rniemeyer/sD6y4/](http://jsfiddle.net/rniemeyer/sD6y4/)

# javascript - 创建 3 个可滚动的网格

> ID：13996636
> 
> 赞同：1
> 
> 时间：2012-12-21T20:13:46.597
> 
> 标签：javascript, jquery, html, css

我正在尝试实现一个类似于我发布的模型的网页。我尝试寻找一些可以帮助我完成这项任务的 jquery 库，但还没有找到。

这个想法是制作三个独立的可滚动网格，所有三个都应该占据整个浏览器屏幕，并且标题栏应该能够在中心放置文本。

任何能让我朝着正确方向前进的帮助都将是一个很大的帮助。

![样机样机](../Images/3941d28791a9a364ddc3adbf55dd429f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:36:10.610

试试这个插件：jScrollPane / [http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html](http://www.kelvinluck.com/assets/jquery/jScrollPane/jScrollPane.html)

jsfiddle 中的演示：http: [//goo.gl/hG9CV](http://goo.gl/hG9CV)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:36:42.537

你真的不需要使用 jquery 来做到这一点，简单的 CSS 就可以了，只需用于`position:fixed`定位 div 并`overflow:scroll`创建可滚动元素。

查看示例[小提琴](http://jsfiddle.net/cJ4uV/)

# c# - 检查 FTP 服务器上是否存在文件列表

> ID：13996637
> 
> 赞同：0
> 
> 时间：2012-12-21T20:13:52.563
> 
> 标签：c#, ftp

如果可能的话，我正在寻找一种方法来连接到 ftp 服务器，然后遍历本地文件列表以检查它们在服务器上的存在。现在，我发现：

```
var request = (FtpWebRequest)WebRequest.Create("ftp://ftp.domain.com/doesntexist.txt");

request.Credentials = new NetworkCredential("user", "pass");
request.Method = WebRequestMethods.Ftp.GetFileSize;

try
{
    var response = (FtpWebResponse)request.GetResponse();
}
catch (WebException ex)
{
    var response = (FtpWebResponse)ex.Response;
    if (response.StatusCode == FtpStatusCode.ActionNotTakenFileUnavailable)
    {
        //Does not exist
    }
} 
```

但是，如果我没看错（我还没有喝咖啡），它会`WebRequest`为每个文件创建一个。总体目标是检查这些文件是否存在，如果不存在，则上传它们。我的问题是，我是否必须单独执行此操作，或者是否有可能（甚至可行）只连接到 FTP 一次然后进行检查/上传？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:21:03.893

[1) 如此处所述，](https://stackoverflow.com/questions/3298922/how-to-list-directory-contents-with-ftp-in-c)从 FTP 获取文件列表

2) 使用 Directory.GetFiles() 获取本地文件列表

3）遍历一个列表并检查另一个列表是否包含该项目

# javascript - Google Adsense 格式问题

> ID：13996638
> 
> 赞同：0
> 
> 时间：2012-12-21T20:14:01.670
> 
> 标签：javascript, css, adsense

我想将两个 AdSense 广告并排放置。问题是谷歌似乎添加了一个左边距，并且没有办法摆脱它。我环顾四周，其他人也遇到了同样的问题，但没有提出好的解决方案。

有没有人知道一个很好的方法来消除利润？我已经尝试在 div 中使用 position:relative 移动它，但它在跨系统时效果不佳。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:22:19.180

我不确定 AdSense 广告是如何工作的，但你可以通过使用来超越它们在你的 CSS 中的样式`!important`吗？

例如`margin-left:100px !important;`

# caching - 使用 nosql 数据存储时是否需要缓存层？

> ID：13996640
> 
> 赞同：0
> 
> 时间：2012-12-21T20:14:02.560
> 
> 标签：caching, nosql, redis, couchbase, riak

使用 nosql 数据存储时，我们真的需要缓存层吗？我了解使用传统 sql db 时的用例，可以通过简单的键/值查找来避免查询处理的开销。但在 nosql 的情况下，情况不再如此。此外，缓存实例几乎总是在单独的实例中运行，这意味着它们仍然具有与访问 nosql 数据存储相关的相同网络延迟。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:42:22.237

缓存只是一种性能优化的工具，应该这样对待。这意味着进行一些负载测试以查看性能增强带来的收益（如果有的话）。

大多数 NoSQL 服务器确实声称比传统的 RDBMS 快得多，但只有对其进行测试才能告诉您它们对于您的应用程序和基础架构是否更快。

# c# - Visual Studio - 引用第三方 DLL

> ID：13996642
> 
> 赞同：10
> 
> 时间：2012-12-21T20:14:06.647
> 
> 标签：c#, visual-studio-2010, dll

我在 C# MVC 应用程序中使用 Visual Studio 10。

我对 .dll 参考有疑问。我正在使用名为 Ionic.Zip.dll 的第三方参考。我不确定的是它当前指向我的 C: 驱动器上的一个位置。我如何放置这个 .dll 以及什么是最佳实践，以便在我签入项目时，其他人也可以看到这个 .dll 而不会炸毁。

谢谢

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-21T20:16:55.767

我通常会在我的应用程序结构中放置一个库文件夹，将第 3 方 dll 放在该文件夹中，然后引用该 dll。然后确保将库文件夹签入您的源代码管理。现在，任何提取您的源代码的人都将拥有所需的 dll。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T20:41:42.503

更简单...只需通过Visual Studio 包管理器[NuGet](http://nuget.codeplex.com/)添加对 DotNetZip 的引用：

[http://nuget.org/packages/DotNetZip](http://nuget.org/packages/DotNetZip)

你不应该担心它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-05T08:28:27.153

最好的方法是使用**Nuget**。

但在某些情况下，Nuget 不可用或无法兼容，所以正如我们朋友所说，最好在应用程序结构中放置一个库文件夹，将第 3 方 dll 放在该文件夹中，然后引用该 dll。然后确保将库文件夹签入源代码管理。现在，任何拉取源代码的人都将拥有所需的 dll。

# ruby-on-rails - 试图链接到特定的新漫画评论页面

> ID：13996644
> 
> 赞同：1
> 
> 时间：2012-12-21T20:14:19.863
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

我正在尝试在文章显示页面上获取链接，以便当用户点击撰写新评论时，它会将他们带到链接

```
/comic_reviews/'the article they want to comment on'/reviews/new 
```

他们将被引导到新的评论页面

我怎么能做到这一点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:24:28.187

在您的路线文件中，您将指定这样的路线

`match '/comic_reviews/:comic_name/reviews/new' => 'reviews#new', via: :get`

然后在你的评论控制器中，你需要这样的东西

**评论控制器.rb**

```
class ReviewsController < ApplicationController

  def new
    @comic = Commic.find_by_name(params[:comic_name])
    if @comic
      @review = @comic.reviews.build
      render 'new'
    else
      #Render some error page since comic was not found
    end
  end
end 
```

然后，您将可以访问`@comic`并`@review`在您的`reviews/new`视图中，这样您就可以构建一个仅发布帖子以创建评论并允许您存储它的表单。这应该让你继续前进。

**编辑**

在您`new`看来，您需要一个看起来像这样的表单

```
<%= form_for @review do |f| %>
  <%= f.label :some_attribute %>:
  <%= f.text_field :some_attribute %><br />

  <%= f.submit %>
<% end %> 
```

这将期望您有一个在您的路线文件中创建评论的路线和在您的评论控制器中的操作。

如果您正在为这些主题而苦苦挣扎，我建议您阅读这个优秀的教程

[http://ruby.railstutorial.org/ruby-on-rails-tutorial-book](http://ruby.railstutorial.org/ruby-on-rails-tutorial-book)

或者只是阅读 Rails API 的文档，它将为您提供非常准确的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T21:20:44.893

您可以通过路线执行此操作

```
resources :comic_reviews do
  resources :reviews
    #probably_some_other_route_here
end 
```

有了宁静的模式，你就可以轻松实现你想要的任何东西

控制器

```
Someclass < Someotherclass

  #some your code

  def new
    @instance_var = Your_model.new
  end

  def create
    @instance_var = Your_model.new(params[:some_name_here])
    if @instance_var.save
      redirect_to somewhere
    else
      render 'new'
    end
  end
end 
```

你也需要表格，但我认为这不会造成任何麻烦

# python - 检测具有 Youtube 播放限制的视频

> ID：13996647
> 
> 赞同：4
> 
> 时间：2012-12-21T20:14:32.030
> 
> 标签：python, youtube-api, gdata-api

我正在使用 python 开发网络服务，我想过滤掉无法在 youtube 页面之外播放的视频。

就像在这个链接 [https://www.youtube.com/v/SC3pupLn-_8?version=3&f=videos&app=youtube_gdata] 你必须在 youtube 页面上观看视频是否有任何方法可以过滤哪些视频属于同一类别。所以我只选择那些可以不受限制地播放的视频。

```
import gdata.youtube.service
#------------------------------------------------------------------------------ 

yt_service = gdata.youtube.service.YouTubeService()
yt_service.developer_key = 'YOUR API DEVELOPER KEY'

count=0

def PrintEntryDetails(entry):

    if entry.media.category[0].text == "Movies" :
        global count
        count = count + 1
        if  entry.noembed != None:
            print 'Video embedding not enable: %s' % entry.noembed.text
        else :
            print "entry embedable"

        print 'Video title: %s' % entry.media.title.text
        print 'Video category: %s' % entry.media.category[0].text
        print 'Video published on: %s ' % entry.published.text
        print 'Video description: %s' % entry.media.description.text
        if entry.media.private != None :
            print entry.media.private.text
        else :
            print "Right not found"          
        if entry.media.keywords :
            print 'Video tags: %s' % entry.media.keywords.text
        print 'Video watch page: %s' % entry.media.player.url
        print 'Video flash player URL: %s' % entry.GetSwfUrl()
        print 'Video duration: %s' % entry.media.duration.seconds        
        # For video statistics
        if entry.statistics :       
            print 'Video view count: %s' % entry.statistics.view_count
        # For video rating
        if entry.rating  :    
            print 'Video rating: %s' % entry.rating.average
        # show alternate formats
        for alternate_format in entry.media.content:
            if 'isDefault' not in alternate_format.extension_attributes:
                print 'Alternate format: %s | url: %s ' % (alternate_format.type,
                                                     alternate_format.url)
        # show thumbnails
        for thumbnail in entry.media.thumbnail:
            print 'Thumbnail url: %s' % thumbnail.url        
        print "@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@@"
    else :
        pass

def PrintVideoFeed(feed):
    counter = 0    
    for entry in feed.entry:        
        PrintEntryDetails(entry)
        counter = counter+1
        #print counter   

def SearchAndPrint():
    max = 20    
    yt_service = gdata.youtube.service.YouTubeService()
    query = gdata.youtube.service.YouTubeVideoQuery()
    # OrderBy must be one of: published viewCount rating relevance 
    query.orderby = "relevance"
    query.racy = 'include'
    query.author = "tseries"
    query.max_results = 50
    index = 01
    for i in (range(max)):        
        query.start_index = index
        index = index + 50
        query.format = "5"
        feed = yt_service.YouTubeQuery(query)    
        PrintVideoFeed(feed)

SearchAndPrint()
print "**********************************************************"
print "Total Movies"
print count 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-28T16:44:29.543

一般的答案是`format=5`在执行搜索时使用参数：[https ://developers.google.com/youtube/2.0/reference#formatsp](https://developers.google.com/youtube/2.0/reference#formatsp)

这将从搜索结果中过滤掉完全禁用嵌入的视频。

话虽如此，有些视频已启用嵌入，但只能在某些区域或嵌入某些域时播放。

要处理区域限制，您应该将该`restriction=`参数设置为适合您的用例的参数，如[https://developers.google.com/youtube/2.0/reference#restrictionsp中所述](https://developers.google.com/youtube/2.0/reference#restrictionsp)

但是，无法从具有域级嵌入限制的搜索结果中排除视频。

此博客文章包含有关嵌入式播放限制的更多一般信息：http: [//apiblog.youtube.com/2011/12/understanding-playback-restrictions.html](http://apiblog.youtube.com/2011/12/understanding-playback-restrictions.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-27T19:29:03.717

如果我理解您的问题，您正在寻找[app:control/yt:state](https://developers.google.com/youtube/2.0/reference#youtube_data_api_tag_yt%3astate)标签。例如，如果视频被限制在 YouTube 网站上播放，但您尝试通过嵌入式 URL 或非浏览器访问它，您会得到如下信息：

```
<app:control>
    <yt:state name="restricted" reasonCode="limitedSyndication">Syndication of this video was restricted.</yt:state>
</app:control> 
```

您可以在您的`entry`对象中看到这一点：

```
entry.control.FindExtensions('state')[0].attributes 
```

这将是：

```
{'name': 'restricted', 'reasonCode': 'limitedSyndication'} 
```

当然你需要让它更健壮——<code>控件可能是None，它可能没有`state`标签，等等。但你明白了。

我认为您不能直接搜索 的存在或不存在或特定值`state`，但您可以使用该[`fields`](https://developers.google.com/youtube/2.0/developers_guide_protocol_partial#Fields_Formatting_Rules)参数在检索结果之前对结果进行后过滤。文档实际上给出了仅返回“不以任何方式限制播放的条目，这由`<yt:state>`元素的存在表示”的示例：

```
entry[not(app:control/yt:state)] 
```

我已经离开了这`(title,media:group)`部分，因为你想要默认标签，而不是有限的集合。

由于某种原因，`fields`参数并不总是被发送。这可能是因为，正如[文档](https://developers.google.com/youtube/2.0/developers_guide_protocol_api_query_parameters)所说，“fields 参数当前仅用于实验功能。” 但无论如何，您可以检索所有内容并自行过滤`control`。

# java - 在由用户定义的数据类型组成的数组列表中搜索

> ID：13996650
> 
> 赞同：0
> 
> 时间：2012-12-21T20:14:39.263
> 
> 标签：java, collections, arraylist

我正在尝试开发类似联系人应用程序的东西，我需要在其中添加/删除/搜索/排序联系人。所以，我使用 MyContact 对象的 ArrayList 作为数据结构。

MyContact 包含名称和编号，因此要对 ArrayList 进行排序，我认为在 ArrayList 中查找模式可能是一项耗时的任务。

目前我正在遍历每个元素并检查模式。我曾尝试先对列表进行排序，但这也很耗时。

请建议任何更好的在arraylist中搜索的方法，或者我是否应该切换到另一种数据类型，我认为在这个阶段这风险不大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:40:19.633

听起来您正在尝试尽早优化。软件开发中的一个常见立场是先使其工作，然后在确定实际性能问题后进行优化。也就是说，您不是在寻求软件开发建议，而是在寻求编程建议。

在编程方面，这里有两件事需要优化；性能和代码。

为了保持代码干净，请尝试利用已经存在的框架/约定，而不是自己动手。看看`Comparable`接口和 Java`Collections`类的使用。之后是一段时间以来一直是行业标准的 Apache Commons Collections 库。由于很多原因，Google 的 Guava 似乎正在取代 Commons Collections 作为标准，最值得注意的是更好的泛型支持。

至于性能，要排序或过滤，您需要评估每个记录/对象（至少一次），因为它是正确的顺序/包含在结果中。唯一真正的替代方法是在搜索之前对您的数据进行“索引”。为此，（Java）行业标准是 Lucene，但很可能对您的需求来说太过分了。

# c++ - 未解决的包含 WProgram.h

> ID：13996651
> 
> 赞同：-2
> 
> 时间：2012-12-21T20:14:39.483
> 
> 标签：c++, avr

Eclipse 能够找到 iostream、stdio.h 和 conio.h

但它无法找到 Wprogram.h

我在带有 CDT 的 windows8 上使用 Indigo。我能够编译和运行一个 hello world 程序。我还链接了 AVR 目录。有谁知道为什么eclipse找不到头文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:07:50.950

谷歌搜索表明 Wprogram.h 已重命名为 Arduino.h。尝试包含该文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:16:55.243

头文件不存在，或者其目录的路径不在包含路径中。检查项目 -> 属性 -> c/c++ 构建 -> 设置 -> 包含 -> 包含路径并确保 Wprogram.h 所在的文件夹包含在该列表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-30T08:29:40.397

哪个文件导致导入旧的（而不存在的）文件通常并不明显`Wprogram.h`。因此扫描您最后导入的库（.h 和 .c）文件`#Include "Wprogram.h"`并替换为`#Include "Arduino.h"`

# javascript - 如果脱离上下文使用变量如何包含数组内容

> ID：13996654
> 
> 赞同：0
> 
> 时间：2012-12-21T20:14:46.730
> 
> 标签：javascript, jquery

```
var name = new Array('freddy', 'mac', 'fanny', 'may');
var content = 'hi '.+name[i]+.'!';

$('div.class').each(function (i) {
this.html(content);
}); 
```

这个 javascript 应该输出 hi freddy！嗨，麦克！嗨范妮！嗨可能！

但是 var 有一个错误，因为它引用了一个尚未设置的数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:19:07.137

您正在为`content`变量分配一个值，并且在您分配值时评估一个值，而不是在您使用该变量时。即一个普通值不能包含对另一个值的引用。

您可以将其设为在调用时评估值的函数：

```
var name = new Array('freddy', 'mac', 'fanny', 'may');
var content = function(i) { return 'hi ' + name[i] + '!'};

$('div.class').each(function (i) {
  $(this).html(content(i));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T20:18:36.703

您没有对报价进行正确排序，并且由于`i`在分配内容时不存在，因此无论如何它都不会起作用。你应该试试这个：

```
var content = 'hi, {0}!';

$('div.class').each(function(i) {
    this.html(content.replace("{0}", name[i]));
}); 
```

# indexing - 使用 python 请求模块进行 Elasticsearch 批量/批量索引

> ID：13996655
> 
> 赞同：1
> 
> 时间：2012-12-21T20:14:48.250
> 
> 标签：indexing, elasticsearch, python-requests

我有一个小（~50,00）的 json 字典数组，我想在 ES 中存储/索引。我的偏好是使用 python，因为我要索引的数据来自 csv 文件，通过 python 加载并转换为 json。或者，我想跳过转换为 json 的步骤，而只需使用我拥有的 python 字典数组。无论如何，快速搜索揭示了 ES 的批量索引功能。我想做这样的事情：

```
post_url = 'http://localhost:9202/_bulk'
request.post(post_url, data = acc )    # acc a python array of dictionaries 
```

或者

```
post_url = 'http://localhost:9202/_bulk'
request.post(post_url, params = acc )    # acc a python array of dictionaries 
```

两个请求都给出 [HTTP 500 错误]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-10-31T07:24:13.887

我的理解是每行必须有一个“命令”（索引，创建，删除......），然后其中一些（如索引）在下一行获取一行数据，如下所示

```
{'index': ''}\n
{'your': 'data'}\n
{'index': ''}\n
{'other': 'data'}\n 
```

注意换行符，即使在最后一行。

如果您发布到 ../index/type/_bulk 或者您需要指定索引和类型，我认为没有尝试过，那么像上面这样的空索引对象有效。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-06-05T08:38:03.540

您可以使用以下功能：

```
def post_request(self, endpoint, data):
   endpoint = 'localhost:9200/_bulk'
   response = requests.post(endpoint, data=data, headers={'content-type':'application/json', 'charset':'UTF-8'})

   return response 
```

作为数据，您需要传递一个字符串，例如：

```
{ "index" : { "_index" : "test-index", "_type" : "_doc", "_id" : "1681", "routing" : 0 }}
{ "field1" : ... , ..., "fieldN" : ... }
{ "index" : { "_index" : "test-index", "_type" : "_doc", "_id" : "1684", "routing" : 1 }}
{ "field1" : ... , ..., "fieldN" : ... } 
```

确保在每行末尾添加一个“\n”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-22T07:49:37.587

我对 Python 了解不多，但你看过[Pyes](https://github.com/aparo/pyes)吗？Pyes 支持批量。

# c# - 尝试从 VB 6 调用 C# COM 对象

> ID：13996670
> 
> 赞同：1
> 
> 时间：2012-12-21T20:16:22.870
> 
> 标签：c#, vb6

我正在尝试从 VB 6 调用 C# COM 对象，但出现错误：453 指出很难找到 DLL 的入口点。我将 c# 中的所有模块设为公开，并将我的 COM 可见性设为 TRUE，我注册了我的 .dll 文件，我有可用的类型库文件，我还调用了 P/Invoke 调用。我仍然收到错误消息。我在下面粘贴我的代码

VB6：

```
Private Declare Function DisplayCForm Lib "C:\Users\LP027077\Documents\Visual Studio 2010\Projects\COMWorld\COMWorld\bin\Debug\COMWorld.dll" ()
Private Sub Command1_Click()
DisplayCForm
End Sub 
```

C＃：

```
 namespace COMWorld
{

    [Guid("23047247-38D3-464F-A845-0D42A7ACD622")]
    [ComVisible(true)]
    public class COMObject
    {
        [DllImport("Kernel32.dll", EntryPoint = "GetConsoleWindow",SetLastError = true)]
        internal static extern IntPtr GetConsoleWindow();
        public void COMModule()
        {
            Form f1 = new Form();
            f1.Text = "Hello VB6 from c# .NET";
        }
    }
} 
```

请在这方面帮助我！提前致谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T21:12:24.473

当我需要从 VB 6 代码调用 .Net COM 对象上的方法时，我通常会执行以下操作：

1.  将 COMVisible 属性添加到我的 .Net 类和程序集。
2.  构建并注册我的 .Net 程序集。
3.  通过 Project | 在我的 VB 项目中添加对我的 .Net 程序集的引用 参考菜单。
4.  在我的 VB 代码中使用“New”关键字来创建我的 .Net 类的实例，并使用它的 progid 来调用所需的方法。

.Net 程序集的 progid 默认为程序集名称加上用句点分隔的类的名称。在 VB 中添加对程序集的引用后，它应该出现在 Intellisense 和 VB IDE 的对象浏览器中。

要将您的示例与“COMWorld”的程序集名称和一个名为“COMObject”的类和一个名为“COMModule”的方法一起使用，我的 VB 代码如下所示：

```
Private Sub Command1_Click()

    Dim class1 As New COMWorld.COMObject
    class1.COMModule

End Sub 
```

*免责声明：恐怕我的 MacBook Air 上没有 VB 6 IDE，所以代码可能不是 100% 编译器证明！*

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-23T04:57:58.757

您的“声明函数”用于“经典 DLL”，而不是 COM。使用 COM，只需设置对它的引用，然后以通常的“Dim myObject as theCOMClass”语法声明您的对象。

“很难找到” dll 的入口点，因为 dll 是一个 COM dll，并且您尝试使用头文件而不是通过 iUnknown 接口访问它。

# ruby-on-rails - 将 ruby 全局变量添加到 html 超链接

> ID：13996674
> 
> 赞同：0
> 
> 时间：2012-12-21T20:16:37.187
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, html

我的 ROR 应用程序的 html.erb 文件中有以下代码。

```
<% $tmp_bug="something" %>
<a href="http://jira.copivia.com:8080/browse/#{$tmp_bug}">JIRA</a> 
```

我想将该 ruby​​ 变量添加到超链接的末尾。这似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T20:17:48.360

```
<% $tmp_bug="something" %>
<a href="http://jira.copivia.com:8080/browse/<%= $tmp_bug %>">JIRA</a> 
```

# playback - Soundmanager2 加载但不播放

> ID：13996685
> 
> 赞同：1
> 
> 时间：2012-12-21T20:17:22.910
> 
> 标签：playback, soundmanager2

**设置** 在我的网站上安装了 Soundmanager2。自动生成 MP3 的链接。

**问题** 使用 360-ui，我看到了声音加载，因为它播放动画就像在这个演示的左上角 (http://www.schillmania.com/projects/soundmanager2/demo/360-player/)，但是它不播放，秒计数器不移动。

**我如何加载播放器**

```
<link rel="stylesheet" type="text/css" href="/css/360player.css" />
<link rel="stylesheet" type="text/css" href="/css/flashblock.css" />
<!-- special IE-only canvas fix -->
<!--[if IE]><script type="text/javascript" src="/js/excanvas.compiled.js"></script><![endif]-->

<!-- Apache-licensed animation library -->
<script type="text/javascript" src="/js/berniecode-animator.js"></script>
<script type="text/javascript" src="/js/soundmanager2.js"></script>
<script type="text/javascript" src="/js/360player.js"></script>

<script type="text/javascript">
soundManager.setup({
  // path to directory containing SM2 SWF
  url: '/swf/',  debugMode: true 
});
</script> 
```

**调试代码**

```
-- SoundManager 2: HTML5 support tests (/^(probably|maybe)$/i): mp3: true (preferring flash), mp4: true (preferring flash), ogg: true, wav: true -- soundmanager2.js:1155
-- SoundManager 2 V2.97a.20121104 (AS3/Flash 9) + HTML5 audio, high performance mode, normal polling, wmode: transparent, flashBlock mode -- soundmanager2.js:1155
soundManager::createMovie(): Trying to load /swf/soundmanager2_flash9_debug.swf soundmanager2.js:1155
soundManager::initMovie(): Waiting for ExternalInterface call from Flash... soundmanager2.js:1157
soundManager::externalInterfaceOK() (~2 ms) soundmanager2.js:1157
soundManager::init() soundmanager2.js:1157
soundManager: Attempting JS to Flash call... soundmanager2.js:1157
(Flash): SM2 SWF V2.97a.20121104 (AS3/Flash 9) soundmanager2.js:1157
Flash security sandbox type: remote soundmanager2.js:1157
(Flash): JS to/from Flash OK soundmanager2.js:1157
(Flash): Enabling polling, 10 ms interval soundmanager2.js:1157
-- SoundManager 2 loaded (OK) -- soundmanager2.js:1155
soundManager: Firing 1 onready() item soundmanager2.js:1157
threeSixtyPlayer.init() soundmanager2.js:1157
threeSixtyPlayer.init(): Found 5 relevant items. soundmanager2.js:1157
handleClick() soundmanager2.js:1157
soundManager.createSound(): ui360Sound0 (http://clients.activemd.net/external/x.mp3) soundmanager2.js:1155
SMSound() merged options: {
 id: ui360Sound0, 
 url: http://clients.activemd.net/external/x.mp3, 
 onplay: { pl.removeClass(this._360data.oUIBox,this._360data.className); t... }, 
 onstop: { pl.removeClass(this._360data.oUIBox,this._360data.className); t... }, 
 onpause: { pl.removeClass(this._360data.oUIBox,this._360data.className); t... }, 
 onresume: { pl.removeClass(this._360data.oUIBox,this._360data.className); t... }, 
 onfinish: { var nextLink; pl.removeClass(this._360data.oUIBox,this._360data... }, 
 onbufferchange: { if (this.isBuffering) { pl.addClass(this._360data.oUIBox,pl.css... }, 
 whileloading: { if (this.paused) { self.updatePlaying.apply(this); } }... }, 
 whileplaying: { self.updatePlaying.apply(this); this._360data.fps++; }... }, 
 useWaveformData: 0, 
 useEQData: 0, 
 usePeakData: 0, 
 autoLoad: false, 
 autoPlay: false, 
 loops: 1, 
 multiShot: true, 
 multiShotEvents: false, 
 pan: 0, 
 stream: true, 
 usePolicyFile: false, 
 volume: 100, 
 isMovieStar: false, 
 bufferTime: 3
} soundmanager2.js:1157
(Flash): SoundManager2_SMSound_AS3: Got duration: 0, autoPlay: false soundmanager2.js:1157
SMSound.play(): Attempting to load "ui360Sound0" soundmanager2.js:1155
SMSound.load(): http://clients.activemd.net/external/x.mp3 soundmanager2.js:1155
SMSound.play(): "ui360Sound0" is starting to play soundmanager2.js:1157
fanOut: ui360Sound0: http://clients.activemd.net/external/x.mp3 soundmanager2.js:1157
SMSound._onbufferchange(): 1 soundmanager2.js:1157
(Flash): start (ui360Sound0): 0 soundmanager2.js:1157
SMSound._onbufferchange(): 0 soundmanager2.js:1157
SMSound._onload(): "ui360Sound0" loaded. 
```

**奇怪** 的链接在我的 Chrome 开发者视图中是可点击的，并且 MP3 在单独的浏览器窗口中打开并正常播放（默认情况下，当您在 Chrome 中单击 MP3 链接时）

**一种可能** 的理论 声音正在加载，但不会被告知“好的，继续演奏自己”。

**另一个可能的理论** jQuery 在某种程度上搞砸了它。

请帮助我确定为什么我的声音正在加载但没有播放。

谢谢。瑞克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-27T15:58:19.490

我只是在自动播放方面遇到了类似的问题。它在 Safari 中运行良好，但 Chrome 和 FireFox，IE 只是跟踪它们正在播放，但没有发生任何事情。我最终设置了一个 setTimeout 来调用 soundManager.play(id) 但我不喜欢我必须这样做。

我注意到其他开发人员使用 click() 事件来触发歌曲。我不知道通过点击事件路由它的微小延迟是否是让它播放所需的，但我尝试将超时设置为 200 和 500+ 毫秒似乎是票。我还认为，当自动播放失败时，缓冲事件或加载事件可能能够触发播放。在 soundManager.createSound(e) 之后调用 soundManager.play(id) 对我来说绝对没有任何作用。

我添加了一个 onbufferchange 事件并检查了 playState。如果它不播放，我告诉它播放。这消除了对 setTimeout 的需要。

# php - PHP CSV 导出问题

> ID：13996686
> 
> 赞同：0
> 
> 时间：2012-12-21T20:17:31.187
> 
> 标签：php, csv, export-to-csv

我正在尝试将 MySQL 数据导出到 CSV 文件。它适用于所有浏览器，但仅在 MAC 系统上存在问题。该文件作为 filename.csv.xls 下载，应该是 filename.csv 我已经尝试了所有可能的解决方案，但似乎没有任何效果。我在这里错过了什么吗？下面是源代码。

```
<?php
header("Content-type: application/vnd.ms-excel"); 
header("Content-Disposition:csv" . date("Y-m-d")); 
header( "Content-disposition: filename="file.csv");
print $csv_output;
exit;
?> 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:19:53.697

它可能是您的内容类型标头。试试这个：

```
header("Content-type: text/csv"); 
```

安全注意事项：我还注意到您对 SQL 注入持开放态度。您应该始终通过[mysql_real_escape_string](http://php.net/manual/en/function.mysql-real-escape-string.php)传递变量，尤其是因为您甚至没有清理数据。您还使用 mysql 而不是*改进*的mysqli。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T20:20:07.273

也许如果您在标题中使用了正确的内容类型

```
text/csv 
```

而不是 Excel .xls 内容类型标题

```
application/vnd.ms-excel 
```

# jquery - 使 Jquery 项目在页面上可重复（通过 mvc 部分视图）？

> ID：13996703
> 
> 赞同：1
> 
> 时间：2012-12-21T20:19:27.827
> 
> 标签：jquery, model-view-controller, html, collapsable

我有一个标有“添加评论”的 div，它扩展了一个显示用于添加评论的文本区域的 div 区域。

div 位于一个局部视图中，位于 for each 循环之间。这会创建 div 的多个实例`class="slide"`。因此，当`$('div.slide').click`被触发时，它会打开所有评论实例。

如果我将 id 附加到每个 class="slide" Ex: `class="slide1"`, `class="slide2"`, 等...，我如何编辑下面的 javascript 以仅打开该特定 div？

**jQuery**

```
<script type="text/javascript">
    $(document).ready(function () {
        // Hide the "view" div.
        $('div.view').hide();
        // Watch for clicks on the "slide" link.
        $('div.slide').click(function () {
            // When clicked, toggle the "view" div.
            $('div.view').slideToggle(400);
            return false;
        });
    });
</script> 
```

**父视图**

```
@foreach (var post in Posts)
                {
                <div class="post">@Html.DisplayFor(modelItem => post.Message)</div>  
                <div>@Html.Partial("_Comment")</div>
                } 
```

**部分视图“_Comment”**

```
<div class="slide" style="cursor: pointer;">Add Comment</div>
<div class="view"> 
 <form method="post" id="commentForm"                       
      action="@Url.Action("AddComment")">                  

    @Html.TextArea("Comment", new { rows = 5, cols = 50 })   
    <br />
    <input type="submit" value="Add Comment" />
</form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:22:45.677

将该实例分配为函数的参数怎么样？

```
$('div.slide').click(function (this) {
    this.next().doSomething();
    ...
}); 
```

[http://api.jquery.com/next/](http://api.jquery.com/next/)

假设您的 html 代码的结构将始终是：

```
slide_1
view_1
slide_2
view_2
slide_3
view_3
... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T16:38:23.093

无需求助于 id。

如果你的结构与你的问题一样，你可以做

```
$(document).ready(function () {
    // Hide the "view" div.
    $('div.view').hide(); // maybe this should be handled by CSS rules 
    // Watch for clicks on the "slide" link.
    $('div.slide').click(function () {
        // When clicked, toggle the "view" div.
        $(this).next().slideToggle(400);
        return false;
    });
}); 
```

我也将删除该`.hide()`部分并为此使用 css

```
.view{
    display:none;
} 
```

**[http://jsfiddle.net/gaby/bhhMC/](http://jsfiddle.net/gaby/bhhMC/)**的示例****

# qt - 除非管理员，否则 QT 创建者构建失败

> ID：13996705
> 
> 赞同：1
> 
> 时间：2012-12-21T20:19:35.107
> 
> 标签：qt, qt-creator

我在 QT creator 中有一个 QT 项目。我一直从中得到奇怪的行为。除非我以管理权限打开 QT Creator，否则它根本不会构建并抱怨它无法启动进程 qmake（qmake 在正确的位置）。我的影子构建将 ..\bin 文件夹指定为构建。我的完整结构是：

```
project
|
+--- bin
+--- src 
```

所以他们处于同一水平。这里可能是什么问题？问题是当我使用管理员权限时，项目构建在 C:\Users\bin 中，这不是正确的位置。

给出的实际错误是：

无法启动进程“c:\qtsdk\desktop\qt\4.8.1\mingw\bin\qmake.exe”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T22:42:32.823

听起来您的许多路径或位置可能已关闭。它们可能位于 Qt Projects 配置对话框中，也可能位于您的 .pro 文件中。

是否构建了一个简单的“Hello World”示例，而不编辑文件夹结构的默认值？Qt SDK 的示例是否构建？

Qt 是不是安装在 C 盘根目录下？将它嵌套在您的文档或其他地方可以在 Qt Path 变量中放置一个空格，我认为 Qt Creator 和 QMake 没有大量工作就可以很好地支持它。

希望有帮助。

# android - 如果我尝试使用 arm 数学汇编器命令而不是 c，我会获得性能奖励吗？

> ID：13996712
> 
> 赞同：4
> 
> 时间：2012-12-21T20:20:07.363
> 
> 标签：android, c, assembly, arm

我的应用程序中有循环，在其中执行数学乘法和加法计算。

我知道一些事实：

*   android 设备支持 armv6 及更高版本的处理器
*   armv6 不支持 NEON 命令

如果我将开始使用汇编程序数学命令而不是 c 数学命令，我是否会提高 armv6 上应用程序的性能，包括及以上？

**更新**

我需要用数学运算更快地执行循环，这是使用汇编程序而不是 c 的正确方法。

**更新**

我有这个计算：

```
Ry0 = (b0a0 * buffer[index] + b1a0 * Rx1 + b2a0 * Rx2 - a1a0 * Ry1
                    - a2a0 * Ry2); 
```

它是双二阶传递函数。

我可以用 asm 强制执行这个计算吗？

**更新**

*   缓冲区大小为 192000
*   变量是浮点类型

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-21T20:22:50.857

编译器非常擅长他们的工作，所以除非你知道你的编译器正在产生什么，并且知道你可以做得更好，否则可能不会。

如果不确切知道您的代码做了什么，就不可能给出更好的答案。

编辑：总结这个讨论：提高性能的第一步不是开始编写汇编程序。第一步是找到最有效的算法。完成后，您可以查看汇编程序编码。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-21T20:50:00.740

无限脉冲响应 (IIR) 函数很难以高性能实现，因为每个输出元素都密切依赖于前一个输出元素。这迫使从输出到输出的延迟。这种依赖链击败了常见的高性能技术（例如 SIMD、条带挖掘和超标量执行）。

最初在装配中工作并不是解决此问题的好方法。在某些时候，组装工作可能会有所帮助。但是，您有一个基本问题需要解决：在完成前一个输出、将其乘以一个系数并添加附加算术的结果之前，您无法产生新的输出。因此，使用此公式可以做的最好的事情是产生一个输出，就像处理器从头到尾执行乘法和加法一样频繁，即使假设其他工作可以并行完成。

在数学上可以重写 IIR，以便输出依赖于过去更远的其他输出和输入，而不是前一个输出。这使用了更多的算术，但提供了并行执行更多算术的可能性，从而获得更高的吞吐量。

在 iPhone 或其他 iOS 设备上，您可以简单地调用 Accelerate 框架中的 vDSP_deq22。Accelerate 是 Apple 库，因此在 Android 上不可用。但是，也许有人已经实现了类似的东西。

一种方法是测量每个输出占用多少处理器周期（计算多个，将时间除以输出数量，乘以处理器速度）到延迟，以周期为单位，从加法乘法（来自处理器模型的文档您正在使用）。如果所花费的时间与延迟相同，那么就不可能在该处理器上更快地执行此算术，您必须接受它或找到具有不同数学的替代解决方案。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-21T21:26:04.467

通过查看编译器的功能，您可能能够获得一些额外的速度，但这应该是您做的最后一件事。首先好好看看你的算法和变量类型。

由于您的目标是 ARMv6，所以我要做的第一件事就是从浮点运算切换到定点运算。ARMv6 通常没有或非常慢的硬件浮点支持。ARMv7 通常更好，但对于 ARM，定点运算通常比浮点实现快很多。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T22:11:15.673

Android 支持 ARMv5TE 和 ARMv7-A。阅读有关支持的 CPU ARCH 和 ABI 的 NDK 文档，请访问`$NDK/docs/CPU-ARCH-ABIS.html`。

ARMv5TE 是默认的，不给你任何硬件浮点支持，你可以查看[Android NDK](http://developer.android.com/tools/sdk/ndk/index.html)页面了解更多。您应该将 ARMv7-A 支持添加到您的应用程序中，以获得硬件的最佳支持。

ARMv6 介于两者之间，如果你想针对这些设备，你必须做一些`Android.mk`诡计。

如今，如果您正在编写一个现代应用程序，您可能会针对具有 ARMv7-A 处理器类型（具有 VFPv3 和 NEON）的较新设备。如果你只想*支持*ARMv6，你应该使用 ARMv5TE 来覆盖这些。如果您想利用 ARMv6 提供的一些额外功能，那么您将完全失去对 ARMv5TE 的支持。

我用 NDK r8c 编译了您的简单代码行，它可以为我生成如下所示的二进制文件。最好的 ARM VFP 允许您的语句是`multiply and accumulate`指令，`fmac`编译器可以轻松发出这些指令。

```
00000000 <f>:
   0:   ee607aa2    fmuls   s15, s1, s5
   4:   ed9f7a05    flds    s14, [pc, #20]
   8:   ee407a07    fmacs   s15, s0, s14
   c:   ee417a03    fmacs   s15, s2, s6
  10:   ee417ae3    fnmacs  s15, s3, s7
  14:   eeb00a67    fcpys   s0, s15
  18:   ee020a44    fnmacs  s0, s4, s8
  1c:   e12fff1e    bx  lr 
```

将您的语句分成几块以获得双重发布可能会更好，但您可以在 C 中执行此操作。

你不能仅仅使用汇编来创造奇迹，但是编译器也可以创造一个巨大的废话。GCC 和 ARM 不如 GCC 和 Intel。尤其是在矢量化、NEON 使用方面。如果您需要高性能的例程，检查编译器生成的内容总是好的。

# perl - 支持自动激活文件句柄作为 Perl XS 例程的参数

> ID：13996719
> 
> 赞同：8
> 
> 时间：2012-12-21T20:20:48.493
> 
> 标签：perl, filehandle, xs

## 问题

如何在 XS 函数中支持自动激活的文件句柄参数？

我正在 XS 包装一个返回文件描述符的 C 函数，我想以[open()](http://perldoc.perl.org/functions/open.html)的方式将该文件描述符呈现为 perl 文件句柄*参数*。例如，

```
myfunc(my $fh) or die "Error: $!";
do_something_with_fh($fh); 
```

## 到目前为止我所做的

现在我在 XS 函数之上使用 perl 包装器：

```
# -- in perl
sub myfunc {
    my $fd = _myfunc();
    return open($_[0], '+<&=', $fd) if defined($fd);
}

/* -- in XS */
SysRet
_myfunc()
    CODE:
    RETVAL = some_c_function_returning_an_fd();

    OUTPUT:
    RETVAL 
```

这很好用（tm），但是，我想再次将实现完全移到 XS 中。

到目前为止，我已经尝试过`sv_2io`一个类型映射为的参数`SV *`，但这会在未定义的标量上引发异常。我没有尝试将第一个参数映射到 a `FILE *`or`PerlIO *`对象，因为我不知道如何“fdreopen”（如果您愿意的话）这些对象。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-06T20:14:09.617

我会将`myfunc()`包装器保留在 Perl 中，它可以工作并且不应该成为瓶颈。

重新实现`open()`很棘手，需要使用未记录的/内部 API。我认为这是一个非常接近的实现。`newGVgen()`并且`do_openn()`是公共 API 的一部分，但未记录在案并且[可能会发生变化](http://perldoc.perl.org/perlapi.html#Undocumented-functions)。

```
void
myfunc(sv)
    SV *sv
  PPCODE:
    {
        GV *gv = newGVgen("Mypackage");
        SV *rv = sv_2mortal(newRV_noinc((SV *)gv));
        SV *fd = sv_2mortal(newSViv(some_c_function_returning_an_fd()));

        if (!do_openn(gv, "+<&=", 4, FALSE, 0, 0, NULL, &fd, 1))
            croak("Could not fdopen descriptor: '%s'", Strerror(errno)); /* or XSRETURN_NO; */

        sv_setsv(sv, rv);
        SvSETMAGIC(sv);
        XSRETURN_YES;
    } 
```

# python - 如何确认给定文件夹中仅存在 html 文件，如果不存在则如何提示用户指定仅包含 html 文件的文件夹

> ID：13996720
> 
> 赞同：-2
> 
> 时间：2012-12-21T20:20:55.200
> 
> 标签：python

我想创建一个 python 脚本来做 3 件事：

*   1）接受用户输入以导航到文件目录*   2) 确认文件内容（文件夹中需要一组特定的文件才能继续执行脚本）*   3）进行查找和替换

截至目前的代码：

```
import os, time
from os.path import walk

mydictionary = {"</i>":"</em>"}

for (path, dirs, files) in os.walk(raw_input('Copy and Paste Course Directory Here: ')):
    for f in files:
        if f.endswith('.html'):
            filepath = os.path.join(path,f)
            s = open(filepath).read()
            for k, v in mydictionary.iteritems(): terms for a dictionary file and replace
                s = s.replace(k, v)
            f = open(filepath, 'w')
            f.write(s)
            f.close() 
```

现在我有第 1 部分和第 3 部分，我只需要第 2 部分。

对于第 2 部分，尽管我需要确认用户将指定的目录中仅存在 html 文件，否则脚本将提示用户输入正确的文件夹目录（其中将包含 html 文件）

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:52:59.330

据我了解，这是您的伪代码：

```
Ask user for directory
If all files in that directory are .html files:
    Do the search-and-replace stuff on the files
Else:
    Warn and repeat from start 
```

我不认为你真的想要在这里递归遍历，所以首先我会用一个平面列表来写：

```
while True:
    dir = raw_input('Copy and Paste Course Directory Here: ')
    files = os.listdir(dir)
    if all(file.endswith('.html') for file in files):
        # do the search and replace stuff
        break
    else:
        print 'Sorry, there are non-HTML files here. Try again.' 
```

除了将“repeat from start”翻译成`while True`带有 a 的循环之外`break`，这几乎是英文伪代码的逐字翻译。

如果您*确实*需要递归遍历子目录，您可能不想将其编写`all`为单行。写“结果的任何成员的第三个成员的所有成员都`os.walk`以”结尾`'.html'`并不难，但它会很难阅读。但是如果你把那个英文描述变成更容易理解的东西，你应该能够看到如何直接把它变成代码。

# sql - Oracle SQL - 无法插入行

> ID：13996721
> 
> 赞同：2
> 
> 时间：2012-12-21T20:20:59.990
> 
> 标签：sql, oracle, privileges, tablespace

我有一个新创建的表。当我尝试插入它时，我得到..

```
SQL Error: ORA-01950: no privileges on tablespace 'ADMINISTRATOR'
01950\. 00000 -  "no privileges on tablespace '%s'"
*Cause:    User does not have privileges to allocate an extent in the
           specified tablespace.
*Action:   Grant the user the appropriate system privileges or grant the user
           space resource on the tablespace. 
```

为了解决这个问题，我尝试了几件事......

```
GRANT UNLIMITED TABLESPACE TO MY_TABLE;

grant RESOURCE,CONNECT,UNLIMITED TABLESPACE to USER_NAME;

alter user "USER_NAME"  
quota unlimited on "ADMINISTRATOR" 
```

...但错误仍然存​​在。此故障的原因是什么，我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-17T09:38:07.500

尝试这个

更改数据库数据文件 '/u01/app/oracle/your_tablespace_datafile_name.dbf' 在 maxsize 无限制时自动扩展；

# c# - C#轮询检查文件并启动程序

> ID：13996723
> 
> 赞同：0
> 
> 时间：2012-12-21T20:21:07.917
> 
> 标签：c#

有人可以给我一个 c# polling 的示例代码，它将在文件夹中查找文件，如果文件在那里，则执行批处理文件。如果文件不存在，则每 30 分钟检查一次文件夹。此外，一旦找到所有文件，请等待 10 分钟，然后再启动批处理文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T20:25:03.400

轮询不好，因为它会使你的 CPU 负载高达 100%。

改用`FileSystemWatcher`类。

这是一个 [例子](http://msdn.microsoft.com/en-us/library/system.io.filesystemwatcher.aspx)

**编辑：** 好吧，如果你想让你的经理开心，你可以做以下事情:)

```
 ThreadPool.QueueUserWorkItem(delegate
     {
        while(true)
        {
          if(File.Exists("file.txt") && File.Exists("file2.txt"))
          {
            //your action here
          }
          else
          {
            Thread.Sleep(1000*60*30);
          }
        }
     }); 
```

# php - 点击下载图片 - 使用 PHP

> ID：13996726
> 
> 赞同：0
> 
> 时间：2012-12-21T20:21:23.247
> 
> 标签：php, html

我希望在网站的点击功能上添加下载图片。据我所知，我正在尝试使用 PHP 来执行此操作，如果没有链接到另一个空白页面然后右键单击另存为，则无法在 HTML 中执行此操作，这不是我想要的。我在这里找到了这段代码并希望对其进行修改，但我担心会破坏它，因为我对 PHP 的了解并不广泛。另外，我需要在多个文件上使用它，但我使用的 PHP 建议您只能在一个文件中使用它，这意味着我可能需要大量 PHP 文件，每个图像下载一个？

无论如何，我不确定，但如果有人能够帮助我，我可以帮助修改代码吗？图像直接来自站点的以下目录：/img/bkg/img1.jpg 这也跟随在 img2-5 中。

无论如何，这是主文件中用于显示图像和 PHP 文件下载链接的代码：

```
<a href="download.php?file=path/<?=$row['img1.jpg']?>">
    <img src="img/bkg/img1.jpg" alt="CWP - Wallpaper 1" width="1056" height="600"/>
</a> 
```

这是我需要适应这些文件和正确目录的代码：

```
<?php

$file = $_GET['file'];

download_file($file);

function download_file( $fullPath ){

  // Must be fresh start
  if( headers_sent() )
    die('Headers Sent');

  // Required for some browsers
  if(ini_get('zlib.output_compression'))
    ini_set('zlib.output_compression', 'Off');

  // File Exists?
  if( file_exists($fullPath) ){

    // Parse Info / Get Extension
    $fsize = filesize($fullPath);
    $path_parts = pathinfo($fullPath);
    $ext = strtolower($path_parts["extension"]);

    // Determine Content Type
    switch ($ext) {
      case "pdf": $ctype="application/pdf"; break;
      case "exe": $ctype="application/octet-stream"; break;
      case "zip": $ctype="application/zip"; break;
      case "doc": $ctype="application/msword"; break;
      case "xls": $ctype="application/vnd.ms-excel"; break;
      case "ppt": $ctype="application/vnd.ms-powerpoint"; break;
      case "gif": $ctype="image/gif"; break;
      case "png": $ctype="image/png"; break;
      case "jpeg":
      case "jpg": $ctype="image/jpg"; break;
      default: $ctype="application/force-download";
    }

    header("Pragma: public"); // required
    header("Expires: 0");
    header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
    header("Cache-Control: private",false); // required for certain browsers
    header("Content-Type: $ctype");
    header("Content-Disposition: attachment; filename=\"".basename($fullPath)."\";" );
    header("Content-Transfer-Encoding: binary");
    header("Content-Length: ".$fsize);
    ob_clean();
    flush();
    readfile( $fullPath );

  } else
    die('File Not Found');

}
?> 
```

如果以上是一个愚蠢的问题，我很抱歉，但我宁愿在这方面寻求帮助，也不愿一遍又一遍地打破它。我不确定我在哪里替换文件和目录等，我想把它做好。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:58:02.750

您的脚本将在一个页面上处理多个下载就好了，您可以添加尽可能多的：

```
<a href="download.php?file=path/<?=$row['img1.jpg']?>"> 
```

到您喜欢的页面。每次单击链接时，脚本将根据您发送给它的信息运行并处理下载（`file=path/<?=$row['img1.jpg']?>`在示例中）。

但是，此脚本没有任何输入验证，因此人们可以通过发出请求来请求系统文件，例如`download.php?file=../../../etc/passwd`.

为了解决这个问题，我将删除查询字符串中的路径（您可以在 php 中再次附加它，这不是任何人的事）并使用正则表达式之类的东西来检查发送的变量是否包含非法字符。

一个简单的例子来说明：

```
if (preg_match('#[^\w.-]#', $_GET['file']))
{
  // if $_GET['file'] contains anything that is not a word character, a dot or a -
  die("invalid input");
}
else
{
  $file = 'path/' . $_GET['file'];
  // rest of your code 
```

我还会删除您不使用的 mime 类型，因此只保留 jpg 或所有图像类型。

# model-view-controller - Populating a Sencha Touch 2 form with associated models

> ID：13996730
> 
> 赞同：1
> 
> 时间：2012-12-21T20:21:55.587
> 
> 标签：model-view-controller, sencha-touch-2

I am trying to take advantage of Sencha Touch 2's ability to handle associated models. In my case, suppose I have a Selection and Book: **Selection <<--> Book**. So, I have a record that could look like this:

```
{
    id: 123,
    position: 1,
    book: {
        title: 'War and Peace'
    }
} 
```

Suppose I want to populate a FormPanel with a Selection record. When it's a flat record, there's lots of documentation about this on the Internet, and I've gotten it to work easily:

```
myFormPanel.setRecord(record); 
```

When a form covers two associated models at once, this no longer works. A field dedicated to, say, book.title remains empty:

```
{
    xtype: 'textfield',
    name: 'title', // also tried 'book.title'
    label: 'Title'
} 
```

Is there a way to populate Sencha Touch 2 forms automatically when the record is not flat? I could, of course, create a flat model specifically for this form, but that sort of defeats the purpose.

If there's no automated way, what's the next best alternative? Individually fetching fields from the FormPanel and setting their values?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T18:28:54.490

Since there were no takers here, I went to Sencha Forums for help. The answer:

I need to create a flat object representation of the model like so:

```
var data = { id: 123, booktitle: 'War and Peace', ... } 
```

and then populate the form with setValues():

```
myFormPanel.setValues(data); 
```

# regex - 如何在 Eclipse 中重命名多个文件？

> ID：13996732
> 
> 赞同：3
> 
> 时间：2012-12-21T20:21:56.997
> 
> 标签：regex, eclipse, user-interface, filenames, batch-rename

我想在 Eclipse 中重命名多个文件（/资源）。

按有用顺序排列的功能：

1.  重命名搜索结果中的文件（即搜索模式，查看哪些文件匹配
2.  使用在所有文件名上运行的正则表达式重命名文件（例如`s/stuff(.*)\.c/stuff\1.c.old/`）
3.  在包资源管理器的选择中重命名文件（F2 不这样做...）

我怎样才能做到这一点？是否有相关的附加组件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:29:55.780

也许你可以使用[Jalopy](http://www.triemax.com/products/jalopy/features.html)，不幸的是它不是免费的。我不确定它对您的情况有多大用处。

# c++ - 从记录集中保存值

> ID：13996734
> 
> 赞同：0
> 
> 时间：2012-12-21T20:21:59.647
> 
> 标签：c++, visual-c++, mfc

我通过 getfieldvalue 函数从 access db 获取值。我需要保存一堆这些值，然后用这些值进行计算。最好的方法是什么？感谢帮助。如果缺少某些信息，请告诉我。我会尽力提供。再次感谢你

```
CRecordset rset(&pdatabase);

        if(rset.Open(CRecordset::forwardOnly, selectionStr))
        {
            while(rset.IsBOF()&&rset.IsEOF())
            {
                m_Log->Log("Copying Previous Values from Access DB");
                rset.GetFieldValue((short)0 ,pname_old);
                rset.GetFieldValue((short)1 ,Date_old);
                rset.GetFieldValue((short)2 ,Time_old);
                rset.GetFieldValue((short)3 ,Y_old));
                rset.GetFieldValue((short)4 ,QTime_old);

            }

            rset.MoveNext();
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:44:34.520

您可以使用 stl 中的工具，例如[std::vector](http://www.cplusplus.com/reference/vector/vector/)或[std::list](http://www.cplusplus.com/reference/list/list/)在获取数据时处理您的数据，并在收集后处理它们。

# c# - 套接字编程：服务器/客户端和线程使用

> ID：13996735
> 
> 赞同：0
> 
> 时间：2012-12-21T20:22:07.973
> 
> 标签：c#, multithreading, sockets, tcpclient

```
static void Main(string[] args)
    {
        Console.Title = "Socket Server";
        Console.WriteLine("Listening for client messages");

        Socket serverSocket = new Socket(AddressFamily.InterNetwork,
                                         SocketType.Stream,
                                         ProtocolType.Tcp);
        IPAddress serverIp = IPAddress.Any;
        IPEndPoint serverEP = new IPEndPoint(serverIp, 8000);

        SocketPermission socketPermission = new SocketPermission(NetworkAccess.Accept,
                                                                 TransportType.Tcp,
                                                                 "127.0.0.1", 8000);

        serverSocket.Bind(serverEP);
        serverSocket.Listen(2);

        while(true)
        {
            //Socket connection = serverSocket.Accept();

            connection = serverSocket.Accept();

            Thread clientThread = new Thread(new ParameterizedThreadStart(MultiUser));           
            clientThread.Start(connection);

        }
    }

    public static void MultiUser(object connection)
    {

        byte[] serverBuffer = new byte[10025];
        string message = string.Empty;

        int bytes = ((Socket)connection).Receive(serverBuffer, serverBuffer.Length, 0);
        message += Encoding.ASCII.GetString(serverBuffer, 0, bytes);
        Console.WriteLine(message);

        TcpClient client = new TcpClient();
        client.Client = ((Socket)connection);
        IntPtr handle = client.Client.Handle;

    } 
```

我想写一个聊天程序，它有一个服务器和两个客户端。问题是，我无法通过服务器将来自客户端 1 的消息定向到客户端 2。服务器如何区分线程，以便将收到的消息从client1发送到client2？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:46:42.277

每个客户都有自己的句柄。您可以通过**Handle**属性访问它。例如：

```
TcpClient client = tcpListener.AcceptTcpClient();
IntPtr handle = client.Client.Handle; //returns a handle to the connection 
```

然后你需要做的就是将它存储在一个哈希表中，并遍历它，寻找可用的数据。当您在线路上检测到其中一个连接的数据时，将其保存并重新传输到表中的其他客户端。

请记住确保您创建了这个多线程，以便一个客户端上的侦听请求不会阻塞其他客户端上的任何发送或接收功能！

我在这里添加了一些你应该可以使用的代码（在我的系统上测试过）

```
private void HandleClients(object newClient)
        {
            //check to see if we are adding a new client, or just iterating through existing clients
            if (newClient != null)
            {
                TcpClient newTcpClient = (TcpClient)newClient;

                //add this client to our list
                clientList.Add(newTcpClient.Client.Handle, newTcpClient);
                Console.WriteLine("Adding handle: " + newTcpClient.Client.Handle);  //for debugging
            }

            //iterate through existing clients to see if there is any data on the wire
            foreach (TcpClient tc in clientList.Values)
            {
                if (tc.Available > 0)
                {
                    int dataSize = tc.Available;
                    Console.WriteLine("Received data from: " + tc.Client.Handle); //for debugging

                    string text = GetNetworkString(tc.GetStream());

                    //and transmit it to everyone else
                    foreach (TcpClient otherClient in clientList.Values)
                    {
                        if (tc.Client.Handle != otherClient.Client.Handle)
                        {
                            Send(otherClient.GetStream(), text);
                        }
                    }
                }
            }
        }

        public void Send(NetworkStream ns, string data)
        {
            try
            {
                byte[] bdata = GetBytes(data, Encoding.ASCII);
                ns.Write(bdata, 0, bdata.Length);
            }
            catch (Exception ex)
            {
                System.Diagnostics.Debug.WriteLine(ex.Message);
            }
        }

        protected string GetNetworkString(NetworkStream ns)
        {
            if (ns.CanRead)
            {
                string receivedString;
                byte[] b = GetNetworkData(ns);

                receivedString = System.Text.Encoding.UTF8.GetString(b);
                log.Info("Received string: " + receivedString);

                return receivedString;
            }
            else
                return null;
        }

        protected byte[] GetNetworkData(NetworkStream ns)
        {
            if (ns.CanRead)
            {
                log.Debug("Data detected on wire...");
                byte[] b;
                byte[] myReadBuffer = new byte[1024];
                MemoryStream ms = new MemoryStream();
                int numberOfBytesRead = 0;

                // Incoming message may be larger than the buffer size.
                do
                {
                    numberOfBytesRead = ns.Read(myReadBuffer, 0, myReadBuffer.Length);
                    ms.Write(myReadBuffer, 0, numberOfBytesRead);
                }
                while (ns.DataAvailable);

                //and get the full message
                b = new byte[(int)ms.Length];
                ms.Seek(0, SeekOrigin.Begin);
                ms.Read(b, 0, (int)ms.Length);
                ms.Close();

                return b;
            }
            else
                return null;
        } 
```

您将希望从一个主线程调用**HandleClients**，该线程检查是否有任何挂起的请求，并在循环中运行。

# ruby-on-rails - 基于两条关联记录查询

> ID：13996736
> 
> 赞同：0
> 
> 时间：2012-12-21T20:22:11.083
> 
> 标签：ruby-on-rails, activerecord

我的产品有很多变体，这些变体有两个属性：尺寸和颜色。
我想根据我传入的两个属性查询 Variant - 我让它与以下内容一起工作：

```
variants = Spree::Variant.joins(:option_values).where(:spree_option_values => {:id => size.id}, :product_id => prod.id).joins(:option_values)

variant = variants.select{|v| v.option_values.include?(size)} 
```

据我了解， select 方法或多或少会遍历数组，这有点慢。我宁愿有一个直接根据这两个属性找到变体的查询。
我尝试了以下方法：

```
Spree::Variant.joins(:option_values).where(:spree_option_values => {:id => size.id}, :product_id => prod.id).joins(:option_values).where(:spree_option_values => {:id => color.id}) 
```

但这最终只返回了一个空数组。
我该怎么办？

编辑：这是产品、变体和 option_values 模型：

产品： [https ://github.com/spree/spree/blob/master/core/app/models/spree/product.rb](https://github.com/spree/spree/blob/master/core/app/models/spree/product.rb)

变体： [https ://github.com/spree/spree/blob/master/core/app/models/spree/variant.rb](https://github.com/spree/spree/blob/master/core/app/models/spree/variant.rb)

OptionValue：[https](https://github.com/spree/spree/blob/master/core/app/models/spree/option_value.rb) ://github.com/spree/spree/blob/master/core/app/models/spree/option_value.rb OptionType：[https ://github.com/spree/spree/blob/master/core/app /models/spree/option_type.rb](https://github.com/spree/spree/blob/master/core/app/models/spree/option_type.rb)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:35:42.907

更新 2：你是对的，这不是你要找的。

这样你就可以：

1）构建SQL子查询：（如果连接的表同时有*大小*和*颜色*，则返回TRUE）。它的工作速度有多快 - 是一个问题......

2) 假设您已经为表“spree_option_values_variants”创建了一个模型“ValuesVariants”并踢出了 habtm（替换为 2 has_manys + 2 has_manys through）。现在您可以使用 (option_type_id = size_id||color_id AND variant_id IN (产品的变体 ID 数组)) 搜索 ValuesVariants，提取匹配的变体。它可以足够快...

3）您可以使用：包括。因此关联对象加载到内存中，第二次搜索通过数组方法进行。在这种情况下，关注的是内存使用情况。

# javascript - 在新标签页或窗口中打开网址

> ID：13996737
> 
> 赞同：0
> 
> 时间：2012-12-21T20:22:16.553
> 
> 标签：javascript, jquery

我希望当用户打开我的网站时，10 秒后会打开一个新窗口或选项卡，我发现了这个函数 window.open("yoururl") 但它似乎只适用于点击事件，所以我怎样才能让它工作没有点击事件

```
jQuery(document).ready(function(){

  setTimeout('openUrl()',10000);

})

function openUrl() {
 window.open("yoururl");
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-21T20:23:32.990

**不允许**使用任何非**用户操作**触发的事件打开新窗口。一些网站欺骗用户点击其他内容，然后利用该操作进行弹出。但这是不可接受且真正令人讨厌的用户体验。

# perl - 将受密码保护的 xlsx 工作簿导入 R

> ID：13996740
> 
> 赞同：11
> 
> 时间：2012-12-21T20:22:40.370
> 
> 标签：perl, r, gdata, xlsx

如何将受密码保护的`xlsx`工作簿中的工作表导入`R`?

我希望能够将 Excel 工作表转换为`csv`文件，而无需通过 Excel 本身。

xls 工作簿可以使用`xls2csv`package中基于 perl 的函数`gdata`。我认为问题是`Spreadsheet::XLSX`不支持它。

有多种用于导入非加密 xlsx 工作簿的函数和包，但似乎没有一个可以解决这个问题。

目前，似乎唯一的选择是通过 Excel 或弄清楚如何编写可以做到这一点的 perl 代码。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T21:02:36.727

它看起来是您需要的，但它不是 xlsx 包：

[https://stat.ethz.ch/pipermail/r-help/2011-March/273678.html](https://stat.ethz.ch/pipermail/r-help/2011-March/273678.html)

```
library(RDCOMClient)
eApp <-  COMCreate("Excel.Application")
wk <-  eApp$Workbooks()$Open(Filename="your_file",Password="your_password")
tf <-  tempfile()
wk$Sheets(1)$SaveAs(tf, 3) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T11:22:09.060

为了建立 ed82 的答案，有一些警告：

1.  您可能需要传递另一个密码参数**WriteResPassword**。 [在此处查看文档](https://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.workbooks.open.aspx)

2.  习惯了 xlsx R 包后，我没有发现学习 COM 接口的吸引力。所以我宁愿立即保存一份没有密码的受保护 Excel 文件的副本，关闭它，然后用另一个包读取它：

```
eApp <- COMCreate("Excel.Application")

# Find out whether you need to pass **Password** or **WriteResPassword**
wk <- eApp$Workbooks()$Open(Filename= filename, Password="somepass",                             WriteResPassword = "somepass")

# Save a copy, clear the password (otherwise copy is still pass-protected)
wk$SaveAs(Filename = '...somepath...', WriteResPassword = '', Password = '')

# The copied file is still open by COM, so close it
wk$Close(SaveChanges = F)

# Now read into data.frame using a familiar package {xlsx}
my.data <- raed.xlsx('...somepath...', sheetIndex = ...) 
```

# sql - 使用 SELECT INTO 时是否可以在临时表上创建索引？

> ID：13996744
> 
> 赞同：21
> 
> 时间：2012-12-21T20:22:53.100
> 
> 标签：sql, tsql, indexing, select-into

我正在将 CSV 文件中的数据加载到临时临时表中，并且正在大量查询该临时表。我查看了我的执行计划，发现很多时间都花在了扫描临时表上。

有没有办法在这个表上创建索引`SELECT INTO`？

```
SELECT *    
FROM TradeTable.staging.Security s
WHERE (
    s.Identifier IS NOT NULL
    OR s.ConstituentTicker IS NOT NULL
    OR s.CompositeTicker IS NOT NULL
    OR s.CUSIP IS NOT NULL
    OR s.ISIN IS NOT NULL
    OR s.SEDOL IS NOT NULL
    OR s.eSignalTicker IS NOT NULL) 
```

![在此处输入图像描述](../Images/fb5e556b7de0f81caee45ba3212b1903.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-12-21T21:08:53.440

创建的表`SELECT INTO`始终是一个堆。如果您想要一个 PK/Identity 列，您可以按照评论中的建议进行操作

```
CREATE TABLE #T
(
Id INT IDENTITY(1,1) PRIMARY KEY,
/*Other Columns*/
)

INSERT INTO #T 
SELECT *
FROM TradeTable.staging.Security 
```

或避免显式`CREATE`并需要列出所有列

```
SELECT TOP (0) IDENTITY(int,1,1) As Id, *
INTO #T
FROM TradeTable.staging.Security

ALTER TABLE #T ADD PRIMARY KEY(Id)

INSERT INTO #T 
SELECT *
FROM TradeTable.staging.Security 
```

# wordpress - 在没有插件的页面上显示特定的 WordPress 类别

> ID：13996747
> 
> 赞同：-1
> 
> 时间：2012-12-21T20:23:06.143
> 
> 标签：wordpress, categories, shortcode

我正在尝试使用简码在 WordPress 页面上显示特定类别。我熟悉制作自定义页面模板并在那里调用类别，但是我的最终用户必须能够添加更多类别，而无需为每个类别创建新的页面模板。

本质上，我正在寻找如何创建一个短代码来调用页面上特定类别的帖子，而无需创建自定义模板或使用插件。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:34:26.547

这是一个简单的例子。根据需要对其进行修改。

```
add_shortcode('catlist', function($atts, $content) {
    $atts += array('category' => 1);
    $posts = get_posts("category={$atts['category']}");

    foreach ($posts as $post) {
        echo $post->post_name . '<br />';
    }
});

echo do_shortcode('[catlist category=5]'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:30:47.123

查看此插件的源代码 - [http://wordpress.org/extend/plugins/category-post-shortcode/](http://wordpress.org/extend/plugins/category-post-shortcode/)并找到解决方案（大约 50 行代码）。

# sql - SQL Server - 是否可以在行更新之前返回现有的列值？

> ID：13996748
> 
> 赞同：7
> 
> 时间：2012-12-21T20:23:17.263
> 
> 标签：sql, sql-server, sql-server-2008

我正在编写一个查询来更新用户对论坛帖子（**ForumPosts ）的投票（ ForumVotes** **）**。用户可以投票赞成或反对（投票将等于 1 或 -1）。**此问题专门针对更改用户的投票，因此ForumVotes**表中已存在投票记录。

 ****ForumPosts表存储每个帖子的**总分**，因此我需要保持该字段同步。要重新计算总分，我需要先减去旧票，然后再添加新票，因此我需要在更新用户投票记录之前获取旧票。

我知道我可以用 2 个查询来做到这一点，但我想知道是否有可能（在 SQL Server 2008 中）更新在执行更新之前返回列的值？

这是一个例子：

```
TABLE ForumPosts (
    postID bigint,
    score int,
    ... etc
)

-- existing vote is in this table:

TABLE ForumVotes (
    postFK bigint,
    userFK bigint,
    score int
) 
```

更新用户投票的简单查询

```
UPDATE ForumVotes 
SET score = @newVote 
WHERE postFK = @postID
AND userFK = @userID 
```

可以修改此查询以返回更新前的旧分数吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-12-21T20:28:05.743

试试 OUTPUT 子句：

```
declare @previous table(newscore int, Oldscore int, postFK int, userFK int)

UPDATE ForumVotes 
SET score = @newVote 
OUTPUT inserted.score,deleted.score, deleted.postFK, deleted.userFK into @previous
WHERE postFK = @postID
AND userFK = @userID

select * from @previous 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-21T20:38:07.333

如果是*`single row affected query (ie; update using key(s))`*则；

```
declare @oldVote varchar(50)

update ForumVotes 
set score = @newVote, @oldVote = score 
where postFK = @postId and userFK = @userId

--to receive the old value
select @oldVote 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-04-27T04:26:33.137

I'll expand upon @HLGEM's answer by showing you don't need an intermediate `@previous` table, you can rely on `OUTPUT` returning data directly without any variables, only aliasing:

```
UPDATE
    ForumVotes
SET
    Score = @newVote
OUTPUT
    INSERTED.Score AS NewScore,
    DELETED.Score  AS OldScore
WHERE
    PostFK = @postId AND
    USerFK = @userId 
```

If you run this directly, you'll get a table returned with 1 row of data and 2 columns: `NewScore` and `OldSCore`.****

# html - Like box - 自定义高度问题

> ID：13996757
> 
> 赞同：-1
> 
> 时间：2012-12-21T20:24:06.877
> 
> 标签：html, facebook, iframe, facebook-likebox

从几天开始，我在 Facebook Like 框上遇到了一些问题，我想设置自定义高度，例如 800 像素，但是如果我关闭“显示面孔”它有它的默认高度，如果我打开“显示面孔”我有我的自定义高度，但是仍然有默认的高度提要和很多带有面孔的行...

有什么帮助吗？

编辑：

为了清楚起见，我的代码已经运行了半年多，没有任何变化，就在几天前，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:51:43.377

这是您的解决方案：

**替换为您的信息：（**我*将高度设置为**800px***）

```
<div class="fb-like-box" data-href="http://www.facebook.com/username-of-youe-page" data-width="292" data-height="800" data-show-faces="false" data-stream="true" data-header="true"></div> 
```

**这是您的 JavaScript：（最好在** ***“body”****标签**之后立即***添加）**

 **```
<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_GB/all.js#xfbml=1";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

**成功！**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-11T07:15:44.313

这是 Facebook 本身的错误，仍未修复。我已经向他们提交了错误报告，并会在问题得到解决后相应地更新我的帖子。**

# asp.net - 中继器控制寻呼错误

> ID：13996759
> 
> 赞同：1
> 
> 时间：2012-12-21T20:24:23.900
> 
> 标签：asp.net, vb.net

我正在尝试在转发器控件中创建寻呼机。内容正在从数据库中提取并显示，但是当我单击上一个和下一个按钮时，它们不会分页，也就是说，我停留在相同的内容上。任何人都可以从下面的代码中看到错误吗？没有错误或显示，所以我认为这是小问题，但我一直在用头撞墙试图找到它

标记：

```
<asp:Repeater ID="ArtRepeater" runat="server">
<HeaderTemplate>
    <h2>Items in Selected Category:</h2>
</HeaderTemplate>  
<ItemTemplate>
    <li>
        <asp:HyperLink runat="server" ID="HyperLink"
            NavigateUrl='<%# Eval("MovieID", "Default2.aspx?ArtID={0}")%>'>
            <%# DataBinder.Eval(Container.DataItem, "MovieTitle")%>
        </asp:HyperLink>
    </li>
</ItemTemplate> 
```

代码背后：

```
Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    doPaging()
End Sub

Function getTheData() As DataTable
        Dim DS As New DataSet()
        Dim strConnect As New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source = " & _
        Server.MapPath("/App_Data/MovieBoard.accdb"))
        Dim objOleDBAdapter As New OleDbDataAdapter("SELECT MovieID, MovieTitle FROM Movies", strConnect)
        objOleDBAdapter.Fill(DS, "Movies")

        Return DS.Tables("Movies").Copy
    End Function

    Sub doPaging()
        pagedData.DataSource = getTheData().DefaultView
        pagedData.AllowPaging = True
        pagedData.PageSize = 1

        Try
            pagedData.CurrentPageIndex = Int32.Parse(Request.QueryString("Page")).ToString()
        Catch ex As Exception
            pagedData.CurrentPageIndex = 0
        End Try

        btnPrev.Visible = (pagedData.IsFirstPage)
        btnNext.Visible = (Not pagedData.IsLastPage)

        pageNumber.Text = (pagedData.CurrentPageIndex + 1) & " of " & pagedData.PageCount

        ArtRepeater.DataSource = pagedData
        ArtRepeater.DataBind()
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T21:05:25.590

将头撞到墙上后，我找到了解决方案。我忘记将按钮连接到中继器控件。这是一个解决方案：

```
Imports System.Data
Imports System.Data.OleDb

Partial Class Default2
Inherits System.Web.UI.Page

Dim pagedData As New PagedDataSource

Protected Sub Page_Load(sender As Object, e As EventArgs) Handles Me.Load
    doPaging()
End Sub

Function getTheData() As DataTable
    Dim DS As New DataSet()
    Dim strConnect As New OleDbConnection("Provider=Microsoft.ACE.OLEDB.12.0;Data Source = " & _
    Server.MapPath("/App_Data/MovieBoard.accdb"))
    Dim objOleDBAdapter As New OleDbDataAdapter("SELECT MovieID, MovieTitle FROM Movies", strConnect)
    objOleDBAdapter.Fill(DS, "Movies")

    Return DS.Tables("Movies").Copy
End Function

Sub doPaging()
    pagedData.DataSource = getTheData().DefaultView
    pagedData.AllowPaging = True
    pagedData.PageSize = 1

    Try
        pagedData.CurrentPageIndex = Int32.Parse(Request.QueryString("Page")).ToString()
    Catch ex As Exception
        pagedData.CurrentPageIndex = 0
    End Try

    btnPrev.Visible = (Not pagedData.IsFirstPage)
    btnNext.Visible = (Not pagedData.IsLastPage)

    If Not pagedData.IsFirstPage Then
        btnPrev.PostBackUrl = Request.CurrentExecutionFilePath + _
                                       "?Page=" + CStr(pagedData.CurrentPageIndex - 1)
    End If

    If Not pagedData.IsLastPage Then
        btnNext.PostBackUrl = Request.CurrentExecutionFilePath + _
                                       "?Page=" + CStr(pagedData.CurrentPageIndex + 1)
    End If

    pageNumber.Text = (pagedData.CurrentPageIndex + 1) & " of " & pagedData.PageCount

    ArtRepeater.DataSource = pagedData
    ArtRepeater.DataBind() 
```

# python - Python循环语法错误？

> ID：13996762
> 
> 赞同：-7
> 
> 时间：2012-12-21T20:24:40.060
> 
> 标签：python, loops, syntax, for-loop

为什么这不会编译...我很难过...

```
for files in glob.glob("*.txt"):
    f=open(files)
    for lines in f:
        print lines 
```

我得到：

```
File "teleparse.py", line 21
for lines in f:
^
IndentationError: unexpected indent 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T20:28:47.480

“不，我已经确定缩进只包含制表符。”

你错了：

```
>>> s = """
... 
...     for files in glob.glob("*.txt"):
...         f=open(files)
...         for lines in f:
...                 print lines
... """
>>> 
>>> for line in s.splitlines():
...     print repr(line)
... 
''
''
'    for files in glob.glob("*.txt"):'
'        f=open(files)'
'\t    for lines in f:'
'\t\t    print lines' 
```

您可以使用`python -tt yourprogramname.py`来确认您正在混合制表符和空格。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:30:34.730

除了制表符和空格的潜在混合（参见[PEP 8](http://www.python.org/dev/peps/pep-0008/#tabs-or-spaces)），为什么你的第二个`for`循环在打开文件之后缩进？

应该是这样的（最好只使用空格）：

```
for files in glob.glob("*.txt"):
   f=open(files)
   for lines in f:
      print lines 
```

不是

```
for files in glob.glob("*.txt"):
    f=open(files)
         for lines in f:
            print lines 
```

如错误消息所述，这*将*是“意外缩进”。

# ruby-on-rails-3 - 路由到根（初学者）

> ID：13996767
> 
> 赞同：0
> 
> 时间：2012-12-21T20:25:10.450
> 
> 标签：ruby-on-rails-3, routes

这是我第一次在 stackoverflow 上发帖。我正在学习 Ruby on Rails，我想问一下为什么我的应用程序没有重定向到我在 routes.rb 中指定的根目录。我已经删除了 public/index.html 并将其从 git 中删除。

```
Jba::Application.routes.draw do
    get "home/index"
    root :to => 'home#index'
end 
```

感谢您的帮助。:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T23:58:40.347

确保清除本地浏览器上的缓存，以便查看对代码所做的更改。

# perl - 打印数组后不需要的空格。我正在使用 perl

> ID：13996768
> 
> 赞同：1
> 
> 时间：2012-12-21T20:25:15.347
> 
> 标签：perl, excel, vim, whitespace, text-parsing

我编写了一个脚本来解析一个输入文本文件并输出三个新的文本文件。输入文件有一个标题行，三个输出文件中的每一个都省略了该标题行。输出文件的每一行获取每个输入文件行的前三个条目，然后仅获取输入行中的一部分条目。所有文件都是制表符分隔的。

我的问题是我在输出行的末尾不断得到一个额外的空白。在 VIM 中查看时，我可以在输出文件的行尾看到这个空白。在 Excel 中查看时，我看不到这些额外的空格。

以前，使用我的脚本的早期版本，我可以使用 excel 在行尾看到额外的空白，但只能使用“全选”功能。excel 中显示的数据是我的 perl 脚本打印一个数组的结果，我在其中编写了`print $outfile "@array"`. 我在 stackoverflow 的其他地方了解到，打字`print "@array"`会导致一种插值，它会在我的行中添加空格。此插值产生的空白在 Excel 中不会立即可见，但在使用“全选”突出显示数据时可以看到。因此，我将代码从 更改`print $outfile "@array"`为`print $outfile @array`. 此更改导致输出文件在每个输出行的末尾仍保留一个空格，该空格在 VIM 中可见但在 excel 中不可见。这就是我卡住的地方。

下面是我的脚本。第一部分只是打开并读取输入文件。然后声明一些数组。接下来，a`for loop`开始逐行解析输入文件，并将适当的内容推送到适当的数组中。对一个数组进行替换。同样，所有文件都是制表符分隔的。最后，使用 phrasing`print $outfile @array`和 not将数组打印到三个输出文件`print $outfile "@array"`。

你看到问题了吗？谢谢！

```
#!/usr/bin/perl
use strict; use warnings;

die "usage: [ imputed genotype.file ]\n" unless @ARGV == 1;

my $imputed = $ARGV[ 0 ];
open ( my $FILE, "<$imputed" );
my @data  = <$FILE>; 

my @ADD = ();
my @DOM = ();
my @IMP = ();

for ( my $i = 1; $i < scalar @data; $i++ ) ### for each line data[i], and use $i = 1 to
                                           ### skip header, 0 to include it output
    {
     my $line = $data[ $i ];
     chomp $line;

     my @entries = split( '\t', $data[ $i ] );

     push( @ADD, "$entries[ 0 ]\t$entries[ 1 ]\t$entries[ 2 ]\t" );
     push( @DOM, "$entries[ 0 ]\t$entries[ 1 ]\t$entries[ 2 ]\t" );
     push( @IMP, "$entries[ 0 ]\t$entries[ 1 ]\t$entries[ 2 ]\t" );

     for ( my $i = 3; $i < scalar @entries - 1 ; $i+=3 ) ### for each entry per line
         {
          push( @ADD, "$entries[ $i ]\t" );
          push( @DOM, "$entries[ $i + 1 ]\t" );

          if ( $entries[ $i + 2 ] eq 'NA' ) ### to replace any occuring "NA"s with blanks
             {
              $entries[ $i + 2 ] =~ s/NA//; 
             }

          push( @IMP, "$entries[ $i + 2 ]\t" );
          }

    push( @ADD, "\n" ); 
    push( @DOM, "\n" );
    push( @IMP, "\n" ); 

   } ### for loop   

open my $Afile, ">$imputed" . "_ADD.txt" or die $!;
print $Afile @ADD; 
close $Afile;

open my $Dfile, ">$imputed" . "_DOM.txt" or die $!;
print $Dfile @DOM;
close $Dfile;

open my $Ifile, ">$imputed" . "_IMP.txt" or die $!;
print $Ifile @IMP;
close $Ifile; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T20:33:37.863

您在数组元素末尾使用 \t 的问题。使用功能

```
join( "\t", ...) 
```

反而。

我的意思是，只需创建输出数组，然后使用

```
print join "\t", @output; 
```

有未经测试的例子：

```
#!/usr/bin/perl
use strict; use warnings;

die "usage: [ imputed genotype.file ]\n" unless @ARGV == 1;

open my $Afile, ">$imputed" . "_ADD.txt" or die $!;
open my $Dfile, ">$imputed" . "_DOM.txt" or die $!;
open my $Ifile, ">$imputed" . "_IMP.txt" or die $!;

<>; #skip header
while(<>){ 
      chomp;
      my @entries = split( '\t', $_ );

      my @ADD = ();
      my @DOM = ();
      my @IMP = ();

      push( @ADD, $entries[ 0 ], $entries[ 1 ], $entries[ 2 ]);
      push( @DOM, $entries[ 0 ], $entries[ 1 ], $entries[ 2 ]);
      push( @IMP, $entries[ 0 ], $entries[ 1 ], $entries[ 2 ]);

      for ( my $i = 3; $i < scalar @entries - 1 ; $i+=3 ) { ### for each entry per line
          push( @ADD, $entries[ $i ] );
          push( @DOM, $entries[ $i + 1 ] );

      $entries[ $i + 2 ] =~ s/^NA$//; 

          push( @IMP, $entries[ $i + 2 ] );
      }

      print $Afile join( "\t", @ADD) , "\n"; 
      print $Dfile join( "\t", @DOM) , "\n"; 
      print $Ifile join( "\t", @IMP) , "\n"; 

} ### for loop   

close $Afile;
close $Dfile;
close $Ifile; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T20:34:09.020

```
push( @ADD, "$entries[ 0 ]\t$entries[ 1 ]\t$entries[ 2 ]\t" ); 
```

这些行总是在末尾添加一个选项卡，这可能就是您所看到的。另外，考虑使用一个`join`和一个数组切片而不是字符串插值，例如：

```
push( @ADD, join( "\t", @entries[0..2] ) ); 
```

# jquery - 千币值的正则表达式匹配

> ID：13996769
> 
> 赞同：0
> 
> 时间：2012-12-21T20:25:20.793
> 
> 标签：jquery, regex, jquery-validate

我正在使用 jquery 验证插件并添加了一种检查货币的方法。这是方法：

```
j$.validator.addMethod("money", function(value, element) {
            return this.optional(element) || /^(\d{1,3})(\.\d{2})$/.test(value);
            //return this.optional(element) || /^((?:\d{1,3},)?\d{1,3})(\.\d{2})$/.test(value);
        }, "Must be in US currency format 0.99"); 
```

这可以正确验证从 0.00 到 999.99 的值。但是，一旦我达到 1,000.00，该方法就会返回 false。我不太擅长正则表达式，但据我所知，正则表达式与 1,000.00 或更高的值不匹配？

任何人都可以帮助修改正则表达式以匹配 0.00 到 999,999.99 的货币值吗？那么，它可以正确验证以千计的货币价值吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:37:14.253

试试这个正则表达式：

```
^\d{1,3}(?:,\d{3})?(?:\.\d{2})?$ 
```

## [现场演示](http://www.rubular.com/r/xKDtY3TX1Q)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:32:45.940

这将验证从 0.00 开始的每个范围

```
^\d{1,3}([,]\d{3})*(\.\d{2})$ 
```

如果你只想拥有它到 999,999.99 然后使用这个

```
^\d{1,3}([,]\d{3})?(\.\d{2})$ 
```

# spring - 关闭针对远程 DTD 的 Hibernate hbm.xml XML 验证

> ID：13996771
> 
> 赞同：1
> 
> 时间：2012-12-21T20:25:31.370
> 
> 标签：spring, hibernate, xml-validation

我们目前正在使用`org.springframework.orm.hibernate3.LocalSessionFactoryBean`在我们的应用程序中配置 Hibernate。它加载了大约 50 个 .hbm.xml 映射文件，最近，加载 DTD 的时间似乎`http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd`比平时要长得多。一切最终都会正常工作，但是当一个服务器需要超过一分钟才能启动时，它会让一个人脾气暴躁。这是我们的文档类型，以防我们做错了：

```
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
          "http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd"> 
```

有没有办法在 Spring 管理的 LocalSessionFactoryBean 配置中打开和关闭验证？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:35:37.790

看看这个[线程](https://forum.hibernate.org/viewtopic.php?t=943281)。它有点旧，但最后一个条目说您必须准确指定与休眠 jar 一起提供的 doctype 名称。

# android - android GPS程序没有错误但没有运行，并且“不幸的是应用程序停止工作”消息出现在模拟器上

> ID：13996777
> 
> 赞同：1
> 
> 时间：2012-12-21T20:25:43.103
> 
> 标签：android, gps

嗨，我正在尝试制作一个用于 gps 检测的 android 程序。没有错误出现但我面临消息“不幸的是，应用程序已停止”并且没有任何反应。请帮帮我

我的 Gpstracker.java 代码

```
package com.example.gpstracking;

import android.app.AlertDialog;
import android.app.Service;
import android.content. Context;
import android.content.DialogInterface;
import android.content.Intent;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.os.IBinder;
import android.provider.Settings;  
import android.util.Log;

public class GpsTracker extends Service implements LocationListener {

private final Context mContext;

// flag for GPS status
boolean isGPSEnabled = false;

// flag for network status
boolean isNetworkEnabled = false;

// flag for GPS status
boolean canGetLocation = false;

Location location; // location
double latitude; // latitude
double longitude; // longitude

// The minimum distance to change Updates in meters
private static final long MIN_DISTANCE_CHANGE_FOR_UPDATES = 10; // 10 meters

// The minimum time between updates in milliseconds
private static final long MIN_TIME_BW_UPDATES = 1000 * 60 * 1; // 1 minute

// Declaring a Location Manager
protected LocationManager locationManager;

public GpsTracker(Context context) {
    this.mContext = context;
    getLocation();
}

public Location getLocation() {
    try {
        locationManager = (LocationManager) mContext
                .getSystemService(LOCATION_SERVICE);

        // getting GPS status
        isGPSEnabled = locationManager
                .isProviderEnabled(LocationManager.GPS_PROVIDER);

        // getting network status
        isNetworkEnabled = locationManager
                .isProviderEnabled(LocationManager.NETWORK_PROVIDER);

        if (!isGPSEnabled && !isNetworkEnabled) {
            // no network provider is enabled
        } else {
            this.canGetLocation = true;
            // First get location from Network Provider
            if (isNetworkEnabled) {
                locationManager.requestLocationUpdates(
                        LocationManager.NETWORK_PROVIDER,
                        MIN_TIME_BW_UPDATES,
                        MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                Log.d("Network", "Network");
                if (locationManager != null) {
                    location = locationManager
                            .getLastKnownLocation(LocationManager.NETWORK_PROVIDER);
                    if (location != null) {
                        latitude = location.getLatitude();
                        longitude = location.getLongitude();
                    }
                }
            }
            // if GPS Enabled get lat/long using GPS Services
            if (isGPSEnabled) {
                if (location == null) {
                    locationManager.requestLocationUpdates(
                            LocationManager.GPS_PROVIDER,
                            MIN_TIME_BW_UPDATES,
                            MIN_DISTANCE_CHANGE_FOR_UPDATES, this);
                    Log.d("GPS Enabled", "GPS Enabled");
                    if (locationManager != null) {
                        location = locationManager
                                .getLastKnownLocation(LocationManager.GPS_PROVIDER);
                        if (location != null) {
                            latitude = location.getLatitude();
                            longitude = location.getLongitude();
                        }
                    }
                }
            }
        }

    } catch (Exception e) {
        e.printStackTrace();
    }

    return location;
}

/**
 * Stop using GPS listener
 * Calling this function will stop using GPS in your app
 * */
public void stopUsingGPS(){
    if(locationManager != null){
        locationManager.removeUpdates(GpsTracker.this);
    }
}

/**
 * Function to get latitude
 * */
public double getLatitude(){
    if(location != null){
        latitude = location.getLatitude();
    }

    // return latitude
    return latitude;
}

/**
 * Function to get longitude
 * */
public double getLongitude(){
    if(location != null){
        longitude = location.getLongitude();
    }

    // return longitude
    return longitude;
}

/**
 * Function to check GPS/wifi enabled
 * @return boolean
 * */
public boolean canGetLocation() {
    return this.canGetLocation;
}

/**
 * Function to show settings alert dialog
 * On pressing Settings button will lauch Settings Options
 * */
public void showSettingsAlert(){
    AlertDialog.Builder alertDialog = new AlertDialog.Builder(mContext);

    // Setting Dialog Title
    alertDialog.setTitle("GPS is settings");

    // Setting Dialog Message
    alertDialog.setMessage("GPS is not enabled. Do you want to go to settings menu?");

    // On pressing Settings button
    alertDialog.setPositiveButton("Settings", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog,int which) {
            Intent intent = new Intent(Settings.ACTION_LOCATION_SOURCE_SETTINGS);
            mContext.startActivity(intent);
        }
    });

    // on pressing cancel button
    alertDialog.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
        dialog.cancel();
        }
    });

    // Showing Alert Message
    alertDialog.show();
}

@Override
public void onLocationChanged(Location location) {
}

@Override
public void onProviderDisabled(String provider) {
}

@Override
public void onProviderEnabled(String provider) {
}

@Override
public void onStatusChanged(String provider, int status, Bundle extras) {
}

@Override
public IBinder onBind(Intent arg0) {
    return null;
}

} 
```

同一包中的 AndroidGPSTrackingActivity.java 代码

```
package com.example.gpstracking;

import android.R;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.Toast;

public class AndroidGPSTrackingActivity extends Activity {

 Button btnShowLocation;

// GPSTracker class
GpsTracker gps;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_list_item);

    btnShowLocation = (Button) findViewById(R.id.button1);

    // show location button click event
    btnShowLocation.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // create class object
            gps = new GpsTracker(AndroidGPSTrackingActivity.this);

            // check if GPS enabled
            if(gps.canGetLocation()){

                double latitude = gps.getLatitude();
                double longitude = gps.getLongitude();

                // \n is for new line
                Toast.makeText(getApplicationContext(), "Your Location is - \nLat: " +  latitude + "\nLong: " + longitude, Toast.LENGTH_LONG).show();
            }else{
                // can't get location
                // GPS or Network is not enabled
                // Ask user to enable GPS/network in settings
                gps.showSettingsAlert();
            }

        }
    });
}

} 
```

GPSTrackermanifest.xml 文件是

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.example.gpstracking"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk android:minSdkVersion="8" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <activity
        android:name=".AndroidGPSTrackingActivity"
        android:label="@string/app_name" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
</application>

<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.INTERNET" />

</manifest> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T22:11:44.240

您的代码中有太多错误！

1）您使用未在清单文件中声明的服务 GPSTracker 2）启动服务 3）您必须注册位置侦听器 4）您必须使用 onLocationChanged 获取新位置 5）使用 onStatusChanged 和 onLocationChanged 获取 gps 状态

# javascript - Highcharts 的验证堆叠问题

> ID：13996779
> 
> 赞同：3
> 
> 时间：2012-12-21T20:25:57.180
> 
> 标签：javascript, plot, highcharts

我正在使用 Highcharts 为我的系统用户绘制一些图形。它工作正常，但我在使用堆叠选项时遇到了一些问题。

要堆叠图表，这就是我正在做的事情：

```
chart.options.plotOptions.series.stacking = 'normal'; 
```

根据 Highcharts API，这就是它的完成方式。它工作正常；但除了堆叠之外，我还需要向用户显示一些信息，但这些信息只有在图表堆叠时才可见。所以这就是我正在做的事情：

```
var stacking = chart.options.plotOptions.series.stacking;
if (stacking == 'normal'){
      //show something
} 
```

这应该确保图表是堆叠的，但“堆叠”总是返回“未定义”而不是“正常”或空白 - 即使在另一个函数中我只是将其归为“正常”。请记住，“图表”是一个全局变量，因此任何其他 JS 函数都应该可以访问对它的任何更改。

详情：http: [//jsfiddle.net/GtjdU/](http://jsfiddle.net/GtjdU/)

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T02:46:54.720

问题是你说你做了以下事情：

```
chart.options.plotOptions.series.stacking = 'normal';
                            ^ 
```

但你做到了吗？
不，如果你看看你的小提琴，你会发现你做了以下事情：

```
chart.options.plotOptions.column.stacking = 'normal';
                            ^ 
```

这就是为什么你得到`undefined`

[***演示***](http://jsfiddle.net/hjVzv/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T21:29:41.083

您需要定义您想了解堆叠的系列。

```
var stackedVal;
stackedVal = chart.series[0].options.stacking;
alert(stackedVal); 
```

您无法获得全局堆叠值的原因是因为它被各个系列元素覆盖。因此，您可以设置，`plotOptions.series.stacking = 'normal'`但在每个系列中，您都可以设置自己的单独堆叠。阅读特定系列的实际操作总是更好。

[演示](http://jsfiddle.net/wergeld/GtjdU/1/)

# c# - 需要在 PrincipalContext 内的 Active Directory 中重置和过期密码

> ID：13996783
> 
> 赞同：0
> 
> 时间：2012-12-21T20:26:20.790
> 
> 标签：c#, active-directory, passwords

我试图使用以下代码来设置 Active Directory 的用户密码：

```
using (var context = new PrincipalContext( ContextType.Domain ))
{
  using (var user = UserPrincipal.FindByIdentity( context, IdentityType.SamAccountName, userName ))
  {
      user.SetPassword( "newpassword" );
      user.ExpirePasswordNow();
  }
} 
```

该代码毫无问题地提取了用户信息，但是在尝试重置密码时我得到了拒绝访问。然后我意识到上面的代码没有提供在其中进行操作的安全上下文。怎么放进去？MSDN 给出了 PrincipalContext 的完整构造函数：

```
public PrincipalContext(
   ContextType contextType,
   string name,
   string container,
   string userName,
   string password
) 
```

我能找到的所有示例都清楚地表明，第一个字符串是服务器名称，用户名和密码也很清楚，但“容器”是什么。MSDN中的描述一清二楚：

> “存储上的容器用作上下文的根。所有查询都在这个根下执行，所有插入都在这个容器中执行。”

我尝试使用像“ABCD”这样的任意字符串，但这并不好。我尝试了很多东西都没有好的结果。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:26:20.790

最后在这个 StackOverflow 问题中找到了答案：

[Active Directory 服务：PrincipalContext——“容器”对象的 DN 是什么？](https://stackoverflow.com/questions/2538064/active-directory-services-principalcontext-what-is-the-dn-of-a-container-o)

把东西留在*null*。哇，什么概念。我试过了，令我惊讶的是它确实有效。这是我的最终工作代码：

```
using (var context = new PrincipalContext(ContextType.Domain, "xxxdcoly302.xxx.xx.lcl", null, @"XXX\admin-acct", "Beautifu!"))
{
    using (var user = UserPrincipal.FindByIdentity(context, IdentityType.SamAccountName, userAccountID))
    {
        user.SetPassword("Pa$$word1");
        user.ExpirePasswordNow();
    }
} 
```

请注意，我首先尝试将“LDAP://”作为上述服务器名称的一部分（“xxxdcoly302.xxx.xx.lcl”）。这没有用！它告诉我“无法联系服务器”。我找到了另一个 StackOverflow 答案，说不要使用 LDAP 前缀。所以我做到了，它奏效了。

# ruby-on-rails - Rails：使用 GoDaddy.com 进行部署

> ID：13996785
> 
> 赞同：-3
> 
> 时间：2012-12-21T20:26:25.970
> 
> 标签：ruby-on-rails, ruby, deployment

我知道这是一个非常微妙的话题，但是一个简单的问题是......有没有人使用 godaddy.com 上传了一个 rails 应用程序，如果有，他们是如何做到的。我真的一无所知。这是我第一次。由于客户的选择，我不能使用其他任何东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T21:40:54.820

如果您正在寻找共享主机，[Heroku](http://www.heroku.com)是您最好的选择。尽管您需要对您的应用程序进行一些小的修改以适应此环境，但好处是相当可观的。

我不建议在 Rails 中使用主要用于 PHP 应用程序的常规共享主机。你至少需要一个 VPS，如果你不准备管理它，你需要一个像 Heroku 这样的托管环境，否则你会遇到严重的麻烦。

对于小型或业余项目，512MB VPS 通常足以开始。

如果您的客户坚持使用 GoDaddy，Rails 可能不是您的好选择。[根据文档](http://support.godaddy.com/help/article/1091/installing-a-ruby-on-rails-application)，这似乎是可能的，但您需要拥有正确的帐户类型。

# php - PHP Explode 并在 mysql 数据库中添加数据

> ID：13996786
> 
> 赞同：-1
> 
> 时间：2012-12-21T20:26:37.967
> 
> 标签：php, html, mysql, phpmyadmin

我的问题是：我想在数据库中添加多行（每个网站的 pagerank 在不同的行上，而不是像第一张图片那样都在一行中）！我不知道该怎么做，我尝试过，`explode`但仅适用于从浏览器打印表格，但现在适用于数据库中的链接！请帮我！

**在我的数据库中：** ![在此处输入图像描述](../Images/7c0a876af20258b645b9603393850601.png)

**在我的浏览器中：**

![在此处输入图像描述](../Images/8a50ebce7d98a6585aff628cda976c85.png)

**我的整个代码：**

```
<?php
error_reporting(E_ALL & ~E_NOTICE);
function StrToNum($Str, $Check, $Magic)
{
    $Int32Unit = 4294967296;  // 2^32

    $length = strlen($Str);
    for ($i = 0; $i < $length; $i++) {
        $Check *= $Magic;     
        if ($Check >= $Int32Unit) {
            $Check = ($Check - $Int32Unit * (int) ($Check / $Int32Unit));

            $Check = ($Check < -2147483648) ? ($Check + $Int32Unit) : $Check;
        }
        $Check += ord($Str{$i}); 
    }
    return $Check;
}
function CheckHash($Hashnum)
{
    $CheckByte = 0;
    $Flag = 0;

    $HashStr = sprintf('%u', $Hashnum) ;
    $length = strlen($HashStr);

    for ($i = $length - 1;  $i >= 0;  $i --) {
        $Re = $HashStr{$i};
        if (1 === ($Flag % 2)) {              
            $Re += $Re;     
            $Re = (int)($Re / 10) + ($Re % 10);
        }
        $CheckByte += $Re;
        $Flag ++;    
    }

    $CheckByte %= 10;
    if (0 !== $CheckByte) {
        $CheckByte = 10 - $CheckByte;
        if (1 === ($Flag % 2) ) {
            if (1 === ($CheckByte % 2)) {
                $CheckByte += 9;
            }
            $CheckByte >>= 1;
        }
    }

    return '7'.$CheckByte.$HashStr;
}
function HashURL($String)
{
    $Check1 = StrToNum($String, 0x1505, 0x21);
    $Check2 = StrToNum($String, 0, 0x1003F);

    $Check1 >>= 2;     
    $Check1 = (($Check1 >> 4) & 0x3FFFFC0 ) | ($Check1 & 0x3F);
    $Check1 = (($Check1 >> 4) & 0x3FFC00 ) | ($Check1 & 0x3FF);
    $Check1 = (($Check1 >> 4) & 0x3C000 ) | ($Check1 & 0x3FFF);    

    $T1 = (((($Check1 & 0x3C0) << 4) | ($Check1 & 0x3C)) <<2 ) | ($Check2 & 0xF0F );
    $T2 = (((($Check1 & 0xFFFFC000) << 4) | ($Check1 & 0x3C00)) << 0xA) | ($Check2 & 0xF0F0000 );

    return ($T1 | $T2);
}
function getpagerank($url) {
    $query="http://toolbarqueries.google.com/tbr?client=navclient-auto&ch=".CheckHash(HashURL($url)). "&features=Rank&q=info:".$url;
    set_time_limit(0);
    $data=file_get_contents($query);
    $pos = strpos($data, "Rank_");
    if($pos === false){} else{
        $pagerank = substr($data, $pos + 9);
        return $pagerank;
    }  
}
if($_POST['urls'])
{
    ?><table border="1">
    <th>URL</th>
    <th>Pagerank</th>
    <?
    $urls=trim($_POST['urls']);
    $url=explode("\n",$urls);
    foreach($url as $url)
    {
        if($url)
        {
            $url=trim($url);
            $pagerank=getpagerank($url);
            ?>
            <tr><td><?php echo $url; ?></td><td><?php echo $pagerank; ?></td></tr>
            <?     
            //mysql_query("INSERT INTO projects2 (googlePR, Link)  
            //VALUES ('".$pagerank."','".$urls."') ")  or die(mysql_error());           
            flush();
        }              
    }
    ?></table><?
}
else
{
    ?><form action="" method="post">
    URLS:<br /><textarea name="urls" cols="50" rows="10">Introduceti lista de linkuri aici</textarea><br /><input type="submit" value="Check PR & insert values"/>
    </form>
    <?
}
?>

<?php 
    $urls=trim($_POST['urls']);
    $url=explode("\n",$urls);
    foreach($url as $url) {
    if($url)
  {
    $url=trim($url);
    $pagerank=getpagerank($url);

    mysql_query("INSERT INTO projects2 (googlePR, Link)  
    VALUES ('".$pagerank."','".$urls."') ")  or die(mysql_error());
    }
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:31:12.973

问题出在您正在编写的 foreach 语句中：

```
foreach($url as $url) { 
```

这将用数组的第一个值覆盖你的 $url 数组，因为变量名是相同的。然后在循环结束时，当它尝试迭代到下一行时，它正在迭代一个非数组对象。只是可能将数组创建的名称从爆炸更改为`$url_array`或类似的名称并执行

```
foreach($url_array as $url) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:53:49.097

你的回答是对的，因为我修改了 I 替换`$urls`为`$url`：

```
mysql_query("INSERT INTO projects2 (googlePR, Link)  
    VALUES ('".$pagerank."','".$url."') ") 
```

现在一切顺利

# php - 管理会话的更好方法？

> ID：13996790
> 
> 赞同：1
> 
> 时间：2012-12-21T20:26:52.683
> 
> 标签：php, session

这是我目前管理未来用户（我仍在学习）会话的方式。

```
 <?php  if(isset($_SESSION['username']) && !empty($_SESSION['username'])){
        $user = $_SESSION['username'];   ?> 
<html>page for user's that are logged in here</html>

    <?php  }else { 
session_unset();
session_destroy();
?>
<html>Content for those who are not logged in goes here.  like a login form, general content and whatnot.</html>
<?php }?> 
```

我在整个项目中都使用了这种处理会话的方法。`$_SESSION['username']`如果未设置，大多数具有此功能的页面将在“else”部分中出现 javascript 重定向。页面返回到项目根目录的主索引。但是，当它重定向到那里时，我收到此错误

> 注意：未定义索引：用户名

而不是仅仅为没有会话的用户加载内容。应该为没有有效会话的用户显示的内容中没有 php 变量。`$_SESSION['username']`因此，由于某种原因，php 没有接受未设置 的事实。

有没有人有更好的方法来处理用户会话？或者有任何建议或指示来防止此错误发生？

# javascript - JavaScript 原型“this”问题

> ID：13996794
> 
> 赞同：8
> 
> 时间：2012-12-21T20:27:30.927
> 
> 标签：javascript

这是我上一个问题的后续问题。

[简单的javascript原型问题](https://stackoverflow.com/questions/13996187/simple-javascript-prototype-issue)

我对使用 JavaScript 有点陌生`prototype`，所以对第二篇文章感到抱歉。

我想将单击的元素分配给`id`数组`this.name`。

```
task.prototype.init=function(){  
      this.name=[];  //this.name array has to be defined here

        for (var i; i<5; i++){
            var Link=document.createElement('a');
                Link.innerHTML='click';
                Link.id=value[i];   //I want to assign the value to the this.name array
                Link.href='#'
                Link.onclick=this.changeName;
                document.body.appendChild(Link);
         }
}
task.prototype.changeName=function(){  

     //How do I push the this.id to the property this.name?

     //the code below won't work because this refer to the <a> element. 
     this.name.push(this.id);     

    return false;
    } 
```

任务的任何提示？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-21T20:32:35.040

您的原型没问题，问题是`this`事件处理程序上始终是导致事件被触发的元素。[在 JavaScript 中，`this`函数内部的值取决于函数的调用方式](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/this)。

如果要`this`绑定到某个值，可以使用以下方法创建绑定函数[`Function.prototype.bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)：

```
var newChangeName = this.changeName.bind(this);
Link.onclick = newChangeName; 
```

但请注意，这`bind`仅适用于 IE9+。一种解决方法是：

```
var that = this;
Link.onclick = function() {
    that.changeName();
}; 
```

（样式说明：我会使用`link`而不是`Link`；js 中的约定是将大写首字母留给构造函数）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:34:01.013

用于[`bind`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/bind)设置所需`this`的`changeName`回调：

```
Link.onclick=this.changeName.bind(this); 
```

# java - java - 如何在不使用opengl或directx的情况下在java中填充和纹理圆柱体

> ID：13996797
> 
> 赞同：-1
> 
> 时间：2012-12-21T20:27:40.770
> 
> 标签：java, texture-mapping

> 有没有一本书或教程用简单的例子来说明这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:54:20.233

我认为这是可行的。

***Java：***在标准 Java 中，可以使用 BufferedImage，它的 getGraphics 方法产生一个 Graphics2D 对象。然后有`ImageFilter`s。

***对于（非透视）数学：*** 如果一个人直视圆柱体，则会看到一个 width`2*r`，这实际上是一个 half-circle`pi*r`。

```
actual coordinate:  alpha*r, between -0.5*pi*r and +0.5*pi*r
screen coordinate:  sin(alpha)*r, between -r and +r 
```

缩放：

```
screen[x, y] = image[asin(x), y] 
```

在缩放时，可能会插入一些像素，取平均值

```
image[asin(x-1)+1, y] .. image[asin(x+1)-1, y] 
```

# .net - 与 StructureMap 的 Container.With().EqualTo() 等效的 Simplejector

> ID：13996798
> 
> 赞同：0
> 
> 时间：2012-12-21T20:27:43.667
> 
> 标签：.net, dependency-injection, inversion-of-control, ioc-container, simple-injector

使用 Simple Injector，是否有 StructureMap 的等价物（通过反射`Container.With("CustomerId").EqualTo(100).GetInstance<Customer>()`查找属性）？`CustomerId`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:06:38.547

在 Simple Injector 中没有与此等价的功能。原因是这样的构造通常会导致[Service Locator 反模式](http://blog.ploeh.dk/2010/02/03/ServiceLocatorIsAnAntiPattern.aspx)，并且会导致由于使用魔术字符串而导致的脆弱配置。

因此，一般（独立于容器）的建议是使用抽象工厂（正如 Mark Seemann 解释的那样[）](https://stackoverflow.com/questions/4835046/why-not-use-an-ioc-container-to-resolve-dependencies-for-entities-business-objec)。应用程序可以依赖抽象工厂而不是使用容器。您将责任转移到工厂。您仍然需要在工厂内创建该依赖项。此示例显示了一个解决方案：

```
// Part of Composition Root
private class SomeObjectFactory : ISomeObjectFactory
{
    private readonly Container container;

    public SomeObjectFactory(Container container)
    {
        this.container = container;
    }

    public SomeObject Create(int someValue)
    {
        return new SomeObject(someValue,
            this.container.GetInstance<IOtherDependency>()
        );
    }
} 
```

虽然这可行，但`Create`每次更改构造函数时都必须更改该方法`SomeObject`。

因此，一般而言，我的建议是当您的目标是进行自动装配（容器为您注入所有依赖项）时，避免在同一个构造函数中将原始值（例如 int 和字符串）与服务依赖项混合。尽管某些容器为注册和解析包含原始值的类型提供了更多支持，但它总是导致需要更多维护且更脆弱的 DI 配置。

相反，请尝试：

1.  将原始值包装在可以注入的类中。即注入一个`IConnectionManager`而不是一个`string connectionString`。
2.  将原始值提升为属性。使用 Simple Injector，这允许您进行[显式属性注入](https://simpleinjector.codeplex.com/wikipage?title=Using%20the%20Simple%20Injector#Configuring_Property_Injection)（通过使用 注册初始化委托`RegisterInitializer`），从而实现编译时可验证的连接。

此规则的唯一例外是当您有某种约定优于配置的方法时，该方法使您能够自动检测某种原始值，如此[处所示](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=94)。不过，我认为你必须好好看看你的设计。当相同的原始（配置）值被注入到多个服务中时，您可能会遗漏一个抽象。在这种情况下，应用#1。

但是，此建议尤其适用于配置值。您正在处理运行时值。但是，在处理运行时值时，使用属性仍然可用：

```
// Part of Composition Root
private class SomeObjectFactory : ISomeObjectFactory
{
    private readonly Container container;

    public SomeObjectFactory(Container container)
    {
        this.container = container;
    }

    public SomeObject Create(int someValue)
    {
        var instance = this.container.GetInstance<SomeObject>();
        instance.SomeValue = someValue;
        return instance;
    }
} 
```

通过提升`SomeValue`到一个属性，我们允许容器在运行时值的注入上使用自动装配`SomeObject`并启用编译时支持`someValue`。

然而，使用这样的工厂可能看起来有点冗长，而其他人可能宁愿注入一个`Func<T>`委托：

```
container.RegisterSingle<Func<int, SomeObject>>(someValue =>
{
    var instance = this.container.GetInstance<SomeObject>();
    instance.SomeValue = someValue;
    return instance;
}); 
```

在这种情况下，您的应用程序逻辑可以依赖于`Func<int, SomeObject>`可以注入构造函数的委托。这消除了很多仪式感，缺点是在应用程序的设计中失去了一些表现力，因为`Func<int, SomeObject>`它的表现力要低得多`SomeObject Create(int someValue)`。

但是，在您的特定情况下，您似乎正在解析实体。[正如 Mark Seemann在这里](https://stackoverflow.com/questions/4835046/why-not-use-an-ioc-container-to-resolve-dependencies-for-entities-business-objec)解释的那样，这可能不是最好的做法。此外，让容器创建您使用运行时 id 提供的实体对我来说似乎很奇怪，因为通常会从数据库中检索具有 Id 的实体。

您可能正在应用领域驱动设计，这就是为什么您需要这些服务依赖于您的实体。与其进行构造函数或属性注入，不如考虑使用方法注入。只需添加实体方法所需的依赖项作为方法参数。然后，您可以在从[命令处理程序](https://cuttingedge.it/blogs/steven/pivot/entry.php?id=91)调用该方法时传递这些依赖项。在这种情况下，命令处理程序仍然可以使用普通的旧构造函数注入。当我第一次看到这个（我相信这是 Jimmy Nilsson 的演讲）时，我觉得它与我所知道的一切相矛盾。然而，一段时间后，我开始发现这实际上是一个非常好的解决方案（对于这个特定场景）。

# prototype - Javascript - Onblur 重新聚焦

> ID：13996808
> 
> 赞同：0
> 
> 时间：2012-12-21T20:28:36.417
> 
> 标签：prototype

我已经从这个页面编译了两个用于文本字段和下拉菜单的代码。该代码正在工作，只是在转到另一个字段后它会不停地来回跳跃。我猜我的问题一定在某个地方的循环中，但找不到。提前致谢！[**演示**](http://jsfiddle.net/kKkF2/)

```
function doThisOnBlur() {   
      if (this.value==='') {   var ths = $(this);  setTimeout(function(){
         ths.focus();
        }, 1);  return false; }

}

var inputs = document.getElementsByTagName('input');
var selects = document.getElementsByTagName('select');

for (var i = 0; i < inputs.length; i++)
{ inputs[i].onblur = doThisOnBlur; }
for (i = 0; i < selects.length; i++)
{  selects[i].onblur = doThisOnBlur; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:14:06.453

好的，我做了一个我认为可以根据你的 jsfiddle 工作的改变。我设置了一个全局变量来保存 null 或当前的活动字段。一旦活动字段获得值，则该变量被设置回 null，并且用户可以继续下一个字段。

```
var hasPrecedence = null;

function doThisOnBlur() {
  if(!hasPrecedence){ hasPrecedence = this; }
  if(hasPrecedence != this){ return; }
  if (this.value==='') {   var ths = $(this);  setTimeout(function(){ 
     ths.focus();
  }, 1);  return false; }
  else{
    hasPrecedence = null;
  }
} 
```

​</p>

# excel - 对 Excel 电子表格中的值进行排序

> ID：13996811
> 
> 赞同：5
> 
> 时间：2012-12-21T20:28:46.920
> 
> 标签：excel, excel-formula

我有一个完整的电子表格，其中包含姓名和人员的角色，如下所示：

```
Role Name  Change
1     A     Yes
2     A     No
5     A     N/Ap
1     B     Yes
3     B     No
2     C     Yes
4     C     No 
```

我必须想出一个如下所示的电子表格：

```
 1        2        3        4        5        6
A   Yes                     
B                       
C 
```

基本上，它应该从第一个电子表格中检索信息，并在第二个电子表格中清楚地列出。

有太多的名称和角色需要手动完成。`VLMOVE`不会工作，我已经尝试过`MATCH`and `INDEX`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:43:24.900

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T21:48:02.163

@RocketDonkey 的替代方案（但感谢更完整的预期结果！）可能是将 Role 和 Name 串在一起（比如在 Sheet1 的 B 和 C 之间插入的列中[因为我认为 OP 想要一个单独的结果表]）：

```
C2=A1&B2  copied down as required 
```

然后在 Sheet2!B2 中使用查找：

```
=IFERROR(VLOOKUP(B$1&$A2,Sheet1!$C$2:$D$8,2,FALSE),"") 
```

根据需要上下复制。

这假设结果的网格（如问题）已构建（并且有 7 行数据 - 否则根据需要调整 8 美元。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T22:19:24.667

AMENDED

You can use array formulas to reorganize your table, without having to change the its structure. Assuming the data is in the range A2:C8 on Sheet1 and the result table is to be in range A1:G4 on Sheet2, the following formula would be the first entry (role 1 and name A) in the result table.

```
 =IFERROR(INDEX(Sheet1!$A$2:$C$8,MATCH(B$1&$A2,Sheet1!$A$2:$A$8&Sheet1!$B$2:$B$8,0),3),"-") 
```

The MATCH formula returns the row number in which the role/name combination 1A occurs. The INDEX function returns the contents of the cell at the row number found by the MATCH formula and the column number 3, i.e., the Change column of your data table. The IFERROR returns "-" if the role/name combination is not in the data table.

Be sure to enter the formula using the Control-Shift-Enter key combination. Then copy the formula to the remaining cells of the result table.

The data table on Sheet1:

![data table on Sheet1](../Images/79ae78ffe54d7871a9aa15ce371118c9.png)

The result table on Sheet2:

![result table on Sheet](../Images/527151a7841ecb9d6a16dabaa1a0f50a.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T21:53:20.567

在没有 VBA 的情况下，还有另一种方法可以解决。如果您创建另一列连接第一个电子表格中的前两个列，如下所示：

```
Role Name  Change  CheckColumn
1     A     Yes    1A
2     A     No     2A
5     A     N/Ap   5A
1     B     Yes    1B
3     B     No     3B
2     C     Yes    2C
4     C     No     4C 
```

然后您可以一起使用`Offset`和`Match`函数来查找第二张表中的更改。因此，假设您的数据来自单元格 A1，则单元格 B2 中的公式为：

`=iferror(offset(Sheet1!$A$1,match(B$1&$A2,sheet1!$D:$D,0),2),"")`

或者，如果将连接列放在 sheet1 中的角色列之前，则可以`vlookup`在 sheet2 中使用，公式为：

`=iferror(vlookup(B$1&$A2,sheet1!$A:$D,4,false),"")`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-22T00:25:55.263

好吧，既然有`Excel-VBA`标签，认为它会通过在 VBA 中添加一个来完成解决方案类型:) 下面的代码并不优雅，无论如何你需要使用代码库，试一试:)

代码：

```
Option Explicit

Public Sub sortAndPivot()
Dim d As Object
Dim ws As Worksheet
Dim sourceArray As Variant, pvtArray As Variant, v As Variant
Dim maxRole As Long
Dim i, j, k, m As Integer

    Set d = CreateObject("Scripting.Dictionary")
    Set ws = Worksheets("Sheet3") '-- set according to your sheet
    '-- you could enhance by using an input box to select the range
    sourceArray = Application.WorksheetFunction.Transpose(ws.Range("B3:D9").Value)
    '-- max role number
    maxRole = Application.WorksheetFunction.Max(ws.Range("B3:B9"))

    '-- find unique name list
    For i = LBound(sourceArray, 2) To UBound(sourceArray, 2)
        If Not d.exists(sourceArray(2, i)) Then
            d.Add sourceArray(2, i), i
        End If
    Next i

    ReDim pvtArray(d.Count, maxRole)
    pvtArray(0, 0) = "Name"

    '-- add unique names from dictionary
    j = 1
    For Each v In d.keys
        pvtArray(j, 0) = v
        j = j + 1
    Next

    '-- add unique Role number list
    For i = UBound(pvtArray, 2) To LBound(pvtArray) + 1 Step -1
        pvtArray(0, i) = i
    Next i

    '-- sort into the correct positions
    For k = LBound(pvtArray, 1) + 1 To UBound(pvtArray, 1)
        For m = LBound(pvtArray, 2) + 1 To UBound(pvtArray, 2)
            For i = LBound(sourceArray, 2) To UBound(sourceArray, 2)
                If pvtArray(k, 0) = sourceArray(2, i) Then
                    If pvtArray(0, m) = sourceArray(1, i) Then
                        pvtArray(k, m) = sourceArray(3, i)
                    End If
            End If
        Next i
        Next m
    Next k

    'Output the processed array into the Sheet in pivot view.
    Range("F2").Resize(UBound(pvtArray) + 1, _
    UBound(Application.Transpose(pvtArray))) = pvtArray

    Set d = Nothing
End Sub 
```

结果：

![在此处输入图像描述](../Images/c2b9c79bf2a2d376656c5969033cff3a.png)

# bing-api - 必应翻译器 HTTP API 抛出错误请求错误，如何解决？

> ID：13996817
> 
> 赞同：3
> 
> 时间：2012-12-21T20:29:16.123
> 
> 标签：bing-api

每当我调用 Bing Translation API [HTTP] 来翻译一些文本时，第一次它工作正常，第二次它给我“错误请求”[状态代码 400] 错误。如果我等待 10 分钟左右然后再试一次，那么第一个请求是成功的，但第二个请求是相同的。我有一个使用必应翻译 API 的免费帐户 [200 万字符翻译]，调用此 API 是否还有其他限制？

谢谢，马杜

**答：** 您好，我错过了订阅微软翻译数据集订阅。一旦我得到相同的结果，那么事情就解决了。IE; 一旦我注册了[https://datamarket.azure.com/dataset/bing/microsofttranslator](https://datamarket.azure.com/dataset/bing/microsofttranslator)然后一切正常。

我正确生成了 access_token，所以这不是问题。谢谢，马杜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-24T11:02:47.853

我错过了订阅微软翻译数据集订阅。一旦我得到相同的结果，那么事情就解决了。IE; 一旦我注册了[https://datamarket.azure.com/dataset/bing/microsofttranslator](https://datamarket.azure.com/dataset/bing/microsofttranslator)然后一切正常。

我很感谢，马杜

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-19T16:20:45.043

作为其他有问题的人的说明，我发现该服务只允许在使用免费订阅时使用*一次令牌。*您必须付费订阅才能使用每个令牌多次调用翻译服务。当然，这种限制是无证的。

我不知道你是否可以简单地继续获得新的令牌——我怀疑不能。

无论订阅如何，令牌都会每 10 分钟过期一次，因此请确保您跟踪收到令牌的时间并在需要时获取一个新令牌，例如（不是线程安全的）：

```
private string _headerValue;
private DateTime _headerValueCreated = DateTime.MinValue;
public string headerValue {
    get {
        if(_headerValueCreated < DateTime.Now.AddMinutes(-9)) {
            var admAuth = new AdmAuthentication("myclientid", "mysecret");
            _headerValue = "Bearer " + admAuth.GetAccessToken();
            _headerValueCreated = DateTime.Now;
        }
        return _headerValue;
    }
} 
```

# data-structures - 完整图的最小生成树（MST）数的最小值

> ID：13996826
> 
> 赞同：1
> 
> 时间：2012-12-21T20:29:52.970
> 
> 标签：data-structures, graph, tree, minimum-spanning-tree

具有N个顶点的完整图的最小生成树（MST）的最小数量是多少？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T21:47:20.163

我相信答案是**1**。

可以构造一个包含 n 个节点且恰好具有一个 MST 的完整图。为此，请构建一个带有 n 个节点的图，这些节点标记为 1、2、3、...、n。然后，添加一条成本为 0 的边，从 1 到 2，从 2 到 3，从 3 到 4，...，从 n - 1 到 n，并添加连接每对成本为 1 的节点的边。显然，选择所有零成本边给出了该图的一个可能的生成树，它是最小生成树，因为如果选择任何其他边选择，成本将至少为 1。此外，这是图中唯一的 MST它的成本为 0，因为如果选择了另一组边，则该组必须包括至少一个成本至少为 1 的边，因此总 MST 的成本至少为 1。

希望这可以帮助！

# javascript - 为什么我从我的 regex.exec 中得到一个值？

> ID：13996829
> 
> 赞同：2
> 
> 时间：2012-12-21T20:30:16.030
> 
> 标签：javascript, regex

我有一个非常简单的代码：

```
var allTypes = "restaurant|dentist";
var typeSplitter = new RegExp("([a-zA-Z]+)");
typeSplitter.exec(allTypes); 
```

我想要一个这样的数组：

> [“餐厅”，“牙医”]

但相反，我得到了这个：

> [“餐厅”，“餐厅”]

我确实[在这里](http://rubular.com/r/AI387UdKdC)测试了我的正则表达式。我一直在摆弄这个，可能是我不知道的事情

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T20:31:43.270

就这样做

```
allTypes.split('|');
// => ['restaurant', 'dentist'] 
```

`.split`也可以采用正则表达式；即使在这种情况下没有必要

```
allTypes.split(/[|]/); 
```

但是如果你真的想使用正则表达式来捕获，你必须使用`.match`

```
matches = allTypes.match(/([a-zA-Z]+)/g); // g = global modifier 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-21T20:34:20.310

因为`exec`只返回一个匹配和所有捕获。第一个元素是完全匹配。第二个是第一个捕获（模式中的第一组括号）。由于您已将整个模式包裹在括号中，因此这些值是一致的（并且您的括号是不必要的）。使用`match`and 一个全局修饰符来代替：

```
var result = "restaurant|dentist".match(/[a-zA-Z]+/g); 
```

如果您有更复杂的模式并且**确实**需要每次匹配的捕获组，那么`exec`就是要走的路。但是你仍然需要使用全局修饰符并`exec`循环运行：

```
var regex = /your(Pattern)here/g;
var m;
while (m = regex.exec(input))
{
    var entireMatch = m[0];
    var firstCapture = m[1];
    // ...
    // process results
} 
```

# macos - 相同文件扩展名的重叠 UTI 声明

> ID：13996833
> 
> 赞同：1
> 
> 时间：2012-12-21T20:30:42.173
> 
> 标签：macos, cocoa, uti

我的应用程序的用户不断遇到与其他应用程序相关的问题，这些应用程序为与我的应用程序相同的文件扩展名声明不同的 UTI。我想我可以用一个例子来最好地描述这一点：

我的应用程序支持导入和导出 OPML 文件。为此，我在 info.plist 中导入了 org.opm.opml UTI。这通常可以正常工作，但如果其他应用程序为 opml 文件扩展名声明不同的 UTI，则会失败。例如 com.relex.opml 或 com.xwavesoft.cloudoutliner.opml。

我可以做些什么来解决这个问题吗？我能否以某种方式告诉启动服务我的应用程序接受所有扩展名为 .opml 的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T18:32:15.610

Cloud Outliner 今天在 MAS 上更新，现在查看 .opml 文件的 UTI，com.xwavesoft.cloudoutliner.opml 现在已经消失，com.relex.opml 现在取而代之。这将是无趣的，除了现在在 MindNode 中打开 OPML 文件没有问题。

除了“各种修复和改进”之外，我找不到 Cloud Outliner 的任何发行说明。但似乎有些事情变得更好了。所以：就我而言 - 简单的答案是“更新 Cloud Outliner”，但我不确定这是否能解决更大的问题。我的系统上也有 Mellel（显然，对吗？！）但这似乎并没有导致同样的问题。

对于那些观看此线程的人 - 以 MindNode 形式呈现的问题在其打开的对话框中显示 OPML 文件的灰色图标。将 OPML 拖到 Dock 中的 MindNode 图标也没有产生任何结果。

抢

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-22T17:55:56.580

我通过以下工作解决了这个问题：

1.  我从 CFBundleDocumentTypes 列表中删除了整个 LSItemContentTypes 条目
2.  在我的 NSDocument 子类中，我使用 NSString 的 rangeOfString:: 方法在 typeName 参数中查找 @"opml" 关键字。

用户确认了此解决方法。

# machine-learning - 在向量空间模型中表示文档

> ID：13996840
> 
> 赞同：0
> 
> 时间：2012-12-21T20:31:22.817
> 
> 标签：machine-learning, nlp, classification, svm

我有一个非常基本的问题。我有两套文档，一套用于培训，一套用于测试。我想用训练文档训练一个逻辑回归分类器。我想知道我是否做对了。

1.  首先找到训练文档中所有唯一词的列表，称之为词汇表。
2.  对于词汇表中的每个单词，在每个训练文档中找到它的 TFIDF。然后将文档表示为这些 TFIDF 分数的向量。

我的问题是： 1\. 我如何表示测试文件？比如说，其中一个测试文档在词汇表中没有任何单词。在这种情况下，该文档词汇表中所有单词的 TFIDF 分数将为零。

1.  我正在尝试使用使用稀疏向量格式的 LIBSVM。对于上述文档的情况，其向量表示中的所有条目都设置为 0，我该如何表示它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T04:28:22.950

您必须存储足够的关于训练语料库的信息，才能对看不见的文档进行 TF IDF 转换。这意味着您将需要训练语料库中术语的文档频率。忽略测试文档中看不见的单词很好。无论如何，您的 svm 不会为他们学习权重。请注意，如果您的训练和测试分布相似，那么在测试语料库中看不见的术语应该很少见。因此，即使删除了一些术语，您仍然有很多术语可以对文档进行分类。

# java - java代码中的mysql更新查询不起作用

> ID：13996841
> 
> 赞同：0
> 
> 时间：2012-12-21T20:31:22.427
> 
> 标签：java, mysql, sql-update

在 mysql 中，我有一个 INVENTORY 表，在该表中，我`num_of_items`在 gui 文本字段中添加了用户给出的，之前`num_of_items`存在于 mysql 中。我在我的java代码中写了一个查询如下..但它没有更新我的INVENTORY表..

```
try {
    st2 = conn.createStatement();
    rs=st2.executeQuery("select order_num,prod_name_in_order,num_of_items_in_order,cost_order from ORDER_DUP where order_num='"+ord_num+"'");
    int column=rs.getMetaData().getColumnCount();

    int j=0;
    while(rs.next())
    {
        for(int i=1;i<=column;i++)
        {
            System.out.print(rs.getObject(i)+"\t");
            product_name1 = (String) rs.getObject(2);
            x1 = rs.getInt(3);
            //int x=Integer.parseInt(num_of_items.trim());

        }
        product_name[j]=product_name1;
        x[j]=x1;
              j++;
        System.out.println();
    }
    for(int k=0;k<j;k++)
        st2.executeUpdate("update INVENTORY set num_of_items=num_of_items+'"+x[k]+"' where product_name='"+product_name[k]+"'"); //st2.close();
    //conn.close();
    System.out.printf("invy");

}
catch (SQLException e) {
    System.out.printf("error in updating inventory table(YES)");
    e.printStackTrace();
} 
```

请帮帮我..我没有弄错！谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:53:15.337

首先，缩小问题的根本原因，您是否尝试打印出最终语句字符串并在数据库中运行命令？

```
System.out.println("update INVENTORY set num_of_items=num_of_items+'"+x[k]+"' where product_name='"+product_name[k]+"'"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:34:49.377

不要用单引号将您插入的变量值括起来`x[k]`。

你的查询应该如下：

```
"update INVENTORY set num_of_items=num_of_items+"+x[k]+" where product_name='"+product_name[k]+"'" 
```

# java - 无法在 Internet Explorer 中访问小程序

> ID：13996844
> 
> 赞同：1
> 
> 时间：2012-12-21T20:31:40.643
> 
> 标签：java, internet-explorer, applet, jna, jsobject

我有一个应该通过 JNA 使用 WinAPI 的小程序。由自己的密钥签名的小程序。我已经将它部署在这样的页面上：

```
<applet id="_TestApplet" code="TestApplet.class" archive="/Content/TestApplet.jar"
name="Test Applet" width="0" height="0" mayscript=""> 
<param name="codebase_lookup" value="false"> 
</applet> 
```

在 Chrome 和 FF 中一切正常，但在 IE 6、7、8 中有一个例外：

```
TypeError: Object doesn't support this property or method 
```

Java 控制台不包含任何异常。

我的错误是什么？

# css - 我需要在页面中间对齐的文本以及中间页面底部的文本

> ID：13996848
> 
> 赞同：-2
> 
> 时间：2012-12-21T20:32:24.953
> 
> 标签：css, html

所以，我想让我的文本在页面中间对齐，我还想要一个单独的 div，在中间的页面底部有文本。

这是我的 CSS 代码

```
#header { text-align:center; color:white; font-family:'Capture'; font-size:34px; margin: auto; width: 800px;}
    #slogan { text-align:center }

    @font-face { font-family:'Capture'; src:url(/fonts/Capture_it.ttf); }
    .info-container { width: 840px; border: 1px solid #d8d5c6: padding: 4px; margin: 40px auto 0; }

    .inner-border { background-color: #fcfbf9; border: 1px solid #d8d5c6; padding: 10px 20px; }

    .coming-soon-visitor strong, .coming-soon-owner strong { font-weight: bold; color: #000; }

    .coming-soon-owner { float: left; font-size: 14px; color: #6d6a5b; font-weight: normal; width: 400px; border-right: 1px solid #d9d6c5; padding: 10px 0; margin-bottom: 10px; }

    .coming-soon-visitor { float: left; font-size: 14px; color: #6d6a5b; font-weight: normal; padding-left: 20px; padding: 10px 0 10px 20px; margin-bottom: 10px; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:34:14.073

```
<div style="text-align:center">Your text here</div> 
```

和你的CSS

```
<div id="my-div">Your text here</div>

#my-div{ text-align: center } 
```

如果您的意思是“我希望我的 DIV 居中”，那么您可能想要这样：

```
<div id="my-div">Your text here</div>

#my-div{ width: 800px; margin: 0 auto; text-align: center } 
```

除此之外，您的问题可能太模糊而无法给您寻求的答案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T20:40:15.570

看看下面的代码是否有帮助：

```
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>align</title>
<style type="text/css">
body {
    margin: 0px;
    padding: 0px;
}
#text_center {
    text-align: center;
    width: 200px;
    position:absolute;
    left:50%;
    top:50%;
    margin-left:-100px;
    margin-top:-20px;
}
#text_bottom {
    text-align: center;
    width: 200px;
    position:absolute;
    left:50%;
    bottom:1%;
    margin-left:-100px;
}
</style>
</head>
<body>
    <div id="text_center">Text 1</div>
    <div id="text_bottom">Text 2</div>
</body>
</html> 
```

# mysql - 触发器中的mysql where子句错误

> ID：13996851
> 
> 赞同：2
> 
> 时间：2012-12-21T20:32:31.757
> 
> 标签：mysql

我在`user`TABLE 和`school`TABLE 之间添加了触发器，对于学生转校和在校学生添加，该`numbers_of_school`字段可能是问题所在。

错误消息是：

**#1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在 'WHERE NEW.NUMBERS_OF_STUDENT < 0; 附近使用正确的语法；END' 在第 4 行**

```
CREATE TABLE IF NOT EXISTS `school` (
  `school_id` int(11) NOT NULL,
  `school_name` varchar(45) NOT NULL,
  `location` varchar(45) NOT NULL,
  `master` varchar(45) NOT NULL,
  `numbers_of_student` int(11) NOT NULL,
  PRIMARY KEY (`school_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

--
-- TABLE `school`
--
DROP TRIGGER IF EXISTS `tg_school_insert`; 
DELIMITER //
CREATE TRIGGER `tg_school_insert` BEFORE INSERT ON `school`
 FOR EACH ROW BEGIN
    IF NEW.NUMBERS_OF_STUDENT = NULL THEN
        SET NEW.NUMBERS_OF_STUDENT = 0;
    END IF;
END
//
DELIMITER ;

DROP TRIGGER IF EXISTS `tg_school_delete`; 
DELIMITER //
CREATE TRIGGER `tg_school_delete` AFTER DELETE ON `school`
 FOR EACH ROW BEGIN
DELETE FROM DEPARTMENT
WHERE SCHOOL_ID=OLD.SCHOOL_ID;
UPDATE USER
SET SCHOOL_ID = NULL
WHERE SCHOOL_ID = OLD.SCHOOL_ID;
END
//
DELIMITER ;

DROP TRIGGER IF EXISTS `tg_school_update`; 
DELIMITER //
CREATE TRIGGER `tg_school_update` BEFORE UPDATE ON `school`
 FOR EACH ROW BEGIN
SET NEW.NUMBERS_OF_STUDENT = 0
WHERE NEW.NUMBERS_OF_STUDENT < 0;
END
//
DELIMITER ; 
```

和我的`user`下表：

```
CREATE TABLE IF NOT EXISTS `user` (
  `user_id` int(11) NOT NULL AUTO_INCREMENT,
  `department_id` int(11) DEFAULT NULL,
  `school_id` int(11) DEFAULT NULL,
  `password` varchar(45) DEFAULT NULL,
  `realname` varchar(45) DEFAULT NULL,
  `familyname` varchar(45) DEFAULT NULL,
  `birthdate` varchar(45) DEFAULT NULL,
  `gender` tinyint(1) NOT NULL,
  `photo` varchar(45) DEFAULT NULL,
  `city` varchar(45) DEFAULT NULL,
  `school_enteryear` int(11) DEFAULT NULL,
  `email` varchar(45) DEFAULT NULL,
  `activestat` varchar(45) DEFAULT NULL,
  `onlinestat` varchar(45) DEFAULT NULL,
  `regtime` datetime NOT NULL,
  `avatar` varchar(45) DEFAULT NULL,
  `status` varchar(45) DEFAULT NULL,
  `desc` varchar(45) DEFAULT NULL,
  `self_comment` varchar(45) DEFAULT NULL,
  PRIMARY KEY (`user_id`),
  UNIQUE KEY `uk_email` (`email`),
  KEY `fk_user_department_id_idx` (`department_id`),
  KEY `fk_user_school_id_idx` (`school_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 AUTO_INCREMENT=1 ;

--
-- TRIGGER `user`
--
DROP TRIGGER IF EXISTS `tg_user_delete`; 
DELIMITER //
CREATE TRIGGER `tg_user_delete` AFTER DELETE ON `user`
 FOR EACH ROW BEGIN
DELETE FROM HOBBY WHERE USER_ID = OLD.USER_ID;
DELETE FROM USER_ALBUM_PHOTO WHERE USER_ID = OLD.USER_ID;
DELETE FROM USER_DIARY WHERE USER_ID = OLD.USER_ID;
DELETE FROM USER_MSG WHERE FROM_ID = OLD.USER_ID OR TO_ID = OLD.USER_ID;
DELETE FROM USER_NOTIFICATION WHERE USER_ID = OLD.USER_ID;
DELETE FROM USER_OP WHERE USER_ID = OLD.USER_ID;
DELETE FROM USER_FEED WHERE USER_ID = OLD.USER_ID;
DELETE FROM USER_RELATION WHERE USER_ID = OLD.USER_ID OR USER2_ID = OLD.USER_ID;
DELETE FROM USER_SPECIAL WHERE USER_ID = OLD.USER_ID;
DELETE FROM USER_STATUS WHERE USER_ID = OLD.USER_ID;
DELETE FROM USER_DIARY_COMMENT WHERE USER_ID = OLD.USER_ID;
DELETE FROM USER_STATUS_COMMENT WHERE USER_ID = OLD.USER_ID;
END
//
DELIMITER ;
DROP TRIGGER IF EXISTS `tg_user_bf_insert`;
DELIMITER //
CREATE TRIGGER `tg_user_bf_insert` BEFORE INSERT ON `user`
 FOR EACH ROW BEGIN
    IF NEW.regtime = '0000-00-00 00:00:00' THEN
        SET NEW.regtime = NOW();
    END IF;
END
//
DELIMITER ;

DROP TRIGGER IF EXISTS `tg_user_insert`;
DELIMITER //
CREATE TRIGGER `tg_user_insert` AFTER INSERT ON `user`
 FOR EACH ROW BEGIN
UPDATE SCHOOL SET NUMBERS_OF_STUDENT=NUMBERS_OF_STUDENT+1
WHERE SCHOOL_ID = NEW.SCHOOL_ID;
INSERT INTO HOBBY(`user_id`) VALUES(NEW.USER_ID);
END
//
DELIMITER ;

DROP TRIGGER IF EXISTS `tg_user_update_school`;
DELIMITER //
CREATE TRIGGER `tg_user_update_school` AFTER UPDATE ON `user`
 FOR EACH ROW BEGIN
UPDATE SCHOOL
SET NUMBERS_OF_STUDENT=NUMBERS_OF_STUDENT-1
WHERE OLD.SCHOOL_ID <> NEW.SCHOOL_ID AND SCHOOL_ID = OLD.SCHOOL_ID;
UPDATE SCHOOL
SET NUMBERS_OF_STUDENT=NUMBERS_OF_STUDENT+1
WHERE OLD.SCHOOL_ID <> NEW.SCHOOL_ID AND SCHOOL_ID = NEW.SCHOOL_ID;
END
//
DELIMITER ; 
```

但是语法错误在哪里？谢谢你！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:48:25.187

我将其发布为答案，因为评论太长了。我刚刚运行了你所有的脚本，错误在于这段代码：

```
DROP TRIGGER IF EXISTS `tg_school_update`; 
DELIMITER //
CREATE TRIGGER `tg_school_update` BEFORE UPDATE ON `school`
 FOR EACH ROW BEGIN
SET NEW.NUMBERS_OF_STUDENT = 0
WHERE NEW.NUMBERS_OF_STUDENT < 0;
END
//
DELIMITER ; 
```

它不喜欢这条线：

```
WHERE NEW.NUMBERS_OF_STUDENT < 0; 
```

如果您删除它，则会创建触发器。所以我的问题是，是否可以负数学生？

或将代码更改为：

```
DELIMITER //
CREATE TRIGGER `tg_school_update` BEFORE UPDATE ON `school`
 FOR EACH ROW BEGIN
SET NEW.NUMBERS_OF_STUDENT = case when NEW.NUMBERS_OF_STUDENT < 0 then 0 else NEW.NUMBERS_OF_STUDENT end;
END
//
DELIMITER ; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:52:31.423

根据我的评论：试试这个而不是你使用的当前代码。

```
SET NEW.NUMBERS_OF_STUDENT = 
( CASE WHEN NEW.NUMBERS_OF_STUDENT < 0 THEN 0 
  ELSE NEW.NUMBERS_OF_STUDENT 
END ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T20:52:45.170

改变这个：

```
SET NEW.NUMBERS_OF_STUDENT = 0
WHERE NEW.NUMBERS_OF_STUDENT < 0; 
```

对此：

```
SET NEW.NUMBERS_OF_STUDENT 
    = GREATEST(NEW.NUMBERS_OF_STUDENT, 0); 
```

你也有一个错误。这一行：

```
IF NEW.NUMBERS_OF_STUDENT = NULL THEN 
```

应该：

```
IF NEW.NUMBERS_OF_STUDENT IS NULL THEN 
```

的比较`column = null`永远不会正确 - 您必须使用特殊`is null`语法来测试是否为空。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-21T20:57:53.980

```
CREATE TRIGGER `tg_school_update` BEFORE UPDATE ON `school`
 FOR EACH ROW BEGIN
   IF NEW.NUMBERS_OF_STUDENT < 0
   THEN SET NEW.NUMBERS_OF_STUDENT = 0;
   END IF;
END; 
```

# python - 来自查询集字典的 Django 模板打印项目

> ID：13996858
> 
> 赞同：1
> 
> 时间：2012-12-21T20:33:04.553
> 
> 标签：python, django, django-templates

我有一个看起来像这样的视图：

```
def CarteleraPeliculaToday(request, slugpelicula):
    city = request.session["ciudad"]
    today = (datetime.utcnow() - timedelta(hours=5)).date()  # date: Ecuador time zone
    pelicula = Pelicula.objects.get(slug=slugpelicula)
    espanol_3d_gtmax = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Espanol", tipo_3d=1, gtmax=1)
    espanol_3d = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Espanol", tipo_3d=1)
    espanol_3d_vip = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Espanol", tipo_3d=1, vip=1)
    espanol_3d_xd = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Espanol", tipo_3d=1, xd=1)
    espanol_gtmax = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Espanol", gtmax=1)
    espanol = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Espanol")
    espanol_vip = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Espanol", vip=1)
    espanol_xd = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Espanol", xd=1)
    subtitulada_3d_gtmax = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Subtitulada", tipo_3d=1, gtmax=1)
    subtitulada_3d = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Subtitulada", tipo_3d=1)
    subtitulada_3d_vip = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Subtitulada", tipo_3d=1, vip=1)
    subtitulada_3d_xd = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Subtitulada", tipo_3d=1, xd=1)
    subtitulada_gtmax = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Subtitulada", gtmax=1)
    subtitulada = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Subtitulada")
    subtitulada_vip = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Subtitulada", vip=1)
    subtitulada_xd = Funcion.objects.filter(fecha_inicio__lte=today, fecha_fin__gte=today, idpelicula__slug=slugpelicula, idciudad=city, visible=1, idioma="Subtitulada", xd=1)

    #Creating a dictionary of all types of funciones querysets
    funciones = {'espanol': espanol, 'subtitulada': subtitulada, 'espanol_3d': espanol_3d, 'subtitulada_3d': subtitulada_3d, 'espanol_3d_gtmax': espanol_3d_gtmax,
'espanol_vip': espanol_vip, 'espanol_xd': espanol_xd, 'subtitulada_3d_gtmax': subtitulada_3d_gtmax,  'subtitulada_3d_vip': subtitulada_3d_vip,  'espanol_3d_vip': espanol_3d_vip, 'espanol_3d_xd': espanol_3d_xd, 'espanol_gtmax': espanol_gtmax,
'subtitulada_3d_xd': subtitulada_3d_xd, 'subtitulada_gtmax': subtitulada_gtmax, 'subtitulada_vip': subtitulada_vip, 'subtitulada_xd': subtitulada_xd}

    #Removing empty element from funciones dictionary
    for x in list(funciones.keys()):
        if not (funciones[x]).exists():
            del funciones[x]
    #import pdb; pdb.set_trace()

    context = {'pelicula': pelicula, 'funciones': funciones}
    return render_to_response('cartelera-pelicula.html', context, context_instance=RequestContext(request)) 
```

我的模板如下所示：

```
{% for key,value in funciones.items %}
            {{key}}
            {% for queryset in value %}
                {% for item in queryset %}
                    {{item}}
                    <br/>
                {% endfor %}
            {% endfor %}
        {% endfor %} 
```

示例（来自 ipdb）：

```
(Pdb) funciones
{'espanol_3d_gtmax': [<Funcion: ted, Funcion #15: Sebas el Genio>], 'espanol_3d_vip': [<Funcion: ted, Funcion #15: Sebas el Genio>], 'espanol_3d_xd': [<Funcion: ted, Funcion #15: Sebas el Genio>], 'espanol_xd': [<Funcion: ted, Funcion #15: Sebas el Genio>], 'espanol_vip': [<Funcion: ted, Funcion #15: Sebas el Genio>], 'espanol_3d': [<Funcion: ted, Funcion #15: Sebas el Genio>], 'espanol': [<Funcion: American Junkie, Funcion #9: Sebas el Genio>, <Funcion: ted, Funcion #15: Sebas el Genio>], 'espanol_gtmax': [<Funcion: ted, Funcion #15: Sebas el Genio>]}
<type 'dict'> 
```

现在访问一个值：

```
funciones['espanol']
[<Funcion: American Junkie, Funcion #9: Sebas el Genio>, <Funcion: ted, Funcion #15: Sebas el Genio>]
type(funciones['espanol'])
<class 'django.db.models.query.QuerySet'> 
```

最后从查询集中访问一个项目：

```
(Pdb) funciones['espanol'][0]
<Funcion: American Junkie, Funcion #9: Sebas el Genio>
type(funciones['espanol'][0])
<class 'core_app.models.Funcion'> 
```

问题是模板抛出了这个错误：

```
'Funcion' object is not iterable
Request Method: GET
Request URL:    //127.0.0.1:8000/cartelera/sebas-el-genio/
Django Version: 1.4.1
Exception Type: TypeError
Exception Value:    
'Funcion' object is not iterable 
```

任何想法，任何人？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:46:14.903

您的 for 循环级别太多了。从第一个 for-loop 'value' 将包含查询集对象。第二个for循环将遍历每个查询集的结果，即'queryset'循环变量将包含函数模型的各个实例。第三个 for-loop 'for item in queryset' 是无关的。

# c# - 在 .txt 中搜索文本

> ID：13996860
> 
> 赞同：3
> 
> 时间：2012-12-21T20:33:16.110
> 
> 标签：c#, search, text

搜索看起来像这样的文本文件的最佳方法是什么..？

> 费用|| 编号| 地址| 姓名 |电话|城市|州|邮编
> abc ||455|gsgd |first last|gsg |fef |jk |0393
> gjgj||jfj|ddg
> |first last|fht |ree |hn |th ...更多行.. .

我首先使用我正在考虑计算“|”的流式阅读器读取文件及其所有上下文 并使用子字符串获取第 5 和第 6 之间的文本，但我不确定如何计算“|”。或者，如果有人有更好的想法，我愿意接受。尝试过这样的事情：

```
StreamReader file = new StreamReader(@"...");
        string line;
        int num=0;
        while ((line = file.ReadLine()) != null)
        {
            for (int i = 1; i <= 6; i++)
            {
                if (line.Contains("|"))
                {
                    num++;
                }
            }
            int start = line.IndexOf("|");

            int end = line.IndexOf("|");
            string result = line.Substring(start, end - start - 1);
        } 
```

我希望我相信的文字总是在第 5 和第 6 个“|”之间

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:38:41.610

你可以这样做：

```
var res = File
    .ReadLines(@"FileName.txt")
    .Select(line => line.Split(new[]{'|'}, StringSplitOptions.None)[5])
    .ToList(); 
```

这会`List<strings>`从文件中生成一个，其中每个字符串是从第五个和第六个`'|'`分隔符之间获取的文件对应行的一部分。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:40:29.117

`Microsoft.VisualBasic.FileIO`对于分隔文件，您应该使用解析器 -命名空间中有一个解析器 -[`TextFieldParser`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.fileio.textfieldparser.aspx)类，但您也可以查看第三方库，如流行的[FileHelpers](http://filehelpers.sourceforge.net/)。

一种更简单的方法是`string.Split`在`|`字符上使用并获取返回的相应索引中的值`string[]`，但是，如果任何字段被转义并且可以在`|`内部有效地包含，这将失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T20:37:09.093

您可以将每一行拆分为一个数组：

```
while ((line = file.ReadLine()) != null)
{
    var values = line.Split('|');
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T20:41:21.003

这应该工作

```
string txt = File.ReadAllText("file.txt");
string res = Regex.Match(txt, "\\|*?{5}(.+?)\\|", RegexOptions.Singleline).Result("$1"); 
```

# php - 需要帮助了解产品页面的 productAttribute() 方法

> ID：13996861
> 
> 赞同：16
> 
> 时间：2012-12-21T20:33:19.550
> 
> 标签：php, magento, methods, helper

我需要帮助来熟悉助手、他们的方法和产品属性。具体来说：`$_helper->productAttribute($product, $attributeHtml, $attributeName)`

以下是我正在使用/查看的文件：

```
app\code\core\Mage\catalog\helper\output.php  
app\design\frontend\[theme name]\template\catalog\product\view\media.phtml 
```

以下代码行为产品图片生成 html。

```
echo $_helper->productAttribute($_product, $_img, 'image'); 
```

帮助程序类代码在以下代码段中描述了该方法。返回什么，步骤是什么，为什么我要使用这种方法而不是简单地回显模板文件前一行中描述的 img html？

```
public function getHandlers($method)
{
    $method = strtolower($method);
    return isset($this->_handlers[$method]) ? $this->_handlers[$method] : array();
}

public function process($method, $result, $params)
{
    foreach ($this->getHandlers($method) as $handler) {
        if (method_exists($handler, $method)) {
            $result = $handler->$method($this, $result, $params);
        }
    }
    return $result;
}

public function productAttribute($product, $attributeHtml, $attributeName)
{
    /* Code that is not relevant to this example */

    $attributeHtml = $this->process('productAttribute', $attributeHtml, array(
        'product'   => $product,
        'attribute' => $attributeName
    ));

    return $attributeHtml;
} 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-22T17:02:54.863

非常好的问题！

所以实际上有点关于这个助手的目的。从它的名字你已经可以断定它是用来输出数据的。方法名称也是不言自明的，它只是输出产品属性值取决于处理程序。目前有两种方法，`productAttribute()`一种是用于输出产品属性值`categoryAttribute()`，一种是用于分类。类别和产品的核心模板中的所有数据都是通过这种方法输出的（价格属性除外），据我记得它是在 1.4.x 版本之一中添加的，但不确定。主要思想是使过滤属性数据成为可能。例如，您可以`{{widget ... }}`在类别描述中使用构造，它是通过特殊方法实现的。

这两种方法实际上执行相同的功能，但针对不同的实体。他们俩都收到 3 个参数：

*   实体（类别或产品，取决于方法名称）
*   属性值 - 被过滤的值
*   属性代码 - 用于检索属性模型的代码

首先在这个方法中，Magento 检查值中 html 标记的允许，如果没有，它使用`escapeHtml()`方法转义文本。此外，如果属性在管理员中有一个文本区域作为输入，则所有换行符都将替换为`<br />`标记。

如果允许使用 html，Magento 会检查是否允许`{{widget ...}}`在配置中使用特殊结构（此结构的正式名称是指令）。如果允许使用指令，则将实例化特殊指令处理器并处理值。

完成所有核心处理后，Magento 调用处理程序。

此处理程序是核心模块不使用的附加功能，但您可以使用自己的自定义来实现一些不错的自定义。这是示例：您希望将产品名称的所有输出都设为大写。然后您可以添加自己的处理程序，为此请遵循以下简单步骤：

1.  定义观察者`catalog_helper_output_construct`

    ```
    <config>
       <frontend>
           <events>
               <catalog_helper_output_construct>
                   <observers>
                        <your_module>
                            <class>your_module/observer</class>
                            <method>handleHelperOutputInitialization</method>
                        </your_module>
                   </observers>
               </catalog_helper_output_construct>
           </events>
       </frontend>
    </config> 
    ```

2.  创建你的观察者类，我也将它作为处理程序。代码非常简单：

    ```
    class Your_Module_Model_Observer 
    {
        public function handleHelperOutputInitialization($observer) 
        {
            $helper = $observer->getEvent()->getHelper();
            $helper->addHandler('productAttribute', $this);
        }

       public function productAttribute($helper, $value, $parameters) 
       {
            $attribute = $parameters['attribute'];
            if ($attribute->getAttributeCode() == 'name') {
               return strtoupper($value);
            }
            return $value;
       }
    } 
    ```

3.  确保处理程序类中的方法名称与值处理器的方法名称完全相同，在本例中为`productAttribute()`.

享受学习 Magento！

# asp.net - 如何自定义 loggingConfiguration 的格式化程序？

> ID：13996863
> 
> 赞同：1
> 
> 时间：2012-12-21T20:33:31.687
> 
> 标签：asp.net, logging, exception-handling, enterprise-library

我是 EnterpriseLibrary.Logging 的新手。在 web.config 中，在 loggingConfiguration 下，我们有以下格式化程序：

```
<formatters>
    <add name="Default Formatter" template="&#xA;Timestamp: {timestamp(local)}&#xA;&#xA;Message: {message}&#xA;&#xA;Category: {category}&#xA;&#xA;Priority: {priority}&#xA;&#xA;EventId: {eventid}&#xA;&#xA;Severity: {severity}&#xA;&#xA;Title:{title}&#xA;&#xA;Machine: {machine}&#xA;&#xA;Application Domain: {appDomain}&#xA;&#xA;Process Id: {processId}&#xA;&#xA;Process Name: {processName}&#xA;&#xA;Win32 Thread Id: {win32ThreadId}&#xA;&#xA;Thread Name: {threadName}&#xA;&#xA;User Name: {userName}&#xA;&#xA; extended Properties: {dictionary({key} - {value}&#xA;)}" 
             type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
    <add name="DBA Formatter" template="&#xA;Timestamp: {timestamp(local)}&#xA;&#xA;Message: {message}&#xA;&#xA;Category: {category}&#xA;&#xA;Priority: {priority}&#xA;&#xA;EventId: {eventid}&#xA;&#xA;Severity: {severity}&#xA;&#xA;Title:{title}&#xA;&#xA;Machine: {machine}&#xA;&#xA;Extended Properties: {dictionary({key} - {value}&#xA;)}" 
             type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=4.1.0.0, Culture=neutral, PublicKeyToken=31bf3856ad364e35"/>
</formatters> 
```

在后面的代码中，我们只将消息设置为 LogEntry。我想知道其他参数是如何设置的，例如时间戳、类别、优先级等。我添加了用户名，但不起作用。任何人都可以对我有所了解吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T20:59:22.917

这是有关这些参数的 Microsoft 文章： [配置格式化程序](http://msdn.microsoft.com/en-us/library/ff664562%28v=pandp.50%29.aspx)。它讨论了您可以在格式化程序中插入的各种标记。

“用户名”不是预定义的标记之一。但是您可以（可能）使用 LogEntry 的 ExtendedProperties 属性来解决这个问题：

```
 LogEntry le = new LogEntry();
 le.ExtendedProperties.Add("username", "jsmith"); 
```

# android - 自定义 ActionBar 中的按钮

> ID：13996867
> 
> 赞同：0
> 
> 时间：2012-12-21T20:33:50.400
> 
> 标签：android, button, android-actionbar

在我的应用程序中间有一个按钮`ActionBar`。我通过实现 custom 来做到这一点`ActionBar`。这很容易，但问题是普通`ActionBar Buttons`有它们自己的好属性，例如当你长按它们时，它们会敬酒它们的名字等。

如何实现我的自定义按钮并仍然具有这些属性`ActionBar Items`？甚至可能吗？

谢谢你。

# visual-c++ - 将工具栏添加到 CDialog 窗口

> ID：13996875
> 
> 赞同：4
> 
> 时间：2012-12-21T20:34:45.773
> 
> 标签：visual-c++, mfc

我创建了一个 SDI 应用程序并创建了一个对话窗口。我想在该对话框中添加一个工具栏，所以我这样编码：

```
int CAddNewEmployee::OnCreate(LPCREATESTRUCT lpCreateStruct)
{
    if (CDialog::OnCreate(lpCreateStruct) == -1)
      return -1;

   CToolBar cToolBar;
   cToolBar.Create(this);
   cToolBar.LoadToolBar(IDR_MAINFRAME1);
   cToolBar.ShowWindow(SW_SHOW);
   cToolBar.SetBarStyle(CBRS_ALIGN_TOP | CBRS_TOOLTIPS | CBRS_FLYBY);
   RepositionBars(AFX_IDW_CONTROLBAR_FIRST, AFX_IDW_CONTROLBAR_LAST, 0);

   return 0; 
```

}

但是当我运行应用程序时没有任何反应，没有显示工具栏。我不知道代码是否正确以及如何显示。

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T21:12:21.570

您的工具栏在函数结束时被销毁，因为您将其设置为局部变量。改为使其成为成员变量。

参考： [如何在 MFC 中给对话框添加控制栏](http://support.microsoft.com/kb/141751)

# magento - 当产品在 Magento 中共享通用目录时，将产品限制在特定商店

> ID：13996877
> 
> 赞同：1
> 
> 时间：2012-12-21T20:34:50.950
> 
> 标签：magento

我正在尝试使用一个网站和三个不同的商店以及每个商店的一个商店视图来设置 magento，并且我们有所有商店共享的通用目录。但问题是我有一些产品应该只在特定商店和休息 api 调用中可见。这可以在magento中开箱即用吗？如果是这样，请指出我正确的方向。如果不是，我需要做什么定制？

谢谢，桑迪普

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T21:40:30.640

无需为此进行自定义。您可以将产品管理到特定的网站/商店/视图或任何一种产品到产品管理区域中的多个商店

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T09:35:49.893

获得此功能的一种外行方法是为不同的商店创建不同的根类别。

1.  首先：创建单独的根类别并创建与您已经使用的类别同名的子类别。
2.  第二：进入系统->管理商店，将创建的不同根类别分配给不同的商店。
3.  第三：将产品添加到不同商店的那些根类别下的类别中。

这样，您的类别结构保持不变，您可以设法在您选择的商店中展示您的产品。

# php - 在每个新行的末尾添加文本

> ID：13996884
> 
> 赞同：2
> 
> 时间：2012-12-21T20:35:15.570
> 
> 标签：php, html, newline, jtextarea

我试图在文本块中每个新行的末尾显示一个休息时间。然后我回显该块并需要它`<br />`在每行的末尾实际说“”，因为我正在制作一个代码生成器，它将被复制并粘贴到另一个 html 页面中，所以我需要它实际上说“ `<br />`”。我尝试使用添加中断的 nl2br 函数，但它被浏览器注册，而不是打印。

所以这就是流程的样子。有人将此文本输入到多行输入中：

```
This is an example
This is an example
This is an example
This is an example 
```

提交后，php 会告诉我这个：

```
This is an example<br />
This is an example<br />
This is an example<br />
This is an example<br /> 
```

有没有可以做到这一点的功能？（回声？（$posted_info）；）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:41:11.637

您应该使用 PHP[的 nl2br()](http://php.net/function.nl2br.php)函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:41:21.833

如果要显示实际的 html，则需要像这样使用[htmlentities()](http://php.net/manual/en/function.htmlentities.php)：

`echo htmlentities(nl2br("This is an example \r\n"));`

这会将其转换为：

`This is an example&lt;br /&gt;`

浏览器上可见的输出将是：

`This is an example<br />`

在你的情况下使用这个：

`echo htmlentities(nl2br($posted_info));`

# sql-server - ALTER TABLE 语句中复合聚集索引的列顺序

> ID：13996886
> 
> 赞同：1
> 
> 时间：2012-12-21T20:35:20.467
> 
> 标签：sql-server, tsql

我需要将复合主键（2 列）添加到已经存在的表中。该键也将是聚集索引，因此列的顺序很重要。

我正在使用以下脚本：

```
ALTER TABLE [Table] 
  ADD CONSTRAINT [PK_Table] 
  PRIMARY KEY CLUSTERED ([Col1] ASC, [Col2] ASC) 
```

我需要`Col1`成为聚集索引的第一列，然后是`Col2`.

我的问题是这个脚本是否会这样做（或者我是否需要以某种方式明确设置顺序？）。

欣赏它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:43:12.453

该 T-SQL 语句正在执行您所说的所需。

列的顺序是您在 T-SQL 语句中写下它们的顺序——没有必要也没有任何方式来指定它们的顺序。

您的 T-SQL 语句将`Col1`首先创建一个聚集索引，然后是`Col2`- 就像您希望的那样。

# c# - Tapi3Lib 在运行时添加新行

> ID：13996889
> 
> 赞同：0
> 
> 时间：2012-12-21T20:35:32.837
> 
> 标签：c#, com-interop, tapi

我在使用 interop.tapi3lib.dll 时遇到了一些问题（这里可以是 DL：[dllLink](http://www.topdll.com/download/dll/?q=41390cad6b219794103c0eef82a10ed3)）

对于我正在编写的报告程序，我想监视tapi 可用的所有设备以进行呼叫。现在，当我启动程序时，它运行良好，尽管我怀疑 dll 是为了修改单个扩展上的调用而编写的，用很少的代码我可以完美地看到所有活动。

当用户注销（或登录）电话（我将其用于 cisco Callmanager）时，就会出现问题。那时我能够捕获tapi_object，它又可用于确定删除和添加哪一行（旧号码和新号码），但我无法注册新地址以发送事件。

我尝试时的异常：

> 值不在预期范围内。

*   因为我怀疑在这个地址可用之前创建了tapiclass。

目前我已经做了一个测试，它为每条线路创建一个单独的 Tapiclass，并为监控 Tapiobject 事件创建一个 Tapiclass，但这占用了我们公司配置（20 部手机）内存的 10 倍，所以我什至不想测试这个在目标站点（+300 电话）。另一种选择（我能想到的）是处理“旧”tapiclass并在之后创建一个新的，但是我有点担心在多个用户登录/ out（使用我的程序创建课程需要几秒钟）

所以，我真正想要的是选择

```
tapi.RegisterCallNotifications(ad, true, true, TAPI3Lib.TapiConstants.TAPIMEDIATYPE_AUDIO, 2); 
```

对于新可用的线路。

一些背景知识:) -我对 C# 相当陌生，对 COM-interop 完全陌生，而且我知道 C++ 的原理，但我从未在其中写过任何东西。

任何帮助将不胜感激。（还有关于互操作等的任何评论）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-24T10:07:51.257

嗯，原来我错了。添加通知行是可能的，并且不会引发异常。我想我在旧样本中添加新行之前没有删除旧行。

# hibernate - 在基于 Spring 的 Web 应用程序中将用户数据存储在缓存/会话中

> ID：13996892
> 
> 赞同：0
> 
> 时间：2012-12-21T20:35:51.677
> 
> 标签：hibernate, session, caching, web-applications, spring-mvc

在我的项目中，我们为用户提供搜索功能。用户可以在 2 打搜索参数中设置值。在搜索时，我们获取搜索结果并将搜索参数（由用户选择）存储在数据库中（这会导致严重的性能问题） ，这样下次用户来搜索页面时，他之前的搜索参数就会在页面加载时加载。

我想将搜索参数存储在会话或缓存中（在整个用户会话期间），当用户注销时将它们提交到数据库，而不是在每次搜索时提交到数据库。当用户进入搜索页面时，DAO 检查搜索参数的值首先在缓存/会话中，然后尝试从数据库中获取。任何人都可以为这个问题提出任何解决方案使用的技术 - Spring 3+ Hibernate 3.6 + Tomcat 6 + EHCache +JSP

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T01:24:37.750

看看[Spring EhCache](http://ehcache.org/documentation/recipes/spring-annotations)项目。它基本上缓存给定某个（一组）方法签名值的方法的返回值。有很多警告，例如类必须实现接口和方法 args 应该是原语、字符串或可序列化的类（至少实现哈希码）。

获取 ehcache.xml conf 文件一开始可能会很棘手，因为您确实需要阅读文档。但是一旦设置好，实施起来就非常简单，而且速度很快。

因此，您需要编写方法：从 UI 填充搜索参数，返回它们的方法（缓存），另一种方法将其存储在数据库中，然后使缓存无效/清除。

# ruby-on-rails - 验证嵌套属性错误消息 en.yml 文件

> ID：13996895
> 
> 赞同：1
> 
> 时间：2012-12-21T20:36:14.130
> 
> 标签：ruby-on-rails, ruby-on-rails-3, validation, yaml

我正在自定义我的验证错误消息并且验证我的配方模型没有问题，但我无法验证我的嵌套模型成分。

```
class Recipe < ActiveRecord::Base
  has_many :ingredients

  accepts_nested_attributes_for :ingredients, :preperations

class Ingredient < ActiveRecord::Base
  belongs_to :recipe 
```

这是我的 YAML 文件：

```
 en:
      errors:
        format: "%{message}"

         activerecord:
           errors:
             models: 
               recipe: 
                attributes:
                 dish_name:
                  blank: "Dont forget to give your Recipe a Dish Name"
                 country:
                  blank: "Dont forget to add the country name"
                 category:
                  blank: "Dont forget the category"
                 difficulty:
                  blank: "Dont forget to add the difficulty"
                 preperation_time:
                  blank: "Dont forget the preperation time"
              recipe/ingredients:
                attributes:
                 ingredient_name:
                 blank: "Cant have a recipe without ingredients can we?" 
```

如何设置嵌套模型的验证？

任何帮助表示赞赏，谢谢。

编辑

我正在使用 rails 3.2.3 并且由于某种原因：在食谱/配料的末尾是白色而不是紫色，就像我的其余部分一样：

# c++ - 有没有办法在 C++ 中扫描 txt 文件中的单词或名称？

> ID：13996897
> 
> 赞同：-1
> 
> 时间：2012-12-21T20:36:22.760
> 
> 标签：c++, text-files

所以我试图在游戏开始时进行登录，并且我已经对名称和密码的注册进行了编程。但是有没有办法扫描文件以查找其中一个用户名？

：） 先感谢您。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-21T20:42:11.253

C++ 中有“在文件中查找单词”：

```
typedef std::istream_iterator<std::string> InIt;

if (std::find(InIt(std::ifstream("file.txt") >> std::skipws), InIt(), word) != InIt())
{
    std::cout << "the word '" << word << "' was found in 'file.txt'\n";
} 
```

为此，`word`需要用空格分隔：`std::istream_iterator<std::string>`该类`std::string`从构造它的流中读取类型的对象，并提供对相应序列的迭代器访问。默认构造`std::istream_iterator<std::string>()`用于指示序列的结束。`std::find()`在上述情况下，它只是在序列中查找与其最后一个参数匹配的对象的标准算法之一`word`。

代码有点奇怪的是`std::ifstream`对象的使用：由于结果只是一个布尔表达式，`std::ifstream`所以使用了一个临时的。由于构造函数`tsd::istream_iterator<std::string>`接受一个`std::istream&`作为构造函数参数并且临时不能绑定到非`const`引用，因此插入了一个操纵器（ ）：此操作除了返回对临时`std::skipws`的非引用之外没有任何作用。`const``std::ifstream`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T20:37:48.973

不是“在文件中查找单词”功能，不。您必须打开、读取文件并扫描已读取文件的每个部分（例如行、块）中的单词，然后关闭文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-21T20:39:54.383

以文本模式打开文件并逐行读取。对于每一行，扫描它以查找您要查找的单词。

就是这样。我知道没有一个函数可以调用来执行此操作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T20:52:33.207

```
$ cat names.txt 
user1
user2
user3

$ cat c.cc

#include <iostream>
#include <fstream>
#include <string>
#include <cstring>

using namespace std;

int main ()
{
    string STRING;
    const char *USERNAME = "user1";
    ifstream infile;
    infile.open ("names.txt");
    while(!infile.eof())
    {
        getline(infile,STRING); 
        if (strcmp(USERNAME,  STRING.c_str()) == 0) 
                cout<<STRING;
    }
    infile.close();
    return 0;
}

$ ./c
user1 
```

如果你想让这些行成为，请使用 strncmp

```
username1 password1
username2 password2 
```

# c# - 使用 c# 或 win32 api 检测窗口何时更新

> ID：13996901
> 
> 赞同：0
> 
> 时间：2012-12-21T20:36:55.443
> 
> 标签：c#, winapi

我正在使用`FindWindow`, 并通过C#`SetForegroundWindow`从`Win32 API`内部使用。`pinvoke`该窗口是一个带有滚动文本的屏幕，随机更新，我希望能够检测到特定窗口何时更新。我是 C# 的新手，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:02:41.077

`GetWindowText`如果它是您尝试监视更改的特定控件，则可以使用来自 User32 的控件。

[http://msdn.microsoft.com/en-us/library/windows/desktop/ms633520(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633520(v=vs.85).aspx)

另一种方法是截取窗口的屏幕截图，并将最后一张图像与当前图像进行比较以检测变化。

[捕获活动窗口的屏幕截图？](https://stackoverflow.com/questions/1163761/c-sharp-capture-screenshot-of-active-window)

# python - 搁置，Python，更新字典

> ID：13996907
> 
> 赞同：2
> 
> 时间：2012-12-21T20:37:36.983
> 
> 标签：python, dictionary, shelve

我正在使用 Python 中的 Shelve，但遇到了一个问题：

```
In [391]: x
Out[391]: {'broken': {'position': 25, 'page': 1, 'letter': 'a'}}

In [392]: x['broken'].update({'page':1,'position':25,'letter':'b'})

In [393]: x
Out[393]: {'broken': {'position': 25, 'page': 1, 'letter': 'a'}} 
```

不明白为什么不更新？有什么想法吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-12-21T20:41:41.287

这在[文档](http://docs.python.org/2/library/shelve.html)中有所介绍。基本上，关键字参数`writeback`to`shelve.open`负责：

> 如果可选`writeback`参数设置为`True`，则所有访问的条目也都缓存在内存中，并写回`sync()`and `close()`；这可以更方便地改变持久字典中的可变条目，但是，如果访问了许多条目，它会消耗大量内存用于缓存，并且由于所有访问的条目都被写回，它会使关闭操作非常慢（无法确定哪些访问的条目是可变的，也无法确定哪些条目实际上是突变的）。

来自同一页面的示例：

```
d = shelve.open(filename) # open -- file may get suffix added by low-level
                          # library
# as d was opened WITHOUT writeback=True, beware:
d['xx'] = range(4)  # this works as expected, but...
d['xx'].append(5)   # *this doesn't!* -- d['xx'] is STILL range(4)!

# having opened d without writeback=True, you need to code carefully:
temp = d['xx']      # extracts the copy
temp.append(5)      # mutates the copy
d['xx'] = temp      # stores the copy right back, to persist it

# or, d=shelve.open(filename,writeback=True) would let you just code
# d['xx'].append(5) and have it work as expected, BUT it would also
# consume more memory and make the d.close() operation slower.
d.close()       # close it 
```

# mysql - SHOW GRANTS 显示没有为用户定义此类授权

> ID：13996915
> 
> 赞同：3
> 
> 时间：2012-12-21T20:38:26.460
> 
> 标签：mysql

我有一个用户正在运行我的 MySQL 数据库。我想通过执行以下命令来查看用户拥有的权限：

```
SHOW GRANTS FOR 'myuser'@'localhost'; 
```

我得到了

```
ERROR 1141 (42000): There is no such grant defined for user 'myuser' on host 'localhost' 
```

我不应该看到那个用户的一些权限，因为它目前被用来读/写>

*编辑：*当我运行以下查询以查看与用户关联的主机名时，它`%`作为主机返回。

```
select host from mysql.user where user = 'myuser'; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-21T20:54:56.517

主机名`%`是通配符，表示任何主机。因此，要查看他的赠款，请执行以下操作：

```
SHOW GRANTS FOR 'myuser'@'%'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:50:28.157

要查看当前登录用户的权限，只需[`SHOW GRANTS`](http://dev.mysql.com/doc/refman/5.5/en/show-grants.html)

要查找用于用户运行的主机和通配符`select Host from mysql.user where User = 'myuser';`，然后使用该主机（和用户）运行`SHOW GRANTS FOR myuser@<host>`

# windows - 将 PHP + Libpuzzle 编译到 Windows

> ID：13996916
> 
> 赞同：4
> 
> 时间：2012-12-21T20:38:26.790
> 
> 标签：windows, compilation, mingw

我在这里得到了 libpuzzle 源：[http](http://www.pureftpd.org/project/libpuzzle/download) ://www.pureftpd.org/project/libpuzzle/download 。

我读到我需要 MinGW 来编译 Windows 上的任何 C 程序，所以我用 C、C++ 和 mins 选项得到了很多。使用分钟我被跟踪：[http ://wiki.openttd.org/Compiling_on_MinGW](http://wiki.openttd.org/Compiling_on_MinGW)

我下载了 .tar.gz 并解压，执行 ./configure 命令并得到：

`libgd2 development files are not found`

自述文件中给出的有意义：

```
In order to load images, the library relies on the GD2 library.
You need to install gdlib2 and its development headers before compiling
libpuzzle.
The GD2 library is available as a pre-built package for most operating systems.
Debian and Ubuntu users should install the "libgd2-dev" or the "libgd2-xpm-dev"
package.
Gentoo users should install "media-libs/gd".
OpenBSD, NetBSD and DragonflyBSD users should install the "gd" package.
MacPorts users should install the "gd2" package.
X11 support is not required for the Puzzle library.

Once GD2 has been installed, configure the Puzzle library as usual: 
```

我此时的问题是找到一个 libgd2-dev 或类似的文件来编译。我发现了这个： http: [//mldonkey.sourceforge.net/Windows](http://mldonkey.sourceforge.net/Windows)并下载了[http://www.boutell.com/gd/http/gd-2.0.33.tar.gz](http://www.boutell.com/gd/http/gd-2.0.33.tar.gz)并且安装得很好。跑步`gdlib-config`输出典型的男人。但是，libpuzzle 仍然说我需要“libgd2 开发文件”，所以我假设我下载的 gd 是“libgd”但只是“gd”或者我没有开发文件的文件。我在哪里可以找到我需要的东西？

这是 mingw 输出：

```
Brian@2500K ~/libpuzzle-0.11
$ gdlib-config
Print information on GD library's version, configuration, and use.
Usage: gdlib-config [options]
Options:
        --libdir          # directory where GD library is installed
        --includedir      # directory where GD library headers are installed
        --version         # complete GD library version string
        --majorversion    # GD library major version number
        --minorversion    # GD library minor version number
        --revision        # GD library revision version number
        --ldflags         # options required for linking against GD library
        --libs            # libs required for linking against GD library
        --cflags          # options required for compiling GD library apps
        --includes        # same as --cflags
        --features        # lists optional features compiled into gd, separated
                          # by spaces. Currently (as of 2.0.26) the optional
                          # features are GD_PNG, GD_JPEG, GD_XPM, and
                          # GD_FREETYPE. When these features are reported by
                          # --features, it is safe to include calls to the
                          # related functions in your code.
        --all             # print a summary of all GD library configure options

Brian@2500K ~/libpuzzle-0.11
$ gdlib-config --includedir
/usr/local/include

Brian@2500K ~/libpuzzle-0.11
$ ./configure
checking for a BSD-compatible install... /bin/install -c
checking whether build environment is sane... yes
checking for a thread-safe mkdir -p... /bin/mkdir -p
checking for gawk... gawk
checking whether make sets $(MAKE)... yes
checking whether to enable maintainer-specific portions of Makefiles... no
checking for g++... g++
checking whether the C++ compiler works... yes
checking for C++ compiler default output file name... a.exe
checking for suffix of executables... .exe
checking whether we are cross compiling... no
checking for suffix of object files... o
checking whether we are using the GNU C++ compiler... yes
checking whether g++ accepts -g... yes
checking for style of include used by make... GNU
checking dependency style of g++... gcc3
checking for gcc... gcc
checking whether we are using the GNU C compiler... yes
checking whether gcc accepts -g... yes
checking for gcc option to accept ISO C89... none needed
checking dependency style of gcc... gcc3
checking how to run the C preprocessor... gcc -E
checking whether ln -s works... no, using cp -p
checking whether make sets $(MAKE)... (cached) yes
checking for gdlib-config... /usr/local/bin/gdlib-config
checking for gdImageCreateFromGd2 in -lgd... no
configure: error: libgd2 development files not found 
```

编辑：开始赏金。我正在寻找为我编译 libpuzzle 以便它在 WAMP 上工作（跳过复杂的中间内容）。或帮助获得所需的每个要求，以便我可以编译它。我的最终目标是让 libpuzzle 在 wamp 上运行

编辑 2：只是一个更新，似乎 libgd2 与 mingw 有问题。即使我要让 libgd2 最终工作，那么我仍然需要 phpize 用于 mingw，这也不适用于 mingw。似乎无法在 Windows 上使用 libpuzzle

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-31T17:04:02.673

听起来该程序只是没有找到 libgd 的标头。如果您查看该 tarbar，它是一个包含标头的源 tarball。当您编译并安装它时，它会在某处安装库和头文件。你需要弄清楚在哪里。

运行 ./configure --help

应该有一个像 --with-gd= 这样的选项，该选项可以让你告诉它安装 libgd 的路径。指定它的安装路径，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-31T22:15:59.563

自己编译GD2时遇到同样的错误。

使用 GnuWin32 的旧预编译版本解决了这个问题：http:
[//sourceforge.net/projects/gnuwin32/files/gd/2.0.33-1/](http://sourceforge.net/projects/gnuwin32/files/gd/2.0.33-1/)

# xml - 如何从大型 xml 文件中为每个单独的页面输出单独的 pdf/tiff 文件？

> ID：13996917
> 
> 赞同：1
> 
> 时间：2012-12-21T20:38:30.953
> 
> 标签：xml, xslt, xsl-fo

我正在使用 xsl-fo 生成 pdf/tiff 文件。我想从一个大的 xml 文件中为每个单独的页面输出单独的 pdf/tiff 文件。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T11:22:10.170

我将使用 fop 为 xml 文件中的每个项目创建一个带有单独页面的 pdf，然后使用拆分工具将其分解为单独的文档。

查看此问题以获取有关如何将其拆分的信息：[Split multi page PDF file into single pages](https://stackoverflow.com/questions/12744616/split-multi-page-pdf-file-into-single-pages)

# xml - 将 XSLT 中的字符串传递给 XML 模板

> ID：13996924
> 
> 赞同：1
> 
> 时间：2012-12-21T20:39:07.393
> 
> 标签：xml, xslt, parameter-passing, param

我有一个 XSLT。它调用一个返回字符串的函数。像这样：

```
<xsl:param name="mystr" select="myStrfunc()"></xsl:param> 
```

它还像这样调用 XML 模板：

```
 <li>
<xsl:call-template name="myLinks">
<xsl:with-param name="link" select="$links/link[@Id='link1']" />
<xsl:with-param name="mystr"/>
</li> 
```

xml 模板片段如下所示：

```
 <link Id="link1">
     <a href="" text="click" />
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
how can I access the parameter mystr declared in xslt here??
    </link> 
```

如何访问 xml 文件中的参数 mystr？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T21:17:48.307

> ```
> <li>
>   <xsl:call-template name="myLinks">
>     <xsl:with-param name="link" select="$links/link[@Id='link1']" />
>     <xsl:with-param name="mystr"/>
> </li> 
> ```

这是格式错误的 XML - 元素`xsl:call-template`未关闭。

很可能你想要：

```
<li>
 <xsl:call-template name="myLinks">
   <xsl:with-param name="link" select="$links/link[@Id='link1']" />
   <xsl:with-param name="mystr"/>
 </xsl:call-template/>
</li> 
```

这会调用名为的模板`"myLinks"`并向其传递两个参数，named:`"link"`和`"mystr"`.

但是，没有`select`为参数定义值（在属性中或元素主体中）`"mystr"`。

如果你想为参数提供一个值——例如执行一个函数的结果，可以这样做：

```
<li>
 <xsl:call-template name="myLinks">
   <xsl:with-param name="link" select="$links/link[@Id='link1']" />
   <xsl:with-param name="mystr" select="myStrfunc()"/>
 </xsl:call-template/>
</li> 
```

然后在被调用模板的主体中，可以通过引用它来访问参数的值：

```
<link Id="link1">
 <a href="" text="click" />
 <xsl:value-of select="$mystr"/>
</link> 
```

**或者，如果您需要使用`$mystr`来生成`href`属性的值，那么请执行以下操作：**

```
<link Id="link1">
 <a href="{$mystr}" text="click" />
</link> 
```

# sql - 在 SQL Server 2008 R2 中使用 xcode 和更新信息的代码示例

> ID：13996925
> 
> 赞同：1
> 
> 时间：2012-12-21T20:39:11.637
> 
> 标签：sql, sql-server, xcode

我正在努力让几个同事的生活更轻松，当然还有我！。我们需要更新一个控制我们的发票功能的数据库。该数据库位于 SQL Server 2008 R2 中。我需要为用户提供一种方式（基于他们的功能）来输入影响发票的信息。例如，John 与客户进行了互动，并在周一向他们发送了一份 pdf 文档。我们需要捕捉到 John 在周一向客户 A 发送了一个与 Project 123 相关联的 pdf。同时，Ann 正在为客户 A 但在 Project 126 上进行颜色校正。我有超过 50 人在各个领域工作，他们可能会或可能会无需输入信息。我希望使应用程序足够通用，用户只需从绑定到原始数​​据库的下拉菜单中进行选择。

大多数用户 (80%) 使用 Mac OS。我已经下载了 XCode，我希望使用它来创建将更新后端数据库的应用程序。

我是创建这种类型的应用程序的新手。我已经用 VB 和 VBA 完成了这项工作，但在这里无法使用这些工具。因此，如果我应该采取另一种策略，我非常愿意重新考虑我的方法。

关键是我需要从 SQL 2008 数据库中提取信息并对其进行更新。其次，我不能使用 Excel 之类的东西作为前端，因为我将有多个用户同时访问信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-22T01:42:02.850

您不太可能找到很多将 Mac 应用程序直接连接到 SQL Server 的示例，因为这种组合很少见。Mac 与 Windows PC 不同，在企业环境中不经常使用，因此支持企业开发的软件生态系统要弱得多。

如果你有勇气的话，那里有供应商销售适用于 Mac OS X 的 ODBC 驱动程序，其中一些连接到 SQL Server。因此，您的问题变成了查找 Mac ODBC 示例，恕我直言，这是一个更容易的问题。谷歌“mac os x odbc 驱动程序”。我没有尝试过任何一个，所以我不能谈论他们的质量。

这将是很多工作，特别是因为您是该平台的新手。您可能需要考虑将数据库公开为 OData 源（服务器端技术的名称是“WCF 数据服务”）。有适用于 Mac 的 OData 客户端库。谷歌“mac os x odata”。这种方法完全绕过了 ODBC 驱动程序的业务，代价是一些服务器端开发。

# python - 如何将字段参数传递到谷歌驱动器 python API 调用中

> ID：13996927
> 
> 赞同：5
> 
> 时间：2012-12-21T20:39:33.747
> 
> 标签：python, google-drive-api

我有：

```
results = drive_service.files().list(**body).execute() 
```

在哪里：

```
body = {
    'q': query_string,
    'maxResults': 1,
} 
```

为了提高性能，我想限制返回的字段，如下所述：[https ://developers.google.com/drive/performance#partial-response](https://developers.google.com/drive/performance#partial-response)

如果我只是添加`'fields': 'id,items,title,mimeType'`到`body`我得到一个错误。我不确定如何添加该限制？

有点相关，python api会自动gzip请求吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-21T21:09:39.193

API v2：

```
results = drive_service.files().list(fields='items(id,mimeType,title)', **body).execute() 
```

您可以使用 API Explorer 轻松找出字段值的外观：

[https://developers.google.com/apis-explorer/#p/drive/v2/drive.files.list](https://developers.google.com/apis-explorer/#p/drive/v2/drive.files.list)

API v3：

```
results = drive_service.files().list(fields='files(id,mimeType,name)', **body).execute() 
```

[https://developers.google.com/apis-explorer/#p/drive/v3/drive.files.list](https://developers.google.com/apis-explorer/#p/drive/v3/drive.files.list)

是的，请求会自动压缩。您可以打开 http 流量记录来确认。看：

[https://developers.google.com/api-client-library/python/guide/logging](https://developers.google.com/api-client-library/python/guide/logging)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T02:42:31.733

尝试

```
body = {
    'q': query_string,
    'maxResults': 1,
    'fields': 'items/id, items/title, items/mimeType',
} 
```

或者

```
body = {
    'q': query_string,
    'fields': 'items(id,title,mimeType),nextPageToken',  # if you need to get full result
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-01-30T12:22:36.457

我有类似的问题，问题出在 api 版本中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-05-24T14:46:59.373

Drive API v3 已经到来：

`https://developers.google.com/apis-explorer/#p/drive/v3/drive.permissions.list?fileId=<your_file_id>&fields=permissions&_h=1&`

字段名称现在是`permissions`

# c# - LINQ 表达式：如何获得最新的结果？

> ID：13996928
> 
> 赞同：1
> 
> 时间：2012-12-21T20:39:38.810
> 
> 标签：c#, linq

我有一张表格，记录了我们公司客户名单上发生的所有事情。这是它的样子：

```
Company CompanyType Change_Dt   Chng_Type
Apple   Large      12/12/2012   A
Dell    Large      12/01/2012   A
Adobe   Mid        06/12/2012   A
Dell    Large      11/01/2012   D
eBay    Small      11/02/2012   A
Apple   Large      10/29/2012   D
Dell    Large      10/20/2012   A
eBay    Small      10/02/2012   D
3M      Small      09/02/2012   D
Adobe   Mid        05/30/2012   D 
```

问题是有很多 CompanyTypes，我只想保留一份最新的“A”活动公司的列表。最后，我应该有 1 个如下所示的列表：

```
CompanyType Company Change_Dt   Chng_Type
Large   Apple      12/12/2012   A
Large   Dell       12/01/2012   A
Mid     Adobe      06/12/2012   A
Small   eBay       11/02/2012   A 
```

到目前为止，我的查询是：

```
table.OrderBy(t => CompanyType).Where(t => Chng_Type.Equals("A")) 
```

如何完成查询？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:43:50.450

```
var query = table.Where(t => t.Chng_Type.Equals("A"))
                 .GroupBy(t => t.Company)
                 .Select(g => g.OrderByDescending(t => t.Change_Dt)
                               .FirstOrDefault()); 
```

解释：

*   按公司类型过滤条目
*   按公司名称分组过滤条目（即 Apple 的所有条目将在一个组中）
*   从每个组中选择具有最新日期的条目

# selenium - 在带有 iPhone 和 Android 的 Mac 上设置 Selenium GRID 2

> ID：13996930
> 
> 赞同：1
> 
> 时间：2012-12-21T20:40:01.520
> 
> 标签：selenium, android-emulator, socket.io, selenium-webdriver, selenium-grid

您好我正在尝试使用 iPhone 模拟器和 Android 模拟器在 Mac 服务器上设置 Selenium GRID II。我可以将 iPhone 连接到 Grid，甚至可以开始测试。但是在连接 Android Emulator 时出现以下错误。

```
org.openqa.selenium.WebDriverException: Error forwarding the new session cannot find : {platform=MAC, browserName=android, version=}
Command duration or timeout: 161 milliseconds
Build info: version: '2.26.0', revision: '18040', time: '2012-11-02 09:44:45'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.7.0_07'
Driver info: driver.version: RemoteWebDriver
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:57)
    at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
    at java.lang.reflect.Constructor.newInstance(Constructor.java:525)
    at org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler.java:188)
    at org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:145)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:531)
    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:215)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:110)
    at org.openqa.selenium.remote.RemoteWebDriver.<init>(RemoteWebDriver.java:128)
    at com.Softcrylic.Automation.Testing.WebDriverTest.setUp(WebDriverTest.java:31)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.RunBefores.evaluate(RunBefores.java:27)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:31)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: org.openqa.selenium.remote.ErrorHandler$UnknownServerException: Error forwarding the new session cannot find : {platform=MAC, browserName=android, version=}
Build info: version: '2.26.0', revision: '18040', time: '2012-11-02 09:44:45'
System info: os.name: 'Windows 7', os.arch: 'x86', os.version: '6.1', java.version: '1.7.0_07'
Driver info: driver.version: unknown
    at org.openqa.grid.web.servlet.handler.RequestHandler.process(RequestHandler.java:111)
    at org.openqa.grid.web.servlet.DriverServlet.process(DriverServlet.java:84)
    at org.openqa.grid.web.servlet.DriverServlet.doPost(DriverServlet.java:68)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:727)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:820)
    at org.seleniumhq.jetty7.servlet.ServletHolder.handle(ServletHolder.java:565)
    at org.seleniumhq.jetty7.servlet.ServletHandler.doHandle(ServletHandler.java:479)
    at org.seleniumhq.jetty7.server.session.SessionHandler.doHandle(SessionHandler.java:225)
    at org.seleniumhq.jetty7.server.handler.ContextHandler.doHandle(ContextHandler.java:1031)
    at org.seleniumhq.jetty7.servlet.ServletHandler.doScope(ServletHandler.java:406)
    at org.seleniumhq.jetty7.server.session.SessionHandler.doScope(SessionHandler.java:186)
    at org.seleniumhq.jetty7.server.handler.ContextHandler.doScope(ContextHandler.java:965)
    at org.seleniumhq.jetty7.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
    at org.seleniumhq.jetty7.server.handler.HandlerWrapper.handle(HandlerWrapper.java:111)
    at org.seleniumhq.jetty7.server.Server.handle(Server.java:349)
    at org.seleniumhq.jetty7.server.AbstractHttpConnection.handleRequest(AbstractHttpConnection.java:452)
    at org.seleniumhq.jetty7.server.BlockingHttpConnection.handleRequest(BlockingHttpConnection.java:47)
    at org.seleniumhq.jetty7.server.AbstractHttpConnection.content(AbstractHttpConnection.java:894)
    at org.seleniumhq.jetty7.server.AbstractHttpConnection$RequestHandler.content(AbstractHttpConnection.java:948)
    at org.seleniumhq.jetty7.http.HttpParser.parseNext(HttpParser.java:857)
    at org.seleniumhq.jetty7.http.HttpParser.parseAvailable(HttpParser.java:235)
    at org.seleniumhq.jetty7.server.BlockingHttpConnection.handle(BlockingHttpConnection.java:66)
    at org.seleniumhq.jetty7.server.bio.SocketConnector$ConnectorEndPoint.run(SocketConnector.java:254)
    at org.seleniumhq.jetty7.util.thread.QueuedThreadPool.runJob(QueuedThreadPool.java:599)
    at org.seleniumhq.jetty7.util.thread.QueuedThreadPool$3.run(QueuedThreadPool.java:534)
    at java.lang.Thread.run(Thread.java:680)

java.lang.NullPointerException
    at com.Softcrylic.Automation.Testing.WebDriverTest.tearDown(WebDriverTest.java:42)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:601)
    at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
    at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
    at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
    at org.junit.internal.runners.statements.RunAfters.evaluate(RunAfters.java:37)
    at org.junit.runners.BlockJUnit4ClassRunner.runNotIgnored(BlockJUnit4ClassRunner.java:79)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:71)
    at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:49)
    at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
    at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
    at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
    at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
    at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
    at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197) 
```

**我在做什么？**

1.) 我在 Android 上安装 android-standalone-server.apk 并使用 adb 将端口 8080 转发到 8080。

2.）然后开始连接到网格的新节点，如下所示

```
java -jar selenium-server-standalone-2.25.0.jar -role node -hub http://localhost:4444/grid/register -port 8080 -browser browserName="Android",version="4",platform="MAC" 
```

我在做什么错？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-07T20:18:49.647

2 things to try.

1: try running the node launch command with this updated syntax: `java -jar selenium-server-standalone.jar -role node -hub http://localhost:4444/grid/register -port 8080 -browser "browserName=android,version=4,platform=MAC"`

2: follow the updated instructions here:

[https://code.google.com/p/selenium/wiki/AndroidDriver](https://code.google.com/p/selenium/wiki/AndroidDriver)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T19:44:47.157

我终于能够进行 Android 测试。我按照[https://code.google.com/p/selenium/wiki/AndroidDriver上的详细说明进行操作](https://code.google.com/p/selenium/wiki/AndroidDriver)

不要启动本地节点来连接到您的集线器。相反，在您的 Android 设备上启动 WebDriver 后，使用`adb -s {id} forward tcp:8080 tcp:8080`命令转发端口。这就对了。您已准备好进行测试。您已将测试修改为现在连接到您正在转发的端口。

我使用 selenium 网格，所以在执行 android 测试时我必须修改我的测试以适应不同的集线器。我无法连接到 selenium 集线器，而是必须直接连接到 android 设备，就好像它是集线器一样。我找不到将 android 设备注册为我使用的主要 selenium 集线器的节点的方法。

在您的 android 测试中，您需要`http://localhost:8080/wd/hub`在创建 RemoteWebDriver 时连接到。这会将您连接到 android 设备上的集线器，您的测试将从那里开始。

希望有一种方法可以在 android 设备上配置 WebDriver 以注册为具有现有集线器的节点。我确定有，但我还没有弄清楚。

# objective-c - pushViewController 显示视图过多

> ID：13996931
> 
> 赞同：3
> 
> 时间：2012-12-21T20:40:05.220
> 
> 标签：objective-c, ios, cocoa-touch

我有一个很轻的 ViewController，它在 viewDidLoad 中什么都不做。我将这个视图推到navigationController 之上。从块内部调用执行此操作的方法。在调用 showView 之后，我添加了一个 NSLog，并且该日志在控制台中的打印速度非常快，但是视图需要大量加载......我真的不明白可能发生了什么......任何想法？

```
ABAddressBookRequestAccessWithCompletion(addressBookRef, ^(bool granted, CFErrorRef error) {
    [self showView];
    NSLog(@"EXECUTED");                
});

- (void) showView{
    TestViewController *test = [[TestViewController alloc]init];
    [self.navigationController pushViewController:test animated:NO];
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-21T20:47:37.983

从文档中`ABAddressBookRequestAccessWithCompletion`：

> 在任意队列上调用完成处理程序。如果您的应用程序在整个应用程序中使用地址簿，您有责任确保将该地址簿的所有使用分派到单个队列，以确保正确的线程安全操作。

您应该确保在主线程上调用您的 UI 代码。

```
ABAddressBookRequestAccessWithCompletion(addressBookRef, ^(bool granted, CFErrorRef error {
     dispatch_async(dispatch_get_main_queue(), ^{
         [self showView];
         NSLog(@"EXECUTED");                
     });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:45:53.920

这可能不是唯一的问题，但根据[docs](http://developer.apple.com/library/ios/documentation/AddressBook/Reference/ABAddressBookRef_iPhoneOS/Reference/reference.html#//apple_ref/c/func/ABAddressBookRequestAccessWithCompletion)，传递给的完成处理程序`ABAddressBookRequestAccessWithCompletion`在任意队列上被调用。`-showView`应该只在主队列上调用，因为它正在处理`UIViewController`对象。

要问的另一件事是主队列上还发生了什么？是否还有其他长期运行的任务可能会阻止 UI 更新？

# javascript - 寻找实时跨浏览器移动应用程序的框架

> ID：13996937
> 
> 赞同：2
> 
> 时间：2012-12-21T20:40:25.807
> 
> 标签：javascript, html, jquery-mobile, sencha-touch, real-time

我正在尝试构建一个非常面向实时的移动（iPhone 和 Android）HTML 5 应用程序。我将使用 Socket.IO 和 Node.js 作为我的实时数据的访问器。我已经阅读/尝试了很多，所以这是我目前对我尝试过的产品的感觉

1.  JQuery Mobile-**优点：**易于使用，没有学习曲线**缺点：**不支持实时，不是很“原生”的感觉
2.  Sencha Touch-**优点：**易于创建具有原生外观的 UI，易于集成到实时 js 内容**缺点：**文档极差

这是我试过的两个。我很想使用 Sencha touch，但我遇到的每一个问题都需要数天的反复试验（以及 SO 帖子）才能解决，我不能浪费时间。任何人都知道我可以使用 JQuery 来做实时工作，或者只是一个更好的框架？

# 编辑

我没有说清楚，我正在寻找两个方面：实时方面，还有一些 UI 框架

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:44:31.477

您可以结合使用 jQuery/jQMobile 与[Backbone.js](http://backbonejs.org/)和[Backbone.iobind.js](http://alogicalparadox.com/backbone.iobind/)通过 socket.io 进行实时更新

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:46:33.907

[JQuery](http://jquery.com/)、[AngularJs](http://angularjs.org/)和[Twitter 引导程序](http://twitter.github.com/bootstrap/)。这就是我会使用的。

# javascript - 多个显示隐藏切换与 div 滑出

> ID：13996939
> 
> 赞同：4
> 
> 时间：2012-12-21T20:40:28.000
> 
> 标签：javascript, show-hide, jquery

我是编码新手，需要 jQuery 帮助。我有 2`<div>`秒（一个带有图像，另一个带有菜单列表，均为 50% 宽度），我需要能够单击其中一个菜单选项以从右侧显示一个新的 div（50% 宽度）同时将其他 2 个 div 的宽度减小到每个 25%。然后单击相同的菜单选项以隐藏新的 div 并恢复为原始宽度。但是，如果我在新 div 可见时单击另一个菜单选项，我需要它将内容更改为该特定菜单选项内容。

如何`<div>`用 jQuery 交换左手？

这是我正在使用的 HTML：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title></title>
     <!-- SCRIPT FILES -->    
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
     <script type="text/javascript" src="script.js"></script>     
     <!-- CSS STYLESHEETS -->    
    <link rel="stylesheet" href="reset.css" type="text/css" />
    <link rel="stylesheet" href="main.css" type="text/css" />    
</head>
<body>
    <div id="wrapper">    
        <div id="header">        
        </div><!--header-->        
            <div id="container">        
                <div class="box-container">                
                    <div class="box1">                    
                        <img src="images/Untitled-1.png" alt="logo">                    
                    </div>                    
                    <div class="box2">                    
                        <div id="nav">                        
                            <ul>                            
                                <li><a>hello!</a></li>                                
                                <li><a>ADVERTISING</a></li>                                
                                <li><a>DESIGN</a></li>                                
                                <li><a>ABOUT</a></li>                                
                                <li><a>BLOG</a></li>                                
                                <li><a>SHOP</a></li>                                
                            </ul>                            
                        </div><!--nav-->                        
                    </div><!--box2-->                    
                    <div class="box3">                    
                        <div id="ADVERTISING" class="content">ADVERTISING</div>                        
                        <div id="DESIGN" class="content">DESIGN</div>                        
                        <div id="ABOUT" class="content">ABOUT</div>                        
                        <div id="BLOG" class="content">BLOG</div>        
                        <div id="SHOP" class="content">SHOP</div>                    
                    </div>                    
                </div><!--box-container-->            
            </div><!--container-->        
        <div id="footer">        
        </div><!--footer-->        
    </div><!-- wrapper-->        
</body>
</html>​ 
```

这是一个带有样式的工作 jsFiddle：http: [//jsfiddle.net/YcphY/6/](http://jsfiddle.net/YcphY/6/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T20:54:45.737

对于初学者来说，[这里有一个方法，它将下面的示例与您所追求的动画联系起来](http://jsfiddle.net/YcphY/13/)：

```
$(function() {
  $("#nav").delegate("li","click", function() {
    var newDiv = $(".box3 .content").eq($(this).index()-1);
    newDiv.siblings().hide().end(); // hide the others
    if(newDiv.is(":visible")) {
      // if shown, fade it out, when the fade finishes, slide everything back
      newDiv.fadeOut(function() { 
        $(".box3").hide(); 
        $(".box1, .box2").animate({ width: "50%" });
      });
    } else {
      // if not shown, then slide over space, then fade in
      $(".box1, .box2").animate({ width: "25%" }, function() {
        $(".box3").show();
        newDiv.fadeIn("fast");
      });
    }
  });        
});​ 
```

鉴于您当前的 CSS，您可以这样做：

```
$(function() {
    $("#nav").delegate("li a","click", function() {
        $(".box3").show();
        $("#" + $(this).text()).show().siblings().hide();
    });        
});​ 
```

[这是一个工作示例](http://jsfiddle.net/YcphY/7/)，尽管您可以看到 CSS 需要一些工作才能使其 100% 运行。不过，我建议进行一些更改：为您的链接和容器提供匹配 ID，如下所示：

```
<li><a id="ad">ADVERTISING</a></li> 

<div id="ad-container" class="content">ADVERTISING</div> 
```

那么JS可以是：

```
$(function() {
    $("#nav").delegate("li a","click", function() {
        $(".box3").show();
        $("#" + this.id + "-container").show().siblings().hide();
    });        
}); 
```

[这是一个工作示例](http://jsfiddle.net/YcphY/10/)……它允许您随意更改文本，而不必担心 JS 以后会损坏。如果在所有情况下链接的数量都与 s 一致，则另一种替代方法是使用 取消列表中链接的索引[`.index()`](http://api.jquery.com/index/)，即使由于“你好！”而存在偏移量也是如此。关联。`<li>``<div>`

这是使用当前 HTML[的索引方法的示例：](http://jsfiddle.net/YcphY/11/)

```
$(function() {
    $("#nav").delegate("li","click", function() {
        $(".box3").show();
        $(".box3 .content").hide().eq($(this).index()-1).show();
    });        
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T21:15:32.437

我认为 jQuery 的[动画](http://api.jquery.com/animate/)功能可能对你有用。

您需要做的是将位于窗口外的隐藏 div 添加到您的 HTML 中（或者`document.ready`如果您愿意，可以使用 jquery on event 动态添加它）并使用上面提到的 animate 函数将其滑入并out 并将其绑定到菜单项的单击功能。

# 示例代码

```
$(document).ready(function(){
    $('#slide').click(function(){
    var hidden = $('.hidden');
    if (hidden.hasClass('visible')){
        hidden.animate({"left":"-1000px"}, "slow");
        hidden.removeClass('visible');
    } else {
        hidden.animate({"left":"0px"}, "slow");
        hidden.addClass('visible');
    }
    });
});​ 
```

# 解释

在上面的代码中，我们将代码绑定到`click`带有`id`“幻灯片”的元素的事件。单击元素后，将启动代码。我们检查是否`.hidden`有一个名为“可见”的 css 类。如果不是，我们将动画隐藏的 div 滑入。如果它有一个可见的类，则将其滑出。

# 工作小提琴

这是一个适合您的[JSFiddle](http://jsfiddle.net/QPhB3/)

# 一些指示

*   在隐藏 div 的 CSS 中，记得指定一个大于当前左侧面板的 z-index。
*   在隐藏的 div 的 CSS 中，记得设置`position`to`absolute`和`left`to around `-1200px`（或大于 window.width() 以使其适用于所有屏幕尺寸。）

# c - 从 C 在 Paraview 上打印值

> ID：13996951
> 
> 赞同：1
> 
> 时间：2012-12-21T20:42:03.397
> 
> 标签：c, csv, paraview

我需要帮助（再次）。

我的问题如下：

**1** .- 我需要使用 ParaView 打印卷的值。 **2** .- 我用坐标和强度以及文件**.Csv**保存值。

i,j,k,强度

0,0,0,0.000000

0,1,0,0.000000

0,2,0,0.000000

0,3,0,0.000000

0,4,0,0.000000

0,5,0,0.000000

ETC...

**3** .- 但我得到的是： ![ParaView 画面](../Images/523245e522d5e79dd49d84d4a0beedaa.png)

**4** .- 我知道 Paraview 使用很多格式，但我需要使用从 C 语言（不是 C++）获得的数据打印体积值。

**5** .- 最后是真正的问题......我可以使用这种文件（csv）来打印卷还是需要更改为其他文件？因为我不知道如何制作 RAW o TVK ......你能帮帮我吗？

伊万。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-12-22T14:44:34.313

伊万，我不确定我是否理解你，但你可以使用

“表格到结构化网格”过滤器，然后您可以通过强度标量场将其表示为体积和颜色。

# c# - 将 ListView 所选项目标记转换为 guid

> ID：13996953
> 
> 赞同：2
> 
> 时间：2012-12-21T20:42:08.017
> 
> 标签：c#, sql, sql-server

我有一个`ListView`包含来自 SQL 数据库的数据，我使用`ListView`项目中的标记值来存储`uniqueid`来自数据库的一个（因此我不必在其中创建一个额外的隐藏列`ListView`来存储它）。

我收到以下错误：

> *System.InvalidCastException 发生*

这是我的代码：

```
using (SqlCommand sqlCommand = new SqlCommand("SELECT * FROM Employees WHERE ID = @ID",     DBFactory.GetSqlConnection()))
{
    sqlCommand.Parameters.Add("@ID", SqlDbType.UniqueIdentifier).Value = ((Guid)listView1.SelectedItems[0].Tag);

    using (SqlDataAdapter sda = new SqlDataAdapter(sqlCommand))
    {
        sda.Fill(table);
    }
} 
```

有什么想法/建议吗？

编辑：我发现 listView1.SelectedItems.SelectedItemArray[0].Tag object {string} 的类型是。很奇怪，因为“ID”列的 DataType = UniqueIndentifier..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:49:24.240

您可能必须将其解析为 GUID 而不是强制转换。

```
sqlCommand.Parameters.Add("@ID", SqlDbType.UniqueIdentifier).Value =
    (new Guid(listView1.SelectedItems[0].Tag)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T21:03:07.953

显然`listView1.SelectedItems[0].Tag`，无论您在其中存储什么，它始终是一个字符串。

通过更改`SqlDbType.UniqueIdentifier`to解决了`SqlDbType.VarChar`

# java - 使用java读取excel文件-> xlsx格式

> ID：13996957
> 
> 赞同：2
> 
> 时间：2012-12-21T20:42:15.743
> 
> 标签：java, apache, excel, apache-poi, xlsx

我正在尝试读取一个 excel 文件（xlsx 不是 xls），但没有任何运气。我尝试了 jexcel api，但它不支持 xlsx 扩展，然后我尝试了需要工作的 Apache api，还尝试了他们网站上的示例，但没有运气。我无法通过读取文件阶段并获得一个文件未找到异常。还使用了 poi-ooxml-3.6.jar、xmlbeans-2.6.0 和 poi-3.7.jar。

谁能向我解释一下我需要使用哪些类型的 api/classes/libraries 以及如何在 eclipse 中使用它（外部库/classes/api 对我来说是全新的）

提前谢谢了

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T21:19:05.540

Apache POI 是一个很好的读取 xsl 和 xslx 格式的库。

要读取文件，只需`XSSFWorkbook`通过传递带有 Excel 文件路径的新 FileInputStream 来实例化一个新文件：

```
XSSFWorkbook workbook = new XSSFWorkbook(OPCPackage.open(new File("foo.xslx"))); 
```

或者使用输入流（比文件占用更多内存）：

```
XSSFWorkbook workbook = new XSSFWorkbook(myInputStream); 
```

拥有 a 后`XSSFWorkbook`，使用它遍历所有单元格（[示例](http://www.luv2code.com/2011/11/09/reading-ms-excel-files-xslx-in-java/)）。

[在此处](http://poi.apache.org/download.html#POI-3.9)下载 Apache POI 3.9

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T21:19:34.357

使用 POI 3.8 和 poi-ooxml-3.8，我在这样的事情上取得了成功（我没有尝试过旧版本）：

```
InputStream is = //Open file, and get inputstream
Workbook workBook = WorkbookFactory.create(is);
int totalSheets = workBook.getNumberOfSheets();
for (int i = 0; i <= totalSheets - 1; i++) {
  Sheet sheet = workBook.getSheetAt(i);
  // Do something with the sheet
} 
```

`WorkbookFactory`将自动确定文件是旧的 XLS 还是新的 XLSX，并返回正确版本的`Workbook`. 其余代码只是迭代其中包含的工作表的示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-08-27T07:08:38.567

在您的代码中添加以下依赖项。

```
<dependency>
            <groupId>org.apache.poi</groupId>
            <artifactId>poi</artifactId>
            <version>3.17</version>
        </dependency>

        <!-- https://mvnrepository.com/artifact/org.apache.poi/poi-ooxml -->
        <dependency>
            <groupId>org.apache.poi</groupId>
            <artifactId>poi-ooxml</artifactId>
            <version>3.17</version>
        </dependency> 
```

还可以使用以下代码读取 excel 文件，它适用于 .xls 和 .xlsx 文件。

```
Workbook workbook = WorkbookFactory.create(inputStream); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-09T21:14:03.307

我最终使用了 AbstractExcelView 的这种修改

[https://github.com/hmkcode/Spring-Framework/blob/master/spring-mvc-json-pdf-xls-excel/src/main/java/com/hmkcode/view/abstractview/AbstractExcelView.java](https://github.com/hmkcode/Spring-Framework/blob/master/spring-mvc-json-pdf-xls-excel/src/main/java/com/hmkcode/view/abstractview/AbstractExcelView.java)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-30T12:34:55.610

在 pom.xml 中添加依赖项 -

```
<dependency>
        <groupId>org.apache.poi</groupId>
        <artifactId>poi</artifactId>
        <version>3.15</version>
    </dependency>

    <dependency>
        <groupId>org.apache.poi</groupId>
        <artifactId>poi-ooxml</artifactId>
        <version>3.15</version>
    </dependency>

    <dependency>
        <groupId>org.apache.poi</groupId>
        <artifactId>ooxml-schemas</artifactId>
        <version>1.3</version>
    </dependency> 
```

Excel 2007 或更高版本 (.xlsx) - 示例代码 -

```
 //reading data from byte array
            OPCPackage pkg = OPCPackage.open(new ByteArrayInputStream(data));
            Workbook wb = new XSSFWorkbook(pkg);
Sheet sheet = wb.getSheetAt(0);
            Iterator<Row> rows = sheet.rowIterator();

            while (rows.hasNext()) {
                int j = 5;
                Person person= new Person ();
                Row row = rows.next();
                if (row.getRowNum() > 0) {
                    person.setPersonId((int)(row.getCell(0).getNumericCellValue()));
                    person.setFirstName(row.getCell(1).getStringCellValue());
                    person.setLastName(row.getCell(2).getStringCellValue());
                    person.setGroupId((int)(row.getCell(3).getNumericCellValue()));
                    person.setUserName(row.getCell(4).getStringCellValue());
                    person.setCreditId((int)(row.getCell(5).getNumericCellValue()));
                }

            } 
```

2)

```
 //reading from a file 
        File file = new File(pathxlsx);
        FileInputStream fis = new FileInputStream(file);
        Workbook wb = new XSSFWorkbook(fis);

        Sheet sheet = wb.getSheetAt(0);
        Iterator<Row> rows = sheet.rowIterator();

        while (rows.hasNext()) {
            int j = 5;
            Person person= new Person ();
            Row row = rows.next();
            if (row.getRowNum() > 0) {
                person.setPersonId((int)(row.getCell(0).getNumericCellValue()));
                person.setFirstName(row.getCell(1).getStringCellValue());
                person.setLastName(row.getCell(2).getStringCellValue());
                person.setGroupId((int)(row.getCell(3).getNumericCellValue()));
                person.setUserName(row.getCell(4).getStringCellValue());
                person.setCreditId((int)(row.getCell(5).getNumericCellValue()));
            }

        } 
```

Excel 1998-2003 文件 (.xls) - 您可以使用 HSSF 库。只需使用：Workbook wb = new HSSFWorkbook(pkg);

# .htaccess - 使用 Jetty 密码保护 url / 文件夹

> ID：13996961
> 
> 赞同：2
> 
> 时间：2012-12-21T20:42:27.533
> 
> 标签：.htaccess, jsp, jetty, password-protection, jetty-8

我想对在 Jetty 8.1 上运行的基于 JSP 的网站的有限部分进行密码保护。

因此，对于网址 www.mywebsite.com/protected，我希望浏览器弹出一个用户/密码输入窗口，而 www.mywebsite.com 可供所有人访问。

我知道对于 Apache，这是通过 .htaccess 文件完成的。由于 Jetty 在没有 Apache 的情况下运行，我想知道实现这一点的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T22:35:28.423

jsp 只是一个 servlet，因此您想在 web.xml 文件中配置一个保护该 url 空间的安全领域。

7、8 码头

*   [http://wiki.eclipse.org/Jetty/Tutorial/Realms](http://wiki.eclipse.org/Jetty/Tutorial/Realms)

码头 9

*   [http://www.eclipse.org/jetty/documentation/current/configuring-security.html#configuring-security-authentication](http://www.eclipse.org/jetty/documentation/current/configuring-security.html#configuring-security-authentication)

# asp.net-mvc - 如何忽略表单集合中的某些项目？（使用 mvc 3）

> ID：13996963
> 
> 赞同：0
> 
> 时间：2012-12-21T20:42:36.440
> 
> 标签：asp.net-mvc, html-helper

我有一个以 mvc 3 形式显示的问题列表及其输入（答案）。我后来在部分视图中添加了评论。但是，它添加了一个评论字段。如何从我的表单集合中忽略评论字段（有一个添加评论控制器）：

控制器代码：

```
foreach (var key in formCollection.AllKeys)
                {
                    var answer = formCollection[key];
                    int questionId = Convert.ToInt32(key);
                    .......
                } 
```

评论：

```
@Html.TextArea("Comment", new { rows = 5, cols = 50 }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T21:54:41.427

以下[帖子](https://stackoverflow.com/questions/1688794/linq-expression-to-filter-formcollection)解释了如何使用 Linq 表达式过滤 FormCollection，我认为这正是您想要做的。

希望有帮助。

# android - 如何实例化扩展 MapFragment 的自定义类（单例）

> ID：13996965
> 
> 赞同：3
> 
> 时间：2012-12-21T20:42:46.040
> 
> 标签：android, fragment, mapfragment

我需要创建一个扩展的自定义类`MapFragment`。我不确定如何实例化我的新类，以便 MapFragment 以正确的方式实例化。

MapFragment 应该是通过做创建的

```
MapFragment.newInstance(options) 
```

如果我有自己的课程，那就扩展 MapFragment

```
public class MyMapFragment extends MapFragment {

} 
```

我该如何实例化`MyMapFragment`，或者这种方法一起是错误的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-21T20:56:00.673

您可能可以使用内置的 MapFragment 完成您需要的工作（尽管不清楚为什么要对片段进行子类化）。

使用标准 MapFragment，用于`map = mapFragment.getMap()`访问底层[`GoogleMap`](http://developer.android.com/reference/com/google/android/gms/maps/GoogleMap.html)，并用于`map.setXXXListener`捕获事件。

如果您出于某种原因确实需要较低级别的访问权限，您将不得不自己扩展`Fragment`、构建和管理一个`GoogleMap`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T16:19:42.910

这是我试图做的：

[ClassNotFoundException 在 onSaveInstanceState 中扩展 MapFragment 的类中读取 Serializable 对象](https://stackoverflow.com/questions/14612336/classnotfoundexception-reading-a-serializable-object-in-a-class-extending-mapfra)

但是当我尝试使用 onSaveInstanceState 保存一些数据时，我陷入了困境。如果您不想存储数据以重复使用它，源代码解释了我如何创建该类以及如何加载它。

# sql - BULK INSERT 后特殊字符显示不正确

> ID：13996967
> 
> 赞同：28
> 
> 时间：2012-12-21T20:43:04.503
> 
> 标签：sql, sql-server-2012, bulkinsert, nvarchar

我正在使用`BULK INSERT`导入 CSV 文件。CSV 文件中的一列包含一些包含分数的值（例如`1m½f`）。

我不需要对分数进行任何数学运算，因为这些值仅用于显示目的，因此我将列设置为`nvarchar`. 可以，`BULK INSERT`但是当我在 SQL 中查看记录时，分数已被替换为分号 ( `¢`)，因此显示的文本为`1m¢f`.

我有兴趣了解为什么会发生这种情况以及有关如何解决该问题的任何想法。`BULK INSERT`命令是：

```
BULK INSERT dbo.temp FROM 'C:\Temp\file.csv' 
WITH (FIELDTERMINATOR = ',', ROWTERMINATOR = '\n' ); 
```

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-21T21:22:51.970

您需要`BULK INSERT`使用`CODEPAGE = 'ACP'`，它将字符串数据从 Windows 代码页 1252 转换为 SQL Server 代码页。

```
BULK INSERT dbo.temp FROM 'C:\Temp\file.csv' 
WITH (FIELDTERMINATOR = ',', ROWTERMINATOR = '\n', CODEPAGE = 'ACP'); 
```

如果要在足够新的 SQL Server 版本上引入 UTF-8 数据：

```
[...] , CODEPAGE = '65001'); 
```

您可能还需要指定`DATAFILETYPE = 'char|native|widechar|widenative'`.

# c++ - 我丢失的 Edge 在哪里？

> ID：13996969
> 
> 赞同：3
> 
> 时间：2012-12-21T20:43:16.237
> 
> 标签：c++, set

我正在尝试使用一个`std::set`我将放入一堆边缘的地方，并且只保留独特的边缘。

An`Edge`是两个（整数索引）节点之间的一条线。Edge `(1,2)==(2,1)`，因为这些边是无向的。

不过，我遇到了一个令人费解的情况。在下面代码中标记的部分`//??`，行为与我预期的不同。

运行此代码的结果是只保留 2 条边，(1,2) 和 (4,8)。(2,1) 被集合丢弃，但**除非**我激活注释掉的`//|| ( A==o.B && B==o.A )`部分`operator==`！这里发生了什么？

这个`set<Edge>`实现让我感觉......前卫。

```
#include <stdio.h>
#include <set>
using namespace std ;

struct Edge
{
  int A,B ;
  Edge( int iA, int iB ) : A(iA), B(iB) {}
  bool operator==( const Edge & o ) const {
    //??
    return ( A==o.A && B==o.B ) ;//|| ( A==o.B && B==o.A ) ;
  }
  bool operator<( const Edge& o ) const {//MUST BE CONST
    return A < o.A && B < o.B ;
  }
  void print() const { printf( "( %d, %d )", A,B ) ; }
  void compare( const Edge& o ) const {
    print() ;
    if( *this==o ) printf( "==" ) ;
    else printf( "!=" ) ;
    o.print() ;
    puts("");
  }
} ;

int main()
{
  Edge e1( 1, 2 ) ;
  Edge e2( 1, 2 ) ;
  Edge e3( 2, 1 ) ;
  Edge e4( 4, 8 ) ;

  e1.compare( e2 ) ;
  e1.compare( e3 ) ;
  e1.compare( e4 ) ;

  set<Edge> edges ;
  edges.insert( e1 ) ;
  edges.insert( e2 ) ;
  edges.insert( e3 ) ;
  edges.insert( e4 ) ;

  printf( "%d edges\n", edges.size() ) ;
  for( auto edge : edges )
  {
    edge.print();
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T20:49:22.313

C++ set 并不像关心你的`==`运算符那样关心你的`<`运算符。是您的`<`运营商提出了问题：如果您想确保`(1,2)`等于`(2,1)`，您应该将您的实现更改为`<`如下所示：

```
bool operator<( const Edge& o ) const {
    int myMin = min(A, B);
    int myMax = max(A, B);
    int hisMin = min(o.A, o.B);
    int hisMax = max(o.A, o.B);
    return myMin < hisMin || ( myMin == hisMin && myMax < hisMax );
} 
```

此实现所做的是构建边缘的*规范表示*`{A,B}`，其中较小的成为“规范`A`”，而较大的成为“规范`B`”。当边缘以它们的规范形式进行比较时， 和 的相等性`(1,2)`可以`(2,1)`从和都计算为的事实中*暗示*出来。`(1,2) < (2,1)``(2,1) < (1,2)``false`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-21T20:48:24.770

我相信你`operator<`是错的，两者`e3<e2`都是`e2<e3`错误的。

也许你想要类似的东西：

```
return A < o.A || ((A == o.A) && (B < o.B)) ; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-21T20:48:32.017

我建议您更改 Edge() 构造函数以确保始终初始化 A 和 B 以便`A<=B`（如果边缘可以指向其原始节点）或`A<B`（如果不是），并放弃在 operator== 实现中使用额外的逻辑. 这对我来说似乎不那么“前卫”。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-21T20:51:38.547

你的比较应该是

```
return (A == o.A && B == o.B) || (B == o.A && A == o.B); 
```

# xamarin.android - MonoDroid：绑定具有多个依赖项的多个库

> ID：13996976
> 
> 赞同：0
> 
> 时间：2012-12-21T20:44:04.930
> 
> 标签：xamarin.android

在“绑定 Java 库”文档[http://docs.xamarin.com/Android/Guides/Advanced_Topics/Java_Integration_Overview/Binding_a_Java_Library_(.jar)#Overview](http://docs.xamarin.com/Android/Guides/Advanced_Topics/Java_Integration_Overview/Binding_a_Java_Library_(.jar)#Overview)以及几篇博客文章的帮助下，我已经能够对 ActionBarSherlock 项目进行和使用绑定。然而，尝试更复杂的绑定是一个相当艰巨的过程。

我目前的目标是为滑动菜单项目创建绑定。该项目基于 jfeinstein10 制作的滑动菜单实现：[https](https://github.com/jfeinstein10/SlidingMenu) ://github.com/jfeinstein10/SlidingMenu 。他的项目依赖于 ActionBarSherlock，并且他的项目和 ActionBarSherlock 都依赖于 android-support-v4 库。

到目前为止，我只能创建一个包含两个模块的 Android 库项目，一个用于 ActionBarSherlock，另一个用于 jfeinstein10 的滑动菜单。在这个项目中，ActionBarSherlock 依赖于标记为导出的 android-support-v4。滑动菜单模块依赖于 ActionBarSherlock。这个项目构建没有错误，可以在一个普通的 Android 应用程序中成功使用。值得一提的是，我相当肯定这两个需要合并到一个库中，因为一些滑动菜单代码需要调整以利用 ActionBarSherlock 库。

从这里开始，我非常不确定如何进行，到目前为止我的所有实验都完全不成功。创建要在 Java 绑定库中使用的 jar 和/或 jar 的正确方法是什么？如何将这些 jar 合并到 Java 绑定库中，以便使用该库的项目可以访问滑动菜单和 ActionBarSherlock 功能？如何保证滑动菜单和 ActionBarSherlock 各自的资源在最终项目中可以访问？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T13:17:47.917

不确定您是否仍在尝试执行此操作，但 Xamarin 在此处提供了 SlidingMenu 的绑定：[https ://github.com/xamarin/monodroid-samples/tree/master/SlidingMenu](https://github.com/xamarin/monodroid-samples/tree/master/SlidingMenu)

我仍在尝试弄清楚如何正确引用 ActionBarSherlock（它作为嵌入式 jar 捆绑在一起），但滑动菜单本身运行良好。

# scheme - 如何确保不打印空列表（方案）？

> ID：13996981
> 
> 赞同：3
> 
> 时间：2012-12-21T20:44:42.880
> 
> 标签：scheme

我有这个代码：

```
(define graph `(A (B (C)) (D (E)) (C (E))))

(define (prog1 graph)
    (let ([seen `()])
      (define (sub g)
          (cond 
              [(member (car g) seen) `()]
              [else 
               (set! seen (cons (car g) seen))
               (cond
                 [(null? (cdr g)) (list (car g))]
                 [else
                  (cons (car g) (map sub (cdr g)))])])) 
    (sub graph))) 
```

它打印一个连接图，其中所有节点都出现一次。但是，如果一个节点已经被访问过，我会返回空列表``()`。这会导致输出出现问题，我不知道如何解决：

运行时`(prog1 graph)`当前输出为：`(A (B (C)) (D (E)) ())`

但是，我希望输出是`(A (B (C)) (D (E)))`

关于如何修改代码以实现这一点的任何提示都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T21:04:49.287

如果空列表仅出现在列表的最顶层，您可以将它们过滤掉。将过程中的最后一行替换为：

```
(filter (negate null?) (sub graph)) 
```

或者简单地说：

```
(remove '() (sub graph)) 
```

如果空列表出现在任何嵌套级别，您可以在遍历的每个步骤中递归地应用相同的想法（过滤掉空列表）。

# javascript - 在对象文字内的回调中使用“this”

> ID：13996985
> 
> 赞同：0
> 
> 时间：2012-12-21T20:45:44.207
> 
> 标签：javascript

> **可能重复：**
> [Javascript 原型“this”问题](https://stackoverflow.com/questions/13996794/javascript-prototype-this-issue)

我有一个事件侦听器，它当然会调用事件的方法。此方法尝试持有对持有对象 this 的引用但未成功，以便它可以访问该对象的其他属性。

有一个注释表示行为未被理解的地方。this_hold.Name 在那里无法访问，就像我想的那样。

```
/*MUserExist
**
**
**
*/
$A.module({
    Name: 'MUserExist',
    S: {
        ClientStorage: SClientStorage,
        ComMessage: SComMessage,
        ComText: SComText,
        DynSma: SDynSma,
        DynTwe: SDynTwe,
        DynArc: SDynArc,
        AniMorphLabel: SAniMorphLabel,
        AniFlipPage: SAniFlipPage
    },
    E: {
        but: $A('#ue_but')[0],
        text: $A('#ue_go')[0],
        form: $A('#ue_fo')[0],
        check: $A('#ue_check')[0]
    },
    J: {
        box: $('#ue_box')
    },
    init: function () {
        var pipe = {},
            this_hold = this;
        this.J.box.draggable();
        this.E.but.addEventListener("click", function () {
            pipe = $A.definePipe(this_hold.Name);
            $A.machine(pipe);
        }, false);
        this.E.text.addEventListener("keypress", this.enter, false);
        this.S.AniMorphLabel.run(["ue_email",
                                  "ue_email_lab",
                                  "ue_go",
                                  "ue_pass_lab"
                                 ]);
    },
    enter: function (event) {
        var pipe = {},
            this_hold = this;
        if (event.keyCode === 13) {
            pipe = $A.definePipe(this_hold.Name); // fails here what does 'this' point to?
            $A.machine(pipe);
            event.preventDefault();
        }
    },
    pre: function (pipe) {
        var form_elements = this.E.form.elements,
            text_object = new this.S.ComText(form_elements);
        pipe.enter = this.enter;
        if ($A.Un.get('load') === '1') {
            if (!text_object.checkFull()) {
                pipe.type = 'empty';
                return this.S.ComMessage.message(pipe);
            }
            if (!text_object.checkPattern('email')) {
                pipe.type = 'email';
                return this.S.ComMessage.message(pipe);
            }
            if (!text_object.checkPattern('pass')) {
                pipe.type = 'pass';
                return this.S.ComMessage.message(pipe);
            }
        }
        pipe.page = text_object.getArray();
        pipe.proceed = true;
        pipe.page.remember = this.E.check.checked;
        return pipe;
    },
    post : function (pipe) {
        if (pipe.proceed === true) {
            this.S.ComMessage.resetView('ue_email');
            this.S.ComMessage.resetView('ue_go');
            this.S.ClientStorage.setAll(pipe.server.smalls);
            this.S.DynSma.run(pipe.server.smalls);
            this.S.DynArc.run(pipe.server.arcmarks);
            this.S.DynTwe.run(pipe.server.tweets);
            this.S.AniFlipPage.run('ma');
        } else {
            return this.S.ComMessage.message(pipe);
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:48:09.717

`this`可能指向触发事件的 DOM 节点。您是否尝试过写入`this`控制台进行检查？

```
console.log(this); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T20:48:16.220

尝试更改事件的绑定方式

```
this.E.text.addEventListener("keypress", this.enter, false); 
```

到

```
var that = this;
this.E.text.addEventListener("keypress", function(event) {
  that.enter(event);
}, false); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T21:02:16.473

`this`是生成事件的 DOM 对象。它不是您的 javascript 对象。

当您`this.enter`作为事件处理程序的方法传递时，该方法`enter`不会保持绑定到您的对象。如果您希望发生这种情况，您必须通过执行以下操作更改代码以使其发生：

```
// save local copy of my object so I can refer to it in
// the anonymous function
var obj = this;
this.E.text.addEventListener("keypress", function(event) {obj.enter(event)}, false); 
```

重要的是要记住它`this`是由方法/函数的调用者设置的。在这种情况下，事件处理程序的调用者是浏览器中的事件子系统。它不知道你的对象是什么，它的设计行为是设置`this`为导致事件的 DOM 对象。所以，如果你想调用你的 obj.enter 方法，你不能只是`enter`作为事件处理程序传递。相反，您创建一个单独的函数作为事件处理程序调用，然后`obj.enter()`使用您的对象作为基础从该函数调用，以便`this`正确设置。

另一种解决方案是使用`.bind()`它还创建一个将权限绑定`this`到函数调用的存根函数，但我不使用`.bind()`自己，因为它不适用于所有旧浏览器。

# python - 在 Python 上替换一行

> ID：13996988
> 
> 赞同：3
> 
> 时间：2012-12-21T20:45:54.203
> 
> 标签：python, file, replace

我正在尝试将 PHP 代码转换为 Python，但在替换行时遇到了问题。尽管我发现使用 Python 更容易，但我完全迷失了；我可以找到要替换的行，我可以在行尾添加一些内容，但我无法在文件上再次写入该行。

```
file = open("cache.ucb", 'rb')
for line in file:
   if line.split('~!')[0] == ex[4]:
       line += "~!" + mask[0]
       line = line.rstrip() + "\n"
       # Write on the file here! 
```

基本上，该[文件](https://github.com/unrar/unbot/blob/master/nas.udb)用作`~!`分隔符，我读取每一行。如果该行的第一个*标记*以`~!`开头`ex[4]`，例如可以是`Catbuntu`，我想在该行的末尾附加`mask[0]`，这可能是`Bousie`。然后我删除新行字符并在末尾添加一个。

这就是问题所在。我想按原样编写文件，但只更改该行。那可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-21T20:52:33.483

假设您使用的是 python >=2.7，以下应该可以解决问题

```
original = open(filename)
newfile = []
for line in original:
    if line.split('~!')[0] == ex[4]:
        line += "~!" + mask[0]
        line = line.rstrip() + "\n"
    newfile.append(line)
original.close()
amended.open(filename, "w")
amended.writeLines(newfile)
amended.close() 
```

如果出于某种原因您使用的是 python 2.6 或更低版本，请将倒数第二行替换为：

```
amended.write("".join(newfile)) 
```

编辑：修复替换从问题中复制的错误，提取文件名。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-21T21:11:36.960

您不能就地修改文件，至少如果您想在一行中插入字符则不能。您最终将覆盖下一行的开头。

有两种不同的方法可以做到这一点：

1.  将文件读入内存，关闭它，然后写回新版本。
2.  边写边写一个新的临时文件，然后把它移到原来的版本上。

那么，您如何在它们之间进行选择呢？我将尝试总结差异，按顺序排列，如果重要的话，每个差异通常都优于下面的差异（但这只是“通常”——你必须考虑自己的用例）：

*   # 2 不需要将整个内容保存在内存中。如果你的文件有 20GB 长，这显然是一个巨大的胜利；如果它是 16KB，没关系。

*   # 2 使整个操作原子化。即使它中途失败，或者其他进程在您更改文件时尝试读取文件，任何人都无法看到一些无效的半修改文件；他们将看到原始文件或新文件。

*   # 2 需要一些可用磁盘空间（因为暂时同时有两个文件副本）。

*   # 如果您同时关心 Windows 和 POSIX，那么 2 是一个巨大的痛苦。

*   # 如果原始文件和临时目录位于不同的文件系统上，则 2 可能涉及跨文件系统复制，除非您对此非常小心。

*   # 如果以上两个都不是问题，则 2 更简单。

Drakekin 的回答告诉你如何做#1。

如果您不关心 Windows 或跨文件系统问题，请执行以下操作 #2：

```
infile = open("cache.ucb", 'rb')
outfile = tempfile.NamedTemporaryFile(delete=False)
for line in infile:
   if line.split('~!')[0] == ex[4]:
       line += "~!" + mask[0]
       line = line.rstrip() + "\n"
   outfile.write(line)
infile.close()
os.rename(outfile.name, "cache.ucb")
outfile.close() 
```

`dir=os.path.dirname(original path)`您可以通过例如传递给构造函数来解决跨文件系统问题`NamedTemporaryFile`，但前提是您确定始终有权在原始文件旁边创建一个新文件（这并不总是得到保证，只是因为您有重写原始文件的权限——UNIX 权限、Windows ACL、OS X 沙箱等都给出了可能是错误的方法）。

要解决 Windows 问题……好吧，从[Is an atomic file rename (with overwrite) possible on Windows](https://stackoverflow.com/questions/167414/is-an-atomic-file-rename-with-overwrite-possible-on-windows)开始，以及互联网上的类似讨论。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T20:51:07.283

以“wb”模式打开文件并放在`file.write(line)`循环的末尾。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-21T20:50:52.697

您没有打开文件进行写入。

```
file = open("cache.ucb", 'rb') 
```

此行打开一个文件以二进制模式读取。您还需要打开它进行写作。

尝试以写入模式打开文件，'w' 并写回该行。

或者您可以简单地在开头打开文件进行读/写，然后在循环中写入：

```
file = open("cache.ucb", 'a+') 
```

# asp.net-mvc - 使用 Select2 ASP.NET MVC 时进行不显眼的验证

> ID：13996989
> 
> 赞同：10
> 
> 时间：2012-12-21T20:46:08.273
> 
> 标签：asp.net-mvc, validation, jquery-select2, unobtrusive-validation

选择框转换为 Select2，不会自动与 ASP.NET MVC 框架中的不显眼的验证机制集成。
例如，在包含常规选择框的表单上（在模型定义中标记为必填），在选择框中没有选择任何选项的情况下提交表单，将导致选择框的边框和背景呈现偏红色，并且通过使用@Html.ValidationMessageFor，可以在框旁边显示错误消息（如果有）。但是，如果将选择框转换为 Select2 组件，则上述功能将不再起作用。甚至验证错误消息也不会出现。
似乎连验证错误消息都没有显示的原因，是因为 Select2 将原始选择框的显示 CSS 属性更改为无（显示：无），我猜不显眼的验证脚本不会打扰为不可见生成错误消息字段。

有什么想法/解决方案吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-04T08:16:54.467

这个问题并不是 Select2 所特有的，而是 jQuery 不显眼的验证器所特有的。

您可以打开此[答案](https://stackoverflow.com/a/10864227/1561033)中突出显示的隐藏字段的验证。

```
$.validator.setDefaults({
    ignore: ''
}); 
```

正如评论所指出的，它在`$(document).ready()`. 我不得不把它放在顶层。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T21:25:17.163

我在 select2 插件上遇到了类似的问题。我不确切知道您具体使用了哪些功能，但根据我的经验，当您在`document.ready`事件中将元素设置为 select2 时，插件将即时更改元素的一些属性（检查其中一个元素后您的页面已完成加载 - 通常您会看到 id 和 class 属性与查看源代码时看到的不同）。

如果没有实际看到代码，很难提供更多内容，但这里有一些想法可以帮助您入门：

首先，显然确保您在标题中有指向您的 select2.css 样式表的链接。

然后，由于您正在谈论表单提交，我建议您检查您是否正在获得完整的回发或通过 AJAX 提交（如果您使用的是 jQueryMobile，那么您正在使用 AJAX，除非您在jquerymobile.js 文件或`data-ajax="false"`在表单属性中设置一个）。你可以看看这个返回的值`Request.IsAjaxRequest()`。显然，如果您通过 ajax 提交，您将不会点击 document.ready 事件，并且 select2 将无法正确初始化，您需要想办法解决这个问题。提交后尝试刷新页面，看看它是否呈现了 select2 组件。

然后我建议检查这些元素，看看它们的行为是否不像你期望的那样，因为你实际上是在尝试使用插件在运行时重新分配的类。您既可以调整逻辑，也可以深入研究 select2 代码本身并更改行为 - 它实际上已经很好地记录了代码在做什么，如果您跳上 select2 的 Google 组，Igor 通常很快跟进问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-09-08T01:13:42.373

**像这样**

```
$('select').on('select2:select', function (evt){  
        $(this).blur();  
}); 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2018-03-28T20:06:21.553

$('body').on('change', 'select.m-select2', function () {

```
$(this).blur(); 
```

})

# asp.net-mvc-4 - TempData 不适用于 MVC4 中的第二个请求

> ID：13996991
> 
> 赞同：4
> 
> 时间：2012-12-21T20:46:32.493
> 
> 标签：asp.net-mvc-4

我以前从未见过这种情况，我很困惑。我有以下控制器序列：

```
 /// <summary>
    /// Helper method to store offerId to TempData
    /// </summary>
    /// <param name="offerId"></param>
    private void StoreOfferInTempData(string offerId)
    {
        if (TempData.ContainsKey(SelectedOfferKey))
            TempData.Remove(SelectedOfferKey);
        TempData.Add(SelectedOfferKey, offerId);
    }

    [HttpPost]
    [AllowAnonymous]
    public virtual ActionResult Step1(MyViewModel model)
    {
        if (ModelState.IsValid)
        {
            StoreOfferInTempData(model.SelectedOfferId);
            return RedirectToAction(MVC.Subscription.Register());
        }

        MySecondViewModel model2 = new MySecondViewModel { OfferId = model.SelectedOfferId };
        return View(model2);
    }

    [HttpGet]
    [AllowAnonymous]
    public virtual ActionResult Register()
    {
        string offerId = TempData[SelectedOfferKey] as string; //we get a valid value here
        ... error handling content elided ...

        RegisterViewModel model = new RegisterViewModel { OfferId = offerId };

        return View(model);
    }

    [HttpPost]
    [AllowAnonymous]
    public virtual ActionResult Register(RegisterViewModel model)
    {
        if (ModelState.IsValid)
        {
            CreateCustomerResult result = CustomerService.CreateAccount(model.Email, model.NewPassword);
            if (result.Success)
            {
                ... content elided; storing customer to Session ...                    
                MyMembershipProvider.PersistUserCookie(result.Principal, true);

                //need to store our selected OfferId again for use by the next step
                StoreOfferInTempData(model.OfferId);
                return RedirectToAction(MVC.Subscription.Payment());
            }

            model.ErrorMessage = result.ErrorMessage;
        }

        return View(model);
    }

    [HttpGet]
    public ActionResult Payment()
    {
        string offerId = TempData[SelectedOfferKey] as string; //this is null???

        ... content elided ...

        return View(model);
    } 
```

TempData 的第一轮存储按预期运行。该值存在于随后的 HttpGet 方法中，并被标记为删除，因此当我再次添加它时它不再存在。但是，在第三个 HttpGet 方法上，它返回 null。

我尝试过为每一轮使用不同的密钥，没有任何变化。我可以向您保证，除了显示的内容外，我不会检查 TempData，因此我看不出该值会以某种方式被标记为删除。此外，无论它是否具有 [AllowAnonymous] 属性，它都会在支付方法中失败（所以不是由于任何 http 到 https 切换或类似的东西。

似乎它必须是非常简单的东西，但我的搜索没有任何结果。非常感谢任何帮助。

更新：在进一步检查中，出于某种原因，我的整个上下文似乎都在这一步上被淹没了。我们在控制器中使用 IoC，但没有任何 IoC 实例化的项目。谜团加深。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-21T21:02:12.227

的生命周期`TempData`仅在它被读回或处理下一个请求（以先到者为准）之前。`TempData`如果您要处理两个（或三个）请求，则不应依赖。相反，使用会话或数据库。

的目的`TempData`是在请求之间传递信息，直到您清除它（这就是会话的目的）才永久存在。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T23:45:24.090

啊哈！好吧，这很模糊，我希望它对其他人有所帮助。事实证明，我忘记在创建 Payment() 操作后运行我的 T4MVC.tt 文件，因此采取 MVC.Subscription.Payment() 操作的 RedirectToAction 没有正确实例化控制器。我不清楚这里所有的底层魔法，但如果你遇到这个并且正在使用 T4MVC.tt，请确保你运行了它！

欢迎评论为什么会这样。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-13T05:43:47.273

用于 `TempData.Keep("key")`在多个回发之间保留值

# matplotlib - 将 pcolormesh 和轮廓放在同一个网格上？

> ID：13996993
> 
> 赞同：4
> 
> 时间：2012-12-21T20:46:34.177
> 
> 标签：matplotlib

我正在尝试使用`contour`和显示带有轴标签的二维数据`pcolormesh`。正如 matplotlib 用户列表中所述，这些函数遵循不同`pcolormesh`的约定：期望 x 和 y 值指定单个像素的*角*，而`contour`期望像素的*中心*。

使这些行为一致的最佳方法是什么？

我考虑过的一种选择是制作“中心到边缘”功能，假设数据间隔均匀：

```
def centers_to_edges(arr):
    dx = arr[1]-arr[0]
    newarr = np.linspace(arr.min()-dx/2,arr.max()+dx/2,arr.size+1)
    return newarr 
```

另一种选择是`imshow`与`extent`关键字集一起使用。
第一种方法不能很好地使用 2D 轴（例如，由`meshgrid`or创建`indices`），第二种方法完全丢弃了轴号

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-24T23:16:43.893

您的数据是常规网格吗？如果没有，您可以使用 griddata() 来获取它。我认为，如果您的数据太大，则始终可以进行子采样或正则化。如果数据太大，也许你的输出图像与它相比总是很小，你可以利用它。如果将 imshow() 与“extent”和“interpolation='nearest'”一起使用，您将看到数据以单元格为中心，并且范围提供了单元格的下边缘（角）。另一方面，轮廓假设数据以单元格为中心，并且 X,Y 必须是单元格的中心。因此，您需要关心轮廓的输入域。一个简单的例子是：

```
x = np.arange(-10,10,1)
X,Y = np.meshgrid(x,x)
P = X**2+Y**2
imshow(P,extent=[-10,10,-10,10],interpolation='nearest',origin='lower')
contour(X+0.5,Y+0.5,P,20,colors='k') 
```

我的测试告诉我 pcolormesh() 是一个非常缓慢的例程，我总是尽量避免它。griddata 和 imshow() 对我来说总是一个不错的选择。

# c++ - 字符串加法或减法运算符

> ID：13996996
> 
> 赞同：0
> 
> 时间：2012-12-21T20:46:51.027
> 
> 标签：c++, string, operators

如何增加或减少字符串的值？例如：

```
 std::string number_string;
    std::string total;

    cout << "Enter value to add";
    std::getline(std::cin, number_string;
    total = number_string + number_string;
    cout << total; 
```

这只是附加字符串，所以这不起作用。我知道我可以使用 int 数据类型，但我需要使用字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-21T20:49:00.550

您可以使用`atoi(number_string.c_str())`将字符串转换为整数。

如果您担心正确处理非数字输入，`strtol`这是一个更好的选择，尽管有点罗嗦。[http://www.cplusplus.com/reference/cstdlib/strtol/](http://www.cplusplus.com/reference/cstdlib/strtol/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-21T21:42:59.080

您将需要一直使用整数，然后`std::string`在最后转换为 a 。

如果您有一个支持 C++11 的编译器，这是一个可行的解决方案：

```
#include <string>

std::string sum(std::string const & old_total, std::string const & input) {
    int const total = std::stoi(old_total);
    int const addend = std::stoi(input);
    return std::to_string(total + addend);
} 
```

否则，使用[boost](http://www.boost.org/)：

```
#include <string>
#include <boost/lexical_cast.hpp>

std::string sum(std::string const & old_total, std::string const & input) {
    int const total = boost::lexical_cast<int>(old_total);
    int const addend = boost::lexical_cast<int>(input);
    return boost::lexical_cast<std::string>(total + addend);
} 
```

该函数首先将每个`std::string`转换为`int`（无论您采用何种方法，您都必须执行的步骤），然后添加它们，然后将其转换回`std::string`. 在其他语言中，例如 PHP，尝试猜测您的意思并添加它们，无论如何，它们都是在后台执行此操作。

这两种解决方案都有许多优点。它们[速度更快](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_lexical_cast/performance.html)，它们报告错误时会出现异常，而不是默默地工作，而且它们不需要额外的中间转换。

Boost 解决方案确实需要进行一些设置工作，但绝对值得。Boost 可能是任何 C++ 开发人员工作中最重要的工具，除了编译器。您将需要它来做其他事情，因为他们已经完成了一流的工作，解决了您将来会遇到的许多问题，因此您最好开始获得它的经验。安装 Boost 所需的工作比使用它节省的时间要少得多。

# grails - 你可以使用 Grails Wrapper 来升级 Grails 吗？

> ID：13996999
> 
> 赞同：3
> 
> 时间：2012-12-21T20:47:05.053
> 
> 标签：grails, grails-2.1, grails-2.2

我在 Grails 文档中找不到任何内容，但从[Grails Wrapper 描述的措辞来看](http://grails.org/doc/latest/guide/single.html#wrapper)，应该是可能的。

您可以使用 Grails（通过已安装的 Grails Wrapper）来升级项目（以及 Wrapper）正在使用的 Grails 版本吗？如果是这样，怎么做？

TIA，克。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-05T23:24:57.627

我以前只是在`application.properties`文件中更改 grails 版本并运行`grailsw wrapper`以升级包装器。但是，当从 2.1.x 升级到 2.2.x 时，这不再起作用。