# StackOverflow 问答 14563000-14563999

# c# - 将 Autofac 引入现有应用程序

> ID：14563002
> 
> 赞同：0
> 
> 时间：2013-01-28T13:23:34.887
> 
> 标签：c#, inversion-of-control, autofac

假设有一个看起来像这样的项目依赖关系图。

```
Assembly       Common    Shared     HR *          Accounting *     
----           ---       ----       ----          ----             
Dependency               Common     Common        Common           
                                    Shared        Shared           
                                    Accounting

Main              Warehouse *
---               -----
Common            Common
Shared            Shared
HR                HR
Accounting        Accounting
Warehouse 
```

标有星号的项目具有可以通过主项目的反射按需显示和激活的表单。

配置 Autofac 容器的正确方法是什么？因为，理想情况下，如果我只使用会计，我不想加载 HR 和 Warehouse 程序集。

我应该使用模块还是嵌套范围？如您所见，这对我来说有点令人困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:57:44.990

Autofac 不从事管理项目依赖项的业务，因此您可能找错地方了。

现在，如果你真的只是想问如何解决一个地方与另一个地方的依赖关系，那么我的偏好是创建另一个名为“Composition”的项目，并在那里放置一系列模块来描述你的依赖关系。

# asp.net - Powershell计划任务打开网页执行脚本

> ID：14563003
> 
> 赞同：0
> 
> 时间：2013-01-28T13:23:42.783
> 
> 标签：asp.net, powershell, windows-server-2008

为了在 Windows 上设置类似计划任务的“cron 作业”，我使用之前的 stackoverflow 问题推荐的代码设置了 Powershell 脚本。

我有一些备份需要每天清理并删除旧备份，因此我创建了一个 asp.net 脚本来执行此任务 - 文件名为 BackupCleanup.aspx，我已确认 ASP.net 脚本在其上执行时确实有效通过访问上面的 url 拥有 - 但是我无法使用下面的 Powershell 脚本来执行它。

我正在使用的 Powershell 脚本代码是：

```
$request = [System.Net.WebRequest]::Create("http://127.0.0.1/BackupCleanup.aspx")
$response = $request.GetResponse()
$response.Close() 
```

我已经使用 PS1 扩展名创建了这个文件，它在我的操作系统（Windows 2008）中正确显示 - 我已经尝试通过右键单击并选择“使用 Powershell 运行”手动执行此任务，并将其安排为任务 - 两者徒劳无功。

我无法弄清楚为什么脚本不起作用 - 任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:25:14.950

这是我使用 IE 调用网页的 Powershell 脚本。希望这也对你有用。

```
Function NavigateTo([string] $url, [int] $delayTime = 100)
{
  Write-Verbose "Navigating to $url"

  $global:ie.Navigate($url)

  WaitForPage $delayTime
}

Function WaitForPage([int] $delayTime = 100)
{
  $loaded = $false

  while ($loaded -eq $false) {
    [System.Threading.Thread]::Sleep($delayTime) 

    #If the browser is not busy, the page is loaded
    if (-not $global:ie.Busy)
    {
      $loaded = $true
    }
  }

  $global:doc = $global:ie.Document
}

Function SetElementValueByName($name, $value, [int] $position = 0) {
  if ($global:doc -eq $null) {
    Write-Error "Document is null"
    break
  }
  $elements = @($global:doc.getElementsByName($name))
  if ($elements.Count -ne 0) {
    $elements[$position].Value = $value
  }
  else {
    Write-Warning "Couldn't find any element with name ""$name"""
  }
}

Function ClickElementById($id)
{
  $element = $global:doc.getElementById($id)
  if ($element -ne $null) {
    $element.Click()
    WaitForPage
  }
  else {
    Write-Error "Couldn't find element with id ""$id"""
    break
  }
}

Function ClickElementByName($name, [int] $position = 0)
{
  if ($global:doc -eq $null) {
    Write-Error "Document is null"
    break
  }
  $elements = @($global:doc.getElementsByName($name))
  if ($elements.Count -ne 0) {
    $elements[$position].Click()
    WaitForPage
  }
  else {
    Write-Error "Couldn't find element with name ""$name"" at position ""$position"""
    break
  }
}

Function ClickElementByTagName($name, [int] $position = 0)
{
  if ($global:doc -eq $null) {
    Write-Error "Document is null"
    break
  }
  $elements = @($global:doc.getElementsByTagName($name))
  if ($elements.Count -ne 0) {
    $elements[$position].Click()
    WaitForPage
  }
  else {
    Write-Error "Couldn't find element with tag name ""$name"" at position ""$position"""
    break
  }
}

#Entry point

# Setup references to IE
$global:ie = New-Object -com "InternetExplorer.Application"
$global:ie.Navigate("about:blank")
$global:ie.visible = $true

# Call the page
NavigateTo "http://127.0.0.1/BackupCleanup.aspx"

# Release resources
$global:ie.Quit()
$global:ie = $null 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T16:12:55.020

我遇到过同样的问题。我手动打开了 powershell 并执行了我的脚本，我收到“无法加载 WebPage.ps1，因为在此系统上禁用了运行脚本。”。

您必须允许脚本运行

在 PowerShell 中执行以下命令

Set-ExecutionPolicy RemoteSigned -Scope LocalMachine

# facebook - Facebook 身份验证不会自动关闭

> ID：14563004
> 
> 赞同：1
> 
> 时间：2013-01-28T13:23:47.813
> 
> 标签：facebook, ios6

我正在尝试将 Facebook-Connect SDK 集成到 iOS 平台上的 cocos2d-x 游戏。

我正在使用api，

```
[FBSession openActiveSessionWithReadPermissions:nil
                                   allowLoginUI:TRUE
                              completionHandler:^(FBSession *session, FBSessionState state, NSError *error)
{

if(state == FBSessionStateOpen)
 NSLog(@"Success");

} 
```

![在此处输入图像描述](../Images/88019a70a15cea4b8c971d572a598c59.png)

对话框不会在按下 OK 时关闭，但是 completionHandler 以`FBSessionStateOpen`状态成功执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:12:49.417

我看到你标记了这个问题 iOS 6 所以我假设你正在为 iOS 6 设备开发这个游戏，你将能够使用 iOS 6 与 Facebook 的集成。

我解释了我是如何做到的（[https://stackoverflow.com/a/14151853/1449151](https://stackoverflow.com/a/14151853/1449151)），但我还是把它放在这里。如果你喜欢使用 iOS 6 Facebook 集成，你可以按照这些步骤来确保你做对了。（例如，我看到您的许可为零，请参阅下面我是如何做到的）。希望能帮助到你：

好的，这就是我如何与 iOS 6 集成并从 Facebook 获得我想要的东西：

在 AppDelegate 我这样做：

```
- (BOOL)application:(UIApplication *)application
            openURL:(NSURL *)url
  sourceApplication:(NSString *)sourceApplication
         annotation:(id)annotation {
    return [FBSession.activeSession handleOpenURL:url];
}
- (void)applicationDidBecomeActive:(UIApplication *)application
{
    [FBSession.activeSession handleDidBecomeActive];
}

- (void)applicationWillTerminate:(UIApplication *)application
{
    [FBSession.activeSession close];
} 
```

在我想要检索关于我自己或我的朋友的信息的 ViewController 中，我这样做（注意：这是一个测试，所以它有很多权限！）：

```
NSArray *permissions =
    [NSArray arrayWithObjects:@"email", @"user_location",
     @"user_birthday",
     @"user_likes", @"user_interests",@"friends_interests",@"friends_birthday",@"friends_location",@"friends_hometown",@"friends_photos",@"friends_status",
     @"friends_about_me", @"friends_birthday", @"friends_hometown", @"friends_interests", @"friends_likes", @"friends_location", nil];

    [FBSession openActiveSessionWithReadPermissions:permissions
                                       allowLoginUI:YES
                                  completionHandler:^(FBSession *session, FBSessionState status, NSError *error) {
                                      /* handle success + failure in block */
                                      if (status) {
                                          NSLog(@"Facebook Read Permission is successful!");
                                          [self presentPostOptions];

                                          //   [self presentPostOptions];

                                      }
                                  }]; 
```

然后在“presentPostOptions”中我这样做（在这个例子中，我尝试从我的朋友那里检索一些东西）：

```
- (void)presentPostOptions
{

    [[FBRequest requestForMyFriends] startWithCompletionHandler:^(FBRequestConnection *connection, NSDictionary<FBGraphUser> *user, NSError *error)

     {

         if (!error) {

NSArray *data = [user objectForKey:@"data"];
             NSLog(@"%d", [data count]);
             for (FBGraphObject<FBGraphUser> *friend in data) {
                 NSLog(@"%@", [friend first_name]);
                 NSLog(@"%@", [friend last_name]);
                 NSLog(@"%@", [friend id]);
                 //make sure you have FBProfilePictureView outlet in your view
                 //otherwise skip the profile picture!
                 self.fbProfilePic.profileID = @"you'r friend's profile.id";

             }
         }
         else
         {
             NSLog(@"error");
             //  [self didFailWithError:error];
         }
     }]; 
```

我不知道您还想做什么，因为在您的问题中您只是尝试建立连接，但是这样您就可以在集成到 iOS 6 时做任何您想做的事情。

还有一件事，确保你在 Facebook 上的应用设置和那里的配置，比如为 iOS 启用你的应用和为 iPhone/iPad 启用 ID。还有您 plist 中的 FacebookAppID。

让我知道它是否适合你，

编辑：我的 Facebook SDK 是 3.1.1 顺便说一句。

# c# - 在 WPF 应用程序中嵌入 flv (flash) 播放器

> ID：14563008
> 
> 赞同：1
> 
> 时间：2013-01-28T13:24:11.760
> 
> 标签：c#, .net, wpf, flash

有没有办法将任何 Flash Player/activx 嵌入到 WPF 应用程序中以播放 FLV 文件？

我也在猜测是否可以将一些 JS 代码添加到 WPF WebBrowser 控件并在那里播放视频？

这是好方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:50:22.587

如果嵌入代码包含一个`iframe`，则取`src`of`iframe`并将其放入`WebBrowser`源代码中。

例如，对于 Youtube 视频，这是嵌入代码：

```
<iframe width="560" height="315" 
 src="http://www.youtube.com/embed/[youtubeVideoId]" 
 frameborder="0" allowfullscreen>
</iframe> 
```

您将在 WPF WebBrowser 中使用此 url：

> http://www.youtube.com/embed/[youtubeVideoID]

其他网站类似。

# c++ - 随机遍历地图会导致段错误

> ID：14563009
> 
> 赞同：2
> 
> 时间：2013-01-28T13:24:11.770
> 
> 标签：c++, map, iterator, segmentation-fault

我一直在努力解决一个相当令人费解的问题：当我的实体管理器在更新循环中遍历实体映射时，我偶尔会遇到分段错误。奇怪的是，这种情况并非一直发生。有时它会在加载时崩溃，有时我可以在出现段错误之前在应用程序状态（以及多次加载和卸载实体）之间切换几次。在调试模式下，我似乎也遇到了更多的段错误。我的实体由指向 Behavior 和 Drawable 类的指针组成。

段错误后我的调用堆栈：

```
#0 6FCB4986 libstdc++-6!_ZSt18_Rb_tree_incrementPSt18_Rb_tree_node_base() (C:\MinGW\bin\libstdc++-6.dll:??)
#1 0040A1D7 std::_Rb_tree_iterator<std::pair<unsigned int const, Entity*> >::operator++(this=0x28fe94) (c:/mingw/bin/../lib/gcc/mingw32/4.6.2/include/c++/bits/stl_tree.h:196)
#2 00401F55 EntityManager::onLoop(this=0x417238) (C:\Users\Nelarius\Documents\Kurssit\Miinaharava\src\engine\EntityManager.cpp:75)
#3 00401640 App::onLoop(this=0x417040) (C:\Users\Nelarius\Documents\Kurssit\Miinaharava\src\engine\App.cpp:38)
#4 0040160C App::execute(this=0x417040) (C:\Users\Nelarius\Documents\Kurssit\Miinaharava\src\engine\App.cpp:30)
#5 00403BD7 main(argc=1, argv=0x642908) (C:\Users\Nelarius\Documents\Kurssit\Miinaharava\src\main.cpp:15) 
```

这是我的更新循环：

```
void EntityManager::onLoop()
{
    std::map<const unsigned int, Entity*>::iterator it;

    for (it = _gameObjects.begin(); it != _gameObjects.end(); it++)
    {
        Behavior* behavior = it->second->getBehavior();
        if (behavior)
        {
            behavior->update();
        }
    }
} 
```

我得到了段错误

```
for (it = _gameObjects.begin(); it != _gameObjects.end(); it++) 
```

顺便说一句，当我不使用任何多线程时，有两个线程是否正常？我正在查看`Code::Blocks`调试窗口，并且碰巧看到线程监视窗口中有两个线程（尽管其中只有一个处于活动状态）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:45:55.030

通常这种事情归结为`behavior->update()`能够通过一系列嵌套函数调用在`_gameObjects`被修改的容器中产生结果（例如，如果在游戏对象中检测到的某些条件导致创建或删除游戏对象原因）。

**如果您从 中删除了一个元素，**这可能会使您的迭代器无效并中断您的循环**`map`，并且很难在这样的“内核”代码中发现。**

 **一个常见的解决方案是为循环复制游戏对象列表。当然，您不会复制对象本身，但您正在保护它们的列表不致在更新运行过程中发生变异。

它在调度方面也“更公平”——你基本上避免了由心怀不满的自我复制游戏对象发起的 DDoS 攻击的可能性。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:37:40.260

您正在迭代非本地数据，然后调用非本地函数。

创建本地地图。 `swap`类映射到它。迭代该本地地图。断言迭代完成后类映射未更改（您还需要断言从类映射中删除内容的所有尝试都成功）。

然后将本地地图交换回班级的地图。

这将告诉您您的崩溃是否是由您的不良设计引起的。即使没有生成任何断言，该设计仍然存在问题，因为远离上述代码的无害代码更改可能会导致发生上述问题：代码正确性的非局部性会导致问题。通过充分的测试，可以容忍带有*断言*的代码正确性的非局部性。

一般的回调问题需要您对注册回调的含义做出妥协，并涉及以类似于多线程代码的方式思考问题。如果您不愿意妥协，代码复杂性会变得非常高。建议使用智能指针来简化事情。**

# java - Java SimpleDateFormat：不可解析的日期异常

> ID：14563011
> 
> 赞同：0
> 
> 时间：2013-01-28T13:24:23.617
> 
> 标签：java, simpledateformat

代码如下所述：

```
public static void main(String[] args){
    Date date = new Date();
    DateFormat dateFormat= new SimpleDateFormat("dd-MMM-yyy");

    try{
        Date formattedDate = dateFormat.parse(date.toString());
        System.out.println(formattedDate.toString());
    }catch(ParseException parseEx){
        parseEx.printStackTrace();
    }
} 
```

在上面的代码`dateFormat.parse(date.toString())`中，抛出无法解析的日期异常：`Unparseable date: "Mon Jan 28 18:53:24 IST 2013`

我无法弄清楚它的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T13:25:36.627

使用将实例格式化`java.util.Date`为字符串`SimpleDateFormat.format(java.util.Date)`

```
Date date = new Date();
DateFormat dateFormat= new SimpleDateFormat("dd-MMM-yyy");

try {
    Date formattedDate = dateFormat.parse(dateFormat.format(date));
    System.out.println(formattedDate.toString());

} catch (ParseException parseEx) {
   parseEx.printStackTrace();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T13:26:44.463

为什么要将日期转换为字符串并将其解析回日期？

您的代码失败的原因是您尝试使用仅接受 dd-MMM-yyy 格式的日期的格式化程序转换完整日期。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T13:35:58.107

```
public static void main(String[] args) throws ParseException {

    Date date = new Date();
    DateFormat dateFormat = new SimpleDateFormat(
            "EEE MMM d HH:mm:ss Z yyyy");

    Date formattedDate = dateFormat.parse(date.toString());
    System.out.println(formattedDate);

} 
```

这正是你想要做的......是吗？

# iphone - 如何使用翻转动画为视图设置动画

> ID：14563017
> 
> 赞同：0
> 
> 时间：2013-01-28T13:24:44.463
> 
> 标签：iphone, objective-c

这是我当前的代码，但它似乎只是在翻转视图 - 我希望它翻转，即翻转看不到它。我在 viewdidload 方法中这样做：

```
[UIView animateWithDuration:1.5 delay:0.0 options:UIViewAnimationOptionOverrideInheritedDuration animations:^{
        [UIView setAnimationTransition:UIViewAnimationTransitionFlipFromLeft forView:self.alertView cache:YES];

    }completion:^(BOOL finished)
     {

     }]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:42:07.230

使用`transitionFromView:toView:duration:options:completion:`具有完整透明视图的方法作为'FromView'和你的`alertView`作为`toView`

# asp.net-mvc - 无法连接远程 PervasiveDB

> ID：14563023
> 
> 赞同：0
> 
> 时间：2013-01-28T13:24:54.733
> 
> 标签：asp.net-mvc, ado.net, pervasive

我正在开发与 PervasiveDB 交互的 ASP.NET MVC 应用程序，在单独的外部数据库服务器上运行。我使用带有连接字符串的 Pervasive ADO.NET 数据提供程序，例如：`ServerDSN=dbname;UID=user;PWD=password;ServerName=87.xxx.xx.xxx;` 在我的开发机器上，使用 IIS express 调试时一切都很好，但是当我在运行 IIS 7.0 的远程托管服务器上部署我的应用程序时，我在尝试连接数据库时遇到异常。

代码：

```
PsqlConnection conn = new PsqlConnection(ConnectionString);
conn.Open();
try
{
  PsqlCommand cmd = new PsqlCommand(query);
  cmd.Connection = conn;
  PsqlDataReader reader = cmd.ExecuteReader();
  while (reader.Read())
  {
    ...
  }
}
finally
{
  conn.Close();
} 
```

例外：

`2013-01-28 15:40:21.2574|ERROR|App.WebApiApplication|Pervasive.Data.SqlClient.PsqlException: A connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond 87.xxx.xx.xxx:1583 at Pervasive.Data.SqlClient.PsqlConnection.Open() at App.DBFacade.TestConnection() at App.WebApiApplication.Application_Start()`

从托管服务器 ping 到数据库服务器正常。

我没有意识到我的开发环境和生产环境之间有什么区别，我该如何解决这个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T13:54:55.197

此错误的原因是托管服务提供商阻止了给定 IP 和端口上的连接。

# regex - Actionscript 正则表达式搜索字符串中长度为 4 的数字

> ID：14563026
> 
> 赞同：0
> 
> 时间：2013-01-28T13:25:05.823
> 
> 标签：regex, actionscript-3, actionscript

我需要在字符串中找到 4 个连续数字的第一次出现（如果存在）。

例如：

```
你好6326 -> 6326
Tomo3753 行 -> 3753
23谢谢->（无）
1121 -> 1121

```

我知道我必须使用正则表达式，我尝试了不同的解决方案但没有运气。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:30:26.500

[/\d{4}/g](http://regexr.com?33igd)

样本：

```
 var str:String = "Hello6326 -> 6326 Tomo3753rrow -> 3753 23Thankyou -> nothing 1121 -> 1121";
    var res:Array = str.match(/\d{4}/g);
    trace(res); 
```

输出：

```
6326,6326,3753,3753,1121,1121 
```

# typo3 - 使用多个 tt_news 实例时页面浏览器出现错误

> ID：14563028
> 
> 赞同：0
> 
> 时间：2013-01-28T13:25:21.130
> 
> 标签：typo3, typoscript, tt-news

我在网页上使用两个 tt_news 视图。LIST 模式作为最新 2 条新闻的常规列表视图，HEADER_LIST 模式作为最新 10 条新闻的视图。[在这里](http://reiser.it-service-pn.de/news.html)查看它的实际应用。

问题是当您使用页面浏览器时，HEADER_LIST 会消失。[我在这里](http://pastebin.com/8WtGXc43)发布了我的 TYPOSCRIPT 配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:15:51.943

不幸的是，我看不到 HEADER_LIST。以下排版可能对您有所帮助：

```
plugin.tt_news.excludeAlreadyDisplayedNews = 0 
```

# javascript - 如何在 MVC 和 jquery 中为 FileUploading 实现附加更多文件

> ID：14563034
> 
> 赞同：0
> 
> 时间：2013-01-28T13:25:35.127
> 
> 标签：javascript, jquery, asp.net-mvc-3, asp.net-mvc-4

在雅虎的一篇文章中，在附加文件时，有一个“附加更多文件”按钮，当你按下它时，它变成一个插入文件的字段。这是代码：

```
<a href = "javascript: addUploadFields ();" id = "attach_more"> Attach more files </ a> 
```

我如何实现它 MVC？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:13:46.223

1.  创建允许您上传文件的控制器和操作

2.  找一个实现上传多个文件的客户端插件。我发现一个很好用的是[Kendo UI的 Upload 插件](http://demos.kendoui.com/web/upload/index.html)

如果您使用 Kendo UI，这应该可以帮助您入门：

*   [http://docs.kendoui.c​​om/getting-started/using-kendo-with/aspnet-mvc/helpers/upload/overview](http://docs.kendoui.com/getting-started/using-kendo-with/aspnet-mvc/helpers/upload/overview)

**控制器：**

```
 [HttpPost]
    public ActionResult Save(HttpPostedFileBase[] files) {
        // The Name of the Upload component is "attachments"
        foreach (var file in files) {
            //Do Something
        }
        // Return an empty string to signify success
        return Content("");
    } 
```

**看法**

```
<form action="/Controller/Action" method="post" enctype="multipart/form-data">
 <input type="file" name="files[]" id="file" />
...
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T06:28:05.743

您可以使用许多文件上传器，例如

[这个](http://blueimp.github.com/jQuery-File-Upload/)

您可以使用此代码上传此代码是客户端：

```
<form enctype="multipart/form-data">
<input name="file" type="file" />
<input type="button" value="Upload" />
</form>
<progress></progress> 
```

首先，您可以根据需要进行一些验证。例如在文件的 onChange 事件中。

```
 $(':file').change(function(){
        var file = this.files[0];
        name = file.name;
        size = file.size;
        type = file.type;
        //your validation
    });

$(':button').click(function(){
    var formData = new FormData($('form')[0]);
    $.ajax({
        url: 'url',  //server script to process data
        type: 'POST',
        xhr: function() {  // custom xhr
            myXhr = $.ajaxSettings.xhr();
            if(myXhr.upload){ // check if upload property exists
                myXhr.upload.addEventListener('progress',progressHandlingFunction, false); // for handling the progress of the upload
            }
            return myXhr;
        },
        //Ajax events
        beforeSend: beforeSendHandler,
        success: completeHandler,
        error: errorHandler,
        // Form data
        data: formData,
        //Options to tell JQuery not to process data or worry about content-type
        cache: false,
        contentType: false,
        processData: false
    });
});

function progressHandlingFunction(e){
    if(e.lengthComputable){
        $('progress').attr({value:e.loaded,max:e.total});
    }
} 
```

这是你的控制器

```
 [HttpPost]
    public ActionResult Save(HttpPostedFileBase[] files) {
        // The Name of the Upload component is "attachments"
        foreach (var file in files) {
            //Do Something
        }
        // Return an empty string to signify success
        return Content("");
    } 
```

所以如果你不想使用 ajax 使用这个

```
@{
    ViewBag.Title = "Upload";
}
<h2>
    Upload</h2>

@using (Html.BeginForm(actionName: "Upload", controllerName: "User", 
                       method: FormMethod.Post,
                       htmlAttributes: new { enctype = "multipart/form-data" }))
{
    <text>Upload a photo:</text> <input type="file" name="files"  multiple />
    <input type="submit" value="Upload" />
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T06:16:58.063

[这与https://stackoverflow.com/questions/14575787/ 之](https://stackoverflow.com/questions/14575787/how-to-upload-image-in-asp-net-mvc-4-using-ajax-or-any-other-technique-without-p/14576326#14576326)类的问题几乎相同。插件支持多文件上传。如果需要更多详细信息，请告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T17:29:34.747

在尝试了许多不成功的解决方案后，我得到了它

```
http://lbrtdotnet.wordpress.com/2011/09/02/asp-net-mvc-multiple-file-uploads-using-uploadify-and-jqueryui-progressbar/ 
```

[点击这个有用的链接](http://lbrtdotnet.wordpress.com/2011/09/02/asp-net-mvc-multiple-file-uploads-using-uploadify-and-jqueryui-progressbar/)

```
 I kept the Url Values in a session

 public JsonResult Upload(HttpPostedFileBase file)
    {
        if (Session["myAL"] == null)
        {
            al = new ArrayList();
        }
        else
            al = (ArrayList)Session["myAL"];

        var uploadFile = file;

            if (uploadFile != null && uploadFile.ContentLength > 0)
            {
                string filePath = Path.Combine(HttpContext.Server.MapPath("~/Content/Uploads"),
                                                   Path.GetFileName(uploadFile.FileName));                    
                al.Add(filePath);
                Session["myAL"] = al;
                uploadFile.SaveAs(filePath);
            }

        var percentage = default(float);

        if (_totalCount > 0)
        {
            _uploadCount += 1;
            percentage = (_uploadCount / _totalCount) * 100;
        }

        return Json(new
        {
            Percentage = percentage
        });
    } 
```

然后在我的 Post Create Action 中检索它们

```
public ActionResult MultimediaCreate(MultimediaModel newMultimedia)
    {            
        if (ModelState.IsValid)
        {
            db.submitMultimedia(newMultimedia);
            al = (ArrayList)Session["myAL"];
            foreach(string am in al)
            {
                MarjaaEntities me = new MarjaaEntities();
                MultimediaFile file = new MultimediaFile();
                file.MultmediaId = newMultimedia.id;
                file.MultimediaFileUrl = am;
                me.MultimediaFiles.AddObject(file);
                me.SaveChanges();
                Session.Remove("myAL");
            }
            return RedirectToAction("MultimediaIndex");
        }
        return View();
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T14:06:29.727

为了使用文件上传控件上传多个文件，我使用简单易看的 JQuery Multifile 插件。请参阅此链接[JQuery Multiple File Upload](http://www.fyneworks.com/jquery/multiple-file-upload/)

只包括这个库和 JQuery，它的语法就像

```
<input type="file" class="multi"/> 
```

# jquery - 检测 iframe 变化的内容，内容是动态的（jQuery mobile）

> ID：14563041
> 
> 赞同：0
> 
> 时间：2013-01-28T13:25:43.620
> 
> 标签：jquery, html

好的，我在 iFrame 中加载了一个支持 jQuery 移动的页面。

通常，如果我想检测 iframe 内容更改，我会使用：

```
$('iframe').load(function(){
   //content changed!
}); 
```

但在这种情况下，它不同，这个 iframe 加载了一个启用了 jQuery 移动的页面（它是一个移动站点）。jQuery mobile 使用 ajax 从服务器获取 html 数据。然后更改页面内容而不重新加载。我认为它被称为动态内容。

注意：iframe 内页面的域与父窗口域相同。

那么我将如何检测此 iframe 内容更改？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:17:43.400

未经测试，但你有 ajaxStart 和 ajaxComplete 方法，它会触发，你可以尝试：

```
$('#iframe').bind('load',function(){
    var instance = this.contentWindow.jQuery,
        doc = this.contentWindow.document;

    instance(doc).ajaxStart(function(){console.log('ajaxStart');});
    instance(doc).ajaxComplete(function(){console.log('ajaxComplete');});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-03-22T22:47:53.047

如果您**不想**使用 jQuery 旧的**“绑定”**，请尝试：

```
$('#my-iframe-id').load(function(){

    var instance = this.contentWindow.jQuery,
    doc = this.contentWindow.document;

    instance(doc).ajaxStart(function(){
        console.log('ajaxStart');
    });
    instance(doc).ajaxStop(function(){
        console.log('ajaxStop');
        // This is the place to check or compare window heights = changed content
    });
    instance(doc).ajaxComplete(function(){
        console.log('ajaxComplete');
    });

}); 
```

# sql - SQL、值太多、结果合并

> ID：14563050
> 
> 赞同：1
> 
> 时间：2013-01-28T13:26:10.760
> 
> 标签：sql, oracle, optimization, profiling, ora-00913

我的 SQL 查询有问题，事实上，当我尝试执行此操作时，我有这样的响应：我想要做的是计算总和和计数

你能帮我吗 ？十分感谢

ORA-00913：太多值 00913\. 00000 - “太多值” *原因：
*操作：Erreur à la ligne 2，colonne 5

* * *

```
select distinct 
(select sum(che1.mon), count(che1.typ)
from awbeprod_fr.CHE_BKFRACOMC che1 
where che.ncp = che1.ncp and che.pie=che1.pie and che.typ in ('T','C')),

(select sum(che1.mon) 
from awbeprod_fr.CHE_BKFRACOMC che1 
where che.ncp = che1.ncp and che.typ = che1.typ and che.typ ='F'),

che.ncp, 
m.cpro, m.age,  m.ribdec,  m.dev,
p.lib, cli.cli, cli.pre, cli.nom, 
adcli.adr1, adcli.adr2, adcli.adr3, adcli.cpos, adcli.ville
from 
awbeprod_fr.CHE_BKFRACOMC che, awbeprod_fr.bkcom m, 
awbeprod_fr.bkprod p, awbeprod_fr.bkcli cli, 
awbeprod_fr.bkadcli adcli
where che.ncp = m.ncp 
and che.cli = m.cli and m.cli = cli.cli
and cli.cli = adcli.cli and m.cpro = p.cpro
and che.ncp = '11000003415'
order by che.ncp 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:37:49.703

ANSI JOIN 的使用将使您的请求更清晰，而 GROUP BY 的使用应该可以帮助您“多合一”。

```
SELECT 
SUM (CASE WHEN che.typ in ('T', 'C') THEN che.mon ELSE 0 END) sumMonTC,
SUM (CASE WHEN che.typ in ('T', 'C') THEN 1       ELSE 0 END) cntMonTC,
SUM (CASE WHEN che.typ ='F'          THEN che.mon ELSE 0 END) sumMonF,
che.ncp, 
m.cpro, m.age,  m.ribdec,  m.dev,
p.lib, cli.cli, cli.pre, cli.nom, 
adcli.adr1, adcli.adr2, adcli.adr3, adcli.cpos, adcli.ville

FROM awbeprod_fr.CHE_BKFRACOMC che
    INNER JOIN awbeprod_fr.bkcom m ON che.ncp = m.ncp AND che.cli = m.cli
    INNER JOIN awbeprod_fr.bkprod p ON m.cpro = p.cpro
    INNER JOIN awbeprod_fr.bkcli cli ON m.cli = cli.cli
    INNER JOIN awbeprod_fr.bkadcli adcli on cli.cli = adcli.cli
WHERE che.ncp = '11000003415'
GROUP BY che.ncp, 
m.cpro, m.age,  m.ribdec,  m.dev,
p.lib, cli.cli, cli.pre, cli.nom, 
adcli.adr1, adcli.adr2, adcli.adr3, adcli.cpos, adcli.ville
ORDER BY che.ncp 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:29:08.447

如果您使用子查询，则必须返回一个值，而不是两个或更多。因此，只需将您的第一个子查询分为两个：

```
select distinct 
(select sum(che1.mon)
from awbeprod_fr.CHE_BKFRACOMC che1 
where che.ncp = che1.ncp and che.pie=che1.pie and che.typ in ('T','C')),

(select count(che1.typ)
from awbeprod_fr.CHE_BKFRACOMC che1 
where che.ncp = che1.ncp and che.pie=che1.pie and che.typ in ('T','C')),

(select sum(che1.mon) 
from awbeprod_fr.CHE_BKFRACOMC che1 
where che.ncp = che1.ncp and che.typ = che1.typ and che.typ ='F'),

che.ncp, 
m.cpro, m.age,  m.ribdec,  m.dev,
p.lib, cli.cli, cli.pre, cli.nom, 
adcli.adr1, adcli.adr2, adcli.adr3, adcli.cpos, adcli.ville
from 
awbeprod_fr.CHE_BKFRACOMC che, awbeprod_fr.bkcom m, 
awbeprod_fr.bkprod p, awbeprod_fr.bkcli cli, 
awbeprod_fr.bkadcli adcli
where che.ncp = m.ncp 
and che.cli = m.cli and m.cli = cli.cli
and cli.cli = adcli.cli and m.cpro = p.cpro
and che.ncp = '11000003415'
order by che.ncp 
```

# css - 什么是 CSS 创作框架？

> ID：14563058
> 
> 赞同：22
> 
> 时间：2013-01-28T13:26:35.417
> 
> 标签：css, ruby-on-rails, ruby-on-rails-3.2, compass-sass

*当我使用Compass*时，我正在寻找一个 CSS 框架来帮助我建立网站。

现在，虽然我了解 CSS 框架是什么，但我不明白什么是 CSS**创作**框架。

特别是，我不明白它是否“替换”了 CSS 框架（如蓝图），或者您应该将它**与**CSS 框架一起使用。

我正在使用 Ruby On Rails 构建一个网站，我使用 SASS 但目前没有 CSS 框架。如果有人在回答问题后能指出我正确的方向，将不胜感激。

**编辑 1：** 另外，这是 CSS 框架和 CSS 创作框架之间的区别

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-28T14:24:18.187

CSS 框架（在大多数情况下）是一组固定的基本 CSS 定义。它为一些类带来了定义，这些类使得基于 div 的基本 HTML 布局可用于不同的屏幕宽度。（又名液体布局）

CSS 创作框架（指 Compass 的意思）没有固定的 CSS 定义集。与标准 CSS 框架相反，它有助于使用各种帮助程序编写 CSS 规则 - 但您必须自己编写几乎所有 CSS 定义。帮助者的一些示例： Compass 帮助您修复一些[常见的浏览器问题](http://compass-style.org/reference/compass/utilities/general/clearfix/)（[IE 浮动 ..](http://compass-style.org/reference/compass/utilities/general/float/)）。您可以使用所有 CSS 定义动态地从现有图像[创建 CSS 精灵。](http://compass-style.org/help/tutorials/spriting/)

您可以在 CSS 创作框架的帮助下编写自己的 CSS 框架，也可以在现有的 CSS 框架之上进行简单的构建。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T14:18:40.603

CSS 框架是预先准备好的库，旨在允许使用级联样式表语言更轻松、更符合标准的网页样式。

布局网格相关的 CSS 框架包括 Bootstrap、Blueprint、960 网格、YUI CSS 和其他网格。

与编程和脚本语言库一样，CSS 框架通常作为 HTML 中引用的外部 .css 工作表合并。

它们为设计和布局网页提供了许多现成的选项。虽然其中许多框架已经发布，但一些作者主要将它们用于快速原型设计，或用于学习并更喜欢“手工制作”适合每个已发布站点的 CSS，而无需设计、维护和下载具有许多未使用功能的开销在网站的样式中。

不知何故，CSS 框架 == CSS 创作框架

# css - 日文标准网页字体

> ID：14563064
> 
> 赞同：53
> 
> 时间：2013-01-28T13:26:49.397
> 
> 标签：css, fonts, multilingual, webfonts

我在一个日文网站上工作，很难找到一种在日文中看起来不错的字体。令我惊讶的是，日语的字体似乎如此之少。我的团队已经联系了几家网络字体提供商，但没有取得多大成功。只有一家公司可以为日文提供网络字体，但它是 35 兆字节，对于客户下载到他们的浏览器来说太大了。

对于拉丁字母，有一些几乎所有用户都可以确信的字体，例如 Arial、Verdana、TNR、Georgia 等。在日本什么字体等于这些？

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2013-01-29T00:40:30.567

日文的网络字体，虽然提供者很少，但实际上并不实用，因为您发现字体数据的大小太大而无法下载。通常日文字体有 8,000-16,000 个字形，因此制作新字体意味着您至少需要制作 8,000 个字形，这是一项相当繁重的任务。因此，日文字体的变化非常少，而且日文用户对字体的关心程度也低于拉丁字符用户。

大多数日本网站使用 Windows 或 Mac 上提供的默认字体集。最新的是 Meiryo 和 Hiragino Kaku Gothic Pro。对于 Windows XP 等旧版本，最好添加以前的默认字体 MS Gothic（或 MS Mincho）/Osaka。

一些旧浏览器无法理解这些英文字体名称，另一些则无法识别日文名称，因此用日文和英文书写是安全的。

Meiryo 和 Hiragino 的顺序是，因为 Mac 用户可能有来自 MS-Office 的 Meiryo，而 Hiragino 在 Mac 上更加熟悉和匹配，最好启动 Hiragino 系列。

所以目前推荐的做法是这样的，

```
font-family:"ヒラギノ角ゴ Pro W3", "Hiragino Kaku Gothic Pro",Osaka, "メイリオ", Meiryo, "ＭＳ Ｐゴシック", "MS PGothic", sans-serif; 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-29T10:43:53.633

字体不一定是“网络字体”（woff）才能在网络上使用。我在我的网站上使用了其中的几个：

*   [http://cooltext.com/Fonts-Unicode-日语](http://cooltext.com/Fonts-Unicode-Japanese)
*   [http://www.wazu.jp/gallery/Fonts_Japanese.html](http://www.wazu.jp/gallery/Fonts_Japanese.html)

但这里有一些免费的日语网络字体（我也使用）：

*   [http://mplus-fonts.osdn.jp/about-en.html](http://mplus-fonts.osdn.jp/about-en.html)

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-01-28T23:40:24.530

我不是字体/设计专家，但几乎每台日本电脑都应该安装你提到的基本拉丁字体，这样它们才能工作。但是这些字体给日本字符带来了一种西方的外观。如果你想使用日本网站通常使用的字体，我会先浏览一些更流行的日本网站，然后使用 Firebug 或 Chrome 开发者工具等工具来检查 CSS 并查看它们引用的字体。例如，yahoo.co.jp 目前有这个 CSS：

```
font-family: 'MS PGothic', Osaka, Arial, sans-serif; 
```

“[哥特式](http://en.wikipedia.org/wiki/East_Asian_gothic_typeface)”字体近来似乎相当流行：在 Windows 上，MS Gothic、MS PGothic 等[字体](http://en.wikipedia.org/wiki/Ming_%28typefaces%29)也被广泛使用。这些是我的日文 Windows 机器上 Firefox 的默认浏览器字体设置：

![日文火狐字体设置](../Images/be2059c1f471d23d717be775663b70df.png)

比例字体为无衬线字体，即MS PGothic，衬线字体为MS PMing，等宽字体为MS Gothic。

顺便说一句，“[大阪](http://ja.wikipedia.org/wiki/Osaka_%28%E6%9B%B8%E4%BD%93%29)”字体是 90 年代日本 Mac 上的标准字体。除非您想要那种“复古”的感觉，否则强烈建议在 macOS 和 iOS 设备上使用“Hiragino Sans”（不是已弃用的 Kaku Gothic），以获得一致且现代的外观和更好的易读性。此外，Hiragino Sans 的字体粗细（10）比 Kaku Gothic（只有 2）多得多。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-10-14T17:31:32.617

这是一个旧线程，但对于现在对此进行研究的任何人，您应该注意，Meiryo 不再是 Windows 加载的标准字体。从 Windows 10 开始，新的默认字体为 Yu Gothic。但是，您仍然可以手动安装 Meiryo。请看这篇[文章](http://answers.microsoft.com/en-us/insider/forum/insider_wintp-insider_perf/fonts-in-windows-10/e856c620-b8b6-4435-b03a-0c3f36d914db?auth=1)

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2021-09-24T08:45:53.790

经过我的研究以及我在日本的生活和工作经验，这是 2021 年的答案。我喜欢[这篇文章](https://www.csstux.com/font-family.html)，虽然它是日文的，所以我会尽力总结。以下是一些主要公司在日本使用的产品：

**日経 / 日经**

```
font-family: "ヒラギノ角ゴ Pro W3","Hiragino Kaku Gothic Pro","メイリオ",Meiryo,"ＭＳ Ｐゴシック&quot;,sans-serif; 
```

**产経 / Sankei**

```
font-family: "ヒラギノ角ゴ ProN W3","HiraKakuProN-W3","ヒラギノ角ゴ Pro W3","HiraKakuPro-W3","メイリオ",Meiryo,"ＭＳ Ｐゴシック&quot;,"MS Pgothic","Osaka",sans-serif,Helvetica, Helvetica Neue, Arial, Verdana; 
```

**ロイター / 路透社**

```
font-family: "Hiragino Kaku Gothic Pro","Meiryo","MS Pgothic",knowledge-reg,helvetica,arial,sans-serif; 
```

**美国有线电视新闻网**

```
font-family:  "メイリオ", Meiryo, Tahoma, Verdana, "ヒラギノ角ゴ Pro W3", "Hiragino Kaku Gothic Pro", Osaka, "ＭＳ Ｐゴシック&quot;, "MS PGothic", sans-serif; 
```

**雅虎**

```
font-family: "メイリオ","Hiragino Kaku Gothic Pro",Meiryo,"ヒラギノ角ゴ Pro W3","MS PGothic","MS UI Gothic",Helvetica,Arial,sans-serif; 
```

**时事通讯 / Jiji Press**

```
font-family: "ヒラギノ角ゴ ProN W3","HiraKakuProN-W3","ヒラギノ角ゴ Pro W3","HiraKakuPro-W3","メイリオ",Meiryo,"ＭＳ Ｐゴシック&quot;,"MS Pgothic","Osaka",sans-serif,Helvetica, Helvetica Neue, Arial, Verdana; 
```

请注意，有时建议（[例如此处](https://hayataki-masaharu.jp/web-typography-in-japanese/)）使用 Mincho 字体堆栈，例如：

```
font-family : 'ヒラギノ角ゴ ProN' , 'Hiragino Kaku Gothic ProN' , '游ゴシック' , '游ゴシック体' , YuGothic , 'Yu Gothic' , 'メイリオ' , Meiryo , 'ＭＳ ゴシック' , 'MS Gothic' , HiraKakuProN-W3 , 'TakaoExゴシック' , TakaoExGothic , 'MotoyaLCedar' , 'Droid Sans Japanese' , sans-serif; 
```

我在这里学到了一些东西：*一些*日本人更喜欢 Gothic 或其他字体而不是 Mincho 字体，因为根据某些人的说法，Mincho 看起来更“中国”。上述公司都没有使用 Mincho 作为证据。不管你喜不喜欢，我想在品牌推广时要记住这一点。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-10-10T14:26:26.137

这是一个旧线程，但我今天正在研究这个，发现 Noto Sans 已经准备好生产（几年前我读过的东西）。

我已经用日语试过了，它看起来真的很好，链接在这里：[https ://www.google.com/get/noto/](https://www.google.com/get/noto/)

如果您不想下载整个软件包，日文字体称为“Noto Sans CJK JP”（中国/日本/韩国日本）。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-01-31T21:00:25.993

对于将来可能会来的人，有一篇由日本文案撰写的关于这个问题的很棒的（长而深刻的）文章：[日语网页排版最全面的指南](http://hayataki-masaharu.jp/web-typography-in-japanese/)。

例如：

> 日文汉字字符使用比字母数字字符更多的像素，因为它们由许多笔画组成。例如，字母字符“A”只需要 7 x 7 像素，但汉字字符“舰”需要 15 x 15 像素才能读取。

因此，这不仅是数量问题，还取决于每个字符的像素。现在很明显了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-14T09:00:34.933

'Noto Sans CJK JP' 也可用于 Ubuntu linux。它作为官方包“fonts-noto-cjk”提供。仍然需要手动安装，预计安装在日本的 Ubuntu 机器上。

# ssrs-2008 - 下拉菜单未在 ReportViewer 中加载

> ID：14563066
> 
> 赞同：0
> 
> 时间：2013-01-28T13:26:55.753
> 
> 标签：ssrs-2008

有一个 asp.net 应用程序，用于使用报表查看器控件从 SSRS 报表服务器查看报表。正在使用 SSRS 2005。现在已升级到 SSRS 2008 R2。在使用 SSRS 2005 时，asp.net 应用程序中的报表查看器控件工作正常。现在升级后，控件无法正确加载，例如下拉控件显示带有交叉图标（好像未找到图像）并且未加载导航图标。

但是，当我们访问报表服务器 URL 时，报表会以正确的图标显示正确显示。任何人都可以解释这个问题的解决方案。

环境细节

SQL SERVER 报告服务器 2008 R2 IE9 Windows 2008 R2

# python - 如何在 Python 中声明单个数组值？

> ID：14563071
> 
> 赞同：1
> 
> 时间：2013-01-28T13:27:06.417
> 
> 标签：python, xmpp

我目前正在使用[python-jabberbot](http://thp.io/2007/python-jabberbot/)并且无法创建一个发送随机句子的简单方法。我不精通python，所以我想知道我哪里出错了。我有一种感觉，我声明数组的方式是我的失败：

```
def whatdoyouknow(self, mess, args):
        """random response"""   
        string[0] = 'this is a longish sentence about things'
        string[1] = 'this is a longish sentence about things number 2'
        string[2] = 'this is a longish sentence about things number 3'

        i = random.randint(0, 2)
        return string[i] 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T13:28:40.770

您可以通过将元素放在方括号中来定义列表文字：

```
string = ['this is a longish sentence about things',
          'this is a longish sentence about things number 2',
          'this is a longish sentence about things number 3'] 
```

或者，您可以通过定义一个空列表来构建列表，然后附加元素：

```
string = []
string.append('this is a longish sentence about things')
string.append('this is a longish sentence about things number 2')
string.append('this is a longish sentence about things number 3') 
```

我强烈建议您在继续之前阅读[Python 教程](http://docs.python.org/2/tutorial/)，它解释了构建 Python 类型以及如何为您操作它们。

# visual-studio-2010 - Visual Studio 2010 C++：如何判断链接器实际尝试链接的 LIB 文件？

> ID：14563072
> 
> 赞同：3
> 
> 时间：2013-01-28T13:27:11.287
> 
> 标签：visual-studio-2010, linker, visual-c++-2010

我正在使用 Visual Studio 2010 Pro 中的（非托管）x64 Win32 C++ 应用程序，并且不断收到奇怪的链接错误。

此应用程序通过包含使用`LoadImage()`Windows API 功能`windows.h`。虽然应用程序在 Release 配置中编译得很好（并`LoadImage()`完成了它的工作），但我无法在 Debug 配置中获得链接的可执行文件。我不断收到此错误：

```
Redacted.obj : error LNK2019: unresolved external symbol __imp_LoadImageW referenced in function "public: int __cdecl Redacted::Redacted::Execute(void)" (?Execute@Redacted@Redacted@@QEAAHXZ)
C:\Users\redacted\Documents\Visual Studio 2010\Projects\Redacted\x64\Debug\Redacted.exe : fatal error LNK1120: 1 unresolved externals 
```

如果我从 Unicode 切换到非多字节字符集，错误消息将相应地更改`LoadImageW()`为`LoadImageA()`，但否则会持续存在。由于我在 Release 和 Debug 配置的属性中找不到任何相关差异，我不知道为什么它会编译成一个，而不是另一个。`User32.lib`在两种配置中都正确设置为链接器的*附加依赖*`/MACHINE:X64`项，并且在两者中都设置了标志。

由于链接器不会抱怨找不到 . `User32.lib`，因此我相信它试图从 Platform SDK 链接错误的版本，即 32 位版本。但是我怎样才能找出链接器实际尝试使用的 LIB 文件的确切副本呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T13:38:05.790

检查全局配置设置中的链接器路径。很可能其中一个是错误的。

除此之外，我相信有一个链接器 /VERBOSE 标志（或类似的东西）将显示您正在寻找的信息。它位于您正在构建的项目的链接器设置中。

# c# - 生成的 MSIL 抛出“公共语言运行时检测到无效程序”。

> ID：14563074
> 
> 赞同：1
> 
> 时间：2013-01-28T13:27:12.097
> 
> 标签：c#, .net, cil, reflection.emit

我正在尝试编写动态方法来克隆 Dictionary<,>。
下面给出的代码抛出异常：

```
未处理的异常：System.Reflection.TargetInvocationException：调用的目标已引发异常。
---> System.InvalidProgramException：公共语言运行时检测到无效程序。
   在克隆（字典`2）
   --- 内部异常堆栈跟踪结束 ---
   在 System.RuntimeMethodHandle.InvokeMethod（对象目标，对象 [] 参数，签名 sig，布尔构造函数）
   在 System.Reflection.RuntimeMethodInfo.UnsafeInvokeInternal（对象 obj，对象 [] 参数，对象 [] 参数）
   在 System.Delegate.DynamicInvokeImpl（对象 [] 参数）
   在 x:\MsilTests\MsilTests\DynamicHelper.cs:line 17 中的 MsilTests.DynamicHelper.Clone[TKey,TValue](Dictionary`2 source)
   在 x:\MsilTests\MsilTests\Program.cs:line 11 中的 MsilTests.Program.Main(String[] args)

```

当我添加行时发生此异常：

```
generator.Emit(OpCodes.Callvirt, enumeratorType.GetMethod("MoveNext")); 
```

我不知道为什么会抛出这个异常。如果有人可以帮助解决这个问题，我将不胜感激。

```
 public static class DynamicHelper
    {
        public static Dictionary<TKey, TValue> Clone<TKey, TValue>(Dictionary<TKey, TValue> source)
        {
            var type = typeof (Dictionary<,>).MakeGenericType(typeof (TKey), typeof (TValue));
            var genericFunc = typeof(Func<,>);
            genericFunc = genericFunc.MakeGenericType(type, type);
            var method = new DynamicMethod("Clone", type, new[] { type }, Assembly.GetExecutingAssembly().ManifestModule, true);
            GenerateMsil(method, type);
            return (Dictionary<TKey, TValue>)method.CreateDelegate(genericFunc).DynamicInvoke(source);
        }

        private static void GenerateMsil(DynamicMethod method, Type type)
        {
            var genArgs = type.GetGenericArguments();
            var keyType = genArgs[0];
            var valueType = genArgs[0];
            var pairType = typeof(KeyValuePair<,>).MakeGenericType(keyType, valueType);
            var enumeratorType = typeof(Dictionary<,>.Enumerator).MakeGenericType(keyType, valueType);
            var enumerableType = typeof (IEnumerable<>).MakeGenericType(pairType);

            var generator = method.GetILGenerator();

            var labelRet = generator.DefineLabel();
            var labelEndFinally = generator.DefineLabel();
            var labelMove = generator.DefineLabel();
            var labelWhile = generator.DefineLabel();

            var source = generator.DeclareLocal(type);                  //local_0
            var target = generator.DeclareLocal(type);                  //local_1
            var enumerator = generator.DeclareLocal(enumeratorType);    //local_2
            var pair = generator.DeclareLocal(pairType);                //local_3
            var key = generator.DeclareLocal(keyType);                  //local_4
            var value = generator.DeclareLocal(valueType);              //local_5

/*Stack   */
/*[0]     */
/*[1] +1  */generator.Emit(OpCodes.Newobj, type.GetConstructor(Type.EmptyTypes));
/*[0] -1  */generator.Emit(OpCodes.Stloc, target);
/*[1] +1  */generator.Emit(OpCodes.Ldarg_0);
/*[0] -1  */generator.Emit(OpCodes.Stloc, source);
/*[1] +1  */generator.Emit(OpCodes.Ldloc, source);
/*[1] -1+1*/generator.Emit(OpCodes.Callvirt, type.GetMethod("GetEnumerator"));
/*[0] -1  */generator.Emit(OpCodes.Stloc, enumerator);

            var tryFinally = generator.BeginExceptionBlock();
            // try {
            generator.Emit(OpCodes.Br_S, labelMove);
            generator.MarkLabel(labelWhile);

/*[1] +1  */generator.Emit(OpCodes.Ldloca, enumerator);
/*[1] -1+1*/generator.Emit(OpCodes.Callvirt, enumeratorType.GetProperty("Current").GetGetMethod());
/*[0] -1  */generator.Emit(OpCodes.Stloc, pair);

/*[1] +1  */generator.Emit(OpCodes.Ldloca, pair);
/*[1] -1+1*/generator.Emit(OpCodes.Callvirt, pairType.GetProperty("Key").GetGetMethod());
/*[0] -1  */generator.Emit(OpCodes.Stloc, key);

/*[1] +1  */generator.Emit(OpCodes.Ldloca, pair);
/*[1] -1+1*/generator.Emit(OpCodes.Callvirt, pairType.GetProperty("Value").GetGetMethod());
/*[0] -1  */generator.Emit(OpCodes.Stloc, value);

/*[2] +1  */generator.Emit(OpCodes.Ldloc, target);
/*[1] +1  */generator.Emit(OpCodes.Ldloc, key);
/*[3] +1  */generator.Emit(OpCodes.Ldloc, value);   
/*[0] -3  */generator.Emit(OpCodes.Callvirt, type.GetMethod("Add"));

            generator.MarkLabel(labelMove);
/*[1] +1  */generator.Emit(OpCodes.Ldloc, enumerator);
/*[1] -1+1*/generator.Emit(OpCodes.Callvirt, enumeratorType.GetMethod("MoveNext"));
/*[0] -1  */generator.Emit(OpCodes.Brtrue_S, labelWhile);
            generator.Emit(OpCodes.Leave_S, labelRet);
            // } finally {
            generator.BeginFinallyBlock();
/*[1] +1  */generator.Emit(OpCodes.Ldloca, enumerator);
/*[0] -1  */generator.Emit(OpCodes.Brfalse_S, labelEndFinally);
/*[1] +1  */generator.Emit(OpCodes.Ldloc, enumerator);
/*[0] -1  */generator.Emit(OpCodes.Callvirt, enumeratorType.GetMethod("Dispose"));
            generator.MarkLabel(labelEndFinally);
            generator.Emit(OpCodes.Endfinally);
            // }
            generator.EndExceptionBlock();
            generator.MarkLabel(labelRet);

/*[1] +1  */generator.Emit(OpCodes.Ldloc, target);
/*[0] -1  */generator.Emit(OpCodes.Ret);
        }
    } 
```

**更新**：感谢大家对我的问题的帮助和关注。我已经解决了这个问题，它包括将 Ldloc 与 Dictionary<,>.Enumerator 一起使用，但是 Dictionary<,>.Enumerator 是一种值类型，使用 Ldloca 将局部变量的地址传递给 Call 或 Callvirt 很重要。我用正确的代码更新了源代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:32:34.237

`GetEnumerator`应该使用`CallVirt`. 在底部，您有：

```
generator.Emit(OpCodes.Ldloc, enumerator); // +1
generator.Emit(OpCodes.Callvirt, enumeratorType.GetMethod("MoveNext")); // -1+1
generator.Emit(OpCodes.Ldloc, target); // +1
generator.Emit(OpCodes.Ret); // should be 0 if void, or 1 for non-void 
```

那是堆栈上的两个值，您还没有弹出。应该只有一个。

`MoveNext`如果您不打算使用它，请删除对它的调用；这意味着您还需要删除它`Ldloc`之前的。

以下工作（但没有做任何有趣的事情）：

```
// Create instance of Dictionaty<,>
generator.Emit(OpCodes.Newobj, type.GetConstructor(Type.EmptyTypes));
// Store instance in local variable "target"
generator.Emit(OpCodes.Stloc, target);
// Load first method argument to the stack (for static method - argument, for non-static - instance for with method called)
generator.Emit(OpCodes.Ldarg_0);
// Store argument in local variable "source"
generator.Emit(OpCodes.Stloc, source);
// Load value of local variable "source" to the stack
generator.Emit(OpCodes.Ldloc, source);
// Call method GetEnumerator of type IEnumerable<> 
generator.Emit(OpCodes.Callvirt, type.GetMethod("GetEnumerator"));
// Store value returned from method in local variable "enumerator"
generator.Emit(OpCodes.Stloc, enumerator);

generator.Emit(OpCodes.Ldloc, target);
generator.Emit(OpCodes.Ret); 
```

然而，它在语义上等价于：

```
generator.Emit(OpCodes.Newobj, type.GetConstructor(Type.EmptyTypes));
generator.Emit(OpCodes.Ret); 
```

（但没有泄漏枚举器）

# ruby-on-rails - RoR：“rails server”延迟负载？

> ID：14563078
> 
> 赞同：0
> 
> 时间：2013-01-28T13:27:17.650
> 
> 标签：ruby-on-rails

我是 RoR 的新手，并且正在构建一些初学者的项目 - 但我不熟悉 RoR 上的错误处理。例如，我正在[这里做这个项目](http://rubysource.com/building-your-first-rails-application-models/)，尽管我发现它的网站警告它有一些错误（如果你知道一个基于你拥有的域缩短 url 的程序，没有错误，让我知道，我会使用它）。我遇到的问题在于步骤：

```
rails server 
```

它产生作者显示的结果，然后显示安全警告。在安全警告下方，它具有三个带有 INFO WEBBrick 和 INFO ruby​​ 的时间戳。然而，一个小时后，它仍然存在——它并没有将应用程序带回到代码的原始位置（即：C:\Location）。

这是一个错误吗？还是应该加载？我问是因为从文章看来我可以继续下一步（三十分钟后，我按 ENTER 键只是为了看看会发生什么，但没有响应），但是 - 除非我打开一个新的命令提示符 - 我不会没有看到这种情况发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:10:51.643

你有没有提出任何要求？

在 Rails 服务器启动后，它将“永远”等待服务客户端请求（例如，来自浏览器的请求）。在 Windows 下，该命令提示符在服务器关闭之前将无用，例如，使用`Ctrl-C`.

您可以像之前那样打开一个新的命令窗口，也可以关闭服务器并使用相同的窗口。有时您*需要*重新启动服务器，而很多时候您不需要重新启动服务器，这毫无价值。弄清楚何时以及在什么情况下是确定性的，但有时会令人困惑。

# mysql - 检测负面变化并据此采取行动

> ID：14563083
> 
> 赞同：0
> 
> 时间：2013-01-28T13:27:37.493
> 
> 标签：mysql

我有这张表，我只想看 AB

```
ID     CODE       COUNT   
102    AB         9
101    AB         8
100    AC         23    //not important!!!!
99     AB         7
98     AB         6
97     AB         5
96     AB         0 
```

然后我想计算具有 CODE 'AB' 的特定 ID 之间的差异

所以

```
Step 1: 9 - 8 = 1   // (corrected sample data. this line was wrong)
Step 2: 8 - 7 = 1
Step 3: 7 - 6 = 1
Step 4: 6 - 5 = 1
Step 5: 5 - 0 = 5 
```

这是我通过@bonCodigo 提出的这个查询来完成的

```
select ID, DIFFERENCE, 
COUNT from (
    SELECT
    t.ID, t.CODE, t.COUNT,
    @PREVCOUNT,
    @PREVCOUNT - t.COUNT DIFFERENCE,
    @PREVCOUNT := t.COUNT  -- Updates for the next iteration, so it
                           -- must come last!
    FROM
    (SELECT ID, CODE, COUNT FROM some_table WHERE CODE = 'AB' ORDER BY ID DESC) t,
    (SELECT @PREVCOUNT := NULL) _uv
    group by t.id, t.code
    )x
where x.difference >= 0
order by ID DESC; 
```

由于我的新传入数据有时会重置计数，因此它从 0 开始计数直到任何值。

所以有时我会按以下顺序获取数据：

```
ID        COUNT
1\.        0
2\.        1
3\.        2
4\.        7
5\.        4     // which means the counter has reset to 0 and counted up to 4 again.
6\.        5 
```

现在我的查询正在做什么，它只计算积极的变化并将其视为差异。

那么它的作用：

```
Step 1: 1 - 0 = 1
Step 2: 2 - 1 = 1
Step 3: 7 - 2 = 5
Step 4: 4 - 7 = -3 //discarded as this difference is smaller than 0
Step 5: 5 - 4 = 1 
```

所以如果我 SUM() 这个我得到**8** [http://sqlfiddle.com/#!2/6924a/2](http://sqlfiddle.com/#!2/6924a/2)

虽然我希望此代码在出现负差时从 0 开始计数

所以我想要什么：

```
Step 1: 1 - 0 = 1
Step 2: 2 - 1 = 1
Step 3: 7 - 2 = 5
Step 4: 4 - 7 = -3  BUT MAKE IT 4 because the counter started from 0 again.
Step 5: 5 - 4 = 1 
```

所以如果我 SUM() 这个我得到**12**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:29:08.977

一个**IF**语句就可以解决问题。

```
IF((@PREVCOUNT - t.COUNT) < 0, @PREVCOUNT, (@PREVCOUNT - t.COUNT)) DIFFERENCE 
```

这是工作小提琴：[http ://sqlfiddle.com/#!2/6924a/7/0](http://sqlfiddle.com/#!2/6924a/7/0)

修改后的查询是：

```
select ID, DIFFERENCE, 
COUNT from (
    SELECT
    t.ID, t.CODE, t.COUNT,
    @PREVCOUNT,
    IF((@PREVCOUNT - t.COUNT) < 0, @PREVCOUNT, (@PREVCOUNT - t.COUNT)) DIFFERENCE,
    @PREVCOUNT := t.COUNT  -- Updates for the next iteration, so it
                           -- must come last!
    FROM
    (SELECT ID, CODE, COUNT FROM some_table WHERE CODE = 'AB' ORDER BY ID DESC) t,
    (SELECT @PREVCOUNT := NULL) _uv
    group by t.id, t.code
    )x
where x.difference >= 0
order by ID DESC; 
```

# php - Doctrine2 仅使用对象更新

> ID：14563086
> 
> 赞同：3
> 
> 时间：2013-01-28T13:27:45.123
> 
> 标签：php, orm, doctrine-orm

有什么方法可以在不使用 DQL 和 Native SQL 的情况下使用 Doctrine2 中的标准进行更新？我的意思是只使用对象。

例如这样的：

```
$data = new Entities\Articles();
$data->setStatus("published");

/*
  Add some criteria for update here 
*/

$em->persist($data);
$em->flush(); 
```

我想要做的：更新多条记录而不从数据库中加载它们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T03:08:33.093

不，Doctrine ORM 目前不支持使用标准 API 进行更新。Criteria API 目前仅可用于获取数据，并且仍处于非常早期的状态。

如果你能帮助我们改进它，那就太棒了:)

目前唯一可用的方法是通过[DQL](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#update-queries)和 NativeSQL

# php - 发送多个 iPhone 推送通知 + APNS + PHP

> ID：14563097
> 
> 赞同：26
> 
> 时间：2013-01-28T13:28:11.407
> 
> 标签：php, iphone, push-notification, apple-push-notifications

我正在开发一个 PHP 网站 + iPhone 应用程序和用于 iPhone 应用程序的 API，为学生和医生提供消息系统，当任何人发送消息（来自网站或 iPhone）时，其他用户应该在他的 iPhone 上收到推送通知。例如，如果学生为教师添加新问题，教师 iPhone/iPad 上的推送通知将发送给教师，当教师回复学生的答案时，学生将收到推送通知。

由于注册到网站的教师和学生的数量没有限制，我的问题是如何向注册用户的 iPhone 发送推送消息？我想在有人回复或添加问题后立即发送推送消息。请为我提供用于发送多条推送消息的 PHP 代码。我在注册时为每个用户保存设备令牌。

当老师回复我正在向学生发送邮件的问题时，我也想向学生发送推送通知，反之亦然，因此请指定能够管理错误条件的代码。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-06-10T11:09:35.113

不使用任何文件的简单方法。您可以使用不同的 tokeid 多次调用它。

```
$ctx = stream_context_create();
stream_context_set_option($ctx, 'ssl', 'local_cert', 'ckipad.pem');
stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

$fp = stream_socket_client('ssl://gateway.sandbox.push.apple.com:2195', 
    $err, 
    $errstr, 
    60, 
    STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, 
    $ctx);

//if (!$fp)
//exit("Failed to connect amarnew: $err $errstr" . PHP_EOL);

//echo 'Connected to APNS' . PHP_EOL;

// Create the payload body
$body['aps'] = array(
    'badge' => +1,
    'alert' => $message,
    'sound' => 'default'
);

$payload = json_encode($body);

// Build the binary notification
$msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

// Send it to the server
$result = fwrite($fp, $msg, strlen($msg));

if (!$result)
    echo 'Message not delivered' . PHP_EOL;
else
    echo 'Message successfully delivered amar'.$message. PHP_EOL;

// Close the connection to the server
fclose($fp); 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-01-28T13:41:00.900

您应该更好地使用 PHP 的 APNS 库。你可以在[这里](http://code.google.com/p/apns-php/)找到它。查看开发人员提供的示例。

我的证书也有问题。我的行动是：

1.  定位文件`ApnsPHP/Abstract.php`
2.  对方法进行一些更改`_connect()`，粘贴此行

    ```
    $streamContext = stream_context_create(
                       array(
                         'ssl' => array(
                                   'local_cert' => $this->_sProviderCertificateFile,
                                   'passphrase' => ''
                                  )
                       )
    );

    $this->_hSocket = @stream_socket_client(
                        $sURL, 
                        $nError, 
                        $sError,
                        $this->_nConnectTimeout,
                        STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT,
                        $streamContext); 
    ```

    而不是那里列出的原件

3.  现在您可以使用 *.pem 证书而不需要 entrust_root_certification_authority。

这对我来说很好。

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2013-04-25T07:33:05.863

这就是我最终完成的方式

1.  下载[的apns-php](http://code.google.com/p/apns-php/downloads/list)
2.  PHP 代码

```
 set_time_limit(0);
    $root_path = "add your root path here"; 
    require_once($root_path."webroot\cron\library\config.php");
    require_once($root_path."Vendor\ApnsPHP\Autoload.php");

        global $obj_basic;           
        // Basic settings

        $timezone = new DateTimeZone('America/New_York');
        $date = new DateTime();
        $date->setTimezone($timezone);
        $time =  $date->format('H:i:s');

        //Get notifications data to send push notifications
        $queueQuery = " SELECT `notifications`.*, `messages`.`mes_message`, `messages`.`user_id`, `messages`.`mes_originated_from`  FROM `notifications`
                                        INNER JOIN `messages`
                                        ON `notifications`.`message_id` = `messages`.`mes_id`

                                        WHERE `notifications`.`created` <= NOW()";

        $queueData = $obj_basic->get_query_data($queueQuery);

        if(!empty($queueData)) {

        // Put your private key's passphrase here:
        $passphrase = 'Push';

        $ctx = stream_context_create();
        stream_context_set_option($ctx, 'ssl', 'local_cert', 'server_certificates_bundle_sandbox.pem');
        stream_context_set_option($ctx, 'ssl', 'passphrase', $passphrase);

        // Open a connection to the APNS server
        $fp = stream_socket_client(
            'ssl://gateway.sandbox.push.apple.com:2195', $err,
            $errstr, 60, STREAM_CLIENT_CONNECT|STREAM_CLIENT_PERSISTENT, $ctx);

        if (!$fp)
        exit("Failed to connect: $err $errstr" . PHP_EOL);

        echo '<br>'.date("Y-m-d H:i:s").' Connected to APNS' . PHP_EOL;

            foreach($queueData as $val) {
                    // Put your device token here (without spaces):
                    $deviceToken = $val['device_token'];

                    // Create message

                        // Get senders name
                        $sql = "SELECT `name` FROM `users` WHERE id =".$val['user_id'];
                        $name = $obj_basic->get_query_data($sql);
                        $name = $name[0]['name']; 
                        $message = $name." : ";

                        // Get total unread messaged for receiver
                        $query = "SELECT COUNT(*)  as count FROM `messages`  WHERE mes_parent = 0 AND user_id = ".$val['user_id']." AND mes_readstatus_doc != 0 AND mes_status = 1";
                        $totalUnread = $obj_basic->get_query_data($query);
                        $totalUnread = $totalUnread[0]['count']; 

                        $message .= " This is a test message.";

                    // Create the payload body
                    $body['aps'] = array(
                            'alert'         => $message,
                            'badge'     => $totalUnread,
                            'sound'     => 'default'
                     );

                    // Encode the payload as JSON
                    $payload = json_encode($body);

                    // Build the binary notification
                    $msg = chr(0) . pack('n', 32) . pack('H*', $deviceToken) . pack('n', strlen($payload)) . $payload;

                    // Send it to the server
                    $result = fwrite($fp, $msg, strlen($msg));

                    if (!$result) {
                        echo '<br>'.date("Y-m-d H:i:s").' Message not delivered' . PHP_EOL;  
                    } else {
                        $sqlDelete = "DELETE FROM `notifications` WHERE id = ".$val['id'];
                        $query_delete = $obj_basic->run_query($sqlDelete,'DELETE');

                        echo '<br>'.date("Y-m-d H:i:s").' Message successfully delivered' . PHP_EOL;
                    }
            }
            // Close the connection to the server
            fclose($fp);
            echo '<br>'.date("Y-m-d H:i:s").' Connection closed to APNS' . PHP_EOL;
        } else {
            echo '<br>'.date("Y-m-d H:i:s").' Queue is empty!';
        } 
```

# android - 文字转语音未按预期工作

> ID：14563098
> 
> 赞同：5
> 
> 时间：2013-01-28T13:28:12.897
> 
> 标签：android, text-to-speech

我已经遵循了几个教程，但我遇到了同样的问题。首先，这是我的简单代码：

```
import java.util.Locale;

import android.app.Activity;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.os.Bundle;
import android.speech.tts.TextToSpeech;
import android.speech.tts.TextToSpeech.OnInitListener;
import android.util.Log;

public class AchievementsActivity extends Activity implements OnInitListener {

    TextToSpeech reader;
    Locale canada;
    boolean readerInit = false;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRequestedOrientation (ActivityInfo.SCREEN_ORIENTATION_PORTRAIT);

        canada = Locale.ENGLISH;
        reader = new TextToSpeech(this, this);

        //speak();

        //      while (reader.isSpeaking()) {} //waiting for reader to finish speaking

    }

    @Override
    public void onStart()   {
        super.onStart();
        //speak();

    }

    @Override
    public void onInit(int status) {

        if (status == TextToSpeech.SUCCESS) {
            reader.setLanguage(canada);
            reader.setPitch(0.9f);
            Log.e("Init", "Success");
            readerInit = true;
            speak();
        }

        else
            System.out.println("Something went wrong.");
    }

    public void speak() {
        reader.speak("You currently have no achievements.", TextToSpeech.QUEUE_FLUSH, null);
    }
} 
```

现在，请注意我注释掉的第一个发言，`onCreate()`以及我也注释掉的第二个发言`onStart()`。根据我在 LogCat 中收到的内容，原因很明显。由于某种原因，它们在初始化`reader`完成之前被调用。所以我拥有这项工作权利的唯一方法是`speak()`在初始化后立即放置函数，确保在它自己的方法中完成。

所以我想知道是否有什么方法可以等待初始化完成，然后`speak()`在`onCreate`or中运行`onStart()`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:09:08.477

你可以这样做：

```
@Override
public void onInit(int status) {

    if (status == TextToSpeech.SUCCESS) {
        reader.setLanguage(canada);
        reader.setPitch(0.9f);
        Log.e("Init", "Success");
        readerInit = true;

        // wait a little for the initialization to complete
        Handler h = new Handler();
        h.postDelayed(new Runnable() {
            @Override
            public void run() {
                // run your code here
                speak();
            }
        }, 400);

    }

    else {
        System.out.println("Something went wrong.");
    }

} 
```

这不是很好，但它有效。我希望有人会找到更好的解决方案...

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-21T14:50:34.910

请看一下[本教程](http://www.jameselsey.co.uk/blogs/techblog/android-a-really-easy-tutorial-on-how-to-use-text-to-speech-tts-and-how-you-can-enter-text-and-have-it-spoken/)。
基本上，它在方法期间强制初始化`onCreate()`。

```
// Fire off an intent to check if a TTS engine is installed
Intent checkIntent = new Intent();
checkIntent.setAction(TextToSpeech.Engine.ACTION_CHECK_TTS_DATA);
startActivityForResult(checkIntent, MY_DATA_CHECK_CODE); 
```

然后，您将能够在开始时说出您想要的任何文本（无需用户进行任何交互）。当然，说话会起作用。

！
弥尔顿

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-08T18:28:34.717

尝试为使用给定 TTS 引擎的 TextToSpeech 类使用另一个构造函数：

```
TextToSpeech(this,this,"com.google.android.tts"); 
```

代替：

```
new TextToSpeech(this, this); 
```

# ios - CATransform3DRotate 后我的一半视图消失了

> ID：14563104
> 
> 赞同：0
> 
> 时间：2013-01-28T13:28:37.213
> 
> 标签：ios, catransform3drotate

我有 1 个视图，在这个视图中我有 1 个 UIImageView 和 UILabel，当我旋转视图时，视图的一半消失了。

这是我的代码

viewToAnimate 是包含图像和标签的视图。

```
CATransform3D _3Dt = CATransform3DRotate(viewToAnimate.layer.transform, DEGREES_TO_RADIANS(beginValue), 0.0, 1.0, 0);
_3Dt.m34 = 1.0 / -300;

viewToAnimate.layer.transform = _3Dt;

CATransform3D _scale;

if (needZoom) {
    _scale = CATransform3DScale(viewToAnimate.layer.transform , 1+scale, 1+scale, 1+scale);

    if (_scale.m11 > 1) {
        _scale.m11 = 1;
        _scale.m22 = 1;
        _scale.m33 = 1;
    }
}
else  {
    _scale = CATransform3DScale(viewToAnimate.layer.transform , 1-scale, 1-scale, 1-scale);
}

viewToAnimate.layer.transform = _scale;
//viewToAnimate.layer.zPosition = sin(DEGREES_TO_RADIANS(beginValue)*MOSAIC_WIDTH)+1; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:44:15.547

DEGREES_TO_RADIANS 的值是多少？有没有机会 M_PI/2？您的代码告诉您正在围绕 y 轴旋转。请参阅第一行中的最后 3 个参数：

```
0.0, 1.0, 0 
```

如果您提供这个，那么这是预期的行为 - 考虑一个面向您的平面并想象它围绕 y 轴旋转 +/- 90 度，它肯定会消失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-07T07:40:13.020

正如 Diego 对另一个答案的评论中提到的，这可能是由 zPosition 问题引起的。通过将 zPosition 设置为更高的值，使您的视图高于所有其他视图。

# java - 双打上的Java正则表达式

> ID：14563106
> 
> 赞同：6
> 
> 时间：2013-01-28T13:28:42.063
> 
> 标签：java, regex

我正在尝试检查小数点前最多有 13 位数字的双精度数，小数点和后面的数字是可选的。所以用户可以写一个整数或带小数的数字。

首先，我有这个：

```
if (check.matches("[0-9](.[0-9]*)?")) 
```

我已经浏览了 Google 上的几个页面，尽管付出了各种努力，但仍然没有任何运气让它工作。我的想法是这样做，但它不起作用：

```
[0-9]{1,13}(.[0-9]*)? 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T13:30:29.637

不要忘记转义点。

```
if (check.matches("[0-9]{1,13}(\\.[0-9]*)?")) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T13:32:41.040

首先你需要转义点（在java中这将是`[0-9]{1,13}(\\.[0-9]*)?`）。其次，不要忘记双打还有另一种流行的表现形式——科学。所以这`1.5e+4`又是一个有效的双数。最后不要忘记双数可能是负数，或者可能根本没有整数部分。例如`-1.3`和`.56`是有效的双打。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T13:31:40.587

您需要转义点，并且至少需要点后的数字

```
[0-9]{1,13}(\\.[0-9]+)? 
```

[在 Regexr 上](http://regexr.com?33iga)查看

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-28T05:32:44.513

约翰的回答很接近。但是如果您接受负值，则需要添加一个“-”，以防它是负数。所以，它会被修改为`-?[0-9]{1,13}(\.[0-9]*)?`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-02-17T13:52:31.410

如果您需要使用逗号和负数验证小数：

```
Object testObject = "-1.5";
boolean isDecimal = Pattern.matches("^[\\+\\-]{0,1}[0-9]+[\\.\\,]{1}[0-9]+$", (CharSequence) testObject); 
```

祝你好运。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-09T13:07:03.570

你可以使用 \d+(\.\d*)? 如下科特林语言 -

```
 val rawString = "Hi..  2345.97 ..Bye"
    val DOUBLE_PATTERN = Pattern.compile("\\d+(\\.\\d*)?")
    val matcher = DOUBLE_PATTERN.matcher(rawString)
    var filterNumber = 0.0
    if (matcher.find())
        filterNumber = matcher.group() // extracted number- 2345.97 
```

# dependency-injection - 使用 CDI 注入数据访问对象

> ID：14563107
> 
> 赞同：1
> 
> 时间：2013-01-28T13:28:44.950
> 
> 标签：dependency-injection, dao, cdi, domain-model

假设我已经编写了一个数据访问对象，我希望能够使用 CDI 将其注入到一个服务类中。此外，我有该 DAO 的两个实现。

我对 CDI 的理解是，我必须注释我的 DAO 实现类，以便 CDI 知道要注入哪个实现。

问题是，DAO 位于 .jar 文件中。通过使用 CDI 注释对其进行注释，我在非 JavaEE 类中使用了 JavaEE 导入。

例如，假设我有以下课程

```
public class BusinessService {
    @Inject @SomeMybatisQualifier AccountDAO accountDao;
    ...
} 
```

@Inject 注解来自 javax.inject.Inject。现在，这个服务类依赖于 JavaEE 环境。

有人可以向我解释我错过了什么吗？如何将非注释类注入另一个非注释类？这对于 Spring 来说相当简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T15:15:47.253

如果有足够的课程，我同意 LightGuard。但是对于一对夫妇来说，为什么不直接用 生产它们`@Produces`呢？

这是实现您自己的生产者的一个不错的示例：

[使用 CDI 和 JSF2 的依赖注入请求参数](https://stackoverflow.com/questions/13239975/depedency-inject-request-parameter-with-cdi)

您应该能够编写 return new MyObject(); 你可以添加任何你想要的限定符

不确定有什么不清楚，但这里是事情的要点：对于 CDI 扫描一个 jar 中的 bean，它必须有一个 beans.xml。否则它不会被扫描，因此不能用于注入。字符串也不可用。如果你尝试注入一个字符串说；

```
@Inject
String myString; 
```

CDI 将不知道该给您什么，就像您的罐子一样。但我知道我想要什么字符串（请求参数），我也可以让 CDI 知道。如何？好吧，我为我的生产者提供了一个限定符`@RequestParam`（再次参见示例），现在当我想在客户端代码中使用它时，我会这样做：

```
@Inject
@RequestParam
String myString; 
```

你可以做同样的事情。有一个生产者，只需创建一个你需要的新实例，然后返回它。现在 CDI 将知道如何依赖注入特定的 bean。

现在假设你有 40 节课。然后生成它们会变得很乱，你想确保它被扫描。然后编写自己的小扩展，观察 CDI 何时扫描并指示它扫描其他 jar。这样的扩展可能很容易编写，但我不知道细节，因为我没有写过任何类似的扩展

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:27:18.427

到目前为止，最简单的方法是创建一个 CDI 扩展以在 jar 中添加类（因为该 jar 中没有 beans.xml，因此 CDI 不会拾取它）并向元数据添加额外的限定符。

# c++ - Visual Studio 2005 不支持 cygwin:lib

> ID：14563109
> 
> 赞同：0
> 
> 时间：2013-01-28T13:28:53.887
> 
> 标签：c++, visual-studio, visual-c++, cygwin

我已经编译了 c++ 文件，并在 windows 中使用 cygwin 将其作为库。当我尝试在 Visual Studio 2005 C++ 中使用该库时。它会产生以下错误。

```
"Error  1   error LNK2001: unresolved external symbol ___gxx_personality_v0 mylib.lib
Error   2   error LNK2019: unresolved external symbol __Unwind_Resume referenced in function _fjfx_create_fmd_from_raw  mylib.lib   
Error   3   error LNK2019: unresolved external symbol ___chkstk referenced in function __fjjj   mylib.lib" 
```

如何解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:11:46.623

是的，您需要使用 Visual Studio 工具构建您的库。“gxx_personality_v0”是g++编译器创建的符号，只能通过链接相关的libstdg++库来解析。其他组件也一样。

不幸的是，当使用不同的编译器时，对一个编译器的运行时支持的某些部分不匹配。

如果您将您的 Visual Studio 代码与相关的 GNU 库链接起来，您可能会侥幸逃脱，但我并不相信。

[而且我完全希望您解释您使用 cygwin 编译的原因是代码包含一堆无法用 Visual Studio 编译的东西，因为它使用了 gnu 编译器扩展功能......]

# jquery - 计算来自 ajax 响应的列表元素

> ID：14563111
> 
> 赞同：2
> 
> 时间：2013-01-28T13:28:55.777
> 
> 标签：jquery

**jQuery**

```
$.ajax({
    url : "/assets/inc/list.php",
    success : function (data) {
        console.log($(data).filter('li').size());
    }
}); 
```

使用上面我已经尝试了该php中的列表项总数，因为响应放回了一个列表

```
<li> 
```

里面有内容

但我得到一个 console.log 错误

> 错误：语法错误，无法识别的表达式：

我的清单后来得到了回应。

**数据示例**

```
<li>
    <strong>Company Name</strong>
    123 Fake Street<br />
    Fakesville<br />
    <a href="#">Link</a>
</li>
<li>
    <strong>Company Name</strong>
    123 Fake Street<br />
    Fakesville<br />
    <a href="#">Link</a>
</li>
<li>
    <strong>Company Name</strong>
    123 Fake Street<br />
    Fakesville<br />
    <a href="#">Link</a>
</li>
<li>
    <strong>Company Name</strong>
    123 Fake Street<br />
    Fakesville<br />
    <a href="#">Link</a>
</li>
<li>
    <strong>Company Name</strong>
    123 Fake Street<br />
    Fakesville<br />
    <a href="#">Link</a>
</li> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T13:33:29.350

你可以使用这个。这将获取数据并仅计算其中的行项目。这是[文档](http://api.jquery.com/find/)

```
$.ajax({
    url : "/assets/inc/list.php",
    success : function (data) {
        console.log($(data).find('li').length);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:34:25.360

尝试这个

***JS代码***

```
$.ajax({
    url : "/assets/inc/list.php",
    success : function (data) {
        console.log($(data).find('li').length);
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:34:50.810

“语法错误”来自`$(data)`表示`data`包含格式错误的标记代码的部分。您需要在服务器端解决此问题。

# jquery - 如何在 jquery colorbox 中加载谷歌地图？

> ID：14563112
> 
> 赞同：2
> 
> 时间：2013-01-28T13:29:04.580
> 
> 标签：jquery, google-maps, colorbox

是否可以在没有 iframe 的情况下在 jquery 颜色框中加载谷歌地图。如果不可能，任何人都可以提供使用 iframe 加载地图的工作链接。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:35:39.773

你可以使用 gmap3 - 谷歌地图的 jquery 插件吗？[http://gmap3.net](http://gmap3.net/en/pages/5-getting-started/#jquery-features-16)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:16:06.230

也许这有帮助：[动态加载谷歌地图和](https://developers.google.com/loader/#Dynamic)[ColorBox](http://www.jacklmoore.com/colorbox)的回调部分

# gobject-introspection - g-ir-scanner 无法生成 gir 文件

> ID：14563118
> 
> 赞同：3
> 
> 时间：2013-01-28T13:29:16.773
> 
> 标签：gobject-introspection

我正在尝试从一个非常简单的库生成一个**.gir文件；**它基本上是 GLib 文档中的 GObject 示例。使用 g-ir-scanner 时，失败并出现以下错误：

```
$ g-ir-scanner -I./ --library=foo --library-path=./ --pkg=gobject-2.0 --namespace=Foo -o foo-bar.gir foo-bar.c foo-bar.h
g-ir-scanner: compile: gcc -Wall -pthread -I/usr/include/glib-2.0 -I/usr/lib/x86_64-         linux-gnu/glib-2.0/include -I./ -I/usr/include/glib-2.0 -I/usr/lib/x86_64-linux-gnu/glib-  2.0/include -c -o /home/roman/Documents/own_gobject/tmp-introspectEx3pzw/Foo-None.o   /home/roman/Documents/own_gobject/tmp-introspectEx3pzw/Foo-None.c
g-ir-scanner: link: gcc -o /home/roman/Documents/own_gobject/tmp-introspectEx3pzw/Foo-None /home/roman/Documents/own_gobject/tmp-introspectEx3pzw/Foo-None.o -L. -Wl,-rpath=. -  lfoo -L./ -Wl,--export-dynamic -pthread -lgio-2.0 -lgmodule-2.0 -lrt -lgobject-2.0 -lglib-2.0
ERROR: can't resolve libraries to shared libraries: foo 
```

我真的不知道出了什么问题。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-02T08:00:03.680

这是 g-ir-scanner ( [https://bugzilla.gnome.org/show_bug.cgi?id=699442](https://bugzilla.gnome.org/show_bug.cgi?id=699442) ) 中的一个错误。基本上 foo-bar 不包含任何 GObject 类并且它失败了。通过一个名为 foo_blah_get_type() 的函数来检测一个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T17:32:28.380

g-ir-scanner的`--library`参数需要共享对象的名称 - 例如`libfoo.so`，或者`libfoo.la`如果您在构建环境中使用 libtool。

# java - 方法中的阴影变量

> ID：14563121
> 
> 赞同：-1
> 
> 时间：2013-01-28T13:29:31.317
> 
> 标签：java, scjp, shadowing

我正在阅读Java 6的认证书。并且有一个关于“阴影变量”的示例：

```
package scjp;

class Class1 {
    int number = 28;
}

public class Example {

    Class1 myClass = new Class1();

    void changeNumber( Class1 myClass ) {
        myClass.number = 99; 
        System.out.println("myClass.number in method : " + myClass.number);
        myClass = new Class1();
        myClass.number = 420;
        System.out.println("myClass.number in method is now : " + myClass.number);
    }

    public static void main(String[] args) {
        Example example = new Example();
        System.out.println("myClass.number is : " + example.myClass.number );
        example.changeNumber( example.myClass );
        System.out.println("After method, myClass.number is : " +   example.myClass.number);
    }

} 
```

这是结果：

```
myClass.number is : 28
myClass.number in method : 99
myClass.number in method is now : 420
After method, myClass.number is : 99 
```

我的问题是：如果一开始，变量'number'是28。当我使用该方法时，它会将变量更改为99和420。但是......，当方法完成时，为什么变量'number'有值 99 而不是 28 ？我认为它将具有其原始价值（28）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:34:14.653

您将处理的实例的值更改为 99；之后，您创建一个新实例并对其进行修改。

新创建的实例在 changeNumber() 结束时被丢弃，因为它不再被引用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:36:29.753

当您调用 时`changeNumber()`，将复制对的引用`example`并将其传递给该方法。您更改 的值`number`，这**会修改被引用的对象**，然后将新实例重新分配给`myClass`，**这不会影响 中的原始**`main`引用。

一切都按预期进行，然后退出该方法。回到`main`方法，您仍然有对 的主要引用`example`，它受第一次重新分配 (of `number`) 的影响，但**不受 重新分配的影响`myClass`**。这就是为什么你有 99，而不是原来的 28。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:49:24.920

1-**从第一行开始，数字= 28：**

`Main example = new Main();`///////主调用class1( **myClass** )---->设置**number=28**

2- `System.out.println("myClass.number is : " + example.myClass.number );`////这里的输出是（***myClass.number 是：28***）

3- `example.changeNumber( example.myClass );`///////在此方法中您将设置**number=99**然后打印它（ ***方法中的 myClass.number ：99*** ），然后创建新对象（这意味着**number=28**，并且*前一个对象中的数字仍然存在=99* )，新对象**(myClass = new Class1();)**将打印（***方法中的 myClass.number 现在是：420）***

4- `System.out.println("After method, myClass.number is : " + example.myClass.number)`;///// 此行将打印***(After method, myClass.number is : 99)***因为这是从创建的第一个对象 (myClass)

# c# - 异步套接字侦听器发送数据错误

> ID：14563123
> 
> 赞同：0
> 
> 时间：2013-01-28T13:29:39.760
> 
> 标签：c#, sockets, asynchronous, tcp, asyncsocket

我正在围绕该类创建一个包装`Socket`类。

我有一个执行此操作的连接异步回调：

```
public void StartConnecting()
{
    // Connect to a remote device.
    try
    {
        //_acceptIncomingData = acceptIncomingData;

        // Create a TCP/IP socket.
        _workingSocket = new Socket(AddressFamily.InterNetwork,
                SocketType.Stream, ProtocolType.Tcp);

        if (Information != null)
            Information(this, new InfoEventArgs("Connecting", "Working socket is initiating connection"));

        // Connect to the remote endpoint.
        _workingSocket.BeginConnect(_localEndPoint,
                new AsyncCallback(ConnectCallback), _workingSocket);
    }
    catch (Exception ex)
    {
        if (Error != null)
            Error(this, new ErrorEventArgs(ex.Message, ex));
    }
}

private void ConnectCallback(IAsyncResult ar)
{
    try
    {
        // Retrieve the socket from the state object.
        Socket client = (Socket)ar.AsyncState;

        // Complete the connection.
        client.EndConnect(ar);

        // ACTION CONNECTED COMPLETE
        if (Information != null)
            Information(this, new InfoEventArgs("Connected", "Working socket has now connected"));

        // Start Receiving on the socket

        // Create the state object.
        StateObject state = new StateObject();
        state.workSocket = client;

        // Begin receiving the data from the remote device.
        client.BeginReceive(state.buffer, 0, StateObject.BufferSize, 0,
                new AsyncCallback(ReceiveCallback), state);
    }
    catch (Exception ex)
    {
        if (Error != null)
            Error(this, new ErrorEventArgs(ex.Message, ex));
    }
} 
```

对于状态对象，它使用预定义的类：

```
public class StateObject
{
    // Client  socket.
    public Socket workSocket = null;
    // Size of receive buffer.
    public const int BufferSize = 1024;
    // Receive buffer.
    public byte[] buffer = new byte[BufferSize];
    // Received data string.
    public StringBuilder sb = new StringBuilder();
} 
```

我用它来连接一个已经开始监听的套接字，我称这个监听套接字为`Server`，它使用`Socket`类。上面的代码是一个我称之为`Client`. 当`Client`连接 时`Server`，`Client`现在允许向 发送数据`Server`。但是，当我想接收从我发送的数据时，`Server`我收到以下错误消息：

> 不允许发送或接收数据的请求，因为未连接套接字并且（当使用 sendto 调用在数据报套接字上发送时）未提供地址。

我错过了什么？还是做得不对？

在被提示检查是否`Server`正在侦听后，我查看了我`WorkingSocket`在包装类中调用的内容，即正在使用的套接字，在成功`Server`侦听/`Client`连接协商后检查了这一点。它确实说套接字未连接。所以我现在的问题是：

是否`Server`需要将（侦听套接字）连接到发送数据，如果您有一个用于多个s `Client`，您将如何做到这一点？`Server``Client`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T10:56:06.520

一月份我对套接字的工作方式有一个误解。导致该错误是因为我不明白当客户端连接到侦听套接字时，侦听套接字会创建一个新的套接字对象，从客户端发送和接收的所有数据都将链接回该对象。

In my example above I should create and store a new socket for the client to act on, and use this to send and receive data on.

# ios - iOS 将极坐标中定义的区域转换为 NxN 矩阵

> ID：14563124
> 
> 赞同：0
> 
> 时间：2013-01-28T13:29:40.687
> 
> 标签：ios, image, math, matrix

好的，所以情况是我想创建一个表示位图图像像素的 NxN 矩阵。
然后，我想将落在某个区域的所有像素的值更改为恒定值。

该区域使用极坐标定义。

例如，让矩阵表示一个 2048x2048 像素的位图，区域由 25<=r<200, 0<=theta<π/4 定义，我想设置所有落在该区域内的点的值到某个常数 k（在别处定义）。

解决这个问题的最佳方法是什么？
我是否应该查看 Apple 的任何库，例如 vImage 或 Accelerate 框架的部分等，
或者这是否太具体以至于我必须手动处理它，检查我的 NxN 矩阵中的每个像素以查看是否它位于感兴趣的区域？

似乎必须有一种比硬编码几个 for 循环更有效的方法。特别是如果该区域有一些任意定义，比如用户绘制的波浪形循环。

建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:24:42.407

Accelerate Framework 提供了许多处理图像的功能。

在您的情况下，我推荐[vImage Framework ，它具有使用](https://developer.apple.com/library/mac/#documentation/performance/Conceptual/vImage/Introduction/Introduction.html)[查找表](http://en.wikipedia.org/wiki/Lookup_table)进行图像转换的 vImageTableLookUp_* 函数。

例如，如果从 25 到 200 的*红色*值应该是常数，则创建一个数组

```
int red[256];
for (int i = 0; i < 256; i++) {
    if (i >= 25 && i < 200) {
        red[i] = MY_CONSTANT_VALUE;
    } else {
        red[i] = i;
    }
} 
```

并将该数组传递给上面的函数。

# java - Spring Webflow Exception-Handler for Action-State

> ID：14563130
> 
> 赞同：0
> 
> 时间：2013-01-28T13:30:03.923
> 
> 标签：java, jsf, spring-webflow

I created a Spring Webflow exception-handler for my application and defined it in my abstract parent flow. In this handler I add FacesMessages to display several errors in a generic way. Now i got the problem that i can't handle an exception that occures in an action-state. I try to go back to the last valid view-state or something like that (or maybe go to the start-state). Anyway, I don't want the application to crash or show a blank page.

```
@Override
public void handle(FlowExecutionException exception, RequestControlContext context) {
    Object testState = context.getCurrentState();
    if(testState instanceof ActionState){
         //what to do here?
    }
} 
```

I am using Spring Webflow Version 2.3.0.RELEASE with JSF 2 on MyFaces.

Best regards, Patrick

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-08T12:49:09.143

You can execute a transition to another state (the transition must exist). So, inside your if statement you could do the following:

```
TransitionDefinition errorDefinition = context.getMatchingTransition("errorState");
Transition errorTransition = (Transition)errorDefinition;
context.execute(errorTransition); 
```

The transition could be a global transition to a generic error page.

Regards.

# google-cloud-messaging - GCM 适用于 4.1 但不适用于 2.3 android 版本

> ID：14563131
> 
> 赞同：3
> 
> 时间：2013-01-28T13:30:04.803
> 
> 标签：google-cloud-messaging

我在使用 GCM 时遇到问题，它在 Nexus 7 上运行良好，但是当我在任何具有 Gingerbread 版本的设备上运行它时，永远不会调用 onRegistered 方法。

请参阅下面的我的代码实现：

**GMCIntentService**

 `````
public class GCMIntentService extends GCMBaseIntentService {
private static final String TAG = "GCMIntentService";

private RestHelper restRegisterGCM;
private String userRegisterGCMUrl = "User/SetGcm";

public GCMIntentService() {
    super(AppSettings.SENDER_ID);
}

/**
 * Method called on device registered
 **/
@Override
protected void onRegistered(Context context, String registrationId) {
    Log.i(TAG, "Device registered: regId = " + registrationId);
    // Util.displayMessage(context, "Your device registred with GCM");
    if (!GCMRegistrar.isRegisteredOnServer(this)) {

        restRegisterGCM = new RestHelper(userRegisterGCMUrl, RequestMethod.POST, context);
        restRegisterGCM.setHeader("UserName", AppSettings.getInstance().getUsername(context));
        restRegisterGCM.setHeader("Password", AppSettings.getInstance().getPassword(context));
        restRegisterGCM.setParameter("regId", registrationId);
        restRegisterGCM.execute();

    }
}

/**
 * Method called on device un registred
 * */
@Override
protected void onUnregistered(Context context, String registrationId) {
    Log.i(TAG, "Device unregistered");
}

/**
 * Method called on Receiving a new message
 * */
@Override
protected void onMessage(Context context, Intent intent) {
    Log.i(TAG, "Received message");
    String message = intent.getExtras().getString("Message");
    // notifies user
    generateNotification(context, message);
}

/**
 * Method called on receiving a deleted message
 * */
@Override
protected void onDeletedMessages(Context context, int total) {
    Log.i(TAG, "Received deleted messages notification");
}

/**
 * Method called on Error
 * */
@Override
public void onError(Context context, String errorId) {
    Log.i(TAG, "Received error: " + errorId);
    Toast.makeText(context, getString(R.string.gcm_error, errorId), Toast.LENGTH_SHORT).show();
}

@Override
protected boolean onRecoverableError(Context context, String errorId) {
    // log message
    Log.i(TAG, "Received recoverable error: " + errorId);
    Toast.makeText(context, getString(R.string.gcm_recoverable_error, errorId), Toast.LENGTH_SHORT).show();
    return super.onRecoverableError(context, errorId);
} 
````  `**GMC注册方法**

`private void registerGCM() {`

 ````
 // Make sure the device has the proper dependencies.
    GCMRegistrar.checkDevice(this);
    Boolean accountExists = false;

    AccountManager am = AccountManager.get(getApplicationContext());
    Account[] accounts = am.getAccounts();

    for (Account account : accounts) {

        if (account.type.equals("com.google")) {
            accountExists = true;
            break;
        }

    }
    if (accountExists) {

        // Get GCM registration id
        String regId = GCMRegistrar.getRegistrationId(this);

        // Check if regid already presents
        if (regId.equals("")) {
            // Registration is not present, register now with GCM
            GCMRegistrar.register(this, AppSettings.SENDER_ID);

        } else {
            // Device is already registered on GCM
            if (!GCMRegistrar.isRegisteredOnServer(this)) {

                restRegisterGCM = new RestHelper(userRegisterGCMUrl, RequestMethod.POST, EvadoFilipActivity.this);
                restRegisterGCM.setHeader("UserName", AppSettings.getInstance().getUsername(EvadoFilipActivity.this));
                restRegisterGCM.setHeader("Password", AppSettings.getInstance().getPassword(EvadoFilipActivity.this));
                restRegisterGCM.setParameter("regId", regId);
                restRegisterGCM.setPostExecuteMethod(2);
                restRegisterGCM.execute();

            }
        }
    } else
        Toast.makeText(this, R.string.gcm_google_account_missing, Toast.LENGTH_SHORT).show();

} 
````  `更新：

我已重命名包并忘记在我的班级中更改它：

`public class GCMBroadcastReceiver extends com.google.android.gcm.GCMBroadcastReceiver{
@Override protected String getGCMIntentServiceClassName(Context context) {`

 ````
 return "com.mypackage.services.GCMIntentService";
}
} 
````  `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-25T01:18:47.900

我遇到了同样的问题。我的代码可以在 nexus4(Kitkat) 上运行，但无法从 appln 服务器（通过 gcm 服务器）收到通知。@Fr0g 对于低于 4.0.4 的版本是正确的，你应该确保你在你的设备上设置了你的谷歌帐户，以便 gcm 工作。我的galaxy ace（2.3.4）上有谷歌帐户，但我犯的错误是我的galaxy ace中的帐户和同步设置为“关闭”。当我打开它并运行我的代码时，我收到了通知。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:37:05.657

确保您已在要测试的设备上设置用户帐户。GCM 要求必须在注册 GCM 的设备上设置一个谷歌帐户，（我也认为这个要求适用于 android 版本 < 4.0）````

# javascript - 带有动态内容的完全加载 DOM 的 jQuery 事件监听器

> ID：14563133
> 
> 赞同：0
> 
> 时间：2013-01-28T13:30:05.983
> 
> 标签：javascript, jquery, css, dom

我正在尝试使用 jQuery 脚本来对齐两个 div 的高度。一切正常，直到我在其中一个 div 中有一些动态内容。当我在其中一个 div 中硬编码一些静态内容时，例如：

```
<br>asd<br>asd<br> x 20 
```

两个 div 具有相同的 height 属性，但是当我将一些数据从 DB 加载到其中一个 div 时，它们是不同的。

我想问题出在 .ready() 监听器中。文档说它会在 DOM 完全加载时触发，但看起来这不是事实。

我的问题是：我应该使用什么样的听众或其他“技巧”？我认为 jquery/javascript 解决方案比弄乱 css 更干净，我想要这种解决方案。

提前致谢。

jquery脚本：

```
$(document).ready(function(){
    var difference = $("#layout-navigation-wrapper").height() - $("#layout-content-wrapper").height();

    if(difference<0)
    {
        var height = $("#layout-content-wrapper").height() -1;
        $("#layout-navigation-wrapper").height(height);
    }
    else if(difference >= 0)
    {
        var height = $("#layout-navigation-wrapper").height() -2;
        $("#layout-content-wrapper").height(height);

    }   
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:45:58.153

jquery 在基础工作中使用事件 document.ready 是指当所有 DOM 都准备好时，直到这里制作 jquery 代码。是为了在没有渲染 jquery 库的情况下没有渲染 jquery 代码的选项

如果你想在加载所有 dom 时添加事件，包括内容和图像，你需要这样做

```
$(document).ready(function(){
$(window).load(function(){
    var difference = $("#layout-navigation-wrapper").height() - $("#layout-content-wrapper").height();

    if(difference<0)
    {
        var height = $("#layout-content-wrapper").height() -1;
        $("#layout-navigation-wrapper").height(height);
    }
    else if(difference >= 0)
    {
        var height = $("#layout-navigation-wrapper").height() -2;
        $("#layout-content-wrapper").height(height);

    }   
});
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:57:32.800

一旦网页完全加载了所有内容，包括图像、脚本文件、CSS 文件等，您就可以使用 window.onload 来执行脚本。

```
window.onload = function() {
    var difference = $("#layout-navigation-wrapper").height() - $("#layout-content-wrapper").height();

    if(difference<0)
    {
        var height = $("#layout-content-wrapper").height() -1;
        $("#layout-navigation-wrapper").height(height);
    }
    else if(difference >= 0)
    {
        var height = $("#layout-navigation-wrapper").height() -2;
        $("#layout-content-wrapper").height(height);

    }
}; 
```

# c++ - epoll 在客户端断开连接时循环

> ID：14563134
> 
> 赞同：3
> 
> 时间：2013-01-28T13:30:08.233
> 
> 标签：c++, linux, sockets, server-side, epoll

我正在尝试使用`epoll`. 我有 2 个线程执行 2 个任务：

1.  监听传入连接
2.  在屏幕上写下客户端正在发送的数据。

对于我的测试，我将客户端和服务器放在同一台机器上，运行 3 或 4 个客户端。服务器工作正常，直到我没有通过发出`CTRL-C`: 杀死其中一个客户端，只要我这样做，服务器就会开始循环并以非常快的速率打印来自其他客户端的数据。奇怪的是

1.  客户端每2秒发送一次数据，但服务器的速率更高
2.  `epoll_wait`当其中一个客户端断开连接时，它也应该打印一些东西，因为它也在检查 EPOLLHUP 或 EPOLLERR
3.  `epoll_wait`应该在打印前稍等片刻，因为我给了他 3000 毫秒的超时时间。

你能帮我吗？难道是我以错误的方式将 epoll 描述符传递给另一个线程？我无法理解，因为代码看起来与周围的许多示例相似。

非常感谢

锰

```
 // server.cpp
 #include <iostream>
 #include <cstdio>
 #include <cstring>
 extern "C" {
 #include <sys/epoll.h>    
 #include <sys/socket.h>
 #include <sys/types.h>
 #include <netdb.h>
 #include <pthread.h>
 }

 #define MAX_BACKLOG 10

 void* readerthread(void* args){
     int epfd = *((int*)args);
     epoll_event outwait[10];
     while(true){
         int retpw = epoll_wait( epfd, outwait,20, 3000 );
         if( retpw == -1 ){
         printf("epoll error %m\n");
         }else if( retpw == 0 ){
         printf("nothing is ready yet\n");
         continue;
         }else{
             for( int i=0;i<retpw;i++){
                 if( outwait[i].events & EPOLLIN ){
                     int fd = outwait[i].data.fd;   
                     char buf[64];
                     if( -1 == read(fd,buf,64) ){
                         printf("error reading %m\n");
                     }
                     printf("%s\n",buf);
                 }else{
                     std::cout << "other event" << std::endl;
                 }                  
             }
         }
     }  
 }

 int main(){ 

      int epfd = epoll_create(10);
      if( -1 == epfd ){
      std::cerr << "error creating EPOLL server" << std::endl;
      return -1;
      }

      pthread_t reader;
      int rt = pthread_create( &reader, NULL, readerthread, (void*)&epfd );
      if( -1 == rt ){
      printf("thread creation %m\n");
      return -1;
      }

      struct addrinfo addr;
      memset(&addr,0,sizeof(addrinfo));
      addr.ai_family   = AF_INET;
      addr.ai_socktype = SOCK_STREAM;
      addr.ai_protocol = 0;
      addr.ai_flags    = AI_PASSIVE;

      struct addrinfo * rp,* result;
      getaddrinfo( "localhost","59000",&addr,&result );
      for( rp = result; rp != NULL; rp = rp->ai_next ){

      // we want to take the first ( it could be IP_V4 
      // or IP_V6 )
      break;
      }     

      int sd = socket( AF_INET, SOCK_STREAM, 0 );
      if(-1==sd ){
      std::cerr << "error creating the socket" << std::endl;
      return -1;        
      }
      // to avoid error 'Address already in Use'
      int optval = 1;
      setsockopt(sd, SOL_SOCKET, SO_REUSEADDR, &optval, sizeof(optval));         

      if( -1==bind( sd, result->ai_addr, result->ai_addrlen ) ){
      printf("%m\n");
      std::cerr << "error binding" << std::endl;
      return -1;
      }

      while(true){

           std::cout << "listen" << std::endl;
           if( -1== listen(sd, MAX_BACKLOG ) ){
               std::cerr << "listen didn't work" << std::endl;
               return -1;
           }

           std::cout << "accept" << std::endl;
           sockaddr peer;
              socklen_t addr_size; 
           int pfd = accept( sd, &peer ,&addr_size );
           if( pfd == -1 ){
               std::cerr << "error calling accept()" << std::endl;
               return -1;
           }
           epoll_event ev;
           ev.data.fd = pfd;
           ev.events =  EPOLLIN;
           std::cout << "adding to epoll list" << std::endl;
           if( -1 == epoll_ctl( epfd, EPOLL_CTL_ADD, pfd, &ev ) ){
               printf("epoll_ctl error %m\n");
               return -1;
           }

      }

 }
 // end of server.cpp

 // client.cpp
     #include <iostream>
 #include <cstring>
 #include <cstdio>
 extern "C"{
 #include <sys/socket.h>
 #include <sys/types.h>
 #include <netdb.h>
 }

 int main(){

      const char* servername = "localhost";
      const char* serverport = "59000";

      struct addrinfo server_address;
      memset( &server_address, 0, sizeof(struct addrinfo) );
      server_address.ai_family  =  AF_INET;
      server_address.ai_socktype =  SOCK_STREAM;
      server_address.ai_protocol  =  0; // any protocol
      server_address.ai_flags    =  0;

      struct addrinfo * result, * rp;

      int res = getaddrinfo( servername, serverport, &server_address, &result );
      if( -1 == res ){
         std::cout << "I cannot getaddress " << servername << std::endl;
         return -1;
      }

      int fd = socket( server_address.ai_family
                , server_address.ai_socktype
                , server_address.ai_protocol );
      if( -1 == fd ){
      printf("I cannot open a socket %m\n");
            return -1;
      } 

     for( rp = result; rp != NULL; rp = rp->ai_next ){
         std::cout << "************" << std::endl;
        if( -1 == connect( fd, rp->ai_addr, rp->ai_addrlen ) ){
             close(fd);
         }else{
         std::cout << "connected" << std::endl;
         break;
       }
     }
     if( rp == NULL ){
         std::cerr << "I couldn't connect server " << servername << std::endl;
     }
     while(true){
         sleep(2);
         pid_t me = getpid();
         char buf[64];
         bzero( buf,sizeof(buf));
         sprintf( buf,"%ld",me );
         write(fd,buf,sizeof(buf));
         printf("%s\n",buf);
      }
 }
 // end of client.cpp 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T14:07:16.367

客户端断开连接由文件描述符上的 EOF 条件发出信号。系统认为 EOF 是文件描述符“可读”的状态。但是，当然，无法读取 EOF 条件。这是你循环的来源。`epoll`就像断开连接的客户端的文件描述符**始终**是可读的。`read`您可以通过检查何时返回读取的 0 字节来检测是否存在 EOF 条件。

处理 EOF 条件的唯一方法是以`close`某种方式处理文件描述符。根据事情的具体流程，这可能是`shutdown(sockfd, SHUT_RD)`，`shutdown(sockfd, SHUT_RDWR)`或`close(sockfd);`。

除非您知道[`shutdown(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/shutdown.2.html)出于某种原因需要调用，否则我建议您使用`close`. 当然，您应该记住`epoll`在您之前告诉文件描述符不再感兴趣`close`。我不确定如果你不这样做会发生什么，但一种可能性是`epoll`会出错。另一个是`epoll`在你将它添加到列表之前，它会神秘地开始报告具有相同数值的新文件描述符的事件`epoll`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T13:42:32.277

被对方干净关闭的套接字将变得可读并[`read(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/read.2.html)返回`0`，你必须检查一下。正如现在编码的那样 - 级别触发的轮询 -[`epoll_wait(2)`](http://www.kernel.org/doc/man-pages/online/pages/man2/epoll_wait.2.html)每次都返回而无需等待告诉您您仍然没有阅读该流的结尾。

或者，您也可以切换到边缘触发的轮询 ( `EPOLLET`) 并做出反应`EPOLLRDHUP`。

# java - OpenJPA 映射工具 MetaDataException

> ID：14563136
> 
> 赞同：2
> 
> 时间：2013-01-28T13:30:11.340
> 
> 标签：java, jpa, orm, persistence, openjpa

我正在尝试使用 OpenJPA 完成前向映射的过程。我想`MappingTool`为此目的使用 ，但我不断获得`MetaDataException`. 我提供文件`persistence.xml`作为`orm.xml`输入，并在定义`orm.xml`文件对象的类路径上提供已编译的 Java 类。

我像这样运行 MappingTool：

```
java -cp  /home/vic/openmdx/dev/openmdx2/jre-1.6/core/lib/openmdx-base.jar:/home/vic/Downloads/apache-openjpa-2.2.1/src/java:/home/vic/Downloads/apache-openjpa-2.2.1/openjpa-2.2.1.jar:/home/vic/Downloads/apache-openjpa-2.2.1/openjpa-all-2.2.1.jar org.apache.openjpa.jdbc.meta.MappingTool -p persistence.xml -schemaAction build orm.xml 
```

编译的类文件在哪里`/home/vic/Downloads/apache-openjpa-2.2.1/src/java`。

输出是这样的：

> ```
>  32  openjpa  INFO   [main] openjpa.jdbc.JDBC - Using dictionary class org.apache.openjpa.jdbc.sql.MySQLDictionary".
> 106  openjpa  INFO   [main] openjpa.Tool - Mapping tool running on type "class org.test.classdiag.jpa3.Animal" with action "buildSchema".
> 407  openjpa  WARN   [main] openjpa.Runtime - Found no persistent property in "org.omg.model1.jpa3.Attribute$Slice"
> 412  openjpa  WARN   [main] openjpa.Runtime - Found no persistent property in "org.omg.model1.jpa3.StructureField$Slice"
> 441  openjpa  WARN   [main] openjpa.Runtime - Found no persistent property in "org.omg.model1.jpa3.Reference$Slice"
> 455  openjpa  WARN   [main] openjpa.Runtime - Found no persistent property in "org.omg.model1.jpa3.Parameter$Slice"
> 465  openjpa  WARN   [main] openjpa.Runtime - Found no persistent property in "org.omg.model1.jpa3.Constant$Slice"
> 504  openjpa  WARN   [main] openjpa.Runtime - Found no persistent property in "org.omg.model1.jpa3.Import$Slice"
> 515  openjpa  WARN   [main] openjpa.Runtime - Found no persistent property in "org.omg.model1.jpa3.Constraint$Slice"
> Exception in thread "main" <openjpa-2.2.1-r422266:1396819 fatal user error> org.apache.openjpa.util.MetaDataException: Type "class org.test.classdiag.jpa3.Animal" loaded by sun.misc.Launcher$AppClassLoader@54f690e4 does not have persistence metadata.
>   at org.apache.openjpa.jdbc.meta.MappingTool.getMapping(MappingTool.java:688)
> at org.apache.openjpa.jdbc.meta.MappingTool.buildSchema(MappingTool.java:754)
> at org.apache.openjpa.jdbc.meta.MappingTool.run(MappingTool.java:652)
> at org.apache.openjpa.jdbc.meta.MappingTool.run(MappingTool.java:1087)
> at org.apache.openjpa.jdbc.meta.MappingTool.run(MappingTool.java:1001)
> at org.apache.openjpa.jdbc.meta.MappingTool$1.run(MappingTool.java:937)
> at org.apache.openjpa.lib.conf.Configurations.launchRunnable(Configurations.java:748)
> at org.apache.openjpa.lib.conf.Configurations.runAgainstAllAnchors(Configurations.java:738)
> at org.apache.openjpa.jdbc.meta.MappingTool.main(MappingTool.java:932) 
> ```

我的persistence.xml：

```
<?xml version="1.0"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" version="1.0">
    <persistence-unit name="openjpa"  transaction-type="RESOURCE_LOCAL">
        <provider>org.apache.openjpa.persistence.PersistenceProviderImpl</provider>
         <class>org.test.classdiag.jpa3.Animal</class>
                 <class>org.test.classdiag.jpa3.Cat</class>
                 <class>org.test.classdiag.jpa3.Dog</class>

        <properties>
            <property name="openjpa.Log" value="SQL=TRACE"/>
            <!-- <property name="openjpa.Log" value="DefaultLevel=WARN, Tool=INFO" /> -->
            <property name="openjpa.jdbc.MappingDefaults" value="IndexLogicalForeignKeys=false,IndexDiscriminator=false"/>
            <property name="openjpa.ConnectionURL" value="jdbc:mysql://localhost:3306/TEST_OPENMDX"/>
            <property name="openjpa.ConnectionDriverName" value="com.mysql.jdbc.Driver"/>
            <property name="openjpa.ConnectionUserName" value="root"/>
            <property name="openjpa.ConnectionPassword" value="root"/>
        </properties>
    </persistence-unit>
</persistence> 
```

我`orm.xml`的`Animal`：

```
<access>FIELD</access>
<entity class="org.test.classdiag.jpa3.Animal">
  <table name="OTT0CLAG_ANIMAL"/>
  <inheritance strategy="JOINED"/>
  <discriminator-value>org:test:classdiag:Animal</discriminator-value>
  <discriminator-column name="DTYPE" discriminator-type="STRING"/>
  <attributes>
    <basic name="colour">
      <column name="COLOUR" nullable="true"/>
    </basic>
    <basic name="breed">
      <column name="BREED" nullable="true"/>
    </basic>
    <basic name="name">
      <column name="NAME" nullable="true"/>
    </basic>
    <one-to-many name="openmdxjdoSlices" mapped-by="openmdxjdoIdentity">
      <map-key name="openmdxjdoIndex"/>
    </one-to-many>
  </attributes>
</entity> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T12:12:09.343

这是因为它`MappingTool`被`JDBCConfigurationImpl`用作默认值。配置`MappingTool`为使用数据源进行分布式配置 (DistributedJDBCConfigurationImpl)。

为了实现这一点，您需要从中复制`main`代码`MappingTool`并创建一个`DistributedJDBCConfigurationImpl`for conf，如下所示：

```
String[] arguments = new String[] { "-action", "buildSchema", "-foreignKeys", "false", "-openjpa.Tool", "false" };
Options opts = new Options();
final String[] args = opts.setFromCmdLine(arguments);
Configurations.runAgainstAllAnchors(opts, new Configurations.Runnable() {

    @Override
    public boolean run(Options opts) throws IOException, SQLException {
        JDBCConfiguration conf = new DistributedJDBCConfigurationImpl();
        conf.setLogFactory(new NoneLogFactory());
        try {
            return MappingTool.run(conf, args, opts);
        } finally {
            conf.close();
        }
    }
}); 
```

并将论点更改为您自己的论点。运行自己的工具实现后，一切都会正常工作。

# popup - 鼠标悬停时弹出两个 - addThis 分享按钮

> ID：14563142
> 
> 赞同：0
> 
> 时间：2013-01-28T13:30:28.523
> 
> 标签：popup, share, addthis

我如下所述运行js代码。结果是：在共享悬停时，出现两个弹出窗口（促销和大的）。预期的结果：只应该出现小的（我认为它被称为促销）弹出窗口。

我已经尝试了一切：1\. 更改为 300 版，2\. 将窗口参数设置为空部分（window._adr = null; ...）。然后我有不同的问题，只有这条线可以解决。3.越来越多越来越多......

另外，我将它用作视图/mvc 的一部分

如果过去有人处理过这个问题并愿意提供帮助，我将不胜感激。

```
var addthis_config = { "data_track_clickback": true};
var script = 'http://s7.addthis.com/js/250/addthis_widget.js#domready=1';
var posId = '<%=Model.Id%>';

var topAddThisShareSet = parseInt($('#leftContainer' + posId).prop("scrollHeight") - $('#leftContainer' + posId).prop("clientHeight"));

var addthis_config = {
    ui_offset_top: -(topAddThisShareSet),
    ui_offset_left: 0
}

debugger;
if (window.addthis)
{
    window.addthis = null;
    window._adr = null;
    window._atc = null;
    window._atd = null;
    window._ate = null;
    window._atr = null;
    window._atw = null;

}
$.getScript(script); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T07:43:38.997

```
//use this to remove existing popup
$("#at20mc").remove();

if (window.addthis)
{
    window.addthis = null;
    window._adr = null;
    window._atc = null;
    window._atd = null;
    window._ate = null;
    window._atr = null;
    window._atw = null;
}
$.getScript(script); 
```

# google-app-engine - 超过 Golang AppEngine 内存缓存截止日期

> ID：14563145
> 
> 赞同：0
> 
> 时间：2013-01-28T13:30:32.157
> 
> 标签：google-app-engine, go

我有一个 golang AppEngine 应用程序，它使用任务队列并行运行蒙特卡罗风格的模拟，并大量使用 memcache 来存储中间结果。对于少量进程/任务（< 100），一切正常，但我发现在大量（> 1000）时，我从 memcache 读取或更新中间数据时遇到很多失败，并出现错误“已取消：截止日期”超过'。这似乎在初始化任务后 7-10 秒发生。特别的违规者似乎是 memcache.JSON.Get 和 memcache.IncrementExisting。有没有可能我以某种方式超载了内存缓存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T22:01:16.857

[问题 6519](https://code.google.com/p/googleappengine/issues/detail?id=6519)可能相关

> 如果您启用了 appestats，并且 memcache 日志记录超过 1mb，则会出现“堆外”错误，然后所有后续的 memcache sets/gets/admin 调用都会失败。实例上传暂时“修复”了问题。我禁用了 appestats 以更永久地解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T06:53:03.237

似乎这与底层 AppEngine 基础设施问题有关（现已解决）

# windows-runtime - winRT中的着色形状？

> ID：14563146
> 
> 赞同：0
> 
> 时间：2013-01-28T13:30:35.217
> 
> 标签：windows-runtime

我的目标是在winRT中为矩形着色。当画笔离开矩形边框时，着色应该停止。所以在着色后我需要一个填充颜色的矩形。任何帮助将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:16:24.280

您可以使用 Clip 属性将任何元素剪辑成矩形。请注意，虽然现在它只支持矩形剪辑，但您需要使用 Direct2D 或自己处理所有像素。

# java - 抽象类中字段的 GIN 注入

> ID：14563148
> 
> 赞同：1
> 
> 时间：2013-01-28T13:30:43.213
> 
> 标签：java, gwt, dependency-injection, guice, gwt-gin

我在一些 GWT 应用程序中工作，其中我有一个层次结构，其中我有一个具有派生类的一些常见功能的抽象演示者。就像是：

```
public abstract class MyAbstractPresenter<T extends MyAbstractPresenter.CustomDisplay> extends Presenter<T>
{
public interface CustomDisplay extends View
{
  //some methods
}

//I want to inject this element
@Inject
private CustomObject myObj;

public MyAbstractPresenter(T display)
{
   super(display);
}
} 
```

所有子类都被正确注入。但是，我希望能够注入该特定字段，而无需将其添加到子类的构造函数中。如您所见，我尝试进行字段注入，但它不起作用，因为它是被注入的子类。

是否有适当的方法来实现这种注入而不让子类知道该字段的存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:30:39.533

显然，就目前而言，GIN 中不支持这种行为。一种解决方法是在具体类构造函数中注入所需的字段，即使它们不需要它。就像是：

```
 public abstract class MyAbstractPresenter<T extends MyAbstractPresenter.CustomDisplay> extends Presenter<T>
 {
   public interface CustomDisplay extends View
   {
     //some methods
   }

   //I wanted to inject this element
   private final CustomObject myObj;

   public MyAbstractPresenter(T display, CustomObject obj)
   {
      super(display);
      myObj = obj;
   }
} 
```

然后在任何扩展这个抽象实现的类中，我必须在构造时传递它。

```
public abstract class MyConcretePresenter extends MyAbstractPresenter<MyConcretePresenter.CustomDisplay>
{
  public interface CustomDisplay extends MyAbstractPresenter.CustomDisplay
  {
     //some methods
  }

 @Inject  //it would get injected here instead.
 public MyConcretePresenter(CustomDisplay display, CustomObject obj)
 {
     super(display, obj);
 }
} 
```

# objective-c - 设置了 cell.contentview 的 UITableView 随机崩溃

> ID：14563150
> 
> 赞同：1
> 
> 时间：2013-01-28T13:30:51.707
> 
> 标签：objective-c, memory-management, uitableview, uiviewcontroller

我正在开发 uitableview，当我在 uitableviewcell 中使用自定义 uiviewcontroller 时，我遇到了随机崩溃。

```
static NSString *CellIdentifier = @"Cell";
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if(!cell){
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    SuspectSalesResponse* r = [valueArray objectAtIndex:indexPath.row];
    SuspectSalesCellViewController* scellView = [[SuspectSalesCellViewController alloc]initWithNibName:@"SuspectSalesCellViewController" bundle:nil cellData:r];
    if(![cellViewArray containsObject:scellView])        
       [cellViewArray addObject:scellView];
    [cell.contentView addSubview:scellView.view];

}
return cell; 
```

此代码有时有效，有时会出现以下错误：

> *** -[SuspectSalesHeaderViewController _parentModalViewController]：消息发送到释放实例 0x8556880

我尝试将 contentviews 保存在数组（cellViewArray）中，但运气不好，我仍然收到此错误。我究竟做错了什么？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:35:15.467

问题是您不应该在表格单元格中添加视图控制器。您应该尝试从 更改`UIViewController`为`UIView`。

崩溃的确切原因是您创建了一个控制器（它有一个视图）并且您正在将视图添加到您的单元格中，但是控制器对象丢失了。当视图向它的父控制器发送任何通知时，控制器已经被解除分配，并且在那里您获得了错误的访问权限。`SuspectSales~`如果您将您的转换为`UIView`子类，这将得到解决

**编辑** 要从 nib 文件加载`UIView`（或任何子类），您必须首先创建 xib，将视图的类设置为您的类（您在界面构建器的第三个选项卡中执行此操作）。

之后，您可以使用以下代码加载它：

某些实用程序类中的通用函数

```
+ (id)loadNibNamed:(NSString *)nibName ofClass:(Class)objClass {
    if (nibName && objClass) {
        NSArray *objects = [[NSBundle mainBundle] loadNibNamed:nibName owner:nil options:nil];

        for (id currentObject in objects ){
            if ([currentObject isKindOfClass:objClass])
                return currentObject;
        }
    }

    return nil;
} 
```

在你的课堂上：

```
Subclass *view = [UtilityClass loadNibNamed:@"Subclass" ofClass:[Subclass class]]; 
```

# android - Oauth 2.0：暴露了客户端 ID 和客户端密码，这是一个安全问题吗？

> ID：14563155
> 
> 赞同：28
> 
> 时间：2013-01-28T13:31:08.587
> 
> 标签：android, security, oauth-2.0

当**Android** oauth 2.0 客户端应用程序具有硬编码的凭据（客户端 ID 和客户端密钥）时，很容易反编译应用程序并检索凭据。**暴露客户端 ID 和 Secret**
的后果是什么？

 *** * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-28T15:24:39.333

我知道这不是一个好的 StackOverflow 答案，但我觉得无法比威胁模型和安全注意事项 (RFC 6819) 更好地解释它。所以这里是关于获取[客户端密钥](https://www.rfc-editor.org/rfc/rfc6819#section-4.1.1)及其相关后果的段落。

请注意，Android 应用程序是公共客户端（更具体地说是本机应用程序），因此，正如您所说，无法对其凭据保密，但仍能够保护令牌和授权代码。

[您的案例也很有趣的是有关智能手机](https://datatracker.ietf.org/doc/html/draft-ietf-oauth-use-cases-03#section-2.3)的示例。

我知道 RFC 并不是最有趣的读物，但它们非常清楚。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-12T21:23:40.730

据此，这是一个安全问题： http: [//software-security.sans.org/blog/2011/03/07/oauth-authorization-attacks-secure-implementation](http://software-security.sans.org/blog/2011/03/07/oauth-authorization-attacks-secure-implementation)

如果链接停止工作，下面是它所说的：

> OAuth 对基于浏览器的授权的依赖性为默认情况下不在用户浏览器中运行的移动或桌面应用程序带来了继承实现问题。此外，从纯粹的安全角度来看，主要关注的是实施者何时在客户端应用程序本身中存储和混淆密钥/秘密组合。这使得密钥轮换几乎不可能，并允许未经授权访问存储消费者机密的反编译源代码或二进制文件。例如，要破坏 Android 上 Twitter 客户端的客户端凭据，攻击者可以简单地使用 Android 反汇编工具 dexdump 反汇编 classes.dex：

```
dexdump - d classes.dex 
```

以上内容更详细，是一本非常棒的读物。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-21T13:32:55.340

只是备注：客户端ID不是设计的秘密，所以实际上没有必要保护它。

请参阅[RFC 6749](https://www.rfc-editor.org/rfc/rfc6749#section-2.2)（“OAuth 2.0 授权框架”）中的第 2.2 节：

> 客户端标识符不是秘密；它向资源所有者公开，不得单独用于客户端身份验证。**

# sql-server - 有没有办法在子查询中使用 DBCC 命令

> ID：14563161
> 
> 赞同：2
> 
> 时间：2013-01-28T13:31:38.740
> 
> 标签：sql-server, dbcc

我想从 DBCC SHOW_STATISTICS 命令中提取一些信息。所以我一直在尝试用子查询来做到这一点，但直到现在这似乎是不可能的。通过谷歌，我发现了一些关于临时表的建议，但这似乎需要先定义临时表。

有什么解决方案，或者人们可以确认这是不可能的吗？

# java - 如何使用 API 阅读谷歌电子表格中的工作表？

> ID：14563163
> 
> 赞同：3
> 
> 时间：2013-01-28T13:31:41.227
> 
> 标签：java, spreadsheet, google-sheets, google-spreadsheet-api

我有一个 google 电子表格，其中包含 2-3 个单独的工作表。我正在寻找一种方法来查看工作表#2 中包含的行，然后遍历之前找到的每一行的列。

我会寻找哪种 API 方法来执行此操作？我无法从谷歌电子表格 API 页面找到这个。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-13T21:56:45.090

```
package com.Sensor.Data;

import com.google.gdata.client.spreadsheet.SpreadsheetService;
import com.google.gdata.data.spreadsheet.ListEntry;
import com.google.gdata.data.spreadsheet.ListFeed;
import com.google.gdata.data.spreadsheet.SpreadsheetEntry;
import com.google.gdata.util.ServiceException;

import java.io.IOException;
import java.net.URL;

public class readData {

    public static final String GOOGLE_ACCOUNT_USERNAME = "piprojectutd@gmail.com"; 
    public static final String GOOGLE_ACCOUNT_PASSWORD = "password"; 

    public static final String SPREADSHEET_URL = <insert your spreadsheet url here until key onlye i.e"https://spreadsheets.google.com/feeds/spreadsheets/0AjyNkJ5x_vajdDRZQ1RBSEw5aHFLRU1yOHFYeFFoekE";>

    public String getData(){
        String status="";

    try{
    /** Our view of Google Spreadsheets as an authenticated Google user. */
        SpreadsheetService service = new SpreadsheetService("Print Google Spreadsheet Demo");

        // Login and prompt the user to pick a sheet to use.
        service.setUserCredentials(GOOGLE_ACCOUNT_USERNAME,
                GOOGLE_ACCOUNT_PASSWORD);

        // Load sheet
        URL metafeedUrl = new URL(SPREADSHEET_URL);
        SpreadsheetEntry spreadsheet = service.getEntry(metafeedUrl,SpreadsheetEntry.class);
        URL listFeedUrl = spreadsheet.getWorksheets().get(0).getListFeedUrl();

        // Print entries
        ListFeed feed = service.getFeed(listFeedUrl, ListFeed.class);

        for (ListEntry entry : feed.getEntries()) {
            System.out.println("new row");
            for (String tag : entry.getCustomElements().getTags())) {
                System.out.println("     " + tag + ": "
                        + entry.getCustomElements().getValue(tag));
                status=entry.getCustomElements().getValue(tag);

            }
        }

    }catch(Exception e){
        System.out.println(e);
    }
    System.out.println(status);
    return(status);
    }
} 
```

# android - 适用于 iOS/Android 的具有电影纹理的 3D 引擎？

> ID：14563169
> 
> 赞同：1
> 
> 时间：2013-01-28T13:31:59.720
> 
> 标签：android, ios, 3d, unity3d, game-engine

是否有任何高级 3D 引擎能够在 iOS 和 Android 上显示电影纹理？

这将是一个靠近虚拟博物馆的项目，在一些墙上播放视频。该引擎还可以从 3DS Max 导入 3D 模型。

我检查了主要的 3D 引擎，但没有找到理想的引擎。例如 Unity3D 不支持电影纹理。

我想知道是否可以避免在每个平台上编写低级 OpenGL 代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:27:11.787

Unity 不支持开箱即用的移动设备上的电影纹理，但这个 Mobile Movie Texture 插件运行良好：

[http://u3d.as/content/defiant-development-pty-ltd/mobile-movie-texture/2w1](http://u3d.as/content/defiant-development-pty-ltd/mobile-movie-texture/2w1)

ps 我认为它需要 Unity Pro

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T13:34:08.163

Unity3D 支持[电影纹理](http://docs.unity3d.com/Documentation/ScriptReference/MovieTexture.html)。更新：似乎只适用于桌面。

Rad Game Tools的[Bink](http://www.radgametools.com/bnkmain.htm)似乎确实有效。这只是一个（专有）视频解码器库，尽管您很可能必须将其合并到您自己的引擎中（我相信我说得对，您可以指定视频渲染到的内存缓冲区，所以一旦你有你可以用它做任何你喜欢的框架）。

# javascript - 在另一个函数中重新加载 jQuery 函数

> ID：14563170
> 
> 赞同：0
> 
> 时间：2013-01-28T13:32:04.833
> 
> 标签：javascript, jquery, function, reload

这是一个棘手的问题，我什至不知道如何为它命名。

所以我所拥有的有点混乱，我有一个名为 slideonlyone 的 jQuery 函数，它可以切换 div，在 div 中我有一个名为 royalSlider（内容滑块）的 jQuery 插件。

发生的情况是，当我第一次加载页面时，默认情况下我没有切换一个 div，并且 royalSlider 插件工作正常。当我使用 RoyalSlider 插件将页面切换到另一个 div 时，它无法加载该插件。

我的页面的头部看起来像这样：

```
 <head>
    <link rel="stylesheet" href="/css/system.css" type="text/css">
    <link rel="stylesheet" href="/css/royalslider.css" type="text/css">
    <link rel="stylesheet" href="/css/default/rs-default-inverted.css" type="text/css">
    <script src="/js/jquery-1.8.3.min.js" type="text/javascript"></script>
    <script src="/js/jquery.royalslider.js" type="text/javascript"></script>
    <script src="/js/systems_jquery.js" type="text/javascript"></script>

      <script type="text/javascript">
        function slideonlyone(thechosenone) {
        $('.systems_detail').each(function(index) {
        if ($(this).attr("id") == thechosenone) {
             $(this).slideDown(200);
        }
        else {
             $(this).slideUp(600);
        }
   });
  }
  </script>
</head> 
```

皇家滑块在我加载的名为“systems_jquery.js”的单独文件中调用

```
 jQuery(document).ready(function($) {
  var rsi = $('#slider-in-laptop').royalSlider({
    autoHeight: false,
    arrowsNav: false,
    fadeinLoadedSlide: false,
    controlNavigationSpacing: 0,
    controlNavigation: 'bullets',
    imageScaleMode: 'fill',
    imageAlignCenter: true,
    loop: false,
    loopRewind: false,
    numImagesToPreload: 6,
    keyboardNavEnabled: true,
    autoScaleSlider: true,  
    autoScaleSliderWidth: 486,     
    autoScaleSliderHeight: 315
  }).data('royalSlider');
  $('#slider-next').click(function() {
    rsi.next();
  });
  $('#slider-prev').click(function() {
    rsi.prev();
  });
 }); 
```

html 看起来像这样

```
 <a href="javascript:slideonlyone('beagle_box');">
    <div class="system_box">
      <h2>BEE management systems</h2>
      <p>________________</p>
    </div>
  </a> 
```

这是产品详细信息 div。

```
<div class="systems_detail" id="sms_box">
  <div class="laptopBg">
    <img src="/images/laptop.png" class="imgBg" width="707" height="400">
    <div id="slider-in-laptop" class="royalSlider rsDefaultInv">
      <img src="/images/1.jpg">
      <img src="/images/2.jpg" data-rsvideo="https://vimeo.com/45778774">
      <img src="/images/3.jpg">
      <img src="/images/4.jpg">
    </div>
  </div>
</div> 
```

正如您所看到的，除了显示产品屏幕截图的 RoyalSlider 之外，还有其他细节。但由于它只是刚刚出现，因此图像没有加载到滑块中，并且图像在彼此下方显示，就好像插件坏了但是当我检查元素并转到控制台时，我可以看到它没有坏。所以我怀疑当我切换 div 以便它再次找到 ID 时，royalSlider 将需要重新加载？

当我从我的 slidonlyone 功能切换/滑动某些内容时，是否可以重新加载 RoyalSlider 功能？

注意：如果我切换 div 并且如果我重新加载页面，滑块会丢弃其内容，它会再次拾取它们。因此，一旦我切换了 div，它肯定需要重新加载royalSlider——或者一旦我切换了页面，就需要重新加载页面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:47:29.427

好吧，如果您想再次运行“royalSlider”，而不仅仅是将整个东西包装在一个函数中。然后在您认为需要重新加载它的时候运行它（'documentReady' 或 'click' 等）：

```
royalSliderReload = function() {

    var rsi = $('#slider-in-laptop').royalSlider({
            autoHeight: false,
            arrowsNav: false,
            fadeinLoadedSlide: false,
            controlNavigationSpacing: 0,
            controlNavigation: 'bullets',
            imageScaleMode: 'fill',
            imageAlignCenter: true,
            loop: false,
            loopRewind: false,
            numImagesToPreload: 6,
            keyboardNavEnabled: true,
            autoScaleSlider: true,  
            autoScaleSliderWidth: 486,     
            autoScaleSliderHeight: 315
    }).data('royalSlider');

    $('#slider-next').click(function() {
        rsi.next();
    });

    $('#slider-prev').click(function() {
        rsi.prev();
    }); 
}

$(document).ready(function(e) {
    royalSliderReload(); 
});

function slideonlyone(thechosenone) {
  $('.systems_detail').each(function (index) {
      if ($(this).attr("id") == thechosenone) {
          $(this).slideDown(200);
          royalSliderReload(); // slider will reload here
      } else {
          $(this).slideUp(600);
      }
  });
  } 
```

# qt - 原始数据到 QImage

> ID：14563180
> 
> 赞同：7
> 
> 时间：2013-01-28T13:32:41.347
> 
> 标签：qt, qimage

我是图形编程（像素、图像等）的新手。我正在尝试将原始数据转换为 QImage 并将其显示在 QLabel 上。问题是，原始数据可以是任何数据（它实际上不是图像原始数据，它是二进制文件。）如果是这样，为了深入了解像素和类似的东西是如何工作的，我知道我会得到随机的具有奇怪结果的图像，但它会起作用。我正在做这样的事情，但我认为我做错了！

```
QImage *img = new QImage(640, 480, QImage::Format_RGB16); //640,480 size picture.
//here I'm trying to fill newly created QImage with random pixels and display it.
for(int i = 0; i < 640; i++)
{
    for(int u = 0; u < 480; u++)
    {
        img->setPixel(i, u, rawData[i]);
    }
}
ui->label->setPixmap(QPixmap::fromImage(*img)); 
```

我做得对吗？顺便问一下，你能指出我应该在哪里学习这些东西吗？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T13:53:54.887

总体来说是对的。`QImage`是一个允许直接操作自己的数据的类，但您应该使用正确的像素格式。

一个更有效的例子：

```
QImage* img = new QImage(640, 480, QImage::Format_RGB16);
for (int y = 0; y < img->height(); y++)
{
    memcpy(img->scanLine(y), rawData[y], img->bytesPerLine());
} 
```

哪里`rawData`是一个二维数组。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-11-14T15:39:44.323

这就是我将原始 BGRA 帧保存到磁盘的方式：

```
QImage image((const unsigned char*)pixels, width, height, QImage::Format_RGB32);
image.save("out.jpg"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:00:49.103

从语法上讲，您的代码似乎是正确的。

阅读类签名，您可能希望通过以下方式调用 setPixel：

```
img->setPixel(i, u, QRbg(##FFRRGGBB)); 
```

其中*##FFRRGGBB*是彩色四联体，当然，除非您想要单色 8 位支持。

此外，声明裸指针是危险的。下面的代码是等价的：

```
QImage image(640, 480, QImage::Format_something);
QPixmap::fromImage(image); 
```

并将在功能完成后适当地释放。

[Qt 示例](http://qt-project.org/doc/qt-4.8/all-examples.html)目录是搜索功能的好地方。此外，请仔细阅读类文档，因为它们充满了示例。

# magento - Magento 在客户登录页面中显示侧边栏

> ID：14563186
> 
> 赞同：1
> 
> 时间：2013-01-28T13:33:15.133
> 
> 标签：magento, layout, sidebar

*我想在客户帐户登录页面*的左侧显示一个侧边栏。通过在文件中调用导航栏，我已成功将侧边栏放置在*产品页面中。*`catlog.xml`

但是对文件执行相同的方法`customer.xml`不会显示侧边栏。

**注意** 通过阅读[*“Magento：在侧边栏中显示类别”*](http://thinkclay.com/technology/magento-display-categories-in-sidebar)的帖子，我已经更改了*产品页面*中的侧边栏。但它不适用于*客户登录页面*。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:08:35.347

您需要首先告诉 Magento 为客户帐户登录页面使用 2 列模板 - 作为标准，它使用 1 列模板文件，因此不会有左侧或右侧结构块供您的侧边栏进入。

做起来很简单 - 最佳实践是将布局指令添加到现有的*或*在您的**app/design/frontend/YOUR_PACKAGE/YOUR_THEME/layout/**文件夹中创建一个**local.xml**文件。

 **使用句柄`<customer_account_login>`引用登录页面，将以下内容添加到 local.xml

```
<customer_account_login>
    <reference name="root">
        <action method="setTemplate"><template>page/2column-left.phtml</template></action><!-- Tells Magento to use 2 Column Left page template -->
    </reference>
</customer_account_login> 
```

这将使用带有左侧边栏的模板。

然后，也在`<customer_account_login>`您的块中对左侧结构块的同一句柄调用中......

```
<customer_account_login>
    <reference name="root">
        <action method="setTemplate"><template>page/2column-left.phtml</template></action><!-- Tells Magento to use 2 Column Left page template -->
    </reference>
    <reference name="left"><!-- Tells Magento to place the following content in the left structural block-->
        <!-- Your Block Goes Here -->
    </reference>
</customer_account_login> 
```

完毕。

如果您不习惯在 local.xml 文件中工作，您可以修改**customers.xml**`<customer_account_login>`中句柄的内容以使用上面提到的“root”和“left”——您会发现它调用了 page/1column。根目录下的 phtml 文件，当然还没有.**`<reference name="left">`****

# eclipse - 检查处理程序中菜单项的状态

> ID：14563187
> 
> 赞同：1
> 
> 时间：2013-01-28T13:33:18.360
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp, rcp

**如何以编程方式检查作为菜单项贡献的命令是否在处理程序“执行”**方法中被选中/未选中（如果是 CHECK BOX 类型）、选中或未选中（如果是 RADIO 按钮类型） 。在此处查看快照[https://docs.google.com/file/d/0B3pxBGD-v-ycWVFaeElnSGdyTE0/edit](https://docs.google.com/file/d/0B3pxBGD-v-ycWVFaeElnSGdyTE0/edit)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T10:36:25.450

查看此博客：[http ://eclipsesource.com/blogs/2009/01/15/toggling-a-command-contribution/](http://eclipsesource.com/blogs/2009/01/15/toggling-a-command-contribution/)

因此，首先确保您的命令具有适当的样式：

```
<extension point="org.eclipse.ui.menus">
  <menuContribution locationURI="...">
    <command commandId="org.eclipse.example.command.toggle"
              style="toggle" />
  </menuContribution>
</extension> 
```

然后，您可以像这样检查状态：

```
ICommandService service =(ICommandService) PlatformUI.getWorkbench().getService(ICommandService.class);
Command command = service.getCommand("org.eclipse.example.command.toggle");
State state = command.getState("org.eclipse.example.command.toggleState");
System.out.println(state.getValue());
//state.setValue(!(Boolean) state.getValue()); 
```

此外，请考虑查看 org.eclipse.ui.handlers.HandlerUtil，它有时可能会有所帮助。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-31T07:56:05.900

我得到了解决方案，在处理程序执行方法方法中添加了这段代码

```
public Object execute(ExecutionEvent event) throws ExecutionException {

   Event selEvent = (Event) event.getTrigger();
   MenuItem item = (MenuItem) selEvent.widget;

   System.Out.Println(item.getSelection());     
   return null;
} 
```

# smalltalk - 使用 PetitParser 定义左关联解析器

> ID：14563188
> 
> 赞同：5
> 
> 时间：2013-01-28T13:33:20.103
> 
> 标签：smalltalk, pharo, petitparser

在[http://pharobooks.gforge.inria.fr/PharoByExampleTwo-Eng/latest/](http://pharobooks.gforge.inria.fr/PharoByExampleTwo-Eng/latest/)中，定义了一个 ExpressionGrammar。但是，它是右结合的

```
parser parse: '1 + 2 + 6'.    ======> #(1 $+ #(2 $+ 6)) 
```

我怎样才能使它左关联，以便

```
parser parse: '1 + 2 + 6'. 
```

结果是

```
#(#(1 $+ 2) $+ 6) 
```

?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T14:24:30.577

对于左结合文法，使用：

```
term := (prod sepratedBy: $+ asParser trim) foldLeft: [ :a :op :b | 
```

...]

对于右结合文法，使用：

```
raise := (prod sepratedBy: $^ asParser trim) foldRight: [ :a :op :b | 
```

...]

或者，您可能想查看`PPExpressionParser`，它会自动为您处理所有详细信息。您只需告诉它哪些运算符是左关联、右关联、前缀或后缀运算符。查看课程评论以进行深入讨论。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T13:38:33.790

看看 PPExpressionParser 类。

它就是为此而设计的，你在课堂评论中有一个很好的例子

# tcl - 读取事件处理程序中的所有输入？

> ID：14563192
> 
> 赞同：2
> 
> 时间：2013-01-28T13:33:37.573
> 
> 标签：tcl

**可读文件事件是由通道变得**可读还是由它可读触发**的**？在文件事件处理程序中，我是否必须读取所有可用输入才能在将来触发新事件？或者我可以只读取 1 个字符并返回，如果输入更多，我的处理程序将自动再次直接调用？或者不是直接，而是放在事件队列的末尾，所以这将是防止一个流阻塞整个程序的首选方法（可能不仅仅是 1 个字符，而是例如 1 行）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:48:57.613

它由可读的通道触发*，*因此您只能读取输入的一部分（或者偶尔什么也不读取，确保将再次调用处理程序）。但是，读取所有可用输入对性能更好（不一定是所有可用字节：如果您逐行读取，请执行`gets`直到它返回`-1`fblocked 条件）。

输入耗尽的标志是 的真实值`[fblocked $channel]`。这就是为什么输入行不完整的用例`gets`是可能的：即使通道在技术上是*可读*的，只是不可*获取*，在新数据到达之前事件不会再次触发。

# asp.net - Amazon SES 停止工作

> ID：14563200
> 
> 赞同：16
> 
> 时间：2013-01-28T13:33:55.733
> 
> 标签：asp.net, amazon-web-services, smtp, amazon-ses

我设置了 Amazon SES，它最初工作了几个小时，然后突然停止了。我发送的所有电子邮件以及我们的域都已通过验证。我们不会发送大量电子邮件 - 每天只有几百封。每当我对 web.config 进行更改时，它似乎允许它再次工作 2-3 小时。例如，它停止工作，所以我将端口 587 切换到 25，它开始工作 2-3 小时，然后停止。然后我切换回587，同样的事情发生了。一旦它停止工作，它似乎永远不会自行重新开始。它运行在两台负载平衡服务器上，asp.net framework v2.0、IIS 7.5。这是我正在使用的代码：

网络配置：

```
<system.net>
  <mailSettings>
    <smtp deliveryMethod="Network" from="no-reply@ourdomain.com">
      <network defaultCredentials="false" host="email-smtp.us-east-1.amazonaws.com" userName="***" password="***" port="587" />
    </smtp>
  </mailSettings>
</system.net> 
```

c#代码：

```
var smtpClient = new SmtpClient() { EnableSsl = true };

var mailMessage =
    new MailMessage(fromAddress, toAddress, subject, body)
    {
        IsBodyHtml = true
    };

smtpClient.Send(mailMessage); 
```

这是我收到的两个错误：

```
The following exception was thrown by the web event provider '(null)' in the application '/' (in an application lifetime a maximum of one exception will be logged per provider instance):

System.Web.HttpException: Unable to send out an e-mail to the SMTP server. Please ensure that the server specified in the <smtpMail> section is valid. ---> System.Net.Mail.SmtpException: Failure sending mail. ---> System.IO.IOException: Received an unexpected EOF or 0 bytes from the transport stream.
   at System.Net.FixedSizeReader.ReadPacket(Byte[] buffer, Int32 offset, Int32 count)
   at System.Net.Security.SslState.StartReadFrame(Byte[] buffer, Int32 readBytes, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.StartReceiveBlob(Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ForceAuthentication(Boolean receiveFirst, Byte[] buffer, AsyncProtocolRequest asyncRequest)
   at System.Net.Security.SslState.ProcessAuthentication(LazyAsyncResult lazyResult)
   at System.Threading.ExecutionContext.runTryCode(Object userData)
   at System.Runtime.CompilerServices.RuntimeHelpers.ExecuteCodeWithGuaranteedCleanup(TryCode code, CleanupCode backoutCode, Object userData)
   at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Net.TlsStream.ProcessAuthentication(LazyAsyncResult result)
   at System.Net.TlsStream.Write(Byte[] buffer, Int32 offset, Int32 size)
   at System.Net.PooledStream.Write(Byte[] buffer, Int32 offset, Int32 size)
   at System.Net.Mail.SmtpConnection.Flush()
   at System.Net.Mail.ReadLinesCommand.Send(SmtpConnection conn)
   at System.Net.Mail.SmtpConnection.GetConnection(String host, Int32 port)
   at System.Net.Mail.SmtpClient.Send(MailMessage message)
   --- End of inner exception stack trace ---
   at System.Net.Mail.SmtpClient.Send(MailMessage message)
   at System.Web.Management.MailWebEventProvider.SendMail(MailMessage msg)
   --- End of inner exception stack trace ---
   at System.Web.Management.MailWebEventProvider.SendMail(MailMessage msg)
   at System.Web.Management.SimpleMailWebEventProvider.SendMessageInternal(WebBaseEventCollection events, Int32 notificationSequence, Int32 begin, DateTime lastFlush, Int32 discardedSinceLastFlush, Int32 eventsInBuffer, Int32 messageSequence, Int32 messagesInNotification, Int32 eventsInNotification, Int32 eventsLostDueToMessageLimit)
   at System.Web.Management.SimpleMailWebEventProvider.SendMessage(WebBaseEvent eventRaised)
   at *****.Global.SimpleMailWithSslWebEventProvider.ProcessEvent(WebBaseEvent raisedEvent)
   at System.Web.Management.WebBaseEvent.RaiseInternal(WebBaseEvent eventRaised, ArrayList firingRuleInfos, Int32 index0, Int32 index1) 
```

* * *

```
The following exception was thrown by the web event provider '(null)' in the application '/' (in an application lifetime a maximum of one exception will be logged per provider instance):

System.Web.HttpException: Unable to send out an e-mail to the SMTP server. Please ensure that the server specified in the <smtpMail> section is valid. ---> System.Net.Mail.SmtpException: Service not available, closing transmission channel. The server response was: Timeout waiting for data from client.
   at System.Net.Mail.MailCommand.CheckResponse(SmtpStatusCode statusCode, String response)
   at System.Net.Mail.SmtpTransport.SendMail(MailAddress sender, MailAddressCollection recipients, String deliveryNotify, SmtpFailedRecipientException& exception)
   at System.Net.Mail.SmtpClient.Send(MailMessage message)
   at System.Web.Management.MailWebEventProvider.SendMail(MailMessage msg)
   --- End of inner exception stack trace ---
   at System.Web.Management.MailWebEventProvider.SendMail(MailMessage msg)
   at System.Web.Management.SimpleMailWebEventProvider.SendMessageInternal(WebBaseEventCollection events, Int32 notificationSequence, Int32 begin, DateTime lastFlush, Int32 discardedSinceLastFlush, Int32 eventsInBuffer, Int32 messageSequence, Int32 messagesInNotification, Int32 eventsInNotification, Int32 eventsLostDueToMessageLimit)
   at System.Web.Management.SimpleMailWebEventProvider.SendMessage(WebBaseEvent eventRaised)
   at *****.Global.SimpleMailWithSslWebEventProvider.ProcessEvent(WebBaseEvent raisedEvent)
   at System.Web.Management.WebBaseEvent.RaiseInternal(WebBaseEvent eventRaised, ArrayList firingRuleInfos, Int32 index0, Int32 index1) 
```

我试图在亚马逊论坛上寻求帮助，但没有任何运气。似乎有什么东西干扰了连接，但我不知道是什么。有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-29T10:42:45.870

这听起来确实是一个棘手的问题 - 我对此不是 100% 肯定，但您似乎错过了处理 SMTP 客户端，[在更改为 VPC 实例后发送电子邮件通常很慢](https://serverfault.com/q/452462/10305)中提到，这会导致您遇到的错误看到：

> 当我不处理 SmtpClient 时，我收到错误...
> 
> '服务不可用，正在关闭传输通道。服务器响应是：超时等待来自客户端的数据。

这实际上是对间歇性问题的一个很好的解释，即根据执行的代码路径，此问题可能会触发与[Amazon SES](http://aws.amazon.com/ses/)的 SMTP 连接挂起，这显然可以通过切换到另一个端口来解决，这意味着连接被重置 - 这就是[SmtpClient.Dispose 方法](http://msdn.microsoft.com/en-us/library/ee706941.aspx)也确保：

> 向 SMTP 服务器发送 QUIT 消息，优雅地结束 TCP 连接，并释放[SmtpClient](http://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.aspx)类的当前实例使用的所有资源。

因此，适当的模式是促进[using Statement](http://msdn.microsoft.com/en-us/library/yh598w02.aspx)，如[Amazon SES 和 .NET 入门中](http://sesblog.amazon.com/post/Tx19TAGZFKPEPGP/Getting-Started-with-Amazon-SES-and-NET)所示：

```
 String username = "SMTP-USERNAME";  // Replace with your SMTP username.
  String password = "SMTP-PASSWORD";  // Replace with your SMTP password.
  String host = "email-smtp.us-east-1.amazonaws.com";
  int port = 25;

  using (var client = new System.Net.Mail.SmtpClient(host, port))
  {
    client.Credentials = new System.Net.NetworkCredential(username, password);
    client.EnableSsl = true;

    client.Send
    (
              "FROM@EXAMPLE.COM",  // Replace with the sender address.
              "TO@EXAMPLE.COM",    // Replace with the recipient address.
              "Testing Amazon SES through SMTP",              
              "This email was delivered through Amazon SES via the SMTP end point."
    );
  } 
```

请注意，该示例使用端口 25，由于通常隐含的发送限制，我强烈建议您避免使用该端口，有关各个 Amazon EC2 限制的详细信息，请参阅下面的*附录。*

祝你好运！

* * *

## 附录

### Amazon EC2 在端口 25 上进行节流

您可能已经意识到这一点（实际上我认为这不是问题），但是[Amazon EC2](http://aws.amazon.com/ec2/) *对通过端口 25 发送的电子邮件施加了默认发送限制，如果您尝试超过使用*[Amazon](http://aws.amazon.com/ses/)时仍然适用的限制，则会限制出站连接[SES](http://aws.amazon.com/ses/)，请参阅[Amazon SES SMTP 问题](http://docs.aws.amazon.com/ses/latest/DeveloperGuide/smtp-issues.html)：

> **您正在通过端口 25 从 Amazon EC2 实例发送到 Amazon SES，并且您无法达到您的 Amazon SES 发送限制或者您正在接收超时**— Amazon SES EC2 对通过端口 25 发送的电子邮件施加默认发送限制，并且如果您尝试限制出站连接超过这些限制。要删除这些限制，请提交 [删除电子邮件发送限制的请求](https://aws-portal.amazon.com/gp/aws/html-forms-controller/contactus/ec2-email-limit-rdns-request)。您还可以通过端口 465 或端口 587 连接到 Amazon SES，这两个端口都不受限制。

因此，我会从您的测试/切换场景中删除端口 25 并仅使用端口 465/587 以避免错误的线索（如引用的那样，您也可以请求删除此限制，但这需要几个小时和端口 25 似乎首先最好避免使用）- 有点不幸的是，几个官方的 Amazon SES 示例正在使用端口 25，甚至没有提及这个容易触发的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-10-20T14:40:53.277

虽然这个问题特定于 .NET v2.0，但我最近在 .NET v4.5 上也遇到了这个问题。即使在添加了 using around SMTP client（如之前的帖子中所建议的那样）之后，我仍然间歇性地收到此错误。经过数小时的研究，我发现了 AWS 对 STARTTLS 端口（2587；[http](http://docs.aws.amazon.com/ses/latest/DeveloperGuide/smtp-connect.html) ://docs.aws.amazon.com/ses/latest/DeveloperGuide/smtp-connect.html ）的支持，并且在非常精美的印刷品中，微软声明当 SMTP 客户端上的“EnableSsl”为真时，客户端需要一个 STARTTLS 会话（[https://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.enablessl(v=vs.110).aspx](https://msdn.microsoft.com/en-us/library/system.net.mail.smtpclient.enablessl(v=vs.110).aspx)）。因此，在将我的端口更新为 2587**并将**SmtpClient 包围在“使用 {}”中之后

因此，工作配置将是：

```
<system.net>
  <mailSettings>
    <smtp deliveryMethod="Network">
      <network host="email-smtp.us-west-2.amazonaws.com" port="2587" enableSsl="true" password="password" />
    </smtp>
  </mailSettings>
</system.net> 
```

一个免责声明是，我仍然不完全了解 AWS 或 .NET SMTP 客户端的真实配置，所以这仍然有点间接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T18:52:22.820

我也在使用 AWS ses 服务

```
 smtp deliveryMethod="Network" from="XXXXXXX@ZXXX.com"
    network enableSsl="true" host="email-smtp.us-east-1.amazonaws.com" userName="******" password="*********" port="25" 
 smtp 
```

希望这对你有用。

# c# - 如何为 WCF 服务生成代理

> ID：14563203
> 
> 赞同：1
> 
> 时间：2013-01-28T13:33:57.153
> 
> 标签：c#, wcf, service, client

我这里有一些遗留代码，其中有一个 WCF 服务。

该服务由客户端通过生成的Proxy.cs 调用

我认为它应该很简单，并想通过使用 svcutil.exe 生成我自己的代理，但我得到了很多不同的错误，这取决于我尝试的内容（使用运行 exe 进行下载、使用程序集、使用 webconfig）。例如，svcutil 告诉我该服务可能不会发布元数据（在我看来这不是真的）。

网络配置有：

```
<serviceMetadata httpGetEnabled="true"/> 
```

它具有多站点绑定

如何生成这样的代理？想要更改合约中的某些内容，然后生成当前版本的代理。

目前我没有服务参考，因为它在添加一个 svcutil 时会出现一些错误。

有任何想法吗？

-edit- 服务通过自托管服务发布，与 msdn 中 WCF 示例中的服务非常相似。有多个服务的端点，它们在 dll 中实现。

-edit 2- 这是自助托管服务的 app.config 我已经替换了一些名称，只是为了让它不那么特别。

```
<?xml version="1.0"?>
<configuration>
  <connectionStrings>
    <add name="PersonDataModelContainer" connectionString="metadata=res://*/PersonDataModel.csdl|res://*/PersonDataModel.ssdl|res://*/PersonDataModel.msl;provider=System.Data.SqlServerCe.3.5;provider connection string=&quot;Data Source=|DataDirectory|\PersonDatabase.sdf&quot;" providerName="System.Data.EntityClient"/>
  </connectionStrings>
  <system.serviceModel>
    <bindings>
      <netMsmqBinding>
        <binding name="TransactionalNoSecurity" durable="true" exactlyOnce="true" maxReceivedMessageSize="2147483647" maxRetryCycles="1" receiveRetryCount="20" retryCycleDelay="00:05:00">
          <security mode="None"></security>
        </binding>
      </netMsmqBinding>

      <basicHttpBinding>

        <binding name="TransportSecurity" openTimeout="00:10:00" closeTimeout="00:10:00" sendTimeout="00:10:00" receiveTimeout="00:10:00">
          <security mode="Transport">
            <transport clientCredentialType="None"></transport>
          </security>
        </binding>
      </basicHttpBinding>

      <ws2007HttpBinding>

        <binding name="NoSecurity" transactionFlow="true" maxReceivedMessageSize="200000" openTimeout="00:10:00" closeTimeout="00:10:00" sendTimeout="00:10:00" receiveTimeout="00:10:00">
          <security mode="None"></security>
        </binding>

        <binding name="UNMessageSecurity" transactionFlow="true" openTimeout="00:10:00" closeTimeout="00:10:00" sendTimeout="00:10:00" receiveTimeout="00:10:00">
          <security mode="Message">
            <message clientCredentialType="UserName" establishSecurityContext="true"/>
          </security>
        </binding>

        <binding name="CertMessageSecurity" transactionFlow="true" openTimeout="00:10:00" closeTimeout="00:10:00" sendTimeout="00:10:00" receiveTimeout="00:10:00">
          <security mode="Message">
            <message clientCredentialType="Certificate" establishSecurityContext="true"/>
          </security>
        </binding>

        <binding name="DomainMessageSecurity" transactionFlow="true" openTimeout="00:10:00" closeTimeout="00:10:00" sendTimeout="00:10:00" receiveTimeout="00:10:00">
          <security mode="Message">
            <message clientCredentialType="Windows" establishSecurityContext="true"/>
          </security>
        </binding>

        <binding name="RM_NoSecurity" transactionFlow="true" openTimeout="00:10:00" closeTimeout="00:10:00" sendTimeout="00:10:00" receiveTimeout="00:10:00">
          <reliableSession enabled="true" ordered="false"/>
          <security mode="None"></security>
        </binding>
      </ws2007HttpBinding>

      <netTcpBinding>
        <binding name="NoSecurity" transactionFlow="true">
          <security mode="None"></security>
        </binding>

        <binding name="DomainMessageSecurity" transactionFlow="true" openTimeout="00:10:00" closeTimeout="00:10:00" sendTimeout="00:10:00" receiveTimeout="00:10:00">
          <security mode="Message">
            <message clientCredentialType="Windows"/>
          </security>
        </binding>

        <binding name="CertMessageSecurity" transactionFlow="true" openTimeout="00:10:00" closeTimeout="00:10:00" sendTimeout="00:10:00" receiveTimeout="00:10:00">
          <security mode="Message">
            <message clientCredentialType="Certificate"/>
          </security>
        </binding>
      </netTcpBinding>
    </bindings>

    <behaviors>
      <serviceBehaviors>
        <behavior name="SimpleServiceBehavior">
          <serviceMetadata httpGetEnabled="True" policyVersion="Policy15"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>

    <services>

      <service name="MessagePlatform.LoggingService.GeneralLoggingService" behaviorConfiguration="SimpleServiceBehavior">
        <host>
          <baseAddresses>
            <add baseAddress="http://localhost:8080/"/>
          </baseAddresses>
        </host>
        <endpoint address="Logging" binding="basicHttpBinding" name="LoggingService" contract="MessagePlatform.LoggingService.Contracts.ILoggingService"/>

      </service>
      <service name="MessagePlatform.GatewayService.GeneralGatewayService" behaviorConfiguration="SimpleServiceBehavior">
          <host>
            <baseAddresses>
              <add baseAddress="http://localhost:8000/"/>
            </baseAddresses>
          </host>
          <endpoint address="gateway" binding="basicHttpBinding" name="GatewayService" contract="MessagePlatform.GatewayService.Contracts.IGatewayService"/>
          <endpoint address="gateway" binding="basicHttpBinding" name="Db2GatewayService" contract="MessagePlatform.GatewayService.Contracts.IDb2GatewayService"/>
          <endpoint address="gateway" binding="basicHttpBinding" name="Db1GatewayService" contract="MessagePlatform.GatewayService.Contracts.IDb1GatewayService"/>

          <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>

      </service>

    </services>
    <client>
      <endpoint name="LoggingServiceEP" address="http://localhost/Logging" binding="basicHttpBinding" contract="MessagePlatform.LoggingService.ILoggingService">        
      </endpoint>

      <endpoint name="GatewayServiceEP" address="http://localhost/gateway" binding="basicHttpBinding" contract="MessagePlatform.GatewayService.IGatewayService">
      </endpoint>

      <endpoint name="GatewayServiceDb2" address="http://localhost/gateway" binding="basicHttpBinding" contract="MessagePlatform.GatewayService.IDb2GatewayService">
      </endpoint>

      <endpoint name="GatewayServiceDb1" address="http://localhost/gateway" binding="basicHttpBinding" contract="MessagePlatform.GatewayService.IDb1GatewayService">
      </endpoint>

    </client>
  </system.serviceModel>
  <startup>
    <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0,Profile=Client"/>
  </startup>
</configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:57:08.677

您还需要启用 Metadata Exchange Endpoint，以便创建新代理：

```
<service name="MessagePlatform.GatewayService.GeneralGatewayService" behaviorConfiguration="SimpleServiceBehavior">
  <host>
    <baseAddresses>
      <add baseAddress="http://localhost:8000/"/>
    </baseAddresses>
  </host>
  <endpoint address="gateway" binding="basicHttpBinding" name="GatewayService" contract="MessagePlatform.GatewayService.Contracts.IGatewayService"/>
  <endpoint address="gateway" binding="basicHttpBinding" name="Db2GatewayService" contract="MessagePlatform.GatewayService.Contracts.IDb2GatewayService"/>
  <endpoint address="gateway" binding="basicHttpBinding" name="Db1GatewayService" contract="MessagePlatform.GatewayService.Contracts.IDb1GatewayService"/>

  <endpoint address="mex" binding="mexHttpBinding" contract="IMetadataExchange"/>

</service> 
```

并运行

```
svcutil http://localhost:8000/mex 
```

# android - Android：从设备中隐藏音量更改栏？

> ID：14563208
> 
> 赞同：8
> 
> 时间：2013-01-28T13:34:15.233
> 
> 标签：android, android-layout, android-audiomanager

有没有办法隐藏音量更改栏/通知（但是你可以称之为..btw。你怎么称呼它？）？

![关于音量变化的屏幕截图](../Images/cdd3f01a98df534dc55778beff402f24.png)

我附上了上面的截图。每次我改变音量时都会显示这个栏（至少在我的 nexus 测试设备上）。或者这是一个特殊的关系？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-28T13:41:54.603

这是默认的蜂窝后音量滑块，当您按下音量增大/减小按钮时会出现。您无法将其隐藏在系统的每个屏幕中，但您可以将其隐藏在您的活动中。将此添加到要隐藏它并手动更改音量的活动中。或者，如果您不想更改音量，则可以在 KeyEvent.KEYCODE_VOLUME_UP / DOWN 的情况下什么也不做。请记住返回 true 表示您消费了该事件。如果您在此处返回 false ，则在您的代码之后触发默认音量行为时，您将获得双重效果。

```
@Override
public boolean onKeyDown(int keyCode, KeyEvent event) {
    switch (event.getKeyCode()) {
        case KeyEvent.KEYCODE_VOLUME_UP:
            manager.adjustStreamVolume(AudioManager.STREAM_MUSIC,
                    AudioManager.ADJUST_RAISE,
                    AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE);
            return true;
        case KeyEvent.KEYCODE_VOLUME_DOWN:
            manager.adjustStreamVolume(AudioManager.STREAM_MUSIC,
                    AudioManager.ADJUST_LOWER,
                    AudioManager.FLAG_REMOVE_SOUND_AND_VIBRATE);
            return true;

        default:
            return super.onKeyDown(keyCode, event);
    }
} 
```

AudioManager 管理器在哪里被检索为

```
manager = (AudioManager) context
            .getSystemService(Context.AUDIO_SERVICE); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-04-18T17:48:42.097

用于自定义处理/忽略的 Kotlin 版本：

```
override fun onKeyDown(keyCode: Int, event: KeyEvent?): Boolean {
    return when(event?.keyCode){
        KeyEvent.KEYCODE_VOLUME_DOWN->{
            true //Do what you want or just return here
        }
        KeyEvent.KEYCODE_VOLUME_UP->{
            true//Do what you want or just return here
        }
        else->super.onKeyDown(keyCode, event)
    }
} 
```

# c++ - 使用 valgrind 调查 Glib 内存泄漏

> ID：14563209
> 
> 赞同：1
> 
> 时间：2013-01-28T13:34:19.033
> 
> 标签：c++, glib

我知道在此之前有关于此问题的类似线程，并且在此站点[https://live.gnome.org/Valgrind](https://live.gnome.org/Valgrind)上已进行了解释，我在下面编写了我的简单程序

```
 #include <glib.h>
  #include <glib/gprintf.h>
  #include <iostream>

  int main()
 {
const gchar *signalfound = g_strsignal(1);
std::cout <<  signalfound<< std::endl;
return 0; 
  } 
```

但是当我尝试使用 valgrind 使用此命令检查 G_DEBUG=gc-friendly G_SLICE=always-malloc valgrind --leak-check=full --leak-resolution=high ./g_strsignal

这是结果

```
 ==30274== Memcheck, a memory error detector
   ==30274== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.
   ==30274== Using Valgrind-3.8.1 and LibVEX; rerun with -h for copyright info
   ==30274== Command: ./g_strsignal
   ==30274== Parent PID: 5201
   ==30274== 
   ==30274== 
   ==30274== HEAP SUMMARY:
   ==30274==     in use at exit: 14,746 bytes in 18 blocks
   ==30274==   total heap usage: 24 allocs, 6 frees, 23,503 bytes allocated
   ==30274== 
   ==30274== LEAK SUMMARY:
   ==30274==    definitely lost: 0 bytes in 0 blocks
   ==30274==    indirectly lost: 0 bytes in 0 blocks
   ==30274==      possibly lost: 0 bytes in 0 blocks
   ==30274==    still reachable: 14,746 bytes in 18 blocks
   ==30274==         suppressed: 0 bytes in 0 blocks
   ==30274== Reachable blocks (those to which a pointer was found) are not shown.
   ==30274== To see them, rerun with: --leak-check=full --show-reachable=yes
   ==30274== 
   ==30274== For counts of detected and suppressed errors, rerun with: -v
   ==30274== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0) 
```

我注意到 valgrind 所说的“未显示可到达的块（找到指针的块）。”。然后我尝试检查相应函数的 gmem.c 源代码，因为我使用了 glib-2.35.4 版本。我发现以下代码

```
 gpointer
   g_malloc (gsize n_bytes)
   {
      if (G_LIKELY (n_bytes))
         {
              gpointer mem;

               mem = glib_mem_vtable.malloc (n_bytes);
               TRACE (GLIB_MEM_ALLOC((void*) mem, (unsigned int) n_bytes, 0, 0));
               if (mem)
              return mem;

               g_error ("%s: failed to allocate %"G_GSIZE_FORMAT" bytes",
                G_STRLOC, n_bytes);
           }

       TRACE(GLIB_MEM_ALLOC((void*) NULL, (int) n_bytes, 0, 0));

   return NULL;
  } 
```

我的问题是

1.  这仍然是 valgrind 所说的“未显示可到达块（找到指针的块）的正常情况。”，我认为这个语句是指上面的 g_malloc 函数，其中返回 mem 一个 gpointer 变量？

2.  如果没有，是否有任何替代方案可以解决，“仍然可达：18 个块中的 14,746 个字节”关于 valgrind 上面所说的内容？

我正在运行 x86 fedora 18 谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:44:32.257

它很可能是指函数返回的动态分配的内存`g_strsignal()`。
valgrind 说*"Reachable blocks...."*，因为有效的指针（`signalfound`）仍然指向动态分配的内存。
如果 Valgrind 发现指向动态内存的指针丢失（*被覆盖*），那么它会报告*“确定的泄漏......”*，因为它可以肯定地说永远无法释放动态内存块。在您的情况下，指针仍然指向块 valgrind 不会假设它丢失了，但它假设它可能是设计使然。

# vb.net - 在 VB.net 中添加两个不同的日期，而不使用“现在”

> ID：14563213
> 
> 赞同：1
> 
> 时间：2013-01-28T13:34:40.977
> 
> 标签：vb.net, datetime

我一直在这里和其他网站上查看一堆不同的帖子，将两个日期加在一起，但出于某种原因，每个人都想使用“现在”

我想知道如何将两个不同的日期加在一起，而这两个日期都不是现在！

我已经尝试了一些事情，但我遇到了铸造错误。另外值得注意的是，我将其设置为我页面上 dateTime 选择器的值。

```
MaxDate.Value = MinDate.Value + TimeSpan.FromDays(1)
'does not work 
MaxDate.Value = Now + TimeSpan.FromDays(1)
'does work! 
```

如果不是很明显，我的页面上有两个日期选择器，当单击单选按钮时，我想将“结束日期”（maxdate.value）设置为“开始日期”（mindate.value）是什么，并且加一天。

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T13:36:46.497

只需这样做：

```
MaxDate.Value = MidDate.Value.AddDays(1) 
```

您不需要为此创建`TimeSpan`对象，因为该`Date`类型具有按天、月、年、分钟等进行增量的内置方法。

该`AddDays`方法不会改变原始日期，它只是返回一个`Date`带有偏移值的新对象。

顺便说一句，如果你想减去一天，没有`MinusDays`办法，就去做吧`x.AddDays(-1)`。

# android - 啊! JSoup 崩溃

> ID：14563216
> 
> 赞同：0
> 
> 时间：2013-01-28T13:34:51.610
> 
> 标签：android, dom, jsoup

我想在我的问题前先道歉 - 这将使它成为一个两部分的问题....双重道歉。我正在为 JSoup （再次）第一次道歉，因为我反复询问并且学习还不够好 - 所以任何人都可以建议阅读一些超出通常搜索的内容，以帮助我了解如何在每次尝试时破译 DOM？

如果您仍然愿意提供帮助，这一次，在返回的文档中，我有：

```
 <a href="/logitech-logitech-wireless-keyboard-k270-with-long-range-wireless-920-003051/info"><span id="priceProductQA1" class="productPrice">&#36;29.99</span></a> 
```

我想获取href和价格“29.99”。我试过了

```
 doc = Jsoup.connect(srchStr).get();
    for (Element choices : doc.select("a:has(.productPrice)")){
      absHref = choices.attr("abs:href"); 
      String pricetxt = choices.text(); 
```

以及其他大约 10 种无济于事的方法。对我有更好的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:12:59.250

这是另一个解决方案：

```
for( Element element : doc.select("span.productPrice") ) // Select all 'span' tags with a 'productPrice' class and iterate over them
{
    final String price = element.text(); // save the price (= text of element)
    final String link = element.parent().absUrl("href"); // Get the 'a' tag (= parent of 'span' tag) and its absolute (!) URL

    // ... 
} 
```

**解释：**

1.  选择`span`标签，因为您可以轻松决定它是否是您需要的（有课程，而`a`没有课程）
2.  从 1 开始迭代每个元素。
3.  获取元素的价格
4.  选择标签的父`span`标签，因为它包含所需的 url
5.  选择*绝对*网址；如果您想要相对的，请`attr("href")`改用

顺便提一句。如果您 100% 确定该网站上只有一个这样的元素，您可以将*for* -Loop替换为`Element element = doc.select("span.productPrice").first();`，然后是另外两行代码。

# .net - 如何在 appSetting 中添加描述？

> ID：14563217
> 
> 赞同：1
> 
> 时间：2013-01-28T13:34:57.697
> 
> 标签：.net, app-config

我想为 app.config 文件开发配置编辑器。这就是为什么我需要在每条记录中都有描述字段。是否可以向配置部分 appSettings 添加其他字段？例如：

```
<appSettings>
    <add key="Provider" description ="Data Provider Name" value="SqlServer"/>
... 
```

当我这样做时，应用程序会在此处捕获异常

```
System.Configuration.AppSettingsReader configurationAppSettings = new System.Configuration.AppSettingsReader(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:16:52.240

您是否尝试过查看 ConfigurationSection？你可能想在 msdn 中查看这篇文章。使用 ConfigurationSection [http://msdn.microsoft.com/en-us/library/2tw134k3(v=vs.100).aspx创建自定义配置部分](http://msdn.microsoft.com/en-us/library/2tw134k3(v=vs.100).aspx)

# jax-rs - Jaxrs 多部分

> ID：14563219
> 
> 赞同：10
> 
> 时间：2013-01-28T13:35:02.470
> 
> 标签：jax-rs, multipartform-data

我正在尝试向媒体类型设置为的 jaxrs 服务执行请求`multipart/form-data`。此请求包含实体列表（xml）和图像（png，二进制）。我已经按照BalusC在[此](https://stackoverflow.com/questions/2793150)线程中的描述创建了请求。

在wireshark中检查后请求似乎没问题，除了ip头校验和错误。（说“可能是由IP校验和卸载引起的”。）

我的大问题是如何在服务端处理多部分请求。我不希望包含来自 apache.cxf、resteasy 或类似的任何库。我只想依赖 jaxrs api。

请求中的两部分具有名称`deliveries`和`signature`，其中签名是以二进制形式发送的 png 图像文件。交付列表应从 xml 解析（实体具有`xmlrootelement`注释等，因此这部分单独工作）。我尝试过用这种方式阅读不同的部分，但这确实是一个远景；

```
@PUT
@Path("signOff")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public void signOffDeliveries(@FormParam("deliveries") List<Delivery> deliveries, @FormParam("signature")File signature) {
    //do something with the signature(image) and the list of deliveries.
} 
```

这当然不起作用，如果我在 Websphere 上运行请求，它会给我一个 404 http 状态代码，当我向嵌入式 openejb（在我们的集成测试框架中）运行请求时，它会给我一个 415。如果我删除`FormParam`注释，则请求成功。

如何仅使用 jaxrs api 读取多部分请求的不同部分？

**编辑** 好的，所以我把`PUT`to`POST`和添加`@Encoding`注释到参数中，如下所示：

```
@POST
@Path("signOff")
@Consumes(MediaType.MULTIPART_FORM_DATA)
public void signOffDeliveries(
    @Encoded @FormParam("deliveries") String deliveries,
    @Encoded @FormParam("signature") File signature) {

} 
```

现在我将 xml 作为文本字符串获取，但我无法自动将其解组为交付列表，即使`Content-Type`这部分有效负载的 设置为`application/xml`. 另一个问题是我收到的文件长度==0，我无法从中读取任何字节。

我在这里错过了一个要点吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-06T08:46:38.423

事实上，我发现很难理解为什么 JAX-RS 规范没有标准化对此的支持（我刚刚创建了[https://java.net/jira/browse/JAX_RS_SPEC-413](https://java.net/jira/browse/JAX_RS_SPEC-413)来解决这个问题）。

然而，仍然可以以独立于实现的方式支持多部分形式。要么为 MultiPart 表单编写自己的 MessageBodyReader，要么使用像 Apache Clerezza jaxrs.utils 这样的库，它提供了一个 MultiPartBody 对象，对应的 MessageBodyReader。该库没有实现规范依赖，因此您的应用程序将在任何 jax-rs 实现上运行。

有关如何使用 Clerezza jaxrs.utils 的示例，请参见[http://svn.apache.org/viewvc/stanbol/trunk/development/archetypes/stateless-webmodule/src/main/resources/archetype-resources/src中的第 105 行/main/java/MultiEnhancer.java?revision=1465777&view=markup](http://svn.apache.org/viewvc/stanbol/trunk/development/archetypes/stateless-webmodule/src/main/resources/archetype-resources/src/main/java/MultiEnhancer.java?revision=1465777&view=markup)。如果您不使用 OSGi（使用白板注册资源），则必须将 org.apache.clerezza.jaxrs.utils.form.MultiPartFormMessageBodyReader 添加到您的应用程序中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-09T17:56:30.603

我已经在 Glassfish 4 中实现了这一点，而没有与 Jersey 耦合。[@详情见此贴](https://stackoverflow.com/questions/20456243/how-can-i-define-a-jax-rs-service-that-processes-multi-part-data-in-jee)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-28T15:21:30.413

> 我不希望包含来自 apache.cxf、resteasy 或类似的任何库。我只想依赖 jaxrs api

您不能“依赖”API，因为它只包含接口。实现该接口的类来自 RESTeasy、Jersey 或 CXF。

> 当我向嵌入式 openejb 运行请求时出现 415

415 表示“方法不支持”，当您将 GET 请求发送到预期 PUT 的资源时会发生这种情况。

在这种情况下，我建议使用 POST 而不是 PUT。在您的特定情况下，我怀疑这`@FormParam`不适合与 PUT 一起使用。

# heroku - 如何将行从 Heroku 上的一个 postgreSQL 9.1.5 数据库传输到另一个（也在 Heroku 上）

> ID：14563220
> 
> 赞同：0
> 
> 时间：2013-01-28T13:35:03.797
> 
> 标签：heroku, postgresql-9.1

我有两个在 Heroku 上运行的 Rails 应用程序，每个都有自己的 PostgreSQL 9.1.5 数据库（我可以访问 Amazon 端点）

两个应用程序都运行相同的代码库，因此它们使用相同的模式集初始化两个数据库。但是应用程序 1 只使用表 A、B 和 C，而应用程序 2 只使用表 D 和 E。（例如，应用程序 1 的数据库的表 D 和 E 为空）现在，我需要移动/复制所有数据（表 D 和 E ) 从 App 2 的数据库到 App 1 的数据库（然后重新配置 App 2 以从现在开始使用 App 1 的数据库）。

如果我只是在 App 2 的数据库上使用 pg_dump 并在 App 1 的数据库上恢复它，我相信它会删除现有的表 A、B 和 C 行。还是我可以设置任何标志/选项以保留现有数据？或者我应该研究什么其他方法？

谢谢！

PS这篇文章建议使用pg_dump或数据库链接，但是在阅读了这些页面之后，我仍然不确定我知道如何使用它们，这样我现有的数据就不会被擦除/覆盖

[如何在postgresql中将数据从一个数据库复制到另一个数据库？](https://stackoverflow.com/questions/6016065/how-to-copy-data-from-one-database-to-another-database-in-postgresql)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T19:09:00.843

我会分叉你的数据库。 [https://devcenter.heroku.com/articles/heroku-postgres-fork](https://devcenter.heroku.com/articles/heroku-postgres-fork)

1.  创建数据库的备份
2.  分叉数据库
3.  将 App2 连接到您的第二个数据库
4.  验证 app1 和 app2 是否正在工作查找（而不是写入彼此的表）
5.  从新的（app2）数据库中删除列 ABC
6.  从原始（app1）数据库中删除列 DE

# java - 有什么区别

> ID：14563229
> 
> 赞同：0
> 
> 时间：2013-01-28T13:35:34.317
> 
> 标签：java, jakarta-ee, struts, struts-1, struts-tags

我想知道这些语句在 Struts 1.x 版本中的区别..

```
<%@taglib uri="/WEB-INF/struts-bean.tld" prefix="bean"%> and

<%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %> 
```

解释内部发生的事情

提前致谢...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:42:43.100

基本上是[File URI Scheme](http://en.wikipedia.org/wiki/File_URI_scheme)和其他一个[URI Scheme](http://en.wikipedia.org/wiki/URI_scheme)。

它们基本上用于解析标签值 [http://www.w3.org/DesignIssues/HTTP-URI2.html](http://www.w3.org/DesignIssues/HTTP-URI2.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T05:25:49.113

```
<%@taglib uri="/WEB-INF/struts-bean.tld" prefix="bean"%> 
```

这给出了 .tld 文件的绝对路径。在这种情况下，它位于 /WEB-INF/struts-bean.tld 内

```
<%@ taglib uri="http://struts.apache.org/tags-bean" prefix="bean" %> 
```

这不涉及绝对路径。如果使用这种类型的 uri，需要在 web.xml 中指定该 uri 的 .tld 文件所在的位置。

```
<taglib>
  <taglib-uri>
    http://struts.apache.org/tags-bean
  </taglib-uri>
  <taglib-location>
    /struts-bean.tld
  </taglib-location>
</taglib> 
```

# php - PHP 与 javascript 代码，实时时钟

> ID：14563234
> 
> 赞同：1
> 
> 时间：2013-01-28T13:35:48.340
> 
> 标签：php, javascript

嘿，我会创建一个实时时钟将其放在我的网站上。因此，我为此编写了一个带有 JavaScript 代码的简单 php，如下所示：

```
<?php
    Function d1() {  
        $time1 = Time();  
        $date1 = date("h:i:s A",$time1);  
        echo $date1;  
    }
?>  

<script type="text/javascript">   
    window.onload = startInterval;  
    function startInterval() {  
        setInterval("startTime();",1000);  
    }
    function startTime() {  
        document.getElementById('qwe').innerHTML = '<?php d1();?>';  
    }  
</script>  

<div id="qwe">test</div> 
```

运行此代码时，输​​出类似于每秒刷新一次`"2:40:17 PM"`，但问题是时间从未改变。`div`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T13:56:04.973

从 PHP 获取您想要开始时钟的初始时间：

```
<script>
    var now = new Date(<?php echo time() * 1000 ?>);
    function startInterval(){  
        setInterval('updateTime();', 1000);  
    }
    startInterval();//start it right away
    function updateTime(){
        var nowMS = now.getTime();
        nowMS += 1000;
        now.setTime(nowMS);
        var clock = document.getElementById('qwe');
        if(clock){
            clock.innerHTML = now.toTimeString();//adjust to suit
        }
    } 
</script> 
```

对于格式化日期，有无数个选项（MDN 日期 API：[https](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date) ://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date ）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-31T10:18:24.437

```
 <script type="text/javascript">
 function timedMsg()
  {
    var t=setInterval("change_time();",1000);
  }
 function change_time()
 {
   var d = new Date();
   var curr_hour = d.getHours();
   var curr_min = d.getMinutes();
   var curr_sec = d.getSeconds();
   if(curr_hour > 12)
     curr_hour = curr_hour - 12;
   document.getElementById('Hour').innerHTML =curr_hour+':';
    document.getElementById('Minut').innerHTML=curr_min+':';
    document.getElementById('Second').innerHTML=curr_sec;
 }
timedMsg();   
</script>

 <table>
   <tr>
  <td>Current time is :</td>

  <td id="Hour" style="color:green;font-size:large;"></td>
  <td id="Minut" style="color:green;font-size:x-large;"></td>
  <td id="Second" style="color:red;font-size:xx-large;"></td>
  <tr>
 </table> 
```

用这种方式显示时间............享受上面的脚本

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T14:39:14.713

可以使用ajax来刷新时间：

例子：

```
<?php
if(@$_GET["action"]=="getTime"){
  $time1 = Time();  
  $date1 = date("h:i:s A",$time1);  
  echo $date1; // time output for ajax request
  die();  
}
?>

<div id="qwe">test</div>

<script type="text/javascript">   
  window.onload = startInterval;  
  function startInterval() {  
    setInterval("startTime();",1000);  
  }
  function startTime() {
    AX = new ajaxObject("?action=getTime", showTime)
    AX.update(); // start Ajax Request   
  } 
  // CallBack 
  function showTime( data ){
    document.getElementById('qwe').innerHTML = data;
  }  
</script>  

<script type="text/javascript">
// Ajax Object - Constructor
function ajaxObject(url, callbackFunction) {
  var that=this;
  this.updating = false;
  this.abort = function() {
    if (that.updating) {
      that.updating=false;
      that.AJAX.abort();
      that.AJAX=null;
    }
  };
  this.update =
  function(passData,postMethod) {
    if (that.updating) { return false; }
    that.AJAX = null;
    if (window.XMLHttpRequest) {
      that.AJAX=new XMLHttpRequest();
    }else{
      that.AJAX=new ActiveXObject("Microsoft.XMLHTTP");
    }
    if (that.AJAX==null) {
      return false;
    }else{
      that.AJAX.onreadystatechange = function() {
        if (that.AJAX.readyState==4) {
          that.updating=false;
          that.callback( that.AJAX.responseText, that.AJAX.status, that.AJAX.responseXML, that.AJAX.getAllResponseHeaders() );
          that.AJAX=null;
        }
      };
      that.updating = new Date();
      if (/post/i.test(postMethod)) {
        var uri=urlCall+(/\?/i.test(urlCall)?'&':'?')+'timestamp='+that.updating.getTime();
        that.AJAX.open("POST", uri, true);
        that.AJAX.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
        that.AJAX.setRequestHeader("Content-Length", passData.length);
        that.AJAX.send(passData);
      }else{
        var uri=urlCall+(/\?/i.test(urlCall)?'&':'?')+passData+'&timestamp='+(that.updating.getTime());
        that.AJAX.open("GET", uri, true);
        that.AJAX.send(null);
      }
      return true;
    }
  };
  var urlCall = url;
  this.callback = callbackFunction || function (){};
}
</script> 
```

# asp.net - 在 ASP.NET 环境中使用计划任务进行数据预取

> ID：14563236
> 
> 赞同：0
> 
> 时间：2013-01-28T13:35:51.743
> 
> 标签：asp.net, .net, scheduling, filesystemwatcher, quartz.net

我们正在开发一个从 WCF 服务检索数据的 ASP.Net 应用程序。

用户界面（使用 JQM 和 ASP.NET 开发）在处理请求并且数据在服务器端分页时显示一个加载面板，因此我们的 db 仅返回每个请求的前 n 条记录。

在这种情况下，用户执行搜索，直到他浏览页面，我们希望预取接下来 n 个页面的结果以存储在 RAM 缓存对象中以避免延迟。

为此，我们使用quartz.net 创建了一个计划进程，每3 秒触发一次，它检查FIFO 队列以请求后续页面的数据。Scheduled JOB 配置为允许quartz.net 执行并发执行，quartz.net 设置为最多使用10 个线程。

在您看来，这是一个好方法吗？

可能是哪些问题？

密集使用作业（每 3 秒触发一次）和最终线程会导致应用程序不稳定吗？

基于 FileSystemWatcher 触发器的解决方案会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T21:27:46.410

我假设您无法避免用户第一次搜索时的延迟。在这种情况下，您可以发出 ajax 请求来缓存后续请求的数据。

如果您使用的是经典的 asp.net，则此链接讨论在 asp.net [http://weblogs.asp.net/craigshoemaker/archive/2008/11/07/using-jquery-to-call-asp-net中进行 ajax 调用-ajax-page-methods-by-example.aspx](http://weblogs.asp.net/craigshoemaker/archive/2008/11/07/using-jquery-to-call-asp-net-ajax-page-methods-by-example.aspx)

如果您决定使用石英，那么您需要将其嵌入到 asp.net 应用程序中，这是一个开销。

# android - AdMob 展示位置

> ID：14563237
> 
> 赞同：1
> 
> 时间：2013-01-28T13:35:53.890
> 
> 标签：android, android-layout, admob

在[http://support.google.com/admob/bin/answer.py?hl=en&answer=1307237](http://support.google.com/admob/bin/answer.py?hl=en&answer=1307237)上，它声明了以下内容：

> 广告不应放置在非常靠近按钮或用户在与您的应用程序交互时可能不小心点击的任何其他对象的下方或下方。

但它不建议在可点击对象之间放置一段距离，而且我听说过谷歌如何在没有警告的情况下关闭帐户的故事，所以我不想冒任何风险。

有人知道您应该使用多远的距离以确保安全？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:46:12.193

正如您自己发现的那样，没有真正严格的指导方针。基本上，他们想要阻止的只是你在横幅顶部放置小按钮，或者在按钮顶部弹出横幅，希望人们在意外时点击它们。

如果您想确定并遵循指南，您可以留出 8dp 的边距，因为这是 Google 用作所有 UI 元素之间的空间的经验法则； [http://developer.android.com/design/style/metrics-grids.html](http://developer.android.com/design/style/metrics-grids.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-21T06:46:54.250

> 意外点击不是真正的点击，谷歌遵循一些规则来避免这种点击。谷歌没有指定与可点击按钮的固定距离。使用我们自己的逻辑来避免意外点击。

## **意外点击引起的问题。**

*   如果 Google 发现来自 Ad_ID 的意外点击，他们会发出警告邮件。我们可以纠正这个问题。
*   如果同一违规行为在短时间内多次（大多数情况下为 3 次）来自同一个 Ad_ID，则禁用该 Ad_Id。
*   如果多个 Ad_Id（通常超过 3 个禁用）在短时间内禁用您的帐户将被 Google 终止。
*   一旦帐户终止发生，您将无能为力（它消失了）

## **哪个点击属于意外点击。**

*   一些开发者将 ad_view 设置得非常靠近按钮和其他可点击的应用程序点，以增加广告收入。
*   来自同一设备或同一地区的点击很可能不是意外点击，而是无效点击。所以你的对手开发者不能正常禁用 Ad_Id。

# iphone - Master-Detail - 不同的单元格到不同的 UiTablevIewControllers

> ID：14563241
> 
> 赞同：1
> 
> 时间：2013-01-28T13:35:58.810
> 
> 标签：iphone, ios, uitableview, master-detail

我在将不同的 tableViewCells 连接到不同的 UiTableViewControllers 时遇到问题。第一个 cellrow 连接到正确的 TableViewController 但之后无法再进一步，因为我真的不知道如何在这里设置“else if”语句。

提前致谢！

请参阅 .m(master)：

```
#import "GuideTableViewController.h"
#import "GuideDetailTableViewController.h"
#import "GuideDetailTableViewController2.h"
#import "GuideDetailTableViewController3.h"
#import <QuartzCore/QuartzCore.h>

@interface GuideTableViewController (){
    NSArray *guide;
    NSMutableData *weatherResponseData;

}
@property (weak, nonatomic) IBOutlet UITableView *tableView;

@property (weak, nonatomic) IBOutlet UIImageView *imgHeader;

@property (weak, nonatomic) IBOutlet UIImageView *ImgTitle;

@property (weak, nonatomic) IBOutlet UIImageView *ImgWeather;

@property (weak, nonatomic) IBOutlet UIButton *btnMap;

@property (weak, nonatomic) IBOutlet UILabel *LabelWeather;

@end

@implementation GuideTableViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

//JSON method
- (void) loadJSON{
    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
        //code
        NSData *data = [NSData dataWithContentsOfURL:[NSURL   URLWithString:@"https://dl.dropbox.com/u/100670549/test.json"]];

        NSError *error;

        if (data)
        {

            guide = [NSJSONSerialization JSONObjectWithData:data options:0 error:&error];

            for (NSDictionary *dictionary in guide){
                //NSLog([dictionary description]);
            }

        }else
        {
            NSLog(@"Could not load data");
        }

            dispatch_sync(dispatch_get_main_queue(), ^{
                // code
                [self.tableView reloadData];
            });

    });

    }

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.

    //Call json

    [self loadJSON];

    [self loadWeather];

    //set background
    self.view.backgroundColor = [UIColor colorWithPatternImage:[UIImage    imageNamed:@"background.jpg"]];

    //rounded corners

    [self.tableView.layer setCornerRadius:9.0];

    [self.ImgWeather.layer setCornerRadius:9.0];

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

//TableView
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return 3;
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath     *)indexPath{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];

    NSDictionary *dict = [guide objectAtIndex:indexPath.row];
    cell.textLabel.text = [dict valueForKey:@"title"];

    return cell;
}

//To detailView

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender{

    if ([segue.identifier isEqualToString:@"showStay"]){
        GuideDetailTableViewController *tvc = [segue destinationViewController];
        NSIndexPath *index = sender;
        NSDictionary *dict = [guide objectAtIndex:index.row];

        tvc.stay = dict;

    }
    else if([segue.identifier isEqualToString:@"showEat"]){
        GuideDetailTableViewController2 *tvc = [segue destinationViewController];
        NSIndexPath *index = sender;
        NSDictionary *dict = [guide objectAtIndex:index.row];

        tvc.eat = dict;
    }
    else if([segue.identifier isEqualToString:@"showDo"]){
        GuideDetailTableViewController3 *tvc = [segue destinationViewController];
        NSIndexPath *index = sender;
        NSDictionary *dict = [guide objectAtIndex:index.row];

        tvc.todo = dict;
    }

}

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath    *)indexPath{

    [self performSegueWithIdentifier:@"showStay" sender:indexPath];

}

- (void) viewWillAppear:(BOOL)animated{
    UITableViewCell *cell = [self.tableView     cellForRowAtIndexPath:self.tableView.indexPathForSelectedRow];

    //ta bort markeringen när man går tillbaka till master från detailView.
    [cell setSelected:NO];

    //Hide navbar
    [self.navigationController setNavigationBarHidden:YES];
}

//Show navbar in detailView
-(void)viewWillDisappear:(BOOL)animated{
    [self.navigationController setNavigationBarHidden:NO];   
}

@end 
```

# active-directory - Kerberos 凭证委派

> ID：14563244
> 
> 赞同：2
> 
> 时间：2013-01-28T13:36:12.493
> 
> 标签：active-directory, kerberos, jgss

我正在尝试在 Active Directory 客户端和服务上使用 GSS API 的示例凭据委派程序。在使用`context.requestCredDeleg(true)`时，当我检查时`context.getCredDelegState()`，它会在上下文建立之前在客户端返回 true。但是在上下文建立之后，当我检查中间服务器端的凭证委托状态时，它返回 false。

我为用户设置了“信任此用户以委托任何服务（仅限 Kerberos）”。此外，在 Active Directory 管理中心用户属性中未选中“帐户敏感且无法委派”字段。服务用户属性也同样如此。我在属于 kerberos 域的同一台计算机上同时运行客户端和服务器，对于该计算机属性，Active Directory 管理中心也允许委派。

我使用以下作为参考：客户端-服务器程序源：[http ://docs.oracle.com/javase/1.4.2/docs/guide/security/jgss/tutorials/BasicClientServer.html](http://docs.oracle.com/javase/1.4.2/docs/guide/security/jgss/tutorials/BasicClientServer.html)

凭证委托文档：[http ://docs.oracle.com/javase/1.4.2/docs/guide/security/jgss/tutorials/MoreToDo.html#DelCr](http://docs.oracle.com/javase/1.4.2/docs/guide/security/jgss/tutorials/MoreToDo.html#DelCr)

示例客户端-服务器工作正常，只是我无法进行凭据委派。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:26:26.227

我找到了解决方案（希望它能帮助面临同样问题的人）：

> 在 krb5.ini 文件中，forwardable = true 应该在 [libdefaults] 部分而不是 [appdefaults] 中设置。

# java - HDFS 文件校验和

> ID：14563245
> 
> 赞同：8
> 
> 时间：2013-01-28T13:36:16.203
> 
> 标签：java, hadoop, mapreduce, hdfs, checksum

我正在尝试使用 Hadoop API - DFSCleint.getFileChecksum() 复制到 HDFS 后检查文件的一致性。

我得到上述代码的以下输出：

```
Null
HDFS : null
Local : null 
```

谁能指出错误或错误？这是代码：

```
import java.io.IOException;

import org.apache.hadoop.conf.Configuration;
import org.apache.hadoop.fs.FileChecksum;
import org.apache.hadoop.fs.FileSystem;
import org.apache.hadoop.fs.LocalFileSystem;
import org.apache.hadoop.fs.Path;

public class fileCheckSum {

    /**
     * @param args
     * @throws IOException 
     */
    public static void main(String[] args) throws IOException {
        // TODO Auto-generated method stub

        Configuration conf = new Configuration();

         FileSystem hadoopFS = FileSystem.get(conf);
    //  Path hdfsPath = new Path("/derby.log");

        LocalFileSystem localFS = LocalFileSystem.getLocal(conf);
    //      Path localPath = new Path("file:///home/ubuntu/derby.log");

    //  System.out.println("HDFS PATH : "+hdfsPath.getName());
    //      System.out.println("Local PATH : "+localPath.getName());

        FileChecksum hdfsChecksum = hadoopFS.getFileChecksum(new Path("/derby.log"));
        FileChecksum localChecksum = localFS.getFileChecksum(new Path("file:///home/ubuntu/derby.log"));

        if(null!=hdfsChecksum || null!=localChecksum){
            System.out.println("HDFS Checksum : "+hdfsChecksum.toString()+"\t"+hdfsChecksum.getLength());
            System.out.println("Local Checksum : "+localChecksum.toString()+"\t"+localChecksum.getLength());

            if(hdfsChecksum.toString().equals(localChecksum.toString())){
                System.out.println("Equal");
            }else{
                System.out.println("UnEqual");

            }
        }else{
            System.out.println("Null");
            System.out.println("HDFS : "+hdfsChecksum);
            System.out.println("Local : "+localChecksum);

        }

    }

} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T14:46:49.363

由于您没有在 上设置远程地址，`conf`并且基本上使用相同的配置，因此`hadoopFS`和`localFS`都指向`LocalFileSystem`.

`getFileChecksum`未实现`LocalFileSystem`并返回 null。不过，它应该可以工作`DistributedFileSystem`，如果您`conf`指向分布式集群，`FileSystem.get(conf)`则应该返回一个实例，`DistributedFileSystem`该实例返回[MD5 of CRC32 checksum of CRC32 checksums](https://issues.apache.org/jira/browse/HADOOP-3981) of size `bytes.per.checksum`。该值取决于块大小和集群范围的配置，`bytes.per.checksum`. 这就是为什么这两个参数也被编码在分布式校验和的返回值中作为算法的名称：MD5-of-xxxMD5-of-yyyCRC32 其中xxx是每个块的CRC校验和数量，yyy是`bytes.per.checksum`参数。

`getFileChecksum`并非旨在跨文件系统进行比较。虽然可以在本地模拟分布式校验和，或者手工制作 map-reduce 作业来计算本地哈希的等价物，但我建议依靠 Hadoop 自己的完整性检查，当文件被写入或从 Hadoop 读取时发生

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-23T11:28:36.297

尝试这个。在此我计算了本地和 HDFS 文件的 MD5，然后比较了两个文件的相等性。希望这可以帮助。

```
public static void compareChecksumForLocalAndHdfsFile(String sourceHdfsFilePath, String sourceLocalFilepath, Map<String, String> hdfsConfigMap)
        throws Exception {
    System.setProperty("HADOOP_USER_NAME", hdfsConfigMap.get(Constants.USERNAME));
    System.setProperty("hadoop.home.dir", "/tmp");
    Configuration hdfsConfig = new Configuration();
    hdfsConfig.set(Constants.USERNAME, hdfsConfigMap.get(Constants.USERNAME));
    hdfsConfig.set("fsURI", hdfsConfigMap.get("fsURI"));
    FileSystem hdfs = FileSystem.get(new URI(hdfsConfigMap.get("fsURI")), hdfsConfig);
    Path inputPath = new Path(hdfsConfigMap.get("fsURI") + "/" + sourceHdfsFilePath);
    InputStream is = hdfs.open(inputPath);
    String localChecksum = getMD5Checksum(new FileInputStream(sourceLocalFilepath));
    String hdfsChecksum = getMD5Checksum(is);
    if (null != hdfsChecksum || null != localChecksum) {
        System.out.println("HDFS Checksum : " + hdfsChecksum.toString() + "\t" + hdfsChecksum.length());
        System.out.println("Local Checksum : " + localChecksum.toString() + "\t" + localChecksum.length());

        if (hdfsChecksum.toString().equals(localChecksum.toString())) {
            System.out.println("Equal");
        } else {
            System.out.println("UnEqual");
        }
    } else {
        System.out.println("Null");
        System.out.println("HDFS : " + hdfsChecksum);
        System.out.println("Local : " + localChecksum);
    }
}

public static byte[] createChecksum(String filename) throws Exception {
    InputStream fis = new FileInputStream(filename);

    byte[] buffer = new byte[1024];
    MessageDigest complete = MessageDigest.getInstance("MD5");
    int numRead;

    do {
        numRead = fis.read(buffer);
        if (numRead > 0) {
            complete.update(buffer, 0, numRead);
        }
    } while (numRead != -1);

    fis.close();
    return complete.digest();
}

// see this How-to for a faster way to convert
// a byte array to a HEX string
public static String getMD5Checksum(String filename) throws Exception {
    byte[] b = createChecksum(filename);
    String result = "";

    for (int i = 0; i < b.length; i++) {
        result += Integer.toString((b[i] & 0xff) + 0x100, 16).substring(1);
    }
    return result;
} 
```

**输出：**

```
HDFS Checksum : d99513cc4f1d9c51679a125702bd27b0    32
Local Checksum : d99513cc4f1d9c51679a125702bd27b0   32
Equal 
```

# regex - 从日志文件中过滤 SIP 消息

> ID：14563253
> 
> 赞同：0
> 
> 时间：2013-01-28T13:36:48.077
> 
> 标签：regex, perl

我将使用 VoIP 解决方案作为日常工作。我经常从我管理的设备中获取 SIP 消息调试。然而，大多数时候，这些日志包含的调用比我需要分析的要多，所以如果我能将它们过滤掉就好了。

我想要一个工具，如果我给它一个日志文件和我需要的 Call-Id，它可以过滤日志文件以仅包含那些 SIP 消息。

不幸的是，SIP 消息不止一行，所以我对 grep 的经验不足以让它工作。

我开始为此在 Perl 中编写一些程序，但除了检查我是否有正确数量的参数之外，我没有得到任何进一步的信息。Perl 是解决这个问题的最佳语言吗？我在这里包含了一部分输入：

```
Jan 28 11:39:37.525 CET: //1393628/D5CC0586A87B/SIP/Msg/ccsipDisplayMsg:
Received: 
SIP/2.0 200 OK
Via: SIP/2.0/UDP 10.218.16.2:5060;branch=z9hG4bKB22001ED5
From: "Frankeerapparaat Secretariaat" <sip:089653717@10.210.2.49>;tag=E7E0EF64-192F
To: <sip:022046187@10.210.2.49>;tag=25079324~19cc0abf-61d9-407f-a138-96eaffee1467-27521338
Date: Mon, 28 Jan 2013 10:39:32 GMT
Call-ID: D5CCA1AE-686D11E2-A881ED01-8DFA6D70@10.218.16.2
CSeq: 102 INVITE
Allow: INVITE, OPTIONS, INFO, BYE, CANCEL, ACK, PRACK, UPDATE, REFER, SUBSCRIBE, NOTIFY
Allow-Events: presence
Supported: replaces
Supported: X-cisco-srtp-fallback
Supported: Geolocation
Session-Expires:  1800;refresher=uas
Require:  timer
P-Preferred-Identity: <sip:022046187@10.210.2.49>
Remote-Party-ID: <sip:022046187@10.210.2.49>;party=called;screen=no;privacy=off
Contact: <sip:022046187@10.210.2.49:5060>
Content-Type: application/sdp
Content-Length: 209

v=0
o=CiscoSystemsCCM-SIP 2000 1 IN IP4 10.210.2.49
s=SIP Call
c=IN IP4 10.210.2.1
t=0 0
m=audio 16844 RTP/AVP 8 101
a=rtpmap:8 PCMA/8000
a=ptime:20
a=rtpmap:101 telephone-event/8000
a=fmtp:101 0-15

Jan 28 11:39:37.529 CET: //1393628/D5CC0586A87B/SIP/Msg/ccsipDisplayMsg:
Sent: 
ACK sip:022046187@10.210.2.49:5060 SIP/2.0
Via: SIP/2.0/UDP 10.218.16.2:5060;branch=z9hG4bKB2247150A
From: "Frankeerapparaat Secretariaat" <sip:089653717@10.210.2.49>;tag=E7E0EF64-192F
To: <sip:022046187@10.210.2.49>;tag=25079324~19cc0abf-61d9-407f-a138-96eaffee1467-27521338
Date: Mon, 28 Jan 2013 10:39:36 GMT
Call-ID: D5CCA1AE-686D11E2-A881ED01-8DFA6D70@10.218.16.2
Max-Forwards: 70
CSeq: 102 ACK
Authorization: Digest username="Genk_AC_1",realm="infraxnet.be",uri="sip:022046187@10.210.2.49:5060",response="9546733290a96d1470cfe29a7500c488",nonce="5V/Jt8FHd5I8uaoahshiaUud8O6UujJJ",algorithm=MD5
Allow-Events: telephone-event
Content-Length: 0

Jan 28 11:39:37.529 CET: //1393627/D5CC0586A87B/SIP/Msg/ccsipDisplayMsg:
Sent: 
SIP/2.0 200 OK
Via: SIP/2.0/UDP 192.168.8.11:5060;branch=z9hG4bK24ecaaaa6dbd3
From: "Frankeerapparaat Secretariaat" <sip:3717@192.168.8.11>;tag=e206cc93-1791-457a-aaac-1541296cf17c-29093746
To: <sip:022046187@192.168.8.28>;tag=E7E0F8A4-EA3
Date: Mon, 28 Jan 2013 10:39:32 GMT
Call-ID: fedc8f80-10615564-45df0-b08a8c0@192.168.8.11
CSeq: 101 INVITE
Allow: INVITE, OPTIONS, BYE, CANCEL, ACK, PRACK, UPDATE, REFER, SUBSCRIBE, NOTIFY, INFO, REGISTER
Allow-Events: telephone-event
Remote-Party-ID: <sip:022046187@192.168.8.28>;party=called;screen=no;privacy=off
Contact: <sip:022046187@192.168.8.28:5060>
Supported: replaces
Supported: sdp-anat
Server: Cisco-SIPGateway/IOS-15.3.1.T
Session-Expires:  1800;refresher=uas
Require: timer
Supported: timer
Content-Type: application/sdp
Content-Disposition: session;handling=required
Content-Length: 247

v=0
o=CiscoSystemsSIP-GW-UserAgent 7276 9141 IN IP4 192.168.8.28
s=SIP Call
c=IN IP4 192.168.8.28
t=0 0
m=audio 30134 RTP/AVP 8 101
c=IN IP4 192.168.8.28
a=rtpmap:8 PCMA/8000
a=rtpmap:101 telephone-event/8000
a=fmtp:101 0-15
a=ptime:20 
```

我设想的程序将采用 2 个或更多参数：日志文件，然后是我感兴趣的任何数量的呼叫 ID。然后它将仅过滤掉相关消息并将其打印到标准输出。

请注意，单个 SIP 消息可能包含一个空行。下一条消息仅在显示新时间戳时才开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:01:35.207

**试试这个**

```
if ($subject =~ m/(?im)(Call-ID: (.+))$/) {
    $result = $2;
} else {
    $result = "";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T03:50:08.600

也许以下内容会有所帮助：

```
use strict;
use warnings;

my %callIDs = map { $_ => 1 } splice @ARGV, 1, @ARGV - 1;
my $recordPrinted;

local $/ = '';

while (<>) {
    if ( /Call-ID:\s+(.+)/ and $callIDs{$1} ) {
        $recordPrinted = 1;
        print;
        next;
    }

    print if $recordPrinted and /\brtpmap\b/;

    $recordPrinted = 0;
} 
```

用法：`perl scriptName.pl logFile callID [callID]`

当您发送脚本参数时，它们以`@ARGV`. 从`splice`1 开始获取（并删除）元素以构建散列的键。第零个元素是日志文件名。

`local $/ = '';`设置段落模式，即一次读取由空行分隔的整个文本块。正则表达式捕获`Call-ID`并且如果该 ID 存在密钥，则打印该行。此外，设置一个标志以指示已打印“记录”，因为该记录可能存在另一个“块”。

如果打印了一条记录并且找到了出现在记录的第二部分 (rtpmap) 中的字段，则打印该块。

# ubuntu - S3Cmd 作为 www-data 失败并以 root 身份工作

> ID：14563254
> 
> 赞同：1
> 
> 时间：2013-01-28T13:36:48.927
> 
> 标签：ubuntu, amazon-s3, s3cmd

我`s3cmd`在 Ubuntu 上以 root 身份运行，它工作正常，没有问题。但是作为 www-data 的用户，我的 cron 使用它失败了，我得到了这个。

> /var/backups/archives/files/file_name_27-01-2013_01:00:27.tar.gz -> s3://yolkmesh/london/archives/files/file_name_27-01-2013_01:00:27.tar.gz [ 1 of 69] 57344 of 73404 78% in 1s 31.58 kB/s failed WARNING: Upload failed: /london/archives/files/file_name_27-01-2013_01:00:27.tar.gz ([Errno 32] Broken pipe) 警告：重试低速（油门=0.00）警告：等待 3 秒...

这会随着越来越长的等待时间而失败。为什么这发生在一个用户而不是另一个用户身上。

如果没有修复，我可以从我的 cron 脚本中以 root 身份运行以下命令吗？

```
s3cmd put --recursive /var/backups/archives/ s3://yolkmesh/london/archives/ 
```

`s3cmd`已是最新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:36:05.170

可能没有为第二个用户配置 s3cmd。您有 www-data 的 .s3cfg 文件吗？如果没有，请以该用户身份运行 s3cmd --configure 以允许 s3cmd 工作。

# google-drive-api - 如何获得用户的权限？

> ID：14563261
> 
> 赞同：1
> 
> 时间：2013-01-28T13:37:06.310
> 
> 标签：google-drive-api

我目前正在从 Documents List API 迁移到 Drive SDK。我有一个功能可以检查用户的文件/文件夹权限（每个电子邮件地址），所以我可以看到某个用户对文件/文件夹拥有什么权限。我想我可以看到为什么电子邮件地址从权限提要中隐藏了，但是对于可以将电子邮件地址用作输入的权限，是否也没有“获取”功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:40:23.880

当前用户的权限在[文件资源](https://developers.google.com/drive/v1/reference/files#resource)中为：

```
"userPermission": {
    "kind": "drive#permission",
    "etag": etag,
    "role": string,
    "additionalRoles": [
      string
    ],
    "type": string
  }, 
```

# ruby-on-rails-3 - 如何使用模型继承编写路由

> ID：14563262
> 
> 赞同：0
> 
> 时间：2013-01-28T13:37:11.600
> 
> 标签：ruby-on-rails-3

我在 app/models/post.rb 中有一个模型

```
class Post < ActiveRecord::Base

end 
```

我在 app/models/post/note.rb 中有另一个模型

```
class Post::Note < Post
  mount_uploader :file, FileUploader 
end 
```

在我的控制器中：

```
def new
  @note = Post::Note.new 
end 
```

我的视图形式是：

```
<%= simple_form_for @post, :validate => true, :html => {:class => 'form-horizontal'} do |form| %>
  <%= form.input :title, :validate => {:presence => true} %>
  <%= form.button :submit %>
<% end %> 
```

#<#:0x007fe3d3fe2b08>的错误是`undefined method`post_notes_path'

我想知道如何编写正确的路由配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:02:10.427

您可以将 url 指定为 的选项`simple_form`，以覆盖它使用的默认路径。因此，如果您的`Post::Note`模型有一个 path helper `note_path`，那么这应该可以工作：

```
<%= simple_form_for @post, :url => note_path, :validate => true, :html => {:class => 'form-horizontal'} do |form| %>
  <%= form.input :title, :validate => {:presence => true} %>
  <%= form.button :submit %>
<% end %> 
```

参考：[您如何处理 SimpleForm 中的单表继承，以便单个助手处理所有模型？](https://stackoverflow.com/questions/10607016/how-do-you-handle-single-table-inheritance-in-simpleform-so-a-single-helper-hand)

# xamarin.android - monodroid 活动 - 启动时的错误活动

> ID：14563263
> 
> 赞同：0
> 
> 时间：2013-01-28T13:37:13.500
> 
> 标签：xamarin.android

我已经开发了一个包含多个活动的 monodroid 应用程序。

有时，首先显示错误的活动，而不是设置了“MainLauncher=true”的活动。

此外，有时我会收到一个对话框，指出“无法确定要运行的活动，因为找不到生成的清单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:02:27.563

我偶尔会在启动时看到错误的活动。

我认为这通常似乎是当我没有更改任何代码并尝试重新启动我的应用程序以进行第二次调试会话时。

我认为在这种情况下会发生什么，Android 试图在我上次离开它的页面/活动上重新启动我的应用程序。当应用程序被普遍使用时也会发生这种情况 - 因此编写代码以便应用程序在这种情况下工作是一种很好的做法（例如，使用保存的实例状态包）

# linux - MMAP 超过 4k 大小失败

> ID：14563264
> 
> 赞同：4
> 
> 时间：2013-01-28T13:37:22.673
> 
> 标签：linux, mmap

这是我的第一篇文章，所以如果有任何错误，请告诉我。

我的目标是让大约 150MB 的数据从 KERNEL 传输到用户空间。[这是因为我正在 OMAP l138 上为 DMA 设备构建驱动程序，以在 DMA DEVICE 和 FPGA 之间传输和接收数据]

1.  现在在 LINUX 内核中，我使用 dma_alloc_coherent 分配 VARIABLE 大小的 BUFFER
2.  然后我将此缓冲区的物理地址传递给用户空间作为用户空间的 OFFSET 参数，用于从用户空间调用 mmap。
3.  然后从用户空间向内核复制和读取数据

此逻辑工作正常，直到缓冲区大小为 4096。高于 4k 时 mmap 失败并返回“MAP_FAILED”

```
static int driver_mmap(struct file *f, struct vm_area_struct *vma)
{

    u32bit ret;
    u32bit size = (vma->vm_end)-(vma->vm_start);

    vma->vm_page_prot = pgprot_noncached(vma->vm_page_prot);

    if (size > (NUM_PAGE*PAGE_SIZE)){
        return(-1);  
    }

    if ((ret = remap_pfn_range(vma,vma->vm_start,
                    (virt_to_phys((void *)krnl_area) >> PAGE_SHIFT),
                    size,vma->vm_page_prot)) < 0)
    {
        return ret;  
    }
    printk("\nDVR:The MMAP returned %x to USER SAPCE \n",ret);
    return 0;  

}

//MMAP STEP 1
dmasrc_ptr = dma_alloc_coherent( NULL ,GLOBAL_BUFFER_SIZE , &dmasrc ,0);
if( !dmasrc_ptr ) {
    printk(KERN_INFO "DMA_ALLOC_FAILED for the source buffer ...\n");
    return -ENOMEM;
}else{
    printk( "\n--->The address of SRC is %x..\n",dmasrc_ptr);       
}

temp_source=dmasrc_ptr;

//MMAP STEP 2
// Round the allocated KERNEL MEMORY to the page bondary   
krnl_area=(int *)((((unsigned long)dmasrc_ptr) + PAGE_SIZE - 1)&PAGE_MASK); 
printk(KERN_CRIT "DVR:The KERNEL VIRTUAL ADDRS is %x..\n",krnl_area);

//MMAP STEP 3
// Marking the PAGES as RESERVED 
for (i = 0; i < (NUM_PAGE * PAGE_SIZE); i+= PAGE_SIZE) {  
    SetPageReserved(virt_to_page(((unsigned long)krnl_area) + i)); 

//Application code part

while(1){

    fflush(stdin);
    fflush(stdout);

    printf("\n\n\n----------------------------------------------------\n");
    printf("USR:Please enter your requirement ");
    printf("\n----------------------------------------------------\n");
    printf("\t1----->GET_UPP_OFFSET\n");
    printf("\t2----->UPP_MMAP_CALL\n");
    printf("\t3----->IOCTL_UPP_WRITE\n");
    printf("\t4----->IOCTL_UPP_READ\n");

    printf("\n");
    scanf("%d",&option);
    printf("\nThe OPTION is %d..\n",option);
    printf("\n");

    switch(option){

    case 1 :
    {
        offset=0;
        ret = ioctl(dev_FD ,IOCTL_UPP_START, &info);
        if (ret < 0) {
            printf("dma buffer info ioctl failed\n");
        }       
        offset = info.var;      
        printf("THE ADDRESS WE GOT IS %X..\n",offset);

    }
    break;

    case 2 :
    {
        printf("THE OFFSET is %X..\n",offset);
        mmap_Ptr= mmap(0,BUFFER_SIZE, PROT_READ|PROT_WRITE, MAP_SHARED, dev_FD, 0);     
        if (mmap_Ptr == MAP_FAILED){
            printf("USR[UPP] :MMAP FAiled \n\n");
            close(dev_FD);
            exit(-1);   
        }
        printf("THE MMAP address is %X..\n",mmap_Ptr);

    }
    break;

    case 3:
    {
        struct upp_struct user_local_struct;

        printf("\n***************************************************\n");
        for (i = 0; i <(1024);i++) {  
            *(mmap_Ptr+i)=test_var;
            printf("WR:%X ",*(mmap_Ptr+i));
            //test_var++; 
        } 
        ioctl(dev_FD , IOCTL_UPP_WRITE ,&user_local_struct);    

        printf("\n***************************************************\n\n\n");
        for(i=0;i<20402;i++){
            //NOP
        }

        //test_var=0x00;
    }
    break;

    case 4:
    {
        struct upp_struct user_local_struct;
        ioctl(dev_FD , IOCTL_UPP_READ,&user_local_struct);

        for(i=0;i<20402;i++){
            //NOP
        }
        printf("\n***************************************************\n");
        for (i = 0; i <(1024);i++) {  
            printf("RD:%X",*(mmap_Ptr+i));  
        }
        printf("\n***************************************************\n\n\n");  
    }
    break;

    default:
    { 
        printf("USR:You have entered an wrong option \n");
        printf("\nUSR:CLosing the FILE ENTERIES ...\n");
        munmap(mmap_Ptr,BUFFER_SIZE);
        free(source_ptr);
        free(dest_ptr);
        close(dev_FD);
        exit(0);
    }
    break;

} //END OF SWITCH LOOP  

} //END OF WHILE LOOP 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-17T04:49:42.530

使用 get_free_pages 分配多个页面，或使用 vmalloc 但您需要在每个页面基础上调用 remap_pfn_range，因为 vmalloc 的物理内存可能在物理上不是连续的。

# jquery - ajax调用后调用动态函数

> ID：14563271
> 
> 赞同：0
> 
> 时间：2013-01-28T13:37:50.210
> 
> 标签：jquery, ajax, dynamic

```
 $('a.action').on('click',function(event){
  event.preventDefault();
  var classes = $(this).attr("class").split(/\s/);
  var action = classes[classes.length -1];
  var url = "/api/" + action + "/" + $(this).attr('href');
  $.ajax({
    type: "POST",
    url: url,
  }).done(function(data){
    //function-name(data);
  });   
}); 
```

上面的代码附加到一个点击事件，在这样的链接上：

```
<a class="action setsize" href="1">Go</a> 
```

我已经使用类名将 URL 设置为通过 ajax 调用，但我还想在调用*done()*之后运行一个函数，以更新我的 html。我希望此函数具有与 ajax 调用相同的名称，因此它需要从“action”变量中获取其名称。

我将如何实现这一目标？动态函数语法对我来说是新的。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:41:41.280

尝试这个：

```
classes[index].callback = function(data){
    // do something
}
...

var action = classes[classes.length -1];
var url = "/api/" + action + "/" + $(this).attr('href');

$.ajax({
    type: "POST",
    url: url,
}).done(function(data){
    action.callback(data);
}); 
```

classes 数组中的每个元素都有一个名为 callback 的方法，该方法在 ajax 完成后调用。

# java - 如何获取 JAVA 类的最后一个列表

> ID：14563272
> 
> 赞同：-1
> 
> 时间：2013-01-28T13:38:00.720
> 
> 标签：java, xml, jaxb, xsd

我正在尝试创建一个具有 ArrayList 的类。例如：

```
public class SubCategory {
    protected String nameOfCategory;
    @XmlElement(required = true)
    protected String link;
    @XmlElementRef
    protected List<SubCategory> supCategory;...
} 
```

如何获取子类别的最后一个列表？我将 JAXB 用于 xml 文件，xsd 文件如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema"
    targetNamespace="http://www.example.org/CategoriesTree" xmlns="http://www.example.org/CategoriesTree"
    elementFormDefault="qualified">

    <xs:element name="Categories">
        <xs:complexType>
            <xs:sequence>
                <xs:element name="mainCategory" type="subCategory" minOccurs="0" maxOccurs="unbounded" />
            </xs:sequence>
        </xs:complexType>
    </xs:element>

    <xs:complexType name="subCategory">
        <xs:sequence>
            <xs:element name="nameOfCategory" type="xs:string"/>
            <xs:element name="link" type="xs:string"/>
            <xs:element name="subCategory" type="subCategory" maxOccurs="unbounded"
                minOccurs="0"/>
        </xs:sequence>
    </xs:complexType>
</xs:schema> 
```

* * *

是的，我有这种方法，但我必须转到树中的最后一个元素，例如：如何获取最后一个元素？

```
<code>
<subCategory>
  <nameOfCategory>Ordnungsmittel / Ablagemittel</nameOfCategory>
  <link>link=Ordnungsmittel / Ablagemittel</link>
  <subCategory>
    <nameOfCategory>Ordnungsmittel / Ablagemittel</nameOfCategory>
    <link>link=Ordnungsmittel / Ablagemittel</link>
    <subCategory>
       <nameOfCategory>Last</nameOfCategory>
        <link>link=Last</link>
    </subCategory>
   </subCategory>
</subCategory>
</code> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T10:03:42.740

好的，我做到了:) 感谢您的回复。

```
public void showTree(List<SubCategory> child){

        for(int i=child.size()-1; i>=0; i--){
            if(!child.get(i).getSupCategory().isEmpty()){
                System.out.println(child.get(i).getNameOfCategory());
                showTree(child.get(i).getSupCategory());
            }
            else{
                System.out.println(child.get(i).getNameOfCategory());
                //child.remove(i);

            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:45:21.250

我不确定你想要完成什么。我从我的一个项目中获取了一个生成的类，并像您在 XSD 中发布的那样定义了一个列表，它将在 Java 类中像这样创建：

```
@XmlElement(required = true)
protected List<Manager> manager;

public List<Manager> getManager() {
    if (manager == null) {
        manager = new ArrayList<Manager>();
    }
    return this.manager;
} 
```

如果你想在列表中添加一些东西，你还必须使用 get 方法来获取引用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:27:02.340

> 如何获取子类别的最后一个列表？

由于您有一`SubCategory`棵树，其中每个节点的类型都相同 (`SubCategory`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T15:27:17.517

没有“最后一个列表”，因为同一级别可以有多个元素！要检索您最后标记的那个，您需要一个递归循环，或者您可以更好地建模它！

# jquery - div 其余部分下方的 Chrome 碰撞 span 元素

> ID：14563273
> 
> 赞同：0
> 
> 时间：2013-01-28T13:38:04.453
> 
> 标签：jquery, html, css, tabs, slider

我有一个 jquery 滑块，其中文本覆盖绝对位于每个选项卡/幻灯片的图像顶部。

一切都在 Firefox 和 IE9 中运行得很好，但在 Chrome 中，文本覆盖在标签滑块下方被撞到了。

IE9/火狐： ![在此处输入图像描述](../Images/27ab8cd11c6bbcacbbabe31729ccc2c5.png)

铬合金： ![在此处输入图像描述](../Images/b8995c60fa6a28e2dac9eecd70638e54.png)

我不知道是什么原因造成的，并且已经研究了很长时间。由于 Chrome 和 Firefox 都是 Webkit 浏览器，因此通常是 IE 给我带来了这样的问题。

所以我的问题是：

**是什么导致 Chrome 在滑块/标签下方碰撞文本覆盖？**

这是我的精简 HTML：

```
<!-- 1st header and pane -->
<img class="tab" src="images/biochem-1.jpg" />
<div style="width:720px; display:block"> 
  <img src="images/biochem-2.jpg"></a>
  <a href="#"><span class="text-overlay transparent">
    <p> Consectetur adipiscing elit. Praesent bibendum eros ac nulla. Integer vel lacus ac neque viverra. </p> 
  </span></a>
</div>

<!-- 2nd header and pane -->
<img class="tab" src="images/particle-1.jpg" />
<div>
  <img src="images/particle-2.jpg" />
  <a href="#"><span class="text-overlay transparent">
    <p> Consectetur adipiscing elit. Praesent bibendum eros ac nulla. Integer vel lacus ac neque viverra. </p>
  </span></a>
</div> 
```

这是我的CSS：

```
 /* transparent bg */
.transparent {
    background: none repeat scroll 0 0 rgba(0, 0, 0, 0.5);
}

/* root element for accordion. decorated with rounded borders and gradient background image */
#accordion {
    background:#fafafa;
    height:250px;
    width:1000px;
    border:1px solid #ddd;
    margin: 0 auto;
    overflow: hidden;
}

/* accordion header */
#accordion img.tab {
    float:left;
    margin-right:0px;
    cursor:pointer;
    opacity:1;
    filter: alpha(opacity=50);
    position: relative;
}

/* currently active header */
#accordion img.current {
    cursor:default;
    opacity:1;
    filter: alpha(opacity=100);
}

/*
  accordion pane. should initially have zero width and display:none.
  the first pane should override these with inline style
  */
#accordion div {
    width:0px;
    float:left;
    display:none;
    margin-right:0px;
    position: relative;
}

/* content inside a pane should have fixed width */
#accordion div img {
    line-height: auto;
    width:720px;
    border: none;
}

#accordion div p {
    color: #FFFFFF;
    font-size: 16px;
    padding-left: 15px;
    padding-right: 15px;
}

.text-overlay {
    height: 250px;
    left: 470px;
    position: absolute;
    width: 250px;
} 
```

这是我的 JS：

```
 $(document).ready(function() {

  $(function() {
  $("#accordion").tabs("#accordion div", {
      tabs: 'img.tab',
      effect: 'horizontal',
      //event: 'mouseover'

      // start from the beginning after the last tab
      rotate: true      
    }).slideshow({autoplay:true});
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:07:25.120

您的文本覆盖还需要最高值：

```
.text-overlay {
    height: 250px;
    top: 0;
    left: 470px;
    position: absolute;
    width: 250px;
} 
```

# javascript - 按计数和值对选择列表进行排序

> ID：14563281
> 
> 赞同：0
> 
> 时间：2013-01-28T13:38:17.760
> 
> 标签：javascript, jquery

我有一个 html 列表

```
<select>
  <option value="w" count="1">w (1)</option>
  <option value="a" count="1">a (1)</option>
  <option value="d" count="5">d (5)</option>
  <option value="r" count="0">r (0)</option>
  <option value="q" count="0">q (0)</option>
  <option value="s" count="0">s (0)</option>
  <option value="b" count="5">b (5)</option>
</select> 
```

我希望列表首先按顺序排列`count`，然后按`value`.

输出：

```
<select>  
  <option value="b" count="5">b (5)</option>
  <option value="d" count="5">d (5)</option>
  <option value="a" count="1">a (1)</option>
  <option value="w" count="1">w (1)</option>
  <option value="q" count="0">q (0)</option>
  <option value="r" count="0">r (0)</option>
  <option value="s" count="0">s (0)</option>
</select> 
```

我知道如何按`count`OR排序，`value`但我没有找到一种简单的方法来组合它们。

按数量排序：

```
select.sort(function (a, b) {
    var c1 = parseInt($(a).attr('count'), 10);
    var c2 = parseInt($(b).attr('count'), 10);
    return c1 < c2 ? 1 : c1 > c2 ? -1 : 0;
}); 
```

并按价值

```
select.sort(function (a, b) {
    return $(a).text().toUpperCase().localeCompare($(b).text());
}); 
```

我正在考虑构建一个对象：

```
var map = {
    5: ['d', 'b'],
    1: ['a', 'w'],
    0: ['r', 'q', 's']
}; 
```

然后对每个键进行排序：

```
function keys(map) {
    var keys = [];
    for (var key in map) {
        if (map.hasOwnProperty(key)) map[key].sort();
    }
    return keys;
}

keys(map);
map; 
```

最后重建`select`列表。

有没有更简单的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:41:15.530

尝试这个：

```
select.sort(function (a, b) {
    var c1 = parseInt($(a).attr('count'), 10);
    var c2 = parseInt($(b).attr('count'), 10);

    if(c1 === c2){ // If the counts are equal, return the comparison for value.
        return $(a).text().toUpperCase().localeCompare($(b).text());
    }
    // Otherwise, compare the counts.
    // (With numbers, you can just substract `b` from `a` in sort functions.)
    return c1 - c2;
}); 
```

删除注释后，这只是 6 行代码。

没有必要将第二个包装`return`在 a 中`else`，因为 sort 函数永远不会评估 an `else`, if `c1 === c2`，因为它`if`包含一个`return`语句。

现在，`sort`函数期望`X<0, X=0 or X>0`返回（`X`输出在哪里），具体取决于是否`a`小于、等于或大于`b`。如果你减去`b`，`a`你会得到你需要的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:41:20.457

为什么不把这两个功能组合成一个这样的：

```
select.sort(function (a, b) {
    var c1 = parseInt($(a).attr('count'), 10);
    var c2 = parseInt($(b).attr('count'), 10);

    if ( c1 == c2 ) {
      return $(a).text().toUpperCase().localeCompare($(b).text());
    } else {
      return c1 < c2 ? 1 : -1;
    }
}); 
```

# eclipse - Equinox p2 存储库镜像：如何仅镜像特定功能？

> ID：14563283
> 
> 赞同：1
> 
> 时间：2013-01-28T13:38:33.303
> 
> 标签：eclipse, p2

页面[http://wiki.eclipse.org/Equinox_p2_Repository_Mirroring](http://wiki.eclipse.org/Equinox_p2_Repository_Mirroring) 描述了如何使用 org.eclipse.equinox.p2.metadata.repository.mirrorApplication 和 org.eclipse.equinox.p2.artifact.repository.mirrorApplication 两个应用程序来镜像*整个*将站点更新到本地 p2 存储库。

该页面还说： *“此外，用户可以对工件或元数据进行选择性镜像，以创建更具体的镜像（例如仅镜像最新代码）或将内容合并到现有镜像中”*，但没有提供更多示例或文本主题。

那么我如何只镜像源存储库的一部分，例如具有特定版本的功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T11:37:42.623

您可能想看看[http://wiki.eclipse.org/Equinox/p2/Ant_Tasks](http://wiki.eclipse.org/Equinox/p2/Ant_Tasks)。

下一篇文章也可能会有所帮助：[http](http://www.lorenzobettini.it/2012/11/mirror-eclipse-repositories-with-p2-mirror-ant-task/) ://www.lorenzobettini.it/2012/11/mirror-eclipse-repositories-with-p2-mirror-ant-task/ 。

# ios - ARC 在调用完成处理程序块之前释放我的对象

> ID：14563287
> 
> 赞同：1
> 
> 时间：2013-01-28T13:38:46.747
> 
> 标签：ios, automatic-ref-counting, block

我将`UIAlertView`一个常规包装在内部`NSObject`以允许完成处理程序块而不是委托模式。

问题是我分配了一个对象的本地实例，该实例在内部创建一个`UIAlertView`并将其委托分配给对象本身。当显示警报并且用户点击按钮时，应用程序会崩溃，`EXC_BAD_ACCESS`因为 ARC 已释放我的对象，而警报的委托就是**该**对象。

我该如何处理这种情况？我看到一个解决方案是 `__block`使用完成块内的对象本身来限定局部变量，但这不起作用。

顺便说一句，如果我将“UIalertView”子类化而不是包装它，它可以工作，但文档说不建议使用警报子类化，所以我更愿意解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:44:59.523

您可以将您的对象与警报视图相关联，如下所示：

```
#import <objc/runtime.h>

...

- (void)showAlertView
{
    UIAlertView *alertView = [[UIAlertView alloc] initWithWhatever:...];        
    objc_setAssociatedObject(alertView, _cmd, self, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
    [alertView show];
} 
```

这将保留您的对象，然后在释放 alertView 时再次释放它。您的对象不能保留 alertView，否则您将有一个保留周期。

# javascript - 如何获取可滚动div内对象的相对位置？

> ID：14563293
> 
> 赞同：30
> 
> 时间：2013-01-28T13:39:07.673
> 
> 标签：javascript, html

![在此处输入图像描述](../Images/897873e3eeaa561f858841ca3fcf6cb5.png)

我有一个可滚动的 div，即上图中左侧的那个。
在这个 div 中存在许多元素，让我们关注其中一个（以灰色突出显示）并将其称为 A。

右图是具有完整大小（没有滚动或宽度设置）的 div 的表示，其中 A 放置在没有滚动的位置。

我怎样才能找到 X 的值（绿色），同时页面上当前有左 div。
即考虑到：

1.  页面上的 div 已调整大小
2.  页面上的 div 是可滚动的（并且已经滚动）
3.  我要 x 而不是 y ！

即如何获取可滚动div 内元素的相对y 坐标？简而言之：如何通过 javascript 计算 x？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-01-28T13:48:09.593

试试这个 ：

```
var elementTop = document.getElementById('yourElementId').offsetTop;
var divTop = document.getElementById('yourDivId').offsetTop;
var elementRelativeTop = elementTop - divTop; 
```

# javascript - 单击 url（上面带有参数），New Page Loads 和 Javascript 在页面加载时设置 Iframe src

> ID：14563294
> 
> 赞同：0
> 
> 时间：2013-01-28T13:39:10.067
> 
> 标签：javascript, iframe

**页面 A：**任何页面。

**Page B :**有 iframe 的页面

我要做的是这样的。

页面 A 到页面 B 上有一个链接，类似于：**“abcd.com/thewall?parameter”**

当他们单击**“abcd.com/thewall”**的 URL 时，站点会像`src`使用`iframe`. 但是，当他们使用**“abcd.com/thewall?parameter”**`url`之类的参数单击时，Iframe 会自动将**不同的 src**加载到该 iframe 中。

 ****我在这里找到了很多参考资料来做这样的事情，但他们都没有完全按照上面的描述做。

另外我不知道它是否可能，但是当新的 url`src`通过参数调用加载到 iframe 时，它​​是否能够自动滚动到 iframe？

我对 JavaScript 基本了解 0，所以请保持简单，以便我理解。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:32:46.310

[像这样](http://www.bloggingdeveloper.com/post/JavaScript-QueryString-ParseGet-QueryString-with-Client-Side-JavaScript.aspx)解析查询字符串并设置 iframe 的 src `onDOMReady`。由于 jQuery 是我最熟悉的，所以我将使用它：

```
function getQuerystring(key, default_) {
    var regex = new RegExp("[\\?&]"+key+"=([^&#]*)"), qs = regex.exec(window.location.href);
    if (default_==null) default_=""; 
    key = key.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
    if(qs == null) return default_;
    return qs[1];
}
$(document).ready( function() { 
    $('iframe').attr('src', getQuerystring('iframesrc', 'virool')); 
}); 
```

这使用`getQuerystring`来自链接页面的功能的修改版本。****

# pdf-generation - 如何从 pandoc 生成的 LaTeX 中的图形块中删除 `\centering` 标记？

> ID：14563297
> 
> 赞同：3
> 
> 时间：2013-01-28T13:39:21.020
> 
> 标签：pdf-generation, markdown, pandoc

使用 pandoc 从 markdown 生成 PDF 时，markdown 将转换为 LaTeX。我正在使用自定义模板来设置我的 PDF 样式。

当我创建图像链接时：

```
![Alt text](image.png) 
```

生成以下 LaTeX。

```
\begin{figure}[htbp]
\centering
\includegraphics{image.png}
\caption{Alt text}
\end{figure} 
```

毫不奇怪，该图像以 PDF 为中心。

如何防止`\centering`生成标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T15:05:49.643

可能您不能，但如果您的文档不`\centering`用于任何其他目的，您可以在使用之前将其重新定义为“void”( `\relax`)。您可以通过多种方式执行此操作：

*   `\def\centering{\relax}`在 pandoc 文档的开头包含该行。Pandoc 将所有乳胶代码“按原样”传递给结果`.tex`文件。
*   修改您的乳胶模板并在适当的位置包含 的定义`\centering`（例如，就在之前`\begin{document}`
*   如果您使用 pandoc 的标准模板，您仍然可以在编译时将代码插入其中，使用 pandoc 的`--variable`选项来定义变量`header-includes`。例如：

    ```
    pandoc -s --variable:header-includes="\\def\\centering{\\relax}" yourdoc.markdown -o yourdoc.tex 
    ```

# php - PHP 两个 while 循环轮流

> ID：14563299
> 
> 赞同：0
> 
> 时间：2013-01-28T13:39:32.053
> 
> 标签：php, loops, while-loop

我想在 PHP 中使用两个 while 循环进行输出，其中两个 while 循环通过返回值来轮流，例如它们是否“轮流”......

例如： While loop1 回显 A1、A2、A3 等 而 loop2 回显 B1、B2、B3 等

我希望我的输出是这样的：

A1
B1
A2
B2
A3
B3
等

有人对如何做到这一点有任何想法吗？我想以条形图的形式实现这个想法。我想每周比较两年的数据。条形图是使用 While 循环完成的。这是一个水平条形图（条形“放下”），我想让它像这样：

第 1 周 x第 1 周
x-1
年第 2 周 x
第 2 周 x-1
年第 3 周 x第 x-1 年第 3
周

ETC

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T13:44:17.643

如果值来自两个不同的数组，您可以使用 MultipleIterator 一起迭代它们

```
$firstArray = array('A1','A2','A3');
$secondArray = array('B1','B2','B3');

$mi = new MultipleIterator();
$mi->attachIterator(new ArrayIterator($firstArray));
$mi->attachIterator(new ArrayIterator($secondArray));

foreach ( $mi as $value ) {
    list($first, $second) = $value;
    echo $first , PHP_EOL , $second , PHP_EOL;
} 
```

# c - 构建makefile依赖/继承树

> ID：14563302
> 
> 赞同：7
> 
> 时间：2013-01-28T13:39:39.980
> 
> 标签：c, linux, embedded, makefile

如果我解释得不好或者问一些明显流血的东西，我很抱歉，但我是 Linux 内核的新手，而且有点深入......

我们有一个嵌入式 Linux 系统，它带有一个（文档非常糟糕的）SDK，其中包含数百个文件夹，大多数文件夹包含 rules.make、make、make.config 或...的一些变体，根文件夹包含*一个*“master” makefile & rules.make 这意味着您可以从根文件夹中键入“make sysall”并构建整个包。

到目前为止一切顺利，但尝试调试它有点问题，因为文档会说：

"*要让内核输出调试消息，只需定义 #outputdebugmessagesplz* "

好的，但是其中一些是在“主”make/rules 文件中定义的，其中一些是在子 make/rules/config 文件中定义的，有些是在 .h 文件中...从“顶部”make.config 打开/关闭这些东西，而不是修改单个 .h 文件，然后必须记住再次关闭它们。

所以我认为递归地构建一棵树是一件有用的事情，从主“make”文件开始并遵循它所做的一切，所有被定义或重新定义的东西等等......但似乎没有这样做的简单方法？

我假设我在这里缺少一个“make”选项来吐出这个信息，或者使用 makefile/config 可以正常工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-23T12:59:46.373

你的情况并不少见。在为嵌入式系统开发时，您可能会遇到许多以特定方式解决问题的自定义系统。正如人们已经对您的问题发表评论的那样，没有简单的方法可以为您的 makefile 结构/框架生成依赖关系图。但是有些事情你可以尝试，我会根据你的情况尝试提出我的建议。既然你说过：

> *我是 Linux 内核的新手，有点深入了解...*

和

> *我们有一个嵌入式 linux 系统，它带有一个（非常糟糕的文档）SDK，其中包含数百个文件夹*

您可以尝试以下方法：

*   如果您的 SDK 由第三方供应商提供，请尝试联系他们并获得一些支持。
*   SDK 通常提供一个抽象来处理多个组件，而无需深入了解每个组件的实际工作原理。尝试查明您的问题，例如，如果您只想自定义*内核*配置，您可以在 SDK 上找到 linux 内核文件夹（假设您的 SDK 由一组文件夹组成，其中包含库、应用程序的源代码等内容，其中之一可能是内核之一）并运行***make menuconfig***。这将打开一个基于 ncurses 的配置 GUI，您可以在其中导航和选择内核选项。
*   正如人们已经指出的那样，您可以尝试运行**make -n**并检查输出。您也可以尝试运行**make -p | less**并检查输出，但我不建议这样做，因为它只会打印读取 makefile 产生的数据库（规则和变量值）。您必须解析此输出以找出您想要的内容。

基本上，您应该尝试确定您想要自定义的内容，并查看它如何与您的 SDK 交互。如果它是内核，那么只使用它会给你一个起点。linux 内核有自己的 makefile-build 系统，名为**kbuild**。[您可以在内核的文档文件夹](https://www.kernel.org/doc/Documentation/kbuild/)中找到有关它的更多信息。

除此之外，如果您有一个复杂的 makefile 结构控制多个组件，那么尝试了解 makefile 的工作原理将对您有所帮助。以下是学习 makefile 的好资源：

[GNU Make 官方文档](https://www.gnu.org/software/make/manual/html_node/index.html)

[O'Reilly 的开放书*“使用 GNU Make 管理项目”*](http://oreilly.com/catalog/make3/book/)

此外，在尝试构建自己的工具之前，您可以检查是否有一个开源项目可以满足您的需求。谷歌上的快速搜索给了我这个：

*   [制作师](https://code.google.com/p/makegrapher/)

另外，检查[这个问题](https://stackoverflow.com/questions/5032269/backtrace-for-gnu-make)和[这个](https://stackoverflow.com/questions/2947821/graphing-the-dag-generated-by-make)问题。您可能会从与您遇到相同问题的人那里找到有用的信息。

希望能帮助到你！

# android - 在 Android 中使用 Web 服务

> ID：14563306
> 
> 赞同：0
> 
> 时间：2013-01-28T13:39:56.383
> 
> 标签：android, performance, android-intent

我正在学习如何在我的 android 应用程序中实现和使用 Web 服务。我能否请所有正在使用 Web 服务的 Pro 提供一些建议，我应该从哪里开始以及哪种方法或类型的 Web 服务最可靠和最有效地使用 Android 应用程序？

提前致谢。阿里

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:44:26.967

使用 Ksoap 了解更多详细信息，请参阅链接。 [http://codeoncloud.blogspot.in/2012/04/android-403-webservice-access-tutorial.html](http://codeoncloud.blogspot.in/2012/04/android-403-webservice-access-tutorial.html)

[http://codeoncloud.blogspot.in/2012/04/android-web-service-access-tutorial.html](http://codeoncloud.blogspot.in/2012/04/android-web-service-access-tutorial.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:45:54.767

使用此链接 [http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/](http://www.c-sharpcorner.com/UploadFile/88b6e5/how-to-call-web-service-in-android-using-soap/)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TextView
    android:id="@+id/textView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Fahrenheit"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<EditText
    android:id="@+id/txtFar"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <requestFocus />
</EditText>

<TextView
    android:id="@+id/textView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Celsius"
    android:textAppearance="?android:attr/textAppearanceLarge" />

<EditText
    android:id="@+id/txtCel"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />

<LinearLayout
    android:id="@+id/linearLayout1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" >

    <Button
        android:id="@+id/btnFar"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:text="Convert To Celsius" />

    <Button
        android:id="@+id/btnCel"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_weight="0.5"
        android:text="Convert To Fahrenheit" />

</LinearLayout>

<Button
    android:id="@+id/btnClear"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:text="Clear" />

</LinearLayout>

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;
import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class WebServiceDemoActivity extends Activity
{
/** Called when the activity is first created. */
  private static String SOAP_ACTION1 = "http://tempuri.org/FahrenheitToCelsius";
  private static String SOAP_ACTION2 = "http://tempuri.org/CelsiusToFahrenheit";
  private static String NAMESPACE = "http://tempuri.org/";
  private static String METHOD_NAME1 = "FahrenheitToCelsius";
  private static String METHOD_NAME2 = "CelsiusToFahrenheit";
  private static String URL =               "http://www.w3schools.com/webservices/tempconvert.asmx?WSDL";

  Button btnFar,btnCel,btnClear;
  EditText txtFar,txtCel;

@Override
public void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    btnFar = (Button)findViewById(R.id.btnFar);
    btnCel = (Button)findViewById(R.id.btnCel);
    btnClear = (Button)findViewById(R.id.btnClear);
    txtFar = (EditText)findViewById(R.id.txtFar);
    txtCel = (EditText)findViewById(R.id.txtCel);

    btnFar.setOnClickListener(new View.OnClickListener()
    {
              @Override
              public void onClick(View v)
              {
                    //Initialize soap request + add parameters
              SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME1);       

              //Use this to add parameters
              request.addProperty("Fahrenheit",txtFar.getText().toString());

              //Declare the version of the SOAP request
              SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

              envelope.setOutputSoapObject(request);
              envelope.dotNet = true;

              try {
                    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                    //this is the actual part that will call the webservice
                    androidHttpTransport.call(SOAP_ACTION1, envelope);

                    // Get the SoapResult from the envelope body.
                    SoapObject result = (SoapObject)envelope.bodyIn;

                    if(result != null)
                    {
                          //Get the first property and change the label text
                          txtCel.setText(result.getProperty(0).toString());
                    }
                    else
                    {
                          Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();
                    }
              } catch (Exception e) {
                    e.printStackTrace();
              }
              }
        });

    btnCel.setOnClickListener(new View.OnClickListener()
    {
              @Override
              public void onClick(View v)
              {
                    //Initialize soap request + add parameters
              SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME2);       

              //Use this to add parameters
              request.addProperty("Celsius",txtCel.getText().toString());

              //Declare the version of the SOAP request
              SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);

              envelope.setOutputSoapObject(request);
              envelope.dotNet = true;

              try {
                    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

                    //this is the actual part that will call the webservice
                    androidHttpTransport.call(SOAP_ACTION2, envelope);

                    // Get the SoapResult from the envelope body.
                    SoapObject result = (SoapObject)envelope.bodyIn;

                    if(result != null)
                    {
                          //Get the first property and change the label text
                          txtFar.setText(result.getProperty(0).toString());
                    }
                    else
                    {
                          Toast.makeText(getApplicationContext(), "No Response",Toast.LENGTH_LONG).show();
                    }
              } catch (Exception e) {
                    e.printStackTrace();
              }
              }
        });

    btnClear.setOnClickListener(new View.OnClickListener()
    {
              @Override
              public void onClick(View v)
              {
                    txtCel.setText("");
                    txtFar.setText("");
              }
        });
} 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:49:47.627

对于我从事过的企业应用程序，它们中的大多数使用 RESTful 移动服务层，旨在消除让服务器保持应用程序状态（因为手机很容易失去连接）。

[http://www.ibm.com/developerworks/webservices/library/ws-restful/](http://www.ibm.com/developerworks/webservices/library/ws-restful/)

这是一个很棒的 Chrome 插件，您可以使用它来测试和使用 RESTful Web 服务：

[https://chrome.google.com/webstore/detail/advanced-rest-client/hgmloofddffdnphfgcellkdfbfbjeloo?utm_source=ha-en-na-us-webapp-Advanced%20Rest%20Client%20Application](https://chrome.google.com/webstore/detail/advanced-rest-client/hgmloofddffdnphfgcellkdfbfbjeloo?utm_source=ha-en-na-us-webapp-Advanced%20Rest%20Client%20Application)

SOAP 是另一种选择，也用于一些移动应用程序。

[http://en.wikipedia.org/wiki/SOAP](http://en.wikipedia.org/wiki/SOAP)

# c# - 如何在我的项目中向用户添加下载链接

> ID：14563309
> 
> 赞同：0
> 
> 时间：2013-01-28T13:40:09.200
> 
> 标签：c#, javascript, jquery, asp.net-mvc

在我的项目中，我将有一个链接，例如

```
 <a href="~/hello world.crx" target="_blank">Download</a> 
```

我希望用户下载不同类型的文件。该文件将位于根文件夹中。当我单击链接时，它显示错误。这是安装在 chrome 中的插件。如果用户下载此链接并打开，它将自动添加到 chrome。我怎样才能做到这一点。

该文件甚至没有下载。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:44:12.490

这不是一个有效的路径：

> ~/你好世界.crx

该`~`字符用于在服务器端表示应用程序的根。客户端它没有任何意义。浏览器不知道应用程序的根是什么（或者根本不知道应用程序是什么），它只是向地址处的资源发送请求。它不知道如何处理该地址。

您需要使用一些服务器端逻辑将该路径转换为浏览器可用的路径，或者手动使其成为相对或绝对路径。

如果 ASP.NET MVC 框架没有为您翻译，那么您可能正在使用需要更多手动工作的版本。尝试类似：

```
<a href="@Url.Content("~/hello world.crx")" target="_blank">Download</a> 
```

（注意：这假设使用 Razor 视图引擎。如果您不使用它，那么您将希望使用您的等效视图引擎。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:55:45.200

如果网页和可下载文件位于同一位置

```
(i.e)
SampleFolder->Download.html
SampleFolder->hello world.crx 
```

然后尝试以下

```
<a href="hello world.crx" target="_blank">download</a> 
```

如果网页和可下载的文件在不同的位置

```
(i.e) 
SampleFolder->Download.html
SampleFolder->Downloads->hello world.crx 
```

然后尝试以下

```
<a href="Downloads/hello world.crx" target="_blank">download</a> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:47:20.087

您需要做的是在线设置一个目录，您可以在其中托管文件。

我还看到`aref`你不想输入完整路径，所以用 a 表示它`/hello_world.crx`，但要确保你已经设置了一个基本的 href：

`<base href="http://yourdomain.com/something/">`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T13:47:46.580

尝试重命名文件以删除任何空格，例如“hello_world.crx”，然后更改链接代码中的名称以匹配。

# qmake - QMake 给出未测试的 Windows 版本检测到错误

> ID：14563314
> 
> 赞同：2
> 
> 时间：2013-01-28T13:40:37.717
> 
> 标签：qmake

我正在使用 Qt 版本 4.6.3 运行 qmake 版本 2.01a

当我尝试从控制台调用 qmake 并构建解决方案时，出现以下错误

“Qt：检测到未经测试的 Windows 6.2 版！”

是否有任何相对轻松的方式可以让 qmake 工作或覆盖此消息。

我试过 qmake -Wnone 没有运气

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T13:37:48.403

如果您在 WINDOWS 8 上使用 QT，则必须将 QT 更新到最新版本。

# phpmyadmin - PHPmyAdmin 默认数据库

> ID：14563328
> 
> 赞同：14
> 
> 时间：2013-01-28T13:41:27.507
> 
> 标签：phpmyadmin

好的，这更像是一个“让我的房子井然有序”的问题。

PHPmyAdmin 已安装，但默认安装了一堆数据库。

•cdcol (1) •information_schema (37) •mysql (24) •performance_schema (17) •phpmyadmin (8) •test •webauth (1)

我最近删除了其中的一些，但之后我在访问 PHPmyAdmin 时遇到了很多问题，不得不重新安装。无论如何，长话短说我可以愉快地删除这些而不影响我的系统吗？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2014-01-20T21:25:22.023

删除cdcol数据库；它只是一个样本。对于您提到的其他表，通过将以下内容添加到 config.inc.php 将它们隐藏起来。

```
$cfg['Servers'][$i]['hide_db']='^(information_schema|performance_schema|mysql|phpmyadmin|test|webauth)$'; 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2013-01-28T14:00:14.093

并非所有列出的数据库都是`phpMyAdmin`相关的。MySQL正常运行需要一些。

*   `performance_schema` [http://dev.mysql.com/doc/refman/5.5/en/performance-schema.html](http://dev.mysql.com/doc/refman/5.5/en/performance-schema.html)
*   `information_schema` [http://dev.mysql.com/doc/refman/5.5/en/information-schema.html](http://dev.mysql.com/doc/refman/5.5/en/information-schema.html)
*   `test` [http://dev.mysql.com/doc/refman/5.0/en/database-use.html](http://dev.mysql.com/doc/refman/5.0/en/database-use.html)
*   `mysql` [http://dev.mysql.com/doc/refman/5.5/en//adding-users.html](http://dev.mysql.com/doc/refman/5.5/en//adding-users.html)

`cdcol`可能是针对 .cd 附带的 cd 集合示例数据库`XAMPP`。`webauth`可能也是其中的一部分`XAMPP`。

唯一`phpMyAdmin`相关的数据库（您可能已经猜到了）是`phpmyadmin`，您可以删除它，但让它存在会提高性能，并为`phpMyAdmin`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-23T22:11:30.517

如果您尝试通过自动脚本或命令行执行此操作：

1.  创建一个`hidedb.sql`文件并添加以下内容：

    ```
    USE 'phpmyadmin';
    UPDATE `pma__userconfig` SET `config_data` = '{\"Server\\/hide_db\":\"(information_schema|performance_schema|mysql|phpmyadmin)\",\"collation_connection\":\"utf8mb4_unicode_ci\"}' WHERE `pma__userconfig`.`username` = 'phpmyadmin'; 
    ```

2.  命令行（或在脚本中 - 更安全的方式）：

    `$ sudo mysql -u root -p < hidedb.sql`

当然，您必须输入您的 sudo，然后输入您的 mysql 根数据库密码。

如果您在只能以 root 身份运行的自动化脚本中执行此操作：

**注意：**这**不是一个好主意**！它暴露了你的root密码！

```
DB_PWD="my_password"
mysql -u root -p"$DB_PWD" < hidedb.sql 
```

# php - 如何在 php 中的两个值内添加中断？

> ID：14563329
> 
> 赞同：0
> 
> 时间：2013-01-28T13:41:33.190
> 
> 标签：php, html, mysql, tags

我得到了这个代码

```
 $title = new FullName($reservation->Title, $reservation->Description) 
```

它在一个框中显示值 Title 和 Description ，但它是直接相互跟随的。当盒子太小时，它会换行，但只在盒子末端的确切点。那么如何在 $reservation->Title 和 $reservation->Description 之间强制换行？

这是全名类

```
 class FullName
        {
/**
 * @var string
 */
private $fullName;

public function __construct($firstName, $lastName)
{
    $formatter = Configuration::Instance()->GetKey(ConfigKeys::NAME_FORMAT);
    if (empty($formatter))
    {
        $this->fullName = "$firstName $lastName";
    }
    else
    {
        $this->fullName = str_replace('{first}', $firstName, $formatter);
        $this->fullName = str_replace('{last}', $lastName, $this->fullName);
    }
}

public function __toString()
{
    return $this->fullName;
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:46:49.557

如果没有适当的解释，这不是一个好方法，而是一个快速的解决方案

代替

```
$title = new FullName($reservation->Title, $reservation->Description) 
```

和

```
 $t = $reservation->Title . "<br />";
   $d = $reservation->Description;
   $title = new FullName($t, $d); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:46:49.913

HTML换行符可以插入为：

```
$this->fullName = $firstName . '<br />' . $lastName 
```

或使用通用（非 HTML）换行符：

```
$this->fullName = $firstName . "\n" . $lastName 
```

在最后一种情况下使用双引号 (") 很重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:59:40.930

请参阅链接以获取工作示例：[http ://codepad.viper-7.com/qS7nNv](http://codepad.viper-7.com/qS7nNv)

您可以向该类添加第三个参数。

```
class FullName
{
/**
 * @var string
 */
private $fullName;

public function __construct($firstName, $lastName, $delimiter = null)
{
    $formatter = Configuration::Instance()->GetKey(ConfigKeys::NAME_FORMAT);
    if (empty($formatter))
    {
      if($delimiter) {
        $this->fullName = "$firstName $delimiter $lastName";
      } else {
        $this->fullName = "$firstName $lastName";
      }
    }
    else
    {
        $this->fullName = str_replace('{first}', $firstName, $formatter);
        $this->fullName = str_replace('{last}', $lastName, $this->fullName);
    }
}

public function __toString()
{
    return $this->fullName;
}
 } 
```

然后添加分隔符：

```
$title = new FullName($reservation->Title, $reservation->Description, "<br />"); 
```

# compiler-construction - 如何使用 LLVM 传递参数

> ID：14563331
> 
> 赞同：0
> 
> 时间：2013-01-28T13:41:42.207
> 
> 标签：compiler-construction, llvm

我正在寻找在编译期间使用 LLVM 提取静态代码特征（如指令数）然后存储这些值以便我可以在程序执行期间使用的方法。

这可以通过 TransformationPasses 来完成吗？我在 LLVM 文档中没有得到这个概念。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:53:00.207

你的问题太笼统了。TransformationPasses 转换您的代码（例如消除死代码）。对于分析，有分析通行证。您可以编辑这些通行证以获得所需的内容。

首先，您可以编写自己的分析通行证： http: [//llvm.org/docs/WritingAnLLVMPass.html](http://llvm.org/docs/WritingAnLLVMPass.html)。其次，您有 runOnFunction() 之类的函数（您可以在其中使用指令迭代器或基本块迭代器）。对于计数指令的特定示例，只需在 runOnFunction() 或 LLVM 方法中使用计数器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:13:46.020

首先，您需要[编写一个](http://llvm.org/docs/WritingAnLLVMPass.html)计算所需信息的通行证。然后，您需要将该信息注入到您的模块中。一种相对简单的方法是生成函数，在调用时返回计算值。

如果程序员想要接收这些特殊值，则需要调用这些函数。程序员可能需要自己添加签名，但您的 pass 将替换为`declare`实际的`define`，它只返回一个常量值。这些函数也应该被注释为内联。

您也可以通过替换特殊变量或参数或其他任何东西来做到这一点，只是函数调用在我看来是一种优雅的方法。

# c# - CRM 2011 创建产品插件

> ID：14563332
> 
> 赞同：2
> 
> 时间：2013-01-28T13:41:47.180
> 
> 标签：c#, dynamics-crm-2011, dynamics-crm

我正在尝试使用插件创建新产品，但出现此异常：

> System.Collections.Generic.KeyNotFoundException：给定的键不在字典中。

这是创建产品的代码

```
EntityReference ugRef = new EntityReference(ug.LogicalName, ug.UoMScheduleId.Value);
EntityReference uRef = new EntityReference(u.LogicalName, u.UoMId.Value);   
Product product = new Product()
{
  Name = pName,
  ProductNumber = pNumber,
  QuantityDecimal = 2,
  DefaultUoMScheduleId = ugRef,
  DefaultUoMId = uRef
}; 
service.Create(product); 
```

所有变量都经过测试，它们都有值。该单位对于单位组是正确的 - 如果我改变任何一个，我都会得到一个例外。

问题肯定出在这段代码上，因为当代码更改为此时，预期的第一名和姓氏有一个可爱的线索：

```
EntityReference ugRef = new EntityReference(ug.LogicalName, ug.UoMScheduleId.Value);
EntityReference uRef = new EntityReference(u.LogicalName, u.UoMId.Value);
Lead l = new Lead();
l.FirstName = uRef.Id.ToString();
l.LastName = uRef.LogicalName;
service.Create(l);
/*
  Product product = new Product()
  {
    Name = (String)staged.Attributes["wishlist_name"],
    ProductNumber = (String)staged.Attributes["wishlist_barcode"],
    QuantityDecimal = 2,
    DefaultUoMScheduleId = ugRef,
    DefaultUoMId = uRef
  }; 
  service.Create(product);
*/ 
```

*pName*和*pNumber*是字符串。
*u*和*ug*是一个*Unit*和一个*Unit Group*。

我将代码更改为：

```
 query = new QueryByAttribute("uom");
            query.ColumnSet = new ColumnSet("name", "uomscheduleid");
            query.Attributes.AddRange("name");
            query.Values.AddRange("1");
            UoM unit = (UoM)service.RetrieveMultiple(query).Entities[0];                    
            Product newProduct = new Product
            {

                ProductNumber = "1t2y3u",
                Name = "Example Banana Product",
                QuantityDecimal = 1,
                DefaultUoMScheduleId = unit.UoMScheduleId,
                DefaultUoMId = unit.ToEntityReference()
            };
            service.Create(newProduct); 
```

抛出相同的错误。

我要用这个**剥夺我的摩尔了。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:57:17.113

有几件事要看。

1.  看起来您在第一个示例中尝试简化代码，但可能已经删除了错误的来源，但幸运的是，您将其添加到了上一个示例中:) 我猜 staged 不包含`"wishlist_name"`，因此给了你你看到的错误。您应该始终使用`GetAttributeValue`Entity 类中定义的类型化方法：`staged.GetAttributeValue<String>("wishlist_name")`. 它将执行空检查并返回该类型的默认值。

2.  检查所有其他插件，以查看是否在创建产品时触发了另一个插件，如果填充了 DefaultUoMScheduleId 或 DefaultUoMId，这可能会执行一些额外的逻辑。您在此插件中的创建可能会从另一个“嵌套”插件中收到错误。

3.  无需创建临时实体引用变量，而是使用实体类中定义的 ToEntityReference() 方法，恕我直言，它使代码看起来更简洁一些。

    ```
     Product product = new Product()
        {
            Name = (String)staged.Attributes["wishlist_name"],
            ProductNumber = (String)staged.Attributes["wishlist_barcode"],
            QuantityDecimal = 2,
            DefaultUoMScheduleId = ug.ToEntityReference(),
            DefaultUoMId = u.ToEntityReference()

        }; 
    ```

# java - 当我通过 localhost 访问链接时，链接不起作用

> ID：14563338
> 
> 赞同：1
> 
> 时间：2013-01-28T13:41:56.100
> 
> 标签：java, jakarta-ee, tomcat, servlets, hyperlink

下面的 servlet 创建一个名为*Shared*的目录，然后将视频复制到该目录中。接下来它会显示链接，以下载该视频。但是当我点击链接时，什么也没有发生。为什么是这样 ？

```
@Override
protected void doGet(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    response.setContentType("text/html");
    PrintWriter writer = response.getWriter();
    String path = request.getServletContext().getRealPath("/") + "Shared/" + "sweet-love-story-that-might-make-your-day[www.savevid.com].3gp";
    path = path.replace("\\","/");
    try {
        File f = new File(request.getServletContext().getRealPath("/") + "Shared/");
        if(!f.exists()) {
            f.mkdir();
            // now copy the animation to this directory
        } else {
            System.out.println("directory already made");               
        }
        writer.println("<html> <head> <title> </title> </head>");
        writer.println("<body>");
        writer.println("<a href=\"file:///" + path + "\"" + ">Click to download</a>");
        writer.println("</body>");
        writer.println("</html>");
    }catch(Exception exc) {
        exc.printStackTrace();
    }
} 
```

*具有讽刺意味的是，当我编写与视频（共享）*位于同一目录中的 html 时，我能够下载/查看视频。当我通过 访问链接时，为什么链接不起作用`localhost`？

![在此处输入图像描述](../Images/5c1ac3493f6d0e9fd45766252120977a.png)

*（我正在使用Tomcat）*

**注意：语句`request.getServletContext().getRealPath("/")`打印 W:\UnderTest\NetbeansCurrent\App-1\build\web**

以下是分别从localhost和本地访问的html的快照。

![在此处输入图像描述](../Images/2ad968ac3938aceb23f97b878f50f924.png)

和

![在此处输入图像描述](../Images/e7db6893910c7aa41c3212a206bec0f1.png)

# java - 如何获取数组列表中的变量并将它们设置为标签

> ID：14563339
> 
> 赞同：-5
> 
> 时间：2013-01-28T13:41:59.803
> 
> 标签：java, arraylist

在我的第一堂课中，我得到了一个看起来像这样的方法

```
public Private HentLogindOplysninger(String Brugernavn){
    for(Private privat : privater){
        if(privat.getAccountName().equals(Brugernavn)){
            return privat;
        }
    }
    return null;
} 
```

在我的主类中，我像这样在顶部创建了我的对象

```
private static PrivateRegistre PR = new PrivateRegistre(); 
```

我叫它

```
PR.HentLogindOplysninger(KundeId); 
```

但是我如何获得私有并将其分开，并将不同的变量放在每个标签中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:45:35.637

这是你想要的吗？

```
final Private myPrivate = PR.HentLogindOplysninger(KundeId); 
```

# mysql - MySQL：如何在两个表中找到不存在的值？

> ID：14563341
> 
> 赞同：1
> 
> 时间：2013-01-28T13:42:10.777
> 
> 标签：mysql, sql

> **可能重复：**
> [MySQL - 如何获取表 A 中不存在于表 B 中的值列表？](https://stackoverflow.com/questions/1079585/mysql-how-to-get-a-list-of-values-in-table-a-that-dont-exist-in-table-b)

我有三张桌子。

**表十：**

```
+------+
| ID   |
+------+
|    1 |
|    2 |
|    3 |
|    4 |
+------+ 
```

**表 Y**

```
+------+
| ID   |
+------+
|    1 |
|    2 |
|    3 |
|    4 |
|    5 |
+------+ 
```

**表 Z**

```
+------+
| ID   |
+------+
|    1 |
|    2 |
|    3 |
|    4 |
|    5 |
|    6 |
|    7 |
+------+ 
```

我必须找到该值存在于`TABLE Z`但它不存在于表中`X and Y`。

输出：

```
+----+
| ID |
------
| 6  |
| 7  |
+----+ 
```

我怎样才能得到这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:44:00.783

```
SELECT z.ID 
FROM TableZ z
LEFT JOIN TableX x on x.ID = z.ID
LEFT JOIN TableY y on y.Id = z.ID
WHERE x.Id IS NULL 
AND y.ID IS NULL 
```

[sqlFiddle](http://sqlfiddle.com/#!2/1c38c/7)（与 Xavi Lopez 和我的，都给出相同的结果）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:44:05.540

你可以`EXISTS`用来做一个子查询。

```
SELECT tz.id 
FROM Z tz 
WHERE 
    NOT EXISTS (select 1 from X tx where tx.id = tz.id)
    AND NOT EXISTS (select 1 from Y ty where ty.id = tz.id) 
```

[不过， @RaphaëlAlthaus 的回答](https://stackoverflow.com/a/14563375/851811)在效率上可能会更好。请参阅[使用 JOIN 或使用 EXISTS 可以获得更好的性能吗？](https://stackoverflow.com/q/227037/851811)

MySQL 参考有一个关于`EXISTS`：[13.2.9.6 的部分。带有 EXISTS 或 NOT EXISTS 的子查询](http://dev.mysql.com/doc/refman/5.0/en/exists-and-not-exists-subqueries.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:45:01.343

```
SELECT  a.ID
FROM    tableZ a
        LEFT JOIN
        (
            SELECT ID FROM tableX
            UNION 
            SELECT ID FROM tableY
        ) b ON a.ID = b.ID
WHERE   b.ID IS NULL 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1c38c/8)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T13:50:10.880

你可以使用减号功能

```
SELECT * FROM Z
MINUS
(
SELECT * FROM Y
UNION
SELECT * FROM X
) 
```

# windows - 如何使用标准输入管道作为 gcc 的源输入？

> ID：14563343
> 
> 赞同：7
> 
> 时间：2013-01-28T13:42:25.053
> 
> 标签：windows, gcc, pipe

这是我的尝试：

CMD 文件：

```
@SET PATH=%PATH%;D:\mingw\bin
type test10.cpp | g++ -xc++ -o test10.exe 
```

代码（此处无关）：`int main() {}`

我得到的错误：

```
g++: fatal error: no input files
compilation terminated. 
```

我认为 -x 选项是用于信号输入标准输入，gcc 本身就是这么说的。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-01-28T13:49:27.447

该`-x`选项指定输入语言，但它不告诉 g++ 从标准输入读取。为此，您可以将单个破折号作为文件名传递。

```
type test10.cpp | g++ -o test10.exe -x c++ - 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-12-24T05:48:45.677

您可以`here doc`在交互式外壳中使用。例如：

```
gcc -x c - <<eof
#include <stdio.h>

void foo()
{
    int a = 10;
    static int sa = 10;

    a += 5;
    sa += 5;

    printf("a = %d, sa = %d\n", a, sa);
}

int main()
{
    int i;

    for (i = 0; i < 10; ++i)
        foo();
}
eof 
```

[参考](https://stackoverflow.com/questions/17702982/compiling-c-code-without-a-file/65425028#65425028)

# ios - Airprint 远程网页（来自 URL）

> ID：14563349
> 
> 赞同：0
> 
> 时间：2013-01-28T13:42:33.417
> 
> 标签：ios, airprint

有没有办法打印网站/网页？即你知道网址。

我知道有一种方法可以将其加载到 webview 中并打印出来，但这似乎有点 OTT。

那么有没有`printFromWebpage:(NSURL *)url`风格方法呢？或者更简单的方法？

非常感谢

# ios - 具有本地通知重复间隔的多个 uiswitch，不要在我的应用程序中相互依赖

> ID：14563353
> 
> 赞同：1
> 
> 时间：2013-01-28T13:42:41.630
> 
> 标签：ios, objective-c, notifications, uilocalnotification, uiswitch

所以，这是我的人生故事，我似乎无法弄清楚出了什么问题！！！

我有一个已经在商店里的应用程序，它有一个奇怪的问题，它给出了混合的结果。

我的主视图中有两个开关，它们都控制具有重复间隔的本地通知。

现在我已经正确设置了开关并准备好了。（我猜）。但是，当安排重复间隔时，当用户决定不接收通知时，它们必须再次取消。所以，我的开关是这样编码的：

```
- (void)applicationDidEnterBackground:(UIApplication *)application
{
NSUserDefaults *userDefaults = [NSUserDefaults standardUserDefaults];
BOOL switchOn = [userDefaults boolForKey:@"switchO"];

if (switchOn) {

    [self Firstnotif];
    [self Secondnotif];
    [self Thirdnotif];
    [self Lastnotif];

}

else {   [[UIApplication sharedApplication] cancelAllLocalNotifications];    }

 BOOL switchOn2 = [userDefaults boolForKey:@"switchO2"];

if (switchOn2) {

[self Firstnotif];

}

else {   [[UIApplication sharedApplication] cancelAllLocalNotifications];    }

} 
```

请注意，我`Firstnotif`在两个开关中都使用了该方法两次。

**我的问题是：**

*   我曾经只有一个开关，当他们打开第一个开关以接收这四个通知时，不适用于所有用户。所以我告诉他们把它关掉，按主页按钮，再次打开应用程序打开它，然后再次打开主页按钮。有用！！！！为什么？

*   现在，由于我添加了另一个开关，因此出现了新的混合结果。第二个开关是仅以重复间隔触发第一个通知。有人说有效，有人说无效。其他人说，当我转动另一个时，它会转，也不会。他们在这里面对什么？

**我的问题，**

我是否以正确的方式取消重复间隔？

我的应用程序可能有什么问题？如果需要，我会为您提供更多代码。

感谢您的投入，因为我在这些问题上花了数周时间却没有运气。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T13:59:06.547

我解决了！

我替换了方法下的取消请求`applicationDidBecomeActive`并删除了我的`else`

你猜怎么了？有效！！！:)

# ios - 创建一个琐事游戏

> ID：14563354
> 
> 赞同：0
> 
> 时间：2013-01-28T13:42:42.840
> 
> 标签：ios, ipad

我正在开发一个有多个 ipad/客户端的琐事游戏。

基本上每个团队都会有一个 ipad 来回答问题。为了使示例简单，这些将只是多项选择题。将有一个主客户端（平板电脑/笔记本电脑）可以监控团队的答案。

我想制作一个 API：

*   向团队/ipad 提供问题（通过 json）
*   收到团队的答案
*   记分……</li>

在我的后端，我想：

*   准备游戏、保存游戏、将游戏分配给会话、添加问题、任务……</li>

主客户端必须能够向团队推送操作。例如，在 ipad 上开始看电影。

我将在 MVC 框架 (cakephp) 中制作 API + 后端。一些游戏逻辑将在 api 中，一些在客户端。

我的问题：

*   是否有在线平台已经在这样做？我不想重新发明轮子。
*   将数据推送到客户端（nodejs，...）的最佳方式是什么？
*   我会从像 apigee 这样的 BAAS（backen as a service）提供商那里受益吗？...</li>

我真的不知道该往哪个方向看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:53:42.027

> 将数据推送到客户端（nodejs，...）的最佳方式是什么？

这取决于您需要什么级别的“推动”，但您基本上有两个现实的选择，每个都有其优点，但它们的方法非常相似。

首先，基本上一个“套接字”是打开而不是关闭的，这允许数据被推送到设备，而不需要设备请求它。

您可以使用 NodeJS 和 Socket.io 做到这一点 - 但您可能无法为您的应用程序找到客户端框架。快速搜索出现[https://stackoverflow.com/questions/10663829/any-objective-c-libraries-for-socket-io](https://stackoverflow.com/questions/10663829/any-objective-c-libraries-for-socket-io)这可能会有所帮助。您也可以使用称为 XMPP (jabber) 的协议来执行此操作。尽管它是“技术上”为 IM 构建的，但它主要基于 XML，因此找到 XML 解释器可能比 Socket.io 客户端框架稍微容易一些。您可以向服务器和应用程序发送“消息”或从服务器和应用程序发送“消息”，其中可以包含任意 XML。我以前使用过 XMPP，尽管初始学习曲线很陡峭，但它是一项非常有用且功能强大的技术。您可以使用[https://github.com/robbiehanson/XMPPFramework](https://github.com/robbiehanson/XMPPFramework)对于 iOS，您选择的后端语言（PHP、ASP 等）会有一个类似的框架。

其次，您可以通过循环调用 API 来做到这一点，但这会浪费电池寿命并增加互联网使用量。然而，这将是最容易获得的选项，并且可能是 MVP（最小可行产品）的良好开端。

抱歉，我无法回答其他两个问题。它们相当具体。只有当你做足够的研究并权衡利弊时，你才会知道答案。其他人可能有更多的经验，可以指导你，但每个人的情况都不一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:05:54.483

> 将数据推送到客户端（nodejs，...）的最佳方式是什么？

除了 Thomas Clayson 提到的选项之外，您还可以使用像[Pusher](http://pusher.com)这样的商业服务。这使您免于开发和维护自己的服务或基础架构。

# java - 为什么 ICU4J 在将字节数组读入字符串时返回字节顺序标记？

> ID：14563359
> 
> 赞同：1
> 
> 时间：2013-01-28T13:43:08.173
> 
> 标签：java, encoding, icu

我将一个文件读入一个字节数组。然后我使用 ICU4J 来检测文件的编码（我不知道编码可能是什么，这些文件可以有多种不同的编码）并返回一个 Unicode 字符串。像这样：

```
byte[] fileContent = // read file into byte array
CharsetDetector cd = new CharsetDetector();
cd.setText(fileContent);
CharsetMatch cm = cd.detect();
String result = cm.getString(); 
```

当我的文件使用 UTF-16LE 编码时，“结果”中的第一个字符是字节顺序标记。我对此不感兴趣，因为它特定于编码方案，而不是文件内容的一部分，我希望它会消失。

然而 ICU4J 将其归还。为什么会发生这种情况，有没有办法解决这个问题？我看到的唯一解决方案是手动检查返回的字符串中的第一个字符是否是字节顺序标记并手动剥离它。有没有更清洁/更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:27:46.790

我刚刚查阅了文档... icu-project.org/apiref/icu4j/com/ibm/icu/text/...。他们实际上说它返回相应的 Java 字符串，但他们没有说任何关于删除 BOM 的内容。因此，如果它首先出现，我希望它会在那里。

对我来说，它也被检索是很自然的。如果他们正在修剪 BOM，我希望他们在文档中明确提及它。

> 我认为答案在这里 unicode.org/faq/utf_bom.html#bom1 -“在某些更高级别的协议下，在该协议中定义的 Unicode 数据流中可能强制（或禁止）使用 BOM。”

我想就差不多了。如果 BOM 是强制性的，则必须再次添加它。如果 BOM 被禁止，则将其过滤掉被认为是容易的部分：)

# linux - 如何管理共享库的开发和安装版本？

> ID：14563360
> 
> 赞同：0
> 
> 时间：2013-01-28T13:43:09.270
> 
> 标签：linux, shared-libraries

简而言之：这个问题基本上是关于告诉Linux为`.so`dev目录中的可执行文件加载开发版本的文件并`.so`为其他人加载已安装的文件。

长话短说：想象一个共享库，我们称之为`libasdf.so`. 并想象以下目录：

```
/home/user/asdf/lib: libasdf.so
/home/user/asdf/test: ... perform_test
/opt/asdf/lib: libasdf.so
/home/user/jkl: ... use_asdf 
```

换句话说，您有一个库的开发目录`/home/user/asdf`（`/opt/asdf``/home/user/jkl`

我的问题是，我如何告诉 Linux`/home/user/asdf/lib/libasdf.so`在执行时加载和在执行时`/home/user/asdf/test/perform_test`加载？请注意，即使我在链接期间指定了目录，Linux 也会使用其他方法（例如和）来查找文件。`/opt/asdf/lib/libasdf.so``/home/user/jkl/use_asdf``-L``/ect/ld.so.conf``$LD_LIBRARY_PATH``.so`

我需要这样一个东西的原因是，当然开发目录中的可执行文件需要与最新版本的库链接，而其他程序则希望使用稳定版本。

放入`../lib`库路径似乎不是一个安全的想法，更不用说不完全正确，因为您无法从不同的目录运行测试。

我想到的一种解决方案是在安装时`perform_test`与它建立链接`libasdf-dev.so`，复制`libasdf-dev.so`为`libasdf.so`并让其他人与之链接。这个解决方案有一个问题。想象以下附加目录：

```
/home/user/asdf/tool: ... use_asdf_too 
```

安装到：

```
/opt/asdf/bin: use_asdf_too 
```

在我的解决方案中，不知道`use_asdf_too`应该链接什么。如果链接到`libasdf.so`，如果从 dev 目录调用，它将无法正常工作，如果链接到`libasdf-dev.so`，如果从安装位置调用，它将无法正常工作。

我能做些什么？其他人是如何管理的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:54:13.653

安装的共享对象通常*不只*是以“.so”结尾。通常他们还包括他们的**soname**，例如`libadsf.so.42.1`。用于开发的 .so 文件通常是完整版本文件名的符号链接。链接器将查找 .so 文件并将其解析为完整文件名，然后加载器将加载完整版本的库。

# jquery - Asp .NET MVC 下拉列表级联检索值

> ID：14563361
> 
> 赞同：0
> 
> 时间：2013-01-28T13:43:09.723
> 
> 标签：jquery, asp.net-mvc, json, asp.net-mvc-3, asp.net-mvc-4

我在表单中使用 Asp.Net MVC4 我在级联中有下拉列表，当我在另一个 DropDownList 中选择“Distrito”时，会加载“Sucursal”的值，这可以正常工作我可以插入一条记录我的问题是当我需要搜索检索数据的项目未设置正确的值。这是控制器中的代码：

```
public JsonResult Buscar(string id){
        string Mensaje = "";
        Models.cSinDenuncias oDenuncia = new Models.cSinDenuncias();
        oDenuncia.sd_iddenuncia = id;
        var denuncia = Servicio.RecuperaDenuncia<Models.cSinDenuncias>(ref Mensaje, oDenuncia.getPk(), oDenuncia);
        string HoraDenuncia = denuncia.sd_horadenuncia.ToString();
        return Json(new {objDenuncia = denuncia, hDenuncia = HoraDenuncia});
    } 
```

在 objDenuncia 我有值例如值 objDenuncia.sd_pardistrito = "TJA" objDenuncia.sd_sucursal = "YCB"

当我发现这是我在视图中的代码时：

```
function Buscar() {
        var Iddenuncia = $('#sd_iddenuncia').val();
        $.ajax({
            url: '@Url.Action("Buscar", "raDenuncia")',
            type: 'POST',
            data: { Id: Iddenuncia },
            dataType: 'json',
            success: function (data) {                    
                $('#sd_iddenuncia').val(data.objDenuncia.sd_iddenuncia);
                $('#ddlParDistrito').val(data.objDenuncia.sd_pardistrito);
                $('#ddlParDistrito').trigger('change');
                $('#ddlSucursal').trigger('change');
                $('#ddlSucursal').val();                    
                $('#ddlSucursal').val(data.objDenuncia.sd_sucursal);                    
                $("select#ddlSucursal").val(data.objDenuncia.sd_sucursal);                  
            }
        });
    } 
```

下拉列表中的值 ddlParDistrito is "TJA" text is "TARIJA" 很好地显示了组件中的文本 execute $('#ddlParDistrito').trigger('change'); 此下拉列表“Sucursal”的加载数据但未设置当前值，此显示“--SUCURSAL--”此处当前值应为“YCB”，文本为“YACUIBA”，请帮助我解决这个问题。

问候里卡多

在我看来，我有这个下拉列表，对于“SUCURSAL”，我使用 new SelectList(Enumerable.Empty()

```
 <td class="name"><label>Distrito:</label></td>
 <td class="name">@Html.DropDownListFor(u => u.sd_pardistrito, new SelectList(ViewBag.Distrito as System.Collections.IEnumerable, "cp_idparametro", "cp_descparametro"), "-- DISTRITO --", new { id = "ddlParDistrito", style = "width:125px;" })</td>
 <td class="name"><label>Sucursal:</label></td>
 <td class="name">@Html.DropDownListFor(u => u.sd_sucursal, new SelectList(Enumerable.Empty<SelectListItem>(), "cp_idparametro", "cp_descparametro"), "-- SUCURSAL --", new { id = "ddlSucursal", style = "width:125px;" })</td> 
```

在我的控制器中，我使用此方法在“DISTRITO”中更改选项时加载下拉列表

```
[AcceptVerbs(HttpVerbs.Get)]
    public JsonResult LoadSucusalByDistrito(string id)
    {
        var sucursalList = this.GetSucursal(id);
        var sucursalData = sucursalList.Select(m => new SelectListItem()
        {
            Text = m.cp_descparametro,
            Value = m.cp_idparametro,
        });
        return Json(sucursalData, JsonRequestBehavior.AllowGet);
    } 
```

在我看来，当更改选项 ddlDistrito 加载 ddlSucursal

```
$("#ddlParDistrito").change(function () {
            var idDistrito = $(this).val();
            $.getJSON("/raDenuncia/LoadSucusalByDistrito", { id: idDistrito },
                function (distritoData) {
                    var select = $("#ddlSucursal");
                    select.empty();
                    select.append($('<option/>', {
                        value: 0,
                        text: "-- SUCURSAL --"
                    }));
                    $.each(distritoData, function (index, itemData) {
                        select.append($('<option/>', {
                            value: itemData.Value,
                            text: itemData.Text
                        }));
                    });
                });
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:17:14.120

在问题下方的评论回复中，我没有清楚地理解您的陈述。

我将尝试解释我认为可能存在的问题，如果我正在做某事，您可以告诉我，当`$('#ddlSucursal').val(data.objDenuncia.sd_sucursal);`执行语句时，我认为下拉菜单`ddlSucursal`没有数据。有没有办法让你在函数内移动该语句`$("#ddlParDistrito").change...`，以便它在你完成后执行。

因此，如果您可以尝试以下操作，则效果如下：

```
var currentSucursal = null;
function Buscar() {
    var Iddenuncia = $('#sd_iddenuncia').val();
    $.ajax({
        url: '@Url.Action("Buscar", "raDenuncia")',
        type: 'POST',
        data: { Id: Iddenuncia },
        dataType: 'json',
        success: function (data) {                    
            $('#sd_iddenuncia').val(data.objDenuncia.sd_iddenuncia);
            $('#ddlParDistrito').val(data.objDenuncia.sd_pardistrito);

            // Set the global variable to the currently given sucursal value
            currentSucursal = data.objDenuncia.sd_sucursal;

            // Call the change event after the global values is set
            $('#ddlParDistrito').trigger('change');
            // $('#ddlSucursal').trigger('change');
        }
    });
} 
```

进而

```
$("#ddlParDistrito").change(function () {
    var idDistrito = $(this).val();
    $.getJSON("/raDenuncia/LoadSucusalByDistrito", { id: idDistrito },
        function (distritoData) {
            var select = $("#ddlSucursal");
            select.empty();
            select.append($('<option/>', {
                value: 0,
                text: "-- SUCURSAL --"
            }));
            $.each(distritoData, function (index, itemData) {
                select.append($('<option/>', {
                    value: itemData.Value,
                    text: itemData.Text
                }));
            });

            // Check if the global variable has value
            if(null!==currentSucursal) {
                $('#ddlSucursal').val(currentSucursal);
            }
        });
}); 
```

我希望我的内联评论是不言自明的。

# batch-file - 编写一个 bat 文件以从文件夹名称中删除后缀

> ID：14563362
> 
> 赞同：1
> 
> 时间：2013-01-28T13:43:13.377
> 
> 标签：batch-file

我正在尝试编写一个 bat 文件来遍历目录结构并从文件夹名称中删除后缀“ - Optimized Images”，例如“folder_name - Optimized Images”

我找到了一个类似于文件名的解决方案，但我显然没有正确编辑它？：

```
@ECHO OFF
FOR %%F IN ("* - Optimised Images") DO CALL :process "%%F"

:process
SET oldname=%1
SET "newname=%~nx1"
SET "newname=%newname:*] =%"
REN %oldname% "%newname%" 
```

任何帮助表示赞赏！

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:11:25.703

```
 for /d %%a in (* - Optimised Images) do (
    SET name=%%a
    call :Rename "%%~na"
    )

    Exit /b

    :Rename
    set "str1=%~1"
    set "str3=%str1: - Optimised Images=%"
    ren "%name%" "%str3%"
    )

    Exit /b 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:13:27.073

这将从文件夹中删除它

```
setlocal enabledelayedexpansion
for /d %%a in (C:\folders\* - Optimised Images) do (
set name=%%~nxa
set newname=!name: - Optimised Images=!
ren "%%a" "!newname!"
) 
```

# parameters - 将参数传递给 Windows Azure 移动服务脚本

> ID：14563364
> 
> 赞同：1
> 
> 时间：2013-01-28T13:43:22.180
> 
> 标签：parameters, azure-mobile-services

在最新的 WAMS sdk 更新中，可以在查询中使用 .withparameters 发送参数，但到目前为止，这仅适用于 Windows 8 商店 dll。

如何使用 WP8 移动 sdk 实现这一点？我试图在 github 库中实现该函数，它确实编译了所有这些，但是在 SQL 查询中它似乎没有正确发送。

那么如何将参数传递给表读取脚本呢？我猜它必须在读取脚本的 Query 参数中，但是如何？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T00:15:05.107

WP8 SDK 即将支持附加查询参数。同时，您可以使用服务过滤器来做到这一点。它绝对不像“withParameters”那样用户友好，但它可以工作。[http://blog.amitapple.com/post/30921523746/customparametersinmobileservices](http://blog.amitapple.com/post/30921523746/customparametersinmobileservices)上的博客文章详细介绍了如何实现这一点。

# primefaces - 无法在 primefaces-mobile 网络应用程序中使用 p:media 标签播放

> ID：14563365
> 
> 赞同：0
> 
> 时间：2013-01-28T13:43:27.507
> 
> 标签：primefaces, mobile-website, primefaces-mobile

我正在开发一个 primefaces 移动网络应用程序。我想使用`p:media`标签，但它不会在移动设备上显示视频。我的代码：

```
<p:media value="#{basePath}/resources/3.mp4" width="340"
    height="250" player="quicktime">
    <f:param name="autoPlay" value="false" />
</p:media> 
```

但是在同一页面上，以下代码可以正常工作：

```
<video width="400" height="300" controls="controls">
    <source src="#{basePath}/resources/3.mp4" type="video/mp4" />
</video> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:34:21.903

如果我没记错的话，`p:media`生成一个 quicktime 特定的标签。`<video>`标签是 html5，因此不同。第一个你需要一个 quicktime 播放器，第二个你需要一个支持 html5 的浏览器。

您不需要使用 PrimeFaces 标签；-) html 标签也可以。默认情况下，Android 支持 Afaik html5，但我不确定 iPhone/iPad。

# wcf - WCF 上的 Stackoverflow 异常（手动时它可以正常工作）

> ID：14563366
> 
> 赞同：1
> 
> 时间：2013-01-28T13:43:38.897
> 
> 标签：wcf, serialization, datacontract

我正在经历这个最奇怪的问题。我有我们通过 WCF 在客户端和服务器之间传递的 EF 实体。

当我手动序列化它们时，如下所示：

```
 var xmlSerializer = new DataContractSerializer(typeof(T), null, int.MaxValue, false, true, null);
        var textWriter = new StringWriter();
        var xmlTextWriter = new XmlTextWriter(textWriter);
        xmlSerializer.WriteObject(xmlTextWriter, source);
        return textWriter.ToString(); 
```

一切都好。但是当它们通过 wcf 线路传输时，我得到了 stackoverflow 异常。

我尝试调试源代码，但由于它是stackoverflow，所有本地人都不可用。

我没有想法，如果它手动序列化 - WCF 中可能有什么不同会导致它堆栈溢出？

# perl - 如何在 Windows 上安装 XML::LibXML？

> ID：14563367
> 
> 赞同：0
> 
> 时间：2013-01-28T13:43:44.143
> 
> 标签：perl, perl-module

如何在 Windows 上安装`perl`模块？`XML::LibXML`

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:44:49.180

如果您正在使用`ActiveState Perl`，请在 Windows 命令提示符下尝试此命令：

```
ppm install XML::LibXML 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:44:44.730

如果你已经安装`Perl`了`strawberry`，打开一个`cmd`，然后：

```
cpan XML::LibXML 
```

# c# - 在 asp.net 中从 Ajax POST 检索数据

> ID：14563372
> 
> 赞同：1
> 
> 时间：2013-01-28T13:43:58.887
> 
> 标签：c#, asp.net, jquery

我有一个像这样的ajax POST

```
 $(document).ready(function () {

    var pcontent = document.body.innerHTML;
    var url = new URI();

    $.ajax({
        url: url,
        type: "POST",
        data: { "pcontent": pcontent },
        success: function (data) {

            alert($(data).find(".right-panel").html());

        },
        complete: function () {

        },
        error: function (jqXHR, error, errorThrown) {
            if (jqXHR.status) {
                alert(jqXHR.responseText);
            } else {
                alert("Something went wrong");
            }
        }
    });
    return false;
}); 
```

我有点困惑如何检索我在后面的代码中发布的数据（pcontent）。实际上在我需要实现这个逻辑的特定类文件中。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:55:42.633

您必须创建一个控制器操作：

```
public class HomeController: {
     // model
     public class PDocument {
          public string pcontent {get;set;}
     }

     [HttpPost]
     public ActionResult SaveDocument(PDocument pcontent){
          // do something
          return new JsonResult() { Data = new { Success = true } };
     }
} 
```

JS：

```
$.ajax({
    url: "Home/SaveDocument",
    type: "POST",
    data: { "pcontent": pcontent} 
...}); 
```

**笔记：**

*   如果设置，您不需要在服务器上创建模型

    ```
    $.ajax({
        url: "Home/SaveDocument",
        type: "POST",
        data: pcontent
    });

    // server side

    public ActionResult SaveDocument(string pcontent){
        // do some thing
    } 
    ```

*   出于安全原因，您的 html 必须在调用 ajax 之前进行编码

如果您是 mvc 新手，那么这是一个很好的开始方式：[http ://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-controller](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-a-controller)

# php - 如何在没有显式链接的情况下访问文件？

> ID：14563376
> 
> 赞同：0
> 
> 时间：2013-01-28T13:44:01.453
> 
> 标签：php, file, .htaccess, permissions

我在我的服务器中发现，一些文件存储在 webroot 中，例如

```
example.com/files/longnamewithcode_1234293182391823212313231230812.pdf 
```

它们是为网络应用程序存储的，并在它们上包含敏感信息。

如果你访问`example.com/files`你会得到一个空的`index.html`，所以你不能直接扫描目录。无论如何，我对此感到担忧：我觉得它不安全，我想知道可以进行什么样的攻击来访问这些文件。我知道一些蛮力攻击是可能的，但是对于长代码名，我想这是一个不那么大的问题。

最后，我想说正确的方法是将文件存储在 web 文件夹之外并使用 PHP 返回它们，但我不确定我是否能够访问代码来更改它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:55:13.943

如果您必须让网络服务器从 webroot 访问文件，那么您真的不能让它比在文件名中使用足够量的熵更安全，但这仍然不能解释获得保留的用户简单地共享链接不知何故。

如果您想在 php 中实现权限检查，请查看`X-Sendfile`流行网络服务器上的各种实现，例如[mod_xsendfile](https://tn123.org/mod_xsendfile/) (apache)、[XSendfile](http://wiki.nginx.org/XSendfile) (nginx) 或[X-LIGHTTPD-send-file](http://redmine.lighttpd.net/projects/1/wiki/X-LIGHTTPD-send-file) (lighttpd)。这使您可以使用网络服务器来提供文件，基本上就像在验证访问用户后从 webroot 访问它一样有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:52:10.753

问题是

> 文件是否应该由用户自由访问？

如果是，不要太担心这些文件（只要它们不可写）。

如果否，即用户必须登录才能下载它们，将它们从可公开访问的文件夹中移出并深入到应用程序中。编写一个 php 脚本来管理文件的权限，即`/download?file_id=1`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:49:38.290

如果您希望阻止文件夹中的所有内容，您可以使用 .htaccess 文件来阻止所有连接。

尝试

```
deny from all 
```

在该目录的 .htaccess 文件中。这将拒绝对该目录中任何内容的所有访问，包括索引文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T13:47:45.833

您是否考虑过使用[.htaccess](http://en.wikipedia.org/wiki/Htaccess)文件来限制允许访问这些敏感文件的人员？你标记了它，但我不确定你为什么不使用它。=)

# javascript - 我应该使用哪个移动应用程序开发框架？

> ID：14563385
> 
> 赞同：-5
> 
> 时间：2013-01-28T13:44:24.497
> 
> 标签：javascript, android, iphone, html, css

我是一名网络开发人员。我知道 php html css 和一些 js。所以我一直在寻找一种制作原生应用程序的方法，发现有很多框架我可以使用，比如 Sencha、phonegap、appmobi 和 Titanium。它们似乎都相似，我很难决定使用哪个。我在 Windows 操作系统上工作，我没有 mac。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:47:50.033

在我看来，最强大的框架是 Titanium。但是在使用 html/css/js 时，PhoneGap 是一个不错的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:52:22.120

我测试了PhoneGap和Titanium，我会选择Titanium。对我来说，它似乎更容易使用，但就像其他所有框架一样，它很快就显示出它的局限性。然而，PhoneGap 允许您开发不难实现的本机插件（好人 PhoneGap 开发人员做了一个很好的文档）

不要忘记，像这 2 个框架只是将 Web 应用程序构建为原生应用程序（称为混合应用程序），与真正的原生应用程序相比，它们的速度非常慢。

有些人会建议你使用 MacOSX 虚拟机，但我建议你找一台二手的 macbook 或 mac mini。

此外，请记住分析您对应用程序的需求，并始终考虑用户体验。缓慢的应用程序并没有取得太大的成功。

# node.js - Schema.where().in 之后的数组顺序错误

> ID：14563392
> 
> 赞同：1
> 
> 时间：2013-01-28T13:44:44.743
> 
> 标签：node.js, mongodb, express, mongoose

看例子： http: [//pastie.org/5901177](http://pastie.org/5901177)

在该代码中，我创建了 3 个客户端并将它们推送到 user.clients 数组中。之后，我在 user.clients 数组的顶部又添加了一个客户端。所以当我这样做的时候

```
Client.where('_id').in(user.clients) 
```

我以错误的顺序吸引客户。请通过控制台查看此内容。有人知道我的代码有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:12:35.967

返回文档的顺序不受`$in`用于在 a 中标识它们的运算符的数组元素的顺序的影响`find`。

如果您想从`find`.

# ruby-on-rails - 如何通过koala gem获取fb的用户关系状态？

> ID：14563394
> 
> 赞同：0
> 
> 时间：2013-01-28T13:44:47.967
> 
> 标签：ruby-on-rails, facebook, koala

我已经安装了 gem`koala`和`omniauth`. 在我的`user`模型中

```
class User < ActiveRecord::Base
def self.from_omniauth(auth)
where(auth.slice(:provider, :uid)).first_or_initialize.tap do |user|
  user.provider = auth.provider
  user.uid = auth.uid
  user.name = auth.info.name
  user.image = auth.info.image
  user.oauth_token = auth.credentials.token
  user.oauth_expires_at = Time.at(auth.credentials.expires_at)
  user.save!
end
end

def facebook
  @facebook ||= Koala::Facebook::API.new(oauth_token)
end

end 
```

我已经获得了 facebook 的许可，但我仍然无法获得关系状态？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:07:49.273

尝试这个

```
@facebook.get_object('me',:fields=>"name,gender,relationship_status") 
```

# authentication - 没有用户服务的 Spring Security X.509 身份验证

> ID：14563397
> 
> 赞同：4
> 
> 时间：2013-01-28T13:44:57.153
> 
> 标签：authentication, spring-security, x509certificate, client-certificates, x509

我在我的 web 应用程序中使用 Spring Security (v3.1.3) 进行 X.509 身份验证。用户和角色存储在数据库中，但我实际上不需要这样做，因为客户端证书的 CN 符合“[ROLE] - [USERNAME]”模式，这意味着我已经拥有证书本身的用户名和角色. 那么如何在不费力的情况下消除数据库呢？我应该编写自己的用户服务实现，它将填充 UserDetails，还是有更优雅的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T14:08:54.930

是的，最简单的选择可能是编写一个自定义`AuthenticationUserDetailsService<PreAuthenticatedAuthenticationToken>`. 实现将是这样的：

```
UserDetails loadUserDetails(PreAuthenticatedAuthenticationToken token) {
    X509Certificate certificate = (X509Certificate[)token.getCredentials();

    // Extract what you want from the certificate
    ...

    // Create the user information
    UserDetails user = ...

    return user;
} 
```

您应该能够直接在`user-service-ref`命名空间属性 中使用对此 bean 的引用`<x509 user-service-ref='yourUserServiceBean' />`。

# delphi - 演示代码 indy 邮件服务器 (TIdsmtpserver)

> ID：14563401
> 
> 赞同：1
> 
> 时间：2013-01-28T13:45:16.730
> 
> 标签：delphi, indy10

我需要在更大的公司网络内发送电子邮件。通过 INDY smtp 组件发送邮件没问题，对我来说效果很好。关于配置的唯一缺点是我需要在源代码中共享公司邮箱和密码。如果我使用谷歌邮箱，那么每个有权访问源代码的人都可以使用这个帐户发送电子邮件。

我现在想知道是否有一个自己的电子邮件服务器（TIdSMTPserver）可以解决我的问题，因为我可以自己定义发送电子邮件的密码，我可以创建一个发送名称，如“ShortNewsUpdate.com”

我已经找到了带有演示文件链接的[INDY SMTP SERVER#1](https://stackoverflow.com/questions/8499524/using-indy-smtpserver)和 [INDY SMTP SERVER#2](https://stackoverflow.com/questions/8485203/creating-our-own-mail-server-using-delphi)，但是演示 zip 文件无法使用最新的 INDY 库（[http://indy.fulgan.com/ZIP/Indy10demo.zip](http://indy.fulgan.com/ZIP/Indy10demo.zip) ）编译)

是带有 Indy 10 的邮件服务器的新公共示例代码吗？

# vb.net - 如何将冒号之间的每个值分配给新变量？所以 08:10:20 将是 小时、分钟和秒

> ID：14563403
> 
> 赞同：-1
> 
> 时间：2013-01-28T13:45:23.497
> 
> 标签：vb.net, string

如何将冒号之间的每个值分配给新变量？所以 08:10:20 在 VB.NET 中会是小时、分钟和秒吗？

所以

*   小时数等于 8
*   分钟将等于 10
*   秒将等于 20

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:48:52.960

解析这样的分隔字符串的一般方法是执行以下操作：

```
Dim parts() As String = value.Split(":"c)
Dim hours As Integer = Integer.Parse(parts(0))
Dim minutes As Integer = Integer.Parse(parts(1))
Dim seconds As Integer = Integer.Parse(parts(2)) 
```

但是，如果您真正想要的是一个`Date`对象，那么您可以这样做：

```
Dim d As Date = Date.ParseExact(value, "HH:mm:ss", CultureInfo.InvariantCulture) 
```

“HH”表示 24 小时制。如果您想要 12 小时的时间，请使用小写字母 ("hh")。

# validation - 如何在 Tornado 中制作“易腐”链接

> ID：14563407
> 
> 赞同：0
> 
> 时间：2013-01-28T13:45:32.323
> 
> 标签：validation, tornado

我想创建一个仅在 24 小时内有效的链接，这是出于验证目的，所以我的问题很简单：

我如何使此链接仅在此时有效；我有一个提示：

1.  获取纪元时间。
2.  仅使用此值创建链接：something.com/time/1359380374
3.  当用户点击链接时，提取该值并进行比较。

我听说过哈希值？为什么？我们无法从哈希值中获取时间（反转过程）那么这是如何完成的呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T15:28:40.983

最好的办法是让用户发送电子邮件作为参数，然后查询数据库以查看他们的链接是否已过期：

**请求的链接查询**：`update users set locked_stamp = now();`

**请求网址**：`http://yourdomain.com/?email=useremail`

**查询**：`select true from users where email = '$email' and locked_stamp > now()-interval 1 hour and now() limit 1`

**结果**：您有一个人在一小时内通过电子邮件请求：`$email`。

* * *

我有一个使用 base64 编码时间戳的脚本......但它无论如何都不安全。

```
import tornado.web
import base64, re, time
import sys

def get_time():
    """Method used to get the current time in b64"""
    return base64.b64encode(str(int(time.mktime(time.localtime()))))

class WebHandler(tornado.web.RequestHandler):
    def get(self, _time):
        timecheck = base64.b64decode(_time)
        try:
            #require it to be all digits
            assert re.match('^\d+$', timecheck) is not None
            # Must be within 1 hour: greater then 1 hour ago and less then now
            assert int(timecheck) > int(time.mktime(time.localtime()))-3600 and \
                int(timecheck) < int(time.mktime(time.localtime()))
        except AssertionError:
            raise tornado.web.HTTPError(401,'Woops! Unauthorized.')
        else:
            self.write('Pass')

# Route
application = tornado.web.Application([
    (r"/([^\/]+)/?", WebHandler),
])

if __name__ == "__main__":
    application.listen(8889)
    tornado.ioloop.IOLoop.instance().start() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-15T08:46:35.663

与设置安全 cookie 的方式相同：

```
signed_message = self.create_signed_value(secret, name, value) 
```

然后你可以检查它：

```
message = self.decode_signed_value(secret, name, value, max_age_days=31, clock=None,min_version=None) 
```

Secret 应该是一个长随机数，但每个应用程序只需要一个。min_version 可以是 DEFAULT_SIGNED_VALUE_VERSION（当前为 2）。

不要推出自己的解决方案。使用图书馆中的那个。在那里。有用。

# java - Javascript 版本

> ID：14563412
> 
> 赞同：1
> 
> 时间：2013-01-28T13:45:54.860
> 
> 标签：java, javascript, versioning

我有一个基于 Java 的 webapp，它使用了大约 20 个 javascript 文件和 CSS。作为一种标准做法，我已经缩小并捆绑到提供大量性能的组中。

现在我希望通过计算每个文件的 MD5 来增加版本控制能力。我可以考虑在每个 HTML 文件中为每个资源添加一个标签 $$VERSION，然后用该特定资源的 MD5 替换 $$VERSION。

```
Ex: 

<style href="/css/editor.css?v=$$VERSION"></style>
<script src="/js/editor.js?v=$$VERSION"></script> 
```

然后有一个单独的实用程序来完成替换任务（为了性能，它可以缓存资源-> MD5 映射）

其他语言（如 Ruby）开箱即用地提供了此功能。但是没有针对基于 Java 的 Web 应用程序的解决方案。上述方法是否正确？如果不是，请指出其他选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:50:57.147

HTML 通常不像 xml。例如，缺少配额将没有问题。确实很难可靠地更改代码。

您可以通过添加使用默认的 jsp 解释器来处理 css 文件

```
<servlet-mapping>
  <servlet-name>jsp</servlet-name>
  <url>*.css</url>
</servlet-mapping>
<servlet-mapping>
  <servlet-name>jsp</servlet-name>
  <url>*.js</url>
</servlet-mapping> 
```

到**web.xml**。

所以你可以定义**/css/editor.css**并像这样重写你的版本

```
<jsp:forward page="/css/editor.css?v=${mybean.getHash('editor.css')}" /> 
```

# asp.net - 强制 ASP.Net MVC Bundle 以特定顺序呈现 javascript 文件

> ID：14563415
> 
> 赞同：15
> 
> 时间：2013-01-28T13:45:57.753
> 
> 标签：asp.net, .net-4.0, asp.net-mvc-4, bundle, bundling-and-minification

我正在开发一个 ASP.Net MVC 4 应用程序，并使用 Bundling 和 minifiction 来呈现样式和脚本文件。

我有一个脚本文件（**File A ），它在另一个文件（** **File B** ）中调用函数，当我使用
`@Scripts.Render()`方法时，它会在**File B**之前为**File A**`link`渲染标签，因此它会引发错误并且脚本无法正常工作。

 ****有没有办法强制`@Script.Render()`以特定顺序呈现`link`标签而不为每个文件使用单独的包？？？？

**编辑**

我正在使用`IncludeDirectory`方法将所有脚本文件包含在该文件夹中

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Add(new ScriptBundle("~/bundles/js").IncludeDirectory(
                    "~/Scripts/js",
                    "*.js"));
    }
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T14:07:54.933

默认情况下，捆绑将按字母顺序添加脚本。它将在已知库*中*移动并以正确的顺序添加它们（例如，它将首先放入 jQuery，然后是 jQuery-ui）。

最简单的方法是自己订购脚本。一种方法是将您的自定义脚本移至不同的文件夹，然后按照您想要的顺序将所有脚本添加到它们自己的包中：

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {
        bundles.Add(new ScriptBundle("~/bundles/js").IncludeDirectory(
                    "~/Scripts/js","*.js"));

        bundles.Add(new ScriptBundle("~/bundles/myScripts").Include(
            "~/Scripts/custom/scriptB.js",
            "~/Scripts/custom/scriptA.js"));
    }
} 
```

另一种选择是通配符。此选项仍然包括将您的自定义脚本移动到它们自己的文件夹，但只有一个包（[源](http://www.asp.net/mvc/tutorials/mvc-4/bundling-and-minification)）：*

```
public class BundleConfig
{
    public static void RegisterBundles(BundleCollection bundles)
    {       
        bundles.Add(new ScriptBundle("~/bundles/js").Include(
            "~/Scripts/*.js",
            "~/Scripts/custom/scriptB.js",
            "~/Scripts/custom/scriptA.js"));
    }
} 
```

还关于您的评论“是否有任何方法可以强制按特定顺序`@Script.Render()`呈现`link`标签，而无需为每个文件使用单独的包” - 请注意，单独的链接标签仅在调试模式下发生。在发布模式下部署后，将只有一个链接标签和一个文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T14:15:45.510

将您自己的订购者写成**Darin Dimitrov**回答这个问题：[如何指定明确的 ScriptBundle 包含顺序？](https://stackoverflow.com/questions/11979718/how-can-i-specify-an-explicit-scriptbundle-include-order)

```
public class MyBundleOrderer : IBundleOrderer
{
    public virtual IEnumerable<FileInfo> OrderFiles(BundleContext context, IEnumerable<FileInfo> files)
    {
        //any ordering logic here

        return files;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-17T10:22:07.180

查看 BundleCollection.FileSetOrderList 以了解捆绑文件的顺序。我发现了这篇关于它的博客文章：[http](http://weblogs.asp.net/imranbaloch/archive/2012/09/30/hidden-options-of-asp-net-bundling-and-minification.aspx) : //weblogs.asp.net/imranbaloch/archive/2012/09/30/hidden-options-of-asp-net-bundling-and-minification.aspx 很好地解释了它.

JQuery 排序的示例代码：

```
BundleFileSetOrdering bundleFileSetOrdering1 = new BundleFileSetOrdering("jquery");
bundleFileSetOrdering1.Files.Add("jquery.js");
bundleFileSetOrdering1.Files.Add("jquery-min.js");
bundleFileSetOrdering1.Files.Add("jquery-*");
bundleFileSetOrdering1.Files.Add("jquery-ui*");
bundleFileSetOrdering1.Files.Add("jquery.ui*");
bundleFileSetOrdering1.Files.Add("jquery.unobtrusive*");
bundleFileSetOrdering1.Files.Add("jquery.validate*");
bundles.FileSetOrderList.Add(bundleFileSetOrdering1); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-27T21:40:22.620

您应该考虑使用 Cassette [http://getcassette.net/](http://getcassette.net/) 它支持根据在每个文件中找到的脚本引用自动检测脚本依赖项。

如果您更喜欢坚持 MS Web 优化解决方案，但喜欢根据脚本参考安排脚本的想法，您应该阅读我的博文[http://blogs.microsoft.co.il/oric/2013/12/27/building-single -page-application-bundle-orderer/](http://blogs.microsoft.co.il/oric/2013/12/27/building-single-page-application-bundle-orderer/)****

# postscript - Postscript 文件语法查询

> ID：14563417
> 
> 赞同：2
> 
> 时间：2013-01-28T13:45:58.363
> 
> 标签：postscript

我有几个后记，它们基本上代表相同的图形信息，尽管不同。

我不理解语法，因此如果有人帮助理解以下（示例）行之间的区别，我将不胜感激 -

文件 1 中的行 -

```
0 0 0 1 scol  L N 232 3740 M 232 3475 I 232 3475 I 233 3475 I 233 3475 I 233 3740 I 233 3740 I 232 3740 I 232 3740 I C 

233 3475 M 550 3475 I 551 3475 I 551 3475 I 550 3475 I 233 3475 I 232 3475 I 232 3475 I 233 3475 I C 

233 3739 M 550 3739 I 551 3739 I 551 3740 I 550 3740 I 233 3740 I 232 3740 I 232 3739 I 233 3739 I C 
```

文件 2 中的行 -

```
0 0 0 1 scol  L N 232 3740 M 232 3475 I 232 3474 I 233 3474 I 233 3475 I 233 3740 I 233 3740 I 232 3740 I 232 3740 I C 

 L N 233 3474 M 550 3474 I 551 3474 I 551 3476 I 550 3476 I 233 3476 I 232 3476 I 232 3474 I 233 3474 I C 

 L N 233 3739 M 550 3739 I 551 3739 I 551 3740 I 550 3740 I 233 3740 I 232 3740 I 232 3739 I 233 3739 I C 
```

我猜其中一个是画线和另一个画矩形。可能完全错了...

任何帮助将非常感激。

此外，任何指向 postscript 语言语法的参考链接也会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:02:26.707

postscript 是一种编程语言。`scol,L,N,M,I,C, etc`是可能已在别处定义的功能。

在代码的前面看一下，你应该可以找到类似的东西

```
/M {moveto} def
/N {newpath} def 
```

然后开始阅读手册进行整理..

www.adobe.com/products/postscript/pdfs/PLRM.pdf

顺便说一句，我猜你的猜测是正确的。：

```
newpath x0 y0 moveto x1 y1 lineto x2 y2 lineto ... xn yn lineto stroke 
```

是一个非常典型的画线结构

# java - 从整数列表中获取随机且唯一的数字。数组法

> ID：14563419
> 
> 赞同：-2
> 
> 时间：2013-01-28T13:46:11.667
> 
> 标签：java, arrays

```
private int[] list = {1,2,3,4,5,6,7,8,9}; 
```

我应该使用什么代码从该列表中获取随机但唯一的数字。请为我提供最简单的方法，我是初学者。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T13:49:28.090

将您的声明更改为：

```
private Integer[] list = {1,2,3,4,5,6,7,8,9}; 
```

然后在你的类的任何方法中执行，因为变量是`private`：

```
List<Integer> l = Arrays.asList(list);
Collections.shuffle(l); 
```

这将随机使用所有列表，所以它会做你想做的事。

请注意，它也会影响您的原始数组`list`，因为`Arrays.asList`调用返回的列表将在内部使用您的数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T13:50:21.393

我建议您进行[洗牌](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#shuffle%28java.util.List%29)，然后按照它们在洗牌结果中的顺序选择数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:50:14.240

```
Integer[] list = {1,2,3,4,5,6,7,8,9};
Collections.shuffle(Arrays.asList(list)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T14:25:19.530

在这些场景中使用的一般算法是`index`返回`random number modulo length of the array`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T14:30:57.310

您可以尝试以下代码：

```
public static boolean empty(Integer[] list){
    for(int i = 0;i<list.length;i++){
        if(list[i] != null){
            return false;
        }
    }
    return true;
}

public static void main(String[] args){
    Integer[] list = {1,2,3,4,5,6,7,8,9};
    Random r = new Random();
    int index = 0;
    while(!empty(list)){
        index = r.nextInt(list.length);
        if(list[index] != null){
            System.out.println(list[index]);
            list[index] = null;
        }
    }
} 
```

这将在 0 和列表的最后一个索引之间生成一个随机整数，如果该索引不为空，则打印该索引处的项目，然后将该项目设为空。静态函数'empty'，检查数组中的每一项是否为空（即每一项都已被看到）。当 'empty' 返回 true 时，'while' 循环终止。使用“Integer”类型而不是“int”的原因是“int”变量不能为空，而“Integer”变量可以。

'empty' 函数一次搜索一个索引，如果找到非空索引，则立即返回 false。这是一种节省时间的机制，这意味着该函数不会执行任何不必要的搜索。如果该循环完全完成，那么我们知道没有找到非空条目，因此返回 true。

# jsf - “viewId /empForm.xhtml、操作 #{backingBean.submitForm} 和结果没有导航案例匹配”错误

> ID：14563422
> 
> 赞同：1
> 
> 时间：2013-01-28T13:46:17.113
> 
> 标签：jsf, navigation

当我单击表单中的命令按钮时，其操作由支持 bean 侦听，我得到了所需的输出，即我想要显示的文本 + 预先附加了以下消息：

```
No navigation case match for viewId /empForm.xhtml, action #{backingBean.submitForm} and outcome. 
```

我的 WEB-INF/lib 是空的，就像使用 Web-logic Server 执行一样。

# php - 存储过程：如何插入关系数据？

> ID：14563423
> 
> 赞同：1
> 
> 时间：2013-01-28T13:46:19.510
> 
> 标签：php, mysql, sql

如何在存储过程的相同功能中将插入的值 id 插入到另一个表中？

例如：

```
CREATE PROCEDURE p1(IN id_val INT, IN name_val VARCHAR(255))
    BEGIN
    DECLARE @iJobID [INT]
    SET @iJobID=(INSERT INTO test(id, name) VALUES(id_val, name_val));
    INSERT INTO vasu(id) VALUES(@iJobID); 
END; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:04:51.333

您可以使用`LAST_INSERT_ID()`获取最后插入的 ID 并将其设置在局部变量上。

```
DELIMITER $$

CREATE PROCEDURE p1 
(
    IN id_val INT, 
    IN name_val VARCHAR(255)
)
BEGIN

    INSERT INTO test(id, name) VALUES(id_val, name_val);
    SET @iJobID :=  LAST_INSERT_ID();
    INSERT INTO vasu(id) VALUES(@iJobID); 

END $$

DELIMITER ; 
```

*   [LAST_INSERT_ID()](http://dev.mysql.com/doc/refman/5.0/en/information-functions.html#function_last-insert-id)

# windows - 从 Windows 表单文件浏览器将参数传递给 powershell

> ID：14563424
> 
> 赞同：0
> 
> 时间：2013-01-28T13:46:25.750
> 
> 标签：windows, forms, powershell

我正在尝试将参数从 Windows 窗体对话框搜索框传递到另一个脚本，但似乎无法从用户选择文件时提取参数。该参数应该是用户想要安装的字体的完整文件位置。任何帮助将不胜感激，以下脚本是格式，参数需要通过的脚本位于底部。

```
cls
[void] [System.Reflection.Assembly]::LoadWithPartialName("System.Drawing") 
[void] [System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms")    

#Windows form settings
$objForm = New-Object System.Windows.Forms.Form 
$objForm.Icon = $Icon
$objForm.Text = "Font Installer"
$objForm.Size = New-Object System.Drawing.Size(350,350) 
$objForm.StartPosition = "CenterScreen"
$objForm.FormBorderStyle = "FixedDialog"
$objForm.BackgroundImage = $Image
$objForm.BackgroundImageLayout = "None"

#Browse for file
$d = New-Object Windows.Forms.OpenFileDialog
$d.initialDirectory = $initialDirectory
$d.filter = "All files (*.*)| *.*"
$d.ShowHelp = $true
$d.InitialDirectory = "c:\"
$d.Title = "Choose your Font"
$d.FileName
$d.filter = " Font Files (*.ttf; *.fon; *.fnt; *.ttc; *.otf; *.mmm; *.pbf; *.pfm)| *.ttf;     *.fon; *.fnt; *.ttc; *.otf; *.mmm; *.pbf; *.pfm"
#Browse Button
$button1 = New-Object system.Windows.Forms.Button
$button1.Text = "Select Font"
$button1.Add_Click({$d.ShowDialog( )})
$button1.Location = New-Object System.Drawing.Size(100,120)
$button1.Size = New-Object System.Drawing.Size(150,23)
$objForm.controls.add($button1)

#Install Button
$run = New-Object System.Windows.Forms.Button
$run.Location = New-Object System.Drawing.Size(100,170)
$run.Size = New-Object System.Drawing.Size(150,100)
$run.Text = "Install"
$Font1 = New-Object System.Drawing.Font("Arial Black",19,    [System.Drawing.FontStyle]::regular)
$run.Font = $Font1
$run.BackColor ="green"
#invoke expression - open install script and sent the parameter to it
$run.Add_Click({ 
Invoke-Expression "& `"c:\Users\Khussain\Desktop\Fonts\scripts\testparam.ps1`"        $d.filename";

})
$objForm.Controls.Add($run)

$objForm.Add_Shown({$objForm.Activate()})
[void] $objForm.ShowDialog() 
```

应该获取参数的脚本名为 testparam.ps1，代码如下：

```
param(
    [string] $path = ""
)
Write-Host "this is a test the parameter is $path" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:55:03.810

试试这个：

```
$run.Add_Click({ c:\Users\Khussain\Desktop\Fonts\scripts\testparam.ps1 $($d.filename);}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:58:58.693

尝试将添加处理程序更改为：

```
$run.Add_Click({ 
    if($d.filename)
    {
        $path = $d.filename
        c:\Users\Khussain\Desktop\Fonts\scripts\testparam.ps1 "'$path'"
    }
}) 
```

# html - 推送通知 HTML5

> ID：14563428
> 
> 赞同：2
> 
> 时间：2013-01-28T13:46:43.183
> 
> 标签：html, cordova

我正在构建一个针对 Android 和 iOS 平台的 HTML5/Phonegap 网络应用程序。我正在使用一种工具来获取我的 HTML5 代码并将我的网络应用程序转换为适用于 Android 或 iOS 的本机应用程序。现在我想在我的网络应用程序推送通知中包含，所以当服务器上发生某些事情时，应用程序将触发本机通知。我可以使用哪些免费解决方案来做到这一点？我读到了 Pushwoosh 和 UrbanAirship，但似乎两者都不是免费的。

谢谢！

# android - 如何在 viewpager 中控制子视图的焦点

> ID：14563432
> 
> 赞同：0
> 
> 时间：2013-01-28T13:47:16.243
> 
> 标签：android, android-viewpager

我将在 Android 上拥有一些类似 GUI 的 Windows 手机。

我使用 ViewPager 来实现页面切换效果。除了焦点发生变化外，它运作良好。

如下图，当我在第 1 页的 A1/B2 焦点上按右键时，当前页面应该切换到第 2 页，焦点应该在 A2 上。

**所有矩形的大小和位置都由用户放置，这意味着我不能对它们进行硬编码。**

ViewPager 很好地处理了页面切换，但是当新页面进入时焦点总是在右上角。

那么，问题是有没有简单的方法来处理焦点？或者我必须通过预聚焦坐标自己计算焦点？谢谢！

![在此处输入图像描述](../Images/66ad7a103a2bef470d43002b3c85a347.png)

BTW：同样的，当我按右键时，焦点应该改变如下：

```
C1 --> B2
D1 --> C2 
```

而当我按下左键时，焦点应该改变如下：

```
A2 --> A1/B2 (both are OK)
B2 --> C1
C2 --> D1
D2 --> D1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T02:27:48.733

我终于找到了答案并在这里分享。

FocusFinder.getInstance().findNextFocusFromRect 支持负参数，所以我们需要用 rect(A1) - (width,0) 和 rect(A2) 调用它。

# java - JTree 将节点的背景设置为不透明

> ID：14563433
> 
> 赞同：9
> 
> 时间：2013-01-28T13:47:19.270
> 
> 标签：java, swing, jtree, treenode, renderer

请看一下SSCCE。如何使未选择的树节点的背景透明。此时未选中节点的背景为白色。但是，如果未选中，我的单元格渲染器应该将其绘制为非透明（选中时为绿色......它的作用）。最后，我希望未选择的节点只是没有背景的文本，因为 SSCCE 中的红色区域在我的应用程序中具有渐变填充。

```
 import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Component;
import java.awt.Container;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTree;
import javax.swing.tree.DefaultMutableTreeNode;
import javax.swing.tree.DefaultTreeCellRenderer;

public class SimpleTree extends JFrame
{
    public static void main(final String[] args)
    {
        new SimpleTree();
    }

    public SimpleTree()
    {
        super("Creating a Simple JTree");
        final Container content = this.getContentPane();
        content.setBackground(Color.RED);
        final Object[] hierarchy = { "javax.swing", "javax.swing.border", "javax.swing.colorchooser", "javax.swing.event", "javax.swing.filechooser", new Object[] { "javax.swing.plaf", "javax.swing.plaf.basic", "javax.swing.plaf.metal", "javax.swing.plaf.multi" }, "javax.swing.table",
                        new Object[] { "javax.swing.text", new Object[] { "javax.swing.text.html", "javax.swing.text.html.parser" }, "javax.swing.text.rtf" }, "javax.swing.tree", "javax.swing.undo" };
        final DefaultMutableTreeNode root = this.processHierarchy(hierarchy);
        final JTree tree = new JTree(root);
        tree.setOpaque(false);
        tree.setCellRenderer(new MyCellRenderer());
        final JScrollPane scroller = new JScrollPane(tree);
        scroller.getViewport().setOpaque(false);
        scroller.setOpaque(false);
        content.add(scroller, BorderLayout.CENTER);
        this.setSize(275, 300);
        this.setVisible(true);
    }

    /**
     * Small routine that will make node out of the first entry in the array,
     * then make nodes out of subsequent entries and make them child nodes of
     * the first one. The process is repeated recursively for entries that are
     * arrays.
     */

    private DefaultMutableTreeNode processHierarchy(final Object[] hierarchy)
    {
        final DefaultMutableTreeNode node = new DefaultMutableTreeNode(hierarchy[0]);
        DefaultMutableTreeNode child;
        for (int i = 1; i < hierarchy.length; i++)
        {
            final Object nodeSpecifier = hierarchy[i];
            if (nodeSpecifier instanceof Object[]) // Ie node with children
                child = this.processHierarchy((Object[]) nodeSpecifier);
            else
                child = new DefaultMutableTreeNode(nodeSpecifier); // Ie Leaf
            node.add(child);
        }
        return (node);
    }

    public class MyCellRenderer extends DefaultTreeCellRenderer
    {
        @Override
        public Component getTreeCellRendererComponent(final JTree tree, final Object value, final boolean sel, final boolean expanded, final boolean leaf, final int row, final boolean hasFocus)
        {
            final Component ret = super.getTreeCellRendererComponent(tree, value, sel, expanded, leaf, row, hasFocus);

            final DefaultMutableTreeNode node = ((DefaultMutableTreeNode) (value));

            this.setText(value.toString());
            if (sel)
            {
                this.setOpaque(true);
                this.setBackground(Color.GREEN);

            }
            else
            {
                this.setOpaque(false);
                this.setBackground(null);
            }
            return ret;
        }
    }
} 
```

![在此处输入图像描述](../Images/3c06c75ce761146c14677aee242e4ed2.png)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-28T14:05:25.147

您应该覆盖[`getBackgroundNonSelectionColor`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultTreeCellRenderer.html#getBackgroundNonSelectionColor%28%29),[`getBackgroundSelectionColor`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/DefaultTreeCellRenderer.html#getBackgroundSelectionColor%28%29)和[`getBackground`](http://docs.oracle.com/javase/7/docs/api/java/awt/Component.html#getBackground%28%29)of`DefaultTreeCellRenderer`并返回适当的值，如下所示：

```
public class MyCellRenderer extends DefaultTreeCellRenderer {

    @Override
    public Color getBackgroundNonSelectionColor() {
        return (null);
    }

    @Override
    public Color getBackgroundSelectionColor() {
        return Color.GREEN;
    }

    @Override
    public Color getBackground() {
        return (null);
    }

    @Override
    public Component getTreeCellRendererComponent(final JTree tree, final Object value, final boolean sel, final boolean expanded, final boolean leaf, final int row, final boolean hasFocus) {
        final Component ret = super.getTreeCellRendererComponent(tree, value, sel, expanded, leaf, row, hasFocus);

        final DefaultMutableTreeNode node = ((DefaultMutableTreeNode) (value));
        this.setText(value.toString());
        return ret;
    }
} 
```

这将产生：

![在此处输入图像描述](../Images/8dec265c8b1750a338ac6d6bae3d82ad.png)

**其他建议：**

*   [在Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上创建和操作 Swing 组件。
*   不要不必要地扩展`JFrame`，而是创建一个实例并使用它。
*   不要调用`setSize`，`JFrame`而是使用正确的`LayoutManager`和/或覆盖`getPreferredSize()`并`pack()`在`JFrame`设置为可见之前但在添加所有组件之后调用。
*   请记住`JFrame#setDefaultCloseOperation`使用`DISPOSE_ON_CLOSE`or `EXIT_ON_CLOSE`(`DISPOSE_XXX`通常首选，除非使用`Timer`s 因为这将允许`main(String[] args)`在 Gui 关闭后继续执行)。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T13:57:18.317

为避免背景重新填充，只需放置`UIManager.put("Tree.rendererFillBackground", false);`before`new SimpleTree();`或 after `super("Creating a Simple JTree");`。

# mysql - 将mysql输出从行转换为列

> ID：14563436
> 
> 赞同：2
> 
> 时间：2013-01-28T13:47:23.997
> 
> 标签：mysql, sql, pivot

我有 MySQL 查询：

```
SELECT
transporttype,
concat(MONTHNAME(STR_TO_DATE(month, '%m')), ' ', year) AS `month`,
count(loadnumber) AS loads
FROM v2ReportingTable
WHERE (transporttype not in ('Extrusions-LongDistance','Extrusions-Shuttle') and urgent='no')
GROUP BY (concat(MONTHNAME(STR_TO_DATE(month, '%m')),' ',year)),transporttype
ORDER BY (concat(MONTHNAME(STR_TO_DATE(month, '%m')),' ',year)), transporttype 
```

产生以下输出：

![在此处输入图像描述](../Images/bf2f01a50c9da27521e6fd6319d731fc.png)

我想以列格式显示结果，如下所示： ![在此处输入图像描述](../Images/59406db97f471312494ebe37b4566b2a.png)

如何修改我的查询以显示结果。

一如既往地感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:52:33.683

```
SELECT  `month`,
        MAX(CASE WHEN transporttype = 'Inbound' THEN loads ELSE NULL END) `Inbound`,
        MAX(CASE WHEN transporttype = 'LocalGauteng' THEN loads ELSE NULL END) `LocalGauteng`,
        MAX(CASE WHEN transporttype = 'LongDistance' THEN loads ELSE NULL END) `LongDistance`,
        MAX(CASE WHEN transporttype = 'Shuttle-company1' THEN loads ELSE NULL END) `Shuttle-company1`,
        MAX(CASE WHEN transporttype = 'Shuttle-company2' THEN loads ELSE NULL END) `Shuttle-company2`,
        MAX(CASE WHEN transporttype = 'stores' THEN loads ELSE NULL END) `stores`,
        MAX(CASE WHEN transporttype = 'returns' THEN loads ELSE NULL END) `returns`,
        MAX(CASE WHEN transporttype = 'localkzn' THEN loads ELSE NULL END) `localkzn`
FROM
    (
        SELECT  transporttype,
                CONCAT(MONTHNAME(STR_TO_DATE(month, '%m')), ' ', year) AS `month`,
                COUNT(loadnumber) AS loads
        FROM    v2ReportingTable
        WHERE   transporttype not in ('Extrusions-LongDistance','Extrusions-Shuttle') AND
                urgent='no'
        GROUP BY (concat(MONTHNAME(STR_TO_DATE(month, '%m')),' ',year)), transporttype
    ) aa
GROUP BY `month` 
```

# javascript - 如何防止（按住刷新按钮）DoS 攻击

> ID：14563438
> 
> 赞同：4
> 
> 时间：2013-01-28T13:47:27.317
> 
> 标签：javascript, jsp, servlets

我的网站非常动态，它从数据库中收集数据。当我在测试时，我按下了刷新键并按住了一段时间，服务器宕机了。（这是一个简单的 DoS 攻击）。如何阻止用户继续点击刷新按钮。谁能告诉我解决方案。像 gmail 一样，转到 gmail 帐户并`F5`按住它一段时间。Gmail 将显示此消息

**“很抱歉，您的 Gmail 帐户暂时不可用。对于给您带来的不便，我们深表歉意，并建议您过几分钟再试一次。您可以查看应用程序状态仪表板了解服务的当前状态。”**

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-20T21:09:48.340

你必须使用 mod_evasive 或 mod_qos 或 mod_security
我更喜欢 mod_security [modsecurity_crs_11_dos_protection](https://github.com/SpiderLabs/owasp-modsecurity-crs/blob/master/experimental_rules/modsecurity_crs_11_dos_protection.conf)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:31:06.593

为什么不使用计数器方法。增加它直到在一个小间隔内达到阈值，如果是，则阻止访问。

它的 JSP 将是这样的

```
 <% 
        int refresh;
        if(session.getAttribute("pageRefresh")==null)
             refresh=0;
        else
            refresh = (Integer)session.getAttribute("pageRefresh") + 1;

       session.setAttribute("pageRefresh", refresh); 

       session.setMaxInactiveInterval(10000);

       if (refresh>100)
       {
           //error message or black list client
       }
%> 
```

# networkx - 使用 NetworkX 计算特征向量中心性

> ID：14563440
> 
> 赞同：2
> 
> 时间：2013-01-28T13:47:33.433
> 
> 标签：networkx, eigenvector

我正在使用 NetworkX 库来处理一些中小型未加权、无符号、有向图，这些图表示 Web 2.0 站点的使用情况（最小的图：不到两打节点，最大的：几千个）。我要计算的一件事是特征向量中心性，如下所示：

```
>>> eig = networkx.eigenvector_centrality(my_graph)
>>> eigs = [(v,k) for k,v in eig.iteritems()]
>>> eigs.sort()
>>> eigs.reverse() 
```

但是，这会产生意想不到的结果：具有 0 出度但从非常中心的节点接收向内弧的节点出现在具有 0.0 特征向量中心度的列表的最后（不是数学家，我可能对此感到困惑，但我不认为向外的弧应该对节点对有向图的中心性有任何影响）。在调查这些结果的过程中，我从文档中注意到 NetworkX 默认计算“正确的”特征向量中心性；出于好奇，我决定通过推荐的方法计算“左”特征向量中心性，即在计算特征向量中心性之前反转图形（[参见 Networkx 文档](http://networkx.lanl.gov/reference/generated/networkx.algorithms.centrality.eigenvector_centrality.html#networkx.algorithms.centrality.eigenvector_centrality)）。令我惊讶的是，我得到了完全相同的结果：每个节点都被计算为具有与以前完全相同的特征向量中心性。我认为这应该是一个非常不可能的结果（[参见 Wikipedia 文章](http://en.wikipedia.org/wiki/Eigenvalues_and_eigenvectors#Left_and_right_eigenvectors)），但我已经用我正在使用的所有图表复制了它。谁能向我解释我做错了什么？

注意：使用 PageRank 算法的 NetworkX 实现提供了我所期望的结果，即从非常中心的节点接收向内弧的节点即使出度为 0 也具有高中心性。PageRank 通常被认为是特征向量中心性的变体（[参见维基百科文章](http://en.wikipedia.org/wiki/PageRank#Damping_factor)）。

编辑：根据 Aric 的请求，我已经包含了一些数据。这是我最小的图表的匿名版本。（如果问题特定于我的图表结构，我无法发布玩具数据。）在我的机器上运行下面的代码（使用 Python 2.7）似乎显示（a）每个节点的左右特征向量中心性是相同，并且 (b) 出度为 0 的节点也*总是*具有特征向量中心性 0，即使它们在整个图形中非常中心（例如节点 61）。

```
import networkx

anon_e_list = [(10, 59), (10, 15), (10, 61), (15, 32), (16, 31), (16, 0), (16, 37), (16, 54), (16, 45), (16, 56), (16, 10), (16, 8), (16, 36), (16, 24), (16, 30), (18, 34), (18, 36), (18, 30), (19, 1), (19, 3), (19, 51), (19, 21), (19, 40), (19, 41), (19, 30), (19, 14), (19, 61), (21, 64), (26, 1), (31, 1), (31, 3), (31, 51), (31, 62), (31, 33), (31, 40), (31, 23), (31, 30), (31, 18), (31, 13), (31, 46), (31, 61), (32, 3), (32, 2), (32, 33), (32, 6), (32, 7), (32, 9), (32, 15), (32, 17), (32, 18), (32, 23), (32, 30), (32, 5), (32, 27), (32, 34), (32, 35), (32, 38), (32, 40), (32, 42), (32, 43), (32, 46), (32, 47), (32, 62), (32, 56), (32, 57), (32, 59), (32, 64), (32, 61), (33, 0), (33, 31), (33, 2), (33, 7), (33, 9), (33, 10), (33, 12), (33, 64), (33, 14), (33, 46), (33, 16), (33, 17), (33, 18), (33, 19), (33, 20), (33, 21), (33, 22), (33, 23), (33, 30), (33, 26), (33, 28), (33, 11), (33, 34), (33, 32), (33, 35), (33, 37), (33, 38), (33, 39), (33, 41), (33, 43), (33, 45), (33, 24), (33, 47), (33, 48), (33, 49), (33, 58), (33, 62), (33, 53), (33, 54), (33, 55), (33, 60), (33, 57), (33, 59), (33, 5), (33, 52), (33, 63), (33, 61), (34, 58), (34, 4), (34, 33), (34, 20), (34, 55), (34, 28), (34, 11), (34, 64), (35, 18), (35, 60), (35, 61), (37, 34), (37, 48), (37, 49), (37, 18), (37, 33), (37, 39), (37, 21), (37, 42), (37, 26), (37, 59), (37, 44), (37, 12), (37, 11), (37, 61), (41, 3), (41, 50), (41, 18), (41, 52), (41, 33), (41, 54), (41, 19), (41, 22), (41, 5), (41, 46), (41, 25), (41, 44), (41, 13), (41, 62), (41, 29), (44, 32), (44, 3), (44, 18), (44, 33), (44, 40), (44, 41), (44, 30), (44, 23), (44, 61), (50, 17), (50, 37), (50, 62), (50, 41), (50, 25), (50, 43), (50, 27), (50, 28), (50, 29), (54, 33), (54, 41), (54, 10), (54, 59), (54, 63), (54, 61), (58, 62), (58, 46), (59, 31), (59, 34), (59, 30), (59, 49), (59, 18), (59, 33), (59, 9), (59, 10), (59, 8), (59, 13), (59, 24), (59, 61), (60, 34), (60, 16), (60, 35), (60, 50), (60, 4), (60, 6), (60, 59), (60, 24), (63, 40), (63, 33), (63, 30), (63, 61), (63, 53)]

my_graph = networkx.DiGraph()
my_graph.add_edges_from(anon_e_list)
r_eig = networkx.eigenvector_centrality(my_graph)
my_graph2 = my_graph.reverse()
l_eig = networkx.eigenvector_centrality(my_graph2)

for nd in my_graph.nodes():
    print 'node: {} indegree: {} outdegree: {} right eig: {} left eig: {}'.format(nd,my_graph.in_degree(nd),my_graph.out_degree(nd),r_eig[nd],l_eig[nd]) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-31T13:46:10.923

这两行

```
my_graph2 = my_graph.copy()
my_graph2.reverse() 
```

应该替换为

```
my_graph2 = my_graph.reverse() 
```

因为 reverse() 方法默认返回图形的副本。

# primefaces - 在 DataTable 组件中编辑日期字段时的错误

> ID：14563446
> 
> 赞同：0
> 
> 时间：2013-01-28T13:47:48.207
> 
> 标签：primefaces

使用可编辑数据表中的日历组件编辑日期字段时，我遇到了一个奇怪的错误。为了解释，我需要给你看一些图片。

首先，这是我正在使用的实际页面：

![基本图形用户界面](../Images/5a147d8b4785922512c0225b472590de.png)

现在，让我们将列表中的日期 1 更改为 2 月 13 日，然后单击“确定”。

![日期正在更改](../Images/64e890e699ba7524e03ec707cb5d1fd3.png)

如您所见，表格发生了变化，但该行采用了另一行的数据。

![日期错误！](../Images/36962c636ea1b422370bee767601230e.png)

除了在 GUI 中，更新就很好了，如果我们重新加载页面，数据库中的日期已经更新。这是页面刷新后表格的样子：

![日期在数据库中是正确的](../Images/3d1fdaac8f4535a54396af129493cdce.png)

我已经把代码从里到外翻了一遍，试图解决这个错误，我开始怀疑这是否是 PrimeFaces 本身的错误。我已经逐步完成了整个工作流程并得出结论，支持 ArrayList 始终具有正确的值。我在想这可能与我在从数据库中获取列表和使用 DataTable 的 sortBy 属性时对列表进行排序有关。然而，在禁用两者之后，该错误继续表现出来。

这是我的页面代码。谁能看到我做错了什么？如果是这样，你就是我的英雄 =)

```
<ui:composition template="/WEB-INF/standard-page-template.xhtml">
<ui:define name="title">Change Dates</ui:define>
<ui:define name="content">

    <p:panel header="Change dates" style="width:760px">
        <h:form>

            <p:panel>
                    Just the search stuff here...
            </p:panel>
            <p:panel header="Search">
                    <h:panelGrid columns="1">
                    <p:dataTable id="listDatesTable" value="#{view.dateWrappers}" var="wrapper"
                                 rowIndexVar="index" editable="true"
                                 emptyMessage="Search for an ID above">

                        <p:ajax event="rowEdit" listener="#{changePublishDateView.changeDate}"/>

                        <p:column headerText="Dragning" width="90">
                            <h:outputText value="#{wrapper.id}"/>
                        </p:column>

                        <p:column headerText="Beskrivning" width="180">
                            <h:outputText value="#{wrapper.description}"/>
                        </p:column>

                        <p:column headerText="Distribution" width="100">
                            <h:outputText value="#{wrapper.id2}"/>
                        </p:column>

                        <p:column headerText="Publiceringstid" width="170" styleClass="#{view.duplicateDateInRow(wrapper)}">
                            <p:cellEditor>
                                <f:facet name="output">
                                    <h:outputText value="#{wrapper.newhDate}">
                                        <f:convertDateTime pattern="yyyy-MM-dd HH:mm"/>
                                    </h:outputText>
                                </f:facet>
                                <f:facet name="input">
                                    <p:calendar
                                            mindate="#{view.minDate}" stepMinute="30" minHour="8" maxHour="22"
                                            pattern="yyyy-MM-dd HH:mm" value="#{wrapper.newDate}"/>
                                </f:facet>
                            </p:cellEditor>
                        </p:column>

                        <p:column width="50">
                            <p:rowEditor/>
                        </p:column>
                    </p:dataTable>
                </h:panelGrid>
            </p:panel>
        </h:form>
    </p:panel>
</ui:define> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T08:56:18.283

事实证明，这个错误是由于各个行中的数据大部分相同。

解决方案：在数据表上设置 rowKey 属性，设置为日期字段。现在无论有没有排序，它都可以正常工作。

[http://www.developer.am/primefaces/?page=RowKey](http://www.developer.am/primefaces/?page=RowKey)

# c# - T4Toolbox 没有生成文件扩展名

> ID：14563447
> 
> 赞同：0
> 
> 时间：2013-01-28T13:47:48.610
> 
> 标签：c#, code-generation, t4, t4-toolbox

## 我正在使用 T4 工具箱生成 cs 文件。但结果会生成正确的 C# 文件，但是......没有扩展名。什么问题？

```
<#@ template language="C#" hostspecific="true" debug="True" #>
<#@ output extension="txt" #>
<#@ include file="T4Toolbox.tt" #>
<#@ include file="$(ProjectDir)StoredProcedures.ttinclude" #>
<#@ include file="DB\SpGenerator.tt" #>
<#
/*
    <auto-generated>
    Do not change files!!
    </auto-generated>
*/
    var generator = new GeneratorSp();
    generator.tableName = ListOfTables();
    generator.Run();

#>

<#@ IntelliSenseLanguage processor="tangibleT4Editor" language="C#" #>
<#@ include file="SpTemplate.tt" #>
<#+ 
public class GeneratorSp : Generator
{
    public string[] tableName;
    protected override void RunCore()
    {
        var _template = new SpTemplate();
        foreach(var sp in tableName)
        {
            _template.SpName = sp;          
            _template.RenderToFile(sp); 
        }
    }
}
#>

<#@ IntelliSenseLanguage processor="tangibleT4Editor" language="C#" #>
<#@ Assembly Name="System.Core" #>
<#@ import namespace="System" #>
<#@ import namespace="System.Linq" #>
<#@ import namespace="System.Data" #>
<#@ include file="DataAccess.ttinclude"  #>
<#@ include file="$(ProjectDir)ModelConnectionString.ttinclude"  #>
<#+
// <copyright file="SpTemplate.tt" company="">
//  Copyright © . All Rights Reserved.
// </copyright>

public class SpTemplate : Template
{
    public string SpName;
    public override string TransformText()
    {
        string CONN_STRING = ConnectionString();

        var data = new DataAccess(CONN_STRING);
        var sp   = SpName;
        var pars = data.ParametersDesc(sp);     
        string methodParameters = data.CreateParametersDesc(sp);
#>
namespace B2BSoft.Services.Data.Generated
{
    public  static partial class StoredProcedures
    {
        public static  <#= sp #>_Result <#= sp #>(<#= methodParameters #>)
        {
            return new <#= sp #>_Result();
        }
    }
}
<#+  
        return this.GenerationEnvironment.ToString();
    }
}
#> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:53:01.953

将文件名（包括其扩展名）传递给 Template.RenderToFile 方法：

```
_template.RenderToFile("FileName.sql"); 
```

# java - 扩展HSQLDB的索引结构

> ID：14563451
> 
> 赞同：0
> 
> 时间：2013-01-28T13:47:59.860
> 
> 标签：java, hsqldb

**你认为HSQLDB 2.0的索引结构可以扩展吗？**

我已经看到 HSQLDB 实现了 AVL 树，但我不确定是否可以通过例如在 HSQLDB 代码中实现 R 树来扩展它。HSQLDB 中的索引结构是否已经物化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:11:57.700

可以为 HSQLDB 开发索引的 R-tree 实现。但要使用此类索引，还需要额外的查询语法。

CACHED 表（基于磁盘的表）的索引结构是持久的。

# visual-studio-2010 - VS2010 复制行的热键名称

> ID：14563453
> 
> 赞同：0
> 
> 时间：2013-01-28T13:48:03.567
> 
> 标签：visual-studio-2010

在 Visual Studio 2010 中，用于在键盘编辑器中复制一行的热键绑定**名称是什么？**我想改变它

```
 CTRL + C / CTRL + V 
```

至

```
CTRL + SHIFT + DOWN 
```

然后我可以快乐和满足:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:38:51.810

这可以通过创建`Macro`. 若要创建宏，请按照下列步骤操作。

1.  转到宏资源管理器（工具->宏->宏资源管理器）
2.  右键单击`My Macros`并单击`New Module`。
3.  在创建的模块中复制并粘贴代码。

    ```
    Sub DuplicateLine()
      Dim line As String
      DTE.ActiveDocument.Selection.StartOfLine(0)
      DTE.ActiveDocument.Selection.EndOfLine(True)
      line = DTE.ActiveDocument.Selection.Text
      DTE.ActiveDocument.Selection.EndOfLine()
      DTE.ActiveDocument.Selection.NewLine()
      DTE.ActiveDocument.Selection.StartOfLine(0)
      DTE.ActiveDocument.Selection.Text = line
    End Sub 
    ```

现在只需为其分配一个键盘快捷键：

1.  转到工具->选项
2.  在环境下，单击键盘
3.  在“Show Commands Containing”文本框中，输入“duplicate”（这取决于您为模块提供的名称。）
4.  从“使用新的快捷方式”列表中选择“文本编辑器”
5.  在“按下快捷键”文本框中设置焦点，然后点击您希望使用的键盘上的组合（在我的情况下为 Ctrl+Shift+D）
6.  点击“分配”按钮
7.  点击确定按钮

**来源：** [http://www.herrodius.com/blog/52](http://www.herrodius.com/blog/52)

# java - 用于创建 QR 码的库

> ID：14563455
> 
> 赞同：-1
> 
> 时间：2013-01-28T13:48:06.870
> 
> 标签：java, python, qr-code, libs

我需要一个二维码库来只编码数值。只有数字值的 QR 码最多可以存储 7089 个字符，字母数字 - 4296。据我搜索，我可以找到能够仅编码字母数字或二进制值的库。除了一个 - BarcodeLib：[http](http://www.barcodelib.com/) ://www.barcodelib.com/这真的很昂贵。

所以我需要免费的库，它只能编码数字数据并存储多达 7089 位数字。最有用的是 java 库，但也欢迎使用 python 或 .net 库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:05:13.130

据我所知，QR Code 库起源于日本，是 C++ 的，在 Github 中寻找 Kuapay IOS 源代码的副本......包中嵌入的是一个包含 6 个源代码的 QRDraw 文件夹，

如果您查看标头 (QR_Encode.h)，您感兴趣且最终以某种方式调用的那个是 QR_Encode，您可以看到以下内容：

```
===============
// åÎÇËí˘ê≥ÉåÉxÉã
   #define QR_LEVEL_L   0
   #define QR_LEVEL_M   1
   #define QR_LEVEL_Q   2
   #define QR_LEVEL_H   3

 // ÉfÅ[É^ÉÇÅ[Éh
    #define QR_MODE_NUMERAL  0
    #define QR_MODE_ALPHABET    1
    #define QR_MODE_8BIT     2
    #define QR_MODE_KANJI    3

// ÉoÅ[ÉWÉáÉì(å^î‘)ÉOÉãÅ[Év
  #define QR_VRESION_S  0 // 1 Å` 9
  #define QR_VRESION_M  1 // 10 Å` 26
  #define QR_VRESION_L  2 // 27 Å` 40

  #define MAX_ALLCODEWORD    3706 
      // ëçÉRÅ[ÉhÉèÅ[Éhêîç≈ëÂíl
  #define MAX_DATACODEWORD 2956 
     // ÉfÅ[É^ÉRÅ[ÉhÉèÅ[Éhç≈ëÂíl(ÉoÅ[ÉWÉáÉì40-L)
  #define MAX_CODEBLOCK   153 
     //  ÉuÉçÉbÉNÉfÅ[É^ÉRÅ[ÉhÉèÅ[Éhêîç≈ëÂíl(ÇqÇrÉRÅ[ÉhÉèÅ[ÉhÇä‹Çﬁ)
  #define MAX_MODULESIZE      177 
      // àÍï”ÉÇÉWÉÖÅ[Éãêîç≈ëÂíl

  #define QR_MARGIN 4 
```

注释是日文的，所以根据我在源代码中的理解，需要一段时间才能理解

您通过以下命令调用编码过程：

```
CQR_Encode encoder;
encoder.EncodeData(1, 0, true, -1, str); 
```

（1实际上是指QR级别（Reed Solomon纠错级别），在这种情况下M（RS纠错）0是QR版本S（小尺寸？）true是自动扩展的布尔值，-1是一个不起眼的参数称为 masking_no ，我仍然没有弄清楚它如何适合所有这些，而 str 是您要创建到 QR 码中的字符串。

从源代码中，它实际上评估字符串以检查它是数字、字母（全部大写）、汉字还是 8 位（混合大写），然后决定最大长度和编码/压缩方法。

因此，您的问题的答案是 - 如果这是作为 SDK 其余部分的基础的实际日语代码，那么只需确保您传递的字符串是真正的数字，它会弄清楚并允许传递更长的字符串。您可能想要使用版本 2 (L)，尽管不建议您将 EC 级别降低到 L (0) 以减少冗余并增加最大字符数（ps 您引用的数字需要 EC 的 L.

我希望这有帮助

# c - Makefile 中的标志和宏是什么？

> ID：14563462
> 
> 赞同：-6
> 
> 时间：2013-01-28T13:48:32.140
> 
> 标签：c, linux, makefile

我正在尝试理解 make 文件的结构，但无法理解一些宏和标志，例如 -I 用于查找头文件， -L 用于链接到库文件，类似 -D ， -w ， -s ， - f, T1, 台橡, CFLAG, IDLFLAG ?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:51:11.203

你是什​​么意思你“无法理解”？你读过文档吗？

当然，所有支持的标志都[在手册中](http://www.gnu.org/software/make/manual/html_node/index.html)定义和描述。

您提到的其中一些可能是您尝试构建的源代码本地的编译器和/或标志，但是如果没有看到确切的代码，很难更具体。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T13:59:38.310

您的问题告诉我，您*对*Makefile 的结构*和*普通编译器/链接器调用的选项感到不知所措。

因此，除了建议您选择您选择的“如何使用编译器”教程之外，没有办法在这个地方回答您的问题，并一直工作直到您精通该教程（或至少认识一些东西）喜欢`-I <include_path>`并且`-L <library_path>`一目了然并理解到足以不将它们与有关 Makefile 的问题混为一谈）。

*然后*学习有关 Makefile 的教程，并继续学习，直到您精通该技术。

*然后*再次拿起您刚刚查看的 Makefile，并询问可能存在的任何特定问题。我们很乐意为您提供帮助。

# asp.net - 减少 if 代码 VB.NET 的数量

> ID：14563463
> 
> 赞同：2
> 
> 时间：2013-01-28T13:48:39.657
> 
> 标签：asp.net, vb.net, web

我正在使用 ASP Web 表单和 VB 后端创建太阳能光伏计算器。我只是查看了我的代码，作为一个新手 VB.NET 开发人员，我只是想知道是否有办法做一些不同的事情，减少代码行数或类似的事情。这是 y 代码的一个繁琐部分：

```
Dim SR As Integer
    'Store radiation value
    If drpDwnRoofFacing.Text = "South" And drpAngleOfRoof.Text = "Horizontal" Then
        SR = 933
    ElseIf drpDwnRoofFacing.Text = "SE/SW" And drpAngleOfRoof.Text = "Horizontal" Then
        SR = 933
    ElseIf drpDwnRoofFacing.Text = "E/W" And drpAngleOfRoof.Text = "Horizontal" Then
        SR = 933
    ElseIf drpDwnRoofFacing.Text = "NE/NW" And drpAngleOfRoof.Text = "Horizontal" Then
        SR = 933
    ElseIf drpDwnRoofFacing.Text = "North" And drpAngleOfRoof.Text = "Horizontal" Then
        SR = 933
    ElseIf drpDwnRoofFacing.Text = "South" And drpAngleOfRoof.Text = "30 Degrees" Then
        SR = 1042
    ElseIf drpDwnRoofFacing.Text = "SE/SW" And drpAngleOfRoof.Text = "30 Degrees" Then
        SR = 997
    ElseIf drpDwnRoofFacing.Text = "E/W" And drpAngleOfRoof.Text = "30 Degrees" Then
        SR = 886
    ElseIf drpDwnRoofFacing.Text = "NE/NW" And drpAngleOfRoof.Text = "30 Degrees" Then
        SR = 762
    ElseIf drpDwnRoofFacing.Text = "North" And drpAngleOfRoof.Text = "30 Degrees" Then
        SR = 709
    ElseIf drpDwnRoofFacing.Text = "South" And drpAngleOfRoof.Text = "45 Degrees" Then
        SR = 1023
    ElseIf drpDwnRoofFacing.Text = "SE/SW" And drpAngleOfRoof.Text = "45 Degrees" Then
        SR = 968
    ElseIf drpDwnRoofFacing.Text = "E/W" And drpAngleOfRoof.Text = "45 Degrees" Then
        SR = 829
    ElseIf drpDwnRoofFacing.Text = "NE/NW" And drpAngleOfRoof.Text = "45 Degrees" Then
        SR = 666
    ElseIf drpDwnRoofFacing.Text = "North" And drpAngleOfRoof.Text = "45 Degrees" Then
        SR = 621
    ElseIf drpDwnRoofFacing.Text = "South" And drpAngleOfRoof.Text = "60 Degrees" Then
        SR = 960
    ElseIf drpDwnRoofFacing.Text = "SE/SW" And drpAngleOfRoof.Text = "60 Degrees" Then
        SR = 900
    ElseIf drpDwnRoofFacing.Text = "E/W" And drpAngleOfRoof.Text = "60 Degrees" Then
        SR = 753
    ElseIf drpDwnRoofFacing.Text = "NE/NW" And drpAngleOfRoof.Text = "60 Degrees" Then
        SR = 580
    ElseIf drpDwnRoofFacing.Text = "North" And drpAngleOfRoof.Text = "60 Degrees" Then
        SR = 485
    ElseIf drpDwnRoofFacing.Text = "South" And drpAngleOfRoof.Text = "Vertical" Then
        SR = 724
    ElseIf drpDwnRoofFacing.Text = "SE/SW" And drpAngleOfRoof.Text = "Vertical" Then
        SR = 684
    ElseIf drpDwnRoofFacing.Text = "E/W" And drpAngleOfRoof.Text = "Vertical" Then
        SR = 565
    ElseIf drpDwnRoofFacing.Text = "NE/NW" And drpAngleOfRoof.Text = "Vertical" Then
        SR = 427
    ElseIf drpDwnRoofFacing.Text = "North" And drpAngleOfRoof.Text = "Vertical" Then
        SR = 360
    End If 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T14:09:56.060

我建议将此数据存储在应用程序代码之外，例如存储在数据库中，或者如果没有必要，存储在 XML 文件中。但是，即使您要在代码中硬编码转换规则，最好将规则的硬编码与处理和应用规则的逻辑分开。例如，您可以创建一个包含规则的类，如下所示：

```
Public Class MyRule
    Public Sub New(roofFacing As String, angleOfRoof As String, SR As Integer)
        _roofFacing = roofFacing
        _angleOfRoof = angleOfRoof
        _SR = sr
    End New

    Public ReadOnly Property RoofFacing() As String
        Get
            Return _roofFacing
        End Get
    End Property
    Private _roofFacing As String

    Public ReadOnly Property AngleOfRoof() As String
        Get
            Return _angleOfRoof
        End Get
    End Property
    Private _angleOfRoofAs String

    Public ReadOnly Property SR() As String
        Get
            Return _SR
        End Get
    End Property
    Private _SR String
End Class 
```

然后，您可以对规则列表的创建进行硬编码，就好像它们来自数据库一样，如下所示：

```
Dim rules As New List(Of MyRule)()
rules.Add(New MyRule("South", "Horizontal", 933))
rules.Add(New MyRule("South", "SE/SW", 933))
' ...
rules.Add(New MyRule("South", Nothing, 933)) 
```

`If`然后，您可以使用一个简单的循环来应用规则，而不是一个巨大的语句，如下所示：

```
Dim SR As Integer
For Each rule As MyRule In rules
    If _
    ( _
        (rule.RoofFacing Is Nothing) OrEsle _
        (rule.RoofFacing = drpDwnRoofFacing.Text) _
    ) AndAlso _
    ( _
        (rule.AngleOfRoof Is Nothing) OrEsle _
        (rule.AngleOfRoof = drpAngleOfRoof.Text) _
    ) Then
        SR = rule.SR
        Exit For
    End If
Next 
```

如您所见，一旦以这种方式进行设计，以后修改规则或添加其他规则会容易得多。但是，您应该真正为这些值使用枚举，而不是字符串。例如：

```
Public Enum RoofFacings
    Any
    North
    South
    EastOrWest
    ' ...
End Enum

Public Enum AnglesOfRoof
    Any
    Horizontal
    Degrees30
    Degrees45
    ' ...
    Vertical
End Enum 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T14:06:28.217

```
Select Case drpAngleOfRoof.Text
        Case "Horizontal"
            Select Case drpDwnRoofFacing.Text
                Case "South" : SR = 933
                Case "SE/SW" : SR = 933
                Case "E/W" : SR = 933
                Case "NE/NW" : SR = 933
                Case "North" : SR = 933
            End Select
        Case "30 Degrees"
            Select Case drpDwnRoofFacing.Text
                Case "South" : SR = 933
                Case "SE/SW" : SR = 933
                Case "E/W" : SR = 933
                Case "NE/NW" : SR = 933
                Case "North" : SR = 933
            End Select
        Case "45 Degrees"
            Select Case drpDwnRoofFacing.Text
                Case "South" : SR = 933
                Case "SE/SW" : SR = 933
                Case "E/W" : SR = 933
                Case "NE/NW" : SR = 933
                Case "North" : SR = 933
            End Select
        Case "60 Degrees"
            Select Case drpDwnRoofFacing.Text
                Case "South" : SR = 933
                Case "SE/SW" : SR = 933
                Case "E/W" : SR = 933
                Case "NE/NW" : SR = 933
                Case "North" : SR = 933
            End Select
        Case "Vertical"
            Select Case drpDwnRoofFacing.Text
                Case "South" : SR = 933
                Case "SE/SW" : SR = 933
                Case "E/W" : SR = 933
                Case "NE/NW" : SR = 933
                Case "North" : SR = 933
            End Select
    End Select 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T13:51:20.053

您可以嵌套 IF 语句，即

`If drpAngleOfRoof.Text = "Horizontal" Then`

 ````
 If drpDwnRoofFacing.Text = "South" Then

         SR = 933

    End If 
```` 

`End If`

例如，将与每个角度位置相关的所有语句组合在一起。

或者，您可以使用 Select...Case 语句作为替代。

[http://msdn.microsoft.com/en-us/library/cy37t14y(v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/cy37t14y(v=vs.71).aspx)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-28T14:10:03.953

不如使用 select 语句来代替。您将最初的选择削减为drpAngleOfRoof 的值，然后您只需要担心drpDownRoofFacing 的值。像这样的东西：

```
Select Case drpAngleOfRoof.Text
Case "Horizontal"
    Return 933
Case "30 Degrees"
    Select Case drpDwnRoofFacing.Text
        Case "South"
            Return 1042
        Case "SE/SW"
            Return 997
        Case "E/W"
            Return 886
        Case "NE/NW"
            Return 762
        Case "North"
            Return 709
    End Select
Case "45 Degrees"
    Select Case drpDwnRoofFacing.Text
        Case "South"
            Return 1023
        Case "SE/SW"
            Return 968
        Case "E/W"
            Return 829
        Case "NE/NW"
            Return 666
        Case "North"
            Return 621
    End Select
Case "60 Degrees"
    Select Case drpDwnRoofFacing.Text
        Case "South"
            Return 960
        Case "SE/SW"
            Return 900
        Case "E/W"
            Return 753
        Case "NE/NW"
            Return 580
        Case "North"
            Return 485
    End Select
Case "Vertical"
    Select Case drpDwnRoofFacing.Text
        Case "South"
            Return 724
        Case "SE/SW"
            Return 684
        Case "E/W"
            Return 565
        Case "NE/NW"
            Return 427
        Case "North"
            Return 360
    End Select
End Select 
```

# c# - 将数据库从基于服务的数据库传输到本地数据库时出错

> ID：14563464
> 
> 赞同：1
> 
> 时间：2013-01-28T13:48:40.213
> 
> 标签：c#, sql-server

我刚刚知道基于服务的数据库和本地数据库之间的差异，因此根据我的需要，我已将项目数据库转移到本地数据库，我质疑并发现我只需要替换连接字符串，这是其中的主要内容我不需要在我的代码中添加和替换任何东西。现在我收到了我不知道如何解决本地数据库代码的错误

```
 SqlConnection con = new SqlConnection();
              SqlConnection conn = new SqlConnection();
              conn.ConnectionString = @"Data Source=E
    :\project\+project\WindowsFormsApplication1\Database1.sdf";
              SqlCommand cmd = new SqlCommand();
              cmd.Connection = conn;
              conn.Open();
              try
         {
             // something
          }

              catch (Exception)
          {
              MessageBox.Show("ERROR");

          }
              conn.Close();
          } 
```

我在 conn.open 上遇到错误

```
 A network-related or instance-specific error occurred 
while establishing a connection to SQL Server. The server
 was not found or was not accessible. Verify that the
 instance name is correct and that SQL Server is configured 
to allow remote connections. (provider: SQL Network Interfaces,
 error: 26 - Error Locating Server/Instance Specified) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:56:13.343

您必须使用`SqlCeConnection`and`SqlCeCommand`而不是`SqlConnection`and `SqlCommand`。

示例：http : [//www.dotnetperls.com/sqlce](http://www.dotnetperls.com/sqlce)

# c# - ASP.Net MVC - 带有集合的模型，提交

> ID：14563471
> 
> 赞同：6
> 
> 时间：2013-01-28T13:49:03.487
> 
> 标签：c#, asp.net-mvc, entity-framework

我有一个看起来像的模型

```
public class Patient
{
    private ICollection<Refill> _refills = new List<Refill>();
    public int Id { get; set; }
    public string FirstName { get; set; }

    public virtual ICollection<Refill> Refills
    {
        get { return _refills; }
        set { _refills = value; }
    }
}

public class Refill
{
    public int Id { get; set; }

    public RefillActivityStatus RefillActivityStatus { get; set; }
    public DateTime? RefillDate { get; set; }
    public RefillType RefillType { get; set; }
    public string RXNumber { get; set; }
} 
```

这是我想要做的。我想在视图中填充这些，当用户单击保存更改时。我想保存实体框架。我遇到的问题是在视图中我这样做

```
@foreach (var m in Model.Refills)
{
     @Html.HiddenFor(model=>m.Id)
     <div class="editor-label">
         @Html.LabelFor(model => m.RXNumber)
     </div>
     <div class="editor-field">
         @Html.EditorFor(model => m.RXNumber)                                  
     </div>     
} 
```

我试图在控制器中做这样的事情

```
[HttpPost]
public ActionResult Details(Patient patient)
{
    Patient p = db.Patients.Find(patient.Id);
    db.Entry(p).State = EntityState.Modified;
    db.Entry(p).CurrentValues.SetValues(patient);
    // Would include Refill changes too but it doesn't
    db.SaveChanges();

    return View(p);
} 
```

但是，Refills 不会在 HttpPost 上传播。它只是空的，我需要做什么来修复它？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T13:56:53.393

试试这个 insted 你的`foreach`：

```
@for (int i = 0; i < Model.Refills.Count(); i++)
{
    @Html.Hidden("Refills[" + i + "].Id", Model.Refills[i].Id)
    <div class="editor-label">
        @Html.Label("Refills[" + i + "].RXNumber", Model.Refills[i].RXNumber)
    </div>
    <div class="editor-field">
        @Html.Editor("Refills[" + i + "].RXNumber")
    </div>     
} 
```

# c# - 从邻接信息列表中查找路径

> ID：14563472
> 
> 赞同：1
> 
> 时间：2013-01-28T13:49:10.127
> 
> 标签：c#, algorithm, graph, path

我在数据库中有以下形式的数据：

```
A -> B
C -> D
B -> C
F -> G
G -> J
X -> Z 
```

这基本上意味着 A 到 B，C 到 D 等等。给定这些数据和一个节点（例如 C），我想构建找到 C 的*完整*路径，即 A -> B -> C -> D . 我试图通过使用一些字典和递归循环来做到这一点，但我不喜欢这种缓慢的解决方案，因为 db 中有很多数据。有什么更好的方法来解决这个问题？在算法和数据结构方面？任何想法或提示表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:12:45.143

您基本上是在寻找[DFS](http://en.wikipedia.org/wiki/Depth-first_search)，但您需要做两次 - 每个方向一次。

首先在反向“图表”上做一个 DFS，从 C 开始。
在你的例子中，它会给你`Path1 = C->B->A`

接下来，再次从 C 对原始图执行 DFS。
在您的示例中，它将为您提供`Path2= C->D`

现在，通过反转`Path1`和连接`Path2`它，您将得到：

```
reverse(Path1)  + Path2 = A->B->C + C->D = A->B->C->D 
```

* * *

澄清 - DFS 只是抽象，你实际上在做的是类似于（伪代码）的东西：

```
current <- C
list = []
while (current != null):
   list.addFirst(current)
   current <- u such that (u,current) is in the DataBase
current <- C
list.deleteLast() // last is C
while (current != null):
   list.addLast(current)
   current <- u such that (current,u) is in the DataBase 
```

请注意，查找`u`这两种情况是一个简单的字典查找，第一个“目标”是键，第二个“源”是键。

# codeigniter - codeigniter 和继承：子设置父属性，然后另一个子获取属性

> ID：14563482
> 
> 赞同：0
> 
> 时间：2013-01-28T13:49:29.253
> 
> 标签：codeigniter, inheritance, parent, children

这是一个继承问题……主要是。新手来了！

我有：一个父模型的 2 个子模型。对于这个问题，两个子模型完全相同。

我想要什么：让子模型设置父模型的属性并为所有子模型设置该属性。如果可能的话。例如，Info_model 设置继承的属性 $this->league_id 然后 League_model 可以访问由 Info_model 设置的这个值。在加载 Ml_league_model 之前，我不知道league_id 的值是多少。这有什么解决办法？

我的想法：似乎在加载 Info_model 和 League_model 时，它们每个都有一个父模型的实例，而不是我想要的，这是一个孩子可以从中访问属性的实例。

如您所见，在我的控制器中，test() 函数的输出为：

```
league id in the info_model is: 508
league id in the league_model is: 
```

父模型位于 /core 目录

```
class Ml_league_model extends MY_Model{

    protected $league_id='';

    function  __construct() {
        parent::__construct();
    }

function _initialize($params = array())
{
    if (count($params) > 0)
    {
        foreach ($params as $key => $val)
        {
            $this->$key = $val;
        }
    }
}//end initialize
}
?> 
```

位于 /models 目录中的子模型

```
class Info_model extends Ml_league_model{

function  __construct() {
    parent::__construct();
}

function get_league_id(){
    echo 'league id in the info_model is: '.$this->league_id.br(1);
} 
```

位于 /models 目录中的另一个子模型

```
class League_model extends Ml_league_model{

function  __construct() {
    parent::__construct();
}

function get_league_id(){
    echo 'league id in the info_model is: '.$this->league_id.br(1);
} 
```

位于 /controllers 目录的控制器

```
Class Info extends MY_Controller{

public function __construct() {
    parent::__construct();

    $this->load->model('Info_model');
    $this->load->model('League_model');

}

function test (){

    $this->Info_model->_initialize(array('league_id'=>508));
    $this->Info_model->get_league_id();
                $this->League_model->get_league_id();

} 
```

# ios - iOS - 使 CATextLayer 可滚动

> ID：14563483
> 
> 赞同：0
> 
> 时间：2013-01-28T13:49:32.080
> 
> 标签：ios, text, scroll, layer, catextlayer

我想让这个文本在图层中滚动。我目前能够在图像上显示以下文本。但是，如果文本太长，它的一部分不会显示出来。因此我想垂直滚动它。对 scrollView 对象不是很熟悉。有人可以帮忙吗？

```
// Create the new layer object
boxLayer = [[CATextLayer alloc] init];

// Give it a size
[boxLayer setBounds:CGRectMake(0.0, 0.0, 500.0, 500.0)];

// Give it a location
[boxLayer setPosition:CGPointMake(300.0, 350.0)];

// Make half-transparent red the background color for the layer
UIColor *reddish = [UIColor colorWithRed:0.0 green:0.0 blue:0.0 alpha:0.1];

// Get CGColor object with the same color values
CGColorRef cgReddish = [reddish CGColor];
[boxLayer setBackgroundColor:cgReddish];

// Make it a sublayer on the view's layer
[self.view.layer addSublayer:boxLayer];

// Create string
NSString *text2 = @"The article was about employment.\nHe leafed through it in an instant.\nHis feeling of anxiety resurfaced and he closed the magazine.\n\n-Hm…, he breathed.\n\n-Have you been looking for work long?, asked the stranger at his side.\nThe article was about employment.\nHe leafed through it in an instant.\nHis feeling of anxiety resurfaced and he closed the magazine.\n\n-Hm…, he breathed.\n\n-Have you been looking for work long?, asked the stranger at his side.\nThe article was about employment.\nHe leafed through it in an instant.\nHis feeling of anxiety resurfaced and he closed the magazine.\n\n-Hm…, he breathed.\n\n-Have you been looking for work long?, asked the stranger at his side.";

// Set font
[boxLayer setFont:@"MarkerFelt-Thin"];

// Set font size
[boxLayer setFontSize:20.0];

[boxLayer setAlignmentMode:kCAAlignmentLeft];

boxLayer.wrapped = YES;

// Assign string to layer
[boxLayer setString:text2]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-22T08:44:40.020

您不能直接滚动 CATextLayer。首先，您必须在 UIView 中添加 CATextLayer，而不是在 ScrollView 中添加 UIView。现在您可以滚动 CATextLayer。请告诉我它是否适合你。

# jsp - 使用标签和 JSP scriptlet显示图像？

> ID：14563484
> 
> 赞同：0
> 
> 时间：2013-01-28T13:49:32.443
> 
> 标签：jsp, jakarta-ee, servlets, jsp-tags

我正在尝试使用以下代码在**JSP页面上显示图像**

```
<% String url;
        url=config.getServletContext().getRealPath("/images/1.jpg"); %>
        <img src= <%=url%>/> 
```

我也尝试给出双引号，但它不起作用谁能告诉我我可以像这样给出图像文件的绝对路径还是我必须使用它的**流**？

将图像和上传文件的相对路径或绝对路径存储到数据库中的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:01:21.653

要在 html 中显示图像，您必须提供网页根目录的相对路径。

# php - 显示您的 php 代码但保护它不被复制

> ID：14563487
> 
> 赞同：1
> 
> 时间：2013-01-28T13:49:33.767
> 
> 标签：php, copy-protection

我有一个要出售的 php 项目。买方希望他的程序员在购买之前首先查看代码的质量。

我不希望他能够复制代码，所以我必须保护它。

**您将如何保护您的代码不被复制？**PDF？FTP Flash Viewer 浏览器？某物？

PS如果它有什么重要的，程序员不需要运行代码，他只需要能够看看它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:57:01.693

如果您提供源代码，则无法阻止有人复制它。即使您将其作为屏幕截图发送给他们，他们也只能重新输入。

你能做的最好的事情就是给他们一小段你的代码摘录，这本身并没有多大作用，但展示了你编码能力的质量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:56:21.503

他必须查看所有代码吗？还是只是一些文件？在这种情况下，您可能需要制作一些照片。您可以将 PDF 文件转换为文本文件，因此这不是一个好的选择。Flash 可能会有所作为。

但我认为最好的方法是自己向程序员展示代码

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T13:57:27.793

代码照片的 PDF 格式将是一个不错的选择，您可以通过许多编辑器选择打印到文件。

但无论如何……如果他能读懂，他就可以复制它。我建议您在每个文件的顶部包含版权声明，这将为您提供一定的法律保护。

# php - “走”通过文件进行更改，PHP

> ID：14563488
> 
> 赞同：0
> 
> 时间：2013-01-28T13:49:35.033
> 
> 标签：php, fgetc

我想用另一个“遍历”文件来替换文件中的每个字符。

这就像使用 fgetc()，但我还需要替换该字符。我的文件很大，这是最好的方法吗？有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:52:17.057

如果您是 Linux 用户，请查看`sed`. Windows 的替代品也可以让你这样做，但你需要下载它们（它们不是默认的）

它的工作原理是这样的：假设你有一个句子“Hello World”。运行命令：

```
sed s/l/p/g sentence.txt 
```

您会得到输出：“Heppo Worpd”（将所有 l 替换为 p）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:12:16.280

fopen 模式 c+ 应该做你想做的。见[http://www.php.net/manual/en/function.fopen.php](http://www.php.net/manual/en/function.fopen.php)

# spring - 如何使用 MockMvc 测试弹簧控制器方法？

> ID：14563489
> 
> 赞同：25
> 
> 时间：2013-01-28T13:49:36.527
> 
> 标签：spring, junit, integration-testing

我正在使用 spring 3.2.0 和 junit 4

这是我需要测试的控制器方法

```
@RequestMapping(value="Home")
public ModelAndView returnHome(){

return new ModelAndView("Home");    
} 
```

spring-servlet 配置是：

```
<context:annotation-config/>
    <context:component-scan base-package="com.spring.poc" />
    <mvc:annotation-driven /> 

    <bean id="jspViewResolver"
    class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <property name="viewClass"
        value="org.springframework.web.servlet.view.JstlView" />
    <property name="prefix" value="/WEB-INF/jsp/" />
    <property name="suffix" value=".jsp" /> 
```

这是我的测试课：

```
public class TestController {

private MockMvc mockMvc;

@Before
public void setup() {
    InternalResourceViewResolver viewResolver = new InternalResourceViewResolver();
    viewResolver.setPrefix("/WEB-INF/");
    viewResolver.setSuffix(".jsp");
    this.mockMvc = standaloneSetup(new CController()).setViewResolvers(
            viewResolver).build();
}

@Test
public void CControllerTest() throws Exception {
    ......
    ......      
} 
```

}

如何使用 MockMvc 测试此方法？

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-01-28T16:04:58.067

您可以使用以下注解来使用您的应用程序调度程序 servlet xml。以下示例使用路径 /mysessiontest 设置一些会话属性并期望返回某个视图的控制器：

```
import org.junit.Before;
import org.junit.Test;
import org.junit.runner.RunWith;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.MediaType;
import org.springframework.mock.web.MockHttpServletRequest;
import org.springframework.mock.web.MockHttpSession;
import org.springframework.test.context.ContextConfiguration;
import org.springframework.test.context.junit4.SpringJUnit4ClassRunner;
import org.springframework.test.context.web.WebAppConfiguration;
import org.springframework.test.web.servlet.MockMvc;
import org.springframework.test.web.servlet.setup.MockMvcBuilders;
import org.springframework.web.context.WebApplicationContext;

import static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;
import static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;

@RunWith(SpringJUnit4ClassRunner.class)
@WebAppConfiguration
@ContextConfiguration({ "classpath:springDispatcher-servlet.xml" })

public class MySessionControllerTest {

    @Autowired WebApplicationContext wac; 
    @Autowired MockHttpSession session;
    @Autowired MockHttpServletRequest request;

    private MockMvc mockMvc;

    @Before
    public void setup() {
        this.mockMvc = MockMvcBuilders.webAppContextSetup(this.wac).build();
    }

    @Test
    public void getAccount() throws Exception {
        UserDomain user = new UserDomain();
        user.setFirstName("johnny");

        session.setAttribute("sessionParm",user);
        this.mockMvc.perform(get("/mysessiontest").session(session)
        .accept(MediaType.TEXT_HTML))
        .andExpect(status().isOk())
        .andExpect(view().name("test"));
    }
} 
```

# java - 使用 CMIS 在两个文件 (Alfresco CE 4.2.c) 之间创建关系

> ID：14563492
> 
> 赞同：2
> 
> 时间：2013-01-28T13:49:51.580
> 
> 标签：java, alfresco, cmis, opencmis, apache-chemistry

我的模型如下所示：

**我有两个文件夹（HTML）和（图像）。大量文件被插入到 images 文件夹中，我试图实现的业务用例的一小部分是，当客户要求说 chapter1.html 时，应该从 Alfresco 存储库中获取该 chapter1.html 的所有关联图像并发送。**

我正在使用 CMIS，并且能够完成它提供的大部分内容。我已经阅读了大部分教程和代码片段，并且可以通过这种方式创建关系：

[https://anonsvn.springframework.org/svn/se-surf/branches/DEV_CMIS_2/sandbox/spring-cmis/spring-cmis-test/src/main/java/org/springframework/extensions/cmis/test/CmisCreateTest。爪哇](https://anonsvn.springframework.org/svn/se-surf/branches/DEV_CMIS_2/sandbox/spring-cmis/spring-cmis-test/src/main/java/org/springframework/extensions/cmis/test/CmisCreateTest.java)

1.  testCreateRelationship(): 工作正常，但当 getRelationships() 调用并在 Context 上设置 setIncludeRelationships 时再次返回空。

2.  testBelarus()：它不起作用并引发以下异常（org.apache.chemistry.opencmis.commons.exceptions.CmisInvalidArgumentException：错误请求）。

[我使用了“关系”部分http://chemistry.apache.org/java/developing/guide.html](http://chemistry.apache.org/java/developing/guide.html)中给出的代码片段 ，并成功创建了它，但再次发现很难获取该特定 HTML 的引用图像

请提出一些解决方案，因为这是阻止我去 Alfresco 的唯一原因。

如果我以错误的方式进行操作（创建关系）并且有更好的解决方案满足我的要求（使用自定义模型/alfcmis:nodeRef/cmiscustom:docprop_string 等），请提出建议。

任何帮助表示赞赏。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:28:36.347

粘贴来自 testCreateRelationship() 的代码，最后添加一些代码，演示如何获取关系并将它们打印到控制台（听起来你尝试这种方式没有运气？下面的代码无论如何都适用于我的 repo）：

```
public void testCreateRelationship()
{
    Session session = createSession();
    Folder root = session.getRootFolder();

    Map<String,String> newFolderProps = new HashMap<String, String>();
    newFolderProps.put(PropertyIds.OBJECT_TYPE_ID, "cmis:folder");
    String name = "testCreateRelationship " + System.currentTimeMillis();
    newFolderProps.put(PropertyIds.NAME, name);
    Folder folder = root.createFolder(newFolderProps, null, null, null, session.getDefaultContext());
    System.out.println(folder.getName());

    Map<String,String> newDocProps1 = new HashMap<String, String>();
    newDocProps1.put(PropertyIds.OBJECT_TYPE_ID, "D:cmiscustom:document");
    newDocProps1.put(PropertyIds.NAME, "Test Doc 1");
    ContentStream contentStream1 = new ContentStreamImpl("xyz.txt", null, "plain/text", new ByteArrayInputStream("some content".getBytes()));
    Document doc1 = folder.createDocument(newDocProps1, contentStream1, VersioningState.MAJOR, null, null, null, session.getDefaultContext());

    Map<String,String> newDocProps2 = new HashMap<String, String>();
    newDocProps2.put(PropertyIds.OBJECT_TYPE_ID, "D:cmiscustom:document");
    newDocProps2.put(PropertyIds.NAME, "Test Doc 2");
    ContentStream contentStream2 = new ContentStreamImpl("xyz.txt", null, "plain/text", new ByteArrayInputStream("some content".getBytes()));
    Document doc2 = folder.createDocument(newDocProps2, contentStream2, VersioningState.MAJOR, null, null, null, session.getDefaultContext());

    Map<String, Serializable> relProps = new HashMap<String, Serializable>(); 
    relProps.put("cmis:sourceId", doc1.getId()); 
    relProps.put("cmis:targetId", doc2.getId()); 
    relProps.put("cmis:objectTypeId", "R:cmiscustom:assoc");
    session.createRelationship(relProps, null, null, null);

    // create a OperationContext that fetches relationships on both ends...
    OperationContext operationContext = new OperationContextImpl();
    operationContext.setIncludeRelationships(IncludeRelationships.BOTH);

    CmisObject object = session.getObject(doc1,operationContext);

    List<Relationship> relationships = object.getRelationships();
    for (Relationship rel : relationships){
        System.out.println("relation: "+ rel.getName());
    }
} 
```

# php - 将列中的值与动态列和行 php 相加

> ID：14563494
> 
> 赞同：0
> 
> 时间：2013-01-28T13:49:58.080
> 
> 标签：php, mysql

我想得到列中所有字段的总和。即使行是动态的，列也是动态的。（使用日期明智的记录过滤器）。

嗨..在我的表中，用户可以动态添加列，所以我最初不会知道原始代码中的列名称为 $row['SUM(price)']。因此，我需要一个可以自行提取所有列值的查询。

id s_id topic day date subject Anushka Bharath Chetan 1 1 Dr.Jain Sun 25-03-2011 anusha 0 1 1 2 2 Ori-Par Mon 07-01-2013 accounts 1 0 0 3 3 ori-stu mon 09-01-2013账户 1 0 1

这里的表格标题，即学生姓名是动态的，我正在添加每个学生的出勤数据。我想计算（总和和平均）学生每月或日期的出勤率。如果您需要任何其他帮助我，请告诉我...

提前致谢

# jquery - jQuery表单验证不起作用

> ID：14563495
> 
> 赞同：7
> 
> 时间：2013-01-28T13:49:59.430
> 
> 标签：jquery, jquery-validate

我在这上面花了几个小时，我不知道为什么这个 jquery validate() 不起作用。我终于把它分解到最低限度，它仍然不起作用。这是实际的代码：

```
<!DOCTYPE html>
<html>
<head>
    <script type="text/javascript" src="jquery-1.8.2.min.js"></script>
    <script type="text/javascript" src="jquery.validate.min.js"></script>

    <script>

        $(document).on("click", "#submit", function() {

            $("#form").validate({
                rules: {
                    input: { required: true}
                },
                messages: {
                    input: { required: "required" }
                },
                ignore:      "",
                errorClass:  'fieldError',
                onkeyup:     false,
                onblur:      false,
                errorElement:'label',
                submitHandler: function() {                        
                    alert("alert");
                }
            });

            return false;
         });

    </script>

</head>
<body>

    <form id="form">
        <input type="text" value="" name="input" id="input" />
    </form>
    <a href="#" id="submit">submit</a>

</body>
</html> 
```

我在这里遗漏了一些明显的东西吗？单击“提交”时，我没有收到任何错误，也没有任何反应。

**更新：**我已将“click”事件之外的 validate() 移动到文档“ready”事件中，现在它在文档加载时触发，在控制台中输出消息“未选择，无法验证，不返回任何内容”这是不是我希望它明显工作的方式，那么如何将它附加到点击事件？

**更新 2：**感谢@NXT，我终于运行了验证，但是“submitHandler”仍然无法正常工作，我需要使用它来进行 Ajax 调用，因为必须在不重新加载页面的情况下提交表单。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T14:12:12.830

您是否故意将提交按钮放在表单之外？我对其进行了修改，以在单击时提交表单。它现在可以工作了 - 出现验证消息，以及警告消息（当您提交带有一些内容的表单时）。使用下面的代码部分，或在线尝试 - [http://jsfiddle.net/Vcmfs/](http://jsfiddle.net/Vcmfs/)

头：

```
<script>
    $(function(){
        $("#form").validate({
                rules: {
                    input: { required: true}
                },
                messages: {
                    input: { required: "required" }
                },
                ignore:      "",
                errorClass:  'fieldError',
                onkeyup:     false,
                onblur:      false,
                errorElement:'label',
                submitHandler: function() {                        
                    alert("alert");
                }
            });

        $("#submit").click(function(){
            $("#form").submit();
            return false;
        });
    });
</script> 
```

身体：

```
<form id="form">
    <input type="text" value="" name="input" id="input" />
</form>
<a href="#" id="submit">submit</a> 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T14:05:04.297

[`.validate()`](http://docs.jquery.com/Plugins/Validation/validate#options)实际上并不执行验证，它配置表单进行验证。

如果您将提交链接更改为提交按钮`<input type='submit' value='Submit'/>`，它将按预期工作。

另一种选择是调用[`.valid()`](http://docs.jquery.com/Plugins/Validation/valid)链接点击处理程序，这将触发验证。

请参阅此小提琴以获取工作示例：http: [//jsfiddle.net/v5HQr/1/](http://jsfiddle.net/v5HQr/1/)

# qt - 如何告诉 QListView 调整大小以适应？

> ID：14563499
> 
> 赞同：1
> 
> 时间：2013-01-28T13:50:20.700
> 
> 标签：qt, qlistview

我有一个 QListView 并分配了一个模型和一个委托。我正在使用它在水平栏中显示图像，如下所示

![在此处输入图像描述](../Images/967c48ca8929564ecb7c9188dcfc4529.png)

在用户事件中，模型中的数据会更新。一个这样的事件导致图像的宽度减小，如下所示（#4）。

![在此处输入图像描述](../Images/e813ad6d5ae025e103719ffaa7566959.png)

我在相应的索引上发出一个 dataChanged ，只有相关的小部件被重新绘制。正因为如此，#4 和#5 之间有一个没有被填补的空白。我认为必须有一种方法来刷新所有可见行 - 但我无法找到它。

我尝试了以下方法，但它们不起作用：

```
1\. viewport()->updateGeometries()

2\. viewport()->update()

3\. I tried changing the width to see if it refreshes
    int curWidth = mp_mylistview->width();
    this->mp_mylistview->setFixedWidth(curWidth + 1);
    this->mp_mylistview->setFixedWidth(curWidth); 
```

有什么建议么？

注：以上图片为示例图，非原图。如果您需要代码，我需要在发布之前过滤掉机密信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T13:13:15.087

我所要做的就是`emit layoutChanged()`跟进`dataChanged()`.

# xcode - 有没有使用 git 重新设置和合并 project.pbxproj 文件的好方法？

> ID：14563502
> 
> 赞同：3
> 
> 时间：2013-01-28T13:50:24.967
> 
> 标签：xcode, git

重新设置 xcodeproj 文件时，我遇到了一个非常烦人的问题，有什么办法可以解决这个问题吗？

情况是这样的：

（1）A修改了demo.xcodeproj的project.pbxproj，co​​mmit 1；

（2）B修改demo.xcodeproj的project.pbxproj，并提交2；

(3)当 B 将 commit 2 rebase 为 commit 1 时，会有很多冲突，并且不可能合并。

(4) 所以 B 必须再次提交。

我知道project.pbxproj是一个xml文件，xml中的key是随机生成的。

我的问题是：

有没有办法解决这个问题？我对此一无所知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:55:28.950

看起来实际上`demo.xcodeproj` [是一个文件夹](http://bhapca.blogspot.fr/2010/07/how-to-duplicate-project-in-xcode.html)，并且像每个系统相关的配置文件/文件夹一样，人们倾向于避免对它们进行版本控制，因为它们在更新时总是会产生冲突。

无论如何，这个问题已经在这里解决了：[xcodeproj under version control](https://stackoverflow.com/questions/4683513/xcodeproj-under-version-control)

# php - MYSQL中时间戳和正常日期的日期差异

> ID：14563508
> 
> 赞同：2
> 
> 时间：2013-01-28T13:50:48.297
> 
> 标签：php, mysql, datetime

我有一个有 2 个日期列的表，一个是时间戳值（例如 1359380165），另一个是正常日期时间值（例如 2013-01-28 08:32:53）。

我想找出现在（当前）和上面列出的这些日期之间的时间间隔。所以结果将是例如。

1.  Daniel 5 分钟前更改了密码
2.  Jeniffer 3 天前删除了她的电话号码。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:55:24.077

这个函数应该做一些类似于你所追求的事情，试一试，它只需要一个像你的'1359380165'一样的unix时间戳传递给它。

```
function getRelativeTime($timestamp)
{
    $timeDifference = time() - $timestamp;
    $timePeriods    = array('second', 'minute', 'hour', 'day', 'week','month', 'years', 'decade');
    $timeLengths    = array('60', '60', '24', '7', '4.35', '12', '10');

    if ($timeDifference > 0)
    {
            $timeSuffix = 'ago';
    }
    else
    {
        $timeDifference = -$timeDifference;
        $timeSuffix     = 'to go';
    }

    for($i = 0; $timeDifference >= $timeLengths[$i]; $i++)
    {
        $timeDifference/= $timeLengths[$i];
        $timeDifference = round($timeDifference);
    }

    if($timeDifference != 1) $timePeriods[$i].= 's';

    return $timeDifference . ' ' . $timePeriods[$i] . ' ' . $timeSuffix;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:01:12.687

假设这样的表：

## 我的表

```
id int unsigned not null auto_increment primary key
username varchar(45) not null
utime int
dtime timestamp 
```

为什么不直接构造查询以便 PHP 以相同格式接收两个时间戳？像这样的东西：

```
SELECT id, username, FROM_UNIXTIME(utime, '%Y-%m-%d %H.%i.%s') AS ut, dtime AS dt FROM mytable; 
```

或者

```
SELECT id, username, utime AS ut, UNIX_TIMESTAMP(dtime) as dt FROM mytable; 
```

然后您可以以相同的方式处理 ut 和 dt 。

[这里](http://www.nirojsapkota.com.np/2012/02/get-relative-time-in-php_25.html)有一个很好的相对时间函数。它需要一个unix时间戳。

# sql - 我们可以在 SQL SERVER 中创建多个计算列吗？

> ID：14563510
> 
> 赞同：0
> 
> 时间：2013-01-28T13:50:53.697
> 
> 标签：sql, sql-server-2008-r2

我正在处理一个表具有多个计算列的代码。我们可以这样做吗？我已经尝试过以下代码，但它不起作用。

```
CREATE TABLE CRM_Doctor_Request_old(
     Id int NULL,[Event_Type_Id] [bit] NULL, 
     Compute_Event_Type AS CASE WHEN Event_Type_Id=1 Then 'Individual' WHEN Event_Type_Id=0 Then 'Group' PERSISTED, 
     CRM_State_Id smallint NULL, 
     Compute_CRM_State AS CASE WHEN CRM_State_Id=1 Then 'Pending' WHEN CRM_State_Id=2 Then 'Approved' WHEN CRM_State_Id=3 Then 'Cancelled' PERSISTED, 
     Service_State_Id smallint NULL, 
     CRM_Service_State AS CASE WHEN Service_State_Id=1 Then 'In queue' WHEN Service_State_Id=2 Then 'In Process' WHEN Service_State_Id=3 Then 'Completed' WHEN Service_State_Id=3 Then 'Cancelled' PERSISTED
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:54:40.310

不要忘记`END`您的案例：

```
CASE WHEN ... THEN ... WHEN ... THEN ... END 
```

据我所知，多个计算列没有问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T13:53:58.290

您的计算列依赖于`Event_Type_Id`，但这不在表定义中。

# php - 如何将两行相乘mysql php

> ID：14563511
> 
> 赞同：0
> 
> 时间：2013-01-28T13:50:55.170
> 
> 标签：php

此代码显示了如何将两行相乘的简单结果

示例 30 天乘以 400 工资。那么我该怎么做，请帮我解决这个问题。

```
 <?php
    while ($runrows = mysql_fetch_assoc($run))
    {

     //get data
    $workerid = $runrows['workerid'];
    $keywords = $runrows['workername'];
    $salary = $runrows['salary'];
    $days = $runrows['days'];

    echo "<table  class='hovertable' width='100%'>";

    echo "<tr width='50%' onmouseover=\"this.style.backgroundColor='#999999';\" onmouseout=\"this.style.backgroundColor='#d4e3e5';\"><td width='20%'><a href=\"workerdetail.php?id=$id\" class=\"style1\">$workerid</a></td>
    <td width='20%'>$workername</td>
    <td width='20%'>$salary</td>
    <td width='20%'>$days</td>

    echo "</table>";
    }

    }
    }

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:53:01.437

```
 $salary = $runrows['salary']; 
```

用上面的代码做你想做的事，乘法、减法、加法……。是基础数学，看到`=`标志了吗？只是放置`$salary = $days * $runrows['salary'];`

# android - 从广播接收器问题在android中启动服务

> ID：14563516
> 
> 赞同：0
> 
> 时间：2013-01-28T13:51:18.210
> 
> 标签：android, service, android-activity, broadcastreceiver

我知道这里有很多这样的问题，但是在寻找可能的解决方案之后，我没有找到一个，所以这里的任何帮助表示赞赏。

我有 3 个类文件，我的 MainActivity 带有一个复选框，当按下该复选框时，它会启动一个具有广播接收器的活动，而我的广播接收器应该启动一个服务来检查用户的位置。

代码很大，所以我会尝试只显示主要部分，如果需要其他内容，请告诉我。

在 MainActivity 中：

```
 Public void onCheckboxClicked (View view) {
         boolean checked = ((CheckBox) view).isChecked();
     Switch (view. getId ()) {
        case R.id.checkbox_gps:
            if (checked){
             Intent intent = new Intent(this, GPS_Info.class);
             startActivity(intent);
            } 
```

在 GPS_Info 活动中：

```
 public class GPS_Info extends Activity{
          private TextView latitude;
          private TextView longitude;

     @Override
     protected void onCreate(Bundle savedInstanceState){
         super.onCreate(savedInstanceState);
         setContentView(R.layout.activity_gps_info);
     }

     private BroadcastReceiver GpsReceiver = new BroadcastReceiver(){
        @Override
        public void onReceive(Context context, Intent intent){
             System.out.println("Broadcast receiver");
             intent.setAction("com.example.systeminfo.GpsTracker");
             context.startService(intent);
        }
      }; 
```

我想我的问题是，我可以（如果是，那么如何）启动广播接收器内另一个类文件中的 GpsTracker 服务？我需要发送什么样的意图？我还没有完全掌握意图和上下文的概念。

这是我的 AndroidManifest.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.systeminfo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="11"
        android:targetSdkVersion="17" />

    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.INTERNET" />

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name="com.example.systeminfo.MainActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <receiver android:name="com.example.systeminfo.GpsReceiver" >
            <intent-filter>
                <action android:name="com.example.systeminfo.LOCATION_READY" />

                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </receiver>

        <activity
            android:name="com.example.systeminfo.GPS_Info"
            android:label="@string/title_activity_gps__info"
            android:parentActivityName="com.example.systeminfo.MainActivity" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>

            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.systeminfo.MainActivity" />
        </activity>
        <activity
            android:name="com.example.systeminfo.BatteryStatus"
            android:label="@string/title_activity_battery_status"
            android:parentActivityName="com.example.systeminfo.MainActivity" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.systeminfo.MainActivity" />
        </activity>
        <activity
            android:name="com.example.systeminfo.General_Info"
            android:label="@string/title_activity_general__info"
            android:launchMode="singleInstance"
            android:parentActivityName="com.example.systeminfo.MainActivity" >
            <meta-data
                android:name="android.support.PARENT_ACTIVITY"
                android:value="com.example.systeminfo.MainActivity" />
        </activity>

        <service
            android:name=".GpsTracker"
            android:enabled="false"
            android:exported="false" >
        </service>

    </application>
</manifest> 
```

我也知道我所描述的这个场景并不完全需要广播接收器，但它是项目的要求。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T13:59:56.560

现在根据您的代码，服务将在您广播 com.example.systeminfo.LOCATION_READY 意图时启动...，当广播此意图时，在 onRecieve 方法中服务将启动

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:16:33.757

是的，有可能）因此，您必须创建ServiceConnection 对象（mConnection）和方法doBindService()、doUnbindService()。
例如，

```
        /**
         * 与服务的主界面交互的类。
         */
        私人服务连接 mConnection = new ServiceConnection() {
            public void onServiceConnected(ComponentName className,
                    IBinder服务）{

 `mCallbackText.setText("Attached...");

            // We want to monitor the service for as long as we are
            // connected to it.
            try {

            } catch (RemoteException e) {  }

        }

        public void onServiceDisconnected(ComponentName className) {
            mCallbackText.setText("Disconnected...");
        }
    };

    // connect to service
    void doBindService() {

        Intent intent = new Intent(this, MyServer.class);
        bindService(intent, mConnection, Context.BIND_AUTO_CREATE | Context.BIND_IMPORTANT);

        mCallbackText.setText("Binding...");
    }

    void doUnbindService() {
            // Detach our existing connection.
            unbindService(mConnection);
            mCallbackText.setText("No Service...");
    }` 

对于服务启动，您必须调用 doBindService()，对于关闭 - doUnbindService()。

```

# jquery - 如何从此 SQL 语句中获取计数值

> ID：14563517
> 
> 赞同：1
> 
> 时间：2013-01-28T13:51:18.403
> 
> 标签：jquery, sql, database

我正在玩 webSQL，我有一个名为**products**的表，其中包含字段**id**、**product**、**category**。

我已经执行了以下 SQL

```
SELECT category, COUNT(*) FROM products GROUP BY category 
```

它返回带有两列的数据，第一个命名的类别列出了我可以输出的每个单独的类别：

```
list.find('#name').text(record.category); 
```

返回的第二列是属于该类别的每条记录的计数，并且该列的名称显示为**COUNT(*)**。所以很自然地我尝试了以下方法来获得计数：

```
list.find('#number').text(record.COUNT(*)); 
```

但是返回的错误是

```
Uncaught SyntaxError: Unexpected token ) 
```

这似乎应该是相当直截了当的，但我似乎无法找到答案。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:53:57.253

添加一个`ALIAS`并使用它来获取 columnName

```
SELECT category, COUNT(*) totalCount 
FROM   products 
GROUP  BY category 
```

然后

```
list.find('#number').text(record.totalCount); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T13:54:32.463

嗯，问题是这句话

```
list.find('#number').text(record.COUNT(*)); 
```

无效，因为这不是列名，只需将 count(*) 的名称添加到 SQL 语句中，如下所示：

```
SELECT category, COUNT(*) as qnty FROM products GROUP BY category 
```

然后像这样提取数据：

```
list.find('#number').text(record.qnty); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T13:56:25.667

您的请求无效，因为您忘记为 COUNT(*) 使用别名：

```
SELECT category, COUNT(*) AS tCount FROM products GROUP BY category

list.find('#number').text(record.tCount); 
```

# c# - 从自定义（模板）数组中的文件读取字节

> ID：14563524
> 
> 赞同：1
> 
> 时间：2013-01-28T13:51:23.967
> 
> 标签：c#, .net, readfile

我有一个二进制文件。一条数据可以是 8,16,32,64 位有符号和无符号 int。我正在尝试编写模板函数，这是我到目前为止所做的：

```
 public T[] GetLayerBytes<T>(int LayerNum)
    {
        int typeSize = Marshal.SizeOf(typeof(T));

        int layerPixelCount = typeSize * bitmapWidth * bitmapHeigth;

        string recFileName = "my.rec";

        using (FileStream fs = File.OpenRead(recFileName))
        using (BinaryReader br = new BinaryReader(fs))
        {
            fs.Seek(layerPixelCount * LayerNum, SeekOrigin.Begin);
            T[] b = new T[layerPixelCount];

            //fs.Read(b, 0, layerPixelCount); this doesn't work
            //br.Read(b, 0, layerPixelCount); this doesn't work too
            return b;
        }
    } 
```

在 C++ 中，我会为此使用[CFile::Read](http://msdn.microsoft.com/de-de/library/ctka0kks%28v=vs.80%29.aspx)。

有什么方法可以读取字节/int16/uint16 等，类似于我尝试过的没有针对不同`T`类型的开关/案例的方法？

提前感谢所有可能的优雅解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:58:34.847

根据您的评论，我建议使用[BinaryFormatter.Deserialize](http://msdn.microsoft.com/en-us/library/b85344hz.aspx)方法。

BinaryFormatter 有一个**[Binder](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.formatters.binary.binaryformatter.binder.aspx)**属性，可用于选择所需对象的类型。

此外，我认为你会想要使用**[SurrogateSelector](http://msdn.microsoft.com/en-us/library/system.runtime.serialization.surrogateselector.aspx)**来*转换*你想要的序列化数据......

# c# - 获得最大值。对象列表中的值

> ID：14563527
> 
> 赞同：7
> 
> 时间：2013-01-28T13:51:48.663
> 
> 标签：c#, linq

我有以下课程。

```
public class PriceDetails 
{
  public float AverageNightlyRate { get; set; }
}

public class RoomContainer
{
  public PriceDetails RoomPriceDetails { get; set; }
  public string PromotionDescription { get; set; }
}    

public List<RoomContainer> HotelRooms { get; set; } 
```

列表**HotelRooms**有 10 个项目。**我想找到AverageNightlyRate**的最大值 。

我正在使用 for 循环进行迭代。我能以有效的方式做到这一点吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-28T13:53:02.313

使用[Enumerable.Max](http://msdn.microsoft.com/en-us/library/bb343284.aspx)：

```
var maxAverageRate = HotelRooms.Max(r => r.RoomPriceDetails.AverageNightlyRate) 
```

* * *

如果`RoomPriceDetails`可以`null`，那么：

```
var maxAverageRate = HotelRooms.Where(r => r.RoomPriceDetails != null)
                               .Max(r => r.RoomPriceDetails.AverageNightlyRate); 
```

或者

```
var maxAverageRate = HotelRooms.Select(room => room.RoomPriceDetails)
                               .Where(price => price != null)
                               .Max(price => price.AverageNightlyRate); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T13:56:01.873

```
HotelRooms.Max (r => r.RoomPriceDetails.AverageNightlyRate ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-08-01T14:32:16.613

使用`Min()`or`Max()`时请记住，您的设计可能需要考虑实现`DefaultIfEmpty().`如果该`.Where`子句消除了所有元素，我们将在调用or时收到*“序列不包含元素”*错误。`Min()``Max()`

与其直接在我们的`Where`语句返回的集合上调用 Min 或 Max ，我们可以`Select()`得到我们感兴趣的属性列表。然后我们可以滑入`DefaultIfEmpty`. 调用`Min()`或`Max()`打开`DefaultIfEmpty`确保我们可以使用的集合。

```
var maxRate = HotelRooms.Where(r => r.RoomPriceDetails != null)
                        .Select(r => r.RoomPriceDetails.AverageNightlyRate)
                        .DefaultIfEmpty() // Now even if our where causes an empty selection list we will return DefaultIfEmpty.
                        .Max(); // Now we always have a gaurenteed value for max. 
```

# javascript - JavaScript 正则表达式查找以“.js”结尾但不是“-min.js”的字符串

> ID：14563530
> 
> 赞同：1
> 
> 时间：2013-01-28T13:52:03.623
> 
> 标签：javascript, regex

正如标题所述：谁能帮我弄清楚如何编写一个匹配以“.js”结尾的字符串但在给定一个以“-min.js”结尾的字符串时失败的 JavaScript 正则表达式。

例子：

hello.js -> 匹配

hellomin.js -> 匹配

hello-min.js -> 不匹配

hello-min-hello.js -> 匹配

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:11:37.697

使用负前瞻：

`(?!-min)[\w-]{4}\.js$`

**更新**

这也适用于 4 个字符之前`.js`：

`(?:(?!-min)[\w-]{4}|^[\w-]{1,3})\.js$`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T14:14:58.880

[使用基于上一个问题](https://stackoverflow.com/questions/406230/regular-expression-to-match-string-not-containing-a-word)的伪反转匹配：

```
^((?!-min\.).)*\.js$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:13:22.377

由于 JS 不支持负向后视，让我们使用负向前瞻！

```
var str = 'asset/34534534/jquery.test-min.js',
    reversed = str.split('').reverse().join('');

// And now test it
/^sj\.(?!nim-)/.test(reversed); // will give you false if str has min.js at the end 
```

好笑，对吧？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-11T07:01:57.843

我扩展了@robinCTS 的正则表达式以匹配具有多个点的文件路径（例如文件名末尾的版本号）以及以“.min.js”结尾的字符串：

```
(?:(?!(-|\.)min)[\w\.-]{4}|^[\w\.-]{1,3})\.js$ 
```

例子：

*   hello.js -> 匹配
*   hellomin.js -> 匹配
*   hellomin-2.4.3.js -> 匹配
*   hello-min-hello.js -> 匹配
*   hello-min.js -> 不匹配
*   hello.min.js -> 不匹配
*   hellomin-2.4.3-min.js -> 不匹配
*   hellomin-2.4.3.min.js -> 不匹配

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-28T14:00:31.793

您可以使用负面的lookbehind：

```
(?<!-min)\.js$ 
```

[例子](http://rubular.com/r/O1PEEBbAjF)

# r - 合并列以删除 NA

> ID：14563531
> 
> 赞同：62
> 
> 时间：2013-01-28T13:52:10.597
> 
> 标签：r, merge, na

我在 R 中有一些列，对于每一行，其中一个只会有一个值，其余的将是 NA。我想将这些与非 NA 值组合成一列。有谁知道这样做的简单方法。例如我可以有如下：

```
data <- data.frame('a' = c('A','B','C','D','E'),
                   'x' = c(1,2,NA,NA,NA),
                   'y' = c(NA,NA,3,NA,NA),
                   'z' = c(NA,NA,NA,4,5)) 
```

所以我会

```
'a' 'x' 'y' 'z'  
 A   1   NA  NA  
 B   2   NA  NA  
 C  NA   3   NA  
 D  NA   NA  4  
 E  NA   NA  5 
```

我会得到

```
 'a' 'mycol'  
  A   1  
  B   2  
  C   3  
  D   4  
  E   5 
```

包含 NA 的列的名称会根据查询中前面的代码而变化，因此我将无法显式调用列名，但我将包含 NA 的列的列名存储为向量，例如在本例`cols <- c('x','y','z')`中，所以可以使用`data[, cols]`.

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2018-04-15T09:32:58.377

基于的`dplyr::coalesce`解决方案可以是：

```
data %>% mutate(mycol = coalesce(x,y,z)) %>%
         select(a, mycol)
#   a mycol
# 1 A     1
# 2 B     2
# 3 C     3
# 4 D     4
# 5 E     5 
```

**数据**

```
data <- data.frame('a' = c('A','B','C','D','E'),
                 'x' = c(1,2,NA,NA,NA),
                 'y' = c(NA,NA,3,NA,NA),
                 'z' = c(NA,NA,NA,4,5)) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-28T13:56:08.097

您可以使用`unlist`将列转换为一个向量。之后，`na.omit`可用于删除`NA`s。

```
cbind(data[1], mycol = na.omit(unlist(data[-1])))

   a mycol
x1 A     1
x2 B     2
y3 C     3
z4 D     4
z5 E     5 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-11-05T13:40:32.217

这是一个更通用（但更简单）的解决方案，它扩展到具有无序 NA 的所有列类型（因子、字符等）。`is.na`该策略只是使用索引将其他列的非 NA 值合并到合并列中：

```
data$m = data$x  # your new merged column start with x
data$m[!is.na(data$y)] = data$y[!is.na(data$y)]  # merge with y
data$m[!is.na(data$z)] = data$z[!is.na(data$z)]  # merge with z

> data
  a  x  y  z m
1 A  1 NA NA 1
2 B  2 NA NA 2
3 C NA  3 NA 3
4 D NA NA  4 4
5 E NA NA  5 5 
```

请注意，`m`如果同一行中有多个非 NA 值，这将覆盖现有值。如果您有很多列，您可以通过循环来自动执行此操作`colnames(data)`。

* * *

## 回答 #4

> 赞同：14
> 
> 时间：2013-01-28T14:02:59.877

我会使用`rowSums()`这个`na.rm = TRUE`论点：

```
cbind.data.frame(a=data$a, mycol = rowSums(data[, -1], na.rm = TRUE)) 
```

这使：

```
> cbind.data.frame(a=data$a, mycol = rowSums(data[, -1], na.rm = TRUE))
  a mycol
1 A     1
2 B     2
3 C     3
4 D     4
5 E     5 
```

您必须直接调用该方法 ( `cbind.data.frame`)，因为上面的第一个参数不是数据框。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2013-01-28T13:57:21.307

像这样的东西？

```
data.frame(a=data$a, mycol=apply(data[,-1],1,sum,na.rm=TRUE)) 
```

给出：

```
 a mycol
1 A     1
2 B     2
3 C     3
4 D     4
5 E     5 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-09-20T18:55:02.203

最大值也有效。也适用于字符串向量。

```
cbind(data[1], mycol=apply(data[-1], 1, max, na.rm=T)) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-08-25T17:58:32.603

虽然这不是 OP 的情况，但似乎有些人喜欢基于总和的方法，如何以均值和模式思考，以使答案更具普遍性。这个答案与标题相匹配，这是很多人会发现的。

```
data <- data.frame('a' = c('A','B','C','D','E'),
                   'x' = c(1,2,NA,NA,9),
                   'y' = c(NA,6,3,NA,5),
                   'z' = c(NA,NA,NA,4,5))

splitdf<-split(data[,c(2:4)], seq(nrow(data[,c(2:4)])))

data$mean<-unlist(lapply(splitdf, function(x)  mean(unlist(x), na.rm=T) ) )
data$mode<-unlist(lapply(splitdf, function(x)  {
  tab <- tabulate(match(x, na.omit(unique(unlist(x) )))); 
                  paste(na.omit(unique(unlist(x) ))[tab == max(tab) ], collapse = ", " )}) )

data
  a  x  y  z     mean mode
1 A  1 NA NA 1.000000    1
2 B  2  6 NA 4.000000 2, 6
3 C NA  3 NA 3.000000    3
4 D NA NA  4 4.000000    4
5 E  9  5  5 6.333333    5 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-12-16T10:37:07.230

在相关链接（[在 paste() 中抑制 NAs](https://stackoverflow.com/questions/13673894/suppress-nas-in-paste/31508774#31508774)）中，我提供了一个`paste`带有`na.rm`选项的版本（不幸的名称为`paste5`）。

这样代码就变成了

```
cols <- c("x", "y", "z")
cbind.data.frame(a = data$a, mycol = paste2(data[, cols], na.rm = TRUE)) 
```

的输出`paste5`是一个字符，如果你有字符数据，它就可以工作，否则你需要强制转换为你想要的类型。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-10-15T12:48:54.957

如果你想坚持基地，

```
data <- data.frame('a' = c('A','B','C','D','E'),'x' = c(1,2,NA,NA,NA),'y' = c(NA,NA,3,NA,NA),'z' = c(NA,NA,NA,4,5))
data[is.na(data)]<-","
data$mycol<-paste0(data$x,data$y,data$z)
data$mycol <- gsub(',','',data$mycol) 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-05-03T21:13:09.730

`dplyr`使用and的一种可能性`tidyr`是：

```
data %>%
 gather(variables, mycol, -1, na.rm = TRUE) %>%
 select(-variables)

   a mycol
1  A     1
2  B     2
8  C     3
14 D     4
15 E     5 
```

在这里，它将数据从宽格式转换为长格式，从该操作中排除第一列并删除 NA。

# php - 异常在php代码中不起作用

> ID：14563541
> 
> 赞同：0
> 
> 时间：2013-01-28T13:52:40.800
> 
> 标签：php, exception, try-catch

我是 php 新手，所以这听起来很简单这是我的 php 代码

```
<?php
try
{
    echo "Hello";
}
catch (Exception $e)
{
    echo $e;
}
?> 
```

这输出`Hello`

现在我修改了代码以获得异常

```
<?php
try
{
    ech "Hello";
}
catch (Exception $e)
{
    echo $e;
}
?> 
```

但它什么也没打印。是不是应该打印错误。或者我做错了什么

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:58:56.557

您正在寻找的是[`ErrorException`](http://php.net/manual/en/class.errorexception.php).

您可以像这样注册错误处理程序：

```
function exception_error_handler($errno, $errstr, $errfile, $errline ) {
    throw new ErrorException($errstr, $errno, 0, $errfile, $errline);
}
set_error_handler("exception_error_handler"); 
```

并捕获错误：

```
try
{
    echo $a; //Use of undefined variable
}
catch (ErrorException $e)
{
    echo $e->getMessage();
} 
```

但是您不能将语法错误作为异常处理，无论是在 php 中还是在任何其他语言中。*当 php 脚本实际运行时出现致命错误*的原因是 php 被解释了。如果你试图用任何 php 编译器编译你的 php 脚本，你会在编译时遇到语法错误。

如果您想在发生致命错误时添加一些日志记录或类似的东西，您可以注册*关闭*功能（使用[`register_shutdown_function`](http://php.net/manual/en/function.register-shutdown-function.php)）：

```
register_shutdown_function( "MyShutDownHandler" );

function MyShutDownHandler() {
    //Do something here.
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T13:54:49.847

不，这是语法错误（或 PHP 术语中的解析错误）。代码从一开始就不会被执行，所以不会抛出异常。

还应该注意的是，PHP 核心函数也不会抛出异常，因为 PHP 5 引入了异常并且它们并没有删除旧的错误系统。因此，现在您必须同时处理错误（核心、旧扩展）和异常（新 OO 扩展、用户空间代码）。您可以通过（参见链接手册页上的示例）部分避免这种情况，[`ErrorException`](http://php.net/errorexception)但这仍然很痛苦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:16:27.807

我想在@PLB 和@fab 给出的出色答案中再添加一件事。

要捕获一个异常，它需要被抛出（有点道理不是吗？：P）。

我非常喜欢的一个例子是处理除以 0。

```
function divide($x, $y) {
    if ($y == 0) {
        $up = new Exception('Cannot divide by 0');
        throw $up; // :)
    }
    return $x/$y;
}

try {
    divide(3, 0);
    // more code can be added here, but is skipped if Exception is thrown.
} catch(Exception $e) {
    echo $e->getMessage();
} 
```

那么为什么这是`if`对函数中语句的改进呢？

一方面，您无需手动跳过 和 之间的`throw`代码`catch`。您可以拥有自己的异常（具有一些自定义功能，如果需要，可以记录它们），它们会自动通过调用堆栈传递，直到它们被捕获。

# c# - 带有参数条件的简单工厂，使用 Unity 2.0

> ID：14563545
> 
> 赞同：10
> 
> 时间：2013-01-28T13:52:55.853
> 
> 标签：c#, .net, dependency-injection, unity-container, factory

假设我有一个*使用条件参数*来确定如何创建s的简单工厂 ( `SimpleProductFactory`) ，如下所示：*`Product`*

 *```
public static class SimpleProductFactory
{
    public static Product MakeProduct(Condition condition)
    {
        Product product;
        switch(condition)
        {
            case Condition.caseA:
                product = new ProductA();
                // Other product setup code
                break;
            case Condition.caseA2:
                product = new ProductA();
                // Yet other product setup code
                break;
            case Condition.caseB:
                product = new ProductB();
                // Other product setup code
                break;
        }
        return product;
    }
} 
```

该工厂*由一些*处理包含如下条件的运行时数据的客户端使用：

```
public class SomeClient
{
    // ...
    public void HandleRuntimeData(RuntimeData runtimeData)
    {
        Product product = SimpleProductFactory.MakeProduct(runtimeData.Condition);
        // use product...
    }
    // ...
}

public class RuntimeData
{
    public Condition Condition { get; set; }
    // ...
} 
```

**如何使用 Unity 2.0 实现相同的构造行为？**
重要的部分是条件 ( `Condition`) 确定如何创建和设置`Product`，并且条件仅在运行时已知并且每次`MakeProduct(...)`调用都不同。（“其他产品设置代码”处理一些委托内容，但也可能处理其他初始化，并且需要成为构造的一部分。）

**`Product`（或 IProduct 接口）的容器注册应该如何完成？**
我应该使用`InjectionFactory`建筑吗？我怎么做？

```
// How do I do this?
container.RegisterType<Product>(???) 
```

**我需要做什么才能*在客户端代码*中提供条件？**

~~天真的客户端代码（来自以前的编辑）突出显示最后一个问题，它解释了几个答案的措辞：~~

 ~~```
public class SomeClient
{
    // ...
    public void HandleRuntimeData(RuntimeData runtimeData)
    {
        // I would like to do something like this,
        // where the runtimeData.Condition determines the product setup.
        // (Note that using the container like this isn't DI...)
        Product product = container.Resolve<Product>(runtimeData.Condition);
        // use product...
    }
    // ...
} 
```~~  ~~[（我在 Stackoverflow 上阅读了很多类似的问题，但无法根据我的需要来满足它们以及它们的答案。）]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T20:23:25.353

您不应该使用容器来做出这样的运行时决策。相反，通过容器将您的工厂注入客户端。如果工厂需要来自容器的依赖项，请在创建时将它们注入工厂。

将您的工厂更改为实际对象，而不仅仅是作为静态方法的容器，然后注入它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-30T10:32:04.013

你不应该以任何方式在你的类中注入或使用容器。这包括使用参数。这样做的原因是这样做会将您的代码绑定到容器。如果您必须实现另一个容器甚至是新版本，那么您将面临大量工作。

但是，对于您描述的 Unity（和其他一些注入框架）的情况，有一个称为“自动工厂”的功能。它使用 .NET Func<TResult> 委托。这是一个 .NET 功能，因此它不会将您的类与 Unity 绑定。

这是如何使用它，首先注册你的服务。不要使用 a 注册它，`ContainerControlledLifetimeManager`否则您每次都会得到相同的实例。

```
unity.RegisterType<IOpenFileService, OpenFileService>(); 
```

然后为它注册一个自动化工厂。

```
unity.RegisterType<Func<IOpenFileService>>(); 
```

然后可以将其注入任何需要它的类中。

```
unity.RegisterType<ViewModelBase, OptionsFileLocationsViewModel>(
    new InjectionConstructor(new ResolvedParameter<Func<IOpenFileService>>()); 
```

如果你现在解析它的一个实例，`OptionsFileLocationsViewModel`它不会被注入一个实例，`IOpenFileService`而是一个函数，如果被调用，它将返回一个`IOpenFileService`.

```
private readonly Func<IOpenFileService> openFileServiceFactory;

private string SelectFile(string initialDirectory)
{
    var openFileService = this.openFileServiceFactory();
    if (Directory.Exists(initialDirectory))
    {
        openFileService.InitialDirectory = initialDirectory;
    }
    else
    {
        openFileService.InitialDirectory =
            System.Environment.GetFolderPath(System.Environment.SpecialFolder.Desktop);
    }

    bool? result = openFileService.ShowDialog();
    if (result.HasValue && result.Value)
    {
        return openFileService.FileName;
    }

    return null;
} 
```

我希望我的这个简短解释能激励你解决你的问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T13:55:40.130

您可以为您的注册定义唯一名称；

```
container.RegisterType<Product ,ProductA>("ProductA");
container.RegisterType<Product, ProductB>("ProductB"); 
```

或在配置文件中；

```
<register type="Product" mapTo="ProductA" name="ProductA" />
<register type="Product" mapTo="ProductB" name="ProductB" /> 
```

那么您可以根据注册解析实例：

```
string productName = "ProductB";
Product product = container.Resolve<Product>(productName); 
```

您也可以使用如下类作为名称；

```
public class ProductTypes
{
    public static string ProductA
    {
        get
        {
            return "ProductA";
        }
    }

    public static string ProductB
    {
        get
        {
            return "ProductB";
        }
    }
} 
```

然后;

```
container.RegisterType<Product,ProductA>(ProductTypes.ProductA);
container.RegisterType<Product,ProductB>(ProductTypes.ProductB); 
```

并解决它；

```
Product product = null;

switch(condition)
{
    case Condition.caseA:
        product = container.Resolve<Product>(ProductTypes.ProductA);
        // Other product setup code
        break;
    case Condition.caseA2:
        product = container.Resolve<Product>(ProductTypes.ProductA2);
        // Yet other product setup code
        break;
    case Condition.caseB:
        product = container.Resolve<Product>(ProductTypes.ProductB);
        // Other product setup code
        break;
}

return product; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-04T13:43:05.873

正如@ChrisTavares 所描述的那样，正如[在这个答案中所描述的那样，解决方案是](https://stackoverflow.com/questions/1943576/is-there-a-pattern-for-initializing-objects-created-via-a-di-container/1945023#1945023)*将工厂*简单地注入到客户端`SomeClient`中。此外，为了遵循[依赖倒置原则](http://en.wikipedia.org/wiki/Dependency_inversion_principle) [（DIP）](http://www.objectmentor.com/omSolutions/oops_what.html)，客户端应该只依赖于一个抽象工厂，例如工厂接口`IProductFactory`。

这实际上只是一个简单的依赖注入（DI）的问题。Unity 的使用仅作为 DI 促进者来处理（构造函数）依赖项的解析。只有具体工厂`ProductFactory`需要在统一容器中注册。产品的创建完全由工厂处理，使用“新”关键字完全可以。

```
container.RegisterType<IProductFactory, ProductFactory>(); 
```

以下是解决方案的样子：

```
public interface IProductFactory
{
    IProduct MakeProduct(Condition condition);
}

internal class ProductFactory : IProductFactory
{
    public IProduct MakeProduct(Condition condition)
    {
        IProduct product;
        switch (condition)
        {
            case Condition.CaseA:
                product = new ProductA();
                // Other product setup code
                break;
            case Condition.CaseA2:
                product = new ProductA();
                // Yet other product setup code
                break;
            case Condition.CaseB:
                product = new ProductB();
                // Other product setup code
                break;
            default:
                throw new Exception(string.Format("Condition {0} ...", condition));
        }
        return product;
    }
}

public class SomeClient
{
    private readonly IProductFactory _productFactory;

    public SomeClient(IProductFactory productFactory) // <-- The factory is injected here!
    {
        _productFactory = productFactory;
    }

    // ...
    public void HandleRuntimeData(RuntimeData runtimeData)
    {
        IProduct product = _productFactory.MakeProduct(runtimeData.Condition);
        // use product...
    }
    // ...
}

public class RuntimeData
{
    public Condition Condition { get; set; }
    // ...
}

public interface IProduct
{ //...
}
internal class ProductB : IProduct
{ //...
}
internal class ProductA : IProduct
{ //...
}
public enum Condition { CaseA, CaseA2, CaseB } 
```~~*

# c++ - 如何在 Eigen 中创建复数矩阵

> ID：14563546
> 
> 赞同：3
> 
> 时间：2013-01-28T13:52:59.687
> 
> 标签：c++, matrix, eigen

我有一个大小为 NxM 的矩阵，并想创建一个大小为 N/2 x M 的复数矩阵，其中实数是矩阵的左侧，复数部分是右侧。

我想出了这个：

```
auto complexmatrix= Shapes.block(0,0,Shapes.rows(),data.cols()) * std::complex<float>(1,0) +
    Shapes.block(0,data.cols(),Shapes.rows(),data.cols())*std::complex<float>(0,1);
std::cout << complexmatrix<< std::endl; 
```

这可以优化还是有更好的方法来创建复杂的矩阵。

总而言之，代码最终是这样的。感觉就像我从 Eigen 中遗漏了一些东西。目标是转换为复杂符号并从每一行中减去逐行平均值。

```
//Complex notation and Substracting Mean.
Eigen::MatrixXcf X = Shapes.block(0,0,Shapes.rows(),data.cols()) * std::complex<float>(0,1) +
    Shapes.block(0,data.cols(),Shapes.rows(),data.cols())*std::complex<float>(1,0);
Eigen::VectorXcf Mean = X.rowwise().mean();
std::complex<float> *m_ptr = Mean.data();
for(n=0;n<Mean.rows();++n)
    X.row(n) = X.row(n).array() - *m_ptr++; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T22:30:39.350

这是一个更简单的代码版本，可以更好地使用 Eigen：

```
int cols = 100;
int rows = 100;
MatrixXf Shapes(rows, 2*cols);
MatrixXcf X(rows, cols);
X.real() = Shapes.leftCols(cols);
X.imag() = Shapes.rightCols(cols);
X.array().colwise() -= X.rowwise().mean().array(); 
```

# javascript - 在js中将字符串转换为浮点数

> ID：14563553
> 
> 赞同：0
> 
> 时间：2013-01-28T13:53:17.803
> 
> 标签：javascript, html, django

我在谷歌上搜索了半个小时，发现了一些著名的解决方案，但它们对我不起作用。

```
var latitude = results[0].geometry.location.lat();
var longitude = results[0].geometry.location.lng();
//alert(latitude + ' - ' + longitude);
$('#lat').val(parseFloat(latitude));
$('#long').val(parseFloat(longitude)); 
```

以上是我的代码。`invalid literal for int() with base 10: '48.2767085'`在 django 中，我仍然是错误的，这是`lat`价值。为什么是这样？我正在将字符串转换为浮点数，然后设置值，为什么它仍然认为这是一个字符串？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T13:56:47.037

问题不在于它是一个字符串，问题在于该字符串*不包含有效的 int*。

```
>>> int('4.2')
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ValueError: invalid literal for int() with base 10: '4.2'
>>> int('4')
4
>>> float('4.2')
4.2 
```

# javascript - 滑动时如何在twitter bootstrap中自动定位sidenav

> ID：14563556
> 
> 赞同：2
> 
> 时间：2013-01-28T13:53:27.710
> 
> 标签：javascript, css, twitter-bootstrap

我一直在尝试使用[这个问题](https://stackoverflow.com/questions/9350818/fixed-sidebar-navigation-in-fluid-twitter-bootstrap-2-0)的答案来定位 sidenav 。目前，我可以通过以下方式将菜单位置固定到页面：

```
<div style="position: fixed" ..>
  ..
</div> 
```

或将其添加到相应的 css 规则中。它工作正常，但位置在 jumbotron 副标题之后开始，并在我滚动时保持在那里。当我向下滚动时，我希望它不要覆盖页面顶部的 jumbotron 并移动到页面顶部的固定位置（就像在[文档页面](http://twitter.github.com/bootstrap/getting-started.html)中一样，除了我不关心活动的亮点）

我试图复制文档的源代码并`docs.css`在页面中添加文件，但由于某种原因它不起作用。我怎样才能做到这一点？

**编辑**

这里有一张图说清楚

![在此处输入图像描述](../Images/5adc69dff9eeda820e3a4a88a995943b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:41:56.407

这里有一些让你开始的东西：http: [//jsfiddle.net/panchroma/s9XpJ/](http://jsfiddle.net/panchroma/s9XpJ/)

我使用了非常有趣 的[词缀行为，并为您提供了很多选择。](http://twitter.github.com/bootstrap/javascript.html#affix)

我的示例中的重要内容是在我指定要监视的 div 的 HTML 中

```
<div "span3" id="side-nav" data-spy="affix" data-offset-top="200">
 <!-- nav here -->
</div> 
```

并指定 data-offset-top ，这是在附加 div 之前需要滚动的距离。

类**词缀**将在添加时添加到 div 中，因此在 CSS 中我已经指定了接下来会发生什么。

```
#side-nav.affix{
top:10px;
} 
```

您通常需要在页面上重新定位附加的 div，因为默认情况下，引导程序会将其位置定义为**固定**，从而使其脱离正常流程。

我还使用媒体请求添加了一些 CSS 来微调视点变窄时发生的情况。Bootstrap 站点上的示例删除了最窄屏幕的侧导航的附加行为。我在这里重复了一遍。

祝你好运！

# wcf - 单元测试 WCF 服务时，AddressAccessDeniedException“您的进程没有访问此命名空间的权限”

> ID：14563557
> 
> 赞同：2
> 
> 时间：2013-01-28T13:53:33.703
> 
> 标签：wcf

我正在测试我的 WCF 服务，但我需要伪造行为，因为我的服务是使用自定义工厂引导的。这是我为测试编写的代码：

```
var channelFactory = new ChannelFactory<IDomainWriteService>(
   new CustomBinding(
      new BinaryMessageEncodingBindingElement(), 
      new HttpTransportBindingElement()),
   new EndpointAddress(new Uri("local")));
var service = channelFactory.CreateChannel(); 
```

我有一个测试初始化​​，它正在创建一个新的 ServiceHost：

```
internal static void StartService()
{
    Instance = new ServiceHost(typeof (DomainWriteService));
    Instance.Open();
} 
```

我通过以下方式在我的 MsTest 项目中配置了一个假端点：

```
<service name="xxx.DomainWriteService">
  <endpoint binding="basicHttpBinding" bindingConfiguration=""
    name="local" bindingName="http" contract="xxx.IDomainWriteService" />
  <host>
    <baseAddresses>
      <add baseAddress="http://xxx/service" />
    </baseAddresses>
  </host>
</service> 
```

但是当我运行我的测试时，我得到了这个运行时错误：

```
 Class Initialization method xxx.ClassInitialize threw exception. System.ServiceModel.AddressAccessDeniedException: 
System.ServiceModel.AddressAccessDeniedException: 
HTTP could not register URL **http://+:80/service/**. 
Your process does not have access rights to this namespace 
(see http://go.microsoft.com/fwlink/?LinkId=70353 for details). ---> 
System.Net.HttpListenerException: Access is denied. 
```

我在 Windows 8 上

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T14:44:31.963

您需要使用`netsh add urlacl`来允许监听进程的访问，以便能够在端口 80 上接收，（或与其他监听器共享端口 80）

```
netsh http add urlacl url=http://+:80/service user=YOURUSER 
```

`YOURUSER`运行侦听器的进程的凭据在哪里，例如`DOMAIN\User`.

另请参阅：[WCF ServiceHost 访问权限](https://stackoverflow.com/questions/885744/wcf-servicehost-access-rights)

# python - 模块没有子模块

> ID：14563559
> 
> 赞同：0
> 
> 时间：2013-01-28T13:53:35.677
> 
> 标签：python, import, module

我正在制作一个烧瓶网络应用程序，但我有一些我不明白的东西。

我的`app`模块文件夹结构如下：

```
app\
  | static\
  | templates\
  | tmp\
  | __init__.py
  | run.py <= debug script
  | toolxls.py <= helper functions 
  | views.py 
```

在我的**初始化**.py 中：

```
from flask import Flask

app = Flask(__name__)
from app import views 
```

现在如果我从 IDLE 导入应用程序模块：

```
>>> import app
>>> dir(app)
['Flask', '__builtins__', '__doc__', '__file__', '__name__', '__package__', '__path__', 'app', 'views'] 
```

模块`app`没有`toolxls`子模块。如何将 toolxls.py 添加到 中`app`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T13:58:59.823

在 Python 中，导入包时*不会*导入子模块。如果要访问它们的命名空间，则必须显式导入它们。

```
import app.toolxls 
```

# opencl - 一组中的opencl本地内存半线程得到正确执行

> ID：14563560
> 
> 赞同：0
> 
> 时间：2013-01-28T13:53:39.750
> 
> 标签：opencl, gpgpu, gpu

我使用本地内存在 opencl 中编写了一个内核以获得更快的执行速度。这是我第一次使用本地内存。我的 global_work_size = 16 和 local_work_size = 8。

Opencl 内核：mapper.cl

```
#pragma OPENCL EXTENSION cl_khr_fp64 : enable
typedef struct data
{
  double dattr[10];
  int d_id;
  int bestCent;
}Data;

typedef struct cent
{
  double cattr[5];
  int c_id;
}Cent;

__kernel void mapper(__global int *keyMobj, __global int *valueMobj, __global Data *dataMobj, __global Cent *centMobj)
{
    int bx   = get_group_id(0);    
    int tx   = get_local_id(0);
    int size = get_local_size(0);

    __local double localData[8][2];
    __local double localCent[2][2];
    __local int local_id[8];

    int index = tx + bx*size;

    int j,k,color=0;
    double dmin=1000000.0, dx;

    for(j=0; j<2; j++)
    {
          if(tx<2)
              localCent[tx][j] = centMobj[tx].cattr[j];

          localData[tx][j] = dataMobj[index].dattr[j];
          local_id[tx] = dataMobj[index].d_id;

    }
barrier(CLK_LOCAL_MEM_FENCE); 

    for(j=0; j<2; j++)     
     {
        dx = 0.0;
        for(k=0; k<2; k++)
            dx+= ((localCent[j][k] - localData[index][k]) * (localCent[j][k] - localData[index][k]));

        if(dx<dmin)            
        {  color = j;   
           dmin = dx;
        }
     }  
    keyMobj[index]   = color;
    valueMobj[index] = local_id[tx];
} 
```

在上面的内核中，我分别从全局内存中获取结构 dataMobj 的前 8 个对象和 centMobj 的 2 个对象到本地内存 localData 和 localCent。就我的编程而言，我使用了正确的 for 循环来获取数据。

但它只让我正确执行前 8 个工作项（对于第一个工作组）。它不会使用剩余块的下一个剩余 8 个工作项来获取数据。

请告诉我这到底是如何工作的，如果我出错了，请告诉我。我还使用内存栅栏进行线程同步。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T22:02:44.483

该程序的问题是您超出了数组的范围。这就解释了为什么你可以只用 8 个工作项而不是 16 个工作项来获得正确的结果。

`localData``local`是内存空间中双精度数组的数组：

```
 __local double localData[8][2]; 
```

我们还有一个变量`index`，定义为：

```
int index = tx + bx*size;
//get_local_id(0) + get_group_id(0) * get_local_size(0) = get_global_size(0) 
```

在 16 个工作项的情况下，索引的值范围为 [0-15]。在以下行：

```
dx+= ((localCent[j][k] - localData[index][k])
     * (localCent[j][k] - localData[index][k])); 
```

即使本地数组的范围只能是 [0-8]，也可以`localData`使用变量引用该变量。`index`

# javascript - 如何在 Javascript 中指定要复制的内容

> ID：14563562
> 
> 赞同：0
> 
> 时间：2013-01-28T13:53:44.450
> 
> 标签：javascript, html

我有一个小脚本可以复制下拉列表中的内容。But I want the drop to display the firstname and when the firstname is selected I want it to copy the lastname outside. 我需要使用除`VALUE`

JS：

```
function copy() {
    document.getElementById("label").innerHTML = 
        document.getElementById("mySelect").value
} 
```

HTML：

```
<div id="label"></div>

<select id="mySelect" onchange="copy();">
<option value="">Select a person:</option>
    <option value="firstname" id="lastname">Firstname</option>
    <option value="firstname" id="lastname">Firstname</option>
    <option value="firstname" id="lastname">Firstname</option>
    <option value="firstname" id="lastname">Firstname</option>
</select> 
```

或在这里查看[http://jsfiddle.net/r6Fus/](http://jsfiddle.net/r6Fus/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:29:29.427

`id`你不应该仅仅为了提供`<option>`额外的数据而滥用元素的属性。正如[另一个答案](https://stackoverflow.com/questions/4564659/adding-additional-data-to-select-options-using-jquery/4564711#4564711)中所建议的那样，您可以改为指定一个附加属性`data-lastname`，例如稍后在您的脚本中访问该属性（以下代码未经测试）。

您的**HTML**可能如下所示：

```
<select id="mySelect" onchange="copy();">
<option value="">Select a person:</option>
    <option value="firstname" data-lastname="lastname">Firstname</option>
    <option value="firstname" data-lastname="lastname">Firstname</option>
    <option value="firstname" data-lastname="lastname">Firstname</option>
    <option value="firstname" data-lastname="lastname">Firstname</option>
</select> 
```

您的 JS 函数可能如下所示：

```
function copy() {
  var sel = document.getElementById('mySelect');
  var selected = sel.options[sel.selectedIndex];
  var firstname = selected.value;
  var lastname = selected.getAttribute('data-lastname');
  // do stuff...
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T14:28:52.773

为每个添加一个`data-surname`属性`<option>`：

```
<option value="tcs" data-surname="Washington" >tcs</option> 
```

（您可以使用 ID 执行此操作，但在这种情况下，数据属性似乎是更好的解决方案）

然后更新您的函数以获取 surname 属性：（建议使用 jQuery）

```
function copy( {
  $("#label").html($("#mySelect option:selected").data("surname"))
} 
```

**工作示例**（尝试菜单中的第一个选项） - [jsFiddle](http://jsfiddle.net/r6Fus/756/)

# css - 表格行的顶部和底部边框

> ID：14563567
> 
> 赞同：1
> 
> 时间：2013-01-28T13:53:59.967
> 
> 标签：css, css-tables

这个怎么做？我想在表格行的顶部和底部边框上使用不同的颜色。如果我使用 Chrome 会正确呈现它`display: block`，但我不知道这是否是正确的做法。但是，我希望它在 IE8 中工作，但我不知道如何。

我准备了一个适用于 Chrome 的小提琴：http: [//jsfiddle.net/s6LQ7/](http://jsfiddle.net/s6LQ7/)

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T14:07:29.717

这适用于 Firefox 和 IE8：

```
table {
    width: 100%;
    border-collapse: separate; /* Not really necessary unless you use normalize.js */
    border-spacing: 0px; /* take out spaces between cells */
}

tr {
    background-color: #ccc;
}

td {
    width: 50%;
    border-top: 1px solid #f00; 
    border-bottom: 1px solid #0f0; /* move spacing to the cell */
} 
```

以上使用标准的 HTML 显示系统，因此它可以在 IE8 上运行。我有：

*   设置`border-collapse`为`separate`，防止表格折叠边框，因此绘制每个边框
*   添加`border-spacing`了设置以`0px`删除单元格之间的间距
*   删除了`display`指令，允许表格显示为表格
*   将指令移动`border`到单元格，而不是行。

[http://jsfiddle.net/s6LQ7/1/](http://jsfiddle.net/s6LQ7/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-28T14:01:39.223

您是否尝试将边框放在单元格而不是行上？另外，除非您使用类作为选择器，否则大多数 css 规则将不适用于表格单元格。

# javascript - 显示集群，而不是单个引脚

> ID：14563568
> 
> 赞同：0
> 
> 时间：2013-01-28T13:54:04.670
> 
> 标签：javascript, google-maps, google-maps-api-2

我有一个 js 代码，在那里我尝试创建一个集群，以便如下图所示：![在此处输入图像描述](../Images/6bdfdf4e288d2008ba9253348e93cd99.png)

但是，我只想提供集群，而不是到达提供单个引脚的位置。我的代码如下：

```
<script type="text/javascript">    
function initialize()
{
    <?= $geoData ?>
    if (GBrowserIsCompatible()) {     
        var map = new GMap2(document.getElementById("map_canvas"));
        map.setCenter(new GLatLng(50, 0), 1);
        map.addControl(new GSmallMapControl());         
        // Create our "tiny" marker icon
        var icon = new GIcon(G_DEFAULT_ICON);       
        icon.image = "http://chart.apis.google.com/chart?cht=mm&chs=24x32&chco=FFFFFF,008CFF,000000&ext=.png";              
        var markers = [];
        for (var i = 0; i < <?= $total_records ?>; i++) {
          var latlng = new GLatLng(geo_data.records[i].lat, geo_data.records[i].lng);
          var marker = new GMarker(latlng, {icon: icon});
          markers.push(marker);
        }
    var zoom = 14;
            var size = 60;
    var markerCluster = new MarkerClusterer(map, markers,  {maxZoom: zoom, gridSize: size} );
   }
}
</script>

<script type="text/javascript">
 initialize();
</script> 
```

为了摆脱单个集群，我应该对我的代码进行哪些更改？

# javascript - 复制 2 个可观察数组，然后进行比较

> ID：14563575
> 
> 赞同：0
> 
> 时间：2013-01-28T13:54:29.997
> 
> 标签：javascript, jquery, knockout.js

我在代码中声明了 2 个可观察数组，如下所示

```
self.versionDataByProduct = ko.observableArray([]);
self.copiedSavedVersionData = ko.observableArray([]); 
```

当我保存数据时，我将 self.versionDataByProduct 中的所有值复制到 self.copiedSavedVersionData 中，如下所示

```
 self.copiedSavedVersionData(self.versionDataByProduct()); 
```

然后我尝试在名为 compareArray 的按钮事件上比较 2 个可观察数组，如下所示

```
 this.compareArray = function () {
        debugger;
        var results = [];
        var differences = ko.utils.compareArrays(self.versionDataByProduct(), self.copiedSavedVersionData());
        ko.utils.arrayForEach(differences, function (difference) {
            if (difference.status === "deleted") {
                results.push(difference.value);
            }
        });
        return results;
    }; 
```

但这不起作用。因为在我将一个可观察数组复制到另一个并在可观察数组中进行一些修改之后，它会自动更新其他数组。我不想要那个。我希望我的可观察数组 self.copiedSavedVersionData 在复制后保持原样。我怎样才能实现它？如果我做了任何更改，我只是在跟踪它。如果数组被更改，那么我将在我的代码中启用按钮。目前我不知道如何进行脏跟踪，所以找到了这个替代方案但不起作用。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T13:56:49.390

您可以`slice`为此使用函数：

```
 self.copiedSavedVersionData(self.versionDataByProduct().slice(0)); 
```

在这种情况下，ko 将克隆数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:48:44.177

尝试：

```
ko.utils.arrayPushAll(self.copiedSavedVersionData, self.versionDataByProduct()); 
```

# php - Magento 重新路由控制器，我错过了什么？

> ID：14563578
> 
> 赞同：0
> 
> 时间：2013-01-28T13:54:35.090
> 
> 标签：php, magento

我正在尝试覆盖洋红色的控制器，但它似乎无法正常工作。在我的模块 config.xml 文件中，我有以下内容

```
<config>
    <frontend>
        <routers>
            <customer>
                <args>
                    <use>standard</use>
                    <modules>
                        <Mymodule_Sales before="Mage_Customer_Account">Mymodule_Sales_Account</Mymodule_Sales>
                    </modules>
                </args>
            </customer>
        </routers>
    </frontend>
</config> 
```

所以我的问题是，我还缺少什么？这就是我需要做的所有事情来覆盖控制器吗？我的模块正在被 magento 拾取，因为我已经能够覆盖一个块。只是有这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:11:18.337

我做错的唯一一件事是错误地说明了 before="" 路径

而不是拥有

```
Mage_Customer_Account 
```

它需要...

```
Mage_Customer 
```

我想你必须告诉magento要覆盖哪个模块，magento会通过你简单地创建文件和动作来找出你试图覆盖的控制器和动作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:13:14.897

假设您在 /app/etc/modules/Company_Modulename.xml 中启用了您的模块

```
<config>
    <modules>
        <Company_Modulename>
            <version>0.9.8</version>
        </Company_Modulename>
    </modules>
    <frontend>
        <routers>
            <modulename>
                <use>standard</use>
                <args>
                    <modules>
                        <Company_Modulename before="Mage_Customer">Company_Modulename</Company_Modulename>
                    </modules>
                </args>
            </modulename>
        </routers>
        <layout>
            <updates>
                <modulename>
                    <file>company_modulename.xml</file>
                </modulename>
            </updates>
        </layout>
    </frontend>
</config> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:05:53.577

您是否也编辑了您的 php 和 xml？请参阅[此处](http://www.magentocommerce.com/wiki/5_-_modules_and_development/0_-_module_development_in_magento/how_to_overload_a_controller)以获取有关覆盖控制器的所有步骤的有用参考

# sql - 如何获取 GROUP BY 子句中最后一个属性的值

> ID：14563580
> 
> 赞同：2
> 
> 时间：2013-01-28T13:54:39.623
> 
> 标签：sql, postgresql

对SQL不是很精通。我正在尝试从数据库表中获取用户名、登录尝试次数和登录尝试的最后日期。表架构是这样的：

```
username character varying,
logindate timestamp,
result character varying,
clientip character varying 
```

我能够从以下查询中获取用户名和尝试次数：

```
SELECT USERNAME, COUNT(USERNAME) FROM LOGINTABLE GROUP BY USERNAME 
```

是否可以从同一个查询中获取上次登录的日期？请指教。

使用的数据库：POSTGRESQL

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T13:55:52.553

是的，使用`MAX()`

```
SELECT  USERNAME, 
        COUNT(USERNAME) AS TotalCount, 
        MAX(logindate) AS LastLoginDate
FROM    LOGINTABLE 
GROUP   BY USERNAME 
```

# python - 如何让 Eclipse 在键入时向我显示方法的签名？

> ID：14563584
> 
> 赞同：5
> 
> 时间：2013-01-28T13:54:45.193
> 
> 标签：python, eclipse, autocomplete

基本上，我在 Eclipse 中有代码完成工作（据我所知，它“工作”），但它不如 Visual Studio 所拥有的那么好。我将它设置为在按下 ( 时调用自动完成，但是这样做不会显示方法参数的列表。我必须将鼠标悬停在方法上才能发生这种情况，我希望它在我发生时发生类型，如 VS 中的 Intellisense。

如果相关，我将 Aptana 3 与 PyDev 一起使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:44:41.400

在 Eclipse 中执行此操作的最佳方法是按`Ctrl`+`space`

[http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/tips/jdt_tips.html](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/tips/jdt_tips.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-07T15:14:09.120

正如乔纳斯卡尔森所说，只需按`Ctrl`+ 。`Space`

# tomcat - 为什么 JMX 中显示的线程数与 tomcat 设置不匹配？

> ID：14563589
> 
> 赞同：0
> 
> 时间：2013-01-28T13:55:15.523
> 
> 标签：tomcat, jvm, java, jmx

我的Tomcat设置：

```
maxThreads="100" minSpareThreads="25" maxSpareThreads="75" 
```

根据 JMX，我当前繁忙的线程是 3

```
currentThreadsBusy = 3 
```

但

```
currentThreadCount= 100 
```

为什么它用完了我所有的线程？当前线程不应该类似于`78`（75 + 3）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:46:44.690

具有 maxSpareThreads 参数的 Tomcat 的最新版本是 5.5。您的日志中应该有警告，如下所述：[Tomcat 7 maxSpareThreads ,liveDeploy ,debug](https://stackoverflow.com/questions/4756918/tomcat-7-maxsparethreads-livedeploy-debug)

# backbone.js - 如何构建 Backbone Marionette 应用程序？

> ID：14563590
> 
> 赞同：2
> 
> 时间：2013-01-28T13:55:15.900
> 
> 标签：backbone.js, marionette

我有一个要使用 Backbone Marionette 创建的应用程序。基本上，它的 UI 结构非常简单。有：

*   两个顶级区域，一个用于菜单，另一个用于内容
*   菜单区域显示菜单视图
*   内容区域显示两个相邻的视图
    *   左边是子导航
    *   正确的是实际内容

例如，菜单可能会在应用程序的两个部分之间切换，例如“邮件”、“日历”和“联系人”。这些部分中的每一个都有自己的子导航，应显示在子导航视图中，并且每个部分都有一个默认视图。例如，在“邮件”部分，这可能是“收件箱”视图，在“日历”部分，这可能是“月”视图。

所以，一般来说，我们有一个嵌套导航。

如何使用路由器实现这一点？

我的想法是有一个应用级路由器，它只为部分提供路由，例如`#mail`和`#calendar`.

子导航视图应该有自己的路由器。因此，例如，邮件子导航视图可以有一个用于`inbox`和的路由器`sent`。

最后我想要一个路由`#mail/inbox`，但是第一部分应该由顶级路由器处理，第二部分应该由下级路由器处理。

我的问题是我是否可以以子级路由器不需要知道“邮件”等URL前缀的方式嵌套路由器，并且发生级联路由。这可能吗？

还是这种方法完全错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:09:01.410

我不知道 Marionette 是否对此有解决方案，但有一个名为[Backbone.subroute](https://github.com/ModelN/backbone.subroute)的插件，它提供了您正在寻找的那种功能。

以这种方式分离子路由是一种合法的模式，我以前也使用过。然而，我已经得出结论，在主应用程序路由器中拥有每个部分的“主”路由并不是要走的路，因为它将应该一起存在的关注点分开。相反，我已经开始为路由器实现一个公共基类，它提供了一个“根”URL：

```
var BaseRouter = Backbone.Router.extend({

    //Root path for all routes defined by this router. Override this in a deriving
    //class for keeping route table DRY.
    urlRoot: undefined,

    //override the route method to prefix the route URL
    route: function(route, name, callback) {
      if(this.urlRoot) {
        route = (route === '' ? this.urlRoot : this.urlRoot + "/" + route);
      }

      //define route
      Backbone.Router.prototype.route.call(this, route, name, callback);

      //also support URLs with trailing slashes
      Backbone.Router.prototype.route.call(this, route + "/", name, callback);
    }
}); 
```

用法：

```
var CalendarRouter = BaseRouter.extend({
    //all routes will be relative to "calendar"
    urlRoot:"calendar",
    routes: {
        //...
    }
}): 
```

当然，就我而言，这也是有道理的，因为我在基类中定义了其他常见的路由器任务。只是为了避免为每个路由 url 键入额外的“日历”前缀并不能真正保证它。

**编辑：**澄清一下，Backbone.SubRoute 插件不会强迫您在主路由器中定义根路由，您可以像我建议的基类一样使用它。但是如果你想要的只是一个路由前缀，那么基类是一个更轻、更简单的解决方案。

# python - 独立切换py2app？

> ID：14563591
> 
> 赞同：2
> 
> 时间：2013-01-28T13:55:16.500
> 
> 标签：python, wxpython, wxwidgets, py2app

我使用 py2app 从脚本创建的应用程序不适用于较新版本的 OS X。有人告诉我这是因为构建是*部分独立*的，这意味着它需要我的 wxPython 版本，但不包含它。我怎样才能让它*完全独立*（包括我的 wxPython 版本），或者*不是独立*的，它使用主机安装的任何版本的 wxPython？哪个更可取，如果我只有一台 Mac 和一个版本的 wxPython，我如何检查它是否有效？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T21:21:30.693

1.  确保你使用的是最新的 py2app，看起来他们最近解决了一些与半独立相关的问题，也许这也可能影响你的构建。
2.  使用来自 Python.org 的 Python，而不是随操作系统安装的 Apple 的 Python。
3.  不要在设置脚本中使用 --semi-standalone 标志或类似选项。

这应该就是它的全部了。最后我检查了创建独立应用程序是使用 Python.org Python 时的默认设置，默认情况下它应该复制到您的应用程序导入的其他包（包括 wx）中。您可以查看生成的应用程序包的内部以确切了解它包含和不包含的内容，然后您可以根据需要调整设置脚本。

# javascript - ko.toJSON($root,null,2) 返回错误

> ID：14563595
> 
> 赞同：3
> 
> 时间：2013-01-28T13:55:35.073
> 
> 标签：javascript, knockout.js, requirejs, knockout-2.0

我正在尝试使用`<pre>`标签调试 ko（版本：2.2.1）：

```
 <pre data-bind="text:ko.toJSON($root,null,2)"></pre> 
```

但我得到了这个：

```
Uncaught Error: Unable to parse bindings.
Message: TypeError: Object object has no method 'getType';
Bindings value: text:ko.toJSON($root,null,2) 
```

**更新：**

似乎 $root 对象实际上是 windows 对象，为什么会发生，我如何确保它仍然在我的 ViewModel 范围内？

场景是这样的：

我有一个视图，其中还包含一个弹出模板。当用户单击一个按钮时，弹出窗口会显示，这就是我收到此错误的时候（$root 失去了 ViewModel 范围并成为窗口对象）。

**看法：**

```
 <a  href="#" class="caspButton" data-bind="visible: editMode(), click:setEditMode">Done</a> 
        <!-- ko if: entities().length > 0 -->
        //THIS OPENS THE PROBLEMATIC POPUP
        <a href="#caspPopupAddEntities" class="caspButton caspPlus" data-bind="visible: editMode(), click:bindPopup.bind($root)"></a>
        <!-- /ko -->

        <!-- ko if: parentChildArr().length > 0 -->
        <a href="sp/book/addChildEntity" class="caspButton caspPlus"  data-bind="visible: editMode(),cafeHrefParam: {entity: 'entity',st:'st',parentEntityType: parentTypeName,parentPropName:parentPropName }" title="Add Entity" data-cafeDialog="popup"></a>
        <!-- /ko -->

        <header>
            <h2 class="caspFancy" data-bind="text: $root.title"></h2>
        </header>

        <div class="caspData">
            <!-- ko if: entities().length > 0 -->
            <ul data-bind="foreach: entities">
                <li data-bind="css: {caspEditable: $root.editMode(),caspListSeperator: !$root.editMode()}"> 
                    <a class="caspDelete caspPosition" href="#removeEntities" title="Delete" data-bind="visible: $root.editMode(),click: $root.bindPopup"
                    data-delete="true"></a>

                    <div class="caspInnerData">
                        <a class="caspBookLink" data-bind="attr: {href: 'sp/book/book' }, cafeHrefParam: { chapter: 'chapter', page: 'page', id: $data.id }, text: name,css: {caspBullet: !$root.editMode()}"></a>

                        <!-- ko if: shortDescription -->
                        <p data-bind="text: shortDescription"></p>
                        <!-- /ko -->
                    </div>
                    <!-- end .caspInnerData -->
                </li>
            </ul>
            <!-- /ko -->

            <!-- ko if: parentChildArr -->
            <ul data-bind="foreach: parentChildArr">
                <!-- ko if: children().length > 0 -->
                <li data-bind="css: {caspEditable: $root.editMode()}"> 

                    <div class="caspInnerData"> 
                    <div class="caspParent"> 
                        <span data-bind="text: $root.parentTypeName"></span> :
                         <a data-bind="attr: {href: 'sp/book/book' }, cafeHrefParam: { chapter: $root.parentTypeNamePlural, page: 'page', id: $data.id }, text: parent" class="caspBookLink"></a> 
                     </div>                   

                        <ul data-bind="foreach:children">
                            <li>
                                <a class="caspDelete" href="#removeEntities" title="Delete" data-bind="visible: $root.editMode(),click: $root.bindPopup"
                                data-delete="true"></a>

                                <a data-bind="attr: {href: 'sp/book/book' }, cafeHrefParam: { chapter: 'chapter', page: 'page', id: $data.id }, text: name" class="caspBookLink caspBullet"></a>                             
                            </li>
                        </ul>

                    </div>
                    <!-- end .caspInnerData -->
                </li>
                <!-- /ko -->
            </ul>
            <!-- /ko -->                

        </div>
        <!-- end .caspData -->

//HERE IS THE PROBLEM - '$root' becomes the windows object when i open this popup
 <div id="caspPopupAddEntities" data-role="popup" class="popup">
            <div class="caspBtnWrapper"> 

                <a href="#" data-role="button" class="caspButton cafeRight" data-bind="click:$root.saveEntity.bind($root)">Done</a>
                <a href="#" data-role="button" class="caspButton cafeLeft" data-bind="click:$root.cancel">Cancel</a>
            </div>
            <!-- end .caspBtnWrapper -->
            <header>
             <h1 class="caspFancy">Add New</h1>

         </header>
         <div class="caspDataWrapper" data-bind="with:$root.addItem()">
            <fieldset data-role="fieldcontain">
                <label for="title">Title</label>
                <input type="text" name="title" id="title" data-bind="value:name"
                />
            </fieldset>
            <fieldset data-role="fieldcontain">
                <label for="shortDescription">Overview</label>
                <textarea class="caspTextarea" type="text" name="shortDescription"
                id="shortDescription" data-bind="value:shortDescription" />
            </fieldset>
            <fieldset data-role="fieldcontain">
                <label for="mission">Mission</label>
                <textarea class="caspTextarea" type="text" name="mission"
                id="mission" data-bind="value:description" />
            </fieldset>
            <fieldset data-role="fieldcontain">
                <label for="period">Period</label>
                <input type="text" placeholder="  Set date and Time" name="period"
                id="period" data-bind="value:periodName" />
            </fieldset>
            <fieldset data-role="fieldcontain">
                <label for="ownedBy">Owned By</label>
                <input placeholder= "Select" type="text" name="ownedBy" id="ownedBy" data-bind="value:ownedBy,cafeAutoComplete: {source: 'users'}">
            </fieldset>
            <fieldset data-role="fieldcontain">
                <label for="assignedTo">Assigned to</label>
                 <input placeholder= "Select" type="text" name="assignedTo" id="assignedTo" data-bind="value:assignedTo,cafeAutoComplete: {source: 'users'}">
            </fieldset>
        </div>
        <!-- end .caspDataWrapper -->
    </div>
    <!-- end #caspPopupAddEntities -->

</div>
<!-- end content -->
</div>
<!-- end page --> 
```

**视图模型：**

```
 /**
 * The module for the common Entities ViewModel
 */
define(['ko', 'komap', 'kopost', 'ca', 'sp/utils', 'sp/db'], function (ko, komap, kopost, ca, util, db) {

    /**
     * The Entities ViewModel.  This VM just exposes a collection of entities in a single property.
     * The model to retrieve is obtained from the last portion of the URL path.
     */

    function EntitiesViewModel(ctx, data) {
        this.init(ctx,data);

    }

    // EntitiesViewModel.prototype = new ca.ViewModel({});

    // EntitiesViewModel.prototype.constructor = EntitiesViewModel;

    ko.utils.extend(EntitiesViewModel.prototype,(function(){

        init = function(ctx,data){
            var self = this;
            strategyId = ctx.param.st;
            entitySet = db.getEntitySetFromElementType(ctx.param.entity);
                parentEntitySet = _getParentEntitySet(entitySet);                      
                childPropName = util.getChildEntityPropertyName(parentEntitySet);

            self.editMode = ko.observable(false);
            self.entities = ko.observableArray([]);
            self.parentChildArr = ko.observableArray([]);   
            self.users = ko.observableArray([]);

            self.parentPropName = util.getParentEntityPropertyName(entitySet);
            self.parentTypeName = util.getParentTypeName(entitySet);    
            self.parentTypeNamePlural = util.getPluralName(self.parentTypeName);

            self.title = ko.computed(function () {
                // temporary method to get the plural name.
                return util.getPluralName(entitySet.collectionName);
            });

            self.addItem = ko.observable(entitySet.addNew());
            self.addItem().name = ko.observable("");
            self.addItem().shortDescription = ko.observable("");
            self.addItem().mission = ko.observable("");
            self.addItem().period = ko.observable("");
            self.addItem().ownedBy = ko.observable("");
            self.addItem().assignedTo = ko.observable("");

            _loadData(self);
        },

        bindPopup = function (o, e) {
            openPopup(o, e);
            selectedEntity = o;
            var popupId = $(e.target).attr('href');
            ko.applyBindings(self, $('#overlay').find(popupId).get(0));
            db.User.toArray( this.users );
        },

        startEdit = function (o, e) {
            self.editMode(true);
            e.stopPropagation();
        },

        cancel = function (o, e) {  
            closePopup(o, e);
            this.addItem (entitySet.addNew());
        },

        saveEntity = function (o, e) {
            var self = this;
            var parent = parentEntitySet.addNew({ id: strategyId });
            parentEntitySet.attachOrGet(parent);

            var entity = {
                name: self.addItem().name,
                shortDescription: self.addItem().shortDescription,
                description: self.addItem().description
            }

            entity[self.parentPropName] = parent;

            var newEntity = entitySet.addNew(entity);
            entitySet.attachOrGet(newEntity);
            entitySet.add(newEntity);

            db.saveChanges().done(function (i) {
                closePopup(o, e);                               
                _loadData(self);
                self.addItem (entitySet.addNew());
                kopost.publish("ca.sp.entitiesChanged", "Add new Entity");

            }).fail(function (error) {
                self.addItem (entitySet.addNew());
                console.log('Error = ' + error);

            });

            //detach the entities after save to avoid having them saved again
            entitySet.detach(newEntity);
            parentEntitySet.detach(parent);

            e.stopPropagation();
        };

        return {
            init: init,
            setEditMode: setEditMode,
            bindPopup: bindPopup,
            cancelDelete: cancelDelete,
            startEdit: startEdit,
            cancel: cancel,
            deleteEntity: deleteEntity,
            saveEntity: saveEntity
        }

    }()));
    return EntitiesViewModel;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:08:24.617

`$data`指上下文中的当前项。一个简单的`ko.toJSON($data)`应该告诉你结果。

# android - Android Google Maps V2 in Fragment

> ID：14563598
> 
> 赞同：2
> 
> 时间：2013-01-28T13:55:43.020
> 
> 标签：android, google-maps

我正在 android 17 中创建一个应用程序，并且我正在尝试包含 Google Maps v2。

在我当前的设置中，我有一个带有两个选项卡的 ActionBar，一个指向旅行信息，一个指向 Google 地图。

我可以让谷歌地图显示在主要活动中，但我不能让地图显示在片段中。

这是我的地图类代码：

```
// Will hold the information for the "Maps" tab
public class Maps extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        ActionBar actionBar = getActionBar();
        actionBar.setDisplayShowTitleEnabled(false);
        actionBar.setCustomView(R.layout.rowlayout);
        actionBar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

        // Venue Map

        LayoutInflater inflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        RelativeLayout layoutView = (RelativeLayout)inflater.inflate(R.layout.action_bar_tab, null);
        TextView tabText = (TextView) layoutView.findViewById(R.id.tabText);
        ImageView tabImage = (ImageView) layoutView.findViewById(R.id.tabImage);

        String venueMapTab = "Travel Information";
        Tab tab = actionBar.newTab();
        TabListener<VenueMap> dayOne = new TabListener<VenueMap>(this,
                venueMapTab, VenueMap.class);
        tab.setTabListener(dayOne); 
        tabText.setText("Venue Map");
        tab.setCustomView(layoutView);
        actionBar.addTab(tab);

        // Google Maps

        RelativeLayout layoutViewMaps = (RelativeLayout)inflater.inflate(R.layout.action_bar_tab, null);
        tabText = (TextView) layoutViewMaps.findViewById(R.id.tabText);
        tabImage = (ImageView) layoutViewMaps.findViewById(R.id.tabImage);

        String googleMapsTab = "Google Maps";
        tab = actionBar.newTab();
        TabListener<GoogleMaps> dayTwo = new TabListener<GoogleMaps>(this,
                googleMapsTab, GoogleMaps.class);
        tab.setTabListener(dayTwo);
        tabText.setText("Google Maps");
        tab.setCustomView(layoutViewMaps);
        actionBar.addTab(tab);

    } 
```

这是我的谷歌地图片段

```
@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    getActivity().setContentView(R.layout.google_maps);
} 
```

还有 google_maps.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
  android:id="@+id/map"
  android:layout_width="match_parent"
  android:layout_height="match_parent"
  class="com.google.android.gms.maps.MapFragment"/> 
```

还有我的日志猫错误：

```
01-28 13:44:09.830: E/AndroidRuntime(22253): FATAL EXCEPTION: main
01-28 13:44:09.830: E/AndroidRuntime(22253): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.zshare.blog/com.zshare.blog.Maps}: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.os.Handler.dispatchMessage(Handler.java:99)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.os.Looper.loop(Looper.java:137)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.ActivityThread.main(ActivityThread.java:5039)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at java.lang.reflect.Method.invokeNative(Native Method)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at java.lang.reflect.Method.invoke(Method.java:511)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at dalvik.system.NativeStart.main(Native Method)
01-28 13:44:09.830: E/AndroidRuntime(22253): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class fragment
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.Activity.setContentView(Activity.java:1881)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at com.zshare.blog..VenueMap.onActivityCreated(VenueMap.java:32)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.Fragment.performActivityCreated(Fragment.java:1703)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:903)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1035)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.Activity.onCreateView(Activity.java:4736)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.view.LayoutInflater.inflate(LayoutInflater.java:466)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.Activity.setContentView(Activity.java:1881)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at com.zshare.blog.VenueMap.onActivityCreated(VenueMap.java:32)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.Fragment.performActivityCreated(Fragment.java:1703)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:903)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1057)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.BackStackRecord.run(BackStackRecord.java:682)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1435)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.Activity.performStart(Activity.java:5113)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2153)
01-28 13:44:09.830: E/AndroidRuntime(22253):    ... 11 more
01-28 13:44:09.830: E/AndroidRuntime(22253): Caused by: java.lang.IllegalArgumentException: Binary XML file line #2: Duplicate id 0x7f05003b, tag null, or parent id 0x1020002 with another fragment for com.google.android.gms.maps.MapFragment
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.app.Activity.onCreateView(Activity.java:4722)
01-28 13:44:09.830: E/AndroidRuntime(22253):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:680)
01-28 13:44:09.830: E/AndroidRuntime(22253):    ... 35 more 
```

如果我在活动中显示地图，它可以工作，但在片段中我收到错误。任何解决此问题的帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T14:22:40.007

由于`onActivityCreated()`is a method on `Fragment`，看起来您正在尝试让片段加载片段，虽然可以使用 Android 支持库，但它不适用于您正在使用的本机片段。也不清楚你为什么要这样做。

您的“Google 地图片段”应该*或* `com.google.android.gms.maps.MapFragment`应该*继承自* `com.google.android.gms.maps.MapFragment`，但它不应该是尝试*加载* `com.google.android.gms.maps.MapFragment`的单独片段。

# php - 部分贷记凭证的税收计算错误

> ID：14563603
> 
> 赞同：0
> 
> 时间：2013-01-28T13:55:47.837
> 
> 标签：php, magento, magento-1.7

我们正在为在 Magento 社区版 1.7.0.1 上运行的客户开发一个项目。

我们遇到了以下问题：

当我们创建部分贷项通知单时，税额的重新计算已正确完成。（*=总税字段*）

当我们在查看部分贷项通知单的详细信息时单击“*总税”字段时，我们刚刚创建的详细信息会弹出。*（默认 Magento 行为）。

税率计算错误：

![在此处输入图像描述](../Images/01d785be8bfd1cdfcd663e6ca9c61e2f.png)

如您所见，“总 TVA”（=总税）是正确的，但详细税率“TVA (21%)”不正确。

**“TVA (21%)”旁边的给定金额与我们创建的完整订单的总税额相匹配。**

基本上这意味着这没有正确重新计算......你们中的任何人也有这个问题吗？会不会是 Magento 的错误？知道解决这个问题的最干净的方法是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:27:15.593

尝试

```
$quote = $this->getQuote();
$items = $quote->getAllItems();

foreach ($items as $item)
{

$item->calcRowTotal();
 $subtotal += $item->getRowTotal();
$baseSubtotal += $item->getBaseRowTotal();
$taxamount+= $item->getTaxAmount();
$basetaxamount += $item->getBaseTaxAmount();
} 
```

看到[这个线程](http://www.magentocommerce.com/boards/viewthread/227867/#t358174)- 我认为这是一个magento问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:45:56.463

设法通过编辑 app/design/frontend/your_package/your_theme/template/tax/order/tax.phtml 来解决这个问题：

查找以下内容：

```
<?php
    $percent    = $info['percent'];
    $amount     = $info['amount'];
    $rates      = $info['rates'];
    $isFirst    = 1;
?> 
```

并将其替换为：

```
<?php
    $percent    = $info['percent'];
    $amount     = $_source->getTaxAmount();
    $rates      = $info['rates'];
    $isFirst    = 1;
?> 
```

# java - Log4j：将参数添加到日志文件名

> ID：14563609
> 
> 赞同：2
> 
> 时间：2013-01-28T13:56:03.413
> 
> 标签：java, jakarta-ee, log4j

我有网络应用程序，我记录了一些关于用户请求的信息。我需要在日志文件名中包含客户端 IP 地址，因此我会为每个 IP 获取单独的日志文件。我可以用参数定义一些文件命名模式（在我的例子中是 ip）吗？我有字符串 ip 变量。

文件名示例：`mylog-127.0.0.1.log`

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T02:03:55.100

如果你可以切换到 logback，我建议你改用[SiftingAppender](http://logback.qos.ch/manual/appenders.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:48:17.690

似乎，我需要动态创建附加程序

# c# - 使用泛型创建自定义控件

> ID：14563612
> 
> 赞同：3
> 
> 时间：2013-01-28T13:56:08.407
> 
> 标签：c#, .net, winforms, user-controls, custom-controls

我们希望创建一个 WinForms 自定义控件（从 .net 控件派生）并能够从设计器视图的工具箱中拖放它。然而，每当我们有一个带有泛型的控件时，我们就无法做到这一点，因为当设计者试图创建类的实例时，出于显而易见的原因，它不知道该实例必须是什么类型。

有人知道解决这个问题的方法吗？

提前致谢

======编辑===========

我们想做的是有例子：

```
public class MyDataGridView<T> : DataGridView where T : class{
...
} 
```

通过删除泛型，我们可以在设计器中看到预览，就好像它在普通 DataGridView 中一样，但正如我上面用泛型解释的那样，我们无法使用设计器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:05:52.417

我遇到了同样的问题，结果是：不要在设计器视图中使用通用控件！您可以以编程方式创建它的实例，但您没有预览。当您添加显式设置泛型参数的派生类时，它可能会起作用。

# jquery - 在 IE 中将 XML 解析为字符串时类型不匹配

> ID：14563616
> 
> 赞同：1
> 
> 时间：2013-01-28T13:56:19.373
> 
> 标签：jquery, internet-explorer, xml-serialization, xmlhttprequest

在过去的几天里，我一直在重构我的 javascript，以便它可以满足使用 IE7/8/9 的要求。

下面的代码从选择框中获取文件名，然后进行 AJAX 调用以检索 XML 文件，然后将其序列化以便可以读取。

它与 Firefox、Safari 和 Chrome 完美配合。

**代码**

```
 //this function will take the parameter of filename to then make an AJAX request to the location of that file on a server
function getXML()
{
    //get filename from selection box "template_list"
    filename = $('#template_list').val();

    if (filename != "NULL")
        {
            //make AJAX request to server for template file 
            jQuery.ajax
            (
                {
                    type : "GET",
                    url : "xml\/" + filename,
                    dataType : "xml",
                    success : xmlToString
                }
            );
        }   
}

//loads xmlResponse from AJAX call into a string
function xmlToString(xmlResponse)
{

    try 
    {
        //For FF, Opera, Safari
        xml = (new XMLSerializer()).serializeToString(xmlResponse);
        writeEditDoc(xml);
    }

    catch (e) 
    {       
            // Internet Explorer.
            xml = new ActiveXObject("Microsoft.XMLDOM");
            xml.loadXML(xmlResponse);
            writeEditDoc(xml);
            //

    }

} 
```

**错误**

Internet explorer 不喜欢这行代码；

```
xml.loadXML(xmlResponse); 
```

它抛出

> SCRIPT13：类型不匹配

**我试过的**

*   将 AJAX 调用中的数据类型从“xml”更改为“text/xml”
*   在 JS 中使用原生 .xml() 函数

我在其他帖子上看到过在服务器端进行处理。但是，我无法对服务器进行任何更改，因为它没有这个项目的范围。

**编辑添加 XML**

```
<?xml version="1.0" encoding="UTF-8"?> 
```

```
<text>${Prologue} </text>

<listOfTags>
    <Prologue fixed='n' size='100' type='textBox' value='' ></Prologue>
    <Title fixed='n' size='100' type='comboBox' value='' ></Title>
    <Surname fixed='n' size='100' type='textBox' value='' ></Surname>
    <ProductName fixed='n' size='100' type='textBox' ></ProductName>
    <VOLNumber fixed='n' size='100' type='numberBox' ></VOLNumber>
    <AppointmentDate fixed='n' size='100' type='datePicker' ></AppointmentDate>
    <AppointmentSlot fixed='n' size='100' type='datePicker' ></AppointmentSlot>
    <Epilogue fixed='n' size='100' type='textBox' ></Epilogue>
</listOfTags>

<listOfTypes>
    <textBox></textBox>
    <numberBox></numberBox>
    <datePicker></datePicker>
    <dropDown></dropDown>
    <timeBox></timeBox>
    <titleBox></titleBox>
</listOfTypes> 
```

这个问题必须有一些破解方法。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T11:34:56.297

修正了自己，

确认在 IE7、IE9 和 FF 上工作

```
 function getXML()
{

    var xmlDoc;
    var xmlloaded = false;

    //get filename from selection box "template_list"
    var xmlFile = $('#template_list').val();

    if (xmlFile != "NULL")      
    {

        xmlFile = "xml\/" + xmlFile;

        try
        {

            var xmlhttp = new XMLHttpRequest();
            xmlhttp.open("GET", xmlFile, false);
            //console.log("1 getXML - Normal Path");
        }

        catch (Exception)
        {
            var ie = (typeof window.ActiveXObject != 'undefined');

            if (ie)
            {

                xmlDoc = new ActiveXObject("Microsoft.XMLDOM");
                xmlDoc.async = false;
                while(xmlDoc.readyState != 4) {};
                xmlDoc.load(xmlFile);
                //console.log("1 getXML - IE Path");                
                xmlToString(xmlDoc);
                xmlloaded = true;
            }
            else
            {

                xmlDoc = document.implementation.createDocument("", "", null);
                xmlDoc.onload = xmlToString(xmlDoc);
                //console.log("1 getXML - Else Case");
                xmlDoc.load(xmlfile);
                xmlloaded = true;
            }
        }

        if (!xmlloaded)
        {

            xmlhttp.setRequestHeader('Content-Type', 'text/xml')
            xmlhttp.send("");
            //console.log("1 getXML - End");
            xmlToString(xmlhttp.responseXML);        
            xmlloaded = true;

        }

    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:00:58.427

尝试使用[jQuery.parseXML()](http://api.jquery.com/jQuery.parseXML/)

```
function xmlToString(xmlResponse)
{
    try 
    {
        xml = $.parseXML(xmlResponse);
        console.log(xml);
    }
    catch (e) 
    {       

    }
} 
```

# math - 同时应用多个百分比

> ID：14563617
> 
> 赞同：1
> 
> 时间：2013-01-28T13:56:19.147
> 
> 标签：math, percentage, mathematical-optimization, simultaneous

我有一个源值，我需要应用多个百分比，但同时，百分比必须考虑其他百分比。

举个例子：
值 = 100
百分比1 = 10%
百分比2 = 15%
百分比3 = 17%

我需要计算出最终值是多少，但是在添加 Percentage1 时，它必须考虑 Percentage2 和 Percentage3 的值。

我目前管理此问题的唯一方法是使用其他百分比的最后一个值递归计算该值，直到没有更多变化，但我什至不确定这是否正确。

有没有更聪明的计算方法？

编辑：这基本上是为了计算多重费用。因此，假设您在 eBay 上发布了一个列表，并且您在 eBay 上列出了 10% 的费用，而买家通过贝宝购买了商品，并且您为贝宝交易支付了 15% 的费用，然后您又被收取了 17% 的费用，原因是运输，我们正在尝试计算最终费用是多少，然后相应地调整价值。

这是我正在使用的代码：

```
 Dim Value As Decimal = 100
    Dim Fee1Percent As Decimal = 0.1
    Dim Fee2Percent As Decimal = 0.15
    Dim Fee3Percent As Decimal = 0.17

    Dim PreviousFee1 As Decimal
    Dim PreviousFee2 As Decimal
    Dim PreviousFee3 As Decimal

    Dim Fee1 As Decimal
    Dim Fee2 As Decimal
    Dim Fee3 As Decimal

    Do
        PreviousFee1 = Fee1
        PreviousFee2 = Fee2
        PreviousFee3 = Fee3

        Fee1 = Math.Round((Value + PreviousFee2 + PreviousFee3) * Fee1Percent, 4, MidpointRounding.AwayFromZero)
        Fee2 = Math.Round((Value + PreviousFee1 + PreviousFee3) * Fee2Percent, 4, MidpointRounding.AwayFromZero)
        Fee3 = Math.Round((Value + PreviousFee1 + PreviousFee2) * Fee3Percent, 4, MidpointRounding.AwayFromZero)

    Loop Until PreviousFee1 = Fee1 AndAlso PreviousFee2 = Fee2 AndAlso PreviousFee3 = Fee3 
```

这是我的递归列表，所以你从初始值 100 开始，然后使用之前其他费用的值，直到没有更多变化（四舍五入到小数点后 4 位）

```
10.0        15.00       17.00
13.200      19.0500     21.2500
14.0300     20.1675     22.4825
14.2650     20.4769     22.8136
14.3291     20.5618     22.9061
14.3468     20.5853     22.9315
14.3517     20.5917     22.9385
14.3530     20.5935     22.9404
14.3534     20.5940     22.9409
14.3535     20.5941     22.9411
14.3535     20.5942     22.9411
14.3535     20.5942     22.9411 
```

所以在这种情况下，我的最终总和是 157.8888

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:13:29.583

有几种方法可以设计这个分数函数：

*   乘以百分比：`0.10 * 0.15 * 0.17`*值
*   百分比的最小值：`min(0.10, 0.15, 0.17)`* 值 = `0.10`* 值
*   加权百分比（使用权重，`0.7`加起来为）：​​ 值`0.1``0.2``1.0``(0.10 * 0.7 + 0.15 * 0.1 + 0.17 * 0.2)`
*   ...

这取决于您要优化的内容

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:09:22.657

问题是我的计算方法错误：我必须使用百分比的反向计算来标记基本价格

因此，使用 10%、15% 和 17%，计算如下：100 / (1 - 0.1 - 0.15 - 0.17) = 172.414

证明：
10% - 17.2414
15% - 25.8621
17% - 29.3103
最终总数为 72.414，剩下的正好是 100。

# regex - Vim：使用自定义模式扩展行

> ID：14563631
> 
> 赞同：0
> 
> 时间：2013-01-28T13:56:52.423
> 
> 标签：regex, vim

录制宏很好，但我的 .vimrc 中有这个，我发现它非常有用：

```
""""""""""""""""""""""""""""""""""""""""""""""""
" ,p prepares and ,a applies a pattern
"    $x = array("@@@"=>"@@@");        (type ,p here)
"    text                             (type ,a here)
" gives you: 
"    $x = array("text"=>"text");
" and moves to the next line to repeat
""""""""""""""""""""""""""""""""""""""""""""""""
nnoremap ,p "ryy
nnoremap ,a "edd"rPV:s/@@@/<C-r>e<Backspace>/g<CR>j 
```

一旦你习惯了这一点，它（至少对我来说）比录制宏要快得多。

我的问题是：

这可以改变以识别不同的参数吗？当前替换仅识别一个（整个当前行）并将其放置在原`@@@`处。

我想把它改进成这样：

```
$x = array("{{1}}"=>"{{2}}"); // {{3}}    (type ,p here)
key, value, some explanation              (type ,a here) 
```

并使用它，获得类似：

```
$x = array("key"=>"value"); // some explanation 
```

我对 vimscript 或如此动态的正则表达式不是很流利（我的意思是，捕获可变数字或字符串）。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:28:52.687

这张线图有效，但应该有更优雅的解决方案：

```
nnoremap ,a :let li=split(getline('.'),', ')<cr><esc>dd"rP:s/{{1}}/\=li[0]/g\|s/{{2}}/\=li[1]/g\|s/{{3}}/\=li[2]/g<cr> 
```

`,p`映射不需要更改。

![在此处输入图像描述](../Images/111577bbb99b0d61d79e712595144bff.png)

**编辑**

刚刚有时间，这应该可以满足您的要求：

你可以把它放在你的 .vimrc

```
function! Doit4u(vline)
    let o = @r
    let vlist = split(a:vline, ', ')
    for v in vlist
        let n = '{{'.(1+index(vlist,v)) .'}}'
        let o = substitute(o,n,v,'g')
    endfor  
    call setline(line("."),o)
endfunction 
nnoremap ,p "ryy
nnoremap ,a :call Doit4u(getline('.'))<cr> 
```

# python - Python VISA串行轮询函数

> ID：14563634
> 
> 赞同：2
> 
> 时间：2013-01-28T13:56:57.193
> 
> 标签：python, serial-port, polling, visa, gpib

我的一种**GPIB**仪器有问题。这是一个相当古老的协议，它被称为 IEEE-488-1978。我一直在尝试获取该版本 IEEE-488 的参考手册，但没有成功。

问题在于，为了读取仪器的状态寄存器，它需要**串行轮询功能**（如其参考手册所述）。我不知道如何在 Python 中使用**PyVISA**这样做。

例如，我用来从设备读取的是`_instrument.ask("RV")_`，其中的`_RV_`意思是`_Read Version_`。另外，为了写一个像温度这样的参数，我会写`_instrument.write("ST20.00")_`，其中的`_ST20.00_`意思是`_Set Temperature to 20.00 Celcius_`。

我一直在尝试找到一个 ASCII 命令以使用`_ask_`Python/VISA 命令发送到仪器并获得返回`_Status Register Byte_`，但似乎没有什么可行的。

如果有人有关于如何使用 Python/VISA 传递串行轮询功能的建议，那可以解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-08T14:02:46.120

1975 年，IEEE 创建了 IEEE-488-1975 标准，描述了一种数字通信总线，有时也称为[GPIB](https://en.wikipedia.org/wiki/IEEE-488)。它在 1978 年进行了修订。它描述了硬件接口，但没有描述命令和数据的格式。1987 年，他们引入了描述标准代码、格式、协议和通用命令的 IEEE-488.2-1987 标准。

现在回到你的问题。

pyvisas`visa.GpibInstrument`类有一个名为的属性`stb`，您可以使用它来访问状态字节。从来源：

```
@property
def stb(self):
    """Service request status register."""

    return vpp43.read_stb(self.vi) 
```

所以你可以简单地做

```
instrument = visa.instrument('GPIB::01')  # Assuming a GPIB device on channel 1
print instrument.stb  # Print status register 
```

如果您的设备符合 IEEE-488.2，您还有一个选择。您可以发送常用命令`*STB?`

```
instrument = visa.instrument('GPIB::01')  # Assuming a GPIB device on channel 1
print instrument.ask('*STB?')  # Print status register 
```

# javascript - 悬停时显示图像名称.. 使用 jquery 代码

> ID：14563637
> 
> 赞同：1
> 
> 时间：2013-01-28T13:57:13.180
> 
> 标签：javascript, jquery

这个 html 代码

```
<div id="imgDisp">
</div> 
```

这个jquery

```
$(document).ready(function() {
var imgSrc = "images/newIMG.png";

$("#imgDisp").css({
    background: "url("+imgSrc+") repeat"
});

var newImg = new Image();
newImg.src = imgSrc; 

newImg.onload = function() {
    var imgHeight = newImg.height;
    var imgWidth = newImg.width;

    $("#imgDisp").css({
        width : imgWidth*10,
        height: imgHeight*10
    });
}
}); 
```

通过这段代码，我将图像水平重复 10 次，垂直重复 10 次。即我得到的一个 10x10 的盒子。

现在我尝试了一些方法，这样当我将鼠标悬停在图像上时，图像的名称就会出现。但是图像名称应该是它存在的数字。即第 2 行第 3 列的悬停图像其名称应显示为 i=2, j=3。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:04:13.033

`mousemove`您可以使用事件`pageX`/成员获取鼠标的位置`pageY`（通常您还必须减去偏移量，但在我的示例中，所有内容都与左上角齐平）：

```
$("#imgDisp").css({
        width : imgWidth*10,
        height: imgHeight*10
    }).on('mousemove', function (e) {
        var i = Math.ceil(e.pageX / imgWidth);
        var j = Math.ceil(e.pageY / imgHeight);
    }); 
```

[http://jsfiddle.net/xgbed/2/](http://jsfiddle.net/xgbed/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:46:50.447

像这样添加所有 id 图像，`var images = $("#img1, #img2, #img3,.... #img10");` 然后在悬停时使用`$(this).attr('id');`

# ios - 如何使用自动布局来移动视图

> ID：14563641
> 
> 赞同：0
> 
> 时间：2013-01-28T13:57:29.780
> 
> 标签：ios, autolayout

当我删除另一个子视图时，我希望我的子视图移动到顶部并且它的 superView 会缩小。

我有一个视图，称为 topView。里面有三个视图：toField、fromField、subjectTextView。

我添加了以下约束来实现这一点，但它们不起作用：当 toField 被删除时，没有任何反应，topView 保持不变。

```
NSDictionary *viewsDictionary = NSDictionaryOfVariableBindings(_fromField, _toField, _subjectTextView);
NSArray *layoutConstraints = [NSLayoutConstraint constraintsWithVisualFormat:@"V:|[_toField][_fromField][_subjectTextView]|" options:0 metrics:nil views:viewsDictionary];
[_topView addConstraints:layoutConstraints]; 
```

我已经阅读了[Apple 参考资料](https://developer.apple.com/library/mac/#documentation/UserExperience/Conceptual/AutolayoutPG/Articles/formatLanguage.html#//apple_ref/doc/uid/TP40010853-CH3-SW1)，但没有任何内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T17:38:44.287

使用界面生成器集：

`topView`在和之间进行超级查看的顶部空间`_toField`

`_toField`和之间的垂直间距`_fromField`

`_fromField`和之间的垂直间距`_subjectTextView`

superview 和superview 之间的底部空间`_subjectTetView`（这必须是负数 - 比如说 -20.0）

隐藏 时`subjectTextView`，只需将其高度约束设置为 0.0，`topView`就会缩小。

# symfony - SonataAdmin：如何管理角色？

> ID：14563642
> 
> 赞同：0
> 
> 时间：2013-01-28T13:57:31.630
> 
> 标签：symfony, symfony-sonata

如何管理sonataAdmin 中的**角色？**

我想在管理员中添加新角色并使用它。

如何显示仪表板表取决于用户角色？

示例：如果用户具有特定角色，只想显示一些组表，不想显示所有内容

![在此处输入图像描述](../Images/db5fe93f7d17427375cfbee98328c656.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T13:36:33.400

只需定义一个好的角色层次结构，它必须是好的

# sql - 具有多个一对多关联的参照完整性

> ID：14563648
> 
> 赞同：0
> 
> 时间：2013-01-28T13:58:14.420
> 
> 标签：sql, database, referential-integrity

我将用一个例子来解释我的情况。

我有以下表格：`persons`, `places`, `pictures`. 人和地方都有很多图片。在保持参照完整性的同时，在数据库方案中表达这一点的最佳方式是什么？

1.  我可以为每个可能的关联添加一个列，但是当还有其他有图片的东西时，这会创建很多空白字段。
2.  `persons`我可以在and`pictures`和`places`and之间创建关联表`pictures`。但是，外键将在关联表中，我不能强制在删除地点等时删除图片。

目前我倾向于第二种方法，但我不喜欢它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:28:50.200

没有一种万能的解决方案可以满足您的所有需求。但我以前见过的一个是

3) 为将共享关系的项目引入一个基表：

```
CREATE TABLE Entities (
    EntityID int not null primary key,
    EntityType varchar(10) not null,
    constraint CK_EntityTypes CHECK (EntityType in ('Person','Place')),
    constraint UQ_Entities_WithTypes UNIQUE (EntityID,EntityType)
) 
```

然后建立你的`People`和`Places`表：

```
CREATE TABLE People (
    PersonID int not null PRIMARY KEY,
    EntityType AS CAST('Person' as varchar(10)) persisted,
    ...Other columns...
    constraint FK_People_Entities FOREIGN KEY (PersonID,EntityType) references Entities (EntityID,EntityType)
)

CREATE TABLE Places (
    PlaceID int not null PRIMARY KEY,
    EntityType AS CAST('Place' as varchar(10)) persisted,
    ...Other columns...
    constraint FK_Places_Entities FOREIGN KEY (PlaceID,EntityType) references Entities (EntityID,EntityType)
) 
```

（我不确定`Entities`在考虑地点时是否完全正确 - 一个更好的名字可能会向您推荐）。

然后，您可以`Pictures`只引用`EntityID`.

* * *

否则，如果我必须在 1 和 2 之间进行选择，我通常会推荐 1。除非涉及的“类型”数量变大，否则它仍然不会使`Pictures`表格太宽，正如您所观察到的，您可以如有必要，至少使用正常的 FK 机制来强制级联。

* * *

4）如果`Pictures`现在只是一个非常裸的表，也许查询是否应该有*一个*图片表，或者每个类型一个。人物图片和地点图片是否会经常一起查询（即使是，`UNION ALL`基于查询的查询是否会隐藏您使用单独表的事实）？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:20:26.223

我认为有三种方式。一种是有单独的表格将每个实体映射到图片。就像是：

```
create table PersonPictures . . .
    PersonId int not null,
    PictureId int not null

. . .

create table PlacesPictures . . .
    PlaceId int not null,
    PictureId int not null 
```

当人物和地点是独立的实体并且可能有关于图片的其他信息，这些信息彼此不同（比如人穿着什么或地点的观点）时，这很有效。

如果人物和地点真的只是图片的属性，那么您可以：

```
create table AttributesPictures . . .
    PictureId int not null,
    AttributeType varchar(255),  -- 'Person', 'Place'
    PersonId int,
    PlaceId int 
```

在这种情况下，您可以设置约束以确保`AttributeType`仅采用定义明确的值（或将 AttributeId 与单独的查找表一起使用）。以及对外键的约束：当 AttributeType = 'Person' 时 PersonId 不为空且 Place Id 为空。

如果一张图片最多只有一个人和一个地方，那么您可以将这些 id 存储在图片记录本身中——在这种特殊情况下非常方便。

您采用哪种方法应该更多地受应用程序需求的驱动。在任何方法中，您都可以使用外键关系和级联删除来确保适当地删除记录。或者，您也可以使用触发器来强制执行关系完整性（尽管这不是我最喜欢的解决方案）。

# android - PullToRefresh + EndlessAdapter 给出 IndexOutofBoundException

> ID：14563652
> 
> 赞同：1
> 
> 时间：2013-01-28T13:58:31.540
> 
> 标签：android, cwac-endless, pull-to-refresh

我正在尝试使用 PulltoRefresh 和 EndlessAdapter，应用程序第一次运行时，列表加载得很好，但是当它最终加载更多数据时，它会崩溃。

库 EndLessAdapter：[https ://github.com/commonsguy/cwac-endless](https://github.com/commonsguy/cwac-endless)

库 PulltoRefresh：[https ://github.com/chrisbanes/Android-PullToRefresh](https://github.com/chrisbanes/Android-PullToRefresh)

它在没有 PullToRefresh 的情况下工作。

该应用程序第一次运行时，它会调用：

1.  获取待处理视图
2.  我的异步任务
3.  返回有更多数据
4.  调用 postOnExecute - 监听器
5.  调用 OnItemsReady
6.  设置 DemoAdapter.notydatasetchanged

当它到达列表的末尾时，它会调用：

1.  获取待处理视图
2.  我的异步任务
3.  返回有更多数据
4.  给出 IndexOutofBoundException

**堆栈跟踪：**

```
01-28 11:12:15.273: E/AndroidRuntime(12735): FATAL EXCEPTION: main
01-28 11:12:15.273: E/AndroidRuntime(12735): java.lang.IndexOutOfBoundsException: Invalid index 1, size is 1
01-28 11:12:15.273: E/AndroidRuntime(12735):    at java.util.ArrayList.throwIndexOutOfBoundsException(ArrayList.java:257)
01-28 11:12:15.273: E/AndroidRuntime(12735):    at java.util.ArrayList.get(ArrayList.java:311)
01-28 11:12:15.273: E/AndroidRuntime(12735):    at android.widget.HeaderViewListAdapter.getView(HeaderViewListAdapter.java:225)
01-28 11:12:15.273: E/AndroidRuntime(12735):    at android.widget.AbsListView.obtainView(AbsListView.java:1592)
01-28 11:12:15.273: E/AndroidRuntime(12735):    at android.widget.ListView.makeAndAddView(ListView.java:1782)
01-28 11:12:15.273: E/AndroidRuntime(12735):    at android.widget.ListView.fillDown(ListView.java:705) 
```

**在 PullToRefreshListinViewPager 示例中：**

```
public View instantiateItem(ViewGroup container, int position) {
    PullToRefreshListView plv = null;
    Context context = container.getContext();

    plv = (PullToRefreshListView) LayoutInflater.from(context).inflate(
                        R.layout.layout_listview_in_viewpager, container, false);
    endlessList = new ArrayList<HashMap<String, String>>(); 
    demoAdapter = new DemoAdapter(context, endlessList); 
    demoAdapter.setRunInBackground(false);
    plv.setAdapter(demoAdapter);

    plv.setOnRefreshListener(BaseSampleActivity.this);

    // Now just add ListView to ViewPager and return it
    container.addView(plv, LayoutParams.MATCH_PARENT, LayoutParams.MATCH_PARENT);
    return plv;
} 
```

**EndLessAdapter：**

```
private class DemoAdapter extends EndlessAdapter implements IItemsReadyListener{

      private RotateAnimation rotate=null;
      private View pendingView=null;
      private ArrayList<HashMap<String, String>> data;
      private List<HashMap<String, String>> mOriginalNames;
      private boolean hasMoreData=true;
      private Context mContext;

      DemoAdapter(Context context, ArrayList<HashMap<String, String>> d) {

        super(new LazyAdapter(context, d));
        this.data = d;
        this.mContext = context;
        rotate=new RotateAnimation(0f, 360f, Animation.RELATIVE_TO_SELF,
                  0.5f, Animation.RELATIVE_TO_SELF,
                  0.5f);

        rotate.setRepeatMode(Animation.RESTART);
        rotate.setRepeatCount(Animation.INFINITE);
      }

      @Override
      protected View getPendingView(ViewGroup parent) {
          View row = LayoutInflater.from(mContext).inflate(R.layout.row, null);

              View child=row.findViewById(android.R.id.text1);

              child.setVisibility(View.GONE);

              child=row.findViewById(R.id.throbber);
              child.setVisibility(View.VISIBLE);
              child.startAnimation(rotate);
            return(row);
      }

      @Override
      protected boolean cacheInBackground() {
        if(isNetworkOnline() == true){
          new MyAsyncTask(this, data.size()).execute();
        }
        return hasMoreData;
      }

      public void onItemsReady(ArrayList<HashMap<String, String>> data) {
          endlessList.addAll(data);
          demoAdapter.onDataReady();  // Tell the EndlessAdapter to remove it's pending
                                  // view and call notifyDataSetChanged()
          hasMoreData = endlessList.isEmpty();
        }

      @Override
      protected void appendCachedData() {
        if (getWrappedAdapter().getCount()<75) {
          @SuppressWarnings("unchecked")
          LazyAdapter a=(LazyAdapter)getWrappedAdapter();
          for (int i = 0; i < data.size(); i++) {
              a.add(data.get(i));
          }
        }
      }
    } 
```

**异步任务：**

```
private static class MyAsyncTask extends AsyncTask<Void,Void,ArrayList<HashMap<String, String>>>{
        IItemsReadyListener listener;

        int startPoint;

        public MyAsyncTask(IItemsReadyListener listener, int startPoint) {
            // TODO Auto-generated constructor stub
            this.listener = listener;
            this.startPoint = startPoint;
        }

        @Override
        protected ArrayList<HashMap<String, String>> doInBackground(Void... params) {

            XMLParser parser = new XMLParser();
            String xml = parser.getXmlFromUrl(URL); // getting XML from URL
            Document doc = parser.getDomElement(xml); // getting DOM element

            NodeList nl = doc.getElementsByTagName(KEY_SONG);
            // looping through all song nodes <song>
            for (int i = 0; i < 10; i++) {
                // creating new HashMap
                HashMap<String, String> map = new HashMap<String, String>();
                Element e = (Element) nl.item(i);
                // adding each child node to HashMap key => value
                map.put(KEY_ID, parser.getValue(e, KEY_ID));
                map.put(KEY_TITLE, parser.getValue(e, KEY_TITLE));
                map.put(KEY_ARTIST, parser.getValue(e, KEY_ARTIST));
                map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
                map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));
                // adding HashList to ArrayList
                endlessList.add(map);
            }
            return (endlessList);
        }

        @Override
        protected void onPostExecute(ArrayList<HashMap<String, String>> result)
        {
            listener.onItemsReady(endlessList);
             // Getting adapter by passing xml data ArrayList
            if (demoAdapter != null) 
            {
                demoAdapter.notifyDataSetChanged();
            }

        }
} 
```

**更新：**

我只是改变：

```
 @Override
      protected boolean cacheInBackground() throws Exception {
        if(isNetworkOnline() == true){
          new MyAsyncTask(this).execute();
        }
        if (getWrappedAdapter().getCount()<75) {
            return(true);
          }
        throw new Exception("Gadzooks!");

        } 
```

现在它加载了更多内容，但是在加载 3 次并进入最终状态后，它会抛出异常 Gadzooks，并且在它向我显示相同的 IndexOutofBoundException 之后。

我只知道每次 cacheinBackground 返回 false 时，它​​都会崩溃。

# iphone - 在默认 UIScrollView 平移手势识别器中检测 UIGestureStateEnded

> ID：14563654
> 
> 赞同：3
> 
> 时间：2013-01-28T13:58:38.233
> 
> 标签：iphone, ios, objective-c, uiscrollview, uigesturerecognizer

我的代码：

```
[self.scrollView.panGestureRecognizer addTarget:self action:@selector(handlePanForScrollView:)];

- (void)handlePanForScrollView:(UIPanGestureRecognizer *)gesture {
switch (gesture.state) {
    case UIGestureRecognizerStateBegan:
        startScrollPoint = [gesture locationInView:self.scrollView];
        break;
    case UIGestureRecognizerStateEnded: {
        NSLog(@"end");
    }
    default:
        ;
        break;
    }
} 
```

开始状态工作正常。但是我在滚动时`NSLog`显示了我的`end`所有时间（因为它应该改变状态）。检测手势识别器结束状态的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:06:29.590

您是否考虑过使用和实现 UIScrollViewDelegate 协议的“正常”方法？如果您不需要问题中未提及的其他内容，它们应该足以满足您的使用需求：

```
- (void)scrollViewDidScroll:(UIScrollView *)scrollView{
    NSLog(@"scrolling now");
}

-(void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate{
    NSLog(@"stop scrolling");
}

-(void)scrollViewWillBeginDragging:(UIScrollView *)scrollView{
    NSLog(@"going to scroll");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T11:34:57.850

您向我们展示的代码的行为与设计完全一致。我想你在期待一些不会发生的事情。

更准确地说。**GestureRecognizer** *仅*识别用户在屏幕上做出的物理手势。因此，反复发生的小手势，开始和结束状态反复发生。如果您通过触摸并按住并缓慢地来回移动来做出手势，您应该只看到一个结束 - 当用户放手时。

但是@meronix 的说法是正确的，这听起来像是您对手势识别器的期望是当滚动视图停止滚动时，这可能在用户手势完成后很**长时间。**

# python - 服务器端的 FQL 查询

> ID：14563664
> 
> 赞同：0
> 
> 时间：2013-01-28T13:59:09.073
> 
> 标签：python, facebook, facebook-graph-api, facebook-fql, server-side

我不明白我该怎么做：我必须通过我的服务器在 facebook 上做一些查询：我用 app_facebook_id 和 SECRET_KEY 创建了一个令牌，我的服务器开始使用 FQL 进行这些查询，但我收到一个错误：我没有活跃的会话！那么我该怎么做呢？我可以使用应用程序 facebook 的一些信息吗？这些 FQL 查询未链接到用户的个人信息准备就绪，但是，Facebook 可能需要登录用户（呼叫者）的活动会话......在我的情况下，呼叫者是我的服务器

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:25:12.330

[只需查看每个 FQL 表文档](https://developers.facebook.com/docs/reference/fql/album)的底部，您就会找到描述所需权限的部分。
如果它需要特定的用户权限或访问令牌，则需要实现[用户登录](https://developers.facebook.com/docs/howtos/login/server-side-login/)以获取用户的权限和访问令牌。如果它只需要“任何有效的 access_token”或“app access_token”，那么您可以使用您谈到的那个应用访问令牌进行访问。
然后使用 access_token 检索数据。它应该如下所示。

```
curl -X GET \
'https://graph.facebook.com/fql?q=SELECT.......&access_token=XXXXX' 
```

[您可以在本指南](https://developers.facebook.com/docs/technical-guides/fql/)中找到并学习基本实现。

# java - 带有由 JFreeChart 制作的图表的 Java 报告

> ID：14563666
> 
> 赞同：2
> 
> 时间：2013-01-28T13:59:16.837
> 
> 标签：java, pdf, report, jfreechart, jfreereport

有使用 JFreeReport 制作的图表创建报告（PDF 文件）的 Java 库吗？有人跟我谈论 JFreeReport，但我找不到任何关于它的信息。也许 JFreeReport 项目已被弃用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:04:50.663

[Jasper Reports](http://community.jaspersoft.com/project/jasperreports-library)声称能够报告 JFreeCharts。

[JFreeChart 示例](http://jasperreports.sourceforge.net/sample.reference/jfreechart/index.html)

# r - 大ddply，合适的替代品

> ID：14563674
> 
> 赞同：2
> 
> 时间：2013-01-28T13:59:37.560
> 
> 标签：r, plyr, lapply, sapply

我有一个`list`。`data.frames`每个`data.frame`都不是很大~150,000 行。但我的清单有 1000 多个这样的`data.frames`.

一个`data.frame`看起来像：

```
comp <- read.table(text = " G T H S B
                             1 1 1 1 x1
                             1 1 1 2 x2
                             1 2 6 1 x3
                             1 2 6 2 x4
                             2 1 7 1 x1
                             2 2 8 2 x2
                             2 2 8 1 x1
                             2 3 9 2 x2",header=TRUE,stringsAsFactors=FALSE) 
```

所以一个列表是：

```
complist <- list(comp,comp,comp) 
```

我想知道 for each `data.frame`, ( ), for each in each in each的`comp`长度。`B``S``H``T``G`

所以对于我的小练习，我使用：

```
library(plyr)
listresults <- lapply(complist, function(x) {
                                res <- ddply(x, .(G,T,H,S),
                                function(z) data.frame(resultcol = length(z$B)) )
                                            } ) 
```

但是在我更大的列表中，这很长，有人可以帮我找到更快的方法吗？`Aggregate`不是这里的选择，而且我一直未能`sapply(split))`找到`ddply`. 即使不是实际代码的建议也会对我有帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T14:04:44.593

这种情况`data.table`可能是一个很好的选择。`data.table`一直显示出极快的速度，更是如此`plyr`。这里有很多关于 SO 的示例，请参见：

*   [如何使用长格式的 R 数据帧的子集进行操作？](https://stackoverflow.com/questions/13220395/how-to-operate-with-a-subset-of-an-r-dataframe-in-long-format)
*   [使用 plyr、doMC 和 summarise() 处理非常大的数据集？](https://stackoverflow.com/questions/8669345/using-plyr-domc-and-summarise-with-very-big-dataset)
*   或[我的一篇博文](http://www.numbertheory.nl/2011/10/28/comparison-of-ave-ddply-and-data-table/)。

这只是可用信息的一小部分，您可以查看 的文档`data.table`，或查看`[r][data.table]`SO 上的标签。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T14:12:46.817

使用`data.table`可能会更快。这是你如何做到的。

```
require(data.table)
o <- lapply(1:length(complist), function(i) { 
    dt <- data.table(complist[[i]], key=c("S", "H", "T", "G"))
    dt[, list(resultcol = .N), by=c("S", "H", "T", "G")]
}) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T14:12:57.827

一次尝试使用`data.table`：

```
lapply(complist, function(df) {
  df <- data.table(df, key=c("G","T","H","S"))
  df[,length(B),by=c("G","T","H","S")]
}) 
```

免责声明：这是我第一次使用`data.table`，所以要小心这个答案:)

# c# - 保存为 PNG 时为空文件

> ID：14563677
> 
> 赞同：4
> 
> 时间：2013-01-28T13:59:44.077
> 
> 标签：c#, asp.net

我有一个方法可以获取输入图像，对图像执行一些操作，然后将其保存到另一个文件中。在最基本的情况下，它会调整图像的大小，但它可以做一些更复杂的事情，比如转换为灰度、量化等，但对于这个问题，我只是试图调整图像的大小而不执行任何其他操作.

它看起来像：

```
public void SaveImage(string src, string dest, int width, int height, ImageFormat format, bool deleteOriginal, bool quantize, bool convertToGreyscale) {
    // Open the source file
    Bitmap source = (Bitmap)Image.FromFile(src);

    // Check dimensions
    if (source.Width < width)
        throw new Exception();
    if (source.Height < height)
        throw new Exception();

    // Output image
    Bitmap output = new Bitmap(width, height);
    using (Graphics g = Graphics.FromImage(output)) {
        // Resize the image to new dimensions
        g.SmoothingMode = System.Drawing.Drawing2D.SmoothingMode.HighQuality;
        g.CompositingQuality = System.Drawing.Drawing2D.CompositingQuality.HighQuality;
        g.InterpolationMode = System.Drawing.Drawing2D.InterpolationMode.HighQualityBicubic;
        g.DrawImage(source, 0, 0, width, height);
    }

    // Convert to greyscale if supposed to
    if (convertToGreyscale) {
        output = this.ConvertToGreyscale(output);
    }

    // Save the image
    if (quantize) {
        OctreeQuantizer quantizer = new OctreeQuantizer(255, 8);
        using (var quantized = quantizer.Quantize(output)) {
            quantized.Save(dest, format);
        }
    }
    else {
        output.Save(dest, format);
    }

    // Close all the images
    output.Dispose();
    source.Dispose();

    // Delete the original
    if (deleteOriginal) {
        File.Delete(src);
    }
} 
```

然后使用它我会调用类似的东西：`imageService.SaveImage("c:\image.png", "c:\output.png", 300, 300, ImageFormat.Png, false, false, false);`

这应该会打开“image.png”文件，将其调整为 300×300，然后将其保存为“output.png”作为 PNG 文件。但它不起作用——创建的文件位于正确的位置，但文件大小为零并且根本不包含图像。

这似乎也只在我传入参数时发生`ImageFormat.Png`；如果我通过`ImageFormat.Jpeg`了，那么它可以正常工作并完美地创建图像文件。

我想知道在创建图像和尝试访问已创建的图像（不是在上面的代码中）的代码中的其他位置之间是否存在某种延迟，该图像锁定了文件，因此它永远不会被写入？会是这样吗？

任何想法还有什么可能发生的？

干杯

编辑：

*   删除劳埃德指出的多余演员表

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:17:42.573

将位图保存为 png 存在一些历史问题。

使用`System.Windows.Media.Imaging.PngBitmapEncoder`可以解决这个问题

请参阅 [System.Windows.Media.Imaging.PngBitmapEncoder](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.pngbitmapencoder.aspx)

以及[如何：](http://msdn.microsoft.com/en-us/library/aa970062.aspx)对示例的 PNG 图像进行编码和解码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-12T13:55:37.770

将 Save() 参数与 Stream 而不是文件名一起使用将允许您确保在释放对象之前将文件刷新到磁盘。

但是，我强烈建议您在[这里使用服务器安全的图像处理库](http://imageresizing.net)，因为您正在[玩火](http://www.nathanaeljones.com/blog/2009/20-image-resizing-pitfalls)。

# sorting - VBScript对文件中的行进行排序

> ID：14563678
> 
> 赞同：0
> 
> 时间：2013-01-28T13:59:49.690
> 
> 标签：sorting, vbscript

我正在尝试使用 VBScript (MS Internet Explorer) 对文件中的行进行排序。基本上我读取了文件并将所有行转换为一个数组。基本上我需要对每行字符 23 和 27 之间写的任何内容进行排序。所以基本上我可以使用`MID`. 这些字符不是每行唯一的（所以我不能`System.Collections.Sortedlist`直接使用，或者不幸的是类似的东西）。

我可以使用`System.Collections.Sortedlist`和使用 23 到 27 之间的字符作为键，并使用其他`System.Collections.Sortedlist`对象作为值，填充每个唯一值（所以是二维数组），但这会是正确的方法吗？例如：

```
(System.Collections.Sortedlist) {
    "0001" => (System.Collections.Sortedlist) {
        0 => "0001 some unique value1"
        1 => "0001 some unique value2"
        2 => "0001 some unique value3"
    },
    "0002" => (System.Collections.Sortedlist) {
        0 => "0002 some unique value1"
        1 => "0002 some unique value2"
        2 => "0002 some unique value3"
    }
} 
```

有没有更好的方法来处理这个？还要注意输出格式应该是一个数组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:04:25.890

作为预告片（另见[ArrayList](https://stackoverflow.com/a/10660029/603855)、[Disconnected Recordset 和 ArrayList](https://stackoverflow.com/a/13758037/603855)）：

```
 Dim aTest : aTest = Array( _
      ". Z 0" _
    , ", B 2" _
    , "? A 1" _
  )
  WScript.Echo "----- ArrayList"
  WScript.Echo "original data:     ", "[""" & Join(aTest                          , """  """) & """]"
  WScript.Echo "AL:  (full)        ", "[""" & Join(sortAL(aTest)                  , """  """) & """]"
  WScript.Echo "AL:  (numerical)   ", "[""" & Join(sortAL(Array(12, 9, -1))       , """  """) & """]"
  WScript.Echo "AL:  (dates)       ", "[""" & Join(sortAL(Array(Now + 5, Now - 5)), """  """) & """]"
  WScript.Echo "AL:  (Mid(elm,3,1))", "[""" & Join(sortAL_31(aTest)               , """  """) & """]"
  WScript.Echo "----- Disconnected Recordset"
  WScript.Echo "DRS: (Mid(elm,3,1))", "[""" & Join(sortDRS_Substring(aTest, 3, 1) , """  """) & """]"
  WScript.Echo "DRS: (Mid(elm,5,1))", "[""" & Join(sortDRS_Substring(aTest, 5, 1) , """  """) & """]"

' ArrayList.Sort handles homogenous arrays of simple types just fine,
' but looks at the element in full. For other cases, you need extra work
' or ADO
Function sortAL(aX)
  Dim al : Set al = CreateObject("System.Collections.ArrayList")
  Dim elm
  For Each elm In aX
      al.Add elm
  Next
  al.Sort
  sortAL = al.ToArray()
End Function

' Extra work: feeding pre-processed data to the ArrayList; hardcoded
Function sortAL_31(aX)
  Const csSep = ":"
  Dim al : Set al = CreateObject("System.Collections.ArrayList")
  ReDim a(UBound(aX))
  Dim elm
  For Each elm In aX
      al.Add Mid(elm, 3, 1) & csSep & elm
  Next
  al.Sort
  For elm = 0 To UBound(a)
      a(elm) = Split(al(elm), csSep)(1)
  Next
  sortAL_31 = a
End Function

' more flexible: ADO DRS + a start at parametrization; handling different
' types is left as an exercise
Function sortDRS_Substring(aX, nFrom, nLen)
  Const adVarChar    = 200 ' 000000C8
  Const adClipString =   2 ' 00000002
  Const csSep        = ":"
  ReDim a(Ubound(aX))
  Dim oRS : Set oRS = CreateObject("ADODB.Recordset")
  oRS.Fields.Append "FORG", adVarChar, 250
  oRS.Fields.Append "FSUB", adVarChar, 250
  oRS.Open
  Dim elm
  For Each elm In aX
      oRS.AddNew
      oRS.Fields("FORG").value = elm
      oRS.Fields("FSUB").value = Mid(elm, nFrom, nLen)
      oRS.UpDate
  Next
  oRS.Sort = "FSUB"
  oRS.MoveFirst
  For elm = 0 To UBound(a)
      a(elm) = oRS.Fields("FORG").value
      oRS.MoveNext
  Next
  sortDRS_Substring = a
End Function 
```

输出：

```
----- ArrayList
original data:      [". Z 0"  ", B 2"  "? A 1"]
AL:  (full)         [", B 2"  ". Z 0"  "? A 1"]
AL:  (numerical)    ["-1"  "9"  "12"]
AL:  (dates)        ["1/23/2013 5:00:22 PM"  "2/2/2013 5:00:22 PM"]
AL:  (Mid(elm,3,1)) ["? A 1"  ", B 2"  ". Z 0"]
----- Disconnected Recordset
DRS: (Mid(elm,3,1)) ["? A 1"  ", B 2"  ". Z 0"]
DRS: (Mid(elm,5,1)) [". Z 0"  "? A 1"  ", B 2"] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T18:21:39.367

我想建议的功能与 Ekkehard Horner 的`sortAL_31`.

```
Function CustomSort(ByVal inpArray, ByVal nFrom, ByVal nLen)
    Dim oList, aTmp(), nSize, i
    nSize = UBound(inpArray)
    ReDim aTmp(nSize)
    With CreateObject("System.Collections.ArrayList")
        For i = 0 To nSize
            .Add Mid(inpArray(i), nFrom, nLen) & _
                vbNullChar & inpArray(i)
        Next
        .Sort
        For i = 0 To nSize
            aTmp(i) = Split(.Item(i), vbNullChar)(1)
        Next
    End With
    CustomSort = aTmp
End Function 
```

[编辑] 附加版本`SortedList`。

```
Function CustomSort2(inpArray, nFrom, nLen)
    Dim oSList, aTmp(), nSize, i
    nSize = UBound(inpArray)
    ReDim aTmp(nSize)
    Set oSList = CreateObject("System.Collections.SortedList")
    For i = 0 To nSize
        oSList.Add Mid(inpArray(i), nFrom, nLen), inpArray(i)
    Next
    For i = 0 To nSize
        aTmp(i) = oSList.GetByIndex(i)
    Next
    Set oSList = Nothing
    CustomSort2 = aTmp
End Function 
```

# objective-c - 如何更改 IBAction 中 NSMatrix 的选择？

> ID：14563679
> 
> 赞同：1
> 
> 时间：2013-01-28T13:59:52.080
> 
> 标签：objective-c, macos, cocoa, nsmatrix

我有`NSRadioModeMatrix`3个细胞。`- (IBAction) EnableProxy:(id)inSender`连接到`NSRadioModeMatrix`

```
- (IBAction) EnableProxy:(id)sender
{   

    if ([[sender selectedCell] tag]==2)
    { 

/*(gdb) p (int)[[inSender selectedCell] tag]
$1 = 2*/
        if (condition) {
             // select cell with tag 0
            [sender selectCellAtRow:0 column:0]; // This is not working
        }
        /*(gdb) p (int)[[inSender selectedCell] tag]
$2 = 1*/
    }
}// selection is not visible 
```

当条件为真时。选择将返回到标签 2（旧的选定单元格）。[示例项目](https://www.idrivesync.com/share/view?k=tUaphmK2f2YieLOivgdKtxjOZ3mE191I)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:53:49.050

老实说，这是预期的行为，并且有充分的理由。

![在此处输入图像描述](../Images/234c8b0ef44a5482757c7e5b7db3b47c.png)

鉴于上述 UI，如果用户点击`C`，他们希望`C`被选中。相反，如果用户单击`C`并被`A`选中，则您的用户会感到困惑（并且可能会感到沮丧）。实际上，实现这种行为违反了[OS X Human Interface Guidelines for Radio Buttons](http://developer.apple.com/library/mac/documentation/userexperience/conceptual/applehiguidelines/Controls/Controls.html#//apple_ref/doc/uid/TP30000359-BIAHBFAD)。

也就是说，我将继续讨论如何实现所需的行为。基本上，当您 select 时`C`，立即调用 select`A`似乎没有成功的原因是，从技术上讲，`C`它仍在被选中的过程中。换句话说，事件的简化时间线如下所示：

1.  开始点击矩阵
2.  `EnableProxy:`方法调用
3.  矩阵立即被告知选择`A`
4.  完成点击矩阵，`C`最终完全被选中

为了获得您想要的结果`A`，您需要像以下代码一样将请求“排队”，而不是立即告诉矩阵选择：

```
- (IBAction) EnableProxy:(id)inSender {
    if ([[inSender selectedCell] tag] == 2) {
//        [mProxyEnable selectCellAtRow:0 column:0];
        [self performSelector:@selector(selectFirstMatrixRow) withObject:nil
                                                              afterDelay:0.0];
    }
}

- (void)selectFirstMatrixRow {
    NSLog(@"[%@ %@]", NSStringFromClass([self class]), NSStringFromSelector(_cmd));
    [mProxyEnable selectCellAtRow:0 column:0];
} 
```

通过使用`[self performSelector:withObject:afterDelay:]`，您基本上说“尽快调用此方法”。这样做可以`C`在调用该方法之前完全选择，这允许您想要的结果。换句话说，事件的时间线应该是这样的：

1.  开始点击矩阵
2.  `EnableProxy:`方法调用
3.  完成点击矩阵，`C`最终完全被选中
4.  --------- 控制返回正常的事件循环 ---------
5.  `selectFirstMatrixRow`方法调用
6.  矩阵选择`A`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T14:31:08.610

参考 NSGod 提供的上述答案，这也可以使用 GCD 来实现，而不是用 0.0 给出不必要的延迟

```
ViewController * __weak weakRef = self;
        dispatch_async(dispatch_get_main_queue(), ^{
            [weakRef selectFirstMatrixRow];
        }); 
```

# objectify - Google Cloud Endpoints 不知道 Objectify 4 Transaction 中的 Work 类，导致 ClassNotFoundException

> ID：14563680
> 
> 赞同：1
> 
> 时间：2013-01-28T13:59:53.493
> 
> 标签：objectify, google-cloud-endpoints

我创建了一个非常简单的 Objectify/Endpoints 类。

```
import static mypackage.OfyService.ofy;

import com.google.api.server.spi.config.Api;
import com.google.api.server.spi.config.ApiMethod;
import com.googlecode.objectify.Work;

@Api(name = "testapi", version = "1")
public class TestEndpoint {

    @ApiMethod(name = "test.insert")
    public TestEntity insert(final TestEntity test) {
        test.setName("test");
        return ofy().transact(new Work<TestEntity>() {      
            public TestEntity run() {
                ofy().save().entities(test).now();
                return test;
            }
        });
    }

} 
```

TestEntity 是微不足道的（为简洁起见，排除了 getter 和 setter）：

```
@Entity
public class TestEntity {

    @Id long id;
    String name;
} 
```

我使用来自[http://code.google.com/p/objectify-appengine/wiki/BestPractices#Use_Your_Own_Service的 OfyService 模式](http://code.google.com/p/objectify-appengine/wiki/BestPractices#Use_Your_Own_Service)

但是，当我尝试生成 Endpoints 库时，我得到一个 ClassNotFoundException for Work。完整的堆栈跟踪如下：

```
java.lang.reflect.InvocationTargetException
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at com.google.gdt.eclipse.appengine.swarm.wizards.helpers.SwarmApiCreator.createSwarmApi(SwarmApiCreator.java:97)
at com.google.gdt.eclipse.appengine.swarm.wizards.helpers.SwarmServiceCreator.create(SwarmServiceCreator.java:196)
at com.google.gdt.eclipse.appengine.swarm.wizards.HandleGaeProjectChange.gaeProjectRebuilt(HandleGaeProjectChange.java:64)
at com.google.appengine.eclipse.core.properties.ui.GaeProjectChangeNotifier.build(GaeProjectChangeNotifier.java:77)
at org.eclipse.core.internal.events.BuildManager$2.run(BuildManager.java:728)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:199)
at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:239)
at org.eclipse.core.internal.events.BuildManager$1.run(BuildManager.java:292)
at org.eclipse.core.runtime.SafeRunner.run(SafeRunner.java:42)
at org.eclipse.core.internal.events.BuildManager.basicBuild(BuildManager.java:295)
at org.eclipse.core.internal.events.BuildManager.basicBuildLoop(BuildManager.java:351)
at org.eclipse.core.internal.events.BuildManager.build(BuildManager.java:374)
at org.eclipse.core.internal.events.AutoBuildJob.doBuild(AutoBuildJob.java:143)
at org.eclipse.core.internal.events.AutoBuildJob.run(AutoBuildJob.java:241)
at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)
Caused by: java.lang.NoClassDefFoundError: com/googlecode/objectify/Work
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    at java.lang.Class.getDeclaredMethods(Class.java:1791)
    at com.google.api.server.spi.MethodHierarchyReader.addServiceMethods(MethodHierarchyReader.java:174)
    at com.google.api.server.spi.MethodHierarchyReader.readMethodHierarchyIfNecessary(MethodHierarchyReader.java:44)
    at com.google.api.server.spi.MethodHierarchyReader.getEndpointOverrides(MethodHierarchyReader.java:99)
    at com.google.api.server.spi.config.annotationreader.ApiConfigAnnotationReader.readApiMethods(ApiConfigAnnotationReader.java:184)
    at com.google.api.server.spi.config.annotationreader.ApiConfigAnnotationReader.readEndpoint(ApiConfigAnnotationReader.java:82)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.generateForService(AnnotationApiConfigGenerator.java:242)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.generateConfigObjects(AnnotationApiConfigGenerator.java:227)
    at com.google.api.server.spi.tools.AnnotationApiConfigGenerator.generateConfig(AnnotationApiConfigGenerator.java:176)
    ... 20 more

Caused by: java.lang.ClassNotFoundException: com.googlecode.objectify.Work
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 31 more 
```

我在 Endpoint 类（例如 Ref 等）中包含的其他 Objectify 类没有类似的问题，并且我设置了 Eclipse (4.2) 项目以包含 Objectify 4.0b1 库。

如果我将 Endpoints 类更改为使用 VoidWork，我会得到完全相同的错误：

```
@Api(name = "testapi", version = "1")
public class TestEndpoint {

  @ApiMethod(name = "test.insert")
  public TestEntity insert(TestEntity test) {
    final TestEntity newTest = new TestEntity();
    newTest.setName(test.getName());
    ofy().transact(new VoidWork() {

            public void vrun() {
                ofy().save().entities(newTest).now();
            }
        });
    return newTest;
  }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-06T22:15:41.833

我通过指向 WEB-INF\lib 的构建路径库添加了 Objectify jar

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-27T01:39:45.077

可以在[此处](http://code.google.com/p/objectify-appengine/wiki/Setup)找到有关 Maven 设置的详细信息。如果您只想快速启动并运行，请转到 [此处](http://repo1.maven.org/maven2/com/googlecode/objectify/objectify/] 并单击 Objectify 的最新版本（当前`4.0rc2/`），然后下载`objectify-*version*.jar`文件。

在 Eclipse 中：将`objectify.jar`以及添加[`guava.jar`](https://code.google.com/p/guava-libraries/) 到`[Project]/war/WEB-INF/lib`. 右键单击您的项目。转到属性 -> Java 构建路径 -> 库。单击“添加罐子…”，导航到上述`/lib`文件夹，单击确定（对每个罐子执行一次）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-22T17:13:27.907

您必须在端点的类补丁中包含 objectify jar。这可以在 endpoints.sh 中找到（在 linux 中，不确定 windows 等效项）。类路径的脚本中有一个条目 - 只需添加 objectify jar 文件的位置。

# c# - 在 foreach 语句中未显示 WPF 图像

> ID：14563683
> 
> 赞同：1
> 
> 时间：2013-01-28T14:00:07.933
> 
> 标签：c#, .net, wpf, xaml

我在 WPF 应用程序上遇到了一个非常奇怪的问题。让我清楚地解释我做了什么。

我将 Datagrid 与 selecteditems 作为复选框，因此用户选择并单击“加载”按钮，然后记录将加载到数据库服务器。在此期间，我在将数据加载到数据库服务器时不断旋转图像。因为我有很多记录。

默认情况下，当数据加载属性更改为可见时，我将图像保持为隐藏状态。当它出现时 foreach 语句图像永远不会显示，或者默认情况下它是可见性的图像显示但从不旋转......任何想法或帮助我做错了什么......？

Xml代码...

```
<Button Content="Load" Height="23" HorizontalAlignment="Left" Margin="1042,83,0,0"
    Name="btnSaveData" Visibility="Hidden" VerticalAlignment="Top" Width="75"
    Cursor="Hand" Click="btnSaveData_Click" Foreground="Green" 
    Background="#FFB0D3D3" FontWeight="Bold" FontSize="14"/>
<Image Height="25" HorizontalAlignment="Left" Margin="1012,83,0,0" Name="imgSpin5"
    Stretch="None" RenderTransformOrigin="0.5,0.5" Visibility="Hidden"
    VerticalAlignment="Top" Width="24"
    Source="/LoadDataSource;component/Images/Spin5.png">
    <Image.RenderTransform>
        <RotateTransform x:Name="TransRotate" Angle="0"/>
    </Image.RenderTransform>
    <Image.Triggers>
        <EventTrigger RoutedEvent="Image.Loaded">
            <BeginStoryboard>
                <Storyboard TargetProperty="Angle">
                    <DoubleAnimation Storyboard.TargetName="TransRotate"
                        Storyboard.TargetProperty="Angle" By="360" 
                        Duration="0:0:1" AutoReverse="False" 
                        RepeatBehavior="Forever" />
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Image.Triggers>
</Image> 
```

C#代码..

```
MessageBoxResult result = MessageBox.Show("Do you want to Load Selected items?",
   "Confirmation", MessageBoxButton.YesNo, MessageBoxImage.Information);
if (result == MessageBoxResult.Yes)
{
    imgSpin5.Visibility = Visibility.Visible;
    foreach (CType ctp in dgAttributes.ItemsSource)
    {
        if (ctp.IsSelected)
            imgSpin5.Visibility = Visibility.Visible;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:15:22.937

您可以尝试将可见性更新包装在`Dispatcher.Invoke`调用中以将其强制到 UI 线程的顶部并`foreach`在后台工作线程上运行：

```
MessageBoxResult result = MessageBox.Show("Do you want to Load Selected items?", "Confirmation", MessageBoxButton.YesNo, MessageBoxImage.Information);
    if (result == MessageBoxResult.Yes)
    {
        imgSpin5.Visibility = Visibility.Visible;
        BackgroundWorker backgroundWorker = new BackgroundWorker();
        backgroundWorker.DoWork((s,e)=>{
            foreach (CType ctp in dgAttributes.ItemsSource)
            {
                if (ctp.IsSelected == true)
                {
                    Dispatcher.Invoke(() =>
                    {
                        imgSpin5.Visibility = Visibility.Visible;
                    });
                }
            }
        });
        backgroundWorker.RunWorkerAsync();

    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:41:41.837

如果（结果 == MessageBoxResult.Yes）{

```
 BackgroundWorker backgroundWorker = new BackgroundWorker();

                backgroundWorker.DoWork += delegate(object s, DoWorkEventArgs args)
                {
                    foreach (CType ctp in dgAttributes.ItemsSource)
                    {
                        if (ctp.IsSelected == true)
                        {

                            Dispatcher.Invoke(() =>
                            {
                                imgSpin.Visibility = Visibility.Visible;
                            });

                        }

                    }

                };
                backgroundWorker.RunWorkerAsync();

                MessageBoxResult results = MessageBox.Show("Sucessfully Loaded..!", "Confirmation", MessageBoxButton.OK);

                imgSpin.Visibility = Visibility.Hidden;
            } 
```

# python - Python：十六进制到日期时间

> ID：14563684
> 
> 赞同：4
> 
> 时间：2013-01-28T14:00:08.743
> 
> 标签：python, datetime, gps, hex

```
23 DD 78 34 = 2013-01-28 21:52:XX //second not sure
92 e3 78 34 = 2013-01-28 22:14:XX 
d4 e3 78 34 = 2013-01-28 22:15:XX 
16 e4 78 34 = 2013-01-28 22:16:XX 
```

如何将十六进制转换为日期时间？它不是 UNIX 日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:36:59.370

十六进制值看起来像是小端编码的，但它并没有接缝使用秒作为刻度值：

```
>>> values = [
...    (0x3478dd23, datetime(2013, 1, 28, 21, 52)),
...    (0x3478e392, datetime(2013, 1, 28, 22, 14)),
...    (0x3478e3d4, datetime(2013, 1, 28, 22, 15)),
...    (0x3478e416, datetime(2013, 1, 28, 22, 16))
... ]
...
>>> for s, dt in values:
...     print dt - datetime.fromtimestamp(s)
... 
5544 days, 19:02:37
5544 days, 18:57:10
5544 days, 18:57:04
5544 days, 18:56:58 
```

由于偏移量随着时间的推移而缩小，我计算了一个校正因子：

```
>>> ts_delta = values[1][0] - values[0][0]
>>> ts_delta
1647
>>> dt_delta = values[1][1] - values[0][1]
>>> dt_delta
datetime.timedelta(0, 1320)
>>> dt_delta = dt_delta.days * 60*60*24 + dt_delta.seconds
>>> dt_delta
1320
>>> factor = float(dt_delta) / float(ts_delta)
>>> factor
0.8014571948998178 
```

1647 滴答声 = 1320 秒。

现在，如果我们将此因素应用于时间戳，则偏移量几乎保持不变（秒数除外，但由于您不知道它们的值，因此我刚刚在源数据中使用了 0）

```
>>> for s, dt in values:
...     print dt - datetime.fromtimestamp(s * factor)
... 
7567 days, 17:16:08.233151
7567 days, 17:16:08.233151
7567 days, 17:16:15.336976
7567 days, 17:16:22.440802 
```

考虑到这一点，您可以使用此偏移量和因子来转换原始值：

```
>>> offset = values[0][1] - datetime.fromtimestamp(values[0][0]*factor)
>>> offset
datetime.timedelta(7567, 62168, 233151)

def hex_to_datetime(s):
    return datetime.fromtimestamp(s*factor) + offset

>>> for s, dt in values:
...     print hex_to_datetime(s), dt
... 
2013-01-28 21:52:00 2013-01-28 21:52:00
2013-01-28 22:14:00 2013-01-28 22:14:00
2013-01-28 22:14:52.896175 2013-01-28 22:15:00
2013-01-28 22:15:45.792349 2013-01-28 22:16:00 
```

这对我来说看起来很有希望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:41:56.077

所以，十六进制整数显然是小端的。转换为整数：

```
880336163 > 2013-01-28 21:52:XX
880337810 > 2013-01-28 22:14:XX
880337876 > 2013-01-28 22:15:XX
880337942 > 2013-01-28 22:16:XX 
```

考虑到最后三个之间的增量，该值以秒为单位。

使用提供的日期并计算相应的秒数，您将获得以下纪元日期：

```
1985-03-07 20:02:37
1985-03-07 19:57:10
1985-03-07 19:57:04
1985-03-07 19:56:58 
```

即使考虑到时间偏差和采样误差，这个时期看起来也很奇怪。GPS 纪元是 1980 年 1 月 6 日，我认为...您需要更多样本来确定准确的纪元。

无论如何，这是我用来推导时代的脚本：

```
import datetime as dt                                                           

data = [                                                                        
    ('23 DD 78 34',(2013,01,28,21,52)),                                         
    ('92 e3 78 34',(2013,01,28,22,14)),                                         
    ('d4 e3 78 34',(2013,01,28,22,15)),                                         
    ('16 e4 78 34',(2013,01,28,22,16)),
    ]

def hex_to_int(string):
    string = ''.join(reversed(string.split()))
    return int(string,16)

for (string,date) in data:
    secs = hex_to_int(string)
    date = dt.datetime(*date)
    delta = dt.timedelta(seconds=secs)
    print date - delta 
```

获得纪元后，将十六进制字符串转换为上述整数并将其添加到纪元以获取相应的日期时间：

```
import datetime as dt
epoch = dt.datetime(YYYY,MM,DD,HH,MM,SS)
def hex_to_datetime(string):
    delta = dt.timedelta(seconds=hex_to_int(string))
    return epoch + delta 
```

希望这可以帮助。

# c - 为什么使用 enif_alloc 而不是 malloc

> ID：14563685
> 
> 赞同：4
> 
> 时间：2013-01-28T14:00:08.877
> 
> 标签：c, erlang, malloc

为什么要使用

void *enif_alloc(size_t size) 而不是

无效 *malloc(size_t 大小); 尝试从 Erlang C NIF 分配内存时？

参考并没有详细说明原因。

[http://www.erlang.org/doc/man/erl_nif.html#enif_alloc](http://www.erlang.org/doc/man/erl_nif.html#enif_alloc)

我见过使用 malloc 的 NIF 示例，但我从未见过 enif_alloc。它有什么不同？为什么更好用？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T15:53:40.210

enif_alloc 使用内部 erlang 内存分配器，这意味着如果内存已经在内部 VM 缓存中可用，它可以使用该内存而不是执行系统调用来获取内存。在某些情况下，这可能会导致更快的内存分配，您将不得不用您的代码来衡量它是否有任何不同。一般来说，我会推荐使用 enif_alloc。

如果我没记错的话，使用 enif_alloc 也会在发出 erlang:memory 命令时包含使用的内存。

# perl - 如何从运行 FCGI.pm 的 Perl 脚本中获取错误以显示在 Apache 错误日志中？

> ID：14563686
> 
> 赞同：4
> 
> 时间：2013-01-28T14:00:09.443
> 
> 标签：perl, apache, error-logging, fastcgi

下面是一个示例脚本：

```
#!/usr/bin/perl
use FCGI;
my $request = FCGI::Request();
while($request->Accept() >= 0) {
    die "test";
} 
```

[根据 FCGI 规范](http://www.fastcgi.com/devkit/doc/fastcgi-prog-guide/ch1intro.htm#8066)，我希望这会在 Apache 错误日志中打印“测试” ，但实际上什么也没有发生。如果我将骰子移到 while 循环的外部和前面，则会将消息打印到错误日志中。

有关 Apache 配置的更多信息，此行用于配置处理程序：

```
Addhandler fcgid-script .fcgi 
```

我被告知 suexec 正在使用中并充当 fcgi 包装器。

* * *

**编辑：**

[FCGI.pm 本身](https://metacpan.org/module/FLORA/FCGI-0.74/FCGI.PL)提出了部分解决方案：

> 默认情况下没有安装 die 和 warn 处理程序。这意味着如果您没有运行启用了 sfio 的 perl，则默认情况下，任何警告或死亡消息都不会最终出现在服务器的日志中。建议您自己设置模具并警告处理程序。FCGI.pm 包含一个 die 和 warn 处理程序的示例。

因此，我以这种方式尝试过：

```
#!/usr/bin/perl

use FCGI;
use IO::Handle;

my ( $stdin, $stdout, $stderr ) = ( IO::Handle->new, IO::Handle->new, IO::Handle->new );
my $request = FCGI::Request( $stdin, $stdout, $stderr );
my $err_handler = sub { print {$stderr} @_ };

while($request->Accept() >= 0) {
    $SIG{__WARN__} =  $SIG{__DIE__} = $err_handler;

    warn "test1";
    die "test2";
} 
```

出现`test2`在我的错误日志中没有任何问题，但是`test1`没有。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T17:50:43.663

我尝试使用用 Perl 编写的 FastCGI 客户端重现您的问题，FCGI.pm 会产生预期的输出。mod_fcgid 可能存在问题。

```
#!/usr/bin/perl

use strict;
use warnings;

use IO::Socket             qw[];
use Net::FastCGI::Constant qw[:type :role];
use Net::FastCGI::IO       qw[read_record write_record write_stream];
use Net::FastCGI::Protocol qw[build_params dump_record build_begin_request_body];

use warnings FATAL => 'Net::FastCGI::IO';
use constant TRUE  => !!1;

my $socket = IO::Socket::INET->new(Proto => 'tcp', Listen => 5)
  or die qq/Could not create a listener socket: '$!'/;

my $host = $socket->sockhost;
my $port = $socket->sockport;

defined(my $pid = fork())
  or die qq/Could not fork(): '$!'/;

if (!$pid) {
    close STDIN;
    open(STDIN, '+>&', $socket)
      or die qq/Could not dup socket to STDIN: '$!'/;

    require FCGI;

    my $r = FCGI::Request()
      or die qq/Could not create a FCGI request: '$!'./;

    while ($r->Accept >= 0) {
        print "Perl: $] OS: $^O FCGI: $FCGI::VERSION\n";
        warn "test1";
        die "test2";
    }
    exit(0);
}

close $socket;
$socket = IO::Socket::INET->new(Proto => 'tcp', PeerHost => $host, PeerPort => $port)
  or die qq/Could not connect to '$host:$port': '$@'/;

write_record($socket, FCGI_BEGIN_REQUEST, 1, build_begin_request_body(FCGI_RESPONDER, 0));
write_stream($socket, FCGI_PARAMS, 1, build_params({}), TRUE);
write_stream($socket, FCGI_STDIN, 1, '', TRUE);
while () {
    my ($type, $request_id, $content) = read_record($socket)
      or exit;
    warn dump_record($type, $request_id, $content), "\n";
    last if $type == FCGI_END_REQUEST;
} 
```

**输出**：

```
{FCGI_STDERR, 1, "test1 at fcgi-die.pl line 35.\ntest2 at fcgi-die.pl line 36.\n"}
{FCGI_STDERR, 1, ""}
{FCGI_STDOUT, 1, "Perl: 5.014001 OS: darwin FCGI: 0.74\n"}
{FCGI_STDOUT, 1, ""}
{FCGI_END_REQUEST, 1, {0, FCGI_REQUEST_COMPLETE}} 
```

# ms-access - 如何在 Access 2010 表单上显示“相关数据”

> ID：14563689
> 
> 赞同：2
> 
> 时间：2013-01-28T14:00:17.753
> 
> 标签：ms-access, ms-access-2010

在 Access 应用程序的表单上，我有一对级联组合框：一个未绑定（源）和一个绑定（信息，绑定到长信息 ID）。来源用于缩小信息中可用的选择范围，这是一个必填字段。表格上还有一个必填字段：标题。

为了确保用户对组合做出正确的选择，并在创建后查看每条记录时使用，我需要在表单上显示与每个组合中当前选择的值相关联的只读信息。这包括一些富文本备注字段。此信息不是表单记录源的一部分（因为包含它会使记录集不可更新，更不用说影响性能，因为其中可能存在**大量**富文本备忘录）。用户可以双击这些有限大小的只读备忘录字段之一以调出一个弹出式表单，该表单将一次显示更多文本。

我首先尝试定义组合以包含多个隐藏列，其中包含必要的数据，并在表单上只读字段的公式中使用这些隐藏列。这会截断富文本备注字段。不行。

然后我尝试使用链接到组合的子表单（没有边框，因此它们看起来像表单的一部分）来显示数据。这可行，但有副作用，如果用户单击子表单内的字段，他们可能会收到一条消息，告诉他们主表单上的另一个必填字段尚未完成（因为将焦点移到子表单尝试保存主表单）。但是，如果他们单击主窗体中的其他字段，则在相同情况下不会出现相同的错误。不一致，并且可能让用户发疯（在测试期间让我发疯）。再说一次，不行。

是否有另一种技术可以让我显示完整的富文本字段但避免子表单的缺点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:17:51.813

听起来您希望您的用户查看但不编辑关联的富文本备忘录内容。在信息组合框的更新后事件中，用于`DLookup()`检索备注字段内容并将富文本加载到文本框中。

假设`InformationID`还存在于包含备注字段的表中，并且是数字数据类型...

```
Me.txtDetails = DLookup("memo_field", "table_name", _
    "InformationID = " & Me.cboInformation) 
```

如果是文本，则在该表达式`InformationID`的最后一段中添加引号。`DLookup`

```
 "InformationID = '" & Me.cboInformation & "'") 
```

您可以在表单的 On Current 事件中执行相同的操作，以便用户在记录之间导航时可以看到这些详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-21T08:54:42.597

我终于采用了[https://stackoverflow.com/a/14566357/1943174](https://stackoverflow.com/a/14566357/1943174)给出的答案的变体。我没有对表单的 On Current 事件和 Information 组合框的 After Update 事件进行编码来更新文本字段，而是将文本字段创建为计算字段，并将控制源设置为

```
=IIf(IsNull([Information]),"",DLookup("memo_field","table_name","[InformationID] = " & [Information])) 
```

每当记录更改或信息更新（或撤消）时，该字段都会更新。

# c# - 为什么我的 InnerException 没有发送给客户？

> ID：14563690
> 
> 赞同：8
> 
> 时间：2013-01-28T14:00:27.210
> 
> 标签：c#, silverlight, wcf-ria-services

我在服务器上有以下代码：

```
if (actualRowCount > maxRows)
{
    throw new DomainException("OverMaxRowLimitException",
        new OverMaxRowLimitException(string.Format(MaxRowsMessage,
        actualRowCount, maxRows)));
} 
```

`DomainException`这将使用`InnerException`属性集创建一个新的。我已经验证这是在调试器中设置的。

自定义异常是这样定义的：

```
public class OverMaxRowLimitException : Exception
{
    public OverMaxRowLimitException(string message)
    {
        this.Message = message;
    }

    public new string Message { get; set; }
} 
```

这应该向客户端返回一个合理的错误消息，以便可以告诉用户有太多行。因此，在加载完成处理程序中，我们希望拥有：

```
if (result.HasError)
{
    ShowError(result.Error.InnerException.Message);
} 
```

不幸的是，该`InnerException`物业是`null`。所以我们只需要检查外部异常消息的文本，它也没有正确地传输到客户端。

有人建议我需要：

```
<customErrors mode="Off" /> 
```

在网络配置文件中。我已经尝试过了，但它不起作用。

也有人建议我需要：

```
[KnownType(typeof(OverMaxRowLimitException))] 
```

关于数据合同。现在，除非我把它放在错误的地方，否则这也行不通。

我还尝试添加`[Serializable]`自定义异常并将其替换为通用`Exception`. 这些都不起作用。

那么，为什么`InnerException`属性为空。我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:07:18.630

我想你应该使用

`[FaultContract(typeof(OverMaxRowLimitException))]`

为您的操作合同。你`OverMaxRowLimitException`应该是可序列化的。

同样在使用中，我想抛出异常的正确方法是使用

`throw new FaultException<OverMaxRowLimitException>(yourException);`

# sql - SQL Hunt，具有挑战性的查询

> ID：14563693
> 
> 赞同：0
> 
> 时间：2013-01-28T14:00:33.960
> 
> 标签：sql, oracle

这是我应该在 Informatica 中完成的任务。我只想了解可能的解决方案。我并不特别需要查询，只是 SQL/Oracle 中的步骤可能会有很大帮助。

问题陈述：

NW Telecommunications 是印度的蜂窝通信服务提供商。他们在印度的所有州都有业务。作为业务运营的一部分，他们会收集有关服务取消原因的详细信息，以改进客户保留策略。他们现在有兴趣了解客户停止服务的主要原因。

以下是源表的结构

NWT_Connection_Details

```
Phone_No 
SIM (primary key)
Connection_Start_Date
Rate_Plan_Id
Connection_Status
Connection_Closure_Date
Can_Reason_Id
Cust_Id (foreign key)
Home_Location 
```

NWT_Cancellation_Reason

```
Can_Reason_Id (primary key)
Can_Text 
```

取消原因表中的数据：

```
 Can_Reason_Id       Can_Text
 NW              Network Issues
 MNP             Porting to a competitor
 RP              Rate Plan Issue
 RL              Relocation
 CS              Unsatisfactory customer service 
```

结果表是一个汇总表，其中包含发生的取消的汇总。目标表的结构如下。

Cancellations_Summary Can_Reason No. Of Cancellations Duration_of_Service Zone

注意：Duration_of_Service 是一个像 < 1 个月、1 到 3 个月、3 到 6 个月、6 到 12 个月和 > 12 个月这样的带

**样本目标表数据：**

```
NW      18         1 to 3      South
NW      5          1 to 3      South
CS      25         3 to 6      North 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:09:48.333

这是执行您想要的基本查询：

```
select cr.can_text, count(*)
from nwt_connection_details cd join
     nwt_cancellation_reason cr
     on cd.can_reason_id = cr.can_reason_id
group by cr.can_text
order by count(*) desc 
```

不过，我正在回答，因为这提供了对某些事情发表评论的机会。首先，您甚至没有理由考虑在 Informatica 中进行这样的查询。这是数据库设计的查询类型。Oracle 是最好的方法。

其次，这可能不是您想要的一切。您需要考虑日期、客户类型和任期。通常，有一个 OLAP 系统来解决这些类型的请求（如果数据不太大，可能是 Excel 中的数据透视表）。可以使用 Informatica 或使用来自 Oracle 的查询来加载此类 OLAP 系统。

# ios - 是否可以隐藏或替换已编译的第三方库的 NSLog() 函数，该库一直在我的日志中进行调试？

> ID：14563694
> 
> 赞同：7
> 
> 时间：2013-01-28T14:00:41.147
> 
> 标签：ios, objective-c, cocoa, logging

GoogleConversionPlugin 坚持记录无用信息的随机位并搞砸我的自动化测试报告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:56:34.357

您可以将所有`NSLog()`输出重定向到无处（或控制台日志以外的文件）或使其调用您自己的日志输出函数（不是正式的，但它有效），但这将作用于所有`NSLog()`调用，而不仅仅是来自此 Google 的调用插件，也来自您的代码中的调用。如果您的应用程序是单线程的，您可以使用自己的日志记录函数来检查全局`BOOL`日志记录当前是启用还是禁用；但是在多线程环境中，您必须控制每个线程（如果您使用 GCD，即使您自己不处理线程，您也是多线程的），这也是可能的，尽管需要更多额外的代码.

所以问题是，对于您来说，全局禁用日志记录（或当前线程），进行插件调用然后重新打开它是否是一个有用的解决方案？当然，如果插件内部是多线程的，禁用每个线程将不起作用（它可能会在您不注意的情况下切换线程），但在这种情况下，全局切换仍然可以工作。

`NSLog()`除非您愿意“修补”该库（当然，您可以在不让 Google 起诉您的情况下这样做），否则仅控制静态库的调用是不可能的。动态库是可能的，但是当你为 iOS 开发时，你不能使用动态库。

所以让我知道这些可能的解决方案中哪一个适合您的需求（如果有的话），我会看看我能为您做些什么（例如更新答案并添加一些代码或说明）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:27:27.303

首先“您应该与这些库/框架的开发人员联系并提交错误”。

在发布版本中，调试、错误或任何 NSLog 等不得存在，除非它非常关键。

# c++ - 如何在实例和静态范围之间创建成员变量？

> ID：14563695
> 
> 赞同：1
> 
> 时间：2013-01-28T14:00:45.007
> 
> 标签：c++, instance, static-members

我有一个新手 C++ 问题，对此感到抱歉...

在 C++ 中，如果我在基类中有实例变量，则所有派生实例都会获得它们自己的基实例变量的个人副本。

现在，如果我有一个低音类的类变量（静态成员），那么所有派生实例都可以共享基类变量。

我希望能够创建一个基变量，该变量根据派生类的实例进行实例化，而不是通过这些派生类的派生类实例进行实例化。

这可能吗？我该怎么做？或者做这种事情的最佳方法（解决方法）是什么？

所以举一个（坏的）例子：

假设我有类 A，它有派生类 B、C 和 D。我还有类 P，它有派生类 Q、R、S。

现在，我有一个配置器类。它有许多依赖于 Configurator 类的实例变量的奇特函数。我喜欢 A 和 P 派生自 Configurator 类，该类存储 A 和 P 的单独配置。这样 B、C、D 共享一个公共配置，而 Q、R、S 共享它们自己的单独配置。

但是，Configurator 类将根据其编写方式为 B、C、D 和 Q、R、S 创建单独的配置实例。

所以，无论如何，让 Configurator 类包含由派生类而不是每个实例实例化的成员变量会很好。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:18:04.727

显而易见的方法是使用组合，而不是继承。这样，每个 A 和 P 都有自己的静态配置，在它们各自的派生类之间共享。

```
class A {
  public: static Configurator config;
};
class P {
  public: static Configurator config;
};
class B : public A {};
class C : public A {};
class Q : public P {};
class R : public P {}; 
```

一个不太明显的方法是使用 CRTP。

```
template <class Derived> class Configurator {
  public: static int configValue;
};
class A : public Configurator<A> {};
class B : public A {};
class P : public COnfigurator<P> {};
class Q : public P {}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:10:19.303

如果我理解正确，您想要一个在同一类的所有实例中是“静态”的变量，但在不同的类之间变化，即使一个是从另一个派生的。

解决方案是在基类上定义一个函数，该函数返回静态变量的值，如下所示：

```
class Base  {
    int &static_var() {
       static int myvar = 42;
       return myvar;
    }
};

class Derived: public Base {
    int &static_var() {
       static int myvar = 17;
       return myvar;
    }
}; 
```

这样你应该有：

```
Base b;
b.static_var(); // should be 42
Derived c;
c.static_var(); // should be 17 
```

# java - 如何启用命令按钮

> ID：14563707
> 
> 赞同：1
> 
> 时间：2013-01-28T14:01:22.953
> 
> 标签：java, swing, events, jbutton

我在我的 java swing 程序中使用了 3 个命令按钮，例如读取、停止和退出。如果我单击读取按钮，则在读取文件之前，所有 3 个按钮都不会处于启用状态。如果我单击停止按钮，我需要您的帮助才能使这些按钮启用和停止阅读操作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:06:13.313

请注意，Swing 是一个建立在多线程平台之上的单线程框架。因此，当您执行长时间运行的任务时，您不应该使用[Swing EDT](https://en.wikipedia.org/wiki/Event_dispatching_thread)。

希望 Swing 已经包含了执行如此长时间运行的工作所需的所有内容。

1.  创建一个单独的线程来读取您的文件
2.  完成后，调用[`SwingUtilities.invokeLater`](http://docs.oracle.com/javase/7/docs/api/javax/swing/SwingUtilities.html#invokeLater%28java.lang.Runnable%29)方法以根据您的文件内容刷新 UI。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:34:45.377

使用[SwingWorker](http://docs.oracle.com/javase/6/docs/api/javax/swing/SwingWorker.html)来做到这一点。在阅读文件时禁用按钮，完成文件后启用按钮。一个简单的例子展示了它是如何工作的。

![启用禁用按钮的 Swing Worker 示例](../Images/93853f09cac7380662026ef4180c8afa.png) ![计算前](../Images/0e67dc559ab8c16fdca1f7b511b9acbe.png)

```
import java.awt.BorderLayout;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JDialog;
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JProgressBar;
import javax.swing.SwingWorker;

public class MyProgressBarTest {
    private static final long serialVersionUID = 1L;

    private static JProgressBar progressBar;

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

        @Override
        public void run() {
            MyProgressBarTest obj = new MyProgressBarTest();
            obj.createGUI();
        }
    });
    }

    public void createGUI() {
        final JFrame frame = new JFrame();

        JPanel panel = new JPanel();
        final JButton button = new JButton("Progress");

        progressBar = new JProgressBar();

        button.addActionListener(new ActionListener() {
            @Override
            public void actionPerformed(ActionEvent arg0) {

                MyCustomProgressBarDialog progressBarObj = new MyCustomProgressBarDialog(progressBar, frame);
                progressBarObj.createProgressUI();

                MyActionPerformer actionObj = new MyActionPerformer(progressBar, progressBarObj, button);
                actionObj.execute();

            }
        });

        panel.add(button);
        frame.add(panel);

        frame.setDefaultCloseOperation( JFrame.EXIT_ON_CLOSE );
        frame.setLocationRelativeTo(null);
        frame.setSize(200, 300);
        frame.setVisible(true);
    }
}

class MyActionPerformer extends SwingWorker<String, Object> {

    JProgressBar fProgressBar;
    MyCustomProgressBarDialog progressDialog;
    JButton button;

    public MyActionPerformer(JProgressBar progressBar, MyCustomProgressBarDialog progressDialog, JButton button) {
        this.fProgressBar = progressBar;
        this.fProgressBar.setVisible(true);
        this.fProgressBar.setIndeterminate(true);
        this.button = button;
        this.progressDialog = progressDialog;

        this.button.setEnabled(false);
    }

    protected String doInBackground() throws Exception {

        calculateResult();
        return "Finished";
    }

    protected void done() {
        fProgressBar.setVisible(false);
        this.progressDialog.setVisible(false);
        this.button.setEnabled(true);
    }

    public void calculateResult() {
        for (int i = 0; i < 500000; i++) {
            System.out.println("Progress Bar: " + i);
        }
    }
}

class MyCustomProgressBarDialog extends JDialog {
    private static final long serialVersionUID = 1L;

    private static JProgressBar progressBar;
    private JFrame motherFrame;
    private JLabel label = new JLabel("loading.. ");
    private JButton button;

    public MyCustomProgressBarDialog(JProgressBar progressBar, JFrame frame) {

        this.progressBar = progressBar;
        this.motherFrame = frame;
        this.button = button;
    }

    public void createProgressUI() {
        add(label, BorderLayout.NORTH);
        add(progressBar, BorderLayout.CENTER);
        setSize(50, 40);
        setAlwaysOnTop(true);
        setLocationRelativeTo(motherFrame);
        setUndecorated(true);
        setVisible(true);
    }
} 
```

MyActionPerformer 类扩展`SwingWorker`了具有`done`和`doInBackGround`. 在`doInBackGround`方法中读取文件并在完成后使按钮在`done`方法中启用。我正在调用单击时调用的`calculate`方法`JButton`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T14:18:31.097

对于读取按钮，对于这样的 ex set 操作：

```
private void ReadButtonActionPerformed(java.awt.event.ActionEvent evt) {
       ReadButton.setEnabled(false);
       StopButton.setEnabled(false);
       ExitButton.setEnabled(false);
    } 
```

对于停止按钮：设置如下操作：

```
private void StopButtonActionPerformed(java.awt.event.ActionEvent evt) {
       ReadButton.setEnabled(true);
       StopButton.setEnabled(true);
       ExitButton.setEnabled(true);
    } 
```

停止阅读动作：将阅读动作作为一个线程（在阅读按钮中），然后在（停止按钮）中停止该线程

例如：

```
class Read extends Thread {

    public void run() {
    //////////////Read action
}
} 
```

*   读读 = 新读（）；

*   然后在*ReadButtonActionPerformed*中：**read.start();**

*   在*StopButtonActionPerformed*中： **read.stop();**

# objective-c - 用 CGPoint 和/或 CGSize 定义 CGRectmake

> ID：14563708
> 
> 赞同：5
> 
> 时间：2013-01-28T14:01:32.323
> 
> 标签：objective-c, syntax, cgrect, cgrectmake

这是一个非常简单的问题，我似乎无法找到答案。这该怎么做 ：

```
CGRectMake(1, 3, size) 
```

或者

```
CGRectMake(pointB, size) 
```

或者

```
 CGRectMake(pointB, size.width, size.height) 
```

代替

```
CGRectMake(self.someview.frame.origin.x, self.someview.frame.origin.y, self.someotherview.frame.size.width, self.someotherview.frame.size.height) 
```

?? 谢谢 ！:)

编辑：

该方法`CGRectmake`采用`CGFloat`. 我希望它采用`CGSize`, 和/或`CGpoint`作为方法的参数。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T22:21:15.183

我想这就是你的想法：

```
 - (void) logRects
    {
        CGFloat
            x      = 10.0,
            y      = 20.0,
            width  = 50.0,
            height = 60.0;

        CGPoint point = {x, y};
        CGSize  size  = {width, height};

        CGRect  rect1 = {1, 3, size};
        CGRect  rect2 = {point, size};
        CGRect  rect3 = {point, size.width, size.height};

            //using designated (named) initialisers
        CGRect  rect4 = {.origin.x=3, .origin.y=5, .size = {100,100}};

            //with designated initialisers, order doesn't matter
        CGRect  rect5 = {.size=size, .origin.x=3, .origin.y=5};

        NSLog (@"rect1 %@",NSStringFromCGRect(rect1));
        NSLog (@"rect2 %@",NSStringFromCGRect(rect2));
        NSLog (@"rect3 %@",NSStringFromCGRect(rect3));
        NSLog (@"rect4 %@",NSStringFromCGRect(rect4));
        NSLog (@"rect5 %@",NSStringFromCGRect(rect5));
    } 
```

但请注意这里的讨论：
[为什么使用像 CGRectMake 这样的函数？](https://stackoverflow.com/questions/11700535/why-use-functions-like-cgrectmake)

这种复合文字语法在我看来似乎更容易阅读和编写，尽管函数在未来验证方面具有优势（+ 你得到自动完成）。

*更新*
另见这个最近的问答：

[我以前没见过的 CGRect 语法](https://stackoverflow.com/questions/14723747/cgrect-syntax-i-havent-seen-before)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-28T14:06:35.507

CGRectMake(1, 3, 大小):

```
 CGRectMake(1, 3, size.width, size.heigh) 
```

CGRectMake(pointB, 大小):

```
 CGRectMake(pointB.x, pointB.y, size.width, size.height) 
```

CGRectMake(pointB, size.width, size.height):

```
 CGRectMake(pointB.x, pointB.y, size.width, size.height) 
```

CGRect 看起来像这样：

```
struct CGRect {
  CGPoint origin;
  CGSize size;
};
typedef struct CGRect CGRect; 
```

CGPoint 和 CGSize 看起来像这样：

```
struct CGPoint {
  CGFloat x;
  CGFloat y;
};
typedef struct CGPoint CGPoint;

struct CGSize {
  CGFloat width;
  CGFloat height;
};
typedef struct CGSize CGSize; 
```

CGRectMake 是以下函数：

```
CG_INLINE CGRect
CGRectMake(CGFloat x, CGFloat y, CGFloat width, CGFloat height)
{
  CGRect rect;
  rect.origin.x = x; 
  rect.origin.y = y;
  rect.size.width = width; 
  rect.size.height = height;
  return rect;
} 
```

所以而不是：

```
CGRect r = CGRectMake(pointB.x, pointB.y, size.width, size.height) 
```

你可以简单地写：

```
CGRect r;

r.origin = pointB;
r.size = size; 
```

如果您想创建自己的 CGRectMake，请随意这样做：

```
CG_INLINE CGRect
MyPrivateCGRectMake(CGPoint p, CGSize s)
{
  CGRect rect;
  rect.origin = p;
  rect.size = s;
  return rect;
} 
```

但是您无法更改已经存在的函数接受哪些参数。

# c# - 单击事件需要两次单击才能在 asp.net 中触发

> ID：14563711
> 
> 赞同：2
> 
> 时间：2013-01-28T14:01:47.320
> 
> 标签：c#, asp.net

下午好，希望有人能够帮助我诊断我在使用 Post 方法将数据提交到另一个域的 Web 表单上遇到的问题。在此页面中，我使用的是 asp 按钮控件。它有 button_click 事件。

现在的问题是，按钮单击事件两次单击。（原因是，单击按钮单击事件。另一个是向另一个域提交数据）。我在 Button_click 事件中编写了 form.action 方法。

现在我想使用一次单击需要执行 button_click 事件，并且表单应该提交到在 form.action 中给出的另一个域。

任何帮助，将不胜感激。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:10:44.123

要将数据发布到另一个域，请在单击处理程序后面的页面代码中，获取 Request.Params 并将其传递给 WebClient 实例的 UploadValues 函数。

[http://msdn.microsoft.com/en-us/library/system.web.httprequest.params.aspx](http://msdn.microsoft.com/en-us/library/system.web.httprequest.params.aspx)

[http://msdn.microsoft.com/en-us/library/9w7b4fz7.aspx](http://msdn.microsoft.com/en-us/library/9w7b4fz7.aspx)

因此，现在您只需单击一次即可在单击事件处理程序中执行两件事，第一件事是处理表单提交（进行验证或其他操作），然后将其发送（使用 WebClient 的 HTTP POST）到另一个域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T07:31:24.370

使用具有 Post 方法的中介页面。在 page_Load 你需要写 this.form.action="desired another domain url"。在此之前采用隐藏控件并为其分配值。

请参考 [http://markchouanard.com/post/35052747409/executing-cross-domain-post-using-jquery-and-asp-net](http://markchouanard.com/post/35052747409/executing-cross-domain-post-using-jquery-and-asp-net)

对于代码 [http://www.codeproject.com/Articles/37539/Redirect-and-POST-in-ASP-NET](http://www.codeproject.com/Articles/37539/Redirect-and-POST-in-ASP-NET)

# javascript - 如何为未经授权的用户处理浏览器后退导航

> ID：14563716
> 
> 赞同：0
> 
> 时间：2013-01-28T14:02:01.300
> 
> 标签：javascript, jquery, css, jquery-mobile

我有一个 jQuery Mobile 网站

*   它有登录页面，个人资料页面，编辑个人资料页面。
*   用户可以登录并访问其他页面。
*   我正在使用 cookie 维护会话，该 cookie 将登录状态保持 30 分钟。当用户在登录以外的任何其他页面时，用户可以通过单击注销按钮注销。注销时 cookie 被删除，用户被重定向到登录页面。
*   当用户注销并点击返回按钮时，用户将导航到上一个未经授权的页面，因为用户已经注销。

有没有办法阻止用户导航到未经授权的后页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:10:17.390

您应该在每个页面的顶部都有服务器端代码，以检查用户是否已登录，如果未登录则重定向。如果退出后后退按钮仍然有效，则意味着浏览器正在显示页面的缓存版本（用户可能无法从那里进一步导航）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:05:45.907

试试这个简单的脚本：

[http://viralpatel.net/blogs/disable-back-button-browser-javascript/](http://viralpatel.net/blogs/disable-back-button-browser-javascript/)

当您尝试返回时，它会重新加载当前页面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-16T10:28:52.343

感谢大家的贡献。我找到了另一种有助于处理反向导航到未经授权页面的方法。我想与大家分享这一点。使用 setInterval 函数我能够知道每一秒的会话可用性。下面是我的带注释的代码。

```
var userDetails = getUser( );//get the user details from cookie
if(userDetails != null) // if user session exhists
{
if(userDetails.remember == 0){
var IDLE_TIMEOUT = 30 * 60; // set 30 minutes inactive timeout 
var _idleSecondsCounter = 0; // counter to count seconds starts from 0

//extend the session timeout by extending the cookie expiry by 30 minutes if the user is active and set the counter to zero
document.onclick = function() {
        updateCookie();
    _idleSecondsCounter = 0;
};
document.onmousemove = function() {
    updateCookie();
    _idleSecondsCounter = 0;
};
document.onkeypress = function() {
    updateCookie();
    _idleSecondsCounter = 0;
};

//function to check the idle time and 
function CheckIdleTime() {
    _idleSecondsCounter++;
    var curPage = $('.ui-page-active').attr('id');

    if (_idleSecondsCounter >= IDLE_TIMEOUT && curPage != "login")
    {
            delcookie(); //once session timeout occurs delete the cookie
            alert("Session Timeout");
            $.mobile.changePage( "#login", { transition: "slideup", changeHash: true });
    }
}
window.setInterval(CheckIdleTime, 1000);//check idle time every second
}
}else// if user session does not exhists
{
    $.mobile.changePage( "#login", { transition: "slideup", changeHash: true });
} 
```

# angularjs - 带有可以添加书签的 url 的 master-detail

> ID：14563722
> 
> 赞同：0
> 
> 时间：2013-01-28T14:02:15.440
> 
> 标签：angularjs

1.  我有一个页面，其左侧显示项目列表。
2.  单击其中一项时，该项目的详细信息应在右窗格中打开。
3.  网址也应设置为“/item/21”

    *   问题`$route`在于它会导致完全刷新。
    *   仅捕获`ng-click`和设置项目的问题在于 url 不会更改，因此无法添加书签。

该`angularjs`站点为其 api 和教程搜索部分实现了类似的功能。

我有哪些实施上述方案的选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:39:05.517

通过“完全刷新”，我假设这意味着整个页面正在刷新。解决此问题的一种方法是将左窗格内容直接放入 index.html 页面，并且仅使用 ng-view 来控制右窗格：

```
<div ng-controller="...">
  <!-- left pane stuff here -->
</div>
<ng-view><!-- right pane stuff will show up here --></ng-view> 
```

另请参阅[https://stackoverflow.com/a/12184150/215945](https://stackoverflow.com/a/12184150/215945)和
[https://stackoverflow.com/a/14365786/215945](https://stackoverflow.com/a/14365786/215945)

# android - 在 Android 日历中添加事件

> ID：14563723
> 
> 赞同：4
> 
> 时间：2013-01-28T14:02:26.000
> 
> 标签：android, events, android-calendar, android-syncadapter

```
private void setEvent(){        
    long startMilis = 0;
    int mCalId = 1;
    long endMilis = 0;
    Calendar beginTime = Calendar.getInstance();
    beginTime.set(2013, 1, 29, 9, 10);
    startMilis = beginTime.getTimeInMillis();  
    Calendar endTime = Calendar.getInstance();
    endTime.set(2013, 1, 30, 10,10);
    endMilis = endTime.getTimeInMillis();

    ContentResolver cr = getContentResolver();
    ContentValues values = new ContentValues();
    values.put(Events.CALENDAR_ID, mCalId);
    values.put(Events.DTSTART, startMilis);
    values.put(Events.DTEND, endMilis);
    values.put(Events.TITLE,"Special Event");
    values.put(Events.DESCRIPTION, "Group Activity");
    values.put(Events.EVENT_TIMEZONE, "America/Los_Angeles");
    Uri uri = cr.insert(Events.CONTENT_URI, values);
    Toast.makeText(this, "Event Added", Toast.LENGTH_LONG).show();
} 
```

这是我想将事件添加到 android 日历的代码片段。代码工作正常。

但是在设备上测试时，**指定的事件实际上并没有被添加，也没有出现在日历中。**代码完全没有错误，我已经提供了必要的权限。

有人可以告诉我我到底在哪里做错了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-18T20:18:41.080

如果没有错误，但事件没有出现在日历中，我会怀疑罪魁祸首是`mCalId = 1`作业。

一个设备可以有多个日历。不能保证 id == 1 的那个是主要的（即使您使用主要的，用户也可能在多个不同的日历中拥有事件——例如个人和工作）。

所以，这取决于你想做什么。您应该：

*   使用主日历（带有 的日历[`IS_PRIMARY`](http://developer.android.com/reference/android/provider/CalendarContract.CalendarColumns.html#IS_PRIMARY)，但请参阅上面的警告），或
*   让用户首先选择一个日历（仅当查询[日历表](http://developer.android.com/reference/android/provider/CalendarContract.Calendars.html)时找到多个日历时），然后从那时起使用该日历`calendar_id`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-24T03:41:35.607

也许你使用了错误的 Uri，我在我的应用程序中使用了这个：

```
 Uri EVENTS_URI = Uri.parse(CalendarContract.Events.CONTENT_URI.toString());
    ContentResolver cr = getActivity().getContentResolver();

    ContentValues values = new ContentValues();

    values.put("calendar_id", 1);       
    values.put(Events.TITLE, recordatorio);
    values.put(Events.ALL_DAY, 1);
    values.put(Events.EVENT_LOCATION, lugar);
    values.put("dtstart", calDate.getTimeInMillis());
    values.put("dtend", calDate.getTimeInMillis());
    values.put(Events.DESCRIPTION, observaciones);
    values.put("availability", 0);
    values.put(Events.HAS_ALARM, true);     
    values.put(Events.EVENT_TIMEZONE, TimeZone.getDefault().toString());

    Uri uri = cr.insert(EVENTS_URI, values);
// to get the Id Event          
    long eventID = Long.parseLong(uri.getLastPathSegment()); 
```

# python - numpy 数组的总大小

> ID：14563728
> 
> 赞同：0
> 
> 时间：2013-01-28T14:02:54.013
> 
> 标签：python, arrays, numpy, size

我正在尝试将列表操作到矩阵中，但由于某种原因它不起作用......

```
 import numpy as np

    dcd=np.load('dcd_250.npy')
    #4\. write the dcd into an array
    print 'Length of dcd', len(dcd)

    al_gtps = np.array(dcd).reshape(250000,5416)            # reshape(SNP no, ind no)
    print 'Size of al_gtps', al_gtps.size                                                 

    gtps_T=al_gtps.T

    print 'Size of gtps_T', gtps_T.size

    allelic_gtps=[]
    check=[]
    #5\. turn into strings
    for k in gtps_T:
        check=k
        allelic_gtps.append("%s" % ' '.join(map(str,k)))

    print 'Length of allelic_gtps', len(allelic_gtps)

    together=[]
    for each in allelic_gtps:
        for ch in each:
            if ch!=' ':
                together.append(ch)
        else:
             pass

    matrix=np.array(together).reshape(5416,500000)

    np.save('matrix.npy', matrix) 
```

数组的长度应该是：

```
Length of dcd 1354000000
Size of al_gtps 1354000000
Size of gtps_T 1354000000
Length of allelic_gtps 5416
Length of together 2708000000 
```

我的最终矩阵应该有 5416 行，每行 500 000 列。这给出了 2 708 000 000，这就是我在“一起”中所拥有的。但是，我收到以下错误消息：

```
 Traceback (most recent call last):
    File "p3_gtp_format.py", line 51, in <module>
    matrix=np.array(together).reshape(5416,500000)
    ValueError: total size of new array must be unchanged 
```

这不应该是内存问题，因为我正在使用大型内存机器。同样的脚本适用于较小的数据集，其中矩阵的大小为 5416 行和 200 000 列。有任何想法吗？

# linux-kernel - ./hdfs-fuse：加载共享库时出错：libfuse.so.2：错误的 ELF 类：ELFCLASS64

> ID：14563729
> 
> 赞同：0
> 
> 时间：2013-01-28T14:02:58.653
> 
> 标签：linux-kernel

使用的操作系统：CentOS 6.3 X86_64。./hdfs-fuse：加载共享库时出错：libfuse.so.2：错误的 ELF 类：ELFCLASS64

尝试了一切都安装了每个库，但无法解决此错误。

请帮帮我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:49:47.903

看起来您正试图在 64 位系统上运行 32 位应用程序。但是，您可能必须安装适当的 32 位库。在您的情况下，需要 32 位版本的 FUSE 库 (libfuse.so.2)。

# batch-file - 是否可以使用批处理文件读取一行，然后仅使用该行的子字符串来执行命令？

> ID：14563730
> 
> 赞同：0
> 
> 时间：2013-01-28T14:02:59.510
> 
> 标签：batch-file, substring, xcopy

我正在使用 ClearCase，我想使用批处理脚本来运行通过 cleartool 命令生成的文本文件，复制该行中指定的文件，然后通过仅提取子字符串直到指定的字符集执行重命名.

一个示例文本文件是：

```
"M:\LEVEL1\PROJECT\src\ROOT\file 2.txt@@\main\LEVEL1\5"
"M:\LEVEL1\PROJECT\src\ROOT\file 1.txt@@\main\LEVEL1\3"
"M:\LEVEL1\PROJECT\src\ROOT\folder 1\file 5.txt@@\main\LEVEL1\2"
"M:\LEVEL1\PROJECT\src\ROOT\file 4.txt@@\main\LEVEL1\3"
"M:\LEVEL1\PROJECT\src\ROOT\file 7.txt@@\main\LEVEL1\2" 
```

我想做的是创建一个看起来像这样的命令（使用第一行）：

```
xcopy "M:\LEVEL1\PROJECT\src\ROOT\file 2.txt@@\main\LEVEL1\5" "<output folder>\LEVEL1\PROJECT\src\ROOT\file 2.txt" 
```

where`<output folder>`是运行脚本时指定为参数的文件夹。所以基本上我要求的是在读取时只提取每行之间`M:`和之间`@@`的内容，以便我可以在复制命令中使用它。

我已经有`xcopy "%%~fA" "%OUTPUTDIR:"=%\%%~pnxA"`将一行复制到输出目录的方法，但它`%%~pnxA`只会删除驱动器号，而不会删除该行的剩余部分`@@`。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:38:34.430

只是将 JJRythms 的答案分解成一个解释。

```
for /F "tokens=1,2,3 delims=:@" %%A in (in.txt) do xcopy %%A:%%B@@%%C DIR:%%B 
```

该语句的目的是解析`in.txt`文件中的行，然后使用我们想要的部分。

*   [`for`](http://technet.microsoft.com/en-us/library/bb490909.aspx)- 循环命令。
*   [`/F`](http://ss64.com/nt/for_f.html)- 文件解析循环类型选项。
*   `tokens=1,2,3`- 根据字符串分隔符在其中检索的子字符串。
*   `delims=:@`- 分隔标记的分隔符。（默认为空格）
*   `%%A`- 起始循环变量。（代币 1 = `%%A`，代币 2 = `%%B`，代币 3 = `%%C`）
*   `in (in.txt)`执行循环命令的文件。
*   `do`- 为文件的每一行执行的命令。

示例 使用第一行。

```
"M:\LEVEL1\PROJECT\src\ROOT\file 2.txt@@\main\LEVEL1\5" 
```

被解析为：

```
%%A = "M
%%B = \LEVEL1\PROJECT\src\ROOT\file 2.txt
%%C = \main\LEVEL1\5" 
```

分隔符被消耗，因此从结果变量中删除。

`@`请注意，如果文件名中的其他任何地方有任何符号，此解决方案将不起作用。

在命令行上键入[`for /?`](http://technet.microsoft.com/en-us/library/bb490909.aspx)帮助和选项。

# python - Python系统输入只接受一个字符？

> ID：14563735
> 
> 赞同：0
> 
> 时间：2013-01-28T14:03:14.413
> 
> 标签：python, input, sys

> **可能重复：**
> [Python 从用户读取单个字符](https://stackoverflow.com/questions/510357/python-read-a-single-character-from-the-user)

我想创建一行代码，它只接受一个字符作为输入。例如...

```
var = my_input("Type a letter: ")

print var 
```

在运行时，当您按下一个字符生成键时，该字符就会被打印出来。那么，我将如何创建该功能`my_input`？

# php - 在 php 中使用 imagecreate 创建 png 时出错

> ID：14563737
> 
> 赞同：0
> 
> 时间：2013-01-28T14:03:16.583
> 
> 标签：php, imagecreatefrompng

我正在创建验证码，这是我创建验证码图像的脚本。

```
 header("Content-type: image/png");
$width              = 100;
$height             = 40;
$im                 = ImageCreate($width, $height);

$bg                 = ImageColorAllocate($im, 250, 250, 250);

$border             = ImageColorAllocate($im, 191, 191, 191);
ImageRectangle($im, 0, 0, $width - 1, $height - 1, $border);

$text               = base64_decode($GLOBALS["captcha_akey"]);

$textcolor          = ImageColorAllocate($im,0,5,5);

$font               = 3;

$font_width         = ImageFontWidth($font);
$font_height        = ImageFontHeight($font);

$text_width         = $font_width * strlen($text);

$position_center    = ceil(($width - $text_width) / 2);

$text_height        = $font_height;

$position_middle    = ceil(($height - $text_height) / 2);

ImageString($im, $font, $position_center, $position_middle, $text, $textcolor);

ImagePNG($im); 
```

验证码显示正确，但在验证码顶部我发现了这个错误。

```
 �PNG  IHDRd(u�� PLTE������IDAT8�퓻 �0DU�M�R�Y"�*=���)C)T�"��pXH���$����|�˟�$�9N����$獌�@�54�i[ -Hi\ku7��&Y���АLA�h;�Ah�^u�*���5 I:;���\�pd;��;ߓ�6b�(���'P�SY���IEND�B`� 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T08:27:19.607

看起来您的标题 (header("Content-type: image/png");) 已在 html 内容中发送。必须先输出所有标题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-02T04:48:40.190

我通过在 php.ini 中启用 gd 扩展来让它工作

在 php.ini 文件中取消注释这一行：（`extension=php_gd2.dll`删除前导；）

要找到您的 php.ini 文件，请创建以下文件并上传到服务器并在浏览器中运行。

```
 <?php
phpinfo();
?> 
```

它会显示一行，配置文件（php.ini）路径/usr/local/lib和加载的配置文件/usr/local/lib/php.ini

# c# - 可以跨类使用 DataSet 吗？

> ID：14563738
> 
> 赞同：0
> 
> 时间：2013-01-28T14:03:22.117
> 
> 标签：c#, winforms, dataset

我正在使用 VS 2010 和 C# windows 窗体。我需要用户输入他有多少物体以及每个物体的重量。然后我需要处理每一个。我通常用于行集合中的每个数据行。

问题是我尝试清理我的一些非常讨厌的代码（这是我第一个真正的项目，顺便说一句）我有一个大约 5000 行代码的主类，并希望将特定的模块集分解成自己的类。问题是当用户输入信息时，我必须在主表单（DSObjects）上设置一个数据集，并链接一个表格网格视图和几个带有添加按钮的输入框，以便用户可以添加他们需要的数据。我遇到的问题是，当我运行代码并将类分解为子类时，每个新类上的数据集都会被清除。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:08:38.373

不要在每个类中创建数据集的新实例，而是传递一个实例，例如：

```
public class AnotherClass
{
    private DataSet m_dataSet;

    public AnotherClass(DataSet ds)
    {
        m_dataSet = ds;
    }
} 
```

创建新的`AnotherClass`使用实例时：

```
AnotherClass ac = new AnotherClass(m_dataSet); 
```

where`m_dataSet`又是一个引用数据集的成员变量——要么传递给构造函数中的调用类，要么（在主类的情况下）在代码中的某处创建。

只创建一次数据集，例如在主类中。

另一种方法是使用单例类来保存数据集的实例。然后可以从许多不同的对象访问单例。

[非线程安全示例](https://stackoverflow.com/questions/12316406/thread-safe-c-sharp-singleton-pattern)将是：

```
public class DataHolder
{
    private DataSet m_dataSet;
    private static DataHolder m_instance;

    private DataHolder()
    {
        m_dataSet = ... // Fill/Create it here
    }

    public static DataHolder Instance
    {
        get
        {
            if (m_instance = null)
                m_instance = new DataHolder();
            return m_instance;
        }
    }

    public DataSet Data
    {
        get { return m_dataSet; }
    }
} 
```

然后，使用`DataHolder.Instance.Data`;访问它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:16:12.837

请记住，DataSet 实际上是内存中的一个小型（但完整）数据库。虽然大多数应用程序只是使用它来将数据从数据库服务器传输到应用程序中的对象，但它具有完整数据库的所有部分：多个表，可以连接为关系，可以对它们运行查询。

考虑到这一点，正如您不会为每个类使用单独的数据库，而是为整个应用程序全局使用一个数据库，同样让应用程序中的所有对象共享一个 DataSet 也是非常合理的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:06:04.390

您可以尝试将数据集传递给每个类的构造函数

```
var something = new Something(dataset) 
```

# asp.net - 使用 FormsAuthenticationTicket 进行 ASP.NET MVC 身份验证（可能是）

> ID：14563739
> 
> 赞同：3
> 
> 时间：2013-01-28T14:03:25.017
> 
> 标签：asp.net, asp.net-mvc, authentication, asp.net-mvc-4

我是一个 PHP 人，但正在 ASP.NET MVC4 中制作一个登录页面。我期望在会话中存储用户的 ID、用户名和角色。到目前为止，我正在做的事情如下。如果我是正确的，它会使用用户名保存 cookie。

```
[HttpPost]
    public ActionResult Login(Models.UserLoginModel user)
    {
        if (ModelState.IsValid)
        {
            Models.User u = new Models.User();
            if (u.IsValid(user.Username, user.Password))
            {
                FormsAuthentication.SetAuthCookie(user.Username, user.RememberMe);

                return RedirectToAction("Index", "Accounts");
            }
            else
            {
                ModelState.AddModelError("", "Login data is incorrect!");
            }
        }
        return View(user);
    } 
```

我的兴趣是存储更多信息并控制验证时间。我被建议并**要求使用** `FormAuthenticationTicket`类。我替换`FormsAuthentication.SetAuthCookie(user.Username, user.RememberMe);`为

```
FormsAuthenticationTicket ticket = new FormsAuthenticationTicket
(
    1, 
    user.Username, 
    DateTime.Now, 
    DateTime.Now.AddMinutes(30), 
    false, 
    "Some User Data", 
    FormsAuthentication.FormsCookiePath
);
Response.Cookies.Add
(
    new HttpCookie
    (
        FormsAuthentication.FormsCookieName, 
        FormsAuthentication.Encrypt(ticket)
    )
); 
```

它看起来很酷，但我没有测试它，具有灵活性。但问题是我如何才能收到这些信息。

如何获取这些信息并确定用户是否已登录以及保存在`FormsAuthenticationTicket`.

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T14:53:14.997

就像你对任何票一样：

```
var cookie = Request.Cookies[FormsAuthentication.FormsCookieName];
var ticketInfo = FormsAuthentication.Decrypt(cookie.Value); 
```

由于它是安全票据，如果您不需要从客户端 JavaScript 访问信息，也将 HttpOnly 设置为 true。这意味着 cookie 只能在服务器上访问。

# html - Tumblr - 高清图片？

> ID：14563743
> 
> 赞同：0
> 
> 时间：2013-01-28T14:03:34.347
> 
> 标签：html, css, tumblr, retina-display

我正在开发一个 Tumblr 主题。

我希望我的主题`@2x`兼容，所以我使用 jQuery Retina 插件：
[https ://github.com/tylercraft/jQuery-Retina](https://github.com/tylercraft/jQuery-Retina)

您必须将文件命名为相同的名称，除非您将选择的后缀添加到`@2x`行`-hd`或`_2x`.

您可以通过[Static Tumblr Upload](http://www.tumblr.com/themes/upload_static_file)使您的图像可用。

问题是，Tumblr 总是生成一个自定义 URL 组件：
[http ://static.tumblr.com/user/aRandomCode/blabla.png](http://static.tumblr.com/user/aRandomCode/blabla.png)

现在，随机代码搞砸了。

我应该如何解决这个问题？我假设我可能不是唯一一个制作它们的人`@2x`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:48:37.267

您可以使用 CSS 指定新资产，而不是使用 jQuery 插件：

```
@media 
only screen and (-webkit-min-device-pixel-ratio: 2), 
only screen and (min-resolution: 192dpi) { 
    /* Retina-specific stuff here */
} 
```

这将减少需要加载额外的插件。更多阅读：[http ://www.brettjankord.com/2012/11/28/cross-browser-retinahigh-resolution-media-queries/](http://www.brettjankord.com/2012/11/28/cross-browser-retinahigh-resolution-media-queries/)

# php - Character Encoding utf8 to latin1，解释一下这2个字符

> ID：14563744
> 
> 赞同：1
> 
> 时间：2013-01-28T14:03:34.877
> 
> 标签：php, sql, character-encoding

我有一个使用 latin-1 的数据库和一个 utf-8 的 PHP 应用程序。

我在数据库中有这样的字符串：

' **Société** ' 应该是 Société

“ **€** 10 亿”应该是 20 亿欧元。

**当我使用 PHP 的ord()**将错误字符打印到屏幕上时，从数据库中的返回数据中，它会打印 195 和 226。

有人可以解释为什么会发生这种情况（为什么要这样保存以及为什么要按原样读取字符）以及我是否可以扭转它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T14:06:01.950

**为什么：**

**1）** é是unicode 233（浏览器读取它）。
`é`utf8 字节转换为 latin1 字符字节是`Ã ©`. 这就是为什么它在数据库中看起来像这样。
`Ã ©`被识别为`Ã`代码点 195。这就是为什么你会看到它。

**2)** € 是 unicode 8364。
€ utf8 字节转换为 latin1 chars 字节是`â <82> ¬`. 这也是为什么它们在数据库中看起来像这样的原因。
`â <82> ¬`被识别为`â`代码点 226。这也是您看到此内容的原因。

这就是为什么您会从中看到这些值`ord()`以及字符以这种方式存储在 latin-1 数据库中的原因。

**逆转：**

要反转它，我们需要将 Latin-1 字符字节转换为 UTF8 字节。

如果我们尝试一下：
`â`是 226。将 latin-1 转换为 utf8 会产生`Ã¢`.
`Ã`是 195。将 latin-1 转换为 utf8 会产生`Ãƒ`.

**问题：**

问题是 Latin-1 的字符比 utf-8 少（很长一段路）。
Latin1 单字节流和 UTF8 多字节字符流，因此 utf8 中的 1 个字符最多可以为 latin1 生成 4 个字符。
所以 UTF-8 到 Latin-1 的转换会产生错误的字符。
Latin1 回到 utf8 是不可能的。

**解决方案：**

如果您无法更改数据库的字符集，我可以建议在编写它们之前将数据库中的特殊字符编码为它们的字符实体（因此 db 可以保持为 latin1 和 app 为 utf8，因为两者都可以理解 html 实体）例如 umlaut 为`&Auml;`.
可以使用 PHP`html_entity_decode()`结合`mb_detect_encoding()`检测和转换特定字符来完成。

**参考：**

有关*utf8 char 字节到 latin1 字节*的[信息](http://www.ltg.ed.ac.uk/~richard/utf-8.cgi?input=%C3%96&mode=char)，请参见**ltf.ed.ac.uk：http://www.ltg.ed.ac.uk/~richard/utf-8.cgi?input=%C3%96&mode=char**

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:12:05.153*

# android - 如何在处理程序中显示 DialogFragment？

> ID：14563745
> 
> 赞同：0
> 
> 时间：2013-01-28T14:03:36.563
> 
> 标签：android, android-dialogfragment, android-handler

如果网络通信线程出现问题，我想向用户显示一条消息。

出于这个原因，有必要显示来自处理程序的对话框。

这是正确的方法吗？，因为我没有找到方法，如何在处理程序类中获取 FragmentManager。

```
class ErrorMessageHandler extends Handler
{
    @Override
    public void handleMessage(Message msg) 
    {
        super.handleMessage(msg);

        AlertDialogFragment dialog = new AlertDialogFragment((String) msg.getData().get("MESSAGE"));

        dialog.show(FragmentManager, TAG)

     }  

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T09:29:57.940

过了一会儿，我找到了一个非常简单的解决方案：

您必须在 Service 类中实现此方法：

```
void alert(String message) 
{
    AlertDialog.Builder alertDialog = new AlertDialog.Builder(getApplication());
    alertDialog.setMessage(message);
    alertDialog.setNeutralButton("OK", null);
    alertDialog.create().show();
} 
```

有时它真的很容易:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:07:20.960

为什么不显示一条简单的 toast 消息，以字符串形式显示您收到的错误消息（或您想要设置的任何其他消息）

也许我误解了你的问题，但对我来说，这似乎是合乎逻辑的。我正在使用简单的 toast 来显示网络错误消息或其他内容。

```
Toast.makeText(context, text, duration).show(); 
```

根据您的意见，可以建议另一种解决方案：

出错时，显示确认对话框 (AlertDialog) 并让用户选择是否要阅读帮助：

```
 new AlertDialog.Builder(this)
    .setTitle("Network Error")
    .setMessage(An error occured, would you like to read the help section ...)
    .setPositiveButton(R.string.yes, new DialogInterface.OnClickListener() {

        @Override
        public void onClick(DialogInterface dialog, int which) {
          // Open here the new view with the help message etc.
        }

    })
    .setNegativeButton(R.string.no, null)
    .show(); 
```

因此，在这种情况下，您不会立即使用长帮助文本来打扰用户。您将首先告诉他发生了错误，如果他想阅读有关如何解决问题的帮助，他可以确认并进一步了解。这对您的应用程序的设计很有好处，因为通常用户不喜欢阅读大量文本，尤其是一些帮助说明。

最后，您可以显示带有简短错误消息的 Alertdialog 并建议查看帮助。在那里，您可以邀请他检查他的互联网连接是否已启用，说明如何启用，建议一个按钮直接转到您手机的页面，他可以在其中启用/禁用 wifi 等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T09:21:12.773

所以......我找到了解决这个问题的方法，但这不是完美的方法（更多细节在这个答案的底部）。

首先创建一个 Messenger：

```
private Messenger AlertDialogMessenger = new Messenger(new AlertDialogMessageHandler()); 
```

第二个处理程序，显示此对话框：

```
class AlertDialogMessageHandler extends Handler
{

    @Override
    public void handleMessage(Message msg) 
    {
        super.handleMessage(msg);

        AlertDialog dialog = new AlertDialog.Builder(MainActivity.this).create();

        dialog.setTitle("Attention");
        dialog.setMessage((CharSequence) msg.getData().get("MESSAGE"));
        dialog.setOnCancelListener(new DialogInterface.OnCancelListener() 
        {               
            @Override
            public void onCancel(DialogInterface dialog) 
            {
                //Do something
            }
        });
        dialog.setButton(DialogInterface.BUTTON_NEUTRAL, "OK", new DialogInterface.OnClickListener() 
        {               
            @Override
            public void onClick(DialogInterface dialog, int which) 
            {
                //Do something
                dialog.dismiss();
            }
        });

        dialog.show();                              
    }

} 
```

然后您只需将信使发送到服务：

```
Intent intent = new Intent(this,MyService.class);
intent.putExtra(MainActivity.EXTRA_FROM_SERVICE_MESSENGER, this.AlertDialogMessenger);
this.bindService(intent, this.conn, Context.BIND_AUTO_CREATE); 
```

在服务中，您必须抓住信使：

```
@Override
public IBinder onBind(Intent intent) 
{       
    this.AlertDialoMessenger = intent.getParcelableExtra(MainActivity.EXTRA_FROM_SERVICE_MESSENGER);
    return null;
} 
```

然后您可以通过发送消息来显示对话框：

```
Message msg = Message.obtain();
Bundle bundle = new Bundle();
bundle.putString("MESSAGE", "This is a test message");

msg.setData(bundle);
try 
{
    AlertDialoMessenger.send(msg);
} 
catch (RemoteException e1) 
{
    e1.printStackTrace();
} 
```

就是这样。

不幸的是，我不能在我的情况下使用它，因为这仅在您只有一个活动（在本例中为 MainActivity）时才有效。因为 Dialog 只会出现在这个 Activity 中。

在我的项目中，我有更多的活动，所以使用它没有任何意义。

我决定显示一条简短的 toast 消息，例如“网络错误”，并在 OptionsMenu 中提供帮助页面。

感谢米洛斯！我希望这段代码有时对某人有所帮助:)

# iphone - 如何一次只显示一个 UITableViewCellAccessoryCheckmark

> ID：14563746
> 
> 赞同：0
> 
> 时间：2013-01-28T14:03:48.363
> 
> 标签：iphone, ios, objective-c, uitableview

我遇到了以下代码的问题，它应该只允许选择一个表格行并显示一个复选标记。目前，行中显示了多个复选标记。

谢谢你的帮助

```
- (void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //Save the row selected to nsuserdefaults
    UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:indexPath];

    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    [prefs setObject:cell.textLabel.text forKey:@"countrySaved"];

    if (cell.accessoryType == UITableViewCellAccessoryNone)
    {
        cell.accessoryType = UITableViewCellAccessoryCheckmark;

        UIImage *image = [UIImage imageNamed:@"icon-tick.png"];

        UIButton *checkmarkBtn = [UIButton buttonWithType:UIButtonTypeCustom];

        [checkmarkBtn setImage:image forState:UIControlStateNormal];
        [checkmarkBtn setFrame:CGRectMake(0, 0, 19, 19)];
        [checkmarkBtn setBackgroundColor:[UIColor clearColor]];
        [self.tableView cellForRowAtIndexPath:indexPath].accessoryView = checkmarkBtn;

    } else
    {
        cell.accessoryType = UITableViewCellAccessoryNone;

       UIButton *checkmarkBtn = [UIButton buttonWithType:UIButtonTypeCustom];
       [checkmarkBtn setTitle:@"" forState:UIControlStateNormal];
       [checkmarkBtn setFrame:CGRectMake(0, 0, 0, 0)];
       [self.tableView cellForRowAtIndexPath:indexPath].accessoryView = checkmarkBtn;

    }

} 
```

我在一些帖子中看到我必须包含以下内容，但我不确定如何在代码中实现它。

```
 cell.accessoryType = UITableViewAccessoryNone;

  if (indexPath.row == index) {
            cell.accessoryType = UITableViewCellAccessoryCheckmark;
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:15:04.987

只需检查此代码：

```
- (void)tableView:(UITableView *)aTableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //Save the row selected to nsuserdefaults

    NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
    [prefs setObject:cell.textLabel.text forKey:@"countrySaved"];
    [prefs setObject:[NSNumber numberWithInt:indexPath.row] forKey:@"selectedRow"];
    [tableView reloadData];
} 
```

在 cellForRowAtIndexPath 中：

```
NSUserDefaults *prefs = [NSUserDefaults standardUserDefaults];
int val = [[prefs objectForKey:@"selectedRow"] intValue];
if (indexPath.row == val)
{
    cell.accessoryType = UITableViewCellAccessoryCheckmark;

    UIImage *image = [UIImage imageNamed:@"icon-tick.png"];

    UIButton *checkmarkBtn = [UIButton buttonWithType:UIButtonTypeCustom];

    [checkmarkBtn setImage:image forState:UIControlStateNormal];
    [checkmarkBtn setFrame:CGRectMake(0, 0, 19, 19)];
    [checkmarkBtn setBackgroundColor:[UIColor clearColor]];
    [self.tableView cellForRowAtIndexPath:indexPath].accessoryView = checkmarkBtn;

} else
{
    cell.accessoryType = UITableViewCellAccessoryNone;

   UIButton *checkmarkBtn = [UIButton buttonWithType:UIButtonTypeCustom];
   [checkmarkBtn setTitle:@"" forState:UIControlStateNormal];
   [checkmarkBtn setFrame:CGRectMake(0, 0, 0, 0)];
   [self.tableView cellForRowAtIndexPath:indexPath].accessoryView = checkmarkBtn;

} 
```

# ruby-on-rails - Rails：在单元/功能测试中在运行时更改从 YAML 加载的配置

> ID：14563749
> 
> 赞同：2
> 
> 时间：2013-01-28T14:03:53.820
> 
> 标签：ruby-on-rails, ruby-on-rails-3

假设你有一个类似的 YAML 配置文件：

```
defaults: &defaults
  # registration form
  birth_date: true
  address: true
  zip: true
  city: true
  state: true
  # other stuff
  send_email_notification_to_users: true

production:
  <<: *defaults

development:
  <<: *defaults

test:
  <<: *defaults 
```

它的加载方式与 Railcast #85 中的解释类似： [http ://railscasts.com/episodes/85-yaml-configuration-file](http://railscasts.com/episodes/85-yaml-configuration-file)

假设您需要测试应用程序在不同设置下的执行情况，您会怎么做？

使用 Django，可以在单元测试期间临时更改设置： [https ://docs.djangoproject.com/en/dev/topics/testing/overview/#overriding-settings](https://docs.djangoproject.com/en/dev/topics/testing/overview/#overriding-settings)

是否可以使用 Rails 做类似的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:49:27.687

动态更改配置，可能使用 before 和 after 块：

```
before(:all) do 
  @old_config = APP_CONFIG
  APP_CONFIG = YAML.load_file("#{RAILS_ROOT}/config/config.yml")["production"]
end
after(:all) do
  APP_CONFIG = @old_config
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T14:52:03.233

如果您完全按照 Railscast #85 中的说明实现它，只需像这样分配新值：

```
APP_CONFIG['perform_authentication'] = false
# or
APP_CONFIG['my_fancy_key'] = 'my fancy value' 
```

请记住，在您的测试用例完成后，该值不会自动更改回来，因此它将对所有后续测试用例保持有效。

# android - 将数组webmethod检索到listview Android

> ID：14563756
> 
> 赞同：1
> 
> 时间：2013-01-28T14:04:27.293
> 
> 标签：android, arrays, web-services, android-listview

有谁知道如何从 webmethod 数组中检索以显示在 listview 上？这是我的网络方法：

```
[WebMethod]
public info[] retrieveInfo (String code){
SQLCon.. 
.
.
info [] a = new info [count];
cmd.. 
.
.

while(reader.Read()){
    a[i].id = (int)reader["ID"];
    a[i].description = (string)reader["Description"];
    a[i].date = (string)reader["Date"];
    a[i].url = (string)reader["URL"];
    a[i].name = (string)reader["Name"];
    i++
}
reader.Close();
conn.Close();

Array.Reverse(a);
return a; 
```

直到这里，我才设法弄清楚。在那之后我完全迷失了，此外我想把所有的回报都放到listview2中。

```
//SOAP
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    request.addProperty("code", code);
    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.dotNet = true; // Set this variable to true for
                            // compatibility with what seems to be the default encoding for.Net-Services.

    envelope.setOutputSoapObject(request);

    System.out.println(request);

    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try {
           androidHttpTransport.call(SOAP_ACTION, envelope);
           SoapPrimitive response = (SoapPrimitive)envelope.getResponse();
           Log.i("myApp", response.toString());
           System.out.println("response " +response);

    }catch(SocketException ex)
    {
       Log.e("Error : " , "Error on soapPrimitiveData() " + ex.getMessage());
       ex.printStackTrace();
    }
    catch (Exception e) {
       Log.e("Error : " , "Error on soapPrimitiveData() " + e.getMessage());
           e.printStackTrace();

        }
    } 
} 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-02T07:59:41.770

我就是这样解决的...

我的 XML 代码是，

`<ListView xmlns:android="http://schemas.android.com/apk/res/android" xmlns:tools="http://schemas.android.com/tools"
android:id="@android:id/list"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" />`

该类应该扩展`ListActivity`而不是简单的 Activity。

try 块中的代码是，

```
 SoapObject request = new SoapObject(NAMESPACE,METHOD_NAME);    
        SoapSerializationEnvelope soapEnvelop = new     
        SoapSerializationEnvelope(SoapEnvelope.VER11);
        soapEnvelop.dotNet=true;
        soapEnvelop.setOutputSoapObject(request);
        HttpTransportSE aht = new HttpTransportSE(URL);
        request.addProperty("authenid",authenid);
            aht.call(SOAP_ACTION, soapEnvelop);     

        SoapObject result;
        result=(SoapObject)soapEnvelop.getResponse();
        int cnt = result.getPropertyCount();
        String[] ary = new String[cnt];

        for(Integer i1=0;i1<cnt;i1++)
        {
            ary[i1]=result.getProperty(i1).toString();

              for(Integer i2=0;i2<=i1;i2++)
                  {
                  ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,
                        android.R.layout.simple_list_item_1, ary);
                    setListAdapter(adapter);
                  } 
        } 
```

希望这可以帮助...

# javascript - 将 html 内容包装在 div 中

> ID：14563759
> 
> 赞同：-1
> 
> 时间：2013-01-28T14:04:45.903
> 
> 标签：javascript, jquery, html, css

我有一个似乎很简单的问题，但有些我无法找到最好的方法。

下面是我的html结构：

```
 <div id="PasswordStrengthBorder" style="position: absolute; display: inline;
  height:3px; top: 379px; left: 556px; border-style: solid; border-width: 1px; 
  padding: 2px; width: 200px;"> </div>

  <div class="BarIndicator" id="PasswordStrengthBar" style="position: absolute;
  display: inline; height: 5px; top: 381px; left: 559px; width: 100px; 
  background-color: blue;">
  </div>

  <span style="position: absolute; top: 389px; left: 556px; font-size: 75%; 
  display: inline-block; width: 200px;">3 more characters, At least 1 more symbol,
  1 Upper case characters, 1 lower case character</span> 
```

所有这些都是动态 html，并通过插件添加到 html 页面中。我需要将所有这三个元素包装在一个 div 中。正确的做法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:28:58.307

您可以使用以下代码：

```
$('.yourClass').wrapAll('<div id="wrapper">'); 
```

[http://api.jquery.com/wrapAll/](http://api.jquery.com/wrapAll/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T14:10:51.993

```
<div id="parent">

</div> 
```

然后当您动态创建新的时只需调用

```
$('#parent').html().append(dynamicallyGeneratedHtml); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:20:43.663

如果 3 个 div 的内容是动态的（但不是结构的），您可以设置一个模板并将数据与 json 连接起来

```
$.post('web/serverside', function(data){

            $.each(data, function(i,obj)
            {                           

                $(#mydiv).html('<div id="PasswordStrengthBorder" style="position: absolute; display: inline;'+
                'height:3px; top: 379px; left: 556px; border-style: solid; border-width: 1px;'+
                'padding: 2px; width: 200px;">'+obj['value1'])+'</div>'+
                '<div class="BarIndicator" id="PasswordStrengthBar" style="position: absolute;'+
                'display: inline; height: 5px; top: 381px; left: 559px; width: 100px;'+ 
                'background-color: blue;">'+obj['value2'])+'</div>'+
                '<span style="position: absolute; top: 389px; left: 556px; font-size: 75%;'+ 
                'display: inline-block; width: 200px;">'+obj['value3'])+'</span>');                                 
            }); 

}, 'json'); 
```

# filesystems - Zip 的编码方式不同

> ID：14563765
> 
> 赞同：0
> 
> 时间：2013-01-28T14:04:56.427
> 
> 标签：filesystems, zip

为标题道歉；我在 Mac 上，正在尝试对 zip 文件进行编码，以便文件系统类似于 Windows 机器。这可能吗？如果是这样，怎么做？

例如：

我目前在 Windows 和 Mac 上使用 7z 将相同的文件压缩到同一个存档中。然后，例如，我使用 WinMerge 来比较 zip，很明显它们都是不同的，但它们是用相同的（移植的）程序编码的，但在不同的系统上。

这是一个屏幕截图：[两个拉链的 WinMerge http://f.cl.ly/items/2B2t2E2X1f2L3q082m3B/Untitled.png](http://f.cl.ly/items/2B2t2E2X1f2L3q082m3B/Untitled.png)

这里有两个 zip，一个在 Windows 上编码：[http](http://cl.ly/1O06420e0H1M) ://cl.ly/1O06420e0H1M这是 OSX 的一个：[http ://cl.ly/2H0X2P2i0f3P](http://cl.ly/2H0X2P2i0f3P)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:07:04.693

zip 文件中没有文件系统（或者换句话说，zip 文件有自己的、可移植的 zip 文件系统）。

如果您使用非 ASCII 文件名，可能会出现字符编码问题，但这是另一回事。

# css - 将css应用于表格中的字体

> ID：14563766
> 
> 赞同：-3
> 
> 时间：2013-01-28T14:04:56.847
> 
> 标签：css

我想知道我哪里出错了，我想将字体 verdana 应用于**“将此字体更改为 verdana”。**

我已经从其他表行中删除了竞争，以使代码看起来更清晰。我已将 css 样式设置为此部分，但上传字体时根本没有改变。

代码是：

```
<style type="text/css">
#form1 tbody tr td {
    font-family: Verdana, Geneva, sans-serif;
}
</style>

<table width="500" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff">
<tr>
<form action="upload_ac.php" method="post" enctype="multipart/form-data" name="form1" id="form1">

<tr>
<td><strong>Title 1</strong></td>

</tr>

<tr>
<td>To Change this font to verdana.<br>
  <br></td>
</tr>

<tr>
<td>&nbsp;</td>
</tr>

<tr>
<td></td>
</tr>

<tr>
<td align="center">&nbsp;</td>
</tr>
</form>

<tr>
<td>
<!-- start here-->

<form action="http://www./cookie5payment/freecontact2formprocess.php" method="post"> 
<table class="freecontact2form" border="0" width="400px">
<tbody>
<tr>
<td colspan="2"><span style="font-size: x-small;"> </span> <br /> <br /></td>
</tr>

<tr>

  <td>&nbsp;</td>

</tr>

<tr>

<td><br></td>
<td></td>

</tr>

<tr>
<br>

<td valign="top">&nbsp;</td>
</tr>

<tr>
<td style="text-align:center" colspan="2"><br /><br />
  <br /><br /> 

 <br /><br /></td>
</tr>
</tbody>
</table>
</form>

<!-- end here -->

</td>
</tr>

</table>

</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:12:27.793

您的代码没有按预期工作，因为您使用标识符`#form1`来定位该表单内的表，**但是**您在表单**外**启动表，因此 css 选择器无法找到它。改变你的html的顺序如下（即切换`form`and`table`标签）

```
<form action="upload_ac.php" method="post" enctype="multipart/form-data" name="form1 id="form1">
    <table width="500" border="0" align="center" cellpadding="0" cellspacing="0" bgcolor="#ffffff"> 
```

这是一个[小提琴](http://jsfiddle.net/md2KJ/1/)来说明这一点

# root - Wampserver root 权限错误

> ID：14563771
> 
> 赞同：0
> 
> 时间：2013-01-28T14:05:15.140
> 
> 标签：root, wampserver, privileges

意外我删除了 msql/wampsever 中的所有 root 用户，然后我无法访问 phpmyadmin ！

我试图启动 mysql 控制台并连接到 root .. 它有效，所以我不知道我应该做什么！

phpMyadmin : "您无权访问此服务器上的 /phpmyadmin/。"

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:19:31.210

可能重复：[WAMP 错误：禁止您无权访问此服务器上的 /phpmyadmin/](https://stackoverflow.com/questions/8366976/wamp-error-forbidden-you-dont-have-permission-to-access-phpmyadmin-on-this-s)

你能告诉我们你的 /alias/phpmyadmin.conf 文件吗？它应该具有以下内容：

```
<Directory "c:/wamp/apps/phpmyadmin3.4.5/">
  Options Indexes FollowSymLinks MultiViews
  AllowOverride all
  Order Deny,Allow
  Deny from all
  Allow from 127.0.0.1
</Directory> 
```

看到[这个帖子](http://forum.wampserver.com/read.php?2,80911)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-05T14:03:26.127

您可以通过以下两个步骤恢复您的 wamp：

**第一步：给mysql设置权限**

**一世。**打开命令提示符并导航到 mysql bin 文件夹，该文件夹通常存在于

"C:\wamp\bin\mysql\mysql5.1.36\bin"

执行以下 mysql 命令集并进行适当更改以设置新密码

```
MYSQL -U root -P
UPDATE mysql.user SET Password=PASSWORD('YourNewPassword') WHERE User='root'; 
```

**第二步：将上面设置的权限配置到phpadmin/wamp**

**一世。**在 wamp 文件夹中找到“config.inc”文件，通常它存在于

“C:\wamp\apps\phpmyadmin3.2.0.1”

**ii.** 使用记事本等标准文本编辑器打开它。

![的屏幕截图](../Images/5b569ad3510071ace563468d279aae3c.png)

**iii.** 将用户/密码的值编辑为您在上一步中设置的值。

**iv.** 保存 config.inc 文件，不要忘记通过右键单击 wamp 重新启动所有服务

# function - lua 函数引用可以用作表键吗？

> ID：14563773
> 
> 赞同：5
> 
> 时间：2013-01-28T14:05:23.947
> 
> 标签：function, reference, lua, key, lua-table

这里是 Lua 新手。我可以将函数引用作为键存储在 Lua 表中吗？与此类似的东西：

```
local fn = function() print('hello') end
local my_table = {}
my_table[fn] = 123 
```

这似乎工作正常，但我不知道我是否可以依赖函数引用的唯一性。一旦超出范围，Lua 可以重用函数引用吗？这会产生任何问题还是由于某种原因被认为是一种不好的做法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T14:22:06.153

是的。我在 lua 中遇到的最好的事情之一就是**任何作为引用**的属性。

`key`您在表格中使用 s 的方式没有任何问题。

### 来自[Lua PiL](http://www.lua.org/pil/2.5.html)

> Lua 中的表既不是值也不是变量。它们是对象。您可以将表视为动态分配的对象；您的程序仅操作对它们的引用（或指针）。在幕后没有隐藏的副本或新表的创建。

在您的示例中，您没有将任何参数传递给函数，所以基本上，在您的情况下，将函数作为程序中的引用是没有用的。另一方面，是这样的：

```
fn1 = function(x) print(x) end
fn2 = function(x) print("bar") end
t[fn1] = "foo"
t[fn2] = "foo"
for i, v in pairs(t) do i(v) end 
```

确实有它的用途。

> > 一旦超出范围，Lua 可以重用函数引用吗？

只要您的父表在范围内，就可以。由于表是创建和操作的，但不是复制的，因此不可能从表索引内存中弃用您的函数引用。***我也会在实际尝试后编辑这个答案。***

> > 这会产生任何问题还是由于某种原因被认为是一种不好的做法？

这只是一种不好的做法，因为熟悉其他语言的用户，如`C`等`python`。在阅读表格时往往会考虑数组。在[lua](/questions/tagged/lua "显示标记为“lua”的问题")中你没有这样的担心，程序会完美运行。

> > 我不知道我是否可以依赖函数引用的唯一性。

为什么？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T00:32:59.027

函数引用的唯一性取决于 Lua 版本。

Lua 5.2手册说：
`a function definition may not create a new value; it may reuse some previous value if there is no observable difference to the new function`

例子：

```
-- 10 different function references on Lua 5.1
-- The same function reference for Lua 5.2
local j
for i = 1, 10 do
   print(function() print(j) end)
end

-- 10 different function references for any Lua version
for i = 1, 10 do
   print(function() print(i) end)
end 
```

所以，规则是：创建不同的闭包来获得不同的引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T14:23:43.523

您可以这样做，`function`将保留在内存的同一位置，直到它被销毁（由垃圾收集器）。

您可以尝试交互式`lua`：

```
> fn = function() print('hello') end
> print(fn)
function: 0x9d058d0

> fn2 = function() print('hello') end
> print(fn2)
function: 0x9d05ee8

> fn2=fn
> print(fn2)
function: 0x9d058d0

> print(function() print('hello') end)
function: 0x9d068a8

> print(function() print('hello') end)
function: 0x9d06bf8 
```

请记住，如果超出范围，它将被垃圾收集`fn`。`local`在你的情况下，它不应该`my_table`是`local`同一个块中的问题。请参阅[有关局部变量的 Lua 文档](http://www.lua.org/pil/4.2.html)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T17:53:15.250

> 这似乎工作正常，但我不知道我是否可以依赖函数引用的唯一性。

每个`function() end`语句都会创建一个新的闭包。如果函数的实际*代码*来自同一个构造函数，它将被重用：

```
for i=1,100 do
    t[function() print(i) end] = i -- this function body will be reused
end 
```

但是每个*闭包*都是独一无二的，这对您的参考很重要。

> 一旦超出范围，Lua 可以重用函数引用吗？

Lua 是不会收集`fn`的，只要它被用作`my_table`. 如果`my_table`超出范围，使得表和函数都被收集，那么 Lua 重用引用不会影响你。所以无论哪种方式，你都很好。

# xcode - 将另一个 xcode 项目包含到我自己的项目中

> ID：14563786
> 
> 赞同：-1
> 
> 时间：2013-01-28T14:06:02.383
> 
> 标签：xcode

如何将项目（独立）包含到我的项目中并从我自己的应用程序中启动它？需要哪些步骤才能使我当前的项目识别来自其​​他项目的所有源代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:18:36.030

如果您打算运行未经其他应用程序修改的应用程序，则不能这样做。iOS 期望您拥有一个可执行的应用程序，其中包含一个入口点和一个应用程序委托。

如果您想在项目中包含源代码形式的库，您可以在项目打开时简单地将文件拖到 Xcode 中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:18:45.897

如果您将 Xcode 项目文件拖到项目导航器侧边栏中，它将被添加到项目设置中。

您需要配置导入路径和其他内容才能访问代码。

如果您尝试使用 3rd 方库，我强烈建议您查看[CocoaPods](http://cocoapods.org)。使用所有构建设置为您设置和管理依赖项非常容易。

# java - 如何停止套接字不断在循环java中写入数据

> ID：14563788
> 
> 赞同：0
> 
> 时间：2013-01-28T14:06:07.867
> 
> 标签：java, file, sockets

我已经制作了服务器客户端应用程序，服务器将向客户端发送文件，客户端将接收它并将其保存在 C:/ 中的任何位置。我首先发送一个字符串“文件”以告诉客户端接收文件，然后服务器将文件名和大小发送给客户端，然后开始发送它。问题是客户端没有接收文件，尽管它在循环中读取并获取所有字节但没有写入所需的文件对象。请查看我显示的客户代码

以下是服务器代码：

```
public void run(){
    try{
        System.out.println("Starting writing file");
        objOut.writeObject("File");
        objOut.flush();

        File f= new File(filePath);
        String name= f.getName();
        int length =(int) f.length();
        objOut.writeObject(name);
        objOut.flush();

        objOut.writeObject(length);
        objOut.flush();

        byte[] filebytes = new byte[(int)f.length()];
        FileInputStream fin= new FileInputStream(f);
        BufferedInputStream bin = new BufferedInputStream(fin);

        bin.read(filebytes, 0, filebytes.length);
        BufferedOutputStream bout = new BufferedOutputStream(objOut);
        bout = new BufferedOutputStream(objOut);
        bout.write(filebytes, 0, filebytes.length);
        bout.flush();      
        System.out.println("File completelty sent");

    }
    catch(Exception ex)
    {
        System.out.println("error on writing file : "+ex.getMessage());
    }

} 
```

以下是客户端代码：

```
 while(true){
            fobjIn = new ObjectInputStream(fileSock.getInputStream());
            String str = (String) fobjIn.readObject();
            if(str.equals("File"))
            {
                System.out.println("Starting receiving file");
                ReceiveFile();
            }
            System.out.println(str);
        }

 public void ReceiveFile() throws Exception{

     String name =(String)fobjIn.readObject();
   File f = new File("C:/Temp/" +name);
   f.createNewFile();
   int length = (int) fobjIn.readObject();
   FileOutputStream fout = new FileOutputStream(f);
   BufferedOutputStream buffout = new BufferedOutputStream(fout);
   byte[] filebyte = new byte[length];
   int bytesRead=0,current=0;
   bytesRead = fobjIn.read(filebyte, 0, filebyte.length);
    do {
        bytesRead = fobjIn.read(filebyte, current, (filebyte.length-current));
        if(bytesRead > 0) {
            current += bytesRead;
            System.out.println("writting" + bytesRead);
        }
        else break;
     } while(bytesRead > -1); 
```

^^^^^^^ 乞求**时它不会从循环中出来**^^^^^^^^

```
 buffout.write(filebyte, 0 , current);
    buffout.flush();
    System.out.println("written");

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:10:41.417

完成发送后，您可能应该在服务器端关闭您的流，以便可以通知客户端服务器已完成发送。否则它只会坐在那里等待更多数据。

# node.js - 非常慢（~1000ms）的响应时间。赫罗库。节点.js。蒙古实验室。几乎什么都不做

> ID：14563789
> 
> 赞同：3
> 
> 时间：2013-01-28T14:06:09.027
> 
> 标签：node.js, heroku, mlab

使用 Heroku 上的免费帐户和 MongoLab 上的免费帐户（不使用 Heroku 插件），每个请求的响应时间约为 1000 毫秒（单个用户，仍然是我，与所有请求相关，不仅是之后的第一个很长的空闲时间）。我已经从我自己的计算机 + 相同的免费 MongoLab 帐户上进行了检查，每个相同类型的请求我得到约 168 毫秒。虽然它仍然很高，但我想问一下 Heroku。即使使用免费帐户，响应时间如此之短是否合理。当我付款时，响应时间会显着改善吗？

Mongoose，MongoDB（node.js）本机驱动程序。

你知道我要检查什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-30T18:55:13.587

MongoLab 帮助我意识到我的数据库是在欧洲定义的，而服务器 (Heroku) 在美国。他们还告诉我如何将现有数据库克隆到 us-east-1 中的新数据库（从他们的 Web 控制台）。

# ruby - DES3和符号之间的区别

> ID：14563791
> 
> 赞同：0
> 
> 时间：2013-01-28T14:06:24.787
> 
> 标签：ruby, encryption, cryptography

我想从其他应用程序中解密一些 DES3 加密消息。问题是，ruby 使用反斜杠表示法，如下所示：

> \xE7B8\xCF\xFC\x9Fu\fkZ\xB3\u001As\x93\xFF

我收到类似的东西：

```
6613E58F24183FC60B2BB1A2EE9DA61A 
```

我现在如何在 ruby​​ 中使用加密，但是当我得到上述符号时，我不知道如何处理。我需要以某种方式转换它吗？任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:24:58.640

[`String#unpack`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-unpack)应该做的工作：

```
> str = "\xE7B8\xCF\xFC\x9Fu\fkΖ\xB3\u001As\x93\xFF" # Use double-quotes
=> "\xE7B8\xCF\xFC\x9Fu\fkΖ\xB3\u001As\x93\xFF"
> str.unpack('H*')
=> ["e74238cffc9f750c6bce96b31a7393ff"] 
```

反向解决方法是：

```
> str = ["6613E58F24183FC60B2BB1A2EE9DA61A"]
> str.pack 'H*'
=> "f\x13\xE5\x8F$\x18?\xC6\v+\xB1\xA2\xEE\x9D\xA6\x1A" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:13:42.907

第一个符号是原始二进制数据的字符串表示。第二个 - 是十六进制编码的数据，即每个字节表示为两个十六进制字符。

# vb.net - 如何修复允许进入输入框的输入？

> ID：14563798
> 
> 赞同：0
> 
> 时间：2013-01-28T14:06:39.523
> 
> 标签：vb.net, string, visual-studio-2010, input

如何修复允许进入输入框的输入？

基本上我希望用户只被允许输入数字值（没有空格或符号）我也希望输入框出现在这个结构中

02:10:20

而且我不希望用户能够删除冒号。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:13:25.887

我不认为你可以不创建自定义输入框。但是，您可以退出，只需创建一个控件来检查输入，如果格式错误，则提示另一个输入框。

另一种选择是创建一个自定义输入框，您可以在其中使用蒙版文本框...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:11:10.620

它是一个网络应用程序吗？

如果是，请尝试使用此 jquery 插件： [http ://digitalbush.com/projects/masked-input-plugin/](http://digitalbush.com/projects/masked-input-plugin/)

```
jQuery(function($){
   $("#your-id/class").mask("99:99:99");
}); 
```

# java - jtable cellrenderer 在运行时更改单元格的背景颜色

> ID：14563799
> 
> 赞同：4
> 
> 时间：2013-01-28T14:06:47.203
> 
> 标签：java, swing, jtable, background-color, tablecellrenderer

我正在尝试创建一个表格并将特定单元格着色为黄色、红色或白色，具体取决于其他列的内容。为此，我正在遍历填充值的行，然后检查内容。这对于当前显示在屏幕上的每一行都可以正常工作，但是当程序到达未显示的行或用户尝试滚动每个单元格时，会将其背景颜色更改回白色。我在网上搜索了解决方案，唯一听起来合理的想法是在每个循环之后重置 cellRenderer，这不起作用，因为它也会重置每个单元格。

我希望有人知道这个问题的解决方案，或者可以给我一个想法，我在哪里迷失了一些东西。

我正在使用这个循环

```
for(int e = 0; e < modules.size(); e++)
    {
    gui.clearOutputStream();
    gui.getOutputStream().setText("Load Modul " + modules.get(e) + "\r\n");
    version = getVersion(modules.get(e));

    //Update current Row
    updateRow(gui.getReleaseTabelle(), e);
    } 
```

调用此方法

```
public void updateRow(JTable target, int row){
//...
//insert Values here
//...
CustomRenderer cr = new CustomRenderer();
        cr.tab = target;
        if(!target.getValueAt(row, 2).equals(target.getValueAt(row, 3)))
        {
            cr.Val1 = target.getValueAt(row, 1).toString();
            target.setValueAt("X", row, 1);
        }
        else if(!target.getValueAt(row, 7).equals(""))
        {
            cr.Val1 = target.getValueAt(row, 1).toString();
            target.setValueAt("Y", row, 1);
        }
        else
        {

        }
        target.getColumnModel().getColumn(1).setCellRenderer(cr);

} 
```

这是我的 CustomRenderer

```
class CustomRenderer extends DefaultTableCellRenderer 
    {
private static final long serialVersionUID = 6703872492730589499L;
        public String Val1; 
        public JTable tab;

        public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)
        {
            Component cell = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);

            if(tab.getValueAt(row, 1).equals("Y")){
                cell.setBackground(new java.awt.Color(255, 255, 0));
                tab.setValueAt(Val1, row, 1);
            }
            else if(tab.getValueAt(row, 1).equals("X")){
                cell.setBackground(new java.awt.Color(255, 50, 50));
                tab.setValueAt(Val1, row, 1);
            }
            else
            {
                //do nothing
            }
            return cell;
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T15:42:43.303

`Do not update table data in your CutomRenderer class.`您`Renderer`的班级应该检查条件并为单元格着色。我已经使用了您的`CustomRenderer`课程并根据单元格中存在的数据渲染了单元格。如果单元格的数据为“Y”，则将其着色为黄色。如果数据为“N”，则将其着色为灰色。

![在 JTable 中渲染](../Images/bc0e08902606eb8a6a36357bfb3da196.png)

```
import java.awt.Color;
import java.awt.Component;
import java.awt.EventQueue;

import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableCellRenderer;

public class ColoringCells {

    private static Object[] columnName = {"Yes", "No"};
    private static Object[][] data = {
            {"Y", "N"},
            {"N", "Y"},
            {"Y", "N"}
    };

    public static void main(String[] args) {
        Runnable r = new Runnable() {

            @Override
            public void run() {

                JFrame frame = new JFrame();
                JTable table = new JTable(data, columnName);
                table.getColumnModel().getColumn(0).setCellRenderer(new CustomRenderer());
                table.getColumnModel().getColumn(1).setCellRenderer(new CustomRenderer());

                frame.add(new JScrollPane(table));
                frame.setTitle("Rendering in JTable");
                frame.pack();
                frame.setVisible(true);
            }
        };

        EventQueue.invokeLater(r);
    }
}

class CustomRenderer extends DefaultTableCellRenderer 
{
private static final long serialVersionUID = 6703872492730589499L;

    public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column)
    {
        Component cellComponent = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);

        if(table.getValueAt(row, column).equals("Y")){
            cellComponent.setBackground(Color.YELLOW);
        } else if(table.getValueAt(row, column).equals("N")){
            cellComponent.setBackground(Color.GRAY);
        }
        return cellComponent;
    }
} 
```

# mysql - DataMapper ORM 关系

> ID：14563800
> 
> 赞同：0
> 
> 时间：2013-01-28T14:06:48.570
> 
> 标签：mysql, database-design, orm, datamapper, codeigniter-datamapper

```
table1(users)
|ID|name  |type  |
|1 |demo  |admin |
|2 |demoX |client|

table2(visits)
|ID|admin_id|visitor_id|visit_date|...
|1 |1       |2         |2013-01-01|...
admin(fk)->users(id)
user(fk)->users(id) 
```

简单的调度程序项目，它包含 2 个表。

第一个（用户）包含所有用户，第二个表包含所有预订（访问）。

获取我运行的管理员的所有预订 `Select * from visits where admin_id=$id;`，并从用户表中加入访客信息。

........所以基本上，

每个管理员可以有很多**次访问**

**访问**必须包含 (ONE)admin 和 (ONE)visitor。

我如何在 datamapper orm 中设置这种关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T11:04:34.897

首先，我认为，与其有一个带有`admin_id`and的表`user_id`（没有帮助），你应该有一个带有`users`and的单独表`privileges`，然后表结构就是。

```
 Users                                   privileges
| id |  user  | privilege_id |             | id | privilege |
| 1  | user1  |    1         |             | 1  |   user    |
| 2  | admin1 |    2         |             | 2  |   admin   | 
```

然后，当您在应用程序中调用用户级别时：

`SELECT privilege FROM privileges WHERE id = <privilege_id from users table which should already be set within your code>`(MySQL)

为此，您应该`ALWAYS`尝试在您的表中设置's，这将是您从另一个表中收集数据时关系数据的基础，因此在此示例中它将是`id``the <id> field of the privileges table and the <privilege_id> of the users table.`

从这里你应该能够将此方法转移到[Datamapper](http://datamapper.org/getting-started.html)或[codeigniter](http://ellislab.com/codeigniter)或任何你的误导性标签的意思 =]

* * *

如果您需要`SELECT`从数据库中进行预订，请选择`booking`（制作一个额外的表格并附加如下）并查找预订的时间，`((privilage_id == 1) && (privilage_id == 2))`这将查找同时存在管理员和用户的日期，而不仅仅是查看一种用户类型，您正在查看所有用户类型，并且通过调用一列而不是多列来为自己节省一些麻烦。也通过这种方式，您可以轻松管理您的表格，因为它们的名称与功能相关。

```
 Users                        privileges           booking
| id |  user  | privilege_id |  | id | privilege |     | id | date |   privilege_id | 
| 1  | user1  |    1         |  | 1  |   user    |     | 1  |5/2/13|      1         |  
| 2  | admin1 |    2         |  | 2  |   admin   |     | 2  |5/2/13|      2         | 
```

所以 MySQL 会`SELECT date FROM booking WHERE ((privilege_id == 1) && (privilege_id == 2))`这样会给你你期望的结果，如果你需要清理你的数据以进入表，那么你需要在一个数据库中创建两行，这将通过这样的过程完成（这个示例将使用一个虚构的填写预订表格（并在 PHP 中完成））：

```
if((isset($user) && (isset($usertype)) && (isset($usertypetwo)) && (isset($date)))
{
    if(($usertype != $usertypetwo))
     {
      "Insert BLAH BLAH"
     }
} 
```

* * *

还记得使用此方法，您需要从用户表中获取用户类型以获取`privilege_id`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-07T20:48:46.343

这应该这样做：

```
class Users extends Datamapper
{
    public $has_many = array(
        'admin' => array(
            'class' => 'users',
            'other_field' => 'admin', // FK = admin_id
        ),
        'visitor' => array(
            'class' => 'users',
            'other_field' => 'visitor', // FK = visitor_id
        ),
    );
}

class Visits extends Datamapper
{
    public $has_one = array(
        'admin' => array(
            'class' => 'users',
            'join_self_as' => 'admin', // FK = admin_id
        ),
        'visitor' => array(
            'class' => 'users',
            'join_self_as' => 'visitor', // FK = visitor_id
        ),
    );
}

// then in your controller you can do:

$visit = new Visitor(1);
echo $visit->admin->name; // echo's 'demo';
echo $visit->visitor->name; // echo's 'demoX'; 
```

# python - 带有 OpenERP 6.1 模块的 OpenERP 7

> ID：14563801
> 
> 赞同：2
> 
> 时间：2013-01-28T14:06:49.577
> 
> 标签：python, openerp, erp

我为**OpenERP 6.1**版本实现了几个 OpenERP 模块。当我安装**OpenERP 7.0**时，我将这些模块复制到 OpenERP 7 的插件文件夹中。之后，我尝试通过 Web 界面更新模块列表，但没有任何改变。*另外，我使用选项--database=mydb --update=all*再次启动服务器，但模块列表没有改变。我错过了什么？在 OpenERP 版本 7 中是否可以使用 6.1 版本的模块？

谢谢你的建议。

更新：

我已经在 *.sql 文件中从 6.1 版导出了我的数据库。如果我只是将这些数据导入使用 OpenERP 7 创建的新数据库，OpenERP 7 会工作吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T14:56:04.920

Openerp 6.1 模块不能直接在 openerp 7 中使用。您必须在 openerp 6.1 模块中进行一些基本更改。像树一样，表单标签强制字符串和版本=“7”包含在表单中。如果您继承了一些基本模块，如销售、购买，那么您必须在继承 xpath 等方面进行更改。删除了一些对象 res.parter.address，然后您已经处理好这个并替换为 res.partner。

谢谢

# jquery - onkeyup 不工作

> ID：14563804
> 
> 赞同：3
> 
> 时间：2013-01-28T14:06:50.763
> 
> 标签：jquery

我的预期输出是

当我在输入文本字段上键入时，我会在第三个文本字段上得到即时总和

如果我在第一个文本字段上键入 3 并且键向上，则 3+0=3 必须立即显示在第三个字段上

但没有显示任何结果

```
 $(document).ready(function(){
        var a=0, b=0,c=0;

        $("input:#a").keyup(function(){
            a=$("input:#a").val();
            c=a+b;
            $("input:#c").append(a+"+"+"b"+"="+c);
         });

        $("input:#a").keyup(function(){
            b=$("input:#b").val();
            c=a+b;
            $("input:#c").append(a+"+"+b+"="+c);
        });

     });

        <tr><td><input type="text" id="a"></td></tr>
        <tr><td><input type="text" id="b"></td></tr>
        <tr><td><input type="text" id="c"></td></tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:17:36.863

您需要以下内容：

```
<table>
  <tbody>
    <tr><td>A<input type="text" id="a" /></td></tr>
    <tr><td>B<input type="text" id="b" /></td></tr>
    <tr><td>C<input type="text" id="c" /></td></tr>
  </tbody>
</table>

<!-- If you need this: -->
<script src="http://code.jquery.com/jquery-1.9.0.min.js"></script>

$(document).ready(function(){
    var a=0, 
        b=0;

    $('input#a').bind('keyup', function(e){
        a = parseInt($(this).val()) || 0;
        var c = (a + b);

        $('input#c').val(a + '+' + b + '=' + c);
    });  

    $('input#b').bind('keyup', function(e){
        b = parseInt($(this).val()) || 0;
        var c = (a + b);

        $('input#c').val(a + '+' + b + '=' + c);
    });

}); 
```

此代码执行计算并将结果放入框 C，并使用计算结果自动更新 C。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:09:12.593

你正在连接字符串。您需要实际添加数字（而不是使用`.append`）：

```
$("#c").text(parseInt(a) + parseInt(b)); 
```

此外，您应该写为`).on('keyup', function () {`而不是`).onkeyup`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:09:42.260

正确的术语`.keyup()`是`.onkeyup`.

[http://api.jquery.com/keyup/](http://api.jquery.com/keyup/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T14:16:01.480

试试这个

```
$(document).ready(function () {
    var a = 0,
        b = 0;
    $("input#a").on('keyup', function () {
        a = parseInt($("input#a").val());
        $("input#c").val(parseInt(a + b););
    });

    $("input#a").on('keyup', function () {
        b = parseInt($("input#b").val());
        $("input#c").val(parseInt(a + b););
    }); 
```

# vb.net - DataGridView 多行选择问题

> ID：14563807
> 
> 赞同：6
> 
> 时间：2013-01-28T14:06:54.840
> 
> 标签：vb.net, datagridview

我正在尝试使用 For... Next 循环检查 DataGridView 中的多个选择，但即使我选择了多行，唯一具有属性 Selected=True 的行是选择中的第一行。有没有解决的办法？

MultiSelect 在 DataGridView 上为 true。

我的代码如下：

```
For Each dr As DataGridViewRow In dgv.Rows
    If dr.Selected = True Then
        intSelectedRow = dr.Index
        SetTime("KeyEntry", dgv.Name, intSelectedRow)
    End If
Next 
```

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T14:10:47.047

试试这个：

```
Dim selectedItems As DataGridViewSelectedRowCollection = dgv.SelectedRows
      For Each selectedItem As DataGridViewRow In selectedItems
            'Add code to handle whatever you want for each row
      Next
End Sub 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-10-06T08:06:18.937

```
 Dim Message As String = String.Empty
    Dim FNL As FinalRpt = New FinalRpt()

    For Each ItemRow As DataGridViewRow In DGVItems.Rows

        Dim ISSelected As Boolean = Convert.ToBoolean(ItemRow.Cells("MyChkBox").Value)

        If ISSelected Then

            Message &= Environment.NewLine

            Message &= ItemRow.Cells("I_ID").Value.ToString()

            Dim SelectedRow As Integer = DGVItems.Rows.GetRowCount(DataGridViewElementStates.Selected)

            Dim RPTItemsDA As OleDbDataAdapter
            Dim RPTItemsDS As DataSet

            Dim I As Integer

            For I = 0 To SelectedRow Step 1

                RPTItemsDA = New OleDbDataAdapter("Select Distinct * From stkrpt Where I_ID = " & DGVItems.SelectedRows(I).Index.ToString() & "", DBConnect)
                RPTItemsDS = New DataSet

                RPTItemsDA.Fill(RPTItemsDS, "stkrpt")

                FNL.DGVReport.DataSource = RPTItemsDS
                FNL.DGVReport.DataMember = "stkrpt"
            Next

            FNL.MdiParent = MDIParent1

            FNL.StartPosition = FormStartPosition.CenterScreen
            FNL.WindowState = FormWindowState.Maximized

            Me.Hide()
            FNL.Show()

            ISSelected = False

        End If
    Next

    MessageBox.Show(Message) 
```

# java - 在 GWT 中访问 Javascript 变量

> ID：14563817
> 
> 赞同：4
> 
> 时间：2013-01-28T14:07:28.167
> 
> 标签：java, html, gwt, fullscreen, jsni

我在 Javascript 中有一个变量，它分别在全屏模式打开和关闭`true`之间切换。`false`现在我想在我的`GWT`代码中访问该变量，并相应地执行一些操作。谁能告诉我该怎么做？我无法从有关`JSNI`...的 Google 文档中理解它

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T14:17:05.897

**在 JavaScript 中**

```
var mybool = true; 
```

**MyClass 类中的[JSNI](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodingBasicsJSNI)方法；**

```
public static native boolean getNativeVariableType(String jsVar)/*-{
        return  eval('$wnd.' + jsVar);
    }-*/; 
```

**最后在 GWT 中使用；**

```
boolean getFormJs = Myclass.getNativeVariableType("mybool"); 
```

正如@dodoot 提出的那样，您可以尝试这样做`return !!$wnd[jsVar]`以获得摆脱`eval`功能的副作用。

正如@manolo 所说，如果您使用的是[gwtQuery](http://code.google.com/p/gwtquery/)，只需编写简单的`$(window).prop("mybool")`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-01T12:57:51.390

出于好奇，对于像这样的简单事情，您可以通过利用 gwt 覆盖类中已经存在的某些 jsni 方法来避免编写 jsni 方法。

因此，在您的情况下，您可以获取 window 对象，并将其转换为元素，使用类中的 getter 读取其属性`Element`：

```
Element $wnd = (Element)Document.get().<Element>cast().getPropertyObject("defaultView");
boolean mybool = $wnd.getPropertyBoolean("mybool"); 
```

将gwtquery库添加到你的项目中，代码就简单多了：

```
boolean mybool = $(window).prop("mybool"); 
```

# php - 用于获取特定组的正则表达式

> ID：14563819
> 
> 赞同：0
> 
> 时间：2013-01-28T14:07:37.637
> 
> 标签：php, regex

我需要一个正则表达式语法来获取以“%”字符分隔的字符串中的特定组。我有这个字符串作为例子：

%大卫戴维森%你好，我也可以存储 1000 个数字%另一个链%你好吗！？%

我想将这样的匹配存储在不同的 PHP 变量中

```
$var1 = david davidson;
$var2 = Hello I can store numbers; 
```

... ETC

但我不知道如何获取特定的字符组（例如获取不以符号或 % 符号开头的第二个匹配项）

我尝试使用此代码`%.*?(%)`，但它只返回第一个和第三个匹配项，但我实际上想选择特定组

我在谷歌和这里搜索了它，但我没有找到一个与我需要的东西有点相符的答案，可能是因为我不知道我需要搜索的关键字才能得到一个好的答案

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:12:01.367

您可以使用

```
preg_match_all('/[^%]+/sim', $subject, $result, PREG_PATTERN_ORDER);
$result = $result[0];
print_r($result); 
```

这会给你：

*   大卫戴维森
*   您好，我也可以存储 1000 个号码
*   另一条链
*   你好吗！？

    [^%]+

这意味着在正则表达式中，除 "%" 之外的每个字符

# c# - 索引 xpath 查询时缺少结果

> ID：14563831
> 
> 赞同：1
> 
> 时间：2013-01-28T14:08:05.400
> 
> 标签：c#, xml, xpath

[xml 文件在这里](http://pastebin.com/zMZw2kwG)。

以下两个循环给出不同的输出，尽管它们本质上做的是相同的事情：

```
XPathNavigator nav = xmlDoc.CreateNavigator();
foreach (object v in (XPathNodeIterator)nav.Evaluate(@"//*[heads!=1]/name"))
{
    Console.Out.WriteLine(v);
}

for (int i = 1; i <= 3; i++)
{   
    Console.Out.Write(i);
    Console.Out.WriteLine(nav.Evaluate(string.Format("string(//*[heads!=1][{0}]/name)", i)));
} 
```

输出：

```
Zaphod
Frankie and Benji
Eddie
1Zaphod
2Frankie and Benji
3 
```

为什么“Eddie”在 for 循环的末尾丢失了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:26:46.203

这两个 XPath 表达式不做“本质上相同的事情”：

根据[XPath 规范](http://www.w3.org/TR/xpath/#path-abbrev)：

> 位置路径(...) 选择作为其父元素的第一个子元素的`//para[1]`所有后代元素。`para``para`

类似地，XPath 表达式`//*[heads!=1][3]/name`（查看应该立即产生*Eddie*的第 3 次迭代）选择所有后代元素的`name`孩子，这些后代元素是“其父项的数量不为 1 的第三个孩子”。

即，`3`指的是*在其父节点内满足指定数量限制的子节点*。

相反，请尝试：`/descendant::*[heads!=1][{0}]/name`

# java - 表单和属性编辑器中的预选选项

> ID：14563832
> 
> 赞同：1
> 
> 时间：2013-01-28T14:08:09.297
> 
> 标签：java, spring-mvc, spring-mvc-initbinders

我在一个 web 应用程序中使用 Spring，使用表单，现在它工作正常，但我想改变一件事，那就是我得到一个错误的时候。我有一个带有两个文本字段和一个选择选项字段的小表单，正是这个选择字段导致了错误。选择选项是从数据库中填充的。

我的代码：edit.jsp

```
<tr>
 <th><label for="parent"></label></th>
 <td><sf:select path="parent">
  <sf:option value="0" label="Parent" />
  <sf:options items="${parentsList}" itemLabel="name" itemValue="ID"  />
  </sf:select></td>
</tr> 
```

控制器.java

```
@RequestMapping(value = "/edit", method = RequestMethod.GET, params = {"id"})
public String edit(Model model, @RequestParam("id") int id) {
    try {
        if (logger.isInfoEnabled()) {
            logger.info("Edit category with id {}", id);
        }

        model.addAttribute("heading", "Edit Category");
        model.addAttribute("parentsList", listOfParents());
        model.addAttribute(categoryService.getCategory(id));

        if (logger.isInfoEnabled()) {
            logger.info("Finished");
        }
    } catch (DataAccessException ex) {
        logger.error(ex.getMessage(), ex);
    }
    return "category/edit";
}

private List<Category> listOfParents() {
    List<Category> listOfParents = new ArrayList<Category>();
    try {

        listOfParents.addAll(categoryService.listCategoryParents());

    } catch (DataAccessException ex) {
        logger.error(ex.getMessage(), ex);
    }
    return listOfParents;
}

@InitBinder
public void initBinder(WebDataBinder binder) {
    binder.registerCustomEditor(Category.class, "parent", new CategoryEditor(CategoryService));
} 
```

我的编辑器.java

```
public class CategoryEditor extends PropertyEditorSupport {
private CategoryService categoryService;
public CategoryEditor(CategoryService categoryService) {
    this.categoryService = categoryService;
}

@Override
public void setAsText(String text) throws IllegalArgumentException {
    if (text.equals("0")) {
        this.setValue(null);
    } else {
        category c = categoryService.getCategory(Integer.parseInt(text));
        this.setValue(sc);
    }
}
} 
```

当我编辑一个已经存在的帖子时，我希望在表单中预先选择父母，这是我无法开始工作的事情。

有谁能帮助我吗？非常感谢您的时间，我希望我能有所作为。谢谢你。

*****编辑***** 我现在已将我的编辑器更改为格式化程序，但没有运气：**

 **```
@Component
public class CategoryFormatter implements Formatter<Category> {

    @Override
    public String print(Category parent, Locale locale) {
        System.out.println("Formatter Print with ID="+parent.getID());
        return Integer.toString(parent.getID());
    }

    @Override
    public Category parse(String id, Locale locale) throws ParseException {
        Category parent = new Category();
        parent.setID(Integer.parseInt(id));
        System.out.println("Formatter Parse with ID="+parent.getID());
        return parent;
    }
} 
```

但是当我编辑对象时，我仍然没有在我的下拉列表中获得现有值。我在编辑对象上的打印输出：

```
Formatter Print with ID=1
Formatter Parse with ID=0
Formatter Print with ID=1
Formatter Print with ID=8 
```

我究竟做错了什么？！？（我想稍后添加一个验证器，这就是从编辑器更改为格式化程序的原因）**

# asp.net - Response.Redirect 到另一个站点的问题

> ID：14563833
> 
> 赞同：1
> 
> 时间：2013-01-28T14:08:25.897
> 
> 标签：asp.net, vb.net, response.redirect

我正在创建一个网关应用程序，它将控制对各种其他应用程序（工具）的访问。

在访问该站点时，会识别用户并显示他们有权访问的工具列表。单击该链接将用户带到该工具。URL 附有一个标记作为查询字符串。令牌已加密。

到达工具站点后，系统会检查是否有带有标记的查询字符串。它检查令牌是否有效（日期是加密的一部分）。如果 OK，则令牌也保存为 cookie，有效期为 8 小时并授予访问权限。

如果用户直接从书签中点击工具站点，系统会再次检查是否有令牌以及它是否有效。如果没有令牌作为查询字符串传递，那么系统将查看它是否仍然具有有效的 cookie。如果没有有效的令牌或 cookie，站点将调用 response.redirect 到网关以及两个查询字符串 t 和 r。t 是工具的数字 ID，r 是工具 URL。

应该发生的是，用户将被重定向到网关，网关将检查用户是否可以访问工具 id t，以及是否已经重定向回 r，并附加了一个新的令牌作为查询字符串。

我的代码有以下......

```
Private GatewayURL As String = "http://GatewayURL/default.aspx?t=2&r="
Private ToolURL As String = "http://ToolURL/default.aspx" 
In my page load I have….
…
If AuthenticationPass = False Then
    'We are not authenticated...
    Response.Redirect(GatewayURL & ToolURL, True)
End If
… 
```

不幸的是，当触发此操作时，我收到以下错误...

```
Invalid path for child request 'http://GatewayURL/default.aspx'. A virtual path is expected. 
```

我已经没有解决这个问题的想法了....任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:10:05.473

您应该[`URL encode`](http://msdn.microsoft.com/en-us/library/system.web.httputility.urlencode.aspx)查询字符串参数：

```
Response.Redirect(GatewayURL & HttpUtility.UrlEncode(ToolURL), True) 
```

以便您重定向到：

```
http://GatewayURL/default.aspx?t=2&r=http%3A%2F%2FToolURL%2Fdefault.aspx 
```

代替：

```
http://GatewayURL/default.aspx?t=2&r=http://ToolURL/default.aspx 
```

第二个是一个非常破碎的网址。

# android - 网页视图缩放控制

> ID：14563837
> 
> 赞同：0
> 
> 时间：2013-01-28T14:08:39.360
> 
> 标签：android, android-webview

```
htmlp = URLEncoder.encode(desc,"utf-8").replaceAll("\\+"," ");
            WebView wv=(WebView)findViewById(R.id.webView1);
            wv.setInitialScale(70);
            wv.getSettings().setJavaScriptEnabled(true);
            wv.getSettings().setPluginsEnabled(true);           
            wv.getSettings().setSupportZoom(true);
            wv.getSettings().setLoadWithOverviewMode(true);
            wv.getSettings().setBuiltInZoomControls(true);
            wv.loadData(htmlp,"text/html", "utf-8"); 
```

在 htmlp 中包含 HTML 内容（标签）。现在我必须启用缩放控制，但是使用上面的代码它不起作用。我必须在 webview 的 xml 部分中启用什么吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:42:36.613

这在我的情况下很好用。试试你的情况..
**在清单文件中..**

```
<uses-permission android:name="android.permission.INTERNET">
</uses-permission> 
```

**webview.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
  xmlns:android="http://schemas.android.com/apk/res/android"
  android:orientation="vertical"
  android:layout_width="fill_parent"
  android:layout_height="fill_parent" 
>
  <WebView
    android:id="@+id/webView"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
  />
</LinearLayout> 
```

活动中..

```
public class Main extends Activity {
  private WebView myWebView;
  private static final FrameLayout.LayoutParams ZOOM_PARAMS = new FrameLayout.LayoutParams(ViewGroup.LayoutParams.FILL_PARENT, ViewGroup.LayoutParams.WRAP_CONTENT,Gravity.BOTTOM);

  @Override
  protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    this.setContentView(R.layout.webview);
    this.myWebView = (WebView) this.findViewById(R.id.webView);

    FrameLayout mContentView = (FrameLayout) getWindow().
    getDecorView().findViewById(android.R.id.content);
    final View zoom = this.myWebView.getZoomControls();
    mContentView.addView(zoom, ZOOM_PARAMS);
    zoom.setVisibility(View.GONE);

    this.myWebView.loadUrl("http://www.facebook.com");
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:12:02.013

```
 wv.getSettings().setBuiltInZoomControls(false); 
```

改为假

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T06:05:24.283

最后我解决了这个问题。问题出在设计部分。只需将布局参数更改为：

```
WebView
         android:layout_width="match_parent"
         android:layout_height="match_parent" 
```

# business-intelligence - 在交叉表中单击书签时如何传递两个值？

> ID：14563838
> 
> 赞同：0
> 
> 时间：2013-01-28T14:08:45.397
> 
> 标签：business-intelligence, cognos, cognos-8, cognos-bi, cognos-tm1

我现在正在使用 cognos 中的交叉表。

第 1 页包含交叉表

第 2 页包含列表

事实 - 收入维度 - 产品线，年份

如果我单击收入（单元格值），它应该转到位于单独页面中的另一个列表中的特定记录。实际上我正在传递数据项值。我必须传递两个对应于单元格值（水平和垂直）的数据项值。但是，该事实无法添加书签。我不知道为什么。你有什么建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T04:14:43.840

使用主从关系怎么样？ [http://publib.boulder.ibm.com/infocenter/c8bi/v8r4m0/index.jsp?topic=/com.ibm.swg.im.cognos.ug_cr_rptstd.8.4.0.doc/ug_cr_rptstd_id12005cr_rptstd_modrep_create_master_deta.html](http://publib.boulder.ibm.com/infocenter/c8bi/v8r4m0/index.jsp?topic=/com.ibm.swg.im.cognos.ug_cr_rptstd.8.4.0.doc/ug_cr_rptstd_id12005cr_rptstd_modrep_create_master_deta.html)

# qt - 如何使用 Null 项更改行颜色？

> ID：14563839
> 
> 赞同：0
> 
> 时间：2013-01-28T14:08:45.773
> 
> 标签：qt

我想在 QTableWidget 中使用 NULL 项更改行的颜色（我没有执行 setData() 或 setItem()）。这个怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:32:09.893

要完全控制这些项目，我只需放入一个项目，然后设置背景颜色：

用 's 填充该行，`QTableWidgetItem`然后您可以更改背景颜色。

```
QTableWidgetItem *newItem = new QTableWidgetItem("");
tableWidget->setItem(row, column, newItem);

QColor color( Qt::red );
tableWidget->item( row, column )->setBackgroundColor( color ); 
```

这是我过去格式化任何单元格的主要方式。

## QStyleSheets

在 QStyleSheets 的文档中，QTableView 和 QTableWidget 共享相同的属性：

[http://qt-project.org/doc/qt-4.8/stylesheet-examples.html#customizing-qtableview](http://qt-project.org/doc/qt-4.8/stylesheet-examples.html#customizing-qtableview)

[http://qt-project.org/doc/qt-4.8/stylesheet-reference.html#alternate-background-color-prop](http://qt-project.org/doc/qt-4.8/stylesheet-reference.html#alternate-background-color-prop)

[http://qt-project.org/doc/qt-4.8/stylesheet-reference.html#item-sub](http://qt-project.org/doc/qt-4.8/stylesheet-reference.html#item-sub)

它应该与表和行一起使用，即使它没有装满项目。

希望有帮助！

# r - 如何连续重启/循环R脚本

> ID：14563840
> 
> 赞同：3
> 
> 时间：2013-01-28T14:08:51.153
> 
> 标签：r

我希望 R 脚本持续运行并检查文件夹中的文件并对这些文件执行某些操作。

代码只是检查一个文件，然后将文件移动到其他地方并重命名它，删除旧文件（实际上它比这更详细一些）。

如果我运行脚本它工作正常，但是我希望 R 自动检测文件。换句话说，有没有办法让 R 连续运行脚本，这样如果我将文件放在该文件夹中，我就不必运行脚本？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T14:19:15.720

在纯 R 中，你只需要一个无限`repeat`循环......

```
repeat {
  print('Checking files')
  # Your code to do file manipulation

  Sys.sleep(time=5)  # to stop execution for 5 sec

} 
```

但是，根据您的操作系统，可能有更好的工具适合进行这种文件操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:40:38.513

您可以使用`tclTaskSchedule`tcltk2 包中的函数来安排函数或表达式定期运行。您可以安排多个此类任务并且仍然在 R 会话中工作（请注意不要修改计划任务也可能修改的内容，否则您可能会得到不可预测的结果）。

尽管运行给定 rscript 的基于操作系统的解决方案可能仍然是更好的方法。

# iphone - 无法在 iOS 6 中旋转界面方向问题

> ID：14563842
> 
> 赞同：1
> 
> 时间：2013-01-28T14:09:00.213
> 
> 标签：iphone, ios, xcode, ios6, orientation

我有一个要以纵向模式显示的应用程序。但我只想在两种模式下显示一个视图。

我已经为 iOS5 做了这个。但在 iOS6 中，我无法做到这一点。

我也尝试了很多代码来解决它。

我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T14:17:59.333

苹果在 ios 6 中改变了方向。

简而言之，使用以下步骤：

> 1) 在 Targets->Summary... 中设置支持的方向

![在此处输入图像描述](../Images/d5fec1151fcdb31946f86812223973ce.png)

> 2）在iOS6.0`shouldAutorotateToInterfaceOrientation`中，不推荐使用方法。所以，我们必须使用方法来代替这种`shouldAutorotate` 方法。

```
- (BOOL)shouldAutorotate
 {

   return NO;

  } 
```

> 3）在方法中，如果我们想要所有方向`supportedInterfaceOrientations`，我们必须设置我们想要的方向`UIInterfaceOrientationMaskAll`

```
- (NSUInteger)supportedInterfaceOrientations
  {
return  (UIInterfaceOrientationMaskPortrait |     UIInterfaceOrientationMaskPortraitUpsideDown );

 } 
```

# asp.net - 如何将控制台应用程序与现有的 asp.net mvc 3 应用程序集成到一个解决方案中？

> ID：14563844
> 
> 赞同：0
> 
> 时间：2013-01-28T14:09:07.807
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-3, architecture

我有一个 mvc 3 项目，我需要使用 xml 文件中的数据填充 sql 数据库。因此，我将控制台应用程序项目添加到解决方案中，并编写了将在屏幕上显示所有需要的数据的代码。现在我想将数据写入数据库。这是代码块：（来自控制台应用程序）

```
 public static void Main()
    {
        IKernel ninjectKernel = new StandardKernel();
        ninjectKernel.Bind<IItemsRepository>().To<ItemsRepository>();
        ninjectKernel.Bind<IProductRepository>().To<ProductRepository>();
        ninjectKernel.Bind<IShippingRepository>().To<ShippingRepository>();

        var itemsRepository = ninjectKernel.Get<IItemsRepository>(); // redirection to datacontext file
        var productRepository = ninjectKernel.Get<IProductRepository>();
        var shippingRepository = ninjectKernel.Get<IShippingRepository>();

        var doc = XDocument.Load(@"C:\div_kid.xml");
        var offers = doc.Descendants("offer");

        foreach (var offer in offers)
        {   // here I use Linq to XML to get all needed data from xml file: 
            // name, description, price, category, shippingCost, shippingDetails

            Product product = productRepository.CreateProduct(name, description, price, category, "Not Specified", "Not Specified");
            Shipping shipping = shippingRepository.CreateShipping(shippingCost, shippingDetails);

            // here I think I will just create "admin" user and assign its "UserId" to "userId"
            Guid? userId = null;
            Item item = itemsRepository.CreateItem(product.ProductId, shipping.ShippingId, (Guid) userId, DateTime.Now);

            // Resharper highlights this line like unreachable. Why?
            Console.WriteLine("name: {0}", offer.Element("name").Value);
        }
    } 
```

首先，当我运行控制台应用程序时，NullReferenceException 发生在 MvcProjectName.Designer.cs 文件的以下行中：

```
public WebStoreDataContext() : 
    base(global::System.Configuration.ConfigurationManager.ConnectionStrings["WebStoreConnectionString"].ConnectionString, mappingSource) 
```

NullReferenceException：对对象的引用未指向对象实例。

所以，我有很多问题：

1) 如何将控制台应用程序代码与 mvc 3 应用程序代码集成到一个解决方案中？

2）我还在stackoverflow上找到[了这篇文章。](https://stackoverflow.com/questions/6449827/can-a-console-project-reuses-code-from-a-mvc3-ef4-project-in-same-solution)但是我不能在 ConsoleProject 的引用中添加对 MvcProject 的引用吗？并且通过这种方式可以访问“mvc 存储库”代码？

3）我应该在控制台应用程序中使用 ninject 容器吗？

4) 将数据从 xml 文件加载到 slq 数据库中是否有更好的实现？我以前从来没有在一个解决方案中有两个项目，所以mabby还有其他方法可以很好地处理这种情况吗？

提前感谢您的帮助！

**编辑：**

我添加了带有连接字符串的 app.config 文件：

```
<add
    name="WebStoreConnectionString" connectionString="Data Source=(LocalDB)\v11.0;
     AttachDbFilename=|DataDirectory|\WebStore.mdf;Integrated Security=True;Connect Timeout=30"
  providerName="System.Data.SqlClient"
/> 
```

现在，当我运行控制台应用程序时，当调用 Linq to SQL“.submitChanges()”方法时，我得到以下 SqlException：

尝试为文件 C:\Users\Aleksey\repos\working_copy\WebStore\LoadDataTool\bin\Debug\WebStore.mdf 附加自动命名数据库失败。存在同名数据库，或无法打开指定文件，或位于 UNC 共享上。

同样在目录 LoadDataTool\bin\Debug 中出现了扩展名为“Program Debug Database”的“WebStore”文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:04:34.793

很难对您的解决方案架构做出准确的假设，但从我所阅读的内容来看，听起来您并没有将*数据访问层*(DAL) 与表示层 (MVC) 分开——这似乎就是为什么您正在尝试在控制台应用程序中引用它。

有了这个假设，这就是我将如何回答您的问题。

1.  我不会……但如果我要去的话，我是 1) 确保我拥有所有必需的参考资料，2) 验证 app.config 文件是否已正确设置并指向正确的数据库和服务器。
2.  我会将您的存储库分离到不同的项目中，并使用依赖解析器将它们注入您的 MVC 应用程序。这样，控制台应用程序将只需要引用 DAL 程序集 - 因此不需要控制台应用程序中的所有引用。
3.  如果您认为您将来会退出 DAL，那么是的。（**参见#2 建议）。
4.  除非您无法在没有创建 XML 文件和数据库的情况下运行您的解决方案，否则更好的解决方案是简单地创建一个管理控制器和操作，允许您上传 XML 文件并完成任务。

我希望这会有所帮助。

**更新**

对于你的问题

> 尝试为文件附加自动命名的数据库

更改您的连接字符串，使其看起来像；

```
Data Source=.\SQLEXPRESS;AttachDbFilename=|DataDirectory|\WebStore.mdf; 
```

连接字符串的一个很好的来源是： http: [//www.connectionstrings.com/](http://www.connectionstrings.com/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:46:58.970

我猜您需要在`App.config`控制台应用程序使用的文件中定义一个连接字符串（与您在 web.config 中使用它的方式相同）：

```
<connectionStrings>
    <add 
        name="WebStoreConnectionString" 
        connectionString="YOUR CONNECTION STRING COMES HERE" 
        providerName="System.Data.SqlClient"
    />
</connectionStrings> 
```

# javascript - 在移动设备上运行的 Javascript 3D 框架

> ID：14563845
> 
> 赞同：3
> 
> 时间：2013-01-28T14:09:10.123
> 
> 标签：javascript, html, mobile, frameworks, 3d

我需要使用 html5 和 javascript 开发一个 3D 演示，但这必须在移动设备上运行。我对 webgl 了解一点，但我认为它需要显卡支持。我在我的三星 SII 中测试了一些演示，但它不起作用。

谁能给我有关与智能手机兼容的 3D javascript 框架的信息？

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:28:35.653

一些移动网络浏览器支持 WebGL，

我做了一个快速的谷歌搜索，我发现这些支持 WebGl

1.  诺基亚 N900
2.  黑莓 PlayBook
3.  移动版火狐
4.  索尼爱立信 Xperia 系列 Android 智能手机在固件升级后具有 WebGL 功能
5.  歌剧移动 12
6.  Tizen 1.0

这个列表可能已经过时了，因为我在[Wikipedia上找到了它](http://en.wikipedia.org/wiki/WebGL#Mobile_Browsers)

另一个可能会给你一些信息的网站是这个[WebGL 兼容性页面](http://caniuse.com/webgl)

***编辑***

另一个允许部署 JavaScript、HTML5 应用程序并在移动平台上运行的框架是 CocoonJS，这里是[支持的功能列表](http://wiki.ludei.com/cocoonjs%3afeaturelist)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:42:38.890

ThreeJS 会进行 canvas 2d 、 webgl 和 svg 渲染，因此这取决于您的移动能力

[http://mrdoob.github.com/three.js/](http://mrdoob.github.com/three.js/)

你也有 CSS 3D 变换，所以这取决于你需要做什么，这可以是一个选项。

# html - HTML 5 是否需要 ``

> ID：14563846
> 
> 赞同：44
> 
> 时间：2013-01-28T14:09:11.970
> 
> 标签：html

在编写 html 5 doctype 时，您应该`<html xmlns="http://www.w3.org/1999/xhtml">`像以前使用 HTML4 doctype 时那样包含，还是应该使用不同的 xhtml？

```
<!DOCTYPE html> 
<html xmlns="http://www.w3.org/1999/xhtml"> 
```

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-01-28T14:21:17.493

HTML5 不需要使用`xmlns`特定于 XHTML 的属性（这意味着甚至 HTML 4 也不使用它）。

如果您只是提供常规 HTML5，那么您可以完全忽略该属性：

```
<!DOCTYPE html>
<html> 
```

`xmlns`仅当您正在编写和提供 XML 序列化 HTML5（即 XHTML5）时才需要该属性。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-01-28T14:12:39.937

不，您不需要包含它。这应该足够了。

```
 <!doctype html>
 <html> 
```

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2013-01-28T14:14:30.260

不，你没有。事实上，如果你包含它，那么它就不是 HTML5，它是 xhtml。

该`xmlns`部分是一个 XML 命名空间引用。HTML5 不是 XML。

事实上，如果您以前使用过它`xmlns`，那么您也没有使用 HTML4，您使用的是 xhtml。他们不一样。

# ios - 如何在 nsstring 中找到下一行

> ID：14563848
> 
> 赞同：1
> 
> 时间：2013-01-28T14:09:16.630
> 
> 标签：ios, objective-c, xcode, nsstring

有什么方法可以在 nsstring.cs 中找到下一行字符。我的意思是第二行字符...

我想在 nsstring 的第二行找到这个词...请帮帮我...我是 xcode 的新手...

我正在使用

```
NSString *substring = [text substringToIndex:[text rangeOfString:@"            "].location]; 
```

我想找出整个文本中的空白区域...我能够在 nsstring 的第一行中找到那个空白区域。但是在第二行中也有相同的空白区域。但是它无法识别。 ..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T14:10:02.843

您可以按`\n`字符拆分。

像这样的东西：

```
NSArray *vals = [yourString componentsSeparatedByString:@"\n"]; 
```

然后检查是否`vals`有多个元素。

```
if ([vals count] > 1) {
    // you do have a "next line"
    NSString *nextLine = [vals objectAtIndex: 1];
    NSLog(nextLine);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:13:11.410

```
NSArray *lines = [yourNSStringObject componentsSeparatedByString:@"\n"];
NSString *secondline = [lines objectAtIndex:1]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:11:58.397

rangeOfString 有一个重载方法，您可以为其提供范围。

尝试这个：

```
NSString *substring = [text substringToIndex:[text rangeOfString:@" " options:nil range:NSMakeRange([text rangeOfString:@"\n"], text.length)].location]; 
```

# android - 使用带有上下文操作栏的 sherlockListFragments

> ID：14563849
> 
> 赞同：0
> 
> 时间：2013-01-28T14:09:32.353
> 
> 标签：android

我正在使用**sherlockListFragments**显示**来自 sqlite 数据库的列表**。我想使用**上下文操作栏**从列表中**删除项目列表。**任何人都可以与我分享完成您已经知道的任务的步骤...

谢谢你的帮助..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T14:49:52.350

可以通过编码轻松完成

```
public void onActivityCreated(Bundle savedInstanceState) {

    TextView textView;
    Log.i("live", "onActivityCreated");
    super.onActivityCreated(savedInstanceState);
    mActionMode=null;

    setEmptyText("Loading...");

    myModeListener=new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View view, int position,
                long id) {

            pos[length]=position;

            mActionMode=getSherlockActivity().startActionMode(new mCallBack());
            Log.i("asa",Integer.toString(pos[length]));
            length++;

        }

    };

    myStocksadapter = new SimpleCursorAdapter(getActivity().getApplicationContext(),R.layout.delete, null, new String[] {DBConstants.NAME}, new int[] {android.R.id.text1},0);
    setListAdapter(myStocksadapter);
    mycontext=this;
    //textView=(TextView)findViewById(android.R.id.text1);

    getActivity().getSupportLoaderManager().initLoader(0, null, mycontext);

    Log.i("sss","before action bar");

} 
```

# c - C程序：如何找到字符串中字符的最大/最小频率

> ID：14563853
> 
> 赞同：1
> 
> 时间：2013-01-28T14:09:48.523
> 
> 标签：c, string, character, frequency

我正在尝试找到一种方法来获取字符串中字符的最大/最小频率值

例如帮助我

将有 max freq = 2 和 min freq = 1（有 2 个 e 并且还有其他字母出现一次）

另一个例如 aaaa

最大频率 = 4 和最小频率 = 4

我正在尝试对此进行编程，但我不知道在使用 scanf 收到字符串后该怎么做。

假设只有小写字母，单词之间没有空格。

此外，我更喜欢蛮力搜索，而不是由类型转换和诸如此类的优雅解决方案。刚开始使用C，请尽可能简单。顺便说一句，我不介意这只是一个建议或如何做到这一点的基本程序。我不一定需要整个代码。

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T14:13:01.713

你需要建立一个直方图：

```
size_t histogram[UCHAR_MAX] = { 0 };     // allocate and initialise histogram

for (size_t i = 0; s[i] != '\0'; ++i)    // generate histogram for string s
{
    histogram[(unsigned int)s[i]]++;
} 
```

在此之后，您可以通过直方图进行线性扫描，寻找最小和最大字母频率。

# r - ggplot2 中的 panel.border 在 CairoPDF 设备中绘图的底部和右侧绘制较粗的线条

> ID：14563854
> 
> 赞同：0
> 
> 时间：2013-01-28T14:09:49.920
> 
> 标签：r, ggplot2, cairo

![在此处输入图像描述](../Images/196b1d2dadaf579fe2dd13a632b0af5e.png)

我正在使用开罗设置作为

```
CairoPDF(file = "test2.pdf", width = 8.3, height = 11.7) 
```

主题设置是这样的：

```
mytheme<-theme_bw() +
         theme(plot.title = element_text(lineheight=.8, face="bold"),
               text=element_text(size=11, family="Times New Roman"))+ 
         theme(panel.border = element_rect(linetype = "dashed", 
                                           colour = "black"))+ 
         theme(plot.margin = unit(c(1,1.5,1,1.5), "inches")) 
```

我想，这是我的 ggplot 主题设置的问题。请提供建议以解决它。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:01:01.677

仅使用`theme_bw()`我可以重现该功能。

```
df <- data.frame(lab = c('D1','D2','D3'),y = c(4,8,10),x= c(1,2,3))
library(Cairo)
#CairoPDF(file = "test2.pdf", width = 8.3, height = 11.7) 
library(grid)
library(ggplot2)
ggplot(df, aes(xmin = x-0.2, xmax = x + 0.2, ymin = 0, ymax = y,fill=lab)) +
  geom_rect()+xlim(labels = as.character(df$lab))+ theme_bw() 
dev.off() 
```

似乎 Cairo 和 ggplot2 的组合，当我们使用主题时，会产生一些渲染问题。

一种解决方法是保存为简单的 pdf。我希望其他人使用这个可重现的示例给出更好的解决方案。

```
pdf(file = "test2.pdf", width = 8.3, height = 11.7) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:24:13.620

This may or may not fix your specific problem, but I often have this issue with 'grid' objects with respect to the pixel scaling. I can frequently fix the problem by slightly reducing or increasing the size of the image.

I would troubleshoot by taking the following steps:

*   Print the object to a screen plotting device, and see if the problem is still there. If not, the problem exists between your plotting device (in memory) and the exporter (CairoPDF). In that case, print to the screen first, and then save the file. Make sure the screen plotting device has the appropriate size.
*   Try adjusting the size of the 'width' and 'height' arguments. If you see the problem changing or others popping up, then you have a problem with scaling between the size of the plotting device and the export file. Make sure you get a pixel-exact match between the two, by using the format of: `windows(width=8.3, height=11.7, xpinch=72, ypinch=72)` before you print the plot to screen.
*   Test exporting directly to a different format. It may be that the problem is only in the specific exporter. If you can print directly to a PNG file without a problem, then the issue is probably with the way the CairoPDF exporter is working. You may find it easier to simply use the other file format or to manually convert the PNG (or other file) into a PDF using a different program, like LibreOffice or ImageMagick.

Good luck!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-11-14T09:06:56.083

将上述 ggplot 示例代码发送到 svg、pdf、cairo_pdf 等时，底部和右侧面板边框变粗时遇到同样的问题。

这是我在 Inkscape 中使用的一种解决方法，它可能会给对 R 和 pdf/svg 渲染有更好理解的人提供一些见解：

在 Inkscape 中：

*   选择面板边框

*   对象 > 取消组合（这样做两次）

*   或键盘快捷键 shift+ctrl+G (x2)

因此，面板边框似乎与面板背景组合在一起。令人惊讶的是，不是底部和右侧变薄，而是顶部和左侧变厚。所以实际上看起来OP问题应该改写为“在情节的顶部和左侧绘制更细的线”。

# c# - 将空值添加到 datagridview

> ID：14563855
> 
> 赞同：0
> 
> 时间：2013-01-28T14:09:49.997
> 
> 标签：c#, nhibernate, select, datagridview, ilist

在我的 C# 应用程序中，我有一个带有“person”数据的 datagridview，这意味着这个 datagrisview 的数据源是使用类 person 的 IList 设置的。

我的人模型包含以下字段（只是模型，而不是 datagridview）：

```
string foreName
string surname
int devisionId
int someOtherId
Organisation orga 
```

组织是另一种与 NHibernate 映射为一对多的模型。除其他外，组织由以下字符串组成：

```
string orgaName 
```

现在是棘手的部分（对我来说）....在我的datagridview中，我不想拥有所有人员领域，我只想拥有以下内容：

```
foreName
surname
orga.orgaName 
```

获取前两个字段很容易：

```
dataGridView.DataSource = listOfPersons.Select(x => new { ForeName = x.ForeName, SurName = x.Surname}).ToList(); 
```

到目前为止这工作正常，但现在我也想在我的 datagridview 中有组织的名称，所以我尝试了这个：

```
dataGridView.DataSource = listOfPersons.Select(x => new { ForeName = x.ForeName, SurName = x.Surname, OrganisationName = x.Organisation.organName}).ToList(); 
```

如果每个人都有一个组织，这也可以正常工作，但事实并非如此。有些人没有组织，因此“组织”为空，并试图获取 Organisation.organName 以 nullpointerexeption 结尾。

现在的问题是：如何为 datagridview-datasource 编写我的选择语句，以便在 Organization 不为空时显示组织名称，否则将其他内容打印到 datagridview（例如：没有可用的组织）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:12:20.243

`dataGridView.DataSource = listOfPersons.Select(x => new { ForeName = x.ForeName, SurName = x.Surname, OrganisationName = x.Organisation == null ? "None" : x.Organisation.organName}).ToList();`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:13:38.467

尝试这个 ：

```
dataGridView.DataSource = listOfPersons.Select(x => new { ForeName = x.ForeName, SurName = x.Surname, OrganisationName = x.Organisation != null ? x.Organisation.organName : "No organisation available"}).ToList(); 
```

# javascript - 映射新的数组结构javascript

> ID：14563857
> 
> 赞同：0
> 
> 时间：2013-01-28T14:10:01.157
> 
> 标签：javascript, arrays, map, underscore.js

我有以下数组格式：

```
var myArr = [
{
    "a": "1",
    "b": "2",
    "c": "3",
    "d" {
        "0" : "1",
        "1" : "2"
    },
    "blah" : "me"
},
{
    "a": "5",
    "b": "3",
    "c": "1",
    "d" {
        "0" : "6",
        "1" : "3"
    },
    "blah" : "me"
},
{
    "a": "5",
    "b": "3",
    "c": "1",
    "d" {
        "0" : "6",
        "1" : "3"
    },
    "blah" : "you"
}
] 
```

我想知道如何映射一个新数组，使“blah”下的值像

```
var myArr = [{
    "me" : [
    {
        "a": "1",
        "b": "2",
        "c": "3",
        "d": {
            "0" : "1",
            "1" : "2"
            }
    },
    {
        "a": "5",
        "b": "3",
        "c": "1",
        "d": {
            "0" : "6",
            "1" : "3"
            }
    }
    ],
    "you" : [
    {
        "a": "5",
        "b": "3",
        "c": "1",
        "d": {
            "0" : "6",
            "1" : "3"
            }
    }
    ]
}] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:15:04.937

很有可能，试试这个：

```
var output = {};
myArr.forEach(function(elem){     // Loop trough the elements in `myArr`
    if(!output[elem.blah]){       // If the output object doesn't have a property named by elem.blah, yet
        output[elem.blah] = [];   // Create a empty array
    }
    output[elem.blah].push(elem); // Push the current element to that array
    delete elem.blah;             // And delete the mention of `blah` from it (optional)
}); 
```

除了`forEach`，您还可以使用普通`for`循环，以获得更多兼容性：

```
var output = {};
for(var i = 0; i < myArr.length; i++){ // Loop trough the elements in `myArr`
    var elem = myArr[i];
    if(!output[elem.blah]){            // If the output object doesn't have a property named by elem.blah, yet
        output[elem.blah] = [];        // Create a empty array
    }
    output[elem.blah].push(elem);      // Push the current element to that array
    delete elem.blah;                  // And delete the mention of `blah` from it (optional)
}); 
```

使用`underscore.js`，您可以这样做：

```
_.groupBy(myArr, 'blah'); 
```

唯一的区别是这不会`blah`从源对象中删除该属性。

# osgi - OSGI 和克隆服务

> ID：14563861
> 
> 赞同：0
> 
> 时间：2013-01-28T14:10:13.283
> 
> 标签：osgi

我需要从一个捆绑包中注册多个服务，我认为我不能使用服务工厂，因为我只有一个捆绑包消耗以另一种方式放置的服务，我有一个捆绑包代表一个物理设备（例如温度传感器），因为我有多个物理设备（例如 10 个温度传感器，每个都有一个唯一的 ID）然后我需要从同一个包中拥有多个 (10) 服务实例，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T00:40:13.733

可以通过重复调用简单地注册服务的多个实例`context.registerService()`。每个注册都可以携带一组不同的属性，例如：

```
Properties props1 = new Properties();
props1.put("my_id", "ID1");
context.registerService(Foo.class.getName(), new FooImpl(), props1);
// ...
Properties props2 = new Properties();
props2.put("my_id", "ID2");
context.registerService(Foo.class.getName(), new FooImpl(), props2);
// ... 
```

（请注意可能会为您节省一些混淆的术语小问题。捆绑包不会将*自己*注册为服务。它们创建对象并将其注册为服务。捆绑包是部署单元或可执行代码的容器。捆绑包可以注册零到多个服务，和/或使用其他捆绑包注册的服务。）

# delphi - Delphi'无法将类型（UnicodeString）的变体转换为类型（布尔）

> ID：14563862
> 
> 赞同：3
> 
> 时间：2013-01-28T14:10:16.307
> 
> 标签：delphi

我有这段代码可以根据列数据为网格行着色（网格来自 devexpress）

```
var
AColumn: TcxCustomGridTableItem;
gs: variant;
begin

  AColumn := (Sender as TcxGridDBTableView).GetColumnByFieldName('COLOR');

  gs := ARecord.Values[AColumn.Index];

  if VarType(gs) and VarTypeMask = varString or varUString then
    AStyle.Color := gs; //<<<----- exception 
```

该字段`color`是 varchar (firebird)，包含诸如 cllime、clred 等值...但我在异常注释行出现错误“无法将类型的变体 (UnicodeString) 转换为类型 (Boolean)”。我应该改变什么？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T14:28:26.697

我将用`if`以下内容替换您的陈述。它使用该[`VarIsType`](http://docwiki.embarcadero.com/Libraries/XE2/en/System.Variants.VarIsType)函数，该函数更直接地用于 Variant 类型检查，并使用该函数将存储在 Variant 变量中的字符串值转换为颜色[`StringToColor`](http://docwiki.embarcadero.com/Libraries/XE3/en/Vcl.Graphics.StringToColor)：

```
...
if VarIsType(gs, [varString, varUString]) then
  AStyle.Color := StringToColor(gs); 
```

# web - 从浏览器建立 WebSocket 连接

> ID：14563865
> 
> 赞同：5
> 
> 时间：2013-01-28T14:10:20.487
> 
> 标签：web, websocket

问题是关于 Web Socket 连接建立过程。

从 RFC 6455，我了解到 WebSocket 技术是为基于浏览器的应用程序开发的，用于与服务器建立全双工 TCP 连接。

我的问题，

1.  那么当我们说基于浏览器时，建立 web Socket 连接的唯一方法是使用 javaScripts 吗？即所有基于浏览器的客户端都可以使用JS 建立webSocket 连接？

2.  我们可以使用 WebSockets URL 在浏览器上呈现 webPage 吗？浏览器是否支持？

    像在地址栏输入 ws://www.sample.com/login 会显示登录页面？浏览器是否将“ws”理解为协议并建立连接并显示页面？

所以对于我的问题2，我理解为，要从浏览器建立 WebSocket 连接，我们应该已经有一个 webPage，并且该 webPage 中的逻辑将建立 WebSocket 连接。如果我错了，请纠正我。

谢谢普拉迪普

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:07:55.593

对于 WebSocket API，客户端代码必须是 JavaScript，是的。服务器端代码几乎可以是您想要的任何语言。

要回答您的其他问题，WebSocket 协议（ws 和 wss）不能用于直接加载网页。WebSocket 协议只能用于与服务器端脚本建立连接，该脚本在成功握手后会将 HTTP 连接升级为 WebSocket 连接，以减少客户端和服务器之间发送的标头。

所以，是的，一般来说，你应该已经有一个单独编码的网页，然后在上面添加 WebSocket 逻辑，以根据需要与服务器建立套接字连接。

# integration - 集成多个用户帐户表

> ID：14563866
> 
> 赞同：0
> 
> 时间：2013-01-28T14:10:21.533
> 
> 标签：integration, single-sign-on, legacy

我有三个网站：a.example.com、b.example.com 和 c.net。每个都是在几年之后构建的，并且都有自己的*用户*表。

我想将这些站点集成在一起，以便我可以使用单个用户名/密码组合登录，并且只需单击链接即可访问所有三个站点，而无需再次登录。

我以前从未做过这样的集成，所以从两个角度来看：

1) 创建另一个网站，“d.net”，可以在其中创建新帐户。如果您登录原始三个站点之一，它会要求您提供 d.net 帐户。如果您没有，它会要求您制作一个。在 d.net 上的“帐户设置”中，您可以通过输入旧用户名和密码将站点“添加到您的帐户”中。听起来合理吗？

2) 如果我已经登录到 d.net，解决了能够一键登录到三个站点中的另一个的技术问题。Afaik，具有会话 ID 的 cookie 不能跨域共享。所以......也许会生成一个令牌并将其保存到数据库中。通过 GET 将令牌发送到另一个网站，该网站可以检查令牌，登录用户，然后删除令牌。听起来对吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T01:19:00.663

你看过 OpenID 吗？

[http://en.wikipedia.org/wiki/OpenID](http://en.wikipedia.org/wiki/OpenID)

不必重新发明轮子。

# php - 使用 ID 将数据发布到 Mysql

> ID：14563877
> 
> 赞同：0
> 
> 时间：2013-01-28T14:10:53.770
> 
> 标签：php, mysql, count, str-replace

我有一个带有一些输入文本的表格。它以名称+ id 计算。像：

megnevezes_1 megnevezes_2

我的表单还有一个计数的 id 标签，称为 tid_1 并继续。

当我发布我的表单时，我做了一个名为 darab 的隐藏输入，它计算我有多少个 id。

然后我做mysql查询：

```
for($k=1; $k=$darab; $k++){
$command = <<<HTML
UPDATE
    $dbtablename_template_tetelek
    SET
    vamtarifa_szj = '$vamtarifa_szj_$k',
    megnevezes = '$megnevezes_$k',
    me_egyseg = '$me_egyseg_$k',
    mennyiseg = '$mennyiseg_$k',
    afa = '$afa_$k',
    egyseg_ar = 'str_replace(".","",$egyseg_ar_$k)'
    WHERE template_id = '$tid_$k'

HTML;

mysql_query($command,$kapcsolat) or die(mysql_error(). $command);
} 
```

但它有问题。如何将带有 _ 的 $k 字符串附加到我的字符串？以及如何使查询中的 str 替换？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:16:01.423

试试这个..

```
for($k=1; $k=$darab; $k++){

$blah = $egyseg_ar . '_' . $k;
$replace = str_replace(".", "", $blah);

$command = <<<HTML
UPDATE
    $dbtablename_template_tetelek
    SET
    vamtarifa_szj = '$vamtarifa_szj_$k',
    megnevezes = '$megnevezes_$k',
    me_egyseg = '$me_egyseg_$k',
    mennyiseg = '$mennyiseg_$k',
    afa = '$afa_$k',
    egyseg_ar = $replace
    WHERE template_id = '$tid_$k'

HTML;

mysql_query($command,$kapcsolat) or die(mysql_error(). $command);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:33:30.230

你应该让 PHP 准确地知道它需要解析什么。为了帮助它，您可以使用大括号，例如`'{$var1}_{$var2}'`

因此，如果您已经在循环上方的代码中命名了一个变量，则`mennyiseg = '$mennyiseg_$k'`可能需要这样做。`mennyiseg = '{$mennyiseg}_{$k}'``$mennyiseg`

# c# - 关于 C# 中的 Dispose 模式和终结器

> ID：14563878
> 
> 赞同：0
> 
> 时间：2013-01-28T14:11:01.440
> 
> 标签：c#, destructor, dispose, finalizer

首先在[这个 MSDN 页面](http://msdn.microsoft.com/en-us/library/b1yfkh5e%28v=vs.100%29.aspx)

有一个标准的 Dispose 模式。并且有一个bool作为protected`Dispose`方法的参数来告诉GC是否已经手动释放了托管资源，这样GC就不需要关心它们了。

现在的问题是，在块内究竟应该做什么`if (disposing) {}`？通常 GC 会清理托管资源，因此不需要做任何特别的事情。但是由于在这个块内，需要显式清理托管资源，这是否意味着只需将对象中的所有字段和内容设置为`null`？

其次，语言中只有一个析构函数（或它所称的终结器）不是更好吗？然后在 GC 设计中，只需要确定析构函数是否已经被调用，因此不需要对其进行垃圾收集，或者析构函数尚未调用，GC 应该清理它。我发现 Dispose 模式相当复杂，我很困惑在哪个函数中清理什么以及如何在派生类中清理。并且通过使用signle析构函数设计，GC只是在它们还没有清理的时候清理它们，并且在它们已经清理的时候不清理。

问候

PS：那么这也是清理对象的一种更好更简单的模式吗？

```
class Foo
{
    bool unmanagedDisposed = false;
    void Dispose() {/*clean up unmanaged resources*/ unmanagedDisposed = true;}
    ~Foo() {if (!unmanagedDisposed) Dispose();}
} 
```

所以如果程序员知道并记得调用`Dispose()`，在终结器中什么都不做，否则在终结器中清理非托管资源。在这里，我们不需要关心那些托管资源。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:33:25.630

`~Destructor()`基本上，如果您有一个具有非托管字段或属性的类，您只需要使用 dispose 实现完整模式。

如果您的所有字段和属性都是托管的并且不是一次性的，那么您根本不需要实现 IDisposable。

如果您的字段或属性之一是一次性的，那么您只需要实现 IDisposable 模式。您不必完全按照上述模式进行操作。

如果在最后一种情况下，您在字段或属性中确实有非托管资源（例如，指向某物的本机指针、ADO 以外的数据库连接或其他托管连接），那么 .net 不知道在垃圾收集器时如何清理它滚来滚去。

在这种情况下，您需要考虑清理对象的两个地方。要么它会像他应该的那样由开发人员调用来清理`Dispose()`，要么他会忘记。如果他忘记了，而你有一个析构函数，那么它就会被放到一个终结队列中。

这就是`Dispose(disposing)`调用的来源。如果开发人员很好并且调用了`Dispose()`，那么您发送 true 以便也可以清理托管资源。

如果开发人员没有调用 dispose 并且可怜的对象最终出现在终结队列中，那么调用`Dispose()`托管对象将引发异常，因为它们不再存在。因此，在这种情况下，您发送 False，以便跳过托管资源并避免异常。我不确定这一点，但传说中在终结队列上抛出异常会退出整个过程，甚至可能结束世界。所以不要这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:14:23.797

> 究竟应该在`if (disposing) {}`块内做什么？

您清理*托管*资源，即调用`Dispose()`您当时拥有的所有 IDisposable 对象。

> 要显式清理托管资源，这是否意味着只需将对象中的所有字段和内容设置为空？

不，不是那个意思。它仅与 IDisposable 对象有关。

> 语言中只有一个析构函数（或终结器）不是更好吗？

我们只有一个析构函数，也就是终结器， `Dispose()`不是吗。这使您段落的其余部分无关紧要。

我们有 Disposable 模式和 GC，它们是相关的和合作的，但并不相同。GC 管理内存并且只管理内存。IDisposable 用于管理资源（流、连接、位图）。

# google-custom-search - 谷歌自定义搜索自动完成不起作用

> ID：14563879
> 
> 赞同：6
> 
> 时间：2013-01-28T14:11:01.743
> 
> 标签：google-custom-search

我正在实施 Google 自定义搜索，我想在我的自定义搜索框中自动完成，即使我从控制面板启用了自动完成，它仍然没有显示。这个你能帮我吗。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T16:54:53.893

Here is limited [documentation](http://support.google.com/customsearch/bin/answer.py?hl=en&answer=2631081) from google about this. Newly enabled or added autocompletions may take several hours to appear. In addition make sure that your site is being indexed by checking the settings under the Index tab.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-14T13:30:15.870

确保您的元素中的 enableAutoComplete 设置为 true

# javascript - 如何为由变量名后跟 Javascript 中的任何字符组成的字符串创建正则表达式？

> ID：14563880
> 
> 赞同：1
> 
> 时间：2013-01-28T14:11:03.250
> 
> 标签：javascript, regex, variables

我需要验证存储在 localStorage 中的项目的“路径名”（路径名`string`类似于：`abc/localstorage/ualldocs/aalldocs`为了过滤 localstorage 中的内容。

现在我正在尝试这个：

```
priv.localpath = "abc/localstorage/ualldocs/aalldocs";

for (i in localStorage) {
  if (localStorage.hasOwnProperty(i)) {
    s = new RegExp('\\/' + priv.localpath + '\\/.*$');
    if (s.test(i)) {
      value = localStorage.getItem(i);
      console.log( value );
    } else {
      console.log( "not found: "+i);
    }
  }
} 
```

哪个不起作用=找不到任何东西。

**问题：**
如何为由变量名后跟任何字符组成的字符串创建正则表达式？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:15:19.337

但答案还是一样的：

使用构造函数允许[RegExp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)

```
 priv.localpath = "abc/localstorage/ualldocs/aalldocs";

for (i in localStorage) {
  if (localStorage.hasOwnProperty(i)) {
    s = new RegExp(priv.localpath + '\\/*$', "i")
    if (s.test(i)) {
      value = localStorage.getItem(i);
      console.log( value );
    } else {
      console.log( "not found: "+i);
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:33:10.917

您在循环中的正则表达式始终是相同的，即： `new RegExp("\\/abc/localstorage/ualldocs/aalldocs\\/*$")` 将转换为： `\/abc/localstorage/ualldocs/aalldocs\/*$`

我真的不明白：

1.  为什么要在循环中重新生成相同的正则表达式；
2.  你想要达到的目标。

但是，您回答您的问题：

```
var someString = "something"
var myRegex = new RegExp(someString + '.*'); // creates a regex for the string made up of a variable 'someString' followed by any character: '.*' 
```

# jquery - DataTable fnFooterCallback 求和列

> ID：14563886
> 
> 赞同：0
> 
> 时间：2013-01-28T14:11:18.577
> 
> 标签：jquery

我在使用 jQuery DataTable fnFooterCallback 对列求和时遇到问题。例如，我在列中有值（双字段）：

2.0 3.0 4.0

我在页脚单元格中得到总值：2.0 3.0 4.0 而不是 9.0 怎么了？

这是代码：

```
 $(document).ready(function() {
        $('#example').dataTable({
            "fnFooterCallback": function ( nRow, aaData, iStart, iEnd, aiDisplay ) {

                var iTotal = [0,0,0,0,0,0,0,0,0];
                 for ( var i=0 ; i<aaData.length ; i++ )
                    {
                        iTotal[0] += aaData[i][5];
                        iTotal[1] += aaData[i][6];
                        iTotal[2] += aaData[i][7];
                        iTotal[3] += aaData[i][8];
                        iTotal[4] += aaData[i][9];
                        iTotal[5] += aaData[i][10];
                        iTotal[6] += aaData[i][11];
                        iTotal[7] += aaData[i][12];
                    }

                 var nCells = nRow.getElementsByTagName('th');
                    nCells[5].innerHTML=iTotal[0];
                    nCells[6].innerHTML=iTotal[1];
                    nCells[7].innerHTML=iTotal[2];
                    nCells[8].innerHTML=iTotal[3];
                    nCells[9].innerHTML=iTotal[4];
                    nCells[10].innerHTML=iTotal[5];
                    nCells[11].innerHTML=iTotal[6];
                    nCells[12].innerHTML=iTotal[7];
            } 
        }
    );
    } ); 
```

感谢您的帮助，对不起我的英语:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:14:37.737

看起来您的数据被保存为字符串，而不是浮点/整数。

更改您的调用以使用 Number，以正确转换数据：

```
 iTotal[0] += Number(aaData[i][5]);
 iTotal[1] += Number(aaData[i][6]);
 iTotal[2] += Number(aaData[i][7]);
 iTotal[3] += Number(aaData[i][8]);
 iTotal[4] += Number(aaData[i][9]);
 iTotal[5] += Number(aaData[i][10]);
 iTotal[6] += Number(aaData[i][11]);
 iTotal[7] += Number(aaData[i][12]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T12:30:52.957

好的，我发现出了什么问题:) 我有： var nCells = nRow.getElementsByTagName('th');

我有例如：

```
<th><center>${odczyt.id}</center></th> 
```

当我删除 center 和 /center 两个版本时： parseFloat 和 Number 工作:)

感谢@Joe Pym 的回答

# python - 适用于 python/matlab/simulink/maple 用户的 Modelica？

> ID：14563903
> 
> 赞同：2
> 
> 时间：2013-01-28T14:12:12.003
> 
> 标签：python, matlab, simulink, maple, modelica

我正在尝试学习来自 Python/MATLAB/Simulink/Maple 背景的 Modelica。是否有任何资源可供具有其他语言/环境经验的人学习 Modelica？

当我从 MATLAB 背景的上下文中学习 Python 时，我发现[NumPy 对 Matlab 用户](http://www.scipy.org/NumPy_for_Matlab_Users)有很多帮助。有没有类似的学习Modelica的资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:23:44.937

在我的硕士论文期间，我与 Modelica 有一些关系。

你肯定可以看看这个论坛

[http://www.modelica-forum.com/forums/](http://www.modelica-forum.com/forums/)

这是Modelica语言的官方论坛。

此外，您可以轻松查阅以下网页：

[https://modelica.org/](https://modelica.org/)

如果还不够，您可以考虑购买教科书的想法

> Peter Fritzson：使用 Modelica 2.1 进行面向对象建模和仿真的原理，939 页，Wiley-IEEE 出版社，ISBN 0-471-471631。

我相信这对于第一次深入 Modelica 来说已经足够了。

我希望它有所帮助。

# javascript - 不会“丢失”网址搜索部分的 HTML 链接。如何？

> ID：14563905
> 
> 赞同：2
> 
> 时间：2013-01-28T14:12:14.747
> 
> 标签：javascript, html, hyperlink

假设我在这个页面上：

```
http://localhost:4444/index.html?user=test 
```

我的 index.html 页面有一个这样的链接：

```
<a href='help.html'>help</a> 
```

如果我单击它，浏览器会将我带到那里，并且我的 url 将其更改为：

```
http://localhost:4444/help.html 
```

但我希望它发生的是我**不会丢失“搜索查询”** ，这样我就会被带到这里：

```
http://localhost:4444/help.html?user=test 
```

有没有简单的方法来实现这一点？可能没有javascript..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:01:21.470

您还可以从访问页面阅读 document.referrer

```
//localhost:4444/index.html?user=test 
```

并分裂'？获取搜索表达式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T16:10:44.330

不，这个问题没有简单的解决方案。您需要使用 javascript 和 location 对象。

您需要确保使用搜索部分丰富网址

（如果需要，还有其他的，例如哈希）

# angularjs - 如何编写一个可以使用角度指令呈现一些 html 代码并将其显示为文本的指令？

> ID：14563911
> 
> 赞同：2
> 
> 时间：2013-01-28T14:12:20.617
> 
> 标签：angularjs, angularjs-directive

我认为一些示例代码可以解释我的目的。

一些带有角度的html代码：

```
<div ng-init="buttons=['add','edit','delete']">
  <div show-result-as-text>
    <button ng-repeat="button in buttons">{{button}}</button>
  </div>
</div> 
```

您可以看到我想定义一个自定义指令“show-result-as-text”。它应该使用角度指令呈现内部 html 代码，然后将它们显示为文本。

最终的 html 应该是：

```
<div ng-init="buttons=['add','edit','delete']">
  <div show-result-as-text>
    &lt;button&gt;add&lt;/button&gt;
    &lt;button&gt;edit&lt;/button&gt;
    &lt;button&gt;delete&lt;/button&gt;
  </div>
</div> 
```

并且当`buttons`值改变时，转义的 html 也应该改变。

我试过自己写一个，但工作 2 小时后失败了。

**更新**

现场演示： http: [//plnkr.co/edit/fpqeTJefd6ZwVFEbB1cw](http://plnkr.co/edit/fpqeTJefd6ZwVFEbB1cw)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T00:41:34.273

我能想到的最接近的事情在这里举例说明：http: [//jsfiddle.net/bmleite/5tRzM/](http://jsfiddle.net/bmleite/5tRzM/)

基本上它包括隐藏 src 元素并附加一个包含`outerHTML`每个 src 子元素的新元素。

注意：我不喜欢这个解决方案，但它有效，所以我决定分享它......

# hibernate - 如何通过使用hibernate来使用由不同持久化单元驱动的复合实体

> ID：14563914
> 
> 赞同：1
> 
> 时间：2013-01-28T14:12:30.473
> 
> 标签：hibernate, persistence-unit

我的项目中有 2 个不同的持久性单元。PU_A：应用实体，可以执行所有的 crud 操作。PU_B：这个有一些包含外部数据的视图。我可以从这里读取数据

但是我想通过使用由 PU_B 持久性单元管理的不可变实体在 PU_A 中的某些实体中创建外键。

如果您可以查看以下片段。我有由 PU_A 驱动的 IncomingPaperwork 实体和由 PU_B 驱动的 ProjectView。在我应用了这个问题之后；部署应用程序时发生以下异常：

```
30-Jan-2013 15:13:05 o'clock EET> <Warning> <Deployer> <BEA-149078> <Stack trace for message 149004
weblogic.application.ModuleException: 
    at weblogic.ejb.container.deployer.EJBModule$1.execute(EJBModule.java:326)
    at weblogic.deployment.PersistenceUnitRegistryInitializer.setupPersistenceUnitRegistries(PersistenceUnitRegistryInitializer.java:62)
    at weblogic.servlet.internal.WebAppModule.initPersistenceUnitRegistry(WebAppModule.java:411)
    at weblogic.servlet.internal.WebAppModule.prepare(WebAppModule.java:365)
    at weblogic.application.internal.flow.ScopedModuleDriver.prepare(ScopedModuleDriver.java:176)
    Truncated. see log file for complete stacktrace
Caused By: org.hibernate.AnnotationException: @OneToOne or @ManyToOne on com.acme.model.entity.IncomingPaperwork.projectView references an unknown entity: com.acme.integrationmodel.entity.ProjectView
    at org.hibernate.cfg.ToOneFkSecondPass.doSecondPass(ToOneFkSecondPass.java:81)
    at org.hibernate.cfg.AnnotationConfiguration.processEndOfQueue(AnnotationConfiguration.java:456)
    at org.hibernate.cfg.AnnotationConfiguration.processFkSecondPassInOrder(AnnotationConfiguration.java:438)
    at org.hibernate.cfg.AnnotationConfiguration.secondPassCompile(AnnotationConfiguration.java:309)
    at org.hibernate.cfg.Configuration.buildMappings(Configuration.java:1162)
    Truncated. see log file for complete stacktrace
> 
[03:13:05 PM] ####  Deployment incomplete.  #### 
```

有没有办法做到这一点？有什么建议么？提前致谢

***持久性.xml***

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
             version="2.0">
   <persistence-unit name="PU_A" transaction-type="JTA">
      <description>This unit manages all application entities</description>
      <provider>org.hibernate.ejb.HibernatePersistence</provider>
      <jta-data-source>jdbc/A_DS</jta-data-source>
      <class>com.acme.model.entity.IncomingPaperwork</class>
      <properties>
         <property name="hibernate.jndi.url" value="t3://localhost:7101"/>
         <!--DataSource-->
         <property name="hibernate.connection.datasource"
                   value="jdbc/A_DS"/>
         <property name="hibernate.transaction.manager_lookup_class"
                   value="org.hibernate.transaction.WeblogicTransactionManagerLookup"/>
         <property name="hibernate.dialect"
                   value="org.hibernate.dialect.Oracle10gDialect"/>
         <property name="hibernate.hbm2ddl.auto" value="update"/>
         <property name="hibernate.show_sql" value="true"/>
         <property name="hibernate.format_sql" value="true"/>
         <property name="hibernate.use_sql_comments" value="true"/>
         <property name="hibernate.current_session_context_class" value="jta"/>
         <property name="hibernate.archive.autodetection" value="jar,class"/>
      </properties>
   </persistence-unit>
   <persistence-unit name="PU_B" transaction-type="JTA">
      <description>This unit manages all integration entities</description>
      <provider>org.hibernate.ejb.HibernatePersistence</provider>
      <jta-data-source>jdbc/B_DS</jta-data-source>
      <class>com.acme.integrationmodel.entity.ProjectView</class>
      <properties>
         <property name="hibernate.jndi.url" value="t3://localhost:7101"/>
         <!--DataSource-->
         <property name="hibernate.connection.datasource"
                   value="jdbc/B_DS"/>
         <property name="hibernate.transaction.manager_lookup_class"
                   value="org.hibernate.transaction.WeblogicTransactionManagerLookup"/>
         <property name="hibernate.dialect"
                   value="org.hibernate.dialect.Oracle10gDialect"/>
         <property name="hibernate.hbm2ddl.auto" value="validate"/>
         <property name="hibernate.show_sql" value="true"/>
         <property name="hibernate.format_sql" value="true"/>
         <property name="hibernate.use_sql_comments" value="true"/>
         <property name="hibernate.current_session_context_class" value="jta"/>
      </properties>
   </persistence-unit>
</persistence> 
```

***IncomingPaperwork.class***

```
import com.arsivist.structure.BaseEntity;

import com.acme.integrationmodel.entity.ProjectView;
import com.acme.model.entity.listener.EntityListener;
import com.acme.model.entity.listener.IncomingPaperworkListener;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.EntityListeners;
import javax.persistence.GeneratedValue;
import javax.persistence.GenerationType;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.ManyToOne;
import javax.persistence.SequenceGenerator;
import javax.persistence.Table;

@Entity(name = "IncomingPaperwork")
@Table(name = "INCOMINGPAPERWORKS")
@SequenceGenerator(name = "INCOMINGPAPERWORK_SEQ", sequenceName = "INCOMINGPAPERWORK_SEQ", allocationSize = 1)
@EntityListeners( { EntityListener.class, IncomingPaperworkListener.class })
public class IncomingPaperwork extends BaseEntity
{
    private Company company;
    private ProjectView projectView;

    public IncomingPaperwork()
    {
        entityName = "IncomingPaperwork";
    }

    @Id
    @GeneratedValue(strategy = GenerationType.SEQUENCE, generator = "INCOMINGPAPERWORK_SEQ")
    @Column(name = "ID")
    public int getId()
    {
        return id;
    }

    public void setId(int id)
    {
        this.id = id;
    }

    public void setCompany(Company company)
    {
        this.company = company;
    }

    @ManyToOne(targetEntity = com.acme.model.entity.Company.class, cascade = { })
    @JoinColumn(name = "COMPANYID", nullable = false)
    public Company getCompany()
    {
        return company;
    }

    public void setProjectView(ProjectView projectView)
    {
        this.projectView = projectView;
    }

    @ManyToOne(targetEntity = com.acme.integrationmodel.entity.ProjectView.class, cascade = { })
    @JoinColumn(name = "PROJECTVIEWID")
    public ProjectView getProjectView()
    {
        return projectView;
    }
} 
```

***ProjectView.class***

```
import com.arsivist.structure.BaseEntityView;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.Id;

import org.hibernate.annotations.Immutable;
import org.hibernate.annotations.Subselect;

@Entity(name = "ProjectView")
@Immutable
@Subselect("SELECT * FROM ProjectView")
public class ProjectView extends BaseEntityView
{
    private String code;
    private String name;

    public ProjectView()
    {
        entityName = "ProjectView";
    }

    public ProjectView(int id, String name)
    {
        entityName = "ProjectView";

        this.id = id;
        this.name = name;
    }

    @Id
    @Column(name = "ID")
    public int getId()
    {
        return id;
    }

    public void setId(int id)
    {
        this.id = id;
    }

    public void setCode(String code)
    {
        this.code = code;
    }

    @Column(name = "CODE")
    public String getCode()
    {
        return code;
    }

    public void setName(String name)
    {
        this.name = name;
    }

    @Column(name = "NAME")
    public String getName()
    {
        return name;
    }

    @Override
    public String toString()
    {
        return "" + getName();
    }
} 
```

# android - 当 3G 网络可用时，Android GCM 不适用于 wifi 网络

> ID：14563916
> 
> 赞同：4
> 
> 时间：2013-01-28T14:12:35.693
> 
> 标签：android, android-c2dm, google-cloud-messaging

我正在开发 Android GCM 推送通知上的应用程序。一切正常。但是当我的设备使用 wifi 而不是服务提供商的数据计划时，我无法收到通知消息。在我的情况下，数据计划是 3G，但是通知照常发送给设备，但是当设备通过 wifi 连接时，我无法收到任何通知。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:34:22.110

这不应该是这样，我有一个接收 GCM 推送通知的 android 应用程序，无论它是通过 3G 还是 Wi-Fi 连接的。

我建议解决此问题：

*   当您从服务器发送推送通知时，请确保**不**包含`delay_while_idle`，以便立即发送通知。还要确保您设置`time_to_live`了一个合理的值（默认为 4 周）
*   尝试在您的应用中保持 Wi-Fi 锁定
*   使用不同的设备和/或 Android 版本进行测试（可能是某些硬件/API 版本的问题）

# azure - ServiceBus ：异步 MessageSender.BeginSend() ，我应该把 Thread.Sleep()

> ID：14563922
> 
> 赞同：2
> 
> 时间：2013-01-28T14:12:52.057
> 
> 标签：azure, azure-worker-roles, azureservicebus

工作代码在这里

```
static MessageSender TopicClient;
public static void SendTopicMessage(BrokeredMessage message)
{
 IAsyncResult result = TopicClient.BeginSend(message, processEndSend, TopicClient);
 Thread.Sleep(5000);
}
public static void processEndSend(IAsyncResult result)
{
  MessageSender messageSender = result.AsyncState as MessageSender;
  messageSender.EndSend(result);
} 
```

上面的代码正在工作。但是我不知道为什么要放 Thread.Sleep()。我不想保留 Thread.Sleep()。但它不起作用我删除了 Thread.Sleep()。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:33:28.983

我认为您正在从线程中调用 SendTopicMessage ...

因此，如果您在此处删除 Sleep()，您的线程在发送您的第一条消息后终止...如果您放置 Sleep(5000)，您将在 5 秒的时间内发送下一条消息，以便线程保持活动状态。

我认为你正在设计糟糕的架构。纠正我如果我错了。

为了清楚地了解您的流程...请发布足够的代码片段...

# drupal - D7 混合菜单（实体和内容翻译）

> ID：14563923
> 
> 赞同：1
> 
> 时间：2013-01-28T14:12:54.937
> 
> 标签：drupal, menu, multilingual

在我的主菜单中，我主要有指向通过实体翻译翻译的节点的链接，因此一个节点翻译了字段。但是我有两个通过内容翻译进行翻译的节点，所以每个节点实际上是三个独立的节点（三种语言）。现在我不知道如何在菜单的层次结构中实现这些内容翻译节点。为了澄清，我的菜单应该是这样的：

主菜单-菜单项1（实体翻译）-菜单项2（内容翻译）-菜单项2.1（内容翻译）-菜单项2.2（实体翻译）-菜单项3（实体翻译）

我的问题是，如何为项目 2.1 和 2.2 制作菜单项？由于项目 2 实际上是三个单独的节点，我不知道将什么配置为项目 2.1 和 2.2 的父节点。

谢谢，非常感谢任何帮助。

# php - CSV 上传问题

> ID：14563926
> 
> 赞同：0
> 
> 时间：2013-01-28T14:13:03.810
> 
> 标签：php, file-upload, csv, yii, yii-cmodel

我正在尝试使用 Yii 框架上传 CSV 文件。我添加了以下代码：

**模型**

```
<?php
    class Import extends CModel
    {
        public $name,$email,$doctor = 0,$hospital = 0,$diagnostic = 0;
        public function rules()
        {
            return array(
                array('name,email,doctor,hospital,diagnostic','required')
            );
        }

        public function  attributeNames()
        {
            return array(); 
        }
    }
?> 
```

**查看(index.php)**

```
<div class="form">
    <?php echo CHtml::beginForm('site/import',$method='post',$htmlOptions =array('enctype'=>'multipart/form-data')); ?>
        <div class="row">
            <input type="hidden" name="MAX_FILE_SIZE" value="30000" />
            <input type="file" name="filename" value="file">
            <?php echo CHtml::submitButton('Submit', array('name'=>'submitCSV')); ?>
            <?php 
                if(is_array($buffer))
                {
                    foreach($buffer as $line){ 
                        echo '<div class="clear"></div>';
                        echo CHtml::activeTextField($buffer[0],'name',array('value',$line['name']));
                        echo CHtml::activeTextField($buffer[0],'email',array('value',$line['email']));
                        echo CHtml::activeTextField($buffer[0],'doctor',array('value',$line['doctor']));
                        echo CHtml::activeTextField($buffer[0],'hospital',array('value',$line['hospital']));
                        echo CHtml::activeTextField($buffer[0],'diagnostic',array('value',$line['diagnostic']));
            }}?>
        </div>
    <?php echo CHtml::endForm(); ?>
</div> 
```

**控制器**

```
public function actionImport()
{
    $model = new Import;
    $buffer = array($model);
    if(isset($_POST['submitCSV'])){
        $filename=$_FILES['filename']['tmp_name'];
        $fp = fopen("$filename","r");
        if($fp){
            $i =0;
            while(($buffer[$i] = fgetcsv($fp,1000,",")) !== false)
            {
                $model = new Import;
                $model->name = $buffer[$i][0];
                $model->email = $buffer[$i][1];
                $model->doctor = $buffer[$i][2];
                $model->hospital = $buffer[$i][3];
                $model->diagnostic = $buffer[$i][4];
                $buffer[$i++] = $model;
            }
            if(!feof($fp))
                echo "Echo: Unexpected fgets() fail\n";
        }
        fclose($fp);
        unset($_POST['submitCSV']);
    }
    $this->render('index',array('buffer'=>$buffer));
} 
```

**此代码面临的问题：**

1.  由于`$line`是 的一个实例`Import`，我应该能够使用 object 的元素，`$line`但我不能这样做。我用过`$line->'name'`这个，但我得到了这个错误：解析错误：语法错误，意外的''name''（T_CONSTANT_ENCAPSED_STRING），期望标识符（T_STRING）或变量（T_VARIABLE）或'{'或'$'

2.  `$line`在`model`这里，所以我应该能够将它作为`activeTextField`语句中的第一个参数。我得到这个错误：get_class() 期望参数 1 是对象，给定的布尔值

3.  第三，这段代码生成了五次相同的文本字段行，所以我想通过在代码中`activeTextField`放置`$i`in并在循环`0`中递增它来进行试验。`foreach`这会产生与 2 中相同的错误。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:25:52.313

首先使用[`CFormModel`](http://www.yiiframework.com/doc/api/1.1/CFormModel)代替`CModel`. 您可能也想删除该`attributeNames()`功能。

问题1：`$label->'name'`不正确。使用`$label->name`.

如果您按上述方式进行更改，问题 2 和 3 应该可以工作

# bash - grep、sed 或 awk 比较两个文件的内容

> ID：14563927
> 
> 赞同：0
> 
> 时间：2013-01-28T14:13:05.370
> 
> 标签：bash, sed, awk, grep, line

我有以下我试图在 bash 中解决的问题。我有两个不同的文件（file1、file2），其中包含如下信息列表：

```
HWI-1KL104:145:C18ANACXX:5:1101:1168:2164   4   *   0   0   *   *   0   0   GTGCCTGAACTGGATGCATNGACAATGGGGAACATTACATATATAATACAAGGGAAACTCAAACGTTTCCNNNNNCAAGTATTTGACAGNNNNNNNNNNNN   @B@DDFFFHHHHHIHIJIJ#3AFGHHJJJJIIJJIJIIIJJJJJJJGIIJIJJJIJIJJJJIJJI=@EED#####,,5=;ADDFEEDDD############ 
```

显示的字符串代表单行。这意味着如果我这样做：

```
grep "HWI-1KL104:145:C18ANACXX:5:1101:1168:2164" file1 
```

我的输出是上面的字符串。HWI- 1KL104 *:145:C18ANACXX:5:1101:1168:2164*代表我的线路的ID

你必须想象像这样的数百万行（大约 8GB 的​​ txt 文件）具有不同的 ID

我要做的是：

1.  搜索 file1 中存在且存在于 file2 中的那些 ID

2.  将 file2 中的匹配行保存到仅包含 ID + 以下信息的新文件中：

> HWI-1KL104:145:C18ANACXX:5:1101:1196:2120 CCCCTTCTCCAGGGGACCANGTATGTTTCTCTTATGGTCCTCCTTGTTTACTAGCTTCTCTGGCAGTGAGATTGTAGGCTGGTAATCCTTTACTCNNTNNN CCCFFFFFHHHHHHJJJJJJ#4CDEEDCDDDDDC######

因此，丢弃由 4 * 0 0 * * 0 0 表示的东西（在长度方面是固定的，但在内容方面不是固定的......意思可能是 3 * 1 0 * * 0 1 等等......）。

所以我的 file1 代表我想要在 file2 中查找并保存的我的 ID 的一种“参考”。

我很难解释。我希望你明白我想做什么。

我认为 a`grep`应该可以工作，但我不知道如何`grep`仅在一行中获取一些信息并与另一个文件进行比较。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:10:23.460

假设 file2 仅包含您想要的键 ID 列表：

```
awk 'NR==FNR{ids[$0];next} $1 in ids{print $1,$10,$11}' file2 file1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:01:21.343

可以使用 for 循环

```
 outputfile="/tmp/something"
    file1=3; file2=4; 
    for ids in $(cat $file1|awk '{print $1}'); 
    do
          #echo working on $id**
          grep $ids $file2|awk '{print $3" "$4" "$5}' >> $outputfile
    done 
```

上面是现在扩展的相同脚本并将输出发送到文件，因此您可以执行脚本并让它处理放置输出的位置，而不是将脚本泵入文件。

当然你可以在大文件上运行它，它可能需要一段时间才能开始，可能需要一些时间才能完成，使用这种方法的问题是它有效且易于使用，但可能不如某些建议使用其他复杂的方法。

您可以启用 id 行上的工作以获得更多详细信息

补充说明：

```
for filesfound in $(pattern=1101; grep $pattern 3*|awk -F":" '{print $1}'); do
 echo "found $filesfound"; 
 grep "newpattern" $filesfound; 
 done;

found 3
found 33 
```

您可以像这样进一步深入研究初始 grep：

```
 grep $pattern *|awk -F":" '{print "-- FILE: " $1 " --- ENTIRE_STRING: "$0}'
-- FILE: 3 --- ENTIRE_STRING: 3:HWI-1KL104:145:C18ANACXX:5:1101:1168:2164   4   *   0   0   *   *   0   0   GTGCCTGAACTGGATGCATNGACAATGGGGAACATTACATATATAATACAAGGGAAACTCAAACGTTTCCNNNNNCAAGTATTTGACAGNNNNNNNNNNNN   @B@DDFFFHHHHHIHIJIJ#3AFGHHJJJJIIJJIJIIIJJJJJJJGIIJIJJJIJIJJJJIJJI=@EED#####,,5=;ADDFEEDDD############
-- FILE: 33 --- ENTIRE_STRING: 33:HWI-1KL104:145:C18ANACXX:5:1101:1168:2164   4   *   0   0   *   *   0   0   GTGCCTGAACTGGATGCATNGACAATGGGGAACATTACATATATAATACAAGGGAAACTCAAACGTTTCCNNNNNCAAGTATTTGACAGNNNNNNNNNNNN   @B@DDFFFHHHHHIHIJIJ#3AFGHHJJJJIIJJIJIIIJJJJJJJGIIJIJJJIJIJJJJIJJI=@EED#####,,5=;ADDFEEDDD############ 
```

现在返回文件名|所有字符串，然后查找模式并返回模式之后的所有内容 - 您可以通过在行尾添加更多 awk 语句来自定义它

```
pattern=1101; grep $pattern *|awk -F":" '{print $1"|"$0}'|awk -F"$pattern" '{print $2}'
:1168:2164   4   *   0   0   *   *   0   0   GTGCCTGAACTGGATGCATNGACAATGGGGAACATTACATATATAATACAAGGGAAACTCAAACGTTTCCNNNNNCAAGTATTTGACAGNNNNNNNNNNNN   @B@DDFFFHHHHHIHIJIJ#3AFGHHJJJJIIJJIJIIIJJJJJJJGIIJIJJJIJIJJJJIJJI=@EED#####,,5=;ADDFEEDDD############
:1168:2164   4   *   0   0   *   *   0   0   GTGCCTGAACTGGATGCATNGACAATGGGGAACATTACATATATAATACAAGGGAAACTCAAACGTTTCCNNNNNCAAGTATTTGACAGNNNNNNNNNNNN   @B@DDFFFHHHHHIHIJIJ#3AFGHHJJJJIIJJIJIIIJJJJJJJGIIJIJJJIJIJJJJIJJI=@EED#####,,5=;ADDFEEDDD############ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:22:52.350

目前尚不清楚您想要 file2 的哪些字段，但一个好的起点应该是这样的：

```
grep -Ff file1 file2 | tr -s ' ' | cut -d' ' -f1,9,10 
```

或者如果 file2 是制表符分隔的：

```
grep -Ff file1 file2 | cut -f1,9,10 
```

附带说明一下，您可能应该将此数据保存在数据库中，而不是文本文件中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T14:23:54.187

总是`4 * 0 0 * * 0 0`相同的格式？在不了解各种可能情况的情况下，很难说如何回答这个问题。id 呢，它总是采用相同的格式吗？

要使用 grep（而不是整行）获取 id，请使用`-o`. 这仅返回匹配的文本，而不是整行。

要写入新文件并丢弃`4 * 0 0 * * 0 0`您可以使用`grep -v`grep 字符串的倒数。所以如果你已经知道你正在使用哪条线路，`grep -v '4 * 0 0 * * 0 0'`

无论如何，这在很大程度上取决于您输入的确切格式以及各种边缘情况，但这可能会让您入门。

# objective-c - 如果有 2 个在操作中，我怎样才能做到这一点，所以只使用 1 个“if 语句”

> ID：14563928
> 
> 赞同：-2
> 
> 时间：2013-01-28T14:13:07.713
> 
> 标签：objective-c, uitextfield, alertview

在游戏中……当按下“完成”按钮时，有两个“if 语句”：一个带您进入下一个级别，另一个带您回家。我怎样才能让它一次只发生一次？它现在的工作方式是无论用户是对还是错，都会弹出获胜和失败的“警报视图”。这是它的外观：

```
-(IBAction)done {

    if ([entry.text isEqualToString:sentance.text]) {

        UIAlertView *alert = [[UIAlertView alloc] 
                             initWithTitle:@"Cleared!" 
                             message:@""
                             delegate:nil 
                             cancelButtonTitle:@"Ok" 
                             otherButtonTitles: nil];
        [alert show];
        [alert release];

        seconds.text = @"5 Seconds";
    }

    if ([entry.text isEqualToString:entry.text]) {

        NSString *nssScore= [NSString stringWithFormat:@"Final Score: \n %i Points", Score];

        UIAlertView *alert = [[UIAlertView alloc]
                             initWithTitle:@"Nope! Wrong"
                             message:nssScore
                             delegate:nil
                             cancelButtonTitle:@"Ok"
                             otherButtonTitles: nil];
        [alert show];
        [alert release];
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:19:01.800

你的第二个有问题`if`。

```
if ([entry.text isEqualToString:entry.text]) { 
```

这 if 总是正确的，因为为什么`entry.text`不应该等于它自己？

此外，如果您有两个`if`陈述并且只有一个是正确的，那么您总是使用 a`else if`来表示第二个：

```
if (<condition>) {

} else if (<other condition>) {

} 
```

如果`condition`为真，`if`则不执行其他，即使`other condition`也为真。但是，在您的情况下，您的第二个`if`对我来说似乎是无稽之谈。一个`if`永远正确的东西是无用的，被完全排除在外。代码相当于

```
if (<condition>) {

} else {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:20:37.460

您可以使用 else if 条件。

像这样 ：

```
-(IBAction)done {

    if ([entry.text isEqualToString:sentance.text]) {

        UIAlertView *alert = [[UIAlertView alloc] 
                              initWithTitle:@"Cleared!" 
                              message:@""
                              delegate:nil 
                              cancelButtonTitle:@"Ok" 
                              otherButtonTitles: nil];
        [alert show];
        [alert release];

        seconds.text = @"5 Seconds";
    }
    else if ([entry.text isEqualToString:entry.text]) {

        NSString *nssScore= [NSString stringWithFormat:@"Final Score: \n %i Points", Score];

        UIAlertView *alert = [[UIAlertView alloc]
                              initWithTitle:@"Nope! Wrong"
                              message:nssScore
                              delegate:nil
                              cancelButtonTitle:@"Ok"
                              otherButtonTitles: nil];
        [alert show];
        [alert release];
    }
} 
```

或者您可以在每个块中添加一行代码“return;”

像这样：

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-28T22:46:24.213

我得到了答案，伙计们...

```
 if ([a.text isEqualToString:b.text] == FALSE) {

condition

} 
```

谢谢！

# gtk - 如何删除 GtkTreeViewColumn 中的排序指示器以保持列可排序？

> ID：14563931
> 
> 赞同：4
> 
> 时间：2013-01-28T14:13:13.890
> 
> 标签：gtk

我知道这是一个被认为不是问题的错误，但是当您有许多列仍希望它们可排序时，无需左右滚动即可显示所有列，并且排序箭头指示器并不那么重要。有哪些可用的解决方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T01:11:04.357

我发现它可以通过**不**应用于**树视图列**`set_sort_column_id`来完成。我们必须通过对您不希望在其标题中显示箭头的列使用方法以编程方式执行此操作，然后使用信号并将其绑定到将使用**模型**获取当前排序顺序的**函数**是否在**模型**上应用**反向**排序顺序。**`set_clickable``signal_connect``clicked`**`get_sort_column_id`**`GTK_SORT_ASCENDING``GTK_SORT_DESCENDING`**`set_sort_column_id`********

# mongodb - 通过 mongoexport 检索 _id 的值

> ID：14563937
> 
> 赞同：5
> 
> 时间：2013-01-28T14:13:26.823
> 
> 标签：mongodb, export

我需要将 mongo 集合导出到 CSV。我正在使用 mongoexport 类似的东西：

```
mongoexport --db myDb --collection myCollection --fields _id,myField1,myField2 --csv --out myExport.csv 
```

如何获取导出中每一行的值`_id`而不是值？`ObjectID(509b82904eb8dd3621000008)`

# java - Java Swing JFrame大小不一致

> ID：14563940
> 
> 赞同：3
> 
> 时间：2013-01-28T14:13:35.793
> 
> 标签：java, swing, size, jframe, layout-manager

这是我在 Stackoverflow 中的第一个问题。我从这里收集了很多页面，并没有解决我的问题。我的问题有时（并非总是）我创建的 jframe 与我在属性中设置的大小不同。我使用 Netbeans 7.1.2 并且只拖放用于 GUI 制作。我还不能进行 GUI 编码。这是例如图片

![](../Images/fec97dc02b7b0bc561031c603abd3e0f.png)

我的窗口组件看起来像被裁剪了。运行时的大小和属性中的大小（最小和首选大小）不同。这发生在自由设计或绝对设计中。这是什么问题？你知道这通常有什么问题吗？我不知道会发生什么。我该如何解决这个问题？我对错误感到抱歉。谢谢你。

我不知道代码中的错误在哪里，但这是该框架的代码：

```
@SuppressWarnings("unchecked")
// <editor-fold defaultstate="collapsed" desc="Generated Code">
private void initComponents() {

    jButton4 = new javax.swing.JButton();
    jSeparator1 = new javax.swing.JSeparator();
    btBack = new javax.swing.JButton();
    jButton5 = new javax.swing.JButton();
    jLabel1 = new javax.swing.JLabel();
    btNext = new javax.swing.JButton();
    jLabel10 = new javax.swing.JLabel();
    jLabel2 = new javax.swing.JLabel();
    jSeparator2 = new javax.swing.JSeparator();
    jLabel3 = new javax.swing.JLabel();
    jLabel4 = new javax.swing.JLabel();
    jLabel5 = new javax.swing.JLabel();
    jLabel6 = new javax.swing.JLabel();
    jLabel7 = new javax.swing.JLabel();
    lbJudul = new javax.swing.JLabel();
    jPanel1 = new javax.swing.JPanel();

    jButton4.setIcon(new javax.swing.ImageIcon(getClass().getResource("/otodidak/gambar/logomati.png"))); // NOI18N
    jButton4.setToolTipText("Tutup Otodidak");
    jButton4.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton4ActionPerformed(evt);
        }
    });

    setDefaultCloseOperation(javax.swing.WindowConstants.DISPOSE_ON_CLOSE);
    setTitle("Otodidak");
    setAlwaysOnTop(true);
    setLocationByPlatform(true);
    setPreferredSize(new java.awt.Dimension(787, 410));
    setResizable(false);
    getContentPane().setLayout(new org.netbeans.lib.awtextra.AbsoluteLayout());
    getContentPane().add(jSeparator1, new org.netbeans.lib.awtextra.AbsoluteConstraints(48, 53, 689, -1));

    btBack.setIcon(new javax.swing.ImageIcon(getClass().getResource("/otodidak/gambar/backlogo2.png"))); // NOI18N
    btBack.setToolTipText("Kembali");
    btBack.addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseClicked(java.awt.event.MouseEvent evt) {
            btBackMouseClicked(evt);
        }
    });
    btBack.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            btBackActionPerformed(evt);
        }
    });
    getContentPane().add(btBack, new org.netbeans.lib.awtextra.AbsoluteConstraints(224, 340, 130, -1));

    jButton5.setIcon(new javax.swing.ImageIcon(getClass().getResource("/otodidak/gambar/logomati.png"))); // NOI18N
    jButton5.setToolTipText("Tutup Otodidak");
    jButton5.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            jButton5ActionPerformed(evt);
        }
    });
    getContentPane().add(jButton5, new org.netbeans.lib.awtextra.AbsoluteConstraints(718, 358, 46, -1));

    jLabel1.setIcon(new javax.swing.ImageIcon(getClass().getResource("/otodidak/gambar/synapticwvdial.png"))); // NOI18N
    getContentPane().add(jLabel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(388, 65, 348, 264));

    btNext.setIcon(new javax.swing.ImageIcon(getClass().getResource("/otodidak/gambar/nextlogo2.png"))); // NOI18N
    btNext.setToolTipText("Lanjut");
    btNext.addMouseListener(new java.awt.event.MouseAdapter() {
        public void mouseClicked(java.awt.event.MouseEvent evt) {
            btNextMouseClicked(evt);
        }
    });
    getContentPane().add(btNext, new org.netbeans.lib.awtextra.AbsoluteConstraints(396, 340, 130, 48));

    jLabel10.setFont(new java.awt.Font("Ubuntu", 1, 48)); // NOI18N
    jLabel10.setText("1");
    getContentPane().add(jLabel10, new org.netbeans.lib.awtextra.AbsoluteConstraints(48, 68, 36, 40));

    jLabel2.setFont(new java.awt.Font("Ubuntu", 0, 24)); // NOI18N
    jLabel2.setText("Instal Aplikasi wvdial");
    getContentPane().add(jLabel2, new org.netbeans.lib.awtextra.AbsoluteConstraints(90, 80, -1, 24));
    getContentPane().add(jSeparator2, new org.netbeans.lib.awtextra.AbsoluteConstraints(50, 116, 216, 18));

    jLabel3.setFont(new java.awt.Font("Ubuntu", 0, 16)); // NOI18N
    jLabel3.setText("1) Buka Synaptic.");
    getContentPane().add(jLabel3, new org.netbeans.lib.awtextra.AbsoluteConstraints(56, 132, 368, 26));

    jLabel4.setFont(new java.awt.Font("Ubuntu", 0, 16)); // NOI18N
    jLabel4.setText("3) Klik kanan wvdial, pilih mark for Installation. ");
    getContentPane().add(jLabel4, new org.netbeans.lib.awtextra.AbsoluteConstraints(56, 207, 346, -1));

    jLabel5.setFont(new java.awt.Font("Ubuntu", 0, 16)); // NOI18N
    jLabel5.setText("2) Ketik wvdial. ");
    getContentPane().add(jLabel5, new org.netbeans.lib.awtextra.AbsoluteConstraints(56, 170, 346, -1));

    jLabel6.setFont(new java.awt.Font("Ubuntu", 0, 16)); // NOI18N
    jLabel6.setText("4) Biarkan Synaptic menginstalkan wvdial. ");
    getContentPane().add(jLabel6, new org.netbeans.lib.awtextra.AbsoluteConstraints(56, 244, 346, -1));

    jLabel7.setFont(new java.awt.Font("Ubuntu", 0, 16)); // NOI18N
    jLabel7.setText("Catatan: internet harus menyala.");
    getContentPane().add(jLabel7, new org.netbeans.lib.awtextra.AbsoluteConstraints(58, 292, 298, 22));

    lbJudul.setFont(new java.awt.Font("Dialog", 1, 24)); // NOI18N
    lbJudul.setForeground(new java.awt.Color(254, 254, 254));
    lbJudul.setHorizontalAlignment(javax.swing.SwingConstants.CENTER);
    lbJudul.setText("Cara Menginstal Smartfren AC682");
    getContentPane().add(lbJudul, new org.netbeans.lib.awtextra.AbsoluteConstraints(117, 12, 578, -1));

    jPanel1.setBackground(new java.awt.Color(1, 1, 1));
    getContentPane().add(jPanel1, new org.netbeans.lib.awtextra.AbsoluteConstraints(0, -2, 788, 50));

    pack(); 
```

不是完整的代码，但可能有用。谢谢大家的关注...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T14:28:22.563

```
...AbsoluteConstraints(117, 12, 578, -1) 
```

这是问题的基础。`null`使用时它与布局一样有效`pack()`。

解决方案很简单。使用符合组件首选尺寸的布局管理器。

# android - 使用zlib列出android中apk文件的目录结构

> ID：14563943
> 
> 赞同：3
> 
> 时间：2013-01-28T14:13:39.413
> 
> 标签：android, c, zlib

我目前正在开发一个 Android 项目。

既然android apk文件本质上是一个不同文件扩展名的zip文件，那么是否可以使用zlib来归档asset文件夹的目录结构呢？

目标是编写一些接口，如 opendir() 和 readdir() 以便我可以执行以下操作：

```
DIR* dir = zip_opendir("somedirectory");
struct dirent* entry;
while (0 != (entry = zip_readdir(dir))){
    __android_log_print(ANDROID_LOG_ERROR, "DIR", "entry: %s\n", entry->d_name);
} 
```

除了所有操作都发生在一个 zip 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:34:09.053

您可以使用[libzip](http://www.nih.at/libzip/)（它本身使用[zlib](http://zlib.net/)）来处理 zip 文件。它可以满足[您的所有需求，甚至更多](http://www.nih.at/libzip/libzip.html)。

# c - 如何使用'getchar（）'替换字符，如果有的话？

> ID：14563945
> 
> 赞同：4
> 
> 时间：2013-01-28T14:13:47.310
> 
> 标签：c

我的任务是检查用户输入并用感叹号替换每个句点，每个感叹号用 2 个感叹号替换，然后计算替换的次数。

这是我的代码：

```
int main(void)

{

    int userInput, substitutionsNum = 0;

    printf("please enter your input:\n");
    while ((userInput = getchar()) != '#')
    {
        if (userInput == '.')
        {
            userInput = '!';
            ++substitutionsNum;
        }

        else if (userInput == '!')
        {
            userInput = '!!';
            ++substitutionsNum;
        }
    }

    printf("%c, the number of substitutions are: %d", userInput, substitutionsNum);
    return 0;
} 
```

如果我输入“nir”。然后“#”退出程序，输出为“#，替换次数为：1”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:16:54.210

除了最后一次之外，您永远不会将输入打印出来，因此“替换”将不起作用。

此外，您不能将一对感叹号表示为`'!!'`，这是一个不同的多字符文字。至少，如果您尝试打印它，那么没有任何 I/O 函数可以满足您的期望。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:17:33.227

```
!! 
```

是两个字符。你假设它是一个单一的字符。

你正在覆盖同一个变量中的`userInput`

您可以再使用一个 char 缓冲区，以便您可以根据需要调整索引。例如，当您要存储“！！”时，要增加两个索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:16:38.757

你这样做是不对的。您需要将累积的更改输入存储在字符数组（即`char buffer[1024]`）中并将替换项放在那里。使用您的算法，您唯一要打印的是`userInput`变量的最后一个值。

由于这可能是**家庭作业**，我建议您阅读更多关于**C 语言**中的字符串操作的信息。

# html - KineticJS - 如何在加载后将图像发送回（项目在出现在前面之前被加载）

> ID：14563946
> 
> 赞同：0
> 
> 时间：2013-01-28T14:13:56.347
> 
> 标签：html, kineticjs

使用 KineticJS 如何在图像加载后将图像发送到后面（项目在出现在前面之前被加载）。

我正在将背景 Kinetic.Image 和一些文本对象加载到图层上。

无论我按什么顺序调用，图像总是在前面，当我想要它在图层的后面时。

关于我应该如何做到这一点的任何建议？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:11:19.293

假设所有项目都在同一层中，您将执行以下操作：

```
 image.moveToBottom();
 layer.draw();
 stage.draw(); //this one is not necessary really but threw it in just in case. 
```

这将进入图像的 onload 功能（最后）。

# javascript - 如何控制一个jsonp回调函数

> ID：14563948
> 
> 赞同：0
> 
> 时间：2013-01-28T14:14:10.520
> 
> 标签：javascript, ajax, cross-domain, jsonp

我正在发送一个 jsonp 请求，并且我还在本地操作来自服务器的响应。

我试图触发`foo()`响应返回时调用的回调函数，但不知道该怎么做。

这就是我发送请求的方式：

```
function jsonp(url, success, failed) {
    var script = document.createElement("script");
    script.setAttribute("type","text/javascript");
    script.setAttribute("src", url + questionMark + "callback="+"foo" + "&cachebuster="+new Date().getTime());
    document.getElementsByTagName("head")[0].appendChild(script);
} 
```

这是 json 文件的样子：

```
bar({key:value, key: value ...}) 
```

我有这两个功能：

```
function foo(data) {

}

function bar(data) {

} 
```

**问题是 bar 正在执行，我希望 foo 被执行。**我如何仅通过脚本进行操作（以及我应该如何编写 json 文件本身）所以我在 javascript 中确定什么是回调函数（而不是在 json 文件本身中）。我想独立于 json 并决定在脚本中触发哪个回调。

# gwt - GWT 中的事件调度线程？

> ID：14563950
> 
> 赞同：0
> 
> 时间：2013-01-28T14:14:26.290
> 
> 标签：gwt, event-dispatch-thread

在编写 Swing 或 AWT 应用程序时，我知道 GUI 更改应始终在 EDT 中完成。这如何转化为编写 GWT 应用程序？

当我调用以下内容时，我正在查看一个场景。

```
myRequestBuilder.sendRequest(myRequestDate, myRequestCallback) 
```

**myRequestCallback** 修改 GUI。在 Swing 中有这样的构造，我会确保**myRequestCallback**调用 EDT 以进行 GUI 更改。GWT 是否也要求我做类似的事情？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:19:08.880

在网络上（在浏览器中），这非常简单：一切都在事件调度线程中执行。

另请参阅[http://www.html5rocks.com/en/tutorials/workers/basics/](http://www.html5rocks.com/en/tutorials/workers/basics/)

# android - R.drawable 如何能够解析 R.drawable.sample_2 等？

> ID：14563951
> 
> 赞同：0
> 
> 时间：2013-01-28T14:14:28.450
> 
> 标签：android

> **可能重复：**
> [Gridview 教程问题](https://stackoverflow.com/questions/3276260/gridview-tutorial-problems)

在 android 网格视图教程中，他们使用`R.drawable.sample_0`, `R.drawable.sample_1`,`R.drawable.sample_2`等。

这些属性未在 中定义`R.drawable`。java如何在没有错误的情况下解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:04:31.483

是的，在您编译项目的任何时候，它们都是“即时”定义的。去检查你的“gen/[package]/R.java”自动生成的文件，你会看到类似于：

```
public final class R {
    public static final class drawable {
        public static final int sample_0=0x7f020000;
        public static final int sample_1=0x7f020001;
        public static final int sample_2=0x7f020002;
    }
} 
```

因此，在使用时，`R.drawable.sample_0`我们只是在 R 类中使用嵌套的静态声明。

# jquery - jquery将输入字段设置为可读

> ID：14563954
> 
> 赞同：1
> 
> 时间：2013-01-28T14:14:40.457
> 
> 标签：jquery, html, input

我会在可读和只读之间切换输入字段。我可以将字段设置为只读而没有问题，但其他方式不起作用。你知道为什么吗？

```
$('.infinite_checkbox').live('click', function(e) {      
if ($('#amount_input_'+id).attr("disabled") != true)
  { 
    $('#amount_input_'+id).val('');
    $('#amount_input_'+id).attr("disabled", true); 
  } else {
    $('#amount_input_'+id).attr("disabled", false);
  }
}); 
```

我也试过 .removeAttr("disabled")

感谢帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:28:06.317

您可以测试此代码

```
$('.infinite_checkbox').bind("click",function(In){
   if($(In.target).attr("checked")=="checked"){
      $('#amount_input_'+id).prop("disabled",true);
   }else{
      $('#amount_input_'+id).prop("disabled",false);
   }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T14:15:37.010

好吧，您没有使用`readonly`, 但是`disabled`，但没关系。使用`.prop()`：

```
$("#amount_input_" + id).prop('disabled', true);
$("#amount_input_" + id).prop('disabled', false); 
```

不相关，但如果您使用 jQuery 1.7+ 更改`.live`为使用`.on`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T20:15:58.077

$('#amount_input_'+id).attr("readonly","");

# c# - 用于 ac# Web 服务的目标 c aes 128 加密

> ID：14563955
> 
> 赞同：1
> 
> 时间：2013-01-28T14:14:47.343
> 
> 标签：c#, objective-c, xcode, aes, commoncrypto

所以我试图弄清楚如何制作一个客观的 c 版本，因为它是已实现的 wcf 服务安全性的一部分。我的主要问题是 Idk 从哪里开始，因为一些文章/教程会在开头自动填充 0（不确定这是否是他们的 IV），如下所示：

（几个回复下来）

[http://iphonedevsdk.com/forum/iphone-sdk-development/60926-aesencryption-in-objective-c-and-php.html](http://iphonedevsdk.com/forum/iphone-sdk-development/60926-aesencryption-in-objective-c-and-php.html)

与不使用任何填充的此相比：

[Objective-C 解密 AES 128 cbc 十六进制字符串](https://stackoverflow.com/questions/9682118/objective-c-decrypt-aes-128-cbc-hex-string)

无论如何，这就是 wcf 使用 AES 128 加密的方式。非常感谢任何建议或推动正确方向的方法。谢谢！！！。

```
public class EncryptionAES128
    {
     static public string EncryptString(string inputString, string key)
            {
                string output = "";

                Rijndael encryption = new RijndaelManaged();

                try
                {
                    encryption.IV = GenerateIV();
                    encryption.Key = StringToByte(key);

                    ICryptoTransform encryptor = encryption.CreateEncryptor(encryption.Key, encryption.IV);

                    using (MemoryStream msEncrypt = new MemoryStream())
                    {
                        using (CryptoStream csEncrypt = new CryptoStream(msEncrypt, encryptor, CryptoStreamMode.Write))
                        {
                            using (StreamWriter swEncrypt = new StreamWriter(csEncrypt))
                            {
                                swEncrypt.Write(inputString);
                            }

                            byte[] cipherText = msEncrypt.ToArray();
                            byte[] encrypted = new byte[cipherText.Length + encryption.IV.Length];

                            encryption.IV.CopyTo(encrypted, 0);
                            cipherText.CopyTo(encrypted, IV_LENGTH);

                            output = ByteToString(encrypted);
                        }
                    }
                }
                catch (Exception ex)
                {
                    throw ex;
                }

                return output; 
```

}

# c# - is there any other way to avoid redrawing for the 2nd viewport?

> ID：14563956
> 
> 赞同：0
> 
> 时间：2013-01-28T14:14:57.207
> 
> 标签：c#, xna, camera, draw, viewport

I have to add a second viewport (= like splitscreen) to allow the player to see an event somewhere else on the current level.

Is there any possibility to draw the event area without redrawing every things already drew ?

[EDIT] RenderTarget2D is the key. Thx User1459910 for all.

It almost worked.

New questions :

1.  I've searched for a while and still don't find a tutorial about "Xna 2D camera with source and destination rectangle" if you have a link, i'd like to see it, please ♥</li>
2.  Currently, the drawing code looks like this :

    ```
    protected override void Draw(GameTime gameTime)
    {

       /*
       ...
       here is the code to "draw" in the renderTarget2D renderAllScene object
       ...
       */

       //Let's draw into the 2 viewports
       spriteBatch.Begin(SpriteSortMode.Deferred, BlendState.AlphaBlend, SamplerState.LinearClamp, null, null, null, camera1.transform);
       spriteBatch.Draw(renderAllScene, viewport1.Bounds, Color.White);
       spriteBatch.End();
       if (EventIsRunning)
       {
          spriteBatch.Begin(SpriteSortMode.Deferred, BlendState.AlphaBlend, SamplerState.LinearClamp, null, null, null, camera2.transform);
          spriteBatch.Draw(renderAllScene, viewport2.Bounds, Color.White);
          spriteBatch.End();
       } 
    ```

*The Viewport 1 is great. The camera follows the character but after moving the camera for a short distance, the map is cutted at 1280pixels i think. so it drew only 1280pixels of all the map. I don't know why. Maybe because i failed when i created renderAllScene = new RenderTarget2D. :x

```
 renderAllScene = new RenderTarget2D(GraphicsDevice, GraphicsDevice.PresentationParameters.BackBufferWidth, GraphicsDevice.PresentationParameters.BackBufferHeight); 
```

*For the Viewport 2 : I need the source rectangle. I'll try it tomorrow.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T23:30:05.870

I'll assume you are making a 2D game with NOTHING 3D at all.

Here is what you could do:

You need to render the whole map, and all game objects that appear on it, on a Texture. If you don't know how to render to a Texture, here is the procedure:

1.  Create a RenderTarget2D object
2.  On the Draw function, before you render anything, you must call the graphicsDevice.SetRenderTarget() method, and set the RenderTarget2D you created.
3.  After you are done rendering, call graphicsDevice.SetRenderTarget(null) to reset the render target to the default one. You must do it or you'll have problems!
4.  To render the RenderTarget2D, simply use SpriteBatch.Draw((Texture2D)renderTarget2D, position, color), being "renderTarget2D" of course the name of the RenderTarget2D you created.

Then, you use two 2D Cameras. One will display where the hero is, and the other one will display the event area.

A 2D camera is basically a trick with Source and Destination rectangles. The trick is to use a Source Rectangle to define the area that displays the hero and the area around it and use the main Viewport as the Destination Rectangle, and use another Source Rectangle to define the event area and another Destination Rectangle as the second Viewport.

If you have doubts, google about "XNA 2D Camera", and research about Source and Destination rectangles on the MSDN's article for SpriteBatch.Draw().

# javascript - 如何创建包含对象的数组

> ID：14563963
> 
> 赞同：1
> 
> 时间：2013-01-28T14:15:20.223
> 
> 标签：javascript, arrays, object

我想创建一个这样的数组

```
[
    {sessionId: '12345', nickname: 'timmay!', socketIds: [1, 2, 3]},
    {sessionId: '23456', nickname: 'pete', socketIds: [4, 5, 6]}
] 
```

我定义了一个这样的数组

```
var  myarray = [] 
```

现在我想像上面的例子一样创建这个结构

如果你注意到我们里面有一个数组，我`object socketIds: [4, 5, 6]` 应该如何创建一个包含许多对象的数组，我应该如何调用它们？

对于上面的例子，如果我们将此命名为 myarray 我应该如何调用 socketIds 1 或`timme!`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T14:20:25.537

你有两个问题：

**我应该如何创建一个包含许多对象的数组？**

```
var myarray = [];
myarray[0] = {};//make an empty object
myarray[0].sessionId = '12345';//in JS assigning something to a property of an object creates/updates it
myarray[0].nickname = 'timmay!';
myarray[0].socketIds = [];//create an empty array
myarray[0].socketIds[0] = 1;//assign the first element of array called socketIds in the first object of the array called myarray
myarray[0].socketIds[1] = 2;
myarray[0].socketIds[2] = 3;

myarray[1] = {};
myarray[1].sessionId = '12345';
myarray[1].nickname = 'timmay!';
myarray[1].socketIds = [ 4, 5, 6]; 
```

**例如，如果我们将这个 myarray 命名为 myarray，我应该如何调用它们，我应该如何调用 socketIds 1 或 timme！？**

```
alert( myarray[0].socketIds[0] );
alert( myarray[0].nickname ); 
```

**编辑1：**

通常你会使用 for() 循环来处理数组，但是如果你想从你的 Javascript 引擎中获得最大的性能，你可以考虑保存数组引用而不是每次都引用它们。像这样：

```
var myarray = [];
var tmpObj = myarray[0] = {};//make an empty object
tmpObj.sessionId = '12345';//in JS assigning something to a property of an object creates/updates it
tmpObj.nickname = 'timmay!';
var tmpArr = tmpObj.socketIds = [];//create an empty array
tmpArr[0] = 1;//assign the first element of array called socketIds in the first object of the array called myarray
tmpArr[1] = 2;
tmpArr[2] = 3; 
```

但我很确定现代 Javascript 引擎会处理这些重复引用，最终代码将与不保存引用一样快。

**编辑2：**

当然，显然您在自己的问题中所写的也是初始化数组的有效语法（对象和数组文字）：

```
var myarray = [
    {
        sessionId: '12345', 
        nickname: 'timmay!', 
        socketIds: [1, 2, 3]
    },
    {
        sessionId: '23456',
        nickname: 'pete',
        socketIds: [4, 5, 6]
    }
]; 
```

这种语法的问题是您必须对值进行硬编码，这不是在 Javascript 中创建复杂数据结构的最流行的方法。无论如何，它将创建与我在此答案开头提到的第一个解决方案相同的对象。所以你仍然可以像这样访问这些部分：

```
alert( myarray[0].socketIds[0] ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T14:24:09.923

这就是您需要调用的方式

```
 var arr = [
        {sessionId: '12345', nickname: 'timmay!', socketIds: [1, 2, 3]},
        {sessionId: '23456', nickname: 'pete', socketIds: [4, 5, 6]}
    ];

    document.write(arr[0].nickname+"<br>");
    document.write(arr[0].socketIds[0]); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T14:20:09.713

这个数据结构类似于python字典类型。试试这个[Dictionary 等效数据结构？](https://stackoverflow.com/questions/6112484/dictionary-equivalent-data-structure)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T14:22:23.373

不确定您的问题是否真的这么简单，但您展示的代码已经使用文字符号创建了一个对象数组。所以只需将其分配给一个变量：

```
var myarray = [
    {sessionId: '12345', nickname: 'timmay!', socketIds: [1, 2, 3]},
    {sessionId: '23456', nickname: 'pete', socketIds: [4, 5, 6]}
]; 
```

要访问您提到的元素：

```
console.log(myarray[0].socketIds[0]); // 1
console.log(myarray[0].nickname);     // "timmay!" 
```

如果您稍后想添加另一个对象：

```
var newObject = {sessionId: '34567', nickname: 'john', socketIds: [7, 8, 9]};
myarray.push(newObject); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T14:27:11.867

初始化变量如下：

```
var myArray = [{}, {}],
    socket1 = myArray[0],
    socket2 = myArray[1]; 
```

现在分别对 socket1 和 socket2 做你的任务。这可能无法完全回答您的问题，但如果您的套接字数量有限且数量较少，则它显示了进行此类分配的可接受方式。

# c# - 转换 . 将正则表达式转换为 javascript

> ID：14563965
> 
> 赞同：0
> 
> 时间：2013-01-28T14:15:34.747
> 
> 标签：c#, javascript, regex

我在 c# 中有以下正则表达式`(ship|sub)(?<!^(shipment|subway)$)`

当数据不是船运或地铁时，用于检查给定数据是否包含船或子船。

我想在 java 脚本中编写相同的表达式。我尝试了几个带有 javascript negetive look behind 的选项。但它们不符合我的目的：例如：当我将货件交给正则表达式时，它不应该返回货件（因为我在正则表达式中排除了货件）.. 然而，当我给会员资格时，它应该给船和匹配结果为真。

你们中的任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:24:02.623

您的正则表达式也不应该在 .NET 中工作。一旦你匹配了“ship”或“sub”，否定的lookbehind断言*总是*正确的：你匹配了“ship”或“sub”，所以前面的字符*永远不会*是“ment”或“bway”，因此总是通过断言. 相反，您的意思一定是：

```
\b(ship(?!ment)|sub(?!way))\b 
```

这也应该在 Javascript 中工作，因为它只使用否定的*前瞻*断言。

# iphone - 这些在多大程度上是可能的：访问 iPhone 上的照片、音频、视频和其他文件以从应用程序上传到服务器？

> ID：14563970
> 
> 赞同：0
> 
> 时间：2013-01-28T14:15:50.087
> 
> 标签：iphone, ios, cocoa-touch, uiimagepickercontroller

如果我问的是非常基本的问题，我很抱歉。

`UIImagePickerController`用于访问、编辑和控制相册和相机中的文件（即可以捕捉镜头）。

我也想上传音频、视频文件。这些媒体文件是否在该照片库下（我猜不是，那么如何访问它们）？

我还需要上传其他文件，例如 pdf 或文本文件。那么有没有办法从文件系统访问这些文件（我对文档的看法是不可能的！）？

> 但是是否有任何 API 支持有助于访问和处理文件，至少在格式方面是这样。

文件类型：（媒体）照片、音频、视频（非媒体）pdf、文本等。

谢谢。

# android - 在 android 手机中保存图像以在钛中设置壁纸

> ID：14563978
> 
> 赞同：0
> 
> 时间：2013-01-28T14:16:16.637
> 
> 标签：android, titanium-mobile, wallpaper

我在钛行业工作。我面临一个问题，即我可以保存由相机、图库、相册或 twitter 提要拍摄的图像，以便在使用钛作为平台的 android 设备中设置为墙纸。我真的需要帮助，因为我被卡住了。任何帮助，将不胜感激。提前谢谢。

PS：我已经在 iPhone(ios) 中做到了这一点。我的 ios 工作代码是：

```
button.addEventListener('click',function(e){
var blob=largeImage.toImage();
Titanium.Media.saveToPhotoGallery(blob);       
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T06:10:47.940

在 api 文档中存在 setasystemwallpaper 方法，用于在 android 中将图像设置为壁纸

[TI.Media.Android.SetasSystemWallpaper](http://docs.appcelerator.com/titanium/latest/#!/api/Titanium.Media.Android)

# c# - 如何传入函数返回的“修饰符”字符串？

> ID：14563981
> 
> 赞同：0
> 
> 时间：2013-01-28T14:16:22.607
> 
> 标签：c#, string, ref

```
class test
{
  public String get() {return s;}
  private String s="World";
}

class modifier
{
   public static void modify(ref String v)
   {
     v+="_test";
   }
}

String s1="Earth";

modifier.modify(ref s1); <-------- OK

test c=new test();
modifier.modify(ref c.get()); <------- Error 
```

如何传入函数返回的“修饰符”字符串？通过另一个 String 对象进行赋值是不可接受的。那么副本将如何创建。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T14:30:09.877

您正在尝试用 C# 编写 C++ 代码。您需要以 C# 方式处理此问题。为 test.s 添加一个属性，而不是一个名为“get()”的方法。我们将在下面的代码中将此新属性称为“MyString”：

```
class test
{
    public String MyString
    {
        get
        {
            return s;
        }

        set
        {
            s = value;
        }
    }

    private String s = "World"; 
}

class modifier
{
    public static string modify(String v)
    {
        return v + "_test";
    }
}

test c = new test();
c.MyString = modifier.modify(c.MyString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:51:54.490

如果您不喜欢 Matthew Watson 的回答并且您想坚持自己的方法，那么可以使用 StringBuilder。这是一个可以在不创建新值的情况下更改其值的字符串！

我的意思是：
普通字符串的值无法更改，正在发生的事情是正在创建一个新字符串......并且指针（指向您要更改其值的字符串）从现在开始指向这个新字符串. 所有其他指针......“指向”旧字符串......仍然指向......旧字符串！（字符串的值没有改变！）
我不确定这是否足够清楚，但你如果你想玩 Strings，就必须明白这一点。这正是 s1 不能改变它的值的原因。

解决方法是使用 StringBuilder：

```
 class test
{
    public StringBuilder get() { return  s; }
    private StringBuilder s = new StringBuilder("World");
}

class modifier
{
    public static void modify(StringBuilder v)
    {
        v.Append("_test");
    }
} 
```

还有一些测试代码：（当然，所有这些都伴随着处理成本......但我认为现在这不是问题）

```
 StringBuilder s1 = new StringBuilder("Earth");

        System.Diagnostics.Debug.WriteLine("earth is {0}", s1);
        modifier.modify(s1); //<-------- OK
        System.Diagnostics.Debug.WriteLine("earth is {0}",s1);

        test c=new test();
        StringBuilder aa=c.get();
        System.Diagnostics.Debug.WriteLine("earth is {0}", aa);
        modifier.modify(aa); //<------- Error(not anymore)
        System.Diagnostics.Debug.WriteLine("earth is {0}", c.get()); 
```

在使用代码之前，请尝试了解 String 和 StringBuilder 的工作原理

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T14:17:33.623

您必须创建一个临时变量：

```
string tmp = c.get();
modifier.modify(ref tmp); 
```

因为您通过引用传递参数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T14:29:14.163

该类`test`的设计使其字段`s`不能从类外部重新分配（更改为指向新对象）。那是因为`s`is `private`，并且该`get()`方法只*返回* `s`，因此不能重新分配它。

要么更改类`test`以允许外部世界以`s`某种方式重新分配，要么使用反射从外部访问`private`字段。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T14:49:43.910

您可以将属性与*get/set-eccessor 一起使用*，然后传递给`modify()`a`test`对象：

```
class test
{
    public String myString 
    { 
         get { return s; } 
         set { s = value; } 
    }

    private String s="World";
}

class modifier
{
    public static void modify(test myTest)
    {
        myTest.myString += "_test";
    } 
} 
```

* * *

```
test c = new test();
modifier.modify(c);

Console.WriteLine(c.myString); //World_test 
```

# javascript - 如何动态改变滚动阴影？

> ID：14563983
> 
> 赞同：0
> 
> 时间：2013-01-28T14:16:32.187
> 
> 标签：javascript, scroll, shadow

如何在向下滚动时动态更改固定标题下的阴影不透明度级别？

我找到了许多关于如何在向下滚动时立即添加阴影的解决方案。但是如何一步步改变它，所以它看起来慢慢淡入淡出。

这是示例 -[动态阴影](http://thisisluckyme.com/) 如您所见，如果您向下滚动一小步，阴影会慢慢出现。我认为他们正在改变不透明度水平。我发现 Google 在帐户设置中使用与更改不透明度级别相同的效果。

我有[我的解决方案](http://codepen.io/alexlime/pen/vDujF)，但阴影会立即出现，所以它不是我想要创建的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:24:20.957

你需要做的就是改变

```
$('#top-shadow).show(); 
```

到

```
$("#top-shadow").css({'display':'block', 'opacity':y/10}); 
```

# python - Python KeyError：使用字典和函数时为 0

> ID：14563985
> 
> 赞同：1
> 
> 时间：2013-01-28T14:16:33.040
> 
> 标签：python

我是 Python 新手，所以我的问题对某些人来说似乎很容易，但我又一次陷入困境，所以我需要你的帮助！这是我遇到问题的代码：

```
def identify_language(sequence, **common_words):
    result = {}
    for i in common_words:            
        result[i] = 0
    for i in func_op(sequence.lower()):
        for j in common_words:
            if i in common_words[j]:
                result[j] += 1
    return sort(result[0][0])

...

dictionary = {'cro':list_cro, 'eng':list_cro}
language = identify_language('I had a little lamb. It was called Billy.', **dictionary) 
```

我正在尝试根据`list_cro`和`list_eng`（希望是其他人）中的样本来识别语言。我越来越`KeyError: 0`。此外，`sort`并且`func_op`工作正常，我分别进行了测试。可能是什么问题？

此外，如果我更改函数中参数的顺序（将列表作为第一个参数，将字符串作为第二个参数），我会收到语法错误。感谢收听！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T14:29:09.397

在函数的末尾，`result`应该如下所示：`{'cro': X, 'eng': Y}`，其中 X 和 Y 是数字。我不知道你的字典是什么，所以我猜不出数字是什么。评估`result['eng']`将产生一个数字，就像 一样`result['cro']`，但在这本字典中没有`0`键。

此外，第二次索引操作也会给您带来问题。`result['eng'][0]`会给你一个错误，因为`result['eng']`它是一个数字，你不能索引一个数字。

你期望这个函数的输出是什么样的？在哪里`sort`定义，它应该做什么？

# r - 强制 R 停止绘制缩写轴标签 - 例如 ggplot2 中的 1e+00

> ID：14563989
> 
> 赞同：140
> 
> 时间：2013-01-28T14:17:04.177
> 
> 标签：r, graph, ggplot2, axes

在 ggplot2 中，如何停止轴标签被缩写 - 例如`1e+00, 1e+01`一旦绘制沿 x 轴？理想情况下，我想强制 R 显示在这种情况下为`1,10`.

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2013-01-28T14:23:29.820

我想你正在寻找这个：

```
require(ggplot2)
df <- data.frame(x=seq(1, 1e9, length.out=100), y=sample(100))
# displays x-axis in scientific notation
p  <- ggplot(data = df, aes(x=x, y=y)) + geom_line() + geom_point()
p

# displays as you require
require(scales)
p + scale_x_continuous(labels = comma) 
```

* * *

## 回答 #2

> 赞同：84
> 
> 时间：2013-01-28T14:19:27.480

您是否尝试过类似的方法：

```
options(scipen=10000) 
```

在绘图之前？

* * *

## 回答 #3

> 赞同：50
> 
> 时间：2017-03-16T16:59:14.113

只是对@Arun 所做的更新，因为我今天尝试了它，但它不起作用，因为它被实现为

```
+ scale_x_continuous(labels = scales::comma) 
```

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2017-11-28T17:34:11.847

作为更通用的解决方案，您可以使用`scales::format_format`删除科学记数法。这也使您可以控制标签的精确显示方式，而不是`scales::comma`仅使用数量级的逗号分隔。

例如：

```
require(ggplot2)
require(scales)
df <- data.frame(x=seq(1, 1e9, length.out=100), y=sample(100))

# Here we define spaces as the big separator
point <- format_format(big.mark = " ", decimal.mark = ",", scientific = FALSE)

# Plot it
p  <- ggplot(data = df, aes(x=x, y=y)) + geom_line() + geom_point()
p + scale_x_continuous(labels = point) 
```

* * *

## 回答 #5

> 赞同：13
> 
> 时间：2019-11-16T18:07:15.923

有一个不需要 scales 库的解决方案。

你可以试试：

```
# To deactivate scientific notation on y-axis:

    p + scale_y_continuous(labels = function(x) format(x, scientific = FALSE))

# To activate scientific notation on y-axis:

    p + scale_y_continuous(labels = function(x) format(x, scientific = TRUE))

# To deactivate scientific notation on x-axis:

    p + scale_x_continuous(labels = function(x) format(x, scientific = FALSE))

# To activate scientific notation on x-axis:

    p + scale_x_continuous(labels = function(x) format(x, scientific = TRUE)) 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2020-01-19T13:45:44.567

扩展原始问题以包含分数，即 1、0.1、0.01、0.001 等，并避免尾随零

```
p + scale_x_continuous(labels = function(x) sprintf("%g", x)) 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2020-03-21T10:04:34.767

将 R 用于科学记数法的惩罚设置得更高的最简单的通用解决方案不是吗？

即设置`scipen()`为您感到满意的数字。

例如，如果图表上的轴最大值可能为 100 000，则设置`scipen(200000)`将确保 R（和 ggplot）将对所有低于 200000 的数字使用标准符号，并且不需要向 ggplot 函数添加任何行。

# jquery-ui - tag-it 的自动对焦功能

> ID：14563991
> 
> 赞同：3
> 
> 时间：2013-01-28T14:17:11.403
> 
> 标签：jquery-ui, list, menu, autofocus

[在来自https://github.com/aehlke/tag-it](https://github.com/aehlke/tag-it)的插件 tag-it （演示 - [http://aehlke.github.com/tag-it/examples.html](http://aehlke.github.com/tag-it/examples.html)）中，如何添加自动对焦（即，如果设置为 true，则显示菜单时第一项将自动聚焦） jquery - tag-it.js 中的功能？

编辑：该功能还应该能够在按下“回车键”时输入或使建议出现在输入框中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T19:22:20.393

通过在 tag-it.js 文件中进行以下一些操作，我能够解决输入自动聚焦建议的问题：

在第 113 行定义了一个变量，用于接收重点建议的值`var that = this;`：

```
var that = this;
var focuse; 
```

在第 279 行和函数 - 上或之后`this.tagInput.keydown(function(event) {})`，必须添加以下内容：

```
.on( "autocompletefocus", function( event, ui ) {

focuse = ui.item.value;

}) 
```

然后最后在函数内`this.tagInput.keydown(function(event) {})`，替换`that.createTag(that._cleanedInput());`为：

```
if (focuse !== '' && event.which === $.ui.keyCode.ENTER)
{
that.createTag(focuse);
focuse = '';
}
else
{
that.createTag(that._cleanedInput());
} 
```

要启用自动对焦，请`autocomplete: {autoFocus: true}`在调用 tagit 插件的文件中添加自动完成 ( ) 选项：

```
$("#tags").tagit({
availableTags : availableTags,
autocomplete: {autoFocus: true}
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T10:45:36.743

这是一个例子：http: [//jsfiddle.net/UQTY2/8/](http://jsfiddle.net/UQTY2/8/)

我希望这是你所期待的

```
$(document).ready(function(){

var availableTags = [
  "ActionScript",
  "AppleScript",
  "Asp",
  "BASIC",
  "C",
  "C++",
  "Clojure",
  "COBOL",
  "ColdFusion",
  "Erlang",
  "Fortran",
  "Groovy",
  "Haskell",
  "Java",
  "JavaScript",
  "Lisp",
  "Perl",
  "PHP",
  "Python",
  "Ruby",
  "Scala",
  "Scheme"
];

$("#tags").tagit({
    availableTags : availableTags,
    showAutocompleteOnFocus : true,
    autocomplete: {delay: 0, minLength: 0, autoFocus: true},
});
}); 
```

# javascript - jquery中的撤消功能

> ID：14563992
> 
> 赞同：-2
> 
> 时间：2013-01-28T14:17:12.797
> 
> 标签：javascript, jquery, html

有没有办法在 jQuery 中“撤消”函数？让我解释一下.. 我有一个函数可以准确地重新创建 select html 标记。如您所知，使用选择标签，单击列表项选择该项目，当单击选择标签外部时，整个下拉列表将关闭。选择工作正常，但关闭不是。我虽然这适用于`event.stopPropagation()`事件对象，但它没有。有没有其他解决方案？

演示：http: [//jsfiddle.net/cmAtc/](http://jsfiddle.net/cmAtc/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:22:55.480

没有什么能像你所要求的那样原生地内置在 jQuery 中。你必须自己做。

我的建议是绑定到文档：

```
$(document).on('click', function () {
    $(".dropdownlist li").parent().children(":not(.selected)").hide();
}); 
```

当您单击列表时，您已经拥有`stopPropagation`可以防止触发此事件的方法。

[http://jsfiddle.net/cmAtc/1/](http://jsfiddle.net/cmAtc/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T14:41:02.437

JavaScript：

```
$('.list .item').click(function(event) {
    event.stopPropagation();
    var item = $(this);
    var list = item.parent();
    var items = list.children();
    if (list.data("closed")) {
        closeAll();
        list.data("closed", false);
        items.show();   
    } else {
        list.data("closed", true);
        items.removeClass("selected");   
        item.addClass("selected");
        items.not(".selected").hide();
    }
});

$(document).click(function() {
    closeAll();
});

function closeAll() {
    $(".list .item:not(.selected)").hide();
    $(".list").data("closed", true);
} 
```

HTML：

```
<ul class="list" data-closed="true">
    <li class="item selected" style="display:list-item;">Item 1</li>
    <li class="item" style="display: none;">Item 2</li>
    <li class="item" style="display: none;">Item 3</li>
</ul>
<ul class="list" data-closed="true">
    <li class="item selected" style="display:list-item;">Item 1</li>
    <li class="item" style="display: none;">Item 2</li>
    <li class="item" style="display: none;">Item 3</li>
</ul> 
```

CSS：

```
.list {list-style: none; border: 1px solid red; width: 200px; margin-bottom: 20px;}
.item {display: none; cursor: pointer;}
.item:hover {background: yellow;}
.item.selected {background: green;} 
```

演示：http: [//jsfiddle.net/MZhyx/4/](http://jsfiddle.net/MZhyx/4/)

# symfony - 传递 ID 的更好方法

> ID：14563993
> 
> 赞同：0
> 
> 时间：2013-01-28T14:17:22.510
> 
> 标签：symfony

我对我的应用程序有疑问或担忧。经验告诉我，留下任何可能的方式来维护我的代码是非常非常糟糕的。所以现在，我有一个添加用户意见的表格。它有

*   一个文本字段`textarea`
*   一个 user_id 字段`input type="hidden"`
*   game_id 字段 `input type="hidden"`

现在我担心的是，用户可能想查看代码并找到这些字段。许多浏览器允许操作 HTML（我们可以从 Chrome 更改类等）。所以换成`value="1"`对`value="2"`他们来说不是问题。

我的问题是 - Symfony2 中避免此类问题和风险的最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T14:31:35.053

您可以在控制器中获取它们，而不是从表单中获取用户和游戏 ID，控制器无论如何都会处理帖子并在那里处理这两个值。

```
$user = $this->get('security.context')->getToken()->getUser();
$userId = $user->getId();
$gameId = $user->getGame()->getId(); 
```

是获取当前所需值的一种可能方式（当然取决于您的游戏 id 来自哪里）

编辑：

如果用户与多个游戏相关联，您可以像最初一样交出 gameId 并通过依赖注入将其直接投射到游戏类：

```
public function exampleAction(Game $gameId) {
    $user = $this->get('security.context')->getToken()->getUser();

    if($user->getGames()->contains($gameId) {
     return true;
    }
} 
```