# StackOverflow 问答 15911000-15911999

# r - R: splom()--> 如何删除默认的 x-lab 标题？

> ID：15911001
> 
> 赞同：0
> 
> 时间：2013-04-09T19:39:00.243
> 
> 标签：r, plot, scatter-plot

每当我使用 R 中的函数“splom”绘制三个变量的散点图时，绘图窗口中的图形会显示该图，但底部的标题为“散点图矩阵”。

我怎么能删除这个标题，因为我只想要一个标题在顶部？

在这里我插入代码：

```
splom(~example, 
      panel = function(x,y) {
        panel.xyplot(x,y)
        lm <- lm(y~x)
        panel.ablineq(reg=lm, r.squared = TRUE, rotate=TRUE, col.line="red") 
```

提前谢谢你和最好的问候！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:07:18.223

只需添加`xlab = NULL`到您的`splom`.

# facebook - 应用程序未注册移动安装

> ID：15911004
> 
> 赞同：1
> 
> 时间：2013-04-09T19:39:14.763
> 
> 标签：facebook, ads

我正在尝试设置 Facebook 移动安装广告。我的应用程序不会出于任何其他原因使用 facebook。

这是我到目前为止所做的：

1.  设置/添加 facebook sdk
2.  在 appdelegate 中：

`#import <FacebookSDK/FacebookSDK.h>`

并在应用程序中完成启动...

`[FBSettings publishInstall:[FBSession defaultAppID]];`

3.创建一个facebook应用程序作为iOS原生应用程序

我的 facebook 应用程序没有从我在我的设备上完成的测试中注册任何 facebook 应用程序安装。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-17T20:19:28.047

这只是一种预感，但您可能必须允许您的应用获得 Facebook 权限。如果您曾经尝试过 Friendcaster、Fast for Facebook、Seesmic 或其他替代 FB 应用程序，您会看到您必须授予应用程序访问您的 Facebook 帐户的权限。似乎开发者在 Facebook 上有一个应用程序，就像一个游戏一样。该内部 Facebook 应用程序被授予访问该帐户的权限，然后 FB 客户端通过该应用程序访问该帐户。就像我说的，这只是一种预感，但它是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T03:13:57.173

原来我忽略了包括安全框架。它没有弹出任何错误，但最终这就是问题所在。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-05T09:09:48.053

它*很*可能有效。有一个“技巧”可以看到您的应用程序正在运行。

是的，您可以在模拟器或您的设备上测试“应用安装”……但是……您可能在 Facebook 仪表板上看不到它们。

相反，首先转到应用仪表板左侧菜单中的 INSIGHTS 选项卡。您可能会在此处看到应用安装 - 但您可能不会。

其次，如果您没有看到任何应用安装的实时数据，请查看名为“应用启动”的部分。这可以用作您的应用程序正在运行的替代指标。

第三，如果您没有看到“应用启动”的实时数据，请查看日期范围。更改日期范围以扩展到明天的日期。给 Facebook 1-2 分钟的时间来更新您的数据。此时，您现在可以看到正在发生实时应用程序启动 - 因此您将知道您与 FB 的连接正在工作。

# ios - 是否有相当于 IFNULL 的 Objective-C？

> ID：15911006
> 
> 赞同：1
> 
> 时间：2013-04-09T19:39:18.487
> 
> 标签：ios, objective-c

考虑以下代码行的代码：

`NSNumber *someNumber = (someOtherNumber) ? someOtherNumber : [NSNumber numberWithInt: 0];`

基本上，它说如果`someOtherNumber`不为空，则使用它，否则，使用 0。我觉得应该有更好的方法来做到这一点。SQL / SQLite 有一个方便的函数调用`IFNULL`，这将使这更简单。如果它存在，它将使代码看起来像：

`NSNumber *someNumber = IFNULL(someOtherNumber, [NSNumber numberWithInt: 0]);`

在objective-c中是否存在这样的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T19:40:57.830

Objective-C 中提供了对三元运算符的 GNU 扩展。

您可以使用

```
NSNumber *someNumber = (someOtherNumber) ?: [NSNumber numberWithInt: 0]; 
```

结果将被赋值为`someOtherNumber`if 它不同于`0`或`[NSNumber numberWithInt: 0]`if`someOtherNumber`等于`0`（注意`nil`,`NULL`和`Nil`都是 的形式`0`）。

为了额外的快乐，你可以减少你的`[NSNumber numberWithInt:0]`表情`@0`。[从LLVM 3.3](http://clang.llvm.org/docs/ObjectiveCLiterals.html)开始就可以使用此功能。

**编辑**

更准确地说，现代版本的 LLVM 和 GCC 支持这一点，但它**不**符合[ANSI C 规范](http://eli-project.sourceforge.net/c_html/c.html)。也就是说，您可以继续使用它，因为您很可能使用现代版本的 GCC 或 LLVM 编译它。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T19:42:09.703

条件表达式有一个收缩：

```
NSNumber *someNumber = someOtherNumber ?: [NSNumber numberWithInt: 0]; 
```

并使用现代 Obj-C，您可以进一步减少：

```
NSNumber *someNumber = someOtherNumber ?: @0; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:41:44.007

```
#define IFNULL(compare, value) (compare) ?: (value) 
```

应该做的伎俩，可以像在mysql中一样使用。

```
NSNumber *foo = IFNULL(someNumber, @0); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T19:41:53.793

你可以这样定义：

```
#define IFNULL(someOtherNumber) (someOtherNumber) ? someOtherNumber : [NSNumber numberWithInt:0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T19:42:04.750

您可以稍微缩短语法： foo ?: bar，如果 foo 不为零，则评估为 foo，否则为 bar。

# php - CakePHP 电子邮件无法发送

> ID：15911007
> 
> 赞同：1
> 
> 时间：2013-04-09T19:39:20.963
> 
> 标签：php, email, cakephp

我刚从一个测试环境转移到一个新的 Webhost，现在我的应用程序在我尝试发送邮件时抛出错误。我正在使用 CakePHP 和 CakeMail 函数来发送这封电子邮件。

这是错误消息的最后一部分：

```
Could not send email.
Error: An Internal Error Has Occurred.

Stack Trace
CORE/Cake/Network/Email/MailTransport.php line 46 → MailTransport->_mail(string, string, string, string, null)
CORE/Cake/Network/Email/CakeEmail.php line 1065 → MailTransport->send(CakeEmail)
APP/Controller/UsersController.php line 204 → CakeEmail->send(string)
[internal function] → UsersController->add() 
```

暂时，您可以通过在此网页上注册（只需放入任何内容，我不介意）来重现错误：http: [//eevent.ch/index.php/users/add](http://eevent.ch/index.php/users/add)

我的代码如下所示：

```
$emailstring = 'emailstring';
$Email = new CakeEmail();
$Email->emailFormat('both');
$Email->from(array('info@eevent.ch' => 'info'));
$Email->to(array( username => usermail));
$Email->subject(__('Registrierung auf Eevent.ch'));
$Email->send($emailstring); 
```

我假设我的代码是正确的，因为它在测试服务器上运行良好。

通过在 StackOverflow 上搜索此错误，我检查了一些事情。我用一个数组设置了 $email->from。我检查了我的 phpinfo，它确实包括 sendmail_from me@localhost.com me@localhost.com sendmail_path /usr/sbin/sendmail -t -i /usr/sbin/sendmail -t -i

我是否有可能没有设置标题会产生错误？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:32:57.983

在这一行

```
$Email->to(array( username => usermail)); 
```

应该有字符串或变量传递给数组。像这儿：

```
$Email->to(array( 'username' => $usermail)); 
```

您是否在 /app/config/mail.php 中配置了 email.php ？

# jquery - 将 div 替换为另一个时出错

> ID：15911011
> 
> 赞同：0
> 
> 时间：2013-04-09T19:39:38.310
> 
> 标签：jquery

我正在尝试实现取消功能，以便如果用户进行编辑并单击“取消”按钮，页面将恢复为原始文本。

现在，我有以下 javascript：

```
(function($) {
   originalStepOrder = $('#org');
});

$(document).ready(function(){
$('.reorderCancel').click(function(){
    $('#org').replaceWith(originalStepOrder);
    console.log($('#org')==originalStepOrder);
});
} 
```

但是，当我单击 reorderCancel 按钮时，它会在控制台中显示为“false”，并且我的“org” div 不会被其原始内容替换。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:43:18.193

该变量赋值只是将变量指向对象。当对象发生变化时，变量的值也随之变化。您将需要制作一个实际的副本。您可以使用[`.clone()`](http://api.jquery.com/clone/)：

```
originalStepOrder = $('#org').clone(); 
```

对于 jQuery 对象的相等性测试，您应该使用[`.is()`](http://api.jquery.com/is/)：

```
$('#org').is(originalStepOrder); 
```

# legacy - 需要帮助反编译未知应用程序

> ID：15911012
> 
> 赞同：0
> 
> 时间：2013-04-09T19:40:01.333
> 
> 标签：legacy, decompiler

我正在尝试重建一个非常旧的应用程序。程序文件夹有大约 74 个文件。我没有关于它是如何建造的信息。并且该应用程序无法在 Windows 7 或 XP 上运行。我想弄清楚两件事。

1.  可能使用什么语言来编码
2.  是否可以反编译文件？如果是这样，什么工具可以做到这一点？

这是文件夹中文件类型的列表，以及它们的数量。我希望这些扩展将允许有人告诉我使用的是什么语言，并可能建议使用反编译器从它们中获取一些信息。

*   .EXE x1
*   .DAT x1
*   没有分机 x1
*   .K x19
*   .M x19
*   .COM x2
*   .OVL x4
*   .RUN x25
*   .BAT x1

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-06T14:51:33.103

带有 OVL 的 COM 文件是为 DOS 编写的 8 位或 16 位二进制文​​件。OVL 是覆盖。BAT 是一个批处理文件。DAT 可能是一个数据文件。[TrID](http://mark0.net/soft-trid-e.html)工具可能有助于确定文件实际包含的内容，尽管文件的时代可能会减轻识别的难度。

另一个角度是使用十六进制编辑器（如[HxD](http://mh-nexus.de/en/hxd/)）查看文件的前 128 个字节左右，因为这通常有助于文件识别。如果您可以在此处发布该数据，请继续。否则，请给我发电子邮件（布鲁斯 dot axtens at gmail dot com），我会看看。

# python - 如何制作更小的临时文件？

> ID：15911013
> 
> 赞同：1
> 
> 时间：2013-04-09T19:40:05.263
> 
> 标签：python, temporary-files

所以我正在编写这个程序来创建曼德布罗集的图片，并且我一直在逐步改进它。现在，产生的每个进程都会将一些数据写入一个临时文件，稍后将使用该文件将图片放在一起。然而，现在临时文件比实际图片本身大很多，我对如何使它们更小没有任何想法。如何有效地将整数数据写入文件并将其取回？我打算最终使它非常可扩展，因此我需要能够为像素索引编写任意长的整数，但颜色数据始终是最大值为 255 的三个整数。这是我的代码：

```
import multiprocessing

def pixproc(y0, yn, xsteps, ysteps, fname):
    XMIN, YMIN = -2., -1.
    XLEN, YLEN = 3, 2
    with open(fname, 'w') as f:
        for y in xrange(y0, yn):
            print y
            for x in xrange(xsteps):
                c=complex(XMIN + XLEN*(1.*x/xsteps),
                          YMIN + YLEN*(1.*y/ysteps))
                k=c
                for i in xrange(256):
                    k = k*k + c
                    if abs(k)>2: break
                if 0<i<32:
                    #print 'Success!', i
                    print >>f, x, y, 8*i, 0, 0 #This is that part of
                if 32<=i<255:                  #my code that I am trying
                    #print 'Success!', i       #to improve. The rest of 
                    print >>f, x, y, 255, i, i #the code is given for context
    return                                     #and isn't relevant to my question

def main(xsteps, ysteps):
    pool = multiprocessing.Pool()
    n = multiprocessing.cpu_count()
    step = height / n
    fnames = ["temp" + str(i) for i in xrange(n)]
    for i in xrange(n):
        pool.apply_async(pixproc, 
                         (step*i, 
                          step*(i+1), 
                          xsteps, 
                          ysteps, 
                          fnames[i]))
    pool.close()
    pool.join()
    return fnames

if __name__=="__main__":
    from PIL import Image
    import sys
    width, height = map(int, sys.argv[1:])
    picname = "mandelbrot1.png"
    fnames = main(width, height)
    im = Image.new("RGB", (width, height))
    pp = im.load()
    for name in fnames:
        with open(name) as f:
            for line in f:
                line = map(int, line.rstrip('\n').split(' '))
                pp[line[0], line[1]] = line[2], line[3], line[4]
    im.save(picname) 
```

当我尝试制作 3000x2000 的图片时，实际图片为 672 KB，但临时文件都接近 30 MB！有人可以建议一种将数据存储在文件中的更好方法吗？（重要的部分在函数 pixproc 中）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:55:26.430

假设您只是想消除对临时数据使用基于文本的格式而不是二进制格式的开销，并且您不想重写所有内容以使用 numpy，则有几种不同的解决方案：

* * *

首先，您可以首先将数据保存为二进制格式：[`mmap`](http://docs.python.org/2/library/mmap.html)文件，并将[`ctypes`](http://docs.python.org/2/library/ctypes.html)其视为某种巨大的记录。这通常比它的价值更麻烦，但值得一提。

假设您的数据只不过是一长串 5 字节的元组：

```
class Entry(ctypes.Structure):
    _fields_ = [("x", ctypes.c_uint8), ("y", ctypes.c_uint8),
                ("i", ctypes.c_uint8), ("j", ctypes.c_uint8), ("k", ctypes.c_uint8)]
Entries = ctypes.POINTER(Entry)
with open(fname, 'wb') as f:
    f.truncate(ctypes.sizeof(Entry * (yn - y0)))
    m = mmap.mmap(f.fileno(), access=mmap.ACCESS_WRITE) 
```

* * *

其次，您可以使用[`struct`](http://docs.python.org/2/library/struct.html). 您必须阅读文档以获取完整的详细信息，但我将举一个例子。让我们采取这一行：

```
print >>f, x, y, 8*i, 0, 0 
```

现在，让我们假设所有 5 个都保证是字节（0-255）。你可以这样做：

```
f.write(struct.pack('BBBBB', x, y, 8*i, 0, 0)) 
```

稍后再阅读它们：

```
x, y, i8, 0, 0 = struct.unpack('BBBBB', f.read(struct.calcsize('BBBBB')))
i = i8//8 
```

如果它们中的任何一个需要长于一个字节，则需要处理字节顺序，但这很简单。例如，如果`x`和`y`范围从 -32768 到 32767：

```
f.write(struct.pack('>hhBBB', x, y, 8*i, 0, 0)) 
```

并确保以二进制模式打开文件。

如果需要，您当然可以将其与它结合使用`mmap`，这意味着您可以只使用`struct.pack_into`and`struct.unpack_from`而不是显式使用`pack`plus`write`和`unpack`plus `read`。

* * *

接下来，有[`pickle`](http://docs.python.org/2/library/pickle.html). 要么直接创建你的列表，要么直接创建列表`pickle.dump`，或者手动`pickle.dumps`每个条目并在其上方添加一些简单的更高级别的结构（或者只使用[`shelve`](http://docs.python.org/2/library/shelve.html)，如果更高级别的结构是或可能是从键到条目的简单映射）。这可能更大而不是更小，并且可能更慢，因此您总是希望在考虑这一点之前进行一些测试。但有时这是一个简单的解决方案。

* * *

最后，您可能会想出一种更紧凑的文本格式，而不仅仅是打印`str`每个对象的表示。这通常不值得付出努力，但同样值得考虑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T19:43:12.667

您可以使用该[`struct`](http://docs.python.org/2/library/struct.html)模块以二进制格式写入数据：

```
print >>f, struct.pack('@IIBBB', x, y, 8*i, 0, 0)
print >>f, struct.pack('@IIBBB', x, y, 255, i, i) 
```

您可以使用[`bz2.BZ2File`](http://docs.python.org/2/library/bz2.html#bz2.BZ2File)该类编写压缩文件：

```
 with bz2.BZ2File(fname, 'w') as f:
      ... 
```

你甚至可以把这两个结合起来......

# angularjs - 从控制器观察服务中的值

> ID：15911014
> 
> 赞同：18
> 
> 时间：2013-04-09T19:40:09.287
> 
> 标签：angularjs

我创建了一个服务来隔离业务逻辑，并将其注入到需要信息的控制器中。我最终想要做的是让控制器能够观察服务中的值，这样我就不必进行广播/通知或复杂的消息传递解决方案来通知所有控制器数据的变化服务。

我创建了一个 plnkr，展示了我正在尝试做的基本想法。

[http://plnkr.co/edit/oL6AhHq2BBeGCLhAHX0K?p=preview](http://plnkr.co/edit/oL6AhHq2BBeGCLhAHX0K?p=preview)

是否可以让控制器监视服务的值？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-04-09T20:25:58.113

你已经做对了。即将服务推入范围变量，然后将服务作为范围变量的一部分进行观察。

这是适合您的工作解决方案：

[http://plnkr.co/edit/SgA0ztPVPxTkA0wfS1HU?p=preview](http://plnkr.co/edit/SgA0ztPVPxTkA0wfS1HU?p=preview)

HTML

```
<!doctype html>
<html ng-app="plunker" >
<head>
  <meta charset="utf-8">
  <title>AngularJS Plunker</title>
  <script>document.write('<base href="' + document.location + '" />');</script>
  <link rel="stylesheet" href="style.css">
  <script src="http://code.angularjs.org/1.1.3/angular.js"></script>
  <script src="app.js"></script>
</head>
<body ng-controller="MainCtrl">
  <button ng-click="start()">Start Count</button>
  <button ng-click="stop()">Stop Count</button>
  ControllerData: {{controllerData}}
</body>
</html> 
```

Javascript：

```
var app = angular.module('plunker', []);

app.service('myService', function($rootScope) {
  var data = 0;
  var id = 0;

  var increment = function() {
    data = data + 1;
    $rootScope.$apply();
    console.log("Incrementing data", data);
  };

  this.start = function() {
    id = setInterval(increment, 500) ;

  };

  this.stop = function() {
    clearInterval(id);
  };

  this.getData = function() { return data; };

}).controller('MainCtrl', function($scope, myService) {
  $scope.service = myService;
  $scope.controllerData = 0;

  $scope.start = function() {
    myService.start();
  };

  $scope.stop = function() {
    myService.stop();
  };

  $scope.$watch('service.getData()', function(newVal) {

    console.log("New Data", newVal);
    $scope.controllerData = newVal;
  });
}); 
```

以下是您错过的一些内容：

1.  $scope.$watch 中的变量顺序错误。它的 (newVal,oldVal) 而不是相反。
2.  由于您使用的是 setInterval ，这是一个异步操作，因此您必须让 Angular 知道事情发生了变化。这就是您需要 $rootScope.$apply 的原因。
3.  你不能 $watch 一个函数，但你可以观察函数返回的内容。

# asp.net - 如何分页gridView

> ID：15911015
> 
> 赞同：0
> 
> 时间：2013-04-09T19:40:10.803
> 
> 标签：asp.net

我有这个网格视图：

```
 <asp:GridView ID="GridViewCosts" runat="server"   CellPadding="4" ForeColor="#333333" GridLines="None" ShowFooter="True" ShowHeaderWhenEmpty="True" AutoGenerateColumns="False" OnRowDeleting="GridViewCosts_RowDeleting" Width="387px" OnSelectedIndexChanged="GridViewCosts_SelectedIndexChanged" AllowPaging="true" AllowSorting="true" 
PageSize="5" > 
```

但这给了我错误：`The data source does not support server-side data paging.`

在后面的代码中我有这样的东西：

```
GridViewCosts.DataSource = rdr;
Line 55:                    GridViewCosts.DataBind(); 
```

如何分页我没有数据源的gridView

**更新** 我修改我有这个

```
 <asp:GridView ID="GridViewCosts" runat="server"   CellPadding="4" 
        ForeColor="#333333" GridLines="None" ShowFooter="True" ShowHeaderWhenEmpty="True"
         AutoGenerateColumns="False" OnRowDeleting="GridViewCosts_RowDeleting" Width="387px"
         OnSelectedIndexChanged="GridViewCosts_SelectedIndexChanged" 
         OnPageIndexChanging="GridViewCosts_PageIndexChanging"

        PageSize="5" > 
```

在代码后面有这个：

```
 public void getViewProfit()
        {
            string connectionString = cs.getConnection();
            string query = "select Id ,name,value,Description,DateCreate from AllCostView where IdUser = '" + cui.getCurrentId() + "'";
            using (SqlConnection myConnection = new SqlConnection(connectionString))
            {
                myConnection.Open();
                SqlCommand command = new SqlCommand(query, myConnection);
                using (SqlDataReader rdr = command.ExecuteReader())
                {
                   GridViewCosts.DataSource = rdr;
                   GridViewCosts.DataBind();
                }

            }
        }

  protected void GridViewCosts_PageIndexChanging(object sender, GridViewPageEventArgs e)
        {
            GridViewCosts.PageIndex = e.NewPageIndex;
            getViewProfit();
        } 
```

没有错误了，但仍然不显示分页

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:45:12.873

如果您使用 datareader？是的，请使用 DataSet/DataTable 代替，因为 Datareader。由于 Datareader 不支持分页和排序功能，DataReader 从数据库中检索 ReadOnly 、 ForwardOnly 数据流。

而你错过了 gridview 的 pageindexChanging 属性，

见下文

```
<asp:GridView ID="GridViewCosts" runat="server"   CellPadding="4" ForeColor="#333333" GridLines="None" ShowFooter="True" ShowHeaderWhenEmpty="True" AutoGenerateColumns="False" OnRowDeleting="GridViewCosts_RowDeleting" Width="387px" OnSelectedIndexChanged="GridViewCosts_SelectedIndexChanged" AllowPaging="true" AllowSorting="true" 
PageSize="5" **OnPageIndexChanging="GridViewCosts_PageIndexChanging"**> 
```

后面的代码：

```
protected void GridViewCosts1_PageIndexChanging(object sender, GridViewPageEventArgs e)
{
    GridViewCosts.PageIndex = e.NewPageIndex;

    //rebind your gridview .    

} 
```

# c++ - 为什么我的程序在启动之前就崩溃了？

> ID：15911018
> 
> 赞同：2
> 
> 时间：2013-04-09T19:40:22.163
> 
> 标签：c++, c, windows, gdb, mingw

该程序由带有 -g 标志、-static-libgcc 和 -static-libstdc++ 的 g++ 编译。没有包括优化标志。但是由于某种原因，我无法进入主程序。为什么？

```
$ nm -C test.exe | grep 主要
006c05b0 T __getmainargs
006b0ad0 T __main
0088d0e8 B __mingw_winmain_hInstance
0088d0e4 B __mingw_winmain_lpCmdLine
0088d0ec B __mingw_winmain_nShowCmd
006ce518 D __native_dllmain_reason
00401180 t __tmainCRTStartup
0088edc8我_imp____getmainargs
007491c0 r jisx0213_to_ucs_main
00405f0c T 主
00401570 T mainCRTStartup
00884010 b 主网
004a3371 T sqlite3_backup_remaining
0078ada0 r uhc_1_2charset_main
0078c440 r uhc_1_2uni_main_page81
007899a0 r uhc_2_2charset_main
0078db00 r uhc_2_2uni_main_pagea1

$ gdb test.exe
GNU gdb (pcx32) 7.3.50.20111127-cvs
版权所有 (C) 2011 Free Software Foundation, Inc.
许可 GPLv3+：GNU GPL 版本 3 或更高版本
这是免费软件：您可以自由更改和重新分发它。
在法律允许的范围内，不提供任何保证。输入“显示复制”
和“显示保修”了解详情。
此 GDB 配置为“i686-w64-mingw32”。
有关错误报告说明，请参阅：
...
从 c:\test.exe 读取符号
...完毕。
(gdb) 中断主要
0x405f15 处的断点 1：文件 test.cpp，第 1054 行。
(gdb) 中断 mainCRTStartup
0x401570 处的断点 2
(gdb) 中断 __tmainCRTStartup
0x40118c 处的断点 3
(gdb) 中断 __main
0x6b0ad0 处的断点 4
(gdb) 中断 __getmainargs
0x6c05b0 处的断点 5
(gdb) 运行
启动程序：c:\test.exe
[新线程 5832.0xc0c]
在启动过程中，程序以代码 0xc0000022 退出。
(gdb)

```

PS dependency walker 显示它无法打开 SYSNTFY.DLL 并且找不到 IEFRAME.DLL。然而，这并不新鲜，也不应该成为问题。

```
(gdb) 信息文件
来自“c:\test.exe”的符号。
本地执行文件：
        `c:\test.exe',
        文件类型为 pei-i386。
        入口点：0x401570
        0x00401000 - 0x006c14c4 是 .text
        0x006c2000 - 0x006ce5d0 是 .data
        0x006cf000 - 0x0080c3e0 是 .rdata
        0x0080d000 - 0x00883c58 是 .eh_frame
        0x00884000 - 0x0088d178 是 .bss
        0x0088e000 - 0x00891d40 是 .idata
        0x00892000 - 0x00892038 是 .CRT
        0x00893000 - 0x00893020 是 .tls
(gdb) 中断 *0x401570
注意：断点 2 也设置在 pc 0x401570。
0x401570 处的断点 6
(gdb) 运行
启动程序：c:\test.exe
[新线程 5332.0x28b0]
在启动过程中，程序以代码 0xc0000022 退出。

```

这说明入口点确实是`__tmainCRTStartup`，但 gdb 似乎没有到达那里。

答案就像评论一样：图书馆把一切都搞砸了。为了弄清楚这一点，我一个一个地取消了每个库的链接，直到它设法进入主库。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T19:42:38.977

我怀疑您有一个引发 SIGSEGV 或其他错误的静态或全局变量初始化......所有静态和全局变量都在执行 main 之前初始化。

另外......我看到你正在运行 MinGW——你的路径是否正确设置到 MinGW bin 目录？当我构建 MinGW 应用程序（通过 Eclipse）时，我有一个启动器应用程序和两者都构建的应用程序。我必须使用启动器，除非我的 Windows 路径上有 MinGW bin 目录。

进一步阅读，值得注意的是，DLL 是在调用 mainCRTStartup 之前加载的。对于 Windoze 应用程序，您通常会中断 _DllMain 来处理它。我不确定在 MinGW 中如何/在哪里处理？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-24T13:14:52.653

我在使用 Cygwin 时遇到了同样的问题，我发现了一个*糟糕*的解决方案：为共享库授予可执行权限：

```
$ chmod a+x lib<name>.so.<ver> 
```

并且，还将选项 -m0755 添加到我的 $(INSTALL) 命令中。

# unmanaged - LNK2028 LNK2019 在托管函数中调用非托管函数时出错

> ID：15911021
> 
> 赞同：0
> 
> 时间：2013-04-09T19:40:35.663
> 
> 标签：unmanaged, managed-c++

我有一个非常简单的托管（CLI 互操作）函数调用一个非托管函数：

```
void ManagedZigBeeTransport::StartDiscovery(void)
{
    std::list<sDeviceEndPoint> devices = zbTransport->startDiscovery();
} 
```

其中 zbTransport 是一个未管理的对象。我在这个非托管对象中还有其他几个方法示例，它们在类似的托管包装器中调用，没有问题，它们都可以工作。但是，它们没有返回值。这个可以。

它让我感到恐惧

```
CppBridgeTransports.obj : error LNK2028: unresolved token (0A00033B) "public: class std::list<struct _sDeviceEndPoint,class std::allocator<struct _sDeviceEndPoint> > __thiscall ZBTransport::startDiscovery(void)" (?startDiscovery@ZBTransport@@$$FQAE?AV?$list@U_sDeviceEndPoint@@V?$allocator@U_sDeviceEndPoint@@@std@@@std@@XZ) referenced in function "public: void __clrcall CppBridge::ManagedZigBeeTransport::StartDiscovery(void)" (?StartDiscovery@ManagedZigBeeTransport@CppBridge@@$$FQ$AAMXXZ) 
```

其次是

```
CppBridgeTransports.obj : error LNK2019: unresolved external symbol "public: class std::list<struct _sDeviceEndPoint,class std::allocator<struct _sDeviceEndPoint> > __thiscall ZBTransport::startDiscovery(void)" (?startDiscovery@ZBTransport@@$$FQAE?AV?$list@U_sDeviceEndPoint@@V?$allocator@U_sDeviceEndPoint@@@std@@@std@@XZ) referenced in function "public: void __clrcall CppBridge::ManagedZigBeeTransport::StartDiscovery(void)" (?StartDiscovery@ManagedZigBeeTransport@CppBridge@@$$FQ$AAMXXZ) 
```

我无法应用我在这些运行的线程中看到的任何信息（一些非常简单，比如添加 std::list<> 头文件）。

非托管 sDeviceEndPoint 结构也在头文件中定义。想法是获取这个非托管 std::list<> 并使用它来加载托管 ArrayList()。但我什至无法通过这个简单的步骤。我不知道是什么导致了问题，std::list 或 sDeviceEndPoint 结构。后者成功地用于这个非托管到托管桥的其他部分。

有任何想法吗？

是由于我不理解的返回值中的名称修改约定吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:35:04.937

我尴尬得要死！我在托管代码和非托管代码之间测试了一系列简单的函数，从将简单的 int 返回到结构、结构向量和结构列表。甚至将这些字段作为参数传入。

他们都工作了。

我做错什么了？？？

我是个白痴，我忘记了我还没有实现最初的愚蠢功能。当然，我所有的测试都已实施！所以我原来的发现函数被声明但没有实现。啊！我整天都在这上面度过。

（我永远不会猜到这是错误消息的原因。）

也许这会拯救因相同原因而收到相同消息集的其他人。

# r - 稀疏矩阵作为 R 中层次聚类的输入

> ID：15911022
> 
> 赞同：3
> 
> 时间：2013-04-09T19:40:38.063
> 
> 标签：r, sparse-matrix

我有一个关于使用距离矩阵进行聚类的问题，但很稀疏。

是否存在不扩展矩阵并且可以与稀疏表示一起使用的稀疏距离对象格式？

目前我正在做以下事情

```
# read sparse matrix
sparse <- readMM('sparse-matrix')
distance <- as.dist(sparse) 
```

sparse-matrix 已经是正确的距离矩阵，它对于未连接的条目具有 NA。

```
>sparse
[1,] . . .
[2,] 1 . .
[3,] 1 . .

> as.dist(sparse)
1 2
2 1  
3 1 0 
```

但是用 as.dist 转换它失败了

> asMethod(object) 中的错误：不允许负长度向量

大概是因为它将矩阵扩展为完整的形式。矩阵 (NxN) 大小为 N = 49281 这种格式是需要的（dist 对象），例如 hclust 方法

[R帮助列表上](http://r.789695.n4.nabble.com/sparse-distance-object-td4634299.html)没有任何答案的类似问题

* * *

## 回答 #1

> 赞同：-5
> 
> 时间：2013-04-09T19:55:34.157

距离矩阵如何稀疏？每两个物体之间都有一个距离，所以它实际上是一个非常密集的矩阵。然而，三角矩阵足以描述相互距离（如**D** = **D** '）。这实际上是由 生成的对象的情况`dist`。

如果距离矩阵是稀疏的，因为很多对象都是相同的，那么您可能只想计算唯一对象的距离矩阵。

# asp.net-mvc - 带有操作参数的 ASP.NET MVC 路由问题

> ID：15911023
> 
> 赞同：1
> 
> 时间：2013-04-09T19:40:41.273
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-mvc-routing

我对 MVC4 还很陌生，我在获取自定义路线时遇到了问题。

我不想解释我的最终目标是什么，因为它相当复杂，但现在我只想要这个网址：

```
/Home/GetView/contacts/pv 
```

点击我的家庭控制器的 GetView 操作，并为其传递“contacts”和“pv”的参数`module`和`name`参数

```
public PartialViewResult GetView(string module, string name) 
```

不幸的是，当我设置断点时，这两个参数都是`null`.

这是我尝试使用的路线

```
routes.MapRoute(
    name: "PartialView",
    url: "{controller}/{action}/{module}/{name}"
); 
```

我也试过

```
routes.MapRoute(
    name: "PartialView",
    url: "Home/GetView/{module}/{name}",
    defaults: new { controller = "Home", action = "GetView" }
); 
```

根据我正在阅读的文档应该可以正常工作，所以我不确定我做错了什么。

# sql-server - 从 Excel 导入 SSIS 选择性列

> ID：15911025
> 
> 赞同：1
> 
> 时间：2013-04-09T19:40:51.307
> 
> 标签：sql-server, ssis

我正在使用具有 175 个不同 excel 模板的客户端来创建我需要导入 SQL 2008 R2 的工作表。有一个可取之处，模板中有 10 列是所有 175 列共有的，它们也是我需要导入到我的 SQL 表中的列。这是我的问题：如果我只将所有工作表共有的列映射到数据库表，SSIS 会忽略其他列还是需要以某种方式对这些额外的列做些什么？

我开发了一个模板供用户使用，但显然除了我正在执行的导入之外，他们还需要为其他应用程序提供这些其他列。

我当前的 SSIS 流程有一个准备 SQL 任务来创建 SQL 表，然后是一个映射 Excel 工作表列的数据流任务和一个获取映射列并更新表的导入任务。

我的猜测是，如果我只使用我需要的列创建表，调整 Excel 映射以仅选择表中可用的列，导入只会移动这些列，因此，我将拥有我需要的无论使用哪个模板。

有没有人做过这样的事情？这个过程是大约 6 个月的权宜之计，直到新系统可用，它将在两个系统之间共享此数据。

提前感谢任何输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T03:24:07.017

如果您可以使用 SQL 语句从 Excel 表/范围/工作表中进行选择，那么您应该能够通过仅选择所需的列来使表与 SSIS 一致。

但是，此 select 语句需要知道范围或工作表的名称，因此需要保持一致。

如果这是不可能的，我建议您创建一个脚本来打开 Excel 文件并删除所有不需要的列。如果一切都不正确或没有防御性地编写，本课程可能会崩溃。

# python - 在文本文件中查找包含特定字符且具有特定长度的单词

> ID：15911031
> 
> 赞同：1
> 
> 时间：2013-04-09T19:41:16.620
> 
> 标签：python, regex

我试图在一个长度为 7 个字母并包含字母 a、b、c、e 和 r 的文本文件中查找单词。到目前为止，我有这个：

```
import re

file = open("dictionary.txt","r")
text = file.readlines()
file.close()

keyword = re.compile(r'\w{7}')

for line in text:
    result = keyword.search (line)
    if result:
       print (result.group()) 
```

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:42:54.973

您不仅需要匹配单词字符，还需要匹配单词*边界*：

```
keyword = re.compile(r'\b\w{7}\b') 
```

锚点匹配单词的`\b`开头或结尾，将单词限制为*正好*7 个字符。

如果您逐行遍历文件而不是一次性将其全部读入内存，效率会更高：

```
import re

keyword = re.compile(r'\b\w{7}\b')

with open("dictionary.txt","r") as dictionary:    
    for line in dictionary:
        for result in keyword.findall(line):
            print(result) 
```

Using`keyword.findall()`为我们提供了在线上*所有*匹配项的列表。

要检查匹配项中是否至少包含一个必需的字符，我个人只会使用集合交集测试：

```
import re

keyword = re.compile(r'\b\w{7}\b')
required = set('abcer')

with open("dictionary.txt","r") as dictionary:    
    for line in dictionary:
        results = [required.intersection(word) for word in keyword.findall(line)]
        for result in results
            print(result) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:50:20.100

```
\b(?=\w{0,6}?[abcer])\w{7}\b 
```

That's the regular expression you want. It works by using the basic form for a word of exactly seven letters (`\b\w{7}\b`) and adding a lookahead - a zero width assertion that looks forward and tries to find one of your required letters. A breakdown:

```
\b            A word boundary
(?=           Look ahead and find...
    \w        A word character (A-Za-z0-9_)
    {0,6}     Repeated 0 to 6 times
    ?         Lazily (not necessary, but marginally more efficient).
    [abcer]   Followed by one of a, b, c, e, or r
)             Go back to where we were before (just after the word boundary
\w            And match a word character
{7}           Exactly seven times.
\b            Then one more word Boundary. 
```

# javascript - 通过链接的 AJAX 请求

> ID：15911036
> 
> 赞同：1
> 
> 时间：2013-04-09T19:41:33.313
> 
> 标签：javascript, jquery, html, ajax

我正在尝试为我的网站上的评论创建一个删除链接，类似于通过 twitter 设置的方式。所以你永远不必离开页面，保存评论的 div 就会消失。我知道我必须通过 AJAX 来做到这一点，我仍在学习中。到目前为止，这是我设置的，但是每次单击链接时，都没有任何反应。

```
$(document).ready(function() {
    $('.delete_post').click(function () {                       
        var id = $(this).attr('id');
        var data = 'id=' + id.val() + '&submit=yes';
        alert(id);
        //start the ajax
        $.ajax({
            url: "<?php echo $url; ?>/process_form/delete_post.php",    
            type: "GET",        
            data: data,        
            cache: false,
            success: function (html) {                
                if (html==1) {  
                    document.getElementById(id).style.display = 'none';                 
                } 
                else {
                    alert("Post was not deleted");
                }              
            }        
        });
        return false;
    });
}); 

<a href="#" class="delete_post" id="dp<?php echo $comment["id"]; ?>">Delete</a> 
```

你们能就如何使这项工作提供一些建议吗？非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:51:47.670

[`.attr()`](http://api.jquery.com/attr/)返回一个字符串。
将数据部分更改为此，它应该可以工作

```
var id = $(this).attr('id');
var data = 'id=' + id + '&submit=yes'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:52:28.843

Firebug 中的 Net 怎么样？你可以在那里得到你的帖子和输出。为什么不使用绝对网址？

```
url: "mysite.com/process_form/delete_post.php", 
```

# jira - Jira 自定义发布说明：Velocity if(..) 语句和宏的返回值

> ID：15911039
> 
> 赞同：0
> 
> 时间：2013-04-09T19:41:36.307
> 
> 标签：jira, velocity

我一直在尝试使用 Jira 的自定义发行说明功能，这需要编写自定义 .vm 文件。这是我第一次与 Velocity 合作，非常感谢您解决这个小问题：

我有一个简单的宏，它检查是否`$issue`有一个名为的自定义字段`For Release Notes`并获取其值。基于这个值，我希望 Velocity 要么输出问题摘要，要么跳过它。

问题是，即使宏返回`true`or `false`，我也无法让`if()`语句正确处理该值。

宏：

```
#macro(getForReleaseNotes $issue $customFieldManager)
    #set ($customFields = $customFieldManager.getCustomFieldObjects($issue.project.getLong("id"), $issue.issueType.getString("id")))
    #set( $retVal = "false" )
    #foreach($customField in $customFields)
        #if($customField.name.equals("For Release Notes"))
            #if($customField.getValue($issue)) #set( $retVal = "true" ) 
            #end
        #end
    #end
    $retVal
#end 
```

HTML：

```
#foreach ($issueType in $issueTypes)
    #if($issueType.issues.size() > 0)
        <h2>$textUtils.htmlEncode($issueType.name)</h2>
        <ul>
        #foreach ($issue in $issueType.issues)
            #set( $tester = "#getForReleaseNotes($issue $customFieldManager)" )
            #if($tester == "true")
                <li>[<a href='$requestContext.canonicalBaseUrl/browse/$issue.key'>$issue.key</a>] - $textUtils.htmlEncode($issue.summary)</li>
            #else 
                <li> Value for macro: #getForReleaseNotes($issue $customFieldManager), $tester </li>
            #end
        #end
    </ul>
    #end
#end 
```

我在`if()`, from `if( $tester.equals("getForReleaseNotes(..))" )`, to中尝试了许多组合`if( "getForReleaseNotes(..) )`。

现在，当问题没有此属性/属性设置`$retVal = false`为. 否则，宏同样会返回。问题只是让声明正确评估，因为到目前为止，它说我传递给它的所有内容都是，并且问题永远不会被打印出来。`$retVal = "false"``false``true``if(..)``false`

对此问题的任何帮助将不胜感激。谢谢阅读。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-25T14:33:03.057

我已经找到了解决这个问题的方法，但我不认为它是最有效的，因为它需要循环遍历问题列表两次。

第一个循环检查是否存在给定问题类型的问题，以及是否有任何问题被标记为“用于发行说明”。

如果第一个循环确实找到了标记为 For Release Notes 的问题，它会移动到第二个循环。然后第二个循环提取该问题类型中标记为 For Release Notes 的所有问题的详细信息。

注意：我添加了另一个名为“发行说明”的字段，因此用户可以更好地控制生成的发行说明中出现的内容。如果未设置该字段，则默认使用问题摘要。

```
#if($issueType.issues.size() > 0)
        #set($flag = "")
        #foreach ($issue in $issueType.issues)
            #set ($customFields = $customFieldManager.getCustomFieldObjects($issue.project.getLong("id"), $issue.issueType.getString("id")))
            #foreach($customField in $customFields)
                #if($customField.name.equals("For Release Notes"))
                    #if($customField.getValue($issue))

                        #if($flag==$textUtils.htmlEncode($issueType.name))

                        #else                       
                            <h2>$textUtils.htmlEncode($issueType.name)</h2>
                            #set($flag = $textUtils.htmlEncode($issueType.name))
                        #end

                    #end
                #end
            #end
        #end

        ## Go through the list again, displaying all issues that are "for release notes."
        <ul>       
        #foreach ($issue in $issueType.issues)
            #set ($customFields = $customFieldManager.getCustomFieldObjects($issue.project.getLong("id"), $issue.issueType.getString("id")))
            #foreach($customField in $customFields)
                #if($customField.name.equals("For Release Notes"))
                    #if($customField.getValue($issue))

                        ## If the issue has the "Release Note" field set, use that, otherwise use the summary
                        #foreach($customField in $customFields)
                            #if($customField.name.equals("Release Note"))
                                #if($customField.getValue($issue))
                                    <li>[<a href='$requestContext.canonicalBaseUrl/browse/$issue.key'>$issue.key</a>] - $textUtils.htmlEncode($customField.getValue($issue))</li>
                                #else
                                    <li>[<a href='$requestContext.canonicalBaseUrl/browse/$issue.key'>$issue.key</a>] - $textUtils.htmlEncode($issue.summary)</li>
                                #end
                            #end
                        #end

                    #end
                #end
            #end
        #end
        </ul>       
    #end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T20:41:37.890

[http://velocity.apache.org/engine/devel/vtl-reference-guide.html](http://velocity.apache.org/engine/devel/vtl-reference-guide.html)在 Velocity 中有一些条件示例，正如您所发现的，它们并不完全明显。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-24T19:20:11.690

创建以下宏，然后从 vm 文件中要包含问题摘要的任何位置简单地调用它。

```
#macro( myMacro )
#set( $customFieldObj   = $customFieldManager.getCustomFieldObjectByName('For Release Notes') )
#set( $customFieldValue = $issue.getCustomFieldValue($customFieldObj) )
## next line only makes sure the 2 variables are not null
#if( $customFieldObj && $customFieldValue )
## now output the issue summary
$issue.getSummary()
#end
#end 
```

根据[API](https://docs.atlassian.com/software/jira/docs/api/latest/com/atlassian/jira/issue/CustomFieldManager.html)，getCustomFieldObjectByName 将返回具有给定名称的第一个自定义字段对象，因此如果您有多个名为“For Release Notes”的自定义字段，您想尝试方法 getCustomFieldObject 并将字段的 Long id 作为范围。

# python - 将 API 函数与参数默认值与 OptionParser 相结合

> ID：15911041
> 
> 赞同：1
> 
> 时间：2013-04-09T19:41:37.360
> 
> 标签：python, argparse, optparse

我正在努力将 Python 中具有默认参数的 API 函数与使用 optparse 包装它的命令行脚本干净地结合起来。假设 API 函数如下所示：

```
def api(foo, bar, opt1 = 2, opt2 = 3):
    pass 
```

命令行工具的 OptionParser 如下所示

```
parser = OptionParser(usage=usage, description=desc, version=version)
parser.add_option("-a", "--opt1", type="int", action="store", help="opt1")
parser.add_option("-b", "--opt2", type="int", action="store", help="opt2")
parser.add_option("-v", "--verbose", action="store", help="verbosity")
(opt, args) = parser.parse_args() 
```

此时，我希望 CLI 调用 api()，为 foo 和 bar 提供一个值，并传播 opt1/opt2 选项（如果指定了它们），否则省略那些将导致使用默认值 2 和 3 的参数。做这个的最好方式是什么？请记住，命令行选项“verbose”不适用于 api()。

我想要 API 中的默认值而不是 OptionParser，因为有时 API 以库方式调用，并且应该应用与 CLI 案例相同的默认值。最重要的是，我不希望在未指定 opt1 或 opt2 的情况下传播 opts 中的 None 值。

我需要使用 OptionParser 但 argparse 答案也会很有趣。

谢谢你的时间。

编辑：

这是我想出的最好的，使用检查模块：

```
kws = {}
param_names = inspect.getargspec(api)[0]
kws.update((k, v) for k, v in opt.__dict__.items() if v is not None and k in param_names)

api(foo, bar, **kws) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:12:46.227

```
parser = OptionParser(usage=usage, description=desc,
        version=version)
parser.add_option("-a", "--opt1", type="int", action="store",
        help="opt1")
parser.add_option("-b", "--opt2", type="int", action="store",
        help="opt2")
parser.add_option("-v", "--verbose", action="store",
        help="verbosity")
(opt, args) = parser.parse_args()

optional_arguments = dict((k, v) for k, v in vars(opt).items() \
    if v and k in ['op1', 'op2'])
api('the foo', 'the bar', **optional_arguments) 
```

### 讨论

*   `vars(opt)`返回字典，例如`{'opt1': None, 'opt2': None, 'verbose': None}`
*   整个`dict( ... )`表达式过滤掉那些值不是的选项`None`并返回一个字典对象。我也可以`filter()`用于此目的。
*   这个字典对象可以输入`api()`

### 更新

我`and k in ['op1', 'op2']`在创建时添加了`optional_arguments`以防止其他参数进入参数列表。

# vhdl - 如何将顶部模块的输入端口连接到组件输出端口？

> ID：15911043
> 
> 赞同：2
> 
> 时间：2013-04-09T19:41:43.887
> 
> 标签：vhdl, xilinx

我正在使用赛灵思 ISE 13.2。

我对 VHDL 非常陌生，并且在连接组件时遇到了麻烦。我有一个顶级模块和一个组件（在另一个文件中定义）定义如下：

```
entity kcpsm3_int_test is
    Port (      number_in  : in std_logic_vector(3 downto 0);
                    number_out  : out std_logic_vector(3 downto 0);
                    button      : in std_logic;
           interrupt_event : in std_logic;
                       clk : in std_logic);
    end kcpsm3_int_test;

component debounce_logic
Port ( clk   : in  STD_LOGIC;
       btn_in  : in  STD_LOGIC;
       btn_out : out  STD_LOGIC);
end component;

--port
db: debounce_logic
 port map(
            clk     => clk,
        btn_in  => button,
        btn_out  => btn_out); 
```

我还定义了一个信号 btn_out 来连接这两者。我可以看到其他两个组件（处理器和 ROM）是如何连接的，但我无法连接这两个组件。我想我需要以某种方式移植顶部模块，但我不知道该怎么做，而且我几乎被困在这里，我该如何继续？如何将去抖动逻辑的输出 btn_out 连接到顶部模块的输入？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:04:41.267

您所做的是：声明了一个名为 kcpsm3_int_test 的实体 声明了一个名为 debounce_logic 的组件，该组件已在其他地方定义。接下来需要做的是：实例化组件 debounce_logic 和端口映射。它看起来像这样。

```
db_1 : debounce_logic
PORTMAP (clk => clk,
         ....
         ); 
```

[这](http://www.ics.uci.edu/~jmoorkan/vhdlref/compinst.html)是详细说明的链接。

# c# - 如何确定在代码中模拟了哪个帐户

> ID：15911058
> 
> 赞同：1
> 
> 时间：2013-04-09T19:42:49.690
> 
> 标签：c#, sharepoint, authentication

当我在 SharePoint 2010 下运行代码时遇到拒绝访问错误时，我需要弄清楚正在模拟哪个帐户。

我继承了这个项目，几乎没有资源重叠，也没有足够的基础知识来提出正确的问题。

作为 SharePoint 解决方案的一部分部署了一个 aspx 页面，该解决方案试图在文件共享上创建目录，但无法执行此操作，捕获的异常表明访问被拒绝。抛出异常的方法通过调用`SPSecurity.RunWithElevatedPrivileges`(MethodName) 运行；在创建尝试之前运行以下代码并将`UserName`变量打印到日志表明服务帐户应该完全控制共享

```
SecurityIdentifier user = System.Security.Principal.WindowsIdentity.GetCurrent().User;
String UserName = user.Translate(typeof(System.Security.Principal.NTAccount)).Value; 
```

我需要知道如何找到尝试创建的帐户的名称，理想情况下，在哪里更改它 - 我欢迎所有想法！谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:23:01.733

SPSecurity.RunWithElevatedPrivileges 在应用程序池帐户下运行，检查您的 SharePoint 站点的应用程序池标识。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T05:52:54.600

JourneyThroughCode 是正确的。您必须转到 IIS 并单击“应用程序池”，单击您的 SharePoint Web 应用程序正在使用的应用程序池，然后在右侧单击“高级设置”，您将看到身份。更改此帐户的密码时要小心，因为您随后必须进入 Central Admin 并更改“Managed Accounts”下的密码，以便中央管理员使用此身份。

# ios - 关闭 popOver

> ID：15911059
> 
> 赞同：0
> 
> 时间：2013-04-09T19:42:52.903
> 
> 标签：ios, objective-c, uitextfield, uipickerview, uipopover

在我的应用程序中，我有一个表单视图，它有两个文本字段。当点击一个带有选择器的弹出框时，其中一个文本字段会出现。现在，当用户从弹出窗口结束时，大多数用户点击背景以将其关闭。即使我在弹出窗口中放置了一个完成按钮，用户也会不情愿地点击背景。所以当我点击背景时，弹出框消失了。但是当我想编辑另一个文本字段时，我必须点击它两次才能进入编辑模式。就像当弹出框出现时，它下面有一个图层，当它消失时，图层会一直存在，直到我第二次点击让它离开。有人熟悉这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:46:04.633

You could create a transparent UIButton on the background when the picker comes up so that when the user taps on the background, you can specify exactly what is to happen.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:25:34.840

我建议您阻止背景以强制用户通过弹出窗口关闭

在显示弹出框的视图控制器中......

```
//when the popover is presented
   UIView* view = [[UIView alloc] initWithFrame:self.view.bounds];
   popOver.passthroughViews = @[view];
   [self.view addSubview:view];

  //when the popover is dismissed
   [[self.view.subviews lastObject] removeFromSuperview]; 
```

（这假设viewController`self.view`是你想要阻止的触摸的背景）

类似地，您可以在 viewController 中使用选择器实现一个覆盖视图的按钮：

```
 UIButton* button = [[UIButton alloc] initWithFrame:self.view.bounds];
  [button addTarget:self action:@selector(clicked:) forControlEvents:UIControlEventAllEvents];
   popOver.passthroughViews = @[button];
   [self.view addSubview:view]; 
```

我想这就是你已经尝试过的吗？缺少的成分是`passthroughViews`。默认情况下，后台交互被*阻止*，除了弹出框的关闭（这就是为什么你有那个“不可见层”的印象）——`passthroughviews`允许你有选择地启用这些交互。

# javascript - 如何为谷歌地图 v3 中的每个标记创建信息窗口？

> ID：15911064
> 
> 赞同：2
> 
> 时间：2013-04-09T19:43:09.053
> 
> 标签：javascript, google-maps, google-maps-api-3

我想创建三个具有不同值的标记。在 for 循环中，我有以下内容：

```
var marker = new google.maps.Marker({map: map, position: point, clickable: true});

marker.info = new google.maps.InfoWindow({
  content: '<b>Speed:</b> ' + values.inst + ' knots'
});

google.maps.event.addListener(marker, 'click', function() {
  marker.info.open(map, marker);
}); 
```

我遇到的问题是，当我单击 3 个标记中的任何一个时，只会弹出最后一个创建标记的信息窗口。我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:07:00.867

也许您会发现以下示例很有用：

```
var cityList = [
            ['Chicago', 41.850033, -87.6500523, 1],
            ['Illinois', 40.797177,-89.406738, 2]
        ]

function addMarkers()
{
    var marker, 
    i,
    infowindow = new google.maps.InfoWindow();

    for (i = 0; i < cityList.length; i++) 
    {  
        marker = new google.maps.Marker({
            position: new google.maps.LatLng(cityList[i][1], cityList[i][2]),
            map: map,
            title: cityList[i][0]
        });

        google.maps.event.addListener(marker, 'click', (function(marker, i) {
            return function() {
                infowindow.setContent(cityList[i][0]);
                infowindow.open(map, marker);
            }
        })(marker, i));
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:48:47.423

您需要将此代码移出`for`循环并移到您从循环中调用的单独函数中`for`。如果您发布更多代码，包括循环和循环迭代的数组，我可以提供更具体的建议。

但作为一个例子：

```
var places = [
    { lat:1, lng:1, name:'one one' }
    { lat:-1, lng:-1, name:'minus one one' }
];

for( var i = 0, n = places.length;  i < n;  i++ ) {
    addPlace( places[i] );
}

function addPlace( place ) {
    // here you have place.lat, place.lng, and place.name to work with
} 
```

# java - DVM 和泛型？

> ID：15911065
> 
> 赞同：0
> 
> 时间：2013-04-09T19:43:10.060
> 
> 标签：java, android

DVM 有泛型的概念吗？它们是否在字节码中实现，以便我可以通过反射访问它们？

理想情况下，我希望对 DVM 进行深入研究-任何人都可以推荐任何指针，因为我似乎根本找不到任何有深度的书。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:36:03.877

我相信当源代码变成字节码时所有类型信息都已经消失了，所以答案是否定的。

# unit-testing - 在 ReSharper 7 中，如何跳过标有多个类别的单元测试？

> ID：15911070
> 
> 赞同：1
> 
> 时间：2013-04-09T19:43:19.910
> 
> 标签：unit-testing, resharper, categories, resharper-7.1

我已经在 J​​etBrains 以及此处搜索了 R# 文档和 R# 社区，但我没有找到答案。

我有这样的东西：一个标有验收类别的程序集。其中一些测试还*单独*标记了未来类别。当我完成这些测试时，我删除了 Future 类别。

我想做的是告诉 R# 7 运行标记为 Acceptance 的测试，除非它们也标记为 Future。

我在选项对话框的 UnitTesting 选项卡上将 Future 添加到“从类别中跳过测试：”中。但是当我运行 Acceptance 类别时，*所有测试都运行了 - 没有一个被跳过。*

我只是运气不好？运行类别会覆盖跳过类别吗？

谢谢，

杰夫

# android - 在活动之间传递数据导致强制关闭

> ID：15911074
> 
> 赞同：-3
> 
> 时间：2013-04-09T19:43:31.980
> 
> 标签：android

我正在开发一个 android 项目，对于添加联系人之类的几个按钮或当我想开始一个新活动但当我尝试发送短信时它会强制关闭它自己。主要代码如下

```
package com.example.sms;
import java.util.Locale;
import java.util.StringTokenizer;
import android.net.Uri;
import android.os.Bundle;
import android.provider.ContactsContract;
import android.provider.ContactsContract.CommonDataKinds.Phone;
import android.app.Activity;
 import android.app.PendingIntent;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent; 
import android.content.IntentFilter;
import android.database.Cursor;
import android.speech.tts.TextToSpeech;
import android.speech.tts.TextToSpeech.OnInitListener;
import android.speech.tts.TextToSpeech.OnUtteranceCompletedListener;
import android.telephony.SmsManager;
import android.util.Log;
import android.view.Menu;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;
import android.widget.Toast;
public class MainActivity extends Activity implements TextToSpeech.OnInitListener,      OnUtteranceCompletedListener, OnClickListener{
    Button btnSendSMS,record_sms,finish;
 EditText txtPhoneNo;
 EditText txtMessage;
 Button addcontact;
 EditText phonePhoneno;
 TextView enter_contact_no;
 private TextToSpeech tts;
 private static final int CONTACT_PICKER_RESULT = 1001;
 private static final String DEBUG_TAG = "";
 String phoneNo="";
 String phonenofromcontact="";
 String finallistofnumberstosendmsg ="";

 /** Called when the activity is first created. */
 @Override
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    enter_contact_no=(TextView) findViewById(R.id.txtPhoneNo1);
    btnSendSMS = (Button) findViewById(R.id.btnSendSMS);
  //  txtPhoneNo = (EditText) findViewById(R.id.txtPhoneNo);
    txtMessage = (EditText) findViewById(R.id.txtMessage);
    record_sms=(Button) findViewById(R.id.button1);
    finish=(Button) findViewById(R.id.complete);
    tts = new TextToSpeech(this, this);
    record_sms.setOnClickListener(this);
    finish.setOnClickListener(this);
//    String str;
   // Log.e("test4", "ram.......");

    //Log.e("test3", "mmmmmmmmmmm...");
    //tts.speak("enter contact number", TextToSpeech.QUEUE_FLUSH, null);
     //  str=getIntent().getExtras().getString("username");     
    //Log.e("message",str);
   /* record_sms.setOnClickListener(new View.OnClickListener() {

        public void onClick(View v) {
            // TODO Auto-generated method stub
            Intent intent=new Intent(MainActivity.this,     MainActivity1.class);
            startActivity(intent);  
                }
    });*/
    //Log.e("test2", "lllllllll...");
    addcontact =(Button) findViewById(R.id.addphonenofromcontact);

  /* Intent intent=new Intent(this,AndroidTextToSpeechActivity.class );
   startActivity(intent);*/
    speakOut("enter contact number");

    addcontact.setOnClickListener(new View.OnClickListener()
    {
        public void onClick(View V)
        {
            Intent ContactPickerIntent = new Intent(Intent.ACTION_PICK,ContactsContract.Contacts.CONTENT_URI);
            ContactPickerIntent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_TYPE);
            startActivityForResult(ContactPickerIntent, CONTACT_PICKER_RESULT);             
        }
    }
    );

    btnSendSMS.setOnClickListener(new View.OnClickListener() 
    {

        public void onClick(View v) 
        {  
        //  txtMessage.setText(getIntent().getExtras().getString("username"));
            String message = txtMessage.getText().toString();
            phoneNo = txtPhoneNo.getText().toString();
            String phoneNo1=  phonePhoneno.getText().toString(); 

            // Sending message to both the written and added contact...

            finallistofnumberstosendmsg +=phoneNo1 + phoneNo;
            String phoneFinal= phoneNo + finallistofnumberstosendmsg;

            //StringTokenizer st=new StringTokenizer(finallistofnumberstosendmsg,",");

            StringTokenizer st=new StringTokenizer(phoneFinal,",");
            while (st.hasMoreElements())
            {
                String tempMobileNumber = (String)st.nextElement();
                if(tempMobileNumber.length()>0 && message.trim().length()>0) {
                    sendSMS(tempMobileNumber, message);
                }
                else 
                {
                    Toast.makeText(getBaseContext(), 
                            "Please enter both phone number and message.", 
                            Toast.LENGTH_SHORT).show();
                }
            }
           }
    });  
    }

protected void onActivityResult(int requestCode, int resultCode, Intent data) {  
     if (resultCode == RESULT_OK)
     {  
         switch (requestCode) 
         {  
         case CONTACT_PICKER_RESULT:
             Cursor cursor=null;
             try
             {   
                 Uri result = data.getData();
                 Log.v(DEBUG_TAG, "Got a contact result: " + result.toString());

                 // get the contact id from the Uri     
                 String id = result.getLastPathSegment();

                 // query for everything contact number  
                 cursor = getContentResolver().query(  
                      Phone.CONTENT_URI, null,  
                      Phone._ID + "=?",  
                      new String[]{id}, null); 

                 cursor.moveToFirst();
                 int phoneIdx = cursor.getColumnIndex(Phone.NUMBER);  
                 if (cursor.moveToFirst())
                 {   
                     phonenofromcontact = cursor.getString(phoneIdx);
                     finallistofnumberstosendmsg +=","+phonenofromcontact;
                     Log.v(DEBUG_TAG, "Got phone no : " + phonenofromcontact);  
                 }
                 else 
                 {                                
                     Log.w(DEBUG_TAG, "No results"); 
                 }
             }
             catch(Exception e)
             {
                 Log.e(DEBUG_TAG, "Failed to get contact number", e);
             }
             finally
             {
                 if (cursor != null)
                 {  
                     cursor.close();
                 }
             }
             phonePhoneno= (EditText)findViewById(R.id.phonenofromcontact);
             phonePhoneno.setText(finallistofnumberstosendmsg);
             //phonePhoneno.setText(phonenofromcontact);
             if(phonenofromcontact.length()==0)
             {
                 Toast.makeText(this, "No contact number found for this contact",
                         Toast.LENGTH_LONG).show(); 
             }
            break;  
         }  
     } 
     else
     {  
         Log.w(DEBUG_TAG, "Warning: activity result not ok");
     }  
 } 

private void sendSMS(String phoneNumber, String message)
{
    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";

    PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,
        new Intent(SENT), 0);

    PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,
        new Intent(DELIVERED), 0);

  //---when the SMS has been sent---
    registerReceiver(new BroadcastReceiver(){
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS sent", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio off", 
                            Toast.LENGTH_SHORT).show();
                    break;
            }
        }
    },new IntentFilter(SENT));

    //---when the SMS has been delivered---
    registerReceiver(new BroadcastReceiver(){
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode())
            {
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not delivered", 
                            Toast.LENGTH_SHORT).show();
                    break;                        
            }
        }
    }, new IntentFilter(DELIVERED));        

    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI);       
}

@SuppressWarnings("deprecation")
public void onInit(int status) {
    // TODO Auto-generated method stub
    if (status == TextToSpeech.SUCCESS) {
                    int result = tts.setLanguage(Locale.US);
         // tts.setPitch(5); // set pitch level

        // tts.setSpeechRate(2); // set speech speed rate

        if (result == TextToSpeech.LANG_MISSING_DATA
                || result == TextToSpeech.LANG_NOT_SUPPORTED) {
            Log.e("TTS", "Language is not supported");
        } else {
            //btnSpeak.setEnabled(true);
            String text=enter_contact_no.getText().toString();
            //tts.speak("enter contact number", TextToSpeech.QUEUE_FLUSH, null);
            speakOut(text);
            Log.e("test", "hhhhhhhhhhhhhhhhh");
        /*  @Deprecated int listenerResult = tts.setOnUtteranceCompletedListener(new OnUtteranceCompletedListener()
            {
                public void onUtteranceCompleted(String utteranceId)
                {
                   // callWithResult.onDone(utteranceId);
                    Log.e("TAG2", "failed to add utterance completed listener");
                }
            });
            if (listenerResult != TextToSpeech.SUCCESS)
            {
                Log.e("TAG", "failed to add utterance completed listener");
            } */
            Intent ContactPickerIntent = new Intent(Intent.ACTION_PICK,ContactsContract.Contacts.CONTENT_URI);
            ContactPickerIntent.setType(ContactsContract.CommonDataKinds.Phone.CONTENT_TYPE);
            startActivityForResult(ContactPickerIntent, CONTACT_PICKER_RESULT);             

        }

    } else {
        Log.e("TTS", "Initilization Failed");
    }

}
private void speakOut(String text) {

    //String text = txtText.getText().toString();

    tts.speak(text, TextToSpeech.QUEUE_FLUSH, null);

}

public void onUtteranceCompleted(String utteranceId) {
    // TODO Auto-generated method stub

}

public void onClick(View v) {
    // TODO Auto-generated method stub
    if(v.getId()==R.id.button1)
    {
        Intent intent=new Intent(MainActivity.this, MainActivity1.class);
        String str=phonePhoneno.getText().toString();
        intent.putExtra("phoneno", str);
        startActivity(intent);  

    }
 if(v.getId()==R.id.complete)
    {
        Intent intent=getIntent();
        String str,str1;
        str=intent.getExtras().getString("phoneno");
        phonePhoneno.setText(str);
        //str1=intent.getStringExtra("username");
        //txtMessage.setText("str1");
    }   

}

/*public void onInit(int status) {
    // TODO Auto-generated method stub

}*/ 
```

}

在上面的代码中，sendms 和完成按钮导致强制关闭。为了使应用程序正确运行，我应该进行哪些更改。

第二个活动代码

```
 package com.example.sms;
 import java.util.ArrayList;
 import android.app.Activity;
 import android.content.ActivityNotFoundException;
 import android.content.Intent;
 import android.os.Bundle;
 import android.speech.RecognizerIntent;
 import android.support.v4.view.ViewGroupCompat;
 import android.view.Menu;
 import android.view.View;
 import android.view.View.OnClickListener;
 import android.widget.Button;
 import android.widget.EditText;
 import android.widget.ImageButton;
 import android.widget.TextView;
 import android.widget.Toast;

 public class MainActivity1 extends Activity implements OnClickListener {
protected static final int RESULT_SPEECH = 1;
private ImageButton btnSpeak;
private TextView txtText;
//EditText msg;
Button b;
String phoneno;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main1);
    txtText = (TextView) findViewById(R.id.txtText);
    btnSpeak = (ImageButton) findViewById(R.id.btnSpeak);
  //  msg=(EditText) findViewById(R.id.txtMessage);
    //b=(Button) findViewById(R.id.main_act);
    b=(Button) findViewById(R.id.main_act);
    btnSpeak.setOnClickListener(this);
    b.setOnClickListener(this);
    Intent intent =getIntent();
    phoneno=intent.getExtras().getString("phoneno");

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
public void onClick(View v) {
    // TODO Auto-generated method stub
    if(v.getId()==R.id.btnSpeak)
    {
        Intent intent = new Intent(
                RecognizerIntent.ACTION_RECOGNIZE_SPEECH);

        intent.putExtra(RecognizerIntent.EXTRA_LANGUAGE_MODEL, "en-US");

        try {
            startActivityForResult(intent, RESULT_SPEECH);
            txtText.setText("");
        } catch (ActivityNotFoundException a) {
            Toast t = Toast.makeText(getApplicationContext(),
                    "Ops! Your device doesn't support Speech to Text",
                    Toast.LENGTH_SHORT);
            t.show();
        }

    }
if(v.getId()==R.id.main_act)
    {
       String str=txtText.getText().toString();
       Intent intent=new Intent(getApplicationContext(), MainActivity.class);
       intent.putExtra("username",str);
       intent.putExtra("phoneno", phoneno);
       startActivity(intent);
    } 
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);

    switch (requestCode) {
    case RESULT_SPEECH: {
        if (resultCode == RESULT_OK && null != data) {

            ArrayList<String> text = data
                    .getStringArrayListExtra(RecognizerIntent.EXTRA_RESULTS);

            String text1;
            text1=text.get(0);
            txtText.setText(text.get(0));
        /*  if(text1=="call"||text1=="cal"||text1=="phone")
            {
               txtText.setText("call module"+text1);    
            }
            else if(text1=="message"||text1=="massage"||text1=="sms")
            {
                 txtText.setText("message module"+text1);  
            }
           else  
            {
              txtText.setText("invalid word!! please try again"+text1);
            }   */
    //     msg.setText(text1);
          // Intent intent=new Intent(this, MainActivity.class);
          // startActivity(intent);

        }
        break;
    }

    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:50:54.917

> sendms ...按钮导致强制关闭

在`btnSendSMS`的 OnClickListener 中，您还没有初始化`txtPhoneNo`，所以这会抛出 NullPointerException：

```
phoneNo = txtPhoneNo.getText().toString(); 
```

也`phonePhoneno`可能为空。

> 完成按钮导致强制关闭

此行可能会引发 NullPointerException：

```
str=intent.getExtras().getString("phoneno"); 
```

您不会检查 Intent 是否真的有额外内容，或者 Intent 是否存在。

* * *

我只看了你的代码，可能还有更多错误。LogCat 会告诉您错误发生的确切位置，这是您最好的调试工具。请阅读：[如何解释 Logcat](https://stackoverflow.com/q/6065258/1267661)

# wxpython - 如何对 wx.html.HtmlWindow.LoadPage 进行异常处理？

> ID：15911075
> 
> 赞同：2
> 
> 时间：2013-04-09T19:43:34.507
> 
> 标签：wxpython, wxhtmlwindow

我在我的 wxPython 应用程序中创建了一个静态 HTML 窗口：

```
wx.html.HtmlWindow.LoadPage(url) 
```

它运行良好，并在应用程序中显示 HTML 窗口。

我正在寻找一种对其进行异常处理的方法，以防网站或 Internet 访问中断，并且无法找到网页链接。

我尝试了两种方法：

```
try:
    wx.html.HtmlWindow.LoadPage(url)
except:
    ... 
```

和：

```
if wx.html.HtmlWindow.LoadPage(url):
    ...
else:
    ... 
```

但是对于任何一个测试，如果我使用一个不可用的 URL，我会得到一个 Python 错误，弹出“无法打开请求的 HTML 文档...”，并且异常处理程序不起作用。

我希望能够处理异常并允许程序继续运行。

如何执行错误/异常处理`wx.html.HtmlWindow.LoadPage(...)`？

# sql - 如何在 Visual Studio SSRS 2008 中使用 SQL 使用多个条件语句

> ID：15911079
> 
> 赞同：1
> 
> 时间：2013-04-09T19:43:41.773
> 
> 标签：sql, ssrs-2008, conditional-statements

我正在尝试使用 Visual Studio SSRS 2008 从 SQL 数据库中提取计算数据。尝试在我的 select/from/where 语句中使用条件时遇到问题。我正在尝试做的一个例子是从每 15 分钟采集的样本中找出 24 小时内（从昨天上午 10:00 到今天上午 10:00）的故障总数。我正在报道一家天然气厂，当阀门打开时，气体会流过阀门。通过特定打开的阀门的气体在燃烧室中被点燃。发生这种情况时，如果阀门打开且燃烧室温度低于 1400 度，则会发生故障。我目前有一个查询，每 15 分钟为我提供一次阀门状态和燃烧室温度的数据。正如我所说，我只关心阀门的状态为 2，即打开，同时燃烧室温度<1400。我在下面复制了我当前的查询以及结果数据的样本。如您所见，当前查询不包括我的必要条件。我需要添加看起来像这样的代码：

```
COUNT (IF RTO_FCV601_SSTS=2 AND RTO_COMB1TEMP < 1400) 
```

* * *

```
SET NOCOUNT ON
DECLARE @StartDate DateTime
DECLARE @EndDate DateTime
SET @StartDate = DateAdd(HOUR,-24,GetDate())
SET @EndDate = GetDate()
SET NOCOUNT OFF
SELECT temp.TagName ,DateTime,Value
From (
SELECT  * 
 FROM History
 WHERE History.TagName IN ('RTO_FCV601_STS','RTO_COMB1TEMP')
 AND wwRetrievalMode = 'Cyclic'
 AND wwCycleCount = 96
 AND wwVersion = 'Latest'
 AND DateTime >= @StartDate
 AND DateTime <= @EndDate) temp
 WHERE temp.StartDateTime >= @StartDate 
```

* * *

```
Resulting data:
TagName         DateTime                    Value
RTO_FCV601_STS  2013-04-08 15:44:40.6600000 2
RTO_COMB1TEMP   2013-04-08 15:44:40.6600000 1663
RTO_FCV601_STS  2013-04-08 15:59:50.1340000 2
RTO_COMB1TEMP   2013-04-08 15:59:50.1340000 1604
RTO_FCV601_STS  2013-04-08 16:14:59.6080000 2
RTO_COMB1TEMP   2013-04-08 16:14:59.6080000 1557
RTO_FCV601_STS  2013-04-08 16:30:09.0810000 0
RTO_COMB1TEMP   2013-04-08 16:30:09.0810000 1704
RTO_FCV601_STS  2013-04-08 16:45:18.5550000 2
RTO_COMB1TEMP   2013-04-08 16:45:18.5550000 1576
RTO_FCV601_STS  2013-04-08 17:00:28.0290000 2
RTO_COMB1TEMP   2013-04-08 17:00:28.0290000 1645 
```

如果我不能在 SQL 中解决这个问题，我希望我能在 Visual Studio SSRS 中找到一种方法。在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T22:05:10.020

在我的想法中并且没有看你的表格......我说如果你的 DateTime 仅适用于这两个州，请尝试这个查询，尽管我建议你（并且在我的想法中）加入下面的 Datetime 有点不合逻辑...您可以自己优化它...但无论如何您都可以使用“case when”语句

```
SET NOCOUNT ON
DECLARE @StartDate DateTime
DECLARE @EndDate DateTime
SET @StartDate = DateAdd(HOUR,-24,GetDate())
SET @EndDate = GetDate()
SET NOCOUNT OFF
SELECT Sum(case when temp.Value = 2 and temp2.value< 1400 then 1 else 0 end ) 
AS 'failureCount'
From (
 SELECT  *
 FROM History
 WHERE History.TagName IN ('RTO_FCV601_STS')
 AND wwRetrievalMode = 'Cyclic'
 AND wwCycleCount = 96
 AND wwVersion = 'Latest'
 AND DateTime >= @StartDate
AND DateTime <= @EndDate)as temp 
join
 (SELECT  * FROM History
   WHERE History.TagName IN ('RTO_COMB1TEMP')
   AND wwRetrievalMode = 'Cyclic'
   AND wwCycleCount = 96
   AND wwVersion = 'Latest'
   AND DateTime >= @StartDate
   AND DateTime <= @EndDate)as temp2 on temp.DateTime = temp2.DateTime

WHERE temp.StartDateTime >= @StartDate and temp2.StartDateTime >= @StartDate 
```

# haskell - 在 Haskell 中记忆 IO 计算

> ID：15911084
> 
> 赞同：5
> 
> 时间：2013-04-09T19:44:00.633
> 
> 标签：haskell, concurrency, memoization

我有一个功能

```
f :: MonadIO m => a -> m b 
```

它接受一些输入并返回将产生输出的 IO 计算。我想“记忆” `f`，以便我只为每个输入执行一次这些计算。例如，如果

```
f :: String -> IO String
f s = putStrLn ("hello " ++ s) >> return s 
```

然后我想要一个`memoize`这样的功能

```
do
  mf <- memoize f
  s <- mf "world"
  t <- mf "world"
  return (s,t) 
```

只打印`"hello world"`一次并返回`("world", "world")`. 我正在编写的程序是多线程的，所以即使不同的线程都在调用`mf`.

以下是我迄今为止提出的（可怕的）解决方案。我的问题是它是否以及如何改进。

```
memoize :: (MonadIO m, Ord a) => (a -> m b) -> m (a -> m b)
memoize f = do
  cache <- liftIO $ newTVarIO Map.empty
  return $ \a -> do
              v <- liftIO $ atomically $ lookupInsert cache a
              b <- maybe (f a) return =<< liftIO (atomically $ takeTMVar v)
              liftIO $ atomically $ putTMVar v $ Just b
              return b
    where
      lookupInsert :: Ord a => TVar (Map a (TMVar (Maybe b))) -> a -> STM (TMVar (Maybe b))
      lookupInsert cache a = do
                         mv <- Map.lookup a <$> readTVar cache
                         case mv of
                           Just v -> return v
                           Nothing -> do
                                   v <- newTMVar Nothing
                                   modifyTVar cache (Map.insert a v)
                                   return v 
```

这里发生了一些事情：

1)`cache`有类型`TVar (Map a (TMVar (Maybe b)))`。它将输入映射到`TMVar`包含计算值或`Nothing`（表示尚未计算值）的输入。该函数`lookupInsert`检查`cache`，并插入一个新的`TMVar`初始化 to`Nothing`如果已经不存在。

2) 返回的操作首先获取`v :: TMVar (Maybe b)`关联的 to `a`，然后获取它，然后执行计算`f a`以获得结果，或者返回存储在 中的值（`Maybe`如果可用）。这`take`和`put`模式是为了让两个不同的线程`f a`在看到它还没有运行之后不会同时运行计算。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T00:16:15.180

我以为你想要的是不可能的，但事实证明它是。

[https://stackoverflow.com/a/9458721/1798971](https://stackoverflow.com/a/9458721/1798971)

我仍然无法弄清楚为什么会这样！

# bash - Bash 脚本 -> While 循环、For 循环、If 语句（从 MATLAB 转换）

> ID：15911085
> 
> 赞同：-1
> 
> 时间：2013-04-09T19:44:03.797
> 
> 标签：bash, matlab, shell

我在 MATLAB 中有以下内容：

```
 while ~feof(fi)
        dline== fgetl(fi)
        if count == 0
            if dline == -1
                <do stuff>
            end
        end
        if dline(end-27) == ':'
            dline = dline(1:end-28)
        end
        <output>
        for i = 32:size(dline,2)
            if dline(i) == '{'
                count = count + 1
                sp = []
                for j = 1:count
                    sp = [sp;s]
                end
                <output>
            elseif dline(i) == '}'
                count = count - 1
                sp = []
                for j = 1:count
                    sp = [sp;s]
                end
                <output>
            elseif dline(i) == ','
                <output>
            else
                <output>
        end
    end 
```

我在索引我的 dline 时遇到问题。例如在 MATLAB 中：

```
 if dline(i) == '{' 
```

翻译成shell脚本，我有：

```
 if [ ${line[i]} == '{' ] 
```

或其一些变体。但是我收到了与此相关的错误，或者它没有找到'{'。我尝试用“$x”替换“i”，其中“x”从循环内的 32 开始计数。我尝试用“$match1”替换“{”，其中“$match1”=“{”。

请忽略 MATLAB 代码的任何问题，我知道它有效，我只是快速输入它。我更感兴趣的是将该代码转换为可用的 BASH 脚本（在 Linux 上）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:49:15.157

似乎在 Mac OS X 上运行良好：

```
if [ ${line[i]} == '{' ];
> then
> echo "tes"
> fi
tes 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T16:45:46.273

如果我对发布的代码和您所做的事情的理解是正确的，那么您就走错了路。

在 , 的构造中`${foo[$x]}`，`foo`是一个数组，并且您正在索引位置的元素`${x}`，但是您不能将 shell 脚本中的字符串视为数组，并像这样在该字符串中的特定位置索引字符。

为了实现这一点，您将使用`${line:start:length}`语法来获取`${line}`（索引是基于 0 的）的子字符串，例如：

```
$ foo="abc"
$ echo "${foo:0:1}"
a
$ echo "${foo:1:2}"
bc 
```

您能否评论您现有的代码或添加一些描述您的代码段的伪代码，以便没有 matlab 知识的人知道您到底想要做什么？然后，我们可以帮助您尽可能干净地转换整个内容。

# java-3d - 将 JFrame 放入 Java3D 场景中

> ID：15911086
> 
> 赞同：0
> 
> 时间：2013-04-09T19:44:05.493
> 
> 标签：java-3d

我想在 Java3D 场景中放置一个 JFrame (JComponent)。JFrame 有一个动画，想法是把这个组件像一个纹理放在一个三维盒子里。我阅读了有关此主题的各种文章，但没有发现任何人遇到此问题。可以像纹理一样添加 JComponent 吗？

很多，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T20:28:18.650

您不能直接将 JComponent 添加为纹理。您可以将动画绘制到缓冲区中，然后使用它来更新纹理。

# php - 将数组的元素分隔为单独的文本字段 (PHP)

> ID：15911088
> 
> 赞同：1
> 
> 时间：2013-04-09T19:44:21.307
> 
> 标签：php

好的，这已经让我头疼了一段时间了——我知道这很简单……但是疲倦给我带来了精神障碍……希望你们能提供帮助！

我有这个长字符串，我已经将它分解成一个数组：

```
Array
(
[0] => 15896,10
[1] => 15897,10
[2] => 15898,1
 .....(to [95] =>) 
```

现在我要做的是遍历数组的每一行，将 15896 个数字放入一个文本框中，将 10 放入一个单独的文本框中。

令人讨厌的是，我之前在以前的应用程序中做过类似的事情，尽管我似乎无法在整个应用程序中应用相同的语法（上次我有一个 2d 数组，并使用 2 个 foreach 循环进行迭代......

提前致谢！

当前代码：

```
$getString = mysql_query("SELECT orderString FROM stock_orders WHERE orderID    ='".$_GET["type"]."'");
while($row = mysql_fetch_array($getString)){
$order = $row["orderString"];
}
$newArray = array();

$newArray = explode(" - ", $order); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:58:20.300

使用类似的东西：

```
$newArray = array();
$newArray = explode(" - ", $order);

foreach ($newArray as $arrayItem) 
{ 
  $parts = explode(',', $arrayItem);
  echo "<input type='text' value='$parts[0]'> - <input type='text' value='$parts[1]'><br/>";
} 
```

如果您将值放在文本字段中，那么您应该提取并使用 stock_order ID，否则您将无法识别它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:07:49.740

假设您的秒维度是一个字符串。

```
$array = Array(
    0 => "15896, 10",
    1 => "15897, 10"
    );

foreach ($array as &$v) {
    $result = preg_split("/[\s]*,[\s]*/", $v);

    foreach ($result as &$r) {
        echo "<input type='text' value='".$r."'/>";
    }
//    echo "<\br>";
} 
```

# c# - 查找所有不以模式结尾的行

> ID：15911091
> 
> 赞同：-1
> 
> 时间：2013-04-09T19:44:36.407
> 
> 标签：c#

我有一个行列表，我只想从中选择以模式“XE”结尾的行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:48:00.217

```
lines.Where(l => l.EndsWith("XE")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T19:48:39.630

你可以试试这个

```
List<string> myString = new List<string>(); // whatever your list
myString= myString.Where(a => a.EndsWith("XE")).ToList(); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-09T19:49:02.863

```
List<string> resList = origList.Where(x => x.EndsWith("XE")) 
```

# php - PDO 致命错误：在...文件中的非对象上调用成员函数 fetch()

> ID：15911093
> 
> 赞同：0
> 
> 时间：2013-04-09T19:44:43.543
> 
> 标签：php, pdo

我知道这已经被问过好几次了，但我没有找到与我的情况相匹配的那个，所以不得不问。

我有两个文件
1) connection.php

```
class Database {

    protected $dbh;

    public function __construct() {
        $dsn = 'mysql:dbname=dbname;host=localhost';
        $user = 'dbuser';
        $pass = 'dbpass';

        try {
            $this->dbh = new PDO($dsn, $user, $password);
        } catch (PDOException $e) {
            echo 'Connection failed: ' . $e->getMessage();
        }
    }

    public function displayInfo() {
        $stmt = $this->dbh->prepare("SELECT fname, lname FROM info");
        return $stmt->execute();
    }

}

$db = new Database(); 
```

2.) info.php

```
require_once 'connection.php';

$result = $db->displayInfo();

while ($row = $result->fetch(PDO::FETCH_ASSOC)) {
    echo $row['fname']. " " . $row['lname'];
} 
```

我知道我不能使用`fetch()`with `$result`，如果它在同一页面中，我可以使用`$stmt->fetch()`但不知道如何`PDO fetch`从另一个页面调用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:47:21.930

[PDOStatement::execute()](http://www.php.net/manual/en/pdostatement.execute.php)方法在成功时返回 true，在失败时返回 false——不是查询的结果。您需要返回您的声明：

```
public function displayInfo() {
    $stmt = $this->dbh->prepare("SELECT fname, lname FROM info");
    $stmt->execute();
    return $stmt;
} 
```

这样，`$result`变量实际上就是你的语句，你可以调用`fetch()`它的方法。

更好的方法是从`displayInfo()`方法内部进行获取并仅返回结果，而不必依赖于将您的数据库好东西带到类之外，例如：

```
class Database 
{

   protected $dbh;

   public function __construct() {
      $dsn = 'mysql:dbname=dbname;host=localhost';
      $user = 'dbuser';
      $pass = 'dbpass';

      try {
         $this->dbh = new PDO($dsn, $user, $password);
      } catch (PDOException $e) {
         echo 'Connection failed: ' . $e->getMessage();
      }
   }

   public function getDisplayInfo() {
      $stmt = $this->dbh->prepare("SELECT fname, lname FROM info");
      if( $stmt->execute() ) {
         return $stmt->fetch(PDO::FETCH_ASSOC);
      }
      // Query failed
      return false;
   }
}

$db = new Database();

$results = $db->getDisplayInfo();

foreach($results as $row) {
   echo $row['fname']. " " . $row['lname'];
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T20:00:39.033

正确的代码。[在PDO 标签 wiki](https://stackoverflow.com/tags/pdo/info)中查看详细信息

```
class Database {

    protected $dbh;

    public function __construct() {
        $dsn = 'mysql:dbname=dbname;host=localhost';
        $user = 'dbuser';
        $pass = 'dbpass';
        $opt = array(
            PDO::ATTR_ERRMODE            => PDO::ERRMODE_EXCEPTION,
            PDO::ATTR_DEFAULT_FETCH_MODE => PDO::FETCH_ASSOC
        );
        $this->dbh = new PDO($dsn, $user, $password, $opt);
    }

    public function displayInfo() {
        $stmt = $this->dbh->prepare("SELECT fname, lname FROM info");
        $stmt->execute();
        return $stmt->fetchAll();
    }

} 
```

# r - 在R中将列堆叠成1列

> ID：15911095
> 
> 赞同：10
> 
> 时间：2013-04-09T19:44:45.090
> 
> 标签：r, dataframe, rows, reshape

我有一个看起来像这样的数据框：

```
ID Time U1 U2 U3 U4 ...
1  20    1  2 3  5 .. 
2  20    2  5 9  4 ..
3  20    2  5 6  4 ..
.
.

And I would need to keep it like: 

ID Time  U
1  20    1
1  20    2
1  20    3
1  20    5
2  20    2
2  20    5
2  20    9
2  20    4
3  20    2
3  20    5
3  20    6
3  20    4 
```

我试过：

```
X <- read.table("mydata.txt", header=TRUE, sep=",")
X_D <- as.data.frame(X)
X_new <- stack(X_D, select = -c(ID, Time)) 
```

但我还没有设法将数据转换成那种形式。老实说，我对堆叠/转置的经验很少，因此非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-10T05:41:20.563

这是`stack`方法：

```
dat2a <- data.frame(dat[1:2], stack(dat[3:ncol(dat)]))
dat2a
#    ID Time values ind
# 1   1   20      1  U1
# 2   2   20      2  U1
# 3   3   20      2  U1
# 4   1   20      2  U2
# 5   2   20      5  U2
# 6   3   20      5  U2
# 7   1   20      3  U3
# 8   2   20      9  U3
# 9   3   20      6  U3
# 10  1   20      5  U4
# 11  2   20      4  U4
# 12  3   20      4  U4 
```

`melt`这与“reshape2”非常相似：

```
library(reshape2)
dat2b <- melt(dat, id.vars=1:2)
dat2b
#    ID Time variable value
# 1   1   20       U1     1
# 2   2   20       U1     2
# 3   3   20       U1     2
# 4   1   20       U2     2
# 5   2   20       U2     5
# 6   3   20       U2     5
# 7   1   20       U3     3
# 8   2   20       U3     9
# 9   3   20       U3     6
# 10  1   20       U4     5
# 11  2   20       U4     4
# 12  3   20       U4     4 
```

而且，与@TylerRinker 的答案非常相似，但没有删除“时间”，只是`sep = ""`用来帮助 R 猜测时间和变量名称。

```
dat3 <- reshape(dat, direction = "long", idvar=1:2, 
                varying=3:ncol(dat), sep = "", timevar="Measure")
dat3
#        ID Time Measure U
# 1.20.1  1   20       1 1
# 2.20.1  2   20       1 2
# 3.20.1  3   20       1 2
# 1.20.2  1   20       2 2
# 2.20.2  2   20       2 5
# 3.20.2  3   20       2 5
# 1.20.3  1   20       3 3
# 2.20.3  2   20       3 9
# 3.20.3  3   20       3 6
# 1.20.4  1   20       4 5
# 2.20.4  2   20       4 4
# 3.20.4  3   20       4 4 
```

在所有这三个中，您最终会得到四列，而不是三列，就像您在所需输出中描述的那样。但是，正如@ndoogan 指出的那样，这样做会丢失有关数据的信息。如果您对此感到满意，您总是可以`data.frame`很容易地从结果中删除该列（例如，`dat2a <- dat2a[-4]`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T20:08:25.400

带底座`reshape`：

```
dat <- read.table(text="ID Time U1 U2 U3 U4
1  20    1  2 3  5
2  20    2  5 9  4
3  20    2  5 6  4", header=TRUE)

colnames(dat) <- gsub("([a-zA-Z]*)([0-9])", "\\1.\\2", colnames(dat))
reshape(dat, varying=3:ncol(dat), v.names="U", direction ="long", timevar = "Time", 
    idvar = "ID") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-06-18T20:14:43.857

你也可以使用melt()：

```
library(reshape2)

new_data <- melt(old_data, id.vars=c("ID","Time"),
    value.name = "U") 
```

然后删除“变量”列：

```
new_data$variable <- NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T19:49:29.927

尝试这个：

```
do.call(rbind, lapply(1:4, function(i)structure(dat[,c("ID", "Time", paste0("U",i))], names=c("ID", "Time", "U")))) 
```

`dat`你的data.frame在哪里...

# python - 用一个字母随机替换字符串中的 N 个字符

> ID：15911096
> 
> 赞同：0
> 
> 时间：2013-04-09T19:44:48.107
> 
> 标签：python, string, random, replace

所以我有一个 DNA 序列文件，我的目标是用字母 M 随机替换序列中的 5 个核苷酸。

IE。dna1.txt 的序列为 ACTGGCTACATG。

我想让 ACMGGCTACATTG 看起来像 ACMMGCMMCATMG 或类似的东西。

我知道如何一次替换一个字母，但不是几个。

```
dna1 = open ("dna1.txt","r")
data1 = dna1.read()

from random import randint, choice

def Mutated_DNA(data1):
    dna_list = list(data1)
    mutation_site = randint(0, len(dna_list)-1)
    dna_list[mutation_site] = choice(list('M'))        
    return ''.join(dna_list) 

print (Mutated_DNA(data1)) 
```

我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:53:31.303

如果你想用新的东西*准确*地替换5 个字符，那么我认为最简单的方法是从可能的位置中取样，然后完全改变这些位置。例如：

```
from random import sample

def mutate(s, num, target):
    change_locs = set(sample(range(len(s)), num))
    changed = (target if i in change_locs else c for i,c in enumerate(s))
    return ''.join(changed) 
```

例如

```
>>> mutate('ABC', 2, 'M')
'MMC'
>>> mutate('ABC', 2, 'M')
'AMM'
>>> mutate('ABC', 2, 'M')
'MMC'
>>> mutate('ABC', 2, 'M')
'MBM' 
```

或者

```
def mutate(s, num, target):
    change_locs = sample(range(len(s)), num)
    new_s = list(s)
    for change_loc in change_locs:
        new_s[change_loc] = target
    return ''.join(new_s) 
```

等等

# git - git rebase --preserve-merges 使用的确切修订范围是多少？

> ID：15911097
> 
> 赞同：1
> 
> 时间：2013-04-09T19:44:50.043
> 
> 标签：git, rebase, git-rebase

我想知道，如果你使用

```
git rebase --preserve-merges 
```

rebase 尝试回放的提交的确切列表是什么。

更具体地说，假设我有主题和主分支。以前有一些从 master 到 topic 的合并（所以 topic 不会不必要地远离 master）。从那时起，关于主题的一些额外提交。

假设现在我现在像这样在 master 上重新设置主题：

```
git checkout topic
git rebase --preserve-merges master 
```

git 将存储在变基“临时区域”中然后在 master 之上重新应用的确切提交集是什么？

如果答案概括为使用 --onto 和其他参数，则额外加分。

为了比较，“git help rebase”清楚地表明要重新应用的提交集由 <upstream>..HEAD 给出（在我们的例子中是 master..topic）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:44:50.043

它似乎大致沿线

```
git log --ancestry-path `git merge-base master topic`..topic 
```

（即找到两个分支之间的merge-base，找到它和topic之间的commits。）

不过，这并不完全正确。在我的存储库中，这会生成与 rebase --preserve-merges 使用的提交非常相似的列表，但它并不相同。（例如，提交的总数并不完全相同。）

# maven-3 - 在 MuleStudio POM 中导入 Maven 项目错误

> ID：15911100
> 
> 赞同：1
> 
> 时间：2013-04-09T19:44:51.430
> 
> 标签：maven-3, mule, mule-studio

我正在关注有关[创建云连接器的教程。](http://www.mulesoft.org/documentation/display/current/Your+First+Cloud+Connector)

在 MuleStudio 中导入时，我遇到了两个我不完全理解的错误。

`Project build error: Unknown packaging: mule-module`

`Project build error: Unresolveable build extension: Plugin org.mule.tools.devkit:mule-devkit-maven-plugin:3.3.2 or one of its dependencies could not be resolved: Could not find artifact com.sun:tools:jar:1.6 at specified path C:\Program Files (x86)\Java\jre6/../lib/tools.jar`

我还尝试导入[Mule LDAP Connector](https://github.com/mulesoft/ldap-connector)。同样的错误。

有什么想法可以让我摆脱困境吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T02:33:07.450

AFAIU，堆栈跟踪告诉我们

```
could not be resolved: Could not find artifact 
com.sun:tools:jar:1.6 at specified path 
C:\Program Files (x86)\Java\jre6/../lib/tools.jar 
```

是**`C:\Program Files (x86)\Java\jre6`**一个`JRE`。我们应该将 IDE 配置为使用 IDE `JDK`。请注意，命名的文件`tools.jar`可在`JDK_HOME/lib/tools.jar`

基本上我们应该设置以下环境变量

1.  `JAVA_HOME`它指向 JDK 安装路径，例如`C:\java\jdk1.7.0_15`.
2.  `PATH`指向`%JAVA_HOME%/bin`.

然后当我们启动任何 IDE 时，它将默认使用配置的 JDK。无论如何，IDE 还允许我们通过其菜单添加更多/修改 JDK。

例如对于 Eclipse

1.  去`Window`---->`Preference`
2.  选择`Java`---->`Installed JRE`
3.  在右侧面板中，我们可以添加/修改/删除任何 JDK。

我希望这可能会有所帮助。

# javascript - 使用 jQuery 事件

> ID：15911103
> 
> 赞同：2
> 
> 时间：2013-04-09T19:45:06.687
> 
> 标签：javascript, jquery, asp.net, events, user-controls

我已经作为 Web 开发人员工作了几年（在之前是客户端服务器开发人员之后），在过去的一年中，我一直专注于让自己在客户端编程方面做得更好。

我的问题更多的是基本问题，而不是具体问题。我有几个 ASP 用户控件，它们是嵌套在 div 中的字段集。两者都包含在一个 div 中，它是一个简单的 jQuery 面板。一个是提交测试的表格，另一个是允许您添加学生而不离开模式弹出窗口的表格。当另一个变得可见时，它们的可见性被切换。

我会按顺序进行（即让他们在测试前添加学生），但学生可能已经存在，所以我设置了自动完成输入。只有当学生不存在时，他们才会添加一个新学生。

我正在使用客户端代码处理所有这些（包括学生的插入）。

添加后，我需要在测试表单上填充学生姓名、ID 等控件，但我不想在测试表单中通过 ID 显式设置控件 b/c 我将使用此面板在其他表格上。实现这一点的最佳方法是什么？我的第一个想法是在学生 div 变得不可见时处理一个事件，但我不知道这样的事件是否存在，这让我认为可能有一种更传统的方式。

我希望一切都说得通。如果需要任何细节，我可以发布一些代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:04:17.373

如果我理解您在说什么......并且如果您正在控制学生 div 的可见性，那么您可以使用回调方法进行更新。例如：

```
$('#modal .student').hide(function(){
    /* do the update here */
}); 
```

否则，我认为这将取决于模态插件及其提供的回调。

# pandas - Pandas：重新索引多索引，广播结果

> ID：15911113
> 
> 赞同：1
> 
> 时间：2013-04-09T19:45:39.150
> 
> 标签：pandas, aggregate, reindex

我有一个多索引数据框，其中包含不同地区、大小和日期的销售数据。我想按大小计算每个日期的“全球”（所有地区）销售额总和，然后将其分配给原始数据框中的一列，每个全球销售值和大小广播到每个地区。我以为我可以按大小和日期分组，然后按 cumsum() 分组，然后将答案重新索引到原始数据帧，但这似乎不起作用。

这是设置代码：

```
import pandas as pd
#Create the dataframe 'df'
regions=['NorthAm']*9
regions.extend(['APAC']*9)
regions.extend(['Eur']*9)
sizes=[12]*3
sizes.extend([14]*3)
sizes.extend([16]*3)
sizes=sizes*3
dates=['1/1/2011','1/2/2011','1/3/2011']*27
idx=zip(regions,sizes,dates)
idx=pd.MultiIndex.from_tuples(idx, names=['Region','Size','Date'])
df=pd.DataFrame(np.arange(27), index = idx, columns=['Sales']) 

# Check it
df

Out[1]: 
                       Sales
Region  Size Date           
NorthAm 12   1/1/2011      0
             1/2/2011      1
             1/3/2011      2
        14   1/1/2011      3
             1/2/2011      4
             1/3/2011      5
        16   1/1/2011      6
             1/2/2011      7
             1/3/2011      8
APAC    12   1/1/2011      9
             1/2/2011     10
             1/3/2011     11
        14   1/1/2011     12
             1/2/2011     13
             1/3/2011     14
        16   1/1/2011     15
             1/2/2011     16
             1/3/2011     17
Eur     12   1/1/2011     18
             1/2/2011     19
             1/3/2011     20
        14   1/1/2011     21
             1/2/2011     22
             1/3/2011     23
        16   1/1/2011     24
             1/2/2011     25
             1/3/2011     26

# Yes, that's right. Now create the cumulative sum, regardless of region
cs=df.groupby(level=['Size','Date']).sum().groupby(level=0).cumsum()

# Check it.
cs

Out[1]: 
               Sales
Size Date           
12   1/1/2011     27
     1/2/2011     57
     1/3/2011     90
14   1/1/2011     36
     1/2/2011     75
     1/3/2011    117
16   1/1/2011     45
     1/2/2011     93
     1/3/2011    144 
```

现在我想做类似的事情：

```
df['WWSales']=cd.reindex(df, method='???') 
```

得到类似的东西：

```
Out[2]:
                       Sales    WWSales
Region  Size Date           
NorthAm 12   1/1/2011      0    27
             1/2/2011      1    57
             1/3/2011      2    90
        14   1/1/2011      3    36
             1/2/2011      4    75
             1/3/2011      5   115
        16   1/1/2011      6    45
             1/2/2011      7    93
             1/3/2011      8   144
APAC    12   1/1/2011      9    27
             1/2/2011     10    57
             1/3/2011     11    90
        14   1/1/2011     12    36
             1/2/2011     13    75
             1/3/2011     14   115
        16   1/1/2011     15    45
             1/2/2011     16    93
             1/3/2011     17   144
Eur     12   1/1/2011     18    27
             1/2/2011     19    57
             1/3/2011     20    90
        14   1/1/2011     21    36
             1/2/2011     22    75
             1/3/2011     23   115
        16   1/1/2011     24    45
             1/2/2011     25    93
             1/3/2011     26   144 
```

我怀疑有一些非常明显的解决方案，但我没有看到它（也没有在搜索中找到它）。任何帮助将不胜感激。

顺便说一句，将日期列转换为 DateTimeIndex 的优雅方式的奖励积分。以下工作，但似乎不优雅：

```
df.index.levels[2]=pd.tseries.period.DatetimeIndex(df.index.levels[2]) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:11:31.657

代替（隐式）*应用* `sum`and ，在每个组上`cumsum`使用该方法。`transform`那是：

```
df['WWSales'] = df.groupby(level=['Size','Date']).transform(np.sum).groupby(level=0).transform(np.cumsum) 
```

这给出了你想要的输出。

见[http://pandas.pydata.org/pandas-docs/dev/groupby.html#transformation](http://pandas.pydata.org/pandas-docs/dev/groupby.html#transformation)

我将对您的奖励问题进行破解：您可以映射`Timestamp`到您的列表中。

```
 dates = map(pd.Timestamp, ['1/1/2011','1/2/2011','1/3/2011']*27) 
```

但我希望有一种更简洁的方法——我将这个问题让给更有经验的声音......

# arrays - Perl 中的数组和负索引

> ID：15911115
> 
> 赞同：6
> 
> 时间：2013-04-09T19:45:42.860
> 
> 标签：arrays, perl

我是新手，`Perl`我正在阅读有关数组的信息。
据我了解，数组会根据需要自动扩展（很酷！）
但我还读到我们可以使用负索引以相反的顺序访问数组。
例如，一个包含 3 个元素的数组可以按以下方式访问：
`$array[0] $array[1] $array[2]`
或
`$array[-1] $array[-2] $array[-3]` （以相反的顺序）。
我的问题是小于`-3`eg的值会发生什么`$array[-5]`？
数组是扩展还是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T20:02:17.770

如果你读它，结果和读一样`$array[5]`——值不存在，你得到一个 undef。向左走尽头和向右走尽头是一样的。

如果你写它，你会得到一个错误。数组只能自动向右扩展。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T21:20:45.577

如果您读取该值，您将获得一个 undef 值。

```
use strict;
use warnings;

my @l = qw(A B C);
print $l[-4]; 
```

输出到 stderr（程序继续运行）：

```
Use of uninitialized value in print at ./x.pl line 7. 
```

或者：

```
my @l = qw(A B C);
print "undef" if !defined $l[-4]; 
```

输出：

```
undef 
```

如果你想给它赋值你会得到一个错误：

```
my @l = qw(A B C);
$l[-4] = "d"; 
```

输出（程序退出）：

```
Modification of non-creatable array value attempted, subscript -4 at ./x.pl line 7. 
```

实际上可以修改间隔。所以一个数组可以开始任何值，而不仅仅是 0。

```
my @l = qw(A B C);
$[ = -4; # !!! Deprecated
print $l[-4], "\n";
print $l[-3], "\n"; 
```

输出：

```
A
B 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:57:39.967

你不能，它会抛出错误：

尝试修改不可创建的数组值，下标 -2

# php - 如何将部分字符串保存到数组的不同索引中

> ID：15911117
> 
> 赞同：0
> 
> 时间：2013-04-09T19:45:48.563
> 
> 标签：php, arrays

如何保存字符串的一部分，例如我有一个这样的字符串

```
$str="00.01.02.03.04"; 
```

我想将它保存到一个看起来像这样的数组中：

```
array1 =>00
array2 =>01
array3 =>02 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:50:26.990

你可以 $array = explode(".", $str);

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:50:27.523

```
$str="00.01.02.03.04";
$arrays = explode('.', $str); 
```

`explode`函数将字符串分隔`$str`到不同的部分，它接受它的第一个参数，`.`（这里）作为分割的分隔符。

现在`$arrays`是内部不同数据的数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:50:30.460

爆炸，[http](http://php.net/manual/en/function.explode.php) ://php.net/manual/en/function.explode.php 应该可以工作：

$arr = explode('.', $str);

# asp.net - 如何使用 Javascript 在 aspx .Net 中获取 HttpContext.Current.Application？

> ID：15911119
> 
> 赞同：2
> 
> 时间：2013-04-09T19:45:53.907
> 
> 标签：asp.net

用户登录我的网站后，他们在应用程序上下文中存储一个字符串，如下所示：

HttpContext.Current.Application[myString] = CurrentValue;

如何从 javascript 访问此变量？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:51:53.710

你不能直接从Javascript。HttpContext.Current 在服务器上，因此您可以使用隐藏字段并将其分配到您的网页代码中，或者使用 ajax 调用来获取您想要的值

已编辑

您可以创建一个使用空母版页的网页。您将在该网页上添加的代码将是`Response.Write(HttpContext.Current.Application["myVar"])`然后读取它在 ajax 调用中打印的文本。试一试，如果您发现任何问题，请告诉我

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:21:02.480

您需要在“Web 引用”中将 Web 服务文件添加到您的项目中，在该文件中创建您的 Web 方法，然后通过 javascript 调用使用该 Web 方法。

一个非常清晰易懂的教程位于[此处](http://www.semenoff.dk/en/Code-Corner/ASP.Net.AJAX/WebService-From-JavaScript.aspx)（带有示例代码）。

# python - ZODB 与龙卷风

> ID：15911121
> 
> 赞同：4
> 
> 时间：2013-04-09T19:45:56.310
> 
> 标签：python, tornado, zodb

我有一个用[Tornado](http://www.tornadoweb.org/en/stable/)构建的小型网络应用程序，我想在其中使用[ZODB](http://www.zodb.org/#documentation)进行一些数据存储。根据 ZODB 文档，[支持多线程程序，但它们应该为每个线程启动一个新连接](http://www.zodb.org/documentation/guide/transactions.html#multithreaded-zodb-programs)。我认为这意味着我必须做类似的事情

```
### On startup
dbFilename = os.path.join(os.path.dirname(os.path.abspath(__file__)), "Data.fs")
db = DB(FileStorage(dbFilename))

### Example handler
class Example(tornado.web.RequestHandler):
    def get(self):
        try:
            conn = db.open()
            root = conn.root()
            ### do stuff with root here
            root._p_changed = 1  ## Include these lines for writes
            transaction.commit() ## on sub-elements
        finally:
            conn.close() 
```

首先，对于所有 db-interacting 处理程序还是只需要进行写入的处理程序，新连接是否仍然需要？在启动时启动一个连接并将其用于我所有的阅读是否合理，然后仅在我需要写东西时才进行上述连接歌舞？

其次，在 Python 中抽象该模式的惯用方式是什么？我有类似的东西

```
def withDB(fn):
    try:
        conn = db.open()
        root = conn.root()
        res = fn(root)
        root._p_changed = 1
        transaction.commit()
        return res
    finally:
        conn.close()

def delete(formName):
    def local(root):
        ### do stuff with root here
    return withDB(local) 
```

记住，但这可能是我的 Lisp 展示。

也欢迎对该方法进行一般性的头部检查。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T19:56:56.750

您需要为每个线程创建一个新连接。ZODB 为每个连接提供一致的每个事务视图（MVCC，多视图并发控制），因此即使是读取，您也需要一个单独的连接。该连接可以重新用于一个线程中的顺序请求。

因此，对于连接，我将使用由 提供的每个线程池`ZODB.DB`，可能会缓存每个请求的连接（如[pyramid_zodbconn](https://github.com/Pylons/pyramid_zodbconn/blob/master/pyramid_zodbconn/__init__.py)所做的那样）。

在您的请求处理程序中，您可以将事务管理器用作上下文管理器：

```
class Example(tornado.web.RequestHandler):
    def get(self):
        connection = some_connection_pool.get_connection()
        with transaction.manager:
            root = conn.root()
            res = fn(root)
            root._p_changed = 1 
```

使用`transaction.manager`对象作为上下文管理器可确保事务在进入时启动，并在退出时无异常提交，在退出时异常中止。

您也可以创建一个上下文管理器来处理 ZODB 连接：

```
from contextlib import contextmanager

@contextmanager
def zodbconn(db):
    conn = db.open()
    yield conn.root()
    conn.close() 
```

然后将其与事务管理器一起用作上下文管理器：

```
class Example(tornado.web.RequestHandler):
    def get(self):
        with zodbconn(db) as root, transaction.manager:
            res = fn(root)
            root._p_changed = 1 
```

这个上下文管理器获取数据库对象，并返回根对象，当上下文再次退出时自动关闭连接。

# ruby-on-rails - 在表单中定义继承类型

> ID：15911123
> 
> 赞同：0
> 
> 时间：2013-04-09T19:45:57.190
> 
> 标签：ruby-on-rails, mongodb, mongoid

我喜欢直接从表单继承定义 mongoid 对象的类型 (:_type)。

定义和对象的类型非常简单：

```
shapes.build({ x: 0, y: 0 }, Circle) 
```

但是现在我想知道是否可以通过使用表单中的参数来自动构建这样的对象。像这样的东西：

```
<%= form_for :shapes do |s| %>
    <%= s.text_field(:x) %>
    <%= s.text_field(:y) %>
    <%= t.hidden_field(:_type, value: "Circle") %>
<% end %> 
```

然后使用类似的东西：

```
Shapes.new(params[:shapes]) 
```

在隐藏字段中定义 _type 值似乎是不可能的。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:10:44.493

尝试以下内容

```
model = params[:shapes][:_type].to_s.classify.constantize

model.new(params[:shapes]) 
```

第一位获取字符串并将其转换为实际的类，因此“Circle”变成了 Circle，如果你明白我的意思的话。下一部分在实际类而不是该类的父类上调用 new。这样就设置了正确的类型。

[常量化的文档](http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html#method-i-constantize)

# android - Android：选择视频中的音轨

> ID：15911135
> 
> 赞同：2
> 
> 时间：2013-04-09T19:46:52.573
> 
> 标签：android, audio, media-player

我有一些 .mp4 视频，它们有多个音轨，每个音轨都对应一种特定的语言。

我在 stackoverflow 上发现[了这个问题](https://stackoverflow.com/questions/8789529/android-multiple-audio-tracks-in-a-videoview)，但用户没有发布他的解决方案。

我想知道如何从 .mp4 视频中选择一个音轨并播放它而不同时听到其他音轨？

我没有任何限制，好像它需要是一个 VideoView 或一个基于 Intent.ACTION_VIEW 的 Activity。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-04-05T15:45:44.727

利用`MediaPlayer.selectTrack(TrackIndex);`

获取跟踪索引使用

```
findTrackIndexFor(TrackInfo.MEDIA_TRACK_TYPE_AUDIO, MediaPlayer.getTrackInfo());

private int findTrackIndexFor(int mediaTrackType, TrackInfo[] trackInfo) {
        int index = -1;
        for (int i = 0; i < trackInfo.length; i++) {
            if (trackInfo[i].getTrackType() == mediaTrackType) {

                return i;
            }
        }
        return index;
    } 
```

你能帮我发布那个多轨视频文件吗？

# php - 使用变量连接访问数组元素的任何方式

> ID：15911136
> 
> 赞同：2
> 
> 时间：2013-04-09T19:46:54.183
> 
> 标签：php

给定一个具有通过数组“$a”的字符串路径的变量，无论如何可以访问数组“$a”吗？

例如：

```
$b = "['one']['1.1']";
$a = array(
    'one' => array(
        '1.1' => 'One point One',
        '1.2' => 'One point Two',
    ),
    'two' => array(
        '2.1' => 'Two point One',
        '2.2' => array(
            '2.2.1' => 'Two point Two point One',
        ),
    ),
);

echo ${$a.$b}; 
```

我尝试了 ${$a.$b} 和其他几种变体，有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:15:52.697

正如所指出的那样，您有 eval() 选项，并且在适当的情况下，我个人不是 eval 仇恨者。

我只是想建议也许有更好的方法来处理您的问题。

现在我不明白变量 $b 是从哪里来的，但是如果你将它存储为 2 个变量，它似乎对你更有用，然后你可以直接使用它们来访问数组，例如：

```
 $b = 'one';
  $c = '1.1';
$a = array(
    'one' => array(
        '1.1' => 'One point One',
        '1.2' => 'One point Two',
    ),
    'two' => array(
        '2.1' => 'Two point One',
        '2.2' => array(
            '2.2.1' => 'Two point Two point One',
        ),
    ),
);

echo $a[$b][$c]; 
```

如果您无法控制变量 $b，或者您正在使用它来描述变量深度的数组，您可以将其结构简化为“one-1.1”或“one-two-1.1”之类的东西，并将变量解析为您需要的索引。

例如 ：

```
 $b = 'one-1.1';

$a = array(
    'one' => array(
        '1.1' => 'One point One',
        '1.2' => 'One point Two',
    ),
    'two' => array(
        '2.1' => 'Two point One',
        '2.2' => array(
            '2.2.1' => 'Two point Two point One',
        ),
    ),
);

function resolveArray($path, $array)
{    
    $indexes = explode('-', $path);
    $depth = count($indexes);

    $target = $array;

    for($i = 0; $i < $depth; $i++)
    {
        $target = $target[$indexes[$i]];
    }

     return $target;   
}

echo resolveArray($b, $a); 
```

您可以修改上述内容以处理您的问题中描述的路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:48:56.707

不，没有您想要的内置快捷方式。你可以尝试使用`eval()`，但我真的不推荐它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:51:36.687

您可以[`eval`](http://php.net/eval)用于此目的。但是，请注意，可能有更好的方法来做您所做的事情，并且`eval()`应该对放入的任何东西进行良好的消毒。

```
eval("echo \$a$b;"); 
```

# linq - 带有连接的 Linq 分组

> ID：15911138
> 
> 赞同：0
> 
> 时间：2013-04-09T19:46:56.000
> 
> 标签：linq, join, left-join, linq-group

我正在使用 Linq 构造一些 XML 对象，并设法使用类似于以下示例的代码来获得我想要的东西。我不禁觉得它可能会更好。真正困扰我的是“插图”节点，我必须将组加入到原始数据中。

您可以通过运行查询来查看我正在尝试做什么（我使用过 Linqpad）。有一个页面列表，其中一些有插图。如果有插图，我想列出所有带有插图的页面。

有什么意见请..？

```
var illustrations = new []
{
    new {page = 1, illustration= "a"}, 
    new {page = 2, illustration = "b"}, 
    new {page = 1, illustration = "c"}
};
var pages = new []
{
    new {page = 1, pageName = "w"}, 
    new {page = 2, pageName = "x"}, 
    new {page = 3, pageName = "y"}, 
    new {page = 4, pageName = "z"}
};

var x1 = new XElement("contents",
    from page in pages join illustration in illustrations on page.page equals illustration.page
    into pagesIllustrations from pr in pagesIllustrations.DefaultIfEmpty()  //Left outer join
    group page by page.page into g
    select new XElement("content",
        new XAttribute("contentPageName", g.First().pageName),
        new XElement("pages", 
            from o1 in g.Distinct()
            select new XElement("page",
                new XAttribute("PageNumber", o1.page),
                new XAttribute("PageName", o1.pageName))),
        new XElement("illustrations", 
            from o2 in g.Distinct() join i in illustrations on o2.page equals i.page
            select new XElement("illustration", 
                new XAttribute("PageNumber", i.page), 
                new XAttribute("IllustrationName", i.illustration)))));

x1.Dump(); 
```

这是我正在制作的 xml。这正是我想要的，我只是不禁觉得我没有以最好的方式做到这一点。

```
<contents>
  <content contentFileName="w">
    <pages>
      <page PageNumber="1" PageName="w" />
    </pages>
    <resources>
      <resource PageNumber="1" ResourceName="a" />
      <resource PageNumber="1" ResourceName="c" />
    </resources>
  </content>
  <content contentFileName="x">
    <pages>
      <page PageNumber="2" PageName="x" />
    </pages>
    <resources>
      <resource PageNumber="2" ResourceName="b" />
    </resources>
  </content>
  <content contentFileName="y">
    <pages>
      <page PageNumber="3" PageName="y" />
    </pages>
    <resources />
  </content>
  <content contentFileName="z">
    <pages>
      <page PageNumber="4" PageName="z" />
    </pages>
    <resources />
  </content>
</contents> 
```

# c++ - 在 C++ 中将 Unicode 写入文件

> ID：15911141
> 
> 赞同：6
> 
> 时间：2013-04-09T19:47:00.347
> 
> 标签：c++, unicode, ofstream, writetofile

我在用 C++ 将 unicode 写入文件时遇到问题。我想用我自己的扩展名向文件中写入一些笑脸，您可以通过键入 ALT+NUMPAD(2) 来获得这些笑脸。我可以通过创建一个字符并为其分配 '\2' 的值来在 CMD 上显示它，它会显示一个笑脸，但它不会将其写入文件。

这是我的程序的代码片段：

```
ofstream myfile;
myfile.open("C:\Users\My Username\test.exampleCodeFile");
myfile << "\2";
myfile.close(); 
```

它会写入文件，但不会显示我想要的。我会向您展示它显示的内容，但 StackOverflow 不会让我显示该角色。提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T23:51:21.457

您必须使用 Unicode 来指定要显示的字符。控制台中由字节表示的字符`02h`由代码页 437 ( [cp437](http://en.wikipedia.org/wiki/Code_page_437) ) 转换为 Unicode 字符`U+263B`。使用以 UTF-8 保存的带有 BOM 的源文件可以更轻松地使用 Unicode，因为您可以粘贴或键入所需的字符，而无需使用 Unicode 转义码。

对于文件流，需要将流配置为 UTF-8。有多种方法可以做到这一点，这取决于编译器，但使用 Visual Studio 2012，源代码保存在 UTF-8 w/BOM 中，还有一些谷歌搜索：

```
#include <locale>
#include <codecvt>
#include <fstream>
#include <iostream>
#include <io.h>
#include <fcntl.h>
using namespace std;

int main()
{
    const std::locale utf8_locale = std::locale(std::locale(), new std::codecvt_utf8<wchar_t>());
    wofstream f(L"sample.txt");
    f.imbue(utf8_locale);
    f << L"\u263b我是美国人。我叫马克。" << endl;

    _setmode(_fileno(stdout),_O_U16TEXT);
    wcout << L"\u263b我是美国人。我叫马克。" << endl;
} 
```

`sample.txt`在记事本中查看的内容：

```
☻我是美国人。我叫马克。 
```

十六进制转储（正确的 UTF-8）：

```
E68891E698AFE7BE8EE59BBDE4BABAE38082E68891E58FABE9A9ACE5858BE380820D0A 
```

输出到控制台剪切并粘贴在这里。没有正确字体的每个汉字的视觉显示是�，但字符显示正确粘贴到 SO 或记事本中。

```
☻我是美国人。我叫马克。 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T22:55:17.333

ALT+NUMPAD2 与 ASCII 字符 2 不同，后者是您的代码写入文件的内容。ALT 代码是 DOS 处理非 ASCII 字符的方式。CMD.COM 为 ALT+NUMPAD2 显示的字形实际上是 Unicode 代码点 U+263B “BLACK SMILING FACE”。作为 Unicode 字符，您最好使用 UTF-8 或 UTF-16 对文件进行编码，例如：

```
ofstream myfile;
myfile.open("C:\\Users\My Username\\test.txt");
myfile << "\xEF\xBB\xBF"; // UTF-8 BOM
myfile << "\xE2\x98\xBB"; // U+263B
myfile.close(); 
```

.

```
ofstream myfile;
myfile.open("C:\\Users\\My Username\\test.txt");
myfile << "\xFF\xFE"; // UTF-16 BOM
myfile << "\x3B\x26"; // U+263B
myfile.close(); 
```

这两种方法都在记事本中显示笑脸（前提是您使用支持笑脸的字体），因为它首先读取 BOM，然后根据该信息相应地解码 Unicode 代码点。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-09T23:48:29.520

您使用的与 Unicode 完全相反。控制台使用 8 位代码页运行，西方机器上的默认代码页是[代码页 437](http://en.wikipedia.org/wiki/Code_page_437)。它与旧的 IBM PC 字符 ROM 的字符集相匹配，并且是大多数遗留 DOS 程序所期望的代码页。第一组字符代码，代码 0 到 8 如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/n69xr.png)

请注意代码 0x02 的笑脸，即您在控制台上看到的笑脸。[您可以在这篇Wikipedia 文章](http://en.wikipedia.org/wiki/Code_page_437)中查看其余的字形。8 位字符编码的一个令人讨厌的问题是它们太多了。*记事本使用不同*的代码页读取您的文件。默认情况下，在西欧和美洲的机器上是[Windows-1252 。](http://en.wikipedia.org/wiki/Code_page_1252)该页面没有任何控制代码的字形，这就是您在记事本中看不到笑脸的原因。

处理代码页是一个令人头疼的问题。这就是发明Unicode的原因。

可以将控制台切换到 Unicode 代码页。然而，它仍然必须是 8 位编码，这是支持输出重定向的控制台程序的另一个遗留问题。这使得正确的选择 utf-8。`chcp 65001`您可以在启动程序之前通过键入从控制台本身切换。或者您可以在您的代码中执行此操作，调用`SetConsoleOutputCP(CP_UTF8);`.

您必须注意的另一个不幸的细节是，您还需要更改用于控制台的字体。默认字体是 TERMINAL，这是一种传统字体，旨在显示 IBM PC 字形，但不了解 Unicode。使用系统菜单切换（按Alt+Space，Properties），选择不多但Consolas或Lucinda Console都适合。

现在您可以显示 Unicode，这是 Remy 介绍的另一回事。

# javascript - IE 9 无法重现的问题

> ID：15911148
> 
> 赞同：0
> 
> 时间：2013-04-09T19:47:24.643
> 
> 标签：javascript, jquery, event-propagation

基本上，我有大量的 JQ 可以在每个浏览器上运行良好，包括 IE 9/10。我今天请一位销售代表测试一些东西，他们的电脑上装有 IE 9。

当用户单击将 HTML 填充到表格中的按钮时，页面会跳转到顶部。我知道这是由事件传播引起的（My other SO Post: [jQuery Dynamically Updating Fields Scrolls Page](https://stackoverflow.com/questions/14753826/jquery-dynamically-updating-fields-scrolls-page)）。因此，我在适用的任何地方都返回 false（或使用 event.stopPropagation()，具体取决于。）。

但是，当这个用户加载页面时，此问题再次出现。

是否有我应该检查的设置（注意 JS 工作正常，页面只是跳转，所以禁用 JS 应该不是问题）或者我应该把它写成“没人知道你到底对浏览器做了什么，但它不能在其他地方复制”？

我只是不知所措，这是我在 JQ 或 UI 开发方面所做的最多的事情（我喜欢坚持事情的后端），所以我不确定要寻找的任何怪癖或任何东西。

如果我可以做些什么来使这个问题更加连贯，请告诉我，我会尝试的。我知道没有什么可做的，但我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:52:20.687

不，它不是由事件传播引起的，而是由按钮的默认操作引起的。而不是打电话`.stopPropagation()`，你应该打电话`.preventDefault()`。

# php - 显示搜索值

> ID：15911152
> 
> 赞同：-3
> 
> 时间：2013-04-09T19:47:44.400
> 
> 标签：php, search

我试图创建一个 php 页面，您可以在其中搜索多个给定点的数据库我已经编写了搜索部分，但我不知道如何显示找到的项目到目前为止我的代码是

```
<html>
<body>
<link rel="stylesheet" href="css/reset.css" type="text/css" media="all">
<link rel="stylesheet" href="css/grid.css" type="text/css" media="all">
<link rel="stylesheet" href="css/home.css" type="text/css" media="all">
<?php
 $connectie = mysql_connect('localhost','root','usbw');
 if($connectie == false){echo "error";}

 if(mysql_select_db('makelaars',$connectie) == false){ echo "error2";}
 ?>
 <table>
<tr>
    <td width= 100>
        Soort Object: 
    </td>
    <td>
    <form action="<?php echo $_SERVER['PHP_SELF']; ?>" method='post'>
    <select name="soort">
        <?php
            $query_soort = "SELECT DISTINCT `Soort_object` FROM `objecten`";
            $resultaat = mysql_query($query_soort, $connectie);
            $inhoud_soort = $_POST['blog'];
        while ($soort = mysql_fetch_assoc($resultaat)) {
            echo "<option>" . htmlentities($soort['Soort_object']) . "</option>";
        }   
        ?>
    </select>
    </td>
    </tr>
    <tr>
    <td>
    <p>Status:</p>
    </td>
    <td>
    <select name="soort">
        <?php
            $query_status = "SELECT DISTINCT `status` FROM `objecten`";
            $resultaatstatus = mysql_query($query_status, $connectie);
            $inhoud_status = $_POST['blog'];
        while ($status = mysql_fetch_assoc($resultaatstatus)) {
            echo "<option>" . htmlentities($status['status']) . "</option>";
        }   
        ?>
    </select>
    </td>

</tr>
<tr>
    <td>
    <p>Provincie:</p>
    </td>
    <td>
    <select name="provincie">
        <?php
            $query_provincie = "SELECT DISTINCT `Provincie` FROM `objecten`";
            $resultaatprovincie = mysql_query($query_provincie, $connectie);
            $inhoud_provincie = $_POST['blog'];
        while ($provincie = mysql_fetch_assoc($resultaatprovincie)) {
            echo "<option>" . htmlentities($provincie['Provincie']) . "</option>";
        }   
        ?>
    </select>
    </td>
    <td>
        <input type="submit" value="verstuur" name="soortknop">
    </td>

</tr>
<tr>

    <td>

    </td>
    </form> 
```

有人可以解释一下我如何显示与搜索结果相同的数据吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:12:27.227

没有机会对此进行正确测试，但它应该或多或少地工作。请看一下代码中的注释，您有一个错误（“选择”标签的名称），如果未修复，运行此代码后将显示错误！

在连接到数据库后放置它。您所做的基本上是检查是否单击了提交按钮（然后设置了与提交按钮名称相对应的 $_POST 属性）。如果没有提交，代码将根本不会执行，也不会显示结果。

我还建议您不要使用 mysql_ 函数，而是查看诸如 PDO 之类的库。它的参数化查询使您的脚本更加安全并防止 SQL 注入。

```
<?php

// Submit button was clicked
if(isset($_POST['soortknop'])) {

    // Sanitize data
    $post_soort = mysql_real_escape_string($_POST['soort']);
    $post_status = mysql_real_escape_string($_POST['status']); // changed this, you've two select fields 'soort'?
    $post_provincie = mysql_real_escape_string($_POST['provincie']);

    // Fetch results using all $post_ variables
    $result_query = mysql_query(
        "SELECT *
        FROM 'objecten'
        WHERE Soort_object = '" . $post_soort . "'
            AND status = '" . $post_status . "'
            AND Provincie = '" . $post_provincie . "'");

    // Display results
    while ($row = mysql_fetch_assoc($result_query)) {
        echo htmlentities($row['Soort_object']) . " " . htmlentities($row['status']) . " " . htmlentities($row['post_provincie ']);
    }

} 
```

# javascript - 使用 JQuery 和 IE 导致性能极度下降

> ID：15911158
> 
> 赞同：1
> 
> 时间：2013-04-09T19:48:05.920
> 
> 标签：javascript, jquery, performance, internet-explorer

我使用以下查询按内容选择 2 个元素：

```
$('.a .b:contains("Padding Before"), .a .b:contains("Padding After")'); 
```

这个查询非常慢，在我的电脑上执行需要 2 秒。没有`:contains`它将返回一个只有 11 个元素的数据集。

然后我尝试优化它：

```
$('.a .b:contains("Padding")'); // or similiar query, but the result set is the same - 2 elements 
```

我使用 internet explorer 10 进行测试，我预计修改后它的执行速度会快 2 倍。

取而代之的是，现在它的执行速度快了几十倍或几百倍。

那么，查询连接怎么可能对查询性能产生如此极端的影响呢？

如果我做同样的事情但有 2 个查询，我可以让相同的查询快 50-100 倍：

```
var n = $('.a .b:contains("Padding After")')
var m = $('.a .b:contains("Padding Before")'); 
```

这是 JQuery 1.8.23 / IE 中的错误还是导致性能下降的原因是什么？在 Chrome 上没有这样的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:53:07.817

用“，”分隔的多个选择器比多选慢的一个重要原因是：使用大选择器时要直接合并的所有 jQuery 集合会强制 jQuery 按照它们在文档中出现的顺序对它们进行排序。

而且我认为在您的情况下，“之前填充”和“之后填充”元素是相当交错的，因此会导致较长的合并重新排序时间。

关于 ":contains"... 如果您编写模板，您可能更喜欢为这些元素添加一个类。

一般而言，性能意味着使用您知道的选择器在 DOM 方面进行了优化。

# python - 代码不在庞大的数据集上运行

> ID：15911159
> 
> 赞同：1
> 
> 时间：2013-04-09T19:48:07.577
> 
> 标签：python, python-2.7

这是在我的系统上运行的代码，代码运行良好，数据量很少，但相同的代码不适用于大量数据集或文本文件，是的@ennikiller 是对的，有些文件是空的（意味着它们没有`Esgn`值，但它们有其他值），我想将其处理为，它应该`Esgn`为所有其他值分配零或仅计算最小值并离开`Esgn`（在该特定文件中不包含`Esgn`全部）

```
 import os.path
    import glob
    import re
    import itertools
    from collections import namedtuple, deque
    from operator import attrgetter

    R_PREFIX_VALUE = re.compile(r'^(?P<prefix>[A-Z]+)(?P<suffix>\d+)\s+(?P<value>\d+)\s*$')

    getvalue  = attrgetter('value')

    def interleave(seq, val):
        return itertools.chain.from_iterable(itertools.izip(seq, itertools.repeat(val)))

    class Fileline(namedtuple('Fileline', 'filename prefix suffix value')):
        @classmethod
        def _fromstr(cls, s, filename=None, rematch=R_PREFIX_VALUE.match):
            m = rematch(s)
            if not m:
                raise ValueError('No valid line found in %r' % s)
            d = m.groupdict()
            d['value'] = int(d['value'])
            d['filename'] = filename
            return cls(**d)

        def _asstr(self):
            return '{}{} {}'.format(self.prefix, self.suffix, self.value)

    def max_value_with_prefix(lineseq, prefix, getvalue=getvalue):
        withprefix = (line for line in lineseq if line.prefix==prefix)
        return max_value(withprefix)

    def filter_lt_line(lineseq, maxline):
        for line in lineseq:
            if line.prefix != maxline.prefix or line.value >= maxline.value:
                yield line

    def extreme_value(fn, lineseq, getvalue=getvalue):
        try:
            return fn((l for l in lineseq if l is not None), key=getvalue)
        except ValueError:
            return None

    def max_value(lineseq):
        return extreme_value(max, lineseq)

    def min_value(lineseq):
        return extreme_value(min, lineseq)

    def read_lines(fn, maker=Fileline._fromstr):
        with open(fn, 'rb') as f:
            return deque(maker(l, fn) for l in f)

    def write_file(fn, lineseq):
        lines = (l._asstr() for l in lineseq)
        newlines = interleave(lines, '\n')
        with open(fn, 'wb') as f:
            f.writelines(newlines)

    def write_output_file(fn, lineseq):
        lines = ("{} {}".format(l.filename, l.value) for l in lineseq)
        newlines = interleave(lines, "\n")
        with open(fn, 'wb') as f:
            f.writelines(newlines)

    def filter_max_returning_min(fn, prefix):
        lineseq = read_lines(fn)
        maxvalue = max_value_with_prefix(lineseq, prefix)
        filteredlineseq = deque(filter_lt_line(lineseq, maxvalue))
        write_file(fn, filteredlineseq)
        minline = min_value(filteredlineseq)
        return minline

    def main(fileglob, prefix, outputfile):
        minline = None
        for fn in glob.iglob(fileglob):
            fileminline = filter_max_returning_min(fn, prefix)
            minline = min_value([minline, fileminline])
        write_output_file(outputfile, [minline])
    def _worker(args):
        return filter_max_returning_min(*args)

    """def multi_main(fileglob, prefix, outputfile, processes):
        from multiprocessing import Pool
        pool = Pool(processes=processes)
        workerargs = ((fn, prefix) for fn in glob.iglob(fileglob))
        minlines = pool.imap_unordered(_worker, workerargs, processes)
        minline = min_value(minlines)
        write_file(outputfile, [minline])"""
    def main(fileglob, prefix, outputfile):
        minlines = []
        for fn in glob.iglob(fileglob):
            minlines.append(filter_max_returning_min(fn, prefix))
        write_output_file(outputfile, minlines)
    main('C:\Python27\DataSet\*.txt', 'ENSG', 'output.txt') 
```

这是我的代码，这个代码在 10/20 文本文件上运行良好，但是当我运行它 3000 txt 文件时，它给了我以下错误

```
 Traceback (most recent call last):
      File "C:\Users\Ir\Desktop\S_Project\Finding_min_val_and_escaping_'Esgn'\dataset_code.py", line 95, in <module>
        main('C:\Python27\DataSet\*.txt', 'ENSG', 'output.txt')
      File "C:\Users\Ir\Desktop\S_Project\Finding_min_val_and_escaping_'Esgn'\dataset_code.py", line 93, in main
        minlines.append(filter_max_returning_min(fn, prefix))
      File "C:\Users\Ir\Desktop\S_Project\Finding_min_val_and_escaping_'Esgn'\dataset_code.py", line 69, in filter_max_returning_min
        filteredlineseq = deque(filter_lt_line(lineseq, maxvalue))
      File "C:\Users\Ir\Desktop\S_Project\Finding_min_val_and_escaping_'Esgn'\dataset_code.py", line 35, in filter_lt_line
        if line.prefix != maxline.prefix or line.value >= maxline.value:
    AttributeError: 'NoneType' object has no attribute 'prefix'
lines = ("{} {}".format(l.filename, l.value) for l in lineseq)
AttributeError: 'NoneType' object has no attribute 'filename' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:52:00.340

尝试打印出 line 和 maxline 的值

显然，其中一个或另一个被设置为无。很可能是maxline，如果事实确实如此。所以找出你为什么为 maxline 传递 None 。所以你真的应该看这里：

```
try:
    lineseq = read_lines(fn)
    maxvalue = max_value_with_prefix(lineseq, prefix)
    filteredlineseq = deque(filter_lt_line(lineseq, maxvalue))
    write_file(fn, filteredlineseq)
    minline = min_value(filteredlineseq)
except:
    print "%s is apparently empty" % fn
    minline = None
finally:
    return milline 
```

fn 有可能是一个空文件吗？

正如 Joran 所说，您只需要添加一些异常处理（我已在上面添加）

# java - 缓存自动过期的项目

> ID：15911161
> 
> 赞同：0
> 
> 时间：2013-04-09T19:48:12.633
> 
> 标签：java, guava

Java、Guava 或其他可以执行以下操作的库中是否有可用的 Cache 实现：

*   具有自动过期项目的键、值缓存。修改该值会重新启动到期计时器。每个键/值对分别过期（有自己的计时器）。
*   可以手动添加项目，例如，`cache.put(key, value);`

我见过 Guava `LoadingCache`，但该实现需要您实现该`load(key)`方法。该`load(key)`方法旨在通过使用数据库或其他资源基于键计算值。一旦通过该`load(key)`方法计算出该值，我相信`LoadingCache`会将结果（键，值）对粘贴在缓存中。

我的实现要求与我的不同，`LoadingCache`因为我的键将保持固定，但相应的值将在我抓取数据库时缓慢更新。换句话说，我不想像 LoadingCache 在它的`load(key)`方法中那样一次加载整个值——我想保持键不变，并根据我从数据库中获得的内容增量更新值 Object。因此，这似乎排除了使用，`LoadingCache`因为该`load(key)`方法会强制您一次加载键的相应值。

我想要增量加载值（对于每个键）的原因是因为它需要很长时间，并且我使用 AJAX 轮询来保持用户更新。因此，一次加载它是没有用的。我想缓存这些值，以便可以使用 AJAX 轻松检索它们。我希望它们过期，因为一旦用户完成访问网页，它们就没有用了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:51:42.937

[JCS](http://commons.apache.org/proper/commons-jcs/)支持空闲时间过期和手动添加

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-19T16:11:24.963

按照@Louis Wasserman 的建议，我实现了以下代码：

```
LoadingCache<String, WorkerItem> cache = CacheBuilder.newBuilder()
.concurrencyLevel(level) 
.maximumSize(size)
.expireAfterWrite(seconds, TimeUnit.SECONDS)
.removalListener(this)
.build(
    new CacheLoader<String, WorkerItem>() {
        public WorkerItem load(String key) throws Exception {
            WorkerItem workerItem = new MoreSpecificWorkerItem();
            workerItem.setTask(key);
            Controller.beginWorking(workerItem); //Runs in thread pool
            return workerItem;
        }
    }
); 
```

当用户在 Cache 上调用 get() 时，它将立即返回`WorkerItem`并在后台填充它。只要您`WorkerItem`使用`isFinished()`方法或类似方法实现，就可以知道它何时可以使用。

而且我实施了清理服务，因为缓存不会定期删除过期项目。过期的项目只是简单地标记为脏，并在您下次访问它们或下次调用清理时被删除。

```
final Runnable doCleanup = new Runnable() {
    public void run() { 
        LoadingCache<K, V> cache = getCache();
        cache.cleanUp();
        }
    }

ScheduledFuture<?> cleanupHandle = scheduler.scheduleAtFixedRate(doCleanup, 1, 1, TimeUnit.MINUTES);
return cleanupHandle; 
```

# json - 如何使用经典 ASP 从 xmlhttprequest 发送 Json 对象（或字符串数 据）？

> ID：15911164
> 
> 赞同：4
> 
> 时间：2013-04-09T19:48:21.280
> 
> 标签：json, asp-classic, xmlhttprequest

我编写了一个 ASP 脚本来生成 JSON 数据/字符串。如何将该数据发送到 Web 服务？我得到了以下信息，但我无权访问服务器来注册任何 dll 文件。我做了一些搜索，发现我应该使用 XMLHttpRequest 但不知道该怎么做。

请帮忙。谢谢你。

连接到 Web 服务 Web 服务通过 HTTP 协议工作。建议此 Web 服务在投入生产后使用安全套接字层 (HTTPS)。Web 服务旨在使用以下 URL：[http ://thedomain.com/api/push](http://thedomain.com/api/push)

该站点在标头中使用身份验证令牌来防止爬虫干扰 Web 服务。发送数据时，添加一个名为 HTTP_TOKENKEY 的标头，其值为 ABCDEFGHIJKL。这是推荐使用 HTTPS 的原因之一。Web 服务将在请求的 POST 中查找 JSON 数据并将 JSON 响应发送回客户端。

这就是我到目前为止所拥有的

* * *

```
strJSONToSend = theevent 

webserviceurl = "http://thedomain.com/api/push"

Set objRequest = Server.createobject("MSXML2.XMLHTTP.3.0") 
objRequest.open "POST", webserviceurl, False 

objRequest.setRequestHeader "Content-Type", "application/json; charset=UTF-8" 
objRequest.setRequestHeader "HTTP_TOKENKEY","ABCDEFGHIJKLMNOPQ" 
objRequest.setRequestHeader "SOAPAction", webserviceurl

results = objRequest.send (strJSONToSend)
write (results)

set objJSONDoc = nothing 
set objResult = nothing 
```

* * *

这冻结了，什么都不做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-19T18:21:37.970

这是我之前在此 URL 上发布的一些代码，适用于您的情况：

[http://naterice.com/articles/69](http://naterice.com/articles/69)

```
strJSONToSend = theevent 
webserviceurl = "http://thedomain.com/api/push"

sResponseHTML = GetHTTP(strJSONToSend, webserviceurl)
If len(HTTPErrorHandeler) > 0 Then
  strResponse = HTTPErrorHandeler
Else
  strResponse = sResponseHTML
End If

Response.Write strResponse

Function GetHTTP(sSendHTML, sURL)
  'This script is provided under the Creative Commons license located'
  'at http://creativecommons.org/licenses/by-nc/2.5/ . It may not'
  'be used for commercial purposes with out the expressed written consent'
  'of NateRice.com'
  Set oHTTP = Server.CreateObject("MSXML2.ServerXMLHTTP")
  oHTTP.Open "POST", sURL, false
  oHTTP.setRequestHeader "Content-Type", "application/json; charset=UTF-8" 
  oHTTP.setRequestHeader "HTTP_TOKENKEY","ABCDEFGHIJKLMNOPQ" 
  oHTTP.setRequestHeader "SOAPAction", webserviceurl

  On Error Resume Next
  oHTTP.send sSendHTML
  sHTTPResponse = oHTTP.responseText

  If Err.Number = 0 Then
    GetHTTP = sHTTPResponse
  Else
    GetHTTP = HTTPErrorHandeler
  End If
  On Error Goto 0

  Set oHTTP = Nothing
End Function

Function HTTPErrorHandeler
  'This script is provided under the Creative Commons license located'
  'at http://creativecommons.org/licenses/by-nc/2.5/ . It may not'
  'be used for commercial purposes with out the expressed written consent'
  'of NateRice.com'
  If Err.Number <> 0 Then
  HTTPErrorHandeler = "ERROR <br />" & _
             "  ERR Number: " & Err.Number & " <br />" & _
             "  ERR Description: " & Err.Description
  Else
  HTTPErrorHandeler = ""
  End If
End Function 
```

# firebase - 在 Firebase 中创建一个空的子记录

> ID：15911165
> 
> 赞同：35
> 
> 时间：2013-04-09T19:48:29.757
> 
> 标签：firebase

我正在尝试使用 Firebase 数据视图创建一个孩子，但似乎这是不可能的，因为创建节点直接消失了，或者在任何时候都不会出现。我试图将值字段留空，但这根本不起作用以及将 null 写入值字段。我做错了吗？

-法比安

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2013-04-09T20:41:10.893

Null 和空值与不存在的记录相同。如果你希望它存在，你必须设置一个值。

换句话说，当您测试一条记录是否存在时，您不是要查看该键是否在数据库中，而是要查看路径（该键的位置）是否有任何数据。

建议：使用 0 或 false 之类的虚假值，直到您有一些数据可以放入该位置。您不会像使用 SQL 那样受到数据类型的限制，因此您以后可以随时将其替换为对象/数组/等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-30T11:43:50.363

Firebase 不支持创建空目录。

# ios - UICollectionView 无限滚动：重用索引路径并清除内容

> ID：15911166
> 
> 赞同：8
> 
> 时间：2013-04-09T19:48:34.453
> 
> 标签：ios, objective-c, cocoa-touch, uiscrollview, uicollectionview

使用上[一个问题](https://stackoverflow.com/a/15553973/406677)的答案，我做了一个无限滚动。但是，滚动时出现问题。

似乎有一毫秒，`UICollectionView`（或者可能是`UIScrollView`那个问题）认为显示的单元格不再可见，因此将单元格重用于新单元格。这导致滚动时单元格被双重使用。我认为这是我的问题的原因是因为为了能够无限滚动而使用的“作弊”是重置`contentOffset`.`UIScollView`

my 的单元格`UICollectionView`包含一个背景图像，该图像使用`MKNetworkKit`. 另一个副作用之一是，当连续滚动视图“屏幕长度”时，屏幕会被截断。几乎就像在 中发生了 reloadData 一样`UIScrollView`，但代码根本没有重新加载数据。

我的问题是：如何防止`UICollectionView`重用可见单元格和突然截断视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-13T10:39:01.333

有 2 个重用标识符。当您重置它们之间的`contentOffset`切换时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T09:05:42.387

看起来我在旋转设备时看到重用可见单元格。我用来自网络图像搜索的图像填充屏幕，并使用固定尺寸来准确填充纵向和横向的 UICollectionView 边界。但是拉伸图像会丢失我设置的大小，并且在旋转（也称为重新加载数据）时看到重复使用或更多单元格。我在重新加载之前（在collectionView：numberOfItemsInSection :）从我想要的图像数量计算当前图像大小来解决它。准确的图像适合防止我额外的负载和重用。

# java - 单线程应用程序的 GC 设置

> ID：15911168
> 
> 赞同：1
> 
> 时间：2013-04-09T19:48:37.613
> 
> 标签：java, memory-management, garbage-collection, single-threaded

单线程消除了多线程应用程序中涉及的许多复杂性。

我想知道是否有可以利用单线程应用程序的垃圾收集器配置？

现在我在 Java 运行时环境构建中使用**UseConcMarkSweepGC、incrementalMode GC**设置：Java 1.6.0_22-b04

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T07:24:32.913

如果 JVM 在单线程机器上启动，它不会使用多核所需的复杂内存屏障，从而节省了一些 CPU 周期。

但是 JVM 本质上是多线程的，即使你只有一个线程，仍然有其他线程支持 JVM。

**所以答案是否定**的，没有针对单线程应用程序优化的 GC 算法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-14T18:06:39.103

GC 策略不取决于您如何编写应用程序，而是取决于您拥有的硬件。

例如，如果您只有一个 CPU 可用，那么您不应该启用 CMS，原因有两个：

*   它会从你的应用程序中窃取这个唯一的 CPU 时间，所以你会有 STW 暂停
*   这意味着并发开销，这意味着您的应用程序将停止更长时间

在这种情况下，您应该启用 SerialGC（或 ParallelGC，在单 CPU 机器上无关紧要）。

现在，如果您有`N`可用的内核但您的应用程序只使用一个，您可以设置`-XX:ConcGCThreads=N-1`和`-XX:ParallelGCThreads=N-1`（取决于您使用的 GC），以便 JVM 充分利用您的硬件。

请注意，在设置任何标志之前，您应该启用 GC 日志，`-Xloggc:gc.log -XX:+PrintGCDetails`并在每次新配置后检查它是否提高了您的应用程序响应时间/吞吐量。

来源：http: [//jvm-options.tech.xebia.fr/](http://jvm-options.tech.xebia.fr/)

# c# - 如何在全景页面和新页面（非全景）之间导航

> ID：15911171
> 
> 赞同：1
> 
> 时间：2013-04-09T19:48:40.833
> 
> 标签：c#, windows-phone-7

所以我有列表项，当我点击一个项目时，我必须导航到一个新页面（非全景）。就像标准的数据绑定应用程序一样。我已经像数据绑定应用程序一样复制粘贴代码，没有做我想要的。

这是我的全景页面 xaml。

```
<controls:PanoramaItem x:Name="deeln" Header="Deelnemers" Style="{StaticResource subtitle}">
                <!--Double line list with image placeholder and text wrapping-->
                <ListBox Margin="12,0,-12,0" ItemsSource="{Binding ItemsDeelnemer}" x:Name="lbDeelnemer" SelectionChanged="lbDeelnemer_SelectionChanged">
                    <ListBox.ItemTemplate>
                        <DataTemplate>
                            <ScrollViewer HorizontalScrollBarVisibility="Visible" VerticalScrollBarVisibility="Disabled">

                                <StackPanel Orientation="Horizontal" Margin="0,0,0,17">
                                        <TextBlock Foreground="Black" TextWrapping="Wrap" Text="{Binding LineNr}" Style="{StaticResource PhoneTextExtraLargeStyle}" FontSize="35" ></TextBlock>
                                    <StackPanel Width="430" Height="100">
                                        <TextBlock Foreground="Black" TextWrapping="Wrap" Text="{Binding LineNaamWielrenner1}" Style="{StaticResource PhoneTextExtraLargeStyle}" FontSize="35"></TextBlock>
                                        <TextBlock Foreground="Black" TextWrapping="Wrap" Text="{Binding LineNaamWielrenner2}" Style="{StaticResource PhoneTextExtraLargeStyle}" FontSize="35"></TextBlock>
                                    </StackPanel>
                                </StackPanel>

                            </ScrollViewer>
                        </DataTemplate>
                    </ListBox.ItemTemplate>
                </ListBox>
            </controls:PanoramaItem> 
```

这是我的全景页面代码。

```
private void lbDeelnemer_SelectionChanged(object sender, SelectionChangedEventArgs e)
        {
            #region go to specific deelnemerinfo screen

           // int indexer = lbDeelnemer.SelectedIndex;

            // If selected index is -1 (no selection) do nothing
            if (lbDeelnemer.SelectedIndex == -1)
                return;
            // Navigate to the new page                    
                NavigationService.Navigate(new Uri("/DeelnemerInfo.xaml", UriKind.Relative));
                //NavigationService.Navigate(new Uri("/DeelnemerInfo.xaml?selectedItem=" + lbDeelnemer.SelectedIndex, UriKind.Relative));
            // Reset selected index to -1 (no selection)
            lbDeelnemer.SelectedIndex = -1;

            #endregion
        } 
```

注意：/DeelnemerInfo.xaml 是新页面（非全景页面）只是一个基本的纵向页面。帮我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T11:44:57.090

从列表中删除 ScrollViewer。

ScrollViewer 捕获点击/点击，并且不让 ListBox 获取它们（因此 ListBox 不获取事件）。

当您在 ListBox 中有一个按钮时，您会看到同样的事情发生 - 点击按钮时选择不会改变。

# javascript - Fullcalendar 不呈现事件

> ID：15911172
> 
> 赞同：2
> 
> 时间：2013-04-09T19:48:43.973
> 
> 标签：javascript, fullcalendar

在我的网站上使用 Fullcalendar，我有一个按钮允许用户过滤某些事件。当他们单击按钮隐藏某些事件时，会触发如下函数：

```
var hidden_elements = [];

function toggle_hidden_events(toggle) {
    // remove events
    if(!toggle) {
        // Puts the event objects we're hiding into a global array, and also removes them from Fullcalendar (works fine)
        hidden_elements = hide_elements();
    }
    else {
        // does not work
        show_events(); // we dont pass the var since its global
    }
} 
```

第一个块，`if(!toggle)`工作正常并隐藏正确的事件，并将它们正确分配给数组。

但是，当我打电话时`show_events()`，它没有按预期工作。这是函数的样子：

```
function show_events() {
    while(hidden_elements.length > 0) {
        var event = hidden_elements.pop();
        $("#calendar").fullCalendar('renderEvent', event, true);
    }
} 
```

使用`console.log(event)`，我已经验证了有效的事件对象正在传递给`renderEvent`函数。但是，它们没有出现在日历上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T06:31:15.207

看起来很奇怪，我尝试过实验并发现了同样的问题。当我们尝试渲染它时，fullcalendar 日历返回的事件对象没有显示，但是如果我们将事件对象简化为它的基本属性或删除“源”键，事件就会正确渲染。

```
 var myNewEvent = {
        "id": removedEvt.id,
            "title": removedEvt.title,
            "start": removedEvt.start,
            "end": removedEvt.end,
            "_id": removedEvt._id,
            "_start": removedEvt._start,
            "_end": removedEvt._end
        /*,
            "source" : removedEvt.source*/
    }; 
```

以下是演示链接，单击切换将切换事件。如果您取消注释源键，事件将不会呈现。但是 _id、_start、_end 也不是强制性的。

**[演示](http://jsfiddle.net/maheshsapkal/BkYbU/3/)**

希望这对您有所帮助。

# python - Python Pandas 直方图无法识别“按”分组参数

> ID：15911174
> 
> 赞同：0
> 
> 时间：2013-04-09T19:48:50.563
> 
> 标签：python, arguments, pandas, histogram

尝试通过分组生成直方图时收到错误消息。这是代码和错误消息。

我有 0.9.1 Pandas 版本

```
>>> data.hist(by=np.random.randint(0, 4, 1000))
(most recent call last):
 File "<stdin>", line 1, in <module>
 File "C:\Python27\lib\site-packages\pandas\tools\plotting.py", line 1671, in hist_series
 ax.hist(values, **kwds)
 File "C:\Python27\lib\site-packages\matplotlib\axes.py", line 7868, in hist
 p.update(kwargs)
 File "C:\Python27\lib\site-packages\matplotlib\artist.py", line 659, in update
 raise AttributeError('Unknown property %s'%k)
 AttributeError: Unknown property by 
```

# python - 如何编写可以启动新 EC2 实例的 python 脚本？

> ID：15911179
> 
> 赞同：0
> 
> 时间：2013-04-09T19:49:04.000
> 
> 标签：python, amazon-web-services, amazon-ec2

我正在为一个新项目编写一个后端，在这个后端我想要一个控制器程序。

该项目是一个大学网站，但我需要为每所大学创建一个新的 Amazon EC2 实例。我希望扩展尽可能无痛。

简而言之，我希望能够运行`controller new harvard`并让它执行以下操作：

*   创建一个新的 EC2 实例。
*   在本地数据库中创建一个名为（哈佛）及其位置（如何访问它）的新条目。
*   连接到新创建的实例并开始发送和执行文件。

我已经阅读了一些关于 boto 和 Fabric 的内容，但没有任何关于如何开始的真正线索。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T23:09:53.593

我已经使用[boto](http://boto.readthedocs.org/en/latest/)库为我的一些项目实例化了新的 EC2 实例，然后在新 EC2 系统启动后使用[结构](http://docs.fabfile.org/en/1.6/)执行配置。

要使用它们，您首先需要为亚马逊本身创建访问令牌。这些用于 boto 的令牌被放置到您的源文件中并在`connect`EC2 实例的方法中使用，或者您可以将它们放置到`.boto`您的主目录中的文件中。后者要容易得多。

您需要从亚马逊获得以下内容：

*   安全组名称和 sshkey。
*   您要创建的实例的 Ami id。
*   您想要的实例类型，例如：m1.small

使用上述信息，您将使用上述信息调用该`run_instance`方法：

```
instance = conn.run_instances( ami.ami_id, key_name=ami.sshkey.name,
     instance_type=server.game.instance_type,
     security_groups=[server.game.security_group] )
instance = instance.instances[0]

while instance.update() == "pending":
    time.sleep( 5 ) 
```

完成此操作后，一个新实例应开始在您的 Amazon 控制面板中启动。您需要检查实例的状态，一旦它处于某种`running`状态，您就可以使用 Fabric 来配置实例。

```
with settings( host_string="ec2-user@%s" % instance.ip_address,
    key_filename=os.path.join( os.getenv( "HOME" ), 
    ".ssh", "%s.pem" % ami.sshkey.name ),
    connection_attempts=5, timeout=60 ):

    ...
    sudo( "yum -y install mysql mysql-devel" )
    ... 
```

使用上述方法，它将在同一个文件中运行结构命令，但使用 Fabric 的更受控制的方法是通过 fab 文件。这些在 Fabric 文档中得到了更好的解释。

以上是我用来根据需要自动创建和设置实例的方法，因此请调整代码以适合您的情况。

# vmware - 如何在 PowerCLI 中无提示运行 disconnect-viserver

> ID：15911181
> 
> 赞同：10
> 
> 时间：2013-04-09T19:49:08.527
> 
> 标签：vmware, powercli

在 PowerCLI 中使用以下 cmdlet 与服务器断开连接时，如何禁用提示？帮助文件显示了一个 -Confirm 选项，我不使用它，所以我推断没有它，应该没有提示，但我仍然得到提示？

断开连接-viserver -server MyServer

谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-09T22:07:13.293

```
disconnect-viserver -confirm:$false 
```

如您所见，省略 Confirm 参数等效于`-Confirm:$true`

# python - 计算坐标在某个周长内的频率？

> ID：15911184
> 
> 赞同：0
> 
> 时间：2013-04-09T19:49:15.863
> 
> 标签：python, arrays, list, tuples, counter

我的意思是想象我有一个空的 100*100 数组，并且这个数组中有几千个随机位置/坐标。我需要计算这些坐标中有多少位于“直”边缘的 15 个像素内。到目前为止，我有这个代码......

```
import random
import pylab
import numpy                            #all import statements
pylab.close("all")

x = [(random.randint(0,100)) for i in range(3000)]      #creating list of x coordinates
y = [(random.randint(0,100)) for j in range(3000)]      #creating list of y coordinates
array=zip(x,y)                                                  #creating an array by combining the x and y coordinates
                                #end of part 1a
counter = 0                         #start of 1b
for i in range(100):
    for j in range(100):
        if i<=15 or i>=85:
                        if array[i][j]>0:
                                counter=counter+1
        elif j<=15 or j>=85:
                        if array[i][j]>0:
                                counter=counter+1

print counter,"random locations within 15 pixels of the edges" 
```

我该如何更正代码？目前我读到一个错误，说'元组索引超出范围'我知道它引用 if array[i][j]>0 行，但我不明白它有什么问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:05:24.723

你很近。您正在生成一个稀疏的值网格。如果您通过首先将它们放在字典中来迭代这些元组，您可以检查每个离散位置是否存在边缘违规。下面是一个工作示例。

```
edge_dist = 15
sparse_grid = collections.defaultdict(int)
for x,y in zip(x,y):
    sparse_grid[(x,y)] += 1
for i,j in sparse_grid:
    if (i <= edge_dist or i >= 100-edge_dist or 
            j <= edge_dist or j >= 100-edge_dist):
        counter += sparse_grid[(i,j)]

print "%d random locations within 15 pixels of the edges" % counter
# 1579 random locations within 15 pixels of the edges 
```

您在您的版本中遇到的错误是因为 zip 给您的是 x,y 的元组，而不是 x-by-y 值的网格。您可以在上面看到如何使用您的 zip 调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:36:26.800

```
x = numpy.array(x)
y = numpy.array(y)
counter = ((x<=15) | (y<=15) | (x>=85) | (y>=85)).sum() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:28:58.510

您不需要实际构建阵列来计算覆盖的边缘点。如果您担心不计算相同的坐标两次，您可以使用一组删除重复项。

```
cords = set(array)                                # set removes duplicates

counter = 0
for i, j in cords:  # or array if you want to count duplicates
    if i <= 15 or i >= 85 or j <= 15 or j >= 85:
        counter += 1

print counter, "random locations within 15 pixels of the edges" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T20:33:56.047

我不完全确定我是否理解您要达到的目标，但是如果您想获取 3000 个随机点并查看其中有多少在 100x100 正方形边缘的 15 个单位内，则以下操作将起作用：

```
sum(not (15 < x < 85 and 15 < y < 85) for x, y in array) 
```

这利用了 Python 的布尔值`True`和`False`整数值（分别为 1 和 0）这一事实。`True`因此，您可以对s 和s的序列求和，`False`以获得真实值的计数。

我使用了一个否定表达式，因为它允许我使用 Python 的不等式链接来进行实际的边界测试。这个表达`not 15 < x < 85`对我来说似乎比同等的要好得多`x <= 15 or x >= 85`。这可能是主观的，您的里程可能会有所不同。

# iis - 如何在 IIS 7+ 中为网站安装证书并使 https 可选？

> ID：15911188
> 
> 赞同：-1
> 
> 时间：2013-04-09T19:49:21.513
> 
> 标签：iis, ssl, ssl-certificate

如何在 IIS 7+ 中为网站安装证书并选择使用 https？

理想情况下，我们希望 http 作为默认值，然后对于特定页面使用 https URL。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:58:10.663

简单，只需指向不带 https:// 的 url

这是一个教程。 [http://www.iis.net/learn/manage/configuring-security/how-to-set-up-ssl-on-iis](http://www.iis.net/learn/manage/configuring-security/how-to-set-up-ssl-on-iis)

# android - 触摸时更改列表视图行内的背景颜色和视图颜色

> ID：15911190
> 
> 赞同：1
> 
> 时间：2013-04-09T19:49:26.837
> 
> 标签：android, listview, view

我需要将行视图背景颜色更改为蓝色，它是这样的： ![在此处输入图像描述](https://i.stack.imgur.com/QKa3Q.png)

xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/layout"
android:layout_width="@dimen/main_info_cell_view_width"
android:layout_height="@dimen/main_info_cell_view_height"
android:background="@color/main_info_cell_background_color" >

<FrameLayout
    android:id="@+id/pic_frame"
    android:layout_width="@dimen/channel_pic_background_widht"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true" >

    <View
        android:id="@+id/channel_pic_background"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:background="@color/main_info_cell_pic_background_color" />

    <ImageView
        android:id="@+id/channel_pic"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:src="@drawable/c__no_image" />
</FrameLayout>

<View
    android:id="@+id/divider"
    android:layout_width="@dimen/main_info_cell_divider_widht"
    android:layout_height="match_parent"
    android:layout_toRightOf="@+id/pic_frame"
    android:background="@color/main_info_cell_divider_color" />

<TextView
    android:id="@+id/title"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="@dimen/title_margin_left"
    android:layout_marginRight="@dimen/title_margin_right"
    android:layout_marginTop="@dimen/title_margin_top"
    android:layout_toRightOf="@+id/divider"
    android:ellipsize="end"
    android:lines="2"
    android:textColor="@color/main_info_cell_title_color"
    android:textSize="@dimen/title_text_size" />

<TextView
    android:id="@+id/time"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="@dimen/time_margin_bottom"
    android:layout_marginLeft="@dimen/time_margin_left"
    android:layout_toRightOf="@+id/divider"
    android:textColor="@color/main_info_cell_time_color"
    android:textSize="@dimen/time_text_size" />

<TextView
    android:id="@+id/pos_number"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"
    android:layout_centerVertical="true"
    android:layout_marginRight="@dimen/pos_nr_margin_right"
    android:textColor="@color/main_info_cell_pos_nr_color"
    android:textSize="@dimen/pos_nr_size" />

</RelativeLayout> 
```

我尝试对行使用选择器，但问题是选择器仅更改视图的背景颜色，而 ImageView 下方的黑色方块仍保持黑色，我如何更改其颜色以及行背景？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:41:56.363

使用 a作为层次结构`StateListDrawable`的根/父级的背景。`ViewGroup`

因此，使用[本指南](http://developer.android.com/guide/topics/resources/drawable-resource.html#StateList)布置的文件`android:background="@drawable/mystatelistdrawable"`在哪里。`mystatelistdrawable`

您可能还想查看[`android:duplicateParentState`](http://developer.android.com/reference/android/view/View.html#attr_android%3aduplicateParentState).

# java - 从 type 获取 autobox 类

> ID：15911191
> 
> 赞同：0
> 
> 时间：2013-04-09T19:49:27.603
> 
> 标签：java, reflection, types, autoboxing, command-line-arguments

我知道这个问题可能看起来很愚蠢，因为我可以手动执行此操作。但我喜欢将所有选择集中在一个地方（而且只有一个地方）。

我想通过使用虚拟选项类中的字段名称来设置程序的可用选项（使用 commons-cli），以便我可以将值分配给该类的实例。

问题是我无法弄清楚如何获取与原始类型对应的类对象并检索相应的自动装箱类。

这是我想要工作的代码（除了没有这样的方法getAutoboxClass）

```
public class PlayGame {
    private static final Options opts = new Options();

    static {
        Field[] allOpts = MCTSOptions.class.getFields();
        for (Field f : allOpts) {
            opts.addOption(new Option(f.getName(), f.getName(), !f.getType()
                    .equals(Boolean.TYPE), f.getName()));
        }
    }

    public static void main(String[] args) throws IOException, ParseException,
            IllegalArgumentException, IllegalAccessException,
            InvocationTargetException, SecurityException, NoSuchMethodException {
        BasicParser bp = new BasicParser();
        CommandLine cl = bp.parse(opts, args);
        String[] remainArgs = cl.getArgs();

        MCTSOptions params = new MCTSOptions();
        for (Field f : MCTSOptions.class.getFields()) {
            String name = f.getName();
                if (f.getType().equals(Boolean.TYPE)) {
                    f.set(params, true);
                } else if (f.getType().equals(String.class)) {
                    f.set(params, cl.getOptionValue(name));
                } else {
                    String value = cl.getOptionValue(name);
                    Method m = f.getType().getAutoboxClass()
                            .getMethod("valueOf", String.class);
                    f.set(params, m.invoke(null, value));
                }
            }
        }
        //...
    }
} 
```

其中 MCTSOptions 看起来像：

```
public class MCTSOptions {
    public boolean searchOnSample = false;
    public double winOnlyMult = 0.5;
    public double firstExplorationConstant = 2;
    public double nextLearningRate = 0.1;
    public double nextExplorationConstant = 2;
    public boolean firstUsesSqrt = false;
    public boolean nextUsesSqrt = false;
    public long timeGiven = 5000L;
    public long seed = 1L;
} 
```

（所以现在它只有 longs 和 doubles，但将来我可能会添加其他类型）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:56:55.507

为什么不只使用对象（布尔值、长整数等）而不是原语？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:13:25.360

没有内置的方法可以做到这一点。

这就是为什么，例如，Guava 为这个任务提供[了一个辅助方法](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/primitives/Primitives.html#wrap%28java.lang.Class%29)。在内部，它被实现为原语和包装器之间的简单映射。

# couchdb - 有没有办法在两个数据库之间同步 couchdb 中的单个文档？

> ID：15911192
> 
> 赞同：2
> 
> 时间：2013-04-09T19:49:28.663
> 
> 标签：couchdb, replication, sync

我需要在数据库之间同步单个文档，以便在更新一个文档时，另一个在同一台服务器上。动机是为了协作目的而尝试在数据库之间共享单个文档，因为没有文档级别的权限。这意味着如果databaseA 和userA 有一个userA 想要与“拥有”databaseB 的userB 共享的文档。没有好方法（据我所知）在 userA 的数据库上共享文档，因为 userB 不是数据库 A 上的读者。

现在我的解决方案是允许在数据库之间链接单个文档（应所有者的请求和目标数据库的接受），然后保持它们不断更新。有什么想法可以实现吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T09:04:58.023

您可以使用一个名为*Filtered Replication*的功能。在普通复制使整个数据库保持同步的情况下，您可以提供一个*过滤器函数*，该函数对应该复制的任何文档返回 true，否则返回 false。结合连续复制任务，您可以使用此功能近乎实时地保持单个文档同步。

实际上，您必须决定如何设置复制任务。假设您的应用程序中有许多用户可以共享任意数量的文档，您可以使用以下方法：每个用户 1 个数据库 + 1 个包含所有文档的主数据库。也就是说，您设置了从任何用户的数据库到主数据库的连续复制（您的任何用户都无法读取，只有管理员可以读取）。在每个文档中，您存储一个字段，例如“所有者”，其中包含一组用户，这些用户可以访问该文档（用户可以编辑）。然后设置从主数据库到每个用户数据库的过滤复制，过滤功能根据“所有者”字段决定是否复制文档。

有关过滤复制的更多信息，请参见[http://wiki.apache.org/couchdb/Replication#Filtered_Replication](http://wiki.apache.org/couchdb/Replication#Filtered_Replication)，对于一般复制，另请参见[http://guide.couchdb.org/draft/replication.html](http://guide.couchdb.org/draft/replication.html)。请注意，用于复制的 API 在 CouchDB 1.1 中略有变化，本质上是用 _replicator 替换了 _replicate。

# android - Android - 在 SQLite 数据库中保存位置

> ID：15911203
> 
> 赞同：4
> 
> 时间：2013-04-09T19:49:56.033
> 
> 标签：android, database, sqlite, sqldatatypes

我在 SQLite 数据库中保存纬度和经度有问题。我可以保存一些位置，例如 (123.123999, 123.123999)，它将保存在数据库中。但是如果我想阅读它，我会得到像 (123.124, 123.124) 这样的圆角位置。

我的表由这个 sql 段创建：

```
CREATE TABLE locs(id INTEGER PRIMARY KEY AUTOINCREMENT, lat DOUBLE, lng DOUBLE, num INTEGER) 
```

并查询结果：

```
SELECT * FROM locs WHERE lat = 123.124; //RETURN NO ROWS
SELECT * FROM locs WHERE lat = 123.123999; //RETURN 1 ROW 
```

所以我不能使用我得到的数字来查询数据。

我相信我不是第一个处理这个问题的人，因为这是基本的事情。但我没有找到任何适用于 SQLite 数据库的答案。

如何在数据库中读取和写入正确的数字？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T22:42:42.890

> 如何在数据库中读取和写入正确的数字？

我建议你一个快速的解决方案。

由于您知道以什么格式存储您的坐标 eq 数字，因此将它们存储为`TEXT`然后检索它们`TEXT`并简单地执行解析回`DOUBLE`如果您想对它们做一些事情是没有问题的。

```
CREATE TABLE locs(
   id INTEGER PRIMARY KEY AUTOINCREMENT,
   lat TEXT,
   lng TEXT,
   num INTEGER
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:54:57.260

您应该在查询值周围定义一个 epsilon，即

```
SELECT * FROM locs WHERE lat BETWEEN value-epsilon AND value+epsilon; 
```

您可以根据需要更改您的 epsilon。在您给出的示例中， 1e-3 就足够了。

另一种选择是在插入值时对其进行四舍五入，但随后您可能会丢失可能需要的信息。

# servlets - 从 Servlet 过滤器调度到 Faces Servlet？

> ID：15911204
> 
> 赞同：0
> 
> 时间：2013-04-09T19:50:01.600
> 
> 标签：servlets, jsf-2, servlet-filters

我有两个过滤器；**用/admin/**过滤一个**映射过滤器二*****.xhtml**映射传入请求 URI 是 /admin/home.xhtml 执行此请求时，第一个过滤器工作。第二个过滤器也在过滤器一个之后工作。我想在第一个 servlet dofilter 执行后将请求发送到 faces Servlet。***

# javascript - jQuery unload() 仅在特定情况下

> ID：15911205
> 
> 赞同：0
> 
> 时间：2013-04-09T19:50:03.880
> 
> 标签：javascript, jquery

我有一个 jquery 函数，它是这样的：

```
$(window).unload(function() {
    chat.logout();
}); 
```

我想激活其他功能，`chat.logout();`只有当用户离开页面，或者链接目标（href）*不是* `play.php?mod=...`时。我不希望该功能在页面刷新或任何其他情况下运行。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:09:02.770

出于安全原因，无法确定用户想要导航到的目标 URL。因此，您不能在卸载处理程序上应用该逻辑。

虽然，您可以通过以下方式获取当前位置：

```
document.location.href 
```

我建议您只遵循标准并包含一个“注销”链接，这样您就可以在用户单击它时关闭聊天，而不仅仅是在用户关闭窗口或导航到另一个页面时（请参阅 Google 和 Facebook 如何实现他们的会议）。

# ios - iOS 查找是否启动了另一个应用程序

> ID：15911206
> 
> 赞同：0
> 
> 时间：2013-04-09T19:50:03.923
> 
> 标签：ios, launch

如何检查是否已启动另一个应用程序？我不必启动其他应用程序，只需在使用我的应用程序启动其他应用程序时收到通知。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:55:14.390

除非您是这两个应用程序的开发者，否则这是不可能的。苹果不允许这样做是有充分理由的，我相信你能想到一些。甚至有一个术语可以唤起童年的回忆......如果你曾经在沙盒中玩过......

# sql-server - Amazon RDS 上的 SQL Server 2012 无法将 mdf 附加到 Management Studio

> ID：15911210
> 
> 赞同：1
> 
> 时间：2013-04-09T19:50:18.490
> 
> 标签：sql-server, permissions, sql-server-2012, amazon-rds

我在我的 amazon rds 上设置了 Sql Server 2012。我已经验证我正在运行 2012 服务器，并且我能够使用我在亚马逊 aws 的向导创建过程中创建的用户名和密码进行连接。我正在尝试附加 mdf，当我右键单击数据库并选择附加时，我可以转到下一个菜单。单击添加以选择 mdf 文件位置会导致此错误...

[http://i.imgur.com/1cAJq7u.png](http://i.imgur.com/1cAJq7u.png)

也运行这个

```
USE master
go 
GRANT VIEW ANY DEFINITION TO myuser;
Go 
```

结果是

```
Cannot grant, deny, or revoke permissions to sa, dbo, entity owner, information_schema, sys, or yourself. 
```

我不明白如何使用用户名创建服务器，但没有任何管理员权限，也无法升级它们。他们有办法解决这个问题吗？

（我也尝试过以管理员身份运行管理工作室）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T15:00:42.873

我联系了亚马逊，答案是您无法附加 mfd，因为它没有文件系统访问权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-05-09T09:09:33.357

我对错误分离的新数据库有同样的问题。不起作用：

*   放下它
*   从之前导出的 SQL 文件中导入数据库

就我而言，由于附加不起作用，我有兴趣只为数据库使用**相同的名称**并丢弃不可附加的数据库。如果您对这样的解决方案感兴趣，请阅读以下内容：

*   使用 SQL Server Management Studio 选择数据库文件夹，右键单击并选择**新数据库**，将新数据库命名为旧数据库，并确保 .mdf 文件指向与旧数据库完全相同的位置（应该类似于 D: \RDSDBDATA\DATA\'bd_name'.mdf）。
*   然后删除新创建的数据库： drop database 'db_name'
*   从sql文件导入数据库

# teamcity - NuGet Spec 是否应该检测依赖项？

> ID：15911212
> 
> 赞同：3
> 
> 时间：2013-04-09T19:50:19.180
> 
> 标签：teamcity

我刚刚`nuget spec`在 .csproj 文件所在的文件夹中运行，它没有将依赖项写入 .nuspec 文件。应该有吗？

该解决方案已启用包还原并在 TeamCity 上构建良好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-15T13:56:01.170

运行`nuget spec`不会自动包含*对*项目中其他 NuGet 包的依赖项。但是，`nuget pack MyProject.csproj`当您还有一个 nuspec 文件时运行将生成一个 nupkg 文件，其中*MyProject*中使用的 NuGet 包作为依赖项包含在您的包中。

还值得注意的是，从 v2.5 开始（我相信计划在 4 月底的某个时间发布），您还可以选择在您的解决方案中另外包含对其他项目的依赖项，这些项目也有 nuspec -文件：

> 从项目构建包时，当指定 -IncludeReferencedProjects 时，如果 nuspec 文件存在，则项目引用的项目将作为包的依赖项添加，如果 nuspec 文件不存在，则将其添加到包中。

有关详细信息，请参阅v2.5 的[changelog.txt](http://nuget.codeplex.com/SourceControl/changeset/view/10d5d38151489ce053b314ed440bdbfbc30c595f#changelog.txt)。

# c++ - 是否可以从系统和其他可能正在检查的应用程序中隐藏应用程序的本地网络流量？

> ID：15911217
> 
> 赞同：0
> 
> 时间：2013-04-09T19:50:30.180
> 
> 标签：c++, windows, visual-studio, sockets, networking

相反，一个应用程序可以收集多少关于本地网络流量的信息？又如何限制这种行为，以使任何试图检查它的应用程序都一无所获？

该应用程序使用套接字连接与网络上的另一台计算机进行通信。

另外，我说的是严格意义上的 Windows 平台，7 及更高版本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T19:59:22.847

除非您的应用程序可以在比网络服务更高的权限级别上运行（我对此表示怀疑，因为这意味着您可以不受限制地访问网络设备），

**不是，**

您唯一可以尝试的是使用已经运行的应用程序作为伪装并使用它的网络功能。

# haskell - WxHaskell 和 DragAndDrop：如何创建自定义事件来触发 dropTargetOnData、dropTargetOnDrop、dropTargetOnEnter、dropTargetOnDragOver

> ID：15911219
> 
> 赞同：2
> 
> 时间：2013-04-09T19:50:37.663
> 
> 标签：haskell, wxpython, wxhaskell, reactive-banana

# WxHaskell 和 DragAndDrop

我想知道如何使用以下事件处理程序：dropTargetOnData、dropTargetOnDrop、dropTargetOnEnter、dropTargetOnDragOver….[1]

您能否检查一下我目前的看法是否正确：

*   从 wx Widgets/wxPython [2] / [3] / [4] 看来，它们似乎需要用于管理 DragAndDrog 的非平凡示例。
*   它们不能通过现有事件（如“拖动”等）来操作。
*   我尝试创建自己的活动。但它没有被“激活”。[7]
*   此外，从签名 [1] 来看，这些看起来像是在 DropTarget 上被激活的，这与 Reactive/Windows/Controls 上的其他事件不同。这是对的吗 ？
*   Heinrich 创建了自己的事件“onText”，（在反应香蕉中）但这是在控件上。[6]

*   有人可以确认这些事件在 WxHaskell 中有效地为他们工作，并可能暗示如何做到这一点

    [1]： `from Graphics.UI.WXCore.Events , line 1933 onwards`

     `Set an event handler that is called when the drop target can be filled with data. This function require to use 'dropTargetGetData' in your event handler to fill data. dropTargetOnData :: DropTarget a -> (Point -> DragResult -> IO DragResult) -> IO () ...

    -- | Set an event handler for an drop command in a drop target. dropTargetOnDrop :: DropTarget a -> (Point -> IO Bool) -> IO ()

    -- | Set an event handler for an enter command in a drop target. dropTargetOnEnter :: DropTarget a -> (Point -> DragResult -> IO DragResult) -> IO ()

    -- | Set an event handler for a drag over command in a drop target. dropTargetOnDragOver :: DropTarget a -> (Point -> DragResult -> IO DragResult) -> IO ()

    -- | Set an event handler for a leave command in a drop target. dropTargetOnLeave :: DropTarget a -> (IO ()) -> IO ()` 

 `[2]：[http ://docs.wxwidgets.org/2.8/wx_wxdroptarget.html#wxdroptargetondrop](http://docs.wxwidgets.org/2.8/wx_wxdroptarget.html#wxdroptargetondrop)

[3]：[http ://wiki.wxpython.org/DragAndDrop](http://wiki.wxpython.org/DragAndDrop)

[4]： http: [//www.blog.pythonlibrary.org/2012/06/20/wxpython-introduction-to-drag-and-drop/](http://www.blog.pythonlibrary.org/2012/06/20/wxpython-introduction-to-drag-and-drop/)

[5]：[http ://wewantarock.wordpress.com/2011/06/17/how-does-wxhaskell-event-handling-work-part-1/](http://wewantarock.wordpress.com/2011/06/17/how-does-wxhaskell-event-handling-work-part-1/)

[6]：[https](https://github.com/HeinrichApfelmus/reactive-banana/blob/master/reactive-banana-wx/src/Reactive/Banana/WX.hs) ://github.com/HeinrichApfelmus/reactive-banana/blob/master/reactive-banana-wx/src/Reactive/Banana/WX.hs L 88

[7]： `module Main where`

```
import Graphics.UI.WX hiding (empty)

import Data.Maybe
import Control.Monad
import Graphics.UI.WX.Events
import Graphics.UI.WXCore.WxcClassesMZ
--import Graphics.UI.WXCore.WxcClassesAL
import Graphics.UI.WXCore.DragAndDrop
import Graphics.UI.WXCore.Events   
main
  = start dndtest
dndtest
  = do
      f      <- frame  [text := "Drag And Drop test"]
      p      <- panel  f []
      ok     <- button p [text := "Ok"]
      xinput <- textEntry p [text := "here :"] --textEntry
      yinput <- staticText p [text := "drag me"]
      zinput <- staticText p [text := "result me"]

      set f [defaultButton := ok
             ,layout := container p $
                        margin 10 $
                        column 5 [boxed "coordinates" (grid 5 5 [[label "source:", hfill $ widget yinput]
                                                                ,[label "target(focus first):", hfill $ widget xinput]
                                                                ,[label "result:", hfill $ widget zinput]
                                                                ])
                                 ,floatBottomRight $ row 5 [widget ok]]
                                 ]

      set xinput [ on enter := onEnter]

      set yinput [ ]

---------------------------------------------------------
--- meaningful stuff starts here
---------------------------------------------------------

       -- prepare the drop source : create a DataObject and associate it with the source
      textdata' <- textDataObjectCreate "text dropped"
      src <- dropSource textdata' yinput

       -- prepare the drop target: create a DataObject (placeholder here) and associate it with the target
      textdata <- textDataObjectCreate ".."
      drop <- dropTarget xinput textdata
      set drop [ on onMyDrop := showMeDrop ]  ---- <<<< I am expecting this to get fired but no ...
      -- obj create a new event on drop invoking ..
      -- and see if it is invoked

      set yinput [ on drag := onDrag src ]
      set xinput [ ] ------ <<<< I am expecting the target to react when dropped  (Its DroopedTarget i fact)
      set zinput [ on mouse := showMeE]

      set ok [ on command := close f ]
      return ()

--- this is the custom event, just a setter to fire dropTargetOnDrop. not sure at all this is the correct way.

onMyDrop = newEvent "onmyDrop" (\w -> ioError (userError ("attribute '" ++ "onmyDrop" ++ "' is write-only.")))  dropTargetOnDrop
--dropTargetOnDrop :: DropTarget a -> (Point -> IO Bool) -> IO ()
--- the rest are jsut helper to see whats going on

showMeEo = putStr "showMeEo"
showMeDrop p = do
                putStr "showMeDrop"
                return True

onDrag s p  =  do

--    dragAndDrop :: DropSource a -> DragMode -> (DragResult -> IO ()) -> IO ()
    dragAndDrop s Default (\r -> do {putStr "DnD handler called: "; putStrLn(show r); return ()})
    putStrLn "on Drag activated:"

showMeE :: EventMouse -> IO ()
showMeE (MouseMotion point mod) = putStr ""  --- discard meaningless Motion event
showMeE  e = putStrLn $ show e

--
onEnter p = putStrLn $ "on Enter:" ++ show p 
````

# c - 将 C 字符串的值设置为字符串文字

> ID：15911222
> 
> 赞同：0
> 
> 时间：2013-04-09T19:50:53.973
> 
> 标签：c, string

出于某种原因，每当我尝试将 C 字符串的值设置为字符串文字时，都会出现编译器错误：

```
#include <stdio.h>

int main(void) {
    char hi[] = "Now I'm initializing a string.";
    hi = "This line doesn't work!"; //this is the line that produced the compiler error
    return 0;
} 
```

此外，这些是编译器错误：

```
prog.c: In function ‘main’:
prog.c:5:8: error: incompatible types when assigning to type ‘char[31]’ from type ‘char *’
prog.c:4:10: warning: variable ‘hi’ set but not used [-Wunused-but-set-variable] 
```

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T19:57:35.937

*复制*字符串的方法是`strcpy()`函数：

```
strcpy(hi, "This line should work"); 
```

注意：这并不能检查目标中是否有足够的空间来容纳字符串。（不，`strncpy()`可能[不是解决方案](http://the-flat-trantor-society.blogspot.com/2012/03/no-strncpy-is-not-safer-strcpy.html)。

C 不允许分配数组。

[推荐阅读： comp.lang.c FAQ](http://www.c-faq.com/)的第 6 节。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T19:58:01.353

尝试这个：

```
char hi[100];
strlcpy(hi, "something here", sizeof(hi)); 
```

你应该使用`strlcpy()`，因为`strcpy()`并且`strncpy()`不安全。

请参阅：[strncpy 或 strlcpy 在我的情况下](https://stackoverflow.com/questions/6987217/strncpy-or-strlcpy-in-my-case)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T19:53:58.697

好的，这里发生的事情是这样的，

当你写

```
hi = "something here"; 
```

发生的情况是，在内存中，字符串“something here”被存储，它返回指向内存中存储字符串的第一个元素的指针。

因此，它希望左值是指向 char 的指针，而不是 char 本身的数组。

所以， hi 必须声明为`char* hi`

# java - Java——传递泛型参数

> ID：15911229
> 
> 赞同：1
> 
> 时间：2013-04-09T19:51:16.640
> 
> 标签：java, generics

我正在尝试编写一个将 MyInterface 的任何子类作为参数的方法，但会出现语法错误。

```
public Map<String, List<T extends MyInterface>> makeMap(List<T extends MyInterface>) {

  Map<String, List<T extends MyInterface>> myMap = ...

  return myMap;

} 
```

此语法无效。签名给出错误“错位构造”。但是，我的想法是我可以传递 MyInterface inn 的任何子类代替 T。这可以在 Java 中完成吗？如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T19:55:40.943

您混淆了声明泛型类型和引用该泛型类型的概念。假设您希望该方法是泛型的，请在返回类型之前声明泛型类型参数，然后像`T`其他地方一样简单地引用它：

```
//      Declaration                            ref              ref
public <T extends MyInterface> Map<String, List<T>> makeMap(List<T>) {
  //              ref
  Map<String, List<T>> myMap = ...

  return myMap;

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T19:54:25.357

```
public <T extends MyInterface> Map<String, List<T>> makeMap(List<T> myList) { 
```

更多关于泛型方法[here](http://docs.oracle.com/javase/tutorial/extra/generics/methods.html)

我还注意到，在您的原始方法声明中，您没有为方法参数定义变量。

# javascript - 如何设置 Visual Studio 2012 以使用 JavaScript 编辑器处理 asp 文件

> ID：15911230
> 
> 赞同：3
> 
> 时间：2013-04-09T19:51:21.940
> 
> 标签：javascript, asp-classic, visual-studio-2012

如何告诉 Visual Studio 2012 将经典 ASP 文件（扩展名 .asp）识别为 JavaScript？我已将 .asp 扩展名注册到脚本编辑器。这在 2010 年曾经奏效，但在这里无济于事。似乎 VS 不知道脚本编辑器使用什么语言。没有关键字突出显示，没有智能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T23:25:15.050

这可以通过`asp`使用编辑器添加扩展来更改`HTML Editor`：

`Tools`-> `Options`-> `Text Editor`->`File Extension`

1.  对于`Extension`类型：`asp`
2.  选择`HTML Editor`
3.  单击`Add`（或者`Apply`如果您要更新现有规则）

***编辑：**玩了一下，发现你需要使用`HTML Editor`而不是`Web Form Editor`.*

***最终编辑：***根据以下评论，应在 JScript 代码部分周围使用以下 Script 标记，以指示编辑器使用 JScript 智能感知和突出显示：

```
<script language="JScript" runat="server">
// place your JScript code here
</script> 
```

# python - 处理二进制文件的python性能

> ID：15911233
> 
> 赞同：4
> 
> 时间：2013-04-09T19:51:23.397
> 
> 标签：python

我正在尝试将[YCbCr 文件](http://en.wikipedia.org/wiki/YCbCr) 从 8 bpp 转换为 10 bpp。

到目前为止，我最好的方法仍然比最基本的幼稚 C 实现慢一个数量级。

C 中的幼稚方法，运行时间约为 8 秒。使代码改为在块上工作，将时间降低到 1 秒以下。

我很好奇从标准 python 处理二进制文件可以获得什么样的性能。示例文件采用[CIF 分辨率](http://en.wikipedia.org/wiki/Common_Intermediate_Format)，与 1080p 的内容相比“小”。尽管我主要对标准 python 感兴趣，但也可以随意添加 numpy-suggestions。

测试文件可以从

```
http://trace.eas.asu.edu/yuv/foreman/foreman_cif.7z 
```

`sha1sum`对于正确的 10 位输出是

```
c511dabc793383f7fd0ed69b4bb9b9f89ef73b84 
```

Python：

```
#!/usr/bin/env python

import array

f_in = 'foreman_cif.yuv'
f_out = 'py_10bpp.yuv'

def bytesfromfile(f):
    while True:
        raw = array.array('B')
        raw.fromstring(f.read(8192))
        if not raw:
            break
        yield raw

with open(f_in, 'rb') as fd_in, \
        open(f_out, 'wb') as fd_out:

    for byte in bytesfromfile(fd_in):
        data = []
        for i in byte:
            i <<= 2
            data.append(i & 0xff)
            data.append((i >> 8) & 0xff)

        fd_out.write(array.array('B', data).tostring()) 
```

天真的C-dito：

```
#include <stdio.h>
#include <stdlib.h>

int main(int argc, char** argv)
{
    int c;
    int d[2];

    FILE* fd_in;
    FILE* fd_out;

    fd_in = fopen("foreman_cif.yuv", "rb");
    fd_out = fopen("c_10bpp.yuv", "wb");

    while((c = fgetc(fd_in)) != EOF) {
        c <<= 2;
        d[0] = c & 0xff;
        d[1] = (c >> 8) & 0xff;

        fwrite(&d[0], 1, 1, fd_out);
        fwrite(&d[1], 1, 1, fd_out);
    }

    fclose(fd_in);
    fclose(fd_out);

    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T04:09:16.303

问题中的代码`25`在我的机器上需要几秒钟，`numpy`--`0.37`几秒钟：

```
import numpy as np

a_in = np.memmap('foreman_cif.yuv', mode='readonly')
a_out = np.memmap('py_10bpp.yuv', mode='write', shape=2*len(a_in))
a_out[::2] = a_in << 2
a_out[1::2] = a_in >> 6 
```

`cython`--`0.20`秒：

```
from functools import partial

import pyximport; pyximport.install() # pip install cython
from bpp8to10 import convert # bpp8to10.pyx

f_in = 'foreman_cif.yuv'
f_out = 'py_10bpp.yuv'

def main():
    with open(f_in, 'rb') as fd_in, open(f_out, 'wb') as fd_out:
        for chunk in iter(partial(fd_in.read, 8192), b''):
            fd_out.write(convert(chunk))
main() 
```

哪里`bpp8to10.pyx`：

```
from cpython.bytes cimport PyBytes_FromStringAndSize

def convert(bytes chunk not None):
    cdef:
        bytes data = PyBytes_FromStringAndSize(NULL, len(chunk)*2)
        char* buf = data # no copy
        Py_ssize_t j = 0
        unsigned char c
    for c in chunk:
        buf[j] = (c << 2) 
        buf[j + 1] = (c >> 6)
        j += 2
    return data 
```

纯 CPython 版本的主要加速是将代码从模块级别移动到函数 ( `main()`) -`6.7`秒（2 个 CPU）：

```
from functools import partial
from multiprocessing import Pool

f_in = 'foreman_cif.yuv'
f_out = 'py_10bpp.yuv'

def convert(chunk):
    data = bytearray() # [] -> bytearray(): 17 -> 15 seconds
    data_append = data.append # 15 -> 12  seconds
    for b in bytearray(chunk): # on Python 3: `for b in chunk:`
        data_append((b << 2) & 0xff)
        data_append((b >> 8) & 0xff)
    return data

def main(): # put in main(): # 25 -> 17 seconds
    pool = Pool(processes=2) # 12 -> 6.7 seconds
    with open(f_in, 'rb') as fd_in, open(f_out, 'wb') as fd_out:
        for data in pool.imap(convert, iter(partial(fd_in.read, 8192), b'')):
            fd_out.write(data)
main() 
```

`pypy`--`1.6`秒：

```
f_in = 'foreman_cif.yuv'
f_out = 'py_10bpp.yuv'

def convert(chunk):
    data = bytearray() # 1.6 -> 1.5 seconds for preallocated data
    for b in bytearray(chunk): 
        data.append((b << 2) & 0xff)
        data.append((b >> 6) & 0xff)
    return data

with open(f_in, 'rb') as fd_in, open(f_out, 'wb') as fd_out:
    while True:
        chunk = fd_in.read(8192)
        if not chunk:
            break
        fd_out.write(convert(chunk)) 
```

# php - 通过服务器端准备参数以进行 plupload

> ID：15911234
> 
> 赞同：0
> 
> 时间：2013-04-09T19:51:24.777
> 
> 标签：php, jquery, parameters, upload, plupload

我正在使用 Plupload 并想准备参数服务器端。以下是我想如何完成此操作的示例：

```
$.post("prepare.php", function(data){
   // data put into post array;
   preparedParams = post[0];
   additionalParams = post[1];
}

var uploader = new plupload.Uploader({
        preinit : {
            // some stuff here
        },
        runtimes : thisRunTime,
        browse_button : 'pickfiles',
        container : 'container',
        url : preparedURL,
        multipart_params: {
            preparedParams
        },
        file_data_name: 'file',
        additionalParams
    }); 
```

我怎样才能使这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:28:40.523

我最终做的是通过服务器端（PHP）将参数编码为 json。最终设置如下所示：

```
$.post("prepare.php", function(data){
   setup(data);
}

function setup(params){
   var JSONData = JSON.parse(params);
   var uploader = new plupload.Uploader({
        preinit : {
            // some stuff here
        },
        runtimes : thisRunTime,
        browse_button : 'pickfiles',
        container : 'container',
        url : preparedURL,
        multipart_params : JSONData,
        file_data_name: 'file',
        additionalParams
    });
} 
```

# ios - 使用 WebStorm 调试在模拟器中运行的 PhoneGap 应用程序

> ID：15911238
> 
> 赞同：4
> 
> 时间：2013-04-09T19:51:30.810
> 
> 标签：ios, debugging, cordova, webstorm

当应用程序在 iOS 模拟器中运行时，有没有办法在 WebStorm 中调试基于 PhoneGap 的 iOS 应用程序的 javaScript？问题是需要触发某些事件（例如“deviceready”）才能输入我要调试的某些代码路径。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-27T07:59:57.420

这一切都在这里非常详细地描述：

[http://www.tricedesigns.com/2013/01/18/my-workflow-for-developing-phonegap-applications/](http://www.tricedesigns.com/2013/01/18/my-workflow-for-developing-phonegap-applications/)

这是一篇很棒的文章，每个 phonegap 初学者都应该阅读，因为它描述了如何设置开发环境。

我有很多选择：

*   Phonegap模拟器
*   iOS模拟器远程调试器
*   在实际设备上进行远程调试

它不会与 webstorm 集成，但上面描述的调试工具无论如何都要强大得多。

# javascript - 修复定位重叠问题

> ID：15911244
> 
> 赞同：0
> 
> 时间：2013-04-09T19:51:52.000
> 
> 标签：javascript, html, css, css-position

我在这个角落里。我有一个带有 2 个容器的布局。其中一个容器代表地图（#main）并且需要始终保持在用户视图中，另一个容器（#sub）用作可滚动的内容。如果内容水平适合，一切看起来都很好。但是，一旦出现水平条（调整窗口大小以进行复制），可滚动内容就会与固定内容重叠，我不知道如何修复它。我知道通过绝对定位固定内容并使用javascript从顶部调整其位置来修复它的一种方法。有什么办法可以解决吗？

示例代码如下：

**html:**

```
<div id="content">
    <div id="main">main</div>
    <div id="sub">
        <strong>Sub</strong><br />
        sub<br />
        sub<br />
        sub
    </div>
</div> 
```

**CSS：**

```
#content {
    width: 1200px;
    margin: 0 auto;
}
#main {
    position: fixed;
    width: 849px;
    height: 500px;
    background: red;
}
#sub {
    position: relative;
    float: right;
    width: 350px;
    height: 3500px;
    background: green;
} 
```

[JSFiddle 链接](http://jsfiddle.net/ncQFw/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:56:54.023

根据您的评论，听起来不允许用户滚动将解决问题：

```
body {
  padding: 0;
  margin: 0;
  overflow-x:hidden;
 } 
```

如果您希望它们都滚动，则必须删除固定定位：

```
#main {
position: relative;
width: 849px;
height: 300px;
background: red;
font-size: 50px;
text-align: center;
padding-top: 200px;
    float:left;
} 
```

# javascript - 使用 svg.js 加载 SVG 文件

> ID：15911246
> 
> 赞同：11
> 
> 时间：2013-04-09T19:51:54.420
> 
> 标签：javascript, jquery, html, svg

我有一个带有 SVG 元素的 HTML5 页面。我想加载一个 SVG 文件，从中提取一些元素并用脚本一个一个地处理它们。

我使用 jQuery 成功加载了 SVG 文件，使用`.load()`，在 DOM 中插入了 SVG 树。但我想尝试[svg.js](http://svgjs.com/)来操作元素，但在文档中我找不到使用现有 SVG 元素初始化库的方法，我将在其中获取对象。

想法是访问加载的 SVG 元素（或直接使用 svg.js 库加载），将单个对象复制到另一个元素并将它们移动到我需要的位置。这该怎么做？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2017-03-03T21:57:33.573

给定一个 SVG 文件 'image.svg' 包含

```
<svg viewBox="0 0 500 600" version="1.1">
  <rect x="100" y="100" width="400" height="200" fill="yellow" 
   stroke="black" stroke-width="3"/>
</svg> 
```

和一个文件'index.html'包含

```
<html>
  <head>
    <script type="text/javascript" src="svg.js"></script>
    <script type="text/javascript" src="jquery-X.X.X.js"></script>
    <script type="text/javascript" src="script.js"></script>
  </head>
  <body>
    <div id="svgimage"></div>
  </body>
</html> 
```

那么如果文件'script.js'包含

```
$(document).ready(function() {

  var image = SVG('svgimage');
  $.get('image.svg', function(contents) {
    var $tmp = $('svg', contents);
    image.svg($tmp.html());
  }, 'xml');

  $('#svgimage').hover(
    function() {
      image.select('rect').fill('blue');
    },
    function() {
      image.select('rect').fill('yellow');
    }
  );

}); 
```

然后将显示 SVG 图像，并且将鼠标指针移入和移出浏览器窗口会将矩形的颜色从黄色变为蓝色。

您现在应该能够替换任何 SVG 图像文件并定义任意数量的函数来使用 SVG.js 库来操作图像。需要意识到的重要一点是，*如果在 $(document).ready 函数返回之前调用 SVG.js 方法，它们将不会成功*。

对于奖励积分，我还发现通过在“$tmp”声明后添加以下行来复制“viewBox”、“width”和“height”属性的值，以最有效地成功显示任意 SVG 文件的内容：

```
 image.attr('viewBox', $tmp.attr('viewBox'));
    image.attr('width', $tmp.attr('width'));
    image.attr('height', $tmp.attr('height')); 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-04-10T00:51:25.157

你应该看看[svg.import.js 插件](https://github.com/wout/svg.import.js)

文档说...

> 将存储所有带有 id 的导入元素。包含所有存储元素的对象由 import 方法返回：

```
var rawSvg = '<svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg [...]>"';
var draw = SVG('paper');
var store = draw.svg(rawSvg);

store.polygon1238.fill('#f06'); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-06-25T17:36:55.497

如果您知道元素的 id，则可以在导入原始 svg 后使用 SVG.get 方法：

```
SVG.get('element_id').move(200,200) 
```

该库已移至[GitHub](https://github.com/svgdotjs/svg.js)，提及的文档位于[http://svgjs.dev/referencing/](http://svgjs.dev/referencing/)

* * *

旧链接：http://documentup.com/wout/svg.js#referencing-elements

# c - 以下句子中的“对于每个转换的值”是什么意思？

> ID：15911249
> 
> 赞同：1
> 
> 时间：2013-04-09T19:52:04.850
> 
> 标签：c

以下句子中的“对于每个转换的值”是什么意思？

> 问：为什么电话`scanf("%d", i)`打不通？
> 
> 答：您传递给的参数`scanf`必须始终是指针：**对于每个转换的值**，scanf 通过填写您传递指针的位置之一来“返回”它。（另请参阅[问题 20.1](http://www.c-faq.com/misc/multretval.html)。）要修复上面的片段，请将其更改为`scanf("%d", &i)`.

我在[c-faq](http://www.c-faq.com/)中找到了这个；这是[问题 12.12](http://www.c-faq.com/stdio/scanf1.html)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:54:38.573

[`scanf()`](http://en.cppreference.com/w/c/io/fscanf)可以在一次调用中扫描多个值。例如：

```
int numConverted = scanf("%d %f %d", &myInt1, &myFloat, &myInt2); 
```

*注意：您应该始终检查返回值以了解实际*转换了多少。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T20:02:40.273

如果`scanf("%d", &i)`使用 input执行`123`，则字符序列`123`将*转换*为一个`int`值，该值存储在`i`.

这不是类型转换可能由强制转换指定的，但将其称为“转换”仍然是合理的。

# servicestack - Servicestack - 无法从 C# 客户端读取或设置 cookie

> ID：15911253
> 
> 赞同：1
> 
> 时间：2013-04-09T19:52:25.993
> 
> 标签：servicestack

我遇到了 ServiceStack 和 cookie 的问题 - 我无法从内置的 C# JsonServiceClient 读取或设置我的服务的 cookie。

Web 服务在 SSL 上运行在此域上：

```
https://sites.sub.domain.co.uk/Api/ 
```

调用服务的网站位于此处：

```
https://sites.sub.domain.co.uk/Website/ 
```

当我尝试在服务中设置 cookie 时，因此：

```
this.Response.Cookies.AddCookie(cookie); 
```

where`cookie`的域设置为`.domain.co.uk`，没有任何反应。服务完全按预期执行并返回预期响应，但未设置 cookie，也不存在异常。

我还尝试使用提供的`res`对象在响应过滤器中执行此操作，结果相同。

其次，当使用 ac# 客户端调用服务时，似乎也没有发送任何 cookie。我在我的 AppHost 中注销每个请求的整个请求，

```
RequestFilters.Add((req, res, dto) => { Log(req.Cookies); }); 
```

并且 cookie 始终是空白的，尽管我可以在浏览器中清楚地看到存在多个 cookie，并且 fiddler`Cookie`在请求中显示了一个充满内容的标题。

发出的调用是一个非常标准的`JsonServiceClient` `POST`请求，由 aspx 页面上的代码发出：

```
var client = new JsonServiceClient("somewhere");

var response = client.Post(new RequestForStuff()); 
```

欢迎提出任何建议。

**更新**

在调查时，我已经通过 html 表单帖子调用了其中一项服务，并且在我记录请求时它确实有 cookie 集合......我希望看到的所有 cookie 都在那里......

**另一个更新**

我继续使用不同的方式测试服务。在 Chrome 中使用 REST 控制台时，cookie 由浏览器发送，并且我尝试在响应中创建的 cookie 都可以正常工作，但同样，当使用相同的参数调用相同的服务时，来自 ac# JsonServiceClient，cookies 既不发送也不设置。

成功请求的标头（来自 REST 控制台）（在日志文件中序列化为 json）：

```
{
  "Header": "Connection",
  "Value": "keep-alive"
},
{
  "Header": "Content-Length",
  "Value": "124"
},
{
  "Header": "Content-Type",
  "Value": "application/json"
},
{
  "Header": "Accept",
  "Value": "application/json"
},
{
  "Header": "Accept-Charset",
  "Value": "ISO-8859-1,utf-8;q=0.7,*;q=0.3"
},
{
  "Header": "Accept-Encoding",
  "Value": "gzip,deflate,sdch"
},
{
  "Header": "Accept-Language",
  "Value": "en-GB,en-US;q=0.8,en;q=0.6"
},
{
  "Header": "Cookie",
  "Value": massive load of stuff...
},
{
  "Header": "Host",
  "Value": "sites.sub.domain.co.uk"
},
{
  "Header": "User-Agent",
  "Value": "Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.31 (KHTML, like Gecko) Chrome/26.0.1410.43 Safari/537.31"
},
{
  "Header": "Origin",
  "Value": "chrome-extension://cokgbflfommojglbmbpenpphppikmonn"
} 
```

从不成功的 C# 客户端调用中：

```
{
  "Header": "Content-Length",
  "Value": "124"
},
{
  "Header": "Content-Type",
  "Value": "application/json"
},
{
  "Header": "Accept",
  "Value": "application/json"
},
{
  "Header": "Accept-Encoding",
  "Value": "gzip,deflate,gzip, deflate"
},
{
  "Header": "Expect",
  "Value": "100-continue"
},
{
  "Header": "Host",
  "Value": "sites.sub.domain.co.uk"
} 
```

我玩过请求的标题：

```
JsonServiceClient.HttpWebRequestFilter = f => f.Headers.Add(... 
```

但无济于事。

**更新修复**

根据 paacshpa 的回答，我将此代码放入客户端：

```
JsonServiceClient.HttpWebResponseFilter = d =>
{
   foreach (Cookie co in d.Cookies)
    {
        var htc = new HttpCookie(co.Name, co.Value) { Domain = co.Domain, Path = "/" };
        HttpContext.Current.Response.Cookies.Add(htc);
    }
}; 
```

和 presto，浏览器中的 cookie。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T09:24:39.143

*   **并且 cookie 始终是空白的，尽管我可以在浏览器中清楚地看到存在多个 cookie，并且 fiddler 在请求中显示了一个充满内容的 Cookie 标头。**

*   **正在进行的调用是一个非常标准的 JsonServiceClient POST 请求，由 aspx 页面上的代码制成：**

上面的 2 条评论让我认为，当从其他来源（即浏览器或 Fiddler）发出请求时，C# 客户端的请求/响应数据的共享方式可能会有些混乱（简短的回答：不是）。

如果您从浏览器向 page1.aspx 发出请求，并且后面的代码有

```
var client = new JsonServiceClient("somewhere");

var response = client.Post(new RequestForStuff()); 
```

RequestForStuff 服务中添加的任何 Cookie 仅添加到`client`变量/ServiceClient 中，**而不**添加到浏览器响应中的 Cookie 中。您本质上在请求/响应（来自浏览器）中有一个请求/响应（来自 C# 客户端）。Cookie 不会在 2 个“交互”之间共享。

您可以将 Cookie 从`client`变量中提取出来，并将它们添加到原始请求的响应中。

```
foreach(Cookie c in client.CookieContainer.GetCookies(newUri("https://sites.sub.domain.co.uk")))
{
    HttpContext.Current.Response.AppendCookie(new HttpCookie(c.Name, c.Value));           
} 
```

# php - mysql_fetch_assoc 丢失了一个值

> ID：15911263
> 
> 赞同：0
> 
> 时间：2013-04-09T19:53:08.603
> 
> 标签：php, mysql

我有这个代码：

```
function get_team_a($id_team){
    $result = mysql_query("SELECT * FROM `table1` WHERE `id` = '{$id_team}'");
    return mysql_fetch_assoc($result);
} 
```

在表中我有 3 列：

```
ppl op  id
10  23  1006
6   21  1005
11  15  1004 
```

但是当我这样做时：

```
$team_zgl= get_team_a($team_id); 
<br><b>'.$team_zgl['id'].' </b> 
```

除了这个我什么都没有：

```
<br><b>'.$team_zgl['op'].' </b>
<br><b>'.$team_zgl['ppl'].' </b> 
```

什么？！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T19:56:42.487

`mysql_fetch_assoc()`一次只取一行。

```
$rows = array();
while ($row = mysql_fetch_assoc($result)) {
    $rows[] = $row;
}
return $rows; 
```

这将返回一个多维数组，然后您可以对其进行迭代。

如果甚至没有返回一行，则您的查询中可能存在语法错误。

* * *

您的代码容易被注入。您应该对 PDO/mysqli 使用正确的参数化查询

# c - 来自标准输入的分段错误（核心转储）

> ID：15911267
> 
> 赞同：0
> 
> 时间：2013-04-09T19:53:18.033
> 
> 标签：c, segmentation-fault

我正在尝试计算文件中每个单词的数量。该文件可以是标准输入或命令行上提供的文件名（./count -f 文件名）。到目前为止，当从命令行读取文件时，程序给出了正确的输出。但是当我尝试从标准输入读取时会发生错误。该程序首先输出正确的结果，然后给出分段错误（核心转储）。有趣的是该程序可以在我的 mac 上运行，但在 Linux 上却无法运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:12:19.170

好吧，与其给你一条鱼，我会教你如何钓鱼……

当你得到`segmentation fault`它意味着操作系统检测到内存访问错误。当您使用指针时，这通常发生在 C/C++ 中。指针非常危险，必须小心对待。

**如何检测问题发生在哪里？** 好吧，当您的程序接收到 Linux 时，它的信息量不是很大，`SEGFAULT`但是它为您提供了很多信息。你只需要知道如何“阅读”它。

*coredump*是发生分段错误时内存、堆栈和变量的图片。运行它

```
gdb myapp core 
```

其中 myapp 是您的应用程序可执行文件，而 core 是核心转储。现在你会看到类似的东西：

```
GNU gdb 19991004

Copyright 1998 Free Software ���.�

Core was generated by `testit'.

Program terminated with signal 11, Segmentation fault.

Reading symbols from /usr/lib/libstdc++-libc6.1-1.so.2...done.

Reading symbols from /lib/libm.so.6...done.

Reading symbols from /lib/libc.so.6...done.

Reading symbols from /lib/ld-linux.so.2...done.

#0  0x823221a in main () at blabla.c:3

10             *i++; 
```

它会告诉你究竟是哪条线路导致了故障。如果您想确切地知道您是如何到达该行的，请键入`bt` this 将向您显示从您的应用程序 main() 到实际故障的回溯，包括传递给函数的参数。

我认为，一旦您确切地知道分段错误发生的位置，您将更容易解决它。

几点注意事项：

1.  如果没有创建 coredump。在控制台中输入：

    ```
    ulimit -c unlimited 
    ```

2.  您需要使用 -g 编译程序以在 gdb 中启用有意义的符号名称。

# c - 使用矩阵排序的字符串

> ID：15911268
> 
> 赞同：1
> 
> 时间：2013-04-09T19:53:21.007
> 
> 标签：c, string.h

我正在参加一场锦标赛，但我遇到了字符串排序问题。这里我试着解释一下情况：

> “一个人发现了一本用未知语言写成的大书，它使用了与英语相同的字符。这本书包含一个简短的索引，但索引中项目的顺序与如果字符被排序的话人们所期望的不同和英文字母表一样。收集者试图用索引来确定奇怪字母表的字符顺序（即整理顺序），然​​后他开始了这项工作”

当然，我必须制作一个可以帮助那个人的程序。作为输入，我必须向用户询问字母的顺序（我已经解决了这个问题）。每个字符串最多包含 20 个字符。并非所有字母都必须使用，但该列表将暗示使用的字母之间的完整顺序。

我写了这段代码：

```
#include<stdio.h>
#include<conio.h>
#include<string.h>
int main(void){
int i,c,j,p=0,k=0;    
printf("How many strings do you need? \n");  
scanf("%d", &c);                   //number of columns for the matrix
// input
char a[20][c];
for(i=0;i<c;i++){
printf(" ----- String number %d -----\n",i+1);
for(j=0;j<20;j++){
             scanf("%c", &a[j][c]);
             if (a[j][c]==' ')
             {break;}              
  }
 } 
  //output
 printf(" \n");
 printf(" ----- Results ----- \n");
 printf("%c", a[0][0]);
 for(p=1;p<c;p++)
 {
  if(a[k][p]=!a[k][p-1])
 {printf("%c", a[k][p]);}  
  }
 getch();
  return 0;
} 
```

我在最后一个循环中有问题，因为它没有给我正确的输出。如果用户键入（例如）：

> XWY ZX ZXY ZXW YWWX

我的输出应该是“XZYW”。有人有什么建议吗？

# jquery - Superscrollorama 淡入/淡出滚动

> ID：15911271
> 
> 赞同：0
> 
> 时间：2013-04-09T19:53:36.387
> 
> 标签：jquery

我正在使用 superscrollorama 尝试在滚动时获得淡入和淡出效果，但显然它只是在我什至可以显示它淡入之前进入淡出动画......

这是我的代码

```
 controller.addTween('.main', 
    (new TimelineLite())
        .append([
            TweenMax.from($('.fade'), 1, 
                {css:{opacity: 0}})
        ]),0,1200
        .append([
            TweenMax.from($('.fade'), 1, 
                {css:{opacity: 1}})
            ]),0,400
); 
```

如您所见，我为淡入设置了 1200 像素的偏移时间，动画的即时持续时间为 0。淡出是相同的持续时间，但偏移量是 400（是否应该设置为 1600，以考虑淡入偏移量？）

有了这个，它就直接进入淡出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T12:06:28.627

在我看来，这可能会给你一个语法错误，因为持续时间和偏移量是传递给 addTween 函数的属性，而不是 TweenMax 函数的属性。

# css - Bootstrap IE 背景颜色问题

> ID：15911272
> 
> 赞同：6
> 
> 时间：2013-04-09T19:53:46.653
> 
> 标签：css, internet-explorer, twitter-bootstrap

我似乎无法在 IE9 中更改导航栏的背景颜色。该网站使用 Twitter-Bootstrap

这是网站：http: [//iioengine.com/](http://iioengine.com/)

顶部导航栏在除 IE 之外的所有浏览器中都有白色背景。IE中是黑色的。我尝试使用 CSS 定位元素的每个部分，但在 IE 中没有任何影响它的颜色。

我还设置`background-image`了`none`所有相关课程

任何人都知道问题是什么或我需要针对什么？IE 快把我逼疯了。。谢谢

解决方案：

```
.navbar-inverse .navbar-inner{
  filter:none;
  background-color:white;
} 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-04-09T19:57:25.937

这是由 MS`filter`梯度引起的`.navbar-inverse .navbar-inner {}`

`none`解决方案是在您自己的样式表中覆盖它：

```
div.navbar-inverse .navbar-inner {
    filter: none;
    background-color: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-26T15:59:49.713

我在使用 IE9 + Bootstrap 3 时遇到了一个类似的问题。 filter:none 没有为我解决这个问题。添加这个做了：

```
filter: progid:DXImageTransform.Microsoft.gradient(enabled = false); 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-09T20:04:11.767

过滤器是@Adrift 指出的问题

# iis-7 - MindTouch 核心菜单

> ID：15911273
> 
> 赞同：0
> 
> 时间：2013-04-09T19:53:51.990
> 
> 标签：iis-7, wiki, mindtouch

我正在尝试完成我认为对 MindTouch Core 10.4 进行的相对较小的调整。我希望能够向现有菜单栏添加菜单、下拉菜单或静态菜单。到目前为止，我没有运气。附图显示了我想要完成的事情。箭头指示我要添加菜单的位置。

![MindTouch 核心菜单](https://i.stack.imgur.com/3sxN9.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-20T08:42:28.630

您可以为 MindTouch 创建一个新主题，它可以更快、更灵活地自定义 MindTouch。一篇文章可以在这里找到：[http ://blog.developer.mindtouch.com/2009/09/02/writing-a-more-flexible-mindtouch-theme/](http://blog.developer.mindtouch.com/2009/09/02/writing-a-more-flexible-mindtouch-theme/)

# visual-studio-2010 - 革命 R 说我需要更新到 VS2008 SP1 但我有 VS2010

> ID：15911277
> 
> 赞同：1
> 
> 时间：2013-04-09T19:54:03.930
> 
> 标签：visual-studio-2010, revolution-r

安装`Revolution R`时，它尝试安装`Visual Studio 2008 Isolated Shell SP1`，但失败，因为它说我安装了需要先更新的以前版本的 VS。

问题是我`VS2010 SP1`已经安装了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T23:44:39.770

好的，我通过调整寄存器解决了这个问题。我发布它以防有人需要它：

您需要检查这些注册表项：

HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\DevDiv\VC\Servicing\9.0 HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\DevDiv\VC\Servicing\9.0\RED\1033 HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\DevDiv\VS\Servicing\9.0 HKEY_LOCAL_MACHINE\SOFTWARE\Wow64 \Microsoft\DevDiv\VS\Servicing\9.0\VSR\1033

并确保 SP 和 SPIndex 值为 1，并且 SPName 为 SP1。SP 和 SPIndex 值为 0，SPName 为 RTM。
并为 VS 8.0 密钥重复该过程

也许这可能会导致未来升级出现问题。

# c++ - _get_timezone 替代方案？

> ID：15911278
> 
> 赞同：0
> 
> 时间：2013-04-09T19:54:05.750
> 
> 标签：c++

我正在转换一个只能在 Windows 机器上编译的 C++ 项目，因为它使用 Microsoft C++ 库。该功能是否有任何替代方案，可`_get_timezone`在 Ubuntu 12.10 机器上编译？

[MSDN 上的_get_timezone](http://msdn.microsoft.com/library/38wx0s70(v=vs.80).aspx)文档

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:11:36.043

我想我自己计算一下，使用标准函数：

```
#include <time.h>

namespace time_util { 
double get_gmt_offset() { 
    time_t now = time(NULL);

    struct tm *gm = gmtime(&now);
    time_t gmt = mktime(gm);

    struct tm *loc = localtime(&now);
    time_t local = mktime(loc);

    return difftime(local, gmt);
}
} 
```

我没有并排测试它们以确定，但这会返回我期望 _get_timezone 返回的内容（例如，对我来说，它返回 -25200，它可以工作到 UTC-7 小时）。

您可能需要/想要“摆弄”一些事情的一个地方是处理`tm_isdst`- 我没有仔细观察`_get_timezone`它是否考虑到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-06-22T11:06:49.710

Linux 的替代方案`_get_timezone`不是函数，而只是`timezone`变量，定义在`time.h`：

```
extern long timezone; 
```

# url-rewriting - Web.config 将一个域重定向到非 https 文件夹，将另一个域重定向到 https 文件夹

> ID：15911281
> 
> 赞同：2
> 
> 时间：2013-04-09T19:54:13.537
> 
> 标签：url-rewriting, web-config, rewrite

我的网站有一个域别名。我想知道如何将 domainA.ext 的请求重定向到 domainB.ext 的`https://domainA.ext/folderA`请求`http://domainB.ext/folderB`

目前我有以下规则将所有http请求重定向到https，但它将所有请求重定向到https：

```
<rule name="Redirect to https" stopProcessing="true">
                    <match url="(.mydomain.ext*)" />
                    <conditions>
                        <add input="{HTTPS}" pattern="off" ignoreCase="true" />
                    </conditions>
                    <action type="Redirect" url="https://mydomain.ext}" redirectType="Permanent" />*
                </rule> 
```

它是 Windows server 2008，但我的 cms 是 PHP。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:58:42.607

我想不出比 4 条不同的规则更简单的事情了。

前 2 个`domainA.ext`：

```
<rule name="Check path folderA" stopProcessing="true">
    <match url="^folderA" negate="true" />
    <conditions logicalGrouping="MatchAll">
        <add input="{HTTP_HOST}" pattern="domainA\.ext$" />
    </conditions>
    <action type="Redirect" url="https://domainA.ext/folderA/" />
</rule>
<rule name="Check SSL for domainA" stopProcessing="true">
    <match url="(.*)" />
    <conditions logicalGrouping="MatchAll">
        <add input="{HTTP_HOST}" pattern="domainA\.ext$" />
        <add input="{HTTPS}" pattern="^OFF$" />
    </conditions>                         
    <action type="Redirect" url="https://domainA.ext/folderA/" />
</rule> 
```

*   第一条规则：如果路径不以 开头`folderA`，则重定向到`https://domainA.ext/folderA/`
*   第二条规则：如果 HTTPS 关闭，它会重定向到`https://domainA.ext/folderA/`

以及接下来的 2 个 `domainB.ext`：

```
<rule name="Check path folderB" stopProcessing="true">
    <match url="^folderB" negate="true" />
    <conditions logicalGrouping="MatchAll">
        <add input="{HTTP_HOST}" pattern="domainB\.ext$" />
    </conditions>
    <action type="Redirect" url="http://domainB.ext/folderB/" />
</rule>
<rule name="Check no SSL for domainB" stopProcessing="true">
    <match url="(.*)" />
    <conditions logicalGrouping="MatchAll">
        <add input="{HTTP_HOST}" pattern="domainB\.ext$" />
        <add input="{HTTPS}" pattern="^ON$" />
    </conditions>                         
    <action type="Redirect" url="http://domainB.ext/folderB/" />
</rule> 
```

*   第一条规则：如果路径不以 开头`folderB`，则重定向到`http://domainB.ext/folderB/`
*   第二条规则：如果 HTTPS 开启，它会重定向到`http://domainB.ext/folderB/`

# php - 如何解决贝宝交易的IPN致命错误？

> ID：15911283
> 
> 赞同：0
> 
> 时间：2013-04-09T19:54:23.267
> 
> 标签：php, paypal, paypal-sandbox, paypal-ipn, zen-cart

我有一个电子商务系统“Zen Cart”，安装了网站 PayPal IPN 用于支付模块，我已将其设置为沙盒以测试购买的功能。

在我结帐到 PayPal 并使用沙盒帐户向沙盒业务测试帐户付款后，钱实际上进入了业务帐户，它返回到网站，没有显示订单数量，并且在管理面板或任何地方都没有订单。

日志显示：

```
Apr 09 2013 11:53 -- IPN INFO - Confirmation/Validation response 

Apr 09 2013 11:53 -- Breakpoint: 1 - Collected data from PayPal notification

Apr 09 2013 11:53 -- IPN WARNING :: Transaction was not marked as VERIFIED. Keep this report for potential use in fraud investigations.
IPN Info = 

Apr 09 2013 11:53 -- IPN FATAL ERROR :: Transaction did not validate 
```

当我`ipncheck.php`使用 zen 购物车时，我收到此错误：

```
IPNCHECK.PHP - Version 1.0

IPN TESTING - POSTING to PayPal via: ssl://www.paypal.com:443

IPN TESTING - Confirmation/Validation response: RESPONSE RECEIVED - Communications OKAY

Script finished. 
```

请在这方面需要帮助！

提前致谢！

更新：

我在主要错误日志中收到此错误： `[10-Apr-2013 13:54:08] PHP Warning: implode() [<a href='function.implode'>function.implode</a>]: Invalid arguments passed in includes/modules/payment/paypal/paypal_functions.php on line 506`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T12:35:07.253

听起来您正在接收通信，但发送回 PayPal 进行验证时的 POST 未验证。导致订单无法更新。在此处查看[IPN 故障排除步骤](https://stackoverflow.com/questions/15778567/notify-url-never-call-when-buyer-paid-for-subscription/15788965#15788965)，它们可能会有所帮助。记录您收到的请求，以及您的系统发回的请求并进行比较。看看有没有区别。

# excel - 如何保存正在打开的文件？

> ID：15911284
> 
> 赞同：2
> 
> 时间：2013-04-09T19:54:25.027
> 
> 标签：excel, vba

我有一个适用于一个特定文件的宏。

我怎样才能使它适用于我的所有文件？具体来说，如何更改文件名以保存正在打开的文件？

```
Sub Macro1()
'
' Macro1 Macro
'
' Keyboard Shortcut: Ctrl+m
'
    Range("A:A,B:B").Select
    Range("B1").Activate
    ActiveSheet.Shapes.AddChart.Select
    ActiveChart.ChartType = xlLineStacked
    ActiveChart.SetSourceData Source:=Range( _
        "'cwapp5_MemCPU-Date-Mem'!$A:$A,'cwapp5_MemCPU-Date-Mem'!$B:$B")
    ChDir "D:\WayneCSV"
    ActiveWorkbook.SaveAs Filename:="D:\WayneCSV\cwapp5_MemCPU-Date-Mem.xlsx", _
        FileFormat:=xlOpenXMLWorkbook, CreateBackup:=False
End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:02:07.147

```
With ActiveSheet.Shapes.AddChart
    .ChartType = xlLineStacked
    .SetSourceData Source:=Range( _
    "'cwapp5_MemCPU-Date-Mem'!$A:$A,'cwapp5_MemCPU-Date-Mem'!$B:$B")
End With

ChDir "D:\WayneCSV"
ActiveWorkbook.SaveAs Filename:="D:\WayneCSV\" & *YourFileNameHere* &".xlsx", _
    FileFormat:=xlOpenXMLWorkbook, CreateBackup:=False 
```

将*YourFileNameHere*替换为您要保存文件的名称。

或者，如果您只想保存带有更改的活动工作簿

```
ActiveWorkbook.SaveAs Filename:=ThisWorkbook.FullName, _
    FileFormat:=xlOpenXMLWorkbook, CreateBackup:=False 
```

如果您想遍历“D:\WayneCSV”内所有可能的工作簿或文件，请告诉我您所说的`make it work for all my files?`天气是什么意思，这意味着打开 Excel 工作表或工作簿，或“D: \韦恩CSV"

**编辑：**

```
Dim StrFile As String

StrFile = Dir("D:\WayneCSV\*.CSV") ' Looks up each file with CSV extension

Do While Len(StrFile) > 0 ' While the file name is greater then nothing
     Workbooks.Open Filename:= "D:\WayneCSV\" & StrFile ' Open current workbook

 ActiveSheet.Shapes.AddChart.Select ' Add a chart
 ActiveChart.ChartType = xlLineStacked ' Add a chart type
 ActiveChart.SetSourceData Source:=Range("$A1:$B1", Range("$A1:$B1").End(xlDown)) ' Set the source range to be the used cells in A:B on the open worksheet 
 With ActiveChart.Parent
     .Height = .Height*1.5 'Increase Height by 50% 
     .Width = .Width*1.5   'Increase Width by 50%
 End With 

'Note the setting of the source will only work while there are no skipped blank if you 
'have empty rows in the source data please tell me and i can provide you with another
' way to get the information 

ActiveWorkbook.SaveAs Filename:="D:\WayneCSV\" & StrFile & ".xlsx", _
    FileFormat:=xlOpenXMLWorkbook, CreateBackup:=False  ' Save file as excel xlsx with current files name 

ActiveWorkbook.Close ' Close when finished before opening next file this can be removed if you'd like to keep all open for review at the end of loop.

StrFile = Dir ' Next File in Dir
Loop 
```

让我知道它是否有效，因为没有您的文件夹和数据我无法测试。但它*应该*工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:00:22.607

写在哪里

> 文件名：="D:\WayneCSV\cwapp5_MemCPU-Date-Mem.xlsx"

那是您的文件名，您可以将其替换为 ThisWorkbook.FullName 它应该可以工作

所以它应该给你这样的东西。

```
Filename:=ThisWorkbook.FullName, 
```

我也不明白那部分

```
ChDir "D:\WayneCSV" 
```

为什么要放路径然后是全名

我更像是一个访问程序员而不是一个 excel 程序员，所以我可能是错的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:02:43.907

看看[这个 SO 链接](https://stackoverflow.com/questions/1895616/how-to-get-the-excel-file-name-path-in-vba)

我认为你想要做的是`:="D:\WayneCSV\cwapp5_MemCPU-Date-Mem.xlsx"` 用`ActiveWorkbook.FullName`in `ActiveWorkbook.SaveAs`line替换

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T20:26:51.487

据我所知，您的宏是根据一些数据添加图表并保存工作表。

这是一个非常专业的宏，但是您需要将目录更改为其他列出的目录到本地驱动器上的目录，但您还需要找出要为其创建图表的数据的存储位置。

```
Sub Macro1()
' ' Macro1 Macro ' ' Keyboard Shortcut: Ctrl+m '  '<<< This is the naming convention and hotkey if you goto Tools > Macros in Excel 2003 or Developer > Macros in 2010

'Range("A:A,B:B").Select      '<<< This is where you are selecting all data in columns A and B and is not needed so I commented it out
'Range("B1").Activate   '<<< This code is 'activating' a cell, but not sure why, so I commented it out as it should not be needed
ActiveSheet.Shapes.AddChart.Select    '<<< You are adding a chart here
ActiveChart.ChartType = xlLineStacked    '<<<Defining a chart type
ActiveChart.SetSourceData Source:=Range( _ "'cwapp5_MemCPU-Date-Mem'!$A:$A,'cwapp5_MemCPU-Date-Mem'!$B:$B") '<<< Setting it's source data from a worksheet called 'cwapp5_MemCPU-Date-Mem' with header information from Column B and Data from Column A
ChDir "D:\WayneCSV" 
ActiveWorkbook.SaveAs Filename:="D:\WayneCSV\cwapp5_MemCPU-Date-Mem.xlsx", _         
    FileFormat:=xlOpenXMLWorkbook, CreateBackup:=False   '<<< You are saving a copy of your workbook
End Sub 
```

要使其适用于其他工作簿，您需要将所有范围重命名为数据所在的位置，将选项卡重命名为您的选项卡命名，并将工作簿重命名为您希望保存的位置和位置。

# python - python pexpect：SSHing 然后更新日期

> ID：15911290
> 
> 赞同：6
> 
> 时间：2013-04-09T19:54:43.663
> 
> 标签：python, ssh, pexpect

我终于让我的 python pexpect 脚本工作了，除了最重要的部分更新日期！我可以在框中进行 SSH，但我的第二个命令无法正确执行。我一直在用头撞墙试图找出原因。我检查了刺痛的输出，它应该根据编码的内容工作。我不是 python 或 pexpect 方面的专家，所以我需要一些帮助来弄清楚为什么我的时间没有更新。

**我的原始代码**：

```
list = ["089"]
sn = 0

ssh_new_conn = 'Are you sure you want to continue connecting'

class ThreadClass(threading.Thread):
def __init__(self, index):
super(ThreadClass, self).__init__()
self.index = index
def run(self):

sn = storelist[self.index]

#easterndate = (currenttime + datetime.timedelta(0, 3600))
#easterndate = easterndate

est = timezone('US/Eastern')
cst = timezone('US/Central')
#currenttime = (datetime.now())
currenttime = cst.localize(datetime.now())
#easterndate = (currenttime + timedelta(0, 3600))
#easterndate = easterndate.strftime("%a %b %d %H:%M:%S %Z %Y")
easterndate = currenttime.astimezone(est).strftime("%a %b %d %H:%M:%S %Z %Y")
command1 = "/usr/bin/ssh %(username)s@%(hostname)s" % locals()
command2 = " sudo date -s\"%(easterndate)s\"" % locals()
command3 = " sudo date -s\"%(currenttime)s\"" % locals()
now = datetime.now()

#central
if sn == "073" or sn == "066" or sn == "016": #or sn == "022":
    p = pexpect.spawn((command1 + command3), timeout=360)

#eastern
else:
    print(command1 + command2)
    p = pexpect.spawn((command1 + command2), timeout=360)

# Handles the 3 possible connection outcomes:
# a) Ssh to the remote host for the first time, triggering 'Are you sure you want to continue connecting'
# b) ask you for password
# c) No password is needed at all, because you already have the key.
i = p.expect([ssh_new_conn,'[pP]assword:',pexpect.EOF])
print ' Initial pexpect command output: ', i
if i == 0:
    # send 'yes'
    p.sendline('yes')
    i = p.expect(['[pP]assword:',pexpect.EOF])
    print 'sent yes. pexpect command output', i
    if i == 0:
        # send the password
        print "logging into box %(sn)s" % locals()
        p.sendline(password)
        print "login successful"
        print "Setting the time..."

elif i == 1:
    # send the password
    print "logging into box %(sn)s" % locals()
    p.sendline(password)
    print "login successful"
    print "Setting the time..."
    p.close()

elif i == 2:
    print "pexpect faced key or connection timeout"
    pass

print p.before

for i in range(len(list)):
  t = ThreadClass(i)
  t.start() 
```

**新代码**：

```
class ThreadClass(threading.Thread):
def __init__(self, index):
   super(ThreadClass, self).__init__()
   self.index = index
def run(self):

    try:
        sn = storelist[self.index]
        username = raw_input('username: ')
        password = raw_input('password: ')
        hostname = "[hostname]"
        est = timezone('US/Eastern')
        cst = timezone('US/Central')
        #currenttime = (datetime.now())
        currenttime = cst.localize(datetime.now())
        #easterndate = (currenttime + timedelta(0, 3600))
        #easterndate = easterndate.strftime("%a %b %d %H:%M:%S %Z %Y")
        easterndate = currenttime.astimezone(est).strftime("%a %b %d %H:%M:%S %Z %Y")
        ssh = pxssh.pxssh()

        print(hostname + " " + username + " " + password)
        ssh.login(hostname, username, password)

        if sn == "073" or sn == "066" or sn == "016": #or sn == "022":
            ssh.sendline ('date')       # run a command
            ssh.prompt()                # match the prompt
            print(s.before)           # print everything before the prompt.
            ssh.sendline ('sudo date -s\"%(currenttime)s\"' % locals())  # run a command
            ssh.expect('(?i)password.*:')  # match password prompt for sudo
            ssh.sendline(password)
            ssh.prompt()
            print(s.before)
            ssh.logout()
        else:
            ssh.sendline ('date')       # run a command
            ssh.prompt()                # match the prompt
            print(s.before)           # print everything before the prompt.
            ssh.sendline ('sudo date -s\"%(easterndate)s\"' % locals())  # run a command
            ssh.expect('(?i)password.*:')  # match password prompt for sudo
            ssh.sendline(password)
            ssh.prompt()
            print(s.before)
            ssh.logout()

    except pxssh.ExceptionPxssh as e:
        print(e)

for i in range(len(storelist)):
  t = ThreadClass(i)
  t.start() 
```

**我得到的新错误**：

```
Traceback (most recent call last):
  File "./sshtest.py", line 8, in <module>
    s.login (hostname, username, password)
  File "/usr/lib/python2.6/dist-packages/pxssh.py", line 243, in login
    if not self.synch_original_prompt():
  File "/usr/lib/python2.6/dist-packages/pxssh.py", line 134, in synch_original_prompt
    self.read_nonblocking(size=10000,timeout=1) # GAS: Clear out the cache before getting the prompt
  File "/usr/lib/python2.6/dist-packages/pexpect.py", line 824, in read_nonblocking
    raise TIMEOUT ('Timeout exceeded in read_nonblocking().')
pexpect.TIMEOUT: Timeout exceeded in read_nonblocking(). 
```

**错误的解决方案**

我想出了解决我遇到的错误的方法。由于一个已知的错误，我不得不将以下行添加到 usr/lib/python.2.6/dist-packages/pxssh.py：

```
self.sendline()       #line 134
time.sleep(0.5)       #line 135
self.read_nonblocking(size=10000,timeout=1) # GAS: Clear out the cache before getting the prompt 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-24T22:12:26.527

**错误的解决方案**

我想出了解决我遇到的错误的方法。由于一个已知的错误，我不得不将以下行添加到 usr/lib/python.2.6/dist-packages/pxssh.py：

```
self.sendline()       #line 134
time.sleep(0.5)       #line 135
self.read_nonblocking(size=10000,timeout=1) # GAS: Clear out the cache before getting the prompt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T22:48:49.960

您可能应该处理 sudo 密码提示（+ `-t`ssh 选项以获取 tty）并使用`p.expect(EOF)`before`p.close()`以避免过早终止子进程。

这是一个基于[pexpect docs](http://pexpect.sourceforge.net/pxssh.html)的示例：

```
import pxssh
try:
    s = pxssh.pxssh()
    s.login (hostname, username, password)
    s.sendline ('date')       # run a command
    s.prompt()                # match the prompt
    print(s.before)           # print everything before the prompt.
    s.sendline ('sudo date')  # run a command
    s.expect('(?i)password.*:')  # match password prompt for sudo
    s.sendline(password)
    s.prompt()
    print(s.before)
    s.logout()
except pxssh.ExceptionPxssh as e:
    print(e) 
```

您也可以尝试[`fabric`](http://fabfile.org)：

```
# fabfile.py
from fabric.api import run, sudo

def date():
    run('date')
    sudo('date') 
```

用法：

```
$ fab -H localhost,user@host date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-01T21:56:55.467

对于像我这样在 2019 年坚持使用 python 2.6 并且不想破解他们的站点包的其他可怜的灵魂，我能够通过在构造函数中将 maxread 设置为 1 来解决这个问题。

`pxssh.pxssh(maxread=1)`

# windows-phone-7 - 适用于 Windows Phone 7 的多分辨率闪屏、磁贴和应用程序图标

> ID：15911292
> 
> 赞同：0
> 
> 时间：2013-04-09T19:54:51.783
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone-7.1, windows-phone

我正在开发一个必须适用于 WP7 和 WP8 的应用程序。并且想要创建多分辨率闪屏和瓷砖。我知道 WP8 可以轻松完成（[http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769511(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/ff769511(v=vs.105).aspx)）

但是我怎样才能为 WP7 应用程序做到这一点？

如何使我的应用程序（为 WP7.5 开发）更接近 WP8，但仍在使用 WP7.5-7.8。
我只希望我的应用程序看起来适合 WP7 和 WP8 设备。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:06:18.463

您也可以在 WP8 设备上运行为 WP7 设计的应用程序，但是在某些设备上您会遇到屏幕分辨率问题。您可以开发两个版本的应用程序 WP7 和 WP8。如果正确地采用这种方法，移植并不是那么困难。在文章中，您可以找到很好的建议[http://www.developer.nokia.com/Community/Wiki/Maintaining_a_WP7_and_WP8_version_of_a_same_Silverlight_application](http://www.developer.nokia.com/Community/Wiki/Maintaining_a_WP7_and_WP8_version_of_a_same_Silverlight_application)和[http://www.developer.nokia.com/Community/Wiki/Introduction_to_multiple-resolution_support_on_Windows_Phone_8_apps](http://www.developer.nokia.com/Community/Wiki/Introduction_to_multiple-resolution_support_on_Windows_Phone_8_apps)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T16:43:03.047

由于 WP7 设备都是（并且永远都是）WVGA，因此支持多种分辨率是没有意义的。但是，您可以做的是在 7.8+ 上支持多种图块大小，我建议为此使用[Mangopollo](https://mangopollo.codeplex.com/)。

只需从应用程序的 WP8 版本重用 WVGA 磁贴资源，并在应用程序的 WMAppManifest.xml 中进行适当的更改：

```
<AppExtra xmlns="" AppPlatformVersion="8.0">
  <Extra Name="Tiles"/>
</AppExtra> 
```

这应该放在`<Deployment>`标签之前`<App>`。然后，您只需要确保在首次使用 Mangopollo 运行时更改主图块的类型和资产，并在创建或更新任何辅助图块时使用该库。

这与 WP7 将获得的多分辨率接近。

# angularjs - 是否可以“观察”属性的变化

> ID：15911300
> 
> 赞同：60
> 
> 时间：2013-04-09T19:55:21.387
> 
> 标签：angularjs, angularjs-directive

是否可以“监视”指令上的 ui 更改？类似的东西：

```
.directive('vValidation', function() {
    return function(scope, element, attrs) {
        element.$watch(function() {
            if (this.hasClass('someClass')) console.log('someClass added');
        });
    }
}) 
```

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2013-04-09T20:10:13.817

是的。`attr.$observe`如果在属性处使用插值，则可以使用。

但是，如果这不是一个插值属性，并且您希望它从应用程序的其他地方更改（极不推荐，请阅读[Common Pitfalls](http://docs.angularjs.org/misc/faq)），那么您可以`$watch`返回一个函数：

```
scope.$watch(function() {
    return element.attr('class'); 
}, function(newValue){
    // do stuff with newValue
}); 
```

无论如何，对您来说最好的方法可能是更改更改元素类的代码。哪个瞬间变了？

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2013-04-09T19:59:31.933

```
attrs.$observe('class', function(val){}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-09-15T11:34:53.527

您还可以在控制器中观察变量。

此代码在其他模块显示反馈消息后自动隐藏通知栏。

**HTML：**

```
<notification-bar
    data-showbar='vm.notification.show'>
        <p> {{ vm.notification.message }} </p>
</notification-bar> 
```

**指示：**

```
var directive = {
    restrict: 'E',
    replace: true,
    transclude: true,
    scope: {
        showbar: '=showbar',
    },
    templateUrl: '/app/views/partials/notification.html',
    controller: function ($scope, $element, $attrs) {

        $scope.$watch('showbar', function (newValue, oldValue) {
            //console.log('showbar changed:', newValue);
            hide_element();
        }, true);

        function hide_element() {
            $timeout(function () {
                $scope.showbar = false;
            }, 3000);
        }
    }
}; 
```

**指令模板：**

```
<div class="notification-bar" data-ng-show="showbar"><div>
    <div class="menucloud-notification-content"></div> 
```

# node.js - Apachebench 提出的请求比我要求的要多

> ID：15911301
> 
> 赞同：0
> 
> 时间：2013-04-09T19:55:26.123
> 
> 标签：node.js, benchmarking, apachebench

我正在尝试使用 apachebench 发出一些请求来测试我的服务器。然而，它经常提出比我要求的更多的请求。我正在使用它来测试使用 express 的 node.js 服务器。

```
ab -n 1 http://myserver/ 
```

这似乎很挑剔，因为有时它只会发出一个请求，但有时它会发出 10 到 100 次请求。不好的部分是它仍然只是报告它只提出了一个请求。难道我做错了什么？这与 node.js 是异步的有什么关系吗？

其他人在使用“ab”对 node.js 服务器进行基准测试时遇到问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:29:23.123

看起来像 OSX Lion 上的 ab 有问题：

[http://simon.heimlicher.com/articles/2012/07/08/fix-apache-bench-ab-on-os-x-lion](http://simon.heimlicher.com/articles/2012/07/08/fix-apache-bench-ab-on-os-x-lion)

这解决了我的问题。

# logback - 如何根据上下文名称有条件地配置 logback？

> ID：15911303
> 
> 赞同：15
> 
> 时间：2013-04-09T19:55:28.137
> 
> 标签：logback

我有三个独立的项目，每个项目都有自己的嵌入式 logback.xml 文件。这些文件中的每一个都在用户的主目录中包含一个通用的日志记录配置文件：

```
<include file="${user_home}/loggingConfig.xml"/> 
```

包含之后，我有这个规范：

```
<root level="error">
    <appender-ref ref="${appender:-console}" />
</root> 
```

这允许用户配置他们的日志级别和附加程序，并通过核心日志配置文件应用它们。

例如，在 ~/loggingConfig.xml 我有这一行：

```
<property name="appender" value="file" /> 
```

但是喜欢控制台日志记录的同事会忽略这条线。

问题是我想为每个日志文件使用不同的附加程序。换句话说，我想根据正在读取自定义配置文件的项目有条件地设置不同的附加程序。

我意识到我可以将每个项目配置为读取不同命名的配置文件，但我想消除混乱并允许共享配置。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-04-09T19:55:28.137

该文档对于高级配置来说有点多余，但我发现您可以使用 logback 上下文名称作为带有条件日志记录的变量。因此，对于每个项目，我在项目 logback.xml 文件中定义了一个自定义上下文名称：

```
<contextName>project1</contextName> 
```

ETC...

然后在我的 ~/loggingConfig.xml 文件中，我可以这样做：

```
<property name="appender" value="file" />

<!--if condition='property("CONTEXT_NAME").equalsIgnoreCase("project1")'>
    <then>
        <property name="appender" value="file" />
    </then>
</if-->
<if condition='property("CONTEXT_NAME").equalsIgnoreCase("project2")'>
    <then>
        <property name="appender" value="console" />
    </then>
</if>
<if condition='property("CONTEXT_NAME").equalsIgnoreCase("project3")'>
    <then>
        <property name="appender" value="file" />
    </then>
</if> 
```

这可能有点笨拙，但实际上我正在使用此解决方案来配置单个附加程序用于不同项目的属性，同时对于没有自己的条件块的项目仍然可以优雅地回退到默认值。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2016-01-06T18:23:15.243

如果这对其他人有帮助，这就是我使用可以包含多个附加程序的属性设置条件 logback 配置的方式：

```
<root level="${logback.loglevel}">
    <if condition='isDefined("logback.appenders")'>
        <then>
            <if condition='property("logback.appenders").contains("CONSOLE")'>
                <then>
                    <appender-ref ref="CONSOLE"/>
                </then>
            </if>
            <if condition='property("logback.appenders").contains("FILE")'>
                <then>
                    <appender-ref ref="FILE"/>
                </then>
            </if>
            <if condition='property("logback.appenders").contains("GELF")'>
                <then>
                    <appender-ref ref="GELF"/>
                </then>
            </if>
        </then>
        <else>
            <appender-ref ref="CONSOLE"/>
        </else>
    </if>
</root> 
```

# cookies - phantomjs 缺少 cookie，与萤火虫相比？

> ID：15911308
> 
> 赞同：2
> 
> 时间：2013-04-09T19:55:35.693
> 
> 标签：cookies, firebug, phantomjs

我正在尝试使用 phantomjs 获取 cookie，但它似乎不完整？

在命令行：

```
phantomjs --cookies-file=cookies.txt --debug=true test.js 
```

测试.js：

```
var page = require('webpage').create();
page.open('http://example.com', function (status) {
   page.evaluate(function() {
      document.cookie;
   });
   page.cookies;
   phantom.cookies;
}); 
```

我将 cookies.txt 与 firebug cookie 和 LiveHttpHeaders 进行比较，发现 phantomjs 保存的文件中缺少一些 cookie？

# php - 如何在PHP中检查时间是否在两次之间

> ID：15911312
> 
> 赞同：75
> 
> 时间：2013-04-09T19:55:53.340
> 
> 标签：php, time

我有以下三个字符串（当前时间、日落和日出），如何找到当前时间是否在日出和日落之间？

```
$current_time = "10:59 pm";
$sunrise = "5:42 am";
$sunset = "6:26 pm"; 
```

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-04-09T19:58:04.153

```
$current_time = "4:59 pm";
$sunrise = "5:42 am";
$sunset = "6:26 pm";
$date1 = DateTime::createFromFormat('h:i a', $current_time);
$date2 = DateTime::createFromFormat('h:i a', $sunrise);
$date3 = DateTime::createFromFormat('h:i a', $sunset);
if ($date1 > $date2 && $date1 < $date3)
{
   echo 'here';
} 
```

[看到它在行动](http://codepad.viper-7.com/vT3NbQ)

参考

*   [约会时间](http://www.php.net/manual/en/book.datetime.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T20:01:38.313

我建议您首先使用 substr 函数和 intval 将字符串“转换”为整数。

在这一步之后，您应该能够简单地比较时间。

（请注意，您应该使用 18:00 而不是 6:00 PM，这会更容易处理，因此您可以使用 substr“检测”时间是上午还是下午，然后在数字上添加“12”）

我很确定有更优雅的方法可以做到这一点，但这应该只是给你一个基本的想法，为不高级的 php 开发人员提供一种简单的方法。

希望能帮助到你

# c++ - 基于C++11的线程类库

> ID：15911314
> 
> 赞同：2
> 
> 时间：2013-04-09T19:56:03.590
> 
> 标签：c++, multithreading, c++11, mingw

C++11[`<thread>`](http://en.cppreference.com/w/cpp/thread)在其标准草案中引入。但是[MingGW-4.7](http://gcc.gnu.org/projects/cxx0x.html)不支持。

是否有任何尝试实现基于[`std::thread`](http://en.cppreference.com/w/cpp/thread/thread)缺少 MingGW-4.7 的线程？

我想在我的项目中使用它，升级编译器后，我只需稍作改动就将其替换为标准 C++11 线程库。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:02:39.627

如果您想`std::thread`与 MinGW 一起使用，用户[rubenvb](https://stackoverflow.com/users/256138/rubenvb)会保留[Sourceforge](http://sourceforge.net/projects/mingw-w64/files/Toolchains%20targetting%20Win64/Personal%20Builds/rubenvb/gcc-4.8-experimental-stdthread/)`std::thread`中的MinGW64 版本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T08:10:09.673

我正在使用[MinGW-builds](http://sourceforge.net/projects/mingwbuilds/files/host-windows/releases/)。选择标记为“posix-thread”的编译器，它们通过 pthread 库实现 C++11 多线程支持。

# eclipse - Glassfish 热部署与文件同步

> ID：15911316
> 
> 赞同：0
> 
> 时间：2013-04-09T19:56:14.537
> 
> 标签：eclipse, maven, glassfish, glassfish-3

我一直在寻找在 glassfish 上执行热部署的方法。我找到了这个指南：

[http://entjavastuff.blogspot.se/2010/11/hot-deploying-from-eclipse.html](http://entjavastuff.blogspot.se/2010/11/hot-deploying-from-eclipse.html)

这正是我正在寻找的。不幸的是，这是给 JBoss 的。我不知道如何为 Glassfish 处理它。

您能帮我将“配置目的地”部分转换为 Glassfish 目录吗？

此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-11T07:21:40.413

这将完全相同，除了将文件的同步指向 JBoss 部署目录，而是将它们指向 glassfish/domains/domain1/autodeploy 目录。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-18T17:51:00.590

忘记那个。

[“文件打开失败”将 java 类编译为 glassfish 自动部署](https://stackoverflow.com/questions/8317550/file-open-failure-compiling-java-class-to-glassfish-autodeploy)

如果有人找到可以自动部署的 Java EE 6 容器，请分享。上个月我尝试在 JBoss、WebLogic 和 Glassfish 上进行自动部署。它从来没有奏效。

经验教训：不要使用 Java EE。在一个简单的 tomcat 上使用 Spring。

# c# - 最近添加的记录未包含在 CrmOrganizationServiceContext ContactSet 中

> ID：15911321
> 
> 赞同：1
> 
> 时间：2013-04-09T19:56:21.333
> 
> 标签：c#, dynamics-crm-2011

当我运行下面的代码时，它会添加记录，但一开始它并没有包含在 ContactSet 中。只有当我再次运行它时，它才会显示在 ContactSet 上，并且它显示一次，除了我得到重复记录的事实。知道为什么 ContactSet 不显示创建的新记录吗？

```
 var xrm = new XrmServiceContext("Xrm");

        //Create a new contact called Allison Brown.
        var testContact = new Contact
        {
            FirstName = "Allison",
            LastName = "Brown",
            Address1_Line1 = "101 W 1st St",
            Address1_City = "Los Angeles",
            Address1_StateOrProvince = "CA",
            Address1_PostalCode = "90001",
            Telephone1 = "310-111-1111",
            EMailAddress1 = "allisonbrown@aol.com"
        };

        xrm.AddObject(testContact);
        xrm.SaveChanges();
        var exampleContacts = xrm.ContactSet.Where(c => c.EMailAddress1.EndsWith(".com"));
        return View(exampleContacts); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:55:44.913

这与[上下文如何跟踪记录](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.client.mergeoption.aspx)有关。默认情况下，MergeOption 枚举设置为 AppendOnly。这意味着一旦在上下文中跟踪记录，它就不会使用来自服务器的数据进行更新。因此，当您开始跟踪 testContact 时，它不会让您检索它，因为它认为它是“新”记录（没有 Guid）。因此，您最可能想要做的是将上下文的枚举设置为 NoTracking 或 OverwriteChanges。这样它就不会在上下文中跟踪记录，也不会在您调用检索记录时更新它。

# android - 在模拟器中使用本地日历

> ID：15911327
> 
> 赞同：1
> 
> 时间：2013-04-09T19:56:53.193
> 
> 标签：android, calendar, emulation

全部

好吧，我让模拟器在我的 Linux-PC（使用 GoogleAPI Level 8）上运行，并在上面安装了 Calendar 和 CalendarProvider。

然后，我必须添加一个帐户，在 Exchange 和 Google 之间进行选择。我添加了一个 Google 帐户，但我也想使用本地日历。

我没有找到任何选择这样做。我试过这个[http://blog.stefan-macke.com/2011/12/10/how-to-add-a-local-calendar-to-the-android-2-2-froyo-emulator/](http://blog.stefan-macke.com/2011/12/10/how-to-add-a-local-calendar-to-the-android-2-2-froyo-emulator/) 它工作，但是在我重新启动模拟器后，本地帐户被删除并且我无法再次添加它，因为它说我已经有一个帐户（Google）。我无法删除此 Google 帐户，因为模拟器说，某些应用程序使用它... :(

然后，我看到了应用程序的作用。非常简单：只需在日历表中添加一个条目。

然后我尝试使用以下查询在模拟器上使用 sqlite3 添加帐户：

```
INSERT INTO Calendars (_id, _sync_account, _sync_account_type, name, displayName,  color, access_level, selected, ownerAccount, sync_events, timezone, hidden) VALUES (5, 'Lokal', 'LOCAL', 'Lokal', 'Lokal', 14417920, 700, 1, 'Lokal', 1, 'GMT', 0); 
```

如果我启动日历，则此帐户已被删除。在 LogCat 我可以看到：

D/CalendarProvider2（1076）：删除已删除帐户帐户 {name=Lokal，type=LOCAL} 的数据

如果我启动日历，然后在表中添加条目，它会运行，但我无法修改条目，如果我尝试管理日历，日历应用程序会崩溃。

您能否帮助我了解如何在模拟器中使用本地帐户来访问日历？

非常感谢 Luca Bertoncello

# php - 如何使用 PHP 检索 yelp category_filter？JSON 对象内的 JSON 对象

> ID：15911332
> 
> 赞同：0
> 
> 时间：2013-04-09T19:57:00.663
> 
> 标签：php, json, multidimensional-array, yelp

我正在使用 Yelp API v1，我正在尝试获取存储在类别对象中的 category_filter。我的 JSON 的一小部分如下所示：

```
"businesses": [
{
 "address1": "800 N Point St",
 "phone": "4157492060",
 "categories": [{
"category_filter": "newamerican",
"search_url": "http://www.yelp.com/search?cflt=newamerican\u0026find_desc=\u0026find_loc=800+N+Point+St%2C+San+Francisco+94109",
"name": "American (New)"
}],
 "name": "Gary Danko",
 }] 
```

我的 php 脚本如下所示：

```
<?php
$yelpstring = file_get_contents("PATH TO JSON", true); 

$obj = json_decode($yelpstring, true);
foreach($obj['businesses'] as $business){
echo "Restaurant name: " . $business['name']."<br/>";
echo "Restaurant Type: " . $business['categories']['category_filter']."<br/>";
echo "Address 1: " . $business['address1']."<br/>";
echo "Phone: " . $business['phone'] ."<br/>";
echo "<hr>";
}
?> 
```

我得到了姓名、地址 1 和电话，但不是 category_filter 我得到一个 php 错误，上面写着：

“注意：未定义的索引：第 12 行 file.php 中的 category_filter”

我不明白我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T19:58:06.130

`$business['categories']['category_filter']`

是错的

你必须使用：`$business['categories'][0]['category_filter']`

在您的 json 中是“[{”，这意味着另一个数组中有一个数组（/object，解码为 assoc-array）。

# jquery-mobile - jQuery Mobile 滑动导航异常

> ID：15911346
> 
> 赞同：1
> 
> 时间：2013-04-09T19:57:50.260
> 
> 标签：jquery-mobile, jquery, swipe

我在一个文档中有一系列页面，我利用触摸设备中的滑动从一个页面导航到另一个页面。

我不知道该怎么做，就是在我到达某个页面 id 后停止滑动事件。

这是我在导航中使用的代码：

```
$('div.ui-page').live("swipeleft", function(){
var nextpage = $(this).next('div[data-role="page"]');
if (nextpage.length > 0) {
$.mobile.changePage(nextpage, "slide", false, true);
}
});
$('div.ui-page').live("swiperight", function(){
var prevpage = $(this).prev('div[data-role="page"]');
if (prevpage.length > 0) {
$.mobile.changePage(prevpage, {transition: "slide",
reverse: true}, true, true);
}
}); 
```

我正在使用 JQM 1.3

感谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T20:19:53.870

这是一个工作示例：http: [//jsfiddle.net/Gajotres/GXex5/](http://jsfiddle.net/Gajotres/GXex5/)

```
$(document).off('swipeleft').on('swipeleft', '[data-role="page"]', function(event){    
    if($(this).attr('id') == 'article2') {
        event.preventDefault();
        return false;
    }
    var nextpage = $.mobile.activePage.next('[data-role="page"]');
    // swipe using id of next page if exists
    if (nextpage.length > 0) {
        $.mobile.changePage(nextpage, {transition: "slide", reverse: false}, true, true);
    }
    event.handled = true;

});

$(document).off('swiperight').on('swiperight', '[data-role="page"]', function(event){   
    var prevpage = $(this).prev('[data-role="page"]');
    if (prevpage.length > 0) {
        $.mobile.changePage(prevpage, {transition: "slide", reverse: true}, true, true);
    }
    event.handled = true;
}); 
```

基本上你只需要这段代码：

```
if($(this).attr('id') == 'article2') {
    event.preventDefault();
    return false;
} 
```

此代码将检查某个页面是否具有特定名称，如果是，它将阻止默认操作（事件）。也不要忘记在你的代码中传递一个事件对象，所以

改变这个：

```
$('div.ui-page').live("swiperight", function(){ 
```

对此：

```
$('div.ui-page').live("swiperight", function(event){ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T20:15:12.493

使用下面定义下一页和上一页ID，如果它等于您不想显示的页面，则不执行任何操作。

```
var DoNothing = 'DoNothing';

// fetch ID of next page in DOM
var nextpage = $.mobile.activePage.next('[data-role=page]')[0].id;

// fetch ID of previous page in DOM
var prevpage = $.mobile.activePage.prev('[data-role=page]')[0].id;

// logic
if(nextpage == DoNothing || prevpage == DoNothing) {
// Do nothing!
} 
```

# javascript - 如果其中的标题标签为空，则隐藏一个div？

> ID：15911355
> 
> 赞同：1
> 
> 时间：2013-04-09T19:58:11.690
> 
> 标签：javascript, jquery, css

如果没有动态输出内容，我有一个轮播，我试图隐藏某些幻灯片的描述。

我的内容输出结构：

```
<div class="caption">
   <h3><a>title</a></h3>
   <p><a>description</a></p>
</div> 
```

我的结构没有：

```
<div class="caption">
   <h3><a></a></h3>
   <p><a></a></p>
</div> 
```

Javascript：

```
if($.trim($('.caption h3 a').text()) != "") {
$(".carousel-caption.h").addClass("visible");
} 
```

我通过查看此处的类似问题获得了 javascript。我尝试了各种方法来做到这一点，但无济于事。我不太确定我错过了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T20:00:05.580

您可以这样做以隐藏所有`.caption`具有空标题的内容：

```
$('.caption').show().filter(function(){
   return $.trim($('h3', this).text())===''
}).hide(); 
```

这可能与您的初始解决方案更接近，仅在头部有内容时更改类：

```
$('.caption').each(function(){
    if ($.trim($('h3', this).text())!=='') $(this).addClass('visible');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:04:36.117

我不是一个 jQuery 人。但在 YUI 中，它可以简单地像：

```
if (Y.one(".caption h3 a").get("innerHTML") == "") {
    alert("its empty");
} 
```

尝试在 jquery 中使用 .html 而不是 .text

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:06:42.920

这有效，

```
 if($('.caption h3 a').text().trim() != "") {
       $(".carousel-caption.h").addClass("visible");
 } 
```

[**小提琴**](http://jsfiddle.net/3KfCZ/)

# c# - 在 Web API 中设置 HTTP 缓存控制标头

> ID：15911356
> 
> 赞同：57
> 
> 时间：2013-04-09T19:58:17.733
> 
> 标签：c#, asp.net-web-api, http-caching

在 WebAPI 中为公共缓存服务器设置缓存控制标头的最佳方法是什么？

我对我的服务器上的 OutputCache 控件不感兴趣，我希望控制 CDN 端及其他地方的缓存（我有单独的 API 调用，其中可以无限期地缓存给定 URL 的响应）但是我读过的所有内容远不是引用 WebAPI 的预发布版本（因此引用似乎不再存在的东西，例如 System.Web.HttpContext.Current.Reponse.Headers.CacheControl），或者仅设置几个 http 标头似乎非常复杂。

有没有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：102
> 
> 时间：2014-03-24T20:40:27.033

正如评论中所建议的，您可以创建一个 ActionFilterAttribute。这是一个仅处理 MaxAge 属性的简单示例：

```
public class CacheControlAttribute : System.Web.Http.Filters.ActionFilterAttribute
{
    public int MaxAge { get; set; }

    public CacheControlAttribute()
    {
        MaxAge = 3600;
    }

    public override void OnActionExecuted(HttpActionExecutedContext context)
    {
        if (context.Response != null)
            context.Response.Headers.CacheControl = new CacheControlHeaderValue()
            {
                Public = true,
                MaxAge = TimeSpan.FromSeconds(MaxAge)
            };

        base.OnActionExecuted(context);
    }
} 
```

然后你可以将它应用到你的方法中：

```
 [CacheControl(MaxAge = 60)]
 public string GetFoo(int id)
 {
    // ...
 } 
```

* * *

## 回答 #2

> 赞同：81
> 
> 时间：2013-04-10T01:33:13.663

缓存控制头可以这样设置。

```
public HttpResponseMessage GetFoo(int id)
{
    var foo = _FooRepository.GetFoo(id);
    var response = Request.CreateResponse(HttpStatusCode.OK, foo);
    response.Headers.CacheControl = new CacheControlHeaderValue()
        {
            Public = true,
            MaxAge = new TimeSpan(1, 0, 0, 0)
        };
    return response;
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2017-07-24T16:39:11.607

如果有人在这里寻找专门针对 ASP.NET Core 的答案，您现在可以按照 @Jacob 的建议执行操作，而无需编写自己的过滤器。核心已经包括这个：

```
[ResponseCache(VaryByHeader = "User-Agent", Duration = 1800)]
public async Task<JsonResult> GetData()
{
} 
```

[https://docs.microsoft.com/en-us/aspnet/core/performance/caching/response](https://docs.microsoft.com/en-us/aspnet/core/performance/caching/response)

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-08-02T10:04:31.257

像[这个建议过滤器的答案](https://stackoverflow.com/a/22620144/1037948)一样，考虑“扩展”版本——http: [//www.strathweb.com/2012/05/output-caching-in-asp-net-web-api/](http://www.strathweb.com/2012/05/output-caching-in-asp-net-web-api/)

它曾经作为 NuGet 包提供`Strathweb.CacheOutput.WebApi2`，但[似乎不再托管](https://github.com/filipw/AspNetWebApi-OutputCache/issues/74)，而是在 GitHub 上 -- [https://github.com/filipw/AspNetWebApi-OutputCache](https://github.com/filipw/AspNetWebApi-OutputCache)

# ruby-on-rails-3 - has_many_and_belongs_to 自加入关联和条件 has_many

> ID：15911357
> 
> 赞同：0
> 
> 时间：2013-04-09T19:58:19.280
> 
> 标签：ruby-on-rails-3, associations, self-join

我们有这 3 个模型：

```
class Group < ActiveRecord::Base
  attr_accessible :name

  has_many :users
  has_and_belongs_to_many :suppliers,
                          :class_name => "Group",
                          :foreign_key => "customer_id",
                          :association_foreign_id => "supplier_id"

  has_and_belongs_to_many :customers,
                          :class_name => "Group",
                          :foreign_key => "supplier_id",
                          :association_foreign_id => "customer_id"

  has_many :orders, :as => :orderable

  validates :name => :presence => true
end

class User < ActiveRecord::Base
  attr_accessible :email, :name

  has_many :orders, :as => :orderable
  belongs_to :group

  validates :email, :name, :group_id, :presence => true
end

class Order < ActiveRecord::Base
  belongs_to :orderable, :polymorphic => true

  validates :orderable_id, :presence => true
end 
```

根据自联接`Group`模型，我们有 2 种“类型”的组：`customers`和`suppliers`。

现在我们希望`has_many :orders, :as => :orderable`关联应该只存在于`customer`组类型而不是`suppliers`.

因此，只有 a`customer`可以有很多订单，而 a`supplier`不能有任何`Order`关联。

有没有办法做到这一点？或者我必须将`Group`模型拆分为`Customer`和`Supplier`模型？

谢谢！

# c++ - C++ std::vector::clear() 崩溃

> ID：15911359
> 
> 赞同：0
> 
> 时间：2013-04-09T19:58:24.027
> 
> 标签：c++, stdvector

我有一个程序，我有一个 std::vector 作为类的成员：

```
class Blackboard
{
public:
    inline std::vector<Vector2<int> > GetPath()         
    { return m_path; }

    inline void SetPath(std::vector<Vector2<int> > path)
    { m_path = path; }

    inline void ClearPath()                                         
    { if(m_path.size() > 0) m_path.clear(); }

private:
    std::vector<Vector2<int>> m_path;
}; 
```

其中 Vector2 类定义为：

```
template <class T>
class Vector2
{
private:
    T m_x;
    T m_y;

public:
    Vector2(void)
    { m_x = 0; m_y = 0;}

    Vector2(T x, T y)                                           
    { m_x = x; m_y = y;}

    ~Vector2(void)                                      
    { }

    inline T x() const                                  
    { return m_x; }

    inline T y() const                                  
    { return m_y; }

    // ...
}; 
```

在某些时候我打电话给：

```
m_blackboard.ClearPath(); 
```

这在调试中工作正常，但在发布时崩溃，“Microsoft Visual Studio C 运行时库在 Test2.exe 中检测到致命错误”。信息。

调用堆栈，在我仍然可以看到的最后一点显示：

```
Test2.exe!std::vector<RBT::Vector2<int>,
std::allocator<RBT::Vector2<int> > >::erase
(std::_Vector_const_iterator<RBT::Vector2<int>,
std::allocator<RBT::Vector2<int> > > 
_First_arg={m_x=15 m_y=7 },
std::_Vector_const_iterator<RBT::Vector2<int>,
std::allocator<RBT::Vector2<int> > > 
_Last_arg={m_x=15 m_y=8 })  Line 1037 + 0xe bytes  C++ 
```

这是我调用最终崩溃的代码的地方：

```
BTNode::Status GoToDestBehavior::Update()
{
    BTEntityData::Node* node = m_dataRef->m_bTree.GetNode(m_index);
    if(node->m_state == BTNode::STATE_READY)
    {
        BehaviorTree::RequestDeferredAction(Batch::PATHFIND, m_dataRef->m_entityID);
        return BTNode::STATE_RUNNING;
    }
    else if(node->m_state == BTNode::STATE_RUNNING)
    {
        std::vector<Vector2<int>>  path = m_dataRef->m_blackboard.GetPath();

        EntitySystem::Entity* entity = EntitySystem::GetEntity(m_dataRef->m_entityID);
        Assert(entity != NULL, "Invalid entity\n");

        Assert(entity->HasComponent(Component::PHYSICS_COMP), "Associated entity must have physics component to move\n");
        int phyIndex = entity->GetComponentIndex(Component::PHYSICS_COMP);

        PhysicsSystem::PhysicsData * physicsData = PhysicsSystem::GetComponent(phyIndex);
        Assert(physicsData != NULL, "Invalid physics data\n");

        // Path is empty, so finish
        if(path.size() == 0)
        {
            physicsData->m_dir = Direction::NONE;       // Stop because we are here
            return BTNode::STATE_SUCCESS;
        }

        // Remove last element if we are at it
        //LogFmt("Size of vector %d\n", path.size());
        Vector2<int> last = path.back();
        if(last.x() == physicsData->m_posX && last.y() == physicsData->m_posY)
        {
            path.pop_back();
        }

        // Last node of the path has been transversed
        if(path.size() == 0)
        {
            physicsData->m_dir = Direction::NONE;       // Stop because we are here
            m_dataRef->m_blackboard.ClearPath();
            return BTNode::STATE_SUCCESS;
        }

        Vector2<int> step = path.back();                

        physicsData->m_dir = Direction::VectorToDirection(physicsData->m_posX, physicsData->m_posY, step.x(), step.y());
        if(physicsData->m_dir == Direction::NONE)
        {
            m_dataRef->m_blackboard.SetPath(path);
            return BTNode::STATE_FAIL; 
        }
        m_dataRef->m_blackboard.SetPath(path);
        return BTNode::STATE_RUNNING;
    }

    return BTNode::STATE_ERROR;
} 
```

我不知道它为什么会这样。我在网上发现的大多数类似问题都有在空数组上调用 clear 的问题，但我对此有所防范，所以这不应该是问题。

我能想到的另一件事是我的 Vector2 类在我向向量添加元素时需要某种复制构造函数或其他东西，但最终它只有 2 个整数，所以我不知道为什么这可能会失败。

我对这段代码的了解太多了，可能会遗漏一些明显的东西。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T20:13:19.533

`clear`调用任何类型的空容器都很好。

使用我的通灵调试技能，我已经确定在代码中您没有向我们展示您正在访问`vector`实际不存在的元素（可能在您插入它们之前，也可能使用`operator[]`）。通常元素创建是通过`resize`、`push_back`或完成的`insert`。

另一种可能性是您的程序中某处有另一个内存损坏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-22T17:48:18.733

我发现了由于数据格式更改而导致的问题。我使用的 std::list 从指向列表的指针直接更改为列表。这开始导致检查列表大小没有解决的各种错误，并且是由清除列表的所有跟踪数据的 ZeroMemory()/memset() 调用引起的，因为它现在是类而不是指向列表的指针。

如果您有一个空列表并在崩溃时对其调用 .clear() ，那么您可能已经弄乱了 Mark 在他的回答中提到的内部跟踪内存。寻找一个你正在清理包含类等的内存的地方，这些都是最可能的罪魁祸首。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-29T17:36:04.343

我知道已经有 8 年了，但我也认为我在销毁一个空的 bst 时遇到了这个问题，我的代码在“new_allocator.h”的实现中向 __p 变量发送了一个 nullptr 值。正如文件本身所提到的，这个 __p 永远不能为空！

> // __p 不允许为空指针。

基本上，如果您没有要发送的东西，解决方案就是不发送任何东西。

# c# - 将 COM DLL 合并到 C# 中

> ID：15911360
> 
> 赞同：1
> 
> 时间：2013-04-09T19:58:28.390
> 
> 标签：c#, com, vb6, com-interop

我在将 COM DLL 合并到 C#.NET 程序中时遇到了一些问题。DLL 是由第三方提供给我的。它是在 VB6 中完成的。目前，这是我收到的错误。

> System.Runtime.InteropServices.COMException 未处理。HResult=-2147221164 消息=检索具有 CLSID {46F5C9EE-D750-4740-AFBD-682F1E097776} 的组件的 COM 类工厂失败，原因是以下错误：80040154 未注册类（HRESULT 异常：0x80040154 (REGDB_E_CLASSNOTREG)）。

当我尝试从 DLL 文件中的类之一创建新对象时，它会引发异常。

我尝试使用 regsvr32.exe 注册 DLL 并使用 tlbimp.exe 创建另一个 DLL（它有效但给了我大量警告）。每次我尝试调试我的程序时，我都会遇到某种异常。

我应该放弃并在 VB6 中执行此操作吗？我真的不想...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T23:27:53.420

好的，我解决了这个问题。COM DLL 允许我访问的第三方软件需要将 USB 加密狗插入计算机，否则它将只能在试用模式下运行。这禁止我访问 DLL 功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T02:55:18.383

您缺少第三方 VB6 DLL 所依赖的 DLL。这可能是另一个 VB6 DLL 或另一个第三方引用（或较低级别的 DLL，例如 VB 运行时）。

解决您的问题的最佳方法是询问第三方提供商需要哪些 DLL 作为依赖项。作为 VB6 开发人员，他们应该能够轻松地回答问题，而您必须运行诸如依赖遍历器之类的东西，这很容易导致您走错路。

# xcode - 将带有 C 函数的标头导入 Xcode 项目？

> ID：15911364
> 
> 赞同：0
> 
> 时间：2013-04-09T19:58:37.573
> 
> 标签：xcode

我有一个带有单个 C 样式函数的 .h 文件：

```
void myFunc(NSArray *array) {
    ...
} 
```

我希望这个功能在每个文件中都可用，所以我`#import "Functions.h"`进入了我的 App-Prefix.pch 文件。

但是，这给了我一个编译错误`ld: 38 duplicate symbols for architecture i386`。这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:01:11.297

你不应该在头文件中实现实际的 C 函数体，就像你不应该在头文件中实现 Objective-C 方法一样。

**我的函数**

```
 void myFunc(NSArray *array); 
```

**我的函数**

```
 void myFunc(NSArray *array) {
        ...
    } 
```

显然，您还应该`#ifndef`在标题顶部添加 a ，如果您决定不使用任何 Objective-C in `myfunc.m`，您也可以将其重命名为`myfunc.c`.

**更新：**
原因是头文件是从程序的多个入口点（多个文件）中收集的。然后你的编译器有点头晕，开始想知道你真正**想要**调用什么函数体（因为有多个）。一个更明显的例子是在一个 C 文件中两次声明相同的函数名。最后，您应该使用头文件来“描述”您的函数（添加文档和所有内容），然后使用您的主文件（.m）或 C 文件（.c）来指示编译器在调用该函数时要做什么.

# assembly - 是否有一个汇编程序可以让我“内联”机器代码？

> ID：15911371
> 
> 赞同：2
> 
> 时间：2013-04-09T19:59:38.363
> 
> 标签：assembly, machine-code

我在 Google 上做了很多工作，寻找一种可以将机器代码直接包含在程序集源文件中的方法。我没有运气。

我所说的“内联机器代码”的意思可能不清楚，所以让我为您提供一个我正在寻找的示例：

```
; here's my normal assembly code...
mov eax, 8
add eax, 10
; now I would like to be able to add some machine code
__machinecode__("40") ; this is equivalent to 'inc eax' (I think!) 
```

就是这样了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T20:00:46.950

我所知道的所有汇编程序都有这样的功能。

```
mov eax, 8
db 90h ; this is "nop"
add eax, 10 
```

# c# - 如何使用 Oracle 和 .Net 客户端实现密码更改功能？

> ID：15911374
> 
> 赞同：2
> 
> 时间：2013-04-09T19:59:57.317
> 
> 标签：c#, .net, oracle

我正在使用 Oracle 用户来验证 .Net 应用程序的用户名和密码。现在我正在研究密码更改功能。数据库具有自定义密码验证，因此如果您尝试更改用户密码并提供无效密码，Oracle 会返回多个错误。

第一个错误总是“ORA-28003：指定密码的密码验证失败”，然后每次验证失败都会引发一个错误。当我尝试从 Toad 客户端更改用户密码时，这会正确显示。

但是，当我从我的应用程序执行此操作时，引发的 OracleException 仅返回第一个错误，因此我无法向用户显示他提供的新密码无效，这是应用程序的要求。那么我应该如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:11:35.637

为什么不将逻辑包装在存储过程中？它会调用 Oracle 密码验证函数，然后您根据需要解析结果，并将您想要的任何消息返回给 .net 客户端？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-11T20:50:58.577

对于初学者，不要使用 OpenWithNewPassword 方法。它不仅知道各种版本的 ODP.net 和 DB 存在问题，而且当您只需要一个时，它会迫使您拥有两个不同的代码分支 - 如果用户的密码已经过期，IIRC 它就不起作用。

相反，基本逻辑是这样工作的：

*   确保您可以使用用户的旧帐户和密码进行身份验证

*   如果成功，请关闭该连接并打开一个单独的帐户，该帐户除了 exec privs 之外没有对 ChangePassword 存储过程的访问权限。

这是代码：

```
protected void BtnChangePassword_Click(object sender, EventArgs e)
{
  String connectionStringFormat = "Data Source={0};User Id={1};Password={2};pooling=false;";
  if (Page.IsValid)
  {
    Boolean hasHasError = false;
    String connectionString = String.Format(
      connectionStringFormat,
      IptDatabase.Text,
      IptUserName.Text,
      IptOldPassword.Text);
    OracleCommand cmd = new OracleCommand();
    using (cmd.Connection = new OracleConnection(connectionString))
    {
      try
      {
        cmd.Connection.Open();
      }
      catch (OracleException ex)
      {
        //allow to continue if the password is simply expired, otherwise just show the message
        if (ex.Number != 28001)
        {
          ShowErrorMessage(ex.Message);
          hasHasError = true;
        }
      }

      if (!hasHasError)
      {
        //successful authentication, open as password change account
        cmd.Connection.Close();
        cmd.Connection.ConnectionString = ConfigurationManager.ConnectionStrings[IptDatabase.Text].ConnectionString;
        cmd.Connection.Open();
        cmd.CommandText = "SysChangePassword";
        cmd.CommandType = CommandType.StoredProcedure;
        cmd.Parameters.Add("username", IptUserName.Text);
        cmd.Parameters.Add("newpassword", IptPassword.Text);
        try
        {
          cmd.ExecuteNonQuery();
          ShowInfoMessage("Password Changed");
        }
        catch (OracleException ex)
        {
          ShowErrorMessage(ex.Message);
        }

      }
    }
  } 
```

在它最简单的形式中，proc 执行 'alter user 标识并类似于此处记录的用户：http: [//www.adp-gmbh.ch/ora/plsql/change_password.html](http://www.adp-gmbh.ch/ora/plsql/change_password.html)。但是 dbms_output 行对您没有多大好处，因此您可以抛出自定义异常：

```
create or replace procedure SysChangePassword(
  pUserName in varchar2, 
  pPassWord in Varchar2) as
begin
  -- Check for system users here and reject
  if upper(pUserName) in ('SYS','SYSTEM') then
            raise_application_error(-20012, 'not allowed');
  else
     execute immediate 'alter user '||pUserName||' identified by ' ||
           pPassWord;
  end if;
  exception --this isn't necessary if you'd rather examine and handle the specific exceptions on the .net side
     when others then
        raise_application_error(-20012, sqlerrm);
end;
/ 
```

拥有此过程的模式需要“更改任何用户”权限。为安全起见，您的应用程序应作为一个单独的用户连接，该用户仅在此 proc 上具有执行权限。相当

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T14:47:51.833

如果为 ASP.NET 编写代码，为什么不使用正则表达式验证器控件，如果编写桌面应用程序，为什么不使用 Regex.IsMatch(...) 函数？为什么你必须先去服务器才能得到生成的错误。你有强大的密码策略，你可以限制客户端的用户。

# ruby-on-rails - 在 rspec 的控制器测试中使用 rails 的“post”，并在路由上使用范围和协议

> ID：15911375
> 
> 赞同：3
> 
> 时间：2013-04-09T19:59:58.150
> 
> 标签：ruby-on-rails, ruby, rspec, jruby, rspec-rails

我有一个 rails 项目在生产中用完了基本 url 的子目录，我希望它在 dev 中以这种方式运行，以使 dev 和 prod 尽可能接近。我的路由文件设置如下：

```
Foo::Application.routes.draw do
    def draw_routes
        root :to=>'foo#home'
        resources :cats, :only=>[:create] do
    end
    if Rails.env.production?
        scope :protocol=>'http://' do
            draw_routes
        end
    else
        scope :path=>"/foo", :protocol=>'http://' do
            draw_routes
        end
    end
end 
```

我的 CatsController 是这样的：

```
class CatsController < ApplicationController
    def create
        @cat = Cat.new(:name=>"Bob")
        if @cat.save()
            redirect_to root
        end
    end
end 
```

我想测试我的 Create Cat 方法，所以我在 spec/controllers/cats_controller_spec.rb 中设置了一个 rspec 测试：

```
require 'spec_helper'
describe CatsController do
    describe "calling create cat with good data" do
        it "should add a cat" do
            expect {post(:action=>:create)}.to change(Cat, :count).by(1)
        end
    end 
end 
```

但是，当我运行测试时，我得到

```
Failure/Error: post :create
     ActionController::RoutingError:
       No route matches {:controller=>"cats", :action=>"create"}
     # ./spec/controllers/cats_controller_spec.rb:5:in `(root)' 
```

耙路线说我的路线在那里！这里的引擎盖下发生了什么，为什么会失败？

```
Rake Routes:
    cats POST   /foo/cats(.:format)            cats#create {:protocol=>"http://"} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:41:00.250

问题是 的值`:protocol`有点不稳定。

我认为解决此问题的更好方法是将范围中的协议设置为`http`而不是`http://`. 但是，如果您确实需要使用一些时髦的协议来测试您的控制器，您应该能够：

```
post(:action => :create, :protocol => 'funky') 
```

或者你的协议可能是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-06T08:23:45.400

对于 rspec 3，这对我有用。

```
post :action, protocol: 'https://' 
```

# java - javax.servlet.ServletException：从“viralpatel.net”运行示例时出现 Servlet.init() 异常

> ID：15911380
> 
> 赞同：0
> 
> 时间：2013-04-09T20:00:08.030
> 
> 标签：java, spring, hibernate, maven, tomcat

尝试运行以下[spring3-mvc-hibernate-maven-tutorial-eclipse-example](http://viralpatel.net/blogs/spring3-mvc-hibernate-maven-tutorial-eclipse-example/)时出现错误：

```
HTTP Status 500 - Servlet.init() for servlet fitTrackerServlet threw exception

--------------------------------------------------------------------------------

type Exception report
    message Servlet.init() for servlet fitTrackerServlet threw exception

description The server encountered an internal error that prevented it from fulfilling this request.

exception 

javax.servlet.ServletException: Servlet.init() for servlet fitTrackerServlet threw exception
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722)

root cause 

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mvcContentNegotiationManager': Initialization of bean failed; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.config.internalTransactionAdvisor': Cannot create inner bean '(inner bean)' of type [org.springframework.transaction.interceptor.TransactionInterceptor] while setting bean property 'transactionInterceptor'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/config/servlet-config.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/config/servlet-config.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Implementing class
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:532)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:589)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:647)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:598)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:661)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:517)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:458)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:138)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722)

root cause 

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.transaction.config.internalTransactionAdvisor': Cannot create inner bean '(inner bean)' of type [org.springframework.transaction.interceptor.TransactionInterceptor] while setting bean property 'transactionInterceptor'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/config/servlet-config.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/config/servlet-config.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Implementing class
    org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:282)
    org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:126)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1391)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1132)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:522)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198)
    org.springframework.aop.framework.autoproxy.BeanFactoryAdvisorRetrievalHelper.findAdvisorBeans(BeanFactoryAdvisorRetrievalHelper.java:86)
    org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findCandidateAdvisors(AbstractAdvisorAutoProxyCreator.java:100)
    org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findEligibleAdvisors(AbstractAdvisorAutoProxyCreator.java:86)
    org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.getAdvicesAndAdvisorsForBean(AbstractAdvisorAutoProxyCreator.java:68)
    org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:356)
    org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:319)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:412)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1492)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:589)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:647)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:598)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:661)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:517)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:458)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:138)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722)

root cause 

org.springframework.beans.factory.BeanCreationException: Error creating bean with name '(inner bean)': Cannot resolve reference to bean 'transactionManager' while setting bean property 'transactionManager'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/config/servlet-config.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/config/servlet-config.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Implementing class
    org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:329)
    org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:107)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1391)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1132)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:522)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:271)
    org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:126)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1391)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1132)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:522)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198)
    org.springframework.aop.framework.autoproxy.BeanFactoryAdvisorRetrievalHelper.findAdvisorBeans(BeanFactoryAdvisorRetrievalHelper.java:86)
    org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findCandidateAdvisors(AbstractAdvisorAutoProxyCreator.java:100)
    org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findEligibleAdvisors(AbstractAdvisorAutoProxyCreator.java:86)
    org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.getAdvicesAndAdvisorsForBean(AbstractAdvisorAutoProxyCreator.java:68)
    org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:356)
    org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:319)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:412)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1492)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:589)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:647)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:598)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:661)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:517)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:458)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:138)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722)

root cause 

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionManager' defined in ServletContext resource [/WEB-INF/config/servlet-config.xml]: Cannot resolve reference to bean 'sessionFactory' while setting bean property 'sessionFactory'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/config/servlet-config.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Implementing class
    org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:329)
    org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:107)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1391)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1132)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:522)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveReference(BeanDefinitionValueResolver.java:323)
    org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:107)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1391)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1132)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:522)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveInnerBean(BeanDefinitionValueResolver.java:271)
    org.springframework.beans.factory.support.BeanDefinitionValueResolver.resolveValueIfNecessary(BeanDefinitionValueResolver.java:126)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyPropertyValues(AbstractAutowireCapableBeanFactory.java:1391)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1132)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:522)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:198)
    org.springframework.aop.framework.autoproxy.BeanFactoryAdvisorRetrievalHelper.findAdvisorBeans(BeanFactoryAdvisorRetrievalHelper.java:86)
    org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findCandidateAdvisors(AbstractAdvisorAutoProxyCreator.java:100)
    org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.findEligibleAdvisors(AbstractAdvisorAutoProxyCreator.java:86)
    org.springframework.aop.framework.autoproxy.AbstractAdvisorAutoProxyCreator.getAdvicesAndAdvisorsForBean(AbstractAdvisorAutoProxyCreator.java:68)
    org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.wrapIfNecessary(AbstractAutoProxyCreator.java:356)
    org.springframework.aop.framework.autoproxy.AbstractAutoProxyCreator.postProcessAfterInitialization(AbstractAutoProxyCreator.java:319)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsAfterInitialization(AbstractAutowireCapableBeanFactory.java:412)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1492)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223)
    org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:292)
    org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:194)
    org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:589)
    org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:932)
    org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:479)
    org.springframework.web.servlet.FrameworkServlet.configureAndRefreshWebApplicationContext(FrameworkServlet.java:647)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:598)
    org.springframework.web.servlet.FrameworkServlet.createWebApplicationContext(FrameworkServlet.java:661)
    org.springframework.web.servlet.FrameworkServlet.initWebApplicationContext(FrameworkServlet.java:517)
    org.springframework.web.servlet.FrameworkServlet.initServletBean(FrameworkServlet.java:458)
    org.springframework.web.servlet.HttpServletBean.init(HttpServletBean.java:138)
    javax.servlet.GenericServlet.init(GenericServlet.java:160)
    org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:936)
    org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1004)
    org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:589)
    org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    java.lang.Thread.run(Thread.java:722)

root cause 

org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in ServletContext resource [/WEB-INF/config/servlet-config.xml]: Invocation of init method failed; nested exception is java.lang.IncompatibleClassChangeError: Implementing class
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1486)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:524)
    org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:461)
    org.springframework.beans.factory.support.AbstractBeanFactory$1.getObject(AbstractBeanFactory.java:295)
    org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:223) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:08:29.550

您在部署中的某处混合了库版本，如下所示：

```
IncompatibleClassChangeError 
```

任何进一步的诊断都需要您未提供的信息，例如您正在部署的信息。

我建议使用传递依赖工具——考虑 Maven、Gradle、Ivy 等。

# php - 在 PHP 上 foreach 的每次迭代中将元素存储在数组中

> ID：15911382
> 
> 赞同：0
> 
> 时间：2013-04-09T20:00:12.490
> 
> 标签：php, html, arrays, foreach

我有一个 foreach 来检查我的 php 站点中的会话数，并为每个会话从数据库中获取项目的名称。

我想将名称按顺序存储在变量中，以便之后可以使用它们，因此我不必再次调用数据库。

这是foreach：

```
foreach ($_SESSION['cart'] as $item) 
{ 
    $pid = $item['itemId'];
    $q = $item['qty'];
    $query2 = $con -> prepare("SELECT * FROM item_descr WHERE id_item = :idItem");
    $query2-> bindValue (':idItem',$pid);
    $query2->execute();
    $row2 = $query2->fetch(PDO::FETCH_ASSOC);
} 
```

假设有 3 个会话，我怎样才能将 $row2['name'] 保存在以后可以使用的不同变量中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:02:53.820

在`foreach`定义一个数组来存储结果之前：

```
$mySessions = array(); 
```

然后在该`$row2 = ....`行之后：

```
$mySessions[] = $row2; 
```

然后您将填充数组，以便您可以在循环完成后使用它。

# php - 如何在 Laravel 中制作带有步骤的表单？

> ID：15911395
> 
> 赞同：2
> 
> 时间：2013-04-09T20:00:45.650
> 
> 标签：php, forms, session, laravel

我正在尝试使用 Laravel 创建一个“逐步”表单。我遇到的麻烦是如何让用户“返回”并编辑先前提交的表单部分。

我正在做常规验证工作，这是表单字段的示例：

`{{ Form::text('title', Input::old('title') }}`

然后，如果该特定步骤的表单通过验证，它将作为数组保存在会话中，并且用户将被带到表单的下一部分。

我想要的是每个步骤上都有一个“返回”按钮，他们可以返回到上一步进行更改。问题是我有`Input::old()`输入的 value 参数。

我可以做的一件事是分配一个像“current”这样的变量并将其设置为该特定步骤的会话，因此我的输入语法如下所示：

`{{ Form::text('title', (!empty($current)) ? $current['title'] : Input::old('title')) }}`

有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-10T12:17:38.347

ShawnMcCool 的 Form Base Model 提供了一个很好的机制来处理输入值而不需要丑陋的三元组，并且还支持多页表单。我不会在这里列出任何代码，而是建议您通读捆绑包的示例：

[https://github.com/ShawnMcCool/laravel-form-b​​ase-model#examples](https://github.com/ShawnMcCool/laravel-form-base-model#examples)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T09:28:34.800

我可能有一个多维数组，其中每个页面的输入存储在页码下。

```
$saved = Session::get('inputtedstuff');
$current = $saved['page1']; 
```

然后，无论您在哪个页面上，都可以获取该页面以前的答案（如果有）。最后，您可以将所有答案放在一起，并将它们映射到一个平面数组以供进一步使用。

根据表单的复杂性，我还会考虑在一个页面中完成所有表单并使用 javascript 来显示每个部分。只是一个想法。

# excel - 格式化excel单元格

> ID：15911397
> 
> 赞同：0
> 
> 时间：2013-04-09T20:00:53.203
> 
> 标签：excel, formatting

我有麻烦了。我有成千上万的客户数据，包括姓名、地址、邮编。我在excel中有数据，问题出在邮政编码中。Zip 应该是 5 个字符长，如果不是，我们必须在前面添加零以等于 5 个字符。由于有成千上万的数据，并且无法逐个更改，有人可以建议我格式化 zip 的列，使其长度为 5 个字符。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:04:09.390

您可以使用自定义格式并使用类型：00000

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T20:18:05.303

在该 zip 列前面写下以下公式：

```
=IF(LEN(A1)>5,"Invalid",RIGHT("00000" & A1,5)) 
```

只需将单元格引用名称 A1 替换为邮政编码列的第一个单元格，然后向下拖动该单元格。现在，所有少于五个字符的邮政编码都将用前导零填充。它还将在邮政编码长度超过 5 个字符的单元格中显示无效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T21:08:51.823

将此公式应用于单元格值，即`A1`在此示例中：

```
=TEXT(A1,"0000#") 
```

如果您在特定列中需要格式化值（作为文本），请将其复制/粘贴到所需列中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T20:04:03.373

只需标记整个列。
比右键单击进入“格式单元格”设置。
在那里你去“特殊格式”，在那里你应该标记“ZipCode”。
[这](http://www.pic-upload.de/view-18887739/Unbenannt.png.html)是选项的图片。它是德文的，所以我希望你能找到它；）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-09T20:22:21.160

快速宏将范围转换为文本格式，如果单元格少于 5 个字符，则附加前导零。

```
Sub AddLeadingZeros()
Dim rng As Range: Set rng = Range("A1:A10") '<modify as needed, the cells containing ZIP'
Dim cl As Range

rng.NumberFormat = "@"
For Each cl In rng

    If Len(cl.Value) < 5 Then
        Do

            cl.Value = "0" & cl.Value

        Loop While Len(cl.Value) < 5
    End If

Next
End Sub 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-10-15T09:42:41.260

1.  选择你的专栏
2.  格式-> 单元格
3.  特殊格式-> 邮政编码

确保保存更改...它不应该删除零...

或尝试“用户定义”格式......但我从未尝试过。

# .htaccess - 用于保护管理目录的尾部斜杠 htaccess

> ID：15911398
> 
> 赞同：1
> 
> 时间：2013-04-09T20:01:02.930
> 
> 标签：.htaccess, mod-rewrite, redirect, trailing-slash

我打电话给 domain.net/about-us 来 domain.net/about-us/ （添加斜杠）正确的页面！

我打电话给 domain.net/admin 或 domain.net/admin/ ，错误是 404

当我添加这一行评论时

```
#RewriteRule .*[^/]$ $0/ [L,R=301] 
```

上来并要求输入密码管理文件夹。

但我打电话给 domain.net/about-us （不要尾随斜杠）来 404

等待您的帮助，谢谢。

穆拉特

我的根 htaccess 文件：

```
...
RewriteEngine ON
RewriteBase /

RewriteRule ^index.php$ - [L]

#add trailing slash
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule .*[^/]$ $0/ [L,R=301]
...
RewriteRule ^about-us/$ index.php?p=cont&sef=about-us [L,NC]
... 
```

管理文件夹（保护）htaccess 文件：

```
AuthName "admin"
AuthUserFile "/home/xxxxxxx/.htpasswds/public_html/admin/passwd"
AuthType Basic
require valid-user 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:01:08.223

请对这些配置指令进行测试：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([a-z0-9-_]+)$ /$1/ [R]

RewriteRule ^about-us/$ /index.php?p=cont&sef=about-us [L,NC]

# try to add this rule
RewriteRule ^([a-z0-9-_]+)/([a-z0-9-_]+)$ /$1/$2/ [R] 
```

# javascript - 禁止循环函数

> ID：15911404
> 
> 赞同：0
> 
> 时间：2013-04-09T20:01:18.250
> 
> 标签：javascript

函数 onSuccess 无限期地运行，因为不断地询问 GPS 接收器的坐标。它包含一个函数 createMap，只执行一次。这是如何实现的？使函数外的函数也不能，因为它是作为函数变量的参数值传递的。

```
watchID = navigator.geolocation.watchPosition(function(position) {onSuccess(position, arrMyLatLng);}, onError, options);  

function onSuccess(position, arrMyLatLng) 
{

var latitude , longitude ;     
latitude = position.coords.latitude ;
longitude = position.coords.longitude;
var myLatLng = new google.maps.LatLng(latitude, longitude);

createMap(myLatLng, arrMyLatLng);// This feature will run for an indefinite number of times. It is only necessary once. 
map.panTo(myLatLng) ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:06:15.093

只运行一次的函数：

```
function runOnce() {
    if (runOnce.done) {
         return;
    } else {
       // do my code ...

       runOnce.done = true;
    }
} 
```

因为函数在 JavaScript 中是对象，所以你可以在它上面设置一个属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:06:39.423

您可以使用闭包创建具有私有状态的函数：

```
onSuccess = (function() {
    var created = false;
    return function (position, arrMyLatLng) {
        var latitude , longitude ;     
        latitude = position.coords.latitude ;
        longitude = position.coords.longitude;
        var myLatLng = new google.maps.LatLng(latitude, longitude);
        if (!created) {
            createMap(myLatLng, arrMyLatLng);
            created = true;
        }
        map.panTo(myLatLng) ;
    };
}()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:06:24.493

假设`createMap`返回一个地图

```
var map = null;

function onSuccess(position, arrMyLatLng) {
    var latitude = position.coords.latitude ;
    var longitude = position.coords.longitude;
    var myLatLng = new google.maps.LatLng(latitude, longitude);

    map = map || createMap(myLatLng, arrMyLatLng);
    map.panTo(myLatLng);
} 
```

`createMap`只有在`map`评估为“false”（即 is `null`）时才会运行，因此 createMap 只运行一次。

# point-cloud-library - 将 pcl 库与 ROS 链接

> ID：15911411
> 
> 赞同：0
> 
> 时间：2013-04-09T20:01:37.517
> 
> 标签：point-cloud-library

在 pcd_register.cpp

我有代码，

```
#include <ros/ros.h>
#include <pcl/io/pcd_io.h>
#include <pcl/point_types.h>
#include <terminal_tools/print.h>
#include <terminal_tools/parse.h>
#include <terminal_tools/time.h>
#include <pcl/registration/icp.h>
#include <pcl/registration/icp_nl.h>
#include <pcl/registration/gicp.h>
#include <pcl/registration/transforms.h>

#include <pcl/filters/voxel_grid.h> // TEMP: currently used instead of octomap

#include "pcl/registration/types.h"

using namespace pcl::registration;

int main (int argc, char** argv) {

  ros::init (argc, argv, "pcd_register");
  ros::Time::init();

  terminal_tools::TicToc tictoc;

  // Downsampling
  bool downsampling_enabled = true;
  double downsampling_leaf_size = 0.001;
  terminal_tools::parse_argument(argc, argv, "-d", downsampling_enabled);
  terminal_tools::parse_argument(argc, argv, "-D", downsampling_leaf_size);

  // read point clouds
  vector<PointCloud> data;
  std::string extension (".pcd");
  for (int i = 1; i < argc; i++)
  {
    string fname = string (argv[i]);
    if (fname.size () <= extension.size ())
      continue;
    transform (fname.begin (), fname.end (), fname.begin (), (int(*)(int))tolower);
    if (fname.compare (fname.size () - extension.size (), extension.size (), extension) == 0)
    {
      PointCloud cloud;
      pcl::io::loadPCDFile (argv[i], cloud);
      if (cloud.points.size() == 0) continue;
      data.push_back(cloud);
      terminal_tools::print_highlight("Read point cloud from "); terminal_tools::print_value("%s", argv[i]); terminal_tools::print_info(" containing "); terminal_tools::print_value("%d", cloud.points.size()); terminal_tools::print_info(" points.\n");
    }
  }

  if (data.empty ())
  {
    ROS_ERROR ("Syntax is: %s <source.pcd> <target.pcd> [*]", argv[0]);
    ROS_ERROR ("[*] - multiple files can be added. The registration results of (i, i+1) will be registered against (i+2), etc");
    ROS_INFO ("Example: %s `rospack find pcl`/test/bun0.pcd `rospack find pcl`/test/bun4.pcd", argv[0]);
    return (-1);
  }
  terminal_tools::print_highlight(" Loaded "); terminal_tools::print_value("%d ", (int)data.size ()); terminal_tools::print_info("datasets.\n");

  pcl::GeneralizedIterativeClosestPoint<pcl::registration::Point, pcl::registration::Point> reg;
  PointCloud cloud_input, cloud_output, cloud_model;

  char filename[255];
  unsigned int number_clouds_processed = 0;
  for (unsigned int i = 0; i < data.size(); ++i) {

    // some filtering or whatever here ...
    if (downsampling_enabled) {
      pcl::VoxelGrid<Point> sor;
      sor.setInputCloud(boost::make_shared<PointCloud>(data[i]));
      sor.setLeafSize(downsampling_leaf_size, downsampling_leaf_size, downsampling_leaf_size);
      sor.filter(cloud_input);
    }
    else
      cloud_input = data[i];

    // write input files
    sprintf(filename, "registration_input_%04d.pcd", number_clouds_processed);
    pcl::io::savePCDFileBinary(filename, cloud_input);

    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////
    if (number_clouds_processed == 0) { // no registration needed
      cloud_output = cloud_input;
      cloud_model = cloud_input;
      terminal_tools::print_highlight("Adding first scan to model.\n");
      // TODO: simply use first point cloud to update/initialize world mode, get cloud_model for next registration from world model
    }
    else {
      //terminal_tools::print_highlight("Registering scan %04d (%d points) against model (%d points)", number_clouds_processed, cloud_input.points.size(), cloud_model.size());
      terminal_tools::print_highlight("Registering scan "); terminal_tools::print_value("%04d ", number_clouds_processed); 
      terminal_tools::print_info("("); terminal_tools::print_value("%d", cloud_input.points.size()); terminal_tools::print_info(" points) against model ("); terminal_tools::print_value("%d ", cloud_model.size()); terminal_tools::print_info("points)"); 
      tictoc.tic();

      reg.setInputCloud(boost::make_shared<const PointCloud>(cloud_input));
      reg.setInputTarget(boost::make_shared<const PointCloud>(cloud_model));

      reg.setMaximumIterations(2);  // only one iteration, gicp implementation has inner iterations in optimization
      reg.align(cloud_output);      // cloud_output = registered point cloud

      terminal_tools::print_info("[done, "); terminal_tools::print_value("%g", tictoc.toc()); terminal_tools::print_info("s]\n"); 

      // setting up new model
      //cloud_model_normals += cloud_output; // TEMP
      double model_subsampling_leaf_size = downsampling_leaf_size; // TEMP
      PointCloud cloud_temp; // TEMP
      cloud_model += cloud_output; // TEMP
      pcl::VoxelGrid<Point> grid; // TEMP
      grid.setInputCloud(boost::make_shared<PointCloud>(cloud_model)); // TEMP
      grid.setLeafSize(model_subsampling_leaf_size, model_subsampling_leaf_size, model_subsampling_leaf_size); // TEMP
      grid.filter(cloud_temp); // TEMP
      cloud_model = cloud_temp; // TEMP
      // TODO: use cloud_output to udpate world model, get cloud_model from world model
    }
    ///////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////

    // write output files
    sprintf(filename, "registration_output_%04d.pcd", number_clouds_processed);
    pcl::io::savePCDFileBinary(filename, cloud_output);

    ++number_clouds_processed;
  }

  pcl::io::savePCDFileBinary("registration_final_model.pcd", cloud_model);

  return 0;
} 
```

但是当我编译它不知道所有的 terminal_tools 头文件。但我已经下载了ROS。

我是否必须在 CMakeLists.txt 上指定或其他内容？这是我的cmake

```
cmake_minimum_required(VERSION 2.8 FATAL_ERROR)

project(pcd_register)

find_package(PCL 1.2 REQUIRED)

include_directories(${PCL_INCLUDE_DIRS})
link_directories(${PCL_LIBRARY_DIRS})
add_definitions(${PCL_DEFINITIONS})

add_executable (pcd_register pcd_register.cpp)
target_link_libraries (pcd_register ${PCL_LIBRARIES}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-24T02:11:07.737

我有一个使用 PCL 库运行类似节点的 ROS，并且您的 CMakeLists.txt 在 PCL 方面看起来不错。如果 cmake 没有找到终端工具标头，那是因为您没有指定在 cmake 中添加这些包含目录。一般来说，如果您知道如何使用 g++ myprogram.cpp -I${INCLUDE_DIRS} -L${LIB_DIRS} -l${LIBS} 进行编译，则需要在 CMakeLists 中添加以下行：

包含目录（${INCLUDE_DIRS}）

链接目录（${LIB_DIRS}）

目标链接库（pcd_register ${LIBS}）。

在您的情况下，您需要使用 include_directories 行指定 terminal_tools 的包含目录。

# javascript - 让 Javascript 注意到鼠标悬停的目标已经改变

> ID：15911420
> 
> 赞同：0
> 
> 时间：2013-04-09T20:02:20.287
> 
> 标签：javascript, dom, javascript-events

在改编自[Call php function from javascript](https://stackoverflow.com/questions/7165395/call-php-function-from-javascript)的代码中，每当我将鼠标悬停在链接上时，我想进行 Ajax 调用以运行 PHP 脚本，并传入一个 cookie，以便 PHP 脚本可以使用标识符在 MySQL 中查找内容。它正在工作，我第一次运行该页面。但是，在那之后，无论我将鼠标放在哪个链接上，它都认为事件的目标是第一个链接。

```
<ul>
 <li><a href="mypage.html?eventID=1" class="1">Event 1</a></li>
 <li><a href="mypage.html?eventID=2" class="2">Event 2</a></li>
 <li><a href="mypage.html?eventID=3" class="3">Event 3</a></li>
</ul>
<div id="modalMask">
    <div id="modalContent">
        Loading...
    </div>
</div>
<script src="ajaxRequest.js" type="text/javascript"></script>
<span id="output"></span> 
```

使用链接的功能在这里：

```
function getOutput() 
{
  if (typeof e == 'undefined') e = window.event //we always do this in event handler, to make IE work
  var target = e.target || e.srcElement; //Another IE hack, so we can get the element the event relates to
  var ID = target.className;

  document.getElementById('output').innerHTML = ID; 
  var ajax = getRequest();
  ajax.onreadystatechange = function(){
      if(ajax.readyState == 4){
        document.getElementById('modalContent').innerHTML = 
             ajax.responseText + '<br><input type="button" onclick = "closeModalPopupWindow()" id="closeModal" value="Close">';
      }
  }
  ajax.open("GET", "do_query.php?eventID="+ID, true);
  ajax.send(null);
} 
```

这在 jsFiddle 上进行了演示：http: [//jsfiddle.net/briggs_w/BWbuX/1/](http://jsfiddle.net/briggs_w/BWbuX/1/)。Ajax 调用已被注释掉，但我放入了一个片段

```
 var ID = target.className;  
  document.getElementById('output').innerHTML = ID; 
```

这样我就可以看到链接的类名。控制台调试器验证：它总是在页面加载后我首先将鼠标悬停在哪个链接上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T23:01:11.600

好吧，似乎主要问题出在您的 CSS 上。当触发鼠标悬停事件时，将显示 modalMask 元素。然而，问题是您将它放在其他所有内容之上：

```
position: absolute;
...
width: 100%;
height: 100%;
...
z-index: 1000; 
```

这意味着您有一个不可见的层阻止了对链接的访问，这就是为什么在第一个事件之后没有反应的原因。

在进行故障排除时，我在以下位置为您清理了代码：http: [//jsfiddle.net/Z4ZGZ/18/](http://jsfiddle.net/Z4ZGZ/18/)

“关闭”按钮在小提琴中不起作用，但是当我在正文元素的底部包含脚本文件时，它在本地对我有用。

# android - 实施录像机，使应用程序崩溃

> ID：15911421
> 
> 赞同：0
> 
> 时间：2013-04-09T20:02:25.833
> 
> 标签：android, android-logcat

我正在将谷歌的录像机示例实现到我的应用程序中，代码如下所示

```
 MediaRecorder recorder;
    Camera mCamera;
    SurfaceHolder holder;
    boolean isRecording = false;
    String TAG = "Evolution Camera";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        requestWindowFeature(Window.FEATURE_NO_TITLE);
        getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
                WindowManager.LayoutParams.FLAG_FULLSCREEN);
        setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);

        setContentView(R.layout.camera_view);
        SurfaceView cameraView = (SurfaceView) findViewById(R.id.camera_preview);

         // Add a listener to the Capture button
         ImageButton captureButton = (ImageButton) findViewById(R.id.btn_capture);
         captureButton.setOnClickListener(
             new View.OnClickListener() {
                 @Override
                 public void onClick(View v) {
                     if (isRecording) {
                         // stop recording and release camera
                         recorder.stop();  // stop the recording
                         releaseMediaRecorder(); // release the MediaRecorder object
                         mCamera.lock();         // take camera access back from MediaRecorder

                         // inform the user that recording has stopped
                      //   setCaptureButtonText("Capture");
                         isRecording = false;
                     } else {
                         // initialize video camera
                         if (prepareVideoRecorder()) {
                             // Camera is available and unlocked, MediaRecorder is prepared,
                             // now you can start recording
                             recorder.start();

                             // inform the user that recording has started
                        //     setCaptureButtonText("Stop");
                             isRecording = true;
                         } else {
                             // prepare didn't work, release the camera
                             releaseMediaRecorder();
                             // inform user
                         }
                     }
                 }
             });

         Log.d(TAG, "Setting holders");

        holder = cameraView.getHolder();
        holder.addCallback(this);
        Log.d(TAG, "Start preparing video recorder");
        prepareVideoRecorder();
    }

    private boolean prepareVideoRecorder(){

       // mCamera = getCameraInstance();
        mCamera = Camera.open();
        recorder = new MediaRecorder();

        // Step 1: Unlock and set camera to MediaRecorder
        mCamera.unlock();
        recorder.setCamera(mCamera);

        // Step 2: Set sources
        recorder.setAudioSource(MediaRecorder.AudioSource.CAMCORDER);
        recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

        // Step 3: Set a CamcorderProfile (requires API Level 8 or higher)
        recorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));

        // Step 4: Set output file
        recorder.setOutputFile("/sdcard/videocapture_example.mp4");

        // Step 5: Set the preview output
        recorder.setPreviewDisplay(holder.getSurface());

        // Step 6: Prepare configured MediaRecorder
        try {
            recorder.prepare();
        } catch (IllegalStateException e) {
            Log.d(TAG, "IllegalStateException preparing MediaRecorder: " + e.getMessage());
            releaseMediaRecorder();
            return false;
        } catch (IOException e) {
            Log.d(TAG, "IOException preparing MediaRecorder: " + e.getMessage());
            releaseMediaRecorder();
            return false;
        }
        return true;
    }

    public static Camera getCameraInstance(){
        Camera c = null;
        int cnum = 0;
        int mCamSelect = 0;
        Camera.CameraInfo caminfo = new CameraInfo();
        try {
            cnum = Camera.getNumberOfCameras();
            Log.d("getCameraInstance", String.valueOf(cnum));
            for(int i = 0;i<cnum;i++){
                Camera.getCameraInfo(i, caminfo);
                if(caminfo.facing == CameraInfo.CAMERA_FACING_FRONT){
                    mCamSelect = i;
                    break;
                }
            }
            c = Camera.open(mCamSelect); // attempt to get a Camera instance
        }
        catch (Exception e){
            Log.d("getCameraInstance", "FATAL camera could not be opened");
            // Camera is not available (in use or does not exist)
        }
        if(c==null)Log.d("getCameraInstance", "no camera returned");
        return c; // returns null if camera is unavailable
    }

    @Override
    protected void onPause() {
        super.onPause();
        releaseMediaRecorder();       // if you are using MediaRecorder, release it first
        releaseCamera();              // release the camera immediately on pause event
    }

    private void releaseMediaRecorder(){
        if (recorder != null) {
            recorder.reset();   // clear recorder configuration
            recorder.release(); // release the recorder object
            recorder = null;
            mCamera.lock();           // lock camera for later use
        }
    }

    private void releaseCamera(){
        if (mCamera != null){
            mCamera.release();        // release the camera for other applications
            mCamera = null;
        }
    }

    public void surfaceCreated(SurfaceHolder holder) {
        prepareVideoRecorder();
    }

    public void surfaceChanged(SurfaceHolder holder, int format, int width,
            int height) {
    }

    public void surfaceDestroyed(SurfaceHolder holder) {
        if (isRecording) {
            recorder.stop();
            isRecording = false;
        }
        recorder.release();
        finish();
    } 
```

但是当我打开活动时，我会用这个日志强制关闭

```
 04-09 21:58:57.357: D/dalvikvm(2539): GC_EXPLICIT freed 682K, 14% free 39798K/46128K, paused 10ms+6ms, total 49ms
04-09 21:58:57.740: D/Evolution Launcher(2539): Pausing
04-09 21:58:57.802: D/Evolution Camera(2539): Setting holders
04-09 21:58:57.802: D/Evolution Camera(2539): Start preparing video recorder
04-09 21:58:58.068: E/MediaRecorderJNI(2539): Application lost the surface
04-09 21:58:58.068: D/Evolution Camera(2539): IOException preparing MediaRecorder: invalid preview surface
04-09 21:58:58.201: D/AndroidRuntime(2539): Shutting down VM
04-09 21:58:58.201: W/dalvikvm(2539): threadid=1: thread exiting with uncaught exception (group=0x41356930)
04-09 21:58:58.232: E/AndroidRuntime(2539): FATAL EXCEPTION: main
04-09 21:58:58.232: E/AndroidRuntime(2539): java.lang.RuntimeException: Fail to connect to camera service
04-09 21:58:58.232: E/AndroidRuntime(2539):     at android.hardware.Camera.native_setup(Native Method)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at android.hardware.Camera.<init>(Camera.java:340)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at android.hardware.Camera.open(Camera.java:317)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at com.doublep.evolution.EvoCamera.prepareVideoRecorder(EvoCamera.java:87)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at com.doublep.evolution.EvoCamera.surfaceCreated(EvoCamera.java:171)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at android.view.SurfaceView.updateWindow(SurfaceView.java:569)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at android.view.SurfaceView.access$000(SurfaceView.java:86)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at android.view.SurfaceView$3.onPreDraw(SurfaceView.java:174)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at android.view.ViewTreeObserver.dispatchOnPreDraw(ViewTreeObserver.java:680)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at android.view.ViewRootImpl.performTraversals(ViewRootImpl.java:1842)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at android.view.ViewRootImpl.doTraversal(ViewRootImpl.java:989)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at android.view.ViewRootImpl$TraversalRunnable.run(ViewRootImpl.java:4351)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at android.view.Choreographer$CallbackRecord.run(Choreographer.java:749)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at android.view.Choreographer.doCallbacks(Choreographer.java:562)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at android.view.Choreographer.doFrame(Choreographer.java:532)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at android.view.Choreographer$FrameDisplayEventReceiver.run(Choreographer.java:735)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at android.os.Handler.handleCallback(Handler.java:725)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at android.os.Looper.loop(Looper.java:137)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at java.lang.reflect.Method.invokeNative(Native Method)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at java.lang.reflect.Method.invoke(Method.java:511)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-09 21:58:58.232: E/AndroidRuntime(2539):     at dalvik.system.NativeStart.main(Native Method)
04-09 21:59:34.802: D/Evolution Launcher(2539): Got location, location = Location[network 45.358237,10.737201 acc=20 et=+1d23h5m5s12ms {Bundle[mParcelledData.dataSize=600]}]
04-09 21:59:34.802: D/Evolution Launcher(2539): Getting longitude
04-09 21:59:34.802: D/Evolution Launcher(2539): Getting latitude
04-09 21:59:34.802: D/Evolution Launcher(2539): Getting altitude
04-09 21:59:34.990: W/dalvikvm(2539): threadid=11: thread exiting with uncaught exception (group=0x41356930)
04-09 21:59:34.990: I/Process(2539): Sending signal. PID: 2539 SIG: 9 
```

这是我的清单

```
 <uses-permission android:name="android.permission.RECORD_AUDIO" />
    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
    <uses-feature android:name="android.hardware.camera" />
    <uses-feature android:name="android.hardware.camera.autofocus" /> 
```

我忘了什么吗？

**更新** camera_view.xml

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Torch" >

    <ImageButton
        android:id="@+id/btn_capture"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerHorizontal="true"
        android:layout_marginTop="122dp"
        android:src="@drawable/ic_launcher" />

    <SurfaceView
        android:id="@+id/camera_preview"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content" />

</RelativeLayout> 
```

**更新 2** Logcat 更改后

```
04-09 22:37:13.959: D/dalvikvm(6124): GC_EXPLICIT freed 983K, 5% free 20350K/21360K, paused 3ms+8ms, total 46ms
04-09 22:37:15.646: D/Evolution Launcher(6124): Pausing
04-09 22:37:15.685: D/Evolution Camera(6124): Setting holders
04-09 22:37:15.685: D/Evolution Camera(6124): Start preparing video recorder
04-09 22:37:15.951: E/MediaRecorderJNI(6124): Application lost the surface
04-09 22:37:15.951: D/Evolution Camera(6124): IOException preparing MediaRecorder: invalid preview surface
04-09 22:37:16.513: D/Evolution Launcher(6124): Stopping
04-09 22:37:19.638: D/AndroidRuntime(6124): Shutting down VM
04-09 22:37:19.638: W/dalvikvm(6124): threadid=1: thread exiting with uncaught exception (group=0x41356930)
04-09 22:37:19.677: E/AndroidRuntime(6124): FATAL EXCEPTION: main
04-09 22:37:19.677: E/AndroidRuntime(6124): java.lang.RuntimeException: Fail to connect to camera service
04-09 22:37:19.677: E/AndroidRuntime(6124):     at android.hardware.Camera.native_setup(Native Method)
04-09 22:37:19.677: E/AndroidRuntime(6124):     at android.hardware.Camera.<init>(Camera.java:340)
04-09 22:37:19.677: E/AndroidRuntime(6124):     at android.hardware.Camera.open(Camera.java:317)
04-09 22:37:19.677: E/AndroidRuntime(6124):     at com.doublep.evolution.EvoCamera.prepareVideoRecorder(EvoCamera.java:88)
04-09 22:37:19.677: E/AndroidRuntime(6124):     at com.doublep.evolution.EvoCamera.access$1(EvoCamera.java:85)
04-09 22:37:19.677: E/AndroidRuntime(6124):     at com.doublep.evolution.EvoCamera$1.onClick(EvoCamera.java:60)
04-09 22:37:19.677: E/AndroidRuntime(6124):     at android.view.View.performClick(View.java:4204)
04-09 22:37:19.677: E/AndroidRuntime(6124):     at android.view.View$PerformClick.run(View.java:17355)
04-09 22:37:19.677: E/AndroidRuntime(6124):     at android.os.Handler.handleCallback(Handler.java:725)
04-09 22:37:19.677: E/AndroidRuntime(6124):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-09 22:37:19.677: E/AndroidRuntime(6124):     at android.os.Looper.loop(Looper.java:137)
04-09 22:37:19.677: E/AndroidRuntime(6124):     at android.app.ActivityThread.main(ActivityThread.java:5041)
04-09 22:37:19.677: E/AndroidRuntime(6124):     at java.lang.reflect.Method.invokeNative(Native Method)
04-09 22:37:19.677: E/AndroidRuntime(6124):     at java.lang.reflect.Method.invoke(Method.java:511)
04-09 22:37:19.677: E/AndroidRuntime(6124):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
04-09 22:37:19.677: E/AndroidRuntime(6124):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
04-09 22:37:19.677: E/AndroidRuntime(6124):     at dalvik.system.NativeStart.main(Native Method)
04-09 22:37:21.482: I/Process(6124): Sending signal. PID: 6124 SIG: 9
04-09 22:37:21.677: D/dalvikvm(6552): GC_CONCURRENT freed 64K, 2% free 9002K/9100K, paused 5ms+2ms, total 17ms
04-09 22:37:21.677: D/dalvikvm(6552): WAIT_FOR_CONCURRENT_GC blocked 6ms
04-09 22:37:21.724: D/dalvikvm(6552): GC_CONCURRENT freed 4K, 1% free 9434K/9516K, paused 2ms+2ms, total 16ms
04-09 22:37:21.724: D/dalvikvm(6552): WAIT_FOR_CONCURRENT_GC blocked 3ms
04-09 22:37:21.748: D/dalvikvm(6552): GC_FOR_ALLOC freed 2K, 1% free 9543K/9620K, paused 10ms, total 10ms
04-09 22:37:21.748: I/dalvikvm-heap(6552): Grow heap (frag case) to 11.206MB for 1952260-byte allocation
04-09 22:37:21.763: D/dalvikvm(6552): GC_FOR_ALLOC freed <1K, 1% free 11450K/11528K, paused 17ms, total 17ms
04-09 22:37:21.779: D/dalvikvm(6552): GC_CONCURRENT freed <1K, 1% free 11449K/11528K, paused 2ms+4ms, total 17ms
04-09 22:37:21.849: D/dalvikvm(6552): GC_FOR_ALLOC freed <1K, 1% free 11905K/11980K, paused 11ms, total 11ms
04-09 22:37:21.920: D/dalvikvm(6552): GC_FOR_ALLOC freed 1K, 1% free 12809K/12884K, paused 12ms, total 12ms
04-09 22:37:21.990: D/dalvikvm(6552): GC_FOR_ALLOC freed 1K, 1% free 13712K/13788K, paused 11ms, total 11ms
04-09 22:37:22.076: D/dalvikvm(6552): GC_FOR_ALLOC freed 2K, 1% free 15068K/15144K, paused 9ms, total 10ms
04-09 22:37:22.131: D/dalvikvm(6552): GC_FOR_ALLOC freed 2K, 1% free 16787K/16864K, paused 10ms, total 10ms
04-09 22:37:22.232: D/dalvikvm(6552): GC_CONCURRENT freed 111K, 1% free 19333K/19484K, paused 2ms+2ms, total 13ms
04-09 22:37:22.326: D/Evolution Launcher(6552): Loading variables
04-09 22:37:22.326: D/Evolution Launcher(6552): Restoring prefs
04-09 22:37:22.334: D/Evolution Launcher(6552): Screen density actions
04-09 22:37:22.349: D/Evolution Launcher- CarLocation(6552): Getting car location
04-09 22:37:22.357: D/Evolution Launcher(6552): Resuming
04-09 22:37:22.412: D/libEGL(6552): loaded /vendor/lib/egl/libEGL_POWERVR_SGX540_120.so
04-09 22:37:22.427: D/libEGL(6552): loaded /vendor/lib/egl/libGLESv1_CM_POWERVR_SGX540_120.so
04-09 22:37:22.427: D/libEGL(6552): loaded /vendor/lib/egl/libGLESv2_POWERVR_SGX540_120.so
04-09 22:37:22.537: D/OpenGLRenderer(6552): Enabling debug mode 0
04-09 22:37:24.920: D/dalvikvm(6552): GC_EXPLICIT freed 739K, 4% free 20266K/21032K, paused 2ms+6ms, total 45ms
04-09 22:37:27.357: D/dalvikvm(6552): GC_EXPLICIT freed 940K, 5% free 20349K/21320K, paused 3ms+9ms, total 45ms
04-09 22:37:29.677: D/dalvikvm(6552): GC_EXPLICIT freed 1046K, 6% free 20356K/21432K, paused 2ms+7ms, total 37ms 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:04:54.993

你把这个添加到你的清单中了吗？

```
 <uses-permission android:name="android.permission.CAMERA" />
 <uses-feature android:name="android.hardware.camera" />
 <uses-feature android:name="android.hardware.camera.autofocus" /> 
```

尝试将此添加到您的代码中：

```
 @Override
   public void surfaceDestroyed(SurfaceHolder holder) {
     if (mCam != null) {
        mCam.stopPreview();
        mCam.setPreviewCallback(null);
        mCam.release();
        mCam = null;
     }
   }

   @Override
   public void surfaceCreated(SurfaceHolder holder) {
       if (mCam == null) {
          mCam = Camera.open();
          try {
             mCam.setPreviewDisplay(holder);

             // TODO test how much setPreviewCallbackWithBuffer is faster
             mCam.setPreviewCallback(this);
          } catch (IOException e) {
             mCam.release();
             mCam = null;
          }
       }
   } 
```

用于检查您是否正确释放了所有获取的相机资源

# c# - VB6 到 C#：IUnknown

> ID：15911434
> 
> 赞同：2
> 
> 时间：2013-04-09T20:02:54.110
> 
> 标签：c#, properties, vb6, vb6-migration, iunknown

我在 VB6 中有一个属性，我正在尝试将其转换为 C#。如下：

```
Public Property Get NewEnum() As IUnknown
    'this property allows you to enumerate
    'this collection with the For...Each syntax
    Set NewEnum = m_coll.[_NewEnum]
End Property 
```

`m_coll`是私有变量，现在是 a`ArrayList`而不是前者`Collection`。

`m_coll`正在填充我自己的类对象之一。如您所见，此属性属于**IUnknown类型。**

在这一点上我可能只是没有正确思考，但是在 C# 中是否有与这种属性等效的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:30:13.297

如果您希望能够对一个类进行 foreach（就像您可以通过在 vb6 中将 NewEnum() 公开为 IUnknown 一样），您可以让您的类实现 IEnumerable - 例如：

```
 public class MyClass : IEnumerable 
    {
        private List<string> items = new List<string>();

        public MyClass()
        {
            items.Add("first");
            items.Add("second");
        }

        public IEnumerator GetEnumerator()
        {
            return items.GetEnumerator();
        }
    } 
```

这将允许您像这样使用它：

```
 MyClass myClass =new MyClass();
            foreach (var itm in myClass)
            {
                Console.WriteLine(itm);
            } 
```

为了简单起见，我使用`List<string>`过，但您可以使用`List<yourCustomClass>`

# java - 开发屏幕管理器的设计模式

> ID：15911435
> 
> 赞同：2
> 
> 时间：2013-04-09T20:02:58.917
> 
> 标签：java, design-patterns, user-interface

我正在尝试实现一个屏幕管理器，并且想知道什么是最好的模式。屏幕管理员具有以下职责：

1.  管理屏幕上所有可见的应用程序
2.  隐藏/显示应用程序
3.  管理屏幕上的其他 Misc UI 元素
4.  有一个规则引擎来定义应用程序是否可以在屏幕上绘制。
5.  管理屏幕空间

可能有更多的责任

你有什么建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T07:53:08.450

I want to say that an [Application Controller](http://martinfowler.com/eaaCatalog/applicationController.html) pattern is what you're looking for. However, I'm not so sure based on what you've posted.

It's worth a look but I think you'll need some other components (Event Aggregator?) to go with it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:32:41.567

看看[Mediator 模式](http://en.wikipedia.org/wiki/Mediator_pattern)，它可能适用。

# algorithm - 以概率最大化社交网络中的预期收益

> ID：15911440
> 
> 赞同：4
> 
> 时间：2013-04-09T20:03:33.323
> 
> 标签：algorithm, e-commerce, social-networking, graph-algorithm

我需要解决一个特定的问题。我得到了一个社交网络的表示。每个节点是一个人，每条边是两个人之间的连接。该图是无向的（如您所料）。每个人都有购买产品的个人“亲和力”（为了简化事情，假设整个问题只涉及一种产品）。

在时间的每一个“步骤”中，每个人都独立地选择是否购买产品。这里涉及到*概率*。考虑了几个参数：

1.  他对产品的个人亲和力，
2.  他的朋友已经购买了该产品的百分比

购买该产品的人的收益是 1 美元。

问题是指出将在第 0 步中收到产品的 X 人（比方说 5 人），并且在 Y 步（比方说 10 步）后最大化增益的总期望值

网络非常大。以幼稚的方式模拟所有选项是不可能的。

我应该使用什么工具/库/算法？

谢谢你。

PS 在 google 和 wikipedia 上调查这件事时，一些术语不断出现：

*   动态网络分析
*   流行病模型

但这并没有帮助我找到答案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T18:21:34.890

查看[submodularity](http://submodularity.org/submodularity-slides.pdf)的概念，这是一个非常强大的数学概念。特别是，请查看**幻灯片 19**，其中子模块性用于回答“给定社交图谱，谁应该获得免费手机？”的问题。如果您有访问权限，还请阅读[相应的论文](http://dl.acm.org/citation.cfm?id=956769)。那应该让你开始。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T12:40:22.397

一般来说，拥有最多邻居的人在购买东西时影响最大。

因此，我的启发式方法是首先按人们拥有的邻居数量（按降序排列），然后按每个邻居拥有的邻居数量（按从高到低的顺序）对人们进行排序，依此类推。您将需要最多 Y 个级别的邻居计数，但实际上更少可能就足够了。然后只需选择此列表中的前 X 人。

这只是一种启发式方法，因为例如，如果一个人有很多邻居，但他们中的大多数或全部可能已经通过其他联系购买了该产品，那么它可能会给出更高的期望来选择另一个邻居较少的人，但他们的邻居不太可能已经拥有该产品。

您不需要构建整个列表然后对其进行排序；您可以构建列表，然后将每个项目插入到[堆中](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)，然后只提取得分最高的 X 人。如果 X 很小，这将快得多。

如果 X 和 Y 与您建议的一样低，那么此计算将非常快，因此值得重复运行，而不是从拥有产品的前 X 人开始，对于每次运行，您随机选择最初的 X 所有者根据取决于他们在列表中位置的概率（列表越靠下，概率越低）。

# javascript - tpl 中的 JavaScript？

> ID：15911443
> 
> 赞同：0
> 
> 时间：2013-04-09T20:03:50.107
> 
> 标签：javascript, jquery

我正在尝试在 tpl 中添加 JavaScript 代码，但是当我单击按钮时，没有任何反应。这是代码：

```
 <script type="text/javascript">
// Hide optional fields
$("#hide_op").click(function() {
    $("#optional_fields").hide("slow");    
});

// Show optional fields
$("#show_op").click(function() {
    $("#optional_fields").show("slow");    
});

// Switch the a tags...
$("#toggle a").click(function() {
    $("#toggle a").toggle();    
});
</script> 
```

那是我想用来下拉额外项目的 JavaScript 代码；但没有任何效果。这是我正在使用的按钮“

```
 <div id="toggle">
<a id="hide_op" class="formcss1" style="margin-left: 0; display: none;" onclick="return false;" href="#">Hide optional fields</a>
<a id="show_op" class="formcss1" style="margin-left: 0;" onclick="return false;" href="#">Show optional fields</a>
</div> 
```

然后我有 java 的 div 代码：

```
<div id="optional_fields" style="display: none;"> 
```

然后就结束了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:14:00.403

忘记添加 jQuery。感谢 Bergi 提醒我有关 jquery 的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-06T09:31:30.820

尝试在开头和结尾添加 {literal}

```
<script type="text/javascript">
{literal}
// Hide optional fields
$("#hide_op").click(function() {
    $("#optional_fields").hide("slow");    
});

// Show optional fields
$("#show_op").click(function() {
    $("#optional_fields").show("slow");    
});

// Switch the a tags...
$("#toggle a").click(function() {
    $("#toggle a").toggle();    
});
{/literal}
</script> 
```

# powershell - 过滤多行文本框

> ID：15911448
> 
> 赞同：0
> 
> 时间：2013-04-09T20:03:57.733
> 
> 标签：powershell

我试图从一个文本框中筛选出一系列名称并将过滤后的列表复制到另一个文本框。我遇到的问题是，当我使用 add_click 按钮时，它只能在少数情况下工作。当我有要在列表中过滤的名称（列表的前面或结尾）时，没有结果添加到目标文本框中。此外，如果我要添加一个应该被过滤掉的项目，它只会将目标框清空（假设意外添加到一个好的名称列表中，所以即使是好的名称也会被清空）。因此，如果我有 5 个要复制的项目和一个应该被过滤掉的项目，那么整个目标框就会被空白。当我从文本框列表中删除过滤掉的项目时，目标框会填充这些名称。这些是我要过滤掉的下面的前缀。

```
$objOutputBox.Text = $logOutputBox.text |?{$_ -notmatch "etc$|^mint|kssc*|mmm|charl"} 
```

有什么想法可以安排这个，以便过滤掉不需要的机器并添加所需的机器？现在，它仅在我添加的每个名称都没有过滤掉的前缀或后缀时才有效。我的推理是试图让它工作，并且过滤掉的名称将被删除，同时单击按钮添加所需的名称。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:32:05.423

我不确定我是否正确理解这一点。文本很多，样本不多。您现在应该考虑这一点，以备将来参考。一张“图片”（样本）值一千字。:-) 您要过滤的名称是否按换行符、空格、字符分隔？我似乎在你的文字中找不到。

为了帮助您入门，该属性是带有换行符`Text`的单个对象。( ) 通过将当前对象与规则匹配来工作。现在，由于是一个单一的对象，它要么通过（它通过了你的测试），要么一个都不会通过。要解决此问题，您可以尝试根据您在文本框中拆分名称的方式将字符串拆分为数组。顺便说一句，当您使用正则表达式进行匹配时，您应该使用单引号，而不是因为特殊字符而使用双引号。`string``Where-object``?``Text``string`

```
#Sample with list seperated by linebreaks
PS > $listseperatedbylinebreaks = @"
this
is
my
charl
list
"@

PS > $listseperatedbylinebreaks.Split("`n") | ? { $_ -notmatch "etc$|^mint|kssc*|mmm|charl"}

this
is
my
list

#Sample with list seperated by linebreaks and spaces    
PS > $listseperatedbylinebreaksandspaces = @"
this is
my list sdsadetc
"@

PS > $listseperatedbylinebreaksandspaces.Split("`n ", [System.StringSplitOptions]::RemoveEmptyEntries) | ? { $_ -notmatch "etc$|^mint|kssc*|mmm|charl"}

this
is
my
list 
```

我希望这能让你知道如何解决它。如果没有，请提供更多示例（例如输入文本框内容），以便我更好地理解它。

# ruby-on-rails - pdfkit 未正确从 html 呈现 pdf

> ID：15911453
> 
> 赞同：0
> 
> 时间：2013-04-09T20:04:14.033
> 
> 标签：ruby-on-rails, twitter-bootstrap, pdfkit

我已经安装了 pdfkit，一切似乎都运行良好。但是，PDF 看起来不太像我试图呈现为 PDF 的页面。我试图确保 css 文件被正确加载，但我不确定如何确认。我将它们内联加载到视图中，并尝试指定 pdf 对象的路径名。仅供参考，我正在使用引导程序。

但是，页面上的所有元素几乎都被拉到了页面的左侧。我还尝试添加 %i.icon-user 来测试该资产是否正在加载到 pdf 上，但它没有。但我不确定这是否意味着 CSS 没有加载。

最后，我完全为视图使用流体设计（响应式），这会导致问题吗？

这是我正在加载的视图的控制器：

```
 def client_view
    @invoice = Invoice.find_by_public_id(params[:public_id])
    kit = PDFKit.new(render_to_string(:client_view, :layout => false))
    kit.stylesheets << Rails.application.assets['application.css'].pathname
    kit.to_file("#{@invoice.public_id}.pdf")
  end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:15:31.873

终于让它工作了。事实证明，PDFkit 不能很好地处理预编译的资产。由于我只是将 PDFkit 指向资产管道文件夹，因此它没有呈现资产。因此，我（本地）预编译了它们并将 PDFkit 对象链接到本地​​渲染的 css 文件，现在一切看起来都很棒（即使是响应式设计）。但是，我还没有推送到heroku，所以我不确定它会如何反应。

# php - 如何用子选项做选项？

> ID：15911457
> 
> 赞同：0
> 
> 时间：2013-04-09T20:04:22.137
> 
> 标签：php, html, selection, option

我想创建一个具有选项和子选项的选择。

例如，如果我有一个类似这样的表格：

```
<form method="post" action="processor.php">
  <select name="mySelect">
    <option value="1">Parent option 1</option>
      <option value="1">Child option 1 of parent 1</option>
      <option value="2">Child option 2 of parent 1</option>
      <option value="3">Child option 3 of parent 1</option>
    <option value="2">Parent option 1</option>
      <option value="1">Child option 1 of parent 2</option>
      <option value="2">Child option 2 of parent 2</option>
      <option value="3">Child option 3 of parent 2</option>
  </select>
  <input type="submit" value="Send" />
</form> 
```

我想当用户选择该`Parent 1`选项时，我会收到一个像这样的数组：

```
array(
    "parent" => "1"
); 
```

选择`Child option 3 of parent 2`选项时，我收到一个数组，如：

```
array(
    "parent" => "2"
    "child"  => "3"
); 
```

我该怎么做？我可以发送类似`parent_2|child_3`并爆炸的东西，但我认为这不是最好的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:10:18.333

`<select>`标签不支持嵌套选项。它支持[组](https://developer.mozilla.org/en-US/docs/HTML/Element/optgroup)，但不是真正的层次结构。

有可用的基于 JavaScript 的替换，它们使用嵌套列表来执行相同类型的功能。您可能希望探索此选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:21:06.983

尝试使用“ `<ul>`”标签而不是“ `<select>`”然后放一些 jquery 或 javascript 和 CSS 来做动画（隐藏、显示）的事情然后在提交时使用 javascript 获取选定的值或这样做：

[通过 POST 提交 UL 的最佳方式？](https://stackoverflow.com/questions/3287336/best-way-to-submit-ul-via-post)

干杯！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:22:33.020

我认为您将从基于 javascript 的树控件而不是选择器中受益更多。您可以拥有无​​限的层次结构，并且选择机制几乎就是您要寻找的。

例如，您是否[看过 DHTMLX Tree](http://www.dhtmlx.com/docs/products/dhtmlxTree/)？

# android - 为什么我的 phoneGap Android 应用程序在恢复时崩溃？

> ID：15911459
> 
> 赞同：0
> 
> 时间：2013-04-09T20:04:24.090
> 
> 标签：android, cordova

我最近开始编写一个 phonegap android 应用程序，并注意到当应用程序从后台恢复时（所以我将应用程序部署到 android 平板电脑，按主页按钮，然后从菜单中重新打开应用程序）它给出了超时错误（一些错误代码 =-6 与服务器的连接不成功）然后崩溃。根据我的测试，这似乎只发生在开发人员选项中选中“不保留活动”选项时，当未选中该选项时，应用程序按预期工作。

还值得注意的是，我重新创建了默认的 phonegap 应用程序，运行它并遇到了同样的问题。

谁能解释为什么会发生这种情况，或提出解决方案？显然，我可以通过简单地取消选中“不保留活动”选项来解决这个问题，但我猜这个问题会在任何选中了这个选项的 Android 设备上持续存在，这不会发生。

我正在使用 phonegap 2.5.0 并在运行 Android 4.0.3 的设备上进行测试，

谢谢，乔什

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-03T17:40:25.630

“不要保留活动”是一种开发人员工具，用于模拟极难测试的用户活动。我个人认为所有应用程序都应该在打开此设置的情况下进行第二次测试（至少运行自动化测试），并且开发人员应该在开发过程中打开/关闭它。

您的问题（我刚刚在 v2.7 上遇到过）来自超时功能的愚蠢实现。`CordovaWebView.loadUrlIntoView`创建并锁定 ( `wait()`) 一个线程 20 秒（默认值），之后它会检查一个值以查看 url 是否完成加载 - 如果尚未完成，则会显示一条错误消息。

该线程存在于您的活动生命周期之外，因此如果活动停止运行，Webview 将永远无法完成加载 url，并且当线程唤醒时，它会尝试显示错误。

如果不使用“不保留活动”，只需让用户离开应用程序，然后系统在 20 秒内回收活动的资源（因为它的内存不足或其他原因），同样的崩溃可能会发生。

使用 a`Handler`似乎是一种更合适的方式来处理此超时，但在不更改源的情况下，有一些 hacky 解决方法。

1.  `System.exit(0)`在你结束时打电话`Activity.onDestroy()`- 这太可怕了，但如果你只有一个活动而没有服务，它可能是一个选择

2.  使用反射来改变`CordovaWebView.loadUrlTimeout`- 这很可怕，但它应该工作，这是线程检查是否加载 url 的值（增加 1）。

# performance - CAShapeLayer 性能

> ID：15911460
> 
> 赞同：1
> 
> 时间：2013-04-09T20:04:31.637
> 
> 标签：performance, macos, cocoa, core-animation, cashapelayer

据我了解，`CAShapeLayer`基本上将其形状绘制成`CGImageRef`. 因此，如果我自己将形状绘制到`CGImageRef`上下文中并将其设置为 plain 的内容`CALayer`，我将获得类似的性能和内存使用。

这是一个正确的假设，还是`CAShapeLayer`在幕后做了一些神奇的事情？

# c++ - 为什么 __inbyte 会使我的软件崩溃？

> ID：15911463
> 
> 赞同：3
> 
> 时间：2013-04-09T20:04:41.300
> 
> 标签：c++, intrinsics

我遇到了这个函数，想知道它是做什么的，所以我写了以下代码，用mingw32编译并在Wine和Windows下执行，程序都崩溃了。

```
#include <stdio.h>
#include <stdlib.h>
#include <intrin.h>
int main()
{
 unsigned char j = __inbyte(0xABC); // example value
 printf("%i\n", j);
 return 0;
} 
```

我在 MSDN 上查过，但我发现描述很模糊。 [http://msdn.microsoft.com/en-us/library/732t2y37%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/732t2y37%28v=vs.100%29.aspx)

unsigned char __inbyte(unsigned short Port);

生成**in**指令，返回从 Port 指定的端口读取的一个字节。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T20:07:24.647

IN 指令尝试直接从 CPU I/O 端口读取一个字节。这是一项特权操作，除非您处于超级用户模式（例如，在内核中），否则（几乎）总是会失败。

除非您打算编写内核驱动程序，否则您可以放心地忘记您曾经看到过这个内在函数。

# php - php对ID进行哈希处理，然后检查是否为真

> ID：15911466
> 
> 赞同：0
> 
> 时间：2013-04-09T20:04:50.817
> 
> 标签：php, security, hash

我写了脚本，它工作得很好，但我想散列答案的 ID 不可用发现正确的答案。

所以我当前的代码看起来是这样的：

```
foreach($result2 as $row)
{
   $odpowiedz = $row['Tresc_odpowiedzi'];
   $value= $row['ID'];
   echo "<p><input type=\"radio\" name=\"odp\" value=\"$value\" />$odpowiedz</p>";
} // pobranie wartosci ID pytania z bazy i wpisanie go jako value

$zapytanie3 = $pdo->prepare('SELECT * FROM odpowiedzi WHERE ID = :ID_odpowiedzi'); //pobranie wedlud kategorii zdefiniowanej w 'bindValue'
$zapytanie3 -> bindValue(':ID_odpowiedzi',$_POST['odp'], PDO::PARAM_INT);
$zapytanie3 -> execute();
$result3 = $zapytanie3 -> fetchAll(PDO::FETCH_ASSOC);
//pobranie danej odpowiedzi, aby sprawdzic czy prawidlowa 
```

不，我想散列 $value，所以很容易：`$licznik_odp = hash( 'sha256', $value.$sald);`，但我不知道如何检查它是否是 ID 号 254，等等。

因为`$zapytanie3 -> bindValue(':ID_odpowiedzi',$_POST['odp'], PDO::PARAM_INT);`我必须写出答案的 ID（在散列之前是 $row['ID']）

你知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T08:25:18.633

是的，没问题，也许我会帮助其他人:)

我在 MySQL 表 odpowiedzi (answers) 中添加了额外的 HASH 列，当我添加一些带有答案的问题时，我对每个答案进行了哈希处理：

```
$id = $rekord['ID'];
$hash_a = hash( 'sha256', $a.'sold'.$id); 
```

$id - 问题的 ID

$a - 这是 $_POST 的一个答案

$hash_a - 用 id 散列答案

在收音机的价值中，我这样写这个哈希：

```
$value = $row['Hash'];
                echo "<p><input type=\"radio\" name=\"odp\" value=\"$value\" id=\"$value\" /><label for=\"$value\">$odpowiedz</label></p>";
and in checking question I changed my query: 
```

最后我检查一下这个哈希是否存在于 mySQL

```
$zapytanie3 = $pdo->prepare('SELECT * FROM odpowiedzi WHERE Hash = :Hash'); //pobranie wedlud kategorii zdefiniowanej w 'bindValue'
            $zapytanie3 -> bindValue(':Hash',$_POST['odp'], PDO::PARAM_INT); 
```

就是这样，我认为没有人可以检查 HTML 代码是否正确，因为所有答案都是散列 :)

# jenkins - 詹金斯半夜下班

> ID：15911467
> 
> 赞同：0
> 
> 时间：2013-04-09T20:04:53.130
> 
> 标签：jenkins, cmd

我从 cmd 运行 Jenkins，而不是作为服务，因为我需要进行 GUI 测试。当我启动它时它工作正常，我可以做我想做的一切。但我在凌晨 4 点左右安排了一项任务。当我回来时，詹金斯没有坚持到凌晨 4 点。从控制台看，它似乎只是在上午 12 点退出。

首先我以为是电脑环境问题。但是在我将计算机更改为永不休眠并且我将硬盘驱动器也设置为永不休眠之后，它仍然会发生。我在晚上 7 点左右锁定了我的电脑。但它似乎一直运行到凌晨 12 点。

对正在发生的事情有任何想法吗？

![詹金斯 cmd 输出](https://i.stack.imgur.com/yx2zG.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:17:33.513

查看 Jenkins 日志。它们位于所在目录`jenkins.jar`或子目录中的某个位置，查找具有正确时间戳的文件`jenkins*out*`。`jenkins*err*`我现在无法检查确切的位置和名称，抱歉。

似乎您正在运行 jenkins `C:\`，恭喜您弄乱了 C 驱动器根目录；）。为了帮助清理它，复制`jenkins.war`到`C:\jenkins\`或其他东西并再次运行它以查看它在那里创建的所有内容，因此您知道要清理什么。

此外，从 C 驱动器根目录运行它可能会以某种方式干扰某些 Windows 维护任务或其他东西，从而导致它中止。

# matplotlib - 寻找第二个图例框的最佳位置

> ID：15911469
> 
> 赞同：1
> 
> 时间：2013-04-09T20:05:14.387
> 
> 标签：matplotlib

对于我正在自动化的一组子图，空间是一种溢价，其中有时在一个子图中有许多曲线。我想将图例分成两个框，然后优化第二个图例框的位置（第一个图例的位置由 loc='best' 提供）。

这是一个简单的示例，演示了我正在尝试的内容-

```
lines = []
leg = ['test','test1','test2']

lines.append(plot(np.array([1,20]), label = 'test')[0])
lines.append(plot(np.array([1,20]), label = 'test1')[0])
lines.append(plot(np.array([1,20]), label = 'test2')[0])
pltleg1 = plt.legend(lines[:2],leg[:2],loc='best')

# QUESTION: Here I want to put the second legend in the 2nd best location
# or if I could get the location decided upon for pltleg1, I can just add it
# the opposite corner.
pltleg2 = plt.legend(lines[2:],leg[2:],loc='best') 

gca().add_artist(pltleg1) 
```

因此，我希望找到第二个最佳位置，或者如果我可以检索所选的图例位置，那么选择替代位置是可以的。对于第二种情况，如果有曲线重叠是可以的。如何才能做到这一点？

# ios - SVGPan - 有人知道 ios 触摸事件支持吗？

> ID：15911471
> 
> 赞同：0
> 
> 时间：2013-04-09T20:05:18.090
> 
> 标签：ios, touch, jquery-svg

我一直在使用 SVGPan ( [http://code.google.com/p/svgpan/](http://code.google.com/p/svgpan/) )，我普遍觉得它很棒（感谢所有相关人员！）。

只是想知道，有没有人添加过支持 ios 设备的功能（我现在主要对 i-pad 感兴趣！）？我一直在尝试自己进行一些更改，但我无法一次平移/拖动多个 svg 元素，例如矩形/圆形。我无法根据各种触摸事件一次处理一组 svg 元素。我发现的最好的事情是：[http](http://techblog.floorplanner.com/post/20528546052/interactive-svg-on-the-ipad) ://techblog.floorplanner.com/post/20528546052/interactive-svg-on-the-ipad 。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:49:14.927

试试hammer.js（[http://eightmedia.github.io/hammer.js/](http://eightmedia.github.io/hammer.js/)），有一个演示可以用你的ios浏览器试试：http: [//riagora.com/mobile/hammer/](http://riagora.com/mobile/hammer/)

# jquery - ajaxStop 用于特定事件

> ID：15911474
> 
> 赞同：1
> 
> 时间：2013-04-09T20:05:27.387
> 
> 标签：jquery, ajax

我读了这个[问题](https://stackoverflow.com/questions/11010410/ajaxstart-and-ajaxstop-for-a-specific-event)，但由于**success:function**没有多大帮助。它不理解 Ajax 响应的完成。有谁知道如何使用 Ajax 停止特定事件？

**详细信息**：我有一个发送请求的 Ajax 代码，我希望它在收到响应时执行某些操作。我通过以下函数做到这一点，但它获取了 Ajax 的所有文档，我无法将任何 Ajax 添加到页面。

```
$(document).ajaxStop(function() {
                ....;
                alert("start");
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:13:39.563

`ajaxStop`旨在用于全局 AJAX 完成行为。您可能想使用常规`complete`处理程序：

```
$.ajax({
  url: "some/path.php",
  complete: function() { alert("start"); }
}); 
```

或者你也可以使用`always`promise 方法：

```
$.ajax({
  url: "http://fiddle.jshell.net/favicon.png",
}).always(function() {
  alert("start");
}); 
```

更新：

看看你下面的评论，你可能真的想使用success（尤其是当你对以下内容感兴趣时`response`：

```
$.ajax({
  url: "some/path.php",
  success: function(response) { alert(response); }
}); 
```

或者你也可以使用`done`promise 方法：

```
$.ajax({
  url: "http://fiddle.jshell.net/favicon.png",
}).done(function(response) {
  alert(response);
}); 
```

但是，需要注意的是，这两种方法仅在您从服务器收到成功响应（状态代码 200）时才会执行。

# android - 阅读 Viber 通话的通话记录，但有异常

> ID：15911477
> 
> 赞同：1
> 
> 时间：2013-04-09T20:05:45.903
> 
> 标签：android, calllog, viber

我有阅读通话记录的代码

```
 String[] strFields = {
        android.provider.CallLog.Calls.DATE, 
        android.provider.CallLog.Calls.TYPE,
        android.provider.CallLog.Calls.DURATION,
        android.provider.CallLog.Calls.NUMBER
        };
//READ CALL LOG     
Cursor callCursor = getContentResolver().query(android.provider.CallLog.Calls.CONTENT_URI,strFields, null, null,android.provider.CallLog.Calls.DATE + " ASC");
startManagingCursor(callCursor);

int dateColumn = callCursor.getColumnIndex(android.provider.CallLog.Calls.DATE);
// type can be: Incoming, Outgoing or Missed
int typeColumn = callCursor.getColumnIndex(android.provider.CallLog.Calls.TYPE);
// get duration of calls
int durationColumn = callCursor.getColumnIndex(android.provider.CallLog.Calls.DURATION);
// get number
int numberColumn = callCursor.getColumnIndex(android.provider.CallLog.Calls.NUMBER);
Calendar calendarCall = Calendar.getInstance();

if(callCursor.moveToFirst()){
do{         
    callDate = callCursor.getLong(dateColumn);
    callType = callCursor.getInt(typeColumn);   
    callDuration = callCursor.getInt(durationColumn);
    callNumber = callCursor.getString(numberColumn);

    switch(callType){
        case android.provider.CallLog.Calls.INCOMING_TYPE:

            break;
        case android.provider.CallLog.Calls.MISSED_TYPE:

            break;
        case android.provider.CallLog.Calls.OUTGOING_TYPE:                      

            break;
    }
}while(callCursor.moveToNext());    
} 
```

现在的问题是 Viber 调用也包括在内，但我想排除它们。有没有办法从通话记录中排除 Viber 通话？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T08:06:31.993

取决于标志/列。您是否找到任何可以帮助您识别 Viber 呼叫的标志？如果没有，则无法从日志中获取它。

# javascript - 在 Excel 中使用 Javascript

> ID：15911478
> 
> 赞同：7
> 
> 时间：2013-04-09T20:05:49.780
> 
> 标签：javascript, excel, vba, wsc

我目前正在创建一个运行蒙特卡罗类型模拟的 Excel 工作簿。不过，模拟器代码目前使用的是 Javascript，并且考虑到团队对这种语言缺乏经验，完全移植到 VBA 似乎并非易事。所以，我已经能够将 javascript 组件合并到一个 WSC 文件中，效果很好。（下面的简化示例。）

```
 Sub Simulate()
        Set ATPSim = GetObject("script:http://www.example.com/ATPSim.wsc")
        'Set ATPSim = GetObject("script:C:\ATPSim.wsc")
        Dim ParamOne As Integer
        ParamOne = Range("B2").Value
        Dim ParamTwo As Double
        ParamTwo = Range("B3").Value
        Dim ParamThree As Double
        ParamThree = Range("B4").Value
        Range("B1").Value = ATPSim.simulate(ParamOne, ParamTwo, ParamThree)
    End Sub 
```

不幸的是，这需要我托管 javascript 代码或依赖不成熟的用户来更新绝对路径。有没有自给自足的解决方案？我更愿意将所有内容保存在一个可以通过电子邮件发送给用户的 .xlsm 文件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-18T05:53:38.087

您应该能够在 COM 组件中托管 JS 并使用 WSH 访问它。

请参阅此处的示例：[如何在 Excel 宏中使用 JavaScript？](https://stackoverflow.com/questions/848246/how-can-i-use-javascript-within-an-excel-macro)

# jquery - IE8 问题 - 元素以错误的变换原点进行动画处理

> ID：15911482
> 
> 赞同：0
> 
> 时间：2013-04-09T20:06:03.427
> 
> 标签：jquery, css, internet-explorer-8, css-transitions, css-transforms

我目前有一个大的主要圈子。我从这个大圆圈做一些动画，从大圆圈的中心点出现一些线条，然后以不同的角度围绕大圆圈旋转。

我使用如下前缀来定义传输源：

```
transform-origin: center bottom;
-moz-transform-origin: center bottom; /* Firefox */
-ms-transform-origin: center bottom; /* IE 9 */
-webkit-transform-origin: center bottom; /* Safari and Chrome */
-o-transform-origin: center bottom; /* Opera */ 
```

这在除 IE8 及以下版本之外的所有浏览器中都可以正常工作 - 尝试了一些不同的方法来在 IE8 中定位和修复此问题，但没有运气。有什么建议么。

此处工作动画的示例小提琴：http: [//jsfiddle.net/R5CDv/21/](http://jsfiddle.net/R5CDv/21/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:08:51.077

它不适用于 IE8 及更低版本，因为该`transform`属性[仅受 IE9+ 支持](http://webdesign.about.com/od/css3styleproperties/p/transform-origin.htm)。

对于 IE8 及更低版本，一种可能有用的解决方案是使用[过滤器](http://msdn.microsoft.com/en-gb/library/ms532847%28v=vs.85%29.aspx)- 查看本教程，了解使用它在旧版本的 IE上[实现转换原点。](http://someguynameddylan.com/lab/transform-origin-in-internet-explorer.php)

# java - 使用 Apache Tika 将 MSword 转换为 XML/HTML

> ID：15911492
> 
> 赞同：0
> 
> 时间：2013-04-09T20:06:47.547
> 
> 标签：java, apache-tika

我碰巧知道 Tika，它在从 word 文本提取中非常有用：

卷曲 www.vit.org/downloads/doc/tariff.doc \ | java -jar tika-app-1.3.jar --text

但是有没有办法用它把 Ms Word 文件转换成 XML/HTML？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T09:15:52.200

是的，它涉及在您的命令中更改多达 4 个字符！

如果你跑步`java -jar tika-app-1.3.jar --help`，你会得到以下开头的东西：

```
usage: java -jar tika-app.jar [option...] [file|port...]

Options:
  -?  or --help          Print this usage message
  -v  or --verbose       Print debug level messages
  -V  or --version       Print the Apache Tika version number

  -g  or --gui           Start the Apache Tika GUI
  -s  or --server        Start the Apache Tika server
  -f  or --fork          Use Fork Mode for out-of-process extraction

  -x  or --xml           Output XHTML content (default)
  -h  or --html          Output HTML content
  -t  or --text          Output plain text content
  -T  or --text-main     Output plain text content (main content only)
  -m  or --metadata      Output only metadata
..... 
```

从那里，您会看到，如果您将`--text`选项更改为，`--html`否则`--xml`您将获得格式良好的 XML，而不仅仅是纯文本

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-05T17:40:19.613

尽管已经回答了这个问题，但由于 op 用 java 标签标记了问题，为了完整起见，我将添加参考以轻松查看如何在 java 中执行此操作。

[Tika 的单元测试中的 TikaTest.java 超类是使用getXML 方法](https://apache.googlesource.com/tika/+/e545153d1608ec44ad39d0f2f7494ef562edccc5/tika-parsers/src/test/java/org/apache/tika/TikaTest.java)将 word 转换为 html 的最简单参考。遗憾的是，他们在编写单元测试时看到了这样一个 API 的用处，但选择不将其公开为一个方便的工具，迫使每个人处理处理程序等，这对于常见的用例来说是不幸的样板。

# c# - C# 中的 SQL 查询，对象名称“userInfo”无效

> ID：15911503
> 
> 赞同：0
> 
> 时间：2013-04-09T20:07:29.980
> 
> 标签：c#, sql, sql-server

```
SqlConnection scon = new SqlConnection(arthurDBConnectionString);
SqlDataAdapter da = new SqlDataAdapter();
da.InsertCommand = new SqlCommand("INSERT INTO userInfo VALUES(@firstname, @lastname)", scon);
da.InsertCommand.Parameters.Add("@firstname", SqlDbType.VarChar).Value = firstname;
da.InsertCommand.Parameters.Add("@lastname", SqlDbType.VarChar).Value = lastname;

scon.Open();
da.InsertCommand.ExecuteNonQuery(); <--Exception(Invalid object name)
scon.Close(); 
```

首先，我想说我是 SQL 新手。我正在使用 C# 开发一个应用程序，它将在 SQL Server 上操作数据。上面是我用于将数据添加到表的两列的代码，但我收到“userInfo”（表）是无效对象名称的错误。我已确保该表存在于数据库中并且连接已打开。我也尝试过将表格称为 相同`DATABASENAME.SCHEMA.userInfo`的`SCHEMA.userInfo`结果。提前感谢您的任何帮助或意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:28:19.317

如果您收到该错误，则您的范围内没有“userInfo”表。尝试使用管理工作室登录并使用查询分析器运行相同的命令。确保您在 arthurDBConnectionString 中使用相同的登录信息，调试您的方法并将鼠标悬停在它上面以确保您使用的是导致错误的相同信息。

1) 如果您的排序规则区分大小写（使用 进行检查`SELECT SERVERPROPERTY('COLLATION')`），则“userInfo”的大写必须相同。

2）您在正确的数据库中吗？也许您的连接字符串拼错了属性（即`INITIL CATALOG=dbname`，在您的代码中尝试另一个命令`SELECT db_name()`以确保。

3) 架构是否相同？

4）您是否有权从表格中选择？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:12:20.527

检查，1）检查您创建的表是否存在于您在连接字符串中提供的同一数据库中。2) 交叉核对表名

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-30T04:41:30.940

而不是这个

```
da.InsertCommand.Parameters.Add("@firstname", SqlDbType.VarChar).Value = firstname;
da.InsertCommand.Parameters.Add("@lastname", SqlDbType.VarChar).Value = lastname; 
```

用这个

```
da.InsertCommand.Parameters.Add("@firstname", SqlDbType.VarChar).Value = textBox1.Text;
da.InsertCommand.Parameters.Add("@lastname", SqlDbType.VarChar).Value = textBox2.Text 
```

# php - sql可以处理的查询数限制是多少？

> ID：15911507
> 
> 赞同：-4
> 
> 时间：2013-04-09T20:07:46.877
> 
> 标签：php, mysql, sql

伙计们，我正在尝试更新有 6 万行的表，这是我的代码：

忽略代码的逻辑，看看它有多少查询和循环。我，计划对主查询设置一个限制，但我希望它是 SQL 的最大限制，这样我可以节省时间。有什么想法吗？

```
$query=mysql_query("SELECT DISTINCT(nid) FROM `comment` LIMIT ");
//mysql_query("UPDATE comment set thread = '00/' WHERE pid = 0 and uid = 333333");

while($result=mysql_fetch_array($query))
{
    $query2=mysql_query("SELECT cid,pid,thread FROM comment WHERE nid = ".$result['nid']." ORDER by created");

    while($result2=mysql_fetch_array($query2)){ 

    $nodethread = 0;

        if($result2['pid'] == 0)
            $thread = int2vancode($nodethread) . "/";

        else{           

            $parent = (string) rtrim((string) $result2['thread'], '/');
            $parent=explode('.',$parent);
            echo $parent." this is parent</br>";

            $max=max($parent);

            if($max == '')
            {
            $thread = $result['thread'].'.'.int2vancode(0) .'/';
            }
            else
            {
                  //$parts = explode('.', $max);
                  $parent_depth = count($parent);
                  echo "parent".$parent_depth;
                  $last = $parent[$parent_depth];
                  $thread = $result2['thread'] .'.'. int2vancode(vancode2int($last) + 1) .'/';
            }

        }
        mysql_query("UPDATE comment set thread = '$thread' where cid = ".$result2['cid']."");

    }

} 
```

所以总结一下我的代码，我首先有一个：

```
while loop for my first query
then i have another while loop inside for my second query
and lastly i have an update inside. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:06:49.493

我认为您要解决的问题是*concurrency*。

`INSERT`//操作需要锁才能运行`UPDATE`。`DELETE`MyISAM 表在运行时会锁定整个表，而 InnoDB 通常只锁定受影响的行。如果一个查询运行需要访问这些表/行，甚至是 a `SELECT`，它将排队，直到锁被删除。

您似乎正在触发一个*应该*没问题的 squillion 微小查询，只要在两者之间运行其他查询无关紧要。如果*还不行*，那么你需要切换到 InnoDB 并使用事务。但是，就目前而言，并发查询彼此减慢可能不会有太大问题。

# jquery - 使我的新轮播有更多图像并自动滚动

> ID：15911508
> 
> 赞同：0
> 
> 时间：2013-04-09T20:07:47.517
> 
> 标签：jquery, jcarousel

我正在使用 jquery jcarouselLite 并且在安装时感到困惑之后，我现在正在尝试使轮播自动滚动并支持 5+ 图像一次查看。

[http://goo.gl/58Ds2](http://goo.gl/58Ds2)

我已经尝试从文档中添加新代码，但这似乎并没有改变任何东西

$(".auto .jCarouselLite").jCarouselLite({ auto: 800, speed: 1000 });

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:22:46.583

应该是滑块的 div 有一个“anyClass”类。

请执行下列操作 ：

```
$('.anyClass').jCarouselLite({ auto: 800, speed: 1000 }); 
```

# ios - 如何简单地更改 TableView 中的复选标记？

> ID：15911510
> 
> 赞同：0
> 
> 时间：2013-04-09T20:07:52.957
> 
> 标签：ios, uitableview, storyboard

在我的应用程序中，在故事板中，我有一个带有很多表格视图单元格的屏幕。

例如，在前两个中，当用户触摸其中一个（进行选择）时，我需要移动复选标记。

![在此处输入图像描述](https://i.stack.imgur.com/2DrGU.png)

有没有简单的方法可以做到这一点，例如插座连接？或者怎么可能做？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:52:01.897

查看 Apple 关于[在 UITableView 中管理选择](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/ManageSelections/ManageSelections.html)的文档。`didSelectRowAtIndexPath`基本上，您将在表格视图的方法中协调先前选择的单元格（删除复选标记附件）和当前选定的单元格（添加复选标记附件）的附件视图。

这是一个粗略的实现，假设您有一个可用数组和一个选定`taskTypes`属性。`currentTaskType`

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [tableView deselectRowAtIndexPath:indexPath animated:NO];

    NSInteger taskTypeIndex = [taskTypes indexOfObject:[self currentTaskType]];

    if ( taskTypeIndex == [indexPath row] )
    {
        return;
    }

    NSIndexPath     *oldIndexPath = [NSIndexPath indexPathForRow:taskTypeIndex inSection:0];
    UITableViewCell *newCell      = [tableView cellForRowAtIndexPath:indexPath];
    UITableViewCell *oldCell      = [tableView cellForRowAtIndexPath:oldIndexPath];

    if ( [newCell accessoryType] == UITableViewCellAccessoryNone )
    {
        [newCell setAccessoryType:UITableViewCellAccessoryCheckmark];
        [self setCurrentTaskType:[taskTypes objectAtIndex:[indexPath row]]];
    }

    if ( [oldCell accessoryType] == UITableViewCellAccessoryCheckmark )
    {
        [oldCell setAccessoryType:UITableViewCellAccessoryNone];
    }
} 
```

# iphone - 在 UITableView 中实现 Prev./Next 按钮以使第一响应者成为不可见单元格中的 UITextField

> ID：15911513
> 
> 赞同：6
> 
> 时间：2013-04-09T20:08:01.330
> 
> 标签：iphone, ios, uitableview, first-responder

在我的应用程序中，每个单元格内都有一个`UITabeView`with `UITextField`s。但是，我在实现上一个/下一个按钮以使上一个/下一个内的文本字段`UITableViewCell`成为第一响应者时遇到了麻烦。

我已经对该`UITableViewCell`类进行了子类化，让它在按下 prev./next 按钮时调用它的某个方法，并将`delegate`单元格本身作为该方法的参数传递（所以我可以获取它的索引路径来计算哪个是索引必须将其文本字段设为第一响应者的单元格的路径）

在委托的方法I的实现中：

*   获取按下按钮的单元格的索引路径
*   从该单元格的索引路径中加或减 1（取决于按下的按钮）
*   `-cellForRowAtIndexPath:`使用表格视图上的方法获取其文本字段必须成为第一响应者的单元格
*   使文本字段成为第一响应者

问题是该`-cellForRowAtIndexPath:`方法仅在单元格可见时才返回单元格。因此，当单元格不可见时，它将返回`nil`并且上述算法将不起作用，而当单元格在屏幕上时，它将正常工作。

这是我的上一个代码。按钮，前提是它`MUInfoMateriaTableViewCell`是我的子类`UITableViewCell`并且它具有`textField`返回其文本字段的属性：

```
- (void)prevButtonPressedInCell:(MUInfoMateriaTableViewCell *)cell
{
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
    NSIndexPath *previousIndexPath = [NSIndexPath indexPathForRow:indexPath.row-1 inSection:indexPath.section];

    MUInfoMateriaTableViewCell *newCell = (MUInfoMateriaTableViewCell *)[self.tableView cellForRowAtIndexPath:previousIndexPath];
    [newCell.textField becomeFirstResponder];
} 
```

有什么方法可以“获取”一个不可见的单元格，以便我可以使其文本字段成为第一响应者？或者你能建议我另一种算法来解决这个问题吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-16T15:12:02.860

您可以通过多步骤过程解决此问题：

*   跟踪包含所需文本字段的单元格以使第一响应者
*   计算`NSIndexPath`要显示的单元格并调用`[self.tableView scrollToRowAtIndexPath:atScrollPosition:animated:]`以将其显示在视图中
*   实现在所需单元格变得可见并且匹配所需单元格或索引路径时`tableView:willDisplayCell:forRowAtIndexPath:`调用它`becomeFirstResponder`

最后一步很重要，因为`becomeFirstResponder`如果接收者不是任何窗口的子视图，调用不会做任何事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-16T15:09:45.980

通过滚动表格视图使单元格可见，使用`scrollToRowAtIndexPath:atScrollPosition:animated:`.

例如

```
- (void)prevButtonPressedInCell:(MUInfoMateriaTableViewCell *)cell
{
    NSIndexPath *indexPath = [self.tableView indexPathForCell:cell];
    NSIndexPath *previousIndexPath = [NSIndexPath indexPathForRow:indexPath.row-1 inSection:indexPath.section];

    [self.tableView scrollToRowAtIndexPath:previousIndexPath atScrollPosition:UITableViewScrollPositionTop animated:YES];

    MUInfoMateriaTableViewCell *newCell = (MUInfoMateriaTableViewCell *)[self.tableView cellForRowAtIndexPath:previousIndexPath];
    [newCell.textField becomeFirstResponder];
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-16T15:48:58.960

> 问题是 -cellForRowAtIndexPath: 方法仅在单元格可见时才返回单元格。

那是因为当其行不可见时，该单元格不存在。UITableView 只保留绘制表格所需的那些单元格。这就是滚动表格时收到大量`-tableView:cellForRowAtIndexPath:`消息的原因——表格要求其数据源提供它没有的单元格。

如果您想使用当前的方法，您需要滚动表格，以便将要编辑的行变得可见，如 Gabriele Petronella 的回答所示。

# mysql - 我在创建视图时在列上得到 NULL - 使用函数填充 NULL 列

> ID：15911515
> 
> 赞同：0
> 
> 时间：2013-04-09T20:08:23.117
> 
> 标签：mysql, views

**编辑：请在下面查看我的编辑**

根据我之前在这里提出的问题[link](https://stackoverflow.com/questions/15891993/create-a-view-with-column-num-rows-mysql)，我决定创建一个变量和一个函数来返回该变量并在 create view 语句中使用该函数。

因此，我将变量从零开始：

```
SET @auxvar := 0; 
```

然后我声明函数：

```
create function auxfunc() 
returns INTEGER DETERMINISTIC NO SQL return @auxvar+1; 
```

然后我做：

```
CREATE OR REPLACE VIEW vwaux (mac, ip, num_row) 
AS SELECT testing.mac, testing.ip, auxfunc() AS row_number

FROM testing

order by ip; 
```

但是生成的视图有以下数据：

```
|    mac   |      ip      | row_number |
----------------------------------------
| s23Ssad2 | 192.168.1.1  |   NULL     |
| sd57shgd | 192.168.1.88 |   NULL     |
| adfsfy65 | 192.168.1.91 |   NULL     |
| at56ss34 | 192.168.1.92 |   NULL     | 
```

依此类推......但我期待的是1、2、3、4......它有NULL。关于如何修复这个 NULL 的任何想法？

**编辑部分： ------------------**

我已经设法摆脱了 NULL 但仍然没有达到我需要去的地步。我将函数更改为接受输入参数，并在函数内部将其递增一个单位。

这是新功能：

```
CREATE FUNCTION auxfunc(param INT) RETURNS int(11)
    NO SQL
    DETERMINISTIC
begin
set param = param +1;
return param;
end 
```

然后我将视图创建为：

```
CREATE OR REPLACE VIEW vwaux (mac, ip, num_row) 
AS SELECT testing.mac, testing.ip, auxfunc(0) AS row_number

FROM testing

order by ip; 
```

但是我得到的不是NULL，而是'1'。像这样：

```
|    mac   |      ip      | row_number |
----------------------------------------
| s23Ssad2 | 192.168.1.1  |   1        |
| sd57shgd | 192.168.1.88 |   1        |
| adfsfy65 | 192.168.1.91 |   1        |
| at56ss34 | 192.168.1.92 |   1        | 
```

还是不是1、2、3、4、5、6……

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:24:11.990

mysql 函数不通过引用获取参数。您的本地函数无法更改变量的全局值。您可以改为使用 row_number 作为 auto_increment 字段定义一个临时表，并将您的查询选择到该表中：

```
drop table if exists __temp;
create table __temp (mac text, ip text, row_number integer primary key auto_increment);
insert into __temp (mac, ip) select testing.mac, testing.ip;
select * from __temp; 
```

# c++ - 退出前是否保证标准输出自动刷新？它是如何工作的？

> ID：15911517
> 
> 赞同：15
> 
> 时间：2013-04-09T20:08:27.073
> 
> 标签：c++, c, stdout, flush, autoflush

这是代码（有效的 C 和 C++）

```
#include <stdio.h>

int main() {
    printf("asfd");
    // LINE 1
    return 0;
} 
```

如果在第 1 行中我输入了 segfaulting 表达式，程序就会崩溃而不打印任何东西（如预期的那样）。

但是为什么上面的代码打印“asdf”并且在没有刷新缓冲区的情况下不退出？引擎盖下是什么，为什么它会按预期工作？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-04-09T20:22:00.113

这是通过 C++ 语言规范中的这两个部分完成的：

> **[基本.start.main]**
> 
> 中的 return 语句`main`具有离开主函数并`exit`以返回值作为参数进行调用的效果。

和

> **[lib.support.start.term]**
> 
> 该函数`exit`在本国际标准中具有其他行为：
> 
> *   ...
> *   接下来，刷新所有具有未写入缓冲数据的打开的 C 流。
> *   ...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-09T21:06:41.003

通常，返回 from`main`不是程序的结束，也不是`main`开始的入口。

通常，为您的程序创建最终可执行文件的链接器会将某个位置（可能命名为`start`）标记为开始执行的位置。当操作系统加载你的程序并开始执行它时，它会在这个地方开始执行。那里有设置环境的代码：创建堆栈，设置流状态等。然后这段代码调用`main`.

返回时`main`，它返回到这个特殊代码。然后，该代码执行 C 或 C++ 程序结束时所需的各种清理工作，如[本答案](https://stackoverflow.com/a/15911747/298225)中所述。

如果一个程序突然终止，这个最终代码可能不会被执行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T20:20:42.123

`main()`退出时，所有打开的流都将关闭...以包含`stdout`. 关闭打开的流会刷新`stdout`，并且您写入缓冲区的内容会在有或没有换行符的情况下提交。

# c++ - 指向二维矩阵语法的指针

> ID：15911519
> 
> 赞同：0
> 
> 时间：2013-04-09T20:08:30.407
> 
> 标签：c++, arrays, pointers, syntax

抱歉，但我对 c++ 还是很陌生 - 继上一个问题[Aliasing vector correct](https://stackoverflow.com/questions/15908172/aliasing-vector-correctly)之后，如何`(*M)[i][j]`和`*(M[i][j])`不同（其中 M 是指向整数指针数组的指针）？

据我所知，似乎前者等同于`*(*((*MPtr) + i) + j))`，后者等同于`*(*(*(MPtr + i) + j))`（其中 MPtr 是指向 M 的指针）。但是，我不确定 (MPtr + i) 的含义 - 我应该如何解释这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:14:52.703

```
(M*)(i][j] 
```

这是一个语法错误（实际上是两个）。如果你的意思是

```
T (*M)[i][j] 
```

相反，这是一个指向`i x j`类型元素数组的指针的声明`T`。相比之下，

```
(*M)[i][j] 
```

就其本身而言，是一个表达式，其中`M`要么是指向至少二维数组的指针，要么是指向指向指针的指针的指针。然后，`M`取消引用，并分别对结果数组**或**双指针进行索引。

同样，表达式

```
*(M[i][j]) 
```

仅当`M`是指针数组（或任何重载的类）数组时才有效，这意味着“取消引用作为数组第 th 元素的`operator*`指针”。`[i][j]``M`

编辑：索引似乎错误的原因是（假设它`M`是一个指向二维数组的指针）：

```
(*M)[i][j] = M[0][i][j] 
```

所以这是`[i][j]`数组的第 th 个元素（如预期的那样）。相比之下，

```
*(M[i][j]) = M[i][j][0] 
```

`M`当指针仅指向一个数组时这是错误的（读取过去的数组边界会调用未定义的行为）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:28:34.627

当你有一个数组时，计算机会存储一个指向数组开头的指针。那是Mptr。如果你写 Mptr + i 就是要翻译成，Mptr 的内存地址 + 你的 Mptr 类型的大小 * i。

你写的sintax是错误的，因为你取消引用不是内存地址的M[i][j]，除了如果你写*（M[i]）而不是*M[i]，我认为*具有更高的优先级，因此在第一种情况下，M + i 被解除引用并在第二次被重新引用，M 首先被解除引用，然后添加 i 并再次被解除引用 * ((*M) + i)，这个相反的顺序将导致你的 i 表现像一个j。以您认为更具可读性的方式编写代码，所以不要像这样 * (* (* (MPtr + i) + j))。

# cassandra - 与 Queryslice.setrange 混淆

> ID：15911520
> 
> 赞同：0
> 
> 时间：2013-04-09T20:08:38.457
> 
> 标签：cassandra, hector

我是卡桑德拉和赫克托的新手。现在我正在尝试检索我存储在 cassandra 中的一些数据。有很多列，其中一些有前缀。

column1 column2 column3 prefix1_prefix2_column3 prefix1_prefix2_column4 ....等等。

现在我想获取所有带有 prefix1_prefix2_ 的列

但是，我得到的比我想要的要多，其他一些列也被退回。

CF比较器是bytestype，我也试过utf8类型，不行。

以下是我的代码，

```
SliceQuery<UUID, String, ByteBuffer> query = HFactory.createSliceQuery(
                keyspace, UUIDSerializer.get(), stringSerializer,
                ByteBufferSerializer.get());
        String columnPrifx = "prefix1_prefix2";
        query.setKey(keyuuid).setColumnFamily("UserLogin");

    query.setRange(columnPrifx, columnPrifx, false, Integer.MAX_VALUE);
    //query.setRange(columnPrifx, null, false, Integer.MAX_VALUE);
            //i also tried null above
    ColumnSliceIterator<UUID, String, ByteBuffer> iterator = new ColumnSliceIterator<UUID, String, ByteBuffer>(
            query, null, "\uFFFF", false);

    while (iterator.hasNext()) {

        HColumn<String, ByteBuffer> c = iterator.next();
        System.out.println(c.getName());

    } 
```

所以，就这么多，我得到的专栏比我预期的要多……任何人都可以帮助我吗？非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-21T13:00:07.433

生成键时不要连接字符串，尝试将列名拆分为复合键，如“prefix1_prefix2_”和“column3”。现在，如果您获取如下所示的数据，您将获得结果

```
Composite startRange = new Composite();
startRange.addComponent(0, "prefix1_prefix2_",Composite.ComponentEquality.EQUAL);

Composite endRange = new Composite();
endRange.addComponent(0, "prefix1_prefix2_",Composite.ComponentEquality.GREATER_THAN_EQUAL);

query.setRange(startRange, endRange, false, Integer.MAX_VALUE); 
```

# php - php - 黑色菱形问号问题

> ID：15911526
> 
> 赞同：0
> 
> 时间：2013-04-09T20:08:51.070
> 
> 标签：php, mysql, encoding, utf-8, pdo

好的。我搜索了所有可能的方法。但这一个仍然让我退缩。

我正在使用 PDO 从 MySQL 获取数据。MySQL 数据具有类似`ä`. 我只是使用 PDO 运行查询并`json_encode`生成结果数组。编码后，我`strip_tag`。

当我打印数组时，我仍然看到黑色菱形问号字符。�. `var_dump`显示相同的菱形标记。

我的 PDO 具有以下设置：

```
 PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8" 
```

在 JSON 响应中，我得到`null`了具有此字符的字符串。

我试过了`utf8_encode`。它不能解决问题。`utf8_encode(json_encode($results))`

我试过了`iconv("UTF-8", "ISO-8859-1", strip_tags(json_encode($results)))`。没运气。

数据库显示正确的字符`ä`

我现在完全没有想法了。

**更新：**

这解决了我的问题。

将其更改为：

```
 PDO::MYSQL_ATTR_INIT_COMMAND => "SET NAMES utf8" 
```

至

```
 PDO::MYSQL_ATTR_INIT_COMMAND => "SET CHARACTER SET 'utf8'" 
```

它现在工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:25:23.183

黑钻是浏览器问题。数据库使用简单的问号。
看来您已经从数据库中获取了错误的数据。但是，设置不正确的 utf 是非常棘手的。你需要检查一切

1.  如果您的表格标有 utf8 字符集
2.  如果您的数据确实以 utf 编码（未标记但确实编码）
3.  如果您的服务器在 Content-type 标头中发送正确的字符集。

查看从浏览器菜单中选择不同字符集的页面也很有用。

**但首先你必须擦除你尝试过的所有随机动作的任何痕迹**，所有这些不同的编码、解码和东西。只是从数据库中直接输出。否则你永远不会解决问题

# file-upload - jsf 2：使用 Tomahawk 在 ManagedBean 中 UploadedFile 为空

> ID：15911527
> 
> 赞同：0
> 
> 时间：2013-04-09T20:08:57.830
> 
> 标签：file-upload, jsf-2, tomahawk

我按照BalusC的一步一步教程做了：[JSF 2.0 File upload](https://stackoverflow.com/questions/5418292/jsf-2-0-file-upload)

但是`UploadedFile`当我单击`commandButton`.

网页.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_3_0.xsd" version="3.0">
<display-name>web</display-name>
<servlet>
    <servlet-name>Faces Servlet</servlet-name>
    <servlet-class>javax.faces.webapp.FacesServlet</servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
</servlet-mapping>

<filter>
    <filter-name>MyFacesExtensionsFilter</filter-name>
    <filter-class>org.apache.myfaces.webapp.filter.ExtensionsFilter</filter-class>
</filter>
<filter-mapping>
    <filter-name>MyFacesExtensionsFilter</filter-name>
    <servlet-name>Faces Servlet</servlet-name>
</filter-mapping>
.....some <context-param> generated automatically
</web-app> 
```

网页：

```
<h:form id="register_doctor_form" encrypt="multipart/form-data">
    <table>
        <tr>
            <td><h:outputText value="&#160;&#160;Image"></h:outputText></td>
            <td>
                <t:inputFileUpload value="#{DoctorRegisterBean.image}"></t:inputFileUpload>
            </td>
        </tr>
        <tr>
            <td><h:outputText id="submit_message" value="#{DoctorRegisterBean.message_submit}"></h:outputText></td>
            <td id="last_td">
                <h:commandButton class="button" value="Create Doctor" action="#{DoctorRegisterBean.registerDoctor}">
                    <f:ajax execute="register_doctor_form" render="submit_message"></f:ajax>
                </h:commandButton>
            </td>
        </tr>
    </table>
</h:form> 
```

我还阅读了这篇文章：[UploadedFile is null when submit jsf upload request with Tomahawk](https://stackoverflow.com/questions/10620828/uploadedfile-is-null-when-submit-jsf-upload-request-with-tomahawk)，但我的表单没有嵌套。

`ManagedBean`：

```
public class DoctorRegisterBean implements Serializable{
    private UploadedFile image;
    public void registerDoctor() {
        byte[] imageBytes = image.getBytes();
        Blob blob = new SerialBlob(imageBytes);
    }
} 
```

这里`image`是NULL。那么这段代码有什么问题呢？

我在tomcat下使用.war文件运行这个项目，当我点击时给出错误信息`commandButton`，这里是错误信息：

```
javax.faces.el.EvaluationException: javax.el.ELException: /admin_doctorregister.xhtml at line 124 and column 115 action="#{DoctorRegisterBean.registerDoctor}": java.lang.NullPointerException
at javax.faces.component._MethodExpressionToMethodBinding.invoke(_MethodExpressionToMethodBinding.java:96)
at org.apache.myfaces.application.ActionListenerImpl.processAction(ActionListenerImpl.java:100)
at javax.faces.component.UICommand.broadcast(UICommand.java:120)
at javax.faces.component.UIViewRoot._broadcastAll(UIViewRoot.java:937)
at javax.faces.component.UIViewRoot.broadcastEvents(UIViewRoot.java:271)
at javax.faces.component.UIViewRoot._process(UIViewRoot.java:1249)
at javax.faces.component.UIViewRoot.processApplication(UIViewRoot.java:675)
at org.apache.myfaces.lifecycle.InvokeApplicationExecutor.execute(InvokeApplicationExecutor.java:34)
at org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:171)
at org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
at javax.faces.webapp.FacesServlet.service(FacesServlet.java:189)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.myfaces.webapp.filter.ExtensionsFilter.doFilter(ExtensionsFilter.java:357)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(Unknown Source)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)
at java.lang.Thread.run(Unknown Source)
Caused by: javax.el.ELException: /admin_doctorregister.xhtml at line 124 and column 115 action="#{DoctorRegisterBean.registerDoctor}": java.lang.NullPointerException
at org.apache.myfaces.view.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:95)
at javax.faces.component._MethodExpressionToMethodBinding.invoke(_MethodExpressionToMethodBinding.java:88)
... 29 more
Caused by: java.lang.NullPointerException
at edu.upenn.cis.rtg.ohc.web.DoctorRegisterBean.registerDoctor(DoctorRegisterBean.java:134)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.apache.el.parser.AstValue.invoke(AstValue.java:278)
at org.apache.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:274)
at org.apache.myfaces.view.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:83)
... 30 more 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T04:38:43.253

```
<h:form id="register_doctor_form" encrypt="multipart/form-data"> 
```

应该是问题

```
<h:form id="register_doctor_form" enctype="multipart/form-data"> 
```

# c# - 在 C#/.NET 环境中对输入进行全局验证？

> ID：15911531
> 
> 赞同：1
> 
> 时间：2013-04-09T20:09:17.860
> 
> 标签：c#, .net

我对 C# 还是很陌生，我知道这在 VBA（我的“首选”语言）中很容易。我有一堆数据输入对象（文本/数字/日期），我希望能够验证输入对于该字段是否合乎逻辑。我不希望在文本应该在的地方输入日期，我不希望在日期应该在的地方输入整数，等等......

我发现此代码检查输入的日期是否为有效日期。但是，我对这个函数应该在 C#/.NET 应用程序中的哪个位置感到困惑，并且对如何从我的一个页面调用该函数感到困惑。任何帮助表示赞赏。目前我在 Site.Master.cs 中有它，这听起来是合适的地方。我应该声明，我希望能够将此验证放在一个地方，而不是放在每个表单上，因为我有 10 个表单，上面有数据输入控件。

```
static bool IsValidSqlDateTimeNative(string someval)
{
    bool valid = false;
    DateTime testDate = DateTime.MinValue;
    System.Data.SqlTypes.SqlDateTime sdt;
    if (DateTime.TryParse(someval, out testDate))
    {
        try
        {
            // take advantage of the native conversion
            sdt = new System.Data.SqlTypes.SqlDateTime(testDate);
            valid = true;
        }
        catch (System.Data.SqlTypes.SqlTypeException ex)
        {
            // no need to do anything, this is the expected out of range error
        }
    }

    return valid;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:14:08.067

为什么不添加一个新类并将其作为静态方法，以便可以从应用程序的任何位置调用它？

例如：

```
 public static class DateTimeHelpers
 {          
      static bool IsValidSqlDateTimeNative(string someval)
      {
           bool valid = false;
           DateTime testDate = DateTime.MinValue;
           System.Data.SqlTypes.SqlDateTime sdt;
           if (DateTime.TryParse(someval, out testDate))
           {
               try
               {
                   // take advantage of the native conversion
                   sdt = new System.Data.SqlTypes.SqlDateTime(testDate);
                   valid = true;
               }
               catch (System.Data.SqlTypes.SqlTypeException ex)
               {
                   // no need to do anything, this is the expected out of range error
               }
           }
           return valid;
       }
 } 
```

然后从应用程序中的任何位置调用，如下所示：

```
 bool result = DateTimeHelpers.IsValidSqlDateTimeNative(mystring); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:28:06.660

```
public static class Validation
{
    public static bool IsValidSqlDateTimeNative(string someval)
    {
        DateTime testDate;
        return DateTime.TryParse(someval, out testDate) && 
               testDate >= SqlDateTime.MinValue.Value;
    }
} 
```

用法：

```
var isValidSqlDate = Validation.IsValidSqlDateTimeNative("1200-01-01"); 
```

另外值得一提的是，您可以在数据库中使用数据类型[DateTime2](http://msdn.microsoft.com/en-us/library/bb677335.aspx)，它具有更大的日期范围（与 .net`DateTime`类型相同）和更大的小数精度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:15:39.120

在 .NET 中创建网页与大多数脚本语言之间的一个很大区别在于，所有内容通常都被编译成一个大（胖）二进制文件。这通常相当于拥有一个`include.<lang>`包含所有内容的单曲，然后将其包含到您的页面中。这实际上意味着，您在 C#/.NET 中通常创建的类是 .cs 文件（即不在页面/主文件中），并且您只需从页面/中调用所述文件中定义的函数/类主文件。

此外，就 C# 的面向对象结构而言，您不能只在全局命名空间（或任何命名空间）中创建函数，您必须创建一个类，然后让您的函数存在于该类中。

# iphone - iPhone css悬停应该回到正常的“取消悬停”

> ID：15911532
> 
> 赞同：2
> 
> 时间：2013-04-09T20:09:22.953
> 
> 标签：iphone, css, hover, back, mode

我正在为 iPhone 开发一个网络应用程序……</p>

我用以下 CSS 制作了一个“按钮”，当你点击它（：悬停）它会改变，但是当你释放它时，它应该回到正常模式......我该怎么做？

```
.button {
height:40px;
width:95px;
margin-top:10px;
float:left;
overflow:hidden;
margin-left:14px;
background-image: -webkit-linear-gradient(bottom, #558544 0%, #5EA83D 100%);
border-radius: 12px;
border-style:solid;
border-color:#558544;
border-width:5px; }

.button:hover {
    background-image: -webkit-linear-gradient(bottom, #5EA83D 0%, #558544 100%);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:14:02.130

CSS 中的悬停不是那样工作的。相反，您将不得不使用特定于触摸的 javascript ( `ontouchstart`and `ontouchend`) 并向代表“按下”状态的按钮添加一些类。

例如像这样的 HTML

```
<div class="button" ontouchstart="buttonTouchStart(event)" ontouchend="buttonTouchEnd(event)" ></div> 
```

和像这样的javascript

```
var buttonTouchStart = function(e) {
    var t = e.target;
    t.className = "button down";
}

var buttonTouchEnd = function(e) {
    var t = e.target;
    t.className = "button";
} 
```

您可能还应该使用媒体查询来禁用 Javascript 所针对的设备的悬停 CSS。

# windows - diff -r 用于 Windows？

> ID：15911535
> 
> 赞同：0
> 
> 时间：2013-04-09T20:09:32.487
> 
> 标签：windows, diff

要查找两个目录结构之间的文件差异，我通常会运行

```
diff -r dir1/ dir2/ 
```

我背负着 Windows - 有什么方法可以轻松地做到这一点 Windows 或者我应该只获得 Cygwin？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:25:21.387

我使用一个名为 FreeFileSync 的工具。顾名思义，它是免费的 :) 它在视觉上比较目录方面做得很好，除非你告诉它同步，否则它不会移动任何文件。

它还具有便携式版本，因此您无需安装它。

[自由文件同步](http://sourceforge.net/projects/freefilesync/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:12:16.827

[Beyond Compare](http://www.scootersoftware.com/moreinfo.php)做得很好。虽然它不是免费的（但它是 nagware，如果我记得的话）。

您可以使用 cygwin 或 mingw，但与 unix 变体相比，它们的速度非常慢，我相信这是由于（可能是有意地）在 Windows 上削弱了 posix 实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:14:18.857

如果你有windiff，你可以尝试：

```
 windiff -T dir1 dir2 
```

此外，您可以下载 Gnu utils for windows 以运行到传统的 Unix 差异（不需要 Cygwin）

[http://unxutils.sourceforge.net/](http://unxutils.sourceforge.net/)

# c# - Excel.Chart.Export 不起作用

> ID：15911536
> 
> 赞同：4
> 
> 时间：2013-04-09T20:09:35.683
> 
> 标签：c#, excel

我有一个工作表上有多个图表的 excel 文件。我从excel中获取图表并将其保存到图片中。

我的代码：

```
workSheet = workBook.Sheets[1] as Excel._Worksheet;
Excel.ChartObjects chartObjects =(Excel.ChartObjects)workSheet.ChartObjects(Type.Missing);
int chartCount = chartObjects.Count;
for (int j = 1; j <= chartCount; j++)
{
     Excel.ChartObject chart = (Excel.ChartObject)chartObjects.Item(j);
     path = Path.Combine(Application.StartupPath, @"Img\" + chart.Chart.Name + ".bmp");
     chart.Chart.Export(path, "BMP", true);
} 
```

但只导出空白图片。

请帮我

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-06T15:58:08.783

在调用 .Export 时导出至少部分在屏幕上不可见的图表会导致出现空白图像。

尝试在导出之前添加一行代码来激活要导出的图表（我遇到了同样的问题，这对我有用）：

```
Excel.ChartObject chart = (Excel.ChartObject)chartObjects.Item(j);
path = Path.Combine(Application.StartupPath, @"Img\" + chart.Chart.Name + ".bmp");
chart.Activate(); //New line
chart.Chart.Export(path, "BMP", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-19T20:27:44.530

我遇到了同样的问题并尝试了 .Activate 技巧，但这没有帮助。基于图表需要至少部分可见的评论，我在 .Export 行之前尝试了一个简单的延迟循环：

```
For i = 1 to N
  DoEvents
Next i 
```

这解决了这个问题。通过一些实验，我发现 N >= 3 有效，但是如果 N = 1 或 2，或者如果我取消循环，则代码返回到输出空白图片。我不明白，但我想我会传递我的观察结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-04-28T12:46:53.097

谢谢@Xiaofu，您在导出前关于图表激活的信息对我很有帮助，因为我花了将近一天的时间来为我的小 Python 项目寻找解决方案。干杯。

对于正在寻找 Python 脚本版本以将 Excel 图表导出为 GIF 或 PNG 格式的任何人，以下是对我有用的代码：

```
# Python function to export an Excel chart to a GIF image format
# Ref: https://stackoverflow.com/questions/11110752/export-charts-from-excel-as-images-using-python
def ChartExport(cwd, fileName):
    app = win32.Dispatch('Excel.Application')
    workbook_file_name = cwd + fileName
    workbook = app.Workbooks.Open(Filename=workbook_file_name)

    # WARNING: The following line will cause the script to discard any unsaved changes in your workbook
    app.DisplayAlerts = False

    i = 1   # There are multiple charts on the worksheet. So using a number suffix to add the output gif filename
    for sheet in workbook.Worksheets:
        for chartObject in sheet.ChartObjects():
            #print('i = ', i, ' -- ', sheet.Name + ':' + chartObject.Name)
            chartObject.Activate()  # This line was added after finding exporting problem with 2nd and 3rd charts. Thanks Xiaofu Ref: https://stackoverflow.com/questions/15911536/excel-chart-export-not-working
            chartObject.Chart.Export(cwd + '\\chart' + str(i) + '.gif')  # Export chart to a gif file format
            i += 1

    workbook.Close(SaveChanges=False, Filename=workbook_file_name)
    return 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-05T16:08:01.357

我刚刚遇到了这种确切的情况。不幸的是，使用 chart.Activate() 对我不起作用。然而，关于图表必须部分可见的部分给了我一个关于该做什么的线索。我刚刚最大化了窗口，使我的所有图表都可见，并且导出再次开始工作。

```
Excel.WindowState = Microsoft.Office.Interop.Excel.XlWindowState.xlMaximized;    
Excel.ChartObject chart = (Excel.ChartObject)chartObjects.Item(j);
path = Path.Combine(Application.StartupPath, @"Img\" + chart.Chart.Name + ".bmp");
chart.Activate(); //New line
chart.Chart.Export(path, "BMP", true); 
```

# php - 上传文件并发送到电子邮件

> ID：15911537
> 
> 赞同：0
> 
> 时间：2013-04-09T20:09:43.973
> 
> 标签：php, email-attachments

这可能是一个愚蠢的问题，但我只想知道我是否有一个表单，允许用户上传最多 3 个图像文件并将这些图像通过电子邮件发送给我到外部服务器。问题是，如果我只检查扩展名以确保它是我想要的文件类型而不检查实际文件类型，这会对我的服务器造成任何安全问题吗？我知道上传文件必须先将文件临时保存到我的服务器。任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:19:16.543

文件扩展名绝对不是文件类型的可靠指标——任何文件类型都可以用任何扩展名命名。类似的东西`libmagic`可以帮助您更好地确定文件类型，如果这是您想要做的。

也就是说，只要您的服务器不执行发送给它的任何文件，并且仅充当邮件程序，我认为用户上传恶意文件不会有任何风险，至少不会向服务器本身上传。服务器配置的其他方面可能会使服务器上存在可执行文件成为问题，但邮件程序本身并不是一个特别的风险。

当然，设置任何允许某人从 Web 发送邮件的应用程序都需要一定级别的授权安全性，以避免将您的应用程序用作垃圾邮件机制。如果邮件只发送给您自己，那么您是唯一会收到垃圾邮件的人，但它仍然可能相当烦人。

# uml - 绘制java类的Uml图

> ID：15911539
> 
> 赞同：0
> 
> 时间：2013-04-09T20:09:54.727
> 
> 标签：uml

我尝试在运行时在包中绘制 java 类的 Uml 图。我正在使用 İntelj İdea。 **如何用java代码绘制Uml图？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T13:49:23.293

IntelliJ IDEA 支持与 Java 代码之间的 UML。在此处阅读： [UML 设计器](http://www.jetbrains.com/idea/features/uml_designer.html)

这回答了你的问题了吗？

# ruby-on-rails - 更改会话的 ActiveRecord 时区

> ID：15911540
> 
> 赞同：1
> 
> 时间：2013-04-09T20:09:55.637
> 
> 标签：ruby-on-rails, activerecord, timezone

我一直在尝试使用 Time.zone 方法更改用户会话的时区。我在执行 Time.zone.now 时得到正确的日期和时间，但是当我使用 ActiveRecord::Base.connection.select_all 执行选择查询时，结果中的日期时间列始终采用 UTC。我需要做什么才能使所有选择查询返回使用 Time.zone 方法设置的时区中的数据，而不更改视图？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:26:00.747

使用 ruby​​ 将时间转换为本地时区是最简单的。

```
Time.now.in_time_zone() 
```

就这样使用它。

```
Time.now.in_time_zone('Alaska') # => Fri, 31 Dec 1999 15:00:00 AKST -09:00 
```

您可以为函数提供时区字符串或 UTC 偏移量

[http://apidock.com/rails/Time/in_time_zone](http://apidock.com/rails/Time/in_time_zone)

# javascript - 删除时出现奇怪的浏览器行为，我该怎么做才能解决这个问题？

> ID：15911548
> 
> 赞同：0
> 
> 时间：2013-04-09T20:10:43.080
> 
> 标签：javascript, internet-explorer, internet-explorer-8, contenteditable, nicedit

**TLDR**
在 IE8 中打开它[http://jsbin.com/ucahor/1/edit#/ucahor/2/edit](http://jsbin.com/ucahor/1/edit#/ucahor/2/edit)
单击空白行并立即按`Backspace`。2行被删除。
单击空白行，稍等片刻，然后按`Backspace`。1 行被删除。
我能做些什么来解决这个问题吗？

**全文**
我正在尝试为我的 Web 应用程序制作最好的富文本编辑器。我采用了[NicEdit](http://nicedit.com)并添加了许多功能。我使用 nicedit 是因为它是我测试的 9 中唯一满足这些要求的编辑器。

*   在 IE6 中工作
*   可以从Word粘贴
*   编号和项目符号
*   纯 Javascript（所以我们可以很容易地修改它）
*   下载的文件数量少
*   可以设置光标位置
*   可以全屏
*   可以处理大文件（1500段粘贴）

我添加到我的 NicEdit 实现中的一件事是为我的用户编写的常见报告插入标题。一个问题是我需要一种在标题之间有空行的方法。我不能使用`<br/>`标签，因为它们不能很好地插入列表，而且我不能使用`<div>`标签，因为 Internet Explorer 在内容可编辑 div 内的 div 存在问题。

这让我可以使用`<p>`标签来指示新行。

但是我不能只使用`<p></p>`它，它是用户代理忽略空`P`标签的 HTML 标准。

目前我的用户正在使用，`<p>&nbsp;</p>`但这会使每一行缩进一个空格，而新行没有空格。

我发现有一个`Zero Width Space`字符`&#8203;`可以让我的`P`标签被渲染并且每行没有空格！

我的新`<p>&#8203;</p>`功能很好，除非用户正在删除一行，否则第一个退格键似乎什么都不做。

所以我绑定到我的 keydown 事件以进行退格。它检查光标之前的字符，如果是我的`Zero Width Space`字符，我将其空白并让退格键正常继续。

这有效，除非您单击要删除的行并快速单击退格键。该操作会导致 2 行被删除。

您可以加载您的 IE8 并在此处试用。[http://jsbin.com/ucahor/1/edit#/ucahor/2/edit](http://jsbin.com/ucahor/1/edit#/ucahor/2/edit)

# android - Android 内存管理 - 我的应用是否健康？

> ID：15911551
> 
> 赞同：2
> 
> 时间：2013-04-09T20:10:57.203
> 
> 标签：android, memory, heap-memory

我真的是 android 开发的新手，并且创建了一个简单的应用程序，可以从互联网读取一些 rss xml 新闻提要，我有点担心内存管理，因为每次应用程序读取 xml 提要时，都会调用 GC_CONCURRENT，ddms 显示我的堆大小为 12,133Mb，我已分配 11,549Mb（95.15% 的使用率），我没有出现内存错误，我担心，因为应用程序到目前为止只有一个活动，内存使用率几乎是 100%。

我的应用程序在内存使用方面是否健康？

ps：对不起英语不好

```
04-09 17:02:58.731: D/InicioActivity(8998): Categoria: Mundo
04-09 17:02:58.762: D/dalvikvm(8998): null clazz in OP_INSTANCE_OF, single-stepping
04-09 17:02:59.255: D/dalvikvm(8998): GC_CONCURRENT freed 356K, 5% free 11879K/12423K, paused 3ms+7ms, total 30ms
04-09 17:02:59.458: D/InicioActivity(8998): Categoria: Brasil
04-09 17:02:59.505: D/dalvikvm(8998): GC_CONCURRENT freed 515K, 5% free 11831K/12423K,     paused 12ms+2ms, total 30ms
04-09 17:03:00.106: D/dalvikvm(8998): GC_CONCURRENT freed 465K, 5% free 11804K/12423K, paused 12ms+3ms, total 30ms
04-09 17:03:00.153: D/InicioActivity(8998): Categoria: Negócios
04-09 17:02:59.255: D/dalvikvm(8998): GC_CONCURRENT freed 356K, 5% free 11879K/12423K, paused 3ms+7ms, total 30ms
04-09 17:02:59.458: D/InicioActivity(8998): Categoria: Brasil
04-09 17:02:59.505: D/dalvikvm(8998): GC_CONCURRENT freed 515K, 5% free 11831K/12423K, paused 12ms+2ms, total 30ms
04-09 17:03:00.106: D/dalvikvm(8998): GC_CONCURRENT freed 465K, 5% free 11804K/12423K, paused 12ms+3ms, total 30ms
04-09 17:03:00.153: D/InicioActivity(8998): Categoria: Negócios 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:08:50.887

我以前做过一些 RSS 提要程序。由于我不知道您的代码的确切细节，我假设您实现了一些您在 google 上找到的代码。12 MB 很多，但我几乎不认为这与 rss 提要本身有任何关系，因为在网上找到的大多数代码都写得非常好（如果不是，我真的怀疑它们会通过使用简单的 xml 解析器）。

首先考虑几个方面：

1.  rss 阅读器的正常内存使用量约为 4 MB（至少对于我的每个解析器都是如此）

2.  检查您的程序源代码，看看您是否有任何其他需要额外内存的代码（浏览器、纹理、图片、图形引擎）

3.  您尝试解析的 xml 大小是否至少为 1MB ？？？如果是这样，我建议您找到其他方法来解析它。
4.  由于您是新来的，我建议您从现在开始在提问时添加一些示例代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:18:33.170

这是当前分配的堆的 5%。如果需要，它会增长，直到最大堆大小，之后你会得到`OutOfMemoryError`s。

在 XML 解析方面，一般的建议是使用`XmlPullParser`，因为它是 Android 框架自带的，对内存的要求不高。使用基于事件的解析器（相对于 DOM 解析器）进行解析比较困难，但好处是您不会在内存中保存文档的完整表示。

# d3.js - d3js 用于折线图的平滑线

> ID：15911554
> 
> 赞同：3
> 
> 时间：2013-04-09T20:11:06.740
> 
> 标签：d3.js, linechart

我目前正在研究一个 d3js 图表，该图表根据刷时间窗口选择进行更新。我遇到的问题是主情节上的线条看起来不连贯。我已经更改了插值以使用不同的类型，并使用了张力属性，但我似乎无法获得平滑的线条。有没有人有任何想法？

```
var data = new TLSampleDataContainer()
,   keyToEntries = data.keyToEntries
,   keys = data.keyset
,   pageSize = data.pageSize;

// Visual attributes 
var tl = {
        times : data.timeEntries,       
        xTicks : function(start, end){
            var min = start.getTime()
            ,   max = end.getTime()
            ,   range;

            if(max-min <= CONSTANTS.TIME.HOURS.SCALE_FACTOR){
                var totalHours = d3.round((max-min)/3600000);
                var scale = Math.ceil(totalHours/12);
                return d3.time.hours(start, end, scale);
            }

            if(max-min <= CONSTANTS.TIME.DAYS.SCALE_FACTOR){
                var totalDays = d3.round((max-min)/86400000);
                var scale = Math.ceil(totalDays/7);
                range = d3.time.days(start, end, scale);
                return range;
            }

            if(max-min <= CONSTANTS.TIME.WEEKS.SCALE_FACTOR){
                var totalWeeks = d3.round((max-min)/(86400000 * 7));
                var scale = Math.ceil(totalWeeks/4);
                range = d3.time.weeks(start, end, scale);
                return range;

            }

            if(max-min <= CONSTANTS.TIME.MONTHS.SCALE_FACTOR){
                range = d3.time.months(start, end);
                return range;
            }

            return d3.time.years(start,end);
        },

        xTicksFormat : function(d) {
            var start = tl.xScale.domain()[0]
            ,   end = tl.xScale.domain()[1]
            ,   max = end.getTime()
            ,   min = start.getTime();

            if(max-min <= CONSTANTS.TIME.HOURS.SCALE_FACTOR) { 
                return d3.time.format('%I %p')(d);
            }

            if(max-min <= CONSTANTS.TIME.DAYS.SCALE_FACTOR) {
                return d3.time.format('%d')(d);
            }

            if(max-min <= CONSTANTS.TIME.WEEKS.SCALE_FACTOR){
                return d3.time.format('%a -week %U')(d)
            }

            if(max - min <= CONSTANTS.TIME.MONTHS.SCALE_FACTOR){
                return d3.time.format('%b')(d)
            }

            return d3.time.format('%Y')(d)          
        },

        x1Ticks: function(start, end){
            var min = start.getTime()
            ,   max = end.getTime();

            if(max-min <= CONSTANTS.TIME.HOURS.SCALE_FACTOR){
                return d3.time.days( d3.time.day.floor(start), end);
            }

            if(max-min <= CONSTANTS.TIME.DAYS.SCALE_FACTOR){
                return d3.time.weeks(d3.time.day.floor(start), end);
            }

            if(max-min <= CONSTANTS.TIME.WEEKS.SCALE_FACTOR){
                return d3.time.months(d3.time.week.floor(start), end);
            }

            if(max-min <= CONSTANTS.TIME.MONTHS.SCALE_FACTOR){
                return d3.time.years(d3.time.month.floor(start), end);
            }

            return [];
        },

        x1TicksFormat: function(d){
            var start = tl.xScale.domain()[0]
            ,   end = tl.xScale.domain()[1]
            ,   max = end.getTime()
            ,   min = start.getTime();

            if(max-min <= CONSTANTS.TIME.HOURS.SCALE_FACTOR){ 
                return d3.time.format('%a, %b %d %Y - week %U')(d);
            }

            if(max-min <= CONSTANTS.TIME.DAYS.SCALE_FACTOR){
                return d3.time.format('%a, %b %Y - week %U')(d);
            }

            if(max-min <= CONSTANTS.TIME.WEEKS.SCALE_FACTOR){
                return d3.time.format('%b %Y')(d)
            }

            return d3.time.format('%Y')(d);
        },

        drawLines: function(){
            keyToEntries.forEach(function(key, values){
                var line = d3.svg.line()
                .x(function(d){
                    return tl.xScale(d.time);    
                    })
                .y(function(d){
                    return tl.yScale(d.value);
                    })
                .interpolate("basis");

                tl.chart.append('g').attr('class', 'data ' + key)
                .append("path")
                .attr("d", line(values));
            });
        },

        //Handle Brush Event 
        onBrush: function(){
            var bext = brush.empty() ? ext2 : brush.extent();
            lc.xScale.domain(bext);
            lc.initKeys(bext);
        //  lc.yScale = d3.scale.linear().domain([0, d3.max(lc.y)]);
        //  lc.xAxis.ticks(lc.xTicks(bext[0], bext[1])).tickFormat(lc.xTicksFormat(bext[0], bext[1]));
        //  lc.chart.select('.y.axis.linechart').call(lc.yAxis)
            lc.chart.select('.axis.timescale').call(lc.xAxis);
            lc.drawLines();

        } 

    };

var lc = {
    timeScale : function(extent){
        var start = d3.min(extent)
        ,   end = d3.max(extent)
        ,   min = start.getTime()
        ,   max = end.getTime();

        if(max-min <= CONSTANTS.TIME.HOURS.SCALE_FACTOR){
            return [d3.time.hour.floor(start), d3.time.hour.ceil(end)];
        }

        if(max-min <= CONSTANTS.TIME.DAYS.SCALE_FACTOR){
          return [d3.time.day.floor(start), d3.time.day.ceil(end)];
        }

        if(max-min <= CONSTANTS.TIME.WEEKS.SCALE_FACTOR){
            return [d3.time.week.floor(start), d3.time.week.ceil(end)];
        }

        return [d3.time.month.floor(start), d3.time.month.ceil(end)];
    },
    initKeys: function(domain){
        var start = d3.min(domain)
        ,   end = d3.max(domain)
        ,   min = start.getTime()
        ,   max = end.getTime();

        lc.idsToSelectedIntervals = d3.map();
        lc.y = [];
        keyToEntries.forEach(function(key, values){
            var selectedIntervals = []
            for(var i=0; i < values.length; i++){
                var entry = values[i];
                if(entry.time.getTime() >= min && entry.time.getTime() <= max){
                    lc.y.push(entry.value);
                    selectedIntervals.push(entry);
                    lc.idsToSelectedIntervals.set(entry.id, selectedIntervals);
                }
            }    
        });
    },

    xTicks: function(start, end){
        var min = start.getTime()
        ,   max = end.getTime();

        if(max-min <= CONSTANTS.TIME.MINUTES.SCALE_FACTOR){
            totalSeconds = d3.round((max-min)/1000);
            var scale = Math.ceil(totalSeconds/10);
            return [start, end]/d3.time.seconds(start, end, totalSeconds);
        }

        if(max-min <= CONSTANTS.TIME.HOURS.SCALE_FACTOR){
            totalMinutes = d3.round((max-min)/60000);
            var scale = Math.ceil(totalMinutes/10);
            return  [start, end] //d3.time.minutes(start, end, totalMinutes);
        }

        if(max-min <= CONSTANTS.TIME.DAYS.SCALE_FACTOR){
            var totalHours = d3.round((max-min)/(3600000));
            var scale = Math.ceil(totalHours/8);
            return d3.time.hours(start, end, scale);
        }

        if(max-min <= CONSTANTS.TIME.WEEKS.SCALE_FACTOR){
            var totalDays = d3.round((max - min)/86400000);
            var scale = Math.ceil(totalDays/12);
            return d3.time.days(start, end, scale);
        }

        if(max-min <= CONSTANTS.TIME.MONTHS.SCALE_FACTOR){
            var totalWeeks = d3.round((max-min)/86400000 *7);
            var scale = Math.ceil(totalWeeks/8);
            return d3.time.weeks(start, end);
        }

        return d3.time.months(start,end, 12);
    },

    xTicksFormat: function(d){
        var min = d3.min(lc.xScale.domain())
        ,   max = d3.max(lc.xScale.domain());

        if(max-min <= CONSTANTS.TIME.HOURS.SCALE_FACTOR){ 
            return d3.time.format('%d %X %p')(d);
        }

        if(max-min <= CONSTANTS.TIME.DAYS.SCALE_FACTOR){
            return d3.time.format('%I %p')(d);
        }

        if(max-min <= CONSTANTS.TIME.WEEKS.SCALE_FACTOR){
            return d3.time.format('%d')(d);
        }

        if(max-min <= CONSTANTS.TIME.MONTHS.SCALE_FACTOR){
            return d3.time.format('week-%U')(d);
        }

        return d3.time.format('%b %y')(d)
    },

    drawLines: function(){
        var entryset = lc.idsToSelectedIntervals.entries();
        var g = lc.chart.selectAll('g.data')
            .data(entryset, function(d){return d.key;})
            .each(function(d, i){
                 d3.select(this)
                .select('path')
                .datum(d.value)
                .attr('d', lc.line);
             });

        g.enter().append('g')
            .attr('class', function(d){return "data linechart " + d.key;})
            .append('path')
            .each(function(d, i){
                 d3.select(this)
                .datum(d.value)
                .attr('d', lc.line);
            });

        g.exit().remove();
    },

    drawGrid: function(){
        //draw the Gridlines for line chart
        lc.chart.append('g').selectAll('.gridline')
            .remove()
            .data(lc.chart.selectAll('.axis.timescale line.tick')[0])
            .enter().append('line')
            .attr('x1', function(d,i){return d.parentNode.transform.baseVal.getItem(0).matrix.e;})
            .attr('x2', function(d,i){return d.parentNode.transform.baseVal.getItem(0).matrix.e;}) 
            .attr('y1', 0)
            .attr('y2', lc.height)
            .attr('class', 'gridline');

        lc.chart.append('g').selectAll('.gridline')
            .remove()
            .data(lc.chart.selectAll('.y.axis.linechart g > line.tick')[0])
            .enter().append('line')
            .attr('y1', function(d,i){return d.parentNode.transform.baseVal.getItem(0).matrix.f;})
            .attr('y2', function(d,i){return d.parentNode.transform.baseVal.getItem(0).matrix.f;}) 
            .attr('x1', 0)
            .attr('x2', width)
            .attr('class', 'gridline');

    },

    line: d3.svg.line()
            .x(function(d){
                return lc.xScale(d.time);    
                })
            .y(function(d){
                return lc.yScale(d.value);
                })
            .interpolate("basis")

};

var  drawIntervals = function(mmap, x, y){
    var i = 0;
    var offset = .5 * y(1) + 0.5;
    mmap.forEach(function(key, values){
            var line = d3.svg.line()
            .x(function(d){
                return x(d.time);    
                })
            .y(function(d){
                return y(i) + offset;
                });

            tl.chart.append('g').attr('class', "interval data " + key)
                .append("path")
                .attr("d", line(values));

            i++;
    });
}

var CONSTANTS = {
    TIME: {
        MINUTES: {NAME:"minutes", FORMAT:'%x', SCALE_FACTOR: 3600000 * 1},
        HOURS: {NAME:"hours", FORMAT:'%x', SCALE_FACTOR: 86400000 * 1},
        DAYS : {NAME:"days", FORMAT:'%d', SCALE_FACTOR: 86400000 * 5},
        WEEKS : {NAME:"weeks", format:'%b - Week %U of %y', SCALE_FACTOR: 86400000 * 28},
        MONTHS : {NAME:"months", FORMAT:'%b %Y', SCALE_FACTOR: 86400000 * 365},
        YEARS: {NAME: "years", FORMAT:'%y', SCALE_FACTOR: 86400000 * 365* 10}
    }
}

var margin = {top:20, right:15, bottom:15, left:60}
,   width = 500 - margin.left - margin.right
,   height = 325 - margin.top - margin.bottom;

tl.height = 30;
lc.height = height - tl.height - 50;

var ext = d3.extent(tl.times);
tl.xScale = d3.time.scale().domain(ext).range([0, width]);
var ext2 = tl.xScale.domain();
lc.xScale = d3.time.scale().domain(ext2).range([0, width]);
lc.initKeys(ext2);

lc.yScale = d3.scale.linear().domain([0, d3.max(lc.y)]).range([lc.height, 0]);
tl.yScale = d3.scale.linear().domain([0, d3.max(lc.y)]).range([tl.height, 0]);

var main = d3.select('#mainWrapper')
        .append('svg:svg')
        .attr('width', width +  margin.right + margin.left + 35)
        .attr('height', height + margin.top + margin.bottom)
        .attr('class', 'chart');

main.append('defs').append('clipPath')
        .attr('id','clip')
        .append('rect')
            .attr('width', width + 100)
            .attr('height', lc.height);

lc.chart = main.append('g')
                .attr('transform', 'translate(' + margin.left + ',' + margin.top + ')')
                .attr('width', width)
                .attr('height', lc.height)
                .attr('class', 'linechart');                    

tl.chart = main.append('g')
        .attr('transform', 'translate('+ margin.left + ',' + (lc.height + 60) + ')')
        .attr('width', width)
        .attr('height', tl.height)
        .attr('class', 'mini');

//var draw Timeline xaxis
tl.xAxis = d3.svg.axis()
    .scale(tl.xScale)
    .orient('bottom')
    .ticks(tl.xTicks)
    .tickFormat(tl.xTicksFormat)
    .tickSize(6, 0, 0);

tl.x1Axis =  d3.svg.axis()
    .scale(tl.xScale)
    .orient('top')
    .ticks(tl.x1Ticks)
    .tickFormat(tl.x1TicksFormat)
    .tickSize(15, 0, 0);

lc.xAxis = d3.svg.axis()
    .scale(lc.xScale)
    .orient('bottom')
    .ticks(lc.xTicks)
    .tickFormat(lc.xTicksFormat)
    .tickSize(6,0,0);

lc.yAxis = d3.svg.axis()
    .scale(lc.yScale)
    .orient('left')
    .tickSubdivide(true)
    .tickSize(6,0,0);

tl.yAxis = d3.svg.axis()
    .scale(tl.yScale)
    .orient('left')
    .tickValues([tl.yScale.domain()[0], tl.yScale.domain()[1]])
    .tickSize(6,0,6);

lc.chart.append('g')
    .attr('transform', 'translate(-15, 0)')
    .attr('class', 'y axis linechart')
    .call(lc.yAxis);

lc.chart.append('g')
    .attr('transform', 'translate(0,' + lc.height + ')')
    .attr('class', 'axis timescale')
    .call(lc.xAxis);

tl.chart.append('g')
    .attr('transform', 'translate(0,' + tl.height + ')')
    .attr('class', 'axis date')
    .call(tl.xAxis);

tl.chart.append('g')
    .attr('transform', 'translate(0,0.5)')
    .attr('class', 'axis month')
    .call(tl.x1Axis)
    .selectAll('text')
        .attr('dx', 5)
        .attr('dy', 12);

tl.chart.append('g')
    .attr('transform', 'translate(-15, 0)')
    .attr('class', 'y axis timeline')
    .call(tl.yAxis);

//Draw Grids
lc.drawGrid();

//Initialize brush to handle events
var brush = d3.svg.brush()
    .x(tl.xScale)
    .extent(tl.xScale.domain())
    .on("brush", tl.onBrush);

tl.chart.append('g')
    .attr('class', 'x brush')
    .call(brush)
    .selectAll('rect')
        .attr('y', 1)
        .attr('height', tl.height - 1);

// draw the path for each key on the line chart.
lc.drawLines(); 
tl.drawLines(); 
```

链接到小提琴：http: [//jsfiddle.net/rbrooks/NFKkV/1/](http://jsfiddle.net/rbrooks/NFKkV/1/)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T23:17:40.263

在您已应用于整个图表的 CSS 中`shape-rendering: crispEdges`，这将禁用其中所有内容的抗锯齿，包括路径。很可能您只想禁用图表轴的抗锯齿，因此您应该使规则更具选择性。IE：

```
.chart .axis {
  shape-rendering: crispEdges
} 
```

# java - 将java游戏导出到eclipse中的可执行jar文件 - 不起作用

> ID：15911555
> 
> 赞同：1
> 
> 时间：2013-04-09T20:11:13.350
> 
> 标签：java, eclipse, jar

你好，我做了一个简单的游戏，我的精灵可以在一个很小的绿色地图上移动并且不能离开它。它有几个菜单按钮，并且在 eclipse 中完美运行。我有自己的图形，并且正在使用 LWJGL 和 slick 2d。这是我的包资源管理器在 Eclipse 中的样子：http: [//puu.sh/2x1Sx](http://puu.sh/2x1Sx) 它似乎没有在资源文件中导出我的图片。我尝试将其导出为可运行的 jar 文件和常规 jar 文件。我的清单文件中的主类为 Game.java，双击时它什么也不做。任何帮助将不胜感激:)谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:17:42.830

检查您是否正在导出 res 文件夹

为了能够导出文件夹，您需要将其添加为源文件夹

![第一步](https://i.stack.imgur.com/2JCAU.png)

之后，您将在“订购和导出”选项卡中看到该文件夹

![第二步](https://i.stack.imgur.com/FcRv6.png)

在您的游戏类中使用以下内容：

```
 new Image(Game.class.getResourceAsStream("filename"),
         "filename",
         false); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:23:08.430

我发现了一个关于如何在 Eclipse 链接中从 slick/lwjgl 项目制作 jar 文件的 youtube 视频：[http ://www.youtube.com/watch?v=K6K2d6LGvu8](http://www.youtube.com/watch?v=K6K2d6LGvu8)

# jquery - javascript/jQuery 进行多次调用 - 需要找出原因

> ID：15911557
> 
> 赞同：0
> 
> 时间：2013-04-09T20:11:16.930
> 
> 标签：jquery

我有一个通过 jQuery ajax 计算价格的脚本，我在 Firebug 控制台中注意到同一个 ajax GET 调用正在发生多次（有时是几十次）。我混合使用 javascript 和 jQuery 来启动该功能，我觉得这就是问题所在。我只是不知道更有效的方法来做到这一点。

当从菜单中选择一个值时，该函数运行。这是代码：

```
<div id="order_promo">
<select name="promo1" id="promo1" onmouseover="CalcPromo(1)">
<option value="1">Name1</option
.....
.....
</select>
</div> 
```

这是 javascript/jQuery 函数：

```
function CalcPromo(row){
      $(function(){
         $('#promo' + row).change(function(){
                //values to pass to php script for calculations

                var promo=$(this).val();
                var id=$('#item' + row).val();
                var qty=$('#qty' + row).val();
                var price=$('#price' + row).val();

                var dataString = 'prodid='+ id + '&qty=' + qty + '&price=' + price + '&promo=' + promo + '&type=promo' + '&row=' + row ; //string passed to url
                $.ajax
                ({
                    url: "includes/ajax/orders2.php", //url of php script
                    dataType: 'json', //json is return type from php script
                    data: dataString, //dataString is the string passed to the url
                    success: function(pricedata) //pricedata is the name of json array that is returned
                    {
                        //individual values from json array
                        var listprice = pricedata["price"];
                        var disc = pricedata["disc"];
                        var total = pricedata["total"];
                        var tax = pricedata["tax"];
                        var grand = pricedata["grand"];

                        //set each value using text box id value using javascript val() function
                        $('#price' + row).val(listprice);
                        $('#discprice' + row).val(disc);
                        $('#itemprice' + row).val(total);
                        $("#tax").val(tax);
                        $("#grandtotal").val(grand);
                     },
                     error: function(request, status, error)
                     {
                         alert(request.responseText);
                     }
            });

        });

    });
    } 
```

当从菜单“promo1”中选择一个值时，该功能应该启动。这是我让它发挥作用的唯一方法。我假设他们是一种纯粹的 jQuery 方式来执行此操作并消除多个调用。这就是我挣扎的地方。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:32:43.643

每次你做一个鼠标悬停（从你的标记）它都会添加一个新的处理程序：

```
function CalcPromo(row){ 
    $(function(){
        $('#promo' + row).change(function(){ 
```

应该是这样的：

```
$(function(){
     $('select[id^="promo"]').change(function(){ 
```

您将需要获得一个“行” - 可能是选择的索引和索引？没有您的标记来评估：

```
var row = $(this).index('select'); 
```

从标记中删除行为：

```
<select name="promo1" id="promo1" onmouseover="CalcPromo(1)"> 
```

变成

```
<select name="promo1" id="promo1"> 
```

替代方法是将一个类添加到标记中，或者更好地添加一个数据元素：

```
<select name="promo1" id="promo1" class="myselectorclass" data-row="1"> 
```

THEN 行成为其中之一：

```
var row = $(this).data("row");// use this one
// OR
var row = $(this).index('.myselectorclass'); 
```

您的活动可能是：

```
$('.myselectorclass').change(function(){ 
```

# java - 在 Hibernate JPA 实体中用另一个列表替换列表是否合法？

> ID：15911558
> 
> 赞同：4
> 
> 时间：2013-04-09T20:11:17.480
> 
> 标签：java, hibernate, jpa

假设一个 Hibernate 4.2 JPA 2.0 实体`class EntityA`，它包含一个`@ManyToOne`字段`List<EntityB> bs`。到目前为止，我坚信我不能用 List 替换`bs`，`new`而必须使用 list 方法`clear`，`add`和`remove`.

今天，我想向一所大学展示，当我用新列表替换列表时，它会导致问题，但没有发生什么奇怪的事情，它起作用了，数据库和实体已正确更新。现在我很困惑：**是否允许使用 hibernate 4.x JPA 2 替换持久实体的集合？**

这两个实体具有 OneToMany 关系，由一个站点维护。

```
@Entity
public class EntityA {
   @Id long id;
   @OneToMany public List<EntityB>bs;
}

@Entity
public class EntityB {
   @Id long id;
   hashCode and equals based on id
} 
```

测试了一下，没发现问题

```
@Test
@Transactional
public testReplaceSet {
   //given: a persistent entity a that contains a persistent entity b1
   EntityA a = this.entityManager.persist(new EntityA());
   EntityB b1 = this.entityManager.persist(new EntityB());
   a.bs = new ArrayList();
   a.bs = b1;
   this.entityManager.flush();

   //when: assining a NEW List with an new persistent Entity b2
   EntityB b2 = this.entityManager.persist(new EntityB());
   a.bs = new ArrayList();
   a.bs = b2;

   long aId = a.id;

   this.entityManager.flush();
   this.entityManager.clear();

   //then: the collection is correct stored
   EntityA AReloaded = this.entityManager.find(EntityA.class, aId);

   //here I expected the failure, but there was no!
   assertEquals(b2, AReloaded.bs.get(0));
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:21:23.500

当替换列表的内容必须触发数据库中的某些操作时，可能会发生问题。

例如，关于这种情况的一个已知陷阱与带有`orphanRemoval = true`/的列表有关`CascadeType.DELETE_ORPHAN`。在这种情况下，替换列表时不会触发孤儿删除。

也许您在不同的情况下也可能面临其他类型的类似问题。

# java - gui中的可视化图形表示

> ID：15911567
> 
> 赞同：0
> 
> 时间：2013-04-09T20:11:56.160
> 
> 标签：java, swing, user-interface, graph

所以我正在为这个课程做这个项目，任务是用java构建一个有向图，让它类似于CS部门的所有课程。随着课程先决条件的边缘进入具有其他课程作为预科的课程。我做了这个任务，我只是想进一步了解我自己的知识，并希望对图形进行 gui 表示。我还希望它能够处理不同类型的课程输入，而不仅仅是来自 CS 部门的输入。所以我遇到的问题是生成**X**数量的按钮来代表课程。我可以用一个固定的数字来做我只是不确定我会如何用**X**数量来做。任何指导表示赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:14:26.043

如果你想自己探索，你可以结合，[在这里](https://stackoverflow.com/a/11944233/230513)`GraphPanel`引用，和，在[这里](https://stackoverflow.com/a/15607737/230513)看到。或者，查看[此处](https://stackoverflow.com/a/15702152/230513)提到的图形库之一。`PointyThing`

# jquery - 使用 jquery iframe-transport 调用另一个域的服务

> ID：15911569
> 
> 赞同：1
> 
> 时间：2013-04-09T20:12:07.600
> 
> 标签：jquery, permissions, jquery-iframe-transport

我似乎找不到一个好的答案，我已经尝试了一切。我正在使用 JQuery.iframe-transport 插件进行文件上传。问题是我正在从本地服务器**localhost:8080上传到我们的 QA 服务器****qa.company.com**上的 API 。看起来上传很好，但是当它试图读取它创建的 iframe 的内容时，插件出错了。

 ****错误：访问属性“文档”的权限被拒绝**

```
var doc = this.contentWindow ? this.contentWindow.document :
            (this.contentDocument ? this.contentDocument : this.document), 
```

尝试读取 iframe 文档变量似乎是权限错误，因为它来自不同的域。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:15:37.383

虽然您不能使用 iframe hack 跨域并读取框架的内容，但我认为您可以绑定 onLoad 回调以至少知道发生了什么事.....

解决这个问题的更现代的技术解决方案是从您的 qa 服务器发送 CORS 头，这将允许您在完全不使用 iframe 的情况下推送到另一个域。

[https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS)**

# java - 如何在活动退出之前释放分配给可绘制对象的内存？

> ID：15911570
> 
> 赞同：1
> 
> 时间：2013-04-09T20:12:11.763
> 
> 标签：java, android

```
public class PageActivity extends Activity {
private int numPages = 31;
private TouchImageView[] imageViews = new TouchImageView[numPages];
private String URL = "http://www.smbc-comics.com/comics/201108";

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ViewPager viewPager = new ViewPager(this);

    for (int i = 0; i < numPages; i++) {
        imageViews[i] = new TouchImageView(this);
        imageViews[i].setBackgroundResource(R.drawable.blank);
        imageViews[i].setMaxZoom(4f);
    }

    setContentView(viewPager);
    ImagePagerAdapter adapter = new ImagePagerAdapter();
    viewPager.setAdapter(adapter);
    viewPager.setOffscreenPageLimit(2);
}

private class ImagePagerAdapter extends PagerAdapter {
    @Override
    public int getCount() {
        return numPages;
    }

    @Override
    public boolean isViewFromObject(View view, Object object) {
        return view == ((TouchImageView) object);
    }

    @Override
    public Object instantiateItem(ViewGroup container, int position) {
        Context context = PageActivity.this;

        String pageURL = URL;

        if (imageViews[position].getDrawable() == null) {
            ImageFetcher imagefetcher = new ImageFetcher();
            imagefetcher.execute(
                    pageURL + String.format("%02d", position+1) + ".gif",
                    String.valueOf(position+1));
        }

        ((ViewPager) container).addView(imageViews[position], 0);
        return imageViews[position];
    }

    @Override
    public void destroyItem(ViewGroup container, int position, Object object) {

        ((ViewPager) container).removeView((TouchImageView) object);
                    imageViews[position].removeCallbacks(null);

    }

}
public class ImageFetcher extends AsyncTask<String, Integer, Drawable> {
    int fillthisPos;

    public Drawable doInBackground(String... urls) {
        try {
            InputStream is = (InputStream) new URL(urls[0]).getContent();
            fillthisPos = Integer.parseInt(urls[1]);
            Drawable d = Drawable.createFromStream(is, "src name");
            return d;
        } catch (Exception e) {
            return null;
        }
    }

    @Override
    protected void onPostExecute(Drawable result) {
        super.onPostExecute(result);
        imageViews[fillthisPos].setImageDrawable(result);
        result = null;
    }

} 
```

}

我正在尝试创建一个图像查看器，它可以从给定的 URL 加载图像。上面的代码使用

*   TouchImageView 用于对单个图像进行触摸处理。
*   ViewPager 和 PageAdapter 让用户移动到下一页。
*   实例化页面时用于下载图像的 Asyn 任务。

当我下载了一些图像时，应用程序崩溃了。我从 DDMS/MAT 检查了图像的位图没有被释放。这是因为我正在破坏的视图没有被 GC 收集，因为它们仍在某处被引用。

我想知道在这种情况下他们是否可以通过某种方式显式释放内存？我尝试从我的代码中删除所有引用，但它仍然没有释放内存。

PS：对不起，我先放代码，我试图把它移下来，但格式搞砸了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:17:14.983

您无需保留一系列`ImageFetcher`任务。通过这样做，您将维护对加载的可绘制对象的引用。尝试从代码中消除数组。s将`AsyncTask`运行完成，而您无需维护对它们的引用。

# sql - 找不到 TSQL 多部分标识符

> ID：15911579
> 
> 赞同：1
> 
> 时间：2013-04-09T20:12:41.950
> 
> 标签：sql, sql-server, tsql

我们正在尝试通过此查询在另一台服务器上将列更新为另一个数据库中`LastUpdateDateTime`列的值：`Stamp`

```
update [NEWTON-DB].NEWTON.dbo.vital_signs 
set lastupdatedatetime = 
    coalesce ((select top 1 stamp 
               from [SERVER2].NEWTON.dbo.vital_sign 
               where rowguid in (select oldrowguid 
                                 from [NEWTON-DB].NEWTON.dbo.import_log 
                                 where tablename = 'vital_sign' 
                                   and newid = [NEWTON-DB].NEWTON.dbo.vital_signs.id)), 
              coalesce(lastupdatedatetime, getutcdate())) 
```

import_log 表只是内部连接，`rowguid`如果有意义的话，可以根据旧的 id 获取新的 id。

当他们在同一台服务器上时，此查询运行良好，但迁移后出现以下错误：

> 无法绑定多部分标识符“NEWTON-DB.NEWTON.dbo.vital_signs.id”。

有没有我们遗漏的明显的东西。提前非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:23:01.150

5 这样的零件标识符`[NEWTON-DB].NEWTON.dbo.vital_signs.id`不起作用

您需要给表起别名，然后使用别名

例如

```
Select top 1 stamp 
from [SERVER2].NEWTON.dbo.vital_sign t
where rowguid in (select oldrowguid 
                    from [NEWTON-DB].NEWTON.dbo.import_log 
                    where tablename = 'vital_sign' 
                    and newid = t.id) 
```

# php - PHP 使用带有类型复选框的输入，但不是必需的

> ID：15911580
> 
> 赞同：0
> 
> 时间：2013-04-09T20:12:48.720
> 
> 标签：php, forms, input, checkbox

我是 PHP 的初学者，我正在构建一个注册表单。现在我也在使用 type="checkbox" 因为我现在想使用人们在一周内访问的表单。

当我处理表单时，如果有人选中其中一个框，一切都会顺利，但当人们不选中其中一个复选框时，我会收到 PHP Implode 错误。

```
<li><input class="bso" type="checkbox" name="day[]" value="monday"/> monday</li>
<li><input class="bso" type="checkbox" name="day[]" value="tuesday"/> tuesday</li>
<li><input class="bso" type="checkbox" name="day[]" value="wednesday"/> wednesday</li>
<li><input class="bso" type="checkbox" name="day[]" value="thursday"/> thursday</li>
<li><input class="bso" type="checkbox" name="day[]" value="friday"/> friday</li> 
```

所以我需要知道的是，当有人没有选中其中一个框时，我需要什么样的 php 代码才能成功处理我的 PHP 代码而不会收到警告，因为有时已经离开的人不会使用表单想参观。

太好了！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:15:11.523

您遇到的问题是您需要检查`day`POST 中值的存在，并在尝试对该数组执行操作之前验证该值`day`确实是一个`implode()`数组。

```
$day_string = '';
if(!empty($_POST['day']) && is_array($_POST['day'])) {
    $day_string = implode(',', $day);
} else {
    // you didn't get at least one day checked, so issue error in this code block
} 
```

如果对 GET 和 POST 都运行相同的代码，那么您可能需要检查这是一个 POST（`else if`甚至在输入此代码块之前），这样您就不会收到针对 GET 请求的错误。

作为实践问题，您应该始终检查是否存在并验证任何用户提供的输入的预期格式/值，然后再在您的代码中使用它。熟悉`isset()`、`empty()`、`filter_var()`和`is_array()`类似功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:18:06.863

如果我对您的理解很好，您希望获得有关访问者何时访问您的网站的某种形式的统计信息。如果像这样滑动隐藏的输入不是更容易吗？：

```
<input type="hidden" name="day" value="<?php print strtolower(date("l")); ?>"> 
```

这样，您将获得所需的内容，而无需用户单击任何内容。在星期一，这看起来像`<input type="hidden" name="day" value="monday">`等等。

希望有帮助：P

# python - 在networkx中加载一个biadjacency矩阵

> ID：15911584
> 
> 赞同：3
> 
> 时间：2013-04-09T20:12:58.413
> 
> 标签：python, networkx, adjacency-matrix

我有一个包含 mxn 邻接矩阵的 csv 文件。像这样导出的：

```
numpy.savetxt("file.csv", biadjacency_matrix, ...) 
```

现在我必须导入矩阵，但很难找到正确的函数/方法。

我尝试了以下方法：

```
numpy_data = numpy.loadtxt(...)
nx.from_numpy_matrix(numpy_data) 
```

但得到：

```
Input is not a correct numpy matrix or array. 
```

这是有道理的，因为矩阵不是 nx n。

有没有一种简单的方法来导入 biadjacency_matrix？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T12:44:37.677

没有内置函数可以导入双邻接矩阵。您可以从邻接矩阵 B 创建邻接矩阵 A

```
0  B
BT 0 
```

其中BT是B的转置。

然后就可以直接加载了，

```
In [1]: import numpy as np

In [2]: import networkx as nx

In [3]: b = np.matrix([[1,0,1],[0,1,1]]) 

In [4]: r,s = b.shape

In [5]: a = np.vstack( (np.hstack((np.zeros((r,r)),b)), np.hstack((b.T,np.zeros((s,s)) ))) )

In [6]: G = nx.Graph(a)

In [7]: G.edges()
Out[7]: [(0, 2), (0, 4), (1, 3), (1, 4)] 
```

节点标记为 0,1（第 1 部分）和 2,3,4（第 2 部分）。

# c# - .getJson 调用不适用于使用继承的对象

> ID：15911585
> 
> 赞同：0
> 
> 时间：2013-04-09T20:12:58.610
> 
> 标签：c#, jquery, json, inheritance, serialization

第一篇文章... 通常我能够搜索并找到我的问题的答案，但这次我不能。我有一个使用一堆其他对象的对象：

```
[DataContract]
public class CoolStuff
{
    [DataMember]
    public Field[] CoolField { get; set; }

    public CoolStuff()
    {
        CoolField = SetCoolField();
    }

    private Field[] SetCoolField()
    {
        return new Field[]
        {
            new Field("Project Information", "ProjectInformation"),
            new Field("Resource Information", "ResourceInformation"),
        }
     }
}

[DataContract]
public class Field
{
    [DataMember]
    public string Prompt { get; set; }
    [DataMember]
    public string Value { get; set; }
    [DataMember]
    public bool IsLocked { get; set; }

    public Field(string prompt, string value = "n/a", bool isLocked = false)
    {
        Prompt = prompt;
        Value = value;
        IsLocked = isLocked;
    }
} 
```

我从服务中调用我的构造函数，当我尝试使用 $.getJSON(/Service.svc/coolstuff/' + id, loadCoolStuff);

问题是，当我让我的 Field 类从另一个类继承时，.getJson 调用失败而没有真正给我一个原因。

```
[DataContract]
public class CoolStuff
{
    [DataMember]
    public FieldBase[] CoolField { get; set; }

    public CoolStuff()
    {
        CoolField = SetCoolField();
    }

    private FieldBase[] SetCoolField()
    {
        return new FieldBase[]
        {
            new Field("Project Information", "ProjectInformation"),
            new Field("Resource Information", "ResourceInformation"),
        }
    }
}

[DataContract]
public class FieldBase
{

}

[DataContract]
public class Field : FieldBase
{
    [DataMember]
    public string Prompt { get; set; }
    [DataMember]
    public string Value { get; set; }
    [DataMember]
    public bool IsLocked { get; set; }

    public Field(string prompt, string value = "n/a", bool isLocked = false)
    {
        Prompt = prompt;
        Value = value;
        IsLocked = isLocked;
    }
} 
```

有人可以解释为什么使用 ^ 这段代码，我对 .getJSON 的调用失败了吗？我真的被困在这里了。非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T22:37:18.530

好的，从字里行间看，我推断您正在将 WCF 用于此 Web 服务。使用`DataContract`以 .svc 结尾的属性和 url 就足够清楚了。这是相关的，因为这个问题似乎特别针对 WCF 序列化的方式。正如我在上面的评论中提到的，相同的类结构在使用默认 Newtonsoft JSON 序列化程序的 ASP.NET Web API 中*没有*问题。

您在这里需要的是`KnownType`正确定义用于序列化的派生类型的属性。

[本文](http://msdn.microsoft.com/en-US/library/ms751512.aspx)提供了一些简单明了的示例。[这个](http://msdn.microsoft.com/en-US/library/ms730167.aspx)有更多关于概念的细节。

对于您提供的示例，您需要像这样装饰 FieldBase 定义：

```
[DataContract]
[KnownType(typeof(Field))]
public class FieldBase
{
} 
```

请注意，这将为您的 JSON 添加一个额外的字段，例如`"__type":"Field:#MyTestWebProject"`. 你可以忽略它，或者如果它困扰你，就去寻找摆脱它的方法。我不保证这是可能的。

# android-view - PagerAdapter 中的 TextView：在 API15-17 中可滚动，在 API7 中不可滚动

> ID：15911587
> 
> 赞同：0
> 
> 时间：2013-04-09T20:13:06.143
> 
> 标签：android-view, textview, android-scroll, android

这个 FragmentActivity 创建了一些放置在滑块中的片段（水平的。这里只显示一个片段）：

```
public class MainActivity2 extends FragmentActivity{

    private ViewPager mPager;
    private FragmentStatePagerAdapter mPagerAdapter;
    private Logger mLogger;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main_container);

        mLogger = new Logger();
        mPager = (ViewPager)findViewById(R.id.pager);
        mPagerAdapter = new SliderAdapter(getSupportFragmentManager());
        mPager.setAdapter(mPagerAdapter);

    ... //goes on with activity, the adapter is set correctly.. 
```

Logger 片段创建它的视图来膨胀这个 xml：

```
 <TextView
        android:id="@+id/LoggerLoTitle"
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:ems="10"
        android:layout_weight="2"
        android:gravity="center"
        android:textStyle="bold"
        android:textColor="#000033"
        android:textSize="16sp"
        android:text="@string/logger"
        android:layout_marginTop="30sp" />      
    <TextView
        android:id="@+id/numberOutput"
        android:textIsSelectable="true"
        android:layout_width="0dp"
        android:layout_weight="13"
        android:layout_height="fill_parent"
        android:gravity="top"
        android:freezesText="true"
        android:maxLines = "50"
        android:layout_marginLeft="22dp"
        android:scrollbars = "vertical"
        android:layout_marginTop="45sp"/>
    <Button
        android:background="#80FFFFFF"
        android:gravity="center"
        android:layout_width="0dp"
        android:layout_weight="2"
        android:layout_height="fill_parent"
        android:freezesText="true"
        android:scrollbars = "vertical"
        android:layout_marginTop="45sp"
        android:textColor="#000000"
        android:textStyle="bold"
        android:text="@string/logger_ad"
        android:onClick="whatsNew"/>  
</LinearLayout> 
```

对于 API 7，除了 TextView“numberOutput”不滚动且无法选择之外，一切正常（所有片段都已加载并且滑块正常工作）。对于 API 15、16、17，它运行良好。任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-11T12:35:19.063

通过在运行时获取 TextView (numberOutput) 并设置移动方法来解决它：

```
rootView = (ViewGroup) inflater.inflate(R.layout.dicelogger_lo, container, false);
mLoggerBody = (TextView)rootView.findViewById(R.id.numberOutput); 
mLoggerBody.setMovementMethod(new ScrollingMovementMethod()); 
```

我在文档中没有发现更高的 api 级别会自动设置任何移动方法.. 所以为什么会是另一个问题

# rabbitmq - 消息总线：发件人必须等待来自多个收件人的确认

> ID：15911588
> 
> 赞同：4
> 
> 时间：2013-04-09T20:13:11.497
> 
> 标签：rabbitmq, message-bus

在我们的应用程序中，发布者创建一条消息并将其发送到一个主题。

然后它需要等待，当所有主题的订阅者都确认消息时。

它不会出现，消息总线实现可以自动执行此操作。因此，我们倾向于让每个订阅者在完成后向客户发送他们自己的新消息。

现在，客户端可以接收所有此类消息，并且当它从每个目的地收到一条消息时，就可以进行任何它必须做的清理工作。但是，如果客户端（发送方）在确认流中途崩溃了怎么办？为了处理这样的不幸，我需要在客户端（重新）实现总线已经实现的东西——保存传入的确认，直到我得到足够的确认。

我不相信，我们的需求是如此深奥——您将如何处理这种情况，发件人（发布者）必须等待来自*多个*收件人（订阅者）的确认？有点像从每个订阅者向邮件列表请求（和等待）回执......

如果重要的话，我们正在使用 RabbitMQ。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-26T21:49:45.573

您正在寻找的功能听起来像是一种消息传递解决方案，可以跨消息的发布者和订阅者执行事务。在 Java 世界中，JMS 指定了此类事务。JMS 实现的一个示例是[HornetQ](http://www.jboss.org/hornetq)。

RabbitMQ 不提供此类功能，但这样做是有充分理由的。RabbitMQ 的构建是为了非常健壮并同时表现得像地狱一样。您描述的事务行为只有以合理的性能损失为代价才能实现（特别是如果您想保持出色的稳健性）。

使用 RabbitMQ，确保消息被成功消费的一种方法确实是在消费者端发布一个应答消息，然后由原始发布者消费。这可以通过[RabbitMQ 的 RPC 过程调用](http://www.rabbitmq.com/tutorials/tutorial-six-python.html)来实现，这可能会帮助您为您的问题设置找到一个干净的解决方案。

如果（原始）发布者在收到所有答案之前崩溃，您可以假设所有未完成的答案仍在代理中排队。因此，您必须以能够恢复处理那些留下的消息的方式构建您的发布者。这可能不是微不足道的。

**最后，我推荐以下解决方案：**设计您的生产组件，使您可以使用与原始发布者分离的一个或多个专用答案消费者来使用答案。

该解决方案的好处是：

1.  原始发布者可以独立于消费者成功完成其任务
2.  原始发布者独立于消费者可用性和速度
3.  原始发布者的实现要简单得多
4.  在崩溃场景中，答案消费者可以通过处理答案来恢复

**现在更笼统地说：**消息传递的主要好处之一是代理将应用程序组件解耦。在 AMQP 中，这是通过交换和绑定来实现的，这些交换和绑定允许您将消息分发逻辑从应用程序移动到配置的中心点。

如果您向客户端添加 RPC 样式的调用，那么您的组件很可能再次紧密耦合，这意味着如果使用组件之一失败/不可用/太慢，则发布组件将失败。这正是您想要避免的。否则，你为什么要拆分组件呢？

我的建议是，您的应用程序设计方式应使发布者可以尽可能独立于消费者的成功来完成他们的任务。反向通道应该是一个例外情况，并以所描述的非耦合方式实现。

# jquery - 简单的 Jquery 选择 dom 元素试图将图像复制到另一个滑块

> ID：15911590
> 
> 赞同：0
> 
> 时间：2013-04-09T20:13:22.373
> 
> 标签：jquery, image, dom, find

我想将滑块中的图片复制到另一个滑块中。如果有帮助，我正在使用 iOSslider.. Jquery 在浏览 dom 时非常复杂，我在这种情况下，我只是一次又一次地失败..

我想选择没有包含它们的 div 的 img。我想动态选择它们并将它们添加到类似列表的列表中，然后我可以将其附加到另一个类似的列表中。

这是我的代码

```
var scroll='<div  class="sliderContainer imageViewerExerciseMenu"><div id ="newSliderr" class ="iosSlider"><div class ="slider">'+
    '<div class="item"><img src="../images/exercises/MuscleGroup1.png"></div>'+
    '<div class="item"><img src="../images/exercises/MuscleGroup1.png"></div>'+
    '<div class="item"><img src="../images/exercises/MuscleGroup1.png"></div>'+
    '<div class="item"><img src="../images/exercises/MuscleGroup1.png"></div>'+
    '<div class="item"><img src="../images/exercises/MuscleGroup1.png"></div>'+
    '<div class="item"><img src="../images/exercises/MuscleGroup1.png"></div>'+
    '<div class="item"><img src="../images/exercises/MuscleGroup1.png"></div>'+
'<div class="item"><img src="../images/exercises/MuscleGroup1.png"></div></div></div></div>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T08:44:26.630

我有这个，但这不会将元素复制到数组。似乎无法使克隆方法起作用。

```
var listArray = new Array();
inputObject.children().find('img').each(function(){
     listArray.push($(this));}); 
```

# php - Smart 2.0 模板中 PHP $ahTime[$day]['allDay'] 的访问值？

> ID：15911592
> 
> 赞同：0
> 
> 时间：2013-04-09T20:13:24.653
> 
> 标签：php, foreach, smarty

我有一个 PHP 值`$ahTime[$day]['allDay']`，我想在 Smarty 中访问该值。语法是什么？Smarty`{$day}`已经在 Smarty`{foreach}`循环中更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:31:00.823

正确的语法可以在 Smarty 库的文档中找到（我希望这个语法对你使用的 Smarty 版本有效）：

[http://www.smarty.net/docs/en/language.function.assign.tpl#id450263](http://www.smarty.net/docs/en/language.function.assign.tpl#id450263)

```
{assign var=result value=$ahTime[$day].allDay} 
```

# javascript - 带有查询参数的 Ember 转换

> ID：15911597
> 
> 赞同：1
> 
> 时间：2013-04-09T20:13:36.437
> 
> 标签：javascript, ember.js

我正在创建一个 ember.js 应用程序。第一页是单个字段，带有一个按钮。单击按钮时，我希望它转到路径`#/deals/:api_key`。但是，当我单击按钮时，我不清楚最好的方法。

这是我到目前为止所拥有的：

```
App = Ember.Application.create();

App.Store = DS.Store.extend({
  revision: 12,
  adapter: 'DS.FixtureAdapter'
});

App.Deal = DS.Model.extend({
  name: DS.attr('string')
});

App.Router.map(function() {
  this.resource('start', { path: '/' });
  this.resource('deals', { path: '/deals/:api_key' });
});

App.DealsRoute = Ember.Route.extend({
  model: function(params) {
    return App.Deal.find();
  }
});

App.StartController = Ember.ObjectController.extend({
  apiKey: "",
  getDeals: function (model) {
    this.transitionToRoute('deals');
  }
});

App.DealsView = Ember.View.extend({
  didInsertElement: function() {
    // Add active class to first item
    this.$().find('.item').first().addClass('active');
    this.$().find('.carousel').carousel({interval: 1000});
  }
});

  <script type="text/x-handlebars" data-template-name="start">
    {{view Em.TextField valueBinding="apiKey" placeholder="API Key"}}
    <br />
    <button {{action 'getDeals'}} class="btn btn-large">Get Won Deals!</button>
  </script>

  <script type="text/x-handlebars" data-template-name="deals">
    <div id="carousel" class="carousel slide">
      <div class="carousel-inner">
        {{#each model}}
          <div class="item">
            {{name}}
          </div>
        {{/each}}
      </div>
    </div>
  </script> 
```

关于将文本输入中的数据作为查询参数传递到下一个转换的正确方法有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:38:43.143

您需要在链接到帮助器中的视图中传递参数，例如

```
{{#linkTo 'deals' api_key}}go to deals{{/linkTo}} 
```

这会生成与您需要的动态部分的链接。

```
<a href="/deals/[the_dynamic_apykey]">go to deals</a> 
```

查看有关 linkTo 的文档以获取更多信息：[http ://emberjs.com/guides/templates/links/](http://emberjs.com/guides/templates/links/)

# c - 只有在循环中分配每个单独的元素时，数组的分配才会成功

> ID：15911599
> 
> 赞同：0
> 
> 时间：2013-04-09T20:13:41.277
> 
> 标签：c, arrays

我有一堆这样的：

```
static const int blockFrames1[4][9]= {{0,1,1, 0,1,1, 0,1,1},{0,0,0, 1,1,1, 1,1,1},{0,1,1, 0,1,1, 0,1,1},{0,0,0, 1,1,1, 1,1,1}}; 
```

我想将一个内部数组分配给一个临时变量，以便在这样的函数中使用：

```
int tempArr[9];
if(type == 1){  
    tempArr[9] = blockFrames1[0];
}else if(type ==2){
    tempArr[9] = blockFrames2[0];
}
(for loop thru and do some stuff with tempArr) 
```

但我能让它工作并给我正确数字的唯一方法是实际循环并分配每个数字：

```
 if(type == 1){
     for (int vv=0; vv<9; vv++) {
         tempArr[vv] = blockFrames1[0][vv];
     }
} 
```

似乎我`[9]`在声明 时需要`tempArr`来定义长度，但是当我尝试将现有数组之一分配给带有或不带有`[9]`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:20:06.883

**数组不可赋值。**如果你想填充它们，那么只需`memcpy()`. 另外，是的，您需要声明中的维度（好吧，如果您初始化数组，则不需要），但是如果您在声明之外使用方括号语法，那么这已经在索引/下标数组，以便访问它的元素。

总而言之：

```
// declaration
int array[9];

// assignment to one element
array[0] = 42;

// "assignment" to another array - rather a bytewise copy
int other_array[] = { 0, 1, 2, 3, 4, 5, 6, 7, 8 };
memcpy(array, other_array, sizeof(array)); 
```

# syntax - 将类声明为不可复制的最佳语法是什么？

> ID：15911600
> 
> 赞同：0
> 
> 时间：2013-04-09T20:13:47.800
> 
> 标签：syntax, c++03, noncopyable

（假设我不能使用`boost::noncopyable`专门为此目的设计的）

（假设我不能使用 C++11）

在使类不可复制时，我通常会看到以下语法：

```
class MyClass
{
public:
    ...
    stuff
    ...

private:
    MyClass(const MyClass&); // disables the copy constructor
    MyClass& operator=(const MyClass&); // disables the copy assignment operator
}; 
```

这种语法似乎冗长。我认为我可以使用以下内容：

```
 MyClass(MyClass&); // disables the copy constructor
    void operator=(MyClass); // disables the copy assignment operator 
```

这似乎更短（它只重复了类名 3 次而不是 4 次；它也省略了`const`and `&`）。

我的语法是否与其他语法完全相同？

有什么理由更喜欢其中一个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:22:07.407

把重点放在缩短源代码几句话上不是很好。此外，您使您的`operator=`阅读变得不可读，它不再是复制操作员……
您应该避免使用后者来节省几句话。

[这里](https://stackoverflow.com/questions/9458741/with-explicitly-deleted-member-functions-in-c11-is-it-still-worthwhile-to-inh)有一个帖子，说明

//引用

```
class MyClass
{
private:
    MyClass(const MyClass&) {}
    MyClass& operator=(const MyClass&) {}
}; 
```

如果您是一名 C++ 程序员，阅读过 C++ 的介绍性文本，但很少接触惯用的 C++（即：很多 C++ 程序员），那么这......令人困惑。它声明了复制构造函数和复制赋值运算符，但它们是空的。那么为什么要声明它们呢？是的，它们是私有的，但这只会引发更多问题：为什么要将它们设为私有？

要了解为什么这会阻止复制，您必须意识到通过将它们声明为私有，您可以使非会员/朋友无法复制它。这对新手来说不是很明显。当他们尝试复制它时也不会收到错误消息。

//报价结束

# javascript - XHR 仅请求标头

> ID：15911602
> 
> 赞同：2
> 
> 时间：2013-04-09T20:13:50.267
> 
> 标签：javascript, header, xmlhttprequest

是否可以使用 XHR 仅获取文件的标题而不下载文件本身？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T20:39:46.473

您可以使用 http HEAD 方法而不是 GET 方法。

```
xhr.open("HEAD", url, async) 
```

# html - PHTML 中的嵌套 IF 语句

> ID：15911605
> 
> 赞同：0
> 
> 时间：2013-04-09T20:13:53.237
> 
> 标签：html, magento, php

晚上，

我试图在 Magento 中编辑一个简单的代码，但我对 PHTML 完全陌生，而且我遇到了基础问题......

我想检查标题以设置自定义 div 供翻译人员调用...

这部分编辑的 PHTML 代码不起作用...

```
<?php if( $this->getConfig('title') ): ?>
  <?php if( $this->getConfig('title') == 'Categories' ?>
    <div class="block-title"><strong><?php echo $this->__('Categories') ?></strong></div>
  <?php else: ?>
    <div class="block-title"><strong><?php echo $this->getConfig('title') ?></strong></div>
  <?php endif ?>
<?php endif; ?> 
```

虽然此原始代码有效：

```
<?php if( $this->getConfig('title') ): ?>
    <div class="block-title"><strong><?php echo $this->getConfig('title') ?></strong></div>
<?php endif; ?> 
```

一些专家可以指出一个错误，所以我不会花很多时间在这上面吗？

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T20:58:27.740

```
<?php if( $this->getConfig('title') ): ?>
  <?php if( $this->getConfig('title') == 'Categories'): ?>
                                                  ---^
    <div class="block-title"><strong><?php echo $this->__('Categories') ?></strong></div>
  <?php else: ?>
    <div class="block-title"><strong><?php echo $this->getConfig('title') ?></strong></div>
  <?php endif; ?>
          ---^
<?php endif; ?> 
```

# jquery - 使用 jQuery 自动链接到页面中的章节？

> ID：15911606
> 
> 赞同：0
> 
> 时间：2013-04-09T20:13:58.443
> 
> 标签：jquery, css, automation, article

有问题的页面：[http ://wlvrtn.com/sites/nms-chapters/page.php](http://wlvrtn.com/sites/nms-chapters/page.php)

该页面目前由 3 个章节组成，每个章节都包含在各自的文章标签中。以后，我会在浮动章节导航中添加额外的章节文章，以及章节链接。

**我想达到的目标：**

我想通过 jQuery 自动化章节导航链接目的地，这样列表中的第一个链接指向页面上的第一篇文章，第二个链接指向第二篇文章，依此类推。

即，如果我添加第四章文章，我不想给它赋予id“article-04”；我希望章节导航中的第四个链接在添加时知道它应该指向新文章。我猜是“第 n 个孩子”参与其中，但我太新了，不知道。

谢谢，xo

* * *

章节导航：

```
<nav id="chapters">
  <ul>
     <li><a href="#">Chapter One</a></li>
     <li><a href="#">Chapter Two</a></li>
     <li><a href="#">Chapter Three</a></li>
  </ul>
</nav> 
```

* * *

章节文章：

```
<article class="clearfix">
  <h1>Chapter One</h1>
</article>
<article class="clearfix">
   <h1>Chapter Two</h1>
     <p>And so on...</p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:35:39.110

像这样的东西怎么样（[演示](http://jsfiddle.net/Mottie/tXhwN/)）？

```
$(function(){

    // find the nav & headers
    var nav = $('#chapters li a'),
        articles = $('#main article > h1');

    // now assign an id/href to each
    nav.each(function(i){
        nav.eq(i).attr('href', '#article-' + i);
        articles[i].id = 'article-' + i;
    });

}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:31:41.177

有很多关于使用 jquery 进行锚链接滚动的 jquery 教程。我个人在我的一个项目中使用这个

试试这个教程：

[http://tympanus.net/codrops/2011/12/05/lateral-on-scroll-sliding-with-jquery/](http://tympanus.net/codrops/2011/12/05/lateral-on-scroll-sliding-with-jquery/)

:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:45:19.423

满足您的要求的一种相对简单的方法是这样，尽管它肯定可以优化：

```
$('h1').each(
    function(){
        var that = $(this),
            txt = that.text();
        that[0].id = txt.replace(/\s+/,'');

        if (!$('#toc').length){
            $('<ul />', { id : 'toc' }).prependTo('body');
        }

        var li = $('<li />').appendTo('#toc');
        $('<a />', {'href' : '#' + that.text().replace(/\s+/,''), text : that.text()}).appendTo(li);
    }); 
```

[JS 小提琴演示](http://jsfiddle.net/davidThomas/LLQmy/)。

参考：

*   jQuery：
    *   [`appendTo()`](http://api.jquery.com/appendTo/).
    *   [`prependTo()`](http://api.jquery.com/prependTo/).
    *   [`text()`](http://api.jquery.com/text/).
*   纯 JavaScript：
    *   [`String.replace()`](https://developer.mozilla.org/en/docs/JavaScript/Reference/Global_Objects/String/replace).

# java - 二元运算符的错误操作数类型。我收到以下程序的错误。请解释为什么？

> ID：15911607
> 
> 赞同：0
> 
> 时间：2013-04-09T20:13:59.220
> 
> 标签：java, oop

```
public class MotorCar extends Vehicle
{
    private String engCap;

    public double getLicenseFee()
    {
        double fee;

        if(this.engCap < "1500cc")
        {
            return fee = 750;
        }
        else if(this.engCap > "1500cc" && this.engCap < "2500cc")
        {
            return fee = 900;
        }
        else(this.engCap > "2500cc")
        {
            return fee = 1250;
        }

    }

} 
```

这有什么问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:16:50.517

您不能使用小于`<`和大于`>`运算符比较字符串（或任何其他对象）。

如果您将 engCap 变量更改为 int 并删除“cc”部分，您将能够按照您尝试的方式进行比较。

例如：

```
public class MotorCar extends Vehicle {
    private int engCap;

    public double getLicenseFee() {
        double fee;

        if(this.engCap < 1500) {
            return fee = 750;
        } else if(this.engCap > 1500 && this.engCap < 2500) {
            return fee = 900;
        } else(this.engCap > 2500) {
            return fee = 1250;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-09T20:17:28.260

在 Java 中，您不能对字符串使用“<”和“>”（以及“<=”和“>=”）运算符。要比较这些值，请使用该[`String#compareTo`](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#compareTo%28java.lang.String%29)方法，该方法将返回一个小于零、等于零或大于零的整数，具体取决于字符串比较小于等于还是大于参数。

注意，因为这是字符串比较，“500cc”会大于“1500cc”。

**编辑**

如果您尝试根据 的整数部分确定范围`engCap`，那么使用@thegrinner 的答案会更简单，并且只存储没有“cc”的数值。然后您可以使用您尝试使用的运算符。

# python - 使用请求库 (python) 进行验收测试

> ID：15911608
> 
> 赞同：2
> 
> 时间：2013-04-09T20:13:59.520
> 
> 标签：python, httprequest, python-requests, acceptance-testing

我在使用请求库为登录功能编写验收测试时遇到问题。登录是使用 post 方法实现的，我无法直接更改查询字符串和操作 url。我想要做的是手动提交帖子数据并将页面重定向到如果用户成功登录它会定期访问的页面。我想检索该页面的 html 并检查是否成功登录，如何我会这样做吗？

此方法失败：

```
data={'email': 'example@example.com', 'password': 'example'}

login_url="examplepage.com/signin"

request_data = requests.post(login_url, data, allow_redirects=True)

print request_data.content 
```

这是 resp.headers 返回的：

`{'content-length': '1124', 'date': 'Sun, 14 Apr 2013 16:12:51 GMT', 'set-cookie': 'session="+udnwfCkuAuFGp9QKOiU1YS2X1s=?_fresh=STAwCi4=&_id=Uyc3XHhkZVx4Y2J3T1x4YjBceDkxeFx4MWNceGFhXHhkNFx4OTMhKVx4MGJyJwpwMQou&csrf=Uyc2Mzk0YjVjZjMzMGZkMTNkY2NiM2EzZTZkYzgyMjhkY2IwOWQ2NmM3JwpwMQou"; Path=/; HttpOnly', 'content-type': 'text/html; charset=utf-8', 'connection': 'keep-alive', 'server': 'Werkzeug/0.8.3 Python/2.7.3'}`

resp.content 只返回登录页面的 html：

```
 <title>Web App</title>

  </head>
  <body>
    <div>Web App: <a href="/home">Home</a>

            | <a href="/signin">Login</a>
            | <a href="/register">Register</a>

    </div>
    <hr>

<h1>Sign in</h1>

<form action="" method=post name="signin">
    <div style="display:none;"><input id="csrf_token" name="csrf_token" type="hidden" value="20130414164251##fd7e82d47974518d098b41cecf2a4452f890317f"></div>
  <dl>

  <dt><label for="email">Email Address</label>
  <dd><input id="email" name="email" type="text" value="example@example.com">

  </dd>

  <dt><label for="password">Password</label>
  <dd><input id="password" name="password" type="password" value="">

  </dd>

  </dl>
  <p><input type="submit" value="Sign in">
</form>

<a href="/login"> Click here to sign in using your Google, Yahoo, AOL, Flickr, or another OpenID account. </a>

  </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T13:37:25.973

如果您想登录一个页面，我建议您创建会话，尽管有独立请求。如果您正确发送数据，您应该检索一些会话 cookie。我会检查它以确保您已登录。当脚本登录并获取 cookie 时，它​​还应该检索包含目标页面的 Location 标头。尝试这样的事情：

```
import requests
data={'email': 'example@example.com', 'password': 'example'}
login_url="examplepage.com/signin"
s = requests.session()
resp = s.post(login_url,data)
#now s.cookies should contain session cookie if properly logged in
target = s.get(resp.headers['Location']) 
```

但我认为问题可能与会话有关。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T14:58:34.433

我的解决方案是在我的应用程序文件中将`CSRF_ENABLED`变量从**True**更改为**False 。**`config.py`一旦我更改了这个设置，上面的代码实际上就可以工作了。顺便说一句，我在 Heroku 上托管。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-16T00:18:36.380

我这样做了：

```
 if auth == True:
        # fetch the login page in order to get the csrf token
        cookieHandler = urllib2.HTTPCookieProcessor()
        opener = urllib2.build_opener(urllib2.HTTPSHandler(), cookieHandler)
        urllib2.install_opener(opener)

        login_url = URL
        login_page = opener.open(login_url)

        # attempt to get the csrf token from the cookie jar
        csrf_cookie = None
        for cookie in cookieHandler.cookiejar:
            if cookie.name == 'csrftoken':
                 csrf_cookie = cookie
                 break
        if not cookie:
            raise IOError("No csrf cookie found")

        # login using the usr, pwd, and csrf token
        login_data = urllib.urlencode(dict(
            username = username, password = password,
            csrfmiddlewaretoken = csrf_cookie.value))

        req = urllib2.Request(login_url, login_data)
        resp = urllib2.urlopen(req)
        contents = resp.read()

    target_download = target_url
    status_code = urllib2.urlopen(target_download).getcode()
    our_document = urllib2.urlopen(target_download).read()
    return status_code, our_document 
```

# c# - 如何设置表单大小和位置同步

> ID：15911615
> 
> 赞同：0
> 
> 时间：2013-04-09T20:14:09.350
> 
> 标签：c#, winforms, position

我为我的应用程序制作了自定义边框，例如 VisualStudio 2012 有一个中央主窗体和 4 个较小的动态定位边框窗体。

在主窗体中，我覆盖了 OnMove、OnSizeChanged、OnActivate、OnDeactivate 事件。在这些事件中，我设置了边框的位置、大小和颜色。

它工作得很好，但有一些可怕的文物！这些与调整任何窗口大小时出现的工件相同。

我用我的应用程序制作了一个视频，以展示我的意思是什么类型的 atrifacts。这些会在移动或调整窗口大小时出现。

显然这个问题是可以解决的，因为VisualStudio2012也能解决（*意思是没有问题。试试吧，调整VS2012窗口大小，不会闪烁*）

在我的实现中，我使用了与 VS2012 相同的方式：构成表单边框的 4 个分层窗口。

以防有人没有我所说的故障。这是视频：http: [//youtu.be/kKiPke8ruaI](http://youtu.be/kKiPke8ruaI)

我需要的是一种“同步”设置4个边框窗口的位置和大小的方法。

# c# - MS Visio - 在 C# 中创建/插入新页面/选项卡

> ID：15911616
> 
> 赞同：0
> 
> 时间：2013-04-09T20:14:10.317
> 
> 标签：c#, visio

我几乎到处搜索，但找不到在 Visio 文档中用 C# 创建/插入新页面/选项卡的方法。我录制了一个在文档中创建新页面的VB宏，那里真的很简单。但是，我正在使用 C# 并且找不到正确的命令。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T02:18:12.383

用 C# 编写您将使用与VBA相同的[COM API 。](http://msdn.microsoft.com/en-us/library/office/ff769201%28v=office.14%29.aspx)使用 C# 自动化 Visio 的一种简单方法是下载并安装[Primary Interop Assembly (PIA)](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=18346)。然后在您的项目中包含参考 Microsoft.Office.Interop.Visio。下面是一个使用 PIA 操作 Visio 文档中页面的简单示例。

```
namespace VisioExample
{
    using System;
    using Microsoft.Office.Interop.Visio;

    class Program
    {
        public static void Main(string[] args)
        {
            // Start Visio
            Application app = new Application();

            // Create a new document.
            Document doc = app.Documents.Add("");

            // The new document will have one page,
            // get the a reference to it.
            Page page1 = doc.Pages[1];

            // Add a second page.
            Page page2 = doc.Pages.Add();

            // Name the pages. This is what is shown in the page tabs.
            page1.Name = "Abc";
            page2.Name = "Def";

            // Move the second page to the first position in the list of pages.
            page2.Index = 1;                
        }
    }
} 
```

要了解有关开发解决方案的信息，您可以在线查看[开发 Visio 解决方案](http://msdn.microsoft.com/en-us/library/office/aa245244%28v=office.10%29.aspx)一书。下载[Visio SDK](http://www.microsoft.com/en-us/download/search.aspx?q=Visio+Software+Development+Kit)，它包含一个 C# 示例代码库。您可以查看 Graham Wideman 的“ [Visio 2003 Developer's Survival Pack](http://amzn.com/1412011124) ”。如您所见，宏记录器可以向您显示实现任务所需调用的 API 方法。VBA 使用的[COM API](http://msdn.microsoft.com/en-us/library/office/ff769201%28v=office.14%29.aspx)与您将在 C# 中使用的 API 相同，代码的语法会明显不同。

# java - 如何为一个按钮设置多个标签？

> ID：15911620
> 
> 赞同：21
> 
> 时间：2013-04-09T20:14:23.383
> 
> 标签：java, android

我有 16 个按钮，我标记它们以将一些术语设置为按钮并从 sqlite 数据库导入。所以，我这样标记它们：

```
// labelForButton and tagForButton
       class MyStruct {
       public MyStruct (String lab, String t){
        label = lab;
        tag = t;
    }
       private String label;
       private String tag;
       }

mDbHelper.open();

            Cursor c = mDbHelper.getSpojnice(generateWhereClause());

            ArrayList<MyStruct> labelsA = new ArrayList<MyStruct>();
            ArrayList<MyStruct> labelsB = new ArrayList<MyStruct>();

            labelsA.add(new MyStruct(c.getString(2), "1")); // this tag should be the same to button that matches
            labelsB.add(new MyStruct(c.getString(3), "1"));
            labelsA.add(new MyStruct(c.getString(4), "2"));
            labelsB.add(new MyStruct(c.getString(5), "2"));
            labelsA.add(new MyStruct(c.getString(6), "3"));
            labelsB.add(new MyStruct(c.getString(7), "3"));
            labelsA.add(new MyStruct(c.getString(8), "4"));
            labelsB.add(new MyStruct(c.getString(9), "4"));
            labelsA.add(new MyStruct(c.getString(10), "5"));
            labelsB.add(new MyStruct(c.getString(11), "5"));
            labelsA.add(new MyStruct(c.getString(12), "6"));
            labelsB.add(new MyStruct(c.getString(13), "6"));
            labelsA.add(new MyStruct(c.getString(14), "7"));
            labelsB.add(new MyStruct(c.getString(15), "7"));
            labelsA.add(new MyStruct(c.getString(16), "8"));
            labelsB.add(new MyStruct(c.getString(17), "8"));

            Collections.shuffle(labelsA);
            Collections.shuffle(labelsB);

            a1.setText(labelsA.get(0).label);
            a1.setTag(labelsA.get(0).tag);
            a1.setOnClickListener(clickListener);
            b1.setText(labelsB.get(0).label);
            b1.setTag(labelsB.get(0).tag);
            b1.setOnClickListener(clickListener);
            a2.setText(labelsA.get(1).label);
            a2.setTag(labelsA.get(1).tag);
            a2.setOnClickListener(clickListener);
            b2.setText(labelsB.get(1).label);
            b2.setTag(labelsB.get(1).tag);
            b2.setOnClickListener(clickListener);
.
.
.
.
}
} 
```

所以，我需要 A1 和 B1 有相同的标签，还有 A2 和 B2 等等。

但是，由于某些其他原因，我还需要所有 A 按钮都有标签，例如“A”和所有 B 的“B”。那么，如何将多个（在我的情况下为两个）标签设置为一个按钮？

编辑：

我将此添加到我的 string.xml 中：

```
<item type="id" name="KOLONA1"/>
<item type="id" name="KOLONA2"/> 
```

然后添加标签：

```
a1.setTag(R.id.KOLONA1, labelsA.get(0).tag);
b1.setTag(R.id.KOLONA2, labelsA.get(0).tag); 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2015-10-20T12:50:30.897

如果您需要将多个标签添加到一个视图中，那么您必须为`strings.xml`文件中的每个标签定义 id，例如：

```
<item type="id" name="section" />
<item type="id" name="hide_show" /> 
```

添加密钥后，您可以在 java 文件中使用这些密钥，如下所示：

```
rowView.setTag(R.id.section,mSectionList.get(position));
rowView.setTag(R.id.hide_show,"close"); 
```

这将设置标签。在获取标签时，您需要对最初设置的对象进行类型转换，例如：

```
String mSection=(String)rowView.getTag(R.id.section);
String isOpen=(String)rowView.getTag(R.id.hide_show); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-04-09T20:24:27.973

您应该使用该[`setTag(int key, Object tag)`](http://developer.android.com/reference/android/view/View.html)方法，该方法还需要第二个参数`key`。这将允许您像这样设置`tags`多个`Button`：

```
button.setTag(1,object1);
button.setTag(2,object2); 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-03-05T11:00:58.457

尝试 ：

```
button.setTag(R.id.resource_id1,obj1);
button.setTag(R.id.resource_id2,obj2);
button.setTag(R.id.resource_id3,obj3); 
```

并获取标签，使用

```
v.getTag(R.id.resource_id1);
v.getTag(R.id.resource_id2);
v.getTag(R.id.resource_id3); 
```

但是，这将只返回对象。你需要对它进行类型转换。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-05-27T06:19:28.053

在里面定义key id，`strings.xml`然后通过id例子得到：

在 String.xml 中声明以下代码

```
<item type="id" name="date" />

<item type="id" name="name" /> 
```

现在设置标签如下

```
 share.setTag(R.id.date,it.adjournDate);
 share.setTag(R.id.name,it.partyName); 
```

分享是我的按钮名称

现在终于在按钮中获取您想要这些值侦听器的标签，如下所示：

```
v.getTag(R.id.name)
v.getTag(R.id.date) 
```

# r - r用分数标记图

> ID：15911621
> 
> 赞同：2
> 
> 时间：2013-04-09T20:14:27.857
> 
> 标签：r, ggplot2, label, plotmath

我想创建 3 个图，每个图都包含来自不同数据帧的 2 条线图，然后用特定分数标记每个图。

例如，我有 3 个数据框：

```
df1 <- data.frame(x=c(1,2,3,4),y=c(2,3,4,5), z=c(3,3,6,8))
df2 <- data.frame(x=c(3,4,5,6),y=c(1,3,6,7), z=c(2,4,4,8))
df3 <- data.frame(x=c(1,2,2,3),y=c(2,5,6,9), z=c(2,5,6,7)) 
```

我想：

1）为每个数据框创建3个不同的图，每个图都有一条红线和一条蓝线；

2) 在每个图的蓝线上添加注释，为每个图使用不同的分数。

例如，数据框 1 的绘图是这样的：

```
p1 <- ggplot(data = df1) + geom_line(aes(x=x,y=y, colour="blue")) + geom_line(aes(x=x,y=z, colour="red")) +  scale_colour_manual(name="data", values=c("red", "blue")) 
```

然后在我尝试过的蓝线上添加标签：

```
p1 + geom_text(aes(x=df1$x[which.max(df1$y)]+1, y = max(df1$y)+4,  label = "{\frac{23 22 22}{44 28 32}}", size=2, parse=TRUE)) 
```

但这不起作用，我搜索了这么多小时，找不到如何在注释中使用分数（和括号括起来的分数）。任何帮助都深表感谢！

-fra

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:10:36.223

目前还不清楚你想要什么。这是一种尝试；

*   我`mapply`用来循环绘图和分数并生成绘图列表。
*   我使用创建分数`frac(x,y)`
*   我使用`scale_y_continuous`
*   我用来`gridExtra`在同一个情节中安排情节（可选）

![在此处输入图像描述](https://i.stack.imgur.com/fyILd.png)

这里是完整的代码：

```
 ## a generic function that take a fraction ana a  data.frame as inputs
 ## it generate a plot
 plot.frac <- function(dat,frac){
     p <-  ggplot(dat) + 
           geom_line(aes(x=x,y=y, colour="blue")) + 
           geom_line(aes(x=x,y=z, colour="red")) +  
           scale_colour_manual(name="data", values=c("red", "blue"))+
           geom_text(x=dat$x[which.max(dat$y)]-0.05, y = max(dat$y)+4,  
                     label = frac, size=5,parse=TRUE)+
           ## Note the use of limits here to display the annotation 
           scale_y_continuous(limits = c(min(dat$y), max(dat$y)+5))
     p
    }
## create a list of data.frame of mapply    
df.list <- list(df1,df2,df3)
## ggplot2 use plotmath so  for fraction you use frac(x,y)
## here I construct the 2 terms using paste
frac.func <- function(num,den) paste('frac("',num,'","',den,'")',sep='')
num1 <- "line1:23 22 22"
den1 <- "line2: 44 28 32"
num2 <- "line1:23 50 22"
den2 <- "line2: 44 50 32"
num3 <- "line1:23 80 22"
den3 <- "line2: 44 80 32"
## create a list of fractions for mapply

frac.list <- list(frac.func(num1,den1),
              frac.func(num2,den2),
              frac.func(num3,den3))
frac.list <- list(frac,frac,frac)
## use mapply to call the plot over the 2 lists of data.frame and fractions
ll <- mapply(plot.frac,df.list,frac.list,SIMPLIFY=FALSE)
library(gridExtra)
do.call(grid.arrange,ll) 
```

# jquery - 如果用户使用 jquery Dialog 插件单击“是”按钮，如何捕捉

> ID：15911622
> 
> 赞同：1
> 
> 时间：2013-04-09T20:14:28.847
> 
> 标签：jquery, jquery-ui-dialog, alert

我正在尝试使用以下插件来显示一条消息，说明“您确定....？” 然后如果用户点击是然后提交一个表格。

[http://projectshadowlight.org/jquery-easy-confirm-dialog/](http://projectshadowlight.org/jquery-easy-confirm-dialog/)

我已经创建了按钮和警报消息。我确实在屏幕上显示了消息，但是当用户单击“是”按钮时没有任何反应！我究竟做错了什么？

我遵循了上一个链接中的第二个示例。

这是我到目前为止所拥有的

```
<div class="mirrorSubmit" id="updateData" >Update</div>

$('#updateData').easyconfirm({locale: { title: 'Are you sure?', button: ['No','Yes']}});

$('#updateData').click(function() {
    e.preventDefault();
    console.log('yes');
    var formData = $('#wholeForm').serialize();
    submitForm(formData);   
}); 
```

我没有收到任何错误，但我没有采取任何行动。

console.log 没有记录是，所以它让我确保它没有检测到是点击。

谢谢你的帮助

# php - ldap_bind()：无法绑定到服务器：没有这样的对象

> ID：15911623
> 
> 赞同：1
> 
> 时间：2013-04-09T20:14:29.520
> 
> 标签：php, ldap

我成功制作了一个`ldap_connect()`，但是当我尝试时，`ldap_bind()`我收到以下消息：`Warning: ldap_bind(): Unable to bind to server: No such object in /var/www/... on line 25`。这是什么意思？我做错了什么，或者服务器是否有一些配置阻止我进行身份验证？

我确信 for 的参数`ldap_bind()`是正确的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-10T08:36:07.060

我同时解决了这个问题。代码是这样的：

```
$ldaphost = "ldaps://XXX";
$ldapport = YY;

$ldaprdn="uid=username,ou=OU1,ou=OU2,ou=OU3,dc=dc1,dc=dc2,dc=dc3,dc=dc4";
$ldappass="password";

// Connecting to LDAP
$ldapconn = ldap_connect($ldaphost, $ldapport)
      or die("Could not connect to {$ldaphost}");

if ($ldapconn) {

    // binding to ldap server
    $ldapbind = ldap_bind($ldapconn, $ldaprdn, $ldappass);

    // verify binding
    if ($ldapbind) {
        echo "LDAP bind successful...";
    } else {
        echo "LDAP bind failed...";
    }

} 
```

我没有设置正确的组织单位（ous）。是`username`在其他欧。设置正确后，一切都很好。

# c# - 在 Windows 8 应用程序中使用 C# 从 NTP 服务器获取时间

> ID：15911624
> 
> 赞同：2
> 
> 时间：2013-04-09T20:14:42.457
> 
> 标签：c#, windows, windows-8, ntp

我需要开发一个从 NTP 服务器获取当前时间的应用程序，但我在 Windows 8 Store App 中找不到任何示例。如果我尝试使用普通的 C# 类，它就不起作用。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-05T20:21:08.990

我强烈建议避免从 HTML 页面中解析字符串 - 轻微的视图格式更改会破坏您的应用程序。

根据**[此答案](https://stackoverflow.com/a/12150289/303696)**中提供的示例，这是获取正确对象的[DatagramSocket改编：](http://msdn.microsoft.com/en-us/library/windows/apps/windows.networking.sockets.datagramsocket)`DateTime`

```
DatagramSocket socket = new DatagramSocket();
socket.MessageReceived += socket_MessageReceived;
await socket.ConnectAsync(new HostName("time.windows.com"), "123");

using (DataWriter writer = new DataWriter(socket.OutputStream))
{
    byte[] container = new byte[48];
    container[0] = 0x1B;

    writer.WriteBytes(container);
    await writer.StoreAsync();
} 
```

收到消息后，您可以通过内置阅读器处理传入的字节数组：

```
void socket_MessageReceived(DatagramSocket sender, DatagramSocketMessageReceivedEventArgs args)
{
    using (DataReader reader = args.GetDataReader())
    {
        byte[] b = new byte[48];

        reader.ReadBytes(b);

        DateTime time = GetNetworkTime(b);
    }
} 
```

`GetNetworkTime`与我提到的示例几乎相同，缓冲区作为参数之一传递：

```
public static DateTime GetNetworkTime(byte[] rawData)
{
    //Offset to get to the "Transmit Timestamp" field (time at which the reply 
    //departed the server for the client, in 64-bit timestamp format."
    const byte serverReplyTime = 40;

    //Get the seconds part
    ulong intPart = BitConverter.ToUInt32(rawData, serverReplyTime);

    //Get the seconds fraction
    ulong fractPart = BitConverter.ToUInt32(rawData, serverReplyTime + 4);

    //Convert From big-endian to little-endian
    intPart = SwapEndianness(intPart);
    fractPart = SwapEndianness(fractPart);

    var milliseconds = (intPart * 1000) + ((fractPart * 1000) / 0x100000000L);

    //**UTC** time
    var networkDateTime = (new DateTime(1900, 1, 1)).AddMilliseconds((long)milliseconds);

    return networkDateTime;
}

// stackoverflow.com/a/3294698/162671
static uint SwapEndianness(ulong x)
{
    return (uint)(((x & 0x000000ff) << 24) +
                   ((x & 0x0000ff00) << 8) +
                   ((x & 0x00ff0000) >> 8) +
                   ((x & 0xff000000) >> 24));
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:59:44.850

我想这就是你想要的。

```
using System.Net;
using System.Net.Http;
using System.Text.RegularExpressions;
using System.Threading.Tasks;

private async Task<DateTime?> GetNistTime()
{
    DateTime? dateTime = null; 
    HttpClient httpClient = new HttpClient();
    HttpRequestMessage request = new HttpRequestMessage(HttpMethod.Get, new Uri("http://nist.time.gov/timezone.cgi?UTC/s/0"));
    HttpResponseMessage httpResponseMessage = await httpClient.SendAsync(request, HttpCompletionOption.ResponseHeadersRead);
    string text = await httpResponseMessage.Content.ReadAsStringAsync();
    if (httpResponseMessage.StatusCode == HttpStatusCode.OK)
    {
        string html = await httpResponseMessage.Content.ReadAsStringAsync();
        string time = Regex.Match(html, @">\d+:\d+:\d+<").Value; //HH:mm:ss format
        string date = Regex.Match(html, @">\w+,\s\w+\s\d+,\s\d+<").Value; //dddd, MMMM dd, yyyy
        dateTime = DateTime.Parse((date + " " + time).Replace(">", "").Replace("<", ""));
    }
    return dateTime;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T08:16:50.383

您需要一个[StreamSocket](http://msdn.microsoft.com/en-US/library/windows/apps/windows.networking.sockets.streamsocket?cs-save-lang=1&cs-lang=csharp#code-snippet-1) ，然后自己实现 NTP 协议。如果您有用于经典 Windows 的现有 NTP C# 类，则可以调整代码以改用[StreamSocket](http://msdn.microsoft.com/en-US/library/windows/apps/windows.networking.sockets.streamsocket?cs-save-lang=1&cs-lang=csharp#code-snippet-1)。

# ios - GPUImage 相机需要五秒钟

> ID：15911626
> 
> 赞同：3
> 
> 时间：2013-04-09T20:14:50.397
> 
> 标签：ios, gpuimage

在 iPad Retina Display（设备，不是模拟器）上，我首先使用 Apple 的 AVFoundation 拍摄静态照片，但我切换到 GPUImage 因为我想要 ChromaKeyBlend 功能。得到了运行。但是，问题是当我点击我的相机按钮时，使用 AVFoundation，相机立即出现，而使用 GPUImage 需要五秒钟！

这是预期的加载时间吗？我知道它必须是同步的，不能在后台。

那么，其他人正在做什么来加快速度，或者他们只是在屏幕上放置一个活动指示器并让用户等待这五秒钟？

任何提示将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T21:50:45.863

听起来您没有使用 GPUImageStillCamera 作为 GPUImage 管道的输入。使用 UIImage，特别是通过将平滑缩放设置为 YES 的新 GPUImagePicture 实例，将比直接从相机捕获和处理照片要慢得多。通过 AV Foundation 从相机捕获，将其转换为 UIImage，然后通过 GPUImagePicture 将该 UIImage 重新上传到 GPU 会引入大量不必要的开销。请改用 GPUImageStillCamera 以获得最佳性能。

查看 SimplePhotoFilter 示例了解如何完成此操作。当我在我的 Retina iPad（第 3 代，而不是第 4 代）上测试该应用程序时，拍摄、过滤和返回一张完整照片总共需要 0.9 秒，而将照片保存到相机胶卷则需要额外 0.6 秒。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T04:18:29.733

好吧，我正在将图像加载到 GPUImagePicture 中，但我认为我的管道是正确的，我真的很喜欢灵敏度的实时调整（使用滑块）。正如我所说，我尝试在背景中预处理图像并缩短了几秒钟（即使我使用相同大小的完全透明图像，这仍然需要 5 秒）。希望有一些秘方；）

```
stillCamera = [[GPUImageStillCamera alloc] init];
stillCamera.outputImageOrientation = UIInterfaceOrientationLandscapeLeft;

UIImage *inputImage = [UIImage imageNamed:@"RedCurtain-60-8x10.jpg"];  // 346kb
self.sourcePicture = [[GPUImagePicture alloc] initWithImage:inputImage smoothlyScaleOutput:YES];
[self.sourcePicture processImage];

self.chromaKeyBlendFilter = [[GPUImageChromaKeyBlendFilter alloc] init];
[self.chromaKeyBlendFilter setColorToReplaceRed:0.0 green:1.0 blue:0.0];
[self.chromaKeyBlendFilter setThresholdSensitivity:0.35f];

[stillCamera addTarget:self.chromaKeyBlendFilter];
[self.sourcePicture addTarget:self.chromaKeyBlendFilter];
[self.chromaKeyBlendFilter addTarget:(GPUImageView *)self.videoPreviewView]; 
```

# php - Eclipse IDE：魔术函数访问的私有和受保护属性的代码完成

> ID：15911630
> 
> 赞同：0
> 
> 时间：2013-04-09T20:15:03.410
> 
> 标签：php, eclipse, oop, doxygen, code-completion

*正如它所说，[可以回答我自己的问题](https://blog.stackoverflow.com/2011/07/its-ok-to-ask-and-answer-your-own-questions/)并找到一些技巧来在 Eclipse IDE（用于 PHP）中实现代码完成，我想与其他用户分享。*

[我在这里](https://stackoverflow.com/questions/3814733/code-completion-for-private-protected-member-variables-when-using-magic-get)找到了一些解决方案，但不知何故，我无法使 doxygen 与这些声明的属性一起正常工作，我找到了一些解决方法。

**问题**

如果您使用[魔术方法](http://php.net/manual/en/language.oop5.magic.php)，特别是对于属性重载[`__get()`，，`__set()`](http://www.php.net/manual/en/language.oop5.overloading.php#object.get)（可能它也涉及`__call()`和`__invoke()`），则存在一个问题，即属性名称以某种方式定义为动态（作为变量变量）并且在任何范围内都不可见。这是可能的，因为它们的名称作为字符串传递并且可以以任何方式进行操作。

所以不可能在代码完成中拥有那些*神奇地*访问的属性（或方法），在我的情况下（不知道为什么，但没关系），在类的生成文档中。

（代码完成是指编辑器通过显示所有可能的属性和方法来帮助程序员，从而避免一些错误。）

考虑我们有以下类：

```
/**
 * Test class
 */
class myClass {
  private $field_someValue1;
  private $field_someValue2;

  /**
   * Magic method getter for hidden properties.
   * @param string $name
   * @return mixed
   */
  public function __get($name){
    switch($name){
      case 'foo': return $this->$field_someValue1; break;
      case 'bar': return $this->$field_someValue2; break;
      default:
        // handle non-existing property error here
    }
  }

  /**
   * Simply do nothing, but be some public part of the class.
   * @return void
   */
  public function doNothing(){
  }
}

$a = new myClass(); 
```

因此，在我的代码中，当我键入时`$a->`，编辑器应该通过提示我的对象有两个属性来帮助我：`foo`和`bar`. 当然它不能显示`$field_someValue1`，`$field_someValue2`因为它们是私人的。

如何让 Eclipse 帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:16:05.940

**解决方案**

我的解决方案（或者更确切地说是解决方法）是创建一个新文件，该文件将包含与项目主文件中相同的类名。我为此创建了一个特殊的目录。

在那里，我可以轻松地声明我通过`__get()`(等) 访问的所有隐藏属性，如下所示`__set()`：`__isset()`

```
class myClass {
 /**
  * Some accessible hidden property.
  * @var string $foo
  */
  public $foo;

 /**
  * Another accessible hidden property.
  * @var bool $bar
  */
  public $bar;
} 
```

就这样。

这使得 Eclipse 允许通过提示类的属性来帮助我（它结合了两个同名类的所有属性），并且还为 doxygen 提供了适当的文档信息。

问题是 doxygen 将在其“文件”部分生成此文件；如果你不在乎，没关系。

请注意，在我的“文档文件”中，我不需要重新键入该`doNothing()`方法，因为它是可见的（因为它是公开的）。

希望这对任何人都有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-27T21:14:33.250

更优雅的是在同一个类文件中使用 phpdoc @property：

```
/**
 * Test class
 * @property foo $foo
 * @property bar $bar
 */
class myClass {
  private $field_someValue1;
  private $field_someValue2; 
```

# php - 页面选择器 PHP

> ID：15911644
> 
> 赞同：0
> 
> 时间：2013-04-09T20:15:50.537
> 
> 标签：php

我需要能够在一个字符串或其他东西中获取文件名和“页面”变量。因为我需要检查您是否来自 index.php 或其他页面。我的代码的问题在于该语句将始终为“true”，因为“$file”仅包含文件名而不包含文件名和 $_GET 变量，例如（index.php?page=news）。有什么想法吗？

```
$file = mysql_real_escape_string(basename(__FILE__));

if ($file != "index.php")
    $page = mysql_real_escape_string($_GET['page']);

else
    $page = "index"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:17:14.780

检查`!empty($_GET["page"])`而不是`$file != "index.php"`.

然后你只设置`$page`参数中是否还有内容`page`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:23:20.037

您需要将 Querystring 添加到 $file var 的末尾以进行比较。$_GET 包含查询字符串，http_build_query() 会将其转换为 KVP 格式，如“var1=val1&var2=val2&var3=val3”：

```
$file = mysql_real_escape_string(basename(__FILE__)) .http_build_query($_GET);

if ($file != "index.php")
    $page = mysql_real_escape_string($_GET['page']);

别的
    $page = "索引";

```

# c# - ListPicker 不再适用于我的 Windows Phone 8 应用程序

> ID：15911650
> 
> 赞同：1
> 
> 时间：2013-04-09T20:16:01.090
> 
> 标签：c#, xaml, windows-phone-8

我有一个 Windows Phone 应用程序。此应用程序在 Windows Phone 7.5 中运行良好。但是，我需要进行一些更新。所以我决定使用最新的工具包。当我决定做出改变时，我的 ListPicker 停止工作。我有以下代码：

```
<tk:ListPicker x:Name="typeListPicker" Grid.Row="7" ItemsSource="{Binding Path=MyTypes}" 
  SelectedItem="{Binding Path=SelectedType, Mode=TwoWay}" 
  ItemTemplate="{StaticResource typeTemplate}" 
  FullModeItemTemplate="{StaticResource fullTypeTemplate}" Margin="12,-2,12,0">
</tk:ListPicker> 
```

目前，MyTypes 中有 10 个项目。由于此集合的大小，将显示完整模式。但是，当我选择一个项目时，我不会回到 ListPicker 所在的屏幕。相反，我被带回到承载我正在显示的屏幕的页面。奇怪的是，我没有看到抛出异常或任何这种性质。

为了证实我的怀疑，我从 MyTypes 中删除了几个项目，只剩下 3 个项目。这样，将不会显示完整模式。当我这样做时，我的屏幕按预期工作。我无法弄清楚为什么完整模式不再在我的应用程序中工作。任何的意见都将会有帮助。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:45:44.687

我在这里一遍又一遍地看到这个问题的不同变化。

您的问题是 SelectedItem 在 Windows Phone 8 中不是可通知（不可绑定）属性。

这个[问题](https://stackoverflow.com/questions/15889564/exposing-an-unbindable-property-to-the-viewmodel/15890090#15890090)的答案将引导您找到解决方案，同时解释正在发生的事情。

# php - Codeigniter 不保留电子邮件字段值

> ID：15911655
> 
> 赞同：1
> 
> 时间：2013-04-09T20:16:47.950
> 
> 标签：php, codeigniter, validation, codeigniter-2

当验证失败时，我在 CodeIgniter 中保留表单值时遇到了一个奇怪的错误。我在一个表单中使用了许多字段，其中一个是电子邮件。

我已经实现了电子邮件的验证规则如下：

```
$this->form_validation->set_rules('email','E-Mail',
'trim|required|xss_clean|is_unique[user.user_email]|callback_validateEmail'); 
```

`validateEmail`功能如下：

```
 function validateEmail($email){
        $this->load->helper('email');
        if((!valid_email($email))){
            $this->form_validation->set_message('validateEmail',
              'The E-Mail you entered is invalid');
            return false;
        }
    } 
```

在表单中，我对电子邮件字段使用以下代码：

```
<td align="left">
   <input type="text" name="email" id="email" 
          value="<?php echo set_value('email');?>">
</td> 
```

发生的情况是，当用户输入无效的 E-Mail 值（如 "abc123" 或 "abc123@" ）时，将保留 E-Mail 值。但是，当用户输入正确的电子邮件地址时，例如“abc@yahoo.com”，并且由于其他字段中的错误而导致表单验证失败，则电子邮件字段的值不会被保留并消失。

我不知道为什么这会失败。有人可以请一些光吗？

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:55:29.667

对于有效的电子邮件，该函数未返回 true。

尝试在电子邮件有效时返回 true。

```
function validateEmail($email){
    $this->load->helper('email');
    if((!valid_email($email))){
    $this->form_validation->set_message('validateEmail','The E-Mail you entered is invalid');
    return false;
    }
return true;
 } 
```

# r - r 与调查数据的相关性

> ID：15911658
> 
> 赞同：0
> 
> 时间：2013-04-09T20:16:59.000
> 
> 标签：r, correlation, survey

我有两列调查数据。要获得卡方值，我可以使用：

> chisq.test(dat$colA, dat$colB)

输出可能是

> X 平方 = 20，df = 5，p 值 = 0.2909

如何获得两列之间的相关性，值在 -1 和 1 之间？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:22:10.807

用这个：`cor(dat$colA, dat$colB)`

# c++ - 转发指向值的指针，而不是值本身

> ID：15911660
> 
> 赞同：0
> 
> 时间：2013-04-09T20:17:05.577
> 
> 标签：c++, pointers

我想要一个指向字符数组的指针数组......（很奇怪，我知道，但我不能使用 STL lib）所以我将它声明为：`const char *** DbRecord; DbRecord = new const char**[1000];`

然后我有了这个功能：

```
 bool AddToArray(const char* value,
        const char *** database); 
```

如何将指向`const char * value`我的 DbRecord 的指针存储在位置上`[0]`？以及如何访问它以便能够读取实际保存在那里而不是指针的值？我真的对 C++ 中的指针感到困惑：-/ 感谢您的解释......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:20:47.077

> 如何将指向该 const char * 值的指针存储到我的 DbRecord 位置 [0] ？

你不能，因为`value`一旦函数结束就会超出范围。

你真的需要三颗星吗？在我看来，两个就足够了：

```
const char** DbRecord;
DbRecord = new const char*[1000];

void AddToArray(const char* value, const char** database)
{
    database[0] = value;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:22:31.180

DbRecord 是一个指向 的指针数组`const char **`，所以当你说它`DbRecord[0]`实际上是指 3D char 数组的第一行时，它的元素是`const char**`类型。如果这是您想要的，那么`DbRecord[0][0] = value`会将变量存储在`value`。`index row [0][0]`

当你为 DbRecord 分配内存时，只做

```
DbRecord = new const char**[1000]; 
```

还不够，你必须设置其他两个维度的大小。

您可以尝试在 C++ 中使用`std::string`to replace`const char *`和`vector<vector<string>>` replace `const char ***`，在这种情况下，您不必再担心那些指针了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T20:38:42.563

行。你问的问题很简单。:)

> 我想有一系列指向字符数组的指针......

你在正确的轨道上。至少是这样`char *[]`。但是，众所周知，这很容易翻译成`char **`. 当然，要拥有指向存储的指针，您需要添加第三颗星。到目前为止，您的问题是正确的。

> 如何将指向该 const char * 值的指针存储到我的 DbRecord 位置 [0]

那么有两种方法可以做到这一点。*您提出*的问题的正确答案是**取消引用**指针。例如：

```
bool AddToArray(const char* value,
    const char *** database)
{
    bool success = false;
    ((*database)[0]) = value;
    if ( (*database)[0] == value ) success == true;
    return success;
} 
```

从技术上讲，将指针作为数组访问也会将其作为索引取消引用。所以`[0]`那里将直接取消引用指针。根据您布置分配和内存的方式，您也可以这样做：

```
...
(*(database[0])) = value;
... 
```

注意那里的细微差别。第一个示例将其视为*指向指针数组的指针*（或指向数组数组的指针，具体取决于您的想法），而第二个示例将其视为*指向数组的指针数组*（或数组指针的指针）。

作为 C 开发人员，学习掌握多级指针是您可以做的最好的事情之一，但在 C++ 中，这通常是一种不受欢迎的做法。

希望这可以帮助。

编辑：`char *[]`不是`char [][]`

# java - 在java中将实数转换为Comparable？

> ID：15911661
> 
> 赞同：1
> 
> 时间：2013-04-09T20:17:06.213
> 
> 标签：java, casting, numbers, integer, comparable

假设我有一个将数字插入二叉树的方法

```
public BinaryNode insert(Comparable x, BinaryNode t) {
    //Logic here
}

BinaryTree t = new BinaryTree(); 
```

我将如何投射一个数字，例如 4 以匹配此方法的正确参数？前任。

```
t.insert(4, t ) // I know this wont work, but I wanted to to something like this 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T20:19:35.850

它应该可以正常工作 - 它将被装箱成一个整数。示例代码：

```
public class Test {

    static void foo(Comparable<?> c) {
        System.out.println(c.getClass());
    }

    public static void main(String args[]) throws Exception {
        foo(10);
    }
} 
```

即使您使用 raw type `Comparable`，这也有效，尽管我不建议这样做。

诚然，我强烈怀疑您最好使您的`BinaryNode`（并且可能是`BinaryTree`）类通用，此时您将拥有：

```
// You shouldn't need to pass in the node - the tree should find it...
BinaryTree<Integer> tree = new BinaryTree<Integer>();
tree.insert(10); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:21:31.470

如果您通过 new Integer(4) 而不是 4 假设您使用的是 5 之前的 Java 版本（正如您所说的它不起作用），它应该可以工作。

# android - 如何知道哪个意图打开了活动

> ID：15911662
> 
> 赞同：1
> 
> 时间：2013-04-09T20:17:10.247
> 
> 标签：android

嗨，我有两项活动要参加一项活动。打开活动时，两个活动中的任何一个都会显示一个数字

我需要知道数字的来源，以便进行适当的计算，我想我需要一个 if 语句，但不知道如何开始

```
Intent intent = new Intent(calculateA.this,
    WAmounts.class);
    intent.putExtra("Result",Total);
    startActivity(intent);

Intent intent = new Intent(CalcB.this,
    WAmounts.class);
    intent.putExtra("ResultB",Total);
        startActivity(intent); 
```

第三次活动

```
 Intent sender = getIntent();
    int result = sender.getExtras().getInt("Result");
    answer.setText(result+"");

    int resultB = sender.getExtras().getInt("ResultB");
    answer.setText(resultB+"");

//If number came from first activity  

    a = Integer.parseInt (answer.getText().toString());
    total = (float) (a *x); 
    sd.setText(String.format("%.1f" ,total));

    b = Float.parseFloat (sand.getText().toString());
    total1 = (int)Math.ceil (b*f);
    c.setText(Integer.toString(total1));

  //If number came from second activity     

  a = Integer.parseInt (answer.getText().toString());
  total = (float) (a *x); 
  sd.setText(String.format("%.1f" ,total));

  b = Float.parseFloat (sand.getText().toString());
  total1 = (int)Math.ceil (b*f);
  c.setText(Integer.toString(total1)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:23:41.423

只需传递一些“附加”，如下所示：[如何在 Android 应用程序中的活动之间传递数据？](https://stackoverflow.com/questions/2091465/how-do-i-pass-data-between-activities-in-android)

```
intent.putExtra("yourLabel", "text1"); 
```

然后在新的活动中使用

```
if (extras != null) {
    String value = extras.getString("yourLabel");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:21:46.140

由于您将附加功能称为“result”和“resultB”，因此您可以使用 sender.hasExtra("result")，如果它返回 false - 您知道哪个活动启动了此意图。

请注意，代码中的 bot sender 和 sender1 具有相同的意图 - 启动此活动的意图。你不必得到它两次。

# jakarta-ee - “在关系属性中使用非实体 [class java.lang.Double] 作为目标实体”，我做错了什么？

> ID：15911666
> 
> 赞同：1
> 
> 时间：2013-04-09T20:17:19.800
> 
> 标签：jakarta-ee, jpa, glassfish, persistence, double

我无法运行我的项目，因为我收到此错误：

```
Exception Description: Predeployment of PersistenceUnit [RekeningAdministratiePU] failed.
Internal Exception: Exception [EclipseLink-7250] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.ValidationException
Exception Description: [class domain.Regio] uses a non-entity [class java.lang.Double] as target entity in the relationship attribute [field wegCategoriePrijzen].
javax.persistence.PersistenceException: Exception [EclipseLink-28018] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.EntityManagerSetupException
Exception Description: Predeployment of PersistenceUnit [RekeningAdministratiePU] failed.
Internal Exception: Exception [EclipseLink-7250] (Eclipse Persistence Services - 2.3.2.v20111125-r10461): org.eclipse.persistence.exceptions.ValidationException
Exception Description: [class domain.Regio] uses a non-entity [class java.lang.Double] as target entity in the relationship attribute [field wegCategoriePrijzen]. 
```

我的实体类看起来像这样

```
@Id
@GeneratedValue(strategy= GenerationType.IDENTITY)
private Long id;
private String naam;
@OneToMany(cascade= { CascadeType.PERSIST,CascadeType.MERGE,CascadeType.REMOVE})
private Collection<Locatie> locaties;
@OneToMany(cascade= { CascadeType.PERSIST,CascadeType.MERGE,CascadeType.REMOVE})
private Collection<Double> autoCategorieMutaties;
@OneToMany(cascade= { CascadeType.PERSIST,CascadeType.MERGE,CascadeType.REMOVE})
private Collection<Double> wegCategoriePrijzen;
private Double binnenrijTarief; 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T20:24:23.950

@`OneToMany`映射的目标必须是有效的 JPA 实体。在您的情况下，该类`Double`肯定不是实体类，因此会出现错误消息。如果您只是想存储值的集合，请考虑改用 @ `ElementCollection`。

```
@ElementCollection
private Collection<Double> wegCategoriePrijzen; 
```

# javascript - Javascript html画布变量作为颜色alpha通道

> ID：15911668
> 
> 赞同：0
> 
> 时间：2013-04-09T20:17:26.573
> 
> 标签：javascript, html, variables

我该怎么做：

```
 alpha = alpha + 1;
  ctx.strokeStyle = 'rgba(0,153,255,alpha)';
  ctx.stroke(); 
```

我试图将变量`alpha`作为颜色的 alpha 通道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:19:52.190

```
ctx.strokeStyle = 'rgba(0,153,255,' + alpha + ')'; 
```

# android - 为传入的 SMS 注册 BroadcastReceiver

> ID：15911670
> 
> 赞同：9
> 
> 时间：2013-04-09T20:17:29.107
> 
> 标签：android, sms, block

如何注册 BroadcastReceiver 以阻止传入的 SMS

```
 IntentFilter intentFilter = new IntentFilter(Intent."what should be here");
     ctx.registerReceiver(outgoingReceiver, intentFilter); 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T20:47:38.880

尝试以下操作：

```
intentFilter.addAction("android.provider.Telephony.SMS_RECEIVED"); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-04-17T06:41:52.763

你应该检查权限

```
if (ContextCompat.checkSelfPermission(mActivity, Manifest.permission.RECEIVE_SMS) != PackageManager.PERMISSION_GRANTED) {
    ActivityCompat.requestPermissions(mActivity, new String[]{Manifest.permission.RECEIVE_SMS}, 0);
} else {
        // register sms receiver
        IntentFilter filter = new IntentFilter(Telephony.Sms.Intents.SMS_RECEIVED_ACTION);
        registerReceiver(smsReceiver, filter);
}

@Override
public void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {
    super.onRequestPermissionsResult(requestCode, permissions, grantResults);

    if (ContextCompat.checkSelfPermission(mActivity, Manifest.permission.RECEIVE_SMS) != PackageManager.PERMISSION_GRANTED) {

    } else {
        // register sms receiver
        IntentFilter filter = new IntentFilter(Telephony.Sms.Intents.SMS_RECEIVED_ACTION);
        registerReceiver(smsReceiver, filter);
}
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T20:49:14.247

在您的清单中注册一个具有最高优先级的接收器：

```
 <receiver android:name=".SmsReceiver"> 
        <intent-filter android:priority="9999"> 
            <action android:name="android.provider.Telephony.SMS_RECEIVED" /> 
        </intent-filter> 
    </receiver> 
```

创建广播接收器类：

```
public class SmsReceiver extends BroadcastReceiver {
    @Override
    public void onReceive(Context context, Intent intent) {
    }
} 
```

实现 onReceive 方法：

```
Bundle bundle = intent.getExtras();
if (bundle != null && bundle.containsKey("pdus")) {
    Object[] pdus = (Object[]) bundle.get("pdus");
    SmsMessage sms = SmsMessage.createFromPdu((byte[]) pdus[0]);
    String senderNumber = sms.getOriginatingAddress();
    if( senderIsInBlackList(senderNumber)) {
        abortBroadcast();
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-09T20:53:06.423

在你的 AndroidManifest.xml 中声明接收者：

```
 <receiver
        android:name="com.example.YourSmsReceiver"
        android:exported="true" >
        <intent-filter android:priority="1000" >
            <action android:name="android.provider.Telephony.SMS_RECEIVED" />
        </intent-filter>
 </receiver> 
```

希望这会有所帮助，亚龙

# json - 以 JSON 格式查询 Microsoft Dynamics NAV 2013 Odata 服务

> ID：15911671
> 
> 赞同：2
> 
> 时间：2013-04-09T20:17:29.920
> 
> 标签：json, web-services, odata, microsoft-dynamics

我在[这里](http://msdn.microsoft.com/en-us/library/hh168269%28v=nav.70%29.aspx)读到，Odata Webservice 也支持 JSON 格式。但我怎么能得到呢？

当我发送请求时，我只得到以下格式> application/atom+xml

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T22:09:05.200

尝试这样的事情：

```
$.ajax({
       type: "GET",
       contentType: "application/json; charset=utf-8",
       datatype: "json",
       url: odataSelect,
       beforeSend: function (XMLHttpRequest) { XMLHttpRequest.setRequestHeader("Accept", "application/json"); },
       success: function (data, textStatus, XmlHttpRequest) 
           { 
               ProcessReturnedEntities(data.d.results); 
               ProcessReturnedEntity(data.d);
           },
       error: function (XmlHttpRequest, textStatus, errorThrown) { alert('OData Select Failed: ' + odataSelect); }
   }); 
```

有关完整示例，请参见此[站点](http://crmbusiness.wordpress.com/2011/03/09/crm-2011-using-odata-and-json/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-18T08:24:35.760

对于带有 HTML 和 JS 的 Windows 8 应用程序中的 WinJS，其如下：

```
WinJS.xhr({
    type: "GET",
    datatype: "json",
    url: 'http://localhost:7048/DynamicsNAV70/OData/P_21/',
    headers: {
        "Content-type": "application/json; charset=utf-8", "Accept": "application/json" },
    }).done(function (data, textStatus, XmlHttpRequest)  {
         console.log();
    },
    function (err) {
        console.log();
    }); 
```

请注意标题的不同定义。值完全相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-21T22:03:12.270

要使用 JSON 而不是 XML 与您的 OData Web 服务进行通信，您实际上只需要设置以下两个标头：

*   `Accept: application/json`
*   `Content-Type: application/json; charset=utf-8`

或者，您也可以将其放在`?$format=json`URL 的末尾。

无论您使用何种编程语言与 Microsoft Dynamics NAV 通信，这都是正确的。它同样适用于 JavaScript、JAVA、Python、Ruby、PHP，...

* * *

### 演示代码

以下是从 PHP 执行基本 GET 请求的方法：

```
$ch = curl_init(); 

curl_setopt($ch, CURLOPT_URL, 'https://<Server>:<WebServicePort>/<ServerInstance>/OData/Company(\'<CompanyName>\')/customer(\'1\')'); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);   
curl_setopt($ch, CURLOPT_POST, false);  

curl_setopt($ch, CURLOPT_USERPWD, 'username:password');   
curl_setopt($ch, CURLOPT_HTTPHEADER, [
        'Accept: application/json',          
        'Content-Type: application/json; charset=utf-8',
]);   

$response = json_decode(curl_exec($ch), TRUE);
echo json_encode($response, JSON_PRETTY_PRINT);
// Close handle
curl_close($ch); 
```

以下是从 PHP 发出基本 POST 请求的方法：

```
$ch = curl_init(); 

curl_setopt($ch, CURLOPT_URL, 'https://<Server>:<WebServicePort>/<ServerInstance>/OData/Company(\'<CompanyName>\')/customer'); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);   
curl_setopt($ch, CURLOPT_POST, true);  

curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode([
    "Name" => "This is a test customer",
    ...
]));

curl_setopt($ch, CURLOPT_USERPWD, 'username:password');   
curl_setopt($ch, CURLOPT_HTTPHEADER, [
        'Accept: application/json',          
        'Content-Type: application/json; charset=utf-8',
]);   

$response = json_decode(curl_exec($ch), TRUE);
echo json_encode($response, JSON_PRETTY_PRINT);
curl_close($ch); 
```

以下是如何从 PHP 执行基本 PATCH 请求：

```
$ch = curl_init(); 

curl_setopt($ch, CURLOPT_URL, 'https://<Server>:<WebServicePort>/<ServerInstance>/OData/Company(\'<CompanyName>\')/customer(\'1\')'); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);   
curl_setopt($ch, CURLOPT_POST, true);  
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'PATCH');

curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode([
    "Name" => "This is a test customer",
    ...
]));

curl_setopt($ch, CURLOPT_USERPWD, 'username:password');   
curl_setopt($ch, CURLOPT_HTTPHEADER, [
        'Accept: application/json',          
        'Content-Type: application/json; charset=utf-8',
        'If-Match: W/"\'' .  $etag . '\'"'
        // You can get your etag value by doing a get request first
]);   

$response = json_decode(curl_exec($ch), TRUE);
echo json_encode($response, JSON_PRETTY_PRINT);
curl_close($ch); 
```

以下是从 PHP 执行基本 DELETE 请求的方法：

```
$ch = curl_init(); 

curl_setopt($ch, CURLOPT_URL, 'https://<Server>:<WebServicePort>/<ServerInstance>/OData/Company(\'<CompanyName>\')/customer(\'1\')'); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);   
curl_setopt($ch, CURLOPT_POST, true);  
curl_setopt($ch, CURLOPT_CUSTOMREQUEST, 'DELETE');

curl_setopt($ch, CURLOPT_USERPWD, 'username:password');   
curl_setopt($ch, CURLOPT_HTTPHEADER, [
        'Accept: application/json',          
        'Content-Type: application/json; charset=utf-8',
        'If-Match: W/"\'' .  $etag . '\'"'
        // You can get your etag value by doing a get request first
]);   

$response = json_decode(curl_exec($ch), TRUE);
echo json_encode($response, JSON_PRETTY_PRINT);
curl_close($ch); 
```

* * *

### 注1

如果您需要创建/更新数据，请不要忘记对您的 POST 字段进行 Json 编码：

```
curl_setopt($ch, CURLOPT_POST, true);  
curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode([
    "Name"=> "This is the name of my new customer"
])); 
```

改用查询字符串或数组会产生错误`An error occurred while processing this request.`，这可能会让您困惑很长时间......

* * *

### 笔记2

对于那些不喜欢处理原始 cURL 请求的人，我刚刚上传了一个基本的 OO 包装类，您可以在[**这个 gist**](https://gist.github.com/jslegers/b2965bad99ad299741dc)中找到它。

# sql - SQL Server 触发器不会运行完整的更新语句？

> ID：15911672
> 
> 赞同：0
> 
> 时间：2013-04-09T20:17:30.613
> 
> 标签：sql, tsql, triggers, sql-server-2008-r2

问题：我写了一个触发器，它应该在进入`INVOICE`表之后更新表，但它不会更新发票表。触发器触发，但语句块不会执行。`INSERT``LINE``Update`

我在执行`INSERT`到行表时进行了调试，发现一旦到达`UPDATE`语句，它就会跳过它并且不运行该代码。几天来，我一直试图弄清楚这一点。

这是我的触发代码

```
ALTER TRIGGER [dbo].[trgInvoiceInsert] ON [dbo].[LINE]
AFTER INSERT
AS
  declare @linUnits numeric(9,2);
  declare @linPrice numeric(9,2);
  declare @invNum   int;

  select @linUnits = LINE_UNITS from inserted;
  select @linPrice = LINE_PRICE from inserted;
  select @invNum = INV_NUMBER from inserted;
BEGIN
 UPDATE i --From here it jumps to the start of the next Update
    SET INV_SUBTOTAL = INV_SUBTOTAL + (@linUnits * @linPrice)
 FROM dbo.INVOICE as i
 WHERE i.INV_NUMBER = @invNum 

 UPDATE i
    SET INV_TOTAL = INV_SUBTOTAL + INV_TAX  
 FROM dbo.INVOICE as i
 WHERE i.INV_NUMBER = @invNum 

 PRINT 'Trigger fired Successfully.' 
```

结尾

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T20:24:57.820

好吧，使用这样的语句：

```
select @linUnits = LINE_UNITS from inserted; 
```

表示您假设触发器**每行**触发- 它**没有**。

**SQL Server 触发器每条语句**触发一次- 因此，如果您的语句向表中插入多行`Line`，您的触发器将为完整的语句触发**一次**，但`Inserted`伪表将包含**多行**数据。

因此，您需要重写触发器以考虑到这一点 -`Inserted`表可以（并且**将！**）包含多行 - 并且您的触发器代码需要处理这一点。

# python - 未封闭的 XML 令牌

> ID：15911674
> 
> 赞同：2
> 
> 时间：2013-04-09T20:17:36.017
> 
> 标签：python, xml

我将如何处理 Python 2.6 中的这个错误？

```
Traceback (most recent call last):
  File "./fetch_xml_collect.py", line 32, in <module>
    tree=ET.parse(response)
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/xml/etree/ElementTree.py", line 862, in parse
    tree.parse(source, parser)
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/xml/etree/ElementTree.py", line 587, in parse
    self._root = parser.close()
  File "/System/Library/Frameworks/Python.framework/Versions/2.6/lib/python2.6/xml/etree/ElementTree.py", line 1254, in close
    self._parser.Parse("", 1) # end of data
xml.parsers.expat.ExpatError: unclosed token: line 56, column 1 
```

当前正在实现的代码：

```
while urlget==1:
        try:
                response = urllib.urlopen(rep)
        except IOError:
                print("reason")
        else:
                try:
                        tree=ET.parse(response)
                except IOError:
                        print("XML Parse Error\n")
                else:
                        root=tree.getroot()
                        print root[0].text
                        powerlist=tree.findall('meter/power')
                        print powerlist[0].tag,powerlist[0].text 
```

问题是：我将如何处理给定代码中的上述错误？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T20:19:48.333

```
try:
   #Some code
   ...
except xml.parsers.expat.ExpatError, ex:
   print ex
   continue 
```

像上面这样的东西应该可以工作。只要`continue`你得到那个错误。它将继续循环的下一次迭代，或者如果它是最后一次迭代，则跳出循环。

XML 格式不正确，无法处理。跳过它并继续下一个。

# grails - Grails Error log.info 修复我的代码

> ID：15911675
> 
> 赞同：0
> 
> 时间：2013-04-09T20:17:36.953
> 
> 标签：grails, logging, groovy

我的错误非常疯狂。我想调试我的错误。插入 log.info $game，错误就消失了。

代码：

```
private void calcAndUpdateStatEntriesOfOutOfOrderGame(Game game, Team team) {
    Competition competition = game.round.competition
    Round currentRound = competition.currentRound

    // if game of team has been played in current round -> update stats of current round
    // if not => update previous round
    Round statsRound
    if (game.state > Game.STATE_NOT_STARTED) {
        statsRound = currentRound       // the stats of the game are saved to the current round of the competition              
    } else {
        // the home team did not yet play yet at the current round -> save the stats at the previous round, otherwise it will be overwritten when the game is played                    
        statsRound = currentRound.previousRound
    }

    CompetitionTableEntry compTableEntry = CompetitionTableEntry.getByRoundAndTeam(statsRound, team)    // get the stats for home team / round of game      
    if (!compTableEntry) {
        // looks like there are no stats created for this round yet => create them
        createCompetitionRankingEntries(statsRound, false)
        compTableEntry = CompetitionTableEntry.getByRoundAndTeam(statsRound, team)
    }

    def stats = getStatisticsForTeamUntilGame(competition, game, team)
    compTableEntry.properties = stats
    compTableEntry.save()
} 
```

错误：

```
Error 500: Executing action [updateResult] of controller [at.ligaportal.GameController] caused exception: collection [at.ligaportal.Team.staffMembers] was not processed by flush()
Servlet: grails
URI: /ligaportal/grails/game/updateResult.dispatch
Exception Message: collection [at.ligaportal.Team.staffMembers] was not processed by flush() 
Caused by: collection [at.ligaportal.Team.staffMembers] was not processed by flush() 
Class: ApiAuthenticationFilter 
At Line: [77] 
Code Snippet: 
```

当我`Round currentRound = competition.currentRound`在行后添加

```
log.info "$game" 
```

错误消失了，一切正常。但这是我无法解决的问题......

我真正的问题在哪里？

# jquery - 隐藏菜单，直到一个框悬停

> ID：15911678
> 
> 赞同：0
> 
> 时间：2013-04-09T20:17:45.963
> 
> 标签：jquery, html, css

我有一个手风琴风格的菜单，它浮动到页面的右侧。它占用了很多空间，我想找到一种方法让它隐藏起来。

我怎样才能将一个橙色框放在它的位置，并且每当悬停时，菜单就会出现。

例子：

![在此处输入图像描述](https://i.stack.imgur.com/Xoebs.png)

我的菜单：http: [//jsfiddle.net/4dHYq/](http://jsfiddle.net/4dHYq/)

HTML：

```
<ul class="menu">
        <li class="item1"><a href="#">ABOUT US</a>
            <ul>
                <li class="subitem1"><a href="#">About Us</a></li>
                <li class="subitem2"><a href="#">Strange “Stuff”&lt;/a></li>
                <li class="subitem3"><a href="#">Automatic Fails</a></li>
                <li class="subitem1"><a href="#">Cute Kittens</a></li>
                <li class="subitem2"><a href="#">Strange “Stuff”&lt;/a></li>
                <li class="subitem3"><a href="#">Automatic Fails</a></li>
            </ul>
        </li>
        <li class="item2"><a href="#">ACADEMICS</a>
            <ul>
                <li class="subitem1"><a href="#">Cute Kittens</a></li>
                <li class="subitem2"><a href="#">Strange “Stuff”&lt;/a></li>
                <li class="subitem3"><a href="#">Automatic Fails</a></li>
            </ul>
        </li>
        <li class="item3"><a href="#">RESOURCES</a>
            <ul>
                <li class="subitem1"><a href="#">Cute Kittens</a></li>
                <li class="subitem2"><a href="#">Strange “Stuff”&lt;/a></li>
                <li class="subitem3"><a href="#">Automatic Fails</a></li>
            </ul>
        </li>
        <li class="item4"><a href="#">DEPARTMENTS</a>
            <ul>
                <li class="subitem1"><a href="#">Cute Kittens</a></li>
                <li class="subitem2"><a href="#">Strange “Stuff”&lt;/a></li>
                <li class="subitem3"><a href="#">Automatic Fails</a></li>
            </ul>
        </li>
        <li class="item5"><a href="#">FAQs</a>
            <ul>
                <li class="subitem1"><a href="#">Cute Kittens</a></li>
                <li class="subitem2"><a href="#">Strange “Stuff”&lt;/a></li>
                <li class="subitem3"><a href="#">Automatic Fails</a></li>
            </ul>
        </li>
    </ul> 
```

CSS：

```
body {
    font-size: 100%;
    background:#cccccc;
}
a {
    text-decoration: none;
}
ul, ul ul {
    margin: 0;
    padding: 0;
    list-style: none;
}
.menu {
    float: right;
    width: 300px;
    height: auto;
}
.menu > li > a {
    background-color: #f36f21;
    border-bottom: 1px solid #444;
    width: 100%;
    height: 2.75em;
    line-height: 2.75em;
    text-indent: 2.75em;
    display: block;
    position: relative;
    color: #fff;
}
.menu ul li a {
    background: #fff;
    border-bottom: 1px solid #efeff0;
    width: 100%;
    height: 2em;
    line-height: 2em;
    text-indent: 2em;
    display: block;
    position: relative;
    color: #444;
}
.menu ul li:last-child a {
    border-bottom: 1px solid #444;
}
.menu > li > a:hover, .menu > li > a.active {
    background-color: #444;
    border-bottom: 1px solid #f36f21;
}
.menu > li > a.active {
    border-bottom: 1px solid #f36f21;
}
.menu > li > a:before {
    font-size: 36px;
    height: 1em;
    width: 1em;
    position: absolute;
    left: 0;
    top: 50%;
    margin: -.5em 0 0 0;
}

.menu > li > ul li a:before{
    content: '▶';
    font-size: 8px;
    color: #bcbcbf;
    position: absolute;
    width: 1em;
    height: 1em;
    top: 0;
    left: -2.7em;
}

.menu > li > ul li:hover a,
.menu > li > ul li:hover a span,
.menu > li > ul li:hover a:before {
    color: #444;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:23:20.737

```
 $('.menu').hide();
    $('#hm').hover(function(){
        $('.menu').show();
    },function(){
        $('.menu').hide();
    }); 
```

[**小提琴**](http://jsfiddle.net/yR5gg/7/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:04:41.207

使用 Div 将通用隐藏类 (display:none;) 应用到您的 Menu UL。在这个 Div 中放置一个 Span，它将作为您菜单的访问点。

然后，您可以添加以下代码：

```
$('.menuAccess').hover(function () {
    $('.menu').removeClass('hide');
}, function () {
    $('.menu').addClass('hide');
}); 
```

[http://jsfiddle.net/danieljordan13/Ha58r/2/](http://jsfiddle.net/danieljordan13/Ha58r/2/)

# matlab - Mathematica 表函数到 Matlab

> ID：15911679
> 
> 赞同：1
> 
> 时间：2013-04-09T20:17:46.253
> 
> 标签：matlab, function, loops, wolfram-mathematica

我需要将其转换为 Matlab 代码，并且在没有“表格”功能的情况下苦苦挣扎。

```
Table[{i,1000,ability,savingsrate,0,RandomInteger[{15,30}],1,0},{i,nrhhs}]; 
```

所以基本上，这些值都只是数字，我想我需要使用函数句柄，或者可能是 for 循环。我不是专家，所以我真的需要帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T13:29:18.597

我不是数学专家（很久以前才用过）。根据Table 函数的[文档](http://reference.wolfram.com/mathematica/ref/Table.html)，您正在使用这种形式：

> 表[expr, {i, imax}]
> 
> 当 i 从 1 运行到 imax 时，生成 expr 的值列表。

看起来您的语句将生成列表复制第一个参数中的列表，`i`从 1 增加到`nrhhs`并使用不同的随机数。

在 MATLAB 中，输出可以等价于矩阵或元胞数组。

要创建一个以行作为列表的矩阵，您可以执行以下操作：

```
result = [ (1:nrhhs)', repmat([1000,ability,savingsrate,0],nrhhs,1), ...
           randi([15 30],nrhhs,1), repmat([1,0],nrhhs,1) ]; 
```

您可以将上述矩阵转换为元胞数组：

```
resultcell = cell2mat(result, ones(nrhhs,1)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T21:26:06.523

您给出的“表格”示例创建了一个 nrhhs 子列表的列表，每个子列表包含 8 个数字（i、1000、能力、储蓄率、0、15 到 30 之间的随机整数、1 和 0）。这本质上（尽管不完全）与 nrhhs x 8 矩阵相同。

但是，假设您确实只想要一个矩阵，Matlab 中的类似 for 循环将是：

```
result = zeros(nrhhs,8); % preallocate memory for the result
for i = 1:nrhhs
    result(i,:) = [i 1000 ability savingsrate 0 randi([15 30]) 1 0];
end 
```

这种方法可能比 yuk 的答案慢（它更有效地使用向量来避免 for 循环），但根据您对 Matlab 的熟悉程度，可能更容易区分。

# c#-4.0 - 不使用 PK 使用 DbContext.FindBy

> ID：15911681
> 
> 赞同：1
> 
> 时间：2013-04-09T20:17:50.513
> 
> 标签：c#-4.0, entity-framework-5, dbcontext

**目标：** 我有一个名为 Publication 的表，其中包含 Id、RecordId、EntityType 和其他几列。我从该表中选择所有需要发布到另一个数据库的记录。然后我循环该集合以处理记录并将记录移动到另一个数据库。

**背景：** EntityType 列用于标识上下文需要检索的 Set。我还使用反射来创建该类型的对象，以查看它是否实现了某种类型的接口。如果正在处理的记录确实实现了该接口，那么我知道发布表中该记录的 RecordId 不是 Set() 中的 PK，而是 FK。

当我追求不继承特定接口的 EntityTypes 的 PK 值时，此代码工作正常。

```
object authoringRecordVersion = PublishingFactory.AuthoringContext.Set(recordType.Entity.GetType()).Find(record.RecordId); 
```

**问题：**

DbContext.Set(EntityType).Find(PK) 在 PrimaryKey 值之后。我如何告诉 Set() 像这个 sudo 代码示例一样搜索，因为不允许使用“Where”

```
object authoringRecordVersion = PublishingFactory.AuthoringContext.Set(recordType.Entity.GetType()).Where(c => c.HeaderRecordId == record.RecordId) 
```

**更新：**

我正在努力实现以下内容。明天通知结果

```
var sql = "SELECT * from " + record.Entity + " WHERE HeaderRecordId = '" + record.RecordId + "'";
authoringRecordVersion = PublishingFactory.AuthoringContext.Set(recordType.Entity.GetType()).SqlQuery(sql).AsNoTracking(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T18:34:28.080

```
.SqlQuery(sql).AsNoTracking(); 
```

确实有效。不知道为什么我之前没有看到这个。

# asp.net - 使用共享属性进行身份验证是否安全？

> ID：15911682
> 
> 赞同：2
> 
> 时间：2013-04-09T20:17:57.907
> 
> 标签：asp.net, vb.net, function, shared, public

我应该使用`Shared`，还是只是一个`Public`函数并在需要时启动一个类？我已经阅读了许多文章，但仍然无法理解这里的最佳选择。

这是我想要得到的代码。有`userid`问题的是用户登录时设置的字符串。由于我可能需要在多个页面中使用用户 ID，因此我想将其添加到一个类中。

```
Public Shared ReadOnly Property userid As String
    Get
        Dim ck As HttpCookie = HttpContext.Current.Request.Cookies(FormsAuthentication.FormsCookieName)
        Dim tkt As FormsAuthenticationTicket = FormsAuthentication.Decrypt(ck.Value)
        Return tkt.Name
    End Get
End Property 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:21:41.483

我几乎永远不会说您`Shared`在处理身份验证时应该利用成员 - 但是由于您正在使用`Cookies`我看不出任何原因该代码不能按原样工作并使其更易于访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:21:23.553

这是完全可以接受的。`HttpContext.Current`您可以在很多开源项目中看到访问内部静态方法。

**仅供参考：** `HttpContext.Current`必须在当前调用线程上，因此请确保检查`HttpContext.Current`不为空。

# codeigniter-2 - CodeIgniter Uploadify 不上传文件

> ID：15911685
> 
> 赞同：0
> 
> 时间：2013-04-09T20:18:03.387
> 
> 标签：codeigniter-2, uploadify

我没有收到任何错误，什么也没有，但是没有上传图像，就像根本没有调用控制器一样，当我添加构造函数 log_message 时，我在日志文件中看不到任何内容，不确定是什么问题。顺便说一句，我使用这个库（[http://jeromejaglale.com/doc/php/codeigniter_i18n](http://jeromejaglale.com/doc/php/codeigniter_i18n)）来管理语言，所以我在 url [http://getit.mysite/en](http://getit.mysite/en)

这是我的控制器功能

```
<?php

if (!defined('BASEPATH'))
    exit('No direct script access allowed');

class FileUpload extends CI_Controller {

    public $view_data = array();
    private $upload_config;

    function __construct() {
        parent::__construct();
    }

    public function do_upload() {
        $this->load->library('upload');

        $image_upload_folder = base_url() . 'uploads/';

        if (!file_exists($image_upload_folder)) {
            mkdir($image_upload_folder, DIR_WRITE_MODE, true);
        }

        $this->upload_config = array(
            'upload_path' => $image_upload_folder,
            'allowed_types' => 'png|jpg|jpeg|bmp|tiff',
            'max_size' => 2048,
            'remove_space' => TRUE,
            'encrypt_name' => TRUE,
        );

        $this->upload->initialize($this->upload_config);

        if (!$this->upload->do_upload()) {
            $upload_error = $this->upload->display_errors();
            echo json_encode($upload_error);
        } else {
            $file_info = $this->upload->data();
            echo json_encode($file_info);
        }
    }

}

?> 
```

和js

```
jQuery(document).ready(function($) {

    var base_url = 'http://getit.mycom/';

    $('#upload-file').click(function(e) {
        e.preventDefault();
        $('#userfile').uploadify('upload', '*');
    });

    $('#userfile').uploadify({
        'auto': false,
        'swf': base_url + 'js/uploadify/uploadify.swf',
        'cancelImg': base_url + 'js/uploadify/uploadify-cancel.png',
        'uploader': base_url + 'fileupload/do_upload',
        'fileTypeExts': '*.jpg;*.bmp;*.png;*.tif',
        'fileTypeDesc': 'Image Files (.jpg,.bmp,.png,.tif)',
        'fileSizeLimit': '8MB',
        'fileObjName': 'userfile',
        'buttonText': 'Select Photo(s)',
        'multi': true,
        'removeCompleted': false
    });
}); 
```

并查看文件（添加用户）：

```
 <?php echo form_open_multipart(); ?>
                                    <ul class="unstyled">
                                        <li>
                                            <?php echo form_upload('userfile', '', 'id="userfile"'); ?>
                                            <?php echo (isset($error)) ? $error : ''; ?>
                                        </li>
                                        <li>
                                            <?php echo form_button(array('content' => 'Upload', 'id' => 'upload-file', 'class' => 'btn btn-large btn-primary')); ?>
                                        </li>
                                    </ul>
                                    <?php echo form_close(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-12T19:42:33.197

在控制器代码处，更改`if (!$this->upload->do_upload())`为`if (!$this->upload->do_upload('Filedata'))`. 试试看嘛。

# solr - SolrCloud - 分片数量的最佳实践

> ID：15911688
> 
> 赞同：1
> 
> 时间：2013-04-09T20:18:07.387
> 
> 标签：solr, solrcloud

是否有关于如何计划系统中的分片数量以允许系统增长而不不必要地创建太多分片的最佳实践来源？太多的分片会增加复杂性，在某些时候甚至可能会影响性能

过去有几个关于这个问题的问题，但没有具体的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-04T16:20:15.297

正如其他文章提示的那样 - 这取决于。根据您的配置、数据和需求调整单个分片的大小。然后，您可以估计存储数据所需的分片数量。当您的数据增长时，您可以添加额外的分片。请参阅（相当新的）拆分 API。另一种选择是自己管理分片（隐式分片），然后您可以更加灵活。

# mysql - Mysql 测试两个表中的值，这两个表是父表和子表

> ID：15911691
> 
> 赞同：0
> 
> 时间：2013-04-09T20:18:22.567
> 
> 标签：mysql

MySQL 问题。

我有一份合同和订单文件。标准的父母和孩子 - 一对多的关系。一份合约可以有很多订单。公共连接字段是 c_contract_id = co_contract_id。

合同具有限定合同的 c_type_code，订单也具有 co_order_type_code。

我正在构建一个通用搜索，允许用户根据许多字段进行选择。给我带来麻烦的查询是在 contract 或 contract_orders 表中查找具有特定 type_code 的那些合约的 contract_ids。

表中有许多字段可供用户搜索。我的问题的相关领域是：

```
CREATE TABLE `ndx_contracts` (
  `c_contract_id` int(11) NOT NULL AUTO_INCREMENT,
  `c_type_code` char(2) NOT NULL,
  PRIMARY KEY (`c_contract_id`),
  KEY `c_type_code` (`c_type_code`)
) ENGINE=InnoDB AUTO_INCREMENT=1

CREATE TABLE `ndx_contract_orders` (
  `co_contract_id` int(11) NOT NULL,
  `co_contract_orderid` int(11) NOT NULL AUTO_INCREMENT,
  `co_order_type_code` varchar(2) NOT NULL,
  `co_data` varchar(255),
  PRIMARY KEY (`co_contract_orderid`,`co_contractid`),
  KEY `co_order_type_code` (`co_order_type_code`)
) ENGINE=InnoDB AUTO_INCREMENT=1

SELECT count(1)
FROM contracts
WHERE 
    c_type_code IN ('02')
        OR (
               (SELECT count(co_order_type_code) FROM contract_orders
                    WHERE
                        co_contract_id = c_contract_id
                        AND co_order_type_code IN ('02')
               ) > 0
           )
; 
```

此查询有效，但速度非常慢。我只有大约 40,000 份合约，每份都有大约 4 条订单记录，搜索需要 311 秒才能返回 320 秒的行。

我会做一个外连接，但这会返回许多额外的行。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:25:07.707

听起来你想计算不同的合同 ID，所以这应该为你做。

```
SELECT COUNT(DISTINCT c.c_contract_id) AS `contract_id_count`
FROM ndx_contracts AS c
LEFT OUTER JOIN ndx_contract_orders AS co
  ON c.c_contract_id = co.co_contract_id
WHERE c.c_type_code = ? OR co.co_order_type_code = ? 
```

请注意，这将允许合同没有订单的情况。`?`显然会用您的搜索值替换。如果您想要实际的订单 ID，只需删除`COUNT()`选择中的功能。

你的主键`ndx_contract_orders`实际上是一个问题。要执行此连接，您仅通过 contract_id 查找，您需要反转该主索引的字段顺序，以便能够仅通过 contract_id 启用索引查找。或者，您可以只为`co_contract_id`. 老实说，如果订单 id 是自动增量，则该字段本身可能应该是您的主键，并且该`co_contract_id`字段应该只有它自己的索引。无需在两个字段中强制使用唯一索引，因为 order_id 上的主键自动增量将确保唯一性。

# html - div上的全宽背景颜色

> ID：15911692
> 
> 赞同：2
> 
> 时间：2013-04-09T20:18:23.220
> 
> 标签：html, css, responsive-design, fullscreen, background-color

我正在使用 1120px css 响应式框架响应式，或者它可以在我需要时充当固定网格。

我在 1120px 容器 div 中有一个 div，我想在其上应用全宽背景颜色。

div 的背景颜色当然只在容器 div 内，我想让它填满 body 元素的整个宽度。

现在的问题是 div 是由简码自动生成的，所以我无法创建外部 div 并将其设置为 100% 宽度。

这是短代码中的标记：

```
<div class="toggle-default">
    <div class="toggle">
<div class="toggle_title toggle_active">LINE-UP</div>
<div class="toggle_content" style="display:block;">Lorem ipsum sit dolor amet</div>

</div>
    </div> 
```

这个CSS：

```
.toggle{ margin-bottom: 5px; 
clear: both; float: left; 
position: relative;  
width: 100%;                
}
.toggle .toggle_title {
position: relative;
font-size: 112.5%;
font-weight: 700;
padding-bottom: 15px;
padding-left: 25px;
text-decoration: none;

} 
```

这是一个[小提琴](http://jsfiddle.net/dynamyc/5mn22/)

现在，问题是这个标记位于一个宽度为 1120px 的容器 div 下。我正在考虑添加**.toggle .toggle_title** position:absolute; 例如，将最小宽度设置为 1480 像素，但随后一切都会中断。

我确信这是解决此类问题的更好方法。谁能给我一些关于如何完成这项工作的提示？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:51:29.977

这是一种非常丑陋的方法。我发布这个是希望有人反对这个......但它有效。

这是一个小提琴[http://jsfiddle.net/5mn22/8/](http://jsfiddle.net/5mn22/8/)

将此添加到您的 CSS 中：

```
.toggle_title, .toggle_content {
    position:relative;
    z-index:2;
}

.toggle:before {
    content:"";  
    width:4000px;
    position:absolute;
    height:100%;
    background-color:red;
    left:-50%;
    z-index:1
} 
```

基本上，只需在 div 之前添加一个空内容，其宽度是预期屏幕分辨率大小的两倍，并将其定位到左侧 50% 以确保它延伸整个距离。

你怎么看？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-10-29T15:24:28.153

尝试考虑不同的更改 css 参数而不是使用`background-color`. 我已经用`:box-shadow`参数对其进行了测试：

```
.toggle {
      box-shadow: -10vw 0px 0px 0px #0e1d42, -28vw 0px 0px 0px #0e1d42, -42vw 0px 0px 0px #0e1d42, -30vw 0px 0px 0px #0e1d42, -46vw 0px 0px 0px #0e1d42, -15vw 0px 0px 0px #0e1d42;
      -webkit-box-shadow: -10vw 0px 0px 0px #0e1d42, -28vw 0px 0px 0px #0e1d42, -42vw 0px 0px 0px #0e1d42, -30vw 0px 0px 0px #0e1d42, -46vw 0px 0px 0px #0e1d42, -15vw 0px 0px 0px #0e1d42;
      -moz-box-shadow: -10vw 0px 0px 0px #0e1d42, -28vw 0px 0px 0px #0e1d42, -42vw 0px 0px 0px #0e1d42, -30vw 0px 0px 0px #0e1d42, -46vw 0px 0px 0px #0e1d42, -15vw 0px 0px 0px #0e1d42;
} 
```

看看现场示例（蓝色行）^ [http://kreditka.testovi-site.pw](http://kreditka.testovi-site.pw)

问候， 马克斯

# java - BTrace 脚本杀死 Java 虚拟机线程

> ID：15911695
> 
> 赞同：1
> 
> 时间：2013-04-09T20:18:39.867
> 
> 标签：java, multithreading, kill, visualvm, btrace

VisualVM 支持执行不安全的 BTrace 脚本 ( [https://kenai.com/projects/btrace/pages/UserGuide](https://kenai.com/projects/btrace/pages/UserGuide) )。是否可以使用不安全的 BTrace 脚本来杀死/中断一些 Java 线程？我的 Eclipse IDE 中的一些线程死锁了，我想优雅地关闭 IDE。

> “Worker-3571”prio=6 tid=0x00000000114b7800 nid=0x964 等待监视器条目 [0x000000002a45f000] java.lang.Thread.State: BLOCKED (on object monitor) at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$ PartListenerGroup$3.run(SelectionListenerWithASTManager.java:155) - 等待在 org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 处锁定 <0x00000000f7490ce8> （一个 java.lang.Object）
> 
> “Worker-3568”prio=6 tid=0x00000000114b9000 nid=0x2984 等待监视器条目 [0x000000002958f000] java.lang.Thread.State: BLOCKED (on object monitor) at org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$ PartListenerGroup$3.run(SelectionListenerWithASTManager.java:155) - 等待在 org.eclipse.core.internal.jobs.Worker.run(Worker.java:53) 处锁定 <0x00000000f7490ce8> （一个 java.lang.Object）
> 
> “Worker-3570”prio=6 tid=0x00000000114bc000 nid=0x1980 in Object.wait() [0x000000002998f000] java.lang.Thread.State: WAITING (on object monitor) at java.lang.Object.wait(Native Method) at org.eclipse.jdt.internal.ui.javaeditor.ASTProvider.getAST(ASTProvider.java:457) 处的 java.lang.Object.wait(Object.java:503) - 锁定 <0x00000000e10979a0>（一个 java.lang.Object）在 org.eclipse.jdt.ui.SharedASTProvider.getAST(SharedASTProvider.java:128) 在 org.eclipse.jdt 在 org.eclipse.jdt.internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup.calculateASTandInform(SelectionListenerWithASTManager.java:170) .internal.ui.viewsupport.SelectionListenerWithASTManager$PartListenerGroup$3.run(SelectionListenerWithASTManager.java:155) - 在组织中锁定 <0x00000000f7490ce8>（一个 java.lang.Object）。eclipse.core.internal.jobs.Worker.run(Worker.java:53)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T09:02:12.293

不，由于以下原因不能这样做：

1.  BTrace 仅支持通过 Java API 提供的功能。没有 Java API 可以杀死任意线程。
2.  BTrace 使用类重新转换来注入其代码。即使修改了类字节码，当前堆栈上的所有方法仍继续使用原始字节码，并且仅在它们离开堆栈时才交换到新版本（返回，异常）。这意味着当您的线程被卡住（尤其是 WAITING/BLOCKED）时，您想要检测的方法将保留在堆栈中，并且永远不会应用新的字节码。

使用基于 JPDA 的解决方案（例如 jdb、youdebug）会让您更加幸运

# cocoa - 检查嵌入式播放器的 QtKit 依赖项

> ID：15911697
> 
> 赞同：0
> 
> 时间：2013-04-09T20:18:41.957
> 
> 标签：cocoa, mono, quicktime, monomac, qtkit

我有一个用 MonoMac 用 C# 编写的应用程序，它嵌入了一个 QuickTime 播放器，所以我想知道：

1.  是否可以卸载 QuickTime？
2.  如果可以卸载 QuickTime，这会阻止使用 QTKit？
3.  如果卸载过程将删除 QTKit，是否有检查依赖项以防止应用程序中出现意外异常？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T02:54:39.230

QuickTime 提供了一个强大的基于 C 的 API 来操作基于时间的媒体，允许低级媒体导出、编辑、编码和解码。而 QTKit 是用于基于时间的媒体的首选 API。可以卸载 QuickTime。来源：[https](https://developer.apple.com/quicktime/) ://developer.apple.com/quicktime/、http : [//support.apple.com/kb/HT1786、http](http://support.apple.com/kb/HT1786) : [//www.mightyuninstaller.com/Uninstall-QuickTime-057.html](http://www.mightyuninstaller.com/Uninstall-QuickTime-057.html)

# javascript - AngularJS 通过 $compile 获取动态内容的范围未附加到控制器范围

> ID：15911699
> 
> 赞同：4
> 
> 时间：2013-04-09T20:18:43.053
> 
> 标签：javascript, angularjs, angularjs-directive, angularjs-scope, angularjs-controller

当我通过具有指令的字符串生成一个新元素（这就是我需要编译的原因）并且该指令通过“=”生成与控制器范围内的变量的关联时，我的控制器中的变量与指令中的一项。

我创建了一个 jsfiddle 来展示“门”ng-model 值应该与所有指令模型值相关联的示例。

看到这个小提琴：http: [//jsfiddle.net/aVJqU/2/](http://jsfiddle.net/aVJqU/2/)

我注意到的另一件事是，从 html 中存在的元素运行的指令通过变量（控制器和指令）显示了正确的关联。

html（有绑定的指令`<door>`）：

```
<body ng-app="animateApp">
    <div ng-controller="tst">
        <h2> Controller with its model </h2>
        <input ng-model="doorval" type="text"> </input>
        {{doorval}}
        <h2> Directive render directly from the html </h2>
        <door doorvalue="doorval"></door> <key></key>
        <h2> Directives that are compiled </h2>
        <list-actions actions="actions"></list-actions>
    </div>
</body> 
```

这是指令：

```
animateAppModule.directive('door', function () {
    return {
        restrict: "E",
        scope: {
            doorvalue:"="
        },
        template: '<span>Open the door <input type="text" ng-model="doorvalue"> </input> {{doorvalue}}</span>',
        replace: true
    }
}) 
```

这是控制器：

```
var animateAppModule = angular.module('animateApp', [])

animateAppModule.controller('tst', function ($scope, tmplService) {
    $scope.doorval = "open"
    $scope.actions = tmplService;

})
animateAppModule.service('tmplService', function () {
    return [{
        form_layout: '<door doorvalue="doorval"></door> <key></key>'
    }, {
        form_layout: '<door doorvalue="doorval"></door> with this <key></key>'
    }]
}) 
```

最后，这是编译具有未绑定指令的字符串的指令：

```
animateAppModule.directive('listActions', function ($compile) {
    return {
        restrict: "E",
        replace: true,
        template: '<ul></ul>',
        scope: {
            actions: '='
        },
        link: function (scope, iElement, iAttrs) {
            scope.$watch('actions', function (neww, old,scope) {
                var _actions = scope.actions;
                for (var i = 0; i < _actions.length; i++) {
                   //iElement.append('<li>'+ _actions[i].form_layout + '</li>');
                    //$compile(iElement.contents())(scope)
                    iElement.append($compile('<li>' + _actions[i].form_layout + '</li>')(scope))
                }
            })
        }
    }
}) 
```

我该怎么做才能将所有“门” ng-model 值绑定在一起？编译后的指令绑定到哪里？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T22:39:59.277

您只需将`doorval`引用传递给所有指令，而无需跳过任何一个。问题是该指令在其范围内`listActions`无法访问。`doorval`看看这个：http: [//jsfiddle.net/aVJqU/5/](http://jsfiddle.net/aVJqU/5/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-13T12:59:20.060

@Danypype 基本上是正确的，因为问题是由于范围隔离而发生的，如[文档](https://docs.angularjs.org/guide/directive#Isolating)中所述。

另一种解决方案是通过从指令定义中删除范围块来简单地消除范围隔离。

# javascript - 如何从 Ember 中的路由访问控制器？

> ID：15911704
> 
> 赞同：28
> 
> 时间：2013-04-09T20:19:30.650
> 
> 标签：javascript, ember.js, ember-router

有什么万无一失的方法可以从路由访问控制器吗？

```
<a href="#" class="btn" {{action "someAction" user}}>add</a>

App.ApplicationRoute = Ember.Route.extend
  events:
    someAction: (user) ->
      console.log 'give me name from currentUser controller' 
```

someAction 非常通用，我认为 ApplicationRoute 是它的最佳位置。

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-09T20:42:27.323

我认为该方法`controllerFor`应该在这种情况下可用：

```
App.ApplicationRoute = Ember.Route.extend
  events:
    someAction: (user) ->
      console.log this.controllerFor("currentUser").get("name") 
```

**针对评论中的问题进行**更新：****

 ***这一切都取决于你想做什么。*在这种基本方法上担心 DRY 没有多大意义恕我直言。

在你的荣誉离开的情况下，我会这样做：

```
App.ApplicationRoute = Ember.Route.extend
  events:
    someAction: (user) ->
      this.controllerFor("currentUser").decrementKudos();
      // implement the decrementKudos in your controller 
```

但我想存储这个控制器也应该工作，如果这对你来说太多代码：

```
App.ApplicationRoute = Ember.Route.extend
  currentUserCon : this.controllerFor("currentUser")
  events:
    someAction: (user) ->
      this.currentUserCon.decrementKudos();
      // implement the decrementKudos in your controller 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-05-19T09:58:48.357

在较新版本的 ember 中，您可以在路由中访问当前路由的控制器，如下所示

**灰烬 2.5 版**

```
currentUserCon : this.controller 
```

如果您想访问其他路由控制器，请使用`controllerFor`方法。

```
this.controllerFor('path to controller'); //put path to controller as parameter. 
```**

# c# - 纳税人计划不会一直运行

> ID：15911707
> 
> 赞同：0
> 
> 时间：2013-04-09T20:19:40.667
> 
> 标签：c#, compareto

每次我运行程序时，它都会毫无问题地通过前四个纳税人，但是当它应该要求我提供第五个纳税人信息时，它就会停止。我整个上午都在寻找解决方案。我做错了什么或错过了什么？

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace TestApp
{
class Rates
{
    public readonly int incomeLimit;
    public readonly double lowTax;
    public readonly double highTax;

    public Rates()
    {
        incomeLimit = 30000;
        lowTax = .15;
        highTax = .28;
    }
    public Rates(int limit, double lowRate, double highRate)
    {
        limit = incomeLimit;
        lowRate = lowTax;
        highRate = highTax;
    }
    public double CalcTax(double income)
    {

        double tax;
        if (income < incomeLimit)
        tax = income * lowTax;
        else
            tax = income * highTax;
        return tax;
    }
}
class Taxpayer : IComparable
{
    public string SSN { get; set; }
    public double grossIncome { get; set; }
    public double taxOwed
    {
        get
        {
            return taxOwed;
        }
    }

    int IComparable.CompareTo(Object o)
    {
        int returnVal;
        Taxpayer temp = (Taxpayer)o;
        if (this.taxOwed > temp.taxOwed)
            returnVal = 1;
        else if (this.taxOwed < temp.taxOwed)
            returnVal = -1;
        else returnVal = 0;

        return returnVal;

    }
    public static void getRates()
    {
        Taxpayer tax = new Taxpayer();

        int limit = 0;
        double lowRate = 0;
        double highRate = 0;
        char input;
    Console.Write("Do you want default values (enter D) or enter your own (enter O)?");
        input = Char.ToUpper(Convert.ToChar(Console.ReadLine()));

        switch (input)
        {
            case 'D':
                Rates def = new Rates();
                limit = def.incomeLimit;
                lowRate = def.lowTax;
                highRate = def.highTax;
                def.CalcTax(tax.grossIncome);
                break;
            case 'O':
                Rates own = new Rates(limit, lowRate, highRate);
                Console.Write("Enter the dollar limit ");
                limit = Convert.ToInt32(Console.ReadLine());
                Console.Write("Enter the low rate ");
                lowRate = Convert.ToDouble(Console.ReadLine());
                Console.Write("Enter the high rate ");
                highRate = Convert.ToDouble(Console.ReadLine());
                own.CalcTax(tax.grossIncome);
                break;
        }

    }
}

class Program
{
    static void Main(string[] args)
    {

        Rates taxRates =  new Rates();
        Taxpayer[] taxarray = new Taxpayer[5];

        for (int x = 1; x < taxarray.Length; ++x)
        {
            taxarray[x] = new Taxpayer();
            Console.Write("Enter Social Security Number for taxpayer {0}: ", x);
            taxarray[x].SSN = Console.ReadLine();

            Console.Write("Enter gross income for taxpayer {0}: ", x);
            taxarray[x].grossIncome = Convert.ToDouble(Console.ReadLine());
            Taxpayer.getRates();
        }
        for (int i = 0; i < taxarray.Length; i++)
        {
            Console.WriteLine("Taxpayer # {0} SSN: {1} income {2:c} Tax is {3:c}", taxarray[i].SSN, taxarray[i].grossIncome, taxRates.CalcTax(taxarray[i].grossIncome));
        }
        Array.Sort(taxarray);
        Console.WriteLine("-------------------------------------------------------");
        for (int i = 0; i < taxarray.Length; i++)
        {
            Console.WriteLine("Taxpayer # {0} SSN: {1} income {2:c} Tax is {3:c}", taxarray[i].SSN, taxarray[i].grossIncome, taxRates.CalcTax(taxarray[i].grossIncome));
        }

    }
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:21:57.620

```
 Taxpayer[] taxarray = new Taxpayer[5];
    for (int x = 1; x < taxarray.Length; ++x) 
```

数组在 C# 中从零开始。从 1 开始且 < 5 是 {1,2,3,4} = 4 个纳税人。

你应该从零开始：

```
 for (int x = 0; x < taxarray.Length; x++) 
```

另外：不要打扰`++x`vs `x++`，除非你关心操作的**结果**（在这个例子中你不关心）。让 JIT 担心这种微优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:22:01.347

此行从索引 1 开始

```
 for (int x = 1; x < taxarray.Length; ++x) 
```

数组从索引 0 开始，
因此您的输入代码应更改为

```
 for (int x = 0; x < taxarray.Length; x++)
   {
        taxarray[x] = new Taxpayer();
        Console.Write("Enter Social Security Number for taxpayer {0}: ", x+1);
        taxarray[x].SSN = Console.ReadLine();

        Console.Write("Enter gross income for taxpayer {0}: ", x+1);
        taxarray[x].grossIncome = Convert.ToDouble(Console.ReadLine());
        Taxpayer.getRates();
   } 
```

从索引 0 开始并要求输入 x+1 以免混淆用户

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:22:15.027

其实我认为它从来没有向你要第零个纳税人。C# 数组是基于 0 的，而您从 1 开始。

# c++ - int8_t 和 uint8_t 是 char 类型吗？

> ID：15911714
> 
> 赞同：61
> 
> 时间：2013-04-09T20:20:03.803
> 
> 标签：c++, c++11, iostream, language-lawyer, standard-library

鉴于这个 C++11 程序，我应该期望看到一个数字还是一个字母？还是不抱期望？

```
#include <cstdint>
#include <iostream>

int main()
{
    int8_t i = 65;
    std::cout << i;
} 
```

标准是否指定此类型是否可以或将是字符类型？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-14T18:33:00.697

从 C++0x FDIS (N3290) 的 § 18.4.1 [cstdint.syn] 开始，`int8_t`是一个可选的 typedef，指定如下：

```
namespace std {
  typedef signed integer type int8_t;  // optional
  //...
} // namespace std 
```

§ 3.9.1 [basic.fundamental] 规定：

> 有五种*标准有符号整数类型*：“<code>signed char”、“<code>short int”、“<code>int”、“<code>long int”和“<code>long long int”。在此列表中，每种类型提供的存储空间至少与列表中它前面的类型一样多。也可能有实现定义的*扩展有符号整数类型*。标准和扩展的有符号整数类型统称为有*符号整数类型*。
> 
> ...
> 
> 类型`bool`, `char`, `char16_t`, `char32_t`,`wchar_t`以及有符号和无符号整数类型统称为*整数类型*。整数类型的同义词是*整数类型*。

§ 3.9.1 还规定：

> 在任何特定的实现中，普通对象可以采用与 a或 an`char`相同的值；哪一个是实现定义的。`signed char``unsigned char`

很容易得出结论，提供的对象`int8_t`的 typedef 可能采用带符号的值；但是，情况并非如此，因为不在有*符号整数类型*（标准和可能扩展的有符号整数类型）列表中。另见[Stephan T. Lavavej](http://connect.microsoft.com/VisualStudio/feedback/details/764409/visual-studio-2012-c-std-make-unsigned)对和的评论。`char``char``char`*`std::make_unsigned``std::make_signed`*

 *因此，要么`int8_t`是 typedef ，要么是`signed char`扩展的有符号整数类型，其对象恰好占用 8 位存储空间。

但是，要回答您的问题，您不应该做出假设。因为这两种形式的函数`x.operator<<(y)`都已`operator<<(x,y)`定义，所以 § 13.5.3 [over.binary] 说我们参考 § 13.3.1.2 [over.match.oper] 来确定`std::cout << i`. § 13.3.1.2 反过来说，实现根据 § 13.3.2 和 § 13.3.3 从候选函数集中进行选择。然后，我们查看 § 13.3.3.2 [over.ics.rank] 来确定：

*   如果是精确匹配（即 typedef 的），`template<class traits> basic_ostream<char,traits>& operator<<(basic_ostream<char,traits>&, signed char)`则将调用该模板。`int8_t``signed char``signed char`
*   否则，`int8_t`将提升为`int`并`basic_ostream<charT,traits>& operator<<(int n)`调用成员函数。

在对象的情况`std::cout << u`下：`u``uint8_t`

*   如果`template<class traits> basic_ostream<char,traits>& operator<<(basic_ostream<char,traits>&, unsigned char)`模板`uint8_t`是`unsigned char`.
*   否则，由于`int`可以表示所有`uint8_t`值，因此`uint8_t`将提升为`int`并`basic_ostream<charT,traits>& operator<<(int n)`调用成员函数。

如果你总是想打印一个字符，最安全、最清晰的选择是：

```
std::cout << static_cast<signed char>(i); 
```

如果你总是想打印一个数字：

```
std::cout << static_cast<int>(i); 
```

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-04-09T20:34:17.650

`int8_t`正好是 8 位宽（如果存在）。

唯一可以为 8 位的预定义整数类型是`char`、`unsigned char`和`signed char`。两者`short`和`unsigned short`都要求至少为 16 位。

所以`int8_t`必须是任何一个`signed char`或plain的typedef（如果plain被签名`char`，则为后者）。`char`

如果要将`int8_t`值打印为整数而不是字符，可以将其显式转换为`int`.

原则上，C++ 编译器可以定义一个 8 位*扩展整数类型*（可能称为类似的东西`__int8`），并`int8_t`为其创建一个 typedef。我能想到这样做的唯一原因是避免制作`int8_t`字符类型。我不知道有任何 C++ 编译器实际做到了这一点。

`int8_t`C99 中引入了这两种整数类型和扩展整数类型。`char`对于 C，当类型可用时，没有特殊理由定义 8 位扩展整数类型。

**更新**：

我对这个结论并不完全满意。`int8_t`并`uint8_t`在 C99 中引入。在 C 中，它们是否是字符类型并不重要。没有任何操作可以使区别产生真正的不同。（即使`putc()`是标准 C 中最低级别的字符输出例程，也将要打印的字符作为`int`参数）。`int8_t`, and `uint8_t`, 如果它们被定义，几乎肯定会被定义为字符类型——但字符类型只是小整数类型。

C++ 提供了`operator<<`for `char`、`signed char`和, 的特定重载版本`unsigned char`，因此会`std::cout << 'A'`产生`std::cout << 65`非常不同的输出。后来，C++ 采用了`int8_t`and `uint8_t`，但是就像在 C 中一样，它们几乎肯定是字符类型。对于大多数操作，这并不比在 C 中更重要，但`std::cout << ...`它确实有所作为，因为：

```
uint8_t x = 65;
std::cout << x; 
```

可能会打印字母`A`而不是数字`65`。

如果您想要一致的行为，请添加演员表：

```
uint8_t x = 65;
std::cout << int(x); // or static_cast<int>(x) if you prefer 
```

我认为问题的根源在于语言中缺少一些东西：不是字符类型的非常窄的整数类型。

至于*意图*，我可以推测委员会成员要么没有考虑这个问题，要么认为它不值得解决。有人可能会争辩（我会），将`[u]int*_t`类型添加到标准中的好处超过了它们相当奇怪的行为带来的不便`std::cout << ...`。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2013-04-15T00:49:53.463

我会按相反的顺序回答你的问题。

> 标准是否指定此类型是否可以或将是字符类型？

**简短的回答**：`int8_t`在`signed char`最流行的平台上（Linux 上的 GCC/Intel/Clang 和 Windows 上的 Visual Studio），但在其他平台上可能是别的东西。

长答案如下。

C++11 标准的第 18.4.1 节提供了概要，`<cstdint>`其中包括以下内容

> `typedef` *有符号整数类型* `int8_t; //optional`

稍后在同一节第 2 段中，它说

> 头文件 [ ] 定义了与**C 标准**`<cstdint>`中的 7.18 相同的所有函数、类型和宏。

 **其中 C 标准表示按照 1.1/2 的 C99：

> **C++ 是一种基于ISO/IEC 9899:1999 编程语言 — C**（以下简称**C 标准**）中描述的 C 编程语言的通用编程语言。

因此， 的定义`int8_t`可在 C99 标准的第 7.18 节中找到。更准确地说，C99 的第 7.18.1.1 节说

> 该`typedef`名称`intN_t`指定了一个有符号整数类型，其宽度`N`、无填充位和二进制补码表示。因此，**int8_t 表示宽度正好为 8 位的有符号整数类型**。

此外，C99 的第 6.2.5/4 节说

> 有五种**标准有符号整数类型**，指定为**signed char**、**short int**、**int**、**long int**和**long long int**。（这些和其他类型可以用几种额外的方式指定，如 6.7.2 中所述。）也可能存在**实现定义的扩展有符号整数类型**。标准和扩展的**有符号整数类型统称为有符号整数类型**。

最后，C99 的第 5.2.4.2.1 节规定了标准有符号整数类型的最小大小。不包括`signed char`，所有其他的长度至少为 16 位。

因此，`int8_t`要么`signed char`是 8 位长的扩展（非标准）有符号整数类型。

glibc（GNU C 库）和 Visual Studio C 库都定义`int8_t`为`signed char`. Intel 和 Clang，至少在 Linux 上，也使用 libc，因此同样适用于它们。因此，在最流行的平台上`int8_t`是`signed char`.

> 鉴于这个 C++11 程序，我应该期望看到一个数字还是一个字母？还是不抱期望？

**简短回答**：在最流行的平台（Linux 上的 GCC/Intel/Clang 和 Windows 上的 Visual Studio）中，您肯定会看到字母“A”。在其他平台上，您可能会看到`65`。（感谢[DyP](https://stackoverflow.com/users/420683/dyp)向我指出这一点。）

在续集中，所有引用均指向 C++11 标准（当前草案，N3485）。

第 27.4.1 节提供了 的概要`<iostream>`，特别是它声明了`cout`：

```
extern ostream cout; 
```

现在，`ostream`是根据第 27.7.1 节`typedef`的模板专业化：`basic_ostream`

```
template <class charT, class traits = char_traits<charT> >
class basic_ostream;

typedef basic_ostream<char> ostream; 
```

第 27.7.3.6.4 节提供以下声明：

```
template<class traits>
basic_ostream<char,traits>& operator<<(basic_ostream<char,traits>& out, signed char c); 
```

如果`int8_t`是`signed char`，则将调用此重载。同一部分还指定此调用的效果是打印字符（而不是数字）。

现在，让我们考虑`int8_t`扩展有符号整数类型的情况。显然，该标准没有`operator<<()`为非标准类型指定重载，但由于促销和转换，提供的重载之一可能会接受调用。实际上，`int`至少有 16 位长，并且可以表示 的所有值`int8_t`。然后 4.5/1 给出`int8_t`可以*提升*到`int`. 另一方面， 4.7/1 和 4.7/2 给出`int8_t`可以*转换*为`signed char`. 最后，13.3.3.1.1 产生了在重载解决期间提升比转换更受青睐。因此，以下重载（在 23.7.3.1 中声明）

> basic_ostream& basic_ostream::operator<<(int n);

将被调用。这意味着，这段代码

```
int8_t i = 65;
std::cout << i; 
```

将打印`65`。

**更新：**

**1** . 更正了[DyP](https://stackoverflow.com/users/420683/dyp)评论后的帖子。

**2** . 添加了以下关于可能`int8_t`成为`typedef`for的评论`char`。

如前所述，C99 标准（上面引用的第 6.2.5/4 节）定义了 5 种标准有符号整数类型（`char`不是其中之一），并允许实现添加它们的 onw，它们被称为非标准有符号整数类型。C++ 标准加强了第 3.9.1/2 节中的定义：

> 有五种标准有符号整数类型：“signed char”、“short int”、“int”、“long int”和“long long int” [...] 还可能有实现定义的扩展有符号整数类型。标准和扩展的有符号整数类型统称为有**符号整数类型**。

后来，在同一节中，第 7 段说：

> 类型`bool`, `char`, `char16_t`, `char32_t`,`wchar_t`以及**有符号和无符号整数类型**统称为**整数类型**。整数类型的同义词是**整数类型**。

因此，`char`是一个整数类型，但**`char`既不是有符号整数类型也不是无符号整数类型**，第 18.4.1 节（上面引用）说`int8_t`，当存在时，是`typedef`有符号整数类型。

可能令人困惑的是，根据实现，`char`可以采用与 a 相同的值`signed char`。特别是，`char`可能有一个标志，但它仍然不是`signed char`. 这在第 3.9.1/1 节中明确说明：

> [...] Plain `char`,`signed char`和`unsigned char`是**三种不同的类型**。[...] 在任何特定的实现中，普通对象可以采用与 a或 an`char`相同的值；哪一个是实现定义的。`signed char``unsigned char`

这也意味着它`char`不是**3.9.1** /2 定义的有符号整数类型。

**3** . 我承认我的解释，特别是“`char`既不是有符号整数类型也不是无符号整数类型”这句话有点争议。

为了加强我的观点，我想补充一点，Stephan T. Lavavej 在[这里](http://connect.microsoft.com/VisualStudio/feedback/details/764409/visual-studio-2012-c-std-make-unsigned)说了同样的话，而[Johannes Schaub - litb在](https://stackoverflow.com/users/34509/johannes-schaub-litb)[这篇](https://stackoverflow.com/q/9285657/1137388)文章的评论中也使用了同样的句子。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-04-09T20:24:50.750

我拥有的工作草案副本 N3376 在 [cstdint.syn] § 18.4.1 中指定 int 类型通常是 typedef。

```
namespace std {
typedef signed integer type int8_t; // optional
typedef signed integer type int16_t; // optional
typedef signed integer type int32_t; // optional
typedef signed integer type int64_t; // optional
typedef signed integer type int_fast8_t;
typedef signed integer type int_fast16_t;
typedef signed integer type int_fast32_t;
typedef signed integer type int_fast64_t;
typedef signed integer type int_least8_t;
typedef signed integer type int_least16_t;
typedef signed integer type int_least32_t;
typedef signed integer type int_least64_t;
typedef signed integer type intmax_t;
typedef signed integer type intptr_t; // optional
typedef unsigned integer type uint8_t; // optional
typedef unsigned integer type uint16_t; // optional
typedef unsigned integer type uint32_t; // optional
typedef unsigned integer type uint64_t; // optional
typedef unsigned integer type uint_fast8_t;
typedef unsigned integer type uint_fast16_t;
typedef unsigned integer type uint_fast32_t;
typedef unsigned integer type uint_fast64_t;
typedef unsigned integer type uint_least8_t;
typedef unsigned integer type uint_least16_t;
typedef unsigned integer type uint_least32_t;
typedef unsigned integer type uint_least64_t;
typedef unsigned integer type uintmax_t;
typedef unsigned integer type uintptr_t; // optional
} // namespace std 
```

由于唯一的要求是它必须是 8 位，因此 typedef 到 char 是可以接受的。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-14T12:28:30.607

`char`//是三种不同的类型，a`signed char`并不总是8位。在大多数平台上，它们都是 8 位整数，但 std::ostream 仅定义 char 版本的行为，如.`unsigned char``char``>>``scanf("%c", ...)`***

# svg - 多个 SVG 标签中的 clipPath

> ID：15911717
> 
> 赞同：11
> 
> 时间：2013-04-09T20:20:16.517
> 
> 标签：svg, cross-browser

假设您有多个 SVG 标签，在每个标签中您定义了具有相同 ID 的不同剪辑路径。

```
<svg id="svg1" width="200" height="200">
    <defs>
        <clipPath id="nodeclipper">
            <rect width="100" height="100" x="0" y="0" />
        </clipPath>
    </defs>
</svg>

<svg id="svg2" width="200" height="200">
    <defs>
        <clipPath id="nodeclipper">
            <circle cx="20" cy="0" r="40" />
        </clipPath>
    </defs>
</svg> 
```

我还做了一个[JSFiddle](http://jsfiddle.net/XwM6a/3/)。预期的行为是什么？我认为一个元素只能引用它自己的 SVG 标签内的定义，但事实并非如此：

*   Chrome 26：`circle`两次使用剪辑路径。
*   Firefox 17：`rect`两次使用剪辑路径。
*   Safari 6：按预期渲染一个`rect`和一个`circle`剪辑路径。

当您[隐藏其中一个 SVG 标记](http://jsfiddle.net/XwM6a/4/)时会变得很奇怪，因为 Chrome 和 Safari 会`clip-path`完全放弃它。

我知道当`clipPath`s 具有不同的 ID 时它可以工作，但它应该是这样吗？据我所知，[规范](http://www.w3.org/TR/SVG/masking.html#EstablishingANewClippingPath)不包含有关该问题的信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-09T21:43:11.553

[根据http://www.w3.org/TR/SVG/struct.html#IDAttribute](http://www.w3.org/TR/SVG/struct.html#IDAttribute)，您所做的事情是无效的，这引用了[http://www.w3.org/TR/2008/REC-xml-20081126/](http://www.w3.org/TR/2008/REC-xml-20081126/)其中地址这个具体问题直接...

*ID 类型的值必须与 Name 产生式匹配。一个名称在 XML 文档中不能多次作为这种类型的值出现；即，ID 值必须唯一标识承载它们的元素。*

# rest - REST：防止通过条件 POST 创建重复资源？

> ID：15911719
> 
> 赞同：6
> 
> 时间：2013-04-09T20:20:23.310
> 
> 标签：rest, post

我一直在寻找最佳实践，以防止在使用 POST 创建新资源时意外创建重复资源，以防资源由服务器命名，因此无法使用 PUT。我正在构建的 API 将被移动客户端使用，我担心的情况是客户端在提交 POST 请求后但在收到响应之前断开连接。我找到[了这个问题](https://stackoverflow.com/questions/15159274/avoid-duplicate-posts-with-rest)，但没有提到使用条件 POST，因此我提出了问题。

对父资源执行条件 POST，类似于使用条件 PUT 修改资源，是解决此问题的合理方法吗？如果不是，为什么不呢？

客户端/服务器交互就像条件 PUT 一样：

1.  客户端获取父资源，包括反映其当前状态的 ETag（包括其从属资源），

2.  客户端对父资源执行条件 POST（在 If-Match 标头中包含父资源的 ETag 值）以创建新资源，

3.  客户端在得到服务器响应之前就断开了连接，所以不知道它是否成功，

4.  稍后，当重新连接时，客户端重新提交相同的条件 POST 请求，

5.  较早的请求未到达服务器，因此服务器创建资源并回复 201，或者较早的请求确实到达了服务器，因此服务器回复 412 并且未创建重复的资源。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-16T09:53:43.347

您的解决方案很聪明，但不太理想。您的客户可能永远不会得到他的 201 确认，并且必须将 412 错误解释为成功。

REST 爱好者通常建议您使用空 POST 创建资源，然后，一旦客户端获得新创建资源的 id，他就可以进行“幂等”更新来填充它。这很好，但是您可能需要使 DB 列可以为空，否则您的更新只有在没有其他人试图同时更新时才具有幂等性。

根据我的说法，HTTP 是不稳定的。请求超时，浏览器窗口关闭，连接重置，火车进入隧道，移动用户乘坐。有一个简单、健壮的模式来处理这个问题。不安全的操作应该始终被唯一标识，并且服务器应该存储并且能够在必要时重复对任何不安全请求的响应。这不是 HTTP 缓存，其中可以从缓存中提供请求，但可能出于任何原因刷新缓存。这是服务器应用程序的保证，即如果第二次看到“动作”请求，将重复存储的响应，*而不会发生任何其他事情*. 如果动作标识由服务器生成，那么请求-响应应该专门用于发送 id。如果你为一个不安全的请求实现这一点，你不妨为所有的请求都这样做，这样做你会避免许多棘手的问题：连续的更新请求清除其他用户的更改，或者遇到不兼容的状态（“订单已经提交")，连续删除请求会产生 404 错误。

[如果您有兴趣](https://docs.google.com/document/d/1s0joc0yb6kXpXZGfdE9SRutoPQuK9RVa77f92xsXzrM/edit?usp=sharing)，我有一个小谷歌文档更全面地探索该模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-03T01:17:18.443

为什么不简单地根据实际资源在服务器上进行重复检测，使用服务器选择使用的任何内部机制。

只是这样更安全。

然后将 URL 返回到适当的资源（无论它是否是新创建的）。

如果父 ETag 是基于子资源的状态，那么它不是一个可靠的机制来检查“重复资源”。你所知道的是，自上次以来，父母不知何故已经“改变”了。你怎么知道这是因为你的旧 POST 是在断开连接后处理的？可能是什么改变了 ETag。

这基本上是一个乐观的锁定场景，它归结为另一个问题。如果资源已经创建，那又如何呢？这是一个错误吗？还是一个特点？你关心？当资源已经存在时，发送一个被服务器静默忽略的创建请求是不是很糟糕？

如果它已经存在，但足够“不同”（即名称匹配但地址不同），那是重复的吗？那是更新吗？这是尝试更改现有资源的错误吗？

另一种解决方案是进行两次旅行。一个负责提交请求，另一个负责提交。如果请求中断，您可以在返回时查询请求的状态。如果提交没有通过，您可以再次提交。如果是这样，你会很高兴并且可以继续前进。

仅取决于您的通讯有多不稳定，以及此特定操作对于您是否要跳过箍以安全地进行操作有多重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-03T00:33:43.000

我认为这个方案会奏效。如果要确保 POST 不会导致重复，则需要客户端在 POST 中发送唯一的内容。然后服务器可以验证唯一性。

您还不如让客户端为每个请求生成一个 GUID，而不是通过 GET 从服务器获取它。

然后你的步骤变成： -

1.  客户端生成 GUID
2.  客户端对资源进行 POST，其中包括 GUID
3.  客户端断开连接，不知道是否成功
4.  客户端再次连接并使用相同的 GUID 执行另一个 POST
5.  服务器检查 GUID，并创建资源（如果它从未收到第一个 POST）或指示这是重复的

使用 PUT 可能更安静，并让客户端决定资源名称。如果您不喜欢选择的名称，您可以表明您已经创建了资源，但它的规范位置是服务器选择的某个位置。

# jquery - 如何从 Jersey WebService 填充下拉列表

> ID：15911721
> 
> 赞同：0
> 
> 时间：2013-04-09T20:20:40.307
> 
> 标签：jquery, web-services, rest, jersey

[我从这篇文章](http://www.vogella.com/articles/REST/article.html)开始了解 Jersey Web 服务，并创建了一个。接下来我要做的是根据从该服务返回的数据在我的网页上填充一个下拉菜单。

但是，每次单击更多按钮时，我都会在运行 Web 服务的控制台上收到此错误消息：

> java.lang.IllegalAccessException：类 com.sun.jersey.server.wadl.generators.WadlGeneratorJAXBGrammarGenerator$8 无法访问带有修饰符“受保护”的类 javax.ws.rs.core.Response 的成员

以下是 Service java 代码的简化版本：

```
@Path("/abcResource")
public class AbcResource{

    @GET
    @Path("showAllStr")
    @Produces(MediaType.TEXT_PLAIN)
    public String[] getAllStr() {
        String[] result={"option1", "option2","option3"};
        return result
    }

    //This works!! give me results on http://localhost:8080/rest/abcResource/showAll  in browser that shows that service is running fine

    @GET
    @Path("showAll")
    @Produces(MediaType.TEXT_PLAIN)
    public String showAllStr() {

        String result="blah lblah";

        return result
    }

} 
```

JavaScript 代码：

```
<script type="text/javascript">

    var offset = 0;
    var howMany = 5;

    $(document).ready(function() {
        $("#btnMore").click(function() {
            // fetch some more records from the server side
            $.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: "http://localhost:8080/rest/abcResource/showAllStr",

                success: onSuccess,
                error: onError
            });
        });
    });

    function onSuccess(result) {
        // process web service return data
        // populate ul with data
        $("#datalist").empty();
        var strings = result.d;
        for (var i = 0; i < strings.length; i++)
            $("#datalist").append("<li>" + strings[i] + "</li>");
        // move offset
        offset += howMany;
    }

    function onError(result) {
        // ajax call failed
        alert(result.status + ': ' + result.statusText);
    }
</script> 
```

应打开下拉列表的 HTML 代码：

```
<form id="form1" runat="server">
    <div>
        <ul id="datalist"></ul>
        <br />
        <input type="button" id="btnMore" value="more" />
    </div>
</form> 
```

在 Chrome 或 Firefox 中，我的下拉列表中没有任何内容，但是当我`http://localhost:8080/rest/abcResource/showAll`在浏览器中打开时，我看到服务返回一个字符串。

我不确定我在做什么错。你能从上面的代码中弄清楚吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-04T20:00:38.410

根据 Pavel Bucek 的说法：

> 这只是小问题，已经修复 - 此消息的日志级别已更改为 FINE 而不是 SEVERE..；1.10 将不再产生这些烦人的消息。
> 
> 它根本不影响 wadl 的生成。它与 XML Schema 生成有关，在这些情况下是可以预期的。

来源：http: [//java.net/projects/jersey/lists/users/archive/2011-10/message/117](http://java.net/projects/jersey/lists/users/archive/2011-10/message/117)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:24:24.337

我猜你不能返回一个字符串数组。见这里[https://stackoverflow.com/a/5393792/461499](https://stackoverflow.com/a/5393792/461499)

# java - 替换 if java 中的数组元素

> ID：15911725
> 
> 赞同：0
> 
> 时间：2013-04-09T20:20:47.717
> 
> 标签：java, arrays

我必须在一个将行星添加到星系的类中创建这个小方法，但似乎数组 planeta 中的元素 k+1 没有被替换……是因为它在 if 语句中吗？

```
public void addPlanet(String planetName, BigInt x, BigInt y, BigInt z) {        
    if (planetExists(planetName) && !complete()){       
        newSP= new SpacePoint(x,y,z);
        newPlanet= new Planet("planetName",newSP);          
        int k=this.size();      
        planeta[k+1]=planetName; //doesnt replace because its inside the if??
    }
} 
```

如果这是一个简单的问题，我很抱歉，我在大学上 Java 课程，我真的很新…… PS：顺便说一句，谢谢大家，这些天你们一直是我的老师！=)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:22:08.487

我怀疑问题在于您实际上应该更换`planeta[k]`- 并增加尺寸。

数组在 Java 中是从 0 开始的，所以如果你的大小是 2，你的数组可能有值：

```
planeta[0] = "Earth";
planeta[1] = "Jupiter"; 
```

...所以下一个要填充的插槽是`planeta[2]`, 并将大小增加到 3。

更好的选择是使用 a `List<String>`（例如 an `ArrayList<String>`），这样您就可以调用`add`，并且您不必担心溢出数组的边界等。

# javascript - 使用批处理脚本时如何克服关于文件名的 ASCII 排序顺序？

> ID：15911727
> 
> 赞同：1
> 
> 时间：2013-04-09T20:21:03.247
> 
> 标签：javascript, sorting, vbscript, batch-file

我有一个批处理脚本，它调用一个 jscript 文件（下面的链接）将 excel 工作簿工作表保存为 csv 文件。 [http://gotochriswest.com/blog/2011/05/05/excel-batch-convert-xls-to-csv/](http://gotochriswest.com/blog/2011/05/05/excel-batch-convert-xls-to-csv/)

然后我使用批处理脚本将这些文件合并在一起。但是，如果我遇到名为类似的文件

> 文件 1
> 
> 文件2
> 
> 文件 10
> 
> 文件 11

然后文件将按以下顺序合并：

> 文件 1
> 
> 文件 10
> 
> 文件 11
> 
> 文件2

以这种顺序呈现信息并不令人满意。

有谁知道使用批处理或任何其他脚本语言的方法，该方法可以在典型的 Windows 计算机（例如 JScript/VBscript）上运行，允许以“人类”顺序合并文件？

我尝试实现的方法如下：如果文件名包含数字，则确定该数字包含多少位并相应地添加零。例如`file1`会变成`file001`.

这一次又一次地惨败。这可以做到吗？有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:28:50.947

添加前导零的方法应该有效 - 它究竟是如何失败的？

还有这些文件名是如何生成的？它们只是序号，还是任意的？如果它们是连续的，则不必计算最大位数，而是可以选择一个常数，让我们说总共 10 位数。如果你做 10，算法只会在你有超过 10 000 000 000 个文件要处理时才会中断，我希望这不会发生

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:30:43.183

此脚本在文件名中添加前导零。将文件名的长度设置为`%pre%`变量中零的数量。不处理长度较大的文件名。如果文件名已经存在，则会发生错误。查看输出并删除`echo`之前的命令，`ren`如果可以的话。

```
@echo off&setlocal
set "pre=0000000000" &rem max filename length-1

for /f "delims=:" %%i in ('^(@echo(%pre%^&@echo(^)^|findstr /o $') do set /a MinNameLength=%%i-3
for %%i in (*) do (
    set "fname=%%~ni"
    setlocal enabledelayedexpansion
    for /f "delims=:" %%i in ('^(@echo(!fname!^&@echo(^)^|findstr /o $') do set /a fnamelen=%%i-3
    if !fnamelen! lss %MinNameLength% (
        set "fname=%pre%!fname!
        set "fname=!fname:~-%MinNameLength%!
        echo ren "%%~fi" "!fname!%%~xi"
    ) else (
    echo file name too long: %%~nxi
    )
    endlocal
)
endlocal 
```

我建议您复制文件而不是重命名它们！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T22:02:53.970

有多种方法可以按不区分大小写的顺序对字符串数组（如文件名）进行排序，其中数字按值而不是按字符排序。这个非常适用于大型阵列，也适用于大多数小型阵列。

```
Array.prototype.naturalSort= function naturalSort(index){
    var T= this, L= T.length, i, who, next,
    isi= typeof index== 'number',
    rx=/(\.\d+)|(\d+(\.\d+)?)|([^\d.]+)|(\.\D+)|(\.$)/g;
    function nSort(aa, bb){
        var a= aa[0], b= bb[0], a1, b1, i= 0, n, L= a.length;
        while(i<L){
            if(!b[i]) return 1;
            a1= a[i];
            b1= b[i++];
            if(a1!== b1){
                n= a1-b1;
                if(!isNaN(n)) return n;
                return a1>b1? 1:-1;
            }
        }
        return b[i]? -1:0;
    }
    for(i= 0;i<L;i++){
        who= T[i];
        next= isi? T[i][index] || '':who;
        T[i]= [String(next).toLowerCase().match(rx), who];
    }
    T.sort(nSort);
    for(i= 0;i<L;i++){
        T[i]= T[i][1];
    }
} 
```

如果需要，您可以重写它以将其从 Array 原型中取出并传入数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-10T02:49:21.143

如果所有文件都有相同的命名方案，即从“file1”到“file999”，那么很容易（而且很快！）实现这样的重命名。下面的批处理文件有两个参数：文件名的固定部分和新名称中所需的位数。例如`renumber.bat file 4`，会产生新名称，例如“file0001”、“file0002”... 到“file0999”。

```
@echo off
for %%a in ("%~1*.*") do (
   set "name=%%~Na"
   setlocal EnableDelayedExpansion
   set number=0000000000!name:%~1=!
   ECHO ren "%%a" "%~1!number:~-%2!%%~Xa"
   endlocal
) 
```

**编辑**：*添加了可选方法*

另一方面，正如 Endoro 在他的回答中建议的那样，下面的批处理文件在名称中插入前导零。在这种情况下，将新名称的*总长度*放在第一个参数中；原始较长的名称将不会被处理。

```
@echo off
for %%a in (*.*) do (
   set name=0000000000000000%%a
   setlocal EnableDelayedExpansion
   set newName=!name:~-%1!
   if "!newName:~0,1!" equ "0" ECHO ren "%%a" "!newName!"
   endlocal
) 
```

# java - 记录异常 - 如何充分利用它们

> ID：15911729
> 
> 赞同：0
> 
> 时间：2013-04-09T20:21:11.060
> 
> 标签：java, exception, testing, logging, exception-handling

我今天遇到了一些对我来说很新鲜的东西`Logging Exceptions`...... 我看到很多人这样做，但我不明白他们为什么这样做以及他们如何充分利用它们。

```
catch (Throwable ex) {
            Logger.getLogger(GenericDAO.class.getName()).log(Level.SEVERE, null, ex);
            throw new DBException(ex.getMessage(), ex);
        } 
```

说上面的代码片段是用于记录数据库更新方法的异常`update ()`。

当`Logger.getLogger(GenericDAO.class.getName()).log(Level.SEVERE, null, ex);`执行时，真正发生了什么。因此可以从文件中访问某些内容吗？如果是这样，在哪里？

开发人员在进行组件测试时可以使用日志记录吗？还是单元测试？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T20:24:56.273

该`Logger`框架可以配置为写入文件、发送电子邮件、发布到支持小组或致电总统。这样，开发人员可以让操作人员在发生此类错误时如何最好地发出警报。

除此之外，堆栈跟踪以正常方式用于在任何类型的测试或生产问题解决期间进行调试。

# c# - Ajax AutcompletExtender 不返回任何结果

> ID：15911737
> 
> 赞同：0
> 
> 时间：2013-04-09T20:21:30.650
> 
> 标签：c#, asp.net, ajax, autocomplete

我在 aspx 页面上有一个文本框、一个脚本管理器和一个自动完成扩展器。我试图简单地在文本框中自动完成，但目前一无所获。我错过了什么？当我尝试调试代码时，断点永远不会超出 GetComplete 方法中的第一个花括号。我在VS2010

标记：

```
<%@ Page Title="Home Page" Language="C#" MasterPageFile="~/Site.master" AutoEventWireup="true"
    CodeBehind="Default.aspx.cs" Inherits="AjaxAutocomplete._Default" %>

<%@ Register assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" tagprefix="asp" %>

<asp:Content ID="HeaderContent" runat="server" ContentPlaceHolderID="HeadContent">
</asp:Content>
<asp:Content ID="BodyContent" runat="server" ContentPlaceHolderID="MainContent">

<asp:ScriptManager ID="ScriptManager1" runat="server">
</asp:ScriptManager>
    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
    <asp:AutoCompleteExtender ID="TextBox1_AutoCompleteExtender" runat="server" 
        DelimiterCharacters="" Enabled="True" ServiceMethod="GetComplete" MinimumPrefixLength="3" TargetControlID="TextBox1">
    </asp:AutoCompleteExtender>

</asp:Content> 
```

后面的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Data;
using System.Data.SqlClient;
using System.Configuration;

namespace AjaxAutocomplete
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {

        }
        [System.Web.Script.Services.ScriptMethod]
        [System.Web.Services.WebMethod]
        public static List<string> GetComplete(string Prefixtetxt)
        {
            List<string> returnList = new List<string>();
            string cs = ConfigurationManager.ConnectionStrings["dbcs"].ConnectionString;
            using (SqlConnection conn = new SqlConnection(cs))
            {
                conn.Open();
                using (SqlCommand cmd = new SqlCommand())
                {
                    cmd.CommandType = CommandType.StoredProcedure;
                    SqlParameter p = new SqlParameter("@drug_name", Prefixtetxt);
                    //cmd.Parameters.AddWithValue("@drug_name", p);
                    cmd.Parameters.Add("@drug_name", SqlDbType.VarChar);
                    using (SqlDataReader reader = cmd.ExecuteReader())
                    {
                        returnList.Add(Convert.ToString(reader["drug_name"]));

                    }
                }

            }
          return returnList;

        }
    }
} 
```

来自 Sql Server 的 sproc

```
create proc spFindAllDrugs
@drug_name varchar(100)
as
begin
select distinct drug_name
    from rx 
    where drug_name like '%' + @drug_name + '%'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:17:50.967

看起来您没有将`SqlCommand`与连接相关联或告诉命令您的存储过程的名称。尝试修改您的代码，如图所示。

```
 using (SqlCommand cmd = new SqlCommand("spFindAllDrugs"))
        {
            cmd.Connection = conn;
            cmd.CommandType = CommandType.StoredProcedure; 
```

# php - CentOS 6.4 无法安装 phpize

> ID：15911740
> 
> 赞同：0
> 
> 时间：2013-04-09T20:21:40.640
> 
> 标签：php, centos, yum

我正在尝试在 CentOS 6.4 虚拟盒映像上安装 xdebug，但遇到了找不到 phpize 的问题。我尝试安装 php-devel，但 yum 告诉我存在依赖问题。

关于我能做些什么来克服这个问题有什么想法吗？

我应该只下载源代码并进行安装吗？

```
pecl install xdebug
downloading xdebug-2.2.2.tgz ...
Starting to download xdebug-2.2.2.tgz (250,184 bytes)
.....................................................done: 250,184 bytes
66 source files, building
running: phpize
sh: phpize: command not found
ERROR: `phpize' failed
[root@localhost ~]# yum install php-devel
Loaded plugins: etckeeper, fastestmirror, refresh-packagekit, security
Loading mirror speeds from cached hostfile
 * base: centos-mirror.jchost.net
 * epel: linux.mirrors.es.net
 * extras: ftpmirror.your.org
 * updates: mirror.flhsi.com
Setting up Install Process
Resolving Dependencies
-->  Running transaction check
---> Package php-devel.x86_64 0:5.3.3-22.el6 will be installed
-->  Processing Dependency: php(x86-64) = 5.3.3-22.el6 for package: php-devel-5.3.3-22.el6.x86_64
Package php-5.3.3-22.el6.x86_64 is obsoleted by mod-php-5.4-apache2-zend-server-5.4.11-6.x86_64 which is already installed
-->  Finished Dependency Resolution
Error: Package: php-devel-5.3.3-22.el6.x86_64 (base)
           Requires: php(x86-64) = 5.3.3-22.el6
           Available: php-5.3.3-22.el6.x86_64 (base)
               php(x86-64) = 5.3.3-22.el6
You could try using --skip-broken to work around the problem
You could try running: rpm -Va --nofiles --nodigest 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:29:37.360

似乎您已经安装了 mod-php-5.4-apache2-zend-server-5.4.11-6.x86_64，它是 php-5.3.3-22.el6.x86_64 的替代品。但是 php-5.3.3-22.el6.x86_64 是 php-devel-5.3.3-22.el6.x86_64 的要求，因为你没有 php-5.3.3-22.el6.x68_64 （你有不会自动降级的较新版本）导致冲突。

您可以“降级”到 php-5.3.3-22.el6.x86_64 或找到与 mod-php-5.4-apache2-zend-server-5.4.11-6.x86_64 一起使用的 php-devel 包的等效项或编译你自己的phpize。

# php - 在多个场合使用来自 Foreach 的数组

> ID：15911741
> 
> 赞同：0
> 
> 时间：2013-04-09T20:21:41.260
> 
> 标签：php, arrays, foreach

尝试呈现来自数组的一些信息时遇到问题。

我有一个`foreach`检查`n`站点中的会话，然后我为每个会话调用数据库并加载一组项目。

出来后`foreach`，我想按顺序使用相同的数组来一次一个地显示项目，但是我只看到最后一个项目的`n`时间。

本质上，在第二个`foreach`中，`$row2['name']`and`$row2['price']`仅显示`n`次数，但始终显示表的最后一项。

```
foreach ($_SESSION['cart'] as $item) 
{ 
$pid = $item['itemId'];
$q = $item['qty'];
if($q==0) continue;
$query2 = $con -> prepare("SELECT * FROM item_descr WHERE id_item = :idItem");
$query2-> bindValue (':idItem',$pid);
$query2->execute();
$row2 = $query2->fetch(PDO::FETCH_ASSOC);
SOME HTML STUFF....
} 
```

这里有一些独立的 HTML 内容：

```
foreach ($_SESSION['cart'] as $item)    
{
   $pid = $item['itemId'];
   $q = $item['qty'];
HTML <div class="subTotalItem">
   <span class='cartItemsText'><?php echo **$row2['name']**; ?></span>
<span class='cartItemsText2'><?php echo $q." x "." $".$**row2['price'];** $subTotal+= $row2['price'] * $q; ?></span>
    </div>
} 
```

知道问题可能出在哪里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:34:01.633

将您的“稍后显示的内容”存储在一个字符串中，并在您需要的地方回显它。

```
$subtotalStuff = "";

foreach ($_SESSION['cart'] as $item) { 
    $pid = $item['itemId'];
    $q = $item['qty'];
    if($q==0) continue;

    $query2 = $con -> prepare("SELECT * FROM item_descr WHERE id_item = :idItem");
    $query2-> bindValue (':idItem',$pid);
    $query2->execute();
    $row2 = $query2->fetch(PDO::FETCH_ASSOC);

    $subtotalStuff .= "<div class='subTotalItem'><span>" . $row2['name'] . "</span><span>" . $q . " x " . " $" . row2['price'] . "</span></div>\r\n";
    $subTotal+= $row2['price'] * $q;

    SOME HTML STUFF....
}

echo $subtotalStuff;
echo $subTotal; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:27:58.620

将 PDO 配置为 PDO::ATTR_CURSOR => PDO::CURSOR_FWDONLY 的准备好的语句的默认选项不是吗？如果我是对的，那意味着您必须再次运行相同的查询来编写代码的 HTML 部分。

我没有可逆光标的经验，但有一个选项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:30:37.203

我只能假设您以某种方式在您省略的“SOME HTML STUFF”部分中的某处设置了 $_SESSION['cart'] 变量。我这样说是因为查看您的代码，我希望 $_SESSION['cart'] 对于第二个 foreach 具有与第一个 foreach 相同的确切值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T20:31:00.493

您应该在与查询相同的循环中打印出来， $row2 每次通过循环时都会重置。

```
foreach ($_SESSION['cart'] as $item) 
{ 
 $pid = $item['itemId'];
$q = $item['qty'];
if($q==0) continue;
$query2 = $con -> prepare("SELECT * FROM item_descr WHERE id_item = :idItem");
$query2-> bindValue (':idItem',$pid);
$query2->execute();
$row2 = $query2->fetch(PDO::FETCH_ASSOC);

SOME HTML STUFF....

Put your HTML output here, not in second loop

 } 
```

这应该工作

# java - 格式化实用程序类

> ID：15911749
> 
> 赞同：0
> 
> 时间：2013-04-09T20:22:02.300
> 
> 标签：java, class, utility

我已经实现了一个名为 FormatUtils 的实用程序类（带有静态方法的 final），它将 Employee 对象中的数据转换为可用的格式（例如，剥离字符串中的“$”符号并将它们解析为双精度，将名称重新格式化为名字和姓氏）。现在，在我的代码中的某处，我需要一种方法来格式化大量 Employee 数据字段以输出为单个字符串（稍后发送到 stdout）。当它可能只需要与 Employee 对象一起使用而不是具有一般用途时，将它放在这个实用程序类中是否有意义？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:27:10.003

我可能会移动将单个格式化`Employee`为`Employee`类本身的方法。如果需要对员工列表进行不同/额外的格式化（例如行和列标题），我可能会将其放入实用程序方法（或类，如果需要重用）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:45:26.793

不要`Employee#toString()`用来为人类读者格式化它；仅使用该方法进行调试。否则，您可能无法使用类中的任何内容在调试器中显示其状态。我知道原始包装器和枚举`toString()`用于此目的，但这主要用于将它们与字符串连接一起使用。

“剥离'$'标志字符串并将它们解析为双打”是什么意思？您是否将员工的工资存储为字符串？不要那样做。总的来说，货币价值应该是`BigDecimal`或`BigInteger`对象。格式化时使用美元符号`NumberFormat.getCurrencyInstance()`。它也使数据库工作更容易。

如果您正忙于将名称拆分为名字和姓氏，那么您确实需要一个`Name`类，并且应该为此提供格式化程序。对于 JPA 工作，您可以使 Name 实例变量`@Embeddable`。

你可以给`Employee`类格式方法，或者你可以让你的类实现`java.util.Formattable`，可能接受*替代*格式标志。您甚至可以使用“getless 编程”并提供`Employee`如下方法：

```
public void writeToFormally(final Appendable a) {...}
public void writeToSimply(final Appendable a) {...} 
```

# python - 如何在不调用函数的情况下获取函数的属性

> ID：15911750
> 
> 赞同：1
> 
> 时间：2013-04-09T20:22:03.277
> 
> 标签：python, python-2.7, attr

说我有这样的功能

```
def spam():
    spam.eggs = "Foobar"
    #do stuff
    return 
```

我想在另一个函数中获取`spam.eggs`( `"Foobar"`) 的值，而不必实际调用该`spam()`方法，例如，

```
def main():
  print spam.eggs 
```

我希望它返回`Foobar`。但是，显然，这行不通，因为我还没有调用 spam()，所以我从未分配过该`spam.eggs`属性，所以我必须这样做

```
def main():
    spam()
    print spam.eggs 
```

但是，如果我想要属性我不想调用该`spam()`函数`eggs`，实际上我想在调用它之前检查是否`spam()`有eggs属性，如果它等于`"Foobar"`，例如

```
def main():
    if hasattr(spam,'eggs'):
        if getattr(spam, 'eggs') == "Foobar":
            spam() 
```

但是和以前一样，因为我还没有打电话，所以我`spam`还没有分配`spam.eggs`。

有没有办法做到这一点，也许用装饰器？我想保持分配有点接近功能，所以我更喜欢不喜欢的东西

```
def func():
    setattr(spam, 'eggs', 'Foobar') 
```

`setattr()`除非在装饰器中，否则我必须使用另一种方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:25:31.057

可以用装饰器来完成，是的：

```
def addEggs(func):
    func.eggs = "foobar"
    return func

@addEggs
def spam():
    pass

>>> spam.eggs
'foobar' 
```

如果您希望能够以参数化的方式指定属性名称和/或值，则必须编写更复杂的装饰器：

```
def addAttr(attr, value):
    def deco(func):
        setattr(func, attr, value)
        return func
    return deco

@addAttr('attrName', 'value')
def spam():
    pass

>>> spam.attrName
'value' 
```

但是，仍然存在您为什么要这样做的问题。如果函数属性完全有用，那通常是因为有一个自然的地方来设置它们——也就是说，其他东西为了自己的目的设置函数的属性。如果您只是在定义函数时正确设置属性 --- 也就是说，如果属性是函数本身的固有部分 --- 似乎您可能想要更像带有方法的类的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:23:43.487

我认为您实际上想要一个带有静态字段的类。由于变量对于声明它们的函数是本地的，因此无法以您想要的方式访问它们

```
class Spam:
     eggs="foobar"
     def __init__(self,*args,**kwargs):
         # do some stuff
         Spam.eggs = "foobared"

print Spam.eggs
Spam()
print Spam.eggs 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T20:37:18.243

你会得到 spam.eggs 简单明了的属性。顺便说一句，您不必在函数内部来分配属性。你可以做

```
def spam():
    #do stuff
    return
spam.eggs = "Foobar" 
```

然后 spam.eggs 和 spam() 将完全一样

# api - 我可以从 url 中提取我的本地 Redis 数据吗？

> ID：15911754
> 
> 赞同：2
> 
> 时间：2013-04-09T20:22:10.800
> 
> 标签：api, url, redis

例如，是否可以执行以下操作：

`localhost:6379/?command=keys&a1=*`

并返回数据。类似于 API。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T08:15:56.607

[**webd.is 就是**](http://webd.is/)这样做的，它是一个用 C 编写的 HTTP 网络服务器。

### 主要特点：

> *   支持 GET 和 POST，以及用于文件上传的 PUT。
> *   默认情况下 JSON 输出，可选 JSONP 参数（?jsonp=myFunction 或 ?callback=myFunction）。
> *   带有 .raw 后缀的原始 Redis 2.0 协议输出
> *   HTTP 1.1 流水线（桌面 Linux 机器上每秒 70,000 个 http 请求。）
> *   多线程服务器，可配置的工作线程数。
> *   使用 TCP 或 UNIX 套接字连接到 Redis。
> *   按 IP 范围（CIDR 子网 + 掩码）或 HTTP 基本身份验证限制命令，返回 403 错误。
> *   配置文件中可能的 Redis 身份验证。
> *   二进制数据或斜杠和问号的 URL 编码参数。例如，%2f 被解码为 / 但不用作命令分隔符。
> *   日志，具有可配置的详细程度。
> *   跨域请求，可用于 XMLHttpRequest2（跨域资源共享 - CORS）。
> *   可选的守护进程。
> *   默认根对象：在 webdis.json 中添加 "default_root": "/GET/index.html" 以将请求替换为 / 与 Redis 请求。
> *   http_max_request_size 的 HTTP 请求限制（以字节为单位，默认设置为 128MB）。
> *   URL 中的数据库选择，例如使用 /7/GET/key 在 DB 7 上运行命令。

否则，这是一个非常基本的项目[**redis-rest**](https://github.com/antoniojrossi/redis-rest/blob/master/redis-rest.rb) in ruby​​，您可能想看看。

# sql - 由于 sql 查询导致的 SQL Server 性能问题

> ID：15911767
> 
> 赞同：1
> 
> 时间：2013-04-09T20:23:04.390
> 
> 标签：sql, sql-server, linq

需要一些帮助来解决此错误：

> 查询处理器用尽了内部资源，无法生成查询计划。这是一个罕见的事件，仅适用于极其复杂的查询或引用大量表或分区的查询。请简化查询。如果您认为您错误地收到了此消息，请联系客户支持服务以获取更多信息。

SQL 查询：（我只是放了一个查询。我运行了 9 个这样的查询）

```
var query1 = from article in _db.Articles
             from scl in article.Scls
             where article.publishDate < DateTime.Now
                && article.removalDate > DateTime.Now
                && article.finished == true
                && article.flagged== true
                && listOfScl.Contains(scl.id)
             select article;

var query2 = from article in _db.Articles
             from com in article.Coms
             where article.publishDate < DateTime.Now
                && article.removalDate > DateTime.Now
                && article.finished == true
                && article.flagged== true
                && listOfCom.Contains(com.id)
             select article;

query = (query1.Union(query2)).Distinct(); 
```

不知道查询它的工作正常但在 SQL Server 上出现一些性能问题有什么问题。

我需要一些帮助来避免此类错误并在不使用`UNION`.

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:05:02.270

另请注意，默认情况下 LINQ 执行 UNION，这将消除重复，**因此不需要 Distinct，这可能会提高性能。**

“在不使用 UNION 的情况下重新编写此 SQL 查询。”。这怎么样？

```
var query1 = from article in _db.Articles
             from scl in article.Scls
             where article.publishDate < DateTime.Now
                && article.removalDate > DateTime.Now
                && article.finished == true
                && article.flagged== true
                && ( 
                     listOfScl.Contains(scl.id)
                     || listOfCom.Contains(com.id) 
                   )
             select article; 
```

你可以试试这个的表现，这样你就不需要一个独特的。但是它会涉及一个子查询，所以很难说没有测试什么会表现得更好：

```
var query1 = _db.Articles.Where(article => article.publishDate < DateTime.Now
                && article.removalDate > DateTime.Now
                && article.finished == true
                && article.flagged== true
                && ( article.Scls.Any(s=> listOfScl.Contains(s.id))
                     || article.Coms.Any(c=> listOfCom.Contains(c.id))
                   )
                ); 
```

# boost - boost::shared_* 带有复制构造函数和赋值运算符

> ID：15911769
> 
> 赞同：1
> 
> 时间：2013-04-09T20:23:16.743
> 
> 标签：boost, shared-ptr, copy-constructor

我有一个包含 boost::shared_array 成员的类。其他成员不是动态的——只是一堆整数，没有指针。我希望这样一个类的默认复制构造函数会很好。

这是我的假设：

1.  假设我有这个类的一个实例，*orig*。

2.  *orig*的 shared_array 成员的引用计数为 1。

3.  现在我创建一个 orig 的副本：

    复制=原件；

4.  我现在希望*copy*和*orig*都有指向相同底层内存的 shared_arrays，每个引用计数为 2。

以上是正确的吗？

当有 boost::shared_* 成员时，我被各种警告默认复制构造函数的人吓坏了——但我永远找不到解释为什么默认值会/可能是坏的。例如，这里有人说应该定义明确的副本/分配，但没有解释原因：

[https://stackoverflow.com/a/716112/629530](https://stackoverflow.com/a/716112/629530)

有人可以澄清何时需要为包含 boost::shared_* (shared_array 和 shared_ptr) 成员的类定义复制构造函数和赋值运算符吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:59:47.850

以下类将 Pimpl Idiom 与 shared_ptr 结合使用：

```
class location
{
    struct impl
    {
        double _latitude;
        double _longitude;
    };
    std::shared_ptr<impl> _impl;
public:
    location(double latitude, double longitude)
        : _impl{new impl{latitude, longitude}}
    { }
    void move_to(double latitude, double longitude)
    {
        _impl->_latitude = latitude;
        _impl->_longitude = longitude;
    }
    // ...
}; 
```

代码编译并工作。但是，有一个奇怪的行为：

```
location london{51.51, 0.12};
location paris = london;
paris.move_to(48.86, 2.35);
std::cout << "London: " << london << '\n'; // prints 48.86/2.35 
```

更改对象的副本也会影响原始对象。在这种情况下，最好使用`std::unique_ptr`而不是`std::shared_ptr`，因为我们将被迫编写自己的复制构造函数。

在某些情况下，需要 的行为`std::shared_ptr`。让我们添加一个成员变量`metric`，用于计算两个位置之间的距离（因为计算距离可能有不同的策略）：

```
 std::shared_ptr<metric> _metric;
    double operator-(const location& rhs) const
    {
        return _metric->distance(*_impl, *rhs->_impl);
    } 
```

在这种情况下，a`std::shared_ptr`可以完美运行，因为度量不是位置感知状态的一部分，并且无法更改度量。

# mysql - 具有一行的第一列和 lastRow 的第二列的分组表

> ID：15911772
> 
> 赞同：1
> 
> 时间：2013-04-09T20:23:27.893
> 
> 标签：mysql

我被 Mysql Query 卡住了，甚至不知道它是否可能。

我有下表

![在此处输入图像描述](https://i.stack.imgur.com/G7CB5.png)

而且我想以`pstatus`startdnt 列包含第一行值和 enddnt 包含组的**最后**一行值的方式进行分组。最终结果将如下所示

![在此处输入图像描述](https://i.stack.imgur.com/UvQfV.png)

所以对于这个查询，我可以获得以下结果

```
SELECT pstatus,startdnt,enddnt,sum(Datediff(enddnt,startdnt)) as days  FROM status  GROUP by pstatus ORDER BY startdnt 
```

![在此处输入图像描述](https://i.stack.imgur.com/xnKsE.png)

请注意 pstatus (b) 可能是重复`n`次数。提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:42:58.357

这个怎么样：

```
SELECT pstatus,min(startdnt) as StartDate,max(enddnt)  as EndDate ... 
```

# javascript - 仅从使用 jquery 更改状态（选中或未选中）的复选框集合中获取复选框列表

> ID：15911774
> 
> 赞同：0
> 
> 时间：2013-04-09T20:23:34.220
> 
> 标签：javascript, jquery

我有一个包含多行的表，每一行都有一个处于选中或未选中状态的复选框。用户可以选中或取消选中几个复选框，然后点击提交按钮以保存他们的更改。

他们有什么方法可以只获取原始状态更改的复选框列表（从选中到未选中或从未选中到选中）？

如果这是可能的，那么我将能够为用户提供一个更新按钮，否则我可能必须为每一行提供一个按钮来更新。

我还考虑在每个复选框的状态更改后立即通过 ajax 进行更新，但我更喜欢通过一次更新来进行一次服务器调用。

非常感谢有关此问题的任何信息。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:39:48.773

如果`checked`在标记中设置了属性，您可以使用[`.attr()`](http://api.jquery.com/attr/)and[`.prop()`](http://api.jquery.com/prop/)

**html**

```
<input type="checkbox" checked="checked" />
<input type="checkbox" /> 
```

**js**

```
var changedInputs = $("input").filter(function() {
    var input = $(this),
        checked = (input.attr("checked") || "") === "checked";

    return (checked !== input.prop("checked"));
});

console.log(changedInputs); 
```

[例子](http://jsfiddle.net/QVTn5/1/)

# database - 跨多个时间的相似数据的数据库设计

> ID：15911778
> 
> 赞同：0
> 
> 时间：2013-04-09T20:23:55.223
> 
> 标签：database, sql-server-2008, timestamp

我正在尝试提出一种适用于我公司特定部门的数据库设计。

基本上，我有一个帐号列表，其中包含大量与之相关的字段。我的部门需要比较这些字段如何随时间变化（一年前该帐号在该字段中的内容是什么？）。

我目前正在考虑一种非常线性的方法，我只使用一个大表来存储带有时间戳的数据，因此表的名称为 AccountInfo04012013，然后下个月将是一个名为 AccountInfo05012013 的新表。这样我们就可以在任意两个月之间进行比较。

这个计划的缺点是什么？而我应该怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-19T14:52:52.803

您将不得不使用时间戳。所有数据库管理器都将内置此功能。

# yii - application.log 中出现奇怪的 404 错误并让 YII 忽略它们？

> ID：15911779
> 
> 赞同：1
> 
> 时间：2013-04-09T20:23:55.577
> 
> 标签：yii, bots

有些东西正在使用这个 URL 访问我的网站：

```
/(Yvax:%20uggc:/jjj.tbbtyr-nanylgvpf.pbz/hepuva.wf)uggc:/jjj.tbbtyr-nanylgvpf.pbz/hepuva.wf 
```

所以我得到错误：

```
[error] [exception.CHttpException.404] exception 'CHttpException' 
```

1.  有什么好担心的吗？
2.  如何阻止 YII 报告此特定错误和其他不需要的类似 404 错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:31:14.773

可能只是一个扫描仪脚本。我们一直受到这些打击。检查安全性，但只要检查出来就可以了。

# algorithm - 有哪些常见的焦点堆叠算法？

> ID：15911783
> 
> 赞同：8
> 
> 时间：2013-04-09T20:24:06.003
> 
> 标签：algorithm, image-processing, photo

我想编写自己的焦点堆叠软件，但无法找到任何算法的合适解释来提取堆栈中每个图像的焦点部分。

对于那些不熟悉焦点堆叠的人，[这篇维基百科文章](http://en.wikipedia.org/wiki/Focus_stacking)很好地解释了这个想法。

谁能指出我寻找算法的正确方向？甚至一些要搜索的关键词也会有所帮助。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-05-16T04:56:04.513

我意识到这已经超过一年了，但对于任何有兴趣的人来说......

我在机器视觉方面有相当多的经验，这就是我的做法：

1.  加载内存中的每个图像
2.  在其中一个通道（可能是绿色）上对每个图像执行高斯模糊：

    最简单的高斯核是：

    1 2 1

    2 4 2

    1 2 1

    这个想法是遍历每个像素并查看紧邻的像素。您循环通过的像素乘以 4，相邻像素乘以与上述内核对应的任何值。

    您可以使用以下等式制作更大的高斯核：

    exp(-(((x*x)/2/c/c+(y*y)/2/c/c)))

    其中 c 是模糊的强度

3.  对每个高斯模糊图像执行拉普拉斯边缘检测内核，但不应用阈值

    最简单的拉普拉斯算子是：

    -1 -1 -1

    -1 8 -1

    -1 -1 -1

    与高斯相同，将内核滑动到整个图像上并生成结果。

    计算更大内核的方程式如下：

    (-1/pi/c/c/c/c)*(1-(x*x+y*y)/2/c/c)*exp(-(x*x+y*y)/2/ c/c)

4.  取高斯结果的拉普拉斯算子的绝对值。这将根据内核的大小和强度来量化边缘的强度。

5.  现在创建一个空白图像，遍历每个像素并找到 LoG 中最强的边缘（即图像堆栈中的最高值）并从相应图像中获取该像素的 RGB 值。

这是我在 MATLAB 中创建的一个示例：

[http://www.magiclantern.fm/forum/index.php?topic=11886.0](http://www.magiclantern.fm/forum/index.php?topic=11886.0)

您可以随意使用它。它将创建一个名为 Outsharp.bmp 的文件，这就是您所追求的。

为了更好地输出图像，您可以： - 补偿图像之间亮度级别的差异（即直方图匹配或简单的级别调整） - 创建自定义算法以拒绝图像噪声 - 在生成堆栈后手动调整堆栈 - 应用高斯模糊（确保将结果除以 16）在焦点图上，以便更好地合并单个图像

祝你好运！

# javascript - 覆盖 Firefox 和 Chrome 中的快捷键

> ID：15911785
> 
> 赞同：6
> 
> 时间：2013-04-09T20:24:22.557
> 
> 标签：javascript, html, google-chrome, firefox

我有一个脚本应该打开网页的一部分，并分别在 Ctrl + n 和 Ctrl + s 上保存更改。我让它在 IE 中工作，但它似乎在 Firefox 和 Chrome 中不起作用。有任何想法吗？

我的覆盖功能。

```
function prevent(e)
{
try{e.stopPropagation();}catch(ex){}
try{e.preventDefault()}catch(ex){}
try{if (e.preventDefault)
        e.preventDefault();
    else {
        e.cancelBubble = true;
        e.returnValue = false;
        e.keyCode = 0;
    }}  catch(ex){}
} 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-09T22:07:59.967

我见过同样的问题。某些浏览器不允许您捕获某些快捷方式。看看这个[https://stackoverflow.com/a/7296303/1366887](https://stackoverflow.com/a/7296303/1366887)

某些组合键在 Chrome 4 中受到限制，但在 Chrome 3 中不受限制。请看这里：[https ://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-bugs/Ntc1byZXHfU](https://groups.google.com/a/chromium.org/forum/?fromgroups=#!topic/chromium-bugs/Ntc1byZXHfU)

这是Javascript：

```
$(window).keydown(function(event) {
  if(event.ctrlKey && event.keyCode == 84) { 
    console.log("Hey! Ctrl+T event captured!");
    event.preventDefault(); 
  }
  if(event.ctrlKey && event.keyCode == 83) { 
    console.log("Hey! Ctrl+S event captured!");
    event.preventDefault(); 
  }
}); 
```

我已经用过很多次了，效果很好。

这是您可以查看的另一个资源：http: [//unixpapa.com/js/key.html](http://unixpapa.com/js/key.html)

没有jQuery：

```
onkeydown = function(e){
  if(e.ctrlKey && e.keyCode == 'S'.charCodeAt(0)){
    e.preventDefault();
    //your saving code
  }
} 
```

这是它工作的[JSFIDDLE](http://jsfiddle.net/kdaVT/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-15T14:43:58.660

对于将来寻找此功能的任何人，当前浏览器的答案如下：

```
if (event.ctrlKey && event.key === 'k') event.preventDefault() 
```

# django - 如何根据今天的日期对我的 Django 查询集进行排序？

> ID：15911791
> 
> 赞同：7
> 
> 时间：2013-04-09T20:24:37.527
> 
> 标签：django

有谁知道我如何根据今天的日期对我的 django 查询集进行排序（在这种情况下是日期）？

```
class Person(models.Model):
    name = models.CharField(max_length=50)
    date = models.DateField() 
```

我的目标是列出名称和日期条目。列表顶部将是日期最接近今天日期（日/月）的条目。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-12T14:01:18.000

您可以使用[额外的](https://docs.djangoproject.com/en/1.5/ref/models/querysets/#extra)查询集方法从数据库表中选择其他数据。

这是适用于 MySql 的示例：

```
Person.objects.extra(select={
    'datediff': 'ABS(DATEDIFF(date, NOW()))'}).order_by('datediff') 
```

DATEDIFF - 返回两个日期之间的天数差，ABS - 返回绝对值。对于 sqlite，有不同的语法，请参阅此[答案](https://stackoverflow.com/questions/289680/difference-between-2-dates-in-sqlite)。

**编辑：使用当年**

```
Person.objects.extra(select={
    'datediff': "ABS(DATEDIFF(CONCAT(YEAR(now()), '-', MONTH(date), '-', DAY(date)), NOW()))"}
).order_by('datediff') 
```

**编辑 2：优化 ***

```
from datetime import date
dayofyear = int(date.today().strftime("%j"))

datediff = 'LEAST(ABS(DAYOFYEAR(date) - %d), ABS((366 - %d + DAYOFYEAR(date))) MOD 366)' % (
      dayofyear, dayofyear
    )
Person.objects.extra(select={'datediff': datediff}).order_by('datediff') 
```

**编辑 3：给定（今天）日期之后的最近日期**

```
 from datetime import date
    dayofyear = int(date.today().strftime("%j"))

    datediff = '(DAYOFYEAR(date) - %d + 365) MOD 365' % (
          dayofyear
        )
    Persion.objects.extra(select={'datediff': datediff}).order_by('datediff') 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T20:29:50.297

如果要根据日期排序，可以按以下顺序排序：`.order_by('date')`在结果查询集上。

我不确定这是否能回答你的问题。如果您的意思是只想选择日期为今天的人员，您可以使用：

```
import datetime
now = datetime.datetime.now()
persons_with_date_today = Person.objects.filter(date=now) 
```

# jython - Jython 中的双缓冲

> ID：15911792
> 
> 赞同：0
> 
> 时间：2013-04-09T20:24:44.233
> 
> 标签：jython, double-buffering

最近我开始学习 Jython，现在我的问题很简单。我想提高我的动画质量。不幸的是，我不知道如何为我的小程序添加双缓冲。你可以帮帮我吗？此致！

```
from javax.swing import JToolBar
from javax.swing import JButton
from javax.swing import JFrame
import time
from java import awt 
from java.awt import BorderLayout

class Canvas(awt.Canvas): 
    u"Canvas - drawing area"
    def __init__(self,winSize = 400): 
        self.play = False
        self.background=awt.Color.black 
        self.winSize = winSize
        self.l = 0
    def playSim(self, play):
        if play == True: 
            self.play = True
            self.repaint()
        else: self.play = False
    def paint(self, g):    
        g.fillRect(50, int(self.winSize/4), self.l, int(self.winSize/2))
        if self.l < self.winSize: self.l += 1
        else: self.l = 0
        time.sleep(0.02)
        if self.play == True: self.repaint()

class Example(JFrame):
    def __init__(self):
        super(Example, self).__init__()
        self.initUI()

    def initUI(self):
        winSize = 600
        toolbar = JToolBar()
        self.playButton = JButton("Start", actionPerformed=self.playButtonPress )
        toolbar.add(self.playButton)
        self.add(toolbar, BorderLayout.NORTH)

        self.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)
        self.setSize(winSize, winSize)
        self.setResizable(False)
        self.setLocationRelativeTo(None)
        self.setVisible(True)
        self.canvas = Canvas(winSize)
        self.getContentPane().add(self.canvas)  
        self.setTitle("TEST")
        self.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)

    def playButtonPress(self, e):
        if self.playButton.getLabel() == "Start": 
            self.canvas.playSim(True)
            self.playButton.setLabel("Stop")
        else: 
            self.playButton.setLabel("Start")
            self.canvas.playSim(False)

if __name__ == '__main__':
    Example() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-27T18:21:34.673

我解决了我最近的问题：

```
from javax.swing import JToolBar
from javax.swing import JButton
from javax.swing import JFrame
import time
from java import awt 
from java.awt import BorderLayout

class Canvas(awt.Canvas): 
    u"Canvas - drawing area"
    def __init__(self,winSize = 400): 
        self.play = False
        self.background=awt.Color.black 
        self.winSize = winSize
        self.l = 0
        self.bi = BufferedImage(winSize, winSize, BufferedImage.TYPE_INT_RGB)
        self.offScreenGraphics = self.bi.getGraphics()
    def playSim(self, play):
        if play == True: 
            self.play = True
            self.repaint()
        else: self.play = False
    def paint(self, g):    
        self.offScreenGraphics.fillRect(50, int(self.winSize/4), self.l, int(self.winSize/2))
        if self.l < self.winSize: self.l += 1
        else: self.l = 0
        g.drawImage(self.bi, 0, 0, None)
        time.sleep(0.02)
        if self.play == True: self.repaint()

class Example(JFrame):
    def __init__(self):
        super(Example, self).__init__()
        self.initUI()

    def initUI(self):
        winSize = 600
        toolbar = JToolBar()
        self.playButton = JButton("Start", actionPerformed=self.playButtonPress )
        toolbar.add(self.playButton)
        self.add(toolbar, BorderLayout.NORTH)

        self.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)
        self.setSize(winSize, winSize)
        self.setResizable(False)
        self.setLocationRelativeTo(None)
        self.setVisible(True)
        self.canvas = Canvas(winSize)
        self.getContentPane().add(self.canvas)  
        self.setTitle("TEST")
        self.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE)

    def playButtonPress(self, e):
        if self.playButton.getLabel() == "Start": 
            self.canvas.playSim(True)
            self.playButton.setLabel("Stop")
        else: 
            self.playButton.setLabel("Start")
            self.canvas.playSim(False)

if __name__ == '__main__':
    Example() 
```

现在我有另一个（相当微不足道的）问题：我怎样才能从这个*python 文件**类文件*准备好将它作为小程序发布到网站上？

# php - 将 swiftmailer 库放入 httpdocs 的危险

> ID：15911797
> 
> 赞同：0
> 
> 时间：2013-04-09T20:24:57.720
> 
> 标签：php, apache

我即将在网络服务器上安装 swiftmailer，托管公司对我可以访问的内容设置了非常高的限制。我对服务器端脚本很陌生，因此想知道在 httpdocs 中安装 php 扩展（库）是否有任何危险，因为据我所知，如果你想破解一个网站，它是 Web 服务器最容易访问的部分？我有什么需要担心的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:27:35.587

这样做没有固有的危险，但是通过 .htaccess 禁用直接访问（感谢 mpm）是个好主意。

# asp.net-mvc-3 - 处理 DbContext 后的问题

> ID：15911798
> 
> 赞同：8
> 
> 时间：2013-04-09T20:25:04.690
> 
> 标签：asp.net-mvc-3, entity-framework-4, dispose, dbcontext

我最近对我的 MVC3 应用程序进行了更改，以尝试正确处理`DbContext`对象 [1]。这在开发中效果很好，但是一旦应用程序被推送到我的生产服务器，我开始间歇性地收到一些有趣的异常，这些异常会一直持续到 AppPool 被回收。异常可以追溯到我自定义的代码，`AuthorizeAttribute`如下所示：

```
System.InvalidOperationException: The 'Username' property on 'User' could not be set to a 'Int32' value. You must set this property to a non-null value of type 'String'.

System.InvalidOperationException: The 'Code' property on 'Right' could not be set to a 'String' value. You must set this property to a non-null value of type 'Int32'. 
```

（数据库架构如下所示：用户：[Guid，String，...]，权限：[Guid，Int32，...]）

就好像一些“电线正在交叉”，应用程序正在混合来自数据库的结果：试图将`Right`结果具体化为 a `User`，反之亦然。

为了管理 的处置`DbContext`，我将代码放入每个控制器级别存储。当控制器被处置时，我也处置了`DbContext`。我知道这很 hacky，但是`AuthorizeAttribute`通过`filterContext.Controller`.

处理`DbContext`这个庄园的对象生命周期有什么问题吗？关于为什么我得到上面的交叉异常有任何合乎逻辑的解释吗？

[1] 虽然我知道没有必要处置`DbContext`对象，但我最近遇到了一些消息来源，指出无论如何这是最佳实践。

**编辑（根据@MikeSW 的评论）**

当在范围内时，`AuthorizeAttribute`表示 的属性`DbContext`正在方法中设置。该属性随后在该方法中使用。`OnAuthorization``AuthorizationContext``AuthorizeCore`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T12:17:35.250

你真的需要处理上下文吗？

根据与 Microsoft ADO.NET Entity Framework 团队有联系的 Jon Gallant的[这篇文章：](http://blog.jongallant.com/2012/10/do-i-have-to-call-dispose-on-dbcontext.html#.Uw8rsvl_vQM)

> 我是否总是必须在我的 DbContext 对象上调用 Dispose() ？没有
> 
> 在与 EF 团队的开发人员交谈之前，我的回答总是响亮的“当然！”。但 DbContext 并非如此。您不需要对在 DbContext 对象上调用 Dispose 感到虔诚。尽管它确实实现了 IDisposable，但它只是实现了它，因此您可以在某些特殊情况下调用 Dispose 作为保护措施。默认情况下，DbContext 会自动为您管理连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-26T19:41:16.190

首先，我建议您“真正”熟悉 [IIS 7.0 的 ASP.NET 应用程序生命周期概述，](http://msdn.microsoft.com/en-us/library/bb470252(v=vs.90).aspx)因为它是良好 MVC 应用程序设计的基础。

现在尝试“模仿”您的代码库

假设您有一个类似的自定义 MembershipProvider，如此处所述[https://stackoverflow.com/a/10067020/1241400](https://stackoverflow.com/a/10067020/1241400)

那么你只需要一个自定义`Authorize`属性

```
public sealed class AuthorizeByRoles : AuthorizeAttribute
    {
        public AuthorizeByRoles(params UserRoles[] userRoles)
        {
            this.Roles = AuthorizationHelper.GetRolesForEnums(userRoles);
        }
    }

public static class AuthorizationHelper
{       
    public static string GetRolesForEnums(params UserRoles[] userRoles)
    {
        List<string> roles = new List<string>();
        foreach (UserRoles userRole in userRoles)
        {
            roles.Add(GetEnumName(userRole));
        }
        return string.Join(",", roles);
    }

    private static string GetEnumName(UserRoles userRole)
    {
        return Enum.GetName(userRole.GetType(), userRole);
    }        
} 
```

您可以在任何控制器或特定操作上使用它

```
 [AuthorizeByRoles(UserRoles.Admin, UserRoles.Developer)]
 public class MySecureController : Controller
 {
      //your code here
 } 
```

如果您愿意，您还可以订阅该`PostAuthorizeRequest`事件并根据某些标准丢弃结果。

```
 protected void Application_PostAuthorizeRequest(Object sender, EventArgs e)
        {

            //do what you need here
        } 
```

至于`DbContext`，我从来没有遇到过你的情况，是的[，每个请求](https://stackoverflow.com/a/10152605/1241400)都是正确的方法，所以你可以将它放在控制器或存储库中。

当然，建议您使用[过滤器](http://msdn.microsoft.com/en-us/library/system.web.mvc.actionfilterattribute_methods(v=vs.118).aspx)，然后将 [AllowAnonymous] 属性添加到您的操作中。

# c# - 保存 SerializableAttributes 的集合

> ID：15911800
> 
> 赞同：0
> 
> 时间：2013-04-09T20:25:20.903
> 
> 标签：c#, .net, serialization

我有几个`Employee`对象都是`SerializableAttribute`s。这是由于 WCF，因为这些是在客户端和服务器之间传递的对象。

我现在想将其中的几个保存并加载到文件中或使用`System.Properties`命名空间。使用系统属性，我找不到保存它们的方法，因为允许的类型非常有限：int、string、float 和其他一些。没有什么涉及可序列化的，唯一可用的集合是字符串集合。

最好的方法是什么？我不确定将集合保存到文件的正确方法是什么，例如将 SerializableAttributes 的 List<> 保存到文件中。否则，我可以使用 System.properties 并且可以通过将对象转换为字符串并返回来以“困难的方式”来做到这一点，但这种方法将非常难看。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:37:38.163

您有很多选择，例如：`JavaScriptSerializer XmlSerializer DataContractSerializer DataContractJsonSerializer BinaryFormatter SoapFormatter`.

（顺便说一句：`Serializable`属性仅由 BinaryFormatter 使用，不需要 WCF）

# python - Tkinter：列表框请自重

> ID：15911804
> 
> 赞同：1
> 
> 时间：2013-04-09T20:25:26.577
> 
> 标签：python, listbox, tkinter, execution

```
import Tkinter
def selector():
    ...
    selections_scroller = Tkinter.Scale(b_action, from_=0, to=len(ymls))
    ...
    pos = int(selection.curselection()[0])
    loaded = ymls[pos]
    stuff_loaded = True
    p_cost.set(loaded[4])
    print loaded
    ...
def find_pos(event):
    selector()
selection.bind("<Button-1>", find_pos) 
```

现在首先要注意，这不是所有代码，所以不要问 yml 是什么，它们正常工作。（它们是列表中的一堆元组）我添加了这些部分，因为为了让列表框成功打印“加载”，我需要执行两次“find_pos”。我第一次收到以下错误：

```
Exception in Tkinter callback
Traceback (most recent call last):
... (location) ...
pos = int(selection.curselection()[0])
IndexError: tuple index out of range 
```

据我了解，第一次执行时：

```
loaded = () 
```

但之后它会返回正确的值。为什么会这样？请帮助并感谢：D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:27:38.550

当前选择由类绑定设置。类绑定在特定于小部件的绑定*之后*触发。因此，您的绑定第一次触发时没有选择。第二次触发时，它将显示之前选择的任何内容。

`<<ListboxSelect>>`如果您想在选择更改时执行某些操作，则应该绑定。绑定这意味着无论用户单击它还是使用键盘绑定，您的代码都将起作用。

# opengl - 旧版 opengl - 为什么无法进行 phong 着色？

> ID：15911806
> 
> 赞同：2
> 
> 时间：2013-04-09T20:25:43.607
> 
> 标签：opengl

我知道传统的 opengl 只支持平面和 gouraud 着色，但我想知道为什么 phong 着色是不可能的？

有人说这是不可能的，因为遗留的opengl丢弃了法线，但我不知道它们在哪里被丢弃，也不知道它们为什么被丢弃。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T20:29:58.093

即使是传统的 openGL 也不会丢弃法线。在着色方面的不同之处在于，为了节省着色传统 opgenGL 的时间，仅计算每个顶点位置的着色值，将每个三角形的颜色混合在为顶点计算的 3 种颜色之间。

这种方法也称为**Gouraud 着色**。

**另一方面，**Phong 着色将为屏幕上渲染的每个像素计算光照值——不仅仅是顶点，并且以某种方式“猜测”所有其他光照值。****

 **## 猜猜为什么...

很可能选择了**Gouraud 着色**，因为它涉及的计算量要少得多，它可以实现相对逼真的近似值。

**Phong 着色**可以实现更逼真的近似值，但计算上的差异可能非常大。

## 例子

屏幕上显示的单个四边形只需要对顶点进行 4 次或多或少的复杂计算，而在计算时间方面，它们之间的混合会便宜得多。

另一方面，Phong 着色将为构成四边形的每个像素执行光照计算，这可以非常快速地进行大量计算。例如，想象一下您的四边形被光栅化为 (100 x 100) 像素的区域。

根据 int 绘制的顺序形状，如果首先绘制大量模糊对象，则必须执行的每像素计算的数量可能远远大于屏幕的分辨率，因为它们都将通过**深度测试**只是为了后来透支了。

## 少了什么东西 ？

旧版 opengl 中缺少的用于执行快速**Phong 着色**的不是任何丢失或以其他方式丢弃的法线，而是一种非常快速地执行上述每像素操作的方法。这可以通过所谓的**Shaders**实现。在图形硬件本身上运行的小程序。

旧版 opengl 不允许在如此细粒度的级别自定义渲染过程，因为整个渲染过程只能在所谓的**固定功能管道**中的几个预定义位置进行 tewaked 。

## 概括

除了您被告知尝试使用传统 opengl 执行**Phong 着色**的主要问题之外，不是丢弃任何法线，而是它不是为执行**逐像素**光照而设计的，而是仅执行**逐顶点**光照。**

# linux - 嵌入式 Linux 的 Linux 驱动程序

> ID：15911807
> 
> 赞同：5
> 
> 时间：2013-04-09T20:25:51.860
> 
> 标签：linux, linux-device-driver, embedded-linux

我希望将一些 USB 设备连接到我的嵌入式 Linux 板上。它是一个运行嵌入式 Linux 的 TI-ARM 处理器，但我猜它可能是任何嵌入式 Linux 板。

如果我购买了具有 Linux 支持/驱动程序的 USB 设备，该驱动程序（通常）是否可以重新编译以与 ARM 架构一起使用？（而不是 Windows 等）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-09T22:22:33.203

是的，通常可以预期 USB 驱动程序可以针对 x86 以外的其他架构进行编译。当然，这假设您的开发板确实有一个主机 USB 端口。有一些板子只有 USB 设备端口，许多 SoC 有 USB 主机和设备端口。

但成功编译（USB）驱动程序可能只是任务的一部分。
某些 (USB) 设备可能需要额外的库包和其他驱动程序来连接应用程序。例如，USB 数字电视调谐器需要大量软件包（V4L、ALSA、I2C 驱动程序、用户级固件加载）才能实际工作。

**澄清**
这些您可能必须构建的附加依赖项不是因为 USB。
依赖关系与设备类型有关。
以太网接口，无论是集成到 SoC 中还是使用 USB 外接，都可以轻松配置为在内核（例如协议栈）和用户空间（例如`Busybox`has`ifconfig`和`ping`路由应用程序）中提供全面支持。
PCI TV 调谐器与 USB 调谐器具有相同的依赖关系。但是嵌入式环境通常意味着您没有任何/大部分这些多媒体依赖项已经构建/安装。

# c++ - 将二维数组整数数据从 C++ 发送到 qml

> ID：15911808
> 
> 赞同：1
> 
> 时间：2013-04-09T20:25:55.453
> 
> 标签：c++, qt, qml

我一直在搜索一整天，但是这个问题让我很困扰。

我正在创建一个游戏（类似于“线条”）并尝试保存网格状态（0 - 如果清除，> 0 - 如果存储了一些球）。我班上有一个空位：

```
int Game::getGridMap() {
    return gameGridArray[9][9];
} 
```

进而：

```
onPressed: {
                buttonStart.color = "#222333"

                handleGame.initGame();
                var aRect = handleGame.getGridMap();
            } 
```

但它返回“未定义”或类似的东西。

我究竟做错了什么？这是存储这些数据的更好方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T22:44:54.867

我找到了解决方案！

首先，我创建了：

```
QList<int> getGridMap(); 
```

然后从二维数组创建一个列表：

```
for (int i = 0; i < 9; i++) {
        for (int j = 0; j < 9; j++) {
            oChildList.append(gameGridArray[i][j]);
        }
    } 
```

这个值可以很容易地传递给 QML。然后在qml中再次打开它：

```
var aRect = create2DArray(9);
var aString = handleGame.getGridMap();

aRect = listToArray(aString);

function listToArray(arr) {
    var arr2d = new create2DArray(9);

    for (var i = 0; i < 9; i++) {
        for (var j = 0; j < 9; j++) {
            arr2d[i][j] = arr[i*9+j];
        }
    }

    return arr2d;
}

function create2DArray(rows) {
  var arr = [];

  for (var i=0;i<rows;i++) {
     arr[i] = [];
  }

  return arr;
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-11T15:25:36.793

您需要在 Game 类头文件中定义 getGridMap() 之前添加“Q_INVOCABLE”。

例如，

Q_INVOCABLE int getGridMap();

# mysql - MySQL 加入表并计算不同用户，而在另一个表中没有引用

> ID：15911809
> 
> 赞同：-1
> 
> 时间：2013-04-09T20:25:56.650
> 
> 标签：mysql, database

我正在尝试计算未在另一个表中引用的用户...现在，我有一些类似的内容：

```
SELECT COUNT(DISTINCT u.id) FROM users u INNER JOIN orders o ON o.assigned!=u.id; 
```

但是，它返回一个无效值。有什么建议么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:28:13.037

我建议`LEFT JOIN`在两个表之间使用 a 并过滤表中没有匹配 id 的行`orders`：

```
select count(u.id)
from users u
left join orders o
  on o.assigned = u.id
where o.assigned is null 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!2/a2c1f/1)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:28:22.887

使用左连接并计算不匹配的行数：

```
SELECT COUNT(*)
FROM users u
LEFT JOIN orders o
ON o.assigned = u.id
WHERE o.assigned IS NULL 
```

另一种方法是使用 NOT IN 检查：

```
SELECT COUNT(*)
FROM users
WHERE id NOT IN (SELECT distinct(assigned) FROM orders) 
```

但是，根据我的经验，左连接的性能更好（假设有适当的索引）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:29:33.120

```
SELECT COUNT(1) FROM users u 
WHERE NOT EXISTS (SELECT * FROM orders o WHERE o.assigned=u.id); 
```

您是想要直接计数（就像您提到的那样），还是需要返回值？这会给你计数；如果您想要其他值，则应采用上面列出的其他方法之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T20:32:24.793

只需使用此查询，假设 id 在 users 表中是唯一的：

```
select count(*) From  Users as u where u.id not in (select assigned from orders) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-09T20:34:11.867

内部联接显式查找匹配的行，因此如果您正在查找不匹配的记录，这不是可行的方法

假设 ORDERS.ASSIGNED 与 USER.ID 匹配，外部联接可以从两者返回值并显示何时没有匹配项

select u.id, o.* from users u full external join orders o on o.assigned = u.id;

如果您只想知道哪个 USER.ID 没有 ORDERS 记录，您也可以 INTERSECT 或使用 NOT IN () 例如

从用户 u 中选择 u.id，其中 id 不在（从 orders.o 中选择 o.assigned）；

# c# - 在 Web 服务和控制台应用程序之间发送/接收大数据

> ID：15911815
> 
> 赞同：0
> 
> 时间：2013-04-09T20:26:22.677
> 
> 标签：c#, .net, database, json, web-services

这是我关于 SO 的第一篇文章 :) 我想交流数据，在这种情况下，从 DataTable 到保存到数据库的 Web 服务。我尝试过不同的东西。最近通过带有 XML 的“Stream”或完整的 DataSet 二进制序列化和 JSON。我相信 JSON 可能是最好的选择。通过 HttpWebRequest，我一次将一行从带有 JSON 的 DataTable 发送到 Web 服务。问题是：这是最好的方法吗？ IIS 将管理多少个连接？您是否可以通过网络服务传输更大的数据以与另一个数据库“同步”？我已经阅读了很多关于 SO 的帖子，但没有找到我想要的东西。

我想要一个不会超时或浪费连接/带宽的可靠传输结构。

# php - session_start() 每次刷新都会创建新会话

> ID：15911817
> 
> 赞同：5
> 
> 时间：2013-04-09T20:26:28.820
> 
> 标签：php, session-cookies, sessionid

我有一个问题`session_start()`。每次刷新/加载页面时，它都会创建一个新会话。

这是代码：

```
<?php
    $bob = session_id();
    echo "Session ID on load is ".$bob;
    echo "<br>";
    if($bob==""){
        session_start();
        $bob = session_id();
        echo ' session ID currently is '.$bob;
    }
// a bunch more stuff 
```

当我加载页面时，我得到以下信息：

加载时的会话 ID 是会话 ID 当前是 ed320bc5e24c871c9db8ea30e6796c14（或变体）

如果我刷新页面，我会得到：

加载时的会话 ID 是会话 ID，当前为 fbd69d01d511a7be382799dca7279a86（或变体）

会话 ID 在`session_start()`被调用之前始终为空白，并且始终是新的`session_id()`

它在所有浏览器中都执行此操作，并且我已检查以确保 cookie 已打开。

会话保存路径为`/tmp`. 我不确定它到底在哪里，但是通过我的根目录和所有其他目录，我找不到会话文件（假设它看起来像 sess_fbd69d01d511a7be382799dca7279a86）。

所以我认为保存路径发生了一些事情，但在这方面太新了，无法确定，而且服务器管理员相当无助。诊断问题的下一步应该是什么？服务器正在运行 5.3.22。

phpinfo在[这里](http://www.pcmxa.com/pcm/phpinfo.php)

谢谢你的帮助。

ps 如果您愿意，您可以访问 pcm.pcmxa.com 亲自查看问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T20:29:44.237

如果您的会话目录（最像您所说的**/tmp**）不可写，那么它将无法保存并且每次都必须重新生成一个新目录。以下是如何验证它：

```
if (!is_writable(session_save_path()))
{
 echo 'Session save path "'.session_save_path().'" is not writable!'; 
} 
```

如果是这种情况，您需要让服务器管理员为您的网络服务器运行的任何用户授予写入 /tmp 目录的权限。

# silverlight - 是否可以与 WCF RIA Services 进行聊天？

> ID：15911820
> 
> 赞同：0
> 
> 时间：2013-04-09T20:26:52.947
> 
> 标签：silverlight, wcf-ria-services

事实上，最佳实践是使用双工通信。但是，我有一个测试项目要从我的面试官那里完成，它的目的是使用 RIA 服务。有什么方法可以使用 RIA 服务将数据推送到 Silverlight 客户端？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T10:12:09.217

我以前做过，正如你所说，**投票**不是一个好的技术。请求 WCF 服务或 WCF RIA。对于**推动**我现在不。我们对 sl 使用**pull**方法。

也许可以使用 SignalR 类型的 js lib。顺便说一句，你需要在 js 和 SL 之间说话。

# ruby-on-rails - 如何使用 rspec 存根访问器

> ID：15911822
> 
> 赞同：2
> 
> 时间：2013-04-09T20:26:57.703
> 
> 标签：ruby-on-rails, ruby, rspec

我有以下课程：

```
class TwitterService
  def initialize
    @twitter ||= Twitter
  end

  def get_short_url_length
    @twitter.configuration.short_url_length
  end
end 
```

以及以下规格：

```
describe TwitterService do
  before(:each) do
    Twitter::Configuration.any_instance.stub(:short_url_length).and_return(12)
  end

  it 'does not send short_url_length request to Twitter' do
    twitter = TwitterService.new
    twitter.get_short_url_length.should == 12
  end
end 
```

我遇到的问题是`#short_url_length`on`Twitter::Configuration`没有被存根。我做错了吗？我想要实现的只是能够在`TwitterService#get_short_url_length`不运行 Twitter 库的情况下运行我的方法，这会导致对 Twitter API 的请求导致失败。

我正在使用以下工具：

*   导轨 3.2.12
*   Rspec 2.13.0
*   推特 4.6.2

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:29:29.167

在您的实现中，您是否确认 @twitter.configuration 实际上是 Twitter::Configuration 的一个实例？

无论如何，我认为更好的方法是将配置注入您的代码，即

```
def initialize(config = Twitter::Configuration)
  @twitter ||= config
end 
```

这可以是测试替身（模拟或存根），或者如果未指定，则使用真实服务。

# ios - 回复：将您的 Iphone 应用程序发布到 Cydia？

> ID：15911823
> 
> 赞同：0
> 
> 时间：2013-04-09T20:26:59.300
> 
> 标签：ios, crash, jailbreak, cydia, deb

**我的 Iphone 游戏在启动时崩溃**

我在 Xcode 上创建了我的应用程序，然后在该目录中创建了我的`DEBIAN`目录和`control`文件，然后成功创建了我的`.deb`文件，因为我在控制台中使用了以下命令`dpkg -b "(my apps name)"`。现在，一旦我有了`.deb`文件，我就把它上传到我的仓库。然后，该应用程序从 Repo 成功安装，但是一旦安装，无论我`respring`或`Re-boot`我的设备在启动时应用程序崩溃多少次。

有谁知道为什么它不起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:17:07.533

在将应用程序打包成 deb 之前，您需要使用 ldid 对二进制文件进行代码签名

**确保签署二进制文件**

例如

```
ldid -S myappfolder/myapp 
```

还要确保设置了正确的权限。

```
 chmod 0755 myappfolder/myapp
 chown 0:0 myappfolder/myapp 
```

# sql - 当您希望 NULL = NULL 为真时，在 SQL 中该怎么做？

> ID：15911825
> 
> 赞同：3
> 
> 时间：2013-04-09T20:27:01.080
> 
> 标签：sql, sql-server, null

想象一个表（名为 Example），它有一个主键字段 (KeyID) 和一个外键字段 (ForeignID)。此外键用于将我们表中的行链接到单独表中的外部行/项目，建立多对一关系。然而，对于我们的许多行，不存在这种关系，所以我们的外键字段`NULL`在这些行中。

现在，如果给定一个 KeyID（例如 123），获取包含**所有**具有匹配 ForeignID 值的行的结果集的首选 SQL 是什么？

我天真地从以下 SQL 开始：

```
SELECT E1.*
FROM Example E1
JOIN Example E2
  ON E2.KeyID = 123
  AND E2.ForeignID = E1.ForeignID 
```

当我们匹配的键行在 ForeignID 中具有正常值时，这非常有用。但是，如果 ForeignID 恰好是 ，它将失败（不返回任何内容）`NULL`。在做了一些初步搜索之后，我现在明白了原因（在阅读了这样[的](https://stackoverflow.com/questions/1843451/why-does-null-null-evaluate-to-false-in-sql-server)问题之后），但我还没有找到任何好的解决方案来解决这个限制。

授予 SQL Server 具有`ANSI_NULLS`我可以更改的设置，但这似乎是一个肮脏的、可能有问题的 hack。

或者，我总是可以制作自己的伪空值（如 0）并将其粘贴在 ForeignID 列而不是`NULL`，但这会破坏我为此列建立的外键约束。

那么如何最好地实现我想要的呢？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-09T20:28:31.350

未经测试，但我认为你可以这样做：

```
SELECT E1.*
FROM Example E1
JOIN Example E2
  ON E2.KeyID = 123
  AND (E2.ForeignID = E1.ForeignID
    OR (E2.ForeignID IS NULL AND E1.ForeignID IS NULL)) 
```

[编辑：作品，这里](http://sqlfiddle.com/#!3/23014/3)的 SQL Fiddle

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-09T20:31:02.047

[你也可以做](http://web.archive.org/web/20180422151947/http://sqlblog.com:80/blogs/paul_white/archive/2011/06/22/undocumented-query-plans-equality-comparisons.aspx)

```
SELECT E1.*
FROM   Example E1
       JOIN Example E2
         ON E2.KeyID = 123
            AND EXISTS (SELECT E2.ForeignID
                        INTERSECT
                        SELECT E1.ForeignID) 
```

# javascript - 基本了解javascript框架源码

> ID：15911829
> 
> 赞同：0
> 
> 时间：2013-04-09T20:27:16.257
> 
> 标签：javascript

我对 js 编程很陌生，我有一个问题：我正在阅读源代码`jQuery`，`Three.js`但没有找到对 javascript API 的引用。例如，如果您查看`jQuery`源代码，您将不会在源代码中找到“d `ocument.getElementById`”字样，因此当您编写“”时`$('#id')`，浏览器会告诉您它的意思是“ `document.getElementById`”......对于`Three.js`: 在源代码中有称为 _gl 的方法.WHATEVER 但我没有找到 gl.WHATEVER（webGL API 的一种方法）...

问题是如果内部没有别名（但仍然有效！！！）例如`_gl = "gl";`（在three.js中）或

在 jQuery 元素中 =`document.getElementById("elementId");` 我希望你明白我的意思......并提前谢谢你！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:37:37.853

很可能你没有找对地方。

在这里（开发者版本）[http://code.jquery.com/jquery-1.9.1.js](http://code.jquery.com/jquery-1.9.1.js)你可以找到 getElementById 并且一切都很好地记录在案。

但是在缩小的[http://code.jquery.com/jquery-1.9.1.min.js](http://code.jquery.com/jquery-1.9.1.min.js)中，你肯定什么也找不到

我没有使用过tree.js，但我确信同样的情况也存在。

你可能会这样想。如果您将获取一个文本文件，然后在其中创建存档，然后查看存档 - 很可能您不会从原始文本中找到单词。（这基本上是缩小版所做的）

# javascript - 用jQuery定义连字符属性？

> ID：15911833
> 
> 赞同：4
> 
> 时间：2013-04-09T20:27:42.407
> 
> 标签：javascript, jquery, jquery-mobile

我正在使用 jQuery mobile 和 Phonegap 制作一个测试应用程序。我有以下页面：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>jQuery Mobile: Theme Download</title>
    <script src="cordova-2.5.0.js"></script>
    <link rel="stylesheet" href="Longmont.min.css" />
    <link rel="stylesheet" href="jquery.mobile.structure-1.3.0.css">
    <script src="jquery.js"></script>
    <script src="jquery.mobile.js"></script>
    <script>
        document.addEventListener("deviceready", onDeviceReady, false);

        function onDeviceReady() {
            setTimeout(function() {
                       navigator.splashscreen.hide();
                       }, 500);
        }
    </script>
    <script>
    $(document).ready(function() {
        $.getJSON('http://localhost/api.php', {'id':3}, function(data) {
            var items = [];

            $.each(data, function(key, val) {
                items.push('<div data-role="collapsible"><h1>' + val + '</h1></div>');
            });

            $('<div/>', {
                data-role: 'collapsible-set',
                html: items.join('')
            }).appendTo('#page');

        });
    });
    </script>
</head>
<body>
    <div data-role="page" id="page">
    </div>
</body>
</html> 
```

我正在尝试将 items 数组放入`data-role`设置为 的 div 中`collapsible-content`。因此，我在创建属性时编辑它（在 中`$('<div/>', {`）。但是，此属性是连字符的，当我在模拟器中尝试此代码时，它会显示一个空白页面。

在 jQuery 中表示连字符属性的正确方法是什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-09T20:29:03.850

包含的对象属性`-`必须用引号引起来。

```
"data-role": value 
```

其他运算符和特殊字符（如引号、`:`、`;`、空格等）也是如此。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T20:41:25.420

> 要使用连字符定义属性，请检查*Kevin B的这个答案* [Define hyphenated attribute with jQuery?](https://stackoverflow.com/questions/15911833/define-hyphenated-attribute-with-jquery/15911862#15911862)

* * *

> 要增强可折叠标记，请在将项目附加到正文后按照以下方法进行操作。

对于可折叠（[参考](http://api.jquerymobile.com/collapsible/)）

```
$('[data-role=collapsible]').collapsible(); 
```

对于可折叠集（[参考](http://api.jquerymobile.com/collapsible-set/#method-refresh)）

```
$('[data-role=collapsible-set]').collapsibleset('refresh'); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-09T20:32:48.937

jQuery`data`并不完全类似于`dataset`，也不应该是因为它没有得到我们想要的广泛支持，这要感谢 MS。 `data-role`是无效的语法，但`dataRole`即使您期望它也不起作用。你可以这样做：

```
"data-role": value 
```

或者

```
{data: {role: value}} 
```

[http://jsfiddle.net/ExplosionPIlls/dK8ak/1/](http://jsfiddle.net/ExplosionPIlls/dK8ak/1/)

# c# - 单选按钮到字符串，字符串到数组

> ID：15911834
> 
> 赞同：0
> 
> 时间：2013-04-09T20:27:42.340
> 
> 标签：c#, visual-studio-2010

我试过这样

```
string value;
if(radioButton1.Checked)
{
value = "1";
} 
```

但是当我想使用 value 变量将其推送到数组时，出现了错误。这是因为 value 没有在这个范围内声明。这是我的错，因为我完全忘记了获取/设置方法。我尝试过这样的事情：（我可能可以使用 boolean thou）

```
string[] value = new string[] { value }; 
```

它没有奏效。所以我的问题是：如何或最简单的方法将有关 radiobox 的信息（如果已选中）放入数组中？

编辑：当然。这就是我试图让它发挥作用的方式。还尝试将值从字符串更改为 int 并在之后进行转换，但没有运气。这是这个按钮的全部代码。我的计划是检查选择了哪个单选框，然后将其转换为数组并存储在 .txt 文件中。

```
 private void button1_Click(object sender, EventArgs e)
        {
        bool value;
        if (radioButton1.Checked)
        {
            value = true;
        }
        else if (radioButton2.Checked)
        {
            value = false;
        }

        string[] radiobox = new string[] { value };
        System.IO.File.WriteAllLines(@"C:\test.txt", radiobox);
        } 
```

另一个编辑：所以在我将字符串更改为布尔值后，我收到了这个错误：

```
Cannot implicitly convert type 'bool' to 'string' 
```

当我尝试将其转换为字符串时（因为数组不想接受布尔值）

```
string[] radiobox = new string[] { value.ToString() }; 
```

我收到另一个错误：

```
Use of unassigned local variable 'value' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:32:35.563

您是否考虑过使用列表而不是数组？我发现它们更容易使用。此外，如果您只对是否选中单选框感兴趣，则您的值可能只是一个布尔值。

# java - 将实现的类分配给接口时的Java反射NoSuchMethod异常

> ID：15911843
> 
> 赞同：1
> 
> 时间：2013-04-09T20:28:17.787
> 
> 标签：java, reflection

Java 反射

我有如下界面

```
public Interface A { void print();} 
```

接口实现如下

```
public class B implements A {

int abc =0;
public void setAbc(int abc){this.abc=abc;}
public int getAbc(return this.abc;);

void print(){
System.out.println("Hello world");
}

} 
```

现在我将孩子分配到界面中，如下所示

```
A a = new B(); 
```

使用反射我试图从父母访问孩子如下

```
Class clazz = a.getClass()
clazz.getField("abc").set(a, new Integer(1456)); 
```

但我发现没有这样的方法异常

有什么快速帮助吗？我将孩子分配到父母 b/ci 有多个包含不同属性的实现..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-09T20:31:43.237

该`getField()`方法只会找到该字段，如果它是`public`. 您可以使用该[`getDeclaredField`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getDeclaredField%28java.lang.String%29)方法，如果它直接在类上声明，它将找到该字段，无论它是否`public`。

当您说 时`getClass()`，您将获得运行时`Class`（此处为`B`），即使变量`a`类型为 interface `A`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:33:50.197

```
Field[] declaredFields = dtoKlass.getDeclaredFields(); 
```

做这样的事情。我使用 getDeclaredField() 来完成您想要实现的目标。

# bash - 在保留空格的同时后期绑定 Bash 变量

> ID：15911848
> 
> 赞同：0
> 
> 时间：2013-04-09T20:28:25.547
> 
> 标签：bash, shell, unix

我正在尝试对我的包在 make 命令中的目录进行后期绑定。基本上， WITH_OPTIONS 命令行包含一个以空格分隔的链接选项列表，类似于配置脚本。问题是目录绑定较晚，在解析此脚本的命令行之后，所以我需要评估模板字符串以获得正确的变量绑定。通过谷歌搜索和阅读 Bash 常见问题，我能得到的最接近的结果，尤其是第 50 条是这样的：

```
MAKE_INSTALL="make install"
TEMPLATE=('--first=$a' '--second=$b' '--third=$a')

# Parse Parameters
a=/first/path
b=/second/path
TEMPLATE_REPL=$( eval echo ${TEMPLATE[@]} )
CMD="$MAKE_INSTALL WITH_OPTIONS=\"$TEMPLATE_REPL\""
$CMD 
```

我期望 $CMD 包含的是一个带有一个命令和 2 个参数的字符串：

```
make install WITH_OPTIONS="--first=/first/path --second=/second/path --third=/first/path" 
```

但是，我无法让 bash 将引号中的部分保持在一起，因此它一直将其解析为：

```
make install 'WITH_OPTIONS="--first=/first/path' '--second=/second/path' '--third=/first/path"' 
```

这显然是完全错误的，并且在执行时会导致错误的命令行。

我错过了什么？如何将引号之间的位保留为一个参数，而不是 3？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:33:16.327

为什么不简单地将 TEMPLATE 设为字符串：

```
TEMPLATE='--first=$a --second=$b --third=$a'
$ a=/first/path
$ b=/second/path
$ eval echo $TEMPLATE
--first=/first/path --second=/second/path --third=/first/path 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:09:47.207

```
MAKE_INSTALL="make install"
TEMPLATE='--first=$a --second=$b --third=$a'

# Parse Parameters
a=/first/path
b=/second/path
CMD="$MAKE_INSTALL WITH_OPTIONS=\"$TEMPLATE\""
eval $CMD 
```

正如 ennuikiller 指出的那样，数组是不必要的，但是因为 Johnathan Leffler 指出 make，我试图执行的命令是忽略双引号的东西，正确的方法是在执行 $CMD 时调用 eval。这将需要一些工作来适应我的脚本，但我认为这是我设置问题的基本解决方案。虽然我不能完全相信这个解决方案，但我很高兴至少给你一个 +1 的评分。

（Ed：因为需要第二个 eval，所以可以去掉第一个 eval。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T06:57:46.270

这是在 bash 脚本中使用后期绑定的通用示例，带有变量（变量替换）：

```
#!/usr/bin/env bash

A_tmp="echo -n Late binding: \$B !!!"             ## note the slash before $
B="test string"

A=`eval $A_tmp`

echo $A 
```

此脚本打印：

```
Late binding: test string !!! 
```

# java - Java中的异常处理是一种测试形式吗？

> ID：15911859
> 
> 赞同：0
> 
> 时间：2013-04-09T20:29:00.410
> 
> 标签：java, unit-testing, testing, integration-testing

正如标题所说：java中的异常处理是一种测试形式吗？它将属于哪一类测试？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:32:31.893

不，这是一种管理程序执行期间发生的错误的方法。它不是单元测试的一种形式。

# php - PHP 回显结果

> ID：15911860
> 
> 赞同：0
> 
> 时间：2013-04-09T20:29:01.543
> 
> 标签：php, echo

我将如何在另一个页面上回显以下结果。我需要它来回显用户选择的内容。

```
<strong>Return</strong>            
    <select id="Date" name="Date">                      
    <option value="0">--Select date/time--</option>
    <?php  foreach ($return as $return) { ?>
        <option value="<?php echo $return; ?>"><?php echo $return; ?></option>
    <?php } ?> 
```

谢谢

用户选择位置的完整代码。他们在此页面上选择的信息是我希望在另一个页面上得到回应的信息。

```
<!DOCTYPE html>
<?php
session_start();
?>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <meta name="apple-mobile-web-app-capable" content="yes" />
        <meta name="apple-mobile-web-app-status-bar-style" content="black" />
        <title>
        </title>
        <link rel="stylesheet" href="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <link rel="stylesheet" href="my.css" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js">
        </script>
        <script src="https://ajax.aspnetcdn.com/ajax/jquery.mobile/1.2.0/jquery.mobile-1.2.0.min.js">
        </script>
        <script src="my.js">
        </script>
        <!-- User-generated css -->
        <style>
        </style>
        <!-- User-generated js -->
        <script>
            try {

    $(function() {

    });

  } catch (error) {
    console.error("Your javascript has an error: " + error);
  }
        </script>
     </head>
    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
            <div data-theme="a" data-role="header">
            <a data-role="button" data-theme="d" href="login.html" data-icon="arrow-l" data-iconpos="left" class="ui-btn-left">
                    Back
                </a>
                <a data-role="button" href="index.html" data-icon="home" data-iconpos="right" data-theme="d"class="ui-btn-right">
                 Home  
                </a>
                <h3>
                    Book Car
                </h3>
           </div>

           <div data-role="content">
                <h3>
                    Select date/time:
                </h3>
                <br />
<?php
{
    mysql_connect("localhost" , "" , "") or die (mysql_error());
    mysql_select_db("") or die(mysql_error());

    $query = "SELECT `book_time`, `book_date`, `return_time`, `return_date` FROM `Rental`";

    //executes query on the database
    $result = mysql_query ($query) or die ("didn't query");

    //this selects the results as rows
    $num = mysql_num_rows ($result);    

    $return = array();
    $rent = array();
    while($row=mysql_fetch_assoc($result))
    {

        $rent[] = $row['book_date'].' '.$row['book_time'];
        $return[] = $row['return_date'].' '.$row['return_time'];
    }
}
?>      

    <form method="post" action="car.php">
    <strong>Rent out</strong>            
    <select id="Date" name="Date">                      
    <option value="0">--Select date/time--</option>
    <?php  foreach ($rent as $rent) { ?>
        <option value="<?php echo $rent; ?>"><?php echo $rent; ?></option>
    <?php } ?>

    </select>
    <br />

    <strong>Return</strong>            
    <select id="Date" name="Date">                      
    <option value="0">--Select date/time--</option>
    <?php  foreach ($return as $return) { ?>
        <option value="<?php echo $return; ?>"><?php echo $return; ?></option>
    <?php } ?>

    </select>

                <br />
                <br />

                <input type="submit" name="Submit" value="Book" />
            </form>

             </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:02:01.077

表格基础101：

```
~~~index.php~~~
<form action='the_new_page.php' method='POST'>
  <input type='text' name='first_thing'>
  <input type='hidden' name='some_hidden_guy' value='1'>
  <input type='submit' name='submit_button' value='submit'>
</form> 
```

当用户提交上述表单时，浏览器会将他们定向到`the_new_page.php`，并且`the_new_page.php`会知道所有的表单信息。

表格通过`name`和`value`，没有别的，因为你需要知道的。`id`纯粹是出于 html 的目的，并且作为 HTML 中的一项规则，您不允许拥有多个具有相同 ID 的元素。人们通常会混淆地将表单字段的 id 命名为与表单字段的“名称”相同，这使得了解每个字段的含义非常困难。

因此，提交表单后，它将转到您的第二页，然后您可以执行以下操作：

```
~~~the_new_page.php~~~
//You can then do
echo $_POST['some_hidden_guy'] //will be 1
echo $_POST['first_thing'] //Will be whatever you inserted into the text box 
```

如果您希望表单返回到您所在的当前页面，您只需将`action`空白保留为`<form action=''>`或`<form method='POST'>`

为多个页面保留相同的信息！

现在，这是一种非常不适合程序员的方法，因为您应该找到一种不必在任何页面上重复相同代码的方法。如果你不这样做，我现在警告你.. 这个应用程序的维护将成为一场噩梦，因为你每次想要添加一个新字段时都必须编辑每个页面。上例子。

现在，假设您将信息传递给 car.php，并且您现在想在 carplan.php 上使用它。

```
~~~car.php~~~
    <form action='carplan.php' method='GET or POST, whichever it is you be using using'>
        <input type='hidden' name='Date' value='<?php echo $_GET['date'] ?>'>
        <input type='hidden' name='some_other_thing' value='<?php echo $_GET['some_other_thing'] ?>'>
        <option name='plan_id'>
            <?php foreach($plans as $plan): ?>
                <select value='<?php echo $plan['id'] ?>'><?php echo $plan['name'] ?>'>
            <?php endforeach; ?>
        </option>
        <input type='submit' name='submit' value='Get That Plan'>
    </form> 
```

最后在 carplan.php

```
 ~~~carplan.php~~~
    <form action='the_next_step.php' method='GET or POST, whichever you be using'>
        <input type='hidden' name='Date' value='<?php echo $_GET['date'] ?>'>
        <input type='hidden' name='some_other_thing' value='<?php echo $_GET['some_other_thing'] ?>'>
        <input type='hidden' name='plan_id' value='<?php echo $_GET['plan_id']?>'>
        <input type='submit' name='submit' value='The next step!'>
    </form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:32:44.223

你可以通过..回应这个

```
echo  $_GET['Date']; 
```

**或者**

```
echo $_POST['Date']; 
```

**或者**

```
echo $_REQUEST['Date']; 
```

# android - 我需要做的大约 3 件事 openGL 2.0 难倒我

> ID：15911863
> 
> 赞同：-1
> 
> 时间：2013-04-09T20:29:08.763
> 
> 标签：android, opengl-es-2.0

我需要知道大约 3 件事才能开始使用 OpenGL 2.0 ES。

1.  如何设置 2d 的视口并从前到后排列我的纹理
2.  如何将纹理加载为 2d 图像。
3.  如何移动该图像（翻译它）。

三（编辑）：然而，我可以看到一个简单的着色器和顶点属性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:25:40.720

我建议您阅读[文档](http://developer.android.com/guide/topics/graphics/opengl.html)并查看 SDK 中随附的示例（从 SDK 管理器下载示例并搜索`StaticTriangleRenderer.java`）。

也就是说，虽然底层管道的知识对于任何严肃的事情都至关重要，但我建议你研究一下`libgdx`其他框架。`Libgdx`特别是使开发变得*非常*容易，并为您解决烦人的问题。您还可以获得（一些）跨平台兼容性，但我无法证明它的质量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-11T20:06:07.540

```
// setup and load the texture, PSEUDOCODE 
```

见这里：[2 纹理，1 着色器 - OpenGL ES 2.0](https://stackoverflow.com/questions/9053731/2-textures-1-shader-opengl-es-2-0)

```
// You could make a "flatter" view by setting nearVal and farVal to a small number
void glOrtho(   GLdouble    left,
    GLdouble    right,
    GLdouble    bottom,
    GLdouble    top,
    GLdouble    nearVal,
    GLdouble    farVal);

CGRect rect = view.bounds;     
glOrthof(-1.0,                                          // Left
      1.0,                                          // Right
     -1.0 / (rect.size.width / rect.size.height),   // Bottom
      1.0 / (rect.size.width / rect.size.height),   // Top
      0.01,                                         // Near
      0.05);                                        // Far

// Then set the viewport
glViewport(0, 0, rect.size.width, rect.size.height);

// To translate use this PSEUDOCODE
glTranslate( x, y, z); 
```

# ios - 使用未声明的标识符“ACAccountStore”

> ID：15911864
> 
> 赞同：5
> 
> 时间：2013-04-09T20:29:09.777
> 
> 标签：ios, acaccountstore

我正在尝试使用 ios 帐户框架。我已经在构建阶段添加了 Accounts.Framework，但仍然出现错误

```
Use of undeclared identifier "ACAccountStore" 
```

有谁知道为什么？Social.Framework 对我来说很好。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-09T20:35:44.390

你确定包括标题吗？

### Objective-C

```
#import <Accounts/Accounts.h> 
```

### 迅速

```
import Accounts 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T20:35:38.513

也许你忘了导入它？

```
#import <Accounts/Accounts.h> 
```

**编辑：**现在我知道它是在哪里声明的，所以更新了我的答案。:)

# java - 方法重复输出

> ID：15911869
> 
> 赞同：0
> 
> 时间：2013-04-09T20:29:32.430
> 
> 标签：java, performance, sling

sling 和 Java 很新，所以我提前道歉。但是有人知道为什么当我处于根目录时它会输出我的路径两次吗？奇怪的是它只发生在绝对根上。

```
public static String generateTest(Page page, Page rootPage, String bc) {

    Page parent = page.getParent();

    String bread = ""; 
    bread += (parent != null) ? "<li><a href=" + parent.getPath() + ">" + parent.getTitle() + "</a>" : "";
    bread += "<li>" + "<a href=" + page.getPath() + ">" + page.getTitle() + "</a></li>" + bc;
    return (ifAtRoot(parent , rootPage)) ? breadcrumb : generateTest(parent, rootPage, bread);

}

public static boolean ifAtRoot(Page page, Page root) {
    return (page == null || root.getPath() == page.getPath());
} 
```

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:41:34.290

首先，仅当is因为您无法使用 比较对象（包括字符串）时`ifAtRoot()`才会返回 true 。您应该改用：`page``null``==``.equals()`

```
public static boolean ifAtRoot(Page page, Page root) {
    return (page == null || root.getPath().equals(page.getPath()));
} 
```

在您的情况下，第一次调用`ifAtRoot()`returned `false`，所以您第二次调用它递归传递`brend`刚刚创建的。第二个调用`brend`再次创建并附加`bc`（包含先前创建的 brend）到它。对你的运气的第二次调用`ifAtRoot()`返回 true。否则，您将进入无限递归并以`StackOverflowError`.

# ruby-on-rails - ActiveSupport::TimeZone 偏移量字符串列表

> ID：15911873
> 
> 赞同：8
> 
> 时间：2013-04-09T20:29:38.683
> 
> 标签：ruby-on-rails, timezone, activesupport, railscasts

我关注了 Ryan Bate 的 railscast #106 [http://railscasts.com/episodes/106-time-zones-revised](http://railscasts.com/episodes/106-time-zones-revised)，它为 User 模型添加了一个 time_zone 字符串。该字符串来自下拉列表：

```
= f.time_zone_select :time_zone, ActiveSupport::TimeZone.us_zones 
```

我正在尝试查询共享公共时区偏移量的所有用户（这样我就可以在每天的特定时间向他们发送电子邮件）。

```
User.where(:time_zone => ['Guadalajara','Central America','Mexico City', 'Monterrey', 'Saskatchewan']) 
```

我无法获得特定偏移量的时区名称列表。我一直在修补 TzInfo 和 ActiveSupport::TimeZone.zones_map，但成功有限。我觉得 zone_map 应该能够满足我的需求，但是我无法从中获取我想要的数据（尽管我在那里看到了它！）。

我在这里采取了错误的方法吗？我在想我可以将 GMT 偏移量存储在用户身上，然后以这种方式查询？

我的 google-fu 让我失望了。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-09T21:49:44.133

我想通了——

```
tz_names = ActiveSupport::TimeZone.zones_map.values.collect{|z| z.name if z.utc_offset == offset}.compact 
```

# ios - 如何防止 iphone 的 jquery 移动应用程序在 ipad 中自动拉伸

> ID：15911874
> 
> 赞同：2
> 
> 时间：2013-04-09T20:29:41.610
> 
> 标签：ios, css, cordova, jquery-mobile

我在 jquery mobile 和 phonegap 中有一个为 iphone 设计的应用程序。它在 iphone 或 ipod 上运行良好。但是当我在 ipad 上打开它的那一刻，我猜它会在 ipad 中自行拉伸以实现流畅的布局。那么我该如何防止它，以便它像其他应用程序一样居中。**强文**！

[这是问题](http://i.stack.imgur.com/nvc8k.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-16T23:48:15.463

我坚信这个问题是由于您的 CSS 以及您调整元素大小的方式造成的。没有看到一些代码很难确定，但我的猜测是您正在使用百分比（即`.button{width:30%;}`）调整元素的大小，因此元素的大小相对于外部容器，这似乎是您设备屏幕的大小正在使用。如果是这种情况，

一种选择是将内部元素的所有百分比大小从百分比更改为像素。另一种选择是使用一个父 div 包装所有子元素，并使用像素将该父 div 的大小设置为某个静态大小，这将允许您保持子元素的所有百分比值相同。

# javascript - 如何在jquery中使用.on从外部函数中清除点击计数器？

> ID：15911879
> 
> 赞同：0
> 
> 时间：2013-04-09T20:29:51.757
> 
> 标签：javascript, jquery

我有一个带有 .on() 的函数，如下所示：

```
$('#gallery').on('click', '.gon', function() {   
    countn = ($(this).data("click_count") || 0) + 1;
    $(this).data("click_count", countn);
    // set up for first move
    if ( countn == 1 ) {
         do something........ 
```

countn 是计算点击次数的变量。现在我想从这个函数之外清除或重置“countn”，例如：

```
$('.teaserbox').click(function() {    
    countn = 0; 
    return false;       
}); 
```

这行不通。有没有办法从外部清除/重置第一个函数中的变量？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:37:58.870

计数值存储为单击对象上的数据，并且`countn`在重置函数中重置变量没有任何作用，因为之前未在该范围内定义 countn。

我不知道您是否有多个`.gon`元素`#gallery`，但如果有，您真的只能将它们全部重置。这样做是这样的

```
$('.teaserbox').click(function() {
    $('#gallery .gon').data('click_count', 0);
}); 
```

您当然可以在事件中使用`.teaserbox`（将`$(this)`在函数中）`find()`找到正确的`.gon`元素并仅重置该元素的计数。

另一方面，您忘记`var`了函数中的语句，这很重要，因为隐式声明变量会导致各种问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:34:25.107

变量 countn 应该可以从两个函数中访问。我把所有东西都放在一个匿名函数中，所以只有两个 click 事件处理程序才能访问该变量。

```
(function () {
 var countn=0;
 $('#gallery').on('click', '.gon', function() {
  // increment countn
 });
 $('.teaserbox').click(function() {
  // reset countn
 });
})(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:35:12.373

如果`countn`在两个函数之外声明，您应该能够做到。所以像：

```
$(document).ready(function() {

var count = 0;

$('#gallery').on('click', '.gon', function() {   
countn = ($(this).data("click_count") || 0) + 1;
$(this).data("click_count", countn);
// set up for first move
if ( countn == 1 ) {
do something........
}

$('.teaserbox').click(function() {    
countn = 0; 
return false;       
});
}); 
```

# jquery - 如何使用 JQuery 从关联数组中获取键/值

> ID：15911880
> 
> 赞同：0
> 
> 时间：2013-04-09T20:29:54.247
> 
> 标签：jquery, associative-array, kendo-asp.net-mvc

我正在为 Kendo DropDownList 设置一个关联数组。该对象返回 33 作为 val()。我想检索与 Id 33 关联的名称。如何为 ProjName 分配 Id=33 的名称键？

Kendo 控件的 HTML 输出：

```
<script type="text/javascript">
    MyJS.Project.Create.Initialize('[{"$id":"1","Id":32,"Name":"Test Project"},{"$id":"2","Id":33,"Name":"Simple Project"}]');
</script> 
```

剑道下拉列表：

```
<input id="lstProject" class="span8"  data-bind="kendoDropDownList:{data:Projects, value: Project, dataTextField: 'Name', dataValueField: 'Id',optionLabel: 'Select Project' }"/> 
```

将关联数组分配给变量：

```
<script type="text/javascript">
    var ProjName = $("#lstProject").val();
    alert(ProjName);
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:35:04.113

用这个 -

```
 $val = ('#lstProject').val();
 $name = $('[value="'+$val+'"]').attr('name'); 
```

# linux - 环境变量在哪里定义？

> ID：15911885
> 
> 赞同：0
> 
> 时间：2013-04-09T20:30:06.807
> 
> 标签：linux

Linux（Redhat）中是否有一种简单的方法可以找出在哪个脚本中定义了环境变量？例如，我想知道 LS_COLORS 在哪里定义。

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:34:52.433

放

```
set -x 
```

在您的顶部`.profile`（或者`.bash_profile`如果这是您使用的）。这将导致所有命令在执行时显示。您应该能够看到它分配的位置`LS_COLORS`，然后搜索最新的`source`或`.`命令以获取脚本名称。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-09T20:43:55.063

在命令提示符下键入：

```
set 
```

这将显示所有环境变量。如果你只想要**LS_COLORS**你可以输入：

```
echo "$LS_COLORS" 
```

正如 Barmar 所提到的，您可以在 .profile/.bash_profile 中永久设置这些变量，或者在您的终端中为该会话设置它们。

# c# - 与 CS0246 混淆：类型或命名空间名称 找不到

> ID：15911886
> 
> 赞同：1
> 
> 时间：2013-04-09T20:30:13.327
> 
> 标签：c#, asp.net, web-applications

我知道很多人都问过这个问题的不同版本，但我没有尝试过

我是使用 Visual Studio 2010 Web 开发人员的新手。但是有几个问题我无法解决。

我的第一个问题是 CS0246：找不到类型或命名空间名称

我已经输入了“使用我的命名空间名称。我还创建了一个 dll，因此我可以将其添加为参考，但没有任何运气。

```
using System.Web.UI;
using System.Web.UI.WebControls;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using GDIDAL;

public partial class _Default : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Button2_Click(object sender, EventArgs e)
    {
        DataSet ds;
        ds = GDIDAL.GDItest.Get_BraeburnRisk("GDI.PUB.Grower");

        DataTable myDataTable = ds.Tables[0];

        // foreach loop to get each DataRow of DataTable retrieved from DataSet   

        foreach (DataRow dRow in myDataTable.Rows)
        {
            for (int i = 0; i < myDataTable.Columns.Count; i++)
            {

                Response.Write(dRow[i] + ", ");
            }
            Response.Write("<br />");
        }
    }
} 
```

代码很简单，因为它是一个测试应用程序来证明我们可以让它工作。从我在网上看到的这应该可以解决问题。我还发现，如果我在 VS2010 Web Developer 中以调试模式运行代码，它就可以工作。该错误仅在我部署到 Web 服务器时发生。

我在尝试解决上述问题时发现的第二个错误是警告：以下程序集依赖于高于目标的 .NET Framework 版本，并且在运行时可能无法正确加载导致失败：GDIDAL，版本 = 1.0.0.0，文化=中性，PublicKeyToken=null。依赖项是：mscorlib、Version=4.0.0.0、Culture=neutral、PublicKeyToken=b77a5c561934e089。您应该确保依赖程序集对于目标框架是正确的，或者确保您正在处理的目标框架是依赖程序集的框架。

现在，从我所阅读的内容来看，如果针对.net 4.0，我创建的所有内容都可以修复这个错误，所以我非常不确定该去哪里。

# c++ - 在函数模板特化中覆盖返回类型

> ID：15911890
> 
> 赞同：52
> 
> 时间：2013-04-09T20:30:43.283
> 
> 标签：c++, templates

我想专门化一个函数模板，以便返回类型根据模板参数的类型而变化。

```
class ReturnTypeSpecialization
{
public:
    template<typename T>
    T Item();
};

// Normally just return the template type
template<typename T>
T ReturnTypeSpecialization::Item() { ... }

// When a float is specified, return an int
// This doesn't work:
template<float>
int ReturnTypeSpecialization::Item() { ... } 
```

这可能吗？我不能使用 C++11。

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-04-09T20:49:39.730

由于特化必须与返回类型上的基本模板一致，因此您可以通过添加“返回类型特征”来实现这一点，这是一个您可以特化并从中绘制真正返回类型的结构：

```
// in the normal case, just the identity
template<class T>
struct item_return{ typedef T type; };

template<class T>
typename item_return<T>::type item();

template<>
struct item_return<float>{ typedef int type; };
template<>
int item<float>(); 
```

[活生生的例子。](https://ideone.com/NSGksm)

请注意，您可能希望坚持以下内容，因此您只需要更新特化中的返回类型`item_return`。

```
template<>
item_return<float>::type foo<float>(){ ... }
// note: No `typename` needed, because `float` is not a dependent type 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-01-23T05:22:45.840

在工作人员类中完成所有特化，并使用一个简单的函数作为包装器，该包装器将被隐式特化。

```
#include <iostream>
using std::cout;

// worker class -- return a reference to the given value
template< typename V > struct worker
   {
   typedef V const & type;
   static type get( V const & v ) { return v; }
   };

// worker class specialization -- convert 'unsigned char' to 'int'
template<> struct worker<unsigned char>
   {
   typedef int type;
   static type get( unsigned char const & v ) { return v; }
   };

// mapper function
template< typename V > typename worker<V>::type mapper( V const & v )
   {
   return worker<V>::get(v);
   }

int main()
   {
   char a='A';
   unsigned char b='B';
   cout << "a=" << mapper(a) << ", b=" << mapper(b) << "\n";
   } 
```

在此示例中，特殊化`unsigned char`将其转换为 an`int`以便`cout`将其显示为数字而不是字符，生成以下输出...

```
a=A, b=66 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-04-09T20:46:48.203

也许您可以使用以下技巧。鉴于这些简单的类型特征：

```
template<bool b, typename T, typename U>
struct conditional { typedef T type; };

template<typename T, typename U>
struct conditional<false, T, U> { typedef U type; };

template<typename T, typename U>
struct is_same { static const bool value = false; };

template<typename T>
struct is_same<T, T> { static const bool value = true; }; 
```

您可以编写您的类和专门的成员函数，如下所示：

```
class ReturnTypeSpecialization
{
public:
    template<typename T>
    typename conditional<is_same<T, float>::value, int, T>::type 
    Item();
};

// Normally just return the template type
template<typename T>
typename conditional<is_same<T, float>::value, int, T>::type
ReturnTypeSpecialization::Item() { return T(); }

// When a float is specified, return an int
template<>
int ReturnTypeSpecialization::Item<float>() { return 1.0f; } 
```

简单的测试程序（仅使用 C++11 进行验证）：

```
int main()
{
    ReturnTypeSpecialization obj;
    static_assert(std::is_same<decltype(obj.Item<bool>()), bool>::value, "!");
    static_assert(std::is_same<decltype(obj.Item<float>()), int>::value, "!");
} 
```

这是一个[活生生的例子](http://liveworkspace.org/code/1VtHEF%2429)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-04-09T20:33:07.503

您可以像这样进行模板专业化：

```
template<typename T>
T item() {
    return T();
}

template<>
float item<float>() {
    return 1.0f;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-03-02T13:13:48.160

嗨，我尝试使用模板专业化来返回原语的参数值以及 std::string 数据，同时这样做我得到了很多未解决的外部重新定义类型的错误。所以如果有人遇到这样的情况，当他/她想要返回不同的数据类型（包括字符串）时，他/她可以使用类似下面的东西， **注意**：模板函数必须是头文件（*.h）的一部分......所以我们在这里使用模板专业化字符串数据类型...在类内部作为内联成员我们必须使用模板专业化方法，并且在同一个文件中我们也可以定义模板。

```
class ConfigFileParser
{
public:
    bool ParseConfigFile(const std::string& file_name);
    template <typename T>
    T GetParameterValue(const std::string key);
    template <>
    std::string GetParameterValue<std::string>(const std::string key)
    {
        std::string param_val = "";
        //do logical operation here... 
        return param_val;
    }
private:
    // private functions...

    // private data...
};

template <typename T>
T ConfigFileParser::GetParameterValue(const std::string key)
{
    T param_val = 0;
    std::stringstream ss;
    std::string val_str;
    // do some operation here...
    ss << val_str.c_str();
    ss >> param_val;

    return param_val;
} 
```

# python - 如何从命令行使用 pythonbrew venv 运行 python 脚本？

> ID：15911893
> 
> 赞同：3
> 
> 时间：2013-04-09T20:30:51.300
> 
> 标签：python, virtualenv, pythonbrew

我最近在工作地点的一个 cron 脚本中遇到了这个问题：

`/bin/bash -c "[[ -s $HOME/.pythonbrew/etc/bashrc ]] && source $HOME/.pythonbrew/etc/bashrc && pythonbrew use 2.6.7 && pythonbrew venv use someapp && python /opt/someapp/bin/someapp.py"`

这适用于 Pythonbrew 的系统范围（多用户）安装。

有用。但请告诉我有更好的方法。

### 附录

为了澄清我在寻找什么：我想要一个通过与 pythonbrew 绑定的 virtualenv 来运行我的脚本的单行命令。单独使用 virtualenv，我可以做这样的事情：

```
/opt/someapp/venv/bin/python /opt/someapp/bin/someapp.py 
```

我不想要的是另一个脚本来运行我的脚本（就像上面的那个 cron 命令）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-16T18:02:07.183

我相信可以通过直接从您的`pythonbrew`虚拟环境中使用 python 二进制文件来完成。默认情况下它在`~/.pythonbrew/venvs/Python-<version>/<name of venv>/bin/python` 但我认为您可以使用环境变量更改路径。

因此，只需更改您添加的行的前半部分以引用`pythonbrew`虚拟环境 python 二进制文件，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-16T20:53:32.640

在你的 python 脚本的第一行添加一个 shebang (#!)，然后是你的目标 python 的路径。然后使python脚本可执行。然后可以直接从命令行（crontab、另一个 bash 脚本等）执行它。

在您的临时目录中创建一个虚拟环境：

```
$ cd /tmp
$ virtualenv venv 
```

在那个venv中你的python的路径是/tmp/venv/bin/python

使用编辑器创建一个包含以下所有内容的简单脚本：

```
#!/tmp/venv/bin/python
print("hello world") 
```

将其保存在您的主目录中为“mypyscript.py”

使其可执行：

```
$ chmod 755 mypyscript.py 
```

现在您应该能够直接在命令行上使用文件名执行它：

```
$ ./mypyscript.py
hello world 
```

对您的 someapp.py 执行此操作，将相关路径替换为您的 python，这应该可以工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-22T18:46:27.813

原来的诀窍是找到 pythonbrew virtualenv 的 python 二进制文件。[马克的回答](https://stackoverflow.com/a/16594390/1093087)为我指明了正确的方向。但这里有一个完整的纲要供将来参考：

安装了[pythonbrew 后](https://github.com/utahta/pythonbrew)，我执行了以下操作（如`root`在服务器上）：

```
pythonbrew install 2.6.6
pythonbrew switch 2.6.6
pythonbrew venv create --no-site-packages myapp 
```

我有一个 pip freeze 文件，所以我使用它设置了我的 virtualenv：

```
/usr/local/pythonbrew/venvs/Python-2.6.6/myapp/bin/pip install -r /tmp/requirements.pip 
```

现在我的 python 二进制文件可以在`/usr/local/pythonbrew/venvs/Python-2.6.6/myapp/bin/python`. 所以要运行我的脚本：

```
/usr/local/pythonbrew/venvs/Python-2.6.6/myapp/bin/python /opt/myapp/bin/myapp.py 
```

# pdf - 使用 PDFClown 将 tiff 转换为 PDF

> ID：15911902
> 
> 赞同：0
> 
> 时间：2013-04-09T20:31:08.677
> 
> 标签：pdf, pdf-conversion

是否可以使用 pdfclown 将 tiff 文件转换为 PDF 文件？

我已经使用 PDFClown 开始了一个项目，但我很害怕我被卡住了（也许我现在必须切换到 IText ......）

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-30T05:57:32.467

不，不是。[如其功能](http://www.stefanochizzolini.it/en/projects/clown/features.html "PDFClown - 功能")页面所述，PDFClown 仅支持 JPEG 图像。

# sql - Visual Studio 中的 SQL 数据库

> ID：15911905
> 
> 赞同：1
> 
> 时间：2013-04-09T20:31:17.437
> 
> 标签：sql, sql-server, visual-studio-2010, sql-server-express

如果这是一个简单的问题，我对使用 SQL 很抱歉。我有一个正在编写的程序，它可以生成并填充数据库。我想看看生成了什么，所以我试图在 VS 中打开数据库。

我可以转到服务器资源管理器并单击“连接到数据库”，这使我能够浏览到 .mdf 文件。当我这样做时，它会打开，我可以看到表定义等。到目前为止一切都很好。

但是，如果我回到我的程序并按下我创建的“清除表格”按钮，它说它运行良好，但我的 VS 视图中没有任何变化。我知道它确实清除了表，因为当我重新运行“构建数据库”命令时，它会查找每个表但没有找到它（因此它创建了它）。

然而，正如我在 IDE 中所说的那样，我看到了原始数据库，没有任何内容被清除或重新创建。我试过右键单击并点击数据库上的“刷新”，断开连接并重新连接，但似乎没有任何效果。

我在这里想念什么？

# wpf - 带有绑定属性的插入符号文本框的解决方法已更改 XAML

> ID：15911906
> 
> 赞同：0
> 
> 时间：2013-04-09T20:31:17.610
> 
> 标签：wpf, xaml

我有很多文本框以双向模式绑定到不同的属性，UpdateSourceTrigger=PropertyChanged 我有一个烦人的问题：当我输入或删除一个值时 - 插入符号移动到字符串的开头。我在这里找到了一个解决方案： [TextBox with CurrencyFormat and PropertyChanged trigger doesn't accept text right](https://stackoverflow.com/questions/9910681/textbox-with-currencyformat-and-propertychanged-trigger-doesnt-accept-text-righ)

但我无法正确实施。我可能想念一些东西。

这是我对其中一个文本框的 XAML 绑定：

```
enter code here <TextBox x:Name="TextBoxFirstPersonCameraMinPosY" Width="150" VerticalAlignment="Center" FontWeight="Normal"
                                 Text="{Binding Path=CameraLimitationParameters.FirstPersonCameraPosition.MinValue.Y, Mode=TwoWay, IsAsync=True, Delay=0, UpdateSourceTrigger=PropertyChanged, Converter={StaticResource ToStringConverter}}" Style="{StaticResource {x:Type TextBox}}"
                                         MaxLength="40" Margin="10,0,0,0" MinWidth="150" HorizontalScrollBarVisibility="Auto" VerticalScrollBarVisibility="Disabled" MaxWidth="150"></TextBox> 
```

这是我的风格：

```
enter code here<Page.Resources >
    <ObjectDataProvider x:Key="CameraMode"
        MethodName="GetValues" ObjectType="{x:Type sys:Enum}" >
        <ObjectDataProvider.MethodParameters>
            <x:Type TypeName="settingsManager:CameraBehavior"/>
        </ObjectDataProvider.MethodParameters>
    </ObjectDataProvider>
    <settingsManager:ToStringConverter x:Key="ToStringConverter"></settingsManager:ToStringConverter>
    <Style TargetType="{x:Type TextBox}">
        <Style.Triggers>
            <Trigger Property="IsKeyboardFocusWithin"  Value="True">
                <Setter Property="Text" Value="{Binding UpdateSourceTrigger=PropertyChanged}"></Setter>
            </Trigger>
        </Style.Triggers>
    </Style>
</Page.Resources> 
```

我错过了如何在不复制代码的情况下独立于绑定属性将这种样式应用于所有文本框？这种解决方法是否适用于我的情况？请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-17T17:55:23.057

问题是因为我在 TextBox 中设置了 IsAsync=True。在这种情况下，需要将 Async 设置为 false。

# maven - 如何让 Maven 在 $PATH 中看到二进制文件？

> ID：15911907
> 
> 赞同：1
> 
> 时间：2013-04-09T20:31:35.757
> 
> 标签：maven, mercurial, maven-2, jenkins, buildnumber-maven-plugin

我正在尝试添加`buildnumber`maven 插件以包含`hgchangeset`来自 mercurial 的插件。在终端中运行时，这对我很有用（我在 Mac OSX 上）。

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>buildnumber-maven-plugin</artifactId>
    <version>1.2</version>
    <executions>
      <execution>
        <phase>validate</phase>
        <goals>
          <goal>create</goal>
          <goal>hgchangeset</goal>  // The specific goal I'm interested in
          <goal>create-timestamp</goal>
        </goals>
      </execution>
    </executions>
    <configuration>
      <doCheck>false</doCheck>
      <doUpdate>false</doUpdate>
      <revisionOnScmFailure>true</revisionOnScmFailure>
      <!-- format of the property 'buildNumber' -->
      <format>{0,date,MMdd-HHmm}</format>
      <items>
        <item>timestamp</item>
      </items>
    </configuration>
  </plugin>
</plugins> 
```

但是，在 Eclipse 和 Jenkins 中运行时，出现此错误：

```
[INFO] EXECUTING: /bin/sh -c cd /Users/Shared/Jenkins/Home/jobs/proj/workspace && hg id -i
[ERROR] 
EXECUTION FAILED
  Execution of cmd : id failed with exit code: 127.
  Working directory was: 
    /Users/Shared/Jenkins/Home/jobs/proj/workspace
  Your Hg installation seems to be valid and complete.
    Hg version: NA (OK) 
```

以用户“jenkins”身份登录到该服务器，我可以执行：`hg id -i`很好，我看到了正确的输出，因为`hg`二进制文件在我`$PATH`的服务器上，并且在控制台中被识别。

同样，Eclipse 提供相同的输出。我想这是因为在终端中，maven 构建可以看到我的`hg`二进制文件，`/usr/local/bin`但 Eclipse 和 Jenkins 不能。

有什么办法可以告诉 Maven`hg`在那个位置使用吗？我不在乎它是否必须被硬编码，因为我们所有计算机上的二进制位置都是相同的。

提前致谢

echo $PATH /usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:/usr/X11/bin:/usr/local/git/bin

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T00:35:09.300

查看 的代码`buildnumber-maven-plugin`，似乎无法为`hg`可执行文件提供前缀，或覆盖已构建的实际命令行。

因此，我建议修改 Jenkins 构建代理配置，以便调整`PATH`用于定位的`hg`. 您可以按照[Jenkins Distributed Builds setup](https://wiki.jenkins-ci.org/display/JENKINS/Distributed+builds)中的说明执行此操作- 通常（取决于您的构建从站的设置方式），您有几个选项：

*   修改`launch-slave`shell脚本
*   `.profile`为运行构建从属的用户修改（或等效）
*   修改 Jenkins UI 中的代理配置，允许将环境变量传递给构建代理

其中任何一个都应该允许您调整`PATH`构建代理使用的内容。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-07T14:18:09.037

我在 eclipse 和 maven 中遇到了同样的问题 - 虽然我的终端报告了一个`$PATH`包含二进制文件的路径，但 eclipse 中的 maven-plugin 没有找到它。

我很快就意识到了问题：Eclipse 是从 UI 而不是终端启动的，所以它没有从终端继承环境变量，其中包括`$PATH`. 这可以通过从终端启动eclipse来快速测试

```
$./eclipse 
```

现在，这个 Eclipse 实例中的 maven 能够找到二进制文件。

为了在从 UI 启动时获取 eclipse 的路径，您还需要将路径添加`/etc/paths`到

# c++ - 调试高内存使用情况

> ID：15911911
> 
> 赞同：0
> 
> 时间：2013-04-09T20:31:43.117
> 
> 标签：c++, visual-studio-2010, visual-studio

有什么好的工具/技术可以发现代码的哪些区域正在使用大量内存？我已经看到类似的关于 linux 的问题提到了 valgrind，但没有一个针对使用 Visual Studio 2010 开发的 Windows 应用程序的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:54:53.370

如果您使用分配分析器，还有[AQTime](http://smartbear.com/products/qa-tools/application-performance-profiling)可以为您提供已分配对象的列表和创建每个对象的位置的调用堆栈。

其他选项包括使用代码对象的实例计数器手动检测代码。不理想，但它可能很有用，特别是如果分析工具无法运行您的应用程序（例如，由于内存不足或仪器故障等）。

这些工具通常不会以非常明显的方式显示内存碎片 - 如果您有大量大对象和大量小对象以不同的顺序频繁分配和释放，则很容易发生这种情况。如果可能的话，对其中一些对象使用池是值得的，并且在某些情况下它会对内存使用和性能产生巨大影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T10:19:54.963

VS2010 附带的 Microsoft CRT 对内置的泄漏检测具有强大的支持。在 crtdbg.h 标头中可用，在此[MSDN 库文章](http://msdn.microsoft.com/en-US/library/vstudio/x98tx3cf%28v=vs.100%29.aspx)中对其进行了很好的描述。

如果这太难了，那么 Windows 调试工具包可能会非常有用。UMHD [（用户模式堆调试器）实用程序](http://support.microsoft.com/kb/268343)可以在不更改程序的情况下报告泄漏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-10T09:45:31.950

性能向导允许非常详细地查看资源利用率，并可以突出显示导致高内存负载的单行代码。要启动向导，请单击 Visual Studio 的分析菜单，然后单击启动性能向导。运行完整考试可能需要高级版本或更高版本。

# c - 使用 isalpha() 在文件中跳过一行

> ID：15911913
> 
> 赞同：0
> 
> 时间：2013-04-09T20:31:49.020
> 
> 标签：c, ctype

我正在使用 isalpha() 来确定行上是否有字符，它显示行“90 1 0”包含字母字符。

这是相关代码

```
bool digitTest(char *test, int arysize)
{
int i;
for (i =0; i<arysize; i++)
{
    if ((isalpha(test[i])) != 0){

        return 0;
    }

    if (i==arysize)
        return 1;
            i++;
}
return 1;
} 
```

这里被称为

```
char buffer[4096] = {};

while(NULL!=fgets(buffer, sizeof(buffer), fp)){
    if (digitTest(buffer, 4096) == 0){

        printf ("contains alpha\n");
        continue;
    /*printing code if there is no alphabetic characters below, i do not believe it is  relevant*/ 
```

这是输出

```
1
1
1
contains alpha 
contains alpha
contains alpha 
25123.90
54321.23
6 
```

并输入

```
1
1
1
89 23.5 not a number
90 1 0
-5.25 not a number 10000
25123.90 54321.23 6 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T20:37:46.210

代码有几个问题：

*   您不应该检查所有缓冲区。检查缓冲区直到`\0`。因为 的输出`fgets`是 C 风格的字符串。

*   第二个问题是额外`i++`的功能`digitTest`。你应该删除它。

*   你不再需要`arysize`了。

请改用此`digitTest`功能

```
int digitTest(char *test)
{
  int i;
  for (i=0; test[i] && test[i] != '\n'; i++)
  {
     if (isalpha(test[i]) != 0)
        return 0;
  }
  return 1;
} 
```

*（可能有小错误，我没有测试过）*

并这样称呼它：

```
while( fgets(buffer, sizeof(buffer), fp) ) {
    if (!digitTest(buffer)) {
        printf ("contains alpha\n");
        continue;
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T20:39:05.573

看起来您可能正在访问内存中包含字符的位置，请将您的代码更改为

```
char buffer[4096] = {};
memset(buffer, 0, 4096);

while(NULL!=fgets(buffer, sizeof(buffer), fp)){
if (digitTest(buffer, strlen(buffer)) == 0){ //get actual length of buffer

    printf ("contains alpha\n");
    continue; 
```

**编辑**

为了使您的代码不响应`\n`或`\r`不响应

```
bool digitTest(char *test, int arysize)
{
int i;
for (i =0; i<arysize; i++)
{
    if( test[i] == '\r' || test[i] == '\n')
        return 1;
    if ((isalpha(test[i])) != 0){

        return 0;
    }

    if (i==arysize)
        return 1;

}
return 1;
} 
```

# java - 关系存储和多维数据集检查/反射

> ID：15911919
> 
> 赞同：2
> 
> 时间：2013-04-09T20:32:06.637
> 
> 标签：java, schema, activepivot

关系存储和多维数据集通过各种可用的 XML 配置文件在 ActivePivot 中定义，例如 Formats.csv、LoadInstructions.csv、WhatverCube.xml 和 SchemaFields.xml。这些文件中指定的配置信息是否可以在解析加载后通过ActivePivot API访问，还是我们必须自己解析、加载和检查这些文件才能知道当前活动关系存储中定义的表、字段、维度和度量和立方体？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T08:01:34.583

您的 ActivePivot 实例（以及模式）的完整和详细定义可以在运行时从 ActivePivot 管理器中检索：

```
IManagerDescription IActivePivotManager.getDescription();
List<ISchemaInstanceDescription> IManagerDescription.getSchemas();
ISchemaDescription ISchemaInstanceDescription.getSchemaDescription();
List<IActivePivotInstanceDescription> getActivePivotInstanceDescriptions();
IActivePivotDescription IActivePivotInstanceDescription.getActivePivotDescription();
... 
```

这些定义也通过管理服务公开，在 Java 中或作为 Web 服务可用：

```
IManagerDescription IAdministrationService.retrieveManagerDescription(); 
```

有关更多详细信息，请查看在线 javadoc ( [http://support.quartetfs.com/documentation/javadoc/](http://support.quartetfs.com/documentation/javadoc/) )

您还可以使用 java API 检索有关关系存储的信息。您通过商店世界访问商店：

```
IRelationalStore IStoreUniverse.get("MyStore");
Map<String,IField> IRelationalStore.getFields();
String[] IRelationalStore.getKeyFields();
Map<String,IRelationalJoin> IRelationalStore.getJoins();
... 
```

# arrays - 数组小写

> ID：15911921
> 
> 赞同：1
> 
> 时间：2013-04-09T20:32:12.980
> 
> 标签：arrays, perl

我是 Perl 的新手，遇到了一个小问题。我正在尝试从数组中选择一个值以使其小写。

例如

```
my @letters = qw(A B C D E F F A S D F E S F); 
```

现在我想选择字母 F 并将其设为小写，我该怎么做呢？请记住，我的数组非常大，它应该能够接受用户所做的任何更改。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:38:49.497

```
for my $c (@letters) {$c = lc($c) if $c eq"F"} 
```

我绝对不知道你所说的*挑选*和*制作*是什么意思。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T21:20:38.110

这是我的方法：

```
my @letters = qw(A B C D E F F A S D F E S F);
@letters = map { tr/F/f/; $_ } @letters; 
```

**更新**：正如@TLP 评论的那样，这是一种更简单的方法：

```
my @letters = qw(A B C D E F F A S D F E S F);
tr/F/f/ for @letters; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T21:13:22.770

简短的就地修改是

```
my @letters = qw(A B C D E F F A S D F E S F);
map {s/(F)/\l$1/;} @letters;
print "@letters"; 
```

输出：

```
 A B C D E f f A S D f E S f 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-09T22:46:19.477

除非您想保留原始列表

```
tr/F/f/ for @letters 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-09T20:46:58.210

如果您已经知道数组中的位置，您可以`$array[5] = lc($array[5])`：如果你不这样做，有几种方法。其中之一使用 C 风格的循环：

```
for (my $i=0; $i < @array; $i++) {
  $array[$i] = lc($array[$i]) if $array[$i] eq 'F';
} 
```

另一个是地图：

```
map {$_ = lc if $_ eq 'F'} @array; 
```

# iphone - 哪个是我可以测试我的 ios 应用程序的最便宜的设备？

> ID：15911922
> 
> 赞同：-1
> 
> 时间：2013-04-09T20:32:20.443
> 
> 标签：iphone, ios, ipad, ipod, ipod-touch

嗨，我没有足够的钱在每台设备上单独测试我的 ios 应用程序，所以请推荐我低成本的苹果设备，我可以在其上测试我的应用程序，一旦我赚到足够的钱，我就可以购买更多设备。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:41:46.867

iPod Touch 第 4 代是您的选择。它相当便宜，有摄像头/前置摄像头，视网膜显示屏，并且支持最新的 SDK

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:34:27.900

您可以在 iPhone 模拟器中测试 iOS 应用程序，该模拟器是免费的并与 xcode 捆绑在一起。

查看 iPod touch 以了解实际的硬件设备。老一代很便宜，但可能没有相同/任何相机或视网膜显示器。

# java - BigClip 无法播放 .wav 文件

> ID：15911925
> 
> 赞同：0
> 
> 时间：2013-04-09T20:32:25.950
> 
> 标签：java, audio, javasound, audio-player

我正在尝试将音频播放器添加到我的应用程序中。这是处理音频播放的类中的代码：

```
package me.pogostick29.audiorpg.audio;

import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.util.ArrayList;

import javax.sound.sampled.AudioFormat;
import javax.sound.sampled.AudioInputStream;
import javax.sound.sampled.AudioSystem;
import javax.sound.sampled.DataLine;
import javax.sound.sampled.LineUnavailableException;
import javax.sound.sampled.SourceDataLine;
import javax.sound.sampled.TargetDataLine;

public class AudioPlayer {

    private AudioPlayer() { }

    private static AudioPlayer instance = new AudioPlayer();

    public static AudioPlayer getInstance() {
        return instance;
    }

    private static ArrayList<BigClip> clips = new ArrayList<BigClip>();

    private BigClip get(String name) {
        for (BigClip clip : clips) {
            if (clip.getName().equalsIgnoreCase(name)) return clip;
        }
        return null;
    }

    public void play(File file) {
        try {
            AudioInputStream audioIn = AudioSystem.getAudioInputStream(file);
            BigClip clip = get(file.getName());
            if (clip == null) {
                BigClip newClip = new BigClip(file.getName());
                clips.add(newClip);
                clip = newClip;
            }
            clip.open(audioIn);
            clip.start();
        }
        catch (Exception e) { e.printStackTrace(); }
    }
} 
```

但是，当我尝试使用以下命令运行它时：

```
AudioPlayer.getInstance().play(new File("audio/people/blacksmith/blacksmith01a_new.wav")); 
```

我得到以下堆栈跟踪：

```
javax.sound.sampled.UnsupportedAudioFileException: could not get audio input stream from input file
    at javax.sound.sampled.AudioSystem.getAudioInputStream(AudioSystem.java:1170)
    at me.pogostick29.audiorpg.audio.AudioPlayer.play(AudioPlayer.java:38)
    at me.pogostick29.audiorpg.person.people.Blacksmith.playDialogue(Blacksmith.java:12)
    at me.pogostick29.audiorpg.AudioRPG.main(AudioRPG.java:33) 
```

[这](http://icap.me/i/AkRHDOFsCW.png)是我在使用 Audition 导出文件时使用的格式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-10T20:50:08.213

没关系，我使用这个库修复了它：[http ://www.javazoom.net/javalayer/javalayer.html](http://www.javazoom.net/javalayer/javalayer.html)

# windows-phone-8 - 我需要知道用户空闲了多长时间

> ID：15911930
> 
> 赞同：1
> 
> 时间：2013-04-09T20:32:37.730
> 
> 标签：windows-phone-8

我目前正在对象`LayoutUpdated`的`RootVisual`成员上使用`Application`，但这并没有完全捕捉到所有内容（例如，它没有捕捉到 之间的`Panorama`控制切换`PanoramaItems`，也没有捕捉到对 的点击`ApplicationBar`）。

是否有其他方法可以查询操作系统以了解自用户上次与设备交互以来已经过了多长时间？

# c# - 在统一 c# 中生成随机 10？

> ID：15911933
> 
> 赞同：-2
> 
> 时间：2013-04-09T20:32:42.280
> 
> 标签：c#, unity3d

音频剪辑无效。那么如何使用声音元素正确填充数组呢？

请帮我下面的代码：

```
using UnityEngine; 
using System.Collections; 

public class Audio_RanGen: MonoBehaviour {
    public AudioClip[] sounds;

    // Use this for initialization 
    void Start() {
        sounds=new AudioClip[5];
        // you would need to create/assign for your audio clip here 
    }

    // Update is called once per frame 
    void Update() {
    }

    void OnGUI() {
        if(GUI.Button(new Rect(100, 200, 200, 50), "Random Number Genaration")) {
            audio.clip=sounds[Random.Range(0, 4)];
            print(audio.clip);
            audio.Play();
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:46:49.203

You must use Random.Range function. Here is the link to the manual.

[http://docs.unity3d.com/Documentation/ScriptReference/Random.Range.html](http://docs.unity3d.com/Documentation/ScriptReference/Random.Range.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T22:44:33.497

在 Unity3D 中，如果您从编辑器中进行分配，则不需要分配公共数组（它是在组件初始化时从 Unity3D 分配的）。所以删除以下行：

```
sounds = new AudioClip[5]; 
```

并从编辑器中分配`AudioClip`s。如果您现在想播放随机音频文件，我建议使用以下行：

```
audio.clip = sounds[Random.Range(0, sounds.Length * 7) % sounds.Length]; 
```

与仅使用数组的初始长度相比，这会产生更好的随机种子，并且每次更新数组数据时都不得更改代码。

如果您不经常使用 Unity3D，我建议您阅读一些教程。尤其是[这个](http://docs.unity3d.com/Documentation/Manual/UsingTheInspector.html)。

如果您不想`AudioClip`通过代码创建项目：有几种方法可以做到这一点，[使用 google](https://www.google.de/search?q=unity3d%20load%20audio%20clip&aq=0&oq=unity3d%20load%20au&aqs=chrome.1.57j0l3j62.3699j0&sourceid=chrome&ie=UTF-8)时可以找到最多的方法。但是你需要默认分配声音数组。

# c# - 将继承的类转换为自定义类

> ID：15911939
> 
> 赞同：0
> 
> 时间：2013-04-09T20:32:53.803
> 
> 标签：c#, linq, class, inheritance, type-conversion

我有一个自定义`Deck`类，它继承了一个带有自定义类的 List `Card`。

代码`Deck`：

```
public class Deck : List<Card>
        {
            public void DrawCard(Deck d)
            {
                d.Add(this[0]);
                this.RemoveAt(0);
            }
            public Deck(bool deckHasCards)
            {
                if (deckHasCards)
                {
                    for (int i = 1; i <= 13; i++)
                    {
                        this.Add(new Card(i, Card.Suit.CLUBS));
                        this.Add(new Card(i, Card.Suit.DIAMONDS));
                        this.Add(new Card(i, Card.Suit.HEARTS));
                        this.Add(new Card(i, Card.Suit.SPADES));
                    }
                }
            }
            public void Shuffle()
            {
                Random rng = new Random();
                int n = this.Count;
                while (n > 1)
                {
                    n--;
                    int k = rng.Next(n + 1);
                    Card value = this[k];
                    this[k] = this[n];
                    this[n] = value;
                }
            }
        } 
```

和`Card`：

```
public class Card
    {
        public Suit s { get; set; }
        public int num { get; set; }
        public enum Suit
        {
            HEARTS,
            DIAMONDS,
            CLUBS,
            SPADES
        }
        public Card(int number, Suit suit)
        {
            num = number;
            s = suit;
        }

        public override String ToString()
        {
            return num + " of " + s.ToString().ToLower();
        }
    } 
```

一切都很好，但如果我想对一个`Deck`对象执行任何 LINQ 操作，我无法将它转换回`Deck`. 有没有（正确的）方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:00:00.287

您可以将新的构造函数添加到`Deck`：

```
public Deck(bool deckHasCards, IEnumerable<Card> cards)
{
    foreach (Card c in cards)
        this.Add(c);
} 
```

并使用这样的行：

```
var deck = new Deck(deckHasCards: true, cards: deck.Where(card => card.num == 2)); 
```

# security - JSF（Java Server Faces）页面是沙盒的吗？

> ID：15911941
> 
> 赞同：4
> 
> 时间：2013-04-09T20:32:54.440
> 
> 标签：security, jsf

我们让我们的用户将 html 上传到我们的服务器。我们需要一种模板语言，以便用户可以在渲染输出中插入变量、迭代列表等。我们目前使用 JSF 作为我们的模板语言。

如果我们让用户上传带有 JSF 标签的 xhtml，他们有什么不好的地方吗？或者他们是沙盒的？

我们故意避免使用 JSP，因为我们不希望用户在可以在服务器上运行的页面中插入恶意 Java 代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T22:02:17.480

从安全意义上讲，JSF 页面*不是沙盒化的。*有范围限制，但这并不是一回事（有些重叠，但它们有不同的目标）。您可能不应该允许上传 JSF 代码，但无论如何您可能会尽可能地筛选/清理输入。如果可能，请使用安全操作白名单。黑名单几乎总是很容易逃脱，因为枚举可能的邪恶值是不可能的。小心，完成后对您的网站进行专业的渗透测试，以确保您没有遗漏任何明显的东西。

# c# - 选择逗号分隔字符串字段包含字符串列表中的值的位置

> ID：15911942
> 
> 赞同：0
> 
> 时间：2013-04-09T20:32:56.317
> 
> 标签：c#, sql, linq, linq-to-sql

表**B**有一个名为“标记”的字段。它是一串以逗号分隔的数字，例如

```
454545,324512,234,345234 
```

**idList**是一个长数字列表。

我想获取**B**中所有项目的（列表） ，它们的“标记”字段中的一个数字包含在 idLIST 中。

试：

```
context.B.Where(b => b.tagged.Split(',').ToList().Any(t => idList.ConvertAll<string>(f => f.ToString()).Contains(t))).ToList(); 
```

给我一个例外：

```
System.String[] Split(Char[])' has no supported translation to SQL 
```

:(

（请注意，我知道我可以在查询之外预先将长列表转换为字符串列表，但这与问题无关：））。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T21:13:33.583

您可以使用`SqlMethods.Like`，但最好为 id 添加表。

# arrays - 未排序数组的二分查找时间复杂度

> ID：15911943
> 
> 赞同：14
> 
> 时间：2013-04-09T20:33:03.843
> 
> 标签：arrays, sorting, binary-search

我被两个时间复杂性所困扰。使用排序数组进行二进制搜索是 O(logN)。所以要搜索一个未排序的数组，我们必须首先对其进行排序，使其变为 O(NlogN)。因此，我们可以执行二进制搜索，其复杂度为 O(N)，但我读过它可能是 O(NlogN)。哪个是对的？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-04-09T21:31:55.380

二进制搜索适用于“排序”列表。复杂度为 O(logn)。

二进制搜索不适用于“未排序”列表。对于这些列表，只需从第一个元素开始进行直接搜索；这给出了 O(n) 的复杂度。如果您要使用 MergeSort 或任何其他 O(nlogn) 算法对数组进行排序，那么复杂度将为 O(nlogn)。

O(logn) < O(n) < O(nlogn)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-12-02T18:19:03.963

你的问题的答案就在你的问题本身。

您首先对列表进行排序。如果您使用快速排序或合并排序对列表进行排序，复杂度将变为`o(n*log n)`. 第 1 部分结束。

执行二进制搜索的第二部分是在“排序列表”上完成的。二分查找的复杂度为`o(log n)`. 因此最终程序的复杂性仍然存在`o(n*log n)`。

但是，如果您希望计算数组的中位数，则不必对列表进行排序。线性或顺序搜索的简单应用程序可以帮助您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-19T06:37:31.180

线性搜索的时间复杂度是`O(n)`，二分搜索的时间复杂度是`O(log n)`(log base-2)。如果我们有一个未排序的数组并且想要对此使用二进制搜索，我们必须首先对数组进行排序。在这里我们必须花时间`O(n logn)`对数组进行排序，然后花时间搜索元素。

# php - 试图从ajax返回php数据

> ID：15911946
> 
> 赞同：0
> 
> 时间：2013-04-09T20:33:11.053
> 
> 标签：php, javascript, ajax, google-maps, google-maps-api-3

我对 Ajax 有点陌生，我一直在尝试找出我做错了什么。我从数据库中提取结果并放入 xml。当我通过 xml 循环时，我正在尝试执行一个 php 文件，同时将 xml 结果中的 ID 号发送给它，然后从 php 文件中返回“echo”。我不确定我是完全关闭还是只是缺少一部分，但结果返回“未定义”。

这是我试图回显并显示出来的 php 文件。

```
echo rating_bar($id);

function rating_bar($id) {

    //other code, but $static_rater is what gets echoed

    $static_rater = "";
    $static_rater .= '<div id="ratingblock" class="ratingblock">';
    $static_rater .= '<div id="unit_long'.$id.'">';
    $static_rater .= '<ul id="unit_ul'.$id.'" class="unit-rating" style="width:'.$rating_unitwidth*$units.'px;">';
    $static_rater .= '<li class="current-rating" style="width:'.$rating_width.'px;"></li>';
    $static_rater .= '</ul>';
    $static_rater .= '<p class="static">Rating: <strong> '.$rating1.'</strong>/'.$units.' ('.$count.' '.$tense.' cast)</p>';
    $static_rater .= '</div>';
    $static_rater .= '</div>';

    //return join("\n", $static_rater);
    echo $static_rater;exit;
} 
```

这是我试图返回结果的 .js 代码。

```
downloadUrl("phpsqlajax_genxml.php", function(data) {
    var xml = data.responseXML; 
    var bounds = new google.maps.LatLngBounds();
    var markers = xml.documentElement.getElementsByTagName("marker"); 
    // alert("downloadUrl callback, length="+markers.length);

    for (var i = 0; i < markers.length; i++)  { 
        var id = markers[i].getAttribute("id");
        if (!id) id = "id "+i;
        var name = markers[i].getAttribute("name");
        if (!name) name = "name "+i;
        var address = markers[i].getAttribute("address"); 
        if (!address) address = "address";
        var citystate = markers[i].getAttribute("citystate");
        if (!citystate) citystate = "city, ST";
        var phone = markers[i].getAttribute("phone");
        if (!phone) phone = "phone number";
        var type = markers[i].getAttribute("type");
        var point = new google.maps.LatLng( 
          parseFloat(markers[i].getAttribute("lat")), 
          parseFloat(markers[i].getAttribute("lng"))); 
        bounds.extend(point);
        var html = "<b>" + name + "</b> <br/>" + address + "<br/>" + citystate + "<br/>" + phone;  //html inside InfoWindow 
        var url = "starrating/_drawrating.php?id=" + id + "";
        //var contentString = ajaxLoad(url, parseResults, true);
        //var contentString =   downloadUrl(url, "POST", "text=" + text, completed);
        var contentString = AJAX('starrating/_drawrating.php','id='+id,
            function(data) {
                var htm = $("#ratingblock").html(data);
                alert(htm);
           }
      );

        var description = "<br><br>description" + id + " <br><b>" + name + "</b> <br/>" + address + "<br/>" + citystate + "<br/>" + phone;  //html inside InfoWindow
        var icon = customIcons[type] || {}; 
        var marker = new google.maps.Marker({ 
            map: map, 
            position: point, 
            icon: icon.icon, 
            shadow: icon.shadow,
            animation: google.maps.Animation.DROP
        }); 
        bindInfoWindow(marker, map, infoBubble, html, description, contentString); 
    } 
}); 

function AJAX(url, data, callback)
{
var xmlhttp;
if (window.XMLHttpRequest)
{// code for IE7+, Firefox, Chrome, Opera, Safari
xmlhttp=new XMLHttpRequest();
}
else
{// code for IE6, IE5
xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
}
xmlhttp.onreadystatechange=function()
{
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
        callback(xmlhttp.responseText);
    }
}
xmlhttp.open("POST",url,true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send(data); 
```

}

编辑：好的，所以我一直在玩这个并更新了我上面的代码。现在，当我使用 firebug 运行它时，我可以看到帖子并且响应是这样的：

```
<div id="ratingblock" class="ratingblock"><div id="unit_long10"><ul id="unit_ul10" class="unit-rating" style="width:150px;"><li class="current-rating" style="width:0px;"></li></ul><p class="static">Rating: <strong> 0.0</strong>/5 (0 votes cast)</p></div></div> 
```

但警报只显示 [object Object]，而 infowindow 显示 [object Object]。所以我知道它的调用和返回数据，我搜索并尝试了我能想到的一切，以使上述部分正确显示在信息窗口中。有什么想法吗？

编辑#2

我在下面尝试一种新方法。

```
var contentString = $.ajax({
                            type:"POST",
                            url: "starrating/_drawrating.php",
                            dataType: "html",
                            data:"id="+id,
                            success: function(data){
                                    var $response=$(data);
                                    $response.find('ratingblock').html();
                                    console.log($response);
                                }
                        }); 
```

控制台返回“Object[div#ratingblock.ratingblock]”，但结果仍然显示 [object Object]。任何想法我缺少什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T21:01:47.680

AJAX 中的 A 代表异步，意思是 JS 不会等待 PHP 数据回来。因此，您不能简单地将 AJAX 调用的结果分配给变量，您必须注册一个函数，该函数将在某些数据返回时被调用。这就是您当前为空的`function(result) {}`回调的用途。

这有点像要求某人取东西，同时继续进行，而不是呆在原地直到他们回来。回调函数，在这个有点狡猾的类比中，是当他们回来时你打算做什么的一个注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:37:43.637

`$static_rater`是一个不能使用连接运算符的数组。

```
$static_rater[] = "\n".'<div class="ratingblock">';
$static_rater[] = '<div id="unit_long'.$id.'">';
$static_rater[] = '<ul id="unit_ul'.$id.'" class="unit-rating" style="width:'.$rating_unitwidth*$units.'px;">';
$static_rater[] = '<li class="current-rating" style="width:'.$rating_width.'px;">Currently '.$rating2.'/'.$units.'</li>';
$static_rater[] = '</ul>';
$static_rater[] = '<p class="static">'.$id.'. Rating: <strong> '.$rating1.'</strong>/'.$units.' ('.$count.' '.$tense.' cast)</p>';
$static_rater[] = '</div>';
$static_rater[] = '</div>'."\n\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:38:01.483

您在 url 中发送部分数据并在帖子正文中发送部分数据，将这两个部分都放在帖子正文中。IE

```
AJAX('starrating/_drawrating.php','id='+id, 
```

# android - 尝试使用 SimpleAdapter 过滤时出现 NullPointerException

> ID：15911948
> 
> 赞同：0
> 
> 时间：2013-04-09T20:33:27.867
> 
> 标签：android

我有一个使用 SimpleAdapter 的 ListView 活动。这是 onCreate：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.contact_selection);
    Intent intent = getIntent();
    mContactsList = (ListView) findViewById(R.id.contacts_list);
    mContactAdapter = new SimpleAdapter(this, getEmailContacts(), R.layout.contact_list_item,
            new String[] { CONTACT_FIELDS.NAME.toString(), CONTACT_FIELDS.PHOTOURI.toString(),
                    CONTACT_FIELDS.SECONDARY_DATA.toString(), CONTACT_FIELDS.TYPE.toString() },
            new int[] { R.id.contact_name, R.id.contact_image, R.id.contact_type_name,
                    R.id.contact_type_name });
    mContactsList.setAdapter(mContactAdapter);
} 
```

这很好用；列表显示并正确填写。让我强调一下——问题不在于我的 getEmailContacts() 方法为空，因为此时列表已正确呈现。

我正在尝试添加过滤，所以我在 mContactsList.setAdapter 之后添加了这一行来尝试一下：

```
 mContactAdapter.getFilter().filter("Ca"); 
```

这会导致崩溃，并带有以下堆栈跟踪：

```
FATAL EXCEPTION: main
java.lang.NullPointerException
    at android.widget.SimpleAdapter.getCount(SimpleAdapter.java:93)
    at android.widget.AdapterView.checkFocus(AdapterView.java:712)
    at android.widget.AdapterView$AdapterDataSetObserver.onInvalidated(AdapterView.java:835)
    at android.widget.AbsListView$AdapterDataSetObserver.onInvalidated(AbsListView.java:5966)
    at android.database.DataSetObservable.notifyInvalidated(DataSetObservable.java:50)
    at android.widget.BaseAdapter.notifyDataSetInvalidated(BaseAdapter.java:59)
    at android.widget.SimpleAdapter$SimpleFilter.publishResults(SimpleAdapter.java:383)
    at android.widget.Filter$ResultsHandler.handleMessage(Filter.java:282)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:137)
    at android.app.ActivityThread.main(ActivityThread.java:5041)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:511)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
    at dalvik.system.NativeStart.main(Native Method) 
```

有什么建议么？我错过了一些非常明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:39:14.253

似乎您的 getEmailContacts() 方法正在返回一个空对象。查看 SimpleAdapter 源代码，getCount 方法只调用 mData.size()，其中 mData 是您通过 getEmailContacts() 方法传递给 SimpleAdapter 构造函数的数据映射列表。

# c# - 不显示实体框架中的类中使用的任何内容

> ID：15911950
> 
> 赞同：0
> 
> 时间：2013-04-09T20:33:34.240
> 
> 标签：c#, .net, winforms, linq, entity-framework

为什么代码不显示任何内容`datagridview` ？

```
class classman
        {
            public int id;
            public string name;
        }

    private void Form2_Load(object sender, EventArgs e)
    {
        testtelContext db = new testtelContext();
        List<classman> qry = (from p in db.firstlasts
                             join i in db.firstnames
                                 on p.Idfname equals i.Idfname
                              select new classman
                             {
                                 id = p.idfl,
                                 name = i.fname

                             }).ToList();
      BindingSource bs=new BindingSource();
        bs.DataSource = qry;
        dataGridView1.DataSource = bs;

    } 
```

bindingsource 有值但不显示 dataGridView5 显示图片[http://irphoto.ir/uploads/13658793021.jpg](http://irphoto.ir/uploads/13658793021.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:37:15.533

大概需要这个：

```
dataGridView1.DataBind(); 
```

在您设置数据源之后。

# java - 使用递归添加分数

> ID：15911953
> 
> 赞同：0
> 
> 时间：2013-04-09T20:33:54.760
> 
> 标签：java, recursion, fractions

我需要编写一个递归方法来计算以下系列：

```
m(i) = 1/3 + 2/5 + 3/7 + 4/9 + 5/11 + 6/13 + .... + i/(2i + 1) 
```

然后我需要编写一个显示`m(i)`.`i = 1,2,....10`

我了解递归的基本思想，到目前为止我已经完成了 2 个程序，一个用于阶乘，一个用于斐波那契数列。这个问题把我难住了。

这就是我到目前为止所拥有的。

```
public static void main(String[] args) {
    for (int i = 1; i <= 10; i++) {
        System.out.println(m(i));
    }
}

public static double m(int i) {
    if (i == 1)
        return 1;
    else
        return ???;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T20:41:27.653

首先，看起来您的基本情况已关闭-应该是 1/3（系列中的第一个数字）。

对于您的其他人，您应该将下一步向下添加到当前步骤。鉴于您的系列，当前步骤是`i/(2i + 1)`.

```
public static double m(int i) {
  if (i == 1) {
    // Base case is 1 - return the first number in the series
    return 1/3;
  } else {
    // Get the current step (ie the current iteration of m(i))
    double curStep = i / (2.0 * i + 1.0);

    // Return the current step plus the next step down
    return curStep + m(i - 1);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T21:39:02.867

它需要递归吗？如果没有，一个简单的 for 循环就可以了。

```
double sum = 0;
for(int x = 0; x < i; x++)
{
    sum += x / (2.0 * x + 1);
}
return sum; 
```

如果它必须是递归的，则需要从正确识别基本情况开始。在这种情况下，您的基本情况可能是 0 或 1。示例：

基本情况为 0：

```
public static double m(int i)
{
    if(i==0)
        return 0;
    else
    { 
        double sum = i/(2.0 * i + 1);

        return sum + m(i-1);
    }
} 
```

基本情况是 1：

```
public static double m(int i)
{
    if(i==1)
        return 1.0/3.0;
    else
    { 
        double sum = i/(2.0 * i + 1);

        return sum + m(i-1);
    }
} 
```

# vba - Excel VBA 优化

> ID：15911957
> 
> 赞同：2
> 
> 时间：2013-04-09T20:34:08.743
> 
> 标签：vba, optimization

一位用户要求我从他们创建的 Excel 书中运行一个宏，以使流程自动化。我通过 cscript 从 Java 调用宏。无论如何，我都不是 VBA 程序员，但是代码效率低下，而且只是一遍又一遍地简单地复制/粘贴。

当我从 Java 运行宏时，出现以下错误：

运行时错误“1004”：范围类的 CopyPicture 方法失败

当我进入工作簿并手动单击启动此宏的按钮时，不会发生此错误。

我一直在阅读如何使用 .Activate/Selection/.Select/etc 可以真正减慢代码并导致此类问题。

这是一个不断使用的代码块（而不是在过程/函数调用中）。它不断在“Selection.CopyPicture”行上抛出错误。

任何优化此块的帮助将不胜感激。

```
 ActiveSheet.ChartObjects("Chart 9").Activate
 ActiveChart.Pictures.Delete
 Range("InvGrid").Select
 Selection.CopyPicture Appearance:=xlScreen, Format:=xlPicture

 ActiveSheet.ChartObjects("Chart 9").Activate
 ActiveChart.ChartArea.Select
 ActiveChart.Paste
 Application.CutCopyMode = False
 ActiveSheet.ChartObjects("Chart 9").Activate
 ActiveChart.ChartArea.Select
 ActiveChart.Export "C:\ABC.gif", "GIF", False 
```

VBS 通过 csript 从 Java 启动

```
 Dim xlsWorkbook
 Dim objExcel
 Set objExcel = CreateObject(\"Excel.Application\")
 objExcel.Application.DisplayAlerts = False
 Set xlsWorkbook = objExcel.WorkBooks.Open(\"" + xlsmFilepath + "\", 3)
 objExcel.Application.Run(xlsWorkbook.Name & \"!ExportCharts\")
 xlsWorkbook.Save
 xlsWorkbook.Close
 objExcel.Quit 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T21:00:20.380

可能是这样的：

```
Dim cht As Chart
Set cht = ActiveSheet.ChartObjects("Chart 9").Chart
ActiveSheet.Range("InvGrid").CopyPicture Appearance:=xlScreen, Format:=xlPicture
With cht
    If .Pictures.Count > 0 Then .Pictures.Delete
    .Paste
    .Export "C:\ABC.gif", "GIF", False
End With 
```

# javascript - 流体宽度滑块

> ID：15911958
> 
> 赞同：0
> 
> 时间：2013-04-09T20:34:09.993
> 
> 标签：javascript, jquery, slider, width, fluid

我在这里建立一个网站：[argit.bounde.co.uk](http://www.argit.bounde.co.uk)

我遵循了制作滑块的教程，它的工作原理是具有`ul`大宽度然后`li's`浮动。然后这一切都被 a `div`which has隐藏了`overflow: hidden`。然后让 jquery 动画`margin-left = imgWidth`

我网站的其余部分是流体宽度，所以显然我需要滑块跟随，否则它看起来有点傻。目前我已经`li's`用 jquery 给出了一个设置的宽度，然后将 img 设置为 100%。这个解决方案没问题，但是当设备不支持 jQuery 时就会崩溃，所以我更喜欢更健壮的方法。我无法将其设置`ul`为 100%，因为图像不再排成一行，它们简单地堆叠在彼此下方

谁能想到我可以实现这一目标的方法？

完整的滑块 jQuery 在这里：

```
var current = 1;

function slider () {
var sliderUl = $('div#slider ul'),
    imgs = sliderUl.find('img'),
    imgWidth = imgs.width(), 
    imgLength = imgs.length, 
    totalImgsWidth = imgLength * imgWidth; 

var direction = $(this).data('dir'),
    loc = imgWidth;

if( direction == 'next') {
    ++current;
} else {
    --current;
}

if( current === 0) {
    current = imgLength;
    loc = totalImgsWidth - imgWidth;
    direction = 'next';
} else if ( current - 1 === imgLength ) {
    current = 1;
    loc = 0;
}

transition(sliderUl, loc, direction);
};

function transition( container, loc, direction ) {
var ease;
var unit;

if (direction && loc !== 0) {
    unit = (direction === 'next') ? '-=' : '+=';
}

container.animate({
    'margin-left': unit ? (unit + loc) : loc
})
}; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-09T21:20:58.650

我已经链接到我编写的用于执行此操作的插件的小提琴。要求是父容器具有位置：相对，并且在较小程度上溢出：隐藏，并且在加载图像后调用它。随意获取代码并从中学习。

[http://jsfiddle.net/dhQk/35K8X/7/show/](http://jsfiddle.net/dhQk/35K8X/7/show/)

**JS**

```
$.fn.fitToParent = function (type, align) {
    type = typeof type === 'undefined' ? 'fit' : type;
    align = typeof align === 'undefined' ? 'center' : align;
    return this.each(function () {
        var $this = $(this);
        var $parent = $(this).parent();
        if ($this.is('img')) {
            $this.css({
                'position': 'absolute',
                    'width': '100%',
                    'height': 'auto'
            }).css({ //Allow Height to adjust
                'left': '',
                    'margin-left': '',
                    'top': align == 'center' ? '50%' : (align == 'left' ? '0px' : ''),
                    'bottom': '',
                    'margin-top': align == 'center' ? (-$this.height() / 2) + 'px' : ''
            });
            //Size by height depending on sizing type
            if (($this.height() > $parent.height() && type === 'fit') || ($this.height() < $parent.height() && type === 'fill')) {
                $this.css({
                    'width': 'auto',
                        'height': '100%'
                }).css({ //Allow Width to adjust
                    'top': '',
                        'margin-top': '',
                        'left': align == 'center' ? '50%' : (align == 'left' ? '0px' : ''),
                        'right': align == 'right' ? '0px' : '',
                        'margin-left': align == 'center' ? (-$this.width() / 2) + 'px' : ''
                });
            }
            if (type === 'none') {
                $this.css({
                    'width': '',
                        'height': ''
                }).css({ //Allow Width to adjust
                    'top': '50%',
                        'bottom': '',
                        'margin-top': (-$this.height() / 2) + 'px',
                        'left': align == 'center' ? '50%' : (align == 'left' ? '0px' : ''),
                        'right': align == 'right' ? '0px' : '',
                        'margin-left': align == 'center' ? (-$this.width() / 2) + 'px' : ''
                });
            }
        }
    });
}; 
```

为了解释逻辑，它所做的只是将宽度设置为 100% 并检查它的高度是否更大，如果不是，那么宽度 100% 就可以了。如果不是，它会将其切换到 100% 的高度。在图像上，如果设置了一个大小属性，那么另一个会相应地调整大小。大小逻辑完成后。它只是使用绝对位置和边距使图像居中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:56:05.830

您可以检测设备是否支持 jQuery：

```
$('html').addClass('jQuery'); 
```

然后为这个类使用特定的 css 样式：

```
.jQuery li {
    /* some style */ 
} 
```

如果设置了“jQuery”类，则设备支持 jQuery。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:56:50.287

最简单的方法是不浮动面板（li）并将它们设置为包装 div 的 100% 宽度。然后，当用户导航时，将下一个面板以 100% 的边距定位到右侧，然后将其设置为 0 边距，同时将前一个面板设置为 -100% 的边距。当用户选择前一个面板时，执行相反的操作。我认为这种方法在较旧的 IE 中效果不佳，但我可能弄错了。

或者，您可以绑定到窗口调整大小事件（最好限制事件）并调整面板大小和任何保存的宽度/高度

# api - 使用 tfl 数据 api - 教程？

> ID：15911961
> 
> 赞同：3
> 
> 时间：2013-04-09T20:34:14.083
> 
> 标签：api, proxy, transport, consumption

我已经开发了 3 年的应用程序，现在正在寻找构建一个使用 TFL（伦敦交通）api 调用的应用程序。我正在阅读他们的指南并阅读以下内容：

> “使用 TfL 数据并提供基于其的公共服务的分销开发商应提供服务这些公共消费者所需的托管能力。您应该获取我们的数据并代理它，您不应该让所有客户直接访问我们的服务。这是为了减少伦敦交通局在托管和内容交付方面的成本责任。”

虽然我做了很多应用程序开发，但我从未托管自己的代理接收来自 api 的响应。我已经在互联网上搜索了这方面的教程（理想情况下是针对 TFL 的，但一般的也很棒），但找不到任何帮助。

有人知道吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-28T11:41:30.460

与 TFL 讨论了 Bus Times，事实证明您不需要通过数据库运行这些数据，而是可以让用户通过您的 iPhone 应用程序直接调用 API。好消息 ：-）

# c# - 设置方法不起作用......它没有给变量赋值

> ID：15911964
> 
> 赞同：0
> 
> 时间：2013-04-09T20:34:19.790
> 
> 标签：c#, class, get, set

见鬼的家伙。

我正在使用服务器、客户端和类库制作这个项目。在类库（我将其添加到服务器和客户端作为参考）中，例如：

```
string f = "not working";
public void SetString(string n)
{
  f = n;
}

public string GetStr ()
{
 return f;
} 
```

我已经连接了客户端和服务器并且它们工作正常，Get方法也工作但SET METHOD不起作用？当我从客户端调用 set 方法时，它没有设置我给出的值！！。HttpChannel chan = new HttpChannel();

```
Tic obj = (Tic)Activator.GetObject(typeof(Tic), "http://127.0.0.1:9050/MyServer");

private void Form1_Load(object sender, EventArgs e)
    {
        ChannelServices.RegisterChannel(chan);
    }

private void button1_Click(object sender, EventArgs e)
    {
        string m = "working";
        obj.SetString(m);
    } 
```

我再次重申 Get 方法工作正常，但只有 Set 方法......问题是它没有显示任何错误！它只是没有给字符串变量赋值！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T20:44:04.097

如果我正确理解您的设置，您正在联系远程 http 服务器并调用设置变量值的方法。然后，您联系该 http 服务器并要求返回该值，您将获得原始值。

我不确定您托管的是哪种网络“服务器”，但大多数情况下，服务器仅在调用时实例化它们的类。所以基本上你正在联系一个服务器，它实例化任何包含“f”字符串的类。你设置值。服务器完成其工作并终止该进程。然后您再次联系服务器询问“f”的值，因此它再次实例化所有内容，这意味着该值将“不起作用”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:39:16.980

您是否尝试过使用[属性](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)？

```
public class Foo
{
    public string Message {get;set;}
}

public class Bar
{
    public void Boz()
    {
        var foo = new Foo();
        foo.Message = "Working";
    }
} 
```

# javascript - 如果（xxx || xxx），我做错了什么？

> ID：15911965
> 
> 赞同：3
> 
> 时间：2013-04-09T20:34:20.137
> 
> 标签：javascript, if-statement

有人可以向我解释我做错了什么吗？

```
function navMenuIntervalCheck() {
    if (currentSiteUrl != "subsites/players.php" || currentSiteUrl != "subsites/itemshop.php") {
        $.ajax({
            url: currentSiteUrl,
            cache: false,
            success: function (dataForContainer) {
                $('#container').html(dataForContainer);
            }
        });
    }

    screenControlCheck();
};

setInterval(function () {
    navMenuIntervalCheck()
}, 5000); 
```

当我运行我的网站时，它会刷新，即使`currentSiteUrl==subsites/players.php`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-09T20:36:14.607

与`x!='a' || x!='b'`往常一样`true`，我猜你想要`&&`而不是`||`.

阅读`||`as`OR`和`&&`as `AND`。

[MDN 中有关逻辑运算符的](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)更多详细信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-09T20:36:41.623

`currentSiteUrl`只能有一个值，因此始终至少有一个您要测试的值不相等`currentSiteUrl`，从而使`if`条件始终`true`.

我认为您打算使用`&&`或打算`==`使用`||`.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-09T20:37:15.887

你的代码是这样说的：

当 currentSiteUrl 不同于 subsites/players.php 或不同于 subsites/itemshop.php 时刷新。

所以 subsites/players.php 确实不同于 subsites/itemshop.php

使用 && 代替 ||

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-09T20:38:14.430

看看你的 if 语句：

```
if (a != foo || a != bar) 
```

让我们看看可能性：

*   a = 富。这将评估为 true，因为 != bar
*   a = 酒吧。这将评估为 true，因为 a != foo
*   a = 其他任何东西。这将评估为 true，因为 a != foo

您的 if 语句始终评估为 true。

正如其他人已经说过的，你想`||`用`&&`.

让我给你一个逻辑规则，叫做[德摩根定律](http://en.wikipedia.org/wiki/De_Morgan%27s_laws)。在学习如何建立良好的`if`陈述时，它真的很有用。

```
!(a || b) === !a && !b 
```

还

```
!(a && b) === !a || !b 
```

这就是说：“不是（一个事件或另一个）”与“不是一个事件而不是另一个”是一回事，而“不是（一个事件和另一个）”与“不是一个事件或不是另一个事件”是一回事其他”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-04-09T20:59:50.560

我知道这已得到解答，但认为使用您自己的代码添加一些附加信息可能会有所帮助。

如前所述，将[**逻辑运算符**](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Logical_Operators)从`||`to切换`&&`将起作用：

```
if (currentSiteUrl != "subsites/players.php" && currentSiteUrl != "subsites/itemshop.php") 
```

但这是为什么呢？

* * *

**使用`||`**

* * *

如果第一个或第二个表达式中的任何一个为，则`||`逻辑运算符返回，并且仅当两者都为时才会返回。`true``true``false``false`

因此：

*   如果`currentSiteUrl != "subsites/players.php"`你`true`最终进入`if`街区

*   如果`currentSiteUrl != "subsites/players.php"`是`false`和`currentSiteUrl != "subsites/itemshop.php"` 是`true`你最终在`if`块

永远不会有另一种情况，因为您的变量`currentSiteUrl`只能保存一个值，因此其中一个表达式将始终`true`导致您始终出现在`if`块中。

* * *

**使用`&&`**

* * *

`&&`另一方面，`false`如果第一个或第二个表达式是，则使用逻辑运算符返回，`false`并且只有当两者都是`true`时才会返回`true`。

因此：

*   如果`currentSiteUrl != "subsites/players.php"`是`true`和`currentSiteUrl != "subsites/itemshop.php"`是`true`你最终在`if`块

*   如果`currentSiteUrl != "subsites/players.php"`是`true`和`currentSiteUrl != "subsites/itemshop.php"`是`false`你**不会**在`if`块中结束

*   如果你**没有**进入街区`currentSiteUrl != "subsites/players.php"`_`false`**`if`**

 **永远不会有另一种情况，因为只有当两个表达式都存在`true`时，您才会最终进入`if`块中，而只要其中一个表达式存在`false`，您就不会。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-09T20:40:19.140

您如何获得 currentSiteUrl。url 后跟 protocol:://domain

尝试使用以下属性获取 URL，然后匹配它

```
window.location.href 
```

此 url 还将包括 http 或 https 和域名**

# magento - 如何在 2columns-right.phtml 上显示父类别而不在 magento 的 cms 页面中放置块

> ID：15911972
> 
> 赞同：1
> 
> 时间：2013-04-09T20:34:28.887
> 
> 标签：magento, magento-1.7

我想在不使用块部分的情况下显示所有父类别。我想将代码放在 cms 页面中，所以请帮助我尝试了很多代码，但没有奏效

文件名：- 2columns-right.phtml

# php - Wordpress：如何在 $postcount PHP 上显示逗号

> ID：15911973
> 
> 赞同：0
> 
> 时间：2013-04-09T20:34:29.717
> 
> 标签：php, wordpress

这是我面临的问题。我正在使用 Wordpress，并且正在使用两个 PHP 在我的网站上向访客显示统计信息，例如`# total of posts`created 和`# of total comments`on the site。PHP 运行良好并显示当前实时#，但它们不呈现逗号，例如`2,700`在 which show as`2700`和 say for another example `100,800`which shows as `100800`.

谁能告诉我如何修改这两个 php 来实现这一点？

这是帖子状态PHP代码：

```
<?php
$postcount = $wpdb->get_var("SELECT COUNT(*) FROM $wpdb->posts WHERE post_status = 'publish'");
echo $postcount;
?>

Here is the comments status php:

<?php
$comments_count = wp_count_comments();
echo "" . $comments_count->total_comments . "";
?> 
```

提前致谢。

-杰伊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:36:18.580

您正在寻找： http: [//php.net/manual/en/function.number-format.php](http://php.net/manual/en/function.number-format.php)

```
number_format($postcount); 
```

应该足以显示数千个分隔符。

第二次使用：

```
echo "" . number_format($comments_count->total_comments) . ""; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:36:56.727

```
<?php
  $postcount = $wpdb->get_var("SELECT COUNT(*) FROM $wpdb->posts WHERE post_status = 'publish'");
  echo number_format($postcount, 0); 
?> 
```

关于评论数：

```
<?php
  $comments_count = wp_count_comments();
  echo "" . number_format($comments_count->total_comments, 0) . "";
?> 
```

# java - 如何在 GWT 中调用单个事件处理程序类中编写的相应 Java 方法（针对每个按钮）？

> ID：15911974
> 
> 赞同：1
> 
> 时间：2013-04-09T20:34:32.390
> 
> 标签：java, gwt, jsni

我想在单击不同按钮时调用不同的方法（在单个 GWT 事件处理程序类中）？它是这样的：

假设我的 UI 中有 3 个按钮：

1.  按钮1
2.  按钮2
3.  按钮 3

而且，我为它们中的每一个都附加了相同的（单击）事件处理程序：ButtonClicker

在 OnClick() 方法中，我想调用与单击的按钮相对应的方法。这是一些示例代码，可以更好地说明我正在尝试做的事情：

```
public class ButtonClicker implements ClickHandler 
{
    public void onClick(ClickEvent event)
    {
        PushButton clickedButton = (PushButton) event.getSource();

        // I could call the corresponding method using if-else condition but I do not want to do that. 
        // Instead, I want some code here, may be using JSNI (using eval in some way) or something like that to call the corresponding method.
        ......      
    }

    private void Button1Click()
    {
        // Code to handle Button1 Click 
    }

    private void Button2Click()
    {
        // Code to handle Button2 Click
    }

    private void Button3Click()
    {
        // Code to handle Button3 Click
    }
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-10T09:34:30.840

我想你有很好的理由走这条错综复杂的路线，所以这里有一个建议，不包括判断：

```
JavaScriptObject map = createMap(this);

private static native JavaScriptObject createMap(ButtonClicker o) /*-{
   // Note: does not use $entry() as this will be called from GWT code
   return {
       "button1": function() { o.@foo.ButtonClicker::Button1Click()(); },
       "button2": function() { o.@foo.ButtonClicker::Button2Click()(); },
       "button3": function() { o.@foo.ButtonClicker::Button3Click()(); }
     };
}-*/;

private static native void call(JavaScriptObject map, String id) /*-{
  var fn = map[id];
  // TODO: add null-check / fallback behavior
  fn();
}-*/;

@Override
public void onClick(ClickEvent event) {
  call(map, ((UIObject) event.getSource()).getElement().getId());
} 
```

# c++ - const * char in struct in class - 分段错误

> ID：15911978
> 
> 赞同：-1
> 
> 时间：2013-04-09T20:34:47.437
> 
> 标签：c++, segmentation-fault

我有这段代码，它给了我分段错误。

```
struct TRecord {
    const char * Id;
    const char * Name;
};
class CClass {
    CClass ();
    ~CClass ();
    bool Add ( const char * id, const char * name);
    TRecord ** m_record;
    int m_count;
};

CClass::CClass (void) {
    m_count = 0;
    m_record = new TRecord * [1000];
}

CClass::~CClass(void) {
    for(int i=0;i<m_count;i++){
        delete m_record[i];
    }
    delete [] m_record;
}

bool CClass::Add (const char * id, const char * name) {
    m_record[m_count] -> Id = new char[11];
    m_record[m_count] -> Name = new char[strlen(name) + 1];

    m_record[m_count] -> Id = id;
    m_record[m_count] -> Name = name;

    m_count++;
    return true;
} 
```

如果我添加例如 const char haha​​[2222]; 构造TRecord，它可以工作。我不明白为什么。你能帮助我吗？

PS我不能使用字符串。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:37:24.083

一个错误是您在 CRegister 类中没有遵循[三原则。](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)这通常会导致段错误。

另一个错误是您没有初始化 m_record[i] 指针。所以你的析构函数可能会在垃圾值上调用 delete[] 。

第三个错误是您显然在 CRegister::Add 中取消引用相同的垃圾值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T20:40:56.587

将此行添加到`Add`函数声明的顶部，它将解决您的`Segmentation Fault`问题。

```
m_record[m_count] = new TRecord; 
```

但是正如您在答案和评论中看到的那样，您的代码有很多问题。最重要的问题是您对垃圾对象没有任何好的计划。所以你的代码有内存泄漏。

# c - c 能否以 modula-2 定义 `TNumber = [minValue,maxValue]` 的方式定义数据类型？

> ID：15911986
> 
> 赞同：0
> 
> 时间：2013-04-09T20:35:20.673
> 
> 标签：c, types

我想定义一个数字变量可以属于的固定范围。我使用的是 c89 编译器。所以，如果我这样做：

`#define minValue -200`

`#define maxValue 200`

我想要以下内容： `typedef int range[minValue,maxValue]`

可以做这样的事情吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:45:45.093

不，这是不可能的。您必须添加一些代码来检查您的值是否在定义的范围内。

例如

```
typedef int Range; // must be between minValue and maxValue
#define CheckRange(x) (((x)>=minValue) && ((x)<=maxValue))
[...]
Range a = ...; // a call to a function or user input request
if (!CheckRange(a)) 
  // handle error 
```

# java - Android：字符串等于且包含不匹配

> ID：15911987
> 
> 赞同：-1
> 
> 时间：2013-04-09T20:35:37.073
> 
> 标签：java, android, string

我正在测试 Android 应用程序的 JSON 功能并具有以下 JSON 对象。

```
{"result":"fail"} 
```

然后我使用以下代码来获取我的值：

```
JSONObject jObject = new JSONObject(ReturnValue); //Return value is what's shown above
String r = jObject.getString("result"); 
```

然后使用以下我没有得到匹配

```
if(r.trim() == "fail") 
```

我把它写到屏幕上只是为了确保这一点：

```
et.setText("-" + r + "-"); 
```

这导致-失败-

我不明白为什么这不匹配。如果我使用 r.Contains 它返回 true，但我不能将它用于我的检查。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-09T20:37:34.603

采用

```
if(r.trim().equals("fail")) 
```

比较字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-09T20:38:49.590

使用等于`.equals`而不是`==`。这是因为在 Java 中，如果您使用`==`对象指针相互比较。在他们的源代码中，`String`他们重写了该`equals`方法，因此他们改为比较字母。

您不能覆盖 Java 中的运算符。

这也是一般性的，`equals`如果您不想检查您正在比较的引用**实际上**指向堆中的同一对象，请始终用于任何对象比较。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-09T20:44:01.360

正如其他人指出的那样，在 Java == 中表示“完全相同的对象”，而不是“相同的对象”。例如，您可以有两个相同的 SimpleDateFormat 对象，但如果它们在堆上占据不同的位置，它们就不是同一个对象。[仅供参考，C# 的行为方式非常相似，但在大多数情况下](http://blogs.msdn.com/b/csharpfaq/archive/2004/03/29/when-should-i-use-and-when-should-i-use-equals.aspx)设法对程序员隐藏它。

顺便说一句，既然您已经在编写 Java 代码，那么您知道，稍微学习一下该语言可能是个好主意。以后省去一大堆问题。对于尝试用 Java 编写 C# 的人（如非静态内部类），还有许多其他惊喜等待着人们。

# c++ - 删除临时指针时出现段错误

> ID：15911988
> 
> 赞同：2
> 
> 时间：2013-04-09T20:35:37.633
> 
> 标签：c++, pointers, segmentation-fault, queue

我使用 gdb 找到了 seg 错误的确切行。它在 dequeue 函数中作为注释记录。

这是整个队列类。

`dequeue()`当队列中有两个对象和哨兵时，我会在调用时出现故障。

```
template <typename T>
void Queue<T>::clear()
{
    while(!isEmpty())
        dequeue();
}

template <typename T>
void Queue<T>::enqueue(const T& x)
{

    if(isEmpty())
    {
        Queue<T>* temp = new Queue<T>;
        m_data = x;
        m_next = temp;
        return;

    }

    Queue<T>* temp = this;

    while(temp->m_next != NULL)
    {
        temp = temp->m_next;
    }
    Queue<T>* node = new Queue<T>();
    temp->m_data = x;
    node->m_next = temp->m_next;
    temp->m_next = node;
    return;
}

template <typename T>
void Queue<T>::dequeue()
{
    if(isEmpty())
        return;
    if(m_next != NULL)
    {
        Queue<T>* temp = m_next;
        m_data = temp->m_data;
        m_next = temp->m_next;
        delete temp; //Seg fault here
    }
    return;
}

template <typename T>
const T& Queue<T>::front() const throw (int)
{
    if(isEmpty())
        throw 0;
    return m_data;
}

template <typename T>
bool Queue<T>::isEmpty() const
{
    return (m_next==NULL);
}

template <typename T>
int Queue<T>::size() const
{
    int size = 0;
    const Queue<T>* temp = this;
    while(temp->m_next != NULL)
    {
        temp = temp->m_next;
        size++;
    }
    return size;
} 
```

抱歉，我以为我已经发布了 Queue 类：

```
template <typename T>
class Queue : public AbstractQueue<T> {
public:
    Queue(){m_next = NULL;};

    virtual void clear();

    virtual void enqueue(const T& x);

    virtual void dequeue();

    virtual const T& front() const throw (int);

    virtual bool isEmpty() const;

    virtual int size() const;

    ~Queue(){
        clear();
        return;
    };
private:
    T m_data;
    Queue* m_next;
}; 
```

它继承自这个类：

```
template < typename T >
class AbstractQueue
{
public:

  // Purpose: clears the queue
  // Postconditions: the queue is now empty 
  // -- PURE VIRTUAL
  virtual void clear() = 0;

  // Purpose: enqueue an element into the queue
  // Parameters: x is the item to add to the queue
  // Postconditions: x is now the element at the end of the queue, 
  // -- PURE VIRTUAL
  virtual void enqueue(const T& x) = 0;

  // Purpose: dequeues 
  // Postconditions: the element formerly at the front of the queue has
  //     been removed
  // Dequeueing from an empty Queue produces no errors, queue remains empty.
  // -- PURE VIRTUAL
  virtual void dequeue() = 0;

  // Purpose: looks at the front of the queue
  // Returns: a reference to the element currently in front of the queue
  // Exception: if the queue is currently empty, throw SOMETHING!!
  // -- PURE VIRTUAL
  virtual const T& front() const = 0;  

  // Purpose: Checks if a queue is empty
  // Returns: 'true' if the queue is empty
  //     'false' otherwise  
  // -- PURE VIRTUAL
  virtual bool isEmpty() const = 0;

  // Purpose: Returns the size of a queue.
  // Returns: the number of elements in the Queue
  // -- PURE VIRTUAL
  virtual int size() const = 0;

  // ----------------

  // Purpose: Destructor
  // -- VIRTUAL
    virtual ~AbstractQueue() {};

}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T20:52:55.793

对我来说，里面的下面一行`enqueue()`看起来有点奇怪。

```
Queue<T>* node = new Queue<T>(); 
```

它每次都在创建一个新队列。

意图可能是以下吗？

```
T * node = new T; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-09T20:53:40.460

好吧，与其给你一条鱼，我会教你如何钓鱼……

当你得到`segmentation fault`它意味着操作系统检测到内存访问错误。当您使用指针时，这通常发生在 C/C++ 中。指针非常危险，必须小心对待。

**如何检测问题发生在哪里？** 好吧，当您的程序接收到 Linux 时，它的信息量不是很大，`SEGFAULT`但是它为您提供了很多信息。你只需要知道如何“阅读”它。

*coredump*是发生分段错误时内存、堆栈和变量的图片。运行它

```
gdb myapp core 
```

其中 myapp 是您的应用程序可执行文件，而 core 是核心转储。现在你会看到类似的东西：

```
GNU gdb 19991004

Copyright 1998 Free Software ���.�

Core was generated by `testit'.

Program terminated with signal 11, Segmentation fault.

Reading symbols from /usr/lib/libstdc++-libc6.1-1.so.2...done.

Reading symbols from /lib/libm.so.6...done.

Reading symbols from /lib/libc.so.6...done.

Reading symbols from /lib/ld-linux.so.2...done.

#0  0x823221a in main () at blabla.c:3

10             *i++; 
```

它会告诉你究竟是哪条线路导致了故障。如果您想确切地知道您是如何到达该行的，请键入`bt` this 将向您显示从您的应用程序 main() 到实际故障的回溯，包括传递给函数的参数。

我认为，一旦您确切地知道分段错误发生的位置，您将更容易解决它。

几点注意事项：

1.  如果没有创建 coredump。在控制台中输入：

    ```
    ulimit -c unlimited 
    ```

2.  您需要使用 -g 编译程序以在 gdb 中启用有意义的符号名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-09T20:43:11.217

在这段代码中：

```
Queue<T>* temp = m_next;
m_data = m_next->m_data;
m_next = m_next->m_next; 
```

您没有检查 m_next 是否为非空（如果您位于列表的末尾），因此您开始取消引用空指针，并且此时所有赌注都已关闭。

# django - 别名（CNAME）Django 子域/域保存会话

> ID：15911992
> 
> 赞同：0
> 
> 时间：2013-04-09T20:35:46.687
> 
> 标签：django, session-cookies, alias, subdomain, cname

我能够在我为 example.com 创建的多个子域上保持登录状态，例如我在 a.example.com 和 b.example.com 上保持登录状态。但是，当我尝试将 (CNAME) 别名为 a.example.com 的 example.com 时，我失去了当前会话的内容。

SESSION_COOKIE_DOMAIN 是“example.com”，这可能解释了为什么当前会话没有举行。

无论如何我可以在保持我的会话来自 example.com 的同时使用别名，因为它首先应该指向 example.com？

我知道 meetup.com 会做这样的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-12T15:11:33.133

尝试放置一个“。” 在您的域前面

```
SESSION_COOKIE_DOMAIN = '.example.com' 
```

这会将您的会话域分配给 example.com，并将持续存在于所有子域中。

# node.js - 使用 iisnode 在虚拟目录中运行的 node.js express 3 应用程序的 socket.io 路由问题

> ID：15911998
> 
> 赞同：1
> 
> 时间：2013-04-09T20:36:20.330
> 
> 标签：node.js, express, socket.io, iisnode

### 错误：

尝试访问`http://localhost/appDirectory/socket.io`给出：
`Cannot GET /appDirectory/socket.io`

或者换一种说法，当尝试在页面上加载客户端文件时，我收到此错误：
`GET http://localhost/appDirectory/socket.io/socket.io.js 404 (Not Found)`

如果我将客户端文件作为静态内容加载，则连接行会产生此错误：
`GET http://localhost/appDirectory/socket.io/1/?t=1365535131937 404 (Not Found)`

### 服务器代码：

```
var express = require('express'),
namespace = require('express-namespace'),
routes = require('./routes'),
http = require('http'),
app = express(),
server = app.listen(process.env.PORT),
io = require('socket.io').listen(server);
var appDir = '/appDirectory';

app.configure(function(){
  app.set('env', process.env.NODE_ENV || 'development');
  app.set('/views', __dirname + '/views');
  app.set('view engine', 'jade');
  app.use(app.router);
  app.use(appDir, require('stylus').middleware(__dirname + '/public'));
  app.use(appDir, express.static(path.join(__dirname, '/public')));
});

app.get(appDir + '/', routes.index);

io.sockets.on('connection', function (socket) {
  socket.emit('message', 'lol');
}); 
```

### 客户端代码：

```
<script src="/appDirectory/socket.io/socket.io.js"></script>
<script type="text/javascript">
  var socket = io.connect(appDir, { resource: appDir.substring(1) + '/socket.io' });
  socket.on('connect', function () {
    console.log('connected');
  });
</script> 
```

让这个工作的网络配置文件是......

### 网络配置：

```
<configuration>
<system.webServer>
  <handlers>
    <add name="iisnode" path="app.js" verb="*" modules="iisnode" />
  </handlers>
  <iisnode loggingEnabled="true" debuggingEnabled="true" debuggerPathSegment="debug" />
  <rewrite>
    <rules>
      <clear />
      <rule name="Debug" patternSyntax="Wildcard" stopProcessing="true">
        <match url="app.js/debug*" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
        <action type="None" />
      </rule>
      <rule name="app" patternSyntax="Wildcard">
        <match url="*" negate="false" />
        <conditions logicalGrouping="MatchAll" trackAllCaptures="false" />
        <action type="Rewrite" url="app.js" />
      </rule>
    </rules>
  </rewrite>
</system.webServer>
</configuration> 
```

我的直觉是 express 路由干扰了 socket.io 路由，或者 socket.io 路由与虚拟目录不兼容。我确实看到一些关于 socket.io 命名空间的提及，我确实尝试了以下...

```
io.of(appDir).on('connection', function (socket) {
  socket.emit('message', 'lol');
}); 
```

但这似乎并没有解决问题。

我在客户端代码方面尝试了许多不同的方法，但我认为这不是根本问题，`http://localhost/appDirectory/socket.io/socket.io.js`也不会起作用。

该应用程序作为虚拟目录运行，并建立在：

```
- node.js 0.10.3 for windows
- iis 7
- iisnode 0.2.4
- express.js 3.0.0rc1  
- jade  
- socket.io 
```

模块“ **express namespace** ”似乎使事情正常进行。

我知道 iisnode 被“*设计*”为作为单独的站点运行，我也知道 express 不喜欢在虚拟目录中，但我很确定这是可能的。

## 有趣的更新！

换行：

```
io = require('socket.io').listen(server); 
```

到：

```
io = require('socket.io').listen(server, { resource: appDir + '/socket.io' }); 
```

导致 iis 工作进程 w3wp.exe 崩溃...如此
处所示[http://i.imgur.com/65RGia3.png?1](http://i.imgur.com/65RGia3.png?1)

但是，该网址`http://localhost/appDirectory/socket.io`似乎可以正常工作。

## 修复此 FYI 的尝试失败：

*   为 iisnode nodeProcessCountPerApplication="1" 添加 web.config 设置

## 可能的解决方案：

如果您遇到同样的问题，我发现这可能会对您有所帮助...
[http://tomasz.janczuk.org/2013/01/hosting-socketio-websocket-apps-in-iis.html](http://tomasz.janczuk.org/2013/01/hosting-socketio-websocket-apps-in-iis.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T20:58:41.653

有点摸不着头脑，但如果您使用的是 Express 3.x，您的问题可能是您使用的是旧的 Express 2.x 语法来连接 Socket.io 和 Express。

有关新的集成方法，请参阅：[https ://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x#socketio-compatibility。](https://github.com/visionmedia/express/wiki/Migrating-from-2.x-to-3.x#socketio-compatibility)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-10T07:35:45.973

看起来你在正确的轨道上。使用以下配置，它适用于我（但不使用 IIS）：

```
// server
io = require('socket.io').listen(server, { resource : '/appDirectory/socket.io' });

// client
<script src="/appDirectory/socket.io/socket.io.js"></script>
...
var socket = io.connect('', { resource: 'appDirectory/socket.io' }); 
```

我想知道为什么您的 IIS 进程崩溃了，您可以将图像发布到其他地方（Dropbox，免费图像托管）吗？