# StackOverflow 问答 13234000-13234999

# r - 填充缺失值

> ID：13234005
> 
> 赞同：4
> 
> 时间：2012-11-05T14:21:10.867
> 
> 标签：r, statistics, missing-data

我有一个这样的数据集

```
 4  6 18 12  4  5
 2  9  0  3 NA 13
11 NA  6  7  7  9 
```

如何使用 R 填充缺失值？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T14:41:29.240

如果您想用固定值（`a`作为您的数据集）替换您的 NA：

```
a[is.na(a)] <- 0 #For instance 
```

如果您想将它们替换为行号和列号的函数值（如您在评论中建议的那样）：

```
#This will replace them by the sum of their row number and their column number:
a[is.na(a)] <- rowSums(which(is.na(a), arr.ind=TRUE))

#This will replace them by their row number:
a[is.na(a)] <- which(is.na(a), arr.ind=TRUE)[,1]

#And this by their column number:
a[is.na(a)] <- which(is.na(a), arr.ind=TRUE)[,2] 
```

# excel - 删除电子表格中行的有效方法

> ID：13234009
> 
> 赞同：1
> 
> 时间：2012-11-05T14:21:25.257
> 
> 标签：excel, vba

有没有比我目前使用的更好的方法来删除 Excel 电子表格中的行？

在电子表格上，我运行一个宏，如果特定单元格中的数字为“0”，则删除一行。

```
Public Sub deleteRowsIfZero(colDelete As Integer)
Dim r As Long
Application.ScreenUpdating = False

For r = Cells(Rows.Count, colDelete).End(xlUp).Row To 1 Step -1
    If Cells(r, colDelete).Value = "0" Then Rows(r).Delete
Next r
Application.ScreenUpdating = True
End Sub 
```

这行得通，但是对于 700 多行的电子表格，它可能会很慢。有没有更有效的方法来做到这一点？

提前感谢您的任何建议。

干杯

诺埃尔

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T17:04:33.520

我会使用一个连续的范围并一次性删除它：

```
Public Sub deleteRowsIfZero(strSeekValue As String)
Dim lngRowsToDelete() As Long
Dim strRowsToDelete() As String
Dim x As Long, y As Long, n As Long, z As Long

On Error GoTo err_

'get the extent of the workbook range
x = Me.UsedRange.Rows.Count

n = -1

'switch off screen updating and calculation
Application.ScreenUpdating = False
Application.Calculation = xlCalculationManual

'starting from row 1, look for the strSeekValue in column A, keep going till x is reached
For y = 1 To x
    If Me.Range("A" & y).Value = strSeekValue Then 'if we find one, pop the row number into the array
        n = n + 1
        ReDim Preserve lngRowsToDelete(0 To n)
        lngRowsToDelete(n) = y
    End If
Next y

'if none were found, don't do the next bit
If n = -1 Then GoTo err_

'create a string of all the rows we found
z = 0
ReDim strRowsToDelete(z)
For y = 0 To n
    strRowsToDelete(z) = strRowsToDelete(z) & lngRowsToDelete(y) & ":" & lngRowsToDelete(y) & ","
    If Len(strRowsToDelete(z)) > 240 Then 'As A.Webb points out, the 255 limit will be a problem here
        strRowsToDelete(z) = Left(strRowsToDelete(z), Len(strRowsToDelete(z)) - 1) 'drop the trailing comma
        z = UBound(strRowsToDelete) + 1 'resize the array
        ReDim Preserve strRowsToDelete(0 To z)
    End If
Next y

For y = z To 0 Step -1
    If Right(strRowsToDelete(z), 1) = "," Then strRowsToDelete(z) = Left(strRowsToDelete(z), Len(strRowsToDelete(z)) - 1)
    'now delete the rows
    Me.Range(strRowsToDelete(y)).EntireRow.Delete
Next y

err_:
'assumes calculation was set to auto
Application.Calculation = xlCalculationAutomatic
If Err Then Debug.Print Err.Description
Application.ScreenUpdating = True
End Sub

'run sub foo
Sub foo()
deleteRowsIfZero "0"
End Sub 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T14:48:28.940

在开始之前关闭屏幕更新和计算，最后恢复这些设置。

请注意，每次删除时都不必要地重新测试行，因为删除会使行向上滑动。`r`因此，您可以在每次删除时递减以进行小优化。

进一步的优化是一次读取所有测试值。每次从/向 Excel/VBA 读取/写入都会产生开销。请参见下面的示例：

```
Dim r As Long, n As Long
Dim testcells As Variant

n = Cells(Rows.count, rowdelete).End(xlUp).Row
testcells = Range(Cells(n, rowdelete), Cells(1, rowdelete)).Value

For r = n To 1 Step -1
    If testcells(r, 1) = 0 Then
        Rows(r).Delete
    End If
Next r 
```

您也可以尝试一次全部删除，看看哪个更快。

```
Dim r As Long, n As Long
Dim testcells As Variant
Dim del As Range

n = Cells(Rows.Count, rowdelete).End(xlUp).Row
testcells = Range(Cells(n, rowdelete), Cells(1, rowdelete)).Value

For r = n To 1 Step -1
    If testcells(r, 1) = 0 Then
        If del Is Nothing Then Set del = Rows(r)
        Set del = Union(del, Rows(r))
    End If
Next r

If Not (del Is Nothing) Then
    del.Delete
End If 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:58:09.457

如果预期的错误很少，则应该更快地找到匹配的单元格并将其删除。D列用于保存要删除的字符。

```
Sub DeleteRowWithCertainValue()

Dim del_char As String

 del_char = "0"

Do
  On Error GoTo ErrorHandler
     Sheets("Sheet1").Range("D:D").Find(What:=del_char, _
        After:=Range("D1"), _
          LookIn:=xlValues, _
            LookAt:=xlWhole, _
           SearchOrder:=xlByColumns, _
          SearchDirection:=xlNext, _
        MatchCase:=False).EntireRow.Delete
Loop

ErrorHandler: Exit Sub

End Sub 
```

# iphone - How to replace method of UIWebView instead restricted subclassing?

> ID：13234010
> 
> 赞同：0
> 
> 时间：2012-11-05T14:21:27.403
> 
> 标签：iphone, ios, ipad, uiwebview, subclassing

Subclassing of UIWebView is restricted by Apple. But I need to replace method `canPerformAction` to the following one:

```
-(BOOL) canPerformAction:(SEL)action withSender:(id)sender {
    if ((action == @selector(Copy:)) || (action == @selector(Paste:))) {
        return YES;
    } else {
        return NO;
    }
} 
```

How to replace this method without subclassing? Thank you a lot for the help!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:31:11.657

To replace a function in a class you can use method swizzling. There's a nice library that does everything for you called [JRSwizzle](http://cocoaobjects.com/jrswizzle/ "JRSwizzle").

```
[[UIWebView class] jr_swizzleMethod:@selector(canPerformAction:withSender:) withMethod:@selector(myCanPerformAction:withSender:) error:nil]; 
```

The all you need to do is to create a category on UIWebView that implements `myCanPerformAction:withSender:`

```
-(BOOL) myCanPerformAction:(SEL)action withSender:(id)sender {
    if ((action == @selector(Copy:)) || (action == @selector(Paste:))) {
        return YES;
    } else {
        return NO;
    }
} 
```

Not sure if this is good practice though...

# xcode - 合并两个分支svn Xcode？

> ID：13234011
> 
> 赞同：5
> 
> 时间：2012-11-05T14:21:31.310
> 
> 标签：xcode, svn

当我尝试在 Xcode 中合并两个分支时，当前分支为空，合并对话框文本如下：选择要合并到当前分支的分支工作副本的当前分支为“（空）”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-26T12:30:02.960

您可以查看一些来源，我不知道它们是否会有所帮助：

[如何合并两个 SVN 分支？](https://stackoverflow.com/questions/1371438/how-do-i-merge-two-svn-branches)

[http://blog.e-shell.org/192](http://blog.e-shell.org/192)

和

[http://blog.assembla.com/assemblablog/tabid/12618/bid/58122/It-s-Time-to-Fix-Subversion-Merge.aspx](http://blog.assembla.com/assemblablog/tabid/12618/bid/58122/It-s-Time-to-Fix-Subversion-Merge.aspx)

就个人而言，我不再是 SVN 的忠实粉丝，但我想这是一个偏好问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-18T14:14:18.650

也许您想要的是将两个现有分支直接合并到一个新的工作副本中并创建第三个合并分支。那是你要找的吗？

无论如何，这不是那样工作的。首先，您必须从工作副本运行命令（或调用对话框）。换句话说，您必须签出第一个分支或主干修订版。

那么您可能会对所谓的“2-URL 合并”感兴趣，详情请参阅`svn help merge`。

> ```
>  - 2-URL Merge Example -
> 
>  Two features have been developed on separate branches called 'foo' and
>  'bar'. It has since become clear that 'bar' should be combined with
>  the 'foo' branch for further development before reintegration.
> 
>  Although both feature branches originate from trunk, they are not
>  directly related -- one is not a direct copy of the other. A 2-URL
>  merge is necessary. 
> ```

# java - Web服务的字符串解密

> ID：13234013
> 
> 赞同：0
> 
> 时间：2012-11-05T14:21:32.857
> 
> 标签：java, web-services, security, encryption, md5

我有一个 Web 服务 (Java)，它在所有情况下都需要密码。但是密码必须安全地交给我。是否有适用于所有平台的标准方法-> java 加密/解密。如何解密可能来自随机平台（php、.net、iPhone）的字符串。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:27:50.940

通常密码使用某种算法加密（MD5）并与服务交换......您不必解密密码......就像您创建密码的MD5哈希字符串，密钥是它自己的实际密码。

因此，在服务器上，您将存储实际密码的 MD5 哈希，每个客户端将创建给定密码的 MD5 哈希字符串，最后您将验证两个哈希字符串以进行密码验证...

你可以很容易地在网上找到 java 代码来创建 MD5 哈希......一个例子是

```
public static String convertStringToMD5Hash(String string) {
    byte[] hash;

    try {
        hash = MessageDigest.getInstance("MD5").digest(string.getBytes("UTF-8"));
    } catch (NoSuchAlgorithmException e) {
        throw new RuntimeException("MD5 not supported?", e);
    } catch (UnsupportedEncodingException e) {
        throw new RuntimeException("UTF-8 not supported?", e);
    }

    StringBuilder hex = new StringBuilder(hash.length * 2);

    for (byte b : hash) {
        int i = (b & 0xFF);
        if (i < 0x10)
            hex.append('0');
        hex.append(Integer.toHexString(i));
    }

    return hex.toString();
} 
```

> 免责声明：代码在我的机器上工作，可能需要改进/优化以供生产使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:53:23.837

使用 WS-Security 用户名令牌，确保它可以跨平台处理。

[http://wso2.org/library/240](http://wso2.org/library/240)（城墙）

或者

使用 Apache WSS4J

[http://www.ibm.com/developerworks/webservices/library/ws-Axis2/index.html](http://www.ibm.com/developerworks/webservices/library/ws-Axis2/index.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T18:41:45.253

就像@CodesInChaos 在他的评论中所说，使用 SSL/TLS。如果您真的赞扬安全性，请不要考虑任何其他选择。如果我们想在这方面发挥创造力，那么，你承担风险......

# c++ - 通过 C++ 在控制台中的 Unicode 字符

> ID：13234019
> 
> 赞同：2
> 
> 时间：2012-11-05T14:21:48.890
> 
> 标签：c++, unicode, console

视窗 8 x64；视觉工作室 2012；

我通过书本学习 C++。在这个论坛上，我发现[了许多](https://stackoverflow.com/search?q=Unicode%20console%20C%2b%2b&submit=search)关于通过 C++ 读写 Unicode 字符串的主题。但是这个主题没有标记为已解决（？？？）。C++ 中的问题真的很大吗？我尝试了不同的变体 - 它们对我不起作用：

```
#include<iostream>
#include<Windows.h>
#include <io.h>
#include <fcntl.h>
using namespace std;

int main() {
    // variant 1:
    wcout << L"Hello World!" << endl; // displayed
    wcout << L"Привет Мир!" << endl;// not displayed

    //**********************************************

    // variant 2:
    SetConsoleOutputCP(CP_UTF8);
    wchar_t s[] = L"Hello World (2)!";
    int bufferSize = WideCharToMultiByte(CP_UTF8, 0, 
        s, -1, NULL, 0, NULL, NULL);
    char* m = new char[bufferSize]; 
    WideCharToMultiByte(CP_UTF8, 0, s, -1, m, 
        bufferSize, NULL, NULL);

    wprintf(L"%S", m); // valid output
    wcout << endl;
    printf("%s", m); // valid output
    wcout << endl;

    wchar_t s2[] = L"Привет мир (2)!";
    int bufferSize2 = WideCharToMultiByte(CP_UTF8, 0, 
        s2, -1, NULL, 0, NULL, NULL);
    char* m2 = new char[bufferSize2]; 
    WideCharToMultiByte(CP_UTF8, 0, s2, -1, m2, 
        bufferSize2, NULL, NULL);

    wprintf(L"%S", m2); // invalid output
    wcout << endl;
    printf("%s", m2); // invalid output
    wcout << endl;
    //**********************************************

    // variant 3 (not working):
    _setmode(_fileno(stdout), _O_U16TEXT);
    wcout << L"Testing unicode -- English -- Ελληνικά"
        << "-- Español." << endl;

    return 0;
} 
```

但它仅适用于英文字符...屏幕：

![在此处输入图像描述](../Images/b4f3a9e2307b58a04d406ccc9ccbdb8c.png)

如何通过 C++ 解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:29:29.543

解决方法是执行

> chcp 65001

在`cmd.exe`执行您的程序之前（我不知道如何以编程方式执行此操作）。65001 是 UTF8 编码的神奇值。其他可用代码页的列表在`chcp`这里：[http](http://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/chcp.mspx?mfr=true) ://www.microsoft.com/resources/documentation/windows/xp/all/proddocs/en-us/chcp.mspx?mfr=true 。Cyrillic CP1251 的其他有趣值是 855。

并且不要忘记将控制台字体切换为 Lucida（默认字体不适用于 UTf-8）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T15:02:54.557

我发现了更简单的变体（不更改代码页和字体）：

```
#include<iostream>
#include<windows.h>

using namespace std;
int main()
{
    cout<<"Привет мир (1)!" << endl; // invalid output

    SetConsoleCP(GetACP());
    SetConsoleOutputCP(GetACP());

    cout<<"Привет мир (2)!" << endl; // valid output!

    return 0;
} 
```

也许它不仅对我感兴趣。

PS 但是...它在 CMD.EXE 中有效，但在 POWERSHELL.EXE 中无效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-07T13:55:39.160

我找到了更清晰的决定然后`chcp`使用命令：

```
// Getting the readable Cyrillic chars in the console window...
setlocale(LC_ALL, "Russian");
wcout << endl << L"Добро "; // UNICODE
cout << "пожаловать!" << endl; // ANSI 
```

对于这两种情况，我都会得到可读的输出。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-11-05T14:28:47.907

哦~~原谅我，下面是C。

在 C++ 中，您可以执行以下操作：

```
#include <iostream>
#include <locale>
using namespace std;
int main(int argc, char *argv[])
{
    locale::global(std::locale(""));
    wcout << L"Привет Мир!" << endl;
    return 0;
} 
```

* * *

```
#include <locale.h>

setlocale(LC_ALL,NULL); 
```

默认设置为 (LC_ALL,"C")。所以不能显示ASCII码以外的字符

# python - 如何保存多对多字段？

> ID：13234023
> 
> 赞同：0
> 
> 时间：2012-11-05T14:22:07.080
> 
> 标签：python, django, django-models, django-admin

我要数标签。我有帖子模型和标签模型，并且帖子模型有很多标签字段。当我想添加新帖子的同时我为 post 添加标签时，它必须增加标签计数。

我的帖子和标签模型：

```
class Post(models.Model):

    tags = models.ManyToManyField(Tag,blank=True,null=True,verbose_name=_('tags'))

    def save(self)
       super(Post, self).save()
       for i in self.tags.all():
       i.save() 

class Tag(models.Model):

    name=models.CharField(max_length=30,verbose_name=_('name'))
    count = models.IntegerField(blank=True,null=True,default=0)
    slug = models.SlugField(blank=True,null=True)

    def save(self):
       self.slug = slugify(self.name.upper())
       self.count = Post.objects.filter(tags__name=self.name).count()
       super(Tag, self).save() 
```

当我添加新帖子时，我查看标签模型并看到计数没有改变，但是当我按下标签管理中的保存按钮时，我看到了实际计数。但是，当我在不按标签中的保存按钮的情况下查找标签管理员时，我想查看实际计数。

我也希望当我编辑帖子时它不应该再次增加标签数量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:11:13.900

您可以执行以下操作：

```
class Post(models.Model):

    tags = models.ManyToManyField(Tag,blank=True,null=True,verbose_name=_('tags'))

    def save(self)
        super(Post, self).save()
        for tag in self.tags :
            tag.count = tag.post_set.count()
            tag.save() 
```

或者，不是将计数值保存到字段中，而是在需要时进行查找：

```
tag.post_set.count() 
```

您可以添加一个函数来`Tag`轻松完成此操作：

```
def count(self) :
    return self.post_set.count() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:24:42.230

我会使用[m2m_changed 信号](https://docs.djangoproject.com/en/dev/ref/signals/#m2m-changed)来解决这个问题。

# java - 如何使用 JavaMail 的 MimeMultipart 覆盖默认的唯一边界字符串并创建我们自己的边界？

> ID：13234024
> 
> 赞同：4
> 
> 时间：2012-11-05T14:22:11.033
> 
> 标签：java, jakarta-mail, mime-types, mime-message

我有一个我使用的网络应用程序，它需要一个特定的边界字符串，如（“公司 mime 边界”）。

当我这样做时，我没有找到一种方法来覆盖 MimeMultipart 的默认行为

`Multipart mp = new MimeMultipart();`

构造函数始终创建唯一的边界字符串，我想覆盖此行为以拥有自己的边界字符串，但由于没有找到任何 API，因此无法这样做。

即使我将它设置为内容类型，它也不起作用并始终创建一个唯一的边界字符串，因为 MimeMultipart 正在创建一个默认字符串。

`mimeMsg.setHeader("Content-Type","multipart/mixed;boundary="company mime boundary");`

任何人都可以请建议/帮助我。

如何覆盖此默认行为？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:45:04.537

从[javax.mail.Multipart](http://docs.oracle.com/javaee/6/api/javax/mail/internet/MimeMultipart.html)：

> `mail.mime.multipart.ignoreexistingboundaryparameter`System 属性可以设置为 true 以导致忽略任何边界，而是在消息中搜索边界线

尝试将此属性设置为`true`，然后添加您自己的使用

```
mimeMsg.setHeader("Content-Type",""); 
```

我还没有实现它，但我相信它可以工作

**更新**

尝试对 MimeMultipart 类进行子类化并覆盖`getBoundaryMethod()`. 请参阅下面的一些示例代码：

```
import javax.activation.DataSource;
import javax.mail.MessagingException;
import javax.mail.internet.ContentType;
import javax.mail.internet.MimeMultipart;
public class MyMimeMultyPart extends MimeMultipart {
    /**
     * DataSource that provides our InputStream.
     */
    protected DataSource ds;

    /**
     * Indicates if the data has been parsed.
     */
    protected boolean parsed = true;

    private ContentType type;

    public MyMimeMultyPart(DataSource dataSource) throws MessagingException {
        super(dataSource);
    }

    public MyMimeMultyPart(String subtype) {
        type = new ContentType("multipart", subtype, null);
        type.setParameter("boundary", getBoundary());
        contentType = type.toString();
    }

    public MyMimeMultyPart() {
        super();
    }

    private static int part;

    private synchronized static String getBoundary() {
        int i;
        synchronized (MimeMultipart.class) {
            i = part++;
        }
        StringBuffer buf = new StringBuffer(64);
        buf.append("----=_Part_").append(i).append('_').append((new Object()).hashCode()).append('.').append(System.currentTimeMillis());
        return buf.toString();
    }
} 
```

# mysql - MySQL表结构和设计效率

> ID：13234030
> 
> 赞同：0
> 
> 时间：2012-11-05T14:22:36.380
> 
> 标签：mysql, database

我目前正在使用`MyphpAdmin`. 总共有 9 个表被构造成相互之间的桥梁。我不确定我们的表结构是否是最好和最有效的。我正在运行一个只显示`class_caption`、`class_name`、`course_name`和的查询`class_description`。如何创建一个 MySQL 查询来显示所有桥接在一起的表（除了`event`）？此外，应该进行哪些修改以使此表结构更有效？

**基本查询**

```
SELECT  class_name, class_caption, class_credit_hours, class_description
FROM class 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:28:39.083

您可以“左连接”表到表。但说实话，这真的是你想要的吗？所有表？

无论如何，请确保每个 tabke 都有一个唯一的 id，并且每个需要另一个 tabke 中的信息的 tabke 都会引用它。

您可以执行“选择 a. *, b.* from tablea a, tableb b where a.id=b.idfroma”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:28:51.833

*   首先使它们标准化。很难看懂你的照片。
*   创建选择语句 - 使用[JOIN](http://dev.mysql.com/doc/refman/5.0/en/join.html)并为您的查询找到合适的语句。
*   使用[EXPLAIN](http://dev.mysql.com/doc/refman/5.0/en/explain.html)查看引擎盖下发生了什么。
*   确保您具有适当的索引。

顺便看看[参照完整性](http://en.wikipedia.org/wiki/Referential_integrity)

# regex - Excel VBA 正则表达式删除前导数字、句点和空格？

> ID：13234031
> 
> 赞同：1
> 
> 时间：2012-11-05T14:22:39.923
> 
> 标签：regex, excel, vba

我有一张工作表，我使用 Excel VBA 宏在单击按钮时使用相关信息自动填充所有工作表页眉（不是列标题）。此宏使用 wSheet.Name 填充标题标题。但是，wSheet.Name 通常包含我不想出现在标题中的前导数字、句点和空格。

请注意以下示例工作表名称：

```
Cover Page
1a. Test Page
1b. Sample Page
2\. Another Test Page
3\. Yet Another Test Page
4\. Almost the Last Example Page
998\.  Last Example Page 
```

我想使用正则表达式删除这些前导数字、句点和空格，但我不确定如何在 Excel 中使用 VBA 对其进行编码。我希望它尽可能灵活。这是我希望工作表名称显示方式的示例：

```
Cover Page
Test Page
Sample Page
Another Test Page
Yet Another Test Page
Almost the Last Example Page
Last Example Page 
```

这是我现有的填充标题的代码：

```
Sub FillHeaders()
'
' Auto_Fill_Project_Name Macro
'
For Each wSheet In ActiveWorkbook.Worksheets
    If wSheet.Name <> "Cover Page" Then
        wSheet.PageSetup.CenterHeader = _
            "&16&KFF0000" & ActiveSheet.Range("J1") & "&10&K000000 &16" & " " & _
            wSheet.Name & Chr(13) & "&10 &11 Revision Date: "
    End If
    Next wSheet
'
End Sub 
```

我该如何修改它以实现我的目标？

谢谢！

编辑——我采取了以下方法：

```
Function remleaddig(str As String)
    Set regEx = CreateObject("VBScript.RegExp")
    regEx.Pattern = "^\S*\."
    str = regEx.Replace(str, "")
    remleaddig = Trim(str)
End Function 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T22:32:41.520

**更新：-添加`UDF`**

```
Function StripChars(strIn As String) As String
Dim objRegex As Object
Set objRegex = CreateObject("vbscript.regexp")
 With objRegex
 .Pattern = "^.+\.\s+"
.ignorecase = True
StripChars = .Replace(strIn, vbNullString)
End With
End Function 
```

**初始帖子`**

我会将正则[表达式](/questions/tagged/regexp "显示标记为“正则表达式”的问题")与变体数组结合起来以减少代码运行时间。下面的代码使用

1.  后期绑定设置`regexp`
2.  将 A 列中的值`ActiveSheet`读入变量数组`X`（请注意，代码将处理 2D 范围，即您可以用于`X = Range([a1], Cells(Rows.Count, "B").End(xlUp)).Value2`处理 A 列和 B 列
3.  去除`regexp`不需要的字符 - 如果它出现在您要保留的文本之前，它将处理多个空格
4.  清理后的文本被转储到从 开始的活动工作表中`C1`。更改此行以移动转储 - 您可以使其转储回从`A1`.`[c1].Resize(UBound(X, 1), UBound(X, 2)).Value2 = X`

![在此处输入图像描述](../Images/e26f8df3ae7f0b40eab66213e94fd4fb.png)

**代码**

```
Sub QuickUpdate()
Dim X()
Dim objRegex As Object
Dim lngRow As Long
Dim lngCol As Long

X = Range([a1], Cells(Rows.Count, "A").End(xlUp)).Value2
Set objRegex = CreateObject("vbscript.regexp")
 With objRegex
 .Pattern = "^.+\.\s+"
.ignorecase = True
For lngRow = 1 To UBound(X, 1)
For lngCol = 1 To UBound(X, 2)
X(lngRow, lngCol) = .Replace(X(lngRow, lngCol), vbNullString)
Next lngCol
Next lngRow
End With

[c1].Resize(UBound(X, 1), UBound(X, 2)).Value2 = X

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:36:43.907

好吧，您实际上可以通过 VBScript 的 RegEx 对象使用正则表达式。有关示例，请参见[https://stackoverflow.com/a/13041710/1756702 。](https://stackoverflow.com/a/13041710/1756702)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T15:40:28.313

我会详细说明我的评论。

这需要参考`Microsoft VBScript Regular Expressions 5.5`（或您机器上的任何数字）

```
Dim r As RegExp
Set r = New RegExp
r.Pattern = "^\S*\. "

Dim c As Range, rng As Range
Set rng = Range("A1:A7")   ' <-- Set this to your range
For Each c In rng
    c.Value = r.Replace(c.Value, "")
Next c 
```

如果所有文本都在一个单元格中，则将其更改为

```
Dim r As RegExp
Set r = New RegExp
r.Pattern = "^\S*\. "
r.MultiLine = True
r.Global = True

Dim c As Range
Set c = Range("J1")
    c.Value = r.Replace(c.Value, "") '<--or place the result where ever you want 
```

正则表达式解释

*   `"^` 这表示指定的模式必须从字符串的开头开始。我们不想匹配标题中间存在的数字。
*   `\S` 这匹配除空格 ([^a-zA-Z0-9]) 之外的所有内容。即它将匹配字母和数字。
*   `*` 这匹配 0 个或多个先前的模式
*   `\.` 这匹配一个句点（句点必须用 a 转义，`\`因为它`.`本身意味着它想要匹配前一个模式的一个或多个。
*   `"` 这匹配一个空格。

# browser - 浏览器：允许使用不同帐户登录同一网站的工具

> ID：13234034
> 
> 赞同：0
> 
> 时间：2012-11-05T14:22:44.413
> 
> 标签：browser, load-testing

我写了一些与 User Login 相关的代码。

我需要测试我的网站在同时使用多个帐户同时登录时的行为。

到目前为止，我一直在手动测试这个，方法是打开多个选项卡并使用不同的帐户登录。

例如

```
http:localhost:8080/logon   USERNAME  PWD
http:localhost:8080/logon  USERNAME  PWD
http:localhost:8080/logon  USERNAME  PWD
http:localhost:8080/logon  USERNAME  PWD 
```

有什么办法可以自动化这个，我的意思是任何允许使用不同帐户登录的浏览器插件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:00:35.263

是的，您正在寻找“[网络负载测试软件](https://www.google.com/#hl=en&tbo=d&output=search&sclient=psy-ab&q=web+load+testing+software&oq=web+load+testing+software&gs_l=hp.3..0j0i5j0i5i30j0i8i30.997.997.0.2108.1.1.0.0.0.0.132.132.0j1.1.0.les;..0.0...1c.1.0YhCGkmNdtY&pbx=1&bav=on.2,or.r_gc.r_pw.r_cp.r_qf.&fp=c2a7c58b272ed651&bpcl=37189454&biw=1414&bih=1162)”。谷歌会给你很多选择。

我建议您从易于使用的东西开始，例如 Web Performance Load Tester。[LITE 版本](https://www.webperformance.com/load-testing/free-load-tester-lite.html)是免费的，可能可以满足您的大部分需求。免责声明：我是该产品的首席工程师。

# javascript - 预处理 Highstock 图表选项

> ID：13234038
> 
> 赞同：0
> 
> 时间：2012-11-05T14:22:58.780
> 
> 标签：javascript, highcharts, highstock

我正在尝试预处理 Highstock 图表的选项。我用 firebug 进行了一些调试，以检查选项是否设置正确。但是系列定义有问题。当我从系列中删除 [] 时，该选项将被设置好，但图表不再呈现。如果我将 [] 保留在系列中，则图表会显示，但其中没有定义。有谁知道我错过了什么？

数据阵列正确传输。（但未在代码中显示）它包含 2 个值的数组。例如：[1336168800000, 22]

```
options = {
    chart : {
        renderTo : 'container'
    },
    rangeSelector: {
        selected: 2
    },
    title : {
        text : 'Diary'
    },
    series : [{
        name : 'aaapl',
        lineWidth : 0,
        data: [],
        marker : {
            enabled : true,
            radius : 2
        },
        tooltip : {
            valueDecimals : 2
        }
    }]
};
    chart1 = new Highcharts.StockChart(options);
    chart1.redraw(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:59:20.253

我确实看到您创建图表的方式存在一些错误。

*   您没有正确设置[**LineWidth**](http://api.highcharts.com/highcharts#plotOptions.line.lineWidth)和[**标记**](http://api.highcharts.com/highcharts#plotOptions.line.marker)。他们实际上需要属于[**plotOptions**](http://api.highcharts.com/highcharts#plotOptions)然后是图表类型。
*   此外，[**工具提示**](http://api.highcharts.com/highcharts#tooltip)不应嵌套在系列对象内。

# c# - 重用格式化对象以进行显示的代码

> ID：13234040
> 
> 赞同：0
> 
> 时间：2012-11-05T14:23:05.350
> 
> 标签：c#, .net, formatting

我有一个作为类实例的对象列表。我想格式化它们以供显示，并且我希望格式化显示的代码可重用。因此，它可以在 .aspx 页面中以及将数据导出到 excel 时使用。

我开始创建一个函数，该函数返回一个匿名类对象，该类的所有字段都已格式化。

```
public Object GetForDisplay()
        {
            return new
            {
                RecordNum,
                ID,
                Value = Value.HasValue?  Value.Value.ToString("0.##"): "-",
                ...
            };
        } 
```

但这不允许我在需要对它们进行细微更改时访问这些属性。

我的下一个尝试是返回`Dictionary<String,Object>`包含所有字段的 a（字符串是字段名称）。

```
public Dictionary<String, Object> GetForDisplay()
        {
            return new Dictionary<String, Object>
            {
                {"RecordNum", RecordNum},
                { "ID", ID },
                { "Value ",  Value.HasValue?  Value.Value.ToString("0.##"): "-"},
             }
} 
```

我想知道是否有更好的方法来做到这一点？你会创建一个新类来保存格式化数据吗？

# iphone - 空的 sortDescriptors 和表视图部分

> ID：13234042
> 
> 赞同：0
> 
> 时间：2012-11-05T14:23:11.217
> 
> 标签：iphone, uitableview, nsfetchedresultscontroller, nssortdescriptor

表格部分和 sortDescriptors 中有一些东西让我发疯。任何帮助都感激不尽 ;）

我正在寻找的只是在每个 self.fetchedResultsController.fetchedObjects 部分的底部显示一个“添加”行。我正在使用 sectionNameKeyPath 在我的表格视图中显示部分。到这里为止，一切都很完美。我已经在我的应用程序的其他部分实现了这种技术并且效果很好。

但是，当 FRC 没有返回数据并且核心数据没有返回任何实体时，就会出现问题。如果我尝试添加我的第一个托管对象，则应用程序会因以下错误而中断：

> 更新后表视图中包含的节数（1）必须等于更新前表视图中包含的节数（1），加上或减去插入或删除的节数（1插入，0已删除）。与用户信息（空）

到目前为止，这是我的代码：

```
 - (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    if ([self.fetchedResultsController.fetchedObjects count] == 0) {
        return 1;
    }
   return [[self.fetchedResultsController sections] count];
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.

    if ([self.fetchedResultsController.fetchedObjects count] == 0) {
        return 1;
    }
    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:section];

    return [sectionInfo numberOfObjects] + 1;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    if ([self.fetchedResultsController.fetchedObjects count] == 0 ) {

        static NSString *identificadorCelda2 = @"CeldaNuevoGasto";
        UITableViewCell *celda = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:identificadorCelda2];
        if (celda == nil) {
            celda = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:identificadorCelda2];
        }
        return celda;
    }

    id <NSFetchedResultsSectionInfo> sectionInfo = [[self.fetchedResultsController sections] objectAtIndex:indexPath.section];

    NSInteger nsection = [sectionInfo numberOfObjects];

    if (indexPath.row == nsection) {

        static NSString *identificadorCelda2 = @"CeldaNuevoGasto";
        UITableViewCell *celda = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:identificadorCelda2];
        if (celda == nil) {
            celda = (UITableViewCell *)[tableView dequeueReusableCellWithIdentifier:identificadorCelda2];
        }        
        return celda;
    }

    static NSString *CellIdentifier = @"CeldaGasto";

    CeldaGastos *cell = (CeldaGastos *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = (CeldaGastos *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    } ..... 
```

肯定我做错了什么，但我想不通。我是否还需要修改 NSFetchedResultsController 委托方法以响应添加？或者它更容易。谢谢 ;）

**更新**

```
 - (void)controller:(NSFetchedResultsController *)controller didChangeSection:(id <NSFetchedResultsSectionInfo>)sectionInfo
           atIndex:(NSUInteger)sectionIndex forChangeType:(NSFetchedResultsChangeType)type
{

    NSInteger nsection = [self.fetchedResultsController.sections count];
    switch(type) {
        case NSFetchedResultsChangeInsert:
            if (nsection == 1 && [sectionInfo numberOfObjects] == 1) {
                    [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];

            }
            [self.tableView insertSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];
            break;

        case NSFetchedResultsChangeDelete:

            [self.tableView deleteSections:[NSIndexSet indexSetWithIndex:sectionIndex] withRowAnimation:UITableViewRowAnimationFade];

            if (!nsection)
                [self.tableView insertSections:[NSIndexSet indexSetWithIndex:0] withRowAnimation:UITableViewRowAnimationFade];
            break;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:07:29.657

如果我正确理解您的情况，那么您确实也必须更改 NSFetchedResultsController 委托方法。

`-insertSections:withRowAnimation:`您是否使用NSFetchedResultsController 的一些委托回调中的表格视图方法将新部分插入表格视图？

我不确切知道您的 NSFetchedResultsControllerDelegate 的实现是什么，但例如逐步考虑这种情况：

1.  最初，您没有获取任何实体，并且您的`-numberOfSectionsInTableView:`方法为您的“添加”行返回 1。

2.  在您插入一个实体并且 NSFetchedResultsController 的委托接收到它的`-controller:didChangeSection:atIndex:forChangeType:`回调后，您可以在其中使用`-insertSections:withRowAnimation:`

3.  表视图通过调用`-numberOfSectionsInTableView:`期望它重新运行增加 1 的值的方法来询问其数据源（因为您要插入 1 个新部分）。但是该方法仍然返回 1，因为不再考虑“添加”行。

这将导致您遇到的错误。

我想`-deleteSections:withRowAnimation:`在不再需要时调用删除“添加”行将解决您的问题。

# mapkit - 在原生 App 中使用地图

> ID：13234043
> 
> 赞同：0
> 
> 时间：2012-11-05T14:23:13.603
> 
> 标签：mapkit, cordova

使用 apache cordova 2.1 构建 ios 应用程序。建筑和造型都很好，但地图却不行。

我找到了一个地图插件，但根本无法让它工作： [https ://github.com/phonegap/phonegap-plugins/tree/master/iOS/MapKit](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/MapKit)

我还找到了一个示例 html 文件，但可以： [https ://github.com/phonegap/phonegap-plugins/tree/master/iPhone/MapKitPlug/example](https://github.com/phonegap/phonegap-plugins/tree/master/iPhone/MapKitPlug/example)

1 / 所以我将 MapKit 框架添加到 xcode 中，这非常简单： [http ://blog.thinketg.com/blog/david-brainer-banker/xcode-4-tips-adding-frameworks-to-your-project](http://blog.thinketg.com/blog/david-brainer-banker/xcode-4-tips-adding-frameworks-to-your-project)

2/ 添加了 .m 和 .h 文件

3/ 添加 .js 文件并将其链接到我的 index.html

4/ 复制了上面的示例 html。

5/ 按照说明将 Mapkit 添加到 .plist 文件中

当我尝试运行地图时，出现以下错误：

```
2012-11-05 14:21:29.505 sawdaysApp[25398:c07] Multi-tasking -> Device: YES, App: YES
2012-11-05 14:21:30.895 sawdaysApp[25398:c07] CDVPlugin class MapKitView (pluginName: MapKitView) does not exist.
2012-11-05 14:21:30.895 sawdaysApp[25398:c07] ERROR: Plugin 'MapKitView' not found, or is not a CDVPlugin. Check your plugin mapping in Cordova.plist.
2012-11-05 14:21:30.896 sawdaysApp[25398:c07] FAILED pluginJSON = [null,"MapKitView","showMap",[]]
2012-11-05 14:21:30.896 sawdaysApp[25398:c07] CDVPlugin class MapKitView (pluginName: MapKitView) does not exist.
2012-11-05 14:21:30.896 sawdaysApp[25398:c07] ERROR: Plugin 'MapKitView' not found, or is not a CDVPlugin. Check your plugin mapping in Cordova.plist.
2012-11-05 14:21:30.897 sawdaysApp[25398:c07] FAILED pluginJSON = [null,"MapKitView","setMapData",[{"diameter":1000,"offsetTop":25,"lon":-123.104446,"buttonCallback":"cbMapCallback","lat":49.281467999999997,"height":360,"atBottom":true}]] 
```

我假设错误出在 CDVPluggin 中的 MapKitView 上，但真的不确定。

有没有人有这方面的经验并成功了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T15:24:54.943

这行得通。终于 ：）

1 - 按照本指南启动应用程序[http://docs.phonegap.com/en/2.1.0/guide_getting-started_ios_index.md.html](http://docs.phonegap.com/en/2.1.0/guide_getting-started_ios_index.md.html)

2 - 在 plugins 文件夹和 www 文件夹中的 .js 文件中下载并添加 mapkit 插件本机文件（所有这些文件）。[https://github.com/phonegap/phonegap-plugins/tree/master/iOS/MapKit](https://github.com/phonegap/phonegap-plugins/tree/master/iOS/MapKit)。确保将插件文件夹拖到 xcode 中的插件文件夹，否则应用程序将无法正确链接文件。

3 - Whitelist * 将所有域列入白名单并将插件引用添加到 Cordova.plist MapKitView 作为值和键

4 - 下载并包含在 sawdaysTestApp/pluggins 文件夹 JSONKit.h 和 JSONKit.m [https://github.com/johnezang/JSONKit](https://github.com/johnezang/JSONKit)

5 - 更改 mapkit.h 和 .m

```
#ifdef CORDOVA_FRAMEWORK
#import <Cordova/CDVPlugin.h>
#else
#import "CDVPlugin.h"
#endif

to

#import <Cordova/CDVPlugin.h> 
```

和

更改 mapkit.m

```
from

#ifdef CORDOVA_FRAMEWORK
// PhoneGap >= 1.2.0
#import <Cordova/JSONKit.h>
#else
// https://github.com/johnezang/JSONKit
#import "JSONKit.h"
#endif

to

    #import "JSONKit.h" 
```

1.  [从https://github.com/phonegap/phonegap-plugins/blob/master/iPhone/MapKitPlug/example/index.html](https://github.com/phonegap/phonegap-plugins/blob/master/iPhone/MapKitPlug/example/index.html)获取示例。将整个示例复制并粘贴到 index.html 中。

7 - 更改 index.html

```
<script type="text/javascript" charset="utf-8" src="phonegap.js"></script>
<script type="text/javascript" charset="utf-8" src="MapKitPlug.js"></script> 
```

到//

```
<script type="text/javascript" src="cordova-2.1.0.js"></script>
<script type="text/javascript" charset="utf-8" src="MapKit.js"></script> 
```

8 - 运行模拟器。单击显示地图按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:23:16.557

我只想补充两点：

1，从 Cordova 2.3.0 开始的文件名

```
Cordova.plist 
```

就是现在

```
yourProject-Info.plist 
```

*yourProject*就是您的项目名称。

2，我发现您仍然需要通过执行以下操作“将二进制文件与库链接”：

*   点击你的项目
*   选择构建阶段
*   单击将二进制文件与库链接上的箭头
*   点击添加
*   搜索 MapKit.framework 并单击添加

# facebook - Facebook 照片上传有效，但我必须允许相册中的照片

> ID：13234044
> 
> 赞同：0
> 
> 时间：2012-11-05T14:23:17.840
> 
> 标签：facebook, facebook-graph-api, facebook-php-sdk

因此，使用 PHP SDK 将照片上传到 Facebook 是可行的。
但是当用户将它上传到自己的相册中时，他首先必须去 Facebook 并按`allow`，然后照片才会显示在 Facebook 上。

有没有办法确保它一步完成（上传照片），而不是 2 步（1\. 上传照片，2\. 允许照片）？

我正在使用以下权限：
-> `publish_stream`，
-> `photo_upload`。

并且`setFileUpload`开启`true`。

我希望你能帮助我，所以不会有愤怒的用户，因为他们认为上传不起作用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:08:07.850

好的，这是在评论中发现的，通过 API 上传的照片需要确认通常意味着以下两种情况之一：

*   你没有`user_photos`权限
*   您正在上传到比用户为您的应用选择的公开可见度更高的相册 - 例如，如果用户选择“朋友”作为应用的最大可见度，并且您尝试上传到公开可见的现有相册，用户需要批准每张照片，否则您将覆盖他们为应用选择的隐私

# .net - 如何通过单击另一个 xps 文档中的链接来打开 xps 文档

> ID：13234045
> 
> 赞同：2
> 
> 时间：2012-11-05T14:23:17.543
> 
> 标签：.net, wpf

我正在为某些应用程序编写帮助系统。此帮助系统适用于 xps 文档。我的程序显示带有`documentviewer`. xps 文件应该链接到另一个 xps。当用户按下链接时，`documentviewer`应该显示另一个 xps 文档。我尝试使用谷歌，但我没有找到任何东西。你知道我该怎么做吗？

# android - 对数据库进行一些更改时，Android 应用程序崩溃

> ID：13234048
> 
> 赞同：6
> 
> 时间：2012-11-05T14:23:29.883
> 
> 标签：android

我开发了一个由数据库组成的 android 应用程序。当我将它安装在移动设备上时，它第一次运行良好。当我对数据库进行一些更改并再次安装它而不卸载以前安装的版本时，它会崩溃。

注意：我不想卸载以前的版本，因为我想保留以前存储的数据

有什么建议的朋友吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:39:14.240

更改数据库结构时将数据库版本号增加 1。（即添加新列、删除现有列、更改列的数据类型、更改列名等...）。

并在您的数据库助手类的 onUpgrade() 方法中放入两行以下。

```
db.execSQL("DROP TABLE IF EXISTS your_table_name_goes_here");
onCreate(db); 
```

每次它检查数据库当前版本号。如果发现当前数据库版本与早期版本不匹配，则只需执行 onUpgrade() 方法来升级数据库。因此，我们删除所有表并再次创建一个新表。因此，现在您可以在使用 db 时添加/删除“n”个列。您所要做的就是将版本号增加 1 并在您更改数据库结构时执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-03T20:28:50.740

当您创建数据库时，您可能会使用以下构造函数：

```
public TimePointsSQLiteHelper(Context context, String name,
                           CursorFactory factory, int version) {
    super(context, dbName, factory, dbVersion);
}

private TimePointsSQLiteHelper(Context context) {
    super(context, dbName, null, dbVersion);
} 
```

如您所见，有一个变量`dbVersion`，这是您指示数据库版本以避免您遇到的问题的变量。作为建议，使用最终的静态 int 变量来旧数据库的版本/编号，以便您可以轻松更改它。例如：

```
public final static int dbVersion = 1; 
```

然后您应该覆盖`onUpgrade(...)`和/或`onDowngrade(...)`以便将更改应用到您当前的应用程序和数据。

最简单和最快的方法是提到的@SANTHOSH，只需删除所有表并再次创建它们：

```
db.execSQL("DROP TABLE IF EXISTS your_table_name");
onCreate(db); 
```

请注意，使用此解决方案**，您将丢失**保存在数据库中的当前数据。如果您想保留它，您应该添加更多逻辑`onUpgrade`并将数据从一个版本的数据库迁移到另一个版本。`onDowngrade`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T14:26:31.790

如果您进行了更改，例如向其中添加列，则需要完全卸载或升级数据库版本。

无论哪种方式，您都将丢失表中的所有数据，除非您首先通过创建一个临时数据库来备份数据以将其存储在

# php - Symfony/Propel 1.4：从一个数据库读取，写入另一个数据库

> ID：13234058
> 
> 赞同：4
> 
> 时间：2012-11-05T14:24:11.700
> 
> 标签：php, symfony1, symfony-1.4, propel

我们在 Symfony 1.4/ Propel 1.4 中有一个现有项目（SNS 网站+android/Iphone 游戏）

我们在数据库服务器（比如 DB1）上遇到了额外的负载。我们正在做 DB 优化，但作为直接的解决方案，我们决定再创建一个 DB 服务器，因为 DB2 始终是 DB1 的精确副本。目前我们只有 DB1，用于读写操作。

现在我们需要将所有读取操作移至 DB2，并保持 DB1 上的写入操作（通常在事务中）与现在一样。

进行这些更改的可能方法是什么（在没有太多停机时间的生产服务器上），如果可能的话，只需最少的代码更改。

**在第一条评论后编辑**

基于 J0k 和其他一些链接给出的链接，我已经在本地开发环境中完成了以下操作。

1.  创建了一个测试 symfony 1.4 项目
2.  更新 database.yml 如下

    ```
    all:
      propel:
        class: sfPropelDatabase
        param:
          classname: PropelPDO
          dsn: 'mysql:host=localhost;dbname=wzo;'
          username: root
          password: mysql
          encoding: utf8
          persistent: true
          pooling: true
        slaves:
          slave1:
            dsn:      'mysql:host=localhost;dbname=wzoslv;'
            username: root
            password: mysql
            encoding: utf8 
    ```

    *其中数据库`wzoslv`是数据库的精确副本，`wzo`除了一个测试条目中的更改。在表格`odd_play`第 26 行 (PK) 列`result`条目是`WON1`和`WON`分别。*

3.  运行 symfony 任务

    ```
    php symfony propel:build-schema
    php symfony propel:build-model
    php symfony cc 
    ```

4.  创建了一个模块并添加了以下代码：

    ```
    class wzoActions extends sfActions
    {
      public function executeIndex(sfWebRequest $request)
      {
        $con_write = Propel::getConnection(OddPlayPeer::DATABASE_NAME, Propel::CONNECTION_WRITE);
        $con_read = Propel::getConnection(OddPlayPeer::DATABASE_NAME, Propel::CONNECTION_READ);
        $oddPlay = OddPlayPeer::retrieveByPK(26,0,$con_write);
        echo "on write connection, result=".$oddPlay->getResult();
        $oddPlayRead = OddPlayPeer::retrieveByPK(26,0,$con_read);
        echo "<br/>on Read connection, result=".$oddPlayRead->getResult();
        exit;
        $this->setLayout('layout');
      }
    } 
    ```

    在浏览器中运行`http://local.sftest.com/index.php/wzo/index`，输出是，

    > on write connection, result=WON //正确的预期输出
    > 
    > on Read connection, result=WON //不正确。那应该是 WON1

我想`OddPlayPeer::DATABASE_NAME`在创建读/写连接时通过是问题，但在线示例中是如何建议的。有人可以建议我在哪里犯错吗？

**编辑：更多输入**

我更新了调试回声`lib\vendor\symfony\lib\plugins\sfPropelPlugin\lib\vendor\propel\Propel.php`以检查它是如何返回连接的。发现它正在进入以下 if（第 544-549 行）

```
$slaveconfigs = isset(self::$configuration['datasources'][$name]['slaves']) ? self::$configuration['datasources'][$name]['slaves'] : null;

if (empty($slaveconfigs)) {
  echo "inelseifif<br/>";// no slaves configured for this datasource
  self::$connectionMap[$name]['slave'] = false;
  return self::getConnection($name, Propel::CONNECTION_WRITE); // Recurse to get the WRITE connection
} 
```

哪里`$slaveconfigs`是空的，所以返回写连接。现在的问题是，为什么 slaveconfigs 是空的？

[我还尝试按照旧论坛](http://forum.symfony-project.org/viewtopic.php?t=22380)中的定义编辑 sfDatabaseConfigHandler.class.php，但这样做会在某处破坏 symfony，并且不会在 Web 甚至日志中显示任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-07T04:02:55.627

我确定我犯了一些错误，但无论在 Propel/symfony 的官方文件中，甚至在 stackoverflow 上，似乎都对我不起作用。可能官方文档应该更好地照顾没有很多symfony经验的程序员。

虽然我们不喜欢编辑任何框架/第三方库的核心文件，但这迫使我编辑核心文件来为我制定一个可行的解决方案。对我有用的解决方案如下：

**database.yml** 我的 database.yml 文件如下：

```
all:
  propel:
    class: sfPropelDatabase
    param:
      classname: PropelPDO
      dsn: 'mysql:host=localhost;dbname=wzo;'
      username: testuserwzo
      password: 
      encoding: utf8
      persistent: true
      pooling: true

  slave:
    class: sfPropelDatabase
    param:
      classname: PropelPDO
      dsn: 'mysql:host=localhost;dbname=wzoslv;'
      username: testuserwzoslv
      password: 
      encoding: utf8
      persistent: true
      pooling: true 
```

之后，我编辑了 Propel.php 文件如下

**对于 Propel 1.4**
文件：lib/vendor/symfony/lib/plugins/sfPropelPlugin/lib/vendor/propel/Propel.php
更改行 542-543

```
// we've already ensured that the configuration exists, in previous if-statement
$slaveconfigs = isset(self::$configuration['datasources'][$name]['slaves']) ? self::$configuration['datasources'][$name]['slaves'] : null; 
```

with（中间加一行）

```
// we've already ensured that the configuration exists, in previous if-statement
self::$configuration['datasources'][$name]['slaves'] = isset(self::$configuration['datasources']['slave']) ? self::$configuration['datasources']['slave'] : null;
$slaveconfigs = isset(self::$configuration['datasources'][$name]['slaves']) ? self::$configuration['datasources'][$name]['slaves'] : null; 
```

然后在同一个文件中，更改了第 560 行

```
$con = Propel::initConnection($conparams, $name); 
```

至

```
$con = Propel::initConnection($conparams, 'slave'); //I know its bad practive to put hard-coded value but at that moment, I was more interested in working solution without caring about best practices. 
```

**对于 propel 1.6（我们升级了 propel 只是为了使它工作，但后来又恢复到 propel 1.4，因为生产升级需要经过良好测试。）**
文件：plugins/sfPropelORMPlugin/lib/vendor/propel/runtime/lib/Propel.php
已更改601行

```
$slaveconfigs = isset(self::$configuration['datasources'][$name]['slaves']) ? self::$configuration['datasources'][$name]['slaves'] : null; 
```

to（之前加了一行）

```
self::$configuration['datasources'][$name]['slaves'] = isset(self::$configuration['datasources']['slave']) ? self::$configuration['datasources']['slave'] : null;
$slaveconfigs = isset(self::$configuration['datasources'][$name]['slaves']) ? self::$configuration['datasources'][$name]['slaves'] : null; 
```

然后在同一个文件中，更改了第 629 行

```
$con = Propel::initConnection($conparams, $name); 
```

至

```
$con = Propel::initConnection($conparams, 'slave'); 
```

然后下面的测试文件给出了预期的结果

```
class kapsActions extends sfActions
{
  public function executeIndex(sfWebRequest $request)
  {
      $con_write = Propel::getConnection(OddPlayPeer::DATABASE_NAME, Propel::CONNECTION_WRITE);
      $con_read = Propel::getConnection(OddPlayPeer::DATABASE_NAME, Propel::CONNECTION_READ);

      $oddPlay = OddPlayPeer::retrieveByPK(28,0,$con_write);
      echo "on write connection, result=".$oddPlay->getResult().$oddPlay->getPlayscore();

      $oddPlayRead = OddPlayPeer::retrieveByPK(27,0,$con_read);
      echo "<br/>on Read connection, result=".$oddPlayRead->getResult().$oddPlayRead->getPlayscore();
      exit;
      //$this->setLayout('layout');
  }
} 
```

我仍然不建议编辑核心文件，但这个解决方案在紧急情况下对我们有用。如果需要，其他人可以在**紧急情况下**使用它。仍在寻找完美的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T10:19:37.557

[根据文档](https://github.com/propelorm/sfPropelORMPlugin/blob/master/doc/database.md)（在 github 上） ，您应该添加一个新级别来`slaves`添加一个`connection`条目

```
all:
  propel:
    class: sfPropelDatabase
    param:
      classname: PropelPDO
      dsn: 'mysql:host=localhost;dbname=wzo;'
      username: root
      password: mysql
      encoding: utf8
      persistent: true
      pooling: true

      slaves:
        connection:
          slave1:
            dsn:      'mysql:host=localhost;dbname=wzoslv;'
            username: root
            password: mysql
            encoding: utf8 
```

# sharepoint-2010 - 将 BizTalk 2010 与远程 SharePoint 2010 集成

> ID：13234059
> 
> 赞同：2
> 
> 时间：2012-11-05T14:24:12.297
> 
> 标签：sharepoint-2010, integration, adapter, biztalk, biztalk-2010

我想用在另一台机器上运行的 SharePoint Server 2010 来配置 BizTalk 2010。这应该是可能的，但是我没有找到有关如何执行此操作的适当文档。BizTalk 机器运行它自己的 SharePoint，它的 BizTalk 集成运行良好。我必须在远程 SharePoint 计算机上安装什么才能启用通信？

Microsoft 提供了执行此操作的说明（请参阅[多服务器部署](http://msdn.microsoft.com/en-us/library/aa547280.aspx)），但他们没有回答我的问题。好的，我必须设置正确的用户权限，但是软件呢？

```
 Machine A                            Machine B
 ----------------------------         ------------------------
| BizTalk 2010               |       | SharePoint Server 2010 |
| SharePoint adapter feature | <---> | ???                    |
 ----------------------------         ------------------------ 
```

我一定要吗：

1.  在 SharePoint 计算机上安装 SharePoint 适配器功能
    *   这需要 BizTalk AFAIK
2.  在 BizTalk 服务器上配置适配器功能以使用远程 SharePoint 站点
3.  做点别的

当然，我可以使用 SOAP 适配器，但这需要做很多工作。

# java - Java 类路径中的内容是如何识别的？

> ID：13234062
> 
> 赞同：0
> 
> 时间：2012-11-05T14:24:23.727
> 
> 标签：java, ant, classpath

如果我将 .jar 文件添加到类路径中，然后编辑 .jar 文件中的一些内容，是否仍然可以在类路径中识别内容？

例如，使用 Ant：

1.  读取一组 .class 和 .property 文件并创建一个 .jar 文件。.jar 文件现在包含 .class 和 .property 文件
2.  将 .jar 文件添加到类路径
3.  打开 .jar 文件，编辑类文件 A.class 和属性文件 B.property
4.  将编辑后的文件存储在 .jar 文件中并关闭它

在不重新定义类路径的情况下，仍然可以从类路径中找到文件 A 和 B 吗？即文件是由类路径中的某个唯一 ID 标识的（自从我们编辑文件后可能已经更改）或文件名？

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:35:11.380

类路径中的文件由它们的唯一名称标识。所以回答你的问题：

> 如果我将 .jar 文件添加到类路径中，然后编辑 .jar 文件中的一些内容，是否仍然可以在类路径中识别内容？

是的。该文件（我相信这就是您在这里的意思 - 不是内容）仍然可以识别，只要它的名称没有改变。从而提供对其内容的访问。

另外，我相信您考虑的是 .java 文件而不是 .class 文件。类文件存储在机器可读的字节码中。Java 文件是源代码。

# statistics - 将系统数据存储到石墨/statsd

> ID：13234064
> 
> 赞同：0
> 
> 时间：2012-11-05T14:24:24.593
> 
> 标签：statistics, graphite

我已经设置`graphite`并`statsd`在专用于统计信息的特定机器上。现在，如果我想连接我的应用程序服务器以提供统计信息 - 最好的方法是什么？

我知道 carbon 已经为统计机器做了这个，但是我在没有安装石墨的应用服务器上做什么呢？

我正在寻找的是存储`load`,`disk usage`和`memory free/used`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T05:44:04.393

使用石墨代理 ( [https://github.com/indygreg/collectd-carbon](https://github.com/indygreg/collectd-carbon) )运行 collectd ( [http://collectd.org/](http://collectd.org/) )将是收集所需信息的绝佳开始。

几乎有无数种方法可以将您的数据放入石墨中。

您可以在 readthedocs.org 页面上找到已知可以很好地与石墨一起工作的工具列表：http: [//graphite.readthedocs.org/en/0.9.10/tools.html](http://graphite.readthedocs.org/en/0.9.10/tools.html)

# iphone - 多对多 NSPredicate

> ID：13234065
> 
> 赞同：0
> 
> 时间：2012-11-05T14:24:26.003
> 
> 标签：iphone, ios, nspredicate

我有一个具有一对多关系的模型。

系统 ->> 项目 ->> 代码

我正在尝试在系统的 fetchRequest 上编写谓词。

我只想展示具有至少一个代码的项目的系统。

我尝试了一个 SUBQUERY，但我无法让它工作。

这是我尝试过的...

```
[NSPredicate predicateWithFormat:@"(SUBQUERY(items, $x, $x.codes.@count != 0) != 0)"]; 
```

我已经尝试过其他各种排列，但它们都抛出了类似的错误。

有人可以让我知道正确的谓词格式是什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T08:45:05.193

我认为您必须`@count`为 SUBQUERY 添加另一个：

```
[NSPredicate predicateWithFormat:@"SUBQUERY(items, $x, $x.codes.@count != 0).@count != 0"]; 
```

# sql - 如何编写 IN 子句查询以将 null 替换为无值参数

> ID：13234067
> 
> 赞同：1
> 
> 时间：2012-11-05T14:24:35.527
> 
> 标签：sql, sql-server

我正在编写一个查询，其中 where 子句具有 IN 子句并且此 IN 子句中有大量值，我想获取结果，如果表中不存在 IN 子句中给出的值的值，那么原始包含0 或 null 应该返回该值。例如..

```
从 emp 中选择 age、sex、date_joining，其中 name IN ('amit','john','paul','dilip')

```

现在假设对于这个查询，数据库中不存在 john 和 paul 的数据，那么结果应该如下所示。

```
21 男 21-AUG-2011
空空空
空空空
25 男 2010 年 8 月 9 日

```

如果 null 不可能，我们也可以有 0 而不是 null

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T14:29:41.267

```
select  filter.name
,       emp.age
,       emp.sex
,       emp.date_joining 
from    (
        values ('amit'), ('john'), ('paul'), ('dilip')
        ) filter(name)
left join    
        emp
on      emp.name = filter.name 
```

[Live example at SQL Fiddle.](http://sqlfiddle.com/#!6/4c009/1/0)

For older values of SQL Server, replace the line with `values` by:

```
from    (
                  select 'amit'
        union all select 'john'
        union all select 'paul'
        union all select 'dilip'
        ) filter(name) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T18:52:39.960

您还可以使用公用表表达式来获得此结果：

```
;With AllEmpDetails as
(
Select [Name] from emp
UNION Select 'amit' 
UNION Select 'john' 
UNION Select 'paul' 
UNION Select 'dilip'
)Select AllEmpDetails.Name, e2.Age, e2.Sex, e2.date_joining 
from AllEmpDetails 
Left Join emp e2 on e2.[Name] = AllEmpDetails.Name 
```

在我的数据库中，我已经添加了*amit*和*dilip*的详细信息，因此我使用了它`UNION`，因为您可以轻松获取有关可用员工的详细信息。另一方面，您可以使用`UNION ALL`with `Distinct`。

# php - PHP 邮件清理技术

> ID：13234068
> 
> 赞同：0
> 
> 时间：2012-11-05T14:24:51.830
> 
> 标签：php, mysql, sql, sql-injection

我正在构建我的第一个联系表。

我有一个与此类似的页面，其中包含很多字段... [http://www.missingpeople.org.uk/component/option,com_rsform/Itemid,144/lang,en/view,rsform/](http://www.missingpeople.org.uk/component/option,com_rsform/Itemid,144/lang,en/view,rsform/)

该表单在提交后会重定向到我的流程页面，其中包含...

```
<?php

foreach ($_POST as $key => $value)
$message .= "Field ".htmlspecialchars($key)." is ".htmlspecialchars($value)."\r\n";

mail('liam@site.co.uk', 'sghting', $message); 

?> 
```

从我一直在阅读的过程来看，虽然这似乎容易受到注射？抱歉，如果这听起来很幼稚，我对这个过程很陌生。我要问的是我从哪里开始阅读清理这段代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:11:50.397

它可能很容易受到攻击 - 只是不是 sql 注入。`mail`是一个非常原始的界面，它只是将东西传递到邮件传递系统。如果您没有正确转义，则将邮件标头注入邮件中是微不足道的。这样，攻击者可以使用您的邮件表单来发送垃圾邮件或欺骗发件人以及可能发生的其他您不希望发生的事情。

我强烈建议您使用诸如 Swift mailer 之类的库，而不是自己尝试这样做，它会为您处理所有这些。

[http://swiftmailer.org/](http://swiftmailer.org/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:26:07.970

如果它是一个 SQL 查询，那会很危险，因为您可以轻松地插入一些单引号和分号来运行您自己的代码，但发送邮件的情况并非如此。如果您稍后将该电子邮件保存到数据库中，那么它可能容易受到 SQL 注入的攻击。

您可以运行此值`htmlentities()`以对内容进行 HTML 编码，这对于电子邮件来说应该没问题，并且会删除大部分特殊字符。

# php - 奇怪的正则表达式问题 - PHP 的正确调试方法

> ID：13234069
> 
> 赞同：-3
> 
> 时间：2012-11-05T14:25:04.867
> 
> 标签：php, jquery, regex

谁能解释为什么这个正则表达式失败？它适用于在线 RegEx 测试器

[http://www.spaweditor.com/scripts/regex/index.php](http://www.spaweditor.com/scripts/regex/index.php)`preg_match`和我一样使用 PHP 。

这里几乎是所有相关的代码。

是的，正则表达式工作正常，但 php 代码不能。我需要记住什么时候应该工作，而不是通常是一个错字。`.`在这种情况下，我通过输入 a而不是 a将我的模式连接到我的字符串`,`，我发现这很难注意到拼写错误。因此，我似乎无法找到语法错​​误的一个技巧是重新输入有问题的代码。当然，在这种情况下，我的拼写错误并没有导致语法无效。

我可能应该做的另一件事是检查 apache 错误日志，因为 preg_match 接收到的参数数量不正确应该会导致错误。

我不习惯使用 ajax 调用返回 json 的 php 脚本，而且我不习惯看不到生成的 php 错误。过去在使用 java 客户端时，我一直使用 php curl 客户端来测试 web 服务的响应。我很着急，跳过了这个项目的那一步。

您使用什么方法来正确调试您的 php？

```
//$colors  = mysql_real_escape_string($_POST['color']);
$colors='333333,cbafff';

 function addcolor($colors,$cart_id, $dbh) {
    //insert color or scheme into cart
    //If succeeds return success, if fail return failure
    $stmt2=$dbh->prepare("INSERT IGNORE INTO cart (cart_id,item_id) values (:cart_id,:item_id)");
    $stmt2->bindValue(':cart_id',$cart_id,PDO::PARAM_INT);
    $color_array=split(",",$colors);
    foreach ($color_array as $color) {
        $color=trim($color);

        if (!preg_match("/^[A-Fa-f0-9]{6}$/".$color)) {
            return array("result"=>"error: Invalid Color $color");
            break;
        }
        $stmt2->bindValue(':item_id',$color,PDO::PARAM_STR);
        if (!($stmt2->execute())) {
            return array("result"=>"failure ". $stmt2->getCode());
            break;
        }
    }
    return array("result"=>"success");
} 
```

jQuery 脚本

```
// to use surround anchor tags with div (id=colors). Set color or scheme id as href value. On click the item is posted to the web service.
// To do improve response handling from webservice.

$(document).ready(function(){
    $("#img a").live("click", function(event) {
        event.preventDefault();
        var item = $(this).attr( 'href' );
        var rev = $(this).attr('rev');
        var action ="add";
        if (rev == "1") {
            action = "add";
            $(this).attr('rev',"2");
        }
        else {          
            action = "remove";
            $(this).attr('rev',"1");
        }
        var jqxhr = $.post("webservice.php", { action: action, color: item }, function(data) {
            var result=data.result;
            if (result!="success") {
                alert(result);
            }
        }, "json")
        .error(function() {         
            alert("error: unable to contact web service"); 
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:09:11.363

这一行是错误的，你连接而不是给 preg_match 第二个参数：

`preg_match("/^[A-Fa-f0-9]{6}$/".$color)`

```
preg_match("/^[A-Fa-f0-9]{6}$/", $color) 
```

# php - 如何在php中搜索和删除字符串

> ID：13234070
> 
> 赞同：0
> 
> 时间：2012-11-05T14:25:14.007
> 
> 标签：php, xml, regex

我正在尝试将 Twitter 的 RSS 提要（从现在起一年后将消失的提要）与 Feedburner 一起使用，但 xml 中的一行代码导致 feedburner 出现解析错误。我想这是

> xmlns:twitter="http://api.twitter.com"

我正在寻找一种以它喜欢的方式将此信息提供给 feedburner 的方法：即 php 在我自己的站点上的 xml 中包含 RSS xml 页面的内容（删除了有问题的字符串）。包括 xml 内容是小菜一碟——我只需要一段代码来说明 iff string fragment == `xmlns:twitter="http://api.twitter.com"` then string frament = ""。

有人知道这个的语法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:30:23.503

You can try with [str_replace](http://php.net/manual/en/function.str-replace.php):

```
str_replace('xmlns:twitter="http://api.twitter.com"', '', $string); 
```

Also, you can try to [urlencode](http://php.net/manual/en/function.urlencode.php) `http://api.twitter.com`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T14:30:31.413

Alternatively, you could use **preg_replace** function: [http://php.net/manual/en/function.preg-replace.php](http://php.net/manual/en/function.preg-replace.php)

```
<?php
$string = 'string to be searched';
$pattern = 'a particular pattern';
$replacement = ''; //deletion
echo preg_replace($pattern, $replacement, $string);
?> 
```

# c# - IAsyncOperation 在委托中，有可能吗？

> ID：13234072
> 
> 赞同：0
> 
> 时间：2012-11-05T14:25:30.403
> 
> 标签：c#, windows-runtime, c#-5.0

```
public delegate string IAsyncOperation<IEnumerable<string>> ThisReceiveStringHandler();
...
public event ThisReceiveStringHandler ThisReceiveString; 
```

我正在尝试做一个异步事件，但上面的代码不起作用。谁能告诉我是否有可能创建异步事件？或者是否有更优雅的方法？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T20:59:28.813

您是否正在编写自己的异步操作？除非您正在开发 Windows RT 组件，否则请使用 Task。正如 svick 所说，事件通常不会返回，它们只是被触发。有时您不想知道它们是否已完成。

你想让我做什么？每当收到字符串时触发事件？您应该为此使用 Rx（除非最多接收一次字符串，然后使用 Task）。如果您提供代码的其余部分 - 触发事件的部分和接收事件的部分，我可以帮助您重写它。

你如何接收字符串？通过 HttpClient 还是？您可以使用 TaskCompletionSource 将一种异步方法转换为另一种方法。

# rapidxml - 沿 rapid.xml 节点导航

> ID：13234085
> 
> 赞同：1
> 
> 时间：2012-11-05T14:26:12.680
> 
> 标签：rapidxml

这个问题与[在 Rapidxml 中检查可变数量的兄弟节点和不同的兄弟节点](https://stackoverflow.com/questions/11783171/)略有不同。在我在网上找到的大多数示例中，我看到了硬编码键，例如：

```
xml_node<>* root = doc.first_node("rootnode"); 
```

这里“rootnode”是硬编码的。我的情况略有不同，从某种意义上说，rapidxml 已经完成了解析和标记。我需要在不知道硬编码名称和节点深度的情况下通过迭代节点及其兄弟节点来知道解析器读取的名称。我正在寻找关于沿着 rapidxml 树进行某种递归导航的建议/解决方案。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:25:05.517

根据 RapidXml 的文档（[参见此处](http://rapidxml.sourceforge.net/manual.html#classrapidxml_1_1xml__node_7823e36687669e59c2afdf66334ef35a_17823e36687669e59c2afdf66334ef35a)），方法中的节点名称参数`first_node()`是可选的。您可以省略该参数，您将获得第一个子节点，无论其名称如何：

```
xml_node<>* root = doc.first_node(); 
```

然后你可以通过调用它的`name()`方法来获取节点的名称。

# java - android 可滚动视图的文本太长

> ID：13234089
> 
> 赞同：0
> 
> 时间：2012-11-05T14:26:35.910
> 
> 标签：java, android

这是代码；

```
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/bghome" >

    <TableRow>

        <TextView
            android:id="@+id/TextTitle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="10dp"
            android:layout_marginTop="10dp"
            android:gravity="center"
            android:text="Wrocław"
            android:textColor="#FFFFFF"
            android:textSize="20dp" />
    </TableRow>

    <TableRow>

        <ScrollView
            android:layout_width="fill_parent"
            android:layout_height="400dp"
            android:layout_marginLeft="10dp" >

            <TextView
                android:id="@+id/TextMain"
                android:layout_width="300dp"
                android:layout_height="400dp"
                android:layout_gravity="center_vertical|right"
                android:text="Ładowanie danych..." >
            </TextView>
        </ScrollView>
    </TableRow>

</TableLayout> 
```

现在。当我在 TextView （可滚动视图内）中放置很长的文本时。我得到失真问题。文本的顶部被削减。（目标是创建一个标题，并在其下方为来自 serwer 的 html 文本创建一个可滚动容器 - 一个 html 代码）。

Id 无关紧要，是我将 html 字符串放在纯字符串上，还是从服务器获取数据或对其进行硬编码。我尝试了所有组合，但我无法破解它。

```
MainText.setText(Html.fromHtml(Plain_str));
MainText.setText(Plain_str);
MainText.setText(Plain_str.toString()); 
```

没有什么帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:42:42.037

问题出在这一行： android:layout_gravity="center_vertical|right"

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:41:46.437

我可能误解了这个问题，但是您是否尝试过将`TableRow`高度设置为`400dp`and 然后`match_parent`为`ScrollView`and `TextView`？在我做出改变之前，我对这个布局高度有疑问，然后看起来一切正常。

像这样的东西：

```
<TableRow
    android:layout_width="match_parent"
    android:layout_height="400dp" >

    <ScrollView
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_marginLeft="10dp" >

        <TextView
            android:id="@+id/TextMain"
            android:layout_width="300dp"
            android:layout_height="match_parent"
            android:layout_gravity="center_vertical|right"
            android:text="this is very long text that is going in a textview wrapped by a scrollview. I want to see how the text is displayed when wrapped. this is very long text that is going in a textview wrapped by a scrollview. I want to see how the text is displayed when wrapped." >
        </TextView>
    </ScrollView>

</TableRow> 
```

# java - 如何更新/刷新 Eclipse 插件中的视图？

> ID：13234090
> 
> 赞同：3
> 
> 时间：2012-11-05T14:26:36.237
> 
> 标签：java, eclipse, plugins, view

我有一个带有单个**视图的****eclipse 插件**（如 eclipse helloworld-view-plugin-project）。在视图文件中，**当我想更新视图时会收到一个事件**。

 ****在这个视图中，我在一个具有多个标签的组中有一个 GridData。我有几个**注册到程序的服务，它们的状态应该显示**在这个 GridData 中。

编辑：为了更好地展示我的问题，我更新了这篇文章并添加了整个代码：

* * *

**创建零件控制（）：**

```
public void createPartControl(Composite _parent) {
  parent = _parent;
  createContents();
  addBindings();
  makeActions();
  contributeToActionBars();
} 
```

**创建内容（）：**

```
protected void createContents() {

  // fixed
  checkIcon = //...
  errorIcon = //...
  smallFont = SWTResourceManager.getFont("Segoe UI", 7, SWT.NORMAL);

  // content
  gl_shell = new GridLayout(1, false);
  //margins, etc. for gl_shell
  parent.setLayout(gl_shell);

  final Label lblGreeting = new Label(parent, SWT.NONE);
  lblGreeting.setLayoutData(new GridData(SWT.FILL, SWT.TOP, false, false, 1, 1));
  lblGreeting.setText("Hi " + Preferences.getPreName());

  // -- GROUP YOUR STATS (show all services)
  createStatusGroupBox();
} 
```

**创建状态组框（）：**

```
private Group grpYourStatus = null; // outside the method for access in listener (below)

private void createStatusGroupBox() {
  grpYourStatus = new Group(parent, SWT.NONE);
  grpYourStatus.setLayoutData(new GridData(SWT.FILL, SWT.TOP, true, false, 1, 1));
  grpYourStatus.setText("Your upload status");
  grpYourStatus.setLayout(new GridLayout(3, false));

  // add message if no service is registered
  if ( r.getServiceList().size() == 0 ) {
     Label status = new Label(grpYourStatus, SWT.NONE);
     status.setText("No service registered.");
     new Label(grpYourStatus, SWT.NONE); //empty
     new Label(grpYourStatus, SWT.NONE); //empty
  }

  // add labels (status, message, name) for each registered service
  for ( IRecorderObject service : r.getServiceList() ) {
     Label name = new Label(grpYourStatus, SWT.NONE);
     Label status = new Label(grpYourStatus, SWT.NONE);
     Label message = new Label(grpYourStatus, SWT.NONE);
     message.setFont(smallFont);
     message.setLayoutData(new GridData(SWT.LEFT, SWT.CENTER, true, false, 1, 1));

     service.getServiceViewItem().setLabelsAndIcons(name, status, message, checkIcon, errorIcon); //this also sets the values of the labels (label.setText(...) via data binding)
} 
```

* * *

不幸的是，我不知道更新/重置它的正确方法是什么。我尝试了以下方法：

**监听器（应该更新视图/服务列表）：**

```
r.addPropertyChangeListener(BindingNames.SERVICE_ADDED, new PropertyChangeListener() {
  public void propertyChange(final PropertyChangeEvent evt) {   
    Display.getDefault().asyncExec(new Runnable() {
      public void run() {
        // This "redraws" the view, but just places the whole content (generated in createStatusGroupBox()) above the other parts.
        //Display.getCurrent().update();
        //createStatusGroupBox();
        //parent.layout(true);
        //parent.redraw();

        // disposes grpYourStatus-Group but doesn't show anything then
        grpYourStatus.dispose();
        createStatusGroupBox();
        grpYourStatus.layout();
        grpYourStatus.redraw(); 
      }
    });
  }
}); 
```

我还尝试了以下语句（单独）；都没有成功：

```
parent.redraw();
parent.update();
parent.layout();
parent.layout(true);
parent.refresh(); 
```

* * *

在这篇[文章](https://stackoverflow.com/questions/11352718/how-to-refresh-eclipse-view-plugin)中，我阅读了以下内容：

> createPartControls 是视图生命周期的那个时间，其中包含的小部件被创建（当视图最初变得可见时）。此代码仅在视图生命周期中执行一次，因此您不能直接在此处添加任何内容来刷新视图。
> 
> Eclipse 部件通常会更新其内容作为对工作台内更改选择的反应（例如，用户可能会单击调试视图中的另一个堆栈框架）。

不幸的是，我不知道我还能尝试什么，而且我没有发现任何对搜索有帮助的东西……**感谢您的帮助和建议**！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:07:55.463

我终于找到了答案（在 AndreiC 的帮助下！）：

我的听众现在看起来像这样：

```
r.addPropertyChangeListener(BindingNames.SERVICE_ADDED, new PropertyChangeListener() {
  public void propertyChange(final PropertyChangeEvent evt) {   
    Display.getDefault().asyncExec(new Runnable() {
      public void run() {
         // remove grpYourStatus from parent
         grpYourStatus.dispose();

         // add grpYourStatus (with updated values) to parent
         createStatusGroupBox();

         // refresh view
         parent.pack();
         parent.layout(true);
      }
    });
  }
}); 
```

其余的与上面的代码相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:42:57.163

我不知道 API，但你试过`parent.update()`吗？****

# python - 为什么在内存缓存上调用 get() 会增加 Google App Engine 中的项目数？

> ID：13234094
> 
> 赞同：4
> 
> 时间：2012-11-05T14:26:39.933
> 
> 标签：python, google-app-engine, memcached

我正在部署的 Google App Engine NDB 应用程序的管理控制台中查看 Memcache 查看器。为了测试，我正在使用远程 api。我正在做一些非常简单的事情：`memcache.get('somekey')`. 出于某种原因，每次我调用此行并刷新统计信息时，项目计数都会增加 2。无论密钥是否存在于内存缓存中，都会发生这种情况。

任何想法为什么会发生这种情况？这是正常的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:28:19.127

`memcache.get`不应增加 memcache 统计中的项目数，并且我无法在生产中重现该行为。

memcache 统计页面是全局的，因此如果您在使用远程 api 的同时碰巧有其他请求（实时或通过任务队列）进入您的应用程序，则可能会增加该计数。

# android - 从网络加载 ItemizedOverlays 标记

> ID：13234097
> 
> 赞同：1
> 
> 时间：2012-11-05T14:26:45.130
> 
> 标签：android, android-mapview, android-overlay

我想知道从网络加载 ItemizedOverlay 标记的正确方法是什么，以某种方式使用缓存。

现在我正在下载所有图像并将它们转换为drawables，它工作得很好，但我想看看是否有更好的方法来做到这一点。

```
public class ImageLoad extends AsyncTask<String, Bitmap, Bitmap> {
private String url;
private MapView mapView;

public ImageLoad() {
}

public ImageLoad(MapView mapView) {
    this.mapView = mapView;
}

protected Bitmap doInBackground(String... params) {
    url = params[0];
    try {
        return BitmapFactory.decodeStream(new URL(url).openConnection().getInputStream());
    } catch (MalformedURLException e) {
        e.printStackTrace();
        return null;
    } catch (IOException e) {
        e.printStackTrace();
        return null;
    }
}

@Override
protected void onPostExecute(Bitmap result) {
    Drawable d = new BitmapDrawable(mapView.getContext().getResources(), result);
    SimpleItemizedOverlay itemizedOverlay = new SimpleItemizedOverlay(d, mapView);
    GeoPoint p = new GeoPoint(32061628, 34774767);
    itemizedOverlay.addOverlay(new OverlayItem(p, "zzz", "zzz"));
    mapView.getOverlays().add(itemizedOverlay);
    mapView.invalidate();
    super.onPostExecute(result);
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:40:50.357

我建议您在lazyLoader 下载图像时使用默认图像作为可绘制的叠加层，将它们放入缓存中（二级缓存：在内存中和磁盘上）并在图像准备好时通知叠加层，然后谁刷新它的视图.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:28:04.340

总体方法是正确的，但是您如何实现它的细节可以改进。

`Improvement 1`

在您`onPostExecute()`每次下载图像时，您都在创建一个新`ItemizedOverlay`对象并向其中添加一个项目。通常，使用唯一的`ItemizedOverlay`并将所有项目添加到其中会更有效。

*   在加载第一个图像之前创建`ItemizedOverlay`并添加它`MapView.getOverlays().add()`
*   更改`ImageLoad`类以接收`ItemizedOverlay`而不是`MapView`
*   在`onPostExecute()`创建一个新的`OverlayItem`并将其添加到`ItemizedOverlay`

有了这个，您将只有一个`ItemizedOverlay`包含多个项目。使用您的代码，您有几个`ItemizedOverlays`，每个都有一个图像。

`Improvement 2`

您没有调整从 Web 下载的图像的大小。除非您确定它们都具有合适的大小，否则您应该在将它们添加到叠加层之前强制执行该大小。否则，您将使用更多内存，并且可能会获得覆盖所有屏幕的图像，这不是用户期望的。

您可以调整`Bitmap`使用方法的大小`Bitmap.createScaledBitmap()`。

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-09T10:14:00.927

您可以尝试这种方式..查看链接..这是延迟加载图像的演示所以，这里是第一次下载图像并将其缓存存储在 sdcard 中。因此，每次从 Web 加载标记都不会花费更多时间。

[http://developand.blogspot.in/2010/11/lazy-loading.html](http://developand.blogspot.in/2010/11/lazy-loading.html)

# c# - 使用 BlockingCollection 更新 ObservableCollection

> ID：13234103
> 
> 赞同：5
> 
> 时间：2012-11-05T14:27:07.917
> 
> 标签：c#, wpf, observablecollection, blockingcollection

我订阅了一项服务，该服务将在收到新元素时引发事件，我将此元素添加到`BlockingCollection`.
我有第二个线程正在运行，它将循环`BlockingCollection`添加/更新可观察集合中的元素。

问题是如何添加`ObservableCollection`？我知道我不能只`.add`对这种类型的集合做一个，因为它需要在 UI 线程上完成。所以我尝试使用不同`ObservableCollection`的子类，这些子类使用调度程序来编组元素的添加，但每一次，我都会遇到同样的错误

> “未知模块中发生了‘System.StackOverflowException’类型的未处理异常。”

故障排除提示如下：

> 确保您没有无限循环或无限递归。

好吧，实际上我确实有某种无限循环，因为它一直在`BlockingQueue`接收新元素，比如每秒 5 到 10 个。
如果我不将控件绑定到`observablecollection`，或者如果我使用 List 代替，我不会得到异常。

```
Class ElementHolder
{
    private ExternalService _externalService;
    private ObservableCollection<Element> _elementsList = new ObservableCollection<Element>();
    private BlockingCollection<Element> _elementsReceived = new BlockingCollection<Element>();

    public ObservableCollection<Element> ElementsList
    {
        get
        {
            return _elementList;
        }
        set
        {
            _elementList = value;
        }
    }

public ElementHolder()
    {
        Task.Factory.StartNew(ReadElements);
        _externalService = new ExternalService();
        _externalService.ReceivedNewElement += new Action<Element>(o => _elementsReceived.Add(o));
        _externalService.Subscribe();
    }

private void ReadElements()
    {
        foreach (Element element in _elementsReceived.GetConsumingEnumerable())
        {
            Element item = _elementsList.FirstOrDefault(o => o.ID == element.ID);
            if (item == null)
            {
                _elementList.Add(element);
            }
            else
            {
                item.Update(element);
            }
        }
    } 
```

编辑当我追踪它时，该错误自行消失了。我试图让事情变得更简单，以便真正了解问题所在，然后它开始起作用。当把东西重新组合在一起时，它仍然可以工作......但它会不时地回来，因为似乎不相关的原因，比如在我的列表视图中添加样式。我开始认为第三方 dll 存在问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:08:12.707

这是反应式扩展是一个非常有用和巧妙的工具的一个完美例子。使用它们有一个非常陡峭的学习曲线，但是由于您在这里有一个特定的案例，因此假设我正确理解您的目标，我将插入将实现您的目标的反应式代码。

请注意，您需要安装 Reactive Extensions，并且需要两个 using 语句（System.Reactive.Linq 和 System.Reactive.Subjects），并且需要引用 System.Reactive 和 System.Reactive.Windows.Threading dll。请参阅[MSDN 上的反应式](http://msdn.microsoft.com/en-us/data/gg577609.aspx "请参阅 MSDN 上的响应式扩展")。

```
class ElementHolder
{
    public ObservableCollection<Element> ElementsList { get; set; }
    private ExternalService _externalService = new ExternalService();
    private IDisposable _elementSubscription;
    private Subject<Element> _elementSubject = new Subject<Element>();

    public ElementHolder()
    {
        _externalService.ReceivedNewElement += _elementSubject.OnNext;
        _externalService.Subscribe();

        ElementList = new ObservableCollection<Element>();
        _elementSubscription = _externalService.ObserveOnDispatcher().Subscribe(NextElement);
    }

    private void NextElement(Element e)
    {
        Element item = ElementsList.FirstOrDefault(o => o.ID == element.ID);
        if (item == null) {
            _elementList.Add(element);
        }
        else {
            item.Update(element);
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T20:44:14.000

答案有一个小错误。请参阅下面的更正行：

```
_elementSubscription = _elementSubject.ObserveOnDispatcher().Subscribe(NextElement); 
```

我花了一段时间才弄清楚这一点，但 rmayer06 的回答解决了我的问题。我不能对答案发表评论，否则我会的。

# c++ - 指针集中元素的顺序

> ID：13234106
> 
> 赞同：19
> 
> 时间：2012-11-05T14:27:11.027
> 
> 标签：c++, set

为什么即使我已经注释了以下代码也会编译`A::operator<`。我想知道如何在没有运算符的情况下按升序打印以下代码的输出`<`。如何将顺序更改为降序？（*注意*`A`：如果我使用而不是，`A*`除非我提供定义，否则此代码不会被编译`A::operator<`）

```
#include <iostream>
#include <set>

using namespace std;

class A
{
public:
    A(int v):x(v){}
    virtual ~A(){}
    int x;
    /*bool operator<(const A &a) const
    {
        return x > a.x;
    }*/
};

int main()
{
    set<A*> numbers;
    A* a1 = new A(1);
    A* a2 = new A(2);
    A* a3 = new A(3);
    numbers.insert(a2);
    numbers.insert(a3);
    numbers.insert(a1);
    for(set<A*>::iterator itr = numbers.begin();itr!=numbers.end();itr++)
    {
        cout << (*itr)->x << endl;
    }
    // output: 1 2 3
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-05T14:28:42.600

你的代码被编译是因为你有一组指针。由于集合包含指针，并且您的运算符不比较指针，而是比较 type 的对象`A`，因此集合不需要它。有一个现有的指针小于比较运算符，这是在您的集合中使用的。

您可以通过提供自己的实现[严格弱排序的比较器来更改排序](http://www.sgi.com/tech/stl/StrictWeakOrdering.html)：

```
struct APtrComp
{
  bool operator()(const A* lhs, const A* rhs) const  { /* implement logic here */ }
}; 
```

并使用它作为第二个模板参数来实例化您的集合。

```
set<A*, APtrComp> numbers; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T14:32:17.170

你有一组指针。通常指针是按递增顺序分配的。和指针有一个默认`<`运算符。所以这就是它正在编译和工作的原因。

Ps 无论有什么值，它都会按此顺序打印 A1 A2 A3 的值：

```
...
A* a1 = new A(9);
A* a2 = new A(5);
A* a3 = new A(1);
...
 // output: 9 5 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T14:34:17.270

如果你还记得你的指针算法，所有的点都被赋予了一组在操作中使用的操作符（包括操作符<）。您的集合将使用此默认运算符 < 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T15:08:22.363

据我了解，您想知道为什么`A*`即使您没有代码也可以编译代码，`operator<`以及如何将顺序从升序更改为降序。

它编译是因为它使用`operator<`带有指针地址的 。
更改`cout << (*itr)->x << endl;`
为`cout << (*itr)->x << ' ' << *itr << endl;`，您会很容易看到它:)如果

没有`operator<`使用`set<A>`. 它不知道要比较什么才能插入已排序的成员。所以你必须提供那个运营商！

如果您想继续使用指针，可以使用@juanchopanza 提供的代码。

# xpages - 您如何（部分）隐藏 XPages 应用程序的设计？

> ID：13234107
> 
> 赞同：1
> 
> 时间：2012-11-05T14:27:16.720
> 
> 标签：xpages

在分发 XPages 应用程序时，您可以（部分）隐藏它们的设计吗？您应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:21:04.300

无法部分隐藏特定对象，使用这些步骤完全隐藏应用程序设计

1.  从您的 nsf 应用程序创建两个新模板 (ntf)
2.  使用其中一个模板替换设计，并勾选“隐藏论坛和”lotusscript“复选框

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T11:44:40.917

没有为自己测试它，但我会尝试将 .class 和 .xml 为 XPages 生成的代码定义（通常是 WebContent\WEB-INF 文件夹的内容）打包到单个 JAR 中并将其部署到另一个数据库。如果您的代码依赖于不同数据库中的视图和表单，这将非常有效，因此您无需费心隐藏常规的 Notes 设计元素。

仍然可以选择反编译此类将显示所有绑定/脚本和组件名称的类，但至少你让某人很难。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:34:18.720

帕特里克，我们隐藏了 IQJam 和 IdeaJam 评估的整个设计，一切正常。不确定如何仅隐藏应用程序的“部分”。

# php - 过去几天的 PHP 插入脚本

> ID：13234108
> 
> 赞同：0
> 
> 时间：2012-11-05T14:27:22.110
> 
> 标签：php, mysql

我需要为过去 5 年中的每一天填充一行？

```
E.g
1\. 04/11/2012
2\. 03/11/2012
3\. 02/11/2012
4\. 01/11/2012
5\. 31/10/2012
6\. etc 
```

这只是一个我运行一次并插入所有记录的 php 脚本。

这样做的原因是为了在数据库中有足够的数据对我的其他代码进行性能测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:37:13.380

像这样？

```
$date = "2007-01-01";
while ($date != "2013-01-01") {

    //do your query... not going to do any escaping for brevity
    mysql_query("INSERT INTO TABLENAME (SomeDateColumn) VALUES ('$date')");
    $date = date("Y-m-d", strtotime($date) + 86400);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:37:51.060

这将为您提供所需的日期格式：

```
date('d/m/Y', strtotime($i." days")); 
```

$i 是该日期过去/之前的天数。因此，如果 $i 为 -1，则表示一天前。我想你可以循环它，减少/增加 $i。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T14:43:03.363

```
$now = new DateTime(); // Now

$date = $new DateTime();
$date->sub(new DateInterval('P5Y')); // 5 years ago

while ($date->diff($now))->invert != 1)
{
    // insert $date into database
    // I'll leave that to you, as you were looking for a way to loop over dates

    $date->add(new DateInterval("P1D"));
} 
```

# request - DHCP IP 发现、提供、请求、确认

> ID：13234112
> 
> 赞同：0
> 
> 时间：2012-11-05T14:27:33.077
> 
> 标签：request, ip, dhcp

为什么我的 DHCP 服务器使用我的旧 IP 地址作为目标？

0.0.0.0 - 255.255.255.255 -> 发现

192.168.0.1 - **192.168.0.100** -> 报价

0.0.0.0 - 255.255.255.255 -> 请求

192.168.0.1 - **192.168.0.100** -> 确认

通常它应该使用 255.255.255.255。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:34:22.943

请求 IP 地址的机器不会根据目标地址过滤接收到的数据包，因此将哪个地址放置为目标并不重要。

服务器机器有一个 ARP 条目，它将 IP 地址连接到给定的以太网 MAC 地址（这是您真正联系客户端的方式），因此 DHCP 服务器进程可以使用该地址创建定向回复，而不是广播到整个子网。要创建没有特定 IP 地址的定向回复，则需要 DHCP 服务器创建自己的 UDP 数据包，而不是让系统来做。

# opencv - OpenCV 迭代随机森林训练

> ID：13234116
> 
> 赞同：6
> 
> 时间：2012-11-05T14:27:44.613
> 
> 标签：opencv, machine-learning, random-forest, training-data

我使用随机森林算法作为我论文项目的分类器。训练集由数千张图像组成，每张图像采样大约 2000 个像素。对于每个像素，我有数十万个特征。由于我目前的硬件限制（8G 内存，可能扩展到 16G），我只能将样本（即每个像素的特征）放入内存中，用于一张图像。我的问题是：是否可以多次调用 train 方法，每次使用不同的图像样本，并在每次调用时自动更新统计模型？我对变量重要性特别感兴趣，因为在我用整个特征集训练完整的训练集之后，我的想法是将特征的数量从几十万减少到大约 2000，只保留最重要的。

谢谢你的任何建议，丹尼尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T10:50:22.020

我不认为该算法支持增量训练。您可以考虑使用其他特征缩减方法在训练之前减小描述符的大小。或者估计所有训练图像中随机像素子集的变量重要性，尽可能多地填充到内存中......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:04:09.027

[请参阅我对这篇文章](https://stackoverflow.com/questions/12455886/random-forest-on-large-xdf-files-without-reading-into-a-dataframe/13400188#13400188)的回答。随机森林有增量版本，它们可以让你在更大的数据上进行训练。

# jquery - 我正在使用类名和动画找到 Raphael 对象，但根本不起作用

> ID：13234118
> 
> 赞同：1
> 
> 时间：2012-11-05T14:27:50.400
> 
> 标签：jquery, graphael

我有 2 个圆圈，单击大圆圈我正在使用类名找到小圆圈并尝试为小圆圈设置动画，但根本不起作用。

但是fadeId，fadeOut 属性正在工作。

我的功能：

```
var paper = new Raphael('myPaper',500,500);
var circle = paper.circle(100,100,100).attr({'fill':'red'});
circle.node.setAttribute('class','red');
var text = paper.text(100,100,"test Text").attr({'fill':'#fff'});

var smallCircle = paper.circle(300,100,50).attr({'fill':'green'}).data('id','green');
smallCircle.node.setAttribute('class','green'); 

var newSet = paper.set();

newSet.push(circle,text);

newSet.attr({cursor:'pointer'}).data('id','oval');

$('.red').on('click',function () {   
    $('.green').animate({'cx':200},5000); //animation not working.
} ) 
```

​</p>

[jsfiddle在这里](http://jsfiddle.net/Amb9b/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:34:28.643

如果要使用 Raphael 制作动画，则需要获取元素的 Raphael 对象，而不是 jQuery 对象。为此，您需要`raphaelid`从元素中获取属性，然后使用[`getById`](http://raphaeljs.com/reference.html#Paper.getById)画布的方法。

```
paper.getById($('.green')[0].raphaelid).animate({'cx': 200}, 5000); 
```

* * *

如果您有多个元素，您可能只需循环遍历每个元素并为其设置动画。

```
var anim = Raphael.animation({'cx': 200}, 5000);
$('.green').each(function() {
    paper.getById(this.raphaelid).animate(anim);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:34:03.607

`animate()`据我所知，仅更改元素的样式属性。

但是，您可以使用带有 animate 的 step 函数来挂钩它以更改其他内容：[自定义值的 jQuery animate (not a CSS property)](https://stackoverflow.com/questions/8154086/jquery-animate-of-custom-value-not-a-css-property)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:35:45.943

看起来您正试图在 DOM SVG 对象上调用动画。您需要将 raphael 引用动画化到绿色圆圈，而不是类。

```
newSet.click(function () {   
    smallCircle.animate({'cx':200},5000); //animation not working.
} ) 
```

[http://jsfiddle.net/Amb9b/8/](http://jsfiddle.net/Amb9b/8/)

# php - 索引“server_name”不存在

> ID：13234122
> 
> 赞同：2
> 
> 时间：2012-11-05T14:28:28.893
> 
> 标签：php, variables, constants, global

我尝试执行 bat，并在此文件中尝试访问此变量：

`$_SERVER['SERVER_NAME']`

但它不存在这个索引。事实上，当我尝试时`print_r($_SERVER)`，没有 `SERVER_NAME`索引。有原因吗？是因为我在 bat 中启动了这个功能吗？我有其他解决方案来获取这个变量吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T14:31:34.097

这些`$_SERVER`变量仅在服务器环境中可用（通过 Apache 或其他 Web 服务器托管 PHP），因此如果您从命令行启动它，它们将不可用。此对象的参数由 HTTP 标头填充，在您的情况下不存在。

如果您想在未设置`$_SERVER`时忽略该对象，您可以替代使用，但您的里程可能会因操作系统而异。`SERVER_NAME``php_uname("n")`

```
$server_name = (isset($_SERVER['SERVER_NAME']))? // check if SERVER_NAME is set
    $_SERVER['SERVER_NAME'] :                    // if yes, use HTTP header value
    php_uname("n");                             // if no, use php_uname() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:31:56.820

尝试

```
echo %COMPUTERNAME% 
```

相反，如果您通过 bat 文件启动。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:31:48.073

该`$_SERVER['SERVER_NAME']`变量包含 HTTP 客户端在*Host* HTTP 标头字段中提供的服务器名称。因为您不使用 HTTP，所以未定义此变量。

# java - JTable set column width not working

> ID：13234123
> 
> 赞同：0
> 
> 时间：2012-11-05T14:28:28.997
> 
> 标签：java, swing, jtable

I am trying to set column width to the length of the column name. My problem is, I am not able to set it. When I use the following code the table is becoming like this,

```
tableA.setAutoResizeMode(JTable.AUTO_RESIZE_OFF);
  for(int i = 0; i < tableA.getColumnCount(); i++) {
int columnLength = (modelA.getColumnName(i)).length();
tableA.getColumnModel().getColumn(i).setPreferredWidth(columnLength);
//  tableA.getColumnModel().getColumn(i).setMinWidth(columnLength);
//  tableA.getColumnModel().getColumn(i).setMaxWidth(columnLength);
  } 
```

I am getting the column length correctly from my table model.

When I use the above code the table is getting packed like this,

![Set Column Width](../Images/9fb70b0517b89f6632d3b4dc2cb58a3c.png)

I am not able to understand where I am doing wrong.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T14:48:02.147

正如 Dan 指出的那样，您需要根据正在使用的 Font 计算列名的实际宽度。

就像是：

```
String name = modelA.getColumnName(i);
Font f = tableA.getFont();
FontMetrics fm = tableA.getFontMetrics(f);
int width = fm.stringWidth(name);
tableA.getColumnModel().getColumn(i).setPreferredWidth(width); 
```

请注意，这是一个非常简短的示例。

如果你想让它完全正确，你需要查询每列的*渲染器*以获取 Font 和 FontMetrics 以获得正确的值。

如果您的所有渲染器都使用与 JTable 相同的字体，那么这应该没问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T14:31:44.673

需要一个以像素为单位的`setPreferredWidth`值，而列名的长度是 a 的长度（a`String`中的字符数`String`）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T14:45:07.377

*   `columnLength`== 中的数字或列`ColumnModel`，

*   标准尺寸为 80 像素

*   最小列大小为 10 像素

*   [请参阅如何获取/设置 PreferredSize](https://stackoverflow.com/a/13190975/714968)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T14:43:59.340

如果您不介意使用 SwingX，您可以使用`TableColumnExt#setPrototypeValue`允许您设置“原型”值的方法，该值将用于确定列宽。

# objective-c - Objective-C - ABMultiValueRef 获取类型 (ABAAddressBook)

> ID：13234128
> 
> 赞同：1
> 
> 时间：2012-11-05T14:28:43.803
> 
> 标签：objective-c, ios, cocoa-touch, cocoa, abaddressbook

我试图弄清楚电话号码的类型（家庭、手机、传真等），但我不知道如何使用`ABMultiValueRef`. 我可以通过以下方式获取类型：

```
CFStringRef cfLabel = ABMultiValueCopyLabelAtIndex(multiValueRef, i);

NSString *label = (__bridge NSString*) cfLabel;

NSLog(@"%@", label); // prints i.e "_$!<Mobile>!$_"

CFRelease(cfLabel); 
```

因此，当它打印时，`_$!<Mobile>!$_`我可以做一些 IF 逻辑来检查标签是否相等`_$!<Mobile>!$_`，但是如果 Apple 决定更改 Mobile 标签的值，那么将来呢？对我来说，拥有一个可以检查的常数会感觉好多了。但是我找不到可以用的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:31:33.980

这些`CFStringRef`常量在 AddressBook 框架（准确地说是 ABPerson.h）中定义：

```
kABPersonPhoneMobileLabel
kABPersonPhoneIPhoneLabel
kABPersonPhoneMainLabel
kABPersonPhoneHomeFAXLabel
kABPersonPhoneWorkFAXLabel
kABPersonPhoneOtherFAXLabel
kABPersonPhonePagerLabel 
```

尤其`kABPersonPhoneMobileLabel`具有`_$!<Mobile>!$_`价值。

请参阅[ABPerson 参考](http://developer.apple.com/library/ios/#documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html)以获取有关 AddressBook 框架定义的这些和其他常量的更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:40:44.560

您需要使用电话号码属性标签：http: [//developer.apple.com/library/ios/documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html#//apple_ref/doc/uid/TP40007210-CH991- SW41](http://developer.apple.com/library/ios/documentation/AddressBook/Reference/ABPersonRef_iPhoneOS/Reference/reference.html#//apple_ref/doc/uid/TP40007210-CH991-SW41)

# c# - Do I need to call IsolatedStorageSettings.Save method in windows phone application?

> ID：13234131
> 
> 赞同：4
> 
> 时间：2012-11-05T14:28:51.850
> 
> 标签：c#, .net, windows-phone-7, application-settings

From the remarks section of [IsolatedStorageSettings.Save Method](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings.save%28v=vs.95%29.aspx) page:

> Data written to the IsolatedStorageSettings object is saved when the application that uses the class is closed. This can occur when the user closes the Web browser, refreshes a page, or browses away from the page. If you want your application to write to isolated storage immediately, you can call the Save method in application code.

So, I can never call the `Save` method and every setting will be in safety. I'm just curious in what usecases should I use the `Save` method?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-05T14:54:48.150

你必须给`IsolatedStorageSettings.Save`自己打电话。[正如课程参考页面](http://msdn.microsoft.com/en-us/library/system.io.isolatedstorage.isolatedstoragesettings%28v=vs.95%29.aspx)底部的“提示和警告”部分所述，您必须自己保存它以确保将其写入文件。

> 写入值时，IsolatedStorageSettings 类不会自动保存到磁盘。保存在终结器中完成，通常但不总是在应用程序关闭时运行。为了确保实际执行保存，我们需要在每次写入或一组写入后调用 Save 方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-13T15:18:36.253

以下是 2014 年 2 月 14 日的 IsolatedStorageSettings.Save 方法的文档：

[http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.io.isolatedstorage.isolatedstoragesettings.save(v=vs.105).aspx](http://msdn.microsoft.com/en-us/library/windowsphone/develop/system.io.isolatedstorage.isolatedstoragesettings.save(v=vs.105).aspx)

摘录自它（见警告）：

> 但是，您不必在 Windows Phone 上调用 Save 方法。您存储在 IsolatedStorageSettings 对象中的数据会自动保存。

我的开发经验也证明 - 设置会自动保存，无需显式调用 Save 方法。但请注意，只有当您关闭整个应用程序时才会发生这种情况，正如 MSDN 中所述：

> 关闭使用该类的应用程序时，将保存写入到 IsolatedStorageSettings 对象的数据。如果您希望您的应用程序立即写入隔离存储，您可以在应用程序代码中调用 Save 方法。

# javascript - XML HTTP Req return only Undefined

> ID：13234132
> 
> 赞同：0
> 
> 时间：2012-11-05T14:28:57.153
> 
> 标签：javascript, xml, http

the code my brother wrote worked before but i think i changed him by mistake maybe you can see why he wont return the XML data.

```
function CheckFromTo(From,To) 
{
    //alert(From + "," + To);
    var xmlHttp = null;
    var Url = "http://www.fpl.co.il/bo/info/CheckFromTo.aspx?FROM=" + From + "&TO=" + To + "";
xmlHttp = new XMLHttpRequest(); 
    xmlHttp.onreadystatechange = ProcessRequest;
    xmlHttp.open( "GET", Url, true );
    xmlHttp.send(null);
    return (ProcessRequest());

    function ProcessRequest() 
    {
            if ( xmlHttp.readyState == 4 && xmlHttp.status == 200 ) 
            {
                    var response = xmlHttp.responseText;
                    return response;    
            }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:44:39.253

查看您的 XMLHttprequest 对象

```
xmlHttp.open( "GET", Url, true );  <-- the true Boolean 
```

open 方法中的真正布尔值意味着您正在使用异步调用，这意味着您不能返回值。欢迎来到异步编程。

为什么它返回未定义？

当 stats 不是 200 且 readystate 不是 4 时，ProcessRequest 会发生什么？什么都没有，它什么都不返回，因此未定义。

处理异步调用时需要使用回调函数。这意味着将您的逻辑分解为多个步骤。

# python - 从 sqlalchemy 获取关系元数据

> ID：13234137
> 
> 赞同：1
> 
> 时间：2012-11-05T14:29:14.207
> 
> 标签：python, orm, sqlalchemy, metadata

我有一个非常简单的用户类定义：

```
class User(Base):
    implements(interfaces.IUser)
    __tablename__ = 'users'
    #Fields description
    id = Column(Integer, primary_key=True)

    client_id = Column(Integer, ForeignKey('w2_client.id'))
    client = relationship("Client", backref=backref('users', order_by=id)) 
```

我想自动生成一个 GUI 来编辑对象用户（和其他类型的类）。所以我需要获取表的所有元数据，例如我可以这样做：

```
 for c in User.__table__.columns:
        print c.name, c.type, c.nullable, c.primary_key, c.foreign_keys 
```

但我无法获得有关“客户”关系的任何信息，c.foreign_keys 只向我显示与foreign_keys 相关的表，而不是我定义的属性“客户”。如果我的问题不清楚，请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:48:57.770

确实不容易获得。经过一些逆向工程后，我不得不提出自己的功能。

这是我使用的元数据。我与您正在寻找的东西几乎没有什么不同，但也许您可以使用它。

```
# structure returned by get_metadata function.
MetaDataTuple = collections.namedtuple("MetaDataTuple",
        "coltype, colname, default, m2m, nullable, uselist, collection")

def get_metadata_iterator(class_):
    for prop in class_mapper(class_).iterate_properties:
        name = prop.key
        if name.startswith("_") or name == "id" or name.endswith("_id"):
            continue
        md = _get_column_metadata(prop)
        if md is None:
            continue
        yield md

def get_column_metadata(class_, colname):
    prop = class_mapper(class_).get_property(colname)
    md = _get_column_metadata(prop)
    if md is None:
        raise ValueError("Not a column name: %r." % (colname,))
    return md

def _get_column_metadata(prop):
    name = prop.key
    m2m = False
    default = None
    nullable = None
    uselist = False
    collection = None
    proptype = type(prop)
    if proptype is ColumnProperty:
        coltype = type(prop.columns[0].type).__name__
        try:
            default = prop.columns[0].default
        except AttributeError:
            default = None
        else:
            if default is not None:
                default = default.arg(None)
        nullable = prop.columns[0].nullable
    elif proptype is RelationshipProperty:
        coltype = RelationshipProperty.__name__
        m2m = prop.secondary is not None
        nullable = prop.local_side[0].nullable
        uselist = prop.uselist
        if prop.collection_class is not None:
            collection = type(prop.collection_class()).__name__
        else:
            collection = "list"
    else:
        return None
    return MetaDataTuple(coltype, str(name), default, m2m, nullable, uselist, collection)

def get_metadata(class_):
    """Returns a list of MetaDataTuple structures.
    """
    return list(get_metadata_iterator(class_))

def get_metadata_map(class_):
    rv = {}
    for metadata in get_metadata_iterator(class_):
        rv[metadata.colname] = metadata
    return rv 
```

但它没有主键。我为此使用了一个单独的函数。

```
mapper = class_mapper(ORMClass)
pkname = str(mapper.primary_key[0].name) 
```

也许我应该将主键名称放在元数据中。

# jquery - POSTing an unescaped JSON array

> ID：13234142
> 
> 赞同：2
> 
> 时间：2012-11-05T14:29:33.077
> 
> 标签：jquery, json

I'm trying to POST some JSON data to be processed by PHP. When it arrives on the server-side, the data is escaped and I can't reliably unescape it.

```
 var jsondata = '{"name":"Foo","email":"name@address.com"},{"name":"Bar","email":"name@address.com"}';
    $.ajax({
        type: "POST",
        url: "save.php",
        dataType: "json",
        processData: false,
        data: { json: '['+jsondata+']'},
    }); 
```

`$_POST['json']` then contains:

```
[{\"name\":\"Foo\",\"email\":\"name@address.com\"},{\"name\":\"Foo\",\"email\":\"name@address.com\"}] 
```

How can I send unencoded JSON post-data? I thought `processData: false` would cover that.

* * *

To illustrate the error server-side:

```
<?php

$_POST['json-bad'] = '[{\"name\":\"Foo\",\"email\":\"name@address.com\"},{\"name\":\"Foo\",\"email\":\"name@address.com\"}]';
$data_bad = json_decode($_POST['json-bad']);
var_dump($data_bad); // returns "NULL"

$_POST['json-good'] = '[{"name":"Foo","email":"name@address.com"},{"name":"Bar","email":"name@address.com"}]';
$data_good = json_decode($_POST['json-good']);
var_dump($data_good); // returns array as expected

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:38:05.430

JSON（JavaScript 对象表示法）只是以 javascript 格式表达对象的方式。

我的印象是您只需将一个对象从 javascript 传递到您的服务器。

在这种情况下，您不需要进行任何特定的操作

```
persons = {"name":"Foo","email":"name@address.com"},{"name":"Bar","email":"name@address.com"};
$.ajax({
    type: "POST",
    url: "save.php",
    dataType: "json",
    processData: false,
    data: {'persons': persons},
}); 
```

在服务器端

```
echo $_POST['persons'][0]['name']; 
```

你会得到

```
Foo 
```

这不是你想要做的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:17:38.163

如果您的数据来自表单，您将需要使用下面的一些代码，如果不是全部的话。此代码采用 jquery 表单对象，并将`stringify`其以适当的方式进行，您可以轻松地执行类似的操作

```
$json = json_decode($_POST['json'], true); 
echo $json['email']; 
```

这是JS

```
$.ajax({
    type: "POST",
    url: "save.php",
    dataType: "json", //NOTE: indicates data type being RETURNED, not PASSED
    processData: false,
    data: { json: getJson( $('#formId') )} //NOTE: REMOVE THIS EXTRA COMMA
});

function getJson(o){
    return (JSON.stringify(o.serializeObject()));   
}
$.fn.serializeObject = function(){
    var o = {};
    var a = this.serializeArray();
    $.each(a, function() {
        if (o[this.name]) {
            if (!o[this.name].push) {
                o[this.name] = [o[this.name]];
            }
            o[this.name].push(this.value || '');
        } else {
            o[this.name] = this.value || '';
        }
    });
    return o;
}; 
```

注意：旧版浏览器要求您包含`json2.js`此处找到的库：[http ://www.crockford.com/javascript/jsmin.html](http://www.crockford.com/javascript/jsmin.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:40:02.470

你不能只使用[json_decode](http://www.php.net/manual/en/function.json-decode.php)吗？

# ruby - 返回匹配为数组的元素

> ID：13234145
> 
> 赞同：1
> 
> 时间：2012-11-05T14:29:36.217
> 
> 标签：ruby, testing, webdriver, watir

我是 Watir 世界的新手，在以前的公司中使用过 webdriver 和 geb。我想知道 Watir 是否提供任何类似于 webdriver 中的 get_elements 方法的方法。请参阅下面的示例。

想象一下下面的 html 存在于一个更大的页面中

```
<div class="someClass">someText</div>
<div class="someClass">someMoreText</div>
<div class="someClass">evenMoreText</div> 
```

我想通过定位给定类的所有元素并遍历它们来对每个 div 做出一些断言。使用 webdriver，我可以这样做：

```
elements = driver.get_elements(:css, ".someClass")
elements.each do |element|
    //some assert on element
end 
```

Watir 是否提供了等效的构造？我在 Watir 文档中找不到任何有用的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:44:40.737

你可以做：

```
elements = driver.elements(:css => '.someClass') 
```

或者如果你知道它们都是 div，你应该这样做：

```
elements = driver.divs(:css => '.someClass') 
```

这两种方法都将返回与您的条件匹配的元素集合。在第一种情况下，它将匹配任何标签类型，而在第二种情况下，结果将仅限于 div。

然后，使用上述任何一种方法，您都可以以相同的方式进行迭代：

```
elements.each do |element|
    //some assert on element
end 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T21:19:35.257

`:css`我建议您不要使用定位器，而是使用`:class`定位器，因为它通常更快并且使您的测试更具可读性：

```
elements = driver.divs(:class => 'someClass') 
```

另外，不要忘记`:id`,`:name`和`:text`其他。

# c# - ASP.NET LDAP 过滤

> ID：13234157
> 
> 赞同：0
> 
> 时间：2012-11-05T14:30:21.627
> 
> 标签：c#, asp.net, ldap

有时，在从 AD 进行搜索时，我会收到 System.Byte[] 响应。如果我在 vs2010 中打开源页面文件并重新保存搜索返回没有问题。

注意我将结果集绑定到 xml。我想这与它有很大关系。

这是一个代码摘录：

* * *

```
 public void bindGridView(string sortExp, string sortOrder)
  {
    DataSet aDataSet = new DataSet();
    XmlDocument xd = LDAPConn(sortExp, sortOrder);
    aDataSet.ReadXml(new StringReader(xd.InnerXml));
    // Bind the DataSet to the grid view
    DataView dv = new DataView();
    string sortMsg = "";
    switch (sortExp)
    {
      case "sn":
        sortMsg = "Lastname";
        break;
      case "department":
        sortMsg = "Department";
        break;
      case "Title":
        sortMsg = "Title";
        break;
      case "physicalDeliveryOfficeName":
        sortMsg = "Store";
        break;
      default:
        sortMsg = sortExp;
        break;
    }
    if (aDataSet.Tables.Count > 0)
    {
      try
      {
        debug(true, "<h2 style='float:right;'><b>Sorting By:</b><strong style='color:#880000;'>" + sortMsg + "</strong> &amp; <b>Direction:</b><strong style='color:#880000;'>" + sortOrder.ToString() + "</strong></h2>");
        dv = aDataSet.Tables[0].DefaultView;
        GridView1.DataSource = dv;
        GridView1.DataBind();
      }
      catch (Exception e)
      {
        debug(true, "<br/><b style='color: rgb(255,0,0);'>Your search returned no results.</b><br/><span style=''>" + e.Message + "<br/>" + e.InnerException + e.Source + "</span>");
      }
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T17:31:40.213

我决定对场地进行消毒，如果`string eval = System.Byte[]`

```
public string SanitizeField(SearchResultCollection result, string field)
{
  StringBuilder sb = new StringBuilder();
  foreach (object val in result[0].Properties[field])
  {
    sb.Append("<" + field + ">" + val + "</" + field + ">");
  }
  return sb.ToString();
} 
```

# automatic-ref-counting - Release retained property pointing at self.view

> ID：13234160
> 
> 赞同：0
> 
> 时间：2012-11-05T14:30:29.040
> 
> 标签：automatic-ref-counting, retain, viewdidunload

In an instance of an `UIViewController` with ARC best practice would be to "release" any retained subviews of the main view (e.g. `self.myOutlet = nil`) in `- viewDidUnload`, and my guess is `self.view = nil` isn't strictly necessary at this point.

What to do if an additional `retain`ed property is defined and assigned as...

> self.anotherProperty = self.view;

or

> _anotherProperty = self.view; // assuming "_anotherProperty" is the ivar

... is `self.anotherProperty = nil` necessary then?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T21:44:40.257

`viewDidUnload`（我假设我们正在谈论在 iOS 6 之前的版本上运行时，因为在 iOS 6 中不再卸载视图，因此不再`viewDidUnload`调用）是“必要的”；这只是卸载东西的可选机会。

但是如果你想按照 的约定正确卸载东西`viewDidUnload`，你应该 nil 你的财产吗？是的。1）如果没有，你的属性仍然会保留视图对象，防止它被释放，这是卸载视图的点。2) 视图已经被卸载，也`self.view`就是设置为nil，当我们决定加载视图时，会被设置为新加载的视图。如果您希望您的属性始终指向`self.view`，那么您需要效仿并在卸载时将其设置为 nil 并将其设置为`viewDidLoad`.

# c# - Searching specific indexes in arrays for specific numbers

> ID：13234164
> 
> 赞同：3
> 
> 时间：2012-11-05T14:30:45.433
> 
> 标签：c#, arrays, winforms, indexing

Hi there is there a way to check specific integer array indexes for specific numbers in C#; for example what I would love to have worked would be:

```
 if(si[6] || si[7] || si[8] == 3)
     {
      MessageBox.Show("3 detected")
     }
    else
    {
     continue();
    { 
```

Obviously this doesn't work. Is there a clean way to do this? Thank you for looking.

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T14:34:48.103

```
var indexes = new int[] {6, 7, 8};
if (indexes.Any(i => si[i] == 3))
{
    MessageBox.Show("3 detected")
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T14:32:09.883

最简单的方法是进行三个单独的检查：

```
if (si[6] == 3 || si[7] == 3 || si[8] == 3) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T14:40:27.220

您可以使用带有参数的方法更简洁地执行此操作：

```
public static bool HasValue(int value, params int[] itemsToCheck)
{
    bool valueDetected = false;
    foreach(var item in itemsToCheck)
    {
        valueDetected |= item == value;
    }

    return valueDetected;
} 
```

然后你可以这样称呼它：

```
if (HasValue(3, si[6], si[7], si[8]))
{

} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T14:44:14.620

您可以使用 Array.IndexOf 函数来查找整数的索引。如果数组有整数，那么它将返回索引，否则它将返回-1。

像这样 int[] a = new int[] { 1, 2 }; int c = Array.IndexOf(a, 2);

# powershell - 使用 PowerShell 以 UTF-8 编写文件，无需 BOM，无需双重编码

> ID：13234167
> 
> 赞同：1
> 
> 时间：2012-11-05T14:30:47.820
> 
> 标签：powershell, encoding, recursion, utf-8, byte-order-mark

我在这个论坛上看到了几个很棒的解决方案，可以在没有 BOM 的情况下转换为 UTF-8。我需要能够使用 powershell 或类似的递归方式转换一系列文件。

如果我采用 UTF-8 文档并将其转换为 UTF-8，则字符将被双重编码。有没有办法防止这种行为或检测文件是否已经是没有 BOM 的 UTF-8？

```
foreach($i in ls -recurse -filter "*.*") {
    if (
        $i.Extension.ToLower() -eq ".html" -or 
        $i.Extension.ToLower() -eq ".htm" -or 
        $i.Extension.ToLower() -eq ".php" -or 
        $i.Extension.ToLower() -eq ".txt"
    ) {
        $MyFile = Get-Content $i.fullname 
        [System.IO.File]::WriteAllLines($i.fullname, $MyFile)
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:34:33.800

您可以提供编码`Get-Content`：

```
Get-Content $i.FullName -Encoding UTF8 
```

# android - Android 上的可变视频播放速率

> ID：13234174
> 
> 赞同：6
> 
> 时间：2012-11-05T14:31:14.497
> 
> 标签：android, video

我需要制作一个可以将播放速度从 0 逐渐更改为大约 200% 的视频播放器。它必须运行得非常快，因为它将播放以高帧率 (60 FPS) 录制的高清电影。如果无法支持高清，可以使用较低的分辨率。

该代码只需要在具有硬件 h264 解码器和 ICS（没有可用于目标平板电脑的 Jelly Bean）的相对高端的 Android 平板电脑上运行。

我没有找到任何支持在 Android 系统中更改视频播放速率，我怀疑我需要深入研究 JNI 才能到达那里，但想先在这里问一下是否有人有一些代码、建议或指针可以帮我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-18T06:42:28.390

我从 vitamio 获得了 android 自定义播放器。在那，媒体播放器有一个设置播放速度的选项。即 mMediaPlayer.setPlaybackSpeed(speed); 设置视频和音频播放速度参数：速度例如0.8或2.0，默认为1.0，范围在[0.5-2]

请参考链接： http: [//www.vitamio.org/en/docs/news/2013/0529/19.html](http://www.vitamio.org/en/docs/news/2013/0529/19.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T22:48:23.773

我一直在考虑做类似的事情，以下是我的一些发现可能对您有用：

1.  如果你已经下载了 android ndk r7 或更高版本，ndk->samples->native-media 是一个使用 jni 执行原生 android 媒体播放器的示例项目。
2.  这使用了 OpenMAXAL.h 库（ndk 中的）：您会注意到一个名为 XA_IID_PLAYBACKRATE 的接口。有[不错的参考卡](http://www.khronos.org/openmax/al/)，但样品薄。听起来它应该做我们想做的事。
3.  该示例指示 a `minSdkVersion = 14`，因此它应该可以在您的 ICS 设备上运行。
4.  我在我唯一可用的 ICS+ 设备上测试了这个，运行 4.2 (Jellybean) 的 16GB ASUS Nexus7，我在我的笔记日志中得到了以下输出（省略了我自己的调试语句）

    ```
    01-15 14:19:33.384: W/libOpenSLES(6037): class MediaPlayer interface 1 requested but unavailable MPH=75
    01-15 14:19:33.384: W/libOpenSLES(6037): Leaving Object::GetInterface (SL_RESULT_FEATURE_UNSUPPORTED)
    01-15 14:19:33.384: A/libc(6037): jni/native-media-jni.c:409: Java_com_example_nativemedia_NativeMedia_createStreamingMediaPlayer: assertion "XA_RESULT_SUCCESS == res" failed
    01-15 14:19:33.384: A/libc(6037): Fatal signal 11 (SIGSEGV) at 0xdeadbaad (code=1), thread 6037 (ple.nativemedia) 
    ```

    在加载媒体流（或文件）并创建本机媒体播放器实例的函数中。这些错误非常明确地表明我的设备/解码器、我的操作系统或我的文件类型不支持该功能。我实际上不确定它是哪一个（或组合），但如果它是第一个，这可能意味着没有很多设备可以支持您想要的功能。也许 Nexus7 是一个异常值，但不幸的是，这仍然是平板电脑空间的一个相当大的部分，这意味着我们不能期望其他设备有太多的一致性。

如果有人遵循这些说明并成功运行，请发表评论 - 我将继续对此进行修改并尝试使其正常工作，并将更新任何进展。

# sql - 使用 xml.modify 将参数插入 xml 列的特定元素

> ID：13234175
> 
> 赞同：12
> 
> 时间：2012-11-05T14:31:18.513
> 
> 标签：sql, xml, sql-server-2008, tsql, xquery

我想使用存储过程将一些作为参数传入的值插入到列的 xml 中的元素中。到目前为止，我有以下参数：

```
@profile_id int,
@user_id nvarchar(50),
@activity_name nvarchar(50),
@display_name nvarchar(50) 
```

检索所需的 xml：

```
DECLARE @profiles_xml xml
SET @profiles_xml = (SELECT profiles from tbl_applied_profiles WHERE profiles.value('(Profile/ID)[1]','int')= @profile_id) 
```

@profiles_xml 中的列中的 xml 如下所示：

```
<Profile>
  <ID>20</ID>
  <User>
    <ID>BC4A18CA-AFB5-4268-BDA9-C990DAFE7783</ID>
    <Name>somename</Name>
    <Activities>
      <Activity>
         <Name>activity1</Name>
      </Activity>
    </Activities>
  </User>
</Profile> 
```

尝试向具有特定 ID 的用户插入活动名称和显示名称：

```
SET @profiles_xml.modify('
    insert
    if(/Profile/User/ID=sql:variable("@user_id"))
    then Activity[Name=sql:variable("@activity_name")][DisplayName=sql:variable("@display_name")]
    else()
    as first
    into (/Profile/User/Activities)[1]') 
```

我也试过这个没有成功：

```
 SET @devices_xml.modify('
    insert /Profile/User[ID=sql:variable("@user_id")]/Activity[Name=sql:variable("@activity_name")][DisplayName=sql:variable("@display_name")]
    into (/Profile/User/Activities)[1]') 
```

还有这个：

```
 SET @devices_xml.modify('
insert
 /Profile/User[ID=sql:variable("@user_id")]/Activities/Activity[Name=sql:variable("@activity_name")][DisplayName=sql:variable("@display_name")]
    into (/Profile/User/Activities)[1]') 
```

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-05T14:40:19.667

```
declare @XML xml = '
<Profile>
  <ID>20</ID>
  <User>
    <ID>BC4A18CA-AFB5-4268-BDA9-C990DAFE7783</ID>
    <Name>somename</Name>
    <Activities>
      <Activity>
         <Name>activity1</Name>
      </Activity>
    </Activities>
  </User>
</Profile>'

declare @user_id nvarchar(50) = '20'
declare @activity_name nvarchar(50) = 'activity1'
declare @display_name nvarchar(50) = 'displayname1'

set @xml.modify('insert <DisplayName>{sql:variable("@display_name")}</DisplayName>
                 into (/Profile[ID = sql:variable("@user_id")]
                       /User/Activities/
                       Activity[Name = sql:variable("@activity_name")])[1]') 
```

结果：

```
<Profile>
  <ID>20</ID>
  <User>
    <ID>BC4A18CA-AFB5-4268-BDA9-C990DAFE7783</ID>
    <Name>somename</Name>
    <Activities>
      <Activity>
        <Name>activity1</Name>
        <DisplayName>displayname1</DisplayName>
      </Activity>
    </Activities>
  </User>
</Profile> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:38:22.450

试试这个

```
declare @ins xml 
    '<Activity><Name>'+
    @activity_name+
    '</Name><DisplayName>'
    +@display_name+
    '</DisplayName></Activity>'
SET @devices_xml.modify('
    insert sql:variable("@ins") into (/Profile[ID=sql:variable("@user_id")]/User/Activities)[1]') 
```

或者

```
SET @devices_xml.modify('
      insert <Activity>
             <Name>{sql:variable("@activity_name")}</Name>
             <DisplayName>{sql:variable("@display_name")}</DisplayName>
             </Activity> 
      into (/Profile[ID=sql:variable("@user_id")]/User/Activities)[1]'    ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T14:52:27.690

不确定我是否完全理解您的逻辑，但您可以使用带有大括号的 sql:variable 插入 xml，例如

```
DECLARE @profiles_xml xml

set @profiles_xml = '<Profile>
  <ID>20</ID>
  <User>
    <ID>BC4A18CA-AFB5-4268-BDA9-C990DAFE7783</ID>
    <Name>somename</Name>
    <Activities>
      <Activity>
         <Name>activity1</Name>
      </Activity>
    </Activities>
  </User>
</Profile>'

SELECT 'before' s, DATALENGTH(@profiles_xml) dl, @profiles_xml

DECLARE @user_id CHAR(36), @activity_name NVARCHAR(MAX), @display_name NVARCHAR(MAX)
SELECT @user_id = 'BC4A18CA-AFB5-4268-BDA9-C990DAFE7783', @activity_name = 'TEST ACTIVITY NAME', @display_name = 'TEST DISPLAY NAME'

SET @profiles_xml.modify('
    insert <Activity><Name>{sql:variable("@activity_name")}</Name><DisplayName>{sql:variable("@display_name")}</DisplayName></Activity>
    as first
    into (/Profile/User/Activities)[1]')

SELECT 'after' s, DATALENGTH(@profiles_xml) dl, @profiles_xml 
```

# java - 我在哪里可以找到openjdk的ext文件夹？

> ID：13234177
> 
> 赞同：1
> 
> 时间：2012-11-05T14:31:21.943
> 
> 标签：java, openjdk

我需要在我的 java 安装的 ext 文件夹中放一个 jar 来[安装扩展](http://docs.oracle.com/javase/tutorial/ext/basics/install.html)。但不知何故，我无法找到这个文件夹。

我在crunchbang linux下使用openjdk 6。谁能帮帮我。

打招呼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:44:09.340

在控制台中执行查找命令

```
 find / -name "your key word" 
```

在您的情况下，密钥可能是 java 、 openjdk 或 ext 等

# sql-server - 需要在 Sql Express 2008 中从当天提取具有特定日期范围的数据

> ID：13234184
> 
> 赞同：3
> 
> 时间：2012-11-05T14:31:43.407
> 
> 标签：sql-server, getdate, datepart

在我的桌子上，我有一个“Datemodified”列。我将能够根据该列提取结果。我希望能够从早上 6 点到下午 6 点拉任何东西。该查询需要能够每天使用，因此我所看到的方式使用特定日期，并且我无法获得我为我的特定案例寻找的任何查询。

这是我到目前为止所做的工作，它拉动了正确的时间框架，但我需要它只在当天运行。谢谢大家！

```
SELECT 
  Assignment
  , Datemodified
  , General
  , IncNumber
  , NextSteps
  , PDCRStatus
  , RootCause
  , Status
  , Summary
  , Timings
  , UserID 
FROM 
  Turnover 
WHERE 
  DATEPART(HOUR, datemodified) between 06 and 18 
  --AND datemodified = GETDATE() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:36:28.923

将您的 datemodified 字段转换为没有时间的日期并对 getdate() 执行相同操作，然后您可以比较它们...

CONVERT(NVARCHAR(50),datemodified,103) = CONVERT(NVARCHAR(50),GETDATE(),103)

所以你得到：

SELECT Assignment, Datemodified, General, IncNumber, NextSteps, PDCRStatus, RootCause, Status, Summary, Timings, UserID FROM Turnover WHERE DATEPART(HOUR, datemodified) 在 06 和 18 之间并且 CONVERT(NVARCHAR(50),datemodified,103) = CONVERT( NVARCHAR(50),GETDATE(),103)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:36:18.167

像这样的东西会起作用：

```
SELECT Assignment, Datemodified, General, IncNumber, NextSteps, PDCRStatus, RootCause, Status, Summary, Timings, UserID 
FROM Turnover 
where (Datemodified >= dateadd(hh, SELECT CAST( CONVERT( CHAR(8), GetDate(), 112) AS DATETIME),  6) and  
   (Datemodified <= dateadd(hh, SELECT CAST( CONVERT( CHAR(8), GetDate(), 112) AS DATETIME), 18) ) 
```

# codeigniter-2 - 锚文本 - 你能隐藏它吗？（网址助手）

> ID：13234186
> 
> 赞同：0
> 
> 时间：2012-11-05T14:31:50.063
> 
> 标签：codeigniter-2, codeigniter-form-helper

反正有没有隐藏CI生成的锚文本？我知道我可以通过 CSS 隐藏它（即负文本缩进），但这似乎是很多不必要的工作。为什么我不只使用常规的 HTML 编码锚？

```
<?php echo anchor(base_url(),''); ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-24T01:51:54.103

也许他们认为人们可能会错误地而不是设计地传递空白字符串，我不知道也无法回答您问题的那一部分。

在 URL 帮助程序中使用 CodeIgniter 锚点方法具有在必要时自动添加网站的基本路径的优点。

如果你想继续使用 CodeIgniter 帮助器并且拥有没有锚文本的锚，你有几个选择：

选项 1：在第二个参数中添加一个空格：

```
<?php echo anchor(base_url(),' '); ?> 
```

选项 2：扩展 URL 帮助程序并删除行为：

进入 application\helpers 并创建一个新文件，名为`MY_url_helper.php`

然后，您可以将代码放在那里以替换锚方法或定义全新的方法。

以下是您可以放入文件中的一些代码示例：（我已经在方便的 CodeIgniter 安装中修改了 url_helper 中的代码）

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

if ( ! function_exists('anchor_hide_text'))
{
    function anchor_hide_text($uri = '', $title = '', $attributes = '')
    {
        $title = (string) $title;

        if ( ! is_array($uri))
        {
            $site_url = ( ! preg_match('!^\w+://! i', $uri)) ? site_url($uri) : $uri;
        }
        else
        {
            $site_url = site_url($uri);
        }

        if ($attributes != '')
        {
            $attributes = _parse_attributes($attributes);
        }

        return '<a href="'.$site_url.'"'.$attributes.'>'.$title.'</a>';
    }
} 
```

或者

```
<?php  if ( ! defined('BASEPATH')) exit('No direct script access allowed');

function anchor($uri = '', $title = '', $attributes = '')
{
    $title = (string) $title;

    if ( ! is_array($uri))
    {
        $site_url = ( ! preg_match('!^\w+://! i', $uri)) ? site_url($uri) : $uri;
    }
    else
    {
        $site_url = site_url($uri);
    }

    if ($attributes != '')
    {
        $attributes = _parse_attributes($attributes);
    }

    return '<a href="'.$site_url.'"'.$attributes.'>'.$title.'</a>';
} 
```

# python - “错误：找不到 Oracle 软件安装”尝试安装 cx_Oracle 时

> ID：13234196
> 
> 赞同：12
> 
> 时间：2012-11-05T14:32:16.047
> 
> 标签：python, oracle, cx-oracle

新手在这里尝试使用python做一些数据库分析。在安装 CX_oracle（通过 easy_install）时，我不断收到错误消息：“错误：找不到 Oracle 软件安装”。

问题是我的本地机器上没有 oracle，我正在尝试使用 python 连接到主 oracle 服务器。我已经设置了另一个程序来执行此操作（visualdb），并且我有一个用作驱动程序的 .jar 文件，但我不确定在这种情况下如何使用它。

有什么建议么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T14:50:18.130

不要使用 easy_install 或 pip，它们在安装 cx_Oracle 时并不能很好地工作，因为安装脚本不会自动设置许多环境依赖项。你需要得到一个oracle客户端驱动，最快找到的是instantclient。然后将您的 ORACLE_HOME 和 PATH 指向驱动程序的安装位置，并安装 cx_Oracle 本身。你应该很好去追求。

请参阅：[Windows 上的 easy_install cx_Oracle（python 包）](https://stackoverflow.com/questions/11245985/easy-install-cx-oracle-python-package-on-windows)

问题是关于 Windows 的，但答案包括有关 *nix 的信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-12-11T21:37:21.343

# 安装 Oracle 客户端

1.  下载 Oracle 客户端：[http ://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html](http://www.oracle.com/technetwork/topics/linuxx86-64soft-092277.html)

    *示例*：oracle-instantclient12.2-basic-12.2.0.1.0-1.x86_64.rpm

2.  安装外星人：

    ```
    sudo apt-get install alien 
    ```

3.  在 Ubuntu 系统中安装 RPM：

    ```
    sudo alien -i oracle-instantclient12.2-basic-12.2.0.1.0-1.x86_64.rpm` 
    ```

4.  添加到环境变量

    ```
    vim ~/.bashrc
    export ORACLE_HOME=/usr/lib/oracle/12.2/client64/lib/
    export LD_RUN_PATH=/usr/lib/oracle/12.2/client64/lib:$LD_RUN_PATH
    source ~/.bashrc
    sudo ln -s /usr/lib/oracle/12.2/client64 $ORACLE_HOME/include` 
    ```

# 最后

```
pip install cx-Oracle 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-02-26T11:28:54.500

我在安装 64 位 Oracle 客户端的同时尝试安装 32 位版本时收到此消息。

什么对我有用：重新安装了 64 位的 python（由于某种原因有 32 个），使用 Windows 安装程序安装了 cx_Oracle（64 位版本），它运行良好。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-05T14:42:53.897

我安装了`cx_Oracle`，但我还必须安装一个 Oracle 客户端才能使用它（该`cx_Oracle`模块只是在 Python 中与 Oracle 客户端交互的一种常见且 Python 的方式）。

因此，您必须将变量设置`ORACLE_HOME`为 Oracle 客户端文件夹（在 Unix 上：例如通过 shell；在 Windows 上：如果配置面板的环境变量中不存在新变量，则创建一个新变量）。您的文件夹`$ORACLE_HOME/network/admin`（`%ORACLE_HOME%\network\admin`在 Windows 上）是您放置`tnsnames.ora`文件的地方。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-04-01T04:52:19.377

我按照此[链接](http://joelvasallo.com/?p=276)说明进行操作，它对我有用。

从以下位置下载 Oracle Basic/SDK：

[Oracle Instant Client Basic](http://www.oracle.com/technetwork/topics/intel-macsoft-096467.html)

[Oracle 即时客户端 SDK](http://www.oracle.com/technetwork/topics/intel-macsoft-096467.html)

```
mkdir /Users/<username_here>/oracle
mv /Users/<username_here>/Downloads/instantclient-*         
/Users/<username_here>/oracle
cd /Users/<username_here>/oracle
unzip instantclient-basic-macos.x64-11.2.0.3.0.zip
unzip instantclient-sdk-macos.x64-11.2.0.3.0.zip
cd instantclient_11_2/sdk
unzip ottclasses.zip
cd ..
cp -R ./sdk/* .
cp -R ./sdk/include/* .
ln -s libclntsh.dylib.11.1 libclntsh.dylib
ln -s libocci.dylib.11.1 libocci.dylib
vim ~/.bash_profile (and below to bash_profile)

  export ORACLE_HOME=/Users/<username_here>/oracle/instantclient_11_2
  export DYLD_LIBRARY_PATH=$ORACLE_HOME
  export LD_LIBRARY_PATH=$ORACLE_HOME

pip install cx_Oracle 
```

在此之后，如果您收到如下错误：

1）：库未加载：
/ade/b/3071542110/oracle/rdbms/lib/libclntsh.dylib.11.1

你必须 ：

```
sudo mkdir -p /ade/b/3071542110/oracle/rdbms/lib/
cd /ade/b/3071542110/oracle/rdbms/lib/
sudo ln -s /opt/oracle/instantclient/libclntsh.dylib.11.1 libclntsh.dylib.11.1 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-26T16:12:57.730

### 给 Ubuntu 用户的提示

配置 .bashrc 环境变量后，就像在其他答案中解释的那样，不要忘记重新加载终端窗口，输入`$SHELL`.

# jquery-mobile - Jquery移动限制角色页面？

> ID：13234199
> 
> 赞同：1
> 
> 时间：2012-11-05T14:32:17.997
> 
> 标签：jquery-mobile, limit, webpage

我正在 jqm 中开发我的第一个应用程序。我有一个独特的 index.php 包含很多这样的代码块

```
<div data-role="page" id="scheda7">
  <div data-role="header" class="ui-bar-b">
    <h1><?php $qry_nomeScheda7 = "select * from nomeScheda where id='7'"; $rs_nomeScheda7 = connetti($qry_nomeScheda7); $valore7 = mysql_fetch_array($rs_nomeScheda7); echo $valore7[nomeScheda];
       ?></h1>
  </div>
       <?php include 'scheda7.php'; ?>
       <?php include 'footer.php'; ?>
</div> 
```

我的应用程序的每一页都有一个。

对于每个页面，我都有一个单独的 schedaN.php，其中包含自己的 html 和 javascript。现在发生在我身上的是一些页面加载正确，而其他页面仍然卡在加载中（旋转轮不停地转动）。未加载的页面不一样......也许我只是在索引中向上或向下移动一个页面，它开始工作或停止。所以我在猜测：我注意到页面少于七个时似乎可以工作......您可以在应用程序中包含的数据角色页面的数量有一些限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:05:30.380

而不是像这样进行多个数据库查询，

```
<?php $qry_nomeScheda7 = "select * from nomeScheda where id='7'"; $rs_nomeScheda7 = connetti($qry_nomeScheda7); $valore7 = mysql_fetch_array($rs_nomeScheda7); echo $valore7[nomeScheda];?> 
```

我建议只执行一个数据库查询来获取您需要的所有信息。这应该可以节省执行时间并可能解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T10:56:44.217

问题解决了！有一些不应该存在的 html 行。有趣的部分是包含错误的页面（未关闭的 div）已正确加载，而下一个则没有。所以我了解到，当没有 javascript 或 php 错误时，最好使用一些 html 验证工具。在这种特定情况下，我使用[http://validator.w3.org/#validate_by_uri+with_options](http://validator.w3.org/#validate_by_uri+with_options)来验证 html 并找到错误所在。谢谢大家，希望这对某人有用。

# c++ - 调用 __do_global_dtors_aux 时双重释放或损坏 (!prev)

> ID：13234200
> 
> 赞同：2
> 
> 时间：2012-11-05T14:32:19.133
> 
> 标签：c++, gcc, memory-management, g++

在我的应用程序正确完成所有操作后，我收到此错误消息

```
/lib64/libc.so.6[0x3f1ee70d7f]
/lib64/libc.so.6(cfree+0x4b)[0x3f1ee711db]
/home/user/workspace/NewProject/build/bin/TestApp(_ZN9__gnu_cxx13new_allocatorIN5boost10shared_ptrINS1_5uuids4uuidEEEE10deallocateEPS5_m+0x20)[0x49c174]
/home/user/workspace/NewProject/build/bin/TestApp(_ZNSt12_Vector_baseIN5boost10shared_ptrINS0_5uuids4uuidEEESaIS4_EE13_M_deallocateEPS4_m+0x32)[0x495b84]
/home/user/workspace/NewProject/build/bin/TestApp(_ZNSt12_Vector_baseIN5boost10shared_ptrINS0_5uuids4uuidEEESaIS4_EED2Ev+0x47)[0x49598b]
/home/user/workspace/NewProject/build/bin/TestApp(_ZNSt6vectorIN5boost10shared_ptrINS0_5uuids4uuidEEESaIS4_EED1Ev+0x65)[0x48bf27]
/lib64/libc.so.6(__cxa_finalize+0x8e)[0x3f1ee337fe]
/home/user/workspace/NewProject/build/components/lib_path/libhelper-d.so[0x2aaaab052b36] 
```

如果我在其中运行程序，`gdb`我可以获得以下回溯，但这就是我得到的全部：

```
#0  0x0000003f1ee30285 in raise () from /lib64/libc.so.6
#1  0x0000003f1ee31d30 in abort () from /lib64/libc.so.6
#2  0x0000003f1ee692bb in __libc_message () from /lib64/libc.so.6
#3  0x0000003f1ee70d7f in _int_free () from /lib64/libc.so.6
#4  0x0000003f1ee711db in free () from /lib64/libc.so.6
#5  0x000000000049c174 in __gnu_cxx::new_allocator<boost::shared_ptr<boost::uuids::uuid> >::deallocate (this=0x2aaaab2cea50, __p=0x1cfd8d0)
    at /opt/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.4.5/../../../../include/c++/4.4.5/ext/new_allocator.h:95
#6  0x0000000000495b84 in std::_Vector_base<boost::shared_ptr<boost::uuids::uuid>, std::allocator<boost::shared_ptr<boost::uuids::uuid> > >::_M_deallocate (
    this=0x2aaaab2cea50, __p=0x1cfd8d0, __n=8) at /opt/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.4.5/../../../../include/c++/4.4.5/bits/stl_vector.h:146
#7  0x000000000049598b in std::_Vector_base<boost::shared_ptr<boost::uuids::uuid>, std::allocator<boost::shared_ptr<boost::uuids::uuid> > >::~_Vector_base (
    this=0x2aaaab2cea50, __in_chrg=<value optimized out>)
    at /opt/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.4.5/../../../../include/c++/4.4.5/bits/stl_vector.h:132
#8  0x000000000048bf27 in std::vector<boost::shared_ptr<boost::uuids::uuid>, std::allocator<boost::shared_ptr<boost::uuids::uuid> > >::~vector (this=0x2aaaab2cea50,
    __in_chrg=<value optimized out>) at /opt/local/bin/../lib/gcc/x86_64-unknown-linux-gnu/4.4.5/../../../../include/c++/4.4.5/bits/stl_vector.h:313
#9  0x0000003f1ee337fe in __cxa_finalize () from /lib64/libc.so.6
#10 0x00002aaaab052b36 in __do_global_dtors_aux ()
from /home/user/workspace/NewProject/build/components/lib_path/libhelper-d.so
#11 0x0000000000000000 in ?? () 
```

我真的不知道如何从这里开始。

**更新**我忘了提到出现在错误中的唯一全局变量在错误出现`m_uuids.size() == 0`时被清除。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-05-06T16:00:33.700

我在使用 glog 时遇到了同样的问题。就我而言，是这种情况：

1.  我有一个共享库，将其称为链接 glog 的“common.so”。
2.  我的主要可执行文件，称为“应用程序”，也链接了 glog，并链接在 common.so 中。

我遇到的问题是 glog 在 .so 和可执行文件中都是静态链接的。当我将#1 和#2 都更改为链接.so 而不是.a 时，问题就消失了。

不确定这是您的问题，但可能是。一般来说，释放内存时的损坏通常意味着您损坏了内存池（例如两次删除同一个指针）。我相信在这两种情况下都在 .a 中进行链接，我在同一个全局指针（在我的情况下是 std::string）上获得了两次清理行为。

更新：经过大量调查，这很可能是问题所在。发生的情况是每个可执行文件和 .so 都有一个 std::string 类型的全局变量（glog 的一部分）。当动态链接器/加载器加载对象（exe、.so）时，必须构造这些 std::string 全局变量。此外，使用**at_exit**添加了每个析构函数以进行清理。但是，当调用**at_exit**函数时，两个全局引用都指向同一个 std::string。这意味着 std::string 析构函数被调用两次，但在同一个对象上。然后**免费**在同一内存位置调用两次。全局 std::string （或任何具有构造函数的类）是一个坏主意。如果您选择使用基于 .so 的架构（一个好主意），则必须小心所有 3rd 方库以及它们如何处理全局变量。通过链接到所有 3rd 方库的 .so，您可以避免最大的危险。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:44:32.577

出现错误的地方可能有点误导。我最好的猜测是你有一个共享指针向量，当它被销毁时，其中一个（至少）共享指针试图删除它指向的对象，却发现它已经被删除.

您是否在任何地方将原始指针与共享指针混合在一起？如果是这样，您可能会在某个地方发现一个完全无害的外观`delete`，它正在从您的脚下拉扯地毯`shared_ptr`

# ios - 点击 segmentedControl 会出现无法识别的选择器错误

> ID：13234202
> 
> 赞同：0
> 
> 时间：2012-11-05T14:32:24.870
> 
> 标签：ios, uisegmentedcontrol

我不知道为什么我的 segmentedControl 不起作用。如果我按下它，我会收到错误消息

> [AddDetailViewController segmentedControlIndexChanged:]：无法识别的选择器发送到实例 0x71e0ad0
> 2012-11-05 16:25:51.380 proiet_caini[5903:c07] ***由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[AddDetailViewController segmentedControlIndexChanged:]：无法识别选择器发送到实例 0x71e0ad0'

当我单击位于表格单元格中的 segmentedControl 时，我希望被选中并保存它，以便我可以显示它。

另一个问题是我无法在单元格的右侧找到它。

这是我的代码：

此代码位于 cellForRowAtIndexPath 中，当我创建单元格时

```
 case 8:{
        cell.textLabel.text = @"Parinti";
        //inputField.text = 
        lblParinti.text = dog?dog.parinti:@"";

        segmentedControl1 = [[UISegmentedControl alloc] initWithItems: segmentItems];
 //            segmentedControl1.segmentedControlStyle = UISegmentedControlStyleBar;
 //            segmentedControl1.selectedSegmentIndex = 0;

        [segmentedControl1 addTarget:self action:@selector(segmentedControlIndexChanged:) forControlEvents:UIControlEventValueChanged];

        [cell addSubview:lblParinti];
        [cell.contentView addSubview:segmentedControl1];
        break;} 
```

这是触发的事件：

```
 -(void) segmentedControlIndexChanged{

    // reload data based on the new index

    if (segmentedControl1.selectedSegmentIndex == 0) {
        dog.parinti = @"Da";
    } else if (segmentedControl1.selectedSegmentIndex == 1) {
        dog.parinti = @"Nu";
    }
    //dog.parinti = [segmentedControl1 titleForSegmentAtIndex:segmentedControl1.selectedSegmentIndex];

    [self.tableView reloadData];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:59:59.870

更改您的`cellForRowAtIndexPath`代码

`[segmentedControl1 addTarget:self action:@selector(segmentedControlIndexChanged:) forControlEvents:UIControlEventValueChanged];`

到

`[segmentedControl1 addTarget:self action:@selector(segmentedControlIndexChanged) forControlEvents:UIControlEventValueChanged];`

如果你使用`@selector(segmentedControlIndexChanged:)`你是说你的方法有一个参数（它没有）。

# asp.net-mvc - 在 MVC3 中，如何创建类似 mydomain.com/chigago 的路由并从 GET 表单中点击该路由？

> ID：13234203
> 
> 赞同：1
> 
> 时间：2012-11-05T14:32:37.290
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我有一个在地图上显示位置的应用程序。我创建了一条路线，这样我就可以拥有不错的可破解 URL，例如[http://www.mydomain.com/paris](http://www.mydomain.com/paris)。只需输入 URL 即可正常工作，但我在主页上有一个搜索表单，用于发送 GET 请求。提交表单时，地址栏中显示的 URL 格式为[http://www.mydomain.com/Dashboard?location=paris](http://www.mydomain.com/Dashboard?location=paris)。通常这不会太重要，因为它会触发正确的操作，但是我有一个运行该节目的主干.js 应用程序，并且它特别关注 URL 结构。

如果没有 javascript 或重定向，可能无法执行我需要的操作，因为在填充表单 ACTION 属性时该位置是未知的 - 但任何人都可以确认吗？

这是我的路线。

```
public static void RegisterRoutes( RouteCollection routes )
{
    routes.IgnoreRoute( "{resource}.axd/{*pathInfo}" );
    routes.MapRoute(
        String.Empty,
        "{location}",
        new { 
            controller = "Dashboard",
            action = "Index",
            id = ""
        }
    );

    routes.MapRoute(
        "Default", // Route name
        "{controller}/{action}/{id}", // URL with parameters
        new
        {
            controller = "Home",
            action = "Index",
            id = UrlParameter.Optional
        } // Parameter defaults
    );

} 
```

这里是控制器。

```
public class DashboardController : Controller
{
    [HttpGet]
    public ViewResult Index(string location)
    {
        return View(new AccItemSearch { Location = location });
    }
} 
```

这是表格。

```
 @using (Html.BeginForm("Index", "Dashboard", FormMethod.Get)) {
                <h2>Where are you going?</h2>
                <input type="text" placeholder="Area, town or postcode" id="location" name="location"/>
                <button>Search!</button>
            </div>
        } 
```

**澄清**一下：我需要帮助的问题是如何让用户提交表单，然后登陆 URL 为[http://www.mydomain.com/searchterm](http://www.mydomain.com/searchterm)的页面，从而匹配路由，而不是在使用 URL [http://www.mydomain.com/Dashboard](http://www.mydomain.com/Dashboard)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:38:30.130

该表单应该是提交表单数据的 POST。

搜索应该是一个提交按钮

```
 <input type="submit" name="Search" value="Search" /> 
```

否则它看起来不错，除非你有一条冲突的路线。单独测试了您的路线，看起来还不错。只是没有发送位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:57:22.697

您将无法`action`在 HTML 生成期间（即服务器端）更改表单的属性，因为您根本不知道它应该指向什么。因此，如果您需要 URL 最终成为确切的搜索词，最简单的选择可能是`action`在提交表单之前使用 JavaScript 将属性更改为它，并拥有一个控制器来捕获 www.domain.com/ 之后的所有 url搜索词模式。

您不能真正重定向到特定操作，因为那将成为返回给浏览器的 URL，我怀疑您是否希望每个搜索词执行一个操作。

**HTML：**

```
<form method="post" id="myform">
    <input type="text" id="searchterm" />
    <input type="submit" value="Search" />
</form> 
```

**jQuery：**

```
$(function () {
    $("#myform").submit(function () {
        var searchVal = $("#searchterm").val();
        $(this).attr("action", searchVal);
    });
}); 
```

**路线：**

```
routes.MapRoute(
    "",
    "{searchterm}",
    new { controller = "Home", action = "Search" }
); 
```

请注意，这必须放在默认路由*之前。*

**行动：**

```
public ActionResult Search(string searchterm)
{
    //do stuff
} 
```

现在，如果访问者输入“阿拉斯加”一词并提交搜索表单，他们将最终访问 domain.com/Alaska。

# c# - StaticResource PhoneAccentBrush 作为 GradientStop

> ID：13234204
> 
> 赞同：0
> 
> 时间：2012-11-05T14:32:45.627
> 
> 标签：c#, silverlight, windows-phone-7, xaml

我正在开发一个应用程序，其中我必须将 GradientStops 之一设置为 PhoneAccentColor StaticResource，并且我必须在代码中执行此操作（即 C#）。

这是我已经尝试过的：

```
GradientStop accentGS = new GradientStop();
accentGS.Color = (System.Windows.Media.Color)App.Current.Resources["PhoneAccentBrush"];
accentGS.Offset = .5;
lgbBlack.GradientStops.Add(accentGS); 
```

在这里，lgbBlack 是我要添加这个 GradientStop 的 LinearGradientBrush。

这不会引发任何错误，但是当我运行应用程序时会引发“System.InvalidCastException”并且应用程序崩溃。

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:43:16.883

问题是`PhoneAccentBrush`资源是 a `SolidColorBrush`，而不是 a `Color`。
该代码应该可以工作：

```
GradientStop accentGS = new GradientStop();
SolidColorBrush c = (SolidColorBrush)App.Current.Resources["PhoneAccentBrush"];
accentGS.Color = c.Color;
accentGS.Offset = .5;
lgbBlack.GradientStops.Add(accentGS); 
```

# java-me - 关于诺基亚 S40 的通知

> ID：13234207
> 
> 赞同：2
> 
> 时间：2012-11-05T14:32:57.967
> 
> 标签：java-me, push-notification, nokia-s40, java-micro-editon-sdk3.0

再会！

我正在使用 JAVA ME 在 S40 手机上进行 IM 应用程序。我想知道，当应用程序关闭时，当有新消息到达时如何获得通知（在状态栏上提示带有消息和图标的对话框）。我尝试使用推送通知，但它对我没有帮助，虽然我可以使用网络唤醒我的应用程序（使用套接字推送），但我无法使用自定义消息或设置对话框（发生通知时的提示对话框）状态栏上的图标。

谢谢

# ios - 如何清除iOS远程通知

> ID：13234208
> 
> 赞同：2
> 
> 时间：2012-11-05T14:33:00.727
> 
> 标签：ios, apple-push-notifications

向APN服务器推送消息后，每次打开应用程序`didReceiveRemoteNotification` 都会调用并接收推送数据，我该如何摆脱它们？

但`UIApplicationLaunchOptionsRemoteNotificationKey`为空

在我做了一些搜索之后，我在代码中添加了这两行，但它仍然无法正常工作

```
[[UIApplication sharedApplication] setApplicationIconBadgeNumber: 0];
[[UIApplication sharedApplication] cancelAllLocalNotifications]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T14:11:55.387

如果您的徽章计数已经为 0，则将其设置为 0 不会有任何效果。尝试先将徽章计数设置为无意义的数字，然后将其设置为 0。

```
[[UIApplication sharedApplication] cancelAllLocalNotifications];    
[[UIApplication sharedApplication] setApplicationIconBadgeNumber: 99];
[[UIApplication sharedApplication] setApplicationIconBadgeNumber: 0]; 
```

# android - 如何将 charset windows-1251 的原始资源加载到 WebView 中？

> ID：13234209
> 
> 赞同：1
> 
> 时间：2012-11-05T14:33:09.487
> 
> 标签：android, webview

如何将 charset windows-1251 的原始资源加载到 WebView 中？对我有用的唯一方法是：

```
public class FileUtils {
   public static String loadRawFileAsBase64(Context context, int id) throws IOException {
      return Base64.encodeToString(loadRawFileAsByteArray(context, id), Base64.DEFAULT);
   }

   public static byte[] loadRawFileAsByteArray(Context context, int id) throws IOException {
      byte[] result = null;

      Resources resources = context.getResources();
      InputStream inputStream = resources.openRawResource(id);

      ByteArrayOutputStream content = new ByteArrayOutputStream();
      try {
         byte[] sBuffer = new byte[512];
         int readBytes = 0;
         while ((readBytes = inputStream.read(sBuffer)) != -1) {
            content.write(sBuffer, 0, readBytes);
         }

         result = content.toByteArray();
      } finally {
         content.close();
      }

      return result;
   }
} 
```

接着

```
String html = FileUtils.loadRawFileAsBase64(this, R.raw.htmlfile);
WebView webView = (WebView) findViewById(R.id.webview);
webView.loadData(html, "text/html; charset=windows-1251", "base64"); 
```

有没有办法避免base64编码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-09T20:07:04.977

如果您动态创建 Web 内容，则在部分中设置以下字符集可能会有所帮助

```
String header = "<HTML><HEAD><META HTTP-EQUIV=\"Content-Type\" CONTENT=\"text/html; charset=windows-1251\"></HEAD>"; 
```

# javascript - 大型应用程序的回流/布局性能

> ID：13234214
> 
> 赞同：2
> 
> 时间：2012-11-05T14:33:33.933
> 
> 标签：javascript, html, gwt, dom

我正在使用 GWT 构建一个性能通常正确的 HTML 应用程序。

有时，它可以在 DOM 中加载许多对象，导致应用程序变慢。我使用 Chrome 开发者工具探查器来查看时间花在哪里（在 Chrome 下，一旦应用程序被编译，即没有 GWT 开销），很明显**getAbsoluteLeft()/getBoundingClientRect()**方法消耗了大部分时间。

这是 Chrome (com.google.gwt.dom.client.DOMImplStandardBase) 下使用的实现：

```
private static native ClientRect getBoundingClientRect(Element element) /*-{
  return element.getBoundingClientRect && element.getBoundingClientRect();
}-*/;

@Override
public int getAbsoluteLeft(Element elem) {
  ClientRect rect = getBoundingClientRect(elem);
  return rect != null ? rect.getLeft()
     + elem.getOwnerDocument().getBody().getScrollLeft()
     : getAbsoluteLeftUsingOffsets(elem);
} 
```

这对我来说很有意义，因为 DOM 中的元素越多，计算绝对位置所需的时间就越多。*但这令人沮丧，因为有时您只知道应用程序的一部分发生了变化，而这些方法仍然需要时间来计算绝对定位，可能是因为它不必要地重新检查了一大堆 DOM 元素*。我的问题不一定是面向 GWT 的，因为它是与浏览器/javascript 相关的问题：

*是否有任何已知的解决方案可以改善大型 DOM 元素应用程序的 GWT getAbsoluteLeft/javascript getBoundingClientRect 问题？*

我在互联网上没有找到任何线索，但我想到了如下解决方案：

*   （减少对这些方法的调用次数:-) ...
*   通过 iframe 隔离部分 DOM，以减少浏览器必须评估以获得绝对位置的元素数量（尽管它会使组件难以通信......）
*   同样的想法，可能有一些 css 属性（溢出，位置？）或一些 html 元素（如 iframe）告诉浏览器跳过 dom 的整个部分或只是帮助浏览器更快地获得绝对位置

**编辑 ：**

使用 Chrome TimeLine 调试器，并在 DOM 中有很多元素时执行特定操作，我的性能平均：

*   重新计算样式：几乎为零
*   绘制：近 1 毫秒
*   布局：近900ms

通过 getBoundingClientRect 方法布局需要 900 毫秒。本页列出[了 WebKit 中所有触发布局的方法](http://gent.ilcore.com/2011/03/how-not-to-trigger-layout-in-webkit.html)，包括 getBoundingClientRect ...

由于 dom 中有许多不受我的操作影响的元素，我假设**布局**正在整个 DOM 中进行重新计算，而**paint**能够通过 css 属性/DOM 树来缩小其范围（我可以通过 Firebug 中的 MozAfterPaintEvent 看到它例子）。

除了对触发布局的方法进行分组和调用之外，**关于如何减少布局时间的任何线索？**

一些相关文章：

*   [最小化浏览器回流](https://developers.google.com/speed/articles/reflow)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-11T21:35:24.400

我终于解决了我的问题：*getBoundingClientRect*在应用程序中触发了整个*布局*事件，这需要多次通过繁重的 CSS 规则。

事实上，布局时间与 DOM 中的元素数量并不成正比。你可以用浅色画出几十万个，布局只需要 2 毫秒。

在我的例子中，我有两个 CSS 选择器和一个背景图像，它们匹配了数十万个 DOM 元素，这在布局过程中会消耗大量时间。通过简单地删除这些 CSS 规则，我将布局时间从 900 毫秒减少到 2 毫秒。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-05T14:40:46.650

您问题的最基本答案是使用[惰性评估](http://en.wikipedia.org/wiki/Lazy_evaluation)，也称为延迟评估。原则是，只有当它所依赖的东西发生变化时，你才评估一个新的职位。它通常需要相当多的代码来设置，但一旦完成，使用起来会更干净。您将对某物（例如窗口大小）进行一项分配，然后所有新值都会自动传播，并且只有需要传播的值。

# php - 表单数据验证后的处理页面

> ID：13234218
> 
> 赞同：0
> 
> 时间：2012-11-05T14:33:54.843
> 
> 标签：php, javascript, jquery, html, ajax

我有一个正在处理的捐赠页面。填写完表单后，按下提交，将数据发送到一个php页面，要么返回html以模态显示，要么使用javascript允许提交页面。由于 javascript 的异步性质，我不知道如何解决这个问题。当我单击使用有效数据提交时，它会检查数据，将布尔值切换为 true，但不会提交，因为它在返回数据之前已检查过。

该网页也在 wordpress 中运行。

这是代码。

```
var check = 0;
function noError(){
    check = 1;
}

jQuery('#donateform').submit(function() {
    jQuery.post(
        'validate.php', 
        jQuery("#donateform").serialize(), 
        function(data) {
            jQuery('#overlay_msg').html(data);
        }
    );

    if(check != 1)
        event.preventDefault();
    else
        self.submit();
}); 
```

在`validate.php`它调用

```
function noError() {
    check = 1;
} 
```

如果数据有效。

我会继续研究它。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T19:54:53.893

不确定我是否完全理解，但如果您的问题是流程顺序：IE，单击提交，验证，然后通过 ajax 实际提交，那么我会建议以下内容。

用按钮替换提交类型输入

单击此按钮时，让它运行您的验证，如果验证通过，则让该功能通过 ajax 为您提交表单

html

```
<button type="button" id="submitButton">submit</button>

$('#submitButton').click(function(){
//run validation
if (validate == true){
ajaxSubmitFunction();
}
});

ajaxSubmitFunction(){
//run your ajax.
} 
```

在验证然后通过 ajax 提交表单时，这为我解决了很多问题

# html5-video - HMTL5 视频自动播放是否适用于三星智能电视？

> ID：13234221
> 
> 赞同：2
> 
> 时间：2012-11-05T14:33:58.987
> 
> 标签：html5-video, samsung-smart-tv

我正在尝试让 HTML5 视频元素在三星智能电视上自动播放（在常规浏览器中，而不是专门作为电视应用程序，如果这有什么不同的话）。也许自动播放元素不起作用 - 我已经尝试了以下所有方法。

```
autoplay="true"
autoplay="autoplay"
autoplay=autoplay 
```

视频元素将手动播放（一旦您设法将光标指向非常小的播放控件！）

有没有其他人让这个工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T09:19:03.493

这应该有效：

```
<video id="video" src="movie.mp4" autoplay="autoplay" width="320" height="240">
Your browser does not support the video tag.
</video> 
```

至少文档说：http: [//www.samsungdforum.com/upload_files/files/guide/data/html/html_2/reference/HTML%20Specification.html#HTML5%20and%20Samsung%20Smart%20TV%20SDK](http://www.samsungdforum.com/upload_files/files/guide/data/html/html_2/reference/HTML%20Specification.html#HTML5%20and%20Samsung%20Smart%20TV%20SDK)

如果自动播放属性不起作用，您仍然可以使用 JavaScript 启动它。只需尝试调用该`play()`方法：

```
var myVideo = document.getElementById("video");
myVideo.load();
myVideo.play(); 
```

# android - 如何在android中一次打开两个微调器？

> ID：13234231
> 
> 赞同：0
> 
> 时间：2012-11-05T14:34:24.557
> 
> 标签：android, adapter, android-spinner

我知道如何使用单微调器。我用公斤填充一个微调器，另一个用克填充。单击按钮/视图时，我必须一次打开两个微调器（一个在另一个旁边）。用户应该能够单独滚动浏览旋转器项目并一次选择公斤和克。我该怎么做？请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:40:14.913

您可能想为此使用自定义`View`。看看[这个](http://code.google.com/p/android-wheel/)项目。我在我当前的项目中使用它，它非常棒。

# css - 如何停止下拉菜单将我的页面内容向下推？

> ID：13234233
> 
> 赞同：7
> 
> 时间：2012-11-05T14:34:29.517
> 
> 标签：css, drop-down-menu

我有一个下拉菜单，但是当我单击下拉菜单时，它也会将我的内容向下推。

![在此处输入图像描述](../Images/0aec8a9d921d3b4d4491cf89d31ae44b.png)

我希望我的菜单滑过我网页的上下文部分。有人可以告诉我如何设置吗？

* * *

CSS

```
body {
    font-size: 100%;
    background:#32373d;
}
a {
    text-decoration: none;
}
ul, ul ul {
    margin: 0;
    padding: 0;
    list-style: none;
}
#wrapper {  
    width: 220px;
    margin: 100px auto;
    font-size: 0.8125em;
}
.menu {
    width: 225px;
    height: auto;
    -webkit-box-shadow: 0px 1px 3px 0px rgba(0,0,0,.73), 0px 0px 18px 0px rgba(0,0,0,.13);
    -moz-box-shadow: 0px 1px 3px 0px rgba(0,0,0,.73), 0px 0px 18px 0px rgba(0,0,0,.13);
    box-shadow: 0px 1px 3px 0px rgba(0,0,0,.73), 0px 0px 18px 0px rgba(0,0,0,.13);
}
.menu > li > a {
    background-color: #616975;
    background-image: -webkit-gradient(linear, left top, left bottom, from(rgb(114, 122, 134)),to(rgb(80, 88, 100)));
    background-image: -webkit-linear-gradient(top, rgb(114, 122, 134), rgb(80, 88, 100));
    background-image: -moz-linear-gradient(top, rgb(114, 122, 134), rgb(80, 88, 100));
    background-image: -o-linear-gradient(top, rgb(114, 122, 134), rgb(80, 88, 100));
    background-image: -ms-linear-gradient(top, rgb(114, 122, 134), rgb(80, 88, 100));
    background-image: linear-gradient(top, rgb(114, 122, 134), rgb(80, 88, 100));
    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,StartColorStr='#727a86', EndColorStr='#505864');
    border-bottom: 1px solid #33373d;
    -webkit-box-shadow: inset 0px 1px 0px 0px #878e98;
    -moz-box-shadow: inset 0px 1px 0px 0px #878e98;
    box-shadow: inset 0px 1px 0px 0px #878e98;
    width: 100%;
    height: 2.75em;
    line-height: 2.75em;
    text-indent: 2.75em;
    display: block;
    position: relative;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-weight: 600;
    color: #fff;
    text-shadow: 0px 1px 0px rgba(0,0,0,.5);
}
.menu ul li a {
    background: #fff;
    border-bottom: 1px solid #efeff0;
    width: 100%;
    height: 2.75em;
    line-height: 2.75em;
    text-indent: 2.75em;
    display: block;
    position: relative;
    font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
    font-size: 0.923em;
    font-weight: 400;
    color: #878d95;
}
.menu ul li:last-child a {
    border-bottom: 1px solid #33373d;
}
.menu > li > a:hover, .menu > li > a.active {
    background-color: #35afe3;
    background-image: -webkit-gradient(linear, left top, left bottom, from(rgb(69, 199, 235)),to(rgb(38, 152, 219)));
    background-image: -webkit-linear-gradient(top, rgb(69, 199, 235), rgb(38, 152, 219));
    background-image: -moz-linear-gradient(top, rgb(69, 199, 235), rgb(38, 152, 219));
    background-image: -o-linear-gradient(top, rgb(69, 199, 235), rgb(38, 152, 219));
    background-image: -ms-linear-gradient(top, rgb(69, 199, 235), rgb(38, 152, 219));
    background-image: linear-gradient(top, rgb(69, 199, 235), rgb(38, 152, 219));
    filter: progid:DXImageTransform.Microsoft.gradient(GradientType=0,StartColorStr='#45c7eb', EndColorStr='#2698db');
    border-bottom: 1px solid #103c56;
    -webkit-box-shadow: inset 0px 1px 0px 0px #6ad2ef;
    -moz-box-shadow: inset 0px 1px 0px 0px #6ad2ef;
    box-shadow: inset 0px 1px 0px 0px #6ad2ef;
}
.menu > li > a.active {
    border-bottom: 1px solid #1a638f;
}
.menu > li > a:before {
    content: '';
    background-image: url(../images/sprite.png);
    background-repeat: no-repeat;
    font-size: 36px;
    height: 1em;
    width: 1em;
    position: absolute;
    left: 0;
    top: 50%;
    margin: -.5em 0 0 0;
}
.item1 > a:before {
    background-position: 0 0;
}
.item2 > a:before {
    background-position: -38px 0;
}
.item3 > a:before {
    background-position: 0 -38px;
}
.item4 > a:before {
    background-position: -38px -38px;
}
.item5 > a:before {
    background-position: -76px 0;
}
.menu > li > a span {
    font-size: 0.857em; 
    display: inline-block;
    position: absolute;
    right: 1em;
    top: 50%; 
    background: #48515c;
    line-height: 1em;
    height: 1em;
    padding: .4em .6em;
    margin: -.8em 0 0 0; 
    color: #fff;
    text-indent: 0;
    text-align: center;
    -webkit-border-radius: .769em;
    -moz-border-radius: .769em;
    border-radius: .769em;
    -webkit-box-shadow: inset 0px 1px 3px 0px rgba(0, 0, 0, .26), 0px 1px 0px 0px rgba(255, 255, 255, .15);
    -moz-box-shadow: inset 0px 1px 3px 0px rgba(0, 0, 0, .26), 0px 1px 0px 0px rgba(255, 255, 255, .15);
    box-shadow: inset 0px 1px 3px 0px rgba(0, 0, 0, .26), 0px 1px 0px 0px rgba(255, 255, 255, .15);
    text-shadow: 0px 1px 0px rgba(0,0,0,.5);
    font-weight: 500;
}
.menu > li > a:hover span, .menu > li a.active span {
    background: #2173a1;
}
.menu > li > ul li a:before{
    content: '▶';
    font-size: 8px;
    color: #bcbcbf;
    position: absolute;
    width: 1em;
    height: 1em;
    top: 0;
    left: -2.7em;
}

.menu > li > ul li:hover a,
.menu > li > ul li:hover a span,
.menu > li > ul li:hover a:before {
    color: #32373D;
}

.menu ul > li > a span {
    font-size: 0.857em; 
    display: inline-block;
    position: absolute;
    right: 1em;
    top: 50%; /
    background: #fff;
    border: 1px solid #d0d0d3;
    line-height: 1em;
    height: 1em;
    padding: .4em .7em;
    margin: -.9em 0 0 0; 
    color: #878d95;
    text-indent: 0;
    text-align: center;
    -webkit-border-radius: .769em;
    -moz-border-radius: 769em;
    border-radius: 769em;
    text-shadow: 0px 0px 0px rgba(255,255,255,.01));
} 
```

* * *

html

```
<link rel="stylesheet" type="text/css" href="../../Content/Menu.css" />
  <div class="float-right">
     <nav>
        <ul class="menuMain" style="float: left;">
          <li class="item1"><a href="#" class="">Home</a>
            <ul style="display: block; ">
          <li class="subitem1"><a class="active" href="/DashBoard">DashBoard</a></li>
          <li class="subitem2"><a href="/Home/Contact">Contact</a></li>
          <li class="subitem3"><a href="/Home/About">About</a></li>
            </ul>
          </li>
          <li class="item2"><a href="#" class="">Functions</a>
            <ul style="display: block; ">
              <li class="subitem1"><a href="/Home/Download?token=f09e0c76-c06f-44da-8811-07af92f0dd7d">Download</a></li>
               <li class="subitem2"><a href="/Home/ReturnProperties?token=f09e0c76-c06f-44da-8811-07af92f0dd7d">Valuation</a></li>
            </ul>
            </li>   
            <li class="item3"><a href="#" class="">Admin</a>  
              <ul style="display: block; ">
                <li class="subitem1"><a href="/Admin">Admin</a></li>
              </ul>
            <li>    
              <li class="item4"><a href="#" class="">Logout</a>  
                <ul style="display: block; ">
                  <li class="subitem1"><a href="/Home/Logout">Logout</a></li>
                </ul>
              <li>                           
          </ul>
      </nav>
   </div> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-05T14:36:54.900

下拉菜单应该`position: absolute`用于定位。

作为参考，请使用：[http ://www.htmldog.com/articles/suckerfish/dropdowns/](http://www.htmldog.com/articles/suckerfish/dropdowns/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:38:17.620

几天前我实际上发布了一个关于这个的问题并设法解决它，[CSS下拉导航导致html内容移动](https://stackoverflow.com/questions/13212361/css-dropdown-nav-causing-html-content-to-move)

希望这对您有用，我的问题已通过添加`z-index:1000`到子菜单 ul 的 css 来解决

# ios - iOS - UIPanGestureRecognizer：在动画期间拖动

> ID：13234234
> 
> 赞同：0
> 
> 时间：2012-11-05T14:34:31.607
> 
> 标签：ios, drag-and-drop, uipangesturerecognizer

我使用 UIPanGestureRecognizer 沿着用户绘制的路径移动对象。但是这个对象正在制作动画，我需要在动画期间与它进行交互。可能吗？我已经尝试使用`UIViewAnimationOptionAllowUserInteraction`但没有结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:49:14.640

对的，这是可能的。但我会使用`CABasicAnimation`动画对象而不是`UIView animationWith...`然后添加`UIPanGestureRecognizer`到对象。所以一些示例代码：

```
// Configure the animation and add it to the layer.
CABasicAnimation *anim = [CABasicAnimation animationWithKeyPath:@"position"];
anim.fromValue = ...
anim.duration = ...
[view.layer addAnimation:anim forKey:@"some key"];
// Then add the UIPanGestureRecognizer to that view. 
```

# asp.net - 如何在asp.net中的另一页后面调用一个页面中的方法？

> ID：13234238
> 
> 赞同：1
> 
> 时间：2012-11-05T14:34:40.563
> 
> 标签：asp.net

我在“a.aspx.cs”中有以下代码：

```
public void Flasmessage(String message)
{
    popupmessage2.Visible = true;
    string strScript = "HideCtrl('" + popupmessage2.ClientID + "','15000')";

    Page.ClientScript.RegisterStartupScript(
        this.GetType(), 
        Guid.NewGuid().ToString(), 
        strScript, 
        true);
} 
```

我需要从“b.aspx.cs”中调用它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:36:42.460

将该方法放在某个公共类中，然后从两个 aspx 页面调用它。

```
public void Flasmessage(String message, string popupmessage2ClientID, Page yourPage, HtmlGenericControl popupmessage2)
{
    popupmessage2.Visible = true;
    string strScript = "HideCtrl('" + popupmessage2ClientID + "','15000')";

    yourPage.ClientScript.RegisterStartupScript(
      this.GetType(),
      Guid.NewGuid().ToString(),
      strScript,
      true);
} 
```

# ios - 应用和应用商店将默认语言显示为乌克兰语。需要英语

> ID：13234240
> 
> 赞同：-1
> 
> 时间：2012-11-05T14:34:52.933
> 
> 标签：ios, xcode, ios6, app-store-connect

[https://itunes.apple.com/us/app/flowexpertpro/id571649995?ls=1&mt=8](https://itunes.apple.com/us/app/flowexpertpro/id571649995?ls=1&mt=8)

在 iTunes Connect 中，我已将默认语言设置为英国英语。

但是，在应用商店中，它显示的语言为乌克兰语。

下载应用程序后，所有默认命令（剪切、复制、全选）也都是乌克兰语。我怎样才能设置和保持它在英国英语？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:26:32.940

.plist中的*本地化原生开发区域是什么？*

一定是：

```
<key>CFBundleDevelopmentRegion</key>
<string>en_GB</string> 
```

英语。

# iphone - 在 iPad3 上发生旋转/2x 之前，应用程序不会响应

> ID：13234243
> 
> 赞同：8
> 
> 时间：2012-11-05T14:35:02.013
> 
> 标签：iphone, objective-c, ios, ipad, screen-rotation

我想知道是否还有其他人发生过这种情况。我有一个 iPhone 应用程序，我已经更新了一年多，它在我的 iPad2、iPhone 3GS 以及 4G、4GS 和 5 上运行良好。然而，就在最近我获得了一个 iPad3 来测试应用程序。发生了一些非常奇怪的事情：当应用程序在开发中通过 Xcode 加载时，它会出现并且看起来很完美 - 但是，**它根本不会响应任何触摸**。我有一个在加载时弹出的警报，您可以关闭它，但实际的主视图控制器不会对任何拖动或触摸手势做出反应 - 它基本上是冻结的。然而！**当我旋转设备并且应用程序正确旋转时，它突然开始正常工作，**即使我把它转回来！以正常和视网膜运行 iOS6 的 iPad 模拟器做同样的事情，即使它在我的 iPad2 上工作得很好。但是，iPhone 的模拟器工作得很好。

就像我说的，这不会发生在任何其他设备上。即使以相同的方式加载所有设备也允许像平常一样轻敲。这是我能够确认的：

*   iPad3 设备：**冻结**
*   iPad-视网膜模拟：**冻结**
*   iPad-普通模拟：**冻结**
*   iPad2设备：正常
*   iPhone-视网膜模拟：正常
*   iPhone-普通 sim: 普通
*   iPhone 4S 设备：正常
*   iPhone 4 设备：正常

如果所有的 iPhone 都能正常工作，而 iPad 不能，那将是有道理的。但我的 ipad2 工作得很好。另外，如果我用 iPad3 打开它，它会被冻结。但！**如果我按下 2X 按钮，**即使没有旋转，它也会重新开始工作。

我还决定测试一下它是否可以作为通用应用程序工作。在 iPad3 上**，当我将其切换到 Universal 时，它以**. 所以模拟器一定会发生一些奇怪的事情。有任何想法吗？

谢谢！！

-标记

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-07T13:24:47.017

不接受任何输入的视图（在您的情况下是整个事情）通常意味着其中一个超级视图的框架小于其内容。这里可能就是这种情况，奇怪的是只有在特定情况下，旋转后视图框架会获得正确的大小并在之后保持正确。

您在此期间解决了这个问题吗？您可以尝试为视图赋予不同的透明背景颜色和/或制作它们`clipToBounds`，从顶部视图控制器的视图开始。这样你就会看到框架是否有问题。

# jakarta-ee - 在 MySQL 视图上使用 Facade bean 时找不到正确的行

> ID：13234247
> 
> 赞同：1
> 
> 时间：2012-11-05T14:35:23.837
> 
> 标签：jakarta-ee, primefaces, netbeans-7

我有以下令我困惑的问题：

1）我有一个 MySQL 视图，它从不同的相关表中获取信息。如果我对此运行一个普通的选择查询，我会得到我需要的所有行。

```
userID          functionID      functionName    parentFunction  functionType    branchCode  
jg1             234561          Another Test    XXXXXX          T               001 
jg1             123456          Test Function   XXXXXX          T               001 
jg1             123457          Tendai          234561          T               001 
jg1             123458          Rutendo         234561          T               001 
jg1             XXXXXX          Root                                            001 
```

2）我基于此视图创建了一个实体，如下所示：

```
private static final long serialVersionUID = 1L;
@Basic(optional = false)
@NotNull
@Size(min = 1, max = 35)
@Column(name = "userID")
@Id
private String userID;
@Basic(optional = false)
@NotNull
@Size(min = 1, max = 8)
@Column(name = "functionID")
private String functionID;
@Size(max = 35)
@Column(name = "functionName")
private String functionName;
@Size(max = 8)
@Column(name = "parentFunction")
private String parentFunction;
@Column(name = "functionType")
private Character functionType;
@Size(max = 3)
@Column(name = "branchCode")
private String branchCode;

....
....
public String getUserID() {
    return userID;
}

public void setUserID(String userID) {
    this.userID = userID;
}

public String getFunctionID() {
    return functionID;
}

public void setFunctionID(String functionID) {
    this.functionID = functionID;
}

public String getFunctionName() {
    return functionName;
}

public void setFunctionName(String functionName) {
    this.functionName = functionName;
}

public String getParentFunction() {
    return parentFunction;
}

public void setParentFunction(String parentFunction) {
    this.parentFunction = parentFunction;
}

public Character getFunctionType() {
    return functionType;
}

public void setFunctionType(Character functionType) {
    this.functionType = functionType;
}

public String getBranchCode() {
    return branchCode;
}

public void setBranchCode(String branchCode) {
    this.branchCode = branchCode;
} 
```

…………

3) 我还有一个外观 bean，它使用一种方法来查找表中的所有行。我的问题是 find 方法返回的行只包含一条记录的详细信息，在视图中的记录数上重复。

```
List browserDetails = new ArrayList(40);
Query query = em.createNamedQuery("...findAll");
List rs = query.getResultList(); 
```

4) 这些是在 jsf 页面中使用此外观 bean 后的结果...直接 Netbeans 向导工作

```
UserID  FunctionID  FunctionName    ParentFunction  FunctionType    BranchCode   
jg1     234561       Another Test   XXXXXX  T   001     View Edit Destroy
jg1     234561       Another Test   XXXXXX  T   001     View Edit Destroy
jg1     234561       Another Test   XXXXXX  T   001     View Edit Destroy
jg1     234561       Another Test   XXXXXX  T   001     View Edit Destroy
jg1     234561       Another Test   XXXXXX  T   001     View Edit Destroy` 
```

我不知道为什么只有在我使用视图时才会发生这种情况，但是当我使用表格时，我能够得到正确的结果。

# jquery - 带有 php 的 jQuery Timeago 插件

> ID：13234248
> 
> 赞同：0
> 
> 时间：2012-11-05T14:35:26.690
> 
> 标签：jquery, timeago

我从数据库中提取日期。Time Ago 工作正常，但不是更新时间

```
<abbr class="timer timeago modified"><?php echo date('Y-m-d H:i:s', strtotime($row['project_create_date'])); ?></abbr> 
```

jQuery

```
$(function() {    
    /*Time Ago*/

    prepareDynamicDates();
    var time = '';
    $('.timer').each(function(){
        var time = $(this).text();
        $(this).text(jQuery.timeago(time));
   });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:55:10.957

首先，您需要使用一个`data`参数来存储参考日期。Using`text`将在第一次实例化时被覆盖。

```
<abbr class="timer timeago modified" data-create-date="2012-11-05 14:50:11"></abbr> 
```

然后您可以`setInterval`根据需要使用更新文本：

```
var time = '';
$('.timer').each(function() {
    var $el = $(this);
    setInterval(function() {
        var time = $el.data("create-date");
        $el.text(jQuery.timeago(time));
    }, 1000); // 1000ms = 1 second
}); 
```

[**示例小提琴**](http://jsfiddle.net/x4AfF/)

请注意，此更新每秒更新一次，这可能会导致某些浏览器的性能不佳。我认为每 30 秒到 1 分钟刷新一次就足以满足您的需要。

# php - 将 PHP 中的 HTML 选择列表的值传递给变量

> ID：13234249
> 
> 赞同：1
> 
> 时间：2012-11-05T14:35:28.540
> 
> 标签：php, html

我的 php 页面中有以下代码，我试图将选择列表的值存储到我的 php 页面中的变量中。

有人可以帮忙吗？

```
 $state_list= <<<HTML <select name="state">
    <option value="0"></option>
    <option value="1">ok</option>
    <option value="2">not-ok</option>
    </select>
    HTML;

echo "<table>";
        while($row = mysql_fetch_array($result1))
          {
          echo "<tr>";
          echo "<td>" . $row['task'] . "</td>";
          echo "<td>" . $row['task_desc'] . "</td>";
          echo "<td>";  echo $state_list; echo "</td>";
          echo "</tr>";
          }
 echo "</table>";

        if(isset($_GET['state'])) {
        $stat=$_GET['state'];
        echo $stat;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:41:13.313

使用您的示例代码，您将整个*列表*存储到 PHP 中的一个变量中（它看起来无效，您需要将 HTML 放在第二行，如下所示）：

```
$state_list= <<<HTML
<select name="state"> <option value="0"></option> <option value="1">ok</option> <option value="2">not-ok</option> </select>
HTML; 
```

如果您尝试获取选择列表的实际提交值（一旦提交表单），您可以通过`$_GET['state']`或访问它`$_POST['state']`，具体取决于您的表单提交的方法，例如：

```
$state = $_POST['state']; 
```

**更新**（输出表单？）
从您最近的编辑来看，您似乎没有将实际`select`列表放入`<form></form>`块中（您需要这样做才能实际提交值）。一个简单的例子是这样的：

```
echo '<form method="get">';
echo $state_list;
echo '<input type="submit" value="Submit Form" />';
echo '</form>'; 
```

我还添加了一个`submit`- 按钮，让您可以提交表单 =P。

但是，您将遇到使用此方法的问题，因为您需要`select`为结果中的每一行提供一个单独的 -list。因此，您实际上需要为结果中的每一行提供一个单独的*表单*（或一些额外的 javascript 代码，但我们会留着以备不时之需）。

此外，由于您需要为每个单独的行设置一个值，因此您需要第二个（隐藏的）字段来告诉您选择了哪一行。这是一个应该能够为您执行此操作的示例代码块：

```
while($row = mysql_fetch_array($result1)) {
    echo "<tr>";
    echo "<td>" . $row['task'] . "</td>";
    echo "<td>" . $row['task_desc'] . "</td>";
    echo "<td>";
        echo '<form method="get"><input type="hidden" name="task" value="' . $row['task'] . '" />';
        echo $state_list;
        echo '<input type="submit" value="Submit" /></form>';
    echo "</td>";
    echo "</tr>";
} 
```

*这种*方法的问题是`Submit`每一行都有一个按钮。虽然这会起作用，而且我以前在很多地方都见过它，但它在视觉上并不是很吸引人。如果这不适合您的需要，您可以更新`select`列表以在选择值时自动提交。为此，只需将`<select>`标签更新为：`<select name="state" onchange="this.form.submit()">`。如果这样做，您可以`submit`从上面的输出循环中删除 - 按钮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:43:19.197

PHP 是一种服务器端语言，您必须提交表单，然后通过 POST 或 GET 检索数据 - 类似这样..

```
<form method="GET">
  <select name="state"> 
    <option value="0"></option> 
    <option value="1">ok</option> 
    <option value="2">not-ok</option> 
  </select>
  <input type="submit" value="Submit">
</form> 
```

然后要取回数据，请使用相关的 $_GET['state']; 或 $_POST['state'];

```
<?php echo $_GET['state']; ?> 
```

在使用 GET 或 POST 变量之前检查它是否存在也是常见的做法，就像这样。

```
<?php 

if(isset($_GET['state'])){
  echo $_GET['state'];
}

?> 
```

# php - 如何在 Wordpress 中获取单个变量

> ID：13234251
> 
> 赞同：2
> 
> 时间：2012-11-05T14:35:35.537
> 
> 标签：php, mysql, wordpress

我正在举办一场基于 WP Custom Fields 的比赛。我正在尝试计算特定用户的 meta_key='odd' 的所有元值。我正在使用下面的公式，但它没有返回任何结果。

```
$meta_key = 'odd';
$post_author = 'Admin';
$odd = $wpdb->get_var( $wpdb->prepare(
    "
    SELECT Count(meta_value)
    FROM $wpdb->postmeta
    INNER JOIN $wpdb->posts ON $wpdb->postmeta->post_id = $wpdb->posts->ID
    WHERE $wpdb->postmeta->meta_key = 'odd' AND $wpdb->posts->post_author = 'Admin'
    ",
    $meta_key, $post_author
) );
echo "<p>Total odd {$odd}</p>"; 
```

任何人都可以帮助我吗？提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:24:37.537

您正在混淆`$wpdb`变量和`$post`变量 -`JOIN`例如，对于您的 ，您不能使用`$wpdb->postmeta->post_id`，它会是`{$wpdb->postmeta}.post_id`，并且只使用表别名会更好。你`prepare()`也没有传入你的`meta_key`或者`author`因为你没有`%s`占位符

```
$odd = $wpdb->get_var( $wpdb->prepare(
    "
    SELECT count(meta_value)
    FROM {$wpdb->postmeta} pm
    INNER JOIN {$wpdb->posts} p ON pm.post_id = p.ID
    WHERE pm.meta_key = %s AND p.post_author = %s
    ",
    $meta_key, $post_author
) ); 
```

# unity3d - onGUI 纹理绘制吃到很多 fps

> ID：13234252
> 
> 赞同：1
> 
> 时间：2012-11-05T14:35:38.580
> 
> 标签：unity3d

渲染场景时，我的 iphone 4 上有标准的 60fps。然后我在 onGUI 中绘制 2 个纹理，如下所示：

```
void OnGUI() 
    {
    GUI.DrawTexture(new Rect(0,0,Screen.width,Screen.height),textureBack);
        GUI.DrawTexture(new Rect(0,0,Screen.width,Screen.height),textureFront);
        } 
```

FPS下降到~30fps。前面的图像需要有 alpha，所以我将它设置为 RGBA 32bit，这个图像现在显然有 3 mb，后面的图像是 1.5mb，两者的分辨率都是 1024x768。

有没有办法更好地处理这个问题？我希望图像最高 10fps 因为.. 30fps 太荒谬了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T16:51:17.677

统一内置的 GUI 表现不佳（没有绘制调用批处理），您可以切换到 GUITextures 或任何其他 GUI 框架......

另一件事，如果您使用没有 GUILayout 的内置 gui，请禁用它以获得一些额外的帧..只需在 start() 函数中将 useGUILayout 设置为 false

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T08:10:18.793

您可以使用带有纹理的 GameObject，其父级为 Main Camera。这样，它会像使用 OnGUI 时的纹理一样跟随相机。

# java - java中的线程以顺序方式运行

> ID：13234255
> 
> 赞同：0
> 
> 时间：2012-11-05T14:35:45.997
> 
> 标签：java, multithreading

我在 Java 线程中观察到一种奇怪的行为，它们似乎以顺序方式运行。以下是代码片段

```
class ThreadUnsafeClass {

    private static int y;

    public static void incrementY() {
        y++;
    }

    public static int getY() {
        return y;
    }

}

public class MultiThreadedClass implements Runnable {
    int threadId;

    MultiThreadedClass (int threadId) {
        this.threadId = threadId;
    }

    @Override
    public void run() {

        System.out.println("Number:"+ threadId + ";Thread Unsafe Old Value:" + ThreadUnsafeClass.getY());

        try {
            if (threadId == 1 || threadId ==2) {
                Thread.sleep(60000);
            }
        } catch (InterruptedException e) {
            e.printStackTrace(); 
        }
        ThreadUnsafeClass.incrementY();

        System.out.println("Number:"+ threadId + ";Thread Unsafe New Value:" + ThreadUnsafeClass.getY());
    }

    public static void main (String []args) {
        MultiThreadedClass thread1 = new MultiThreadedClass(1);
        MultiThreadedClass thread2 = new MultiThreadedClass(2);
        MultiThreadedClass thread3 = new MultiThreadedClass(3);
        MultiThreadedClass thread4 = new MultiThreadedClass(4);
        thread1.run();
        thread2.run();
        thread3.run();
        thread4.run();
   }
} 
```

以下是相同的输出：

```
Number:1;Thread Unsafe Old Value:0
Number:1;Thread Unsafe New Value:1
Number:2;Thread Unsafe Old Value:1
Number:2;Thread Unsafe New Value:2
Number:3;Thread Unsafe Old Value:2
Number:3;Thread Unsafe New Value:3
Number:4;Thread Unsafe Old Value:3
Number:4;Thread Unsafe New Value:4 
```

从上面的输出可以看出，即使线程 1 和 2 等待了一段合理的时间，即 60 秒，线程 3 和 4 仍然只有在它们完成执行时才执行。为什么线程不并行执行，当一个线程休眠时，为什么另一个线程不继续执行？我在某个地方出错了吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T14:36:57.253

您需要创建一个`Thread`引用`Runnable`and call `start()`，而不是`run()`在实际类上。制作某些东西`Runnable`并不意味着它会自动在单独的线程中运行。

例如

```
(new Thread(myRunnable)).start() 
```

为什么和之间的`Runnable`分离`Thread`？我可以将`Runnable`其放入线程池中。下一个可用线程将运行该`Runnable`. （例如参见 Java [Executor](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/Executor.html)框架）`Runnable`仅表示对象可用于线程。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T14:38:11.340

您应该扩展`Thread`并调用`thread.start()`而不是`thread.run()`，因为`thread1.run()`同步调用该方法。`thread.start`会`run()`异步调用，达到你想要的效果。

您还可以使用此构造函数构造`Thread`一个`Runnable`：

[`Thread(Runnable r)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Thread.html#Thread%28java.lang.Runnable%29)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T14:38:35.833

`Runnable`让一个类实现在不同的线程中运行是不够的。代替

```
MultiThreadedClass thread1 = new MultiThreadedClass(1);
MultiThreadedClass thread2 = new MultiThreadedClass(2);
MultiThreadedClass thread3 = new MultiThreadedClass(3);
MultiThreadedClass thread4 = new MultiThreadedClass(4);
thread1.run();
thread2.run();
thread3.run();
thread4.run(); 
```

尝试做

```
new Thread(new MultiThreadedClass(1)).start();
new Thread(new MultiThreadedClass(2)).start();
new Thread(new MultiThreadedClass(3)).start();
new Thread(new MultiThreadedClass(4)).start(); 
```

# html - perl 脚本的 HTML 解析器

> ID：13234260
> 
> 赞同：0
> 
> 时间：2012-11-05T14:36:16.350
> 
> 标签：html, perl, parsing, html-parsing, html-tree

```
#!/usr/bin/perl

use HTML::TreeBuilder;

my $tree = HTML::TreeBuilder->new; 

$tree->parse_file("sample.html");

foreach my $anchor ($tree->find("p")) {

  print $anchor->as_text, "\n";

} 
```

我的代码没有打印任何输出。`$tree->find("p")`正在返回 NULL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:20:41.877

您没有打开文件，或者它完全无法解析。

尝试类似：

```
my $file = shift(@ARGV) or die "No filename given";
$tree->parse_file($file) or die "Unable to open $file"; 
```

这样你就可以检查它是哪个。

当我为 sample.html 提供以下内容时，您的脚本运行良好

```
<html>
<head><title>test file</title></head>
<body>
    <h1>Title</h1>
    <p>First para</p>
    <p>Second para</p>
    <div>
        <P>Third para</P>
    </div>
</body>
</html> 
```

# asp.net-mvc-3 - 访问从 jquery 到 mvc3 操作的下拉选择值

> ID：13234263
> 
> 赞同：2
> 
> 时间：2012-11-05T14:36:34.323
> 
> 标签：asp.net-mvc-3, autocomplete

我正在尝试根据下拉选择的值填充自动完成文本框，但无法将选择的下拉值作为参数传递给自动完成 url.Action()

这是我正在使用的代码..

```
Dictionary<string, string> searchlist = new Dictionary<string, string>();
searchlist.Add("option1", "1");
searchlist.Add("option2", "2");
searchlist.Add("option3", "3");
searchlist.Add("option4", "4");

SelectList list = new SelectList(searchlist, "value", "key");

    @Html.DropDownListFor(m => m.SearchType, list, new {@id="category", @class = "select" })

       <script  type="text/javascript">
           $(document).ready(function () {
               $("#category").change(function () {
                       var selectedVal = $("#category option:selected").text();

                       alert("You selected :" + selectedVal);

               });
           });

  </script> 

    <input type="text" id="searchField" name="searchField"  data-autocomplete-url="@Url.Action("Autocomplete", "Home", new { lang = Model.Language, cattype = selectedVal  })" class="select" value="Search" onBlur="if(this.value == '') this.value = 'Search';" onFocus="if(this.value == 'Search') this.value = '';"   />
    <a href="#"><img src="@Url.Content("~/Content/images/magnifier.png")" alt="Search" title="Search" /></a> 
```

请帮助我我哪里出错了。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-27T11:21:43.230

当 DDL 更改时，您应该触发自动完成：

```
 $(document).ready(function () {
        $("#category").change(function () {
            var selectedVal = $("#category option:selected").text();

            //fire autocomlete
            $('*[data-autocomplete-url]').each(function () {
                $(this).autocomplete(
                {
                  source:  function (request, response) {
                        $.ajax({
                            url:  $(this).attr('data-action'),
                            dataType: "json",
                            data: { lang : '@Model.Language', cattype : selectedVal   },
                            success: function (data) {
                                response($.map(data, function (item) {
                                    return {
                                        label: item.Label,
                                        value: item.Label,
                                        realValue: item.Value
                                    };
                                }));
                            },
                        });
                    },
                    minLength: 2,
                    select: function (event, ui) {
                        //do something
                    },
                    change: function (event, ui) {
                        if (!ui.item) {
                            this.value = '';
                        } else {

                        }
                    }
                });
            });

        });
    }); 
```

# iphone - IBAction 中出现格式错误的 NSstring

> ID：13234264
> 
> 赞同：2
> 
> 时间：2012-11-05T14:36:38.017
> 
> 标签：iphone, objective-c, ios

我已经在 ViewdidLoad 中声明了带有一些字符串值的 NSString，例如..

```
int i=1;
strval=[NSString stringWithFormat:@"%03d",i];
strval=[NSString stringWithFormat:@"S%@",strval];

NSLog(@"Value %@",strval); 
```

它给出了正确的结果为 S001，但是当我在 IBAction 中打印相同的结果时，

```
- (IBAction)stringvalue:(id)sender {
NSLog(@"Value %@",strval);
} 
```

它每次都给出未知值。有时它会抛出 EXEC_BAD_ACCESS 错误。

请帮我..

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T14:45:14.007

尝试这样的事情

在.h

```
 @property (nonatomic, strong) NSString *strval; 
```

米

```
 @synthesize strval = _strval

  - (void)viewDidLoad 
  {
      int i = 4;
      // ARC
      _strval = [NSString stringWithFormat:@"hello %d", i];
      // None ARC
      // strcal = [[NSString alloc] initwithFormat:@"hello %d",i];
      NSLog(@"%@", _strval);
      // Prints "hello 4" in console (TESTED)
  } 

  - (IBAction)buttonPress:(id)sender
  {
      NSLog(@"%@", _strval);
      // Prints "hello 4" in console (TESTED)
  } 
```

使用弧。这已经过测试，并且按照提出问题的方式工作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T14:44:57.773

看起来您没有使用 ARC，因此下次自动释放池耗尽时将释放字符串。您需要在覆盖的方法`retain`中显式地显示它`viewDidLoad`并显式地显示它：`release``dealloc`

```
- (void)viewDidLoad
{
    ...

    strval = [[NSString stringWithFormat:@"%03d", i] retain];

    ....
}

- (void)dealloc
{
    [strval release];

    ...

    [super dealloc];
} 
```

（我假设您实际上已声明`strval`为实例方法）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T14:54:02.650

在.h

```
 @property (nonatomic, strong) NSString *strval; 
```

米

```
 @synthesize strval = _strval   

- (void)viewDidLoad
{
    ...

    self.strval = [NSString stringWithFormat:@"%03d", i];

    ....
}

- (void)dealloc
{
    self.strval = nil;

    ...

    [super dealloc];
} 
```

这个也适用，有 ARC 也有没有。

只有一个补充：对于 ARC，`[super dealloc];`必须省略该语句。

# ios - 播放 MOV 文件的最佳方式是什么？

> ID：13234270
> 
> 赞同：2
> 
> 时间：2012-11-05T14:36:41.897
> 
> 标签：ios

我已经从 UI 的屏幕截图中生成了该 MOV 文件并录制了声音。结合视频和音频并生成 MOV 格式的电影。

我看过很多 MPMoviePlayerViewController 示例，但它只是显示黑屏。我试过 AVPlayer 但我无法让它工作。

我是在 iOS 中播放电影文件的新手，请帮忙。

这是我的代码：

```
NSString  *fileNamePath = mVideo;
NSArray   *paths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory,NSUserDomainMask, YES);
NSString  *documentsDirectory = [paths  objectAtIndex:0];
NSString  *oldappSettingsPath = [documentsDirectory stringByAppendingPathComponent:fileNamePath];
NSURL *path = [NSURL fileURLWithPath:oldappSettingsPath];
self.mPlayer = [[MPMoviePlayerController alloc] initWithContentURL:path];

self.mPlayer.controlStyle = MPMovieControlStyleFullscreen;
self.mPlayer.fullscreen = YES;
self.mPlayer.scalingMode = MPMovieScalingModeFill;
[[self.mPlayer view] setFrame: CGRectMake(0, 0, 480, 320)];
[self.view addSubview:[self.mPlayer view]];
[self.mPlayer prepareToPlay];
[self.mPlayer play]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T12:01:44.290

我找到了固定到我的`MPMoviePlayerController`：

```
 NSURL *path = [NSURL fileURLWithPath:oldappSettingsPath];
         if ([[NSFileManager defaultManager] fileExistsAtPath:oldappSettingsPath]) {
             NSLog(@"Exist");
             self.mPlayer = [[MPMoviePlayerController alloc] initWithContentURL:path];
             self.mPlayer.movieSourceType = MPMovieSourceTypeFile;
             self.mPlayer.controlStyle = MPMovieControlStyleFullscreen;
             self.mPlayer.fullscreen = YES;
             self.mPlayer.scalingMode = MPMovieScalingModeFill;
             [[self.mPlayer view] setFrame: CGRectMake(0, 0, 480, 320)];
             [self.view addSubview:[self.mPlayer view]];
             [self.mPlayer prepareToPlay];
             [self.mPlayer play];
         } else {
             NSLog(@"Don't Exist");
         } 
```

我还补充说：

```
 self.mPlayer.movieSourceType = MPMovieSourceTypeFile; 
```

在我的情况下，播放器显示黑屏，因为我播放的文件不存在，所以我首先添加了一个检查文件是否存在。

# javascript - 单击时更改 div 背景图像（图像路径问题）

> ID：13234275
> 
> 赞同：2
> 
> 时间：2012-11-05T14:37:02.417
> 
> 标签：javascript

单击 div 时，我将图像路径传递给函数，并在该函数中将该路径分配给`background-image :url("imagePath")`.

不知何故，传递的是绝对路径，而不是实际路径。

这是我的 div

```
function update(image)
{
    $("#divImage")..css('background-image', 'url('image')');
} 
```

但不知何故从未奏效，有人可以帮我解决这个问题吗

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T14:38:01.137

```
$("#divImage").css("background-image", "url("+image+")"); 
```

**笔记：**

1）你有双`..`
2）你需要`+`围绕变量

凉爽的。

*编辑*：人们无缘无故地编辑我的帖子——有没有理由`)`用句号来改变？！奇怪的...

# php - PHP在给定字符串后拆分字符串

> ID：13234279
> 
> 赞同：0
> 
> 时间：2012-11-05T14:37:25.203
> 
> 标签：php

我知道标题有点混乱，但这里有一个例子：

细绳：`SELECT * FROM tbl_clients ORDER BY updatedOn LIMIT 0,50`

我想要的是把所有的东西都*放在* `FROM`一个新的字符串中。

所以我得到的字符串看起来像：`tbl_clients ORDER BY updatedOn LIMIT 0,50`

有什么办法可以做他的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:48:57.417

好吧，你可以像这样使用[爆炸](http://www.w3schools.com/php/func_string_explode.asp)：

```
$string="SELECT * FROM tbl_clients ORDER BY updatedOn LIMIT 0,50";
$split=explode("FROM", $string, 2); 
//Restricts the split to 2 elements, i.e., everything after first occurrence goes in the second element

$result=$split[1]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T14:49:51.643

有很多方法可以做到这一点（stripos-substr、explode）等，但这里有一个**preg_split()**方法：

```
$sql = 
    "SELECT * FROM tbl_clients ORDER BY updatedOn " .
    "WHERE `from`='something' LIMIT 0,50";
$r = preg_split( "/FROM /i", $sql );
print_r( $r ); 
```

给你 $r[1] 玩：

```
Array
(
    [0] => SELECT * 
    [1] => tbl_clients ORDER BY updatedOn WHERE `from`='something' LIMIT 0,50
) 
```

在某些情况下 preg_split 可能非常方便，例如解析整个语句：

```
$r = preg_split( "/(SELECT)|(FROM)|(ORDER BY)|(WHERE)|(LIMIT)/i", $sql ); 
```

在一个声明中为您提供更简洁的细分：

```
Array
(
    [0] => 
    [1] =>  * 
    [2] =>  tbl_clients 
    [3] =>  updatedOn 
    [4] =>  field='something' 
    [5] =>  0,50
) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T14:43:16.297

你可以尝试类似的东西

```
$mystring = "SELECT * FROM tbl_clients ORDER BY updatedOn LIMIT 0,50";
$spliter = "FROM ";
$splitstring = explode($spliter, $mystring);

$result = $splitstring[1]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T14:50:31.000

对于无法阅读[strpos()](http://www.php.net/manual/en/function.strpos.php)和[substr()相应手册页的人](http://www.php.net/manual/en/function.substr.php)

```
$string = 'SELECT * FROM tbl_clients ORDER BY updatedOn LIMIT 0,50';
$pos = strpos($string, ' FROM ');
$substring = substr($string, $pos + strlen(' FROM ')); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-05T14:43:52.837

[拆分](http://php.net/manual/en/function.preg-split.php)你的字符串`FROM`给你一个数组，然后访问数组的第一个元素。

```
$query_array = preg_split("/FROM /i", "SELECT a,b,d FROM tableA WHERE b=2", 1);
$table_and_clause = $query_array[1];  // "tableA WHERE b=2"... 
```

# c# - 滚动（使用触摸板）在 C# Metro Style App 中不起作用，但如果我选择 JavaScript 作为语言，它会起作用

> ID：13234283
> 
> 赞同：2
> 
> 时间：2012-11-05T14:37:36.707
> 
> 标签：c#, javascript, windows-8, scroll

我正在尝试首次创建 Windows 8 Metro App。我研究过所有三种语言（C#、VB 和 JavaScript）。我首先创建了`Grid App`模板（JavaScript 语言）。一切看起来都很好。滚动是通过 JS 中的触摸板（两指滚动）进行的。

但是当我`Grid App`在 C# 中创建相同的内容时。我发现使用两根手指进行水平滚动不起作用。我只能通过拖动滚动条来滚动。滚动条的大小（我选择的东西，不是整个滚动条）也是可变的。它占用了滚动条大小的大约一半，但是当我将它向右移动时，它的大小变小了。`Grid App`如果我用 JavaScript 语言创建相同的行为，我看不到任何此类行为。

有没有其他人面临同样的问题..？？

我在从商店安装的许多应用程序中也看到了这个问题，比如“NDTV”等等。可能这些是用 C# 开发的。

如何让两个手指滚动在 C# 中工作......？

与此同时，我要求创建一个标签，比如`metro-apps`声誉超过 1500 的人。

# ruby - Ruby Unbound Methods：是否可以强制绑定到其他类的实例？

> ID：13234284
> 
> 赞同：12
> 
> 时间：2012-11-05T14:37:46.810
> 
> 标签：ruby, instance-methods

我想知道我是否可以强迫这种情况发生

```
class A
  def bomb ; "bomb" ; end
end

class B ; end

bomb = A.instance_method(:bomb)

b = B.new
bomb.bind(b) 
```

目前它抛出错误 TypeError: bind argument must be an instance of A

我发现这对于我可以用这些未绑定的方法做什么非常有限，可能性有点限制。在这样的情况下（而且我不仅仅指幂等函数），它会有意义吗？并且执行错误就足够了，如果我要处理 A 中未在 B 中复制的变量。我真的很想知道如何强制这种绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:05:46.307

您不能将一个类的实例与另一个类的方法绑定。除非实例是此类或其子类的对象。

这也很明显，一个类的细节不能转移到另一个类的实例。它只能与被授权携带该信息的实例绑定，即该类或其子类的实例。

因此，ruby 还通过不将特定类的方法绑定到另一个类的实例来维护封装。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-11-02T16:45:36.870

Method 和 UnboundMethod 类型期望绑定目标必须是您引用该方法的原始类的子类。将方法转换为 proc 摆脱了子类约束，但只有 Method`to_proc`实现了方法。

```
class A
  def bomb ; "bomb" ; end
end

class B ; end

bomb = A.new.method(:bomb)

B.send(:define_method, :bomb_in_b, &bomb) #converting to proc

b = B.new
puts b.bomb_in_b 
```

在 Ruby 2.2.3 中测试

# c# - 计时器在完成发送电子邮件之前结束

> ID：13234287
> 
> 赞同：1
> 
> 时间：2012-11-05T14:37:53.300
> 
> 标签：c#, exception, timer, sendmail

我必须在计时器正文中发送电子邮件，在 c# 应用程序中，计时器间隔为 2 秒

```
try
{
    string[] filePaths = Directory.GetFiles(@"D:\ISS_Homewrok\");
    foreach (string filePath in filePaths)
    {
        SendEmail(filePath);
        File.Delete(filePath);
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.ToString());
} 
```

删除文件时抛出此异常

```
 System.IO.IOException: The process cannot access the file 'D:\ISS_Homewrok\KeyBoardMovements1.txt' because it is being used by another process.
 at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
   at System.IO.File.Delete(String path)
   at ISS_Homework.Form1.timer_tick(Object sender, ElapsedEventArgs e) 
```

SendEmail 方法是：

```
private void SendEmail(string p)
    {
        SmtpClient smtp;
        //Detailed Method
        MailAddress mailfrom = new MailAddress("samahnizam@gmail.com");
        MailAddress mailto = new MailAddress("rubaabuoturab@gmail.com");
        MailMessage newmsg = new MailMessage(mailfrom, mailto);
        newmsg.Subject = "Tracker";
        //For File Attachment, more file can also be attached
        try
        {
            Attachment att = new Attachment(p);
            newmsg.Attachments.Add(att);
            smtp = new SmtpClient("smtp.gmail.com", 587);
            smtp.UseDefaultCredentials = false;
            smtp.Credentials = new NetworkCredential("XXXXX", "XXXXX");
            smtp.EnableSsl = true;
            smtp.Send(newmsg);
        }
        catch (Exception ex)
        {
        }
    } 
```

**编辑：** 我已经将计时器间隔设置为 1 分钟，但仍在抛出异常！请提供任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:47:35.337

我猜您正在处理您的旧请求时尝试发送新邮件。当两个进程都试图访问一个文件时，它会崩溃。解决方案：将您的函数包装在 backgroundworker.dowork 过程中。每次定时器触发时，它都可以检查 backgroundworker.isbusy 方法来检查旧进程是否已完成。如果没有，只需等待两秒钟。

没有代码，因为我在 Vb.net 中编程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:48:00.097

你用的是什么定时器？.Net 框架中有四种不同类型的 Timer，其中一些会产生新线程来处理 Elapsed/Tick 事件。

在这种情况下，我怀疑发送所有电子邮件所花费的时间比计时器滴答声之间的时间间隔要长。如果您正在使用其中一个线程计时器，那么您的文件将同时被多个计时器线程读取。[请参阅MSDN](http://msdn.microsoft.com/en-us/library/system.timers.timer.stop.aspx)上的文档：

> 引发 Elapsed 事件的信号总是排队等待在 ThreadPool 线程上执行，因此事件处理方法可能在一个线程上运行，同时对 Stop 方法的调用在另一个线程上运行。这可能会导致在调用 Stop 方法后引发 Elapsed 事件。下一节中的代码示例显示了一种解决这种竞争条件的方法。

我要做的是在您的例程开始时设置一个标志，以指示该进程当前正在运行，如果是这种情况则退出：

```
if (_isRunning)
    return;

try
{
    _isRunning = true;
    string[] filePaths = Directory.GetFiles(@"D:\ISS_Homewrok\");
    foreach (string filePath in filePaths)
    {
        SendEmail(filePath);
        File.Delete(filePath);
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.ToString());
}
finally
{  _isRunning = false; } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:41:36.360

你可以试试你的定时器功能

```
timer.Stop();
try
{
    string[] filePaths = Directory.GetFiles(@"D:\ISS_Homewrok\");
    foreach (string filePath in filePaths)
    {
        SendEmail(filePath);
        File.Delete(filePath);
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.ToString());
}
timer.Start(); 
```

# php - php stdClass 访问

> ID：13234288
> 
> 赞同：1
> 
> 时间：2012-11-05T14:37:54.973
> 
> 标签：php, arrays, object, stdclass

我有这样的输出：

```
stdClass Object
(
    [GetMatchdataByLeagueDateTimeResult] => stdClass Object
        (
            [Matchdata] => Array
                (
                    [0] => stdClass Object
                        (
                            [teamId] => 40 
```

在 foreach 循环中

```
foreach ($allMatches as $match): 
```

我现在想使用如下数据：

```
if ($match->idTeam1 == $teamId || $match->idTeam2 == $teamId): 
```

但我得到这个错误：

> 试图获取非对象的属性

原因是，Matchdata 数组包含大约 60 多个条目，我想过滤掉那些`[idTeam1]`or `[idTeam2]`== 给定 id 的条目。

结果我应该只得到大约 5 到 7 个条目。

使用 stdClass 对象时完成此操作的最佳方法是什么？

请帮忙！

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:50:10.063

假设`$response`是您发布的结构：

```
$teamId = 99; // target teamId

foreach($response->GetMatchdataByLeagueDateTimeResult->MatchData as $match)
{
    if ($match->idTeam1 == $teamId || $match->idTeam2 == $teamId)
    {
        // this `$match` has the target $teamId - do something
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:53:46.603

好吧，我很简单：foreach ($allMatches->GetMatchdataByLeagueDateTimeResult->Matchdata as $id => $match): debug($id); 调试($match->idTeam1);

现在可以了： if ($match->idTeam1 == $teamId || $match->idTeam2 == $teamId) ...

还是非常感谢！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:57:38.327

您的外部结构是一个对象，因此您可能正在迭代对象的可见属性（请参阅此页面）。如果你想遍历对象实例中的数组，你应该将它传递给你的 foreach 循环，或者让你的类实现 Iterator 接口并将其方法重定向到数组。

```
 <?php
       foreach ($object->allMatches as $match) {
              /* Your iterate body here */
       } 
```

# mysql - MySQL中有很多“查询结束”状态，所有连接都在几分钟内使用

> ID：13234290
> 
> 赞同：17
> 
> 时间：2012-11-05T14:38:02.587
> 
> 标签：mysql

今天早上，我注意到我们的 MySQL 服务器负载飙升。Max 应该是 8，但它在某一时刻达到了 100 以上。当我检查进程列表时，我发现大量处于`query end`状态的更新查询（简单的，递增“hitcounter”）。我们无法杀死他们（好吧，我们可以，但他们会`killed`无限期地留在该州）并且我们的网站陷入停顿。

我们在重新启动服务时遇到了很多问题，不得不强行终止一些进程。当我们这样做时，我们能够让 MySQLd 重新启动，但进程立即又开始建立起来。据我们所知，此时尚未更改任何配置。

因此，我们`innodb_flush_log_at_trx_commit`从 2 更改为 1（请注意，我们需要符合 ACID），希望这可以解决问题，并将 PHP/PDO 中的连接设置为持久。这似乎工作了一个小时左右，然后连接再次开始耗尽。

幸运的是，我在几个月前建立了一个从服务器，并且能够对其进行推广，现在它正在填补空缺，但我需要了解为什么会发生这种情况以及如何阻止它，因为从服务器的功能严重不足和主人相比，所以我需要尽快切换回来。

有人有什么想法吗？莫非是有什么需要清理的？我不知道是什么，也许是二进制日志之类的？有什么想法吗？我们可以尽快将这台服务器恢复为主服务器，这一点非常重要，但坦率地说，我不知道去哪里看，到目前为止我所做的一切都只是临时修复。

帮助！:)

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-11-05T15:37:16.910

我会在这里回答我自己的问题。我用一个简单的命令检查了分区大小，`df`我可以看到 /var 是 100% 满的。我找到了一个有人留下的档案，大小为 10GB。删除它，启动 MySQL，运行`PURGE LOGS BEFORE '2012-10-01 00:00:00'`查询以清除大量空间并将 /var/lib/mysql 目录大小从 346GB 减少到 169GB。改回大师，一切都再次运行良好。

从这里我了解到我们的日志文件变得非常大，非常快。因此，我将建立一个维护例程，不仅可以保持日志文件的关闭，还可以在我们接近完整分区时提醒我。

我希望这对将来遇到同样问题的人有所帮助。检查您的驱动器空间！:)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-12T23:22:50.723

我们遇到了一个非常相似的问题，mysql 进程列表显示我们几乎所有的连接都停留在“查询结束”状态。我们的问题也与复制和写入二进制日志有关。

我们将 sync_binlog 变量从 1 更改为 0，这意味着不是在每次提交时将 binlog 更改刷新到磁盘，而是允许操作系统决定何时将 fsync() 写入 binlog。这完全解决了我们的“查询结束”问题。

根据[Mats Kindahl 的这篇文章，](http://mysqlmusings.blogspot.com/2012/06/binary-log-group-commit-in-mysql-56.html)在 MySQL 5.6 版本中写入 binlog 不会成为问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-26T01:55:53.967

就我而言，这表明磁盘上的 I/O 已达到极限。我已经将 fsyncs 减少到最低限度，所以不是这样。另一个症状是“log*.tokulog*”文件开始累积，因为系统无法赶上所有写入。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-29T21:31:38.617

我在生产用例中遇到了这个问题。我在表格中使用 replace into select 进行归档，它有 100 万条记录 init 。我在中间打断了查询，它进入了killed状态。

我已经将 innodb_flush_log_at_trx_commit 设置为 1 以及 sync_binlog=1 并且在我的情况下它完全恢复了。而且我再次触发了我的存档脚本，没有任何问题。

# mongodb - NoSQL 文档数据库——除了可扩展性之外，还有什么好的用例？

> ID：13234292
> 
> 赞同：2
> 
> 时间：2012-11-05T14:38:07.293
> 
> 标签：mongodb, couchdb, nosql

我确定以前有人问过这个问题，但是我花了几天时间阅读互联网，但除了可扩展性之外，还无法弄清楚 NoSQL 文档数据库（不是键值存储）的用例.

所以这是我的问题，**如果我不关心可扩展性**，那么在以下任何情况下使用 NoSQL 文档数据库是否有意义：

1.  如果我的模型中有超过 40% 是多态关联
2.  如果需要预先加载大约 8 个模型才能使整个对象有意义，该怎么办？
3.  如果应用程序的某些部分迅速变成[EAV](http://en.wikipedia.org/wiki/Entity%E2%80%93attribute%E2%80%93value_model) ，例如嵌入到应用程序中的迷你 CMS，该怎么办。

工具链成熟度如何？各种 Rails 3 宝石？测试框架？

基本上，让我的应用程序更快上市的务实选择是什么？在数据模式不固定的情况下，哪个是更大的问题 - 数据存储或处理应用程序中的数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:02:57.297

我相信 mongodb & mongoid 非常适合您的需求

*   如果我的模型中有超过 40% 是多态关联。

    > Mongoid 内置多态功能。您可以在这里查看 [http://mongoid.org/en/mongoid/docs/relations.html](http://mongoid.org/en/mongoid/docs/relations.html)（多态部分）

*   如果需要预先加载大约 8 个模型才能使整个对象有意义，该怎么办？

    > mongoid 还有一个预先构建的急切加载选项。您可以在这里查看[http://mongoid.org/en/mongoid/docs/querying.html](http://mongoid.org/en/mongoid/docs/querying.html)（急切加载部分）

*   如果应用程序的某些部分迅速变成 EAV，例如嵌入到应用程序中的迷你 CMS，该怎么办。

    > 我相信 mongodb 最适合 EAV，因为它处理非结构化无模式数据的方式。

我在多个项目中使用 Ruby mongoid gem 有很好的经验。其坚如磐石且设计精良的库具有许多功能。由于它是一个 rails 应用程序，因此您可以使用任何不同的测试框架，例如 rspec 或 cucumber 进行测试。在此处查看 rspec 的匹配器[https://github.com/evansagge/mongoid-rspec](https://github.com/evansagge/mongoid-rspec)

# java - 将pojo映射到json的nullpointerexception

> ID：13234294
> 
> 赞同：0
> 
> 时间：2012-11-05T14:38:13.237
> 
> 标签：java, android, gson

```
{
   "App":[{
        "AppID": 0,
        "AppTime": "08:00 AM"
    }],
   "Rows": 0
} 
```

这是我的 JSON 响应，但是当我映射到我的 POJO 类并访问时，我得到一个`NullPointerException`.

```
ListResponse value = new Gson().fromJson(result, ListResponse.class);

import java.util.List;
public class ListResponse{

    public List<AppList> appList;

    public List<AppList> getAppList() {
        return appList;
    }
} 
```

当我尝试在我的活动课程中访问我的结果时，像这样我得到一个错误。

```
public void accessData(ListResponse result){
    System.out.println(result.getAppList()); // I am getting null here.
} 
```

**更新：**

我的 AppList 类包含**AppID、AppTime`and`行。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:57:45.210

当您使用 GSon 将 a`String`转换为对象（在您的情况下为`ListResponse`对象）时，此类中的属性名称需要与 json 字符串的键中的值完全相同。

你的情况的问题：json中的关键是“App”：

```
"App":[{
    "AppID": 0,
    "AppTime": "08:00 AM"
}], 
```

并且属性名称是`appList`. 尝试放入`appList`json，或更改为`public List<AppList> App;`在类中。这应该解决空值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:44:03.327

我认为您将您的回复存储在`value`

```
 ListResponse value = new Gson().fromJson(result, ListResponse.class); 
```

因此尝试调用`value.getAppList()`：

```
 public void accessData(ListResponse result){
    System.out.println(value.getAppList()); // shouldn't get NullPointer
 } 
```

如果值可能如下所示，那么进行空检查也是一个好主意`null`：

```
 public void accessData(ListResponse result){
    if(value != null){
        System.out.println(value.getAppList()); // shouldn't get NullPointer
     }else{
        System.out.println("value is null");
     }
 } 
```

# google-maps - 是否可以将地图居中在固定位置（lat lng） - 100px？

> ID：13234295
> 
> 赞同：2
> 
> 时间：2012-11-05T14:38:12.760
> 
> 标签：google-maps, google-maps-api-3

我的意思是，我想将地图居中到一个固定位置：

```
map.setCenter(markerCliccato.getPosition()); 
```

并且更少（Y 轴）向下 100 像素。可能吗？或者我需要这个“虚拟”点的纬度/经度？

这是因为我有一个非常高的 InfoWindow，我需要把它放在离地图顶部 100px 的地方！不能在 infowindow 上使用“margin”，因为这会与地图中的其他标记产生麻烦。

**例子**

我将这一点称为 Lat/Lng：[https ://maps.google.com/?q=54.572062,-3.038818](https://maps.google.com/?q=54.572062,-3.038818)

但我想将地图置于[https://maps.google.com/?q=54.486793,-3.042046](https://maps.google.com/?q=54.486793,-3.042046)的中心（在地图中，这或多或少低于我的点 100 像素）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:13:48.383

好的，我需要发布图片:)

这是点击之前

![前](../Images/0160f12455697ae2957e79061000b565.png)

这是之后

![后](../Images/7e4369904dea9c6f9ea755dbd14edaf5.png)

没有灰色区域，地图全部渲染。

此外，要查看标记，您必须允许该站点跟踪您的位置。

```
function offsetCenter(latlng, offsetx, offsety) {
    var scale = Math.pow(2, map.getZoom());
    var nw = new google.maps.LatLng(
    map.getBounds().getNorthEast().lat(), map.getBounds().getSouthWest().lng());

    var worldCoordinateCenter = map.getProjection().fromLatLngToPoint(latlng);
    var pixelOffset = new google.maps.Point((offsetx / scale) || 0, (offsety / scale) || 0)

    var worldCoordinateNewCenter = new google.maps.Point(
    worldCoordinateCenter.x - pixelOffset.x, worldCoordinateCenter.y + pixelOffset.y);

    var newCenter = map.getProjection().fromPointToLatLng(worldCoordinateNewCenter);

    map.setCenter(newCenter);
} 
```

看到它在这里工作：http: [//jsfiddle.net/RASG/vA4eQ/](http://jsfiddle.net/RASG/vA4eQ/)

*使用 FF 15、IE 9 和 Chrome 21 测试*

# cmake - 将一些静态库链接到与 CMake 共享

> ID：13234297
> 
> 赞同：3
> 
> 时间：2012-11-05T14:38:21.800
> 
> 标签：cmake

我有一个外部项目，它为我构建了一些静态库。我想要做的是用我的 cmake 将它们链接到单个共享库中。

我需要做的第一件事是添加库：

add_library(my_shared_lib 共享 ?????)

因为我那里没有任何源文件（只有静态库），所以在 SHARED 之后没有什么可以指定的。（我试图把我的静态库，但它不会接受）。

所以我的问题是我需要放什么而不是问号？

我还假设如果在那之后我 target_link_libraries，那么我会得到我想要的。

有人做过吗？

# javascript - 如何删除嵌套属性？

> ID：13234301
> 
> 赞同：5
> 
> 时间：2012-11-05T14:38:30.950
> 
> 标签：javascript, jquery

我有这个 JSON 文件：[http ://danish-regional-data.googlecode.com/svn/trunk/danish_regional_data.json](http://danish-regional-data.googlecode.com/svn/trunk/danish_regional_data.json)

如何删除所有邮政编码的所有属性`within_5_km`, `within_10_km`, `within_25_km`, `within_50_km`, `within_100_km`？

我读过这个问题：[删除 JSON 属性](https://stackoverflow.com/questions/1219630/remove-a-json-attributes)

```
$(document).ready(function() {

    $.getJSON("post.json", function(data) {

    var pc = data.postalcodes;
    for (var id in pc) {
       if(pc.hasOwnProperty(id)) {
          for(var attr in pc[id]) {
             if(pc[id].hasOwnProperty(attr) && attr.indexOf('within_') === 0) {
               delete pc[id][attr];
             }
          }
       }
    }

    $("#json").html(pc);

    });

}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-29T20:29:14.053

在 ES2016 中，您可以使用[析构](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/Destructuring_assignment)来为子集对象选择所需的字段。

```
//ES6 subset of an object by specific fields
var object_private = {name: "alex", age: 25, password: 123};
var {name,age} = object_private, object_public = {name,age}

//method 2 using literals
let object_public = (({name,age})=>({name,age}))(object_private);

//use map if array of objects
    users_array.map(u=>u.id) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T14:51:31.597

转到您提供的 json url 并打开 Firebug 控制台。然后放入以下代码并执行它：

```
var p = document.getElementsByTagName('pre');
for(i=0; i < p.length; i++) {

  var data = JSON.parse(p[i].innerHTML);
  var pc = data.postalcodes;

  // this is the code i gave you... the previous is jsut to pull it out of the page
  // in Firebug - this works for me

  for (var id in pc) {
     if(pc.hasOwnProperty(id)) {
        for(var attr in pc[id]) {
          if(pc[id].hasOwnProperty(attr) && attr.indexOf('within_') === 0) {
             console.log('Deleting postalcodes.'+id+'.'+attr);
             delete pc[id][attr];
           }
        }
     }
  }
} 
```

* * *

```
// assume data is the complete json

var pc = data.postalcodes;
for (var id in pc) {
   if(pc.hasOwnProperty(id)) {
      for(var attr in pc[id]) {
         if(pc[id].hasOwnProperty(attr) && attr.indexOf('within_') === 0) {
           delete pc[id][attr];
         }
      }
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T15:32:20.520

JSON 被截断：

```
var data = {"postalcodes":
{"800":{"id":"800","name":"H\u00f8je Taastrup","region_ids":["1084"],"region_names":["Hovedstaden"],"commune_ids":["169"],"commune_names":["H\u00f8je-Taastrup"],"lat":"55.66713","lng":"12.27888", "within_5_km":["800","2620","2630","2633"],"within_10_km":["800","2600","2605","2620"]},
"900":{"id":"900","name":"K\u00f8benhavn C","region_ids":["1084"],"region_names":["Hovedstaden"],"commune_ids":["101"],"commune_names":["K\u00f8benhavns"],"lat":"55.68258093401054","lng":"12.603657245635986","within_5_km":["900","999"]},
"1417":{"commune_id":"390","region_id":"1085"}}};
var pc = data.postalcodes;
for (var id in pc) {
    var entry = pc[id];
    for(var attr in entry) {
        if(attr.indexOf('within_') === 0) {
            delete entry[attr];
        }
    }
}
console.dir(data); // your data object has been augmented at this point 
```

你也可以使用正则表达式

```
var data = {"postalcodes":
{"800":{"id":"800","name":"H\u00f8je Taastrup","region_ids":["1084"],"region_names":["Hovedstaden"],"commune_ids":["169"],"commune_names":["H\u00f8je-Taastrup"],"lat":"55.66713","lng":"12.27888", "within_5_km":["800","2620","2630","2633"],"within_10_km":["800","2600","2605","2620"]},
"900":{"id":"900","name":"K\u00f8benhavn C","region_ids":["1084"],"region_names":["Hovedstaden"],"commune_ids":["101"],"commune_names":["K\u00f8benhavns"],"lat":"55.68258093401054","lng":"12.603657245635986","within_5_km":["900","999"]},
"1417":{"commune_id":"390","region_id":"1085"}}};
var regexp = new RegExp("^within_", "i");   // case insensitive regex matching strings starting with within_
var pc = data.postalcodes;
for (var id in pc) {
    var entry = pc[id];
    for(var attr in entry) {
        if(regexp.test(attr)) {
            delete entry[attr];
        }
    }
}
console.dir(data); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-05T10:58:23.607

我写了一个 npm 模块[unset](https://www.npmjs.com/package/unset)正是这样做的。您指定类似于[json-path](https://www.npmjs.com/package/json-path)模块的 json 路径，直到要删除的叶属性。

```
let unset = require('unset');
let object = {a: { b: [ {x: 1}, {x: [{ e: 2} ]}]}};
let newObject = unset(object, ['/a/b[*]/x']); 
```

第二个参数支持多个路径

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T14:44:01.580

那么你可以这样做：

```
var postalcodes = YOUR JSON;

for(var code in postalcodes)
{
 delete postalcodes[code].within_5_km;
 .
 .
 .
} 
```

您可能需要检查代码是否包含您的属性...

# asp.net - 保护 ASP.NET 应用程序中的单个页面

> ID：13234304
> 
> 赞同：2
> 
> 时间：2012-11-05T14:38:37.190
> 
> 标签：asp.net, security

我经常需要在面向公众的应用程序上保护单个页面（即报告），以便只有授权用户才能访问该页面。在过去，这意味着设置自定义登录表单或使用 ASP.NET 成员资格提供程序或其他过于复杂而无法达到目的的东西。有没有一种更简单（安全）的方法可以以这种方式保护单个页面？

我考虑过的一些事情：

*   客户端证书（初始设置很痛苦）
*   一个主密码（在紧要关头工作，但感觉很脏）
*   通过主机地址限制访问（当需要允许外部用户访问页面时很麻烦）。另外，需要支持通过代理访问（X-Forwarded-For），技术用户可以伪造）

还有其他选择吗？建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:47:37.880

您可以在 web.config 文件中执行此操作，类似于[此处](https://stackoverflow.com/questions/9701136/how-to-secure-a-single-aspx-page-in-asp-net-website)建议的内容。就身份验证而言，最简单的方法是使用 Windows 身份验证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T16:33:50.023

登录系统是您的最佳选择。如果您不想自己设置和管理登录系统，请考虑使用 OpenAuth。

您可以使用[DotNetOpenAuth](http://www.dotnetopenauth.net/)轻松实现功能。然后，用户可以使用他们的 Google、Yahoo、StackOverflow 等帐户登录，您将获得一个可以存储的令牌以限制访问。

# php - 如何正确使用 PHP 变量作为参数的 PDO 语句？

> ID：13234307
> 
> 赞同：3
> 
> 时间：2012-11-05T14:38:44.140
> 
> 标签：php, mysql, parameters, pdo

我目前有以下代码：

```
$dbh = new PDO('mysql:host='.DATABASE_HOST.';dbname='.DATABASE_NAME, DATABASE_USER, DATABASE_PASSWORD);
$dbh->setAttribute(PDO::ATTR_EMULATE_PREPARES, false);

$dbh->prepare("INSERT INTO mdr_contacts SET fkRelatieId = 0, reseller = 0, code = :code, naam = :naam");
$dbh->execute(array(":code" => $contact["contact_id"],":naam" => $name)); 
```

然而，这似乎失败了：`Fatal error: Call to undefined method PDO::execute() in file.php on line 67`

到目前为止，我为完成这项工作所做的工作：

1.  检查是否存在`$name`并且`$contact`具有正确的值。
2.  在准备语句之前执行 SELECT 查询以确保 PDO 正常工作。
3.  在 ATTR_EMULATE_PREPARES 未设置为 false 的情况下运行代码。

但是这些都行不通，任何人都可以让我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:41:09.937

你执行一个语句，而不是一个连接。 `prepare()`在连接上，返回一个语句。

此外，我更喜欢显式调用绑定值，但这只是我的强迫症偏好。

```
 $statement = $dbh->prepare("INSERT INTO mdr_contacts SET fkRelatieId = 0, reseller = 0, code = :code, naam = :naam");
 $statement->bindValue(":code", $contact["contact_id"]);
 $statement->bindValue(":naam", $name);
 $statement->execute(); 
```

# css - 定义 div 框（底部）的高度与不同的分辨率

> ID：13234309
> 
> 赞同：0
> 
> 时间：2012-11-05T14:38:49.247
> 
> 标签：css, height, positioning, resolution

我在为滑块设置适当的文本时遇到问题。我希望文本出现在页面的右下角。唯一的问题是不同的分辨率（平板电脑、笔记本电脑、24 英寸显示器）。

测试页面：[http ://tinyurl.com/d825kuv](http://tinyurl.com/d825kuv)

代码：

```
div {
 position:relative; 
 float:right; 
 vertical-align: bottom;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:41:27.743

要将元素移动到 a 的底部`<div>`，将 parent`<div>`的位置设置为 relative: `position:relative`，那么`<div>`您想要放置在底部的应该有 CSS

```
div {
 position: absolute;
 bottom: 0;
 right:0;
} 
```

然后只需调整像素值以适合您的布局。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:41:21.877

做：

```
position:absolute;
right:0px;
bottom:0px; 
```

这将确保有问题的元素在父元素中尽可能靠右，并且尽可能靠下。当然，如果您想从右侧/底部填充它，只需将像素提升一个档次。请注意， position:absolute 仅在父位置未设置为默认值时才有效。如果有疑问，请给您的父母以下风格：

```
position:relative; 
```

# c - 什么是 IOSET 以及简单蜂鸣器 (BUZZER_PIN) 的工作原理？

> ID：13234311
> 
> 赞同：0
> 
> 时间：2012-11-05T14:38:53.197
> 
> 标签：c, io, microcontroller

我有带蜂鸣器的微控制器的 c 代码。它有效，但我想知道它是如何工作的。在 wh.h/.cpp 我有这个功能：

```
void setBuzzer(tBool on)
{
  if (TRUE == on)
    IOCLR = BUZZER_PIN;
  else
    IOSET = BUZZER_PIN;
} 
```

这可以启用和禁用蜂鸣器。我不知道它真正的作用是什么，BUZZER_PIN、IOCLR 和 IOSET 是什么？

BUZZER_PIN 在代码中只出现一次，在：

```
void immediateIoInit(void)
{
  tU8 initCommand[] = {0x12, 0x97, 0x80, 0x00, 0x40, 0x00, 0x14, 0x00, 0x00};
  //                                                         04 = LCD_RST# low
  //                                                         10 = BT_RST# low

  //make all key signals as inputs
  IODIR &= ~(KEYPIN_CENTER | KEYPIN_UP | KEYPIN_DOWN | KEYPIN_LEFT | KEYPIN_RIGHT);

  IODIR |= BUZZER_PIN;
  IOSET  = BUZZER_PIN;

  IODIR |= BACKLIGHT_PIN;
  IOSET  = BACKLIGHT_PIN; 
```

我觉得这很奇怪，因为 IOSET 值在将其设置为 BUZZER_PIN 后就发生了变化。那么，这种方式能做什么呢？

还有一个问题：我可以用蜂鸣器做更多的事情吗？例如改变音量？当然，声音的持续时间可以用 setBuzzer(1) 调整，而不是 pause(time) 和 setBuzzer(0)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:46:05.520

您会在某个地方找到包含 IOSET IOCLR 等的#define 的包含文件。

通常，它们映射到 GPIO 寄存器地址，例如：

**#define FIO0DIR (*(volatile unsigned long *)0x3FFFC000)**

IOSET 通常是一个可写地址，硬件能够将写入它的所有位设置为 1，而其余的 GPIO 位则保持之前的状态。这消除了对读/修改/写操作的需要，因此对中断/线程更加友好。它通常有一个类似的“IOCLR”伙伴，可以清除在其参数中设置的 GPIO 端口上的位，而不会影响其他人的状态。

端口寄存器本身可能被称为“IOPIN”或类似的名称。直接使用 IOPIN 修改一个位或位子集需要读取/修改/写入 :(

蜂鸣器似乎连接到一个 GPIO 引脚，因此您只能打开和关闭它 - 无法进行更精细的控制。

# ios - 无法在 NSManagedObjects 之间建立关系

> ID：13234316
> 
> 赞同：1
> 
> 时间：2012-11-05T14:39:08.343
> 
> 标签：ios, core-data, nsmanagedobject, nsmanagedobjectcontext

我有 1 个 ToDo 对象，我正在创建 1 个 Report 对象。它们都是同一个 NSManagedObjectContext 的不同 MOC 的 NSManagedObject 创建。为了清楚起见， NSManagedObjectContext 是我的 PersistenceStore 类中的一个 ivar。

ToDo 对象来自一个数组，该数组继承自 PersistenceStore 中的一个方法，该方法返回包含保存在 NsPresistentStoreCoordinator 中的对象的数组。todo 对象作为属性传递给我应该初始化报告的类。

报告类从 PersistenceStorage NSManagedObject 的 MOC 初始化，代码行如下：

```
NSManagedObjectContext *context = [store managedObjectContext];
Report *report = [NSEntityDescription insertNewObjectForEntityForName:@"Report" inManagedObjectContext:context]; 
```

Todo 和 Report 对象具有一对一的关系。但是我尝试设置的关系我得到了错误

> <\NSInvalidArgumentException> 非法尝试在不同上下文中的对象之间建立关系“待办事项”

在我看来，我使用相同的 NSManagedObjectContext。有些可以帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:06:42.500

查找另一个实体的上下文：

```
NSManagedObjectContext *context = [store managedObjectContext];

 NSManagedObject *ctx = [context existingObjectWithID:[todo objectID] error:&error];
Report *report = [NSEntityDescription insertNewObjectForEntityForName:@"Report" inManagedObjectContext:ctx]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T22:52:59.920

我找到了解决方案。我使用了 NeverBe 的部分答案。

```
NSManagedObjectContext *context = [store managedObjectContext]; 
Report *report = [NSEntityDescription insertNewObjectForEntityForName:@"Report" inManagedObjectContext:context]; 
NSManagedObject *object = [context objectRegisteredForID:[currentTodo objectID]]; 
[report setTodo:((ToDo*) object)]; 
```

我没有使用 NeverBe 答案的原因是 Report 对象在同一上下文中有其他关系。如果我复制 Todo 对象的上下文，我会在其他关系中遇到同样的问题。

# mono - 处理调用 native-to-managed thunk 获得的异常

> ID：13234318
> 
> 赞同：0
> 
> 时间：2012-11-05T14:39:10.940
> 
> 标签：mono

该场景非常简单，我`2.10.8`在我的应用程序中嵌入了单声道运行时，并且我通过以下方式获得的指针调用托管方法`mono_method_get_unmanaged_thunk`：

```
// obtain pointer
bool (__stdcall*foo) (MonoException**);
foo = mono_method_get_unmanaged_thunk(somemethod);

// call it
MonoException* exc;
foo(&exc);
if(exc)
    // handle exception
// nothing else... 
```

让我感到困惑的是，我没有对`MonoException`指针做任何其他事情（我读过的文档没有说明这一点）。是否由托管运行时处理删除？如果是这样，如何确定我的本地端没有持有指向它的指针？

**编辑**

我通读了源代码，发现异常只是指向用创建的对象的指针`mono_object_new`，因此它们是垃圾收集的主题。

现在，我还读到如果我想在本机端保留一些指针并防止它被垃圾，我需要为它获取 GC 句柄。所以现在的（修改后的）问题是：

如果返回的指向异常对象的指针的点仅用作错误报告工具，并且在托管调用之后立即进行此类错误报告，那么可以安全地假设它在我处理它之前不会被垃圾（不使用 gc 句柄)?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T17:21:59.153

引用您链接的页面： *请注意，LOCAL 变量不需要此注册，因为它们存储在堆栈中。只有全局变量才需要，因为它们不是 GC 根集的一部分。*

所以这意味着在您的场景中您不必分配句柄。

# linux-device-driver - 环回网络内核模块不工作

> ID：13234321
> 
> 赞同：4
> 
> 时间：2012-11-05T14:39:19.757
> 
> 标签：linux-device-driver, kernel-module, loopback

我是内核模块开发的新手。我正在尝试开发一个伪网络驱动程序，在没有任何实际设备的情况下以环回模式运行。我的目标是使用以下设置：

```
iperf -s -u.........iperf -c 192.168.1.1 -p 5001 -u 
```

> ======.......============
> 
> |...if0....|......|........if1....|
> 
> ======.......============
> 
> ```
>  |              |
> /|\            \|/
>  |              |
>   --------------- 
> ```

我已经从驱动程序注册了两个接口。然后我修改了从 if1 接收到的 UDP 数据包，使它看起来像在 if0 接收到的一样。但它永远不会到达侦听所有 udp if 的 udp 端口​​的 iperf 服务器应用程序。但是每当我在 if0 上通过wireshark 嗅探数据包时，似乎是在 if0 接收到数据包。但由于某种原因，它没有通过网络堆栈。

任何线索？ip 校验和和 udp 校验和都已重新计算和验证（使用 wireshark）。我正在使用 netif_rx 将数据包指示到另一个接口句柄（if0 句柄）。

我只使用了 5 个函数 ptr 回调 {open、close、xmit_start、get_stats & config} 进行网络操作。校验和也设置为 UNNECESSARY。已设置 IF 标志以指示 NO_ARP。

# 编辑：IP 地址输出

> eth1：mtu 1500 qdisc
> 
> pfifo_fast 状态 UP qlen 1000 链接/以太 00:e0:ff:00:00:e0 brd
> 
> ff:ff:ff:ff:ff:ff inet 192.168.1.1/24 brd 192.168.1.255 范围 globa eth1 valid_lft
> 
> 永远首选_lft永远4：
> 
> eth2：mtu 1500 qdisc pfifo_fast
> 
> 状态 UP qlen 1000 链接/以太 00:e0:ff:40:00:e0 brd ff:ff:ff:ff:ff:ff
> 
> inet 192.168.2.1/24 brd 192.168.2.255 范围全局 eth2 valid_lft
> 
> 永远首选_lft 永远

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T14:22:42.420

好的，我已经弄清楚了。

我觉得很愚蠢，不去想它。由于路由问题，数据包被丢弃。

**接收 IF 处接收到的数据包必须与 IF 具有相同的网络。**

因此，如果 IF 有 192.168.1.1/24，则路由系统只接受来自 192.168.1.X/24 的数据包。

直到我尝试使用单个 IF 环回时，我才注意到它。谁能解释为什么会这样？

# ios - 使用 ASIHTTPRequest 下载多个文件

> ID：13234322
> 
> 赞同：1
> 
> 时间：2012-11-05T14:39:20.357
> 
> 标签：ios, file, download, request, asihttprequest

我正在做一个项目，我需要为服务器下载 3 个不同的 .plist 文件，但我只能下载其中一个。谁知道怎么把这三个都下载下来？我正在使用 ASIHTTPRequest。我的代码：

```
- (void)downloadPlist {
NSLog(@"Download in progress...");

progressView.alpha = 1.0;

// Here we're downloading the .plist file from a server to the app's Documents Directory.
// Create file manager
fileManager = [NSFileManager defaultManager];

// Point to Document directory
documentsDirectory = [NSHomeDirectory()
                      stringByAppendingPathComponent:@"Documents"];

documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject];

filePath = [documentsDirectory stringByAppendingPathComponent:@"example1.plist"];
filePath = [documentsDirectory stringByAppendingPathComponent:@"example2.plist"];
filePath = [documentsDirectory stringByAppendingPathComponent:@"example3.plist"];

// files from server.
NSURL *url = [NSURL URLWithString:@"http://myWeb.com/example1.plist"];
NSURL *url1 = [NSURL URLWithString:@"http://myWeb.com/example2.plist"];
NSURL *url2 = [NSURL URLWithString:@"http://myWeb.com/example3.plist"];

request = [ASIHTTPRequest requestWithURL:url];
request = [ASIHTTPRequest requestWithURL:url1];
request = [ASIHTTPRequest requestWithURL:url2];
[request setShowAccurateProgress:YES];
[request setDownloadDestinationPath:filePath];
[request setDownloadProgressDelegate:progressView];
[request setDelegate:self];
[request startAsynchronous]; 
```

}

我想我在正确的轨道上，但不确定......干杯！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:57:44.677

您在多个地方使用了相同的变量名来获取三个文件。第一个变量是“filePath”

将变量更改为单独的名称，例如这样，

```
filePath1 = [documentsDirectory stringByAppendingPathComponent:@"example1.plist"];
filePath2 = [documentsDirectory stringByAppendingPathComponent:@"example2.plist"];
filePath3 = [documentsDirectory stringByAppendingPathComponent:@"example3.plist"]; 
```

“请求”变量也是如此？

像这样进行更正，

```
request1 = [ASIHTTPRequest requestWithURL:url];
request2 = [ASIHTTPRequest requestWithURL:url1];
request3 = [ASIHTTPRequest requestWithURL:url2]; 
```

或者，如果您只想拥有 1 个请求对象，则可以尝试遍历所有 3 个 url 并一一分配请求。确保在循环中提供不同的文件路径

```
[request setDownloadDestinationPath:filePath**{N}**]; 
```

# facebook - 脸书获取用户ID

> ID：13234324
> 
> 赞同：0
> 
> 时间：2012-11-05T14:39:29.597
> 
> 标签：facebook, facebook-opengraph

我正在 Facebook 上做一个简单的比赛，这是一个要填写的表格。我想添加一个带有共享选项的机制。

您将为每个点击返回链接的朋友赢得一次机会。

从技术上讲，我希望将用户 ID 添加到共享 url，以便在我的数据库中为他添加 1 次机会（共享选项将出现在表单之后）

所以我需要用户 ID，但我不想在启动我的应用程序之前显示 FB 弹出窗口“接受此应用程序”。可能吗？

如果没有，您是否有一个 id 或在线使用开放图和所有这些东西来完成它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:15:59.047

没有登录/授权就无法获取用户的用户/Facebook-ID。签名请求变量仅在用户未登录时显示基本信息（如状态、管理员状态、语言环境……）。

因此，为了获得您必须授权用户的用户 ID，我建议使用 JavaScript SDK：

> [https://developers.facebook.com/docs/howtos/login/getting-started/](https://developers.facebook.com/docs/howtos/login/getting-started/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-05T17:19:23.860

这违反了 Facebook 主页条款。

您不能在比赛中将分享视为参赛作品。

点击此链接并查看第 III.E.3 节了解详细信息 [https://www.facebook.com/page_guidelines.php](https://www.facebook.com/page_guidelines.php)

# javascript - 在节点 js 中对字符串调用 parseInt 返回 NaN

> ID：13234327
> 
> 赞同：2
> 
> 时间：2012-11-05T14:39:43.880
> 
> 标签：javascript, node.js

我正在使用节点 js 中的 binaryjs 模块从客户端传递一个缓冲区。这个缓冲区包含一个管道分隔的字符串，我最终在服务器上解析它。

在客户端，我将字符串转换为 Uint8Array。我的字符串看起来像这样：

```
var stringToConvert = 'A_1_22|B_2_33|C_3_44'; 
```

当这个 Uint8Array 被传递到我的服务器时，它作为缓冲区接收。我首先将 Buffer 分块成一个数组：

```
var parts = [];
// ...
// as data is received:
parts.push(data); 
```

当我将所有数据流式传输后，我将此数组转换为字符串并用“|”分割：

```
var arrayString = parts.toString().split("|"); 
```

这让我得到了所需的数组输出：

```
arrayString = ['A_1_22', 'B_2_33', 'C_3_33']; 
```

然后我遍历这个arrayString并再次用“_”分割。

```
for(var i = 0; i < arrayString.length; i++)
{
    var thisArray = arrayString[i].split("_");
    // ... 
```

当我尝试迭代 thisArray 以将第二个和第三个值转换为整数时，就会出现问题：

```
var intVal1 = parseInt(thisArray[1]); // returns NaN
var intVal2 = parseInt(thisArray[2]); // returns NaN
console.log(typeof thisArray[1]); // returns string 
```

在客户端运行相同的代码可以正确地将字符串转换为整数。不确定我在这里缺少什么？

# iphone - UIActivityViewController 发送html邮件ios6

> ID：13234328
> 
> 赞同：10
> 
> 时间：2012-11-05T14:39:53.243
> 
> 标签：iphone, objective-c, ios6, uiactivityviewcontroller

我在我的 iphone 应用程序中使用 UIActivityViewController 来共享图片和文本。

我使用本教程来自定义不同服务的文本：

[https://www.albertopasca.it/whiletrue/objective-c-custom-uiactivityviewcontroller-icons-and-text/](https://www.albertopasca.it/whiletrue/objective-c-custom-uiactivityviewcontroller-icons-and-text/)

每件事都很完美，但我需要 html 来格式化邮件。

我没有找到任何用html格式化代码的方法，我有html标签......

有没有办法通过 UIActivityViewController 以 html 格式发送邮件？我不想要纯文本

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-13T19:41:42.720

如果您返回包含 HTML 的 NSString，则 com.apple.UIKit.activity.Mail 会将其解释为 HTML。

```
NSString *body = @"<html><body><ul><li>one</li><li>two</li></ul></body></html>"; 
```

如果你想要 HTML 电子邮件正文和纯文本 Twitter 推文，那么创建一个采用 UIActivityItemSource 协议的新类并实现 activityViewController:itemForActivityType：

# c# - 控制器的自定义脚手架

> ID：13234330
> 
> 赞同：8
> 
> 时间：2012-11-05T14:40:09.953
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我在我的 ASP MVC4 应用程序中使用存储库模式，我认为创建自定义脚手架模板以避免每次生成某些内容时都调整代码会很好。

我遵循了网络上的一些教程。我将 ProgramFiles 中的 CodeTemplates 目录复制到我的项目（仅部分文件），并清除了每个文件的自定义工具属性。

我设法实现了两个目标：

*   覆盖控制器的默认模板：当我转到控制器>添加>控制器并选择“具有读/写操作和视图的控制器......”时，它使用我的模板。
*   添加新的视图模板：当我转到 SomeViewFolder>Add>View 时，我可以在那里选择我的新模板。

我无法实现的是创建一个新模板**ControllerWithRepo.tt**并能够在 Controller>Add>Controllers 中选择它。即使我创建了**ControllerWithRepo.tt**，它也不会显示在模板下拉列表中。

**我知道可以通过在ControllerWithContext.tt**中硬编码来做我想做的事情 ，但这似乎是一个蹩脚的解决方案。我想以正确的方式做到这一点 - 传递存储库类而不是 DbContext 类并按照我想要的方式生成控制器。

现在如果我尝试将我的存储库类作为 dbcontext 它无法执行脚手架。

综上所述，如何为存储库模式创建自己的控制器脚手架模板？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:36:43.247

通过遵循 Steve Sandererson关于Overriding *the T4 templates的*[帖子](http://blog.stevensanderson.com/2011/04/06/mvcscaffolding-overriding-the-t4-templates/)，我能够覆盖现有的 ControllerWithRepository 。

# xaml - 如何在 WinRT XAML 中引用外部程序集？

> ID：13234336
> 
> 赞同：1
> 
> 时间：2012-11-05T14:40:29.703
> 
> 标签：xaml, windows-runtime

我正在尝试在 XAML 中添加对外部程序集的引用，语法如下：

```
xmlns:my_namespace="using:CompanyName.AssemblyName" 
```

问题是我想使用的实际类位于`CompanyName.AssemblyName.InnerName`命名空间下。

什么是合适的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:45:35.287

尝试：

```
xmlns:my="using:CompanyName.AssemblyName.InnerName" 
```

# master-detail - 如何使用主/从关系连接两组数据库组件？

> ID：13234338
> 
> 赞同：0
> 
> 时间：2012-11-05T14:40:36.980
> 
> 标签：master-detail, dbexpress, c++builder-xe2

这就是我的数据库组件在程序中的连接方式：

![在此处输入图像描述](../Images/224cabe99b619e316e7afc8f9643d368.png)

组件的数据类型是（第一行，从左到右）：`TDBGrid`, `TDataSource`, `TClientDataSet`, `TDataSetProvider`, `TSQLQuery`, `TSQLConnection`. 第二行类似于第一行。

客户端数据集`Query_LimitDetail`通过属性`MasterSource`和 `MasterFields`. 它们的值如下：

```
Query_LimitDetail->MasterSource = DataSource_Limit;
Query_LimitDetail->MasterFields = L"ID"; 
```

分配给客户端数据集的 SQL 命令是：

```
select * from LIMIT order by NAME
select * from LIMITDETAIL where LIMIT_ID = :ID order by ACCUR 
```

这就是我打开查询的方式：

```
Query_Limit->Open();
Query_LimitDetail->Open(); 
```

尝试打开详细查询时，程序抛出以下错误：

`dbExpress driver does not support the TDBXTypes.UNKNOWN data type. Vendor error message: unknown ISC error 0`

有什么我没有正确制作的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T11:14:26.950

解决方案是在打开查询之前设置 SQL 参数类型：

```
Query_Limit->Close();
Query_Limit->Open();

// ID param
TParam   *param = Query_LimitDetail->Params->Items[0];
param->DataType = ftInteger;

Query_LimitDetail->Close();
Query_LimitDetail->Open(); 
```

另一种更通用的解决方案是在 OnBeforeOpen 事件处理程序中设置参数类型，如下所示：

```
__fastcall MyDataModule::MyDataModule(TComponent *Owner) :
    TDataModule(Owner)
{
    ...
    Query_LimitDetail->BeforeOpen = Query_LimitDetail_OnBeforeOpen;
    ...
}

void __fastcall MyDataModule::Query_LimitDetailBeforeOpen(TDataSet *DataSet)
{
   if (Query_LimitDetail->Params->Count == 0)
   {
      return;
   }

   // ID param
   TParam   *param = Query_LimitDetail->Params->Items[0];
   param->DataType = ftInteger;
} 
```

还需要将主表中的列（在`MasterFields`属性中指定）链接到明细表中的列：

```
Query_LimitDetail->IndexFieldNames = L"LIMIT_ID"; 
```

# ruby - while循环没有停止

> ID：13234347
> 
> 赞同：0
> 
> 时间：2012-11-05T14:41:02.027
> 
> 标签：ruby, rubygems, watir, watir-webdriver

我正在尝试填充一个文本字段，但我的 while 循环它不工作它卡在循环中。你能告诉我我做错了什么吗？

```
mainStatus = ['vehicleList[0].mainStatus','vehicleList[1].mainStatus','vehicleList[2].mainStatus','vehicleList[3].mainStatus','vehicleList[4].mainStatus','vehicleList[5].mainStatus','vehicleList[6].mainStatus','vehicleList[7].mainStatus']
subStatus = ['vehicleList[0].subStatus','vehicleList[1].subStatus','vehicleList[2].subStatus','vehicleList[3].subStatus','vehicleList[4].subStatus','vehicleList[5].subStatus','vehicleList[6].subStatus','vehicleList[7].subStatus']
i = 0

while browser.text_field(:name => 'selection').value == ''
    if browser.span(:name => mainStatus[i]).text == 'AVAILABLE' && (browser.span(:name => subStatus[i]).exists?) == false
        browser.text_field(:name => 'selection').set (i + 1).to_s
        browser.button(:name => "OpSelect").click
    else 
        i + 1   
    end
        if i == 8 && browser.button(:name => "OpSelect").click.exists?
            browser.button(:name => "OpSelect").click
            i = 0
        end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:47:06.007

```
while browser.text_field(:name => 'selection').value == ''
    if browser.span(:name => mainStatus[i]).text == 'AVAILABLE' && (browser.span(:name => subStatus[i]).exists?) == false
        browser.text_field(:name => 'selection').set (i + 1).to_s
        browser.button(:name => "OpSelect").click
    end
        i = i + 1   
            if i == 8 && browser.button(:name => "OpSelect").click.exists?
                browser.button(:name => "OpSelect").click
                i = 0
            end

end 
```

# c++ - 为具有不同标志的目标文件重构 Makefile

> ID：13234351
> 
> 赞同：1
> 
> 时间：2012-11-05T14:41:08.233
> 
> 标签：c++, makefile, gnu-make

我在同一目录中有一些源 .cpp 文件，我想将它们编译为目标文件。其中一些需要链接“额外”库（所有文件的库都相同），而其中一些不需要，我想编写通用规则以匹配正确的文件，而不为每个文件编写特定规则额外标志。更详细地说，我想重构我的 Makefile，这样我就不必为源文件 SourceFileOpenCVNeeded.cpp OCVAlsoHere.cpp TheSameForMe.cpp 指定不同的规则（现在它们很少，但可能更多）。

这是我的 makefile 的实际样子：

```
CPP_FILES := $(wildcard src/*.cpp)
OBJ_FILES := $(addprefix obj/,$(notdir $(CPP_FILES:.cpp=.o)))
MAIN_SRC := main.cpp
OCV_LIBS := `pkg-config opencv --libs`
OCV_PATH := `pkg-config opencv --cflags`
MY_LIB := launcher
LD_FLAGS := $(MAIN_SRC) -L. -l$(MY_LIB) $(OCV_LIBS)
CC_FLAGS := -c -fPIC
AR_FLAGS := rcs
STATIC_LIB := lib$(MY_LIB).a
CC := g++
EXEC := test

all: lib main

main:
    $(CC) $(LD_FLAGS) -o $(EXEC)

lib: $(OBJ_FILES)
    ar $(AR_FLAGS) $(STATIC_LIB) $^

obj/SourceFileOpenCVNeeded.o: src/SourceFileOpenCVNeeded.cpp 
    $(CC) $(OCV_PATH) $(CC_FLAGS) $(OCV_LIBS) -c -o $@ $<

obj/OCVAlsoHere.o: src/OCVAlsoHere.cpp 
    $(CC) $(OCV_PATH) $(CC_FLAGS) $(OCV_LIBS) -c -o $@ $<

obj/TheSameForMe.o: src/TheSameForMe.cpp 
    $(CC) $(OCV_PATH) $(CC_FLAGS) $(OCV_LIBS) -c -o $@ $<

obj/%.o: src/%.cpp
    $(CC) $(CC_FLAGS) -c -o $@ $<

clean:
    rm -f $(OBJ_FILES) $(STATIC_LIB) $(EXEC) 
```

PS：可以添加到我的 Makefile 中的任何其他改进吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:50:18.583

您也许可以使用[特定于目标的变量](http://www.gnu.org/software/make/manual/html_node/Target_002dspecific.html#Target_002dspecific)，例如（未测试）

```
EXTRA_FLAGS=
obj/TheSameForMe.o: EXTRA_FLAGS="$(OCV_PATH) $(OCV_LIBS)"

obj/%.o: src/%.cpp
  $(CC) $(CC_FLAGS) $(EXTRA_FLAGS) -c -o $@ $< 
```

# ajax - 在struts2中使用ajax进行验证

> ID：13234357
> 
> 赞同：1
> 
> 时间：2012-11-05T14:41:27.540
> 
> 标签：ajax, json, validation, struts2, struts-validation

我使用 ajax 验证来验证以下内容

```
 <tr>
      <td width="20" style='color: red'>
         <img src="images/icon-star.png" width="16" height="16" />
      </td>
      <td id="lblCustomBillNo" style="width: 15%" class="searchCriteriaCellLbl">
         The custom Bill Number
      </td>
      <td width="5" class="searchCriteriaCellLbl">:</td>
      <td class="searchCriteriaCellVal">
          <s:textfield id="customBillNo" name="customBillNo" size="20" maxlength="24" style="width: 200px" />
      </td>
      <td class="errorFlag" style="color: red" valign="middle">
          <s:fielderror fieldName="customBillNo" />
      </td>
  </tr>
  <tr>
      <td width="20" style='color: red'>
        <img src="images/icon-star.png" width="16" height="16" />
      </td>
      <td id="lblBillNo" style="width: 15%" class="searchCriteriaCellLbl">
         <s:property value="%{getText('billNo')}" />
      </td>
      <td width="5" class="searchCriteriaCellLbl">:
      </td>
      <td class="searchCriteriaCellVal">
          <s:textfield label="billNo" id="billNo" name="billNo" size="20" maxlength="24" style="width: 200px" />
      </td>
      <td class="errorFlag" style="color: red" valign="middle">
          <s:fielderror fieldName="billNo" />
      </td>
  </tr>
  <tr>
      <td width="20" style='color: red'>
        <img src="images/icon-star.png" width="16" height="16" />
      </td>
     <td id="lblCarrierNo" style="width: 15%" class="searchCriteriaCellLbl">
        The carrier Number
     </td>
     <td width="5" class="searchCriteriaCellLbl">:
     </td>
     <td class="searchCriteriaCellVal">
        <s:textfield label="carrierNo" id="carrierNo" name="carrierNo" size="20" maxlength="24" style="width: 200px" />
     </td>
     <td class="errorFlag" style="color: red" valign="middle">
        <s:fielderror fieldName="carrierNo" />
     </td>
 </tr> 
```

我对 gobal i18n 文件中的错误使用以下国际化

```
errors.required=${getText(fieldName)} requireddd 
```

和这个验证文件

```
 <validators>      
     <field name="customBillNo">
        <field-validator type="requiredstring" short-circuit="true">
           <param name="trim">true</param>
           <message key="errors.required" />
        </field-validator>
     </field>
     <field name="billNo">
      <field-validator type="required" short-circuit="true">
        <message key="errors.required" />
       </field-validator>
     </field>
     <field name="carrierNo">
       <field-validator type="required" short-circuit="true">
          <message key="errors.required" />
       </field-validator>
     </field>
   </validators> 
```

我把这个javascript用来使用ajax验证

```
 function validate(){

            //document.all.loading.style.display = 'block';

            var searchUrl = 'AddEnteringApproval_approval';

            var params = '';

            var elemArray = document.mainForm.elements;
            for (var i = 0; i < elemArray.length;i++)
            {
                var element = elemArray[i];

                var elementName= element.name;
                if(elementName=='formAction')
                    continue;
                params += '&' + elementName+'='+ encodeURIComponent(element.value);
            }

            params += '&struts.enableJSONValidation=true&struts.validateOnly=true';

            createXmlHttpObject(); // this is my function that prepare ajax

            sendRequestPost(http_request,searchUrl,false,params);

            postValidation();

    }

    function postValidation() {
       var form = $('#mainForm');

       var text = http_request.responseText;

       //clear previous validation errors, if any
       StrutsUtils.clearValidationErrors(form);
       alert(text)
       //get errors from response
       //var text = request.responseText;
       var errorsObject = StrutsUtils.getValidationErrors(text);

       //show errors, if any
       if(errorsObject.fieldErrors)
       {
         StrutsUtils.showValidationErrors(form, errorsObject);
       }
       else
       {
         //good to go, regular submit
         form.submit();
       }
    }

       /*  This is one of the functions that doesn't work using the simple theme, so I redefined it.
        This can be changed to clear the previous errors, as it does in the commented example
        cleaning the errors on divErrors.
        As I am just showing the messages with alerts I don't need to clear anything,
        but the method still need to be redefined, even if it is empty.
     */

   StrutsUtils.clearValidationErrors = function(form, errors) {
        //clear the div errors
        //$('#divErrors').empty();
    }

    /* This method is responsible to show the messages.
       The original versions works with the xhrml and css-xhtml theme but doesn't work with the simple theme
       so I override the method with another implementation that shows the messages using alerts.
       You can change the implementation to show the messages as you want,
       but as the previous method this has to be redefined.
     */

    StrutsUtils.showValidationErrors = function(form, errors) {

        if(errors.fieldErrors)
        {alert((errors.fieldErrors))
             for(var fieldName in errors.fieldErrors)
             { 
                 alert("errors.fieldErrors[fieldName]   " + errors.fieldErrors[fieldName]);

               for(var i = 0; i < errors.fieldErrors[fieldName].length; i++)
               {
                   alert('Field ->' + fieldName + '\nError -> ' + errors.fieldErrors[fieldName][i]);
               }
             }
        }
    }; 
```

* * *

但是当我执行代码时，我没有在警报消息框中显示有组织的 JSON 文本，字段名称与错误消息中的不同，第二个字段名称丢失，第三个字段名称被剪切（即 carrierNo 变为 rNo ）。

**你能帮助我吗。我希望 JSON 错误中的字段名称与错误消息文本匹配**

***我只是想出了问题所在，但我不知道它为什么会发生以及为什么会发生。它总是删除前 6 个字符。为什么会这样***

![在此处输入图像描述](../Images/2ff325c60cfabddb9063481db8c0c04a.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:43:24.957

好吧，我发现了问题。这是一个但在 org.apache.struts2.interceptor.validation.JSONValidationInterceptor

由于这个不完整的 if 语句，它删除了前 6 个字符

```
sb.append((validationAware instanceof ModelDriven) ? ((String)fieldError.getKey()).substring(6) : (String)fieldError.getKey()); 
```

此错误在 struts 2.1.8 中存在

应该是这样的

```
sb.append(((validationAware instanceof ModelDriven)) && (fieldErrorKey.startsWith("model.")) ? fieldErrorKey.substring(6) : fieldErrorKey); 
```

它在后来的 struts 版本中得到了纠正。我纠正了这个问题。我认为我必须为面临问题的人分享信息。

# java - 使用 ArrayDeque 实现缓存

> ID：13234362
> 
> 赞同：1
> 
> 时间：2012-11-05T14:41:46.907
> 
> 标签：java, generics

**介绍**

我使用`ArrayDeque`以下 `Generics`解决方案实现了一个带有 LRU 策略的简单缓存：

```
public class Cache<T> extends ArrayDeque<T> implements Serializable {
    private static final long serialVersionUID = 1L;
    private int MAX_SIZE;

    public Cache(int maxSize) {
        MAX_SIZE = maxSize;
    }

    public void store(T e) {
        if (super.size() >= MAX_SIZE) {                 
            this.pollLast();
        }
        this.addFirst(e);       
    }

    public T fetch(T e) {
        Iterator<T> it = this.iterator();
        while (it.hasNext()) {
            T current = it.next();
            if (current.equals(e)) {
                this.remove(current);
                this.addFirst(current);
                return current;
            }
        }
        return null;
    }

} 
```

* * *

**问题**

当我实例化类并推送一个元素时，

```
Cache<CachedClass> cache = new Cache<CachedClass>(10);
cache.store(new CachedClass()); 
```

此时队列不包含任何内容。

为什么会这样？

* * *

**观察**

顺便说一句，`CachedClass`覆盖了方法`.equals()`。

* * *

**测试**

```
 public class CacheTest {

    @Test
    public void testStore() {
        Cache<Integer> cache = new Cache<Integer>(3);

        cache.store(1);
        assertTrue(cache.contains(1));

        cache.store(2);
        cache.store(3);
        cache.store(4);

        assertEquals(cache.size(), 3);      
    }

    @Test
    public void testFetch() {
        Cache<Context> cache = new Cache<Context>(2);

        Context c1 = new Context(1);
        Context c2 = new Context(2);

        cache.store(c1);
        cache.store(c2);                

        assertEquals((Context) cache.peekFirst(), (new Context(2)));

        Context c = cache.fetch(c1);

        assertTrue(c == c1);        
        assertEquals(cache.size(), 2);
        assertEquals((Context) cache.peekFirst(), (new Context(1)));

    }

 } 
```

**编辑**它成功通过了两个测试。

> 它通过了第一次测试。它失败`AssertException`了
> 
> ```
> assertTrue(cache.peekFirst() == 1); 
> ```
> 
> 第二次测试，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:23:59.033

LinkedHashMap 的 Javadoc 说

> “这种地图非常适合构建 LRU 缓存。”

你真的需要一个很好的理由来忽略这一点。我的猜测是，puts 的实现和使用 Map 的 get 实现之间的性能将无法区分——但是，嘿，你为什么不运行自己的基准测试。

最后，您的实现（以及 LinkedHashMap 提供的实现）不是线程安全的。如果这对您来说是个问题，同步逻辑将增加性能开销。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:51:22.907

我在主要方法中这样做：

```
 Cache<Integer> cache = new Cache<Integer>(10);
    cache.store(new Integer(0)); 
    System.out.println(cache.size()); // prints 1
    Integer foo = cache.fetch(new Integer(0));
    System.out.println(foo == null); // prints false 
```

它打印 1，所以你的`Cache`. 工作正常。

为了获取您的`CachedClass`muss override `equals()`。您的代码无需更改即可按预期完美运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:27:19.583

我使用 LinkedHashMap 作为 LRU 缓存。

```
public static <K,V> Map<K,V> lruCache(final int maxSize) {
    return new LinkedHashMap<K,V>(maxSize*4/3, 0.75f, true) {
        @Override
        protected boolean removeEldestEntry(Map.Entry<K,V> eldest) {
            return size() > maxSize;
        }
    };
} 
```

一个重要的区别是键与值相关联。如果您将缓存作为一组实现，您所能做的就是确认您已经拥有的对象是否在缓存中，恕我直言，这不是很有用。

测试

```
@Test
public void testStore() {
    Map<Integer, String> cache = lruCache(3);
    cache.put(1, "one");
    assertEquals("one", cache.get(1));

    cache.put(2, "two");
    cache.put(3, "three");
    cache.put(4, "four");

    assertEquals(cache.size(), 3);
    assertEquals(null, cache.get(1));
}

@Test
public void testFetch() {
    Map<Integer, String> cache = lruCache(3);

    cache.put(1, "one");
    cache.put(2, "two");

    assertEquals((Integer) 1, cache.keySet().iterator().next());

    String s = cache.get(1);

    assertEquals("one", s);
    assertEquals(cache.size(), 2);
    assertEquals((Integer) 2, cache.keySet().iterator().next());
} 
```

# facebook - 获取 FQL/Graph API 的 Facebook 用户 access_token

> ID：13234368
> 
> 赞同：0
> 
> 时间：2012-11-05T14:41:59.917
> 
> 标签：facebook, api, facebook-graph-api, facebook-fql, facebook-access-token

我目前正在尝试让用户 access_token 向 Facebook Graph API 提交 FQL 查询。最终目标是从 FB 页面获取最新状态。

我通过点击以下 URL 获得了应用程序 access_token：

```
https://graph.facebook.com/oauth/access_token?client_id=[CLIENT_ID]&client_secret=[CLIENT_SECRET]&grant_type=client_credentials 
```

当我`(SELECT status_id, message, time FROM status WHERE uid="[PAGE_ID]")`使用 Graph API 资源管理器工具编写 FQL 查询时，由于资源管理器默认使用我的 User access_token，因此它可以正常工作。在 FB 调试器工具中调试此 access_token 可验证它是否同时使用了我的 app_id 和我的 user_id。当我使用应用程序 access_token 发出请求 (to `https://graph.facebook.com/fql?q=[QUERY ABOVE]&access_token=[APP_TOKEN]`) 时，我收到以下错误：

`{"error":{"message":"A user access token is required to request this resource.","type":"OAuthException","code":102}}`

有没有使用 FB API 访问用户 access_token 的方法？

谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:27:57.557

更改您的 FQL 查询，您应该能够得到您想要的。查询`status`需要用户访问令牌，但`stream`可以使用应用访问令牌来查询公共页面。将`type = 46`结果限制为状态更新。

```
SELECT post_id, message, created_time FROM stream WHERE source_id = [PAGE_ID] 
  AND type = 46 
```

# c++ - 使用模板类继承 C++ 错误

> ID：13234370
> 
> 赞同：0
> 
> 时间：2012-11-05T14:42:13.863
> 
> 标签：c++, templates, inheritance

我是 C++ 的新手。我收到一个错误“无法解析符号'列表'”我正在处理 eclipse 我无法弄清楚问题是什么......

List.h 这里是父类的声明，它是一个泛型类，Vector 将继承它

```
#ifndef LIST_H_
#define LIST_H_

template <class E> class List {
protected:
    int size;

public:
    virtual ~List();
    virtual void add(E o) = 0;
    virtual E get(int index) = 0;
    int getSize();
};

template <class E> List<E>::~List() {
}

template <class E> int List<E>::getSize() {
    return size;
}

#endif /* LIST_H_ */ 
```

Vector.h Vector头文件，继承自List，会实现List的纯虚方法，当我从List继承时报错，Vector的类声明中“无法解析符号'List'”

```
#include "List.h"
template <class E> class Vector: public List<E>{
private:
    class Node {
    public:
        E value;
        Node* next;
        Node(E value): value(value), next(0) {}
    };

    typedef Node* PNode;
    PNode first;

public:
    Vector();
    virtual ~Vector();
    void add(E o);
    E get(int index);
    virtual void add(E o);
    virtual E get(int index);
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:55:15.043

`virtual`说明符不是重载决议的一部分。您不能使用它们来区分函数签名，因此会出现错误：“不能重载”。

例如：

```
void add(E o); 
```

和

```
virtual void add(E o); 
```

两者都有相同的签名`Vector::*(int)`。它们不是两个不同的重载。

无论你想做什么，我建议退后一步，先尝试正确理解基本概念。它会给你带来很多痛苦。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:04:57.363

在谷歌上快速搜索**无法解析符号“列表”**不是编译错误，它是（愚蠢的）日食试图为您重建交叉引用。尝试菜单命令 Index->​​Rebuild。

# jquery - jQuery 1.3 中的 post() 将对象作为 [object Object] 传输

> ID：13234376
> 
> 赞同：1
> 
> 时间：2012-11-05T14:42:47.003
> 
> 标签：jquery, jquery-1.3

我有以下代码

```
// data is some object
var data = {
    getBlocks:{}
};

data['foo'] = 'bar';

jQuery.post(
    'http://example.com/foo.php',
    data,
    function (response) {
         ....
    },
    'json'
); 
```

在服务器端，数据显示为“[object Object]”。在最近的 PHP 版本中，它运行良好。

不幸的是，由于大量遗留的 JQuery 代码，目前无法选择升级。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:59:22.757

用于`JSON.stringify()`将对象转换为 JSON：

```
jQuery.post(
    'http://example.com/foo.php',
    JSON.stringify(data),
    function (response) {
         ....
    },
    'json'
); 
```

根据您可能需要添加[JSON](https://github.com/douglascrockford/JSON-js)函数的浏览器之一（请参阅 json2.js）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T16:24:05.733

如果不更改服务器端代码，JSON 编码将不起作用。

一个解决方案是从 Jquery 1.6.2 向后移植所需的功能

```
function jQuery16buildParams( prefix, obj, traditional, add ) {
    if ( jQuery.isArray( obj ) ) {
        // Serialize array item.
        jQuery.each( obj, function( i, v ) {
            if ( traditional || rbracket.test( prefix ) ) {
                // Treat each array item as a scalar.
                add( prefix, v );

            } else {
                // If array item is non-scalar (array or object), encode its
                // numeric index to resolve deserialization ambiguity issues.
                // Note that rack (as of 1.0.0) can't currently deserialize
                // nested arrays properly, and attempting to do so may cause
                // a server error. Possible fixes are to modify rack's
                // deserialization algorithm or to provide an option or flag
                // to force array serialization to be shallow.
                jQuery16buildParams( prefix + "[" + ( typeof v === "object" || jQuery.isArray(v) ? i : "" ) + "]", v, traditional, add );
            }
        });

    } else if ( !traditional && obj != null && typeof obj === "object" ) {
        // Serialize object item.
        for ( var name in obj ) {
            jQuery16buildParams( prefix + "[" + name + "]", obj[ name ], traditional, add );
        }

    } else {
        // Serialize scalar item.
        add( prefix, obj );
    }
}

var r20 = /%20/g;

function jQuery16param( a, traditional ) {
    var s = [],
        add = function( key, value ) {
            // If value is a function, invoke it and return its value
            value = jQuery.isFunction( value ) ? value() : value;
            s[ s.length ] = encodeURIComponent( key ) + "=" + encodeURIComponent( value );
        };

    // Set traditional to true for jQuery <= 1.3.2 behavior.
    if ( traditional === undefined ) {
        traditional = jQuery.ajaxSettings.traditional;
    }

    // If an array was passed in, assume that it is an array of form elements.
    if ( jQuery.isArray( a ) || ( a.jquery && !jQuery.isPlainObject( a ) ) ) {
        // Serialize the form elements
        jQuery.each( a, function() {
            add( this.name, this.value );
        });

    } else {
        // If traditional, encode the "old" way (the way 1.3.2 or older
        // did it), otherwise encode params recursively.
        for ( var prefix in a ) {
            jQuery16buildParams( prefix, a[ prefix ], traditional, add );
        }
    }

    // Return the resulting serialization
    return s.join( "&" ).replace( r20, "+" );
} 
```

在帖子之前：

```
data = jQuery16param(data); 
```

# ruby - 覆盖子类中的 ruby 常量，以便继承的方法使用新常量而不是旧常量？

> ID：13234384
> 
> 赞同：52
> 
> 时间：2012-11-05T14:43:04.297
> 
> 标签：ruby

在 Ruby 中，有没有办法“覆盖”子类中的常量，使得从子类调用继承的方法会导致该方法使用新常量而不是旧常量？例如：

```
class SuperClass
  CONST = "Hello, world!"
  def self.say_hello
    CONST
  end
end

class SubClass < SuperClass
  override_const :CONST, "Hello, Bob!"
end

SuperClass.say_hello # => "Hello, world!"
SubClass.say_hello   # => "Hello, Bob!" 
```

如果没有，是否有办法做这样的事情呢？

```
class SuperClass
  CONST = "Hello, world!"
  def self.say_hello
    CONST
  end
end

SubClass = SuperClass.clone
SubClass.send(:remove_const, :CONST)
SubClass.const_set(:CONST, "Hello, Bob!")

SubClass.say_hello # => "Hello, Bob!" 
```

* * *

注意：我在 irb 中尝试了我的第二个示例，它似乎可以工作，只是在我克隆类后类方法似乎无法访问 CONST：

```
irb(main):012:0> SubClass.say_hello
NameError: uninitialized constant Class::CONST
        from (irb):4:in `say_hello'
        from (irb):12
        from C:/Ruby193/bin/irb:12:in `<main>' 
```

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-11-05T14:50:00.160

我通过简单地重新定义子类中的常量，然后`self.class::CONST`在实例方法和`self::CONST`类方法中的方法中引用它来完成此操作。在您的示例中：

```
class SuperClass
  CONST = "Hello, world!"
  def self.say_hello
    self::CONST
  end
end

class SubClass < SuperClass
  CONST = "Hello, Bob!"
end

SubClass.say_hello #=> "Hello, Bob!" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2018-06-18T17:36:24.010

您可以在父类中引用这样的常量：

对于实例方法：`self.class::CONST`

对于 self 方法：`self::CONST`

```
class SuperClass
  CONST = "Hello, world!"
  def print_const
    puts self.class::CONST
  end

  def self.print_const
    puts self::CONST
  end

end

class SubClass < SuperClass
  CONST = "Hello, Bob!"
end

SubClass.new.print_const #=> "Hello, Bob!"
SubClass.print_const #=> "Hello, Bob!" 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-01-08T16:19:17.720

如果您有幸能够更改基类，请考虑将需要更改的“常量”包装在基类中的类方法中，并根据需要在子类中覆盖它们。这消除了父类和子类常量之间混淆的可能性。例如，这将如下所示：

```
class SuperClass
  CONST = "Hello, world!".freeze

  def self.const
    CONST
  end

  def self.say_hello
    const
  end
end

class SubClass < SuperClass
  CONST = "Hello, Bob!".freeze

  def self.const
    CONST
  end
end

SubClass.say_hello #=> "Hello, Bob! 
```

# java - 在 Mac 上部署 Java 7 应用程序

> ID：13234385
> 
> 赞同：2
> 
> 时间：2012-11-05T14:43:05.860
> 
> 标签：java, macos, java-7

我需要一些指向相关信息的指针。

我正在尝试生成一个包含 Java 程序的 Mac 应用程序包。对于 Java 6，这相当容易。

但据我所知，Java 不再包含在 OS X 中，特别是不能保证 Java 7 安装在用户的 Mac 计算机上。

谷歌搜索只会带来混乱。有数百个网页告诉您如何在 Mac 上部署 Java，还有很多工具可以帮助您生成应用程序包。问题是其中大部分是为创建使用 Java 6 的应用程序而编写的。我还没有找到可以与 Java 7 一起使用的相关信息。

所以，

*   在哪里可以找到有关如何在 Mac 上部署 Java 7 应用程序的信息？
*   是否可以在应用程序包中包含 Java 7 VM，或者用户必须单独下载和安装它？

# jquery - 使用延迟与 jquery ajax 调用和异步进程以及用户确认读取之间

> ID：13234386
> 
> 赞同：0
> 
> 时间：2012-11-05T14:43:07.977
> 
> 标签：jquery, asynchronous, jquery-deferred, decoupling

**背景**
这是我的问题的延续[设置一系列同步/异步函数的正确方法，所有这些函数都可以停止表单提交和进一步处理？](https://stackoverflow.com/questions/10717982/correct-way-to-set-up-a-sequence-of-synchronous-asynchronous-functions-all-of-wh)

我得到了正确方法（延迟管道）的答案，但我仍然无法实际实现这一点。我今天才开始阅读 jquery deferred API，但我还不能掌握太多。jQuery API 文档似乎太复杂了，几乎没有例子。任何人都可以提供一些关于此的基本演示/教程的链接吗？我需要在这里启动。

**详细信息**
我在这个项目中使用了 jquery 1.6 版。

考虑这个例子 - 当用户点击表单提交按钮 -
1\. 运行 validateInventory()。
一种。如果验证失败，则向用户显示确认对话框，如果用户同意（转到步骤 2）
或
b。如果验证通过（转到步骤 2）
2\. 运行 preValidateUrls()。
一种。如果验证失败，则向用户显示确认对话框，如果用户同意（转到步骤 3）
或
b。如果验证通过（转到第 3 步）
3\. 提交表单。

以下是我拥有的异步函数的结构 -

*请注意，此函数内部还有一个 if(confirm) 块。阅读我的问题 2*。

```
 function validateInventory()
    {
         $.ajax({
           type: "POST",
           url: posturl+"?"+params,
           dataType: "json",
           success: function(res)
               { 
                     if(!res.success)
                     {
                          //display some confirmation dialog, if user agrees con
                          if(confirm(msg)) 
                          {
                                //continue with next validation step 
                          }
                     }  
                     else
                     {
                          //validation success - so continue with next validation step
                     }  
                }
            });
    }

    //similar logic as inside validateInventory()
    function preValidateUrls()
    {

    } 
```

我可能在验证逻辑中也有一些同步验证功能（仅限客户端逻辑），在序列中的任何位置 -

```
function syncVal()
{
    return true/false
} 
```

**Question 1** Should the syntax for putting such functions also be similar to the asynchronous functions?

**Question 2** How do I handle the display of showing confirmation dialog (if validation fails) and proceed to next validation step only if user confirms. Should there be some restructuring of the function? The `if(confirm)` block needs to be moved outside?

**Where I have reached so far**

Well nothing much, I guess I need to use `.when`, `.done` APIs.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-21T14:54:44.747

If I understand Steps 1,2,3 correctly, then the logic you want can be coded something like this :

```
$(function() {
    function validateInventory(form) {//`form` is passed conventionally at the left hand end of the pipe chain.
        var dfrd = $.Deferred();//A Deferred object to be resolved/rejected in response to ajax success/error.
        var params = .....;//use values from `form` as required
        $.ajax({
            type: "POST",
            url: posturl + "?" + params,
            dataType: "json"
        }).done(function(res) {//ajax success
            if(res.success || confirm(msg1)) { dfrd.resolve(form); }//Here we resolve dfrd, passing `form` in order to make `form` available to the next function in the pipe chain.
            else { dfrd.reject("validateInventory() failed (not verified)"); }//Application error. By rejecting with a specific message, we have the means of knowing where the failure occurred.
        }).fail(function(jqXHR, textStatus, errorThrown) {//ajax error
            dfrd.reject("validateInventory() failed (textStatus)");//Again, a specific message.
        });
        return dfrd;
    }

    //Similar logic as inside validateInventory()
    function preValidateUrls(form) {//The form, is piped through by the statement `dfrd.resolve(form);` in validateInventory
        var dfrd = $.Deferred();
        var params = .....;
        $.ajax({
            type: "POST",
            url: posturl + "?" + params,
            dataType: "json"
        }).done(function(res) {
            if(res.success || confirm(msg2)) { dfrd.resolve(form); }
            else { dfrd.reject("preValidateUrls() failed (not verified)"); }
        }).fail(function(jqXHR, textStatus, errorThrown) {
            dfrd.reject("preValidateUrls() failed (textStatus)");
        });
        return dfrd;
    }

    //This is the function to be called if the various stages of validation were successful.
    function overallSuccess(form) {
        form.submit(); 
    }

    //This is a common error handler, which will be called if either of the validation stages fail.
    function errorHandler(message) {
        alert(message);//or whatever
    }

    var myForm = $("form").get(0);//for example

    //And now the glue that puts the component parts together.
    validateInventory(myForm).pipe(preValidateUrls, errorHandler).pipe(overallSuccess, errorHandler);
}); 
```

*untested*

For explanation, see comments in code.

The whole thing can be factored any number of different ways. I would choose to code it as above because the component parts are separate and clear, and the "glue" statement (the pipe chain) is very concise and easy to extend to accommodate further validation steps. With other approaches, you tend to get deep nesting of functions which is hard to follow, especially for someone who has to maintain the code in the future.

# javascript - Phantom.js 坚持选择下一个元素

> ID：13234387
> 
> 赞同：2
> 
> 时间：2012-11-05T14:43:09.410
> 
> 标签：javascript, automation, phantomjs

我正在尝试使用 Phantom.JS 在此页面上进行一些页面自动化：[https ://reserve.apple.com/GB/en_GB/reserve/iPhone](https://reserve.apple.com/GB/en_GB/reserve/iPhone)

我知道如何使用`document.getElementById('store') = "R363"`来选择第一个选项。但似乎在我选择了第一个选项之后，原始页面的 DOM 元素会改变，我不知道如何使用 Phantom.JS 来实现

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-16T09:51:00.900

而不是像这样使用`document.getElementById('store') = "R363"`尝试使用jQuery：

```
var page = require('webpage').create(); 
// open the page
page.open('https://reserve.apple.com/GB/en_GB/reserve/iPhone', function() {
    //inject jQuery
    page.includeJs("http://ajax.googleapis.com/ajax/libs/jquery/1.6.1/jquery.min.js", function() {
        // run the following code in the context of the page
        page.evaluate(function() {
            // change the value of the combobox
            $("#store").val( newval );

            // do stuff in the page
        });
        phantom.exit()
    });
}); 
```

# maven - 在本地 repo 中安装插件后找不到插件

> ID：13234391
> 
> 赞同：0
> 
> 时间：2012-11-05T14:43:16.417
> 
> 标签：maven, nexus

我编写了一个插件并将其安装在本地存储库中，我运行以下命令：

```
mvn install 
```

该插件已成功添加到我的本地 Maven 存储库，但是当我运行时：

```
com.tools:generate:0.0.1-SNAPSHOT:generatepom 
```

我收到错误：

> 无法解析插件 com.tools:generate:0.0.1-SNAPSHOT 或其依赖项之一：无法读取 com.tools:generate:jar:0.0.1-SNAPSHOT 的工件描述符：找不到 com.tools:generate [https://nexus.mydomain.com:8181/prod/content/groups/level0/](https://nexus.mydomain.com:8181/prod/content/groups/level0/)中的:pom:0.0.1-SNAPSHOT 已缓存在本地存储库中，直到 nexuspro-level0 的更新间隔有后才会重新尝试解析已过或强制更新 -> [帮助 1]

即使插件是在本地安装的，它似乎也在 Nexus 上搜索插件。如何配置 maven 以在本地存储库中运行插件？

这是 pom.xml 的构建和开头：

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <groupId>com.tools</groupId>
    <artifactId>generate</artifactId>
    <packaging>maven-plugin</packaging>
    <version>0.0.1-SNAPSHOT</version>

    <build>
        <plugins>
            <plugin>
                <groupId>com.tools</groupId>
                <artifactId>generate</artifactId>
                <version>0.0.1-SNAPSHOT</version>
                <configuration>
                    <repositoryUri>http://repository.sonatype.org/service/local/lucene/search?sha1=</repositoryUri>                 
                </configuration>
            </plugin>
        </plugins>
    </build> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:46:39.200

很可能您的插件的 pom 包含不同的标识（groupId、artifactId、version）。

另外，请确保您在那里指定了 maven-plugin。

如果不是这样，请提供插件的 pom 摘录，或其构建日志摘录（“正在安装...”部分）。

[您可以在此处](http://maven.apache.org/plugin-developers/index.html)阅读有关开发插件的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T23:09:41.880

我建议改变您的方法并将插件部署到远程存储库。

如果不希望这样做，它应该可以正常工作。您的 Maven 存储库元数据可能会遇到问题。我会尝试运行

```
mvn -U com.tools:generate:0.0.1-SNAPSHOT:generatepom 
```

强制更新作为下一步。

# sharepoint - SharePoint 和数据库设计

> ID：13234393
> 
> 赞同：1
> 
> 时间：2012-11-05T14:43:25.890
> 
> 标签：sharepoint

我对SharePoint不太了解，所以希望有人能给我一些好的解释。

1.  对于 SharePoint 应用程序，我们不需要考虑 SharePoint DB 设计吗？一切都是通过 List 完成的，SharePoint 会处理数据库吗？除非我们连接到外部数据库，否则根本不需要考虑它？

2.  对于父子关系，我必须使用**查找**字段吗？

3.  如果我们使用 Web 部件进行开发，我们需要使用 Features 来部署它。那么最终，生产中可以有这么多功能吗？是否推荐这种方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T15:20:38.927

> 1)
> 
> 对于 SharePoint 应用程序，我们不需要考虑 SharePoint DB 设计吗？一切都通过 List 完成，SharePoint 将负责数据库？除非我们连接到外部数据库，否则根本不需要考虑它？

您确实需要考虑数据库......在管理方面。备份、恢复、大小等。但是，您永远不会直接读取或写入它。您不需要关注架构，因为您永远不会直接使用它。如果您想更新 SharePoint 中的某些内容，您可以使用 SharePoint API 使用 c#/vb.net 务实地进行。您有 2 个 API，一个在称为 SharePoint 对象模型的服务器上运行，一个在称为客户端对象模型的远程计算机上运行。从用户的角度来看，您是正确的列表，其中包含 SharePoint 中的数据，并且在某些方面对 DB 表更友好。

> 2)
> 
> 对于父子关系，我必须使用查找字段吗？

叶

> 3)
> 
> 如果我们使用 Web 部件进行开发，我们需要使用 Features 来部署它。那么最终，生产中可以有这么多功能吗？是否推荐这种方式？

如果您为每个 Web 部件创建一个新的解决方案，但您可以将多个 Web 部件捆绑在同一解决方案中的同一项目中的同一功能中，则可能会发生这种情况 右键单击​​您的项目 --> 添加新项目。选择一个 Web 部件。默认情况下，Web 部件都属于同一功能，但如果您愿意，您可以将它们分开并在同一解决方案中拥有多个功能

# c# - 获取 HTML 元素的值

> ID：13234394
> 
> 赞同：6
> 
> 时间：2012-11-05T14:43:27.423
> 
> 标签：c#, regex

我在文本文件中有网页的 HTML 代码。我希望我的程序返回标签中的值。例如，我想让“朱利叶斯”离开

```
<span class="hidden first">Julius</span> 
```

我需要正则表达式吗？否则什么是可以做到的字符串函数？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-05T14:47:54.017

您应该使用像[htmlagilitypack](http://htmlagilitypack.codeplex.com/)这样的 html 解析器。Regex不是解析 HTML 文件的好选择，因为 HTML 并不严格，其格式也不规则。

您可以使用下面的代码来检索它`HtmlAgilityPack`

```
HtmlDocument doc = new HtmlDocument();
doc.Load(yourStream);

var itemList = doc.DocumentNode.SelectNodes("//span[@class='hidden first']")//this xpath selects all span tag having its class as hidden first
                  .Select(p => p.InnerText)
                  .ToList();

//itemList now contain all the span tags content having its class as hidden first 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-05T14:45:30.830

我会使用[Html Agility Pack](http://html-agility-pack.net/?z=codeplex)来解析 C# 中的 HTML。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T14:45:40.480

我强烈建议您查看[HTML Agility Pack之类的东西](http://html-agility-pack.net)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T16:49:00.033

几天前我问过同样的问题并最终使用了 HTML Agility Pack，但这是你想要的正则表达式

这个会忽略属性

```
<span[^>]*>(.*?)</span> 
```

这个会考虑属性

```
<span class="hidden first"[^>]*>(.*?)</span> 
```

# java - 惰性初始化一个被另一个惰性初始化 bean 引用的 bean

> ID：13234399
> 
> 赞同：1
> 
> 时间：2012-11-05T14:43:49.180
> 
> 标签：java, spring, lazy-initialization

我有一个延迟初始化的 bean，并且有几个参数和属性要设置。

```
 <bean id="abc" class="a.b.c.abc" lazy-init="true">
        <constructor-arg ref="qwert" />
        <property name="aImplementations">
            <list>
                <ref bean="newBean" />
            </list>
        </property>
    </bean> 
```

而`newBean`定义为`<bean id="newBean" class="a.b.c.newBean" lazy-init="true" init-method="init" />`

但是惰性 bean 被初始化并调用 init() 方法。

如果我删除 bean`'abc'`并只保留`newBean`，则不会调用 newBean 类的 init() 方法。

可能是什么原因？我在谷歌上搜索但没有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:47:07.070

只有当一个 bean 没有被任何其他 bean 引用或者它已经被另一个惰性初始化 bean 引用时，它才会被惰性初始化。你的 bean 'abc' 是非惰性的，在构造这个 bean 时，它必须将 newBean 插入 abc。

# ruby-on-rails - 手动创建视图时“缺少模板”

> ID：13234407
> 
> 赞同：2
> 
> 时间：2012-11-05T14:44:05.910
> 
> 标签：ruby-on-rails, view, routing

我在 controllers/admin/orders.rb 中创建控制器

```
def index
    @pre_orders = Order.all
    @orders = Kaminari.paginate_array(@pre_orders).page(params[:page]).per(20)

  end 
```

我有这样的路线：

```
namespace :admin do
    # Directs /admin/products/* to Admin::ProductsController
    # (app/controllers/admin/products_controller.rb)
    resources :orders
  end 
```

并在views/admin/orders/index.html.haml中查看

但是当我去 ....3000/admin/orders 我得到模板丢失

```
Missing template admin/orders/index, application/index with {:locale=>[:en], :formats=>[:html], :handlers=>[:erb, :builder, :coffee, :haml]}. Searched in: * "/*******/app/views" * "/home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/kaminari-0.14.1/app/views" * "/home/pavel/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.1.2/app/views" 
```

# c# - WPF 组合框数据绑定

> ID：13234411
> 
> 赞同：0
> 
> 时间：2012-11-05T14:44:15.697
> 
> 标签：c#, wpf

我有两个组合框。第一个组合框用于选择经理，第二个组合框用于选择助理。经理。但是，两个组合框中的源名称相同。因此，例如，如果我从第一个组合框中选择“James”，那么我不会从第二个组合框中选择它。当我在第二个组合框中单击“James”时，它应该给我一个错误，并且不能选择“JAmes”。

我将该代码写入第二个组合框的 selection_changed 事件：

```
if (Manager.SelectedItem == Asst_MAnager.SelectedItem)
{
    MessageBox.Show("You must change Asst_Manager");
} 
```

没错，如果我选择相同的项目，那么它会给我错误消息。但是，它仍然在错误消息后选择相同的项目。我的 WPF 代码如下。你能给我任何想法吗？

```
<local:ComboBoxCW Grid.Row="1" Grid.Column="1" Grid.ColumnSpan="3" x:Name="Manager" Text="" Background="#FFC8D2E8"  Margin="0,0,0,3"
            SelectedID="{Binding Path=[Manager}"  />
<local:ComboBoxCW Grid.Row="2" Grid.Column="1" Grid.ColumnSpan="3" x:Name="Asst_Manager" Text="" Background="#FFC8D2E8" CWListName="Assistant Manager" Margin="0,0,0,3"
            SelectedID="{Binding Path=[Asst_Manager]}" SelectionChanged="Asst_Manager_SelectionChanged" /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:59:00.403

由于您的组合框是数据绑定的，因此您不能将 SelectedIndex 设置为 -1（通常应该取消选择您所做的任何选择），并且看起来像这样：

```
if (Manager.SelectedItem == Asst_MAnager.SelectedItem)
{
    MessageBox.Show("You must change Asst_Manager");
    Asst_Manager.SelectedIndex = -1;
} 
```

因此，我建议在每个框中的第一项中为“选择名称”。这样你就可以做到：

```
if (Manager.SelectedItem == Asst_MAnager.SelectedItem)
{
    MessageBox.Show("You must change Asst_Manager");
    Asst_Manager.SelectedIndex = 0;
} 
```

或类似的东西。这并不漂亮，而且到目前为止也不是最好的方法。但这很简单，并且可以完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:00:22.047

我只会使用 LINQ 在 Asst_Manager 列表上进行过滤，甚至在 asst mgr 列表中都没有经理名称。在从第一个列表中选择一个项目之前，我不会激活第二个列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:57:52.500

您是否尝试过使用验证规则？您可以使用从 ValidationRule 继承的类并在选择值之前检查那里的值。

[在这里](http://www.codeproject.com/Articles/15239/Validation-in-Windows-Presentation-Foundation)，您有一篇解释此主题的文章。希望能帮助到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T15:03:58.910

您可以使用选择更改的事件，例如

```
 private void comboBox1_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        string s = string.Empty;
        string s1 =string.Empty;
        if (comboBox2.SelectedItem != null)
        {
            s1 = comboBox2.SelectedItem.ToString();
        }
        if (comboBox1.SelectedItem != null)
        {
            s = comboBox1.SelectedItem.ToString();
        }
        if (s == s1)
        {
            MessageBox.Show("You have Selected These Item As Second Combobox");
            comboBox1.SelectedItem = null;
        }
    }

    private void comboBox2_SelectionChanged(object sender, SelectionChangedEventArgs e)
    {
        string s=string.Empty;
        string s1 = string.Empty;
        if (comboBox1.SelectedItem != null)
        {
            s = comboBox1.SelectedItem.ToString();
        }
        if (comboBox2.SelectedItem != null)
        {
            s1 = comboBox2.SelectedItem.ToString();
        }
        if (s == s1)
        {
            MessageBox.Show("You have Selected These Item As First Combobox");
            comboBox2.SelectedItem = null;
        }
    } 
```

# css - 你如何从命令行使用 csslint？

> ID：13234414
> 
> 赞同：7
> 
> 时间：2012-11-05T14:44:22.477
> 
> 标签：css, bash, ubuntu, continuous-integration, csslint

我是 Ubuntu 的新手，我将是第一个承认这一点的人，但我需要集成`csslint`到 CI 构建脚本中，我发现`csslint`网站上的 about 页面没有帮助。它给了我两个安装选项，`csslint`但它们需要`node`or `rhino`：

```
Node.js:
sudo npm install -g csslint

Rhino.js:
java -jar rhino.jar csslint-rhino.js --rules= ~ /* suppressed for simplicity */ 
```

在以我知道如何使用的格式搜索其中任何一个之后，在谷歌群组上，我发现有人问了类似的问题。答案是，这`rhino`不是您安装和运行的现成产品，而是您使用的库。

我需要做的就是：

*   使用args`csslint`通过 bash传递 CSS 文件`csslint`
*   得到回复
*   评估构建是否因违规而失败

在任何地方我都可以找到包含依赖项的分步说明，例如`node`or `rhino`？

谢谢大家。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-27T23:32:01.230

> 自己找到了答案，并决定把它放在这里帮助别人。
> 
> sudo apt-get 安装 npm
> 
> sudo npm install -g csslint
> 
> csslint pathtofile.css
> 
> 有感情受伤。

# .net - 是否有任何 .NET 替代 timeBeginPeriod 和 timeEndPeriod 方法？

> ID：13234420
> 
> 赞同：2
> 
> 时间：2012-11-05T14:44:33.030
> 
> 标签：.net, serial-port, delphi-prism, oxygene, winmm

我一直在研究一个在 SerialPort 上进行通信的程序并且遇到了问题。它的通信率低于 50% 或更少。如果没有，它大部分时间都会超时。

通过对这个问题的研究，我发现默认情况下全局或系统计时器分辨率至少为 10 毫秒或更大。

[串行通信 (RTS) 和 Windows 7](https://stackoverflow.com/questions/6139026/serial-communication-rts-and-windows-7)

因此，如果您在通信中使用 Thread.Sleep 暂停 X 毫秒，它可以做的最好的事情是 10 毫秒或更长的无操作或暂停。

就我而言，这对于我的程序与外部设备通信来说太长了。设备收到我的程序的请求后会在 10 毫秒内回复。如果我的程序还没有准备好接收回复，那么我的程序将超时。

解决此问题的唯一方法是调整或更改系统计时器分辨率。为此，我被告知使用来自 winmm.dll 的 Windows 方法 timeBeginPeriod 和 timeEndPeriod。虽然我能够为我的程序的 Windows .NET 版本导入这些方法，但我想知道在 .NET 框架中是否有这些方法的替代品。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:17:27.670

如果您的目标是避免调用特定于平台的 DLL 函数并仅使用 .Net 框架，那么对于短暂的超时，使用 System.Diagnostics.Stopwatch 循环可能是您最好的选择。

秒表会在出现时自动使用高分辨率计时器。

```
public static void Pause(long ms) 
{
    Stopwatch t = new Stopwatch();
    t.Start();
    while(t.ElapsedMilliseconds < ms) { }
    t.Stop();
} 
```

这将在暂停循环中阻塞您的调用线程并占用 CPU，以减轻其中一些问题（如果您使用的是多核系统，您可以设置您的进程或线程与另一个核心的亲和性。[如何设置处理器亲和性。网？](https://stackoverflow.com/questions/2510593/how-can-i-set-processor-affinity-in-net)

# memory-management - mmap 是否连续分配堆内存？

> ID：13234425
> 
> 赞同：2
> 
> 时间：2012-11-05T14:44:51.260
> 
> 标签：memory-management, mmap

前提是：

*   我要求的大小是页面大小的倍数
*   我请求的起始地址是最后一次分配的大小+起始地址

如果我在使用 mmap 在堆上分配内存时总是遵循这些规则，那么返回的地址会是连续的吗？或者他们之间可能有差距？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:02:11.633

您可以使用 MAP_FIXED 标志获得所需的行为。不幸的是，对于您的目标，它并没有得到普遍支持，因此您需要检查返回值以确保它为您提供了您请求的分配。为了获得良好的可移植性，您需要在调用返回 0 时制定备份计划。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T22:34:35.650

快速回答：不一定。在各种机器上进行有限的广泛测试时，它很有可能“几乎总是有效”，但这绝对不是一个好的做法。大多数 Linux 版本都支持 MAP_FIXED 标志，但根据我的经验，它也有问题。避免。

在您的情况下，更好的是一次简单地分配您需要的所有内容，然后手动将指针分配给映射的每个子部分：

```
int LengthOf_FirstThing = 0x18000;
int LengthOf_SecondThing = 0x10100;
int LengthOf_ThirdThing = 0x20000;

int _pagesize = getpagesize();
int _pagemask = _pagesize - 1;

size_t sizeOfEverything = LengthOf_FirstThing + LengthOf_SecondThing + LengthOf_ThirdThing;
sizeOfEverything = (sizeOfEverything + _pagemask) & ~(_pagemask);

int8_t* result = (int8_t*)mmap(nullptr, sizeOfEverything, PROT_READ | PROT_WRITE, MAP_PRIVATE | MAP_ANONYMOUS, -1, 0);
int8_t* myFirstThing = result;
int8_t* mySecondThing = myFirstThing + LengthOf_FirstThing;
int8_t* myThirdThing = mySecondThing + LengthOf_SecondThing; 
```

这种方法的一个优点还在于，您映射的每一件事都不必与页面大小严格对齐。最重要的是，它确保了完全连续的内存。

更长的答案： mmap() 的实现可以完全无视“提示”地址，因此您永远不应该期望该地址得到尊重。这可能比预期的更常见，因为某些实现实际上可能不支持新 mmap() 的页面大小粒度。它们可能会将有效的起始映射限制为 16k 或 64k 边界，以帮助减少管理非常大的虚拟地址空间所需的开销。这样的实现将始终忽略未与此类边界对齐的 mmap() 提示。

此外， mmap() 根本不从堆中分配内存。堆是创建进程时由 C 运行时库（*nix 上的 glibc）创建/保留的内存区域。malloc() 和 new/delete 通常是从堆中提取的唯一函数，以及可能在内部使用 malloc/new 的任何库。堆本身通常由内部调用 mmap() 创建和管理。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T15:00:12.110

我认为这没有具体说明，而是所谓的“实施细节”。也就是说，您不应该依赖一种行为或另一种行为，而是假设指针是不透明的并且不关心它的确切值。

（也就是说，可能会有黑客攻击的地点和时间。在这种情况下，您需要准确了解您的操作系统的行为方式。）

# mysql - 导入mysql时出现utf8乱码

> ID：13234433
> 
> 赞同：28
> 
> 时间：2012-11-05T14:45:24.167
> 
> 标签：mysql, utf-8

将 UTF8 编码的数据导入 mysql 对我不起作用。UTF8 字符已损坏。例如**Nöthnagel**显示为**Nöthnagel**

我创建了一个 sql 转储文件来执行包含 UTF-8 编码数据的导入。例如：

```
INSERT INTO `users` VALUES(1, 'Fred','Nöthnagel'); 
```

**文件中表示ö**的字节序列是 c3 b6，我认为它是正确的，因为它在 vim 和我的 bash shell 中正确显示，其中设置了以下环境变量：

```
$ env | grep -i utf
LANG=en_US.UTF-8
XTERM_LOCALE=en_US.UTF-8 
```

mysql db的创建如下：

```
mysql> CREATE DATABASE mydb CHARACTER SET utf8; 
```

mysql 表是这样创建的：

```
CREATE TABLE `users` (  
    `id` int(11) NOT NULL AUTO_INCREMENT,  
    `first_name` varchar(30) NOT NULL,  
    `last_name` varchar(30) NOT NULL,
    PRIMARY KEY (`id`),  
    UNIQUE KEY `last_name` (`last_name`)  
) ENGINE=InnoDB AUTO_INCREMENT=2 DEFAULT CHARSET=utf8; 
```

我正在像这样导入转储文件：

```
 mysql -u root -psecret mydb < mydump.sql 
```

请告诉我上面缺少什么。

* * *

## 回答 #1

> 赞同：70
> 
> 时间：2012-11-05T14:54:41.457

我认为这也可能与排序规则有关，但我不确定。就我而言，确实如此，因为我必须支持西里尔字母。
试试这个，对我有用：

1.  在创建目标数据库时将初始排序规则设置为`utf8_general_ci`

2.  添加`SET NAMES 'utf8' COLLATE 'utf8_general_ci';`到你的 sql 文件的顶部

3.  跑`mysql -u root -p --default-character-set=utf8 yourDB < yourSQLfile.sql`

还有一件事，为了正确地从您的数据库中获取 UTF-8 数据，您还必须修改您的连接字符串。例如：

`mysql.url=jdbc:mysql://localhost:3306/nbs?useJvmCharsetConverters=false&useDynamicCharsetInfo=false&useUnicode=true&characterEncoding=UTF-8&characterSetResults=UTF-8&useEncoding=true`

另外，看看[我的问题](https://stackoverflow.com/questions/12425355/mysql-utf8-windows-export-linux-import)是什么。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2016-02-02T15:30:54.240

使用此命令将 utf8 表导入数据库：

```
mysql -u USERNAME  -pPASSWORD --default_character_set utf8  DATABASE < file.sql 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2012-11-05T15:18:25.760

通过在 sql 文件的顶部添加以下内容解决了该问题：

```
SET NAMES utf8; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T14:57:57.690

我有一个类似的问题。有许多变量应该是 UTF8，不仅是数据库，还包括客户端、连接、服务器等。

[本文](http://www.adviesenzo.nl/examples/php_mysql_charset_fix/)描述了您的问题的解决方案。所描述的解决方案是可移植的，因此它不仅适用于 utf8，而且适用于所有其他字符集。您可能需要对其进行修改以满足您的需要。

# wordpress - 禁用所有父 htaccess

> ID：13234434
> 
> 赞同：3
> 
> 时间：2012-11-05T14:45:28.207
> 
> 标签：wordpress, .htaccess, web-hosting

我在我的网站 public_html 的根目录中安装了 wordpress

尽管我在运行自己的网站的项目文件夹中还有其他文件夹。

wordpress 文件夹（最父文件夹）中的 .htaccess 可能会导致内部文件夹出现问题。

有没有办法，我可以提到一个文件夹不要看起来更高的 htaccess 文件？

细节：

我目前遇到的两个主要问题 - 如果我将状态代码设置为 500，我将被重定向到我的主页 (index.php) - 如果找不到页面，它将被重定向到 index.php

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:52:31.123

将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下（就在您的 wordpress 重写内容上方）：

```
RewriteRule ^subfolder(/.*|)$ - [L] 
```

# uitableview - UITableview单元格图像中的uiimageview中的UIButton没有改变

> ID：13234444
> 
> 赞同：0
> 
> 时间：2012-11-05T14:45:59.317
> 
> 标签：uitableview, uiimageview, uibutton

我有一个自定义的 uitableviewcell，当用户单击按钮时，我有一个带有按钮的图像视图，按钮应该显示一个刻度线！

![在此处输入图像描述](../Images/dcac0562346e039ad2aa781dd36895cb.png)

当用户单击该按钮时，它应该显示一个勾号，我尝试了一些东西。请帮助我

```
checkBoxButton.selected=!checkBoxButton.selected;

if(checkBoxButton.selected==1){
    [checkBoxButton setBackgroundImage:[UIImage imageNamed:@"checked.png"] forState:UIControlStateSelected];
}
else{
    [checkBoxButton setBackgroundImage:[UIImage imageNamed:@"unchecked.png"] forState:UIControlStateNormal];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-07T05:59:01.833

在您的按钮单击中尝试以下代码。这仅在您有单个复选框时才有效..

```
if ([self.checkBoxButton.currentTitle isEqualToString:@"uncheck"])  {

    NSLog(@"changing to checked");
    [self.checkBoxButton setTitle:@"check" forState:UIControlStateNormal];
    [self.checkBoxButton setImage:[UIImage imageNamed:@"checkedbox.png"]  forState:UIControlStateNormal];
}else if([self.checkBoxButton.currentTitle isEqualToString:@"check"])
{
    NSLog(@"changing to UNchecked.....");
    [self.checkBoxButton setTitle:@"uncheck" forState:UIControlStateNormal];
    [self.checkBoxButton setImage:[UIImage imageNamed:@"uncheckedbox.png"]  forState:UIControlStateNormal];
} 
```

希望这可以帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-11T07:03:49.427

您可以添加代表状态的属性。

```
@property (nonatomic, assign) BOOL checked;

- (void)setChecked:(BOOL)checked
{
    _checked = checked;

    if (_checked) {
        [self.checkboxButton setImage:[UIImage imageNamed:@"btn-checkbox-checked"] forState:UIControlStateNormal];
    } else {
        [self.checkboxButton setImage:[UIImage imageNamed:@"btn-checkbox-unchecked"] forState:UIControlStateNormal];
    }
} 
```

您可以将 target-action 添加到您的`checkBoxButton`. 在 action 方法中，设置`checked`属性的值。

# jquery - 如何调试似乎是 jQuery/MooTools 冲突的东西？

> ID：13234445
> 
> 赞同：0
> 
> 时间：2012-11-05T14:46:02.620
> 
> 标签：jquery, joomla, mootools, conflict, jquery-easing

我正在尝试实现我在 CodeCanyon 上购买的名为 Textify 的 jQuery 插件。

Textify 需要 jQuery，我正在使用 Shape5 的 Vertex 框架在 Joomla 2.5 环境中实现这个插件。

将插件集成到站点后，我收到 5 个“'undefined' is not a function”错误。

开发站点位于[http://sosdivorce.ergonomiq.net](http://sosdivorce.ergonomiq.net)

由于 Textify 是一个商业产品，我不喜欢在网上发布脚本。

我得到的具体错误如下：

```
Error in file: http://sosdivorce.ergonomiq.net/templates/shape5_vertex/js/multibox/overlay.js

    Type Issue
    'undefined' is not a function (evaluating '$(window).addEvent('resize',function(){s5_resize_overlay();});')

Error in file: http://sosdivorce.ergonomiq.net/templates/shape5_vertex/js/s5_info_slide.js

    Type Issue
    'undefined' is not a function (evaluating '$(window).addEvent('resize',function(){s5_is_tobind();});')

Error in file: http://sosdivorce.ergonomiq.net/templates/shape5_vertex/js/s5_responsive_mobile_bar.js

    Type Issue
    'undefined' is not a function (evaluating '$(window).addEvent('resize',s5_responsive_mobile_login_register);')

Error in file: http://sosdivorce.ergonomiq.net/templates/shape5_vertex/js/s5_columns_equalizer.js

    Type Issue
    'undefined' is not a function (evaluating '$(window).addEvent('resize',s5_load_resize_columns);')

Error in file: http://sosdivorce.ergonomiq.net/templates/shape5_vertex/js/s5_flex_menu.js

    Type Issue
    'undefined' is not a function (evaluating '$(this.options.id).getElements('li, span.grouped_sub_parent_item');') 
```

我该如何调查这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:03:52.803

jQuery 和 Mootools 都使用 $ 符号作为库的快捷方式。我的建议是查看您的 jquery 代码并替换 $ 变量，看看是否有所作为。因此，例如，您可以在调用 jquery 库后立即完全禁用 jQuery 的 $ 别名

```
// Disable the $ global alias completely
jQuery.noConflict(); 
```

然后对于 jQuery 脚本使用

```
(function($){

// set a local $ variable only available in this block as an alias to jQuery
... here is your jQuery specific code ...

})(jQuery); 
```

为了安全起见，我也会对你的 mootools 脚本做同样的事情：

```
(function($){

// set a local $ variable only available in this block as an alias 
// to Mootools document.id
... here is your Mootools specific code ...

})(document.id); 
```

当您托管这些时，您可能需要将它们添加到您的脚本中。

* * *

编辑：

以您所做的方式编辑脚本没有任何问题。实际上最好的做法是在设计插件时考虑到 Joomla noConflict()！

CDN 托管确实使事情变得更加复杂，通常你会以这样的方式添加 jQuery

```
<script src="PATH TO GOOGLE ETC" type="text/javascript" />
<script type="text/javascript">
    jQuery.noConflict();
</script>
<script src="PATH TO SCRIPTS" type="text/javascript" /> 
```

在 joomla 网站上的问题是 joomla 将首先加载所有文件脚本，然后添加手写脚本。无论您添加它们的顺序是什么。即它会像加载它们一样加载它们

```
<script src="PATH TO GOOGLE ETC" type="text/javascript" />
<script src="PATH TO SCRIPTS" type="text/javascript" />
<script type="text/javascript">
    jQuery.noConflict();
</script> 
```

即使它们以相反的方式插入！因此，我建议将其插入到 jQuery 文件本身中的方式有​​点丑陋且编码不太好。我建议在本地托管 jQuery 文件。这不是有史以来最漂亮的方法——也不是最理想的方法，但它是我在 Joomla 中知道的唯一解决这个烦人事实的方法。但是，如果您可以在`jQuery.noConflict();`加载 jQuery 插件之前手动添加 jQuery 下方的 in - 这是一个更好的方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:49:36.257

您是否尝试过使用`jQuery.moConflict();` 以下内容：

```
<script>

      jQuery.noConflict();

// Use jQuery via jQuery(...)

      // Use Prototype/Mootools with $(...), etc.

    </script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:40:47.387

我所做的是，我在头文件的包含文件中替换了以下代码：

```
<!-- jQuery Scripts -->
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>

<!-- Textify Scripts -->
<script type="text/javascript" src="<?php echo $s5_directory_path ?>/js/textify-min.js"></script>  
<script type="text/javascript">  
    $(document).ready(function (){    
      //Usage  
      $(".longText").textify();     
    });   
</script> 
```

使用此代码：

```
<!-- jQuery Scripts -->
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
    jQuery.noConflict();
</script>
<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>

<!-- Textify Scripts -->
<script type="text/javascript" src="<?php echo $s5_directory_path ?>/js/textify-min.js"></script>  
<script type="text/javascript">  
    jQuery(document).ready(function (){    
      //Usage  
      jQuery(".longText").textify();     
    });   
</script> 
```

乔治，你说我应该加上

```
(function($){ 
```

在顶部和

```
})(jQuery); 
```

在每个 jQuery 插件的底部，我应该添加

```
jQuery.noConflict(); 
```

在主 jQuery 文件的底部。

我所做的似乎有效，但也许这不是做事的最佳实践方式。

还有，怎么加

```
jQuery.noConflict(); 
```

到 CDN 托管的 jQuery 副本？

# c# - Linq where 语句中的日期时间检查

> ID：13234447
> 
> 赞同：0
> 
> 时间：2012-11-05T14:46:06.423
> 
> 标签：c#, linq, entity-framework, lambda

请看下面的代码：

```
var pcPageList = db.PcPages
        .Where(m => 
            m.Quarter == exactQuarter && 
            m.Url == pageUrl && 
            m.UpdatedOn.ToDateTime().Date.ToString("dd/MMM").ToLower() == "02/nov")
        .OrderBy(m => m.UpdatedOn)
        .FirstOrDefault(); 
```

当我在上面运行时，应用程序抛出错误说：“ToDateTime”尚未实现。任何人都可以建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:50:58.103

怎么样：

```
var updateStart = DateTime.ParseExact("02/nov", "dd/MMM", CultureInfo.InvariantCulture);
var updateEnd = updateStart.AddDays(1.0);
var pcPageList = db.PcPages
    .Where(m => 
        m.Quarter == exactQuarter && 
        m.Url == pageUrl && 
        m.UpdatedOn >= updateStart &&
        m.UpdatedOn < updateEnd)
    .OrderBy(m => m.UpdatedOn)
    .FirstOrDefault(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:48:50.580

我认为，您应该`ToDateTime`使用`Convert`类调用：

```
 Convert.ToDateTime(m.UpdatedOn).Date... 
```

并将中间删除`Date`为：

```
 Convert.ToDateTime(m.UpdatedOn).ToString("dd/MMM").ToLower() == "02/nov" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:16:44.890

与其进行字符串比较，不如直接比较日期组件更有效。我没有对此进行测试，但类似以下内容可能会起作用：

```
var pcPageList = db.PcPages
      .Where(m => m.Quarter == exactQuarter && m.Url == pageUrl)
      // You may need to materialize the results of the query at this point
      //   or use Convert.ToDateTime(...) instead of ToDateTime()
      .Select(m => new { Row = m, UpdatedOn = m.UpdatedOn.ToDateTime() })
      .Where(a => a.UpdatedOn.Month == 11 && a.UpdatedOn.Day == 2)
      .Select(a => a.Row)
      .OrderBy(m => m.UpdatedOn)
      .FirstOrDefault(); 
```

# sql - 在 MVC3 中显示带有左外连接的 SQL 视图

> ID：13234449
> 
> 赞同：0
> 
> 时间：2012-11-05T14:46:21.787
> 
> 标签：sql, asp.net-mvc-3

我正在使用一个简单的视图，它是两个表的左外连接，以获取每个 FEE 所属的 CATEGORY 名称并将它们分组以进行显示。当我简单地运行视图并遍历项目时，它会重复项目，就像它没有使用相同的视图一样。

```
 @foreach (var category in Model.FeeScheduleRates())
{
    <tr><td colspan="2">@category.Category</td></tr>
    foreach (var item in Model.FeeScheduleRates())
    {                                  

    <tr> 
        <td>@item.Fee_Title - @item.Description</td>
        <td>@item.Amount</td>                                        
    </tr>
    }                                   
} 
```

所以我将我的方法更改为第二组项目的while循环，但这会导致内存不足错误并且似乎不起作用。

```
@foreach (var category in Model.FeeScheduleRates())
{   
    <tr><td colspan="2">@category.Category</td></tr>
    var cid = category.Cat_ID;                             
    while (category.Cat_ID == cid)
    {
         <tr> 
            <td>@category.Fee_Title - @category.Description</td>
            <td>@category.Amount</td>                                        
        </tr>       
    }                            
} 
```

所以问题是，如何遍历视图并将项目分组到它们的类别中，只显示一次类别>

我已经回到绘图板并使用它：

```
 @foreach (var category in Model.FeeScheduleRates().Distinct())
                            {
                                <tr><td colspan="2">@category.Category</td></tr>
                                foreach (var item in Model.FeeScheduleRates().Where(i=>i.Cat_ID == category.Cat_ID))
                                {                               
                                    <tr> 
                                        <td>@item.Fee_Title - @item.Description</td>
                                        <td>@item.Amount</td>                                        
                                    </tr>
                                }                                   
                            } 
```

经历了某种形式的成功，因为类别显示为行，然后是下面的项目。有趣的是，它仍然只是重复相同项目的次数与匹配该类别的记录一样多。我仍然很好奇为什么它没有正确地遍历项目并给我每个 Fee_Title 和 Description。例如：

`免费服务

银行到银行 (B2B) 转账 - 资金到 FCU 免费
银行到银行 (B2B) 转账 - 资金到 FCU 免费
银行到银行 (B2B) 转账 - 资金到 FCU 免费
银行到银行 (B2B)转账 - 资金到 FCU 免费
银行到银行 (B2B) 转账 - 资金到 FCU 免费
银行到银行 (B2B) 转账 - 资金到 FCU 免费银行到银行 (B2B) 转账 - 资金到 FCU免费
银行 -
到银行 (B2B) 转账 - 资金到 FCU 免费
银行到银行 (B2B) 转账 - 资金到 FCU 免费
银行到银行 (B2B) 转账 - 资金到 FCU 免费
银行到银行 (B2B) 转账 -资金到 FCU 免费
银行到银行 (B2B) 转账 - 资金到 FCU 免费
银行到银行 (B2B) 转账 - 资金到 FCU 免费
储蓄和货币市场账户
储蓄
自动转账- 2 美元 储蓄
自动转账 - 2 美元 储蓄自动转账 - 2 美元
储蓄自动转账 - 2 美元 储蓄
自动转账 - 2 美元 储蓄自动转账 - 2 美元
储蓄自动转账 - 2
美元

所以数据库中有 12 个项目在免费类别下，7 个项目在储蓄和货币市场账户下。它只是重复每个类别的第一个类别，次数与类别中的记录一样多。我明白了！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:52:57.217

在`while (category.Cat_ID == cid)`循环中既没有也没有`category.Cat_ID`改变`cid`，所以循环永远不会结束。

**编辑**

查看您获得的结果，您正在遍历不同的类别并多次针对该类别显示第一项。

您需要遍历一个非不同的列表以获取所有信息，并在 if 中隐藏类别名称`lastcategory = thiscategory`。

解决这个问题的一个好方法是写出你想看到的纯 html，**然后逆向构造它。**

# memory - Mathematica NMinimize 遇到内存问题

> ID：13234450
> 
> 赞同：3
> 
> 时间：2012-11-05T14:46:22.623
> 
> 标签：memory, wolfram-mathematica, minimize

我正在尝试最小化我的函数“FunctionToMinimize”，其定义如下：

```
FunctionToMinimize[a_, b_, c_, d_] := (2.35*Sqrt[
   Variance[1/2*
     (a*#1 + b*#2 + c*#3 + d*#4)
    ]
   ]
  /Mean[1/2*(a*#1 + b*#2 + c*#3 + d*#4)]) 
&[DataList1[[1 ;; 1000]],DataList2[[1 ;; 1000]],
DataList3[[1 ;; 1000]], DataList4[[1 ;; 1000]]] 
```

四个参数 a、b、c 和 d 被限制在 0.5 和 1.5 之间。我现在的问题是，如果我打电话

```
NMinimize[{Funktion[w, x, y, z],
0.75 < w < 1.25 && 0.75 < y < 1.25 && 0.75 < x < 1.25 && 0.75 < z < 1.25}, 
{w, x, y, z}] 
```

Mathematica 内核因为内存不足而关闭。如果我只使用我的 DataLists 中的前 100 个条目，它会找到我的结果（在 4.1 秒内），但如果我使用 DataList[[1;;1000]] 甚至更多条目，内核就会崩溃。

有谁知道，为什么 NMinimize 函数使用这么多内存？我需要在每个列表中最小化 150'000 个事件......

谢谢你的回答，干杯，安德烈亚斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-13T10:09:53.510

我猜想（但没有以任何方式检查）问题在于，在每次调用您的函数时，Mathematica 都试图构造一个从您的所有数据派生的符号表达式，并且占用的内存比您预期的要多得多。

不管怎样，好消息——如果你不久之后就忘记了这个问题——你可以把这个函数变成更简单的东西。

所以，首先， the`2.35`和`1/2`s 只是通过一个常数因子改变你的函数并且不影响最小值的位置，所以让我们忽略它们。接下来，你的函数总是非负的，所以最小化它与最小化它的平方是一样的，所以让我们这样做。

所以现在你试图最小化 var(aw+bx+cy+dz)/mean(aw+bx+cy+dz)^2 其中 w,x,y,z 是（可能很长）向量。

现在您的分子和分母都只是 a,b,c,d 的二次形式，其系数取决于（以固定方式）这些向量。具体来说，假设您的向量长度为​​ N。那么您的函数就是

[sum(aw+bx+cy+dz)^2/N - sum(aw+bx+cy+dz)^2/N^2] / (sum(aw+bx+cy+dz)^2/N^ 2)

您可能更喜欢写为 N sum(aw+bx+cy+dz)^2 / sum(aw+bx+cy+dz)^2 - 1

并且在那个分数中，例如，bc的分子中的系数是2 sum(xy)，而分母中的系数是2 sum(x) sum(y)。

所以你可以用你的大向量，计算*一次*相关系数，然后让 Mathematica 优化一个形式的函数（二次/二次），这应该很轻松。

# ruby-on-rails - 测试速度：ActiveRecord use_transactional_fixtures vs. DatabaseCleaner.strategy = :transaction

> ID：13234454
> 
> 赞同：9
> 
> 时间：2012-11-05T14:46:55.270
> 
> 标签：ruby-on-rails, ruby, rspec, benchmarking, rspec-rails

从源（[database_cleaner](https://github.com/bmabey/database_cleaner/blob/master/lib/database_cleaner/active_record/transaction.rb)，[active_record](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/fixtures.rb#L846)）来看，它们似乎应该同样快。但有人声称使用 database_cleaner 的事务策略会减慢控制器和模型规范（[例如](https://stackoverflow.com/a/5435732/429288)）。我手头没有用于基准测试的大型测试套件。有人有任何见解或比较过两者吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-06T18:09:32.103

我花了一点时间在一个广泛使用 ActiveRecord 固定装置的中型代码库上比较两者。当我将其切换为使用 DatabaseCleaner 而不是 时`use_transactional_fixtures`，模型规范开始花费大约两倍的时间。

在进行与您相同的比较之后，我意识到有两件事可以`use_transactional_fixtures`控制：

1.  每个规范是否包含在事务中
2.  ActiveRecord 在此过程中加载夹具数据的位置
    *   为 true时`use_transactional_fixtures`，在第一次测试之前加载一次夹具数据
    *   如果为 false，则在每个规范之前加载夹具数据

DatabaseCleaner 的事务策略可以替代（1）。但缺点是您的套件会重复加载相同的夹具数据。

因此，如果您不使用 AR 夹具（或仅使用一对），`use_transactional_fixtures`DatabaseCleaner 的事务策略将具有相似的性能。但是如果你使用大量的 AR 灯具，`use_transactional_fixtures`关闭会产生很大的性能影响。

# java - 使 JScrollPane 对齐到顶部

> ID：13234456
> 
> 赞同：1
> 
> 时间：2012-11-05T14:47:05.813
> 
> 标签：java, swing, jscrollpane

所以，我有一个程序可以打开一个文档并显示它。但是，文档对于显示区域来说通常很大，所以我添加了一个 JScrollPane。由于我将元素添加到显示的方式，加载后我总是在文档末尾结束。我无法更改加载文档的方式，但我想更改 JScrollPane 在加载后的行为方式。

如何强制它卡到顶部？我尝试使用 scrollRectToVisible 作为顶级组件，但没有奏效。

有没有一种方法可以让它将它的位置设置为顶部（它只是一个垂直的 JScrollpane）？

编辑：我搞砸了，它是 JScrollPane，而不是 JScrollBar。

编辑2：

我决定这样做：

```
myScrollPane.getVerticalScrollBar().setValue(0); 
```

在 JFileChooser 构造函数中：

```
...
if (returnVal == JFileChooser.APPROVE_OPTION)
{
...
Main.myScrollPane.getVerticalScrollBar().setValue(0);
} 
```

那是行不通的。如果我将它移动到我的 JMenu 对象并添加一个标志，它看起来像这样：

在 JFileChooser 构造函数中：

```
...
if (returnVal == JFileChooser.APPROVE_OPTION)
{
...
Main.flag = true;
} 
```

在 JMenu 构造函数中：

```
...
someJMenuItem.addActionListener(new ActionListener()
{
public void actionPerformed(ActionEvent e)
{
new MyJFileChooser();
if (Main.flag)
{
Main.myScrollPane.getVerticalScrollBar().setValue(0);
Main.flag = false;
}
}
} 
```

这也不起作用，但我知道 if 命令中的代码正在执行。

如果我附加 Main.myScrollPane.getVerticalScrollBar().setValue(0); 到 JMenu 中的一个按钮，它将完美地工作。

那么，怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:53:39.180

1.  取决于`program that opens a document and displays it`必须保持`Caret`位置为零

2.  必须移动`JScrollBar`到零值

3.  移动`JViewport`到 (0, 0) ( `scrollRectToVisible for a top component`)

4.  为了获得更好的帮助，请尽快发布 SSCCE，因为这里的答案仅与理论有关

编辑

正如`@Joop Eggen`正确注意到的那样，在大多数情况下需要 (view_to_model) 包裹在`SwingUtilities.invokeLater(...)`

# android - 如何在每个省份执行不同操作的地图图像中制作可点击区域？

> ID：13234462
> 
> 赞同：0
> 
> 时间：2012-11-05T14:47:37.937
> 
> 标签：android, image, map, clickable, areas

我想制作一个 Android 应用程序，您可以在其中看到荷兰地图的图像，在那里您可以选择一个省。每个省都必须上另一个班级。

我发现最好的方法是使用 2 张图像，其中 1 张是您展示的，另一张完全相同，但有颜色。比使用 touchEvent 获取颜色，然后说它的 Red 是否去上课。

到目前为止，我有 2 张图像，一张我显示，另一张（完全相同，但每个省都有另一种颜色），这张图片我设置为“不可见”。

```
<FrameLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_gravity="center"
    android:background="#ffffff" >

    <ImageView
        android:id="@+id/img_bg"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitXY"
        android:src="@drawable/nl_clickable_original" />

    <ImageView
        android:id="@+id/img_hitbox"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:scaleType="fitXY"
        android:src="@drawable/nl_clickable"
        android:visibility="invisible" />

</FrameLayout> 
```

但现在我不知道如何走得更远。

我在 StackOverflow 上找到了一些代码，它应该从图像中获取颜色，但我不知道如何实现它。

```
private int getColour(int x, int y) {
    ImageView img = (ImageView) findViewById(R.id.img_hitbox);
    img.setDrawingCacheEnabled(true); 

    Bitmap hotspots = Bitmap.createBitmap(img.getDrawingCache()); 
    img.setDrawingCacheEnabled(false);

    return hotspots.getPixel(x, y);
} 
```

我是正确的方法还是有人更好地知道如何做到这一点？

我现在已经搜索了 1 周，所以有点帮助会很好:)！

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T15:41:47.543

在活动的 onCreate 中，您可以执行类似（未测试）的操作

```
 ImageView img = (ImageView) findViewById(R.id.img_bg);
    img.setOnTouchListener(new View.OnTouchListener() {
    @Override
    public boolean onTouch(View v, MotionEvent event) {
        if (event.getAction() == MotionEvent.ACTION_UP){
            int x = (int) event.getX();
            int y = (int) event.getY();
            int colour = getColour( x, y);
            //switch to correct province
        }
        return true;
     }
    }); 
```

我不确定 getColour 是否适用于不可见（或隐藏视图）视图。另一种方法可能是做类似的事情（再次未经测试）

```
private int getColour( int x, int y)
{
    ImageView img = (ImageView) findViewById(R.id.img_bg);
    Drawable d = getResources().getDrawable(R.drawable.nl_clickable);
    Bitmap b1 =((BitmapDrawable)d).getBitmap();
    //scale loaded bitmap to same resolution as visible view
    Bitmap hotspots = Bitmap.createScaledBitmap(b1, img.getWidth(), img.getHeight(), false);
    return hotspots.getPixel(x, y);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:59:05.770

一个图像将位于另一个图像的顶部，因此您将永远无法单击底部的图像。如果您的地图不可滚动，使用 ontouch 事件会很容易，只需记住屏幕可以有不同的密度。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:08:07.497

您的主要问题是屏幕密度。您可以将图像划分为坐标，然后使用 ontouch 事件做您想做的事情，但是由于屏幕有数百万种不同的密度，这对您来说会很困难。值得一提的是，给你带来颜色的代码的和平也取决于坐标，你必须传递图像的 x 和 y 坐标，这样它就会给你返回颜色，所以忘记颜色。最好考虑屏幕密度，并以此方式进行研究。

# python - 基本的python字符串

> ID：13234463
> 
> 赞同：-4
> 
> 时间：2012-11-05T14:47:44.137
> 
> 标签：python, string

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T14:51:45.630

看看[`str.split`](http://docs.python.org/2/library/stdtypes.html#str.split)。您可以使用它将字符串拆分为列表：

```
"foo bar baz".split()     #['foo','bar','baz'] (split on any whitespace)
"foo$bar$baz".split('$')  #['foo','bar','baz'] 
```

从这里开始，只需将字符串拆分为适当的列表，然后正确地遍历列表以挑选出您需要的元素。

此外，您可以使用[`str.find`](http://docs.python.org/2/library/stdtypes.html#str.find)获取类名的索引并在拆分*之前*使用切片将字符串拆分到`$`. 这将使获得特定分数更容易（无需额外的迭代）：

```
s = 'foo$bar$baz'
s_new = s[s.find('bar'):]  #'bar$baz'
baz = s_new.split('$')[1]
print baz 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:55:40.577

阅读此内容的一种便捷方法是使用该`csv`模块。它适用于逗号分隔值，但您可以更改分隔符并`$`改为使用。

您需要将其`delimiter='$'`用作`reader`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:56:58.330

将字符串存储在变量中，例如：

```
strs="""Justin$Calculus$90$Java$85$Python88$
Taylor$Calculus$73$Java$95$Python86$
Drew$Calculus$80$Java$75$Python94$
""" 
```

使用 for循环`strs.split()`进行循环，即 `for line in strs.split()` （使用`strs.split()`将返回一个包含所有行的列表，在空格处拆分）

现在对于每一行 use `line.rstrip("$").split('$')`，它会在第一行返回类似这样的内容：

```
['Justin', 'Calculus', '90', 'Java', '85', 'Python88'] 
```

`rstrip("$")`将从行中删除最右边`$`的

# javascript - Canvas datatoURL not saving canvas content

> ID：13234464
> 
> 赞同：2
> 
> 时间：2012-11-05T14:47:45.783
> 
> 标签：javascript, html, canvas

I am trying to use toDataURL in Html5 Canvas to export an image to a PNG file in a new window.

Here's my JS code (I think you guys need to see it all to check if there's something wrong)

```
var oCtx;
var oCanvas;
var img;
var oImg;

function updateClicked() {

    oCanvas.width = oCanvas.width;
    oCtx.drawImage(img,0,0); 

    oCtx.font = "normal 23px arial";     // different font
oCtx.textBaseline = "top";           // text baseline at the top
oCtx.fillStyle = "#666";
oCtx.fillText(document.getElementById("attentionde").value, 255, 365);

oCtx.font = "bold 28px arial";     // different font
oCtx.fillStyle = "red";
oCtx.fillText(document.getElementById("nofacture").value, 172, 226);

}
// setup our test canvas
// and a simple drawing function
window.onload = function() {
    oCanvas = document.getElementById("thecanvas");
    oCtx = oCanvas.getContext("2d");

    var iWidth = oCanvas.width;
    var iHeight = oCanvas.height;

    img=new Image();
    img.src="Fond_Facture_Medio.jpg"; //My background image source

//BACKGROUND-IMAGE//
img.onload = function(){
oCtx.drawImage(img,0,0);  

};

var dataUrl = oCanvas.toDataURL();

var button = document.getElementById("thebutton");
button.onclick =function() {
  window.open(dataUrl, "toDataURL() image", "width=1275, height=1650");
}  
}​ 
```

When I click on my button (id="thebutton")...it does open a new window with a PNG file in it, but the png is blank...Seems like it does not get the images drawn in the Canvas for a unknown reason.

I tried adding this code right before the `var dataUrl = oCanvas.toDataURL();` line :

```
oCtx.fillStyle = "rgba(0, 0, 255, .5)";
oCtx.fillRect(25, 25, 125, 125); 
```

Just to test if I was drawing a shape, it would save it through the dataURL process. When I tested it, by clicking on the "thebutton" button, it opened a new window, and voila! I was able to see and save the canvas image with a light-blue rectangle in it...but no backgroud-image, and no text...nothing else. I really don't understand what's wrong. Thank you!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:57:04.587

移动这条线

```
var dataUrl = oCanvas.toDataURL(); 
```

在 button.onclick 处理程序中。

在您创建数据 URL 的那一刻，window 元素和任何 img 元素都没有触发它的 load 事件，因此没有绘制任何内容。

# sql - 使用 SET 和 SELECT 分配多个变量

> ID：13234465
> 
> 赞同：0
> 
> 时间：2012-11-05T14:47:52.560
> 
> 标签：sql, sql-server, tsql

我使用以下 t-sql 代码为变量分配从 select 语句中获得的值

```
 DECLARE @cfMitt nvarchar(16)

 SET @cfMitt = (SELECT CfMittente
    FROM Messaggi
    WHERE IDMessaggio = @IDMessaggio) 
```

如果我想使用多个分配，我尝试使用以下代码，但有问题：

```
DECLARE @cfMitt nvarchar(16)
DECLARE @cfDest nvarchar(16)

SET @cfMitt, @cfDest= (SELECT CfMittente, CfDestinatario
FROM Messaggi
WHERE IDMessaggio = @IDMessaggio) 
```

错误在哪里？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T14:49:06.890

`Set`一次只分配一个值。

你应该使用

```
 SELECT @cfMitt = CfMittente, 
          @cfDest = CfDestinatario
   FROM Messaggi
   WHERE IDMessaggio = @IDMessaggio 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:50:16.037

变量声明也可以；

```
DECLARE @V1 VarType, @V2 VarType,... 
```

任务;

```
SELECT @V1 = C1, @V2 = C2,...@Vn = Cn
FROM [Table]
WHERE Conditions 
```

# php - PHP收件箱系统

> ID：13234466
> 
> 赞同：1
> 
> 时间：2012-11-05T14:47:53.880
> 
> 标签：php, mysql, sql

我在创建收件箱系统时遇到问题。我想做的是在“ViewMessages.php”中我试图从 MYSQL 表中提取信息以显示消息。

我的第一个声明是：

```
 $MessageQuery = mysql_query("SELECT * FROM messages WHERE ToUName='$ToUName' AND FromUName='$FromUName'"); 
```

但我意识到了一个缺陷，它只会显示以 1 方式发送的消息。我试过类似的东西：

```
 $MessageQuery = mysql_query("SELECT * FROM messages WHERE ToUName='$ToUName' AND FromUName='$FromUName' OR FromUName='$ToUName' AND ToUName='$FromUName'"); 
```

这失败了。任何人都可以阐明双方的信息吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:50:52.000

工会呢？

```
$MessageQuery = mysql_query("(SELECT * FROM messages WHERE ToUName='$ToUName' AND FromUName='$FromUName') UNION (SELECT * FROM messages WHERE FromUName='$ToUName' AND ToUName='$FromUName')"); 
```

注意：如果您需要任何特定顺序的消息，您可以`ORDER BY`在查询结束时使用，希望您有类似 message_id 或时间戳之类的附加到每个查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:50:49.657

您混淆了布尔运算符，尝试将一些 () 放入其中.. (a AND b) OR (c AND d)。

此外，您要完成的是获取您和另一位联系人之间的所有消息。你知道吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T14:52:09.210

```
SELECT * 
FROM messages
WHERE '$ToUName' in (ToUName, FromUName)
OR '$FromUName' in (ToUName, FromUName) 
```

或者如果您更喜欢查询中首先列出的列

```
SELECT * 
FROM messages
WHERE ToUName in ('$ToUName', '$FromUName')
OR FromUName in ('$ToUName', '$FromUName') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T14:51:08.737

试试这个：

$MessageQuery = mysql_query("SELECT * FROM messages WHERE ToUName='$ToUName' || FromUName='$FromUName'");

# scala - 在Scala中使用方法返回值作为默认构造函数参数

> ID：13234471
> 
> 赞同：2
> 
> 时间：2012-11-05T14:48:11.613
> 
> 标签：scala

这就是我想做的：

```
object foo {
    def bar = Array(1, 2, 3, 4, 5)
}
class foo (baz = bar) {
} 
```

这会导致编译器错误。还有另一种方法可以做到这一点吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T14:50:59.813

```
object foo {
    def bar = Array(1, 2, 3, 4, 5)
}

class foo (baz: Array[Int] = foo.bar) {
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:57:26.940

您可以使用辅助构造函数

```
object Foo {
  def bar = Array(1, 2, 3, 4, 5)
}

class Foo(baz: Array[Int]) {
  def this() = this(Foo.bar)
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T14:52:01.427

您可以编写一个辅助构造函数：

```
object foo {
    def bar = Array(1, 2, 3, 4, 5)
}

class foo (baz : Array[Int]) {
    def this(){
        this(bar)
    }
} 
```

编写时没有 IDE 或编译器，因此必须有人修正错别字。

# ios - 无需登录即可使用 Facebook SDK 发布到新闻源

> ID：13234472
> 
> 赞同：0
> 
> 时间：2012-11-05T14:48:12.987
> 
> 标签：ios, facebook-ios-sdk, feed

有没有一种无需登录就可以在用户墙上发帖的方法？认为文档我可以做到这一点，但用户必须[登录](https://developers.facebook.com/docs/howtos/feed-dialog-using-ios-sdk/)，我不想要因为这是一个简单的应用程序。

我知道 facebook 开发者网站上有一个教程，因为我找到了它，直到后来我才意识到这一点。使用“publish_stream”权限的东西，如果有人能指出我正确的方向，我很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:14:15.880

它不是自动的（无论如何都会违反平台政策），但您可以为此使用 Feed 对话框：

[https://developers.facebook.com/docs/reference/dialogs/feed/](https://developers.facebook.com/docs/reference/dialogs/feed/)

# c# - Javascript 函数在 asp:button Click 事件上不起作用，测试警报函数在该事件中起作用。！

> ID：13234473
> 
> 赞同：0
> 
> 时间：2012-11-05T14:48:18.357
> 
> 标签：c#, javascript, jquery, asp.net, html

我正在尝试按照本网站[http://needim.github.com/noty/](http://needim.github.com/noty/)中的说明创建警报，这 是代码

```
 <head runat="server">
    <title>Test</title>
    <script src="jquery-1.7.2.min.js" type="text/javascript"></script>
    <script type="text/javascript" src="js/noty/jquery.noty.js"></script>
    <script type="text/javascript" src="js/noty/layouts/top.js"></script>
    <link rel="stylesheet" type="text/css" href="buttons.css" />
    <script type="text/javascript" src="js/noty/themes/default.js"></script>
</head>
<body>
    <div class="container">
        <div id="customContainer">
        </div>
    </div>
    <script type="text/javascript">
        function generate(type, layout) {
            var n = noty({
                theme: 'defaultTheme',
                text: 'Do you want to continue?',
                buttons: [
    {
        addClass: 'btn btn-primary',
        text: 'Ok',
        onClick: function ($noty) {
            // this = button element
            // $noty = $noty element
            $noty.close();
            noty(
            {
                text: 'Record deleted !',
                type: 'success',
                callback:
                {
                    onShow: function () { },
                    afterShow: function () { TakeValue(true); },
                    onClose: function () {  },
                    afterClose: function () { }
                }
            });
        }
    },
     {
         addClass: 'btn btn-danger',
         text: 'Cancel',
         onClick: function ($noty) {
             $noty.close();
             noty(
            {
                text: 'Record not deleted !',
                type: 'warning',
                callback:
                 {
                     onShow: function () { },
                     afterShow: function () { TakeValue(false); },
                     onClose: function () { },
                     afterClose: function () { }
                 }
            });
         }
     }
    ]

            });

        }
     function TakeValue(result) {
            if (result == true) {
                document.getElementById("Hidden1").value = "true";
                alert(document.getElementById("Hidden1").value);

            } else {

                document.getElementById("Hidden1").value = "false";
                alert(document.getElementById("Hidden1").value);
            }
        }
        function generateAll() {
            generate('information', 'top');
        }

    </script>
    <form id="form" runat="server">
    <input id="Hidden1" type="hidden" value="false"/>
    <asp:Button ID="Button2" runat="server" Text="Press"  OnClientClick="return generateAll();" />
    <input id="Button1" type="button" value="button" onclick="return generateAll();" />
    </form>
</body> 
```

我放置了两个按钮，一个是 HTML 按钮，另一个是 asp:Button，当我使用 HTML 按钮时，整个场景工作正常，但是在 asp:Button click 的情况下页面没有显示类似的行为，我已经在 J​​avaScript 中放置了一个测试函数来测试 asp:Button 的 OnClientClick 事件，并且工作正常，但我不知道为什么没有调用此警报，我认为 Noty JS 存在一些问题。请回馈

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:16:31.910

正如 jbabey 在评论中所说：

> 默认情况下，单击 asp:button 将导致回发。你需要`return false`从onclientclick，现在你返回未定义，因为generateAll没有返回。

由于您使用的是 jQuery，我会更进一步，而不是直接设置`click`属性。相反，使用 jQuery 设置它：

```
<script>
$(document).ready(function() {
    $('#Button1').click(generateAll);
});
...
function generateAll(e) {
    generate('information', 'top');
    // This will prevent the default action of submitting the form.
    e.preventDefault();
}
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T08:10:51.240

您能否将 UseSubmitBehavior="false" 属性添加到 asp:button。

```
<asp:Button ID="Button2" runat="server" Text="Press" UseSubmitBehavior="false" OnClientClick="return generateAll();" /> 
```

我希望这能解决您的问题。请让我知道它是否对您有帮助。

# java - 异常 StreamCorruptedException：无效类型代码：AC

> ID：13234475
> 
> 赞同：1
> 
> 时间：2012-11-05T14:48:33.470
> 
> 标签：java, file, objectoutputstream, objectinputstream

每次运行程序时，我都想序列化文件中的相同对象。这是一个简单的算法来解释我的问题。

在开始时，我将 a 存储`String`在`writer`. 在最后我读了一个文件。这个程序的目标是如果我运行我的程序 X 次，我存储并在屏幕上打印 X 次我的对象。

```
class ReadFile {

    static ObjectOutputStream writer = null;

    public static void main(String[] args) throws IOException, ClassNotFoundException {

        writer = new ObjectOutputStream(new FileOutputStream("trace", true));
        store("String");

        if (writer != null) {
            writer.close();
        }

        open("file.tmp");

    }

    static public void store(String chaine) {
        if (writer == null) {
            return;
        }
        try {
            writer.writeObject(chaine);
        } catch (IOException ex) {
        }
    }

    static public void open(String file) throws FileNotFoundException, IOException, ClassNotFoundException {
        StringBuilder str = new StringBuilder();
        ObjectInputStream objs;
        try {

            objs = new ObjectInputStream(new FileInputStream(file));
            try {
                while (true) {
                    Object obj = objs.readObject();
                    str.append(obj.toString());
                }
            } catch (EOFException ex) {
            }
            objs.close();

        } catch (Exception ex) {
            ex.printStackTrace(System.err);
        }
    }
} 
```

当我运行这个程序时，我有这个错误：

```
java.io.StreamCorruptedException: invalid type code: AC
        at java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1355)
        at java.io.ObjectInputStream.readObject(ObjectInputStream.java:350)
        at ReadFile.open(ReadFile.java:47)
        at ReadFile.main(ReadFile.java:35) 
```

请问我该怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:04:22.777

根据[这篇](https://stackoverflow.com/questions/3182240/java-io-streamcorruptedexception-invalid-type-code-ac)文章，您无法附加到 ObjectOutputStream，您试图通过以附加模式打开底层 FileOutputStream 来执行此操作。该帖子中提到了一个解决方案，您可以创建一个 AppendableObjectOutputStream ，或者您可以直接打开 FileOutputStream 而无需附加。

# string - 存储为 tcl 字符串的递增整数值

> ID：13234476
> 
> 赞同：1
> 
> 时间：2012-11-05T14:48:39.013
> 
> 标签：string, tcl

我必须实现一个功能，其中我有一个文件名，并且该名称最后包含一些整数值，我想将该整数值加一。更清楚地说，问题字符串“文件名”是：

> asdfasdfasdfa.foo.old001

现在我必须检查这个文件名是否存在，如果存在，我必须将我的新文件命名为

> asdfasdfasdfa.foo.old002

等等。我可以想到一种解决方案，即使用获取最后一个字符串“.old001”

> 文件扩展名字符串

命令，然后使用正则表达式获取最后三个字符并将“1”添加到它，然后将文件名加入这个新扩展名。但我不确定这是否是一个好的和最优的解决方案。任何其他想法或帮助都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T15:14:25.850

```
proc incr_filename {name} {
    set digits [regexp -inline {\d+$} $name]
    set prefix [string range $name 0 end-[string length $digits]]
    set num [scan $digits %d]  ;# prevents problems with invalid octal numbers 
    format "%s%0*d" $prefix [string length $digits] [incr num]
}

puts [incr_filename asdfasdfasdfa.foo.old001] 
```

并找到不存在的文件名：

```
set filename abcd.ext.old001
while {[file exists $filename]} {
    set filename [incr_filename $filename]
}
puts "new filename is $filename" 
```

# objective-c - XCode 4.5、静态库和类别

> ID：13234487
> 
> 赞同：3
> 
> 时间：2012-11-05T14:49:25.937
> 
> 标签：objective-c, ios, xcode

我正在尝试使用静态库，并且其中的类别在运行时没有被使用。没有编译时错误，但是当我开始运行时，我收到标准的“无法识别的选择器发送到实例”消息并且我的应用程序崩溃了。

许多解决方案说要添加`-ObjC -all_load`到应用程序目标中的“其他链接器标志”属性（许多其他人说从 XCode 4 开始不再需要，这是我费心包含 XCode 版本的唯一原因）。我已经尝试过了，在构建过程中出现 115 个错误：

`Undefined symbols for architecture i386: "_CLLocationCoordinate2DMake", referenced from: -[QMapElement init] in libQuickDialog.a(QMapElement.o) "_OBJC_CLASS_$_MKMapView", referenced from: objc-class-ref in libQuickDialog.a(QMapViewController.o) "_OBJC_CLASS_$_MKPinAnnotationView", referenced from: objc-class-ref in libQuickDialog.a(QMapViewController.o) "std::istream::gcount() const", referenced from: GT::AES::decode(std::istream&, std::ostream&, unsigned int&, bool) in GD(gtaes.o) GT::AES::encode(std::istream&, std::ostream&, unsigned int&, bool) in GD(gtaes.o) "std::string::find_first_of(char const*, unsigned long, unsigned long) const", referenced from: -[GDSetPasswordViewController checkPasswordStrength:] in GD(GDSetPasswordViewController.o) GD::EacpCReq::EacpCReq(std::string, std::string, GT::Dbb&) in GD(GDEacpCommands.o) GD::RawSocket::connect() in GD(GDRawSocket.o) "std::string::copy(char*, unsigned long, unsigned long) const", referenced from: GD::Socket::toString() const in GD(GDSocket.o)`

（依此类推，大约是 115 个中的 5 个或 6 个）。

无论我有这些链接器标志中的任何一个，还是两者都有，我都会得到完全相同的错误集。

不确定这是否是罪魁祸首，或者只是巧合，但在更仔细地查看错误之后，似乎它们都来自我正在使用的两个 3rd 方库之一。一个作为已安装的 .framework，另一个作为常规静态库。也许我也需要对他们的构建做点什么（如果可能的话）？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:00:58.660

在我看来，错误消息指向一些缺少的框架：

1.  核心位置（`_CLLocationCoordinate2DMake`符号）；

2.  MapKit（`_OBJC_CLASS_$_MKPinAnnotationView`符号）；

3.  C++ 标准库。

尝试将它们包含在您的目标中...特别是对于 C++ 标准库，您应该检查 Xcode 中“Apple LLVM 编译器 xy - 语言”下的特定构建设置。

这不排除其他缺少框架的机会，当然……

# networking - iptables 规则只对我有用

> ID：13234488
> 
> 赞同：-1
> 
> 时间：2012-11-05T14:49:26.693
> 
> 标签：networking, block, iptables

我需要阻止这个 ip 188.43.64.80。

```
iptables -A OUTPUT -p ALL -d 188.43.64.80 -j DROP 
```

此规则适用于我的本地计算机 - 我无法 ping 此 IP。

但它不适用于连接到我的计算机 - 他们可以ping这个IP。

如何使此规则在我的网络中起作用？

我的网络首选项 - 来自 eth0 的 Internet。
来自 wlan0 的网络。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T14:51:11.140

它在`OUTPUT`链中，仅影响本机输出的数据包。`FORWARD`您想向影响此机器正在转发的数据包的链添加类似的规则。

# android - 安装错误：INSTALL_FAILED_INSUFFICIENT_STORAGE -- 在设备上

> ID：13234489
> 
> 赞同：0
> 
> 时间：2012-11-05T14:49:29.313
> 
> 标签：android

我在这里遇到设备中没有足够位置的问题。我一直在这里寻找这个问题的答案，发现很多答案，这是不可接受的，因为：
1.他们都在谈论模拟器，在我的情况下它是真正的测试设备
2.社区建议增加存储，所以不会再有这样的消息了——我所做的是我删除了设备中的一些应用程序/游戏，所以它有所帮助，但是在从 eclipse 直接运行到设备几次之后，消息又开始出现了。

在开始应用程序（apk）上传到设备然后安装时，我假设eclipse无法删除以前的应用程序（apk），所以它会不断复制新的应用程序而不删除旧的应用程序。有没有办法清理那个apks，或者我的想法完全错误。
帮助。
谢谢，如果答案在这里的某个地方而我没有找到它，我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T05:22:06.033

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.packagename.appname"
android:versionCode="1"
android:versionName="1.0" 
android:installLocation="preferExternal"> 
```

通过这种方式解决了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-02T11:53:32.283

```
You need to do two things after which this error will be resolved. 

1\. In your AndroidManifest.xml file add android:installLocation="preferExternal" within your manifest      tag.

<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.packagename.appname"
android:versionCode="1"
android:versionName="1.0" 
android:installLocation="preferExternal">

2\. More importantly, clear the cache data in your device. Goto settings -> storage -> click on cached data. This will clear the cache and free the space. 

3\. Reconnect your device, clean your project and again run it on the device. The project will now run on    your device. 
```

# c# - 将 DataGridView 列绑定到 BindingList 后使其可编辑

> ID：13234493
> 
> 赞同：3
> 
> 时间：2012-11-05T14:49:45.430
> 
> 标签：c#, binding, datagridview, bindinglist

我有一个`DataGridView`，我将它绑定到一个`BindingList<KeyValuePair<string, float>>`. 这是代码的相关部分：

```
 dgv.AutoGenerateColumns = false;

        DataGridViewTextBoxColumn firstColumn = new DataGridViewTextBoxColumn();
        firstColumn.DataPropertyName = "Key";
        firstColumn.HeaderText = "First Column";

        DataGridViewTextBoxColumn secondColumn = new DataGridViewTextBoxColumn();
        secondColumn.DataPropertyName = "Value";
        secondColumn.HeaderText = "Second Column";
        secondColumn.ReadOnly = false;
        secondColumn.ValueType = typeof(float);

        dgv.Columns.Add(firstColumn);
        dgv.Columns.Add(secondColumn);
        dgv.AutoSizeColumnsMode = DataGridViewAutoSizeColumnsMode.Fill;
        dgv.MultiSelect = false;
        dgv.EditMode = DataGridViewEditMode.EditOnKeystrokeOrF2;
        dgv.ReadOnly = false;

        _bindingList = new BindingList<KeyValuePair<string, float>>(_someList);
        dgv.DataSource = _bindingList; 
```

但第二列仍然不可编辑。我应该怎么做才能使第二列可编辑而第一列不可编辑？

**编辑：**我希望将更改反映在`BindingList`实例本身上。

**编辑 2：**我在代码末尾添加了这一行，现在出现错误：

```
 dgv.Columns[1].ReadOnly = false; 
```

我收到此错误：

`DataGridView column bound to a read-only field must have ReadOnly set to True.`

**编辑 3：**问题似乎是我`KeyValuePair`在列表中使用了 s 。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-06T05:00:42.200

问题原来是类的`Key`和`Value`属性`KeyValuePair`是只读的。解决方案是创建一个具有`public setter`s 来表示数据的新类。

# c# - 如何动态加载字体？

> ID：13234500
> 
> 赞同：0
> 
> 时间：2012-11-05T14:50:10.583
> 
> 标签：c#, .net, silverlight, web-applications

在 Silverlight 4 中，我有以下内容（就本文而言，字体列表实际上要短得多）：

```
private static ObservableCollection<FontFamily> colFontFamilies = new ObservableCollection<FontFamily>()
{
     new FontFamily("/PrintVites;component/Fonts/Fonts.zip#Trajan Pro"),
     new FontFamily("/PrintVites;component/Fonts/Fonts.zip#Futura Std Light"),
     new FontFamily("/PrintVites;component/Fonts/Fonts.zip#GeosansLight")
}; 
```

这些是当前嵌入的字体。如何在应用程序加载后使用 WebClient 对象异步加载这些？我必须将它们放在一个 zip 文件中，还是可以单独加载每个字体文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-09T17:11:13.677

通过将字体放在一个 zip 文件中并使用 WebClient 对象读取它们，我自己想出来了。

# mobile - HTML 电子邮件中的响应式链接将客户引导至移动站点或桌面站点

> ID：13234501
> 
> 赞同：0
> 
> 时间：2012-11-05T14:50:14.997
> 
> 标签：mobile, html-email, browser-detection

我们最近建立了一个很棒的移动网站，但是当我们发送我们的 html 电子邮件时，我不得不在链接上使用媒体查询将客户发送到桌面网站或移动网站，因为 URL 不同，例如。m.mobilesite.com 和 www.desktopsite.com。

我想使用“detectmobilebrowsers.com”之类的东西，这样我就可以取消媒体查询，并拥有一个由移动和桌面链接组成的链接。此站点上的设置建议不是很有帮助。

有人知道怎么做这个吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T19:00:09.193

就个人而言，我不喜欢那种声音。您不能保证邮件/网络邮件客户端将能够支持“响应链接”，无论用户在何种设备上查看它。因此，您很可能会将用户指向错误的设备特定站点。

我要做的是将您所有的电子邮件链接指向主站点版本。此时，您应该在服务器上进行某种形式的设备检测。您的站点逻辑应该能够将用户转发到正确的站点特定页面（例如，移动访问者发送到同一页面的移动版本，桌面用户未重定向）。

如果您没有任何重定向逻辑（您确实应该[阅读此内容](http://www.9xb.com/blog-2012-08-6-common-pitfalls-when-deploying-a-mobile-site-and-how-they-can-be-avoided/)），基本上这就是您想要实现的目标：

[http://www.9xb.com/wordpress/wp-content/uploads/2012/08/mobile-deployment-small.png](http://www.9xb.com/wordpress/wp-content/uploads/2012/08/mobile-deployment-large.png)

如果您不遵守[Google 制定的](https://developers.google.com/webmasters/smartphone-sites/details)有关重定向和规范链接标签的规则，您可能会在某些时候遇到麻烦。

如果这一切都超出了您的技术能力，我建议您与构建您的移动网站的人交谈，因为这不适合胆小的人。

# android - 如何设置当前主题的边距颜色？

> ID：13234503
> 
> 赞同：3
> 
> 时间：2012-11-05T14:50:14.940
> 
> 标签：android, achartengine

设置新主题后，AChartEngine 不再尊重来自主题的默认背景。我做了几次尝试来解决这个问题，但都没有成功。我需要做什么？

设置来自`styles.xml`：

```
res/values/styles.xml: <style name="AppTheme" parent="android:Theme.Holo.Light" />
res/values-v11/styles.xml: <style name="AppTheme" parent="android:Theme.Light" /> 
```

清单的一部分：

```
<application
    ...
    android:theme="@style/AppTheme" > 
```

示例代码：

```
XYMultipleSeriesDataset dataset = new XYMultipleSeriesDataset();
dataset.addSeries(timeSeries);

XYMultipleSeriesRenderer renderer = new XYMultipleSeriesRenderer();
renderer.setAxesColor(Color.GRAY);
renderer.setAxisTitleTextSize(16);
renderer.setChartTitle(label);
renderer.setChartTitleTextSize(20);
renderer.setGridColor(Color.GRAY);
renderer.setLabelsColor(Color.LTGRAY);
renderer.setLabelsTextSize(15);
renderer.setLegendTextSize(15);
renderer.setMargins(new int[] {
        20, 30, 15, 0
});
renderer.setPointSize((float) 5.0);
renderer.setShowGrid(true);
renderer.setXLabels(10);
renderer.setXTitle(getString(R.string.txt_datum));
renderer.setYLabels(10);
renderer.setYTitle(MyPreferenceActivity.getWaehrung());
renderer.setZoomButtonsVisible(true);

int[] colors = new int[] {
        Color.RED
};
PointStyle[] pointStyles = new PointStyle[] {
        PointStyle.POINT
};
for (int i = 0; i < colors.length; i++) {
    XYSeriesRenderer tempRenderer = new XYSeriesRenderer();
    tempRenderer.setColor(colors[i]);
    tempRenderer.setPointStyle(pointStyles[i]);
    renderer.addSeriesRenderer(tempRenderer);
}

GraphicalView graphicalView = ChartFactory.getTimeChartView(this,
        dataset, renderer, null);

layout.addView(graphicalView, new LayoutParams(LayoutParams.FILL_PARENT,
        LayoutParams.FILL_PARENT)); 
```

结果图像。不正确的黑色背景从何而来？

![在此处输入图像描述](../Images/bec22906c174e2902fafe626cce21a02.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T12:25:46.683

是的，可能是一个错误，AChartEngine 不再尊重来自主题的默认背景。可能的解决方案是设置边距颜色。

```
renderer.setMarginsColor(Color.WHITE); 
```

看 [这里](https://stackoverflow.com/a/7711855/1136010 "android - 如何使用 achartengine 更改图形的背景颜色")和[这里](https://stackoverflow.com/a/9372036/1136010 "ChartEngine 透明背景")。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T16:37:37.443

您可能应该手动设置图表背景。

```
renderer.setApplyBackgroundColor(true);
renderer.setBackgroundColor(color); 
```

# c# - 只有在使用 System.Data.OracleClient 时，函数才保持无效，通过 SQL Developer 工作

> ID：13234505
> 
> 赞同：2
> 
> 时间：2012-11-05T14:50:17.513
> 
> 标签：c#, sql, oracle

我正在使用 C# 和 System.Data.OracleClient 向数据库添加函数。这适用于大多数功能，除了一个。该函数已创建，但其状态为无效。在检查了这种无效状态的原因后，我注意到我可以在 SQL Developer 中简单地编译该函数，但不能从我的 c# 应用程序中编译。

任何想法为什么使用 .NET 和 SQL Developer 会有所不同？

这是我使用的功能

```
string sql =
   @"CREATE OR REPLACE FUNCTION MYUSER.TEMPJOINSTRINGS 
    ( P_CURSOR SYS_REFCURSOR, 
      P_DEL VARCHAR2 := ', '
    ) RETURN VARCHAR2
   IS
     L_VALUE VARCHAR2(32767);
     L_RESULT VARCHAR2(32767);
   BEGIN
   LOOP
     FETCH P_CURSOR INTO L_VALUE;
     EXIT WHEN P_CURSOR%notfound;
     IF L_RESULT IS NOT NULL THEN
       L_RESULT := L_RESULT || P_DEL;
     END IF;
     L_RESULT := L_RESULT || L_VALUE;
   END LOOP;
   RETURN L_RESULT;
   END;";

try
{
    using (OracleConnection connection = new OracleConnection(@"Data source=TEST10;User Id=MYUSER;Password=MYPASS;"))
    {
        connection.Open();
        DbCommand cmd = connection.CreateCommand();
        cmd.CommandText = sql;
        cmd.ExecuteNonQuery();
        connection.Close();
        return true;
    }
}
catch (Exception ex)
{
    MessageBox.Show(ex.Message);
} 
```

然后我执行

```
ALTER FUNCTION MYUSER.TEMPJOINSTRINGS COMPILE 
```

但是编译只能在 SQL Developer 中工作，而不是我的 c# 应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:26:42.417

我猜想.NET 中的字符串被 bieng 格式化为 windows syle 即。\r\n 换行符。

试试这个

```
 sql = sql.Replace("\r", ""); 
```

在您构建了函数字符串之后。

如果您这样做了，您可以快速确认这一点：

```
SQL> show errors function TEMPJOINSTRINGS
Errors for FUNCTION TEMPJOINSTRINGS:

LINE/COL ERROR
-------- -----------------------------------------------------------------
1/26     PLS-00103: Encountered the symbol "" when expecting one of the
         following:
         ( return compress compiled wrapped

SQL> select status from user_objects where object_name = 'TEMPJOINSTRINGS';

STATUS
-------
INVALID

SQL> select text, dump(text) from user_source where name = 'TEMPJOINSTRINGS' and line = 1;

TEXT
--------------------------------------------------------------------------------
DUMP(TEXT)
--------------------------------------------------------------------------------
FUNCTION TEMPJOINSTRINGS
Typ=1 Len=26: 70,85,78,67,84,73,79,78,32,84,69,77,80,74,79,73,78,83,84,82,73,78,
71,83,13,10 
```

13,10 最后是 \r\n

# .net - 如何找出用户以前的 Active Directory 用户名？

> ID：13234506
> 
> 赞同：2
> 
> 时间：2012-11-05T14:50:22.670
> 
> 标签：.net, active-directory

我正在为内部管理员 webapp 开发用户权限系统。我的想法是使用用户的 ActiveDirectory 指导来匹配用户的权限，而不是使用他们的用户名。这是在他们更改用户名的情况下完成的——我确信这会经常发生。

然后我开始怀疑：与其担心 guid 并使用它来解析他们的用户名，ActiveDirectory 是否会保留以前的用户名记录？

如果是这样，当未知用户尝试连接时，我们可以检查他们以前的用户名是否设置了权限，并使用他们的用户名自动更新数据库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:53:57.573

不，Active Directory 不保留以前用户名的历史记录。使用 GUID 绝对是您能做的最好的事情。

事实上，当我们公司几年前遇到类似问题时，我们最终构建了自己的“AD Snapshot Writer”，它会定期轮询 AD 以了解更改、计算增量并存储我们需要的属性的结果（用户姓名、电子邮件地址等）在具有[*时间*](http://en.wikipedia.org/wiki/Temporal_database)属性的数据库中。

# php - PHP移动具有特定格式的文件与移动所有文件

> ID：13234507
> 
> 赞同：0
> 
> 时间：2012-11-05T14:50:27.337
> 
> 标签：php

我在 /public_html/ 目录中有这些文件：

```
0832.php
1481.php
2853.php
3471.php
index.php 
```

我想将所有这些**XXXX.php**（总是 4 位格式）移动到目录 /tmp/，除了 index.php。如何使用 reg-ex 和循环来做到这一点？

或者，如何先将所有文件（包括 index.php）移动到 /tmp/，然后再将 index.php 放回 /public_html/，您认为哪个 CPU 消耗更少？

最后一件事，我发现本教程使用 PHP 移动文件：[http ://www.kavoir.com/2009/04/php-copying-renaming-and-moving-a-file.html](http://www.kavoir.com/2009/04/php-copying-renaming-and-moving-a-file.html)

但是如何移动目录中的所有文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:32:04.537

你可以`FilesystemIterator`使用`RegexIterator`

```
$source = "FULL PATH TO public_html";
$destination = "FULL PATH TO public_html/tmp";

$di = new FilesystemIterator($source, FilesystemIterator::SKIP_DOTS);
$regex = new RegexIterator($di, '/\d{4}\.php$/i');

foreach ( $regex as $file ) {
    rename($file, $destination . DIRECTORY_SEPARATOR . $file->getFileName());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:08:39.260

事实上 - 我去了[readdir 手册](http://php.net/manual/en/function.readdir.php)页，第一个要阅读的评论是：

```
loop through folders and sub folders with option to remove specific files. 

<?php 
function listFolderFiles($dir,$exclude){ 
    $ffs = scandir($dir); 
    echo '<ul class="ulli">'; 
    foreach($ffs as $ff){ 
        if(is_array($exclude) and !in_array($ff,$exclude)){ 
            if($ff != '.' && $ff != '..'){ 
            if(!is_dir($dir.'/'.$ff)){ 
            echo '<li><a href="edit_page.php?path='.ltrim($dir.'/'.$ff,'./').'">'.$ff.'</a>'; 
            } else { 
            echo '<li>'.$ff;    
            } 
            if(is_dir($dir.'/'.$ff)) listFolderFiles($dir.'/'.$ff,$exclude); 
            echo '</li>'; 
            } 
        } 
    } 
    echo '</ul>'; 
} 

listFolderFiles('.',array('index.php','edit_page.php')); 
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T15:09:53.267

最好的方法是直接通过文件系统来做，但如果你绝对必须用 PHP 来做，这样的事情应该做你想做的事——你必须改变路径，这样它们显然是正确的。请注意，这假设 public_html 目录中可能有其他文件，因此它只获取具有 4 个数字的文件名。

```
$d = dir("public_html");

while (false !== ($entry = $d->read())) {
    if($entry == '.' || $entry == '..') continue;
    if(preg_match("@^\d{4}$@", basename($entry, ".php")) {
        // move the file
        rename("public_html/".$entry, "/tmp/".$entry));
    }
}

$d->close(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T15:06:22.183

正则表达式实际上是多余的，因为我们只需要做一些简单的字符串匹配：

```
$dir = 'the_directory/';

$handle = opendir($dir) or die("Problem opening the directory");

while ($filename = readdir($handle) !== false)
{
    //if ($filename != 'index.php' && substr($filename, -3) == '.php')
    //   I originally thought you only wanted to move php files, but upon
    //    rereading I think it's not what you really want
    //    If you don't want to move non-php files, use the line above,
    //    otherwise the line below
    if ($filename != 'index.php')
    {
        rename($dir . $filename, '/tmp/' . $filename);
    }
} 
```

那么对于这个问题：

> 或者，如何先将所有文件（包括 index.php）移动到 /tmp/，然后再将 index.php 放回 /public_html/，您认为哪个 CPU 消耗较少？

它可以完成，并且在您的 CPU 上可能会稍微容易一些。但是，这并不重要有几个原因。首先，您已经通过 PHP 以一种非常低效的方式执行此操作，因此除非您愿意在 PHP 之外执行此操作，否则此时您不应该真正关注这对您的 CPU 造成的压力。其次，这会导致更多的磁盘访问（特别是如果源目录和目标目录不在同一个磁盘或分区上）并且磁盘访问比您的 CPU 慢得多。

# perl - 尝试使用 perl 脚本将用户的上次登录时间存储在数据库中

> ID：13234525
> 
> 赞同：0
> 
> 时间：2012-11-05T14:51:13.557
> 
> 标签：perl

我编写了一个代码，它尝试使用 perl 脚本存储用户的最后登录时间，并使用 dbmopen 将其存储在哈希中，但它没有获取更新的登录时间：- 我的代码如下：-

```
#!/usr/bin/perl -w
use DB_File;
use Time::localtime;
%last_good =();
%words = () ;
init_words();
print " What is your name ? \n";
$name=<STDIN>;
chomp($name);
 print "Hi $name , please Enter your secret password: \n" ;
 $passwd = <STDIN>;
 chomp($passwd);
 $i=1;
 while(! good_password($name,$passwd))
 {
  print " Wrong Password , Please Try Again : \n";
  $passwd=<STDIN>;
  chomp($passwd);
 }
print "assigning the last login time \n ";
dbmopen (%last_good,"lastdb",0777) || die "can't dbmopen lastdb: $!";
$last_good{$name} = localtime;   // update last login time if password correct
dbmclose (%last_good) || die "can't dbmclose lastdb: $!";
print "the last login time for :  $name is $last_good{$name} ";

sub init_words
{
 open(WORDLIST,"password.txt") || die " Can not Read the password.txt : $! \n";
 while(defined ($name = <WORDLIST>))
 {
  chomp($name);
  $name =~ s/\W.*// ;
  $name =~ tr /A-Z/a-z/ ;
  $password=<WORDLIST>;
  chomp($password);
  $words{$name}=$password;
  if(! defined $last_good{$name} )
  {
    dbmopen (%last_good,"lastdb",0777) || die "can't dbmopen lastdb: $!";
    $last_good{$name} = localtime;   // update login time for 1st login
    dbmclose (%last_good) || die "can't dbmclose lastdb: $!"; 
  }
  write;
 }
 close(WORDLIST) || die " Could not close the file : $! \n ";
} 
```

我要做的是更新或将第一次登录时间放入数据库，如果它不是他们的使用`if(! defined $last_good{$name} )`，然后如果它已经定义，当我第二次运行编时我希望它从数据库中读取，而不是尝试再次创建相同的. 但是当我`$last_good{$name} = localtime;`在第一次分配后尝试打印时，它不会打印登录名`localtime`，但它说它是未定义的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:13:15.200

我认为这只是你`dbmclose`在尝试打印值之前打电话。所以当然哈希是解开的。

# ios - 使用后退按钮添加 UINavigationController

> ID：13234526
> 
> 赞同：0
> 
> 时间：2012-11-05T14:51:22.253
> 
> 标签：ios, uinavigationcontroller

我无法弄清楚如何将导航控制器添加到我的 iOS 应用程序。我需要除了“主”屏幕之外的所有视图都有一个后退按钮，但我不知道如何添加它。

这是我的项目的链接： [https ://www.dropbox.com/s/sv0y3oh1aftxl95/KFBNewsroom%204.zip](https://www.dropbox.com/s/sv0y3oh1aftxl95/KFBNewsroom%204.zip)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:54:47.160

从所有 NIB 中删除导航栏并使用导航控制器（例如在 NeverBe 概述的应用程序委托中），然后通过 a`pushViewController`而不是`presentViewController`像您当前所做的那样转换到子控制器，您应该得到您的 "后退”按钮自动。您还需要删除对 的任何引用`dismissViewControllerAnimated`（如果有的话），因为您的后退按钮现在`popViewControllerAnimated`将为您执行。但是，如果您需要以编程方式在任何地方弹出，您可以使用`popViewControllerAnimated`.

在您的 NIB 中，您可能还想调整模拟指标，以便您可以设计带有图形表示的导航栏的 NIB，例如：

![导航栏的模拟指标](../Images/ee6e09c1c21c364f7164941e2946b31c.png)

[请参阅视图控制器目录](http://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewControllerCatalog/Chapters/NavigationControllers.html#//apple_ref/doc/uid/TP40011313-CH2-SW1)的导航控制器部分并参阅[`UINavigationController`类参考](http://developer.apple.com/library/ios/#documentation/uikit/reference/UINavigationController_Class/Reference/Reference.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:57:50.730

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    UINavigationController *nav = [[UINavigationController alloc] initWithRootViewController:[[KFBViewController alloc] initWithNibName:@"KFBViewController" bundle:nil]];
    self.window.rootViewController = nav;
    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];
    return YES; 
```

调用新的视图控制器

```
KFBYouTubeView *youtubeView = [[KFBYouTubeView alloc] initWithNibName:@"KFBYouTubeView" bundle:nil];
[self.navigationController pushViewController:youtubeView animated:YES]; 
```

**更新：**

添加自定义导航栏按钮的方法

```
- (void)customizeNavigationButtonWithType:(NavigationBarButtonType)type
                          normalImageName:(NSString *)normalImageName
                        selectedImageName:(NSString *)selectedImageName
                                 selector:(SEL)selector {
    UIImage *img = [UIImage imageNamed:normalImageName];
    UIImage *imgPressed = [UIImage imageNamed:selectedImageName];
    UIButton *customButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [customButton setTitleColor:[UIColor whiteColor] forState:UIControlStateNormal];
    [customButton setImage:img forState:UIControlStateNormal];
    [customButton setImage:imgPressed forState:UIControlStateHighlighted];
    customButton.frame = CGRectMake(0, 0, img.size.width, img.size.height);
    [customButton addTarget:self action:selector forControlEvents:UIControlEventTouchUpInside];

    UIBarButtonItem *btn = [[UIBarButtonItem alloc] initWithCustomView:customButton];
    switch (type) {
        case NavigationBarButtonTypeLeft:
            [self.navigationItem setLeftBarButtonItem:btn animated:YES];
            break;
        case NavigationBarButtonTypeRight:
            [self.navigationItem setRightBarButtonItem:btn animated:YES];
            break;
    }
} 
```

用法：

```
[self customizeNavigationButtonWithType:NavigationBarButtonTypeRight
                        normalImageName:@"create.png"
                      selectedImageName:@"create_highlight.png"
                               selector:@selector(pressButton:)]; 
```

# vmware - 无法将 ovf 加载到使用 vmware vphrere 导出创建的虚拟机中？

> ID：13234530
> 
> 赞同：5
> 
> 时间：2012-11-05T14:51:46.163
> 
> 标签：vmware, virtualbox, appliance

我正在尝试将其他人使用 VMware vSphere 创建的 VM 加载到 virtualbox 中。我得到了这 3 个文件，第一个是 xml ovf 文件，第二个包含 SHA1 总和，最后一个是 3.2GB vmdk：

```
myVM.ovf
myVM.mf
myVM-disk1.vmdk 
```

当我尝试`Import an Appliance`选择 ovf 文件时，我收到此错误：

```
Failed to import appliance /home/username/VirtualBox VMs/blah/blah/myVM.ovf.

&lt;vbox:Machine&gt; element in OVF contains a medium attachment for the disk image 58d8e82a-37a1-4c10-b3be-b53cdb213fbe but the OVF describes no such image.

Result Code: NS_ERROR_FAILURE (0x80004005)
Component: Appliance
Interface: IAppliance {3059cf9e-25c7-4f0b-9fa5-3c42e441670b} 
```

我确保菜单指向正确的 vmdk 文件，但仍然有问题。

有任何想法吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2015-09-10T16:44:19.330

在“导入”对话框中，尝试取消选中 USB 控制器和 CD/DVD 设备。

[![在此处输入图像描述](../Images/21aeeede062f6c9f5f4bf6d648426a2c.png)](https://i.stack.imgur.com/4E3iR.png)

如果这有帮助，您可以在之后启用它们。事实上，稍后您将需要它们来安装 Guest Additions。

这对我有帮助，可以从[http://dev.modern.ie/tools/vms/windows/安装 Microsoft 为不同 Internet Explorer 测试准备的虚拟机](http://dev.modern.ie/tools/vms/windows/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-09T23:46:44.673

我今天在 linux mint 上对运行 Oracle VM 4.3.1 的 Windows 7 vm 进行简单导出/导入时收到了类似的问题。我在 OVF 2.0 中导出，它生成了一个 .ova 文件。导入图像时，我收到了几乎相同的错误消息。我假设图像是使用 Oracle VM 制作的。

“无法导入设备 /home/val/Desktop/win7.ova”...“OVF 描述没有这样的图像”

修复：我所要做的就是将 .ova 文件重命名为 .ovf；您可能还必须将 .ovf 扩展名更改为 .ova。还要确保您是文件的所有者 (chown) 并且您具有正确的权限 (chmod)。这对我有用，它可能对你有用。

我在这里找到了这个修复：[https ://www.virtualbox.org/ticket/9414](https://www.virtualbox.org/ticket/9414)

# php - 将远程 XML Feed 保存为本地文件... 损坏？

> ID：13234532
> 
> 赞同：0
> 
> 时间：2012-11-05T14:51:51.357
> 
> 标签：php, xml

我有一个输出 XML 提要的外部 Web 服务。
我需要获取 XML 提要并将其保存为本地文件..（大约 3mb）

目前我使用以下代码：

```
<?PHP
$url = "https://services.boatwizard.com/bridge/events/ae0324ff-e1a5-4a77-9783-f41248bfa975/boats?status=on";
copy($url, "download.xml");
?> 
```

及其工作...它将 XML 提要保存为本地文件。但是，在“返回”或“换行符”已被剥离的意义上，它略有损坏。由于这些更改，读取本地 XML 的脚本无法与 download.xml 一起使用。

例如..它应该看起来像这样：

```
<ApplicationArea>
<Sender>
<LogicalID>IMT</LogicalID>
<TaskID>Inventory Sync</TaskID>
<CreatorNameCode>IMT Exporter</CreatorNameCode>
<SenderNameCode>IMT</SenderNameCode>
</Sender> 
```

而不是这样...

```
<ApplicationArea><Sender><LogicalID>IMT</LogicalID><TaskID>Inventory Sync</TaskID><CreatorNameCode>IMT Exporter</CreatorNameCode><SenderNameCode>IMT</SenderNameCode></Sender> 
```

我不是程序员，不知道如何解决这个问题，或者是否可以！如果我要打开 Chrome 并浏览到 xml 提要，将其保存为 .xml 并上传到服务器，它工作正常。

有人可以帮我编写一个脚本，它可以安全地下载 XML 提要而不会损坏它吗？！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:09:41.057

不要相信这里有腐败。

拉起**视图源**：[https ://services.boatwizard.com/bridge/events/ae0324ff-e1a5-4a77-9783-f41248bfa975/boats?status=on](https://services.boatwizard.com/bridge/events/ae0324ff-e1a5-4a77-9783-f41248bfa975/boats?status=on)

如您所见，该源代码并没有在块之后完全添加换行符。我没有看到您的示例块`(<ApplicationArea>)`，但是有很多建议您认为正确的空格只是 chrome 引入的格式，而不是源文件。

无论如何，不​​知道为什么要这样格式化（除非您是字符串解析而不是 XML），但解决此问题的方法是使用**tidy**扩展名（必须在 PHP 中配置）。

```
$xml = file_get_contents( "https://..." ); // your url here

// look up other tidy options to get a satisfactory format
$options = array(
    "input-xml" => true,
    "indent" => true,
    "wrap" => "160",
    "output-xml" => true,
);

$tidy = tidy_parse_string($xml, $options);

$tidy->cleanRepair(); 
```

此时，保存或预览 $xml，您将拥有一个更简洁的 XML 版本。例如：（左=之前，右=整理之后）

![在此处输入图像描述](../Images/5a8d5a79037d4b1fc9b89a017b34860c.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:02:30.353

这不是“腐败”。从我下载这个 url 中可以看出，源 url 并没有一致地使用换行符，并且它确实有很长的 XML 没有换行符。

在任何情况下，您担心的空白对 XML 来说并不重要，并且任何因该空白而中断的脚本很可能无法正确处理 XML。（例如，它可能使用正则表达式而不是适当的 XML 解析器。）

该`copy()`函数将为您提供从 url 检索到的内容的逐字节副本——它不会通过删除换行符来“破坏”它（如您所说）。错误可能在于您的处理脚本，由于换行符的这种差异，它不应该“中断”。

# c - 有没有一种简单的方法可以从文件中读取未经验证的十进制值？

> ID：13234535
> 
> 赞同：3
> 
> 时间：2012-11-05T14:52:07.957
> 
> 标签：c, validation, file-io, scanf

假设我有一个十进制数字文件，它*应该*是可以放入的值`int`，但我想以编程方式验证该文件的内容以检查溢出。有没有一种简单的方法来检查是否有任何数字会溢出整数？

前任。文件 -

```
name:  test.txt
value: 4343214321423142314 
```

如果我要循环并做`fscanf(fd, "%d", &myint)`我们将返回一个成功的指示，但存储在 myint 中的数字将不正确。

同样，如果我将它读入一个字符数组`fscanf(fd, "%s", &mystr)`并盲目调用`atoi(mystr)`它会返回成功但结果不正确。

鉴于将其读入字符串的第二个示例，可以执行以下操作：

```
char buf[11] = {'\0'};
sprintf(buf, "%d", INT_MAX);

fscanf(fd, "%s", &mystr); 
if(strcmp(mystr, buf) > 0)
    // handle error case 
```

但是有没有更简单的方法可以做到这一点而不需要额外的数组和字符串比较功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:55:01.137

也许您可以将整数读入字符串，然后使用`strtol`. 然后，根据结果的类型，您有两种解决方案：

*   `long`: 如果返回`LONG_MIN`or `LONG_MAX`，你可以检查`errno`该值`ERANGE`是否溢出；
*   `int`：如果它返回一个大于`INT_MIN`或小于的数字`INT_MAX`，您可以安全地将您的数字放入一个`int`变量中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T14:57:24.310

为什么不使用

```
fscanf(fd, "%d%n%c", &myInt, &pos, &nextChar); 
```

然后检查这`pos`是您期望的位置，并且下一个字符不是数字？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T14:55:35.510

是的，使用`[strtol()](http://linux.die.net/man/3/strtol)`; 如果转换由于溢出而失败，它具有明确定义的行为。如果您知道传入的值实际上是无符号的，请使用`[strtoul()](http://linux.die.net/man/3/strtoul)`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-05T14:55:44.670

根据[scanf(3)](http://linux.die.net/man/3/scanf)手册页，转换将失败并`errno`设置为

> ERANGE
> 
> 整数转换的结果将超过可以存储在相应整数类型中的大小。

在你的情况下。所以我只检查`scanf`or的结果`fscanf`并使用`errno`.

# facebook - 如何从发布流帖子中获取洞察数据？

> ID：13234538
> 
> 赞同：2
> 
> 时间：2012-11-05T14:52:10.040
> 
> 标签：facebook, facebook-opengraph, facebook-apps, posts, facebook-insights

我有一个实验性的 facebook 应用程序，它以 publish_stream 权限发布到用户墙上。我想从这些帖子中获取洞察数据，例如：**帖子印象**、喜欢、评论、**创建的故事**等。在 FQL 文档中，我看不到应用程序的这种见解，只有页面。

**我可以为我的应用程序获取此类洞察数据吗？**我应该使用 Open Graph 操作和对象来代替发布流帖子吗？

Open Graph 操作的优缺点是什么？我发现发布流帖子更容易创建，因为 Open Graph 操作需要批准。

请给我一些想法！

谢谢！

# excel - 在 Excel 中重命名单元格

> ID：13234540
> 
> 赞同：2
> 
> 时间：2012-11-05T14:52:26.770
> 
> 标签：excel, rename

我不知道这是否可能，但有人建议我在这里发帖和最有可能得到答案的地方。

我在excel中有四列如下

```
A: all product id's
B: reference No.
C: selected product id's
D: product codes. 
```

我想要 excel 做的是在列 A 中搜索列 C 中的 id，如果匹配，则从列 D 中的搜索中将其重命名为列 D 中的相应行。我不能轻松地使用 vlookup 作为A 列中的产品 ID 最多可重复 8 次。

我希望这是有道理的，我会尽力回答所有问题。除了基础知识，我对excel一无所知，所以如果有人能对此有所了解，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:00:50.207

尝试这个：

在 之前插入一个新列`A`。所以现在你所有的列都上移了一个，即你`A`的现在`B`等。

现在在单元格中`A1`（新插入的`A1`，而不是现在的原始 A1 `B1`）

```
=VLOOKUP(B1, $D$1:$E$1000, 2, 0) 
```

`1000`你的最后一行在哪里。并将公式向下拖动。

您尚未指定如果 ID 在 col`A`但不在 col中会发生什么`C`。如果您希望它保持在 Col 中的状态，请`A`改用以下公式：

```
=IF(ISNA(VLOOKUP(B1, $D$1:$E$1000, 2, 0)), B1, VLOOKUP(B1, $D$1:$E$1000, 2, 0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:19:14.750

所以你的数据是这样的？我不明白你的预期结果是什么？

```
A  B    C  D    expected result
1  101  1  201  ?
1  102  4  204
2  103
3  104
3  105
4  106 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:04:43.753

这应该可以解决问题：

```
Sub test()

LastRowA = Cells(Rows.Count, "A").End(xlUp).Row
LastRowC = Cells(Rows.Count, "C").End(xlUp).Row

For i = 1 To LastRowA
    For j = 1 To LastRowC
        If Range("A" & i).Value = Range("C" & j).Value Then
            Range("D" & i).Value = Range("C" & j).Address(False, False)
        End If
    Next j
Next i

End Sub 
```

# java - 在 xtext 启动时执行代码？

> ID：13234543
> 
> 赞同：3
> 
> 时间：2012-11-05T14:52:35.570
> 
> 标签：java, xtext, ecore, eclipse-atl

我正在做一个项目，我们使用 ATL 将一个 ECore 模型实例转换为另一个。我们设置了一个 XText 编辑器来处理目标模型，并希望在启动时将转换后的模型直接加载到编辑器中。目前，我们将实例作为磁盘上的 XMI 文件。

这可能吗？如果是这样，我们应该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T10:48:12.353

这是一个非常好的问题。我认为目前还没有适用于此任务的 eclipse 插件，但可能很容易创建。该插件必须执行以下步骤：

*   在首选项中配置打开文件时使用的转换
*   打开文件时加载源模型
*   将其转换为目标模型（有关不完整的 java 代码，请参阅[ATL 论坛）](http://www.eclipse.org/forums/index.php/t/438623/)
*   打开目标模型的编辑器
*   保存编辑器时，您需要将目标模型转换回源模型并保存

我不知道 Eclipse API 是否也支持内存资源，因此您不必将目标模型作为文件存储在磁盘上。

# php - 动态绑定jquery回调函数

> ID：13234544
> 
> 赞同：2
> 
> 时间：2012-11-05T14:52:44.263
> 
> 标签：php, javascript, jquery, ajax

我确定我想太多了……

文件 A 有一个空容器 div，单击按钮，将数据加载到该 div...

文件 A 有一个按钮，我想从上面的 jquery 返回绑定一个函数。

AJAX 文件

```
echo json_encode(array('callback' => 'javascriptFunction')); 
```

“javascriptFunction”是一个可以调用的有效函数。我如何或可以绑定该功能。

JAVASCRIPT

```
$.ajax({
    type: 'POST',
    dataType: 'json',
    url: "../ajax.php",
    data: '&m=loadExternalData&f='+ module,
    success: function(resultData) {
        $('#externalFieldsetTitle').html(resultData.title);
        $('#externalSaveButton').bind('click', function() {
            resultData.callback;
        });
    }
}); 
```

我传回的不仅仅是“回调”，但对于这个例子，我认为不需要它。

基本上，我将外部模块加载到一个 div 中，并希望允许它们指定它们的保存功能并将其传入，以便核心保存按钮将在多个外部加载的文件上工作。我相信这有道理吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:11:24.990

尝试这样的事情：

```
$('#externalSaveButton').bind('click', function() {
            window[resultData.callback]();
        }); 
```

或直接：

```
$('#externalSaveButton').bind('click', window[resultData.callback]); 
```

（在这种情况下，它必须在全局范围内）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:11:07.190

```
$(document).ready(function() {
$('#externalSaveButton').live('click', function(resultData) {
            resultData.callback;
        });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:13:38.897

ajax 请求可能会返回一个字符串作为函数。您可以做的是尝试将其作为`Function`构造函数传递：

```
var callback = new Function(resultData.callback);
$('#externalSaveButton').bind('click', callback); 
```

但这一切都取决于`resultData.callback`格式化的方式。

# javascript - AngularJS $resource 的 jsonp 请求

> ID：13234546
> 
> 赞同：3
> 
> 时间：2012-11-05T14:52:46.457
> 
> 标签：javascript, angularjs

我在 AngularJS 中定义了以下 2 个服务。两者都应该返回 JSONP，因为我正在执行跨域请求。

服务一：

```
angular.module('ServiceA', ['ngResource']).
  factory('A', function ($resource) {
     return $resource('url/offers', {},
       {
         get: { method: 'JSONP', params: {property_code: 'DEMO_ERFOLGX', adults: '2',
                callback: 'JSON_CALLBACK'} }
       }
    );
  }); 
```

服务乙：

```
angular.module('ServiceB', ['ngResource']).
  factory('B', function ($resource) {
     return $resource('url/search.json', {},
       {
         get: { method: 'JSONP', params: {property_code: 'DEMO_ERFOLGX', adults: '2',
                callback: 'JSON_CALLBACK'} }
       }
    );
  }); 
```

在我的控制器中，我将结果绑定到我的范围：

```
$scope.foo = A.get();  
$scope.bar = B.get(); 
```

根据我的 console.log() 输出，B 返回 JSON 格式的预期结果，而 A 返回类似：

```
SyntaxError: invalid label
{"DEMO_ERFOLGX":{"offers":[{"checkin":"2012-12-01","checkout" 
```

我错过了什么吗？为了从 A 接收正确的 JSON，我需要做什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T16:23:04.303

您的代码看起来令人困惑。这两个服务都称为 A，但您使用不同的模块名称。除此之外，您的第二个服务调用 JSON 文件而第一个不调用是否重要？

我会尝试以下方法：

```
angular.module('app.services', ['ngResource'])
  .factory('ServiceA', function ($resource) {
     return $resource('url/offers', {},
       {
         get: { method: 'JSONP', params: {property_code: 'DEMO_ERFOLGX', adults: '2',
                callback: 'JSON_CALLBACK'} }
       }
    );
  });
  .factory('ServiceB', function ($resource) {
     return $resource('url/search.json', {},
       {
         get: { method: 'JSONP', params: {property_code: 'DEMO_ERFOLGX', adults: '2',
                callback: 'JSON_CALLBACK'} }
       }
    );
  }); 
```

# java - 如何在java中的变量声明中使用特殊字符？

> ID：13234550
> 
> 赞同：0
> 
> 时间：2012-11-05T14:52:57.673
> 
> 标签：java, sql

是否可以使用特殊字符声明 java 属性名称，例如：

```
private String var/name;
private int one+one; 
```

我问这个问题是因为我需要从 DB 中检索数据，其一个列的名称是`annoces/status`，并且我需要使用 sql 查询（不是 hql 或条件）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:59:41.627

这是不可能的：

> 变量名区分大小写。变量的名称可以是任何合法标识符——**长度不限的 Unicode 字母和数字序列，**以字母、美元符号“$”或下划线字符“_”开头。但是，惯例是始终以字母开头变量名，而不是“$”或“_”。此外，按照惯例，从不使用美元符号字符。您可能会发现在某些情况下自动生成的名称将包含美元符号，但您的变量名称应始终避免使用它。下划线字符也有类似的约定；虽然以“_”开头的变量名称在技术上是合法的，但不鼓励这种做法。不允许使用空格。

我不明白你为什么需要那个。

编辑

您可以使用类似 bbr.sendQuery("Select Status, Name, **Annonces/Sta AS annoncesSta** , From table ",MyObject.class); 使用**AS**，您可以更改在结果中收到的列的名称。所以你在java类中的属性可以是“annoncesSta”。

无论如何，列名都带有“/”，名称的最佳做法是：

*   广播电台
*   宣布_sta

大多数映射器会自动处理这些名称。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T15:05:19.883

绝对不需要将 Java 变量命名为与某些数据库中某些表中的列名相同的名称。

如果您尝试在某些 Map 中存储列值，则 map 键可以具有您想要的任何特殊字符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T15:24:39.630

你不能做你所要求的 - 正如其他人所详述的那样。我建议的解决方案是整理数据库中的列名，以便它们遵循正常标准，然后您可以在 java.util 中使用相同的名称。

按照正常标准，我的意思是：

```
alphanumeric characters or the following special characters: $ _ # 
```

# c++ - NSSearchPathForDirectoriesInDomains c++ 等效

> ID：13234552
> 
> 赞同：1
> 
> 时间：2012-11-05T14:53:13.600
> 
> 标签：c++, objective-c, path

在objectiv-c上，我有以下方法：

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES); 
```

它在模拟器上返回应用程序文件夹：

```
/Users/ademar/Library/Application Support/iPhone Simulator/6.0/Applications/78A001F6-DDDE-4F6D-B762-8AAF42F1A1E3/Documents 
```

我在 C++ 上也需要同样的方法，但我没有找到，在 C++ 上有类似的方法吗？

# knockout.js - 自定义绑定，带有绑定和初始化 - knockout.js

> ID：13234555
> 
> 赞同：2
> 
> 时间：2012-11-05T14:53:21.850
> 
> 标签：knockout.js, ko-custom-binding

我们正在对由多个视图模型组成的 SPA 使用敲除，以处理可见的视图，我们已经包装了 div，在其中我们[用 bindings](http://knockoutjs.com/documentation/with-binding.html)绑定了“子”视图模型。

我们看到的问题是，当切换视图可见性时，每次都会执行其中的自定义绑定，包括初始化和更新。

当我们有一个基于此[jqdialog 绑定](http://jsfiddle.net/rniemeyer/Gt5Hw/)的绑定时，这会给我们带来一个问题，并且在每次初始化时都会创建一个新对话框并将其附加到我们的 DOM 中，但我们没有简单的方法知道何时应该删除它。

或多或少是一个问题，即我们是否应该重新排列我们架构的这一部分，或者我们的绑定中是否缺少某些东西。

简单视图：

```
<div id="view">
  <button data-bind="click: on">On</button>
  <button data-bind="click: off">Off</button>

  <div data-bind="with: visible">
    <span data-bind="foo: ''">foo</span>
    visible
  </div>

</div>​​​​​​​​​​ 
```

JS：

```
ko.bindingHandlers.foo= {
  init: function() {
    alert("init");
  },
  update: function() {
    alert("update");
  }
}

var vm =(function() {
  var self = this;
  self.visible = ko.observable(false);

  self.on = function() { self.visible(true); };
  self.off= function() {self.visible(false); };

})();

ko.applyBindings(vm, document.getElementById("view")); 
```

​</p>

一个小[小提琴](http://jsfiddle.net/rnhMV/6/)大致显示了我们的错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:13:36.370

您的问题是您没有切换可见性。当您使用时，`with`您每次都将相同的元素删除并重新插入到 DOM 中。当然，这会导致重新创建绑定并`init`再次触发函数。

如果您只想隐藏/显示，请改用可见绑定。

所以如果你这样做：

```
<div data-bind="visible: visible">
    <span data-bind="foo: ''">foo</span>
    visible
</div> 
```

您会在页面加载时看到绑定初始化，并且在显示/隐藏时不会再次初始化。见[这里](http://jsfiddle.net/rnhMV/8/)。

# python - 使用 memcache.add() 而不是 set()

> ID：13234556
> 
> 赞同：5
> 
> 时间：2012-11-05T14:53:21.763
> 
> 标签：python, google-app-engine, memcached

通常我会这样做：

```
if not memcache.get('mykey'):
   memcache.set('mykey', item) 
```

但是，今天我看到了`memcache.add()`，它似乎仅在项目尚不存在时才添加项目。那么这是否等同于我上面的代码？我可以用 替换上面的代码`memcache.add()`吗？

此外，更重要的是，我正在使用 AppStats，并且在 RPC 调用跟踪下，我可以查看我的请求是否调用`memcache.set()`or`get()`或`datastore.put()`or `get()`。使用上面的 2 行代码时，我看不到任何`memcache.set()`，这是预期的。但是，即使返回 false（意味着未插入新项目） ，仅使用`memcache.add()`（不检查项目是否已存在）总是调用。为什么会这样？`memcache.set()``memcache.add()`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-06T12:08:42.087

您当前的代码有一个竞争条件：在检查内存缓存中是否存在值并插入它之间，另一个进程可能已经插入了一个值，您现在将覆盖该值。使用`memcache.add`不会受到这种竞争条件的影响。

我不确定你的第二个问题是什么意思；调用`memcache.add`应该只导致 add 调用，而不是 set 调用。你能包括你在这种情况下运行的代码吗？

# java - 为 Java derby 加载驱动程序时出错？

> ID：13234560
> 
> 赞同：0
> 
> 时间：2012-11-05T14:53:32.537
> 
> 标签：java, derby

我想知道为什么我不能在java数据库程序中做最简单的一步！我以前做过很多次，这次我正在做接缝程序，但它不起作用。

我正在尝试以嵌入式模式创建数据库。我在 seam 目录中找到了 derby.jar 文件。这是代码，之后是错误：

```
public static void main(String[] args) throws SQLException {

     String driver ="org.apache.derby.jdbc.EmbeddedDriver";
     String url= "jdbc:derby:MyDatabase";

     try {

        Class.forName(driver).newInstance(); 

    } catch (InstantiationException e1) {
        e1.printStackTrace();
    } catch (IllegalAccessException e1) {
        e1.printStackTrace();
    } catch (ClassNotFoundException e1) {
        e1.printStackTrace();
    }

    Connection conn = DriverManager.getConnection(url+";create=true");   
} 
```

这是错误：

```
java.lang.ClassNotFoundException: org.apache.derby.jdbc.EmbeddedDriver
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.forName0(Native Method)
    at java.lang.Class.forName(Class.java:169)
    at Data.main(Data.java:16)
Exception in thread "main" java.sql.SQLException: No suitable driver found for jdbc:derby:MyDatabase;create=true
    at java.sql.DriverManager.getConnection(DriverManager.java:602)
    at java.sql.DriverManager.getConnection(DriverManager.java:207)
    at Data.main(Data.java:27) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:04:58.270

问题是因为未配置类路径：

要在其嵌入模式下使用 Derby，请将您的 CLASSPATH 设置为包含下面列出的 jar 文件：

> Windows：C:> 设置 CLASSPATH=%DERBY_INSTALL%\lib\derby.jar;%DERBY_INSTALL%\lib\derbytools.jar;。
> 
> UNIX：$ export CLASSPATH=$DERBY_INSTALL/lib/derby.jar:$DERBY_INSTALL/lib/derbytools.jar:。

[http://db.apache.org/derby/papers/DerbyTut/install_software.html#derby_configure](http://db.apache.org/derby/papers/DerbyTut/install_software.html#derby_configure)

# php - 你能指定给函数的参数的数据类型吗（PHP5）

> ID：13234562
> 
> 赞同：0
> 
> 时间：2012-11-05T14:53:45.023
> 
> 标签：php, function, arguments

我想指定可以赋予函数的数据类型。

在此演示代码（作为示例）中，我想指定给`"__construct()"`函数的参数的数据类型，以便它只`INT`需要`$id`和的`Objects`类型`"example2"`。`$some_object`

你知道我怎么能做到这一点吗？

```
<?php

    class example1{

        private $id;
        private $example2;
        function __construct($id,$some_object){
            $this->id = $id;
            $this->object = $some_object;
        }

        function do_something(){
            $this->example2->moep(); 
        }

    }
    class example2{
        public function moep(){
            print("MOEP!!!");
        }
    }
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T14:55:54.747

你有类型提示： http: [//php.net/manual/en/language.oop5.typehinting.php](http://php.net/manual/en/language.oop5.typehinting.php)

但是，引用手册：

> 类型提示不能用于标量类型，例如 int 或 string。
> 特征也是不允许的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:56:06.987

是和不是。

PHP5 中有一些类型提示，但它不允许标量类型。所以对于`int`and没有`string`，但对于其他几乎所有东西都是肯定的（包括`array`，奇怪的是）。

见： http: [//php.net/manual/en/language.oop5.typehinting.php](http://php.net/manual/en/language.oop5.typehinting.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:56:02.853

在 php 中，您只能键入提示对象（和数组）。您不能输入提示标量：

[http://php.net/manual/en/language.oop5.typehinting.php](http://php.net/manual/en/language.oop5.typehinting.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T15:23:49.020

检查构造函数中的类型并在需要时抛出异常：

```
function __construct($id,$some_object){
    if (!is_int($id)) throw new UnexpectedValueException("Argument 1 must be an integer");
    if (!is_object($some_object)) throw new UnexpectedValueException("Argument 2 must be an instance of any object");

    $this->id = $id;
    $this->object = $some_object;
} 
```

# c - 队列中的 MQGET 大消息 (> 4MB) 导致错误 2010

> ID：13234565
> 
> 赞同：3
> 
> 时间：2012-11-05T14:53:55.850
> 
> 标签：c, unix, ibm-mq, aix

我正在尝试使用 ANSI-C 和 MQGET 函数从队列中接收消息。问题是我总是收到错误 2010 (MQRC_DATA_LENGTH_ERROR)。

我发现这个错误与 MQGET 调用的参数 7 (DataLength) 有关。我队列上的消息有 7157460 字节。我用于 MQGET 的通道将“最大消息长度”设置为 104857600（以及保存消息的队列）。

我什至使用这个例子中的 MQGET：http: [//www.capitalware.biz/dl/code/c/msg2file.zip](http://www.capitalware.biz/dl/code/c/msg2file.zip)

而且我仍然以错误 2010 告终。我做错了什么？我应该以某种方式增加 MQSERVER 环境变量中消息的最大大小吗？

MQGET 调用：

```
/* ... */
MQLONG   messlen;            /* message length received       */

MQGET(Hcon,                  /* connection handle                 */
        Hobj,                /* object handle                     */
        &md,                 /* message descriptor                */
        &gmo,                /* get message options               */
        buflen,              /* pBuffer length                    */
        pBuffer,             /* pointer to message buffer         */
        &messlen,            /* message length                    */
        &CompCode,           /* completion code                   */
        &Reason);            /* reason code                       */ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T15:28:44.243

我懂了！答案是使用 MQCONNX 调用连接到队列管理器。

例子：

```
#include <cmqxc.h>
/* ... */
MQCNO   mqcno = {MQCNO_DEFAULT} ; /* Connection options */
MQCD    mqcd  = {MQCD_CLIENT_CONN_DEFAULT};  /* Channel Defs */

/* ... */
mqcd.MaxMsgLength = 104857600L; /* 100 MB */

MQCONNX(mQueueManager.Name,
     &mqcno,
     &mQueueManager.ConnectionHandle,
     &mQueueManager.CompletionCode,
     &mQueueManager.ReasonCode); 
```

它就像一个魅力！

但请记住 - 如果您发现自己需要增加最大消息大小 - 三思而后行。设计可能有问题。换句话说 - MQ 不应该用于传输大消息。MQ 文件传输版是当时的解决方案之一。

# c# - 在 Silverlight 中编辑 XML 文件不起作用，但为什么？

> ID：13234566
> 
> 赞同：3
> 
> 时间：2012-11-05T14:53:56.357
> 
> 标签：c#, xml, silverlight, file, editing

我试图在 Silverlight 元素中打开和编辑 XML 文件，但我无法编辑它。

我的 XML 文件 (Customers.xml) 如下所示：

```
<?xml version="1.0"?>
<customers>
  <customer>Joe</customer>
  <customer>Barrel</customer>
</customers> 
```

还有我的 C# 逻辑：

[...]

```
XDocument xdoc = XDocument.Load("Customers.xml");
            xdoc.Root.Add(new XElement("customer", "Stephano")); //here I wish it to add Stephano as a customer.
            using (var file = IsolatedStorageFile.GetUserStoreForApplication())
            {
                using (var stream = file.OpenFile("Customers.xml", FileMode.Create))
                {
                    xdoc.Save(stream); //and here I wish it to save it to the file
                }
            }

PopulateCustomersList(); 
```

//这里是一个用于显示XML文件内容的函数，它是：

```
private void PopulateCustomersList()
        {
            XmlReaderSettings settings = new XmlReaderSettings();
            settings.XmlResolver = new XmlXapResolver();
            XmlReader reader = XmlReader.Create("Customers.xml");
            reader.MoveToContent();

            while (reader.Read())
            {
                if (reader.NodeType == XmlNodeType.Element && reader.Name == "customer")
                {
                    //OutputTextBlock.Text = reader.GetAttribute("first");
                    customersList.Items.Add(new ListBoxItem()
                    {
                        Content = reader.ReadInnerXml()
                    });
                }

                if (reader.NodeType == XmlNodeType.EndElement && reader.Name == "customers")
                {
                    break;
                }
            }

            reader.Close();
        } 
```

在我的 xaml 文件中，我有

```
<ListBox x:Name="customersList" /> 
```

所以它会显示出来，但问题是只有 Joe 和 Barrel 才能显示出来，Stephano 在哪里？

我从各种教程和论坛中获得了这段代码，我不太明白，我知道这样做可能很奇怪，但我就是不知道该怎么做，我正在尝试各种各样的事情. 最有趣的是，我在很多论坛上找到了一种保存文件的方法，看起来像这样： `xdoc.Save("Customers.xml");`但是我的 Visual Studio 说参数是错误的，因为它是一个字符串。我该如何告诉他这是一个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T16:30:35.343

好的：

.Save() 保存当前的 XDocument，IE 它将保存您在此处加载的 XML 文件

```
XDocument xdoc = XDocument.Load("Customers.xml"); 
```

所以它应该是这样的（这是在没有任何知识的情况下编码的，而不是你提供的）

```
XDocument xdoc = XDocument.Load("Customers.xml");
        xdoc.Root.Add(new XElement("customer", "Stephano"));
xdoc.Save();
PopulateCustomersList(xdoc);

private void PopulateCustomersList(XDocument xdoc)
     {
         foreach(XElement in element xdoc.Root.Elements("customer"))
         {
            customersList.Items.Add(new ListBoxItem()
             {
                Content = (string)element;
             }
         }
     } 
```

# collections - Backbone Collection 多个 on() 监听器

> ID：13234571
> 
> 赞同：0
> 
> 时间：2012-11-05T14:54:03.170
> 
> 标签：collections, backbone.js, listener

在我看来，我有多个听众`initialize`，看起来像这样：

```
this.collection.on('reset', this.render);

this.collection.on('add', this.render);

this.collection.on('change', this.render); 
```

我很好奇是否有办法将它们全部结合起来，因为它们都会发射`render`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T14:59:04.910

可能你可以试试

```
this.collection.on("reset add change", this.render); 
```

看看[这个](http://backbonejs.org/#Events-on)。它可以在此处显示，但不确定是否将其与默认集合事件绑定。

# php - 使用旧的 codeigniter 站点设置魔术引号 PHP 错误

> ID：13234574
> 
> 赞同：3
> 
> 时间：2012-11-05T14:54:10.640
> 
> 标签：php, codeigniter, deprecated

我们的一个旧的 codeigniter 站点最近遇到了以下问题 - 任何人都可以提出解决此问题的最佳方法吗？

```
<h4>A PHP Error was encountered</h4>
<p>Severity: 8192</p>
<p>Message:  Function set_magic_quotes_runtime() is deprecated</p>
<p>Filename: codeigniter/CodeIgniter.php</p>
<p>Line Number: 60</p> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:24:53.370

我刚刚决定用以下内容替换该行： ini_set("magic_quotes_runtime", 0);

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T15:28:41.360

除了注释掉该文件的第 60 行之外，如果您看到此错误，您应该真正考虑在生产环境中禁用错误​​输出。

错误有时会为攻击者提供重要信息，例如缩小版本号的信息。

# r - 如何在R中象征性地表示矩阵

> ID：13234575
> 
> 赞同：0
> 
> 时间：2012-11-05T14:54:24.543
> 
> 标签：r, formula

考虑以下矩阵

```
> A
   a  b  k
a  1  0  0
b  0  1  0
c  2  3  0
d -1 -1 10 
```

它将被解释为一系列方程：

```
a = a
b = b
c = 2*a + 3*b
d = 10 - a - b 
```

我有一个接受这样一个矩阵作为参数的函数，但是如果该函数可以接受方程本身而不是矩阵并使用通过公式提供的信息构建矩阵，那就太好了。我一直在阅读有关各种与公式相关的函数的 R 文档，包括和其他函数`terms()`，`model.matrix()`并且看起来我想做的事情不能以直接的方式完成。

你认为，通过合理的工作量是否可行，还是我应该放弃这个想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:32:17.890

我也怀疑有另一种方法可以解决您的问题。但是，如果您真的想这样做，您可以将您的方程存储为`expression`, 并`eval`在适当的时候存储它们。这是一个例子：

```
build.matrix<-function(m, c.expr, d.expr) {
  rbind(m,eval(c.expr),eval(d.expr))
}

a<-c(1,0,0)
b<-c(0,1,0)
m<-rbind(a,b)
c <- expression(2*m['a',]+ 3*m['b',])
d <- expression(10 - m['a',] - m['b',])

build.matrix(m,c,d)

#   [,1] [,2] [,3]
# a    1    0    0
# b    0    1    0
#      2    3    0
#      9    9   10 
```

# ruby-on-rails - 如何在 Ruby on Rails 视图中路由您的子文件夹？

> ID：13234576
> 
> 赞同：7
> 
> 时间：2012-11-05T14:54:28.053
> 
> 标签：ruby-on-rails, ruby, views, routes, subdirectory

谁能阐明如何路由您的子文件夹的 .html.erb 文件？这是这样放置的：

```
view/pages/en/index.html.erb 
```

为了路由这个，我在 route.rb 上做以下事情

```
match ':lang/index', :to => 'pages/en#index' 
```

对于链接代码，我在标题上有这个

```
<%= link_to "Home", index_path %> 
```

我得到的错误是

```
 Routing Error
 uninitialized constant Pages 
```

路线：

![在此处输入图像描述](../Images/618cc10baa18acf14da94929d236666a.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:05:55.673

命名空间将在子文件夹中组织您的代码和视图：http: [//guides.rubyonrails.org/routing.html#controller-namespaces-and-routing](http://guides.rubyonrails.org/routing.html#controller-namespaces-and-routing)

如果只需要以`views/pages`这种方式组织的文件夹，您可以执行以下操作`PagesController`：

```
render "#{I18n.locale}/#{action_name}" 
```

一个问题：你为什么喜欢`view/pages/en/index.html.erb`而不是`view/pages/index.en.html.erb`？这将开箱即用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T18:31:16.507

**更新** 这是 route.rb 的工作原理：-

```
match ':lang/index', :to => 'pages#index' 
```

在您的控制器上渲染它：-

```
def index
  render "pages/en/index"
end

def about
  render "pages/#{params[:lang]}/about"
end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T15:08:32.450

AFAIK，没有办法路由到视图。您可以将 URL 路由到控制器的操作。该操作负责呈现视图。

您可以使用命名空间路由将资源放在子文件夹中。

...

我想写的东西已经由@TuteC 写了。只需点击该链接，是的，正如他解释的那样，您可以开箱即用地获得特定于语言的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-09-20T02:56:14.790

我为此苦苦挣扎了一段时间，终于找到了一个简单的解决方案：

配置/路由.rb

```
get 'pages/:first/:second/:third' => 'pages#show' 
```

然后在你的 PagesController

```
def show
    render "/pages/#{params[:first]}/#{params[:second]/#{params[:third]}"
end 
```

然后在您的视图中，它将呈现以下任何内容：

```
pages/index => pages/index.html.erb
pages/index/en => pages/index/en.html.erb
pages/foo/bar/hello-world => pages/foo/bar/hello_world.html.erb 
```

最好的一点是它很简单，您可以无限期地扩展它。如果您所做的只是渲染基本模板，则可以轻松清理视图文件夹。

# java - 何时在 API 中使用 CharSequence

> ID：13234584
> 
> 赞同：24
> 
> 时间：2012-11-05T14:54:57.290
> 
> 标签：java, charsequence

我正在为一个包设计一个公共接口（API）。我想知道，我应该`CharSequence`一般使用而不是`String`. （我主要是在谈论公共接口）。

这样做有什么缺点吗？它被认为是一种好的做法吗？

将它用于类似标识符的目的（当值与基于散列的容器中的集合匹配时）怎么样？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-05T15:10:57.347

[`CharSequence`](http://docs.oracle.com/javase/7/docs/api/java/lang/CharSequence.html)在通用库中很少使用。当您的主要用例是字符串处理（操作、解析等）时，通常应该使用它。

*一般来说*，你可以用 a 做任何你可以用 a 做`CharSequence`的事情`String`（很简单，因为你可以[将 every 转换`CharSequence`为 a`String`](http://docs.oracle.com/javase/7/docs/api/java/lang/CharSequence.html#toString%28%29)）。但是有一个重要的区别：不能保证**A`CharSequence`是不可变的！**每当您处理 a`String`并在两个不同的时间点检查它时，您可以确定它每次都具有相同的值。

但对于一个`CharSequence`这不一定是真的。例如，有人可以将 a 传递[`StringBuilder`](http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuffer.html)到您的方法中并*在您对其执行某些操作时对其进行*修改，这可能会破坏许多正常的代码。

考虑这个伪代码：

```
public Object frobnicate(CharSequence something) {
  Object o = getFromCache(something);
  if (o == null) {
    o = computeValue(something);
    putIntoCache(o, something);
  }
  return o;
} 
```

这看起来很无害，如果你在`String`这里使用过它，它大部分都可以工作（除了这个值可能会被计算两次）。但是如果`something`是 a`CharSequence`那么它的内容可能会在`getFromCache`调用和`computeValue`调用之间发生变化。或者更糟：在`computeValue`通话和`putIntoCache`通话之间！

因此：**只有**`CharSequence`在有*很大的优点*并且*知道缺点的*情况下才接受。

*如果*您接受`CharSequence`，您应该记录您的 API 如何处理可变`CharSequence`对象。例如：“在方法执行时修改参数会导致未定义的行为。”

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T15:11:58.213

这确实取决于您的需要，但是我想说明 的两个优点`String`。

来自[`CharSequence`的文档](http://docs.oracle.com/javase/7/docs/api/java/lang/CharSequence.html)：

> 每个对象都可以由不同的类实现，并且不能保证每个类都能够测试其实例与其他类的实例是否相等。因此，将任意 CharSequence 实例用作集合中的元素或映射中的键是不合适的。

因此，无论何时您需要一个`Map`或可靠的`equals`/ `hashCode`，您都需要将实例复制到一个`String`（或其他）中。

此外，我认为`CharSequence`没有明确提到实现必须是不可变的。您可能需要进行*防御性复制*，这可能会减慢您的实现速度。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-05T15:07:04.923

Java[`CharSequence`](http://docs.oracle.com/javase/6/docs/api/java/lang/CharSequence.html)是一个接口。正如 API 所说，`CharSequence`已在`CharBuffer`, `Segment`, `String`, `StringBuffer`,`StringBuilder`类中实现。因此，如果您想从**所有**这些类访问或接受您的 API，那么`CharSequence`您可以选择。如果不是，那么`String`对于公共 API 来说非常好，因为它非常容易并且每个人都知道它。记住`CharSequence`只给你4个方法，所以如果你`CharSequence`通过一个方法接受一个对象，那么你的输入操作能力就会受到限制。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-11-05T16:08:04.713

如果参数在概念上是一个字符序列，请使用 CharSequence。

从技术上讲，字符串是一系列字符，但大多数情况下我们不会这样想。字符串更具原子性/整体性，我们通常不关心单个字符。

想想 int - 虽然 int 在技术上是一个位序列，但我们通常不关心单个位。我们将整数作为原子事物进行操作。

因此，如果您要对参数执行的主要工作是遍历其字符，请使用 CharSequence。如果要将参数作为原子操作，请使用 String。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T12:37:14.410

您可以实施`CharSequence`以保存您的密码，因为[不鼓励](https://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords)[使用`String`](https://stackoverflow.com/questions/8881291/why-is-char-preferred-over-string-for-passwords)。实现应该有一个 dispose 方法来清除纯文本数据。

# php - PHP：避免函数被视为字符串

> ID：13234585
> 
> 赞同：0
> 
> 时间：2012-11-05T14:54:58.360
> 
> 标签：php, escaping

我想将网站的内容视为字符串，并分配给变量。

但是，如果我写`<?php $stringvariable = ' include https://api.twitter.com/1/statuses/user_timeline/USER.rss ' ?>`

php 将假定包含函数和其中包含的地址只是一个字符串。

有什么办法可以避免这种情况吗？

PS 我可能实际上会将该功能`read_file`用作基本安全措施，以防万一我正在阅读的 RSS 提要被黑客入侵。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:56:22.790

```
$variable = file_get_contents(URL) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T14:56:37.440

试试这个

```
$stringvariable = file_get_contents('https://api.twitter.com/1/statuses/user_timeline/USER.rss'); 
```

请勿`INCLUDE`用于此目的！

**请注意**

包含不是一个函数 - 它是控制结构！ [http://php.net/manual/en/function.include.php](http://php.net/manual/en/function.include.php)

# android - Android 上 C/C++ 中的内存使用指南

> ID：13234586
> 
> 赞同：1
> 
> 时间：2012-11-05T14:55:00.270
> 
> 标签：android, android-ndk

他们在 android.com 上说，如果您使用 Java，则可以使用的最大内存为 16 MB。至少这是设备应该支持的。如果您的手机较旧，您会发现无法获得更多，反而会收到 OutOfMemoryError。如果您使用 NDK 做同样的事情，则不会。在我的应用程序中，我试图获得 50MB 甚至更多，到目前为止，Android 还算不错。

我在 android.com 上没有找到与此相关的任何内容。

像Java一样有限制吗？

如果是：限制是多少？

如果不是：那有什么好的价值？

问题是，我必须根据该大小构建我的代码。

[编辑：] 我尝试了 Seva Alekseyev 的建议。

```
 root@android:/ # ulimit -a
     ulimit -a
     time(cpu-seconds)    unlimited
     file(blocks)         unlimited
     coredump(blocks)     0
     data(KiB)            unlimited
     stack(KiB)           8192
     lockedmem(KiB)       64
     nofiles(descriptors) 1024
     processes            7806
     flocks               unlimited
     sigpending           7806
     msgqueue(bytes)      819200
     maxnice              40
     maxrtprio            0
     resident-set(KiB)    unlimited
     address-space(KiB)   unlimited
     root@android:/ # ulimit -v
     ulimit -v
     unlimited
     root@android:/ # 
```

我请求的内存（通过使用“alloc”或“new”）是虚拟内存（ulimit -v）。所以没有机会弄清楚我能得到多少？！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T17:38:38.040

您受到三种类型的内存限制：

1) 人为设置限制以保持系统在多任务处理时的响应——VM 堆限制是这方面的主要例子。ulimit 是操作系统为您提供进一步限制的潜在机制，但我还没有看到它在 Android 设备上被限制使用。

2) 基于可用实内存的物理限制。您应该有一个正在开发/测试的基准设备，并且应该非常积极地假设其他进程（后台服务、其他应用程序）也需要内存。还要记住，操作系统使用的内存随操作系统版本而变化（并且会随着时间的推移而增加）。Stock Android 不会交换，所以如果你走得太远，你就死定了。一种可能的情况是 Nexus One（512MB RAM），带有音频播放器和手机应用程序在后台运行，“气球”服务占用另外 100MB 物理内存以留出一些余地；在此配置中，您仍然会发现超过 100MB 的可用空间。

3) 基于地址空间的虚拟内存限制。Stock android 允许过度使用内存，因此如果您在具有 512MB RAM 的设备上请求 1GB 虚拟分配（通过 mmap 等），它不会闪烁，这通常是一件非常有用的事情。但是，当您随后触摸内存时，需要将其带入物理内存。如果物理内存中有只读页面，它们可以被弹出，但很快你就会用完，而且没有交换——死了。（在内存不足的情况下，组合和过度提交和无交换直接导致进程死亡，而不是像 malloc 返回 null 这样的可恢复错误）。

最后，值得注意的是 calloc/malloc/new 是否需要物理分配取决于分配器，但假设是更安全，尤其是对于少于大量页面的分配。所以：如果您正在处理 < 100 MB 的标准、行为良好的分配，那么您可能很清楚——但请测试！如果您正在处理需要内存映射的大量数据，则 mmap 是您的朋友，小心使用时，并且仅与 PROT_READ 一起使用时是您最好的朋友。如果您要处理大于 100 MB 的物理内存分配，希望在现代设备上运行得非常好，但是您必须仔细定义基线并测试、测试、测试，因为检测到内存不足的情况苍蝇一般是不可能的。

另一个注意事项：APP_CMD_LOW_MEMORY 存在，并且是清除缓存的好地方，但不能保证及时调用它来挽救你的生命。它根本不会改变整体情况。

# android - 字符串对于 DataOutputStream 来说太大了

> ID：13234590
> 
> 赞同：2
> 
> 时间：2012-11-05T14:55:08.563
> 
> 标签：android

我正在尝试将一个大字符串写入我的 DataOutputStream 但是我得到一个`UTFDataFormatException`说：

`String more than 65535 UTF bytes long`

当我打电话时会发生这种情况：

`byteOut.writeUTF(stringArray.get(i));`

byteOut 是我的`DataOutputStream`，`stringArray.get(i);`也是我的字符串。

无论如何要让大字符串进入这个`DataOutputStream`或者是否有另一种解决方案。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T14:22:12.130

我找到了解决问题的方法，就在这里。

```
ByteArrayOutputStream baos = new ByteArrayOutputStream();
DataOutputStream byteOut = new DataOutputStream(baos);
byte[] data = stringArray.get(i).getBytes("UTF-8");
byteOut.write(data);
byteOut.close();
byte[] input = baos.toByteArray(); 
```

可能不是，也可能不是完美的，但它有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:59:03.257

你用什么来创建`OutputStream`? 看看这个链接：[这里](https://stackoverflow.com/questions/10290535/unable-to-write-into-dataoutputstream-beyond-a-specific-size-outofmemoryerror)。您进行通信的媒介可能存在限制，您需要在对象上配置一些参数。

# machine-learning - weka 是否使用数字属性进行自动预处理

> ID：13234594
> 
> 赞同：1
> 
> 时间：2012-11-05T14:55:16.287
> 
> 标签：machine-learning, weka

weka 是否在分类前预处理诸如速度（米/秒）之类的数字属性？

我想使用 weka 工具包对数字速度和步数数据进行分类。在相关工作中经常使用 weka，并提到相关工作的作者使用均值、标准差、最大值和均值进行分类。weka 是自动进行预处理还是我必须在分类之前进行预处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:02:03.573

Weka 不会*自动*执行此操作，但它确实有过滤器。使用[**AddExpression**](http://weka.sourceforge.net/doc.dev/weka/filters/unsupervised/attribute/AddExpression.html)过滤器，您可以计算多个属性的平均值、标准差、最大值和平均值，正如您所描述的。

# java - 编译 .java 时出错？（去）

> ID：13234595
> 
> 赞同：0
> 
> 时间：2012-11-05T14:55:20.537
> 
> 标签：java, goto

![在此处输入图像描述](../Images/be607b7b0f53ccef9c5fb7f5df367faa.png)

![在此处输入图像描述](../Images/4e03faf2011518583d4dd460fb082a41.png)

我得到了这个**.java**并且我想将它编译成一个**.class**。唯一的问题是，实际制作这个的人使用了非常草率的代码。我有 14 个错误，它们都是一样的。有 3 行包含所有错误。它们都有相同的错误，唯一的问题是我不知道如何修复它们。

带有错误示例的代码：

```
if(!i$.hasNext()) 
    goto L2;
else 
    goto L1; 
```

错误在 处有 iS`goto`并且在说`illegal start of expression`。这是第一个错误。

*   另一个是`L2`现在和正在说的地方`not a statement`。
*   又在 else 它说`'else without 'if'`。
*   再次使用 goto 非法的表达式开始。

我也知道 goto 甚至不是一个语句，它是保留的并且没有被使用，部分原因是它没有在 java 中使用！但是，如果有人知道除 goto 之外的其他语句将链接回标签，请告诉我，我将不胜感激！

更新：我可以指出我没有做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T14:57:36.777

goto 没有在 java 中实现。它是一个保留关键字，但不执行任何操作。

之前有人问过这个问题：

[Java中有goto语句吗？](https://stackoverflow.com/questions/2545103/is-there-a-goto-statement-in-java)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T14:57:21.550

Java 没有`goto`声明。需要明确的是，`goto` *是*Java 中的保留关键字（参见Java 语言规范的第[3.9](http://docs.oracle.com/javase/specs/jls/se7/html/jls-3.html#jls-3.9-100)节），但它没有任何用处。您提供的代码片段甚至无法编译。

从外观上看，您似乎正在查看代码的一些中间表示，或混淆/反编译的源代码（因为`goto`和`$`变量标识符）。请务必查看*原始*.java 源代码文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:29:43.023

这看起来好像将状态机实现从带有 goto 的语言转换为 Java 的尝试失败了。

在 Java 中有几种构造状态机的方法。也许最简单的是循环内的 switch 语句。

```
while(!done) {
  switch(state) {
    case 1:
       ...
       break;
    case 4:
       if(!input.hasNext()) state = 2; else state = 1;
       break;
    case 5:
       ...
       break;
  }
} 
```

还有一些替代方法，您可以将当前状态表示为实现接口的对象，您可以调用方法来完成工作并获取表示下一个状态的对象。

几乎可以肯定，这段代码是自动生成的，不是由人编写的，也不是通过反编译或其他方式编写的。在标识符中使用“$”在人工编写的代码中很少见。它实际上看起来很像我在编译器中看到的从形式语法自动生成的代码。

如果可以的话，我同意之前的建议，尝试使用真实来源。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T15:01:17.427

你可以使用 lable 和 break 而不是 goto

前任- ：

```
 mylable:  
  for (i = 0; i < 10; i++) {

            if (somecondition) {
               //doSomething()
               break mylable;
          }

     } 
```

# javascript - 如何限制动画的高度（方向顶部）？

> ID：13234598
> 
> 赞同：1
> 
> 时间：2012-11-05T14:55:32.563
> 
> 标签：javascript, jquery, jquery-animate

我想在使用箭头切换时限制动画的最大高度。尝试编写一个函数，该函数将计算 div 的高度和 +- 以 px 为单位的步长。但它现在被写入变量。

```
var maxfloorh = $('.floor-switch').height();
var actualh = $('.floor-switch').height();
$('.floor-switch li').click(function() {
    $('#line').animate({
        top: $(this).position().top
    });
});
function floorarrs(numbr) {
    switch (numbr) {
        case 1:
            //check here maxfloorh
            $('#line').animate({
                top: '-=18'
            }, 400, function() {
                maxfloorh-'18';
                console.log(maxfloorh);
            });

        break
        case 2:
              //check here maxfloorh
            $('#line').animate({
                top: '+=18'
            }, 400, function() {
                maxfloorh+'18';
                console.log(maxfloorh);
            });

        break
    }
}
$('.arrw-up').click(function() {
    floorarrs(1);
});
$('.arrw-dwn').click(function() {
    floorarrs(2);
});​ 
```

HTML：

```
<div id="floors" style="margin:60px;">
    <div class="arrw-up"></div>
    <div class="floor-switch">
        <div id='line'></div>
        <ul>
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
        </ul>
    </div>
    <div class="arrw-dwn"></div>
</div>​ 
```

直播：http: [//jsfiddle.net/cxvec/2/](http://jsfiddle.net/cxvec/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:35:32.163

```
$('.arrw-up').click(function() {
  if ($("#line").css("top") !== "0px") {
    floorarrs(1);
  }
});

$('.arrw-dwn').click(function() {
  if ($("#line").css("top") !== ""+($("#pagination li").length-1)*18+"px") {
    floorarrs(2);
  }
});​ 
```

这是工作[小提琴](http://jsfiddle.net/cxvec/3/)

我已经更改了箭头函数中的逻辑，在 css中，元素`click`的初始属性设置为 ...现在，每当-> div 位于第 1 位，因此该函数不会执行，向下箭头也是如此...**注意：**这可能是最好的解决方案，但它是解决方案之一`top``id=line``0px``top = 0px``li`

# java - servlet 线程的数据库连接？

> ID：13234602
> 
> 赞同：3
> 
> 时间：2012-11-05T14:55:41.940
> 
> 标签：java, multithreading, servlets, jdbc

关于 servlet 默认是多线程的，每个 servlet 是实例化数据库连接还是该 servlet 的所有线程之间共享连接？

我使用 JDBC 作为我的 servlet 和 Oracle 数据库之间的接口。

如果一个数据库连接在所有线程之间共享，这是否意味着我应该对数据库使用连接池？

```
/** Open the connection here **/
public void init() {
    String url = "server";
    String username = "pwd";
    String password = "usr";
    try {
        Class.forName("oracle.jdbc.OracleDriver");
        conn = DriverManager.getConnection(url, username, password);
    } catch (Exception e) {
        System.err.println("Error making pool: " + e);
        conn = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T15:02:43.137

> 如果一个数据库连接在所有线程之间共享，这是否意味着我应该对数据库使用连接池？

当然是！JDBC 连接和单线程而不是线程安全的。只需在两者之间引入连接池，首先获取连接并在同一请求期间尽快关闭它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:00:46.583

根据您编写连接的方式，它可以是每个 servlet（实例变量）或全局（静态变量 - 前提是您不在集群环境中并且您管理并发，这将是一个严重的瓶颈）

但是，如果您想让您的系统高效、可靠、可扩展、更易于维护，并且不必实现更高级的功能，例如在链接失败的情况下重新连接（考虑到您的后端是 Oracle，我认为是这种情况），您应该查看您的应用程序服务器连接池机制。

# android - Android 基于关键字的语音识别重定向（想想：导航到华沙）

> ID：13234603
> 
> 赞同：2
> 
> 时间：2012-11-05T14:55:43.157
> 
> 标签：android, keyword, speech-recognition

有没有办法注册android语音识别服务并让它劫持所有以指定关键字开头的输入？就像现在在现代安卓设备上，如果你按住搜索按钮然后语音检测被初始化，如果你说一些以“导航到”开头的东西，那么导航应用程序就会启动而不是浏览器。这可以为任意应用程序完成吗？

# google-maps-api-3 - 欧洲城市和地区的地理坐标提供商

> ID：13234606
> 
> 赞同：3
> 
> 时间：2012-11-05T14:55:48.227
> 
> 标签：google-maps-api-3

我正在寻找包含欧洲所有城市的市区地理数据的数据库。我计划在基于谷歌地图的应用程序中使用它。

例如，如果您尝试在 Google 地图上使用查询“Paris, Paris 11”进行搜索，您将看到突出显示的 Paris-11 区区域。

![样本图](../Images/02fdd2fc3413ebb19b7d0fb0ce5ef5e8.png)

我已经找到了包含国家区域多边形的出色数据库：[https ://www.google.com/fusiontables/DataSource?dsrcid=420419](https://www.google.com/fusiontables/DataSource?dsrcid=420419)

任何人都可以帮助我使用相同的城市区域数据库吗？

或者谷歌地图 api 有一些方法来接收所选市区的多边形坐标？

PS所有国家地球数据表都存储在这里：[https ://www.google.com/fusiontables/DataSource?dsrcid=394713](https://www.google.com/fusiontables/DataSource?dsrcid=394713)

# programming-languages - 处理语言中的数学

> ID：13234607
> 
> 赞同：1
> 
> 时间：2012-11-05T14:55:54.273
> 
> 标签：programming-languages, processing

好的，所以我又对处理编程语言有点迷失了，所以想知道是否有人可以帮助我的大脑畅通无阻？

这就是问题 - “编写一个比较两个数字的程序，如果其中一个数字大于另一个数字，则将这两个数字相加，并将结果打印在控制台窗口中。”

所以我得到了这个，但我只是在'int'值代码上遇到错误，这让我认为我完全误解了这个？......可能误解了语言的工作原理：/

这是我的代码；

```
void setup() {
int a = 30
int b = 20

 if (a > b) {printIn("a+b");}
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:04:08.693

通常，如果您发布*遇到*的错误，它会有所帮助。但是，在这种情况下，您有一个非常基本的语法问题：您需要用分号终止您的语句 - 包括分配。例如：`int a = 30;`

哦，它`println`（带有小写 L）不是`printIn`。而且，正如注销所指出的那样，您正在一个带引号的字符串中进行求和，该字符串将仅打印为文字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:06:19.430

如果我理解正确，您必须在 setup() 方法之外声明变量。可以在方法内部进行初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-20T23:09:03.010

println() 中的 l；应该是小写。变量周围不需要引号。

这有效：

无效设置（） { int a = 30; 诠释 b = 20; if(a > b) {println(a + b); }}

# php - PHP Regex - 如何在爬取的内容之间获取多个单词

> ID：13234615
> 
> 赞同：0
> 
> 时间：2012-11-05T14:56:21.120
> 
> 标签：php, regex

我正在尝试从 Alexa 获取最新的“热门话题”主题，用于我儿子的研究项目。我基本上只是想抓取单词并将其插入到 mysql 数据库中。

我目前拥有的是：

```
<?php
function getAlexa($url)
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0");
    curl_setopt($ch, CURLOPT_HEADER, 0);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
}
$grab = getAlexa("http://www.alexa.com/whatshot");

// missing part to get everything between title=''

// mysql connection details are included
include "connectiondetails.php";

// mysql table setup is id (int 11) AI, word (varchar 100) UNIQUE
$insert = @mysql_query("INSERT IGNORE INTO words values('','$word')");

?> 
```

我的问题是我还是 PHP 新手，我需要从 alexa.com/whatshot 中获取所有 a href 标题（不是缩短的锚文本），就像 title=' 和下一个 ' 之间的所有内容一样 - 例如标题='hello world' 表示单词（字符串）将是 hello world - 只是我需要它来获取所有 20 个单词。

结构是：

```
<a href='http://www.alexa.com/whatshot?q=loretta+swit+turns+75' title='Loretta Swit Turns 75'>Loretta Swit Turns 75</a></li><li>2\. <a href='http://www.alexa.com/whatshot?q=where+do+i+vote' title='where do I vote'>where do I vote</a></li><li>3\. <a href='http://www.alexa.com/whatshot?q=nj+earthquake' title='NJ earthquake'>NJ earthquake</a></li><li>4\. <a href='http://www.alexa.com/whatshot?q=yvonne+strahovski' title='Yvonne Strahovski'>Yvonne Strahovski</a></li><li>5\. <a href='http://www.alexa.com/whatshot?q=early+voting+results' title='early voting results'>early voting results</a></li></ul><ul class='hotsearches' start='6'><li>6\. <a href='http://www.alexa.com/whatshot?q=milt+campbell+dies' title='Milt Campbell Dies'>Milt Campbell Dies</a></li><li>7\. <a href='http://www.alexa.com/whatshot?q=bristol+palin+suit+tossed' title='Bristol Palin suit tossed'>Bristol Palin suit...</a></li><li>8\. <a href='http://www.alexa.com/whatshot?q=a+gay+lesbian' title='a gay lesbian'>a gay lesbian</a></li><li>9\. <a href='http://www.alexa.com/whatshot?q=navy+skipper+fired' title='Navy skipper fired'>Navy skipper fired</a></li><li>10\. <a href='http://www.alexa.com/whatshot?q=single+mom+no+tip' title='single mom no tip'>single mom no tip</a></li></ul><ul class='hotsearches' start='11'><li>11\. <a href='http://www.alexa.com/whatshot?q=craigslist' title='craigslist'>craigslist</a></li><li>12\. <a href='http://www.alexa.com/whatshot?q=nate+silver' title='Nate Silver'>Nate Silver</a></li><li>13\. <a href='http://www.alexa.com/whatshot?q=real+clear+politics' title='real Clear Politics'>real Clear Politics</a></li><li>14\. <a href='http://www.alexa.com/whatshot?q=93-year-old+bodybuilder' title='93-year-old bodybuilder'>93-year-old bodybu...</a></li><li>15\. <a href='http://www.alexa.com/whatshot?q=wreck+it+ralph' title='Wreck It Ralph'>Wreck It Ralph</a></li></ul><ul class='hotsearches' start='16'><li>16\. <a href='http://www.alexa.com/whatshot?q=kickstarter' title='Kickstarter'>Kickstarter</a></li><li>17\. <a href='http://www.alexa.com/whatshot?q=african+painted+dogs' title='African painted dogs'>African painted dogs</a></li><li>18\. <a href='http://www.alexa.com/whatshot?q=red+dawn' title='Red Dawn'>Red Dawn</a></li><li>19\. <a href='http://www.alexa.com/whatshot?q=instagram' title='Instagram'>Instagram</a></li><li>20\. <a href='http://www.alexa.com/whatshot?q=iphone+5' title='iPhone 5'>iPhone 5</a> 
```

所以如果一切顺利，一旦抓取完成，我的数据库中就会有 20 个单词。

感谢您花时间阅读本文。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:00:41.133

您可以使用以下正则表达式来解析给定输入中的所有标题属性/值：

```
title=(?:(?:"([^"]+)")|(?:'([^']+)')) 
```

要使用它，您可以使用 PHP `preg_match_all()`（假设您的 HTML 在您的`$grab`变量中）：

```
$titles = array();
preg_match_all('/title=(?:(?:"([^"]+)")|(?:\'([^\']+)\'))/i', $grab, $titles); 
```

此正则表达式将尝试匹配双引号*或*单引号内的任何值。从您的示例输出中，它看起来好像都是单引号。数组中匹配的标题`$titles`将分为两组。第一组在`$titles[1]`；这些都是双引号中的所有标题。`$titles[2]`包含单引号中的标题列表。

您可以将它们合并在一起，`array_merge()`然后`array_filter()`删除空值。然后，您可以像往常一样遍历它们：

```
$titles = array_filter(array_merge($titles[1], $titles[2]));
foreach ($titles as $title) {
    .. do whatever you need/want
} 
```

**更新**（标题中的转义引号）
根据评论，我意识到我的原始正则表达式与其中包含转义引号的标题不匹配（例如`title="foo \"bar\""`）。以下正则表达式（从此[答案](https://stackoverflow.com/questions/5695240/php-regex-to-ignore-escaped-quotes-within-quotes)移植）应处理此问题：

```
title=(?:(?:"([^"\\]*(?:\\.[^"\\]*)*)")|(?:\'([^'\\]*(?:\\.[^'\\]*)*)\')) 
```

要在 中使用它`preg_match_all()`，您将使用：

```
preg_match_all('/title=(?:(?:"([^"\\\\]*(?:\\\\.[^"\\\\]*)*)")|(?:\'([^\'\\\\]*(?:\\\\.[^\'\\\\]*)*)\'))/i', $grab, $titles); 
```

虽然它更长，并且可能无法在没有解释的情况下阅读（如果你需要一个让我知道，我会发布），但如果你开始注意到由于转义引号而丢失的数据，那绝对是值得的！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:00:25.300

你想要这个：[http ://www.php.net/manual/en/function.preg-match-all.php](http://www.php.net/manual/en/function.preg-match-all.php)

还有这个：[http ://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

假设您处理了正则表达式部分，您将执行以下操作：

```
$titles;
preg_match_all('@YOUR_REGEX_HERE@/i', $grab, $titles);// The "@" is just a regex delimiter 
```

# single-sign-on - 我是否应该要求 IdP 签署 SAML2 SSO 响应？

> ID：13234618
> 
> 赞同：7
> 
> 时间：2012-11-05T14:56:30.810
> 
> 标签：single-sign-on, signing, saml-2.0, shibboleth, service-provider

我们的应用程序与 3 个不同的 (Shibboleth) IdP 集成了 SAML2 SSO。我们正在尝试添加第 4 个（也是 Shibboleth），但遇到了一些问题，因为我们的应用程序希望所有 SSO 响应都经过可验证签名。其他 3 个正在签署他们的响应，但第 4 个没有，并且犹豫是否添加自定义配置以强制为我们的应用程序签名。

从技术上讲，我可以修改我们的应用程序以接受未签名的 SSO 响应，但我想知道我是否应该这样做。允许未签名的 SSO 响应有哪些陷阱？是否存在安全漏洞？

是否有任何 Shibboleth（或其他 SAML2 SSO）文档建议将响应签名作为最佳实践？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-06T05:42:57.023

遵循 SAML 2.0 规范的 IdP 的唯一要求是对断言进行数字签名（请参阅[http://docs.oasis-open.org/security/saml/v2.0/saml-profiles-2.0-os.pdf](http://docs.oasis-open.org/security/saml/v2.0/saml-profiles-2.0-os.pdf) - 部分4.1.3.5)。这足以说明来自 IdP 的 SSO 操作是否应该被与其联合的 SP 信任。

签署外部响应是可选的。它有一些安全优势，例如防止消息插入或修改（请参阅[http://docs.oasis-open.org/security/saml/v2.0/saml-sec-中的第 6.1.3/6.1.5 节考虑-2.0-os.pdf](http://docs.oasis-open.org/security/saml/v2.0/saml-sec-consider-2.0-os.pdf) ) - 但实际上它经常被省略以代替依赖 SSL/TLS。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T20:18:14.570

签署响应的全部目的是证明它们确实来自发行人。否则，“中间人”可能会更改属性，例如让他们自己访问应用程序。

ADFS v2.0 默认使用 SAML 对所有响应令牌进行签名。没有办法关闭它。

# vb.net - 我们如何查询一个通用的 columnName？

> ID：13234620
> 
> 赞同：2
> 
> 时间：2012-11-05T14:56:30.580
> 
> 标签：vb.net, generics, lambda

到目前为止，我们有一个方法 (OnSearchButtonClick) 可以在tenantName 列上进行搜索：

```
Private Sub OnSearchButtonClick(ByVal searchValue As String)
            _filteredTenants = New ListCollectionView(_allTenants.Cast(Of TenantOverviewDto).Where(Function(p) p.TenantName.ToUpper().StartsWith(searchValue.ToUpper())).ToList())
 End Sub 
```

在这个方法中，我们要传递另一个字符串作为参数，其中包含 TenantOverviewDto 的某个列的名称。例如，如果我们想在名为“Runners”的组中查找租户，我们希望在 searchValue 参数中传递“Runners”，并在新参数中传递 group，然后执行在 group 列中查找的查询。（如果第二个参数是 TenantName，我们应该查看 TenantName 列）

有谁知道我们如何做到这一点？非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:14:35.393

我的同事通过反思找到了解决方案。该方法如下所示：

```
Private Sub OnSearchButtonClick(ByVal searchValue As String, ByVal columnName As String)

            _filteredTenants = New ListCollectionView(_allTenants.Cast(Of TenantOverviewDto).Where(Function(p) GetPropertyValue(p, columnName).ToUpper().StartsWith(searchValue.ToUpper())).ToList())
End Sub 
```

在 GetPropertyValue 方法中，我们将使用反射：

```
 Private Function GetPropertyValue(ByVal o As Object, ByVal propertyName As String) As Object

            Dim type As Type = o.GetType()
            Dim info As PropertyInfo = type.GetProperty(propertyName)
            Dim value As Object = info.GetValue(o, Nothing)
            Return value

        End Function 
```

首先，我们获取我们传递的对象类型（在本例中为 TenantOverviewDto）。其次，我们得到我们传递的 columnName 的 propertyInfo。然后我们得到相应的值并将这个值发回。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:32:20.287

在这种情况下，反射解决方案更简单，更简洁，因此我更喜欢使用它。

但是，我认为使用动态表达式发布 C# 解决方案很有趣：

```
private void OnSearchButtonClick(string propertyName, string searchValue)
{
    var parameter = Expression.Parameter(typeof(TenantOverviewDto), "p");

    var toUpperMethodInfo = typeof(string).GetMethods()
        .Single(m => m.Name == "ToUpper" && !m.GetParameters().Any());

    var startsWithMethodInfo = typeof(string).GetMethods()
        .Single(m => m.Name == "StartsWith" && m.GetParameters().Count() == 1);

    var expression =
        Expression.Call(
            Expression.Call(
                Expression.Property(parameter, propertyName), 
                toUpperMethodInfo),
            startsWithMethodInfo,
            Expression.Constant(searchValue.ToUpper())
        );

    var compiledCondition = Expression.Lambda<Func<TenantOverviewDto, bool>>
        (expression, parameter).Compile();

    _filteredTenants = new ListCollectionView(
        _allTenants.Cast<TenantOverviewDto>().Where(compiledCondition).ToList());
} 
```

这种方法对于这种情况下需要的东西来说太复杂了。但是，当条件比仅将变量属性与常量字符串进行比较更复杂时，它可能会派上用场。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-16T21:25:10.600

试试这个解决方案：

```
Private Sub OnSearchButtonClick(ByVal searchValue As String, ByVal columnName As String)
    _filteredTenants = _filteredTenants.findAll(f=>f[columnName].toString().StartsWith(searchValue.ToUpper())).toList()
End Sub 
```

# perl - 在多个文件中添加数字的代码

> ID：13234622
> 
> 赞同：1
> 
> 时间：2012-11-05T14:56:37.490
> 
> 标签：perl, shell

我有多个文件，其中包含以下两个条目：

```
$ cat file_01
Total capacity                   3.4 TB
Capacity used                    825.8 GB 
```

文件的输出是两行。第一行是总容量，第二行是已用容量。

这是一台服务器的输出，我希望它为我的其余服务器合并。

我想创建一个简单的脚本，它将添加来自多个文件的所有总容量和所有使用的容量，并提供一个合并的输出。Shell 或 perl 是我正在寻找的。

对此的任何方向，都会非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:16:15.100

假设所有文件都以 TB 报告（未经测试）

```
perl -lane '
    $total += $F[2]; $used += $F[6]; 
    END {print "total: $total; used: $used"}
' file* 
```

如果您有不同的单位，请考虑使用诸如[Math::Units 之](https://metacpan.org/module/Math%3a%3aUnits)类的东西在 TB 和 GB 之间进行转换。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:24:55.537

假设 1TB = 1000GB：

```
cat file* |  perl -ne '
   /.* (\d+.\d+) ([TG])B .* (\d+.\d+) ([TG])B/;
   $x+=$1*($2==T?1000:1);
   $y+=$3*($4==T?1000:1);
   END{print "$x GB, $y GB\n"}' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-23T19:41:36.767

# 读取并加载每种类型 GB、TB 等的哈希表。

```
cat file? | perl -ne '
chomp;
@x = split(/\s+/,$_);
$total{$x[-1]} += $x[-2];
while(<>){
  chomp;
  @x = split(/\s+/,$_);
  $total{$x[-1]} += $x[-2];
};
for $m1 ( keys %total ) {
  print "$m1 , $total{$m1}\n";
};
' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-23T19:24:46.320

下面应该做的伎俩：

```
awk '{ if ($4 == "GB") $3/=1000; s[FNR] += $3 } END { print "total: "s[1]" TB\nused:  "s[2]" TB" }' file_* 
```

FNR - 文件中的行号

# php - mkdir, file_exists : 令人困惑和矛盾的错误

> ID：13234624
> 
> 赞同：1
> 
> 时间：2012-11-05T14:56:54.913
> 
> 标签：php, mkdir, file-exists

以下代码给了我错误：“mkdir：文件存在”。

```
 $path = 'c://wamp/www/et1/other';
    $new_location = 'c://wamp/www/et1/other/test';
    if(file_exists($path) && is_dir($path))
    {
        if(!file_exists($new_location))
        {               
            mkdir($new_location, 0777);
        }
    } 
```

但是，如果我不设置第二个 if 条件，它会给我错误：“mkdir：没有这样的文件或目录”。此外，如果我通过编写 mkdir($new_location,077,true) 添加递归性，我不会收到错误，但不会创建目录。我只是不明白我在这里做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:25:29.140

该错误是由路径中的双斜杠引起的，PHP 根本不喜欢。如果你改变它`c://`，`c:/`一切都会好起来的。

顺便说一句，没有真正的理由将其指定`0777`为模式，因为这也是默认值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:05:03.653

假设这是附加了新目录名称`$new_location`的当前路径。`$path`您需要将`mkdir`递归标志设置为 true，以便它`Allows the creation of nested directories specified in the pathname.`

[http://php.net/manual/en/function.mkdir.php](http://php.net/manual/en/function.mkdir.php)

```
mkdir($new_location, 0777, true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:07:18.460

错误是不言自明的

```
Warning: mkdir() [function.mkdir]: No such file or directory in 
```

这意味着父目录不存在..您需要添加递归选项来创建`parent directory`然后`current directory`

```
 mkdir($new_location, 0777, true); 
```

如果您不想这样做，请始终检查父目录是否存在

```
if (!is_dir(dirname($new_location)) || !is_writable(dirname($new_location)))
{
    trigger_error("Your parent does not exist");
} 
```

# mysql - 如何判断哪个查询是在使用 UNION 的 MySQL 语句中获取的数据

> ID：13234629
> 
> 赞同：0
> 
> 时间：2012-11-05T14:57:09.437
> 
> 标签：mysql, union

桌子

```
id    string
------------
1     aaa
2     bbb
3     ccc
4     ddd 
```

查询

```
(SELECT string FROM table WHERE id > 1 ORDER BY id ASC LIMIT 1)    /* num_row = 1 */
UNION
(SELECT string FROM table WHERE id < 1 ORDER BY id DESC LIMIT 1)   /* null */
UNION
(SELECT string FROM table WHERE id > 4 ORDER BY id ASC LIMIT 1)    /* null */
UNION
(SELECT string FROM table WHERE id < 4 ORDER BY id DESC LIMIT 1)   /* num_row = 2 */ 
```

上面的查询将返回`2 rows`，因为没有 id=5 和 id=0。

如何判断这 2 行是从哪些查询中提取的？

也就是说，`num_row = 1`从`1st SELECT`和`num_row = 2`从`4th SELECT`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T14:59:07.117

你可以试试

```
(SELECT 1, string FROM table WHERE id > 1 ORDER BY id ASC LIMIT 1)   
UNION
(SELECT 2, string FROM table WHERE id < 1 ORDER BY id DESC LIMIT 1)  
UNION
(SELECT 3, string FROM table WHERE id > 4 ORDER BY id ASC LIMIT 1)   
UNION
(SELECT 4, string FROM table WHERE id < 4 ORDER BY id DESC LIMIT 1) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T14:59:13.927

您可以添加一个具有通用别名的额外常量列：

```
(SELECT string, 'query_1' as query_num FROM table WHERE id > 1 ORDER BY id ASC LIMIT 1)    
UNION
(SELECT string, 'query_2' as query_num FROM table WHERE id < 1 ORDER BY id DESC LIMIT 1)
UNION
(SELECT string, 'query_3' as query_num FROM table WHERE id > 4 ORDER BY id ASC LIMIT 1)    
UNION
(SELECT string, 'query_4' as query_num FROM table WHERE id < 4 ORDER BY id DESC LIMIT 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T14:59:52.607

使用第二列来指示数据的来源

```
(SELECT string, '1st query' as from_where FROM table WHERE ...)
UNION
(SELECT string, '2nd query' as from_whereFROM table WHERE ...) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T15:00:21.397

您可以尝试（虽然不优雅）：

(SELECT '1', string FROM table WHERE id > 1 ORDER BY id ASC LIMIT 1) /* num_row = 1 */ UNION (SELECT '2', string FROM table WHERE id < 1 ORDER BY id DESC LIMIT 1) /* null */ UNION (SELECT '3', string FROM table WHERE id > 4 ORDER BY id ASC LIMIT 1) /* null */ UNION (SELECT '4', string FROM table WHERE id < 4 ORDER BY id DESC LIMIT 1) /* num_row = 2

# php - 从开发服务器运行时 PHP 中的 cURL 不连接

> ID：13234630
> 
> 赞同：1
> 
> 时间：2012-11-05T14:57:09.030
> 
> 标签：php, apache, curl, browserid

我正在实施角色登录系统（来自 Mozilla）。在我的开发机器上，我无法使用 cURL 连接到身份验证服务器。至少看起来是这样。

完全相同的脚本确实从 CLI 运行。

**更新**：我收到此错误，来自 *curl_error()*：

```
A PKCS #11 module returned CKR_DEVICE_ERROR,
indicating that a problem has occurred with the token or slot. 
```

cURL PHP 模块已安装并且支持 https

这是一个测试脚本：

[也在 GitHub 上](https://github.com/itpastorn/webbteknik/blob/master/website/html/curl-test.php)

```
<?php
/**
 * Testing curl and persona
 *
 * Currently a connection is made when running from the CLI,
 * but not when accessed via web
 * Various options have been tried, but make no difference
 */

echo "<pre>\n";

$data = new StdClass();
$data->assertion = "foo";
$data->audience = "http://localhost";

// Do curl
$url = 'https://verifier.login.persona.org/verify';
$ch = curl_init();
curl_setopt_array($ch, array(
    CURLOPT_URL            => $url,
    CURLOPT_POST           => true,
    CURLOPT_POSTFIELDS     => json_encode($data),
    CURLOPT_HEADER         => false,
    CURLOPT_RETURNTRANSFER => true,
    /*
    CURLOPT_SSL_VERIFYPEER => true,
    CURLOPT_SSL_VERIFYHOST => 2,
    CURLOPT_FOLLOWLOCATION => false,
    CURLINFO_HEADER_OUT    => true,
    CURLOPT_CAINFO         => '/etc/ssl/certs/ca-bundle.crt',
    */
    CURLOPT_HTTPHEADER => array('Content-Type: application/json')
));
curl_setopt($ch, CURLINFO_HEADER_OUT, true);
echo "EXEC now\n\n";
$response = curl_exec($ch);
$info = curl_getinfo($ch);
foreach ($info as $ki => $ii) {
    if ( is_array($ii) ) {
        $ii = "(array)";
    }
    echo $ki . " => " . $ii . "\n";
}
curl_close($ch);

// Check response
if ( empty($response) ) {
    header("HTTP/1.0 401 Authentication is possible but has failed");
    echo 'Response is empty - assertion failed: ';
    echo '{"reason" : "Assertion failed, verifying server returned empty content"}';
    exit;
}

//$response = json_decode($response);
echo 'Response decoded: ' . $response . "\n\n"; 
```

从 CLI 运行时的输出：

```
url => https://verifier.login.persona.org/verify
content_type => application/json; charset=utf-8
http_code => 200
header_size => 191
request_size => 175
etc 
```

从服务器运行时的输出

```
url => https://verifier.login.persona.org/verify
content_type => 
http_code => 0
header_size => 0
request_size => 0
etc 
```

我正在运行 Fedora Linux

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:34:52.313

根据[https://bugzilla.redhat.com/show_bug.cgi?id=870856](https://bugzilla.redhat.com/show_bug.cgi?id=870856)在最近的 yum 更新中引入了错误，更新应该可以解决问题。

# machine-learning - 如何衡量回答相同问题的用户之间的相似性

> ID：13234636
> 
> 赞同：0
> 
> 时间：2012-11-05T14:57:25.263
> 
> 标签：machine-learning, recommendation-engine, collaborative-filtering

我正在开发一个向用户推荐内容的项目。我想从每个用户创建一个配置文件，以便我可以对它们进行聚类并提供共同的建议，但在我必须能够衡量这些用户之间的相似性之前。我曾想过一份可以使用模糊标签填写的问卷。

我的问题是如何测量回答此类问题的两个用户 U1 和 U2 的相关性（相似性）？

*   **Q1。**我认为东京是一个不错的城市。**U1：**完全同意 **U2：**部分同意
*   **Q2。**我读过堂吉诃德。**U1：**完全不同意**U2：**完全同意
*   ...
*   **Qn。**我认为塔伦蒂诺是一位出色的电影导演。**U1：** 部分同意**U2：**部分同意

我曾想过将答案转换为数值，然后尝试计算皮尔逊相关系数。但我想知道是否有更优雅的方法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:01:40.683

将数值（来自提供的答案）转换为一个向量然后应用余弦相似度函数会很有用。余弦相似度已被证明比皮尔逊相关系数更可靠（并且更快）。

然而，这不是一个小问题，实施可能非常具有挑战性。

# c# - EventProviderTraceListener 访问被拒绝

> ID：13234643
> 
> 赞同：0
> 
> 时间：2012-11-05T14:57:44.773
> 
> 标签：c#, event-handling, listener, trace

对上一个问题 ( [bit.ly/TFAvl9](http://bit.ly/TFAvl9) ) 的跟进...

最初的问题本质上是：我正在构建一个应用程序，并启动一个外部程序（进程）。关于这个外部程序知之甚少，但它可能会创建文件和/或文件夹。如果它确实创建了文件/文件夹，我希望能够检测到这一点并检索信息（名称、路径等）。我怎么做？

在另一个论坛 ( [bitly.com/PRvsip](http://bitly.com/PRvsip) ) 上，有人建议使用 EventProviderTraceListener。在研究了可用的稀疏信息之后，我仍然无法实现它。希望这里有人可以指出我正确的开始方向......

为了使问题不那么笼统；我现在遇到的问题是：

如果我做

`var listener = new EventProviderTraceListener("EDD08927-9CC4-4E65-B970-C2560FB5C289");`

我收到“拒绝访问”异常。

非常欢迎提出建议：P

沃特

# ios - Google App Engine 对 utf8mb4 的支持

> ID：13234651
> 
> 赞同：1
> 
> 时间：2012-11-05T14:58:08.820
> 
> 标签：ios, google-app-engine, emoji, utf8mb4

根据这篇[文章](http://blog.manbolo.com/2012/10/29/supporting-new-emojis-on-ios-6)，从 iOS4 到 iOS6 支持 emoji 字符的正确方法是使用 utf8mb4 编码。App Engine 的数据存储区是否支持 utf8mb4？目前，我在我的 iOS 应用程序中使用 Java 版本的 App Engine 作为后端。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T11:02:51.017

首先，您链接到的文章讨论了作者使用数据库开发 iOS 应用程序的经验`mysql`。在 mysql 中，编码“utf8”仅表示长度为 1、2 或 3 个字节的字符。

但是，根据定义，utf8 支持 1、2、3 或 4 字节长的字符。因此，在 mysql 编码和排序规则的上下文中，utf8 意味着最多只有 3 个字节的字符。对于 4 字节长的字符，mysql 设计了 ​​utf8mb4 编码。

但是，这仅适用于 mysql 上下文。在 mysql 世界之外，utf8 自动意味着支持 1、2、3 或 4 字节字符。请参阅[UTF-8 维基百科页面](http://en.wikipedia.org/wiki/UTF-8)，它在介绍性段落中谈到了这一点：

> UTF-8 使用一到四个 8 位字节（在 Unicode 标准中称为“八位字节”）对 Unicode 字符集中的 1,112,064[7] 个代码点进行编码。

因此，当一个平台或软件应用程序声称支持 UTF-8 时，这意味着支持所有 1,112,064 个代码点，每个字符可以消耗 1、2、3 或 4 个字节。

mysql 案例是一个异常情况，其中 utf8 编码并不是真正的 100% utf8，而是只有 6% 的 utf-8（但大多数人不会注意到，除非他们开始使用表情符号或其他字符）。

所以我的建议是，当谷歌应用引擎接受 utf-8 作为他们支持的有效编码时，可以安全地假设它们支持 4 字节字符。

# php - PHP 中的命名空间阻止使用 Yii 静态函数

> ID：13234655
> 
> 赞同：5
> 
> 时间：2012-11-05T14:58:15.567
> 
> 标签：php, yii, namespaces

我刚刚在我的小应用程序中实现了命名空间，如下所述：[http ://www.yiiframework.com/doc/guide/1.1/en/basics.namespace](http://www.yiiframework.com/doc/guide/1.1/en/basics.namespace)

我遇到了一个问题，我的控制器将不再访问`Yii::app()->getRequest();`说它找不到`include(C:\Users\bkuhl\htdocs\instaLabel\application\protected\components\Yii.php): failed to open stream: No such file or directory`.

我意识到这是因为我将命名空间声明为应用程序/组件。但我不确定如何解决这个问题......

```
<?php

namespace application\components;

/**
 * Controller is the customized base controller class.
 * All controller classes for this application should extend from this base class.
 */
class Controller extends \CController {
    /* @var $request CHttpRequest */
    protected $request = null;

    /**
     * @var string the default layout for the controller view. Defaults to '//layouts/column1',
     * meaning using a single column layout. See 'protected/views/layouts/column1.php'.
     */
    public $layout='//layouts/column1';
    /**
     * @var array context menu items. This property will be assigned to {@link CMenu::items}.
     */
    public $menu=array();
    /**
     * @var array the breadcrumbs of the current page. The value of this property will
     * be assigned to {@link CBreadcrumbs::links}. Please refer to {@link CBreadcrumbs::links}
     * for more details on how to specify this property.
     */
    public $breadcrumbs=array();

    public function __construct ($id, $module = null) {
        parent::__construct($id, $module);

        $this->request = Yii::app()->getRequest();
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:28:20.990

您需要完全限定相对类名`Yii`。

最方便的方法是[导入](http://www.php.net/manual/en/language.namespaces.importing.php)类：只需`use Yii;`在命名空间声明下方添加即可。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T15:21:44.987

你有没有尝试过：

```
$this->request = \Yii::app()->getRequest(); 
```

`\`将使用[全局命名空间](http://www.php.net/manual/en/language.namespaces.global.php)：

> 使用 \ 为名称添加前缀将指定该名称是全局空间所必需的，即使在命名空间的上下文中也是如此。

# java - 变量不存在？

> ID：13234658
> 
> 赞同：1
> 
> 时间：2012-11-05T14:58:31.907
> 
> 标签：java

所以，我有一些相当简单的代码，但是在第二类中，两个方法都找不到`name`. 这是一个简单的范围问题吗？

```
package rpg;
import java.util.Scanner;

public class Start {
    static String name;
    public static void main (String args[])
    {
        Engine test12 = new Engine();
        name = test12.gameStart();
        System.out.println("So, " + name + " it is!");
    }       
} 
```

哪个调用这个类：

```
package rpg;
import java.util.Scanner;

public class Engine {
    static boolean playerNameLike = false;
    String name = (" ");

    public String gameStart()
    {
        while (playerNameLike = false)
        {
            System.out.println("So, whats your name?");
            Scanner gameStart = new Scanner(System.in);
            name = (gameStart.next());
            nameTest();
        }
        return name;
    }

    public boolean nameTest()
    {
        System.out.println("Does " + name + " sound good?");
        System.out.println("(Y)es or (N)o?");
        Scanner gameStart = new Scanner(System.in);
        String yesNo = new String (gameStart.next());
        if (yesNo.equals("Y"))
        {
            playerNameLike = true;
            return playerNameLike;
        } 
        if (yesNo.equals("N"))
        {
            playerNameLike = false;
            return playerNameLike;
        }
        return playerNameLike;
    }
 } 
```

有谁知道我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:03:46.447

您应该`name`在方法中创建一个局部变量`gameStart`，并将其`nameTest`作为参数传递给，如下所示：

```
public String gameStart()
{
    String name = "";
    boolean playerNameLike = false;
    while (!playerNameLike)
    {
        System.out.println("So, whats your name?");
        Scanner gameStart = new Scanner(System.in);
        name = (gameStart.next());
        playerNameLike  = nameTest(name);
    }
    return name;
}

public boolean nameTest(String name) // Use your current code from here on 
```

此外，您正在分配给语句`false`中的变量。`if`这是允许的，但它不会做你想做的事。您应该使用`==`，或（更好）使用`!`来否定变量：

```
while (!playerNameLike) ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:06:34.597

用于`==`在条件下进行比较：

```
 while (playerNameLike == false) 
```

或者只是将它的否定检查为布尔类型：

```
 while (!playerNameLike) 
```

此外，将`Scanner`实例化移到`while`循环外：

```
 Scanner gameStart = new Scanner(System.in);
 while (!playerNameLike)
 {
    System.out.println("So, whats your name?");
    name = (gameStart.next());
    nameTest();
  } 
```

# extjs - Symfony2 和 Extjs4 集成

> ID：13234660
> 
> 赞同：1
> 
> 时间：2012-11-05T14:58:47.663
> 
> 标签：extjs, symfony, extjs4

我尝试使用 Extjs MVC 应用程序作为 symfony2 网站的前端。我加载 extjs lib 和我的 app.js ：

```
Ext.Loader.setConfig({
    enabled: true
});

Ext.application({
    name: 'Cc',
    appFolder: '/bundles/mybundle/js/app',
    autoCreateViewport: false,
    controllers: [
    ],
    launch: function () {
        Ext.create('Cc.view.Viewport');
    }
}); 
```

在我的应用程序文件夹中有 Viewport.js 但是当我加载应用程序时出现 403 错误。我使用 sf doc 中描述的资产（使用命令行在 /web 中发布它们）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T14:49:18.910

在我检查我的应用程序文件夹的权限后就可以了...

# unit-testing - 如何在 Spring Roo 中创建测试以使用测试数据填充数据库？

> ID：13234672
> 
> 赞同：1
> 
> 时间：2012-11-05T14:59:13.880
> 
> 标签：unit-testing, jpa, spring-roo

我尝试修改为我的实体生成的测试用例，但是当我运行测试时，它不会将数据留在表中。我尝试修改persistence.xml（将持久性从无更改为create-tables），但是当我运行测试时，它会抛出异常，因为它试图更新/删除具有外键依赖项的内容。

我为此使用了错误的工具吗？我希望我能够运行我的测试并留下一个处于已知状态的数据库。我用错了工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T17:27:11.970

这可能与单元测试完成后回滚单元测试事务有关。也许与 @TransactionConfiguration(defaultRollback=true) 有关

我发现了另一个可能会有所启发的帖子

[在 JUnit 中使用 Spring 测试服务时如何回滚数据库事务？](https://stackoverflow.com/questions/4166983/rollback-transaction-when-testing-service-with-spring-hibernate-junit)

# ios - Cordova 2.2 - 升级后应用程序运行速度变慢

> ID：13234673
> 
> 赞同：0
> 
> 时间：2012-11-05T14:59:19.397
> 
> 标签：ios, ios5, ios6, cordova, slowdown

在我们从 phoneGap 升级到 Cordova 2.2 后，应用程序的运行速度明显变慢。我们正在 iOS 5 和 iOS 6 上进行测试，目前还不知道是什么原因导致速度变慢。它没有发生在phoneGap上。

我们确实有一个非常复杂的应用程序和大量的插件。

我只是想知道是否有其他人有这个问题，以及是否有可能的解决方案。

谢谢你，帕斯卡

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-17T04:02:39.847

当我们从 PhoneGap Build 上的 Cordova 2.1.0 切换到使用带有 XCode 的 Cordova 2.2.0 时，我们遇到了类似的问题，并发现性能显着下降；在对 UI 操作的响应方面，我们的应用程序的速度很容易达到原始速度的 1/5 到 1/10。

我们发现 XCode 中默认启用所有插件，并且能够通过禁用不必要的插件（尤其是 Accelerometer）将性能恢复到适当的水平。请参阅[http://iamcam.wordpress.com/2009/10/29/phonegap-up-to-speed/](http://iamcam.wordpress.com/2009/10/29/phonegap-up-to-speed/)

在禁用插件（快速简单的解决方案）之前，我们花费了大量时间清理我们的代码（困难但值得的解决方案）。具体来说：

- 为我们知道要操作的项目添加 3D 变换（强制硬件加速；某些操作的显着性能提升）和硬件加速滚动（-webkit-overflow-scrolling: touch;）

-删除了获取对象位置和偏移量的无关调用（某些操作的显着性能提升）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-22T16:11:21.990

阅读 jmshearer 的帖子和链接后，删除加速计插件对我们来说也是最大的性能改进，但值得从 XCode 中的 Cordova.plist 中删除任何不必要的插件并重新编译。

# .htaccess - 将 domain.com/contact.html 重定向到 newdomain.com/contact.html

> ID：13234677
> 
> 赞同：0
> 
> 时间：2012-11-05T14:59:29.833
> 
> 标签：.htaccess, redirect

我想将一个像这样的联系表单的 html 页面重定向`www.abc.com/contact.html` 到不同的域，但没有像这样 的**www**`xyz.com/contact.html`。

我有 2 个具有相同数据的域（只是域名不同）。xyz.com 上的表单运行良好，但 abc.com 上的表单无法运行，即使两个域上的代码 100% 相同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:09:07.853

只需将以下行放入您的 .htaccess 文件中。

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www?.abc.com [NC]
RewriteRule ^contact\.html$ http://xyz.com%{REQUEST_URI} [R=301,L] 
```

**编辑：**

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www.abc.com [NC]
RewriteRule ^contact\.html$ http://xyz.com%{REQUEST_URI} [R=301,L]

RewriteCond %{HTTP_HOST} ^abc.com [NC]
RewriteRule ^contact\.html$ http://xyz.com%{REQUEST_URI} [R=301,L] 
```

# visual-studio-2012 - 导出 DLL 描述 - Visual Studio 2012 参考

> ID：13234678
> 
> 赞同：0
> 
> 时间：2012-11-05T14:59:32.570
> 
> 标签：visual-studio-2012, dll

我的同事让我看看他需要使用的 dll。所以我在 Visual Studio 2012 上使用了对象浏览器。现在他问我是否可以像 dll 引用的文本版本一样导出（方法签名和属性）。

有没有办法做到这一点？

我已经可以看到类似的东西

```
short get_Param(short sNumParam)
    Member of LMLib.ISWKey 
```

在专门用于描述的窗口上。我只需要将每个方法放在一个文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:43:42.837

您可以通过一个技巧来做到这一点，并让 IDE 为您生成定义。在文本编辑器中编写一小段代码，类似于：

```
 var obj = new LMLib.ISWKey(); 
```

在文本编辑器中右键单击 ISWKey，然后选择“转到定义”。您将获得一个新的文本文件，其中包含从元数据自动生成的定义。

如果它是一个 COM 接口，肯定听起来像这样的名称，那么您可以从 Visual Studio 命令提示符运行 Oleview.exe。使用 File + View Typelib，选择 COM 服务器的类型库，您将获得服务器自动生成的 IDL。如果它实际上是一个 COM 服务器，则更喜欢这种方法，您将获得更多信息，包括 [helpstring] 属性。

当然，不要犹豫，向 DLL 的所有者索取文档。您为使用 DLL 的许可支付了很多钱。

# c# - 将字符串解码为 DateTime

> ID：13234685
> 
> 赞同：0
> 
> 时间：2012-11-05T14:59:55.663
> 
> 标签：c#, datetime, string-decoding

我在数据库中有 DateTime 作为字符串，例如：6@11@2012@1@37 我有这样的解码方法：

```
public static DateTime DecodeTime(string time)
        {
            int day = Int32.Parse(time.Split('@')[0].Trim());
            int month = Int32.Parse(time.Split('@')[1].Trim());
            int year = Int32.Parse(time.Split('@')[2].Trim());
            int hour = Int32.Parse(time.Split('@')[3].Trim());
            int minute = Int32.Parse(time.Split('@')[4].Trim());

            DateTime decode = new DateTime(year, month, day, hour, minute, 0);

            return decode;
        } 
```

我想做的是尝试将信息放入数据集中，如下所示：

```
 public DataSet GetAllBooking()
        {
            string connString = ConfigurationManager.ConnectionStrings["SQL2012_892524_amritConnectionString"].ConnectionString;
            DataSet dataSet = new DataSet();
            // Create connection object
            //OleDbConnection oleConn = new OleDbConnection(connString);
            SqlConnection oleConn = new SqlConnection(connString);
             try
            {
                oleConn.Open();
                string sql = "SELECT TOP (50) Driver.FirstName + Driver.LastName AS DriverName, Booking.BookingId, Driver.CarId AS CarUsed, Booking.CreateDateTime AS BookingDateTime, Booking.Status FROM Booking INNER JOIN Customer ON Booking.CustomerId = Customer.CustomerId INNER JOIN Driver ON Booking.DriverId = Driver.DriverId ORDER BY Booking.BookingId DESC";
                SqlDataAdapter dataAdapter = new SqlDataAdapter(sql, oleConn);
                dataAdapter.Fill(dataSet, "Booking");
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }
            finally
            {
                oleConn.Close();
            }
            if (dataSet.Tables.Count <= 0)
                return null;
            else
                return dataSet;
        } 
```

数据库中将日期和时间保存为字符串的列是 CreationTime。

是否可以通过调用 DecodeTime 方法在 sql 中对这些时间进行编码并将其显示到 gridview。

![在此处输入图像描述](../Images/e4a7418411f52beefa33f9959870e938.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:27:24.867

**这可以使用`String.Format`方法来实现。**

像往常一样将 GridView 绑定到您的数据源，并在标记中声明一个模板列，如下所示。

```
<asp:TemplateField HeaderText="Date">
    <ItemTemplate>
        <%# String.Format("{2}/{1}/{0} {3}:{4}:00", 
                  Eval("ColName").Split('@') ) %>
    </ItemTemplate>
<asp:TemplateField> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:08:22.270

SqlDataAdapter/DataTable/DataColumn 不提供任何机制来拦截值并将其类型更改为 DateTime（您只能将某些内容转换为自定义类）。最好的办法是在 SQL 查询中进行转换（尽管字符串函数相当有限，因此查询会很长）。

另一种选择是在返回之前向表中添加一个新的 DateTime 列，并遍历每一行以调用您的方法。

```
if (dataSet.Tables.Count == 0)
    return null;

dataSet.Tables[0].Columns.Add(new DataColumn("CreationTime2", typeof(DateTime)));
foreach (var r in dataSet.Tables[0].Rows)
    r["CreationTime2"] = DecodeTime(r["CreationTime"]);

return dataSet; 
```

# apache-flex - Spark TextArea - 更改部分文本颜色

> ID：13234688
> 
> 赞同：0
> 
> 时间：2012-11-05T15:00:17.790
> 
> 标签：apache-flex, colors, styles, textarea, flex-spark

如何更改部分文本颜色`spark.components.TextArea`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T09:23:06.207

TextArea 可以做到这一点。试试这个：

```
 var format:TextLayoutFormat = new TextLayoutFormat();
    format.color = 0x00ff00;            
    this.textarea.setFormatOfRange(format, startIndex, endIndex); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:02:37.203

好吧，TextArea 不能这样做。您应该尝试 RichText 或一些相关组件。

[http://help.adobe.com/en_US/flex/using/WS02f7d8d4857b1677-165a04e1126951a2d98-7fca.html](http://help.adobe.com/en_US/flex/using/WS02f7d8d4857b1677-165a04e1126951a2d98-7fca.html)

# c++ - 在 Eclipse 中哪里可以找到解析的 Boost.Test 输出

> ID：13234709
> 
> 赞同：12
> 
> 时间：2012-11-05T15:01:26.960
> 
> 标签：c++, eclipse, unit-testing, eclipse-cdt, boost-test

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T17:11:06.653

如果您使用的是 Eclipse，那么还有一个非常棒的插件称为[TestRunner](https://github.com/xgsa/cdt-tests-runner/wiki/Tutorial)，用于运行 CDT 单元测试，就像 Java 或 Python 单元测试一样。它为您处理单元测试解析。您将为单元测试获得一个单独的控制台窗口，并使用级别过滤器对其进行排列。单击错误/警告会将您带到编辑器中的单元测试行号。您还可以从 Eclipse 内部设置详细级别以及其他一些设置。

您可以使用 Eclipse 更新中的以下链接直接安装插件[https://raw.github.com/xgsa/cdt-tests-runner/tests_runner_demo/testsrunner/org.eclipse.cdt.testsrunner-updatesite/site.xml](https://raw.github.com/xgsa/cdt-tests-runner/tests_runner_demo/testsrunner/org.eclipse.cdt.testsrunner-updatesite/site.xml)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T18:22:53.243

为了 eclipse 解析错误，必须在编译时在控制台视图中打印错误。如果您在运行时发出错误，则必须添加要由 Makefile 调用的程序。

这就是我在嵌入式系统中的做法。

# java - 使用 2 个以上的模块在本地运行 GWT

> ID：13234710
> 
> 赞同：1
> 
> 时间：2012-11-05T15:01:26.260
> 
> 标签：java, gwt, google-eclipse-plugin

Lipse 插件尝试“本地”运行一个新的 Web 应用程序（从 Eclipse 内部，使用内置的 Jetty 容器）。我正在按照[本 GWT 教程](http://www.vogella.com/articles/GWT/article.html)中的说明进行操作，但遇到了一些问题，可能是因为我定义了模块的方式。

我有一个具有以下目录结构的 Web 应用程序项目：

```
MyWebApp/
    src/
        com.mywebapp.client.modules
            WebModule
            AppModule
            WebModule.gwt.xml
            AppModule.gwt.xml
    war/
        WEB-INF/
            lib/
            web.xml
    css/
        web-module.css
        app-module.css
    hmtl/
        web-module-host-page.html
        app-module-host-page.html 
```

我希望我的应用程序有 2 个模块：`WebModule`这是“公共网站”，以及在用户访问时加载的模块，`http://mywebapp.com`然后是`AppModule`仅在用户登录后下载的模块，并包含“私人应用程序”功能的网站。

**`WebModule.java`**：

```
public class WebModule implements EntryPoint {
    Label label = new Label("Hello, GWT!");

    @Override
    public void onModuleLoad() {
        RootPanel.get().add(label);
    }
} 
```

**`WebModule.gwt.xml`**：

```
<?xml version="1.0" encoding="UTF-8"?>
<module rename-to="web-module">
    <inherits name="com.google.gwt.user.User"/>
    <inherits name="com.google.gwt.user.theme.standard.Standard"/>
    <entry-point class="com.mywebapp.client.modules.WebModule"/>
    <source path='client'/>
    <source path='shared'/>
</module> 
```

**`web.xml`**：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<web-app xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    version="2.5"
    xsi:schemaLocation=
        "http://java.sun.com/xml/ns/javaee
        http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd">

    <welcome-file-list>
        <welcome-file>web-module-host-page.html</welcome-file>
    </welcome-file-list>

    <servlet>
        <servlet-name>SystemServiceServlet</servlet-name>
        <servlet-class>com.google.api.server.spi.SystemServiceServlet</servlet-class>
        <init-param>
            <param-name>services</param-name>
            <param-value/>
        </init-param>
    </servlet>

    <servlet-mapping>
        <servlet-name>SystemServiceServlet</servlet-name>
        <url-pattern>/_ah/spi/*</url-pattern>
    </servlet-mapping>
</web-app> 
```

**`web-module-host-page.html`**：

```
<!doctype html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <link type="text/css" rel="stylesheet" href="css/web-module.css">
    <title>Hello, GWT!</title>
    <script type="text/javascript" language="javascript" src="mywebapp/mywebapp.nocache.js"></script>
</head>

<body>
    <iframe src="javascript:''" id="__gwt_historyFrame" tabIndex='-1' style="position:absolute;width:0;height:0;border:0"></iframe>
    <noscript>
        Turn on javascript!
    </noscript>
</body>
</html> 
```

为了尝试从 Eclipse 运行它（在开发模式下，以便我可以从指向`localhost`url 的浏览器运行/调试），我创建了一个新的运行配置，如下所示：

```
Run Configurations
    Main tab
        Main class: com.google.gwt.dev.DevMode
    Server tab
        "Run built-in server" is checked at Port 8888
    GWT tab
        Code server port: 9997
        Available modules:
            AppModule - com.mywebapp.client.modules.AppModule
            WebModule - com.mywebapp.client.modules.WebModule
    Arguments tab - see below 
```

参数选项卡>>程序参数：

> -remoteUI "${gwt_remote_ui_server_port}:${unique_id}" -startupUrl web-module-host-page.html -logLevel INFO -codeServerPort 9997 -port 8888 -server com.google.appengine.tools.development.gwt.AppEngineLauncher -war /home/myuser/sandbox/workbench/eclipse/workspace/mywebapp/war com.mywebapp.client.modules.WebModule com.mywebapp.client.modules.AppModule

参数选项卡 >> VM 参数：

> -Ddatastore.default_high_rep_job_policy_unapplied_job_pct=50 -Xmx512m -javaagent:/home/myuser/sandbox/workbench/google/gae-sdk/1.7.1/appengine-java-sdk-1.7.1/lib/agent/appengine-agent.jar

### 最后，问题！

当我尝试运行此配置时，我得到以下控制台输出：

```
Loading modules
    com.mywebapp.client.modules.WebModule
    [ERROR] Invalid name 'web-module'
    [ERROR] Failure while parsing XML
com.google.gwt.core.ext.UnableToCompleteException: (see previous log entries)
    at com.google.gwt.dev.cfg.ModuleDefSchema$NullableNameAttrCvt.convertToArg(ModuleDefSchema.java:1048)
    at com.google.gwt.dev.util.xml.HandlerArgs.convertToArg(HandlerArgs.java:64)
    at com.google.gwt.dev.util.xml.HandlerMethod.invokeBegin(HandlerMethod.java:221)
    at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.startElement(ReflectiveParser.java:294)
    at org.apache.xerces.parsers.AbstractSAXParser.startElement(Unknown Source)
    at org.apache.xerces.impl.dtd.XMLDTDValidator.startElement(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanStartElement(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentScannerImpl$ContentDispatcher.scanRootElementHook(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl$FragmentContentDispatcher.dispatch(Unknown Source)
    at org.apache.xerces.impl.XMLDocumentFragmentScannerImpl.scanDocument(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XML11Configuration.parse(Unknown Source)
    at org.apache.xerces.parsers.XMLParser.parse(Unknown Source)
    at org.apache.xerces.parsers.AbstractSAXParser.parse(Unknown Source)
    at org.apache.xerces.jaxp.SAXParserImpl$JAXPSAXParser.parse(Unknown Source)
    at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.parse(ReflectiveParser.java:347)
    at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.access$200(ReflectiveParser.java:68)
    at com.google.gwt.dev.util.xml.ReflectiveParser.parse(ReflectiveParser.java:418)
    at com.google.gwt.dev.cfg.ModuleDefLoader.nestedLoad(ModuleDefLoader.java:296)
    at com.google.gwt.dev.cfg.ModuleDefLoader$1.load(ModuleDefLoader.java:198)
    at com.google.gwt.dev.cfg.ModuleDefLoader.doLoadModule(ModuleDefLoader.java:324)
    at com.google.gwt.dev.cfg.ModuleDefLoader.loadFromClassPath(ModuleDefLoader.java:156)
    at com.google.gwt.dev.DevModeBase.loadModule(DevModeBase.java:992)
    at com.google.gwt.dev.DevMode.loadModule(DevMode.java:557)
    at com.google.gwt.dev.DevMode.doStartup(DevMode.java:443)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1058)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311)
    [ERROR] Unexpected error while processing XML
com.google.gwt.core.ext.UnableToCompleteException: (see previous log entries)
    at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.parse(ReflectiveParser.java:371)
    at com.google.gwt.dev.util.xml.ReflectiveParser$Impl.access$200(ReflectiveParser.java:68)
    at com.google.gwt.dev.util.xml.ReflectiveParser.parse(ReflectiveParser.java:418)
    at com.google.gwt.dev.cfg.ModuleDefLoader.nestedLoad(ModuleDefLoader.java:296)
    at com.google.gwt.dev.cfg.ModuleDefLoader$1.load(ModuleDefLoader.java:198)
    at com.google.gwt.dev.cfg.ModuleDefLoader.doLoadModule(ModuleDefLoader.java:324)
    at com.google.gwt.dev.cfg.ModuleDefLoader.loadFromClassPath(ModuleDefLoader.java:156)
    at com.google.gwt.dev.DevModeBase.loadModule(DevModeBase.java:992)
    at com.google.gwt.dev.DevMode.loadModule(DevMode.java:557)
    at com.google.gwt.dev.DevMode.doStartup(DevMode.java:443)
    at com.google.gwt.dev.DevModeBase.startUp(DevModeBase.java:1058)
    at com.google.gwt.dev.DevModeBase.run(DevModeBase.java:811)
    at com.google.gwt.dev.DevMode.main(DevMode.java:311)
    [ERROR] shell failed in doStartup method 
```

**任何 GWT 大师都可以发现我的配置错误（并解释原因！）吗？**异常/错误输出在这里不是很具有描述性。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T16:01:15.307

中的名称`rename-to`必须是有效 Java 标识符的点链。`web-module`不是有效的 Java 标识符（其中的破折号）。

尝试`rename-to="webModule"`,`rename-to="webmodule"`或者`rename-to="web.module"`, 当然也可以调整`<script>`HTML 主机页面中的标签 ( `webModule/webModule.nocache.js`,`webmodule/webmodule.nocache.js`或`web.module/web.module.nocache.js`分别)。

这与尝试运行多个模块或其他无关。

# c++ - IP2Location 线程安全吗？

> ID：13234711
> 
> 赞同：0
> 
> 时间：2012-11-05T15:01:33.200
> 
> 标签：c++, multithreading, unix, thread-safety

我目前正在寻找在 apache 服务中使用 IP2Location。我注意到的一件事是关于 IP2Location 是否是线程安全的信息很少。

```
IP2Location *IP2LocationObj = IP2Location_open("../data/IP-COUNTRY.BIN"); 
```

下面能够处理在多个线程中使用吗？

```
IP2LocationRecord *record = IP2Location_get_all(IP2LocationObj, "161.11.12.13"); 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-09T03:31:32.800

我已经使用了很长时间，因为我可以说它是线程安全的。

# macos - CFSocket 数据回调

> ID：13234712
> 
> 赞同：3
> 
> 时间：2012-11-05T15:01:33.007
> 
> 标签：macos, core-foundation, cfsocket

有谁知道 CFSocket API 如何从套接字读取字节到数据回调中？起初我认为它会做一些“幕后”工作，以始终以与发送数据相同的长度返回数据，但经过一些测试后，我发现如果我快速发送大量数据，数据会以块的形式返回，所以我需要使用标头自己解析数据包。

到目前为止，在测试中我还没有收到任何部分数据（即，如果我发送了 1000 个字节，我总是在数据回调中得到 1000 个字节，但绝不会更少）但我想如果缓冲区真的满了，这可能会发生，我将不得不重建数据包如果它们不完整。

我是否基本上需要对 CFSocket 使用与 BSD 套接字相同的数据包读取策略，即在每个数据包前面加上一个包含长度的标头，将流解析为数据包长度，如果数据包在回调时不完整，则重新组合数据再次被调用。

谢谢！

# objective-c - 自定义 UITableViewCell 和 IBOutlet 出错

> ID：13234713
> 
> 赞同：0
> 
> 时间：2012-11-05T15:01:37.563
> 
> 标签：objective-c, ios, uitableview, xib

我首先说我不确定我正在做的事情是否是最好的方法。我有以下场景：一个动态分组`TableView`有两个组，第一个有一个静态单元格，第二个有一个由数组填充的动态单元格。第二组工作正常，第一组不行！

第一组只有一个自定义单元格，我使用此代码加载：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    // ...

    if (indexPath.section == kSectionHeader) {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"ActorDetailsHeaderCell" owner:self options:nil];
        ActorDetailsHeaderCell * headerCell = [topLevelObjects objectAtIndex:0];

        headerCell.image.image = [UIImage imageNamed:self.actor.image];
        headerCell.actorName.text = self.actor.name;
        headerCell.info.text = @"";

        return headerCell;
    }

    // ...
} 
```

该`ActorDetailsHeaderCell.xib`文件有一个名为`ActorDetailsHeaderCell`扩展类的自定义`UITableViewCell`类。如果我留下这样的一切（仅用于测试目的）一切正常，只要我设置一个文件`IBOutlet`，`ActorDetailsHeaderCell.h`我就会收到这个错误：

```
'NSUnknownKeyException', reason: '[<ActorDetailsViewController 0x7485a60> setValue:forUndefinedKey:]: this class is not key value coding-compliant for the key name.' 
```

我在 Stackoverflow 上发现了这些问题：[iPhone: "unrecognized selector sent to instance"](https://stackoverflow.com/questions/2015419/iphone-unrecognized-selector-sent-to-instance)和[自定义 UITableViewCell 错误](https://stackoverflow.com/questions/5343172/error-with-custom-uitableviewcell)，但这些答案似乎并不能解决我的问题。我试图删除`.xib`和类并从头开始重写它们，但那个该死的错误总是存在！

我最后说，同样的东西也用在了其他东西上`UITableViewController`，而且效果很好！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T09:01:38.847

我不知道为什么今天一切正常！我昨天晚上关闭了该项目，但出现了那个错误，今天早上该应用程序可以正常工作了！

我认为是一个 xcode 错误...我不知道！不管怎么说，还是要谢谢你

# php - 谷歌浏览器和 IE 内容上方的空白区域

> ID：13234716
> 
> 赞同：0
> 
> 时间：2012-11-05T15:01:43.380
> 
> 标签：php, css, drupal

我们用drupal 开发了一个网站。除了一页，一切都很好。在 chrome 和 IE 中的内容上方有一个空白区域。在 Firefox 中它运行良好。下面是网址

[http://www.infronics.com/news-room/news-events](http://www.infronics.com/news-room/news-events)

请帮我解决问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:09:24.103

它与你的`.sidebar1`div有关。它隐藏在您的内容后面，但仍占用空间。我的猜测是因为你有`display:table`或`display:table-row`几乎所有的父 div。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:11:10.023

似乎有一个名为 .sidebar1 的 div 占用了所有空间。

[http://cl.ly/image/30252D011p20](http://cl.ly/image/30252D011p20)

# math - 如何将无符号数字从有符号转换为无符号（二进制和十六进制）？

> ID：13234718
> 
> 赞同：3
> 
> 时间：2012-11-05T15:01:59.660
> 
> 标签：math, assembly, binary, hex

所以我正在尝试从 Randall Hyde 的书中学习汇编语言：汇编语言的艺术，我已经完成了第一章的学习，现在我正在尝试做练习。我有以下问题：如何将二进制值（正或负）转换为相反符号的十六进制值。是的，我知道如何用二进制表示从 0 到 15 的数字，而且 10 是 f 等等关于......我遇到的问题如下......我得到了这个数字：1001 1001，我必须将其转换为相反的值。到目前为止，我已经使用了二进制补码并获得了这个：

```
1001 1001 ----->shifting bits -----> 0110 0110
                add 1         -----> 0110 0111 
```

我应该得到与第一个数字相反的结果。相反，当我计算结果的值时，我得到了这个：

```
1001 1001 = 2^0+2^3+2^4+2^7 = 1+8+16+128 = 153 (which in my opinion is fine...) 
```

转换数字后，我得到了这个：

```
0110 0111= 2^0+2^1+2^2+2^5+2^6 = 1+2+4+32+64 = -103 
```

我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:28:39.453

你的术语有点不对劲。你想翻转位（你做了），而不是“移动”它们（这是你稍后会学到的东西。

是什么让你觉得你做错了什么？一个数的负数`x`是另一个数`y`，如`x + y = 0`。让我们看看你的两个数字并将它们相加：

```
 1001 1001
+ 0110 0111
-----------
  1111 1112
          ^ oops, 2 should be 10, so record 0 and carry the 1

  1111 1110
+        10 
-----------
  1111 1120
         ^ oops, 2 should be 10, so record 0 and carry the 1 
```

一旦你继续携带 1，你能看到这将在哪里结束吗？

这里要学习的教训是，为了解释一个数字，您需要知道它是否打算成为一个有符号的数字。如果它打算是一个有符号数并且设置了符号位，那么为了将其转换为人类输出，您应该首先否定该数字，使其为正数，然后输出一个负号和正数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:28:02.043

符号位的“值”是-128。这就是诀窍。
（对于无符号值，MSB的值自然是+128）

1001 1001 = -128 + 16+8+1 = -103 --> 通过反转位 0110 0110 = 64+32 + 4+2 = 102 转换为绝对值
（加 1 时，0110 0111 == 103）

1001 1001 = 128 + 16 + 8 + 1 = 153 无符号。

编辑：另一种选择：

|1001 1001| = 256 - (128+16+8+1) = 256-153 = 103

# machine-learning - 人脸检测和裁剪

> ID：13234723
> 
> 赞同：5
> 
> 时间：2012-11-05T15:02:12.000
> 
> 标签：machine-learning, artificial-intelligence, computer-vision, face-detection, face-recognition

**项目：人脸检测**

**描述：**我想检测并裁剪图像中的人脸。图像是通过网络摄像头捕获的，每张图像只有一张脸。我使用了 OpenCV 人脸检测器，但我对裁剪不满意。因此，我开始使用 STASM (http://www.milbo.users.sonic.net/stasm/) 人脸界标检测器来裁剪图像。STASM 使用 OpenCV 人脸检测器在图像中查找人脸，而 STASM 在人脸中定位地标。在光线不好的情况下，来自 STASM 的裁剪图像效果不佳，因为它不能单独准确地检测面部。

> 1）我想知道任何更好的人脸检测算法。我的主要目标是从图像中裁剪人脸。
> 
> 2）目前我正在使用 STASM 进行裁剪。在光线不好的情况下或在图像中，如果未捕获整个或整个面部（前额到下巴），则 STASM 裁剪不可靠（输出将仅是眼睛或嘴唇）。在我的应用程序中，如果 stasm 没有正确的输出，或者脸部没有被正确裁剪，那么我应该拒绝这些图像。怎么做？所以我打算通过找到眼睛来验证图像中的人脸。如果我的方法是正确的，如何从裁剪的图像中检测眼睛？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-22T04:09:45.693

通过使用嵌套级联分类器检测脸部的眼睛，我在我的一个项目中取得了相当不错的结果，就像在交付的示例中一样。但后来我使用了一个额外的技巧：我将 nestedCascade.detectMultiScale() 的 minNeighbors 参数调低为 0。

这意味着你会得到很多结果。可能会多次识别出一只眼睛。然后我检查结果集中在脸部左侧和右侧的位置。聚集点是实际的眼睛位置。

然后我旋转初始图像。旋转中心是我发现的面部中心，旋转角度是检测到的眼睛之间的角度。然后我对旋转后的图像进行另一次人脸检测，并确保在nestedCascade.detectMultiScale() 的参数中使用非常低的比例因子。

在大多数情况下，结果是完美归一化的面部图像。当然，成功仍然取决于您的闪电条件到底有多糟糕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-22T00:57:41.993

尝试使用 OpenCV 的眼睛检测器。并根据眼睛位置调整面部框。

# ios - 如何从 UIalertview 更改视图？

> ID：13234724
> 
> 赞同：0
> 
> 时间：2012-11-05T15:02:12.797
> 
> 标签：ios, uiview, uiviewcontroller, uialertview

请向我解释当我单击显示特定表单的 UIalertView 时如何更改 UIView

班级。如果您知道任何教程，请不要犹豫

假设当我收到特殊数据包时，我当前正在显示 viewcontoller1，那么我必须根据用户选择显示另一个 xib

我在 UIAlertView 委托中尝试过 pushViewController ，但它不起作用

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:10:05.890

使用 UIAlertView 委托。因此，在您要从中调用的特定类中。在头文件中，像这样添加

```
@interface SomeClass : UIViewController <UIAlertViewDelegate> {
... 
```

然后当警报是 alloc/init 时设置委托

```
UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"title" message:@"message" delegate:self cancelButtonTitle:@"NO" otherButtonTitles:@"YES", nil];
        [alert setDelegate:self];
        [alert show]; 
```

在与 alertView 相同的类中，放入此委托方法。

```
-(void)alertView:(UIAlertView *)alertView didDismissWithButtonIndex:(NSInteger)buttonIndex {
    if ([alertView cancelButtonIndex] == buttonIndex){
        return;
    //Do your UIView change here
} 
```

希望这可以帮助

# linux - 使用 log4j 将日志数据写入 syslog

> ID：13234727
> 
> 赞同：12
> 
> 时间：2012-11-05T15:02:30.993
> 
> 标签：linux, log4j, syslog, rsyslog

我无法将日志消息写入系统日志。任何帮助都会很棒。这是我的简单 log4j 程序

```
import org.apache.log4j.Logger;
import java.io.*;
import java.sql.SQLException;
import java.util.*;

public class log4jExample
{
  /* Get actual class name to be printed on */
  static Logger log = Logger.getLogger(log4jExample.class.getName());

  public static void main(String[] args) throws IOException,SQLException
  {

     log.error("Hello this is an error message");
     log.info("Hello this is an info message");
     log.fatal("Fatal error message");
  }
} 
```

我的系统日志属性文件

```
# configure the root logger
log4j.rootLogger=INFO, SYSLOG

# configure Syslog facility LOCAL1 appender
log4j.appender.SYSLOG=org.apache.log4j.net.SyslogAppender
log4j.appender.SYSLOG.threshold=WARN
log4j.appender.SYSLOG.syslogHost=localhost
log4j.appender.SYSLOG.facility=LOCAL4
log4j.appender.SYSLOG.layout=org.apache.log4j.PatternLayout
log4j.appender.SYSLOG.layout.conversionPattern=[%p] %c:%L - %m%n 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-05T21:06:22.307

将以下行添加到 rsyslog.conf 文件

```
$ModLoad imudp
$UDPServerRun 514 
```

它对我有用。

修改后需要重新启动 rsyslog。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-11-19T21:28:46.867

上面@Sandeep 的答案是正确的，但它是从 2012 年开始的，所以我想为使用更新设置的人们扩展一点。例如，在 Ubuntu 18.04 上，该`/etc/rsyslog.conf`文件现在在文件顶部附近有数据，如下所示：

```
#################
#### MODULES ####
#################

module(load="imuxsock") # provides support for local system logging
#module(load="immark")  # provides --MARK-- message capability

# provides UDP syslog reception
#module(load="imudp")
#input(type="imudp" port="514")

# provides TCP syslog reception
#module(load="imtcp")
#input(type="imtcp" port="514") 
```

取消注释两条 UDP 行然后运行`sudo service rsyslog restart`对我有用。Java Log4J Syslog appender ( [https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/net/SyslogAppender.html](https://logging.apache.org/log4j/1.2/apidocs/org/apache/log4j/net/SyslogAppender.html) ) 期望`syslog`在 localhost 的 UDP 端口 514 上进行监听。

作为潜在的进一步安全改进，您还可以考虑绑定到环回地址，因此如果您不需要，端口 514 在主机外部不可见：

```
input(type="imudp" port="514" address="127.0.0.1") 
```

也可以在不触及现有`/etc/rsyslog.conf`文件的情况下进行此更新；相反，您可以在目录下添加一个新的 conf 文件`/etc/rsyslog.d/`，例如`/etc/rsyslog.d/10-open-upd-port.conf`，仅包含以下行：

```
module(load="imudp")
input(type="imudp" port="514" address="127.0.0.1") 
```

然后`rsyslog`如上所述重新启动守护程序。

要查看`rsyslog`守护程序是否在主动侦听 UDP 端口 514，我发现此命令也很有用：（`sudo lsof -iUDP:514 -nP -c rsyslogd -a`显示端口 UDP 514 上的侦听器，其命令为“rsyslogd”）。

# java - Java 编程做循环和库

> ID：13234732
> 
> 赞同：1
> 
> 时间：2012-11-05T15:02:46.610
> 
> 标签：java

开始。我在 Java 中分配作业时遇到问题。我们被要求创建一个程序，用户需要从丢失的短语中猜测字母。我创建了这个短语并用 ? 替换了每个字符，但现在用户需要猜测。如果用户正确，我如何构造 for 循环以显示每个字符。这就是我迄今为止在 Eclipse 上所拥有的。

```
 public static void main(String[]args)
 {
    Scanner stdIn = new Scanner(System.in);

    String cPhrase = "be understaning";
    char g;
    boolean found;
    String guessed;

    System.out.println("\tCommon Phrase");
    System.out.println("_ _ _ _ _ _ _ _ _ _ _ _ _");
    System.out.println(cPhrase.replaceAll("[a-z]", "?"));
    System.out.println(" ");
    System.out.print(" Enter a lowercase letter guess: ");

    g = stdIn.nextLine();  // I am trumped right  here not sure what to do?
                                      // Can't convert char to str
    for (int i = 0; i < cPhrase.length(); ++i)
    {
        if( cPhrase.charAt(i) == g)
            {
            found = true;
            }
        if (found)
        {
            guessed += g; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:39:52.223

这是一个快速的解决方案。但是请不要只是复制粘贴，您仍然需要理解它（因此我放入了内联评论）。

```
public static void main(String[] args)
{
    Scanner stdIn = new Scanner(System.in);

    String phrase = "be understanding";
    boolean[] guessed = new boolean[phrase.length()];
    // walk thru the phrase and set all non-chars to be guessed
    for (int i = 0; i < phrase.length(); i++)
        if (!phrase.substring(i, i + 1).matches("[a-z]"))
            guessed[i] = true;

    // loop until we break out
    while (true)
    {
        System.out.print("Please guess a char: ");
        char in = stdIn.nextLine().charAt(0);

        boolean allGuessed = true;
        System.out.print("Phrase: ");
        // walk over each char in the phrase
        for (int i = 0; i < phrase.length(); i++)
        {
            char c = phrase.charAt(i);
            // and check if he matches the input
            if (in == c)
                guessed[i] = true;
            // if we have an not already guessed char, dont end it
            if (!guessed[i])
                allGuessed = false;
            // print out the char if it is guessed (note the ternary if operator)
            System.out.print(guessed[i] ? c : "?");
        }
        System.out.println("\n------------------");
        // if all chars are guessed break out of the loop
        if (allGuessed)
            break;
    }

    System.out.println("Congrats, you solved the puzzle!");

    stdIn.close();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:17:50.307

您快到了。

使用 while 而不是绑定到布尔条件的 for 循环。当且仅当 word 中的所有字符都猜到时，布尔值才会设置为 false。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:19:46.447

您可以简单地获取输入行的第一个字符（假设一次只猜测一个字符）

```
g = stdIn.nextLine().charAt(0); 
```

要循环直到用户猜出整个短语，您需要用 . 将代码括起来`while`。

```
while(not complete)
{
  get input
  process input
  show progress
} 
```

# javascript - OAuth 官方申请

> ID：13234738
> 
> 赞同：0
> 
> 时间：2012-11-05T15:03:00.347
> 
> 标签：javascript, cordova, oauth, oauth-2.0

> **可能重复：**
> [在自己的移动应用中进行身份验证](https://stackoverflow.com/questions/13224264/authentication-in-own-mobile-app)

我已成功实施 OAuth2 以保护对我的 API 的访问。我还有一个问题。

我实际上正在开发一个官方应用程序，显然我必须跳过“授权此应用程序访问我的数据”这一步（顺便说一句，Facebook 和谷歌的产品没有这一步）。

我可以使用经典的身份验证方法（例如在我的网站上使用 API），但我认为我必须能够撤销官方应用程序（例如，在手机被盗的情况下）。谷歌和 Twitter 提供了撤销官方应用程序的可能性。我想他们也在他们的官方应用程序中使用 OAuth。

**我的问题是：** 由于我认为源代码不是很安全（黑客可以使用逆向工程），我如何识别官方应用程序（以便按需为其提供访问令牌）？

总而言之，我不能在应用程序源代码中存储密钥（不安全），但我不希望我的应用程序必须被用户接受。

你有想法吗？

在此先感谢，请原谅我糟糕的英语。

# java - 在 Java 中编写具有双返回值和参数的算法方法的问题

> ID：13234739
> 
> 赞同：1
> 
> 时间：2012-11-05T15:03:02.267
> 
> 标签：java

几年前我为 C++ 编写了一个方法，现在正试图将它应用到 Java 中。我认为这就像编辑方法的第一行一样简单，但我错了。

代码如下。更新：

```
import static java.lang.Math.*;

public static double getJD(double y,double m,double d){
    if (m<=2.0){
        y-=1.0;
        m+=12.0;
    }
    double a=floor(y/100.0);
    return (365.25*(y+4716.0))+(30.6001*(m+1))+d+(2.0-a+floor(a/4.0))-1524.5;
} 
```

编辑：Eclipse 仍然被下面列出的编译器错误吓坏了。

> 说明资源路径位置类型标记“-”上的语法错误，删除此标记 jd.java /Elapsed time calc/src 第 7 行 Java 问题标记“;”上的语法错误，？预期的 jd.java /Elapsed time calc/src line 3 Java Problem Syntax error on token ")", ，预计在这个 token jd.java /Elapsed time calc/src line 2 Java Problem Syntax error on token ")", { 预期jd.java /Elapsed time calc/src line 1 Java Problem Syntax error on token "double", @ expected jd.java /Elapsed time calc/src line 1 Java Problem Syntax error on token "double", delete this token jd.java /Elapsed time calc/src line 1 Java Problem 令牌“double”上的语法错误，无效（jd.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T15:11:07.447

除非您有 java.lang.Math 的静态导入，否则您需要将“floor”替换为“Math.floor”。

静态导入允许您引用另一个类的静态成员而不限定它们的名称：

导入静态 java.lang.Math.*；

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T15:47:11.487

Java 中的所有内容都必须在一个类中。这是一个包含您的代码的完整工作类。您可能还想添加一个包声明。

```
import static java.lang.Math.*;

public class Utility
{
    public static double getJD(double y,double m,double d){
        if (m<=2.0) {
            y--;
            m+=12.0;
        }
        double a=floor(y/100.0);
        return (365.25*(y+4716.0))+(30.6001*(m+1))+d+(2.0-a+floor(a/4.0))-1524.5;
    }
} 
```

# vba - 从固定位置提取唯一数据

> ID：13234741
> 
> 赞同：1
> 
> 时间：2012-11-05T15:03:06.677
> 
> 标签：vba, excel, unique

最近我在 Stack Overflow 上发现了一个非常好的脚本。它工作得很好，但我想稍微调整一下——尽管我的技能仍然不能让我非常喜欢这种 VBA。到目前为止，我只是未能重新编写此代码。

我的目标是让这个脚本做它做的事情，但是从一个固定的位置 - 所以我不想通过“问题框”选择它，而是复制一个数据范围。例如：`A1:A200`并将其粘贴到另一个选项卡中，例如：`DATA!A1:A200`

你可以帮帮我吗？

和代码：

```
Sub ListUniqueValues()

 'lists the unique values found in a user-defined range into a
 'user-defined columnar range

 Dim SearchRng     As Range
 Dim ResultRng     As Range
 Dim Cel          As Range
 Dim iRow          As Long

 Set SearchRng = Application.InputBox("Select search range", _
       "Find Unique Values", Type:=8)
 Do
    Set ResultRng = Application.InputBox("Select results columnar range", _
       "Write Unique Values", Type:=8)
 Loop Until ResultRng.Columns.Count = 1

 iRow = 0
 For Each Cel In SearchRng
    If Application.WorksheetFunction.CountIf(ResultRng, Cel.Value) = 0 Then
       'This value doesn't already exist
       iRow = iRow + 1
       If iRow > ResultRng.Rows.Count Then
         MsgBox "Not enough rows in result range to write all unique values", _
         vbwarning, "Run terminated"
         Exit Sub
       Else
         ResultRng(iRow).Value = Cel.Value
       End If
    End If
 Next Cel

 'sort result range
 'ResultRng.Sort ResultRng

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:26:40.753

对于您的`DATA!A1:A200`示例更改

```
Set SearchRng = Application.InputBox("Select search range", _
   "Find Unique Values", Type:=8) 
```

到

```
Set SearchRange = Sheets("DATA").Range("A1:A200") 
```

**编辑**

说了这么多，你见过这个功能吗

```
Dim SearchRng As Range, ResultRng As Range
Set SearchRng = Sheets("DATA").Range("A1:A200")
Set ResultRng = Sheets("Results").Range("A2")
SearchRng.AdvancedFilter Action:= xlFilterCopy, CopyToRange:=ResultRng, Unique:=True 
```

# mysql - 保存历史可编辑数据 RDBMS

> ID：13234743
> 
> 赞同：1
> 
> 时间：2012-11-05T15:03:08.943
> 
> 标签：mysql, database, database-design, rdbms, database-schema

我想制作像测试系统这样的应用程序。每个问题都有一个或多个答案变体（一个或多个可能是正确的）。我很抱歉导师和学生使用我的测试系统。这意味着导师可以进行主题、问题和答案的CRUD操作。但在这种情况下，保存版本出现了一个大问题。例如，我是一名导师，我决定编辑一些问题或答案（或者可能是几个问题和几个答案）。当我以学生身份进入时，我想获得一个我犯了错误的问题列表，但导师已经编辑了这个问题并且我得到了错误的信息。

主要问题：如何在数据库中保存可编辑数据？

![我的数据库](../Images/f38550d319cbb73cf1d8e6dab079fc74.png)

每个测试都有问题，每个问题都有问题。导师可以编辑/添加/删除任何这些组件。例如，他或她可以修改其中一个问题的文本，将几个问题添加到测试中，并编辑刚刚修改的问题的答案之一。任何提示我如何处理所有这些，以便我可以在过去的确切时间检索测试版本？

到目前为止，这是我想出的。解决方案非常复杂，我觉得有更好的方法来做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:09:57.467

我不能很好地阅读你的设计，太小了。但是根据我从您对问题的描述中了解到的情况，我将创建一个新表来保存正确的答案，并将其链接到学生写的每个答案。我会使用一对多的关系，这样我就可以为同一个答案写多个更正，从而使用户能够看到来自导师的多个回复。

# php - 没有向控制器发布数据

> ID：13234744
> 
> 赞同：0
> 
> 时间：2012-11-05T15:03:28.423
> 
> 标签：php, codeigniter, post

我在 CodeIgniter 视图中构建了一个简单的表单：

```
<html>
<head>
<title></title>
<base href="<?php echo site_url(); ?>" />
</head>
<body>

<?php echo form_open('main/testformout'); ?>
First name: <input type="text" name="fname" /><br>
Last name: <input type="text" name="lname" />
<input type="submit" name="submit" value="Submit" />
</form>

</body>
</html> 
```

编辑：这是上面表单的 HTML 输出：

```
<html>
    <head>
        <title></title>
    </head>
    <body>

<form method="post" action="http://www.mypage.com/main/testformout">
First name: <input type="text" name="fname" /><br>
Last name: <input type="text" name="lname" />
<input type="submit" name="submit" value="Submit" />
</form>

</body>
</html> 
```

我已经尝试过使用和不使用表单助手，但在这个例子中我使用的是 form_open 助手。

当点击提交按钮时，没有 POST 数据进入控制器。

控制器代码：

```
 public function helperin()
    {
        $this->load->view('test/helperin_v', NULL);
    }
    public function testformout()
    {
        print_r($_POST);
        echo "<br />";
        echo $_SERVER['REQUEST_METHOD'];
        echo "<br />";
                var_dump($this->input->post());
        $this->load->view('test/out_v', $viewData[$_POST]);
    } 
```

当系统和应用程序文件夹加载到与 public_html 文件夹相同的级别时，我得到以下结果：

```
GET
bool(false) 
```

当系统和应用程序文件夹加载到 public_html 文件夹中时（我知道这不安全），我得到以下结果：

```
Array ( ) 
GET
bool(false) 
```

此外，该代码在我的本地机器上运行良好，但在上传到 Bluehost 服务器时无法正常运行。

这是我的 htaccess 文件（因为我已经做了足够的研究，知道这可能很有价值）。

```
RewriteEngine On
RewriteCond $1 !^(index\.php|public|assets|images|robots\.txt)
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

Bluehost 服务人员说这是因为重定向问题，他们认为这件事已经结束，但因为我没有做一个离开 CodeIgniter 框架或他们的服务器的重定向。

# java - 使用 JLayer 拆分和淡化 MP3 文件

> ID：13234747
> 
> 赞同：0
> 
> 时间：2012-11-05T15:03:37.420
> 
> 标签：java, audio, mp3, jmf, jlayer

我想从 MP3 文件中提取一些音乐（从第二个 x 到 y）并添加一些淡入和淡出效果。我可以用 JLayer 做到这一点吗？

到目前为止，我只知道如何使用这个库播放歌曲。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:31:40.737

检查这个播放器（[http://sirk.sytes.net/software/apps/kj/index.htm](http://sirk.sytes.net/software/apps/kj/index.htm)）它基于 JLayer 和开源，并且可以（如他们所说）淡化效果。

# parallel-processing - Golang：如何验证运行 Go 程序的处理器数量

> ID：13234749
> 
> 赞同：13
> 
> 时间：2012-11-05T15:03:42.183
> 
> 标签：parallel-processing, go

我是 Google Go（Golang）的新手。我的问题与这篇文章有关[runtime.Gosched 到底做了什么？](https://stackoverflow.com/q/13107958/984260). 代码结构复制如下。我的问题是，当我更改 GOMAXPROCS 中的处理器数量时，我如何验证它正在运行多少个处理器。当我执行“top”时，它会显示 a.out 进程，即使 GOMAXPROCS 大于 1，它也会消耗 100% 或更少的资源。我将不胜感激您的帮助。

```
package main

import (
    "fmt"
    "runtime"
    "sync"
)

var wg sync.WaitGroup

func doTasks() {
    fmt.Println(" Doing task ")
    for ji := 1; ji < 100000000; ji++ {
        for io := 1; io < 10; io++ {
            //Some computations
        }
    }
    runtime.Gosched()

    wg.Done()
}

func main() {
    wg.Add(1)
    runtime.GOMAXPROCS(1) // or 2 or 4
    go doTasks()
    doTasks()
    wg.Wait()
} 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-06T05:40:00.167

进程在给定时间可以运行的最大逻辑 CPU 数量不超过 和 的[`runtime.GOMAXPROCS(0)`](http://golang.org/pkg/runtime/#GOMAXPROCS)最小值[`runtime.NumCPU()`](http://golang.org/pkg/runtime/#NumCPU)。

```
func MaxParallelism() int {
    maxProcs := runtime.GOMAXPROCS(0)
    numCPU := runtime.NumCPU()
    if maxProcs < numCPU {
        return maxProcs
    }
    return numCPU
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T15:29:18.517

内核数可以通过[http://golang.org/pkg/runtime/#NumCPU](http://golang.org/pkg/runtime/#NumCPU)查询。

文档说：“NumCPU 返回本地机器上逻辑 CPU 的数量。”

# java - 四面体 Java3d

> ID：13234757
> 
> 赞同：1
> 
> 时间：2012-11-05T15:04:04.120
> 
> 标签：java, math, geometry, java-3d

正如[甲烷图像](http://upload.wikimedia.org/wikipedia/commons/thumb/9/9b/Methane-2D-dimensions.svg/800px-Methane-2D-dimensions.svg.png)所描述的那样，我需要在 Java3d 中制作一个四面体，其中**任意**两个边界之间的角度为 109 度（H 以 C 为边界，因此线条是边界）。
我必须承认，我完全不知道该怎么做。我是这样尝试的：一个与 rotX 和 rotZ 绑定在 0 度。一个 rotX 在 109 度。下一步将是109`rotZ`度`rotX`。假设 rotX 的角度是 AngleX，而 rotZ 的角度是 AngleZ。我的圆柱体的末端将（计算和尝试）在`(sin AngleZ,cos AngleZ*cos AngleX, cos AngleZ*sin AngleX)`. 这是合法的，所以再次旋转显然不会有任何好处。

我有 4 个长度为 2f 的圆柱体，一次创建一个，在 (0,1,0) 处平移，因此它们的末端在 (0,0,0) 处。从这一点开始，我围绕点 (0,0,0) 旋转我的圆柱体，并尝试实现一个四面体。左圆柱在{109,0}，右圆柱在{109,109} 很容易看出左圆柱和上圆柱和右圆柱升的角度不一样![角度 {0,0}、{109.5,0}、{109.5,109,5} 的边界图像（鼠标旋转以便看得更清楚）](../Images/798f93a37b80fdd10b437ab656e9837e.png)

另外我不得不说，通过微积分解决这个问题对我没有太大帮助，因为在某些情况下我可能需要改变角度，但我仍然需要它在圆柱体之间具有相同的角度。

有任何想法吗？我应该如何解决这个问题？

注意：为了简单起见，我在程序中将弧度转换为度数，因此我使用度数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:19:11.593

我认为你可能会让这比它需要的更复杂一些。甲烷不是对称的吗？如果是这样，将氢原子放在立方体的不相邻顶点，将碳放在立方体的中心。

要了解我的意思，请在 Google 上搜索“甲烷对称性”并查看图像。

如果您需要一个非对称的变体，我仍然会在您的程序之外计算原子的位置，或者使用非图形代码，并且只使用 java-3d 来放置它们。

# c# - 将字符串转换为 int - datareader

> ID：13234758
> 
> 赞同：0
> 
> 时间：2012-11-05T15:04:06.093
> 
> 标签：c#, ado.net

试图弄清楚如何将此 zip 字符串转换为 int。我得到一个演员异常：

```
member.Zip = reader.GetInt16(ordinals[(int)Enums.MemberColumn.Zip]); 
```

更新：

谢谢大家。这是我想出的对我来说足够好的方法：

```
Int32.TryParse(reader.GetString(ordinals[(int)Enums.MemberColumn.Zip]), out number) ? number : 0; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:10:27.623

您需要将其作为字符串获取，然后解析该字符串：

```
string zipString = reader.GetString(ordinals[(int)Enums.MemberColumn.Zip]);
member.Zip = Int16.Parse(zipString); 
```

DataReaders 期望字段的基础类型与您调用的特定方法相同。因此 GetInt16 需要一个底层 16 位整数，GetBoolean 需要一个底层位，GetString 需要一个底层字符串。它不会为你做任何转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:09:11.873

```
member.Zip = Convert.ToInt16(reader.GetString(ordinals[(int)Enums.MemberColumn.Zip])); 
```

# sql-server - 多行合二为一

> ID：13234761
> 
> 赞同：0
> 
> 时间：2012-11-05T15:04:13.710
> 
> 标签：sql-server, tsql

我知道有类似的问题，但不幸的是我还没有找到相应的解决方案来解决我的问题。

首先是我的表格的简化概述：

*   `Partner`桌子：`PartnerID, Name`

*   `Address`桌子：`PartnerID, Street, Postcode, City, ValidFrom`

*   `Contact`桌子：`PartnerID, TypID, TelNr, Email, ValidFrom`

合作伙伴可以有一个或多个地址以及联系信息。有了联系信息，合作伙伴可以拥有 2 个电话号码、1 个手机号码和 1 个电子邮件。在表中，它看起来像这样：

```
PartnerID   TypID   TelNr                   Email               ValidFrom
1           1       0041 / 044 - 2002020                        01.01.2010
1           1       0041 / 044 - 2003030                        01.01.2011
1           2       0041 / 079 - 7003030                        01.04.2011
1           3                               myemail@hotmail.com 01.06.2011 
```

我最终需要的是，结合每个合作伙伴的所有表格，是这样的：

```
PartnerID   Name    Street              Postcode        City            TelNr                               Email
1           SomeGuy MostActualStreet    MostActualPC    MostActualCity  MostActual Nr (either type 1 or 2)  MostActual Email 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T20:15:34.327

这里有一些 T-SQL 可以得到我认为你正在寻找的答案，*如果*“最实际”的意思是“最近的”：

```
WITH LatestAddress (PartnerID,Street,PostCode,City) 
AS (
    SELECT PartnerID,Street,PostCode,City
    FROM [Address] a
    WHERE ValidFrom = (
        SELECT MAX(ValidFrom) 
        FROM [Address] aMax 
        WHERE aMax.PartnerID = a.PartnerID
    )
)

SELECT p.PartnerID,p.Name,la.Street,la.PostCode,la.City
,(SELECT TOP 1 TelNr FROM Contact c WHERE c.PartnerID = p.PartnerID AND TelNr IS NOT NULL ORDER BY ValidFrom DESC) AS MostRecentTelNr
,(SELECT TOP 1 Email FROM Contact c WHERE c.PartnerID = p.PartnerID AND Email IS NOT NULL ORDER BY ValidFrom DESC) AS MostRecentEmail
FROM [Partner] p
LEFT OUTER JOIN LatestAddress la ON p.PartnerID = la.PartnerID 
```

分解一下，这个例子使用[公用表表达式](http://msdn.microsoft.com/en-us/library/ms175972.aspx)(CTE) 来获取每个合作伙伴的最新地址信息

```
WITH LatestAddress (PartnerID,Street,PostCode,City) 
AS (
    SELECT PartnerID,Street,PostCode,City
    FROM [Address] a
    WHERE ValidFrom = (
        SELECT MAX(ValidFrom) 
        FROM [Address] aMax 
        WHERE aMax.PartnerID = a.PartnerID
    )
) 
```

我从合作伙伴表左连接到 CTE，因为我不希望没有地址的合作伙伴被排除在结果之外。

```
FROM [Partner] p
LEFT OUTER JOIN LatestAddress la ON p.PartnerID = la.PartnerID 
```

在 SELECT 语句中，我从 Partner 表 CTE 中选择列，并编写了两个子选择，一个用于每个合作伙伴的最新非空电话号码，一个用于每个合作伙伴的最新非空电子邮件地址。我能够将其作为子选择来执行，因为我知道通过选择 TOP 1 返回一个标量值。

```
SELECT p.PartnerID,p.Name,la.Street,la.PostCode,la.City
,(SELECT TOP 1 TelNr FROM Contact c WHERE c.PartnerID = p.PartnerID AND TelNr IS NOT NULL ORDER BY ValidFrom DESC) AS MostRecentTelNr
,(SELECT TOP 1 Email FROM Contact c WHERE c.PartnerID = p.PartnerID AND Email IS NOT NULL ORDER BY ValidFrom DESC) AS MostRecentEmail 
```

如果您需要保留旧的电话号码和电子邮件地址，我强烈建议您将联系人表分成单独的电话号码和电子邮件表，每个表都有自己的 ValidDate。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:30:15.650

在另一篇文章中查看我的答案，该文章解释了如何在像您这样的情况下获取最实际的信息：[Aggregate SQL Function to grab only the first from each group](https://stackoverflow.com/questions/773417/aggregate-sql-function-to-grab-only-the-first-from-each-group/10111071#10111071)

PS：在您的情况下， DATE_FIELD 将是 ValidFrom 。

# asp.net - 在 cookie 中存储与号的问题

> ID：13234763
> 
> 赞同：1
> 
> 时间：2012-11-05T15:04:25.900
> 
> 标签：asp.net, cookies

在我的网站上，我使用 cookie 在浏览器中存储了一些详细信息。

问题是，它不存储以＆符号结尾的值。即 HiAll655& 加载回为 HiAll655

我发现 cookie 使用很少的字符（如＆符号）会产生问题，但它会正确存储和加载像 HiAll655&HiAll 这样的值。

任何帮助，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T15:39:16.247

您可以`HttpUtility.UrlEncode(string)`在存储值和`HttpUtility.UrlDecode(string)`读取值时使用。

`UrlEncode`转换`&`为`%26`在 cookie 中可以安全使用的内容。

# drupal - Drupal 通过 xml-rpc 类型获取节点

> ID：13234764
> 
> 赞同：0
> 
> 时间：2012-11-05T15:04:25.783
> 
> 标签：drupal, xml-rpc

我尝试通过 xml-rpc 从 D7 按类型获取节点。我用了这个例子：http://drupal.org/node/1304802 这个例子提供了一个xml来创建一个节点...

任何人都可以帮助我如何按这种 XML 类型获取节点？

谢谢，

国际文凭组织

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:26:17.620

下面的代码应该可以工作。我刚刚使用名为[Poster](https://addons.mozilla.org/pt-br/firefox/addon/poster/)的 Firefox 插件在我的 Drupal 安装上对其进行了测试。

请记住为您的端点设置**正确的 URL。**考虑到一个 Drupal 实例`http://localhost/test`和一个名为“api”的端点，访问端点的结果 URL 是`http://localhost/test/?q=api`.

最后一件事：如果您为端点启用了身份验证，则必须使用有权这样做的用户访问节点。您可以在使用[海报](https://addons.mozilla.org/pt-br/firefox/addon/poster/)时设置用户名和密码。

```
<?xml version='1.0' ?>
<methodCall>
  <methodName>node.retrieve</methodName>
  <params>
    <param>
      <value>
        <struct>
          <member>
            <name>nid</name>
            <value>
              <string>INSERT THE NODE'S ID HERE</string>
            </value>
          </member>
        </struct>
      </value>
    </param>
  </params>
</methodCall> 
```

# c# - 在 jQuery 中设置模型属性

> ID：13234765
> 
> 赞同：0
> 
> 时间：2012-11-05T15:04:25.407
> 
> 标签：c#, html, asp.net-mvc, model-view-controller

我正在尝试将模型属性**ID**设置如下：

```
'<%= Model.Id %>' = $("#Id"); 
```

但在 Firebug 中出现错误：

```
Invalid left-hand side in assignment. 
```

如何设置`Model.Id`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:08:37.673

如果你这样写

`'<%= Model.Id %>' = $("#Id");`

因此无法将任何 var 设置为`'56'`（例如，设为 56），因此您尝试将值设置为数字...

# c# - 如何启动服务仅授权用户？

> ID：13234767
> 
> 赞同：0
> 
> 时间：2012-11-05T15:04:31.337
> 
> 标签：c#, windows-services

我为这个项目苦苦挣扎了很长时间。我正在使用 Windows 服务应用程序。我已经创建了一个工作 Windows 服务应用程序。现在我收到了一个只有授权用户才能启动服务的请求。

这是我尝试过的。一世。从 app.config 文件中读取连接字符串

```
<add name ="ConnectionString" connectionString="Data Source = Server_name; Initial Catalog = DB_DEV; Integrated Security = True" providerName="System.Data.SqlClient"/> 
```

ii. 将连接字符串传递给 SqlConnection

```
SqlConnection myConnection = new SqlConnection(myConnectionString) //gives me error here 
```

iii. 并尝试以登录 - 此用户身份启动服务。

这是这样做的方式还是任何其他方式？请指导我。谢谢。

注意-它在 VS2010 中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:26:09.793

Windows 服务作为单个用户运行，通过服务控制面板进行配置，就像您正在做的那样。目前尚不清楚数据库连接是如何关联的，但您可以通过多种方法指定哪些用户可以启动和停止服务。

### 命令行`sc`工具

使用`sc sdset <Service name> <SDDL string>`可以配置服务的权限，允许您控制谁可以启动/停止服务，但是这需要使用相当简洁且没有特别详细记录的 SDDL 字符串格式。

### 使用`subinacl`

Microsoft 提供了一个名为的工具[`SubInACL`](http://www.microsoft.com/en-us/download/details.aspx?id=23510)，可用于配置许多与权限相关的设置。

您可以使用此工具设置服务启动/停止权限，如下所示：

```
subinacl.exe /service <your service name> /Grant=<user name>=TO 
```

（“ `TO`”表示要授予用户启动服务（`T`）和停止服务（`O`）权限，其他权限值可以通过 确定`subinacl /help /full`）。

# c# - ContentPresenter 问题

> ID：13234771
> 
> 赞同：0
> 
> 时间：2012-11-05T15:04:41.367
> 
> 标签：c#, wpf

我有一个 ContentControl，上面有一个网格。第 1 列将是 TreeView，第 2 列是拆分器，我已将第 3 列设置为 ContentPresenter。定义如下：

```
<ContentPresenter Grid.Column="2" Name="PlaceHolder" /> 
```

如果我随后将我的 ContentControl 添加到 Page 并将项目添加到 ContentControl，它不仅会出现在第 2 列中，而是跨越 ContentControl 的整个宽度。这就是我向 ContentPresenter 添加内容的方式：

```
<MyNamespace:MyControlName>
    <Button>Hello world!</Button>
</MyNamespace:MyControlName> 
```

如何让按钮仅出现在第 2 列中，并使第 0 列中的 TreeView 正常显示？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:19:33.467

您正在将您的`ContentControl.Content`属性设置`ContentControl`为您的`Grid`，然后当您使用要覆盖的控件时将其`ContentControl.Content`设置为`Button`

您需要将您的设置`Grid`为 the`ContentControl.ContentTemplate`而不是实际的`Content`，并修改您的`ContentPresenter`显示`Content`属性

```
<ContentControl ...>
    <ContentControl.Template>
        <ControlTemplate TargetType="{x:Type ContentControl}">
            <Grid>
                ...
                <ContentPresenter Grid.Column="2" Name="PlaceHolder" 
                                  Content="{TemplateBinding Content}" />
                ...
            </Grid>
        </ControlTemplate>
    </ContentControl.Template>
</ContentControl> 
```

# ajax - Typo3 4.5 TCA 后端表单 Ajax 更新程序：关键字类别

> ID：13234785
> 
> 赞同：-1
> 
> 时间：2012-11-05T15:05:15.477
> 
> 标签：ajax, typo3, backend

我想添加一个带有 onchange 事件的下拉框（显示关键字的类别）。onchange 事件应该更新我的后端表单中的关键字列表。这个怎么做？非常欢迎任何提示！

```
"keywordCategories" => Array (
"exclude" => 1,
"l10n_mode" => "mergeIfNotBlank",
"label" => "Categories",
"config" => Array (
            "type" => "select",
            "foreign_table" => "my_extension_categories",
        )
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T12:22:51.190

看看 extension [tagpack](http://typo3.org/extensions/repository/view/tagpack)也许它作为一个起点很有用，如何实现这些东西。

# c++ - 指针容器上的 std::for_each

> ID：13234787
> 
> 赞同：0
> 
> 时间：2012-11-05T15:05:27.667
> 
> 标签：c++, pointers, foreach, hashset

在某些课程中，我有一个`hash_set`指针：

```
std::hash_set<GameObject*> gameObjects; 
```

我希望遍历所有这些并调用更新。使用迭代器，这将是这样的：

```
for(std::hash_set<GameObject*>::iterator it = gameObjects.begin(), it_end = gameObjects.end(); it != it_end; ++it)
{
(*it)->update();
} 
```

代码太多了；我想用`std::for_each`.

如果我只是`hash_set<GameObject>`，这将是这样的：

```
std::for_each(gameObjects.begin(), gameObjects.end(), std::mem_fun_ref(&GameObject::update)); 
```

或者，如果更新需要一个参数，

```
std::for_each(gameObjects.begin(), gameObject.end(), std::bind2nd(std::mem_fun_ref(&GameObject::update), deltaTime)); 
```

这两个表达式将如何查找`hash_set`of 指针？

我正在使用 MS VisualStudio 2010。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T15:09:25.047

如果你有一个支持 lambdas (C++11) 的编译器，你可以使用

```
std::for_each(gameObjects.begin(), gameObjects.end(), [=](GameObject* o) {o->update(deltaTime);}); 
```

对于许多 STL 算法来说，使用 lambdas 是一个不错的选择，但是，正如@phresnel 所指出的，在这种情况下，基于范围的 for 循环（也是 C++11）更简洁：

```
for (auto o : gameObjects)
    o->update(deltaTime); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T15:06:47.660

您可以使用您拥有的相同代码，但使用`mem_fun`而不是`mem_fun_ref`

```
std::for_each(gameObjects.begin(), gameObjects.end(),
    std::mem_fun(&GameObject::update)); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T15:09:30.137

作为 的替代方案`std::for_each`，如果您的编译器和策略允许，您可以使用*基于 C++ 的范围*：

```
for (auto p : gameObjects) p->update(); 
```

* * *

[此功能是在 C++11 中添加的，它是当前的 C++ 标准。并非所有编译器（-版本）都可能支持它。]

# javascript - Modernizr 和 fonts.com 导致 IE8 崩溃

> ID：13234788
> 
> 赞同：1
> 
> 时间：2012-11-05T15:05:32.503
> 
> 标签：javascript, jquery, font-face, modernizr

我目前正在构建一个网站，我正在使用 fonts.com 来显示标题和子标题的自定义字体。字体通过 fonts.com javascript 链接加载，然后在 CSS 文件中引用为：

```
font-family: 'MyFontFromFontsDotCom'; 
```

它工作正常并且表现良好。然而，在 IE8 中，浏览器在字体被加载（尽管它永远不会完全加载）和站点后崩溃。当我点击浏览器中的“停止”按钮时，网站会以正确的字体呈现。

我还有一个正在运行的modernizr 2.6.2，它在fonts.com javascript之前被引用。当我删除 fonts.com javascript 时，该网站运行得很好。

fonts.com javascript 参考位于 body 标签的底部，modernizr 位于 head 标签。我试着在没有任何运气的情况下移动它们。

有没有人遇到过同样的问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-21T14:12:11.023

我在 IE 8 上跨浏览器测试网站时遇到了这个问题。我通过使用“非 JavaScript”(CSS) 选项解决了这个问题。

您可以通过访问 fonts.com 上的“管理 Web 字体”部分，选择您的项目，然后单击“发布选项”链接来实现这一点。

在弹出的窗口中有一个“选项 2：非 Javascript”选项卡，这将为您提供 CSS 而不是 Javascript 的代码片段。您应该将其粘贴到头部，然后删除 Javascript 代码段。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-23T18:55:59.123

我知道已经接受了一个答案，这是完全有效的解决方案（使用 CSS 选项而不是 Javascript 选项），但是如果您确实需要 Javascript 选项，还有另一种可能的解决方案（我喜欢 -active 类添加到我的文档中）。

事实证明，当存在未闭合标签时，IE8 上的 fonts.com Javascript 存在一个已知问题。因此，如果您遇到以下情况：

```
<div><span>March 2014</div> 
```

这会导致 fonts.com Javascript 出现问题。

因此，使用 W3C 验证器查找并修复未关闭的标签！

# mysql - MySQLSyntaxErrorException 尝试使用休眠状态持久化 blob

> ID：13234790
> 
> 赞同：1
> 
> 时间：2012-11-05T15:05:47.363
> 
> 标签：mysql, hibernate, jpa, spring-mvc, blob

我正在使用 Spring MVC、Hibernate4 和 MySQL5 创建一些简单的网页。我使用的模型之一包含 BLOB 值（字节 []）。当我尝试使用该模型持久化时，`entityManager.persist()` 我得到 MySQLSytnaxException。实际上当前配置还有更多问题，例如忽略@Transactional注解的persist/merge/remove，但这是最关键的。

我已经尝试`session.save(object);`通过 Blob 使用或替换 byte[]。结果还是一样。我发现的所有工作示例都使用完全不同的方法 - 例如，它们使用 HibernateSessionManager 和 HibernateTransactionManager 而不是 JPA 的 - 当我仍然不确定时，我想找到不需要完全改变我持久实体的解决方案有助于。

你能告诉我我在代码/配置/假设中犯了什么错误吗？

堆栈跟踪的开始以及 Hibernate 跟踪：

```
Hibernate: 
        insert 
        into
            updates
            (changelog, added, developmentVersion, filedata, filedataType, major, minor, nightly, release, package, type, uploader, id) 
        values
            (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
22:53:10,888 TRACE BasicBinder:83 - binding parameter [1] as [VARCHAR] - sdfsd
22:53:10,891 TRACE BasicBinder:71 - binding parameter [2] as [DATE] - <null>
22:53:10,894 TRACE BasicBinder:83 - binding parameter [3] as [BOOLEAN] - false
22:53:10,898 TRACE BasicBinder:83 - binding parameter [4] as [BLOB] - javax.sql.rowset.serial.SerialBlob@298fd36c
22:53:10,924 TRACE BasicBinder:83 - binding parameter [5] as [VARCHAR] - image/png
22:53:10,926 TRACE BasicBinder:83 - binding parameter [6] as [INTEGER] - 1
22:53:10,928 TRACE BasicBinder:83 - binding parameter [7] as [INTEGER] - 0
22:53:10,935 TRACE BasicBinder:83 - binding parameter [8] as [INTEGER] - 0
22:53:10,936 TRACE BasicBinder:83 - binding parameter [9] as [INTEGER] - 0
22:53:10,939 TRACE BasicBinder:83 - binding parameter [10] as [INTEGER] - 36
22:53:10,941 TRACE EnumType:292 - Binding {0} to parameter: {1}
22:53:10,944 TRACE BasicBinder:83 - binding parameter [12] as [INTEGER] - 18
22:53:10,955 TRACE BasicBinder:83 - binding parameter [13] as [INTEGER] - 0
22:53:10,998  WARN SqlExceptionHelper:143 - SQL Error: 1064, SQLState: 42000
22:53:10,999 ERROR SqlExceptionHelper:144 - You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'release, package, type, uploader, id) values ('sdfsd', null, 0, _binary'â€°PNG
' at line 1
22:53:11,027  INFO AbstractBatchImpl:195 - HHH000010: On release of batch it still contained JDBC statements
Nov 07, 2012 10:53:11 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [repoApplication] in context with path [/server] threw exception [Request processing failed; nested exception is org.springframework.dao.InvalidDataAccessResourceUsageException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'release, package, type, uploader, id) values ('sdfsd', null, 0, _binary'â€°PNG
' at line 1; SQL [n/a]; nested exception is org.hibernate.exception.SQLGrammarException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'release, package, type, uploader, id) values ('sdfsd', null, 0, _binary'â€°PNG
' at line 1] with root cause
com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'release, package, type, uploader, id) values ('sdfsd', null, 0, _binary'â€°PNG
' at line 1 
```

豆类.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    ...
    >

    ...

    <!-- Hibernate configuration -->    

    <!-- Specifies dataSource object managing connections to database -->  
    <bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource"> 
        <property name="driverClassName" value="${database.driver}" /> 
        <property name="url" value="${database.url}" /> 
        <property name="username" value="${database.user}" /> 
        <property name="password" value="${database.password}" />
    </bean>

    <!-- Defines SessionFactory -->
    <bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
        <property name="dataSource" ref="dataSource" />
        ...
        <property name="hibernateProperties">
            <util:properties location="classpath:Hibernate.properties" />
        </property>
    </bean>

    <!-- Defines TransactionManager -->
    <bean id="transactionManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
        <property name="sessionFactory" ref="sessionFactory" />
    </bean>

    <!-- Binds TransactionManager to annotations -->
    <tx:annotation-driven transaction-manager="transactionManager" />

    <!-- Enables Spring annotations -->
    <context:annotation-config />

    ...

</beans> 
```

休眠.属性：

```
hibernate.database         =MYSQL
hibernate.dialect          =org.hibernate.dialect.MySQL5InnoDBDialect
hibernate.show_sql         =true
hibernate.format_sql       =true
hibernate.use_sql_comments =true
hibernate.hbm2ddl.auto     =update 
```

MySQL 数据库中的所有表都使用 InnoDB 引擎。

更新.java（模型）：

```
import java.sql.Blob;
import java.sql.Date;
import java.sql.SQLException;

import javax.persistence.Column;
import javax.persistence.Entity;
import javax.persistence.EnumType;
import javax.persistence.Enumerated;
import javax.persistence.Id;
import javax.persistence.JoinColumn;
import javax.persistence.Lob;
import javax.persistence.ManyToOne;
import javax.persistence.Table;
import javax.persistence.Transient;
import javax.sql.rowset.serial.SerialBlob;
import javax.validation.constraints.NotNull;

import org.hibernate.annotations.Type;
import org.hibernate.validator.constraints.NotEmpty;
import org.springframework.web.multipart.commons.CommonsMultipartFile;

...

@Entity
@Table(name = "updates")
@VersionNumberCorrect
public class Update {
    @Id
    @Column(name = "id", unique = true)
    private int id;

    @NotNull
    @ManyToOne
    @JoinColumn(name = "package")
    private Package thePackage;

    @NotNull
    @ManyToOne
    @JoinColumn(name = "uploader")
    private User uploader;

    @Column(name = "added")
    private Date date;

    @Column(name = "changelog")
    @NotNull
    @NotEmpty
    private String changelog;

    @Column(name = "major")
    private int major;

    @Column(name = "minor")
    private int minor;

    @Column(name = "release")
    private int release;

    @Column(name = "nightly")
    private int nightly;

    @Column(name = "developmentVersion")
    private boolean developmentVersion;

    @Column(name = "type")
    @Enumerated(EnumType.ORDINAL)
    private EUpdateStrategy type;

    @Column(name = "filedata")
    @Lob
    @Type(type = "blob")
    @NotNull
    private Blob filedata;

    @Column(name = "filedataType")
    private String filedataType;

    public Update() {
    }

    ...
} 
```

UpdateServiceImp.java（服务）：

```
import java.sql.SQLException;
import java.util.ArrayList;
import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.EntityManagerFactory;
import javax.persistence.EntityTransaction;

import org.hibernate.Hibernate;
import org.hibernate.Session;
import org.hibernate.criterion.Order;
import org.hibernate.criterion.Restrictions;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

...

@Service
@Transactional
public class UpdateServiceImp implements UpdateService {
    @Autowired
    private SessionFactory sessionFactory;

    @Override
    public void persist(Update update) {
        getSession().persist(update);
    }

    @Override
    public Update merge(Update update) {
        return (Update) getSession().merge(update);
    }

    @Override
    public void remove(Update update) {
        getSession().delete(update);
    }

    ...

    /**
     * Returns new Session instance.
     * 
     * @return new Session
     */
    private Session getSession() {
        return sessionFactory.getCurrentSession();
    }
} 
```

编辑：我将 EntityManagerManager 的用法更改为 Hibernate 的 SessionFactory - 我试图改变这种想法，它可能会有所帮助。它没有，但是代码变得更干净了:)。我从 Hibernate 日志中添加了一些可能有用的信息。我还添加了 Hibernate.properties 内容，因为这个错误很可能与 Hibernate 配置有关。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-08T10:03:37.100

感谢一位开发人员的帮助，我发现了问题所在：我正在使用`release`其中一个属性的名称。我发现这`release`是 MySQL 中的一个关键字，当它出现在查询中时，它会使语法无效。

老实说，得知 Hibernate 不会在列、模式和表的名称中使用撇号，我真的很惊讶。我认为以这种方式编写 SQL 是一种常见的做法：

```
INSERT INTO `mySqlTable` VALUES (null, 'value') ; 
```

或者

```
INSERT INTO 'dbo'.'msSqlTable' VALUES (null, 'value'); 
```

但是 Hibernate 会这样做：

```
INSERT INTO mySqlTable VALUES (null, 'value') ; 
```

对于 MySQL5，保留字列表很长：[http ://dev.mysql.com/doc/refman/5.0/en/reserved-words.html](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)

我想我将来在选择列名时必须更加小心。希望这会帮助某人。

# python - python的函数属性：获取所有分配属性的列表/字典

> ID：13234792
> 
> 赞同：2
> 
> 时间：2012-11-05T15:06:05.957
> 
> 标签：python

出于纯粹的好奇：是否有一种简单的方法（不超过两行代码）来访问函数的分配属性的字典/列表（从该函数内部）？

例如：

```
def func(*args):
    print("# of arguments = {0} ".format(len(args)))       # normal arguments
    print("# of attributes = {0}".format(len(func_attrs))) # function-attributes

func()

func.func_attr_1 = 'How do i get all attributes from within the associated function?'
func.func_attr_2 = 'How do i get all attributes from within the associated function?' 
```

由于函数是可调用对象，因此可以为它们提供属性，但似乎没有办法以简单的方式访问这些属性的列表。

`locals()`并`globals()`没有帮助。 `dir()`似乎可以解决问题，但是您必须过滤您的属性。如果您事先不知道属性名称，那会有些不便。

如果我可以分配一个属性，则必须..应该有一种从内部访问其目录的方法。

**更新**：

在尝试访问属性之前，我完全忘记了实际调用/调用 = 实例化函数。... 我的错！- sry 和 thx 的答案 ;-)

自然我尝试了`func.__dict__`and `dir(func)`，但是在这样做之前没有实例化函数对象......在我最初的测试中，我最初从函数内部定义了一个属性，然后没有调用该函数，而是尝试访问该函数- 来自外部范围的属性 - 自然失败了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T15:08:28.650

你的意思是这样的，使用`__dict__`：

```
In [11]: def foo():
   ....:     foo=1

In [12]: foo.bar=3

In [13]: foo.__dict__
Out[13]: {'bar': 3} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-05T15:19:59.203

而不是 using ，我认为使用[vars()](http://docs.python.org/2/library/functions.html#vars)`func.__dict__`看起来更好：

```
>>> def func():
...     pass
... 
>>> func.a = 19
>>> 
>>> func.__dict__
{'a': 19}
>>> vars(func)
{'a': 19}
>>> vars(func) is func.__dict__
True 
```

更少的下划线。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-05T15:09:53.220

给定函数名`func`，`func.__dict__`是函数的字典，其中包含直接分配给函数的所有属性。然后，您可以进行成员资格测试 ( `if foo in func.__dict__`)，使用 迭代字典的键`for`，或使用其他字典方法。

# nhibernate - 使用查询获取实体的评论总数

> ID：13234793
> 
> 赞同：0
> 
> 时间：2012-11-05T15:06:07.120
> 
> 标签：nhibernate, join, queryover

我正在尝试获取实体的总评论，但我得到的结果不正确。

我将如何获得任务及其评论计数（急切地加载）

```
 var tasks = _session.QueryOver<Task>(() => taskAlias)
                                 .Where(x => x.OrganizationID == null)
                                 .Fetch(x => x.AssignedUser).Eager
                                 .Fetch(x => x.Owner).Eager
                                 .Fetch(x => x.Comments).Eager
                                 .List(); 
```

### 这将返回：

Task.ID 1 评论 3 Task.ID 1 评论 3 Task.ID 1 评论 3

Task.ID 2 评论 2 Task.ID 2 评论 2

Task.ID 3 评论 1

我想：

Task.ID 1 评论 3

Task.ID 2 评论 2

Task.ID 3 评论 1

我流利的映射是：

`HasMany(x => x.Comments).Table("tComments").ForeignKeyConstraintName("fT_Task_ID").KeyColumn("fC_Resource_ID").Where("fC_Type = 'Task'").ReadOnly();`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:01:17.997

如果我正确理解您的问题，问题是您获取了正确的数据，它只是在根级别复制。如果是这种情况，请将您的查询更改为：

```
var tasks = _session.QueryOver<Task>(() => taskAlias)
                                 .Where(x => x.OrganizationID == null)
                                 .Fetch(x => x.AssignedUser).Eager
                                 .Fetch(x => x.Owner).Eager
                                 .Fetch(x => x.Comments).Eager
                                 .TransformUsing(new DistinctRootEntityResultTransformer())
                                 .List(); 
```

当您有一个实体并且它包含一个实体集合并且您告诉 NHibernate 急切地获取集合时，生成的 SQL 将基本上返回为：

```
TASK 1 - COMMENTS 1A
TASK 1 - COMMENTS 1B
TASK 1 - COMMENTS 1C
TASK 2 - COMMENTS 2A
TASK 2 - COMMENTS 2B
... 
```

DistinctRootEntityResultTransformer 是我们用来告诉 NHibernate 根元素应该是唯一的。由于您的原始代码没有转换器，因此您的根元素是重复的。

# applescript - 移动文件的 AppleScript 小滴

> ID：13234805
> 
> 赞同：0
> 
> 时间：2012-11-05T15:06:37.560
> 
> 标签：applescript

尝试制作一个 AppleScript droplet，当文件被拖动到 droplet 时，它将文件移动到给定文件夹；不知道如何告诉脚本我刚刚拖动的文件是我要移动的文件；我试过这个但它不起作用：

```
on open dragged_file
  tell application "Finder"
  move dragged_file to "Macintosh HD:Users...etc."
  end tell
end open   --script runs but doesn't move file 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:18:28.800

尝试：

```
on open of theFiles
    tell application "Finder"
        move theFiles to folder "Macintosh HD:Users...etc."
    end tell
end open 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-11-12T14:26:29.010

要使用液滴，您必须在 draggeditem 现在在您的脚本中使用 currentitem 引入循环重复，然后以您的示例结束重复

```
on open dragged_file
 repeat with currentitem in dragged_file
  tell application "Finder"
  move dragged_file to folder "Macintosh HD:Users...etc."
  end tell
end repeat
end open   --script runs but doesn't move file 
```

# silverlight - Silverlight 网站在域环境中不起作用

> ID：13234807
> 
> 赞同：1
> 
> 时间：2012-11-05T15:06:42.693
> 
> 标签：silverlight, dns, active-directory, workgroup

我将 Server 2003 和客户端作为 Windows 7 运行。我正在尝试登录网站 ( openjet.damanhealth.ae )。如果我的 PC 作为 Workgroup 运行，我可以登录网站，一切正常。但是当我加入域时，同一个网站不允许我登录，并且错误消息显示为“用户凭据无效”。看起来该网站在某些身份验证过程中失败了。即使从域中退出同一台PC，回到工作组，我仍然无法登录。

我需要在组策略中进行一些设置吗？现在我正在使用所有默认策略运行服务器。在 GP 中没有进行额外的设置。服务器在客户端 PC 中进行了哪些更改以停止工作？

# algorithm - 暴力破解键盘密码锁的最佳序列

> ID：13234808
> 
> 赞同：9
> 
> 时间：2012-11-05T15:06:46.483
> 
> 标签：algorithm

> **可能重复：**
> [在构建有效的穷举搜索算法方面需要帮助](https://stackoverflow.com/questions/12211425/need-help-in-building-efficient-exhaustive-search-algorithm)

想象一下，您必须通过在键盘上输入正确的 4 位密码来打开一扇上锁的门。每次按键后，锁都会评估输入的最后 4 位数字的顺序，*即*通过输入`123456`您已经评估了 3 个代码`1234`：`2345`和`3456`。

*   `10^4`评估所有不同组合的最短按键序列是什么？
*   是否有一种方法可以轻松地穿越整个空间以供人类遵循？

我不时思考这个问题，因为我的一个朋友不得不蛮力这样锁，冬天不必在户外过夜。

* * *

### 我微弱的尝试将我的头缠绕在它周围

使用长度`L=4`数字的代码和大小数字的“字母表”，`D=10`最佳序列的长度不能短于`D^L + L - 1`. 在比`[L,D] = [4,10]`我更小的模拟中，通过半随机搜索空间获得了最佳结果。但是，我不知道是否存在任意`[L,D]`对的解决方案，并且如果我不得不使用它，我将无法记住该解决方案。

### 迄今为止的经验教训

当计划在另一个城镇的朋友家过夜时，如果那个人要出去参加聚会并且听不到她的手机，请确保不要在凌晨 1 点到达。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T18:03:05.663

我认为您想要一个[http://en.wikipedia.org/wiki/De_Bruijn_sequence](http://en.wikipedia.org/wiki/De_Bruijn_sequence) -“给定字母 A 的循环序列，大小为 k，其中 A 中长度为 n 的每个可能子序列都恰好出现一次连续字符序列。”

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T15:36:12.293

Evgeny 提供的链接应该可以回答您的两个问题。这个答案有点离题，但是您要求为人类提供解决方案。

在现实世界中，您可能应该更多地依赖[社会工程](http://en.wikipedia.org/wiki/Social_engineering_%28security%29)或[启发式算法](http://en.wikipedia.org/wiki/Heuristic)，然后再依赖数学。我举一个现实生活的案例：

我去参观一个公寓，我发现我的手机没电了。现在联系进行访问的人的方式。我正要回去的时候看到门用的是键盘`0 - 9`和`A B`. 我做了几个假设：

1.  代码长度为 5 位。长度非常标准，具体取决于您所在的地区。我基于我之前访问过的建筑物（合法：D）做出了这个假设。
2.  代码以数字开头，然后是`A`或`B`（基于我自己的建筑）。
3.  键盘不是全新的。结论，代码中使用的数字有点损坏。我确定哪些数字不在代码中，以及代码中四个数字中的三个（根据我之前的假设）
4.  根据损坏的按键数量，我假设代码不包含重复的按键（7 个已损坏，很明显`A`已使用，`B`未使用）

最后，我肯定有 3 个号码在代码中，最后一个号码有 2 个候选人，我确信`A`在最后。与其他人相比，On key 只是轻微损坏。

我只需要从看起来更受损的候选人开始列举排列，这给了我`4! + 4! = 48`尝试。相信我，在第 5 次尝试时，门被打开了。如果我能给我的 2 美分，旧`put a key and open the door`的仍然是限制进入建筑物的最可靠的方法。

# sql - 提高查询速度：大 postgres 表中的简单 SELECT

> ID：13234812
> 
> 赞同：30
> 
> 时间：2012-11-05T15:07:04.533
> 
> 标签：sql, performance, postgresql, postgresql-performance

我在 Postgres 数据库上的 SELECT 查询中遇到了速度问题。

我有一个表，其中有两个整数列作为键： (int1,int2) 这个表有大约 7000 万行。

我需要在这种环境中进行两种简单的 SELECT 查询：

```
SELECT * FROM table WHERE int1=X;
SELECT * FROM table WHERE int2=X; 
```

这两个选择返回这 7000 万行中的大约 10.000 行。为了尽可能快地工作，我考虑使用两个 HASH 索引，每列一个。不幸的是，结果并不是那么好：

```
 QUERY PLAN                                                               
----------------------------------------------------------------------------------------------------------------------------------------
 Bitmap Heap Scan on lec_sim  (cost=232.21..25054.38 rows=6565 width=36) (actual time=14.759..23339.545 rows=7871 loops=1)
   Recheck Cond: (lec2_id = 11782)
   ->  Bitmap Index Scan on lec_sim_lec2_hash_ind  (cost=0.00..230.56 rows=6565 width=0) (actual time=13.495..13.495 rows=7871 loops=1)
         Index Cond: (lec2_id = 11782)
 Total runtime: 23342.534 ms
(5 rows) 
```

这是这些查询之一的 EXPLAIN ANALYZE 示例。大约需要 23 秒。我的期望是在不到一秒钟的时间内获得这些信息。

这些是 postgres db 配置的一些参数：

```
work_mem = 128MB
shared_buffers = 2GB
maintenance_work_mem = 512MB
fsync = off
synchronous_commit = off
effective_cache_size = 4GB 
```

任何帮助、评论或想法将不胜感激。

先感谢您。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-11-05T16:20:27.070

将我的评论提取到答案中：这里的索引查找非常快——所有时间都花在检索实际行上。23 秒 / 7871 行 = 每行 2.9 毫秒，这对于检索分散在磁盘子系统中的数据是合理的。搜索很慢；您可以 a) 将数据集放入 RAM，b) 购买 SSD，或 c) 提前组织数据以最大程度地减少搜索。

PostgreSQL 9.2 有一个称为[仅索引扫描](http://wiki.postgresql.org/wiki/What%27s_new_in_PostgreSQL_9.2#Index-only_scans)的功能，它允许它（通常）在不访问表的情况下回答查询。您可以将此与`btree`自动维护顺序的索引属性相结合，以使此查询快速。你提到`int1`, `int2`, 和两个花车：

```
CREATE INDEX sometable_int1_floats_key ON sometable (int1, float1, float2);
CREATE INDEX sometable_int2_floats_key ON sometable (int2, float1, float2);

SELECT float1,float2 FROM sometable WHERE int1=<value>; -- uses int1 index
SELECT float1,float2 FROM sometable WHERE int2=<value>; -- uses int2 index 
```

另请注意，这不会神奇地擦除磁盘搜索，它只是将它们从查询时间移动到插入时间。由于您正在复制数据，因此它还会占用您的存储空间。不过，这可能是您想要的权衡。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-11-06T13:26:58.243

谢谢你，威林。正如您所注意到的，问题在于通过 HD 进行搜索而不是查找索引。您提出了许多解决方案，例如将数据集加载到 RAM 中或购买 SSD HD。但是忘记这两个，涉及管理数据库本身之外的东西，你提出了两个想法：

1.  重新组织数据以减少对数据的查找。
2.  使用 PostgreSQL 9.2 功能“仅索引扫描”

由于我在 PostgreSQL 9.1 服务器下，我决定采用选项“1”。

我复制了一张桌子。所以现在我有两次相同的数据相同的表。我为每一个都创建了一个索引，第一个由 (int1) 索引，第二个由 (int2) 索引。然后我通过各自的索引将它们都聚集在一起（使用 ind_intX 的 CLUSTER 表）。

我现在发布相同查询的 EXPLAIN ANALYZE，在这些聚簇表之一中完成：

```
                                                         查询计划                                                            
-------------------------------------------------- -------------------------------------------------- -----------------------------------------  
在 lec_sim_lec2id 上使用 lec_sim_lec2id_ind 进行索引扫描（成本=0.00..21626.82 行=6604 宽度=36）（实际时间=0.051..1.500 行=8119 循环=1）
索引条件：（lec2_id = 12300）总运行时间：
1.822 毫秒（3 行）

```

现在寻找真的很快。我从 23 秒下降到 ~2 毫秒，这是一个令人印象深刻的改进。我认为这个问题对我来说已经解决了，我希望这对遇到同样问题的其他人也有用。

非常感谢威格林。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-02-21T16:53:08.907

我有一个超慢查询的案例，其中在 3300 万行的表和 24 亿行的子表之间执行简单的一对多连接（在 PG v9.1 中）。我对子表的外键索引执行了 CLUSTER，但发现这并没有解决我的查询超时问题，即使是最简单的查询也是如此。运行 ANALYZE 也没有解决问题。

产生巨大差异的是在父表和子表上执行手动 VACUUM。即使父表正在完成其 VACUUM 过程，我也从 10 分钟超时到一秒钟内返回结果。

我从中得出的结论是，常规的 VACUUM 操作仍然很关键，即使对于 v9.1 也是如此。我这样做的原因是我注意到 autovacuum 至少两周没有在任何一个表上运行，并且从那时起发生了很多 upserts 和 inserts。可能我需要改进 autovacuum 触发器来解决这个问题，但我可以说的是，如果所有内容都被清理干净，一个有几十亿行的 640GB 表确实可以很好地执行。我还没有必要对表进行分区以获得良好的性能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-27T17:13:31.147

对于一个非常简单有效的单行，如果您的 postgres 机器上有快速固态存储，请尝试设置：

```
random_page_cost=1.0 
```

在你的在你的`postgresql.conf`。

默认值是`random_page_cost=4.0`，这针对具有高寻道时间的存储进行了优化，例如旧的旋转磁盘。这改变了寻找的成本计算并且更少地依赖你的内存（最终可能会被交换）

仅此设置就将我的过滤查询从 8 秒缩短到 2 秒，在具有几百万条记录的长表上。

另一个主要改进来自于使用我表上的所有布尔列创建索引。这将 2 秒的查询减少到大约 1 秒。检查@willglynn 的答案。

希望这可以帮助！

# c++ - srv_paramsetoutput() 可以用来设置 nvarchar(max) 还是 varchar(max)？

> ID：13234817
> 
> 赞同：1
> 
> 时间：2012-11-05T15:07:26.393
> 
> 标签：c++, sql-server, extended-procedures

我正在用 C++ 为 SQL Server 编写扩展存储过程。

用户可以提供我可以使用 srv_paramsetoutput() 设置的 OUT 参数。但是，当我尝试设置 TEXT、VARCHAR(max) 或 NVARCHAR(max) 时，这似乎总是失败。请注意，VARCHAR(max) 在内部称为 SRVBIGVARCHAR。

是否存在我可能犯的常见错误，或者当用作输出参数时，xprocs 是否无法访问这些数据类型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-04T22:05:48.663

扩展存储过程可以返回的最大长度值为 8000（对于 Varbinary 或 Varchar）或 4000（对于 nvarchar）。

# database - 在 Greenplum (PostgreSQL) 中格式化外部表

> ID：13234818
> 
> 赞同：1
> 
> 时间：2012-11-05T15:07:27.730
> 
> 标签：database, postgresql, greenplum

我想使用外部表将一个普通文件加载到 Greenplum 数据库中。我可以为时间戳/日期/时间字段指定输入格式吗？（如果你知道 PostgreSQL 的答案，也请回复）

例如，对于 Oracle，我可以使用 DATE_FORMAT DATE MASK 'YYYYMMDD' 来告诉如何解析日期。对于 Netezza，我可以指定 DATESTYLE 'YMD'。对于 Greenplum，我找不到答案。我可以将字段描述为 char，然后在加载期间解析它们，但这是一个丑陋的解决方法。

这是我的暂定代码：

```
CREATE EXTERNAL TABLE MY_TBL (X date, Y time, Z timestamp ) 
LOCATION (
 'gpfdist://host:8001/file1.txt',
 'gpfdist://host:8002/file2.txt'
) FORMAT 'TEXT' (DELIMITER '|' NULL '') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-07T00:37:59.060

看来您可以：

```
SET DATESTYLE = 'YMD'; 
```

`SELECT`在从表中 ing之前。但是，这将影响所有日期的解释，而不仅仅是文件中的那些。如果您在其他地方始终使用明确的 ISO 日期，那会很好，但如果（例如）您还需要在同一查询中接受“D/M/Y”日期文字，则可能会出现问题。

这是特定于 GreenPlum 的`CREATE EXTERNAL TABLE`，不适用于 SQL 标准的`SQL/MED`外部数据包装器，如下所示。

* * *

令我惊讶的是，PostgreSQL 本身（没有此`CREATE EXTERNAL TABLE`功能）*总是*接受 ISO 样式`YYYY-MM-DD`和`YYYYMMDD`日期，而不管`DATESTYLE`. 观察：

```
regress=> SELECT '20121229'::date, '2012-12-29'::date, current_setting('DateStyle');
    date    |    date    | current_setting 
------------+------------+-----------------
 2012-12-29 | 2012-12-29 | ISO, MDY
(1 row)

regress=> SET DateStyle = 'DMY';
SET
regress=> SELECT '20121229'::date, '2012-12-29'::date, current_setting('DateStyle');
    date    |    date    | current_setting 
------------+------------+-----------------
 2012-12-29 | 2012-12-29 | ISO, DMY
(1 row) 
```

...因此，如果 GreenPlum 的行为方式相同，则您无需执行任何操作即可`YYYYMMDD`从输入文件中正确读取这些日期。

以下是它与 PostgreSQL[`file_fdw` `SQL/MED`外部数据包装器](http://www.postgresql.org/docs/current/static/file-fdw.html)的工作方式：

```
CREATE EXTENSION file_fdw;

COPY (SELECT '20121229', '2012-12-29') TO '/tmp/dates.csv' CSV;

SET DateStyle = 'DMY';

CREATE SERVER csvtest FOREIGN DATA WRAPPER file_fdw;

CREATE FOREIGN TABLE csvtest (
    date1 date,
    date2 date
) SERVER csvtest OPTIONS ( filename '/tmp/dates.csv', format 'csv' );

SELECT * FROM csvtest ;
   date1    |   date2    
------------+------------
 2012-12-29 | 2012-12-29
(1 row) 
```

CSV 文件内容为：

```
20121229,2012-12-29 
```

因此您可以看到 Pg 将始终接受 CSV 的 ISO 日期，而不管日期样式如何。

如果 GreenPlum 没有，请提交一个错误。`DateStyle`在创建后更改外部表的读取方式的想法是疯狂的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T01:27:38.023

是的你可以。

为此，您可以将外部表中的字段指定为文本类型。然后，在插入语句中使用转换。您还可以使用 gpload 并定义转换。两种解决方案都类似于上述解决方案。

这是一个简单的文件，其中包含一个整数和一个表示为年月日的日期，用空格分隔：

日期1.txt

```
1|2012 10 12
2|2012 11 13 
```

启动 gpfdist：

```
gpfdist -p 8010 -d ./ -l ./gpfdist.log & 
```

使用 psql 创建外部表、目标表并加载数据：

```
psql test

test=# create external table ext.t2( i int, d text ) 
  location ('gpfdist://walstl-mbp.local:8010/date1.txt') 
  format 'TEXT' ( delimiter '|' )
;

test=# select * from ext.t2; i |     d      
---+------------
  1 | 2012 10 12
  2 | 2012 11 13
(2 rows) 
```

现在，创建将数据加载到的表：

```
test=# create table test.t2 ( i int, d date ) 
; 
```

并且，加载表格：

```
test=# insert into test.t2 select i, to_date(d,'YYYY MM DD') from ext.t2 ;

test=# select * from test.t2;
 i |     d      
---+------------
 1 | 2012-10-12
 2 | 2012-11-13 
```

# c# - 测试表单仅适用于来自本地机器的请求

> ID：13234819
> 
> 赞同：7
> 
> 时间：2012-11-05T15:07:36.070
> 
> 标签：c#, web-services, .net-3.5, asmx

为什么对于我的一些 Web 服务，我得到了测试表单，所以我可以看到生成的 XML 数据，但是对于其他 Web 服务，我收到一条消息，说*“测试表单仅适用于来自本地计算机的请求。 "* ?

两次，我都从客户端浏览器连接到 Web 服务的 URL，并且所有 Web 服务都是使用 C#、.NET 3.5 创建的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-05T15:19:30.917

我在 Google 上搜索[“测试表仅适用于来自本地机器的请求。”](https://www.google.com/search?q=The%20test%20form%20is%20only%20available%20for%20requests%20from%20the%20local%20machine.)

结果很多，共识是将这些节点添加到web服务的*web.config文件中。**我还没有尝试过这个解决方案，但是您可以检查远程显示测试表单的 Web 服务是否在web.config*中有这些节点。或者，您可以将其添加到提供此消息的 Web 服务中，并查看测试表单是否开始远程显示。

```
<configuration>
    <system.web>
    <webServices>
        <protocols>
            <add name="HttpGet"/>
            <add name="HttpPost"/>
        </protocols>
    </webServices>
    </system.web>
</configuration> 
```

以下是部分搜索结果

*   堆栈溢出：[测试表单仅适用于来自本地计算机的请求。](https://stackoverflow.com/questions/1028010/the-test-form-is-only-available-for-requests-from-the-local-machine)
*   GeeksWithBlogs：[“测试表单仅适用于来自本地机器的请求”](http://geekswithblogs.net/juang/archive/2005/11/28/61437.aspx)
*   Microsoft 支持：[INFO：默认情况下禁用 HTTP GET 和 HTTP POST](http://support.microsoft.com/kb/819267)

# google-app-engine - Google App Engine 中的子域

> ID：13234820
> 
> 赞同：0
> 
> 时间：2012-11-05T15:07:53.387
> 
> 标签：google-app-engine, google-apps

我们已经有了域名和虚拟主机。比如说example.com。网络主机包中包含我们的电子邮件帐户。所以我们有 user1@example.com、user2@example.com 等。

我想将 subdomain.example.com 链接到 ourapp.appspot.com。在 appengine 仪表板中添加域时，似乎需要注册 Google Apps (https://www.google.com/a/cpanel/standard/new3)。

这会好吗？请注意，我们已经有 example.com 的电子邮件帐户。

谢谢。我对谷歌应用程序感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:51:25.447

通常我在我的提供商上创建一个子域并插入 CNAME ghs.googlehosted.com。然后使用 *.example.com 或 subdomain.example.com 在 Google Apps 中添加域（新帐户或作为域别名）。

# mongodb - MongoDB 在 Cassandra 上

> ID：13234821
> 
> 赞同：2
> 
> 时间：2012-11-05T15:07:56.190
> 
> 标签：mongodb, cassandra

> **可能的重复：**
> [MongoDB vs. Cassandra](https://stackoverflow.com/questions/2892729/mongodb-vs-cassandra)

我最近一直在阅读有关 Cassandra 与 MongoDB 的文章，但无法决定选择哪一个；这些文章已有一年多的历史，或者它们没有回答我的问题。

我将设计一个具有非常大的数据集（可能是实时提要）的在线游戏，因此我需要可扩展性和速度。

你会选择哪一个？或者，优点和缺点是什么？

# r - 在R中的图中输出文本和矩阵

> ID：13234824
> 
> 赞同：1
> 
> 时间：2012-11-05T15:08:11.230
> 
> 标签：r, plot

我有以下问题：

我需要创建一个包含绘图、直方图、特定文本和矩阵示例的图片。我找到了一种方法来完成部分任务：

```
 png('Erdos-Renyi.png', width=800, height=800)
    par(mfrow=c(2,2))
    plot(g, main=paste('Erdos-Renyi model, V=', V, ' E=',E, sep=""))
    hist(degree(g))
    ...
    dev.off() 
```

在另外两个图中，我想输出一个文本和一个矩阵。我试图用`text`and`mtext`命令来实现这一点，但没有成功。

![图片](../Images/cc6f04bdb6627b7cd533a86ea604d76e.png)

这是我要实现的目标的示例。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:16:51.250

看看里面的`addtable2plot`功能`plotrix`

```
m<-round(matrix(runif(36),ncol=3,nrow=3),2)
plot(1:10)
addtable2plot (x=2,y=7,table=m) 
```

![在此处输入图像描述](../Images/5250542d83662897c1bc27fd38906d3a.png)

# objective-c - 在虚拟键盘中单击下一个按钮期间从一个文本字段移动到另一个文本字段

> ID：13234827
> 
> 赞同：2
> 
> 时间：2012-11-05T15:08:13.767
> 
> 标签：objective-c, ios, xcode

所以我有两个文本框，比如说，TextBox1 和 TwoBox2。在 Viewdidload TextBox1 我正在使用

```
 [self.TextBox1 becomeFirstResponder]; 
```

现在如何将光标移动到 TextBox2 ，当我按下虚拟键盘中的下一步按钮时

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-05T15:13:18.903

在 Mac OS X 的 Cocoa 中，您有下一个响应者链，您可以在其中询问文本字段接下来应该关注哪个控件。这就是使文本字段之间的制表符起作用的原因。但由于 iPhone 没有键盘，只有触控，这个概念在向 Cocoa Touch 的过渡中没有幸存下来。

无论如何，这很容易做到，有两个假设：

所有“可选项卡” UITextFields 都在同一个父视图上。它们的“标签顺序”由标签属性定义。假设你可以覆盖 textFieldShouldReturn: 如下：

```
-(BOOL)textFieldShouldReturn:(UITextField*)textField;
{
 NSInteger nextTag = textField.tag + 1;
  // Try to find next responder
 UIResponder* nextResponder = [textField.superview viewWithTag:nextTag];
 if (nextResponder) {
  // Found next responder, so set it.
  [nextResponder becomeFirstResponder];
 } else {
 // Not found, so remove keyboard.
  [textField resignFirstResponder];
 }
 return NO; // We do not want UITextField to insert line-breaks.
 } 
```

添加更多代码，假设也可以忽略。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-05T15:10:00.647

在 Next Button 的回调中，使用，

```
 [self.TextBox2 becomeFirstResponder]; 
```

简单的！

# c# - 如何在 C# 中使用 PrivateObject 对私有方法进行单元测试

> ID：13234836
> 
> 赞同：2
> 
> 时间：2012-11-05T15:08:40.007
> 
> 标签：c#, unit-testing, private-methods

我试图对私有方法进行简单的单元测试，我让 VS2010 自动生成方法存根并添加缺少的信息：这是我拥有的代码

```
[TestMethod()]
        [DeploymentItem("MyPackage.Language.dll")]
        public void getValidCultureWithValidInputCulture()
        {
            CultureInfo culture = new CultureInfo("sv-SE", false);
            PrivateObject param0 = new PrivateObject(culture, new PrivateType(typeof(CultureInfo)));
            GlobalResourceProvider_Accessor target = new GlobalResourceProvider_Accessor(param0);
            CultureInfo expected = new CultureInfo("sv-SE", false); 
            CultureInfo actual = target.getValidCulture(culture);
            Assert.AreEqual(expected, actual);
            Assert.Inconclusive("Verify the correctness of this test method.");
        } 
```

当我运行它时，我得到一个异常：

```
System.ArgumentException: 
      The member specified (getValidCulture) could not be found. You might need to regenerate your private accessor,
      or the member may be private and defined on a base class. If the latter is true, you need to pass the type
      that defines the member into PrivateObject's constructor. 
```

有谁知道我在这里做错了什么？我的目标是学习如何使用 PrivateType 和 PrivateObject 进行私有方法测试。

编辑：

我不想使用 PrivateObject.Invoke （它对重构不友好）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T21:12:33.070

我遇到了同样的问题。为了纠正这个问题，我确保在“数据`Local.testsettings`和诊断”选项中`TraceAndTestImpact.testsettings`选择了正确的文件（`Debug`、、`Release`等）。

这是如果您有代码覆盖率，或者任何允许选择您将使用的程序集的设置。选择正确的集合，编译并再次尝试单元测试。有时您需要重新创建访问器。我也有一个基类，但它似乎适用于任何`Public Static`方法。

# html - Perl -> HTML 多选解析器

> ID：13234838
> 
> 赞同：2
> 
> 时间：2012-11-05T15:09:00.240
> 
> 标签：html, perl, parsing

好的，所以我正在尝试制作自己的标记语言[对于一个班级，我知道它很愚蠢]，但我在运行它时遇到了很多麻烦。 **一旦我添加导致调用 arraySplitter 函数的文本，它似乎就卡住了（只是暂停，我假设它陷入了一个循环。）。** 如果您愿意，我可以提供信息和输出。这似乎是一个简单的错误，因为我对 perl 相当陌生。

```
#JokeCode -> HTML

use strict;
use warnings;
use Getopt::Std;
my %opts=();

theFunctionThatActuallyParsesTheNonsense($opts{i});
my $questionCounter;
my $tempVar;
my @arrayForSplit;
my @goodArray;
my $curLine;
sub theFunctionThatActuallyParsesTheNonsense
{
my $outputF = $_[0];
$questionCounter= 0;

while (<LINES>)
{
      $curLine= $_;
        if($curLine =~ m/&&url/)
    {

        @arrayForSplit = split(/ /,$_);
        $curLine =~ s/$arrayForSplit[1]//;
        $curLine =~ s/$arrayForSplit[2]//;
        $curLine =~ s/&&url/<a href="$arrayForSplit[1]">$arrayForSplit[2]/;
        $curLine =~ s/url&&/<\/a>/;
        print @arrayForSplit;

    }

    $curLine =~ s/\&\&b /<b>/;
    $curLine =~ s/ b\&\&/<\/b>/;

    $curLine =~ s/&&i /<i>/;
    $curLine =~ s/ i&&/<\/i>/;

    $curLine =~ s/&&u /<u>/;
    $curLine =~ s/ u&&/<\/u>/;

    $curLine =~ s/&&tt/<tt>/;
    $curLine =~ s/tt&&/<\/tt>/;

    $curLine =~ s/&&grn/<span style="color:#00ff00">/;
    $curLine =~ s/grn&&/<\/span>/;

    $curLine =~ s/&&red/<span style="color:#ff0000">/;
    $curLine =~ s/red&&/<\/span>/;

    $curLine =~ s/&&blu/<span style="color:#0000ff">/;
    $curLine =~ s/blu&&/<\/span>/;

    $curLine =~ s/&&ex/<pre class="code">/;
    $curLine =~ s/ex&&/<\/pre>/;

    if($curLine =~  m/&&tf/)
    {
        $curLine =~ s/&&tf/<form><br><input type="text" name="$questionCounter"><\/form>/;
        $curLine =~ s/tf&&//;
        $questionCounter++;
    }
    print "even here?";
    if($curLine =~ m/&&mc/)
    {
        print "How bout now?";
        @goodArray = arraySplitter($curLine);

        foreach (@goodArray)
        {

            $curLine =~ s/&&mc/<input type="radio" name="$questionCounter" value="$_"> $_ <br>/;
        }
        $curLine =~ s/&&mc/<br>/;
        $curLine =~ s/mc&&/<input type="radio" name="questionCounter" style="display: none;"\/>/;
        $questionCounter++;
    }   
    print OUT $curLine;
    print OUT "\n";

}

sub arraySplitter
{
print "Are you still there?";
my @retArray;
my $arrayPlace = 0;
my @mcArray = split(/ /,$_[0]);
print @mcArray;
    if(scalar(@mcArray)-1 < 1)
    {
    print "The size of the array is 0";
    exit 1;
    }
while ($arrayPlace < scalar(@mcArray)-1)
{
    $retArray[$arrayPlace] = $mcArray[$arrayPlace];
}
print @retArray;
return @retArray;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:19:00.553

本节：

```
while ($arrayPlace < scalar(@mcArray)-1)
{
    $retArray[$arrayPlace] = $mcArray[$arrayPlace];
} 
```

……从不修改`$arrayPlace`。所以你有一个无限循环。

* * *

看起来它正在尝试制作 的副本`@mcArray`，最好使用以下方法：

```
 @retArray = @mcArray; 
```

…但既然看起来你只是简单地返回`@retArray`，你不妨只是：

```
return @mcArray; 
```

如果这是未完成的代码，并且您打算进行某种转换，请查看`map`.

# ruby-on-rails - RoR - Time.strptime 问题

> ID：13234849
> 
> 赞同：0
> 
> 时间：2012-11-05T15:09:33.597
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

这是有问题的方法。

```
def published_at_setter
    self.published_at = Time.strptime("#{@date} #{@time}", "%m/%d/%Y %I:%M %p")
    puts " ~~~~~~~~~~~~~~~~~~~ #{@date} #{@time} ~~~~~~~~~~~~~~~~ #{self.published_at}"
end 
```

使用 @date = "09/11/2012" 和 @time "01:45 AM" 我在 webbrick 控制台中得到了这个。WFT？

```
~~~~~~~~~~~~~~~~~~~ 09/11/2012 01:45 AM ~~~~~~~~~~~~~~~~ 2012-09-11 06:45:00 UTC 
```

在 Rails 控制台中，我得到了预期的结果。“2012-09-11 01:45:00 -0500”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T17:07:57.853

而不是`Time.strptime`，您应该使用`Time.zone.parse`.

```
def published_at_setter
    self.published_at = Time.zone.parse("#{@date} #{@time}")
    puts " ~~~~~~~~~~~~~~~~~~~ #{@date} #{@time} ~~~~~~~~~~~~~~~~ #{self.published_at}"
end 
```

# linux - 如何搜索文件并将它们压缩到一个 zip 文件中

> ID：13234850
> 
> 赞同：44
> 
> 时间：2012-11-05T15:09:35.863
> 
> 标签：linux, operating-system

我尝试使用以下命令搜索文件并压缩它们

```
find . regexpression -exec zip {} \; 
```

但是它不起作用。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-11-05T15:14:24.617

您使用的命令将分别对每个文件运行 zip，试试这个：

```
find . -name <name> -print | zip newZipFile.zip -@ 
```

`-@`告诉 zip 从输入中读取文件。从 man [zip(1)](http://linux.die.net/man/1/zip)，

> **`-@`文件列表。**如果文件列表指定为`-@`[Not on MacOS]，则 zip 从标准输入而不是命令行获取输入文件列表。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-11-05T15:24:07.147

您还可以提供名称作为 find 命令的结果：

```
zip name.zip `find . -name <name> -print` 
```

这是您正在使用的 shell 的一项功能。您可以搜索“反引号”以确定您的 shell 如何处理此问题。

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-11-05T15:25:14.717

您的回复很接近，但这可能会更好：

```
find -regex 'regex' -exec zip filname.zip {} + 
```

这会将所有匹配的文件放在一个名为 filename.zip 的 zip 文件中。您不必担心文件名中的特殊字符（如换行符），如果您通过管道传输结果，您就会担心。

# database - DB2 Instance User 和 DAS User 的区别

> ID：13234855
> 
> 赞同：1
> 
> 时间：2012-11-05T15:09:57.907
> 
> 标签：database, linux, db2

DB2 Instance 用户（*在我的 linux 机器上是：**db2inst1***）和 DB2 Administration Server User/DAS 用户（*在我的 linux 机器上是：**dasusr1***）有什么不同？

已经通过谷歌搜索它，没有找到任何有用的信息。

当我想创建一个数据库时，我应该用什么来创建？**db2inst1**还是**dasusr1**？

最后一个问题，当我`db2sampl`以 dasusr1 运行（创建数据库示例）时，它会出现权限被拒绝之类的错误，但是当通过 db2inst1 运行时它起作用了！为什么会这样？

（ps：我`source /home/db2inst1/sqllib/db2profile`在 dasusr1 的 .bashrc 中插入 ' '，所以我可以使用 dasusr1 运行`db2`和`db2sampl`命令）

所以对此感到困惑，任何有关它的参考将不胜感激。谢谢你的建议：D

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-06T09:27:51.263

关于 DAS 的作用（DB2 管理服务器），前面的答案是正确的，但是，您不必再担心，因为它在 9.7 版中已被弃用，并在 10.1 版中被删除

DAS 所做的许多功能都被 Data Studio Web Console 和 Data Studio Client 所取代。DAS 对于使用控制中心在服务器中执行远程命令很有用，但这些工具在最新版本中都不存在。

你为什么使用两个用户？因为 DAS 是一个服务器守护进程，它允许对所有实例执行命令，并且它保留了一种称为任务中心的作业守护进程。实例用户是实例的所有者，并且在一个实例中存储了多个数据库。这意味着实例所有者是给定实例中的超级用户，但 das 用户不是超级用户，它只是执行命令的助手。

db2sampl 在实例中创建一个数据库。使用 db2inst1 时，它使用实例用户所有者创建数据库。使用 dasusr1 时，它在任何情况下都没有任何特权，这就是问题的根源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:23:56.767

以下是关于 DAS 功能的一些解释：http: [//pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.gui.doc/doc/c0004959。 html](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.gui.doc/doc/c0004959.html)

[http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.gui.doc/doc/t0004960.html](http://pic.dhe.ibm.com/infocenter/db2luw/v10r1/topic/com.ibm.db2.luw.admin.gui.doc/doc/t0004960.html)

只有在通过某些远程工具管理 DB2 时才需要它。如果您有权访问 Linux 服务器并且可以以 db2inst1 身份登录（或者，更好的是，通过 sudo 成为该用户），那么您将无需从 DAS 用户帐户运行命令。

# php - 动态下拉列表

> ID：13234860
> 
> 赞同：0
> 
> 时间：2012-11-05T15:10:11.130
> 
> 标签：php, javascript, ajax, dynamic, html-select

**解决方案**：[删除选择中的选项](https://stackoverflow.com/questions/11071562/remove-option-in-select)

我有一个表格，我希望用户从 10 个选项的列表中对他们的“前 3 名”进行排名。

为了验证响应，我想在十项中的每一项旁边都有一个下拉菜单。使用选项 1 到 3 - 但是，当用户从任何选项中选择“1”时，所有下拉列表都会更新为仅显示选项 2 和 3。

Similarly, when a users chooses option 3 for any one of the ten, the remaining drop downs are updated to only show option 2 and when that is selected all remaining drop downs are updated to show nothing or disabled.

我过去通过 Javascript 使用过动态下拉菜单，但没有达到这种复杂程度 - 欢迎任何想法或想法、代码示例或替代方案（Ajax 等）！

谢谢，

H。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T16:03:35.430

试试 - [stackoverflow.com/questions/11071562/remove-option-in-select](https://stackoverflow.com/questions/11071562/remove-option-in-select)。

您也可以尝试广播组-

```
<input type="radio" name="first" value="choice1">
<input type="radio" name="second" value="choice1">
<input type="radio" name="third" value="choice1">

<input type="radio" name="first" value="choice2">
<input type="radio" name="second" value="choice2">
<input type="radio" name="third" value="choice2">

.... 
```

# mysql - mysql 将表重命名为新数据库

> ID：13234862
> 
> 赞同：0
> 
> 时间：2012-11-05T15:10:11.823
> 
> 标签：mysql, table-rename

希望您能对此有所帮助...我希望存档大量数据（2.5 亿行），并仅保留最近 3 个月的数据。我现在已将旧数据移至另一台服务器，我希望将其从活动表中删除，只留下我想保留的 3 个月数据。

在检查了其他一些帖子后，我决定最好的方法是提取我想要保留的 3 个月，将提取导入新数据库，删除旧表，然后使用`rename table`将新表移回现场数据库。我对此进行了测试，效果很好。

我遇到的问题是，当我今天在明天早上部署它之前进行最后一次测试时，表离开了新数据库，但没有回到原始数据库。该表的 IBD 文件仍然存在于旧数据库中，但该表没有显示，如果我尝试创建一个具有相同名称的表，则表示该表已经存在。有任何想法吗？

我没有收到重命名表时出现的消息的注释，我现在正在重试，所以我会在之后更新显示的错误消息。

希望你能帮忙。

亚历克斯

# android - 登录到应用程序并从服务器获取 api 请求的会话令牌

> ID：13234863
> 
> 赞同：3
> 
> 时间：2012-11-05T15:10:14.157
> 
> 标签：android, api, login

有一个用户很多的网站。为了使用私人页面，用户必须使用用户名和密码登录。

现在我正在开发一个 android 应用程序，该应用程序通过 API 以原生方式显示来自网站的内容，没有 WebView 或类似方式。工作流程如下：

*   应用程序已启动
*   应用程序检查会话密钥是否存在。
    *   如果密钥存在，则询问网站API sessionkey是否有效并且属于用户=>如果是，则允许应用程序的使用
    *   如果不存在会话密钥，则询问用户名+密码，询问 API 是否正确并通过 API 获取新的会话密钥 => 允许应用使用
*   用户点击例如“账户余额” -> API 请求使用存储的 sessionkey 完成并显示结果
*   用户点击“支付”，填写表格并获得他的钱 -> API 请求使用存储的会话密钥完成并显示结果

现在我正在寻找解决这个问题的最佳实践。**我不希望我的 sessionkey 被简单地劫持，我想确保 sessionkey 确实属于这个用户**。由于可以通过应用程序查看/修改私人数据，因此隐私很重要。

我查看了 oAuth，但这不是我认为的需要，因为我需要一个对每个用户都是唯一的消费者密钥和消费者秘密，我无法将其集成到应用程序中。我不想有一个新的窗口/浏览器来输入用户名+密码并通过像 oAuth 那样的回调来处理响应。

对此有任何提示吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:51:10.657

有关 http 身份验证最佳实践的良好起点，请查看这篇文章：

[“标准化 REST 身份验证原则”](http://broadcast.oreilly.com/2009/12/principles-for-standardized-rest-authentication.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-06T05:49:20.713

如果要发送私人数据，*则需要*使用 HTTPS。这也将负责保护您的会话令牌等。如果您需要检查哪个令牌属于哪个用户，您自然需要在服务器端进行此映射。大多数服务器端平台为您提供会话映射或类似的，由会话 ID 等键入，您可以在其中存储几乎任何内容，包括用户详细信息。

# tfs - TeamCity 与 TFS 在同一台服务器上？

> ID：13234864
> 
> 赞同：0
> 
> 时间：2012-11-05T15:10:16.013
> 
> 标签：tfs, continuous-integration, teamcity

我将很快负责将 TeamCity 实施到我们的开发环境中。我四处搜索并没有看到真正的答案，有人知道在构建服务器方面是否有“最佳实践”。可以将 TeamCity 与 TFS 安装在同一台服务器上吗，是否首选？或者我应该将它安装到专用服务器上（我可以这样做）。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T22:50:45.470

我认为微软自己[关于 TFS](http://msdn.microsoft.com/en-us/library/ms181712.aspx)的建议也与此相关：

> 您可以在与 Team Foundation Application-Tier Server 相同的计算机上托管生成服务器，但在大多数情况下，此生成服务器不应托管任何生成代理。构建代理对处理器提出了很高的要求，这可能会显着降低应用层的性能。此外，您可能希望避免在应用层上运行任何构建服务器组件，因为安装 Team Foundation Build Service 会增加计算机上的攻击面。

因此，您可能会在版本控制、工作项跟踪等其他操作上看到不必要的减速。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T17:59:08.357

将它安装在自己的服务器上，您不希望它在执行构建时使 tfs 停止运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T08:16:12.127

您可以在 tfs 服务器上安装 Teamcity 服务器，但如果您可以使用单独的机器，但作为执行工作的代理，如果可能的话，肯定需要在与 teamcity 和 tfs 不同的机器上。

# javascript - JavaScript Node.js 日期比较和数组按日期排序

> ID：13234865
> 
> 赞同：6
> 
> 时间：2012-11-05T15:10:20.120
> 
> 标签：javascript, node.js, date

首先，JavaScript 是否像 Python 那样没有基本的日期比较？

在我的 Node.js 脚本中，我有以下几行：

```
console.log(Date(2012,11,10) < Date(2012, 11, 9))
console.log(Date(2012,11,10) > Date(2012, 11, 9)) 
```

但是，*这两*行都返回*false*。

似乎有很多关于“JavaScript 中的日期比较”的问题。

然而，对于几乎所有人来说，有人用他们自制的比较日期的解决方案做出回应，其中一些相当长和/或“hacky”。

是否真的没有固有或惯用的方式来简单地比较 JavaScript 中的日期。
是否有任何 Node 库支持它？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-05T15:13:15.770

您需要使用`new`关键字

```
console.log(new Date(2012,11,10) < new Date(2012, 11, 9))
console.log(new Date(2012,11,10) > new Date(2012, 11, 9)) 
```

正如[Elias Van Ootegem](https://stackoverflow.com/users/1230836/elias-van-ootegem)指出的那样，如果`new`省略关键字，则返回字符串是一种标准：

> 当 Date 作为函数而不是构造函数调用时，它返回一个表示当前时间 (UTC) 的字符串。
> 
> 注意
> 函数调用`Date(…)`不等同于`new Date(…)`具有相同参数的对象创建表达式。

来源：[15.9.2 作为函数调用的日期构造函数](http://www.ecma-international.org/ecma-262/5.1/#sec-15.9.2)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-03-10T01:48:38.960

我自己也遇到了日期比较问题，虽然我可以看到@dev-null 的答案确实适用于构造为的日期`new Date(2012,11,10)`，但它似乎不适用于解析的日期，至少在我的情况下：

```
[vps@palladin]~$ node -v
v4.3.2
[vps@palladin]~$ node
> new Date('Wed Mar 09 2016 17:31:58 GMT-0800 (PST)') == new Date('Wed Mar 09 2016 17:31:58 GMT-0800 (PST)')
false
> new Date('Wed Mar 09 2016 17:31:58 GMT-0800 (PST)') < new Date('Wed Mar 09 2016 17:31:58 GMT-0800 (PST)')
false
> new Date('Wed Mar 09 2016 17:31:58 GMT-0800 (PST)') > new Date('Wed Mar 09 2016 17:31:58 GMT-0800 (PST)')
false 
```

我发现可靠比较 J/S Date 对象的唯一方法是使用`getTime()`函数，并比较两者的结果。

```
> new Date('Wed Mar 09 2016 17:31:58 GMT-0800 (PST)').getTime() == new Date('Wed Mar 09 2016 17:31:58 GMT-0800 (PST)').getTime()
true
> new Date('Wed Mar 09 2016 17:31:58 GMT-0800 (PST)').getTime() < new Date('Wed Mar 09 2016 17:31:58 GMT-0800 (PST)').getTime()
false
> new Date('Wed Mar 09 2016 17:31:58 GMT-0800 (PST)').getTime() > new Date('Wed Mar 09 2016 17:31:58 GMT-0800 (PST)').getTime()
false 
```

# perl - Perl system() 调用会死掉吗？

> ID：13234866
> 
> 赞同：8
> 
> 时间：2012-11-05T15:10:18.807
> 
> 标签：perl, system, eval, die

**在 Perl 5 中可以`system()`调用吗？`die`**

（换句话说，为了 100% 防止执行`system()`调用的程序崩溃，**是否需要将其包装到一个`eval`block**中，或者这完全没有必要？）

* * *

我在 中没有找到任何提及这种可能性的内容[`perldoc system`](http://perldoc.perl.org/functions/system.html)，但也没有完全找到确切的“这个电话永远不会消亡”。

注意：这里的问题是关于基本 CORE Perl，没有`autodie`或任何其他具有类似效果的自定义模块。此外，假设没有`ALRM`设置任何信号或任何其他自定义信号处理程序。

[我假设 Perl 5.* 的所有版本都表现相同，但如果不是，将不胜感激与 5.8 有关的答案。]

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T17:12:29.943

除非我对来源的解释不正确，否则这似乎是一种可能性：

来源：Perl 5.16.2（也检查了 5.8.8），文件：pp_sys.c，行：`PP(pp_system)`代码块内的 4224：

```
if (n != sizeof(int))
  DIE(aTHX_ "panic: kid popen errno read, n=%u", n); 
```

`DIE`被`Perl_die(pTHX_ const* pat, ...)`声明在`util.c`

根据文档，“panic：kid popen errno read”是指“forked child 返回了一个关于其 errno 的难以理解的消息”。

[`panic`Perl中的消息解释](http://web.archiveorange.com/archive/v/L3SLVAzhhHs5w7ZUyhl7)：

> 约定是当解释器因内部错误而死时，消息以“panic:”开头。从历史上看，许多恐慌消息都是简洁的固定字符串，这意味着触发恐慌的超出范围的值会丢失。现在我们尝试报告这些值，因为此类恐慌可能无法重复，并且原始错误消息可能是我们尝试查找原因时得到的唯一诊断。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T15:50:08.447

您可以`system()`期望它不会抛出异常来调用。无需将其包装在一个`eval`块中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T15:42:44.483

`system`返回程序的退出状态。这意味着，如果程序崩溃，调用 Perl 脚本会继续（参见[system](http://p3rl.org/system)）。

尽管如此，程序本身仍然可以杀死调用脚本甚至使计算机崩溃。例如，在 Linux 中：

```
system 'killall', 'perl';
print "Alive\n"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T16:05:36.043

我假设您正在谈论`system`函数本身的实现，而不是通过调用调用的任何内容。（显然，子进程不能`die`在父进程的上下文中调用，即使这样也假定调用是对 Perl 代码的。）

一个明确的答案需要了解内部知识，但鉴于尝试调用不存在的程序不会死，我无法想象还有其他任何事情会发生：

```
system('abcd');      # 'abcd' is not recognized... [Win32 message]
say "I'm not dead."; # always prints 
```

# javascript - parseInt() 的最大基数？

> ID：13234867
> 
> 赞同：9
> 
> 时间：2012-11-05T15:10:22.990
> 
> 标签：javascript, parsing

的第二个参数`parseInt()`定义第一个参数解析到的基数。我一直在玩一些数字，发现如果基数大于 36，我就不再得到正确的答案：

```
parseInt("1", 36);
// -> 1

parseInt("1", 37);
// -> NaN 
```

**有限制吗？为什么是36？**

*我运行测试时使用的是 chrome*

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-05T15:12:28.023

36 是 10 + 26。字母表中有 26 个字母，加上 0-9。这是您可以使用的最大基数。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-05T15:12:31.753

[ECMAScript 规范将最大基数指定为 36。](http://www.ecma-international.org/ecma-262/5.1/#sec-15.1.2.2)

*   有 10 位数字：(0-9)
*   有 26 个字符：(az)

```
10 + 26 = 36 
```

* * *

还应该提到的是，可以支持高于 的基数`36`。可以调整规范以使用区分大小写的字符来表示大于 36 的基数，例如 37-62。*可以*使用特殊字符，例如带有符号和重音字母的字符。

他们不是的原因是它模棱两可，而且没有必要。自定义基数的解析算法应该不会太难，并且可以根据需要编写。

将基数限制为 36 有助于平衡性能和实用性。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T15:14:27.010

最大值为 36，因为这是标准字母表的数字和字符数 (0123456789abcdefghijklmnopqrstuvwxyz)。如果你想知道其他类似的东西，你可能想给[官方的 ECMAScript 语言规范添加书签](http://www.ecma-international.org/ecma-262/5.1/)，它都在那里

# java - 我可以将“writeBufferHighWaterMark”选项应用于“OioClientSocketChannel”吗？

> ID：13234868
> 
> 赞同：1
> 
> 时间：2012-11-05T15:10:23.583
> 
> 标签：java, netty

我在解决服务器问题时遇到了麻烦。当连接增长到无法忍受时，“CLOSE_WAIT”状态连接的数量会急剧增加。

我已经搜索了这个问题的解决方案并找到了一个提示。(http://web.archiveorange.com/archive/v/ZVMdIdpQAlQ0ELH4D8SH)

在上面的信任页面中，Lee 指导我们在建立连接时使用“writeBufferHighWaterMark”选项。

```
 clientBootstrap.setOption("writeBufferHighWaterMark", 4096);
    clientBootstrap.setOption("writeBufferLowWaterMark", 1024); 
```

我想知道这个选项是否对 oioSocketChannel 有效。所有示例都使用 nioSocketChannel 与之相关。

感谢您的热心帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:39:04.430

不，它们不适用于 OIO。请注意，水印机制控制由于许多异步写入而导致的内存消耗；OIO 全面使用阻塞 IO。

# struts2 - struts 2 ognl错误

> ID：13234870
> 
> 赞同：1
> 
> 时间：2012-11-05T15:10:26.263
> 
> 标签：struts2, ognl

我收到 OGNL 错误，如何缩小到确切出现此错误的错误。

该页面包含几个文本框，最初页面出现一些文本和文本框，在提交相同的页面刷新后文本框更改为文本意味着我隐藏文本框并显示使用 jQuery 输入的值的文本。

```
[11/5/12 8:27:42:444 CST] 00000058 OgnlValueStac W com.opensymphony.xwork2.util.logging.commons.CommonsLogger warn Error setting expression '' with value '[Ljava.lang.String;@14ae81f7'
                                 ognl.ExpressionSyntaxException: Malformed OGNL expression:  [ognl.ParseException: Encountered "<EOF>" at line 1, column 0.
Was expecting one of:
    ":" ...
    "not" ...
    "+" ...
    "-" ...
    "~" ...
    "!" ...
    "(" ...
    "true" ...
    "false" ...
    "null" ...
    "#this" ...
    "#root" ...
    "#" ...
    "[" ...
    "{" ...
    "@" ...
    "new" ...
    <IDENT> ...
    <DYNAMIC_SUBSCRIPT> ...
    "\'" ...
    "`" ...
    "\"" ...
    <INT_LITERAL> ...
    <FLT_LITERAL> ...
    ]
    at ognl.Ognl.parseExpression(Ognl.java:112)
    at com.opensymphony.xwork2.ognl.OgnlUtil.compile(OgnlUtil.java:214)
    at com.opensymphony.xwork2.ognl.OgnlUtil.setValue(OgnlUtil.java:198)
    at com.opensymphony.xwork2.ognl.OgnlValueStack.setValue(OgnlValueStack.java:161)
    at com.opensymphony.xwork2.ognl.OgnlValueStack.setValue(OgnlValueStack.java:149)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.setParameters(ParametersInterceptor.java:276)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:187)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:179)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:235)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:89)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:130)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:126)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:138)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:165)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:179)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.allstate.ars.drivewise.security.interceptor.AuthorizationInterceptor.intercept(AuthorizationInterceptor.java:61)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:488)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:112)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:997)
    at com.ibm.ws.webcontainer.extension.DefaultExtensionProcessor.invokeFilters(DefaultExtensionProcessor.java:1062)
    at com.ibm.ws.webcontainer.extension.DefaultExtensionProcessor.handleRequest(DefaultExtensionProcessor.java:982)
    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3935)
    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:276)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:931)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1592)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:276)
    at com.ibm.ws.ssl.channel.impl.SSLConnectionLink.determineNextChannel(SSLConnectionLink.java:1048)
    at com.ibm.ws.ssl.channel.impl.SSLConnectionLink$MyReadCompletedCallback.complete(SSLConnectionLink.java:642)
    at com.ibm.ws.ssl.channel.impl.SSLReadServiceContext$SSLReadCompletedCallback.complete(SSLReadServiceContext.java:1784)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager.requestComplete(WorkQueueManager.java:557)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager.attemptIO(WorkQueueManager.java:607)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager.workerRun(WorkQueueManager.java:984)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager$Worker.run(WorkQueueManager.java:1069)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604)
Caused by: ognl.ParseException: Encountered "<EOF>" at line 1, column 0.
Was expecting one of:
    ":" ...
    "not" ...
    "+" ...
    "-" ...
    "~" ...
    "!" ...
    "(" ...
    "true" ...
    "false" ...
    "null" ...
    "#this" ...
    "#root" ...
    "#" ...
    "[" ...
    "{" ...
    "@" ...
    "new" ...
    <IDENT> ...
    <DYNAMIC_SUBSCRIPT> ...
    "\'" ...
    "`" ...
    "\"" ...
    <INT_LITERAL> ...
    <FLT_LITERAL> ...

    at ognl.OgnlParser.generateParseException(OgnlParser.java:3172)
    at ognl.OgnlParser.jj_consume_token(OgnlParser.java:3051)
    at ognl.OgnlParser.unaryExpression(OgnlParser.java:1236)
    at ognl.OgnlParser.multiplicativeExpression(OgnlParser.java:971)
    at ognl.OgnlParser.additiveExpression(OgnlParser.java:894)
    at ognl.OgnlParser.shiftExpression(OgnlParser.java:750)
    at ognl.OgnlParser.relationalExpression(OgnlParser.java:508)
    at ognl.OgnlParser.equalityExpression(OgnlParser.java:405)
    at ognl.OgnlParser.andExpression(OgnlParser.java:352)
    at ognl.OgnlParser.exclusiveOrExpression(OgnlParser.java:299)
    at ognl.OgnlParser.inclusiveOrExpression(OgnlParser.java:246)
    at ognl.OgnlParser.logicalAndExpression(OgnlParser.java:193)
    at ognl.OgnlParser.logicalOrExpression(OgnlParser.java:140)
    at ognl.OgnlParser.conditionalTestExpression(OgnlParser.java:101)
    at ognl.OgnlParser.assignmentExpression(OgnlParser.java:64)
    at ognl.OgnlParser.expression(OgnlParser.java:23)
    at ognl.OgnlParser.topLevelExpression(OgnlParser.java:15)
    at ognl.Ognl.parseExpression(Ognl.java:110)
    ... 72 more
/-- Encapsulated exception ------------\
ognl.ParseException: Encountered "<EOF>" at line 1, column 0.
Was expecting one of:
    ":" ...
    "not" ...
    "+" ...
    "-" ...
    "~" ...
    "!" ...
    "(" ...
    "true" ...
    "false" ...
    "null" ...
    "#this" ...
    "#root" ...
    "#" ...
    "[" ...
    "{" ...
    "@" ...
    "new" ...
    <IDENT> ...
    <DYNAMIC_SUBSCRIPT> ...
    "\'" ...
    "`" ...
    "\"" ...
    <INT_LITERAL> ...
    <FLT_LITERAL> ...

    at ognl.OgnlParser.generateParseException(OgnlParser.java:3172)
    at ognl.OgnlParser.jj_consume_token(OgnlParser.java:3051)
    at ognl.OgnlParser.unaryExpression(OgnlParser.java:1236)
    at ognl.OgnlParser.multiplicativeExpression(OgnlParser.java:971)
    at ognl.OgnlParser.additiveExpression(OgnlParser.java:894)
    at ognl.OgnlParser.shiftExpression(OgnlParser.java:750)
    at ognl.OgnlParser.relationalExpression(OgnlParser.java:508)
    at ognl.OgnlParser.equalityExpression(OgnlParser.java:405)
    at ognl.OgnlParser.andExpression(OgnlParser.java:352)
    at ognl.OgnlParser.exclusiveOrExpression(OgnlParser.java:299)
    at ognl.OgnlParser.inclusiveOrExpression(OgnlParser.java:246)
    at ognl.OgnlParser.logicalAndExpression(OgnlParser.java:193)
    at ognl.OgnlParser.logicalOrExpression(OgnlParser.java:140)
    at ognl.OgnlParser.conditionalTestExpression(OgnlParser.java:101)
    at ognl.OgnlParser.assignmentExpression(OgnlParser.java:64)
    at ognl.OgnlParser.expression(OgnlParser.java:23)
    at ognl.OgnlParser.topLevelExpression(OgnlParser.java:15)
    at ognl.Ognl.parseExpression(Ognl.java:110)
    at com.opensymphony.xwork2.ognl.OgnlUtil.compile(OgnlUtil.java:214)
    at com.opensymphony.xwork2.ognl.OgnlUtil.setValue(OgnlUtil.java:198)
    at com.opensymphony.xwork2.ognl.OgnlValueStack.setValue(OgnlValueStack.java:161)
    at com.opensymphony.xwork2.ognl.OgnlValueStack.setValue(OgnlValueStack.java:149)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.setParameters(ParametersInterceptor.java:276)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:187)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ParametersInterceptor.doIntercept(ParametersInterceptor.java:195)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.StaticParametersInterceptor.intercept(StaticParametersInterceptor.java:179)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.MultiselectInterceptor.intercept(MultiselectInterceptor.java:75)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.CheckboxInterceptor.intercept(CheckboxInterceptor.java:94)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.FileUploadInterceptor.intercept(FileUploadInterceptor.java:235)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ModelDrivenInterceptor.intercept(ModelDrivenInterceptor.java:89)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ScopedModelDrivenInterceptor.intercept(ScopedModelDrivenInterceptor.java:130)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.debugging.DebuggingInterceptor.intercept(DebuggingInterceptor.java:267)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ChainingInterceptor.intercept(ChainingInterceptor.java:126)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.PrepareInterceptor.doIntercept(PrepareInterceptor.java:138)
    at com.opensymphony.xwork2.interceptor.MethodFilterInterceptor.intercept(MethodFilterInterceptor.java:87)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.I18nInterceptor.intercept(I18nInterceptor.java:165)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.interceptor.ServletConfigInterceptor.intercept(ServletConfigInterceptor.java:164)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.AliasInterceptor.intercept(AliasInterceptor.java:179)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.opensymphony.xwork2.interceptor.ExceptionMappingInterceptor.intercept(ExceptionMappingInterceptor.java:176)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at com.allstate.ars.drivewise.security.interceptor.AuthorizationInterceptor.intercept(AuthorizationInterceptor.java:61)
    at com.opensymphony.xwork2.DefaultActionInvocation.invoke(DefaultActionInvocation.java:237)
    at org.apache.struts2.impl.StrutsActionProxy.execute(StrutsActionProxy.java:52)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:488)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at org.springframework.orm.jpa.support.OpenEntityManagerInViewFilter.doFilterInternal(OpenEntityManagerInViewFilter.java:112)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116)
    at com.ibm.ws.webcontainer.filter.WebAppFilterChain._doFilter(WebAppFilterChain.java:77)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.doFilter(WebAppFilterManager.java:908)
    at com.ibm.ws.webcontainer.filter.WebAppFilterManager.invokeFilters(WebAppFilterManager.java:997)
    at com.ibm.ws.webcontainer.extension.DefaultExtensionProcessor.invokeFilters(DefaultExtensionProcessor.java:1062)
    at com.ibm.ws.webcontainer.extension.DefaultExtensionProcessor.handleRequest(DefaultExtensionProcessor.java:982)
    at com.ibm.ws.webcontainer.webapp.WebApp.handleRequest(WebApp.java:3935)
    at com.ibm.ws.webcontainer.webapp.WebGroup.handleRequest(WebGroup.java:276)
    at com.ibm.ws.webcontainer.WebContainer.handleRequest(WebContainer.java:931)
    at com.ibm.ws.webcontainer.WSWebContainer.handleRequest(WSWebContainer.java:1592)
    at com.ibm.ws.webcontainer.channel.WCChannelLink.ready(WCChannelLink.java:186)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleDiscrimination(HttpInboundLink.java:452)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.handleNewRequest(HttpInboundLink.java:511)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.processRequest(HttpInboundLink.java:305)
    at com.ibm.ws.http.channel.inbound.impl.HttpInboundLink.ready(HttpInboundLink.java:276)
    at com.ibm.ws.ssl.channel.impl.SSLConnectionLink.determineNextChannel(SSLConnectionLink.java:1048)
    at com.ibm.ws.ssl.channel.impl.SSLConnectionLink$MyReadCompletedCallback.complete(SSLConnectionLink.java:642)
    at com.ibm.ws.ssl.channel.impl.SSLReadServiceContext$SSLReadCompletedCallback.complete(SSLReadServiceContext.java:1784)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager.requestComplete(WorkQueueManager.java:557)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager.attemptIO(WorkQueueManager.java:607)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager.workerRun(WorkQueueManager.java:984)
    at com.ibm.ws.tcp.channel.impl.WorkQueueManager$Worker.run(WorkQueueManager.java:1069)
    at com.ibm.ws.util.ThreadPool$Worker.run(ThreadPool.java:1604)
\--------------------------------------/ 
```

# .net - 某些 DbGeography 元素之间的相交不适用于 Entity Framework 5

> ID：13234872
> 
> 赞同：2
> 
> 时间：2012-11-05T15:10:47.967
> 
> 标签：.net, sql, intersect

那有什么问题？

```
const string lonMin="-19";      
const string latMin = "25";
const string lonMax = "-24";
const string latMax = "25.6";

//Create a polygon
var geoEncuadre = DbGeography.FromText("POLYGON ((" + lonMin + " " + latMin + "," +
            lonMax + " " + latMin + ","+ lonMax + " "+ latMax +","+lonMin+" " + latMax +","+lonMin + " "+latMin +  "))", 4326);
//Check for every node if intersects with the polygon
var nodos = (from n in _bd.Nodo
             where n.Geo.Intersects(geoEncuadre)
             select n).ToList(); 
```

这会抛出一个`EntityCommandExecutionException`. 这很奇怪，因为如果我使用*DbGeometry*而不是*DbGeography*它可以正常工作。*DbGeography*和*Intersect*操作会发生什么？

# jquery - jQuery UI 没有创建占位符

> ID：13234875
> 
> 赞同：1
> 
> 时间：2012-11-05T15:11:00.163
> 
> 标签：jquery, jquery-ui

我正在尝试使现有的 div 列表可排序。我被可排序小部件添加的占位符所困扰。如果我查看网站上的演示，我可以看到拖动的项目在我拖动它时在列表标记中移动。但在我的示例中，我只能看到样式占位符，但它不会在元素之间移动。并且拖动的项目总是会回到我释放的起点。它是否无法按预期与 div 一起使用，或者我在这里缺少什么？

```
<div class="dummy-deviceList">
  <div class="dummy-device ui-sortable" data-dummy-device-id="">
    <div class="dummy-device-main">
      <div class="dummy-icon dummy-icon-deviceStatus-ok"></div>
      <div class="dummy-device-descr">
        <div class="dummy-device-descr-main">FOO1</div>
        <div class="dummy-device-descr-more">BAR1</div>
      </div>
      <div class="dummy-link dummy-link-context dummy-icon dummy-icon-context"></div>
      <div class="dummy-link dummy-link-centerMap dummy-icon dummy-icon-centerMap"></div>
    </div>
  </div>

  <!-- More items here -->
</div> 
```

演示

[http://jsfiddle.net/fuAL2/](http://jsfiddle.net/fuAL2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:53:10.703

我不确定小提琴中的代码是原始源代码还是 jQueryUI 完成运行后生成的标记。但是您不需要添加*任何*类[`.sortable()`](http://jqueryui.com/sortable/)即可工作。只需调用`.sortable()`您希望排序的子元素就足够了。

因此，您应该`ui-sortable`从代码中删除该类，并在`.sortable()`调用的选择器中使用父容器，例如`$(".dummy-deviceList").sortable();` **not** `$(".dummy-deviceList .dummy-device").sortable();`。但是，似乎`float:left`on 的存在也会`.dummy-device-descr`导致占位符无法正常工作。

占位符浮动问题看起来可能是带有jQueryUI的[ticket#7501](http://bugs.jqueryui.com/ticket/7501)（在撰写本文时打开），但是我怀疑浮动可排序元素与绝对定位的占位符冲突的情况很简单，因为被排序的元素已经浮动超出正常流量。

所以你需要做的改变是：

1.  消除`.dummy-device-descr float:left`
2.  `class="dummy-device"`从元素中删除 ui-sortable 类
3.  将选择器从更改`$(".dummy-deviceList .dummy-device")`为`$(".dummy-deviceList")`

除此之外，我还要补充一点，您的代码正在遭受一点[Divitis](http://www.apaddedcell.com/div-itis-what-it-and-how-avoid-it)的困扰，并且肯定会从一些整理中受益（出于链接文章中的原因）。

# iphone - facebook 的空访问令牌

> ID：13234876
> 
> 赞同：1
> 
> 时间：2012-11-05T15:11:01.473
> 
> 标签：iphone, objective-c, ios, facebook

嗨，过去 2 天一直在为此苦苦挣扎。我以前从未遇到过这个问题，但是无论我做什么，从 facebook 返回的访问令牌始终为空。

使用的代码来自 facebook connect IOS sdk。我在其他应用程序中使用了完全相同的代码，但没有问题，但由于某种原因，这现在不起作用。

也没有打印错误代码。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T15:13:54.983

我在 sessionChangeState 中使用，这段代码：

```
FBRequest *request = [FBRequest requestForMe];
[request startWithCompletionHandler:^(FBRequestConnection *connection, NSDictionary *result, NSError *error) {
    NSLog(@"access Token %@", FBSession.activeSession.accessToken);
}]; 
```

它还给我访问令牌，试试看！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T15:14:37.653

试试这个代码。您将通过 self.facebook.accessToken 获得访问令牌。在视图加载或任何地方调用 facebookbtnclicked 方法以获取访问令牌。

```
facebook = [[Facebook alloc] initWithAppId:@"227757844008650"];
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
    if ([defaults objectForKey:@"FBAccessTokenKey"] 
        && [defaults objectForKey:@"FBExpirationDateKey"])
    {

        facebook.accessToken = [defaults objectForKey:@"FBAccessTokenKey"];
        facebook.expirationDate = [defaults objectForKey:@"FBExpirationDateKey"];

    }
-(void)facebookbtnclicked
{
    NSLog(@"facebook btn clicked");
    [self loginToFacebook:self];
}

- (BOOL) isFaceBookLoggedIn
{
    if (self.facebook.accessToken)
    {
        return YES;

    }
    else {
        return NO;
    }
}

- (void) logoutFromFacebook: (id) logoutDelegate
{
    fbServiceRequestingobj = logoutDelegate;
    [facebook logout:self];
}

- (void)loginToFacebook:(id) loginDelegate
{
    NSLog(@"login facebook method");

    fbServiceRequestingobj = loginDelegate;

    NSArray* permissions = [[NSArray alloc] initWithObjects:
                            @"publish_stream", nil];
    [facebook authorize:permissions delegate:self];

}
-(void) getuserdata
{

    NSLog(@"[appDelegate getuserdata]");

    if (fbServiceRequestingobj) 
    {
        fbServiceRequestingobj = nil;
    }

    [facebook requestWithGraphPath:@"me" andDelegate:self];

    [facebook requestWithGraphPath:@"me/friends" andDelegate:self];

}
- (void)fbDidLogout
{
    NSLog(@"Did Logout");

    if (fbServiceRequestingobj)
    {
        if ([fbServiceRequestingobj respondsToSelector:@selector(fbDidLogout)])
        {
            [fbServiceRequestingobj performSelector:@selector(fbDidLogout)];
        }
    }
    fbServiceRequestingobj = nil;
}

- (void)request:(FBRequest *)request didFailWithError:(NSError *)error
{

    if (fbServiceRequestingobj)
    {
        if ([fbServiceRequestingobj respondsToSelector:@selector(request:didFailWithError:)])
        {
            [fbServiceRequestingobj request:request didFailWithError:error];
        }
    }
    fbServiceRequestingobj = nil;
}

-(void)fbDidNotLogin:(BOOL)cancelled
{

    if (fbServiceRequestingobj)
    {
        if ([fbServiceRequestingobj respondsToSelector:@selector(fbDidNotLogin:)])
        {
            //[fbServiceRequestingobj fbDidNotLogin:cancelled];
        }
    }
    fbServiceRequestingobj = nil;
}

- (void)fbDidLogin
{

    NSLog(@"fbDidLogin");
    //[facebook requestWithGraphPath:@"me/friends" andDelegate:self];
    NSLog(@"accesstoken########%@",self.facebook.accessToken);
}

- (void)requestFinished:(ASIHTTPRequest *)request
{
    count++;
    NSError *error = [request error];

    if (!error)
    {
        NSString *response = [request responseString];

        NSDictionary *respdic=[response JSONValue];
        if(![[respdic valueForKey:@"id"] isEqualToString:@""])
        {

            UIAlertView *alert1=[[UIAlertView alloc] initWithTitle:@"" message:@"Photo posted successfully." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
            [alert1 show];
        }
    }
}

- (void)request:(FBRequest *)request didLoad:(id)result
{

    if ([result isKindOfClass:[NSArray class]])
    {
        result = [result objectAtIndex:0];
    }

    if ([result isKindOfClass:[NSDictionary class]])
    {

        }   

    }
    if ([result isKindOfClass:[NSData class]])
    {

        UIImage *profilePicture = [[UIImage alloc] initWithData: result];

    }

    if (fbServiceRequestingobj)
    {
        if ([fbServiceRequestingobj respondsToSelector:@selector(request:didLoad:)])
        {
            [fbServiceRequestingobj request:request didLoad:result];
        }
    }

    fbServiceRequestingobj = nil;

}; 
```

# php - 选择 MySQL 表中最早的记录

> ID：13234878
> 
> 赞同：0
> 
> 时间：2012-11-05T15:11:04.250
> 
> 标签：php, mysql

请考虑以下表结构（这是示例数据，因此请忽略相同的时间戳）：

```
+---------+---------+------------+-----------+
| list_id | item_id | date_added | is_active |
+---------+---------+------------+-----------+
|    1    |     1   | 1352073600 |     1     |
|    1    |     2   | 1372073600 |     1     |
|    1    |     3   | 1332073600 |     1     |
|    1    |     4   | 1302073600 |     1     |
|    2    |     1   | 1302073600 |     1     |
|    3    |     1   | 1302073600 |     1     |
+---------+---------+------------+-----------+ 
```

我们的客户希望显示在某一天创建了多少列表。该列表是在添加第一个项目时创建的，但没有明确存储日期，只有添加项目的日期。

我的问题是这样的：

使用 MySQL（和用于计算时间戳的 PHP），我如何返回在某一天创建的列表的数量。本质上，逻辑应该是（伪代码）：

*   从>= min_age 和<= max_age`tbl_list_items`中选择总记录，并且该列表的记录最旧`date_added``date_added`

很难解释我在寻找什么，因此请考虑以下操作：

```
No items added to lists yet (i.e. all lists have 0 items)
User added `item_id = 1` to `list_id = 1` yesterday.
User added `item_id = 2` to `list_id = 1` today.
User added `item_id = 1` to `list_id = 2` yesterday.
User added `item_id = 1` to `list_id = 3` yesterday.
User added `item_id = 2` to `list_id = 2` today. 
```

如果我们想查看昨天创建了多少列表（或者更确切地说，昨天添加了第一个项目的列表有多少），我想返回第一次添加的项目的总数 = 昨天。鉴于上面设置的操作，这将返回总共 3 个（即`list_id = 1`和`list_id = 2`）`list_id = 3`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:36:17.203

这将返回在特定日期创建的列表列表：

```
SELECT list_id, min(date_added) AS date_creation
FROM tbl_list_items
GROUP BY list_id
HAVING min(date_added) >= @min_age AND min(date_added) <= @max_age 
```

要计算它们，您可以计算查询结果的数量，或使用子查询，例如：

```
SELECT COUNT(*) AS total FROM
(
    SELECT list_id, min(date_added) AS date_creation
    FROM tbl_list_items
    GROUP BY list_id
    HAVING min(date_added) >= @min_age AND min(date_added) <= @max_age
) 
```

但是，请注意，这完全没有优化，因为您必须为每个查询对整个表进行 GROUP BY；在添加列表的第一项时添加标志（creation = 0 | 1）可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:14:52.167

试试这个：

```
SELECT count(*) FROM tbl_list_items WHERE date_added >= :min_age and date_added <= :max_age GROUP BY date_added 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:14:52.260

您应该有多个表来规范您的数据。一个用于列表，另一个用于列表项。

**表列表**
ListID
ListCreatedDate
...任何其他列表信息...

**表 ListItem**
ListID
ListItemID
ListItemCreatedDate
...任何其他列表项信息...

这样您就可以访问列表创建日期以及单个项目的日期。然后您可以简单地加入 List.ListID = ListItem.ListID 以获取您的所有信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T15:18:41.720

这些看起来像 unix 时间戳，在这种情况下，您可以执行类似的操作

```
SELECT ..
FROM ...
WHERE DATE(FROM_UNIXTIME(date_added)) = '2012-11-03' 
```

请注意，这将是低效的，因为您正在比较派生值 - 不会使用索引。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T15:21:13.363

如果您想选择某一天的记录，为什么要指定`min_age`and `max_age`？您只需要比较单个日期（例如，格式为 YYYY-MM-DD）：

`select count(*) from table_name where from_unixtime(date_added, %Y-%m-%d) = $date group by list_id`

或类似的东西。

# objective-c - 如何声明常量

> ID：13234884
> 
> 赞同：8
> 
> 时间：2012-11-05T15:11:17.730
> 
> 标签：objective-c, if-statement

我逐渐掌握了 Objective-C 的窍门，但我仍然是一个初学者，并且有一个初学者级别的问题，希望有人能对此有所了解：

如果我有一个非常简单的项目并且想要设置一个我将在整个过程中使用的常量——比如说，一个 NSDictionary，其键是月份名称，值是那个月的天数——这是如何完成的？（即，什么命令形式以及放在哪里？）

注意： *如果这个例子已经可以使用内置函数，也许我们可以假装它不是为了这个问题的目的；）*

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-05T15:18:32.210

答案取决于常量的类型。如果您只需要 a`int`或 a `double`，则可以使用预处理器和`#define CONST 123`语法。然而，对于 Objective C 类，您需要做更多的工作。

具体来说，您需要将常量隐藏在类方法或独立函数后面。您还需要在头文件中添加该方法或函数的原型，提供函数范围的静态变量来存储常量，并添加代码来初始化它。

这是一个使用简单的示例`NSDictionary`：

头文件：MyConstants.h

```
@interface MyConstants
+(NSDictionary*)getConstDictionary;
@end 
```

实现：MyConstants.m

```
+(NSDictionary*)getConstDictionary {
    static NSDictionary *inst = nil;
    static dispatch_once_t onceToken;
    dispatch_once(&onceToken, ^{
        inst = @{
            @"key1": @"value1",
            @"key2": @"value2",
            @"key3": @"value3"
        };
    });
    return inst;
} 
```

用法：

```
NSString *val = [[MyConstants getConstDictionary] objectForKey:@"key2"]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-25T09:51:37.693

接受的答案是正确的，**但**如果您更喜欢使用变量（不是槽法）进行操作。我可以建议这种模式：

```
@implementation MyClass

static NSSet *mySetOfObjects;

+ (void)initialize {
    mySetOfObjects = [[NSSet alloc] initWithObjects:@"one", @"two", @"three", nil];
}

// Example usage:  
+ (BOOL)isRecognizedString:(NSString *)searchItem {
    return [mySetOfObjects containsObject:searchItem];
}

@end 
```

至于我 - 它看起来更好。

* * *

有关更多详细信息，请参见[此处](http://littlehales.wordpress.com/2012/04/07/objective-c-class-level-properties-how-to-declare-them-and-how-to-initialize-them/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-05T15:20:03.347

假设您要在包含 url 的类中声明一个 NSString 常量。在您的头 .h 文件中，您将需要以下内容：

```
#import 

extern NSString * const BaseURL;

@interface ClassName : NSObject { 
```

然后，您需要在主 .m 文件中设置它的值，如下所示：

```
#import "ClassName.h"

NSString * const BaseURL = @"http://some.url.com/path/";

@implementation ClassName 
```

您现在可以在整个类或子类中访问此常量。这是一个使用示例：

```
NSString *urlString = [NSString stringWithFormat:@"%@%@", BaseURL, @"filename.html"]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T15:16:28.927

如果您的常量是字符串，那么您可以使用这种形式：

我的对象.h：

```
extern NSString *const kJanuary;
....
extern NSString *const kDecember;

@interface MyObject : NSObject
{
    ...
}

@end 
```

我的对象.m：

```
NSString *const kJanuary = @"January";
....
NSString *const kDecember = @"December";

@implementation MyObject

....

@end 
```

`kJanuary`然后，您可以在使用类时从任何地方使用常量。

# ruby-on-rails-3 - Heroku 错误 H10（应用程序崩溃） - 安装 Redmine 2.1

> ID：13234885
> 
> 赞同：4
> 
> 时间：2012-11-05T15:11:18.493
> 
> 标签：ruby-on-rails-3, heroku, redmine

虽然阅读了很多关于这个问题的文章，但我仍然无法解决这些错误，这是heroku日志的一部分，如果信息较少，我会更新red mine源代码的其他代码。

```
2012-11-05T14:02:54+00:00 app[web.1]: Plugins in vendor/plugins (/app/vendor/plugins) are no longer allowed. Please, put your Redmine plugins in the `plugins` directory at the root of your Redmine directory (/app/plugins)    
2012-11-05T14:02:54+00:00 app[web.1]: => Booting WEBrick    
2012-11-05T14:02:54+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:40115    
2012-11-05T14:02:54+00:00 app[web.1]: => Call with -d to detach    
2012-11-05T14:02:54+00:00 app[web.1]: => Ctrl-C to shutdown server    
2012-11-05T14:02:54+00:00 app[web.1]: Exiting    
2012-11-05T14:02:55+00:00 heroku[web.1]: Process exited with status 1    
2012-11-05T14:02:55+00:00 heroku[web.1]: State changed from starting to crashed    
2012-11-05T14:02:56+00:00 heroku[router]: Error H10 (App crashed) -> GET ceciits.herokuapp.com/ dyno= queue= wait= service= status=503 bytes=    
2012-11-05T14:06:04+00:00 heroku[web.1]: State changed from crashed to down    
2012-11-05T14:06:04+00:00 heroku[web.1]: Unidling    
2012-11-05T14:06:04+00:00 heroku[web.1]: State changed from down to starting    
2012-11-05T14:06:07+00:00 heroku[web.1]: Starting process with command `bundle exec rails server -p 3103`    
2012-11-05T14:06:12+00:00 app[web.1]: Plugins in vendor/plugins (/app/vendor/plugins) are no longer allowed. Please, put your Redmine plugins in the `plugins` directory at the root of your Redmine directory (/app/plugins)    
2012-11-05T14:06:12+00:00 app[web.1]: => Booting WEBrick
2012-11-05T14:06:12+00:00 app[web.1]: => Rails 3.2.8 application starting in production on http://0.0.0.0:3103
2012-11-05T14:06:12+00:00 app[web.1]: => Call with -d to detach
2012-11-05T14:06:12+00:00 app[web.1]: => Ctrl -C to shutdown server
2012-11-05T14:06:12+00:00 app[web.1]: Exiting    
2012-11-05T14:06:13+00:00 heroku[web.1]: Process exited with status 1
2012-11-05T14:06:13+00:00 heroku[web.1]: State changed from starting to crashed 
```

我无法弄清楚导致应用程序实际崩溃的原因在哪里，谢谢您的回答...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:46:14.310

只是出于好奇，您是否碰巧生成了您的密钥？

尝试运行： `heroku run rake generate_secret_token`

不确定它是否会有所帮助，但我知道我以前遇到过这个问题。

# javascript - 如何禁用 javascript 以进行响应式设计

> ID：13234894
> 
> 赞同：8
> 
> 时间：2012-11-05T15:12:05.573
> 
> 标签：javascript, jquery, css, responsive-design, modernizr

我一直在使用超大 jQuery 作为我网站的幻灯片背景。我正在使网站具有响应性并使用 css 媒体查询。

我希望能够在脚本低于 480 像素时禁用它。

这是实际滑块背景的脚本

```
$(document).ready(function(){

         jQuery(function($){

            $.supersized({

                // Functionality
                slideshow               :   1,          // Slideshow on/off
                autoplay                :   0,          // Slideshow starts playing automatically
                start_slide             :   1,          // Start slide (0 is random)
                stop_loop               :   0,          // Pauses slideshow on last slide
                random                  :   0,          // Randomize slide order (Ignores start slide)
                slide_interval          :   3000,       // Length between transitions
                transition              :   6,          // 0-None, 1-Fade, 2-Slide Top, 3-Slide Right, 4-Slide Bottom, 5-Slide Left, 6-Carousel Right, 7-Carousel Left
                transition_speed        :   1000,       // Speed of transition
                new_window              :   1,          // Image links open in new window/tab
                pause_hover             :   0,          // Pause slideshow on hover
                keyboard_nav            :   1,          // Keyboard navigation on/off
                performance             :   1,          // 0-Normal, 1-Hybrid speed/quality, 2-Optimizes image quality, 3-Optimizes transition speed // (Only works for Firefox/IE, not Webkit)
                image_protect           :   1,          // Disables image dragging and right click with Javascript

                // Size & Position                         
                min_width               :   0,          // Min width allowed (in pixels)
                min_height              :   0,          // Min height allowed (in pixels)
                vertical_center         :   1,          // Vertically center background
                horizontal_center       :   1,          // Horizontally center background
                fit_always              :   0,          // Image will never exceed browser width or height (Ignores min. dimensions)
                fit_portrait            :   1,          // Portrait images will not exceed browser height
                fit_landscape           :   0,          // Landscape images will not exceed browser width

                // Components                           
                slide_links             :   'blank',    // Individual links for each slide (Options: false, 'num', 'name', 'blank')
                thumb_links             :   1,          // Individual thumb links for each slide
                thumbnail_navigation    :   0,          // Thumbnail navigation
                slides                  :   [           // Slideshow Images
                                                    {image : '/img/backgrounds/street-dance-background.jpg', title : 'Image Credit: Maria Kazvan', thumb : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/thumbs/kazvan-1.jpg', url : 'http://www.nonsensesociety.com/2011/04/maria-kazvan/'},
                                                    {image : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/kazvan-2.jpg', title : 'Image Credit: Maria Kazvan', thumb : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/thumbs/kazvan-2.jpg', url : 'http://www.nonsensesociety.com/2011/04/maria-kazvan/'},  
                                                    {image : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/kazvan-3.jpg', title : 'Image Credit: Maria Kazvan', thumb : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/thumbs/kazvan-3.jpg', url : 'http://www.nonsensesociety.com/2011/04/maria-kazvan/'},
                                                    {image : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/wojno-1.jpg', title : 'Image Credit: Colin Wojno', thumb : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/thumbs/wojno-1.jpg', url : 'http://www.nonsensesociety.com/2011/03/colin/'},
                                                    {image : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/wojno-2.jpg', title : 'Image Credit: Colin Wojno', thumb : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/thumbs/wojno-2.jpg', url : 'http://www.nonsensesociety.com/2011/03/colin/'},
                                                    {image : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/wojno-3.jpg', title : 'Image Credit: Colin Wojno', thumb : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/thumbs/wojno-3.jpg', url : 'http://www.nonsensesociety.com/2011/03/colin/'},
                                                    {image : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/shaden-1.jpg', title : 'Image Credit: Brooke Shaden', thumb : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/thumbs/shaden-1.jpg', url : 'http://www.nonsensesociety.com/2011/06/brooke-shaden/'},
                                                    {image : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/shaden-2.jpg', title : 'Image Credit: Brooke Shaden', thumb : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/thumbs/shaden-2.jpg', url : 'http://www.nonsensesociety.com/2011/06/brooke-shaden/'},
                                                    {image : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/slides/shaden-3.jpg', title : 'Image Credit: Brooke Shaden', thumb : 'http://buildinternet.s3.amazonaws.com/projects/supersized/3.2/thumbs/shaden-3.jpg', url : 'http://www.nonsensesociety.com/2011/06/brooke-shaden/'}
                                            ],

                // Theme Options               
                progress_bar            :   1,          // Timer for each slide                         
                mouse_scrub             :   0

            });
        }); 
```

我在想我可以简单地通过使用 css 来做到这一点，例如在我的媒体查询中，只需将 #supersized 设置为 display:none

这是不好的做法，因为它仍然可以运行脚本，最好以某种方式禁用它？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T15:20:25.703

正如其他人所提到的，您可以使用很多 jQuery 插件。但是，如果你只想使用普通的 jQuery，你也可以做你想做的事。

您可以使用 jquery 中的 resize 方法来检测窗口的大小。

```
$(window).resize(function() {
   if ($(this).width() > 480) {
      // call supersize method
   }
}); 
```

然后在准备好文档时，请务必调用调整大小窗口，以便它最初会根据您窗口的当前大小调用或不调用该方法：

```
$(document).ready(function() {
   $(window).resize();
}); 
```

PS > 如果您不需要每次调整窗口大小时都运行此脚本，而是仅在达到 480 像素以下时运行，则可以在需要禁用或启用脚本后进行轻微修改以取消绑定调整大小方法。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-05T15:16:40.387

您可以使用 JavaScript 检测屏幕宽度，使用 screen.width，然后从那里确定您想要做什么。

```
if(screen.width < 480) { 
    // do any 480 width stuff here, or simply do nothing
    return;
} else {
    // do all your cool stuff here for larger screens
} 
```

对于屏幕尺寸小于 480 的情况，将所有动画和所有不想在 else 块中运行的代码包装*起来。*

提醒一下，IE 倾向于做不同的事情，我没有 IE 来测试，所以你可能想在那里运行 screen.width 并在必要时调整任何差异。但在 Chrome 中，screen.width 返回 1280，这是我的屏幕的正确宽度。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-05T15:16:25.557

您可以在媒体查询中使用一些 css 规则设置一个隐藏的 div，然后使用 jQuery 检查这些 css 属性，`css()`并在此基础上打开或关闭幻灯片。具体来说：

```
@media all and (max-width: 480px) {
    #testdiv{
        display:none;
    }
} 
```

和js：

```
if($("#testdiv").css("display") == "none"){
    $.supersized({...});
} 
```

请注意，这实际上是在使用 Modernizr 方法而没有实际获取库。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T15:15:28.897

jRespond，一个由 Viget 发布的脚本，允许您根据视口大小控制 JavaScript：

文章：http: [//viget.com/inspire/managing-javascript-on-responsive-websites](http://viget.com/inspire/managing-javascript-on-responsive-websites)

代码：[https ://github.com/ten1seven/jRespond](https://github.com/ten1seven/jRespond)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T15:16:32.610

正如@Pointy 在评论中指出的那样，modernizr 允许您从 javascript 调用媒体查询。阅读[modernizr 文档](http://modernizr.com/docs/#mq)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-03T14:56:55.530

我认为 Asad 的解决方案是最好的，或者你使用modernizr。因为断点定义 (480px) 在单个文件中，而不是在 JS 和 CSS 中。如果您使用 SCSS，则变量中的断点只有一个定义。

# c# - 无论参数数量如何，重用逻辑的模式

> ID：13234895
> 
> 赞同：0
> 
> 时间：2012-11-05T15:12:08.510
> 
> 标签：c#, logging

我有一些日志记录逻辑，我想在几种方法之前和之后调用。每种方法都接受不同数量/类型的参数。我正在尝试对其进行设置，以便在调用每个方法时不必复制日志记录逻辑。通过创建一些代表，我已经能够减少重复的数量。我为使用的每个数量/类型的参数创建了一个委托，并且我有一个接受每个委托并进行日志记录的方法。但是，我仍然有大约 6 个不同的代表，因此这六个的逻辑是重复的。

我认为可以修改它，因此无论参数的数量如何，我都有一种方法可以进行日志记录并调用该方法。但我一直无法弄清楚。

下面是其中一位代表的示例以及我试图不重复的逻辑。

```
 public delegate void LineOfBusinessHandler(DateTime runDate, LineOfBusinessCode lineOfBusinessCode);

    public void Run(DateTime runDate, ProcessCode process, LineOfBusinessCode lineOfBusinessCode, LineOfBusinessHandler del)
    {
        this.ProcessManager.AddToBatchLog(process.ToString(), ProcessStatus.Started.ToString(), null, runDate);

        try
        {
            del(runDate, lineOfBusinessCode);
            this.ProcessManager.AddToBatchLog(process.ToString(), ProcessStatus.Finished.ToString(), null, runDate);
        }
        catch (Exception e)
        {
            int errorId = SystemManager.LogError(e, process.ToString());
            this.ProcessManager.AddToBatchLog(process.ToString(), ProcessStatus.Errored.ToString(), errorId, runDate);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:27:15.137

我意识到这可能超出了您正在寻找的范围和/或能力。但是，如果你有一个通用的日志记录逻辑，你想在不同的方法调用上重用，而不会丢失类型安全（即不传递你的参数`object[]`），那么要走的路就是**拦截**。您需要一个可以提供 AOP、依赖注入或类似功能的框架（我不建议您一开始自己编写！）。这些东西通常可以处理拦截。

例如，我有一个与 Ninject 一起使用的日志拦截器：

```
public void Intercept(IInvocation invocation)
{
    var logger = LoggerFactory.GetLogger(invocation.Request.Method.DeclaringType);
    var debug = !invocation.Request.Method.IsSpecialName && logger.IsDebugEnabled;
    if (debug)
        logger.Debug(invocation.Request.Method.Name);
    try
    {
        invocation.Proceed();
        if (debug)
            logger.Debug(invocation.Request.Method.Name + " FINISH");
    }
    catch (Exception)
    {
        logger.Error(invocation.Request.Method.Name + " ERROR");
        throw;
    }

} 
```

然后我通过使用 Ninject 获取它们来创建我的对象（如果您不了解它，请查看一些[教程](http://www.ninject.org/learn.html)），同时向它们添加一些拦截，例如：使用上面显示的方法实现的`Kernel.Bind<MyTypeToLog>().ToSelf().Intercept().With<LoggingInterceptor>();`地方......`LoggingInterceptor``IInterceptor`

只是说如果你需要更多的细节帮助！

编辑：刚刚意识到我的示例没有显示这一点，但是您也可以访问调用的参数（尽管作为对象集合）！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:14:43.820

如果我正确理解您的问题，听起来您可以使用 C# **params**关键字。有关如何使用它的参考，请参阅此：http: [//msdn.microsoft.com/en-us/library/w5zay9db.aspx](http://msdn.microsoft.com/en-us/library/w5zay9db.aspx)

使用**参数**时的要求之一是它必须放在函数签名的最后。然后，在函数内部，您可以枚举和迭代变量参数列表，就好像它是一个数组一样。

**编辑**

为了扩展@Ben Voigt 发表的评论，使用**params**关键字的另一个限制是它要求可变参数列表具有相同的类型。但是，这可以在您的情况下得到缓解，因为您关心的只是日志记录。在这种情况下，您可能会在需要记录的对象上调用 ToString() 方法，这样您就可以将变量参数列表设为对象类型。

如果调用 ToString() 还不够，并且您有不同类型的对象，您可以使所有这些对象实现一个通用接口。我们称它为`ILoggableObject`公开提供日志输出的方法。那就是如果您有能力更改这些对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T15:21:34.530

C# 语言没有任何元编程语法。你必须使用反射。您当然可以针对任意方法/委托进行反射以确定参数类型，然后构建一个记录参数并调用原始方法的方法，编译这个新的包装器方法，并返回一个与原始方法具有相同调用签名的委托。

您可以在运行时执行此操作（返回委托）或使用所有包装函数构建新程序集，然后您的代码可以引用并正常使用该程序集。

您应该查看用于面向方面编程的代码编织工具。他们中的一些人已经这样做了。

与使用 params 数组不同，这为您提供了一个与原始方法具有相同签名（或委托类型）的包装器，因此它是类型安全的并且 Intellisense 可以工作（与任何其他委托一样）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-05T15:24:46.397

这取决于不同版本之间的共同点，但假设 runDate 和 process 是共同的，您可以执行以下操作：

```
public void Run(DateTime runDate, ProcessCode process, LineOfBusinessCode lineOfBusinessCode, LineOfBusinessHandler del)
{
    this.DoRun(runDate, process, (d, p) => del(d, p, lineOfBusinessCode));
}

public void DoRun(DateTime runDate, ProcessCode process, Action<DateTime, ProcessCode> action)
{
    this.ProcessManager.AddToBatchLog(process.ToString(), ProcessStatus.Started.ToString(), null, runDate);

    try
    {
        action(runDate, process);
        this.ProcessManager.AddToBatchLog(process.ToString(), ProcessStatus.Finished.ToString(), null, runDate);
    }
    catch (Exception e)
    {
        int errorId = SystemManager.LogError(e, process.ToString());
        this.ProcessManager.AddToBatchLog(process.ToString(), ProcessStatus.Errored.ToString(), errorId, runDate);
    }
} 
```

您甚至可以进行概括，因此您不必像这样定义自定义委托：

```
public void Run<T1>(DateTime runDate, ProcessCode process, T1 param1, Action<DateTime, ProcessCode, T1> del)
{
    this.DoRun(runDate, process, (d, p) => del(d, p, param1));
}

public void Run<T1, T2>(DateTime runDate, ProcessCode process, T1 param1, T2 param2, Action<DateTime, ProcessCode, T1, T2> del)
{
    this.DoRun(runDate, process, (d, p) => del(d, p, param1, param2));
} 
```

# php - else if 行中的错误？有没有更简洁的写法？

> ID：13234903
> 
> 赞同：0
> 
> 时间：2012-11-05T15:12:35.377
> 
> 标签：php, if-statement

我的代码从数据库中选择，写出信息然后运行一个 else if 循环来决定输出什么代码：

```
<?php

echo '<p>the loop<p><br>
 <p>Accreditations</p>';

      if ($fields['accreditations1']==1){echo 'HTML CODE 1';} else { 
      if ($fields['accreditations1']==2){echo 'HTML CODE 2';} else { 
      if ($fields['accreditations1']==3){echo 'HTML CODE 3';} else { 
      if ($fields['accreditations1']==4){echo 'HTML CODE 4';} else { 
      if ($fields['accreditations1']==5){echo 'HTML CODE 5';} else { 
      if ($fields['accreditations1']==6){echo 'HTML CODE 6';} else { 
      if ($fields['accreditations1']==7){echo 'HTML CODE 7';} else { 
      if ($fields['accreditations1']==0){echo '';}

      if ($fields['accreditations2']==1){echo 'HTML CODE 1';} else { 
      if ($fields['accreditations2']==2){echo 'HTML CODE 2';} else { 
      if ($fields['accreditations2']==3){echo 'HTML CODE 3';} else { 
      if ($fields['accreditations2']==4){echo 'HTML CODE 4';} else { 
      if ($fields['accreditations2']==5){echo 'HTML CODE 5';} else { 
      if ($fields['accreditations2']==6){echo 'HTML CODE 6';} else { 
      if ($fields['accreditations2']==7){echo 'HTML CODE 7';} else { 
      if ($fields['accreditations2']==0){echo '';}

      if ($fields['accreditations3']==1){echo 'HTML CODE 1';} else { 
      if ($fields['accreditations3']==2){echo 'HTML CODE 2';} else { 
      if ($fields['accreditations3']==3){echo 'HTML CODE 3';} else { 
      if ($fields['accreditations3']==4){echo 'HTML CODE 4';} else { 
      if ($fields['accreditations3']==5){echo 'HTML CODE 5';} else { 
      if ($fields['accreditations3']==6){echo 'HTML CODE 6';} else { 
      if ($fields['accreditations3']==7){echo 'HTML CODE 7';} else { 
      if ($fields['accreditations3']==0){echo '';}

      echo '<br />';

      if ($fields['accreditations4']==1){echo 'HTML CODE 1';} else { 
      if ($fields['accreditations4']==2){echo 'HTML CODE 2';} else { 
      if ($fields['accreditations4']==3){echo 'HTML CODE 3';} else { 
      if ($fields['accreditations4']==4){echo 'HTML CODE 4';} else { 
      if ($fields['accreditations4']==5){echo 'HTML CODE 5';} else { 
      if ($fields['accreditations4']==6){echo 'HTML CODE 6';} else { 
      if ($fields['accreditations4']==7){echo 'HTML CODE 7';} else { 
      if ($fields['accreditations4']==0){echo '';}

      if ($fields['accreditations5']==1){echo 'HTML CODE 1';} else { 
      if ($fields['accreditations5']==2){echo 'HTML CODE 2';} else { 
      if ($fields['accreditations5']==3){echo 'HTML CODE 3';} else { 
      if ($fields['accreditations5']==4){echo 'HTML CODE 4';} else { 
      if ($fields['accreditations5']==5){echo 'HTML CODE 5';} else { 
      if ($fields['accreditations5']==6){echo 'HTML CODE 6';} else { 
      if ($fields['accreditations5']==7){echo 'HTML CODE 7';} else { 
      if ($fields['accreditations5']==0){echo '';}

      if ($fields['accreditations6']==1){echo 'HTML CODE 1';} else { 
      if ($fields['accreditations6']==2){echo 'HTML CODE 2';} else { 
      if ($fields['accreditations6']==3){echo 'HTML CODE 3';} else { 
      if ($fields['accreditations6']==4){echo 'HTML CODE 4';} else { 
      if ($fields['accreditations6']==5){echo 'HTML CODE 5';} else { 
      if ($fields['accreditations6']==6){echo 'HTML CODE 6';} else { 
      if ($fields['accreditations6']==7){echo 'HTML CODE 7';} else { 
      if ($fields['accreditations6']==0){echo '';}

      ?> 
```

首先我需要做些什么来关闭ifs吗？还有更短的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:15:17.720

使用[`switch`语句](http://php.net/manual/en/control-structures.switch.php)，像这样

```
switch( $fields['accreditations1'] ) {
  case 1: echo 'HTML CODE 1'; break;
  case 2: echo 'HTML CODE 2'; break;
  case 3: echo 'HTML CODE 3'; break;
  case 4: echo 'HTML CODE 4'; break;
  case 5: echo 'HTML CODE 5'; break;
  case 6: echo 'HTML CODE 6'; break;
  case 7: echo 'HTML CODE 7'; break;
  case 0: echo '';
} 
```

^(我认为，这不是实际的输出。如果我弄错了，您应该考虑为此编写一个单独的函数！)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:17:18.650

试试这个，使用`for`循环，

```
 for( $i=1; $i<=count($fields); $i++) {
   if( $fields['accreditations'.$i] > 0 && $fields['accreditations'.$i] <= 7)
     echo 'HTML CODE ' $fields['accreditations'.$i];  
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-05T15:18:36.593

我认为你得到了`'`太多之后`<p>Accreditations</p>`。

除此之外，您还可以使用 switch 语句来稍微缩短这段代码。

您还可以使用：

```
if (condition) {}
else if (othercondition) {}
elseif (thirdcondition {}
else {} 
```

请注意，else 的 if*不在*else的括号内。你可以写`else if`or `elseif`，两者意思相同。

这在开关不起作用的情况下特别有用。在您的情况下，只需使用开关。

# iphone - 从应用程序本身访问相机

> ID：13234904
> 
> 赞同：1
> 
> 时间：2012-11-05T15:12:43.330
> 
> 标签：iphone, ios, ios6, uiimagepickercontroller

我正在尝试一个简单的相机应用程序进行练习。遵循这些示例：[iOS 6 App](http://www.techotopia.com/index.php/Accessing_the_iPhone_Camera_and_Photo_Library_%28iOS_6%29) 和[iOS 4 App](http://www.techotopia.com/index.php/An_Example_iOS_4_iPhone_Camera_Application)

我的代码如下所示：

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController<UINavigationControllerDelegate, UIImagePickerControllerDelegate>
{
    UIButton *button;
    UIImageView *imageView;
}
@property (nonatomic, retain) IBOutlet UIImageView *imageView;
- (IBAction)useCamera;
- (IBAction)useCameraRoll;
@end 
```

视图控制器.m

```
#import "ViewController.h"
#import <MobileCoreServices/MobileCoreServices.h>

@interface ViewController ()

@end

@implementation ViewController

@synthesize imageView;

- (void) alertView:(UIAlertView *)alert clickedButtonAtIndex:(NSInteger)buttonIndex
{
    // After saving iamge, dismiss camera
    [self dismissViewControllerAnimated:YES completion:NULL];
}

- (void)image:(UIImage *)image didFinishSavingWithError:(NSError *)error contextInfo:(void *)contextInfo
{
    UIAlertView *alert;

    // Unable to save the image
    if (error)
        alert = [[UIAlertView alloc] initWithTitle:@"Error"
                                           message:@"Unable to save image to Photo Album."
                                          delegate:self cancelButtonTitle:@"Ok"
                                 otherButtonTitles:nil];
    else // All is well
        alert = [[UIAlertView alloc] initWithTitle:@"Success"
                                           message:@"Image saved to Photo Album."
                                          delegate:self cancelButtonTitle:@"Ok"
                                 otherButtonTitles:nil];

    [alert show];
}

- (void) imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info
{
    // Access the uncropped image from info dictionary
    UIImage *image = [info objectForKey:@"UIImagePickerControllerOriginalImage"];

    // Save image
    UIImageWriteToSavedPhotosAlbum(image, self, @selector(image:didFinishSavingWithError:contextInfo:), nil);

}

- (id)init
{
    if (self = [super init])
    {
        self.view = [[UIView alloc] initWithFrame:[[UIScreen mainScreen] applicationFrame]];
        self.view.backgroundColor = [UIColor grayColor];

        // Button to activate camera
        button = [[UIButton alloc] initWithFrame:CGRectMake(80, 55, 162, 53)];
        [button setBackgroundImage:[UIImage imageNamed:@"Camera.png"] forState:UIControlStateNormal];
        [button addTarget:self action:@selector(buttonPressed:) forControlEvents: UIControlEventTouchUpInside];
        [self.view addSubview:button];
    }

    return self;  
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}
- (IBAction)useCamera
{
    if ([UIImagePickerController isSourceTypeAvailable:
         UIImagePickerControllerSourceTypeCamera])
    {
        UIImagePickerController *imagePicker =
        [[UIImagePickerController alloc] init];
        imagePicker.delegate = self;
        imagePicker.sourceType =
        UIImagePickerControllerSourceTypeCamera;
        imagePicker.mediaTypes = [NSArray arrayWithObjects:
                                  (NSString *) kUTTypeImage,
                                  nil];
        imagePicker.allowsEditing = NO;
        [self presentViewController:imagePicker animated:YES completion:nil];

    }
}

- (IBAction)useCameraRoll
{
    if ([UIImagePickerController isSourceTypeAvailable:
         UIImagePickerControllerSourceTypeSavedPhotosAlbum])
    {
        UIImagePickerController *imagePicker =
        [[UIImagePickerController alloc] init];
        imagePicker.delegate = self;
        imagePicker.sourceType =
        UIImagePickerControllerSourceTypePhotoLibrary;
        imagePicker.mediaTypes = [NSArray arrayWithObjects:
                                  (NSString *) kUTTypeImage,
                                  nil];
        imagePicker.allowsEditing = NO;
        [self presentViewController:imagePicker animated:YES completion:nil];
    }
}

@end 
```

我的问题我喜欢从应用程序本身访问相机。发生的情况是，当我单击 useCamera 按钮时，它会打开相机并拍摄图像。是否有可能从应用程序本身做到这一点？对不起，如果这是一个愚蠢的问题。如果我做错了什么，请指出我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:27:46.917

是的，使用[`UIImagePickerController`类](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerController_Class/UIImagePickerController/UIImagePickerController.html)。

When the camera button is clicked, present an instance of `UIImagePickerController`. Also, since some iOS devices like the original iPad or some older iPod touches don't have cameras, I wouldn't recommend using separate buttons/methods for taking a new picture vs using one from the saved photos. Use one button and set its source type based on the device's capabilities using the available methods in the class. It may require rethinking your app's design, but it's also more likely to pass Apple's UI inspection, as they may not approve an app that has a button exclusively for taking a picture but can run on a device without a camera.

Once the user has either taken a new photo or chosen a photo from either the camera roll, use the `imagePickerController:didFinishPickingMediaWithInfo:` method from the [`UIImagePickerControllerDelegate` class](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIImagePickerControllerDelegate_Protocol/UIImagePickerControllerDelegate/UIImagePickerControllerDelegate.html#//apple_ref/occ/intf/UIImagePickerControllerDelegate) to pass the user's choice to your code.

Instances of `UIImagePickerController` are designed to be presented modally on all iOS devices when using the camera. Remember, as the name suggests, they are controllers and NOT views, so they shouldn't be used as subviews of `UIView`. While it may be possible to get creative with how you present it, you'll almost certainly have some side-effects and you'll further increase the chance that Apple will reject it. It only SEEMS like it's getting out the app to take the photo, but because you're presenting the controller from your app, it's still very much a part of it. Apple doesn't allow direct access to the camera hardware, which is exactly why they've created this class.

# asp.net-web-api - 如何从 ASP.NET Web API OnActionExecuting Filter 方法中提取表单数据

> ID：13234906
> 
> 赞同：0
> 
> 时间：2012-11-05T15:12:44.407
> 
> 标签：asp.net-web-api

我正在尝试从 ASP.NET Web API 操作过滤器的方法中提取**表单**数据，`OnActionExecuting`以便将其写入日志文件。

我的代码如下所示：

```
 public override void OnActionExecuting(System.Web.Http.Controllers.HttpActionContext ctx)
    {
        if (ctx.Request.RequestUri.Query.StartsWith("admin/")) return;

        try
        {
            _loggingService.LogRequest(new RequestLogModel
            {
                Handler = ctx.ControllerContext.ControllerDescriptor.ControllerName,
                Uri = ctx.Request.RequestUri.AbsoluteUri,
                RequestType = ctx.Request.Method.Method,
                RequestFrom = ctx.Request.RequestUri.Host,
                QueryString = ctx.Request.RequestUri.Query,
                FormData = // Need to get form-data here
            });
        }
        catch { } 
```

我似乎无法弄清楚如何从请求中获取表单数据。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T18:27:01.610

您应该能够在请求的内容中获取表单数据。

有关使用 ReadAsMultipartAsync(...) 读取多部分/表单数据内容的更多信息，请查看本教程[发送 HTML 表单数据](http://www.asp.net/web-api/overview/working-with-http/sending-html-form-data,-part-2)。

# c# - 命名空间如何在运行时加载类

> ID：13234908
> 
> 赞同：4
> 
> 时间：2012-11-05T15:12:50.370
> 
> 标签：c#

当程序中使用多个命名空间时，运行时会发生什么？是完全加载了命名空间中的类还是加载了程序中使用的类？如果程序中存在未使用的命名空间怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-05T15:16:04.957

命名空间实际上更像是编译时构造，而不是运行时构造。将类放入命名空间主要只影响类的名称。任何类的“完全限定名”实际上是它的命名空间层次结构（由句点分隔`.`），后跟实际的类名。您不会在运行时“加载”名称空间，整个概念都不存在。

编译程序时，如果将其编译为库 (.dll)，则可以添加对该 .dll 的引用，在这种情况下，该 dll 中的所有类在您的程序中都是“accessibe”。至于它们是否会被加载，它们当然*有可能*被加载，但是由于延迟初始化，未使用的类可能不会对性能产生重大影响。

当您将`using`语句添加到命名空间的文件顶部时，它不会“加载”该命名空间。编译器将使用它将所有“非限定”类名解析为“完全限定”类名（在编译时）。如果您一开始只使用完全限定的类名，则不需要任何`using`s （但这*确实*会使您的代码混乱，因此无论如何您都应该添加它们）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T15:17:09.410

您可以`use`使用任意数量的命名空间。命名空间不加载类。将命名空间视为一种便利功能，有点像`path`变量。如果你不使用命名空间，你最终会写出这样的代码：

```
System.Collections.Generic.List<string> myList = 
    new System.Collections.Generic.List<string>(); 
```

这会使代码编写在短时间内变得非常冗长和乏味。通过`using`命名空间，您可以将代码缩短为：

```
using System.Collections.Generic;

// ..... further down in code:
List<string> myList = new List<string>(); 
```

以下 2 个链接可能有助于扩展您对命名空间的理解：

[http://msdn.microsoft.com/en-us/library/sf0df423%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/sf0df423%28v=vs.80%29.aspx)

[http://msdn.microsoft.com/en-us/library/0d941h9d%28v=vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/0d941h9d%28v=vs.80%29.aspx)

底线：`namespaces`帮助组织和控制项目中类的可见性范围。

HTH...

# objective-c - 保留/复制块弧 [iOS]

> ID：13234912
> 
> 赞同：1
> 
> 时间：2012-11-05T15:13:03.183
> 
> 标签：objective-c, ios, automatic-ref-counting, block

我已经看到了很多答案，但我找不到任何解决我的问题的方法。

我基本上有一个只使用类方法的类。我从不分配这个类。因此，我将一个块传递给它并将其存储在类的 .h 上的静态中，如下所示：

```
static ErrorBlock _errorBlock; 
```

我是这样存储的：

```
_errorBlock = [errorBlock copy]; 
```

我收到`errorBlock`作为方法的参数。经过一些计算，我像这样调用块：

```
 _errorBlock(error); 
```

值得一提的是，我是从一个类的类别中调用它的。该应用程序基本上返回：

```
EXC_BAD_ACCESSS(code=2, adress = 0xc) 
```

当我检查`_errorBlock`值时，它是`nil`. 所以我的问题是，我怎样才能保持对块的实时引用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:45:22.893

我能够解决它，我完全删除了全局块的使用。目前，我使用将它们作为参数传递的块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:36:28.517

如果 _errorBlock 为“nil”，可以肯定地说它被分配了 nil 并且没有任何引用来保持它的活动状态。如果您像 in 一样创建引用`NSObject *reference = someObject`并且 someObject 被释放，您的引用指针仍将指向 someObject 曾经存在且不应为 nil 的位置。检查分配块是否有问题，或者它是否被调用。此外，您可能想在调用之前检查 _errorBlock 是否存在。

# android - 为最终将运行 android 的嵌入式板创建可启动 sdcard

> ID：13234919
> 
> 赞同：2
> 
> 时间：2012-11-05T15:13:38.350
> 
> 标签：android, linux-kernel, sd-card, u-boot

语境：

我设计了一个嵌入式系统，并移植了 Android Gingerbread 以在其上运行。我使用基于 ARM Cortex-A8 的 CPU 模块，上面有 CPU、SDRAM、NANDFLASH，其余的都在模块引脚上可用，因此我可以添加自己的硬件接口。第一个预装了 u-boot。安装 Gingerbread 所需要做的就是将 4 个映像（kernel.img、system.img、ramdisk-yaffs.img 和 userdata.img）放在 SD-CARD 上的目录 (/sdfuse) 中，然后将其烧录使用命令“sdfuse flash kernel kernel.img”和其他 3 个文件的等效命令到板载 NANDFLASH。很简单。之后，我将 Android 中的 SDCARD 用作外部存储。（生活是美好的！）

问题：

现在我购买了更多模块，但它们没有预装 u-boot。所以，我需要制作一个带有 u-boot 的可引导 SD 卡。它必须是 FAT 才能在启动时被我的处理器识别。我实际上有一个 FAT32 的 SDHC 4GB 卡，成功安装了 U-boot，它引导我的系统到 u-boot 提示，告诉我它找不到 4 个映像文件。这是预期的，因为图像还没有。现在的问题是我无法创建 /sdfuse 文件夹并将 4 个图像文件放在上面。我的 MACBook 和我的 Ubuntu 机器都不允许我挂载该 SD 卡以在其上创建“/sdfuse”文件夹。两个磁盘管理器都看到了 SD 卡，但都不允许挂载它。显然，我在某个地方漏掉了一些东西。我现在拥有的是一个带有 U-boot 的可引导 4GB FAT32 SD 卡，但该卡的其余部分不再可用。任何人都知道问题可能是什么？为什么我不能使用这个 4GB 可引导 FAT32 分区来安装我的“/sdfuse”文件夹和图像？我使用 Ubuntu 机器创建了可启动的 SD 卡，所以 USB/SD 卡读卡器运行良好，换句话说，问题不在于帽子软件，而在于某种软件配置。

在 Chris Stratton 关于文件系统的评论之后进行编辑：我有一张包含“/sdfuse”的 SD 卡，其中包含 4 个图像文件（kernel.img 等）和一堆其他文件和文件夹。使用 Ubuntu Diskutility，我可以将其视为一个分区 W95 FAT32 (LBA) (0x0c) 主引导记录。我可以从 Ubuntu 和 MacOSX 上读/写任何东西。我制作的第二张 SD 卡也有一个 FAT32 分区主引导记录，类型为 W95 FAT32 (LBA) (0X0c)，但我既不能从 Ubuntu（但在 /dev/sdb 下看到）也不能从 MacOSX 安装它。最后一个，是带有u-boot的那个。只是奇怪！只是为了解决这个问题，我只是有了一个想法，这样我就可以继续工作了，我只是尝试使用“u-boot SD-Card”启动然后，我将 SD-Card “live”更改为带有 4 的 SD-Card文件。我使用了命令“sdfuse” 将 u-boot、内核、android 等闪存到我的 NANDFLASH 设备。然后，当我从 NAND 强制重启时，它会启动到 Android。这对于开发来说是可以的，但这对于生产过程来说太复杂了。当 Chris Stratton 指出文件系统分区或结构时，他可能是对的。我只是还没弄清楚。有人有一些线索吗？

从 Ubuntu 终端“dmesg | tail”运行后，我得到以下结果：

```
 dmesg | tail
[5871490.553791] sd 16:0:0:0: [sdb] 7829504 512-byte logical blocks: (4.00 GB/3.73 GiB)
[5871490.556190] sd 16:0:0:0: [sdb] Write Protect is off
[5871490.556197] sd 16:0:0:0: [sdb] Mode Sense: 03 00 00 00
[5871490.556201] sd 16:0:0:0: [sdb] Assuming drive cache: write through
[5871490.559054] sd 16:0:0:0: [sdb] Assuming drive cache: write through
[5871490.559064]  sdb: sdb1
[5871490.563912] sd 16:0:0:0: [sdb] Assuming drive cache: write through
[5871490.563920] sd 16:0:0:0: [sdb] Attached SCSI removable disk
[5872079.044194] FAT: bogus number of reserved sectors
[5872079.044201] VFS: Can't find a valid FAT filesystem on dev sdb1. 
```

因此，即使卡启动并且看到有 W95 FAT32 (LBA)(0x0c)，格式似乎也有问题

[根据TheCodeArtist](https://stackoverflow.com/users/319204/thecodeartist)的评论进行 编辑

这是我创建“u-boot”可引导映像磁盘的方法。我运行了一个由三星创建的脚本（在我的 Ubuntu 机器上）。这是脚本中的内容：

```
#
# Copyright (C) 2010 Samsung Electronics Co., Ltd.
#              http://www.samsung.com/
# 
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License version 2 as
# published by the Free Software Foundation.
#
####################################
reader_type1="/dev/sdb"
reader_type2="/dev/mmcblk0"

if [ -z $1 ]
then
    echo "usage: ./sd_fusing.sh <SD Reader's device file>"
    exit 0
fi

if [ $1 = $reader_type1 ]
then 
    partition1="$11"
    partition2="$12"
    partition3="$13"
    partition4="$14"

elif [ $1 = $reader_type2 ]
then 
    partition1="$1p1"
    partition2="$1p2"
    partition3="$1p3"
    partition4="$1p4"

else
    echo "Unsupported SD reader"
    exit 0
fi

if [ -b $1 ]
then
    echo "$1 reader is identified."
else
    echo "$1 is NOT identified."
    exit 0
fi

####################################
# make partition
echo "make sd card partition"
echo "./sd_fdisk $1" 
./sd_fdisk $1 
dd iflag=dsync oflag=dsync if=sd_mbr.dat of=$1 
rm sd_mbr.dat

####################################
# format
umount $partition1 2> /dev/null
umount $partition2 2> /dev/null
umount $partition3 2> /dev/null
umount $partition4 2> /dev/null

echo "mkfs.vfat -F 32 $partition1"
mkfs.vfat -F 32 $partition1

#echo "mkfs.ext2 $partition2"
#mkfs.ext2 $partition2  

#echo "mkfs.ext2 $partition3"
#mkfs.ext2 $partition3  

#echo "mkfs.ext2 $partition4"
#mkfs.ext2 $partition4  

####################################
# mount 
#umount /media/sd 2> /dev/null
#mkdir -p /media/sd
#echo "mount -t vfat $partition1 /media/sd"
#mount -t vfat $partition1 /media/sd

####################################
#<BL1 fusing>
bl1_position=1
uboot_position=49

echo "BL1 fusing"
./mkbl1 ../u-boot.bin SD-bl1-8k.bin 8192
dd iflag=dsync oflag=dsync if=SD-bl1-8k.bin of=$1 seek=$bl1_position
rm SD-bl1-8k.bin

####################################
#<u-boot fusing>
echo "u-boot fusing"
dd iflag=dsync oflag=dsync if=../u-boot.bin of=$1 seek=$uboot_position

####################################
#<Message Display>
echo "U-boot image is fused successfully."
echo "Eject SD card and insert it again." 
```

此外，您可以看到对函数“sd_fdisk”的调用。我有源代码，但它也在谷歌代码上：[sd_fdisk.c](https://code.google.com/p/x210ii/source/browse/uboot/sd_fusing/sd_fdisk.c?r=e21cf135fa176ca05e92135b339d060a1af84eb6)

# linux - 尝试构建 LLVM 和 clang 的问题

> ID：13234922
> 
> 赞同：0
> 
> 时间：2012-11-05T15:13:49.763
> 
> 标签：linux, makefile, llvm, llvm-clang

我正在尝试在我的机器（Ubuntu 12.04）上构建 LLVM 和 clang。我按照[http://clang.llvm.org/get_started.html](http://clang.llvm.org/get_started.html)上的说明进行到第 6 步（构建 LLVM 和 clang）。当我制作时，我收到大量关于可能不兼容的插件版本的警告（与dragonegg有关？）。但是整个事情都因这些消息而失败：

```
llvm[2]: Linking Debug+Asserts executable llvm-tblgen
/usr/bin/ld: /home/peter/llvm/build/Debug+Asserts/bin/llvm-tblgen: hidden symbol `llvm::Type::~Type()' isn't defined
/usr/bin/ld: final link failed: Bad value
collect2: ld returned 1 exit status
make[2]: *** [/home/peter/llvm/build/Debug+Asserts/bin/llvm-tblgen] Error 1
make[2]: Leaving directory `/home/peter/llvm/build/utils/TableGen'
make[1]: *** [TableGen/.makeall] Error 2
make[1]: Leaving directory `/home/peter/llvm/build/utils'
make: *** [all] Error 1 
```

所以你能给我的任何帮助都会非常有帮助。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-09T09:22:56.593

我最终删除了 llvm 文件夹并再次检查了所有内容，并且它起作用了，所以我只是把它归结为错误的时机。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-05T16:25:30.787

您可能希望使用您的发行版提供的现有 LLVM 包。

这个[关于 LLVM 3.1 的 askubuntu 问题](https://askubuntu.com/questions/141597/llvm-clang-3-1-libc)可能是相关的。

而且您至少应该`apt-get build-dep llvm-3.1-dev`确保所有依赖项都可用。

你也可以在一些与 LLVM 相关的邮件列表上寻求帮助。

# c - C中的可变长度数组，它们是如何编译的

> ID：13234926
> 
> 赞同：13
> 
> 时间：2012-11-05T15:14:00.027
> 
> 标签：c, gcc, assembly, compilation, arm

我有一些给定的代码在 C 中的堆栈上使用可变长度数组。我不能轻易地更改该代码以`malloc`在堆上使用 ed 缓冲区，因为我正在处理一些我没有操作系统支持动态内存的东西。然而，当我测试我的方法时，堆栈实际上被破坏了（即，`SP`get 设置为完全伪造的地址）。为了弄清楚发生了什么，我查看了程序集，我完全被编译器的输出弄糊涂了。

我在 pandaboard ES（OMAP4460 ARM 处理器）上运行代码。

为了测试堆栈上的可变大小数组是如何实际编译的，我制作了一个简单的工作测试程序。然而，代码再次让我难以理解。

这是我不明白的：

当我编译一个简单的函数时：

```
int test_method(size_t i)
{
   unsigned char buffer[10];
   return -1;
} 
```

我得到一些非常简单的汇编代码：

```
80003a68 <test_method>:
80003a68:       b480            push    {r7}        ; store frame pointer
80003a6a:       b087            sub     sp, #28     ; make stack frame (size 28)
80003a6c:       af00            add     r7, sp, #0  ; set frame pointer
80003a6e:       6078            str     r0, [r7, #4]; store parameter on stack
80003a70:       f04f 0300       mov.w   r3, #0      ; load return value
80003a74:       4618            mov     r0, r3      ; put return value in return register
80003a76:       f107 071c       add.w   r7, r7, #28 ; destroy stack frame
80003a7a:       46bd            mov     sp, r7      ; ...
80003a7c:       bc80            pop     {r7}        ; pop stored frame pointer
80003a7e:       4770            bx      lr          ; return 
```

但是当我使用以下代码尝试使用可变大小数组时：

```
int test_method(size_t i)
{
    unsigned char buffer[i];
    return 0;
} 
```

我得到这个程序集：

```
80003a68 <test_method>:
80003a68:       e92d 03f0       stmdb   sp!, {r4, r5, r6, r7, r8, r9}
80003a6c:       b084            sub     sp, #16
80003a6e:       af00            add     r7, sp, #0
80003a70:       6078            str     r0, [r7, #4]
80003a72:       4669            mov     r1, sp
80003a74:       460e            mov     r6, r1
80003a76:       f8d7 c004       ldr.w   ip, [r7, #4]
80003a7a:       4661            mov     r1, ip
80003a7c:       f101 31ff       add.w   r1, r1, #4294967295     ; 0xffffffff
80003a80:       60b9            str     r1, [r7, #8]
80003a82:       4660            mov     r0, ip
80003a84:       f04f 0100       mov.w   r1, #0
80003a88:       f04f 38ff       mov.w   r8, #4294967295 ; 0xffffffff
80003a8c:       f04f 090f       mov.w   r9, #15
80003a90:       ea00 0008       and.w   r0, r0, r8
80003a94:       ea01 0109       and.w   r1, r1, r9
80003a98:       ea4f 7850       mov.w   r8, r0, lsr #29
80003a9c:       ea4f 05c1       mov.w   r5, r1, lsl #3
80003aa0:       ea48 0505       orr.w   r5, r8, r5
80003aa4:       ea4f 04c0       mov.w   r4, r0, lsl #3
80003aa8:       f04f 30ff       mov.w   r0, #4294967295 ; 0xffffffff
80003aac:       f04f 010f       mov.w   r1, #15
80003ab0:       ea04 0400       and.w   r4, r4, r0
80003ab4:       ea05 0501       and.w   r5, r5, r1
80003ab8:       4660            mov     r0, ip
80003aba:       f04f 0100       mov.w   r1, #0
80003abe:       f04f 34ff       mov.w   r4, #4294967295 ; 0xffffffff
80003ac2:       f04f 050f       mov.w   r5, #15
80003ac6:       ea00 0004       and.w   r0, r0, r4
80003aca:       ea01 0105       and.w   r1, r1, r5
80003ace:       ea4f 7450       mov.w   r4, r0, lsr #29
80003ad2:       ea4f 03c1       mov.w   r3, r1, lsl #3
80003ad6:       ea44 0303       orr.w   r3, r4, r3
80003ada:       ea4f 02c0       mov.w   r2, r0, lsl #3
80003ade:       f04f 30ff       mov.w   r0, #4294967295 ; 0xffffffff
80003ae2:       f04f 010f       mov.w   r1, #15
80003ae6:       ea02 0200       and.w   r2, r2, r0
80003aea:       ea03 0301       and.w   r3, r3, r1
80003aea:       ea03 0301       and.w   r3, r3, r1
80003aee:       4663            mov     r3, ip
80003af0:       f103 0307       add.w   r3, r3, #7
80003af4:       f103 0307       add.w   r3, r3, #7
80003af8:       ea4f 03d3       mov.w   r3, r3, lsr #3
80003afc:       ea4f 03c3       mov.w   r3, r3, lsl #3
80003b00:       ebad 0d03       sub.w   sp, sp, r3
80003b04:       466b            mov     r3, sp
80003b06:       f103 0307       add.w   r3, r3, #7
80003b0a:       ea4f 03d3       mov.w   r3, r3, lsr #3
80003b0e:       ea4f 03c3       mov.w   r3, r3, lsl #3
80003b12:       60fb            str     r3, [r7, #12]
80003b14:       f04f 0300       mov.w   r3, #0
80003b18:       46b5            mov     sp, r6
80003b1a:       4618            mov     r0, r3
80003b1c:       f107 0710       add.w   r7, r7, #16
80003b20:       46bd            mov     sp, r7
80003b22:       e8bd 03f0       ldmia.w sp!, {r4, r5, r6, r7, r8, r9}
80003b26:       4770            bx      lr 
```

所有这些额外的逻辑从何而来？我本来以为，只需将堆栈帧扩大大小`i`（传入`r0`）就足够了，也许还需要添加一些额外的代码来保持对齐。但是为什么所有这些额外的寄存器都是用`0xffffffff`and写的`#15`。我无法真正理解编译器给我的这个程序集。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-05T16:24:36.743

这不是一个真正的答案，只是收集更多不适合评论的信息

```
typedef unsigned int size_t;

int test_method1(size_t i)
{
   unsigned char buffer[10];
   return -1;
}

int test_method2(size_t i)
{
    unsigned char buffer[i];
    return 0;
} 
```

arm-none-eabi-gcc -O2 -c tm1.c -o tm1.o

arm-none-eabi-objdump -D tm1.o

基本上优化了一切

```
00000000 <test_method1>:
   0:   e3e00000    mvn r0, #0
   4:   e12fff1e    bx  lr

00000008 <test_method2>:
   8:   e3a00000    mov r0, #0
   c:   e12fff1e    bx  lr 
```

尽管代码不好，但这应该使编译器不会优化所有内容

```
typedef unsigned int size_t;

unsigned char *test_method1(size_t i, size_t j)
{
   unsigned char buffer[10];
   return(&buffer[j]);
}

unsigned char *test_method2(size_t i, size_t j)
{
    unsigned char buffer[i];
    return(&buffer[j]);
}

00000000 <test_method1>:
   0:   e24dd010    sub sp, sp, #16
   4:   e28d3004    add r3, sp, #4
   8:   e0830001    add r0, r3, r1
   c:   e28dd010    add sp, sp, #16
  10:   e12fff1e    bx  lr

00000014 <test_method2>:
  14:   e92d0808    push    {r3, fp}
  18:   e2800007    add r0, r0, #7
  1c:   e3c00007    bic r0, r0, #7
  20:   e28db004    add fp, sp, #4
  24:   e04dd000    sub sp, sp, r0
  28:   e08d0001    add r0, sp, r1
  2c:   e24bd004    sub sp, fp, #4
  30:   e8bd0808    pop {r3, fp}
  34:   e12fff1e    bx  lr 
```

它确实如此，我认为它也许回答了你的问题。编译器如何处理可变长度的数组是，在这种情况下，它在堆栈指针上以数组大小的数量进行数学运算，基本上按照您的预期在堆栈上分配动态数组。对于静态大小的数组，在堆栈上完成的数学运算是一个静态数字，而不是传入的参数。

# iphone - 在我的应用程序中打开（xlsx，ppt，pptx.docx）从 safari 或邮件不起作用

> ID：13234928
> 
> 赞同：2
> 
> 时间：2012-11-05T15:14:13.890
> 
> 标签：iphone, ios, ipad, ios-simulator

我正在使用 iOS 5.1 sdk 开发我的应用程序，但“打开方式”不适用于 pptx、ppt、docx、xlsx。有人可以给我 info.plist 的设置吗？我使用 com.microsoft.word.doc、com.microsoft.excel.xls、com.microsoft.powerpoint.ppt 作为文档类型。

CFBundleTypeIconFiles CFBundleTypeName Microsoft PowerPoint 演示文稿 CFBundleTypeRole Viewer LSHandlerRank Alternate LSItemContentTypes com.microsoft.powerpoint.​ppt com.microsoft.powerpoint.​pptx CFBundleTypeIconFiles CFBundleTypeName Excel 文档 CFBundleTypeRole Viewer LSHandlerRank Alternate LSItemContentTypes com.microsoft.excel.xls com.microsoft.excel.xlsx

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:03:09.467

> ```
> NSArray *extensionArray = [NSArray arrayWithObjects:@"doc", @"docx", @"ppt", @"pptx", @"xls", @"xlsx",@"mp3",@"mp4",@"rft",@"rtf",@"pages",@"key",@"numbers",nil];
> 
>    for (int i=0; i<[extensionArray count]; i++) {
>        NSString *fileExtension = [extensionArray objectAtIndex:i];
>        NSString *utiString = (__bridge NSString *)UTTypeCreatePreferredIdentifierForTag(kUTTagClassFilenameExtension,(__bridge CFStringRef)fileExtension,NULL);
>        NSLog(@"Extension: %@ UTI:%@",fileExtension,utiString);
>    } 
> ```

我们可以使用此代码打印正确的 UTI。

# arrays - 提交时 Zend 多选空数组

> ID：13234932
> 
> 赞同：0
> 
> 时间：2012-11-05T15:14:18.007
> 
> 标签：arrays, forms, zend-framework, select, multi-select

当我在本地主机上提交表单时，一切正常。

当我 var_dump 提交数据时，它只会让我

```
 Array ( [nameBg] => PVC
        [orderField] => 50 
        **[option] => Array** 
            [status] => 1 [id] => 10 
            [parentId] => 1 
            [page] => 1 
            [of] => orderField 
            [od] => DESC 
            [save] => Submit 
        ) 
```

仅此而已..选项数组为空:(这可能是因为某些服务器设置吗？

这就是我的多选元素的样子。

```
 $this->addElement ( 'multiselect', 'option', array (
        'label' => $this->translate ( 'Опции' ),
        'decorators' => array (
                'ViewHelper' 
        ),
        'description' => $this->translate ( 'Add options' ),
        'multiOptions' => $catys,
        'validators' => array (
                array (
                        'GreaterThan',
                        true,
                        array (
                                0,
                                'messages' => array (
                                        Zend_Validate_GreaterThan::NOT_GREATER => $this->translate ( 'Please select an option.' ) 
                                ) 
                        ) 
                ) 
        ),
        'onclick' => ('selectMultiple(this);') 
) ); 
```

# xaml - GridView 控件 (Windows 8) 渲染不正确

> ID：13234933
> 
> 赞同：1
> 
> 时间：2012-11-05T15:14:20.623
> 
> 标签：xaml, gridview, windows-8, winrt-xaml

这是我正在使用的 GridView 控件的代码（在 BlankPage App 上制作）：

```
<GridView HorizontalAlignment="Left" x:Name="gridView1" Margin="227,220,0,53" Width="1087">

        <Button x:Name="XboxButton" Margin="10,10,10,10" Style="{StaticResource XboxButton}" Height="200" Click="SnappedXboxButton_Click_1"/>
        <Button x:Name="PS3Button" Margin="10,10,10,10" Style="{StaticResource PS3Button}" Click="SnappedPS3Button_Click_1" />
        <Button x:Name="PCButton" Margin="10,10,10,10" Style="{StaticResource PCButton}" Click="SnappedPCButton_Click_1" />
        <Button x:Name="DSButton" Margin="10,10,10,10" Style="{StaticResource DSButton}" Click="SnappedDSButton_Click_1" />
        <Button x:Name="PSPButton" Margin="10,10,10,10" Style="{StaticResource PSPButton}" Click="SnappedPSPButton_Click_1" />
        <Button x:Name="ContactButton1" Margin="10,10,10,10" Style="{StaticResource ContactButton}" Click="SnappedContactButton_Click_1" />
        <Button x:Name="PrivacyButton" Margin="10,10,10,10" Style="{StaticResource DisclaimerButton}" Click="SnappedPrivacyButton_Click_1"/>

    </GridView> 
```

问题是当应用程序首次加载时，它显示 GridView 如下所示：

（请到这里，因为我是新人，我不允许发布图片）

[http://social.msdn.microsoft.com/Forums/getfile/189014](http://social.msdn.microsoft.com/Forums/getfile/189014)

但是，当我单击任何项​​目并返回到第一页时，渲染效果很好，如下图所示：

[http://social.msdn.microsoft.com/Forums/getfile/189015](http://social.msdn.microsoft.com/Forums/getfile/189015)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T05:36:06.267

提高旅游加价。1\. 在 GridView 中为按钮定义样式资源，或在应用程序资源中创建基本样式，然后使用 BasedOn={StaticResource 绑定符号在每个按钮样式中使用它 2\. 设置边距、宽度、高度，因为我看到所有按钮具有相同的属性值 3\. 如果您不希望 GridView 自动设置宽度或高度值，请确保您在样式中设置值

# compilation - 无法在 gcc (OS X) 上使用 curses 编译）

> ID：13234943
> 
> 赞同：13
> 
> 时间：2012-11-05T15:14:44.117
> 
> 标签：compilation, curses

我写了一个 hello world 程序来看看 curses 库是如何工作的。

这是我的程序：

```
/Users/snihalani/dev/daas at 10:10AM 
➜ cat main.c 
#include <stdio.h>
#include <stdlib.h>
#include <curses.h>

int main(void)
{
    int returnValue = 0;
    while(1)
    {
        printf("I got %d\n", getch());
    }
    return 0;
} 
```

我跑了`gcc main.c`

我有

```
/Users/snihalani/dev/daas at 10:14AM 
➜ gcc main.c 
Undefined symbols for architecture x86_64:
  "_stdscr", referenced from:
      _main in ccEvUdhx.o
  "_wgetch", referenced from:
      _main in ccEvUdhx.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status 
```

我不知道出了什么问题。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-05T15:28:56.217

没关系。我必须在编译时添加 -lcurses 选项。

# html - 带有旋转文本的垂直对齐 div（无 CSS3）

> ID：13234947
> 
> 赞同：2
> 
> 时间：2012-11-05T15:14:55.910
> 
> 标签：html, css, css-transforms

我试图让我的 div 与旋转文本很好地对齐并堆叠在垂直 div 中。但是还没有快乐，因为它们相互重叠。感觉就像我在这里错过了一些非常简单的东西:-)

```
<div class="wrap">
    <div class="left">Flik 1</div>
    <div class="left">Flik 2</div>
    <div class="left">Flik 3</div>
    <div class="left">Flik 4</div>
</div> 
```

CSS 样式

```
div.wrap{
    position: relative;
    display: block;
    text-align: center;
}
div.left{
border-right: 1px solid #189028;
    border-top: 1px solid #189028;
    border-left: 1px solid #189028;
    padding-right: 4px;
    padding-top: 2px;
    padding-left: 4px;
    background-color: #bbbbbb;
    overflow: hidden;
    position: relative;    
    float: left;
    clear:both;
    -moz-transform: rotate(270deg);
    -moz-rotation-point: 0 0;
    -webkit-transform: rotate(270deg);
    -webkit-rotation-point: 0 0;
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
    height: auto;
    width: auto;
}
h1{
font-weight:bold;
font-size:large;
    vertical-align: middle;
} 
```

它可以在[http://jsfiddle.net/rydmark/cGzRA/2/查看和运行](http://jsfiddle.net/rydmark/cGzRA/2/)

任何帮助将非常感激！

干杯/约翰

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-05T15:23:07.197

从您的班级中删除`clear: both;`财产`div.left`并给予`top: 30px;`

[**演示**](http://jsfiddle.net/cGzRA/6/)

或者，如果您想将所有 div 放在一行中，只需添加`margin-top: 40px;`

[**演示 2**](http://jsfiddle.net/cGzRA/8/)

演示 2 的说明 - 可能 div 会竖起来，因为您正在转换，所以它确实考虑了正常的 div 高度，而不是堆叠另一个 div，所以为了将它们分开，使用`margin-top: 40px;`或更少或更多..

CSS 演示 1

```
div.left{
    border-right: 1px solid #189028;
    border-top: 1px solid #189028;
    border-left: 1px solid #189028;
    padding-right: 4px;
    padding-top: 2px;
    padding-left: 4px;
    background-color: #bbbbbb;
    overflow: hidden;
    position: relative;    
    float: left;
    -moz-transform: rotate(270deg);
    -moz-rotation-point: 0 0;
    -webkit-transform: rotate(270deg);
    -webkit-rotation-point: 0 0;
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
    height: auto;
    top: 30px; <-------- Add this
    width: auto;
} 
```

CSS 演示 2

```
div.left{
    border-right: 1px solid #189028;
    border-top: 1px solid #189028;
    border-left: 1px solid #189028;
    padding-right: 4px;
    padding-top: 2px;
    padding-left: 4px;
    background-color: #bbbbbb;
    overflow: hidden;
    position: relative;    
    float: left;
    clear: both;
    -moz-transform: rotate(270deg);
    -moz-rotation-point: 0 0;
    -webkit-transform: rotate(270deg);
    -webkit-rotation-point: 0 0;
    -o-transform: rotate(270deg);
    -ms-transform: rotate(270deg);
    height: auto;
    margin-top: 40px; <------- Add this here
    width: auto;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T15:37:27.623

旋转变换的布局非常糟糕。理智的行为是转换元素的默认布局将在其边界框内，无论转换如何，但事实并非如此。我曾经能够使布局保持理智的唯一方法是酌情使用明确的大小和/或定位。如果你拿出你的 web 调试器（例如 Firebug）并深入研究盒子的定位，你会发现它们在应用转换**之前**已经按照它们的大小进行了布局。IMO 这完全是疯了，但你去了。

# javascript - jQuery - 检查所选行是否是表中最后一个可见行

> ID：13234950
> 
> 赞同：7
> 
> 时间：2012-11-05T15:15:08.240
> 
> 标签：javascript, jquery, css, jquery-selectors, jquery-traversing

以前我在一个条件下检查了一行是否是这样的表中的最后一行：

```
$row.is(':last-child') 
```

效果很好。

现在，我需要隐藏表中的某些行 - 现在我必须检查特定行是否是表中**最后一个可见**行。

我试过这个：

```
$row.is(':visible:last-child') 
```

但不是那么成功。有人有线索吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:29:01.703

这不起作用，因为`last-child`is `display: none;`。

一种方法是迭代孩子以找到最后一个可见孩子的索引**[（参见小提琴）](http://jsfiddle.net/vhD8K/)**：

```
var $rows = $('td');
var $rowsReverse = $($rows.get().reverse());

var $lastVisibleIndex = -1;
$rowsReverse.each(function(index) {
    if ($lastVisibleIndex == -1 && $(this).is(':visible')) {
        $lastVisibleIndex = $rowsReverse.length - index - 1;
    }
});

$rows.each(function(index) {
    var $row = $(this);
    if (index == $lastVisibleIndex) {            
        $row.addClass('red');
    }
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-05T16:39:58.300

感谢大家的快速反馈。我可以用以下方法解决它：

```
$row.parent().find('tr:visible').last().attr('data-id') is $row.attr('data-id') 
```

（它在一个循环中）

@falsarella 我想你的答案很好 - 有点复杂，但它显然有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:28:49.533

你可以试试

`$(element).is(":visible").last();`

或者

`$(element:visible).last();`

如果这不起作用，请告诉我。

# c# - 如何将名称字符串拆分为两个文本框

> ID：13234952
> 
> 赞同：0
> 
> 时间：2012-11-05T15:15:15.393
> 
> 标签：c#, arrays, textbox, split, substring

**这是在c#中**

我有 2 个用于名字和姓氏的文本框。我希望将一个名称字符串拆分为它所属的适当文本框，但问题是名称字符串可以是多种组合。它可以是“Mr John Smith”或“Mr Smith”，对于这些我得到的结果是好的，我现在遇到的问题是在拆分诸如“Mrs and Mrs Smith”之类的字符串时拆分不起作用计划为我在第一个文本框中得到“先生”，在第二个文本框中得到“和史密斯夫人”。

这是我下面的函数，任何人都可以提供帮助，因为如果字符串是“史密斯先生和夫人”或“先生和约翰史密斯夫人”

```
string name = "Mr and Mrs Smith";
string[] titles = new string[] {"Mr", "Miss", "Mrs", "Ms", "Master", "Mr and Mrs", 
           "Mr & Mrs", "Lady", "Lord", "Prof", "Proffessor", "Ma'am", "Madame"};
foreach (string title in titles)
{
  if (name.StartsWith(title) && !name.Equals(title, StringComparison.CurrentCultureIgnoreCase))
  {
    var titleLength = title.Length;
    var titlelessName = name.Substring(titleLength + 1);
    var spaceIndex = titlelessName.IndexOf(' ');
    if (spaceIndex > -1 && spaceIndex >= 0)
    {
      var firstName = titlelessName.Substring(0, spaceIndex);
      var lastName = titlelessName.Substring(spaceIndex + 1);
      txtFname.Text = firstName;
      txtLname.Text = lastName;
    }
  }
  else if (!name.StartsWith(title) && name.Contains(' '))
  {
    var firstName = name.Substring(0, name.IndexOf(' '));
    var lastName = name.Substring(name.IndexOf(' '));
    txtFname.Text = firstName;
    txtLname.Text = lastName;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:24:54.337

您正在尝试将输入的所有实例作为`{firstname} {lastname}`. 现在的现实是你接受了大量不同形状和大小的输入。因此，您可以拼命试图强迫您的输入表现得像您想要的那样，或者您可以调整和更改解决方案以适应输入。

您将*永远*无法弄清楚名字、姓氏和头衔的所有可能组合。进来的人`Duke Leopold von Haussknauf, Phd`呢？

我知道这不是您要寻找的答案，但您应该考虑以某种方式更改解决方案。也许将其呈现在一个框中，或者让人们分别输入标题，名字和姓氏以开始？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:21:54.090

你的问题是你循环的逻辑不正确。

您首先检查标题是否匹配，如果不匹配，则拆分名称中的空格。*这里的问题是，在检查完每个*标题之前，您不应该这样做。

更糟糕的是，如果你名字中的标题不是数组中的最后一个标题，那么数组的下一个循环将最终执行循环中的第二个条件并覆盖正确的行为。找到匹配的标题后，您需要退出循环！

所以，像这样的东西（未经测试的代码）：

```
 string name = "Mr and Mrs Smith";
    string[] titles = new string[] {"Mr", "Miss", "Mrs", "Ms", "Master", "Mr and Mrs", "Mr & Mrs", "Lady", "Lord", "Prof", "Proffessor", "Ma'am", "Madame"};
    var sortedTitles = from s in titles
         orderby s.Length descending
         select s;
    bool foundTitle = false;
    foreach (string title in sortedTitles)
    {
        if (name.StartsWith(title) && !name.Equals(title, StringComparison.CurrentCultureIgnoreCase))
        {
            var titleLength = title.Length;
            var titlelessName = name.Substring(titleLength + 1);
            var spaceIndex = titlelessName.IndexOf(' ');
            if (spaceIndex > -1 && spaceIndex >= 0)
            {
                var firstName = titlelessName.Substring(0, spaceIndex);
                var lastName = titlelessName.Substring(spaceIndex + 1);
                txtFname.Text = firstName;
                txtLname.Text = lastName;
            }
            foundTitle = true;
            break;
        }
    }
    if (!foundTitle && name.Contains(' '))
    {
        var firstName = name.Substring(0, name.IndexOf(' '));
        var lastName = name.Substring(name.IndexOf(' '));
        txtFname.Text = firstName;
        txtLname.Text = lastName;
    } 
```

而且，当然，这并没有考虑到您的标题列表远非详尽无遗，并且不包括您可能遇到的很多品种。怎么样`Mr. and Mrs. Smith`？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-05T16:00:36.107

我觉得你对前任的假设有些不恰当：史密斯先生将先生显示为名字，我建议使用其他方式输入您的数据，例如先生、夫人的下拉列表等，请多考虑您的要求

# jquery - 将 jquery 选择器传递给函数

> ID：13234955
> 
> 赞同：3
> 
> 时间：2012-11-05T15:15:24.380
> 
> 标签：jquery

您好，这可能是一个简单的愚蠢问题，但我如何将 jquery 选择器传递给函数？

我正在这样做，但它不起作用。提前致谢！

```
var $list=$('#startlist')
var $container=$list.parent();
var $containerTop=$('#toprow');
var $containerTwo=$('#etrow #bottomrow');

var $li=$list.find('li');

var totHt=0;
var totItems=$li.length;
var listCount = 0;
    $li.each(function( idx){

    var ht=$(this).outerHeight(true);

    if( totHt + ht >= maxHt || totHt + ht + 10 >=maxHt || idx==totItems-1){
        if (listCount>=3 && listCount < 6)
            createNewList($containerTop);
        else if (listCount >=6)
            createNewList($containerTwo);
        else
            createNewList($container);
        totHt=0;
        listCount++;
    }else{
        totHt += ht;
    }

});

function createNewList ($cont)
{
    $('<ul>').append( $(this).prevAll().andSelf() ).appendTo( $cont );

} 
```

我收到此错误：

```
Uncaught Error: NOT_FOUND_ERR: DOM Exception 8 
```

如果我用这个替换 if 块它工作正常：

```
if (listCount>=3 && listCount < 6)
                    $('<ul>').append( $(this).prevAll().andSelf() ).appendTo( $containerTop);
        else if (listCount >=6)
             $('<ul>').append( $(this).prevAll().andSelf() ).appendTo($containerTwo);
                else
             $('<ul>').append( $(this).prevAll().andSelf() ).appendTo($container); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-05T15:21:20.443

由于您是在 之外定义函数`.each`，因此它正在丢失上下文。尝试使用`.call`将上下文正确设置为您期望的内容。

```
createNewList.call(this,$containerTop) 
```

# apache-flex - 定义组件resize的方向

> ID：13234957
> 
> 赞同：-1
> 
> 时间：2012-11-05T15:15:25.637
> 
> 标签：apache-flex

我在 Hgroup 中有三个组件，所有三个组件都可以扩展。但问题是，这三个组件都向正确的方向扩展。并且容器没有足够的空间来做到这一点，所以我需要的是

第一个向右扩展

第二个向左右扩展

第三个向左扩展。

其他人将在此过程中被推开。

像这样。

![像这样](../Images/a7483b741cd95ef151134306a69d1112.png)

但是如何定义组件的扩展方向呢？

组件的代码是这样的

```
<?xml version="1.0" encoding="utf-8"?>
<s:Group xmlns:fx="http://ns.adobe.com/mxml/2009"
         xmlns:s="library://ns.adobe.com/flex/spark"
         xmlns:mx="library://ns.adobe.com/flex/mx"
         width.State2="500" height.State2="550"
         width.State1="330" height.State1="550">

    <s:states>
        <s:State name="State1"/>
        <s:State name="State2"/>
    </s:states>

    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>

    <mx:LinkButton includeIn="State1" x="222" y="519" label="Expand" click="currentState='State2'"/>
    <mx:LinkButton includeIn="State2" x="433" y="519" label="Return"
                   click="currentState='State1'"/>
</s:Group> 
```

并且在主comp中，其中三个Comp将嵌套在HGroup中

```
<s:HGroup  x="90" y="62" width="1000" height="550">
    <ns1:comp1>
    </ns1:comp1>
    <ns1:comp2>
    </ns1:comp2>
    <ns1:comp3>
    </ns1:comp3>
</s:HGroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:58:52.087

最简单的方法是与国家。

```
<s:states>
    <s:State name="normal"/>
    <s:State name="1Expanded"/>
    <s:State name="2Expanded"/>
    <s:State name="3Expanded"/>
</s:states> 
```

然后在您的组件中：

```
<ns1:comp1
    width="250"
    width.1Expanded="500"
    width.2Expanded="100"
    width.3Expanded="50"> 
```

您可以调整这些以适合您的需要，但这只是一个示例。

# javascript - 如何在 Eric Martin 的简单模态确认覆盖中启用模态属性（启用键盘控制）？

> ID：13234962
> 
> 赞同：1
> 
> 时间：2012-11-05T15:15:41.003
> 
> 标签：javascript, jquery, css

我有简单模型的退出代码，它工作正常，但现在我想要那个代码（模型）508 能胜任。我正在使用 Eric Martin 的确认覆盖模型。有什么方法可以只为模型启用 Tab 键吗？提前致谢。

# iphone - 使用缩放图像旋转动画

> ID：13234964
> 
> 赞同：0
> 
> 时间：2012-11-05T15:15:47.140
> 
> 标签：iphone, objective-c, ios

我想在图像大小增长的同时旋转图像，每件事都应该是动画。请帮助我摆脱这个问题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T16:12:02.513

这会将您的图像缩放到两倍大小并在 5 秒内将其旋转 90 度：

```
[UIView animateWithDuration:5.0f animations:^{
    CGAffineTransform transform = CGAffineTransformMakeScale(2.0f, 2.0f);
    transform = CGAffineTransformRotate(transform, (CGFloat)(M_PI / 2.0f));

    myImageView.transform = transform;
}]; 
```

# java - Android - OpticalFlow：calcOpticalFlowPyrLK & goodFeaturesToTrack 返回相同的点

> ID：13234968
> 
> 赞同：2
> 
> 时间：2012-11-05T15:16:03.207
> 
> 标签：java, android, opencv, computer-vision, opticalflow

我正在开发一个 Android 视频稳定应用程序！我遇到了一些与 goodfeaturestotrack 和 calcOpticalFlowPyrLK 函数相关的问题，因为最终输出是相同的点！我用谷歌搜索了每一个关于这个的网站，但我无法解决它！我的代码有什么问题？

```
mRgba1 = new Mat(height, width, CvType.CV_8UC4);
mRgba2 = new Mat(height, width, CvType.CV_8UC4);
mGray1 = new Mat(mRgba1.size(), CvType.CV_8UC1);
mGray2 = new Mat(mRgba2.size(), CvType.CV_8UC1);
mView = new Mat(height, width, CvType.CV_8UC4);
initial = new MatOfPoint();
status = new MatOfByte();
err = new MatOfFloat();
mask = new Mat(mRgba1.size(), CvType.CV_8UC1);
prevPts = new MatOfPoint2f();
nextPts = new MatOfPoint2f();
Imgproc.goodFeaturesToTrack(mGray1, initial, maxCorners, 0.01, 0.01);
initial.convertTo(prevPts, CvType.CV_32FC2);
Video.calcOpticalFlowPyrLK(mGray1, mGray2, prevPts, nextPts, status, err, winSize, 5, optical_flow_termination_criteria, 0, 1); 
```

然后，当我向他们展示时：

```
Point[] pointp = prevPts.toArray();
Point[] pointn = nextPts.toArray();
for (Point px : pointp) 
{ Core.circle(mView, px, 15, circleColor); }
for (Point py : pointn) 
{ Core.circle(mView, py, 5, line_color); } 
```

我在同一个位置有 2 个不同的圆圈，这不好:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T17:45:32.303

我认为问题在于视频捕获一遍又一遍地传递相同的图像。您是否尝试克隆视频捕捉垫！另外要尝试的另一件事是，calcOpticalFlowPyrLK 有 3 种不同的调用方式。我建议使用这个

```
Video.calcOpticalFlowPyrLK(prevImg, nextImg, prevPts, nextPts, status, err, winSize, maxLevel) 
```

:D

```
TermCriteria termcrit = new TermCriteria(TermCriteria.MAX_ITER|TermCriteria.EPS,25,0.03);
        Video.calcOpticalFlowPyrLK(temp3, temp2, prevPts, nextPts, status, err, winSize, 5);
        //Video.calcOpticalFlowPyrLK(prevImg, nextImg, prevPts, nextPts, status, err)
        //Video.calcOpticalFlowPyrLK(temp3, temp2, prevPts, nextPts, status, err, winSize, 5, termcrit, 0, 1); 
```

# iphone - Tapku加载时间极长

> ID：13234970
> 
> 赞同：0
> 
> 时间：2012-11-05T15:16:07.447
> 
> 标签：iphone, objective-c, ios, ios5, tapku

我创建了一个推送“日历”视图控制器的“家庭”视图控制器。日历视图控制器使用 TAPKU 库创建一个日历，我从 plist 中加载事件。

我遇到的问题是日历视图控制器的加载时间非常长！

加载该日历始终需要大约 4 到 5 秒。此外，当我在日历视图控制器中重新加载日历时，需要 2 到 3 秒。

关于如何使其加载更快的任何建议？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T15:23:03.683

对于 iPod 第 2 代及以下和 iPhone 第 3 代及以下，Tapku 加载时间稍长一些。不过，其他任何东西都快得多！

# jquery - 使用 jQuery 模拟单击 选择元素

> ID：13234971
> 
> 赞同：23
> 
> 时间：2012-11-05T15:16:19.473
> 
> 标签：jquery

`click`我使用此代码模拟`select`元素：

```
$(function(){
   $("#click").click(function(){
       $("#ts").click();
       //$("#ts").trigger("click");
   });
}); 
```

HTML代码是：

```
<select id="ts">
    <option value="1">1</option>
    <option value="2">Lorem ipsum dolor s.</option>
    <option value="3">3</option>
</select>

<input type="button" id="click" value="Click"/> 
```

我测试`click`但`trigger`两者都不起作用。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-11-05T15:29:18.537

好吧，你不能将`click`事件附加到 html`select`但你可以做这个棘手的事情......

看看这里：

**现场演示：**

[http://jsfiddle.net/oscarj24/GR9jU/](http://jsfiddle.net/oscarj24/GR9jU/)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-05T16:25:19.753

这是我认为你能得到的最好的跨浏览器方法。在 Safari、Firefox、Chrome 和 IE 上测试。~~对于 Chrome，Oscar Jara 的答案是要走的路。~~ *（更新：2016 年 10 月 13 日）*

```
$(function() {
    $("#click").on('click', function() {
        var $target = $("#ts");
        var $clone = $target.clone().removeAttr('id');
        $clone.val($target.val()).css({
            overflow: "auto",
            position: 'absolute',
            'z-index': 999,
            left: $target.offset().left,
            top: $target.offset().top + $target.outerHeight(),
            width: $target.outerWidth()
        }).attr('size', $clone.find('option').length > 10 ? 10 : $clone.find('option').length).change(function() {
            $target.val($clone.val());
        }).on('click blur keypress',function(e) {
         if(e.type !== "keypress" || e.which === 13)
            $(this).remove();
        });
        $('body').append($clone);
        $clone.focus();
    });
}); 
```

参见[jsFiddle 演示](http://jsfiddle.net/vWx2H/456/)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-05T15:25:12.667

这和我想的一样接近：

```
$(function(){
   $("#click").on('click', function(){
       var s = $("#ts").attr('size')==1?5:1
       $("#ts").attr('size', s);
   });
   $("#ts option").on({
       click: function() {
           $("#ts").attr('size', 1);
       },
       mouseenter: function() {
           $(this).css({background: '#498BFC', color: '#fff'});
       },
       mouseleave: function() {
           $(this).css({background: '#fff', color: '#000'});
       }
   });
}); 
```

[**小提琴**](http://jsfiddle.net/g3Ta3/4/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-06T20:10:18.630

我最终在选项本身上设置了 selected 属性。然后甚至在选择元素上触发更改。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-03-04T21:07:32.587

我有一个复杂的`select`元素，由前一个`select`元素中给出的答案提供。选项由 AJAX 提供，由`onchange`事件触发。

为了我的需要，为了用模拟用户行为的“隐藏的魔法事件”（以密集的测试方式）预填充答案，我在“我的魔法事件”中使用了以下 jQuery 代码。它通过索引选择选项：

```
// Quick feed of my Car Form    
document.getElementById('carbrand').selectedIndex = 30; // "PORSCHE"
document.getElementById('carbrand').onchange();

var timeoutID = window.setTimeout(function () {

    document.getElementById('model').selectedIndex = 1; // "911"
    document.getElementById('model').onchange();

    var timeoutID = window.setTimeout(function () {
        document.getElementById('energy').selectedIndex = 1; // "SUPER"
        document.getElementById('energy').onchange();
    } , 200);

} , 200); 
```

谢谢[https://stackoverflow.com/users/1324/paul-roub](https://stackoverflow.com/users/1324/paul-roub) pour les 更正 ;-)

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2013-10-14T13:09:52.973

`toggle`Oscar Jara 变体的 小更新（带有）
[http://jsfiddle.net/mike_s/y5GhB/](http://jsfiddle.net/mike_s/y5GhB/)

# ios - 如何在警报视图中创建两个文本字段，IOS

> ID：13234974
> 
> 赞同：6
> 
> 时间：2012-11-05T15:16:21.347
> 
> 标签：ios, uitextfield, uialertview

我想创建一个包含两个 uitextfields 的警报视图。

```
method:
//show alertview for file input
- (IBAction)showAddFiles:(id)sender {
    UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Enter File Details"
                                                      message:nil
                                                     delegate:self
                                            cancelButtonTitle:@"Cancel"
                                            otherButtonTitles:@"Add", nil];

    UITextField *textFieldDescription = [message textFieldAtIndex:0];
    textFieldDescription.placeholder = @"File Description : Ex. Acat Briefing";
    UITextField *textFieldFileName = [message textFieldAtIndex:1];
    textFieldFileName.placeholder = @"Exact File Name : Ex. acat.pdf";

    [message show];
}

//make sure file description is long enoguh
- (BOOL)alertViewShouldEnableFirstOtherButton:(UIAlertView *)alertView
{
    NSString *inputText = [[alertView textFieldAtIndex:0] text];

    if( [inputText length] <= 15 && [inputText length] >= 4)
    {
        return YES;
    }
    else
    {
        return NO;
    }
}

//handle add button
- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    NSString *title = [alertView buttonTitleAtIndex:buttonIndex];
    if([title isEqualToString:@"Add"])
    {
        UITextField *fileDescription = [alertView textFieldAtIndex:0];
        UITextField *fileName = [alertView textFieldAtIndex:1];
        NSLog(@"Desc: %@\nName: %@", fileDescription.text, fileName.text);
    }
} 
```

错误：

***** 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“textFieldIndex (0) 超出了文本字段数组的范围”****

 **为什么会出现此错误，如何在警报视图中创建两个 uitextfields？

=========工作解决方案===========感谢以下答案，当您只需要两个纯文本字段时

```
//show alertview for file input
- (IBAction)showAddFiles:(id)sender {
    UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Enter File Details"
                                                      message:nil
                                                     delegate:self
                                            cancelButtonTitle:@"Cancel"
                                            otherButtonTitles:@"Add", nil];

    [message setAlertViewStyle:UIAlertViewStyleLoginAndPasswordInput];
    UITextField *fileDescription = [message textFieldAtIndex:0];
    fileDescription.placeholder=@"Ex. acat.pdf";
    [[message textFieldAtIndex:1] setSecureTextEntry:NO];
    UITextField *fileName= [message textFieldAtIndex:1];
    fileName.placeholder=@"Ex. Acat Briefing";

    [message show];
} 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-11-05T15:32:02.577

在您分配“消息”警报视图之后。将此添加到您的代码中：

```
[message setAlertViewStyle:UIAlertViewStyleLoginAndPasswordInput];
[[message textFieldAtIndex:1] setSecureTextEntry:NO]; 
```

这将使您的警报视图里面有两个文本字段。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-05T15:46:12.080

`UIAlertView`您收到的错误是因为您的“消息”中没有文本字段。存在实例方法“textFieldAtIndex”以访问`UIAlertView` 使用特定样式（如 、 或 ）创建的`UIAlertViewStylePlainTextInput`文本`UIAlertViewStyleSecureTextInput`字段`UIAlertViewStyleLoginAndPasswordInput`。这些样式在属性“alertViewStyle”上设置。例如：

```
[message setAlertViewStyle:UIAlertViewStylePlainTextInput]; 
```

您可以在设置此属性后使用“textFieldAtIndex”，但不幸的是，这些样式似乎都不适合您的需要。

我之前所做的是创建一个默认样式的 UIAlertView（就像您已经完成的那样），并将 UITextFields 作为子视图添加到 UIAlertView。

例如：

```
//Create the alert then add any labels and text fields as subviews.
//You can pad out an alertView by adding newline characters in the message.  This will
// give the alertView more space to draw the text fields.
UIAlertView *message = [[UIAlertView alloc] initWithTitle:@"Two Text Field Alert" 
                                                         message:@"\n\n\n\n\n" 
                                                        delegate:self 
                                               cancelButtonTitle:@"CanceL" 
                                               otherButtonTitles:@"OK", nil];

UITextField *textField1 = [[UITextField alloc] initWithFrame:CGRectMake(16,83,252,25)];
textField1.borderStyle = UITextBorderStyleRoundedRect;
textField1.keyboardAppearance = UIKeyboardAppearanceAlert;
textField1.delegate = self;
[message addSubview:textField1];

UITextField *textField2 = [[UITextField alloc] initWithFrame:CGRectMake(16,112,252,25)];
textField2.placeholder = @"Password";
textField2.borderStyle = UITextBorderStyleRoundedRect;
textField2.keyboardAppearance = UIKeyboardAppearanceAlert;
textField2.delegate = self;
[message addSubview:textField2];
[message show];

[message release];
[textField2 release];
[textField1 release]; 
```

与 alertView 样式相比，以这种方式登录更加冗长和混乱，但您可以根据需要调整此方式以将任意数量的子视图添加到警报视图。

编辑以简化示例。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-05T15:36:14.863

您收到该错误是因为`UIAlertView`不包含任何文本字段。由于在您尝试调用时警报视图的文本字段集合是空的`[alertView textFieldAtIndex:0]`，因此您最终会`NSInvalidArgumentException`遇到崩溃。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-12-06T11:54:38.733

我们只能在 alertview 中创建两个文本字段。这里：

```
UIAlertView * alert = [[UIAlertView alloc] initWithTitle:@"Change Password"
                                                 message:@""
                                                delegate:self
                                       cancelButtonTitle:@"Cancel"
                                       otherButtonTitles:@"OK", nil];

alert.alertViewStyle = UIAlertViewStyleLoginAndPasswordInput;
UITextField * alertTextField1 = [alert textFieldAtIndex:0];
alertTextField1.keyboardType = UIKeyboardTypeDefault;
alertTextField1.placeholder = @"Type Current password";
[[alert textFieldAtIndex:0] setSecureTextEntry:YES];

UITextField * alertTextField2 = [alert textFieldAtIndex:1];
alertTextField2.keyboardType = UIKeyboardTypeDefault;
alertTextField2.placeholder = @"Type New Password";

[alert show]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-05T15:30:42.343

这是您问题的解决方案.. [http://www.alterplay.com/ios-dev-tips/2009/12/username-and-password-uitextfields-in-uialertview-prompt.html](http://www.alterplay.com/ios-dev-tips/2009/12/username-and-password-uitextfields-in-uialertview-prompt.html)**

# windows - 根据应用状态启用/禁用广告

> ID：13234981
> 
> 赞同：0
> 
> 时间：2012-11-05T15:16:40.317
> 
> 标签：windows, visual-studio-2010, windows-phone-7

我希望我的广告在我的应用程序试用期间展示，并在应用程序获得完全许可后消失。

库克兹-

```
Private Sub PhoneApplicationPage_Loaded(sender As System.Object, e As System.Windows.RoutedEventArgs)

    If App.IsTrial Then
        AdControl1.Visibility = Windows.Visibility.Visible

    Else
        AdControl1.Visibility = Windows.Visibility.Collapsed
    End If

End Sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:25:34.367

问题是`IsEnabled`仍然显示控件。

您应该在 XAML 文件中为广告添加一个空容器，如下所示：

```
<Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"/>
        <RowDefinition Height="*"/>
    </Grid.RowDefinitions>            
    <StackPanel x:Name="spAd" Grid.Row="0">
        <!--Ad will be placed here via the code-->
    </StackPanel>   
</Grid> 
```

然后在`PhoneApplicationPage_Loaded`事件处理程序中，如果`IsTrial`等于`true`，则实例化`AdControl`并将其添加到视图中：

```
AdControl _adControl = new AdControl();

// Use your real Application ID and Ad Unit ID here
_adControl.ApplicationId = "test_client";
_adControl.AdUnitId = "Image480_80"; 

_adControl.Width = 480;
_adControl.Height = 80;

spAd.Children.Add(_adControl); 
```

# javascript - 如何正确实现使用 jQuery UI 自动完成小部件的表单？

> ID：13234982
> 
> 赞同：0
> 
> 时间：2012-11-05T15:16:41.540
> 
> 标签：javascript, jquery, ruby-on-rails, ruby, jquery-ui

我正在使用 Ruby on Rails 3.2.2 和[jquery-rails 2.1.3](https://github.com/rails/jquery-ujs)（包括 jQuery UI）。我正在尝试实现一个 HTML 表单，以便使用[Autocomplete](http://jqueryui.com/autocomplete) jQuery UI 小部件搜索、选择和提交城市数据。

此时我正在使用以下“自动完成”字段实现我的表单：

```
<div class="ui-widget">
  <label for="cities">City: </label>
  <input id="cities" />
</div>

<script>
  $jQ(function() {
    var cache = {};
    $jQ( "#cities" ).autocomplete({
      autoFocus: true,
      minLength: 3,
      source:    function( request, response ) {
        $jQ.ajax({
            url:      '<SEARCH_PATH>',
            data:     { search: request.term },
            dataType: 'json',
            success:  function(data) {
              var cities = new Array();

              $jQ.each(data, function(arrayID, city) {
                cities.push({ label: city.name, value: city.id })
              });

              response( cities ); 
            },
            error:    function () {
              response([]);
            }
        });
      }
    });
  });
</script> 
```

上面的代码按预期工作，用于检索 JSON 数据并显示检索到的城市列表。如您所见，城市数据的“有用部分”是城市数据，`id`因为我使用该`id`值是为了在内部处理提交的数据。但是，鉴于显示了“可选”城市列表，当我使用键盘向上和向下箭头来选择其中一个城市时，输入字段将填充城市`id`（而不是城市`name`）。

我想：

*   *在选择城市的输入字段中显示城市`name`而不是`id`*
*   *想办法提交城市`id`而不是城市`name`*（即使城市`name`是前端内容中唯一显示的东西）。

我如何/应该如何正确地做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T16:00:12.563

使用 select 事件填充隐藏字段，然后提交隐藏字段。

```
<div class="ui-widget">
  <label for="cities">City: </label>
  <input id="cities" />
  <input name="cities" type="hidden" id="cities-hidden" />
</div> 
```

js

```
$jQ(function() {
  var cache = {};
  $jQ( "#cities" ).autocomplete({
    autoFocus: true,
    ...
    select: function(e, ui) {
      $("#cities-hidden").val(ui.item.value); // populate hidden input
      $("#cities").val(ui.item.label); // populate autocomplete input
      return false; // prevent default action of populating autocomplete input with value
    }
  });
}); 
```

演示：http: [//jsfiddle.net/f8yPX/3/](http://jsfiddle.net/f8yPX/3/)

# concurrency - Java 7 中的 Fork Join 机制

> ID：13234987
> 
> 赞同：0
> 
> 时间：2012-11-05T15:16:52.763
> 
> 标签：concurrency, java-7, fork-join

Fork Join 中实现的调度机制是否必然意味着，如果在任何时候都有可用的空闲内核，线程肯定会被调度在这些空闲内核上？

# java - 记录http请求获取/发布参数的最佳方式（和快速）

> ID：13234989
> 
> 赞同：4
> 
> 时间：2012-11-05T15:16:55.657
> 
> 标签：java, httprequest

我正在开发一个 Web JEE5 应用程序，我需要记录 http 帖子并获取参数，最好的方法是什么？

一开始我尝试使用 HttpRequest->getQueryString，但它不适用于 post 参数，然后我编写了一个使用 HttpRequest->getParameterMap 的代码（见下文）

```
Map<String,String[]> parametersName=theRequest.getParameterMap();

int count=0;

for (String paramName : parametersName.keySet()) {
String[] paramValues=parametersName.get(paramName);
   if(count>0)
       allParameter.append("&");

   allParameter.append(paramName);
   allParameter.append("=");
   for (int i = 0; i < paramValues.length; i++) {
       allParameter.append(paramValues[i]);
       if(paramValues.length>1)
       allParameter.append(",");
       }
    count++;
  } 
```

它可以工作，但它似乎太复杂（与 getQueryString 相比）无法完成。

有没有更好/更快的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:20:03.697

所有 HTTP（和应用程序服务器）都支持 access.log - 存储 HTTP 请求和响应详细信息的日志文件。只需配置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:22:56.547

你也可以这样做：

```
Enumeration parms = request.getHeaderNames();
String parmname;
String parmval;
while (parms.hasMoreElements()) {
    parmname = (String)parms.nextElement();
    parmval = request.getHeader(parmname);
    Logger.log(parmname + " - " + parmval);
} 
```

# c - Unix Programming Shared Memory 奇怪的结果

> ID：13234990
> 
> 赞同：0
> 
> 时间：2012-11-05T15:16:57.170
> 
> 标签：c, unix, shared-memory

我已经研究信号量和共享内存一个星期了，但还遇到了一些困难，所以我尝试制作这个孩子应该写入内存共享多维整数数组的程序，而父亲应该读取该数组从共享的内存中。

```
#include <stdio.h>
#include <stdlib.h>
#include <unistd.h>
#include <sys/ipc.h> 
#include <sys/shm.h>
#include <stdio.h>
#include <sys/fcntl.h>
#include <semaphore.h>
#include <sys/wait.h>

#define MAXCHILDS 1
#define MAX_SIZE 10
#define MAX_WRITES 100

typedef struct{
    int m[MAX_SIZE][MAX_SIZE];
}matrix;

/*fork variables*/
pid_t child[MAXCHILDS];
/*semphores variables */
sem_t *empty, *full, * mutex;
/*share memory id*/
int shmid;
/*shared memory array pointer */
matrix * sh_mem;

void init(){

     /*semaphores unlink and creation */    
     sem_unlink("EMPTY");
     empty=sem_open("EMPTY",O_CREAT|O_EXCL,0700,50);
     sem_unlink("FULL");
     full=sem_open("FULL",O_CREAT|O_EXCL,0700,0);
     sem_unlink("MUTEX");
     mutex=sem_open("MUTEX",O_CREAT|O_EXCL,0700,1);
    /*initialize shared memory */
    shmid = shmget(IPC_PRIVATE,sizeof(matrix),IPC_CREAT|0777);
    /*map shared memory*/
    sh_mem = (matrix*)shmat(shmid,NULL,0);
    if(sh_mem == (matrix*)(-1)){
        perror("shmat");
    }
}

void writer(int m[MAX_SIZE][MAX_SIZE],int n_child){
    int i,k;
    for(i = 0;i<MAX_SIZE;i++){
        for(k= 0;k<MAX_SIZE;k++){
            m[i][k] = 0;
            if(i==(k+1)){
                m[i][k] = 1;
            }
        }
    }

}
void reader(int m[MAX_SIZE][MAX_SIZE]){
    int i = 0;
    int k = 0;
    int sum = 0;
    for(i = 0;i<MAX_SIZE;i++){
        for(k= 0;k<MAX_SIZE;k++){
            printf("%d",m[k][i]);
        }
        sum++;
        printf("[i=]%d[k=]%d\n",i,k);
    }
    printf("%d",sum);

}

void terminate() {
  sem_close(empty);
  sem_close(full);
  sem_close(mutex);
  sem_unlink("EMPTY");
  sem_unlink("FULL");
  sem_unlink("MUTEX");
  shmctl(shmid, IPC_RMID, NULL);
}

int main(int argc, char **argv)
{
    int i,sum;
    init();

    for(i = 0;i<MAXCHILDS;i++){
        if((child[i]= fork()) < 0) // error occured
        {
            perror("Fork Failed");
            exit(1);
        }
        if((child[i] =fork())==0){
            writer(sh_mem->m,i);
            exit(0);
        }
    }

    /*father*/
    sleep(10);
    sum++;
    printf("%d\n",sum); 
    reader(sh_mem->m);
    wait(NULL);

    terminate();

    return 0;
} 
```

我现在有两个问题......我需要将数组保存到我似乎不理解的内存映射文件中，并且父亲抛出的输出非常奇怪......他的输出是

```
0000100000[i=]3[k=]10
0000010000[i=]4[k=]10
0000001000[i=]5[k=]10
0100000000[i=]0[k=]10
0000000100[i=]6[k=]10
0010000000[i=]1[k=]10
0000000010[i=]7[k=]10
0001000000[i=]2[k=]10
0000000001[i=]8[k=]10
0000100000[i=]3[k=]10
0000000000[i=]9[k=]10
0000010000[i=]4[k=]10
0000001000[i=]5[k=]10
0000000100[i=]6[k=]10
0000000010[i=]7[k=]10
0000000001[i=]8[k=]10
0000000000[i=]9[k=]10 
```

它应该是这样的：

```
0000100000[i=]0[k=]10
0000010000[i=]1[k=]10
0000001000[i=]2[k=]10
0100000000[i=]3[k=]10
0000000100[i=]4[k=]10
0010000000[i=]5[k=]10
0000000010[i=]6[k=]10
0001000000[i=]7[k=]10
0000000001[i=]8[k=]10
0000100000[i=]9[k=]10 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-05T15:40:21.093

代码在两个地方调用`fork()`。删除第二个调用。

改变：

```
 if((child[i] =fork())==0){ 
```

到：

```
 if(child[i] == 0){ 
```

# javascript - 字符串中的有效nodejs代码到javascript对象

> ID：13234991
> 
> 赞同：1
> 
> 时间：2012-11-05T15:16:56.873
> 
> 标签：javascript, node.js

我的目标：我正在尝试将 .js 文件加密为 .jse 并仅在它运行时解密（混淆 nodejs 代码）。

```
var ffi = 需要('ffi');

//libpcrypt.so 是一个用于加密和解密文件的库
var crypt = ffi.Library('./libpcrypt', {
  '解密'：['字符串'，['字符串'，'字符串']]
});

require.extensions[".jse"] = function (module) {
   module.exports = (crypt.decrypt(module.filename, 'out'));
};

console.log(require('./routes.jse'));

```

我知道，用 cosole.log() 可以打印出源代码。

**问题：**解密代码是纯字符串，我无法将其转换为有效的 javascript 对象以进行导出。有没有办法导出我解密的代码字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T18:08:12.960

这是您的解决方案（未经测试）：

```
require.extensions['.jse'] = function(module, filename) {
  var content = crypt.decrypt(fs.readFileSync(filename), 'out')
  return module._compile(content, filename);
}; 
```

愉快地调试加密模块；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T15:25:58.397

module.exports 是您可以分配给的对象（即：module.exports.newFunc = someFunction;）

```
JSON.parse(crypt.decrypt(module.filename, 'out')); 
```

**编辑**所以你应该让你的加密文件成为 JSON 类或查看类似问题的答案[Load "Vanilla" Javascript Libraries into Node.js](https://stackoverflow.com/questions/5171213/load-vanilla-javascript-libraries-into-node-js)

# android - 带有 Phonegap 的 Android 应用程序在横向旋转时崩溃

> ID：13234993
> 
> 赞同：3
> 
> 时间：2012-11-05T15:17:02.790
> 
> 标签：android, cordova, crash, landscape

我用 Phonegap 创建了一个 Android 应用程序。当应用程序运行并且我将手机翻转为横向时，它只会崩溃。我已经尝试将其添加到我的清单中：

```
android:configChanges="orientation|keyboardHidden" 
```

也试过：

```
android:configChanges="orientation|screenSize|keyboardHidden" 
```

没有效果。有什么建议么？

* * *

**更新：**

这是应用程序崩溃时 logcat 告诉我的内容：http: [//dl.dropbox.com/u/17844821/zeug/logcat.txt](http://dl.dropbox.com/u/17844821/zeug/logcat.txt)

* * *

**更新：**

这是我的清单文件：

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="de.foo.bar"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="9"
        android:targetSdkVersion="15" />

<supports-screens 
    android:largeScreens="true" 
    android:normalScreens="true" 
    android:smallScreens="true" 
    android:resizeable="true" 
    android:anyDensity="true" />
<uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
<uses-permission android:name="android.permission.ACCESS_LOCATION_EXTRA_COMMANDS" />
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:configChanges="orientation|keyboardHidden"
            android:name=".MainActivity"
            android:label="@string/title_activity_main">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-05T19:28:11.257

确保将它们放在活动标签中，如下所示：

```
<activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main"
        android:configChanges="orientation|keyboardHidden|keyboard|screenSize
|locale"> 
```

并在他们之后关闭它。我曾经遇到过这个问题，我犯了这个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-05T22:31:35.327

您的 AndroidManifest.xml 中是否有 INTERNET 权限？根据异常，CallbackServer 似乎无法打开会导致一系列问题的套接字。

# android - 检查Android中的两个Bundle对象是否相等？

> ID：13234994
> 
> 赞同：13
> 
> 时间：2012-11-05T15:17:06.807
> 
> 标签：android, bundle

我想检查两个捆绑包是否相等，有没有办法做到这一点，而不是一键检查它们？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-05T19:11:46.380

这是测试两个 Bundle 是否相同的一种方法：

*   检查它们的尺寸，如果它们不相等，请不要打扰
*   如果两个值都是 Bundle 对象，则使用递归
*   因为 key in 的值`one`can be `null`，所以确保两个值都是`null`并且 key*实际*存在于`two`
*   最后比较匹配键的值

代码：

```
public boolean equalBundles(Bundle one, Bundle two) {
    if(one.size() != two.size())
        return false;

    Set<String> setOne = new HashSet<>(one.keySet());
    setOne.addAll(two.keySet());
    Object valueOne;
    Object valueTwo;

    for(String key : setOne) {
        if (!one.containsKey(key) || !two.containsKey(key))
            return false;

        valueOne = one.get(key);
        valueTwo = two.get(key);
        if(valueOne instanceof Bundle && valueTwo instanceof Bundle && 
                !equalBundles((Bundle) valueOne, (Bundle) valueTwo)) {
            return false;
        }
        else if(valueOne == null) {
            if(valueTwo != null)
                return false;
        }
        else if(!valueOne.equals(valueTwo))
            return false;
    }

    return true;
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-10-18T11:16:31.043

我已经测试了[Sam](https://stackoverflow.com/users/1267661/sam)的答案，它包含一个缺陷。另外，我现在很喜欢 Kotlin，所以这是我的版本。

*   再次，键集需要相同的大小
*   键集需要具有相同的值
*   如果两个值都被`Bundle`递归测试。
*   否则测试相等的值（不要重新测试包）

代码：

```
fun equalBundles(one: Bundle, two: Bundle): Boolean {
    if (one.size() != two.size())
        return false

    if (!one.keySet().containsAll(two.keySet()))
        return false

    for (key in one.keySet()) {
        val valueOne = one.get(key)
        val valueTwo = two.get(key)
        if (valueOne is Bundle && valueTwo is Bundle) {
            if (!equalBundles(valueOne , valueTwo)) return false
        } else if (valueOne != valueTwo) return false
    }

    return true
} 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-05T15:30:15.793

```
private static boolean equalsBundles(Bundle a, Bundle b) {
        Set<String> aks = a.keySet();
        Set<String> bks = b.keySet();

        if (!aks.containsAll(bks)) {
            return false;
        }

        for (String key : aks) {
            if (!a.get(key).equals(b.get(key))) {
                return false;
            }
        }

        return true;
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-03-21T12:29:35.620

为了处理：

*   具有捆绑值的捆绑
*   带有捆绑包值列表的捆绑包

我想出了这个：

```
private static boolean equalBundles(final Bundle left, final Bundle right) {
    if (!left.keySet().containsAll(right.keySet()) || !right.keySet().containsAll(left.keySet())) {
        return false;
    }

    for (final String key : left.keySet()) {
        final Object leftValue = left.get(key);
        final Object rightValue = right.get(key);
        if (leftValue instanceof Collection && rightValue instanceof Collection) {
            final Collection leftCollection = (Collection) leftValue;
            final Collection rightCollection = (Collection) rightValue;
            if (leftCollection.size() != rightCollection.size()) {
                return false;
            }
            final Iterator leftIterator = leftCollection.iterator();
            final Iterator rightIterator = rightCollection.iterator();
            while (leftIterator.hasNext()) {
                if (!equalBundleObjects(leftIterator.next(), rightIterator.next())) {
                    return false;
                }
            }
        } else if (!equalBundleObjects(leftValue, rightValue)) {
            return false;
        }
    }
    return true;
}

private static boolean equalBundleObjects(final Object left, final Object right) {
    if (left instanceof Bundle && right instanceof Bundle) {
        return equalBundles((Bundle) left, (Bundle) right);
    } else  {
        return left == right || (left != null && left.equals(right));
    }
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-09-21T07:06:30.820

单线法：

```
 static boolean isEqualBundle(Bundle a, Bundle b) {
    return a == b || (a != null && b != null && a.keySet().equals(b.keySet()) && a.keySet().stream().allMatch(s -> Objects.equals(a.get(s), b.get(s))));
}

static boolean isDeepEqualBundle(Bundle a, Bundle b) {
    return a == b || (a != null && b != null && a.keySet().equals(b.keySet()) && a.keySet().stream().map(s -> new Pair<>(a.get(s), b.get(s))).allMatch(s -> s.first instanceof Bundle && s.second instanceof Bundle ? isDeepEqualBundle((Bundle) s.first, (Bundle) s.second) : Objects.equals(s.first, s.second)));
} 
```

//测试用例

```
 final Bundle a = new Bundle(), b = new Bundle(), c = new Bundle(), d = new Bundle(), e = new Bundle(), f = new Bundle(), aa = new Bundle(), bb = new Bundle(), cc = new Bundle();
    a.putString("1", "A");
    b.putString("1", "A");
    c.putString("1", "C");
    d.putString("1", null);
    e.putString("1", null);
    f.putString("2", null);

    aa.putString("2", "A");
    aa.putBundle("2", a);
    bb.putString("2", "A");
    bb.putBundle("2", b);
    cc.putString("2", "C");
    cc.putBundle("2", c);

    boolean isEquals1 = isEqualBundle(a, b); //true
    boolean isEquals2 = isEqualBundle(a, c); //false
    boolean isEquals3 = isEqualBundle(d, e); //true
    boolean isEquals4 = isEqualBundle(d, f); //false
    boolean isEquals5 = isEqualBundle(aa, bb); //false
    boolean isEquals6 = isEqualBundle(aa, cc); //false
    boolean isEquals7 = isDeepEqualBundle(aa, bb); //true
    boolean isEquals8 = isDeepEqualBundle(aa, cc); //false 
```

# java - 如何避免VerifyError：“期望在堆栈上找到未初始化的对象”对于已经初始化的对象

> ID：13234997
> 
> 赞同：0
> 
> 时间：2012-11-05T15:17:11.183
> 
> 标签：java, instrumentation, java-bytecode-asm

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T15:54:25.477

The verifier is correct to reject your code (see JVM specification). There is no way to bypass bytecode verifier.

One way around is to inline the mediator code at the point of constructor invocation. You still can invoke parts of mediator as method calls before or after the invocation of the constructor, but the very constructor invocation has to be in the same method as the new instruction.

Another way is to make special mediators for every class being instantiation, so the mediators invoke the `new` instruction themselves, along with the constructor call.

You can also look at existing AOP libraries if they can do the required job correctly.

# jdbc - 在 EJB3 无状态 bean 中执行 JDBC 查询

> ID：13234998
> 
> 赞同：1
> 
> 时间：2012-11-05T15:17:17.293
> 
> 标签：jdbc, ejb-3.0, facade

我正在为我的服务**EJB3**无状态 bean 使用以下模式。基本上，每个数据库表都通过一个**DAO / 外观**类型类（本身也是一个无状态**EJB3** bean）公开。

然后将我假设*的 AService* bean 注入它需要使用的各种数据库表的外观。但是，外观中没有提供某些更复杂的逻辑或逻辑（它们专门用于一个表上的 CRUD 类型的操作）。出于这个原因，我还直接注入了**DataSource**，这样我就可以将**JDBC**用于更复杂的查询。

在我的方法中是否有任何明显或微妙的反模式/警告？

```
 @Stateless
 @Local (IAService.ILocal.class)
 @Remote(IAService.IRemote.class)
 public class AService implements IAService.ILocal, IAService.IRemote{

     @PersistenceContext(unitName = "cashflowPU")
     private EntityManager em;

    // inject CRUD facades for straightforward operations
    @EJB
    private ITableAFacade.ILocal tgAFacade;
    ...

    // inject the data source for non-straightforward operations that require JDBC
    @Resource(mappedName="java:/cashflow") DataSource dataSource;

    public BigDecimal methodThatNeedsComplexQuery (...params) throws SQLException {
        Connection conn = null;
        BigDecimal retValue = null;
        try {
             conn = dataSource.getConnection();
             PreparedStatement pstm = ...
             ResultSet rs = pstm.executeQuery(); ...
             while (rs.next()) ...
        } finally {
             conn.close();
             return retValue;
        }
    }                                                      
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:23:58.727

您也可以使用 EntityMangaer.createNativeQuery(String sqlString) 而不是注入数据源。